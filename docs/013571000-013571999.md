# StackOverflow 问答 13571000-13571999

# c# - 如何在 C# 中更快地播放 SWF 文件

> ID：13571000
> 
> 赞同：1
> 
> 时间：2012-11-26T18:34:41.703
> 
> 标签：c#, axshockwaveflash

有没有办法使用 axShockwaveFlash 控件更改 fps？

我在想我可以使用计时器并更快地进入下一帧，但它严重影响了声音的流动。我不想跳过帧，但我想快速播放它们。

有任何想法吗？

# c - 通过模糊匹配检测重复名称

> ID：13571001
> 
> 赞同：3
> 
> 时间：2012-11-26T18:34:45.540
> 
> 标签：c, algorithm, sqlite, search, fuzzy-search

我有一个具有 (user_id, name) 的 SQLite 数据库。我想通过名称检测用户是否已经在系统中。问题在于该名称来自用户，这意味着他可能拼错该名称，或者它可能是该名称的替代版本：“Tim”与“Timothy”。所以我想要一个函数，它可以找到与输入最接近的匹配项，并给出相似度的置信度来确定是否存在匹配项。置信度应该在 0 到 1 之间（这样我就可以设置一个有意义的截止值）。

桌子：

```
1 | 蒂姆·贝斯特
2 | 罗杰·托马斯
3 | 罗珀酒吧

```

*   如果用户输入`Timothy Bert`该函数应该返回`1 | Tim Best | 0.8`（0.8 是置信度，如果它碰巧是这样的话）。
*   如果用户进入`Roper Thomas`该函数应该返回`2 | Roger Thomas | 0.6`
*   如果用户进入`Tim Taylor`该函数应该返回`1 | Tim Best | 0.3`
*   如果用户进入`Foo Taylor`该函数应该返回`2 | Roper Thomas | 0.0`

理想情况下，如果我可以在 SQLite 中编写一个查询来执行此操作，那将是最好的，但如果那不可能，我也会采用 ac 解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T22:05:52.723

有几种解决模糊字符串匹配的尝试。[谷歌告诉你很多，维基百科](http://en.wikipedia.org/wiki/Approximate_string_matching)也是如此。最受欢迎的是[Levenshtein](http://en.wikipedia.org/wiki/Levenshtein_distance)。其他有趣的方法是[Jaro-Winler](http://en.wikipedia.org/wiki/Jaro%E2%80%93Winkler_distance)和Trigram[匹配](http://ii.nlm.nih.gov/MTI/trigram.shtml)。

我的个人经验表明，您必须使用现有的算法。我在匹配“FirstName LastName”与“LastName，FirstName”时遇到了问题，唯一适合我需要的算法是我从提供的链接开发的修改后的 Trigram。

根据您的需要，您还应该保留一个名称缩写字典，以便您可以将每个简短形式转换为其基本名称，然后进行模糊比较。然而，这很可能会失败，例如“Tin Taylor”，其中“Tin”拼写错误“Tim”不会导致“Timothy Taylor”。

为了涵盖这一点，您将需要一个可以“学习”的查找，即由某些人编辑。

# ruby-on-rails - ActiveRecord update_attributes 忽略无效键

> ID：13571003
> 
> 赞同：3
> 
> 时间：2012-11-26T18:34:55.953
> 
> 标签：ruby-on-rails, ruby, activerecord

是否有类似的内置方法`update_attributes`会忽略作为参数传入的哈希中的无效键？如果不是，那么处理向您发送可能包含或不包含有效密钥的哈希的情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:21:23.167

一种选择是运行 obj.valid？并在调用 update_attributes 之前删除无效键（来自 obj.errors 数组的键）。

```
def update_valid_attributes(o)  
  o.errors.messages.each do {|k,msg| o.delete k} if !o.valid?
  o.update_attributes
end 
```

如果您希望在所有持久实体中使用此方法，也可以将此方法添加到 ActiveRecord::Base。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:55:29.743

我不知道有什么东西可以在 Rails 中开箱即用地实现这一点。我也不知道有一种简单的方法来确定模型的“定义属性”是什么——因为模型可能具有覆盖的设置器、虚拟属性等。每当我需要这个功能时，我只是明确地定义了类中可接受的符号列表，如下所示：

```
class Foo < ActiveRecord::Base
  def defined_attributes
    [ :a, :b, :c ]
  end
end 
```

...然后在稍后的某种过滤步骤中使用它：

```
 attrs = { :a => 1, :z => 0 }
  foo.update_attributes(attrs.slice(*foo.defined_attributes)) 
```

# sql - 我可以将数据从一个托管数据库导入到另一个托管数据库吗？

> ID：13571008
> 
> 赞同：0
> 
> 时间：2012-11-26T18:35:28.200
> 
> 标签：sql, sql-server

我有两个通过 SSMS 远程连接的数据库，它们都托管在 GoDaddy 的服务器上，但不在同一台服务器上。

我想对两个数据库运行一个脚本，从 db1 中提取一些数据，然后将数据导入 db2。

**无论如何我可以做到这一点，或者我会更好地编写一个可以访问两个 SQL 连接并从那里运行脚本的小程序？**

db2 中的数据将仅保存其中一个 db1 表中几列的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:39:41.673

通常，您可以通过 DTS（导入/导出向导）使用 SSMS 导出/导入数据。右键单击数据库节点并选择任务->导入或任务->导出时访问向导

# perl - 将十六进制字符作为参数传递的正确方法 - system()

> ID：13571014
> 
> 赞同：3
> 
> 时间：2012-11-26T18:35:51.653
> 
> 标签：perl, buffer-overflow

我正在处理缓冲区溢出问题，并且正在尝试执行返回 libc 漏洞。为了帮助我，我设计了以下 perl 脚本：

```
#!/usr/bin/perl

for ($i = 1; $i < 200; $i++) {
    print "count: $i\n";
    system("echo 1 | ./vuln " . "A"x$i . "\x20\x83\x04\x08AAAA\x5c\xf9\xff\xbf");
} 
```

这是我的目标代码（`./vuln`）：

```
#include<stdio.h>
#include<string.h>

main( int argc, char **argv)
{
    char buffer[80];
    printf("%d\n%s\n", strlen(argv[1]), argv[1]);
    getchar();
    strcpy(buffer, argv[1]);
    return 1;
} 
```

这是脚本的输出：

```
count: 1
1
A
count: 2
2
AA
count: 3
3
AAA
count: 4
4
AAAA
count: 5
5
AAAAA 
```

这表明连接的最后一个字符串（具有大量十六进制字符的字符串）的任何部分都没有成功作为参数传递。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T18:42:16.140

试试这个：

```
system("echo 1 | ./vuln '" . "A"x$i . "\x20\x83\x04\x08AAAA\x5c\xf9\xff\xbf'"); 
```

0x20 是空格，因此没有引号之后的所有内容都是一个单独的参数。

# css - 如何更改 li 样式以使用字符？

> ID：13571016
> 
> 赞同：-1
> 
> 时间：2012-11-26T18:35:55.097
> 
> 标签：css

我正在编写一个包含很多内容的教程，如下所示：

> $ 在 Bash 提示符下
> 输入内容 > 在 IRB 提示符下输入内容

在其他教程中，我几乎总是看到`$`和提示是内联编写的，但用 CSS`>`设置我的 s 样式似乎更合适。`li`

我找到了两种方法来做到这一点：

```
ul li:before {
  content: "\003E \0020";
}

ul li {
  list-style-type: none;
  margin-left: -15px;
} 
```

和：

```
ul {
  list-style-image: url(irb.gif);
} 
```

对我来说都不好。第一个实际上并没有改变`li`样式：它只是隐藏它并预先添加一个字符。第二个在角色应该做的伎俩时使用图像。

还有其他更好的方法吗？如果不是，这两个中哪一个更可取？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:39:42.807

我会[少](http://lesscss.org/)用，做：

```
 li { you:style;
         another:style;

      &:before {  content: "\003E \0020"; }

  } 
```

# r - 使用 mapply 的问题

> ID：13571030
> 
> 赞同：0
> 
> 时间：2012-11-26T18:37:16.507
> 
> 标签：r

我正在尝试使用 mapply 函数创建等高线图。我是 R 的新手，我已经阅读了其他关于 mapply 的帖子，但我仍然没有得到 mapply 函数的精髓。我陷入了以下问题。

我有一个返回值的函数 px （它接受 2 个参数）。我正在尝试使用 draw.graph 函数制作等高线图，该函数将接收 2 个序列 (n1,n2) 作为参数。但是，我一直收到一个错误，说 contour() 中的 z 不是矩阵。

我尝试使用 browser() 并意识到在执行 mapply() 之后，我没有得到一个矩阵。所以我的问题是如何在这种情况下使用 mapply 函数获取矩阵？？？如果可能的话，有人能指出我在代码中犯的错误吗？我不断收到以下错误：

```
 Error in contour.default(n1, n2, y) : no proper 'z' matrix specified

    # This function returns a value only    
        px <- function(mu.a, mu.b)
            {
                   #Note that x is just a vector in this context. specified
                   # outside the function. Since it is very long, I want specify it here.           
                    n1 <- dnorm(x, mean = mu.a, sd = 0.3)
                n2 <- dnorm(x, mean = mu.b, sd = 0.3)

                pxd<- 0.7 * n1 + (1-0.7) * n2

                return
                {
                    prod(pxd)
                }   
            } 
            #I am trying to generate a contour plot below of the function px.q3 with
           # arguments n1,n2, which will be sequences
            draw.graph <- function(n1,n2)
            {   

                y <- mapply(px,n1,n2)
                browser()
                contour(n1,n2,y)
            }
            draw.graph(seq(1.0,1.6,0.01),seq(2.4,3,0.01))

My aim of the draw.graph function is to get a contour plot as a function mu.a(i.e. n1) and mu.b(i.e. n2) <- 2 sequences. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T19:28:51.427

您没有将 x 的任何值传递给此函数...我假设您使用的是全局的？？？淘气！

你可以像这样让 px 变得有趣

```
px <- function(mu.a, mu.b, x)
        { etc.. 
```

然后您可以使用**MoreArgs**选项指定 x

```
y2 <- mapply(FUN=px,n1,n2, MoreArgs=list(x), SIMPLIFY = T) 
```

y2 是一个向量而不是你需要重塑的矩阵

```
dim(y2)=c(length(n2), length(n1)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T23:55:42.617

在这里，您可以使用**outer()而不是使用****mapply(** ) .. 而不是分段执行所有组合，这就是我认为您想要的？**注意**使用**Vectorize()**创建一个向量化函数，该函数接受**mu.a**和**mu.b**作为向量，而**x**对于所有组合都是固定的。

 ******这下面肯定有效（即产生一个工作图），但我不确定它应该看起来像那样？？？

```
x1 = seq(0, 1,.1)
n1=seq(1.0,1.6,0.01)
n2=seq(2.4,3,0.01)

#question 3 - as a function mu.a, mu.b
px.q3 <- function(mu.a, mu.b, x=x1)
{
  n1 <- dnorm(x, mean = mu.a, sd = 0.3)
  n2 <- dnorm(x, mean = mu.b, sd = 0.3)
  #p(x_d)
  pxd<- 0.7 * n1 + (1-0.7) * n2

  return
  {
  prod(pxd)
  }   
}

vectorised.px.q3=Vectorize(px.q3)
y= outer(n1,n2, FUN=vectorised.px.q3)
contour(n1,n2,y) 
```******

# c++ - C++ 将 char 数组的一部分复制到另一个 char 数组

> ID：13571032
> 
> 赞同：4
> 
> 时间：2012-11-26T18:37:22.477
> 
> 标签：c++

我正在尝试仅将字符串（或 char *）的一部分复制到另一个字符串（或另一个 char *）中

```
char * first_string = "Every morning I"
char * second_string = "go to the library, eat breakfast, swim."
char * final_string; 
```

我想将第二个字符串的**一部分**复制到第一个字符串中。

例如：

*每天早上我都吃早餐。*

什么函数允许您从字符串中的特定点开始仅复制字符串的一部分？

**注意：**如果可能的话，我不想使用字符串变量，而是 char *，甚至 char 数组。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T18:38:24.080

它是`std::copy`，但是使用您的代码会导致未定义的行为，因为您有指向字符串文字的指针，这是非法修改的。

你需要类似的东西

```
char first_string[256] = "Every morning I";
char second_string[256] = "go to the library, eat breakfast, swim.";

std::copy(
    &second_string[23],
    &second_string[36],
    &first_string[strlen(first_string)]
); 
```

指数可能会关闭。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T18:48:48.897

如果你真的想，使用 strcat （如果你不使用字符串，你应该可以使用 C 函数）：

```
const char * first_string = "Every morning I";
const char * second_string = "go to the library, eat breakfast, swim.";
char final_string[80]; // make sure it's big enough - I haven't counted ;-)

strcpy(final_string, first_string);     // copy to destination
strcat(final_string, second_string+18); // append part of the second string 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T19:03:27.027

我会像这样使用'strncat（）'：

```
const char * first_string = "Every morning I";
const char * second_string = "go to the library, eat breakfast, swim.";

char final_string [200];

//Copies first string first
strcpy(final_string, first_string);

//Copies second string
strncat(final_string, second_string[ text_position ], text_length); 
```

替换为您可能要开始复制文本`text_position`的位置，并替换为您要复制的文本部分的长度。`second_string``text_length`

这样，您可以复制文本的单独部分，而不必从字符串的某个点复制到末尾。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-10-22T19:12:46.143

您可以使用带有 "," 的 strtok 作为分隔符来分隔第二个字符串的各个部分，然后使用 strcat 将该部分附加到第一个字符串上

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T18:53:49.500

您可以使用`strstr()`搜索所需部分的开头，然后`strcat()`进行连接。

```
char * first_string = "Every morning I";
char * second_string = "go to the library, eat breakfast, swim.";
char * final_string;

char* s = "eat";
char* r = strstr(second_string, s);

strcat(final_string, first_string);
strcat(final_string, " ");
strcat(final_string, r); 
```

# jsp - 从jstl中的arraylist获取值

> ID：13571039
> 
> 赞同：0
> 
> 时间：2012-11-26T18:38:09.290
> 
> 标签：jsp, jstl

我试图从一个数组列表中获取值（从一个 servlet 类发送这个数组列表）并将它们显示在一个 jsp 页面上。我正在使用 jstl 标签。我看了一些例子，我不知道为什么，但程序总是出错。这是我的错误信息：

```
org.apache.jasper.JasperException: An exception occurred processing JSP page /result.jsp at line 26

23:    </br></br>Match Score: <c:out value="${score}"/>
24:    <c:forEach items="${alternativedrugs}" var="alternativedrug">
25:    </br></br>
26:    </br></br>Drug <c:out value="${alternativedrug.name}"></c:out>  
27:    </br></br>Drug Description: <c:out value="${alternativedrug.description}"></c:out>  
28:    </br></br>Drug Targets:  <c:out value="${alternativedrug.targets}"></c:out>  
29:    </br></br>Drug Interactions: <c:out value="${alternativedrug.interactions}"></c:out> 
```

这是我的jstl代码：

```
This Drug Found
<c:forEach items="${alternativedrugs}" var="alternativedrug">
</br></br>Drug Name: <c:out value="${alternativedrug.getName()}"/>
</br></br>Drug Description:     <c:out value="${alternativedrug.getDescription()}"/>
</br></br>Drug Targets:     <c:out value="${alternativedrug.getTargets()}"/>
</br></br>Drug Interactions:    <c:out value="${alternativedrug.getInteractions()}"/>
</br></br>Match Score:  <c:out value="${score}"/> 
```

对象等级：

```
package drugtargetdisease;

import java.util.ArrayList;

public class MyDrug {

ArrayList<String> partner = new ArrayList();

private String targets = "";
private String name ="";
private String description ="";
private String interactions = "";
public MyDrug(){

}
public String getTargets() {
    return targets;
}
public void setTargets(String targets) {
    this.targets = targets;
}
public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public String getDescription() {
    return description;
}
public void setDescription(String description) {
    this.description = description;
}
public String getInteractions() {
    return interactions;
}
public void setInteractions(String interactions) {
    this.interactions = interactions;
}

} 
```

Servlet 部分（alternativedrugs 是 MyDrug 对象的 ArrayList）：

```
otherdrug.setName((String) myentity.getProperty("drug"));
        otherdrug.setDescription(((Text) myentity.getProperty("description")).getValue());
        otherdrug.setInteractions(((Text) myentity.getProperty("interactions")).getValue());
        otherdrug.setTargets(((Text) myentity.getProperty("target")).getValue());
        if(!otherdrug.getName().equals(maindrug.getName())){
        if(MaxScore <= compare.getExpected(maindrug.getTargets(), otherdrug.getTargets(),maindrug.getInteractions(), otherdrug.getInteractions())){
            MaxScore = compare.getExpected(maindrug.getTargets(), otherdrug.getTargets(),maindrug.getInteractions(), otherdrug.getInteractions());
            alternativedrugs.add(otherdrug);
        }
req.setAttribute("alternativedrugs", alternativedrugs);
    req.setAttribute("score", MaxScore);
        try {
            rd.forward(req, resp);
        } catch (ServletException e) {
            e.printStackTrace();
        } 
```

完整跟踪：

```
 Stacktrace:
at org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:510)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:419)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
at com.google.appengine.tools.development.PrivilegedJspServlet.access$101(PrivilegedJspServlet.java:23)
at com.google.appengine.tools.development.PrivilegedJspServlet$2.run(PrivilegedJspServlet.java:59)
at java.security.AccessController.doPrivileged(Native Method)
at com.google.appengine.tools.development.PrivilegedJspServlet.service(PrivilegedJspServlet.java:57)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
at org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:327)
at org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:126)
at guestbook.CompareServlet.doPost(CompareServlet.java:85)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:110)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:380)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: javax.el.PropertyNotFoundException: Could not find property name in class guestbook.MyDrug
at javax.el.BeanELResolver.toBeanProperty(BeanELResolver.java:430)
at javax.el.BeanELResolver.getValue(BeanELResolver.java:290)
at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:231)
at org.apache.el.parser.AstValue.getValue(AstValue.java:123)
at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:186)
at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:935)
at org.apache.jsp.result_jsp._jspx_meth_c_005fout_005f1(result_jsp.java:201)
at org.apache.jsp.result_jsp._jspx_meth_c_005fforEach_005f0(result_jsp.java:156)
at org.apache.jsp.result_jsp._jspService(result_jsp.java:99)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)
... 55 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T21:51:41.397

所以，错误信息是`Could not find property name in class guestbook.MyDrug`。

这意味着 is no 方法

```
public String getName() 
```

在`guestbook.MyDrug`. （请注意，它可以返回任何内容，而不仅仅是字符串。但由于属性是`name`，我假设它的类型是`String`）。

JSP EL 访问 bean*属性*。它不会访问您班级的公共领域。使用公共字段是一种不好的做法，JSP 不鼓励这样做。将您的字段设为私有，并在必要时提供访问器（getter 和 setter）。如果要从 JSP 中读取字段，则需要一个 getter。

# c# - 编译器用 try-catch 块做什么

> ID：13571041
> 
> 赞同：-2
> 
> 时间：2012-11-26T18:38:14.820
> 
> 标签：c#, .net, exception, compiler-construction

我想知道 CSC 编译器用 TRY-CATCH 块做了什么。例如，编译器将如何处理如下代码？
在编译为 MSIL 之前，编译器是否会将基本代码更改为其他形式的 C# 代码？我可以预览此代码吗？使用 TRY-CATCH 块的编译器规则是什么？

```
try
{
    int x =45;
    var obj = new MyObject(++x);
    obj.MyMethod(1234, "qwerty");
    short result = x / obj.Function(x);
}
catch(Exception ex)
{
    Console.Writeline(@"Something goes wrong :/");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T18:41:38.043

看看这篇文章的详细信息：

[编译器内部结构 - Microsoft 编译器如何解释 Try/Catch/Throw](http://www.codeproject.com/Articles/175482/Compiler-Internals-How-Try-Catch-Throw-are-Interpr)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T18:42:50.047

见这里：[http ://weblogs.asp.net/kennykerr/archive/2004/09/15/230167.aspx](http://weblogs.asp.net/kennykerr/archive/2004/09/15/230167.aspx)

在 IL 中，try-catch 块实际上看起来与在源代码中非常相似。IL 的具体内容取决于您在源代码中指定的内容；有几个构造，例如`.fault`（类似于`finally`但仅在抛出异常时执行），它们没有 C#/VB 等效项，但编译器仍然可以识别“常见”错误处理代码的行并将它们放入单`.fault`块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T18:42:01.250

try-catch 是一个在编译时完全分析的概念，因此在运行时不会产生太大影响。

请查看此[链接](http://www.codeproject.com/Articles/175482/Compiler-Internals-How-Try-Catch-Throw-are-Interpr)。它肯定会帮助你。

# security - Codeigniter 会话 cookie 是否安全？

> ID：13571042
> 
> 赞同：1
> 
> 时间：2012-11-26T18:38:15.430
> 
> 标签：security, codeigniter, session, cookies

我想知道用户如何操纵他的cookie。

据我所知，CI 可以知道这一点（因为 cookie 末尾的关系 cookie_value/unique_key）以及何时发生 CI 更新 cookie。

他记录了这个：

> 会话 cookie 数据与预期不符。这可能是一次可能的黑客攻击

关键是，有些人说使用原生 php 会话来存储登录数据，但被盗的风险是相同的（对于 CI cookie 可能更少）。我能看到的唯一区别是用户可以看到 CI cookie 会话中存储了哪些数据。

那么 CI 会话 cookie 是否安全？或者为什么它不如原生 php 会话安全？

对于一个高流量的网站，我也关心降低负载费用。

对不起我糟糕的英语..

**编辑解释 CI 会话验证：**

假设您**不想存储敏感数据**，会话 cookie 将不会被加密并且不会保存在数据库中。

根据 CI 2.1.3 会话库，`CI_Session::sess_read()`在第 135 行声明的方法和`CI_Session::ses_write()`在第 235 行声明的方法。

**当 CI 创建 cookie 时，它​​会将这些数据**

```
[array]
(
     'session_id'    => random hash,
     'ip_address'    => 'string - user IP address',
     'user_agent'    => 'string - user agent data',
     'last_activity' => timestamp
) 
```

它序列化这个数组并在最后放置一个 md5 哈希（来自序列化数据和配置中提供的加密密钥）。

```
// if encryption is not used, we provide an md5 hash to prevent userside tampering
$cookie_data = $cookie_data.md5($cookie_data.$this->encryption_key); 
```

**所以当会话库会从下一个http请求初始化到CI**

它会问自己：

1.  `data`与`hash`会话 cookie分开
2.  md5`hash`是否等于`md5( data + encryption_key )`？
3.  `data`可以反序列化吗？
4.  所有最小的数据都在这里吗？
5.  这个会话过期了吗？
6.  IP匹配吗？
7.  USER AGENT 匹配吗？

如果这些答案中的任何一个为“否”，CI 会话将被销毁并重置。

所以请告诉我，这种情况下除了 PHP 本机会话之外的相对风险。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-09T17:21:29.147

只回答“所以请告诉我，这种情况下除了 PHP 本地会话之外的相对风险”部分。

窃取会话的一个好方法是在某人的计算机上复制 cookie 并发送给自己（无论是否使用数据库表！！！！！！）然后在另一台计算机上重新使用该 cookie。当然，每个 Web 应用程序都对这种攻击持开放态度。

虽然我实际上喜欢@am05mhz 的想法，但如果您在公司中，您可能会在网络服务器上显示为相同的确切 IP 地址，而我仍然成功窃取了用户会话的副本，现在可以伪装成他.. ...在我看来，尽管我发现这个想法很有趣，但我越想越觉得整个 ip 事情不值得。

在其他基于服务器端会话的应用程序中，这也可以通过获取映射到服务器端会话的 cookie（或 jsessionid，如果在 java 和 cookie 被关闭）......毕竟总是有一些状态Web 浏览器将您映射回服务器端会话。

无论如何，如果您使用 https 并且您在 cookie 或 http 标头中使用了正确的 secureOnly 标志（不记得确切的标志），那么您将获得尽可能安全。

如果您发送整个会话客户端，您真正需要担心的唯一一件事就是永远不会将关键数据放入其中，例如密码或信用卡号等。

我们还会在 20 分钟后让我们网站上的用户超时，并删除 cookie 作为安全措施。

我不知道是否对任何人有帮助，但我想我会发布它。

编辑：重新审视 ip 的事情。对于 http，ip 工作非常好，因此您公司之外的任何人都无法窃取您的会话，但您公司内部的任何人仍然可以窃取您的会话。（即，如果通过 http 登录，无论是否使用数据库会话存储，都非常容易发送会话 cookie）。

院长

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:13:09.590

我强烈建议将会话存储在数据库中，因为这样更安全，要存储会话，您必须首先为此创建一个数据库表。

有关更多详细信息，请参阅文档中的[将会话数据保存到数据库](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)部分。你也可以加密cookies。[Hera 是关于CodeIgniter 会话](https://stackoverflow.com/questions/2005552/codeigniter-sessions-vs-php-sessions)的另一个答案，它不会像您在评论中提到的那样使您的网站变慢，并且请记住，如果您将未加密的会话数据保存在用户的计算机中，那么这真的不是一个好主意，我建议您不要这样做它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-26T19:02:33.137

CI 登录 cookie 实现了持久登录，这是一项记住我的功能，其中值保存在数据库中并设置在 cookie 中并返回给用户。如果两个值都匹配，则用户已通过身份验证。如果您不使用此功能，那么您应该使用 PHP 会话来存储身份验证/授权相关数据，这没有什么区别。您还可以为会话 cookie 启用 httpOnly 选项。

# javascript - SockJS 消息的最大大小是多少？

> ID：13571043
> 
> 赞同：6
> 
> 时间：2012-11-26T18:38:15.867
> 
> 标签：javascript, websocket, vert.x, sockjs

我正在使用 Vert.x 和 SockJS 来传输封装在消息中的数据。是否有规范 SockJS/Websocket 消息可以有多大？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T09:59:19.903

SockJS 消息的大小没有明确的限制。但不幸的是，SockJS 非常脆弱，不应该用于发送大量数据。在理想世界中，您将通过 SockJS 发送控制消息（延迟敏感），并使用外部方法（例如使用 AJAX 调用）发送大负载（用于吞吐量）。

在技​​术方面，您应该能够通过 websockets 传输几乎所有内容，但在流式传输和轮询方面，您需要更加小心。具体来说，轮询请求必须在 5 秒内重新建立，当浏览器向服务器发送数据占用所有带宽时，这可能会很困难。因此，不建议使用 sockjs 上传大型 blob。

# redirect - 从选择下拉菜单中创建“选择语言”Cookie

> ID：13571044
> 
> 赞同：0
> 
> 时间：2012-11-26T18:38:15.617
> 
> 标签：redirect, select, cookies, drop-down-menu

我有一个“选择您的语言”模式，当用户首次访问该网站时会出现该模式。然后他们可以选择他们想要的语言，然后将创建和存储一个 cookie。当用户重新访问该站点时，他们将被自动重定向到他们选择的语言。当我选择一个选项时正在创建 cookie，但它的内容等于“%2F”并且没有发生重定向。我想这是因为我没有调用某种“页面加载”函数，并且所有内容都在 bind() 函数中，但是我不知道从这里去哪里。

这是带有以下代码的页面：

[http://www.watsu.se](http://www.watsu.se)

这是我到目前为止所拥有的：

```
jQuery(function($){
  $('#language-select').bind('change', function () {

      var url = $(this).val(); // get selected value

      if (url) { // require a URL

          $go = $.cookie('lang', url, {expires: 7}); // create cookie from select URL

               if ($go){ //if the cookie exists
                     window.location = url; // redirect
                       }
               else {
                // do nothing until cookie is created
                    }

               }

      return false;
  });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:25:38.360

从一位非常友善的互联网用户那里找到了解决方案。我一开始并没有告诉它去那里。这是以防其他人需要这个：

```
jQuery(function($) {
    var usrLang = $.cookie( 'lang' );
    (usrLang === null) || ( window.location.href = usrLang );
}); 
```

# php - 从日期字段mysql将工作日插入表中

> ID：13571046
> 
> 赞同：0
> 
> 时间：2012-11-26T18:38:22.477
> 
> 标签：php, mysql, html, date

我有一个 HTML5 表单，其中包含日期，然后通过 PHP 提交到我的 MySQL。在我的显示结果页面上，我使用`DATE_FORMAT`. 显示日期和工作日时一切正常。我还有一个搜索功能，可以在数据库中查找输入的术语。

问题是，工作日没有存储在数据库中。仅存储日期。因此，如果用户搜索“星期一”，则不会显示任何内容。我也无法真正弄清楚如何在我的`INSERT`声明中插入工作日，因为我的 HTML5 表单中实际上没有工作日的字段。

如果你了解我的困境，你能帮助我吗？我基本上需要将当前工作日插入到我表中它自己的列中，而不需要用户做任何额外的工作。

如有必要，我可以提供代码示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:42:51.123

您可以创建一个包含该信息的隐藏字段：

```
<input type="hidden" name="weekday" value="Tuesday" /> 
```

然后当它被提交时，它将被保存而用户无需做任何事情。

您可以使用 php strtotime 和 date 函数从原始日期字符串中获取工作日。

# powershell - Win32_StartupCommand 不显示所有条目？

> ID：13571050
> 
> 赞同：0
> 
> 时间：2012-11-26T18:38:34.777
> 
> 标签：powershell, wmi, startup

如果我在我的系统上运行“系统配置”(msconfig.exe)，我会看到三个条目。

*   平行工具
*   爪哇和
*   投递箱

![msconfig.exe 的屏幕截图](../Images/0a83554b9c70463fa78296dfbf6b5179.png)

但是，如果我运行以下 powershell 脚本：

```
$computer = "LocalHost" 
$namespace = "root\CIMV2" 
$results = Get-WmiObject -class Win32_StartupCommand -computername $computer -namespace $namespace 
```

我只得到 Dropbox 条目。Win32_StartupCommand 不应该显示所有条目吗？ ![电源外壳](../Images/8063794e3bea692d08b971e47c08d0a6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:43:01.797

据我了解，来自的`HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Run`那些没有被列出`Win32_StartupCommand`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-22T14:27:13.280

[http://www.ghacks.net/2016/06/04/windows-automatic-startup-locations/](http://www.ghacks.net/2016/06/04/windows-automatic-startup-locations/)

这个博客说以下两个地址仅在64位系统中。

HKLM\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Run（仅在 64 位系统上） HKCU\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Run（仅在 64 位系统上）

所以我认为你也必须将它们包含在你的代码中。

# php - 使用php删除多个图像

> ID：13571052
> 
> 赞同：1
> 
> 时间：2012-11-26T18:38:57.740
> 
> 标签：php

嗨，你能帮忙吗，我正在网站内使用 php（我的第一次请温柔）建立一个网站，我将图像上传到服务器，到一个名为 inventory_images 的文件，它正在调整大小，所以我最终得到了两个图像 img01.jpg 和 resized_img01.jpg 我使用小的前端来加速加载，当观众希望看到完整尺寸的图像时，我使用大的。

我使用下面的代码，

```
// unlink the image from server
// Remove The Pic -------------------------------------------
    $pictodelete = ("../inventory_images/$id_to_delete.jpg");
    if (file_exists($pictodelete)) {
    unlink($pictodelete);
                }
    header("location: inventory_list.php"); 
     exit(); 
```

要从库存图像文件中删除图像，我怎样才能删除也取出调整大小的文件，所以两者都被删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:42:34.760

这就是我删除某个目录中的所有图像并从数据库中删除链接的方法

```
function deleteImage($image, $link)
{
    unlink($image);
    $query = mysql_query("DELETE FROM `table` WHERE `image_link` = '" . mysql_real_escape_string($link) . "'");
    return (mysql_affected_rows() > 0) ? true : false;
} 
```

# .net - 从 Json.NET 迁移到 ServiceStack.Text 时我应该注意什么

> ID：13571053
> 
> 赞同：1
> 
> 时间：2012-11-26T18:39:03.747
> 
> 标签：.net, json, json.net, servicestack

我有一个现有的 REST API，有很多消费者，主要是使用 JSON。它是用 Json.NET 构建的，但我们想迁移到使用 ServiceStack.Text 进行序列化。这个问题只是关于序列化部分，而不是关于使用 ServiceStack 来公开服务（我稍后会谈到）。

[我知道日期格式](https://stackoverflow.com/questions/11882987/why-servicestack-text-doesnt-default-dates-to-iso8601)可能存在问题，我可以处理 - 但除此之外，是否有任何差异需要注意？

有没有一种简单的方法可以测试我不会破坏任何客户？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T20:41:47.730

我发现 JSON.NET 可以处理的 ServiceStack.Text 的唯一问题是引用循环。我很高兴错了，但我认为 ServiceStack.Text 不支持忽略这些循环。（我最后一次尝试是在今年年中左右，不确定最近的更新是否增加了对此的支持）。由于我的数据库的结构方式，此问题仅出现在我身上，但它可能会发生。

**编辑：**这个问题已经解决了。所以基本上，不，根据我的经验。此外，ServiceStack 及其模块的支持非常棒，所以如果您确实遇到问题，很可能有人可以提供帮助。

# sql - 将 getdate() 转换为 int

> ID：13571054
> 
> 赞同：9
> 
> 时间：2012-11-26T18:39:06.397
> 
> 标签：sql, casting, int, getdate

当我运行以下查询时：

```
select convert(int, getdate()) 
```

我得到结果：

```
-----------
41238

(1 row(s) affected) 
```

有谁知道这是什么意思？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T18:42:54.620

它是我认为以来的天数`1/1/1900`，sql-server 保持从那时起的天数。

尝试将该数字除以大约 365。您应该以年份 (112) 获得该值。自 1900 + 112 = 2012

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T18:41:59.703

这是因为 SQL 本身会保留自`01/01/1900`

整数值后面的小数是时间。

`32.5`等于`02/01/1900 12:00 pm`

如果您希望仅将日期的一部分作为整数获取和使用，我建议您使用[datepart](http://msdn.microsoft.com/en-us/library/ms174420.aspx)

该语句将仅返回月份并将该值转换为整数。

```
select convert(int, datepart(mm,getdate()) 
```

# extjs - 如何在 ExtJS 的面板中垂直居中文本？

> ID：13571061
> 
> 赞同：0
> 
> 时间：2012-11-26T18:39:42.420
> 
> 标签：extjs, extjs3

我试图在 ExtJS 面板中垂直居中一些文本。我有这个作为一个kludge，但我想知道正确的方法？

```
var instructions = new Ext.Panel(
    {
        height: 40,
        items: [
            {
                html: '<br>To access an Aircraft Profile, please highlight a row in the table and select the N-Number hyperlink displayed in the summary below the table'
            }]
    }); 
```

这是我最终使用以下答案实现的：

```
var instructions = new Ext.Panel(
    {
        height: 40,
        layout: 'hbox',
        layoutConfig: {
            align: 'middle'
        },
        items: [
            {
                xtype: 'displayfield',
                value: 'To access an Aircraft Profile, please highlight a row in the table and select the N-Number hyperlink displayed in the summary below the table'
            }]
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:42:59.487

我认为您应该能够将面板布局设置为“hbox”并使用包“中心”，或者使用 hbox 布局和包中心在面板中嵌套一个容器。

# php - 安排 PHP 脚本通过 cron 执行

> ID：13571065
> 
> 赞同：1
> 
> 时间：2012-11-26T18:40:11.060
> 
> 标签：php, mysql, curl, updating

我有一个脚本可以更新我的数据库中的一些列。它是用 PHP 编写的，我通过 URL 执行它**（例如[http://foo.com/xyz/yzx/dbupt8r](http://foo.com/xyz/yzx/dbupt8r)）**。我在脚本 URL 上使用`crontab -e`then来执行此操作`curl`，因为在我看来，这与我正在做的事情有点相似：通过 URL 访问它。有什么可取的或更好的方法吗？我是否存在安全或威胁缺陷？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:43:32.300

您始终可以使用 php 命令运行它。让您的 crontab 运行“/path/to/script.sh”，其中包含：

```
 #!/bin/bash
 cat "/path/to/phpscript.php" | php -e 
```

如果需要，您可以让它保存输出。您也可以让 CRON 运行“php -f /path/to/script.php”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:45:27.840

这取决于您可以访问什么。就个人而言，我不想依赖外部 curl 脚本来执行所需的定期作业。这种方法的缺点之一是您冒着允许世界运行您的 dbupt8r 脚本的风险。请记住，您可以运行 PHP 脚本而无需将它们置于 Web 服务器的上下文中，因此您可以在 Web 服务器上创建一个 cron 作业

```
php /my/folder/dbupt8r.php 
```

在这种情况下，无论 Web 服务器是否可用，您的定期作业都将运行，并且没有任何将其暴露给外界的风险。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T19:14:21.697

有两种方法可以做到这一点，你已经这样做了：（`curl`ing 一个可公开访问的 URL）；或直接从您的 crontab 执行 PHP 脚本。

## Cron冰壶

正如您所提到的，这通常非常方便和舒适，因为您已经在使用 PHP 开发 Web 应用程序，所以这就是您已经在工作的方式。有几个风险：

*   **最重要的是安全性**：您需要确保正确过滤输入，不存在 SQL 注入等风险，以防有人发现 URL 并试图利用它。由于您正在开发 Web 应用程序，因此希望您已经涵盖了大部分内容。
*   **频率和并发性**：您正在安排它从 cron 执行，那么如果其他人开始调用 URL 并使其更频繁地触发或在计划运行发生的同时触发，是否有任何问题？
*   **依赖`curl`**：这也意味着您依赖于`curl`执行脚本，因此您将自己暴露在许多故障点（`curl`本身、DNS 等）中。

## 从 Cron 运行 PHP

或者，您可以直接从 crontab 运行脚本。有两种方法可以做到这一点：

*   将 PHP 脚本传递给 PHP 解释器二进制文件，如下所示（注意 PHP 二进制文件的路径因平台而异，但应指定为绝对路径，因为 cron 无法访问许多环境变量）：

    ```
    */15 * * * *    /usr/bin/php -f /path/to/php/script.php 
    ```

*   或者，您可以将 hashbang/shebang 行添加到 PHP 脚本的第一行，如下所示：

    ```
    #!/usr/bin/php 
    ```

    使其可执行，例如：

    ```
    chmod 755 /path/to/php/script.php 
    ```

    并将其直接添加到您的 crontab 中：

    ```
    */15 * * * *    /path/to/php/script.php 
    ```

这种方法的优点是您可以将脚本放在不可公开访问的位置，这样您就可以确保对其访问和执行进行更严格的控制。如果您不必处理 Web 端的事情，这也可能意味着您可以编写更轻量的代码。也就是说，如果您使用的是 PHP 框架，您可能会发现很难开发像这样的独立脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T18:47:36.250

调用 URL 会使您面临超时问题，这可能会导致数据库中的事务错误。我建议您对此类过程使用命令行界面 (CLI)。

# node.js - 在 expressjs 中访问 req 3 个视图

> ID：13571069
> 
> 赞同：0
> 
> 时间：2012-11-26T18:40:20.673
> 
> 标签：node.js, express

是否可以在 ExpressJS 3 的视图中访问我的查询参数？

我有一个网址：[http ://example.com?search=blah](http://example.com?search=blah)

在我看来，我想访问搜索参数

我可以将它作为本地人传递，但想知道我是否可以直接访问它——我的实验没有成功。

不寻找直接访问的利弊 - 只是想知道它是否可能以及如何。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T19:21:45.177

`req.query`以下是从您的视图访问的几种方法：

### 在调用中将其设置为本地`render`

```
function(req, res) {
  res.render('myview', {query: req.query});
}; 
```

在您看来，您可以访问`search`为`query.search`.

### 放`res.locals`

```
function(req, res) {
  res.locals.query = req.query;
  res.render('myview');
}; 
```

在您看来，您可以访问`search`为`query.search`.

### 使用中间件

这与前面的示例类似，但我们可以以可重用的方式使用中间件。

```
function(req, res, next) {
  res.locals.query = req.query;
  next();
}; 
```

任何使用上述中间件的路由都会`res.locals.query`设置。

* * *

### 编辑

看来我误解了这个问题。目的是查看是否可以在不使用上述技术的情况下访问请求数据。据我所知，它不能。希望以上内容对某些读者仍然有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:09:08.030

我很确定只有当地人才能进入视野。

> 不寻找直接访问的利弊 - 只是想知道它是否可能以及如何。

没有优点和缺点。这就像说我想将 15 与 0 相乘，但我不希望答案是苹果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T20:34:28.913

中间件：

```
function(req, res, next) {
  res.locals.param = req.param;
  next();
}; 
```

看法：

```
<%= param.search %> 
```

# php - AsyncTask 上的连接超时

> ID：13571072
> 
> 赞同：1
> 
> 时间：2012-11-26T18:40:47.680
> 
> 标签：php, android, apache, android-asynctask

在远程服务器调用我的服务器时出现以下异常。

```
java.net.SocketException: Connection timed out
java.net.SocketTimeoutException: Connection timed out
java.net.ConnectException: failed to connect to www.my_url.com/my_ip (port 80): connect failed: ETIMEDOUT (Connection timed out)
```

我的服务器已启动，但我想有一小部分时间由于某种原因它没有响应。

我如何解释这些异常？它们是否每隔一段时间都正常，或者是一种常见的修复方法，允许在超时之前与服务器建立更长的连接时间？

我的服务器是运行 PHP 的 Apache。

感谢您提前提出建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T18:46:08.663

这些错误对于访问互联网的应用程序来说是很正常的。

但是，您可以尝试通过更改 HTTP 请求的超时值来减少它们的发生，如下所示：

```
HttpGet httpGet = new HttpGet(url);
HttpParams httpParameters = new BasicHttpParams();
// Set the timeout in milliseconds until a connection is established.
// The default value is zero, that means the timeout is not used. 
int timeoutConnection = 3000;
HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
// Set the default socket timeout (SO_TIMEOUT) 
// in milliseconds which is the timeout for waiting for data.
int timeoutSocket = 5000;
HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
HttpResponse response = httpClient.execute(httpGet); 
```

如果要设置任何现有`HTTPClient`（例如`DefaultHttpClient`或`AndroidHttpClient`）的参数，可以使用函数`setParams()`。

```
httpClient.setParams(httpParameters); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T18:50:13.247

除了提示用户某些事情不起作用并稍后重试，将其记录下来以供取证之外，您无能为力，希望它们不会那么频繁。但是，我怀疑您的服务器由于多种原因没有响应，您可以采取一些措施。

发生这种超时时检查服务器的负载。运行 top 看看是什么占用了 CPU。如果您正在运行后台作业或应用程序的负载很高。如果您的后台工作占用了 CPU，那么您需要分析您的代码并找到算法运行热的地方并改进它。如果你有负载问题或者你不能真正改进你的代码，那么你需要扩展你的服务器：更快的服务器，获得更多的内存，部署缓存，更快的数据库，运行 Quercus（比 C PHP 改进 4 倍）。或者获取更多服务器并使用负载均衡器进行水平扩展。后者很大程度上取决于您的应用程序的体系结构，但这是您可以修复的。

# c - 如何确保不同系统上的浮点数相同？

> ID：13571073
> 
> 赞同：7
> 
> 时间：2012-11-26T18:40:52.683
> 
> 标签：c, floating-point, platform-independent

如果我在 windows 和 linux(ubuntu) 上编译以下 c 行，我会得到不同的结果。我想避免。我该怎么做？

```
 double a = DBL_EPSILON;
 double b = sqrt(a);
 printf("eps = %.20e\tsqrt(eps) = %.20e\n", a, b); 
```

linux输出：

```
eps = 2.22044604925031308085e-16        sqrt(eps) = 1.49011611938476562500e-08 
```

窗口输出：

```
eps = 2.22044604925031310000e-016       sqrt(eps) = 1.49011611938476560000e-008 
```

在 linux 上使用 gcc 和 clang 在 32 位和 64 位系统上测试的结果相同。在 Windows 上使用 gcc-mingw 在 32 位和 visual-studio 上使用 32 位和 64 位进行测试，结果也相同。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T22:00:00.440

在您给出的示例中，两个程序似乎具有**相同**的浮点数。他们只是以不同的方式打印它们。围绕这个特定问题最简单的解决方案是编写自己的浮点打印函数。如果您不期望输出太好，您可以使用[此处](http://blog.frama-c.com/index.php?post/2011/10/29/A-portable-OCaml-function-to-print-floats)的函数作为伪代码来编写您自己的 C 语言。它没有正确舍入，但它适用于它的预期用途（即可重现和可读的输出）。

* * *

您的问题暗示您遇到的一个更深层次的问题是浮点**计算**在不同平台上给出不同的结果。这是因为 C 标准不强制编译器精确地实现 IEEE 754 浮点标准，特别是允许更高的中间结果精度。C 标准的这种相对宽松至少部分是由于历史上的 x86 浮点指令导致实现精确的 IEEE 754 语义的成本很高。

在 Linux 上，假设您使用的是 GCC，请尝试`-msse2`编译选项。**编辑：OP评论说`-msse2 -mfpmath=sse`对他有用。** 这使得 GCC 生成现代 SSE2 指令，提供精确的 IEEE 754 浮点语义。如果在 Windows 上您也使用 GCC，请在此处使用相同的选项。

如果您使用 Visual C：Visual C 使用另一个技巧来强制历史浮点指令匹配 IEEE 754 语义：它告诉旧的 80 位浮点硬件仅使用与 IEEE 754 双精度一样多的有效位拥有。这给出了双精度数字的准确模拟，除了一些您不会遇到的极端情况。在这种情况下，如果您的程序仅使用双精度数字（C`double`类型），它会有所帮助（*）。

(*) Visual C 编译器理论上可以生成代码，通过将每个中间结果从双精度舍入到单精度来计算精确的单精度算术，但这会很昂贵，我怀疑它是否这样做。

# ruby-on-rails - 在rails中将继承转换为组合

> ID：13571076
> 
> 赞同：3
> 
> 时间：2012-11-26T18:41:29.063
> 
> 标签：ruby-on-rails, ruby, oop, design-patterns, inheritance

我在遗留系统中有一个看起来像这样的模型：

```
 class Prize < ActiveRecord::Base

   def win
     # do a bunch of things
   end
 end 
```

我们从一个奖品开始，但像其他任何东西一样，我们正在处理的奖品类型开始扩大。所以现在 def win 正在做一大堆案例/切换来决定奖品类型。

出于这个原因，我决定这样做：

```
class DailyPrize < Prize
   def win
     #do only daily prize stuff, no type checking.
   end
end 
```

在我们将其发送给 QA 之前，该代码已经过审查，现在我被要求使用组合（mixin）而不是子类化来执行此操作。我想不出一个干净的方法来做到这一点。

遗留代码库在很多地方执行以下操作，我不想到处更改东西：

奖品 = Prize.new Prize.win

那么，我的问题是如何使用组合来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T20:46:09.527

这是我通过组合而不是继承替换您的代码的理解。

```
class Prize < ActiveRecord::Base

  def prize
    @prize ||= PrizeFactory.build(self)
  end

  def win
    prize.win
  end
end

class PrizeFactory
  def self.build(prize)
    if prize.daily?
      DailyPrize.new(prize)
    # other condition to build specific prize
    end
  end
end

class DailyPrize
  def initialize(prize)
    @prize = prize
  end

  def win
    #do only daily prize stuff
    #access @prize to get @prize attribute
    #if you use it, you have coupling (see below)
  end
end 
```

问题是，这可能并不比您的实现更好，这实际上取决于您在领域逻辑方面取得的成就。

使用组合，一个目标是减少对象之间的耦合，如果你在方法中调用了很多`@prize`对象方法`DailyPrice` `win`，那么这两个类之间的耦合很紧密，你可能会失去组合的好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:11:44.777

我能想到的一种方法是将特定奖品作为模块，例如

```
module DailyPrize
  def specific_method_1
  end

  def specific_method_2
  end
end 
```

...然后将奖品类设为：

```
class Prize
  def win
    # do something in common
    specific_method_1
    # do something in common
    specific_method_2
    # ...
  end
end 
```

然后您可以根据自己的选择混合模块，例如在实例化类时

```
def initialize (prize_type)
  # mixin the appropriate module
end 
```

# ios5 - 无法更改 Xcode 4.5 中的目标成员身份可见性

> ID：13571080
> 
> 赞同：20
> 
> 时间：2012-11-26T18:41:37.867
> 
> 标签：ios5, frameworks, xcode4.5, membership, target

我目前尝试在我的应用程序中排除我的应用程序内购买逻辑，以使其在我的其他应用程序中可重用，甚至将其放在公共 git 存储库中供其他人使用。为此，我遵循在 XCode 中创建框架的[指南。](https://github.com/jverkoey/iOS-Framework)

但在[第 2 步](https://github.com/jverkoey/iOS-Framework#step-2-create-the-primary-framework-header)中，我必须将 .h 文件的目标成员身份设置为公开。问题是，在我的 Xcode (v 4.5) 中，单击 .h 文件时看不到任何可见性（当我单击 .m 等其他文件时也看不到任何可见性）。它看起来像这样：

![在此处输入图像描述](../Images/4005a3f746ea34eb70fa437e2858e44a.png)

我在那里做错了什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-27T13:55:42.203

我遇到了同样的问题，并在发布一小时后发现了您的问题，但这是我发现的。在 Xcode 4.4 中，更改头文件的目标成员资格和可见性的功能已被删除，因此本教程将无法按所写的那样工作。

您可以将“复制标头”构建阶段添加到您在步骤 1 中创建的目标（示例中为 Serenity），而不是更改目标成员的可见性。这将有公共、私有和项目标题的 3 个部分。只需单击底部的加号和要在此步骤中公开的标题。默认情况下，它们被放置在项目部分，但您可以单击并将它们拖动到公共部分。

本教程的其余部分应该可以从那里正常工作。

编辑：刚刚注意到，在我自己的项目中，在添加复制头文件构建步骤之后，可以为头文件选择目标成员身份，因此教程按编写的方式工作。虽然我的框架标题似乎有点奇怪。在任何情况下，在构建阶段更改可见性都会反映在目标成员资格下，反之亦然

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-11-27T21:25:27.417

构建阶段 -> 添加构建阶段 -> 复制捆绑资源（以防万一）然后将文件拖放到那里......祝你好运；）

# iphone - 比较两个托管对象的属性内容？

> ID：13571088
> 
> 赞同：0
> 
> 时间：2012-11-26T18:42:03.797
> 
> 标签：iphone, objective-c, cocoa-touch, core-data

我正在根据我离开网络的数据设置一个 managedObject，在我将这个新对象添加到 managedObjectContext 之前，我想检查它是否在数据库中准备就绪。有没有办法一次比较两个托管对象，或者我是否必须单独比较每个属性才能确定它们是相同的还是包含差异的？

简单示例：

```
Entity:Pet (Created but not inserted into database)
Attribute, Name: Brian
Attribute, Type: Cat
Attribute, Age: 12

Entity:Pet (Currently in database)
Attribute, Name: Brian
Attribute, Type: Cat
Attribute, Age: 7 
```

在此示例中，我可以比较`[Brian, Cat, 12]`还是`[Brian, Cat, 7]`需要逐个检查每个属性以确定完全匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:52:03.080

唯一标识符通常用于通过仅匹配一个字段来搜索对象。正如您所注意到的，在多个字段上进行匹配可能很烦人且效率低下，但它可能并没有您想象的那么糟糕：您可以构造一个`NSPredicate`非常容易地匹配 Core Data 中对象上所有必需字段的方法。

使用`NSPredicate`side：假设你只想匹配一个字段。如果您在提供的数据中没有合适的唯一标识符，您可以派生一个。显而易见的方法是根据您要匹配的每个字段为您存储的所有内容构建一个哈希码。然后，当您希望检查“传入”对象是否已经在核心数据中时，计算新对象的哈希码，然后在核心数据中查找具有相同哈希码的对象。（注意：如果您发现一个已经存在的具有相同哈希码的对象，您可能需要比较所有字段以检查它是否确实代表同一个对象——它可能是一个“不同”对象的可能性很小，又名哈希冲突）。

对象 X 的一个非常简单的哈希码实现将类似于：

```
hashcode(X) = hashcode(X.name) + hashcode(X.type) + hashcode(X.age) 
```

要查看编​​写哈希码函数的更实际示例，请参阅[此处](https://stackoverflow.com/questions/254281/best-practices-for-overriding-isequal-and-hash)接受的答案。

顺便说一句，我假设您不想一次将所有对象从核心数据加载到内存中。但是，如果这是可以接受的（假设您的项目数量非常有限），另一种方法是在您的类上实现`isEqual`和`hash`，然后使用常规的基础类方法`NSArray indexOfObject:`（或者，甚至更好`NSDictionary objectForKey:`）来定位感兴趣的对象。

# javascript - 停止自动输入下/上个月 Datetimepicker

> ID：13571097
> 
> 赞同：1
> 
> 时间：2012-11-26T18:42:46.533
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-datepicker, datetimepicker

我正在使用 Trent Richardson 的出色[Datetimepicker](http://trentrichardson.com/examples/timepicker/)。但是，我遇到了一个特定问题，即插件不像传统的[jQuery UI Datepicker](http://jqueryui.com/datepicker/)那样工作。

当您从空白日期开始，然后按下一个或上一个来更改月份时，在 Datetimepicker 中它会自动插入一个日期和时间，而 jQuery UI 不会。它添加的事实导致我的应用程序出现问题，我只是希望它不要一开始就这样做。

这是我的初始化：

```
 function datepickerAdd() {
        $('input[name=valueTextField]').addClass('datepicker');

                $( ".datepicker" ).datetimepicker({
                        dateFormat: 'm/d/yy ',
                        timeText: '<spring:message code='customMetaData.datetimepicker.time'/>',
                        controlType: 'select',
                        timeFormat: "h:mm TT",
                        ampm: true
                });
                $('input[name=valueTextField]').attr('onPaste', 'return false')
    } 
```

有没有人可以从这个开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:39:42.820

Date 没有这样的选项，例如`alwaysSetTime`此 Datetimepicker 中的 Time。所以你必须自己实现它。只需在您的`datetimepicker`通话中添加这些行：

```
 onChangeMonthYear: function(year, month, dpInst, tpInst) {
        if(!tpInst.timeDefined && !dpInst.dateDefined) {
            this.value = '';
            dpInst.dateDefined = null;
        }
    },
    onSelect: function(date, dpInst) {
        dpInst.dateDefined = true;
    } 
```

[在这里](http://jsfiddle.net/3DzTu/1/)检查工作的 JSFiddle

# java - 计算 10 个用户输入整数数组中出现次数最少的值

> ID：13571106
> 
> 赞同：0
> 
> 时间：2012-11-26T18:43:06.287
> 
> 标签：java, arrays, counter

LeastFrequent - 从 System.in 输入的 10 个整数列表中输出出现频率最低的整数及其出现次数。如果列表中的多个整数出现频率最低，则输出任何出现频率最低的整数。将您的课程命名为 LeastFrequent。您可以假设所有 10 个整数都在 -100 到 100 的范围内。

```
import java.util.*;

public class LeastFrequent 
{
public static void main(String[] args) 
{
    Scanner scan = new Scanner(System.in);

    int[] arr = new int[10];
    int[] hold = new int[300];

    int x = 0;
    int count = 0;
    int a = 1;
    int least = 0;

    System.out.print("numbers: ");
    //adds 10 numbers to an array and counts occurrence
    for(int i=0;i<arr.length;i++)
    {
        arr[i] = scan.nextInt();
        hold[arr[i]]++;
    }

    for(int i=0;i<hold.length;i++)
    {
        if(hold[i] > 0)
        {

        }
    }

    System.out.println("least frequent: " + count + " occurs " + arr[count] + " times");
}
} 
```

我让它向用户询问 10 个整数并将其放入数组中。我还让它计算输入数字的出现并将其存储在另一个数组中。我一直在寻找最不常见的。我知道我需要再次扫描第二个阵列，但我不知道如何。关于如何在跳过等于 0 的值的同时比较第二个数组的元素值的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T18:47:09.473

首先，以下内容并不完全正确：

```
hold[arr[i]]++ 
```

如果我输入会发生什么`-1`？

`hold`至于找到最少出现的元素，您需要找到大于零的最小值。当您迭代时`hold`，您可以跟踪迄今为止看到的最小的此类值及其索引。

最后，解决该问题的另一种方法是对数组进行排序。执行此操作后，相等的值将彼此相邻。这简化了重复计数。

# python - Python; 使用“for x in range”更新列表中的多个位置

> ID：13571107
> 
> 赞同：0
> 
> 时间：2012-11-26T18:43:07.690
> 
> 标签：python, list, loops

我正在尝试编写一个游戏，其中一条蛇在矩阵中四处移动，占据一个标志的位置（在我的野蛮语言中是 tecken）。它会改变蛇的生长量，它由 p 决定，然后您可以决定它应该水平生长还是垂直生长，并且该信息在 b 和 c 中给出。然后我想要的是我的矩阵将用我的符号更新，然后我的新位置和旧位置之间的所有位置也将被我的符号替换，也就是蛇在那个位置生长。理解我的意思可能有点困难，但这是我认为可以完成工作的 for 循环。不幸的是，这并不能填补起始位置和结束位置之间的空白，它只会替换结束位置。任何人都知道我怎么能做到这一点？

```
 for antal in range(p):
                       ormfält.table[self.x-p*b][self.y-p*c] = self.tecken 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:49:17.383

range 函数从 0 开始索引：

```
>>> p = 3
>>> range(p)
[0, 1, 2] 
```

现在看看你什么时候打开你的循环；您更改了 3 个字段，但其中一个是您已经在的字段！

```
snakefield.table[self.x - 0 * b][self.y - 0 * c] = self.sign  # <-- this one
snakefield.table[self.x - 1 * b][self.y - 1 * c] = self.sign
snakefield.table[self.x - 2 * b][self.y - 2 * c] = self.sign 
```

要向前移动`p`步骤而不是`p - 1`，只需使用：

```
>>> range(1, p + 1)
[1, 2, 3] 
```

# loops - Fortran。继续阅读文档的第一个单词，直到它与输入匹配。

> ID：13571108
> 
> 赞同：1
> 
> 时间：2012-11-26T18:43:16.840
> 
> 标签：loops, if-statement, while-loop, fortran

晚上好！我正在尝试阅读 Fortran 95 中的文本文档并使用其中的值进行一些计算。该文件有许多气体名称和分配给它们的某些“A”值。所以本质上它看起来像这样：

```
Document 1: gas values.
GAS     A1  A2
steam    1  2
air      3  4 
```

然后我希望用户输入一个气体名称（变量**gasNameIn**）并实现 while 循环以继续搜索气体，直到它与输入匹配。所以例如。用户输入“**空气**”，程序开始读取第一个单词，直到出现空气。然后它读取**A1**和**A2**的值并将它们用于计算。我为它所做的是我将文件作为**单元 25**打开并尝试了以下循环：

```
do while(gasName .NE. gasNameIn)
  read(25, *) gasName
  if (gasName .EQ. gasNameIn)
    read(25,*) A1, A2
  endif
enddo 
```

但我收到错误“*第 25 单元的文件结束*”。关于我的while循环如何错误的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:58:17.543

发生的情况是，您将整行读取为“gasName”并测试整行以查看它是否等同于“gasNameIn”。如果数据按照您在样本中的方式排列，它将永远不会相同，因此您将在获得匹配之前到达文件的末尾。自从我用 Fortran 编写以来已经有一段时间了，但是在第一个循环中，“gasName”将是未定义的。通常这在编程中是不可以的。

在我输入之前得到的答案是解决您的问题的方法。搏一搏。如果您仍然遇到问题，也许我会启动一个 Fortran 编译器并再次尝试使用 Fortran。（自 90 年代初以来，我已经做过任何事情了。）

干杯！

你好，这里是你的代码修改了一下，你可以推销你不需要的东西。我只是添加了几行来使其成为一个独立的程序。例如，有一条语句将值“steam”分配给“gasNameIn”。我想你提到你会让用户为此输入一个值。我还添加了一个“写”语句来表明您的程序已正确读取这些值。这是一种粗略的“单元测试”。否则，我只解决了您的问题所涉及的程序部分。看一下这个：

```
character (len=5) :: gasName, gasNameIn

gasNameIn = "steam"

open (unit = 25, file = "gasvalues.txt")

do while (gasName .NE. gasNameIn)
   read (25, *) gasName
   if (gasName .EQ. gasNameIn) then
   backspace (25)   
       read (25,*) gasName, A1, A2
       write (*, *) "The gas is: ", gasName, ". The factors are A1: ", A1, "; A2: ", A2
   endif
end do

close (25)

end 
```

好的，这里有一些注释可以帮助澄清我所做的事情。我尽量保持您的代码完整无缺。在您的程序中，我的 fortran 95 编译器抱怨了一些事情，即：“if”测试中需要“then”，而“enddo”需要是“end do”。我认为这些是我遇到的主要编译器问题。

就您的代码而言，当您的程序测试“gasName”与“gasNameIn”相同时，您希望再次“备份”到该记录，以便您可以重新读取该行。可能有更好的方法来做到这一点，但我试图让你的程序想法保持你想要的方式。哦，是的，还有一件事，我将输入文件命名为“gasvalues.txt”。

我希望这会有所帮助。干杯！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:21:38.117

您需要将整行读取为字符串并进行处理。这是未经测试的，但它的要点：

```
character*100 wholeline
wholeline=''
do while(index(wholeline,'air').eq.0)
read(unit,'(a)')wholeline
end do 
```

那么如果你可以指望第一个字符串占用〜7 cols，就像示例中一样，

```
read(wholeline(7:),*)ia1,ia2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T00:11:02.190

通过第一个 read 语句，您正确读取了名称，但 Fortran 然后继续执行下一行（记录）。尝试使用

```
 read(25, *, advance='no') gasName 
```

如果您搜索的气体在最后一行，则会出现文件结尾错误。否则在读取 A1 时会出错。

# c# - WPF baml 序列化错误？

> ID：13571109
> 
> 赞同：1
> 
> 时间：2012-11-26T18:43:17.520
> 
> 标签：c#, wpf, xaml, baml

以下 XAML`XamlParseException`在运行时生成：

```
<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sys="clr-namespace:System;assembly=mscorlib">
  <Grid>
    <Grid.Resources>
      <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
          <ResourceDictionary>
            <TextBlock x:Key="{x:Type TextBlock}">
              <Run Text="Aaaa"/>
            </TextBlock>
          </ResourceDictionary>
        </ResourceDictionary.MergedDictionaries>
        <sys:String x:Key="aaa"></sys:String>
      </ResourceDictionary>
    </Grid.Resources>
    <Border Child="{StaticResource {x:Type TextBlock}}"/>
  </Grid>
</Window> 
```

> XamlParseException：''TextBlock' 对象上缺少键值。' 行号“10”和行位置“20”。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-26T23:11:33.463

键不能是类型，它们是字符串。

# javascript - Chrome 扩展：如何重定向到自定义 HTML 页面以响应特定的 Web 请求？

> ID：13571110
> 
> 赞同：5
> 
> 时间：2012-11-26T18:43:19.557
> 
> 标签：javascript, html, google-chrome, redirect, google-chrome-extension

我想编写一个扩展程序，将所有网络流量重定向到特定域，比如 wikipedia.org，到一个*中间*页面，上面写着“哇，小伙子。你即将去维基百科。你确定对这个？” 其次是`Yes`和`No`按钮。

当满足成为域中带有“wikipedia.org”的页面的条件时，如何响应特定的 URL 请求并用自定义页面替换所需的页面？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T19:04:02.123

您可以使用`webRequest`功能、背景页面和带有`yes`和`no`按钮的自定义页面来执行此操作。比如在后台页面写类似的东西：

```
var URLStorage;

function interceptRequest(request)
{
  if(request && request.url)
  {
    if(request.type == "main_frame") // new page/site is loading in main window
    {
      if(request.url.indexOf("wikipedia.org") > -1)
      {
        URLStorage = request.url;
        return {redirectUrl: chrome.extension.getURL("confirmation.html")};
      }
    }
  }
}

chrome.webRequest.onBeforeRequest.addListener(interceptRequest, {urls: ["*://*/*"]}, ['blocking']); 
```

这个例子并没有严格检查域中是否提到了维基百科，但为了清楚起见，我这样做了。在我的真实代码中，使用了一个特殊的“URL”类，它解析传递的 url 并为它的每个部分提供属性，因此可以有选择地检查它们。

只需放置 2 个按钮，并将`confirmation.html`它们绑定到适当的代码，例如，如果用户回答“是”，则重定向到请求的站点。

```
$('#okbutton').click(function()
{
  document.location.href = chrome.extension.getBackgroundPage().URLStorage;
}); 
```

不要忘记在`permissions`清单部分提及“webRequest”和“webRequestBlocking”。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-26T18:56:28.683

您可以创建一个内容脚本，将 javascript 代码注入用户访问的每个页面。在您的内容脚本中，您可以让 js 针对无效 url 检查当前 url 并相应地重定向它们。

我认为内容脚本在页面加载后加载，因此用户可能会在短时间内看到他们正在寻找的页面，然后被重定向到您的登录页面。在此处查看内容脚本文档：http: [//developer.chrome.com/extensions/content_scripts.html](http://developer.chrome.com/extensions/content_scripts.html)

```
{
  "name": "My extension",
  ...
  "content_scripts": [
    {
      "matches": ["http://www.google.com/*"],
      "css": ["mystyles.css"],
      "js": ["jquery.js", "myscript.js"]
    }
  ],
  ...
} 
```

“匹配”你应该使数组类似于

```
"matches": ["http://www.*.com/*", "http://*.com/*, "https://www.*.com/*", "https://*.*.com/*] 
```

并且“js”将是您要用于将注入写入页面的 javascript 文件的名称。

就像是：

```
if(window.location == "http://wikipedia.com"){
     window.location.href = "http://mysplashpage.com";
} 
```

当然，该 js 并非在所有情况下都有效，例如，如果用户试图访问目标网站的目录。您可能需要一些正则表达式检查或其他一些功能，如此处定义的协议和主机：http: [//css-tricks.com/snippets/javascript/get-url-and-url-parts-in-javascript/](http://css-tricks.com/snippets/javascript/get-url-and-url-parts-in-javascript/)

# android - 以编程方式布局属性

> ID：13571112
> 
> 赞同：0
> 
> 时间：2012-11-26T18:43:41.903
> 
> 标签：android, layout

我有 relativelayout 作为容器，在那里我设置了文本和图像，接下来我 addView() 这个 relativelayout 两次到一个线性布局，一切都很好，但我不能将它们总是粘在一起的两个 relativelayout 分开，这里是代码：

线性布局

```
layout = new LinearLayout(context);
LinearLayout.LayoutParams ll = new LinearLayout.LayoutParams(
LinearLayout.LayoutParams.MATCH_PARENT,
LinearLayout.LayoutParams.MATCH_PARENT);

ll.setMargins(5, 5, 5, 5);
layout.setOrientation(LinearLayout.HORIZONTAL);
layout.setPadding(5, 5, 5, 5);
layout.setLayoutParams(ll);
layout.setId(i);

layout.addView(m1.box);
layout.addView(m2.box); 
```

其中 m1 和 m2 是：RelativeLayout：

```
box = new RelativeLayout(context);

RelativeLayout.LayoutParams rl = new RelativeLayout.LayoutParams(
RelativeLayout.LayoutParams.MATCH_PARENT,
RelativeLayout.LayoutParams.MATCH_PARENT);

rl.setMargins(5, 5, 5, 5);
rl.width = 125;
rl.height = 125;

box.setId(i);
box.setPadding(5, 5, 5, 5);
box.setBackgroundColor(color1);
box.setLayoutParams(rl);
//add some text and image 
```

如何区分m1和m2？现在它们看起来像 OO 我需要添加空间 O_O。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:49:59.423

首先，这不起作用，因为父布局是 a `LinearLayout`，而`LayoutParams`您定义的是 of `RelativeLayout`。应该匹配父母而不是孩子的`LayoutParams`类型，因为他们告诉父母如何以及在哪里放置孩子。

其次，使用`addView(View v, LayoutParams lp)`代替`addView(View v)`来防止这种错误。

# salesforce - Salesforce 站点更改延迟

> ID：13571114
> 
> 赞同：1
> 
> 时间：2012-11-26T18:44:07.313
> 
> 标签：salesforce, visualforce, sites

我今天第一次使用 Salesforce 的“站点”功能，我可以通过 VisualForce 向匿名用户公开 Salesforce 功能。这很酷，但我看到了一些奇怪的计时行为。我一直想弄清楚，但这是一个谜，所以我会在这里问？

当我将更改保存到 VisualForce 页面时，我希望立即看到更改。或者至少，当我进行“真正的”保存（通过点击“保存”），而不是“快速保存”时，我认为这是我使用开发人员工具栏进行编辑时发生的情况——或者实际点击“主 VisualForce 部分中的“快速保存”按钮。

无论如何，我尽可能多地保存它，并且当我转到 VisualForce 页面本身（不使用 force.com URL）时，我能够看到正确的东西。但是当我访问 force.com URL 时，我看到的是旧版本的页面。如果只是等待足够长的时间，那是一回事。但它表现得好像我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T01:18:39.693

在开发过程中，在 apex:page 标签中添加一个 cache="false" 参数是非常有帮助的。这应该可以解决问题。

[apex:page 的参考页面](http://www.salesforce.com/us/developer/docs/pages/Content/pages_compref_page.htm)还有其他可选参数。

# c# - 将 HTML5 数据属性添加到 System.Web.Helpers.WebGrid

> ID：13571118
> 
> 赞同：1
> 
> 时间：2012-11-26T18:44:28.183
> 
> 标签：c#, html, asp.net-mvc-4, webgrid, razor-2

> **可能重复：**
> [向 WebGrid 呈现的表添加自定义属性](https://stackoverflow.com/questions/12900138/add-custom-attributes-to-table-rendered-by-webgrid)

如何将 HTML5 数据属性添加到 的实例`System.Web.Helpers.WebGrid`？我读到使用其属性具有下划线 ( `_`) 的匿名对象将被破折号 ( `-`) 替换。

但这似乎不起作用。我在使用 Razor 2 的 ASP.NET MVC4 中有以下代码。

```
@{
  var grid = new WebGrid(Model);
  @grid.GetHtml(htmlAttributes: new { data_feature: "selectable" });
} 
```

它呈现为：

```
<table data_feature="selectable">... 
```

它应该呈现为（用破折号代替下划线）：

```
<table data-feature="selectable">... 
```

这是一个已知的错误吗？是否可以将 HTML5 数据属性添加到`WebGrid`?

# sql-server-2008 - 并排使用couch db和sql server

> ID：13571119
> 
> 赞同：6
> 
> 时间：2012-11-26T18:44:52.193
> 
> 标签：sql-server-2008, design-patterns, couchdb

我们目前有一个关系很好的 sql server 2008 数据库，它是我们的主应用程序数据库。我们正在寻求改进现有的文档存储机制，该机制使用 xml 数据类型和更无模式的东西，可以处理相似但不相同的文档，并认为 couchdb 非常适合。

这个想法是关于文档的通用元数据可以存储在 sql server 中以便于显示/聚合/报告，但实际文档存储在沙发上以处理文档中的细微差异。我们的想法是充分利用这两种不同的技术。

例如，创建的状态、类型、相关人员和日期都将在所有文档中通用并存储在 sql 中，但电子邮件和信件（显然具有不同的字段）可以存储在沙发上。

然后我们可以为所有类型的文档（数千个文档）显示我们的文档网格，这些文档可以通过 sql 查询，但是当用户请求查看文档时，文档的显示会从沙发上获取其数据。

需要记住的是，某些文档类型是从模板生成的，这些模板本身也是文档（想想邮件合并/查找和替换）。

应用层是asp.net 4.5, c#, repository pattern, Windsor for ioc, JavaScript

那么，对于这个问题...

这种方法是充分利用两种不同的数据存储范例的明智方法吗？

为了“使用最合适的技术解决问题”，我们是否让我们的编程生活变得不必要的复杂？

有没有人尝试过类似的事情，如果有，效果如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:39:33.707

对文档使用两种不同的存储格式并不罕见：一种用于可搜索的方面和元数据，另一种用于演示。

从更一般的角度来看，这种方法有点类似于我们在丹麦皇家图书馆开发并在 Planets EU 项目中推出的方法：

[http://www.researchgate.net/publication/221176211_Archive_Design_Based_on_Planets_Inspired_Logical_Object_Model](http://www.researchgate.net/publication/221176211_Archive_Design_Based_on_Planets_Inspired_Logical_Object_Model)

这是另一篇以更一般的方式讨论这种方法的论文： [“Opening Schrödingers Library”](http://www.google.com/url?sa=t&rct=j&q=opening%20schr%C3%B6dingers%20library&source=web&cd=2&cad=rja&ved=0CDcQFjAB&url=http://www.planets-project.eu/docs/presentations/ECDL_2007_LarsClausen.pdf&ei=wpK4UMfMDIPj4QSeloDYAw&usg=AFQjCNGnt-i6hTqSbmrTTcG3dZyjOtHD9A)

目标是归档。我们认识到，在转换文档以进行归档或保存时，没有一种存储格式在保存原始文档的属性、格式、外观、内容等的所有方面都具有优势。解决方案：转换为多种格式，并使用复杂的数字对象来跟踪转换，以及原始的哪些方面在哪些转换中保存得最好。

所以在我看来，这种方法在理论上和实践上都是合理的。

实际问题：您可能需要某种数字对象来跟踪文档的各个部分，例如。它是否只发生在一个系统中（以及哪个系统），或者两者都发生。看来您将在这方面使用 SQLserver，这听起来很明智。

我们确实实现了我们在论文中描述的对象模型，最后我听说他们仍在使用它。

# jquery - jQueryMObiile focus() next() 中的方向键导航

> ID：13571125
> 
> 赞同：1
> 
> 时间：2012-11-26T18:45:06.330
> 
> 标签：jquery, mobile, navigation, d-pad

我想用键盘浏览“nav-items”。我从这段代码开始。这仅仅是个开始：

jQuery手机：

```
window.onload = function() {
 document.onkeydown=function(e){

if (!e) e=window.event;

switch(e.keyCode) {

  case 37: 

  $("a").blur();
    $("a").prev(".nav-item").focus();

    break;

  case 38:
    alert("Up arrow");
    break;

  case 39:

  $("a").blur();
    $("a").next(".nav-item").focus();

    break;

  case 40:
    alert("Down arrow");
    break;

  case 13:
     $("a:selected").click();
    break;
  }
 }
} 
```

如您所见，目前我只尝试使用 right、prev 和 enter。对第二类的`enter(:13)`点击并很好地过渡到`#category`. 问题是我看到多个项目被选中。第一个类别从不集中，但进行了类似的`.hover`转换，但也有多个项目。

网格中的项目从不集中。

后来，我想使用向下和向上箭头。我离得很远吗？

的HTML：

```
<body> 
 <div data-role="page" data-theme="b">
<div data-role="header" data-theme="b">
   <div data-role="controlgroup" data-type="horizontal" data-iconpos="right" id="header_btn">
           <a class="but nav-item" href="#" data-role="button" data-icon="arrow-l" data-rel="back" data-direction="reverse">Back</a>
       <a class="but nav-item" href="" data-role="button" data-icon="home" data-rel="home" data-direction="reverse">Home</a>
       </div>
    </div>
<div data-role="content" class="ui-grid-a">
       <div class="ui-block-a" style="width:30%">
          <a class="but nav-item" data-transition="slide" href="#Categor" data-role="button">Categor</a>

          <a class="but nav-item" data-transition="slide" href="#Otra" data-role="button">Otra</a>

          <a class="but nav-item" data-transition="slide" href="#Otramas" data-role="button">Otramas</a>
      </div>
    <div class="ui-block-b" style="width:65%; float:right; overflow:auto" id="divi">
    <h1>Categor </h1>
       <div class="ui-grid-b">
             <div class="ui-block-a">
                 <a  href="http://vimeo.com" id="it1" data-role="button" data-theme="b"  class="but nav-item"><img width="150" height="150" src="150.jpg" /><li style="list-style-type:none">Vimeo</li></a>
             </div>
             <div class="ui-block-b">
                 <a  href="http://youtube" id="it2" data-role="button" data-theme="b"  class="but nav-item"><img width="150" height="150" src="http://151.jpg" /><li style="list-style-type:none">Youtube</li></a>
             </div>
             <div class="ui-block-c">
             <a  href="http://alibaba.com" id="it3" data-role="button" data-theme="b"  class="but nav-item"><img width="150" height="150" src="152.jpeg" /><li style="list-style-type:none">Ali Baba</li></a>
             </div>
        </div>
   </div><p><p>
   <div data-role="footer" data-id="foot" data-position="fixed">
    <h4>  Categor - Nuevo</h4>
   </div>
</div>
<div data-role="page" class="pagen" id="Otra" data-theme="b">
<div data-role="header" data-theme="b">
    <div data-role="controlgroup" data-type="horizontal" data-iconpos="right" id="header_btn">

            <a class="but nav-item" href="#" data-role="button" data-icon="arrow-l" data-rel="back" data-direction="reverse">Back</a>
            <a class="but nav-item" href="" data-role="button" data-icon="home" data-rel="home" data-direction="reverse">Home</a>
   </div></div>
<div data-role="content" class="ui-grid-a">
   <div class="ui-block-a" style="width:30%">
    <a class="but nav-item" data-transition="slide" href="#Categor" data-role="button">Categor</a>

<a class="but nav-item" data-transition="slide" href="#Otra" data-role="button">Otra</a>

<a class="but nav-item" data-transition="slide" href="#Otramas" data-role="button">Otramas</a>

    </div>
    <div class="ui-block-b" style="width:65%; float:right; overflow:auto" id="divi">
    <h1>Categor </h1>
    <div class="ui-grid-b">
             <div class="ui-block-a">
    <a  href="http://vimeo.com" id="it1" data-role="button" data-theme="b"  class="but nav-item">
    <img width="150" height="150" src="150.jpg" /><li style="list-style-type:none">Vimeo</li>
    </a>
    </div>

             <div class="ui-block-b">
    <a  href="http://youtube" id="it2" data-role="button" data-theme="b"  class="but nav-item">
    <img width="150" height="150" src="http://151.jpg" /><li style="list-style-type:none">Youtube</li>
    </a>
    </div>

             <div class="ui-block-c">
    <a  href="http://alibaba.com" id="it3" data-role="button" data-theme="b"  class="but nav-item">
    <img width="150" height="150" src="152.jpeg" /><li style="list-style-type:none">Ali Baba</li>
    </a>
    </div>

        </div></div><p><p>
<div data-role="footer" data-id="foot" data-position="fixed">
    <h4>  Categor - Nuevo</h4>
</div>
</div>
<div data-role="page" class="pagen" id="Otramas" data-theme="b">
<div data-role="header" data-theme="b">
    <div data-role="controlgroup" data-type="horizontal" data-iconpos="right" id="header_btn">

            <a class="but nav-item" href="#" data-role="button" data-icon="arrow-l" data-rel="back" data-direction="reverse">Back</a>
            <a class="but nav-item" href="" data-role="button" data-icon="home" data-rel="home" data-direction="reverse">Home</a>
   </div></div>
<div data-role="content" class="ui-grid-a">
   <div class="ui-block-a" style="width:30%">
    <a class="but nav-item" data-transition="slide" href="#Categor" data-role="button">Categor</a>

<a class="but nav-item" data-transition="slide" href="#Otra" data-role="button">Otra</a>

<a class="but nav-item" data-transition="slide" href="#Otramas" data-role="button">Otramas</a>

    </div>
    <div class="ui-block-b" style="width:65%; float:right; overflow:auto" id="divi">
    <h1>Categor </h1>
    <div class="ui-grid-b">
             <div class="ui-block-a">
    <a  href="http://vimeo.com" id="it1" data-role="button" data-theme="b"  class="but nav-item">
    <img width="150" height="150" src="150.jpg" /><li style="list-style-type:none">Vimeo</li>
    </a>
    </div>

             <div class="ui-block-b">
    <a  href="http://youtube" id="it2" data-role="button" data-theme="b"  class="but nav-item">
    <img width="150" height="150" src="151.jpg" /><li style="list-style-type:none">Youtube</li>
    </a>
    </div>

             <div class="ui-block-c">
    <a  href="http://alibaba.com" id="it3" data-role="button" data-theme="b"  class="but nav-item">
    <img width="150" height="150" src="152.jpeg" /><li style="list-style-type:none">Ali Baba</li>
    </a>
    </div>

        </div></div><p><p>
<div data-role="footer" data-id="foot" data-position="fixed">
    <h4>  Categor - Nuevo</h4>
</div>
</div>

</body> 
```

# dynamics-crm-2011 - 在 IFRAME 和实体之间进行通信

> ID：13571127
> 
> 赞同：1
> 
> 时间：2012-11-26T18:45:36.413
> 
> 标签：dynamics-crm-2011

`onload`由于*访问被拒绝*疯狂，我无法在函数中使用 JavaScript 向远程服务器发出请求。因此，为了让 CRM 服从，我设置了一个*IFRAME*并将其连接到运行我的 JavaScript 的 HTML 页面。现在，假设我在脚本中获得了一些值（在*IFRAME*中运行），我如何将它们传达给持有父级的方法？

不太清楚如何更详细地解释它，所以请随时询问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T03:30:08.850

postMessage 听起来可能合适。

`window.postMessage`，当被调用时，当必须执行的任何挂起脚本完成时（例如，如果从事件处理程序调用 window.postMessage 时剩余的事件处理程序、先前设置的挂起超时等），会导致在目标窗口调度 MessageEvent。MessageEvent 具有消息类型，数据属性设置为提供给 window.postMessage 的第一个参数的字符串值，原始属性对应于在时间窗口调用 window.postMessage 的窗口中的主文档的来源。 postMessage 被调用，源属性是调用 window.postMessage 的窗口。

要使用 window.postMessage，必须附加一个事件监听器：

```
// Internet Explorer
window.attachEvent('onmessage',receiveMessage);

// Opera/Mozilla/Webkit
window.addEventListener("message", receiveMessage, false); 
```

并且`receiveMessage`必须声明一个函数：

```
function receiveMessage(event) {
    // do something with event.data;
} 
```

异地 iframe 还必须通过 postMessage 正确发送事件：

```
<script>window.parent.postMessage('foo','*')</script> 
```

任何窗口都可以在任何其他窗口上访问此方法，无论文档在窗口中的位置如何，都可以随时向其发送消息。因此，任何用于接收消息的事件侦听器都必须首先使用源属性和可能的​​源属性检查消息发送者的身份。这一点不容小觑：未能检查来源和可能的来源属性会导致跨站点脚本攻击。

来源：[https ://developer.mozilla.org/en/DOM/window.postMessage](https://developer.mozilla.org/en/DOM/window.postMessage)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T22:38:55.107

访问被拒绝是[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)。您将在 IFRAME 中遇到同样的问题，除非您提供页面或只是来自您随后尝试向其发出 AJAX 请求的同一服务器的脚本 src。

假设您正在执行后者，那么您只需要确保您已取消选中您添加到 CRM 表单的 IFRAME 上的“限制跨框架脚本”选项。现在，您可以从 IFRAME 访问您在父 CRM 表单的全局范围内通过`window.parent.yourfunctionNameHere(xyz)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T21:21:27.267

最近，我很高兴能连接到 Web 服务并检索一些数据。实现这一点后，我发现自己坐在上述数据上并不完全知道该放在哪里。

长话短说，我使用了以下源代码。

```
parent.window.Xrm.Page.data.entity.attributes
  .get("new_Konrad").setValue("Viltersten"); 
```

值得注意的是，为了与父表单进行通信，HTML 文件（我的 JavaScript 所在的位置）需要作为 Web 资源放置在 CRM 结构中。换句话说，仅仅通过指向一个外部的“<em>http://some.where/some.thing”，我们可以消费一项服务，但不能将获得的信息传送到 CRM 服务器，至少不能在为在线版本开发解决方案时。

# ruby-on-rails-3 - mongoid 唯一索引允许重复值

> ID：13571129
> 
> 赞同：5
> 
> 时间：2012-11-26T18:45:40.520
> 
> 标签：ruby-on-rails-3, mongodb, mongoid

我有一个以用户名作为字段的集合。模型将此字段定义为唯一的。但是我能够在数据库中插入一个重复的值。

```
class Profile
  include Mongoid::Document
  include Mongoid::Paperclip

  field :username
  index({ username: 1 } , { unique: true })
end 
```

然而，该集合有 2 个相同的用户名

```
{ "_id" : ObjectId( "50b3b323421aa95da6000004" ),
  "username" : "marceloreuse" }

{ "_id" : ObjectId( "50b3b567421aa93d84000002" ),
  "username" : "marceloreuse" } 
```

这里出了什么问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T19:55:06.347

我会仔细检查您的索引 - 从控制台尝试`db.collection.getIndexes()`并确保您的索引存在。

如果您错过了它，Mongoid 不会自动构建索引，因为您指定了它 - 您需要运行 include: `rake db:mongoid:create_indexes`。

# python - 如何递归遍历所有子目录并读取文件？

> ID：13571134
> 
> 赞同：33
> 
> 时间：2012-11-26T18:45:55.507
> 
> 标签：python, file

我有一个根目录，其中包含多个子目录，所有子目录都包含一个文件名 data.txt。我想做的是编写一个脚本，该脚本接受“根”目录，然后读取所有子目录并读取子目录中的每个“data.txt”，然后将每个 data.txt 文件中的内容写入一个输出文件。

这是我的代码片段：

```
import os
import sys
rootdir = sys.argv[1]

with open('output.txt','w') as fout:
    for root, subFolders, files in os.walk(rootdir):
        for file in files:
            if (file == 'data.txt'):
                #print file
                with open(file,'r') as fin:
                    for lines in fin:
                        dosomething() 
```

我的 dosomething() 部分——如果我只为一个文件运行该部分，我已经测试并确认它可以工作。我还确认，如果我告诉它打印文件（注释掉的行），脚本会打印出“data.txt”。

现在，如果我运行它，Python 会给我这个错误：

```
File "recursive.py", line 11, in <module>
    with open(file,'r') as fin:
IOError: [Errno 2] No such file or directory: 'data.txt' 
```

我不确定为什么找不到它——毕竟，如果我取消注释“打印文件”行，它会打印出 data.txt。我做错了什么？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-11-26T18:48:15.333

您需要使用绝对路径，您的`file`变量只是没有目录路径的本地文件名。变量是该`root`路径：

```
with open('output.txt','w') as fout:
    for root, subFolders, files in os.walk(rootdir):
        if 'data.txt' in files:
            with open(os.path.join(root, 'data.txt'), 'r') as fin:
                for lines in fin:
                    dosomething() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-10T11:34:55.520

```
[os.path.join(dirpath, filename) for dirpath, dirnames, filenames in os.walk(rootdir) 
                                 for filename in filenames] 
```

一种获得树的功能性方法看起来更短、更干净、更 Pythonic。

您可以将其包装`os.path.join(dirpath, filename)`到任何函数中以处理您获取的文件或保存路径数组以供进一步处理

# opera - 如何启用 Opera Dragonfly 的实验版或尖端版？

> ID：13571137
> 
> 赞同：2
> 
> 时间：2012-11-26T18:46:22.680
> 
> 标签：opera, opera-dragonfly

我在[Dragonfly 功能页面](http://www.opera.com/dragonfly/features/)上看到，除了稳定版之外，还有 Dragonfly 的实验版和尖端版。

当我在 Opera 中打开 Dragonfly 时，似乎正在使用稳定版本。如何让 Opera 使用 Dragonfly 的实验版或尖端版？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T18:47:12.007

首先打开opera:config#DeveloperTools|DeveloperToolsURL。然后输入您要使用的版本的 URL：

*   稳定（默认）：

    [https://dragonfly.opera.com/app/stable/](https://dragonfly.opera.com/app/stable/)

*   前沿：

    [https://dragonfly.opera.com/app/cutting-edge/](https://dragonfly.opera.com/app/cutting-edge/)

*   实验：

    [https://dragonfly.opera.com/app/experimental/](https://dragonfly.opera.com/app/experimental/)

# python - gtk python 扩展内容以适应窗口

> ID：13571140
> 
> 赞同：0
> 
> 时间：2012-11-26T18:46:32.330
> 
> 标签：python, gtk, pygtk

我有这个程序，并且尽我所能，我无法使元素扩展以占据为应用程序的轮胎尺寸定义的区域。

代码：

```
import smtpClass
import xmlHostes
import pygtk
pygtk.require('2.0')
import gtk

class Base:

def get_main_menu(self, window):
    accel_group = gtk.AccelGroup()
    item_factory = gtk.ItemFactory(gtk.MenuBar, "<main>", accel_group)
    item_factory.create_items(self.menu_items)
    window.add_accel_group(accel_group)
    self.item_factory = item_factory
    return item_factory.get_widget("<main>")

def __init__(self):

    ## MENU CONTENT
    self.menu_items = (#  MENU TREE      # CONTROL KEY   # FUNCTION
                       ( "/_File",          None,         None,             0,  "<Branch>" ),
                       ( "/File/_Setings",  "<control>S", None,             0,  None ),
                       ( "/File/Quit",      "<control>Q", gtk.main_quit,    0,  None ),
                       ( "/_Help",          None,         None,             0,  "<LastBranch>" ),
                       ( "/_Help/About",    None,         None,             0,  None ),
                       )

    # WINDOW WIDGET
    self.window = gtk.Window(gtk.WINDOW_TOPLEVEL)
    self.window.set_title("pyAnonMail")
    self.window.set_size_request(500, 500)

    # CONTEINER DATA
    main_vbox = gtk.VBox(False, 5)
    #main_vbox.set_border_width(1)
    self.window.add(main_vbox)
    main_vbox.show()

    self.contentTable = gtk.Table(1, 3, True)
    main_vbox.pack_start(self.contentTable, True, True, 10)

    # ADD MENU TO CONTEINER
    self.menubar = self.get_main_menu(self.window)
    main_vbox.add(self.menubar)
    self.menubar.show()

    # FRAME 1 ##########################################################
    self.frame1 = gtk.Frame()
    self.contentTable.attach(self.frame1, 0, 1, 0, 1,
        gtk.FILL, gtk.EXPAND | gtk.SHRINK | gtk.FILL, 0, 0)
    self.frame1.set_label_align(0.0, 0.0)
    self.frame1.set_label("Enter message data")
    self.frame1.set_shadow_type(gtk.SHADOW_ETCHED_OUT)
    self.frame1.show()

    # DATA TABLE

    dataTable = gtk.Table(2, 6, False)
    self.frame1.add(dataTable)
    dataTable.show()

    senderNameFrame = gtk.Label("Sender Name:")
    dataTable.attach(senderNameFrame, 0, 1, 0, 1,
        gtk.FILL, gtk.EXPAND | gtk.SHRINK | gtk.FILL, 0, 0)
    senderNameFrame.show()
    senderNameEntry = gtk.Entry()
    dataTable.attach(senderNameEntry, 0, 1, 1, 2,
        gtk.FILL, gtk.EXPAND | gtk.SHRINK | gtk.FILL, 0, 0)
    senderNameEntry.show()

    senderEmailFrame = gtk.Label("Sender Email:")
    dataTable.attach(senderEmailFrame, 1, 2, 0, 1,
        gtk.FILL, gtk.EXPAND | gtk.SHRINK | gtk.FILL, 0, 0)
    senderEmailFrame.show()
    senderEmailEntry = gtk.Entry()
    dataTable.attach(senderEmailEntry, 1, 2, 1, 2,
        gtk.FILL, gtk.EXPAND | gtk.SHRINK | gtk.FILL, 0, 0)
    senderEmailEntry.show()

    recipientNameFrame = gtk.Label("Recipient Name:")
    dataTable.attach(recipientNameFrame, 0, 1, 2, 3,
        gtk.FILL, gtk.EXPAND | gtk.SHRINK | gtk.FILL, 0, 0)
    recipientNameFrame.show()
    recipientNameEntry = gtk.Entry()
    dataTable.attach(recipientNameEntry, 0, 1, 3, 4,
        gtk.FILL, gtk.EXPAND | gtk.SHRINK | gtk.FILL, 0, 0)
    recipientNameEntry.show()

    recipientEmailFrame = gtk.Label("Recipient Email:")
    dataTable.attach(recipientEmailFrame, 1, 2, 2, 3,
        gtk.FILL, gtk.EXPAND | gtk.SHRINK | gtk.FILL, 0, 0)
    recipientEmailFrame.show()
    recipientEmailEntry = gtk.Entry()
    dataTable.attach(recipientEmailEntry, 1, 2, 3, 4,
        gtk.FILL, gtk.EXPAND | gtk.SHRINK | gtk.FILL, 0, 0)
    recipientEmailEntry.show()

    dataAndTimeFrame = gtk.Label("Data and Time:")
    dataTable.attach(dataAndTimeFrame, 0, 1, 4, 5,
        gtk.FILL, gtk.EXPAND | gtk.SHRINK | gtk.FILL, 0, 0)
    dataAndTimeFrame.show()
    dataAndTimeEntry = gtk.Entry()
    dataTable.attach(dataAndTimeEntry, 1, 2, 4, 5,
        gtk.FILL, gtk.EXPAND | gtk.SHRINK | gtk.FILL, 0, 0)
    dataAndTimeEntry.show()

    subjectFrame = gtk.Label("Subject:")
    dataTable.attach(subjectFrame, 0, 1, 5, 6,
        gtk.FILL, gtk.EXPAND | gtk.SHRINK | gtk.FILL, 0, 0)
    subjectFrame.show()
    subjectEntry = gtk.Entry()
    dataTable.attach(subjectEntry, 1, 2, 5, 6,
        gtk.FILL, gtk.EXPAND | gtk.SHRINK | gtk.FILL, 0, 0)
    subjectEntry.show()

    ####################################################################

    # FRAME 2 ##########################################################
    self.frame2 = gtk.Frame()
    self.contentTable.attach(self.frame2,0,1,1,2,
        gtk.FILL, gtk.EXPAND | gtk.SHRINK | gtk.FILL, 0, 0)
    self.frame2.set_label_align(0.0, 0.0)
    self.frame2.set_label("Enter message body")
    self.frame2.set_shadow_type(gtk.SHADOW_ETCHED_OUT)
    self.frame2.show()

    table = gtk.ScrolledWindow()
    table.set_policy(gtk.POLICY_AUTOMATIC, gtk.POLICY_AUTOMATIC)
    text = gtk.TextView()
    text.set_editable(True)
    textbuffer = text.get_buffer()
    self.frame2.add(table)
    table.show()
    table.add(text)
    text.show()

    ####################################################################

    # FRAME 3 ##########################################################
    self.frame3 = gtk.Frame()
    self.contentTable.attach(self.frame3,0,1,2,3,
        gtk.FILL, gtk.EXPAND | gtk.SHRINK | gtk.FILL, 0, 0)
    self.frame3.set_label_align(0.0, 0.0)
    self.frame3.set_label("Select attached files")
    self.frame3.set_shadow_type(gtk.SHADOW_ETCHED_OUT)
    self.frame3.show()

    ####################################################################

    self.contentTable.show()

    self.window.show()

def main(self):
    gtk.main()

def destroy(self, widget, data=None):
    gtk.main_quit() 
```

我以为问题出在 gtk.box 参数，或者 gtk.tables 的参数上。我已经尝试了一切，没有任何改变。在我在网上找到的关于 gtk 和 python 的示例中，一切都和我一样，但结果总是与我的不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T22:25:59.720

[**调用contentTable.attach**](http://www.pygtk.org/docs/pygtk/class-gtktable.html#method-gtktable--attach)时，您必须将 gtk.EXPAND 添加到 xoptions 参数：

```
# FRAME 1 ##########################################################
self.frame1 = gtk.Frame()
self.contentTable.attach(self.frame1, 0, 1, 0, 1,
gtk.FILL | gtk.EXPAND, gtk.EXPAND | gtk.SHRINK | gtk.FILL, 0, 0) 
```

# python - 得到“错误：无法找到 vcvarsall.bat”然后“运行时错误：autoconf 错误”试图在 Windows 上安装 pycrypto

> ID：13571141
> 
> 赞同：2
> 
> 时间：2012-11-26T18:46:33.353
> 
> 标签：python, pycrypto

谷歌搜索后，我发现大多数答案都是：安装 mingw，然后使用“setup.py install build --compiler=mingw32”进行安装。这就是我得到的：

```
C:\Users\Joe\Desktop\pycrypto-2.6>setup.py install build --compiler=mingw32
running install
running build
running build_py
running build_ext
running build_configure
checking for gcc... no
checking for cc... no
checking for cl.exe... no
configure: error: in `/cygdrive/c/Users/Joe/Desktop/pycrypto-2.6':
configure: error: no acceptable C compiler found in $PATH
See `config.log' for more details
Traceback (most recent call last):
  File "C:\Users\Joe\Desktop\pycrypto-2.6\setup.py", line 456, in <module>
    core.setup(**kw)
  File "C:\Python27\lib\distutils\core.py", line 152, in setup
    dist.run_commands()
  File "C:\Python27\lib\distutils\dist.py", line 953, in run_commands
    self.run_command(cmd)
  File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File "C:\Python27\lib\distutils\command\install.py", line 563, in run
    self.run_command('build')
  File "C:\Python27\lib\distutils\cmd.py", line 326, in run_command
    self.distribution.run_command(command)
  File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File "C:\Python27\lib\distutils\command\build.py", line 127, in run
    self.run_command(cmd_name)
  File "C:\Python27\lib\distutils\cmd.py", line 326, in run_command
    self.distribution.run_command(command)
  File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File "C:\Users\Joe\Desktop\pycrypto-2.6\setup.py", line 251, in run
    self.run_command(cmd_name)
  File "C:\Python27\lib\distutils\cmd.py", line 326, in run_command
    self.distribution.run_command(command)
  File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File "C:\Users\Joe\Desktop\pycrypto-2.6\setup.py", line 278, in run
    raise RuntimeError("autoconf error")
RuntimeError: autoconf error 
```

我还尝试使用来自 www.voidspace.org.uk 的 Windows 预构建二进制文件安装[pycrypto](http://www.voidspace.org.uk/python/modules.shtml#pycrypto)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:43:53.780

该[`vcvarsall.bat`](http://social.msdn.microsoft.com/forums/en-US/msbuild/thread/4e6a0385-bcfe-40ef-a3bb-a498684cef5a)文件包含为您的机器选择合适的 Microsoft C 编译器的说明。由于您没有该文件，因此您已正确尝试安装和使用另一个编译器 MinGW。

您缺少的唯一步骤是将 MinGW 编译器的位置添加到您的 PATH 环境变量中。请参阅以下问题的已接受答案以获取详细说明：[如何将 MinGW bin 目录添加到我的系统路径？](https://stackoverflow.com/q/5733220/)

# java - 在 JFrame 中组织多个 JPanel 的好方法是什么？

> ID：13571142
> 
> 赞同：4
> 
> 时间：2012-11-26T18:46:34.347
> 
> 标签：java, swing, jframe, jpanel

我想要做的是在框架内组织五个单独的 JPanel。输出应该是这样的： 顶部会有一个面板。顶部面板正下方的两个面板垂直分割空间，然后另外两个面板水平分割剩余空间。

![在此处输入图像描述](../Images/d6c40105ed0b52cb87b8979dae9d856d.png)

我无法弄清楚如何组织如上所述的面板，我认为这是因为我只是不知道正确的语法。因此，非常感谢您提供的任何帮助或建议，这是我迄今为止所拥有的代码。

```
import java.lang.String.*;
import java.lang.Exception.*;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Display extends JFrame implements ActionListener{
// instance variables
private static final int FRAME_WIDTH = 400;
private static final int FRAME_HEIGHT = 350;

private static final int FRAME_X_ORIGIN = 150;
private static final int FRAME_Y_ORIGIN = 150;

private static final int BUTTON_WIDTH = 90;
private static final int BUTTON_HEIGHT = 30;

private JButton readFile;
private JButton exit;
private JButton stats;
private JButton blank;

private JCheckBox avgHomeworkScore;
private JCheckBox avgTestScore;
private JCheckBox sdHomeworkScore;
private JCheckBox sdTestScore;

private JRadioButton buttonOne;
private JRadioButton buttonTwo;
private JRadioButton buttonThree;
private JRadioButton buttonFour;

private JPanel header;
private JPanel statistics;
private JPanel courses;
private JPanel display;
private JPanel action;

public static void main(String[] args){
    Display frame = new Display();
    frame.setVisible(true);
}

public Display(){

    Container contentPane;

    //Set the frame properties
    setSize         (FRAME_WIDTH, FRAME_HEIGHT);
    setResizable    (false);
    setTitle        ("CSCE155A Course Offerings Viewer");
    setLocation     (FRAME_X_ORIGIN, FRAME_Y_ORIGIN);

    contentPane = getContentPane();
    contentPane.setLayout(new GridLayout());
    contentPane.setBackground( Color.white );

    //header

    //Create and Place the Buttons on the frame
    readFile = new JButton("Read File");
    readFile.setBounds(4, 285, BUTTON_WIDTH, BUTTON_HEIGHT);

    exit = new JButton("Exit");
    exit.setBounds(100, 285, BUTTON_WIDTH, BUTTON_HEIGHT);

    stats = new JButton("Stats");
    stats.setBounds(195, 285, BUTTON_WIDTH, BUTTON_HEIGHT);

    blank = new JButton("Clear");
    blank.setBounds(290, 285, BUTTON_WIDTH, BUTTON_HEIGHT);

    action = new JPanel(new FlowLayout());
    action.setBackground(Color.blue);
    action.add(readFile); 
    action.add(exit);
    action.add(stats);
    action.add(blank);
    contentPane.add(action);

    //Register this frame as an Action listener of the buttons
    readFile.addActionListener(this);
    exit.addActionListener(this);
    stats.addActionListener(this);
    blank.addActionListener(this);

    //Create and Place the checkboxes on the frame
    avgHomeworkScore = new JCheckBox();
    avgHomeworkScore.setMnemonic(KeyEvent.VK_H);
    contentPane.add(avgHomeworkScore);
    avgHomeworkScore.setSelected(true);

    avgTestScore = new JCheckBox();
    avgTestScore.setMnemonic(KeyEvent.VK_T);
    avgTestScore.setSelected(true);

    sdHomeworkScore = new JCheckBox();
    sdHomeworkScore.setMnemonic(KeyEvent.VK_S);
    sdHomeworkScore.setSelected(true);

    sdTestScore = new JCheckBox();
    sdTestScore.setMnemonic(KeyEvent.VK_D);
    sdTestScore.setSelected(true);

    statistics = new JPanel(new GridLayout(0,1));
    contentPane.add(statistics);
    statistics.add(avgHomeworkScore);
    statistics.add(avgTestScore);
    statistics.add(sdHomeworkScore);
    statistics.add(sdTestScore);

    avgHomeworkScore.addActionListener(this);
    avgTestScore.addActionListener(this);
    sdHomeworkScore.addActionListener(this);
    sdTestScore.addActionListener(this);

    //create the radio buttons
    buttonOne = new JRadioButton();
    buttonOne.setMnemonic(KeyEvent.VK_1);
    buttonOne.setSelected(true);

    buttonTwo = new JRadioButton();
    buttonTwo.setMnemonic(KeyEvent.VK_2);

    buttonThree = new JRadioButton();
    buttonThree.setMnemonic(KeyEvent.VK_3);

    buttonFour = new JRadioButton();
    buttonFour.setMnemonic(KeyEvent.VK_4);

    ButtonGroup group = new ButtonGroup();
    group.add(buttonOne);
    group.add(buttonTwo);
    group.add(buttonThree);
    group.add(buttonFour);

    buttonOne.addActionListener(this);
    buttonTwo.addActionListener(this);
    buttonThree.addActionListener(this);
    buttonFour.addActionListener(this);

    courses = new JPanel(new GridLayout(0,1));
    courses.setBackground(Color.blue);
    courses.add(buttonOne);
    courses.add(buttonTwo);
    courses.add(buttonThree);
    courses.add(buttonFour);
    contentPane.add(courses);

    //Exit program when the viewer is closed
    setDefaultCloseOperation(EXIT_ON_CLOSE);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T19:14:13.163

使用布局管理器。切勿设置面板和其他组件的边界、大小和位置。这是布局管理器的工作。布局管理器在[Swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)中有详细解释（顺便说一句）。

例如，您可以将 BorderLayout 用于主面板，将另一个用于底部面板。

# c - 在没有完整 C 解析器的情况下检测 C 声明的开始和结束

> ID：13571144
> 
> 赞同：4
> 
> 时间：2012-11-26T18:46:44.353
> 
> 标签：c, parsing

我想*部分*解析 C 声明和/或函数定义的列表。

也就是说，我想将它拆分为子字符串，每个子字符串都包含一个声明或函数定义。

然后每个声明（单独）将被传递给另一个模块（它*确实*包含一个完整的 C 解析器，但我不能直接调用。）

显然，我可以通过在我的程序中包含另一个完整的 C 解析器来做到这一点，但我希望避免这种情况。

到目前为止，我遇到的棘手案例涉及是否`'}'`终止声明/定义的问题。例如在

```
int main(int ac, char **av) {return 0;} 
```

... the`'}'`是一个终止符，而在

```
typedef struct foo {int bar;} *pfoo; 
```

它不是。也可能有这样的病态代码：

```
struct {int bar;} *getFooPtr(...) { /* code... */ } 
```

**笔记**

*   请假设 C 代码在我的函数看到之前已经完全预处理。（实际上它没有，但我们有一个解决方法。）
*   我的解析器可能会用[LPeg在 Lua 中实现](http://www.inf.puc-rio.br/~roberto/lpeg/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T21:20:14.773

要在您的答案中扩展状态机以处理函数定义，请添加以下步骤：

1.  将 fun/var 状态设置为“未知”

2.  检查当前位置的字符
3.  如果是`;`，我们已经找到了声明的结尾，并且它不是函数定义（尽管可能是函数声明）。
4.  如果是`"`or `'`，跳转到匹配的引号，必要时跳过转义序列。
5.  如果是`(`, `[`or `{`，则跳转到匹配的`)`, `]`or `}`（如有必要，递归跳过嵌套的括号和字符串）
6.  如果 fun/var state 是 'function' 而我们只是跳过了`{`.. `}`，我们已经找到了声明的结尾，它是一个函数定义
7.  如果 fun/var 状态为 'unknown' 而我们只是跳过了`(`.. `)`，则将 fun/var 状态设置为 'function'。
8.  如果当前 char 是`=`or `,`，则将 fun/var 状态设置为 'not-function'。
9.  前进到下一个输入字符，然后返回 2。

当然，这只适用于预处理后的代码——如果你有宏可以做各种尚未扩展的奇怪事情，那么所有的赌注都没有了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T21:06:17.043

据我所知，以下解决方案仅适用于*声明*（也就是说，函数定义必须保留在本节之外，或者在它们之后添加分号可能是一种解决方法：）

1.  检查当前位置的字符
2.  如果是`;`，我们已经找到了声明的结尾。
3.  如果是`"`or `'`，跳转到匹配的引号，必要时跳过转义序列。
4.  如果是`(`, `[`or `{`，则跳转到匹配的`)`, `]`or `}`（如有必要，递归跳过嵌套的括号和字符串）
5.  否则，前进到下一个输入字符并转到步骤 1。

如果这证明不令人满意，我将切换到*clang*解析器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T22:00:09.147

您最好的选择是提取与声明相关的 C 语法部分，并为此构建解析器或它的缩写版本。类似地，你想要函数体的语法，以类似的方式缩写，所以你可以跳过它们。

这可能会为声明生成一个相对可靠的解析器。

不幸的是，您不太可能掌握可靠的 C 语法。ANSI 标准中的那个不是编译器实际使用的那个。每个供应商都在他们的编译器中添加了好东西和复杂性（例如，MS C 的 declspecs 等）。

预处理器运行的假设很有趣。您将在哪里获得预处理器配置？（例如，编译器命令行定义、包含路径、编译指示设置等）？这比看起来更难，因为每个开发环境都定义了不同的方法来设置预处理器条件。

如果您愿意接受偶尔出现的错误，那么任何启发式都是有效的候选者，以它在重要客户代码上出错的频率为模。这也意味着您可以处理未处理的代码，完全避免预处理器问题。

# android - 未找到安卓 adb

> ID：13571145
> 
> 赞同：103
> 
> 时间：2012-11-26T18:46:50.817
> 
> 标签：android, linux, adb

当我从 Eclipse 运行我的 android 应用程序时，我收到了这个错误。

```
Unexpected exception 'Cannot run program "/home/antz/Development/adt-bundle-linux/sdk/platform-tools/adb": error=2 No such file or directory' while attempting to get adb version from /home/antz/Development/adt-bundle-linux/sdk/platform-tools/adb 
```

从 Eclipse 错误中复制粘贴

```
[2012-11-26 13:43:08 - adb] Unexpected exception 'Cannot run program "/home/antz/Development/adt-bundle-linux/sdk/platform-tools/adb": error=2, No such file or directory' while attempting to get adb version from '/home/antz/Development/adt-bundle-linux/sdk/platform-tools/adb' 
```

但是，我的 adb 恰好位于它所说的位置。

出了什么问题，我该如何解决？

我 cd 进入 adb 所在的目录 ( `/home/antz/Development/adt-bundle-linux/sdk/platform-tools/`) 并输入 adb 并显示

```
antz@antz-90X3A:~/Development/adt-bundle-linux/sdk/platform-tools$ ls  
aapt  aidl  dexdump  fastboot  llvm-rs-cc  renderscript  
adb   api   dx       lib       NOTICE.txt  source.properties  
antz@antz-90X3A:~/Development/adt-bundle-linux/sdk/platform-tools$ adb  
bash: /home/antz/Development/adt-bundle-linux/sdk/platform-tools/adb: No such file or directory 
```

adb 是绿色的，这意味着它是一个可执行文件，对吗？

例如，dx 也是绿色的，当我在命令提示符中输入 dx 时，它可以工作...... adb 有什么问题？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-11-26T18:57:01.883

在 Linux 上，`platform-tools`包含的 Android SDK 包`adb`曾经是`32bit`. 它在`32bit`系统上运行良好。但在`64bit`系统上，您需要手动安装 IA32 库。

对于基于 Debian 的发行版，试试这个：

```
sudo apt-get install libc6-i386 lib32stdc++6 lib32gcc1 lib32ncurses5 
```

但由于 v24.0`platform-tools`仅包含`64bit`二进制文件 - 所以`32bit`不再需要库。

* * *

## 回答 #2

> 赞同：112
> 
> 时间：2013-04-06T03:57:47.463

您不能再安装 ia32-libs，因此您必须安装 adb 所需的各个 32 位库

```
sudo apt-get install libc6-i386 lib32stdc++6 lib32gcc1 lib32ncurses5 
```

对于 Ubuntu 13.10：

```
sudo apt-get install libc6-i386 lib32stdc++6 lib32gcc1 lib32ncurses5 lib32z1 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2013-04-01T16:04:04.490

您必须安装 32 位 glibc：

在 Fedore 64 位机器上

```
# yum install glibc.i686 
```

这消除了在尝试执行 32 位二进制文​​件时误导性的“没有这样的文件或目录”消息。这样 64 位 Fedora 系统就能够执行 64 位二进制文​​件。

当在 32 位动态可执行文件上调用 ldd 时，这也消除了 ldd 的误导性“不是动态可执行文件”消息。

现在您必须安装缺少的 32 位库，adt-bundle-linux/sdk/platform-tools 下的二进制文件链接到：

```
# yum install zlib.i686 libstdc++.i686 ncurses-libs.i686 libgcc.i686 
```

而已。

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2014-06-11T15:49:00.513

我正在使用**Ubuntu 14.04 LTS 64 位**，以下代码**适用于我**；

```
sudo apt-get install lib32z1 lib32z1-dev
sudo apt-get install lib32stdc++6 
```

* * *

概括：

在我尝试*[apt-get install ia32-libs](https://stackoverflow.com/a/13571288/1461060)*之后，但 apt package tool 建议这样做；

```
Package ia32-libs is not available, but is referred to by another package.
This may mean that the package is missing, has been obsoleted, or is only available from another source.

However the following packages replace it:
  lib32z1 lib32ncurses5 lib32bz2-1.0 
```

然后上面的代码对我有用。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-06-26T17:54:59.320

这在 Ubuntu 13.04 64 位版本中效果很好

您不能再安装 ia32-libs，因此您必须安装 adb 所需的各个 32 位库

```
sudo apt-get install libc6-i386 lib32stdc++6 lib32gcc1 lib32ncurses5 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-07-22T15:06:31.567

在 Arch linux 上：

在 /etc/pacman.conf 中启用“multiarch”存储库

然后运行：

```
root@box#pacman -Syu

root@box#pacman -S lib32-glibc lib32-zlib lib32-libstdc++5 lib32-ncurses lib32-gcc-libs 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-01-11T04:07:34.743

我正在运行 Ubuntu 12.04 LTS，这个命令是唯一对我有用的东西：

```
sudo apt-get install lib32z1 lib32z1-dev 
```

从命令行运行它后，我可以通过在 Eclipse 中执行 Project > Clean 来生成要生成的 R.java 文件（表明您的 Android SDK 工具安装中的某些内容不太正确）。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-04-14T04:44:59.510

在 Fedora 17 或 18 上：

```
sudo yum install redhat-lsb.i686 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-06-21T22:01:17.263

对于多架构 Debian 7.0，添加：

```
dpkg --add-architecture i386
apt-get install libc6:i386 libncurses5:i386 libstdc++6:i386 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-03-18T05:03:59.063

我在我的 Linux Mint 12 中做到了：

```
 chmod +x PATH/adb 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-09-20T01:06:33.037

如果你在 64 位上遇到这个问题，试试这个（对我有用）：

```
$ apt-get install lib32gcc1 libc6-i386 lib32z1 lib32stdc++6
$ apt-get install lib32ncurses5 lib32gomp1 lib32z1-dev lib32bz2-dev
$ apt-get install g++-multilib 
```

[http://sixarm.com/about/ubuntu-apt-get-install-ia32-for-32-bit-on-64-bit.html](http://sixarm.com/about/ubuntu-apt-get-install-ia32-for-32-bit-on-64-bit.html)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2013-06-30T01:23:17.057

您需要安装 ia32-libs（IA32 库）包才能使其工作。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2014-09-26T14:21:03.713

来自[Ubuntu Multiarch HOWTO](https://wiki.debian.org/Multiarch/HOWTO)：

> 一些使用 Android SDK 的用户在尝试在 amd64 位平台上运行 build-tools 或 platform-tools 时可能会遇到问题。作为 ia32-libs 的替代品，用户只需安装以下库即可：

```
dpkg --add-architecture i386
aptitude update
aptitude install libstdc++6:i386 libgcc1:i386 zlib1g:i386 libncurses5:i386 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2012-12-13T11:40:54.140

在 linux 中安装这些库*apt-get install ia32-libs*

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2013-07-22T10:11:30.640

在下面运行这些命令。它对我有用

```
sudo apt-get dist-upgrade
sudo apt-get install ia32-libs 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-11-09T13:49:09.220

有时只是为 sdk 文件提供必要的权限。

```
sudo chmod -R +x /path/to/android-sdk-linux 
```

重新启动 Android Studio 并查看是否可以修复它。

当您从 NTFS 分区复制/移动 sdk 文件或从另一台计算机复制时，通常会出现权限问题。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-08-12T09:21:54.587

> sudo apt install adb

adb 没有安装在你的电脑上

尝试这个。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2015-08-25T23:40:27.267

在 ubuntu 64 位 [12.04]-[14.10] 和 Elementary OS 64 位

```
sudo dpkg --add-architecture i386
sudo apt-get update
sudo apt-get install libncurses5:i386 libstdc++6:i386 zlib1g:i386 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2013-10-22T03:43:20.747

[http://abhinavasblog.blogspot.sg/2013/10/working-with-ubuntu-1304-and-1310-java.html](http://abhinavasblog.blogspot.sg/2013/10/working-with-ubuntu-1304-and-1310-java.html)

该博客解释了 Ubuntu 13.10 安装 Chrome、Java 和修复 Android SDK 的解决方案。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-03-30T13:32:17.133

Arch Linux的正确*当前*组合如下：

*[此部分未更改]*取消注释以下部分`/etc/pacman.conf`：

```
...
[multilib]
Include = /etc/pacman.d/mirrorlist
... 
```

然后：

```
sudo pacman -Syu && sudo pacman -S multilib/lib32-libstdc++5 multilib/lib32-zlib 
```

与其他答案的不同之处在于包名称现在包含*multilib/*部分。

（来自 Arch Wiki：[Multilib#Enabling](https://wiki.archlinux.org/index.php/Multilib#Enabling)，[Android#Troubleshooting](https://wiki.archlinux.org/index.php/Android#aapt:_No_such_file_or_directory)）

# java - 使用 GAE 图像 Java API 时在本地转换图像

> ID：13571150
> 
> 赞同：1
> 
> 时间：2012-11-26T18:47:17.590
> 
> 标签：java, image, google-app-engine, tiff

我在本地运行时从 ImagesService 调用 applyTransform() 时遇到问题。当部署到 GAE 时，图像转换得很好，在本地我得到一个 500 错误，但有以下异常：

```
java.lang.IllegalArgumentException: Failed to read image
at com.google.appengine.api.images.ImagesServiceImpl.convertApplicationException(ImagesServiceImpl.java:397)
at com.google.appengine.api.images.ImagesServiceImpl.applyTransform(ImagesServiceImpl.java:88)
at com.google.appengine.api.images.ImagesServiceImpl.applyTransform(ImagesServiceImpl.java:65)
... 
```

我正在从 tiff 转换为 png，我尝试添加各种库作为依赖项，但无济于事（jai-imageio，tom gibara's，javaVP8）。我继续收到此警告：

```
Nov 26, 2012 6:30:37 PM com.google.appengine.api.images.dev.LocalImagesService init
WARNING: No image reader found for format "tif". An ImageIO plugin must be installed to use this format with the DevAppServer. 
```

关于如何在 GAE 环境之外进行这项工作的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:59:03.850

该[文档](https://developers.google.com/appengine/docs/java/images/overview?hl=en#Development_Server)可能会有所帮助。

“开发服务器使用您的本地计算机来执行图像服务的功能。”

安装说明[在这里](http://download.java.net/media/jai-imageio/builds/release/1.1/INSTALL-jai_imageio.html)。

# linux - 使 linux 内核头文件/开发成为 RPM 和 Debs 要求的最稳定方法是什么？

> ID：13571152
> 
> 赞同：2
> 
> 时间：2012-11-26T18:47:23.250
> 
> 标签：linux, rpm, yum, apt, deb

我正在寻找“最佳”* 方法来添加 linux 内核头文件和开发库作为我正在制作的 RPM 和 Debian 包的要求。我知道我可以在 RPM .spec 文件中添加一个“Requires: blah”标签，并且我可以在 Debian 控制文件中进行模拟，但这会让用户下载最新内核的头文件/开发...他们当前的标题/开发。

例如，假设用户正在运行 linux 内核版本 3.4，最新的是 3.5。如果他们通过 yum 安装 RPM，并且没有任何内核头文件或开发库，他们将下载 3.5 头文件和开发库。但是当软件开始构建时，它会尝试查找 3.4 头文件和开发库并失败。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:39:57.693

我不明白为什么这样的东西还不够（需要最小内核）

```
Requires: kernel >= 3.5
BuildRequires: kernel-headers >= 3.5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:01:45.863

Debian 至少允许您轻松地在`Build-Depends:`. 通常你不想这样做，但这是完全可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T18:46:00.453

我猜你正在尝试构建/打包一些第 3 方内核模块（因为 afaik 这确实是唯一应该依赖于内核头文件的包类型）。

如果是这样，您可能想看看其他内核模块是如何打包的，尤其是检查所有主要发行版都支持的[dkms](http://linux.dell.com/dkms/)，并使用它来构建您的内核模块。

# android - 自定义 Android 示例应用程序

> ID：13571153
> 
> 赞同：0
> 
> 时间：2012-11-26T18:47:23.577
> 
> 标签：android, sdk, sample

我正在对这个 Android 示例应用程序进行一些自定义：[HoneycombGallery](http://ncc.dlut.edu.cn/course/android/source/docs/resources/samples/HoneycombGallery/index.html)。

当用户在选项卡（气球 - 糕点）之间切换但在这里遇到一些问题时，我需要执行一些额外的代码。

我需要特别做的是*每次*用户切换到新选项卡时返回选项卡的名称（目录类别）。每次用户切换选项卡时，我都需要在代码中执行该字符串。我找不到动态执行此操作的方法，或者我只是试图在错误的 java 文件中执行此操作。

你会怎么做？非常感谢任何输入。如果我需要澄清，请告诉我。

谢谢！

# sql - 最新更新，但每个使用 GROUP 的多态对象只有一个

> ID：13571155
> 
> 赞同：1
> 
> 时间：2012-11-26T18:47:31.300
> 
> 标签：sql, activerecord, ruby-on-rails-3.2

我有三个模型：

```
class Update
  attr_accessible :object_id, :object_type

  belongs_to :object, :polymorphic

  default_scope order('created_at DESC')
end

class Document
  has_many :updates, as: :object
end

class Report
  has_many :updates, as: :object
end 
```

现在，使用 sql 或 Active Record 查询接口，我希望能够为每个对象挑选出最新的更新。

我在想我会做这样的事情：

```
Update.group(:object_id).group(:object_type) 
```

这确实为每个对象只提供了一个更新，但它并不总是最新的更新，我不知道为什么。

组是否只是从组中选择一条随机记录？有没有一种简单的方法可以确保选择最新的更新？

# c - AF_UNSPEC 导致 UDP 丢包

> ID：13571161
> 
> 赞同：1
> 
> 时间：2012-11-26T18:47:54.723
> 
> 标签：c, linux, networking

首先，请耐心回答一个很长的问题——我正在编写一个 UDP 客户端-服务器程序，奇怪的是，每当我将这个标志用于协议族时，我都会遇到这个丢包问题。症状是数据包从未离开发送方主机（没有从 tcpdump 捕获），但 sendto() 返回正确的正值，该值永远不会大于 200 字节。我花了很长时间才弄清楚这可以通过强制 IPv4 来解决，但我不明白为什么？它已经在服务器和客户端运行在同一系统（科学 linux 6）上进行了多次测试，因此常见的不可靠 UDP 传输可能不是这里的原因，也没有任何防火墙规则可以丢弃任何东西。我想知道是否有人碰巧知道原因？
我还考虑过发布一些代码，但似乎没有必要。简单地说，AF_UNSPEC 导致所有 UDP 数据包永远不会离开发送者但没有错误，并且使用 AF_INET 一切都很完美。这可能是一个奇怪的问题，但任何见解都值得赞赏。非常感谢！
服务器初始化代码：

```
int udp_srv_init(char * port)
{
    struct addrinfo hints, *servinfo, *p;
    int rv;

    memset(&hints, 0, sizeof hints);
    hints.ai_family = AF_INET;
    hints.ai_socktype = SOCK_DGRAM;
    hints.ai_flags = AI_PASSIVE;

    if ((rv = getaddrinfo(NULL, port, &hints, &servinfo)) != 0) {
            fprintf(stderr, "getaddrinfo: %s\n", gai_strerror(rv));
            return EXIT_FAILURE;
    }

    for(p = servinfo; p != NULL; p = p->ai_next) {
            if ((self_udp = socket(p->ai_family, p->ai_socktype,
                    p->ai_protocol)) == -1) {
                    perror("socket");
                    continue;
            }

            if (bind(self_udp, p->ai_addr, p->ai_addrlen) == -1) {
                    close(self_udp);
                    fprintf(stderr, "Port %s: ",port);
                    perror("bind");
                    continue;
            }

            break;
    }

    if (p == NULL) {
            fprintf(stderr, "server: failed to bind socket\n");
            return EXIT_FAILURE;
    }

    freeaddrinfo(servinfo);

    int buffsize = 65536; // I added this because I thought it was some buffer problem, but didn't change a thing
    setsockopt(self_udp, SOL_SOCKET, SO_RCVBUF, (void*)&buffsize, sizeof(buffsize));

    return EXIT_SUCCESS;
} 
```

并发送：

```
//...
for(i=0; i<num_neighbors; i++)
{
    if(neighbors[i].cost == -1)
        continue;
    int bytes_sent = 0, ret;
    while(bytes_sent < packet_size)
    {
        if(-1 == (ret = sendto(neighbors[i].skt, (void*)&my_neighs +
                (ptrdiff_t)bytes_sent, packet_size-bytes_sent,
                0, neighbors[i].p->ai_addr, neighbors[i].p->ai_addrlen)))
        {
            perror("sendto1");
            return EXIT_FAILURE;
        }
        bytes_sent += ret;
    }
}
//.... 
```

邻居是一个结构数组，其元素具有成员字段：

```
struct addrinfo *servinfo, *p; 
```

它们是从套接字初始化中获得的，并且 freeaddrinfo() 仅在程序执行的最后被调用，因此它们都是有效的。

# python - 在函数中调用函数

> ID：13571163
> 
> 赞同：0
> 
> 时间：2012-11-26T18:47:58.177
> 
> 标签：python

我需要构建 3 个功能。第一个是插入排序，第二个是生成 0-1 之间的随机数列表，第三个需要创建随机数列表（使用 2nd func。）并对它们进行排序（使用 1st func。）。我最终不能改变测试，也不能改变函数的参数。我对 func 3 有疑问，它说`NameError: global name 'my_list' is not defined`。其他功能工作正常，我在第三个哪里错了？*第一个函数不允许返回任何东西。

谢谢！

我的代码：

```
def insertion_sort(lst):
    for i in range(1,len(lst)):
        current=lst[i]
        j=i-1
        while j>=0:
            if current < lst[j]:
                lst[j+1] = lst[j]
                lst[j] = current
                j-=1
            else:
                break

def random_list(n):
    import random
    my_list=[]
    for i in range(n):
        my_list.append (random.random ())
    return my_list

def sorted_random_list(n):
    random_list(n)
    insertion_sort(my_list)

### TEST FUNCTION - DON'T CHANGE THIS ####
def test_sorted(lst):
    print lst == sorted(lst) and len(lst) > 0

def test_len(lst, length):
    print len(lst)==length

def sort_and_test(lst):
    lst = lst[:]
    insertion_sort(lst)
    test_sorted(lst)

sort_and_test([13,54,3434,88,334,6,8,84,57,4,2,4,6,6])
sort_and_test(["dog","cat","cow","zebra","frog","bat","spider","monkey"])
sort_and_test(["hi","hello","how are you","what your doing"])

test_len(random_list(10), 10)
lst = sorted_random_list(10)
test_len(lst, 10)
test_sorted(lst) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T18:50:56.980

这是因为您调用`random_list(n)`但您没有将它返回的值分配给任何变量。

试试这个：

```
my_list = random_list(n) 
```

那应该可以解决您的问题

如果不将返回值分配给`random_list()`变量，您所做的就是计算`random_variable()`并丢弃结果。您要做的是将调用的结果命名为，`random_variable()`以便您以后可以参考它。这是通过将其分配给具有该名称的变量来完成的，在这种情况下，`my_list`

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T18:50:44.543

好吧，最快的方法是将代码替换`sorted_random_list()`为

```
new_list = random_list(n)
insertion_sort(new_list)
return new_list 
```

但这里更深层次的问题似乎是缺乏对范围的理解以及对变量赋值的需要。 `my_list`仅存在于 的范围内`random_list()`，因此它在全局命名空间中不可用，这就是您在此处看到错误的原因。您实际上也没有将结果分配`random_list(n)`给任何东西，因此您正在丢弃新列表。然后，您实际上并没有返回`sorted_random_list()`在任何情况下创建的列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T18:51:16.120

`my_list`不是全局变量。因为您要从 中返回列表`random_list()`，所以`sorted_random_list()`您应该有`my_list = random_list(n)`. 这将`my_list`在该函数的范围内创建变量。

# javascript - 如何获取 Web 表单的输出并将其发布到 XML API？

> ID：13571165
> 
> 赞同：0
> 
> 时间：2012-11-26T18:48:09.663
> 
> 标签：javascript, xml, html, web

我正在尝试获取以 Web 表单（HTML、JS 或其他）形式提供的信息，并使用这些信息来填充 XML 文档，然后在客户端将其提交给 API。

尽管我认为这听起来很简单，但我一直坚持我到目前为止的最佳选择是让 JS 使用变量填充 XML 文档，但我不确定如何提交文档。这有点不寻常，因为它都在本地托管，因此如果可行的话可以使用其他东西，然后需要呈现返回的 XML。

任何帮助将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:54:33.043

查看这个在 JavaScript 中使用 XML 的优秀参考：

[JavaScript 中的 AJAX 和 XML 处理](http://help.dottoro.com/ljarvfic.php)

您可以创建一个[XMLDocument](http://help.dottoro.com/ljbcjfot.php)对象，然后将其[序列化为](http://help.dottoro.com/ljwwrcvr.php)字符串，以便将其提交给 API。

**编辑 1**

要在 IE8 和更早版本中序列化 XMLDocument，请使用[.xml 属性](http://help.dottoro.com/ljhwhicc.php)。

**编辑 2**

将序列化的 XML 文档作为字符串后，可以将其放入 a 中`<form>`，以便将其提交给服务器。这是一种方法：

HTML

```
<form action="mypage.php" method="post">
    <input type="hidden" name="xmldata" id="hiddenXMLInput">
    <input type="Submit" value="Submit XML to server">
</form> 
```

JavaScript

```
document.getElementById('hiddenXMLInput').value = strXMLDocument; 
```

`strXMLDocument`作为字符串的序列化 XML 文档在哪里。

# java - 是否有一种独立于语言的方式将函数添加到 JSR223 脚本绑定？

> ID：13571169
> 
> 赞同：3
> 
> 时间：2012-11-26T18:48:34.047
> 
> 标签：java, function, scripting, jsr223

JSR223[类](http://docs.oracle.com/javase/6/docs/api/javax/script/Bindings.html)允许您向脚本语言公开任意 Java 对象[。`Bindings`](http://docs.oracle.com/javase/6/docs/api/javax/script/Bindings.html)但它们必须是对象。我想定义一个`quit()`可以从变成`quitObject.run()`Java的脚本环境调用的函数。但是 JSR223 没有定义函数对象的概念。在 Javascript 中是否有一种独立于语言的方法来执行以下操作，即采用 Runnable() 并在脚本环境中创建一个函数？

```
 static private Object asFunction(ScriptEngine engine, Runnable r) 
    throws ScriptException
 { 
        final Bindings bindings = engine.createBindings();
        bindings.put("r", r);
        return engine.eval(
          "(function (r) { var f = function() { r.run(); }; return f;})(r)",
          bindings);
 }

 Runnable quitObject = /* get/create a Runnable here */
 Bindings bindings = engine.createBindings();
 bindings.put("quit", asFunction(engine, quitObject)); 
```

借助对 JSR223 的内置 Javascript 支持，这将创建一个`sun.org.mozilla.javascript.internal.InterpretedFunction`我想要的。但它显然不适用于 Jython 或其他任何东西，我想让这种语言独立于语言。

我不希望我的脚本用户必须输入`quitObject.run()`，因为这很笨拙，我不想解析脚本输入来查找`quit()`，因为它可能隐藏在其他代码中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T09:04:43.340

如果您查看[javascript 引擎源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/com/sun/script/javascript/RhinoScriptEngine.java#RhinoScriptEngine)，您会发现 oracle/sun 如何实现 2 个函数（print 和 println），这些函数在您启动引擎时神奇地（或不那么神奇地）呈现。

这些功能是 'scripted' ，这或多或少是你所做的。

我要做的是：`bootstrap.[language_extension]`在评估新上下文中的任何其他输入之前加载和评估 a 。

您可以轻松地为您打算支持的每种语言创建此类脚本。

# delphi - 如果扩展名已知，如何在 DoExecute TFileSaveDialog 事件中设置 FileTypeIndex？

> ID：13571170
> 
> 赞同：3
> 
> 时间：2012-11-26T18:48:34.123
> 
> 标签：delphi, delphi-2010

如果知道文件扩展名，如何在 TFileSaveDialog DoExecute 事件中将扩展名转换为 FileTypeIndex？

```
 function TIEWin7FileSaveDialog.DoExecute: Bool;
    begin
    ...
    {Set FileType (filter) index}
    iWideTextension := ExtractFileExt(FileName);
    FileTypeIndex := ???ExtensionToFileTypeIndex(iWideExtension);???
    FileDialog.SetFileTypeIndex(FileTypeIndex);
    ...
    end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:29:41.263

至少没有明确的函数可以满足您的要求，因为一种文件类型可能包含在更多文件类型掩码中，因此您只能迭代[`FileTypes`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Dialogs.TCustomFileDialog.FileTypes)并检查文件类型是否包含或等于[`FileMask`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Dialogs.TFileTypeItem.FileMask)如下所示：

```
function FindFirstFileType(FileDialog: TCustomFileDialog;
  const FileExt: string): UINT;
var
  TypeIndex: Integer;
  ExtIndex: Integer;
  ExtArray: TStringDynArray;
begin
  Result := 0;
  for TypeIndex := 0 to FileDialog.FileTypes.Count - 1 do
  begin
    ExtArray := SplitString(FileDialog.FileTypes[TypeIndex].FileMask, ';');
    for ExtIndex := 0 to High(ExtArray) do
      if ExtArray[ExtIndex] = FileExt then
        begin
          Result := TypeIndex;
          Break;
        end;
  end;
end; 
```

以及用法（注意输入必须与过滤器掩码完全匹配）：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  I: UINT;
begin
  I := FindFirstFileType(FileOpenDialog1, '*.pas');
end; 
```

# c - 具有比较和交换的 int 队列具有竞争条件

> ID：13571171
> 
> 赞同：1
> 
> 时间：2012-11-26T18:48:36.093
> 
> 标签：c, race-condition, compare-and-swap

我已经编写了一个用于保存整数的同步队列，并且面临着一个我似乎无法理解的奇怪的竞争条件。

请**不要**发布解决方案，我知道如何修复代码并使其工作，我想知道竞态条件是什么以及为什么它没有按预期工作。请帮助我了解出了什么问题以及原因。

首先是代码的重要部分：

这假设应用程序永远不会超过缓冲区可以容纳的内容，因此不检查当前缓冲区大小

```
static inline void int_queue_put_sync(struct int_queue_s * const __restrict int_queue, const long int value ) {
    if (value) { // 0 values are not allowed to be put in
        size_t write_offset; // holds a current copy of the array index where to put the element
        for (;;) {
            // retrieve up to date write_offset copy and apply power-of-two modulus
            write_offset = int_queue->write_offset & int_queue->modulus; 
            // if that cell currently holds 0 (thus is empty)
            if (!int_queue->int_container[write_offset])
                // Appetmt to compare and swap the new value in
                if (__sync_bool_compare_and_swap(&(int_queue->int_container[write_offset]), (long int)0, value))
                    // if successful then this thread was the first do do this, terminate the loop, else try again
                    break;
        }

        // increment write offset signaling other threads where the next free cell is
        int_queue->write_offset++;
        // doing a synchronised increment here does not fix the race condition
    }
} 
```

这似乎有一个罕见的竞争条件，似乎不会增加`write_offset`. 在 RedHat 2.6.32 Intel(R) Xeon(R) 上的 OS X gcc 4.2、Intel Core i5 四核和 Linux Intel C Compiler 12 上测试。两者都会产生竞争条件。

带有测试用例的完整源代码：

```
#include <pthread.h>

#include <stdlib.h>
#include <stdio.h>
#include <unistd.h>
#include <stdint.h>

// #include "int_queue.h"
#include <stddef.h>
#include <string.h>
#include <unistd.h>
#include <sys/mman.h>

#ifndef INT_QUEUE_H
#define INT_QUEUE_H

#ifndef MAP_ANONYMOUS
#define MAP_ANONYMOUS MAP_ANON
#endif

struct int_queue_s {
    size_t size;
    size_t modulus;
    volatile size_t read_offset;
    volatile size_t write_offset;
    volatile long int int_container[0];
};

static inline void int_queue_put(struct int_queue_s * const __restrict int_queue, const long int value ) {
    if (value) {
        int_queue->int_container[int_queue->write_offset & int_queue->modulus] = value;
        int_queue->write_offset++;
    }
}

static inline void int_queue_put_sync(struct int_queue_s * const __restrict int_queue, const long int value ) {
    if (value) {
        size_t write_offset;
        for (;;) {
            write_offset = int_queue->write_offset & int_queue->modulus;
            if (!int_queue->int_container[write_offset])
                if (__sync_bool_compare_and_swap(&(int_queue->int_container[write_offset]), (long int)0, value))
                    break;
        }

        int_queue->write_offset++;
    }
}

static inline long int int_queue_get(struct int_queue_s * const __restrict int_queue) {
    size_t read_offset = int_queue->read_offset & int_queue->modulus;
    if (int_queue->write_offset != int_queue->read_offset) {
        const long int value = int_queue->int_container[read_offset];
        int_queue->int_container[read_offset] = 0;
        int_queue->read_offset++;
        return value;
    } else
        return 0;
}

static inline long int int_queue_get_sync(struct int_queue_s * const __restrict int_queue) {
    size_t read_offset;
    long int volatile value;
    for (;;) {

        read_offset = int_queue->read_offset;
        if (int_queue->write_offset == read_offset)
            return 0;
        read_offset &= int_queue->modulus;
        value = int_queue->int_container[read_offset];
        if (value)
            if (__sync_bool_compare_and_swap(&(int_queue->int_container[read_offset]), (long int)value, (long int)0))
                break;
    }
    int_queue->read_offset++;
    return value;
}

static inline struct int_queue_s * int_queue_create(size_t num_values) {

    struct int_queue_s * int_queue;
    size_t modulus;
    size_t temp = num_values + 1;
    do {
        modulus = temp;
        temp--;
        temp &= modulus;
    } while (temp);
    modulus <<= 1;

    size_t int_queue_mem = sizeof(*int_queue) + ( sizeof(int_queue->int_container[0]) * modulus);

    if (int_queue_mem % sysconf(_SC_PAGE_SIZE)) int_queue_mem += sysconf(_SC_PAGE_SIZE) - (int_queue_mem % sysconf(_SC_PAGE_SIZE));

    int_queue = mmap(NULL, int_queue_mem, PROT_READ | PROT_WRITE, MAP_ANONYMOUS | MAP_PRIVATE , -1, 0);
    if (int_queue == MAP_FAILED)
        return NULL;

    int_queue->modulus = modulus-1;
    int_queue->read_offset = 0;
    int_queue->write_offset = 0;
    int_queue->size = num_values;

    memset((void*)int_queue->int_container, 0, sizeof(int_queue->int_container[0]) * modulus);

    size_t i;
    for (i = 0; i < num_values; ) {
        int_queue_put(int_queue, ++i );
    }

    return int_queue;
}

#endif

void * test_int_queue_thread(struct int_queue_s * int_queue) {
    long int value;

    size_t i;

    for (i = 0; i < 10000000; i++) {

        int waited = -1;
        do {
            value = int_queue_get_sync(int_queue);
            waited++;
        } while (!value);

        if (waited > 0) {
            printf("waited %d cycles to get a new value\n", waited);
            // continue;
        }

        // else {
        printf("thread %p got value %ld, i = %zu\n", (void *)pthread_self(), value, i);
        // }

        int timesleep = rand();
        timesleep &= 0xFFF;

        usleep(timesleep);

        int_queue_put_sync(int_queue, value);

        printf("thread %p put value %ld back, i = %zu\n", (void *)pthread_self(), value, i);
    }

    return NULL;
}

int main(int argc, char ** argv) {
    struct int_queue_s * int_queue = int_queue_create(2);

    if (!int_queue) {
        fprintf(stderr, "error initializing int_queue\n");
        return -1;
    }

    srand(0);

    long int value[100];

    size_t i;

    for (i = 0; i < 100; i++) {
        value[0] = int_queue_get(int_queue);

        if (!value[0]) {
            printf("error getting value\n");
        }
        else {
            printf("got value %ld\n", value[0]);
        }

        int_queue_put(int_queue, value[0]);

        printf("put value %ld back successfully\n", value[0]);
    }

    pthread_t threads[100];
    for (i = 0; i < 4; i++) {
        pthread_create(threads + i, NULL, (void * (*)(void *))test_int_queue_thread, int_queue);
    } 

    for (i = 0; i < 4; i++) {
        pthread_join(threads[i], NULL);
    } 

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T19:20:56.200

有趣的问题。这是一个疯狂的猜测。:-)

看来您需要在 read_offset 和 write_offset 之间进行一些同步。

例如，这是一个可能相关或无关的种族。在您的比较和交换和 write_offset 增量之间，您可能有一个读者进来并将值设置回零。

```
Writer-1: get write_offset=0
Writer-2: get write_offset=0
Writer-1: compare-and-swap at offset=0
Writer-1: Set write_offset=1
Reader-1: compare-and-swap at offset=0 (sets it back to zero)
Writer-2: compare-and-swap at offset=0 again even though write_offset=1
Writer-2: Set write_offset=2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T18:52:44.097

我相信这`int_queue->write_offset++;`就是问题所在：如果两个线程同时执行这条指令，它们都会从内存中加载相同的值，将其递增，然后将相同的结果存储回来（这样变量只会增加一）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-26T19:15:24.467

我的意见是

```
int_queue->write_offset++; 
```

和

```
write_offset = int_queue->write_offset & int_queue->modulus; 
```

不是线程安全的

# java - 1 个框架上的 3 个面板

> ID：13571173
> 
> 赞同：1
> 
> 时间：2012-11-26T18:48:47.933
> 
> 标签：java, swing

我在框架顶部放置三个不同的面板时遇到了真正的麻烦，因为我需要在每个面板上具有不同的布局。我似乎无法让它工作，我已经连续尝试了 4 天。我在这段代码中找不到我哪里出错了。

我这样做是最好的方法吗？任何想法或帮助将不胜感激！！！！！！

**我的代码：**

```
 public Mem() {
    super("3 panels on 1 frame");       

    JFrame frame = new JFrame();

    setSize(500, 500);      
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    JPanel p1 = new JPanel();
    JPanel p2 = new JPanel();
    JPanel p3 = new JPanel();

    //Adding three different panels with borderlayout
    frame.setLayout(new BorderLayout());  

    //Panel 1 is the Player Panel with labels
    JLabel ply1 = new JLabel("Player 1");
    JLabel ply2 = new JLabel("Player 2");
    JLabel ply3 = new JLabel("Player 3");
    JLabel ply4 = new JLabel("Player 4");
    p1.add(ply1); p1.add(ply2); p1.add(ply3); p1.add(ply4);

    //Panel 2 is the game panel with playingcards on it. (Clickable buttons)
    JButton card1 = new JButton("Card");
    p2.add(card1); p2.add(card1); p2.add(card1); p2.add(card1); p2.add(card1); p2.add(card1); p2.add(card1);
    p2.add(card1); p2.add(card1); p2.add(card1); p2.add(card1); p2.add(card1); p2.add(card1); p2.add(card1);

    //Panel 3 is the lower panel with the buttons new game & close on it. 
    JButton newGame = new JButton("New Game");
    newGame.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            startGame();
        }
    });
    JButton endGame = new JButton("Close");
    endGame.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            closeGame();
        }
    });
    p3.add(newGame);  
    p3.add(endGame);

    frame.add(p1, BorderLayout.EAST);  
    frame.add(p2, BorderLayout.CENTER);  
    frame.add(p3, BorderLayout.SOUTH);

    setVisible(true);   
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T21:54:22.487

有几件事：

**1)**您多次添加摆动组件不会复制它 - 它将被删除并添加到新位置。所以这：

```
JButton card1 = new JButton("Card");
p2.add(card1); p2.add(card1); p2.add(card1); p2.add(card1); p2.add(card1); p2.add(card1); p2.add(card1);
p2.add(card1); p2.add(card1); p2.add(card1); p2.add(card1); p2.add(card1); p2.add(card1); p2.add(card1); 
```

与此相同：

```
JButton card1 = new JButton("Card");
p2.add(card1); 
```

**2)**看来您的课程扩展了`JFrame`。如果是这样，请删除所有对`JFrame frame = new JFrame();`. 通过使用该`frame`变量，您将创建一个框架，将面板添加到其中，但不显示。所以你看到的任何地方都`frame.`删除它。

例子：

```
frame.setLayout(new BorderLayout()); 
```

变成

```
setLayout(new BorderLayout()); 
```

**3)**我确信你之前提出的一些问题有可以接受的答案，或者你自己想出了一个可以接受的答案。您可以奖励那些提供帮助的人，或者您可以提供您找到的答案并接受它。那么更多的人会花时间为你提供一个好的答案。这对你更好，对我们更好，对和你有同样问题的随机人更好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T18:57:10.980

您似乎将面板附加到框架构造函数`JFrame`中从未显示的面板上。`Mem`您可以删除或评论该行：

```
JFrame frame = new JFrame(); 
```

并使用：

```
add(p1, BorderLayout.EAST);
add(p2, BorderLayout.CENTER);
add(p3, BorderLayout.SOUTH); 
```

然后，您将能够看到组件在您应用的任何布局的面板中是如何排列的：

```
p1.setLayout(new GridLayout(2, 2));
// etc. 
```

# ruby - 尝试在 ruby 1.9.3 上将压缩文件上传到 s3 时出现 BadDigest 错误

> ID：13571175
> 
> 赞同：0
> 
> 时间：2012-11-26T18:48:48.857
> 
> 标签：ruby, file-upload, amazon-s3, md5, digest

如前所述，我正在尝试将文件上传到 s3

```
require 'digest/md5' 
require 'base64' 
require 'aws-sdk'

def digest f

 f.rewind

 Digest::MD5.new.tab do |dig|

  f.each_chunk{|ch| dig << ch}

 end.base64digest

ensure

 f.rewind

end 

file = File.new(compress file) #file zipped with zip/zip

total = file.size

digest = digest(file)

s3 = AWS::S3::new(:access_key_id => @access_key_id, :secret_access_key
=> @secret_access_key)

bucket = s3.buckets['mybucket']

bucket.objects["myfile"].write :content_md5 => digest, :content_length
=> total do |buf,len|

 buf.write(file.read len)

end 
```

但我不断得到 AWS::S3::Errors::BadDigest 异常

如果我尝试在不通过 :content_md5 的情况下上传文件，一切顺利，存档下载并正确打开。

也正如我刚刚发现这在 ruby​​ 1.9.3 上失败但在 1.9.2 上运行良好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:50:36.907

通过将摘要函数更改为

> 定义摘要 f
> 
> ```
> Digest::MD5.file(f.path).base64digest 
> ```
> 
> 结尾

我认为问题在于传递给它的文件是打开的

# jquery - Jquery Get在IE 9中导致错误

> ID：13571177
> 
> 赞同：0
> 
> 时间：2012-11-26T18:48:57.040
> 
> 标签：jquery, arrays, internet-explorer

我有以下 HTML 代码

```
<label class="fileinput-button" id="fileUpload-label">
   <span class="btn btn-add" id="fileUpload-span">Add a file..</span>
      <div id="fileinput-outer">
         <input type="file" name="files[]" id="fileUpload">
      </div>
</label> 
```

然后我使用 Jquery 来获取 Input type= File 的文件列表

```
$('#fileUpload').live('change', function () {
    $.map($('#fileUpload').get(0).files, function (file) { 
        $('#fileList')
            .append(CreateFileList(file.name, true));
        });
 }); 
```

这在 Chrome 和 Firefox 中效果很好，但是在 IE 中错误是

```
Unable to get value of the property 'length': object is null or undefined 
```

所以我开始排除故障并拥有此代码

```
var arrFiles[];
arrFiles = $('#fileUpload').get(0).files;
    if(arrFiles.length === 0) {
        alert('empty');    
    } else {
       alert('has value');    
    } 
```

Chrome 和 Firefox - 代码和警报按预期工作，但 IE 仍然抛出错误

```
Unable to get value of the property 'length': object is null or undefined 
```

似乎 IE 可能对 Jquery Get 有问题 ..

任何人都知道如何在有或没有 Jquery 的情况下修复 IE 中的这个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T18:57:54.580

`jQuery().get`工作正常，你没有破坏它。但是，IE 9 没有`files`属性`<input type=file />`，它是在 IE 10 中引入的。请参阅此示例[http://jsfiddle.net/RtqnZ/](http://jsfiddle.net/RtqnZ/)

你也错过了`multiple`你的财产`input`

参考： http: [//msdn.microsoft.com/en-us/library/ie/hh772931 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/hh772931(v=vs.85).aspx)

# jquery - 如何在jQuery中绑定多个顺序事件？

> ID：13571187
> 
> 赞同：4
> 
> 时间：2012-11-26T18:49:31.590
> 
> 标签：jquery

我希望能够使用 jquery 绑定多个顺序事件。我想做以下事情：

> 单击`div1`- 也称为 mousedown 事件 - 现在，如果您在仍然按下鼠标的同时开始移动鼠标，那么执行一些功能。

这样做最顺利的方法是什么？只是为了打电话，还是有更简单的东西`if`？`.on()`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T18:57:56.363

您可以利用[`.on()`](http://api.jquery.com/on/)并[`.off()`](http://api.jquery.com/off/)实现这一点。

```
var $div = $("div");

var mousemove = function() { ... };

$div.on({
  mousedown: function() {
    $div.on("mousemove", mousemove);
  },
  mouseup: function() {
    $div.off("mousemove", mousemove);
  }
});​ 
```

请注意，`.on()`和`.off()`是分别绑定和取消绑定事件的推荐方法。

[你可以检查一个活生生的例子。](http://jsfiddle.net/XjraY/)

* * *

## 更新

或者，您可以将`mouseup`事件绑定到`document`. 这样，即使在悬停元素时没有发生鼠标释放，您也可以检测到鼠标的释放。

```
var $document = $(document);
var $div = $("div");

var mousemove = function() { ... };

$div.mousedown(function() {
  $div.on("mousemove", mousemove);
})

$document.mouseup(function() {
  $div.off("mousemove", mousemove);
});​ 
```

* * *

此外，它的简写功能。让我们称之为`.drag()`。

```
$.fn.drag = function(fn) {
  var $document = $(document);
  return $(this).each(function() {
    var self = this;
    var $this = $(this);
    var mousemove = function() {
      fn.dragging && fn.dragging.call($this);
    };
    $this.mousedown(function() {
      fn.start && fn.start.call($this);
      fn.dragging && $this.on("mousemove", mousemove);
    });
    $document.mouseup(function() {
      fn.dragging && $this.off("mousemove", mousemove);
      fn.stop && fn.stop.call(self);
    });
  });
}; 
```

```
$("div").drag({
  start: function() { ... },
  dragging: function() { ... },
  stop: function() { ... }
});​ 
```

[你可以在这里看到它。](http://jsfiddle.net/ZPZqQ/)

# c - Shell 脚本 - (编译 C)

> ID：13571190
> 
> 赞同：1
> 
> 时间：2012-11-26T18:49:38.930
> 
> 标签：c, shell, compilation

第二个输入参数 ($2) 是 ac 程序的路径。我需要检查该 C 程序是否编译。

我相信这是编译C程序的方法：

```
 cc $2 
```

程序如何判断 C 程序文件是否已编译？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:55:58.247

假设这是一个 POSIX shell（例如 Bash），你可以这样写：

```
cc "$2"
if [ $? = 0 ] ; then
    # . . . commands to run if it compiled O.K. . . .
else
    # . . . commands to run if it failed to compile . . .
fi 
```

或者更简洁一点：

```
if cc "$2" ; then
    # . . . commands to run if it compiled O.K. . . .
else
    # . . . commands to run if it failed to compile . . .
fi 
```

在特殊情况下，如果编译失败，您只想运行某个命令，例如`exit 1`，您可以编写如下内容：

```
cc "$2" || exit 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:12:27.073

在`Bash - shell`你可以直接使用下面的，不需要`if`

```
 cc $2
    [ $? -ne 0 ] && exit 1

    # rest of code 
```

或者你可以使用，

```
cc $2
if [ $? -eq 0 ]; then
# code for true
else
# code for false
fi 
```

# python - 在python中将深度优先转换为广度优先

> ID：13571191
> 
> 赞同：1
> 
> 时间：2012-11-26T18:49:42.860
> 
> 标签：python, maze

我有一个关于我正在制作的迷宫探路者的问题。我有一个深度优先的解决方案，但我想要一个广度优先的解决方案。这是深度第一：

```
def find_path(pathList):
    if pathList[-1] == goal:
        return pathList

    for i in adjacent_passages(labyrinth, pathList[-1]):
        if i not in pathList:
            found_path = find_path(pathList + [i])
            if found_path:
                return found_path 
```

这就是我在广度优先问题上的“远”：

```
def find_path_bf(pathL):
    num = 0

    for i in range(0, len(pathL)):
        frontier[i] = adjacent_passages(labyrinth, pathL[i][-1])

    for i in range(0, len(pathL)):    
        if pathL[i][-1] == goal:
            return pathL[i]

    for i in frontier:
        if i not in pathL:
            pathL[num].append(i)
            num = num + 1

    find_path_bf(pathL) 
```

迷宫是迷宫的矩阵，相邻通道找到相邻的正方形:)

# php - 我需要在 PHP“preg_match_all”中获得一个值 - 基本（我认为）

> ID：13571195
> 
> 赞同：1
> 
> 时间：2012-11-26T18:50:08.290
> 
> 标签：php, preg-match-all

我正在尝试使用许可证 PHP 系统……我想向用户显示他们的许可证状态。许可证服务器给了我这个：

```
name=Service_Name;nextduedate=2013-02-25;status=Active 
```

我需要像这样分离数据：

```
$name = “Service_Name”;
$nextduedate = “2013-02-25”;
$status = “Active”; 
```

我有 2 天的时间想用 preg_match_all 解决这个问题，但我不能:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:55:02.970

这可以很简单地在没有正则表达式的情况下解决。的使用`explode()`将对您有所帮助。

```
$str = "name=Service_Name;nextduedate=2013-02-25;status=Active";

$split = explode(";", $str);
$structure = array();

foreach ($split as $element) {
    $element = explode("=", $element);
    $$element[0] = $element[1];
}

var_dump($name); 
```

尽管我敦促您改用数组。比发明不存在且未明确声明的变量更具可读性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T18:56:11.897

`;`如果您替换为 ，这基本上是一个查询字符串`&`。你可以`parse_str()`这样尝试：

```
$string = 'name=Service_Name;nextduedate=2013-02-25;status=Active';
parse_str(str_replace(';', '&', $string));

echo $name; // Service_Name
echo $nextduedate; // 2013-02-25
echo $status; // Active 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T19:07:14.133

听起来您只想将文本沿分号分成不同的行，在前面添加一个美元符号，然后添加空格和引号。我不确定您是否可以使用正则表达式一步完成（或者至少我不想考虑*该*正则表达式会是什么样子），但您可以通过多个步骤来完成。

1.  使用[preg_split()](http://www.php.net/manual/en/function.preg-split.php)将字符串沿分号拆分为一个数组。
2.  循环遍历数组。
3.  使用[str_replace](http://php.net/manual/en/function.str-replace.php)将每个 '=' 替换为 ' = "'。
4.  使用字符串连接将 $ 添加到前面，将 "; 添加到每个字符串的末尾。

假设您的数据在数据中不包含引号、等号、分号等，这应该可行。如果是这样，您将不得不为此弄清楚解析规则。

# python - 为什么我的峰度函数不产生与 scipy.stats.kurtosis 相同的输出？

> ID：13571198
> 
> 赞同：4
> 
> 时间：2012-11-26T18:50:16.073
> 
> 标签：python, numpy, statistics, scipy

我有一个作业问题，我应该为 Kurtosis 编写一个函数，如下所述：

![峰度，其中 theta 是标准差](../Images/4bae527a7b1990d4a95e80a1509886a0.png)

分母中的 theta 是标准偏差（方差的平方根），分子中的 x-with-the-bar 是 的平均值`x`。

我已经实现了如下功能：

```
import numpy as np
from scipy.stats import kurtosis

testdata = np.array([1, 2, 3, 4, 5])

def mean(obs):
    return (1\. / len(obs)) * np.sum(obs)

def variance(obs):
    return (1\. / len(obs)) * np.sum((obs - mean(obs)) ** 2)

def kurt(obs):
    num = np.sqrt((1\. / len(obs)) * np.sum((obs - mean(obs)) ** 4))
    denom = variance(obs) ** 2  # avoid losing precision with np.sqrt call
    return num / denom 
```

前两个函数`mean`和分别成功地与和`variance`交叉验证。`numpy.mean``numpy.var`

`kurt`我尝试使用以下语句进行交叉验证：

```
>>> kurtosis(testdata) == kurt(testdata)
False 
```

这是两个峰度函数的输出：

```
>>> kurtosis(testdata)  # scipy.stats
-1.3

>>> kurt(testdata)  # my crappy attempt
0.65192024052026476 
```

我哪里做错了？`scipy.stats.kurtosis`做的事情比我给定的方程式更精彩吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T18:56:08.587

默认情况下，[`scipy.stats.kurtosis()`](http://docs.scipy.org/doc/scipy-0.7.x/reference/generated/scipy.stats.kurtosis.html)：

1.  计算*超额*峰度（即从结果中减去 3）。
2.  校正统计偏差（这会影响一些分母）。

这两种行为都可以通过`scipy.stats.kurtosis()`.

最后，`np.sqrt()`您的方法中的调用是不必要的，因为公式中没有平方根。一旦我删除它，你的函数的输出就会匹配我从`kurtosis(testdata, False, False)`.

> 我试图用以下语句交叉验证 kurt

您不应该比较浮点数的精确相等性。即使数学公式相同，它们如何转换为计算机代码的微小差异也会影响计算结果。

最后，如果您要编写数字代码，我强烈建议您阅读[每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

PS这是我用过的功能：

```
In [51]: def kurt(obs):
   ....:     num = np.sum((obs - mean(obs)) ** 4)/ len(obs)
   ....:     denom = variance(obs) ** 2  # avoid losing precision with np.sqrt call
   ....:     return num / denom 
```

# asp.net - 复选框列表保持禁用

> ID：13571201
> 
> 赞同：1
> 
> 时间：2012-11-26T18:50:19.943
> 
> 标签：asp.net, vb.net, checkboxlist

尝试在（日历预订系统）中使用复选框列表。如果数据库中有任何与日期和小时对应的数据，则该复选框应被禁用并显示为红色。这一切都完美地工作在这里是代码。使用 vb.net

好的，我找到了一种清除复选框的方法

```
 Dim i As Integer
    Dim chboxItem As ListItem
    For Each chboxItem In CheckBoxListMon.Items
        i += 1
        If (i Mod 1 = 0) Then
            chboxItem.Enabled = True
        End If
    Next

Protected Sub Page_LoadComplete(sender As Object, e As EventArgs) Handles Me.LoadComplete

    Try
        strQuery = "SELECT BookingDate, checkBoxItem, BookRegUserID,Booked FROM bookings INNER JOIN checkboxitems where checkBoxItem = BookingTime"

        MySQLCmd = New MySqlCommand(strQuery, dbCon)

        dbCon.Open()

        DR = MySQLCmd.ExecuteReader

        While DR.Read

            bookDate = DR.Item("BookingDate")
            bookTime = DR.Item("checkBoxItem")
            bookRegID = DR.Item("BookRegUserID")
            booked = DR.Item("Booked")

            Dim test As String = bookTime.ToString()

            Select Case True

                Case bookDate = lblMonday.Text And CheckBoxListMon.Items.FindByValue(test) IsNot Nothing

                    CheckBoxListMon.Items.FindByValue(bookTime).Enabled = False
                    CheckBoxListMon.Items.FindByValue(bookTime).Attributes.Add("Style", "color: red;")

            End Select
        End While
        DR.Close()
        dbCon.Close()
    Catch ex As Exception

    End Try

End Sub 
```

当页面加载时，它不会更改数据库中的那些。但是当我重新加载页面时，它实际上会完美运行。

我在哪里可以检查以确保它们已经在内存中。

任何帮助都感激不尽。谢谢大家。

彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T23:25:03.830

选择另一个星期后，您需要刷新数据，因为您每周使用相同的控件。您应该能够在用于切换几周的任何控件中执行此操作。

Page_LoadComplete 只能在每次页面完成加载时加速触发，这就是您的控件在转到另一个页面并返回时工作的原因。

# php - 如何在php中回显本月的第1天和第15天

> ID：13571203
> 
> 赞同：-2
> 
> 时间：2012-11-26T18:50:23.627
> 
> 标签：php, date

我需要在 PHP 中回显每月 1 月至 12 月的 1 日和 15 日。我知道如何使用

```
$date1 = $_POST['previous_pay_date'];
  $date2 = date('M j, Y', strtotime($date1 . " + 7 day"));
  $date3 = date('M j, Y', strtotime($date2 . " + 7 day"));
  $date4 = date('M j, Y', strtotime($date3 . " + 7 day"));

  $date1 = $_POST['previous_pay_date'];
  $date2 = date('M j, Y', strtotime($date1 . " + 14 day"));
  $date3 = date('M j, Y', strtotime($date2 . " + 14 day"));
  $date4 = date('M j, Y', strtotime($date3 . " + 14 day"));

  $date1 = $_POST['previous_pay_date'];
  $date2 = date('M j, Y', strtotime($date1 . " + 1 month"));
  $date3 = date('M j, Y', strtotime($date2 . " + 1 month"));
  $date4 = date('M j, Y', strtotime($date3 . " + 1 month"));
  $date5 = date('M j, Y', strtotime($date4 . " + 1 month")); 
```

但现在我只需要每月的 1 号和 15 号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:02:00.450

我的解决方案，使用 DateTime 对象：看起来更简单，不是吗？

```
<?php

header("Content-type: text/plain");

$date = new DateTime("2012-01-01");
echo $date->format("Y-m-d"), PHP_EOL;
$date->modify("+14 days");
echo $date->format("Y-m-d"), PHP_EOL;

while ($date->format("Y") != "2013") {
    $date->modify("first day of next month");
    echo $date->format("Y-m-d"), PHP_EOL;
    $date->modify("+14 days");
    echo $date->format("Y-m-d"), PHP_EOL;
} 
```

# sql - 使用条件在多对多表中保存一行

> ID：13571206
> 
> 赞同：0
> 
> 时间：2012-11-26T18:50:40.747
> 
> 标签：sql, sql-server, sql-server-2008, many-to-many

我有 3 个表形成多对多关系，如下图所示。

![在此处输入图像描述](../Images/c85ed3ebc9de7e913fe6c49a4c29ed23.png)

如何按照以下规则在公司编号 1 和用户编号 2 之间的 UsersByCompanies 表中保存条目：

*   当我们在用户和公司之间创建新条目时，UsersByCompanies 中的 IsEnabled 属性必须设置为 1，并且 Companies.CompanyCode = 1 和 Users.IDNumber = 2 的任何其他行的 IsEnabled 属性必须设置为 0。
*   新行中的 DateCreated 属性必须具有当前日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:43:54.127

听起来您需要一个插入触发器和一些默认值：当您插入 UsersByCompanies 时，在 IsEnabled 列上使用默认值，并设置一个插入触发器函数来执行更新以根据需要重置 IsEnabled 属性。同样，对 DateCreated 属性使用默认值 getdate()。

# java - 在 Android App 中加载多个本机库的最佳方法

> ID：13571208
> 
> 赞同：5
> 
> 时间：2012-11-26T18:50:45.187
> 
> 标签：java, android, jar, android-ndk, java-native-interface

我有一个应用程序，它使用了 3 个不同的 JAR 库……让我们称它们为 a.jar、b.jar 和 c.jar。这些 JARS 中的每一个都有一个伴随的本机 C++ 共享对象。

现在，a.jar 和 b.jar 都导入并使用 c.jar。

所以，我的问题是 - 使用 system.loadLibrary 加载本机库时最好的方法是什么？我可以从我的应用程序代码中全部加载它们还是必须由各自的 JAR 加载它们？如果我从各自的 JAR 文件加载它们，会在单独的线程中加载吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:31:15.400

加载本机库是类的责任。

假设每个 jar 文件也有名为 A、B 和 C 的类。所有这些类最有可能通过静态方式加载它们的本地伙伴。

```
class A { 
    static { 
        System.loadLibrary(“A”); 
    }

    C c;
} 

class C { 
     static { 
         System.loadLibrary(“C”); 
     }
} 
```

在这种结构中，当您访问类 A 时，将由类加载器加载和初始化类 C。

# ios - 故事板中的 UIPopover

> ID：13571216
> 
> 赞同：0
> 
> 时间：2012-11-26T18:51:22.520
> 
> 标签：ios, xcode

我有一个 UIViewcontroller，带有一个按钮。当我按下按钮时，它会触发一个弹出视图的转场（转场是通过情节提要设置的，而不是通过代码设置的）。当弹出框被解除（通过按下其边界之外）时，我希望重新加载初始视图控制器。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:55:45.930

您可以在方法中设置弹出框控制器的委托，并实现弹出框关闭时将调用`prepareSegue:`的委托方法。`popoverControllerDidDismissPopover:`你可以得到弹出框控制器`UIPopoverController *popover = [(UIStoryboardPopoverSegue *)segue popoverController]`

# dart - Dart Node.js settings.env 等效

> ID：13571217
> 
> 赞同：1
> 
> 时间：2012-11-26T18:51:31.147
> 
> 标签：dart

Dart 中 Node Express 代码的等效语句是什么：

```
app.settings.env 
```

如在

```
console.log("Express server listening on port %d in %s mode", app.address().port, app.settings.env); 
```

我看过[ArgResults](http://api.dartlang.org/docs/bleeding_edge/args/ArgResults.html)但我不清楚如何使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T06:42:52.543

从[快递文档](http://expressjs.com/api.html#app-settings)中：

> **env** - 环境模式，默认为 process.env.NODE_ENV 或 "development"

问题归结为访问环境变量，此处已解决：[访问用户环境变量](https://stackoverflow.com/questions/12636738/access-to-user-environment-variable)

```
import 'dart:io';

main() {
    String env;
    if (Platform.environment.containsKey("DART_ENV")) {
        env = Platform.environment["DART_ENV"];
    } else {
        env = "development";
    }
} 
```

`ArgResults`只是解析命令行参数，这可能不是你想要的。改为使用`ArgParser`。

# php - 从 MySQL 中检索 Unicode 文本导致 ???? 在输出

> ID：13571221
> 
> 赞同：-2
> 
> 时间：2012-11-26T18:51:41.537
> 
> 标签：php, mysql, unicode

我`لاہور`在 MySQL 中存储 Unicode 文本，我已将表和列设置为 utf8_general_ci。文本`لاہور`在 MySQL 中正确显示。但是，如果我用 PHP 回应它，它会显示`??????`在浏览器窗口上。

这里要提一件事：我有整个 Unicode 文档，所有单词都正确显示，但它们是直接编写的，即不是来自 MySQL。

即使我尝试

```
$p="لاہور";
echo $p; 
```

它显示`لاہور`在浏览器中。只有在从 MySQL 中检索时才会出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:06:32.177

使用元标记设置内容类型可能并不总是足够的，我通常通过 header 指令以及下面的方式设置它。

```
header('Content-Type: text/html; charset=utf-8'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T00:06:39.767

很可能您的 MySQL*连接*（而不是存储）没有设置为 UTF-8，导致从 MySQL 检索到的 UTF-8 数据被转换为 Latin1（或类似），它不能代表这些字符，它们被替换为`?`.

如果您正在使用`mysql_`：

```
mysql_set_charset( 'utf8' ); 
```

如果您正在使用`mysqli_`：

```
$mysqli->set_charset( 'utf8' ); 
```

**在**您进行任何查询之前

如果您正在使用`PDO`，请添加`charset=utf8`到连接字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T18:55:57.547

造成这种情况的一个常见原因是您的 PHP 脚本正在以另一种格式（例如 ASCII）保存，您必须确保您的 PHP 脚本也保存为 UTF-8 或您在数据库中使用的任何编码。

另一个可能的原因是 MySQL 没有向您的脚本返回正确的 Unicode 字符，您可以使用`mysql_query("SET NAMES utf8")`或您想使用的任何编码，在处理您的查询之前，解决此问题的一个好方法可能是将字符串转换为它们各自的 unicode 代码和比较它们，看看它们是否相同。

# android - Android 如何在 MapController 中停止 animateTo

> ID：13571224
> 
> 赞同：2
> 
> 时间：2012-11-26T18:51:51.340
> 
> 标签：android, android-mapview, android-maps

为了动画到地图上的某个点，我使用

> myMapController.animateTo(point);

但有时我必须运行另一个动画来指向。为了不让某些元素闪烁，我需要停止最后一个动画。

我试过这两个：

> myMapController.stopPanning()
> 
> myMapController.stopAnimation(false);

但这没有帮助

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T23:38:46.943

要停止动画，您需要使用参数调用下面的方法`true`（不是`false`您的问题）：

```
myMapController.stopAnimation(true); 
```

这会停止动画并立即将地图移动到 请求的最终位置`animateTo()`。

如果要停止动画并将地图保持在原来的位置（在动画中间），请使用以下命令：

```
 GeoPoint movingCenter = mapView.getProjection().fromPixels(mapView.getWidth()/2, mapView.getHeight()/2);
    myMapController.stopAnimation(true);
    myMapController.setCenter(movingCenter); 
```

问候。

# database - 单击一个按钮即可填充多个网格视图

> ID：13571227
> 
> 赞同：0
> 
> 时间：2012-11-26T18:52:21.807
> 
> 标签：database, vb.net, gridview, buttonclick

我在 VB.net 中编程。我正在尝试通过针对我的数据库搜索电子邮件地址来填充 2 个 gridview 表。当用户单击搜索按钮时，我希望我的程序从文本框中获取值，根据我的数据库搜索电子邮件地址，然后在我的“ScrumMaster”表和“开发人员”表中显示用户配置文件。我不知道如何在一个“btnSearchEmail_Click”方法中实现所有这些。目前我拥有的代码是

```
 Protected Sub btnSearchEmail_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnSearchEmail.Click

End Sub

Protected Sub ScrumMastersDataSource_Selecting(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.LinqDataSourceSelectEventArgs) Handles ScrumMastersDataSource.Selecting
    Dim db As New AgileClassesDataContext()

    Dim enteredEmail = txtEnteredEmail.Text

    Dim scrumMasters = (From u In db.Users
                      Join ur In db.UserRoles On u.UserId Equals ur.UserId
                      Join r In db.Roles On ur.RoleId Equals r.RoleId
                      Where r.RoleId = 2 And u.Email = enteredEmail
                      Select u).Distinct

    e.Result = scrumMasters
End Sub

Protected Sub DevelopersDataSource_Selecting(sender As Object, e As System.Web.UI.WebControls.LinqDataSourceSelectEventArgs) Handles DevelopersDataSource.Selecting
    Dim db As New AgileClassesDataContext()

    Dim enteredEmail = txtEnteredEmail.Text

    Dim developers = (From u In db.Users
                      Join ur In db.UserRoles On u.UserId Equals ur.UserId
                      Join r In db.Roles On ur.RoleId Equals r.RoleId
                      Where r.RoleId = 3 And u.Email = enteredEmail
                      Select u).Distinct

    e.Result = developers
End Sub 
```

如您所见，这里有 3 种方法。我想将“ScrumMastersDataSource_Selecting”和“DevelopersDataSource_Selecting”放在“btnSearchEmail_Click”事件中，以便在单击“btnSearchEmail”时它们都运行。由于电子邮件地址可能与开发人员和 Scrum Master 角色相关联，因此重复不是问题。任何的建议都受欢迎。我希望这个问题有意义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:08:15.563

尝试这样的事情（这是 C#/VB.NET 的混合）：

```
private void RefreshGrids()
{
    ScrumMastersDataSource.DataSource = GetListScrum(txtEnteredEmail.Text);
    ScrumMastersDataSource.DataBind();
    DevelopersDataSource.DataSource = GetListDev(txtEnteredEmail.Text);
    DevelopersDataSource.DataBind();
}

Protected Sub btnSearchEmail_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnSearchEmail.Click

    RefreshGrids();

End Sub 
```

# qt - 包含 C 链接和声明错误

> ID：13571229
> 
> 赞同：0
> 
> 时间：2012-11-26T18:52:31.337
> 
> 标签：qt

我有一个奇怪的问题，当我将 QtNetwork 模块中的任何内容包含到我的 Qt Desktop 应用程序中时，我得到了一堆错误，甚至在使用包含的任何内容之前。例如，如果我包含 QtNetwork/QHostAddress，则会收到以下错误：

```
..\..\QtSDK\Desktop\Qt\4.8.1\mingw\include/QtNetwork/qabstractsocket.h:66: error: template with C linkage

..\..\QtSDK\Desktop\Qt\4.8.1\mingw\include/QtNetwork/qabstractsocket.h:253: error: declaration of C function 'QDebug operator<<(QDebug, QAbstractSocket::SocketState)' conflicts with

..\..\QtSDK\Desktop\Qt\4.8.1\mingw\include/QtNetwork/qabstractsocket.h:252: error: previous declaration 'QDebug operator<<(QDebug, QAbstractSocket::SocketError)' here

..\..\QtSDK\Desktop\Qt\4.8.1\mingw\include/QtNetwork/qhostaddress.h:141: error: declaration of C function 'QDebug operator<<(QDebug, const QHostAddress&)' conflicts with

..\..\QtSDK\Desktop\Qt\4.8.1\mingw\include/QtNetwork/qabstractsocket.h:253: error: previous declaration 'QDebug operator<<(QDebug, QAbstractSocket::SocketState)' here

..\..\QtSDK\Desktop\Qt\4.8.1\mingw\include/QtNetwork/qhostaddress.h:148: error: declaration of C function 'QDataStream& operator<<(QDataStream&, const QHostAddress&)' conflicts with

..\..\QtSDK\Desktop\Qt\4.8.1\mingw\include/QtNetwork/qhostaddress.h:141: error: previous declaration 'QDebug operator<<(QDebug, const QHostAddress&)' here 
```

当然，我添加了这一行

```
Qt += network 
```

到我的`.pro`文件，所以这不是问题。`opengl`可以毫无问题地包含另一个模块 ( )。

我已经通过创建一个除了 QtNetwork 之外什么都不做的虚拟项目来确保我的 Qt 安装本身没有任何问题。它工作得很好。

所以，我的项目一定有问题，但由于错误消息只出现在这种特殊情况下，我不知道要为你提供什么信息。

我只能说，该程序之前是纯 C 代码，现在使用 Qt 将其更改为 C++，因此其中仍有混合。但这似乎不是问题，只要不包括 QtNetwork。

有关如何解决此问题或与此问题相关的信息的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T11:49:50.963

我终于弄清楚了我的问题。解决方案很简单：

我将 QTNetwork 包含在头文件中，而我的团队成员又将其包含在其他一些 .cpp 文件中，但他错误地将包含语句放置在 extern "C" 块中，因此最后 QTNetwork 被包含为一个外部“C”，即使它是 C++。

因此，吸取了两个教训：

1.  不要依赖队友代码的正确性。
2.  如果包含导致错误，请跟踪整个包含链以追踪问题。

# php - 查询结果记录到列进行比较

> ID：13571231
> 
> 赞同：1
> 
> 时间：2012-11-26T18:52:42.867
> 
> 标签：php, mysql, while-loop, html-table, field

有没有办法实现将查询结果显示到列中并将记录转到下一行？

这是我的 SQL 表：

```
------------SQL TABLE -----------

    id   |    product_name    | product_type
    0    |    Lorem           | Table   
    1    |    Ipsum           | Chair
    2    |    Dolor           | Lamp
    3    |    Sit             | Chair 
```

这就是我想要的。

```
 Lorem    |  Ipsum      |    Dolor   |   Sit       |
------------------------------------------------------------
id    | 0        |  1          |    2       |   3         |
type  | Table    |    Chair    |    Lamp    |    Chair    | 
```

期望的输出：

```
 <table>
  <tr>
    <td>&nbsp;</td>
    <td>Lorem</td>
    <td>Ipsum</td>
    <td>Dolor</td>
    <td>Sit</td>
  </tr>

  <tr>
    <td>id</td>
    <td>0</td>
    <td>1</td>
    <td>2</td>
    <td>3</td>
  </tr>

    <tr>
    <td>type</td>
    <td>Table</td>
    <td>Chair</td>
    <td>Lamp</td>
    <td>Chair</td>
  </tr>

</table> 
```

这是我的代码，但我知道这是非常错误的。如果使用 while 和 for 循环有意义，我只是坚持如何为字段创建新行。

```
 echo '<table><tr>';

        $i=1;

        while($rows = mysql_fetch_array($result)){
            echo '<td><table><tr><th>'.$rows['product_name'].
            '</th></tr><tr><td>'.$rows['product_id'].
            '</td><td>'.$rows['product_type'].'</tr></table></td>';
                if($i %2 == 0) { 
        echo '</tr>
                <tr>'; }
                }    
        echo'
        </tr>
        </table>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:03:51.917

试试这个

```
 echo '<table>';

    while($rows = mysql_fetch_array($result)){
        echo '<tr><th>'.$rows['product_name'].
        '</th></tr><tr><td>'.$rows['id'].
        '</td></tr><tr><td>'.$rows['product_type'].
        '</td></tr>';

            }    
    echo' </table>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:28:23.917

您需要旋转数据。你可以使用这样的东西（未经测试）：

```
// build query
$query = "SELECT id, product_name, product_type FROM whatevertableyouhave";

// query the database
$result = mysql_query($query);

// cols we are interested in (from the SQL query)
$cols = array(
  'id',
  'product_name',
  'product_type';
);

// initialize rotated result using cols
$rotated = array();
foreach($cols as $col) {
  $rotated[$col] = array();
}

// fill rotated array
while(($row = mysql_fetch_assoc($result)) !== false) {
  foreach($cols as $col) {
    $rotated[$col][] = $row[$col];
  }
}

// echo html
echo "<table>";
echo "<tr>";
foreach($cols as $col) {
  echo "<th>{$col}</th>";
}
echo "</tr>";
foreach($rotated as $col => $values) {
  echo "<tr>";
  foreach($values as $value) {
    echo "<td>" . htmlentities($value) . "</td>";
  }
  echo "</tr>";
}
echo "</table>"; 
```

# php - PHP跳过for循环并继续

> ID：13571237
> 
> 赞同：1
> 
> 时间：2012-11-26T18:52:56.777
> 
> 标签：php, for-loop, foreach

![在此处输入图像描述](../Images/8a7207a8b93f16c2d99300b12a5035db.png)

我如何使用 for / foreach 循环实现上述结果 [​​图 2]？我用谷歌搜索但找不到我想要的答案......

```
$name = array('D1','D2','D3' );

foreach ( $name as $k=> $v ) {
  $openTime3 = strtotime('10:00');
  $closeTime3 =  strtotime('15:00');

  echo '<div class="col"> <span class="header">'.$v.'</span>';

  while ( $openTime3 < $closeTime3 ) {
     if ( ( date('Hi', $openTime3) > '1030'  && date('Hi', $openTime3) < '1130' ) && $k == 1) {
        echo '<span class="body "><a href="#" class="unconfirmed">B</a></span>';
        break; /* ???? */
        // try to use continue or break, and it didnt work i above result.
     } else {
        echo '<span class="body"><a href="#" class="available">AV</a></span>';
     }

     $openTime3 = strtotime('+15 minutes', $openTime3);
  }

  echo '</div>';
} 
```

CSS代码：

```
.col { text-align: center; width: auto; float: left; }
.col > span { display: block; }
.col > span > a {height: 26px;line-height: 26px;display: block; padding: 0 10px; }
.col > span > .available { background: #D6F2F4; } 
```

上面的代码总是返回下面的结果[图1]：

![在此处输入图像描述](../Images/f4afb3f64ee9d150998f6a95ccf821fa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:36:09.583

如果您使用中断，它将在 10:45 停止处理，并且在 11 - 11:30 不打印任何内容。

```
D Time Result
0 14:45 AV
1 10:00 AV
1 10:15 AV
1 10:30 AV
1 10:45 B  <= Breaks Here
2 10:00 AV 
```

使用 continue 而不是 break，您需要确保在发出 continue 之前调整时间，否则您将收到一个致命错误，永远不会结束循环。

```
while ( $openTime3 < $closeTime3 ) {
 if ( ( date('Hi', $openTime3) > '1030'  && date('Hi', $openTime3) < '1130' ) && $k == 1) {
    echo '<span class="body "><a href="#" class="unconfirmed">B</a></span>';
    $openTime3 = strtotime('+15 minutes', $openTime3);
    continue;
 } else {
    echo '<span class="body"><a href="#" class="available">AV</a></span>';
 }

   $openTime3 = strtotime('+15 minutes', $openTime3);
} 
```

但这也不会产生您想要的结果，因为它将是 3 个单独的 B 块，而不是 1 个增加高度的 B 块；

```
1 1000 AV
1 1015 AV
1 1030 AV
1 1045 B
1 1100 B
1 1115 B
1 1130 AV
1 1145 AV
etc.. 
```

如果您确实想要 b 块的单个跨度元素，则需要计算所需的数字并根据所需的数字在 css 中相应地调整高度

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:47:32.003

我在你的 CSS 中添加了未确认的样式，边框颜色与背景相同。使用标志切换**B**

```
<style>
.col { text-align: center; width: auto; float: left; }
.col > span { display: block; }
.col > span > a {height: 26px;line-height: 26px;display: block; padding: 0 10px; }
.col > span > .available { background: #D6F2F4;border-style:solid;
border-width:1px;}
.col > span > .unconfirmed { background: #ffff99;border-style:solid;
border-width:1px;border-color: #ffff99;}

</style>
<?php
$name = array('D1','D2','D3' );
$flag=0;//Set flag off
foreach ( $name as $k=> $v ) {
  $openTime3 = strtotime('10:00');
  $closeTime3 =  strtotime('15:00');

  echo '<div class="col"> <span class="header">'.$v.'</span>';

  while ( $openTime3 < $closeTime3 ) {

     if ( ( date('Hi', $openTime3) > '1030'  && date('Hi', $openTime3) < '1130' ) && $k == 1) {

        if($flag==0){
        echo '<span class="body "><a href="#" class="unconfirmed"></a></span>';//Hide B
        $flag=1;Toggle flag on
        }else{
        echo '<span class="body "><a href="#" class="unconfirmed">B</a></span>';Show B
        $flag=0;Toggle flag off
        }

     } else {
        echo '<span class="body"><a href="#" class="available">AV</a></span>';
     }
     //$flag=1;
     $openTime3 = strtotime('+15 minutes', $openTime3);
  }
  echo '</div>';
}
?> 
```

![在此处输入图像描述](../Images/54a9eb3cdf4a04e44060f919fb14ab6c.png)

# django - Django MongoDB 引擎连接失败

> ID：13571238
> 
> 赞同：0
> 
> 时间：2012-11-26T18:53:01.763
> 
> 标签：django, mongodb, django-mongodb-engine

[已解决] 成功完成[django 教程](https://docs.djangoproject.com/en/dev/intro/tutorial01/)后，我尝试使用 mongoDB 作为数据库，搭配[Django MongoDB Engine](http://django-mongodb-engine.readthedocs.org/)。这是数据库配置`settings.py`：

```
DATABASES = {
    'default': {
        'ENGINE': 'django_mongodb_engine', 
        'NAME': 'test',                               
        'HOST': 'localhost',               
        'PORT': 27017,                   
#       'OPTIONS' : {
#           'slave_okay' : True,
#       }
    }
} 
```

这是我在运行后收到的错误消息`python manage.py syncdb` ：

```
raise AutoReconnect("could not find master/primary")
pymongo.errors.AutoReconnect: could not find master/primary 
```

即使关闭了 mongoDB 服务器，我也收到了这个错误，所以我发现这应该是一个连接问题。我发布了一个关于我如何解决这个问题的答案。

* * *

使用 Ubuntu 12.04 LTS x64、Python 2.7、django 1.4.2、mongoDB x86_64 2.2.1（全新安装）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T18:03:52.873

我解决这个问题的方法非常简单，以至于我几乎为自己首先提出这个问题而感到羞耻，但我希望它会有所帮助：

我只是通过在终端中输入来升级[Django MongoDB 引擎：](http://django-mongodb-engine.readthedocs.org/)

```
sudo pip install git+https://github.com/django-nonrel/mongodb-engine --upgrade 
```

就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T13:49:57.123

可以试试跑步吗...

```
db.repairDatabase() 
```

...从 mongo 终端？

# api - Skydrive API jpg 大小不准确

> ID：13571239
> 
> 赞同：2
> 
> 时间：2012-11-26T18:53:05.533
> 
> 标签：api, onedrive

我正在对 Skydrive 的 API 进行一些测试，但它们目前在使用 .jpg 图像时失败，因为通过 API 在“大小”参数下传回的图像大小与上传文件的大小不匹配。

在本地上传文件之前是 8,250 字节：

> -rw-r--r-- 1 bzittlau 员工 8250 11 月 26 日 11:41 test_jpg.jpg

上传 Skydrive 后声称它是 21,137 字节：

> [“大小”]=> 整数（21137）

下载文件后可以看到它仍然是 8,250 字节：

> -rw-r--r--@ 1 bzittlau 员工 8250 11 月 26 日 11:51 test_jpg (1).jpg

我怀疑通过 API 返回的文件大小包括 Skydrive 决定在文件上传时自动创建的所有缩略图的总大小。我需要的是能够获得图像完整版本的文件大小。（我知道对于超过 2048x2048 的图像，这将不起作用，因为 skydrive 会缩小它们的尺寸）

更新：与原始问题相切，但我发现可以使用[downsize_photo_uploads=false](http://msdn.microsoft.com/en-us/library/live/hh243648.aspx#photo)请求参数覆盖 2048 大小限制。

# python - 在单个 Django 项目中提供不同的 urlconfs

> ID：13571245
> 
> 赞同：5
> 
> 时间：2012-11-26T18:53:43.093
> 
> 标签：python, django, urlconf

我的问题是关于如何在单个 Django 项目中提供多个 urls.py（如 urls1.py、urls2.py 等）文件。

我正在使用 Win7 x64、django 1.4.1、python 2.7.3 和作为服务器 django dev-server 工具。
我决定使用我从谷歌找到的方法

[http://effbot.org/zone/django-multihost.htm](http://effbot.org/zone/django-multihost.htm)

我创建了一个 multihost.py 文件并放入 django 中间件文件夹：

```
C:\python27\Lib\site-packages\django\middleware\multihost.py 
```

使用以下代码：

```
from django.conf import settings  
from django.utils.cache import patch_vary_headers  

class MultiHostMiddleware:  
def process_request(self, request):  

    try:  
        host = request.META["HTTP_HOST"]  
        if host[-3:] == ":80":  
            host = host[:-3] # ignore default port number, if present  
        request.urlconf = settings.HOST_MIDDLEWARE_URLCONF_MAP[host]  
    except KeyError:  
        pass # use default urlconf (settings.ROOT_URLCONF)  

def process_response(self, request, response):  
    if getattr(request, "urlconf", None):  
        patch_vary_headers(response, ('Host',))  
    return response 
```

同样在我的项目 setting.py 文件中，我添加了一个映射字典，如上面的链接所示：

```
# File: settings.py 

HOST_MIDDLEWARE_URLCONF_MAP = { 

    "mysite1.com": "urls1", 
    #"mysite2.com": "urls2" 

    } 
```

* * *

我还没有实现上面链接中描述的错误处理。

我的主机文件包括以下内容：

```
127.0.0.1    mysite1.com 
```

项目结构如下：

effbot django 项目文件夹：

```
 + effbot   
--- settings.py   
--- view.py   
--- wsgi.py   
--- urls.py   
--- urls1.py     

 + objex   
--- models.py   
--- views.py   

 + static   
--- css   
--- images 
```

没有模板文件夹，因为我不从文件中提供 html 项目，它们来自数据库（我怀疑我的问题出在这个）。

现在的问题是：当我去找地址时

```
mysite1.com 
```

在启动 django dev-server 的浏览器中，我从服务器获取代码 301。并且浏览器显示“无法显示页面”消息。

你能解释一下如何使用上述方法吗？我是 django 新手，还没有做过任何真正的项目。刚刚阅读了文档并在家里启动了几个网站来了解它是如何工作的。

我希望 urlconfs 将根据传入的调用

```
request.META["HTTP_HOST"] 
```

目标是在单个 django 项目中为 mysite1.com 和 mysite2.com 提供不同的 urlconfs 。

我认为这应该如何工作。

感谢您的任何反馈。

编辑：
经过一些研究尝试后，我发现我在设置中错误地插入了我的 multyhost.py。
现在修好了。但还是一样的结果。

我还发现我的 django dev-server 工具无论如何都没有反映它处理来自浏览器（IE9）的任何请求，除非我执行“http://127.0.0.1”。
可能我必须为我的任务尝试一些生产服务器，比如 nginx？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T08:25:48.077

[正如您在文档](https://docs.djangoproject.com/en/dev/ref/settings/#root-urlconf)中的示例中看到的那样，您`ROOT_URLCONF`应该`effbot.urls`没有。`.py`

另外，`HOST_MIDDLEWARE_URLCONF_MAP`应该反映`ROOT_URLCONF`所以添加`effbot. 像这样：

```
HOST_MIDDLEWARE_URLCONF_MAP = { 
    "mysite1.com": "effbot.urls1", 
    #"mysite2.com": "effbot.urls2" 
} 
```

还有一件事，请尝试使用其他浏览器（Chrome、Firefox），有时我在使用 IE 访问开发服务器时遇到问题。

# wcf - 如何以声明方式配置 ServiceBusEnvironment 连接模式

> ID：13571254
> 
> 赞同：2
> 
> 时间：2012-11-26T18:54:09.577
> 
> 标签：wcf, iis, azure, azure-servicebusrelay, nettcprelaybinding

WCF 服务托管在 IIS 中并使用`netTCPRelayBinding`.

在某些位置，TCP 端口被阻止，必须使用 HTTP。其他时候 TCP 端口是打开的，这种模式是首选。

因此，我希望能够在文件中以声明方式设置`ConnectivityMode`to `AutoDetect`（*或只是 HTTP*）`web.config`。

对于自托管的 WCF，这很容易做到：

```
ServiceBusEnvironment.SystemConnectivity.Mode = ConnectivityMode.AutoDetect; 
```

这是如何以声明方式完成的`web.config`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T20:32:28.020

目前，此设置没有配置元素，但是在您的 web.config 中，您可以使用 AppSettings 设置值

```
<appSettings>
   <add key="ServiceBusConnectivityMode" value="Http" />
</appSettings> 
```

然后在代码中读取键值并将其解析为枚举值

```
ServiceBusEnvironment.SystemConnectivity.Mode = (ConnectivityMode)Enum.Parse(typeof(ConnectivityMode), ConfigurationManager.AppSettings["ServiceBusConnectivityMode"]) 
```

# android - 为什么动画在计时器的滴答声上重新开始？

> ID：13571255
> 
> 赞同：0
> 
> 时间：2012-11-26T18:54:12.027
> 
> 标签：android, animation, chronometer

我有一个带有动画视图和计时器的课程。这是我的 onCreate 方法的内容：

```
 chronometer = ((Chronometer) findViewById(R.id.clock_time));
    chronometer.setOnChronometerTickListener(this);

    chronometer.start();

    v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);

    final SurfaceView surfaceViewTimer = (SurfaceView) findViewById(R.id.surface_view_timer);

    final RelativeLayout timeView = (RelativeLayout) findViewById(R.id.time_view);
    ViewTreeObserver observer = timeView.getViewTreeObserver();
    observer.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
        @Override
        public void onGlobalLayout() {
            int animationDuration = getIntent().getIntExtra(
                    MainActivity.TOTAL_TIME, -1);
            TranslateAnimation surfaceGrowingAnimation = new TranslateAnimation(
                    0, 0, timeView.getHeight(), 0);

            surfaceGrowingAnimation.setDuration(animationDuration * 1000);          

            surfaceViewTimer.startAnimation(surfaceGrowingAnimation); 
```

我对计时器有另一种方法：

```
@Override
public void onChronometerTick(Chronometer chronometer) {

    int intervalOfVibration = getIntent().getIntExtra(
            MainActivity.VIBRATION_INTERVAL, -1);

    long elapsedMillis = (SystemClock.elapsedRealtime() - ((Chronometer) findViewById(R.id.clock_time))
            .getBase()) / 1000;

    if (((elapsedMillis % intervalOfVibration) == 0) && (elapsedMillis > 0))
        v.vibrate(300);

} 
```

但是我的动画会在计时器的每一次滴答声中重新开始。

我怎样才能解决这个问题？

现在我得到这些错误：

```
11-26 17:58:57.908: W/dalvikvm(15596): threadid=3: thread exiting with uncaught exception (group=0x2aaca228)
11-26 17:58:57.908: E/AndroidRuntime(15596): Uncaught handler: thread main exiting due to uncaught exception
11-26 17:58:57.908: E/AndroidRuntime(15596): java.lang.IllegalStateException: This ViewTreeObserver is not alive, call getViewTreeObserver() again
11-26 17:58:57.908: E/AndroidRuntime(15596):    at android.view.ViewTreeObserver.checkIsAlive(ViewTreeObserver.java:492)
11-26 17:58:57.908: E/AndroidRuntime(15596):    at android.view.ViewTreeObserver.removeGlobalOnLayoutListener(ViewTreeObserver.java:339)
11-26 17:58:57.908: E/AndroidRuntime(15596):    at com.activities.TimerActivity$1.onGlobalLayout(TimerActivity.java:64)
11-26 17:58:57.908: E/AndroidRuntime(15596):    at android.view.ViewTreeObserver.dispatchOnGlobalLayout(ViewTreeObserver.java:549) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:01:34.387

每次布局屏幕时都会调用您`OnGlobalLayoutListener`，其中包括每次`Chronometer`更改（因为它更改宽度，可能是高度等，并且一切都无效）。

[`removeOnGlobalLayoutListener();`](http://developer.android.com/reference/android/view/ViewTreeObserver.html#removeOnGlobalLayoutListener%28android.view.ViewTreeObserver.OnGlobalLayoutListener%29)在您的方法中使用`onGlobalLayout()`：

```
ViewTreeObserver observer = timeView.getViewTreeObserver(); // Make this final
observer.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
    @Override
    @SuppressWarnings("deprecation")
    public void onGlobalLayout() {
        // Your code ...

        if (android.os.Build.VERSION.SDK_INT < 16) // Use old, deprecated method
            timeView.getViewTreeObserver().removeGlobalOnLayoutListener(this);
        else // Use new method
            timeView.getViewTreeObserver().removeOnGlobalLayoutListener(this);
    }
} 
```

**注意**[`removeGlobalOnLayoutListener()`](http://developer.android.com/reference/android/view/ViewTreeObserver.html#removeGlobalOnLayoutListener%28android.view.ViewTreeObserver.OnGlobalLayoutListener%29)：对于 API < 16，您必须改用。 *（方法名称在 API 级别 16 中已更改。它们以相同的方式执行。）*

# php - Yii - 按另一个表排序

> ID：13571256
> 
> 赞同：0
> 
> 时间：2012-11-26T18:54:21.753
> 
> 标签：php, yii

我正在使用 Yii 框架并且在查询时遇到问题，因为我是新手。

我的数据库中有两个表：

用户：id、用户名、密码、全名

朋友 id、user_id、friend_id

我声明了关系并使用以下方法获取用户的朋友：

```
$userFriends = $user->userfriend(); 
```

我的问题是我想获取按用户表中的“全名”列排序的朋友列表。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:23:31.283

When declaring your relation, you can specify additional options [http://www.yiiframework.com/doc/guide/1.1/en/database.arr#relational-query-options](http://www.yiiframework.com/doc/guide/1.1/en/database.arr#relational-query-options)

```
public function relations()
{
    return array(
        'friends'=>array(self::MANY_MANY, 'User', 'friends(user_id,friend_id)',
                        'order'=>'fullname ASC')
    );
} 
```

# c# - C# api 与 xml 中的请求和响应

> ID：13571259
> 
> 赞同：0
> 
> 时间：2012-11-26T18:54:57.200
> 
> 标签：c#, xml, winforms, api, soap

我有 API，我需要以 XML 格式发送请求以获取响应（也以 XML 格式）。我认为这被称为 SOAP API，但我不确定，所以我在这里插入我发送的内容。

请求应如下所示：

```
<request>
    <login>name</login>
    <password>password</password>
    <hotId>1</hotId>
</request> 
```

我应该将它发送到这个 url 以获得响应：`https://api.xxx.com/v1/hotel/get`

这是如何将其与 php 和 curl 一起使用：

```
<?php
$login    = '*****';
$password = '*****';

$request =
'<?xml version="1.0"?>' . "\n" .
'<request>' .
    '<login>' . htmlspecialchars($login) . '</login>' .
    '<password>' . htmlspecialchars($password) . '</password>' .
    '<hotId>1</hotId>' .
'</request>';

$ch = curl_init('https://api.xxx.com/x1/hotel/get');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_POSTFIELDS, $request);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

$response = curl_exec($ch);

echo "<pre>\n";
echo htmlspecialchars($response);
echo "</pre>"; 
```

那么在 C# 中如何做到这一点的最佳方法是什么？

我尝试了类似的方法，但它不起作用，我认为必须有更好的方法。

```
 System.Net.WebRequest req = System.Net.WebRequest.Create(@"https://api.xxx.com/v1/hotel/get");

    req.ContentType = "text/xml";
    req.Method = "POST";

    byte[] bytes = System.Text.Encoding.ASCII.GetBytes("<?xml version=\"1.0\"?><request><login>login</login><password>pass</password><hotId>1</hotId></request>");
    req.ContentLength = bytes.Length;
    Stream os = req.GetRequestStream();
    os.Write(bytes, 0, bytes.Length);

    System.Net.WebResponse resp = req.GetResponse();
    if (resp == null) return;
    System.IO.StreamReader sr = new System.IO.StreamReader(resp.GetResponseStream());

    string responsecontent = sr.ReadToEnd().Trim(); 
```

编辑：获取使用 wsdl.exe 生成的方法。我在这里缺少新对象 [] 的登录名和密码参数，但不知道如何添加它们。

```
[System.Web.Services.Protocols.SoapRpcMethodAttribute("http://api.xxx.com/v1/hotel/get", RequestNamespace="http://api.xxx.com/v1/hotel/", ResponseNamespace="http://api.xxx.com/v1/hotel/", Use=System.Web.Services.Description.SoapBindingUse.Literal)]
[return: System.Xml.Serialization.XmlElementAttribute("hotel")]
public hotelType get(int hotId) {
    object[] results = this.Invoke("get", new object[] {
                hotId});
    return ((hotelType)(results[0]));
} 
```

构造函数：

```
public HotelService() {
    this.Url = "http://api.xxx.com/v1/hotel/";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T19:02:32.217

您描述的通信模式是 SOAP 服务。

在 .NET 中，使用其中一项服务的最简单方法是拥有 WSDL（Web 服务定义语言）文件。此文件包含有关公开的 Web 服务的元数据：它在哪里、可用的方法、方法生成和接受的数据类型、应该使用哪些传输和/或安全层等。

您应该能够从 Web 服务提供商处获得 WSDL；您可以下载它或从其托管位置引用它。一旦你有了这个文件或知道它的位置，你所要做的就是进入VS，右键单击包含需要使用Web服务的代码的项目，然后单击“添加服务引用...”。然后输入 WSDL 的位置（这旨在查找托管的 WSDL 文件，而不是您托管的文件，但它可以双向工作），您应该会看到有关该服务的信息。单击确定，VS 将自动生成代理类和所需的任何自定义数据类型，当调用它们时将形成并传输正确的 SOAP 消息并等待响应。

然后，您只需新建一个服务实例并像使用任何类一样使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:05:53.977

实际上，我已经用 SOAP 做过类似的事情，这就是我让它工作的方式。首先，右键单击您的项目并选择“添加服务引用”。输入 SOAP Web 服务的 URL，Visual Studio 应该会自动生成您需要的所有方法。从那里，通过添加将其包含在您当前的课程中`using namespace.servicereferencename;`。查看服务引用的对象浏览器并找出客户端名称。然后你可以这样做：

```
string request = xmlrequest;
SOAPclient client = new SOAPclient();
string response = client.methodName(request); 
```

就这么简单。

# tsql - 将 nvarchar 值“Internet Explorer 3 original”转换为数据类型 int 时转换失败

> ID：13571263
> 
> 赞同：2
> 
> 时间：2012-11-26T18:55:13.977
> 
> 标签：tsql, int, execute, nvarchar

在 SQL Server 2008 (TSQL) 中，我创建了一个这样的存储过程：

```
CREATE PROCEDURE SP_1_10_2
AS
declare @mostValuableBook nvarchar(255)
SELECT @mostValuableBook = Name
FROM books
WHERE price =
    ( SELECT MAX(price)
      FROM books
      WHERE izd LIKE '%BHV%' );
return @mostValuableBook
GO 
```

但是，当我尝试执行它时：

```
declare @x nvarchar(255)
EXECUTE @x = SP_1_10_2;
SELECT 'The most expensive BHV book:', @x AS 'Name'
GO 
```

我收到一个错误：

> *将 nvarchar 值“Internet Explorer 3 original”转换为数据类型 int 时转换失败。*

好像问题就出在这条线上

```
EXECUTE @x = SP_1_10_2; 
```

你能告诉我有什么问题吗？为什么它试图转换为int？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T19:06:14.353

`RETURN`不能用于返回`nvarchar`/`varchar`如你所拥有的。RETURN 用于返回一个整数，这可以表示为某种状态码 1=True / 0=False。在此处阅读有关退货的更多信息：http: [//msdn.microsoft.com/en-us/library/ms174998.aspx](http://msdn.microsoft.com/en-us/library/ms174998.aspx)

在您的情况下，您只需要使用`OUTPUT`类似于 C# 或 C++ 中的传递引用的变量。您将变量传递给 sproc，sproc 对其进行修改，然后在`SELECT...`.

更改它，使您的参数成为输出参数：

```
CREATE PROCEDURE SP_1_10_2
@mostValueableBook nvarchar(255) output
AS
SELECT @mostValuableBook = Name
FROM books
WHERE price =
    ( SELECT MAX(price)
      FROM books
      WHERE izd LIKE '%BHV%' );
SELECT @mostValuableBook
GO 
```

像这样称呼它：

```
DECLARE @theValBook nvarchar(255)
EXECUTE SP_1_10_2 @mostValuableBook = @theValBook output 
```

然后你可以说：

`SELECT 'Most expensive book is', @theValBook`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T23:36:07.673

您还可以创建一个函数来返回您想要的值，而不是依赖于数字返回码。SQL 函数非常方便。请参阅下面的示例，该示例使用 LIKE 运算符返回具有最高客户端 ID 的姓氏

```
Use MYDB
GO

CREATE Function fn_LastClientIdByName
(
@nameLike NVARCHAR(10)
)
RETURNS NVARCHAR(100)
AS 

BEGIN
DECLARE @result nvarchar(100)
DECLARE @clientName NVARCHAR(100)

SELECT top 1  @clientName = [clientLast] + ' ' + [clientFirst]   
FROM [dbo].[duiClientOnly]
WHERE clientLast like @nameLike + '%'
order by clid desc

select @result = @clientName
return @result
END 
```

# asp.net-mvc - 如何在没有互联网的情况下在构建服务器/生产服务器上使用 NuGet 包？

> ID：13571266
> 
> 赞同：7
> 
> 时间：2012-11-26T18:55:32.513
> 
> 标签：asp.net-mvc, msbuild, continuous-integration, cruisecontrol.net, nuget

## 背景

我有以下组件：

*   我使用 NuGet 包的本地解决方案 (.NET 4.5)。
*   我的解决方案中的一个 PowerShell 构建脚本，其目标是构建、运行单元测试、Web.config 转换等。
*   没有 Internet 连接且运行 CruiseControl.NET 的构建服务器，它调用我的构建脚本来构建文件。它还用作开发构建的 (IIS7) 环境。
*   具有 IIS7 且无法访问 Internet 的生产服务器。

## 目标

我想利用我的解决方案中的 NuGet 包并将它们作为源的一部分存储在本地——而不必依赖我的构建和生产服务器上的 Internet 连接或 nuget 包服务器。

## 问题

*   我如何告诉 MSBuild 正确部署这些包，或者这是 NuGet 的默认行为？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T19:05:24.383

Scott Hanselman 撰写了一篇出色的文章，题为[如何在 NuGet.org 关闭（或者您在飞机上）时访问 NuGet](http://www.hanselman.com/blog/HowToAccessNuGetWhenNuGetorgIsDownOrYoureOnAPlane.aspx)。如果你通读这篇文章，你会在最后看到他提出的建议主要是临时类型的解决方案，他特意说你不应该需要离线缓存，除非在那些紧急情况下。

但是，如果您阅读他文章的底部，他会提出以下建议：

> 如果您担心公司范围内的外部依赖关系，您可能希望在您的组织内拥有一个包含您所依赖的 NuGet 包的网络共享（可能在共享构建器服务器上）。如果您作为一个组织处于低带宽情况下，这将非常有用。

这就是我最终在类似情况下所做的事情。我们与我们所依赖的各种软件包的最新版本保持共享（当然，我假设您在某种类型的网络上）。它工作得很好，只需要一点点工作就可以半定期更新软件包（我们有一个季度更新周期）。

另一篇可能对您有帮助的文章（对我来说）是：[使用 NuGet 分发我们公司的内部 DLL](http://blog.js-development.com/2012/04/using-nuget-to-distribute-our-company.html?m=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:03:02.680

默认情况下，Nuget 将所有依赖项放在一个`packages/`文件夹中。您可以简单地将这个文件夹添加到您的源代码控制系统中，当您进行构建时，Nuget 不需要从 Internet 下载任何内容。您还需要确保未在您的解决方案上配置 Nuget 包还原。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T16:23:41.430

你必须做出决定；您可以在构建时下载/安装包（无论是使用包还原、您自己的脚本还是为您执行此操作的构建工具），或者您将 /packages 程序集放在源代码管理中，就好像它们在 / lib目录。

我们在内部使用包还原和 NuGet 的 Visual Studio 扩展时遇到了很多问题，以至于我们几乎完全放弃了 NuGet，因为它存在缺陷，尽管我们公司的 2 种产品中有 1 种是私有 NuGet 存储库。

基本上，我们管理生命周期的方式是使用我们的产品 BuildMaster 和 ProGet 的[组合](http://inedo.com/buildmaster)，[这样](http://inedo.com/proget)：

*   ProGet 缓存我们所有的 NuGet 包（包括我们自己发布的包和来自 nuget.org 的包）
*   BuildMaster 执行 CI 和部署方面并处理所有 NuGet 包恢复，因此我们无需处理大量签入库或解决方案的噩梦，即包恢复

如果您要采用类似的过程，那么在您的第一个环境中创建一个包含已安装 NuGet 包程序集的构建工件可能是最简单的，然后只需将该工件部署到您的生产中，而无需重复该过程。

希望这会有所帮助，
-托德

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-25T21:03:53.477

我知道这是一个古老的讨论，但是由于大小而存储构建项目所需的所有文件到底有多糟糕？

如果一个库不可用，你应该替换它的想法是疯狂的。代码要花钱，而且由于您无法控制 git 或 nuget 上的库，因此应该提供一份副本。

许多公司的一项要求是审计。如果发现图书馆窃取您的数据怎么办。您如何确定该库是否已从 NUGET 中删除，并且您甚至无法构建代码以进行仔细检查。

一种适合所有网络的 Nuget 和 git 方式是不行的。

我认为 Nuget 过去的工作方式，即文件存储在本地并可选择放置在源代码管理中的方式是可行的方法。

# php - PHP & Javascript

> ID：13571272
> 
> 赞同：0
> 
> 时间：2012-11-26T18:55:49.980
> 
> 标签：php, javascript, onclick

我的目标：创建一个按钮（或超链接），在点击时生成一个 word 文档。

下面是我创建的代码，但它不起作用。没有显示错误。我知道 PHP 是一种服务器端脚本语言，所以我认为它与此有关。

```
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript">
function createReport() {
   $fp = fopen("report.doc", 'w+');
   $str = "This is the text for the word file created through php programming";
   fwrite($fp, $str);
   fclose($fp);
    return false;
}
</script> 
```

超链接：

```
echo '<a href="#" onclick="createReport();">Generate</a>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:03:27.443

在您的 createReport() 函数中，您将需要一些调用一些 php 代码的 AJAX。在这个 php 页面上，您可以执行以下操作：[在 Linux 中使用 PHP 创建 Word 文档](https://stackoverflow.com/questions/124959/create-word-document-using-php-in-linux)

编辑：

你的 js 应该看起来像这样......我正在使用 jQuery：

```
$(document).ready(function()
{

    $('a').click(function()

    {
    $('#result').load('createWordDoc.php');

    });

}); 
```

然后 createWordDoc.php 将包含您创建 word 文档的 php 代码。您还可以让此页面回显某些内容。你回显的任何内容都会显示在 id=result 的 div 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:00:16.047

试试这个[http://www.phpdocx.com/](http://www.phpdocx.com/)，它是一个可以创建 word 文档的 php 库。但它比你在那里尝试的要复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T19:03:15.617

您从 JavaScript“onclick”事件调用 PHP 函数。如果没有 ajax 调用，我不相信这是可能的。PHP 函数永远不会到达客户端用户，因为它是服务器端函数。服务器解析完所有 PHP 代码后，将页面发送给用户，并且丢弃所有 PHP 函数、变量和引用（当然 $_SESSION 除外）。如果没有对服务器的 ajax 调用，您所拥有的将无法工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T19:03:33.683

此链接解释了创建 Word 文档需要输出哪些标题：[http ://webcheatsheet.com/php/create_word_excel_csv_files_with_php.php](http://webcheatsheet.com/php/create_word_excel_csv_files_with_php.php)

而且，当您构建页面时，php 在站点构建之前运行（嗯，不会），所以实际上，您的按钮应该触发对您的服务器的 AJAX 调用，然后生成文档

# php - 使用排序规则对数组进行排序

> ID：13571273
> 
> 赞同：8
> 
> 时间：2012-11-26T18:55:54.667
> 
> 标签：php, localization, locale, collation

我有一个带有法语单词的数组：['États-Unis', 'Espagne', etc] 我想根据其语言环境（fr_FR）按字母顺序排序

我正在使用以下代码：

```
$collator = new Collator('fr-FR');
echo $collator->getErrorMessage();
$collator->asort($array); 
```

但我收到错误 U_USING_DEFAULT_WARNING 我假设正在使用英语或其他语言环境。更重要的是，数组没有正确排序（美国出现在西班牙之前，我希望相反的情况会发生）

我已经安装了 intl 包，并且我的系统有相应的语言环境（Ubuntu）

```
$locale -a
C
C.UTF-8
en_US.utf8
es_ES.utf8
fr_FR
fr_FR.iso88591
fr_FR.utf8
POSIX 
```

我在构造 Collat​​ion 对象时尝试了不同的组合，但没有任何好的结果：“fr-FR”、“fr-FR.UTF8”等。

还有什么我想念的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T14:05:09.593

根据[这篇博](http://www.siao2.com/2004/12/31/344739.aspx)文，对于单词**cote**、**cote**、**côte**和**côté**（已经用英文排序），法语的排序顺序是：**cote**、**côte**、**cote**和**côté**。下面的代码对法语排序规则中的单词进行排序：

```
$words = array('cote', 'coté', 'côte',  'côté');
print_r($words);

$collator = new Collator('fr_FR');

// print info about locale
echo 'French Collation ' . (($collator->getAttribute(Collator::FRENCH_COLLATION) ==    Collator::ON) ? 'On' : 'Off') . "\n";
echo $collator->getLocale(Locale::VALID_LOCALE) . "\n";
echo $collator->getLocale(Locale::ACTUAL_LOCALE) . "\n";

$collator->asort($words);

print_r($words); 
```

打印结果如下：

```
Array
(
    [0] => cote
    [1] => coté
    [2] => côte
    [3] => côté
)
French Collation On
fr_FR
fr
Array
(
    [0] => cote
    [2] => côte
    [1] => coté
    [3] => côté
) 
```

在同一篇博文中，作者说：

> [...] 变音符号是从右到左而不是从左到右评估的。因此côte 出现在**coté**之前，而不是像英语这样从左到右评估它们的语言中那样**。**因为单词 côte 在单词**末尾**的“e”上没有 ACUTE，而**coté**有。在英语和大多数其他语言中，评估从左侧开始，因此“o”上的 CIRCUMFLEX 或缺少它是排序的控制因素。

因此，如果您有一个包含**Spain**和**US**的数组，它们在英语和法语中将具有相同的顺序。

您还应该记住，该`asort`方法维护数组的索引关联。看到不同：

```
asort:
Array
(
    [0] => cote
    [2] => côte
    [1] => coté
    [3] => côté
)

sort:
Array
(
    [0] => cote
    [1] => côte
    [2] => coté
    [3] => côté
) 
```

## 关于 U_USING_DEFAULT_WARNING

根据此[API 文档](http://www.icu-project.org/apiref/icu4c/classicu_1_1ResourceBundle.html)：

> U_USING_DEFAULT_WARNING 表示使用了默认的语言环境数据；既找不到请求的语言环境，也找不到它的任何后备语言环境。

例如，当我使用**fr_FR**语言环境时，我得到一个 U_USING_FALLBACK_WARNING，这表明使用了一个备用语言环境，在本例中为语言环境**fr**。

# 语言环境

看起来，您的计算机不支持法语（或者它支持，但不知何故 PHP 无法使用它，然后回退到默认语言），即使该命令`locale -a`显示法语包。我有一些建议你可以试试。

首先，列出所有支持的语言环境：

```
cat /usr/share/i18n/SUPPORTED 
```

现在，生成您需要的语言：

```
sudo locale-gen fr_FR.UTF-8
sudo locale-gen fr_FR.ISO-8859-1
sudo dpkg-reconfigure locales 
```

如果它不起作用，请尝试安装包**language-pack-fr**和**language-support-fr**并再次生成语言。

这个问题很奇怪。我有一个带有 Ubuntu 11.04 和 PHP 5.3.8 的虚拟机，它在我的 Debian 6 中也能正常工作，而且我没有安装任何软件包或配置任​​何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T14:20:08.743

我正在使用cygwin：

```
$ locale -a | grep fr_FR
fr_FR
fr_FR.utf8
fr_FR@euro 
```

（注意我`fr_FR.iso88591`在输出中没有）

代码（文件编码为 UTF-8）：

```
$collator = new Collator('fr_FR');
var_dump($collator->getErrorMessage());

// FRENCH_COLLATION is OFF

$arr = array('États-Unis', 'Espagne');

var_dump($collator->getAttribute(Collator::FRENCH_COLLATION) == Collator::ON);
var_dump($collator->getLocale(Locale::VALID_LOCALE));
var_dump($collator->getLocale(Locale::ACTUAL_LOCALE));
$collator->asort($arr);
var_dump($arr);

// FRENCH_COLLATION is ON

$collator->setAttribute(Collator::FRENCH_COLLATION, Collator::ON);

$arr = array('États-Unis', 'Espagne');

var_dump($collator->getAttribute(Collator::FRENCH_COLLATION) == Collator::ON);
var_dump($collator->getLocale(Locale::VALID_LOCALE));
var_dump($collator->getLocale(Locale::ACTUAL_LOCALE));
$collator->asort($arr);
var_dump($arr); 
```

输出：

```
string(23) "U_USING_DEFAULT_WARNING"
bool(false)
string(5) "fr_FR"
string(4) "root"
array(2) {
  [1]=>
  string(7) "Espagne"
  [0]=>
  string(11) "États-Unis"
}
bool(true)
string(5) "fr_FR"
string(4) "root"
array(2) {
  [1]=>
  string(7) "Espagne"
  [0]=>
  string(11) "États-Unis"
} 
```

诀窍是：**我将文件编码转换为 ISO 8859-1**（在 vim 中，我这样做`:set fileencoding=iso-8859-1`）然后再试一次：

```
string(23) "U_USING_DEFAULT_WARNING"
bool(false)
string(5) "fr_FR"
string(4) "root"
array(2) {
  [0]=>
  string(10) "▒tats-Unis"
  [1]=>
  string(7) "Espagne"
}
bool(true)
string(5) "fr_FR"
string(4) "root"
array(2) {
  [0]=>
  string(10) "▒tats-Unis"
  [1]=>
  string(7) "Espagne"
} 
```

有些符号坏了，但我认为这是因为我的终端不支持给定的代码页。主要的是现在字符串的顺序正是你所描述的：“Espagne”在“États-Unis”之后。

所以，我认为这是一种文件编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T17:40:22.170

试试'FR'，我猜它应该适用于你的系统：

```
$collator = new Collator('FR'); 
```

# android - sql-light 中的选择查询在 android 中对我不起作用

> ID：13571274
> 
> 赞同：0
> 
> 时间：2012-11-26T18:55:56.787
> 
> 标签：android

这段代码对我有用：

```
SQL = "SELECT _id,Fname,Lname,Phone,Car,CarNum,PicNum from MEN order by Lname,Fname";
.
.
public void update_list(String NN) {
       c = db.rawQuery(NN, null);
       startManagingCursor(c);

       String[] from = new String[]{"_id","PicNum","Fname","Lname","Car","CarNum" };
       int[] to = new int[]{  R.id._id,R.id.MyPic,R.id.Fname ,R.id.Lname,R.id.Car,R.id.CarNum };
       SimpleCursorAdapter notes = new SimpleCursorAdapter (this, R.layout.my_list, c, from, to);
       setListAdapter(notes);

setListAdapter(new SimpleCursorAdapter(this, R.layout.my_list, c, from,to) { 
```

但如果我的查询是这样的：

```
SQL = "SELECT _id,Fname + Lname as Fname,Lname,Phone,Car,CarNum,PicNum from MEN order by Lname,Fname"; 
```

我在 Fname 列中得到 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:00:38.123

我认为您使用了不正确的连接运算符。请参阅下面的问题。

[如何在sqlite中使用填充连接字符串](https://stackoverflow.com/questions/6134415/how-can-we-concatenate-string-in-sqlite)

# c++-cli - 哈希集在哪里 去VS2012？

> ID：13571277
> 
> 赞同：9
> 
> 时间：2012-11-26T18:56:07.623
> 
> 标签：c++-cli, visual-studio-2012, hashset

我最近安装了 VS2012。在 VS2010 下编译良好的 C++ 项目（使用 .Net 4.0）`HashSet<T>`在 VS2012 上无法识别。我什至尝试使用以下声明进行明确：

```
System::Collections::Generic::HashSet< String^ >^ _reasons; 
```

但这只会导致错误：

```
error C2039: 'HashSet' : is not a member of 'System::Collections::Generic 
```

文档说它在 System.Collections.Generic 中。C++ 编译器不这么认为。

关于它去哪里的任何想法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-26T21:19:26.133

HashSet<> 是 .NET 的后期添加，它在 .NET 3.5 中可用。命名空间较旧，自 .NET 2.0 起，mscorlib.dll 包含 System::Collections::Generic 中的类，Stack<> 和 Queue<> 等类。HashSet<> 被添加到 .NET 3.5 的*新*程序集 System.Core.dll 中，他们不想修改 2.0 程序集。

因此，您必须添加对 System.Core 的引用以避免错误消息。

当您遇到这样的错误时，请始终参考 MSDN 文档，它表明您需要程序集参考。

# javascript - 使用 jQuery 读取 XML 数据

> ID：13571280
> 
> 赞同：2
> 
> 时间：2012-11-26T18:56:11.267
> 
> 标签：javascript, jquery, xml, json

我想从 Google 的 Suggest API 中提取数据并将其显示在我的页面中*（可能通过 append 函数）*。我对解析 JSON 而不是 XML 很有信心，而且据我所知，Google 没有在 JSON 中提供这个 API。

我怎样才能做到这一点？**或者，有谁知道我如何在 JSON 中访问这个 API？如果有人这样做，那就太棒了！**

API 地址为： http: [//google.com/complete/search ?q=google&output=toolbar](http://google.com/complete/search?q=google&output=toolbar)

我目前的代码是：

```
 $.ajax({
            type: "GET",
            url: "http://google.com/complete/search?q=google&output=toolbar",
            dataType: "xml",
            crossDomain: true,
            xhrFields: { withCredentials: true },
            success: function(xml) {
                $(xml).find('toplevel').each(function(){
                    var title = $(this).find('suggestion').text();
                    $('<b>'+title+'</b>').appendTo('#page-wrap');
                });
            }
        }); 
```

我得到的错误是：`XMLHttpRequest cannot load http://google.com/complete/search?q=wixiy&output=toolbar. Origin is not allowed by Access-Control-Allow-Origin.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:01:33.037

当然，jQuery**可以解析**XML。查看[$.ajax 文档页面](http://api.jquery.com/jQuery.ajax/)- 它说

> **转换器（添加 1.5）** 数据类型到数据类型转换器的映射。每个转换器的值都是一个返回响应的转换值的函数。

因此，您的 ajax 调用应该只设置该设置。

```
$.ajax({ url: "apiUrl", converters: "text xml" }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:03:08.503

您可以使用 DomParser [https://developer.mozilla.org/en-US/docs/DOM/DOMParser](https://developer.mozilla.org/en-US/docs/DOM/DOMParser)

```
var parser = new DOMParser();
var doc = parser.parseFromString(stringContainingXMLSource, "application/xml"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T19:25:58.480

由于 API 不支持`JSON`，因此您不能仅在 javascript 中执行此操作，因为默认情况下它不允许跨域请求。因此，您将需要一个像文件一样的中间服务器端页面`PHP`，该页面执行来自 google 的 xml 请求并将 xml 传递给您。

**Javascript**

```
$.ajax({
    type: "GET",
    url: "getData.php?q=google&output=toolbar",
    dataType: "xml",
    success: function(xml){
        $(xml).find("CompleteSuggestion").each(function(){
            var suggestion = $( this ).find( 'suggestion' ).attr( 'data' );
            var num_queries = $( this ).find( 'num_queries' ).attr( 'int' );
            alert( suggestion + ' has ' + num_queries + ' queries.' );
        });
    }
}); 
```

**PHP (getData.php)** - 这个文件在同一个服务器上

```
$query = $_GET[ 'q' ];
$out = $_GET[ 'output' ];

header('Content-Type: text/xml');
echo file_get_contents('http://google.com/complete/search?q='.$query.'&output='.$out); 
```

...或者，您可以直接`json_encode`将 JSON 发送到您的脚本，该脚本也可以轻松解析。

希望这可以帮助。

# php - 重置 PHP 数组中的重复值

> ID：13571284
> 
> 赞同：0
> 
> 时间：2012-11-26T18:56:30.533
> 
> 标签：php, arrays, random, duplicates

我有一个 PHP 数组：

```
$arr = array(1,2,3,3,4,6,6); 
```

我想在每个重复对（3 个和 6 个）中找到任一重复项的位置，并使用 rand(1,8) 重置该值。我该怎么做呢？我基本上需要确保所有数组值都不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:08:30.477

你可以试试

```
$arr = array(1,2,3,3,4,6,6);
$dup = array_diff_assoc($arr,array_unique($arr));
$v = mt_rand(1, 8);

foreach ( $dup as $k ) {
    while ( in_array($v, $arr) ) {
        $v = mt_rand(1, 8);
    }
    $arr[$k] = $v;
}

echo "<pre>";
print_r($arr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:04:25.943

一种简单的方法是记录数组中有多少项，使用 array_unique，最后使用 rand 重新填充数组：

```
$size = count($arr);
$arr = array_unique($arr);
while (count($arr) < $size) {
  $arr[] = rand(1,8,$arr);
} 
```

您需要重复此操作，直到 count($arr) == count(array_unique($arr))。您还可以使用 in_array() 和循环创建一个随机函数，该函数很容易给出数组中尚不存在的随机值。

# qt - 音频流服务器（从跨平台服务器到任何设备）

> ID：13571287
> 
> 赞同：0
> 
> 时间：2012-11-26T18:56:59.713
> 
> 标签：qt, stream, streaming, shoutcast

这不是一个特定的编码问题，而是一个研究项目。

我对流媒体服务非常感兴趣。更具体地说，我对将音频从服务器流式传输到设备感兴趣。我确实了解它背后的基本逻辑，但我想在这些事情上获得更好的知识。

我想尝试实现一个流媒体服务器和一个流媒体客户端（mac 上的服务器和 iOS 上的客户端），但我很难找到任何提供“教程”的页面来说明它是如何完成的。我设法以某种方式获得客户端，在其示例中它正在播放来自`shoutmedia`. 如何实现服务器端？我更喜欢在 C++ 中使用它（例如 Qt 中的服务器将是一个靶心），但任何链接都会受到赞赏。

我认为流媒体是一个非常有趣的话题，任何链接都会受到赞赏。
谢谢！

# objective-c - NSUserDefaults 标准用户默认值

> ID：13571294
> 
> 赞同：0
> 
> 时间：2012-11-26T18:57:26.423
> 
> 标签：objective-c, ios, nsuserdefaults

我有这个问题。我有一个手术。但是如果我想保存呢？我想保存所有（文本字段数据选择器并生成标签）

我有 2 个文本字段和 1 个数据选择器 + 标签中的结果。

这是我的 M：

```
#import "ViewController.h"
#import "ResultViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize myLabel;

-(IBAction)calculate:(id)sender{

    NSDate *past = _data.date ;
    NSDate *now = [NSDate date];

    NSCalendar *gregorianCalendar = [[NSCalendar alloc]
                                     initWithCalendarIdentifier:NSGregorianCalendar];
    NSUInteger unitFlags = NSDayCalendarUnit;
    NSDateComponents *components = [gregorianCalendar components:unitFlags
                                                        fromDate:past
                                                          toDate:now
                                                        options:0];
    int z = [components day];
    int a = ([_textField1.text intValue]);
    int b = a*([_textField2.text intValue]);

    int r = b * z / 20;

    myLabel.text = [[NSString alloc] initWithFormat:@"%d", r];

}

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSDate *past = _data.date ;
    NSDate *now = [NSDate date];

    NSCalendar *gregorianCalendar = [[NSCalendar alloc]
                                     initWithCalendarIdentifier:NSGregorianCalendar];
    NSUInteger unitFlags = NSDayCalendarUnit;
    NSDateComponents *components = [gregorianCalendar components:unitFlags
                                                        fromDate:past
                                                          toDate:now
                                                         options:0];
    int z = [components day];
    int a = ([_textField1.text intValue]);
    int b = a*([_textField2.text intValue]);

    int r = b * z / 20;

    myLabel.text = [[NSString alloc] initWithFormat:@"%d", r];

    self.textField1.text = [[NSUserDefaults standardUserDefaults] objectForKey:@"key1"];
    self.textField2.text = [[NSUserDefaults standardUserDefaults] objectForKey:@"key2"];
    self.myLabel.text = [[NSUserDefaults standardUserDefaults] objectForKey:@"key3"];
    self.data = [[NSUserDefaults standardUserDefaults] objectForKey:@"key4"];

[[NSUserDefaults standardUserDefaults]synchronize];

    // Do any additional setup after loading the view, typically from a nib.
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if ([segue.identifier isEqualToString:@"detail"]) {

        ResultViewController* destVC = (ResultViewController*)segue.destinationViewController;

        destVC.myString = self.myLabel.text;

    }
}

- (void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:YES];

    [[NSUserDefaults standardUserDefaults] setObject:self.textField1.text forKey:@"key1"];
    [[NSUserDefaults standardUserDefaults] setObject:self.textField2.text forKey:@"key2"];
    [[NSUserDefaults standardUserDefaults] setObject:self.myLabel.text forKey:@"key3"];
    [[NSUserDefaults standardUserDefaults] setObject:self.data forKey:@"key4"];

    [[NSUserDefaults standardUserDefaults]synchronize];

}
@end 
```

这段代码对吗？

谢谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:14:36.007

夫妇的事情。

*   在您的`-viewDidLoad`中，您`-synchronize`出于某种原因打电话。所有这一切都是为您的用户默认设置的任何事件执行保存功能。据我所知，您没有任何可以跳过此调用以进行-synchronize。
*   您的其中一个日志显示了“r”的值。该值是一个 int 值，您应该使用 '%i' 来正确显示它。您正在执行一些计算以获取该值，因此您可能希望它是双精度值或其他值，但您当前正在将其转换为 int。

我没有看到任何关于用户默认设置的内容。因此，也许您可​​以指定究竟是什么错误或没有正确完成以获得更好的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:13:19.187

是的，代码看起来不错。你的 _data 变量类型是什么？如果您无法保存到 NSUser。尝试保存 self.data.date

一个提示：从 NSUserdefautls 获取值后，您不需要同步。在将值设置为 NSUserdefaults 后使用同步。

# android - 从异步任务到活动的android服务回调

> ID：13571297
> 
> 赞同：1
> 
> 时间：2012-11-26T18:57:31.190
> 
> 标签：android, callback, android-asynctask, android-service

我有一个应用程序，其中包含多个与服务绑定的活动。该服务在异步任务中打开一个套接字连接并开始侦听 (while(true)) 来自套接字服务器的传入消息。

问题是：如何向消息到达的几个活动发送回调？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T01:05:00.973

您是否使用 onBind() 将活动绑定到服务？如果是这样，为什么？onBind() 通常不是必需的。

据我所知，您正在侦听来自服务器的传入消息。您是否使用 Google Cloud Messaging 进行过调查？

活动不必绑定到服务。它会一直运行，直到某些东西将其关闭。您可以在其上运行 AsyncTask，但您甚至可能想使用自己的后台 HandlerThread。

无论如何，要与活动进行通信，请使用 LocalBroadcastReceiver 并从服务发送广播意图。

# ios - sqlite3* 到 NSData

> ID：13571300
> 
> 赞同：1
> 
> 时间：2012-11-26T18:57:38.153
> 
> 标签：ios, sqlite, nsdata

可以将指向 sqlite3 处理程序的指针转换为 NSData 吗？

然后我就可以加密和解密它了。

我有：

```
sqlite *sqliteHandle;
NSData *dataDB = [NSData dataWithBytes:&sqliteHandle length:sizeof(sqliteHandle)]; 
```

但这只会给我指针，而不是实际数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:08:47.920

sqllite * 是指向 SQLLite 连接对象的指针，您不太可能直接从中获取数据。您需要先执行查询，然后从结果中提取数据。

您可能想调用`sqlite3_column_blob`以获取列的原始数据。

检查文档；[http://www.sqlite.org/capi3ref.html#sqlite3_column_blob](http://www.sqlite.org/capi3ref.html#sqlite3_column_blob)

# java - PrintWriter 日食

> ID：13571301
> 
> 赞同：1
> 
> 时间：2012-11-26T18:57:45.927
> 
> 标签：java, eclipse

我正在使用 Eclipse 编写需要写入输出文件的代码。文件名来自命令行参数。我不知道它在哪里创建文件。它说我的工作区是输出文件的默认值，但找不到它。这是我的代码

```
try{
    PrintWriter output = new PrintWriter(new File(args[3]));
    //System.out.print(args[3]);
    output.append('l');
    output.close();
} catch(IOException e) {
    System.exit(0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:13:57.207

将以下内容添加到您的程序中以查看文件的绝对路径。

```
File file = new File(args[3]);
System.err.println( "File: " + file.getAbsolutePath() ); 
```

# arcgis - Oracle 11g R2 上的 ArcGIS SDO_GEORASTER BUG

> ID：13571309
> 
> 赞同：1
> 
> 时间：2012-11-26T18:58:29.027
> 
> 标签：arcgis, esri, raster, oracle11gr2

ESRI 建议不要在 Orcle 11g R2 上使用 SDO_Georaster 数据类型，原因如下：http: [//support.esri.com/en/knowledgebase/techarticles/detail/38940](http://support.esri.com/en/knowledgebase/techarticles/detail/38940)

我们在 Oracle 11g R2 上安装了 ArcGIS 10.1，我们能够将数据插入 SDO_GEORASTER 数据类型。

有没有人经历过这个错误或能够重现它？看起来没有人在网上谈论它！我一定在这里遗漏了一些东西：/

它真的是一个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:44:01.363

看来我已经解决了问题...

现在，我们可以使用 Oracle 11g R2 使用以下地理处理工具将数据毫无问题地插入 SDO_GEORASTER：Data Management Tools => Raster => Raster Dataset => Copy Raster

我的 ArcGIS Desktop 计算机的区域设置是加拿大法语。因此，ArcGIS 在栅格元数据中插入逗号作为小数点分隔符。我通过使用以下 SQL 命令发现了这一点：

SDO_GEOR.validateGeoRaster() 和 SDO_GEOR.schemaValidate()

昨晚帮助我的 ESRI 支持团队确认区域设置将解决此错误：

> 关于甲骨文的错误，实际上甲骨文似乎没有充分更新他们的错误数据库。在对引用 Oracle 错误的错误 (NIM069549) 进行进一步调查后，Esri Inc 的一名支持人员记录了一项活动。他提到他在 2012 年 5 月与 Oracle 进行了交谈，并且 Oracle 实际上已经关闭了这个 Oracle 事件 (12537431)，因为它不是一个错误。该分析师表示，给出的原因是因为 OCIEnvNlsCreate 使用了计算机的国家语言设置（Nls = National Language Setting）。在创建 sdo_georaster 时使用 OCIEnvNlsCreate，在创建 Oracle xml 文档时发生故障。
> 
> 基本上 - 用户会遇到这个 Oracle 错误的原因是因为 O/S 或 Oracle 中的区域语言设置。
> 
> 我们已与 Esri Inc 进行了交谈，并要求更新以下内容以反映 Oracle 的这一发现：
> 
> NIM069549 - [http://support.esri.com/en/bugs/nimbus/TklNMDY5NTQ5](http://support.esri.com/en/bugs/nimbus/TklNMDY5NTQ5)注意：已请求更改替代解决方案以说明它可能是由区域语言设置引起的。此外，拒绝的原因需要相应更改
> 
> 错误：将数据插入 SDO_GEORASTER 字段时发生 Oracle LPX-0019 错误 -http://support.esri.com/en/knowledgebase/techarticles/detail/38940 注意：已请求更改解决方案/解决方法以声明它可能是由区域语言设置引起的。建议尝试更改为英语语言设置。
> 
> ArcGIS 和 Oracle Spatial 栅格类型 - [http://resources.arcgis.com/en/help/main/10.1/index.html#//002n0000006z000000](http://resources.arcgis.com/en/help/main/10.1/index.html#//002n0000006z000000) 注意：本文底部有已知限制。
> 
> 由于元数据采用 XML 格式，因此您在法语设置中获得的逗号很可能与此问题直接相关。Oracle XmlLoadDom 函数返回错误，因此您将在 Oracle 中看到此错误，而不是在 ArcMap 中。

# java - 如何通过 AJAX 在 ActiveMQ 中设置 TimeToLive 参数？

> ID：13571311
> 
> 赞同：1
> 
> 时间：2012-11-26T18:59:08.077
> 
> 标签：java, ajax, jakarta-ee, jms, activemq

我有一个关于**ActiveMQ**和关于消息生命周期的**AJAX接口的问题。**在 AMQ Web 界面中，我可以为消息设置**TimeToLive**值（以毫秒为单位）。我已经发现，我可以通过 REST 使用这个参数：

```
curl -vd  body="test" "http://localhost:8161/demo/message/TESTQUEUE?type=queue&JMSTimeToLive=500&JMSPersistent=-1" 
```

此示例消息将持续 500 毫秒

但是如何使用 AMQ Ajax 接口来设置这些参数呢？发送消息的 JavaScript 函数只提供两个参数

```
amq.sendMessage(myDestination,myMessage); 
```

信息：[http ://activemq.apache.org/ajax.html](http://activemq.apache.org/ajax.html)

不幸的是，myDestination 不是 URL，它类似于“queue://”

谢谢四位的帮助

问候罗尔夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:11:02.543

AJAX 客户端的当前实现不提供发送带有生存时间的消息的可能性。

消息离开的时间基本上是在[消息属性](http://activemq.apache.org/activemq-message-properties.html)（标题）中设置的，通过属性“JMSExpiration”当前如果你通过[amq.js 代码](https://svn.apache.org/repos/asf/activemq/trunk/activemq-web-demo/src/main/webapp/js/amq.js)，你会看到没有允许你定义标题或时间的 API为了活着。

将此功能添加到客户端应该相对容易。[检查代码](https://svn.apache.org/repos/asf/activemq/trunk/activemq-web-demo/src/main/webapp/js/amq.js)，您可能只是为您的应用程序硬编码 TTL。最后，它只是执行一个 post 命令，就像您执行 REST 调用一样。

# javascript - 更改主题森林主题的 js 功能

> ID：13571312
> 
> 赞同：2
> 
> 时间：2012-11-26T18:59:10.023
> 
> 标签：javascript, codeigniter

[我从http://themeforest.net](http://themeforest.net)购买了一个主题，现在它们被取消了。

最初的主题功能是将所有链接页面都放在索引页面中自己的 div 中，但是我更改了功能，以便每个链接都在自己的控制器上，因为我使用的是 Codeigniter。

我想要发生的是，当单击一个新链接时，它仍然会滚动内容 div 并转到单击的链接，然后滚动该页面的内容。截至目前，它一直向上滚动到页面，甚至不加载新页面。代码的注释部分是来自模板的原始代码。

```
/*****************************************************
MENU TRANSITION EFFECTS
******************************************************/
$("#menu1 ul li a").click(function(e){

e.preventDefault();
$('#container').animate({top:'-500px'},500,'easeInQuart');

/*
var id = $(this).attr("href");  
if(id == aid) return false; 
$('#menu1 ul li a').removeClass('a');
            $(this).addClass('a');
if($("#container > div:visible").size() > 0) {      
    $("#container > div:visible").animate({top:'-500px'},500,'easeInQuart',function(){ $("#container > div:visible").css({display:'none',top:'-500px'}); $('#container > div#' + id).css({display:'block'}).delay(400).animate({top:'500px'},800,'easeOutQuart');               
                $(function() {              
            $('.scroll').jScrollPane();
        });

     });
} else  {
    $('#container > div#' + id).css({display:'block'}).animate({top:'500px'},200,'easeOutQuart');
}
aid = id;
return false;
*/
}); 
```

编辑：我在我的常规网站上尝试过，但由于某种原因它的工作方式不一样。这是模板。我将它上传到我的其他网站之一进行展示。请记住，不同之处在于每个链接都是一个新控制器，每个 div 都是一个新视图。这是否进一步解释了原始模板与我正在尝试完成的内容之间的差异。

[http://www.justmyfiles.me/](http://www.justmyfiles.me/)

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:38:38.993

“过渡” javascript 代码可能如下所示：

```
$("#menu1 ul li a").click(function(e){

    var a = this;
    e.preventDefault();

    $('#container').animate({top:'-500px'},500,'easeInQuart',function() {
        location.href = a.href;
    });
}); 
```

和文件准备好的代码：

```
$(document).ready(function() {
    $('#container').animate({top:'0px'},500,'easeInQuart');
});

/*CSS*/ 
#container { top: -500px; } 
```

# mutt - 如何告诉 Mutt 不要存储已发送的消息？

> ID：13571315
> 
> 赞同：14
> 
> 时间：2012-11-26T18:59:22.660
> 
> 标签：mutt

我试图弄清楚如何禁用在 Mutt 中存储已发送的消息。

这样做有什么`record`价值`.muttrc`吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-12-04T23:18:13.643

只是为了让它更清楚一点：在`/home/user/.muttrc`：

```
set copy=no 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-26T21:27:14.680

可以`copy`选择控制是否保存您发送的消息副本。这是一个四选项，因此可以设置为`no`（这将完成您想要的），`yes`以自动保存消息，`ask-yes`或者`ask-no`让它在每条消息上询问，您可以选择默认值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-10-30T08:19:07.137

我设法做到了这一点：

```
set record = "/dev/null" 
```

从我读到的有很多用于精细控制的选项。`record`作为其中之一。当`copy`设置为 no 时，所有邮件副本的存储都被禁用。而`record`变量可以被覆盖`by the $force_name and $save_name variables, and the "fcc-hook" command.` [，请参阅手册](https://linux.die.net/man/5/muttrc)

从技术上讲，我在示例中误用了它，因为它只指定了保存路径。但它确实通过能够用其他变量覆盖它来为您提供更多控制。

但是，您**确实**`record`要求提供可以完成这项工作的特定值；-)

# android - 来自互联网的网格视图图像

> ID：13571316
> 
> 赞同：1
> 
> 时间：2012-11-26T18:59:36.540
> 
> 标签：android

我正在尝试在 Gridview 中显示来自互联网的图像。当我运行我的程序时，catlog 中没有错误，但我的屏幕上没有显示图像..

ImageAdapter.java：

```
public class ImageAdapter extends BaseAdapter {
private Context mContext;
Bitmap bmImg;
ImageView imageView;

public String[] mThumbIds = {
        "http://i724.photobucket.com/albums/ww246/bnhenson/squishy.jpg", "http://cdn4.teen.com/wp-content/uploads/2012/07/paranorman-zayn-malik-tweets.jpg",
        "http://xc0.xanga.com/08fe2b7a30c37281496919/m224298958.jpg"
};

// Constructor
public ImageAdapter(Context c){
    mContext = c;
}

@Override
public int getCount() {
    return mThumbIds.length;
}

@Override
public Object getItem(int position) {
    return mThumbIds[position];
}

@Override
public long getItemId(int position) {
    return 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {         
    imageView = new ImageView(mContext);
    downloadFile(mThumbIds[position]);
    imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
    imageView.setLayoutParams(new GridView.LayoutParams(135, 135));
    imageView.setPadding(0, 0, 1, 0);
    return imageView;
}
void downloadFile(String fileUrl) {

    AsyncTask<String, Object, String> task = new AsyncTask<String, Object, String>() {

        @Override
        protected String doInBackground(String... params) {
            URL myFileUrl = null;
            try {
                myFileUrl = new URL(params[0]);
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            try {
                HttpURLConnection conn = (HttpURLConnection) myFileUrl
                        .openConnection();
                conn.setDoInput(true);
                conn.connect();
                InputStream is = conn.getInputStream();

                bmImg = BitmapFactory.decodeStream(is);

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return null;
        }
        protected void onPostExecute(String unused) {
            imageView.setImageBitmap(bmImg);
        }
    };
    task.execute(fileUrl);

}} 
```

AndroidGridLayoutActivity.java

```
public class AndroidGridLayoutActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.grid_layout);

    GridView gridView = (GridView) findViewById(R.id.grid_view);

    // Instance of ImageAdapter Class
    gridView.setAdapter(new ImageAdapter(this));
}} 
```

grid_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/grid_view"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:numColumns="auto_fit"
android:columnWidth="90dp"
android:horizontalSpacing="10dp"
android:verticalSpacing="10dp"
android:gravity="center"
android:stretchMode="columnWidth" >  

</GridView> 
```

在我的清单中，我添加了这两行：

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

有谁知道，我在这里错过了什么步骤？

在此先感谢您的帮助，

日耳曼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:18:48.490

您应该为网格的每个单元格创建一个单独的`ImageView`对象，而不是使用全局变量。为此，请执行以下操作：

```
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView = new ImageView(mContext); 
    downloadFile(imageView, mThumbIds[position]);
    imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
    imageView.setLayoutParams(new GridView.LayoutParams(135, 135));
    imageView.setPadding(0, 0, 1, 0);
    return imageView;
}

void downloadFile(ImageView imageView, String fileUrl) {
    // ...
    // change your AsyncTask so you can pass imageView as well
    // instead of setting loaded bitmap to global mImageView, set it to the passed in imageView.
    // ...
} 
```

要更改您的 AsyncTask，请更改 to 的类型`params`以便`Object`您可以传递`imageView`和`fileUrl`to`doInBackground()`或使用构造函数为您的 AyncTask 创建一个类，您可以传递两个对象并将它们存储在 AsyncTask 本地的变量中，以便您可以从`doInBackground()`方法访问它们。

另请注意，如果网格中有更多项目，则应在传入的`convertView`值为非空值时重用它。

# python - Eclipse osx 内部的 MySQLdb

> ID：13571317
> 
> 赞同：1
> 
> 时间：2012-11-26T18:59:39.853
> 
> 标签：python, mysql, django, eclipse, mysql-python

所以，在一个令人沮丧的周末之后，我终于让 django 和 MySQL 在 10.8 下都可以正常工作。谢谢大家的帮助，但是现在，在 Eclipse 中，我无法让 MySQLdb 工作。我得到一个

未解决的导入：MySQLdb

在 Eclipse 中，即使 python import MySQLdb 从命令行工作得很好。我对 OSX 下的 Eclipse 相当陌生，当然这很容易，但所有相关的 ??s 似乎都与正确安装这些地狱有关。

这有什么意义吗？

（另外，Auto Config 是我第一次用来设置 pydev，没有运气）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:05:10.500

尝试这个..

转到首选项 - PyDev - 解释器 - Python

在窗格中选择 python 解释器

从上框首先删除

选择自动配置

最后接受

更新：

尝试根据您的模块版本将鸡蛋添加到您的 Eclipse python 路径

[http://pypi.python.org/pypi/MySQL-python/1.2.4c1](http://pypi.python.org/pypi/MySQL-python/1.2.4c1)

# php - 我可以在 PHP 中抓取网站、下载特定页面并将呈现的版本保存为 PDF 吗？

> ID：13571319
> 
> 赞同：0
> 
> 时间：2012-11-26T18:59:51.160
> 
> 标签：php, pdf, web-crawler

我只是需要澄清一下这个概念是否可行，或者我是否误解了爬虫的能力。

假设 1 有一个包含 100 个网站/博客的列表，并且每天，我的程序（我假设它是一个爬虫的东西）将通过它们，如果有一些特定的短语匹配，如“迈阿密热火”或“勒布朗詹姆斯”，它将继续下载该页面->将其转换为带有全文/图像的pdf并保存该pdf。

所以我的问题是；

1.  这种事情是可能的吧？请注意，我不想要只是文本片段，但我希望让整个页面就像打印在一张纸上一样？
2.  这种类型的程序被称为爬虫吧？
3.  我计划在[http://phpcrawl.cuab.de/about.html的代码上构建](http://phpcrawl.cuab.de/about.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:14:15.927

这是完全可能的，因为您将使用 phpcrawl 来抓取网页，使用[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)将您的 html 转换为 pdf，因为它是

1.  是的，通过使用 wkhtmltopdf 工具，您可以按原样转换网页。它是基于桌面的软件，因此您可以安装在您的机器中
2.  是的，爬行者。
3.  它是构建您想要构建的东西的完美工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:14:46.183

1.  是的，有可能。

2.  您可以将其称为爬虫或刮板，因为您正在从网站上抓取数据。

将网站呈现为 PDF 可能是最困难的部分，它们是可以为您执行此操作的 Web 服务。

例如

[http://pdfmyurl.com/](http://pdfmyurl.com/)

（我没有隶属关系，也从未使用过它们，当我检查时它只是谷歌结果中的第一个站点）

# facebook - 使用 opengraph 发布的 SWF 视频不会在 Facebook 用户 Feed 上内联播放

> ID：13571320
> 
> 赞同：2
> 
> 时间：2012-11-26T18:59:54.030
> 
> 标签：facebook, video, facebook-opengraph, inline, feed

当我以编程方式在我的 Facebook 墙上使用 opengraph 发布 SWF 视频时，该帖子会在我的提要中更新，并带有一个链接，该链接会打开一个播放 SWF 的新窗口。想要的结果是带有一个小播放按钮的帖子，它可以播放 swf 内联而不是打开一个窗口。我已经浏览并测试了大约两个月的所有选项，看到了类似的问题，甚至还有一个似乎已关闭但未解决的错误报告。

如果我将 soundcloud 链接作为状态消息发布（以及在我的代码中使用开放图）它可以工作，但是当我自己制作时，它会发布但作为静态图像并且没有播放按钮。我在下面的 url 上使用了对象调试器

[对象调试器](https://developers.facebook.com/tools/debug/og/object?q=http://webapp.platinumcredit.co.ke/gumzo/ochieng)

在我的网站上，一切似乎都与下面 soundcloud 的对象调试器相同

[对象调试器](https://developers.facebook.com/tools/debug/og/object?q=http://soundcloud.com/chris-ochieng/testing)

一定有什么我错过了，但我不知道它是什么。我希望这将帮助其他开发人员节省两个月的生命。

还有其他关于 SSL 播放的问题，我已经按照他们的建议进行了修改，但结果是一样的。我还添加了建议的标签（og:video 和 fb:app_id），还是一样的。

任何帮助都将不胜感激。

多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:02:01.413

这是一个较旧的问题，可以在此找到解决方案：[https ://developers.facebook.com/blog/post/602/](https://developers.facebook.com/blog/post/602/)

基本上你需要做的是以下几点：

```
<meta property="og:video:secure_url" content="https://secure.example.com/awesome.swf"/> 
```

我建议您同时使用 http 和 https 链接。

# curl - 通过 XMPP 与 talk.google.com 卷曲

> ID：13571324
> 
> 赞同：4
> 
> 时间：2012-11-26T19:00:18.493
> 
> 标签：curl, xmpp, google-talk

我想使用 libcurl 用 C++ 编写一个简单的 google talk 客户端。Google talk 使用 XMPP 作为通信协议，它在talk.google.com:5222 上侦听。首先，我尝试使用 curl 从命令行访问 google talk。如果我尝试

```
curl talk.google.com:5222 -d "<stream:stream to='gmail.com' xmlns:stream='http://etherx.jabber.org/streams' xmlns='jabber:client' version='1.0'>" 
```

如果我尝试使用 telnet 客户端，我会收到响应 302“文档已移动”

```
telnet talk.google.com 5222 
```

如果我尝试访问 chat.facebook.com，我可以获得有效的 XMPP 响应：

```
curl chat.facebook.com:5222 -d "<stream:stream to='chat.facebook.com'  xmlns:stream='http://etherx.jabber.org/streams' xmlns='jabber:client' version='1.0'>" 
```

我再次收到有效的 XMPP 响应，唯一的问题是 talk.google.com。

有人能指出我的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:04:50.247

“-d”选项将数据作为 HTTP POST 发送。XMPP 基于原始套接字。因此，您必须使用一个选项来创建一个普通的持久套接字，例如 telnet（如果可用）。但我对curl不太熟悉。

# php - PHP 包含文件 - 为 if 和 while 循环打开和关闭括号/大括号 {}

> ID：13571329
> 
> 赞同：0
> 
> 时间：2012-11-26T19:00:47.997
> 
> 标签：php, include, curly-braces, curly-brackets

分开 PHP 包含文件 - 为 if 和 while 循环打开和关闭括号/大括号 { } 并在文件之间关闭大括号/大括号

大家好，我正在使用 PHP，包括：

```
include_once("include1.php"); 
```

还有一个非常有问题的 CSS/HTML 设计器。我试图让所有 PHP 远离设计人员，因为他们变得非常恐慌：\ 他们会产生许多问题，删除代码和东西并搞砸一切。

因此，我一直在使用 PHP 包含在其 HTML 之间必要的地方添加 PHP。

PHP 工作正常，错误为零。

正是将 PHP 分成多个包含文件导致了我的一些问题。

以下是我尝试分离的示例。

要分离的PHP：

* * *

```
<?php
$foo = 0;
$bar = 0;

if($foo == 0){

    $foo++;
    $bar++;
    // more php code

    while($foo < 20){

        $foo++;
        $bar++;
        // more php code

    // Now write the designers HTML here in this loop
    ?>  

        <BR /> Some HTML 
        <?php echo $foo; ?>
         more html 
        <?php echo $bar; ?>
        <BR /> More HTML <BR /> <BR />

    <?php
    // Done with the designers code -Now close my PHP here

   }// END while($foo < 5)

}// END if($foo == 0)
?> 
```

* * *

我想把它分成 2 个包含 - include1.php 和 include2.php

我想让设计师在while循环之间编写代码。所以我做的是这样的：

* * *

包括1.php

```
 if($foo == 0){

    $foo++;
    $bar++;
    // more php code

      while($foo < 20){

        $foo++;
        $bar++;
       // more php code
   ?> 
```

* * *

设计师 HTML 和一些混合的 PHP

```
 <BR /> Some HTML 
    <?php echo $foo; ?>
     more html 
    <?php echo $bar; ?>
    <BR /> More HTML <BR /> <BR /> 
```

* * *

包含2.php

```
 <?php
   // Done with the designers code -Now close my PHP here

  }// END while($foo < 5)

}// END if($foo == 0)
?> 
```

我收到一个错误**（“解析错误：语法错误，意外 $end in）**

我有多个 if 和 while 和循环。

**我的问题是：如何在没有错误的情况下分隔这些大括号/方括号？**

**谢谢**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:03:45.103

无法跨越循环或跨多个包含的 if 语句，这就是导致语法错误的原因。最好的办法是采用真正分离逻辑和表示的模板系统。

一个快速而肮脏的解决方案是将设计者的 HTML 放入一个单独的`.html`文件中，并用占位符替换 PHP。在您的循环中，将占位符替换为内容。：

```
<BR /> Some HTML 
%%_Foo_%%
 more html 
%%_Bar_%%
<BR /> More HTML <BR /> <BR /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:06:34.173

将您的 php 文件合并为 1 并从那里包含一个“设计师”模板文件，您将不会收到该语法错误。

```
<?php
$foo = 0;
$bar = 0;

if($foo == 0){

    $foo++;
    $bar++;
    // more php code

    while($foo < 20){

        $foo++;
        $bar++;
        // more php code

        include 'template.php'; // Include template here
        // No need to stick the remaining portion of this file into a seperate one

   }// END while($foo < 5)

}// END if($foo == 0)
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T19:10:51.463

你不能那样做，当你包含 PHP 文件时，它们都必须是有效的 PHP。例如，在 include1.php 中，您没有关闭您的 while 循环。因此，执行/包含该文件将产生错误。如果我是你，我会使用[Smarty](http://www.smarty.net/)或[Twig](http://twig.sensiolabs.org/)`Templating System`等真正的工具来避免与 HTML 片段和 PHP 混淆。

# c# - 在生产中使用 LocalDb 是否正常？

> ID：13571331
> 
> 赞同：37
> 
> 时间：2012-11-26T19:01:04.213
> 
> 标签：c#, asp.net, sql-server, iis, localdb

我知道使用`LocalDb`非常好并且易​​于开发，我想知道在 IIS 服务器上托管网站时在生产中使用它是否是个好主意？

我问是因为我想知道它在生产中是否不会出现任何速度问题。

这是我想在生产中使用的连接字符串

```
Server=(LocalDB)\\v11.0;Integrated Security=SSPI;MultipleActiveResultSets=true;
AttachDBFilename=|DataDirectory|ProjectDB.mdf; 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-26T20:10:22.513

LocalDB 在生产中是绝对支持的。从性能的角度来看，它与 SQL Server Express 相同，因为它们共享相同的数据库引擎。

现在，对于在完整 IIS 中运行的站点，我建议使用基于服务的 SQL Server Express 实例。由于 IIS 作为服务运行，因此最好也有一个服务托管数据库。这意味着您**不**应该在连接字符串中使用`User Instance=true`或`AttachDbFileName=...`。

如果您想了解更多信息，我推荐这篇[关于从完整 IIS 中使用 LocalDB 的帖子，第 1 部分](https://docs.microsoft.com/en-us/archive/blogs/sqlexpress/using-localdb-with-full-iis-part-1-user-profile)及其[后续内容，第 2 部分](https://docs.microsoft.com/en-us/archive/blogs/sqlexpress/using-localdb-with-full-iis-part-2-instance-ownership)。他们进入更多细节。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-12-06T15:12:10.890

“正常” - 很难说，这是一个相对的术语。

允许 - 是的。 以下是引入 LocalDB 的 Microsoft SQL Server Express 博客[的引述：](https://blogs.msdn.microsoft.com/sqlexpress/2011/07/12/introducing-localdb-an-improved-sql-express/)

*“...如果 LocalDB 的简单性（和局限性）符合目标应用程序环境的需求，开发人员**可以继续在生产中使用它，因为 LocalDB 也是一个非常好的嵌入式数据库。** ”*

* * *

更新（2019 年 3 月）

在数十个生产站点使用 LocalDB 两年后，我将确认它有效。但是，**如果您需要免费的多用户**（LocalDB 术语中的“共享”）**数据库，请改用 SQL Server Express**。LocalDB 不是一个好的多用户解决方案。有许多障碍需要克服。我现在没有时间，但是如果您想了解有关这些障碍和相应解决方法的详细信息，请发表评论，我将在此处或其他问题中记录它们。

* * *

更新（2021 年 4 月）

*Showstopper——*共享（即多用户）实例功能在 SQL Server LocalDB 2017 和 2019 中被破坏。*安装其中一个版本甚至会阻止访问在**早期*版本中创建的共享实例。问题[记录在这里](https://dba.stackexchange.com/questions/249097/cant-connect-to-sql-server-2017-local-db-shared-instance)。唯一已知的“解决方法”是卸载损坏的 LocalDB 版本，并使用 LocalDB 2016 或更早版本。

* * *

更新（2021 年 9 月）

现在[修复](https://dba.stackexchange.com/a/294928)*了之前更新（2021 年 4 月更新）中提到的[*Showstopper*](https://dba.stackexchange.com/a/294928)[问题。](https://dba.stackexchange.com/a/294928)**警告：我没有亲自测试过这个修复。***

 ** * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-10-27T08:19:04.057

我不这么认为，

尽管 LocalDb 和 SQLExpress 在性能上可能相同，但如果一段时间内没有任何请求，LocalDb 的进程会自行关闭。而且通常下一个请求需要很长时间才能响应（或者更糟糕的是，它会超时）。

我建议您安装自己的 SQLEXPRESS 实例。*

# amazon-ec2 - 在 Amazon EC2 上运行 Erlang 项目

> ID：13571333
> 
> 赞同：2
> 
> 时间：2012-11-26T19:01:15.160
> 
> 标签：amazon-ec2, erlang, remote-server

我们有一个具有不同进程的项目，并通过调用来运行它`erl -pa ebin`，`mymodule_supervisor:start_link().`

我们在 Amazon EC2 上设置了一个 ubuntu 实例。作为新手，我们如何远程运行项目，以便我们可以关闭连接并且项目将继续运行？

我们可以在后台运行 Erlang shell，但我们的项目不能在它上面运行。看到一个例子就完美了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T21:01:48.483

**方法 1：**您可以从您的代码构建一个发布包。如果操作正确，这将在一个易于分发的 tar 文件中嵌入一个完整的 Erlang 系统（以及您的应用程序及其依赖项）。使用自动生成的脚本，节点可以作为守护进程启动，即使在您关闭 shell 后也会在后台运行。

一个很好的入门方法是使用[Rebar](https://github.com/basho/rebar)，它已经支持开箱即用的[发布处理。](https://github.com/basho/rebar/wiki/Release-handling)

**方法 2：**使用 tmux 或 screen（两者都可以轻松安装在 Ubuntu 上）启动节点并分离会话。如果您选择 tmux，以下应该可以工作：

1.  `tmux`只需从 shell运行即可启动 tmux 。
2.  在 tmux 中，`erl`像以前一样使用命令启动您的节点。
3.  `Ctrl-b`使用后跟分离您的会话`d`。退出你的外壳。该节点应该仍在运行。

* * *

启动supervisor的“正确”方式是`start_link`从`start`你的Erlang[应用程序](http://www.erlang.org/doc/design_principles/applications.html)的函数中调用它的函数。

# linux - 在 Linux 的 Shell 脚本中复制 SCP 命令？

> ID：13571336
> 
> 赞同：1
> 
> 时间：2012-11-26T19:01:22.527
> 
> 标签：linux, shell

嗨，我被赋予了将文件从给定服务器复制到本地计算机的任务。即使我可以使用命令行手动完成，但我需要编写一个脚本来自动化它。我不知道如何使用 shell 进行操作，如何提供我们手动完成的密码。我浏览了其他帖子，但没有得到准确的答案。

有比使用 SCP 命令更好的方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:15:26.700

**首选+更安全**的方法是[设置 ssh 密钥对](http://paulkeck.com/ssh/)

话虽这么说，如果有特定的需要提供密码作为你的 shell 脚本的一部分，你可以使用[pscp](http://the.earth.li/~sgtatham/putty/0.60/htmldoc/Chapter5.html)，它是[putty-tools](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)的一部分：

如果你在 ubuntu 上，你可以通过以下方式安装它：

```
sudo apt-get install putty-tools 
```

（或根据您的系统使用等效的包管理器）

这是一个如何使用的示例脚本`pscp`：

```
#!/bin/bash

password=hello_world
login=root
IP=127.0.0.1
src_dir=/var/log
src_file_name=abc.txt
dest_folder=/home/username/temp/

pscp -scp -pw $password $login@$IP:$src_dir/$src_file_name $dest_folder 
```

`/var/log/abc.txt`这将从指定的远程服务器复制到您的本地`/home/username/temp/`

# python - 我需要 Selenium 以更大的分辨率打开它的网络浏览器（最好是最大化）

> ID：13571349
> 
> 赞同：21
> 
> 时间：2012-11-26T19:02:07.287
> 
> 标签：python, selenium, selenium-webdriver

我正在使用 Selenium WebDriver 并在 Python 中编码

我到处看了看，我能找到的最好的是用不同语言写的东西。我也尝试在 Selenium IDE 上使用导出工具，但是当我查看数据时说不支持导出该功能。

编辑：我需要以更大的分辨率打开浏览器的原因是因为我正在测试的 Web 应用程序支持平板电脑分辨率，因此元素会根据浏览器窗口的分辨率而有所不同。

这是我从 IDE 导出的脚本，并进行了一些修改。

* * *

```
from selenium import webdriver

from selenium.webdriver.common.by import By

from selenium.webdriver.support.ui import Select

from selenium.common.exceptions import NoSuchElementException

import unittest, time, re

from Funk_Lib import RS

class CreatingEditingDeletingVault(unittest.TestCase):
    def setUp(self):
        self.driver = webdriver.Firefox()
        self.driver.implicitly_wait(30)
        self.base_url = "http://cimdev-qa40/"
        self.verificationErrors = []

    def test_creating_editing_deleting_vault(self):
        driver = self.driver
        driver.get(self.base_url + "/Login?contoller=Home")
        driver.find_element_by_id("UserName").click()
        driver.find_element_by_id("UserName").clear()
        driver.find_element_by_id("UserName").send_keys("user@gocodigo.com")
        driver.find_element_by_name("Password").click()
        driver.find_element_by_name("Password").clear()
        driver.find_element_by_name("Password").send_keys("Codigo#123")
        driver.find_element_by_id("fat-btn").click()
        driver.get(self.base_url + "/Content/Vaults/")
        driver.find_element_by_link_text("Content").click()
        driver.find_element_by_link_text("Vaults").click()
        driver.find_element_by_css_selector("button.btn.dropdown-toggle").click()
        driver.find_element_by_link_text("New vault").click()
        driver.find_element_by_name("Name").clear()
        driver.find_element_by_name("Name").send_keys("Test Vault")
        driver.find_element_by_xpath("//button[@onclick=\"vault_action('createvault', null, $('#CreateVault [name=\\'Name\\']').val())\"]").click()
        driver.find_element_by_css_selector("button.btn.dropdown-toggle").click()
        driver.find_element_by_link_text("Rename vault").click()
        driver.find_element_by_name("Id").click()
        Select(driver.find_element_by_name("Id")).select_by_visible_text("Test Vault")
        driver.find_element_by_css_selector("option[value=\"2\"]").click()
        driver.find_element_by_name("Name").clear()
        driver.find_element_by_name("Name").send_keys("Test Change")
        driver.find_element_by_xpath("//button[@onclick=\"vault_action('renamevault', $('#RenameVault [name=\\'Id\\']').val(), $('#RenameVault [name=\\'Name\\']').val())\"]").click()
        driver.find_element_by_css_selector("button.btn.dropdown-toggle").click()
        driver.find_element_by_link_text("Delete vault").click()
        driver.find_element_by_name("Id").click()
        Select(driver.find_element_by_name("Id")).select_by_visible_text("Test Change")
        driver.find_element_by_css_selector("option[value=\"2\"]").click()
        driver.find_element_by_xpath("//button[@onclick=\"vault_action('deletevault', $('#DeleteVault [name=\\'Id\\']').val(), '')\"]").click()

    def is_element_present(self, how, what):
        try: self.driver.find_element(by=how, value=what)
        except NoSuchElementException, e: return False
        return True

    def tearDown(self):
        self.driver.quit()
        self.assertEqual([], self.verificationErrors)

if __name__ == "__main__":
    unittest.main() 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-14T18:19:55.667

硒 2.31.0

```
driver = webdriver.Firefox()

# Resize the window to the screen width/height
driver.set_window_size(300, 500)

# Move the window to position x/y
driver.set_window_position(200, 200) 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-04-17T05:04:20.267

```
browser = webdriver.Firefox()
url = 'http://www.google.com/'
browser.get(url)
browser.maximize_window() 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-27T05:02:20.197

您可以使用`selenium.windowMaxmize();`，或者如果您想以某种特定的分辨率运行测试，您可以使用

`selenium.getEval("window.resizeTo(X, Y); window.moveTo(0,0);")`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-10-28T19:10:46.127

您是否要求增加屏幕放大倍率？

这将放大 Firefox 浏览器 Python 2.7

```
from selenium.webdriver.common.keys import Keys    

br = webdriver.Firefox()
zoomAction = ActionChains(br)
body = br.find_element_by_tag_name('body')
for i in range(2):
    zoomAction.send_keys_to_element(body,Keys.CONTROL,"+").perform() 
```

# r - 在数据框列表中动态创建一个新的数据框列

> ID：13571350
> 
> 赞同：1
> 
> 时间：2012-11-26T19:02:11.763
> 
> 标签：r, list, dataframe

我有一个数据集列表。每个数据集包含一个月的一些数据。数据跨越多年，因此我每年有 12 个数据集。该数据最初是一堆 Excel 文件。[我已按照此建议](http://tolstoy.newcastle.edu.au/R/e6/help/09/05/14233.html)导入了之前转换为 .csv 的所有文件，即：

```
datalist <- list()
files <- list.files(pattern="\\.csv$")

for(file in files) {
    stem <- gsub("\\.csv$","",file)
    datalist[[stem]] <- read.csv(file)
} 
```

所以我最终得到了一个`datalist`包含我所有数据集的列表。

现在，我的问题是只有文件名包含收集数据的每个部分的实际月份和年份，所以我想从每个数据集名称中获取名称和年份，并将它们归入该数据框的两个新列中：“年份”和“月”。

我保存为数据框名称的所有文件名都遵循以下结构：[*月*]_[*年*]_[ *...一些其他文本*]，例如“August_2012_foo_bar”。所以我想我会使用正则表达式先获取月份然后年份。我的代码存根是：

```
for(dataset in names(datalists)) {
    name <- dataset
    month <- strapply(name,"^([^_]*).*$")
    ...?
} 
```

正则表达式`"^([^_]*).*$"`抓取下划线之前的任何内容，即月份。当我需要将抓取的月份分配给数据集的新列时，我遇到了困难。我已经尝试过`assign`和`cbind`，但没有运气。

最后，我想将所有这些数据集垂直合并为一个。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:05:31.530

您可以只引用一个新列并分配；R 将为您创建列。

尝试添加：

```
datalist[[stem]]$Month <- month
... 
```

这将创建一个名为“Month”的新列并将`month`变量分配给它。请注意，R 将礼貌地重复您分配的变量，以匹配 data.frame 的现有长度。

所以整个循环看起来像：

```
for(file in files) {
    stem <- gsub("\\.csv$","",file)
    datalist[[stem]] <- read.csv(file)

    #parse out the month and year here
    ...

    #assign to new columns
    datalist[[stem]]$Month <- month
    datalist[[stem]]$Year <- year
} 
```

# javascript - 通过函数继承？

> ID：13571351
> 
> 赞同：4
> 
> 时间：2012-11-26T19:02:12.190
> 
> 标签：javascript, inheritance

我正在学习 Javascript 中的 OOP 基础知识，并遇到了一个与我通常看到的不同的继承示例。

典型的：

```
ChildClass.prototype = new ParentClass(); 
```

替代方法：

```
function clone(object) {
  function OneShotConstructor(){}
  OneShotConstructor.prototype = object;
  return new OneShotConstructor();
}

SecondClass.prototype = clone(FirstClass.prototype); 
```

为什么在创建原型是另一个对象的对象时首选后者？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T19:07:25.477

因为您将调用您尝试继承的自定义类型（又名类）的构造函数。这可能会产生副作用。想象一下：

```
var instancesOfParentClass = 0;
function ParentClass (options) {
  instancesOfParentClass++;
  this.options = options;
}

function ChildClass () {}
ChildClass.prototype = new ParentClass(); 
```

您的计数器已增加，但您并没有真正创建有用的 ParentClass 实例。

另一个问题是所有实例属性（请参阅`this.options`参考资料）都将出现在 ChildClass 的原型上，而您可能不希望这样。

**注意**：使用构造函数时，您可能有*实例*属性和*共享*属性。例如：

```
function Email (subject, body) {
  // instance properties
  this.subject = subject;
  this.body = body;
}

Email.prototype.send = function () {
  // do some AJAX to send email
};

// create instances of Email
emailBob = new Email("Sup? Bob", "Bob, you are awesome!");
emailJohn = new Email("Where's my money?", "John, you owe me one billion dollars!");

// each of the objects (instances of Email) has its own subject 
emailBob.subject // "Sup? Bob"
emailJohn.subject // "Where's my money?"

// but the method `send` is shared across instances
emailBob.send === emailJohn.send // true 
```

# iphone - 在类方法中使用 Webview

> ID：13571352
> 
> 赞同：0
> 
> 时间：2012-11-26T19:02:12.487
> 
> 标签：iphone, objective-c, ios, ipad, cocoa

基本上我有一个类方法，我正在调用它来调用 web 服务调用，就像在调度机制中一样，当我得到响应时，我在 NSDictionary 中以同步模式发送响应。

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);

dispatch_async(queue, ^{

    NSDictionary *_pD= [HttpRequest Details:@"Type" :@"guest" :[Description valueForKey:@"number"]];

    dispatch_sync(dispatch_get_main_queue(), ^{

        DLog(@"%@",[_D description]);
        [self mapObjects:_D];

    });
}); 
```

但是，在这个调用中，我还需要调用 WebView，并等待从 webview 调用 javascript，因此我很好奇这是否也可以在 Class 方法中执行？因为在类方法中，每当我分配一个委托时，它都会产生一个我无法将其分配给 self.

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:10:05.660

您可以将类的静态实例作为委托，并从那里处理整个事情。还记得`UIWebViewDelegate`在你的 .h 中设置协议

```
+ (YourClass *)getInstance {
    static YourClass *instance = nil;
    if (!instance) {
        instance = [YourClass new];
    }
    return instance;
}

- (void)callWebService {
    ... do your thing
} 
```

并像这样调用：

```
[[YourClass getInstance] callWebService]; 
```

如果你想对 getInstance 方法挑剔，正确的做法是这样（我不想用奇怪的代码混淆你）：

```
+ (YourClass *)getInstance {
    static dispatch_once_t pred;
    static YourClass *instance = nil;

    dispatch_once(&pred, ^{
        instance = [[[self class] alloc] init];
    });

    return instance;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:12:29.327

> 因为在类方法中，每当我分配一个委托时，它都会产生一个我无法将其分配给 self.

只是一个快速的想法。为什么不编写一个新类并将其对象分配为委托而不是自我？

# r - 加入和求和不兼容的矩阵

> ID：13571359
> 
> 赞同：7
> 
> 时间：2012-11-26T19:02:36.673
> 
> 标签：r, join, matrix, merge, data.table

我的目标是使用（并保留）行名和列名来*“求和”*两个**不兼容的矩阵（具有不同维度的矩阵）。**

我想出了这种方法：将矩阵转换为`data.table`对象，将它们连接起来，然后对列向量求和。

一个例子：

```
> M1
  1 3 4 5 7 8
1 0 0 1 0 0 0
3 0 0 0 0 0 0
4 1 0 0 0 0 0
5 0 0 0 0 0 0
7 0 0 0 0 1 0
8 0 0 0 0 0 0
> M2
  1 3 4 5 8
1 0 0 1 0 0
3 0 0 0 0 0
4 1 0 0 0 0
5 0 0 0 0 0
8 0 0 0 0 0
> M1 %ms% M2
  1 3 4 5 7 8
1 0 0 2 0 0 0
3 0 0 0 0 0 0
4 2 0 0 0 0 0
5 0 0 0 0 0 0
7 0 0 0 0 1 0
8 0 0 0 0 0 0 
```

这是我的代码：

```
M1 <- matrix(c(0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0), byrow = TRUE, ncol = 6)
colnames(M1) <- c(1,3,4,5,7,8)
M2 <- matrix(c(0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0), byrow = TRUE, ncol = 5)
colnames(M2) <- c(1,3,4,5,8)
# to data.table objects
DT1 <- data.table(M1, keep.rownames = TRUE, key = "rn")
DT2 <- data.table(M2, keep.rownames = TRUE, key = "rn")
# join and sum of common columns
if (nrow(DT1) > nrow(DT2)) {
    A <- DT2[DT1, roll = TRUE]
    A[, list(X1 = X1 + X1.1, X3 = X3 + X3.1, X4 = X4 + X4.1, X5 = X5 + X5.1, X7, X8 = X8 + X8.1), by = rn]
} 
```

输出：

```
 rn X1 X3 X4 X5 X7 X8
1:  1  0  0  2  0  0  0
2:  3  0  0  0  0  0  0
3:  4  2  0  0  0  0  0
4:  5  0  0  0  0  0  0
5:  7  0  0  0  0  1  0
6:  8  0  0  0  0  0  0 
```

然后我可以将其转换回`data.table`a`matrix`并修复行名和列名。

**问题**是：

*   如何概括这个过程？

    我需要一种自动创建的方法，`list(X1 = X1 + X1.1, X3 = X3 + X3.1, X4 = X4 + X4.1, X5 = X5 + X5.1, X7, X8 = X8 + X8.1)`因为我想**将此函数应用于事先不知道维度（和行/列名称）的矩阵**。

    总之，我需要一个行为如所述的**合并过程。**

*   是否有其他实现相同目标的策略/实施同时更快、更通用？（希望一些`data.table`怪物帮助我）

*   这个过程可以吸收什么样的**连接**（内部、外部等）？

提前致谢。

ps：我使用的是data.table 1.8.2版

* * *

**编辑 - 解决方案**

@Aaron 解决方案。没有外部库，只有基础 R。它也适用于**矩阵列表**。

```
add_matrices_1 <- function(...) {
  a <- list(...)
  cols <- sort(unique(unlist(lapply(a, colnames))))
  rows <- sort(unique(unlist(lapply(a, rownames))))
  out <- array(0, dim = c(length(rows), length(cols)), dimnames = list(rows,cols))
  for (m in a) out[rownames(m), colnames(m)] <- out[rownames(m), colnames(m)] + m
  out
} 
```

@MadScone 解决方案。使用`reshape2`包。它**每次调用仅适用于两个矩阵**。

```
add_matrices_2 <- function(m1, m2) {
  m <- acast(rbind(melt(M1), melt(M2)), Var1~Var2, fun.aggregate = sum)
  mn <- unique(colnames(m1), colnames(m2))
  rownames(m) <- mn
  colnames(m) <- mn
  m
} 
```

@Aaron 解决方案。使用`Matrix`包。它仅适用于**稀疏矩阵**，也适用于它们的列表。

```
add_matrices_3 <- function(...) {
  a <- list(...)
  cols <- sort(unique(unlist(lapply(a, colnames))))
  rows <- sort(unique(unlist(lapply(a, rownames))))
  nrows <- length(rows)
  ncols <- length(cols)
  newms <- lapply(a, function(m) {
    s <- summary(m)
    i <- match(rownames(m), rows)[s$i]
    j <- match(colnames(m), cols)[s$j]
    ilj <- i < j
    sparseMatrix(
      i         = ifelse(ilj, i, j),
      j         = ifelse(ilj, j, i),
      x         = s$x,
      dims      = c(nrows, ncols),
      dimnames  = list(rows, cols),
      symmetric = TRUE
    )
  })
  Reduce(`+`, newms)
} 
```

* * *

**BENCHMARK**（100 次带`microbenchmark`包运行）

```
Unit: microseconds
   expr                min         lq    median         uq       max
1 add_matrices_1   196.009   257.5865   282.027   291.2735   549.397
2 add_matrices_2 13737.851 14697.9790 14864.778 16285.7650 25567.448 
```

无需评论基准：@Aaron 解决方案获胜。

**细节**

有关性能的见解（取决于矩阵的大小和稀疏性），请参阅@Aaron 的编辑（以及稀疏矩阵的解决方案：）`add_matrices_3`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T21:20:19.453

我只是把名字排好，然后带着基地 R 去镇上。

这是一个简单的函数，它采用未指定数量的矩阵并将它们按行/列名称相加。

```
add_matrices_1 <- function(...) {
  a <- list(...)
  cols <- sort(unique(unlist(lapply(a, colnames))))
  rows <- sort(unique(unlist(lapply(a, rownames))))
  out <- array(0, dim=c(length(rows), length(cols)), dimnames=list(rows,cols))
  for(M in a) { out[rownames(M), colnames(M)] <- out[rownames(M), colnames(M)] + M }
  out
} 
```

然后它像这样工作：

```
# giving them rownames and colnames
colnames(M1) <- rownames(M1) <- c(1,3,4,5,7,8)
colnames(M2) <- rownames(M2) <- c(1,3,4,5,8)

add_matrices_1(M1, M2)
#   1 3 4 5 7 8
# 1 0 0 2 0 0 0
# 3 0 0 0 0 0 0
# 4 2 0 0 0 0 0
# 5 0 0 0 0 0 0
# 7 0 0 0 0 1 0
# 8 0 0 0 0 0 0 
```

然而，对于更大的矩阵，它的效果并不好。这是一个制作矩阵的函数，从可能性中选择`n`列，并用非零值`N`填充点。`k`（这假设是对称矩阵。）

```
makeM <- function(N, n, k) {
  s1 <- sample(N, n)
  M1 <- array(0, dim=c(n,n), dimnames=list(s1, s1))
  r1 <- sample(n,k, replace=TRUE)
  c1 <- sample(n,k, replace=TRUE)
  M1[cbind(c(r1,c1), c(c1,r1))] <- sample(N,k)
  M1
} 
```

然后这是另一个使用稀疏矩阵的版本。

```
add_matrices_3 <- function(...) {
  a <- list(...)
  cols <- sort(unique(unlist(lapply(a, colnames))))
  rows <- sort(unique(unlist(lapply(a, rownames))))
  nrows <- length(rows)
  ncols <- length(cols)
  newms <- lapply(a, function(m) {
    s <- summary(m)
    i <- match(rownames(m), rows)[s$i]
    j <- match(colnames(m), cols)[s$j]
    ilj <- i<j
    sparseMatrix(i=ifelse(ilj, i, j),
                 j=ifelse(ilj, j, i),
                 x=s$x,
                 dims=c(nrows, ncols),
                 dimnames=list(rows, cols), symmetric=TRUE)
  })
  Reduce(`+`, newms)
} 
```

当矩阵大而稀疏时，这个版本肯定更快。（请注意，我没有安排转换为稀疏对称矩阵的时间，希望如果这是一种合适的格式，您将在整个代码中使用该格式。）

```
set.seed(50)
M1 <- makeM(10000, 5000, 50)
M2 <- makeM(10000, 5000, 50)
mm2 <- Matrix(M2)
mm1 <- Matrix(M1)
system.time(add_matrices_1(M1, M2))
#   user  system elapsed 
#  2.987   0.841   4.133 
system.time(add_matrices_3(mm1, mm2))
#   user  system elapsed 
#  0.042   0.012   0.504 
```

但是当矩阵很小时，我的第一个解决方案仍然更快。

```
set.seed(50)
M1 <- makeM(100, 50, 20)
M2 <- makeM(100, 50, 20)
mm2 <- Matrix(M2)
mm1 <- Matrix(M1)
microbenchmark(add_matrices_1(M1, M2), add_matrices_3(mm1, mm2))
# Unit: microseconds
#                       expr      min       lq   median        uq       max
# 1   add_matrices_1(M1, M2)  398.495  406.543  423.825  544.0905  43077.27
# 2 add_matrices_3(mm1, mm2) 5734.623 5937.473 6044.007 6286.6675 509584.24 
```

故事的寓意：大小和稀疏很重要。

此外，正确处理比节省几微秒更重要。几乎总是最好使用简单的功能，除非遇到麻烦，否则不要担心速度。所以在小情况下，我更喜欢 MadScone 的解决方案，因为它易于编码且易于理解。当速度变慢时，我会像第一次尝试一样编写一个函数。当速度变慢时，我会编写一个类似于我第二次尝试的函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T04:40:14.290

这是一个`data.table`解决方案。神奇的是添加`.SD`组件（两者都具有相同的名称），然后通过引用分配剩余的列。

```
# a function to quickly get the non key columns
nonkey <- function(DT){ setdiff(names(DT),key(DT))}
# the columns in DT1 only
notinR <- setdiff(nonkey(DT1), nonkey(DT2))

#calculate; .. means "up one level"
result <- DT2[DT1, .SD + .SD, roll= TRUE][,notinR := unclass(DT1[, ..notinR])]

# re set the column order to the original (DT1) order
setcolorder(result, names(DT1))

# voila!
result

   rn 1 3 4 5 7 8
1:  1 0 0 2 0 0 0
2:  3 0 0 0 0 0 0
3:  4 2 0 0 0 0 0
4:  5 0 0 0 0 0 0
5:  7 0 0 0 0 1 0
6:  8 0 0 0 0 0 0 
```

* * *

我不相信这是一个特别稳定的解决方案，因为我不确定它不是侥幸获得答案，因为`M1`并且`M2`是彼此的子集

* * *

编辑，一个丑陋的方法使用`eval`

这变得更加困难，因为您有非语法名称（``1``等）

```
inBoth <- intersect(nonkey(DT1), nonKey(DT2))

 backquote <- function(x){paste0('`', x, '`')}
 bqBoth <- backquote(inBoth)

 charexp <- sprintf('list(%s)',paste(c(paste0( bqBoth,'=',  bqBoth, '+ i.',inBoth), backquote(notinR)), collapse = ','))

result2 <- DT2[DT1,eval(parse(text = charexp)), roll = TRUE]
 setcolorder(result2, names(DT1))

# voila!
result2

   rn 1 3 4 5 7 8
1:  1 0 0 2 0 0 0
2:  3 0 0 0 0 0 0
3:  4 2 0 0 0 0 0
4:  5 0 0 0 0 0 0
5:  7 0 0 0 0 1 0
6:  8 0 0 0 0 0 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T21:25:32.847

我想我设法用这条恶心的线做到了：

```
cast(aggregate(value ~ X1 + X2, rbind(melt(M1), melt(M2)), sum), X1 ~ X2)[,-1] 
```

这利用了`reshape`包。作为数据帧返回，因此根据需要转换为矩阵。

如果您希望采用示例中建议的格式，请尝试以下操作：

```
"%ms%" <- function(m1, m2) {
  m <- as.matrix(cast(aggregate(value ~ X1 + X2, rbind(melt(m1), melt(m2)), sum), X1 ~ X2)[,-1])
  mn <- unique(colnames(m1), colnames(m2))
  rownames(m) <- mn
  colnames(m) <- mn
  return (m)
} 
```

然后你可以这样做：

```
M1 %ms% M2 
```

* * *

编辑：

## 解释

显然应该有一些解释抱歉。

```
melt(M1) 
```

`M1`从它的原始形式转换成这样的格式（行、列、值）。例如

```
 1 3 4 5 7 8
  1 0 0 1 0 0 0
  3 0 0 0 0 0 0
  4 1 0 0 0 0 0
  5 0 0 0 0 0 0
  7 0 0 0 0 1 0
  8 0 0 0 0 0 0 
```

转换为：

```
 X1 X2 value 
1  1  1     0
2  3  1     0
3  4  1     1 
```

等。将两个矩阵中所有可能的（行、列、值）组合`M1`并`M2`列出到一个矩阵中。现在这个：

```
aggregate(value ~ X1 + X2, rbind(melt(M1), melt(M2)), sum) 
```

对行和列相同的值求和。例如，它将在两个矩阵中求和 (1, 1)。和 (3, 1) 等。它不会做任何不存在`M2`的事情，例如没有第 7 列/行。

最后`cast`转换矩阵，使其`aggregate`第一列的结果为行，第二列的结果为列。有效地消除了之前的融化。`[,-1]`正在删除一个不必要的列（`cast`我认为可能有更好的方法，但我不知道如何）。

正如我所说，它是作为数据框返回的`as.matrix()`，因此如果您愿意，请在结果上使用。

# html - 如何创建以下 div？

> ID：13571361
> 
> 赞同：1
> 
> 时间：2012-11-26T19:02:45.107
> 
> 标签：html, css

抱歉，在创建一组 div 作为附加图片时遇到困难..请帮助

[http://imgur.com/J8psv](http://imgur.com/J8psv)

我最大的问题是必须让 div 在父 div 中彼此相邻排列。事实上要进入下一个级别，如果有 200px 的第 5 个 div，那么我希望它自动进入第二行。我知道我需要一些与 CSS 相关的东西，只是我不太熟悉它。

```
.div_main_left {
    width: 800px;
        border: 1px solid;
        height: 600px;
        float: left;
        display: table-cell;
}

.div_sec_left {
    width: 200px;
        border: 1px solid;
        height: 75px;
        display: inline;
        float: left;
}

.div_right {
    width: 250px;
        border: 1px solid;
        height: 500px;
        float: right;
        display: table-cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:07:13.773

在列表中执行此操作，然后设置列表本身的样式。来自：[http ://www.alistapart.com/articles/taminglists/](http://www.alistapart.com/articles/taminglists/)

```
#tabs ul {
margin-left: 0;
padding-left: 0;
display: inline;
} 

#tabs ul li {
margin-left: 0;
margin-bottom: 0;
padding: 2px 15px 5px;
border: 1px solid #000;
list-style: none;
display: inline;
}

#tabs ul li.here {
border-bottom: 1px solid #ffc;
list-style: none;
display: inline;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:30:11.847

你可以这样做：

HTML

```
<div id="mainwrapper">
 <div id="leftwrapper">
     <div class="topbox"></div>
     <div class="topbox"></div>
     <div class="topbox"></div>
     <div class="topbox"></div>
     <div id="maincontent"></div>
 </div>
 <div id="rightwrapper">
     <div id="topsidebar"></div>
     <div id="bottomsidebar"></div>
 </div>     
</div> 
```

CSS

```
#mainwrapper{
 width:1050px;    
}

#rightwrapper{
 width:250px;
 float:left;
}

#leftwrapper{
 width:800px;
 float:left;
}

.topbox{
 float: left;
 width:196px;
 margin-right:4px;
 height:75px;
 background-color:orange;    
}

#maincontent{
 width:100%;
 height:675px;
 background-color:blue;
 clear:both;    
}

#topsidebar
{
 width:100%;
 height:600px;
 background-color:green;    
}

#bottomsidebar{
 width:100%;
 height:150px;    
 background-color:red;
} 
```

[这](http://jsfiddle.net/vEXrw/4/)是jsfiddle

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T19:14:47.053

你可以从这个开始： [小提琴示例](http://jsfiddle.net/vEXrw/3/)

首先是html：

```
<div id="container">
    <div class="big_left">
        <div class="float_parent">
            <div class="small">200x75</div>
            <div class="small">200x75</div>
            <div class="small">200x75</div>
            <div class="small">200x75</div>
        </div>
        <div class="content">
            The Content;
        </div>
    </div><!-- Big left End -->

    <div class="big_right">
        <div class="right_long">
            250x750
        </div>      
    </div><!-- Big Right End -->
</div> 
```

然后是CSS：

```
#container {
    width:1065px;
}
.big_left {
    width:810px;
    float:left;
}
.big_right {
    width:255px;
    float:left;
}
.big_left .float_parent {
    width:800px;
}
.big_left .float_parent .small{
    width:200px;
    height:75px;
    float:left;
}
.big_left .content {
    clear:both;
}
.big_right .right_long {
    width:250px;
    height:750px;
} 
```

# javascript - 从ajax获取元素失败

> ID：13571365
> 
> 赞同：0
> 
> 时间：2012-11-26T19:03:13.120
> 
> 标签：javascript, jquery

```
 var text,replacing$;

    $.get('reload.html,function(response){
        text=response;
    });
    replacing$=$(text).find('td')
    alert(replacing$.get()) 
```

当我尝试使用 replace$.get() 时，它只是空的。

这是 reload.html （真的注意，只是把它记录下来）

```
<tr>
<td>
LOADED First
</td>
</tr> 
```

这让我疯狂。响应文本在回调函数内工作得很好，但在外面却不行

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T19:05:54.393

`$.get`是使用的异步调用`AJAX`（其中 A 是异步的）。这意味着后面的`$.get`行将在服务器响应之前执行。

正如您在帖子中提到的那样，您应该将这些代码移动到回调中。

# node.js - Socket.IO 的奇怪问题

> ID：13571376
> 
> 赞同：0
> 
> 时间：2012-11-26T19:04:08.660
> 
> 标签：node.js, socket.io

我对 Socket.IO 有一个非常奇怪的问题。出于某种原因，发射“缓冲区”似乎被一遍又一遍地复制，因为每个连接都会导致 n+1 个回复：

```
COM.ping();
undefined
0 "CONNECTION STATUS: OK - 0" app.js:9
COM.ping();
undefined
1 "CONNECTION STATUS: OK - 1" app.js:9
2 "CONNECTION STATUS: OK - 1" app.js:9
COM.ping();
undefined
3 "CONNECTION STATUS: OK - 2" app.js:9
4 "CONNECTION STATUS: OK - 2" app.js:9
5 "CONNECTION STATUS: OK - 2" app.js:9
COM.ping();
undefined
6 "CONNECTION STATUS: OK - 3" app.js:9
7 "CONNECTION STATUS: OK - 3" app.js:9
8 "CONNECTION STATUS: OK - 3" app.js:9
9 "CONNECTION STATUS: OK - 3" app.js:9
COM.ping();
undefined
10 "CONNECTION STATUS: OK - 4" app.js:9
11 "CONNECTION STATUS: OK - 4" app.js:9
12 "CONNECTION STATUS: OK - 4" app.js:9
13 "CONNECTION STATUS: OK - 4" app.js:9
14 "CONNECTION STATUS: OK - 4" app.js:9 
```

代码相当简单。在客户端：

```
 this.ping = function(){
        socket.on('PING__',function (data){
            console.log(count++,"CONNECTION STATUS: "+$(data)[0].status);
            data = '';
        });
        socket.emit('__PING');
    } 
```

在服务器上：

```
 var counter = 0;
    io.sockets.on('connection', function (socket) {
        socket.on('__PING', function (data) {
            socket.emit('PING__' , {status:'OK - '+counter++});
        });
    }); 
```

因此，出于某种原因，当我尝试 ping 时，它以某种方式重复。我不确定为什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:13:31.173

弄清楚了。真是愚蠢的逻辑错误：

```
 this.ping = function(){
        socket.on('PING__',function (data){
            console.log(count++,"CONNECTION STATUS: "+$(data)[0].status);
            data = '';
        });
        socket.emit('__PING');
    } 
```

本来应该：

```
var events = {};
this.ping = function(){
    if(typeof events.ping === 'undefined'){
        events.ping = socket.on('PING__',function (data){
            console.log("CONNECTION STATUS: "+$(data)[0].status);
            data = '';
        });
    }
    socket.emit('__PING');
} 
```

它搞砸了，因为我一遍又一遍地绑定事件处理程序哈哈。

# database-design - 实体框架创建列名比预期长的数据库

> ID：13571377
> 
> 赞同：0
> 
> 时间：2012-11-26T19:04:14.977
> 
> 标签：database-design, entity-framework-4, asp.net-mvc-4, visual-studio-2012, code-first

我创建了一个模型

```
public class Moo
{
    public Int32 MooId { get; set; }
    public string Description { get; set; }
    public City CityIdFrom { get; set; }
    public Int32 Weight { get; set; }
} 
```

和

```
public class City
{
    public Int32 CityId { get; set; }
    public string Name { get; set; }
} 
```

我写了

```
public class MvcApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        System.Data.Entity.Database.SetInitializer(
             new System.Data.Entity.DropCreateDatabaseAlways<DbConnection>());
        ... 
```

在 Global.asax.cs

简而言之 - 我按照[这里](http://pluralsight.com/training/players/PSODPlayer?author=scott-allen&name=mvc3-building-data-i&mode=live&clip=0&course=aspdotnet-mvc3-intro)的教程进行操作。

但是，我得到了一个使用以下列创建的数据库表 Moo：

```
 [MooId]
  ,[Description]
  ,[Weight]
  ,[CityIdFrom_CityId] 
```

但是，就像在教程中一样，我希望这看起来像：

```
 [MooId]
  ,[Description]
  ,[Weight]
  ,[CityIdFrom] 
```

**生成器添加不必要的 _CityId 的原因是什么**？（对于所有具有关系的表的列也是如此）我很确定必须有一个设置，但我发现很难说出我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T22:23:00.163

您没有在`Moo`模型中明确声明 FK 列。

该`CityIdFrom`属性是类型的导航属性`City`，而不是类型的 FK 列`Int32`。

因此，您在数据库中看到的列是由 EF 自动为您创建的。

如果要命名此列，则必须将其添加到模型中：

```
public class Moo
{
  public Int32 MooId { get; set; }
  public string Description { get; set; }

  public Int32 CityFromId { get; set; }
  public City CityFrom { get; set; }

  public Int32 Weight { get; set; }
} 
```

注意：列名是约定俗成的，所以 EF 可以弄清楚什么是什么。 导航属性的数据库 FK 列也是
如此，因为它与末尾的名称相同。`CityFromId``CityFrom``Id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:24:49.460

它正在创建一个外键`City.CityId`，因此额外的`_CityId`. 您需要添加该属性`[Column("CityIdFrom")]`以告诉框架您希望它使用其默认值以外的其他内容。

# google-apps-script - Google 电子表格脚本编辑器 MailApp.sendEmail 未设置回复？

> ID：13571379
> 
> 赞同：2
> 
> 时间：2012-11-26T19:04:19.797
> 
> 标签：google-apps-script

我正在使用 Google 电子表格让客户发送评论。当他们提交评论时，它会通过电子邮件发送给我。我使用[MailApp.sendEmail 方法](https://developers.google.com/apps-script/class_mailapp#sendEmail)。除了replyTo“高级参数”之外，它按预期工作：

```
var myAdvancedArgs = { htmlBody: myHtmlBody, replyTo: customerEmail };
MailApp.sendEmail("me@example.com", "Comments Form", myBody, myAdvancedArgs); 
```

customerEmail 设置正确，因为我在消息正文中正确输出了它。htmlBody 的工作原理与我的 GMail 帐户中显示的电子邮件的 HTML 版本一样。但是，当我单击 GMail 中的回复按钮时，收件人：地址是我自己。似乎`replyTo`根本没有设置。但随后我通过单击我名字旁边的小三角形和工具提示“显示详细信息”来查看电子邮件的标题，它确实提到了正确的回复地址：

```
reply-to:    mycustomer@example.com 
```

没有正确`MailApp.sendEmail`设置回复标题？

***更新***：我剪了几张图片来展示正在发生的事情。标头设置不正确（也许这不是`reply-to`您回复的方式？）或 GMail 对我来说无法正常工作。

第一张图片，您会看到`reply-to`我的 Google 电子表格脚本创建了一个标题： ![来自带有回复标题集的脚本的电子邮件](../Images/4658c6324067a926195f81bf26006d9d.png)

第二张图，当我点击GMail中的回复按钮时，收件人地址***没有***填写`reply-to`标题中的地址： ![地址回复错误](../Images/533c55874a664b97ed613ecaf3f97e78.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:06:09.583

我找到了[你（和我）问题的原因](https://code.google.com/p/google-apps-script-issues/issues/detail?id=973#c5)。

> 您看到的是 Gmail 错误，而不是 Apps 脚本错误。基本上，如果回复是您已链接到您的地址的任何电子邮件地址，以便您可以从 gmail 中以该帐户发送邮件，那么回复将被忽略。换句话说，它对你来说看起来很糟糕，但对于你的脚本的任何其他用户来说，它会正常工作。在任何情况下，非 Gmail 用户都会看到它正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-29T10:38:20.553

这是一个老问题，但如果我需要它，也许其他人也需要它！

**从我的测试来看，replyTo 仅在我将邮件发送到 Acount 邮件时才起作用。如果您的表格在*your@gmail.com*帐户上，请将其发送到*yourOtherMail@gmail.com***

```
var reply = e.namedValues['Email'];

MailApp.sendEmail("NotFormMail@mail.com", "subject", "message",{"replyTo" : '"'+reply+'"'}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T20:55:37.553

只是这样测试：

```
function myFunction() {
    MailApp.sendEmail("serge----@gmail.com ", "test message",'empty body', {"replyTo" : "serge_test@yopmail.com"});   // replyTo son@insas
} 
```

当我“回复”（使用 gmail 或任何邮件客户端中的回复按钮）时，它按预期工作，它显示如下：

![在此处输入图像描述](../Images/48c0c885ea56c20043624cb420203889.png)

`replyTo`即使发件人确实是脚本的作者，这确实是地址（这也是预期的行为，请参阅[有关脚本的文档](https://developers.google.com/apps-script/scripts_google_accounts?hl=fr-FR#understandingPermissions)）

所以我担心[你提出的问题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=2440)是无效的......

# jquery-mobile - jQuery 移动水平单选按钮，但带有单选样式？

> ID：13571380
> 
> 赞同：0
> 
> 时间：2012-11-26T19:04:21.660
> 
> 标签：jquery-mobile

我在 jQuery mobile 中使用水平单选按钮：

[http://jquerymobile.com/test/docs/forms/radiobuttons/](http://jquerymobile.com/test/docs/forms/radiobuttons/)

当您使字段集水平时，样式会发生变化，并且圆形“选定”位会消失。是否可以禁用此行为以便使用正常的 jQuery 移动样式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T21:08:45.897

是的，但并不容易。我能记住的就这么多了。我自己没有例子，也不想再重写。

首先，您需要一个用于 Firefox 或 Chrome 的 firebug 插件（或类似的东西）。

I. 水平单选按钮有一个禁用跨度用于圆形选择 img。通过给它一个 display: block-inline 来启用它（在这种情况下，给其他 div 相同的属性，这将允许它们对齐，在其他情况下它们将重叠）或给它们两个 display: block; a 将它们向左浮动（不要忘记位置：相对）。

我说的是这个：

```
<span class="ui-btn-text">List</span>
<span class="ui-icon ui-icon-radio-off ui-icon-shadow"> </span> 
```

顶部是文本跨度，底部是图标持有者。在水平组的情况下，底部的一个被禁用（显示：无；）。

二、第二件事，点击/选择防止背景颜色变化。这将为您提供垂直单选按钮控件组的水平版本。

希望这可以帮助。

# cvs - 如何将目录中的所有新文件添加到 CVS

> ID：13571391
> 
> 赞同：0
> 
> 时间：2012-11-26T19:05:45.090
> 
> 标签：cvs

我正在编写一个 Java 应用程序来管理构建/部署我的应用程序。我希望它在项目中查找任何尚未添加到 CVS 的新文件/文件夹并添加它们。我可以`cvs add`用来添加单个文件/文件夹，但我如何以编程方式确定需要添加哪些？该应用程序将在 Windows 机器上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T04:35:53.393

您可以从以下位置解析输出：

```
cvs -n add 
```

这`-n`将防止任何内容被更改，因此您会得到一个很好的已添加文件列表。

另一种方法是解析 CVS 条目文件。自己与现有名称进行比较。

# xml - 用于打开 SWF 的 XML 命令是什么？

> ID：13571394
> 
> 赞同：0
> 
> 时间：2012-11-26T19:05:56.337
> 
> 标签：xml

我在网上购买了一个作品集画廊。代码采用 HTML、JavaScript 和 XML 格式。我想能够选择一个图标并打开一个灯箱图像以显示所选项目。图库还假设允许图标播放 SWF 文件。我已经成功地将我的图像集成到图库中，但是我无法播放 .swf 文件。我试图将我的 .swf 文件结构和文件名插入到示例中，但这不起作用。鉴于下面提供的工作加载 .swf 文件示例的 XML 代码。有人可以告诉我正确的代码来让我玩吗？

是否也可以在点击时打开网站？那个代码会是什么样子？

我还提供了投资组合演示的链接，以演示其工作原理。

[http://codecanyon.net/item/tonic-gallery-jQuery-xml-portfolio-gallery/full_screen_preview/120710](http://codecanyon.net/item/tonic-gallery-jQuery-xml-portfolio-gallery/full_screen_preview/120710)（演示）

我的 .swf 文件的文件结构是 images/psst.swf 我的文件大小是 550x400

我的 XML 代码

```
<?xml version="1.0" encoding="UTF-8"?>
<portfolio>

<categories>
<category id="graphic">Graphic Design</category>
<category id="web">Web Design</category>
<category id="photo">Photography</category>
<category id="video">Videos</category>
</categories>

<item>
    <thumbnail>images/img1.jpg</thumbnail>
    <preview>images/preview.jpg</preview>
    <category>graphic,web,photo</category>
    <description>Description goes here</description>
</item>

         <item>
    <thumbnail>images/img3.jpg</thumbnail>
    <preview>http://www.adobe.com/products/flashplayer/include/marquee/design.swf?width=792&   amp;height=294</preview>
    <category>video</category>
    <description>Flash video preview</description>
</item> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:52:05.647

对不起我之前的回答，我不明白你到底想做什么。

我查看了画廊网站[http://pexeto.com/tonic_gallery/](http://pexeto.com/tonic_gallery/)上的 xml ( [http://pexeto.com/tonic_gallery/portfolio.xml](http://pexeto.com/tonic_gallery/portfolio.xml) )，您可以查看代码。flash 部分在工作示例中如下所示：

```
<item>
    <thumbnail>images/flash.jpg</thumbnail>
    <preview>http://www.adobe.com/jp/events/cs3_web_edition_tour/swfs/perform.swf?width=792&height=294</preview>
    <category>video</category>
    <description>Flash video preview</description>
</item> 
```

所以我认为你的问题是预览字段url中的空格和&，尝试使用“&”这样：

```
<preview>http://www.adobe.com/products/flashplayer/include/marquee/design.swf?width=792&height=294</preview> 
```

代替：

```
<preview>http://www.adobe.com/products/flashplayer/include/marquee/design.swf?width=792&   amp;height=294</preview> 
```

# ios - 将 iPad 和 iPhone 代码库与不同的 Core Data 版本合并

> ID：13571398
> 
> 赞同：1
> 
> 时间：2012-11-26T19:06:00.803
> 
> 标签：ios, core-data, core-data-migration

我有一个 iOS 应用程序，它最初是一个 iPhone 应用程序。它被分叉以生成 iPad 版本，我正在努力将它们重新集成在一起，以便我可以从单个分支生成应用程序的两个版本（在 Xcode 中使用不同的目标）。实际上，这主要是完成的。

**问题**
随着 iPad 应用程序的发展，它的核心数据模型也在发展。因此，两个应用程序的应用程序模型当前为 3.4 版，但它们略有不同（即不同的属性）。因此，如果我生成一个合并版本，其中一个应用程序将无法迁移，因为那里的“3.4”版本与新版本不匹配。

所以我问你，哦，stackoverflow 的居民……关于合并这些代码库的最佳方法有什么想法吗？

# c# - 1E-08 转十进制

> ID：13571400
> 
> 赞同：2
> 
> 时间：2012-11-26T19:06:23.693
> 
> 标签：c#, decimal

> **可能重复：**
> [从指数符号解析数字](https://stackoverflow.com/questions/3879463/parse-a-number-from-exponential-notation)
> [Decimal.Parse() 是否支持科学记数法？](https://stackoverflow.com/questions/5916921/does-decimal-parse-support-scientific-notation)

我正在尝试将 1E-08 等值转换为 C# 中的小数，因为小数是处理资金的首选数据类型，但在 decimal.Parse()“输入字符串格式不正确”时出现错误。不会先转换为浮点数，然后再转换为小数会破坏目的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T19:09:05.063

是的，转换为浮动确实会破坏目的。好消息是，您不必在这里这样做！

您可以使用带有 NumberStyles 说明符的 Parse 重载：

```
decimal d = decimal.Parse("1E-08",
     System.Globalization.NumberStyles.AllowExponent); 
```

当然，如果你只是指定一个硬编码的十进制，你可以使用十进制文字格式：

```
decimal d = 1E-08M; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T19:11:55.667

您可以尝试：-

```
 decimal x = decimal.Parse("1E-08", NumberStyles.Float); 
```

# python - SPARQL 初始化

> ID：13571401
> 
> 赞同：0
> 
> 时间：2012-11-26T19:06:28.590
> 
> 标签：python, initialization, sparql

我使用`SPARQLWrapper`in`python`来查询一个循环中包含许多不同查询的 Web 端点。

所以我试图让它像这样工作（让我们`queries`保留所有不同的查询和`result`结果）：

```
sparql = SPARQLWrapper("url")
prefix = "prefix..."
for i in arange(1:len(queries)):
    sparql.setQuery(prefix+queries[i])
    result[i] = sparql.query().convert() 
```

但这不起作用。我从列表中选择的第一个查询将返回假定的结果，但任何其他查询都不会。取而代之的是，我现在使用这个：

```
for i in arange(1:len(queries)):
    [sparql,prefix] = initializeSPARQL()
    sparql.setQuery(prefix+queries[i])
    result[i] = sparql.query().convert() 
```

并且

```
def initializeSPARQL():
    sparql = SPARQLWrapper("url")
    prefix = "prefix..." 
    return sparql,prefix 
```

这*行得通*，也不是性能问题，因为查询本身就是瓶颈。但是有更好的解决方案吗？这似乎太错误了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:45:26.083

很奇怪..因为我一直在检查代码，而 query() 方法是完全无状态的，所以不知道它为什么会失败。

当 i > 1 时，result[i] 包含什么？

我可以建议您尝试以下方法吗？

```
sparql = SPARQLWrapper("url")
prefix = "prefix..."
results = []
for i in range(0, len(queries)):
    sparql.resetQuery()
    sparql.setQuery(prefix+queries[i])
    results[i] = sparql.query().convert() 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T16:49:12.043

我是图书馆的开发人员之一。

你的第一次尝试出现了一个错误。我将检查哪些内部数据结构与以前的用法保持一致，以允许以这种方式使用库。

你的第二个解决方案，即使是有效的，也不应该是正确的方法。

正如我所说，我会看看如何解决这个问题。

对于未来，请向项目提交适当的错误报告或向邮件列表发送电子邮件。

# php - 它一直显示错误的模块名称和编号，如何解决？

> ID：13571406
> 
> 赞同：2
> 
> 时间：2012-11-26T19:06:50.930
> 
> 标签：php, html

下面我有一个 php 脚本，它显示一个“课程”下拉菜单和一个“模块”下拉菜单。假设发生的是用户首先从“课程”下拉菜单中选择一门课程，然后属于所选课程的模块列表将出现在“模块”下拉菜单中。下面是这个的代码：

```
create_session.php  

$sql = "SELECT CourseId, CourseNo, CourseName FROM Course"; 

$sqlstmt=$mysqli->prepare($sql);

$sqlstmt->execute(); 

$sqlstmt->bind_result($dbCourseId, $dbCourseNo, $dbCourseName);

$courses = array(); // easier if you don't use generic names for data 

$courseHTML = "";  
$courseHTML .= '<select name="courses" id="coursesDrop">'.PHP_EOL; 
$courseHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

while($sqlstmt->fetch()) 
{ 
    $courseno = $dbCourseNo;
    $course = $dbCourseId;
    $coursename = $dbCourseName; 
    $courseHTML .= "<option value='".$course."'>" . $courseno . " - " . $coursename . "</option>".PHP_EOL;  
} 

$courseHTML .= '</select>'; 

?>

<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
    <table>
        <tr>
            <th>Course: <?php echo $courseHTML; ?>
                <input id="courseSubmit" type="submit" value="Submit" name="submit" />
            </th>
        </tr>
    </table>
</form>

<?php

if (isset($_POST['submit'])) {

    $submittedCourseId = $_POST['courses'];

    $query = "SELECT cm.CourseId, cm.ModuleId, c.CourseNo, m.ModuleNo,
            c.CourseName,
            m.ModuleName
            FROM Course c
            INNER JOIN Course_Module cm ON c.CourseId = cm.CourseId
            JOIN Module m ON cm.ModuleId = m.ModuleId
            WHERE
            (c.CourseId = ?)
            ORDER BY c.CourseName, m.ModuleId";

    $qrystmt=$mysqli->prepare($query);

    // You only need to call bind_param once
    $qrystmt->bind_param("s",$submittedCourseId);
    // get result and assign variables (prefix with db)

    $qrystmt->execute(); 

    $qrystmt->bind_result($dbCourseId,$dbModuleId,$dbCourseNo,$dbModuleNo,$dbCourseName,$dbModuleName);

    $qrystmt->store_result();

    $num = $qrystmt->num_rows();

    if($num ==0){
        echo "<p style='color: red'>Please Select a Course</p>";
    } else { 

        $dataArray = array();

        while ( $qrystmt->fetch() ) { 
            // data array
            $dataArray[$dbCourseId]['CourseName'] = $dbCourseName; 
            $dataArray[$dbCourseId]['CourseNo'] = $dbCourseNo; 
            $dataArray[$dbCourseId]['Modules'][$dbModuleId]['ModuleName'] = $dbModuleName; 
            $dataArray[$dbCourseId]['Modules'][$dbModuleId]['ModuleNo'] = $dbModuleNo; 

            // session data
            $_SESSION['idcourse'] = $dbCourseNo;
            $_SESSION['namecourse'] = $dbCourseName;
            $_SESSION['idmodule'] = $dbModuleNo;
            $_SESSION['namemodule'] = $dbModuleName;

            }

        foreach ($dataArray as $foundCourse => $courseData) {

            $output = ""; 

            $output .= "<p><strong>Course:</strong> " . $courseData['CourseNo'] .  " - "  . $courseData['CourseName'] . "</p>";

            $moduleHTML = ""; 
            $moduleHTML .= '<select name="module" id="modulesDrop">'.PHP_EOL;
            $moduleHTML .= '<option value="">Please Select</option>'.PHP_EOL;      
            foreach ($courseData['Modules'] as $moduleId => $moduleData) {        

                $moduleHTML .= "<option value='$moduleId'>" . $moduleData['ModuleNo'] . " - " . $moduleData['ModuleName'] ."</option>".PHP_EOL;        
            } 
        }
    $moduleHTML .= '</select>';

    echo $output;

?>

<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
    <table>
        <tr>
            <th>Course: <?php echo $moduleHTML; ?>
                <input id="courseSubmit" type="submit" value="Submit" name="submit" />
            </th>
        </tr>
    </table>
</form> 
```

因此，假设我`INFO101 - Information Communication Technology`在“课程”下拉菜单中选择了课程，它会在下面的模块下拉菜单中显示与该课程对应的以下模块：

```
CHI2520 - Advanced Web Programming
CHI2220 - Systems Strategy
CHI2350 - Interactive Systems 
```

现在这是我遇到的问题。如果我选择模块`CHI2520 - Advanced Web Programming`然后访问下面的页面，它会显示这个模块`CHI2350 - Interactive Systems`。

QandATable.php：

```
 <?php

    if (isset($_POST['idmodule'])) {

        $_SESSION['idmodule'] = $_POST['idmodule'];

    }

    if (isset($_POST['namemodule'])) {

        $_SESSION['namemodule'] = $_POST['namemodule'];

    }

if (isset($_POST['idcourse'])) {

$_SESSION['idcourse'] = $_POST['idcourse'];

}

if (isset($_POST['namecourse'])) {

$_SESSION['namecourse'] = $_POST['namecourse'];

}

    $outputDetails = "";
    $outputDetails .= "
    <table id='sessionDetails' border='1'>
    <tr>
    <th>Course:</th> 
    <th>{$_SESSION['idcourse']}  {$_SESSION['namecourse']}</th>
    </tr>
<tr>
<th>Module:</th> 
<th>{$_SESSION['idmodule']}  {$_SESSION['namemodule']}</th>
</tr>
    </table>
    ";

    echo $outputDetails;

    ?> 
```

我的问题是为什么它在另一页显示错误的模块编号和名称？两个页面都包含`session_start();`

下面是导航到 QandATable.php 的表单：

```
<form action="QandATable.php" method="post" id="sessionForm">
            <table><tr><th>6: Module:</th>
            <td><?php echo $moduleHTML; ?></td>
            </tr>
            </table>
            <p><input class="questionBtn" type="submit" value="Prepare Questions" name="prequestion" /></p>   

        </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:10:19.053

将选择设置为 autocomplete="off"，它应该可以解决此问题。浏览器的自动完成功能试图让用户保持原样，而不是告诉它不这样做。它把我逼疯了。

```
<select autocomplete="off" name="courses" id="coursesDrop"> 
```

# html - 我可以选择透明图像后面的元素吗？

> ID：13571407
> 
> 赞同：0
> 
> 时间：2012-11-26T19:06:54.750
> 
> 标签：html, css, transparent

我想取消选择透明图像以选择其背后的元素，不使用`propriety z-index`，请帮帮我！这里是[Jsfiddle 示例](http://jsfiddle.net/marcellokabora/h2QkR/)。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T17:26:54.267

你不能通过改变它的顺序来把输入放在前面吗？

HTML：

```
<input id="myinput" type="text" name="" value="SELECT ME PLEASE !"/>
<div id="menulogo"><img src="http://www.marcellokabora.com/web/wokomoko/img/menulogo.png"/></div> 
```

CSS：

```
 #myinput{
    position: absolute;
    top: 130px;
    left: 260px;
    font-size: 20px;
}​
​ 
```

JSFiddle：http: [//jsfiddle.net/bW52t/](http://jsfiddle.net/bW52t/)

否则，用于`pointer-events`使元素“点击”

HTML：

```
<div id="menulogo"><img src="http://www.marcellokabora.com/web/wokomoko/img/menulogo.png"/></div>
<input id="myinput" type="text" name="" value="SELECT ME PLEASE !"/>

​ 
```

CSS：

```
#menulogo,#menulogo  img{
    pointer-events: none;
}
#myinput{
    position: absolute;
    top: 130px;
    left: 260px;
    font-size: 20px;
}​ 
```

JSFiddle：http: [//jsfiddle.net/2m4Tx/](http://jsfiddle.net/2m4Tx/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:10:04.223

好吧，如果您设置了 z-index，我认为没有办法访问由透明图像元素重叠的部分。当然，您可以编写一个简短的 JS 来更改图像的 z-index 值，或者很快将其隐藏等，但是如果不编辑此属性，我认为这是不可能的..

干杯!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T19:19:49.070

这是一个棘手的问题。在尝试设置图像索引时，即使使用 z-index，旧 IE 浏览器也会出现问题。看起来，像 IE7 这样的浏览器会忽略图像的索引，即使它位于输入框的后面（例如）。您最好的选择是将图像设置为 CSS 中 div 的背景图像，并让两个元素都具有绝对位置。

```
<div style="position:absolute; background: url(images/myimage.jpg) no-repeat"></div>
<div style="position: absolute; left : 15px">
    <input type="text" />
</div> 
```

# php - 如何在 PHP 输出缓冲区的开头添加一些内容？

> ID：13571415
> 
> 赞同：4
> 
> 时间：2012-11-26T19:07:23.660
> 
> 标签：php, output-buffering

你如何在输出缓冲区的**开头附加一些东西？**

例如，假设您有以下代码：

```
ob_start();

echo '<p>Start of page.</p>';
echo '<p>Middle of page.</p>';
echo '<p>End of page</p>'; 
```

在将内容刷新到浏览器之前，如何附加一些内容以使其在页面加载**之前出现？** `<p>Start of page.</p>`

这听起来很简单，就像将指针移动到数组的开头，但我找不到如何使用输出缓冲区来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T19:14:13.837

** PHP 5.3 **

```
ob_start(function($output) {
    $output = '<p>Prepended</p>'.$output;
    return $output;
});

echo '<p>Start of page.</p>';
echo '<p>Middle of page.</p>';
echo '<p>End of page</p>'; 
```

** PHP < 5.3 **

```
function prependOutput($output) {
    $output = '<p>Appended</p>'.$output;
    return $output;
}

ob_start('prependOutput');

echo '<p>Start of page.</p>';
echo '<p>Middle of page.</p>';
echo '<p>End of page</p>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:12:47.097

在要首先显示的内容之后使用 2 个 ob_start 命令和 ob_end_flush()，然后在要输出页面的其余部分时再次使用 ob_end_flush 结束缓冲区。

例如：

```
ob_start();
ob_start();

echo '<p>Start of page.</p>';

ob_end_flush();

echo '<p>Middle of page.</p>';
echo '<p>End of page</p>';

ob_end_flush(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T19:13:30.593

[请参阅（此处](http://php.net/manual/en/function.ob-start.php)`ob_start`的文档）的第一个参数，它允许您提供在**刷新**或**清理**缓冲区时调用的回调。它接收一个字符串作为参数并输出一个字符串，因此应该很容易

 ****```
function writeCallback($buffer)
{
    return "Added before " . $buffer;
}

ob_start("writeCallback"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T19:15:35.517

您可以使用[ob_get_contents()](http://www.php.net/manual/en/function.ob-get-contents.php)函数获取缓冲区的内容

```
ob_start();
echo "World! ";
$out1 = ob_get_contents();
echo "Hello, ".$out1; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T19:16:30.203

你在任何输出之前都想要它吗？如果是这样，那么您正在寻找该`auto_prepend_file`指令。 [http://php.net/manual/en/ini.core.php](http://php.net/manual/en/ini.core.php)****

# asp.net - 集成用两个不同 Visual Studio 版本编写的 ASP.NET 项目的最佳方式

> ID：13571417
> 
> 赞同：1
> 
> 时间：2012-11-26T19:07:28.140
> 
> 标签：asp.net, visual-studio-2008, visual-studio-2012, integration

我知道这是一种奇怪的情况，但考虑一下两个程序员正在处理一个项目的情况。一位程序员正在 Visual Studio 2012 中使用 ASP.NET 开发数据库驱动的网站，而另一位程序员正在同一数据库驱动的 ASP.NET 网站的另一部分开发 Visual Studio 2008。

您认为整合这两个代码的*最佳*方式是什么？

PS：投反对票的人请在评论中解释，然后再投反对票。:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T19:22:34.587

让第二个开发人员将他的 VS 副本更新到 2012。如果您正在使用两个不同版本的 VS，您将非常简单地无法让任何一个开发人员在使用另一个构建（或升级到）的代码库的任何部分上工作版本。

一旦每个人都在同一个平台上工作，从而可以毫无错误地加载和构建相同的解决方案、项目和源代码文件，“集成”两个代码库就变得相当简单。当然，转换过程可能不是那么简单。

我的第一步是确保对整个代码库进行了可靠的备份；您可以将平面文件复制到文件存储中，或者更可靠的是，您可以使用像 Subversion 这样的集中式 VCS 来确保代码库的单个权威副本按原样存在并且可以轻松检索。然后，当 2008 开发人员将他的机器更新到 2012 时，让 2012 开发人员拉出整个代码库并加载 2008 开发人员一直在使用的任何解决方案，并运行转换向导。此向导将更新项目和解决方案文件背后的 XML 以支持新 IDE 版本的功能。

如果您绝对不能让两个开发人员都使用同一个 IDE 版本，那么仍有希望。让 2012 年的开发人员在他的副本中打开一个新的解决方案文件，然后拉入 2008 年的项目。如果 VS 要求转换它们，你就是 SOL；另一个开发者必须升级，否则 2012 年的开发者将不得不恢复。但是，如果 IDE 没有抱怨，2012 开发人员可以以不同的名称保存新解决方案，并使用该解决方案文件处理项目及其源代码，而 2008 开发人员可以继续使用原始解决方案。明白只要这种状态继续下去，2012 dev 就不能使用 C# 4.0/4.5 的任何特性，比如动态类型、协变/逆变关键字、可选参数/命名参数、async/await 关键字等都不能用在2008 开发人员必须保持可用的任何源代码。语言方面，2012 年的开发人员仅限于 C# 3.0 和 .NET Framework 3.5。这并不能解决 2008 开发人员无法访问 2012 开发人员在该 IDE 创建的项目中从头开始编写的代码的问题；他只需升级即可在代码库的这些部分工作。

# sql - 在新会话上触发通过 JPA 的简单 SELECT 请求时，所有数据数据都会被删除

> ID：13571423
> 
> 赞同：1
> 
> 时间：2012-11-26T19:08:19.550
> 
> 标签：sql, gwt, jpa, eclipselink, derby

我正在完成一个通过 eclipseLink 连接到 derby 数据库的 GWT 项目，而 ORM 是通过 JPA 完成的。一开始我有一个登录和注册按钮。当我打开一个会话，从 Eclipse 中运行项目时，我注册了一个新用户并使用这个用户登录，一切正常。当我现在退出该会话时，我可以在数据库中看到该用户。当我现在开始一个新会话时，我仍然可以在数据库中看到该用户。当我现在尝试在新会话中登录时，登录按钮会实例化一个新的实体管理器，该管理器第一次再次连接到数据库并运行选择查询，以检查用户，我尝试登录。只要我使用该功能，一切似乎都运行良好，这是我的服务的服务器端实现的一部分。

```
public Fellow getUser(String username) {
    ObjectManager.checkIfOMisOpen();
    EntityTransaction tx = ObjectManager.em.getTransaction();
    tx.begin();
    TypedQuery<Fellow> checkUser = ObjectManager.em.createQuery(
            "SELECT m FROM Fellow m WHERE " + "m.username = '" + username
                    + "'", Fellow.class);
    tx.commit();
    List<Fellow> listUser = checkUser.getResultList();
    if (listUser.isEmpty())
        return null;
    return listUser.get(0);
} 
```

该函数检查对象管理器（它是数据库操作的管理器）是否打开，然后尝试通过查询获取用户。由于此功能中的任何原因，项目的所有对象都会被删除......仅当我尝试在新会话中登录时......

有人有建议吗？这是截止日期前的最后几个小时大问题：D 提前致谢

ps：这里是persistence.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="...." transaction-type="RESOURCE_LOCAL"> 
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <class>class1</class>
        <class>class2</class>
        <class>class3</class>
        <class>class4</class>
        <class>class5</class>
        <properties>
            <property name="javax.persistence.target-database" value="Derby"/>
            <property name="javax.persistence.jdbc.driver" 
                value="org.apache.derby.jdbc.ClientDriver"/>
            <property name="javax.persistence.jdbc.url" 
              value="jdbc:derby:....;create=true"/> 
            <property name="javax.persistence.jdbc.user" value="..."/> 
            <property name="javax.persistence.jdbc.password" value="..."/>
            <property name="eclipselink.ddl-generation" value="create-tables"/>
            <property name="eclipselink.logging.level" value="SEVERE"/> 
        </properties>
    </persistence-unit>
</persistence> 
```

第 3 类继承第 4 类，我发现问题只发生在与这些对象的映射关系中......

# c# - 自定义对象是否与 List<> 按值相等

> ID：13571424
> 
> 赞同：2
> 
> 时间：2012-11-26T19:08:20.603
> 
> 标签：c#, .net

我有以下课程：

```
 public class MyDocuments
    {
        public DateTime registeredDate;
        public string version;
        public List<Document> registeredDocuments;
    }

    public class Document
    {
        public string name;
        public List<File> registeredFiles;
    }

    public class File
    {
        public string name;
        public string content;
    } 
```

我有一个 MyDocuments 实例，其中包含多个文档`List<Document> registeredDocument`。我从用户那里得到一个新`List<Document>`的。

如何验证列表中不存在新对象？我想按价值比较而不是参考。

我正在考虑使用 HashSet 而不是 List。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:38:46.577

### 如何进行相等比较？

每当 BCL 类想要在某种类型的对象之间执行相等性检查时`T`，它们会通过调用[`IEqualityComparer<T>`](http://msdn.microsoft.com/en-us/library/system.collections.iequalitycomparer.aspx). 为了获得这样的实现，框架看起来[`EqualityComparer<T>.Default`](http://msdn.microsoft.com/en-us/library/ms224763.aspx).

如文档中所述，此属性会产生`IEqualityComparer<T>`如下内容：

> `Default property`检查类型 T 是否实现了 `System.IEquatable<T>`接口，如果是，则返回 `EqualityComparer<T>`使用该实现的一个。否则，它返回一个`EqualityComparer<T>`使用 `Object.Equals`和`Object.GetHashCode`提供的覆盖的`T`。

### 我有哪些选择？

因此，一般而言，要规定应如何执行相等比较，您可以：

1.  显式提供`IEqualityComparer<T>`执行相等检查的类或方法的实现。此选项在 中不是很明显`List<T>`，但许多 LINQ 方法（例如[`Contains`](http://msdn.microsoft.com/en-us/library/bb339118.aspx)）确实支持它。
2.  让你的班级实现`IEquatable<T>`. 这将`EqualityComparer<T>.Default`使用这个实现，并且只要有一种明显的“自然”方式来比较 type 的对象，它就是一个不错的选择`T`。
3.  覆盖`object.GetHashCode`而不`object.Equals`实施`IEqualityComparer<T>`. 但是，这只是#2 的劣质版本，应始终避免使用 AFAIK。

### 选择哪个选项？

一个好的经验法则是：如果有一种明显且自然的方式来比较 class 的对象`T`，请考虑实现它`IEquatable<T>`；这将确保在整个框架中使用您的比较逻辑，而无需任何额外的参与。如果没有明显的候选者，或者如果您想以不同于默认方式的方式进行比较，请实现您自己的`IEqualityComparer<T>`并将实现作为参数传递给需要执行相等检查的类或方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:12:13.807

您将需要实现该`Equals()`方法，可能`GetHashCode()`还需要实现。有关示例，请参[见此答案。](https://stackoverflow.com/a/2920408/298754)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T19:12:51.657

你应该实施[`IEquatable<T>`](http://msdn.microsoft.com/en-us/library/ms131187.aspx).

当您在您的自定义对象上实现此接口时，任何相等性检查（例如 Contains、IndexOf）都会使用您的对象实现自动完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T19:11:46.237

覆盖[object.Equals](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)方法。

这是直接来自文档的示例

```
public class Person
{
   private string idNumber;
   private string personName;

   public Person(string name, string id)
   {
      this.personName = name;
      this.idNumber = id;
   }

   public override bool Equals(Object obj)
   {
      Person personObj = obj as Person; 
      if (personObj == null)
         return false;
      else 
         return idNumber.Equals(personObj.idNumber);
   }

   public override int GetHashCode()
   {
      return this.idNumber.GetHashCode(); 
   }
} 
```

该`Equals`方法返回一个布尔值，它是否`obj`等于`this`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T19:50:04.003

在顶层是这样的，在子层继续下去：

```
public class MyDocuments
{
    public DateTime registeredDate;
    public string version;
    public HashSet<Document> registeredDocuments;
    public override bool Equals(Object o)
    {
        if( !(o is MyDocuments) ) return false;
        MyDocuments that = (MyDocuments)o;
        if( !String.Equals(this.version, that.version) ) return false;
        if( this.registeredDocuments.Count != that.registeredDocuments.Count ) return false;
        // assuming registeredDate doesn't matter for equality...
        foreach( Document d in this.registeredDocuments )
            if( !that.registeredDocuments.Contains(d) )
                return false;
        return true;
    }
    public override int GetHashCode()
    {
        int ret = version.GetHashCode();
        foreach (Document d in this.registeredDocuments)
            ret ^= d.GetHashCode(); // xor isn't great, but better than nothing.
        return ret;
    }
} 
```

注意：如果属性可以感知变化，缓存可能对 HashCode 值有用。

# .net - 如何在不添加对 System.Windows.Forms 的引用的情况下将字符串复制到控制台应用程序中的剪贴板？

> ID：13571426
> 
> 赞同：28
> 
> 时间：2012-11-26T19:08:26.997
> 
> 标签：.net, console-application, clipboard

我有一个生成 SQL 并将其存储在字符串变量中的 .NET 4.0 控制台应用程序。我希望将此字符串直接复制到剪贴板。

到目前为止，我的所有研究都表明，唯一可行的方法是添加对 System.Windows.Forms 的引用。我不想添加对与控制台应用程序无关的程序集的引用。

在我们当前存在的宇宙中，是否有一种已知的方法可以将文本字符串复制到控制台应用程序中的剪贴板，该方法不涉及添加对 System.Windows.Forms 或任何其他目的与应用程序无关的程序集的引用准系统控制台应用程序？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-11-26T19:15:45.113

[调用](http://en.wikipedia.org/wiki/Platform_Invocation_Services)剪贴板 API 的平台是一种可能的解决方案。例子：

```
using System.Runtime.InteropServices;
class Program
{
    [DllImport("user32.dll")]
    internal static extern bool OpenClipboard(IntPtr hWndNewOwner);

    [DllImport("user32.dll")]
    internal static extern bool CloseClipboard();

    [DllImport("user32.dll")]
    internal static extern bool SetClipboardData(uint uFormat, IntPtr data);

    [STAThread]
    static void Main(string[] args)
    {
        OpenClipboard(IntPtr.Zero);
        var yourString = "Hello World!";
        var ptr = Marshal.StringToHGlobalUni(yourString);
        SetClipboardData(13, ptr);
        CloseClipboard();
        Marshal.FreeHGlobal(ptr);
    }
} 
```

这只是一个例子。在代码周围添加一些错误处理，例如检查 P/Invoke 函数的返回值，将是一个很好的补充。

[`SetClipboardData`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms649051(v=vs.85).aspx)是有趣的一点。您还需要确保打开和关闭剪贴板。

作为第`13`一个参数传入的是数据格式。13[表示 Unicode 字符串](http://msdn.microsoft.com/en-us/library/windows/desktop/ff729168(v=vs.85).aspx)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-07-11T13:49:01.183

该`Marshal.StringToHGlobalUni`函数实际上以一种不适合的方式分配内存`SetClipboardData (using LocalAlloc with LMEM_FIXED)`，这可能会导致崩溃（给定方法名称，您不会期望它，但进入代码，例如使用[ReSharper](http://en.wikipedia.org/wiki/ReSharper)会揭示这一点）。

`SetClipboardData``GlobalAlloc`根据`GMEM_MOVABLE`文档需要： [SetClipboardData on MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms649051(v=vs.85).aspx)。

这是 MIT 许可的 System.Windows.Forms 替代方案，经过测试并完成错误处理：[Clippy](https://github.com/kolibridev/clippy)

（剪贴板推送代码本身可以在这里找到：[Clippy.cs](https://github.com/kolibridev/clippy/blob/master/Clippy/Clippy.cs)。）

# ajax - 自动取消 jqgrid 请求

> ID：13571433
> 
> 赞同：0
> 
> 时间：2012-11-26T19:08:59.603
> 
> 标签：ajax, jqgrid

我知道这个答案：[如何向我的 jqgrid 添加取消按钮？](https://stackoverflow.com/questions/4016583/how-do-i-add-a-cancel-button-to-my-jqgrid/4017022#4017022)，并且我正在尝试实现类似的东西，尽管没有按钮来触发取消。我有一个在页面加载时加载的网格（默认情况下加载没有条件的搜索），我希望能够在用户实际执行带有条件的搜索时取消默认的空条件搜索。由于我不需要按钮，因此我试图通过仅跟踪 loadBeforeSend 方法中的 xhr 请求来简化解决方案，如果在加载网格时它不为空，则中止该 xhr。代码：

```
var gridXhr;
function getGridData() {
    var searchParms = ...;
    var colHeaders = [...];
    var colDefinitions = [...];
    if (gridXhr != null) {
        alert(gridXhr.readyState);
        gridXhr.abort();
        gridXhr = null;
    }
    $('#grid').jqGrid('GridUnload');
    $('#grid').jqGrid({
        defaults: {...},
        autowidth:true,
        url: "<%= Page.Request.Path %>/ExecuteSearch",
        mtype: 'POST',
        ajaxGridOptions: { contentType: "application/json" },
        postData: searchParms,
        datatype: "json",
        prmNames: {
            nd: null,
            rows: null,
            page: null,
            sort: null,
            order: null
        },
        jsonReader: {
            root: function (obj) { return obj.d; },
            page: function (obj) { return 1; },
            total: function (obj) { return (obj.d.length / 20); },
            records: function (obj) { return obj.d.length; },
            id: 'CatalogID',
            cell: '',
            repeatitems: false
        },
        loadonce: true,
        colNames: colHeaders,
        colModel: colDefinitions,
        caption: "Search Results",
        pager: 'searchPaging',
        viewrecords: true,
        loadBeforeSend: function (xhr) {
            gridXhr = xhr;
        },
        loadError: function (xhr, status, error) {
            gridXhr = null;
            if (error != 'abort') {
                alert("Load Error:" + status + "\n" + error);
            }
        },
        loadComplete: function() {
            gridXhr = null;
        },
        multiselect: <%= this.MultiSelect.ToString().ToLower() %>,
        multiboxonly: true
    }).setGridWidth(popWidth);
} 
```

我遇到的问题是 jqGrid 的后续执行不起作用。loadError 函数被触发，错误（第三个参数）为“abort”。我是否需要像其他答案中所做的那样对 loadBeforeSend 做更多/不同的事情？

此外，奥列格在他的示例代码中提到`myGrid[0].endReq();`，我在文档中找不到任何提及 - 该功能是否存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T21:10:09.570

如果我理解正确，您只需更改线路

```
datatype: "json", 
```

类似于

```
datatype: isSearchParamEmpty(searchParms) ? "local" : "json", 
```

换句话说，您应该创建网格，`datatype: "local"`而不是`datatype: "json"`在搜索条件为空的情况下。网格将保持空白。

此外，您应该考虑*只创建一次*jqGrid，如果`colDefinitions`并且`colHeaders`对于不同的搜索条件将保持不变。而不是重新创建网格，您只能更改`postData`并调用`trigger("reloadGrid")`.

# python - 从具有多个值的字典中删除一个值

> ID：13571438
> 
> 赞同：0
> 
> 时间：2012-11-26T19:09:16.700
> 
> 标签：python, dictionary

我一直在尝试从 python 字典中的多个值中删除特定项目，但不完全确定如何执行此操作。例如，在字典中：

```
d  = {('hello', 'hi', 'how are you'): 2, ('hi', 'hello', 'how are you'): 1} 
```

我将如何删除“嗨”，以便剩下的就是：

```
d  = {('hello', 'how are you'): 2, ('hello', 'how are you'): 1} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T19:13:22.497

您显然想更改密钥。因此，您只需要使用新键存储相应的值并删除旧键。但是，在您的情况下，创建一个新的 dict 更容易，因为您想修改*每个*项目。

```
d2 = {}
for key, value in d.iteritems():
    key = list(key)
    if 'hi' in key:
        key.remove('hi')
    d2[tuple(key)] = value 
```

`d2`现在包含`{('hello', 'how are you'): 1}`

正如您所看到的，它与您的示例不同，它只包含一个值，因为 dicts 不能包含相同的键两次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T19:13:25.820

您不会在此处获得预期的输出，因为两个键现在相同。因此，在结果字典中只能找到其中一个。

```
In [142]: d  = {('hello', 'hi', 'how are you'): 2, ('hi', 'hello', 'how are you'): 1}

In [143]: {tuple(y for y in x if y!='hi'):d[x] for x in d}
Out[143]: {('hello', 'how are you'): 1} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T19:13:29.673

这应该这样做

```
answer = {}
for k,v in d.iteritems():
    key = tuple(i for i in k if i!='hi')
    answer[key] = v
d = answer 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T19:18:22.390

不确定这是否适合您，但这会创建一个新字典，并将汇总在删除后最终发生冲突的任何键的值`'hi'`（假设这是您想要做的 - 如果不是，请忽略此答案:)）：

```
>>> from collections import defaultdict
>>> new_d = defaultdict(int)
>>> for k, v in d.iteritems():
...   new_d[tuple(i for i in k if i != 'hi')] += v
...
>>> new_d
defaultdict(<type 'int'>, {('hello', 'how are you'): 3}) 
```

这与您的输出不对应，但正如其他人所解释的那样，字典只能有一个特定值的键，因此它合并为一个。

# php - 从多个表数据输入页面填充下拉列表

> ID：13571439
> 
> 赞同：1
> 
> 时间：2012-11-26T19:09:16.733
> 
> 标签：php, mysql, select

我需要在我的数据输入页面中添加另一个下拉菜单，并想出一种在两个表中显示日期的方法，但它在每个表中都加倍，即显示艺术家下拉菜单：

将 N 添加到 X
将 N 添加到 X
空气
Air
Amon Tobin
Amon Tobin
等。

贡献者下拉显示：

乔吹
乔吹
迪克一团
迪克一团
等。

这是我将表格数据翻倍的地方：

```
SELECT artists.id, artists.artists_name, contributors.id, contributors.contributors_name FROM artists, contributors ORDER BY artists.artists_name, contributors.contributors_name"; 
```

这里是上下文：

```
$editFormAction = $_SERVER['PHP_SELF'];
if (isset($_SERVER['QUERY_STRING'])) {
  $editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);
}

if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "form1")) {
$insertSQL = sprintf("INSERT INTO news (artistid, contributorid, title, blog_entry, rating) VALUES (%s, %s, %s, %s, %s)",
                   GetSQLValueString($_POST['artistid'], "text"),
                   GetSQLValueString($_POST['contributorid'], "text"),
                   GetSQLValueString($_POST['title'], "text"),
                   GetSQLValueString($_POST['blog_entry'], "text"),
                   GetSQLValueString($_POST['rating'], "text"));

mysql_select_db($database_em, $em);
$Result1 = mysql_query($insertSQL, $em) or die(mysql_error());

$insertGoTo = "add_post.php";
if (isset($_SERVER['QUERY_STRING'])) {
$insertGoTo .= (strpos($insertGoTo, '?')) ? "&" : "?";
$insertGoTo .= $_SERVER['QUERY_STRING'];
}
header(sprintf("Location: %s", $insertGoTo));
}

mysql_select_db($database_em, $em);
$query_listPosts = "SELECT artists.id, artists.artists_name, contributors.id, contributors.contributors_name FROM artists, contributors ORDER BY artists.artists_name, contributors.contributors_name"; 
$listPosts = mysql_query($query_listPosts, $em) or die(mysql_error());
$row_listPosts = mysql_fetch_assoc($listPosts);
$totalRows_listPosts = mysql_num_rows($listPosts);
?> 
```

这是我在页面中呈现它的方式：

```
<p>
<label for="artistid">Artist:</label>
</p>
<p><select name="artistid">
<option value="0">Not registered</option>
<?php
do {  
?>
<option value="<?php echo $row_listPosts['id']?>"><?php echo $row_listPosts['artists_name']?></option>
<?php
} while ($row_listPosts = mysql_fetch_assoc($listPosts));
$rows = mysql_num_rows($listPosts);
if($rows > 0) {
  mysql_data_seek($listPosts, 0);
  $row_listPosts = mysql_fetch_assoc($listPosts);
}
?>
</select></p>
<p>
<label for="contributorid">Contributor:</label>
</p>
<p><select name="contributorid">
<option value="0">Not registered</option>
<?php
do {  
?>
<option value="<?php echo $row_listPosts['id']?>"><?php echo $row_listPosts['contributors_name']?></option>
<?php
} while ($row_listPosts = mysql_fetch_assoc($listPosts));
$rows = mysql_num_rows($listPosts);
if($rows > 0) {
  mysql_data_seek($listPosts, 0);
  $row_listPosts = mysql_fetch_assoc($listPosts);
}
?>
</select></p> 
```

虽然我现在可以处理这种加倍，但当我向我的数据输入页面添加更多下拉列表时，它会成为一个问题，所以任何想法如何解决这个问题，以便每个下拉只有一个数据实例而不是加倍会不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:30:55.287

这是由您的查询引起的。您将 2 个没有关系的表连接在一起，因此它正在创建多行，匹配`artists`和`contributors`，并且`id`正在合并。

我在[http://sqlfiddle.com/#!2/d7962/2/0创建了这个问题](http://sqlfiddle.com/#!2/d7962/2/0)

这是我的建议-

把1个查询改成2个查询，为了简化代码，把`do-while`循环改成`while()`循环

查询-

```
$query_Artists = "SELECT id, artists_name FROM artists ORDER BY artists_name";
$query_Contributors = "SELECT id,contributors_name FROM contributors ORDER BY contributors_name"; 
$listArtists = mysql_query($query_Artists, $em) or die(mysql_error());
$listContributors = mysql_query($query_Contributors, $em) or die(mysql_error()); 
```

下拉菜单-

```
<p>
<label for="artistid">Artist:</label>
</p>
<p><select name="artistid">
<option value="0">Not registered</option>
<?php
if(mysql_num_rows($listArtists) > 0) {
while ($artist_dropdown = mysql_fetch_assoc($listArtists)) {  
?>
<option value="<?php echo $artist_dropdown['id']?>"><?php echo $artist_dropdown['artists_name']?></option>
<?php
}
}
?>
</select></p>
<p>
<label for="contributorid">Contributor:</label>
</p>
<p><select name="contributorid">
<option value="0">Not registered</option>
<?php
if(mysql_num_rows($listContributors) > 0) {
while ($contributors_dropdown = mysql_fetch_assoc($listContributors)) {  
?>
<option value="<?php echo $contributors_dropdown['id']?>"><?php echo $contributors_dropdown['contributors_name']?></option>
<?php
}
}
?>
</select></p> 
```

# ms-access - 访问变量字段名称

> ID：13571445
> 
> 赞同：3
> 
> 时间：2012-11-26T19:10:14.630
> 
> 标签：ms-access, ms-access-2010

在 MS Access 2010 中，我正在构建一个更新查询（使用查询设计器）。我想在运行时将要更新的列的名称作为变量传递。

我曾尝试编写 SQL 并在 VBA 中运行查询。这似乎是最简单的方法......但是完成更新的 SQL 变得相当混乱。我宁愿在查询生成器 GUI 中执行此操作。是否可以？

到目前为止，我已经尝试在查询生成器中输入字段名称：

```
expr1:[field_name] 
```

尽管 Access 提示我输入“Field_name”，但这会导致“无法更新 'field_name'；字段不可更新。

另外，我尝试了这种方法：

```
Expr1: "'" & [field_name] & "'" 
```

导致 "'" & [field_name] & "'" 不是有效名称；检查标点符号..等

下面是我正在尝试构建的查询的屏幕截图。

![我提出的查询的屏幕截图](../Images/a7180ba2ea6556ce643735d357a1a74c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:41:21.397

Access 的数据库引擎不允许您使用参数作为`UPDATE`语句的目标字段的名称。

如果您尝试使用用户定义的函数而不是参数来提供字段名称，结果将是相同的……不高兴。

似乎数据库引擎在执行 SQL 语句时不会解析对象名称。该限制不仅适用于字段名，也适用于表名。IOW，以下查询将失败，并显示错误消息“*找不到输入表或查询‘给我一个表名’* ”。

```
SELECT *
FROM [give me a table name]; 
```

虽然这与您的情况不完全相同，但我怀疑原因可能是。db 引擎在计划/执行查询时解析对象名称过于有限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T03:52:10.050

也许最好的方法是使用 SQL，构建提示，然后将这些值分配给 VBA 中的变量，然后将变量值添加到 SQL 中。

所以沿着这些思路。您使用更新查询但相同的逻辑

```
Dim SQL as string
dim **FieldName** as string

SQL = "Select [table]![" & Chr(34) & **FieldName** & Chr(34) & "] from ........" 
```

在这里查看[SQL 构建技巧](http://www.baldyweb.com/BuildSQL.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-04T15:01:03.460

我经常使用这种方法 - 我知道这是一个非常古老的帖子，但希望这对某人有所帮助 - 基于大卫所说的：

```
Sub CreateQuery
Dim dbs As DAO.Database
Dim qdf As DAO.QueryDef
Dim strSQL As String
Set dbs = CurrentDb
Set qdf = dbs.CreateQueryDef("NameOfNewQuery")
strSQL = "Select " 'notice the space
strSQL = strSQL & "FROM " 'notice the sapce
strSQL = strSQL & "WHERE;"
qdf.SQL = strSQL
qdf.Close
Set qdf = Nothing
Set dbs = Nothing
End Sub 
```

# c# - Visual Studio - 坚持固定 Windows？

> ID：13571452
> 
> 赞同：26
> 
> 时间：2012-11-26T19:10:57.867
> 
> 标签：c#, user-interface, visual-studio-2012, tabs

无论如何在视觉工作室关闭之间坚持固定窗口？

目前，如果您固定一个窗口，当您关闭visual studio并再次打开它时，该窗口的固定状态已被重置，并再次与所有其他窗口混为一谈。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-14T17:03:51.377

您可以尝试启用此设置（如果当前未选中）：

`Tools -> Options -> Environment -> Tabs and Windows -> Check "Maintain pin status if document is removed from well"`

这解决了我同样的问题。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-07-01T07:24:03.883

我希望这还不算太晚。**我在 VS 2013 中遇到了类似的问题。当我们安装了Productivity Power Tools**插件时，我发现重新启动并运行解决方案后固定选项卡丢失了。

我删除了它，现在固定的标签从那时起就没有丢失。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-18T10:39:41.657

我在 VS 2013 和 Web Essentials Update 3 扩展中遇到了类似的问题。在我禁用它之后它起作用了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-09T13:04:02.643

接受的答案在以前的版本中为我解决了这个问题，但在 VS2017 中，还要确保您没有启用“轻量级解决方案负载”。

要禁用，请右键单击解决方案资源管理器中的解决方案，然后选择“禁用轻量级解决方案加载”（如果可用）（可能在菜单底部）。

我的猜测是在 VS 启动期间尝试恢复 pin 选项卡时，如果项目尚未加载，则无法固定它们。

[（我也在这里](https://stackoverflow.com/a/47202448/2738122)发布了这个答案）

# android - 将 EditText 移动到特定位置

> ID：13571453
> 
> 赞同：0
> 
> 时间：2012-11-26T19:11:06.643
> 
> 标签：android, android-edittext, android-relativelayout

我在 RelativeLayout 中有一个 EditText，我想动态定位它（在运行时），如果可能的话，可以旋转。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:31:13.080

对于重新定位，您可以使用`setTranslationX()`和`setTranslationY()`。供轮换使用`setRotation()`。你可以在这里找到更多信息：http: [//developer.android.com/reference/android/view/View.html](http://developer.android.com/reference/android/view/View.html)

# jsp - 如何在 JSP 上使用嵌套查询字符串？

> ID：13571456
> 
> 赞同：-1
> 
> 时间：2012-11-26T19:11:12.890
> 
> 标签：jsp, scriptlet

我试图将值存储在会话中，但它向我显示“字符串未正确关闭”错误。

我正在使用此代码来存储值：

```
<% session.setAttribute("emailvalue",request.getParameter("<%=request.getQueryString() %>"));
               String str=(String)session.getAttribute("emailvalue"); %> 
```

它是正确的系统税吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T19:19:41.853

代替

```
<% session.setAttribute("emailvalue",request.getParameter("<%=request.getQueryString() %>"));String str=(String)session.getAttribute("emailvalue"); %> 
```

将从 request.getQueryString() 获得的值存储在另一个变量中。您的代码在另一个 jsp java 标记 <%...%> 中有一个 jsp systemout 标记 <%=...%>，jsp 编译器不支持该标记。

而是使代码更简单，使其像下面这样工作

```
<% String queryString = request.getQueryString(); session.setAttribute("emailvalue",queryString ); String str=(String)session.getAttribute("emailvalue");%> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T19:22:08.930

您已经在 scriptlet 中，因此无需`<%=`再次使用即可获得 Java 字符串：

```
<% session.setAttribute("emailvalue", request.getQueryString());
   String str = (String) session.getAttribute("emailvalue"); %> 
```

打电话`request.getParameter(request.getQueryString())`也没有任何意义。

最后，您不应该使用 scriptlet。使用 JSP EL 和 JSTL：

```
<c:set var="emailValue" value="${pageContext.request.queryString}" scope="session"/> 
```

或者更好的是，在控制器中执行此操作（即，发送到 JSP 的首选 MVC 框架的 servlet 或操作），因为它似乎不是视图应该执行的操作。

# jquery - document.click 继续切换菜单

> ID：13571457
> 
> 赞同：1
> 
> 时间：2012-11-26T19:11:16.323
> 
> 标签：jquery, html

我有这个简单的标题菜单，但是当我单击时`#nav li`，它会不断切换 。如果单击文档上的其他位置，我`#nav ul`想隐藏。`#nav ul`

```
 $(document).ready(function() {
      $('#nav li').click(function() {
      $('ul', this).show('fast');
    });

     $(document).click(function() {
        $('ul','#nav li' ).hide('fast');

    });

  }); 
```

这是 Simpe HTML。[http://jsfiddle.net/pMaL5/](http://jsfiddle.net/pMaL5/)

```
 <div id="nav">

    <li style="margin-top: -15">
        <a class="modalbox"  href="#header2_li" style="font-size: 40px;">ADD</a>
        <ul>
        <li>
            <a class="modalbox" href="#inlineheadersend">Settings</a>
        </li>
        <li>
            <a>News</a>
        </li>
    </ul>
    </li>

    <li>
        <span href="#">Messages</span>
        <ul>
            <li>
                <a class="modalbox" href="#inlineheadersend">compose new</a>
            </li>
            <li>
                <a>show messages</a>
            </li>
        </ul>

        <div class="clear"></div>
    </li>

</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T19:15:36.950

事件冒泡，所以当你点击 a 时`li`，你也隐含地点击了`document`（因为`document`它是 的祖先`li`）。您可以通过以下方式防止这种情况`e.stopPropagation()`：

```
$('#nav li').click(function(e) {
  e.stopPropagation(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T20:05:17.397

问题是 pimvdb 提到的。每次点击都会传播到文档（除非您调用`stopPropagation()`）。

提到的 pimvdb 的问题（调用`stopPropagation`）是可能有其他处理程序依赖于您的点击一直到文档。这就是fancybox正在发生的事情

我已经修改了您的 HTML 以使其更有意义并且更易于阅读。您之前的 HTML 是在所有`li`s 上设置处理程序，但它应该只对第一个进行处理。我添加了一些类名以使您的 HTML 更具语义，依赖标签名是不好的做法

```
<div id="nav">
  <ul>
    <li class="add"><a class="modalbox">ADD</a></li>     
    <li>
        <span href="#">Messages</span>
        <ul class="showhide">
            <li><a class="modalbox" href="#inlineheadersend">compose new</a></li>
            <li><a>show messages</a></li>
        </ul>
        <div class="clear"></div>
    </li>
   </ul>
</div>​ 
```

[http://jsfiddle.net/8s6wJ/1/](http://jsfiddle.net/8s6wJ/1/)

以下脚本在不阻止点击传播的情况下执行上述 HTML 所需的操作。

```
$(document).ready(function() {
    $('#nav').click(function() {
        $('.showhide').show('fast');
    });

     $(document).click(function(e) {
         // Only hide if actual element clicked 
         // was not a child of #nav
         if ($(e.target).closest('#nav').length == 0) {
             $('.showhide').hide('fast');
         }
    });
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T20:18:28.697

这是另一种方式，不绑定任何文件：

```
$(document).ready(function() {
    $('#nav').click(function() {
        $('.showhide').show('fast').focus();
    });

    $('.showhide').focusout(function(e) {
         $(this).hide('fast');
    }).focus();
});​ 
```

参见 基于 Juan Mendes 答案的[DEMO](http://jsfiddle.net/8s6wJ/2/)

# c# - 端口意外关闭

> ID：13571460
> 
> 赞同：1
> 
> 时间：2012-11-26T19:11:36.730
> 
> 标签：c#, serial-port

我有一个使用串行端口与嵌入式设备通信的 C# 应用程序。在下面的循环中，它读取整个消息，然后基本上在它进入时对其进行解析。这不是我的代码，但我正在围绕它开发一些东西。

发生的事情是，几秒钟后，我收到一些消息，`port.Read(RxHolder, 0, 1);`说 InvalidOperationException，端口已关闭。该对象存在，并且没有`port.close()`被调用。

如果添加任何重要信息，我正在 Windows 7 64 位计算机上运行 Visual C# 2010 express。

```
if (port.IsOpen)
{
    while (port.BytesToRead > 0)
    {
        // Read one byte
        port.Read(RxHolder, 0, 1);
        // Process it 
        ProcessRxedByte(RxHolder[0]);
    }

} 
```

# javascript - 我可以在我的 .ajax() 请求中使用连接字符串作为 url

> ID：13571461
> 
> 赞同：0
> 
> 时间：2012-11-26T19:11:37.267
> 
> 标签：javascript, ajax, jquery

我正在执行跨域请求，一旦发出第一个请求，我需要检索 ID（并做一些其他事情），然后将 ID 用于下一个请求。

到目前为止，问题在于下一个请求不喜欢串联。这是我的代码，是的，我知道 document.write 应该更改为 console.log() 但是 console.log 不起作用，我可能会在获得当前问题的帮助后问这个问题。问题从第二个 .ajax() 请求开始。

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script >
$(document).ready(function($) {
 // First link out of three
 var url = 'https://www.sciencebase.gov/catalo
/items?parentId=504108e5e4b07a90c5ec62d4&max=60&offset=0&format=jsonp';

$.ajax({
    type: 'GET',
    url: url,
    jsonpCallback: 'getSBJSON',
    contentType: "application/json",
    dataType: 'jsonp',
    success: function(json) {
    for (var i = 36; i < 37; i++) {
        document.write(json.items[i].id);
            var urlId = json.items[i].id;
    }

        var deferUrl = 'https://www.sciencebase.gov/catalog/itemLink/" + urlId 
+"?format=json&max=10';

            $.ajax({
                type: 'GET',
                url: deferUrl,
                jsonpCallback: 'getSBJSON',
                contentType: "application/json",
                dataType: 'jsonp',
                success: function(json) {
                    // Get the next id to use for the next url

                    document.write(deferUrl);

                    $.ajax({
                        type: 'GET',
                        url: 'https://www.sciencebase.gov/catalog
/item/4f4e4b19e4b07f02db6a7f04?format=jsonp',
                        jsonpCallback: 'getSBJSON',
                        contentType: "application/json",
                        dataType: 'jsonp',
                        success: function(json) {
                        document.write(json.title); 
                        },
                        error: function(e) {
                            console.log(e.message);
                        }
                    });
                },
                error: function(e) {
                    console.log(e.message);
                }
            });
    },
    error: function(e) {
        console.log(e.message);
    }
});
});
</script>
</head>
<body>
</body>
</html> 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:14:58.913

```
'https://www.sciencebase.gov/catalog/itemLink/" + urlId 
+"?format=json&max=10'; 
```

应该

```
'https://www.sciencebase.gov/catalog/itemLink/' + urlId 
+'?format=json&max=10'; 
```

你混合单引号和双引号。使用`'srting' + var + 'string'`或`"string" + var + "string"`不混合使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:15:58.813

仅解决您的连接问题..您在那里混合使用单引号和双引号。它们都应该是一致的。

前任：

```
var deferUrl = 'https://www.sciencebase.gov/catalog/itemLink/' + urlId + '?format=json&max=10'; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-26T22:38:43.337

I made a slight change from

```
for (var i = 36; i < 37; i++) {
            var urlId = json.items[i].id;
    }

 var deferUrl = 'https://www.sciencebase.gov/catalog/itemLink/' + 
 urlId + '?format=jsonp&max=10';

$.ajax({
                type: 'GET',
                url: deferUrl,
                jsonpCallback: 'getSBJSON',
                contentType: 'application/json',
                dataType: 'jsonp', 
```

to

```
for (var i = 36; i < 37; i++) {
           var urlId = json.items[i].id;
    }

var deferUrl = urlId;

$.ajax({
                type: 'GET',
                url: 'https://www.sciencebase.gov/catalog/itemLink/' + 
                deferUrl + '?format=jsonp&max=10',
                jsonpCallback: 'getSBJSON',
                contentType: 'application/json',
                dataType: 'jsonp', 
```

and that seemed to do the trick. It didn't like having the concatenation done completely before assigning it to the url.

# google-app-engine - 通过批量导出器/批量上传器下载应用程序引擎 ndb 实体

> ID：13571466
> 
> 赞同：0
> 
> 时间：2012-11-26T19:11:52.873
> 
> 标签：google-app-engine, app-engine-ndb

语境：

我的模型类继承自基类：

```
class BaseModel(ndb.model):
  # commom fields and methods

class SpecificModel(BaseModel):
  # specific fields and methods 
```

问题：

我想使用[appengine bulkuploader 服务](https://developers.google.com/appengine/docs/python/tools/uploadingdata)导出 SpecificModel 实体。

我已经定义了配置文件（data_loader.py）：

```
import sys
sys.path.append('.') ## this is to ensure that it finds the file 'models.py'
from google.appengine.ext import ndb
from google.appengine.tools import bulkloader
from models import *

class SpecificModelExporter(bulkloader.Exporter):
  def __init__(self):
    bulkloader.Exporter.__init__(self, 'SpecificModel',
                                 [('fieldOne', str, None),
                                  ('fieldTwo', str, None)
                                 ])

    exporters = [ SpecificModelExporter ] 
```

我使用以下命令下载数据：

```
 appcfg.py download_data --config_file=data_loader.py --filename=data.csv --kind=SpecificModel --url=http://url.appspot.com/_ah/remote_api 
```

当我尝试下载数据时，出现以下**错误**：

```
google.appengine.ext.db.KindError: No implementation for kind 'SpecificModel' 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T02:47:47.553

看看[源代码](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/tools/bulkloader.py?r=302#949)：

您的模型将通过以下方式`GetImplementationClass`查找

```
implementation_class = db.class_for_kind(kind_or_class_key) 
```

但`db`模型注册表不会包含`ndb`您定义的任何模型。在其中创建了一个类似的注册表，并且在那里找不到您定义的`ndb.Model._kind_map`任何模型。`db`

**注意：**据[我所知](http://code.google.com/p/googleappengine/issues/list?q=bulkloader%20ndb)，没有相应的问题/功能请求请求`ndb`批量加载程序或等效`ndb`批量加载程序的支持。可能值得提交一份并由其主演。

# r - 可以在R中并行执行readLines吗

> ID：13571467
> 
> 赞同：6
> 
> 时间：2012-11-26T19:11:53.780
> 
> 标签：r, parallel-processing

是否可以在与 R 并行的单个多核机器上迭代单个文本文件？对于上下文，文本文件介于 250-400MB 的 JSON 输出之间。

编辑：

这是我一直在玩的一些代码示例。令我惊讶的是，并行处理并没有获胜——只是基本的 lapply——但这可能是由于我的用户错误。此外，当我试图读取大量大文件时，我的机器卡住了。

```
## test on first 100 rows of 1 twitter file
library(rjson)
library(parallel)
library(foreach)
library(plyr)
N = 100
library(rbenchmark)
mc.cores <- detectCores()
benchmark(lapply(readLines(FILE, n=N, warn=FALSE), fromJSON),
          llply(readLines(FILE, n=N, warn=FALSE), fromJSON),
          mclapply(readLines(FILE, n=N, warn=FALSE), fromJSON),
          mclapply(readLines(FILE, n=N, warn=FALSE), fromJSON, 
                   mc.cores=mc.cores),
          foreach(x=readLines(FILE, n=N, warn=FALSE)) %do% fromJSON(x),
          replications=100) 
```

这是第二个代码示例

```
parseData <- function(x) {
  x <- tryCatch(fromJSON(x), 
                error=function(e) return(list())
                )
  ## need to do a test to see if valid data, if so ,save out the files
  if (!is.null(x$id_str)) {
    x$created_at <- strptime(x$created_at,"%a %b %e %H:%M:%S %z %Y")
    fname <- paste("rdata/",
                   format(x$created_at, "%m"),
                   format(x$created_at, "%d"),
                   format(x$created_at, "%Y"),
                   "_",
                   x$id_str,
                   sep="")
    saveRDS(x, fname)
    rm(x, fname)
    gc(verbose=FALSE)
  }
}

t3 <- system.time(lapply(readLines(FILES[1], n=-1, warn=FALSE), parseData)) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T19:20:04.240

答案取决于实际问题是什么：并行读取文件，或并行处理文件。

# 并行阅读

您可以将 JSON 文件拆分为多个输入文件并并行读取它们，例如使用`plyr`与并行后端相结合的函数：

```
result = ldply(list.files(pattern = ".json"), readJSON, .parallel = TRUE) 
```

注册后端可能可以使用`parallel`现在集成在基础 R 中的包来完成。或者您可以使用该`doSNOW`包，有关详细信息，请参阅[我的博客上的这篇文章](http://www.numbertheory.nl/2011/11/14/parallelization-using-plyr-loading-objects-and-packages-into-worker-nodes/)。

# 并行处理

在这种情况下，最好的办法是将整个数据集读入字符向量，拆分数据，然后使用并行后端与`plyr`函数等结合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T19:14:26.563

`readLines()`由于非并行文件系统 IO 的性质，可能不会。当然，如果您使用并行 NFS 或类似 HDFS 的东西，则此限制将不适用。`readLine()`但是假设您使用的是“标准”架构，那么并行化您的调用是不可行的。

您最好的选择可能是读入整个文件，因为 <500MB 可能适合内存，然后在您已经读入对象后并行处理。

# java - Win7/AMD 上的 Java 程序

> ID：13571468
> 
> 赞同：1
> 
> 时间：2012-11-26T19:11:54.640
> 
> 标签：java, windows, x86-64

我有一个执行多个文件 I/O 的 Java 程序。运行良好并在 X86/Win7-64b 上编译。确切的 .jar 被复制到 AMD/Win7-64b 并做一些奇怪的事情，比如无法打开流或直到结束才读取。

在相同的操作系统但不同的处理器架构上运行时，Java 执行是否会出现任何问题？

两者都有 Java 版本 1.7.0_09

对于记录：

问题是在我的程序中使用 JNI 桥的 2 个 Win7 安装中的 DLL 略有不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:17:20.937

如果是这样，您可以轻松地自行解决。启动程序时请注意以下事项：

1.  您是从 64 位 cmd.exe shell 还是 32 位 SYSWOW cmd.exe shell 执行 java？
2.  您的 JAVA_HOME 是指向 32 位还是 64 位 java？
3.  您的 PATH 应设置为 PATH=%JAVA_HOME%\bin;%PATH%

如果这不能提示您，那么关闭您的流或其他东西可能只是一个问题。我听说 JDK1.7 中的 File-IO 库发生了变化……您是在使用较新的语法还是仍在使用较旧的 JDK1.6 传统读取文件？

# oracle - 将 PL/SQL 中的数据与我要比较的输入进行比较

> ID：13571474
> 
> 赞同：0
> 
> 时间：2012-11-26T19:12:15.393
> 
> 标签：oracle, plsql

我喜欢创建一个 PLSQL PROCEDURE 来验证 DRIVER 和 MECHANIC 中不存在 EMPLOYEE 的数据。

我创建了 1 条记录进行测试。但是，当我使用不是我为测试而创建的记录运行 EXEC Verify(2) 时，它仍然会显示我不喜欢验证的测试记录。

我喜欢使用我选择运行 EMPLOYEE 比较的一组 EMPLOYEE.E# 来执行 PROCEDURE，但在 DRIVER 和 MECHANIC 中不存在。

这是我创建的 PLSQL。

```
CREATE OR REPLACE PROCEDURE Verify(enum IN EMPLOYEE.E#%TYPE) IS
eNo DRIVER.E#%TYPE;
eName EMPLOYEE.NAME%TYPE;

CURSOR c1 IS
    SELECT DRIVER.E#, EMPLOYEE.NAME
    FROM DRIVER
    INNER JOIN EMPLOYEE
    ON EMPLOYEE.E# = DRIVER.E#
    WHERE
    EXISTS (SELECT * FROM MECHANIC WHERE DRIVER.E# = MECHANIC.E#);

BEGIN   
    OPEN c1;
    FETCH c1 into eNo, eName;
    IF c1%NOTFOUND THEN
        CLOSE c1;               
        DBMS_OUTPUT.PUT_LINE('No Records Found');

    ELSE
        CLOSE c1;           
        DBMS_OUTPUT.PUT_LINE('E#| NAME');
        FOR EmpRecord IN c1
        LOOP
          DBMS_OUTPUT.PUT_LINE(EmpRecord.E# || ' | ' || EmpRecord.NAME || ' is in                   
              driver and mechanic.');
        END LOOP;
    END IF;

END;
/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:32:24.160

试试这个代码
`CURSOR c1 IS`
`SELECT EMPLOYEE.E# , EMPLOYEE.NAME FROM EMPLOYEE WHERE EMPLOYEE.E#=enum AND NOT EXISTS (SELECT 'x' FROM MECHANIC a,DRIVER b WHERE a.E# = b.E# and a.E#=EMPLOYEE.#E);`
我还没有测试过这个，但我希望它有帮助。

# iphone - ALAsset 图像问题

> ID：13571475
> 
> 赞同：1
> 
> 时间：2012-11-26T19:12:20.713
> 
> 标签：iphone, xcode

我的代码分为两部分：

第一个是我的表格视图的“cellForRowAtIndexPath”方法。在这个表格视图中，我应该在每个单元格中显示 3 个按钮，每个按钮都是不同的图像。图像位于 NSMutableArray 中，称为“photosArray”。它看起来像这样。

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    if (photosArray.count > 0) {
        for (int i = 0; i < 3; i++) {
            if (photosArray.count > photoCounter) {

                //position the UiButtons in the scrollView
                CGRect frame = CGRectMake((i*100) + 30, 5, 60, 60);

                //Create the UIbuttons
                UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
                [button setTag:i];
                [button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
                button.frame = frame;
                button.layer.borderWidth = 2;
                button.layer.cornerRadius = 5;
                button.clipsToBounds = YES;

                //Add images to the button

                NSLog(@"PhotosArray count is: %d",photosArray.count);
                if ([[photosArray objectAtIndex:0] isKindOfClass:[UIImage class]]) {
                    NSLog(@"UIImage class true");
                }
                if ([[photosArray objectAtIndex:0] isMemberOfClass:[UIImage class]]) {
                    NSLog(@"UIImage class true");
                }

                UIImage *btnImg = [self.photosArray objectAtIndex:photoCounter];
                //UIImage *btnImg2 = [UIImage imageNamed:@"GameOver"];
                photoCounter++;

                [button setBackgroundImage:btnImg forState:UIControlStateNormal];

                [cell.contentView addSubview:button];
            }
        }
    }else{
        UILabel *noImages = [[UILabel alloc] initWithFrame:CGRectMake(0, 25, 320, 20)];
        noImages.text = @"No images";
        noImages.textAlignment = NSTextAlignmentCenter;
        [cell.contentView addSubview:noImages];
    }

    return cell;
} 
```

第二部分是我将图片加载到“photosArray”中的地方。我正在使用 WSAssetPicker 从我的资产库中加载多张照片。这是代码：

```
- (void)assetPickerController:(WSAssetPickerController *)sender didFinishPickingMediaWithAssets:(NSArray *)assets
{
    // Dismiss the WSAssetPickerController.
    [self dismissViewControllerAnimated:YES completion:^{

    arep = [[ALAssetRepresentation alloc] init];

        for (ALAsset *asset in assets) {            
            UIImage *imageA = [[UIImage alloc] initWithCGImage:asset.defaultRepresentation.fullScreenImage];

            [self.photosArray addObject:imageA];
        }
        NSLog(@"%d",photosArray.count);

        photoCounter = 0;

        [self.tableView reloadData];
    }];
} 
```

现在对于这个问题，创建的按钮中没有图像。我只得到一个带有边框和圆角的透明按钮。

这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:59:36.863

最近引起我注意的是，我从自述文件（现已更新）中省略了一个重要的部分。

`dismissViewControllerAnimated:completion:`如果您在完成块中访问 ALAsset 对象，则必须持有 WSAssetPickerController 的强引用。

如果您在调用选择器控制器之前没有对选择器控制器进行强引用，`dismissViewControllerAnimated:completion:`则将在执行完成块之前释放 ALAssetsLibrary（在 WSAssetPicker 代码中内部使用）在您尝试访问 ALAssets 之前被释放在委托方法`assets`中传递的数组。`assetPickerController:didFinishPickingMediaWithAssets:`

如果 ALAssetsLibrary 被释放，则 ALAssetsLibrary 拥有的 ALAssets 将过期并且调用`asset.defaultRepresentation.fullScreenImage`将返回 null。

以下将在关闭选取器控制器的视图时保留 ALAssetsLibrary：

```
- (void)assetPickerController:(WSAssetPickerController *)sender didFinishPickingMediaWithAssets:(NSArray *)assets
{
    // Hang on to the picker to avoid ALAssetsLibrary from being released.
    self.picker = sender;

    __block id weakSelf = self; 
    // Note: Instead of `id` you could specify the class of `self` order to access properties with dot notation.

    // Dismiss the WSAssetPickerController.
    [self dismissViewControllerAnimated:YES completion:^{

        // Do something with the assets here.

        // Release the picker.
        [weakSelf setPicker:nil];
    }];
} 
```

另一种方法是在调用之前处理 ALAssets 数组`dismissViewControllerAnimated:completion:`，但这可能会导致选择器控制器的解除延迟，从而导致糟糕的用户体验。

# c# - 通过 JSON.Net 分解 JSON 中的对象列表

> ID：13571478
> 
> 赞同：2
> 
> 时间：2012-11-26T19:12:30.763
> 
> 标签：c#, json.net

我正在构建一个服务器仪表板应用程序。我想从每台服务器中获取磁盘列表并创建一个显示每个服务器使用值的列表。

这是我们要返回的 JSON 示例...

```
 {"server":"webster","disks":[ {"use": "91%", "used": "16G", "mount": "/", "free": "1.6G", "device": "/dev/mapper/vg_f12-lv_root", "total": "18G", "type": "ext4"} ,
{"use": "0%", "used": "0", "mount": "/dev/shm", "free": "500M", "device": "tmpfs", "total": "500M", "type": "tmpfs"} ,
{"use": "22%", "used": "40M", "mount": "/boot", "free": "145M", "device": "/dev/sda1", "total": "194M", "type": "ext4"} ,
{"use": "47%", "used": "52G", "mount": "/rsync", "free": "61G", "device": "/dev/sdb1", "total": "119G", "type": "ext3"} ]} 
```

我用 C# 代码做到了这一点：

```
 WebClient c = new WebClient();
            var data = c.DownloadString("http://192.0.0.40:8000/cgi-bin/df.py");
            JObject o = JObject.Parse(data);
            string serv = o["server"].Select(s => (string)s).ToString();
            lblJson.Text = serv; 
```

但是我似乎无法将“磁盘”提取到可以插入列表视图的任何有意义的东西中。我尝试将其注入 IList，但它总是崩溃或给我一些来自 Intellisense 的粗鲁评论。

我确实为此构建了一个类，但还没有弄清楚如何将信息移植到其中。作为参考，它在这里：

```
public class drive
    {
        public string Usage;
        public string usedSpace;
        public string Mount;
        public string freeSpace;
        public string Device;
        public string Total;
        public string Type;
    } 
```

注意：JSON 的来源是 Linux 服务器。Windows 服务器最终将以不同的格式提供数据。

然后我们有 VMWare，但我稍后会继续讨论。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T19:31:56.343

```
var jsonObj = JsonConvert.DeserializeObject<RootObject>(json);

public class RootObject
{
    [JsonProperty("server")]
    public string Server;
    [JsonProperty("disks")]
    public List<Drive> Disks;
}

public class Drive
{
    [JsonProperty("use")]
    public string Usage;
    [JsonProperty("used")]
    public string usedSpace;
    [JsonProperty("mount")]
    public string Mount;
    [JsonProperty("free")]
    public string freeSpace;
    [JsonProperty("device")]
    public string Device;
    [JsonProperty("total")]
    public string Total;
    [JsonProperty("type")]
    public string Type;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T19:30:01.040

可能有更好的方法来做到这一点，但使用提供的`drive`类，以下工作可以反序列化您提供的 JSON：

```
JObject o = JObject.Parse(data);
List<drive> drives = new List<drive>();
string server = (string)o["server"];
foreach (var d in o["disks"].Children())
{
    drives.Add(new drive()
    {
        Usage = (string)d["use"],
        usedSpace = (string)d["used"],
        Mount = (string)d["mount"],
        freeSpace = (string)d["free"],
        Device = (string)d["device"],
        Total = (string)d["total"],
        Type = (string)d["type"]
    });
} 
```

# asp.net-mvc-3 - MVC 3 控制器上的单元测试为结果返回 null，但我可以在即时窗口中看到它们

> ID：13571479
> 
> 赞同：5
> 
> 时间：2012-11-26T19:12:43.963
> 
> 标签：asp.net-mvc-3, unit-testing

我是 MVC 和单元测试的新手。我正在使用 Visual Studio 单元测试框架来测试产品控制器。控制器在实际网站上工作，但在单元测试中总是返回 null。我已经切换关键字，例如 ViewResult 或模型名称，但它们都不起作用，因为控制器总是返回 null。然后我设置断点并开始调试测试代码。当我在即时窗口中对其进行测试时，它具有价值。

我在这里想念什么？

我在此 URL 上有一个屏幕截图：http: [//i.imgur.com/XBmoh.png](http://i.imgur.com/XBmoh.png) 在屏幕截图中，您可以看到模型从控制器成功传递的即时窗口，P4 P5 存储在结果中。它只是在 UnitTest 中不起作用。

列表代码非常简单，在网站上运行良好。这是代码

```
 public int PageSize = 4;
    private IProductRepository repository;

    public ProductController(IProductRepository productRepository)
    {
        repository = productRepository;
    }

    public ViewResult List(int page=1)
    {
        ProductsListViewModel viewModel = new ProductsListViewModel
        {
            Products = repository.Products
            .OrderBy(p => p.ProductID)
            .Skip((page - 1) * PageSize)
            .Take(PageSize).AsEnumerable(),
            PagingInfo = new PagingInfo
            {
                CurrentPage = page,
                ItemsPerPage = PageSize,
                TotalItems = repository.Products.Count()
            }
        };

        return View(viewModel);
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T15:59:48.793

之前遇到过这个问题，您的项目中没有使用相同版本的 System.Web.Mvc。您必须在主项目和单元测试项目中引用相同版本的 System.Web.Mvc。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:21:25.593

我注意到在您的单元测试中您两次调用控制器操作......这可能会产生一些意想不到的后果？

试试怎么样：

```
//Action
ProductionsListViewModel result = (ProductsListViewModel)controller.List(2).Model;
Product prod = result.Products.ToArray(); 
```

# css - 是否从 CSS 背景和边框模块中删除了border-*-image？

> ID：13571480
> 
> 赞同：2
> 
> 时间：2012-11-26T19:12:44.630
> 
> 标签：css

*在最新版本的CSS 背景和边框模块 Level 3*中似乎找不到对这些属性的任何引用：

*   边框顶部图像，边框右图像，边框底部图像，边框左图像
*   边框顶部左图像，边框顶部右侧图像，边框底部右侧图像，边框底部左侧图像
*   边框角图像

我能找到的关于这些属性的最后一个参考是在*W3C 工作草案 7 November 2002*中。如果这些属性被删除，是否意味着浏览器将停止支持它们，这意味着我应该停止使用它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T20:40:18.307

正确，这些属性已被删除并被替换为[border-image](https://developer.mozilla.org/en-US/docs/CSS/border-image)。 `border-image`将 4 个边、4 个角和背景图像组合到一个文件中，这对于减少 HTTP 请求非常有用。

浏览器最终可能会停止支持它们；很难预测每个浏览器供应商将来会做什么。最佳实践当然是坚持规范中的属性，所以如果是我，我会进行升级。

# c# - 从 Main 方法/在 MonoDevelop 中运行 XUnit.Net 测试

> ID：13571490
> 
> 赞同：3
> 
> 时间：2012-11-26T19:13:27.240
> 
> 标签：c#, unit-testing, monodevelop, xunit, xunit.net

我正在尝试使用 xUnit.net 来测试我在 OSX 上用 Mono 编写的项目。我想要在 MonoDevelop 中运行测试的好方法，或者至少是一种创建测试套件并从项目的主要方法运行这些测试的方法。有没有人试过这样做？我记得在 NUnit 中我可以创建测试套件并自己运行它们，但我无法弄清楚如何在 xUnit.net 中进行等效操作。

让我知道是否有人找到了一种无需在 xUnit.net 中使用运行器即可运行测试的好方法，或者是在 OSX MonoDevelop 中运行测试的更好方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T08:01:14.303

您可以使用 xunit gui 运行您的测试（从终端使用 mono xunit.gui.flavor） - 我不知道 MonoDevelop 的 xunit 插件可以将 xunit 测试运行器集成到 MonoDevelop IDE 中（另一个参考：[http:// xunit.codeplex.com/discussions/439410](http://xunit.codeplex.com/discussions/439410)）。

要调试单元测试，您可以将调试器附加到 xunit gui。为了使这更简单，您可以自定义项目运行配置：[http ://www.grumpydev.com/2011/06/30/debugging-xunit-tests-using-monodevelop/](http://www.grumpydev.com/2011/06/30/debugging-xunit-tests-using-monodevelop/)

这是您必须做出的决定，您是想跳过几个环节来使用 xunit 还是只使用与平台良好集成的 NUnit。

# reporting-services - 折线图中 RunningValue 中的无效范围参数

> ID：13571498
> 
> 赞同：0
> 
> 时间：2012-11-26T19:13:59.110
> 
> 标签：reporting-services

我这辈子都想不通。我在 SSRS 中有一个表，其数据如下所示：

```
days   P  
0      0.99  
26     0.98  
57     1  
97     0.97  
99     0.99 
```

我想要做的是绘制 P 中值的运行乘积。我可以通过计算以下值将它们放在表中：

```
=exp(RunningValue(Fields!P.Value, Sum, "data")) 
```

这很好用。但是，当我尝试对其进行散点图时，我的图中没有显示任何内容。

对于我的价值，我有：

```
X: =Fields!d.Value  
Y: =exp(RunningValue(Fields!P.Value, Sum, "data")) 
```

我尝试的任何类别或系列值似乎都打破了情节，给了我对以下错误的一些变化：

> 图表“chart1”的 DataPoint 表达式具有对 RunningValue、RowNumber 或 Previous 无效的范围参数。范围参数必须设置为字符串常量，该字符串常量等于矩阵“chart1”中包含组的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:21:16.993

我最近没有尝试过，但旧版本的 Reporting Services 不允许在图表中使用运行总计。

但是，像大多数事情一样，您可以使用 SQL 来伪造它：

```
SELECT Detail.days, MIN(Detail.P) AS P, SUM(RunTotal.P) AS PRunTotal
FROM MyTable AS Detail 
INNER JOIN MyTable AS RunTotal ON RunTotal.days <= Detail.days
GROUP BY Detail.days
ORDER BY Detail.days 
```

# php - 从 PHP 变量中的 GeoLocation 访问用户 lat/lng

> ID：13571499
> 
> 赞同：0
> 
> 时间：2012-11-26T19:13:58.420
> 
> 标签：php, html, geolocation

我正在使用 PHP/MySQL 根据与给定 lat/lng 的距离返回存储位置。

我目前正在使用硬编码的纬度/经度位置，但我想通过浏览器地理位置或地理编码文本框或其他方式存储用户位置。

是否可以使用 HTML5 GeoLocation，然后将 lat/lng 作为 PHP 变量访问，以便我可以将它们传递给 MySQL？我有我的 php/mysql 工作，我只是不确定如何获取用户位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:21:17.837

您将需要使用 ajax 将数据传递给 php。

你可以看看jQuery的ajax库： [http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

或者在 ajax 教程中： [http ://www.w3schools.com/ajax/default.asp](http://www.w3schools.com/ajax/default.asp)

# java - 仅编组选定的字段，使用 JAXB

> ID：13571506
> 
> 赞同：5
> 
> 时间：2012-11-26T19:14:31.310
> 
> 标签：java, xml, jaxb, marshalling

我正在使用 JAXB 将 java 对象编组为 XML。我面临的问题是并非 java 对象实例的所有成员变量都需要编组 XML。例如，我完整的 XML 文档应该看起来像 -

```
<Disk>
  <status>attached</status>
  <size>10000000000</size>
  <freeSpace>25600000<freeSpace>
  <id>MI45563PO</id>
</Disk> 
```

但是在更新的情况下，只有选定的属性会改变，并且只有改变的属性应该是编组 XML 的一部分。就像“状态”属性可以更改为“分离”一样，在这种情况下，编组的 XML 应该如下所示 -

```
<Disk>
  <status>detached</status>
</Disk> 
```

或者，在“freeSpace”更改的情况下，XML 应该看起来像 -

```
<Disk>
  <freeSpace>20000000<freeSpace>
</Disk> 
```

**我的问题：**将未更改的字段定义为 null（因此将所有原始类型定义为包装类变量，如 Integer、Boolean 等）是获得所需结果的唯一解决方案吗？或者，在 JAXB 中是否有任何方法可以指定选定的字段，这些字段应编组为结果 XML，其余字段应被忽略。

请注意，需要忽略和需要包含的字段集在任何时候都不是固定的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T21:02:25.613

如果您想拥有一个类的几个视图，您应该为每个视图创建[装饰器类。](http://en.wikipedia.org/wiki/Decorator_pattern)示例源代码：

```
import javax.xml.bind.JAXBContext;
import javax.xml.bind.Marshaller;
import javax.xml.bind.annotation.XmlRootElement;

public class Program {

    public static void main(String[] args) throws Exception {
        JAXBContext context = JAXBContext.newInstance(Disk.class,
                OnlyDiskStatusDecorator.class, OnlyDiskFreeSpaceDecorator.class);
        Marshaller m = context.createMarshaller();
        m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);

        Disk disk = new Disk();
        disk.setStatus("attached");
        disk.setSize(10000000000L);
        disk.setFreeSpace(25600000L);
        disk.setId("MI45563PO");

        m.marshal(disk, System.out);
        m.marshal(new OnlyDiskStatusDecorator(disk), System.out);
        m.marshal(new OnlyDiskFreeSpaceDecorator(disk), System.out);
    }

}

@XmlRootElement
class Disk {
    private String status;
    private long size;
    private long freeSpace;
    private String id;

    public String getStatus() {
        return status;
    }

    public void setStatus(String status) {
        this.status = status;
    }

    public long getSize() {
        return size;
    }

    public void setSize(long size) {
        this.size = size;
    }

    public long getFreeSpace() {
        return freeSpace;
    }

    public void setFreeSpace(long freeSpace) {
        this.freeSpace = freeSpace;
    }

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    @Override
    public String toString() {
        return "Disk [status=" + status + ", size=" + size + ", freeSpace="
                + freeSpace + ", id=" + id + "]";
    }
}

@XmlRootElement(name = "Disk")
class OnlyDiskStatusDecorator {
    private Disk disk;

    public OnlyDiskStatusDecorator() {
    }

    public OnlyDiskStatusDecorator(Disk disk) {
        this.disk = disk;
    }

    public String getStatus() {
        return disk.getStatus();
    }

    public void setStatus(String status) {
    }
}

@XmlRootElement(name = "Disk")
class OnlyDiskFreeSpaceDecorator {
    private Disk disk;

    public OnlyDiskFreeSpaceDecorator() {
    }

    public OnlyDiskFreeSpaceDecorator(Disk disk) {
        this.disk = disk;
    }

    public long getFreeSpace() {
        return disk.getFreeSpace();
    }

    public void setFreeSpace(long freeSpace) {
    }
} 
```

上面的示例打印：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<disk>
    <freeSpace>25600000</freeSpace>
    <id>MI45563PO</id>
    <size>10000000000</size>
    <status>attached</status>
</disk>
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Disk>
    <status>attached</status>
</Disk>
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Disk>
    <freeSpace>25600000</freeSpace>
</Disk> 
```

我为两个类视图创建了两个装饰器。第一个用于更新状态的装饰器，第二个用于更新 freeSpace 值的装饰器。您也可以为特定的序列化创建[XmlAdapter](http://docs.oracle.com/javaee/5/api/javax/xml/bind/annotation/adapters/XmlAdapter.html)的实现，但我认为它有点复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:19:15.317

您是否考虑过在 XML 上使用[XSL 转换](http://www.w3.org/TR/xslt)然后使用 JAXB？

我也遇到过类似的情况，我有大约 3000 个 JAXB DTO！我将这些减少到一个可管理的数字，28。

查看 w3schools 上的[教程](http://www.w3schools.com/xsl/)。

# javascript - 从 PHP foreach 循环中删除最后一个逗号

> ID：13571507
> 
> 赞同：4
> 
> 时间：2012-11-26T19:14:32.090
> 
> 标签：javascript, php

我想知道如何在 javascript 中运行的 PHP 脚本中删除这个 foreach 循环中的尾随逗号。

```
<html>                                                                                                                                                                              
      <head>                                                                                                                                                                            
    <script type='text/javascript' src='https://www.google.com/jsapi'></script>                                                                                                     
    <script type='text/javascript'>                                                                                                                                                 
     google.load('visualization', '1', {'packages': ['geochart']});                                                                                                                 
     google.setOnLoadCallback(drawRegionsMap);                                                                                                                                      

  function drawRegionsMap() {
    var data = google.visualization.arrayToDataTable([
    ['Country','Blocks'],
  <?php
    foreach ($bans as $key => $value)
                print"['$key', $value],\n";
    ?>
    ]);

    var options = {
                    backgroundColor : '#555555',
                    colors : ['#FFFF00', '#FF0000']
                    };

    var chart = new google.visualization.GeoChart(document.getElementById('chart_div'));
    chart.draw(data, options);
};
</script>
  </head>
  <body>
<div id="chart_div" style="width: 900px; height: 500px;"></div>
  </body>
</html> 
```

这会导致一个问题，因为我得到一个尾随逗号，我尝试了 implode 方法和 rtrim 方法，但这些方法似乎都没有工作（我也从未使用过这些函数，所以我可能做错了）

我的内爆方法是：

```
<?php
    $resultstr = array();
    foreach ($bans as $key => $value)
                print"['$key', $value],\n";
  $resultstr = implode(",", $resultstr);
    ?> 
```

我的 rtrim 方法是：

```
 <?php
  $resultstr = array();
    foreach ($bans as $key => $value)
                print"['$key', $value],\n";
  echo rtrim($resultstr, ",");
    ?> 
```

编译后看起来像这样：

```
 <html> 
```

google.load('可视化', '1', {'packages': ['geochart']});
google.setOnLoadCallback(drawRegionsMap);

```
 function drawRegionsMap() {
    var data = google.visualization.arrayToDataTable([
    ['Country','Blocks'],
  ['Japan', 11],
['United States', 45],
['Argentina', 1],
         ]);

    var options = {
                    backgroundColor : '#555555',
                    colors : ['#FFFF00', '#FF0000']
                    };

    var chart = new google.visualization.GeoChart(document.getElementById('chart_div'));
    chart.draw(data, options);
    };
    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T19:20:55.657

您应该做的而不是事后修剪字符串根本不会生成尾随逗号：

```
$not_first = false;
foreach ($bans as $key => $value) {
    if ($not_first) {
        print(", ");
    }
    $not_first = true;
    print "['$key', $value]\n";
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T19:25:53.037

这可能是另一种方法：

```
var data = google.visualization.arrayToDataTable(<?php
$table = array(array('Country', 'Blocks'));
foreach($bans as $key => $value) {
    $table[] = array($key, $value);
}
echo json_encode($table);
?>); 
```

我经常使用 json_encode，所以我不必担心转义所有值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T19:16:20.280

你错过了一些东西：

```
echo rtrim($resultstr, ","); 
```

你也可以这样做：

```
echo substr($resultstr, 0, -1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T19:28:09.903

您可以创建一个包含这些`[key, value]`片段的数组，然后将它们粘合`implode`：

**PHP**

```
<?php
$arr = array();
$arr['key1'] = 'val1';
$arr['key2'] = 'val2';
$arr['key3'] = 'val3';

function PrepareValues(&$item, $key) {
    $item = "['$key', $item]";
}
array_walk_recursive($arr, "PrepareValues");
$resultstr = implode(",\n", $arr);
print($resultstr);
?> 
```

**输出**

```
['key1', val1],
['key2', val2],
['key3', val3] 
```

# arrays - 将图像文件中的值插入二维数组

> ID：13571510
> 
> 赞同：1
> 
> 时间：2012-11-26T19:14:41.447
> 
> 标签：arrays, visual-c++

我必须读取一个文件并将其值放入一个数组中才能计算图像的噪声水平。我可以在我的程序的所有后面部分中，我只是不知道如何将值插入到数组中。

我必须读取 10 个图像文件并将它们的所有像素值（其中 40000 个）放入同一个表中以便稍后对它们进行排序。像素将被读取为字符，这是我到目前为止所写的。

```
#include <iostream>
#include <string>
#include <cmath>
#include <fstream>

using namespace std;

int main()
{
 ifstream f1;
 string entree;
 char pixel;
 unsigned char i = 0;
 unsigned char a[10][40000];       // declaration du table 40000 valeur

 while ( i <= 10)
 {

    cout << "Nom du fichier source :"; cin >> entree;
    f1.open(entree.c_str(), ios::binary);
    for (int j=0; j < 40000; j++)
    {
        f1.get(pixel);
        a[i][j] = pixel;

    }
    i++;

 }
 return 0;
} 
```

任何帮助将不胜感激，谢谢。

# scroll - 如何固定 div 的高度并为其添加滚动条？

> ID：13571517
> 
> 赞同：1
> 
> 时间：2012-11-26T19:15:05.343
> 
> 标签：scroll, scrollbar

我正在尝试修复“正文”div 的高度并添加一个滚动条，以便所有内容都保持在一页上。

我是这方面的初学者，并尝试在不同的网站上遵循一系列不同的说明，但没有任何效果，只是希望一些非常好的人为我分解它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:20:14.670

您必须以这种方式设置 div 的样式：

```
<div style="width:191px; height:190px; overflow:auto;" ..>text</div> 
```

如果 div 内容太大，属性“溢出”设置滚动条。

# asp.net - 如何在 Visual Studio 中动态重新加载文件？

> ID：13571518
> 
> 赞同：0
> 
> 时间：2012-11-26T19:15:07.873
> 
> 标签：asp.net, c#-4.0

我在 Visual Studio 的解决方案中包含了一个 xml 文件。我在运行时在我的文件中添加新节点。但是当我一直收到这条消息时`The file has been modified out the source editor. Do you want to reload the file?`，有没有什么解决方案可以在我的代码中动态重新加载文件而不是显示这条消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:21:59.063

据我所知，没有。但是如果你不想看到它，我的建议是在运行应用程序时关闭 VS 上的 xml，并在完成后打开它。它将使您免于多次单击警报消息上的“是”。

# javascript - 加载时清空所有文本区域

> ID：13571522
> 
> 赞同：1
> 
> 时间：2012-11-26T19:15:23.357
> 
> 标签：javascript, jquery, html, xml

我正在做一个 XSL 转换，`<textarea>`在页面上输出不同的 html。输出为 XML 的问题之一是它只是自动关闭。

```
<xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/> 
```

为了避免自动关闭`<textarea>`，我在 XSL 中添加了一个空格。所以最终的输出变成：

```
<textarea id="id_Message" > </textarea> 
```

我要做的就是在页面加载后从页面上的所有内容中删除该空白空间。任何解决此问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T19:16:31.940

如果您的所有 textArea 都可以清空，请执行

```
$(function(){$('textarea').val('')}); 
```

如果你只想清空那些没有实际内容的，你可以这样做：

```
$(function(){
    $('textarea').each(function(){
        if ($(this).val().trim()=='') $(this).val('');
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T19:17:06.610

`.val('')` 将清除 textArea 内的内容

```
$(function() {
   $('textarea').val('');
}); 
```

如果你只想清除空的 TextAreas 你可以试试这个

```
 $(function() {
      $('textarea').each(function(){
         if(this.value == ''){
            this.value = '';
         }
      });
  }); 
```

**[检查小提琴](http://jsfiddle.net/56DgC/)**

# jquery - 通过jquery从yii中的json获取数据

> ID：13571525
> 
> 赞同：0
> 
> 时间：2012-11-26T19:15:33.457
> 
> 标签：jquery, json, yii

我的 json 数据看起来像这个
`[{"id":"299","calendar_id":"49","event_date":"2012-11-27","event_start":"2012-11-27 00:39:00","event_end":"2012-11-27 00:39:00","title":"description goes here","description":"","planned":"0","type_class":"General","type_data":"{\"frequency_type\":\"1\",\"frequency_x\":null,\"type\":\"14\",\"status\":\"23\"}"` Ajax 请求

```
$.ajax({
        url: "<?php echo $this->createUrl('path/to/file')?>",
        dataType: 'json',
        cache: false,
        success: function(data) {
            var out = "<span>";
            $(data).each(function(){
                out += this.title;
            });
            out += "</span>";
            unplannedList.html(out);
            }
var unplannedList = $('.col ul li'); 
```

这是一个列表，我需要在其中附加显示在顶部的数据。'this' 或 'data' 不起作用。从我粘贴的警报中获取数据的正确方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:26:47.933

不确定您是否要尝试将每个标题都设为一个单独的跨度。或者将所有标题放在一个跨度中。但这里是它应该如何使用[$.each()](http://api.jquery.com/jQuery.each/)函数

```
var out = '';
$.each(data,function(k,v){ // <-- using the callback arguments
    out += '<span>'+v.title+'</span>';
}); 
```

[小提琴](http://jsfiddle.net/wirey00/2CMjL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:18:31.113

您无法以您尝试的方式访问该对象。您需要对当前对象的引用才能访问您的*this*。尝试这样的事情：

```
var self=this; 
```

并在你的回调中使用 self.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T19:20:54.523

而不是`$(data).each(...)`，试试这个：

```
$.each(data, function() {
   out += this.title;
}); 
```

# php - 解析php中的json，json对象和json数组

> ID：13571537
> 
> 赞同：0
> 
> 时间：2012-11-26T19:16:01.593
> 
> 标签：php, json, parsing

> **可能重复：**
> [如何使用 PHP 解析 JSON 字符串](https://stackoverflow.com/questions/5527065/how-to-parse-a-json-string-using-php)

这是我的数据对象

```
{
  "data": {
    "translations": [
      {
        "translatedText": "Hallo Welt"
      },
      {
        "translatedText": "Hallo Berlin"
      }
    ]
  }
} 
```

如何使用 PHP 解析它？

这是一个 jsonObject，其中包含 jsonObject("data")，其中包含 jsonArray，其中包含每个索引处的 jsonObjects，其中包含键/值“translatedText”

这就是我所拥有的和我的假设

```
$jsonResult = json_decode($data);
$translated_text = $jsonResult->data->translations[0]->translatedText;` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:19:21.783

```
$array = json_decode($json_element, true); 
```

制作关联数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:24:13.753

我想这就是它的样子。json_decode 不解析为 PHP 对象，而只是一个数组。

```
$jsonResult = json_decode($data);
$translated_text = $jsonResult['data']['translations'][0]['translatedText']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T19:17:58.567

```
$array = json_decode($json_element); 
```

# javascript - 如何让 Web 应用程序允许拖放文件？

> ID：13571538
> 
> 赞同：0
> 
> 时间：2012-11-26T19:16:01.763
> 
> 标签：javascript, jquery, web-applications

具体来说，我刚刚意识到我可以将文件拖放到我的 gmail 中以将它们添加为附件。我想知道他们是如何做到的，以便可以将文件放入网页并进行处理。

有这种东西的图书馆吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T21:58:29.440

所有最新的桌面浏览器都支持 HTML5 File API（[来源](http://caniuse.com/dragndrop)）。要在不支持它的旧浏览器中获得拖放支持，您需要使用 flash。

如果您想尝试在您的网站上实现 HTML5 拖放，本[教程是一个很好的起点。](http://www.thebuzzmedia.com/html5-drag-and-drop-and-file-api-tutorial/)

# python - 有没有一种简单的便携式方法来使用 python（无 PIL）读取 gif 图像？

> ID：13571539
> 
> 赞同：3
> 
> 时间：2012-11-26T19:16:03.387
> 
> 标签：python, gif

我在另一个应用程序（CINEMA 4D）中使用 python 创建一个很好的连接到应用程序内的问题跟踪器（Jira）。这背后的基本原理是让我们的插件用户能够非常轻松地报告和跟踪错误，并自动获得机器规格、屏幕截图或附加场景文件（包括纹理）等内容。

到目前为止，这是一个非常顺利的过程，并且整合进展顺利。我也开始从 Jira 中获取问题优先级、项目、问题类型等的图标，以便显示它们以便更好地概览。要读取图像文件，我正在使用其 python 绑定中可用的 CINEMA 4D 功能。

现在的问题是，来自 Jira 的大多数图标都是 GIF 格式，而 CINEMA 4D SDK 不直接读取 GIF 文件（实际上它确实读取它们，但只是通过后门，因此用户可以加载它们，但我不能通过 Python 或 SDK 使用该功能）。所以我需要另一种方式来读取 GIF 文件。

关于stackoverflow有几个问题是朝着这个方向发展的，但他们似乎都推荐PIL。由于以下几个原因，这感觉不是正确的解决方案：

1.  虽然这看起来不错，但它不是标准发行版的一部分，而且似乎真的只为 Windows 维护（即使*有为*Mac OS X 构建的版本）。
2.  它似乎也将自己安装到 Python 的当前系统安装中，但 CINEMA 4D 自带，所以我不得不将它拆开并与我的插件一起分发。
3.  然后它非常大，而我真的只想要一个紧凑的脚本有一个紧凑的解决方案（最好是开箱即用，但这似乎不是一个选项）

我想知道是否有更简单或至少更紧凑的方式。由于 GIF 似乎是一种相对简单的文件格式，我想知道是否甚至可能有一个简单的解析器作为 python 函数/类。

我找到了一个链接，有人在其中反汇编了嵌入帧的 gif 文件，但实际上并没有抓取图像内容：[Python，我如何获取 gif 帧](https://stackoverflow.com/questions/7503567/python-how-i-can-get-gif-frames)

我可以自己花一些时间，如果文件格式是未压缩的，我已经开始编码了，但我有点不情愿，因为压缩似乎稍微提高了标准。

# mysql - Mysql匹配查询不返回确切的resutls

> ID：13571541
> 
> 赞同：0
> 
> 时间：2012-11-26T19:16:14.027
> 
> 标签：mysql

我们有以下查询：

```
SELECT video . * , u.name, u.username, p.avatar
FROM jos_hwdvidsvideos AS video
WHERE video.public_private = 'public'
AND MATCH (
    title, tags, description
)
AGAINST (
    'matthew:13-44-46'
)
AND video.published =1
AND video.approved = "yes"
LIMIT 0 , 30 
```

唯一的问题是它会返回标题、标签或描述匹配的结果，`matthew:13-44-46`但它会返回其中包含的任何`matthew`内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:45:05.557

如[微调 MySQL 全文搜索中所述](http://dev.mysql.com/doc/en/fulltext-fine-tuning.html)：

> 如果要更改被视为单词字符的字符集，可以通过多种方式进行，如下面的列表中所述。进行修改后，您必须为包含任何索引的每个表重建`FULLTEXT`索引。假设您要将连字符 ( `'-'`) 视为单词字符。使用以下方法之一：
> 
> *   修改 MySQL 源代码： 在`storage/myisam/ftdefs.h`中，查看`true_word_char()`和`misc_word_char()`宏。添加`'-'`到这些宏之一并重新编译 MySQL。
>     
>     
> *   修改字符集文件：这不需要重新编译。该`true_word_char()`宏使用“字符类型”表将字母和数字与其他字符区分开来。. 您可以`<ctype><map>`在其中一个字符集 XML 文件中编辑数组的内容，以指定它`'-'`是一个“字母”。`FULLTEXT`然后为您的索引使用给定的字符集。有关`<ctype><map>`数组格式的信息，请参阅[第 10.3.1 节，“字符定义数组”</a>。](http://dev.mysql.com/doc/en/character-arrays.html)
>     
>     
> [](http://dev.mysql.com/doc/en/character-arrays.html)
> *   [为索引列使用的字符集添加新的排序规则，并更改列以使用该排序规则。有关添加排序规则的一般信息，请参阅](http://dev.mysql.com/doc/en/character-arrays.html)[第 10.4 节，“向字符集添加排序规则”</a>。有关全文索引的特定示例，请参阅](http://dev.mysql.com/doc/en/adding-collation.html)[第 12.9.7 节，“为全文索引添加排序规则”</a>。](http://dev.mysql.com/doc/en/full-text-adding-collation.html)
>     
>     
> [](http://dev.mysql.com/doc/en/full-text-adding-collation.html)
> 
> [](http://dev.mysql.com/doc/en/full-text-adding-collation.html)

[](http://dev.mysql.com/doc/en/full-text-adding-collation.html)

[或者，您可以执行准确的短语搜索](http://dev.mysql.com/doc/en/full-text-adding-collation.html)[`IN BOOLEAN MODE`](http://dev.mysql.com/doc/en/fulltext-boolean.html)：

```
MATCH (title, tags, description) AGAINST ('"matthew:13-44-46"' IN BOOLEAN MODE) 
```

# solr - Solr Lucene 中的连字符/破折号挑战

> ID：13571542
> 
> 赞同：1
> 
> 时间：2012-11-26T19:16:15.963
> 
> 标签：solr, lucene, hyphen

我试图让 Solr 仅提取格式为 n-nnnnnnn 的票的第二个 7 位数字部分

本来是希望把全票留在一起的。根据文档，带数字的数字应该放在一起，但是在解决了这个问题一段时间并查看了代码之后，我认为情况并非如此。Solr 总是生成两个术语。因此，我想我可以从第二部分获得更好的查询结果，而不是大量匹配 n- 的第一个数字。用 A 代替破折号：

```
 <charFilter class="solr.PatternReplaceCharFilterFactory"
      pattern="\b\d[A](\d\d\d\d\d\d\d)\b" replacement="$1" replace="all" 
      maxBlockChars="20000"/> 
```

将解析 1A1234567 罚款但是 -\b" replacement="$1" replace="all" maxBlockChars="20000"/>

不会解析 1-1234567

所以看起来只是连字符的问题。我试过 -(escaped) 和 [-] 和 \u002D 和 \x{45} 和 \x045 没有成功。

我试过在它周围放置 char 过滤器：

```
 <charFilter class="solr.MappingCharFilterFactory" mapping="mapping.txt"/>
    <charFilter class="solr.PatternReplaceCharFilterFactory"
      pattern="\b\d[-](\d\d\d\d\d\d\d)\b" replacement="$1" replace="all" maxBlockChars="20000"/>
    <charFilter class="solr.MappingCharFilterFactory" mapping="mapping2.txt"/> 
```

带映射：

“-” => “z”

进而

“z” => “-”

我看起来连字符在 Flex 标记化中被吃掉了，甚至不能用于 char 过滤器。

有没有人在 Solr/Lucene 中使用连字符/破折号取得了更大的成功？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T20:23:53.957

如果您的 Solr 使用的是最新的 Lucene（我认为是 3.x+），您将希望使用 ClassicAnalyzer 而不是 StandardAnalyzer，因为 StandardAnalyzer 现在总是将连字符视为分隔符。

# jquery - jQuery Mobile listview 样式不适用

> ID：13571545
> 
> 赞同：0
> 
> 时间：2012-11-26T19:16:22.533
> 
> 标签：jquery, mobile

我正在做一个小项目，基本上只是谷歌的一个美化的 RSS 阅读器。我有成功提取数据的功能，但是由于我不知道的原因，设置列表的样式不起作用。我希望这篇文章能帮助我弄清楚我哪里出错了。

代码在这里：

[http://jsfiddle.net/ySCsd/2/](http://jsfiddle.net/ySCsd/2/)

不过，我应该注意跨源策略正在阻止代码正确执行。如果您要尝试帮助我，则将其复制/粘贴到 Dreamweaver 或类似文件中可能会更容易。

这就是它在 Dreamweaver 中为我所做的： ![列表](../Images/d4eccd947b60f08a6bd574921b4d3614.png)

我认为这与列表视图的刷新有关：

```
 $(listItem).appendTo(listView);
});

$(listView).appendTo('#items');
});

$('#items ul').listview(''); 
```

但我就是做错了！

提前感谢您的帮助。

-詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:29:49.923

我猜您在某处缺少样式表：

```
Failed to load resource: the server responded with a status of 404 (Not Found) http:/fiddle.jshell.net/ySCsd/2/show/jquery.mobile-1.1.0.min.css 
```

如果没有，您可以通过这样做尝试“物理”回流：

```
$('#items ul').css('display','none').css('display','block'); 
```

# c# - url - 自动完成 wpf

> ID：13571550
> 
> 赞同：0
> 
> 时间：2012-11-26T19:16:36.793
> 
> 标签：c#, .net, wpf, autocomplete

在我当前的 wpf 项目中，我使用 C# 制作了一个加载页面的方法，因此当您选择它时，它将从源代码中提取内容，`div`如`table`您所愿，当您首先需要从列表框中进行选择时喜欢加载本地文件以提取，或者您想从互联网加载页面。

然后我想到了一个想法，如果通过互联网选​​择自动完成，这将有助于用户，因为我学习了如何在 asp.net WebForms 中实现它，它并不复杂，因为我可以使用 ajax 来定位 asp:TextBox。但需要能够通过 Wpf 完成。

**1)**是否有可以将我的应用程序绑定为数据源的 url 列表源？

**2)**只是在搜索该 url 列表时考虑了一下：我如何实现自动完成，是否可以使用与 asp.net 相同的方法，使用 ajax 或其他一些简单的实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T00:59:32.720

使用[WPF Toolkit](http://wpf.codeplex.com/releases/view/40535)中的 AutoCompleteBox ：

```
<Page x:Class="WPFApplication.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:toolkit="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Input.Toolkit">

    <toolkit:AutoCompleteBox x:Name="autocompleteCtrl"
        Populating="autocompleteCtrl_Populating" />
</Page> 
```

1.  您可以通过为 ItemSource 指定预定义列表来获取任何类型的数据源：

    ```
    autocompleteCtrl.ItemsSource = new List<string>{"asd","abs","vfr"}; 
    ```

2.  或者动态构建`Populating`事件处理的自动完成列表：

    ```
    private void autocompleteCtrl_Populating(object sender, PopulatingEventArgs e)
    {
        string text = autocompleteCtrl.Text;

        //build list
        var list = new List<string>();
        autocompleteCtrl.ItemsSource = candidates;
        autocompleteCtrl.PopulateComplete();
    } 
    ```

# matlab - matlab ode45 检索参数

> ID：13571551
> 
> 赞同：3
> 
> 时间：2012-11-26T19:16:41.113
> 
> 标签：matlab, parameters, ode

我正在 Matlab 中试验 ode45。我已经学会了如何将参数传递给 ode 函数，但我仍然有一个问题。假设我想计算汽车的轨迹（速度曲线），并且我有一个函数，例如`getAcceleration`，它可以为我提供汽车的加速度以及正确的档位：`[acceleration, gear] = getAcceleration(speed,modelStructure)`其中`modelStructure`代表汽车的型号。

ode 函数将是：

```
function [dy] = car(t,y,modelStructure)

dy           = zeros(2,1);
dy(1)        = y(2);
[dy(2),gear] = getAcceleration(y(1),modelStructure); 
```

然后我以这种方式调用 Ode45 积分器：

```
tInit = 0;
tEnd  = 5,
[t,y] = ode45(@car,[tInit tEnd], [speedInitial,accelerationInitial],options,modelStructure); 
```

问题是：如何获得矢量存储齿轮？我应该有类似的东西`[t,y,gear]=ode45(....)`还是应该`gear`在`y`向量内？

* * *

我一直在处理我的代码并使用事件函数，我现在能够获得汽车“齿轮”的变化（作为事件）。现在我有一个与相同代码相关的新问题。想象一下，当我评估 de 'dy' 向量时，我能够得到一个进一步的值 Z，这让我可以大幅加快调用加速度计算 (getAcceleration)：

```
function [dy] = car(t,y,modelStructure)

dy           = zeros(2,1);
dy(1)        = y(2);
[dy(2),Z(t)] = getAcceleration(y(1),modelStructure,Z(t-1)); 
```

并假设我也能够在初始条件下计算 Z。问题是我无法计算 Z 导数。

有没有办法通过 Z 值抛出步进而不集成它？

多谢你们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T08:13:43.137

首先：为什么微分方程的初始值是初始速度（`speedInitial`）和初始加速度（`accelerationInitial`）？这意味着微分方程`car`将在每个时间计算加速度 ( `y(1)`) 和加加速度 ( `y(2)`)，即加速度的时间导数`t`。这似乎不正确......我会说初始值应该是初始位置（`positionInitial`）和初始速度（`speedInitial`）。但是，我不知道你的型号，我可能是错的。

现在，直接进入`gear`解决方案：你不能，不是没有黑客攻击`ode45`。这也是合乎逻辑的；你也不能`dy`一直直接得到，可以吗？只是不是这样`ode45`设置的。

我在这里看到两种方法：

## 全局变量

***免责声明***：**不要使用这种方法。它只是在这里展示大多数人会做的第一次尝试。**

您可以存储`gear`在全局变量中。这可能是最少的编码，但也是最不方便的结果：

```
global ts gear ii

ii    = 1;
tInit = 0;
tEnd  = 5,
[t,y] = ode45(...
    @(t,y) car(t,y,modelStructure), ...
    [tInit tEnd], ...
    [speedInitial, accelerationInitial], options);

...

function [dy] = car(t,y,modelStructure)
global ts gear ii

dy    = zeros(2,1);
dy(1) = y(2);
[dy(2),gear(ii)] = getAcceleration(y(1),modelStructure);

ts(ii) = t;
ii = ii + 1; 
```

但是，由于 的性质`ode45`，这将为您提供一系列时间`ts`和相关联`gear`，其中包含中间点和/或被拒绝的点`ode45`。所以，你必须在之后过滤那些：

```
ts( ~ismember(ts, t) ) = []; 
```

我再说一遍：这***不是***我推荐的方法。仅在测试或做一些快速而肮脏的事情时使用全局变量，但总是很快地转向其他解决方案。此外，全局变量在 的每次（子）迭代时都会增长`ode45`，这是不可接受的性能损失。

最好使用下一种方法：

## 解决后调用

这对你的情况也不是太难，我建议你走的路。首先，修改微分方程如下，并正常求解：

```
tInit = 0;
tEnd  = 5,
[t,y] = ode45(...
    @(t,y) car(t,y,modelStructure), ...
    [tInit tEnd], ...
    [speedInitial, accelerationInitial], options);

...

function [dy, gear] = car(t,y,modelStructure)    

dy    = [0;0];
dy(1) = y(2);
[dy(2),gear] = getAcceleration(y(1),modelStructure); 
```

然后`ode45`完成后，执行以下操作：

```
gear = zeros(size(t));
for ii = 1:numel(t)
    [~, gear(ii)] = car(t(ii), y(ii,:).', modelStructure); 
end 
```

这将使您获得汽车有时会配备的所有齿轮`t`。

`car`我在这里可以看到的唯一缺点是，您将拥有比单独使用更多的功能评估`ode45`。但这只是一个真正的问题，如果每次评估都`car`需要几秒钟或更长时间，我怀疑您的设置不是这种情况。

# ruby-on-rails - rails开发日志充满了GET请求，只想查看数据库请求

> ID：13571552
> 
> 赞同：3
> 
> 时间：2012-11-26T19:16:48.267
> 
> 标签：ruby-on-rails, ruby-on-rails-3, logging, ruby-on-rails-3.2, development-environment

我的 Rails 开发日志中有大量此类行：

```
Started GET "/assets/services.css?body=1" for 127.0.0.1 at 2012-11-26 02:27:49 -0800
Served asset /services.css - 304 Not Modified (0ms)
[2012-11-26 02:27:49] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true 
```

我想我需要弄清楚如何让rails确定内容长度或在某处设置response.chunked（不确定那是什么）以避免最后一行。但是，绝大多数时间我不得不浪费我的时间搜索这些来找到这样的数据库请求：

```
Started GET "/points" for 127.0.0.1 at 2012-11-26 02:27:54 -0800
Processing by PointsController#index as HTML
  User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  PointsLog Load (0.1ms)  SELECT "points_logs".* FROM "points_logs" WHERE "points_logs"."user_id" = 1
  Rendered points/index.html.erb within layouts/application (5.4ms)
Completed 200 OK in 43ms (Views: 40.0ms | ActiveRecord: 0.8ms) 
```

我可以查看这些类型的请求是否有单独的日志？有没有办法暂时，甚至永久地抑制以“服务资产”开头的日志条目？或者只是不记录服务资产？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T19:28:11.863

更新：由于我写了下面的内容，有人制作了一个可以做同样事情的宝石。可能是更好的方法。 [https://rubygems.org/gems/quiet_assets](https://rubygems.org/gems/quiet_assets)

将其放入`config/initializers/quiet_assets.rb`并重新启动您的开发服务器。

```
#
#
# Silence the log file if it's loading up an asset.  That is, get rid of
# the following types of entries in the development log:
# 
# Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2012-03-05 11:52:18 -0800
# Served asset /application.css - 200 OK (5ms)
#
Rails.application.assets.logger = Logger.new('/dev/null')
Rails::Rack::Logger.class_eval do
  def call_with_quiet_assets(env)
    previous_level = Rails.logger.level
    Rails.logger.level = Logger::ERROR if env['PATH_INFO'].index("/assets/") == 0
    call_without_quiet_assets(env).tap do
      Rails.logger.level = previous_level
    end
  end
  alias_method_chain :call, :quiet_assets
end 
```

# html - iOS浏览器的区别

> ID：13571558
> 
> 赞同：0
> 
> 时间：2012-11-26T19:17:09.570
> 
> 标签：html, ios, css, browser, font-size

在我的桌面浏览器和我的 iPhone 浏览器上可视化这个网站 (http://bluecodestudio.com/kipos/updates/new/) 时，我无法修复一个恼人的差异。

在 iOS 的 Safari 上查看时，具有较小字体大小的“p”标签以与“h2”标签相同的字体大小显示。

这是什么原因？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:24:13.267

移动 Safari 和其他一些移动浏览器通常会增加文本大小以使其更具可读性。

您可以使用以下规则在 CSS 中禁用此功能：

```
-webkit-text-size-adjust: 100%; 
```

其他移动浏览器也有 -moz 和 -ms 前缀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:23:16.350

为了避免浏览器特定的默认样式表之间的差异，请使用 Eric 的[reset.css](http://meyerweb.com/eric/tools/css/reset/)或（我更喜欢）[normalize.css](http://necolas.github.com/normalize.css/)
继续阅读：[https ://stackoverflow.com/questions/116754/best-css-reset](https://stackoverflow.com/questions/116754/best-css-reset)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T19:25:31.703

这是因为他们使用不同的样式表，一种用于移动设备，一种用于桌面。在 iPhone 上，h2 是 23 px，p 是 22 px，你看不出有什么不同。在桌面上，h2 是 20 px，p 是 14 px，差别很大，一目了然。

您可以通过非常酷但鲜为人知的 Mobile Safari 功能 Web Inspector 轻松发现这类事情，通过将 iPhone 连接到台式计算机并阅读这些功能，您可以查看 iPhone 上显示的网页的 CSS 和其他详细信息桌面 Safari 的详细信息。哇。

# ruby-on-rails - 在 mongoid 中有 3 种方式 - A has_many B, A has_many C, B has_manyC

> ID：13571560
> 
> 赞同：0
> 
> 时间：2012-11-26T19:17:22.123
> 
> 标签：ruby-on-rails, mongoid

这是情况

*   用户 has_many 帖子
*   用户 has_many 回复
*   发布 has_many 回复

问题是当我使用添加新回复时

```
@reply = current_user.posts.find(params[:post_id]).replies.new(params[:reply]) 
```

在回复中，它只保存`post_id`and `user_id`is `null`，如果我曾经`current_user.replies.new(params[:reply])`保存过我得到的帖子，`user_id`但`post_id`变成了`null`

那么如何添加回复以对`post_id`和都有参考`user_id`？任何人都有线索！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:45:51.813

也许你的联想是这样的：

**用户模型**

```
has_many :posts
has_many :replies 
```

**后模型**

```
belongs_to :user
has_many :replies 
```

**回复模型**

```
belongs_to :post
belongs_to :user 
```

所以，你可以找到一个帖子：

```
@post = Post.find(params[:post_id]) 
```

为帖子添加新回复：

```
@reply = @post.replies.build(params[:reply])
@reply.user_id = current_user.id
@reply.save 
```

# c++ - C++ 复制多维向量

> ID：13571565
> 
> 赞同：3
> 
> 时间：2012-11-26T19:18:03.730
> 
> 标签：c++, vector, copy, multidimensional-array

我在复制多维向量时遇到问题，我尝试了很多东西，但这是最后一个：

```
vector < vector < int > > a;
vector < vector < int > > b;
a.resize(10);
b.resize(10);
a[0][0] = 123;
copy( a.begin(), a.end(), back_inserter(b) );
cout << b[0][0]; 
```

我正在尝试做一个递归循环，在 10 次移动中计算网格中所有可能的路线。我正在尝试创建一个名为的向量，该向量`current_path`将保存每次递归的当前路径，当`current_path`10 次移动时，它会将数据从 复制`current_path`到`all_paths`。

网格是这样的：

```
0  1  2 3
4  5  6 7
8  9  10 11
12 13 14 15 
```

您只能移动到您触摸的方格，因此您可以从 0 移动到 1、4 和 5。从 1 移动到 3、4、5、6 等。

主要思想是将 复制`current_path`到下一个函数调用（递归），以便将其保持`curren_path`到该点，直到它满了（10 步）。从复制`current_path`到之后，`all_paths`我想我必须删除`current_path`?

我知道如何有效地计算所有步骤，但是我无法正确地复制和当我在 10 步时`current_path`如何添加？`current_path``all_paths`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T19:26:49.947

您的代码存在一些问题。在第 4 行结束时，您有两个向量，每个向量包含 10 个空向量。你可以像这样想象它：

```
a = {{}, {}, {}, {}, {}, {}, {}, {}, {}, {}}
b = {{}, {}, {}, {}, {}, {}, {}, {}, {}, {}} 
```

这些内部向量仍然没有任何元素，因此当您尝试设置`a[0][0]`为 时`123`，您正在访问一个不存在的元素，从而调用未定义的行为。

如果这行得通，您的使用`std::copy`将简单地复制每个向量 from`a`并将其推到`b`. 由于`b`已经有 10 个元素，所以现在将有 20 个元素。

然后，您尝试输出`b[0][0]`不存在的内容`a[0][0]`。

这里的解决方案是简单地使用由定义的复制赋值运算符`std::vector`：

```
vector<vector<int>> a = {{1, 2, 3}, {4, 5}};
vector<vector<int>> b;
b = a; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-26T19:21:54.807

你可以做`b = a;`

`std::vector`定义了一个按元素进行复制的[复制赋值运算符](http://en.cppreference.com/w/cpp/container/vector/operator=)。这将调用内部向量的复制赋值运算符，它复制`int`s。

代替

```
a.resize(10);
a[0][0] = 123; 
```

你会想做

```
a.resize(10);
a[0].push_back(123); 
```

因为虽然`resize`在外部向量中创建了 10 个新向量，但这些内部向量的长度为 0，所以这样做`a[0][0]`会给你一个超过第一个内部向量末尾的元素。

此外，只要您在堆栈上创建向量（就像您所做的那样），您就不需要删除任何东西；他们有[自动存储期限](http://en.cppreference.com/w/cpp/language/storage_duration)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T19:29:24.240

这是您的代码的固定版本：

```
vector < vector < int > > a;
vector < vector < int > > b;
a.resize(10, vector < int >(10));
b.resize(10, vector < int >(10));
a[0][0] = 123;
b = a;
cout << b[0][0]; 
```

# linux - Bash 字母数字列表生成

> ID：13571566
> 
> 赞同：4
> 
> 时间：2012-11-26T19:18:07.587
> 
> 标签：linux, bash, for-loop, sh

我需要打印这样的东西：

```
a
b
c
.
.
.
z
A
B
C
.
.
.
Z
0
1
2
.
.
.
9 
```

这可以单独完成，但是。

```
 for f in {a..z}; 
   do        
   echo $f;   
done
 for f in {A..Z}; 
   do        
   echo $f;   
done

 for f in {0..9}; 
   do        
   echo $f;   
done 
```

但我怎样才能做到这一点呢？也许是这样的？但不工作。

```
 for f in {a..z:A..Z:1..9}; 
   do        
   echo $f;   
done 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T19:20:48.650

```
for f in {a..z} {A..Z} {0..9}; do
    echo "$f"
done 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T19:24:09.273

或者，如果您只想打印它们：

```
printf "%s\n" {0..9} {A..Z} {a..z} 
```

# c# - 实体框架审计追踪

> ID：13571567
> 
> 赞同：0
> 
> 时间：2012-11-26T19:18:09.650
> 
> 标签：c#, frameworks, entity

我在下面的代码中遇到问题。一切都适用于获取添加和删除的条目。我可以访问我修改部分中的所有新数据，但由于某种原因我无法获得原始值。任何帮助将不胜感激

```
public override int SaveChanges()
    {

        ChangeTracker.DetectChanges(); // Important!

        ObjectContext ctx = ((IObjectContextAdapter)this).ObjectContext;

        List<ObjectStateEntry> objectStateEntryList =
            ctx.ObjectStateManager.GetObjectStateEntries(EntityState.Added
                                                       | EntityState.Modified
                                                       | EntityState.Deleted)
            .ToList();
        List<Log> LogEntries = new List<Log>();

        foreach (ObjectStateEntry entry in objectStateEntryList)
        {

            if ((!entry.IsRelationship) && (entry.Entity is Scan))
            {
                Log logEntry = new Log();
                JavaScriptSerializer serializer= new JavaScriptSerializer();
                logEntry.TimeStamp = System.DateTime.Now;
                logEntry.Username = "me";
                IEnumerable<string> modifiedProperties = entry.GetModifiedProperties();
                logEntry.ChangedColumns = serializer.Serialize(modifiedProperties);
                logEntry.TableName = entry.EntitySet.Name;

                switch (entry.State)
                {
                    case EntityState.Added:
                        {

                            logEntry.Action = "Added";
                            logEntry.NewValue = serializer.Serialize(entry.Entity);
                            logEntry.OriginalValue = "";

                            // write log...
                            break;
                        }
                    case EntityState.Deleted:
                        {// write log...

                            logEntry.Action = "Deleted";
                            logEntry.NewValue = serializer.Serialize(entry.Entity);
                            logEntry.OriginalValue = "";

                            break;
                        }
                    case EntityState.Modified:
                        {
                            logEntry.NewValue = "{";
                            logEntry.OriginalValue = "{";
                            foreach (string propertyName in
                                         entry.GetModifiedProperties())
                            {
                                DbDataRecord original = entry.OriginalValues;
                                string oldValue = original.GetValue(
                                    original.GetOrdinal(propertyName))
                                    .ToString();

                                CurrentValueRecord current = entry.CurrentValues;
                                string newValue = current.GetValue(
                                    current.GetOrdinal(propertyName))
                                    .ToString();
                                logEntry.NewValue += "\"" + propertyName + "\":\"" + newValue + "\",";
                                logEntry.OriginalValue += "\"" + propertyName + "\":\"" + oldValue + "\",";
                            }
                            logEntry.NewValue = logEntry.NewValue.TrimEnd(',') + "}";
                            logEntry.OriginalValue = logEntry.OriginalValue.TrimEnd(',') + "}";
                            break;
                        }
                }
                LogEntries.Add(logEntry);

            }
        }
        foreach (Log addLog in LogEntries)
        {
            this.Logs.Add(addLog);
        }
        return base.SaveChanges();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:17:32.970

看看这篇[文章](http://www.dailycode.info/Blog/post/2012/04/12/Audit-trail-%28History%29-using-the-entity-framework-and-self-tracking-entities-%28Part2%29.aspx)，作者提到他的第[一种方法](http://www.dailycode.info/BlogV2/post/2012/03/21/Audit-trail-using-the-entity-framework-and-self-tracking-entities.aspx)在插入时失败了，他做了一些修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-21T14:54:35.543

您可能想查看 Codeplex 上的 AuditDBContext 项目。 [http://auditdbcontext.codeplex.com/](http://auditdbcontext.codeplex.com/)

作者在更新或删除时存储新值以及旧值与其他详细信息一起保存，例如提交操作的用户、时间戳等。

该项目的源代码将向您展示如何获取旧值。

# entity-framework - 实体框架迁移添加列两次

> ID：13571576
> 
> 赞同：3
> 
> 时间：2012-11-26T19:18:54.067
> 
> 标签：entity-framework, ef-code-first, migration, entity-framework-migrations

我正在运行实体框架代码优先迁移。尝试运行应用程序时出现错误：在规范中多次出现列 ID。我在配置中将 AutomaticMigrationsEnabled 设置为 true，因为当我运行项目时，我希望迁移自动运行。

这是我尝试通过包管理器运行它时的详细结果：

应用基于代码的迁移：201211261626569_AddActiveFlagForProjects。

```
ALTER TABLE [Projects] ADD [Active] [bit] NOT NULL DEFAULT 1 
```

[插入迁移历史记录] 应用自动迁移：201211261901371_AutomaticMigration。

```
ALTER TABLE [Projects] ADD [Active] [bit] NOT NULL DEFAULT 0 
```

为什么 EF 试图两次更改项目表？

我正在使用实体框架 5.0 和 SQL CE 4.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:13:39.570

将 -IgnoreChanges 标志添加到 Add-Migration

[http://entityframework.codeplex.com/workitem/652](http://entityframework.codeplex.com/workitem/652)

# django - 从 OSQA 中提取“最热门的问题”

> ID：13571577
> 
> 赞同：0
> 
> 时间：2012-11-26T19:19:02.820
> 
> 标签：django, osqa

我想从我的 OSQA 安装（安装在我的主站点的子域上）中提取“最热门”问题的提要，并将其显示在我的主站点上。有没有办法做到这一点？

一种方法是通过 RSS Feed。是否有专门针对“最热门”问题部分的 RSS 提要？

更新：

我最初是在 2012 年 11 月问这个问题的。2 年后，我仍然找不到简单的答案？有什么改进吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:24:34.703

默认情况下，OSQA 不提供“最热门”问题的 RSS 提要。你需要自己写。

我先看看

*   `question_list`作用于`forum/views/readers.py`
*   `HottestQuestionsSort`帮手`forum/views/readers.py`
*   `RSSQuestionFeed`帮手`forums/feed.py`

# jquery - 将图像 alt 属性添加到 foreach 循环中的 div 元素

> ID：13571583
> 
> 赞同：0
> 
> 时间：2012-11-26T19:19:38.960
> 
> 标签：jquery, foreach, append

我正在使用一个覆盖插件，我想在我的 foreach 循环中使用最接近它的图像的 alt 属性填充每个“覆盖”div。

这是我目前的代码：

```
<div data-overlayer="effect:bottom">
                    <div class="portfolio_slide" data-slides="pager:on; fx:slide">
                        <?php foreach ($page->images as $image) { ?>
                            <img src="<?php echo $image->getThumb('wide'); ?>" alt="<?php echo $image->description; ?>">
                        <?php } ?>
                    </div>
                    <div class="overlay"></div>
                </div> 
```

我的jQuery：

```
$(".overlay").each(function () {
    $(this).append('<p>'function() {
      return $('this').parent('img').attr('alt');
    })'</p>');
}); 
```

我试图从循环中的每个图像中获取 alt 属性并将其传递给空的覆盖 div。我会很感激任何指示。提前致谢！

编辑：这是我的 HTML 输出

```
div data-overlayer="effect:bottom">
                    <div class="portfolio_slide" data-slides="pager:on; fx:slide">
                                                        <img src="/pw_template/site/assets/files/1060/wide_img_0468.jpg" alt="View over Sète">
                                                        <img src="/pw_template/site/assets/files/1060/wide_montpellier.jpg" alt="Beautiful Montpellier at night">
                                                        <img src="/pw_template/site/assets/files/1060/wide_img_0762-1-1.jpeg" alt="Nina relaxing on the lawn">
                                                </div>
                    <div class="overlay"></div>
                </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:25:00.633

我假设您的 html 结构如下所示，

```
 <div data-overlayer="effect:bottom">
         <div class="portfolio_slide" data-slides="pager:on; fx:slide">
                        <img src="someImage.png" alt="Some Alt Text">
         </div>
         <div class="overlay"></div>
     </div> 
```

那么你`$.each`应该如下所示，

```
$(".overlay").each(function () {
    var $this = $(this);
    $this.append('<p>' +  $this.parent().find('img').attr('alt') + '</p>');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:23:09.580

缺少逗号，`$('this')`而不是`$(this)`

```
$(".overlay").each(function () {
    var $this = $(this);
    $(this).append(function() {
      return '<p>' + $this.closest('div').find('img').attr('alt') + '</p>'
    });
}); 
```

**[检查小提琴](http://jsfiddle.net/25sLM/3/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T00:39:12.587

我找到了解决方案，但我觉得好像我误导了那里的 jQuery 助手。我需要将 data-overlayer div 放在 data-slides div 中，这样我的图像描述就会留在循环中。

现在代码如下：

```
<div class="portfolio_slide" data-slides="pager:on; fx:slide">
                        <?php foreach ($page->images as $image) { ?>
                        <div data-overlayer="effect:bottom">
                            <img src="<?php echo $image->getThumb('wide'); ?>" alt="<?php echo $image->description; ?>">
                            <div class="overlay"><?php echo $image->description; ?></div>
                            </div>
                        <?php } ?>
                    </div> 
```

不需要额外的 jQuery，虽然我想我会尝试学习更多，但我什至不知道是否可以访问和设置数组中每个项目的数据。我想一定是的。

无论如何感谢@Vega 和@Sushanth——感谢他们的帮助。

# java - WebView 中的 Youtube 视频无法自动播放

> ID：13571587
> 
> 赞同：1
> 
> 时间：2012-11-26T19:19:43.327
> 
> 标签：java, android, html, iframe, android-webview

我正在 webview 中加载 youtube 视频，但问题是视频没有像我们访问实际的 youtube 网站时那样自动播放。在 webview 中，视频确实显示并播放，但只有在我按下播放按钮之后出现在视频的顶部。所以我想知道是否有任何方法可以在加载 URL 后在 webview 中播放视频。以下是我的代码：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.video_view);
    WebView wv = (WebView) findViewById(R.id.webView);
    wv.getSettings().setJavaScriptEnabled(true);
    wv.getSettings().setPluginState(PluginState.ON);
    final String mimeType = "text/html";
    final String encoding = "UTF-8";
    String html = getHTML();
    wv.setWebChromeClient(new WebChromeClient() {
    });
    wv.loadDataWithBaseURL("", html, mimeType, encoding, "");
}

public String getHTML() {
     String html = "<iframe class=\"youtube-player\" style=\"border: 0; width: 100%; height: 95%; padding:0px; margin:0px\" id=\"ytplayer\" type=\"text/html\" src=\"http://www.youtube.com/embed/"
                + "J2fB5XWj6IE"
                + "?fs=0\" frameborder=\"0\">\n"
                + "</iframe>\n";
        return html;
} 
```

谢谢你！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T19:25:27.013

将“autoplay=1”添加到您的网址

```
String html = "<iframe class=\"youtube-player\" style=\"border: 0; width: 100%; height: 95%; padding:0px; margin:0px\" id=\"ytplayer\" type=\"text/html\" src=\"http://www.youtube.com/embed/"
            + "J2fB5XWj6IE?autoplay=1"
            + "&fs=0\" frameborder=\"0\">\n"
            + "</iframe>\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:29:54.543

Doing Youtube is kind of tricky. First you will need try to access the mobile site. Second you need to play it in a popup window. The playback needs to be done in the WebChromClient#onShowCustomView method. I kind of forgot the details but that is the general idea. The "view" parameter of the onShowCustomView method, if I remember correctly is a layout with a video view in it, you can start it to play.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-28T03:17:52.297

Follow this code, your video will run well

```
 webView.getSettings().setJavaScriptEnabled(true);
    webView.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
    webView.getSettings().setPluginState(PluginState.ON);
    webView.getSettings().setLoadWithOverviewMode(true);
    webView.getSettings().setUseWideViewPort(true);
    webView.getSettings().setAllowFileAccess(true);
    //webView.getSettings().setMediaPlaybackRequiresUserGesture(false);

    webView.setBackgroundColor(Color.BLACK);

    webView.getSettings().setUserAgentString("Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/33.0.1750.117 Safari/537.36");
    //webView.addJavascriptInterface(this, "nativeInterface");

    if (Build.VERSION.SDK_INT >= VERSION_CODES.JELLY_BEAN) {
        webView.getSettings().setAllowUniversalAccessFromFileURLs(true);
    }
    webView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);

    webView.setWebViewClient(new WebViewClient());

    webView.setWebChromeClient(new WebChromeClient());

    String youtubeID = ""; //get Youtube ID and input here

    String url = "http://www.youtube.com/embed/" +
            youtubeID +
            "?autoplay=1";

    webView.loadUrl(url); 
```

# python - 为什么我在 python 中得到一个带有 raw_input 的无限循环？

> ID：13571588
> 
> 赞同：-2
> 
> 时间：2012-11-26T19:19:43.980
> 
> 标签：python, loops, infinite, raw-input

这是代码 - 非常简单 - 但它给了我程序主要部分中的第一个异常 - 甚至没有要求用户输入我认为它应该在 - 在第一次输入时`raw_input`- 我是一个初学者总体上很好地掌握语言 - 有什么想法吗？谢谢

```
import re,sys

#program to take details of people name, address and telephone number from user
#user must specify number of people first

class details:
    def __init__(self,name=None,address=None,tel=None):
        self.name=name
        self.address=address
        self.tel=tel

    def changeAttribute(self,name=None,address=None,tel=None):
        if name!=None:
            self.name=name
        if address!=None:
            self.address=address
        if tel!=None:
            self.tel=tel

class main(): 

    peopleList =[]
    a=1

    while a==1:    
        try:

            numOfPeople = raw_input("enter number of people:")
            if re.search('[^0-9\n]', numOfPeople):
                raise Exception
        except (Exception):
            print ("illegal input ,must only be numbers - Please try again")
        else:
            numOfPeople=str(numOfPeople)
            a=0

    for i in range(0,numOfPeople):
        x=1
        while x==1:
            try:    

                name=raw_input("Please enter name")
                if re.search('[^a-zA-Z\n]',name):
                    raise Exception
            except (Exception):
                print("illegal name - Please use only letters")
            else:
                peopleList.extend(details(name))
                x=0

        x=1    
        while x==1:
            try:    

                address=raw_input("Please enter address")
                if re.search('[^a-zA-Z\n]',address):
                    raise Exception
            except (Exception):
                print("illegal name - Please use only letters")
            else:
                peopleList[-1].changeAttribute(None,address,None)
                x=0

        x=1    
        while x==1:
            try:    

                tel=raw_input("Please enter telephone number")
                if re.search('[^0-9]',tel):
                    raise Exception
            except (Exception):
                print("illegal name - Please use only numbers")
            else:
                peopleList[-1].changeAttribute(None,address,None)
                x=0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:32:12.307

首先，我将就您的代码提供很多重要的反馈。请记住，我这样做并不是为了滥用你的糟糕编码，我这样做**纯粹是为了教学目的**，只是想向你展示更好的方法来做你所做的事情。

执行我将在下面列出的操作将解决您的问题，但只会导致它删除整个`try`-block。因此，这不是您问题的直接答案，即使我花时间在这上面，我实际上并没有要求接受答案。我只是（无聊）试图帮助初学者。

并非所有这些都是错误，它们只是不是做你正在做的事情的最佳方法。对于初学者来说，你的代码实际上并没有那么糟糕，但总是有新的东西要学习，这里有一些与你的代码相关的东西：

**1.“班主”**

第一个问题，`class main()`你从头到尾都不见了`:`，我想这是一个函数，而不是一个类？更改它以`def main():`定义一个函数。类用于创建对象，函数用于完成简单的任务。

**2\. 例外**

有十亿种方法可以从用户那里获取输入并检查它是否是有效输入。不幸的是，你的方式不是其中之一。这是执行 for 循环的一种方法：

```
for i in range(numOfPeople):

    # Get user's name
    name = raw_input("Please enter name: ")

    # While name has incorrect characters
    while re.search('[^a-zA-Z\n]',name):

        # Print out an error
        print("illegal name - Please use only letters")

        # Ask for the name again (if it's incorrect, while loop starts again)
        name = raw_input("Please enter name: ")

    # .extend is used for appending lists to other lists
    # details is a class, not a list, so use .append instead
    peopleList.append(details(name)) 
```

您也可以使用中断，或者我更喜欢的方式是创建一个返回值的函数......如果没有很好的理由，请不要使用异常，大多数时候它们只是在你的路上. `i = 1`此外，使用和等变量`while i == 1:`是不好的编码，而是`while True:`通过调用来执行和停止循环`break`，或者像我上面那样做。

正如我所提到的，这些只是实现此功能的几种方法，希望您能找到适合您的方法，但请尽可能保持简单。

**3.更改属性**

你的`changeAttribute()`方法对我来说似乎没用。而不是打电话给你，`peopleList[-1].changeAttribute(name, None, None)`你可以做得到`peopleList[-1].name = name`完全相同的结果，而不是使用无用的方法。

**4.人员列表[-1]**

使用`peopleList[-1]`获取对象也不是一个好方法，相反，您应该在 main 函数的第一行定义一个新人`person = details()`（我也会将详细信息重命名为 Person，但是您的调用）并在每个 for 循环中，只需说`person.name = name`和用你得到的任何细节替换名称。现在在所有 for 循环完成后，调用`peopleList.append(person)`. 您也可以将人员定义从代码的第一行移开，将用户的姓名、地址和号码放入临时局部变量中，然后在最后一行 call `peopleList.append(details(name, address, number))`，尽管第一种方法是值得推荐的。

**5\. CamelCaseClassNames**

正如我在评论中已经提到的，您应该为您的课程使用 CamelCaseNaming （而不是`class details:`do `class Details:`）。这无论如何都不是错误，甚至不是错误，但最好使用 CamelCasing 以便其他程序员也能理解您的代码。这只是程序员的一种习惯，是全球使用的命名类的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:58:28.390

Mahi 在改进程序方面做得很好，我认为如果你遵循他的建议并努力编写更简单、更易读的代码，你会发现你会发现更少的棘手错误。

但我想回答你的具体问题：

`except (Exception)`每次在相应的块中出现异常时，您的块都会执行`try`，而不仅仅是在您明确提出未命名的异常时。为避免这种情况，您应该引发并捕获特定异常。

我可以重现您的无限循环的唯一方法是使用[Ideone.com 在线解释器](http://ideone.com/)，它不会提示输入（您必须提前输入输入）。这引发了一个 EOFError 异常，该异常被您的 捕获`except`，并导致了无限循环。我怀疑你做了类似的事情（或者做了一些引发异常的事情）。

# android - 如何使 EditText 不自动更改其大小

> ID：13571591
> 
> 赞同：2
> 
> 时间：2012-11-26T19:19:52.587
> 
> 标签：android, size, android-edittext

在这里我有`EditText`和`ImageButton`：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:id="@+id/layout1"
    android:weightSum="1.0">

    <EditText
        android:id="@+id/searchBox"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:hint="@string/search"
        android:layout_weight=".86"
        android:textStyle="italic|normal"
        android:typeface="normal"
        android:singleLine="true"
        android:ellipsize="end" />

    <ImageButton
        android:layout_height="match_parent"
        android:layout_width="0px"
        android:layout_weight=".14"
        android:background="@drawable/search_button_selector"/>

</LinearLayout> 
```

一切似乎都很好，除非我开始在`EditText`.

一开始它看起来像这样：

![在此处输入图像描述](../Images/643311605d4ce95c9a9264be87b970c9.png)

输入文字后，我`ImageButton`的变小了：

![在此处输入图像描述](../Images/29314595d4358d993d657b6b657de61a.png)

如何使`EditText`静止不动？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T19:25:11.097

我相信将 EditText 的 layout_width 更改为`android:layout_width="0dp"`将修复它。这将允许 LinearLayout 控制宽度以填充由您的权重指定的空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T19:30:48.867

使用 a`RelativeLayout`并摆脱这些`weight`设置。只需将图像向右对齐并将 EditText 向左对齐并将图像视图的“leftOf”对齐：

```
<EditText
    android:id="@+id/searchBox"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:hint="@string/search"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_toLeftOf="@+id/searchButton"
    android:textStyle="italic|normal"
    android:typeface="normal"
    android:singleLine="true"
    android:ellipsize="end" />

<ImageButton
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:layout_alignParentRight="true"
    android:background="@drawable/search_button_selector"/> 
```

此外，您应该设置`ImageButton`使用的图像`android:src`，而不是`android:background`. 将背景设置为透明色以摆脱默认按钮背景。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T19:32:36.127

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageButton
        android:id="@+id/imageButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:background="@android:drawable/ic_search_category_default" />

    <EditText
        android:id="@+id/searchBox"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@+id/imageButton"
        android:ellipsize="end"
        android:hint="Search..."
        android:inputType="text"
        android:singleLine="true"
        android:textStyle="italic|normal"
        android:typeface="normal" />

</RelativeLayout> 
```

![在此处输入图像描述](../Images/c8867ee2022fe8a24f8ca5c14571969d.png)

# java - 选择选项时无法创建输入文本框

> ID：13571594
> 
> 赞同：0
> 
> 时间：2012-11-26T19:20:15.187
> 
> 标签：java, javascript, html, jsp

我是网络开发的新手，我试图从互联网上寻找任何资源，但我仍然无法弄清楚我的问题......

=> 读取文本文件并生成选项...我的 test.jsp 页面

```
<tr>
<td>Select test : </td>
<td><select id="testname" name="testname" onchange="makeBox()">
while ((src = test.readLine()) != null){
    param = "";
    temp =src.split(":");
    tempsize =temp.length;
    if ((tempsize >2)){
        int i;
        for (i=2; tempsize>i ; i++){
            if((temp[i].equals("null"))){
                 param = "";
            }
            else if ((i ==2) && (temp[i] != "null")){
                 param = temp[i];
            }
            else if ((i > 2)){
                 param = param + "," + temp[i];
            }
         }
     }
      %>
     <option value="<%=param%>" name="<%=temp[0]%>"><%=temp[0]%></option>
     <%
}
test.close();
    %>
</select></td>
</tr> 
```

当用户选择其中一个选项时，javascript将在输入文本框中生成相应的参数...（参数数量因每个测试而异）

前任。比方说

```
<option value="size,height,weight" name=apple>apple</option> 
```

被选中。然后我希望我的页面显示 3 个文本框，例如....

```
<td> Enter size: </td>
<td><input type="text" id="size" name="size"></td>
<td> Enter height: </td>
<td><input type="text" id="height" name="height"></td>
<td> Enter wieght: </td>
<td><input type="text" id="weight" name="weight"></td> 
```

我的尝试：

```
<script type="text/javascript">
    function makeBox() {
        var selected = document.getElementById('batchname');
        for (var i=1, n=selected.options.length;i<n;i++){
            if (selected.options[i].value){
                var a = "<input type = 'text' name = '" + selected.options[i].value + "' id = '" + selected.options[i].value + "'>";
                document.getElementById("inputBox").innerHTML = a;
            }
        }
    };
    </script> 
```

我正在读取的文本文件：

```
Apple:A.B.C.D:size:colour
Banana:G.C.D.E:length
Pear:L.D.E.F:shape:weight:color
Orange:E.C.A.W:density:length:color:weight
Melon:E.P.D.A                    // no param 
```

^ 不做任何事情...从选择框中发送多个值以创建多个输入框我是否根本错误？如果有更好的方法，请给我建议... :) 感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:30:51.437

您必须在选择字段中添加一个事件侦听器，并在更改值时创建一个元素。这是一个可能对您有所帮助的小代码。我只是写一个粗略的代码给你一个想法。您必须解决它以使其适用于您的特定情况。

您必须在加载正文后立即设置此事件侦听器。所以在你的 HTML

```
<body onload="init()" id="stage" class="theme"> 
```

在你的 javascript 上

```
function init() {
   document.getElementById("selectListID").addEventListener("change", function(){
      var value = document.getElementById("selectListID").value; // this gives you the selected value.
      // Your code to add the element that you need.
   };)
} 
```

希望这可以帮助。希望这可以帮助。

# ios - 在不中断双击缩放的情况下单击到 MKMapView

> ID：13571595
> 
> 赞同：8
> 
> 时间：2012-11-26T19:20:16.963
> 
> 标签：ios, mkmapview

`MKMapView`当用户在地图上单击时，我想在我的上面放置一个图钉。我可以使用密码，单击可以使用，但是当我双击缩放时，我会先单击一下。这是我设置识别器的代码：

```
 self.doubleTap = [[UITapGestureRecognizer alloc]
                      initWithTarget:self action:@selector(handleDoubleTap:)];
    self.doubleTap.numberOfTapsRequired = 2;
    self.doubleTap.numberOfTouchesRequired = 1;
    [mapView_ addGestureRecognizer:doubleTap_];

    self.singleTap = [[UITapGestureRecognizer alloc]
                      initWithTarget:self action:@selector(handleGesture:)];
    self.singleTap.numberOfTapsRequired = 1;
    self.singleTap.numberOfTouchesRequired = 1;
    [self.singleTap requireGestureRecognizerToFail: doubleTap_];
    [mapView_ addGestureRecognizer:singleTap_]; 
```

现在，引用 Apple 的话，这并不奇怪：

> 注意：在单击与双击手势的情况下，如果单击手势识别器不需要双击识别器失败，您应该期望在双击之前收到单击操作操作，即使在双击的情况下。这是预期和理想的行为，因为最佳用户体验通常涉及可堆叠的操作。

所以我添加`requireGestureRecognizerToFail`到我的单击识别器中。

> [singleTap requireGestureRecognizerToFail: doubleTap];

这确保了我的单击识别器不会被双击。

但...

现在我的双击识别器得到了双击并且`MKMapView`没有得到它们。我尝试在识别器中设置`cancelsTouchesInView`，`NO`但这也无济于事。

所以我需要一种方法来防止我的单击识别器获得双击（这似乎不太可能）或将我的双击事件发送到我的 mapView。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-03T10:44:03.987

在 iOS 8 上完美运行，双击操作为空

```
 - (void)viewDidLoad 
    {
        [super viewDidLoad];

        UITapGestureRecognizer *doubleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:nil];
        doubleTap.numberOfTapsRequired = 2;
        doubleTap.numberOfTouchesRequired = 1;
        [self.mapView addGestureRecognizer:doubleTap];

        UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleGesture:)];
        singleTap.numberOfTapsRequired = 1;
        singleTap.numberOfTouchesRequired = 1;
        [singleTap requireGestureRecognizerToFail: doubleTap];
        [self.mapView addGestureRecognizer:singleTap];
     }

   - (void)handleGesture:(UIGestureRecognizer *)gestureRecognizer
     {
            if (gestureRecognizer.state != UIGestureRecognizerStateEnded)
                return;
            //Do your work ...
     } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T13:41:32.057

发布的代码在 iOS 6 中似乎可以正常工作。
双击由地图视图自动处理，而不会干扰单击。

在 iOS 5.x 中，要让地图视图在不干扰单击的情况下执行其正常的双击处理，请实现`shouldRecognizeSimultaneouslyWithGestureRecognizer`委托方法并`YES`从中返回（只需设置`delegate`双击手势识别器的属性） .

不知道为什么这在 iOS 6 中是不必要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-02T21:54:23.373

我发现[这篇文章](http://www.mohiji.org/2011/12/15/tracking-touches-in-an-mkmapview/)对我帮助很大...
基本上，您需要找到 Apple 的手势识别器，并确保您不与它竞争。

乔纳森的解决方案几乎是完美的，除了一件事：
因为在 iOS 7 中，MKView 的所有手势都在子视图中。如果您想区分哪些是您的（直接添加到 MKMap 中）和哪些是 Apple 的，这会很方便，但它可能会在未来某个地方中断......

我最终做的是检查所有地图的子视图，希望它足够灵活，至少能够承受未来的一些变化......

看起来像这样：

```
- (void) hackInTheGestureRecognizer {

    for (UIView *aSubview in [[self theMap] subviews]) {

        if ([aSubview isMemberOfClass:[UIView class]]) {

            for (UIGestureRecognizer *aRecognizer in [aSubview gestureRecognizers]) {

                if ([aRecognizer isKindOfClass:[UITapGestureRecognizer class]]) {

                    if ([(UITapGestureRecognizer *) aRecognizer numberOfTapsRequired] == 2) {

                        [[self singleTapRecognizer] requireGestureRecognizerToFail:aRecognizer];
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-30T19:09:59.680

iOS 10 上的 Swift 3 版本：

```
// Gesture recognizer set up in Interface Builder
@IBOutlet weak var singleTapRecognizer: UITapGestureRecognizer!

override func viewDidLoad() {
    // double tap recognizer has no action
    let doubleTapRecognizer = UITapGestureRecognizer(target: self, action: nil)
    doubleTapRecognizer.numberOfTapsRequired = 2
    doubleTapRecognizer.numberOfTouchesRequired = 1
    mapView.addGestureRecognizer(doubleTapRecognizer)

    singleTapRecognizer.require(toFail: doubleTapRecognizer)
} 
```

请注意，单击是在 IB 中创建的。它可以很容易地在代码中创建，如下所示：

```
 let singleTapRecognizer = UITapGestureRecognizer(target: self, action: Selector("someAction"))
    singleTapRecognizer.numberOfTapsRequired = 1
    singleTapRecognizer.numberOfTouchesRequired = 1
    mapView.addGestureRecognizer(singleTapRecognizer) 
```

# c++ - Linux for C++ 中的低级磁盘操作

> ID：13571596
> 
> 赞同：9
> 
> 时间：2012-11-26T19:20:19.350
> 
> 标签：c++, input, fstream, hard-drive, output

linux中存在哪些C++中低级磁盘操作的方法？我正在尝试在磁盘上编写自己的数据管理器。例如，我想在 Linux 环境中创建一个 C++ 程序，在磁盘上分配一定数量（连续），然后自由地允许我读取/写入该数据块。我不认为我想使用该标准`fstream::open`，因为文件由操作系统管理，我可能无法在磁盘上获得连续的部分。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T19:27:49.777

^(通常，Linux 中用户程序1)的“低级”磁盘操作涉及打开磁盘专用设备。在我的计算机上，这些名称被称为“/dev/sda”或“/dev/sda4”，甚至是“/dev/disk/by-uuid/2a5150b4-71cb-11e1-b2fe-3b0d270b4e16”。

您在选择设备文件时应格外小心。使用它写入系统分区不是一个好主意。此外，在大多数情况下，打开设备文件需要 root 访问权限（原因很明显）。

是否使用的问题`fstream`是正交的。您可以使用`std::fstream`，`fopen`甚至`open`打开设备。然后使用与您所做的打开匹配的任何读取操作。

对于您的具体示例，您可能会重新考虑是否需要此功能。引用[Wikipedia](http://en.wikipedia.org/wiki/Ext3#Defragmentation)，而后者又引用了[Linux System Administrator Guide](http://www.tldp.org/LDP/sag/html/filesystems.html)：

> > 然而，正如 Linux 系统管理员指南所述，“现代 Linux 文件系统通过将文件中的所有块保持在一起，即使它们不能存储在连续的扇区中，也可以将碎片保持在最低限度。一些文件系统，如 ext3，有效地分配最接近文件中其他块的空闲块。因此在 Linux 系统中不必担心碎片。”

* * *

¹由于您提到 C++，我假设您正在编写用户程序而不是设备驱动程序。真正的“低级”磁盘操作仅在内核内部可用。实际上，如果您想编写设备驱动程序，请重新提出您的问题以明确这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:24:20.127

我不知道使用标准 Linux 文件系统有什么方法可以做到这一点。我认为您必须有一个单独的分区并直接在其`dev`伪文件（例如`/dev/sda2`）上执行 I/O。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-26T19:24:21.080

您应该使用系统调用。这里有一个列表：[linux系统调用](http://docs.cs.up.ac.za/programming/asm/derick_tut/syscalls.html)

# java - 使用 Apache Tomcat 版本 7.0 的 JDBC 连接错误

> ID：13571598
> 
> 赞同：1
> 
> 时间：2012-11-26T19:20:27.463
> 
> 标签：java, jsp, ms-access, jdbc

我在使用 apache tomcat 版本 7 时遇到了问题。我在记事本中创建了一个简单的 index.jsp 文件，并在 scriptlet 标记中编写了以下 JDBC 代码：

```
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
Connection c = DriverManager.getConnection("jdbc:odbc:testdsn");

out.println(c);
            Statement stmt = c.createStatement();

ResultSet rs = stmt.executeQuery("select * from login");

while(rs.next())
{
    out.println(rs.getString(1));
} 
```

我将与 WEB-INF 平行的 JSP 文件放在名为“test”的文件夹中，其中包含 WEB-INF 中的 classes 文件夹和 web.xml。我使用cmd创建了一个war文件并将其部署到tomcat。

当我尝试运行 index.jsp 文件时，它显示错误 data source name not found 并且未指定默认驱动程序。

我知道为什么这个错误出现在 Java 中，但这次我无法解决它。

问题是我已经创建了必要的 dsn，但它仍然不接受并显示未找到数据源名称。

堆栈跟踪是：

```
org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:568)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:455)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

根本原因

```
javax.servlet.ServletException: java.sql.SQLException: [Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified
org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:912)
org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:841)
org.apache.jsp.index_jsp._jspService(index_jsp.java:98)
org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

# icarousel - iOS iCarousel 重用不同专辑保留旧专辑信息问题

> ID：13571600
> 
> 赞同：0
> 
> 时间：2012-11-26T19:20:30.907
> 
> 标签：icarousel

我正在使用 Nick Lockwood 的 iCarousel。优秀作品。有一个问题，我需要在将新专辑加载到轮播之前以某种方式重置/清除轮播。

背景：应用程序从 API 中提取 XML 并将其解析为数组。TableView 使用第一个 xml 作为专辑列表。当用户选择/点击相册时，我会使用 iCarousel 推送查看。用户可以备份并选择另一个相册

第一张专辑效果很好。只要之后挑选的任何专辑都具有与第一张一样多或更多的照片，就可以正常工作。当用户选择图片少于所选第一张专辑的专辑时，会发生炸弹。

错误在：

```
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
{
...//('thumbs' is thumbnail array)
 APIContentObject *currentPhoto = [thumbs objectAtIndex:index];        
...
} 
```

希望将我的数组同步到 iCarousel，当 index 为 6 且 array.count 为 4 时，它会尝试加载“[thumbs objectAtIndex:index]”...

我试过 carousel=nil; 在 viewWillDisappear 上，不。是我做一个轮播=nil；在 ViewDidLoad 中，我什么也得不到……它是什么时候实例化的？在 ViewDidLoad 之前？

我真的只需要知道如何清空它或清除它或重新定位/初始化它。我尝试了一个'for'循环来手动删除itematindex，但我也有错误。

它确实有效，只是不像预期的那样。律的建议？非常感激。

编辑：好的，当我使用时：

```
- (NSUInteger)numberOfVisibleItemsInCarousel:(iCarousel *)carousel
{
    //return the total number of items in the carousel
    return [thumbs count];
} 
```

设置可见项目的数量......这似乎是一个兴趣点。如果我不设置它/使用这个代码块，那么只会显示 7 张左右的图像......如果我设置它，它们都会显示出来，但是当点击图像数量较少的专辑时它会爆炸。我在这个圈子里跑来跑去。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:17:14.177

从阅读另一篇关于回收问题的帖子中获得了线索。

我接到电话要在回收站中加载图像...（ProgrammerError *ME！）

```
if (view == nil)
    {...
    [((FXImageView *)view) setImageWithURL:[NSURL URLWithString:currentPhoto.ThumbnailURL] placeholderImage:[UIImage imageNamed:@"loading.png"]];
    ...} 
```

把它移到条件和 whamo 之外......一切都好。

# mysql - 删除父级时如何保留外键的数据？

> ID：13571602
> 
> 赞同：2
> 
> 时间：2012-11-26T19:20:40.843
> 
> 标签：mysql, database

我正在制作一个具有以下内容的数据库：

*   `Artist`桌子
*   `CD`引用艺术家的表。

我希望这样的情况是，当`Artist`从数据库中删除时，`CD`他们所做的**不能被自动删除**，但仍然应该可以删除`Artist`他们所做的。

我是一个新手 MySQL 编码器，我认为这与**ON DELETE CASCADE/RESTRICT/SET NULL**或类似的东西有关，但不是 100% 肯定，但我很确定它**不是 ON DELETE CASCADE**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:30:59.200

如果要保留 CD 记录，则需要在删除艺术家之前将其父（艺术家）的外键字段设置为 NULL（或不同的艺术家记录）。在 MySQL 中，您可以使用 ON DELETE SET NULL 自动将外键设置为 NULL。

你应该考虑你是否真的想要这样做——它会让你的数据处于一种奇怪的状态。为什么您需要删除艺术家而不是其对应的 CD？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:25:54.240

您应该首先删除对要删除的艺术家的所有引用，然后删除艺术家应该没有问题。如果仍有对该对象的引用，则不能删除该对象。

# google-analytics - Google Analytics for Google Play 应用页面

> ID：13571608
> 
> 赞同：7
> 
> 时间：2012-11-26T19:20:56.247
> 
> 标签：google-analytics, google-play

我想分析人们使用哪些搜索关键字在 Play 商店中找到我的应用。

那可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-26T13:21:34.123

自 2013 年 10 月起，您可以将您的 Google Analytics（分析）和 Google Play 帐户关联起来，以查看您的应用页面的浏览量以及由此产生的下载转化。请参阅此处： https: [//support.google.com/analytics/answer/2956981](https://support.google.com/analytics/answer/2956981)

还不是关键字，但它很接近！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T19:36:49.973

由于您无法直接访问您的应用页面的源代码，因此无法包含必要的 JS，不幸的是，Google 没有提供任何方法来插入您的跟踪 ID，例如在 Google 代码中。所以我认为这是不可能的。

在这里也看看这个问题：[https ://webapps.stackexchange.com/questions/25859/can-google-analytics-analyze-usage-of-my-google-play-app-page](https://webapps.stackexchange.com/questions/25859/can-google-analytics-analyze-usage-of-my-google-play-app-page)

# node.js - 全局 NPM 模块不适用于 OS X Mountain Lion

> ID：13571609
> 
> 赞同：2
> 
> 时间：2012-11-26T19:21:02.160
> 
> 标签：node.js, osx-mountain-lion, npm, gruntjs, forever

我有一个很好的安装

OS X 10.8.2 上的 Node@v0.8.14 和 NPM@1.1.65 用于本地开发。

一切都按预期工作，除了我尝试使用`-g`全局标志安装的软件包，如 grunt 或 forever，没有作为终端命令找到。

我尝试添加一些路径，但到目前为止没有任何效果......

这是我的标准`echo $PATH`

```
/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/:/usr/local/bin:/usr/local/share:/usr/local/share/npm:/usr/local/share/npm/lib/node_modules/:.npm 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T13:41:30.857

我有同样的问题 - 我通过全局安装 n 解决了它

```
npm install -g n 
```

为我工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:35:59.193

我也遇到了这个问题。您需要检查您的 npm 前缀，如果不是，请将其更改为 /usr/local。[在这里](https://stackoverflow.com/questions/12212875/coffeescript-install/14602913#14602913)检查我的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-31T16:36:02.293

唯一对我有用的解决方案是将模块直接安装到我的用户文件夹中，例如：

```
cd ~
npm install whatever 
```

这不是一个很好的解决方案，因为我的用户文件夹现在有一个 node_modules 目录，但我厌倦了尝试把事情做好。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-02-27T12:06:48.137

使用 sudo 命令安装 NPM 模块，

像这样

```
sudo npm install -g express 
```

# php - 想要更改 opencart 类别插件以显示子类别

> ID：13571618
> 
> 赞同：0
> 
> 时间：2012-11-26T19:22:01.763
> 
> 标签：php, opencart

我已经安装了类别插件并将其显示在我网站的左侧。它目前显示主要的父类别，但我想知道如何更改它以便它显示子菜单项（我只有父类别下方的一级）。

我目前拥有的代码是：

```
<div class="box">
  <div class="box-heading"><?php echo $heading_title; ?></div>
  <div class="box-content">
 <div class="box-category">
  <ul>
    <?php foreach ($categories as $category) { ?>
    <li>
      <?php if ($category['category_id'] == $category_id) { ?>
      <a href="<?php echo $category['href']; ?>" class="active"><?php echo $category['name']; ?></a>
      <?php } else { ?>
      <a href="<?php echo $category['href']; ?>"><?php echo $category['name']; ?></a>
      <?php } ?>
    </li>
    <?php } ?>
  </ul>
</div> 
```

我在其他帖子中尝试了使用 $child 的建议，但我不知道该怎么做。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:41:39.033

这又是一个用火箭筒试图杀死蚂蚁的案例……

如果您根本不想在您的 opencart 中显示父类别，那么您到底为什么要使用它们呢？只需移动子类别，使其成为父母（第一级）并删除旧父母。

这对用户来说也更好。想象一下这种情况（假设您正在使用 SEO 并为类别和产品设置了所有 SEO 关键字），您有一个父类别*Notebooks*和子类别*Netbooks*、*Ultrabooks*、*Tablets*、*Laptops*等。然后是*Netbooks*下的产品（假设*Asus EEE* ) 将有这个 URL: `http://yourstore.com/notebooks/netbooks/asus-eee`. 但是如果您隐藏了父类别*笔记本*，用户会问：“/notebooks/ 部分来自哪里？” 在下一步中，他`/netbooks/asus-eee`将从 URL 中删除要点击的部分`http://yourstore.com/notebooks`，看看会发生什么......

我认为隐藏父类别并仅列出子类别只会让用户感到困惑......因此，如果没有真正的理由这样做，请按照我上面的建议（第一段）。

# regex - 使用正则表达式就地重复单词

> ID：13571619
> 
> 赞同：2
> 
> 时间：2012-11-26T19:22:04.867
> 
> 标签：regex, sublimetext2

在文本文件中，我使用 a`find`过滤以下选择

```
getEnvReadinessConfirmed(
getVersionAvailable( 
```

（我`get\w*\(`经常这样做）

有什么办法可以在单词出现后复制它，如

```
getEnvReadinessConfirmed(getEnvReadinessConfirmed(
getVersionAvailable(getVersionAvailable( 
```

我正在查看[http://www.nncron.ru/help/EN/add_info/regexp.htm](http://www.nncron.ru/help/EN/add_info/regexp.htm)，特别是

```
{n,}    To repeat n or more times 
```

一些提示，但无法使任何工作。

希望我没有做任何非常愚蠢的事情，但这是截图

![在此处输入图像描述](../Images/5a6013ce7b9f62096443f527e7ad615a.png)

![在此处输入图像描述](../Images/9dd566f9e7297feddb95a98f377e02c7.png)

非常感谢任何指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T21:00:42.087

我想这就是你要找的

寻找：`(get\w+\()`

代替：`$1$1`

换句话说，捕获组 #1 中匹配的子字符串并将其替换为自身的两个副本。

你链接到的那个参考是可怕的。对于初学者，它描述了一种特定的正则表达式风格（由 使用的`nnCron`那个），这在其语法中非常不寻常（例如`\b`，对于词的开头和`\B`词尾；`(?#...)`对于积极的后视和`(?~...)`消极的后视）。虽然大多数语法元素都与 Perl 风格的正则表达式兼容，但文档在描述它们方面做得很差。

SublimeText 似乎使用 Boost 正则表达式库来支持它的正则表达式，所以你最好使用[Boost 文档](http://www.boost.org/doc/libs/1_52_0/libs/regex/doc/html/boost_regex/syntax/perl_syntax.html)。[这里](http://www.regular-expressions.info/)还有一个很好的教程/参考网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:23:58.297

你可以试试这条线：

```
(getEnvReadinessConfirmed\()+ 
```

这意味着一旦加号是`{1,}`. 请注意掩蔽括号之前的反斜杠，`(`以便也搜索此字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T19:24:44.170

您可以使用[反向引用](http://www.regular-expressions.info/brackets.html)

```
/(get\w+\()\1/ 
```

[看到它在 Rubular 上工作](http://rubular.com/r/0un1cTuM8q)

在这里，它在 Sublime Text 2 中工作（根据您的问题标签）。

1.  按`cmd`+`F`
2.  请按`✶</kbd> button in the lower left`
3.  `(get\w+\()\1`在搜索字段中输入
4.  点击`Find`

![崇高的文字 2](../Images/c1a8f77036c08994d4054381344411cf.png)

* * *

这是使用正则表达式进行查找/替换的方法

### 前

![前](../Images/8f17f2a7c7d3bade1838d573f0ecca6b.png)

### 后

![后](../Images/8bf92df2cdde048ac3f932fe0b961764.png)

# c++ - G++ 4.6.3 Linux 中使用 quadmath 的四倍精度

> ID：13571621
> 
> 赞同：6
> 
> 时间：2012-11-26T19:22:11.667
> 
> 标签：c++, linux, ubuntu, quadruple-precision

我试图执行代码

```
#include <quadmath.h>
#include <iostream>
int main()
{
  char* y = new char[1000];
  quadmath_snprintf(y, 1000, "%Qf", 1.0q);
  std::cout << y << std::endl;
  return 0;
} 
```

用这个命令

```
g++ test.cpp -o test 
```

但我得到了错误：

```
/tmp/cctqto7E.o: In function `main':
test.cpp:(.text+0x51): undefined reference to `quadmath_snprintf(char*, unsigned int, char const*, ...)'
collect2: ld returned 1 exit status 
```

版本是：

```
g++ --version
g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3
Copyright (C) 2011 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T19:38:08.270

我看到了同样的行为：

```
~/coding/q$ g++ test.cpp -lquadmath
/tmp/ccYdHwL5.o: In function `main':
test.cpp:(.text+0x51): undefined reference to `quadmath_snprintf(char*, unsigned int, char const*, ...)'
collect2: ld returned 1 exit status 
```

一种解决方法是使用此模式包含标题：

```
extern "C" {
#include "quadmath.h"
} 
```

之后：

```
~/coding/q$ g++ test.cpp -lquadmath
~/coding/q$ ./a.out 
1.000000 
```

# tsql - SQL，FMTONLY 上的无穷大错误

> ID：13571626
> 
> 赞同：0
> 
> 时间：2012-11-26T19:22:26.950
> 
> 标签：tsql, stored-procedures, asp-classic, fmtonly

我使用 ASP Classic 连接到数据库，当我尝试执行不存在的 proc 时，永远不会返回错误并且 SQL Profiler 继续调用：

```
SET FMTONLY OFF
SET FMTONLY OFF
SET FMTONLY ON  EXEC gpa_proctest_  SET FMTONLY OFF
SET FMTONLY ON  EXEC gpa_proctest_  SET FMTONLY OFF 
```

我的网络应用程序一直在等待错误。

这是我的 ASP：

```
set cmd = Server.CreateObject("ADODB.Command")        
cmd.ActiveConnection = conn 'connection string
cmd.CommandText = "gpa_proctest_"
cmd.CommandType = adCmdStoredProc

cmd.Parameters.Append cmd.CreateParameter("@ID_PRJ", adInteger, adParamInput, , 33)
cmd.Parameters.Append cmd.CreateParameter("@LINHA", adChar, adParamInput, 1, "A")

set Rs1 = Server.CreateObject("ADODB.RecordSet")
Rs1.CursorLocation = adUseServer
Rs1.CursorType = adOpenStatic

Rs1.Open cmd 
```

有谁能够帮我？

谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:01:33.170

我似乎无法发表评论，只有答案，对此感到抱歉。

如果一起删除“SET FMTONLY”，你会遇到同样的问题吗？如果没有，请尝试在存储过程中使用 SET FMTONLY 而不是在其外部。当 proc 不存在时，这可能会帮助您获得您正在寻找的错误。

# javascript - this.id 在 ie 中不起作用

> ID：13571627
> 
> 赞同：1
> 
> 时间：2012-11-26T19:22:28.393
> 
> 标签：javascript, onclick

我一直在使用 JavaScript 组合手风琴式左导航，我遇到了以下代码在 Chrome 和 Firefox 中有效但在 IE 中无效的问题。

```
function navClick(clickedDD){
    var numDD = document.getElementsByClassName('navDropdown');
    var numArrow = document.getElementsByClassName('navUnfolded');
    var selectedDD = document.getElementById('dd0' + clickedDD);
    var arrow = document.getElementById('arrow0' + clickedDD);
    if (selectedDD.style.display == 'none') {
        for (var i = numDD.length - 1; i >= 0; i--) {
            numDD[i].style.display = 'none';
        }
    }
    if (arrow.className == 'navFolded') {
        for (var i = numArrow.length - 1; i >= 0; i--) {
            numArrow[i].className = 'navFolded';
        }
    }
    if (selectedDD.style.display == 'none') {
        selectedDD.style.display = 'block';
        arrow.className = 'navUnfolded';
    } else {
        selectedDD.style.display = 'none';
        arrow.className = 'navFolded';
    }
} 
```

我不确定是什么让它无法运行，但我怀疑这是我在 onclick 中使用的“this.id”。

```
<div id="1" onclick="navClick(this.id);">Content</div> 
```

我对 JavaScript 比较陌生，如果知道有帮助的话。基本上，此函数首先查看是否显示单击的 div，如果没有，则在继续之前将所有 div 的 display 设置为 none。如果显示它，它什么也不做，因为下一位将处理它。对于带有变化的箭头图像的 div，也有类似的规则。然后，如果没有显示 div，则将其设置为“阻止”，否则将其设置为“无”，这使我可以打开和关闭单个菜单 div，而无需打开/关闭其他菜单。

我正在使用 onclick 函数收集的 id 来控制具有不同 id 的 div，从底部到函数顶部的变量中可以看到。也许这就是 IE 变得敏感的地方。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T19:29:46.367

在您的元素上，尝试将 ID 放在引号中：

```
<div id = '1' onClick="navClick(this.id);"> 
```

您还可以尝试使用 javascript 的“警报”功能来找出 IE 中的数据是什么样的：

```
alert(selectedDD); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:33:42.090

`getElementsByClassName` [IE8 或更低版本不支持](http://caniuse.com/#feat=getelementsbyclassname)。

如果您不想使用完整的库，您可以尝试[Jonathan Snook 的IE8 及以下兼容性方法。](http://snook.ca/archives/javascript/your_favourite_1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T19:28:37.247

您的 id in`<div id="1" ..`无效：

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

因此，请尝试将其更改为有效的（例如`#a1`），因为这可能是您的问题的原因。

# windows - 使用没有 .NET Framework 4.0 的 Windows SDK 7.1 编译 C++ 代码

> ID：13571628
> 
> 赞同：1
> 
> 时间：2012-11-26T19:22:29.537
> 
> 标签：windows, .net-4.0, sdk, linker

我想使用适用于 x86_32 的 Windows SDK 7.1 编译 C++ 项目。我正在使用带有最新更新的干净 Windows XP SP3 x86_32。项目（名称无关紧要）是一个跨平台项目，使用 Makefiles（无 vcxproj/msbuild）构建，仅包含非托管 C++ 代码（无 C# 或其他托管代码）。

我已经安装了 Windows SDK 7.1（它需要 .NET Framework 2.0 来运行安装程序和 .NET Framework 4.0 来安装 C++ 编译器），使用 SDK 中的 SetEnv.cmd 脚本设置编译环境并成功构建项目。

现在我需要使用相同的 Windows SDK 在不同的 Windows 版本（2003、Vista、7、2008）上测试构建。我不想每次需要在干净的操作系统上测试构建时都从 ISO 安装 Windows SDK - 这需要很多时间。相反，我想要一个带有 C++ 编译器的文件夹，我可以将其复制到干净的 Windows 实例，复制旁边的代码源并运行批处理脚本以开始构建。

所以我将所有 Windows SDK 文件复制到另一个文件夹，卸载了 Windows SDK、C++ 编译器和 .NET Framework 2.0。比将 Windows SDK 文件复制回原始文件夹（我可以将它们移动到相应地更改 SetEnv.cmd 脚本的任何位置）。之后构建工作正常。

但是当我卸载 .NET Framework 4.0 时，构建失败`link.exe`：

```
LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt 
```

我想，`link.exe`使用 .NET Framework 4.0 安装中的一些库或工具，所以我`C:\WINDOWS\Microsoft.NET`在卸载之前复制了文件夹，然后将其复制回原来的位置。那没有帮助。

我用谷歌搜索`LNK1123`，唯一的建议是：“安装 VS2010SP1”（我根本不使用）和“重新安装 .NET Framework 4.0”（有效，但这正是我试图避免的事情）。

不同的编译器不是一个选项：在 Windows 上，该项目仅支持来自 VS2010 的编译器（包含在 Windows SDK 7.1 中）。

我很困惑 - `link.exe`Windows SDK 7.1 中的 x86_32 确实**需要**.NET Framework 4.0**运行时**（不是某些库或本机工具）来构建完全**本机和非托管**C++ 代码（不会以任何方式与 CLR 一起使用） ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:12:08.390

解决了这个问题，非托管 dll**不需要**.NET Framework 4.0 运行时。`link.exe`要在干净的 Windows XP SP3（那里从未安装过 SDK 和框架）上运行 Windows SDK 7.1 工具链的副本，必须将这些库添加到`%PATH%`：

```
msvcp100.dll
msvcr100.dll
msvcr100_clr0400.dll 
```

# visual-studio - Visual Studio/msbuild：设置“内容”输出目录

> ID：13571629
> 
> 赞同：0
> 
> 时间：2012-11-26T19:22:31.453
> 
> 标签：visual-studio, msbuild, visual-studio-2012

我正在尝试实现 markerikson 在这里：[Visual Studio - 将“内容”文件发送到输出目录而不是子目录？](https://stackoverflow.com/questions/3134583/visual-studio-sending-content-files-to-the-output-directory-instead-of-a-sub)

问题是，那里的答案（使用xcopy）是一个hack。如果我使用内容（在我的情况下为 .dll 和其他数据）添加对项目的引用，则内容仍会出现在子文件夹下。

如何设置 Build Action -> Content 并为其中包含的文件设置路径？这种传播方式是，如果我添加对包含项目的引用，文件是否位于引用项目输出中的“正确”子文件夹中？内容包括必须在搜索路径中的非托管代码，即在 bin 文件夹中，子文件夹将不起作用。

有很多内容文件，将它们与我的代码保持一致似乎很垃圾。我的代码现在在一个子文件夹中，但它不正确..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:30:37.110

编辑 .csproj（如果您安装了[Productivity Power Tools ，请](http://go.microsoft.com/fwlink/?LinkId=189202)*编辑项目文件* ）并将文件构建操作更改为. 重建。`ReferenceComWrappersToCopyLocal`

最终，所有 IO 操作都归结为`%FrameworkDir%\v4.0.30319\Microsoft.Common.targets`

一些复制目标定义 `DestinationFolder="$(OutDir)"`（复制到没有文件夹的输出）和一些定义`DestinationFiles="@(n->'$(OutDir)%(DestinationSubDirectory)%(Filename)%(Extension)')"`（保持文件夹结构）。

您可以看到 CopyLocal=true 的项目被复制到 中`_CopyOutOfDateSourceItemsToOutputDirectoryAlways`，`DestinationFiles`同时保留文件夹结构。

# php - 为什么我的重写规则会禁用额外的 $_GET 数据？

> ID：13571632
> 
> 赞同：2
> 
> 时间：2012-11-26T19:22:43.237
> 
> 标签：php, apache, mod-rewrite, url-rewriting

我正在为我的整个域使用这个重写规则：

```
RewriteRule ^([A-Za-z0-9/-]+)$ /index.php?path=$1 
```

例如，我的网址如下所示：

[http://www.example.com/page/subpage/4/anything/](http://www.example.com/page/subpage/4/anything/)

问题是当我想手动添加一个特定的`$_GET`，像这样：

[http://www.example.com/page/subpage/4/anything/?also=admin](http://www.example.com/page/subpage/4/anything/?also=admin)

我记得这在我一直在开发的一些网站上有效，但在这里不起作用。

如何修复我的 RewriteRule 以便我可以添加`$_GET`这样的数据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T19:25:49.417

使用[查询字符串附加 (QSA)](http://wiki.apache.org/httpd/RewriteQueryString)：

```
RewriteRule ^([A-Za-z0-9/-]+)$ /index.php?path=$1 [QSA] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:25:48.433

添加作为查找带有 ? 的 URL 的第二条规则 在他们中：

```
RewriteRule ^([A-Za-z0-9/-]+)\?(.*) /index.php?path=$1&$2 
```

# sql - 从同一个表中获取多行

> ID：13571634
> 
> 赞同：1
> 
> 时间：2012-11-26T19:22:58.557
> 
> 标签：sql, sql-server, pivot

我遇到的问题是我要查找的表中有多个结果。所以如果我有这个：

```
SELECT DISTINCT student.ident AS [Ident],
     proghist.prgc AS [Test Code]
FROM student 
LEFT OUTER JOIN proghist 
```

对于一些学生，我得到多个“测试代码”，所以它看起来像这样：

```
Ident   Test Code
123456   1
123456   4
654321   2
654321   6
122222   1 
```

有没有办法将它们组合成一行并分开列？

编辑：我希望数据出现在最终结果中：

```
123456 1 4 
654321 2 6 
122222 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T19:47:01.273

由于您使用的是 SQL Server，如果您使用的是 SQL Server 2005+，那么您可以使用该`PIVOT`功能。如果您知道`TestCodes`每个最多只能有两个，`ident`那么您可以对这些值进行硬编码：

```
select ident,
  [1] TestCode1,
  [2] TestCode2
from
(
  SELECT  s.ident AS Ident,
    p.prgc AS TestCode,
    row_number() over(partition by s.ident order by p.prgc) rn
  FROM student s
  LEFT OUTER JOIN proghist p
    on s.ident = p.ident
) src
pivot
(
  max(TestCode)
  for rn in ([1], [2])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/39a67/7)

如果您有未知数量的 值`TestCodes`，则可以`PIVOT`对数据使用动态 SQL：

```
DECLARE @cols AS NVARCHAR(MAX),
    @colsPivot AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(rn)
                    FROM
                    (
                      select cast(row_number() over(partition by s.ident order by p.prgc) as varchar(50)) rn
                      FROM student s
                      LEFT OUTER JOIN proghist p
                        on s.ident = p.ident
                    ) src
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colsPivot = STUFF((SELECT distinct ',' + QUOTENAME(rn) + ' as TestCode'+rn
                    FROM
                    (
                      select cast(row_number() over(partition by s.ident order by p.prgc) as varchar(50)) rn
                      FROM student s
                      LEFT OUTER JOIN proghist p
                        on s.ident = p.ident
                    ) src
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT Ident, ' + @colsPivot + ' from 
             (
               SELECT  s.ident AS Ident,
                p.prgc AS TestCode,
                row_number() over(partition by s.ident order by p.prgc) rn
              FROM student s
              LEFT OUTER JOIN proghist p
                on s.ident = p.ident
            ) src
            pivot 
            (
                max(TestCode)
                for rn in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/c4bf2/5)

如果您无权访问该`PIVOT`函数，则可以使用带有`CASE`语句的聚合函数：

```
select ident,
  max(case when rn = 1 then testcode else '' end) TestCode1,
  max(case when rn = 2 then testcode else '' end) TestCode2
from
(
  SELECT  s.ident AS Ident,
    p.prgc AS TestCode,
    row_number() over(partition by s.ident order by p.prgc) rn
  FROM student s
  LEFT OUTER JOIN proghist p
    on s.ident = p.ident
) src
group by ident 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/c4bf2/6)

这三个都将产生相同的结果：

```
|  IDENT | TESTCODE1 | TESTCODE2 |
----------------------------------
| 122222 |         1 |         0 |
| 123456 |         1 |         4 |
| 654321 |         2 |         6 | 
```

# java - 如何计算项目的圈复杂度（不是类/函数）？

> ID：13571635
> 
> 赞同：5
> 
> 时间：2012-11-26T19:23:04.400
> 
> 标签：java, cyclomatic-complexity

如何计算整个Java项目的[圈复杂度？](http://en.wikipedia.org/wiki/Cyclomatic_complexity)我对每种方法都有复杂性，但是如何将它们全部聚合成一个数字指标？有什么想法或现有方法吗？

我不是在寻找工具，而是在寻找算法。

简单平均几乎不起作用，因为有许多`1`复杂性方法，它们的复杂性并不低，但对代码库的重要性较低（在大多数情况下）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T20:04:00.330

整本书都是关于代码度量的，所以你很幸运你问了一个更具体的问题。对于 Java 圈复杂度，您可以找到超过圈复杂度 5 或 6 的方法数量（您可以在此处选择数字）。如果这个数字超过了你方法数量的一定百分比，那么整体圈复杂度很差。一个好的百分比数字完全取决于项目的大小，所以也许不是只除以方法的数量，您可以通过使其在大数字时缓慢增长来减轻方法计数的权重，例如一个平方根或对数，以尝试使其随着项目的增长而更加稳定。

也许是这样的：

```
public double evaluateCyclomaticComplexity(List<MethodStat> methodStats) {
    int bad = 0;
    for (MethodStat methodStat : methodStats)
        if (methodStat.getCyclomaticComplexity() >= 6)
            bad++;

    double denominator = Math.sqrt(methodStats.size());
    return bad * 100.0 / denominator;
} 
```

这里返回的数字越小越好。对于*非常*糟糕的项目，这将返回大于 100 的值。

分母函数应该代表随着代码库的增长，复杂性增长的速度有多快。通常，您希望随着代码的增长而降低每个函数的 CC 以使其保持可维护性，因此随着项目规模的增加而增长较慢的东西是最好的。

对其进行测试、调整等。最终，代码指标很难做到恰到好处，在阅读了几篇关于开源软件的期刊论文后，我可以证明这一点，这些论文使用数字来表示“可维护性”。如果花足够的时间在上面，我们在这里能想到的任何东西都可能会得到很大的改进。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T19:43:07.660

我找到了这个公式：

```
TCC = Sum(CC) - Count(CC) + 1
TCC: Total CC
Sum(CC): Sum of CC of all functions
Count(CC): Number of functions 
```

来源：[http ://www.aivosto.com/project/help/pm-complexity.html](http://www.aivosto.com/project/help/pm-complexity.html)

但也许它太有限了。

另一个想法是将程序的调用图视为程序本身并计算调用图的 CC。节点将由它们的 CC 加权。（我不知道这是否可行，这只是一个想法）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T19:49:09.553

我不知道这是否会有所帮助，但我只是想说出我的想法。您可以使用全局深度计数器来获取方法调用深度并在每次方法调用时更新它。您会看到这里的每个方法都手动注入了相同的代码段，但可能有一种解决方案可以将代码自动注入所有方法。我认为，通过堆栈跟踪长度的级别，您可以计算聚合的复杂性。

```
public class Cyclomatic
{
    public static int max = Integer.MIN_VALUE;

    static void a() 
    {
        b();
        int temp = Thread.currentThread().getStackTrace().length;
        if (temp > max)
            max = temp;
    }

    static void b() 
    {
        c();
        int temp = Thread.currentThread().getStackTrace().length;
        if (temp > max)
            max = temp;
    }

    static void c() 
    {
        int temp = Thread.currentThread().getStackTrace().length;
        if (temp > max)
            max = temp;
    }

    public static void main(String[] args) 
    {
        a();
        System.out.println(max);
    }
} 
```

**输出：**

```
5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-06T21:29:33.210

据我所知，您的问题还没有答案。但是 Microsoft Visual Studio 正在做的是总结给定项目的所有圈复杂度，并将结果视为汇编级别的圈复杂度。但我个人会建议你使用 Max Cyclomatic Complexity。只需简单地将最大圈复杂度视为项目圈复杂度。这样做的原因是，只要项目中存在一种具有更高循环复杂度的方法，那么项目就会成为您的软件系统的瓶颈。另一个原因是由于强连通图论，根据 McCabe 的原始论文，强连通图的圈复杂度是独立存在的电路内圈复杂度之间的最大圈复杂度。

# android - 从图库中查找随机图片

> ID：13571651
> 
> 赞同：1
> 
> 时间：2012-11-26T19:24:31.143
> 
> 标签：android, random, image-gallery

我正在开发一个需要从 android 设备上的图库中获取**随机图片的 android 应用程序。**问题是我只能找到与允许用户选择他们想要的图片的图库进行交互的方式。

有人知道我应该怎么做才能完成这项工作吗？Java 代码会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:34:53.120

我可能会使用[这种](https://stackoverflow.com/a/3021018/1001401)方法，然后将 ID 放入一个数组中，然后使用 Random 对象来获取一个从 0 到数组大小的随机整数。

# asp.net - 嵌套的 DIV 标记溢出父 DIV 标记

> ID：13571662
> 
> 赞同：1
> 
> 时间：2012-11-26T19:25:16.377
> 
> 标签：asp.net, css

父 DIV 标签静止时出现问题，如背景着色所注意到的。

CSS：

```
div
{
  postion:absolute;
}
...
#divBody
{
    border: 1px solid red;
    left: 20%;
    right: 10%;
    top: 110px;
    width:70%; min-width: 150px;
    min-height: 200px;
    text-align: center;
    position: relative;
}
...
div .Registration
{
    border: 1px solid black;
    background-color: red;
    text-align: center;
    width: 100%;
    height: 100%;
}

div .QA
{
    background-color: black;
    width: 100%;
    height: 100%;
    text-align: left;
} 
```

HTML：

根主

```
 <div id="divBody" runat="server">
    <asp:ContentPlaceHolder ID="cphMain" runat="server" />
  </div> 
```

根.aspx

```
<div id="divReg" style="visibility: visible;" class="Registration" runat="server">
  ...
</div>
<div id="divQA" style="visibility: hidden;" class="QA" runat="server">
  <table id="tblContent" class="tblQA" runat="server" />
  ...
</div> 
```

*   HTML Table 对象在此处仅声明为占位符，它通过数据连接器和迭代填充到代码隐藏中。

屏幕截图：

![子 Div 标签溢出父](../Images/4bc3122c3a7dc4c105ab80380505f634.png)

### 问题：

如何让父 DIV 标签与子 DIV 标签一起扩展？

# c# - 安装多个版本的 VS 时，如何将 VSIX（Visual Studio 扩展）从本地驱动器安装到特定版本的 VS？

> ID：13571664
> 
> 赞同：2
> 
> 时间：2012-11-26T19:25:16.293
> 
> 标签：c#, .net, visual-studio

相当简单的事情让我绊倒了。我有一个想要添加到 VS2012 的 VSIX 文件。我也有 VS2010 在同一个盒子上运行。在为`Browse`按钮戳菜单后，我只需双击它即可运行该文件。它已安装但进入 VS2010。有没有办法将它安装到VS2012？VSIX 文件 VS 版本是否特定，我需要获取 VS2012 特定的 VSIX？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T22:27:48.383

VSIX 文件包含 .vsixmanifest 文件，说明支持哪些版本的 VS。如果您打开 vsix 文件，您可以看到清单 - 它是一个 zip 文件，因此您可以更改/附加扩展名，因此它是 zip 来打开它。您可以尝试 hack 为 VS2012 安装它。请参阅：[如何在我的 PC 上正确版本的 VS 上安装 EFPowerTool Beta](https://stackoverflow.com/questions/13441728/how-to-install-efpowertool-beta-on-the-right-version-of-vs-on-my-pc/13444395#13444395)

# networking - TouchOSC 的 iOS 设备的 udp 地址

> ID：13571665
> 
> 赞同：1
> 
> 时间：2012-11-26T19:25:24.020
> 
> 标签：networking, udp, osc

我试图通过 TouchOSC 的主机名而不是 IP 地址来寻址 iPad。我正在使用 Max/MSP 和 udpsend 对象将标签信息传输到 ipad 上的 TouchOSC。通过 touchosc 网站，它说用于`<device name> [<device model>] (TouchOSC)`寻址平板电脑。但这些信息似乎消失在了以太中。有人对此有经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:29:48.110

想通了这个问题。简单地使用 iOS_device_name.local（就像任何 mac 计算机网络主机名地址一样），您的 TouchOSC 消息应该直接放在正确的位置。希望这对某人有帮助！

# android - Android 中的 Flickr JSON 解析

> ID：13571666
> 
> 赞同：0
> 
> 时间：2012-11-26T19:25:24.000
> 
> 标签：android, json, parsing, flickr

我想从这个 url ( [http://api.flickr.com/services/feeds/photos_public.gne?format=json](http://api.flickr.com/services/feeds/photos_public.gne?format=json) ) 解析 JSON，但文档实际上返回了一个无效的 JSON。看

```
 jsonFlickrFeed({
        "title": "Uploads from everyone",
        "link": "http://www.flickr.com/photos/",
        "description": "",
        "modified": "2012-11-26T18:27:41Z",
        "generator": "http://www.flickr.com/",
        "items": [
       {
            "title": "2012 Thanksgiving Holiday Weekend",
            "link": "http://www.flickr.com/photos/agape_boarding_school/8220697785/",
            "media": {"m":"http://farm9.staticflickr.com/8478/8220697785_bb298ac5b3_m.jpg"},
            "date_taken": "2012-11-24T14:19:21-08:00",
            "description": " <p><a href=\"http://www.flickr.com/people/agape_boarding_school/\">Agape Boarding School<\/a> posted a photo:<\/p> <p><a href=\"http://www.flickr.com/photos/agape_boarding_school/8220697785/\" title=\"2012 Thanksgiving Holiday Weekend\"><img src=\"http://farm9.staticflickr.com/8478/8220697785_bb298ac5b3_m.jpg\" width=\"240\" height=\"159\" alt=\"2012 Thanksgiving Holiday Weekend\" /><\/a><\/p> <p>Great Day at Agape Boarding School<\/p>",
            "published": "2012-11-26T18:27:41Z",
            "author": "nobody@flickr.com (Agape Boarding School)",
            "author_id": "36563683@N07",
            "tags": "school boarding agape"
       },  ... 
```

我想让我的解析器尽可能通用，那么有什么更好的方法来删除文档的“jsonFlickrFeed（”）部分并且只使用它自己的 JSON？

```
public class JSONParser extends AsyncTask <String, Void, JSONObject> {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

@Override
protected JSONObject doInBackground(String... params) {
    String url=params[0];

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();           

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;
} 
```

}

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-25T06:54:35.110

我已经通过给定的方式解决了这个问题。

**Flickr 旧网页 API**为：[http ://api.flickr.com/services/feeds/photos_public.gne?id=xxxxxxxx&lang=en-us&format=json](http://api.flickr.com/services/feeds/photos_public.gne?id=xxxxxxxx&lang=en-us&format=json)

**Flickr 最新的网络 API**是：[http ://api.flickr.com/services/feeds/photos_public.gne?id=xxxxxxxx&lang=en-us&format=json&nojsoncallback=1](http://api.flickr.com/services/feeds/photos_public.gne?id=xxxxxxxx&lang=en-us&format=json&nojsoncallback=1)

使用**最新的一个 Web API**。

**替换**您的**用户 ID**而不是**xxxxxxxx**。

希望对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-27T03:23:17.290

看起来你想要的是原始 json。您需要添加“nojsoncallback=1”来删除函数包装器。

[参见 FLICKR JSON 响应格式]( [https://forum.processing.org/one/topic/flickr-json-parsing-noob.html](https://forum.processing.org/one/topic/flickr-json-parsing-noob.html) "如果你只想要原始 JSON，没有函数包装")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T20:02:28.143

正如您所说，您只需要在解析之前删除这部分字符串。

如果你想更通用，你可以搜索第一个`{`字符并删除它之前的所有内容，最后一个`}`字符并删除它之后的所有内容。但这仍然不能确保输入有效。

# javascript - 使用 ajax 修改 javascript 代码

> ID：13571671
> 
> 赞同：0
> 
> 时间：2012-11-26T19:25:33.390
> 
> 标签：javascript, ajax

好吧，我有这个 javascript 代码：

```
<div id="change">
   <script>
      var change=0;
   </script>     
</div> 
```

我使用 ajax 来更新它。事实上，当我更新我的数据库时，我想将变量“更改”更改为值 1。：

```
function update(value,username,competency)
{

   if (window.XMLHttpRequest)
   {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
   }
   else
   {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
   }
   xmlhttp.onreadystatechange=function()
   {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
      {
         document.getElementById("updateAll").innerHTML=xmlhttp.responseText; 
         document.getElementById("change").innerHTML='<script >var change=1</script> '; 
      }
   };
   xmlhttp.open("GET","Update_evaluation_ajax.php?value="+value+"&username="+username+"&competency="+competency,true);
   xmlhttp.send(null); 
} 
```

你能帮我弄清楚为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:33:45.213

`<script>`添加的标签`innerHTML`不会被执行。

为什么不只是设置`change = 1`而不是设置`innerHTML`？它看起来像是`change`一个全局变量，因此您可以从任何地方更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:40:07.127

当你的初始`<script>`标签被执行时，它会创建一个全局变量`change`，可以通过`window.change`.

大概您希望`change`在代码的其他地方使用该变量。如果没有看到该代码，很难提出一个好的解决方案，但您可以简单地`window.change`在响应函数中设置，并且执行的任何后续代码都将使用更新后的值（取决于范围）：

```
function () {
  if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
  {
     document.getElementById("updateAll").innerHTML = xmlhttp.responseText; 
     window.change = 1;
  }
}; 
```

当然全局变量不好，但这超出了这个答案的范围。

# wpf - 为 WPF 路径的单个点设置动画

> ID：13571672
> 
> 赞同：1
> 
> 时间：2012-11-26T19:25:39.667
> 
> 标签：wpf, animation

我有一条路径，基本上是一个三角形：

```
<Path Data="M0,0 15,0 15,25" Fill="{Binding Background}"/> 
```

我想要一个数据触发器（绑定到一个布尔值），它将启动一个动画，当布尔值为真时将折叠这个三角形，并在它为假时恢复它。我还没有弄清楚如何做到这一点。

具体来说，沿着这个方向折叠：0,0 15,0 15,25 5,0 15,0 15,25 10,0 15,0 15,25 15,0 15,0 15,25

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T19:51:04.763

好吧，我用一种叫做 Expression Blend 的小作弊方法做到了。但是你可以看到它是如何完成的。总是有选择的。

```
<Window
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
x:Class="WpfApplication1.MainWindow"
x:Name="Window"
Title="MainWindow"
Width="640" Height="480">
<Window.Resources>
    <Storyboard x:Key="CollapseTriangel">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)" Storyboard.TargetName="path">
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0.748"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1" Value="0.496"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1.6" Value="0.195"/>
            <EasingDoubleKeyFrame KeyTime="0:0:2" Value="-0.007"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.Y)" Storyboard.TargetName="path">
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="20.25"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1" Value="40.5"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1.6" Value="64.75"/>
            <EasingDoubleKeyFrame KeyTime="0:0:2" Value="81"/>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>
    <Storyboard x:Key="ExpandTriangel">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)" Storyboard.TargetName="path">
            <SplineDoubleKeyFrame KeyTime="0:0:0.4" Value="0.195"/>
            <SplineDoubleKeyFrame KeyTime="0:0:1" Value="0.496"/>
            <SplineDoubleKeyFrame KeyTime="0:0:1.5" Value="0.748"/>
            <SplineDoubleKeyFrame KeyTime="0:0:2" Value="1"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.Y)" Storyboard.TargetName="path">
            <SplineDoubleKeyFrame KeyTime="0:0:0.4" Value="64.75"/>
            <SplineDoubleKeyFrame KeyTime="0:0:1" Value="40.5"/>
            <SplineDoubleKeyFrame KeyTime="0:0:1.5" Value="20.25"/>
            <SplineDoubleKeyFrame KeyTime="0:0:2" Value="0"/>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>
</Window.Resources>
<Window.Triggers>
    <EventTrigger RoutedEvent="FrameworkElement.Loaded"/>
    <EventTrigger RoutedEvent="ToggleButton.Checked" SourceName="checkBox">
        <BeginStoryboard x:Name="CollapseTriangel_BeginStoryboard" Storyboard="{StaticResource CollapseTriangel}"/>
    </EventTrigger>
    <EventTrigger RoutedEvent="ToggleButton.Unchecked" SourceName="checkBox">
        <BeginStoryboard x:Name="ExpandTriangel_BeginStoryboard" Storyboard="{StaticResource ExpandTriangel}"/>
    </EventTrigger>
</Window.Triggers>

<Grid x:Name="LayoutRoot">
    <Path x:Name="path" Data="M159.5,239.5 L399.5,239.5 279.5,79.5 z" Fill="#FF0202FF" Margin="159.5,79.5,223.5,201.5" Stretch="Fill" Stroke="Black" RenderTransformOrigin="0.5,0.5">
        <Path.RenderTransform>
            <TransformGroup>
                <ScaleTransform/>
                <SkewTransform/>
                <RotateTransform/>
                <TranslateTransform/>
            </TransformGroup>
        </Path.RenderTransform>
    </Path>
    <CheckBox x:Name="checkBox" Content="CheckBox" HorizontalAlignment="Left" Margin="80,0,0,201.5" VerticalAlignment="Bottom"/>
</Grid>
</Window> 
```

当您有故事板时，您可以随时更改触发器。

如您所愿，基于布尔值。例如像这样：

```
<Window
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
x:Class="WpfApplication1.MainWindow"
x:Name="Window"
Title="MainWindow"
Width="640" Height="480">
<Window.Resources>
    <Storyboard x:Key="CollapseTriangel">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)" Storyboard.TargetName="path">
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0.748"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1" Value="0.496"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1.6" Value="0.195"/>
            <EasingDoubleKeyFrame KeyTime="0:0:2" Value="-0.007"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.Y)" Storyboard.TargetName="path">
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="20.25"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1" Value="40.5"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1.6" Value="64.75"/>
            <EasingDoubleKeyFrame KeyTime="0:0:2" Value="81"/>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>
    <Storyboard x:Key="ExpandTriangel">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)" Storyboard.TargetName="path">
            <SplineDoubleKeyFrame KeyTime="0:0:0.4" Value="0.195"/>
            <SplineDoubleKeyFrame KeyTime="0:0:1" Value="0.496"/>
            <SplineDoubleKeyFrame KeyTime="0:0:1.5" Value="0.748"/>
            <SplineDoubleKeyFrame KeyTime="0:0:2" Value="1"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.Y)" Storyboard.TargetName="path">
            <SplineDoubleKeyFrame KeyTime="0:0:0.4" Value="64.75"/>
            <SplineDoubleKeyFrame KeyTime="0:0:1" Value="40.5"/>
            <SplineDoubleKeyFrame KeyTime="0:0:1.5" Value="20.25"/>
            <SplineDoubleKeyFrame KeyTime="0:0:2" Value="0"/>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>
</Window.Resources>
<Control>
<Control.Template>
    <ControlTemplate>
            <Grid x:Name="LayoutRoot">
                <Path x:Name="path" Data="M159.5,239.5 L399.5,239.5 279.5,79.5 z" Fill="#FF0202FF" Margin="159.5,79.5,223.5,201.5" Stretch="Fill" Stroke="Black" RenderTransformOrigin="0.5,0.5">
                    <Path.RenderTransform>
                        <TransformGroup>
                            <ScaleTransform/>
                            <SkewTransform/>
                            <RotateTransform/>
                            <TranslateTransform/>
                        </TransformGroup>
                    </Path.RenderTransform>
                </Path>
                <CheckBox x:Name="checkBox" Content="CheckBox" HorizontalAlignment="Left" Margin="80,0,0,201.5" VerticalAlignment="Bottom"/>
            </Grid>
        <ControlTemplate.Triggers>
            <Trigger SourceName="checkBox" Property="IsChecked" Value="True">
                <Trigger.EnterActions>
                    <BeginStoryboard x:Name="CollapseTriangel_BeginStoryboard" Storyboard="{StaticResource CollapseTriangel}"/>
                </Trigger.EnterActions>
                <Trigger.ExitActions>
                    <BeginStoryboard x:Name="ExpandTriangel_BeginStoryboard" Storyboard="{StaticResource ExpandTriangel}"/>
                </Trigger.ExitActions>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>
</Control.Template>
</Control>
</Window> 
```

**编辑**

请记住一件事。如果您想将触发器直接应用于元素，则只能是`EventTrigger`. 如果你想使用 a `Trigger`or`DataTrigger`你必须把它放入`Style`or `ControlTemplate`。这就是我添加`Control`到第二个示例的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:47:53.557

这是我上面代码的简化版本。我取出了多余的不需要的关键帧，还取出了未使用的额外变换。最后，我取出了将其滑动到一侧的额外动画，而只是将 RenderTransformOrigin 设置为 1（最初为 0.5）。所有的功劳仍将归于 Viktor La Croix 的原始来源！

```
 <Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Width="640" Height="480">

<Window.Resources>
    <Storyboard x:Key="CollapseTriangel">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)" Storyboard.TargetName="path">
            <EasingDoubleKeyFrame KeyTime="0:0:2" Value="0"/>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>
    <Storyboard x:Key="ExpandTriangel">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)" Storyboard.TargetName="path">
            <SplineDoubleKeyFrame KeyTime="0:0:2" Value="1"/>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>
</Window.Resources>
<Window.Triggers>
    <EventTrigger RoutedEvent="FrameworkElement.Loaded"/>
    <EventTrigger RoutedEvent="ToggleButton.Checked" SourceName="checkBox">
        <BeginStoryboard x:Name="CollapseTriangel_BeginStoryboard" Storyboard="{StaticResource CollapseTriangel}"/>
    </EventTrigger>
    <EventTrigger RoutedEvent="ToggleButton.Unchecked" SourceName="checkBox">
        <BeginStoryboard x:Name="ExpandTriangel_BeginStoryboard" Storyboard="{StaticResource ExpandTriangel}"/>
    </EventTrigger>
</Window.Triggers>

<Grid x:Name="LayoutRoot">
    <Path x:Name="path" Data="M0,0 15,0 15,25" Fill="#FF0202FF" HorizontalAlignment="right" Stretch="Fill" Stroke="Black" RenderTransformOrigin="1,0.5">
        <Path.RenderTransform>
            <TransformGroup>
                <ScaleTransform/>
            </TransformGroup>
        </Path.RenderTransform>
    </Path>
    <CheckBox x:Name="checkBox" Content="CheckBox" HorizontalAlignment="Left" Margin="80,0,0,201.5" VerticalAlignment="Bottom"/>
</Grid> 
```

# java - 有什么方法可以在 Android / Java 上解析 NSKeyedArchiver？

> ID：13571678
> 
> 赞同：3
> 
> 时间：2012-11-26T19:25:57.507
> 
> 标签：java, android, xml-parsing, nskeyedarchiver

我已经使用 NSKeyedArchiver 从 iOS 应用程序中保存了一些文件，但现在我需要能够从 Android 实用程序读取和写入这些文件？是否有任何 Java 库可以处理使用“NSKeyedArchiver”创建的二进制 plist？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:18:53.820

您可以使用以下库在 java 中读取和写入 plist。根据我的阅读，它应该能够处理 plist 的多种格式（二进制、XML、ASCII）。

[属性列表库](http://sourceforge.net/p/plist/home/synopsis/)

至于解码`NSKeyedArchiver`，我不知道有任何库可以实现这一点。

# javascript - 如何使用不同的协议（HTTP 与 HTTPS）侦听弹出窗口上的事件？

> ID：13571681
> 
> 赞同：2
> 
> 时间：2012-11-26T19:26:02.257
> 
> 标签：javascript, events, authentication, protocols

我希望能够从任何非安全页面安全地验证我网站上的用户。所以我做了一个`window.open()`弹出窗口来打开一个安全的登录表单。计划是在用户注册或验证后，弹出窗口将关闭，父窗口将刷新。

关闭弹出窗口工作正常，但是，由于跨站点脚本规则，当尝试刷新父级时，我得到以下信息：

```
Unsafe JavaScript attempt to access frame with URL http://localhost/ from frame with URL https://localhost/signin_popup. The frame requesting access has a protocol of 'https', the frame being accessed has a protocol of 'http'. Protocols must match. 
```

我不能简单地在父级上订阅`onunload`，因为身份验证弹出窗口可能会在准备刷新父级之前遍历多个页面。我目前正在尝试查看是否可以将自定义事件绑定到父级的弹出窗口对象，并从弹出窗口中触发它们，但无济于事。

所以...

如何使弹出窗口与父窗口交互，或者在协议不匹配时让父窗口订阅弹出窗口的自定义事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:42:23.430

[您应该能够使用-API](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)实现跨域窗口通信[`postMessage`](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)

要将消息发布到另一个窗口：

```
otherWindowRef.postMessage( 'message', origin ); 
```

然后您将在另一个窗口中收到它：

```
window.addEventListener( "message", function() {
   //message was received 
}, false ); 
```

另一个窗口同样会`.postMessage`回到主窗口，并且主窗口会收到一个消息事件。

# git - 如何在一次提交中修改文件，然后将修改传递给后续提交？

> ID：13571682
> 
> 赞同：1
> 
> 时间：2012-11-26T19:26:11.817
> 
> 标签：git, git-rebase

假设主题：ABCD，有 4 个提交，echo commit 将一行添加到 a.txt。

```
A => add "aaa " > a.txt  
B => add "bbb"  >>a.txt  
c => add "ccc"  >>a.txt  
D => add "ddd"  >>a.txt 
```

我的目标是：
如何在每次提交中删除 a.txt 第一行末尾的空格？

我不想在每次提交中手动修改它。有没有好的方法，例如：在 A 中手动修改，然后变基为 B,C,D ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T21:19:43.473

您可能应该使用[`git filter-branch --tree-filter`](http://www.kernel.org/pub/software/scm/git/docs/git-filter-branch.html)一些过滤掉空白的脚本。

# ios - ios - Facebook - 社交框架

> ID：13571684
> 
> 赞同：0
> 
> 时间：2012-11-26T19:26:21.633
> 
> 标签：ios, facebook

在 Facebook 网站上，他们提到“iOS 6 向公众发布后，SDK 将在可用时自动使用 iOS6 中的原生 Facebook 登录。只需启用使用 Facebook 登录，SDK 将确保您的应用程序在所有 iOS 4.0 版本上无缝运行然后。”
但是如果没有旧版 iOS 中的社交框架，它将如何工作？
我必须使用哪个 facebook api 版本让我的应用程序在 iOS 4.3 到 iOS 6.0.1 上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T10:31:44.473

正如“mstfbsnli”的评论中提到的，Facebook 正在提供一个框架，它也能有效地与 iOS 4.3 一起工作。
我们不应该使用社会框架。

# classification - 如何找到 k-nn 分类器的准确度

> ID：13571686
> 
> 赞同：1
> 
> 时间：2012-11-26T19:26:31.960
> 
> 标签：classification, image-recognition

我正在使用 matlab 做硬币识别项目。我从测试图像和训练图像中提取了特征。我有 8761 个训练图像和 2200 个测试图像。每个图像特征维度是 192*1。所以我的 trainData 包含 192*8761 个特征，而 testData 包含 192*2200。我用 K-nn 分类器对这个数据进行了分类。我们如何计算准确性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T13:17:59.367

准确率是正确分类的训练样本的比例。

如果您正在使用`knnclassify`，请查看功能[帮助文本](http://www.mathworks.com/help/bioinfo/ref/knnclassify.html)。简而言之，代码将是：

```
knnclassify(trainData, testData, trainDataLabel) 
```

只需确保行描述样本，列描述属性。在您的情况下 trainData 应该有 8761 行和 192 列。同样 testData 应该有 2200 行和 192 列。trainDataLabel 应该描述 trainData 中每个样本的类别，因此它应该有 8761 行和 1 列。

# uiviewcontroller - 如何以编程方式使 UITableView 变小？

> ID：13571687
> 
> 赞同：0
> 
> 时间：2012-11-26T19:26:37.047
> 
> 标签：uiviewcontroller, uiscrollview, uitableview

我不会将这篇文章与我尝试过但失败的内容膨胀和复杂化，而是保持简单，因为我确信答案可能比我想象的更简单。

我的应用程序的主视图上有一个滚动的 UITableView。我要做的就是将滚动 UITableView 的默认位置（或“起点”）向下移动大约 194 个点，以便为我的导航栏和其他几个 UI 元素腾出空间。我该怎么做呢？以下是我认为分别来自我的 ViewController .h 和 .m 文件的相关方法实现：

```
//     MGViewController.h
//     UITVPractice

#import <Foundation/Foundation.h>

@interface ItemsViewController : UITableViewController

-(id) init;
-(id) initWithStyle:(UITableViewStyle)style;

@end

//     MGViewController.m
//     UITVPractice

#import "ItemsViewController.h"
#import "MGItem.h"
#import "MGItemStore.h"

@implementation ItemsViewController

-(void)viewDidLoad {
    UIImageView *backgroundImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"background.png"]];
    self.tableView.backgroundView = backgroundImageView;

    [super viewDidLoad];
}

-(id) init {
    self = [super initWithStyle:UITableViewStyleGrouped];

    if (self) {
        /* create 5 random MGItems and place in the MGItemStore */
        for (int i = 0; i < 20; i++) {
            [[MGItemStore sharedStore] createItem];
        }
    }
    return self;
}

-(NSInteger)tableView:(UITableView *)tableView
 numberOfRowsInSection:(NSInteger)section
{
    return [[[MGItemStore sharedStore] allItems] count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView
        cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"UITableViewCell"];

    /* Create an instance of UITableViewCell */
    if (!cell) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                                   reuseIdentifier:@"UITableViewCell"];
    }

    UIView *backView = [[UIView alloc] initWithFrame:CGRectZero];
    backView.backgroundColor = [UIColor clearColor];
    cell.backgroundView = backView;

    /* Display custom background image for cell(s) */
    cell.backgroundView = [[UIImageView alloc] initWithImage:[[UIImage imageNamed:@"cellBackground.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0]];

    /* Display custom background image for selected cell(s) */
    cell.selectedBackgroundView = [[UIImageView alloc] initWithImage:[[UIImage imageNamed:@"cellBackgroundTouched.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0]];

    /* eliminate the white box that bounds the black text.  */
    [[cell contentView] setBackgroundColor:[UIColor clearColor]];
    [[cell backgroundView] setBackgroundColor:[UIColor clearColor]];
    [cell setBackgroundColor:[UIColor clearColor]];

    /* Set the text of the cell to the description of the item that is at the nth index of items, where n = row this cell will appear in on the tableView */
    MGItem *p = [[[MGItemStore sharedStore] allItems] objectAtIndex:[indexPath row]];
    [[cell textLabel] setText:[p description]];
    [[cell textLabel] setTextColor:[UIColor whiteColor]];
//    [[cell textLabel] highlightedTextColor: [UIColor purpleColor]];

    return cell;
}

-(id) initWithStyle:(UITableViewStyle)style {
    return [self init];
}

@end 
```

如果这篇文章作为“为我做这个”的帖子而出现，我深表歉意，但我已经尝试了大约十几种不同的方法，但都没有奏效。被困在这个问题上大约 3 天。感谢您的任何帮助，您可以提供。

编辑：是的，伊斯梅尔，你是对的。它是 UITableViewController 的子类。我想我明白你在说什么。现在正在努力。感谢两位回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:36:36.017

最好的方法是将 tableview 控制器“嵌套”在另一个 UIView 中。如果您使用的是故事板，只需添加一个“容器视图”，然后将该视图控制器的类设置为您的 tableview 控制器的类。然后，更改容器视图的大小将自动更改表视图的大小。这是一个示例，其中我有几个表视图嵌套在一个视图中：

![在此处输入图像描述](../Images/5b93dd2918290171e8b474303ba547f5.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:31:42.853

我认为你的控制器是一个子类`UITableViewController`？如果是这种情况，那么你将不得不改变它。

为此，将子类更改为`UIViewController`，添加`UITableViewDelegate`和`UITableViewDataSource`协议。

然后，添加 UITableView *tableView 属性并将 viewDidLoad 方法更改为如下所示：

```
-(void)viewDidLoad {
    [super viewDidLoad]; // [super viewDidLoad]; should go first!!

    CGFloat startingPoint = 194.0; // or whatever
    CGRect tableRect = self.view.bounds;
    tableRect.origin.y = startingPoint;
    tableRect.size.height -= startingPoint;

    self.tableView = [[UITableView alloc] initWithFrame:tableRect style:UITableViewStyleGrouped]; // or plain, whichever you need
    self.tableView.dataSource = self;
    self.tableView.delegate = self;
    self.tableView.separatorStyle = UITableViewCellSeparatorStyleSingleLine; // do this if grouped, looks better!
    self.tableView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    [self.view addSubview:self.tableView];

    UIImageView *backgroundImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"background.png"]];
    self.tableView.backgroundView = backgroundImageView;

} 
```

编辑：这是有原因的。在 normal`UIViewController`中， the`self.view`是 a `UIView`，但在 a`UITableViewController`中， the与and 是 a`self.view`相同，这就是为什么你不能改变它的框架。`self.tableView``UITableView`

# c# - 在派生类上强制实现属性

> ID：13571693
> 
> 赞同：15
> 
> 时间：2012-11-26T19:26:59.427
> 
> 标签：c#

我有`Person.cs`它将由例如`Player`类来实现。 `Person`有财产`ExperienceLevelType`。

我想强制所有派生的类`Person`实现它们自己的`ExperienceLevelType`属性版本。

```
public abstract Person
{
    public enum ExperienceLevel { Kid, Teenager}
    public virtual ExperienceLevel Experience {get; set;}
}

public abstract Player:Person
{
    public override ExperienceLevel Experience
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-26T19:28:19.613

这就是[`abstract`](http://msdn.microsoft.com/en-us/library/sf985hc5.aspx)：

```
public abstract class Person
{
    public enum ExperienceLevel { Kid, Teenager}
    public abstract ExperienceLevel Experience { get; set; }
} 
```

如果您想强制派生类自己实现属性，同时提供一些可重用的脚手架来帮助它们，请将脚手架公开为`protected`内部的成员`Person`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:28:16.337

您可以创建`Person`一个接口（并且让它不暗示任何内容）或者您可以实现一个具有您的属性`Person`的自定义接口`IPerson`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-11T20:30:44.267

您需要做的就是将方法声明为抽象，它会强制子类实现它。

# css - 图像后的空白

> ID：13571696
> 
> 赞同：3
> 
> 时间：2012-11-26T19:27:31.853
> 
> 标签：css

我正在学习如何使用 CSS。目前，我正在尝试了解 CSS 定位。我为每个 div 部分使用不同的背景颜色，因此我知道当我进行代码更改时页面的哪个区域会受到影响。

我现在正在我的标题页上工作，偶然发现了一件我不明白的事情。我有一个徽标并将其放在自己的 div 中。我可以看到的问题，在徽标下方有一个空格（我为 div 使用粉红色背景颜色），我无法摆脱它。所以下面是我使用的代码和当前标题的截图。

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Print Repair Form</title>
  <style type="text/css">
    * {
      margin:0;
      padding:0;
      font: 12px/1.5 Georgia, serif;
    }

    #page-wrap {
      width: 800px;
      margin: 0 auto;
    }

    #header {
      background-color:#88d;
      overflow: auto;
    }

    #logo {
      float:left;
      background-color: #ffccff;
    }

    #logo a img {
      border:none;
    }

    #address-container {
      display: table;
      float: left;
      width: 164px;
      background-color: #FC730A;
      height: 104px;
    }

    #address-content{
      display:table-cell;
      vertical-align: middle;
    }

    #repair-header {
      background-color:#d4d4d4;
      float:left;
      width:380px;
    }

    #customer-info {
      float: left;
      width:220px;
      background-color: #ffff99;
    }

    #wo-info {
      background-color: #99ff99;
    }

    #content {
      clear:both;
      background-color:#33d;
    }
  </style>
</head>
<body>
  <div id="page-wrap">
    <div id="header">
      <div id="logo">
        <a href="/fms/"><img src="/fms/images/windows8-cropped.jpg" /></a>
      </div> <!-- div logo -->
      <div id="address-container">
        <div id="address-content">
          456 Some Addresses <br />
          The City, XP 444411 <br />
          1-800-000-0000 <br />
          www.someaddress.com
        </div>
      </div>
      <div id="repair-header">
        <p>Repair Detail</p>
      </div>
      <div id="customer-info">
        <p>12345678</p>
        <p>Facility Name</p>
      </div>
      <div id="wo-info">
        <p>WO: 12345789</p>
      </div>
    </div> <!-- div header -->
    <div id="content">
      <p>Content is here</p>
    </div>
  </div> <!-- div page-wrap -->
</body>
</html> 
```

![网页标头](../Images/6c088f9f6c4aaa4fb27244c036be0038.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T20:02:01.247

添加属性

```
line-height: 0; 
```

到您的徽标 div

```
#logo {
  float:left;
  background-color: #ffccff;
  line-height: 0;
} 
```

并将您的图像 css 修改为：

```
#logo a img {
  border:none;
  vertical-align:bottom;
} 
```

# java - Java GUI 不会从输入中显示 JLabel

> ID：13571697
> 
> 赞同：0
> 
> 时间：2012-11-26T19:27:39.750
> 
> 标签：java

我想用 Java 创建一个简单的二十一点 GUI。我知道创建 JLabel、JPanel 等的基础知识。但是，我找不到我的 JLabel 没有显示在屏幕上的原因。这是我的代码：

```
 //Create and set up the window.
        JFrame frame = new JFrame("BlackJack");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //new border panel
        JPanel gui = new JPanel(new BorderLayout(2,2));

        //create players panel
        JPanel panel2 = new JPanel(new FlowLayout(FlowLayout.LEFT));
        panel2.setPreferredSize(new Dimension(600, 200));
        panel2.setBackground(Color.ORANGE);
        gui.add(panel2, BorderLayout.CENTER);

        //Display the window.
        frame.pack();
        frame.setVisible(true);
        frame.setTitle("BlackJack!");

        //add players name
        String name = JOptionPane.showInputDialog(null, "Name?");
        JLabel playerName = new JLabel(name);
        playerName.setPreferredSize(new Dimension(100, 40));
        playerName.setFont(new Font("sansserif", Font.BOLD, 18));
        panel2.add(playerName); 
```

当我点击编译时，我得到的是一个名称对话框？然后是一个空面板。我不明白为什么我的 JLabel 不在面板中，因为我已将它添加到我的框架中。我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T19:29:55.413

```
if(nloop != 1 || nloop != 2){ 
```

这是一个[重言式](http://en.wikipedia.org/wiki/Tautology_%28logic%29)。

对于每个数字——它不能同时是 1 和 2——所以条件`(nloop != 1 || nloop != 2)`总是产生`true`。

也许你想要`&&`而不是`||`？

* * *

while loop:`while(run2 = true){`也[有气味](http://en.wikipedia.org/wiki/Code_smell)，正如评论中所指出的（尽管它似乎不是问题中所述的问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:30:04.503

你需要改变

```
if(nloop != 1 || nloop != 2){ 
```

至

```
if(nloop != 1 && nloop != 2){ 
```

想想看。如果输入 1，则原始 if 条件检查 1 是否不等于 1 或 1 是否不等于 2。1 显然是 != 2，因此会执行错误的输入代码。

相反，您希望您的错误输入代码仅在输入不是 1 且不是 2 时运行。

# xml - 从纯文本文件自动创建分节和标题？

> ID：13571699
> 
> 赞同：3
> 
> 时间：2012-11-26T19:27:45.957
> 
> 标签：xml, epub, kindle, nook, calibre

我有一个大文件，它分为多个类别，每个类别名称下方都有一个下划线。该文件不断变化，有80个类别。它是一个纯文本文件。我想让每个类别名称都是 epub 文件中的单独章节。我还想确保每个章节名称都是章节的标题。有没有办法使用 Calibre 自动执行此操作？也许一些正则表达式魔法？例如，我希望以下类别的章节标题为：水果、蔬菜、草药。而且我希望它能够自动解析（一种方法可能涉及识别正则表达式中的下划线）。我怎样才能做到这一点？

```
Fruit
________
Apples
Bananas

Vegetables
____________
Cucumbers 
Zucchini

Herbs
_____
thyme
cayenne 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T09:49:49.280

所以你的文本文件基本上是一个几乎`markdown`文件（[阅读更多](http://en.wikipedia.org/wiki/Markdown)）。我会将其转换为`html`类似`pandoc`（[请参阅此处](http://johnmacfarlane.net/pandoc/)，并注意 pandoc 支持一些扩展`markdown`功能，并且非常有能力（甚至可以生成 epub，但我还没有测试过））。

这样，您的标题（下划线）将被转换为`<h*>`标签。

然后，您可以使用 Calibre 的 ebook-convert CLI 工具（或 gui）将其转换为`mobi`or `epub`，并指定分节符（感谢开发人员，Calibre[有一个非常好的文档](http://manual.calibre-ebook.com/cli/ebook-convert.html)）。（我刚刚注意到，Calibre/ebook-convert 可以直接将 markdown 转换为 epub/mobi！）

喜欢：

```
ebook-convert input.html output.epub --chapter 'YOUR XPATH TO DETECT CHAPTERS' --chapter-mark pagebreak 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-02T09:23:10.010

这很简单。您的文件已经像降价了；您需要做的就是将扩展名更改为`.md`（但您不必 - 见下文）。

因此，第一个带下划线的标题是一级标题，下一个具有相同类型下划线的后续标题也将是一级。当您第一次开始使用不同的线路时，那将是第二级，等等。

我个人更喜欢用#heading 2 和## 等开始标题1。

生成`.epub`需要一秒钟`pandoc`；示例命令如下：

```
pandoc myTextFile.md --latex-engine=xelatex -o myEpubFile.epub 
```

我使用 xelatex 引擎是因为文本中需要一些 unicode 字符，但如果它是纯英文（ASCII） - 你不需要。就像这样，您也可以在几秒钟内制作`.PDF`和`.docx`格式化。

如果您想保留输入文件扩展名`.txt`，这不是问题；只需`--from markdown`在命令行上指定，无论文件扩展名是什么，输入都将被读取为降价。当然 -`.docx`无法以这种方式读取二进制格式，但随后会收到错误消息。

我喜欢这种方法的地方在于它闪电般快速、可调节且不需要我打开口径。

Pandoc 默认值还会以每个 1 级标题开始新章节。您可以通过参数调整它`--epub-chapter-level`。

# javascript - 使用 JavaScript 或 jQuery 获取当前月份的第一个和最后一个日期

> ID：13571700
> 
> 赞同：362
> 
> 时间：2012-11-26T19:27:47.747
> 
> 标签：javascript, jquery, date, time

正如标题所说，我一直在寻找一种方法来使用 JavaScript 或 jQuery 获取当前月份的第一个和最后一个日期，并将其格式化为：

例如，对于 11 月，它应该是：

```
var firstdate = '11/01/2012';
var lastdate = '11/30/2012'; 
```

* * *

## 回答 #1

> 赞同：990
> 
> 时间：2012-11-26T20:32:57.857

非常简单，不需要库：

```
var date = new Date();
var firstDay = new Date(date.getFullYear(), date.getMonth(), 1);
var lastDay = new Date(date.getFullYear(), date.getMonth() + 1, 0); 
```

或者您可能更喜欢：

```
var date = new Date(), y = date.getFullYear(), m = date.getMonth();
var firstDay = new Date(y, m, 1);
var lastDay = new Date(y, m + 1, 0); 
```

### 编辑

一些浏览器会将两位数的年份视为 20 世纪，因此：

```
new Date(14, 0, 1); 
```

给出 1914 年 1 月 1 日。为避免这种情况，请创建一个 Date 然后使用*setFullYear*设置其值：

```
var date = new Date();
date.setFullYear(14, 0, 1); // 1 January, 14 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-26T20:10:55.327

我用[`Datejs`](https://github.com/datejs/Datejs)

这是提醒第一天：

```
var fd = Date.today().clearTime().moveToFirstDayOfMonth();
var firstday = fd.toString("MM/dd/yyyy");
alert(firstday); 
```

这是最后一天：

```
var ld = Date.today().clearTime().moveToLastDayOfMonth();
var lastday = ld.toString("MM/dd/yyyy");
alert(lastday); 
```

# php - sfValidatorDoctrineUnique 失败，因为我有一个自定义 setField()

> ID：13571704
> 
> 赞同：0
> 
> 时间：2012-11-26T19:27:59.323
> 
> 标签：php, symfony-1.4, validation

用户**可以**发布**音乐链接**，因为音乐提供者可以多种多样（Youtube、Deezer、Soundcloud 等），我有一个**自定义验证器**和一个自定义**setLink()**。在我的数据库中，链接是视频的 ID（youtube 的示例：CWMYxYoaRBQ）

但结果是我的 sfValidatorDoctrineUnique 不再起作用了。

我的验证器：

```
<?php

class videoValidator extends sfValidatorUrl
{
  protected function configure($options = array(), $messages = array())
  {
    parent::configure($options, $messages);
    $this->setMessage('invalid', 'Error message.');
  }

  protected function doClean($url)
  {
    $videoProvider = new videoProvider($url);
    if (false === $videoProvider->isValid())
    {
      throw new sfValidatorError($this, 'invalid', array('value' => $url));
    }

    return $url;
  }
}

?> 
```

我的 videoProvider 类：

```
class videoProvider
{
  private $url;
  private $providers = array('youtube','deezer','soundcloud');
  private $youtubePattern = '%^# Match any youtube URL
      (?:https?://)?  # Optional scheme. Either http or https
      (?:www\.)?      # Optional www subdomain
      (?:             # Group host alternatives
        youtu\.be/    # Either youtu.be,
      | youtube\.com  # or youtube.com
        (?:           # Group path alternatives
          /embed/     # Either /embed/
        | /v/         # or /v/
        | /watch\?v=  # or /watch\?v=
        )             # End path alternatives.
      )               # End host alternatives.
      ([\w-]{10,12})  # Allow 10-12 for 11 char youtube id.
      $%x';
  private $deezerPattern = '/\d+/';
  private $soundcloudPattern = '[\w-]+/[\w-]+$';

  public function __construct($url)
  {
    $this->url = $url;
  }

  /**
   * @return true / false
   */
  private function checkYoutube()
  {
    return preg_match($this->youtubePattern, $this->url) ? true : false;
  }

  /**
   * @return true / false
   */
  private function checkDeezer()
  {
     // A Deezer URL has this format : http://www.deezer.com/track/61340079

     return preg_match($this->deezerPattern, $this->url) ? true : false;
  }

  /**
   * @return true / false
   */
  private function checkSoundcloud()
  {
     // A Soundcloud URL has this format : http://soundcloud.com/[A-Z Artist]/[A-Z Title]

     return preg_match($this->soundcloudPattern, $this->url) ? true : false;
  }

  /**
   * @return true / false
   */
  public function isValid()
  {
    // check all video provider as you do in your validator
    // so it will return true if it find one, otherwise false

    foreach ($this->providers as $provider)
    {
      $function = 'check'.ucfirst($provider);

      if (true === $this->$function())
      {
        return true;
      }
    }

    return false;
  }

  /**
   * @return string
   */
  public function getId()
  {
    if ($this->checkYoutube() && preg_match($this->youtubePattern, $this->url, $matches))
    {
      return $matches[1];
    }

    if ($this->checkDeezer() && preg_match($this->deezerPattern, $this->url, $matches))
    {
      return $matches[1];
    }

    if ($this->checkSoundcloud() && preg_match($this->deezerPattern, $this->url, $matches))
    {
      return $matches[1];
    }
  }

  /**
   * @return string
   */
  public function getProvider()
  {
    if ($this->checkYoutube())
    {
      return 'youtube';
    }

    if ($this->checkDeezer())
    {
      return 'deezer';
    }

    if ($this->checkSoundcloud())
    {
      return 'soundcloud';
    }
  }
} 
```

我的歌曲课：

```
class Song extends BaseSong
{
  public function setLink($value)
  {
    // only perform this tweak if the value is a http link
    if (preg_match('/^http/i', $value))
    {
      $videoProvider = new videoProvider($value);

      // define url id
      parent::_set('link', $videoProvider->getId());

      // define type id
      $provider = $videoProvider->getProvider();
      $type     = Doctrine_Core::getTable('Type')->findOneByName($provider);

      parent::_set('type_id', $type->getId());
     }
  }
} 
```

我认为 sfValidatorDoctrineUnique 尝试将完整的 URL（表单字段）与视频 ID（数据库字段）进行比较。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:13:35.170

我想我找到了一个解决方案，经过测试和工作。

```
class videoValidator extends sfValidatorUrl
{
  protected function configure($options = array(), $messages = array())
  {
    parent::configure($options, $messages);
    $this->setMessage('invalid', 'Le lien n\'est pas valide. Veuillez entrer un lien Youtube, Deezer ou Soundcloud.');
  }

  protected function doClean($url)
  {
    $videoProvider = new videoProvider($url);
    if (false === $videoProvider->isValid())
    {
      throw new sfValidatorError($this, 'invalid', array('value' => $url));
    }

    $unique = Doctrine_Core::getTable('Song')->findOneByLink($videoProvider->getId());
    if (!empty($unique))
    {
      return $videoProvider->getId();
    }
    return $url;
  }
} 
```

我返回视频的 id，该视频已存在于数据库中。然后，我认为 sfValidatorDoctrineUnique 能够执行它的测试。

你觉得这合乎逻辑吗？

# sql - 为什么这个语法无效？

> ID：13571705
> 
> 赞同：3
> 
> 时间：2012-11-26T19:27:59.410
> 
> 标签：sql, sql-server, sql-server-2005

以下代码：

```
SELECT JaguarStartupTime, CPU, AmountOfRam, UpdatedOn, *
FROM dbo.MachineConfiguration
WHERE ServerName = 'WashingtonDC01'
AND UpdatedOn > '11/21/2012'
ORDER BY JaguarStartupTime DESC 
```

导致错误：`Ambiguous column name 'JaguarStartupTime'`。

但是，删除`ORDER BY`使其工作。此外，在`ORDER BY`子句前面加上表格，如下所示，它也可以工作：

```
SELECT JaguarStartupTime, CPU, AmountOfRam, UpdatedOn, *
FROM dbo.MachineConfiguration
WHERE ServerName = 'WashingtonDC01'
AND UpdatedOn > '11/21/2012'
ORDER BY dbo.MachineConfiguration.JaguarStartupTime DESC 
```

这对我来说从来没有意义。有人可以解释吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T19:29:31.773

因为查询`*`在 SELECT 子句中包括（所有列），该子句还包括 JaguarStartupTime 列。

用 Layman 的话来说：所以在检索结果时，该列显示了两次，然后当服务器尝试应用排序顺序时，不确定您指的是哪一列。

就个人而言，我会更改查询以消除查询中的使用`*`，即使这意味着列出一长串列名。这是[最佳实践](https://stackoverflow.com/questions/3639861/why-is-select-considered-harmful)，它将避免此问题。

* * *

至于为什么加前缀可以工作，我在[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms188385%28SQL.105%29.aspx)中找到了这个：

> 在 SQL Server 中，限定列名和别名被解析为 FROM 子句中列出的列。如果 order_by_expression 不合格，则该值在 SELECT 语句中列出的所有列中必须是唯一的。

这只是数据库引擎将 SQL 语句转换为执行计划的底层机制的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T22:12:52.210

我同意，在您的问题`ORDER BY JaguarStartupTime`中，这并不是真正的模棱两可，因为两个投影列实际上都指的是同一个基础列。

但是，在一般情况下，不能保证这是真的。[如对此连接项的响应中所述](http://connect.microsoft.com/SQLServer/feedback/details/644134/order-by-clause-incorrectly-produces-ambiguous-column-name)。例如，在下面的查询中，使用哪一个显然是模棱两可的。

```
SELECT JaguarStartupTime,
       CPU AS JaguarStartupTime
FROM   dbo.MachineConfiguration
ORDER  BY JaguarStartupTime DESC 
```

出于语法验证的目的，SQL Server 不会对列名进行任何分析以确定它们是否*真的*模棱两可。当按`some_name`投影列名列表中存在的排序时，它`some_name`必须是唯一的。这是按照[ANSI 规范](http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt)

> 如果 a`<sort specification>`包含 a `<column name>`，`T` 则应仅包含一个带有该列的列，`<column name>`并且`<sort specification>`标识该列。

使用表名限定列名可确保 SQL Server 按源列名而不是计划列名进行排序，因此它允许这样做。

```
SELECT name, name 
FROM master..spt_values v1
ORDER BY v1.name 
```

此外，允许以下查询。

```
select name, name 
FROM master..spt_values v1
ORDER BY name + '' 
```

之所以没有歧义，是因为`ORDER BY`子句中的列别名只能由它们自己使用，而不能在表达式中使用，所以在上面的查询`name`中不能解释为别名，必须解释为 ordering by `v1.name`。

# html - 如何在 HTML 段落中添加空格

> ID：13571706
> 
> 赞同：3
> 
> 时间：2012-11-26T19:27:59.083
> 
> 标签：html

我想做这样的事情

<p>

这是问题1--------------------(1)

这是问题2--------------------(2)

</p>

但是用空格替换破折号我该怎么做。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-26T19:31:43.193

您可以通过添加来尝试`&nbsp;`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-26T20:07:18.427

这可以通过`float`.

演示：[**jsfiddle.net/KcdpW**](http://jsfiddle.net/KcdpW/)

**HTML：**

```
<ul>
    <li>Item 1 <span class="right">(1)</span></li>
    <li>Item 2 <span class="right">(2)</span></li>
</ul>​ 
```

**CSS：**

```
ul {
    width: 10em
}
.right {
    float: right
}​ 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-11-26T19:31:48.560

如果您真的需要，那么您可以使用 ie`&nbsp;`实体来执行此操作，但请记住，用于呈现页面的字体通常是成比例的，因此与空格“对齐”并不起作用并且看起来很难看。

# html - 选择性清除 HTML5 应用程序缓存中的项目

> ID：13571708
> 
> 赞同：5
> 
> 时间：2012-11-26T19:28:06.200
> 
> 标签：html, caching, manifest

HTML5 应用程序缓存 API 要求浏览器重新加载清单文件的 CACHE 部分中声明的所有文件（当清单文件已更改并在 applicationCache API 上调用更新时）。

我的清单文件包含数千个条目。是否有任何技巧可以告诉浏览器只重新加载已更改的文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T03:12:08.467

由于缺乏对缓存清单中列出的文件的缓存行为的控制，我遇到了类似的问题。事实证明，您可以通过使用 iFrame 来控制此过程。

策略是将主缓存清单中列出的数千个文件分成单独的（并且更易于管理的缓存清单），然后创建许多虚拟 HTML 页面，每个页面都引用一个缓存清单。然后，对于每个虚拟 HTML，您将一个 iFrame 链接添加到您的主 HTML 文档中。您可以将 iFrame 放在一个不可见的 div 中，这将使该技巧对用户不可见。

当每个 iFrame 加载时，它会检查其单独的缓存清单。如果该缓存清单中的任何文件发生更改，则 iFrame 将仅缓存其文件子组。您可以智能地将相关文件组合在一起，具体取决于您希望它们发生多大的变化。

更好的是，您可以在用户交互的任何时候在主 HTML 上动态插入 iFrame，并且只有在加载 iFrame 时，才会触发缓存进度。

# rest - 如何保护基于 Rest 的 API？

> ID：13571716
> 
> 赞同：2
> 
> 时间：2012-11-26T19:28:35.737
> 
> 标签：rest, post, get

我们打算开发基于rest的api。我探讨了这个主题，但似乎，当您的客户端是应用程序时，您可以保护 api（所以有很多方法，公钥 - 私钥等）。网站/移动网站呢，如果我们在网站上访问基于休息的 api，而不使用任何登录来访问内容（登录是可选的），那么我们如何限制其他人访问基于休息的 api？

使用 Oauth2.0 有意义吗？我对此没有明确的想法。

更明确的问题可能是，对于不使用任何登录的网站，我们如何保护通过网络公开的获取或发布请求？

如果它是简单的获取请求或发布请求，它将返回您特定输入的 json 数据，现在我有移动网站，他们将使用获取请求或发布请求来访问这些数据以获取数据。好吧，其他人也可以访问它，问题是我没有使用登录，用户可以直接访问数据。但是我们如何才能限制其他人访问该数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T07:21:39.853

您认为保护不使用 REST 的网站与使用 REST API 的网站有什么区别？

OAuth 为您的站点提供授权功能，在 REST 架构中，这意味着移动应用程序的用户必须在被允许访问资源之前提供其凭据。然后，应用程序可以决定该用户是否有权访问所请求的资源。但是，您说过您的网站不需要使用授权。

您可以使用证书，但祝您为每个客户管理证书好运。我的看法是您的解释是您不需要保护您的网站，因为您将永远无法管理客户端和服务器之间的信任关系。不过有一些选择：

1.  您构建自己的客户端应用程序，然后将其发送给可以使用客户端打包证书向服务器验证自己的人。例如，如果您为该设备构建，iOS 就有这种功能。
2.  您提供下载“安装”在浏览器中并在与 REST API 通信时使用的证书的功能
3.  使用像握手协议这样的东西，所以当客户端想要发出它说的第一个请求时；“嗨，我是客户，我们可以聊天吗？” 并且服务器响应“是的，在接下来的 X 分钟内，我们可以确保每次您告诉我一些 YYYYYY 的事情时都向我发送此密钥”（您可以使用[SecureUDID 之](http://www.secureudid.org/)类的东西，或者对 iOS 以外的其他设备使用类似的东西）。

可能还有其他人，但您了解基本概念。我再次认为，如果您的资源不需要授权，那么您就不需要保护该 REST API。我可以问一下您通过此 REST API 或您提供的功能公开什么样的数据？这可能有助于提供更好的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:59:15.543

您需要授权：应该只允许一些代理（移动客户端）和/或用户访问这些 API。

要解决这个问题，您需要识别：一种让服务器分辨谁是谁（或什么）的方法，以便做出正确的决定。

有许多不同的方式来提供某种形式的身份证明，这取决于您对安全性的关心程度。

最简单的是用户代理字符串，特定于您的移动客户端。但它很容易被伪造。稍微难以伪造的是基于客户端的“秘密”——在您的移动客户端代码中嵌入某种秘密或密钥。你可以让它变得非常复杂和秘密，但正如 ramsinb 指出的那样，你不能以这种方式获得安全性，因为它需要你能够保证你与客户端一起提供的秘密（无论是代码、算法还是任何其他花哨的构造）都不能被破坏或逆向工程。当您不控制客户端时不会发生。

从那里，3个选择：

1.  安全并不是真正需要的，不要打扰
2.  安全性并不是真正需要的，但您仍然希望将 API 的访问权限限制为合法用户/代理或准备投入一些时间来破解您的保护的人 - 使用特定的用户代理或客户端嵌入的秘密 - 不要投资非常喜欢它，因为它不会阻止那些真正想要获得它的人
3.  需要安全性 - 然后我认为没有办法绕过身份验证，无论是登录名/密码、用户特定（设备特定？）密钥、OpenID 等......无论如何，你都必须添加到在一定程度上给用户带来了负担，尽管您可以通过允许身份验证持续存在来限制这种负担（cookies、存储......）

# javascript - 如何在新窗口的选择框中打开链接？

> ID：13571718
> 
> 赞同：0
> 
> 时间：2012-11-26T19:28:48.730
> 
> 标签：javascript, select, new-window

如何在新窗口中打开此选择框中的每个链接？

```
<form name="jump">
<select name="menu">
<option value="http://">link</option>
<option value="http://">link</option>
<option value="http://">link</option>
</select>
<input type="button" onClick="location=document.jump.menu.options[document.jump.menu.selectedIndex].value;" value="GO" />
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:39:57.810

新窗口的正确功能是[`window.open();`](https://developer.mozilla.org/en-US/docs/DOM/window.open)

```
<form name="jump">
    <select name="menu">
       <option value="http://">link</option>
       <option value="http://">link</option>
       <option value="http://">link</option>
       </select>
       <input type="button" id="button"
       onclick="window.open(document.jump.menu.options[document.jump.menu.selectedIndex].value);" value="GO" />
</form> 
```

**注意：**在行 javascript 中编写可能会很混乱。尝试将您的 javascript 从您的演示文稿中分离出来

# objective-c - 为核心数据写入创建后台线程

> ID：13571721
> 
> 赞同：4
> 
> 时间：2012-11-26T19:29:03.833
> 
> 标签：objective-c, ios, multithreading, core-data, save

[我正在尝试重新创建这篇 cocoanetics 文章 ( http://www.cocoanetics.com/2012/07/multi-context-coredata/](http://www.cocoanetics.com/2012/07/multi-context-coredata/) )中描述的三层核心数据系统。我遇到的问题是在自己的后台线程上创建私有 MOC。我对多线程以及如何在目标 c 中完成它没有太多经验。我一直在阅读文章并试图掌握如何正确实施这种方法，但我最终承认了一个事实，即我不知道自己在做什么。

要创建这种方法，我是否需要创建一个 NSThread 并对其进行管理？还是有一种我不理解的更简单的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T23:00:11.650

在后台执行 Core Data 操作的最简单方法是创建`NSPrivateQueueConcurrencyType`. 这种类型的 MOC 创建和管理私有队列。在私有 MOC 上使用`performBlock`或`performBlockAndWait`执行操作可确保使用正确的队列。

有关详细信息和示例，请参阅OS *X v10.7 和 iOS 5.0* 的核心数据发行说明中的[​​托管对象上下文的并发支持。](http://developer.apple.com/library/mac/#releasenotes/DataManagement/RN-CoreData/_index.html#//apple_ref/doc/uid/TP40010637-CH1-DontLinkElementID_1)

 *我只能推荐观看 WWDC 2011 Session 303 “￼What's New in Core Data on iOS”的视频或幻灯片，其中解释了 Core Data 并发性。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-26T19:37:42.643

在 iOS 中管理线程是非常基础的

要在后台运行某些东西，您可以这样做：

```
- (void)someMethod {
    // method is called on main thread normally

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        .... // here things are run in background
    });
} 
```

要在任何地方返回主线程，请执行以下操作：

```
- (void)someOtherMethod {
    // method is called on background thread

    dispatch_async(dispatch_get_main_queue(), ^{
        ... // here things are on main thread again
    });
} 
```*

# php - PHP解析具有无效字符的XML

> ID：13571723
> 
> 赞同：2
> 
> 时间：2012-11-26T19:29:08.420
> 
> 标签：php

我从 web 服务获取一个 xml 文件。

不幸的是，该文件包含字符代码 2 (\u0002)，它破坏了解析器。

所以我试图删除所有字符代码 2，但只是在尝试进行简单的字符串替换时得到奇怪的结果。

为了测试这一点，我创建了一个名为 test.php 的 php 文件，其内容如下：

```
<?
$aaa="Hi"+chr(2)+"There"+chr(2)+"Rick";
$aaa = str_replace($aaa,chr(2),"");
echo $aaa;
?> 
```

我从命令行运行它：

php test.php

当我运行它时，我得到一个空白字符串。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T19:37:26.730

是的，您的结果将是黑色的，因为用于`PHP`连接[而](http://php.net/manual/en/language.operators.string.php) 不是`.``+`

你应该改变

```
$aaa="Hi"+chr(2)+"There"+chr(2)+"Rick"; 
```

至

```
$aaa="Hi".chr(2)."There".chr(2)."Rick"; 
```

也来自[PHP DOC](http://www.php.net/manual/en/function.str-replace.php)

```
 mixed str_replace ( mixed $search , mixed $replace , mixed $subject [, int &$count ] ) 
```

你也应该改变

```
$aaa = str_replace($aaa,chr(2),""); 
```

至

```
$aaa = str_replace(chr(2),"",$aaa); 
```

# php - Javascript - 每 X 秒运行一个 php 文件

> ID：13571724
> 
> 赞同：2
> 
> 时间：2012-11-26T19:29:08.653
> 
> 标签：php, javascript, jquery

我希望能够以最简单的方式记录一个人在我网站上的秒数。不需要谷歌分析或任何其他第三方来源。

php 脚本将创建与 mysql 的连接并更新相关值，

我在网上找到了一些脚本，但它似乎不起作用：

* * *

```
<script  src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"> </script>
<script>
   $(document).ready(function()
   {
       var refreshId = setInterval(function()
          $.load('timeonpage.php?wzx=<?php echo $t; ?>&ip=<?php echo $ip; ?>');
       }, 5000);
   );
</script> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T19:36:03.530

存在语法错误，您缺少对函数的打开以及方法`setInterval`的关闭`.ready`

```
<script  src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"> </script>
<script>
$(document).ready(function(){
    var refreshId = setInterval(function(){ //SYNTAX ERROR HERE
        $.load('timeonpage.php?wzx=<?php echo $t; ?>&ip=<?php echo $ip; ?>');
    }, 5000);
}); // SYNTAX ERROR HERE
</script> 
```

此外，我建议使用该`$.get`方法，因为 JQuery 中的 .load 通常用于将 HTML 加载到特定容器中：

```
var refreshId = setInterval(function(){
    $.get('timeonpage.php',{wzx:<?php echo $t?>,ip:<?php echo $ip?>});
},5000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T19:35:48.550

```
<script  src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"> </script>
<script>
$(document).ready(function()
{
 var refreshId = setInterval(function(){ //ANOTHER ERROR
    $.load('timeonpage.php?wzx=<?php echo $t; ?>&ip=<?php echo $ip; ?>');
 }, 5000);
}); //ERROR ON THIS LINE
</script> 
```

好吧，您在准备关闭文档时缺少一个“}”。试试看，可能很简单，如果不是，请报告，然后再看看:)

另外：如果您考虑使用第 3 方服务，请查看[GoSquared](https://www.gosquared.com/)，那里非常棒的网站 :)

编辑： setInterval 行上的另一个错误:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T19:45:09.597

onLoad 调用 Ajax 脚本将页面和您想要的任何其他数据保存到数据库然后返回您存储在变量中的唯一 ID 可能会更有效。在 onbeforeunload 事件中，您可以使用唯一 ID 再次调用数据库。就我的两分钱...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T19:38:58.060

使用您当前的方法，如果用户只是让浏览器窗口保持打开状态，那么他们一天内的所有 86,400 秒都可能被计为在线。

就个人而言，我的网站设置为每次用户实际加载页面时，他们的“最后加载页面”时间都会更新。然后，`cron`每分钟运行一个脚本并检查哪些用户在最后一分钟加载了页面。把这些加起来可以让我合理地确定每个用户在网上花费了多少时间。

此外，这会减少服务器上的负载 - 如果您的站点上有超过 50 个左右的用户，您的解决方案可能会杀死它。

# java - 如何在 mac osx 上加载 libgdx 桌面应用程序？

> ID：13571726
> 
> 赞同：4
> 
> 时间：2012-11-26T19:29:13.637
> 
> 标签：java, eclipse, macos, libgdx, lwjgl

我一直在我的 Windows 7 PC 上使用 libgdx 开发一个简单的游戏。最近我买了一个macbook pro（山狮）。我下载并安装了 JRE 7 和 eclipse，然后克隆并导入了项目。但是，尽管在我运行桌面版本时代码中没有错误，但 JVM 加载并迅速死亡。我在控制台中得到的错误如下：

```
JavaVM WARNING: JAWT_GetAWT must be called after loading a JVM
_NSJVMLoadLibrary: NSAddLibrary failed for /libjawt.dylib
JavaVM FATAL: lookup of function JAWT_GetAWT failed. Exit
AL lib: ReleaseALC: 1 device not closed 
```

我已将 JRE 7 添加到构建路径库中，但仍然没有乐趣。

桌面通过以下代码启动：

```
import com.badlogic.gdx.backends.lwjgl.LwjglApplication;
import com.badlogic.gdx.backends.lwjgl.LwjglApplicationConfiguration;

public class Main {
    public static void main(String[] args) {
        LwjglApplicationConfiguration cfg = new LwjglApplicationConfiguration();
        cfg.title = "colourgame";
        cfg.useGL20 = false;
        cfg.width = 480;
        cfg.height = 800;

        new LwjglApplication(new ColourGame(), cfg);
    }
} 
```

真的卡在这上面了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T09:12:47.937

根据这个[http://lwjgl.org/forum/index.php/topic,4711.0.html](http://lwjgl.org/forum/index.php/topic,4711.0.html) 问题在于 JRE 7 update 6 与 Lwjgl 的兼容性。

问题似乎在库的较新版本中得到解决。我不确定 libgdx 是否已相应更新，但您可以尝试将新版本放入您的 libs 文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-12T19:20:28.217

这个问题通过 libgdx 的最新夜间版本进行了排序，在这样做之后我陷入了另一个问题，该版本中缺少 IntersectRectangles 方法。所以我不得不回到最新的稳定版本并让它工作，但是。 ..上面提到的问题又出现了。所以我会坚持使用最新的稳定版本，这样我就可以在我的安卓设备上部署代码了......

所以临时解决方案：在开发时使用夜间构建进行测试，如果你不需要最重要的方法应该没问题（我想知道是否还有更多我不必使用的方法..）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T11:03:52.440

如果您仍需要使用稳定或旧版本的 libgdx。除了 jdk 1.7 之外，您可能还想尝试安装 jdk 1.6（我已经完成）。

**1\. 下载JDK1.6**
用这个问题下载jdk 1.6：[jdk 6 on mountain lion](https://stackoverflow.com/questions/13653597/jdk-6-on-mountain-lion)

**2\. 添加 JRE 主页**
在 Eclipse 中，转到首选项 -> Java -> 已安装的 JRE's 并添加 jdk 1.6 的主页（就像您的 1.7 版本一样）。

**3\. 将运行配置设置为使用 1.6**
转到运行 -> 运行配置 -> 您的配置 -> JRE。选择 1.6 作为替代 JRE。:)

# assembly - MIPS汇编语言中的二进制除法算法......一行的帮助？

> ID：13571736
> 
> 赞同：0
> 
> 时间：2012-11-26T19:29:43.383
> 
> 标签：assembly, binary, mips, division

我遇到以下问题：

“将余数寄存器左移，将最右边的位设置为 0”

我的尝试： lui $s0, 1 # 将余数寄存器左移 1 位

还是应该是 1*4 = 4 而不是 1 的偏移量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T19:46:12.047

你有指令集参考吗？`lui`是加载上立即数，它不移动寄存器，它移动立即数，并移动 16 位。所以`lui $s0, 1`只需加载`0x00010000`到`$s0`.

要左移，可以使用`sll`指令，例如`sll $s0, $s0, 1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-14T11:38:47.903

。数据

prompt_devident: .asciiz "\n 输入你的 Devident :\n "
prompt_devider: .asciiz "输入你的 Devider :\n "
print_quotient: .asciiz "你的商是："
print_reminder: .asciiz "\n 你的提醒是："

.text
.globl 主要
主要：

l4: la $a0, prompt_devident
li $v0,4
系统调用

```
li $v0,5        
syscall        
move $t0,$v0        

la $a0, prompt_devider        
li $v0,4        
syscall        

li $v0,5        
syscall        
move $t1, $v0        

ori $t2,  $zero,0        
ori $t3,  $zero,0        
ori $t4,  $zero,0        
ori $t5,  $zero,32 
```

循环： sll $t2,$t2,1
bgez $t0,l1
ori $t2,$t2,1

l1: sll $t0,$t0,1
subu $t3,$t2,$t1
bgez $t3,l2

l3: addi $t4,$t4,1
beq $t4,$t5,next
j 循环

l2: move $t2,$t3
ori $t0,1
j l3

next: la $a0, print_quotient
li $v0,4
syscall

```
 move  $a0,$t0               
    li    $v0,1            
syscall            

la $a0, print_reminder            
li $v0,4            
syscall            

    move  $a0,$t2               
    li    $v0,1            
syscall            
j l4            

li $v0, 10            
syscall 
```

# java - 使用java找出系统中连接的任何外围设备？

> ID：13571744
> 
> 赞同：2
> 
> 时间：2012-11-26T19:29:57.223
> 
> 标签：java, camera, webcam, usb-drive, image-scanner

如何使用java找出系统中连接的任何外围设备，即扫描仪、网络摄像头、handcam、usb数据卡等？这些设备列表可以显示在applet中吗？请帮帮我。

**更新：-**

```
If any wrong on this question,Please write your comments.I corrected this question. 
```

# c++ - 它在 C++11 标准中的什么地方指定了在翻译过程中何时可以评估 constexpr 函数？

> ID：13571749
> 
> 赞同：18
> 
> 时间：2012-11-26T19:30:07.077
> 
> 标签：c++, c++11, constexpr

仅仅因为一个函数（或构造函数）......

*   被声明为 constexpr 并且
*   函数定义满足 constexpr 要求

...并不意味着编译器将在翻译期间评估 constexpr 函数。我一直在查看 C++11 FDIS（N3242，可在[http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/)获得）试图确定两件事：

*   编译器何时有义务在翻译期间评估 constexpr 函数？
*   何时允许编译器在翻译期间评估 constexpr 函数？

第 5.19 节第 1 段说常量表达式可以在翻译过程中求值。据我所知，第 5.19 节的其余部分阐述了 constexpr 函数定义中的有效规则。

我知道我可以在翻译期间通过将 constexpr 函数的结果声明为 constexpr 来强制进行 constexpr 评估。像这样：

```
// Declaration
constexpr double eulers_num() { return 2.718281828459045235360287471; }

// Forced evaluation during translation
constexpr double twoEulers = eulers_num() * 2.0;
static_assert(twoEulers > 5.0, "Yipes!"); 
```

到目前为止，我一直无法在 FDIS 中找到以下段落：

*   强制`twoEulers`在翻译过程中进行评估或
*   指定编译器在翻译期间可能或必须评估 constexpr 函数的其他情况。

我特别感兴趣的发现是翻译期间的 constexpr 评估是否由以下因素触发：

1.  当传递给 constexpr 函数的所有参数都是文字时，或者
2.  *重载决议期间隐含*的对象参数（第 13.3.1 节第 3 段）是 constexpr 或需要文字（例如对于数组维度），或者
3.  完全不同的东西。

如果可能，请在您的回复中引用我可以查找的 FDIS 部分或我可以在 FDIS 中搜索的关键短语。标准中的英语有些迟钝，所以我可能一直在阅读相关段落，完全错过了它们的含义或意图。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T06:18:55.433

`constexpr`只要实际上可以这样做，就“允许”在编译时评估调用。请记住，规范在“好像”规则下运行。因此，如果您无法区分，编译器可以为所欲为。

当编译器在编译时实际*需要*答案时，编译器*需要*在编译时评估调用。例如：`constexpr`

 *```
constexpr int foo() {return 5;}

std::array<float, foo()> arr; 
```

编译器需要在编译时知道数组大小。因此，它必须在编译时计算常量表达式。如果`constexpr`函数无法在编译时执行，则会出现编译时错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T06:41:11.573

Nicol Bolas 是 100% 正确的，但还有另一个有趣的方面：​​表达式是否在翻译时评估以及是否在运行时评估是完全独立的问题。由于常量表达式不能有副作用，它可以被计算任意次数，并且没有什么能阻止它在翻译时和运行时被计算。

假设常量表达式是一个大数组（不是 a `std::array`，只是一个数组），这是完全合法的，并且程序没有表明它具有静态存储。还假设在需要编译时计算的上下文中仅使用数组的元素 7。编译器计算整个数组，使用元素 7，丢弃它，并在运行时在使用它的范围内插入代码来计算它是非常合理的，而不是用整个计算数组来膨胀二进制文件。我相信这不是理论上的问题；我已经在各种上下文中使用各种编译器观察到它。`constexpr`并不意味着。*_*`static`

当然，如果编译器可以确定该数组在运行时没有被使用，它甚至可能不会插入代码来计算它，但这是另一个问题。

如果你确实在运行时使用了这样的对象，并且你想向编译器表明它值得在程序运行期间保留它，你应该将它声明为`static`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-09T02:31:03.890

通过梳理 FDIS，我发现了三个地方，它们指定了在翻译过程中必须对 constexpr 表达式进行评估的位置。

**第 3.6.2 节非局部变量的初始化**，第 2 段说，如果使用构造函数初始化具有静态或线程本地存储持续时间的对象，`constexpr`则在翻译期间评估构造函数：

> *执行常量初始化*：
> 
> > *   如果具有静态或线程存储持续时间的对象由构造函数调用初始化，如果构造函数是`constexpr`构造函数，如果所有构造函数参数都是常量表达式（包括转换），并且如果在函数调用替换 (7.1.5) 之后，每个构造函数*mem-initializers*中的 call 和 full-expression是一个常量表达式；

**第 7.1.5 节 constexpr 说明符**，第 9 段说如果对象声明包含说明`constexpr`符，则在翻译期间评估该对象（即，是文字）：

> 对象声明中使用的`constexpr`说明符将对象声明为 const。这样的对象应具有文字类型并应被初始化。如果它由构造函数调用初始化，则该调用应为常量表达式（5.19）。否则，出现在其初始化程序中的每个完整表达式都应是一个常量表达式。用于转换初始化表达式的每个隐式转换和用于初始化的每个构造函数调用都应是常量表达式（5.19）中允许的那些之一。

我听说有人争辩说，这一段为实现将初始化推迟到运行时留出了空间，除非在翻译过程中可以检测到效果，例如，`static_assert`. 这可能不是一个准确的观点，因为在某些情况下，值是否在翻译过程中被初始化是可以观察到的。**第 5.19 节常量表达式**第 4 段强化了这一观点：

> [*注意：*虽然在某些情况下必须在程序翻译期间计算常量表达式，但可以在程序执行期间计算其他表达式。由于本国际标准对浮点运算的准确性没有限制，因此未指定在翻译期间对浮点表达式的求值是否与对相同表达式的求值产生相同的结果（或对相同值的相同操作） ) 在程序执行期间... —*结束注*]

**第 9.4.2 节静态数据成员**，第 3 段说如果文字类型的 const 静态数据成员由 constexpr 函数或构造函数初始化，则必须在翻译期间评估该函数或构造函数：

> 如果静态数据成员是 const 字面量类型，则它在类定义中的声明可以指定一个*大括号或相等初始化器*，其中作为*赋值表达式*的每个*初始化器子句*都是一个常量表达式。文字类型的静态数据成员可以在类定义中用说明符声明；如果是这样，它的声明应指定一个*大括号或等式初始化器*，其中作为赋值表达式的每个*初始化器子句*都是一个常量表达式。[*注意：*在这两种情况下，成员都可能出现在常量表达式中。——*尾注*]*`constexpr`*

 ***有趣的是，我在 FDIS 中没有发现任何需要`constexpr`计算表达式的结果（如果其结果用作数组维度）。我很确定标准委员会希望如此。但我也可能在搜索中错过了这一点。

在这些情况之外，C++11 标准*允许*在翻译期间执行 constexpr 函数和构造函数中的计算。但它不需要它。计算可能发生在运行时。编译器在翻译过程中执行哪些计算，在一定程度上是实现的质量问题。

在我定位的所有三种情况下，翻译时评估的触发器都是基于使用调用结果的目标的`constexpr`要求。从不考虑函数的参数是否`constexpr`是文字（尽管它是有效评估的先决条件）。

因此，要真正了解这一点，`constexpr`翻译期间的评估似乎是由以下因素触发的：

*   重载决议期间隐含的对象参数（第 13.3.1 节第 3 节）是 constexpr 或需要文字。

我希望这对我以外的人有帮助。感谢所有做出贡献的人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T05:58:55.797

我不认为它在任何地方都是被迫的。我也看了一下，这很棘手，因为该列表中没有一篇关于 constexpr 的论文；他们似乎都从以前的论文集中添加/删除。

我认为一般的想法是当 constexpr 函数的输入本身是 constexpr 时，这一切都将在编译时完成；并且通过扩展非函数 constexpr 语句，如果您使用的是半智能编译器，那么无论如何都是文字将在编译时运行。

> 如果使用非常量表达式的参数调用 constexpr 函数或构造函数，则调用的行为就好像该函数不是 constexpr，并且结果值不是常量表达式。

[来自维基百科](http://en.wikipedia.org/wiki/C++11#constexpr_-_Generalized_constant_expressions%20-%20which%20in%20turn%20quotes)

这似乎从[这个 pdf](http://www.stroustrup.com/sac10-constexpr.pdf)中获取信息：

> constexpr 函数：constexpr 函数是一个“足够简单”的函数，因此当使用常量值的参数调用时，它会传递一个常量表达式（参见第 2.1 节）。****

# java - 如何在基于 MySQL 的应用程序中有效地为用户存储多个不同的计数器值？

> ID：13571754
> 
> 赞同：1
> 
> 时间：2012-11-26T19:30:18.203
> 
> 标签：java, mysql

我想为我的用户存储不同类型的计数器。平台：Java

例如，我已经确定：

*   currentNumRecords
*   currentNumSteps
*   currentNumFlowsInterval1440
*   currentNumFlowsInterval720
*   currentNumFlowsInterval240
*   currentNumFlowsInterval60
*   currentNumFlowsInterval30
*   等等

上面的每个计数器都需要在每个月初为每个用户重置。每个计数器的值可能会出现无法预测的高峰值等。（我的意思是很多东西都被计算在内，所以我想考虑一个可扩展的解决方案）。

现在我的问题是采取什么方法：

**a)**我是否应该为用户表上的每个计数器设置单独的列并执行“更新设置 counterColumn = counterColumn+ 1”之类的操作？

**b)**将所有值放在某种 JSON/XML 中并将其放在单个列中？（在这种情况下，我总是必须一次更新所有值）

我看到的缺点是每次增加单个计数器时都会在用户表上锁定行。

**c）**有一个单独的计数器表，其中包含 3 列（用户 ID、名称、计数器）并为每个计数执行一个 INSERT + 有一个后台作业执行写入用户表的聚合？在这种情况下，可以将聚合计数器作为 JSON 存储在用户表的列中吗？

**d)**在 MySQL 中做所有事情还是使用其他技术？我还考虑过使用另一种解决方案来存储计数器并仅将聚合保存在 MySQL 中。例如，我已经尝试过使用 Apache Cassandra 的分布式计数器。我担心的是 cassandra 没有的交易。我需要准确的计数器，因为它们用于计费，因此我不知道 Cassandra 是否适合这里，尽管 Cassandra 的可扩展性似乎很诱人。Redis 用于存储计数器 + 在 MySQL 中写入聚合呢？Redis 有什么东西可以帮助我吗？或者我应该将所有内容存储在内存中的简单 Java HashMap 中并拥有一个聚合后台线程并且不使用其他技术？

总而言之，我担心：

*   减少行锁定
*   有确切的计数器（交易？）

谢谢你的想法:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:52:40.237

你的要求并不是那么不典型。一般来说，这是统计会话/用户/...绑定的书面数据。

如果还没有这样做，第一件事就是拆分。制作一个主要是只读的数据库，并分别收集这些数据。因此，为普通属性创建了一个单独的用户表。

统计数据可以保存在内存表中。您还可以使用数据库、消息队列、会话属性以外的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:35:09.303

你说的有点自相矛盾。

> 每个用户的计数数量可能很大或至少不可预测。

对我来说，这意味着它们必须是统一的，就像一个数组。不可能拥有无限数量的异构数据，除非您有无限数量的代码和无限数量的开发人员要花费的时间。

如果它们是统一的，则应将它们展平为表 user_counter ，其中每一行的形式为`(user_id, counter_name, counter_value)`。但是，您需要仔细考虑需要什么样的索引等。如果它们都设置为零或某个默认值，则在月初更新是一个 SQL 查询。

基本上（c）。(a) 和 (b) 是最荒谬的，而 MySQL 仍然是适合此的技术。

# php - Yii 迁移和自定义抽象数据类型

> ID：13571755
> 
> 赞同：3
> 
> 时间：2012-11-26T19:30:34.900
> 
> 标签：php, yii

我正在做一个项目并使用 Yii 的迁移功能来保持不同的生产和测试系统同步。我必须说我喜欢这个工具。我的问题是有没有办法创建自定义抽象数据类型？

我知道 Yii 的迁移功能是为了允许在多个 DBMS 系统中创建表，但我的站点仅限于 MySQL，因此应该会有所帮助。我想做的是：

```
$this->createTable('test_table', array(
      'key'=>'pk',
      'active_YN'=>'yn',
)); 
```

代替：

```
$this->createTable('test_table', array(
      'key'=>'pk',
      'active_YN'=>'TINYINT(1) NOT NULL DEFAULT \'1\'',
)); 
```

我猜我必须扩展 CDbMigration，可能有一种行为？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T23:18:43.417

如果你仍然想成功，这里是你可以尝试的。

MySQL 默认使用驱动程序 CMysqlSchema。您需要使用自定义抽象列类型扩展此类。

```
class MyCustomMysqlSchema extends CMysqlSchema
{
    /**
     * @var array the abstract column types mapped to physical column types.
     */
    public $columnTypes=array(
        'pk' => 'int(11) NOT NULL AUTO_INCREMENT PRIMARY KEY',
        'string' => 'varchar(255)',
        'text' => 'text',
        'integer' => 'int(11)',
        'float' => 'float',
        'decimal' => 'decimal',
        'datetime' => 'datetime',
        'timestamp' => 'timestamp',
        'time' => 'time',
        'date' => 'date',
        'binary' => 'blob',
        'boolean' => 'tinyint(1)',
        'money' => 'decimal(19,4)',
        // add your custom abstract column types here
        'yn' => 'tinyint(1) UNSIGNED NOT NULL DEFAULT 1',
    );
} 
```

您需要连接才能使用这个新驱动程序。如下修改您的数据库配置。

```
'db'=>array(
    // your initial db configuration here
    'driverMap'=>array('mysql'=>'MyCustomMysqlSchema'),
), 
```

# php - 通过数组值链接的动态类方法调用

> ID：13571759
> 
> 赞同：4
> 
> 时间：2012-11-26T19:30:52.103
> 
> 标签：php

例如我有类**MyClass**：

```
Class MyClass {

    public function method_1() {
        return $this;
    }

    public function method_2() {
        return $this;
    }

    public function method_n() {
        return $this;
    }
} 
```

我有一系列函数及其参数：

```
$array = array(
    'method_1' => array(
        '0' => 'first_argument',
        '1' => 'second_argument',
        '2' => 'nth_argument',
    ),
    'method_2' => array(
        '0' => 'first_argument',
        '1' => 'second_argument',
        '2' => 'nth_argument',
    ),
); 
```

如何`MyClass`从链中的数组中调用方法？

```
$result = $my_class->$array['method_1']($array['method_1'][0], $array['method_1'][0])
    ->$array['method_1']($array['method_2'][0], $array['method_2'][0])
    ->$array['method_n']($array['method_n'][0], $array['method_n'][0]); 
```

例如：

```
foreach($array as $function => $args) {
   // build chain here and execute after foreach
} 
```

那么，主要问题是如何使用链中的参数调用无限数量和未知数量的类函数？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T19:38:13.410

把你的`$array['method_*']`括号`{}`：

```
$result = $my_class->{$array['method_1']}($array['method_1'][0], $array['method_1'][0])
    ->{$array['method_1']}($array['method_2'][0], $array['method_2'][0])
    ->{$array['method_n']}($array['method_n'][0], $array['method_n'][0]); 
```

如果我注意到，尽管 PHP 允许这样做，但为了代码的可读性和可靠性，您应该重新考虑动态链调用。它可能会为您节省几行代码，但可能会在以后的调试中引起一些麻烦

// 附录：IMO，执行逻辑的更好方法是通过`foreach`和[`call_user_func_array()`](http://www.php.net/manual/en/function.call-user-func-array.php)：

```
foreach ($array as $method => $args) {
    call_user_func_array(array($my_class, $method), $args);
} 
```

# complex-event-processing - StreamInsight，事件匹配

> ID：13571764
> 
> 赞同：1
> 
> 时间：2012-11-26T19:31:14.650
> 
> 标签：complex-event-processing, streaminsight

我遇到了 StreamInsight 的情况，其中我有 1 个输入源，其中包含不同类型的事件，需要区别对待，但最终与来自同一源的其他事件匹配。

我在下面创建了一个（非常）更简单的场景，其中输入源生成随机数（为简单起见，1 和 0）。如果数字是偶数，我们想保存它，直到另行通知（未知持续时间）。如果数字是奇数，我们希望将其与偶数流中的 n-1 匹配，然后从偶数流中删除 n-1。如果不匹配，奇数将直接处理，无需进一步计算。在从偶数流中删除匹配的 n-1 之前，我的一切都按预期工作。进行匹配，并将匹配推送到输出适配器，但仍可用于对给定事件进行另一个连接。我收集了几天的实验和研究，不知何故我需要剪辑均匀的流事件持续​​时间（ClipEventDuration），大概作为 GenerateEvenJoinQuery 中过滤器的一部分，但是，我尝试过的一切都没有产生任何变化或不希望的结果。我还尝试将 evenStream 更改为 Interval 形状，但运气更差。任何帮助或建议将不胜感激。

例如，给定一个简化列表： [ 1, 0, 1, 1, 0, 0, 1, 1, 1 ]

我希望输出看起来像： [ 1, 100, 1, 100, 100, 1 ]

我也会接受我正在使用的真实场景，第一个输出实际上是不可能的：注意第二个和第三个 0 连接到一个 1\. [ 1, 100, 1, 100, 1, 1 ]

```
...
    CepStream<int> inputStream = CepStream<int>.Create(
            app
            , "ATGInputStream"
            , typeof(InputAdapterFactory)
            , new InputConfig()
            , EventShape.Point);

    var everythingFilter = from e in inputStream select e;
    Query everythingQuery = GenerateEverythingQuery(app, inputStream);
    var everythingStream = everythingQuery.ToStream<int>("everythingStream");

    Query oddQuery = GenerateOddQuery(app, everythingStream);
    var oddAts = new AdvanceTimeSettings(new AdvanceTimeGenerationSettings(1, TimeSpan.FromTicks(-1), false), null, AdvanceTimePolicy.Drop);
    var oddStream = oddQuery.ToStream<int>("oddStream", oddAts);

    // only inject a cti in to even when we need it
    var ats = new AdvanceTimeSettings(null, new AdvanceTimeImportSettings("oddStream"), AdvanceTimePolicy.Adjust);
    Query evenQuery = GenerateEvenQuery(app, everythingStream);
    var evenStream = evenQuery.ToStream<int>("evenStream", ats);

    Query joinQuery = GenerateOddEvenJoinQuery(app, evenStream, oddStream);
    var joinStream = joinQuery.ToStream<int>("joinStream");
...

private Query GenerateOddEvenJoinQuery(Application app, CepStream<int> evenStream, CepStream<int> oddStream) {
    // (o * e) + 100 is an easy way to tell we had a match
    var filter = (from o in oddStream
                  from e in evenStream
                  where e == (o - 1)
                  select (o * e) + 100);

    // LEFT ANTI SEMI JOIN
    var filter2 = from o in oddStream
                    where (from e in evenStream where e == o - 1 select e).IsEmpty()
                    select o;

    var joinFilter = filter.Union(filter2);

    return joinFilter.ToQuery(
            app
            , "Number Join Query"
            , "Joins number streams."
            , EventShape.Point
            , StreamEventOrder.FullyOrdered);
}

private Query GenerateEvenQuery(Application app, CepStream<int> stream) {
    var evenFilter = (from e in stream where e % 2 == 0 select e).AlterEventDuration(e => TimeSpan.MaxValue);

    return evenFilter.ToQuery(
            app
            , "EvenQuery"
            , ""
            , EventShape.Edge
            , StreamEventOrder.FullyOrdered);
}

private Query GenerateOddQuery(Application app, CepStream<int> stream) {
    var filter = (from f in stream where (f % 2) == 1 select f);

    return filter.ToQuery(
            app
            , "OddQuery"
            , "Queries for odd numbers in stream."
            , EventShape.Point
            , StreamEventOrder.FullyOrdered);
}

private Query GenerateEverythingQuery(Application app, CepStream<int> stream) {
    var everythingFilter = from e in stream select e;

    return everythingFilter.ToQuery(
            app
            , "EverythingQuery"
            , "Queries everything from the input stream."
            , EventShape.Point
            , StreamEventOrder.FullyOrdered);
} 
```

* * *

## 解决方案：

虽然我希望一些更精细且可能更快的东西，但延迟处理可能有助于提高性能。

```
public Program() {
    public Program() {
        ...
            var stream = CepStream<RandomNumber>.Create(
                    app
                    , "StaticInputStream"
                    , typeof(StaticInputAdapterFactory)
                    , new InputConfig()
                    , EventShape.Point);

            var processedStream = stream.Scan(new StreamMatcher());

            Query consoleQuery = GenerateConsoleOutputQuery(app, processedStream);
        ...
    }

    private Query GenerateConsoleOutputQuery(Application app, CepStream<int> stream) {
        var filter = from f in stream select f;

        return filter.ToQuery(
                app
                , "Console Output Query"
                , "Queries for messages to output to the console."
                , typeof(OutputAdapterFactory)
                , new OutputConfig()
                , EventShape.Point
                , StreamEventOrder.FullyOrdered);
    }

    public class StreamMatcher : CepPointStreamOperator<RandomNumber, int> {
        private List<int> unmatched = new List<int>();

        public override bool IsEmpty {
            get { return false; }
        }

        public override IEnumerable<int> ProcessEvent(PointEvent<RandomNumber> inputEvent) {
            if(inputEvent.Payload.value % 2 == 0) {
                unmatched.Add(inputEvent.Payload.value);
            } else {
                var result = inputEvent.Payload.value;

                int match = -1;

                try {
                    match = (from f in unmatched where f == result - 1 select f).Take(1).Single();
                    unmatched.Remove(match);
                } catch { }

                if(match > -1) {
                    result += match + 100;
                }

                yield return result;
            }
        }
    }
}

public class RandomNumber {
    public int value { get; set; }
    public DateTime timeStamp { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:31:50.767

您可以考虑使用 UDSO（用户定义的流运算符），您可以在其中保持零状态。

```
void Main()
{
    var randomNumbers = new []
    {
        new RandomNumber(){ Value = 1, TimeStamp = DateTime.Parse("2012-01-01 10:01:00 AM")  },
        new RandomNumber(){ Value = 0, TimeStamp = DateTime.Parse("2012-01-01 10:02:00 AM")  },
        new RandomNumber(){ Value = 0, TimeStamp = DateTime.Parse("2012-01-01 10:02:00 AM")  },
        new RandomNumber(){ Value = 1, TimeStamp = DateTime.Parse("2012-01-01 10:03:00 AM")  },
        new RandomNumber(){ Value = 1, TimeStamp = DateTime.Parse("2012-01-01 10:04:00 AM")  },
        new RandomNumber(){ Value = 0, TimeStamp = DateTime.Parse("2012-01-01 10:05:00 AM")  },

    };

    var stream =  randomNumbers.ToPointStream(Application, 
            e=> PointEvent.CreateInsert(e.TimeStamp ,e), 
            AdvanceTimeSettings.IncreasingStartTime) ;

    var query = stream.Scan(new MyCalculation());

    query.Dump();   

}

public class MyCalculation : CepPointStreamOperator<RandomNumber,string>
{

    private Queue<int> _queue = new Queue<int>() ;

    public override bool IsEmpty
    {
        get { return false; }
    }

    public override IEnumerable<string> ProcessEvent(PointEvent<RandomNumber> inputEvent)
    {
        if (inputEvent.Payload.Value % 2 == 0)
        {
                _queue.Enqueue(inputEvent.Payload.Value);
        }
        else
        {
            var result= inputEvent.Payload.Value.ToString() ;
            var list = _queue.ToArray();
            for (int i = 0; i < list.Count(); i++)
            {
                result += list[i];
            }
             yield return result ;
        }
    }
}

public class RandomNumber 
{
    public int Value {get;set;}
    public DateTime TimeStamp {get;set;}
} 
```

# javascript - 如何强制 Firefox 和其他人记住我的新密码？

> ID：13571768
> 
> 赞同：2
> 
> 时间：2012-11-26T19:31:33.490
> 
> 标签：javascript, html, forms, firefox

我和这个人的情况一样：[Triggering the Change Saved Password dialog in firefox](https://stackoverflow.com/questions/1934558/triggering-the-change-saved-password-dialog-in-firefox)

我有一个模式窗口，似乎让用户更改他的密码。提交表单时（它是一个 POST），Firefox 不会要求更改其数据库中的密码。我尝试了几件事：

1.  一个动态表单（使用 JavaScript 创建），所有字段都带有 autocomplete="on"，并且有两个字段名为“current-password”和“new-password”

2.  一个动态表单（使用 JavaScript 创建），所有字段都带有 autocomplete="on"，并且有两个字段名为“current-password”和**“password”**

3.  一个动态表单（用 JavaScript 创建），所有字段都带有 autocomplete="on"，三个字段分别命名为**"username"**、 "current-password" 和 "password"

4.  一个**非动态**表单，所有字段都带有 autocomplete="on"，并且三个字段名为“username”、“current-password”和“password” **==>**在这种情况下，Firefox 在“username”字段中显示我的用户名和我在“当前密码”字段中的当前密码

5.  我还尝试将我的两个字段称为“密码”和“新密码”

我尝试使用 JavaScript`submit()`命令，然后在我的表单中尝试了一个 SUBMIT 输入按钮。表格也有`autocomplete="on"`.

但是 Firefox 从不问我是否要更新我保存的密码……有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:37:37.147

检查您是否没有设置阻止例外。

```
Tools > Options > Security: Passwords: Exceptions 
```

您还可以检查该站点是否有任何条目或密码管理器中列出的名称为空的条目。

```
 Tools > Options > Security: Passwords: "Saved Passwords" > "Show Passwords" 
```

如果单击“从不”，则会创建一个需要删除的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:33:17.467

通常你只需输入新密码，然后 Firefox 会询问我是否要存储新密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T19:45:59.587

尝试为表单和表单域赋予相同的名称和属性。

# python - 正则表达式匹配以空格开头的行继续？

> ID：13571769
> 
> 赞同：-1
> 
> 时间：2012-11-26T19:31:36.297
> 
> 标签：python, regex

我正在尝试使用正则表达式从文本文件中提取“条目”。文件的每一行都是一个单独的条目，除非该行以空格开头，在这种情况下，该行是前一行的延续。

例子：

```
import re

INPUT = """\
This is entry 1.
This
 is
  entry 2.
And this is entry 3.
This
 is
 entry
 4."""

OUTPUT = ["This is entry 1.",
          "This\n is\n  entry 2.",
          "And this is entry 3.",
          "This\n is\n entry\n 4."]

# What should the pattern be?
PATTERN = re.compile("(.+)(?=\n|$)")

assert PATTERN.findall(INPUT) == OUTPUT 
```

什么应该`PATTERN`匹配所有条目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:44:37.217

```
OUTPUT = re.sub("[^\S\n]*\n[^\S\n]+", " ", INPUT).split("\n"); 
```

### 请参阅[此演示](http://ideone.com/ToC2yj)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:51:22.650

我在 Java 中测试过的正则表达式

```
^\S[.\s\w\r\n]*?(?=\n\S|\Z) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T19:56:08.787

如果我们可以依靠大写句子的第一个字母，我认为解决此问题的好方法是以下正则表达式：

```
re.findall(r'\w[\w\s]+?\.', INPUT) 
```

在实践中，使用您的值`INPUT`：

```
>>> re.findall(r'\w[\w\s]+?\.', INPUT)
['This is entry 1.', 'This\n is\n  entry 2.', 'And this is entry 3.', 'This\n is\n entry\n 4.'] 
```

我写的正则表达式`\w`在 the 之前有一个正确的`[\w\s]+?`，以确保每个匹配都从句子的开头开始，而不是前面的空格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T19:39:06.503

```
In [92]: re.findall(r'(.+(?:\n\s.*)*)\n?', INPUT)
Out[92]: 
['This is entry 1.',
 'This\n is\n  entry 2.',
 'And this is entry 3.',
 'This\n is\n entry\n 4.']

In [93]: OUTPUT == re.findall(r'(.+(?:\n\s.*)*)\n?', INPUT)
Out[93]: True 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-26T19:35:56.323

我想明白了。

诀窍是“ `.`（不匹配换行符）或换行符后跟空格”。

```
PATTERN = re.compile(r"(?:.|\n\s)+") 
```

# android - Android OpenGL 动态壁纸崩溃 - Mali EGL 错误？

> ID：13571771
> 
> 赞同：0
> 
> 时间：2012-11-26T19:31:39.343
> 
> 标签：android, opengl-es, live-wallpaper, egl

我的基于 OpenGL 的动态壁纸项目有一个大问题。我设法将我的 2d 动态壁纸从画布移动到 opengl，一切看起来都很好而且很快但是......该死的总有一些东西

当我设置我的动态壁纸并重新打开动态壁纸设置菜单时，选择了相同的壁纸然后返回或接受它崩溃......但它只在我的三星 Galaxy Note (Android 4.04) 上崩溃。当我在其他一些壁纸之后设置我的壁纸时，它也会崩溃，但总是一样。我在 Samsung Ace (android 2.37) 上试过——效果很好。那么到底是什么？

我是根据[http://www.learnopengles.com/how-to-use-opengl-es-2-in-an-android-live-wallpaper/](http://www.learnopengles.com/how-to-use-opengl-es-2-in-an-android-live-wallpaper/)项目制作的。你知道吗 - 原始项目引发了同样的错误。那么这只是SG Note的问题吗？自 2 个月以来，我一直在从事这个项目，而且我几乎完成了 - 现在我有点绝望，所以请帮忙 :)

```
11-26 20:13:41.853: I/dalvikvm-heap(26738): Grow heap (frag case) to 13.956MB for 1048592-byte allocation
11-26 20:13:41.873: D/dalvikvm(26738): GC_CONCURRENT freed <1K, 78% free 14064K/63495K, paused 2ms+3ms
11-26 20:13:43.238: D/dalvikvm(26738): GC_CONCURRENT freed 1667K, 80% free 12786K/63495K, paused 6ms+20ms
11-26 20:13:46.978: E/SurfaceTextureClient(26738): queueBuffer: error queuing buffer to SurfaceTexture, -19
11-26 20:13:46.988: E/MaliEGL(26738): void __egl_platform_queue_buffer(mali_base_ctx_type*, egl_buffer*):851 [EGL-ERROR] unable to queue buffer (0x3222ec)
11-26 20:13:46.988: E/SurfaceTextureClient(26738): queueBuffer: error queuing buffer to SurfaceTexture, -19
11-26 20:13:46.988: E/MaliEGL(26738): void __egl_platform_queue_buffer(mali_base_ctx_type*, egl_buffer*):851 [EGL-ERROR] unable to queue buffer (0x2d3fac)
11-26 20:13:46.988: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.988: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.988: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.988: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.988: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.988: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.988: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.988: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.988: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.988: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.988: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.988: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.988: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.988: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.988: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.993: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.993: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.993: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.993: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.993: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.993: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.993: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.993: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.993: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.993: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.993: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.993: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.993: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.993: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.993: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.993: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.993: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.993: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.993: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.998: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.998: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.998: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.998: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.998: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.998: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.998: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.998: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.998: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.998: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.998: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.998: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.998: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.998: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.998: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.998: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:46.998: E/MaliEGL(26738): void __egl_platform_dequeue_buffer(egl_surface*):1094 [EGL-ERROR] failed to dequeue buffer from native window (0x2d4358); err = -19, buf = 0x0
11-26 20:13:47.028: E/SurfaceTextureClient(26738): ISurfaceTexture::setBufferCount(0) returned No such device
11-26 20:13:47.063: W/dalvikvm(26738): threadid=12: thread exiting with uncaught exception (group=0x40c461f8)
11-26 20:13:47.068: E/AndroidRuntime(26738): FATAL EXCEPTION: GLThread 11491
11-26 20:13:47.068: E/AndroidRuntime(26738): java.lang.RuntimeException: eglSwapBuffers failed: EGL_BAD_ALLOC
11-26 20:13:47.068: E/AndroidRuntime(26738):    at android.opengl.GLSurfaceView$EglHelper.throwEglException(GLSurfaceView.java:1178)
11-26 20:13:47.068: E/AndroidRuntime(26738):    at android.opengl.GLSurfaceView$EglHelper.swap(GLSurfaceView.java:1136)
11-26 20:13:47.068: E/AndroidRuntime(26738):    at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1463)
11-26 20:13:47.068: E/AndroidRuntime(26738):    at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1216)
11-26 20:13:47.123: D/dalvikvm(26738): GC_EXPLICIT freed 178K, 80% free 12779K/63495K, paused 1ms+18ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:19:54.973

原因是重命名包名称而不重命名所有引用。这意味着在重命名包时必须选中所有复选框（通过重构->重命名）。这听起来并不相关，但它是问题所在。我有同样的问题，这解决了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-28T00:46:16.520

我有同样的错误。在网上找了很多论坛，终于自己偶然找到了解决办法！！！

这都是因为我更改了包名（mobi.pipo.wallpaper 为 mobi.pipo.wallpaperPRO），其中是 WallpaperSettingsActivity 类。改回来，一切都会好起来的:-)

PS 你可能会看到这个错误，因为在 Native Libraries 中已经有明确的包名。当您手动更改包名称（通过重构）时，本机代码不会更改。而且它仍然想使用旧的包名称，不再存在。所以...重命名它，生活将再次美好））

# nhibernate - 休眠强制内部连接上的多对一关系

> ID：13571775
> 
> 赞同：3
> 
> 时间：2012-11-26T19:31:52.943
> 
> 标签：nhibernate

我在两个实体 A 和 B 之间映射了多对一关系。我将使用 Fruit 和 Color 来模拟我的场景：

假设所有的水果只有一种颜色。所以我的 Fruit 类和我的 Fruit 映射代码中有一个 Color 属性：

```
ManyToOne(f=>f.Color, mapper=>mapper.Column("ColorId")); 
```

生成的 SQL 如下：

```
Select f0_.Name, f0...From Fruit f0_
  left outer join Color c0_
  on f0_.ColorId = c0_.id 
```

我想知道是否有任何方法可以强制内部联接而不是外部联接。因为从商业角度来看，没有颜色的水果并不是真正的水果，不应该存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:07:03.617

使用*Criteria API*，我们可以同时实现`left`和/或`inner`加入：

剩下

```
// default left outer join
var leftResult = session.CreateCriteria<Fruit>()
  .SetFetchMode("Color", NHibernate.FetchMode.Join)
  .List<Fruit>(); 
```

内

```
// explicit inner join
var innerResult = session.CreateCriteria<Fruit>()
  .CreateCriteria("Color", NHibernate.SqlCommand.JoinType.InnerJoin)
  .List<Fruit>(); 
```

*leftResult*将包含所有`Fruits`，而*innerResult*将仅包含这些具有`Color`

### *编辑：映射内部应用的特定解决方案*

*好吧，默认的左连接无法更改：[Nhibernate 中的 Inner 或 Right Outer Join 和 Many to Many 集合上的 Fluent Nhibernate](https://stackoverflow.com/questions/3057310)。但是如何使用其他 NHibernate 功能：*

假设我们的`Fruit`, 只有在存在 时才有意义`Color`。*如果这是真的，并且如果没有选择颜色*（将列设置为 NULL） ，我们将永远不需要这些表记录，`ColorId`那么有一种方法可以调整映射：

```
// Mapping Fruit
Table("Fruits");
Where("colorId IS NOT NULL");
... 
```

或在 XML

```
 <class name="Fruit" table="Fruits" where="colorId IS NOT NULL" ... > 
```

（见[http://nhibernate.info/doc/nh/en/index.html#mapping-declaration-class](http://nhibernate.info/doc/nh/en/index.html#mapping-declaration-class)）

所以这个，不会改变 LEFT 到 INNER，但至少映射将允许只有五颜六色的水果......

# jquery - JQuery，在 jsfiddle 中工作但不在现场的 li 元素上的衰落周期

> ID：13571777
> 
> 赞同：4
> 
> 时间：2012-11-26T19:31:59.483
> 
> 标签：jquery, html-lists, fade, jsfiddle

我在 jsfiddle 中有以下代码：http: [//jsfiddle.net/S5Cjm/1242/](http://jsfiddle.net/S5Cjm/1242/)

```
function InOut(elem) {
var delayOn = 2000, // time each <li> should be visible
    delayOff = 0, // time between revealing each <li>
    fade = 1000; // fade duration

// Pause, fade in, pause again, fadeout, then fire the callback
elem.delay(delayOff).fadeIn(fade).delay(delayOn).fadeOut(function() {
    // If we're not on the last <li>
    if (elem.next().length > 0) {
        // Call InOut on the next <li>
        InOut(elem.next());
    }
    else {
        // Else go back to the start
        InOut(elem.siblings(':first'));
        }
    });
}

$(function() {
    // Hide all the li's
    $('#content li').hide();
    // Call InOut to loop through them
    InOut($('#content li:first'));
}); 
```

但是，当嵌入到我的代码中时，它不起作用。

因此，我在脑海中引用了 JQuery：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

它曾经莫名其妙地工作过一次，尽管复制了代码，但又没有再次工作。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:44:53.887

这对我有用:=) 你的代码没有任何问题，只是你忘了把它包装在里面`$(document).ready(function(){});`

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" />
<meta name="author" content=""/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<title></title>
<style type="text/css">
*{margin:0px;padding:0px}
</style>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"   type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function(){
//alert('workin');
    function InOut(elem) {
    var delayOn = 2000, // time each <li> should be visible
    delayOff = 0, // time between revealing each <li>
    fade = 1000; // fade duration

// Pause, fade in, pause again, fadeout, then fire the callback
   elem.delay(delayOff).fadeIn(fade).delay(delayOn).fadeOut(function() {
    // If we're not on the last <li>
    if (elem.next().length > 0) {
        // Call InOut on the next <li>
        InOut(elem.next());
    }
    else {
        // Else go back to the start
        InOut(elem.siblings(':first'));
    }
    });
    }

    $(function() {
    // Hide all the li's
    $('#content li').hide();
    // Call InOut to loop through them
    InOut($('#content li:first'));
    });
    });
   </script>
   </head>
   <body>
       <ul id="content">
       <li>first</li>
       <li>second</li>
       <li>third</li>
       <li>fourth</li>
       <li>fifth</li>
       <li>sixth</li>
       </ul>
   </body>
   </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:46:57.587

不确定您要问的确切问题，即为什么它不能在您的网站上运行。

但是，我认为您最好在#content 而不是在第一个 li 上触发 InOut。就目前而言，每次出现 li 时，您都会调用一个新的嵌套函数调用。如果它运行了很长时间，那就是有很多函数可以做一个函数可以做的事情。

也许如果你重写它，你可能会解决过程中的不运行问题:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T09:41:21.997

尝试将这部分代码放在`<ul>`块下......这将有所帮助这是代码的一部分应该在块之后：

```
$(function() {
// Hide all the li's
$('#content li').hide();
// Call InOut to loop through them
InOut($('#content li:first'));
});
}); 
```

# java - 蓝牙限制

> ID：13571778
> 
> 赞同：0
> 
> 时间：2012-11-26T19:32:00.930
> 
> 标签：java, android

在使用蓝牙从一台安卓手机作为服务器共享文件时，许多手机（20-30 岁）可以同时从该服务器下载文件。android中蓝牙api的限制是什么？可能吗 ？

你喜欢怎么做？通过蓝牙还是通过wifi？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T21:26:28.830

[一个蓝牙](http://en.wikipedia.org/wiki/Bluetooth)主机只能有 7 个从属设备，所以如果您需要 20-30 个同时连接，这可能行不通。这是蓝牙限制，不是安卓。

# php - 有没有更好的方法来访问和存储只需要的类属性

> ID：13571785
> 
> 赞同：1
> 
> 时间：2012-11-26T19:32:48.783
> 
> 标签：php, class, object, properties, mysqli

如果我想从数据库中获取客户的电子邮件地址，则以下内容很糟糕，因为 $row 将为表中的每个字段包含一个元素`customer`：

```
$result = mysqli_query ('SELECT * FROM customer WHERE custid = 1');
$row = mysqli_fetch_array ($result, MYSQLI_ASSOC); 
```

这被认为更好，因为 $row 将包含电子邮件地址的单个元素，这就是我们所需要的：

```
$result = mysqli_query ('SELECT email FROM customer WHERE custid = 1');
$row = mysqli_fetch_array ($result, MYSQLI_ASSOC); 
```

我正在尝试将相同的逻辑应用于对象。如果“客户”对象有 50 个属性/字段，那么当您只需要访问一个时填充所有 50 个属性是否很常见？

下面是一个客户类和对象的基本示例，如果我们想要做的只是获取客户的电子邮件地址，而不是他们的所有其他详细信息（在此示例中，“客户”对象有 5 个属性，但实际上有可能更多）：

```
class Customer {

    private $custid;
    private $firstname;
    private $lastname;
    private $email;
    private $dateadded;

    public function getCustomer ($id) {
        $result = mysql_queryi ('SELECT * FROM customer WHERE custid = ' . $id);
        $row = mysqli_fetch_array ($result, MYSQLI_ASSOC);
        foreach ($row as $key => $value) {
            if (isset ($this->$key)) {
                $this->$key = $value;
            }
        }
    }
}

$customer = new Customer ();
$customer->getCustomer (1); // All I wanted is the email address, but now I have everything :-( 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:36:50.073

您可以为您的`getCustomer`函数创建第二个参数，该参数接受要查询的字段数组

```
public function getCustomer ($id, $fields=array('*')) {
    $fields = implode(',', $fields);
    $result = mysql_queryi("SELECT {$fields} FROM customer WHERE ...");
    // ... 
```

用法

```
// get entire customer
$customer->getCustomer(1);

// just get the email field
$customer->getCustomer(1, array('email'));

// get full name
$customer->getCustomer(1, array('firstname', 'lastname')); 
```

* * *

### 奖金：

我建议在你的模型中存储你的字段有点不同

```
class Customer
    private $_data;

    public function getCustomer($id, $fields=array('*')) {
        // ...
    }

    // PHP magic set method
    // calling $this->foo = 'bar' results in $this->_data['foo'] = 'bar'
    public function __set($key, $value) {
        return $this->_data[$key] = $value;
    }

    // PHP magic get method
    // calling $this->foo results in $this->_data['foo']
    public function __get($key) {
        return array_key_exists($key, $this->_data)
            ? $this->_data[$key]
            : null
        ;
    }
} 
```

这样你就可以摆脱所有静态定义的实例变量；例如, `private $custid;`, `private $firstname;`,`private ...`

相反，所有字段都将存储在`$this->_data`私有关联数组中。

这样做的好处是您甚至不必更改`getCustomer`函数的编写方式。

[了解有关 PHP 魔术方法的更多信息](http://php.net/manual/en/language.oop5.magic.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:35:33.873

您可以创建一个获取电子邮件地址的方法：

```
public function getCustomerEmail ($id) {
    $result = mysql_queryi ('SELECT email FROM customer WHERE custid = ' . (int)$id);
    $row = mysqli_fetch_array ($result, MYSQLI_ASSOC);
    foreach ($row as $key => $value) {
        if (isset ($this->$key)) {
            $this->$key = $value;
        }
    }
} 
```

**PS：**不要忘记在查询中使用它们之前清理你的变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T20:06:01.563

首先...
您确实应该将用于从实际对象中获取客户对象的逻辑分开...我建议查看存储库/外观模式以获取示例。

*例如。CustomerCollectionInstance->getCustomer($id) 返回一个客户实体。*

您的示例非常简单，因此与仅提取电子邮件和所有字段的区别应该是微不足道的。如果您的对象很大，比如说一个可能有 500 个订单的客户。订单应该被分成自己的对象，当实体对象被组装时，重的对象不应该被加载，而是在它们的位置有代理对象，当访问时查询数据库以获取该数据。

例如。

*   您在 CustomerCollection 上调用 getCustomer ...

*   CustomerCollection 返回一个加载了基本数据的 CustomerEntity，并且使用 CustomerOrderCollectionProxy 对象设置了 customerOrders。

*   您调用 CustomerEntity->getOrders() 返回 CustomerOrderCollectionProxy 对象

*   一旦您调用 CustomerOrderCollectionProxy，它将首先检查它是否已从数据库加载所需的数据......如果没有，它将组装一个真正的 CustomerOrderCollection 并将所有调用委托给该对象，该对象现在具有您需要的日期。

有关示例，请参见代理模式。

# magento - Magento。我如何知道产品列表中是否使用了某个属性？

> ID：13571790
> 
> 赞同：4
> 
> 时间：2012-11-26T19:33:20.423
> 
> 标签：magento, attributes

我需要知道哪些属性“在产品列表中使用”被选中为“是”，但没有找到任何功能，例如 $attribute->getIsVisibleOnFront()

事实上，我不知道如何从属性的“前端属性”中获取选项值（在快速搜索中使用，在高级搜索中使用，...）

我的代码是这样的：

```
<?php $attributes = $_product->getAttributes();             
    foreach ($attributes as $attribute) {
        if ($attribute->getIsUsedInProductListing()) {
                       echo $attribute->getStoreLabel();
                    }
            }
    ?> 
```

getIsUsedInProductListing() 不存在 ;-)

谢谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T21:14:08.917

是的，这很容易做到。

```
$product = Mage::getModel('catalog/product')->load($productId); // Or, use your product
$attributes = $product->getTypeInstance(true)->getSetAttributes($product);

foreach ($attributes as $attribute){
     var_dump($attribute); // You will be able to see all of the attribute settings here.

     if ($attribute->getUsedInProductListing()) {
          // Do cool things here.
     }

     if ($attribute->getIsHtmlAllowedOnFront()) {
          // Do cool things here.
     }

     if ($attribute->getIsVisibleInAdvancedSearch()) {
          // Do cool things here.
     }

     if ($attribute->getUsedForSortBy()) {
          // Do cool things here.
     }
} 
```

# windows - 程序集：在 windows nasm 中处理用户输入

> ID：13571791
> 
> 赞同：2
> 
> 时间：2012-11-26T19:33:26.310
> 
> 标签：windows, assembly, io, nasm

我是 asm 的新手，并试图制作一个简单的 hello world 等待用户按键结束。现在 hello world 一切都很好，但是我从中获得的 .exe 控制台程序会立即关闭，而我希望它保持在屏幕上，直到用户按下一个键。现在我遇到的问题是，由于某种原因，程序不断循环，搜索用户输入，但是当我强制关闭程序（^C）时，我可以看到我按下的所有键都写在下一个控制台行上，比如如果它使用了错误的缓冲区（？）

我已经在互联网上搜索了几天的修复程序，最后我正在寻求帮助，因为这让我发疯了 ^^ 我发现的所有内容都主要基于 int 系统或在 linux 下，而我必须处理窗口API...

非常感谢，欢迎任何帮助或提示！

代码 ：

```
STD_OUTPUT_HANDLE   equ -11
STD_INPUT_HANDLE    equ -10 
NULL                equ 0

global start
extern ExitProcess, GetStdHandle, WriteConsoleA, ReadConsoleInputA

section .data
msg                 db "Hello World!", 13, 10, 0
msg.len             equ $ - msg
consoleInHandle     dd 1

section .bss
buffer              resd 2
buffer2             resd 2

section .text
    start:

        push    STD_OUTPUT_HANDLE
        call    GetStdHandle

        push    NULL
        push    buffer
        push    msg.len
        push    msg
        push    eax
        call    WriteConsoleA 

    read:

        push STD_INPUT_HANDLE
        call GetStdHandle
        mov [consoleInHandle],eax
        push consoleInHandle
        push dword[buffer2]
        push 1
        push NULL
        call ReadConsoleInputA

        cmp eax,1
        jge exit
        jmp read

    exit:

        push    NULL
        call    ExitProcess 
```

可以在此处找到有关 Windows 功能的 Moar 信息：

*   [读取控制台输入](http://msdn.microsoft.com/en-us/library/ms684961.aspx)
*   [写控制台](http://msdn.microsoft.com/en-us/library/ms687401%28v=vs.85%29.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:00:24.943

`push consoleInHandle`推送地址，而不是句柄。你想要`push dword [consoleInHandle]`。相反，对于你想要传递地址的缓冲区，你需要`push buffer2`那里。此外，这个缓冲区应该是一个`INPUT_RECORD`结构的大小，我相信它是 32 字节。

**更新**：正如弗兰克评论的那样，参数顺序也是错误的。这段代码对我有用（注意，由于我的环境是如何设置的，我必须添加`@xx`stdcall 装饰 - 显然你不需要这些）：

```
STD_OUTPUT_HANDLE   equ -11
STD_INPUT_HANDLE    equ -10
NULL                equ 0

global start
extern ExitProcess@4, GetStdHandle@4, WriteConsoleA@20, ReadConsoleInputA@16

section .data
msg                 db "Hello World!", 13, 10, 0
msg.len             equ $ - msg
consoleInHandle     dd 1

section .bss
buffer              resd 2
buffer2             resb 32

section .text
    start:

        push    STD_OUTPUT_HANDLE
        call    GetStdHandle@4

        push    NULL
        push    buffer
        push    msg.len
        push    msg
        push    eax
        call    WriteConsoleA@20

    read:

        push STD_INPUT_HANDLE
        call GetStdHandle@4
        mov [consoleInHandle],eax
        push NULL
        push 1
        push buffer2
        push dword [consoleInHandle]
        call ReadConsoleInputA@16

    exit:

        push    NULL
        call    ExitProcess@4 
```

# zend-framework - 如何将 ErrorDescription 添加到 Zend 子表单元素？

> ID：13571792
> 
> 赞同：0
> 
> 时间：2012-11-26T19:33:25.803
> 
> 标签：zend-framework, zend-form

我有以下代码从表中创建子表单，我将错误描述保存在数据库中，我知道如何为普通元素设置它，但当它是子表单时不知道，如何为每个添加自定义错误消息子表单元素？

```
 $subForm = new Zend_Form_SubForm();
    foreach($configuration as $config){

        $elements[] = array(
            new Zend_Form_Element_Text($config->configuration_key, array(
                'required'   => (($config->is_required == 1) ? true : false),
                'label'      => $config->configuration_title,
                'filters'    => array('StringTrim'),
                'value'     => $config->configuration_value,
                'Options'   => array('style'=>'width:90%;'),
                'Description' => $config->configuration_description,
                'errorMessage' => $config->errorMessage,

            ))
        );

    }
    $subForm->addElements($elements);
    $this->addSubForm($subForm, 'configuration'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:02:35.613

在玩了很多不同的选项和试验/错误之后，我发现我需要将“ErrorMessages”添加为一个数组，我重写了我的代码片段

```
 $elementSettings = array(
                'required'   => (($config->is_required == 1) ? true : false),
                'label'      => $config->configuration_title,
                'filters'    => array('StringTrim'),
                'value'     => $config->configuration_value,
                'Options'   => array('style'=>'width:90%;'),
                'Description' => $config->configuration_description,
                'ErrorMessages' => array($config->errorMessage)
            );
         $elements[] = array(new Zend_Form_Element_Text($config->configuration_key, $elementSettings)); 
```

# php - php 获取 POST 或使用值

> ID：13571793
> 
> 赞同：1
> 
> 时间：2012-11-26T19:33:32.310
> 
> 标签：php

我有一个 php 函数，它从上一页获取一个值，但我想拥有一个现有值，以防万一我将该字段留空。

例子：

```
$age = $_POST['age']; 
```

如果年龄为空，则要添加 if statament 用户 50 作为值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:34:56.703

```
$age = isset( $_GET['age'] ) ? (int) $_GET['age'] : 50 ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:39:51.447

```
<?php
//Standard If Else 
if(isset($_GET['age']) && is_numeric($_GET['age'])){
    $age = $_GET['age'];
}else{
    $age = 50;
}

// Or a One-line Ternary
$age = isset($_GET['age']) && is_numeric($_GET['age']) ? $_GET['age'] : 50;
?> 
```

# xml - Jenkins错误读取junit xml

> ID：13571796
> 
> 赞同：1
> 
> 时间：2012-11-26T19:33:41.450
> 
> 标签：xml, junit, jenkins

我正在尝试让 jenkins 从 junit 读取 XML，但出现以下错误：

```
SEVERE: error while serving http://localhost:8080/job/JobTeste/test/trendMap 
```

这是 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<testrun name="test" project="test" tests="19" started="19" failures="0" errors="0" ignored="0">
  <testsuite name="testEmail" time="22.51">
    <testcase name="testA_importBanc" classname="testEmail" time="12.53"/>
    <testcase name="testValidEmail" classname="testEmail" time="9.98"/>
  </testsuite>
</testrun> 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T21:50:43.080

Jenkins 使用[Ant glob](http://ant.apache.org/manual/Types/fileset.html)格式来定位您的 JUnit 结果文件。如果文件位于工作区目录下的子目录中，则需要指定

```
**/Test.xml 
```

或文件的完整路径，相对于工作区目录。

# iphone - 如何将静态 cocos 库头导入我的项目（ARC）？

> ID：13571798
> 
> 赞同：0
> 
> 时间：2012-11-26T19:33:41.123
> 
> 标签：iphone, xcode, cocos2d-iphone, static-libraries

我有静态 cocos2d 库并希望将其包含到我的 ARC 项目中。我制作了 cocos2d 静态库，因为使用它是我的 ARC 项目...... 这是我第一次尝试使用静态库。

我的工作流程：

*   使用本教程创建静态库：http: [//www.learn-cocos2d.com/2012/04/enabling-arc-cocos2d-project-howto-stepbystep-tutorialguide/](http://www.learn-cocos2d.com/2012/04/enabling-arc-cocos2d-project-howto-stepbystep-tutorialguide/)
*   我创建了新的工作区
*   从finder中，我拖动了我的主项目和包含静态库的项目
*   在构建阶段的主项目中，我添加了我的链接库
*   在主项目的方案中，我将我的库添加到目标并选中了所有复选框（运行、构建......）

我还需要做什么？感谢帮助。

* * *

更新

我在某个地方读到了我还需要添加构建阶段和复制标题并将一些添加到公共部分。我需要在那里做广告的标题是什么？所有 cocos2d 库还是 cocos2s.h 和 cocosdension.h？还是我的库名？？这是屏幕截图：![在此处输入图像描述](../Images/cb4a4b89bcfed5999407751571342553.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:41:37.737

检查您的应用程序设置中的标题搜索路径，并查看它是否指向您的静态库和标题位置（并使其也递归）。

为此，请转到您的项目，然后`Build Settings`搜索`Header Search Paths`. 如果缺少标题的路径，请添加它（如果您在多台计算机上工作或者它是一个多人项目，请确保它不是绝对路径，而是相对于项目）

# c# - 使用 C# 使用 CSV 文件填充 DataGridView，并使用结果更新 Access 数据库

> ID：13571799
> 
> 赞同：1
> 
> 时间：2012-11-26T19:33:42.030
> 
> 标签：c#, database, ms-access, datagridview

我有一个与 Access 数据库 (accdb) 交互的 C# Windows 窗体项目。我有一个表格可以很好地读取数据库，并将其显示到 DataGridView 中。我有另一个表单，可以将文本框信息提交到数据库中。

我有另一个表单（见下图），它允许用户单击按钮（按钮 1）以使用“openFileDialog”打开 CSV 文件，并在表单上的 dataGridView 中显示所选文件的内容*（示例如下所示）*。

**我的目标：我想要一个按钮（按钮 3），在同一个表单上，将 dataGridView 的显示结果提交到前面提到的 Access 数据库中。**

似乎我拥有我需要的所有组件。感觉好像我离得太远了，但我的代码中似乎仍然存在错误和/或缺失。几周以来，我一直在努力实现这一目标。请帮忙！！！

这是表单的屏幕截图和表单的完整代码。非常感谢所有帮助！

![在此处输入图像描述](../Images/db133d14190ff13bd10d8457d9107ef0.png)

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;
using System.Globalization;
using System.Configuration;
using System.Data.OleDb;

namespace csvToGrid
{
    public partial class Import : Form
        {
            public Import()
                {
                    InitializeComponent();
                }
        public void button1_Click(object sender, EventArgs e)
            {
                string delimiter = ",";
                string tablename = "medTable";
                DataSet dataset = new DataSet();
                OpenFileDialog openFileDialog1 = new OpenFileDialog();
                openFileDialog1.Filter = "CSV Files (*.csv)|*.csv|All Files (*.*)|*.*";
                openFileDialog1.FilterIndex = 1;
                if (openFileDialog1.ShowDialog() == DialogResult.OK)
                    {
                        if (MessageBox.Show("Are you sure you want to import the data from \n " + openFileDialog1.FileName + "?", "Are you sure?", MessageBoxButtons.YesNo) == DialogResult.Yes)
                            {
                                filename = openFileDialog1.FileName;
                                StreamReader sr = new StreamReader(filename);
                                string csv = File.ReadAllText(openFileDialog1.FileName);
                                dataset.Tables.Add(tablename);
                                dataset.Tables[tablename].Columns.Add("Prescription");
                                dataset.Tables[tablename].Columns.Add("Customer Name");
                                dataset.Tables[tablename].Columns.Add("Medication");
                                dataset.Tables[tablename].Columns.Add("Quantity");
                                dataset.Tables[tablename].Columns.Add("Date Filled");

                                string allData = sr.ReadToEnd();
                                string[] rows = allData.Split("\r".ToCharArray());

                                foreach (string r in rows)
                                    {
                                        string[] items = r.Split(delimiter.ToCharArray());
                                        dataset.Tables[tablename].Rows.Add(items);
                                    }
                                this.dataGridView1.DataSource = dataset.Tables[0].DefaultView;
                                MessageBox.Show(filename + " was successfully imported. \n Please review all data before sending it to the database.", "Success!", MessageBoxButtons.OK);
                            }
                        else
                            {
                                this.Close();
                            }
                }
            }

        public string filename { get; set; }

        private void openFileDialog1_FileOk(object sender, CancelEventArgs e)
            {

            }

        private void Import_Load(object sender, EventArgs e)
            {

            }

        private void button4_Click(object sender, EventArgs e)
        {
            Application.Exit();

        }

        private void button2_Click(object sender, EventArgs e)
        {
            this.Close();
        }

        private void button3_Click(object sender, EventArgs e)

            //remove the semicolon, and add brackets below after line
            {   
                //create the connection string
                string connString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Search\\Database.accdb";
                //create the database query
                string query = "SELECT * FROM script_Orders";
                //create an OleDbDataAdapter to execute the query
                OleDbDataAdapter dAdapter = new OleDbDataAdapter(query, connString);
                //create a command builder
                OleDbCommandBuilder cBuilder = new OleDbCommandBuilder(dAdapter);
                //create a DataTable to hold the query results
                DataTable dTable = new DataTable();
                //fill the DataTable
                dAdapter.Fill(dTable);
                //the DataGridView
                DataGridView dataGridView1 = new DataGridView();
                //BindingSource to sync DataTable and DataGridView
                BindingSource bSource = new BindingSource();
                //set the BindingSource DataSource
                bSource.DataSource = dTable;
                //set the DataGridView DataSource
                dataGridView1.DataSource = bSource;
                // An update function to get the changes back into the database.
                dAdapter.Update(dTable);
            }

        }
    } 
```

![在此处输入图像描述](../Images/0f25c99b9977084ac4f89afb618e680b.png)

**例子非常受欢迎！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:56:36.553

挑战来自使用数据集对象来处理数据，而 CSV 文件位于 Access 数据库外部。要解决此问题，您可以以编程方式将更新从 DataGridView 持久保存到 Access 数据库。

插入示例

```
DataRow anyRow = DatasetName.ExistingTable.NewRow();
anyRow.FirstName = "Jay";
anyRow.LastName = "Stevens";
ExistingTable.Rows.Add(anyRow); 
```

更新示例

```
dsCustomers1.Customers[4].CompanyName = "Wingtip Toys";
dsCustomers1.Customers[4].City = "Buffalo"; 
```

删除示例

```
dsCustomers1.Customers.Rows[0].Delete(); 
```

希望这可以帮助。干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:42:02.137

假设您要做的就是获取 CSV 的内容并将它们插入到您的表中，您可以遍历数据集并调用插入命令（当然使用参数化查询）

```
var AccessCnn = string.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Persist Security Info=False;", @"C:\YOURDBNAME.accdb");

using (OleDbConnection accessCnn = new OleDbConnection(AccessCnn))
{

    //Create The Command
    var accessCmd = new OleDbCommand(@"INSERT INTO script_Orders  
                                       (Prescription, [Customer Name], Medication, Quantity, [Date Filled])
                                    VALUES (?,?,?,?,?)", accessCnn);

   foreach(var row in dataset.Tables["medTable"].Rows)
   {
      accessCmd.Parameters.Clear();

      accessCmd.Parameters.AddWithValue("?", row["Prescription"]);
      accessCmd.Parameters.AddWithValue("?", row["Customer Name"]);
      accessCmd.Parameters.AddWithValue("?", row["Medication"]);
      accessCmd.Parameters.AddWithValue("?", row["Quantity"]);
      accessCmd.Parameters.AddWithValue("?", row["Date Filled"]);

      ccessCmd.ExecuteNonQuery();
   }

} 
```

您需要将 DataSet 移动为类级别变量

```
public partial class Import : Form
{
     DataSet dataset; 
```

然后稍后在 button1_Click 中分配它而不是声明和分配它

```
string tablename = "medTable";
dataset = new DataSet(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T20:39:39.233

您需要查看为您的数据适配器创建一个 UPDATE 命令。

下面的本指南将帮助您更好地了解数据适配器：-

[http://msdn.microsoft.com/en-us/library/33y2221y.aspx](http://msdn.microsoft.com/en-us/library/33y2221y.aspx)

祝你好运！！

# zend-framework - Doctrine 2.x 和 zend 框架集成 1.11 - 实体生成错误没有 @ORM 等

> ID：13571804
> 
> 赞同：1
> 
> 时间：2012-11-26T19:33:54.003
> 
> 标签：zend-framework, frameworks, doctrine, entity

我已经将 zend 与学说集成在一起，一切正常，但是当我开始使用学说 cli 生成实体时：

例子：

```
<?php

use Doctrine\ORM\Mapping as ORM;

/**
 * Tag
 */
class Tag
{
    /**
     * @var string $tagName
     */
    private $tagName;

    /**
     * @var \Doctrine\Common\Collections\ArrayCollection
     */
    private $eventevent;

    /**
     * Constructor
     */
    public function __construct()
    {
        $this->eventevent = new \Doctrine\Common\Collections\ArrayCollection();
    }

    /**
     * Get tagName
     *
     * @return string 
     */
    public function getTagName()
    {
        return $this->tagName;
    }

    /**
     * Add eventevent
     *
     * @param Event $eventevent
     * @return Tag
     */
    public function addEventevent(\Event $eventevent)
    {
        $this->eventevent[] = $eventevent;

        return $this;
    }

    /**
     * Remove eventevent
     *
     * @param Event $eventevent
     */
    public function removeEventevent(\Event $eventevent)
    {
        $this->eventevent->removeElement($eventevent);
    }

    /**
     * Get eventevent
     *
     * @return Doctrine\Common\Collections\Collection 
     */
    public function getEventevent()
    {
        return $this->eventevent;
    }
} 
```

# android - 在android中通过Loaders插入记录

> ID：13571805
> 
> 赞同：2
> 
> 时间：2012-11-26T19:33:54.783
> 
> 标签：android, sqlite, insert, android-loader

[这个问题将是Content Resolver vs Cursor Loader](https://stackoverflow.com/questions/11131058/how-to-properly-insert-values-into-the-sqlite-database-using-contentproviders-i)的后续问题， 其中答案清楚地说明了如何使用 Content Resolver 将记录插入到 sqlite Db 中。我的问题如下：

1.  我可以使用加载器（普通加载器）来实现这个功能吗？

例如：

```
 public Loader<Cursor> onCreateLoader(int id, Bundle bundle) {
            switch (id) {

    case AppConstants.LOADER_ADD_FAV_PHONE_NUM:

        ContentValues values = new ContentValues();
        values.put(DBHelper.TM_DB_COLUMN_PHONE_NUMBER,
                directionOrder);
        values.put(TransitMeDBHelper.TM_DB_COLUMN_NAME_ID, selectionArgs[0]);
        Uri insertFavStop =getContentResolver().insert(TransitMeContentProvider.CONTENT_URI_INSERT_FAV_PHONE,
                        values);
        break;
    }

return null;
} 
```

这会在 Main UI 线程还是工作线程中运行功能。我知道我不会收到回调，因为内容解析器将返回一个 URI 而不是包含数据的游标。

我尝试运行此代码，但它的行为有点奇怪.. 重复插入被记录并且它不一致，有人可以向我展示一些使用加载器进行插入操作的正确资源（我已经看到了许多带有查询示例的示例并且它有效像一个魅力:)）

感谢您的时间 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T20:13:20.720

> 我可以使用加载器（普通加载器）来实现这个功能吗？

您不能使用默认值`CursorLoader`来插入数据。如果您实现自己的方法，`Loader`您可能可以*使用*该`loadInBackground`方法进行插入，但这最多会使您的代码变得笨拙（而且我不知道它是否真的有效）。

> 这会在 Main UI 线程还是工作线程中运行功能。我知道我不会收到回调，因为内容解析器将返回一个 URI 而不是包含数据的游标。

加载器回调将在实现它们的线程上运行（最有可能是 UI 主线程），因此您在`getContentResolver().insert()`主 UI 线程上执行此操作可能会阻塞主 UI 线程。

> 我尝试运行此代码，但它的行为有点奇怪.. 重复插入被记录并且它不一致，

`onCreateLoader`您是否测试过该方法被调用了多少次？

> 有人可以向我展示一些使用加载器进行插入操作的正确资源（我已经看到了许多带有查询示例的示例，它的工作原理就像一个魅力:)）

不要使用/尝试使用 a`Loader`在`ContentProvider`/Database 中插入数据。它就像查询的魅力一样，因为加载器旨在从数据源加载数据（而不是插入数据），这就是它们的目的。如果要插入数据，请使用常规线程`AsyncTask`（也可以查看）。[`AsyncQueryhandler`](http://developer.android.com/reference/android/content/AsyncQueryHandler.html)

# php - 具有正确计数的双重查询

> ID：13571807
> 
> 赞同：1
> 
> 时间：2012-11-26T19:34:01.950
> 
> 标签：php, mysql

恐怕我已经写了一个查询并且在这个过程中让自己感到困惑，尽管它很简单。

我有 2 个 mysql 表。

```
Table1 has ... orderID, productID, quantity
Table2 has ... orderID, status, time 
```

我需要做一个查询，它将执行以下操作......

```
Output (1 per line) 
productID - Quantity  where status = 1 & time < $lastactive. 
```

我尝试对表 2 进行查询以获取 productID 并计算 Quantity，但是如果 2 个不同的 orderID 具有相同的 productID，则它们不会总计。非常感谢任何帮助（表/行的名称是准确的）。

例子：

```
orderID 123, productID 2, quantity 4
orderID 123, productID 5, quantity 6
orderID 678, productID 2, quantity 5 
```

会输出：

```
2   9
5   6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:38:31.693

您应该能够使用类似的东西：

```
select t1.productId, Sum(t1.quantity) Total
from table1 t1
inner join table2 t2
  on t1.orderid = t2.orderid
where t2.status = 1
  and t2.time < $lastactive
group by t1.productid 
```

# c++ - 将枚举作为浮点数传递

> ID：13571808
> 
> 赞同：2
> 
> 时间：2012-11-26T19:34:14.967
> 
> 标签：c++, enums

我有一个关于枚举和浮点数的问题。我正在尝试将枚举作为浮点数传递，这可能吗？

这是代码的概要：

```
enum
{
    none = 0,
    small,
    medium,
    large, 
} enumSize;

class size
{
    float footsize = 0.0; 
}

void setSize(size &Size, float value)
{
    Size.footsize = value; 
}

int main()
{ 
    size Size; 
    setSize(Size, enumSize); 
} 
```

但是我不能调用 setSize(Size, enumSize) 因为据我所知枚举只能是整数并且不能被转换为浮点数？如果是这种情况，有没有办法让它在我当前的设置下浮动？

如果我的布局有点混乱，请告诉我，我会尽力解决任何混乱。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T19:36:44.420

当然，整数可以转换为浮点数，但枚举不是一个合适的工具。只需使用`const float`s。

顺便说一句，您的代码也由于其他几个原因无法编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:11:52.847

没有涉及铸造，只是转换。普通枚举是整数值，当您将其中一个传递给采用浮点数的函数时，该值将转换为浮点数。

```
enum enumSize {
    none,
    small,
    medium,
    large
};

void f(float);

void g() {
    f(small);
} 
```

# c++ - 我可以只使用固定数组而不是内存池吗？

> ID：13571811
> 
> 赞同：1
> 
> 时间：2012-11-26T19:34:23.237
> 
> 标签：c++, memory, memory-management, memory-pool

我不能在应用程序开始时为每个对象分配巨大的数组并使用它们，而不是创建内存池系统，在极端情况下，某些对象确实需要比数组更多的实例，数组只会加倍或四倍大小，所以它永远不会再达到最大大小。我需要速度而不是内存，所以我认为这是一个公平的权衡？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T19:42:45.600

您所描述的内容与内存池之间的唯一区别是，通常，池分配器会在内存不足时分配一个新池，如果内存用完，您会重新分配整个数组。这将导致最坏情况运行时间大大增加，并且您需要一个方案来避免在重新分配时使指针和引用无效，这可能会降低整个程序的性能。

池分配器中最坏的情况是当它用完空间并且必须分配一个新数组时。分配器中最坏的情况是，它用完并且必须分配一个新的更大的数组并将所有旧对象复制到新数组中。显然后者将花费更多时间。

# android - 安卓应用程序上的互联网流媒体广播

> ID：13571818
> 
> 赞同：1
> 
> 时间：2012-11-26T19:35:07.450
> 
> 标签：android, streaming, mp3, radio

我有一个互联网收音机，老实说，我经历了几乎所有事情，以了解如何实际制作流式 Android 应用程序以及我应该使用什么.. 没用.. 没有一个有用的信息..

谁能帮我 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:01:31.870

这通常通过 Shoutcast/Icecast HTTP 流式传输到服务中包含的 MediaPlayer 组件来完成。

NPR 已经开源了他们的应用程序，这是一个很好的广播参考应用程序。 [http://code.google.com/p/npr-android-app/](http://code.google.com/p/npr-android-app/)

注意：Shoutcast 流媒体目前在 Google TV 中被破坏，因此除非您选择其他协议，否则您的应用将无法在这些设备上运行。

如果您希望仅支持 android 3+（包括 Google TV），您也可以尝试通过 HLS HTTP 进行流式传输。不过，该协议不太常用于无线电。

# grammar - 需要帮助使用 yacc 构建语法 (a^nb)，更具体地说，使用 n>=10 等条件

> ID：13571821
> 
> 赞同：1
> 
> 时间：2012-11-26T19:35:24.017
> 
> 标签：grammar, yacc, lex

好吧，这就是我所做的：

## 法

```
[a] returns A
[b] returns B 
```

## yacc

```
%toke A B
%%
s: B | a B;
a: A | a A; 
```

现在我如何只接受那些字符串 where `n>=10`？

我想到了：

```
s : B | A A A A A A A A A a B 
```

还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T21:38:36.323

您可以为此使用 YYFAIL 或 YYERROR：

```
%{
#include <stdio.h>
int aCount=0;
%}
%token A
%token B
%%
s : aList B {
  if (aCount<10) {
    YYFAIL;
  }
}
anA: A {aCount++};
aList: anA | aList anA;
%% 
```

# asp.net - Excel 导出后 ASP GridView 刷新不起作用

> ID：13571822
> 
> 赞同：2
> 
> 时间：2012-11-26T19:35:31.703
> 
> 标签：asp.net, vb.net, data-binding, gridview, export-to-excel

我在 Ajax UpdatePanel 中有一个 Gridview。在每个 GV 行内，我都有一个复选框字段。这个想法是用户检查他们想要的行，然后单击一个按钮以将该行中的标签更新为“已发货”，然后还将检查的行导出到 xls 文件（实际上是 csv）。

当我的代码隐藏触发时，它会遍历 gridview 行，查找检查，更新数据库以标记每一行，然后我使用 .DataBind() 刷新网格。这可以完美地工作并且符合预期。

现在我还想将选中的行导出到 Excel。因此，我创建了一个方法来执行此操作，并在更新每一行以标记行并在 .DataBind() 刷新之前将其弹出。现在 .DataBind() 永远不会触发刷新。我确实收到了 XLS 下载，如果我手动刷新屏幕，这些行会按预期更新。

这是我的代码：

```
ASPX (Just a portion of the gridview):
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
        <asp:GridView ID="GridView1" runat="server" AllowSorting="True" AutoGenerateColumns="False"
                DataKeyNames="MinqNum" DataSourceID="SqlDataSource1" Font-Size="Small" BorderColor="Black"
                BorderStyle="Solid" BorderWidth="1px" CellPadding="0">
                <RowStyle Font-Size="Small" HorizontalAlign="Left" VerticalAlign="Bottom" BorderColor="#999999"
                    BorderStyle="Solid" BorderWidth="1px" Wrap="true" />
                <Columns>
                    <asp:TemplateField>
                    <ItemStyle CssClass="ItemStyle"/>
                    <HeaderStyle Wrap="true" Font-Size="X-Small" HorizontalAlign="Center"
                            VerticalAlign="Bottom" BorderWidth="0px" />
                        <ItemTemplate>
                            <asp:ImageButton ID="btn_editss" runat="server" CommandName="Edit" ImageUrl="~/images/edit.gif" />
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:ImageButton ID="btn_savess" runat="server" CommandName="Update" ImageUrl="~/images/save.gif" />
                            <asp:ImageButton ID="btn_cancelss" runat="server" CommandName="Cancel" ImageUrl="~/images/cancel.gif" />
                        </EditItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Date" SortExpression="MinqDate">
                        <ItemStyle CssClass="ItemStyle" HorizontalAlign="Center" Font-Size="Smaller"/>
                        <HeaderStyle Wrap="true" Font-Size="X-Small" HorizontalAlign="Center" VerticalAlign="Bottom" BorderWidth="0px"/>
                        <ItemTemplate>
                            <asp:Label ID="lbl_minqdate" runat="server" Text='<%#Bind("MinqDate", "{0:MM/dd/yy}") %>'></asp:Label>
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:Label ID="lbl_minqdate" runat="server" Text='<%#Bind("MinqDate", "{0:MM/dd/yy}") %>'></asp:Label>
                        </EditItemTemplate>
                    </asp:TemplateField>
</asp:GridView>
</ContentTemplate>
</asp:UpdatePanel>

Button Click Event (codebehind):
Protected Sub btn_markshipped_clicked(ByVal sender As Object, ByVal e As EventArgs)
    For Each row As GridViewRow In GridView1.Rows
        If row.RowType = DataControlRowType.DataRow Then
            Dim isChecked As Boolean = DirectCast(row.FindControl("cb_supship"), CheckBox).Checked
            If isChecked Then
                'btn_markshipped.Text = "changed"
                Dim cmd As New SqlCommand("UPDATE InquiryV4.dbo.Main SET Sup_Shipped = 'S' WHERE MinqNum = @MinqNum")
                cmd.Parameters.AddWithValue("@MinqNum", row.Cells(5).Controls.OfType(Of Label)().FirstOrDefault().Text)
                'cmd.Parameters.AddWithValue("@Country", row.Cells(2).Controls.OfType(Of DropDownList)().FirstOrDefault().SelectedItem.Value)
                'cmd.Parameters.AddWithValue("@CustomerId", gvCustomers.DataKeys(row.RowIndex).Value)
                Me.ExecuteQuery(cmd, "UPDATE")
            End If
        End If
    Next
    'btnUpdate.Visible = False
    'Me.BindGrid()
    btn_exportexcel()
    GridView1.DataBind()
End Sub

btn_exportexcel sub (codebehind):
    Private Sub btn_exportexcel()
    Dim dt = New DataTable()
    dt.Columns.Add("MTX PN")
    dt.Columns.Add("Inq#")
    dt.Columns.Add("Customer")
    dt.Columns.Add("Qty")
    dt.Columns.Add("Eng")
    dt.Columns.Add("A/M")
    For Each gvrow As GridViewRow In GridView1.Rows
        Dim chk As Boolean = DirectCast(gvrow.FindControl("cb_supship"), CheckBox).Checked
        If chk = True Then
            Dim i = gvrow.RowIndex
            Dim lbl_mtxpn As Label = gvrow.FindControl("lbl_mtxpn")
            Dim lbl_inqnum As Label = gvrow.FindControl("lbl_inqnum")
            Dim lbl_customer As Label = gvrow.FindControl("lbl_customer")
            Dim lbl_SamplesRequested As Label = gvrow.FindControl("lbl_SamplesRequested")
            Dim lbl_AssignedTo As Label = gvrow.FindControl("lbl_AssignedTo")
            Dim lbl_LTN_Eng As Label = gvrow.FindControl("lbl_LTN_Eng")
            Dim lbl_AcctMGR As Label = gvrow.FindControl("lbl_AcctMGR")

            Dim dr = dt.NewRow()
            dr.Item("MTX PN") = Convert.ToString(lbl_mtxpn.Text)
            dr.Item("Inq#") = Convert.ToString(lbl_inqnum.Text)
            dr.Item("Customer") = Convert.ToString(lbl_customer.Text)
            dr.Item("Qty") = Convert.ToString(lbl_SamplesRequested.Text)
            dr.Item("Eng") = Convert.ToString(lbl_LTN_Eng.Text) + "(" + Convert.ToString(lbl_AssignedTo.Text) + ")"
            dr.Item("A/M") = Convert.ToString(lbl_AcctMGR.Text)

            dt.Rows.Add(dr)
        End If
    Next
    Dim GridView2 = New GridView()
    GridView2.DataSource = dt
    GridView2.DataBind()
    Response.Clear()
    Response.Buffer = True
    Response.ContentType = "application/ms-excel"
    Response.AddHeader("content-disposition", String.Format("attachment;filename={0}.xls", "selectedrows"))
    Response.Charset = ""
    Dim sw As New StringWriter()
    Dim hw As New HtmlTextWriter(sw)
    GridView2.RenderControl(hw)
    Response.Output.Write(sw.ToString())
    Response.End()
End Sub 
```

正如我所说，如果没有导出功能，gridview.databind() 将按预期工作并更新 gridview。只要将导出功能放在中间，它就会阻止 .databind() 发生。

有任何想法吗？只是为了咯咯笑，我还尝试了 response.redirect ，但也有同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T22:40:02.570

发生这种情况是因为您是：

1.  清除响应；
2.  发送 Excel 文件；
3.  结束响应。

也就是说，服务器对你的请求的回复就是发送excel文件。它不会向浏览器发送新的一批 HTML，因为您告诉它在文件发送后停止。正如您所观察到的，您的页面没有改变，因为您没有向浏览器发送任何新的 HTML。

我不相信既可以发送文件又可以向浏览器发送新的 HTML，但我愿意被证明是错误的。我见过的大多数情况下，尝试这两种方法的人首先涉及重新绑定和页面刷新，然后对服务器进行类似 Ajax 的 GET 调用以获取 Excel 文件。其他选项包括打开一个新的非常小的窗口，它只执行 GET 并返回 Excel 文件，然后在发送后关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T22:33:34.987

您是否尝试在同一个 GridView 中显示 2 个 GridView 或相同数据的两个视图？

# php - mysql查询中的PHP语法错误

> ID：13571827
> 
> 赞同：0
> 
> 时间：2012-11-26T19:35:50.387
> 
> 标签：php, mysql

我正在尝试执行我的 mysql 查询的 php，而对于我的生活，我无法弄清楚。我尝试将变量 $money_earned 用单引号括起来，但无济于事。它是一个浮子。$userdata 变量是一个字符串。运行代码时出现此错误：

```
Parse error: syntax error, unexpected T_STRING 
```

这是我的mysql查询：

```
$query = "UPDATE `authentication` SET `money` = money + $money_earned WHERE `username` = '$userdata'";
mysql_query($query); 
```

在这里，我将发布完整的代码，希望这将使这个问题更容易解决：

```
<?php

mysql_connect("blahblahblah");
mysql_select_db(blah) or die("Unable to select database");

$userdata = $_SESSION['userz'];
$secret_key = "TOPSECRET";
$user = $_GET['snuid'];
$money_earned = $_GET['currency'];
$id = $_GET['id'];
$secret = $_GET['verifier'];

$secret_check = md5($id.":".$user.":".$money_earned.":".$secret_key);

if($secret == $secret_check) {

   $query = "UPDATE `authentication` SET `money` = money + $money_earned WHERE `username` = '$userdata'";
   mysql_query($query);

} else {

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T19:57:49.190

我注意到的几件事，虽然与您收到的解析错误无关（正如其他人所指出的，您的代码似乎是正确的语法）。

1.  在调用变量`session_start();`之前不要这样做。`$_SESSION['userz'];`
2.  您应该`$userdata`使用以下内容逃避您的：`$userdata = mysql_real_escape_string($_SESSION['userz']);`
3.  考虑为 mysql 切换到 PDO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:45:23.060

尝试连接字符串，如：

`$query = "UPDATE authentication SET money = money + ". $money_earned." WHERE username = ".$userdata; mysql_query($query);`

# asp.net-mvc-3 - Jquery Ajax Post 调用错误的操作方法

> ID：13571828
> 
> 赞同：1
> 
> 时间：2012-11-26T19:35:54.357
> 
> 标签：asp.net-mvc-3, jquery

我会先带来代码。

控制器：

```
 public ActionResult VideoList(int page)
    {
    }
    [HttpPost]
    public ActionResult SaveWindowWidth(string width)
    {
        return Json(new { success = true });
    } 
```

JS：

```
$(document).ready(function ()
{
var width = $("#Window").width();

$.ajax(
    {
        type: "POST",
        url: '/Video/SaveWindowWidth',
        async: "true",
        data: { "width": width },
        dataType: 'text json',
        contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
        success: function (data, status)
        {
            if (data)
            {
                alert(data.status);
            }
        },
        error: function (data, status)
        {
            if (data)
            {
                alert(data.status);
            }
        }
    })
}) 
```

路线：

```
 routes.MapRoute(
            "Home", // Route name
            "Home", // URL with parameters
            new { controller = "Home", action = "Index" }
        );

        routes.MapRoute(
            "BookPage", // Route name
            "BookPage/{page}", // URL with parameters
            new { controller = "Book", action = "Page" }
        );

        routes.MapRoute(
            "BlogMember", // Route name
            "BlogMember/{id}/{page}", // URL with parameters
            new { controller = "Blog", action = "Member" }
        );

        routes.MapRoute(
            "BlogPost", // Route name
            "BlogPost/{id}/{page}", // URL with parameters
            new { controller = "Blog", action = "Post" }
        );

        routes.MapRoute(
            "BlogPage", // Route name
            "BlogPage/{page}", // URL with parameters
            new { controller = "Blog", action = "Page" }
        );

        routes.MapRoute(
            "BlogTag", // Route name
            "BlogTag/{tag}/{page}", // URL with parameters
            new { controller = "Blog", action = "Tag" }
        );

        routes.MapRoute(
            "NewBlogPostComment", // Route name
            "NewBlogPostComment", // URL with parameters
            new { controller = "Blog", action = "NewBlogPostComment" }
        );

        routes.MapRoute(
            "NewBlogPost", // Route name
            "NewBlogPost", // URL with parameters
            new { controller = "Blog", action = "NewBlogPost" }
        );

        routes.MapRoute(
            "EditBlogPost", // Route name
            "EditBlogPost/{id}", // URL with parameters
            new { controller = "Blog", action = "EditBlogPost" }
        );

        routes.MapRoute(
            "Account", // Route name
            "Account", // URL with parameters
            new { controller = "Account", action = "Update" }
        );

        routes.MapRoute(
            "LogOff", // Route name
            "LogOff", // URL with parameters
            new { controller = "Account", action = "LogOff" }
        );

        routes.MapRoute(
            "LogOn", // Route name
            "LogOn", // URL with parameters
            new { controller = "Account", action = "LogOn" }
        );

        routes.MapRoute(
            "Register", // Route name
            "Register", // URL with parameters
            new { controller = "Account", action = "Register" }
        );

        //routes.MapRoute(
        //    "About", // Route name
        //    "About", // URL with parameters
        //    new { controller = "Home", action = "About" }
        //);

        routes.MapRoute(
            "Contact", // Route name
            "Contact", // URL with parameters
            new { controller = "Home", action = "Contact" }
        );

        routes.MapRoute(
            "UnderConstruction", // Route name
            "UnderConstruction", // URL with parameters
            new { controller = "Home", action = "UnderConstruction" }
        );

        routes.MapRoute(
            "DisableBlogComment", // Route name
            "DisableBlogComment/{id}", // URL with parameters
            new { controller = "Blog", action = "DisableBlogComment" }
        );

        routes.MapRoute(
            "DisableAllMemberBlogComments", // Route name
            "DisableAllMemberBlogComments/{id}", // URL with parameters
            new { controller = "Blog", action = "DisableAllMemberBlogComments" }
        );

        routes.MapRoute(
            "DisableVideoComment", // Route name
            "DisableVideoComment/{id}", // URL with parameters
            new { controller = "Video", action = "DisableVideoComment" }
        );

        routes.MapRoute(
            "DisableAllMemberVideoComments", // Route name
            "DisableAllMemberVideoComments/{id}", // URL with parameters
            new { controller = "Video", action = "DisableAllMemberVideoComments" }
        );

        routes.MapRoute(
            "DisableMember", // Route name
            "DisableMember/{id}", // URL with parameters
            new { controller = "Member", action = "DisableMember" }
        );

        routes.MapRoute(
            "NewPost", // Route name
            "NewPost", // URL with parameters
            new { controller = "Blog", action = "NewPost" }
        );

        routes.MapRoute(
            "InactiveBlogPosts", // Route name
            "InactiveBlogPosts/{page}", // URL with parameters
            new { controller = "Blog", action = "InactiveBlogPosts" }
        );

        routes.MapRoute(
            "InactiveBlogComments", // Route name
            "InactiveBlogComments/{page}", // URL with parameters
            new { controller = "Blog", action = "InactiveBlogComments" }
        );

        routes.MapRoute(
            "InactiveVideoComments", // Route name
            "InactiveVideoComments/{page}", // URL with parameters
            new { controller = "Video", action = "InactiveVideoComments" }
        );

        routes.MapRoute(
            "EditHomePage", // Route name
            "EditHomePage", // URL with parameters
            new { controller = "Home", action = "EditHomePage" }
        );

        routes.MapRoute(
            "EditAboutPage", // Route name
            "EditAboutPage", // URL with parameters
            new { controller = "Home", action = "EditAboutPage" }
        );

        routes.MapRoute(
            "Newsletter", // Route name
            "Newsletter", // URL with parameters
            new { controller = "Newsletter", action = "Newsletter" }
        );

        routes.MapRoute(
            "RegisterNewVideo", // Route name
            "RegisterNewVideo", // URL with parameters
            new { controller = "Video", action = "RegisterNewVideo" }
        );

        routes.MapRoute(
            "Members", // Route name
            "Members/{page}", // URL with parameters
            new { controller = "Member", action = "MemberList" }
        );

        routes.MapRoute(
            "EditMember", // Route name
            "EditMember/{id}", // URL with parameters
            new { controller = "Member", action = "EditMember" }
        );

        routes.MapRoute(
            "AppSettings", // Route name
            "AppSettings", // URL with parameters
            new { controller = "Utility", action = "AppSettings" }
        );

        routes.MapRoute(
            "AudioBookPage", // Route name
            "AudioBookPage/{page}", // URL with parameters
            new { controller = "Book", action = "AudioBookPage" }
        );

        routes.MapRoute(
            "IPBlocked", // Route name
            "IPBlocked", // URL with parameters
            new { controller = "Utility", action = "IPBlocked" }
        );

        routes.MapRoute(
            "LiveTV", // Route name
            "LiveTV", // URL with parameters
            new { controller = "LiveTV", action = "LiveTV" }
        );

        routes.MapRoute(
            "VideoPlayer", // Route name
            "VideoPlayer/{id}/{page}", // URL with parameters
            new { controller = "Video", action = "VideoPlayer" }
        );

        routes.MapRoute(
            "Video", // Route name
            "Video/{page}", // URL with parameters
            new { controller = "Video", action = "VideoList" }
        );

        routes.MapRoute(
            "NewVideoComment", // Route name
            "NewVideoComment", // URL with parameters
            new { controller = "Video", action = "NewVideoComment" }
        );

        routes.MapRoute(
            "Music", // Route name
            "Music", // URL with parameters
            new { controller = "Music", action = "Index" }
        );

        routes.MapRoute(
            "RootsCompilationOne", // Route name
            "Music/RootsCompilationOne", // URL with parameters
            new { controller = "Music", action = "RootsCompilationOne" }
        );

        routes.MapRoute(
            "UnityIsStrength", // Route name
            "Music/UnityIsStrength", // URL with parameters
            new { controller = "Music", action = "UnityIsStrength" }
        );

        routes.MapRoute(
            "FileUpload", // Route name
            "FileUpload", // URL with parameters
            new { controller = "Utility", action = "FileUpload" }
        );

        routes.MapRoute(
            "PageUnavailable", // Route name
            "PageUnavailable", // URL with parameters
            new { controller = "Utility", action = "PageUnavailable" }
        );

        routes.MapRoute(
            "VideoGrid", // Route name
            "VideoGrid/{page}", // URL with parameters
            new { controller = "Video", action = "VideoGrid" }
        );

        routes.MapRoute(
            "EditVideo", // Route name
            "EditVideo/{id}", // URL with parameters
            new { controller = "Video", action = "EditVideo" }
        );

        routes.MapRoute(
            "CopyVideo", // Route name
            "CopyVideo/{id}/{page}", // URL with parameters
            new { controller = "Video", action = "CopyVideo" }
        );

        routes.MapRoute(
            "DeleteIPLogs", // Route name
            "DeleteIPLogs/{ip}", // URL with parameters
            new { controller = "Utility", action = "DeleteIPLogs" }
        );

        routes.MapRoute(
            "SaveWindowWidth", // Route name
            "SaveWindowWidth/{width}", // URL with parameters
            new { controller = "Video", action = "SaveWindowWidth" }
        );

        routes.MapRoute(
            "FacebookLikes", // Route name
            "FacebookLikes", // URL with parameters
            new { controller = "Utility", action = "FacebookLikes" }
        );

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        ); 
```

ajax 尝试调用 VideoList 方法的问题。我在阅读回复时看到它：

参数字典包含方法“System.Web.Mvc.ActionResult VideoList(Int32)”的不可空类型“System.Int32”的参数“页面”的空条目

我在某处听说路线可能有问题，所以我也将它们发布在这里。我会很感激你的帮助

问候马吕斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T20:00:27.220

您的视频路由配置不正确。MVC 尝试从每个 url 获取控制器和操作，以从适当的控制器中找出所需的方法。在您的情况下，它总是获得相同的值 VideoController.VideoList()：

```
routes.MapRoute(
            "Video", // Route name
            "Video/{page}", // URL with parameters
            new { controller = "Video", action = "VideoList" }
        ); 
```

如果您将路线更改为此，一切都会好起来的：

```
routes.MapRoute(
            "Video", // Route name
            "Video/{action}", // URL with parameters
            new { controller = "Video", action = "VideoList" }
        ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:05:32.023

使用字符串作为 URL 存储值不是最佳实践。

我做这样的事情。

看法

```
@Html.Hidden("getVideoUrl", Url.Action("SaveWindowWidth", "Video")) 
```

JS

```
 var url = $("#getVideoUrl").val();
    $.post(url, data: { "width": width },      
        success: function (data, status)
        {
            if (data)
            {
                alert(data.status);
            }
        },
        error: function (data, status)
        {
            if (data)
            {
                alert(data.status);
            }
        }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T20:14:41.073

Dima 已经确定了这个问题，尽管他的解决方案不太适合您。您的路由配置为在请求 url 时`Video/SaveWindowWidth`，调用`VideoList`控制器上的操作`Video`，并将参数`page`设置为`SaveWindowWidth`。显然这不是你想要的。

ASP.Net MVC 将执行匹配的第一个路由。这就是为什么首先包含所有特定路线很重要的原因。

解决此问题的方法之一是重写您的路由，以便在您的通用漂亮路由之上配置某些 API 路由。为此，您需要在任何漂亮的 url 之前提及每个组合。

例如，

```
routes.MapRoute(
        "SaveWindowWidthForVideo", // Route name
        "Video/SaveWindowWidth",
        new { controller = "Video", action = "SaveWindowWidth" }
    );

routes.MapRoute(
        "SaveWindowHeightForVideo", // Route name
        "Video/SaveWindowHeight",
        new { controller = "Video", action = "SaveWindowHeight" }
    );

routes.MapRoute(
        "SaveWindowSomethingElseForVideo", // Route name
        "Video/SaveWindowHeight",
        new { controller = "Video", action = "SaveWindowSomethingElseForVideo" }
    );

// etc etc      

// your remaining pretty urls
routes.MapRoute(
        "Video", // Route name
        "Video/{page}", // URL with parameters
        new { controller = "Video", action = "VideoList" }
    ); 
```

我不喜欢这样做，因为它很容易变得相当麻烦。

我更喜欢的解决方案是通过在 url 中添加单词来区分我漂亮的 url 路由和我的 ajax API 路由`api`。

```
routes.MapRoute(
        "ApiCallsForVideo", // Route name
        "api/video/{action}",
        new { controller = "Video" }
    );

// or

routes.MapRoute(
        "ApiCalls", // Route name
        "api/{controller}/{action}"
    );

// etc etc      

routes.MapRoute(
        "Video", // Route name
        "Video/{page}", // URL with parameters
        new { controller = "Video", action = "VideoList" }
    ); 
```

这显然涉及修改您的 ajax 调用以包含单词`api`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T07:21:37.273

嗨，我认为您需要在路由中添加参数，然后只有您的 ajax 会使用参数调用该方法。现在发生的事情是你的 ajax 正在调用那个特定的方法，但你没有在路由中提到允许参数

```
routes.MapRoute(
            "Video", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Video", action = "VideoList", width= UrlParameter.Optional } // Parameter defaults
        ); 
```

那么只有你的参数可以传递给你的控制器。调用 url 看起来像这样

```
 url: '/Video/SaveWindowWidth'+width, 
```

或者

```
url: '/Video/SaveWindowWidth?width=' + width, 
```

它对我来说很好用！

希望能帮助到你

# java - 线程的run方法完成后创建另一个线程

> ID：13571831
> 
> 赞同：0
> 
> 时间：2012-11-26T19:36:03.810
> 
> 标签：java, multithreading, threadpool, generated

我有一个扩展 Thread 类的类，如下所示。

```
public class RemoteDataSynchTaskProcessor extends Thread {
private GDRType taskGDR;

public RemoteDataSynchTaskProcessor(GDRType taskGDR) {
    this.taskGDR = taskGDR;
}

private void execute() {

    try {
        try {

            RemoteClient.runDataSynchTask(taskGDR);

        } catch (RemoteException re) {
            //.....
        } catch (NotBoundException e) {
            //......
        }
        processResult(false, "Success");
    } catch (DTSException de) {
    //....
    }

}

public void run() {
    Observer.incrementNumOfDataSyncyProcessor();

    try {
        execute();
    } finally {
        Observer.decrementNumOfDataSynchProcessor();
    }
} 
```

该线程执行完毕后，出现另一个线程，名为：Thread [pool-34-thread-1] (Running)

我不知道为什么这个线程出现并且永远不会终止，并且在几天后我最终得到了数千个线程，池数每次都在增加（例如线程 [pool-2500-thread-1]）

如果调试并挂起这些生成的线程的执行，堆栈如下：

```
Thread [pool-1-thread-1] (Suspended)    
Unsafe.park(boolean, long) line: not available [native method]  
LockSupport.park(Object) line: 156  
AbstractQueuedSynchronizer$ConditionObject.await() line: 1987   
LinkedBlockingQueue<E>.take() line: 399 
ThreadPoolExecutor.getTask() line: 947  
ThreadPoolExecutor$Worker.run() line: 907   
Thread.run() line: 662 
```

这些线程是什么，我怎样才能摆脱它们？

**编辑**：似乎它与我正在使用的闭源线程池库有关（从询问执行程序服务的评论判断）。

我使用提供 ThreadPool 功能的库。这就是我在应用程序启动开始时创建池的方式。

```
 ThreadPool fetcherPool = new ThreadPool("TASK_FETCHER", ConfigParams.minimumTaskFetcherCount, ConfigParams.maximumTaskFetcherCount, new TaskFetcher()); 
```

ThreadPool.java 好像是在扩展Java的ThreadGroup类，ThreadFetcher如下，其实是触发了线程。

```
public class TaskFetcher extends PooledMessageWorker //Pooled Message Worker extends ReacreatableThread

public void run() {
    Observer.incrementNumOfTaskFetcher();
    try {
        while (true) {
            try {
                if (Observer.isShutdowned()) {
                    break;
                }
                ControllerUtil.getInstance().waitIfPaused();

                ESDRType task = (ESDRType) TaskHandler.getTask();
                if (task != null) {
                    trigger(task);
                }
            } catch (Exception e) {
                LogUtil.error(logger, e.getMessage(), e);
            }
        }
    } finally {
        Observer.decrementNumOfTaskFetcher();
    }
}

private void trigger(ESDRType task) {
    try {
        GDRType[] messages = createMessages(esdr);
    for (GDRType message : messages) {
        RemoteDataSynchTaskProcessor remoteCDCMTaskProcessor = new      RemoteDataSynchTaskProcessor(message);
        remoteCDCMTaskProcessor.start(); //This thread causes a new thread appear after execution finishes
        LogUtil.debug(logger, "[distributeMessage()] [Message: ", message, "]... [OK]");    
    }
    } catch (DTSException exception) {
    // Logging stuff
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T23:47:09.820

您是否有理由必须使用封闭源代码的 3rd 方 ThreadPool 库？如果没有，请制作`RemoteDataSynchTaskProcessor`一个`Runnable`（顺便说一句，我总是更喜欢扩展/实现`Runnable`而不是扩展`Thread`）并尝试将它与`ExecutorService`.

实际上，即使您必须使用 3rd 方库，我也会尝试使用此方法进行调试。您可能会缩小问题所在的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:30:44.763

对不起大家，似乎它与 ThreadPool 或 RemoteDataSynchTaskProcessor 无关。

我没有注意到在 RemoteDataSynchTaskProcessor 中的 ProcessResults() 方法调用的方法中创建了另一个 ExecutorService。并且执行器服务器在其作业关闭后不会关闭。我的错。

因此，如果有人遇到无法解释的问题，请检查您的代码两次：D 在其他地方寻找问题：P

# ruby - each_slice ruby 跳过前 x 个切片

> ID：13571835
> 
> 赞同：0
> 
> 时间：2012-11-26T19:36:21.137
> 
> 标签：ruby, loops, enumerable

我有一个备份脚本，我将所有对象放在一个目录中，然后用每 30,000 个切片将它们备份到 S3。现在我的问题是我有超过 100,000 个对象，我想跳到第 2 片，但我不确定该怎么做。所以循环的开始看起来像 -

```
directory.files.each_slice(30000) do |file_array|

directory.files.each_slice(30000).skip(1) 
```

有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:43:06.990

`each_slice`返回一个可枚举的，然后您可以在其上调用更多可枚举的方法，因此您可以使用它`with_index`来执行类似的操作

```
directory.files.each_slice(30000).with_index { | file_array, i | 
    next if i == 2 
    upload file_array 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:49:10.293

您的假设`skip`方法称为[`drop`](http://Ruby-Doc.Org/core-1.9.3/Enumerable.html#method-i-drop)：

```
directory.files.each_slice(30000).drop(1).each do |file_array| 
```

请注意，与*所有* `Enumerable`方法一样，它不是类型保留的，它总是返回 an `Array`，即使您在 an 上调用它也是如此`Enumerator`。因为你现在只有大约 4 片，所以这不是问题，但如果你有数百万片，那会很快耗尽你的记忆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T19:48:27.977

这个怎么样：

```
directory.files.each_slice(30000).with_index do |files, idx| 
  next if idx == 0
  ...
end 
```

# javascript - 如何从服务器脚本中的另一个表中选择数据？视窗天青

> ID：13571840
> 
> 赞同：1
> 
> 时间：2012-11-26T19:36:35.207
> 
> 标签：javascript, azure, azure-storage, azure-mobile-services

我在 Windows Azure 移动服务中工作。我有 2 个表计划 1:N 订阅（一个计划有很多订阅相关，一个订阅有一个计划相关）。我对 JS 服务器脚本不是很熟悉。当我插入一个新的订阅时，我需要查询这个新订阅所具有的计划（planId 来自订阅对象中的客户端）。所以我有这个：

```
function insert(item, user, request) 
{
    var planTable = tables.getTable("Plan");
    //Here I want to select the plan from planTable using item.PlanId

    request.execute();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T20:35:58.353

您可以这样做（官方文档可[在此处](http://msdn.microsoft.com/en-us/library/windowsazure/jj614364.aspx)获得）：

```
 planTable.where({
        id: item.PlanId
    }).read({
        success: function(results) {
            // Do something here!
            request.execute();
        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T14:57:43.477

您可以在[http://blogs.msdn.com/b/carlosfigueira/archive/2012/09/11/supporting-complex-types-in-azure-mobile-services-clients-实施-1-n-table-relationships.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2012/09/11/supporting-complex-types-in-azure-mobile-services-clients-implementing-1-n-table-relationships.aspx)。它包含扩展 Sandrino Di Mattia 答案的示例。

# spring - 使用 SolrJ REST-API 在 Spring 应用程序中查询数据

> ID：13571841
> 
> 赞同：2
> 
> 时间：2012-11-26T19:36:38.943
> 
> 标签：spring, web-applications, solr

我有 solr 在运行`http://localhost:8983/solr/`。我有一个运行在`http://localhost:8080/login.jsp` . 我希望能够仅从我的 spring 应用程序中查询 solr 数据。解决此问题的最佳方法是什么？有人有一个简单的运行示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:41:17.047

[使用SolrJ](http://wiki.apache.org/solr/Solrj)将 Solr 与 Spring 集成。
SolrJ 是 Solr Java 客户端库，它允许您查询 Solr 并返回 java 对象中的结果，您可以将其用作 Spring MVC 的模型对象。您可以使用 Solrj 轻松创建与 Solr 交互的存储库。
此外，保护 Solr 集合，这样任何人都无法在未经身份验证的情况下从直接 URL 访问 Solr。带有 Spring MVC 应用程序的 Solrj 客户端可以通过身份验证查询 SOlr。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T06:34:57.077

您也可以使用[spring-data-solr](https://github.com/SpringSource/spring-data-solr)来执行此操作。它应该很好地集成到现有的 Spring MVC 应用程序中。

# css - 屏幕中心的 Lytebox

> ID：13571842
> 
> 赞同：2
> 
> 时间：2012-11-26T19:36:42.937
> 
> 标签：css, center, lytebox

有什么方法可以将 Lytebox (http://lytebox.com/) 设置为在屏幕中心（中间中间）而不是顶部中心打开？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:11:11.807

在样式表中添加类似的东西`#lbMain { top: 25% !important; }`应该可以做到。玩弄 % 值以将其放在您想要的位置。它不会是死点，但你可以靠近。

# three.js - 从各个方向看都一样的 3d 对象

> ID：13571847
> 
> 赞同：4
> 
> 时间：2012-11-26T19:36:52.593
> 
> 标签：three.js

*   有一个有墙壁和地板的 3d 迷宫。
*   有一个带键的图像（或其他不重要的对象，但它们都是图像而不是 3d 模型）。

我想将它显示在地板上，如果相机在对象周围移动，则需要在不旋转对象的情况下看起来相同。我怎样才能做到这一点？

更新1：

我创建了一个平面几何图形，添加了图像（它是一个透明的 png）并在渲染时旋转。它工作得很好，但如果我转动相机，有时飞机会失去透明度大约几毫秒，并得到纯黑色背景（闪烁）。

知道为什么吗？

这是代码：

```
var texture = new THREE.ImageUtils.loadTexture('assets/images/sign.png');
var material = new THREE.MeshBasicMaterial( {map: texture, transparent: true} );

plane = new THREE.Mesh(new THREE.PlaneGeometry(115, 115,1,1), material );
plane.position.set(500, 0, 1500);
scene.add(plane);

// at render:
plane.rotation.copy( camera.rotation ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:04:46.270

这将通过使用来实现：

```
function animate() {
     not3dObject.rotation.z = camera.rotation.z;
     not3dObject.rotation.x = camera.rotation.x;
     not3dObject.rotation.y = camera.rotation.y;
     ...
     render();
} 
```

# git - 如何删除 git 的 MERGE_MSG？

> ID：13571849
> 
> 赞同：16
> 
> 时间：2012-11-26T19:37:03.513
> 
> 标签：git, merge, git-pull

我已经尝试了一些建议的东西，但似乎没有任何东西可以删除它。当我升级到 Mountain Lion OS X 时，这开始发生。每当我执行 . 时`git pull`，它都会显示这个令人讨厌的空编辑器，标题为 MERGE_MSG。

如何防止它在我的所有应用程序中*全局弹出？*

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-26T20:18:22.390

您可以传递`--no-edit`给`git pull`，也可以将环境变量设置`GIT_MERGE_AUTOEDIT`为`no`.

从[`git pull`](http://www.kernel.org/pub/software/scm/git/docs/git-pull.html)文档中：

```
 --edit, --no-edit
       Invoke an editor before committing successful mechanical merge to
       further edit the auto-generated merge message, so that the user can
       explain and justify the merge. The --no-edit option can be used to
       accept the auto-generated message (this is generally discouraged).
       The --edit option is still useful if you are giving a draft message
       with the -m option from the command line and want to edit it in the
       editor.

       Older scripts may depend on the historical behaviour of not
       allowing the user to edit the merge log message. They will see an
       editor opened when they run git merge. To make it easier to adjust
       such scripts to the updated behaviour, the environment variable
       GIT_MERGE_AUTOEDIT can be set to no at the beginning of them. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-05T11:26:13.633

Git 在这里创建一个合并提交，并希望您在提交消息中添加一些单词。

为什么要合并？A`git pull`是 a`git fetch`后跟 a `git merge`。后者*可能会*导致尝试创建合并提交，这似乎发生在您身上。

有几种方法可以避免这种情况。我建议让`git pull`触发变基而不是合并。这避免了额外的合并提交及其消息。它还有助于保持历史线性。A`git pull --rebase`一次性完成此操作（即，它`git fetch`后面跟着 a `git rebase`）。

我将其永久配置为：

```
git config --global pull.rebase true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-22T19:49:06.593

将远程分支合并到本地提供更多控制然后拉。合并可以是“快进”（不需要合并消息），合并消息可以是有意义的。Pull 不会为您提供“快进”选项，并且始终会生成不鼓励的默认合并消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-05T04:46:57.823

Git 2.34（2021 年第四季度）提供了更具弹性的体验，允许`.git/MERGE_MSG`在两种极端情况下自动删除。：

之前，在 " [`git rebase`](https://github.com/git/git/blob/0ba5a0b3ba34270b2b57b75f4cce8454a7cc5eeb/Documentation/git-rebase.txt)" ^(( [man](https://git-scm.com/docs/git-rebase) ))中的最后一个冲突步骤中检查 HEAD 中的所有路径并继续会导致跳过该步骤（这是预期的），但会留下`MERGE_MSG`文件`$GIT_DIR`并混淆下一个 " [`git commit`](https://github.com/git/git/blob/0ba5a0b3ba34270b2b57b75f4cce8454a7cc5eeb/Documentation/git-commit.txt)" ^(( [man](https://git-scm.com/docs/git-commit) ))，已通过 Git 2.34（2021 年第四季度）更正。

请参阅[Phillip Wood (](https://github.com/phillipwood) [)的](https://github.com/phillipwood)[commit e5ee33e](https://github.com/git/git/commit/e5ee33e8551fa934862b8cbe50693f4841e7dace)、[commit bed9b4e](https://github.com/git/git/commit/bed9b4e3128af2c36645ba44fe19bf10af6d68ea)、[commit 118ee5c](https://github.com/git/git/commit/118ee5c6135833a8fc015833dc3e471d9d31fbd8)（2021 年 8 月 12 日） 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([0ba5a0b 提交中](https://github.com/git/git/commit/0ba5a0b3ba34270b2b57b75f4cce8454a7cc5eeb))^(，2021 年 9 月 3 日）)[`phillipwood`](https://github.com/phillipwood)
^([`gitster`](https://github.com/gitster))

> ## [`rebase --continue`](https://github.com/git/git/commit/e5ee33e8551fa934862b8cbe50693f4841e7dace)： 消除`.git/MERGE_MSG`
> 
> ^(报告人：Victor Gambier)
> ^(签字人：Phillip Wood)
> ^(审核人：Elijah Newren)

> 如果用户通过删除索引和工作树中的所有更改来跳过最终提交，则使用 ' [`git restore`](https://github.com/git/git/blob/e5ee33e8551fa934862b8cbe50693f4841e7dace/Documentation/git-restore.txt)' ^(( [man](https://git-scm.com/docs/git-restore) )) (或 read-tree) 然后运行 ​​' [`git rebase --continue`](https://github.com/git/git/blob/e5ee33e8551fa934862b8cbe50693f4841e7dace/Documentation/git-rebase.txt#L241)' ^(( [man](https://git-scm.com/docs/git-rebase#Documentation/git-rebase.txt---continue) )) `.git/MERGE_MSG`将被留下。
> 这将在用户下次提交时播种提交消息，这不是我们想要发生的。

还有（仍然是 Git 2.34）：

请参阅[Phillip Wood (](https://github.com/phillipwood) [)的](https://github.com/phillipwood)[提交 f2563c9](https://github.com/git/git/commit/f2563c9ef3c028b5d4165df02fdfc0fcd613102d)、[提交 baf8ec8](https://github.com/git/git/commit/baf8ec8d3a0327307f79efd31d5717a0c91c4d8c)、[提交 0c164ae](https://github.com/git/git/commit/0c164ae7a65f811ef3fb3188c63cd157335463bb)、[提交 2be6b6f](https://github.com/git/git/commit/2be6b6f411136c6773a90d2cfdacf3cccb79d3e6)（2021 年 8 月 20 日） 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 9135259](https://github.com/git/git/commit/9135259b0387ce55cc9bd9671653fc33bb734b1e))^(中，2021 年 9 月 3 日）)[`phillipwood`](https://github.com/phillipwood)
^([`gitster`](https://github.com/gitster))

> ## [`rebase -r`](https://github.com/git/git/commit/baf8ec8d3a0327307f79efd31d5717a0c91c4d8c): 快进时不要写 .git/MERGE_MSG
> 
> ^(报告人：SZEDER Gábor)
> ^(签字人：Phillip Wood)

> 当快速转发时，我们不会创建新的提交，因此`.git/MERGE_MSG`不会被删除，并且最终会在变基完成后播种提交的消息。
> 通过在快进检查之后写入文件来避免`.git/MERGE_MSG`在我们快进时写入。
> 请注意，快进代码没有变化，只是移动了。
> 
> 请注意，这种更改的实现方式意味着我们在快进时也不再编写作者脚本。
> 我相信这是安全的，原因如下，但这与我们在快速转发非合并提交时所做的不同。
> 如果我们改写合并，那么 ' [`git commit --amend`](https://github.com/git/git/blob/baf8ec8d3a0327307f79efd31d5717a0c91c4d8c/Documentation/git-commit.txt#L271)' ^(( [man](https://git-scm.com/docs/git-commit#Documentation/git-commit.txt---amend) ))将保留我们正在改写的提交的作者身份，因为它会忽略`GIT_AUTHOR_*`，除非`--reset-author`通过。
> 它还将正确的`GIT_AUTHOR_*`变量导出到任何钩子，并且我们已经测试了改写提交的作者身份。
> 如果我们不重新措辞，那么我们不再调用`spilt_ident()`，这意味着我们不再检查提交作者标题是否正常。
> 然而，这是我们在快速转发非合并提交时已经做的事情，`skip_unnecessary_picks()`所以我认为我们不在这里检查作者并没有违反任何承诺。

# .htaccess - 使用 .htaccess 在 php 中重写 url

> ID：13571852
> 
> 赞同：-3
> 
> 时间：2012-11-26T19:37:19.417
> 
> 标签：.htaccess, cakephp, mod-rewrite, cakephp-1.3

我需要在我的项目中重写 url。

我有一个这样的网址

```
http://www.example.com/apps?platform=Android&category=Business&keyword=cows 
```

我需要将其重写为`http://www.example.com/apps/Android-Business-cows`

我如何实现这个 url 重写

我是 php 中的 cakephp 框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:42:27.950

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^(apps)/([^-]+)-([^-]+)-([^-]+)/?$ $1?platform=$2&category=$3&keyword=$4 [QSA,L,NC] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:43:52.293

这会做（假设你在 apache 上使用 mod-rewrite）：

```
RewriteEngine ON
Options +FollowSymLinks -Multiviews
RewriteRule ^apps/([^-]+)-([^-]+)-([^-]+)$ apps?platform=$1&category=$2&keyword=$3 
```

# css - background-image + rgba() 在 IE 7-8 中具有后备功能

> ID：13571855
> 
> 赞同：5
> 
> 时间：2012-11-26T19:37:29.510
> 
> 标签：css, internet-explorer

我有一个具有背景图像和透明背景颜色的元素。我希望 IE 回到纯色。

```
.element {
    background: url(image.png);
    background-color: #000; /* should be IE fallback */
    background-color: rgba(0,0,0,0.5);
} 
```

似乎是一个简单的问题，但我找不到任何解决方案。有些解决方案只适用于 IE7，有些只适用于 IE8。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T19:50:29.040

尝试这个：

```
.element {
    background: url(image.png);
    background-color: #000; /* IE 8 */
    background-color: rgba(0,0,0,0.5);
    *background-color: #000; /* IE 7 */
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T19:41:45.193

要专门为 IE8 或更低版本编写 CSS 规则，请在分号前的末尾添加反斜杠和 9 (\9)。

例子：`background-color:#000\9;`

[资源](http://webdesignerwall.com/tutorials/css-specific-for-internet-explorer)

# forms - Access - 如何创建一个下拉列表，所有表格都填充在子表单中？

> ID：13571856
> 
> 赞同：1
> 
> 时间：2012-11-26T19:37:33.063
> 
> 标签：forms, ms-access, subform

我有一个包含大约 20 个表的访问数据库。我想创建一个表单，其中包含我所有表格的下拉菜单。选择表时，我试图让子表单反映这些表中的信息。

基本上，不必单击并打开每个表，而是在表单中查看它们。这可能吗？

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T21:05:10.937

你可以调用这个子来填充你的下拉菜单：

```
Private Sub Add_Tables_To_DropdownMenu()
  Dim T As TableDef

  For Each T In CurrentDb.TableDefs
    If (Left(T.Name, 4) <> "USys") And (T.Attributes = 0) Then
        Dropdownmenu0.AddItem T.Name
    End If
  Next
End Sub 
```

然后，您可以在下拉菜单更改时设置事件，并根据所选值更新子表单的 SourceObject：

```
Private Sub Dropdownmenu0_AfterUpdate()
    Subform1.SourceObject = "Table." & Dropdownmenu0.Value
End Sub 
```

# javascript - 请稍候 使用 javascript 的动画 gif

> ID：13571858
> 
> 赞同：0
> 
> 时间：2012-11-26T19:37:40.037
> 
> 标签：javascript, pleasewait

我正在尝试使用[这篇文章](http://www.ryantetek.com/2009/06/animated-progress-loading-bar-upon-form-submit-javascript/)来获取请等待消息的动画 gif.... 点击按钮。但是，当我打开我正在测试的示例 html 页面时，我得到一个输入框，而不是带有图像的按钮。

下面是我在测试页面上尝试的 html 代码。

```
 <html>

 <script type="text/javascript">

  function loadSubmit() {
   var ProgressImage = document.getElementById('progress_image');
  document.getElementById("progress").style.visibility = “visible”;
   setTimeout(function(){ProgressImage.src = ProgressImage.src},100);
   return true;
    }
    </script>

 <body>
   <p style="visibility:hidden;" id="progress">

  <img id="progress_image" style="padding-left:5px;padding-top:5px;" src="ajax-loader.gif" alt=""> Uploading in progress…      </p> 
    <input class="contSubmit" onclick="return loadSubmit()" type=”button” src= "submitinfo_btn.png" /> 

     </body>
   </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:42:54.900

像这样复制粘贴代码时要小心。这是错误的：

```
type=”button” 
```

这是正确的：

```
type="button" 
```

注意到区别了吗？如果您从没有启用代码的正确格式的网站复制代码，则会发生这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:44:34.823

根据您的教程，输入应该是“图像”类型，而不是“按钮”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T19:45:09.070

`input`将您的类型更改为`image`. `src`仅对`image`有效。

此外，您的问题似乎与您的“请稍候”动画 gif 无关，因此您的标题可能具有误导性。

# nivo-slider - Nivo Slider - 如果只有一张图像，则隐藏缩略图并防止幻灯片转换

> ID：13571859
> 
> 赞同：1
> 
> 时间：2012-11-26T19:37:40.923
> 
> 标签：nivo-slider

我是第一次使用 Nivo Slider，它非常棒，但是我确实有几个问题。

我将它集成在一个 CMS 中，这允许用户添加多达 5 个图像。

但是，如果只有一张图像，我只想隐藏缩略图并停止任何过渡，就像一次又一次地滑动相同的图像一样。

现在这是我会用 JQuery 做的事情，还是应该编辑“jquery.nivo.slider.js”文件？或者这可能是我可能在两者中都可能实现的事情？

我想我想做类似的事情：

```
if images < 1 {
 transition = false;
 thumbnails = hide;
} 
```

希望这是有道理的。

感谢您的时间和帮助。

**更新**

好的，如果只有一个图像，我已经设法通过将以下内容添加到 jquery.nivo.slider.js 文件来隐藏缩略图：

```
if (vars.totalSlides < 2)
{
 $('.nivo-controlNav').remove();
} 
```

我现在希望能够根据相同的规则更改以下代码中的设置之一，但不确定如何执行此操作：

```
$.fn.nivoSlider.defaults = {
    pauseOnHover: 'false',
    ......
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:00:35.987

我会更改配置数组并像这样初始化滑块：

```
// nivo config array
var nivoConfig = {
    slices: 30, // For slice animations
    boxCols: 16, // For box animations
    // put all your init config here but exclude 'effects'
}

if(imagesCount < 2) {
    nivoConfig['effects'] = 'none';
} else {
  nivoConfig['effects'] = 'random';
}

$('#slider').nivoSlider(nivoConfig); 
```

试试看，它应该以这样的方式工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T18:53:30.927

我遇到了同样的问题；Johnny 的代码运行良好，但我想为可能对此有问题的人进行详细说明。您需要插入：

```
 if (vars.totalSlides < 2) {
    $('.nivo-controlNav').remove();
} 
```

在 jquery.nivo.slider.js 文件的第 158 行或附近（在 if(settings.controlNav) {} 条件下）。否则它将无法正常工作。

# javascript - 单击此图像的地图区域时获取 img 标签 ID

> ID：13571861
> 
> 赞同：1
> 
> 时间：2012-11-26T19:37:41.163
> 
> 标签：javascript, html, image, shape, area

我有一些像这样的地图区域的图像数字

![图像区](../Images/8d3fd36ae852452c6eb97437497ca118.png)

我需要在区域区域内单击时获取图像ID，
我可以在没有使用js的自定义区域功能实现的情况下制作它吗？

**UPD** [沙盒](http://goo.gl/BRkBM)

**UPD2**发现第二个，其他问题。第一个区域区域（红色），被第二个图像覆盖，不可点击，区域的 z-index 不起作用。

![图像问题](../Images/f3eaed7ab9469ac814da21268f10a613.png)

**FINAL UPD**
我写了一个小的自定义函数来映射一些对象。
也许它会帮助某人：
[jsFiddle](http://goo.gl/UE97C)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:59:42.217

像这样假设您可以使用jQuery：

```
<img id="planetsimg" src="planets.gif" width="145" height="126" alt="Planets" usemap="#planetmap">

<map name="planetmap">
  <area shape="rect" coords="0,0,82,126" href="sun.htm" onclick="clicked(this)" alt="Sun" image-id="planetsimg">
  <area shape="circle" coords="90,58,3" href="mercur.htm" onclick="clicked(this)" alt="Mercury" image-id="planetsimg">
  <area shape="circle" coords="124,58,8" href="venus.htm" onclick="clicked(this)" alt="Venus" image-id="planetsimg">
</map>

<script>
function clicked(map) {
    var image = $('#' + $(map).attr('image-id'));
    alert('img ' + image + ' clicked map ' + $(map).attr('href'));

    return false; // Prevents href from opening normally. Return true if you want the link to open
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:26:15.197

我希望这就是你要找的

JS 小提琴示例：http: [//jsfiddle.net/g5Dy3/44/](http://jsfiddle.net/g5Dy3/44/)

**HTML**

```
<img id="dotted" src="image1.jpg" usemap="#ballmap" alt="sample" />
<img id="solid" src="image2" usemap="#ballmap2" alt="sample" />

<map name="ballmap">
    <area shape="circle" coords="210,120,90" href="#" alt="dotted ball" title="dotted ball" onclick="clickedMe(this);">
</map>
<map name="ballmap2">
    <area shape="circle" coords="126,90,70" href="#" alt="solid ball" title="solid ball" onclick="clickedMe(this);">
</map> 
```

**JS**

```
function clickedMe(item) {
    var mapName;
    mapName = $(item).parent().attr('name');
    $('img').each(function(){
        if($(this).attr('usemap') == '#'+mapName){
            alert($(this).attr('id'));            
        }       
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T19:57:51.153

只需将点击处理程序添加到地图的区域（图像），而不是地图本身

如果你使用 jQuery，你可以这样做：

```
$('map').find('area').each(function() {
  $(this).on('click',... 
}); 
```

# java - java应用程序中的清除按钮

> ID：13571864
> 
> 赞同：0
> 
> 时间：2012-11-26T19:37:52.317
> 
> 标签：java, garbage-collection

我的代码由三个类组成，例如：x(extends JFrame)、y(extends JPanel) 和 z。x 具有主要功能。它有borderLayout，里面有两个面板：left 和center。左面板有一堆 JButtons 和 JTextFields，用户在其中输入他的值，这些值用于将一些东西绘制到我的 y 类处理的中心面板中。

z 类被 y 类用于一般计算目的。现在我几乎完成了程序的制作，并且正在左侧面板中的“清除”按钮上工作，该按钮将清除用户输入的所有文本以及已绘制到我的中心面板中的内容（由 y 类处理）。

我能做的是将一些值设置为默认值并 repaint() 我的中心面板，但问题是有很多变量，然后我的 z 类中又有很多变量（由 y 实例化） .

这变得令人困惑和令人厌烦，所以我在想是否有任何方法可以（我在这里违反垃圾收集规则）我可以杀死我的 x 类中的 y 实例并创建一个新实例。那会很整洁。告诉我在这种情况下我应该怎么做。谢谢。

编辑：我想要清除按钮来删除已经绘制到我的面板中的内容，所以我可以在我的 x 类中执行此操作吗？

```
remove(myRightpanelInstance);
myRightPanel myRightpanelInstance2 = new myRightPanel();
add(myRightpanelInstance2, BorderLayout.CENTER); 
```

顺便说一句，它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:45:03.043

根据您的编辑，您想添加一个新面板并覆盖旧面板。您可以简单地：

```
 MyRightPanel myRightPanelInstance2 = new myRightPanel();
 add(myRightPanelInstance2, BorderLayout.CENTER); 
```

这将用新面板覆盖现有面板。

确保此代码位于清除按钮的侦听器中。仅当您在侦听器中调用此代码时才会发生这种情况。

```
 clearButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            //Either above code here or above code in a method and method call here
        }
    }) 
```

# php - 使用 bindValue 的准备好的语句不起作用

> ID：13571867
> 
> 赞同：1
> 
> 时间：2012-11-26T19:38:03.473
> 
> 标签：php, prepared-statement, bindvalue

我是 PHP 新手，我正在尝试让准备好的语句起作用。这是我在大学的最后一年项目，我记得读过准备好的语句是很好的做法，也有利于 SQL 注入。但是，以下代码给了我一个 Server 500 错误。

```
<?php
    $email = "blah@blah.co.uk";
    $hash = "somerandomhashedpassword";
    $db = new mysqli("localhost", "root", "1234", "UEAnetwork");    
    $sql = "INSERT INTO Students (Email, Password) VALUES (?,?)";
    $stmt = $db->prepare($sql);
    $stmt->bindValue(1, $email);
    $stmt->bindValue(2, $hash);           
    if ($stmt->execute()) {
        echo "You have registered!!!!!!!!!!!!!!!!!!!!!!!!!!!!";
    }
?> 
```

如果我运行以下命令，则会插入一行，所以我很确定我正确连接到数据库。

```
<?php
    $db = new mysqli("localhost", "root", "1234", "UEAnetwork");    
    $sql = "INSERT INTO Students (Email, Password) VALUES ('blah@blah.co.uk','somerandomhashedpassword')";
    $stmt = $db->prepare($sql);         
    if ($stmt->execute()) {
        echo "You have registered!!!!!!!!!!!!!!!!!!!!!!!!!!!!";
    }
?> 
```

我使用`bindValue`不正确吗？我已经在许多在线教程中看到它使用这种方式，但我一定做错了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T19:41:46.657

`mysqli`有一个非常不同的 API 比`PDO`. 没有`mysql_stmt::bindValue`。您想使用`mysql_stmt::bind_param`，但语法完全不同：

```
$stmt->bind_param('ss', $email, $hash); 
```

# ruby-on-rails - ruby on rails 在 Windows XP 中无法正常工作

> ID：13571877
> 
> 赞同：1
> 
> 时间：2012-11-26T19:38:47.250
> 
> 标签：ruby-on-rails, ruby, installation

我下载了安装在我的 Windows XP 上的 RoR ans，但无论如何它都无法正常工作。我对 RoR 完全陌生。请检查我的以下屏幕截图-

1）这就是我最初所做的 - ![在此处输入图像描述](../Images/1835d63ba7635fbf8ae79fc9a23af8ff.png)

2）启动rails服务器，但它不会。

![在此处输入图像描述](../Images/54dd70cffd4faf05f3f5bc49aabfc625.png)

3）即使是 rails version 命令也不起作用。

![在此处输入图像描述](../Images/0be44eb1a4a453bb878f3234d81aed2b.png)

4）这是在我的 aap2 文件夹中创建的 :(

![在此处输入图像描述](../Images/2a695577c52de31cd0a5eb0286eb2817.png)

请让我知道我做错了什么。

**注意**`rails-installer`——我通过.exe 安装了 RoR

安装信息——

![在此处输入图像描述](../Images/61cdd5aa717007e4f6345471df7c57ce.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T19:50:33.490

您已经安装了 Rails 2.3，但您希望它能够像 Rails 3 一样工作。

Rails 2.3 的正确语法是：

```
rails myproject 
```

Rails 3.x 的正确语法是：

```
rails new myproject 
```

对于两者，您可能希望使用以下命令检查版本：

```
rails -v 
```

Rails 2.3 不再受到积极支持，因此您不应使用它创建新项目。

# php - 错误的值被插入到数据库中

> ID：13571884
> 
> 赞同：0
> 
> 时间：2012-11-26T19:39:24.860
> 
> 标签：php, mysql, mysqli

```
$min_year = 1;
$max_year = 10;
$years = range($min_year, $max_year); // returns array with numeric values of 1900 - 2012
$yearHTML = '';
$yearHTML .= '<select name="year" id="yearDrop">'.PHP_EOL; 
$yearHTML .= '<option value="">Please Select</option>'.PHP_EOL;  
foreach ($years as $year) {
    if (!$validSubmission && isset($_POST['year']) && $year == $_POST['year'])
    {
        $yearHTML .= "<option value='".$year."' selected='selected'>$year</option>".PHP_EOL;
    }
    else
    {
        $yearHTML .= "<option value='".$year."'>$year</option>".PHP_EOL;
    }
}

$yearHTML .= '</select>'; 
```

上面我有一个下拉菜单，其中包含下拉菜单中的选项 1 - 10。我遇到的问题是，无论我从下拉菜单中选择哪个数字，它都会一直`1`在数据库中插入数字。任何人都可以在下面的代码中看到为什么这样做：

```
$getyear = in_array($_POST['year'], $years);

    $insertsql = "
    INSERT INTO Student
    (Year)
    VALUES
    (?)
    ";
    if (!$insert = $mysqli->prepare($insertsql)) {
    // Handle errors with prepare operation here
    }                                           

    $insert->bind_param("i", $getyear);

    $insert->execute();

    if ($insert->errno) {
    // Handle query error here
    }

    $insert->close(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T19:41:20.197

```
$getyear = in_array($_POST['year'], $years); 
```

返回真。True 被强制转换为 INT，因此变为 1；

替换为：

```
if( in_array($_POST['year'], $years) === true ){
  $getyear = (int) $_POST['year'];
} 
```

# c# - silverlight 目录中的 .ni.dll 文件

> ID：13571885
> 
> 赞同：1
> 
> 时间：2012-11-26T19:39:28.183
> 
> 标签：c#, silverlight

“C:\Program Files (x86)\Microsoft Silverlight\5.1.10411.0”目录中的 *.ni.dll 文件是什么？
.ni.dll 文件和 .dll 文件有什么区别？
为什么 .ni.dll 文件更大？

```
system.dll : 234kb ---- System.ni.dll : 649kb
System.Runtime.Serialization.dll : 425kb ---- System.Runtime.Serialization.ni.dll : 1,137kb
System.Windows.dll : 1,883kb ---- System.Windows.ni.dll : 4,886kb
System.Xml.dll : 313kb ---- System.Xml.ni.dll : 805kb
.
.
. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:43:35.543

它们是程序集的本机图像。.dll 包含 IL 代码，.ni.dll 包含本机代码。

见这里：http: [//blogs.msdn.com/b/junfeng/archive/2004/11/11/256122.aspx](http://blogs.msdn.com/b/junfeng/archive/2004/11/11/256122.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:43:17.320

`.ni.dll`文件是Silverlight DLL 的*本机映像*。以托管代码表示的 DLL 在 SL 安装期间被编译为本机代码，因此它们可以具有更好的运行时性能。

# java - Tomcat：无法解析运行时描述符

> ID：13571886
> 
> 赞同：8
> 
> 时间：2012-11-26T19:39:28.763
> 
> 标签：java, apache, tomcat, jax-ws

我尝试在 CentOS 6.3 -> Apache -> Tomcat 5.5 下部署 JAX-WS webservice

我用谷歌搜索了几个小时，问了我所有的朋友，还试图在 stackoverflow 上找到解决方案，但无济于事。有人可以帮助我吗？先感谢您。

我收到以下错误消息：

```
2012 年 11 月 26 日下午 12:36:52 com.sun.xml.ws.transport.http.servlet.WSServletContextListener parseAdaptersAndCreateDelegate
严重：WSSERVLET11：无法解析运行时描述符：java.lang.IllegalAccessError：com.sun.xml.ws.assembler.MetroClientTubelineAssemblyContextImpl 类无法访问其超类 com.sun.xml.ws.assembler.DefaultClientTubelineAssemblyContext
java.lang.IllegalAccessError：com.sun.xml.ws.assembler.MetroClientTubelineAssemblyContextImpl 类无法访问其超类 com.sun.xml.ws.assembler.DefaultClientTubelineAssemblyContext
    在 java.lang.ClassLoader.defineClass1（本机方法）
    在 java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    在 java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    在 java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    在 java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    在 java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    在 java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    在 java.security.AccessController.doPrivileged（本机方法）
    在 java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    在 java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    在 java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    在 com.sun.xml.ws.assembler.MetroTubelineAssemblerFactoryImpl.doCreate（MetroTubelineAssemblerFactoryImpl.java:63）
    在 com.sun.xml.ws.api.pipe.TubelineAssemblerFactory.create(TubelineAssemblerFactory.java:109)
    在 com.sun.xml.ws.server.WSEndpointImpl.(WSEndpointImpl.java:170)
    在 com.sun.xml.ws.server.EndpointFactory.create(EndpointFactory.java:306)
    在 com.sun.xml.ws.server.EndpointFactory.create(EndpointFactory.java:301)
    在 com.sun.xml.ws.server.EndpointFactory.createEndpoint(EndpointFactory.java:147)
    在 com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:574)
    在 com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:557)
    在 com.sun.xml.ws.transport.http.DeploymentDescriptorParser.parseAdapters(DeploymentDescriptorParser.java:260)
    在 com.sun.xml.ws.transport.http.DeploymentDescriptorParser.parse(DeploymentDescriptorParser.java:152)
    在 com.sun.xml.ws.transport.http.servlet.WSServletContextListener.parseAdaptersAndCreateDelegate(WSServletContextListener.java:131)
    在 com.sun.xml.ws.transport.http.servlet.WSServletContextListener.contextInitialized(WSServletContextListener.java:152)
    在 org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3795)
    在 org.apache.catalina.core.StandardContext.start(StandardContext.java:4252)
    在 org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:760)
    在 org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:740)
    在 org.apache.catalina.core.StandardHost.addChild(StandardHost.java:544)
    在 org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:884)
    在 org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:737)
    在 org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:498)
    在 org.apache.catalina.startup.HostConfig.check(HostConfig.java:1271)
    在 org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:301)
    在 org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:120)
    在 org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1306)
    在 org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1570)
    在 org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1579)
    在 org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1559)
    在 java.lang.Thread.run(Thread.java:662)
2012 年 11 月 26 日 12:36:52 PM org.apache.catalina.core.StandardContext listenerStart
严重：向 com.sun.xml.ws.transport.http.servlet.WSServletContextListener 类的侦听器实例发送上下文初始化事件的异常
com.sun.xml.ws.transport.http.servlet.WSServletException：WSSERVLET11：无法解析运行时描述符：java.lang.IllegalAccessError：com.sun.xml.ws.assembler.MetroClientTubelineAssemblyContextImpl 类无法访问其超类 com.sun。 xml.ws.assembler.DefaultClientTubelineAssemblyContext
    在 com.sun.xml.ws.transport.http.servlet.WSServletContextListener.parseAdaptersAndCreateDelegate(WSServletContextListener.java:141)
    在 com.sun.xml.ws.transport.http.servlet.WSServletContextListener.contextInitialized(WSServletContextListener.java:152)
    在 org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3795)
    在 org.apache.catalina.core.StandardContext.start(StandardContext.java:4252)
    在 org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:760)
    在 org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:740)
    在 org.apache.catalina.core.StandardHost.addChild(StandardHost.java:544)
    在 org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:884)
    在 org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:737)
    在 org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:498)
    在 org.apache.catalina.startup.HostConfig.check(HostConfig.java:1271)
    在 org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:301)
    在 org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:120)
    在 org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1306)
    在 org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1570)
    在 org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1579)
    在 org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1559)
    在 java.lang.Thread.run(Thread.java:662)
引起：java.lang.IllegalAccessError：com.sun.xml.ws.assembler.MetroClientTubelineAssemblyContextImpl 类无法访问其超类 com.sun.xml.ws.assembler.DefaultClientTubelineAssemblyContext
    在 java.lang.ClassLoader.defineClass1（本机方法）
    在 java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    在 java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    在 java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    在 java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    在 java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    在 java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    在 java.security.AccessController.doPrivileged（本机方法）
    在 java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    在 java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    在 java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    在 com.sun.xml.ws.assembler.MetroTubelineAssemblerFactoryImpl.doCreate（MetroTubelineAssemblerFactoryImpl.java:63）
    在 com.sun.xml.ws.api.pipe.TubelineAssemblerFactory.create(TubelineAssemblerFactory.java:109)
    在 com.sun.xml.ws.server.WSEndpointImpl.(WSEndpointImpl.java:170)
    在 com.sun.xml.ws.server.EndpointFactory.create(EndpointFactory.java:306)
    在 com.sun.xml.ws.server.EndpointFactory.create(EndpointFactory.java:301)
    在 com.sun.xml.ws.server.EndpointFactory.createEndpoint(EndpointFactory.java:147)
    在 com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:574)
    在 com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:557)
    在 com.sun.xml.ws.transport.http.DeploymentDescriptorParser.parseAdapters(DeploymentDescriptorParser.java:260)
    在 com.sun.xml.ws.transport.http.DeploymentDescriptorParser.parse(DeploymentDescriptorParser.java:152)
    在 com.sun.xml.ws.transport.http.servlet.WSServletContextListener.parseAdaptersAndCreateDelegate(WSServletContextListener.java:131)
    ... 17 更多
2012 年 11 月 26 日 12:36:52 PM org.apache.catalina.core.StandardContext 开始
严重：错误 listenerStart
2012 年 11 月 26 日 12:36:52 PM org.apache.catalina.core.StandardContext 开始
严重：上下文 [/lws] 启动因先前的错误而失败
2012 年 11 月 26 日 12:36:52 PM com.sun.xml.ws.transport.http.servlet.WSServletContextListener contextDestroyed
信息：WSSERVLET13：JAX-WS 上下文侦听器已损坏

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T05:00:01.400

看一下文档：

[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/IllegalAccessError.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/IllegalAccessError.html) 如果应用程序尝试访问或修改字段，或者调用它无权访问的方法，则抛出至。通常，这个错误会被编译器捕获；如果类的定义发生了不兼容的更改，则此错误只会在运行时发生。

换句话说，MetroClientTubelineAssemblyContextImpl 被编译为超类 DefaultClientTubelineAssemblyContext 的一个版本的子类，但它似乎在运行时发生了变化。

您可能发生的事情是类路径中有两个 jar，其中一个是 DefaultClientTubelineAssemblyContext 或 MetroClientTubelineAssemblyContextImpl 这两个类。您应该查找哪些 jar 具有这些类，并尝试只加载一个。

查找应用程序 Web 存档的 WEB-INF/lib 中的 jar 和 $TOMCAT_HOME/lib 文件夹中的 jar，以检查是否找到任何重复项。

# directx - DirectX 10 原点灯亮？

> ID：13571888
> 
> 赞同：0
> 
> 时间：2012-11-26T19:39:35.163
> 
> 标签：directx, directx-10

我正在使用 Frank Luna 的书来学习 DirectX 10，但我对我得到的一些照明有点困惑。我有几个对象，一个定向光和一个可以在场景中移动的点光源。我的问题是，当我移动点光源时，光会移动，但距离原点越远，它就会越暗。在原点时，它具有强烈的白光。为什么会这样，我怎样才能让它正常工作？谢谢。

这是点光源的代码：

```
 float3 PointLight(SurfaceInfo v, Light L, float3 eyePos)
    {
    float3 litColor = float3(0.0f, 0.0f, 0.0f);

    // The vector from the surface to the light.
    float3 lightVec = L.pos - v.pos;

    // The distance from surface to light.
    float d = length(lightVec);

    if( d > L.range )
        return float3(0.0f, 0.0f, 0.0f);

    // Normalize the light vector.
    lightVec /= d; 

    // Add the ambient light term.
    litColor += v.diffuse * L.ambient;  

    // Add diffuse and specular term, provided the surface is in 
    // the line of site of the light.

    float diffuseFactor = dot(lightVec, v.normal);
    [branch]
    if( diffuseFactor > 0.0f )
    {
        float specPower  = max(v.spec.a, 1.0f);
        float3 toEye     = normalize(eyePos - v.pos);
        float3 R         = reflect(-lightVec, v.normal);
        float specFactor = pow(max(dot(R, toEye), 0.0f), specPower);

        // diffuse and specular terms
        litColor += diffuseFactor * v.diffuse * L.diffuse;
        litColor += specFactor * v.spec * L.spec;
    }

    // attenuate
    return litColor / dot(L.att, float3(1.0f, d, d*d));
    } 
```

效果文件：

```
#include "lighthelper.fx"
#define MaxLights 2

cbuffer cbPerFrame
{
    uniform extern Light gLight[MaxLights];
    int gLightType; 
    float3 gEyePosW;
};

bool gSpecularEnabled;

cbuffer cbPerObject
{
    float4x4 gWorld;
    float4x4 gWVP; 
    float4x4 gTexMtx;
};

// Nonnumeric values cannot be added to a cbuffer.
Texture2D gDiffuseMap;
Texture2D gSpecMap;

SamplerState gTriLinearSam
{
    Filter = MIN_MAG_MIP_LINEAR;
    AddressU=Mirror;
    AddressV=Mirror;
};

struct VS_IN
{
    float3 posL    : POSITION;
    float3 normalL : NORMAL;
    float2 texC    : TEXCOORD;
    float4 diffuse : DIFFUSE;
    float4 spec    : SPECULAR;
};

struct VS_OUT
{
    float4 posH    : SV_POSITION;
    float3 posW    : POSITION;
    float3 normalW : NORMAL;
    float2 texC    : TEXCOORD;
    float4 diffuse : DIFFUSE;
    float4 spec    : SPECULAR;
};

VS_OUT VS(VS_IN vIn)
{
    VS_OUT vOut;

    // Transform to world space space.
    vOut.posW    = mul(float4(vIn.posL, 1.0f), gWorld);
    vOut.normalW = mul(float4(vIn.normalL, 0.0f), gWorld);

    // Transform to homogeneous clip space.
    vOut.posH = mul(float4(vIn.posL, 1.0f), gWVP);

    // Output vertex attributes for interpolation across triangle.
    vOut.texC  = mul(float4(vIn.texC, 0.0f, 1.0f), gTexMtx);
    vOut.diffuse = vIn.diffuse;
    vOut.spec    = vIn.spec;

    return vOut;
}

float4 PS(VS_OUT pIn) : SV_Target
{
    // Get materials from texture maps.
    float4 diffuse = gDiffuseMap.Sample( gTriLinearSam, pIn.texC );
    float4 spec    = gSpecMap.Sample( gTriLinearSam, pIn.texC );

    // Map [0,1] --> [0,256]
    spec.a *= 256.0f;

    // Interpolating normal can make it not be of unit length so normalize it.
    float3 normalW = normalize(pIn.normalW);

    // Compute the lit color for this pixel.
    SurfaceInfo v = {pIn.posW, normalW, diffuse, spec};
    float3 litColor;
    for(int i = 0; i < MaxLights; ++i)
    {
        if( i==0) // Parallel
        {
            //litColor += ParallelLight(v, gLight[i], gEyePosW); 
        }
        else // Point
        {
            litColor += PointLight(v, gLight[i], gEyePosW);
        }
    }
      return float4(litColor, diffuse.a);}

technique10 TexTech
{
    pass P0
    {
        SetVertexShader( CompileShader( vs_4_0, VS() ) );
        SetGeometryShader( NULL );
        SetPixelShader( CompileShader( ps_4_0, PS() ) );
    }
} 
```

光定义：

```
 myLight[1].ambient  = D3DXCOLOR(0.4f, 0.8f, 0.4f, 1.0f);
    myLight[1].diffuse  = D3DXCOLOR(1.0f, 1.0f, 1.0f, 1.0f);
    myLight[1].specular = D3DXCOLOR(1.0f, 1.0f, 1.0f, 1.0f);
    myLight[1].att.x    = 0.0f;
    myLight[1].att.y    = 0.1f;
    myLight[1].att.z    = 0.0f;
    myLight[1].range    = 50.0f; 
```

# mediawiki - 在 PHPDoc 中放置 wiki 标记的自定义输出转换器的位置

> ID：13571895
> 
> 赞同：0
> 
> 时间：2012-11-26T19:39:57.077
> 
> 标签：mediawiki, markup, confluence, phpdoc

我最近升级到 phpdoc 2 并想创建一个解决方案，用于将我的 api 输出到 wiki 标记，而不是 html 或 pdf。

在 /usr/share/php5/data/PhpDocumentor/Converters 中，我看到了 CHM、HTML、PDF 和 XML 文件夹。是否可以创建一个 WIKI 文件夹并将配置文件放在那里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:30:50.643

您确实可以在那里存储您的自定义输出转换器，但您还需要编写一个自定义扩展转换器类 - [http://manual.phpdoc.org/HTMLSmartyConverter/HandS/li_Converters.html](http://manual.phpdoc.org/HTMLSmartyConverter/HandS/li_Converters.html)

# c++ - C++：OpenGL、glm 和结构填充

> ID：13571898
> 
> 赞同：12
> 
> 时间：2012-11-26T19:40:15.113
> 
> 标签：c++, opengl, c++11, vertex-buffer

我可以安全地使用 glm::* 类型（例如 vec4、mat4）来填充顶点缓冲区对象吗？

```
std::vector<glm::vec3> vertices;    
glBufferData(GL_ARRAY_BUFFER,  sizeof(glm::vec3) * vertices.size(), &vertices[0], GL_STATIC_DRAW); 
```

我不太确定，因为 struct padding（成员对齐）在我看来可能会造成一些麻烦，尽管我测试过的所有编译器都会返回预期的大小。

我正在为 C++11 编译器开发（也许这会有所不同）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T20:01:32.650

定义“安全”。

C++ 为实现提供了广泛的空间来填充它们认为合适的结构。因此，就 ISO C++ 而言，这是否“有效”是依赖于实现的行为。

它通常适用于桌面平台的许多编译器。我不能说 ARM CPU，但一般来说，`glm::vec3`大小为 3 个浮点数。但是，如果你想确保，你总是可以执行一个简单的`static_assert`：

```
static_assert(sizeof(glm::vec3) == sizeof(GLfloat) * 3, "Platform doesn't support this directly."); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:45:45.887

是的，glm 是专门为此目的而设计和建造的。

# c++ - 将新对象作为默认参数传递给构造函数

> ID：13571899
> 
> 赞同：2
> 
> 时间：2012-11-26T19:40:23.447
> 
> 标签：c++, constructor, arguments, default-value

我有一个构造函数，它看起来像：

```
RandomClass(const int16_t var1, const SecondClass& var2); 
```

我需要将默认参数传递给第二个参数，所以目前我做这样的事情：

```
RandomClass(const int16_t var1, const SecondClass& var2 = *(new SecondClass(*(new std::unordered_map<int16_t, double>()))); 
```

这是非常尴尬的。请注意，我不想使用重载的构造函数，或者将第二个参数从引用更改为指针。

传递默认参数的优雅方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T19:49:48.250

您可以将 const 引用绑定到临时对象：

```
RandomClass(const int16_t var1, const SecondClass& var2 = SecondClass(std::unordered_map<int16_t, double>())); 
```

当然，这假设您要么复制`var2`到成员中，要么在构造函数退出后不使用它。如果不是这种情况，则说明您的设计有问题。也许使用原始指针或 a`shared/weak_ptr`更合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:51:43.597

很好地做到这一点的方法是为您的构造函数提供两个重载：

```
RandomClass(const int16_t var1, const SecondClass& var2)
{
  // ...
}

RandomClass(const int16_t var1)
{
  const SecondClass var2 = *(new SecondClass(*(new std::unordered_map<int16_t, double>()));
} 
```

然而，你有一个比它看起来更糟糕的问题。你在第二次重载中所拥有的东西是非常可怕的，因为它会导致内存泄漏——你需要你所拥有的`delete`一切，`new`但现在你已经失去了你`new`编辑的任何痕迹。您只需这样做：

```
RandomClass(const int16_t var1)
{
  const SecondClass var2{std::unordered_map<int16_t, double>()};
} 
```

`new`除非必须，否则不要使用- 更喜欢自动存储持续时间。

# algorithm - 硬币游戏的算法

> ID：13571900
> 
> 赞同：2
> 
> 时间：2012-11-26T19:40:26.673
> 
> 标签：algorithm

来玩个游戏：

一排有 n 叠硬币。第 i 个堆栈由 d_i 个硬币组成。两名玩家：Player1、Player2 交替移动。轮到他的玩家只能拿第一个堆栈或最后一个堆栈或两者。当没有硬币时，游戏结束。每个玩家都希望在最后拥有尽可能多的硬币。播放器 1 开始。

我想知道算法（听起来像贪心算法）来计算每个玩家在游戏结束时有多少硬币，而两者都处于最佳状态。

我不知道如何处理这样的算法。只是猜测策略还是有一些方法可以推断出来？或者，实现算法可能是一个太奇怪的问题？

示例（从第一个到第 n 个堆叠的硬币）：

1, 100, 1 - 玩家分别有 2 和 100 个硬币（不幸的是，第一个玩家只能拿第一个和最后一个筹码 - 第二个玩家总是拿 100 个硬币的筹码）

1, 1, 100, 1, 1, 5 - 玩家分别有 8 和 101 个硬币（我认为这是在最佳游戏之后 - 首先取 5 和 1，然后取 1 以防止玩家 1 拿 100 个硬币堆叠。如果玩家 1第一步拿不到 6 个硬币，他总是少于 8 个硬币）。

我希望我足够详细地说明问题。你同意这很有趣吗？:) 有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T22:20:27.330

添加到 *@Peter 的*动态编程解决方案：

我认为重复性看起来有点像以下：考虑到 Let

的硬币堆栈，表示 Player1 可能获得的最高分数。然后，`A[i,..j]`
`dp[i, j]`

```
dp[i, j] = MAX {
                MIN( dp[i+2, j], dp[i+1, j-1], dp[i+2, j-1]) + A[i], //Case when Player2 will try to make the most of it if Player1 picks ith coin.
                MIN( dp[i+1, j-1], dp[i, j-2], dp[i+1, j-2]) + A[j], //Case when Player2 will try to make the most of it if Player1 picks the jth coin.
                MIN( dp[i+2, j-1], dp[i+1, j-2], dp[i+2, j-2]) + A[i] + A[j] // Case when Player2 will try to make the most of it when Player1 picks both the ith and jth coins.
               } 
```

因为只有 N^2 种可能的游戏状态。它可以通过填充大小为 N^2 的 dp 表来实现。

对于 C++ 爱好者：

```
#include<iostream>
using namespace std;
int Solve(int A[], int N, int **dp, int i, int j){
        if(dp[i][j] != -1)
                return dp[i][j];
        if(j<i)
                return 0;
        else if(j==i)
                return A[i];
        else if( (j-i) == 1)
                return (A[i] + A[j]);
        else{
                int opt1 = min(Solve(A, N, dp, i+2, j), Solve(A, N, dp, i+1, j-1));
                opt1 = min(opt1, Solve(A, N, dp, i+2, j-1));
                int opt2 = min(Solve(A, N, dp, i+1, j-1), Solve(A, N, dp, i, j-2));
                opt2 = min(opt2, Solve(A, N, dp, i+1, j-2));
                int opt3 = min(Solve(A, N, dp, i+2, j-1), Solve(A, N, dp, i+1, j-2));
                opt3 = min(opt3, Solve(A, N, dp, i+2, j-2));
                int res = max(opt1+A[i], opt2+A[j]);
                res = max(res, opt3+A[i]+A[j]);
                dp[i][j] = res;
                return res;

        }
}
int main(){
        int N;
        int A[N];
        cin >> N;
        for(int i=0; i<N; ++i)
                cin >> A[i];
        int **dp;
        dp = new int* [N];
        for(int i=0; i<N; ++i)
                dp[i] = new int[N];
        for(int i=0; i<N; ++i)
                for(int j=0; j<N; ++j)
                        dp[i][j] = -1;
        Solve(A, N, dp, 0, N-1);
        cout << dp[0][N-1] << endl;
        for(int i=0; i<N; ++i)
                delete [] dp[i];
        delete []dp;
        return 0;
} 
```

此外，正如*@Peter*指出的那样，您对第二个示例的分析是错误的。Player1 实际上有一个策略可以通过获得 102 个硬币来赢得该游戏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:04:40.883

如果仅存在 a 到 b-1 范围内的堆栈，您可以通过 O(n^2) 中的动态编程解决此问题，即解决最佳策略的子问题。

Python代码：

```
A=[1, 1, 100, 1, 1, 5]
#A=[1, 100, 1]

cache={}
def go(a,b):
    """Find greatest difference between player 1 coins and player 2 coins when choosing from A[a:b]"""
    if a==b: return 0 # no stacks left
    if a==b-1: return A[a] # only one stack left
    key=a,b
    if key in cache:
        return cache[key]

    v=A[a]-go(a+1,b) # taking first stack
    v=max(v,A[b-1]-go(a,b-1)) # taking last stack
    v=max(v,A[a]+A[b-1]-go(a+1,b-1)) # taking both stacks

    cache[key]=v
    return v

v = go(0,len(A))
n=sum(A)
print (n+v)/2,(n-v)/2 
```

这就是说，第二种情况的最佳游戏实际上是第一个人只取最左边的 1。从那时起，他可以保证他会抓住 100，所以他赢了。

（玩家1胜102，玩家2胜7）

有 O(n^2) 个子博弈，所以这个算法需要时间 O(n^2)

子游戏（和最佳的第一玩家/第二玩家硬币）是：

```
 [1, 5] 6 0
 [1, 1] 2 0
 [1, 100] 101 0
 [100, 1] 101 0
 [1, 1] 2 0
 [1, 100, 1] 2 100
 [1, 1, 5] 6 1
 [100, 1, 1] 101 1
 [1, 1, 100] 101 1
 [100, 1, 1, 5] 105 2
 [1, 100, 1, 1] 101 2
 [1, 1, 100, 1] 101 2
 [1, 100, 1, 1, 5] 7 101
 [1, 1, 100, 1, 1] 102 2
 [1, 1, 100, 1, 1, 5] 102 7 
```

因此，例如，假设我们已经为较小的游戏找到了所有最佳玩法，并希望为 [1,1,100,1,1,5] 找到最佳玩法。

我们所做的只是依次考虑每一步：

1.  拿第一个筹码，这将使我们赢得 1，然后离开游戏 [1,100,1,1,5]，我们从子问题中知道，我们将赢得 101，总共 102。
2.  拿最后一个筹码，这将使我们赢得 5，然后离开游戏 [1,1,100,1,1] 只会为我们赢得额外的 2，总共 7。
3.  拿两个筹码，这将使我们赢 6，然后离开游戏 [1,100,1,1] 如果玩家 2 发挥最佳，我们只会再赢 2，总共 8

所以最好的做法是只拿第一堆。

# git - 尽量不忽略里面有文件的子文件夹

> ID：13571901
> 
> 赞同：1
> 
> 时间：2012-11-26T19:40:26.660
> 
> 标签：git

我创建了这条路径`~/.vim/foo/bar/my_file`，并在其中`.gitignore`添加了这一行：

```
!.vim/**/* 
```

我预计当我这样做时`~$ git status`，`foo/`或`bar/`文件夹已添加到新内容列表中，但没有..

文件夹除了文件夹`foo/`没有任何东西`bar/`。

这是我的`~/.gitignore`文件：

```
*
!*/
!.vim/*
!.vim/**/* 
```

任何人都知道如何不忽略`my_file`？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-27T20:06:23.693

我在这里没有看到问题。你应该不需要添加任何东西`.gitignore`。`my_file`

```
$ git init
Initialized empty Git repository in /home/Steven/.git/

$ mkdir -p .vim/foo/bar

$ touch .vim/foo/bar/my_file

$ git add .vim

$ git ls-files
.vim/foo/bar/my_file 
```

# c# - 在 WPF Datagrid 的新行中隐藏单元格

> ID：13571902
> 
> 赞同：6
> 
> 时间：2012-11-26T19:40:40.933
> 
> 标签：c#, wpf, datagrid

我有一个 WPF Datagrid，它有一个如下定义的模板列：

```
<DataGridTemplateColumn x:Name="ciDelete" Header="Delete">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <Button x:Name="btnDelete" HorizontalAlignment="Center" Margin="0" Click="btnDelete_Click" Tag="{Binding Path=ciID}" VerticalAlignment="Center">
                <Image Source="Resources/16x16/delete.png" Stretch="Fill" />
            </Button>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

这显示和工作得很好。但是，该按钮显示在新项目的行中（如下）。由于这是一个删除按钮，我不希望它显示在“新项目”行上。

![按钮显示在](../Images/783f3fcbd3d68acffbe9294ce521d4f0.png)

我已经看过[这篇](http://blogs.msdn.com/b/vinsibal/archive/2008/11/05/wpf-datagrid-new-item-template-sample.aspx)关于设置新行样式的文章，但这似乎有点极端。我很好奇是否有一种更简单的方法可以仅隐藏“新行”上的按钮。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T20:32:29.530

如果是我，我会编写一个快速转换器来确定 DataGridRow 的数据上下文是否为 NewItemPlaceholder：

```
public class IsNamedObjectVisibilityConverter : IValueConverter
{

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value.GetType().Name == "NamedObject")
        {
            return Visibility.Hidden;
        }
        else
        {
            return Visibility.Visible;
        }

    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

} 
```

然后我会在 Delete Button Visibility 添加一个 RelativeSource 绑定：

```
<DataGridTemplateColumn x:Name="ciDelete" Header="Delete">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <Button x:Name="btnDelete" HorizontalAlignment="Center" Margin="0" Click="btnDelete_Click" Tag="{Binding Path=ciID}" VerticalAlignment="Center"
                 Visibility="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=DataGridRow}, Path=DataContext, Converter={StaticResource IsNamedObjectVisibilityConverter}}">
                <Image Source="Resources/16x16/delete.png" Stretch="Fill" />
            </Button>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

这可能是也可能不是最好的方法，但它应该有效。

我希望这有帮助。

编辑：我希望很明显，为了简洁起见，我跳过了创建所述转换器实例的部分。此示例假设您有一个按类的确切名称的 Converter 实例。可能很明显，但值得一提。:)

# c - strcmp 什么时候不会返回 -1、0 或 1？

> ID：13571907
> 
> 赞同：2
> 
> 时间：2012-11-26T19:41:30.200
> 
> 标签：c, strcmp

从手册页：

> 如果发现 s1（或其前 n 个字节）分别小于、匹配或大于 s2，则 strcmp() 和 strncmp() 函数返回一个小于、等于或大于零的整数.

C 中的示例代码（`-15`在我的机器上打印，交换 test1 和 test2 反转值）：

```
#include <stdio.h>
#include <string.h>

int main() {
    char* test1 = "hello";
    char* test2 = "world";
    printf("%d\n", strcmp(test1, test2));
} 
```

~~我发现[这段代码](http://www.cs.bell-labs.com/cm/cs/pearls/longdup.c)（取自[这个问题](https://stackoverflow.com/questions/13560037/effcient-way-to-find-longest-duplicate-string-for-python-from-programming-pearl/13560449#13560449)）依赖于 strcmp 的值，而不是 -1、0 和 1（它使用中的返回值`qsort`）。对我来说，这是一种糟糕的风格，并且取决于未记录的功能。~~

我想我有两个相关的问题：

*   C 标准中是否有定义返回值除了小于、大于或等于零之外的内容吗？如果不是，标准实现是做什么的？
*   Linux、Windows 和 BSD 的返回值是否一致？

**编辑：**

离开我的电脑 5 分钟后，我意识到有问题的代码实际上没有错误。我在阅读评论/答案之前删除了我想出的部分，但我把它们留在那里以保持评论的相关性。我认为这仍然是一个有趣的问题，并且可能会导致习惯于总是返回 -1、0 或 1 的其他语言的程序员打嗝（例如 Python 似乎这样做，但它没有以这种方式记录）。

FWIW，我认为依赖记录行为以外的东西是不好的风格。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T19:44:48.570

> C 标准中是否有定义返回值除了小于、大于或等于零之外的内容吗？

不，最严格的约束是它应该为零、小于零或大于零，[如此特定函数的文档中](http://pubs.opengroup.org/onlinepubs/009695399/functions/strcmp.html)所指定。

> 如果不是，标准实现是做什么的？

没有“标准实现”之类的东西。即使有，也可能只是

```
return zero, less than zero or more than zero; 
```

:-)

> Linux、Windows 和 BSD 的返回值是否一致？

我可以确认从 10.7.4 开始，它在 Linux 和 OS X 上是一致的（具体来说，它是 -1、0 或 +1）。我对 Windows 一无所知，但我敢打赌微软人使用 -2 和 +3 只是为了破解代码：P

另外，我还要指出，您完全误解了代码的作用。

> 我发现这段代码（取自这个问题）依赖于 strcmp 的值，而不是 -1、0 和 1（它使用 qsort 中的返回值）。对我来说，这是一种糟糕的风格，并且取决于未记录的功能。

不，它实际上没有。C 标准库的设计考虑了一致性和易用性。也就是说，`qsort()`需要的是它的比较器函数返回负数或正数或零 - 正是`strcmp()`保证要做的事情。所以这不是“糟糕的风格”，它是完全符合标准的代码，不依赖于未记录的特性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T19:45:44.997

在 C99 标准中，[§7.21.4.2`strcmp`功能](http://port70.net/~nsz/c/c99/n1256.html#7.21.4.2)：

> 该函数返回一个*大于、等于或小于零*`strcmp`的整数，相应地，因为指向的字符串大于、等于或小于指向的字符串。*`s1``s2`*

 *^(*重点补充。*)

这意味着标准不保证`-1`,`0`或`1`; 它可能因操作系统而异。

`w`您获得的价值是和`h`which is之间的差异`15`。

在你的情况下，`hello`这就是为什么返回-15。`world``'h'-'w' = -15 < 0``strcmp`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-26T19:53:07.913

> • 除了小于、大于或等于零之外，C 标准中是否有定义返回值的内容？如果不是，标准实现是做什么的？

不，正如您自己提到的手册页所说`less than, equal to, or greater than zero`的那样，标准也是如此。

> • Linux、Windows 和 BSD 的返回值是否一致？

不。

在带有 gcc 的 Linux（OpenSuSE 12.1，内核 3.1）上，我得到`-15`/`15`取决于 if `test1`or `test2`is first。在 Windows 7（VS 2010）上，我得到`-1`/ `1`。

基于 的松散定义`strcmp()`，两者都很好。

* * *

> ...这依赖于 strcmp 的值不是 -1、0 和 1（它使用 qsort 中的返回值）。

对您来说一个有趣的附注...如果您查看 [`qsort()`](http://linux.die.net/man/3/qsort)手册页，该示例与您使用发布的贝尔代码几乎相同`strcmp()`。需要比较器功能的原因`qsort()`实际上**非常**适合从以下返回`strcmp()`：

> 如果认为第一个参数分别小于、等于或大于第二个参数，则比较函数必须返回**小于、等于或大于零**的整数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T20:06:42.837

在[此](http://pubs.opengroup.org/onlinepubs/7908799/xsh/strcmp.html)页面中：

> strcmp() 函数将 s1 指向的字符串与 s2 指向的字符串进行比较。非零返回值的符号由被比较的字符串中不同的第一对字节（均解释为类型无符号字符）的值之间的差异符号确定。

[这](http://freebsd.active-venture.com/FreeBSD-srctree/newsrc/libkern/strcmp.c.html)是**FreeBSD中****strcmp**的实现。

 **```
#include <string.h>

/*
 * Compare strings.
 */
int
strcmp(s1, s2)
    register const char *s1, *s2;
{
    while (*s1 == *s2++)
        if (*s1++ == 0)
            return (0);
    return (*(const unsigned char *)s1 - *(const unsigned char *)(s2 - 1));
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-26T19:56:02.170

实际上， 的返回值`strcmp`很可能是第一个不同位置的字节值之间的差异，这仅仅是因为返回这个差异比执行额外的条件分支将其转换为 -1 或 1 更有效. 不幸的是，已知[一些损坏的软件会假设结果适合 8 位，从而导致](http://www.mysql.com)[严重的漏洞](https://communities.coverity.com/blogs/security/2012/07/19/more-defects-like-the-mysql-memcmp-vulnerability)。简而言之，除了结果的符号之外，你不应该使用任何东西。

有关这些问题的详细信息，请阅读我上面链接的文章：

[https://communities.coverity.com/blogs/security/2012/07/19/more-defects-like-the-mysql-memcmp-vulnerability](https://communities.coverity.com/blogs/security/2012/07/19/more-defects-like-the-mysql-memcmp-vulnerability)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-26T19:46:00.630

从手册页：

> 返回值 如果 s1（或其前 n 个字节）分别小于、匹配或大于，则 strcmp() 和 strncmp() 函数返回一个小于、等于或大于零的整数比s2。

它只指定它大于或小于 0，没有说明具体值，我想这些是特定于实现的。

> 符合 SVr4、4.3BSD、C89、C99。这说明它包含在哪些标准中。该函数必须存在并按照指定的方式运行，但规范没有说明实际返回的值，因此您不能依赖它们。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-26T19:46:11.720

C 标准中没有任何内容涉及返回的值`strcmp()`（即，除了该值的*符号*）：

> **7.21.4.2 strcmp 函数**
> 
> **概要**
> 
> ```
> #include <string.h>
> int strcmp(const char *s1, const char *s2); 
> ```
> 
> **描述**
> 
> strcmp 函数将 s1 指向的字符串与 s2 指向的字符串进行比较。
> 
> **退货**
> 
> strcmp 函数返回一个大于、等于或小于零的整数，相应地，因为 s1 指向的字符串大于、等于或小于 s2 指向的字符串。

因此很明显，使用除了返回值的符号之外的任何东西都是不好的做法。***

# java - 如何使用 Java 连接到 WSDL 服务？

> ID：13571911
> 
> 赞同：2
> 
> 时间：2012-11-26T19:41:52.073
> 
> 标签：java, service, web

我想使用 Java 获得日终股票报价，并获得了一个显示 xml 的 WSDLurl。

我在这个主题上找到的所有地方都想向我展示如何创建服务，这很复杂。我想要做的就是连接到 url 并获取数据。

此链接似乎很接近，但仍想生成一些 xml 代码。

[http://axis.apache.org/axis2/java/core/tools/eclipse/wsdl2java-plugin.html](http://axis.apache.org/axis2/java/core/tools/eclipse/wsdl2java-plugin.html)

任何人都有一个简单的 java 示例，您可以从 WSDL url 获取数据？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:54:12.603

我强烈建议使用类似[http://cxf.apache.org/docs/wsdl-to-java.html](http://cxf.apache.org/docs/wsdl-to-java.html)的东西。否则，您将面临尝试处理 SOAP 协议的所有痛苦，以及所有相关的怪癖和麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T14:18:17.633

您可以使用`wsimport`.

*   复制粘贴解决方案

`wsimport -keep http://localhost:9999/ws/hello?wsdl`

*   [教程](http://www.mkyong.com/webservices/jax-ws/jax-ws-hello-world-example/)

# git - 开发环境 - 远程本地服务器和 Git 存储库

> ID：13571912
> 
> 赞同：1
> 
> 时间：2012-11-26T19:41:57.037
> 
> 标签：git, environment

作为我的主计算机，我使用的是 Windows PC。在我的开发中，我使用本地基于 Linux 的服务器来托管我的项目。我还使用 PHPStorm 作为我的主要 IDE——创建启用了自动上传功能的远程项目。

我想开始使用 Git 作为 VCS - 已经在 Github 上有一个帐户，现在需要一个建议。我应该在哪里存储我的回购协议？在我的 Windows 机器或我的 Linux 服务器上。我支持第二种选择——尤其是当我的 IDE 不断将所有内容上传到服务器但想知道您的意见时。

您通常如何解决此类问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T22:57:18.450

第一点是决定你的行尾策略，这很可能是回购中的 LF。

您可能会选择 Gihub 存储库作为主要的中央存储库，因为它实际上是一个裸存储库（您不会直接在那里做任何工作）。

您需要记住在从每个系统（家庭 Windows/工作 Linux）签名之间将最新更新推送到您的中央 Github 存储库。在这种情况下，您可以在同一分支上连续工作，因为它将是连续的。

或者，如果您自己的机器可以在线访问，您实际上可以从每台机器上推送和拉取，但是在单独的分支上这样做，这样它们就不会相互冲突（您不能推送到已签出的分支，但您可以推送到其他分支）。

您还可以携带记忆棒并`git bundle`用于最大程度的备份和运动鞋网功能。

# javascript - 无法在 Windows 8 应用程序运行时显示/隐藏 html 元素

> ID：13571913
> 
> 赞同：1
> 
> 时间：2012-11-26T19:42:08.107
> 
> 标签：javascript, jquery, windows-8

我正在使用 jQuery 制作 Windows 8 应用程序 (JavaScript)。但是 Visual Studio 不允许我显示或隐藏不同的元素（div、span 等），并且出现以下错误消息：

> 无法添加动态内容 ' 脚本试图注入动态内容或以前动态修改的元素，这可能是不安全的。比如使用innerHTML属性添加脚本或者畸形的HTML都会产生这个异常。使用toStaticHTML方法过滤动态内容，或者使用createElement等方法显式创建元素和属性。

我刚刚写了以下代码：

```
$(document).ready(function () {
    $('#names').fadeIn();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T19:46:49.407

Windows 8 安全模型不允许通过`innerHTML`或类似功能将动态内容添加到 DOM。不幸的是，当您将 jQuery 包含到您的页面中时（在 的设置期间），这种情况会发生几次`jQuery.support`。

唯一的解决方案是重写部分 jQuery（这可能很烦人），或者通过 appendTo使用已经为 Windows 8 重新配置的 jQuery 版本，例如[jQuery for Windows 8 。](https://github.com/appendto/jquery-win8)

完全披露，我参与了这个特定的项目。

# java - 方法 Color(int RGB) 似乎是未知的

> ID：13571914
> 
> 赞同：2
> 
> 时间：2012-11-26T19:42:20.360
> 
> 标签：java, colors, 2d, rgb

```
 public class Object2D
/**
 * A TwoD_Object contains two ints resembling its width and height,
 * and a Color-Array constructed by them. That Array, contains the
 * information about every possible point that could be used in the
 * boundaries, set by int width and int height.
**/
{
int width;
int height;
Color PointInformation[][];
public void convertImageTo2DObject(BufferedImage image) {
      this.width = image.getWidth();
      this.height = image.getHeight();
      this.PointInformation = new Color[width][height];

  for (int row = 0; row < height; row++) {
     for (int col = 0; col < width; col++) {
        this.PointInformation[row][col] = Color(image.getRGB(col, row));
     }
  }

 } 
```

我在写一个类，它象征着一个 2D 对象。每个对象都有一个 height 和一个 width 属性以及一个大小为 [width][height] 的二维颜色数组，该数组实际上包含由 width 和 height 设置的边界内每个可能点的颜色。到目前为止，我写了一些方法，正确地将点或线等简单的东西绘制到对象中，但现在我想将图片转换为我的二维对象规范。

为此，首先计算importet BufferedImage 的高度和宽度，

```
this.width = image.getWidth();
this.height = image.getHeight(); 
```

然后是对象的 PointInformation 的重新创建，图像被复制到该对象上。

```
 this.PointInformation = new Color[width][height]; 
```

现在两个 for 循环在导入图片中的任何像素上运行，

```
for (int row = 0; row < height; row++) {
 for (int col = 0; col < width; col++) { 
```

并且理论上将每个像素的 RGB 值（转换为颜色）分配到对象 PointInformation 中的正确位置。

```
this.PointInformation[row][col] = Color(image.getRGB(col, row));
 } 
```

}

现在这里的问题是，Netbeans 中的编译器告诉我：

```
Cannot find symbol  
 symbol: method Color(int)  
 location: class Object2D 
```

所以它在某种程度上与这条线有问题：

```
this.PointInformation = new Color[width][height]; 
```

但我不明白这是什么问题！我已经做了

```
import java.awt.Color;
import java.awt.image.BufferedImage; 
```

（即使你在这里看不到），我什至试过

```
import java.awt.*; 
```

但它也没有用，仍然告诉我它不知道那种方法。

**如果您能告诉我我做错了什么，我将不胜感激！谢谢！**

# android - onStop 在 onStart 之前调用

> ID：13571917
> 
> 赞同：6
> 
> 时间：2012-11-26T19:42:27.247
> 
> 标签：android, wakelock, activity-lifecycle

我有一个从 AlarmManager 调用的活动。这是一条警报消息。

当从 Key Guard 调用 Activity 时，生命周期从 onCreate -> onStart -> onResume -> onPause -> onStop 回到 onCreate -> onStart -> onResume。

由于它是一个警报活动，我已将 MediaPlayer.stop 行放在 Activity 的 onStop 内，但现在警报声在它开始后立即停止。

如果我将 MediaPlayer.stop 放在 onDestroy 中，我会得到正确的行为，但如果用户按下主页按钮，活动就会消失并且声音会继续播放。

任何人都可以说出为什么在这种情况下调用 onPause 和 onStop ？

**编辑：**在日志中进行一些调查后，我发现了这一行：

```
11-26 17:39:01.273: I/ActivityManager(385): Activity reported stop, but no longer stopping: ActivityRecord{41827a90 u0 net.xisberto.workschedule/.AlarmMessageActivity} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-16T21:07:55.733

好的，一年多后我意识到这个问题从来没有得到答案，虽然我必须处理这个问题，所以这里是：

现在我正在启动`MediaPlayer`during `onResume`，但如果它已经在播放，我不会再次启动它：

```
@Override
protected void onResume() {
    super.onResume();
    ...
    if (!mMediaPlayer.isPlaying()) {
        mMediaPlayer.start();
    }
    ...
} 
```

我在 Activity 期间停止它`onStop`，但前提是 Activity `isFinishing`：

```
@Override
protected void onStop() {
    super.onStop();
    if (isFinishing()) {
        if (mMediaPlayer != null) {
            mMediaPlayer.stop();
            mMediaPlayer.release();
            mMediaPlayer = null;
        }
    } else {
        ...
    }
} 
```

由于在所描述的情况下 Activity 没有完成，而是重新启动（我认为是配置更改），所以 MediaPlayer 不会停止。

我的代码不完全一样，因为我使用了一些其他功能，并且我使用通知将用户带回活动。完整代码在这里：[https ://github.com/xisberto/workschedule/blob/master/src/net/xisberto/work_schedule/AlarmMessageActivity.java](https://github.com/xisberto/workschedule/blob/master/src/net/xisberto/work_schedule/AlarmMessageActivity.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:44:18.040

您可能在未处理此事件的情况下旋转了设备。

您可以通过对清单进行少量修改来处理此问题：

```
<activity android:name=".MyActivity"
      android:configChanges="orientation"
      android:label="@string/app_name"> 
```

# java - 从 Java Servlet 调用 JADE 代理？

> ID：13571922
> 
> 赞同：2
> 
> 时间：2012-11-26T19:42:45.920
> 
> 标签：java, servlets, agents-jade

谁能告诉我如何从 Java Servlet 调用 JADE 代理？我应该使用 JADEGatewayAgent 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T02:43:03.157

是的，您需要使用[JadeGateway](http://jade.tilab.com/doc/api/jade/wrapper/gateway/JadeGateway.html)类。这是很好的[教程](http://jade.cselt.it/doc/tutorials/JadeGateway.pdf)

可以从[这里](http://people.inf.elte.hu/kelemen/jade/JadeGateWaySimple_source.zip)下载源代码，除了 eclipse 中的一些小配置，应用程序应该可以立即运行。

# java - 如何为 javax.xml.ws Web 服务客户端指定连接和读取超时？

> ID：13571924
> 
> 赞同：1
> 
> 时间：2012-11-26T19:42:53.510
> 
> 标签：java, web-services, applet, axis

我有一个发出 Web 服务调用的小程序（我相信 AXIS2 ），我需要设置连接并读取超时值。

我的搜索返回

```
((BindingProvider)myservice).getRequestContext().put(BindingProviderProperties, 60 * 1000); 
```

和

```
((BindingProvider)myservice).getRequestContext().put("com.sun.xml.ws.request.timeout", 60 * 1000); 
```

这些可能适用于 CXF (com.sun.xml.ws)，但不适用于 AXIS (javax.xml.ws)。切换堆栈不是一种选择。

有人在 AXIS WS 客户端中设置了连接和读取超时吗？

# php - MYSQL：在一个表中搜索用户ID以搜索其他2个表中的数据，然后显示所有3个表中的数据

> ID：13571932
> 
> 赞同：-4
> 
> 时间：2012-11-26T19:43:34.390
> 
> 标签：php, mysql, join, union

我有一个数据库，其条目类似于以下内容......

```
用户：
+-----+------+----------+---------+--------+
| 识别码 | 姓名 | 地址 | 城市 | 状态 |
+-----+------+----------+---------+--------+
| 1 | 约翰 | 101 主线 | 奥斯汀 | 德克萨斯州 |
| 2 | 约翰 | 101 主线 | 休斯顿 | 德克萨斯州 |
| 3 | 约翰 | 101 主线 | 德尔里奥 | 德克萨斯州 |
| 4 | 约翰 | 101 主线 | 休斯顿 | 德克萨斯州 |
+-----+------+----------+---------+--------+

确认：
+-----+---------------+--------------+
| 识别码 | 许可证优先3 | 许可证最后3 |
+-----+---------------+--------------+
| 1 | 第554章 122 |
| 2 | 第556章 345 |
| 3 | 555 | 382 |
| 4 | 555 | 108 |
+-----+---------------+--------------+

section_user_map：
+-----+------------+----------+
| 识别码 | 部分 ID | 完成日期 |
+-----+------------+----------+
| 1 | 65 | 2012-05-12 05:05:15 |
| 2 | 72 | 2012-05-06 14:03:15 |
| 3 | 65 | 2012-05-09 16:13:15 |
| 4 | 72 | 2012-05-06 18:14:15 |
+-----+------------+----------+

```

我需要能够搜索在 X 天中午和 Y 天中午之间完成了第 65 部分的学生。我还需要显示学生的姓名、地址、城市、州以及他们的执照号码的前三位和后三位。我相信这将需要左连接和联合命令，但制定起来有点太复杂了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:54:32.987

```
SELECT *
FROM   section_user_map
  JOIN users        USING (UID)
  JOIN verification USING (UID)
WHERE  SectionID = 65
   AND CompleteDate BETWEEN '2012-05-09 12:00:00'
                        AND '2012-05-11 12:00:00' 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/25a7c/1/0)上查看。

不需要`UNION`。仅当您仍想为不存在于一个或两个表中的用户返回结果时，才需要外部`users`联接`verification`。

# java - 如果文件及其父目录为空，则删除它们。（爪哇）

> ID：13571940
> 
> 赞同：4
> 
> 时间：2012-11-26T19:44:07.383
> 
> 标签：java, java-7, java-io

我正在尝试做一个简单的方法来删除一个文件，如果它们是空的，直到它到达一个基本目录，但我不能让它工作。

它删除了文件，它的父目录，但是它的下一个父目录并没有被删除，因为它抛出了一个`DirectoryNotEmptyException`. 它确实是空的，因为只有一个子目录，并且在上一次迭代中被删除。

所以，文件被删除，它的父文件被删除，它停在那里，没有更多的上层目录被删除。

编辑：（修改代码）

删除目录似乎有延迟，所以在下一次检查目录的空状态时，之前的还没有删除。所以我添加了一个while循环来检查直到目录不存在。我不知道这是否是一种糟糕的技术，但它可以满足我的需求。

```
public static void removeFileAndParentsIfEmpty(Path path) throws IOException {
    if(path == null || path.endsWith(FilesPath.BILLS_DIRECTORY)) {
        return;
    }
    if (Files.isRegularFile(path)){
        Files.deleteIfExists(path);
    } else if (Files.isDirectory(path)){
        if(path.toFile().list().length == 0){
            Files.delete(path);
            while(Files.exists(path));
        }else{
            return;
        }
    } else {
        return;
    }
    removeFileAndParentsIfEmpty(path.getParent());
} 
```

如果有人能给出更好的解决方案，这个问题仍然有待批准。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T19:49:19.907

您没有空目录的基本条件，因此在第二次遍历您的递归函数时，它会尝试在目录本身之前删除空目录父级。一个简单的代码更改应该足以解决这个问题：

```
public static void removeFileAndParentsIfEmpty(Path path)
        throws IOException {
    if(path == null || path.endsWith(BASEPATH)) return;

    if (Files.isRegularFile(path)) {
        Files.deleteIfExists(path);
    } else if(Files.isDirectory(path)) {
        try {
            Files.delete(path);
        } catch(DirectoryNotEmptyException e) {
            return;
        }
    }

    removeFileAndParentsIfEmpty(path.getParent());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:04:31.847

我建议你的问题在这里

```
Files.delete(path.getParent());
removeFileAndParentsIfEmpty(path.getParent()); 
```

您删除父文件夹，再次调用您的方法以尝试删除相同的文件夹......因为它不再存在，第二个调用只是失败并存在而不做任何事情。

我还会添加一个签入以查看目录是否为空，但你是对的，异常会捕获它，我只是认为这是一种不好的做法，并且你正在寻找的条件异常 - 恕我直言

# git - git svn - 无法识别的 URL 方案错误

> ID：13571944
> 
> 赞同：14
> 
> 时间：2012-11-26T19:44:14.467
> 
> 标签：git, svn, git-svn

尝试使用 git svn 克隆 svn rep 时出现以下错误：

```
eugene$ git svn clone https://my.site/svn/ here
Initialized empty Git repository in /Users/eugene/Documents/workspace/test/here/.git/
Bad URL passed to RA layer: Unrecognized URL scheme for 'https://my.site/svn' at /usr/local/git/lib/perl5/site_perl/Git/SVN.pm line 148. 
```

`svn checkout https://my.site/svn/`工作得很好。

我重新跑了

```
cpan SVN::Core 
```

并安装完成，但仍然出现错误。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-13T17:23:50.207

显然，您有两个不同版本的 Subversion 二进制文件，其中一个版本不支持`http(s)://`协议。

如果你运行`svn --version`输出应该包括这样的东西：

```
* ra_neon : Module for accessing a repository via WebDAV protocol using Neon.
  - handles 'http' scheme
  - handles 'https' scheme 
```

或者

```
* ra_serf : Module for accessing a repository via WebDAV protocol using serf.
  - handles 'http' scheme
  - handles 'https' scheme 
```

问题是`git-svn`不使用相同的二进制文件。相反，它使用另一个版本的 SVN，该版本*编译*时不支持 http(s):// 协议。这可能有不同的原因：

1.  如果`svn --version -q`prints `1.7.x`，很可能您的 Git 安装太旧而无法使用此版本的 SVN。因此，您可能希望将其升级为`git-svn`支持 SVN 1.7 的最新版本。

2.  如果您的默认 SVN 安装没有安装 Perl 绑定，则 SVN::Core 使用不支持 http(s) 的二进制文件作为后备。因此，您可能希望为 SVN 启用 Perl 绑定。

3.  最后，由于 Perl 模块的一些错误配置，PATH/LD_LIBRARY_PATH 或 PERL5LIB（或任何`git-svn`用于查找库的工具——我在这里不是专家），`git-svn`只使用了无效的二进制文件。

解决问题的具体步骤取决于您如何管理软件包，例如使用 Homebrew 时看起来像这样：

```
$ brew remove svn
$ brew install --with-perl svn 
```

或者

```
$ brew remove git
$ brew install git 
```

或者使用 MacPorts 是这样的：

```
$ port install subversion-perlbindings 
```

或者

```
$ port upgrade git-core +svn 
```

之后尝试指定正确的库路径。例如，如果`which svn`prints `/usr/local/bin/svn`，尝试将`/usr/local/lib`其用作 Perl 模块的库路径。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:51:03.143

你可以做：`git svn --version`

看到这个问题：[如何升级git-svn使用的SVN版本](https://stackoverflow.com/questions/4341159/how-to-upgrade-the-svn-version-used-by-git-svn)

**更新**

请注意，此答案是针对问题的发布者原始版本，其中问题可能与使用 in 的旧版本`svn`有关`git-svn`。此后，发布者升级了 git，确定这不是原因，并调整了问题以反映这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T16:42:54.543

这可能与 SVN::Core perl 库或 XCode 命令行工具更新的不兼容有关。

您可以尝试在本地升级它：

```
cpan SVN::Core 
```

或全球：

```
sudo cpan SVN::Core 
```

或者如果您使用的是 brew，请尝试通过 brew 安装它：

```
brew install --perl subversion
brew reinstall git 
```

如果它仍然不起作用，请检查我们的 PERL5LIB 变量：

```
echo $PERL5LIB 
```

如果它设置为您不想要的东西，您可以取消设置以进行测试：

```
unset PERL5LIB 
```

如果有帮助，请找到已定义的文件（例如 ~/.profile）并将其从那里删除。

* * *

如果您有多个 perl 库，您可以在`~/.profile`文件中指定 PERL5LIB 环境变量，例如

```
export PERL5LIB="/Users/my_user/perl5/lib/perl5:/Library/Perl/5.16:/Applications/Xcode.app/Contents/Developer/Library/Perl/5.16" 
```

有时问题只是在于将 PERL5LIB 指向旧版本的 perl 库，例如 5.12 而不是 5.16。

查找所有 SVN::Core 实例的简单方法，您可以尝试：

```
sudo /usr/libexec/locate.updatedb # Only for the first time
locate Core.pm | grep Core.pm$ 
```

相关文章：

*   [已解决：git svn Broken in Mavericks（或 Mountain Lion）](http://blog.victorquinn.com/fix-git-svn-in-mountain-lion)
*   [使用 PERL5LIB 环境变量](http://modperlbook.org/html/3-9-2-2-Using-the-PERL5LIB-environment-variable.html)
*   [如何在系统级别将目录添加到 Perl 库路径？](https://stackoverflow.com/questions/2518679/how-can-i-add-a-directory-to-the-perl-library-path-at-the-system-level)
*   [外星人-SVN](http://search.cpan.org/~mlanier/Alien-SVN/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-01T12:00:28.577

当我在将 MacOS 升级到 Mojave 后再次遇到这个错误时，我想我也可以像以前那样做这个技巧`brew reinstall git`，就像我对接受的答案发表评论一样。

但不幸的是我失败了。我搜索的任何其他信息都无法为我提供帮助。所以我通过截断安装工件来完全卸载 git。

```
$ cd /usr/local
$ sudo rm -fr git
$ sudo rm -fr /usr/bin/git* 
```

**现在通过brew**安装最新版本的 git/git-svn ：

```
$ brew install git
$ git --version
 git version 2.19.2
$ brew install git-svn 
```

安装完成后，我进入项目的根目录并检查它是否可以工作：

```
$ cd <my project's root dir>
$ git svn rebase
 here output the repository updates 
```

git-svn pull 信息最终显示给我，这意味着它再次起作用。

现在版本信息是：

```
$ git --version
 git-svn version 2.19.2 (svn 1.10.0) 
```

之前是：

```
$ git svn --version
git-svn version 2.19.0 (svn 1.8.11) 
```

# matlab - 用于加载文件的 MATLAB 类

> ID：13571948
> 
> 赞同：1
> 
> 时间：2012-11-26T19:44:21.813
> 
> 标签：matlab, matlab-class

这里是 MATLAB 初学者。我正在尝试编写一个将从文件夹中加载图像的类，这就是我所拥有的：

```
classdef ImageLoader
    %IMAGELOADER Summary of this class goes here
    %   Detailed explanation goes here

    properties
        currentImage = 0;
        filenames={};
        filenamesSorted={};
    end

    methods
        function imageLoader = ImageLoader(FolderDir)
            path = dir(FolderDir);
            imageLoader.filenames = {path.name};
            imageLoader.filenames = sort(imageLoader.filenames);
        end

        function image = CurrentImage(this)
            image = imread(this.filenames{this.currentImage});
        end

        function image = NextImage(this)
            this.currentImage = this.currentImage + 1;
            image = imread(this.filenames{this.currentImage});
        end
    end    
end 
```

这就是我所说的：

```
i = ImageLoader('football//Frame*');
image=i.NextImage;

imshow(image); 
```

这些文件被命名为 Frame0000.jpg、Frame0001.jpg ... 等等。我希望构造函数加载所有文件名，这样我就可以通过调用来检索下一个文件`i.NextImage`，但我无法让它工作。

* * *

得到它的工作。

班级：

```
classdef ImageLoader
    %IMAGELOADER Summary of this class goes here
    %   Detailed explanation goes here

    properties(SetAccess = private)
        currentImage
        filenames
        path
        filenamesSorted;
    end

    methods
        function imageLoader = ImageLoader(Path,FileName)
            imageLoader.path = Path;
            temp = dir(strcat(Path,FileName));
            imageLoader.filenames = {temp.name};
            imageLoader.filenames = sort(imageLoader.filenames);
            imageLoader.currentImage = 0;
        end

        function image = CurrentImage(this)
            image = imread(this.filenames{this.currentImage});
        end

        function [this image] = NextImage(this)
            this.currentImage = this.currentImage + 1;
            image = imread(strcat(this.path,this.filenames{this.currentImage}));
        end
    end    
end 
```

称呼：

```
i = ImageLoader('football//','Frame*');
[i image]=i.NextImage;

imshow(image); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:48:00.613

AFAIK 你不能改变一个对象的状态（就像你在*增加*指针时所做的那样`currentimage`），除非最后明确地更新对象本身的值。AFAIK 每个函数调用都传递对象 byval，这意味着`NextImage`只修改了本地副本`this`（它不是当前对象的指针/引用，而是副本）。

因此，您可以做的就是将您的方法编写为

```
 function [this image] = NextImage(this)
        this.currentImage = this.currentImage + 1;
        image = imread(this.filenames{this.currentImage});
  end 
```

并将其称为

```
 [i image]=i.NextImage; 
```

# xcode - UIPopover 按钮重复动作

> ID：13571949
> 
> 赞同：1
> 
> 时间：2012-11-26T19:44:31.130
> 
> 标签：xcode, uipopovercontroller, uistoryboard

我正在使用 UIPopover 为 iPad 创建应用程序。我有一个主视图，我从中调用两个显示不同信息的弹出框。我遵循[如何关闭 Storyboard Popover](https://stackoverflow.com/questions/8287242/how-to-dismiss-a-storyboard-popover)线程和另一个线程中的指导方针，除了一件事，一切正常。在我的弹出窗口中，我有一个按钮可以触发父视图上的操作。即使仅单击一次按钮并且仅打开了一次弹出窗口，有时也会多次触发该操作。我的第一个假设是弹出框正在缓存来自多个调用的一些数据，但问题似乎只是随机出现的。

我的配置是：Mac OSx Snow Leopard with Xcode 4.2, iOS 5.0。在模拟器中测试，iPad 5.1 和 iPad 6.0 的结果都一样。

我有主视图**视图 1**和弹出视图**视图 2**

在我的视图 2 中，我有一个方法 ProceedButtonClicked，它将通知发送到视图 1

```
- (IBAction) ProceedButtonClicked{
    [[NSNotificationCenter defaultCenter] postNotificationName:@"proceedButtonClicked" object:self];
} 
```

该方法绑定到弹出视图中的按钮。在 view1（父视图）中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
[[NSNotificationCenter defaultCenter] addObserver:self   selector:@selector(ButtonClicked:) name:@"proceedButtonClicked" object:nil];
}

- (void) ButtonClicked:(NSNotification *) notification {
NSLog(@"I'm here ...");
//dismiss popover
if (paramPopover)
    [paramPopover dismissPopoverAnimated:YES];
} 
```

我对 iPad 开发还很陌生，所以也许我的代码中缺少一些明显的东西，但到目前为止搜索结果一无所获。任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:52:33.873

使用通知时，您可能会冒一个类的多个实例回答同一个通知的风险，因此，如果您有 2 个控制器由于某种原因处于活动状态（内存管理不佳？），那么当按下按钮时，2 个控制器将接听电话，您将有一个重复的行动。

按钮可以有一个特定的回调分配给它们，通过代码设置它非常简单：

如果您的按钮是 UIButton，您可以像这样设置目标操作：

```
[button addTarget:self action:@selector(buttonAction:) forControlEvents:UIControlEventTouchUpInside]; 
```

如果您的按钮是 UIBarButtonItem，则在创建它时设置目标

```
[[UIBarButtonItem alloc] initWithTitle:@"Title" style:UIBarButtonItemStyleBordered target:self action:@selector(buttonAction:)]; 
```

编辑：

`NSLog(@"I'm here ...");` 太吓人了 ...

# asp.net - 需要使用 SqlTableProfileProvider 的多值配置文件属性

> ID：13571955
> 
> 赞同：1
> 
> 时间：2012-11-26T19:44:44.370
> 
> 标签：asp.net, asp.net-membership, asp.net-profiles, profile-provider, netsqlazman

在我的 ASP.Net Framework 4 Web 应用程序项目（VS 2010）中，我使用的是 SqlTableProfileProvider（[http://www.asp.net/downloads/sandbox/table-profile-provider-samples](http://www.asp.net/downloads/sandbox/table-profile-provider-samples)）。我让它与一组自定义属性（如 FirstName、LastName、FavoritePizzaTopping 等）配合得非常好。

但是，我想实现一个 ArrayList、List、Dictionary 或 Collection 类型的多值配置文件属性（以推荐为准）。

该属性将存储与用户关联的品牌列表。我在数据库中有一个存储 UserId 和 BrandId 的表，但我不确定如何实现这个概念。

我查看了[http://msdn.microsoft.com/en-us/library/d8b58y5d(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/d8b58y5d(v=vs.100).aspx)但**我的属性未在 web.config 中定义，它们在 ProfileCommon : ProfileBase 中定义**。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Profile;
using System.Web.Security;
using AbcProfileProvider;

namespace Abc.Profiles
{
    public class ProfileCommon : ProfileBase
    {
        public static ProfileCommon GetProfile()
        {
            return Create(HttpContext.Current.Request.IsAuthenticated ?
               HttpContext.Current.User.Identity.Name : HttpContext.Current.Request.AnonymousID,
               HttpContext.Current.Request.IsAuthenticated) as ProfileCommon;
        }

        public static ProfileCommon GetUserProfile(string username)
        {
            return Create(username) as ProfileCommon;
        }

        public static ProfileCommon GetUserProfile()
        {
            return Create(Membership.GetUser().UserName) as ProfileCommon;
        }

        [CustomProviderData("FirstName;nvarchar")]
        public string FirstName
        {
            get { return ((string)(base["FirstName"])); }
            set { base["FirstName"] = value; Save(); }
        }

        [CustomProviderData("LastName;nvarchar")]
        public string LastName
        {
            get { return ((string)(base["LastName"])); }
            set { base["LastName"] = value; Save(); }
        }

        [CustomProviderData("Address1;nvarchar")]
        public string Address1
        {
            get { return ((string)(base["Address1"])); }
            set { base["Address1"] = value; Save(); }
        }

        [CustomProviderData("Address2;nvarchar")]
        public string Address2
        {
            get { return ((string)(base["Address2"])); }
            set { base["Address2"] = value; Save(); }
        }

        [CustomProviderData("City;nvarchar")]
        public string City
        {
            get { return ((string)(base["City"])); }
            set { base["City"] = value; Save(); }
        }

        [CustomProviderData("State;nvarchar")]
        public string State
        {
            get { return ((string)(base["State"])); }
            set { base["State"] = value; Save(); }
        }

        [CustomProviderData("ZipCode;nvarchar")]
        public string ZipCode
        {
            get { return ((string)(base["ZipCode"])); }
            set { base["ZipCode"] = value; Save(); }
        }

        [CustomProviderData("Phone;nvarchar")]
        public string Phone
        {
            get { return ((string)(base["Phone"])); }
            set { base["Phone"] = value; Save(); }
        }

        [CustomProviderData("Fax;nvarchar")]
        public string Fax
        {
            get { return ((string)(base["Fax"])); }
            set { base["Fax"] = value; Save(); }
        }

        [CustomProviderData("Email;nvarchar")]
        public string Email
        {
            get { return ((string)(base["Email"])); }
            set { base["Email"] = value; Save(); }
        }

        [CustomProviderData("Brands")]
        public List<Brand> Brands
        {
            get { return ((List<Brand>)(base["Brands"])); }
            set { base["Brands"] = value; Save(); }
        }

        [CustomProviderData("Territories")]
        public List<Territory> Territories
        {
            get { return ((List<Territory>)(base["Territories"])); }
            set { base["Territories"] = value; Save(); }
        }
    }
} 
```

我相信解决方案位于 SqlProfileProvider.cs 中，但我不确定如何实现它，以下是该文件中的两种方法（我会发布整个文件，但存在限制）：

```
 public override SettingsPropertyValueCollection GetPropertyValues(SettingsContext context, SettingsPropertyCollection collection) {
        SettingsPropertyValueCollection svc = new SettingsPropertyValueCollection();

        if (collection == null || collection.Count < 1 || context == null)
            return svc;

        string username = (string)context["UserName"];
        if (String.IsNullOrEmpty(username))
            return svc;

        SqlConnection conn = null;
        try {
            conn = new SqlConnection(_sqlConnectionString);
            conn.Open();

            GetProfileDataFromTable(collection, svc, username, conn);
        }
        finally {
            if (conn != null) {
                conn.Close();
            }
        }

        return svc;
    }

    private void GetProfileDataFromTable(SettingsPropertyCollection properties, SettingsPropertyValueCollection svc, string username, SqlConnection conn) {
        List<ProfileColumnData> columnData = new List<ProfileColumnData>(properties.Count);
        StringBuilder commandText = new StringBuilder("SELECT u.UserID");
        SqlCommand cmd = new SqlCommand(String.Empty, conn);

        int columnCount = 0;
        foreach (SettingsProperty prop in properties) {
            SettingsPropertyValue value = new SettingsPropertyValue(prop);
            svc.Add(value);

            string persistenceData = prop.Attributes["CustomProviderData"] as string;
            // If we can't find the table/column info we will ignore this data
            if (String.IsNullOrEmpty(persistenceData)) {
                // REVIEW: Perhaps we should throw instead?
                continue;
            }
            string[] chunk = persistenceData.Split(new char[] { ';' });
            if (chunk.Length != 2) {
                // REVIEW: Perhaps we should throw instead?
                continue;
            }
            string columnName = chunk[0];
            string columnType = chunk[1];

            if (columnType == "Table")
            {
                continue;
            }
            // REVIEW: Should we ignore case?
            SqlDbType datatype = (SqlDbType)Enum.Parse(typeof(SqlDbType), chunk[1], true);

            columnData.Add(new ProfileColumnData(columnName, value, null /* not needed for get */, datatype));
            commandText.Append(", ");
            commandText.Append("t."+columnName);
            ++columnCount;
        }

        commandText.Append(" FROM "+_table+" t, vw_aspnet_Users u WHERE u.ApplicationId = '").Append(AppId);
        commandText.Append("' AND u.UserName = LOWER(@Username) AND t.UserID = u.UserID");
        cmd.CommandText = commandText.ToString();
        cmd.CommandType = CommandType.Text;
        cmd.Parameters.AddWithValue("@Username", username);
        SqlDataReader reader = null;

        try {
            reader = cmd.ExecuteReader();
            //If no row exists in the database, then the default Profile values
            //from configuration are used.
            if (reader.Read()) {
                Guid userId = reader.GetGuid(0);
                for (int i = 0; i < columnData.Count; ++i) {
                    object val = reader.GetValue(i+1);
                    ProfileColumnData colData = columnData[i];
                    SettingsPropertyValue propValue = colData.PropertyValue;

                    //Only initialize a SettingsPropertyValue for non-null values
                    if (!(val is DBNull || val == null))
                    {
                        propValue.PropertyValue = val;
                        propValue.IsDirty = false;
                        propValue.Deserialized = true;
                    }
                }

                // need to close reader before we try to update the user
                if (reader != null) {
                    reader.Close();
                    reader = null;
                }

                UpdateLastActivityDate(conn, userId);
            }
        }
        finally {
            if (reader != null) {
                reader.Close();
            }
        }
    } 
```

这是 web.config 的相关部分：

```
<membership>
  <providers>
    <clear />
    <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
  </providers>
</membership>
<profile enabled="true" defaultProvider="TableProfileProvider" inherits="Abc.Profiles.ProfileCommon, AbcProfileProvider">
  <providers>
    <clear />
    <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />
    <add name="TableProfileProvider" type="Abc.ProfileProviders.SqlTableProfileProvider, AbcProfileProvider" connectionStringName="ApplicationServices" table="MembershipProfiles" applicationName="/" />
    <add name="StoredProcedureProfileProvider" type="Abc.ProfileProviders.SqlStoredProcedureProfileProvider, AbcProfileProvider" connectionStringName="ApplicationServices" setProcedure="setCustomProfileData" readProcedure="getCustomProfileData" applicationName="/" />
  </providers>
</profile>
<roleManager defaultProvider="NetSqlAzManRoleProvider" enabled="true" cacheRolesInCookie="false" cookieName=".ASPROLES" cookieTimeout="30" cookiePath="/" cookieRequireSSL="false" cookieSlidingExpiration="true" cookieProtection="All">
  <providers>
    <clear />
    <add connectionStringName="ApplicationServices" applicationName="/" name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" />
    <add applicationName="/" name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" />
    <add name="NetSqlAzManRoleProvider" type="NetSqlAzMan.Providers.NetSqlAzManRoleProvider" connectionStringName="NetSqlAzManConnectionString" storeName="Abc Authorization Store" applicationName="The App" userLookupType="DB" defaultDomain="" UseWCFCacheService="False" />
  </providers>
</roleManager> 
```

我希望 StackOverflow 上的某个人已经实现了类似的东西，或者可以为我指明正确的方向。

谢谢！

# java - 如何将 int 分配给 String 变量？

> ID：13571957
> 
> 赞同：1
> 
> 时间：2012-11-26T19:44:48.643
> 
> 标签：java, string, variables, int

我目前正在为 Java 分配任务，但我被卡住了。我必须从三个参数中生成生日：日、月和年，它们是 numbers = int。有了这个，我必须对有效日期进行一些检查。我认为这部分已经完成，但我陷入了以下困境：

我想要一个 if 语句来检查这一天，如果这一天是正确的，则应该运行这段代码

```
if (dag >=1 && dag <=31) 
{
    datum = dag; 
} 
```

`datum`是一个字符串，因为我想得到这样的日期：DD-MM-YYY 并且`dag`是一个 Int。因此，每当我尝试编译它时，BlueJ 在这部分都会给出一个错误，说“不兼容的类型”。我认为这是因为我尝试将 Int 放在 String 中。这是否有可能，因为我不知道如何。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T19:47:43.077

不要让它成为一个字符串。它不是。我觉得你应该

1.  创建一个[Date](http://docs.oracle.com/javase/1.5.0/docs/api/java/sql/Date.html)对象来表示您的日期（日/月/年组合）
2.  使用[SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)以适当的格式打印该日期

这是正确的OO方式。否则，您最终会得到一堆不同的断开连接的变量，它们组合起来表示某种对象类型，但是您不能原子地操作它们，调用它们的方法等。将所有内容都保存为字符串称为字符串*类型*（与*强类型相反）打字*）并且是一种特别糟糕的代码气味！

在某个阶段，请查看[Joda-Time](http://joda-time.sourceforge.net/)以获得比上面建议的更好的日期/时间 API。但是，目前我怀疑您的盘子已经足够了，而无需下载额外的罐子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T19:46:00.407

使用`String.valueOf`方法转换`int`为`string`： -

```
int i = 32;
String str = String.valueOf(i); 
```

当然，请遵循[@Brian 的回答](https://stackoverflow.com/a/13572002/1679863)中的建议，了解您应该在自己的情况下做什么。

# flash - Flash 对象是否需要最小宽度/高度才能初始化？

> ID：13571958
> 
> 赞同：1
> 
> 时间：2012-11-26T19:44:52.813
> 
> 标签：flash, internet-explorer

我刚刚注意到，在旧版浏览器（如 IE 6、7、8、FF 3.6）中，如果对象的大小小于 9x9 像素，则 Flash 不会初始化。我不记得自己过去曾遇到过这个问题，当时那些恐龙主宰了网络。你？

那个尺寸是多少？您能否分享一个指向该主题更深入的资源的链接？

**更新：**我刚刚检查过，Silverlight 似乎没有这样的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T06:27:36.867

如果要使用相机，则每个浏览器中的 flash 对象至少需要为 215x138。我记得 IE 中有一个最小尺寸，但找不到来源。无论如何，也许这些信息会有所帮助；您可以使用`wmode="transparent"`. 您不能使用`display:none`or `visibility`(css)，因为这样闪存不会执行或动作较慢。为了确保它继续运行，请将它`position:fixed`（css）放在页面的角落或其他地方。浏览器使 Flash 对象在屏幕外或非活动时（即在非活动选项卡中）以一种睡眠模式运行（较慢）

我认为这是用 swf 制作垫片的一种方法。它的位置很重要。

顺便说一句，我不建议使用silverlight，它的穿透力很低。

带摄像头的源最小窗口大小：http: [//help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Camera.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Camera.html)

# java - Java Spring - 如何使用类路径来指定文件位置？

> ID：13571960
> 
> 赞同：34
> 
> 时间：2012-11-26T19:44:53.870
> 
> 标签：java, spring, classpath

如何使用类路径来指定 Spring 项目中文件的位置？

这是我目前拥有的：

```
FileReader fr = new FileReader("C:\\Users\\Corey\\Desktop\\storedProcedures.sql"); 
```

这是硬编码到我的桌面的。我想要的是能够使用我项目中文件的路径。

```
FileReader fr = new FileReader("/src/main/resources/storedProcedures.sql"); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-26T19:48:21.173

我们在谈论标准[`java.io.FileReader`](http://docs.oracle.com/javase/7/docs/api/java/io/FileReader.html)吗？不会工作，但没有它并不难。

`/src/main/resources`maven 目录内容放置在 CLASSPATH 的根目录中，因此您可以使用以下方法简单地检索它：

```
InputStream is = getClass().getResourceAsStream("/storedProcedures.sql"); 
```

如果结果不是`null`（找不到资源），请随意将其包装在阅读器中：

```
Reader reader = new InputStreamReader(is); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-04-27T16:43:41.303

来自@NimChimpsky 在[类似问题](https://stackoverflow.com/a/22097153/491245)中的回答：

```
Resource resource = new ClassPathResource("storedProcedures.sql");
InputStream resourceInputStream = resource.getInputStream(); 
```

使用[ClassPathResource](http://docs.spring.io/spring/docs/4.0.x/api/org/springframework/core/io/ClassPathResource.html)和接口[Resource](http://docs.spring.io/spring/docs/4.0.x/api/org/springframework/core/io/Resource.html)。并确保您正确添加资源目录（添加`/src/main/resources/`到类路径中）。

请注意， Resource 有一种获取方法，`java.io.File`因此您也可以使用：

```
Resource resource = new ClassPathResource("storedProcedures.sql");
FileReader fr = new FileReader(resource.getFile()); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-26T21:27:10.047

Spring 有 org.springframework.core.io.Resource 专为这种情况而设计。从 context.xml 您可以将类路径传递给 bean

```
<bean class="test.Test1">
        <property name="path" value="classpath:/test/test1.xml" />
    </bean> 
```

你把它作为资源放在你的bean中：

```
public void setPath(Resource path) throws IOException {
    File file = path.getFile();
    System.out.println(file);
    } 
```

输出

```
D:\workspace1\spring\target\test-classes\test\test1.xml 
```

现在您可以在 new FileReader(file) 中使用它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T19:48:39.373

看起来你有 Maven 项目，所以资源在类路径中

去做

```
getClass().getResource("classpath:storedProcedures.sql") 
```

# c++ - 使用受保护的析构函数删除对象

> ID：13571968
> 
> 赞同：3
> 
> 时间：2012-11-26T19:45:30.063
> 
> 标签：c++, c++11, shared-ptr

我必须为类编写一个共享指针，并且它必须做的许多其他事情是确保它可以删除它指向的对象。

我如何编写一个可以与具有受保护析构函数的对象一起使用的解决方案？

此外，如果对象是使用placement new 创建的，我不应该调用`delete`该对象，因为该空间可能仍在使用中（`delete`调用是否有效？）。我怎样才能发现这种情况？

规范的相关位：

> `void reset();` 智能指针被设置为指向空指针。当前指向的对象的引用计数（如果有）将递减。
> 
> Sptr(); 构造一个指向空指针的智能指针。
> 
> `template <typename U> Sptr(U *);` 构造一个指向给定对象的智能指针。引用计数被初始化为 1。
> 
> `Sptr(const Sptr &);
> template <typename U> Sptr(const Sptr<U> &);`
> 引用计数增加。如果 U * 不能隐式转换为 T *，这将导致语法错误。请注意，必须提供正常的复制构造函数和成员模板复制构造函数才能正确操作。

代码调用方式：

```
 Sptr<Derived> sp(new Derived);
        char *buf = (char *) ::operator new(sizeof(Sptr<Base1>));
        Sptr<Base1> &sp2 = *(new (buf) Sptr<Base1>());
        sp2 = sp;
        sp2 = sp2;
        sp.reset();
        sp2.reset();
        ::operator delete(buf); 
```

`Base1`一切都受到保护。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T19:59:12.400

使析构函数非公开的全部目的是防止对象被任意销毁。没有什么好的方法可以解决这个问题。（即使有一个通用的方法，这也不是一个*好*方法，因为它需要打破封装才能做到这一点。）

如果您希望一个对象被除它自己以外的某个类销毁，请将析构函数设为公共。如果您不这样做，那么您的指针类也将无法销毁该对象。

或者，您可以使指针类成为您希望它使用的任何类的朋友。但这在很多方面都很丑陋，尤其是它相当武断地限制了您可以使用的对象的有效类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T20:20:33.023

与引用计数器一起存储指向将删除对象的函数的指针（“删除器”）。您将在智能指针的模板化构造函数中实例化删除器，在那里您知道派生类型。这是一个非常幼稚的伪代码：

```
template<class T> void DefaultDeleter(void *p) { delete static_cast<T*>(p); }

struct ref_counter {
    int refs;
    void *p;
    void (*d)(void *);
};

template<class T> class Sptr { 
    /* ... */
    template <typename U> Sptr(U *p)
    {
        _c = new ref_counter;
        _c->refs = 1;
        _c->p = static_cast<void*>(p);
        _c->d = &DefaultDeleter<U>;
        _p = p;
    }

    T *_p;
    ref_counter *_c;
}; 
```

当下`refs`降到零时，调用`(*_c->d)(_c->p)`以销毁指向的对象。

我当然假设 的析构函数`Base`是受保护的，而其中的一个`Derived`是公开的，否则该练习毫无意义。

**注意：**这就是为什么`std::shared_ptr`可以安全地与具有非虚拟析构函数的基类一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T19:53:03.863

您的类可以采用一个删除器函子，然后该函子将负责解除分配对象。通过这样做，您可以将访问析构函数的问题转嫁给使用您的课程的任何人。:)

开个玩笑，如果调用者知道如何创建类的实例，他们也应该知道如何销毁这些实例。

这也将提供一种解决与放置相关的问题的方法`new`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T20:13:31.197

阅读您的规范更新后，我可以告诉您，没有办法正确实施，因为：

*   您的指针无法区分新案例和放置新案例。你的删除器唯一能做的就是调用`delete p`. 在放置新的情况下，这*不是*正确的做法，尽管它可能在您的示例中有效，因为缓冲区恰好是正确的大小并且分配有`new`.
*   正如其他答案中所解释的，您的删除器没有解决受保护的析构函数问题的好方法。

通过向构造函数添加自定义删除器的可能性，您将解决这两个问题。

**编辑：**这是添加自定义删除器的方式：

> `template <typename U> Sptr(U *, std::function<void(T*)> &&deleter);` 构造一个指向给定对象的智能指针。引用计数被初始化为 1。当引用计数达到零且指向实例的原始指针时调用自定义删除器。

# php - 为什么我不能得到这个 textarea 的值？

> ID：13571970
> 
> 赞同：1
> 
> 时间：2012-11-26T19:45:32.093
> 
> 标签：php, html, textarea

我的代码中有这一行来更新该文本区域中的先前数据（有先前的值）

```
$campo[2]='<textarea rows="3" name="desc_'.$exec->fields['recordId'].'_2" textarea_val="'.$exec->fields['description'].'" maxlength="500">'; 
```

但是当我在我的网页中使用那个框时，以前的值消失了......为什么？我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T19:47:06.327

textarea 没有 value 属性：

```
<textarea row="3" name="textarea_name">value</textarea> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:47:41.497

正确的语法是：

```
$campo[2]='<textarea rows="3" name="desc_'.$exec->fields['recordId'].'_2" maxlength="500">'.$exec->fields['description'].'</textarea>'; 
```

# background - Cocos 2d 背景地图手势

> ID：13571975
> 
> 赞同：1
> 
> 时间：2012-11-26T19:45:52.923
> 
> 标签：background, cocos2d-iphone, gesture

Cocos2d 对我来说很新，所以我不知道我应该如何处理这种情况：

我想做一款冒险的游戏。现在我制作了一个像世界地图一样的背景图像（只是为了测试）。在这张地图上，我想要一个滑动手势，这样我就可以在我的 ipad 上的地图上移动（地图很大，所以我想左右滑动它）。

我的问题是我不知道我应该使用什么对象。以及如何以最佳方式实现手势（我需要自己计算运动吗？）。

谢谢！斯特凡。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T19:14:16.867

您可以将 UIKit 的平移手势识别器连接到 CCDirector 的视图并在 CCLayer 类中处理平移手势。这样，您就可以使用 handle 方法，该方法会随着每次平移移动而移动背景。（cocos2d 1.0.1的代码，2.0版本类似）

```
UIPanGestureRecognizer* pan = [[[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePanGesture:)] autorelease];
CCDirector* director = [CCDirector sharedDirector];
[[director openGLView] addGestureRecognizer:pan]; 
```

处理程序方法如下所示：

```
- (void)handlePanGesture:(UIGestureRecognizer*)gestureRecognizer {
 // If there is more than one pan gesture recognizer connected with this method, you should remember pan and check if gestureRecognizer is equal to pan 

 switch (gestureRecognizer.state) {
    case UIGestureRecognizerStateBegan: {

        // Do something that needs to be done when pan gesture started

        break;
    }
    case UIGestureRecognizerStateChanged: {

        // Get pan gesture recognizer translation
        CGPoint translation = [(UIPanGestureRecognizer*)gestureRecognizer translationInView:gestureRecognizer.view];

        // Invert Y since position and offset are calculated in gl coordinates
        translation = ccp(translation.x, -translation.y);

        // Here you should move your background, probably in oposite direction of translation vector, something like
        background.position = ccp(background.position.x - translation.x, background.position.y - translation.y);

        // Refresh pan gesture recognizer
        [(UIPanGestureRecognizer*)gestureRecognizer setTranslation:CGPointZero inView:gestureRecognizer.view];

        break;
    }
    case UIGestureRecognizerStateEnded: {

        // Do some work that should be done after panning is finished

        break;
    }
    default:
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-26T20:03:55.173

我想你正在寻找这个来添加一个对象：

```
CCSprite *objectName = [CCSprite spriteWithFile:@"fileName.png"];
    [self addChild:objectName]; 
```

默认情况下，我相信对象会在左下角。

# hadoop - sqoop 导入 hbase 没有写入记录

> ID：13571976
> 
> 赞同：0
> 
> 时间：2012-11-26T19:45:55.203
> 
> 标签：hadoop, hbase, sqoop

## 我目前正在使用 Cloudera CDH4 VM。

一切似乎都在工作。下面是我的输出。导入声称成功，但没有写入任何记录。我已经附上了导入的输出。[

```
cloudera@ap00134-vip ~]$ hbase shell
12/11/26 18:53:41 WARN conf.Configuration: hadoop.native.lib is deprecated. Instead, use io.native.lib.available
HBase Shell; enter 'help<RETURN>' for list of supported commands.
Type "exit<RETURN>" to leave the HBase Shell
Version 0.92.1-cdh4.1.1, rUnknown, Tue Oct 16 12:01:17 PDT 2012

hbase(main):001:0>

[cloudera@ap00134-vip ~]$ sqoop version
Sqoop 1.4.1-cdh4.1.1
git commit id b0c34454234e5246b4ef345694d7e1a5904f00fe
Compiled by jenkins on Tue Oct 16 12:17:51 PDT 2012
[cloudera@ap00134-vip ~]$

sqoop import --connect jdbc:oracle:thin:@//154.11.169.116:1521/bigdata  --table BIGDATA_SMALL_RAW --username test --hbase-create-table --hbase-table t1 --column-family cf --columns DSERVER_COMPUTER --hbase-row-key ROWKEY -m 1

12/11/26 18:41:12 INFO zookeeper.ZooKeeper: Client environment:java.library.path=/usr/lib/hadoop/lib/native
12/11/26 18:41:12 INFO zookeeper.ZooKeeper: Client environment:java.io.tmpdir=/tmp
12/11/26 18:41:12 INFO zookeeper.ZooKeeper: Client environment:java.compiler=<NA>
12/11/26 18:41:12 INFO zookeeper.ZooKeeper: Client environment:os.name=Linux
12/11/26 18:41:12 INFO zookeeper.ZooKeeper: Client environment:os.arch=amd64
12/11/26 18:41:12 INFO zookeeper.ZooKeeper: Client environment:os.version=2.6.32-220.23.1.el6.x86_64
12/11/26 18:41:12 INFO zookeeper.ZooKeeper: Client environment:user.name=cloudera
12/11/26 18:41:12 INFO zookeeper.ZooKeeper: Client environment:user.home=/home/cloudera
12/11/26 18:41:12 INFO zookeeper.ZooKeeper: Client environment:user.dir=/home/cloudera
12/11/26 18:41:12 INFO zookeeper.ZooKeeper: Initiating client connection, connectString=localhost:2181 sessionTimeout=180000 watcher=hconnection
12/11/26 18:41:12 INFO zookeeper.ClientCnxn: Opening socket connection to server localhost.localdomain/127.0.0.1:2181\. Will not attempt to authenticate using SASL (Unable to locate a login configuration)
12/11/26 18:41:12 INFO zookeeper.ClientCnxn: Socket connection established to localhost.localdomain/127.0.0.1:2181, initiating session
12/11/26 18:41:12 INFO zookeeper.ClientCnxn: Session establishment complete on server localhost.localdomain/127.0.0.1:2181, sessionid = 0x13b2fc047340058, negotiated timeout = 40000
12/11/26 18:41:12 INFO zookeeper.RecoverableZooKeeper: The identifier of this process is 29089@ap00134-vip.osc.tac.net
12/11/26 18:41:13 WARN conf.Configuration: hadoop.native.lib is deprecated. Instead, use io.native.lib.available
12/11/26 18:41:13 INFO zookeeper.ZooKeeper: Initiating client connection, connectString=localhost:2181 sessionTimeout=180000 watcher=catalogtracker-on-org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@71257687
12/11/26 18:41:13 INFO zookeeper.ClientCnxn: Opening socket connection to server localhost.localdomain/127.0.0.1:2181\. Will not attempt to authenticate using SASL (Unable to locate a login configuration)
12/11/26 18:41:13 INFO zookeeper.ClientCnxn: Socket connection established to localhost.localdomain/127.0.0.1:2181, initiating session
12/11/26 18:41:13 INFO zookeeper.ClientCnxn: Session establishment complete on server localhost.localdomain/127.0.0.1:2181, sessionid = 0x13b2fc047340059, negotiated timeout = 40000
12/11/26 18:41:13 INFO zookeeper.RecoverableZooKeeper: The identifier of this process is 29089@ap00134-vip.osc.tac.net
12/11/26 18:41:13 INFO zookeeper.ClientCnxn: EventThread shut down
12/11/26 18:41:13 INFO zookeeper.ZooKeeper: Session: 0x13b2fc047340059 closed
12/11/26 18:41:13 INFO mapreduce.HBaseImportJob: Creating missing HBase table t1
12/11/26 18:41:17 INFO mapreduce.JobSubmitter: number of splits:1
12/11/26 18:41:17 WARN conf.Configuration: mapred.job.classpath.files is deprecated. Instead, use mapreduce.job.classpath.files
12/11/26 18:41:17 WARN conf.Configuration: mapred.cache.files is deprecated. Instead, use mapreduce.job.cache.files
12/11/26 18:41:17 WARN conf.Configuration: mapred.job.name is deprecated. Instead, use mapreduce.job.name
12/11/26 18:41:17 WARN conf.Configuration: mapred.cache.files.timestamps is deprecated. Instead, use mapreduce.job.cache.files.timestamps
12/11/26 18:41:17 WARN conf.Configuration: mapred.working.dir is deprecated. Instead, use mapreduce.job.working.dir
12/11/26 18:41:18 INFO mapred.ResourceMgrDelegate: Submitted application application_1353715862141_0011 to ResourceManager at /0.0.0.0:8032
12/11/26 18:41:18 INFO mapreduce.Job: The url to track the job: http://ap00134-vip.osc.tac.net:8088/proxy/application_1353715862141_0011/
12/11/26 18:41:18 INFO mapreduce.Job: Running job: job_1353715862141_0011
12/11/26 18:41:27 INFO mapreduce.Job: Job job_1353715862141_0011 running in uber mode : false
12/11/26 18:41:27 INFO mapreduce.Job:  map 0% reduce 0%
12/11/26 18:41:50 INFO mapreduce.Job:  map 100% reduce 0%
12/11/26 18:41:50 INFO mapreduce.Job: Job job_1353715862141_0011 completed successfully
12/11/26 18:41:50 INFO mapreduce.Job: Counters: 27
        File System Counters
                FILE: Number of bytes read=120
                FILE: Number of bytes written=93711
                FILE: Number of read operations=0
                FILE: Number of large read operations=0
                FILE: Number of write operations=0
                HDFS: Number of bytes read=87
                HDFS: Number of bytes written=0
                HDFS: Number of read operations=1
                HDFS: Number of large read operations=0
                HDFS: Number of write operations=0
        Job Counters
                Launched map tasks=1
                Other local map tasks=1
                Total time spent by all maps in occupied slots (ms)=182000
                Total time spent by all reduces in occupied slots (ms)=0
        Map-Reduce Framework
                Map input records=21
                Map output records=21
                Input split bytes=87
                Spilled Records=0
                Failed Shuffles=0
                Merged Map outputs=0
                GC time elapsed (ms)=93
                CPU time spent (ms)=1910
                Physical memory (bytes) snapshot=140869632
                Virtual memory (bytes) snapshot=721960960
                Total committed heap usage (bytes)=126877696
        File Input Format Counters
                Bytes Read=0
        File Output Format Counters
                Bytes Written=0
12/11/26 18:41:50 INFO mapreduce.ImportJobBase: Transferred 0 bytes in 36.6957 seconds (0 bytes/sec)
12/11/26 18:41:51 INFO mapreduce.ImportJobBase: Retrieved 21 records.

hbase(main):005:0> scan '.META.'
ROW                                                  COLUMN+CELL
 t1,,1353973273247.a173f168bb6ffabbcf78837cd3f5234b. column=info:regioninfo, timestamp=1353973273268, value={NAME => 't1,,1353973273247.a173f168bb6ffabbcf78837cd3f5234b.', STARTKEY => '', ENDKEY => '', ENCOD
                                                     ED => a173f168bb6ffabbcf78837cd3f5234b,}
 t1,,1353973273247.a173f168bb6ffabbcf78837cd3f5234b. column=info:server, timestamp=1353973273287, value=ap00134-vip.osc.tac.net:56831
 t1,,1353973273247.a173f168bb6ffabbcf78837cd3f5234b. column=info:serverstartcode, timestamp=1353973273287, value=1353715834683
1 row(s) in 0.0140 seconds

hbase(main):006:0> scan 't1'
ROW                                                  COLUMN+CELL
0 row(s) in 0.0160 seconds

hbase(main):007:0> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T10:28:23.363

我写了如下它对我有用

sqoop import --connect "jdbc:sqlserver://(hostname or IP);database=dbname;username=sa;password=sqlserver" --table DimCustomer --hbase-create-table --hbase-table "HbasetableName" - -column-family cf --hbase-row-key "表的主键列" -m 1

# c++ - 信号处理期间的堆损坏

> ID：13571980
> 
> 赞同：4
> 
> 时间：2012-11-26T19:46:07.090
> 
> 标签：c++, windows, multithreading, signals, heap-corruption

我有一个正在处理的多线程 Windows 服务器，发现当我通过 control-c 关闭程序时出现一组特定条件后，它崩溃了。如果我的服务器从客户端接收到数据包，然后我使用 control-c，它就会崩溃。如果我启动我的服务器，让它等待任何时间的数据包，然后使用 control-c，它会正确退出。

但奇怪的是，即使程序确实抛出异常（除非这是正常的），我的所有线程都报告它们以状态 0 退出。

```
First-chance exception at 0x75A16DA7 (kernel32.dll) in server.exe: 0x40010005: Control-C.
HEAP[server.exe]: HEAP: Free Heap block 96a818 modified at 96a908 after it was freed
server.exe has triggered a breakpoint.
The thread 0xc34 has exited with code 0 (0x0).
The thread 0x1c64 has exited with code 0 (0x0).
The thread 0xdbc has exited with code 0 (0x0).
The thread 0x117c has exited with code 0 (0x0).
The thread 0x1444 has exited with code 0 (0x0).
The thread 0x1d60 has exited with code 0 (0x0).
The thread 0x798 has exited with code 0 (0x0).
The thread 0x700 has exited with code 0 (0x0).
The thread 0x1bbc has exited with code 0 (0x0).
The thread 0x1b74 has exited with code 0 (0x0).
The program '[7528] server.exe' has exited with code 0 (0x0). 
```

似乎是导致此问题的部分代码：

```
void handleSignal(int sig) {
    std::unique_lock<std::mutex> lock(signalMutex); // <-- comment out and it doesn't crash
    signaled = true;
    _receivedSignal = sig;
    signalHandlerCondition.notify_one(); // <-- comment out and it doesn't crash
} 
```

互斥量和条件变量都是全局变量：

```
std::mutex signalMutex;
std::condition_variable signalHandlerCondition; 
```

我有一个专用的信号处理线程，当它收到该事件的通知时，它会尝试优雅地关闭服务器。

```
void run() {
    while (gContinueRunning && _continueRunning) {
        std::unique_lock<std::mutex> lock(signalMutex);
        signalHandlerCondition.wait(lock);
        if (signaled) {
            gContinueRunning = false;
            signaled = false;
            Server::stop();
        }
    }
} 
```

当然，当我注释掉有问题的行时，程序根本不会响应信号。我可以有一个wait_for，这样我就不必通知信号处理循环它有一个新信号，但我认为这不是最好的方法。

我确实从 MSDN 中读到了一些关于信号的内容：

> 当发生 CTRL+C 中断时，Win32 操作系统会生成一个新线程来专门处理该中断。
> 
> 因为在发生中断时通常会异步调用信号处理程序例程，所以当运行时操作不完整且处于未知状态时，您的信号处理程序函数可能会获得控制权。

老实说，我不确定这是否适用于这种情况。如果是这样，这是否意味着在调用信号处理程序时我的互斥锁可能存在也可能不存在？

那么，处理信号的最佳方法是什么？我在这里遇到什么问题？

* * *

编辑：只是为了澄清一些事情：

```
void start() {
    _receivedSignal = 0;
    _continueRunning = true;
    // start thread
    std::thread signalHandlerThread(run);
    _signalHandlerThread = std::move(signalHandlerThread);

    // register signals
    signal(SIGABRT, SignalHandler::handleSignal);
    signal(SIGTERM, SignalHandler::handleSignal);
    signal(SIGINT,  SignalHandler::handleSignal);
} 
```

即使在删除互斥体之后，程序看起来也进展得更远了——尽管只是直到 main 完成。

```
msvcr110d.dll!operator delete(void * pUserData) Line 52 C++
server.exe!std::_Ref_count<User>::_Destroy() Line 161   C++
server.exe!std::_Ref_count_base::_Decref() Line 120 C++
server.exe!std::_Ptr_base<User>::_Decref() Line 347 C++
server.exe!std::shared_ptr<User>::~shared_ptr<User>() Line 624  C++
server.exe!std::pair<unsigned int const ,std::shared_ptr<User> >::~pair<unsigned int const ,std::shared_ptr<User> >()   C++
server.exe!std::pair<unsigned int const ,std::shared_ptr<User> >::`scalar deleting destructor'(unsigned int)    C++
server.exe!std::allocator<std::_Tree_node<std::pair<unsigned int const ,std::shared_ptr<User> >,void *> >::destroy<std::pair<unsigned int const ,std::shared_ptr<User> > >(std::pair<unsigned int const ,std::shared_ptr<User> > * _Ptr) Line 624   C++
server.exe!std::allocator_traits<std::allocator<std::_Tree_node<std::pair<unsigned int const ,std::shared_ptr<User> >,void *> > >::destroy<std::pair<unsigned int const ,std::shared_ptr<User> > >(std::allocator<std::_Tree_node<std::pair<unsigned int const ,std::shared_ptr<User> >,void *> > & _Al, std::pair<unsigned int const ,std::shared_ptr<User> > * _Ptr) Line 758 C++
server.exe!std::_Wrap_alloc<std::allocator<std::_Tree_node<std::pair<unsigned int const ,std::shared_ptr<User> >,void *> > >::destroy<std::pair<unsigned int const ,std::shared_ptr<User> > >(std::pair<unsigned int const ,std::shared_ptr<User> > * _Ptr) Line 909    C++
server.exe!std::_Tree<std::_Tmap_traits<unsigned int,std::shared_ptr<User>,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,std::shared_ptr<User> > >,0> >::_Erase(std::_Tree_node<std::pair<unsigned int const ,std::shared_ptr<User> >,void *> * _Rootnode) Line 2069 C++
server.exe!std::_Tree<std::_Tmap_traits<unsigned int,std::shared_ptr<User>,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,std::shared_ptr<User> > >,0> >::clear() Line 1538   C++
server.exe!std::_Tree<std::_Tmap_traits<unsigned int,std::shared_ptr<User>,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,std::shared_ptr<User> > >,0> >::erase(std::_Tree_const_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<unsigned int const ,std::shared_ptr<User> > > > > _First, std::_Tree_const_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<unsigned int const ,std::shared_ptr<User> > > > > _Last) Line 1512    C++
server.exe!std::_Tree<std::_Tmap_traits<unsigned int,std::shared_ptr<User>,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,std::shared_ptr<User> > >,0> >::_Tidy() Line 2216   C++
server.exe!std::_Tree<std::_Tmap_traits<unsigned int,std::shared_ptr<User>,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,std::shared_ptr<User> > >,0> >::~_Tree<std::_Tmap_traits<unsigned int,std::shared_ptr<User>,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,std::shared_ptr<User> > >,0> >() Line 1190 C++
server.exe!std::map<unsigned int,std::shared_ptr<User>,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,std::shared_ptr<User> > > >::~map<unsigned int,std::shared_ptr<User>,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,std::shared_ptr<User> > > >() C++
server.exe!`dynamic atexit destructor for 'User::_usersListBySession''()    C++
msvcr110d.dll!doexit(int code, int quick, int retcaller) Line 584   C
msvcr110d.dll!exit(int code) Line 394   C
server.exe!__tmainCRTStartup() Line 549 C
server.exe!mainCRTStartup() Line 377    C 
```

看起来所有其他线程都消失了。我想我可能在其他地方犯了一个错误。

感谢您清除信号功能安全性。

* * *

编辑2：看起来一个不相关的共享指针给我带来了麻烦！不过，我很高兴看到一些好的结果。

编辑 3：一个完全不相关的问题导致了崩溃。不过，现在世界上一切都很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:52:22.250

我怀疑这是因为您的调试器正在处理 Ctrl-C 事件。

这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686016%28v=vs.85%29.aspx)有以下要说的：

> 如果正在调试控制台进程并且没有禁用 CTRL+C 信号，则系统会生成 DBG_CONTROL_C 异常。引发此异常只是为了调试器的好处，应用程序永远不应使用异常处理程序来处理它。如果调试器处理异常，应用程序将不会注意到 CTRL+C，但有一个异常：警报等待将终止。如果调试器在未处理时传递异常，则 CTRL+C 将传递到控制台进程并作为信号处理，如前所述。

您可以将事件过滤器设置为“输出 - 未处理”以允许您的应用程序处理此问题。我附上了如何在 WinDbg 中进行设置的屏幕截图。Visual Studio 将此列在“Win32 异常”下。

![WinDBG 事件过滤器](../Images/f2ddfc90af96058f31bf331a3910845d.png)

**编辑：** 另外，我应该补充一点，尝试在事件处理程序中锁定互斥锁被认为是不好的做法。如果在调用信号处理程序时已经获取了互斥锁，则会导致死锁，因为在信号处理程序完成之前应用程序无法恢复，并且在获取互斥体之前信号处理程序无法完成。虽然这在您的用例中不太可能发生，但[虚假唤醒](http://en.wikipedia.org/wiki/Spurious_wakeup)期间的 CTRL-C或 2 个 CTRL-C 背靠背可能会导致死锁。

# crystal-reports - 交叉表中的水晶报表堆栈 2 列标题

> ID：13571983
> 
> 赞同：0
> 
> 时间：2012-11-26T19:46:19.453
> 
> 标签：crystal-reports, crystal-reports-2008, crystal-reports-xi

这是我的问题。我有水晶 12.1 连接到访问数据库。我想创建一个交叉表来比较当年的销售额和上一年的销售额。我能够创建初始交叉表，但我不知道如何在商店名称下添加年份。这也是我想要的样子。（CY 为当年，PY 为上年）

```
 Store 1      Store2     Store3    ...            
           ----------   ---------  --------  
            CY   PY      CY   PY    CY   PY  
Toys         2    3       4    3     7    7    
Clothes      1    4       3    8     8    2
Shoes        2    2       4    5     6    9 
```

我现在在交叉表中有商店名称和 CY 销售。我不知道如何添加 PY 标头和值。我的交叉表在列中有商店，汇总字段有玩具、衣服、鞋子等值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:03:10.507

只需将您的日期字段添加到交叉表专家的列区域（在商店字段下方）。

突出显示并单击分组选项，将其设置为按年分组。

# c++ - 模板方法在哪里实例化？

> ID：13571986
> 
> 赞同：2
> 
> 时间：2012-11-26T19:46:31.407
> 
> 标签：c++, templates, boost

为了使用带有智能指针的不完整类型，例如`boost::scoped_ptr`，必须在相应的 CPP 文件中为父类显式定义一个空析构函数。例子：

```
// H file
class Foo
{
public:
  ~Foo();

private:
  class Pimpl;
  boost::scoped_ptr<Pimpl> pimpl_;
};

// CPP file
class Foo::Pimpl {};

Foo::~Foo() {} 
```

`boost::scoped_ptr`编译器究竟将' 的析构函数的实例化放在哪里？我试图从视觉上想象它在这些源文件中的位置，就好像我自己明确定义了 scoped_ptr 的析构函数一样。以这种方式想象是否合理？

我知道模板方法和类在与该类型一起使用之前不会为该类型实例化，但我现在正试图从结构上考虑它，如果编译器实际上是手写的，它会将它放在哪里。这将帮助我更好地理解如何使用这些技术（如上面的技术）。

此外，我不确定模板类的整个定义是否被实例化，或者只是它的相关部分，因为它们被使用。换句话说，是否有可能只`boost::scoped_ptr`存在 ' 的整个定义的一部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:16:16.440

我觉得我从你的问题中遗漏了一些东西。

此示例中只使用了一个主体 (".cpp") 文件，所以它放在那里。更准确地说，它与析构函数进入同一个目标文件（“.o”、“.obj”等）。语言标准没有指定这一点，但这就是我熟悉的所有实现方式。

# prolog - 在 Prolog 中定义材料条件

> ID：13571989
> 
> 赞同：7
> 
> 时间：2012-11-26T19:46:43.510
> 
> 标签：prolog, logic

我一直在努力适应 Prolog 和 Horn 子句，但是从形式逻辑的过渡仍然感到尴尬和被迫。我知道将所有内容都采用标准格式有很多好处，但是：

在 Prolog 中定义物质条件运算符的**最佳**方法是什么，其中之一和OR成功？也就是说，没有when的语句没有.`-->``A --> B``A = true``B = true``B = false``if->then``fail``if``false``else`

![真值表](../Images/5a4ccbfd38c7923bd73498822a507024.png)

另外， Horn 子句的不明显优势到底*是什么？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T20:06:31.993

> 在Prolog中定义物质条件运算符的最佳方法是什么-->

当`A`和`B`只是与原子`true`和绑定的变量时`false`，这很容易：

```
cond(false, _).
cond(_, true). 
```

但总的来说，没有最好的方法，因为 Prolog 没有提供适当的否定，只有[作为 failure](https://en.wikipedia.org/wiki/Negation_as_failure)的否定，这是非单调的。最接近实际命题的`A`，`B`通常是

```
(\+ A ; B) 
```

它试图证明`A`，然后继续`B`if`A` *不能被证明*（这并不意味着由于[封闭世界假设](https://en.wikipedia.org/wiki/Closed_world_assumption)它是错误的）。

然而，在 Prolog 中应谨慎使用否定。

> 另外，Horn 子句的不明显优势到底是什么？

他们有一个简单的程序阅读。Prolog 是一种*编程语言*，而不是定理证明器。可以编写具有明确逻辑含义的程序，但它们仍然是程序。

要查看差异，请考虑经典的排序问题。如果`L`是一个没有重复的数字列表，那么

```
sort(L, S) :-
    permutation(L, S),
    sorted(S).
sorted([]).
sorted([_]).
sorted([X,Y|L]) :-
    X < Y,
    sorted([Y|L]). 
```

是按排序顺序`S`包含 的元素意味着什么的逻辑规范。`L`然而，它也有一个程序意义，那就是：尝试所有排列，`L`直到你有一个它排序。在最坏的情况下，此过程会贯穿所有*n*！排列，即使排序可以在 O( *n* lg *n* ) 时间内完成，这使它成为一个非常糟糕的排序程序。

另请参阅[此问题](https://stackoverflow.com/questions/8108632/why-do-circular-references-and-recursion-make-my-program-fail)。

# python - 崇高文本中的构建命令已停止运行

> ID：13571993
> 
> 赞同：2
> 
> 时间：2012-11-26T19:47:02.050
> 
> 标签：python, sublimetext2

我是 Sublime text 的新用户。

它已经工作了几天，直到它开始拒绝编译任何东西，我不知道问题出在哪里。我编写了 python 程序并按下了 cmd+b 并没有发生任何事情。当我尝试为此文件启动 repl 时 - 这也不起作用。我没有安装任何插件，在这个问题之前一切都运行良好。

非常感谢任何有关如何识别/解决问题的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T20:35:36.747

是的，您可能想提供更多详细信息。您是否确定已将文件保存为 .py？尝试一些简单的方法，例如 Print "Hello"，然后看看是否可行。

# objective-c - 如何在 UICollection 补充视图中使用 UIButton？

> ID：13571994
> 
> 赞同：9
> 
> 时间：2012-11-26T19:47:04.963
> 
> 标签：objective-c, ios, cocoa-touch, ios6, uicollectionview

我正在尝试将 UIButton 放置在 UICollectionView 补充视图（页脚）中。我已经使用故事板将 UIButton 连接到 UICollectionViewCell 的子类，并且可以以编程方式更改它的属性，包括背景图像。但是，当我将按钮的 touch up inside 事件连接到一个方法时，它不会触发。事实上，按钮甚至看起来都没有对用户的触摸做出视觉响应。在故障排除中，我尝试将 UIButton 添加到集合视图的标题中并查看相同的行为。将按钮添加到不相关的视图会在按下时产生交互效果。

在 UICollection 补充视图中实现 UIButton 需要做一些特别的事情吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-26T20:19:02.440

补充视图应该是 a `UICollectionReusableView`（或其子类），而不是`UICollectionViewCell`.

无论如何，如果按钮没有响应，首先要做的是检查其所有祖先视图是否已`userInteractionEnabled`设置为`YES`. 一旦按钮出现在屏幕上，在调试器中暂停并执行以下操作：

```
(lldb) po [[UIApp keyWindow] recursiveDescription] 
```

在列表中找到按钮并复制其地址。然后你可以检查它和每个superview。例子：

```
(lldb) p (BOOL)[0xa2e4800 isUserInteractionEnabled]
(BOOL) $4 = YES
(lldb) p (BOOL)[[0xa2e4800 superview] isUserInteractionEnabled]
(BOOL) $5 = YES
(lldb) p (BOOL)[[[0xa2e4800 superview] superview] isUserInteractionEnabled]
(BOOL) $6 = YES
(lldb) p (BOOL)[[[[0xa2e4800 superview] superview] superview] isUserInteractionEnabled]
(BOOL) $8 = YES
(lldb) p (BOOL)[[[[[0xa2e4800 superview] superview] superview] superview] isUserInteractionEnabled]
(BOOL) $9 = YES
(lldb) p (BOOL)[[[[[[0xa2e4800 superview] superview] superview] superview] superview] isUserInteractionEnabled]
(BOOL) $10 = NO
(lldb) po [[[[[0xa2e4800 superview] superview] superview] superview] superview]
(id) $11 = 0x00000000 <nil> 
```

在这里，我发现直到根 (the `UIWindow`)的所有视图都`YES`从`isUserInteractionEnabled`. 窗口的超级视图为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-25T12:33:16.410

我有一个自定义按钮，它子类化`UIControl`并将其放在`UICollectionReusableView`. 为了使它工作，我使控件的每个子视图及其子视图的子视图不处理用户交互。

```
func disableUserInteractionInView(view: UIView) {
    view.userInteractionEnabled = false
    for view in view.subviews {
        self.disableUserInteractionInView(view)
    }
}

// My control has a subview called contentView which serves as a container
// of all my custom button's subviews.
self.disableUserInteractionInView(self.contentView) 
```

Since adding that code, all event listeners to `.TouchUpInside` would fire, and the control will visually highlight when pressed down.