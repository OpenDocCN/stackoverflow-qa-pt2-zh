# StackOverflow 问答 13925000-13925999

# wpf - 使用转换器将可见性绑定到 Yes/No ComboBox

> ID：13925000
> 
> 赞同：1
> 
> 时间：2012-12-18T01:29:13.507
> 
> 标签：wpf, data-binding, combobox, visibility

我有一个表单，它从数据集中获得一个数据行来绑定它的所有元素。其中一个是布尔值，但我希望该布尔值由是/否组合框表示。所以我这样做[了](https://stackoverflow.com/a/4335392)，效果很好。

我还想将几个元素的可见性绑定到这个 bool 字段。当表单加载时，可见性的初始设置有效。当我更改组合框选择时，将调用 ComboBox 的 ConvertBack() 方法（即，它正在设置绑定值）。但其可见性绑定到同一字段的其他元素不会得到更新。我在转换方法中设置了断点，它们永远不会像加载表单时那样被调用。

这是相关的 XAML：

```
<ComboBox SelectedIndex="{Binding Path=[Adequate], Converter={StaticResource b2iConverter}}" Name="cb_Adequate" >
     <ComboBoxItem>Yes</ComboBoxItem>
     <ComboBoxItem>No</ComboBoxItem>
</ComboBox>

<Label Content="Reason:" 
       VerticalAlignment="Center" 
       Visibility="{Binding Path=[Adequate], 
       Converter={StaticResource b2vConverterInverse}}"/>

<TextBox Text="{Binding Path=[NotAdequateReason]}" 
         Visibility="{Binding Path=[Adequate], 
          Converter={StaticResource b2vConverterInverse}}"/> 
```

*   “足够”是布尔字段
*   b2iConverter 只是 booleanToIndexConverter （来自上面的链接）
*   b2vConverterInverse 只是一个反转布尔到可见性转换器（我希望在足够为 FALSE 或 0 时显示标签和文本框）。

谢谢你的帮助。如果需要，我可以发布更多代码，我认为问题出在 XAML 中......

**编辑：**显然用 XAML 是不可能的（见下面 Greg 的帖子），所以我只是在代码中做：

```
private void cb_Adequate_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
     Visibility vis = (cb_Adequate.SelectedItem as ComboBoxItem).Content.ToString() == "Yes" ? Visibility.Collapsed : Visibility.Visible;
     label_Reason.Visibility = tb_AdequateDesc.Visibility = vis;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T04:07:10.433

如果您希望 UI 元素在数据属性更改时更改状态，则需要在数据类上实现 INotifyPropertyChanged。

这意味着您不能将 DataRow 用于您的目的。您必须创建一个新类，然后在运行时使用 DataRow 中的值填充它，然后将该对象绑定到您的视图。

# asp.net - 如何让 Firefox 看到 .aspx 页面的变化？

> ID：13925003
> 
> 赞同：0
> 
> 时间：2012-12-18T01:29:21.743
> 
> 标签：asp.net, firefox, caching

我创建了一个 aspx 页面并在 Firefox 中查看它，它运行正常，运行代码。但是当我对页面进行更改（包括删除所有内容并提供空白页面）时，Firefox 继续显示原始编译的 aspx 页面！我怎样才能让它看到新页面？

我什至添加了以下代码，但它仍然加载原始页面：

```
<script runat="server">
Sub Page_Load
    Random rd = new Random();
    Response.AddHeader("ETag", rd.Next(1111111, 9999999).ToString());
    Response.AddHeader("Pragma", "no-cache");
    Response.CacheControl = "no-cache";
    Response.Cache.SetNoStore();
    Response.Expires = -1;
End Sub
</script> 
```

我什至清除了 Firefox 的缓存，但它仍然加载原始版本！

**编辑：看来问题可能出在 ASP.Net 方面。它在 Chrome 中也没有改变。那么，如何强制更改 aspx 文件以强制重新编译？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T05:18:19.560

由于看起来这个问题与 firefox 无关，而是 ASP.Net Web 服务器中的问题（因为它也发生在 Chrome 中），所以我问了一个不同的问题并将关闭这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T04:05:08.687

*   重新加载和覆盖缓存的另一种方法[`CTRL + F5`](http://support.mozilla.org/en-US/kb/keyboard-shortcuts-perform-firefox-tasks-quickly)
*   它还可能取决于您如何开发 ASP.Net 应用程序/站点
    *   在再次查看之前进行更改后重新编译？

* * *

如果您正在构建一个`web application`，您必须*重建*（在 Visual Studio 中）您的应用程序以反映您对*服务器端*代码所做的任何更改 - 这不是“ASP.Net 问题”，而是常态。您可以在不重新构建的情况下更改 HTML（客户端），但任何服务器代码更改都需要重新构建（重新编译 dll）。

但是，您上面的示例代码看起来像`in-line`代码 - 是您的所有代码`in-line`- 因为您没有`code behind`文件（即 foo.aspx.vb 或 foo.aspx.cs）？

以上所有内容均基于**本地开发**- 显然，如果您正在查看您的“生产”/实时站点，那么不用说您必须“推送”/“发布”/上传/更新，无论您对其进行了任何本地更改.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T01:35:40.737

我对以下代码很幸运：

```
// Stop Caching in IE
Response.Cache.SetCacheability(System.Web.HttpCacheability.NoCache);

// Stop Caching in Firefox
Response.Cache.SetNoStore(); 
```

此外，您的浏览器可能在您添加缓存预防代码之前已经缓存了它。如果是这样，请尝试在 Firefox 中按 CTRL-SHIFT-R 以强制重新加载而不访问缓存，并查看 Firefox 存储页面的缓存副本是否仍然存在问题。

# java - 用于检测变量值变化的更改侦听器的替代方法

> ID：13925004
> 
> 赞同：0
> 
> 时间：2012-12-18T01:30:09.837
> 
> 标签：java, android, variables, listener

> **可能重复：**
> [如何实现更改侦听器](https://stackoverflow.com/questions/13924909/how-to-implement-a-change-listener)

我知道有些人会使用更改监听器或一些定制的监听器来检测变量值的变化。

有没有办法在不使用侦听器的情况下对此进行编码。一个简单的java方法来做到这一点？有任何想法吗？

我正在寻找替代方法来做到这一点。有更好的方法还是使用监听器是最好的方法？这是一个可以称为“最佳实践”的主题

每当 Activity 中变量的值发生变化时，它都会通过广播意图报告给服务，该广播意图是嵌套在服务内的广播接收器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T01:31:57.370

我会将变量隐藏在 Setter 函数后面。然后每次调用setter时，都会修改变量。

# entity-framework - 将数据库逆向工程为具有继承的实体框架代码第一类

> ID：13925005
> 
> 赞同：1
> 
> 时间：2012-12-18T01:30:16.257
> 
> 标签：entity-framework, ef-code-first

当我使用 Entity Framework Power Tools 对数据库进行逆向工程时，我希望将一对一的关系视为继承类。我如何实现这一目标？干杯。

# javascript - 更改谷歌地图自动完成文本框中的值

> ID：13925008
> 
> 赞同：6
> 
> 时间：2012-12-18T01:30:39.373
> 
> 标签：javascript, google-maps-api-3, autocomplete

我有以下 javascript 代码，它在作为地址的一部分的不同输入文本框上执行谷歌地图自动完成。

```
function startAutoComplete() {
    var address = document.getElementById("addressId");
    var city = document.getElementById("cityId");
    var state = document.getElementById("stateId");
    var zip = document.getElementById("zipId");

    //option for autocomplete
    var option = {types: ['geocode'], componentRestrictions: {country: 'us'}};

    //autocomplete for address textbox
    autocomplete = new google.maps.places.Autocomplete(address, option);

    google.maps.event.addListener(autocomplete, 'place_changed', function() {
        var place = autocomplete.getPlace();

        //parses the result object and populates the other textboxes accordingly
        for(i=0; i<place.address_components.length; i++)
        {
            if(place.address_components[i].types[0] == 'locality')
            city.value = place.address_components[i].long_name;

            if(place.address_components[i].types[0] == 'administrative_area_level_1')
            state.value = place.address_components[i].short_name;

            if(place.address_components[i].types[0] == 'postal_code')
            zip.value = place.address_components[i].long_name;
        }

        /* Here is the PROBLEM */
        address.value = place.name;

    }); 
```

但是，当我尝试使用完整地址的缩短版本（所以这里只有街道号码和街道名称）更新正在自动完成的文本框时。完整地址文本框中的值不会改变。我尝试使用 jquery 并在文本框中使用 setAttribute() 设置 value 属性。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-01-28T05:49:33.303

我发现以编程方式更改自动完成输入值的最简单方法是重新初始化输入字段。

```
autocomplete = new google.maps.places.Autocomplete(address, option);

google.maps.event.addListener(autocomplete, 'place_changed', function() {
   // populate your other text fields
   ...
   // change the value of your autocomplete
   address.value = place.name;
   // reinitialize with new input value
   autocomplete = new google.maps.places.Autocomplete(address, option);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-24T02:04:10.363

Autocomplete 对象有一些不明显的事件监听器。现实情况是，当您运行代码时，它确实会更改值，然后自动完成对象会非常快地将其更改回来！要对此进行测试，`alert();`请在您的`address.value = place.name;`行之后添加。`setTimeout()`如果您添加一个以 1 毫秒延迟设置值的值，您可以哄它保持您的值。但是当您离开该字段时，`blur`会触发自动完成事件，并且您的地址会再次被覆盖。你可以用一行来解决这个问题：

`address.addEventListener('blur', function() { address.value = place.name; });`

这也处理第一种情况，因此您甚至不需要添加`setTimeout()`. 用此事件侦听器替换您用于设置值的行，它将替换自动完成的回调函数，该函数在每次触发时设置文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T09:31:24.073

如何克隆元素，然后用相同的元素替换，然后再次调用初始化。

嗯，像这样。这在过去对我有用。

```
$("#Id").replaceWith($("#Id").clone());
initialize(); 
```

这里的inittailize是dom加载时调用的方法 google.maps.event.addDomListener(window, 'load', initialize); 在您的情况下，可能会有所不同

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T01:25:16.657

我找到了一个非常临时的解决方案。看来，如果您故意创建一个错误，它会从原始文本框中取消绑定谷歌地图自动完成功能，并使用更新后的值显示您的原始文本框。不是真正的解决方案，但它是一个开始

```
//Created this variable that stores the pac-container
var element = document.getElementsByClassName("pac-container");

//inside the addListener() function I added this to create a DOM error
element[0].childNodes[0].childNodes[0].removeChild(); 
```

javascript 会引发错误，但它至少允许我使用 '.value' 在文本框中输入我想要的内容

同样不是解决方案，而是一个开始。我希望我们能找到更好的解决方案。

# mysql - 使用字段内的查询值连接 MySql 表

> ID：13925010
> 
> 赞同：1
> 
> 时间：2012-12-18T01:30:48.593
> 
> 标签：mysql, sql

在这里，我有五个要提取的表的数据。

表 1`users`包含三列：

```
uid, username, data 
```

表 2`users_order`包含三列：

```
uid, orders_id, users_email 
```

表 3`order_products`包含三列：

```
orders_id, product_id, product_name 
```

表 4 用户配置文件值有三列（下面是行中的数据）

```
uid, fid, values
1     1   firstname
1     2   lastname 
```

因此，使用表 1 - 3，我能够编写这样的查询

```
SELECT users.uid AS uid, users.username AS username, 
       users_order.orders_id AS orderId,     
       users_order.users_email AS userEmail, 
       order_products.product_name AS  productName 
WHERE users_order.uid = users.uid
AND users_order.orders_id = order_products.orders_id
AND order_products.product_id = 5 ; 
```

上面的查询将给出结果

```
uid   usersname   orderId   usersEmail       productName 
1    xxusername   123       xxxuser@gmail    Product 1 
```

我想将表 4 数据 Firstname 和 Last Name 带入查询结果。所以，最终的查询将是

```
uid    username    orderId     usersEmail    productName    FirstName    LastName 
```

需要有关添加表 4 数据的查询的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T01:37:04.410

试试这个：

```
SELECT 
  u.uid AS uid, 
  u.username AS username, 
  o.orders_id AS orderId,     
  o.users_email AS userEmail, 
  p.product_name AS  productName,
  MAX(CASE WHEN f.fid = 1 THEN `values` END) AS 'First Name',
  MAX(CASE WHEN f.fid = 2 THEN `values` END) AS 'Last Name'
FROM users u 
INNER JOIN users_order o ON o.uid = u.uid
INNER JOIN order_products p ON o.orders_id = o.orders_id
INNER JOIN usersprofile f ON u.uid = f.uid
WHERE p.product_id = 5 
GROUP BY u.uid, u.username, o.orders_id, o.users_email, p.product_name; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/fa064/1)

这会给你：

```
| UID |   USERNAME | ORDERID |     USEREMAIL | PRODUCTNAME | FIRST NAME | LAST NAME |
-------------------------------------------------------------------------------------
|   1 | xxusername |     123 | xxxuser@gmail |   product 1 |        sam |       lin | 
```

假设`values`用户配置文件表中的每个条目都有两个`fid`值 1、2 表示`firstname`和`lastname`。

# javascript - 如何在谷歌应用脚 本中添加重复面板？

> ID：13925012
> 
> 赞同：0
> 
> 时间：2012-12-18T01:31:35.380
> 
> 标签：javascript, google-apps-script

我想知道如何使用“添加产品”按钮在前一个现有面板（“productOtherPanel”）下方添加一个重复面板。我希望将新面板插入现有的“productOtherPanel”下方和“添加产品”按钮上方。我还希望这个新面板包含与原始“productOtherPanel”相同的下拉列表和文本框。我需要这个面板复制无数次。这可能吗？

```
function doGet(e) {
  var app = UiApp.createApplication();

  var productOtherPanel = app.createHorizontalPanel().setId('productOtherPanel');
  var productPanel = app.createVerticalPanel().setId('productPanel');
  var productList = app.createListBox().setName("productList").setId('productList');
  productList.addItem("8:1 Compressed Blocks");
  productList.addItem("8:1 Compressed Briquettes");

  var pricePerTonPanel = app.createVerticalPanel().setId('pricePerTonPanel');
  var pricePerTonTextBox = app.createTextBox().setId("pricePerTonTextBox").setName("pricePerTonTextBox")
  .setText("$0.00");

  var buttonPanel = app.createVerticalPanel().setId('buttonPanel');
  var button = app.createButton("Add Product");

  app.add(productOtherPanel);
  productOtherPanel.add(productPanel);
  productPanel.add(productList);

  productOtherPanel.add(pricePerTonPanel);
  pricePerTonPanel.add(pricePerTonTextBox);

  app.add(buttonPanel);
  buttonPanel.add(button);

  return app;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:25:18.253

尝试查看此代码是否是您要查找的代码：

```
function doGet(e) {
  var app = UiApp.createApplication();

  var productOtherPanel = app.createVerticalPanel().setId('productOtherPanel');
  var productPanel = app.createHorizontalPanel().setId('productPanel');

  // Product list dropdown
  var productList = app.createListBox().setName("productList").setId('productList');
  productList.addItem("8:1 Compressed Blocks");
  productList.addItem("8:1 Compressed Briquettes");

  // Product Price Textbox
  var pricePerTonTextBox = app.createTextBox().setId("pricePerTonTextBox").setName("pricePerTonTextBox").setText("$0.00");

  productPanel.add(productList);
  productPanel.add(pricePerTonTextBox);

  var buttonPanel = app.createVerticalPanel().setId('buttonPanel');
  var button = app.createButton("Add Product");
  button.addClickHandler(app.createServerHandler("addProductHandler").addCallbackElement(productOtherPanel));

  app.add(productOtherPanel);
  productOtherPanel.add(productPanel);

  app.add(buttonPanel);
  buttonPanel.add(button);

  return app;
}

  function addProductHandler(e) {
    var app = UiApp.getActiveApplication();

    var productPanel = app.createHorizontalPanel().setId('productPanel');

    // Product list dropdown
    var productList = app.createListBox().setName("productList").setId('productList');
    productList.addItem("8:1 Compressed Blocks");
    productList.addItem("8:1 Compressed Briquettes");

    // Product Price Textbox
    var pricePerTonTextBox = app.createTextBox().setId("pricePerTonTextBox").setName("pricePerTonTextBox").setText("$0.00");

    productPanel.add(productList);
    productPanel.add(pricePerTonTextBox);

    var panel = app.getElementById("productOtherPanel");
    panel.add(productPanel);

    return app;
 } 
```

# vb.net - 如何将信息从维基百科表复制到组合框？Visual Basic.Net

> ID：13925013
> 
> 赞同：1
> 
> 时间：2012-12-18T01:31:35.317
> 
> 标签：vb.net, winforms, visual-studio-2010, wikipedia, server.transfer

需要以某种方式将每个季节的季数和剧集数从维基百科表中复制到两个组合框中。一个用于季节，另一个用于剧集。应该允许用户输入他们最喜欢的应用程序显示在顶部输入框中。然后用季节数填充第一个组合框，当用户选择一个时，将显示相关的剧集数

链接到每个季节的季数和剧集数的表格： [http ://en.wikipedia.org/wiki/List_of_House_episodes#Series_overview_and_ratings](http://en.wikipedia.org/wiki/List_of_House_episodes#Series_overview_and_ratings)

代码：

```
Public Class Form1
Dim Search As String
Private Sub TextBox1_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles TextBox1.KeyPress
Search = TextBox1.Text
Search = Search.Replace(" ", "+")
Search = "http://www.google.com/search?btnI=I'm+Feeling+Lucky&q=" & Search & "episode+list+wikipedia"

If Asc(e.KeyChar) = 13 Then

WebBrowser1.Navigate(Search)
TextBox1.Text = Search

End If
End Sub
End Class 
```

到目前为止，我已经发现了如何下载页面源，甚至稍微操作了页面，但我不知道如何使用它来将每个季节的季数和剧集数放入组合框中。任何帮助都会非常感谢

代码：

```
Imports System.Text.RegularExpressions

Public Class Form1
Dim sourcecode As String
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
sourcecode = ((New Net.WebClient).DownloadString("http://en.wikipedia.org/wiki/List_of_House_episodes#Series_overview_and_ratings "))

Dim Code As String
Dim Information As MatchCollection = Regex.Matches(sourcecode, "<td>(.*?)</td>", RegexOptions.None)
For Each Info In Information
Code = Regex.Replace(Info.ToString, "td>", "", RegexOptions.None)
Code = Regex.Replace(Code, "</td>", "", RegexOptions.None)
MsgBox(Code)
Next
End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:34:29.440

此代码获取站点中表格的内容并将它们呈现到页面。您可以添加一些额外的代码来对表格进行交互以获取您正在寻找的详细信息。

```
' Create a request for the URL.             
    Dim request As WebRequest = WebRequest.Create("http://en.wikipedia.org/wiki/List_of_House_episodes#Series_overview_and_ratings")
    ' If required by the server, set the credentials.    
    request.Credentials = CredentialCache.DefaultCredentials
    ' Get the response.    
    Dim response__1 As HttpWebResponse = DirectCast(request.GetResponse(), HttpWebResponse)
    ' Display the status.    
    Console.WriteLine(response__1.StatusDescription)
    ' Get the stream containing content returned by the server.    
    Dim dataStream As Stream = response__1.GetResponseStream()
    ' Open the stream using a StreamReader for easy access.    
    Dim reader As New StreamReader(dataStream)
    ' Read the content.    
    Dim responseFromServer As String = reader.ReadToEnd()
    ' Display the content.    
    Console.WriteLine(responseFromServer)
    ' Cleanup the streams and the response.    
    reader.Close()
    dataStream.Close()
    response__1.Close()

    'reads the html into an html document to enable parsing    
    Dim doc As IHTMLDocument2 = New HTMLDocumentClass()
    doc.write(New Object() {responseFromServer})
    doc.close()

    'loops through each element in the document to check if it qualifies for the attributes to be set    
    For Each el As IHTMLElement In DirectCast(doc.all, IHTMLElementCollection)
        ' check to see if all the desired attributes were found with the correct values    
        Dim qualify As Boolean = True
        If el.tagName = "TABLE" Then
            Dim meta As HTMLTableClass = DirectCast(el, HTMLTableClass)
            Response.Write(el.outerHTML)

        End If
    Next 
```

# cocoa - ScriptingBridge：这些泄漏是我的还是脚本桥？

> ID：13925014
> 
> 赞同：1
> 
> 时间：2012-12-18T01:31:49.340
> 
> 标签：cocoa

我将我的应用程序从使用垃圾收集转换为 ARC。该应用程序使用 ScriptingBridge 框架。出于好奇，我使用 Instruments “Leaks” 模板运行它并且有泄漏。AEDescImpl 对象不是由我的代码直接创建的，它们似乎是由 Scripting Bridge 创建的。我对吗？

如果这些泄漏来自 ScriptingBridge，这是否正常，我只能忍受它？

谢谢。

这是显示“循环和根”->“泄漏循环”的仪器图像：

![图片](../Images/19191dceb7b1a18cfb30394049a21f3a.png)

我在相关部分输入。
_NSCFArray

```
    +40 ( 没有 ivar ]: AEDescImpl  
```

```
      +56 [无 ivar]：AEDescImpl  
```

```
      +64 [无 ivar]：AEDescImpl  
```

```
      +72 [无 ivar]：AEDescImpl  
```

```
      +80 [无 ivar]：AEDescImpl  
```

```
      +88 [无 ivar]：AEDescImpl  
```

```
      +96 [无 ivar]：AEDescImpl  
```

* * *

Peter 关于将 findOpenTuner 方法完整包含在内的评论促使我创建了一个“迷你”项目。有问题的方法很大并且有很多方法调用，所以我将方法简化为本质。我添加了一个 for 循环来调用该方法 24 次，因为它运行得如此之快，仪器没有任何机会看到任何东西。

出于好奇，我在 EyeTVPlayer_window 上注释掉了 for 循环，并在上面运行了 Instruments，没有发现任何泄漏或循环。如下所示，如果未注释此 for 循环，则存在泄漏。在我看来，要么我的编码不正确，要么 Scripting Bridge 泄漏。

“迷你”项目的实施文件。

```
#import "AppDelegate.h"
#import "EyeTV.h"

@implementation AppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    NSUInteger i;
    for (i=0; i<25; i++) {
        NSLog(@"before i=%li", i);
        [self findOpenTuner];
        NSLog(@"after i=%li", i);
    }
}

- (void)findOpenTuner;
{
    EyeTVApplication *eyeTVApp;

    eyeTVApp = [SBApplication applicationWithBundleIdentifier:@"com.elgato.eyetv"]; // 08-04-2011 needed to do mute below in method call filterPlayVolumeMute

    SBElementArray *eyeWindows = [eyeTVApp player_windows]; // are EyeTVWindow

    BOOL openTunerFound = FALSE;    // 07-21-2010
    int j=0;
    for (EyeTVPlayer_window *eyeWin in eyeWindows)  // 12-07-2012 #1
    {
        if ([[eyeWin programInfo] count] == 0) {
        } else {
            // this is the tuner we want
            openTunerFound = FALSE; // 07-21-2010
            [eyeWin select];    // 07-21-2010 // moves "focus" to window, places it at index 0
            break;              // 07-21-2010 // got the tuner, leave loop
        }
        j++;
    }
}

@end 
```

“迷你”项目的仪器截图。

![在此处输入图像描述](../Images/64b7ee738d1333c03bf98a1dc6927d76.png) ![在此处输入图像描述](../Images/742f339d9993953da19ce4cf9fb70332.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T14:48:27.533

ScriptingBridge 也有同样的问题。我最终用自动释放池封装了负责的代码。

```
@autoreleasepool {
  // Leaking code
} 
```

这消除了最大的泄漏，现在它只泄漏了我的应用程序上的几个字节。

# c++ - NSArray 支持，如 C++（奇怪的代码示例）

> ID：13925018
> 
> 赞同：2
> 
> 时间：2012-12-18T01:32:12.867
> 
> 标签：c++, iphone, objective-c, nsarray

我做objective c几年了，然而我的共同开发者才刚刚开始，但他处女的眼睛发现了我做梦也想不到的东西。

他使用像 C++ 指针数组一样的 NSArray

```
self.myArray = [NSArray arrayWithObjects:@"object1",@"object2",@"object3",nil];
NSString *object1 = self.myArray[0];
NSString *object2 = self.myArray[1]; 
```

现在虽然这确实有效，但我找不到它的参考。

我也没有找到任何使用它的例子。

有没有人知道为什么会这样。或者可以引导我查看一些使用文档。

我不知道您可以像使用旧的 c++ 数组一样使用 NSArray 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T01:35:31.300

[这个](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)链接确实显示了一个按索引访问的示例，即使它不是在谈论这个。我是 Objective C 的新手，那么究竟是什么让你感到惊讶呢？

编辑：你是对的，这种语法似乎是 XCode 4.5 的[最新更改](http://www.globalnerdy.com/2012/09/23/objective-c-nsnumber-nsarray-nsdictionary-less-yak-shaving/)- 滚动到大约一半。

# javascript - javascript oop 帮助

> ID：13925020
> 
> 赞同：1
> 
> 时间：2012-12-18T01:32:38.670
> 
> 标签：javascript, client-side

我在使用 javascript 的 oop 时遇到问题。我有一个小代码片段，类似于我在项目中使用的代码。我写了一个小代码示例，我也遇到了麻烦。我想知道我的 Javascript 做错了什么，所以我的代码可以工作。

```
function Person(name) {
  this.name = name;
}

Person.prototype.Display = {};

Display.prototype.text = function(str) {
  document.write(str + '<br />');
  window.alert(str);
};

var Jacob = new Person('Jacob');

Jacob.Display.text('Hello World!'); 
```

这个小代码示例应该显示文本 hello world。我遇到的麻烦是线路`"Jacob.Display.Text('Hello World!');"`不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T01:43:49.707

我想你的意思是：

```
function Person(name) {
  this.name = name;
}

Person.prototype.display = {
    text : function(str) {
        document.write(str + '<br />');
        window.alert(str);
    }
};

var Jacob = new Person('Jacob');
Jacob.display.text('Hello World!'); 
```

（还要注意“display”中的小写“d”；为构造函数保留大写首字母）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T02:06:26.687

我不确定您到底要做什么，但这可能更接近您想要的。

```
function Person(name) {
  this.name = name;
  this.element = document.createElement('div');
  document.body.appendChild(this.element);
}

Person.prototype.display = function(str) {
  this.element.textContent = str;
  console.log(this.name + ' set to ' + str);
};

var jacob = new Person('Jacob');

jacob.display('Hello World!'); 
```

# sql - 将文本内容导出到没有 \n 标记的文本文件

> ID：13925021
> 
> 赞同：3
> 
> 时间：2012-12-18T01:32:45.613
> 
> 标签：sql, postgresql, copy, text-files

当我尝试导出字段的文本内容并且该内容具有回车字符时，该字符将像 \N 字符串一样输出。

例如：

```
create table foo ( txt text );
insert into foo ( txt ) values ( 'first line
second line
...
and other lines');
copy foo ( txt ) to '/tmp/foo.txt'; 
```

我想返回以下（a）：

```
first line
second line
...
and other lines 
```

但是，输出是（b）：

```
first line\Nsecond line\N...\Nand other lines 
```

有人知道如何获得（a）输出吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T02:26:45.270

这`\N`是因为一行必须对应于一个数据库行。

对于 CSV 格式，此规则放宽了，其中多行文本是可能的，但引号字符（默认情况下`"`：）将包含文本。

如果你想要多行输出并且周围没有封闭字符，你不应该使用`COPY` but `SELECT`。

假设一个 unix shell 作为调用者的执行环境，你可以这样做：

```
psql -A -t -d dbname -c 'select txt from foo' >/tmp/file.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T01:55:43.363

你有没有试过：`\r\n`？

这是另一个可能有效的解决方案：

```
E'This is the first part \\n And this is the second' 
```

通过[https://stackoverflow.com/a/938/1085891](https://stackoverflow.com/a/938/1085891)

另外，不要复制其他响应，请参见此处：[Postgresql 中的字符串文字和转义字符](https://stackoverflow.com/questions/935/string-literals-and-escape-characters-in-postgresql)

# qt - ANSI C 兼容或 C++ 跨平台 GUI 库？

> ID：13925024
> 
> 赞同：1
> 
> 时间：2012-12-18T01:33:01.073
> 
> 标签：qt, user-interface, gtk, cross-platform

我正在寻找一个用于创建 GUI 的简单库，它可以具有：

1.  跨不同编译器和操作系统的可移植代码库
2.  如果该平台本身不支持，可以轻松扩展到新平台
3.  是**真正的**库，而不仅仅是`#define`工具和其他不可移植和非标准事物的集合。

到目前为止，“最佳”匹配是 QT，它与这 3 点中的每一个都相反，尤其是第 3 点（moc 编译器和 #defines ...）。

我也不需要数据结构和 10000 个额外的函数，我只需要编写一个便携式 GUI，我什至不需要包含信号槽库，因为我可以使用第三方库处理信号。

如果没有可用的此类库，您能否指出我可以了解有关 Widgets 和 Windows 的操作系统特定基础知识的资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T01:52:25.727

我从未使用过它，但我建议研究[IUP](http://www.tecgraf.puc-rio.br/iup/)

从我读到的内容来看，这很符合要求。该项目也相当活跃。虽然它可能不太漂亮。

# javascript - dateaxisrenderer 不在我的代码中呈现

> ID：13925030
> 
> 赞同：1
> 
> 时间：2012-12-18T01:34:41.220
> 
> 标签：javascript, jquery-ui, graph, primefaces, jqplot

我正在使用 primefaces 3.4.2。由于 primefaces 不提供对 y2axis 的支持，我正在使用 primefaces 提供的 jqplot 并在函数中编写代码。我能够获取 y2axis 但无法检索 x 轴的日期。

我还调用了渲染器：$.jqplot.DateAxisRenderer，

.我什至没有错误，也没有 xaxis 上的值。当我有数字时，我确实在 x 轴上看到了值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:10:50.743

```
<ui:composition 

    <!-- Contextual Actions Menu -->
    <h:outputScript library="components" name="sso.js" target="body"/>

    <h:outputScript name="charts/charts.js" library="primefaces" target="head"/>
    <h:outputScript name="jquery/jquery.js" library="primefaces" target="body"></h:outputScript>

    <h:outputScript library="primefaces" name="plugins/jqplot.dateAxisRenderer.min.js" target="body"></h:outputScript>
    <h:outputScript library="primefaces" name="plugins/jqplot.dateAxisRenderer.js" target="body"></h:outputScript>

    <ui:define name="body">

    <!-- <p:outputPanel layout="block">-->

    <script type="text/javascript">
    $(document).ready(function(){

            var line1= [['2008-09-30 4:00PM',10], ['2008-10-30 4:00PM',20], ['2008-11-30 4:00PM',35], ['2008-12-30 4:00PM',31], ['2009-01-30 4:00PM',50]]; 
            var line2= [['2008-09-30 4:00PM',100], ['2008-10-30 4:00PM',200], ['2008-11-30 4:00PM',300], ['2008-12-30 4:00PM',450], ['2009-01-30 4:00PM',500]];  

            <!--   var line1=[[12,10], [18,20], [24,30], [30,40], [36,50]]; --> 
            <!--   var line2=[[14,100], [14,200], [20,300], [12,400], [30,500]]; --> 

    $.jqplot.config.enablePlugins= true;

     plot1=$.jqplot('chart1',[line2, line1], {

    title:'AUM vs Revenue',

    axesDefaults: {
        tickRenderer: $.jqplot.CanvasAxisTickRenderer,

    },

    axes:{
     xaxis:{

        renderer:$.jqplot.DateAxisRenderer  

        <!--min:'2008-09-30', -->
        <!-- tickInterval:'1 month', --> 
        <!-- tickOptions:{formatString:'%b %#d, %y'}, -->
        <!--label: "Time Period", -->
        <!--labelRenderer: $.jqplot.CanvasAxisLabelRenderer -->

       <!--  min:0, --> 
       <!--  tickInterval:10 --> 

       },
       yaxis:{
           labelOptions: {
               textColor : '#3988BD'},
               tickOptions:{textColor : '#3988BD'},
           tickInterval:100,
           min:0,
          label: "AUM",
          labelRenderer: $.jqplot.CanvasAxisLabelRenderer

       },
       y2axis:{labelOptions: {
           textColor : '#E0981B'},
           tickOptions:{textColor : '#E0981B'},
           tickInterval:10,
           min:0,
         label:"Revenue",
         labelRenderer: $.jqplot.CanvasAxisLabelRenderer, 
          renderOptions:{alignTicks:true}
       }

    },

     grid: {
                    borderColor: "#fff",
                    background: "#FFF",
                    drawGridlines: true,
                    shadow: true
                }, 
    series:[
            {lineWidth:4}, {yaxis:'y2axis'}
       ],   
     cursor:{
      show: true,
      zoom:true,
      showTooltip:true
    },
    });
}); 
</script> 
```

# bash - 提示文件路径：主目录别名和区分大小写的制表符补全

> ID：13925031
> 
> 赞同：1
> 
> 时间：2012-12-18T01:34:54.670
> 
> 标签：bash, shell

我正在编写一个提示用户输入文件路径的 shell 脚本：

```
read -e -p "Enter the path to the file: " FILEPATH 
```

然后我使用这个文件路径来执行操作——即压缩一个文件夹。

```
(cd "$FILEPATH"; tar -cvz *) > /tmp/torrent.tar.gz; 
```

在提示符下，如果我使用`~`别名（主目录），那么 shell 脚本似乎无法理解这一点，因为`tar`函数压缩了错误的路径。无论如何我可以允许这个别名吗？

此外，选项卡完成似乎在提示符下区分大小写。我想知道我怎样才能改变它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T02:31:16.843

使用 eval 的示例：

```
read -e -p "Enter the path to the file: " FILEPATH
eval FILEPATH=$FILEPATH
cd $FILEPATH
echo $PWD 
```

在你的情况下，它变成：

```
read -e -p "Enter the path to the file: " FILEPATH
eval FILEPATH=$FILEPATH
(cd "$FILEPATH"; tar -cvz *) > /tmp/torrent.tar.gz; 
```

要处理空格，您可以使用 sed：

```
read -e -p "Enter the path to the file: " FILEPATH
FILEPATH=$(echo $FILEPATH | sed 's/ /\\ /')
eval FILEPATH=$FILEPATH
cd "$FILEPATH"
echo $PWD 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T01:52:28.880

您可以像这样自己应用替换：

```
filepath=${filepath/\~/$HOME} 
```

我不知道是否有办法让 shell 为你做这件事。

这是您其他问题的答案：[https ://superuser.com/questions/90196/case-insensitive-tab-completion-in-bash](https://superuser.com/questions/90196/case-insensitive-tab-completion-in-bash)

# jquery - jQuery选择菜单显示具有相同ID的兄弟姐妹隐藏其他兄弟姐妹

> ID：13925034
> 
> 赞同：1
> 
> 时间：2012-12-18T01:35:25.297
> 
> 标签：jquery, select, show-hide, siblings

我有一个选择菜单，根据 ID 显示或隐藏列表项。除了我的列表有多个具有相同 ID 值的 LI。

这仅显示列表中具有匹配 ID 值的第一个 LI。

```
$(function() {
    $("#orientation").change(function() {
        if (this.value == 'all') {
            $("#images").children().show();
        }
        else {
            $("#" + this.value).show().siblings().hide();
        }
    });
    $("#orientation").change();
});​ 
```

[http://jsfiddle.net/dRqRV/](http://jsfiddle.net/dRqRV/)

如何显示具有相同 ID 值的所有兄弟 LI？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T01:39:29.003

IDs 必须是唯一的，jQuery 只选择具有特定 ID 的第一个元素，您可以将 ID 更改为类和代码：

```
$(function() {
    var $li = $('#images').find('li')
    $("#orientation").change(function() {
        if (this.value == 'all') $li.show();
        else $li.hide().filter("." + this.value).show();
    }).change();
}); 
```

[http://jsfiddle.net/Z3Qgz/](http://jsfiddle.net/Z3Qgz/)

# css - 如果文本居中对齐，如何在任何屏幕尺寸中居中背景图像？

> ID：13925039
> 
> 赞同：3
> 
> 时间：2012-12-18T01:35:43.980
> 
> 标签：css, background-image, alignment

如果文本居中对齐，如何对齐背景图标图像？就像文本前的小图标。如果它不是居中对齐的，我可以使用类似的东西：

```
p { 
  background: url(image.jpg) no-repeat 0 0;
  padding-left: 40px;
} 
```

但是如果我像这样居中对齐它：

```
p { 
  background: url(image.jpg) no-repeat 0 0;
  padding-left: 40px;
  text-align: center;
} 
```

当文本居中时，背景保持在左角（因此它们之间有很大的差距）。可以使用背景位置，但是，如果屏幕的大小与我使用的不同，背景将与文本重叠。

您可以查看 jsFiddle 演示：

[http://jsfiddle.net/PvL3T/2/](http://jsfiddle.net/PvL3T/2/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T01:53:11.117

`:first-letter`伪元素会很好玩，[http://jsfiddle.net/PvL3T/7/](http://jsfiddle.net/PvL3T/7/)

```
p { 
  padding-left: 40px;
  text-align: center;
}

.resize:first-letter { 
   background: url(http://www.torontorawveganfestival.com/Images/Pen-icon.png) no-repeat 0 50%; padding-left: 20px;
} 
```

如果您愿意，这甚至可以在 IE6 中使用，但前提是选择器和打开曲线括号之间有空格。仅对于 IE6 类似这样的东西`p:first-letter{...`不起作用，但`p:first-letter {...`会

并且以类似的方式，您可以使用`:first-line`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T01:44:48.773

如果您希望将图标浮动内嵌在文本旁边，您可能需要考虑将其放置在父标记内。然后无论屏幕大小如何，背景图像都可以与文本一起浮动：

[http://jsfiddle.net/PvL3T/4/](http://jsfiddle.net/PvL3T/4/)

HTML：

```
<p><i class="icon"></i>This is a text that is center aligned.</p> 
```

CSS：

```
p { 
    text-align: center;
}

p .icon {
    background: url(http://www.torontorawveganfestival.com/Images/Pen-icon.png) no-repeat 0 0;
    width: 12px;
    height: 12px;
    display: inline-block;
    margin-right: 10px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T01:48:25.140

您需要在文本之前添加一个行块显示元素。所以它可以与您的文本内容一起使用。示例：http: [//jsfiddle.net/PvL3T/5/](http://jsfiddle.net/PvL3T/5/)

```
.icon
{
    background: url(http://www.torontorawveganfestival.com/Images/Pen-icon.png) no-repeat center center;
    width: 1em;
    height: 1em;
    display: inline-block;
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T01:40:16.037

尝试：

```
background: url(image.jpg) no-repeat center; 
```

或者：

```
background-position: center; 
```

# erlang - Erlang / Misultin / erlsom 错误 / 进程死亡

> ID：13925046
> 
> 赞同：0
> 
> 时间：2012-12-18T01:36:50.993
> 
> 标签：erlang, misultin

二郎代码：

```
-module(index).
-compile(export_all).

-include_lib("erlsom/include/erlsom.hrl").

start(Port) ->
    misultin:start_link([{port, Port}, {loop, fun(Req) -> handle_http(Req) end}]).

stop() ->
    misultin:stop().

handle_http(Req) ->
    Var = "<?xml version=\"1.0\" encoding=\"UTF-8\"?><request><code>1</code><var1>123456</var1><var2>qwerty</var2></request>",
    XmlErlsom = erlsom:simple_form(Var),
    Req:ok("~s", [Var]). 
```

在我编译代码并启动服务器后，我打开了 localhost:8080/，shell 给了我以下错误：

```
http process <0.196.0> has died with reason: {badarg,
                                          [{erlang,list_to_binary,
                                            [[{ok,
                                               {"request",[],
                                                [{"code",[],["1"]},
                                                 {"var1",[],["123456"]},
                                                 {"var2",[],["qwerty"]}]},
                                               []}]]}, 
```

ChicagoBoss 的相同 lib 'erlsom' 成功运行......

之后我尝试使用 xmerl，但结果相似。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T02:14:39.013

erlsom:simple_form 返回 {ok, ParsedData} 形式的元组：

```
A = "<?xml version=\"1.0\" encoding=\"UTF-8\"?><request><code>1</code><var1>123456</var1>`<var2>qwerty</var2></request>".

> erlsom:simple_form(A).
{ok,{"request",[],
     [{"code",[],["1"]},
      {"var1",[],["123456"]},
      {"var2",[],["qwerty"]}]},
    []} 
```

我相信您正在尝试将这个返回的元组传递给 Req:ok()，它需要列表或二进制或 iodata 或除元组之外的任何其他内容。

# objective-c - 子类 UISplitViewController 并设置自定义宽度

> ID：13925053
> 
> 赞同：1
> 
> 时间：2012-12-18T01:37:41.753
> 
> 标签：objective-c, ios, ipad, uisplitviewcontroller, subclass

我正在尝试对 UISplitViewController 进行子类化以减小主控的宽度。我看过 Matt Gemmell 的[MGSplitViewController](https://github.com/mattgemmell/MGSplitViewController) - 请参阅[Change the width of Master in UISplitViewController](https://stackoverflow.com/questions/2949067/change-the-width-of-master-in-uisplitviewcontroller) - 但它看起来比我需要的要多。我只是想以 Apple 在应用商店中接受的方式将 master 的大小从 320 减小到 260。

我对子类化按钮以外的任何东西都是新手，但这是我目前正在尝试的，尽管它目前没有做任何事情。要么我离题了，要么我错过了一些简单的东西。如何才能做到这一点？

头文件：

```
#import <UIKit/UIKit.h>

@interface MYSplitViewController : UISplitViewController

+ (CGFloat)masterColumnWidth;

@end 
```

实现文件：

```
#import "SRSplitViewController.h"

@interface SRSplitViewController ()

@end

@implementation SRSplitViewController

+ (CGFloat)masterColumnWidth {
  return 260;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T19:19:35.583

I ended up not going this route, and would recommend against trying to subclass UISplitViewController for others. It's not a flexible layout so unless you want exactly what it provides out of the box, you are going to run into time-consuming problems.

If you want a side navigation bar similar to the Facebook app, I'd recommend using [JASidePanels](https://github.com/gotosleep/JASidePanels) and placing whatever size and style view controller you want in the left panel.

![enter image description here](../Images/1f0e0c46b0683b96f338ac31e8983843.png)

# asp.net - Asp.Net 4.0 Web 表单-Webpages.Deployment 组件

> ID：13925055
> 
> 赞同：2
> 
> 时间：2012-12-18T01:38:02.793
> 
> 标签：asp.net, webforms

我有一个网络应用程序。该平台是 Asp.NET 4.0，我使用了 Web 表单。这不是 MVC。

我收到一个错误。

```
System.IO.FileLoadException: Could not load file or assembly 'System.Web.WebPages.Deployment, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. Access is denied. 
```

我已经搜索过，错误是关于 MVC 的。我找不到任何答案，为什么它会发生在网络表单上。此外，该项目在本地主机上运行良好。但是当我发布它时，我得到了那个错误。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T02:31:15.257

看起来您在生产中对 DLL 的引用损坏了 - 该 DLL 可能不在您推送到的机器上的 GAC 中。为了验证，您可以将本地的 bin 文件夹与生产机器上的 bin 文件夹进行比较。

如果它在部署机器上不可用，请右键单击“参考”文件夹中的参考并将“复制本地”设置为 true - 然后重新部署。

# jquery - JQuery Mobile - ListView - 获取选中项

> ID：13925057
> 
> 赞同：2
> 
> 时间：2012-12-18T01:38:21.527
> 
> 标签：jquery, listview, jquery-mobile, click

我已经查看了有关此的其他问题，到目前为止，我还无法解决我遇到的问题：

HTML：

```
 <script type="text/html" id="searchPickPlaceTemplate">
                 <div class="searchpickwhere_box">
                     <ul data-role="listview" data-inset="true"></ul>
                 </div>
         </script>
         <div id="searchPickPlace"></div> 
```

我在这里创建了一个 jsfiddle：http: [//jsfiddle.net/antaeusa/TLGY7/2/](http://jsfiddle.net/antaeusa/TLGY7/2/) 因为我动态地将项目添加到列表视图中。我还为每个项目提供了一个 ID，以便轻松识别已单击的项目，以便我可以将该值传递到另一个页面。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-18T02:00:01.000

您的 javascript 和 html 文件中有一些错误。

在 Jquery Mobile 中定义 listview 时，您必须包含`data-role="listview"`到 a 的定义中`ul`，这样 jquerymobile 就会明白您想要一个 listview 而不是“普通”列表。

```
<ul data-role="listview">
  <!-- List Elements -->
</ul> 
```

您遇到的第二个错误是 html 上没有`data-name`定义属性，而您试图使用 javascript 获取它。

```
$('#searchPickPlace ul').children('li').bind('touchstart mousedown', function(e) {
    alert('Selected Name=' + $(this).attr('data-name'));
}); 
```

如果所选元素没有定义该属性，这显然不起作用。所以你必须在 html 上定义它，像这样：

```
<div id="searchPickPlace">
    <ul data-role="listview">
        <li data-name="Remuera"><!-- List element content --></li>
        <li data-name="Posonby"><!-- List element content --></li>
    </ul>
</div>​ 
```

我修改了您的代码，这是您问题的完整解决方案，希望对您有所帮助：

[http://jsfiddle.net/TLGY7/12/](http://jsfiddle.net/TLGY7/12/)

**注意：**如果您要向列表视图动态添加更多元素，则必须`$('.selector').listview('refresh');`在添加的每个元素上调用该方法。这是文档的链接：

[http://jquerymobile.com/demos/1.2.0/docs/lists/lists-methods.html](http://jquerymobile.com/demos/1.2.0/docs/lists/lists-methods.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-20T04:59:30.240

我知道我回答得太晚了，但可能对其他开发人员有帮助。即使我在寻找相同查询时找到了这个链接，最后我找到了一些简单易用的解决方案。

在这里，我使用了静态数组，但我也使用了动态数组，因此您可以轻松检查差异。

我已经使用自定义列表视图并从 HTML 5 数据库（电话间隙）中检索数据。所以移动开发人员可以编写如下代码，

```
function DB_QuerySuccess(tx, results) {
    console.log("Returned rows = " + results.rows.length);
    var com_id_array = []; // init array     
    var com_name_array = []; // init array
    var com_img_array = []; // init array

    //this will return user_id if user exist else return "no user"
    if (!results.rowsAffected)
    {
        for (var index = 0; index < results.rows.length; index++) 
        {
            var item = results.rows.item(index);
            var com_id = item.com_id; // company id
            var com_name = item.com_name; // company name
            var com_photo = item.com_photo; // company name
            com_id_array.push(com_id);
            com_name_array.push(com_name);
            com_img_array.push(com_photo);

              $('#ls_com_list').append('<li><img id="com_img" src="'+ com_img_array[index] +'" width="100px" height="100px"/><h3>'+com_name_array[index]+'</h3><p>'+com_id_array[index]+'</p><div align="right"><img src="img/add_icon.png" width="20px" height="20px"/><img src="img/icon-action-close.png" width="20px" height="20px" onclick=\'alert("i am at "+"'+ [index]+'"+" position")\'/></div></li>').listview('refresh');
        }
    } 
```

}

因此，当您单击右侧按钮时，警报将弹出并显示当前索引。

我认为 Web 开发人员也可以做同样的事情。

我希望这会对你们有所帮助。

*   [现场演示：自定义列表视图](http://jsfiddle.net/Tkrnx/21/embedded/result/)
*   [获取代码](http://jsfiddle.net/Tkrnx/20/)

# google-apps-script - 具有更改电子邮件地址功能的 Gmail 邮件合并工具

> ID：13925059
> 
> 赞同：0
> 
> 时间：2012-12-18T01:38:25.077
> 
> 标签：google-apps-script

我知道有一些 Gmail 邮件合并工具。是否有任何允许我在 gmail 中使用注册的“发送自”地址？当我在这里的两个脚本中设置不同的发送电子邮件时，它仍然从我的默认 gmail 帐户发送。

[http://www.labnol.org/internet/personalized-mail-merge-in-gmail/20981/](http://www.labnol.org/internet/personalized-mail-merge-in-gmail/20981/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T05:26:05.603

作为开发人员，您可以编写脚本以使用 Google 帐户中可用的任何别名作为“发件人”地址。这是带有示例[的 Google Apps 脚本文档参考（并在下面复制）：](https://developers.google.com/apps-script/class_gmailapp#getAliases)

```
// The code below logs the aliases for this Gmail account and sends an email
// as the first one.
var aliases = GmailApp.getAliases();
Logger.log(aliases);
GmailApp.sendEmail(
    "recipient@example.com", "subject", "body", {from: aliases[0]}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T03:04:00.973

您可以将此应用程序视为邮件合并工具 [http://www.thexs.ca/xsmerge](http://www.thexs.ca/xsmerge) 它可在 Chrome 网上商店（免费）中获得

# windows - 如何在控件的画布上绘制具有每像素 alpha 的位图？

> ID：13925061
> 
> 赞同：4
> 
> 时间：2012-12-18T01:39:07.553
> 
> 标签：windows, delphi, user-interface, graphics, delphi-xe2

**问题**

将具有每像素 alpha 的位图绘制到控件的 Canvas 上的最佳方法是什么？

我的位图数据存储在 32 位像素值的二维数组中。

```
T32BitPixel = packed record
    Blue  : byte;
    Green : byte;
    Red   : byte;
    Alpha : byte;
end; 
```

我的控件是[TCustomTransparentControl](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Controls.TCustomTransparentControl)的后代。

**背景**

对于我正在构建的 GUI，我需要在其他控件和纹理背景上绘制半透明控件。控制图形是使用[AggPasMod](http://aggpasmod.sourceforge.net/)（Anti-Grain Geometry 的一个端口）创建的。

TCustomTransparentControl.Canvas.Handle 提供对[设备上下文](http://msdn.microsoft.com/en-us/library/azz5wt61%28v=vs.80%29.aspx)的访问以进行绘图，但我不确定如何从那里对像素数据进行 blit。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T03:07:10.987

假设您的像素阵列像其中的图像行和像素一样组成，我会这样做。`Canvas`参数是目标画布，和`X`是`Y`坐标，位图将在目标画布中渲染，`Pixels`是像素数组：

```
type
  TPixel = packed record
    B: Byte;
    G: Byte;
    R: Byte;
    A: Byte;
  end;
  TPixelArray = array of array of TPixel;

procedure RenderBitmap(Canvas: TCanvas; X, Y: Integer; Pixels: TPixelArray);
var
  I: Integer;
  Size: Integer;
  Bitmap: TBitmap;
  BlendFunction: TBlendFunction;
begin
  Bitmap := TBitmap.Create;
  try
    Bitmap.PixelFormat := pf32bit;
    Bitmap.Width := Length(Pixels[0]);
    Bitmap.Height := Length(Pixels);
    Size := Bitmap.Width * SizeOf(TPixel);

    for I := 0 to Bitmap.Height - 1 do
      Move(Pixels[I][0], Bitmap.ScanLine[I]^, Size);

    BlendFunction.BlendOp := AC_SRC_OVER;
    BlendFunction.BlendFlags := 0;
    BlendFunction.SourceConstantAlpha := 255;
    BlendFunction.AlphaFormat := AC_SRC_ALPHA;
    AlphaBlend(Canvas.Handle, X, Y, Bitmap.Width, Bitmap.Height,
      Bitmap.Canvas.Handle, 0, 0, Bitmap.Width, Bitmap.Height, BlendFunction);
  finally
    Bitmap.Free;
  end;
end; 
```

# c# - 使用 c# 计算 XML 标记中“元素”的数量

> ID：13925064
> 
> 赞同：0
> 
> 时间：2012-12-18T01:39:29.947
> 
> 标签：c#, xml

我正在使用 C# 读取 XML 文件并计算 XML 标记中有多少“元素”，例如这样...

```
<Languages>English, Deutsche, Francais</Languages> 
```

Languages 标签中有 3 个“元素”：English、Deutsche 和 Francais。我需要知道如何计算它们并返回有多少元素的值。标签的内容可能会随着时间而改变，因为 XML 文件必须扩展/适应其他语言（在需要时）。

如果这是不可能的，请为该问题提出解决方法。谢谢你。

编辑：我还没有想出读取 XML 文件的代码，但我也有兴趣学习如何去做。

编辑 2：*对问题的修改*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T01:46:33.287

```
string xml = @"<Languages>English, Deutsche, Francais</Languages>";
var doc = XDocument.Parse(xml);

string languages = doc.Elements("Languages").FirstOrDefault().Value;
int count = languages.Split(',').Count(); 
```

为了响应您的编辑，这些编辑表明您不是简单地尝试从 XML 元素中提取逗号分隔的字符串，那么您首先存储 XML 的方法是不正确的。正如另一位发帖人评论的那样，它应该是：

```
<Languages>
    <Language>English</Language>
    <Language>Deutsche</Language>
    <Language>Francais</Language>
</Languages> 
```

然后，要获得语言的数量：

```
string xml = @"<Languages>
                   <Language>English</Language>
                   <Language>Deutsche</Language> 
                   <Language>Francais</Language>
               </Languages>";

var doc = XDocument.Parse(xml);

int count = doc.Element("Languages").Elements().Count(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T01:49:43.720

首先，一个“理想”的解决方案：不要将多个信息放在一个标签中。相反，将每种语言放在自己的标签中，如下所示：

```
<Languages>
    <Language>English</Language>
    <Language>Deutsche</Language>
    <Language>Francais</Language>
</Languages> 
```

如果无法做到这一点，请使用多种语言检索标记的内容，使用 拆分`allLanguages.Split(',', ' ')`，并通过检查结果数组的长度来获取计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T01:58:49.010

好的，但为了清楚起见，XML 元素具有非常特定的含义。实际上，您拥有的整个代码块是一个 XML 元素。

```
XElement xElm = new XElement("Languages", "English, Deutsche, Francais");
string[] elements = xElm.Value.Split(",".ToCharArray(), StringSplitOptions.RemoveEmptyEntries); 
```

# android - Android 应用没有启动图标

> ID：13925065
> 
> 赞同：1
> 
> 时间：2012-12-18T01:39:38.320
> 
> 标签：android, eclipse, android-manifest

我已经整理了一个简单的应用程序，当我安装应用程序时，图标会显示，但一旦安装，就没有启动图标。
这是我的 AndroidManifest.xml：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.SiteTools.convertme"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
android:minSdkVersion="8"
android:targetSdkVersion="16" />

<application
android:allowBackup="true"
android:icon="@drawable/launch_icon"
android:label="@string/app_name"
android:theme="@style/AppTheme" >
</application>

</manifest> 
```

我曾尝试重命名图标，但没有帮助，我已经在两台设备上进行了测试，但都没有得到启动图标。
我使用日食。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T01:41:01.497

您需要添加一个 Intent Filter，否则 Android 将不知道要启动什么应用程序。此外，您的应用程序应包含应用程序的名称。我在下面包含了一个名称`someActivity`，请酌情将其更改为您的应用程序。这可以通过将您的应用程序更改为以下内容来完成：

```
<application
android:allowBackup="true"
android:icon="@drawable/launch_icon"
android:label="@string/app_name"
android:theme="@style/AppTheme" >
    <activity 
        android:name="someActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T01:54:20.590

您是否为所有分辨率创建了图标？. 在您的 res 文件夹下，为每个文件夹添加适当的图标大小。

可绘制-hdpi 可绘制-ldpi 可绘制-mdpi 可绘制-xhdpi

您的设备应根据其分辨率从那里获取它

# c++ - 在 case 语句标签中使用函数调用

> ID：13925068
> 
> 赞同：0
> 
> 时间：2012-12-18T01:40:19.837
> 
> 标签：c++, switch-statement

您可以将函数调用作为案例语句标签吗？例如：

```
char x

switch(x)
{
   case isCapital():
      capitalcount++;
      break;

   case isVowel():
      vowelcount++;
      break;
   .
   .
   .
   .
   .

} 
```

这在 C++ 中是否允许？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T01:44:36.793

案例标签中的值需要是一个常量表达式。也就是说，您直接问题的答案是：是的，您可以在 case 标签中调用某些函数。但是，不是您尝试调用的那些。但是，您可以让多个标签引用一组语句：

```
case 'a':
case 'e':
case 'i':
case 'o':
case 'u':
    do_vowels();
    break; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T01:45:08.713

我知道这本身并不能回答您的问题，但是您可以尝试像这样对其进行编码....

```
capitalcount += isCapital(x);
vowelcount += isVowel(x); 
```

isXXX() 函数的布尔返回类型将被提升为 int 并作为 0 (false) 或 1 (true) 添加到计数中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T03:37:37.817

首先：在您*想要*的代码中`isCapital`，`isVowel`不应该是函数（当然也不是函数调用），而是**函子**——因为要检查一个值，他们必须通过参数接收它......

无论如何，您的代码在 C++ 中是不可能的......但可以用一系列函数对来模拟：谓词 + 效果。谓词必须接受一些参数并以布尔值响应。如果谓词是，效果会做`true`。要模拟中断和回退到下一个`case`（即当没有中断时`case`）*效果*函数还必须返回一个布尔值。

示例代码可能如下所示：

```
#include <cctype>
#include <functional>
#include <iostream>
#include <vector>

int main(int argc, char* argv[])
{
    typedef std::vector<
        std::pair<
            std::function<bool(char)>       // predicate
        , std::function<bool()>             // effect: return true if `break' required
        >
    > case_seq_t;

    unsigned digits = 0;
    unsigned upper = 0;
    unsigned lower = 0;
    unsigned total = 0;
    unsigned other = 0;
    case_seq_t switch_seq = {
        {
            // predicate lambda can be replaced by std::bind
            // in this simple case... but need to change param type.
            // std::bind(&std::isdigit, std::placeholders::_1)
            [](char c) { return std::isdigit(c); }
          , [&]() { digits++; return true; }
        }
      , {
            [](char c) { return std::islower(c); }
          , [&]() { lower++; return true; }
        }
      , {
            [](char c) { return std::isupper(c); }
          , [&]() { upper++; return true; }
        }
        // `default` case
      , {
            [](char c) { return true; }
          , [&]() { other++; return true; }
        }
    };

    for (int i = 1; i < argc; i++)
        for (int pos = 0; argv[i][pos]; pos++)
            for (const auto& p : switch_seq)
                if (p.first(argv[i][pos]))
                    if (p.second())
                        break;

    std::cout << "digits=" << digits << std::endl;
    std::cout << "upper=" << upper << std::endl;
    std::cout << "lower=" << lower << std::endl;
    std::cout << "other=" << other << std::endl;
    return 0;
} 
```

不是那么简单，`switch`但（恕我直言）足够明显......并且在某些实际情况下，可能具有更好的灵活性（并且可能具有可维护性）:)

# php - 如何使用onclick调用从地图区域内查询mysql的php函数

> ID：13925070
> 
> 赞同：0
> 
> 时间：2012-12-18T01:40:28.583
> 
> 标签：php, mysql, function, onclick, area

我有 2 个 php 页面。第一个 php 页面有一个查询 MySQL 的函数。第二个 php 页面调用该函数。

查询 MySQL 的函数在被第二个 php 页面调用时可以正常工作：

```
`<?php myfunction($user_id); ?>` 
```

但是，我似乎无法让该函数在第二个 php 页面加载时不触发，而是在用户通过 onclick 在第二个页面上的地图中某个区域的矩形坐标内单击时触发：

```
 `<map id="map_id_01" name="map_name_01"><area shape="poly" id="area_id_01" class="" title="area_title_01" onclick="myfunction($user_id)" coords="360,236,696,236,696,448,360,448,360,237"/></map>` 
```

不知道如何最好地解决这个问题，并将不胜感激任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T01:43:15.877

首先，您需要了解[PHP 和 JavaScript 之间的区别](https://stackoverflow.com/questions/6369313/difference-between-javascript-and-php)。

完成此操作后，您将了解需要`onclick`向服务器触发 AJAX 查询，以便服务器可以响应 MySQL 数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T01:43:36.790

您需要结合使用 javascript 和 php。用户单击矩形，触发一个 javascript 函数，该函数对另一个页面进行 ajax 调用，然后运行 ​​php 函数并将结果返回到原始页面，然后您在 javascript 中对该结果进行操作，无论是显示它用户通过将其放置在 div 中或执行其他功能。PHP是在服务器端运行的，这意味着一旦用户调用页面，所有的php代码都会被执行。

编辑以显示代码：

```
<map id="map_id_01" name="map_name_01"><area shape="poly" id="area_id_01" class="" title="area_title_01" onclick="myfunction()" coords="360,236,696,236,696,448,360,448,360,237"/></map>
<script type='text/javascript'>
    var userId = '<?php echo $user_id; ?>';
    function myFunction() {
        $.ajax({
            async: false,
            type: 'POST',
            url: 'run_function.php',
            data: 'user_id=' + userId,
            dataType: 'json',
            success: function(msg) {
                if(msg.success) {
                   //Do whatever you want to with the return message here
                } else {
                   alert('failed to run the php function because: ' + msg.message);
                }
             }
        });
    </script> 
```

然后在run_function.php...

```
$user_id = $_REQUEST['user_id'];
if($return = myfunction($user_id)) {
    $reply['success'] = true;
    $reply['message'] = $return;
} else {
    $reply['success'] = false;
    $reply['message'] = 'Failed to run function' // whatever error message you want
}
echo json_encode($reply); 
```

**注意：这是一个非常简单的示例，使用 javascript 运行 php 函数并根据它们的回复采取行动。您可能需要编辑此代码以获得所需的结果。此外，要运行 $.ajax，您需要将 jquery 包含在您的 html 中。如果您不为 javascript 查找 xmlhttprequest

# boost - 在 boost::dynamic_bitset 中找到最重要位的有效方法？

> ID：13925073
> 
> 赞同：1
> 
> 时间：2012-12-18T01:41:01.643
> 
> 标签：boost, bitset, boost-dynamic-bitset

有没有一种有效的方法来找到在 a 中设置的最高有效位的索引`dynamic_bitset`？

`find_first`还是我必须使用（找到第一个最低有效位）遍历所有位`find_next`并返回找到的最后一个位？

玩具示例：我的位是（从最高到最低有效）`1010`，代表数字`10`。我想要的函数返回 index `3`。

# c - 我自己的消息队列/fifo

> ID：13925074
> 
> 赞同：-2
> 
> 时间：2012-12-18T01:41:22.067
> 
> 标签：c, linux, ipc

有人可以指导我如何在 IPC 中实现我自己的 FIFO 应用程序，我知道我可以使用 SHM、socket 或使用任何其他 sys-v 或 posix ipc 来做到这一点。

我正在寻找这个的原因是因为我想用我自己的规范构建这个 fifo，它将使我的应用程序与这个应用程序内部的锁定相匹配，这样任何应用程序都只能调用 enqueue 或 dequeue，就像内核将使用 fifo 一样确保它是原子的，只要你写的比 pipe_buff 少。我知道如何构建循环缓冲区队列，但我不确定如何从另一个应用程序调用它，我需要为它构建一个 API 吗？或者是别的什么？

系统是Linux，语言是c。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T02:27:14.757

我强烈推荐使用 POSIX MQ 库。它们是线程安全的，我相信它们可能是持久的。我使用它取得了很大的成功，它让我可以专注于解决手头的问题，而不是自己动手。

# javascript - 淘汰赛：编辑数据，轻松回滚到以前的值

> ID：13925076
> 
> 赞同：3
> 
> 时间：2012-12-18T01:41:29.470
> 
> 标签：javascript, knockout.js

有许多关于在 Knockout 中编辑数据的博客文章和讨论。我遇到的主要问题是，当用户取消编辑操作（或 Ajax 调用出错时）时，您需要一种简单的方法将数据恢复为先前的值。

我对找到的示例并不满意：即使在编辑非常复杂的模型时，我也需要一些非常简单的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T01:41:29.470

这是我找到的解决方案，我分享它是为了了解比我更专业的人可能存在的缺点，当然也可以提供帮助。

单击“编辑”按钮时，我会创建正在编辑的数据的副本。

编辑按钮（即：在带有 foreach 绑定的表格的每一行上）

```
<button data-bind="click: editItem">Edit</button> 
```

从我的视图模型：

```
this.selectedItem = ko.observable();
this.selectedItemCache = ko.observable();
this.editItem = function (item) {
    self.selectedItem (item);
    self.selectedItemCache (ko.mapping.toJS(item)); // ko.mapping.toJS "detach" my item from the view model
} 
```

当用户单击“取消”按钮或用于更新服务器的 AJAX 调用失败时，我从“缓存”可观察到的数据复制：

```
this.cancelEditItem = function () {
    for (var prop in self.selectedItem) {
        if (typeof self.selectedItem[prop] === 'function') {
            self.selectedItem[prop](self.selectedItemCache()[prop]);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T22:56:05.470

Ryan Niemeyer 的“Getting the Most Out of Knockout.js”截屏视频包含了一个很好的方法（以及许多其他有用的技巧）——我建议你去看看。

[http://vimeo.com/51103092](http://vimeo.com/51103092)

他谈到在大约 16:30 恢复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T02:06:16.323

我同意 Nicola 的回答，因为这种方法是最流行的方法。

我已经使用了这个[http://www.knockmeout.net/2011/03/guard-your-model-accept-or-cancel-edits.html](http://www.knockmeout.net/2011/03/guard-your-model-accept-or-cancel-edits.html)这是一种相当完善的方法。它在我的应用程序中运行良好。

# php - 使用 Ajax 的异步 PHP 查询？

> ID：13925078
> 
> 赞同：4
> 
> 时间：2012-12-18T01:41:44.993
> 
> 标签：php, javascript, jquery, ajax, asynchronous

我很难理解这一点。Ajax 是异步的，这是肯定的……它异步调用 PHP，并且 PHP 有一个对数据库的 sql 查询。这意味着PHP sql查询也是异步完成的，对吧？否则，它就达不到目的。但是如果不使用 Ajax，PHP sql 查询将是同步的，是这样吗？我知道如何把它写成代码，但我只是对它在内部的工作方式感到困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T02:45:42.750

SQL 查询是“异步”的，因为它是原始 AJAX 调用的一部分。不要沉迷于过去的术语。客户端和服务器是完全独立的，尤其是在处理 HTTP 请求时，以及在这种情况下。AJAX 的“异步”的含义是它与 Javascript 的其余部分异步处理 - 它不会阻止其他代码执行。但是从那以后，一切都必须是同步的，否则就不行了（不包括AJAX的readystatechange）。

AJAX 请求发送到服务器，服务器查询数据库，服务器响应，Javascript 听到该响应，并且 AJAX 处理程序在响应未被其他 Javascript 阻止时立即处理该响应。

所以不，PHP SQL 查询本身总是同步的；它是异步的 HTTP 请求。

**更新**：

举个例子，这是一个非常剥离的、低级别的 AJAX，大多数库以某种方式包装：

```
var xhr= new XMLHttpRequest();
var params = "x=2&y=3";
var url = "/your/url";
xhr.open("POST", url, true);
xhr.onreadystatechange = function () {
    // The `xhr.readyState` changes based on the client's 
    // The `xhr.status` is set based on the server's response
    // Normally, you check for `readyState` being 4 and `status` being 200
    //   meaning that the request is complete and the HTTP status code is 200 (good response)
    if (xhr.readyState == 4) {
        if (xhr.status == 200) {
            // All good
        }
    } else {

    }
};
xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xhr.send(encodeURIComponent(params)); 
```

当`xhr.send`被调用时，它会向服务器发出异步 HTTP 请求，这就是 Javascript 的情况。`onreadystatechange`监听器是变化时运行的东西`readyState`。值 4 表示它已完成，而`status`200 是您正在寻找的……*无论何时*。

服务器上可能发生任何事情。您可以进行“异步”（不相关）数据库调用，以任何方式联系不同的服务器，以任何原因延迟（达到一定限度）或类似的事情。关键是在服务器返回响应之前，客户端 (Javascript) 上一无所知。服务器每次都可以循环很长时间检查数据库，并且在发生某种变化之前永远不会响应（长轮​​询的一个例子）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T02:25:39.977

好的，你说得非常正确，但这里有一些规范。您有权对数据库进行异步查询。请务必注意，您的 PHP 服务器将与客户端计算机创建一个开放且唯一的数据会话。现在，当请求页面时，客户端将发送一个响应，其中将包含一个脚本（可能在 javascript 中），该脚本将在客户端计算机上运行命令。在您的情况下，其中一些命令对您的服务器进行异步调用，并且您的服务器可以因为会话而记住。然后根据您的服务器对会话的了解，它将根据您的请求为调用提供服务。您可以调用您的数据库服务器或访问会话变量或执行某种在 PHP 中可能更容易的处理。然后，当该处理完成时，服务器将根据唯一会话将响应发送回相关客户端。作为一个重要的附带说明，请记住，您异步执行的任何操作都将在服务器上花费时间并执行它必须执行的操作。如果您在客户端脚本中引用在服务器完成其工作之前由服务器处理的变量，它们将在您的客户端计算机上显示为错误（可能但很可能）。您的数据库调用将按照您的预期异步发生。它们将在您的客户端计算机上显示为错误（可能但很有可能）。您的数据库调用将按照您的预期异步发生。它们将在您的客户端计算机上显示为错误（可能但很有可能）。您的数据库调用将按照您的预期异步发生。

# php - 循环遍历 wordpress 中的页面数组

> ID：13925087
> 
> 赞同：0
> 
> 时间：2012-12-18T01:42:36.983
> 
> 标签：php, arrays, wordpress, loops

我遇到了 wordpress 的这个功能。它显示一个链接以浏览页面。

如果页面是A，那么下一页是B

如果页面是B，那么下一页是C，上一页是A

如果页面是C，那么前一页是B

```
function siblings($link) {
  global $post;
  $siblings = get_pages('child_of='.$post->post_parent.'&parent='.$post->post_parent);
  foreach ($siblings as $key=>$sibling){
    if ($post->ID == $sibling->ID){
        $ID = $key;
    }
}
$closest = array('before'=>get_permalink($siblings[$ID-1]->ID),'after'=>get_permalink($siblings[$ID+1]->ID));

if ($link == 'before' || $link == 'after') { 
    echo $closest[$link]; }
else { 
    return $closest; }
} 
```

但是，当它到达 C 时，“下一个”链接仍然是 C。而当页面是 A 时，“上一个”链接仍然是 A。

如何修改它，当它是 A 时，“上一个”链接是 C，当它是 C 时，“下一个”链接是 A ？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T03:06:59.773

我想用以下方式重写它，它应该做你想要的：

```
$last_item = end( $siblings );

$before = ( $ID-1 > 0 ) ? get_permalink( $siblings[$ID-1]->ID ) : get_permalink( $last_item->ID );
$after = ( $ID+1 < count( $siblings ) )  ? get_permalink( $siblings[$ID+1]->ID ) : $siblings[0]->ID;

$closest = array( 'before' => $before, 'after' => $after ); 
```

在哪里 ？是[三元运算符](http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)。

# data-mining - 来自观察聚合的高维聚类

> ID：13925095
> 
> 赞同：3
> 
> 时间：2012-12-18T01:43:44.153
> 
> 标签：data-mining, cluster-analysis, statistics

我陷入了这个奇怪的高维聚类问题。这是一个类比来解释它。

想象一下，有 2^10 个人进入森林，我们想知道那里生活着多少鸟类。

这些鸟在 128 个维度上彼此不同，并且所有维度都是二进制的。即：鸟要么有大喙，要么有小喙，要么有蓝色的翅膀，要么没有，等等。（每种鸟类可以用128位表示）

我的问题是，当这些人离开森林时，我们只有他们观察*的汇总*：

“我看到了 8 只鸟，3 只长着蓝色的喙（5 只没有），4 只长着蓝色的翅膀（4 只没有），1 只长着大喙（7 只没有），等等”。他们*不*报告他们观察的个别特征，而只报告他们观察的汇总。

还有两个额外的约束：

i) 所有物种至少观察一次；ii) 物种数量少（~2^5）。

当然，我们可以汇总它们的聚合（3000 次观察，357 只鸟有大喙，等等）。但是集群呢？

所以问题是：

1.  我们如何才能知道那里生活着多少物种？

2.  我们如何找出每个物种的特征？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:21:08.803

由于`2^128 = 340282366920938463463374607431768211456`，您需要相当大的样本量才能得出有效的结论。观察到的每只鸟很容易都是独一无二的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T20:05:08.557

如果`x`一个人对一组鸟类的聚合观察，那么您可以通过矩阵乘积来近似它，`Dz`其中`D`是一个矩阵，其列代表个体鸟类的特征，并且`z`是每只鸟的数量的向量。

如果您假设只观察到少量鸟类，那么这将限制 的大小`z`。

这个问题与稀疏字典学习问题非常相似。

这里有几个链接，它们都描述了稀疏字典学习（和相关问题）并提供了解决它的软件： http: [//spams-devel.gforge.inria.fr/](http://spams-devel.gforge.inria.fr/)和[http://www.ux.uis.no /~karlsk/dle/index.html](http://www.ux.uis.no/~karlsk/dle/index.html)

# sql-server-ce - 将 odata 服务中的行加载到 windows phone 8 数据库中

> ID：13925096
> 
> 赞同：0
> 
> 时间：2012-12-18T01:43:47.940
> 
> 标签：sql-server-ce, odata, windows-phone-8

我正在编写一个 windows phone 8 应用程序，它将使用来自 odata 源的北风数据库中的数据，将数据添加到本地 sql server 数据库（离线存储），对数据进行更改并将它们发送回远程数据库重新上线。

我坚持的一点是解析odata数据并将其写入本地数据库。

我可以使用以下代码使用数据：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/hh286405 (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh286405(v=vs.105).aspx)

我可以创建一个本地数据库并对行进行修改：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/hh286405 (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh286405(v=vs.105).aspx)

但我不能终生将 odata 放入本地数据库。任何帮助都非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:49:57.293

使用 jaydata 使用 oData 从远程数据库获取记录并将它们持久保存到本地存储只需要 ~10 行：（dislamer：我为 JayData 工作）

```
 function sync(remote, local) {
            var suppliers = remote.Suppliers.toArray();
            var categories = remote.Categories.toArray();
            var products = remote.Products.toArray();
            return $.when(suppliers, categories, products)
                    .then(function (suppliers, categories, products) {
                        local.addMany(suppliers);
                        local.addMany(categories);
                        local.addMany(products);
                        return local.saveChanges();
                    });
        } 
```

# javascript - 用 JavaScript 中的范围替换字符串中的子字符串

> ID：13925103
> 
> 赞同：7
> 
> 时间：2012-12-18T01:44:35.083
> 
> 标签：javascript, string, replace

给定起始位置和长度，如何替换字符串的子字符串？

我希望有这样的事情：

```
var string = "This is a test string";
string.replace(10, 4, "replacement"); 
```

所以这`string`将等于

```
"this is a replacement string" 
```

..但我找不到类似的东西。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T01:46:37.783

像这样：

```
var outstr = instr.substr(0,start)+"replacement"+instr.substr(start+length); 
```

您可以将其添加到字符串的原型中：

```
String.prototype.splice = function(start,length,replacement) {
    return this.substr(0,start)+replacement+this.substr(start+length);
} 
```

（之所以这样称呼`splice`，是因为它与同名的Array函数非常相似）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-12T20:48:38.323

对于它的价值，这个函数将基于两个索引而不是第一个索引和长度来替换。

```
splice: function(specimen, start, end, replacement) {
    // string to modify, start index, end index, and what to replace that selection with

    var head = specimen.substring(0,start);
    var body = specimen.substring(start, end + 1); // +1 to include last character
    var tail = specimen.substring(end + 1, specimen.length);

    var result = head + replacement + tail;

    return result;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T01:52:55.797

短正则表达式版本：

```
str.replace(new RegExp("^(.{" + start + "}).{" + length + "}"), "$1" + word); 
```

例子：

```
String.prototype.sreplace = function(start, length, word) {
    return this.replace(
        new RegExp("^(.{" + start + "}).{" + length + "}"),
        "$1" + word);
};

"This is a test string".sreplace(10, 4, "replacement");
// "This is a replacement string" 
```

**演示：http:** [//jsfiddle.net/9zP7D/](http://jsfiddle.net/9zP7D/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T01:53:41.037

[下划线字符串库](https://github.com/epeli/underscore.string)有一个拼接方法，它完全按照您指定的方式工作。

```
_("This is a test string").splice(10, 4, 'replacement');
=> "This is a replacement string" 
```

库中还有许多其他有用的功能。它的时钟大小为 8kb，可在[cdnjs](http://cdnjs.cloudflare.com/ajax/libs/underscore.string/2.3.0/underscore.string.min.js)上找到。

# .net - 使用 DOTNET REGEX 匹配正确转义的引号

> ID：13925106
> 
> 赞同：0
> 
> 时间：2012-12-18T01:44:56.337
> 
> 标签：.net, regex, powershell

我有一种情况可以避免将用户提供的字符串注入到我的 PowerShell 代码中。虽然我确实有正确的转义代码（复制每个引号，并且带有单引号字符串的powershell接受5个不同的引号字符，包括智能引号，但现在让我们假设它接受'我想要做的是有一个正则表达式告诉我字符串是否被正确转义，转义是通过将引号加倍来完成的，因此字符串如下

```
hello ' there 
```

坏的时候

```
hello '' there 
```

是安全的

但是 3 个引号（或 5 个或 7 个等）也很糟糕，所以

```
hello ''' there 
```

也很危险

所以我试图找到一个可以验证字符串是否正确转义的正则表达式，因为没有奇数单引号模式。

我知道像这样的标准正则表达式计数组是不可能的，但是对于 dotnet 捕获组，我希望做这样的事情。

```
('\b(?<DEPTH>)|\b'(?<-DEPTH>)|[^']*)*(?(DEPTH)(?!)) 
```

但我无法让它工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T18:12:37.370

就因为是你，@klumsy：

```
"(?ix:                 # ignore whitespace and comments
    ^                  # start at the beginning
    (?(D)              # if 'D' is defined...
        (?<-D>')       #    match a quote and undefine D
        |              # otherwise
        (?:
            (?<D>')    #    match a quote and define D
            |
            [^']       #    or match anything else
            )
    )+                 # as many times as we can
    (?(D)              # if 'D' is STILL defined...
        ($!)           #    then don't match
        |              # otherwise
        [^']*          #    match anything except '
    )$                 # all the way to the end
)" 
```

这将只匹配那些总是有成对引号的字符串，但不匹配那些出现单引号 ' 或奇数个引号 ''' 的字符串。据我所知，仅适用于 .Net 正则表达式。

当然，您可以省略第一行和最后一行，只要删除所有空格和注释即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:27:54.693

为什么不简单地将一个 ' 替换为两个 ''：

```
> $a = read-host
foo ' bar
> $a
foo ' bar
> $a -replace "'","''"
foo '' bar 
```

# java - 没有为操作定义结果。在 xml 上验证表单内容时

> ID：13925111
> 
> 赞同：0
> 
> 时间：2012-12-18T01:45:41.700
> 
> 标签：java, forms, struts2, validation, xml-validation

我正在使用 xml 文件验证从 struts2 创建一个简单的注册表单。我的问题是每次我点击表单上的提交。出现此错误。

```
WARNING: Could not find action or result
No result defined for action actions.Register and result input
    at com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:369)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:271)
    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
    at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:238)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:238)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:191)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:252)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:193)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:544)
    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Dec 18, 2012 9:41:26 AM com.opensymphony.xwork2.util.logging.commons.CommonsLogger error
SEVERE: Exception occurred during processing request: No result defined for action actions.Register and result input
No result defined for action actions.Register and result input
    at com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:369)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:271)
    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
    at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:238)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:238)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:191)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:252)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:193)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:544)
    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

这是我的 struts.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <constant name="struts.devMode" value="false" />
    <constant name="struts.ui.theme" value="simple" />

    <package name="formvalidate" namespace = "/" extends="struts-default">
     <action name ="register" class = "actions.Register" method ="execute">
        <result name ="success">/thankyou.jsp</result>
     </action>
   </package>

</struts> 
```

注册.jsp

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<%@ taglib prefix="s" uri="/struts-tags"%>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>Register</title>

</head>
<body>
    <h3>Register for a prize by completing this form.</h3>

    <s:form action="register" validate = "true">

        <label>UserName</label>
        <s:textfield name="userBean.username"
            label="User Name" />
        <br /><s:fielderror/>

        <s:submit></s:submit>
    </s:form>

</body>
</html> 
```

和 Register-validation.xml

```
<!DOCTYPE validators PUBLIC "-//Apache Struts//XWork Validator 1.0.3//EN"
    "http://struts.apache.org/dtds/xwork-validator-1.0.3.dtd">
<validators>
    <field name="userBean.username">
        <field-validator type="requiredstring">
            <message>User name is required.</message>
        </field-validator>
    </field>
</validators> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T02:57:04.653

您需要在您的操作中提供一个`result`命名，以便在验证失败时查找此名称。`input``struts 2``result`

所以你需要添加类似的东西

```
<action name ="register" class = "actions.Register" method ="execute">
        <result name ="success">/thankyou.jsp</result>
        <result name ="input">/error.jsp</result>
</action> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:31:30.483

嗨试试这个可能会有所帮助。

```
<%@taglib prefix="s" uri="/struts-tags"%>
<s:form action="register" class="Register">
  <s:result name="success">/thankyou.jsp</s:result>
  <s:result name="error">/error.jsp</s:result>
</s:form> 
```

# perl - 报告在 Perl 中调用给定函数的所有函数层次结构

> ID：13925113
> 
> 赞同：3
> 
> 时间：2012-12-18T01:45:48.720
> 
> 标签：perl

给定一个函数名称，我想报告调用层次结构“一直到顶部”。

例如，

```
# ./find.pl functionName
functionName
caller
    caller2
    ...
        callerN 
```

在上面的输出中，我了解到 callerN 是“顶级”函数，它最终调用了“最低级”functionName 函数。

我一直在努力做到这一点，但实施总是有缺陷。它不够可靠，我对此没有信心。

有什么东西可以做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T10:16:47.147

[NYTProf](http://search.cpan.org/~timb/Devel-NYTProf-4.09/lib/Devel/NYTProf.pm)是一个调试包，允许对函数调用进行非常细粒度的检查。它可以输出到 HTML 以查看详细的（运行时）配置文件。根据您的要求，查看它也可以输出的调用图可能会有所帮助。

示例代码：

```
#!/usr/bin/perl
use strict;
use warnings;

&say_hi;

sub say_hi {
    print &hello;
}
sub hello {
    return "Hello world!\n";
} 
```

调用：

```
$ perl -d:NYTProf hello.pl 
```

生成一个`nytprof.out`在当前目录中调用的文件，它`nytprof`可以解析：

```
$ nytprof nytprof.out --open 
```

这将创建一个名为`nytprof`并自动在分析结果页面上为您打开浏览器的目录。有趣的部分可能是您可以下载的图表（但它们也位于`nytprof`目录中）。这些调用图按层次组织，可以深入了解程序的哪些部分调用了哪些函数。这个简单程序的调用图如下所示：

![简单的 hello world 程序的调用图](../Images/819debbe0300e7254e5e39f496d2284d.png)

PS：图表以点文件的形式提供。要创建一个 SVG `graph.dot`，比如说

```
$ dot -Tsvg -o graph.svg graph.dot 
```

更多在`dot`手册中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:43:25.870

你可以`use Carp`和它的`cluck`函数，它打印调用堆栈。有关更多信息，请参阅他们的[文档](http://perldoc.perl.org/Carp.html)。

```
use strict;
use warnings;

use Carp qw(cluck);

&subsub;

sub callstack {
    cluck "waaah";
}

sub subsub {
    &callstack;
} 
```

输出：

```
$ perl /tmp/test.pl
waaah at /tmp/test.pl line 10
    main::callstack called at /tmp/test.pl line 14
    main::subsub called at /tmp/test.pl line 7 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T09:55:30.000

如果实际运行代码可行，可以使用 caller() 函数，或者封装版本的[Devel::Stacktrace](http://search.cpan.org/~drolsky/Devel-StackTrace-1.30/lib/Devel/StackTrace.pm)。

如果您依赖代码分析... [Lscharf 的 PPI 和 GraphViz 的组合](http://www.teragridforum.org/mediawiki/index.php?title=Perl_Static_Source_Code_Analysis#Perl_Subroutine_Call_Tree)可能会有用。但是，不知道它是否是最新的，或者它是否捕获了无数边缘情况中的任何一种，例如上面 ikegami 提到的。

# jquery - 为什么我不能从我的文件上传进度条获得异步行为？

> ID：13925118
> 
> 赞同：2
> 
> 时间：2012-12-18T01:46:21.963
> 
> 标签：jquery, asp.net, file-upload

我敢肯定，我已经踏上了许多以前的步骤，但似乎无法解决这个问题。目标是为具有实时进度条（可能用于多个文件）的 ASP.NET 2.0 站点创建文件上传页面。

我已经实现并测试了解决方案的大部分内容。但愚蠢的是，我似乎无法让它全部一起工作。

1.  构建了一个自定义 HttpModule，用于处理相关请求的 PreRequestHandlerExecute 事件（最初使用 BeginRequest——但我想访问 Session），并使用 HttpWorkerRequest 对象以块的形式解析传入的表单发布数据。实时进度保存到 Session。

2.  在同一应用程序中构建 Web 服务，该应用程序提供 ScriptMethod 将 JSON 返回到 jQuery 请求，其中包含从 Session 中提取的进度信息。对此进行了测试，并且可以正常工作。

**我的问题是我无法在 (1) 正在进行时对 (2) 中的 ScriptMethod 进行 jQuery*轮询*。** jQuery 调用似乎只是在某个地方排队，一旦上传完全发布，它们都会突然返回“100%”。所以异步部分不起作用。

我尝试过的事情：

*   使用 .ajaxForm()（jQuery Forms 插件）提交文件上传帖子。
*   使用 IFRAME 进行嵌套的各种场景。
*   当我从第一页提交上传时，有一个单独的页面（在单独的浏览器选项卡中）运行轮询 jQuery。轮询仍然停止并排队，直到第一页完成。

我在网上看到了其他*非常*相似的解决方案，其他人声称对他们有用，所以它一定是可能的，我只是缺少一些基本的东西。

**更新：**

问题已解决，现在一切正常。请参阅下面关于 SessionState 锁定的我自己的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:50:34.317

我终于偶然发现了原因：ASP.NET SessionState 锁定。

这个问题在这个 SO 帖子中被优雅地提出和回答：[ASP.net session request queueing](https://stackoverflow.com/questions/4318965/asp-net-session-request-queuing)

与 ASP.NET 文件上传实时进度有关的任何在线材料中都没有提到这方面，并且我在上面最初评论中提到的至少一个解决方案未能`EnableSessionState="false"`在其上传页面的指令中明确设置 - 可能导致一些对其使用的投诉。（请注意，您也可以设置为 Readonly 以获得读写器锁定的好处）。

简而言之，一旦您为用户实例化任何 Session 对象，该用户的所有未来并发页面请求将默认阻塞，因为 EnableSessionState 默认为 True。老实说，我很惊讶我在职业生涯的早期从未遇到过这个问题。无论如何，我希望它可以帮助别人。作为记录，我确实有实时进度条，现在在 ASP.NET 2.0 中工作得很好，无需使用 Flash 或 HTML5——现在通过应用程序状态跟踪状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:03:08.573

我还将对上面引用的 2 个链接做一些非常简短的评论，以帮助其他人避免被这些代码库中的一些严重问题所困扰：

*   Sunasara Imdadhusen 的带有进度条的 ASP.NET 文件上传：这个示例看起来很漂亮，但实际上没有用，因为它只在文件上传已经完全完成*后*跟踪将文件写入磁盘的进度（通常是大文件的较长部分） .

*   ASP.NET 文件通过 Travis Whidden 的上传文件进度支持直接发布到磁盘：这是一个更好的起点，因为此代码确实实现了自定义 HttpModule 以实时监控上传。但是缓冲处理类FileProcessor.cs有各种bug，应该重写。此外，根据 HTTP 规范从标头本身中提取表单后边界字符串也是最安全的。

最后，对于那些使用 .NET 4.0 和 MVC 3+ 的人来说，由于新的 Request.GetBufferlessInputStream() 方法，等效的解决方案要简单得多——有关详细信息，请参阅本文：http: [//vanacosmin.ro/Articles/Read/AjaxFileUpload](http://vanacosmin.ro/Articles/Read/AjaxFileUpload)

# linq - Linq 查询加入子查询

> ID：13925121
> 
> 赞同：0
> 
> 时间：2012-12-18T01:46:37.010
> 
> 标签：linq

我正在尝试使用 LINQ to Entities 查询重现 SQL 查询。以下 SQL 工作正常，我只是不知道如何在 LINQ 中执行此操作。我今天尝试了几个小时，但我只是错过了一些东西。

```
SELECT 
  h.ReqID,
  rs.RoutingSection
FROM ReqHeader h
JOIN ReqRoutings        rr ON rr.ReqRoutingID = (SELECT TOP 1   r1.ReqRoutingID  
                                                FROM ReqRoutings r1
                                                WHERE r1.ReqID = h.ReqID 
                                                ORDER BY r1.ReqRoutingID desc)
JOIN ReqRoutingSections rs ON rs.RoutingSectionID =  rr.RoutingSectionID 
```

编辑***

在查看了其他示例（包括 Miki 提供给她的示例）之后，我得以完成这项工作。这是对我有用的代码：

首先，我创建了一个名为 route 的查询来保存我需要加入的最高记录

```
var route = (from rr in context.ReqRoutings
                     where rr.ReqID == id
                     orderby rr.ID descending
                     select rr).Take(1); 
```

然后我可以加入我的申请表和 ReqRoutings 查找表

```
var header = (from h in context.ReqHeaders
              join r in route on h.ID equals r.ReqID
              join rs in context.ReqRoutingSections on r.RoutingSectionID equals rs.ID
              where h.ID == id

              select {ReqID = h.ID,
                      RoutingSection = rs.RoutingSection} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:52:35.883

我正在使用 Northwnd 示例数据库 Customers,Orders,Employees 表在这里我按客户和订单的employeeid 获得前 1 个订单组请告诉我这是否符合您的要求

```
var ord = from o in NDC.Orders
          orderby o.OrderID descending
          group o by o.CustomerID into g                     
          select new {CustomerID=g.Key,Order=g.OrderByDescending(s=>s.OrderID).First() };

var res1 = from o in ord
           join emp in NDC.Employees 
           on o.Order.EmployeeID equals emp.EmployeeID into oemp
           select new {Order=o.Order,employee=oemp };

Response.Write(res1.ToList().Count);
foreach (var order in res1)
{
    Response.Write(order.Order.CustomerID + "," + 
                     order.Order.OrderID + ","+ 
                     order.Order.EmployeeID+"<br/>");
} 
```

// 上面的代码正在运行。我尝试将您的查询转换为 linq 并将您的数据上下文名称替换为“NDC”

```
var ord = from rr in NDC.ReqRoutings
          orderby rr.ReqRoutingID descending
          group rr by rr.ReqID into g
          select new 
          { 
              ReqID = g.Key, 
              ReqRoutings = g.OrderByDescending(s => s.ReqRoutingID).First() 
          };

var res1 = from o in ord
           join emp in NDC.ReqRoutingSections on o.ReqRoutings.RoutingSectionID 
             equals emp.RoutingSectionID into oemp
           select new { ReqRoutings = o.ReqRoutings, employee = oemp };

Response.Write(res1.ToList().Count);
foreach (var order in res1)
{
    Response.Write(order.ReqRoutings.ReqID + "," + 
                    order.ReqRoutings.ReqRoutingID + "," + 
                    order.ReqRoutings.RoutingSectionID + "<br/>");
} 
```

请告诉它是否对您有帮助

# wix - 如何使用 /passive 和“/forcerestarteventually”安装 MSI

> ID：13925122
> 
> 赞同：1
> 
> 时间：2012-12-18T01:46:47.643
> 
> 标签：wix, windows-installer

我正在使用`msiexec.exe`该选项安装 MSI `/passive`，以阻止取消。

问题是，如果 Windows Installer 检测到需要重新启动系统，安装完成后会立即重新启动，这会中断用户的工作。

我可以用它`/norestart`来避免中断。

但是，有没有办法先*延迟强制重启？*像`/forcerestarteventually`什么？

在 NSIS 安装程序中，我只调用 Windows`shutdown.exe`实用程序。我想在自定义操作中使用`/norestart`and`SystemRebootPending`是一种可能性。

这种方法有什么问题吗，还是有更简单的方法？

使用 WIX 为 XP / Win7 开发 MSI - 在 Windows Installer 版本要求上相当容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:12:22.607

没有“最终强制重启”选项。但是，[重新启动管理器](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/44b7975a-0093-4c8f-9a14-2a6bfd7a68a5)API 可以消除或减少完成安装或更新所需的系统重新启动次数。自定义 Windows 安装程序可以设计为调用重新启动管理器 API 以直接关闭和重新启动应用程序和服务，以避免需要重新启动系统。在系统重启不可避免的情况下，安装程序可以使用 InitiateShutdown 或 ExitWindowsEx 函数来安排它，以最大限度地减少对用户的干扰。请参阅主要的重新启动管理器文档，但也请参阅Windows 安装程序文档中的将 Windows 安装[程序与重新启动管理器一起使用](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/821739ff-f7a7-4192-ad34-254aa7d74d13)部分。

# asp.net-mvc - 自定义 EditorTemplate 未在 MVC4 中用于 DataType.Date

> ID：13925127
> 
> 赞同：4
> 
> 时间：2012-12-18T01:47:20.897
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在使用[Microsoft 的说明](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806)将 MVC3 应用程序升级到 MVC4 。一切都进行得相当顺利 - 除了我的一些日期模型属性现在呈现不同的情况。例如，这些属性之一在 viewmodel 中定义如下：

```
[Required(ErrorMessage = "Required")]
[DataType(DataType.Date)]
[RegularExpression(@"([1-9]|0[1-9]|1[012])...",
    ErrorMessage = "Format is mm/dd/yyyy")]
[FormatHint("mm/dd/yyyy")]
[InputSize("small")]
public string Date { get; set; } 
```

在升级到 MVC4 之前，这将通过调用来呈现，该调用`@Html.EditorFor(m => m.Date)`将使用自定义 EditorTemplate -`String.cshtml`模板（因为它是一个字符串！）。我有一些自定义数据注释来格式化 html，因此它在客户端使用字段布局、jQueryUI 和 twitter Bootstrap。验证是通过不显眼的 jquery 验证完成的。无论如何，这就是它之前呈现的方式：

![日期编辑器](../Images/6eb197446f0faf84093ea3f05d02b726.png)

现在我正在使用 MVC4，`String.cshtml`不再为此属性调用编辑器模板。它呈现如下（我假设在 Chrome 中使用 HTML5 编辑器的东西）：

![日期编辑器 mvc4](../Images/ecdb53c66c07e0eb43190eaa0efec4cc.png)

该`input`元素看起来几乎相同 - 所有 jQuery 验证位都在其中 - 唯一的区别似乎是`type`属性现在是`type="date"`，以前是`type="text"`。

我想继续`String.cshtml`为此数据类型使用 EditorTemplate。我在想可能有一个数据注释可以放在 ViewModel 属性上，以便为`@Html.EditorFor(...)`. 如果不是这样，我想知道我可以编写的自定义 EditorTemplate 来劫持 MVC4 的格式（我已经尝试过`DateTime.cshtml`- 它也没有被调用）。如果不是其中任何一个，那么我愿意接受有关如何让我的属性渲染像以前那样的建议。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-18T14:48:50.877

在`MVC4`中，使用的模板由 确定：

1.  如果`UIHintAttribute`有的话
2.  如果`DataTypeAttribute`有的话
3.  物业类型

在`MVC3`中，`DataTypeAttribute`未使用。

您的财产有

```
[DataType(DataType.Date)] 
```

所以`Date.cshtml`使用了模板。如果不存在，则执行默认渲染。

您有两种选择来解决您的问题：

1.  `UIHint("String")`在您的财产上添加一个，或
2.  将您的编辑器模板从 重命名`String.cshtml`为`Date.cshtml`

# windows-phone-8 - 添加辅助 Windows Phone 8 磁贴

> ID：13925129
> 
> 赞同：5
> 
> 时间：2012-12-18T01:47:24.133
> 
> 标签：windows-phone-8

我有一个应用程序向用户的主屏幕添加辅助磁贴。我想默认使该图块变宽。然而，尽管启用它是一个宽磁贴，但在最初添加时它永远不会宽，这迫使用户手动调整它的大小。

我真的很想避免让用户手动调整磁贴的大小，并且有一个示例应用程序肯定会通过按下按钮添加一个宽磁贴。不幸的是，他们用来执行此操作的代码是预编译和模糊的。

我知道必须可以添加一个在添加时已经很宽的辅助宽图块。非常感谢您在这件事上的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T06:28:44.833

不，您不能强迫用户使用宽磁贴。

# ajax - wordpress 内部的 AJAX 只返回 0

> ID：13925132
> 
> 赞同：1
> 
> 时间：2012-12-18T01:47:48.597
> 
> 标签：ajax, wordpress

[jsfiddle](http://jsfiddle.net/D8vE9/)上有一个示例（php 文件位于 css textarea 中）。当您更改 select#main_cat 时，ajax 会查找子类别并将它们输入到 select#sub_cat 中。

唯一的问题是结果总是 0。我不确定是什么问题。

感谢任何帮助！

函数.php

```
function implement_ajax() {
    if(isset($_POST['main_catid'])) {
        $categories=  get_categories('child_of='.$_POST['main_catid'].'&hide_empty=0');
          foreach ($categories as $cat) {
            $option .= '<option value="'.$cat->term_id.'">';
            $option .= $cat->cat_name;
            $option .= ' ('.$cat->category_count.')';
            $option .= '</option>';
          }

          echo '<option value="-1" selected="selected">Scegli...</option>success'.$option;
        die();
    } // end if

}

add_action(‘wp_ajax_my_special_action’, ‘implement_ajax’);
add_action(‘wp_ajax_nopriv_my_special_action’, ‘implement_ajax’); 
```

索引.php

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" ></script>
<script>

$(function(){
            $('#main_cat').change(function(){
                    var $mainCat=$('#main_cat').val();

                    // call ajax
                     $("#sub_cat").empty();
                        $.ajax({
                            url:"/wp-admin/admin-ajax.php",
                            type:'POST',
                            data:'action=my_special_action&main_catid=61',// + $mainCat,

                             success:function(results)
                                 {
                                //  alert(results);
                $("#sub_cat").removeAttr("disabled");
                $("#sub_cat").append(results);
                $("#asdf").text(results);
                                        }
                                   });
                          }
                                    );
});

</script>
wp_dropdown_categories('show_count=0&selected=-1&hierarchical=1&depth=1&hide_empty=0&exclude=1&show_option_none=Main Categories&name=main_cat');
?>
<select name="sub_cat" id="sub_cat" disabled="disabled"></select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T03:40:02.757

尝试这个：

```
$("#sub_cat").empty();
$.ajax({
    url : "/wp-admin/admin-ajax.php",
    type : 'POST',
    data : { // pass data as an objet
        action : 'my_special_action',
        main_catid : 61 // + $mainCat,
    },
    dataType : 'html', // specify html output
    success : function(results)
    {
        //  alert(results);
        $("#sub_cat").removeAttr("disabled");
        $("#sub_cat").append(results);
        $("#asdf").text(results);
    }
}); 
```

# javascript - 使用Jquery限制浏览器窗口高度不能低于200 px？

> ID：13925135
> 
> 赞同：1
> 
> 时间：2012-12-18T01:48:17.577
> 
> 标签：javascript, jquery, html, browser, screen

我希望用户在窗口大小小于 200 px 时不能拖动浏览器的周围线并调整浏览器的大小；

```
//if ($(window).height > 200){
$(window).resize(function() {
after_resize(function(){
    Book.zoom_auto();
    Book.book_position();
    Book.dragdrop_init();
    calculate_zoom_factor();

    if ($(".viewportBinder").length){                   
    $("#view").css('height',$(window).height());
    $("#view").css('width',$(window).width());  
    content = element.viewport('update');
    }

}, 300);
});
//} 
```

如果大小小于 200px，这个 if 语句可以命令不做任何事情，但是，是否可以不允许用户拖动屏幕？（目前的情况是用户仍然可以拖动到小于 200px 的高度，但它不会做任何事情）谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T01:51:21.880

无法控制用户是否可以从 Javascript 调整浏览器窗口的大小或移动浏览器窗口。

..如果可以的话，想象一下您在弹出窗口和垃圾邮件广告中遇到的问题（！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T02:14:54.683

如果浏览器允许您这样做[`window.resizeTo(w,h)`](https://developer.mozilla.org/en-US/docs/DOM/window.resizeTo)，那么您可以设置它。但是现代浏览器通常默认禁用该方法。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2015-12-23T11:37:38.767

似乎媒体正在这样做： [https ://medium.com](https://medium.com)

# innodb - 一列的多个表外键..有可能吗？

> ID：13925139
> 
> 赞同：0
> 
> 时间：2012-12-18T01:48:53.043
> 
> 标签：innodb, foreign-key-relationship

我有几个实体，可以有多个关系。

例如，我有以下实体：

1.  实体类型
2.  标签
3.  tag_assignment
4.  news_post
5.  帐户

在 entity_type 表中描述了我在项目中拥有的所有实体（例如新闻文章、博客文章、消息、帐户、所有内容） Entity_type 表只有 id 和 name 字段，name 字段描述模型类名称以提高可用性

标签实体只有 id 和 name。它是独立实体，稍后使用 tag_assignment 实体映射到其他实体

标签分配实体有 id、tag_id、entity_type_id 和 entity_id。Entity_type_id 描述了我可以在其中找到实体，entity_id 指定表中的实体。

所以我想从一列到多张表制作以下组合外键：

1.  tag_assignment.entity_type_id => entity_type (id)
2.  tag_assignment.entity_id => news_post (id), account (id) 等

是否可以制作这个组合键？我的意思是如果我从 entity_type 表中删除一行来建立依赖关系，那么其他表中的所有内容都将被删除/更新，如果我要删除帐户，则只有具有帐户表外键的 tag_assignments 将被删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T05:37:10.580

您应该通过提取一个名为`entity`. 该表的概念类似于 OOP 中的抽象类。您在数据库中可能拥有的`news_post`和其他`account`实体*都*`entity`应该引用该表。通过这种方式，您可以引用您现在拥有或将来可能拥有的任何具有公共特定位置的实体。

![在此处输入图像描述](../Images/6048bb7880a4c778156abdde344bd116.png)

此外，您可能想熟悉[EAV 模型](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)。这可能会帮助您解决类似的设计问题。

# .net - C# 如何管理循环内 new 运算符分配的内存？

> ID：13925141
> 
> 赞同：3
> 
> 时间：2012-12-18T01:48:58.850
> 
> 标签：.net, memory-management, new-operator

例如：

```
for (i=0;i<10;i++)
{
   myclass = new myclass();
   // do stuff with myclass
} 
```

问题：

1.  在这种情况下，通过 10 次分配分配的所有内存将如何被检索？
2.  执行结束时我的内存占用是多少？
3.  使用 C++ 中的删除功能，可以更好地控制这一点，但在这种情况下，对于第二次迭代，myclass 会简单地进行新的分配并继续前进吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T01:50:41.630

由于在下一次迭代*之后不再有对每个新对象的引用，因此它们有资格被垃圾收集。但是因为你不知道垃圾收集*何时*会发生，所以对于最终的内存占用量可能没有直接的答案。

有关详细信息，请参阅[MSDN：垃圾收集](http://msdn.microsoft.com/en-us/library/0xy59wtx.aspx)。

[* 除非构造函数在某个地方添加对对象的引用，否则它会粘住。]

# silverlight - WP 7.5 中的滚动视图

> ID：13925143
> 
> 赞同：0
> 
> 时间：2012-12-18T01:49:36.343
> 
> 标签：silverlight, windows-phone-7.1

这是我的页面截图 [链接](http://i.stack.imgur.com/HrAKV.png)

数量问题：

1：如果我向上滚动它会覆盖我的笔记背景，所以看起来不太好。如何将显示文本限制为仅在注释背景中显示，如果向上滚动，上方的文本将消失？

2：如果我在底部有更多文字，它会剪切我的文字。所以它没有显示我所有的文字。

这是我的xml

```
<StackPanel x:Name="ContentPanel" Grid.Row="1" Margin="14,0,10,0">
            <ScrollViewer x:Name="textScroller" Grid.Row="2">
                <StackPanel x:Name="Resep" HorizontalAlignment="Center" Margin="0,40,0,0" Height="Auto" VerticalAlignment="Center" Width="362">
                    <TextBlock Text="{Binding LineTwo}" Foreground="Black" Height="393" MaxWidth="362" TextWrapping="Wrap" Margin="20,30,1,0"/>
                </StackPanel>
            </ScrollViewer>
        </StackPanel>
    </Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:10:55.100

您需要将`Height`和`Width`属性添加到 ScrollViewer。

# c# - 如何根据不同对分组的列值选择行？

> ID：13925144
> 
> 赞同：0
> 
> 时间：2012-12-18T01:49:39.580
> 
> 标签：c#, sql, linq

我的数据库中有以下信息：

```
 TO | FROM |    DATE   |  PRICE
AAA |  BBB | 12/3/2012 |  $100
AAA |  CCC | 12/3/2010 |  $200
AAA |  BBB | 10/3/2010 |  $450
BBB |  CCC | 09/7/2010 |  $270
BBB |  AAA | 06/9/2011 |  $130
AAA |  CCC | 12/3/2013 |  $176 
```

我想编写一个查询（或最好是 LINQ 表达式）来选择最近的 TO-FROM 对，因此根据上表，我希望在查询中返回以下数据：

```
 TO | FROM |    DATE   |  PRICE
AAA |  BBB | 12/3/2012 |  $100
BBB |  CCC | 09/7/2010 |  $270
BBB |  AAA | 06/9/2011 |  $130
AAA |  CCC | 12/3/2013 |  $176 
```

做这个的最好方式是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T01:52:06.250

由于您没有提到您的 RDBMS，因此下面的查询适用于大多数 RDBMS

```
SELECT a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT To, FROM, MAX(DATE) maxDate
            FROM tableName
            GROUP BY To, FROM
        ) b ON a.To = b.To AND
                a.FROM = b.FROM AND
                a.DATE = b.maxDATE 
```

*   [SQLFiddle 演示链接](http://sqlfiddle.com/#!3/a3b21/2)

但如果你是 RDBMS 支持`CTE`和`WINDOWS FUNCTION`

```
WITH latestRecord AS
(
SELECT [To], [FROM], DATE, Price,
        ROW_NUMBER() OVER (Partition BY [TO], [FROM] ORDER BY date DESC) rn
FROM tableName
)
SELECT [To], [FROM], DATE, Price
FROM latestRecord
WHERE rn = 1 
```

*   [SQLFiddle 演示链接](http://sqlfiddle.com/#!3/a3b21/11)

或者`WINDOWS FUNCTION ONLY`

```
SELECT [To], [FROM], DATE, Price
FROM 
(
    SELECT [To], [FROM], DATE, Price,
            ROW_NUMBER() OVER (Partition BY [TO],[FROM] ORDER BY date DESC) rn
    FROM tableName
) s
WHERE rn = 1 
```

*   [SQLFiddle 演示链接](http://sqlfiddle.com/#!3/a3b21/9)

还有一件事要指出，`TO`并且`FROM`有些保留关键字，它们必须使用转义字符进行转义，具体取决于`RDBMS`您使用的字符。

# linux - 如何在 Linux 上的 Tomcat 7 上启用 SSL 并使用 curl 进行测试？

> ID：13925146
> 
> 赞同：2
> 
> 时间：2012-12-18T01:49:42.237
> 
> 标签：linux, tomcat, ssl, curl

我正在使用 JDK 1.6、tomcat 7.0.32 和 Red Hat Linux。

我需要帮助在我的本地 tomcat 实例上设置 SSL。

看了tomcat 7官网的说明后：

[url=http://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html]http://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html[/url]

我按照这样的指示进行操作：

(1) cd $CATALINA_HOME/conf

(2) 创建证书并将其存储在新的密钥库中。

```
keytool -genkey -alias tomcat -keyalg RSA -keystore keystore.jks 
```

(3) 在 Tomcat 的 conf/server.xml 中取消注释 SSL 连接器配置，指定您的密钥存储文件和密码。

```
<Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
           maxThreads="150" scheme="https" secure="true"
           clientAuth="false" sslProtocol="TLS" 
           keystoreFile="./conf/keystore.jks"
           keystorePass="mypassword"
/> 
```

(4) 从密钥库中导出证书。

```
keytool -exportcert -alias tomcat -file tomcat.crt -keystore keystore.jks 
```

当我尝试（这将是第 5 步）将证书导入信任库时。

```
keytool -importcert -alias tomcat -file tomcat.crt -trustcacerts -keystore $JAVA_HOME/jre/lib/security/cacerts 
```

我收到以下提示输入我的密码（之后我输入“mypassword”）：输入密钥库密码：

```
keytool error: java.io.IOException: Keystore was tampered with, or password was incorrect 
```

（顺便说一下，我忽略了这一步，因为我在 Google 上找到了它，但在官方的 Tomcat7-SSL-Howto 文档上没有找到它——如果有必要，请告诉我）。

我的完整 server.xml 文件（位于 $CATALINA_HOME/conf 下）：

```
<?xml version="1.0" encoding="UTF-8"?>
<Server port="8005" shutdown="SHUTDOWN">
    <Listener SSLEngine="on" className="org.apache.catalina.core.AprLifecycleListener"/>
    <Listener className="org.apache.catalina.core.JasperListener"/>
    <Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener"/>
    <Listener className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener"/>
    <Listener className="org.apache.catalina.core.ThreadLocalLeakPreventionListener"/>
    <GlobalNamingResources>
        <Resource auth="Container" 
            description="User database that can be updated and saved" 
            factory="org.apache.catalina.users.MemoryUserDatabaseFactory" 
            name="UserDatabase" 
            pathname="conf/tomcat-users.xml" 
            type="org.apache.catalina.UserDatabase"/>
    </GlobalNamingResources>
    <Service name="Catalina">
    <Connector connectionTimeout="20000" port="8080" protocol="HTTP/1.1" redirectPort="8443"/>
    <Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
            maxThreads="150" scheme="https" secure="true"
            clientAuth="false" sslProtocol="TLS" 
            keystoreFile="./conf/keystore.jks"
            keystorePass="mypassword"
    />
    <Connector port="8009" protocol="AJP/1.3" redirectPort="8443"/>
    <Engine defaultHost="localhost" name="Catalina">
        <Realm className="org.apache.catalina.realm.LockOutRealm">
            <Realm className="org.apache.catalina.realm.UserDatabaseRealm" resourceName="UserDatabase"/>
        </Realm>
        <Host appBase="webapps" autoDeploy="true" name="localhost" unpackWARs="true">
            <Valve className="org.apache.catalina.valves.AccessLogValve" 
                    directory="logs" 
                    pattern="%h %l %u %t &quot;%r&quot; %s %b" 
                    prefix="localhost_access_log." 
                    suffix=".txt"/>
        </Host>
    </Engine>
    </Service>
</Server> 
```

Tomcat的服务器输出：

```
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Dec 17, 2012 5:17:59 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8443"]
Dec 17, 2012 5:17:59 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Dec 17, 2012 5:43:08 PM org.apache.catalina.startup.Catalina start
Dec 17, 2012 5:43:08 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
Dec 17, 2012 5:43:08 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8443"]
Dec 17, 2012 5:43:08 PM org.apache.coyote.AbstractP
INFO: Server startup in 9611 ms 
```

当我转到我的 bash shell 并输入以下内容时：

```
curl -X GET https://localhost:8443 
```

我得到以下错误输出：

```
curl: (60) Peer certificate cannot be authenticated with known CA certificates
More details here: http://curl.haxx.se/docs/sslcerts.html

curl performs SSL certificate verification by default, using a "bundle"
of Certificate Authority (CA) public keys (CA certs). If the default
bundle file isn't adequate, you can specify an alternate file
using the --cacert option.
If this HTTPS server uses a certificate signed by a CA represented in
the bundle, the certificate verification probably failed due to a
problem with the certificate (it might be expired, or the name might
not match the domain name in the URL).
If you'd like to turn off curl's verification of the certificate, use
the -k (or --insecure) option. 
```

我在这里错过了一步吗？

我只想在 Tomcat 7 上启用 SSL 并使用 curl 对其进行测试。

如果有人能指出我正确的方向，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:34:39.487

要导入证书，您应该尝试“changeit”，这是 cacerts 密钥库的默认密码

# iphone - 从用户的 iTunes 库中导出视频

> ID：13925148
> 
> 赞同：1
> 
> 时间：2012-12-18T01:49:51.630
> 
> 标签：iphone, objective-c, ios, mpmediaitem, avassetexportsession

我已经搜索并阅读了文档，但我似乎无法找到解决我遇到的这个（看似简单的）问题的方法。我的歌曲从用户的 iTunes 库中导出工作正常，并且每次都下载到用户的文档文件夹中没有问题，但视频似乎不起作用。

我让它显示一个 MPMediaPickerController (allowsPickingMultipleItems = YES) 以允许用户从他们下载的库中选择视频或歌曲。完成后，这是我正在使用的相关代码：

```
- (void)mediaPicker:(MPMediaPickerController*)mediaPicker didPickMediaItems:(MPMediaItemCollection*)mediaItemCollection {
    AVAssetExportSession *exportSession;

    for (MPMediaItem *item in mediaItemCollection.items) {
        NSURL *assetUrl = [item valueForProperty:MPMediaItemPropertyAssetURL];
        MPMediaType type = [[item valueForProperty:MPMediaItemPropertyMediaType] intValue];
        if (type >= MPMediaTypeMovie) {
            exportSession = [[AVAssetExportSession alloc] initWithAsset:[AVAsset assetWithURL:assetUrl] presetName:AVAssetExportPreset640x480];
            exportSession.outputFileType = AVFileTypeQuickTimeMovie;
            filePath = [title stringByAppendingString:@".mov"];
            exportSession.outputURL = [NSURL fileURLWithPath:[[NSFileManager documentDirectory] stringByAppendingPathComponent:filePath]];
        } // .. check for song-types here and set session up appropriately

        [exportSession exportAsynchronouslyWithCompletionHandler:^{
            // never gets into AVAssetExportSessionStatusCompleted here for videos 
        }
    }
} 
```

我每次得到的错误如下：

```
Error Domain=AVFoundationErrorDomain Code=-11820 "Cannot Complete Export" UserInfo=0x1e1a2180 {NSLocalizedRecoverySuggestion=Try exporting again., NSLocalizedDescription=Cannot Complete Export} 
```

不是很有帮助。:( 我觉得我可能在这里遗漏了一些明显的东西。我这样做的方法是否正确？我试图将其“强制”为 MOV 格式是否可能存在问题？或者可能需要不同的设置方式导出会话？

作为参考，我在 iPhone 5 上使用 iOS 6.0.1 进行测试，baseSDK 为 6.0。提前感谢您对此提供的任何指导！

**附加信息#1**：奇怪的东西。如果我将 outputFileType 设置为“AVFileTypeAppleM4V”，它似乎会立即因“SIGTRAP”而崩溃。我想尝试 M4V，因为当我对assetURL 进行日志输出时，我会看到类似：ipod-library://item /item.m4v?id=12345。不知道这是否会有所不同，但奇怪的是，如果我尝试 m4v 格式，它就会像那样崩溃。可能是因为它不在支持的文件类型列表中（请参阅下一个信息点）。

**附加信息#2**：我得到的支持文件类型（通过调用“supportedFileTypes”方法是：“com.apple.quicktime-movie”和“public.mpeg-4”。“exportPresetsCompatibleWithAsset”包括所有视频文件，包括 m4a、低/中/高质量和特定尺寸。我已经尝试了所有这些的所有组合，例如文件类型的 AVFileTypeQuickTimeMovie 和 AVFileTypeMPEG4，以及所有预设，包括低/中/高，以及所有维度的。我永远不会失败，我得到“无法完成导出”错误。

**附加信息#3**：我也在使用 5.1 的部署目标。但是，是的，我试过 6.0，它给出了同样的错误。:(

**附加信息#4**：如果需要知道，我正在测试的电影是“试播”电视节目，一个视频，是我在 iTunes 中看到的第一个免费视频。所以我下载了它以在这个应用程序中使用。

**附加信息#5**：不确定这是否重要，但“hasProtectedContent”方法为 AVAsset（如果我转换，则为 AVURLAsset）返回 YES。可能没有什么不同，但我想我会把它扔在那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:24:33.400

在尝试复制问题并进行一些测试后，我强烈怀疑受保护的内容是一个问题。原因如下：

我复制了您的代码，并在我的 iPod Touch（第 5 代，iOS 6.0.1）上对其进行了测试，尽管我没有来自媒体选择器，而是让它循环播放设备上的所有视频（其中 7 个。 ) 它工作得很好，并调用了完成处理程序并在应用程序沙箱的文档目录中制作了正确的 .mov 文件。我将 .mov 文件移到了我的 Mac 上，它们都播放了。

这些视频文件的 hasProtectedContent 为 NO。

所以我放置了一个从 iTunes 商店获得的视频文件，并确认它的 hasProtectedContent 为 YES。有趣的是，当我尝试从 MPMediaItemPropertyAssetURL 获取 URL 时，我得到的受保护/iTunes 获得的视频为零。

我强烈怀疑媒体保护是问题所在。

这是我使用的代码变体。我根本没有更改您的转换代码，只是提供 URL 的方式：

```
// select all the video files
MPMediaPropertyPredicate *predicate = [MPMediaPropertyPredicate predicateWithValue:[NSNumber numberWithInteger:MPMediaTypeMovie] forProperty:MPMediaItemPropertyMediaType];

MPMediaQuery *query = [[MPMediaQuery alloc] init];
[query addFilterPredicate:predicate];

NSArray *items = [query items];

// now go through them all to export them

NSString* title;
NSURL * url;
AVAssetExportSession *exportSession;
NSString *storePath;
AVAsset *theAsset;

// we fill put the output at this path
NSString *applicationDocumentsDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

// loop through the items and export
for (MPMediaItem* item in items)
{
    title = [item valueForProperty:MPMediaItemPropertyTitle];
    url = [item valueForProperty:MPMediaItemPropertyAssetURL];

    NSLog(@"Title: %@, URL: %@",title,url);

    theAsset = [AVAsset assetWithURL:url];

    if ([theAsset hasProtectedContent]) {
        NSLog(@"%@ is protected.",title);
    } else {
        NSLog(@"%@ is NOT protected.",title);
    }

    exportSession = [[AVAssetExportSession alloc] initWithAsset:theAsset presetName:AVAssetExportPreset640x480];

    storePath = [applicationDocumentsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.mov",title]];

    exportSession.outputFileType = AVFileTypeQuickTimeMovie;

    exportSession.outputURL = [NSURL fileURLWithPath:storePath];

    [exportSession exportAsynchronouslyWithCompletionHandler:^{
        NSLog(@"done!");
    }];

} 
```

出于好奇，你在检查`AVAsset exportable`国旗吗？

# r - 在 R 中稍微向上推情节图例

> ID：13925149
> 
> 赞同：3
> 
> 时间：2012-12-18T01:49:55.077
> 
> 标签：r, plot, legend

我有一个用 R 创建的 ECDF 图，它在右下角有一个图例。我遇到的问题是 ECDF 图放置在 0.0 处的微弱灰色虚线水平线与我图例中的最后一项重叠。像这样：

![在此处输入图像描述](../Images/2b39ce22c05673ac48592dcb6e6e1990.png)

目前我正在创造传奇：

```
legend("bottomright",c("Original","Minus 30 minutes"),col=c("black","red"),lty=c("dashed","dotted")) 
```

有没有办法简单地将图例推高一点以避免重叠问题？理想的解决方案是以编程方式检测重叠并对其进行适当校正的解决方案，但如果不这样做，一些凭经验确定的像素偏移量可能就足够了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T01:58:39.717

您可能希望`inset=c(0,.01)`在对 legend 的调用中使用（或其他一些值）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T02:00:49.577

```
legend(x=1e+04, y=0.2, c("Original","Minus 30 minutes"), 
                       col=c("black","red"), 
                       lty=c("dashed","dotted")) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-18T02:06:48.477

顺便说一句，该`legend`功能还有一个简洁的`trace=`选项，您可以使用它来记录创建图例的确切规格。您可以将此数据保存到对象中，并使用它来更正自动格式化的图例。对于您当前的场景来说，这可能有点矫枉过正，但它是一个非常简洁的小系统。

例如：

```
# plot a test plot
> plot(1:10)

# calculate the details for a legend in the bottomright, save the data
# and don't add the legend itself
> legdata <- legend("bottomright","boom",trace=TRUE,plot=FALSE)

> legdata
$rect
$rect$w
[1] 1.454288

$rect$h
[1] 1.65623

$rect$left
[1] 8.905712

$rect$top
[1] 2.29623

$text
$text$x
[1] 9.456811

$text$y
[1] 1.468115

# re-use the saved legend data to push the legend up slightly
> legend(list(x=legdata$rect$left,y=legdata$rect$top+0.5),"boom") 
```

# java - 如何使用 jdbc 连接检查 java 中的连接状态？

> ID：13925151
> 
> 赞同：-2
> 
> 时间：2012-12-18T01:50:09.210
> 
> 标签：java, ms-access

Msaccess jdbc连接中的sql异常如何处理？我正在使用 java 中的 jdbc 连接从 msaccess 中检索数据。如果连接失败，我需要显示自定义消息而不是抛出异常。

```
public static Connection getConnection()  {
    Connection connection = null;
    try
    {
        String url = "jdbc:odbc:db1";
        String username = "";
        String password = "";
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
        connection= DriverManager.getConnection(url, username, password);
    }
    catch(Exception e)
    {
        System.out.println("Report");
    }
    return connection;
  } 
```

但它没有处理自定义消息。它抛出错误： **java.sql.SQLException: [Microsoft][ODBC Excel Driver] Microsoft Jet 数据库引擎找不到对象**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T01:56:15.877

你无法避免例外。您可以使用它们来处理它们，而不是扔掉它们

```
 try{
     // do Something
  } catch(SqlException e){
     // catch exception 
  } finally {
  // do something to get recover 
  } 
```

[有关更多信息，请点击此链接](http://docs.oracle.com/javase/tutorial/essential/exceptions/finally.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T02:45:34.403

您无法避免引发 SQLException。JDBC API 不提供测试连接活跃度的方法。

要测试 JDBC 连接是否（仍然）有效，请执行一个简单的查询。执行此操作的“虚拟查询”习语因数据库而异，但对任何表的任何查询都足够了。如果连接不存在，您将得到一个异常......您需要处理它。

**但是，***在您测试连接和执行实际查询*（或其他）之间，数据库连接可能会中断。所以（IMO）你最好只写你的代码，这样它就可以在一个真正的查询中处理 SQLException ......而不是打扰探测。这也提供了更好的性能，因为反复测试以查看 JDBC 连接是否处于活动状态会给您的应用程序和数据库增加无用的负载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T02:52:38.840

您调用 getConnection 的位置，通过处理异常提供自定义消息：

```
Connection con = null;
try {
     con = DatabaseUtil.getConnection();
    ...
    ...
}catch(Exception e) {
   //show message, dialog box, whatever
} finally {
   if(con != null) {
         try{
            con.close();
         }catch(SQLException sqe){
              //yet another message, unable to close connection cleanly.
         }
   }
} 
```

PS声明“异常”是个坏主意，您应该始终尝试从您的方法中抛出最相关的异常。SQLException 在 DatabaseUtil.getConnection 中更有意义

PPS Class.forName(driver); 每次 JVM 调用只需要一次（用于 JDBC 驱动程序注册）。因此，注册 JDBC 驱动程序的适当位置是静态初始化程序（在第一次加载类时调用一次）。

# jquery - 暂停 jQuery 动画：使用另一个 div 的悬停事件。

> ID：13925152
> 
> 赞同：2
> 
> 时间：2012-12-18T01:50:12.897
> 
> 标签：jquery

当我将鼠标悬停在外部 div 上时，我无法在 div 上暂停 jQuery.animate 函数。我希望它在外部 div 悬停时停止的原因是我将内部 div 与外部 div 重叠。然后，当鼠标离开外部 div 时，我希望动画在内部 div 上再次恢复。任何帮助将不胜感激，现在被困在这里一段时间了......

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>jQuery Practice</title>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>

<script type="text/javascript">

$(document).ready(function(){
    $("#listSlide ul").animate({marginTop:-800},10000, 'linear', function(){
        $(this).find("li:last").after($(this).find("li:first"));
        $(this).css({marginTop:-73});   
    })  
});

</script> 
```

如何让上述 jQuery animate 函数在外部 div 的（#animation）鼠标悬停事件上暂停并在 #animation div 的鼠标离开时恢复？

```
<style type="text/css">

* {
    padding:0px;
    margin:0px;
}

#wrapper {
    width:960px;
    height:768px;
    margin: 0 auto;
}

#animation {
    width:260px;
    height:768px;
    float:right;
    position:relative;
}

#listSlide {
    height: 768px;
    width:200px;
    position:absolute;
    left:49px;
    overflow:hidden;
}

#listSlide ul {
    height: 700px;
}

#listSlide ul li {
    width:185px;
    text-align: center;
    height: 768px;
    list-style: none;
    float:  left;
    clear: left;
    margin-bottom:-40px;
}
</style>

</head>

<body>

<div id="wrapper">

    <div id-"animation">

        <div id="listSlide">
            <ul>
                <li><img src="images/belt.png" alt="Belt 1" /></li>
                <li><img src="images/belt.png" alt="Belt 2" /></li>
                <li><img src="images/belt.png" alt="Belt 3" /></li>
                <li><img src="images/belt.png" alt="Belt 4" /></li>
            </ul>
        </div>

    </div>

</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T02:04:00.377

**[jsBin 演示](http://jsbin.com/udinaj/4/edit)**

Typo `<div id-"animation">`=`<div id="animation">`
并`float:right;`从`#animate`'s CSS中删除

问：

```
$(document).ready(function(){

  function anim(){

    $("#listSlide ul").animate({marginTop:-800},10000, 'linear', function(){
        $(this).find("li:last").after( $(this).find("li:first") );
    }); 

  }
  anim(); // initial kick

  $('#animation').on('mouseenter mouseleave',function( e ){
    var mEnter = e.type=='mouseenter' ?  // if
         $("#listSlide ul").stop( 1 ) :  // is mouseenter (STOP!)
                               anim() ;  // is mouseleave (ANIM!)
  });

}); 
```

# php - Photoshop PDF 编辑 XML 然后“刷新”并保存新的 PDF

> ID：13925153
> 
> 赞同：0
> 
> 时间：2012-12-18T01:50:23.800
> 
> 标签：php, pdf, photoshop

当您将 Photoshop 文档另存为 PDF 时，它会生成一些 XML 元素，我认为这些元素会被 Photoshop 用于稍后进行编辑。无论如何，这些节点的一部分看起来像这样：

```
<rdf:li rdf:parseType="Resource">
    <photoshop:LayerName>Item 1</photoshop:LayerName>
    <photoshop:LayerText>Item 1</photoshop:LayerText>
</rdf:li>
<rdf:li rdf:parseType="Resource">
    <photoshop:LayerName>Item 2</photoshop:LayerName>
    <photoshop:LayerText>Item 2</photoshop:LayerText>
</rdf:li> 
```

显然，替换节点中的一些文本很容易，但我想知道是否有某种方式（工具、库、任何东西）可以使用节点中的新数据“刷新”或重新编译 PDF在服务器上；最好在 PHP 中。

我需要动态替换一些占位符文本。这就是目标。

如果我走错了路，有什么办法可以实现吗？我愿意尝试编辑像这样的任何文件（足以打印），无论是 psd、pdf、indesign、ai 还是任何文件。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T05:13:00.040

您作为示例发布的内容可能不是 XML 本身，而是文件中 XMP 信息的一部分。XMP 是一种元数据格式，旨在放入多种文件格式（PDF、图像文件格式，应有尽有）中。

XMP 最酷的地方在于，它被设计成能够在不真正了解文件格式的情况下读取它，甚至从文件格式写入它。这意味着您可以扫描文档并查找所有 XMP 数据包，而无需实际使用 PDF 库来解析完整的 PDF 文件。

有关 XMP 的所有信息都在 Adob​​e 网站上。他们也有一个 SDK，如果我没记错的话，他们甚至有一个免费的库来读写多种语言的 XMP（但我已经有一段时间没有使用它了）。 [http://www.adobe.com/products/xmp/](http://www.adobe.com/products/xmp/)

# jquery-mobile - AJAX中的Jquery Mobile首页加载

> ID：13925159
> 
> 赞同：0
> 
> 时间：2012-12-18T01:51:06.707
> 
> 标签：jquery-mobile

我正在使用 JQueryMobile v1.2.0：

与 webapp 的交互流程：

1.  `home`在浏览器地址栏中输入页面。主页有链接到`page1`。
2.  单击链接`page1`将通过 Ajax 加载页面。
3.  `page1`有`home`页面链接。单击`home`页面链接将转到`home`页面。

我想要的是`home`在单击`page1`. 我没有通过 ajax 加载，因为它是加载的第一页。

# mysql - mysql奇怪的查询行为

> ID：13925161
> 
> 赞同：3
> 
> 时间：2012-12-18T01:51:19.590
> 
> 标签：mysql, sql

好的，我从我的一台 mysql 服务器中看到了奇怪的查询行为。我在三个具有相同数据的不同服务器上运行了以下两个查询。

```
SELECT t1.Field1, t1.Field2, t1.Field3, 
(SELECT t2.Field1
  FROM thetable AS t2
  WHERE Field2=t1.Field2 AND Field3=t1.Field3 AND t2.Field1>t1.Field1
  ORDER BY Field1
  LIMIT 1) AS MinimumResult
FROM thetable AS t1
WHERE t1.UserID=5;

SELECT t1.Field1, t1.Field2, t1.Field3, 
(SELECT min(t2.Field1)
  FROM thetable AS t2
  WHERE Field2=t1.Field2 AND Field3=t1.Field3 AND t2.Field1>t1.Field1) AS MinimumResult
FROM thetable AS t1
WHERE t1.UserID=5; 
```

在三台服务器中的两台上，两个查询都返回相同的结果。第三，我得到了 MinimumResult 字段的两个不同结果。第一个查询，返回一个小数字。第二个查询返回我期望的内容以及两个查询在其他服务器上返回的内容。

我不知道该如何回应？这是服务器配置问题还是预期行为？

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T20:46:11.703

你的字段的数据类型是浮动的吗？在浮点比较中可能会发生一些奇怪的事情。

# c++ - 为什么指针上的成员访问/元素选择有不同的运算符？

> ID：13925164
> 
> 赞同：1
> 
> 时间：2012-12-18T01:51:26.343
> 
> 标签：c++, c, operators

> **可能重复：**
> [为什么 C 在 -> 和 . 之间有区别？](https://stackoverflow.com/questions/1813865/why-does-c-have-a-distinction-between-and)

编译器足够聪明，可以知道左侧操作数是指针还是引用。为什么成员访问有两个不同的运算符（. 和 ->）？

是否使间接明确？为了易读性？在设计 C 语言时，是否有关于可用硬件的某些内容为在阅读源代码时易于区分这些操作提供了强有力的理由？

我读过它只是一种简写语法`(*ptr).member`，但是`ptr.member`当 ptr 是指针时它是否有效？为什么不能像ptr 是指针`ptr.member`一样“正常工作” ？`ptr->member`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T02:03:55.173

不完全是一个答案，但利用这种区别的一个地方是**智能指针**和容器**迭代器**。

在这两种情况下，`.`运算符用于对对象本身进行操作，而`->`用于对包含在其中的对象进行操作。

# css - 一个用于 3 个独立项目的外部 CSS 文件

> ID：13925170
> 
> 赞同：1
> 
> 时间：2012-12-18T01:52:14.893
> 
> 标签：css, websphere

我目前正在处理 3 个具有相同 CSS/布局的不同项目。尽可能地，我只想为所有 3 个项目使用 1 个 CSS 文件，以避免在 3 个不同且单独的 CSS 文件上复制粘贴。这 3 个项目目前正在 Websphere 中部署。我应该如何处理这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T01:55:17.387

在 3 个项目之一上上传您的 CSS 文件，并在所有 3 个项目上使用相同的 href

```
<link rel="stylesheet" href="http://yoursite.com/style.css"> 
```

# tomcat - 如何使用java在tomcat中启动和停止应用程序？

> ID：13925172
> 
> 赞同：-1
> 
> 时间：2012-12-18T01:52:22.997
> 
> 标签：tomcat, web-applications

我开发了简单的网络应用程序“myapplication”。我部署到 Tomcat 6.0.29 中。

应用程序停止，当我执行此“http://localhost:8080/manager/stop?path=/myapplication”

是否可以使用 java 程序启动应用程序？
是否可以使用 java 程序停止应用程序？

帮我。提前致谢。

* * *

不能在 Windows 中工作。它适用于linux ubuntu

使用时出现错误

```
Process p = r.exec("wget http://tomcatusername:tomcatepassword@localhost:8080/manager/stop?path=/myapplication -O - -q"); 
```

错误是：

```
Error occur: java.io.IOException: Cannot run program "wget": 
CreateProcess error=2, The Stystem cannot find the file specified 
```

任何人都可以帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-21T11:09:48.190

标准 java 网络库没有办法。

尝试使用库*org.apache.httpcomponents.httpclient*此代码适用于 Tomcat 7

```
HttpGet httpGet = new HttpGet("http://" + host + ":" + port + "/manager/text/" + action + "?path=/" + app);
        DefaultHttpClient httpClient = new DefaultHttpClient();

        httpClient.getCredentialsProvider().setCredentials(new AuthScope(host, Integer.valueOf(port)),
                new UsernamePasswordCredentials(username, password));
        HttpConnectionParams.setConnectionTimeout(httpClient.getParams(), 2000);
        HttpConnectionParams.setSoTimeout(httpClient.getParams(), 2000);
        HttpResponse response = httpClient.execute(httpGet); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T07:28:49.697

尝试这个 ：

```
Process p = r.exec("wget http://tomcatusername:tomcatepassword@localhost:8080/manager/stop?path=/myapplication -O - -q"); 
```

# php - 将 JQuery 集成到 XAMPP 服务器上的 CMS 控制环境 HTML/CSS/PHP

> ID：13925179
> 
> 赞同：0
> 
> 时间：2012-12-18T01:53:19.917
> 
> 标签：php, jquery, sql

我很难使用 JQuery 向我的网站添加动态功能。

```
<table id="structure">
    <tr>
        <td id="navigation">
            <?php echo public_navigation($sel_subject, $sel_page); ?>
        </td>
        <td id="page">
            <?php if ($sel_page) { ?>
                <h2><?php echo htmlentities($sel_page['menu_name']); ?>   </h2>
                <div class="page-content">
                    <?php echo strip_tags(nl2br($sel_page['content']), "<b><br><p><a>"); ?>
                </div>
            <?php } else { ?>
                <h2>Welcome to my "to the point" news and blog mix.</h2>
            <?php } ?>
           <br />
           <?php
           // garbledeegoo starts here
           ?>
           <p>JScript Practice</p>
           <div id="jscriptprac">text</div>
           <br /> 
           <h2>To Do</h2>
        <form name="checkListForm">
            <input type="text" name="checkListItem"/>
        </form>
        <div id="button">Add!</div>
        <br/>
        <div class="list"></div>
           <?php
           // garbledeegoo ends here
           ?>
        </td>
    </tr>
</table> 
```

问题是我不能让 jquery 标记选择器样式我的导航我有检索我的内容的 SQL 语句。

```
$(document).ready(function(){
$("*").hover(function(){
    $(this).stop(true, true).animate({ width:"+=25px", padding:"+=25px" });
}, function() {
    $(this).stop(true, true).animate({ width:"-=25px", width:"-=25px" });
});
}); 
```

这只是选择一切，但它仍然没有选择导航。

```
<td id="navigation">
    <?php echo public_navigation($sel_subject, $sel_page); ?>
</td> 
```

我想将 .animate jquery 添加到主题和页面中，这些主题和页面像列表一样显示为侧导航栏。有没有办法设置查询结果的样式？

我为我缺乏准确的词汇而道歉。如果您无法想象我的意思，codeybuzz.com 是该网站，我不想在 .hover 事件上更改导航链接的颜色，而是想在鼠标悬停时使用 jquery 为它们设置动画。我认为用表格做这件事可能与它不可选择有关，但我不知道如何将它们全部更改为 div 并且不破坏我已经拥有的 css 样式。

这是呈现的 HTML

```
<td id="navigation"> 
 <ul class="subjects">
  <li><a href="index.php?subj=1">About Codey Buzz</a></li>
  <li><a href="index.php?subj=2">No Rubbish, Blog</a></li>
  <li><a href="index.php?subj=3">Top News</a></li>
 </ul>   
</td> 
```

我用这个实现了某种效果，但它不是很有效。

```
$(document).ready(function(){
$("ul.subjects > li").hover(function(){
    $(this).mouseenter(function() {
        $(this).animate({ width: "+=50px" }).stop(true, true);
    });
    $(this).mouseleave(function() {
        $(this).animate({ width: "-=50px" }).stop(true, true);
});
});
}); 
```

# gmail - 通过 API 获取 Gmail 中的所有文件夹列表或标签（使用 Oauth）

> ID：13925182
> 
> 赞同：0
> 
> 时间：2012-12-18T01:53:47.513
> 
> 标签：gmail, google-oauth

我想**通过 API (using Oauth)**获取某个 Gmail 用户的**所有文件夹列表（或）标签**。

 **怎么可能实现？

[目前，我可以通过提要（使用 Oauth）](https://developers.google.com/google-apps/gmail/gmail_inbox_feed)或某些标签获取未读的 gmail 收件箱。

但是要获取某个标签相关的邮件，首先我需要获取所有标签，并希望从所有标签中获取某个标签相关的邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T04:34:55.010

使用 GMail API 获取文件夹列表当然是可行的。我假设您已经使用 OAuth 成功进行了身份验证（获得了令牌）。如果是这样，请确保像[这里](http://code.google.com/p/google-mail-oauth2-tools/source/browse/trunk/java/com/google/code/samples/oauth2/OAuth2Authenticator.java#74)一样连接到 Gmail IMAP 服务器并获取一个 Store 对象。

之后，只需使用[这个很好的答案](https://stackoverflow.com/a/4801728)来获取用户文件夹的列表。**

# html - 最小高度：100%？

> ID：13925183
> 
> 赞同：0
> 
> 时间：2012-12-18T01:53:55.580
> 
> 标签：html, css

我正在制作一个具有 960px 宽 div 的 CSS 布局，我想让它从页面顶部到达底部。显而易见的解决方案是`min-height: 100%;`，但它不起作用。这是我的CSS：

```
* {
margin: 0px;
padding: 0px;
}
body {
background: #FF0000;
height: 100%;
}
html {
height: 100%;
}
#sheet {
width: 960px;
min-height: 100%;
background: #000000;
margin: 0px auto 0px auto;
}
#sheet1 {
width: 760px;
min-height: 100%;
top: 0px;
bottom: 0px;
background: #FFFFFF;
} 
```

从我的 HTML 中：

```
<div id="sheet">
    <div id="sheet1">

    </div>
</div> 
```

当我将 #sheet's 更改为 时，它显示正常`min-height`，`height`但如果内容占用超过一页，它就会被切断。有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T02:20:54.573

尝试将#sheet 更改为 height:100%，而不是 min-height 100%，并在#sheet-1 中添加一些内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T02:01:02.213

只有在其中存在 HTML 元素（文本、图像或其他元素）时，使用 100% 才会生效。它的高度会根据元素的长度而更高或更短。因此 min-height 仅用于指定元素的确切长度或高度数。尝试使用像素而不是百分比。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T02:53:02.517

因为您没有添加任何`float`或`clear`属性...

CSS 将忽略`min-height`and `max-height`，如果该`height`属性未定义，

除非你添加`display:inline-block`，但它会破坏你的`margin:0px auto;`，我决定你这样做：

```
* {
  margin: 0px;
  padding: 0px;
 }
body {
 background: #FF0000;
 height: 100%;
 text-align:center;
}
body * {
 text-align:left;
}
html {
 height: 100%;
}
#sheet {
 width: 960px;
 display:inline-block; // It can make height auto
 min-height: 100%;
 background: #000000;
 margin: 0px auto 0px auto;
 text-align:center;
}
#sheet1 {
 width: 760px;
 display:inline-block;
 min-height: 100%;
 background: #FFFFFF;
 text-align:left;
} 
```

用我的代码替换你的css，我认为它应该可以工作......

# parallel-processing - Makefile.am 并行处理 SUBDIRS

> ID：13925184
> 
> 赞同：1
> 
> 时间：2012-12-18T01:53:59.333
> 
> 标签：parallel-processing, makefile, automake

我们的项目中有单元测试，它们运行非常缓慢。据我所知，主要原因是每个子目录都是连续运行的。没有理由这样做，我想修改一些东西，以便并行处理每个子目录。

我发现了这个[问题](https://stackoverflow.com/questions/1681006/parallelization-of-recursive-jobs-in-gnu-make)，但似乎接受的答案是关于如何在你的makefile中指定它，而不是makefile.am。我尝试将解决方案添加到我的 Makefile.am 中，但似乎没有什么不同。这是在 Makefile.am 级别执行此操作的正确方法吗？如果是这样，对我可能做错的任何建议？如果没有，请告诉我真理的道路:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:37:10.133

在回答我的问题时，Makefile.am 中的内容被相当直接地转换为 Makefile，因此可以在 Makefile.am 中对原始问题进行更改。我不能 100% 确定的唯一部分是 SUBDIRS（因为它具有特殊含义）是否会在 autotools 过程中被破坏。无论如何，并行处理 SUBDIRS 可能不是典型的答案。

我解决了这个问题，即为我想要并行处理的目录使用单独的目标，我敢打赌这通常是正确的答案。可能有一些方法可以让 SUBDIR 以这种方式处理，但是使用单独的目标很容易为我工作，至少对于我试图做的事情来说，单独的目标更合适。

# php - SOAP-ERROR：解析 WSDL：无法从 'http://127.0.0.1/test/index?wsdl' 加载：

> ID：13925185
> 
> 赞同：2
> 
> 时间：2012-12-18T01:54:04.887
> 
> 标签：php, soap, zend-framework2

在 zend 框架 2.0 中使用 SOAP 组件时出现问题

以下是代码：

```
namespace User\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\Soap\Server;
use Zend\Soap\Client;
use Zend\Soap\AutoDiscover;
use User\Model\MyTest;

class TestController extends AbstractActionController {
private $_WSDL_URI = "http://127.0.0.1/test/index?wsdl";

private function handleWSDL() {
    $autodiscover = new AutoDiscover(); 
    //ini_set("soap.wsdl_cache_enabled", 0);
    $autodiscover->setClass('User\Model\MyTest')
                 ->setUri($this->_WSDL_URI);
    $wsdl = $autodiscover->generate();
    header("Content-type: text/xml");
    echo $wsdl->toXml();
    exit;   
}

private function handleSOAP() {
    $soap = new Server($this->_WSDL_URI,array('encoding' => 'utf-8','soap_version'=>SOAP_1_2));
    $soap->setClass('User\Model\MyTest');
    $soap->handle();
    exit;
}

public function indexAction(){
    if(isset($_GET['wsdl'])) {
        $this->handleWSDL();
    } else {
        $this->handleSOAP();
    }
}

public function clientAction(){
    $client = new Client('http://127.0.0.1/test/index?wsdl');
    $result = $client->getUser(31);
    var_dump($result);exit;
} 
```

}

当我访问时`http://localhost/test/index?wsdl` ，它返回 WSDL。

但是当我访问时`http://localhost/test/index`，它返回错误：

SOAP-ERROR: Parsing WSDL: Couldn't load from `http://127.0.0.1/test/index?wsdl`: failed to load external entity`"http://127.0.0.1/test/index?wsdl"`

当我访问时`http://localhost/test/client`，它会返回

```
An error occurred
An error occurred during execution; please try again later.
Additional information:
SoapFault
File:
E:\WWW\vendor\ZF2\library\Zend\Soap\Client.php:1087
Message:
Wrong Version

Stack trace:

 #0 E:\WWW\vendor\ZF2\library\Zend\Soap\Client.php(1087):  SoapClient->__soapCall('getUser', Array, NULL, NULL, Array)
 #1 E:\WWW\module\User\src\User\Controller\TestController.php(44): Zend\Soap\Client->__call('getUser', Array) 
```

这是 MyTest.php 文件

```
namespace User\Model;

class MyTest{
/**
 * To get the register information of the user
 * 
 * @return string
 */
public function getUser(){
    return 'hello';
}
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:19:22.243

要创建 Soap 服务器，您只需要 WSDL 文件，而不需要用于将其提供给其他客户端的 URL。事实上，最好不要为此使用 URL，因为对 Soap 服务器的每个请求都会启动一个子请求来获取 WSDL。

尝试在创建 WSDL 后将其放在某个地方，并在后续请求中从那里获取它。只有在没有指定接口的情况下进行开发时，每次都自动检测它才是好的。一旦其他人使用此接口并依赖于其稳定性，这将破坏事物。

# svn - SVN作为备份介质

> ID：13925186
> 
> 赞同：2
> 
> 时间：2012-12-18T01:54:20.117
> 
> 标签：svn, backup

在我们的网络服务器 (CentOS) 上，我正在设置我们数据库的自动每日备份。当然，我想将它发送到异地（发送到我们办公室的 Windows SBS 2003 服务器）。

看到我们已经在这两个盒子之间设置了 SVN，我想我只是 SVN COMMIT 备份，直到我意识到每次提交都是这个 800M 大备份文件的新版本。

我可以阻止回购保留修订并覆盖旧修订吗？

还是我在这里完全吠错了树。

# android - 是否需要重写 onSaveInstanceState 来保存私有字段？

> ID：13925187
> 
> 赞同：1
> 
> 时间：2012-12-18T01:54:20.127
> 
> 标签：android, android-activity, bundle, activity-lifecycle

`onCreate()`如果所有初始化任务都成功，我有一个简单的 Activity 类，它带有一个设置私有布尔字段的方法。我在班级的其他部分阅读了这个布尔值的值。

```
public class MyActivity extends Activity
{
    private boolean initializationSucceeded;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        ...

        //if everything succeeded...
        initializationSucceeded = true;
    }
} 
```

是否有必要覆盖`onSaveInstanceState()`以保存此布尔值的状态，或者我有什么好的？恐怕我不太清楚在所有这些活动生命周期边缘情况下私有字段成员会发生什么，所以希望有人能解释一下。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T01:58:14.210

无需保存它，因为每次调用 onCreate 并完成初始化成功都会为真。OnCreate 是在生命周期事件（如旋转）之后调用的第一件事。除非您有一个在 onCreate 中启动的线程需要 initialasationsucceeded 的真值，否则您应该没问题。

# java - Java 导入需要澄清

> ID：13925189
> 
> 赞同：4
> 
> 时间：2012-12-18T01:54:36.607
> 
> 标签：java, import

由于我还是 Java 新手，因此我需要澄清如何正确完成导入。

第一的：

```
import java.awt.*;
import java.swing.*; 
```

我假设 * 表示“awt”和“swing”目录下的任何内容。但我以前见过有人这样做：

```
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import java.awt.*;
import java.awt.event.*;
import java.net.URL;
import javax.swing.*; 
```

我是不是误会了什么？还是我只是在寻找冗余？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T01:59:56.237

```
import javax.awt.* 
```

将包含包中的所有类，`javax.awt`但不包含任何其他嵌套在其中的包，`javax.awt`例如`javax.awt.event`. 您需要将其用作单独的导入。所有不同名称的包都需要单独包含。

使用`import javax.swing.*`您将不需要以下导入：

```
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException; 
```

因为它们是`swing`包的直接子级。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T02:04:04.603

在导入语句中，* 表示您想要该包中的所有内容。一般来说，这不是一个好主意——你不需要*你*所包含的包中的所有东西。

在实践中，我已经看到优化的导入 - 只需导入您需要的内容。大多数 IDE，例如 Eclipse、Netbeans 和 IntelliJ 都可以选择为您执行此操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T02:06:51.067

使用显式导入并避免使用通配符通常是个好主意，这样您就可以始终准确地知道要导入的内容。但是，JVM 只会在您使用通配符时导入所需的类（而不是从子包中导入），因此不会降低效率（除了编译开销可以忽略不计）。

这样做不一定是多余的，但在我看来有点尴尬：

```
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.*; 
```

可能在另一个包中声明了另一个 UnsupportedLookAndFeelException，因此您要确保包含 javax.swing 包中的那个，因此在这种情况下它是显式的。如上所述，您最好的选择是允许 IDE 帮助您明确选择所需的导入。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-18T02:06:58.057

当您在导入（通配符导入）末尾添加 * 时，您正在导入某个包中包含的所有类，即`com.test.*`. 另一方面，当您添加例如一个类时，您将专门导入该特定类，即`com.test.TestClass`

但是，在使用第一种方法时，您需要注意可能的类冲突，如此 stackoverflow 线程中所述：[Eclipse/Java - 导入 java.(namespace).* 是否有害？](https://stackoverflow.com/questions/1983435/eclipse-java-is-it-harmful-to-import-java-namespace/1983539#1983539)

Due to that I prefer the second approach since I can explicitly tell which class I intend to use, and in that way it makes the code easier to read

# azure - Azure 到本地 Web 服务

> ID：13925197
> 
> 赞同：1
> 
> 时间：2012-12-18T01:55:20.867
> 
> 标签：azure

谁能告诉我如何将在 azure 上运行的 Web 应用程序连接到本地现有的 Web 服务 (.ASMX)？

我们没有第三方应用程序公开的服务的来源，我们不希望将它们开放给公众访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T02:14:04.930

听起来像 Azure 的[服务总线中继服务](https://azure.microsoft.com/en-us/documentation/articles/service-bus-dotnet-how-to-use-relay/)可能是您正在寻找的......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T02:23:52.873

根据您的情况，可能有三个选项。但我个人更喜欢第三种。

1.  如果您使用 azure 云服务（Web 角色、工作者角色），则可以使用 Windows Azure Connect。它在 azure 机器和本地机器之间建立 IP-sec 通信。然后，您可以通过其 IPv6 地址连接到本地服务。

2.  如果您使用 azure 虚拟机来托管您的 azure 项目，则可以使用虚拟网络。它比 Windows Azure Connect 更强大。

3.  您可以使用 Windows Azure 服务总线中继。无论您的 azure 项目如何托管，它都可以将您的本地服务打开到云中。但是由于它只支持Service Relay的WCF，并且由于您无法更改服务的代码和配置，因此您可能需要做更多的工作。也许您可以在本地计算机上创建一个小型 WCF 作为代理，将其注册到服务总线中继，然后将所有请求/响应传递给您的本地服务。

# ffmpeg - 如果 HTTP Live Stream 从开头开始，视频流播放过快

> ID：13925199
> 
> 赞同：1
> 
> 时间：2012-12-18T01:55:27.947
> 
> 标签：ffmpeg, video-streaming, html5-video, http-live-streaming, transcoding

有点奇怪的问题，我正在构建一个对视频进行转码并将其流式传输到 WiiU 的服务器。

WiiU 似乎对 HTTP Live Streams 有很好的支持，但我遇到了一个问题，即视频流的播放速度比预期的快 3 倍（音频以正常速率播放）。

我想我的 ffmpeg 命令出了点问题，但是如果我让流运行（所以 WiiU 抓取的第一个片段实际上不是第一个片段）在我实际连接到它之前，WiiU 将在正常率！

这是我一直在使用的 ffmpeg 命令（post-shlex breakup）：

`['./ffmpeg', '-threads', '4', '-i', '../../Torrents/Breaking.Bad.S05E02.720p.HDTV.x264-ORENJI.mkv', '-map', '0', '-codec:v', 'libx264', '-preset', 'superfast', '-codec:a', 'aac', '-ac', '2', '-crf', '23', '-flags', '-global_header', '-strict', 'experimental', '-f', 'segment', '-segment_list', 'playlist.m3u8', '-segment_list_flags', '+live', '-segment_time', '10', 'tmp/out%03d.ts']`

.m3u8 的前几行：

```
#EXTM3U
#EXT-X-VERSION:3
#EXT-X-MEDIA-SEQUENCE:0
#EXT-X-ALLOWCACHE:1
#EXT-X-TARGETDURATION:10
#EXTINF:11.761756,
tmp/out000.ts
#EXTINF:8.591911,
tmp/out001.ts
#EXTINF:18.810467,
tmp/out002.ts
#EXTINF:7.841178,
... 
```

（PS，VLC + Safari 可以播放流文件。）

任何想法发生了什么？

如果这是一个错误，我必须解决而不是解决，有什么建议吗？

刚刚测试了使用 dummy.ts 文件启动流（知道它不会被读取，因为 wiiu 只在实时模式下读取最后 3 个文件）它仍然有加速，这意味着它是 ffmpeg 放入第一个文件的东西（并且只有第一个文件...）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:59:23.763

尝试改变`'-preset', 'fast',`还是`'medium'`？

# java - 突出显示editText时向用户显示的手动键盘

> ID：13925201
> 
> 赞同：0
> 
> 时间：2012-12-18T01:55:28.697
> 
> 标签：java, android, android-edittext, keypad

我的视图中有许多editText，我希望能够对键盘进行一些调整，当他们突出显示EditText时为用户指出。

特别是 - 制作只有大写字母的键盘？- 删除自动更正功能？- 将非英文字符添加到键盘的第一个屏幕，例如“ñ”

是否有更改此键盘的简单方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T02:33:58.170

通常，您对显示给用户的屏幕键盘没有太多控制权。但是，关闭自动更正并使所有字符大写是可能的，您只需`android:inputType`在 XML 中设置属性。以下是[您可以使用的值](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3ainputType)（您也可以对`|`它们进行 OR）。它看起来像`android:inputType="textCapCharacters|textNoSuggestions"`。

我不会担心 Ñ 或其他奇怪的字符。只需长按一个键（在本例中为 N）即可轻松获得其中的大多数。

# java - 编译类路径

> ID：13925202
> 
> 赞同：0
> 
> 时间：2012-12-18T01:55:35.147
> 
> 标签：java, netbeans, compilation, classpath

我对 Java 非常陌生，并且正在使用 IDE。我有一个问题，我想知道是否有人可以帮助我。我编译了 HelloWorld 项目并保存了它，但是当我右键单击主项目时，编译类路径为空。我知道我需要将 JAR 文件添加到库中，但我不确定要添加什么文件，这给我带来了问题，因为我无法在 IDE 之外编译项目。我在 Windows7 系统上使用 NetBeans。

无论如何你可以帮助我吗？

这是我运行良好的代码

```
public class helloworld {
    public static void main(String[] args) {
       System.out.println("Hello OCA World");
    }
} 
```

这是我的 jdk bin C:\Program Files\Java\jdk1.7.0_09\bin 的位置，这是它输入到 System Variables\ PATH

> C:\Program Files\java\jdk1.7.0_{xx}\bin;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live ;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;c:\Program Files (x86)\ATI Technologies\ATI.ACE\Core-静态;C:\Program Files\Dell\Dell 无线 WLAN 卡;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files (x86)\Common Files\Roxio Shared\DLLShared\PrC:\Program文件 (x86)\QuickTime\QTSystem\

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T02:10:23.097

编译

`javac -classpath .;<path of your jar>; xxx.java`

执行

`java -classpath .;<path of your jar>; xxx`

# java - 将“变体”附加到语言和国家/地区代码的区域设置

> ID：13925204
> 
> 赞同：2
> 
> 时间：2012-12-18T01:55:44.623
> 
> 标签：java, locale

LocaleContext.getLocale() 返回当前作为“en_US_WOL”的语言环境对象。我使用断点验证了语言环境对象，看起来像英语，美国 - 美国的国家代码，WOL - 变体（语言环境对象的一个​​字段）。变体字段如何以及为什么会为 getLocale() 方法附加和返回？我该如何阻止呢？（LocaleContext 是 ThreadLocal 类型）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T04:59:37.413

根据[http://docs.oracle.com/javase/6/docs/api/java/util/Locale.html](http://docs.oracle.com/javase/6/docs/api/java/util/Locale.html)

> 变体参数是供应商或浏览器特定的代码。例如，Windows 使用 WIN，Macintosh 使用 MAC，POSIX 使用 POSIX。如果有两个变体，请用下划线分隔它们，并将最重要的一个放在第一位。例如，传统的西班牙语排序规则可能会构造一个带有语言、国家和变体参数的语言环境：“es”、“ES”、“Traditional_WIN”。

如果您在特定变体的 Locale 之后，我认为您可以使用此构造函数：

```
Locale(String language, String country, String variant) 
```

或者调整浏览器的区域设置（如果您的应用程序完全涉及浏览器）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-06T10:56:40.210

我也有这个问题。不幸的是，我还没有找到任何内置方法来很好地输出没有 Variant 的语言国家代码，所以我用这样的代码段帮助自己（也许对某人来说很方便）：

```
public static String getLanguageCode(Locale locale) {
    StringBuilder sb = new StringBuilder();
    sb.append(locale.getLanguage());
    if (locale.getCountry() != null && locale.getCountry().length() > 0) {
        sb.append("-");
        sb.append(locale.getCountry());
    }
    return sb.toString();
} 
```

# php - 滚动销售平均算法实现 MySQL + PHP

> ID：13925205
> 
> 赞同：1
> 
> 时间：2012-12-18T01:55:45.390
> 
> 标签：php, mysql, algorithm

我正在为我们的网站开发一个销售排名小部件，该小部件将在“顶级图表”或“畅销书”列表中显示按当前位置排序的产品（可以这么说）。

经过一番阅读，实现这一点的一个好方法似乎只是一个滚动销售平均算法，其中销售越近，权重越高。

**例子：**

`$rolling_avg = ((4*$d1)+(3*$d2)+(2*$d3)+$d4+$d5+$d6+$d7)/13;`

在哪里：

*   $d1 = 过去 24 小时内的销售数量。
*   $d2 = 过去 24-48 小时内的销售数量。
*   $d3 = 过去 48-72 小时内的销售数量。
*   $d4 = 过去 72-96 小时内的销售数量。

等等...

目前，我正在尝试在大约 50 万条记录的产品数据集上运行它，将计算出的排名插入到产品表中，以便以后可以查询。如果可能的话，我希望能够创建一个脚本来重新计算排名并每 12 或 24 小时在 cron 上运行一次。

**当前实施：**

我当前的实现需要很长时间才能执行，而且我觉得需要在 SQL 级别完成更多的处理（SELECT 查询要少得多），但我不确定如何开始这个。

```
$products = mysql_query("SELECT * FROM products ORDER BY id DESC"); // <-- Est 450-500k rows.

while($product = mysql_fetch_array($products)) {
    $product_id = $product['id'];

    $d1 = mysql_query("SELECT COUNT(*) FROM orders WHERE (product_id = '$product_id') AND (sale_completed BETWEEN (NOW()-INTERVAL 24 HOUR) AND NOW())") or die(mysql_error);
    $d1 = mysql_fetch_array($d1);

    $d2 = mysql_query("SELECT COUNT(*) FROM orders WHERE (product_id = '$product_id') AND (sale_completed BETWEEN (NOW()-INTERVAL 48 HOUR) AND (NOW()-INTERVAL 24 HOUR))");
    $d2 = mysql_fetch_array($d2);

    $d3 = mysql_query("SELECT COUNT(*) FROM orders WHERE (product_id = '$product_id') AND (sale_completed BETWEEN (NOW()-INTERVAL 72 HOUR) AND (NOW()-INTERVAL 48 HOUR))");
    $d3 = mysql_fetch_array($d3);

    $d4 = mysql_query("SELECT COUNT(*) FROM orders WHERE (product_id = '$product_id') AND (sale_completed BETWEEN (NOW()-INTERVAL 96 HOUR) AND (NOW()-INTERVAL 72 HOUR))");
    $d4 = mysql_fetch_array($d4);

    $d5 = mysql_query("SELECT COUNT(*) FROM orders WHERE (product_id = '$product_id') AND (sale_completed BETWEEN (NOW()-INTERVAL 120 HOUR) AND (NOW()-INTERVAL 96 HOUR))");
    $d5 = mysql_fetch_array($d5);

    $d6 = mysql_query("SELECT COUNT(*) FROM orders WHERE (product_id = '$product_id') AND (sale_completed BETWEEN (NOW()-INTERVAL 144 HOUR) AND (NOW()-INTERVAL 120 HOUR))");
    $d6 = mysql_fetch_array($d6);

    $d7 = mysql_query("SELECT COUNT(*) FROM orders WHERE (product_id = '$product_id') AND (sale_completed BETWEEN (NOW()-INTERVAL 168 HOUR) AND (NOW()-INTERVAL 144 HOUR))");
    $d7 = mysql_fetch_array($d7);

    $d1 = $d1[0];
    $d2 = $d2[0];
    $d3 = $d3[0];
    $d4 = $d4[0];
    $d5 = $d5[0];
    $d6 = $d6[0];
    $d7 = $d7[0];       

    $rolling_avg = ((4*$d1)+(3*$d2)+(2*$d3)+$d4+$d5+$d6+$d7)/13;

    mysql_query("UPDATE products SET rolling_sales = '$rolling_avg' WHERE id = '$product_id'");
} 
```

不知道如何从这里优化/进步。但它肯定需要*大量*的工作。

*在提及之前，我了解`mysql_*`功能已贬值，我将在 PDO 移入生产环境之前将其移至 PDO。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T05:19:36.403

这是一个使用单个查询计算滚动销售额的函数。

```
function get_rolling_sales($product_id) {

    $query = <<<EOF
SELECT (
    4 * (

   SELECT COUNT(*) FROM orders WHERE (product_id = $product_id) 
   AND (sale_completed BETWEEN (NOW()-INTERVAL 24 HOUR) AND NOW())

) + 3 * (

  SELECT COUNT(*) FROM orders WHERE (product_id = $product_id) 
  AND (sale_completed BETWEEN (NOW()-INTERVAL 48 HOUR) AND (NOW()-INTERVAL 24 HOUR))

) + 2 * (

  SELECT COUNT(*) FROM orders WHERE (product_id = $product_id) 
  AND (sale_completed BETWEEN (NOW()-INTERVAL 72 HOUR) AND (NOW()-INTERVAL 48 HOUR))

) + (

  SELECT COUNT(*) FROM orders WHERE (product_id = $product_id) 
  AND (sale_completed BETWEEN (NOW()-INTERVAL 96 HOUR) AND (NOW()-INTERVAL 72 HOUR))

) + (

  SELECT COUNT(*) FROM orders WHERE (product_id = $product_id) 
  AND (sale_completed BETWEEN (NOW()-INTERVAL 120 HOUR) AND (NOW()-INTERVAL 96 HOUR))

) + (

  SELECT COUNT(*) FROM orders WHERE (product_id = $product_id) 
  AND (sale_completed BETWEEN (NOW()-INTERVAL 144 HOUR) AND (NOW()-INTERVAL 120 HOUR))

) + (

  SELECT COUNT(*) FROM orders WHERE (product_id = $product_id) 
  AND (sale_completed BETWEEN (NOW()-INTERVAL 168 HOUR) AND (NOW()-INTERVAL 144 HOUR))

)

) / 13 AS rolling_sales
EOF;

$result = mysql_query($query);
$row = mysql_fetch_assoc($result);
return $row['rolling_sales'];
} 
```

然而，迭代所有 500.000 条产品记录仍然需要很长时间。您真的需要一次所有这些信息（例如用于计算）还是计划在分页表视图中显示？如果您只想显示数据，则可以按需计算 rolling_sales。

# java - JavaFX 中的自定义可运行节点

> ID：13925208
> 
> 赞同：0
> 
> 时间：2012-12-18T01:55:59.353
> 
> 标签：java, multithreading, javafx-2, javafx

我有一个想法来创建执行任务并可以添加到视图中的小部件，但我担心我可能会从完全错误的角度解决问题。这是我的抽象类

```
public abstract class AbstractWidget extends AnchorPane
{
    private Thread thread;
    protected Task<?> task;

    public AbstractWidget()
    {
    }

    public void start()
    {
        this.thread = new Thread(this.task);
        this.thread.start();
    }

    public void stop()
    {
        this.task.cancel();
    }
} 
```

一个实现（跟踪程序运行时间的小部件）

```
public class RuntimeWidget extends AbstractWidget
{
    public RuntimeWidget()
    {
        this.task = new Task<Void>()
        {
            @Override
            public void run()
            {
                final long startTime = System.currentTimeMillis();

                while(true)
                {
                    if (isCancelled())
                        break;

                    Platform.runLater(new Runnable()
                    {
                        @Override
                        public void run ()
                        {
                            long secs = System.currentTimeMillis() -startTime) / 1000;
                            String display = String.format("%02d:%02d", (secs % 3600) / 60, (secs % 60));
                            System.out.println(display);
                        }
                    });

                    try {
                        Thread.sleep(1000);
                    } catch ( InterruptedException e ) {
                        e.printStackTrace();
                    }
                }
            }
        };
    }

} 
```

在 FXML 控制器中使用小部件

```
public void initialize(URL fxmlFileLocation, ResourceBundle resources)
{
    RuntimeWidget runtimeWidget = new RuntimeWidget();
    gridPane.add(runtimeWidget, 0, 0);
}

@FXML private void handleRunAction( ActionEvent event ) throws IOException, InterruptedException
{
    runtimeWidget.start();
} 
```

一切正常，但这是*正确*的方法吗？我使用任务而不是服务，因为程序的运行操作可以停止并重新启动，但永远不会暂停和恢复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T00:00:21.710

我决定只使用服务。处理可以多次运行的函数要容易得多。

```
public abstract class AbstractWidget extends Whatever
{
    protected Service<?> service;

    public AbstractWidget()
    {
    }

    public void start()
    {
        service.start();
    }

    public void stop()
    {
        service.cancel();
        service.reset();
    }
} 
```

然后你可以创建一个类，如：

```
public class MyWidget() extends AbstractWidget
{

    public MyWidget()
    {
        this.service. = new MyService();
    }

    private class MyService extends Service<Void>
    {
        protected Task<Void> createTask()
        {
            @Override
            return new Task<Void>()
            {
                // whatever
            }
        }
    }
} 
```

# linux-kernel - 内核模块的引用计数

> ID：13925215
> 
> 赞同：4
> 
> 时间：2012-12-18T01:57:24.197
> 
> 标签：linux-kernel, kernel-module

我有一个要维护的模块，并且似乎在内核中保留了引用计数器存在问题，这导致在我杀死打开模块的 3 个原始套接字的守护程序后，我无法对我的模块进行 rmmod。有趣的是，在加载守护进程 'lsmod' 后显示存在 6 个对模块的引用，我预计只有三个。

这发生在带有 Linux-2.6.31 的基于 ARM 的嵌入式系统上，并且 rmmod 没有“强制”模式来尝试强制卸载模块（这无论如何都不是好主意）。

我已经分析了代码，这就是我所拥有的： 1) 模块创建新的套接字地址系列 AF_HSL 并向内核注册：

```
static struct proto_ops SOCKOPS_WRAPPED (hsl_ops) = {
  family:       AF_HSL,

  owner:        THIS_MODULE,
  release:      hsl_sock_release,
  bind:         _hsl_sock_bind,
  connect:      sock_no_connect,
  socketpair:   sock_no_socketpair,
  accept:       sock_no_accept,
  getname:      _hsl_sock_getname,
  poll:         datagram_poll,
  ioctl:        sock_no_ioctl,
  listen:       sock_no_listen,
  shutdown:     sock_no_shutdown,
  setsockopt:   sock_no_setsockopt,
  getsockopt:   sock_no_getsockopt,
  sendmsg:      _hsl_sock_sendmsg,
  recvmsg:      _hsl_sock_recvmsg,
  mmap:         sock_no_mmap,
  sendpage:     sock_no_sendpage,
};

static struct net_proto_family hsl_family_ops = {
  family:               AF_HSL,
  create:               _hsl_sock_create,
  owner:                THIS_MODULE
};
...

static int
_hsl_sock_create (struct net *net, struct socket *sock, int protocol)
{
  struct sock *sk = NULL;

  sock->state = SS_UNCONNECTED;
  sk = sk_alloc (current->nsproxy->net_ns, AF_HSL, GFP_KERNEL, &_prot);
  if (sk == NULL)
    goto ERR;

  sock->ops = &SOCKOPS_WRAPPED(hsl_ops);
  sock_init_data (sock,sk);

  sock_hold (sk);  /* XXX */
  ...

}

static void
_hsl_sock_destruct (struct sock *sk)
{
  struct hsl_sock *hsk, *phsk;

  if (!sk)
    return;

  ...
  sock_orphan (sk);
  skb_queue_purge (&sk->sk_receive_queue);

  sock_put (sk);
}

int
hsl_sock_release (struct socket *sock)
{
  struct sock *sk = sock->sk;

  /* Here goes logic to destroy net_devices */
  ...

  _hsl_sock_destruct (sk);

  sock->sk = NULL;

  return 0;
} 
```

2) 守护进程以这种方式创建套接字

```
fd = socket(AF_HSL, SOCK_RAW, 0);;
bind();
getsockname(); 
```

但是我不认为 _hsl_sock_create() 应该调用 sock_hold()，这会增加套接字的引用计数，但是它已经被 sock_init_data() 设置为 1，并且在套接字删除阶段 sock_put() 会减 1，但是这会没有空闲的插座；d 并从系统中完全删除。

所以我试验并删除了 sock_hold(); 现在杀死所有引用中的守护进程产生并且“rmmod”成功，但是启动守护进程后的引用数量仍然是3。

我还检查了 socket_create() 的代码，它调用了内部函数 __socket_create()，而后者又调用了 try_module_get() 并保存了模块的引用计数。这似乎是我发现的唯一显式增加模块的 refcnt 的地方。

我仍然很困惑。有人会尝试帮助了解正在发生的事情吗？

期待您的回音。

标记

# jquery - 通过 ajax 加载的 Javascript 不能在后面的脚本块中调用函数

> ID：13925216
> 
> 赞同：1
> 
> 时间：2012-12-18T01:57:25.680
> 
> 标签：jquery, html, ajax, script-tag, domready

我有 2 个 HTML 文件，**1.html**和**2.html**。

*   **1**是主页，它通过 ajax 加载**2**并将其内容填充到`div`.
*   在**1**中，有 3 个脚本块 - **A**、**B**和**C**。
    *   `$(document).ready()`in 块**B**调用块**C**中的函数。
    *   没有错误。
*   在**2**中，有 3 个脚本块 - **P**、**Q**和**R**。
    *   `$(document).ready()`in 块**Q**调用块**R**中的函数。
    *   它给出了一个错误。

似乎当通过 ajax 加载某些 Javascript 时，它无法调用稍后（但不是更早）出现在同一文件中的脚本块中的函数。为什么？这是预期的行为吗？

## 源代码

### 1.html

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

<!-- Script block A -->
<script type='text/javascript'>
    function A() {alert('A');}
</script>

<div>x</div>

<!-- Script block B -->
<script type='text/javascript'>
    $(function() {
        A(); B(); C();

        $("#ajax_load_result").load("2.html");
    });

    function B() {alert('B');}
</script>

<div>x</div>

<!-- Script block C -->
<script type='text/javascript'>
    function C() {alert('C');}
</script>

<div id='ajax_load_result'>y</div> 
```

### 2.html

```
<div>x</div>

<!-- Script block P -->
<script type='text/javascript'>
    function P() {alert('P');}
</script>

<div>x</div>

<!-- Script block Q -->
<script type='text/javascript'>
    $(function() {
        P(); Q(); R();
    });

    function Q() {alert('Q');}
</script>

<div>x</div>

<!-- Script block R -->
<script type='text/javascript'>
    function R() {alert('R');}
</script>

<div>x</div> 
```

## 输出

它会警告`A`, `B`, `C`, `P`, `Q`，然后给出错误消息。

## 错误信息

歌剧 12.11：

> 未处理的错误：未定义的变量：R

铬 23.0.1271.97 米：

> 未捕获的 ReferenceError：未定义 R

即 9：

> SCRIPT5007：属性“R”的值为 null 或未定义，而不是 Function 对象

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T02:07:12.300

在 2.html 中 $(document).ready 立即触发，因为 dom 已经构建，此时尚未到达包含 R 的脚本块，因此未定义 R。在 1.html 中，整个页面在 $(document).ready 之前加载，因此 C 被定义。

# android - android: 片段的 setOnKeyListener 问题

> ID：13925217
> 
> 赞同：0
> 
> 时间：2012-12-18T01:57:37.890
> 
> 标签：android, android-fragments

**更新** `ItemEntryFragment.java`并`ToDoActivity.java`包括我最近尝试让这个东西工作，但它没有

我在一个android开发班。我们的**任务**是使用两个片段制作一个简单的待办事项列表。第一个片段是 EditText，第二个片段是 listView。

当用户在编辑文本框中输入一个项目并按回车键时，该字符串将添加到列表视图中。

**更新 2** 该应用程序现在已成功加载到我的手机上，并且片段看起来与预期一样。但是，当我在 EditText 行中输入文本后按回车键时，永远不会触发 setOnKeyListener。代码段是最新的。

任何建议/指针将不胜感激。

以下是我认为正确的 xml 文件

```
main.xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
<fragment
    android:name="com.todo.ToDoListFragment"
    android:id="@+id/todolistFragment"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />
<fragment
    android:name="com.todo.ItemEntryFragment"
    android:id="@+id/textboxFragment"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />
</LinearLayout> 
```

_

```
list_view_fragment.xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" > 
<EditText
    android:id="@+id/myEditText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:contentDescription="@string/addItemContentDescription"
    android:hint="@string/addItemHint" />
</LinearLayout> 
```

_

```
edit_text_fragment.xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
</LinearLayout> 
```

这是我的 .java 文件

```
import android.app.Activity;
import android.app.Fragment;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.EditText;

public class ItemEntryFragment extends Fragment{    

private ToDoListActivity activity;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.text_entry_box, container, false);    
    final EditText myEditText = (EditText)view.findViewById(R.id.myEditText);

    myEditText.setOnKeyListener(new View.OnKeyListener() {
        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            if (event.getAction() == KeyEvent.ACTION_DOWN)
                if((keyCode == KeyEvent.KEYCODE_DPAD_CENTER) || (keyCode == KeyEvent.KEYCODE_ENTER)) {
                    String newItem = myEditText.getText().toString();
                    activity.addItem(newItem);
                    myEditText.setText("");
                    return true;
                }
            return false;
        }
    });
    return view;
}

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
    this.activity = (ToDoListActivity)activity;
}   
} 
```

_

```
public class ToDoListFragment extends ListFragment {
//this class is empty because the ListFragment auto adds the ListView
} 
```

这是我的主要java文件

```
import java.util.ArrayList;
import android.app.Activity;
import android.app.FragmentManager;
import android.os.Bundle;
import android.widget.ArrayAdapter;

public class ToDoListActivity extends Activity {

private ArrayAdapter<String> aa;
private ArrayList<String> todoItems;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //inflate view
    setContentView(R.layout.activity_to_do_list);

    //get references to fragments
    FragmentManager fm = getFragmentManager();

    ToDoListFragment todoListFragment = (ToDoListFragment) fm.findFragmentById(R.id.todolistFragment);

    todoItems = new ArrayList<String>();

    //create array adaptor to bind array to list view
    aa = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, todoItems);

    //bind array adapter to list view
    todoListFragment.setListAdapter(aa);
}   

public void addItem(String newItem){
    todoItems.add(newItem);
    aa.notifyDataSetChanged();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T03:13:09.160

也许尝试挂钩 onEditorAction 并设置 EditText 属性，如此[处所述](https://stackoverflow.com/questions/11311790/oneditoraction-is-not-called-after-enter-key-has-been-pressed-on-jelly-bean-em)

# java - 如何控制哪个 ClassLoader 加载一个类？

> ID：13925224
> 
> 赞同：6
> 
> 时间：2012-12-18T01:58:22.650
> 
> 标签：java, classloader, jnlp, java-web-start, dynamic-class-loaders

眼前的情况并不像标题所暗示的那么简单。

通过 JWS 运行的 Java 1.6_17。

我有一个类，假设`MyClass`它的一个实例成员变量是来自错误的 3rd 方库的类型，在该类初始化期间，它动态尝试使用`Class.forName(String)`. 在其中一种情况下，它碰巧动态调用： .此类`Class.forName("foo/Bar")`名称不遵循二进制名称的 JLS 并最终导致`java.lang.NoClassDefFoundError: foo/Bar`.

我们有一个自定义项`ClassLoader`，我添加了一个 sanitize 方法`ClassLoader.findClass(String)`并`ClassLoader.loadClass(String)`解决了这个问题。

我可以这样称呼： `myCustomClassLoader.findClass("foo/Bar")`

然后加载类没有任何问题。但是即使我提前加载了类，我仍然会在以后得到异常。这是因为在 which 的初始化过程中`MyClass`，`Bar`它们*的*代码最终会`Class.forName("foo/Bar")`在某个地方调用静态块。如果它尝试使用的 ClassLoader 是我的自定义类加载器，这实际上是可以的。但事实并非如此。它是`com.sun.jnlp.JNLPClassLoader`不做这种卫生的，因此是我的问题。

我已确保将`Thread.currentThread().getContextClassLoader()`其设置为我的自定义类加载器。但这（如您所知）没有效果。`main()`由于我阅读了一些东西，我什至将它设置为我做的第一件事，而且仍然`MyClass.class.getClassLoader()`是 JNLPClassLoader。如果我可以强制它不是 JNLPClassLoader 而是使用我的，问题就解决了。

如何通过在类初始化期间进行的静态 Class.forName("foo/Bar") 调用来控制使用哪个 ClassLoader 来加载类？我相信如果我可以强制`MyClass.class.getClassLoader()`返回我的自定义类加载器，我的问题就会得到解决。

如果有人有想法，我愿意接受其他选择。

TL;DR：帮助我强制使用我选择的类加载器`Class.forName(String)`引用第三方库中的所有调用。`MyClass`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T04:31:17.713

这让我想起了 10 年前读过的一篇关于 Java 中的类加载安排的文章。它仍然存在[于 JavaWorld 上](http://www.javaworld.com/javaqa/2003-06/01-qa-0606-load.html)。

本文不会直接回答您的问题，但可能有助于理解您的问题。您需要`MyClass`通过您的自定义类加载器加载并胜过默认的类加载行为，即首先将类加载委托给父类加载器，并且仅在失败时才尝试加载类。

允许`MyClass`由除您之外的类加载器加载将存储从实例化类到该类加载器的关系（通过`getClassLoader`）并导致 Java 使用该其他类加载器尝试[发现在编译时找到的](http://docs.oracle.com/javase/specs/jvms/se5.0/html/ClassFile.doc.html#20080)任何引用类，有效地绕过您的自定义类加载器借助类加载器层次结构和委托模型。如果`MyClass`是由您的类加载器*定义*，您将获得第二次机会。

这听起来像是一项工作`URLClassLoader`，覆盖`loadClass`并胜过驻留在 JAR 中的类的委托模型。您可能希望使用引导方法（正如 Thomas 在上面的评论中所建议的那样）来强制通过您的自定义类加载器加载单个入口点类，并用它拖动所有其他入口点类。

同样提供信息的是同一个人的[另一篇 JavaWorld 文章](http://www.javaworld.com/javaworld/javaqa/2003-03/01-qa-0314-forname.html)，它警告您注意 Class.forName 的注意事项。这也可能会影响您的类加载安排。

我希望这会有所帮助并提供信息。无论如何，这听起来像是一个困难的解决方案，随着代码的发展很容易被打破。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-13T17:35:49.923

我认为每个人都在回答这个问题方面做出了很好的扎实尝试。然而，事实证明我误诊了这个问题。

我让一位同事接管了这个问题，并要求他获得一个带有调试标志的 JDK，这样我们就可以调试它`JNLPClassLoader`以查看发生了什么，因为我已经尝试了这里的所有建议 + 一些。

我们最终获得了 OpenJDK，因为从头开始重新编译 JDK 是一场噩梦（我们尝试过）。在让 OpenJDK 与我们的产品一起工作并通过调试之后`JNLPClassLoader`- 事实证明，它仍在使用几个月前的一个非常旧的 .jnlp，它的资源路径错误，因此找不到该类。

我们很困惑为什么它仍然使用古老的 .jnlp，即使我们已经多次使用正确的 .jnlp 正确地重新部署了服务器，并且在运行时反映在我们的客户端应用程序中的大量代码更改。

好吧，事实证明，在客户端机器上，Java 缓存了 .jnlp 文件。即使您的应用程序发生更改并重新下载您的应用程序，它仍然不会以任何原因重新下载新的 .jnlp。因此它将使用所有新代码，但使用缓存的 .jnlp 查找资源/类路径。

如果您运行： `javaws -uninstall` 在客户端计算机上，这将清除 .jnlp 缓存，下次它将使用正确的 .jnlp 文件。

真的很遗憾，这是问题所在。希望这可以节省其他人无数小时的挫败感，就像它给我们造成的那样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T05:25:03.597

如果您在修补 s 本身时没有想法`ClassLoader`，您可能会考虑重写库字节码本身 - 只需将“foo/bar”常量替换为正确的值，然后您根本不需要自定义进一步的类加载！

您可以在运行时或事先执行此操作。

# javascript - Ember.js——如何在嵌套/重复视图中定位出口，这种 ui 布局的最佳实践是什么？

> ID：13925233
> 
> 赞同：9
> 
> 时间：2012-12-18T01:59:13.820
> 
> 标签：javascript, controller, ember.js, handlebars.js, outlet

我正在重构一个继承的 Ember 应用程序，它带有相当多的非 mvc 混乱。我希望尽可能保持模块化，并希望在多个屏幕中重用各种 ui 组件以帮助防止代码重复。

似乎网点是做到这一点的最佳方式。

现在，我有一个 UI 显示了许多元素，每个元素都使用模板化视图呈现。

```
{{#each item in controller}}
      {{view App.ItemThumbView}}
{{/each}} 
```

此视图的右侧边栏是一个出口，它会根据选择而变化。When I select an item, I would like to display a list of edit operations within the templatized sub-view, which when selected, reveal the proper edit UI through a nested outlet.

本质上

```
+---------------------------------------------------+
|        Parent Pane
|
| +------------------------------+ +----------+
| |  Device Section              | | Sidebar  |
| |                              | | [Outlet] |
| |  +--------+ +---------+      | |          |
| |  | Dev 1  | |  Dev 2  |      | |          |
| |  |[outlet]| | [outlet]|      | +----------+
| |  +--------+ +---------+      |
| +------------------------------+ 
+--------------------------------------------------+ 
```

嵌套视图都共享同一个控制器——这是有道理的——但我需要能够将选定的视图连接到其相应的插座。我最初尝试连接插座的尝试从未显示出来。代码根本没有失败，所以控制器只是更新了一个隐藏的插座。

如何在 Ember 中为嵌套视图定位正确的出口？（充其量，我似乎能够点击侧边栏插座，但不能点击嵌套设备模板中的插座。）这是首先在 ember 中实现上下文菜单的合理结构吗？

***澄清一下 在我当前的设置中，每个设备项都使用相同的模板呈现。选中后，侧边栏插座将使用某些设备的元信息进行更新，而选定的设备视图还将其插座连接到编辑菜单。一次只能连接一个设备项目的“编辑”插座。

甚至在这里使用插座是否有意义，或者我应该将条件逻辑放入模板中以便在必要时显示编辑菜单？

**更新以重申问题的最佳实践部分**：

插座似乎非常适合解耦组件和面向未来的潜在视图嵌套。但是现在似乎访问嵌套视图的正确出口有点麻烦。此外，如果您总是知道哪些组件将有条件地嵌套在模板中，那么对您的视图进行硬编码似乎是最简单的。例如：

```
// within template used for individual result-list items
{{#if condition }}
   {{view reusableSubView}}
{{/if} 
```

这里首选的 ember 做事方式是什么？创建不一定始终连接的插座是否有任何开销？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-18T23:12:42.877

好的，在玩了几个小时之后，似乎最好有条件地在我的嵌套视图正上方的关卡中包含一个命名的插座。

这是因为您需要一个单一的、可靠的插座来在模板中定位，而且似乎没有一种在运行时以编程方式命名插座的好方法。

此外，您希望定位的插座需要存在于父模板中的某个位置，嵌套在路由器、控制器和用于渲染屏幕当前状态的渲染模板中。如果父路由对象没有放置出口，则不能希望在叶节点路由中定位它。

让我用一个例子来解释：

自从我最初提出我的问题以来，我们的 UI 已经从设备列表变为人员列表，但原理保持不变。

我有一个包含他们照片的人员列表，可以单击他们以在他们的结果旁边显示更多信息。

我有一个看起来像这样的人员模板：

```
<script type="text/x-handlebars" data-template-name="people" >
    <h3>People in this group</h3>
    <div class="peeps">
        {{#each controller}}
             {{ view App.PersonView }}
             {{#if selected }}
                   <div class='too-personal'>
                   {{ outlet veryPersonalDetails }}
                   </div>
             {{/if}}
         {{/each}} 
    </div>
</script> 
```

还有一个有点像这样的人物模板：

```
<script type="text/x-handlebars" data-template-name="person" >
        {{#linkTo person this}}
            <div data-desc="person-item" class="item">
                <div class="portrait">
                    <img class="avatar" {{bindAttr src="gravatarUrl"}}/>
                </div>
                <div class="statuslabel"><span {{bindAttr class=":label statusLabel"}}>{{statusText}}</span></div>
                <div class="cTitle">{{fullName}}</div>
            </div>
        {{/linkTo}}     </script> 
```

以及带有额外信息和编辑选项的详细信息模板

```
<script type="text/x-handlebars" data-template-name="person/details" > 
various edit options    
</script> 
```

单击人员结果时，我的路由器会获取 url 更新，并将详细信息模板中的存根存根到父人员模板中。我的路由器设置如下：

```
App.Router.map(function() {
...
    this.resource('people', { path: '/people'}, function() {
        this.resource('person', { path: '/:person_id' },
            function() {
                this.route('details');
            }
        );
    });

}); 
```

使用个别路线：

```
App.PeopleRoute = Ember.Route.extend({
    model: function() {
        return App.People.find();
    },
    setupController: function(controller, model) {
        controller.set('content', model);
    }
});

App.PersonRoute = Ember.Route.extend({
    model: function(params) {
        return App.People.peepsById[params.person_id];
    },

    setupController: function(controller, model) {
        this._super(controller, model);
        var person = model;
// this block ensures that only one person has a selected status at a time
// ignore the overly-verbose code. I'm cleaning it up tomorrow 
        var ls = App.People.lastSelected;
        if (ls) {
            ls.set('selected', false);
        }
        person.set('selected', true);
        App.People.lastSelected = person;
        controller.set('content', model);
    },

    renderTemplate: function() {
        // person is actually stored in router 'context' rather than 'model'
        // omg!
        var x = this.controllerFor('personDetails').set('content', this.get('context'));
        this.render('person/details', { // render person/details
            into:'people', // into the people template
            outlet: "veryPersonalDetails", // at the veryPersonalDetails outlet
            controller: x // using the personDetails controller for rendering
        });

// additional rendering in sidebar outlet for testing
        this.render('person/details',{
            into:'people',
            outlet: "personDetails",
            controller: x
        });

        console.log("@@@ we did it!");
    }
}); 
```

我最初试图在 PersonView 中使用插座，但这不起作用，因为我的人员模板实际上是在人员路线中呈现的。当应用程序到达人员路由时，控制器已经渲染了列表中的所有人员。我要定位的那个人早就过去了。

通过让路由充当父模板和所需子模板之间的中介，我能够做到这一点。

最后，关于是在模板中显式声明嵌套视图还是只使用 outlet 的问题，我认为 outlet 更干净。虽然这个解决方案涉及到一些围绕路线的工作，但它比拥有过于复杂的模板对象要好得多。现在，我希望能够实现任意复杂的模板嵌套，而无需触及它们渲染中涉及的路由之外的任何东西。

此外，该解决方案消除了未使用插座的开销。我相信你应该只拥有你打算使用的插座，而不是用一堆空容器对象乱扔“dom”。

# c# - WPF 编译时不显示屏幕上看到的内容

> ID：13925247
> 
> 赞同：0
> 
> 时间：2012-12-18T02:01:46.753
> 
> 标签：c#, wpf, gridview, alignment

我是 WPF 新手，习惯于 winforms。我不明白为什么编译的输出与设计视图中的不同。我觉得这有点烦人和误导。

添加元素时，我将它们捕捉到红色边框，结果与我在编译窗口中看到的不一致。在 winforms 中，我习惯于使用表格布局、面板以及停靠和对齐项目。在 WPF 中是否有正确的方法来获得一致的结果？

![设计师视图](../Images/74d734a379b9c64af486fd884e22827e.png)

XAML

```
<Window x:Class="WpfApplication4.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Rectangle Fill="#FFF4F4F5" HorizontalAlignment="Left" Height="300" Margin="10,10,0,0" Stroke="Black" VerticalAlignment="Top" Width="497"/>
    </Grid>
</Window> 
```

![输出](../Images/18c91605a08584064e287fe300d30864.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T02:06:37.357

在 WPF 中，大多数容器没有子位置的概念。相反，大多数控件使用 和 等属性来`Margin`定义它们的布局。此外，特定的容器提供不同的功能。如果要对接，可以使用. 如果你想要堆叠元素，你可以使用 a等等。我建议你在网上查一些教程，它有很多资源。`HorizontalAlignment``VerticalAlignment``DockPanel``StackPanel`

在您的情况下，如果您希望您的控件完全填充其容器，请从其 XAML 代码中删除、、`Margin`和`VerticalAlignment`属性。`HorizontalAlignment``Width``Height`

# python - 元组列表中的python条形图

> ID：13925251
> 
> 赞同：3
> 
> 时间：2012-12-18T02:02:21.287
> 
> 标签：python, matplotlib, data-analysis

非常新手的问题：

我需要从元组列表中绘制条形图。第一个元素是 x 轴的名称（分类），第二个元素是浮点类型（y 轴）。我还想按降序排列条形图，并添加趋势线。这是一些示例代码：

```
In [20]: popularity_data
Out[20]: 
[('Unknown', 10.0),
 (u'Drew E.', 240.0),
 (u'Anthony P.', 240.0),
 (u'Thomas H.', 220.0),
 (u'Ranae J.', 150.0),
 (u'Robert T.', 120.0),
 (u'Li Yan M.', 80.0),
 (u'Raph D.', 210.0)] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-12-01T06:29:44.027

如果你有一个元组列表，你可以尝试下面的代码来得到你想要的。

```
import numpy as np
import matplotlib.pyplot as plt
popularity_data = [('Unknown', 10.0),
     (u'Drew E.', 240.0),
     (u'Anthony P.', 240.0),
     (u'Thomas H.', 220.0),
     (u'Ranae J.', 150.0),
     (u'Robert T.', 120.0),
     (u'Li Yan M.', 80.0),
     (u'Raph D.', 210.0)]

# sort in-place from highest to lowest
popularity_data.sort(key=lambda x: x[1], reverse=True) 

# save the names and their respective scores separately
# reverse the tuples to go from most frequent to least frequent 
people = zip(*popularity_data)[0]
score = zip(*popularity_data)[1]
x_pos = np.arange(len(people)) 

# calculate slope and intercept for the linear trend line
slope, intercept = np.polyfit(x_pos, score, 1)
trendline = intercept + (slope * x_pos)

plt.plot(x_pos, trendline, color='red', linestyle='--')    
plt.bar(x_pos, score,align='center')
plt.xticks(x_pos, people) 
plt.ylabel('Popularity Score')
plt.show() 
```

这将为您提供如下图，尽管当您不使用时间序列时，在条形图上绘制趋势线是没有意义的。

[![流行度数据的条形图](../Images/d9c50ba35d46ae03f5863ecb06c950f1.png)](https://i.stack.imgur.com/lUBrO.png)

参考：

*   [Python：绘制元组列表](https://stackoverflow.com/questions/18458734/python-plot-list-of-tuples)
*   [matplotlib api 示例代码：barchart_demo.py](http://matplotlib.org/examples/api/barchart_demo.html "matplotlib 条形图")
*   [Matplotlib 和 Numpy 的练习](http://software-carpentry.org/blog/2012/05/an-exercise-with-matplotlib-and-numpy.html "Matplotlib 和 Numpy 的练习")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T02:39:05.310

你应该使用字典，它更容易使用。这会让你按降序排列：

```
popularity_data =  {
    'Unknown': 10.0,
    u'Drew E.': 240.0,
    u'Anthony P.': 240.0,
    u'Thomas H.': 220.0,
    u'Ranae J.': 150.0,
    u'Robert T.': 120.0,
    u'Li Yan M.': 80.0,
    u'Raph D.': 210.0
}

for y in reversed(sorted(popularity_data.values())):
    k = popularity_data.keys()[popularity_data.values().index(y)]
    print k + ':', y
    del popularity_data[k] 
```

您可以按照建议使用[matplotlib添加趋势线。](http://matplotlib.org/)`Aleksander S`

此外，如果您愿意，可以将其存储在元组列表中，就像您最初拥有的那样：

```
popularity_data =  {
    'Unknown': 10.0,
    u'Drew E.': 240.0,
    u'Anthony P.': 240.0,
    u'Thomas H.': 220.0,
    u'Ranae J.': 150.0,
    u'Robert T.': 120.0,
    u'Li Yan M.': 80.0,
    u'Raph D.': 210.0
}

descending = []
for y in reversed(sorted(popularity_data.values())):
    k = popularity_data.keys()[popularity_data.values().index(y)]
    descending.append(tuple([k, y]))
    del popularity_data[k]

print descending 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-18T02:11:05.337

您可以只使用 ASCII 字符表示条形，或者您可以查看[matplotlib](http://matplotlib.org/) ...

# regex - 正则表达式提取字符串的中间部分

> ID：13925257
> 
> 赞同：2
> 
> 时间：2012-12-18T02:03:21.623
> 
> 标签：regex

从这个例子中提取 58392 的正则表达式可能是什么。

冒号和散列之间的数字是可变长度的

```
sip:58392#7638500@10.10.10.10 
```

我尝试过这样的组合，但没有运气`sip:(.*?)#/\1/`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T02:08:48.057

试试这个表达，

```
(?<=:).*?(?=#) 
```

参见[Lookahead 和 Lookbehind 零宽度断言](http://www.regular-expressions.info/lookaround.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T02:09:29.570

在 Python 2.7.3 中：

```
>>> import re
>>> r = r"sip:(.*?)#"
>>> s = "sip:58392#7638500@10.10.10.10"
>>> re.findall(r,s)
['58392'] 
```

...有用。

我不明白`/\1/`你的正则表达式末尾是什么 - 可能是你正在使用的正则表达式的特定风格，但我怀疑这就是问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T02:13:54.023

以下将匹配**sip:58392#**然后通过任何拆分字符串方法，我认为您可以删除 sip: 和 #。

```
sip:.*?\# 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T02:14:10.687

这是一个 PHP 示例：

```
<?php

$string = 'sip:58392#7638500@10.10.10.10';
$pattern = '/^sip:([0-9]+)#/';
preg_match($pattern, $string, $matches);
echo "the number is : ", $matches[1]; 
```

# java - 有界类型参数 @see 和 @link javadoc

> ID：13925260
> 
> 赞同：4
> 
> 时间：2012-12-18T02:03:38.943
> 
> 标签：java, generics, javadoc

如果 javadoc 的 @see 和 @link 具有 Bonded 类型参数，您如何引用它们？

例子：

```
public class A { }
public interface I<J> { }

public class F {
    public static <T extends A & I<B>, B> String newThing(T bondedTypeObject, List<B> list) {
      /*...*/
    }

    public static <T extends A & I<B>, B> String newThing(T bondedTypeObject, B anotherObject) {
      /*...*/
    }

    /**
     * Uses {@link #newThing(T bondedTypeObject, List<B> list) newThing} to create a super new thing.
     */
    public static String createSuperNewThing(...) {
       return newThing(...);
    }
} 
```

您如何编写指向正确 newThing 方法的 createSuperNewThing 链接的 javadoc？

在这种情况下，Oracle 文档不是很清楚：http: [//docs.oracle.com/javase/6/docs/technotes/tools/windows/javadoc.html#specifyingname](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/javadoc.html#specifyingname)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T02:21:30.963

您需要指定参数的[擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，例如：

```
/**
 * Uses {@link newThing(A bondedTypeObject, List list)} to create...
 */ 
```

请注意，类型参数的擦除`T extends SomeClass & SomeInterface`是`SomeClass`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T02:44:48.537

这是 Oracle Java 文档中的一个示例。在 Collections 中链接到此方法

```
static <K,V> Map<K,V> synchronizedMap(Map<K,V> m) 
```

您将使用以下链接：

```
{@link Collections.html#synchronizedMap(Map)} 
```

# php - 通过 id 列查找实体，\Phalcon\Mvc\Model::findFirst() 给出不正确的结果

> ID：13925264
> 
> 赞同：5
> 
> 时间：2012-12-18T02:04:01.077
> 
> 标签：php, model, phalcon

目前我有帖子表，每个帖子都有一个ID。

暂时只存在一个帖子，id id = 92。

如果我执行以下代码，我不会得到错误，而是使用 id=92 发布：

```
$post = NewsPost::findFirst(['id' => 1]);
var_dump($post->id); // gives 92 
```

似乎是很奇怪的逻辑.. 可以使用什么方法来按 id 检索帖子，如果没有这样的实体，那将返回 false/throw 异常？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T02:29:26.520

试试这个：

```
$post = NewsPost::findFirst("id = 1"); 
```

或者

```
$post = NewsPost::find(
    array(
        "conditions" => "id = ?0",
        "bind"       => array(0 => 1)
    )
); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-05T12:46:27.403

我用：

```
$instance = Model::findFirst($id); 
```

其中 $id 是主键。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-01T02:10:53.470

采用

```
NewsPost::findFirst(['id = 1']); 
```

或者

```
NewsPost::findFirst(1) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-02T16:55:04.927

你应该使用：

```
NewsPost::findByid(1); 
```

其中“id”可以替换为模型的任何属性。例如：

```
NewsPost::findByDescription('Description');
NewsPost::findByyourprop(yourpropval); 
```

然后您可以通过 count() 返回值`count($result)`来确定您是否收到任何记录。

注意：我还发现字符串搜索不区分大小写。

# asp.net - XPath 属性查询和检索

> ID：13925268
> 
> 赞同：-1
> 
> 时间：2012-12-18T02:04:22.903
> 
> 标签：asp.net, xml, xpath

我一直难以理解 XPath。

我想做的是从货币国家代码中提取汇率。

我的带有货币的 XML 在这里： http: [//www.nationalbanken.dk/dndk/valuta.nsf/valuta.xml](http://www.nationalbanken.dk/dndk/valuta.nsf/valuta.xml)

这是我的查询：

```
query = xml.XPathSelectElement(**"exhangerates/dailyrates/currency[@code='"+ country +"']@rate"**).Value; 
```

我在 .NET 3.5 和一个 asp webservice 项目中工作，这会产生以下错误：

```
System.Xml.XPath.XPathException: 'exhangerates/dailyrates/currency[@code='USD']@rate' has an invalid token.
   at MS.Internal.Xml.XPath.XPathParser.ParseXPathExpresion(String xpathExpresion)
   at MS.Internal.Xml.XPath.QueryBuilder.Build(String query, Boolean allowVar, Boolean allowKey)
   at MS.Internal.Xml.XPath.QueryBuilder.Build(String query, Boolean& needContext)
   at System.Xml.XPath.XPathExpression.Compile(String xpath, IXmlNamespaceResolver nsResolver)
   at System.Xml.XPath.XPathNavigator.Evaluate(String xpath, IXmlNamespaceResolver resolver)
   at System.Xml.XPath.XPathEvaluator.Evaluate[T](XNode node, String expression, IXmlNamespaceResolver resolver)
   at System.Xml.XPath.Extensions.XPathSelectElements(XNode node, String expression, IXmlNamespaceResolver resolver)
   at System.Xml.XPath.Extensions.XPathSelectElement(XNode node, String expression)
   at WebServiceCurrency.Service1.RetrieveExchangeRate(String country) in c:\Users\Peter\Documents\GitHub\HotMess\C#\Webservices\WebServiceCurrency\WebServiceCurrency\Service1.asmx.cs:line 35 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T02:19:29.760

这有效：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>    
 <xsl:template match="/">

   <xsl:value-of select="//dailyrates/currency[@code='USD']/@rate" />

 </xsl:template>
</xsl:stylesheet> 
```

输出：

```
566,97 
```

所以你的解决方案应该是

```
query = xml.XPathSelectElement(**"exhangerates/dailyrates/currency[@code='"+ country +"']/@rate"**).Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T02:22:45.680

您的错误消息试图告诉您您的 XPath 有语法错误。为了

```
"exhangerates/dailyrates/currency[@code='"+ country +"']@rate" 
```

读

```
"exhangerates/dailyrates/currency[@code='"+ country +"']/@rate" 
```

也就是说，在导航到`currency`节点的步骤和导航到其`rate`属性的下一步骤之间插入一个斜线。（我看到 PCM 在这个解决方案上击败了我。脱帽致敬。）

# python - 数组到矩阵 numpy

> ID：13925272
> 
> 赞同：1
> 
> 时间：2012-12-18T02:05:59.410
> 
> 标签：python, numpy

我有一个提供多个数组的函数，我需要将它们放入一个矩阵中。

```
def equations(specie, elements):
 for x in specie:
   formula = parse_formula(x)
   print extracting_columns(formula, elements) 
```

我得到了什么：

```
equations(['OH', 'CO2','C3O3','H2O3','CO','C3H1'], ['H', 'C', 'O']) 
[ 1\.  0\.  1.]
[ 0\.  1\.  2.]
[ 0\.  3\.  3.]
[ 2\.  0\.  3.]
[ 0\.  1\.  1.]
[ 1\.  3\.  0.] 
```

我需要它给我 ([[1,0,1][[ 0., 1., 2.][ 0\. , 3\. , 3.][ 2\. , 0\. ,3.][ 0\. , 1\. ,1.][ 1\. , 3., 0.]])

我已经搞砸了一段时间，无法弄清楚。

如果您需要我过去的功能，它们如下：

```
def extracting_columns(specie, elements):
  species_vector=zeros(len(elements))
  for (el,mul) in specie:
    species_vector[elements.index(el)]=mul

  return species_vector 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T02:30:01.863

与其打印每一行，不如将它们收集到一个列表中（例如`result`）：

```
def equations(specie, elements):
    result = []
    for x in specie:
        formula = parse_formula(x)
        result.append(extracting_columns(formula, elements))
    return np.array(result) 
```

* * *

例如，

```
import numpy as np
import re

def equations(specie, elements):
    result = []
    for x in specie:
        formula = parse_formula(x)
        result.append(extracting_columns(formula, elements))
    return np.array(result)

def extracting_columns(formula, elements):
    return [formula.get(e, 0) for e in elements]

def parse_formula(formula):
    elts = iter(re.split(r'([A-Z][a-z]*)',formula)[1:])
    return {element:toint(num) for element, num in zip(*[elts]*2)}

def toint(num):
    try:
        return int(num)
    except ValueError:
        return 1

print(equations(['OH', 'CO2','C3O3','H2O3','CO','C3H1'], ['H', 'C', 'O'])) 
```

产量

```
[[1 0 1]
 [0 1 2]
 [0 3 3]
 [2 0 3]
 [0 1 1]
 [1 3 0]] 
```

# c# - 是否有更好的测试收敛机制？

> ID：13925274
> 
> 赞同：1
> 
> 时间：2012-12-18T02:06:21.517
> 
> 标签：c#, convergence

我正在使用牛顿法计算一个值，并使用 for 循环来测试它是否收敛。但我觉得在 for 循环中使用固定值并不是最好的方法。有什么建议吗？

```
double startingRate = 0.1;
double oldStartingRate;
double rateDeviation;
for (int x = 0; x < 50; x++)
{
    oldStartingRate = startingRate;
    startingRate = NewtonMethod(startingRate);
    rateDeviation = Math.Abs(startingRate - oldStartingRate);
    Debug.WriteLine("deviation:" + rateDeviation .ToString()+" rate:" + startingRate);
    if (rateDeviation < deviation)  //deviation is a constant
    {
        return startingRate;
    }
} 
```

# c# - 您将如何简化此映射？数组到对象

> ID：13925275
> 
> 赞同：0
> 
> 时间：2012-12-18T02:06:21.680
> 
> 标签：c#, arrays, loops

你认为什么是循环`img.Group.Contents`并将值写入galleryImage的最干净的方法。？？？对象？

```
galleryImage.TinyImage = new myModel.Image._Img();

galleryImage.TinyImage.Url = img.Group.Contents[0].Url;
galleryImage.TinyImage.FileSize = img.Group.Contents[0].FileSize;
galleryImage.TinyImage.Type = img.Group.Contents[0].Type;
galleryImage.TinyImage.Medium = img.Group.Contents[0].Medium;
galleryImage.TinyImage.Width = img.Group.Contents[0].Width;
galleryImage.TinyImage.Height = img.Group.Contents[0].Height;
galleryImage.TinyImage.Hash = img.Group.Contents[0].Hash;

galleryImage.Thumbnail.Url = img.Group.Contents[1].Url;
galleryImage.Thumbnail.FileSize = img.Group.Contents[1].FileSize;
galleryImage.Thumbnail.Type = img.Group.Contents[1].Type;
galleryImage.Thumbnail.Medium = img.Group.Contents[1].Medium;
galleryImage.Thumbnail.Width = img.Group.Contents[1].Width;
galleryImage.Thumbnail.Height = img.Group.Contents[1].Height;
galleryImage.Thumbnail.Hash = img.Group.Contents[1].Hash;

galleryImage.SmallImage.Url = img.Group.Contents[2].Url;
galleryImage.SmallImage.FileSize = img.Group.Contents[2].FileSize;
galleryImage.SmallImage.Type = img.Group.Contents[2].Type;
galleryImage.SmallImage.Medium = img.Group.Contents[2].Medium;
galleryImage.SmallImage.Width = img.Group.Contents[2].Width;
galleryImage.SmallImage.Height = img.Group.Contents[2].Height;
galleryImage.SmallImage.Hash = img.Group.Contents[2].Hash;

galleryImage.MediumImage.Url = img.Group.Contents[3].Url;
galleryImage.MediumImage.FileSize = img.Group.Contents[3].FileSize;
galleryImage.MediumImage.Type = img.Group.Contents[3].Type;
galleryImage.MediumImage.Medium = img.Group.Contents[3].Medium;
galleryImage.MediumImage.Width = img.Group.Contents[3].Width;
galleryImage.MediumImage.Height = img.Group.Contents[3].Height;
galleryImage.MediumImage.Hash = img.Group.Contents[3].Hash;

galleryImage.LargeImage.Url = img.Group.Contents[4].Url;
galleryImage.LargeImage.FileSize = img.Group.Contents[4].FileSize;
galleryImage.LargeImage.Type = img.Group.Contents[4].Type;
galleryImage.LargeImage.Medium = img.Group.Contents[4].Medium;
galleryImage.LargeImage.Width = img.Group.Contents[4].Width;
galleryImage.LargeImage.Height = img.Group.Contents[4].Height;
galleryImage.LargeImage.Hash = img.Group.Contents[4].Hash;

galleryImage.ExtraLargeImage.Url = img.Group.Contents[5].Url;
galleryImage.ExtraLargeImage.FileSize = img.Group.Contents[5].FileSize;
galleryImage.ExtraLargeImage.Type = img.Group.Contents[5].Type;
galleryImage.ExtraLargeImage.Medium = img.Group.Contents[5].Medium;
galleryImage.ExtraLargeImage.Width = img.Group.Contents[5].Width;
galleryImage.ExtraLargeImage.Height = img.Group.Contents[5].Height;
galleryImage.ExtraLargeImage.Hash = img.Group.Contents[5].Hash; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T02:12:55.160

函数提供了一种简化重复任务的好方法：

```
void ConfigureImage(MyImageType img, int pos) {
    img.Url = img.Group.Contents[pos].Url;
    img.FileSize = img.Group.Contents[pos].FileSize;
    img.Type = img.Group.Contents[pos].Type;
    img.Medium = img.Group.Contents[pos].Medium;
    img.Width = img.Group.Contents[pos].Width;
    img.Height = img.Group.Contents[pos].Height;
    img.Hash = img.Group.Contents[pos].Hash;
} 
```

有了这个函数，只用六行代码重写你的代码：

```
ConfigureImage(galleryImage.TinyImage, 0);
ConfigureImage(galleryImage.Thumbnail, 1);
ConfigureImage(galleryImage.SmallImage, 2);
ConfigureImage(galleryImage.MediumImage, 3);
ConfigureImage(galleryImage.LargeImage, 4);
ConfigureImage(galleryImage.ExtraLargeImage, 5); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T02:12:14.817

我假设`galleryImage.???`对象都是同一类型？

如果是这样，请为它们声明一个数组：

```
var list = new [] { 
   galleryImage.TinyImage, galleryImage.Thumbnail, galleryImage.SmallImage,
   galleryImage.MediumImage, galleryImage.LargeImage, 
   galleryImage.ExtraLargeImage }; 
```

然后你可以用 for 循环遍历它们：

```
for (int i=0; i<6; i++) {
    list[i].Url = img.Group.Contents[i].Url;
    list[i].FileSize = img.Group.Contents[i].FileSize;
    list[i].Type = img.Group.Contents[i].Type;
    list[i].Medium = img.Group.Contents[i].Medium;
    list[i].Width = img.Group.Contents[i].Width;
    list[i].Height = img.Group.Contents[i].Height;
    list[i].Hash = img.Group.Contents[i].Hash;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T02:13:48.623

大概是这样的

```
int ix = 0;
foreach( var dst in new [] { galleryImage.TinyImage, galleryImage.Thumbnail, etc }) {
  src = img.Group.Contents[ix];
  dst.Url = src.Url;
  dst.FileSize = src.FileSize;
  dst.Type = src.Type;
  dst.Medium = src.Medium;
  dst.Width = src.Width;
  dst.Height = src.Height;
  dst.Hash = src.Hash;
  ix++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T06:38:08.993

根据@Blorgbeard 的回答，这是我的最终代码。我不得不对其进行一些修改，因为`imgType`数组的长度未知。如果我使用`for`循环，它会抛出“索引越界异常”。

```
var imgType = new[] {
    galleryImage.TinyImage = new SmugMugGalleryModel.Image._Img(),
    galleryImage.Thumbnail = new SmugMugGalleryModel.Image._Img(),
    galleryImage.SmallImage = new SmugMugGalleryModel.Image._Img(),
    galleryImage.MediumImage = new SmugMugGalleryModel.Image._Img(),
    galleryImage.LargeImage = new SmugMugGalleryModel.Image._Img(),
    galleryImage.ExtraLargeImage = new SmugMugGalleryModel.Image._Img(),
    galleryImage.TwoExtraLargeImage = new SmugMugGalleryModel.Image._Img(),
    galleryImage.ThreeExtraLargeImage = new SmugMugGalleryModel.Image._Img(),
    galleryImage.OriginalImage = new SmugMugGalleryModel.Image._Img(),
};

var count = 0;
foreach (var i in img.Group.Contents)
{
    imgType[count].Url = i.Url;
    imgType[count].FileSize = i.FileSize;
    imgType[count].Type = i.Type;
    imgType[count].Medium = i.Medium;
    imgType[count].Width = i.Width;
    imgType[count].Height = i.Height;
    imgType[count].Hash = i.Hash;
    count++;
} 
```

# php - 如何使用 fpdf php 创建双条形图？

> ID：13925279
> 
> 赞同：2
> 
> 时间：2012-12-18T02:06:47.803
> 
> 标签：php, pdf, bar-chart, fpdf

![双条形图](../Images/3f68a5cf12ffee8355b2044a6f8c495e.png)

我在我的 php 项目中使用 FPDF。我想在我的项目中有像上图这样的 PDF 版本的双条形图。[FPDF 有一种方法可以在http://www.fpdf.org/en/script/script28.php](http://www.fpdf.org/en/script/script28.php)中创建饼图和条形图。但这不是我想要的双条形图。任何人都知道如何在 PHP 中使用 FPDF 创建双条形图？非常感谢 ！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:46:56.740

可能你的意思是“柱状图”

好像没有创建柱状图的方法，所以我尝试对现有的柱状图进行适配。不幸的是，我没有时间进一步开发它。

试试这个（进行必要的更改）：

```
<?php

require('diag/sector.php');

class PDF_Diag extends PDF_Sector {
    var $legends;
    var $wLegend;
    var $sum;
    var $NbVal;

    function ColumnChart($w, $h, $data, $format, $color=null, $maxVal=0, $nbDiv=4)
    {

        // RGB for color 0
        $colors[0][0] = 155;
        $colors[0][1] = 75;
        $colors[0][2] = 155;

        // RGB for color 1
        $colors[1][0] = 0;
        $colors[1][1] = 155;
        $colors[1][2] = 0;

        // RGB for color 2
        $colors[2][0] = 75;
        $colors[2][1] = 155;
        $colors[2][2] = 255;

        // RGB for color 3
        $colors[3][0] = 75;
        $colors[3][1] = 0;
        $colors[3][2] = 155;

        $this->SetFont('Courier', '', 10);
        $this->SetLegends($data,$format);

        // Starting corner (current page position where the chart has been inserted)
        $XPage = $this->GetX();
        $YPage = $this->GetY();
        $margin = 2; 

        // Y position of the chart
        $YDiag = $YPage + $margin;

        // chart HEIGHT
        $hDiag = floor($h - $margin * 2);

        // X position of the chart
        $XDiag = $XPage + $margin;

        // chart LENGHT
        $lDiag = floor($w - $margin * 3 - $this->wLegend);

        if($color == null)
            $color=array(155,155,155);
        if ($maxVal == 0) 
        {
            foreach($data as $val)
            {
                if(max($val) > $maxVal)
                {
                    $maxVal = max($val);
                }
            }
        }

        // define the distance between the visual reference lines (the lines which cross the chart's internal area and serve as visual reference for the column's heights)
        $valIndRepere = ceil($maxVal / $nbDiv);

        // adjust the maximum value to be plotted (recalculate through the newly calculated distance between the visual reference lines)
        $maxVal = $valIndRepere * $nbDiv;

        // define the distance between the visual reference lines (in milimeters)
        $hRepere = floor($hDiag / $nbDiv);

        // adjust the chart HEIGHT
        $hDiag = $hRepere * $nbDiv;

        // determine the height unit (milimiters/data unit)
        $unit = $hDiag / $maxVal;

        // determine the bar's thickness
        $lBar = floor($lDiag / ($this->NbVal + 1));
        $lDiag = $lBar * ($this->NbVal + 1);
        $eColumn = floor($lBar * 80 / 100);

        // draw the chart border
        $this->SetLineWidth(0.2);
        $this->Rect($XDiag, $YDiag, $lDiag, $hDiag);

        $this->SetFont('Courier', '', 10);
        $this->SetFillColor($color[0],$color[1],$color[2]);
        $i=0;
        foreach($data as $val) 
        {
            //Column
            $yval = $YDiag + $hDiag;
            $xval = $XDiag + ($i + 1) * $lBar - $eColumn/2;
            $lval = floor($eColumn/(count($val)));
            $j=0;
            foreach($val as $v)
            {
                $hval = (int)($v * $unit);
                $this->SetFillColor($colors[$j][0], $colors[$j][1], $colors[$j][2]);
                $this->Rect($xval+($lval*$j), $yval, $lval, -$hval, 'DF');
                $j++;
            }

            //Legend
            $this->SetXY($xval, $yval + $margin);
            $this->Cell($lval, 5, $this->legends[$i],0,0,'C');
            $i++;
        }

        //Scales
        for ($i = 0; $i <= $nbDiv; $i++) 
        {
            $ypos = $YDiag + $hRepere * $i;
            $this->Line($XDiag, $ypos, $XDiag + $lDiag, $ypos);
            $val = ($nbDiv - $i) * $valIndRepere;
            $ypos = $YDiag + $hRepere * $i;
            $xpos = $XDiag - $margin - $this->GetStringWidth($val);
            $this->Text($xpos, $ypos, $val);
        }
    }

    function SetLegends($data, $format)
    {
        $this->legends=array();
        $this->wLegend=0;
        $this->NbVal=count($data);
    }
}

$pdf = new PDF_Diag();
$pdf->AddPage();

$data[0] = array(470, 490, 90);
$data[1] = array(450, 530, 110);
$data[2] = array(420, 580, 100);

// Column chart
$pdf->SetFont('Arial', 'BIU', 12);
$pdf->Cell(210, 5, 'Chart Title', 0, 1, 'C');
$pdf->Ln(8);
$valX = $pdf->GetX();
$valY = $pdf->GetY();
$pdf->ColumnChart(110, 100, $data, null, array(255,175,100));
//$pdf->SetXY($valX, $valY);

$pdf->Output();

?> 
```

# c# - p4 在 C# Perforce Wrapper 或 P4 API 中打开 -a

> ID：13925283
> 
> 赞同：0
> 
> 时间：2012-12-18T02:06:51.457
> 
> 标签：c#, api, wrapper, perforce

我发现这个帖子很有帮助，我想问问 Ian Norton 关于他的包装。 [这是IanNorton](https://stackoverflow.com/questions/9146677/net-wrapper-for-perforce-api/13925232#13925232)发布的我正在尝试的包装器的链接。我不确定这是否是正确的提问地点，而且当涉及到他的回复时，我也不想创建一个新线程。因此，我将继续前进，忍受任何可能出现的反弹。

我目前正在尝试使用您的包装器，但当我运行它时，我似乎无法让它触发任何东西。我不想使用选项，因为我只想将其设置为在计时器上运行的 .exe。很简单，我想使用 p4 打开 -a cmd 并将输出输出打印到文件中。这就对了。这个 NooB 将不胜感激任何帮助。

非常感谢你！

这是我仅使用命令行所得到的。不幸的是，我无法将我的信息输出到文本文件。

```
using System;
using System.Diagnostics;
using System.IO;

namespace P4OpenCMD
{
    class P4Opened
    {
        // Main begins program execution.
        static void Main(string[] args)
        {
            string temp = string.Empty;

            if (temp != string.Empty)
            {
                Process p = new Process();
                ProcessStartInfo info = new ProcessStartInfo();
                info.FileName = "cmd.exe";
                info.RedirectStandardInput = true;
                info.UseShellExecute = false;

                p.StartInfo = info;
                p.Start();

                StreamWriter sw = p.StandardInput;

                using (sw = p.StandardInput)
                {
                    if (sw.BaseStream.CanWrite)
                    {
                        sw.WriteLine("set P4PORT=####");
                        sw.WriteLine("set P4USER=####");
                        sw.WriteLine("set P4CLIENT=####");
                        sw.WriteLine("set P4PASSWD=####");
                        sw.WriteLine("p4 opened -a //Depot/...");
                        sw.WriteLine("pause;");
                    }
                    Console.WriteLine();
                }
                sw.Close();
                p.WaitForExit();
                p.Close();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T02:15:09.037

如果你这样做，你应该处于良好状态：

```
info.FileName = "cmd.exe";
info.Arguments = "/c p4 opened > opened.txt"; 
```

# css - 水平滚动条

> ID：13925284
> 
> 赞同：5
> 
> 时间：2012-12-18T02:06:54.190
> 
> 标签：css, html, scrollbar

如果内容在其边界溢出，如何在我的页面中制作自动水平滚动条。

```
<html>
     <body>
        <div style ="width: 20px; height:30px; border:1px solid black; overflow:auto">
            <!-- various of text here that can makes it go out the border-->
        </div>  
     </body>
</html> 
```

如果我的内容中的文字太长，如何制作自动水平滚动条？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-18T02:09:43.910

插入 div 样式：

```
overflow-x:scroll; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-18T06:15:18.827

将您的代码更改为：

```
 <html>
 <body>
    <div style ="width: 20px; height:30px; border:1px solid black; overflow-x:scroll">
        <!-- various of text here that can makes it go out the border-->
    </div>  
 </body>
 </html> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-18T02:13:11.260

```
overflow: auto;
white-space: nowrap; 
```

[http://jsfiddle.net/GCPDE/](http://jsfiddle.net/GCPDE/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T02:09:55.577

将您的样式更改为：

```
style="width: 20px; height:30px; border:1px solid black; overflow:auto;" 
```

只是语法不正确的情况。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-25T08:48:31.293

注意：为了使文本可以水平滚动，您必须添加 ***overflow-x:scroll; 溢出-y：隐藏；空白：nowrap；*** 到你的 div。

```
<html>
     <body>
        <div style ="width:20px; height:30px; border:1px solid black; overflow-x:scroll; overflow-y:hidden; white-space:nowrap;">
            <!-- various of text here that can makes it go out the border-->
        </div>  
     </body>
</html>
```

# c# - 选定的 DropDownList 值未发送到 ASP.NET MVC 控制器

> ID：13925290
> 
> 赞同：0
> 
> 时间：2012-12-18T02:07:32.050
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4

我正在尝试将 DropDownList 的选定值传递给新的控制器方法。但是，在控制器中，`leagueKey`总是返回 null。下拉列表中填充了值。

如果我更改`new { leagueKey = Model.SelectedLeagueKey}`为`new {leagueKey = "test"}`控制器正确接收“测试”值。看来 DropDownList 没有将所选值绑定到`Model.SelectedLeagueKey`.

## 模型

```
public Dictionary<string, string> Leagues { get; set; }
public string SelectedLeagueKey { get; set; } 
```

## 看法

```
<div class="edit-field">
    @Html.DropDownListFor(model => model.SelectedLeagueKey, new SelectList(Model.Leagues, "Key", "Value", Model.SelectedLeagueKey),"Select League")
</div>
    @Html.ActionLink("Select League", "AddTeam", "Team", new { leagueKey =  Model.SelectedLeagueKey}, null) 
```

## 控制器

```
public ActionResult AddTeam(LTEDContext context, string leagueKey)
    {
        //Do something with leagueKey here
        return View();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T02:31:10.247

您的视图根据以下方式向您发送 SelectedLeagueKey 参数

```
<div class="edit-field">
   @Html.DropDownListFor(model => model.SelectedLeagueKey, new SelectList(Model.Leagues, "Key", "Value", Model.SelectedLeagueKey),"Select League")
</div> 
```

尝试在视图中使用下一个代码：

```
@using (Html.BeginForm("AddTeam", "Team")) {    
<div class="edit-field">
   @Html.DropDownListFor(model => model.SelectedLeagueKey, new SelectList(Model.Leagues, "Key", "Value", Model.SelectedLeagueKey),"Select League")
</div>
<submit type="submit"/> 
```

}

和控制器中的下一个：

```
public ActionResult AddTeam(LTEDContext context, string SelectedLeagueKey)
{
    //Do something with leagueKey here
    return View();
} 
```

# java - iPhone 或 iPad 上的 Java

> ID：13925296
> 
> 赞同：-1
> 
> 时间：2012-12-18T02:08:28.900
> 
> 标签：java, iphone, ipad, jsp, applet

他们说 iPhone 或 iPad 不支持 Java。这是否意味着以 JSP 作为其服务器端脚本语言的网站将无法在这些设备上正常运行？或者他们只是想说......让我们说Java小程序？那里没有太多关于它的信息。我什至不确定这些设备是否仍然不支持 Java。我发现的最新官方公告可以追溯到几年前。

* * *

我问这个问题是多么愚蠢。当然，由于它是服务器端的，它并不关心 iPhone 中是否存在 Java VM。嗬！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T02:10:29.133

Java 小程序在浏览器中运行，在 iOS 上不受支持。JSP 页面在服务器上运行并生成与 iOS 完美兼容的 HTML。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T02:12:30.660

在 iPad 上根本不需要 Java 就能看到 JSP 文件生成的内容。

JSP 文件在服务器上执行，并生成（通常）可以在 iPad 上看到的 HTML 内容。此外，JavaScript 在 iPad 上运行良好，Java 和 JavaScript 之间完全没有关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T02:11:22.800

JSP 是一种服务器端语言，因此客户端实际上从未见过它。这将起作用。

Java 小程序是由客户端运行的东西，它们不能在 iOS 设备上运行。

# android - 移动 HTML5 开发：Backbone.js + Zepto vs. Sencha

> ID：13925297
> 
> 赞同：1
> 
> 时间：2012-12-18T02:08:36.700
> 
> 标签：android, ios, html, backbone.js, zepto

我即将开始开发我的第一个移动 HTML5 应用程序。它不是像游戏那样具有图形挑战性的应用程序，而是与 REST 服务器交互的典型移动应用程序。

我已经知道 Backbone，并且 zepto 与 jQuery 几乎相同，所以我正在考虑使用这种组合（并将其与 Phonegap 打包）。但后来我从 Sencha [https://plus.google.com/+Scobleizer/posts/ZtnZNrCfWv6](https://plus.google.com/+Scobleizer/posts/ZtnZNrCfWv6)看到了这段视频，我现在很惊讶。

我曾经认为我必须为 Sencha 许可证付费，但正如视频所说，许可证是免费的（虽然我不知道如果一切都是免费的，他们是如何赚钱的）。此外，它们还具有技术上具有挑战性的浏览模块的所有实现，例如轮播和无限滚动。

虽然我一直在使用 Backbone，但我从来没有做过移动版本（我从来没有真正担心过重复使用单元格等），所以我想知道如果我想使用这部分有多难骨干+zepto 选项。我可以想象自己实现细胞回收，并对它的优化程度感到不满。但话又说回来，这可能比我想象的要容易。我不知道它是什么样的。

那么，请您分享您使用 Backbone + zepto 的经验吗？还有使用任一选项与其他选项的优缺点。谢谢！

# c# - C# 向量、角度和旋转

> ID：13925306
> 
> 赞同：1
> 
> 时间：2012-12-18T02:10:30.163
> 
> 标签：c#, vector, rotation, 2d

我有一艘宇宙飞船，它有一个位置、目的地和一个旋转。当它有一个新的目的地时，它会一直向前移动，同时顺时针旋转，直到它面对它的目的地。

代码：

```
public void Move()
{
    Vector requiredDirection = destination - origin;
    requiredDirection.Normalize();
    Vector directionNow = new Vector((float)Math.Cos(rotation), (float)Math.Sin(rotation));

    float x = Math.Abs(requiredDirection.X - directionNow.X);
    float y = Math.Abs(requiredDirection.Y - directionNow.Y);

    if ((x > rotationSpeed) || (y > rotationSpeed))
    {
        rotation += rotationSpeed;
    }

    shipPosition += directionNow * speed;
} 
```

我的问题是船只会向**一个**方向旋转，直到它面对它的目标，我需要它向最短路线的方向旋转。

我真的不知道从哪里开始，这是我第一次真正尝试 Vectors。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T02:35:01.427

`directionNow`从到的角度由`requiredDirection`给出`Math.Atan2(requiredDirection.Y,requiredDirection.X) - Math.Atan2(directionNow.Y,directionNow.X)`。逆时针旋转为正，顺时针旋转为负。

# c# - 删除 Ftp 服务器上的文件？

> ID：13925307
> 
> 赞同：-1
> 
> 时间：2012-12-18T02:10:45.903
> 
> 标签：c#, winforms, ftp

我正在尝试从我的 FTP 网站上删除一个文件，但我似乎无法让代码正常工作，任何人都可以帮忙吗？，我没有收到任何错误，它只是没有做任何事情。

```
private FtpWebRequest deleteRequest(string uri, string method)
{
    var r = (FtpWebRequest)WebRequest.Create(uri);
    string Delete = WebRequestMethods.Ftp.DeleteFile;

    r.Credentials = new NetworkCredential(TxtUsername.Text, TxtPassword.Text);
    r.Method = Delete = listView1.SelectedItems.ToString();
    return r;
} 
```

其余的代码。

```
 private void openToolStripMenuItem_Click(object sender, EventArgs e)
    {
        textBox1.Text = TxtServer.Text + listView1.SelectedItems.ToString();
        deleteRequest(textBox1.Text, WebRequestMethods.Ftp.DeleteFile);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T02:14:05.863

你必须打电话`r.GetResponse()`。你真的不需要从你的方法返回你的请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T02:14:50.823

您正在使用 ListView 中选择的任何内容覆盖“DELETE”方法。

* * *

以下行：

```
r.Method = Delete = listView1.SelectedItems.ToString(); 
```

与这两个相同：

```
Delete = listView1.SelectedItems.ToString();
r.Method = Delete; 
```

因此，`Delete`首先获取您 中任何内容的值`SelectedItems`，然后将该值用作`Method`. 这可能不是你的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T21:54:25.347

这是我最终使用的代码，谢谢大家的帮助，非常感谢。

```
private void deleteToolStripMenuItem_Click(object sender, EventArgs e)
    {
        ResultLabel.Text = "Deleting: " + listView1.SelectedItems[0].Text;
        ResultLabel.Show();
        this.Refresh();
        textBox1.Text = TxtServer.Text + listView1.SelectedItems[0].Text;
        FtpWebRequest request = (FtpWebRequest)WebRequest.Create(textBox1.Text);
        request.Method = WebRequestMethods.Ftp.DeleteFile;

        request.Credentials = new NetworkCredential(TxtUsername.Text, TxtPassword.Text);
        FtpWebResponse response = (FtpWebResponse)request.GetResponse();
        ResultLabel.Text = "Deleted: " + listView1.SelectedItems[0].Text;
        response.Close();
    } 
```

我只是完全重写了代码并再次尝试，它成功了。

# database - 升级到 WordPress 3.5 删除所有帖子和页面，擦除数据库

> ID：13925312
> 
> 赞同：0
> 
> 时间：2012-12-18T02:11:48.963
> 
> 标签：database, wordpress, posts

所以我已经升级到 WordPress 3.5，这似乎已经删除了所有帖子和自定义帖子类型、媒体图像、滑块等。

我已经使用 pressbackup 和 backupbuddy 进行了备份，但是当我尝试恢复数据库（或所有内容）时。完成后，如果我查看前端，一切都恢复了并且看起来很棒，但是当我转到后端时，它说数据库需要升级并且不允许我绕过它。如果我单击“确定”，它会提示以下消息，然后再次擦除所有内容：

WordPress 数据库错误：[表 'db446353270.wp_categories' 不存在] SELECT * FROM wp_categories ORDER BY cat_ID

WordPress 数据库错误：[表 'db446353270.wp_post2cat' 不存在] SELECT post_id, category_id FROM wp_post2cat GROUP BY post_id, category_id

WordPress 数据库错误：[表 'db446353270.wp_linkcategories' 不存在] SELECT cat_id, cat_name FROM wp_linkcategories

WordPress 数据库错误：['field list' 中的未知列 'link_category'] SELECT link_id, link_category FROM wp_links

请指教。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T04:59:54.653

您*不能*将数据库恢复到 Wordpress 过去版本的备份并同时运行 Wordpress 的未来版本。用不太复杂的话来说，数据库必须配置与前端（即v3.5）相同的版本（即v3.5）。

您可能需要考虑通过 FTP 覆盖文件，将前端降级回升级之前使用的 Wordpress 版本。[您可以在此处](http://wordpress.org/download/release-archive/)访问和下载 Wordpress 的旧版本。然后，尝试使用管理员仪表板中的升级实用程序升级到最新版本的 Wordpress。

如果您再次遇到同样的问题，这意味着您安装的一个或多个插件或主题与最新版本的 Wordpress 不兼容。您将不得不再次降级并等到主题/插件作者发布更新版本或完全禁用冲突的主题/插件。

# asp.net - 如何在服务器端设置 WebApi 请求标头

> ID：13925313
> 
> 赞同：1
> 
> 时间：2012-12-18T02:11:49.883
> 
> 标签：asp.net, asp.net-mvc, asp.net-web-api

我正在尝试使用 MVC 根据 HTTP 调用 WebApi 方法。我每次都需要发送一些信息，比如用户 ID 和应用程序版本。如何将此信息添加到标题中？我想作为一个ajax调用来做，而不是像现在这样通过客户端代码）：

```
 'beforeSend: function (req) {
                req.setRequestHeader("Accept", "version=1.00,requestTime=" + new Date());
            }' 
```

但是在服务器端，我不能用字符串设置 RequestHeader 这是我的服务器代码：

```
 HttpClient client = new HttpClient();
 var request = new HttpRequestMessage()
        {
            RequestUri = new Uri("http://localhost/WebAPIDemo/FilterAttribute-MVC"),
            Method = HttpMethod.Get,
        };

        request.Headers.Accept.Add(***);
        //request.Headers.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));
        List<OfficeSupply> os=new List<OfficeSupply>();
        var task = client.SendAsync(request)
            .ContinueWith((taskwithmsg) =>
            {
                var response = taskwithmsg.Result;

                var jsonTask = response.Content.ReadAsAsync<List<OfficeSupply>>();
                jsonTask.Wait();
                var jsonObject = jsonTask.Result;
                os = jsonObject.ToList();
            });
        task.Wait(); 
```

`***`需要是“MediaTypeWithQualityHeaderValue”类型值，但我只想将其设置为自定义，例如 ajax 调用。我该怎么做？

另外，我想更改 Header Authorization 参数，但是这段代码：

```
 'client.DefaultRequestHeaders.Add("Authorization", "12345");' 
```

没有工作，并且

```
 request.Headers.Authorization.Parameter 
```

告诉我它是只读的。

发送前如何在服务器端设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T02:36:12.130

您可以通过执行以下操作来指定自定义身份验证方案，

```
httpClient.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("scheme","whatever parameters"); 
```

您可以使用如下代码设置完全自定义的标头：

```
request.Headers.TryAddWithoutValidation("foo", new List<string>() {"sdadads"}); 
```

但请注意，您上面显示的接受标头示例完全无效。关于如何格式化接受标头的内容有非常精确的规则，并且您的示例无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T04:41:19.167

我曾经按照以下方法设置请求标头。如果对您有用，请尝试一下。

[脚本]

```
 $("#Grid1").ajaxSuccess(function (evt, request, settings) {
    $('.Status').html(request.getResponseHeader("Status"));
  }); 
```

[看法]

```
 <h2>Status:</h2><h2 class="Status" style="color:Red;"> 
```

[控制器]

```
 [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Save(Order orders)
    {
        string status = string.Empty;

        if (orders != null)
        {
            OrderRepository.Update(orders);
            status = "Updated";
        }

        Response.AddHeader("Status", status);            
        return data.GridActions<EditableOrder>();
    } 
```

![响应头](../Images/69ee9ee885b456c01712b12020f35166.png)

# eclipse - 在项目中包含 Hadoop 类的正确方法是什么

> ID：13925316
> 
> 赞同：1
> 
> 时间：2012-12-18T02:12:14.660
> 
> 标签：eclipse, hadoop, jar

我正在尝试导入一个 Hadoop 类以在我的项目中使用。

```
import org.apache.hadoop.fs.*; 
```

我通常希望走出去尝试找到要包含的 Hadoop JAR 文件，将其放在 Eclipse 中的 libs 文件夹中，然后使用这些类。完成之后并没有找到我所期望的，我问：在我自己的 Java 类中包含 Hadoop 类以便我可以在 Eclipse 中使用它们的正确方法是什么？

我发现 Hadoop 文档令人沮丧，因为它的保质期非常短。六个月前的建议显然毫无价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T02:38:07.570

使用 maven 和 m2e 插件，hadoop 项目非常简单：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>csw.hadoop</groupId>
    <artifactId>hadoop-sandbox</artifactId>
    <version>0.0.1-SNAPSHOT</version>

    <dependencies>
      <dependency>
        <groupId>org.apache.hadoop</groupId>
        <artifactId>hadoop-core</artifactId>
        <version>1.1.1</version>
        <scope>provided</scope>
      </dependency>
    </dependencies>
</project> 
```

maven 将为您处理下载 jar 和依赖项，Eclipse maven 插件将为您管理构建路径。

我确定也有一个 Eclipse ivy 插件，它会对 Ant 做同样的事情

# android - 无法解决 R ActionBarSherlock

> ID：13925321
> 
> 赞同：0
> 
> 时间：2012-12-18T02:12:56.437
> 
> 标签：android, android-fragments, android-actionbar, actionbarsherlock

我已经尝试了几个小时来弄清楚为什么会出现这个错误

R 无法解析为变量

我正在使用最新版本的 ABS (4.2)，我已将其作为项目添加到 eclipse 中。然后我将该项目作为库添加到我的项目中。两个清单都有：

```
<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="17" /> 
```

这是引发错误的行：

```
 String label1 = getResources().getString(R.string.label1); 
```

我已经尝试清理所有项目，并重新启动 eclipse，但没有任何效果。我的活动是一个 SherlockActivity。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:45:01.277

如果问题出在所有 R 上，则必须从 ActionBarSherlock 中删除库中的 java-support library4，然后清理项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T02:46:55.210

不确定根本原因，但在我的应用程序包名称下包含 R.java 解决了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-20T20:06:11.797

就我而言，我删除了 java 支持 library4，但没有工作。所以我做了一个 Maven - 更新项目，它完成了。

# c++ - Visual Studio 2012 不允许我创建新项目：怎么办？

> ID：13925325
> 
> 赞同：0
> 
> 时间：2012-12-18T02:13:39.070
> 
> 标签：c++, visual-studio-2012

我刚刚安装了 Visual Studio 2012。不幸的是，“新建项目”窗口的项目类型列表为空，我无法正确填写此窗口以启用“确定”按钮。

因此，我无法在全新安装的 VS 2012 中创建新项目。

（我想创建一个本机 C++ 应用程序 - 一个控制台应用程序就可以了，开始。）

这是 VS 2012 中“新建项目”窗口的屏幕截图。

![全新安装 VS 2012 中的新项目窗口](../Images/a5af89514c792078b6fb1a7173ea6cff.png)

我应该怎么办？

（我正在运行 Windows 7 64 位。）

# cuda - 如何将静态数据划分为多个 GPU？

> ID：13925327
> 
> 赞同：3
> 
> 时间：2012-12-18T02:13:41.853
> 
> 标签：cuda, pthreads, gpu

我想对一个大型数据集进行分区并在多个 GPU 上拆分工作。我想让这些数据静态化，这样我就不必在第二次运行时加载到 GPU。现在的问题是，pthread_create 要求将所有输入数据组装成一个“结构”，我不确定将一堆静态数据组装成一个结构是否可行。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:33:44.910

在“现代”CUDA 多 GPU 中，不再需要使用不同的主机线程来保存给定设备上的上下文。从 CUDA 4.0 开始，API 是线程安全的，一个主机线程可以简单地使用`cudaSetDevice`.

在 CUDA 4.x 或 CUDA 5 中，如何在多个 GPU 上分发大型数据集的一个非常非常基本的示例可能很简单：

```
int remainder = N;
int* plens = new int[ngpus];
float** pvals = new float*[ngpus];
float* source = &host_array[0];
for(int i=0; i<ngpus; i++) {
    const int blen = N/gpus;
    plens[i] = blen;
    remainder -= blen;
    if (remainder < blen) {
        plens[i] += remaninder;
        remainder = 0;
    }
    size_t sz = sizeof(float) * size_t(plens[i]);
    cudaSetDevice(i);
    cudaMalloc((void **)&pvals[i], sz);
    cudaMemcpy(pvals[i], source, sz, cudaMemcpyHostToDevice);
    source += plens[i];
} 
```

*[免责声明：用浏览器编写，从未编译或测试，使用风险自负]*

`host_array`假设 GPU 从 [0,ngpus-1] 开始按顺序编号，并且源数据保存在长度为的浮点数组中`N`。你会得到一个设备指针数组`pvals`和每个数组的长度`plens`。请注意，每个指针仅在分配它的上下文中有效，因此请确保在将指针用于内核启动或 API 调用之前选择设备。

# java - 如何在 Java 中创建同时支持大写和小写 E 作为指数分隔符的 NumberFormat？

> ID：13925334
> 
> 赞同：6
> 
> 时间：2012-12-18T02:14:14.577
> 
> 标签：java, number-formatting

我有以下代码：

```
NumberFormat numberInstance = NumberFormat.getNumberInstance();
System.out.println(numberInstance.parse("6.543E-4"));
System.out.println(numberInstance.parse("6.543e-4")); 
```

产生以下输出：

```
6.543E-4
6.543 
```

有没有办法调整 NumberFormat 以将大写和小写 E 识别为指数分隔符？有没有最好的解决方法？有什么比首先在输入上运行 toUpper() 更好的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T02:21:52.870

答案是“不”，不是直接的。

尽管`toUpperCase()`直接在输入上使用是为了保证一致性而产生的少量编码开销，但有以下解决方法：

```
NumberFormat numberInstance = new NumberFormat() {
    @Override
    public Number parse(String str) {
        return super.parse(str.toUpperCase());
    }
}; 
```

这是一个匿名类，它重写`parse()`方法以使其实现不区分大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T06:07:44.537

至少 Double.parseDouble 两者都接受

```
 System.out.println(Double.parseDouble("6.543e-4"));
    System.out.println(Double.parseDouble("6.543E-4")); 
```

输出

```
6.543E-4
6.543E-4 
```

至于 NumberFormat 我们可以将 E 更改为 e 为

```
 DecimalFormat nf = (DecimalFormat)NumberFormat.getNumberInstance();
    DecimalFormatSymbols s = new DecimalFormatSymbols();
    s.setExponentSeparator("e");
    nf.setDecimalFormatSymbols(s);
    System.out.println(nf.parse("6,543e-4")); 
```

输出

```
6.543E-4 
```

但现在它不接受 E :(

# linux - 查找 Grep Sed - 对 UTMP WTMP 和 BTMP 有没有损坏？

> ID：13925336
> 
> 赞同：0
> 
> 时间：2012-12-18T02:14:21.683
> 
> 标签：linux

运行字符串搜索/替换搜索并考虑到这些文件中可能包含一些字符串，sed 是否会因为二进制类型结构而忽略它们，或者它们会破坏函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T03:43:54.527

This is really a "try it and see what happens" sort of question, so...

*   Start with a copy of the `wtmp` file.

    ```
    $ cp /var/log/wtmp wtmp.work 
    ```

*   Look at it using `who`:

    ```
    $ who wtmp.work
    lars     pts/2        2012-10-23 10:58 (:0)
    lars     pts/2        2012-10-23 11:01 (:0)
    lars     pts/2        2012-10-23 11:11 (:0)
    lars     pts/2        2012-10-23 11:43 (:0)
    lars     pts/2        2012-10-23 12:41 (:0)
    lars     pts/2        2012-10-23 12:41 (:0) 
    ```

*   Let's try placing "lars" with "superman":

    ```
    $ sed -i s/lars/superman/ wtmp.work 
    ```

*   And see what happened:

    ```
    $ who wtmp.work
    superman pts/7        1969-12-31 19:00 
    ```

Oops.

Hopefully that answers your question!

# html - PHP - DOM，从 html 中剥离表

> ID：13925344
> 
> 赞同：2
> 
> 时间：2012-12-18T02:15:12.430
> 
> 标签：html, dom, strip, php

我有一个这样结束的 curl 脚本：

```
 $data = curl_exec($ch);

  curl_close($ch);

  return $data;

} 
```

$data 字符串是一个 HTML 页面，上面有一个我想剥离的表格，以便我可以将数据存储到 MYSQL 数据库中，我尝试使用带有以下命令的 DOM：

```
 // new dom object
  $dom = new DOMDocument();

  //load the html
  $html = str_get_html($returned_content2);
   $dom->strictErrorChecking = false;

  //discard white space 
  $dom->preserveWhiteSpace = false; 

  //the table by its tag name
  $tables = $dom->getElementsByTagName('table'); 

  //get all rows from the table
  $rows = $tables->item(0)->getElementsByTagName('tr'); 

  // loop over the table rows
  foreach ($rows as $row) 
  { 
   // get each column by tag name
      $cols = $row->getElementsByTagName('td'); 
   // echo the values  
      echo $cols->item(0)->nodeValue.'<br />'; 
      echo $cols->item(1)->nodeValue.'<br />'; 
      echo $cols->item(2)->nodeValue;
    } 
} 
```

但不断收到错误：

> 致命错误：在第 178 行的 /home/sdsd/dfdsfsdfds/sdfsdfs/table.php 中的非对象上调用成员函数 getElementsByTagName()

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T02:22:18.733

您根本没有将 HTML 加载到您`DOMDocument`的中。删除此行

> $html = str_get_html($returned_content2);

并将其放在您的`preserveWhiteSpace`行之后

```
$dom->loadHTML($returned_content2); 
```

在尝试获取表行之前，您应该确保至少找到一个表，例如

```
$tables = $dom->getElementsByTagName('table');
if ($tables->length == 0) {
    throw new Exception('No tables found');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T02:23:51.887

这是相当微不足道的：

```
//get all rows from the table
$rows = $tables->item(0)->getElementsByTagName('tr'); 
                 ^^^^^^^ 
```

当文档没有表格时（例如，一个空文档，因为您没有将任何内容加载到其中），`->item(0)`则返回`NULL`. 该值`NULL`没有该`getElementsByTagName`方法（它甚至不是对象），因此您会看到错误消息。

每当您做一些重要的事情（或遇到错误）时，请进行必要的前置条件检查。例如：

```
$tables = $dom->getElementsByTagName('table');
if (!$tables->length) {
    throw new UnexpectedValueException('Table expected but not found.');
} 
```

# python - 如何在 PyGTK 中使按钮不可见但处于活动状态？

> ID：13925348
> 
> 赞同：1
> 
> 时间：2012-12-18T02:16:16.217
> 
> 标签：python, button, pygtk

据我所知，`hide()`两者`set_visible(False)`都使按钮不可见和不活动。任何解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:30:05.290

有一个“解决方法”，那就是改变实施策略。可点击图形的想法似乎是合理的，但我不建议混合使用自定义 2D 绘图和小部件。

*   如果它符合您的需要，您可以拆分一个人的图形并将特定部分（如头部图像）放在按钮上。看看[`gtk_button_set_image`](http://developer.gnome.org/gtk3/3.2/GtkButton.html#gtk-button-set-image)它的 Python 等价物。

*   另一种可能性是将点击事件绑定到图像并查询点击的 x/y 坐标。最简单的数学运算，只需遍历与图像关联的形状列表并确定匹配形状列表（例如（50/100）在左上角为（30/80）且宽度和高度为 40 的矩形内，这一定是胃区）。

# django - 在 Django Mezzanine 中，如何强制限制哪些自定义页面可以添加到页面树的不同位置？

> ID：13925351
> 
> 赞同：2
> 
> 时间：2012-12-18T02:16:46.720
> 
> 标签：django, admin, mezzanine, custom-pages

我正在使用 Django Mezzanine 创建站点。我添加了一些我希望能够使用 Pages 管理树添加的自定义内容类型。这是我正在做的事情的要点：

```
class top_level_nav1(Page): #should only be a top level parent
    stuff
class second_level_nav1(Page): #should only be nested under top_level_nav1
    stuff 
class top_level_nav2(Page): #should only be a top level parent
    stuff
class second_level_nav2(Page): #should only be nested under top_level_nav2
    stuff 
```

有没有办法在管理树“添加”列表中强制执行这些规则（即添加下拉列表`top_level_nav1`不包含任何不应该放在它下面`top_level_nav`的 s 或s）？`second_level_nav`

“添加”列表中的选项数量越来越多，我不希望我的用户需要自己记住结构。

另外，请告诉我是否有更好的方法来完成我所展示的内容。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T03:01:49.343

这样做的唯一方法是覆盖管理菜单模板并构建您自己的模板标签来执行检查。

# regex - Oracle 11g Regular expression Multiple Instances of Pattern

> ID：13925354
> 
> 赞同：1
> 
> 时间：2012-12-18T02:17:11.330
> 
> 标签：regex, oracle

I need to extract the information from '< a href="...">something.jpg< /a>' tags from a large string recursively that could contain multiple instances of the tags. I need to do this using regex on Oracle 11g.

An example of what I am looking for is:

Example String:

The string will always contain at least 1 instance of the < a> tag and there is no maximum to how many it can contain
The href will always a xid-[[:digit:]]
The attributes in the tag can vary

```
<p>text about something important</p><p><a href="@X@EmbeddedFile.requestUrlStub@X@bbcswebdav/xid-1234_1" target="_blank">file.pdf</a> </p><p><a href="@X@EmbeddedFile.requestUrlStub@X@bbcswebdav/xid-1235_1" target="_blank">anotherfile.pptx</a> </p><p><a href="@X@EmbeddedFile.requestUrlStub@X@bbcswebdav/xid-1236_1" target="_blank">yetanotherfile.pdf</a> </p> 
```

Now with that string I want to extract the 3 < a ...>...< /a> blocks using
REGEXP_SUBSTR(< string>, '< pattern>', < start>, < occurrence >) and adjusting the occurrence value to grab the 3 instances.

What I have so far is:

```
SELECT REGEXP_SUBSTR(main_data, ''<a[[:print:]]+href="[[:print:]]+xid-1234_1"[[:print:]]+>[[:print:]]+</a>'', 1, 1)
      FROM table 
```

and the results I get from that are

```
<a href="@X@EmbeddedFile.requestUrlStub@X@bbcswebdav/xid-1234_1" target="_blank">file.pdf</a> </p><p><a href="@X@EmbeddedFile.requestUrlStub@X@bbcswebdav/xid-1235_1" target="_blank">anotherfile.pptx</a> </p><p><a href="@X@EmbeddedFile.requestUrlStub@X@bbcswebdav/xid-1236_1" target="_blank">yetanotherfile.pdf</a> 
```

So it is starting with the first < a and then grabbing all the way to the last < /a>. When I need it to stop at the first instance of < /a>. Then when I increment the occurrence to 2 it should grab the second set of < a>< /a> tags. However currently setting the occurrence to 2 nothing is returned.

Any help will be appreciated. Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T03:45:50.613

Have you considered using Oracle's various XML facilities instead?

For example, place the text into a CLOB and then use xmltype() and extract() to get the elements out using an XPath query ([see for example this question](https://stackoverflow.com/questions/4884421/oracle-10g-extract-data-select-from-xml-clob-type)).

Generally, trying to extracted nested data structures using regexes leads to unhappiness.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:23:32.617

Yes, the non-greedy operator `?` is the solution:

```
SELECT REGEXP_SUBSTR(x,'<a href="(.*?)".*?>(.*?)</a>',1, 3, 'i', 0)
  FROM (SELECT '<p>text about something important</p><p><a href="@X@EmbeddedFile.requestUrlStub@X@bbcswebdav/xid-1234_1" target="_blank">file.pdf</a> </p><p><a href="@X@EmbeddedFile.requestUrlStub@X@bbcswebdav/xid-1235_1" target="_blank">anotherfile.pptx</a> </p><p><a href="@X@EmbeddedFile.requestUrlStub@X@bbcswebdav/xid-1236_1" target="_blank">yetanotherfile.pdf</a> </p>' as x FROM DUAL); 
```

returns

```
<a href="@X@EmbeddedFile.requestUrlStub@X@bbcswebdav/xid-1236_1" target="_blank">yetanotherfile.pdf</a> 
```

or the other tags if you change the `3` to 1 or 2\.

If you replace the last `0` with `1`, you get the contents of the href:

```
@X@EmbeddedFile.requestUrlStub@X@bbcswebdav/xid-1236_1 
```

If you replace it with `2`, you get

```
yetanotherfile.pdf 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T04:17:57.383

正如@Jacques Chester 所指出的，如果您可以使用 XML 支持，那么痛苦就会减少。

如果不能，请尝试将 更改`+`为`+?`以执行非贪婪匹配。

`+?`限定符是[Oracle 正则表达式中受 Perl 影响的扩展的](http://docs.oracle.com/cd/E14072_01/server.112/e10592/ap_posix003.htm)一部分

# android - cannot get rid of error "/usr/bin/ld: cannot find -lncurses"

> ID：13925355
> 
> 赞同：7
> 
> 时间：2012-12-18T02:17:12.387
> 
> 标签：android, python-2.7, ubuntu-12.04

I wanted to run the command:

`repo init -u https://android.googlesource.com/platform/manifest -b android-4.1.1_r6`

and got the following output:

`Traceback (most recent call last): File "/home/anu/bin/repo", line 91, in <module> import readline ImportError: No module named readline`

So to fix the above, I tried to install readline using commands `pip install readline` and `easy_install readline`, but both the commands outputs the following:

```
/usr/bin/ld: cannot find -lncurses

collect2: ld returned 1 exit status

error: command 'gcc' failed with exit status 1 
```

I have ubuntu 12.04 with python 2.7.3 and want to build android source code.

I searched a lot to fix it but no success... Can anybody point to me what I am missing?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-22T09:09:39.897

```
sudo apt-get install libncurses5-dev 
```

然后重新运行你的命令

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T20:49:11.867

我通过安装 python 2.7 解决了上述问题。猜猜 repo 与以前版本的 python 而不是当前版本 2.7.3 一起工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T02:31:24.560

如果您运行的是 64 位操作系统，则可能必须安装 i386 版本的库。很多（全部？）Android 主机命令都是 32 位的。

# visual-studio - VSTOR40 引导程序包丢失

> ID：13925356
> 
> 赞同：1
> 
> 时间：2012-12-18T02:17:35.543
> 
> 标签：visual-studio, visual-studio-2012, vsto, prerequisites

我正在使用**Visual Studio 2012**部署**Outlook 加载项**，但由于某种原因，我无法**将 Office System 4.0 运行时的 Visual Studio 工具**指定为加载项的先决条件。

当我检查我的`C:\Program Files\Microsoft SDKs\Windows\v8.0A\Bootstrapper\Packages`文件夹时，我发现它根本没有条目。我还检查了所有其他试图找到它的 Microsoft SDK 文件夹。

如果我能在网上找到任何地方下载它就可以了。

我唯一的选择是完全重新安装 Visual Studio 并希望它出现吗？

任何帮助将不胜感激，因为我在这方面陷入了死胡同。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-26T18:50:07.903

答案在，

[http://blogs.msdn.com/b/vsto/archive/2012/12/21/creating-a-bootstrapper-package-for-an-office-2013-vsto-add-in-with-visual-studio- 2012.aspx](http://blogs.msdn.com/b/vsto/archive/2012/12/21/creating-a-bootstrapper-package-for-an-office-2013-vsto-add-in-with-visual-studio-2012.aspx)

谢谢大家的建议。

# asp.net - passing an array value to querystring

> ID：13925360
> 
> 赞同：0
> 
> 时间：2012-12-18T02:17:58.843
> 
> 标签：asp.net

This is a bit of a problem that I have. I store some value into an array:

```
 Telco1 = a.Split(";")

    For i = 0 To Telco1.Count - 1
        Telco2 = Telco1(i).Split(".")
        TelcoID.Add(Telco2(0))
        TelcoName.Add(Telco2(1))
    Next 
```

Telco1 and Telco2 is Public Telco1() as String. When the user choose an TelcoID that was stored into the TelcoID array, I want that value sent to another page:

```
Response.Redirect("ReloadValue.aspx?TelcoID=" + TelcoID[0]) 
```

Currently the error said

> Operator + is not defined for string and System.Collection.Arraylist

Then I try to send the value over as a predefined integer like this:

```
Response.Redirect("Product.aspx?TelcoID=" + "2") 
```

At the next page("Product.aspx"),

```
b = Request.QueryString["TelcoID"].ToString() 
```

but the error that I receive states that

> value of type System.Collection.Specialized.NameValueCollection cannot be converted to string

I wanted to used that value that was over to this page to be used to determined the data that I wanted to get from the database to shoe in the dropdown list. May I know how do I rectify this error?

# f# - 是否可以强制记录尊重某些不变量？

> ID：13925361
> 
> 赞同：27
> 
> 时间：2012-12-18T02:18:00.033
> 
> 标签：f#, record, refinement-type

假设我想创建一个代表可接受的最小/最大界限的 Record 类型：

```
type Bounds = { Min: float; Max: float } 
```

有没有办法强制 Min < Max？编写一个 validateBounds 函数很容易，我只是想知道是否有更好的方法来做到这一点。

编辑：我意识到对于这个特定的例子，我可能会暴露两个属性并重新排序参数，所以假设我们正在尝试做

```
type Person = { Name: string } 
```

和 Name 至少需要一个字符。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-18T02:59:26.657

这是另一个基于保护级别的解决方案：

```
module MyModule =
    type Bounds = private { _min: float; _max: float } with
        // define accessors, a bit overhead
        member public this.Min = this._min
        member public this.Max = this._max
        static member public Make(min, max) =
            if min > max then raise (ArgumentException("bad values"))
            {_min=min; _max=max}

    // The following line compiles fine,
    // e.g. within your module you can do "unsafe" initialization
    let myBadBounds = {_min=10.0; _max=5.0}

open MyModule
let b1 = Bounds.Make(10.0, 20.0) // compiles fine
let b1Min = b1.Min
let b2 = Bounds.Make(10.0, 5.0) // throws an exception
// The following line does not compile: the union cases of the type 'Bounds'
// are not accessible from this code location
let b3 = {_min=10.0; _max=20.0}
// The following line takes the "bad" value from the module
let b4 = MyModule.myBadBounds 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-18T02:42:03.307

我认为您最好的选择是静态成员：

```
type Bounds = { Min: float; Max: float }
    with
        static member Create(min: float, max:float) =
            if min >= max then
                invalidArg "min" "min must be less than max"

            {Min=min; Max=max} 
```

并像使用它一样

```
> Bounds.Create(3.1, 2.1);;
System.ArgumentException: min must be less than max
Parameter name: min
   at FSI_0003.Bounds.Create(Double min, Double max) in C:\Users\Stephen\Documents\Visual Studio 2010\Projects\FsOverflow\FsOverflow\Script2.fsx:line 5
   at <StartupCode$FSI_0005>.$FSI_0005.main@()
Stopped due to error
> Bounds.Create(1.1, 2.1);;
val it : Bounds = {Min = 1.1;
                   Max = 2.1;} 
```

但是，正如您所指出的，这种方法的最大缺点是没有什么可以直接阻止构建“无效”记录。如果这是一个主要问题，请考虑使用类类型来保证您的不变量：

```
type Bounds(min:float, max:float) = 
    do
        if min >= max then
            invalidArg "min" "min must be less than max"

    with
        member __.Min = min
        member __.Max = max 
```

为了方便起见，与您从记录中获得的类似的活动模式一起使用（特别是关于模式匹配）：

```
let (|Bounds|) (x:Bounds) =
    (x.Min, x.Max) 
```

全部一起：

```
> let bounds = Bounds(2.3, 1.3);;
System.ArgumentException: min must be less than max
Parameter name: min
   at FSI_0002.Bounds..ctor(Double min, Double max) in C:\Users\Stephen\Documents\Visual Studio 2010\Projects\FsOverflow\FsOverflow\Script2.fsx:line 4
   at <StartupCode$FSI_0003>.$FSI_0003.main@()
Stopped due to error
> let bounds = Bounds(1.3, 2.3);;

val bounds : Bounds

> let isMatch = match bounds with Bounds(1.3, 2.3) -> "yes!" | _ -> "no";;

val isMatch : string = "yes!"

> let isMatch = match bounds with Bounds(0.3, 2.3) -> "yes!" | _ -> "no";;

val isMatch : string = "no" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T02:50:44.543

字符串示例的一个狡猾的解决方案 - 使用 DU

```
type cleverstring = |S of char * string 
```

这将强制字符串至少包含一个字符。然后你可以在你的记录中使用`cleverstring`而不是`string`，尽管你可能想写一些包装函数让它看起来像一个字符串。

# ruby-on-rails - Rails 服务器重启

> ID：13925363
> 
> 赞同：-1
> 
> 时间：2012-12-18T02:18:50.220
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, dreamhost

嗨，我遵循以下教程[http://wiki.dreamhost.com/RVM](http://wiki.dreamhost.com/RVM)。尽管它使用的是 sqllite3，但我还是从 phusion 开始的。我想改用 mysql 数据库，现在当我尝试 rake db:create 时，我收到以下消息

```
Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' 
```

然而，我遇到的问题是我在 Gemfile 中将 gem 更改为 mysql2。我必须安装看起来相似的 database.yml

```
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: domain_dev
  pool: 5
  username: ******
  password: ******
  host: mysql.wyw.mydomain.ca 
```

但我不明白插座在哪里？我也不确定如何重新启动rails。我确实用 ctr+c 停止了乘客，但我不知道它是否真的像在带有 rails s 的本地机器上那样重新启动，只需执行以下乘客启动。

我正在使用梦想主机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T02:38:19.167

也许你忘了指定一个端口。如果没有指定，我不希望连接器使用坚固的插座。我的猜测是这不是您的整个 database.yml 文件，并且那里有一个套接字配置。

```
development:
  adapter: mysql2
  encoding: utf8
  database: domain_dev
  username: xxxx
  password: xxxx
  host: mysql.wyw.mydomain.ca
  port: 3306
  pool: 5
  timeout: 5000 
```

# python - 传递给 pytest 夹具的参数可以作为变量传递吗？

> ID：13925366
> 
> 赞同：10
> 
> 时间：2012-12-18T02:18:52.873
> 
> 标签：python, pytest

我有两个简单的测试设置，我试图将它们组合在一个夹具中，并希望测试功能将“参数”传递给夹具。

这是一个人为的例子，来解释我的问题。假设我有以下 pytest 夹具：

```
@pytest.fixture(scope="module", params=['param1','param2'])
def myFixture(request):
    if request.param == 'param1':
        p = 5
    elif request.param == 'param2':
        p = 10
    return p

# would like to set request.param = ['param1'] for myFixture
def test_madeup(myFixture):
    assert myFixture == 5

# would like to set request.param = ['param2'] for myFixture
def test_madeup2(myFixture):
    assert myFixture == 10 
```

我可以让上面的参数作为`test_madeup`函数的输入传递吗？因此，类似于以下内容：

```
@pytest.fixture(scope="module", params=fixtureParams)
def myFixture(request):
    if request.param == 'param1':
        return 5
    elif request.param == 'param2':
        return 10

def test_madeup(myFixture, ['param1']):
    assert myFixture == 5 
```

当然，上述方法是行不通的。实际情况要复杂一些，但我只想知道是否可以将函数传递`params=['param1','param2']` 给夹具`test_madeup`。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-18T14:13:53.227

如果我正确理解您的问题，您基本上想通过提供一些测试信息来选择参数化夹具的一个实例来执行测试。这是不可能的，尽管我们可能会考虑一种机制。我不确定以下解决方案是否能解决您的整个问题，但这是解决上述具体案例的一种方法：

```
import pytest

@pytest.fixture(scope="module")
def myFixture1():
    return 5

@pytest.fixture(scope="module")
def myFixture2():
    return 2

@pytest.fixture(scope="module", params=["param1", "param2"])
def myFixture(request):
    if request.param == 'param1':
        return request.getfuncargvalue("myFixture1")
    elif request.param == 'param2':
        return request.getfuncargvalue("myFixture2")

def test_1(myFixture1):
    assert myFixture1 == 5

def test_2(myFixture2):
    assert myFixture2 == 2

def test_all(myFixture):
    assert myFixture in (2,5) 
```

这运行了四个测试，因为`test_all`两个夹具都执行了两次。

如果您的灯具设置不是很重，您可能还有一个灯具可以生成一个列表和一个“迭代”参数化的灯具。然后测试可以抓取整个列表并将其索引到其中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T12:39:04.650

不确定这是否是您想要的，但示例案例可以像这样实现：

```
@pytest.mark.parametrize(('param', 'expected'), [('param1', 5), ('param2', 10)])
def test_madeup(param, expected):
    assert param == expected 
```

# iphone - 无法在 iPhone 中切换回视图

> ID：13925368
> 
> 赞同：0
> 
> 时间：2012-12-18T02:19:15.563
> 
> 标签：iphone, objective-c, ios, uiviewcontroller

我在 iPhone 模拟器中切换视图时遇到问题。我编写了一个可以前后切换视图的代码，但是现在当我在模拟器中运行它时，我发现该应用程序只能向前切换视图但我无法切换后面的景色。我无法在我的代码中找出问题所在。如果有人帮助我找出我的代码的问题，将不胜感激。

我的代码是：

SwitchingViewsViewController.h

```
#import <UIKit/UIKit.h>

@interface SwitchingViewsViewController : UIViewController
{

}
-(IBAction)switchback:(id)sender;
@end 
```

SwitchingViewsViewController.m

```
#import "SwitchingViewsViewController.h"
#import "secondview.h"

@interface SwitchingViewsViewController ()

@end

@implementation SwitchingViewsViewController

-(IBAction)switchback:(id)sender
{
    secondview *second = [[secondview alloc] initWithNibName:nil bundle:nil];
    [self presentModalViewController:second animated:YES];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:  (UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } else {
        return YES;
    }
}

@end 
```

第二视图.h

```
#import <UIKit/UIKit.h>

@interface secondview : UIViewController
{

}
-(IBAction)switchview:(id)sender;
@end 
```

secondview.m

```
#import "secondview.h"
#import "SwitchingViewsViewController.h"

@interface secondview ()

@end

@implementation secondview

-(IBAction)switchview:(id)sender
{
    SwitchingViewsViewController *second = [[SwitchingViewsViewController alloc]  initWithNibName:nil bundle:nil];
    [self presentModalViewController:second animated:YES];
}
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
    // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T02:29:53.623

在第二个视图中使用它

```
-(IBAction)switchview:(id)sender
{
[self dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T03:44:30.727

```
@implementation secondview

-(IBAction)switchview:(id)sender
{
    [self dismissModalViewControllerAnimated:YES];
} 
```

# aptana - Aptana 不会在 Elementary 0.2 (Ubuntu 12.04) 上启动

> ID：13925377
> 
> 赞同：0
> 
> 时间：2012-12-18T02:20:01.157
> 
> 标签：aptana, ubuntu-12.04

我正在运行基本 0.2（Ubuntu 12.04，但具有不同的桌面环境），并且我安装了[Aptana Studio](http://www.aptana.com/)，如下所示：

```
sudo unzip /home/connel/Downloads/Aptana_Studio_3_Setup_Linux_x86_64_3.3.0.zip -d /opt
sudo mv /opt/Aptana_Studio_3/ /opt/aptana
sudo chown -R $(whoami):$(whoami) /opt/aptana/
sudo vim /usr/share/applications/aptana.desktop 
```

但无论如何我都无法让它运行。运行以下命令时我没有收到错误代码，但 Aptana 没有打开：

```
cd /opt/aptana/
./AptanaStudio3
sh AptanaStudio3.sh 
```

我已经在我的系统上安装了 JDK，Netbeans 运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:32:32.870

您确定您下载了正确的平台版本吗？我的意思是`32 bit`或`64 bit`。

要查看您下载的版本，请执行以下操作：

```
 file /opt/aptana/AptanaStudio3 
```

然后检查您的安装是否为`32 bit`或`64 bit`，请执行以下操作：

```
 uname -m 
```

如果你得到`i686`是正常的`32 bit installation`如果你得到`i686_64`是`64 bit installation`

例如我得到：

```
 AptanaStudio3: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.4.0, not stripped 
```

# delphi - Delphi 支持 SQLite 清单类型

> ID：13925383
> 
> 赞同：5
> 
> 时间：2012-12-18T02:20:53.807
> 
> 标签：delphi, sqlite, type-conversion, devart

SQLite 有一个有趣的“特性”，可以让您在任何字段中存储任何内容，而不管其数据类型如何。

[http://www.sqlite.org/different.html#typing](http://www.sqlite.org/different.html#typing)

我必须阅读一些由（ab）使用此“功能”创建的外部创建的 SQLite 文件。他们有一个定义为 VARCHAR(30) 的字段，但使用它来存储最多 100 个字符或更多字符的字符串。如果您直接调用 SQLite DLL 来存储您的数据，SQLite 会很高兴地做到这一点而无需进行任何修剪。

我目前正在使用具有 SQLite 支持的 DevArt UniDAC 3.70.0.19 来读取这些文件，但是它非常合理地尊重定义的字段大小，因此创建了一个长度为 30 个字符的 TStringField 对象。我无法访问超过 30 个字符限制的所有字符。

我知道 SQLite 的所有可用 Delphi 解决方案，但是有人可以告诉我其中哪些可以处理这个“功能”吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T06:15:00.467

您可以使用任何直接访问 sqlite 引擎的层来执行此操作，而无需任何 TDataset 层。

例如我们的开源包装[http://blog.synopse.info/post/2011/07/22/SynDBSQLite3%3A-SQLite3-direct-access](http://blog.synopse.info/post/2011/07/22/SynDBSQLite3%3A-SQLite3-direct-access)

事实上，与大多数 SQL 数据库不同，SQLite 不会根据列的声明类型来限制可以插入到列中的数据类型。相反，SQLite 使用动态类型。列的声明类型仅用于确定列的亲和性。无需 Db.pas 层的直接访问允许使用此独特功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T21:03:47.913

您的解决方案可以放在 sqlite 本身。默认情况下，模式是不可写的（您不能更新 sqlite_master 表），但具有理智的知识和**PRAGMA writable_schema=ON; 的一点帮助；**你可以这样做。所以有些改动是安全的，比如把VARCHAR(N)改成VARCHAR(M)，sqlite不关心括号里的数字。

第 1 步，您的架构限制为 30 个字符

```
CREATE TABLE [TestTable] (
[Id] INTEGER PRIMARY KEY AUTOINCREMENT,
[Txt] VARCHAR(30)
) 
```

下面的行允许 sqlite_table 更改

```
PRAGMA writable_schema=ON; 
```

以下语句会将限制更改为 100

```
Update sqlite_master set sql='CREATE TABLE [TestTable] (
[Id] INTEGER PRIMARY KEY AUTOINCREMENT,
[Txt] VARCHAR(100)
)' where tbl_name='TestTable' and type='table' 
```

但是**你应该知道你在做什么，**因为有些更改是不受欢迎的，因为 sqlite 需要一些基于模式中信息的存储格式。varchar 到 varchar 的转换不会改变存储格式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:58:44.263

因为我想要一个非常薄的 sqlite3.dll 包装器，所以我编写了自己的，主要基于 OleVariants：

[https://github.com/stijnsanders/TSQLite](https://github.com/stijnsanders/TSQLite)

它还应该像您描述的那样“忽略”列类型，因为除了查询结果提供的内容之外，我没有添加其他类型检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-06T15:04:37.527

需要将输出类型更改为`TEXT`，使用`CAST`

```
SELECT cast(column as TEXT) FROM `tablename` 
```

# c# - list all #region in the file

> ID：13925386
> 
> 赞同：4
> 
> 时间：2012-12-18T02:21:16.237
> 
> 标签：c#, visual-studio-2012

I like the regions feature in Visual Studio.

However,　I wonder is there a UI to list all #region/#endregion blocks so that users can easily navigate between them?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T03:45:40.660

I just learned that Visual Assist X provides such region listing function in the form of navigation bar.

I need some time to try it out though.

![region list](../Images/dca61144807c51fb456ad3a78c5ca6d2.png)

# php - &object(__PHP_Incomplete_Class)#1

> ID：13925387
> 
> 赞同：0
> 
> 时间：2012-12-18T02:21:22.337
> 
> 标签：php

我试图在会话中存储一个整数值，如下所示：

```
if(!isset($_SESSION['images'])){

   if(!isset($_SESSION['user_id'])){
         $_SESSION['images'] = array();
         array_push($_SESSION['images'], (int)$newFilename );
   }
 } else {
        if(!isset($_SESSION['user_id'])){
             array_push($_SESSION['images'], (int)$newFilename);
             file_put_contents("upload.txt", (int)$newFilename);
        }
   } 
```

但相同的代码适用于我的本地主机（php 5.3.13），但不适用于使用 php 5.2.17 的主机（这是我在这里看到的唯一区别）。我知道在 $_SESSION 中存储对象存在一些问题，但我试图在其中存储一个像这样的一维数组：

```
$newFilename = $images->getLastFileId();
//$newFilename == array['200','201', '202'...n]; 
```

当 $_SESSION['images'] 有一个元素时，一切正常，但如果有 >1 个元素，我有一个错误`&object(__PHP_Incomplete_Class)#1`，并`var_dump($_SESSION)`表明我有一个对象（看起来像 php 试图存储在`$newFilename`一个对象中`$images`）：

```
array(1) { ["images"]=> &object(__PHP_Incomplete_Class)#1 (9) {     ["__PHP_Incomplete_Class_Name"]=> string(15) "ImageCollection" ["imgSize"]=> 
 string(0) "" ["imgAngle"]=> string(0) "" ["imgUrl"]=> string(0) "" 
 ["imgDir"]=> string(7) "upload/" ["thumbDir"]=> string(9) 
 "upload/m/" ["imgPreviewDir"]=> string(0) "" ["avatarsWidth"]=> int(50) 
["avatarsDir"]=> string(8) "avatars/" } } 
```

同样，此代码在我的本地主机上正常工作。问题可能出在哪里？

**更新**我解决了问题，但我不太确定是什么导致了这个问题。也许是 php 错误，但我的代码在重命名`$_SESSION['images']` 为 后开始正常工作`$_SESSION['imagesNew']`- 所以 $_SESSION 变量的名称不再与变量 $images 的名称相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T02:30:03.290

TL;DR - 您显示的代码不应该表现出这种行为，因此它必须是在其他地方引起的。

有关症状的更多信息，假设您有这个类定义：

```
class Test
{
  private $x = 'hello';
} 
```

让我们序列化：

```
file_put_contents('serialized.txt', serialize(new Test)); 
```

文件内容（不要试图复制/粘贴它，它不会起作用）：

```
O:4:"Test":1:{s:7:"Testx";s:5:"hello";} 
```

现在，在另一个脚本中，让我们`unserialize()`这样做（没有类定义）：

```
var_dump(unserialize(file_get_contents('serialized.txt'))); 
```

输出：

```
object(__PHP_Incomplete_Class)#1 (2) {
  ["__PHP_Incomplete_Class_Name"]=>
  string(4) "Test"
  ["x":"Test":private]=>
  string(5) "hello"
} 
```

尽管您发布的代码似乎没有建议，但您显示的输出是`ImageCollection`对象数组的输出，因此要使其正常工作，您需要先`require`定义，例如：

```
require 'imagecollection.class.php';
// open your session here 
```

或使用[`autoloader`](http://www.php.net/spl_autoload).

# java - 循环枚举作为参数

> ID：13925391
> 
> 赞同：0
> 
> 时间：2012-12-18T02:21:38.483
> 
> 标签：java, loops, enums, iteration

所以我正在用 Java 编写二十一点，我已经将我的西装和排名值存储在枚举中

```
public enum Suit
{
   spades, hearts, clubs, diamonds
}

public enum Rank
{
    two, three, four, five, six, seven, eight, nine, ten, jack, queen, king, ace
} 
```

我有一个甲板课程，里面有一堆“卡片”。卡片包含 Suit 和 Rank 字段。

```
public class Card
{
    static Suit suit;
    static Rank rank;

    Card(Suit suit, Rank rank)  
    {

    this.suit = suit;
    this.rank = rank;

    }

    public String toString()
    {
    return rank + " of " + suit;
    }

    //getters and setters ommitted
} 
```

Deck 中的构造函数应该遍历每个花色和等级，并将这些作为参数传递以创建一副 52 张牌，但它似乎停留在每张牌的最后一个值上，我最终得到 52 个“梅花 A” . 我不明白为什么，由于西装和等级似乎打印正确，似乎只是当它们作为参数传递给 add() 时，它们行为不端。

```
public class Deck
{
    static Stack<Card> d = new Stack<Card>();

    Deck()
    {
    if (!d.isEmpty())
    {
        clear(); //Empties the stack if constructor is called again
    }

    for (Suit suit : Suit.values())
    {
        for (Rank rank : Rank.values())
        {
        //System.out.println(suit + " " + rank);
        //This seems to print the right values

        add(new Card(suit, rank)); //These are stuck on 'clubs' and 'ace'
        }
    }

    System.out.println(d);

    shuffle(); //Method which shuffles the deck

    }

    public static void add(Card c)
    {
    d.addElement(c);
    }

    //shuffle(), clear() and other methods omitted
} 
```

如果有帮助，可以在[github](https://github.com/khal28/jblackjack)上看到完整的项目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T02:43:24.030

您在卡片中的花色和等级字段不应该是静态的！

你的 Deck 领域也不应该！

静态字段是每个类的，因此您的 Card 构造函数每次调用时都会*覆盖相同的值。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T02:28:03.783

这是不正常的。你可以`Deck`从`Stack`.

```
public class Deck
{
    static Stack<Card> d = new Stack<Card>(); 
```

在这种情况下，您可以`add`直接在.`clear``shuffle``Deck`

```
public class Deck extends Stack<Card> {
    //add, clear are already there from Stack
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-23T06:53:45.807

您可以在枚举上调用 values() 方法。

```
for ((Rank rank : Rank.values()) {
  // do what you want
} 
```

这个 values() 方法***由编译器隐式声明***。所以它没有在 Enum 文档中列出。

# r - R中向量元素的最小差的索引

> ID：13925399
> 
> 赞同：-1
> 
> 时间：2012-12-18T02:23:14.767
> 
> 标签：r

我有一个向量`v`。我想找到`v` 小于 1e-2 的向量元素的最小差异的索引。我怎样才能得到索引？

```
 v = c(0.0002873771, 0.0006478544, 0.0092186701, 0.0267084167, 
        0.0457307072 , 0.3176459806)
    D = abs(diff(v)) < 1e-2 
```

我想得到 index = 1 而不是 1 和 2，只是最小的一个。如果我们有这个向量

```
 v = c( 0.01144003, 0.04644231, 0.05527114, 0.31680614)
    D = abs(diff(v)) < 1e-2
    index = which.min(abs(diff(v)) < 1e-2 ) 
```

它给了我指数 = = 1，但实际上我的欲望指数是 2 而不是 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T02:28:16.560

如果您知道最小绝对差小于您的容差，which.min 是正确的函数，不需要`D`.

```
> which.min(abs(diff(v)))
[1] 1 
```

此代码，在您编辑的问题中：

```
index = which.min(abs(diff(v)) < 1e-2 ) 
```

正在采用逻辑向量的 which.min 。不是你想要的。这就是您（可能）想要的：

```
v = c( 0.01144003, 0.04644231, 0.05527114, 0.31680614)
> which.min(abs(diff(v)))
[1] 2 
```

要实际检查您的容差，您可以使用`any`和`if`。在这里，我假设`NA`如果所有差异超出您的容忍度，您希望返回：

```
min.difference.index <- if (any(abs(diff(v)) < 1e-2)) which.min(abs(diff(v))) else NA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T03:14:35.223

问题是差分过程会花费您一次观察。

看：

```
length(v) == length(D)
[1] FALSE 
```

和：

```
length(v) == length(D) + 1
[1] TRUE 
```

所以你的索引号总是一个“太低”——因为它们指的是较短的“差异”对象中的位置。如果您希望使用此向量进行索引，请使用：

```
v[which.min(abs(diff(v))) + 1] 
```

或者：

```
Idx <- which.min(abs(diff(v))) + 1
v[Idx] 
```

# ruby-on-rails-3 - Rails 临时创建记录（保留用于预订应用程序）

> ID：13925400
> 
> 赞同：0
> 
> 时间：2012-12-18T02:23:20.967
> 
> 标签：ruby-on-rails-3

我正在编写一个预订 API，并且我想在用户通过预订应用程序时创建资产的临时保留。所以基本上，我需要一种方法来在我的数据库中创建临时记录，这些记录会在某个时间段过后过期。关于我应该如何做的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T02:38:05.283

```
class Reservation < ActiveRecord::Base
  def reservation_has_ended
    Time.now > reservation_datetime
  end
  # or...
  def reservation_is_open
    Time.now < reservation_datetime
  end
  # similarly...
  scope is_open where(Time.now > reservation_datetime)
  scope has_ended where(Time.now < reservation_datetime)
  # ... but remember scopes are going away in rails 4.1...
end 
```

然后我会有一个 cron 工作，比如每小时或每天，
清理所有 > 1 小时（或其他时间）的记录。

您还可以使其成为一项手动工作，从视图链接触发，并在控制器和模型中执行更新操作，例如，

```
# Reservation View
<%= link_to("Purge records", Reservation.purge) %>

# Reservation Controller
def remove_old_reservations
  Reservation.remove_old_reservations
end 

# Reservation Model:
def remove_old_reservations
  self.delete_all.where((Time.now - 1.hour) > reservation_datetime)
end 
```

# jquery - .closest() 的切换类

> ID：13925403
> 
> 赞同：1
> 
> 时间：2012-12-18T02:23:59.457
> 
> 标签：jquery

```
 $(".toggle-more-less").click(function() {
        $(this).closest(".article").toggleClass("show-hide");          
    }); 
```

我正在尝试为智能手机大小的网站切换文章长度以节省空间。

我认为这会起作用 - 但我猜我不明白 .closest() 。

[这是一个jsfiddle](http://jsfiddle.net/sheriffderek/q7kjr/)。

任何方向都是 GRRRRREAT！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T02:29:12.597

$(this) means the items that initiated the function, so in this case '$(".toggle-more-less")'. Closest will look for the closest parent to $(this) that fits the set criteria, so in this case it will traverses the dom upwards until it reaches a 'figure'.

```
$(this).closest('figure').find("figcaption").toggleClass("show"); 
```

Fiddle: [http://jsfiddle.net/6whzQ/](http://jsfiddle.net/6whzQ/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T02:26:56.053

一个快速的解决方案是这样的：`$(this).parent().find("figcaption").toggleClass("show");`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T02:27:36.367

[http://jsfiddle.net/q7kjr/3/](http://jsfiddle.net/q7kjr/3/)

```
$(this).prev().toggleClass("show");
$(this).prev("figcaption").toggleClass("show");
$(this).closest('figure').find("figcaption").toggleClass("show"); 
```

文档：

[http://api.jquery.com/prev/](http://api.jquery.com/prev/)

[http://api.jquery.com/closest/](http://api.jquery.com/closest/)

# c++ - cocos2d-x 如何暂停一个图层的动作和调度，然后恢复它们

> ID：13925404
> 
> 赞同：6
> 
> 时间：2012-12-18T02:24:11.217
> 
> 标签：c++, cocos2d-iphone, cocos2d-x

我有一个场景包含很多层（层包含很多精灵），我怎样才能暂停计划和动作，但我可以恢复它们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T02:51:25.673

使用功能：

```
void CCNode::pauseSchedulerAndActions();
void CCNode::resumeSchedulerAndActions(); 
```

如果您希望所有图层的子图层都暂停，则需要一个循环来执行此操作。

```
CCArray* childs = this->getChildren();
CCObject* child;
CCARRAY_FOREACH(childs, child)
{
   CCSprite *sprite = (CCSprite *)child;
   child -> pauseSchedulerAndActions();
} 
```

如果你只是想让一个特殊的孩子暂停；只需使用函数`getChildByTag`来获取孩子并暂停精灵的动作。

希望它会有所帮助:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-28T03:57:21.143

在 cocos2dx 3.2 对于暂停动作，添加

`Director::getInstance()->pause();`在暂停按钮回调中。并`Director::getInstance()->resume();`恢复。

为了在 Chipmunk 中暂停身体的物理特性，添加，

```
for (auto nod :this->getChildren()) {

 nod->getPhysicsBody()->setResting(true); 
} 
```

和

```
for (auto nod :this->getChildren()) {

 nod->getPhysicsBody()->setResting(false); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-23T16:54:27.617

**暂停：**

pauseSchedulerAndActions();

unscheduleAllSelectors();

**恢复：**

resumeSchedulerAndActions();

日程更新（）；

# c++ - 为什么这个 C++ 循环不是从 10 计数到 -5？

> ID：13925406
> 
> 赞同：1
> 
> 时间：2012-12-18T02:24:32.533
> 
> 标签：c++, loops, for-loop, counting, negative-number

好的，所以我正在学习 C++，其中一个挑战是制作一个从 10 倒数到 -5 的程序。它总是从 9 到 1，它说完成了！

请以任何方式帮助我，这是代码：

```
/*
*
*   Negative Example
*
*/
#include <iostream>
#include <string>
int main()
{
signed int i = 10;
    for(i <= 10 && i != (0 - 5); --i;) {
        using std::cout;
        cout << i << std::endl;
    }
    std::cout << "Done!" << std::endl;
} 
```

输出： 9 8 7 6 5 4 3 2 1 完成！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T02:29:08.937

As @jogojapan suggests, you want to rewrite

```
 for(i <= 10 && i != (0 - 5); --i;) { 
```

as

```
for(i = 10 ; i != (0 - 5); --i) { 
```

preferably as (although no difference functionally)

```
for(i = 10 ; i > - 5; --i) { 
```

You can also define `i` within the loop body itself, if it is not needed before or after it, like so

```
for(int i = 10 ; i > - 5; --i) { 
```

Edit: Change `i>-5` to `i>=-5` if you want the loop to run with `i=-5` as well.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T02:28:56.663

```
for(i <= 10 && i != (0 - 5); --i;) { 
```

您将这些语句放在错误的位置，应该是：

```
for(;i <= 10 && i != (0 - 5); --i) { // or (0 - 5 - 1) if you want -5 as well 
```

它从 9 开始并在 0 终止的原因是因为您使用`--i`的是*持续条件。*

该条件有一个副作用，即在循环体运行`i` *之前*它会递减（即从 9 开始），并且在它达到 0 的那一刻它将是错误的。

为了更好地理解，请考虑`for (x;y;z)`：

*   `x`在第一次迭代之前执行*一次。*
*   `y`is 在*每次*循环迭代之前评估，如果为 true，则循环继续（false 表示循环退出）。
*   `z`在循环的每次迭代之后执行。

当然，如果你想要一个从 10 到 -5（含）的循环，只需使用：

```
for (int i = 10; i >= -5; i--) 
```

并停止使用狡猾的代码:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T02:30:43.533

The issue with your code is that you have misplaced the parts of the `for` loop. As it is, the loop begins by evaluating the condition, and then proceeds to decrement `i` each time through, and check that this `i` is not equal to zero. The fact that your code completes is a consequence of the fact that `--i` will evaluate to `0` (false) if `i == 1`.

Your code should look like this:

```
#include <iostream>
#include <string>
int main()
{
    // Move the variable initialization to the first part of the loop
    signed int i;

    // Note the difference in where the expressions are placed
    // relative to the semicolons.
    for(i = 10; i <= 10 && i != (0 - 5); --i) {
        using std::cout;
        cout << i << std::endl;
    }
    std::cout << "Done!" << std::endl;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T02:34:22.863

我认为你与中期不匹配。foreach 循环作为括号内的 3 个术语，即使您不使用它们，您仍然需要 2 个分号。您的中间期限目前是 --i ，只有当 i 为 0 时才会返回 false。

此外，与 C 不同的是，C++ 中的 for 循环与 for 循环具有不同的初始化部分，而在 C 中，您可以声明如下。. .

```
int i;
for (i=0; i < 10; ++i) 
```

在 C++ 中，您可以这样声明循环内的变量。. .

```
for (int i=0; i < 10; ++i) 
```

# python - 使用 Scrapy 抓取时出现异常错误

> ID：13925413
> 
> 赞同：0
> 
> 时间：2012-12-18T02:25:31.440
> 
> 标签：python, scrapy

我开始测试 Scrapy 以抓取网站，但是当我测试我的代码时，我收到一个错误，我似乎无法理解如何解决。

这是错误输出：

```
...
2012-12-18 02:07:19+0000 [dmoz] DEBUG: Crawled (200) <GET http://MYURL.COM> (referer: None)
2012-12-18 02:07:19+0000 [dmoz] ERROR: Spider error processing <GET http://MYURL.COM>
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/Twisted-12.2.0-py2.7-linux-x86_64.egg/twisted/internet/base.py", line 1178, in mainLoop
        self.runUntilCurrent()
      File "/usr/local/lib/python2.7/dist-packages/Twisted-12.2.0-py2.7-linux-x86_64.egg/twisted/internet/base.py", line 800, in runUntilCurrent
        call.func(*call.args, **call.kw)
      File "/usr/local/lib/python2.7/dist-packages/Twisted-12.2.0-py2.7-linux-x86_64.egg/twisted/internet/defer.py", line 368, in callback
        self._startRunCallbacks(result)
      File "/usr/local/lib/python2.7/dist-packages/Twisted-12.2.0-py2.7-linux-x86_64.egg/twisted/internet/defer.py", line 464, in _startRunCallbacks
        self._runCallbacks()
    --- <exception caught here> ---
      File "/usr/local/lib/python2.7/dist-packages/Twisted-12.2.0-py2.7-linux-x86_64.egg/twisted/internet/defer.py", line 551, in _runCallbacks
        current.result = callback(current.result, *args, **kw)
      File "/usr/local/lib/python2.7/dist-packages/Scrapy-0.16.3-py2.7.egg/scrapy/spider.py", line 57, in parse
        raise NotImplementedError
    exceptions.NotImplementedError: 

2012-12-18 02:07:19+0000 [dmoz] INFO: Closing spider (finished)
2012-12-18 02:07:19+0000 [dmoz] INFO: Dumping Scrapy stats:
    {'downloader/request_bytes': 357,
     'downloader/request_count': 1,
     'downloader/request_method_count/GET': 1,
     'downloader/response_bytes': 20704,
     'downloader/response_count': 1,
     'downloader/response_status_count/200': 1,
     'finish_reason': 'finished',
     'finish_time': datetime.datetime(2012, 12, 18, 2, 7, 19, 595977),
     'log_count/DEBUG': 7,
     'log_count/ERROR': 1,
     'log_count/INFO': 4,
     'response_received_count': 1,
     'scheduler/dequeued': 1,
     'scheduler/dequeued/memory': 1,
     'scheduler/enqueued': 1,
     'scheduler/enqueued/memory': 1,
     'spider_exceptions/NotImplementedError': 1,
     'start_time': datetime.datetime(2012, 12, 18, 2, 7, 18, 836322)} 
```

看起来这可能与我的`parse`函数和回调有关。我尝试删除`rule`它，但它只适用于 1 个 URL，我需要的是抓取整个网站。

这是我的代码

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from tutorial.items import DmozItem
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.selector import HtmlXPathSelector
from scrapy.item import Item

class DmozSpider(BaseSpider):
    name = "dmoz"
    start_urls = ["http://MYURL.COM"]
    rules = (Rule(SgmlLinkExtractor(allow_domains=('http://MYURL.COM', )), callback='parse_l', follow=True),)

    def parse_l(self, response):
       hxs = HtmlXPathSelector(response)
       sites = hxs.select('//div[@class=\'content\']')
       items = []
       for site in sites:
           item = DmozItem()
           item['title'] = site.select('//div[@class=\'gig-title-g\']/h1').extract()
           item['link'] = site.select('//ul[@class=\'gig-stats prime\']/li[@class=\'queue \']/div[@class=\'big-txt\']').extract()
           item['desc'] = site.select('//li[@class=\'thumbs\'][1]/div[@class=\'gig-stats-numbers\']/span').extract()
           items.append(item)
       return items 
```

任何正确方向的提示将不胜感激。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T03:54:22.300

找到了这个问题的答案：

[为什么在尝试爬取和解析网站时，scrapy 会为我抛出错误？](https://stackoverflow.com/questions/5264829/why-does-scrapy-throw-an-error-for-me-when-trying-to-spider-and-parse-a-site)

看起来`BaseSpider`没有实现`Rule`

如果您偶然发现了这个问题并且您正在使用`BaseSpider`爬网，则需要将其更改为`CrawlSpider`并导入它，如[http://doc.scrapy.org/en/latest/topics/spiders.html](http://doc.scrapy.org/en/latest/topics/spiders.html)中所述

```
from scrapy.contrib.spiders import CrawlSpider, Rule 
```

# c++ - 在 C++ 中解析 Yahoo 财务数据

> ID：13925416
> 
> 赞同：1
> 
> 时间：2012-12-18T02:26:36.377
> 
> 标签：c++, csv, io, yahoo

我想用 C++ 解析雅虎金融 csv 文件。鉴于每一行的格式为：

```
Date,Open,High,Low,Close,Volume,Adj Close 
```

获得这些值的有效方法是什么？我想将日期存储到一个结构中，该结构包含一个 ctime 结构的日期，并为所有其他值加倍。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T03:25:23.393

您可以为 line 定义一个结构，例如：

```
struct Instrument
{
   ctime   date_;
   double  open_;
   double  high_;
   double  low_;
   double  close_;
   double  volume_;
   double  adj_;
   double  close_;
}; 
```

然后你 getline 从文件中读取每一行，将每一行（使用 boost tokenizer、regex 或[split-a-c++-string](https://stackoverflow.com/questions/236129/splitting-a-string-in-c)）解析为一个 Instrument 对象，然后你可以将它存储在一个 STL 容器中，例如：

```
std::vector<Instrument> instruments;
instruments.push_back(instrument); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T03:06:21.840

我认为 Boost 正则表达式可以帮助你。

[http://www.boost.org/doc/libs/1_52_0/libs/regex/doc/html/index.html](http://www.boost.org/doc/libs/1_52_0/libs/regex/doc/html/index.html)

# android - 快速联系徽章无法通过使用 Intent i=new Intent(Intent.ACTION_PICK,Contacts.CONTENT_URI) startActivityForResult(i 0) 传递 Intent

> ID：13925420
> 
> 赞同：1
> 
> 时间：2012-12-18T02:27:13.103
> 
> 标签：android, sdk

```
public class MainActivity extends Activity {

    Button b;
    //FrameLayout fl;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        b=(Button)findViewById(R.id.button1);

        b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent contactpicker=new Intent(Intent.ACTION_PICK,Contacts.CONTENT_URI);
                startActivityForResult(contactpicker, 0);
            }
        });

    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub

        if (resultCode == RESULT_OK) {
            switch (requestCode) {
            case 0:
                Uri contactUri = data.getData();
                FrameLayout badgeLargeHolder = (FrameLayout)
                findViewById(R.id.badge_holder_large);
                QuickContactBadge badgeLarge = new QuickContactBadge(this);
                badgeLarge.assignContactUri(contactUri);
                badgeLarge.setMode(ContactsContract.QuickContact.MODE_LARGE);
                badgeLarge.setImageResource(R.drawable.ic_launcher);
                badgeLargeHolder.addView(badgeLarge);
                break;
            }
        }

    }
} 
```

我收到这样的错误：12-18 07:30:47.452: E/AndroidRuntime(657): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.PICK dat=content:/ /联系人}

提供解决此错误的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T02:37:57.543

使用`ContactsContract.Contacts.CONTENT_URI`而不是`Contacts.CONTENT_URI`

```
Intent contactpicker = new Intent(Intent.ACTION_PICK,
                                 ContactsContract.Contacts.CONTENT_URI); 
startActivityForResult(contactpicker, 0); 
```

并将此权限添加到`AndroidManifest.xml`

```
<uses-permission android:name="android.permission.READ_CONTACTS" /> 
```

# css - 有没有办法在css中设置垂直对齐？

> ID：13925422
> 
> 赞同：2
> 
> 时间：2012-12-18T02:27:26.163
> 
> 标签：css

有没有办法在css中设置垂直对齐？我的`<li>`元素中有一个文本，但是当我将文本设置为居中时，它只设置了文本的水平对齐方式。但是当我使用 padding-top 函数时，它会改变`<li>`元素的大小。那么如何在不改变`<li>`元素大小的情况下设置垂直对齐方式呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T02:29:15.160

Try adjusting the `line-height` of the `li`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T03:06:38.287

如果您不想调整任何间距，我建议：

```
li {
     position: relative;
     top: 2px;
} 
```

这将调整相对于列表项高度的垂直位置，而不调整元素的大小。

# php - PHP MYSQL 从另一个表插入一个表

> ID：13925426
> 
> 赞同：1
> 
> 时间：2012-12-18T02:28:05.640
> 
> 标签：php, mysql, sql, insert

我在其他论坛上尝试了一堆灵魂，但总是出错。这是使用 hostgator 和 PHP 5.2 的当前 PHP 代码

```
$insert = "INSERT INTO events (datecreated, fullname, email, title, url, picurl, desc, psw, skypeid, event) SELECT jvs.datecreated, jvs.fullname, jvs.email, jvs.title, jvs.url, jvs.picurl, jvs.desc, jvs.psw, jvs.skypeid, jvs.event FROM jvs";
if (! mysqli_query($dbh, $insert)  ||  mysqli_affected_rows($dbh) == 0)
            {
die ("<BR><BR><BR>Failed to insert data- " . mysqli_error($dbh));
            } 
```

我得到的错误是：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以了解在 'desc、psw、skypeid、event) SELECT jvs.datecreated、jvs.fullname、jvs.email、jvs 附近使用的正确语法。在第 1 行

我检查了两个表中的每个字段，拼写正确，并且文件在那里。事件表中的字段顺序不同，并且该表具有更多字段。谢谢，埃德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T02:29:18.533

`DESC` is a MySQL Reserved keyword. You should escape with `backtick`, eg

```
INSERT INTO tableName(......, `desc`, .....)
SELECT ... 
```

*   [MySQL Reserved keyword List](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T03:10:36.493

**1.**见**desc**， desc 是保留字，读作语句，必须加反引号。

**2.**`INSERT INTO`您必须在两个查询（和`SELECT`）之间添加分隔符

**3.**你在哪里`VALUES`，`INSERT INTO`必须包括一个`VALUES`

修复代码是：

```
$insert = "INSERT INTO events (`datecreated`, `fullname`, `email`, `title`, `url`, `picurl`, `desc`, `psw`, `skypeid`, `event`) VALUES('datecreated', 'fullname', 'email', 'title', 'url', 'picurl', 'desc', 'psw', 'skypeid', 'event');
SELECT jvs.datecreated, jvs.fullname, jvs.email, jvs.title, jvs.url, jvs.picurl, jvs.desc, jvs.psw, jvs.skypeid, jvs.event FROM jvs";
if (! mysqli_query($dbh, $insert)  ||  mysqli_affected_rows($dbh) == 0){
   die ("<BR><BR><BR>Failed to insert data- " . mysqli_error($dbh));
} 
```

# javascript - 如何将弹出消息放入无序列表中

> ID：13925427
> 
> 赞同：-1
> 
> 时间：2012-12-18T02:28:06.310
> 
> 标签：javascript

这是我的代码：

```
 if (rnk <5)

<li><a href="rank.aspx" title="Rank" >Rank</a></li> 
```

例如上面，我希望弹出一条消息告诉用户，如果排名低于 5，他们不允许进入该站点。有人可以告诉我如何编写代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T02:44:40.537

```
if (rnk > 5) {
     document.write('<li><a href="rank.aspx" title="Rank" >Rank</a></li>'); 
} else { 
     document.write('<li><a href="javascript: alert(\'No Access!\')" title="Rank" >Rank</a></li>'); 
} 
```

尝试这样的事情。

# asp.net - 通过 Web API MVC4 使用相同的控件返回 JSON/XML/HTML

> ID：13925430
> 
> 赞同：1
> 
> 时间：2012-12-18T02:28:51.483
> 
> 标签：asp.net, .net, asp.net-mvc-4, asp.net-web-api

我猜之前有人问过它，但我没有看到它，我想也许我错过了一些基本的东西。我的问题是为什么我不能有一个 API 控制器，它的结果格式基于接受的内容格式（即应用程序/json）？也许我很懒 - 但我宁愿做一些事情，如果 html 是预期的结果格式而不是让我返回一个视图，如果 json 是接受格式而不是我可以返回 JSOn -etc...如果我有两个命名空间，那么也是我必须维护的两种方法 - 当唯一的区别是媒体格式时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T02:42:16.560

当您从 Web api 控制器中的操作返回对象时，幕后实际发生的情况如下所示：

```
 public class SessionController : ApiController
    {

        public HttpResponseMessage Get(int id)
        {
            var vm = new SessionDetailViewModel {Speaker = "Bob", Title = "Bob's talk"};

            var conneg = new DefaultContentNegotiator();
            var result = conneg.Negotiate(typeof (SessionDetailViewModel), this.Request,Configuration.Formatters);
            var content = new ObjectContent<SessionDetailViewModel>(vm, result.Formatter,result.MediaType);

            return new HttpResponseMessage() {Content = content};
        }
    } 
```

只要您有适当的格式化程序集，可以将返回的对象映射到有线格式，那么 conneg 就会自动发生。

# xcode - 'GHUnitIOS/GHUnit.h' file not found in Xcode

> ID：13925437
> 
> 赞同：1
> 
> 时间：2012-12-18T02:29:17.310
> 
> 标签：xcode, ios6, compiler-errors, gh-unit

Hello this is the error that I got I am trying to use ASIHTTPRequest API. I have Xcode 4.5.2 with IOS 6.0 simulators.

I've tried to search this file on my mac but actually the file does not exist in my entire hard drive! Any plausible way to fix this error?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-12T05:42:35.600

这个对我有用。

1.  转到框架并单击 GHUnitIOS.framework
2.  确保实用程序视图已启用
3.  在 Target Membership 上取消选中目标然后构建
4.  再次检查目标并构建或运行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-18T07:08:23.023

我遇到了同样的问题。

您可以将测试类添加到主应用程序目标。取消选中目标然后，错误“GHUnit/GHUnit.h file not found”消失了。

![在此处输入图像描述](../Images/7e146a35e63e23bc3b82eb4ecfd14656.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T08:12:44.780

First, you should know whether you follow the document below:

[http://gabriel.github.com/gh-unit/docs/appledoc_include/guide_install_ios_4.html](http://gabriel.github.com/gh-unit/docs/appledoc_include/guide_install_ios_4.html)

and then you need to check the GHUnitIOS framework in the xcode, can't you see some ".h" files below the "headers" group? if not, may be the GHUnitIOS framework is not proper.go to location "/GHUnitIOS.framework/Versions/A/", and copy all the 3 files in it, go to the location "GHUnitIOS.framework/", paste them and then run the test project. is that ok?

if you can see those ".h" files in the framework, maybe the build settings is not properly set. you should check the search path.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-15T03:57:51.400

如果我们的应用基于 iOS 设备，请选择 GHUnitIOS-.zip；如果我们的应用基于 Mac OS X，请选择 GHUnit-.zip。

下载页面：[https ://github.com/gh-unit/gh-unit/downloads](https://github.com/gh-unit/gh-unit/downloads)

# php - Perl 兼容的正则表达式信息

> ID：13925440
> 
> 赞同：2
> 
> 时间：2012-12-18T02:29:41.187
> 
> 标签：php, regex, editor

我最近研究了“正则表达式”并遇到了两种形式。POSIX-Regex 和 PCRE（Perl 兼容的正则表达式）

许多编辑都支持通过“正则表达式”进行搜索，他们是否考虑上述两种形式？如果使用比其他更多，它是那个吗？还有什么好的指南来学习 PCRE 表达式，目前我正在阅读： http: [//php.net/manual/en/reference.pcre.pattern.syntax.php](http://php.net/manual/en/reference.pcre.pattern.syntax.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T02:37:41.523

还有更多类型的正则表达式。您可能想称它们为方言。

编辑应用什么类型的正则表达式通常没有明确显示。您将不得不依赖文档或自己进行一些测试才能找到答案。有一些工具可以让您在不同类型之间切换。

据我所知，PCRE 是最常见的支持类型。不是因为它们更好，事实上 POSIX 更符合逻辑，而仅仅是因为它们的处理效率更高。

# sql - 在子查询之间的 ORACLE 连接语句中选择顶部记录

> ID：13925443
> 
> 赞同：6
> 
> 时间：2012-12-18T02:29:54.660
> 
> 标签：sql, oracle

我想请您帮忙构建一条 ORACLE SQL 语句：

使用工作表如下

```
Object | Operation | Time  
A      | Move      | 12:01  
B      | Move      | 12:02  
C      | Pickup    | 12:03  
D      | Move      | 12:04  
B      | Pickup    | 12:05 
```

得到如下结果表。

```
Object | Operation | Time  | Cause  
A      | Move      | 12:01 | C  
B      | Move      | 12:02 | C  
D      | Move      | 12:04 | B 
```

这是为了弄清楚哪个 Pickup 操作导致了每个 Move 操作。
“原因”列必须包含移动操作旁边时间最短的取件作业记录的对象。

我有以下一些想法，但不知道如何去做。
-。它需要在 Move 的子查询和 Pickup 的子查询之间使用 join 语句
。Pickup 的子查询必须按要加入的移动记录进行分区
-。只能从 Pickup 子查询的每个分区中选择顶部记录

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T06:38:53.513

这是我的尝试：

```
select  m.object, m.operation, m.time, 
  max(p.object) keep (dense_rank first order by p.time) cause,
  max(p.time) keep (dense_rank first order by p.time) cause_time
from a m
join a p on (p.time > m.time)
where m.operation = 'Move'
and p.operation = 'Pickup'
group by m.object, m.operation, m.time; 
```

见[SQLFiddle](http://sqlfiddle.com/#!4/56c84/4)

我已将列时间作为数字，这没有任何重要性，因为它是可排序的。

我已将表格分成两部分，移动和拾取，并且按时进行连接，时间`pickup`大于`move`. （这种类型的连接在性能上不是很好）。然后我`choose`用最小的`time`（`first`子句，with `order by p.time`）来取货。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T07:16:24.757

这是我的尝试：

```
select object, operation, time, t.pobject
from a join 
   (select object pobject, time cur, lag(time,1, 0) over (order by time  ) prev 
      from a
     where operation = 'Pickup')t 
on a.time > t.prev and a.time <= t.cur
where operation = 'Move'; 
```

[这是一个sqlfiddle](http://sqlfiddle.com/#!4/56c84/55)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-18T08:54:58.093

有一个来自old school

```
select j1.Object, j1.Operation, j1.Time, substr(min(j2.Time || j2.Object), 6) Cause
from job j1, job j2
where j1.Operation like 'Move'
  and j1.Time < j2.Time
  and j2.Operation like 'Pickup'
group by j1.Object, j1.Operation, j1.Time 
```

这是[SQLFiddle](http://sqlfiddle.com/#!4/5b2fe/1/0)

# php - 如果在 phalcon 框架中使用 xmlhttprequest，如何禁用渲染布局？

> ID：13925453
> 
> 赞同：7
> 
> 时间：2012-12-18T02:30:49.910
> 
> 标签：php, layout, controller, xmlhttprequest, phalcon

**如何禁用布局渲染？**

有那么一刻，我可以通过这种方式检测到该请求是通过 jQuery 发出的：

```
public function initialize()
{
    if (!$this->request->isAjax()) {
        // disable layout here... how?
    }
} 
```

**可以在全球范围内完成吗？**

所有控件的处理ajax请求的代码都是相同的，有没有办法为整个应用程序全局定义这个行为规则？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-18T03:18:07.037

```
public function initialize()
{
    if (!$this->request->isAjax()) 
    {
        // disable layout here... how?
        $this->view->setRenderLevel(\Phalcon\Mvc\View::LEVEL_ACTION_VIEW);
    }
} 
```

您也可以通过调用禁用自动渲染

```
$this->view->disable(); 
```

# java - 检查字符串是否为标点符号

> ID：13925454
> 
> 赞同：20
> 
> 时间：2012-12-18T02:30:54.333
> 
> 标签：java, string-comparison, punctuation

假设我有一个包含一些字母和标点符号的字符串数组

```
String letter[] = {"a","b","c",".","a"}; 
```

在字母[3]中，我们有“。”

如何检查字符串是否为标点符号？我们知道有很多可能的标点符号（,.?! 等）

到目前为止我的进展：

```
for (int a = 0; a < letter.length; a++) {
    if (letter[a].equals(".")) { //===>> i'm confused in this line
        System.out.println ("it's punctuation");
    } else {
        System.out.println ("just letter");
    }
} 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-12-18T02:41:38.300

这是使用正则表达式的一种方法：

```
if (Pattern.matches("\\p{Punct}", str)) {
    ...
} 
```

正`\p{Punct}`则表达式是表示单个*标点字符*的 POSIX 模式。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2018-03-15T00:32:26.570

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-12-18T02:40:04.813

你想检查更多的标点符号`.`吗？

如果是这样，您可以这样做。

```
String punctuations = ".,:;";//add all the punctuation marks you want.
...
if(punctuations.contains(letter[a])) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-18T02:39:51.367

试试这个方法：Character.isLetter()。如果字符是字母（az、大写或小写），则返回 true，如果字符是数字或符号，则返回 false。

例如 boolean answer = Character.isLetter('!');

答案将等于假。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-06-10T07:45:32.833

I have tried regex: "`[\\p{Punct}]`" or "`[\\p{IsPunctuation}]`" or withouth `[]`, it doesn't work as expected.

My string is: `How are you?`, or even `"How are you?", he asked.`

Then call: `my_string.matches(regex);` but it seems like it only recognises if the string is only one punctuation (e.g "`?`", "`.`",...).

Only this regex works for me: "`(.*)[\\p{P}](.*)`", it will include all preceding and proceeding characters of the punctuation because the `matches()` requires to match all the sentence.

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2019-01-31T22:32:08.917

import String ... if(string.punctuation.contains(letter[a]))

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2015-06-17T20:42:49.133

```
function has_punctuation(str) {

  var p_found = false;
  var punctuations = '`~!@#$%^&*()_+{}|:"<>?-=[]\;\'.\/,';
  $.each(punctuations.split(''), function(i, p) {
    if (str.indexOf(p) != -1) p_found = true;
  });

  return p_found;

}
```

# java - 如何将数字与 DOUBLE 脚本数组中的第一个值的索引进行比较？

> ID：13925460
> 
> 赞同：0
> 
> 时间：2012-12-18T02:31:49.617
> 
> 标签：java, char, arrays

例如，如果我有一个这样的 char 数组： [abdc] 这个数组中“c”的索引是 (0,1)。您如何将 0 与整数进行比较？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T02:59:04.400

这是你要找的吗？

```
public class jtest
{
  public static void main(String args[])
  {
    new jtest();
  }

  public jtest()
  {
    char[][] myChars = {{'a', 'b'}, {'c', 'd'}};

    // myChars[x][y]
    for (int x = 0; x < myChars.length; x++)
    {
      for (int y = 0; y < myChars[0].length; y++)
      {
        if (x == 1) // compare the index value of X with some integer
          System.out.println(myChars[x][y]);
      }
    }
  }
} 
```

# objective-c - 检查 UIControl 子视图是否属于 UITextField 类型

> ID：13925461
> 
> 赞同：3
> 
> 时间：2012-12-18T02:31:50.773
> 
> 标签：objective-c

我想使用类似以下代码的代码来查找已添加到扩展 UIControl 的自定义视图中的 UITextField，然后在它们上调用 resignFirstResponder 以关闭键盘，但 XCode 编译器不允许这样做并给出消息“意外的接口名称 UITextField。预期的表达式。" 在这里实现我想要的目标的最佳方法是什么？

```
@interface MyCustomView : UIControl
@end

@implementation MyCustomView

   - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
   {
        /* Dismiss the keyboard associated with any UITextFields in this view */
        for (id subview in self.subviews) {
            if ([subview isKindOfClass: UITextField] ||
                [subview isMemberOfClass: UITextField]) {
                [subview resignFirstResponder];
            }
        }
    }

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T02:37:47.497

您需要执行以下操作来获取 UITextField 类：

```
if ([subview isKindOfClass:[UITextField class]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T02:54:19.987

`if ([subview isKindOfClass:[UITextField class])`对于`UITextField`类和它的子类是正确的。

`if ([subview class] == [UITextField class])`仅适用于`UITextField`类。

您可以根据需要使用其中任何一种。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-21T10:05:22.967

这对您来说可能更容易：

```
[self.view endEditing:YES]; 
```

# angularjs - AngularJS：反转复选框状态

> ID：13925462
> 
> 赞同：68
> 
> 时间：2012-12-18T02:31:52.800
> 
> 标签：angularjs

不知何故，通过 Angular 的魔力，如果您使用`ng-model`并提供一个布尔值，如果该布尔值为真，您的复选框将被选中，如果为假，则不选中。

```
<input type="checkbox" ng-model="video.hidden"> 
```

虽然仅此一项就相当令人费解，但我实际上是在尝试反转选中状态，因为与 todo 示例不同，它`todo.done`意味着框被选中，我的模型更像`todo.incomplete`.

不幸的是，我的第一个猜测没有奏效：

```
<input type="checkbox" ng-model="!video.hidden"> 
```

我处于模型已被指定给我的位置，所以我无法更改它并且不想在客户端上按摩它（因为我正在将客户端对象发送回服务器，因为它是在受信任的环境中运行）。

**更新**

这适用于 1.3 并且不给你字符串（1.2.xxx 给你字符串而不是布尔值）：

```
<input type="checkbox" ng-model="video.hidden" ng-true-value="false" ng-false-value="true"> 
```

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2014-12-14T19:30:40.417

您现在可以做到这一点，而无需自定义指令、角度支持`ng-true-value`和`ng-false-value`

[https://docs.angularjs.org/api/ng/input/input[复选框]](https://docs.angularjs.org/api/ng/input/input[checkbox])

你的例子现在应该可以工作了 `<input type="checkbox" ng-model="video.hidden" ng-true-value="false" ng-false-value="true">`

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-18T04:33:31.327

我认为没有办法纯粹在模板中做到这一点。实现这一点的最明显方法是创建一个新的范围变量，该变量手动双重绑定到您的模型值。就像：

```
<input type="checkbox" ng-model="videoShowing"> 
```

在你的控制器中：

```
$scope.videoShowing = !$scope.video.hidden;

$scope.$watch('video.hidden', function(value) {
  $scope.videoShowing = !value;
});
$scope.$watch('videoShowing', function(value) {
  $scope.video.hidden = !value;
} 
```

您几乎可以将单向绑定与 ng-change 一起使用，但这并不完全奏效：

```
<input type="checkbox" ng-checked="!video.hidden" ng-change="???"> 
```

因为 ng-change 根本不会将当前值混入本地范围。如果您处于可以访问 NgModelController 的上下文中，您可以做一些事情，但您需要一个自定义指令。制作一个修改 NgModel 的格式化程序和解析器的“反转”属性指令并不难。我建议如果你需要很多倒置的复选框。

**编辑**

对于后人来说，制作“倒置”属性非常简单，不妨这样做。制作指令一开始似乎总是很痛苦，但它确实是 Angular 的方式。

```
someModule.directive('inverted', function() {
  return {
    require: 'ngModel',
    link: function(scope, element, attrs, ngModel) {
      ngModel.$parsers.push(function(val) { return !val; });
      ngModel.$formatters.push(function(val) { return !val; });
    }
  };
}); 
```

可能还需要设置优先级，或者“unshift”而不是 push，以确保这些人在内置 inputDirective 之后运行。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-12-18T04:44:17.143

这似乎有效

```
<input  type="checkbox" 
        ng-init = "video.checked = !video.hidden"
        ng-model ="video.checked"
        ng-change ="video.hidden = !video.checked"/> 
```

它引入了一个与复选框`video.checked`相反的属性，`video.hidden`一旦复选框更改，值就会更新。

此处示例：[http ://plnkr.co/edit/7HYht6ubkUUJQ0r3g16m?p=preview](http://plnkr.co/edit/7HYht6ubkUUJQ0r3g16m?p=preview)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-03-20T10:15:40.590

我的解决方案使用指令“否定”，您只需将其添加到“输入”中。很简单，不用换控制器。

```
angular
    .module("<< your module >>")
    .directive('negate', [
        function () {
            return {
                require: 'ngModel',
                link: function (scope, element, attribute, ngModelController) {
                    ngModelController.$isEmpty = function(value) {
                        return !!value;
                    };

                    ngModelController.$formatters.unshift(function (value) {
                        return !value;
                    });

                    ngModelController.$parsers.unshift(function (value) {
                        return !value;
                    });
                }
            };
        }
    ]
); 
```

像这样使用它：

```
<input type="checkbox" negate ng-model="entity.nologin"> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-09-20T01:19:55.353

我的解决方案非常简单：只需使用**ng-true-value** / **ng-false-value**并将 false 设置为 ng-true-value 并将 true 设置为 ng-false-value，这将反转功能。

```
<input type="checkbox" ng-model="<<-- Your Model -->> " ng-true-value="false"
            ng-false-value="true">
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-08T10:39:35.300

我认为获取复选框的选中或未选中值的最简单解决方案是在复选框输入元素中添加 ng-init 指令，如下所示：

```
<input type="checkbox" ng-init="video = false" ng-model="video" > 
```

如果状态未选中，这将使复选框的初始值为 false。在提交表单时，如果未选中复选框，则返回（或控制台）的值将为 false，而不是“未定义”，否则在选中时将为 true。

如果要为真或假状态添加自定义值，可以使用：

```
ng-true-value="'custom_true value'" 
```

和

```
ng-false-value="'custom_false value'" 
```

在输入元素内部。像 ：

```
<input type="checkbox" ng-init="video = false" ng-model="video" ng-true-value="'custom_true value'" ng-false-value="'custom_false value'"> 
```

# c++ - 来自 boost asio io_service get_service() 的错误指针

> ID：13925465
> 
> 赞同：2
> 
> 时间：2012-12-18T02:32:05.390
> 
> 标签：c++, multithreading, boost, boost-asio

我正在使用各种 Boost 函数开发一个事件驱动的应用程序。我一直在计划将我的多线程架构基于 ASIO 的 io_service 对象，其中每个工作原子将由一个线程组分派，该线程组由 1 个或多个线程组成，每个线程调用`run()`.

该引擎的早期“概念证明”版本使用单个`io_service`对象来分派许多不同的任务，包括截止时间计时器、网络 i/o 和发布的操作。由于这些早期版本有时可能是这样，因此这个早期版本一次调度的事件不超过几个。在确信自己走在正确的轨道上之后，我重构了引擎的一部分以支持更精细的粒度和更高的可扩展性。`io_service`但是这个新版本正在崩溃，对象中的指针似乎是错误的。

我将尝试为我遇到的问题开发一个简化且可重现的测试用例。但在此之前，我想确认一下我的架构所基于的假设……</p>

**单个`io_service`对象可以在多个网络对象之间共享——tcp 和 udp 解析、套接字、计时器和任何其他需要`io_service`对象引用的野兽。**

我问的原因是我无法在文档或在线讨论中找到明确的说明。我的 io_service 出现问题的另一个提示是，我在调用`async_connect()`具有有效端点和处理程序的 tcp::socket 的下游某处遇到崩溃。最后一行执行`async_connect()`调用`this->get_service()`。stream_socket_service`get_service()`应该返回的指针最终是 0x2，这自 ENIAC 以来一直不是一个很好的指针值。

我的环境……</p>

*   我试过用 Boost 版本 48 到 52 来调试这个问题。

*   我正在 OSX 上开发并尝试了从 4.2 到 4.7.3 的各种 gcc 4.x 编译器版本。

*   在此损坏问题之前，我在会话中早些时候完成的异步操作包括一些计时器、一个 udp 解析和一个 tcp 解析。

*   我正在执行的套接字是`async_connect()`在调用之前在堆中分配的，并在其构造函数中传递了 io_service。

*   我有一个`io_service::work`对象。

*   我没有使用股（还）。

这些信息是否足以让任何人提供帮助，还是我需要提交一段可编译的代码？我也很喜欢关于什么是`io_service`服务的入门，我相信其他 SO 读者也会喜欢。

更新＃1：这是我遇到的问题的最小特征，我已经确认仍然崩溃。我在最新的 osx ML 上使用 Boost 1.52.0、gcc 4.6.3 构建了它。

```
#include <stdlib.h>
#include <string>
#include <boost/bind.hpp>
#include <boost/function.hpp>
#include <boost/thread.hpp>
#include <boost/thread/mutex.hpp>
#include <boost/asio.hpp>

namespace foo {

namespace asio = boost::asio;

class ios_threads : private boost::noncopyable
{
public:
    ios_threads(bool strt = false)
    : work_(new asio::io_service::work(ios_))
    {
        if (strt)
            start();
    }

    static asio::io_service &ios()
    {
        return ios_;
    }

    void start()
    {
        threads_.create_thread(boost::bind(&ios_threads::run, this));
    }

    void wait()
    {
        threads_.join_all();
    }

private:
    void run()
    {
        while (true) {
            try {
                ios_.run();
            }
            catch (std::exception &e) {
                delete work_;
                break;
            }
        }

        printf("Shutting down.\n");
    }

    static asio::io_service ios_;

    asio::io_service::work *work_;
    boost::thread_group threads_;

};

asio::io_service ios_threads::ios_;

struct op;

typedef op * opPtr;

struct op
{
    typedef boost::recursive_mutex mutex_type;

    op(op *del)
    : delegate_(del)
    {
    }

    virtual ~op()
    {
    }

    bool start_async()
    {
        boost::unique_lock< mutex_type > lock(mutex_);

        return start_it();
    }

protected:
    virtual bool start_it()
    {
        return false;
    }

    virtual void did_it(const boost::system::error_code& error)
    {
    }

    void completion_handler(const boost::system::error_code& error)
    {
        boost::unique_lock< mutex_type > lock(mutex_);

        did_it(error);
    }

    opPtr delegate_;
    mutable mutex_type mutex_;
};

struct interface_search : public op
{
    typedef op super;

    interface_search(op *del)
    : super(del),
      udp_resolver_(ios_threads::ios())
    {
        it_ = NULL;
    }

    bool start_it()
    {
        try {
            std::string hostname = boost::asio::ip::host_name();
            asio::ip::udp::resolver::query query(hostname, "", asio::ip::resolver_query_base::numeric_service | boost::asio::ip::resolver_query_base::passive);
            udp_resolver_.async_resolve(query, boost::bind(&interface_search::udp_handler, this, asio::placeholders::error, asio::placeholders::iterator));
        }
        catch (std::exception& e) {
            printf("UDP resolve operation failed. Exception: %s", e.what());
         }

        return super::start_it();
    }

protected:
    void udp_handler(const boost::system::error_code& error, asio::ip::udp::resolver::iterator it)
    {
        it_ = &it;
        completion_handler(error);
    }

    void did_it(const boost::system::error_code& error)
    {
        if (error == asio::error::operation_aborted)
            return;

        op *del = delegate_;

        if (del)
            del->start_async();
    }

    asio::ip::udp::resolver udp_resolver_;
    asio::ip::udp::resolver::iterator *it_;
};

struct google_connect : public op
{
    typedef op super;

    google_connect()
    : super(NULL),
      socket_(ios_threads::ios())
    {
    }

    void endpoint(asio::ip::tcp::endpoint &endpoint)
    {
        endpoint_ = endpoint;
    }

    bool start_it()
    {
        try {
            // Crashes in the following call!
            socket_.async_connect(endpoint_, boost::bind(&google_connect::connect_handler, this, asio::placeholders::error));
        }
        catch (std::exception& e) {
            printf(e.what());
         }

        return super::start_it();
}

    void connect_handler(const boost::system::error_code& error)
    {
        completion_handler(error);
    }

    void did_it(const boost::system::error_code& error)
    {
        if (error == asio::error::operation_aborted)
            return;

        boost::asio::ip::address addr = socket_.local_endpoint().address();

        printf(addr.to_string().c_str());
    }

    asio::ip::tcp::socket socket_;
    asio::ip::tcp::endpoint endpoint_;
};

struct google_resolve : public op
{
    typedef op super;

    google_resolve()
    : super(new google_connect()),
      resolver_(ios_threads::ios())
    {
        it_ = NULL;
    }

    bool start_it()
    {
        try {
            asio::ip::tcp::resolver::query query(asio::ip::tcp::v4(), "google.com", "http");
            resolver_.async_resolve(query, boost::bind(&google_resolve::tcp_handler, this, asio::placeholders::error, asio::placeholders::iterator));
        }
        catch (std::exception& e) {
            printf(e.what());
         }

        return super::start_it();
}

protected:
    void tcp_handler(const boost::system::error_code& error, asio::ip::tcp::resolver::iterator it)
    {
        it_ = &it;
        completion_handler(error);
    }

    void did_it(const boost::system::error_code& error)
    {
        if (error == asio::error::operation_aborted)
            return;

        asio::ip::tcp::resolver::iterator last;

        if (*it_ != last) {
            google_connect *gc = static_cast< google_connect * >(delegate_);

            if (gc) {
                asio::ip::tcp::endpoint ep = **it_;
                gc->endpoint(ep);
                gc->start_async();

                super::did_it(error);
            }
         }
    }

    asio::ip::tcp::resolver resolver_;
    asio::ip::tcp::resolver::iterator *it_;
};

}    // namespace foo

int main(int argc, const char * argv[])
{
    try {
        foo::ios_threads threads(false);
        foo::opPtr ops_;

        ops_ = new foo::interface_search(
            new foo::google_resolve()
        );

        ops_->start_async();

        threads.start();
        threads.wait();
    }
    catch (std::exception& e) {
        printf(e.what());
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:28:06.343

为了他人的利益，我将自己回答这个问题。

我所描述的问题的原因是，在从 gcc 4.2 转换到 gcc 4.6.3 并启用 c++0x 语言支持后，我需要链接到我在构建编译器时构建的 libstdc++ 库。现在我正在与正确的运行时库链接，不再发生运行时错误。

# javascript - angularUI ui-select2 指令不起作用

> ID：13925466
> 
> 赞同：7
> 
> 时间：2012-12-18T02:32:20.633
> 
> 标签：javascript, jquery, angularjs, jquery-select2, angular-ui

我一直在用这个把头撞在墙上，所以我把它减少到最低限度：

**索引.html：**

```
<html lang="en" ng-app="myApp">
    <body ng-controller="main">

        <select ui-select2>
            <option>12451</option>
            <option>23435</option>
            <option>3456</option>
        </select>

        <!-- Scripts loaded here. See the plunker -->

    </body>
</html> 
```

**应用程序.js：**

```
angular
    .module('myApp', ['ui'])
    .controller('main', function (){}); 
```

这是 Plunker 的链接：[http ://plnkr.co/edit/kXnHPzBt7apRc7EivLp8?p=preview](http://plnkr.co/edit/kXnHPzBt7apRc7EivLp8?p=preview)

我想我做得很好，但它只是拒绝初始化`select2`.

这是我得到的错误：

> 对象 [[object HTMLSelectElement]] 没有方法“是”

这是错误的屏幕截图：

![在此处输入图像描述](../Images/0d3a7fff20a705b4c879c67d126b453f.png)

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-18T04:58:13.567

您需要在 AngularJS 之前加载 jQuery，显然是`select2.js`在 Angular-ui 之前

以下顺序工作正常

```
<script src="jquery.min.js"></script>          
<script src="select2.js"></script>
<script src="angular.js"></script>  
<script src="angular-ui.js"></script> 
```

[检查插件： http](http://plnkr.co/edit/sAGfzmNdykEnqlH40gNf?p=preview) ://plnkr.co/edit/sAGfzmNdykEnqlH40gNf?p=preview

* * *

检查这个其他答案：[Angular UI Select2 in the Bootstrap Navigation Bar](https://stackoverflow.com/questions/13745124/angular-ui-select2-in-the-bootstrap-navigation-bar/13745664#13745664)

# objective-c - 在两个关系 (m:n - m:1) 上创建一个伪属性（获取的属性？）

> ID：13925468
> 
> 赞同：0
> 
> 时间：2012-12-18T02:32:52.507
> 
> 标签：objective-c, core-data

我有三个实体：

实体 A ----- m:n ------ 实体 B ------ m:1 ------ 实体 C

要获得属于 A 的 B 的集合，我可以使用 ab 因为每个 B 只有一个 C，所以我想对实体 A 做*一些事情*，以便能够说 ac 来获得 C 的集合。在阅读了获取属性的 Apple 文档 (http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/CoreData/Articles/cdRelationships.html) 并在此处浏览了一些获取的属性问题后，这并没有这似乎不是正确的方法。

我可以使用获取的属性来执行此操作吗？还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T03:12:26.267

您可以使用`[a valueForKeyPath:@"b.c"]`. 这将交回`b.c`for each `b`in的值`a.b`。

更准确地说，当 an`NSArray`接收到一个`-valueForKey:`调用时，它会构造一个新数组，其中包含将其转发`-valueForKey:`到数组中每个元素的结果。这种行为也延续到了`-valueForKeyPath:`。因此，由于 keypath`b`是一个数组，因此 keypath`b.c`是数组中`c`每个值的键的`b`数组。

# java - Spring 3：无法处理表单

> ID：13925470
> 
> 赞同：0
> 
> 时间：2012-12-18T02:33:47.547
> 
> 标签：java, spring, spring-mvc

这*应该*很简单，但是第 2 天我无法弄清楚。我有一个 login.jsp，其中包含一个常规登录表单。我想基本上发布给自己，并让控制器根据表单是第一次被击中还是与数据一起提交来采取行动。

发生的情况是空白表单加载正常，但在提交用户名和密码后，我得到一个 HTTP 404。

```
<div id="messageBox">${loginMessage}</div>

<form id="form1" name="form1" method="post" action="/do/login" onsubmit="return validateForm()">
<table>
    <tr>
        <td>Username:</td>
        <td><input name="username" type="text" size=30 value="" /></td>
    </tr>
    <tr>
        <td>Password:</td>
        <td><input name="password" type="password" size=30 value="" /></td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td><input type="submit" name="submit" value="Login" /></td>
    </tr>
</table>
</form> 
```

这些是我的控制器映射：

```
@RequestMapping(value = "/login", method=RequestMethod.POST)
public ModelAndView login(@RequestParam("username") String username, @RequestParam("password") String password, Model model) {
    if (username == null || password == null) {
        // User has not specified all required fields
        String loginMessage = "Please complete all fields";
        return new ModelAndView("login", "loginMessage", loginMessage);
    } else {
        // User has specified username and password
        // Attempt authentication 
        Login login = new Login();
        isAuthenticated = login.authenticate(username, password);

        if (isAuthenticated) {
            // Authentication succeeded, return the options page
            return viewOptions(model);
        } else {
            // Authentication failed, return the login page
            String loginMessage = "Authentication failed";
            return new ModelAndView("login", "loginMessage", loginMessage);
        }
    }
}

@RequestMapping(value = "/login", method=RequestMethod.GET)
public ModelAndView login(Model model) {
    // Blank login screen
    String loginMessage = "&nbsp;";
    return new ModelAndView("login", "loginMessage", loginMessage);
 } 
```

在对此进行大量冲击后进行编辑......我也尝试了以下方法，得到了相同的结果......

```
 <%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<div id="messageBox">${loginMessage}</div>

<form:form modelAttribute="loginForm" id="form1" name="form1" method="post" action="/do/authenticate" onsubmit="return validateForm()">
<table>
    <tr>
        <td><form:label path="username">Username:</form:label></td>
        <td><form:input path="username" /></td>
    </tr>
    <tr>
        <td><form:label path="password">Password:</form:label></td>
        <td><form:input path="password" /></td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td><input type="submit" name="submit" value="Login" /></td>
    </tr>
</table>
</form:form> 
```

使用 LoginForm 支持对象：

包 com.cloudfordev.spring3;

```
public class LoginForm {

private String username;
private String password;

public String getUsername() {
    return username;
}

public void setUsername(String username) {
    this.username = username;
}

public String getPassword() {
    return password;
}

public void setPassword(String password) {
    this.password = password;
}
} 
```

以及以下控制器：

```
@Controller
@SessionAttributes
public class VMGeneratorController {

@ModelAttribute("loginForm")
public LoginForm getLoginFormObject() {
    return new LoginForm();
}

@RequestMapping(value = "/viewoptions", method = RequestMethod.GET)
public ModelAndView viewOptions(Model model) {

    Menu menu = new Menu();
    String optionsPage = menu.draw();
    return new ModelAndView("options", "body", optionsPage);
}

@RequestMapping(value = "/authenticate", method = RequestMethod.POST)
public ModelAndView login(@ModelAttribute("loginForm") LoginForm loginForm, BindingResult result) {
    boolean isAuthenticated = false;

    String username = loginForm.getUsername();
    String password = loginForm.getPassword();

    if (username == null || password == null) {
        // User has not specified all required fields
        String loginMessage = "Please complete all fields";
        return new ModelAndView("login", "loginMessage", loginMessage);
    } else {
        // User has specified username and password
        // Attempt authentication 
        Login login = new Login();
        isAuthenticated = login.authenticate(username, password);

        if (isAuthenticated) {
            // Authentication succeeded, return the options page
            String loginMessage = "Success";
            return new ModelAndView("login", "loginMessage", loginMessage);
        } else {
            // Authentication failed, return the login page
            String loginMessage = "Authentication failed";
            return new ModelAndView("login", "loginMessage", loginMessage);
        }
    }
}

@RequestMapping(value = "/login", method=RequestMethod.GET)
public ModelAndView login(Model model) {
    // Blank login screen
    String loginMessage = "&nbsp;";
    return new ModelAndView("login", "loginMessage", loginMessage);
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T03:59:06.430

也许您需要考虑 web-app context-root。假设您的 webapp 放置在[http://mydomain.com/myapp](http://mydomain.com/myapp)上，那么您需要发布到 /myapp/do/login 而不仅仅是 /do/login ？

如果以上不是解决方案，那么您需要跟踪您的 spring context.xml、web.xml、应用服务器规范配置（tomcat context.xml / jboss-web.xml）等，以确保您已获得所有管道地方

# python - scrapy中的Request返回什么类型的对象

> ID：13925472
> 
> 赞同：0
> 
> 时间：2012-12-18T02:34:15.030
> 
> 标签：python, scrapy

我想知道scrapy中request对象返回的是什么类型的对象

[http://doc.scrapy.org/en/latest/topics/request-response.html](http://doc.scrapy.org/en/latest/topics/request-response.html)

假设这是我的要求

```
myrequest = Request("http://www.example.com",  callback = self.mytest) 
```

现在我想知道`myrequest`变量中会有什么。

有什么方法可以覆盖 Request 对象，因为我想创建`MYREQUEST`返回响应对象以便我可以访问`resposne.body`，`resposne.url`

```
myvar =MYREQUEST("http://www.example.com",  callback = self.mytest) 
```

然后我可以访问`myvar.body`和`myvar.url`

我无法从 git hub 找到请求类定义，该类在哪里定义。我只能在那里找到请求文件夹，但找不到请求类 [https://github.com/scrapy/scrapy/tree/master/scrapy/http](https://github.com/scrapy/scrapy/tree/master/scrapy/http)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T02:42:50.457

`Request`是 a `class`，所以你没有在这里调用函数，真正发生的是你创建了一个`Request`对象并将其分配给`myreqeust`.

如[文档](http://doc.scrapy.org/en/latest/topics/request-response.html#passing-additional-data-to-callback-functions)`Scrapy`中所述：

> 回调函数将使用下载的 Response 对象作为其第一个参数来调用。

# c# - LINQ/DataTable 按多个条件分组并获得最大值

> ID：13925473
> 
> 赞同：2
> 
> 时间：2012-12-18T02:34:18.603
> 
> 标签：c#, linq, datatable, aggregate-functions

我有一个包含 8 个字段的 DataTable。我想返回另一个数据表，它将前 7 个字段分组并具有第 8 个字段的最大值。所有字段都是字符串，第 8 个是存储在字符串字段中的数字，例如“24”。

到目前为止我尝试过的代码：

```
public DataTable highestVersion(DataTable dt)
        {
            DataTable dtResult=dt.Clone();

            var query=from dtRow in dt.AsEnumerable()
                      group dtRow by new
                      {
                          b_r = dtRow["r"],
                          b_1 = dtRow["b_1"],
                          b_2 = dtRow["b_2"],
                          p_r = dtRow["p_r"],
                          p_1 = dtRow["p_1"],
                          p_2 = dtRow["p_2"],
                          p_f = dtRow["p_f"]
                      }
                          into maxVersion
                          select maxVersion.OrderByDescending(a => a["p_v"]).First();

            foreach (var result in query)
            {
                 dtResult.ImportRow(result);
            }
            return dtResult;
        } 
```

我的期望是应该按前 7分组，并通过调用`group dtRow by new{}`仅获取每个分组的最高元素。但这似乎并没有真正做任何事情。正在返回所有输入行。`p_v``OrderByDescending().First()`

编辑：我刚刚意识到问题所在。中的值`p_f`彼此不同，例如

```
datarow 1
--------
r: "abc"
b_1: "def"
b_2: "ghi"
p_r: "jkl"
p_1: "mno"
p_2: "pqr"
p_f: "stu_this"
p_v: "18"

datarow 2
--------
r: "abc"
b_1: "def"
b_2: "ghi"
p_r: "jkl"
p_1: "mno"
p_2: "pqr"
p_f: "stu_that"
p_v: "24" 
```

在这种情况下，我只想返回 DataRow 2，因为 24>18，并且能够检索该`stu_that`值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T02:45:25.747

更新了回应评论的答案：

```
var res = dt.AsEnumerable()
            .GroupBy(dtRow => new
            {
                b_r = dtRow["r"],
                b_1 = dtRow["b_1"],
                b_2 = dtRow["b_2"],
                p_r = dtRow["p_r"],
                p_1 = dtRow["p_1"],
                p_2 = dtRow["p_2"]
            })
            .Select(g => new
            {
                Group = g,
                Max = g.Max(r => r["p_v"])
            })
            .Select(g => new
            {
                Key = g.Group.Key,
                Max = g.Max,
                Values = g.Group
                          .Where(r => r["p_v"].Equals(g.Max))
                          .Select(r => r["p_f"])
            }); 
```

我想它可以在某种程度上进行优化，但至少这应该可以完成工作，当然，如果现在所有条件都知道的话。

# javascript - 在新的 Date() 中指定 Olson ID

> ID：13925476
> 
> 赞同：3
> 
> 时间：2012-12-18T02:34:22.850
> 
> 标签：javascript, timezone, google-apps-script, google-calendar-api

在[Google 的 createEventSeries 示例](https://developers.google.com/apps-script/class_calendar#createEventSeries)（如下所示）中，Date 值以“EST”结尾指定。但是，我想指定[*重复事件*的日期（请参阅此答案中的类型#4）](https://stackoverflow.com/a/3269325/1168342)，例如，“每周一晚上 9 点，即使 DST 更改。” 假设我可以确定哪一天是我经常性事件的第一个星期一。问题是我如何指定当天晚上 9 点应该考虑 DST 是否生效？

使用时区名称 (Olson ID) 来指定日期会很直观，例如，使用示例中的日期“2010 年 7 月 21 日 09:00:00 **America/Montreal** ”。如果我在 Google Apps 脚本中尝试，生成的日期在 1969 年有一个虚假值。

我如何`new Date()`在 Google Apps 脚本中指定 a 以便它了解我指定的 Olson ID，例如“America/Montreal”，而不是让我先验地知道日期是否实际上是“EST”或“EDT”？

```
// 下面的代码将向用户的默认日历添加一个每隔一天重复一次的事件
var cal = CalendarApp.getDefaultCalendar(); cal.createEvent("忙碌", new Date("2010 年 7 月 21 日 08:00:00 EST"), new Date("2010 年 7 月 21 日 09:00:00 EST"), CalendarApp.newRecurrence().addDailyRule( ).interval(2), {location:'Nap room'});`

```

ps 我找到了一种解决方法/hack，它依赖[于 GAS 中的 JavaScript new Date() 将继承脚本的时区的信息（参见第 4 个要点）](http://googleappsscript.blogspot.ca/2011/03/demystifying-time-zones-in-apps-script_21.html)。我可以将脚本的时区设置为我想要创建重复事件的时区，并且它似乎可以工作。但我不想依赖这个细节，因为它看起来很脆弱。

**编辑**

下面是一个小测试的输出，使用该变通方法向您展示它是如何工作的。请注意**GMT-0500 (EST)**如何更改为**GMT-0400 (EDT)**。

```
功能短测试（）{
  // DST 于 2012 年 3 月 10 日在“美国/蒙特利尔”（Olson ID）开始
  // 此脚本的项目属性显示时区（今天，2012 年 12 月 18 日）
  // "(GMT-05:00) 东部时间 - 蒙特利尔"
  Logger.log("日期 = " + (new Date("2013 年 3 月 9 日 21:00:00")));
  Logger.log("日期 = " + (new Date("2013 年 3 月 10 日 21:00:00")));
  Logger.log("日期 = " + (new Date("2013 年 3 月 11 日 21:00:00")));
}

```

**记录器输出**

```
日期 = 2013 年 3 月 9 日星期六 21:00:00 GMT-0500 (EST)
日期 = 2013 年 3 月 10 日星期日 21:00:00 GMT-0400 (EDT)
日期 = 2013 年 3 月 11 日星期一 21:00:00 GMT-0400 (EDT)

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T05:53:41.860

> 如何在 Google Apps 脚本中指定一个新的 Date() 以便它了解我指定的 Olson ID

您可以使用[Session.getTimeZone()](https://developers.google.com/apps-script/class_session#getTimeZone)或[Calendar#getTimeZone](https://developers.google.com/apps-script/class_calendar#getTimeZone)来获取一个可正确解释的字符串，该字符串分别表示脚本或日历的时区 ID。

另请参阅[Errors with Utilties.FormatDate](https://stackoverflow.com/questions/13882408/errors-with-utilties-formatdate)的答案，它指的是相关的基础[TimeZone Java doc](http://docs.oracle.com/javase/6/docs/api/java/util/TimeZone.html)。

您可以在 UTC 中指定您的核心日期/时间，然后通过 Utilities.formatDate 将其显示在您想要的时区，但这并不能回答您的问题。

对于您的问题的核心，问题是没有查找表或函数可以将 GMT 偏移量转换为时区字符串，除非您使用操作系统维护者维护的操作系统深处的那个。Javacript 的`Date`工作方式是使用本地计算机的时区（在我们的例子中，GAS 服务器的时区可以通过脚本的时区项目属性设置进行更改，如您所见），或者您可以直接在`Date`构造函数上指定 GMT 偏移量。

因此，在使用 Date() 构造函数创建日期/时间时，您需要 a) 选择要使用的 GMT 偏移量或 b) 接受脚本的项目设置时区。

# php - 搜索表单 Jquery 或 Java Script

> ID：13925477
> 
> 赞同：-1
> 
> 时间：2012-12-18T02:34:44.440
> 
> 标签：php, javascript, jquery, forms, search

我希望有人可以在我正在进行的项目中帮助我。我正在寻找有关如何在搜索表单上填充下拉列表的一些想法。我正在使用在 PHP MySQL 上运行的 Word Press 平台作为后端数据库。例如，表格将有美国各州，然后是县，然后是城市；

例如，如果您选择宾夕法尼亚州，它将在下一个单元格中自动选择宾夕法尼亚州县。你选择一个县然后它会对城市做同样的事情，所以第四个。您单击城市并点击“提交或搜索”的人，它将在您的网站中找到您为此目的选择的页面。如果您选择费城并点击搜索，则可以找到“费城”页面。

我在想 JavaScript 还是 JQuery？

谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T02:45:51.613

你所需要的只是一个ajax请求。试试这个模板，它不需要 jQuery

**Javascript**

```
 function ajax_request(destination_url, parameters, output_id) {

        if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else {// code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }

        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                document.getElementById(output_id).innerHTML = xmlhttp.responseText;
            }
        }

        xmlhttp.open("POST", destination_url, false);
        xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xmlhttp.send(parameters);

    } 
```

**HTML**

```
<select name="state" onselect="ajax_request(get_cities.php, this.value, city_list)" />
   <option value="1">Pensilvania</option>
   <option value="2">New York</option>
   <option value="3">Florida</option>
</select>

<select id="city_list" name="city" />
     &nbsp;
</select> 
```

您现在需要的是编写`get_cities.php`. 在此文件中，根据您使用 ajax 发布的州名，从 MySQL 表中获取国家/地区列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T02:38:46.393

您可能想查看 JQuerys [autocomplete](http://jqueryui.com/autocomplete/)。

将其附加到输入字段并定义一个函数来填充它。

# php - HTML 文件在一个文件中下载两次

> ID：13925481
> 
> 赞同：0
> 
> 时间：2012-12-18T02:35:03.693
> 
> 标签：php, symfony

我的控制器中有以下代码：

```
$finfo = finfo_open(FILEINFO_MIME_TYPE);
$file = 'myfile.html';
$contentType = finfo_file($finfo, $file);
finfo_close($finfo);

$response = new Response();
$response->headers->set('Content-Description', 'File Transfer');
$response->headers->set('Content-Type', $contentType);
$response->headers->set('Content-Disposition', 'attachment; filename='.basename($file));
$response->headers->set('Content-Transfer-Encoding', 'binary');
$response->headers->set('Expires', '0');
$response->headers->set('Cache-Control', 'must-revalidate');
$response->headers->set('Pragma', 'public');
$response->headers->set('Content-Length', filesize($file));

$response->setContent(file_get_contents($file));
$response->send();
return $response; 
```

当我在我的开发计算机（带有 PHP 5.3.15 的 Mac）上运行此代码时，我得到了我想要的文件及其内容。但是当我在我的测试服务器（Ubuntu 12.04 和 PHP 5.3.10）上运行它时，我仍然得到文件，但内容加倍（我在一个文件中得到两倍的文件）。

我找到了一种方法让它使用`$contentType = 'application/octet-stream';` 我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T18:16:25.537

我相信这两行做同样的事情（在 Symfony 中）

```
$response->send();
return $response; 
```

我建议删除 $response->send() 行。

# google-app-engine - 是否有已发布的 Google API 带宽规范？

> ID：13925483
> 
> 赞同：4
> 
> 时间：2012-12-18T02:35:53.987
> 
> 标签：google-app-engine, google-drive-api, google-cloud-storage, google-api-client, google-api-python-client

我正在开发一个 Google APP Engine 或者可能只是直接的 GCS 应用程序。客户端从摄像头捕获视频流，并希望有选择地将这些流式传输到云端。

可能的目标是：

*   Google App Engine 应用程序
*   谷歌云存储 (JSON)
*   谷歌云端硬盘 API
*   Google 环聊（包括环聊直播）

在考虑不同的架构选择（它们都有很好的特性）时，我们需要知道上传的最大速率是多少。

也许这是一个非常幼稚的问题，而且速度“比你能给出的数据还快”。如果是这样，那么这就是我所需要知道的，这很好。但如果没有，我很想了解单个连接客户端的吞吐量能力。

这是一个合理的问题吗？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:05:45.650

我会说这是相关的：

1.  高清视频流的速度[约为 4-8 Mbit/s](http://www.quora.com/What-is-the-bandwidth-requirement-to-stream-a-1080p-HD-movie-off-a-remote-server)。我很确定这些服务中的任何一个都可以处理。
2.  Google 服务（AppEngine、Drive 等）支持数亿用户。您的一些用户不会对整体性能产生影响。
3.  这些服务都没有真正的视频流 - 都是文件上传，完成后其他客户端可以开始下载它。
4.  Afaik Hangouts 不公开低级视频 API。用户需要使用他们的插件才能使用环聊。这意味着您不能直接上传您的视频。

# c# - 使用javascript取消所有事件

> ID：13925488
> 
> 赞同：2
> 
> 时间：2012-12-18T02:36:34.430
> 
> 标签：c#, javascript, asp.net

我有一个asp链接

```
<asp:LinkButton ID="next" CssClass="Button Large" runat="server" OnClick="Next_Click" OnClientClick="showBillingRequiredState(this)">Next</asp:LinkButton> 
```

单击它时，我想从 continue 取消页面，如果我的 javascript 返回 false，我希望它仅取消处理。现在我正在显示一个错误，但随后错误消失并且它没有粘住..某些东西导致它刷新并且我失去了我的错误。这是javascript，正如我提到的，它通过了我的所有条件并显示了div，但一秒钟后它消失了。

```
 function showrequired(evt) {
        var code = document.getElementById('<%=codelist.ClientID%>').options[document.getElementById('<%=codelist.ClientID%>').selectedIndex].value;
        var currentValue= document.getElementById('<%=statevalue.ClientID%>').value;
        var eDiv = document.getElementById('reqDiv');

        if (code == "US" && currentValue.trim() == '') {
            eDiv.style.display = 'block';
            return false;
        }
        else {
            eDiv.style.display = 'none';
        }

     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T02:43:42.657

尝试：

```
 OnClientClick=" return showBillingRequiredState(this)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T02:42:33.753

jquery event default 在这种情况下工作得很好

```
<script>
$("#<%= next.ClientID %>").click(function(event) {

 var countryCode = document.getElementById('<%=lstBillingCountryCode.ClientID%>').options[document.getElementById('<%=lstBillingCountryCode.ClientID%>').selectedIndex].value;
        var currentStateValue = document.getElementById('<%=txtBillingState.ClientID%>').value;
        var errorDiv = document.getElementById('reqBillingState');

        if (countryCode == "US" && currentStateValue.trim() == '') {
            errorDiv.style.display = 'block';
           event.preventDefault();
           //while stepping through this with firebug, it gets here fine but then it just gets ignored
        }
        else {
            errorDiv.style.display = 'none';
        }

});
</script> 
```

# c++ - 返回字符串时出现意外延迟

> ID：13925492
> 
> 赞同：0
> 
> 时间：2012-12-18T02:37:20.750
> 
> 标签：c++, function, return, delay

从函数返回字符串时会有延迟吗？

背景信息：我做了一个简单的程序，输入字母并输出这些字母的任何字谜。它从包含数千个单词的非常大的文本文件中检查单词。它基本上将每个单词放入一个向量中并检查它是否是字母的变位词，如果是则将其打印出来。它通常在 1-15 秒内完成，我对此感到满意。

当我尝试将其转换为一个返回作为字谜的字符串的函数时，出现了问题。即使它仍然以相同的速度“cout”这个词，但在这之后大约需要 20 秒才能真正返回字符串和 cout。

为什么实际返回一个字符串比仅仅输出它需要更长的时间，我该如何解决它？

如有必要，我可以发布我的代码；

编辑：我将项目作为 zip 文件上传，因为它有 15 个文件。

[http://www.mediafire.com/?c2gizpgcweg3iy4](http://www.mediafire.com/?c2gizpgcweg3iy4)

为看到我的代码中的车祸而感到震惊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:12:52.393

如果我要这样做，我想我会使用 an`multimap<string, string>`或 a `map<string, std::vector<string> >`（两者大致相同）。

我将从阅读单词列表开始。当我阅读每个单词时，我会创建一个副本并对该副本中的字母进行排序。然后我将排序/原始对插入到 [multi]map 中，排序版本作为键。

当我需要查找单词的字谜时，我会对该单词进行排序，在地图中查找排序版本，并获取与该排序版本匹配的所有原始单词。在那之后，你几乎可以对他们做任何你想做的事情。

就大小和速度而言，我希望一个文件有 39 行，并且能够以每秒约 3000 个单词的速度读取输入并打印出匹配的字谜（如果您喜欢以不同的方式看待它大约每秒 15 KB 的输入）。当然，这个估计（？）是基于我 6 岁的机器。使用较新的计算机，您应该可以做得更好。

由于所有单词都是在输入期间加载的，因此如果您返回单词而不是将它们打印出来，我不希望这会减慢到任何可察觉的程度（事实上，如果您不打印出来，我希望它会有所加快结果）。

# php - 在 HTML 中获取低于先前结果的 DOMXpath 结果

> ID：13925494
> 
> 赞同：3
> 
> 时间：2012-12-18T02:37:42.680
> 
> 标签：php, domdocument, domxpath

我正在尝试对外部网站的 HTML 进行排序，不幸的是，该网站的组织非常糟糕。数据可能如下所示：

```
<a class="title">Title One</a>
<a class="item">Item One</a>
<a class="item">Item Two</a>

<a class="title">Title Two</a>
<a class="item">Item One</a>
<a class="item">Item Two</a> 
```

我正在使用这样的 xpath 查询来获取标题：

```
$titles = $x->evaluate('//a[@class="title"]'); 
```

现在，我想列出标题及其下方的项目。不幸的是，这些元素都没有方便地包装在父 div 中，所以我不能只过滤父 div 中的所有内容。所以，我对这些项目使用这样的查询：

```
$titles = $x->evaluate('//a[@class="item"]'); 
```

理想情况下，我想做的只是检查当前标题元素下方的结果。所以，如果我循环并点击“标题一”，我只想检查出现在标题一和标题二之间的“项目”结果。有没有办法做到这一点？

在这里修改 HTML 不是一个选项。我知道这个问题有点荒谬，我的解释可能很糟糕，但如果有解决方案，它真的会帮助我！

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T03:12:05.083

您可以先找到标题元素，然后使用`->nextSibling()`向前移动：

```
$html =<<<EOM
<a class="title">Title One</a>
<a class="item">Item One</a>
<a class="item">Item Two</a>

<a class="title">Title Two</a>
<a class="item">Item One</a>
<a class="item">Item Two</a>
EOM;

$d = new DOMDocument;
$d->loadHTML($html);
$x = new DOMXPath($d);
foreach ($x->query('//a[@class="title"]') as $node) {
    echo "Title: {$node->nodeValue}\n";
    // iterate the siblings
    while ($node = $node->nextSibling) {
       if ($node->nodeType != XML_ELEMENT_NODE) {
            continue; // skip text nodes
        }
        if ($node->getAttribute('class') != 'item') {
            // no more .item
            break;
        }
        echo "Item: {$node->nodeValue}\n";
    }
} 
```

输出：

```
Title: Title One
Item: Item One
Item: Item Two
Title: Title Two
Item: Item One
Item: Item Two 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T03:24:22.170

您想选择元素的所有后续同级`<a>`元素，其中 the`class="title"`再次是`<a>`元素，但`class="item"`and 具有前面的第一个同级`<a>`元素，`class="title"`并且是您开始查找的第一个元素。

例如在 xpath 中，例如您正在寻找第一个`title`元素：

```
//a[class="title"][1] 
```

对于该元素，`item`元素如下：

```
//a[@class="title"][1]
    /following-sibling::a[
      @class="item" 
      and preceding-sibling::a[@class="title"][1] 
          = //a[@class="title"][1]
    ] 
```

如果你想在代码中使用它，你可以通过创建一个相对于 title 元素的表达式并使用`DOMelement::getNodePath()`：

```
$titles = $xp->query('//a[@class="title"]');
foreach ($titles as $title)
{
    echo $title->nodeValue, ":\n";
    $query = './following-sibling::a[@class="item" and 
              preceding-sibling::a[@class="title"][1] = ' .
              $title->getNodePath() . ']';
    foreach ($xp->query($query, $title) as $item)
    {
        echo ' * ', $item->nodeValue, "\n";
    }    
} 
```

输出：

```
Title One:
 * Item One
 * Item Two
Title Two:
 * Item Three
 * Item Four 
```

# javascript - 嵌套节点javascript中的插入符号索引

> ID：13925500
> 
> 赞同：0
> 
> 时间：2012-12-18T02:38:08.720
> 
> 标签：javascript, dom, range, selection

我试图在其中包含嵌套节点的可编辑 div 中找到插入符号的选择索引。

示例（ | 是光标）：

```
<div contenteditable="true">1234<span>5678|9</span></div> //Returns 4 
```

我想要 div 中所有字符的索引，所以上面的例子应该返回 8。

这就是我目前正在使用的。

```
var sel = window.getSelection();
    return sel.anchorOffset; 
```

我尝试过使用 commonAncestor 以及其他选择和范围方法，但我不确定如何找到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T02:50:07.550

遍历树！[这是一个演示。](http://jsfiddle.net/minitech/ybn6e/2/)

```
function getSelectionOffsetFrom(parent) {
    var sel = window.getSelection();
    var current = sel.anchorNode;
    var offset = sel.anchorOffset;

    while(current && current !== parent) {
        var sibling = current;

        while(sibling = sibling.previousSibling) {
            if(sibling.nodeType === 3) {
                offset += sibling.nodeValue.length;
            } else if(sibling.nodeType === 1) {
                offset += getContentLength(sibling);
            }
        }

        current = current.parentNode;
    }

    if(!current) {
        return null;
    }

    return offset;
}

function getContentLength(element) {
    var stack = [element];
    var total = 0;
    var current;

    while(current = stack.pop()) {
        for(var i = 0; i < current.childNodes.length; i++) {
            if(current.childNodes[i].nodeType === 1) {
                stack.push(current.childNodes[i]);
            } else if(current.childNodes[i].nodeType === 3) {
                total += current.childNodes[i].nodeValue.length;
            }
        }
    }

    return total;
} 
```

# java - 不使用 ContentProvider 的 SQLite 和 Java 图表和趋势分析

> ID：13925501
> 
> 赞同：1
> 
> 时间：2012-12-18T02:38:11.107
> 
> 标签：java, android, sqlite, android-contentprovider, trend

我正在尝试使用 SDK 构建 Android 应用程序并将 SQLite 用于数据库。该应用程序不会连接到服务器（仅客户端应用程序，其逻辑和数据库位于客户端）

是否仍然可以执行趋势分析并在数据上显示图表和图形？由于时间限制，我正在尝试寻找最简单的解决方案，是否可以为此使用 Java 和 SQLite 而无需设置内容提供程序？

非常感谢，

塞西莉亚

# c++ - 在 C++ 中实例化一个类：奇怪的语法错误

> ID：13925505
> 
> 赞同：6
> 
> 时间：2012-12-18T02:38:26.750
> 
> 标签：c++, compiler-construction

我以前从未在 C++ 中遇到过这种情况，但奇怪的是它仍然可以编译但没有达到我的预期。有人能告诉我它有什么作用吗？请查看代码，更多信息如下。

```
#include <iostream>
using namespace std;

class Test{
    public:
        Test();
};

Test::Test(){ cout << "ctor" << endl; }

int main(void){

    Test t();  // this compiles but doesn't call the constructor

    return(0);
} 
```

它会编译，但如果我尝试使用“t”它不会。我只依赖于构造函数功能，我的代码没有按预期工作。解决方案是去掉括号“Test t();” 到“测试 t;”。我的问题是“Test t();”中发生了什么 例如，编译器认为正在发生什么让它编译。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T02:40:59.967

这是[最令人头疼的 Parse](https://en.wikipedia.org/wiki/Most_vexing_parse)。基本上，根据 C++ 解析规则，你所拥有的不是类型`Test`为 named的对象`t`，而是一个函数声明，`t`它接受零参数并返回一个`Test`.

顺便说一句，clang++ 实际上识别出这种情况并发出警告，告诉你这可能不是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T02:49:49.933

这是一个常见的问题，被恰当地称为*最令人头疼的解析*。您的行`Test t();`可以通过以下两种方式之一进行解释。

1.  它可以声明一个`t`类型为`Test`
2.  它可以声明一个函数`t()`，该函数返回一个`Test`值并且不接受任何参数

不幸的是，C++ 标准要求编译器考虑第二种选择，这是一个非常令人烦恼的解析。

*修复*该解析的最简单方法是去掉括号并简单地声明您的变量：

```
Test t; // Will call the default constructor 
```

# java - java.lang.reflect.InvocationTargetException 编码器类 (org.owasp.esapi.reference.DefaultEncoder) CTOR 抛出异常

> ID：13925508
> 
> 赞同：2
> 
> 时间：2012-12-18T02:39:20.327
> 
> 标签：java, eclipse, security, esapi, invocationtargetexception

我是 ESAPIm 的新手，几天来我一直在寻找答案。我收到以下错误：

```
Attempting to load ESAPI.properties via file I/O.
Attempting to load ESAPI.properties as resource file via file I/O.
Not found in 'org.owasp.esapi.resources' directory or file not readable: C:\Documents and Settings\Administrator\Desktop\TEM - Workspace\testSecurity\ESAPI.properties
Not found in SystemResource Directory/resourceDirectory: .esapi\ESAPI.properties
Found in 'user.home' directory: C:\Documents and Settings\Administrator\esapi\ESAPI.properties
Loaded 'ESAPI.properties' properties file
Attempting to load validation.properties via file I/O.
Attempting to load validation.properties as resource file via file I/O.
Not found in 'org.owasp.esapi.resources' directory or file not readable: C:\Documents and Settings\Administrator\Desktop\TEM - Workspace\testSecurity\validation.properties
Not found in SystemResource Directory/resourceDirectory: .esapi\validation.properties
Found in 'user.home' directory: C:\Documents and Settings\Administrator\esapi\validation.properties
Loaded 'validation.properties' properties file
java.lang.reflect.InvocationTargetException Encoder class (org.owasp.esapi.reference.DefaultEncoder) CTOR threw exception 
```

希望尽快找到真正的答案。这是我使用 ESAPI 登录的代码：

```
/* throws SQLExceptions */
public void login(String username, String password)
{
    try
    {
        if(con == null)
            connect();
        if(con != null)
        {
            Codec ORACLE_CODEC = new OracleCodec();

            String query = "SELECT * FROM tblmember where username = '"+ ESAPI.encoder().encodeForSQL(ORACLE_CODEC, username) +"'AND password '"+ESAPI.encoder().encodeForSQL(ORACLE_CODEC, password)+"' FROM ";

            stm = con.createStatement();
            rs = stm.executeQuery(query);

            if(rs.next())
            {
                System.out.println(rs.getString("address"));
                System.out.println(ESAPI.encoder().encodeForSQL(ORACLE_CODEC,"address"));
            }
        }
        else
        {
            System.out.println("Not Connected!");
        }
    }
    catch(Exception ex)
    {
        System.out.println(ex.getMessage() + " login");
    }           
}

public static void main(String[] args) throws SQLException 
{
    SQLInjection sq = new SQLInjection();
    sq.login("username", "password");
} 
```

非常感谢您的回复：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:36:09.990

只是为您提供有关使用 API 的提示，请始终确保您阅读了包含的文档。在那里，您可以找到有助于您使用 API 的信息。我相信这是一个依赖问题。你可以[在这里查看](http://owasp-esapi-java.googlecode.com/svn/trunk_doc/2.0-rc6/site/dependencies.html)。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T03:43:10.793

您为此使用了错误的 API。Java 已经为您提供了正确的机制，以避免使用准备好的语句在查询中转义输入。ESAPI 可以用于验证输入，但您仍然不想连接字符串来执行此操作。坦率地说，我不喜欢 ESAPI 必须加载才能工作的所有库。

```
public void login(String username, String password)/*throws SQLExceptions*/{
    try{
        if(con == null)
            connect();
        if(con != null){

            String query = "SELECT * FROM tblmember where username = ? AND password = ? FROM usertable";

            stm = con.prepreStatment(query);
            stm.setString(1, username);
            stm.setString(2, password);
            rs = stm.executeQuery(query);

            if(rs.next()){
                System.out.println(rs.getString("address"));                    
            }
        }else
            System.out.println("No user found with that username and password.");
        }
    }catch(Exception ex){
        System.out.println(ex.getMessage() + " login");
    }

}
public static void main(String[] args) throws SQLException {
    SQLInjection sq = new SQLInjection();

    sq.login("username", "password");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T04:05:58.903

Hiro2K 是绝对正确的。OracleCodec 和其他类似的 SQL DB 编解码器并非旨在替代参数化类型（在 Java 中，使用 PrepareStatements）。相反，它们适用于那些（希望很少）您可能无法使用 PrepareStatement 的小众情况。一个示例可能是您必须调用某些第三方 API，您知道这些 API 在后台调用了 Oracle JDBC 驱动程序，但您不确定该 API 是否使用参数化类型。

但是，也就是说，我没有看到您在调用 ESAPI 时所做的任何事情，这会导致 DefaultEncoder CTOR 抛出 InvocationTargetException。这是我以前从未见过的。它可能与您的 ESAPI.properties 文件中的某些内容有关（例如，如果您尝试将 ESAPI 1.4 ESAPI.properties 文件与 ESAPI 2.0.x 一起使用）。

您可以发布您的异常堆栈跟踪，以便我看一下吗？你可能发现了一个错误。

谢谢，

-凯文墙

# java - 如何在 Lucene 中按长字段排序

> ID：13925514
> 
> 赞同：1
> 
> 时间：2012-12-18T02:40:35.397
> 
> 标签：java, sorting, lucene

```
//create
Document doc = new Document();
//get value from JDBC ResultSet
doc.add(new LongDocValuesField("LastContactTime", rs.getLong("LastContactTime")));
//....
//Search
Sort sort = new Sort(new SortField("LastContactTime",
                    SortField.Type.LONG, false));
TopDocs rs = scher.search(query, total, sort); 
```

结果排序不正确，为什么？我正在使用 Lucene4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:58:30.817

[LongDocValuesField在本质上与](http://lucene.apache.org/core/4_0_0-ALPHA/core/org/apache/lucene/document/LongDocValuesField.html)[LongField](http://lucene.apache.org/core/4_0_0-BETA/core/org/apache/lucene/document/LongField.html)有所不同。

看起来（根据：[http](http://www.searchworkings.org/blog/-/blogs/377217) ://www.searchworkings.org/blog/-/blogs/377217 ）您可以简单地通过调用 setUseIndexValues 对它们进行排序，例如：

```
SortField field = new SortField("LastContactTime",
                SortField.Type.LONG, false);
field.setUseIndexValues(true);
Sort sort = new Sort(sort); 
```

# android - Android：解析 XML 的问题

> ID：13925516
> 
> 赞同：0
> 
> 时间：2012-12-18T02:41:01.560
> 
> 标签：android, multithreading, xml-parsing

我正在尝试解析一个非常基本的 XML 文件，如下所示：

```
<xml>
  <customer>
    <CustID>10</CustID>
    <custvar1>10</custvar1>
    <custvar2>10</custvar2>
    <custvar3>10</custvar3>
  </customer>
</xml> 
```

我基本上没有得到任何结果。离开我做的最后一个应用程序，无论出于何种原因，它都不会给我任何错误。我今天花了 8 个小时在这上面，所以任何帮助都将不胜感激。我也不完全确定我在解析什么，我有一个大致的了解，但没有什么比这更可靠的了。

我把它分成两个线程，或者至少我相信我有。我只是在寻找所有这些代码出错的地方。任何帮助是极大的赞赏！！

我提前感谢大家的帮助！！

这是代码：

```
import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;

import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserException;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.util.Xml;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final Button getData = (Button) findViewById(R.id.getData);
    getData.setOnClickListener(new View.OnClickListener(){
        public void onClick(View v) {

            background();

            Toast toast = Toast.makeText(getApplicationContext(), "Toast 1", Toast.LENGTH_SHORT);
            toast.show();
        }
    });
}

public class Customer
{
    public final String custID;
    public final String var1;
    public final String var2;
    public final String var3;

    private Customer()
    {
        custID = null;
        var1 = null;
        var2 = null;
        var3 = null;
    }

    private Customer(String custID, String var1, String var2, String var3)
    {
        this.custID = custID;
        this.var1 = var1;
        this.var2 = var2;
        this.var3 = var3;

    }
}

private Customer readCustomer(XmlPullParser parser) throws XmlPullParserException, IOException
{
    parser.require(XmlPullParser.START_TAG, null, "customer");
    String custID = null;
    String var1 = null;
    String var2 = null;
    String var3 = null;

    while(parser.next() != XmlPullParser.END_TAG)
    {
        if (parser.getEventType() != XmlPullParser.START_TAG)
        {
            continue;
        }
        String name = parser.getName();
        if (name.equals("CustID"))
        {
            custID = readCustID(parser);
        } else if (name.equals("custvar1"))
        {
            var1 = readVar1(parser);
        } else if (name.equals("custvar2"))
        {
            var2 = readVar2(parser);
        } else if (name.equals("custvar3"))
        {
            var3 = readVar3(parser);
        } else
        {
            skip(parser);
        }

    }
    return new Customer(custID, var1, var2, var3);
}

private String readCustID(XmlPullParser parser) throws IOException, XmlPullParserException
{
    parser.require(XmlPullParser.START_TAG, null, "CustID");
    final String custID = readText(parser);
    parser.require(XmlPullParser.END_TAG, null, "CustID");

    final Handler handler;
    handler = new Handler();

    handler.post(new Runnable() {
        public void run()
        {
            //Display toast
            Toast toast = Toast.makeText(getApplicationContext(), "ID: " + custID, Toast.LENGTH_SHORT);
            toast.show();
        }
    });

    return custID;
}

private String readVar1(XmlPullParser parser) throws IOException, XmlPullParserException
{
    parser.require(XmlPullParser.START_TAG, null, "CustID");
    String var1 = readText(parser);
    parser.require(XmlPullParser.END_TAG, null, "CustID");
    return var1;
}

private String readVar2(XmlPullParser parser) throws IOException, XmlPullParserException
{
    parser.require(XmlPullParser.START_TAG, null, "CustID");
    String var2 = readText(parser);
    parser.require(XmlPullParser.END_TAG, null, "CustID");
    return var2;
}

private String readVar3(XmlPullParser parser) throws IOException, XmlPullParserException
{
    parser.require(XmlPullParser.START_TAG, null, "CustID");
    String var3 = readText(parser);
    parser.require(XmlPullParser.END_TAG, null, "CustID");
    return var3;
}

private String readText(XmlPullParser parser) throws IOException, XmlPullParserException
{
    String result = "";
    if (parser.next() == XmlPullParser.TEXT)
    {
        result = parser.getText();
        parser.nextTag();
    }
    return result;
}

private void skip(XmlPullParser parser) throws IOException, XmlPullParserException
{
    if (parser.getEventType() != XmlPullParser.START_TAG)
    {
        throw new IllegalStateException();
    }
    int depth = 1;
    while (depth != 0)
    {
        switch (parser.next()) {
        case XmlPullParser.END_TAG:
            depth --;
        case XmlPullParser.START_TAG:
            depth++;
            break;
        }
    }
}

public class XMLparser
{       
    public Customer parse(InputStream in) throws XmlPullParserException, IOException {
        try
        {
            XmlPullParser parser = Xml.newPullParser();
            parser.setInput(in, null);
            parser.nextTag();
            return readXML(parser);
        } finally {
            in.close();
        }
    }

    private Customer readXML(XmlPullParser parser) throws XmlPullParserException, IOException
    {
        Customer custData = new Customer();

        parser.require(XmlPullParser.START_TAG, null, "xml");
        while (parser.next() != XmlPullParser.END_TAG)
        {
            if (parser.getEventType() != XmlPullParser.START_TAG)
            {
                continue;
            }
            String name = parser.getName();

            //Look for customer tag
            if (name.equals("customer"))
            {
                custData = readCustomer(parser);
            }
            else
            {
                skip(parser);
            }
        }

        return custData;
    }
}

private InputStream downloadUrl(String urlString) throws IOException
{
    URL url = new URL(urlString);
    HttpURLConnection conn = (HttpURLConnection) url.openConnection();
    conn.setReadTimeout(10000);
    conn.setConnectTimeout(15000);
    conn.setRequestMethod("GET");
    conn.setDoInput(true);

    //start the query
    conn.connect();
    InputStream stream = conn.getInputStream();
    return stream;
}

private void background()
{
    new Thread(new Runnable() {
        public void run(){
            //Delcare handler to allow UI modifications
            final Handler handler;
            handler = new Handler();

            final TextView TextVar1 = (TextView) findViewById(R.id.custvar1);
            final TextView TextVar2 = (TextView) findViewById(R.id.custvar2);
            final TextView TextVar3 = (TextView) findViewById(R.id.custvar3);

            InputStream stream = null;
            String URL = "***removed***";

            final TextView TextError = (TextView) findViewById(R.id.error);

            Customer customer = new Customer(null,null,null,null);
            XMLparser xmlParser = new XMLparser();

            try
            {
                stream = downloadUrl(URL);
                customer = xmlParser.parse(stream);
            }
            catch (IOException e)
            {
                TextError.setText(getResources().getString(R.string.connection_error));
            }
            catch (XmlPullParserException e)
            {
                TextError.setText(getResources().getString(R.string.connection_error));
            }
            finally
            {
                try {
                    stream.close();
                } catch (IOException e) {
                    //
                }
            }

            final Customer data = customer;

            handler.post(new Runnable() {                   
                public void run()
                {
                    //Display toast
                    Toast toast = Toast.makeText(getApplicationContext(), "Toast 2", Toast.LENGTH_SHORT);
                    toast.show();

                    //Set Text Views to show data
                    TextVar1.setText(data.var1);
                    TextVar2.setText(data.var2);
                    TextVar3.setText(data.var3);
                }
            });

        }

    });

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T02:58:01.210

一开始，XML的常规格式应该是这样的，

```
 <?xml version="1.0"?>
   <customer>
    <CustID>10</CustID>
    <custvar1>10</custvar1>
    <custvar2>10</custvar2>
    <custvar3>10</custvar3>
  </customer> 
```

然后，您必须设置以下 TO-Do 程序来读取 xml

1.  创建文件流

2.  创建文档实例

3.  从源解析文件

4.  提取具有条件的特定节点

5.  读取并遍历步骤 4 中定义的所有节点。

你最好阅读[这个](http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/)以获得更多参考

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T04:30:40.787

嗨，试试这个代码，你肯定会得到输出..

```
public class TaplistingParser 
{
    public TaplistingParser()
    {

    }

    public String getXmlFromUrl(String url)
    {
        String xml=null;
        DefaultHttpClient httpclient=new DefaultHttpClient();
        HttpPost httpPost=new HttpPost(url);
        try 
        {
            HttpResponse httpresponse = httpclient.execute(httpPost);
            HttpEntity httpentity=httpresponse.getEntity();
            xml=EntityUtils.toString(httpentity);
        } 
        catch (ClientProtocolException e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
        catch (IOException e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
//      System.out.println("xml="+xml);
        return xml;
    }

    public Document getDomElement(String xml)
    {
        Document doc=null;
        DocumentBuilderFactory dbf= DocumentBuilderFactory.newInstance();
        dbf.setCoalescing(true);
        try 
        {
            DocumentBuilder db= dbf.newDocumentBuilder();

            InputSource is= new InputSource();
            is.setCharacterStream(new StringReader(xml));
            try {
                doc=db.parse(is);
            } catch (SAXException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        } 
        catch (ParserConfigurationException e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }       
        return doc;

    }

     public final String getElementValue( Node elem ) {
         Node child;
         if( elem != null){
             if (elem.hasChildNodes()){
                 for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
//                   if( child.getNodeType() == Node.TEXT_NODE  ){
                         return child.getNodeValue();
//                   }
                 }
             }
         }
         return "";
     }

     /**
      * Getting node value
      * @param Element node
      * @param key string
      * */
     public String getValue(Element item, String str) {     
            NodeList n = item.getElementsByTagName(str);        
            return this.getElementValue(n.item(0));
        }
} 
```

# python - 如何知道目录中的最后一个文件python

> ID：13925517
> 
> 赞同：1
> 
> 时间：2012-12-18T02:41:13.073
> 
> 标签：python, operating-system, directory

我正在尝试编写一个通过驱动器的脚本。该驱动器的文件夹结构类似于：

```
| Folder 1
+--->Folder 1.txt
+--->Folder 1.nfo
| Folder 2
+--->Folder 2.doc
+--->Folder 2.nfo
+--->Folder 2.xls
| Folder 3
+--->Folder 3.txt
+--->Folder 3.nfo 
```

我想要做的是读取目录中的每个文件，然后当我完成目录浏览时，我想将日志写入文本文件。我目前使用以下命令打开每个目录和文件：

```
logfile = open("log.txt")
for path, subdirs, files in os.walk(directory):
  txtfile = 0
  docfile = 0
  xlsfile = 0
  nfofile = 0
  for name in files:
    file = os.path.join(path, name)
    if file.endswith('.txt'):
      txtfile = 1
    elif file.endswith('.doc'):
      docfile = 1
    elif file.endswith('.xls'):
      xlsfile = 1
    elif file.endswith('.nfo'):
      nfofile = 1

    # if all files in a specific directory (Folder 1, Folder 2, etc) have been read, write line to log.txt 
```

我只是不确定如何检查最后一个文件。该日志将用于查看目录中缺少哪些文件。对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T02:45:38.620

您可以像这样列出目录中的所有文件：（取自[此处](https://stackoverflow.com/questions/3207219/how-to-list-all-files-of-a-directory-in-python)）

```
from os import listdir
from os.path import isfile, join
files = [ f for f in listdir(mypath) if isfile(join(mypath,f)) ] 
```

然后像这样检查你的文件：

```
if file == files[-1]: # do stuff 
```

或者，您可以迭代`files`以使其变得容易，并在完成后记录您的内容。我建议这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T05:27:20.783

看看这是否有效：

```
import os
import os.path as opath

for path, dirs, files in os.walk(directory):
    exts = {}
    for fn, ext in (opath.splitext(f) for f in files):
        exts[ext] = exts.get(ext, 0) + 1

    with open(opath.join(path, "extlog.txt"), "w") as log:
        log.write("\n".join(("%s|%s" % (k, v)) for k, v in exts.items()) + "\n") 
```

# iphone - 除了 iPhone 的 ASIHTTPRequest 之外，下载文件的最佳方式

> ID：13925518
> 
> 赞同：0
> 
> 时间：2012-12-18T02:41:15.227
> 
> 标签：iphone, ios, xcode, download

我想下载一个文件并显示下载速度。我用过`NSThreads`。`NSData`length 属性用于`NSData`显示下载的文件大小。但是在我的情况下，这不起作用。我试过`ASIHTTPRequest`了，但因为它不再被支持，我在当前的 XCode 中遇到了很多问题。所以我正在寻找可以与最新 Xcode 一起使用并得到支持的东西。

那么最好的下载方式是什么，以便我可以实际查看下载速度或下载的字节数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T04:09:23.483

AFnetwotking 是最好的选择，你可以参考下面的链接我的朋友。

[http://afnetworking.github.com/AFNetworking/](http://afnetworking.github.com/AFNetworking/)

快乐编码！！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T03:36:18.420

我建议查看[AFNetworking](https://github.com/AFNetworking/AFNetworking)，其`AFURLConnectionOperation`具有`setDownloadProgressBlock`.

如果你想自己动手，我会查看[URL Loading System Programming Guide](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/URLLoadingSystem.html#//apple_ref/doc/uid/10000165i)和[SimpleURLConnections Sample](https://developer.apple.com/library/ios/#samplecode/SimpleURLConnections/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009245)。后者`GetController`向您展示了如何使用[`NSURLConnection`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/occ/cl/NSURLConnection), 流式传输到持久存储，而不是大多数实现在写入磁盘之前将所有内容加载到内存中（这在下载大文件时很有用）。我根据这些参考编写了自己的小型下载器类，我想你会发现`NSURLConnection`它做得很好。

但我首先建议您查看 AFNetworking，看看这是否适合您。

# python - 用于测试显示的 Pygame 简单程序冻结

> ID：13925521
> 
> 赞同：2
> 
> 时间：2012-12-18T02:41:35.290
> 
> 标签：python, pygame

比我更有经验的人能给我一个线索，说明为什么下面的代码会冻结（挂起）窗口吗？它应该做的就是显示一个红色屏幕并在窗口名称中更新其 FPS。谢谢！:)

```
import pygame
from pygame.locals import *
from pygame import Color

class Game():
    """ Lets try to get this going by simple steps
    One by one. First step, lets figure how to make a class
    that can do the display stuff. Lord have mercy on my soul"""

    runGame = True

    def __init__(self, wi=256, hi=224, multii=3):
        """Initialization"""
        pygame.init()
        self.width      = wi*multii
        self.height     = hi*multii
        self.spritesize = 16*multii
        self.clock      = pygame.time.Clock()
        self.fps        = self.clock.get_fps()
        self.screen     = pygame.display.set_mode((self.width, self.height))

    def mainLoop(self):
        """Loop through the main game routines
        1\. Drawing  2\. Input handling  3\. Updating
        Then loop through it until user quits"""
        while self.runGame:
            self.clock.tick(12)
            self.draw()
            self.events()

    def events(self):
        """Time to handle some events"""
        events = pygame.event.get()
        for e in events:
            print e
            if (e.type == pygame.QUIT) or 
            (e.type == KEYDOWN and e.key == K_ESCAPE):
                self.runGame = False

    def draw(self):
        """Draw and update the main screen"""
        self.screen.fill(Color('red'))
        pygame.display.set_caption('Grid2\. FPS: '+str(self.fps))
        pygame.display.update()

game = Game()
game.mainLoop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T02:47:00.727

在 Game 类中，您`runGame`在函数之外声明，`__init__`并且不`self.runGame`用于减速。您也只在第一次创建 Game 对象时更新 FPS，因此它将保持相同的值。

通过以下方式解决此问题：

1.  在初始化代码中移动`runGame`减速并使其`self.runGame`
2.  添加调用 update `self.fps`。我已经在`draw`函数下添加了它

所以你的结束代码应该是这样的（评论包括我改变的地方）：

```
import pygame
from pygame.locals import *
from pygame import Color

class Game():
    """ Lets try to get this going by simple steps
    One by one. First step, lets figure how to make a class
    that can do the display stuff. Lord have mercy on my soul"""

def __init__(self, wi=256, hi=224, multii=3):
    """Initialization"""
    pygame.init()
    self.width      = wi*multii
    self.height     = hi*multii
    self.spritesize = 16*multii
    self.clock      = pygame.time.Clock()
    self.fps        = self.clock.get_fps()
    self.screen     = pygame.display.set_mode((self.width, self.height))
    self.runGame = True # I've moved the runGame decleration

def mainLoop(self):
    """Loop through the main game routines
    1\. Drawing  2\. Input handling  3\. Updating
    Then loop through it until user quits"""
    while self.runGame:
        self.clock.tick(12)
        self.draw()
        self.event()

def events(self):
    """Time to handle some events"""
    events = pygame.event.get()
    for e in events:
        print e
        if (e.type == pygame.QUIT) or 
        (e.type == KEYDOWN and e.key == K_ESCAPE):
            self.runGame = False

def draw(self):
    """Draw and update the main screen"""
    self.screen.fill(Color('red'))
    self.fps = self.clock.get_fps() # I reupdate the FPS counter
    pygame.display.set_caption('Grid2\. FPS: '+str(self.fps))
    pygame.display.update()

game = Game()
game.mainLoop() 
```

# c# - XDocument.Load “路径中有非法字符。” 错误，但是当我测试函数时有 XML

> ID：13925523
> 
> 赞同：7
> 
> 时间：2012-12-18T02:41:47.550
> 
> 标签：c#, xml, linq-to-xml

我在使用这行代码的路径中收到错误的非法字符

```
var doc = XDocument.Load(openBatch.GetOpenBatchSummary("xxxx", "xxxx", "xxxx", "", "", ""));
        var summary = from r in doc.Descendants("OpenBatchSummary")
                      select new
                      {
                          PaymentTypeID = r.Element("Payment_Type_ID"),
                          Return = r.Element("Return"),
                          Sale = r.Element("Sale"),
                      };
        foreach (var i in summary)
        {
            ListViewItem it = new ListViewItem(i.PaymentTypeID.ToString());
            it.SubItems.Add(i.Sale.ToString());
            it.SubItems.Add(i.Return.ToString());
            listView1.Items.Add(it);
        } 
```

但是当我通过这行代码测试时，有 xml 数据

```
var test = openBatch.GetOpenBatchSummary("xxx", "xxxx", "xxx", "", "", "");
        MessageBox.Show(test); 
```

这是输出：

![在此处输入图像描述](../Images/943f0d9e292387d4992090071147abb1.png)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-18T02:43:10.647

使用`XDocument.Parse`，不使用`XDocument.Load`。您正在尝试以这种方式从文件加载内容。

# php - 在 DOMXPath 中选择类名值

> ID：13925526
> 
> 赞同：-1
> 
> 时间：2012-12-18T02:42:01.793
> 
> 标签：php, html, dom, domdocument, domxpath

> **可能重复：**
> [如何使用 PHP 的 DOM 解析器从 XML 中提取节点属性](https://stackoverflow.com/questions/3993302/how-to-extract-a-node-attribute-from-xml-using-phps-dom-parser)

我有这样的 HTML：

```
 <tr class="calendar_row" data-eventid="48256">
   ...
   </tr> 
```

我只想选择值或`data-eventid`整个网页，但我不知道如何在 xpath 中执行此操作。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T02:52:09.207

您可以使用`@`来获取属性。

```
//assume $dom is a DOMDocument

$finder = new DOMXPath($dom);
//  //tr[@data-eventid] = all tr nodes that have a data-eventid attribute
//    /@data-eventid = the attribute node itself as opposed to the tr node
$nodes = $finder->query('//tr[@data-eventid]/@data-eventid');

foreach($nodes as $node) {
    echo $node->nodeValue."\n"; // echos your data-eventid value ie. 48256
} 
```

# ruby - 如何确定返回对象的内容？

> ID：13925527
> 
> 赞同：0
> 
> 时间：2012-12-18T02:42:01.297
> 
> 标签：ruby, ruby-on-rails-3, rubygems

我认为这很简单，但我已经尝试了好几天没有解决方案。我尝试过的一切都返回错误。希望能在这里得到一些帮助。

首先，我在这里使用这个 gemfile：

[https://github.com/ryanwkan/covetous](https://github.com/ryanwkan/covetous)

使用 VALID tagID(rwk#1242) 初始化后

@temp = Covetous::Profile::Career.new 'rwk#1242'

我得到一个这样的返回对象

[http://pastebin.com/CcW0aaLL](http://pastebin.com/CcW0aaLL)

对象的顶部如下所示：

```
#<Covetous::Profile::Career:0x000001014284c8 @url="http://us.battle.net/api/d3/profile/rwk-1242/", @response=#<HTTParty::Response:0x102e69ff8 parsed_response={"heroes"=>[{"name"=>"Ziyi", "id"=>10692899, "level"=>60, "hardcore"=>false, "paragonLevel"=>87, "gender"=>1, "dead"=>false, "class"=>"wizard", "last-updated"=>1354337248}, {"name"=>"Aerendil", etc ... 
```

如果我使用 INVALID tagID(invalid#9999) 进行初始化

@temp = Covetous::Profile::Career.new 'invalid#9999'

我得到一个像这样的返回对象：

```
#<Covetous::Profile::Career:0x00000100dfbcf8 @url="http://us.battle.net/api/d3/profile/invalid-9999/", @response=#<HTTParty::Response:0x100d96a88 parsed_response={"code"=>"OOPS", "reason"=>"There was a problem processing the request."}, @response=#<Net::HTTPOK 200 OK readbody=true>, @headers={"date"=>["Tue, 18 Dec 2012 02:30:00 GMT"], "server"=>["Apache"], "x-frame-options"=>["SAMEORIGIN"], "content-language"=>["en-US"], "vary"=>["Accept-Encoding"], "connection"=>["close"], "transfer-encoding"=>["chunked"], "content-type"=>["application/json;charset=UTF-8"]}>> 
```

每当给出无效标签时，我都需要闪烁错误消息。

问题是，我怎么知道我得到的是有效响应还是无效响应？

我试过检查键'code'或'heroes'的响应，但它只在键可用时才有效，否则我得到一个NoMethodError。有什么方法可以测试密钥的存在，返回真/假？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T02:51:38.113

如果在您正在寻找的情况下要求`code`或已知会给您一个 NoMethodError，只需将该调用包装在/块中并使用.`heroes``begin``end``rescue`

# android - ImageView 适合而不拉伸图像

> ID：13925530
> 
> 赞同：20
> 
> 时间：2012-12-18T02:42:29.343
> 
> 标签：android, android-layout, uiimageview, imageview

我是否有可能`ImageView`适合所有屏幕尺寸而不会拉伸图像？

我尝试了所有比例类型，将其更改为背景和 src `fill_parent`>`wrap_content`

但仍然。如果图像不小它只是看起来拉伸..

例子：

```
<ImageView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:scaleType="centerInside"
    android:adjustViewBounds="true"
    android:background="@drawable/background" />

<ImageView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:scaleType="fitXY"
    android:adjustViewBounds="true"
    android:background="@drawable/background" /> 
```

这 2 个适合宽度，但图像被拉伸.. 但是当我将其更改为 src 时，图像只是居中且很小。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-18T03:15:32.963

`ImageView`没有允许自动放大图像*并*保持其纵横比不变的内置比例类型。进行放大的唯一比例类型是`fitXY`，它不会尊重纵横比，正如您自己发现的那样。

话虽如此，这个话题已经被访问过不止一次了。查看针对类似问题提出的一些建议：

*   [ImageView 一维适合自由空间，第二个评估以保持纵横比](https://stackoverflow.com/questions/6202000/imageview-one-dimension-to-fit-free-space-and-second-evaluate-to-keep-aspect-rat)
*   [将图像放入 ImageView，保持纵横比，然后将 ImageView 调整为图像尺寸？](https://stackoverflow.com/questions/8232608/fit-image-into-imageview-keep-aspect-ratio-and-then-resize-imageview-to-image-d)
*   [调整 ImageView 的大小以适应纵横比](https://stackoverflow.com/questions/12400113/resizing-imageview-to-fit-to-aspect-ratio)

我肯定会更多，所以可能值得使用顶部的搜索框。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-12-28T09:04:24.957

您只需向 ImageView 添加一个属性即可

```
android:adjustViewBounds="true" 
```

# c - 在数组中取一个两位整数并存储为两个个位数整数

> ID：13925536
> 
> 赞同：-1
> 
> 时间：2012-12-18T02:43:37.627
> 
> 标签：c

`6`如果用户输入将其存储在`numbers[0]`索引中，然后乘以`2`它得到它的乘积，我可以解释我想要完成的最简单的方法，`12`但不是存储`12`在数组的`0`索引中，`productValue`而是需要将其存储为`productValue[0] = 1` `productValue[1] = 2`我我无法让它存储单个整数。我是 C 的新手，所以如果这看起来过于简单，请让我休息一下。我的代码如下：

```
#include <stdio.h>
#include <string.h>

int main()
{
    char numbers[17];
    char productValue[8];
    int i, x;
    printf("Please enter number\n");
    scanf("%s", numbers);

    for(int i = 1; i <= 16; i += 2)
    {
        for(int x = 0; x < 8; x++)
        {
            productValue[x] = (numbers[i] - '0') * 2; 
            printf("%d\n", productValue[x]);
            i += 2;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T02:53:30.470

使用 sprintf：

```
#include <stdio.h>
#include <string.h>

int main()
{
  char productValue[8];
  int i, x, number,result;
  printf("Please enter number\n");
  scanf("%d", &number);
  result = number * 2;
  sprintf(productValue, "%d", result);
  printf("%s\n", productValue);
  return 0;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T02:47:12.990

要存储整数，您可以简单地执行这样的循环，在移动到下一个数字之前检查每个数字。从本质上讲，获得数字 mod 10 将为您提供该地点的数字。第一行将排列数组以首先从最后一个数字开始，然后从那里继续。有一些错误检查和其他重要的东西，但我将把它作为练习留给用户。

```
int index=floor(log10(number));
while (number>0)
{
   productValue[index--]=number%10;
   number/=10;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T02:47:54.870

您需要添加进位。也不需要2个循环。`int i, x;`此行在您的代码中没有用，因为您在循环中重新定义了它们

```
char numbers[17];
char productValue[18];
int carry= 0;
...
for(int i=1;i<17;i++)
{
    productValue[i] = carry+(numbers[i] - '0') * 2; 
    carry = productValue[i]>=10?1:0;
    productValue[i] = productValue[i] %10;
}
productValue[17] = carry; 
```

# android - 使用 Android webview 处理 HTTP 基本身份验证

> ID：13925538
> 
> 赞同：1
> 
> 时间：2012-12-18T02:43:57.493
> 
> 标签：android, http

我正在使用 webview 加载需要基本 HTTP 身份验证的网页。我做了一些谷歌搜索，我知道可以通过使用 a`WebClientView`和覆盖来完成`onReceivedHttpAuthRequest`。

像这样

```
webView.setWebViewClient(new WebViewClient() {

        public void onReceivedHttpAuthRequest(WebView view,
        HttpAuthHandler handler, String host, String realm)        {
            // TODO Auto-generated method stub

      handler.proceed(username, password); //question is here,let user input these. 
        }
    }); 
```

我已经尝试过的是我使用登录活动来获取用户的输入并将参数传递回这个 webview 活动。

但这是最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T05:19:11.323

用 HttPget 和 HttpPost 试试这个方法

```
 CredentialsProvider credProvider = new BasicCredentialsProvider();

        credProvider.setCredentials(new AuthScope(AuthScope.ANY_HOST, 

        AuthScope.ANY_PORT,AuthScope.ANY_REALM),  new UsernamePasswordCredentials("admin", 
       "guest"));

        httpclient.setCredentialsProvider(credProvider);
        Log.w("SENCIDE", "Execute HTTP Get Request");
        HttpResponse response = httpclient.execute(httpget); 
```

这是 Httpget 中身份验证代码的示例代码。你可以试试这个你不想...

# php - 无线电组和多个插入

> ID：13925546
> 
> 赞同：2
> 
> 时间：2012-12-18T02:44:58.300
> 
> 标签：php, mysql

我有一个简单的表单，其中包含四个文本区域和一个单选组，每个文本区域旁边都有一个单选按钮。

```
<form action="" method="post" id="form">
<table width="35%" border="0" align="left" cellpadding="5">
  <tr>
    <td valign="top">Pathway</td>
    <td valign="top">Allowed
    <br />(One only)</td>
    <td valign="top">Comment</td>
  </tr>
  <tr>
    <td valign="top">2\. No action. See again</td>
    <td valign="top"><input type="radio" name="pathway" value="y" id="pathway_1" /></td>
    <td valign="top"><textarea name="pathway_comment[]" cols="45" rows="5"></textarea></td>
  </tr>
  <tr>
    <td valign="top">2\. See again</td>
    <td valign="top"><input type="radio" name="pathway" value="y" id="pathway_2" /></td>
    <td valign="top"><textarea name="pathway_comment[]" cols="45" rows="5"></textarea></td>
  </tr>
  <tr>
    <td valign="top">3\. Refer to ED</td>
    <td valign="top">   <input type="radio" name="pathway" value="y" id="pathway_3" /></td>
    <td valign="top"><textarea name="pathway_comment[]" cols="45" rows="5"></textarea></td>
  </tr>
  <tr>
    <td valign="top">4\. Refer to specialist</td>
    <td valign="top"><input type="radio" name="pathway" value="y" id="pathway_4" /></td>
    <td valign="top"><textarea name="pathway_comment[]" cols="45" rows="5"></textarea></td>
  </tr>
  <tr>
    <td colspan="3" valign="top"><input type="submit" name="define_pathways" id="submit" value="Add Pathways" /></td>
    </tr>
</table>
</form> 
```

每个文本区域 ($_POST['pathway_comment']) 的内容通过循环作为单独的记录插入到 MySQL 表中：

```
$pathway = $_POST['pathway'];
$pathway_comment = $_POST['pathway_comment'];
if(isset($_POST['define_pathways'])){ 
    for($i=0, $count = count($pathway_comment);$i<$count;$i++) {
        $comment = $pathway_comment[$i];
        $query_level_1 = "INSERT INTO pathway (pathway_pk,case_fk,level,pathway_allowed,comment)
          VALUES ('','$vcase','1','$pathway','$comment')";
        $result_level_1 = mysql_query($query_level_1, $connection) or die(mysql_error());
    } 
```

表结构：

```
`pathway_pk` int(4) NOT NULL AUTO_INCREMENT,
  `case_fk` int(3) NOT NULL,
  `level` int(1) NOT NULL,
  `pathway_allowed` char(1) NOT NULL DEFAULT 'n',
  `comment` text NOT NULL, 
```

现在在插入时，我想将`pathway_allowed`四个记录之一设置为“y”，而将其他记录保留为默认的“n”。我怎样才能做到这一点？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T02:49:52.417

您必须将单选框的值属性从“y”更改为“0”、“1”、“2”、“3”。

然后您应该将 PHP 代码更改为：

```
$pathway = intval($_POST['pathway']);

$pathway_comment = array();
foreach($_POST['pathway_comment'] as $comment) {
    $pathway_comment []= mysql_real_escape_string($comment);
}
if(isset($_POST['define_pathways'])){ 
for($i=0, $count = count($pathway_comment);$i<$count;$i++) {
    $comment = $pathway_comment[$i];
    $query_level_1 = sprintf(
        "INSERT INTO pathway (             
           pathway_pk,
           case_fk,
           level,
           pathway_allowed,
           comment
        ) VALUES (
           '',
           '$vcase',
           '1',
           '%s',
           '$comment')", $pathway === $i ? 'y' : 'n');

       $result_level_1 = mysql_query($query_level_1, $connection) or die(mysql_error());
    } 
```

# touch - ipad 上的 Kinetic JS touchstart/touchend 混淆

> ID：13925547
> 
> 赞同：2
> 
> 时间：2012-12-18T02:45:17.760
> 
> 标签：touch, kineticjs, touchstart

我无法调试这个问题：如果你在 iPad 上查看这个 jfiddle，你会看到你可以点击每个圆圈来更改上面的内容。当您按住一个圆圈时，您会看到它变成绿色（图像交换）。

[http://jsfiddle.net/SWj9m/](http://jsfiddle.net/SWj9m/)

现在，用你的手指按住一个，然后向上拖动你的手指，或者在按住前一个的同时用另一个手指单击另一个环。现在，iPad 触摸事件变得混乱，绿色（touchstart）事件留在原地而不是离开。我们最终有多个圆圈卡在绿色中，这意味着 touchend 事件从未发生过。

有人以前见过这个问题，或者知道如何进行调试吗？

此片段显示了 touchstart/end 事件

```
 applications.on('touchstart mouseover', function() {
                        writeMessage(messageLayer, 'touchstart applications circle');
                        this.setFill({ image: images.applicationshover});
                        layer.draw();
                    });
                    applications.on('touchend mouseout', function() {
                        writeMessage(messageLayer, 'Mouseup applications circle');
                        this.setFill({ image: images.applicationsimage});
                        layer.draw();
                    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T02:21:40.553

我几乎不是 kineticjs 的初学者，但我会尝试一下，因为这个问题已经坐在这里一段时间了。

不幸的是，触摸和鼠标事件并没有像您希望的那样相互平行。“touchstart”类似于“mousedown”而不是“mouseover”，“touchend”类似于“mouseup”而不是“mouseout”。我在自己的一些代码中遇到了类似的问题。

我对此的最佳想法是使用“mouseover”和“touchmove”，它们似乎是类似的。在任何环中的 mouseover/touchmove 或 mousedown/touchstart 上，将该环设置为绿色，并将*所有*其他环设置回蓝色。此外，在 mouseup/touchend 上将所有环设置为蓝色。

这仍然没有处理一个案例，当用户触摸外环，然后移到背景，然后结束触摸。您正在使用“mouseout”来处理桌面，但没有“touchout”可以为 ipad 做同样的事情。在类似情况的代码中，我为 window.touchend 添加了一个侦听器。我还没有尝试过，但我的另一个想法是有一个具有舞台大小的矩形的图层作为背景图层，并注意该对象上发生的触摸结束。

如果这不是解决这个问题的最佳方法，那么希望真正知道他们在说什么的人会介入让我直截了当！

# mongodb - 这个查询安全吗？

> ID：13925549
> 
> 赞同：-1
> 
> 时间：2012-12-18T02:45:28.913
> 
> 标签：mongodb

我有一个`{s:1}`关于集合 k 的索引，例如：

k中的数据喜欢：

`{ s:"aaa"} , {s:"bbb"} , {s:""}`

`{s:{$gt:""}}`找出 s 的长度大于 0 的每个项目是否安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T03:04:53.580

基于以下事实，我认为它是“安全的”：

*   按字典顺序，任何非空字符串都大于空字符串。
*   索引工作正常，所以性能应该没问题。

要测试索引是否正常工作，您可以执行

```
db.collectionName.find({s: {$gt: ""}}).explain() 
```

看到`"cursor" : "BtreeCursor s_1"`时，表示索引有效。

但是，您是否考虑修改应用程序逻辑并`s`在字段为空时删除？

*   `db.test.find({s: {$exists: false}}).hint({s: 1})`可以在这个查询中使用。它比自然更自然`$gt`。
*   您可以从[MongoDB 稀疏索引](http://docs.mongodb.org/manual/core/indexes/#sparse-indexes)的性能中受益。尤其是当您的大部分数据都为空时`s`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T03:00:28.780

使用 $ne 可能更合适

即“不等于”

# compiler-construction - 如何拦截编译器传递

> ID：13925555
> 
> 赞同：0
> 
> 时间：2012-12-18T02:46:08.993
> 
> 标签：compiler-construction, programming-languages, cpu-architecture, computer-architecture

我想为新架构制作一个编译器。我不确定这是多大的任务。据我所知，Flex/Bison 类工具可以免费进行几个编译步骤。

**我的目标是在编译器的代码生成过程中进行拦截**。那么，有什么免费的工具可以用于我的工作吗？大多数编译器都嵌入了所有不同的编译过程。

我不确定**LLVM**，但**我需要一个基本的小型简单编译器，其中所有不同的步骤都是分开的**。可能我会从**AST**部分操作到**代码生成**部分。

如果您对我可以使用的工具有任何想法，请提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T02:53:23.753

您没有指定您感兴趣的语言，但如果您想要使用简单的 C 编译器，您可能需要查看[tcc](http://bellard.org/tcc/)或[lcc 。](https://sites.google.com/site/lccretargetablecompiler/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T02:25:40.777

从 flex/bison 开始为新机器制作 C++ 编译器当然是可能的，但工作量很大。编译器中有很多语义分析代码没有被 flex 或 bison 覆盖。

另一种选择是将 gcc 重新定位到您的新机器。但是 gcc 有点大，需要大量研究来学习如何改变它。gcc 的优点是您在完成重定向后获得 c/c++/java 支持。

我认为@ChrisTodd 对 lcc 的建议很好，因为有一本书解释了如何将 lcc 编译器重新定位到新机器上。重新定位 lcc 后，您将只能编译 C 程序。

# ruby-on-rails - 在路由规范中指定默认格式

> ID：13925580
> 
> 赞同：7
> 
> 时间：2012-12-18T02:50:42.447
> 
> 标签：ruby-on-rails, rspec

我有以下 rspec 路由规范，但我需要`:defaults => { :format => 'json' }`在帖子中指定；我该怎么做？

规格：

```
it "should route to all-locations-nav" do
  {:post => locations_nav_path }.should route_to(:controller => "api", :action => "locations_nav")
end 
```

**编辑＃1**
所以玩，它看起来像这样修复它：

```
it "should route to all-locations-nav" do
  {:post => locations_nav_path }.should route_to(:controller => "api", :action => "locations_nav", :format => "json")
end 
```

但很好奇这是否记录在任何地方？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-09T04:30:17.183

只需像这样在规范中设置格式...

```
it "routes to #create" do
  expect(:post => "/post").to route_to("posts#create", :format => :json)
end 
```

**长解释...**

您看到的行为不是特定于 的`:format`，而是您在其中看到的符号`rake routes`和传递给的符号之间的关系`route_to`。

例如，鉴于您上面的示例，我希望您在运行时会出现以下情况`rake routes`：

`locations_nav POST /api/locations_nav(.:format) api#locations_nav`

和没有在响应中显式标记`:controller`，因为它们内置在 Rails 的 MVC 结构中，但是显式显示了，并将to传递给它。例如 ...`:action``rake routes``:format``:format``route_to`

同样，您可能会`:id`在输出中看到一些引用，`rake routes`可以通过将`:id`参数传递给`route_to`.

[在“rspec-rails”文档](http://rdoc.info/gems/rspec-rails/2.14.0/#route_to)中可以看到一些关于 RSpec 中路由的其他示例。

在内部，RSpec`route_to`对 Rails 的委托`assert_recognizes`，您可以在[Rails 文档](http://api.rubyonrails.org/classes/ActionDispatch/Assertions/RoutingAssertions.html#method-i-assert_recognizes)中看到记录。

# linux - static int __init console_setup(char *str)，_init 是干什么用的？在 C 中找不到

> ID：13925582
> 
> 赞同：-1
> 
> 时间：2012-12-18T02:50:49.857
> 
> 标签：linux

我是linux新手，对于函数static int __init console_setup(char *str)，它会返回int，函数名是console_setup，但是这里的_init是什么意思呢？我试图谷歌，但没有答案。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T03:10:55.217

它在 中定义和描述[`include/linux/init.h`](http://lxr.linux.no/#linux+v3.7.1/include/linux/init.h)。

# shell - >1../log/orientdb.log 和 1>>../log/orientdb.log 在 shell 脚本中是什么意思？

> ID：13925583
> 
> 赞同：0
> 
> 时间：2012-12-18T02:50:52.950
> 
> 标签：shell

我目前正在定制一个用于启动名为 OrientDb 的数据库的 shell 脚本。

这些是相关脚本中的相关行：

```
sudo -u $ORIENTDB_USER sh -c "cd \"$ORIENTDB_DIR/bin\"; /usr/bin/nohup ./server.sh 1>../log/orientdb.log 2>../log/orientdb.err &"

sudo -u $ORIENTDB_USER sh -c "cd \"$ORIENTDB_DIR/bin\"; /usr/bin/nohup ./shutdown.sh 1>>../log/orientdb.log 2>>../log/orientdb.err &" 
```

我知道该脚本 sudos 到定义的用户`ORIENTDB_USER`并运行一些命令。我也明白`&`强制脚本在后台运行。

但是，在调用`server.sh`and`shutdown.sh`脚本时，会附加`1>../log/orient.err`and `1>>../log/orientdb.err`。

是什么`1>`意思`1>>`？两者有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T02:53:24.353

1> 将标准输出重定向到日志文件， 1>> 附加到日志文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T02:53:33.050

1 > 重定向标准输出并将其写入一个名称与提供的参数类似的文件。

2 > 对标准错误也会做同样的事情。

1 >> 这样做但附加到一个文件而不是重写它，如果它已经存在的话。

| 将输出传递给下一个进程。

如果您想了解更多信息，请搜索 shell 重定向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T02:56:28.553

`1`重定向标准输出。`>`意思是“如果不存在则在此处创建文件，或者如果存在则擦除文件”。`>>`意思是“附加到当前文件”。

因此，`1> ../log/orient.err`将标准输出写入`../log/orient.err`，擦除具有该名称的任何先前文件。`1>> ../log/orientdb.err`将标准输出写入同一个文件，但保留文件并附加到文件末尾。

# matlab - 优化代码——计算欧几里得距离 Sift

> ID：13925584
> 
> 赞同：4
> 
> 时间：2012-12-18T02:51:00.437
> 
> 标签：matlab, sift

首先，我非常了解 Sift 中特征匹配背后的理论，我的问题是一个技术问题

所以我尝试计算第一个图像的向量和第二个图像的所有向量之间的欧几里得距离，然后如果最大的两个值之间的比率大于某个阈值，则匹配

这是我的代码

```
distRatio = 0.5;   
for i = 1:size(des1,1)
    eucl = zeros(size(des2,1));
    for j=1:size(des2,1)
           eucl(j) = sqrt(sum((des1(i,:)-des2(j,:)).^2));
    end;

    [vals,indx] = sort(eucl);        
    if (vals(1) < distRatio * vals(2))
      match(i) = indx(1);
    else
      match(i) = 0;
    end
end; 
```

问题是它很慢，我知道原因，因为嵌套循环很慢，**有没有办法优化它**？对不起，我对 Matlab 语法的经验很差。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T03:35:43.760

在计算欧几里德距离时，您经常可以使用的一个巧妙技巧是修改您的算法以使用*平方*欧几里德距离 - 这消除了不必要的昂贵的平方根函数，例如，如果您只想找到最大的或一组中的最小距离。

所以内循环可能变成：

```
distSquared(j) = sum((des1(i, :) - des2(j, :)).^2); 
```

在你的情况下，改变的棘手事情是这条线

```
if (vals(1) < distRatio * vals(2)) 
```

这相当于

```
if (vals(1)^2 < (distRatio * vals(2))^2) 
```

或者

```
if (vals(1)^2 < (distRatio^2) * (vals(2)^2)) 
```

如果您从而`distSquared`不是获取值`eucl`，那么您可以使用

```
if (valSquared(1) < (distRatio^2) * valSquared(2)) 
```

最后，您可以通过像这样重写减法来取出内部循环：

```
countRowsDes2 = size(des2, 1); % this line outside the loop

%... now inside the loop
    des1expand = repmat(des1(i, :), countRowsDes2, 1); % copy this row

    distSquared = sum((des1expand - des2).^2, 2);      % sum horizontally 
```

我曾经在哪里`repmat`复制 row `des1(i, :)`，并`sum`使用第二个维度参数在水平维度上工作。

## 把它们放在一起

```
distRatio = 0.5;
distRatioSq = distRatio^2; % distance ratio squared
countRowsDes1 = size(des1, 1); % number of rows in des1
countRowsDes2 = size(des2, 1); % number of rows in des2

match = zeros(countRowsDes1, 1); % pre-initialize with zeros

for i = i:size(des1, 1)
    des1expand = repmat(des1(i, :), countRowsDes2, 1); % copy row i of des1
    distSquared = sum((des1expand - des2).^2, 2);      % sum horizontally

    [valsSquared, index] = sort(distSquared);

    if (valsSquared(1) < distRatioSq * valsSquared(2))
        match(i) = index(1);
    % else zero by initialization
end 
```

# c++ - 转发 decltype 检测 - C++ 11

> ID：13925587
> 
> 赞同：0
> 
> 时间：2012-12-18T02:51:42.780
> 
> 标签：c++, c++11, g++, decltype

我想用`decltype`虚拟方式将方法的返回类型绑定到这样的变量类型

```
#include <iostream>

decltype(a) foo()                     // my point
{
  return 4.3f;
}

int main(int argc, char* argv[])
{
  auto a = 5.5f;
  std::cout << foo() << std::endl;
  return(0);
} 
```

`g++-4.7.2`但是你可以很容易地猜到，这段代码不能在 Linux 上编译。

有解决方法吗？我知道`auto`，但这不是我想要使用的（我不想`auto`用于返回类型`foo()`）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T02:57:19.170

你可以使用模板

```
template <typename T>
T foo()
{
    return 4.3f;
} 
```

并使用`foo<float>()`

您也可以在函数之前使用`decltype`if声明，如下所示：`a`

```
auto a = 5.3f;

decltype(a) foo()
{
   return 4.3f;  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T03:09:12.380

你的目标到底是什么？可以将变量传递给函数吗？如果不是，该函数如何知道要使用什么类型？如果您可以将变量传递给函数，则可以使用模板：

```
template<typename T>
T foo(T) {
    return 4.3f;
} 
```

现在你可以这样称呼它

```
std::cout << foo(a) << std::endl; 
```

这里的变量仅用于获取其类型。如果你不想传入变量，那么你需要直接提供类型，例如

```
template<typename T>
T foo() {
     return 4.3f;
}

std::cout << foo<decltype(a)>() << std::endl; 
```

但这当然是非常丑陋的。

现在，如果您愿意使用宏，您可以稍微简化一下：

```
template<typename T>
T _foo() {
    return 4.3f;
}
#define foo() _foo<decltype(a)>()

std::cout << foo() << endl; 
```

但是当你调用 foo() 时，这当然会硬编码必须在范围内的变量的名称。

* * *

这里的根本问题是函数不能隐式使用变量的类型，因为函数是首先声明的。因此，如果模板不是一个好的解决方案，那么唯一的选择就是在函数和变量都可以访问它的地方声明类型。这可以通过以下方式完成`typedef`：

```
typedef float atype;

atype foo() {
    return 4.3f;
}

int main() {
    atype a = 5.5f;
    std::cout << foo() << std::endl;
} 
```

或者，您可以简单地决定将返回值`foo()`视为所讨论类型的权限：

```
float foo() {
    return 4.3f;
}

int main() {
    decltype(foo()) a = 5.5f;
    std::cout << foo() << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T04:48:28.520

使用 C++1y，您将能够做到这一点：

```
#include <iostream>

auto foo()
{
  return 4.3f;
}

int main(int argc, char* argv[])
{
  auto a = 5.5f;
  std::cout << foo() << std::endl;
  return(0);
} 
```

您已经可以使用 lambda 函数来完成。

这是在 g++-4.8 中使用 std=c++1y 标志实现的。

我在这里回答：[C++11 自动和函数返回类型](https://stackoverflow.com/questions/12052474/c11-auto-and-function-return-types/12080646#12080646)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T02:59:35.027

这就是你所追求的吗？它应该编译：

```
#include <iostream>

const float foo() 
{
  return 4.3f;
}

int main(int argc, char* argv[])
{
  decltype(foo()) a;
  a = foo();
  std::cout << a << std::endl;
  return(0);
} 
```

# bash - 如何使用 bash 运行命令、获取输出和输入命令

> ID：13925588
> 
> 赞同：0
> 
> 时间：2012-12-18T02:51:44.020
> 
> 标签：bash, shell, command

我将如何使用 shell 脚本运行命令（这是一个命令行 Java 应用程序）、读取其输出并在其中输入输入。那可能吗？我听说过一个叫做 GNU Screen 的东西，但是当我用谷歌搜索它时，它看起来对我没有帮助？我很困扰。*所以*基本上我需要运行一个命令，获取它的输出，发送它的输入。注意：你需要输入'exit'来停止命令，*所以*是的。我在这里很困惑。给我指点 GNU Screen 的教程和解释或者给我看一些东西会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T02:59:49.247

使用输入输出重定向。例如，

```
java yourprog args > output.txt 2> erroutput.txt < input.txt 
```

input.txt 将包含您将在命令行中输入的字符串。System.out.println 将转到 output.txt，System.err.println 将转到 erroutput.txt

Screen 只是一个虚拟终端模拟器，它允许您从单个 shell 屏幕拥有多个 shell。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T02:57:10.473

如果您不需要等待输入`exit`：

```
output=$(echo "exit" | java prog) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T03:33:33.820

听起来您正在寻找的是**[Expect](http://expect.sourceforge.net/)**，“[...] 一种用于自动化交互式应用程序的工具，例如 telnet、ftp、passwd、fsck、rlogin、tip 等。” 使用[Tcl](http://www.tcl.tk/)脚本语言。

但是，**如果您发送给程序的任何命令都不依赖于**同一程序的先前输出，那么 Bash 本身可能会运行得很好；只需使用临时文件和 I/O 重定向（如 Usman Saleem 的回答）：

*   将命令列表保存到第一个文件中；和
*   将程序的标准输入重定向到该文件；和
*   将标准输出重定向到第二个文件。

`read`内置命令可能对读取生成的输出文件很有用。

**GNU screen**只是一个“终端多路复用器”程序，a) 允许您通过单个调制解调器或 SSH 连接拥有多个终端“窗口”，并且 b) 允许您在与服务器断开连接后保持程序运行。这不是您正在寻找的程序。

**我建议不要做的一件事**是让你的 shell 脚本既生成程序的输入又实时接受程序的输出。数据将被捕获在 stdio 输出缓冲区中，并且可能发生死锁。这就是创建 Expect 的原因。

# ios - 在设备上安装 Release 版本的最快方法是什么？

> ID：13925590
> 
> 赞同：11
> 
> 时间：2012-12-18T02:52:23.240
> 
> 标签：ios, xcode, build, installation, release

让 Xcode 将我的应用程序的 Release 版本安装到设备上的最简单/最快的方法是什么？现在我创建了一个 ipa，然后手动安装它。我可以创建一个新方案来做到这一点吗？另外，我希望该应用程序只是安装到设备上 - 而不必运行它。

谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-18T02:58:30.983

您应该能够进入您的编辑方案首选项窗格。您可以在此处将构建配置更改为发布。我建议创建一个重复的方案，您可以在其中构建发布版本。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-18T03:39:31.727

@atreat 的回答通常可能是一个更好的主意，但我现在不在我的 Mac 上进行测试......

我刚刚在 Xcode 中点击了 Profile 按钮/菜单。默认情况下构建 Release 配置，将其放在设备上，然后启动 Instruments。只需退出或忽略 Instruments 即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T03:46:53.627

> 另外，我希望该应用程序只是安装到设备上 - 而不必运行它。

然后构建并运行并点击停止。现在它已安装。

# apache - 我的 .htaccess 看起来不错，但它不起作用

> ID：13925593
> 
> 赞同：0
> 
> 时间：2012-12-18T02:52:30.297
> 
> 标签：apache, .htaccess

几天来，我一直把头撞在墙上，我知道我离得更近了，但我不知道如何让这个 .htaccess 工作。

**我有这个链接：**

```
http://rebateninja.com?page=reviews&id=B005KMDV9A&review=Shark-Navigator-Professional-Lift-Away-Vacuum-Clea 
```

**我想这样称呼它：**

```
http://rebateninja.com/reviews/B005KMDV9A/Shark-Navigator-Professional-Lift-Away-Vacuum-Clea 
```

**我的 htacess 有这个：**

```
RewriteEngine On
RewriteRule ^([^/\.]+)/([^/\.]+)/([^/\.]+)$ index.php?page=$1&id=$2&review=$3 [L] 
```

**但是页面充满了 404 错误，试图指向不存在的资源，如下所示：**

```
http://rebateninja.com/reviews/B005KMDV9A/css/960.css 
```

代替

```
http://rebateninja.com/css/960.css 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T05:38:44.690

您的链接是相对的而不是绝对的。这意味着浏览器会尝试猜测基本 URI 是什么以及浏览器访问的 URL 何时看起来像：

```
http://rebateninja.com/reviews/B005KMDV9A/Shark-Navigator-Professional-Lift-Away-Vacuum-Clea 
```

这意味着内容中的任何相对 URL 都将`/reviews/B005KMDV9A/`附加基础，所以如果相对链接看起来像：

```
<link rel="stylesheet" type="text/css" href="css/960.css"> 
```

生成的请求是针对`http://rebateninja.com/reviews/B005KMDV9A/css/960.css`. 您需要使用绝对链接或添加：

```
<base href="/"> 
```

在页面的标题中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T02:56:08.327

是的，这是真的，你`.htaccess`是对的......

可能是，改变`[L]`和`[NC]` 你的 ocde 看起来像这样：

```
RewriteEngine On 
RewriteRule ^([^/.]+)/([^/.]+)/([^/.]+)$ index.php?page=$1&id=$2&review=$3 [NC] 
```

希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T03:06:12.347

查看您的实际站点，指向您的 css 文件的链接是`css/960.css`在当前文件夹中查找它们，`http://rebateninja.com/reviews/B005KMDV9A/`而不是在根目录中。

检查这篇文章 - [https://stackoverflow.com/a/3900018/1791606](https://stackoverflow.com/a/3900018/1791606)

# c - 带有 bcc5 的 8086/386 asm：从 asm proc 返回 long int

> ID：13925605
> 
> 赞同：0
> 
> 时间：2012-12-18T02:53:36.100
> 
> 标签：c, assembly, long-integer, x86-16, borland-c++

尝试通过 eax 从 asm proc 返回一个 long int，然后尝试通过 dx:ax。两者都对我不起作用，因为 C printf 打印的数字与所需的 320L 不同。

x.asm:

```
.model SMALL
.stack 100h
.code
.386
; extern int get_buffered_long(long int **arr, int num_of_elements, int i);
;                                   [BP+4]      [BP+6]              [BP+8]
PUBLIC _get_bufferred_long 
_get_bufferred_long PROC NEAR
        push BP
        mov BP,SP
        push SI
        push DI
        push BX
        call locate_slot            
        ;mov EAX, DWORD PTR [DI]     ;something here doesn't work. the way i return a long int to borland C, or other issue.
        mov ax,[DI]
        mov dx,[DI+2]
        pop BX
        pop DI
        pop SI
        pop BP
        ret
_get_bufferred_long ENDP
; extern void set_bufferred_long(long int *arr[], int buff_size, int i,long int value);
;                                       [BP+4]      [BP+6]      [BP+8]      [BP+10]
PUBLIC _set_bufferred_long
_set_bufferred_long PROC NEAR
    push BP
    mov BP,SP
    pushad
    call locate_slot
    mov EAX,[BP+10]
    mov DWORD PTR [DI],EAX
    popad
    pop BP
    ret
_set_bufferred_long ENDP
; helper function that makes DI point to the slot wanted.
locate_slot PROC NEAR
    calc_slot:
        mov SI,[BP+4]
        mov AX,[BP+8]
        mov BX,[BP+6]
        xor DX,DX
        div BX
    locate_slot_in_array:
        shl AX,1
        add SI,AX
        mov DI,[SI]
        shl DX,2
        add DI,DX
        ret
locate_slot ENDP
end 
```

yc:

```
#include "stdio.h"
#include "stdlib.h"

extern int get_bufferred_long(long int**,int,int);
extern void set_bufferred_long(long int**,int,int,long int);

int main(){
    long int **arr;
    int i,j,n,m;
    n = 5;
    m = 4;
    arr=(long int**)malloc(n*sizeof(long int*));
    for(i=0; i < n; i = i + 2) arr[i] = malloc( m*sizeof(long int));
    for(i=1; i < n; i = i + 2) arr[i] = malloc( m*sizeof(long int));
    for(i=0; i < n; i++)
        for(j=0; j < m; j++) 
            set_bufferred_long(arr, m, i*m+j, i*100+j*10);

    printf("get_bufferred_long(arr, %d, %d) = %ld\n", m, 14, get_bufferred_long(arr,m, 14));
    return 0;
} 
```

set 函数有效（数组看起来与需要的完全一样）。get 函数也可以工作，它在 asm 中获取 320L，但是当传递给 C 时，出现了问题。

没有编译错误或警告。borland c++ 5.02

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T03:43:38.863

好吧，在 386 bcc 上确实在 16 位模式下使用 AX:DX；不知道32位。

但是看看你的代码！

```
 ...
    mov dx,[DI+2]
    mov ax,[DI]
    mov dx,[DI+2]
    pop DX
    ... 
```

您正在使用结果加载 DX 寄存器，然后将堆栈弹出到其中，吹走它的值。DX 不必在简单的过程中通过 push/pop 来保存（例如，仅在 DOS ISR 中）。

**编辑**

好的，我看到您在代码中解决了上述问题。下一个问题很可能是您要声明

```
/* After execution, return value is assumed to be in AX. */ 
extern int get_bufferred_long(long int**,int,int); 
```

然后期待一个 32 位的返回值。您提到`printf`正在推动`AX`登记。这意味着您正在编译为 16 位代码。如果您想要 16 位代码中的 32 位返回值，则必须声明返回值`long`并将其放在`DX:AX`.

```
/* After execution, return value is assumed to be in DX:AX reg pair. */
extern long get_bufferred_long(long int**,int,int); 
```

`-S`您可以通过使用该选项将一个小程序编译为汇编来验证正确的返回约定。尝试例如：

```
long val(void) { return 0x12345678L; } 
```

查看生成的程序集，了解编译器如何返回这个 long 值。

# java - 创建仅打印到一行的 XML

> ID：13925608
> 
> 赞同：8
> 
> 时间：2012-12-18T02:54:36.857
> 
> 标签：java, xml, dom

我创建了一些将映射写入 XML 的代码。它似乎正在工作，但文件打印时没有新行。因此，在任何 XML 编辑器中，它都只有一行。我怎样才能让它为每个孩子打印到一个新行？

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();
Document doc = db.newDocument();

Element vdata = doc.createElement("vouchdata");
doc.appendChild(vdata);

for (Entry<String, String> entry : vouchMap.entrySet()) {
    Element udata = doc.createElement("vouch");

    Attr vouchee = doc.createAttribute("name");
    vouchee.setValue(entry.getKey());
    udata.setAttributeNode(vouchee);

    Attr voucher = doc.createAttribute("vouchedBy");
    voucher.setValue(entry.getValue());
    udata.setAttributeNode(voucher);

    vdata.appendChild(udata);
}

// write the content into xml file
TransformerFactory transformerFactory = TransformerFactory.newInstance();
Transformer transformer = transformerFactory.newTransformer();
DOMSource source = new DOMSource(doc);
StreamResult result = new StreamResult(new File("vouchdata.xml"));

// Output to console for testing
// StreamResult result = new StreamResult(System.out);

transformer.transform(source, result); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-18T02:58:01.473

我用

```
Transformer tf = TransformerFactory.newInstance().newTransformer();
tf.setOutputProperty(OutputKeys.INDENT, "yes");
tf.setOutputProperty(OutputKeys.METHOD, "xml");
tf.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "4"); 
```

这似乎工作得很好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-18T02:59:57.567

如果它是生成的 xml 的格式，那么考虑答案

[Java：将 DOM 写入 XML 文件（格式问题）](https://stackoverflow.com/questions/161462/java-writing-a-dom-to-an-xml-file-formatting-issues)

# google-ads-api - 将 TextAd 与特定关键字相关联

> ID：13925609
> 
> 赞同：0
> 
> 时间：2012-12-18T02:54:38.940
> 
> 标签：google-ads-api

我是 Adwords 的新手，从我看到的示例中，看起来您将关键字链接到特定的 AdGroup，而不是将关键字链接到特定的广告。有没有办法可以将关键字链接到单个广告，而不是组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:38:52.750

我认为这是不可能的。正如您所说，您必须将关键字链接到广告组。但是，您可以为每个关键字创建一个广告组和一个广告。

# fonts - Flash CS 3 中没有显示无数字体

> ID：13925611
> 
> 赞同：2
> 
> 时间：2012-12-18T02:55:13.153
> 
> 标签：fonts, flash-cs3

我正在打开一个 .fla (CS 3) 文件以对旧文件进行一些文本更新。它有 Myriad Pro 字体，但我在 fla 文件中根本看不到文本，这不是文本被深埋在电影剪辑中的问题，也不是动态文本。

我怀疑与 Myriad Pro 字体有关，因为我尝试打开一个新的干净文件以使用 Myriad Pro 字体键入，它还显示我完全无法阅读的白色文本（我使用黑色字体）。

我能够控制 F 并找到文本，但它也显示为白色，这意味着我无法看到我编辑的内容，除非并发布它。

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:28:21.980

今天同样的事情发生在我身上。Flash CS3 中没有显示无数的futura 字体。它们在 Photoshop 中运行良好....

这是否与昨晚发生的 Windows 更新有关？

啊!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:49:27.820

Same thing here today. Trying to open recent CS4/5 flash file. Must be some update thing that is messing with the fonts.

EDIT: I just found this: [http://forums.adobe.com/thread/1117579](http://forums.adobe.com/thread/1117579)

uninstall windows update kb2753842

Some more info here: [http://graphics-unleashed.unleash.com/2012/12/windows-update-kb2753842-will-make-some.html](http://graphics-unleashed.unleash.com/2012/12/windows-update-kb2753842-will-make-some.html)

# node.js - 从另一个人那里调用快速路线是不好的做法吗？

> ID：13925612
> 
> 赞同：5
> 
> 时间：2012-12-18T02:55:15.607
> 
> 标签：node.js, routes, express

我有一条可以做很多不同事情的路线。例如：

路由文件：

```
exports.index = function (req, res) {
    if (x)
        exports.login(req,res);
    else
        exports.dostuff(req,res);
};

exports.login = function(req, res) {
    res.render('login');
};

exports.dostuff = function(req, res) { 
    res.render('otherfile');
}; 
```

这是不好的做法吗？有没有更好的方法来处理这种情况？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-18T07:40:25.757

好吧，这不是一个不好的做法，但也不是最适合这种情况的做法。

你可以做这样的事情来实现更好的路由解决方案。

*   在路由器文件中配置您的路由并在特定控制器中处理您的行为。

例如像这样的东西。（路由器.js）

```
//First requiring your controller for actions
var jobController = require("../controllers/job_controller");

module.exports = function(app) {

    app.get("/jobs", jobController.getJobIndex);
    app.get("/jobs/create", jobController.createJobView);
    app.get("/jobs/update/:id", jobController.updateJobView);
    app.get("/jobs/delete/:id", jobController.deleteJob);
    app.get("/jobs/:id", jobController.getJobDetails);

    app.post("/jobs/create", jobController.createJobPost);
    app.post("/jobs/update", jobController.updateJobPost);

}; 
```

并且在你的主 app.js 中需要 router.js

```
var router = require('./routes/router')(app) 
```

# magento - 如何使用 NginX 从 Magento 中删除 index.php

> ID：13925613
> 
> 赞同：1
> 
> 时间：2012-12-18T02:55:32.117
> 
> 标签：magento, url, nginx, rewrite

我一直在尝试从 URL 中删除“index.php”。**如果我在管理中将使用 Web 服务器重写**设置为是，我可以让它不显示 index.php ，但是我的其他商店视图（西班牙语）都有 404 错误。我发现关闭的东西在这里： http: [//www.magentocommerce.com/boards/viewthread/7931/P15/#t251897](http://www.magentocommerce.com/boards/viewthread/7931/P15/#t251897)但没有多大成功。

看来这将是一个简单的重写。但我开始认为 NginX 不可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T03:05:49.087

您是否尝试过使用以下方式将请求重定向到 index.php 引导程序：

```
location / {
    try_files $uri $uri/ /index.php?$query_string;
} 
```

您需要将此添加到您的 vhost 文件并重新启动 nginx 以使其工作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-13T13:04:51.300

最好的方法是使用 Apache 或 Nginx 来实现，即通过 vhost 配置。您不必为此更改 Magento 代码库。

如果您使用的是 Apache，通常这是 Magento 的一部分，`.htaccess`或者在 VHost 配置中复制以下代码

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

如果您使用的是 Nginx，请确保将其添加到您的虚拟主机配置中：

```
location / {
    try_files $uri $uri/ /index.php?$query_string;
} 
```

更改这些后，您需要重新加载相应服务器的配置。

除此之外，您需要打开：

```
Magento Admin > System > Config > General > Web 
    > Search Engines Optimization > Use Web Server Rewrites > YES 
```

# windows - Qt Creator 项目向导不显示创建 Qt 项目的选项

> ID：13925616
> 
> 赞同：1
> 
> 时间：2012-12-18T02:56:51.597
> 
> 标签：windows, qt, mingw, qt-creator

![在此处输入图像描述](../Images/5af40e2e803ae2f7cce952779e6c7949.png)标题说明了一切。

我安装了最新版本的 MinGW，以及 Qt 4.8.4 SDK 和 Qt Creator。我正在运行 x64 Windows 7 机器。在安装 Qt SDK 时，确实出现了这个错误：

```
There is a problem with your MinGW installation:
The installer could not find a valid C:\MinGW\include\w32api.h
(The supported version is 3.2)
Do you still want to continue? (Your installation may not work) 
```

但是根据[这个](http://www.qtcentre.org/archive/index.php/t-14862.html)线程，这应该不是问题。不幸的是，我不知道如何实际设置 Qt，以便它允许我使用应用程序项目向导。我附上了我的模板选择的屏幕截图，[这](http://harmattan-dev.nokia.com/docs/library/html/guide/figures/Qt_SDK_NewProject.png)就是我认为它应该看起来的样子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:05:24.393

请转到 Tools->Options->Build & Run->Kits 并检查您正在使用的套件中是否设置了 Qt 版本。

如果没有，请检查在 Tools->Options->Build & Run->Qt 版本中检测到的 Qt 版本创建者。是您要在那里使用的版本吗？如果没有：在此处添加。请注意，即将发布的 2.6.1 版本中对基于 Mingw 的 Qt 版本进行了一些修复。因此，如果 Creator 在您添加 qmake 后什么都不做，那么您想为新创建者的早期版本获取最新的 Qt5（预）版本。

然后返回套件页面并将其中一个套件设置为使用该版本。在那里仔细检查其他信息。

现在您应该能够构建您的项目了。您可能需要关闭/重新打开它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T07:26:57.007

首先检查具有路径 C:\MinGW\bin 的系统环境变量

Qt 项目没有出现可能是由于

1.  创建者未找到 Qt 库。所以检查工具->选项->构建和运行->Qt版本检查这里是否存在任何qmake.exe。如果没有，那么继续下面的 2 点。

2.  Qt 库未编译（由于未设置系统路径变量，MinGW 无法工作）我不知道 SDK 是否提供编译版本。所以先修复 MinGW 路径，然后运行 ​​SDK。如果你找到了 Qt 库 bin 然后在创建者中设置 qmake.exe 在 Tools->Options->Build and Run->Qt Version 中。希望这可以解决。

# python - 在 Python（或其他）GUI 中显示漂亮的 Python 代码

> ID：13925620
> 
> 赞同：2
> 
> 时间：2012-12-18T02:57:37.127
> 
> 标签：python, user-interface, editor, pretty-print

我正在开始一个简单的小 GUI 来为我学生的 python 源代码评分。有没有一种简单的方法可以在 GUI 中自动格式化 python 代码的显示？例如，从某个编辑器中提取颜色格式？

我从 Python tkk 开始（只是为了进行一点额外的 Python 练习，我教它但不经常使用它），但如果在这方面更容易，我不反对切换语言。

输出将是一个包含所有成绩等的网页，但会显示使用 Google Prettify 的 python 代码（除非有人有更好的建议），所以我不需要保留配色方案，只希望它显示以使评分更容易。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T04:31:31.640

正如@icktoofay 所说，您可以使用 Pygments。PyQt/PiSide、PyGtk 和 wxPython 都有 WebKit 小部件。这是一个使用 PyGTK 的示例（注意 - 不是 PyGtk 专家）：

```
#!/usr/bin/env python
'''Example on using Pygments and gtk/webkit'''

from pygments import highlight
from pygments.lexers import PythonLexer
from pygments.formatters import HtmlFormatter

import gtk
import webkit

def gen_html(path):
    '''Generate HTML for Python file with embedded CSS.'''
    with open(path) as fo:
        code = fo.read()

    formatter = HtmlFormatter(linenos='table')
    css = formatter.get_style_defs()
    div = highlight(code, PythonLexer(), formatter)

    return '''<html>
        <head><style>{}</style></head>
        <body><div>{}</div></body>
        </html>'''.format(css, div)

def get_file():
    '''Get file from user.'''
    dlg = gtk.FileChooserDialog(
        title=None,action=gtk.FILE_CHOOSER_ACTION_OPEN,
        buttons=(gtk.STOCK_CANCEL,gtk.RESPONSE_CANCEL,gtk.STOCK_OPEN,gtk.RESPONSE_OK))
    dlg.set_default_response(gtk.RESPONSE_OK)

    # Only Python files
    filter = gtk.FileFilter()
    filter.set_name("Python files")
    filter.add_pattern("*.py")
    dlg.add_filter(filter)

    path = dlg.get_filename() if dlg.run() == gtk.RESPONSE_OK else None
    dlg.destroy()
    return path

def load(view):
    '''Load a new file'''
    path = get_file()
    if not path:
        return

    html = gen_html(path)
    with open('/tmp/src.html', 'w') as fo:
        fo.write(html)
    view.load_html_string(html, '/')

if __name__ == '__main__':
    box = gtk.VBox()
    # WebKit view in scroll
    view = webkit.WebView()
    sw = gtk.ScrolledWindow()
    sw.add(view)
    sw.set_size_request(600, 400)
    box.pack_start(sw)

    # Open file
    btn = gtk.Button('Open...')
    btn.connect('clicked', lambda e: load(view))
    box.pack_start(btn, False, False, 0)

    # Quit
    btn = gtk.Button('Quit')
    btn.connect('clicked', lambda e: gtk.main_quit())
    box.pack_start(btn, False, False, 0)

    # Main window
    win = gtk.Window(gtk.WINDOW_TOPLEVEL)
    win.add(box)
    win.show_all()

    gtk.main() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T05:58:10.350

ipython 提供了一个[qt 控制台](http://ipython.org/ipython-doc/stable/interactive/qtconsole.html)和一个支持高亮显示的[web 服务器界面](http://ipython.org/ipython-doc/stable/interactive/htmlnotebook.html)。ipython 本身具有许多使使用 python 进行开发更容易的[功能](http://ipython.org/ipython-doc/stable/overview.html#main-features-of-the-interactive-shell)。为了让 ipython 的一切顺利进行，有很多要求。大多数 linux 发行版的包管理存储库中都有 ipython，并且[此站点上](http://www.lfd.uci.edu/~gohlke/pythonlibs/)提供了一个 Windows 安装程序。

bpython 是另一个 python 迭代器替代品。它提供语法高亮、内联帮助和其他功能。[屏幕截图](http://bpython-interpreter.org/screenshots/)是了解外观和感觉的最佳场所。它比 ipython 更轻量级。

就个人而言，我会设置一个 html 笔记本服务器并将其用作实验室/教室的一部分来教授 python。

* * *

对于问题的另一部分，在网页上显示成绩并突出显示语法；最简单的方法是使用众多[静态站点生成器](http://nanoc.stoneship.org/docs/1-introduction/#similar-projects)之一。几乎所有都支持语法高亮插件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T01:47:32.990

只记得 wxPython 与 SciTe 捆绑在一起：

```
#!/usr/bin/env python

import wx
from wx import stc
import keyword

class PyDialog(wx.Dialog):
    def __init__(self):
        wx.Dialog.__init__(self, None, -1, 'Python Code')
        sizer = wx.BoxSizer(wx.VERTICAL)

        self.stc = stc.StyledTextCtrl(self, -1)
        self.stc.SetSizeHints(400, 400)
        self.stc.SetLexer(stc.STC_LEX_PYTHON)
        self.stc.SetKeyWords(0, " ".join(keyword.kwlist))
        self.stc.SetMarginType(1, stc.STC_MARGIN_NUMBER)
        # Python styles
        self.stc.StyleSetSpec(wx.stc.STC_P_DEFAULT, 'fore:#000000')
        # Comments
        self.stc.StyleSetSpec(wx.stc.STC_P_COMMENTLINE,  'fore:#008000,back:#F0FFF0')
        self.stc.StyleSetSpec(wx.stc.STC_P_COMMENTBLOCK, 'fore:#008000,back:#F0FFF0')
        # Numbers
        self.stc.StyleSetSpec(wx.stc.STC_P_NUMBER, 'fore:#008080')
        # Strings and characters
        self.stc.StyleSetSpec(wx.stc.STC_P_STRING, 'fore:#800080')
        self.stc.StyleSetSpec(wx.stc.STC_P_CHARACTER, 'fore:#800080')
        # Keywords
        self.stc.StyleSetSpec(wx.stc.STC_P_WORD, 'fore:#000080,bold')
        # Triple quotes
        self.stc.StyleSetSpec(wx.stc.STC_P_TRIPLE, 'fore:#800080,back:#FFFFEA')
        self.stc.StyleSetSpec(wx.stc.STC_P_TRIPLEDOUBLE, 'fore:#800080,back:#FFFFEA')
        # Class names
        self.stc.StyleSetSpec(wx.stc.STC_P_CLASSNAME, 'fore:#0000FF,bold')
        # Function names
        self.stc.StyleSetSpec(wx.stc.STC_P_DEFNAME, 'fore:#008080,bold')
        # Operators
        self.stc.StyleSetSpec(wx.stc.STC_P_OPERATOR, 'fore:#800000,bold')
        # Identifiers. I leave this as not bold because everything seems
        # to be an identifier if it doesn't match the above criterae
        self.stc.StyleSetSpec(wx.stc.STC_P_IDENTIFIER, 'fore:#000000')

        # Caret color
        self.stc.SetCaretForeground("BLUE")
        # Selection background
        self.stc.SetSelBackground(1, '#66CCFF')

        sizer.Add(self.stc, 0, wx.EXPAND)

        button = wx.Button(self, -1, 'Open...')
        self.Bind(wx.EVT_BUTTON, self.OnOpen, button)
        sizer.Add(button)

        self.SetSizer(sizer)
        sizer.Fit(self)

    def OnOpen(self, evt):
        dlg = wx.FileDialog(
            self,
            message = 'Choose File',
            wildcard = 'Python source (*.py)|*.py',
            style = wx.OPEN)

        if dlg.ShowModal() != wx.ID_OK:
            return

        with open(dlg.GetPath()) as fo:
            self.stc.SetText(fo.read())

        dlg.Destroy()

if __name__ == '__main__':
    app = wx.PySimpleApp()
    dlg = PyDialog()
    with open(__file__) as fo:
        dlg.stc.SetText(fo.read())
    dlg.ShowModal() 
```

# wpf - 如何使用其他面板在内部实现一个面板？

> ID：13925623
> 
> 赞同：0
> 
> 时间：2012-12-18T02:58:02.683
> 
> 标签：wpf, custom-controls, stackpanel

例如，实现一个`TwoColumnStackPanel`. 顾名思义，一般`StackPanel`只能将元素堆叠在一列，而我的 TwoColumnStackPanel 可以将元素堆叠在两列。

TwoColumnStackPanel 应在两列中均匀分布元素。如果是4个元素，左边2个右边2个；5 个元素，左 2 和右 3。

我认为 TwoColumnStackPanel 实际上是两个并排的 StackPanel，它可以**使用现有的 StackPanel**来实现吗？

```
class TwoColumnStackPanel : Panel
{
    private readonly StackPanel leftPanel;
    private readonly StackPanel rightPanel;

    public TwoColumnStackPanel()
    {
        leftPanel = new StackPanel();
        rightPanel = new StackPanel();
    }

    protected override Size MeasureOverride(Size availableSize)
    {
        int size = InternalChildren.Count;
        int leftCount = size / 2;
        int rightCount = size - leftCount;
        //Load elements to left stackpanel.
        int index = 0;
        leftPanel.Children.Clear();
        for (int s = 0; s < leftCount; s++)
        {
            leftPanel.Children.Add(InternalChildren[index + s]);
        }
        //Load elements to right stackpanel.
        index += leftCount;
        rightPanel.Children.Clear();
        for (int s = 0; s < rightCount; s++)
        {
            rightPanel.Children.Add(InternalChildren[index + s]);//error
        }

        //Measure the two stackpanel and the sum is my desired size.
        double columnWidth = availableSize.Width / 2;

        leftPanel.Measure(new Size(columnWidth, availableSize.Height));
        rightPanel.Measure(new Size(columnWidth, availableSize.Height));

        return new Size(leftPanel.DesiredSize.Width + rightPanel.DesiredSize.Width, Math.Max(leftPanel.DesiredSize.Height, rightPanel.DesiredSize.Height));
    }

    protected override Size ArrangeOverride(Size finalSize)
    {
        leftPanel.Arrange(new Rect(0,0,leftPanel.DesiredSize.Width,leftPanel.DesiredSize.Height));
        rightPanel.Arrange(new Rect(leftPanel.DesiredSize.Width,0,rightPanel.DesiredSize.Width,rightPanel.DesiredSize.Height));

        return finalSize;
    }
} 
```

上面的代码在标签行抛出异常。如何解决？我是否以正确的方式实施它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-26T18:28:48.750

我知道这很旧，但实际上有一种更简单的方法来实现它，您可以使用两个（或更多）现有面板的现有功能来获得您想要的行为。

首先，子类 UniformGrid，而不是普通的 Panel。*当您*想要进行排列时，您只需要对面板进行子类化。你没有。您希望您的内部堆栈面板能够做到这一点。您只是将它们分发到内部面板。（您还提到了停靠面板，但这意味着您还必须指定停靠的附加属性，但无论哪种方式，此代码都是完全相同的。

*注意：随意使用*任何*面板作为根。我刚刚选择了 UniformGrid，这样 StackPanels 就可以并排放置了。但是您可以将任何面板嵌套在任何其他面板中。完全取决于你。

接下来，在新子类的构造函数中，将两个内部 StackPanel 添加到 UniformGrid，一个在左侧，一个在右侧。请注意，这意味着您的 'Children' 集合实际上将返回两个 StackPanel，而不是您添加的控件。这没关系，因为我们不再使用 Children 属性。您将创建自己的财产以供您提供的孩子使用。

现在就这样做。创建一个名为 StackPanelChildren 的 ObservableCollection 类型的新属性，然后在您的类上添加属性 [ContentProperty("StackPanelChildren")]，它告诉 XAML 处理器您的控件的开始和结束标记之间的任何内容都插入到*该*属性中，而不是正常的儿童财产。接下来，在类的构造函数中添加一个 Collection Changed 处理程序，以便您知道何时添加或删除了子项。然后简单地说，在该处理程序中，您可以根据需要从两个内部 StackPanel 中添加或删除项目。

为了真正完整，您可能想要覆盖 CreateUIElementCollection（它支持实际的 Children 属性），以便您可以返回它的只读版本，这样人们就不会弄乱您的内部 StackPanels。我会留给你来弄清楚那部分，因为它实际上并不需要。

这是一些伪代码（从我的脑海中输入，所以它可能无法编译，但你明白了......

```
[ContentProperty("StackPanelChildren")]
public class TwoColumnStackPanel : UniformGrid
{
    private readonly StackPanel leftStackPanel = new StackPanel();
    private readonly StackPanel rightStackPanel = new StackPanel();

    public TwoColumnStackPanel()
    {
        this.Rows = 1;
        this.Columns = 2;
        this.Children.Add(leftStackPanel);
        this.Children.Add(rightStackPanel);

        StackPanelChildren.CollectionChanged += StackPanelChildren_CollectionChanged;
    }

    // Note: You should make this a read-only Dependency property
    // I'm just doing it this way for brevity in typing
    private readonly ObservableCollection<UIElement> _stackPanelChildren = new ObservableCollection<UIElement>(); 
    public ObservableCollection<UIElement> StackPanelChildren
    {
        get{ return _stackPanelChildren; }
    }

    private void StackPanelChildren_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        // Add your child item distribution logic here. Make sure to account for
        // all new items, all removed items, and the Reset action which
        // clears all items but doesn't actually provide them on the argument
        // since you just assume 'everything must go!'
    } 

} 
```

附加信息：

您可以添加类似于新 StackPanelChildren 属性的其他属性。但是，只有一个可以用作默认内容。不过，如果显式调用它们，您可以在 XAML 中指定它们中的任何一个。例如，假设由于某种原因您想要第二个项目集合，也许它们只进入左侧面板。该属性称为 AdditionalLeftPanelChildren。您只需在代码（ObservableCollection）中以完全相同的方式定义它并像这样访问......

```
<MyCustomPanel>

    <TextBlock Text="I'm in the normal content for the StackPanels." />
    <TextBlock Text="So am I!" />

    <MyCustomPanel.AdditionalLeftPanelChildren>

        <TextBlock Text="I go to the other property! Woot!" />

    </MyCustomPanel.AdditionalLeftPanelChildren>

</MyCustomPanel> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T08:11:06.377

您不应该使用面板以
更好的方式实现面板（不完美，但它会给您带来想法）：

```
class TwoColumnStackPanel : Panel
{

    protected override Size MeasureOverride(Size availableSize)
    {   //split the size
        Size halfPanelSize = new Size(availableSize.Width / 2, availableSize.Height / 2);
        Size secondHalfPanelSize = new Size(availableSize.Width - halfPanelSize.Width, availableSize.Height - halfPanelSize.Height);
        int firstHalf = InternalChildren.Count / 2;

        for (int i = 0; i < firstHalf; i++) //measure the first column
        {
            InternalChildren[i].Measure(halfPanelSize);
            Debug.WriteLine(InternalChildren[i].DesiredSize);
        }

        for (int i = firstHalf; i < InternalChildren.Count; i++)//measure the second column
        {
            InternalChildren[i].Measure(secondHalfPanelSize);
            Debug.WriteLine(InternalChildren[i].DesiredSize);
        }

        return availableSize;
    }

    protected override Size ArrangeOverride(Size finalSize)
    {
        Size halfPanelSize = new Size(finalSize.Width / 2, finalSize.Height / 2);
        Size secondHalfPanelSize = new Size(finalSize.Width - halfPanelSize.Width, finalSize.Height - halfPanelSize.Height);
        int firstHalf = InternalChildren.Count / 2;
        Point location = new Point();

        for (int i = 0; i < firstHalf; i++) 
        {// arrange from (0,0) and add the height
            InternalChildren[i].Arrange(new Rect(location.X, location.Y, halfPanelSize.Width, InternalChildren[i].DesiredSize.Height));
            location.Y += InternalChildren[i].DesiredSize.Height;

        }

        location.X = halfPanelSize.Width; // move to the next column
        location.Y = 0;

        for (int i = firstHalf; i < InternalChildren.Count ; i++)
        {// arrange from (firts column width,0) and add the height
            InternalChildren[i].Arrange(new Rect(location.X, location.Y, secondHalfPanelSize.Width, InternalChildren[i].DesiredSize.Height));
            location.Y += InternalChildren[i].DesiredSize.Height;
        }

        return finalSize;
    }
} 
```

# c# - 远程设备上 Monodevelop 的自定义命令单声道软调试器上的 SIGABRT 错误

> ID：13925625
> 
> 赞同：3
> 
> 时间：2012-12-18T02:58:23.840
> 
> 标签：c#, mono, monodevelop

我在主机 PC 和远程 ARM 设备上运行 Ubuntu。我正在尝试在主机 PC 上使用 Monodevelop 远程调试在 ARM 板上运行的 c# 代码。我遵循[Monodevelop 的自定义命令 Mono Soft Debugger 对话框的“输出”字段中的预期内容？](https://stackoverflow.com/questions/13739952/what-is-expected-in-the-output-field-of-monodevelops-custom-command-mono-soft) 如果我不设置断点，一切正常。但是，我尝试跨过断点的所有操作，都会收到如下错误消息：

```
Assertion at debugger-agent.c:4349, condition `tls->frame_count' not met 
```

堆栈跟踪：

```
Native stacktrace:

Debug info from gdb:

Got a SIGABRT while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.

Aborted 
```

我设置断点的位置和代码都没有关系。有人有一些想法吗？

# sql - SQL 查找三个表中任意一个匹配的记录

> ID：13925628
> 
> 赞同：3
> 
> 时间：2012-12-18T02:59:02.857
> 
> 标签：sql, sql-server-2008, join, left-join

我有以下架构：

```
user -- user_id | first_name
full_time_job -- ft_job_id | user_id
part_time_job -- pt_job_id | user_id
internship -- internship_id | user_id 
```

我想编写一个查询，返回三个作业表中的任何一个中存在的所有用户。最好的方法是什么？如果可能的话，我更喜欢在 WHERE EXISTS 上使用 LEFT JOINS，但会对最好的工作解决方案感到满意。

我不想返回三个作业表中的 NONE 中存在的任何用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T03:02:40.523

使用`LEFT JOIN`s，您只需要验证它`user_id`是否`NOT NULL`在至少一个表中：

```
SELECT
  [user].user_id
FROM
  [user]
  /* LEFT JOIN against each of the 3 tables */
  LEFT JOIN full_time_job ft ON [user].user_id = ft.user_id
  LEFT JOIN part_time_job pt ON [user].user_id = pt.user_id
  LEFT JOIN internship intern ON [user].user_id = intern.user_id
WHERE
  /* And check that *any* of them has a non-null user_id */
  ft.user_id IS NOT NULL
  OR pt.user_id IS NOT NULL
  OR intern.user_id IS NOT NULL 
```

### 如果可能，最好修复架构...

但从长远来看，如果可能的话，这些都应该合并到一个*表*中，其中有一列指示作业类型，而不是 3 个类似的表。

**示例：** [http ://sqlfiddle.com/#!2/2cd2c/1](http://sqlfiddle.com/#!2/2cd2c/1)

在上面的示例中，用户`5,6`不存在于 3 个表中的任何一个中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T03:03:33.270

你可以这样做：

```
SELECT DISTINCT *
FROM "user" 
WHERE user_id
IN
(
    SELECT user_id
    FROM
    (
       SELECT user_id FROM full_time_job
       UNION ALL
       SELECT user_id FROM part_time_job
       UNION ALL
       SELECT user_id FROM internship 
   ) t 
   WHERE user_id IS NOT NULL
) 
```

**或者：**使用 CTE，你可以这样写：

```
;WITH AllUsers
AS
(
    SELECT user_id FROM full_time_job
    UNION ALL
    SELECT user_id FROM part_time_job
    UNION ALL
    SELECT user_id FROM internship 
)
SELECT *
FROM "user"
WHERE user_id IN ( SELECT user_id 
                   FROM AllUsers 
                   WHERE user_id IS NOT NULL); 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!3/05656/1)

# asp.net - 通过中继器中的 IF 检查值

> ID：13925631
> 
> 赞同：2
> 
> 时间：2012-12-18T02:59:20.203
> 
> 标签：asp.net, eval, repeater, databinder

```
<asp:Repeater ID="rptEntries" runat="server" DataSourceID="dsEntries">
   <ItemTemplate>
      <%
         if (Convert.ToInt16(Eval("entryWinner")) == 1)
         {
      %>
            <%# "<div class=\"imgThumb draggable\" style=\"background-image:url('uploads/"
               + Eval("entryImagename") + "');\" data-id=\"" + Eval("pk_entryId")
               + "\"></div>"
            %>
      <%
          }else{
      %>
            <%# "<div class=\"imgThumb draggable\" style=\"background-image:url('uploads/"
                + Eval("entryImagename") + "'); filter: grayscale(100%);\" data-id=\""
                + Eval("pk_entryId") + "\"></div>"
            %>
      <%
           }
      %>
   </ItemTemplate>
</asp:Repeater> 
```

我想在显示之前检查 entryWinner 的 te 值，但它给出了以下错误：

> Eval()、XPath() 和 Bind() 等数据绑定方法只能在数据绑定控件的上下文中使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:29:50.253

你可以尝试这样的事情：

```
<asp:Repeater ID="rptEntries" runat="server" DataSourceID="dsEntries">
   <ItemTemplate>
            <%# String.Format("<div class=\"imgThumb draggable\" style=\"background-image:url('uploads/{0}');{1}\"  data-id=\"{2}\"></div>"
,Eval("entryImagename")
,(Convert.ToInt16(Eval("entryWinner")) == 1)?"":" filter: grayscale(100%);",Eval("pk_entryId"))%>
       </ItemTemplate>

</asp:Repeater> 
```

# jvm - 无法加载 JVM 库？

> ID：13925641
> 
> 赞同：2
> 
> 时间：2012-12-18T03:01:01.463
> 
> 标签：jvm, java

我正在使用在其日志文件中生成这些条目的第三方组件：

```
2012/12/18 10:44:12 JVM loadlibrary: C:\Program Files\Java\jre6\bin\client\jvm.dll
2012/12/18 10:44:12 load of JVM library failed 
```

上面的文件路径确实存在。当我安装时不会发生此错误`Java 1.5`。

可能是什么问题呢？

我发现在某些系统上不会发生此错误。

# struts2 - 单击 s:iterator struts2 中的按钮

> ID：13925645
> 
> 赞同：1
> 
> 时间：2012-12-18T03:01:31.073
> 
> 标签：struts2, iterator

我创建了一个对象音乐，其属性为名称、作者、艺术家、路径..

这是文件**listproduct.jsp中的代码**

```
<font color="red"><s:actionerror/></font>
<table align="center">
         <tr>
             <td width="200" style="background: #4682B4">Name song</td>
             <td width="200" style="background: #4682B4">Artist</td>
             <td style="background: #4682B4">Play</td>
             <td style="background: #4682B4">Delete</td>
         </tr>
        <s:iterator value="arrayMusic">
            <tr>
                <td width="200" style="background: #CCCCCC"><s:property value="%{name}" /></td>
                <td width="200" style="background: #CCCCCC"><s:property value="%{artist}" /></td>
                <td style="background: #CCCCCC"><s:submit name="playBtn" value="Play" theme="simple" action="play"/></td>
                <td style="background: #CCCCCC"><s:submit name="delBtn" value="Delete" theme="simple" action="delete"/></td>
            </tr>
        </s:iterator>
    </table> 
```

在**struts.xml 中**

```
<action name="play" class="demo.PlaySongAction">
    <result name="success">listproduct.jsp</result>
    <result name="error">listproduct.jsp</result>
</action>
<action name="delete" class="demo.DeleteSongAction">
    <result name="success">listproduct.jsp</result>
    <result name="error">listproduct.jsp</result>
</action> 
```

我有 List arrayMusic 和一些对象 Music..s:iterator 显示的 arrayMusic 数据。

In **PlaySongAction**

```
public class PlaySongAction extends ActionSupport {
public PlaySongAction() {

}
public String execute() throws Exception {
    addActionError("display path of Music");

    //Mp3Player is class to play mp3 with path of song
    Mp3Player mp=new Mp3Player("path of song");
    mp.play();
}
} 
```

我想在每一行中单击播放按钮，它的显示路径在 s:actionerror of Music 的行中，并获取歌曲的路径并播放路径对应的歌曲。

我能怎么做？

# json - 如何使用 *non-case* 类从带有 Scala 的 JSON 反序列化？

> ID：13925650
> 
> 赞同：7
> 
> 时间：2012-12-18T03:01:56.317
> 
> 标签：json, scala

我正在编写一个需要从 JSON 序列化和反序列化的 Scala 应用程序。一些 JSON 对象有超过 22 个字段，所以我不能使用案例类（我也不能更改格式）。我能够找到的所有 Scala JSON 库都只能（很容易地）使用案例类，而不是普通类。

鉴于此，将大型 JSON 对象（具有超过 22 个字段）反序列化为 Scala 非案例类的最简单方法是什么？它不必是完全自动的，但理想情况下，我正在寻找比反序列化为 Map[String, Any] 并手动执行所有操作更痛苦的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-26T00:19:46.050

更新：幸运的是，现在可以使用 Json4s 和 Jackson 使用字段序列化器执行我想要的操作，如下所示：

```
implicit val formats = DefaultFormats + FieldSerializer[MyNonCaseClass]()

val myNonCaseClassObject = Serialization.read[MyNonCaseClass](jsonString) 
```

根据下面的要求，这是一个更完整的示例：

```
import org.json4s.jackson.Serialization
import org.json4s._
import scala.util.Try

object JSONUtil {

implicit val formats = DefaultFormats + FieldSerializer[MyNonCaseClass]() + FieldSerializer[MyOtherNonCaseClass](ignore("someUnwantedFieldName") orElse ignore("anotherFieldToIgnore")) + ...

def toJSON(objectToWrite: AnyRef): String = Serialization.write(objectToWrite)

def fromJSONOption[T](jsonString: String)(implicit mf: Manifest[T]): Option[T] = Try(Serialization.read(jsonString)).toOption

} 
```

那么用法是：

```
val jsonString = JSONUtil.toJSON(myObject)
val myNewObject: Option[MyClass] = JSONUtil.fromJSONOption[MyClass](aJsonString) 
```

对于要序列化的每个非案例类，您都需要一个 FieldSerializer。此外，在定义类时，JSON 中可能缺少的所有内容都需要定义为选项。

SBT：

```
"org.json4s" %% "json4s-jackson" % "3.2.6" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T03:42:29.020

可以在没有案例类的情况下使用[带有泛型的 Play JSON 库来做到这一点](http://www.playframework.org/documentation/2.0.1/ScalaJsonGenerics)

当我喝着咖啡什么都不做的时候。我冒昧地为您编写了一个示例。完整的解决方案如下：

首先，这是你的课：

```
import play.api.libs.json._
import play.api.libs.json.Json._

    class TestJSON(
      val field1: String,
      val field2: String,
      val field3: String,
      val field4: String,
      val field5: String,
      val field6: String,
      val field7: String,
      val field8: String,
      val field9: String,
      val field10: String,
      val field11: String,
      val field12: String,
      val field13: String,
      val field14: String,
      val field15: String,
      val field16: String,
      val field17: String,
      val field18: String,
      val field19: String,
      val field20: String,
      val field21: String,
      val field22: String,
      val field23: String) {

    }

    object TestJSON {
      //
      // JSON BINDING/UNBINDING
      //

      implicit def modalityReads: Reads[TestJSON] = new Reads[TestJSON] {
        def reads(json: JsValue): TestJSON =
          new TestJSON(
            field1 = (json \ "field1").as[String],
            field2 = (json \ "field2").as[String],
            field3 = (json \ "field3").as[String],
            field4 = (json \ "field4").as[String],
            field5 = (json \ "field5").as[String],
            field6 = (json \ "field6").as[String],
            field7 = (json \ "field7").as[String],
            field8 = (json \ "field8").as[String],
            field9 = (json \ "field9").as[String],
            field10 = (json \ "field10").as[String],
            field11 = (json \ "field11").as[String],
            field12 = (json \ "field12").as[String],
            field13 = (json \ "field13").as[String],
            field14 = (json \ "field14").as[String],
            field15 = (json \ "field15").as[String],
            field16 = (json \ "field16").as[String],
            field17 = (json \ "field17").as[String],
            field18 = (json \ "field18").as[String],
            field19 = (json \ "field19").as[String],
            field20 = (json \ "field20").as[String],
            field21 = (json \ "field21").as[String],
            field22 = (json \ "field22").as[String],
            field23 = (json \ "field22").as[String])
      }

      implicit def modalityWrites: Writes[TestJSON] = new Writes[TestJSON] {
        def writes(ts: TestJSON) = JsObject(Seq(
          "field1" -> JsString(ts.field1),
          "field2" -> JsString(ts.field2),
          "field3" -> JsString(ts.field3),
          "field4" -> JsString(ts.field4),
          "field5" -> JsString(ts.field5),
          "field6" -> JsString(ts.field6),
          "field7" -> JsString(ts.field7),
          "field8" -> JsString(ts.field8),
          "field9" -> JsString(ts.field9),
          "field10" -> JsString(ts.field10),
          "field11" -> JsString(ts.field11),
          "field12" -> JsString(ts.field12),
          "field13" -> JsString(ts.field13),
          "field14" -> JsString(ts.field14),
          "field15" -> JsString(ts.field15),
          "field16" -> JsString(ts.field16),
          "field17" -> JsString(ts.field17),
          "field18" -> JsString(ts.field18),
          "field19" -> JsString(ts.field19),
          "field20" -> JsString(ts.field20),
          "field21" -> JsString(ts.field21),
          "field22" -> JsString(ts.field22),
          "field23" -> JsString(ts.field23)))
      }
    } 
```

您的控制器应如下所示：

```
import play.api._
import play.api.mvc._
import play.api.libs.json.Json._
import play.api.Play.current
import models.TestJSON

object Application extends Controller  {

  def getJson = Action {
    implicit request =>
      Ok(
        toJson(
          Seq(
            toJson(
              new TestJSON(
                "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12",
                "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23")),
              toJson(new TestJSON(
                "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12",
                "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23")))))
  }

} 
```

您的路由文件（只需路由操作）：

```
GET     /getJson                             controllers.Application.getJson 
```

而现在，关键时刻……

```
curl localhost:9000/getJson
[{"field1":"1","field2":"2","field3":"3","field4":"4","field5":"5","field6":"6",
"field7":"7","field8":"8","field9":"9","field10":"10","field11":"11","field12":"
12","field13":"13","field14":"14","field15":"15","field16":"16","field17":"17","
field18":"18","field19":"19","field20":"20","field21":"21","field22":"22","field
23":"23"},{"field1":"1","field2":"2","field3":"3","field4":"4","field5":"5","fie
ld6":"6","field7":"7","field8":"8","field9":"9","field10":"10","field11":"11","f
ield12":"12","field13":"13","field14":"14","field15":"15","field16":"16","field1
7":"17","field18":"18","field19":"19","field20":"20","field21":"21","field22":"2
2","field23":"23"}] 
```

它也应该反过来工作。我目前正在一个项目中使用它来组装和拆卸大树，所以它应该适合你。让我知道。

干杯!

**PS：**别担心，我花了大约 10 分钟来生成代码。我刚刚映射了一个 List.range(1,24) 并“foreached”它来打印代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T03:53:24.153

查看[Lift JSON API](http://scala-tools.org/mvnsites/liftweb-2.4/#net.liftweb.json.JsonAST%24)。

关键是所有被解析的东西都作为`JValue`. 像这样的对象

```
{
  "a": [1, 2],
  "b": "hello"
} 
```

将被解析为

```
JObject(List(
  JField("a", JArray(List(JInt(1), JInt(2)))),
  JField("b", JString("hello"))
)) 
```

Lift API 提供了一些有用的方法，例如`\`让您可以访问`Map`. 还有一种`extractOpt[A]`方法会尽力将解析后的 JSON 转换为`A`您想要的任何内容。和他们一起玩，感受一下。

# php - 我可以为单个项目使用不同的 Codeigniter 安装吗？

> ID：13925652
> 
> 赞同：0
> 
> 时间：2012-12-18T03:02:33.393
> 
> 标签：php, codeigniter

我是 PHP 新手，并计划使用 Codeigniter MVC 构建应用程序。它有3个模块，即用户、公司和管理部分。如果我使用两个 codeigniter 安装有什么缺点吗？即一个用于管理部分和另一个安装上的所有其他部分？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-18T03:06:38.863

我在我们的一些产品中使用了多个 CI 实例，但它们是完全不同的应用程序，仅在一些小领域（如身份验证）重叠。

一起使用多个实例有很多陷阱（身份验证/会话是大问题），除非你真的需要，否则我不会这样做。如果您只希望某些成员访问某些页面，这在 CI 中很容易做到——而且您可能会有很多代码重用。如果您拆分为 2 个 CI 实例，则需要维护 2 个相似但不同的代码库 - 维护痛苦。重叠越多，重复的努力就越大。

# heroku - 如何将 Rails 3.2 的“wrap bootstrap”主题上传到 Heroku

> ID：13925658
> 
> 赞同：0
> 
> 时间：2012-12-18T03:03:56.543
> 
> 标签：heroku, twitter-bootstrap, ruby-on-rails-3.2, twitter-bootstrap-rails

[我从http://wrapbootstrap.com](http://wrapbootstrap.com)购买了一个主题。

主题是“使用更少：否”使用 Bootstrap 2.2.1、HTML5/CSS3 制作

我无法让主题工作/上传到 Heroku。有谁知道我做错了什么？主题在 localhost 上运行良好。当我尝试在上传到 Heroku 之前预编译资产时，我得到：

```
$ RAILS_ENV=production bundle exec rake assets:precompile --trace
** Invoke assets:precompile (first_time)
** Execute assets:precompile
/Users/mark/.rvm/rubies/ruby-1.9.3-p125/bin/ruby /Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets --trace
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:primary
rake aborted!
Invalid CSS after "  width: ": expected expression (e.g. 1px, bold), was ";"
  (in /Users/mark/Documents/websites/hosting/linkedsocial/app/assets/stylesheets/application.css)
(sass):10934
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sass-3.2.3/lib/sass/scss/parser.rb:1134:in `expected'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sass-3.2.3/lib/sass/script/lexer.rb:199:in `expected!'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sass-3.2.3/lib/sass/script/parser.rb:471:in `assert_expr'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sass-3.2.3/lib/sass/script/parser.rb:49:in `parse'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sass-3.2.3/lib/sass/scss/parser.rb:1008:in `sass_script'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sass-3.2.3/lib/sass/scss/parser.rb:868:in `value!'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sass-3.2.3/lib/sass/scss/parser.rb:845:in `declaration'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sass-3.2.3/lib/sass/scss/parser.rb:568:in `block in declaration_or_ruleset'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sass-3.2.3/lib/sass/scss/parser.rb:1108:in `call'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sass-3.2.3/lib/sass/scss/parser.rb:1108:in `rethrow'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sass-3.2.3/lib/sass/scss/parser.rb:578:in `declaration_or_ruleset'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sass-3.2.3/lib/sass/scss/parser.rb:540:in `block_child'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sass-3.2.3/lib/sass/scss/parser.rb:532:in `block_contents'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sass-3.2.3/lib/sass/scss/parser.rb:521:in `block'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sass-3.2.3/lib/sass/scss/parser.rb:515:in `ruleset'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sass-3.2.3/lib/sass/scss/parser.rb:539:in `block_child'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sass-3.2.3/lib/sass/scss/parser.rb:532:in `block_contents'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sass-3.2.3/lib/sass/scss/parser.rb:70:in `stylesheet'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sass-3.2.3/lib/sass/scss/parser.rb:27:in `parse'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sass-3.2.3/lib/sass/engine.rb:342:in `_to_tree'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sass-3.2.3/lib/sass/engine.rb:315:in `_render'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sass-3.2.3/lib/sass/engine.rb:262:in `render'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sass-rails-3.2.5/lib/sass/rails/compressor.rb:8:in `compress'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/actionpack-3.2.9/lib/sprockets/compressors.rb:74:in `compress'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sprockets-2.2.2/lib/sprockets/processing.rb:243:in `block in css_compressor='
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sprockets-2.2.2/lib/sprockets/processor.rb:29:in `call'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sprockets-2.2.2/lib/sprockets/processor.rb:29:in `evaluate'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/tilt-1.3.3/lib/tilt/template.rb:76:in `render'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sprockets-2.2.2/lib/sprockets/context.rb:193:in `block in evaluate'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sprockets-2.2.2/lib/sprockets/context.rb:190:in `each'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sprockets-2.2.2/lib/sprockets/context.rb:190:in `evaluate'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sprockets-2.2.2/lib/sprockets/bundled_asset.rb:26:in `initialize'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sprockets-2.2.2/lib/sprockets/base.rb:252:in `new'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sprockets-2.2.2/lib/sprockets/base.rb:252:in `build_asset'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sprockets-2.2.2/lib/sprockets/index.rb:93:in `block in build_asset'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sprockets-2.2.2/lib/sprockets/caching.rb:19:in `cache_asset'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sprockets-2.2.2/lib/sprockets/index.rb:92:in `build_asset'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sprockets-2.2.2/lib/sprockets/base.rb:169:in `find_asset'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sprockets-2.2.2/lib/sprockets/index.rb:60:in `find_asset'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/actionpack-3.2.9/lib/sprockets/static_compiler.rb:19:in `block in compile'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sprockets-2.2.2/lib/sprockets/base.rb:219:in `block in each_logical_path'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sprockets-2.2.2/lib/sprockets/base.rb:206:in `block (2 levels) in each_file'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sprockets-2.2.2/lib/sprockets/base.rb:196:in `each'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sprockets-2.2.2/lib/sprockets/base.rb:196:in `each_entry'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sprockets-2.2.2/lib/sprockets/base.rb:204:in `block in each_file'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sprockets-2.2.2/lib/sprockets/base.rb:203:in `each'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sprockets-2.2.2/lib/sprockets/base.rb:203:in `each_file'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/sprockets-2.2.2/lib/sprockets/base.rb:217:in `each_logical_path'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/actionpack-3.2.9/lib/sprockets/static_compiler.rb:18:in `compile'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/actionpack-3.2.9/lib/sprockets/assets.rake:56:in `internal_precompile'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/actionpack-3.2.9/lib/sprockets/assets.rake:70:in `block (3 levels) in <top (required)>'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/task.rb:227:in `call'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/task.rb:227:in `block in execute'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/task.rb:222:in `each'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/task.rb:222:in `execute'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/Users/mark/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/task.rb:159:in `invoke_with_call_chain'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/task.rb:152:in `invoke'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/actionpack-3.2.9/lib/sprockets/assets.rake:60:in `block (3 levels) in <top (required)>'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/task.rb:227:in `call'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/task.rb:227:in `block in execute'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/task.rb:222:in `each'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/task.rb:222:in `execute'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/Users/mark/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/task.rb:159:in `invoke_with_call_chain'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/task.rb:152:in `invoke'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/application.rb:141:in `invoke_task'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/application.rb:99:in `block (2 levels) in top_level'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/application.rb:99:in `each'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/application.rb:99:in `block in top_level'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/application.rb:108:in `run_with_threads'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/application.rb:93:in `top_level'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/application.rb:71:in `block in run'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/application.rb:158:in `standard_exception_handling'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/application.rb:68:in `run'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/bin/rake:37:in `<top (required)>'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/bin/rake:19:in `load'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/bin/rake:19:in `<main>'
Tasks: TOP => assets:precompile:primary
rake aborted!
Command failed with status (1): [/Users/mark/.rvm/rubies/ruby-1.9.3-p...]
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/file_utils.rb:53:in `block in create_shell_runner'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/file_utils.rb:45:in `call'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/file_utils.rb:45:in `sh'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/file_utils_ext.rb:40:in `sh'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/file_utils.rb:80:in `ruby'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/file_utils_ext.rb:40:in `ruby'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/actionpack-3.2.9/lib/sprockets/assets.rake:12:in `ruby_rake_task'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/actionpack-3.2.9/lib/sprockets/assets.rake:21:in `invoke_or_reboot_rake_task'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/actionpack-3.2.9/lib/sprockets/assets.rake:29:in `block (2 levels) in <top (required)>'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/task.rb:227:in `call'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/task.rb:227:in `block in execute'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/task.rb:222:in `each'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/task.rb:222:in `execute'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/Users/mark/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/task.rb:159:in `invoke_with_call_chain'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/task.rb:152:in `invoke'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/application.rb:141:in `invoke_task'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/application.rb:99:in `block (2 levels) in top_level'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/application.rb:99:in `each'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/application.rb:99:in `block in top_level'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/application.rb:108:in `run_with_threads'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/application.rb:93:in `top_level'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/application.rb:71:in `block in run'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/application.rb:158:in `standard_exception_handling'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/lib/rake/application.rb:68:in `run'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/gems/rake-10.0.2/bin/rake:37:in `<top (required)>'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/bin/rake:19:in `load'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/bin/rake:19:in `<main>'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/bin/ruby_noexec_wrapper:14:in `eval'
/Users/mark/.rvm/gems/ruby-1.9.3-p125@linkedsocial/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => assets:precompile 
```

## 这是我的 Gemfile：

来源“https://rubygems.org”

```
gem 'rails', '3.2.9'

group :development do
  gem 'sqlite3', '1.3.5'
end

group :assets do
  gem 'sass-rails',   '~> 3.2.5'
  gem 'coffee-rails', '~> 3.2.2'

  gem 'uglifier', '>= 1.2.3'
end

gem 'jquery-rails', '2.0.2'

group :production do
  gem 'pg', '0.12.2'
  gem 'thin'
end 
```

* * *

我在 Assets 部分添加了所有文件，如下所示：

```
assets
  Folder-fancybox
    blank.gif
    fancybox_loading.gif
    fancybox_sprite.png
    jquery.fancybox.css
    jquery.fancybox.js
    jquery.fancybox.pack.js
  Folder-images
  Folder-javascripts
    application.js
    bootstrap.js
    bootstrap.min.js
    html5-3.4-respond-1.1.0.min.js
    jquery-1.8.2.js
    jquery-1.8.2.min.js
    jquery.anchor.js
    pages.js.coffee
    script.js
  Folder-stylesheets
    animate.css
    application.css
    bootstrap.css
    bootstrap.min.css
    Folder-font
      fontawesome-webfront.eot
      fontawesome-webfront.svg
      fontawesome-webfront.ttf
      fontawesome-webfront.woff
    font-awesome-ie7.css
    font-awesome.css
    pages.css.scss
    styles.css 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:06:51.197

Heroku 无法处理您的样式表，因为它不希望它们在 LESS 中（请参阅[http://lesscss.org/](http://lesscss.org/)）。首先，您必须将所有样式表（或至少 LESS 中的样式表）的扩展名更改为`filename.css.less`. 然后，您需要在 gemfile 中包含一个 LESS 解析器，如下所示：

```
group assets do
    gem 'less-rails'
    gem 'coffee-rails', '~> 3.2.2'
    gem 'uglifier', '>= 1.2.3'
end 
```

如果您不使用 SASS (.css.scss)，那么您可能不需要`sass-rails`gem。您也可以使用`less`gem，但我不知道它与`less-rails`.

它应该在那之后工作。如果没有，请尝试运行`heroku run rake assets:precompile`. 如果它仍然不起作用，您可能必须将其添加到您的 application.rb：

```
config.assets.initialize_on_precompile = false 
```

此外，您应该检查一个名为`less-rails-bootstrap`. 它将取代您的 bootstrap.min.css。如果您的主题使用 LESS，则很有可能它希望您的引导程序也在 LESS 中，以便使用变量、mixin、函数等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T21:33:19.333

看起来模板中可能只有一些无效的 CSS。在您捆绑的样式表中的某处，您为“宽度：;”设置了一个缺失值。

由于主题指定“使用 LESS：否”使用 Bootstrap 2.2.1、HTML5/CSS3 制作”，我认为 LESS 不是问题。相反，rails 会在生产中解析你的 CSS 以缩小它，如果有任何 CSS错误它会抛出一个错误。

您可以通过预编译资产在本地重现此错误。否则，在您的开发机器上，您的资产不会经历相同的过程。

# jquery - 不同位置不同div上浮动图标的解决方案

> ID：13925664
> 
> 赞同：0
> 
> 时间：2012-12-18T03:04:47.390
> 
> 标签：jquery

例如，我有两个 div 容器，如下所示：

```
^^^^^^^^^^^^^^^^^^<br/>
DIV 1 container|<br />
%%%%%%%%|

^^^^^^^^^^^^^^^^^^<br/>
DIV 2 container|<br />
%%%%%%%%| 
```

第一个（Div1）是 Div 2 的顶部。我想在这些 div 角之一（左上、右上、左下、右下）上浮动一个图标。

对于第一个 div，这将非常容易，因为我可以使用 jQuery 来获取 div 的宽度和高度并计算角坐标。例如，如果第一个 div 维度是：

1240 = 宽度 375= 高度

我使用 jQuery 获得这些尺寸：

```
 var heightdiv1=$('div1').height();
    var widthdiv1 = $('div1').width(); 
```

以下是在 JS 中计算的坐标：

计算右下坐标：

左=1240-1240*0.1=1116= 上=375-375*0.1=337.5

计算左下坐标

左=0 上=375-375*0.1=337.5

计算右上角坐标：

左=1240-1240*0.1=1116 上=0

计算左上角坐标：

左=0 上=0

然后我可以使用 jQuery 将图标附加到 div 并使用 position:absolute 来获得浮动效果：

```
$('#div1').append('<a href="#"><img src="/test/icon.jpg" style="position:absolute; top: '+top+'px; left: '+left+'px"></a>'); 
```

这个配方非常有效，但仅适用于第一个 div。对于页面中的第二个 div (DIV2) 或任何其他 div，它不会落在正确的角落。

我相信我仍然可以为任何其他 div 获得正确的 div 尺寸，但我发现很难将我的图标定位在它们的特定角落，就像我在第一个 div 上所做的那样。

我试过使用 .offset() 但我不知道它是否可以计算角位置。如果有人可以提供一些提示，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T03:08:54.893

给出 div 元素`position:relative`并给出要附加的锚（不是 img）元素`position:absolute`。

当您使用绝对定位时，它仍然相对于最近的“定位”（即不是`static`）祖先，因此出于您的目的，您不需要计算任何偏移量。

（而且，没有必要让它工作但更整洁，而不是在您要附加的元素上使用内联样式，只需给它们一个公共类。）

演示：http: [//jsfiddle.net/mSLRN/](http://jsfiddle.net/mSLRN/)

# c# - 为什么我在新项目页面中有“对象引用未设置为实例”

> ID：13925669
> 
> 赞同：0
> 
> 时间：2012-12-18T03:05:21.130
> 
> 标签：c#, silverlight, silverlight-4.0

我刚刚将我的 Visual Studio 从 Silverlight 3 更新到 Silverlight 4 并开始出现这个不寻常的错误消息。

![在此处输入图像描述](../Images/fe6839f9cf7503bb1fbf995d8e6829be.png)

无论我创建了多少项目，它都是一样的。重启了Visual Studio和我的机器，还是一样

更新：我已经从图像中复制了堆栈跟踪

```
System.NullReferenceException
Object reference not set to an instance of an object.
   at Microsoft.Windows.Design.Platform.SilverlightMetadataContext.SilverlightXamlExtensionImplementations.<GetXmlNamespaceCompatibilityMappings>d__8.MoveNext()
   at MS.Internal.Design.Metadata.ReflectionProjectNode.BuildSubsumption()
   at MS.Internal.Design.Metadata.ReflectionProjectNode.SubsumingNamespace(Identifier identifier)
   at MS.Internal.Design.Markup.XmlElement.BuildScope(PrefixScope parentScope, IParseContext context)
   at MS.Internal.Design.Markup.XmlElement.ConvertToXaml(XamlElement parent, PrefixScope parentScope, IParseContext context, IMarkupSourceProvider provider)
   at MS.Internal.Design.DocumentModel.DocumentTrees.Markup.XamlSourceDocument.FullParse(Boolean convertToXamlWithErrors)
   at MS.Internal.Design.DocumentModel.DocumentTrees.Markup.XamlSourceDocument.get_RootItem()
   at Microsoft.Windows.Design.DocumentModel.Trees.ModifiableDocumentTree.get_ModifiableRootItem()
   at Microsoft.Windows.Design.DocumentModel.MarkupDocumentManagerBase.get_LoadState()
   at MS.Internal.Host.PersistenceSubsystem.Load()
   at MS.Internal.Host.Designer.Load()
   at MS.Internal.Designer.VSDesigner.Load()
   at MS.Internal.Designer.VSIsolatedDesigner.VSIsolatedView.Load()
   at MS.Internal.Designer.VSIsolatedDesigner.VSIsolatedDesignerFactory.Load(IsolatedView view)
   at MS.Internal.Host.Isolation.IsolatedDesigner.BootstrapProxy.LoadDesigner(IsolatedDesignerFactory factory, IsolatedView view)
   at MS.Internal.Host.Isolation.IsolatedDesigner.BootstrapProxy.LoadDesigner(IsolatedDesignerFactory factory, IsolatedView view)
   at MS.Internal.Host.Isolation.IsolatedDesigner.Load()
   at MS.Internal.Designer.DesignerPane.LoadDesignerView() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:34:07.677

我通过安装 Silverlight 4 运行时解决了这个问题。每当您在 Visual Studio 中单击建议的先决条件更新链接时，都会安装最新版本，它目前是 Silverlight 5 运行时，这不是我想要的。如果我们可以选择安装哪个而不是安装破坏东西的最新版本，那就太好了。

我卸载了 Silverlight 5 运行时并使用这些链接到 resintall 版本 4

以下是我使用的链接：

*   [http://www.microsoft.com/en-us/download/details.aspx?id=18149](http://www.microsoft.com/en-us/download/details.aspx?id=18149)
*   [http://www.microsoft.com/en-us/download/confirmation.aspx?id=18149](http://www.microsoft.com/en-us/download/confirmation.aspx?id=18149)

此答案建议

*   [我在哪里可以获得 Silverlight 4 的“Silverlight Developer Runtime”？](https://stackoverflow.com/questions/3232271/where-can-i-get-the-silverlight-developer-runtime-for-silverlight-4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T05:44:21.637

引用旧版本时会出现此错误，因此您应该为更新版本添加新引用

# python - 在python中，我怎样才能得到我在正则表达式中得到的组数

> ID：13925671
> 
> 赞同：3
> 
> 时间：2012-12-18T03:05:27.783
> 
> 标签：python

在 python 中，我可以像这样使用正则表达式：

```
prog = re.compile(pattern)
result = prog.match(string) 
```

我可以 result.groups(0), result.groups(0), ... 等等。

如何找出结果中有多少组？我试过'len（result.groups）'，但我得到：

```
TypeError: object of type 'builtin_function_or_method' has no len() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T03:10:38.650

你正在尝试的是正确的，但你只是错过了括号：

尝试：

```
len(result.groups()) 
```

那应该做的工作。正如错误所暗示的，您正在尝试获取函数的长度。您想要的是函数执行后返回的值（在本例中为元组）的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T03:10:10.473

试试这个 ：-

```
result.lastindex. 
```

另请参阅[http://docs.python.org/dev/library/re.html](http://docs.python.org/dev/library/re.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T03:12:26.670

其实你可以调用dir(result)/help(result)，然后你会找到你可以调用的方法。正如其他人所建议的那样，groups()

# javascript - javascript正则表达式在匹配模式后获取字符串

> ID：13925678
> 
> 赞同：0
> 
> 时间：2012-12-18T03:06:17.023
> 
> 标签：javascript, regex

我有一个看起来像这样的字符串：

`var str = "fname=peter lname=pan age=12"`

我需要的是获取一个字符串数组，每个字符串都在 fname 或 lname 或 age 之后，超出**str**变量。结果是这样的：`['peter', 'pan', '12']`。

你能建议我一个有效的解决方案来完成这项任务吗（我有一个很长的，相信我你永远不想看到那个）？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T03:15:05.630

尝试：

```
var arr = [];
str.replace(/=(\w+)/g, function( a,b ) {
  arr.push( b );
});

console.log( arr ); //=> ["peter", "pan", "12"] 
```

这是使用类似正则表达式的另一种方法：

```
var arr = str.match(/=\w+/g).map(function( m ){
  return m.replace('=','');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T03:09:44.890

你不需要一个`regex`.

```
var str = "fname=peter lname=pan age=12";

str = str.split(' ');
for(var i = 0, length = str.length; i < length; i++) {
    str[i] = str[i].split('=')[1];
}
console.log(str); // ['peter', 'pan', '12'] 
```

[**演示**](http://jsfiddle.net/sRUpM/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T03:41:23.737

您还可以考虑对密钥进行硬编码以避免循环：

```
var s   = "fname=peter lname=pan age=12"
var pat = /fname=(\w+)\s*lname=(\w+)\s*age=(\w+)/

r.match(pat)
//returns ["fname=peter lname=pan age=12", "peter", "pan", "12"] 
```

# xml - 如何在 XML CDATA 中添加属性？XSLT

> ID：13925679
> 
> 赞同：-1
> 
> 时间：2012-12-18T03:06:19.820
> 
> 标签：xml, xslt

xml:

```
<Frames>

<bannerFrame1>
      <![CDATA[
      <iframe src="https://image.domain.com/promobanner1.html" height="320" width="629"                scrolling="no" frameborder="0" marginwidth="0" marginheight="0"></iframe>
      ]]>
    </bannerFrame1>

<bannerFrame2>
      <![CDATA[
      <iframe src="https://image.domain.com/promobanner2.html" height="320" width="629"                scrolling="no" frameborder="0" marginwidth="0" marginheight="0"></iframe>
      ]]>
    </bannerFrame2>

</Frames> 
```

XML：bannerFrame1/iframe CDATA 源值可能看起来像这样

```
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
     <body>
       <div>
        <img src="banners/banner1.gif" border="0" alt="Banner"/>
       </div>
     </body>
  </html> 
```

XSLT：我正在获取 bannerFrame1 的 CDATA 值

```
<xsl:template match="/">
    <xsl:value-of select="Frames/bannerFrame1" disable-output-escaping="yes" />
 </xsl:template> 
```

我试图在 CDATA“bannerFrame1”的图像上添加谷歌分析事件跟踪代码。如何 `<img src="banners/banner1.gif" border="0" alt="Banner">`在获取 CDATA 值时添加 onclick 属性`<bannerFrame1>`？真的有可能吗？提前致谢。

```
Expected output: 
 <iframe>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
         <body>
           <div>
            <img src="banners/banner1.gif" border="0" alt="Banner" onclick ="GoogleEventTracker();"/>
           </div>
         </body>
      </html>
</iframe> 
```

框架来源：

```
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="Pragma" content="no-cache">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/ui-lightness/jquery-ui-1.7.2.custom.css">
    <script type="text/javascript" src="js/jquery-1.3.2.min.js"></script>
    <script type="text/javascript" src="custombanner/jquery.min.js"> </script>
    <script type="text/javascript" src="custombanner/jquery.cycle.all.2.74.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.7.2.custom.min.js"></script>
    <!--<script type="text/javascript" src="js/custom.js"></script>-->
    <title>domain - It's time everyone flies</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <meta name="script" http-equiv="Content-Script-Type" content="text/javascript">
    <meta name="script" http-equiv="Content-Style-Type" content="text/css">
    <!--<script type="text/javascript" src="js/soapclient.js"></script>-->
    <style type="text/css">
        img, div, a, input
        {
            behavior: url(iepngfix.htc);
        }
        #nav
        {
            float: left;
            left: 8px;
            margin: 15px;
            position: absolute;
            top: 235px;
            padding-left: 242px; /* for 4 frames */ /*padding-left: 278px; /* for 3 frames */ /*padding-left: 312px; /* for 2 frames */ /*padding-left: 242px; /* for 4 frames */
            margin-left: 1px;
            margin-right: 1px;
            margin-bottom: 1px;
            height: 40px; /*background :url("banners/gradient.gif") repeat-x scroll 0 0 transparent;*/
        }
        #nav li
        {
            display: block;
            float: left;
            list-style: none outside none;
            margin: 2px;
            padding: 2px;
            padding-right: 4px;
            margin-top: 8px;
            width: 25px;
        }
        #nav a
        {
            border: 1px solid #ffffff;
            display: block;
            padding: 0;
            width: 25px;
        }
        #nav img
        {
            border: medium none;
            display: block;
            height: 20px;
            width: 25px;
            opacity: 0.5;
            filter: alpha(opacity=50);
        }
        #nav li.activeLI
        {
            background: #ff0000;
        }
        #nav li.activeLI img
        {
            opacity: 1;
            filter: alpha(opacity=100);
        }
    </style>
</head>
<body marginwidth="0" marginheight="0">
    <div class="hero">
        <div class="slideshow mainpromo" id="slideshow" style="margin-bottom: 50px;">
<!--            <a href="http://www.domain.com/Pages/SeatSalePromo.aspx" target="_top">
                <img src="banners/banner1.gif" border="0" alt="Banner" /></a>-->
            <img src="banners/banner1.gif" border="0" alt="Banner">
        </div>
        <ul id="nav">
        </ul>
        <div class="rightpane">
            <!--<a href="http://www.domain.com" target="_top"><img src="banners/promo-fares.jpg" width="206" height="214" border="0" alt="Thumbnail" /></a>-->
            <img src="banners/lite-fares.jpg" width="206" height="214" border="0" alt="Thumbnail">
            <a href="https://book.domain.com/Register.aspx" target="_top"><img src="images/registernow.gif" width="203" height="20" border="0" alt="See all Low Fares"></a>  
            <!--<center><a href="http://www.domain.com/Pages/WebCheck-in.aspx" target="_top"><font size="2" color="#ff6600">Web Check-In</font></a></center>-->
          <!--<a href="http://domain.com" target="_blank"><img src="images/topdestinatios_btn.gif" alt="" width="149" height="26" border="0" /></a>-->
        </div>
        <div id="alerts">
            <p>
                <strong>Seat Sale Alert! </strong>Be the first to know thePromos. <a target="_top" href="http://www.domain.com/pages/emms-signup.aspx">SUBSCRIBE NOW »</a>
            </p>
            <p>
                <!--                <strong>Seat Sale Availability</strong> Find the best time to travel. <a target="_top"
                    href="http://www.domain.com/documents/seat_map.pdf">DOWNLOAD PDF &raquo;</a>-->
            </p>
            <div class="clear">
            </div>
        </div>
        <div style="clear: both;">
        </div>
        <div id="mascot">
            <img src="images/mascot.png" alt="">
        </div>
        <div style="clear: both;">
        </div>
    </div>

</body></html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T03:50:59.963

如果您控制 image.domain.com，那么您可以轻松添加该属性，但您不需要这种全面的方法来执行此操作。如果您不控制 image.domain.com，那么您就不走运了。（至少，我虔诚地希望如此。）

如果我正确理解了您的问题，您是在询问如何使用 XSLT 将由不同服务器提供的数据更改为 XSLT 样式表输出中 iframe 的内容。XSLT 很难这样做，因为在您的示例中，数据是由浏览器从 image.domain.com 获取的，作用于样式表的输出，而不是样式表。如果在浏览器中运行的样式表尝试直接检索数据并将其插入到输出文档中以代替 iframe，则浏览器将阻止该尝试，因为它违反了同源策略。

我印象深刻——我以为我永远不会对同源政策说好话，也不会觉得它有任何有用的目的，但你证明我错了。

在服务器上运行的样式表很可能能够解析足够多的bannerFrame1 的字符串值来识别指向的URI，获取数据，并将其插入到输出中以代替iframe。让它正确显示可能具有挑战性。

或者您可以使 iframe 指向的不是 image.domain.com，而是指向您自己服务器上的代理，该代理从 image.domain.com 获取数据，插入您的跟踪属性，并将修改后的数据传递给浏览器。（克服同源策略的标准方法：在进入的过程中将数据从您自己的服务器上反弹。同源策略不会阻止每个人包含来自其他来源的数据，只是那些无法设置代理的人.)

# algorithm - 装箱解决方案：这是怎么回事？

> ID：13925685
> 
> 赞同：1
> 
> 时间：2012-12-18T03:06:55.060
> 
> 标签：algorithm, matrix, np-complete

我试图实现[一个 bin-packing-type problem](https://stackoverflow.com/questions/913566/has-anyone-solved-a-programming-puzzle-similar-to-this)的解决方案，主要[采用 Dietrich Epp 描述](https://stackoverflow.com/a/925367/1907186)的方式。我还没有做 Haskell，所以我用 C++ 写了一些东西。

对于小于某个数字 (36) 的墙宽，我的程序和 Haskell 程序给出了相同的结果。对于任何 36 个单位宽或更宽的墙，我的结果要低得多。我怀疑我的解决方案是否正确，因为另一张海报在这里有很多“代表”。我认为问题在于我的位矩阵填充的 1 数量比应该的少得多。

```
#include <vector>
#include <iostream>
#include <algorithm>

const int NARROW_W = 6;     // 3
const int WIDE_W = 9;       // 4.5

const int MIN_WALL_W = 6;   // 3
const int MAX_WALL_W = 96;  // 48
const int MIN_WALL_H = 1;
const int MAX_WALL_H = 10;

// precomputed factorials for finding # of combos
static const long long fact[] =
{
    1,
    1,
    2,
    6,
    24,
    120,
    720,
    5040,
    40320,
    362880,
    3628800,
39916800,
479001600,
6227020800
};

using namespace std;

typedef vector<unsigned long long> LongVec;
typedef vector< vector<int> > IntMat;

LongVec operator * (const IntMat &a, const LongVec &b); // O(n^2)

int main(int argc, char** argv)
{
    int i, j, k;
    int width, height;
    int lcm; // Lowest Common Multiple
    int narrowc, widec;
    bool valid;
    unsigned rowc;
    IntMat bit_mat, gap_vecs, block_vecs;
    vector<int> gaps, blocks;
    vector<int>::iterator it;
    unsigned long long result;
    LongVec vec_res;

    if (argc < 3)
    {
        cerr << "Usage: " << argv[0] << " [width] [height]\n";
        exit(EXIT_FAILURE);
    }
    width = (int) (strtod(argv[1], NULL) * 2);
    height = (int) strtod(argv[2], NULL);
    if (width < MIN_WALL_W || width > MAX_WALL_W)
    {
        cerr << "Width out of range\n";
        exit(EXIT_FAILURE);
    }
    if (height < MIN_WALL_H || height > MAX_WALL_H)
    {
        cerr << "Height out of range\n";
        exit(EXIT_FAILURE);
    }

    // see if valid row is possible
    // by removing narrows and adding wides until width is reached
    narrowc = width / NARROW_W;
    widec = 0;
    valid = false;
    if (width % NARROW_W > 0)
    {
        while (narrowc > 0 && !valid)
        {
            narrowc--;
            widec = 0;
            do
                widec++;
            while ((widec * WIDE_W) + (narrowc * NARROW_W) < width);
            if ((widec * WIDE_W) + (narrowc * NARROW_W) == width)
                valid = true;
        }
    }
    else valid = true;
    if (!valid)
    {
        cout << 0;
        exit(EXIT_SUCCESS);
    }

    // find valid rows
    lcm = WIDE_W;
    while (lcm % WIDE_W != 0 || lcm % NARROW_W != 0)
        lcm++;
    rowc = 0;
    while (narrowc >= 0)
    {
        rowc += (unsigned) (fact[narrowc + widec] /
            (fact[narrowc] * fact[widec]));

        block_vecs.reserve(rowc);
        gap_vecs.reserve(rowc);

        blocks.clear();
        for (j = 0; j < narrowc; j++)
        {
            blocks.push_back(NARROW_W);
        }
        for (j = 0; j < widec; j++)
        {
            blocks.push_back(WIDE_W);
        }
        block_vecs.push_back(blocks);

        gap_vecs.push_back(blocks);
        for (j = 1; j < gap_vecs.back().size() - 1; j++)
        {
            gap_vecs.back().at(j) += gap_vecs.back().at(j - 1);
        }
        gap_vecs.back().pop_back();

        if (widec > 0 && narrowc > 0)
        {
            while (next_permutation(blocks.begin(), blocks.end()))
            {
                block_vecs.push_back(blocks);

                gap_vecs.push_back(blocks);
                for (j = 1; j < gap_vecs.back().size() - 1; j++)
                {
                    gap_vecs.back().at(j) += gap_vecs.back().at(j - 1);
                }
                gap_vecs.back().pop_back();
            }
        }

        narrowc -= lcm / NARROW_W;
        widec += lcm / WIDE_W;
    }

    // fill bit matrix
    bit_mat.reserve(rowc);
    vector<int> v(gap_vecs.at(0).size() * 2);
    for (i = 0; i < rowc; i++)
    {
        gaps.clear();
        bit_mat.push_back(gaps);
        gaps = gap_vecs.at(i);
        for (j = 0; j < rowc; j++)
        {
            //v.clear();
            it = set_intersection(gaps.begin(), gaps.end(),
                    gap_vecs.at(j).begin(), gap_vecs.at(j).end(), v.begin());
            if ((int) (it - v.begin()) != 0)
            {
                bit_mat.back().push_back(0);
            }
            else
            {
                bit_mat.back().push_back(1);
            }
        }
    }

    // multiply vector of 1's by bit matrix (height - 1) times
    vec_res.assign(rowc, 1);
    for (i = 0; i < height - 1; i++)
    {
        vec_res = bit_mat * vec_res;
    }
    result = 0;
    for (i = 0; i < vec_res.size(); i++)
        result += vec_res.at(i);

    cout << result;

    exit(EXIT_SUCCESS);
}

LongVec operator * (const IntMat &a, const LongVec &b)
{
    int i, j;
    int m = a.size();
    int n = b.size();

    LongVec result(m);

    for (i = 0; i < m; i++)
    {
        result[i] = 0;
        for (j = 0; j < n; j++)
        {
            result[i] += a[i][j] * b[j];
        }
    }
    return result;
} 
```

我怀疑，如果这没有给出正确的解决方案，那么 set_intersection() 函数就没有做它应该做的事情（看看两组“间隙”索引之间是否有任何匹配）。有任何想法吗？我在 Mac OS X 10.8 上使用 g++ 进行编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T05:07:07.250

```
// precomputed factorials for finding # of combos
static const long long fact[] =
{
    1,
    1,
    2,
    6,
    24,
    120,
    720,
    5040,
    40320,
    362880,
    3628800,
    39916800,
    479001600,
    6227020800
}; 
```

你错过了一些阶乘，在

```
 rowc += (unsigned) (fact[narrowc + widec] /
        (fact[narrowc] * fact[widec])); 
```

你可能需要16个！为你的极限。添加

```
 ,
    87178291200,
    1307674368000,
    20922789888000 
```

在适当的地方。

# jquery - jquery和jquery mobile的include函数的顺序是否重要？

> ID：13925688
> 
> 赞同：3
> 
> 时间：2012-12-18T03:07:21.587
> 
> 标签：jquery, jquery-mobile

如果我使用这个命令：

```
<script src="jsv3/jquery-1.8.3.js"></script>
<script src="jsv3/jquery.mobile-1.2.0.min.js"></script>
<script src="jsv3/turn.min.js"></script>
<script src="jsv3/onload_mobile.js"></script>
<script src="jsv3/jquery-ui-1.9.2.custom.min.js"></script>
<script src="jsv3/jquery.viewport.min.js"></script>
<script src="jsv3/jquery.scraggable.js"></script> 
```

返回错误：未捕获的类型错误：对象 0 没有方法“匹配”

（类型错误：c.match is not an function using FireBugs错误报告）

如果我使用这个订单

```
<script src="jsv3/jquery.mobile-1.2.0.min.js"></script>
<script src="jsv3/jquery-1.8.3.js"></script>
<script src="jsv3/turn.min.js"></script>
<script src="jsv3/onload_mobile.js"></script>
<script src="jsv3/jquery-ui-1.9.2.custom.min.js"></script>
<script src="jsv3/jquery.viewport.min.js"></script>
<script src="jsv3/jquery.scraggable.js"></script> 
```

未捕获的类型错误：无法读取未定义的属性“移动”

（类型错误：使用 FireBugs 错误报告未定义 a）

根据官方网站，顺序是第一个，但是，第一个似乎没有显示，而第二个对于我的情况来说是正常的。使用二阶是否正确，还有，为什么会出现这个错误？是因为我使用桌面浏览器查看页面吗？对不起，移动网络开发的新手，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:22:33.007

问题是由于jquery mobile和jquery ui之间的冲突

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T23:10:34.653

我有同样的问题。这是我现在的订单并且可以正常工作

```
 <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    <script language="javascript" src="js/scripts.js"></script> 
```

# javascript - javascript 0*这个

> ID：13925690
> 
> 赞同：4
> 
> 时间：2012-12-18T03:07:40.103
> 
> 标签：javascript, this

我正在阅读一些 Firefox 扩展的源代码，我看到了一些类似的表达式

```
0*this; 
```

剂量这个表达意味着什么？

ps：我是中国人，如果我的英文有问题，请告诉我，谢谢！

这是扩展的功能；

```
function inGetter(){
   0*this;
   var gin=  Components.lookupMethod(this,"innerHTML")();
   gin=String.newTainted(gin,"divElement.INNERHTML");

   if(__domIntruderObj.settings.enabled  )
      __domIntruderObj.log("Getter",this.tagName+".value",gin, __domIntruderObj.util.getCallStack(arguments));
   return gin;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T04:43:12.457

该代码是[XSS 检测 Firefox 扩展](http://code.google.com/p/dominator/source/browse/trunk/js/jsInject_obj_debug.js)的一部分。

正如另一个答案中提到的，乘法会导致调用引擎的内部`DefaultValue`方法。发生的事情是：它在抛出错误之前`valueOf`尝试。`toString`例如，

```
2 * { valueOf: function () { return 3; }} // 6
2 * { toString: function () { return '4'; }} // 8
2 * { toString: function () { return this; }} // TypeError 
```

所以这个副作用可以用来获取对象的一些信息。特别是，代码中有一些[自定义`toString`实现](http://code.google.com/p/dominator/source/browse/trunk/js/jsInject_obj_debug.js#845)，我认为这是用来生成一些调用堆栈日志的。不过我还没有真正深入细节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T03:29:36.057

全局执行上下文中的值`this`是全局对象。在函数上下文中可以是任何对象，或者在严格模式下，可以是任何值，包括 undefined。

因此，首先`this`将使用[ToPrimitive](http://www.ecma-international.org/ecma-262/5.1/#sec-9.1)（依次调用[DefaultValue ）将结果转换为原始值，然后使用](http://www.ecma-international.org/ecma-262/5.1/#sec-8.12.8)[ToNumber](http://www.ecma-international.org/ecma-262/5.1/#sec-9.3)将结果转换为数字。所有这些的结果将是一个数字或 NaN。

因此 的结果`0*this`将是`0`或`NaN`，具体取决于是分别`this`转换为数字还是`NaN`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T03:32:17.010

我看到的唯一棘手的部分是：

```
typeof 1 => "number"
0*1 =>  0

typeof null => "object"
0*null => 0 
```

在任何其他情况下，结果将是`NaN`

这也有有趣的方法 bw

```
typeof NaN => "number" 
```

`null`但正是在这里，我想这是从其他类型中整理出所有数字的聪明方法。

# c++ - 有人可以给我一些关于使用数组在 C++ 中打印出丰富、完美和不足的数字的技巧吗？

> ID：13925691
> 
> 赞同：-1
> 
> 时间：2012-12-18T03:07:53.047
> 
> 标签：c++, arrays, perfect-numbers

这是我的一些代码：我无法弄清楚如何通过 perfectTest int 传递数组。我可以选择如果 n 为 -1 则打印出它是一个不足的数字，如果 n 为 0 则打印出它是一个完美的数字，如果 n 是 1 则打印出它是一个丰富的数字编号，但我需要在其中合并数组。我需要一些提示。

```
//prototype
int perfectTest(int n);

//function
int perfectTest(int n)

{   bool perfect;
    int answer;
    int perfectSum = 0;
    perfect = false;

    for(int i=1; i<=n/2; i++)
    {
        if(n % i==0)
            perfectSum = i;
    }

    if(perfectSum == n)
        perfect = true;
        answer = perfectSum;
}

//main function

int main()
{
    char option;
    int  n, m;
    bool InService = true;
    char perfectTestingOption;
    int  perfectNum;
    bool perfect = true;
    int factor;

    while (InService == true)
    {
    cout << "\t\t\nWelcome! Choose an option below\n" << endl;
    cout << "A = Perfect number testing" << endl;
    cout << "B = Greatest common divisors and least common multiples" << endl;
    cout << "C = Factorization of natural numbers" << endl;
    cout << "Q = Quit the program\n" << endl;
    cout << "Enter your choice:" << endl;
    cin >> option;

    if (option == 'A' || 'a')
    {
        cout << "\t\t\nWhich option would you like?\n" << endl;
        cout << "1" << endl;
        cout << "2" << endl;
        cout << "3" << endl;
        cout << "4" << endl;
        cin >> perfectTestingOption;

        if (perfectTestingOption == '1')
        {
            cout << "Enter a positive integer to check if it is a perfect number." << endl;
            cin >> perfectNum;

        perfectTest(0);

        for( );
        if (n == -1)
        {
            cout << "That number is a deficient number" << endl;
        }

        else if (n == 0)
        {
            cout << "That number is a perfect number" << endl;
        }

        else if (n == 1)
        {
            cout << "That number is a abundant number" << endl;
        }

        else
        {
            cout << "Number is invalid" << endl;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T04:53:09.510

数组只不过是通过内存中某个基地址的偏移来寻址的数据块。如果您有基地址、元素数量和元素的数据类型，则您有足够的信息将数据视为数组。

您可以直接声明数组 -

```
int array[SIZE]; 
```

其中`SIZE`是一些整数，表示数组中的元素数。请注意，对于较大的 值，逐字声明是一个*坏主意*`SIZE`，因为这种语法在堆栈上分配数组，相对于主内存的大小，它对大小有严格的限制。

相反，您可以分配指针，然后将它们初始化为指向某个堆空间 -

```
int * array = new int[SIZE]; 
```

*这会为整数块动态*分配一些内存，并为您提供第一个“插槽”的地址。事实证明这已经足够了，因为下一位中的括号语法起到“偏移”运算符的作用。

要访问单个元素，一旦声明了数组变量：

```
int foo = array[idx] 
```

`idx`一些int在哪里。例如，如果`idx`were 等于 1（或者用文字 1 替换它，或者用计算为整数 1 的变量或表达式替换它），我们将在第一个元素“右侧”的 slot 1 槽中获取整数。回想一下，C(++) 中数组中的第一个元素的索引为 0，因为程序员很疯狂，喜欢用 0 来索引事物（并且因为括号运算符指定了从第一个元素的地址开始的*偏移量）。*

我们如何将数组传递给函数？如果我们知道每个数组元素的数据类型以及数组长度，则传递它们的内存地址就足够了。*通过并检查数组长度非常重要！*不这样做会导致可怕的后果，因为您超出了数组的边界并开始覆盖程序中的其他值。（更高级的数据结构和其他编程语言可以自动进行边界检查。由于我们使用的是裸数组，所以边界检查是*我们的*责任。）

现在让我们回到原来的问题。假设我们有一个函数`int f(int i)`可以对进来的任何东西做一些很酷的事情。我们想要“arrayify”这个函数，以便它接受数组并返回数组。

我们将利用这样一个事实，即我们确切地知道我们的数组有多长，因为在我们的例子中，输出数组的大小与输入数组的大小相同。所以我们也不必担心将这个数字从数组化函数中传递出去，尽管有一些简单的技术可以做到这一点。

我们做这样的事情：

```
int * __f(int * __i, int ilen)
{
    int * output = new int[ilen];
    for(int offset = 0; offset < ilen; offset++)
    {
        output[offset] = f(__i[offset]);
    }
    return output;
} 
```

这个函数接受一个包含`ilen`整数的整数数组，并输出应用`f`到每个整数的结果。请注意，此函数会分配新的内存，稍后您将不得不这样做`delete[]`。通过一些简单的修改，您可以更改此函数以就地修改数组。

让我们逐行分解：

```
int * __f(int * __i, int ilen) 
```

函数签名。这告诉我我将地址放入一个`ilen`整数数组，并将地址返回到另一个这样的数组。

```
 int * output = new int[ilen]; 
```

为我们的输出分配新内存。如果你完成了一块内存`foo`，你应该`delete[] foo`在完成后；否则内存将保持分配状态并占用空间，直到您的程序终止。如果您想了解更多信息，请阅读动态内存分配。

```
 for(int offset = 0; offset < ilen; offset++)
    {
        output[offset] = f(__i[offset]);
    } 
```

对于我们数组中的每个元素（由`offset`计数器索引），我们`f`对输入数组的相应元素执行`__i`，并将数组的正确元素设置为`output`结果。

```
 return output; 
```

最后，我们返回我们构造的数组。从技术上讲，我们返回 a `int *`，但这只是说“一个或多个整数的内存地址”的一种奇特方式。

`*`在这篇文章中，我一直在使用指针语法 ( )。对于很多人来说，对指针的深入理解需要一些时间来培养（包括我自己；我已经好几年没有“得到”指针了！）。简而言之：

*   形式的变量`int * foo`包含内存地址。从语义上讲，这个内存地址被指定为指向一个`int`. 但实际上，地址只是一个地址。（内存地址是对应于内存中特定单元的数字。您可以将内存单元视为连续的地址；也就是说，从我们的角度来看，单元 100 与单元 101“相邻”。当我们给内存编号时，我们使用 1 字节的单元大小。较大结构的地址，如 4 字节`int`或 s 数组`int`，是第一个元素的地址。）
*   一旦我们声明了`foo`， then`foo`本身就是指存储在其中的*地址*。如果我们想要`foo`指向的值，我们说`*foo`。在这种`*`情况下， 是*解引用*运算符：它接受一个内存地址并返回那里的内容。
*   如果我们想要一个变量的地址`bar`，我们说`&bar`。在`&`这个上下文中是*地址*操作符：它接受一个变量并告诉你它在哪里。
*   您可以从指针中添加和减去：`foo + 3`是一个完全有效的内存地址。不过要小心！您添加和减去的每个“1”都不是一个存储单元，而是多个等于数组封装的类型大小的存储单元。在我们的例子中，因为`int`在大多数现代平台上是 4 字节，所以`foo + 3`将 3*4 = 12 个内存单元添加到 的地址`foo`，而不是 3。
*   指针和数组可以松散地互换。特别是`foo[n]`，对于任何 n 值，都可以正常工作，正如您所期望的那样。

# apache-flex - 如何使用 Flex Mobile 发送 SOAP 请求和接收响应？

> ID：13925699
> 
> 赞同：0
> 
> 时间：2012-12-18T03:09:46.507
> 
> 标签：apache-flex, mobile, soap, soap-client

我是 flex 移动应用程序的新手，需要使用我的 flex 移动应用程序向 Web 服务发送肥皂请求，有人知道任何教程或示例吗？到目前为止，我发现的内容与 flex 应用程序有关，而不是与移动应用程序有关。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T03:28:29.800

使用[WebService](http://livedocs.adobe.com/flex/3/html/help.html?content=data_access_3.html)标记。关于它的文档应该足以让您入门。

# c# - 查询工作日和节假日

> ID：13925706
> 
> 赞同：-2
> 
> 时间：2012-12-18T03:11:59.460
> 
> 标签：c#, sql-server

我有两张桌子：

`Holiday`和`EmpLog`

我只需要选择不存在的日期`Emplog`（那些日子是 WEEKDAYS 并且不等于仅限假期）

例如，我没有记录这一天：2012 年 12 月 18 日。

所以输出将是 2012 年 12 月 18 日

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T05:22:32.793

根据这个问题，我假设以下内容：

1.  您有一个 EmpLog 表，其中包含员工在场的所有日期的日期戳。
2.  您有一个假期表，其中包含周末或假期的日期列表
3.  您需要找出所有工作日的日期，但未记录给定员工

如果这些假设是正确的，那么此代码将起作用：

```
--Declare variables to hold date values 
DECLARE @MyDate    DATETIME, 
        @FirstDate DATETIME, 
        @LastDate  DATETIME 

SELECT @MyDate = Getdate() -- OR Pass whatever date you want 

--Populate variable with values of first date and last date of the given month 
SELECT @FirstDate = CONVERT(VARCHAR(25), Dateadd(dd, -( Day(@mydate) - 1 ), 
                                         @mydate), 
                           101), 
       @LastDate = CONVERT(VARCHAR(25), Dateadd(dd, -( Day( 
                                        Dateadd(mm, 1, @mydate)) ), 
                                                    Dateadd(mm, 1, @mydate)), 
                   101) 

--Declare table variable to hold date values for the entire month 
DECLARE @AllDates TABLE 
  ( 
     datevalue DATETIME 
  ) 
DECLARE @Lastday INT 

SET @Lastday = Datepart(d, @LastDate) 

DECLARE @Days INT 

SET @Days = 1 

-- Populate table variable with all days of the month 
WHILE @Days <= @Lastday 
  BEGIN 
      INSERT INTO @AllDates 
      SELECT @FirstDate 

      SET @FirstDate = Dateadd(d, 1, @FirstDate) 
      SET @Days = @Days + 1 
  END 

--Query joining the EmpLog table and Holiday Table, using Left Outer Join  
SELECT AD.datevalue 
FROM   @AllDates AD 
       LEFT OUTER JOIN emplog EL 
                    ON AD.datevalue = EL.datevalue 
       LEFT OUTER JOIN holiday H 
                    ON AD.datevalue = H.datevalue 
-- Where clause to return only dates that do not appear in EmpLog or Holiday tables 
WHERE  EL.datevalue IS NULL 
       AND H.datevalue IS NULL 
```

希望这可以帮助。

拉詹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T03:15:53.663

你的意思是这样的

```
select column1 
from thistable 
left join otherTable on 
thisTable.column1 = otherTable.column1 
Where thisTable.column1 IS NULL 
```

# javascript - CSS 到 AI/矢量

> ID：13925710
> 
> 赞同：-1
> 
> 时间：2012-12-18T03:12:29.853
> 
> 标签：javascript, css, image, svg, pdf-generation

我正在使用 css/js 构建一个传单生成器。我想将最终产品输出到分层的 ai/vector。有 SVG，但我对它还不够熟悉，无法判断它是否有用。有人对我可以探索实现这一目标有什么建议吗？服务器将是节点，我当然希望服务器端处理。到目前为止，使用 PDF 是一种选择，但尚未找到如何分辨其上的图层（我承认我没有深入研究它 - 只是想立即获得一般视图）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:09:04.277

如果您的目标是矢量输出，那么 SVG 绝对是一个不错的选择。但是，您似乎想先使用 HTML，然后将其转换为某种矢量格式。使用 JavaScript 直接在浏览器中生成和操作 SVG 可能是一个更好的选择，可以避免转换过程中的麻烦，但是转换可能看起来像这样。您可以使用标准 DOM 方法来操作 SVG，也可以使用[Raphaël](http://raphaeljs.com/)之类的库。不过，有一些警告：

*   您必须自己处理文本换行符，因为 SVG 1.2 的`<textArea>`元素尚未得到广泛支持。
*   使文本左对齐和右对齐必须使用在操作文本时需要调整的[`word-spacing`属性。](http://www.w3.org/TR/SVG/text.html#WordSpacingProperty)您必须使用该`getBBox()`方法检查文本长度并每次重新计算字间距。
*   SVG 没有动态回流。位置不会根据其他元素的宽度/高度而改变。对于生成传单之类的东西，这可能被认为是更好的选择，因为一些微小的变化不会破坏整个“页面”布局。
*   `contenteditable="true"`SVG不支持随意编辑 SVG 文本。

考虑到上述限制的一种可能的解决方法是`<textArea>`，对齐文本和可编辑文本是在 SVG 中使用 HTML，[`<foreignObject>`](http://www.w3.org/TR/SVG/extend.html#EmbeddingForeignObjects)并且仅将其转换为真正的 SVG 作为最后一步。

在 SVG 中，层是使用`<g>`（“组”）元素实现的。

# mysql - 多对多查询标记对象

> ID：13925711
> 
> 赞同：1
> 
> 时间：2012-12-18T03:12:34.893
> 
> 标签：mysql

我有这个数据库模式。我只是为了简单起见而调用我标记对象的东西：

## 用户

*   用户身份
*   登录

## 用户到对象表（多对多）

*   用户身份
*   object_id

## 对象表

*   object_id
*   object_stuff

## 使用 user_id 表标记的对象（带有额外列的多对多）

*   用户身份
*   object_id
*   tag_id

## 标记表

*   tag_id
*   标签名

我一直在使用这样的查询来获取特定用户的对象以及对象的标签（如果用户标记了任何标签）。**如果您认为可以优化这一点，请随时告诉我**。

```
@user_id = 'whatever user_id I want';
SELECT 
    o.object_id AS object_id,
    o.object_stuff AS object_stuff,
    IF (tags.tag_name IS NOT NULL, GROUP_CONCAT(tags.tag_name SEPARATOR '|'), 'N/A') AS tags
FROM  object_table AS o
LEFT OUTER JOIN  obj_to_users_table AS o2u ON o.object_id = o2u.object_id
LEFT OUTER JOIN  users AS u ON u.user_id = o2u.user_id 
LEFT OUTER JOIN  obj_to_tag_users AS o2tu ON o.object_id = o2tu.object_id AND u.user_id = o2tu.user_id
LEFT OUTER JOIN  tags AS t ON t.tag_id = o2t.tag_id 
WHERE u.user_id = @user_id GROUP BY o.object_id 
```

这将产生如下结果：

```
object_id     object_stuff        tags
1             stuff1...           tag1|tag2|tag3
2             stuff2...           tag4|tag6|tag1
3             stuff3...           tag7|tag2|tag5 
```

我的问题是，例如，我想搜索标记为“tag2”的对象，我应该得到：

```
object_id     object_stuff        tags
1             stuff1...           tag1|tag2|tag3
3             stuff3...           tag4|tag2|tag1 
```

但是相反，我丢失了该对象附带的其他标签：

```
object_id     object_stuff        tags
1             stuff1...           tag2
3             stuff3...           tag2 
```

**如何修改我的 WHERE 子句，以便我可以获得标记为“tag2”的对象，同时保留该对象在结果集中具有的其他标记？**

```
... WHERE u.user_id = @user_id AND t.tag_name LIKE '%tag2%' ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:40:02.877

首先，计算级联结果。

接下来，针对这些连接的结果执行搜索以保留标签的分组：

```
SELECT * 
FROM
(
    SELECT 
        o.object_id AS object_id,
        o.object_stuff AS object_stuff,
        IF (tags.tag_name IS NOT NULL, 
            GROUP_CONCAT(tags.tag_name SEPARATOR '|'), 'N/A') AS tags
    FROM  object_table AS o
    LEFT OUTER JOIN  obj_to_users_table AS o2u 
        ON o.object_id = o2u.object_id
    LEFT OUTER JOIN  users AS u 
        ON u.user_id = o2u.user_id 
    LEFT OUTER JOIN  obj_to_tag_users AS o2tu 
        ON o.object_id = o2tu.object_id AND u.user_id = o2tu.user_id
    LEFT OUTER JOIN  tags AS t ON t.tag_id = o2t.tag_id 
    WHERE u.user_id = @user_id 
    GROUP BY o.object_id
) sub
WHERE sub.tags LIKE '%tag2%' 
```

**编辑：**

* * *

这是一个使用`EXISTS`. 我还将 s 切换`LEFT JOIN`为`INNER JOIN`s，因为搜索特定标签应该可以消除任何`objects`标签`tags`。

虽然这个查询看起来更复杂，但它应该有更好的机会使用任何可用的索引。

我还提到过使用一组额外的`INNER JOIN`s 来执行相同类型的查询，但是这样看起来会更加复杂，因为您仍然必须使用子查询来`DISTINCT`消除额外`JOIN`的 s引入的任何可能的重复项...所以我建议`EXISTS`改用...

```
SELECT 
    o.object_id AS object_id,
    o.object_stuff AS object_stuff,
    GROUP_CONCAT(t.tag_name SEPARATOR '|') AS tags
FROM  object_table AS o
INNER JOIN  obj_to_users_table AS o2u 
    ON o.object_id = o2u.object_id
INNER JOIN  users AS u 
    ON u.user_id = o2u.user_id 
INNER JOIN  obj_to_tag_users AS o2tu 
    ON o.object_id = o2tu.object_id AND u.user_id = o2tu.user_id
INNER JOIN tags AS t 
    ON t.tag_id = o2t.tag_id
WHERE 
    u.user_id = @user_id 
    AND EXISTS (
        SELECT 1
        FROM tags AS targetTag
        WHERE 
            targetTag.tag_id = o2t.tag_id
            AND targetTag.tag_name = 'tag2'
    )
GROUP BY o.object_id 
```

# sql-server - SSIS 包安装错误

> ID：13925713
> 
> 赞同：2
> 
> 时间：2012-12-18T03:12:58.793
> 
> 标签：sql-server, ssis

当我尝试在服务器上安装我的包时出现此错误

```
Loading the package "E:\SomeFolder\SomePackage.dtsx".
Error: Could not save the package "E:\SomeFolder\SomePackage.dtsx" to SQL Server "(local)". 
Exception details: Microsoft.SqlServer.Dts.Runtime.DtsRuntimeException: The package failed to load due to error 0xC0011008 "Error loading from XML. No further detailed error information can be specified for this problem because no Events object was passed where detailed error information can be stored.". This occurs when CPackage::LoadFromXML fails.
 ---> System.Runtime.InteropServices.COMException (0xC0011008): The package failed to load due to error 0xC0011008 "Error loading from XML. No further detailed error information can be specified for this problem because no Events object was passed where detailed error information can be stored.". This occurs when CPackage::LoadFromXML fails.

   at Microsoft.SqlServer.Dts.Runtime.Wrapper.ApplicationClass.LoadPackage(String FileName, Boolean loadNeutral, IDTSEvents100 pEvents)
   at Microsoft.SqlServer.Dts.Runtime.Application.LoadPackage(String fileName, IDTSEvents events, Boolean loadNeutral)
   --- End of inner exception stack trace ---
   at Microsoft.SqlServer.Dts.Runtime.Application.LoadPackage(String fileName, IDTSEvents events, Boolean loadNeutral)
   at Microsoft.SqlServer.Dts.Runtime.Application.LoadPackage(String fileName, IDTSEvents events)
   at Microsoft.SqlServer.Dts.Deployment.DtsInstaller.SavePackageToSqlServer(WizardInputs wizardInputs, String packagePassword, Boolean bUseSeverEncryption, String serverName, String userName, String password, String packageFilePath, List`1 configFileNames, String packagePath)
   at Microsoft.SqlServer.Dts.Deployment.DtsInstaller.InstallPackagesToSqlServer(WizardInputs wizardInputs) 
```

我正在做什么重建 SSIS 项目并在服务器上复制部署文件。一旦它在那里，我运行 SSISDeploymentManifest 文件。

这是分步过程的屏幕截图： ![在此处输入图像描述](../Images/caf5e1955adbf91ee9eaacd061da9337.png) ![在此处输入图像描述](../Images/1b9e9dacbe30e4a19bd30c11491b2bf4.png) ![在此处输入图像描述](../Images/b1a1df954acb415fd4a07000af51c482.png) ![在此处输入图像描述](../Images/185911c910a33b4227b9b1b7915b1083.png) ![在此处输入图像描述](../Images/9e84e592d28d2d99f78781b8a4db1c3b.png)

这以前可以工作，但我不知道为什么它突然停止安装？我所做的唯一更改是：

1.  将项目从2008年升级到VS2010，升级后在我的本地机器上运行良好
2.  做了一些小的代码更改，但我想这不会影响安装。

现在我做错了什么？

顺便说一句，我正在安装到 SQL Server 2008

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:36:29.833

通过使用 VS2010，您已将包升级到 SQL 2012 级别。您将无法再在 SQL 2008 上加载或运行该包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T03:39:32.167

> > 升级后它在我的本地机器上运行良好

你的意思是它在 Visual Studio 中运行良好还是在本地 SQL Server 中运行良好？

猜测一下：您无法将升级到 VS2010 的包导入 SQL 2008。

您为什么不比较实际的 XML（将 2010 和 2008 DTSX 文件加载到 XML 编辑器中），看看文件有多么不同。

# javascript - 台北时间怎么改？

> ID：13925716
> 
> 赞同：1
> 
> 时间：2012-12-18T03:13:08.263
> 
> 标签：javascript

> **可能重复：**
> [在javascript中将日期转换为另一个时区](https://stackoverflow.com/questions/10087819/convert-date-to-another-timezone-in-javascript)

如何让这个节目得到台北的时间？他们有什么需要解决的吗？还是我需要为它添加一些代码？

```
var yudan = "";
var now = new Date();
var month = now.getMonth() + 1;
var date = now.getDate();
var year = now.getFullYear();
if (year < 2000) year = year + 1900;

document.write(year + "." + yudan + month + "." + date + "."); 
```

* * *

```
document.write("<span id=\"yudan_clock\"><\/span>");
var now,hours,minutes,seconds,timeValue;
function yudan_time(){
now = new Date();
hours = now.getHours();
minutes = now.getMinutes();
seconds = now.getSeconds();
timeValue = (hours >= 12) ? " " : " ";
timeValue += ((hours > 12) ? hours - 0 : hours) + ":";
timeValue += ((minutes < 10) ? " 0" : " ") + minutes + ":";
timeValue += ((seconds < 10) ? " 0" : " ") + seconds + "";
document.getElementById("yudan_clock").innerHTML = timeValue;
setTimeout(yudan_time, 100);}
yudan_time(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T04:57:36.207

如果问题是让时钟显示台北的时间，请使用该`getTimezoneOffset()`方法。这使您可以定义 UTC/GMT 和所需时区（在台北为 UTC+8）之间的时间偏移量。然后，您可以使用一组 UTC 计时方法，例如`now.getUTCMonth()`代替`now.getMonth()`.

所以这就是您的代码的外观：

```
var yudan = "";
var now = new Date();
var month = now.getUTCMonth() + 1;
var date = now.getUTCDate();
var year = now.getUTCFullYear();
if (year < 2000) year = year + 1900;
document.write(year + "." + yudan + month + "." + date + ".");

document.write("<span id=\"yudan_clock\"><\/span>");
var now,hours,minutes,seconds,timeValue;
function yudan_time(){
now = new Date();
hours = now.getUTCHours() + (now.getTimezoneOffset()/60);
minutes = now.getUTCMinutes();
seconds = now.getUTCSeconds();
timeValue = (hours >= 12) ? " " : " ";
timeValue += ((hours > 12) ? hours - 0 : hours) + ":";
timeValue += ((minutes < 10) ? " 0" : " ") + minutes + ":";
timeValue += ((seconds < 10) ? " 0" : " ") + seconds + "";
document.getElementById("yudan_clock").innerHTML = timeValue;
setTimeout(yudan_time, 100);}
yudan_time(); 
```

请记住，该`getTimezoneOffset()`方法以分钟为单位返回一个值；对于台北，它将返回 480，因此您需要除以 60 才能获得小时数。

希望这可以帮助！

# javascript - 如何使导航栏随着页面滚动到这样的某个点？

> ID：13925717
> 
> 赞同：0
> 
> 时间：2012-12-18T03:13:17.453
> 
> 标签：javascript, html, css

如何使导航栏如下所示，当用户向下滚动时，在某一点之后，导航栏停留在左侧并随着用户向下滚动而滚动：

[http://developer.android.com/design/get-started/ui-overview.html](http://developer.android.com/design/get-started/ui-overview.html)

理想情况下想知道是否有一个简单的javascript解决方案，或者jquery是否是首选方法。使用 div 块将不胜感激。我知道有位置：相对；属性，但我不知道如何将它与（javascript？）一起使用，使其仅在用户向下滚动页面超过某个点后才会粘住。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T03:46:36.603

You can do a lot of digging by inspecting elements. I took a look at the nav and it has an `id` of `devdoc-nav`. If you go into Resources they have a js file called `doc.js` that has this code:

```
 // Set up fixed navbar
  var prevScrollLeft = 0; // used to compare current position to previous position of horiz scroll
  $(window).scroll(function(event) {
    if ($('#side-nav').length == 0) return;
    if (event.target.nodeName == "DIV") {
      // Dump scroll event if the target is a DIV, because that means the event is coming
      // from a scrollable div and so there's no need to make adjustments to our layout
      return;
    }
    var scrollTop = $(window).scrollTop();    
    var headerHeight = $('#header').outerHeight();
    var subheaderHeight = $('#nav-x').outerHeight();
    var searchResultHeight = $('#searchResults').is(":visible") ? 
                             $('#searchResults').outerHeight() : 0;
    var totalHeaderHeight = headerHeight + subheaderHeight + searchResultHeight;
    var navBarShouldBeFixed = scrollTop > totalHeaderHeight;

    var scrollLeft = $(window).scrollLeft();
    // When the sidenav is fixed and user scrolls horizontally, reposition the sidenav to match
    if (navBarIsFixed && (scrollLeft != prevScrollLeft)) {
      updateSideNavPosition();
      prevScrollLeft = scrollLeft;
    }

    // Don't continue if the header is sufficently far away 
    // (to avoid intensive resizing that slows scrolling)
    if (navBarIsFixed && navBarShouldBeFixed) {
      return;
    }

    if (navBarIsFixed != navBarShouldBeFixed) {
      if (navBarShouldBeFixed) {
        // make it fixed
        var width = $('#devdoc-nav').width();
        $('#devdoc-nav')
            .addClass('fixed')
            .css({'width':width+'px'})
            .prependTo('#body-content');
        // add neato "back to top" button
        $('#devdoc-nav a.totop').css({'display':'block','width':$("#nav").innerWidth()+'px'});

        // update the sidenaav position for side scrolling
        updateSideNavPosition();
      } else {
        // make it static again
        $('#devdoc-nav')
            .removeClass('fixed')
            .css({'width':'auto','margin':''})
            .prependTo('#side-nav');
        $('#devdoc-nav a.totop').hide();
      }
      navBarIsFixed = navBarShouldBeFixed;
    } 

    resizeNav(250); // pass true in order to delay the scrollbar re-initialization for performance
  });

  var navBarLeftPos;
  if ($('#devdoc-nav').length) {
    setNavBarLeftPos();
  } 
```

You don't necessarily have to understand everything that is going on but the basic idea I want to show you is that all you see **is done through CSS.** The javascript is simply used to apply that CSS at the right times. When the user scrolls past a certain point, the webpage applies a class called `fixed` (you can find this in the `default.css`)

```
 #devdoc-nav.fixed {
  position: fixed;
  margin:0;
  top: 20px; } 
```

So yeah hopefully from here you can get an idea. There are many ways to go about doing this but since you showed this example, I am simply showing you the code they have and maybe you can draw something from it. If you need help, don't hesitate to comment.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T03:15:58.023

Twitter Bootstrap 有一个 'affix' 组件可以为你做这件事 - [http://rc.getbootstrap.com/javascript.html#affix](http://rc.getbootstrap.com/javascript.html#affix)

如果你想自己写类似的东西，你需要：

*   将元素设置为“position:absolute”（如果将父元素设置为“position:relative”，这通常是可以的）。

*   制作一个 onscroll 事件处理程序，并在其中检查您的元素距视口顶部或底部的距离。

*   当您希望它保持可见时（例如，一旦用户向下滚动 100 像素），将位置设置为“固定”，当您不希望它时返回绝对位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T03:17:15.387

Anthony Garand 的[`sticky.js`](http://labs.anthonygarand.com/sticky)jquery 插件对我来说效果很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T03:18:38.067

如果您不想要其他插件，可以使用 jquery window.scrollTop() 来执行此操作。

# javascript - 单击某个 gridview 行时启用/禁用控件 ASP.NET

> ID：13925722
> 
> 赞同：0
> 
> 时间：2012-12-18T03:15:06.720
> 
> 标签：javascript, asp.net

我有一个通过 javascript 制作的可点击 gridview 行，其中每次单击 gridview 中的某个项目时，都会选择并突出显示整行。

所以这是我的javascript..

```
 <script type="text/javascript">
        $(function() {

            var RowID = $('#<%=RowKey.ClientID%>').val();
            if (RowID != "0") {
                $('#<%=UserGrid.ClientID%> tr[id=' + RowID + ']').css({ "background-color": "white", "color": "black" });
            }

            $('#<%=UserGrid.ClientID%> tr[id]').click(function() {
                $('#<%=UserGrid.ClientID%> tr[id]').css({ "background-color": "white", "color": "Black" });
                $(this).css({ "background-color": "Black", "color": "White" });
               $('#<%=RowKey.ClientID%>').val($(this).attr("id"));
            });

            $('#<%=UserGrid.ClientID%> tr[id]').mouseover(function() {
                $(this).css({ cursor: "hand", cursor: "pointer" });
            });

        });
    </script> 
```

当用户单击该行时，如何禁用网络表单中的某个按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T05:17:44.527

`$("#btnEditUser").attr("disabled", true);`
将不起作用，因为在运行时 id 会改变。
因此，如果您在该行中只有一个按钮，则可以如下所示。

```
<script type="text/javascript">
    $(function() {

        var RowID = $('#<%=RowKey.ClientID%>').val();
        if (RowID != "0") {
            $('#<%=UserGrid.ClientID%> tr[id=' + RowID + ']').css({ "background-color": "white", "color": "black" });
        }

        $('#<%=UserGrid.ClientID%> tr[id]').click(function() {
            $('#<%=UserGrid.ClientID%> tr[id]').css({ "background-color": "white", "color": "Black" });
            $(this).css({ "background-color": "Black", "color": "White" });
           $('#<%=RowKey.ClientID%>').val($(this).attr("id"));
           //this line will disable all the button of the row clicked
           $(this).find("input:button").attr("disabled", "disabled");
        });

        $('#<%=UserGrid.ClientID%> tr[id]').mouseover(function() {
            $(this).css({ cursor: "hand", cursor: "pointer" });
        });

    });
</script> 
```

或者你可以在你的按钮上放一个 css-calss 说 (.btnEdit) 你的功能会像这样

```
 <script type="text/javascript">
$(function() {

    var RowID = $('#<%=RowKey.ClientID%>').val();
    if (RowID != "0") {
        $('#<%=UserGrid.ClientID%> tr[id=' + RowID + ']').css({ "background-color": "white", "color": "black" });
    }

    $('#<%=UserGrid.ClientID%> tr[id]').click(function() {
        $('#<%=UserGrid.ClientID%> tr[id]').css({ "background-color": "white", "color": "Black" });
        $(this).css({ "background-color": "Black", "color": "White" });
       $('#<%=RowKey.ClientID%>').val($(this).attr("id"));
       //this line will disable all the button of the row clicked
       $(this).find(".btnEdit").attr("disabled", "disabled");
    });

    $('#<%=UserGrid.ClientID%> tr[id]').mouseover(function() {
        $(this).css({ cursor: "hand", cursor: "pointer" });
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T03:26:12.013

假设你的按钮有一个 myButton 的 id，你不能像这样向你的 onClick 处理程序添加一个语句：

```
$("#myButton").attr("disabled", "disabled"); 
```

# gradle - 提供编译不带war插件

> ID：13925724
> 
> 赞同：40
> 
> 时间：2012-12-18T03:15:22.423
> 
> 标签：gradle

我想为许多项目重用某些过滤器，所以我想提取它并使用单个 jar 将其添加到任何 Web 应用程序。

对于构建，我使用 Gradle 1.3 和以下`build.gradle`文件：

```
apply plugin: 'java'

dependencies {

    compile group:'org.slf4j', name:'slf4j-api', version:'1.7.+'

    testCompile group:'junit', name:'junit', version:'4.+'

    compile group:'org.springframework', name:'spring-web', version:'3.+'   

    compile group:'org.slf4j', name:'slf4j-log4j12', version:'1.6.+'
    compile group:'log4j', name:'log4j', version:'1.2.+'

    providedCompile group: 'javax.servlet', name: 'javax.servlet-api', version:'3.+'        

}

repositories {

    mavenCentral()

} 
```

如您所见，我需要 servlet api 才能成功编译此过滤器，所以我想像 maven 提供的依赖项一样添加它。

无论如何，运行后`gradle build`我收到以下错误：

> 在根项目“hibernate-conversation-context”上找不到参数 [{group=javax.servlet, name=javax.servlet-api, version=3.+}] 的方法 providedCompile()。

现在，我知道我不能在没有 WAR 插件的情况下使用提供的编译，但我需要项目是一个简单的 JAR。还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-12-18T12:21:24.513

`java`该插件没有开箱即用的此类配置。但是，您可以自己构建它，如下所示：

```
configurations { providedCompile }

dependencies {
    providedCompile "javax.servlet:javax.servlet-api:3.+"
}

sourceSets.main.compileClasspath += configurations.providedCompile
sourceSets.test.compileClasspath += configurations.providedCompile
sourceSets.test.runtimeClasspath += configurations.providedCompile 
```

这会添加配置，并将所有依赖项放在主类和测试类的编译类路径中。您还需要将它添加到 runtimeClasspath，因为根据 gradle DSL 文档，它不包括编译类路径。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-04T21:13:55.163

看看[SpringSource 中的 Gradle 插件 propdeps](https://github.com/SpringSource/gradle-plugins/tree/master/propdeps-plugin)。从项目描述：

> 为 Gradle 提供额外的可选和提供的依赖配置以及 Maven POM 生成支持。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-10-27T13:55:39.687

从**Gradle 2.12**开始，定义仅编译依赖项的问题最终通过新的“copmpileOnly”配置以简单自然的方式解决：

```
dependencies {
    compileOnly 'javax.servlet:servlet-api:2.5'
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-18T13:07:44.710

我最近写了一篇博文，正好涵盖了这种情况。它还向您展示了如何正确设置与 Eclipse 的集成。

[http://blog.codeaholics.org/2012/emulating-mavens-provided-scope-in​​-gradle/](http://blog.codeaholics.org/2012/emulating-mavens-provided-scope-in-gradle/)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-03-18T15:42:44.083

当您发现自己在使用 Gradle 2.12 时，将“providedCompile”更改为“compileOnly”。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-07-17T09:32:01.190

有一个更简单的方法：

```
configurations {    
    provided
    provided.extendsFrom(compile)
} 
```

然后你可以：

```
dependencies {  
    provided group: 'javax.servlet', name: 'javax.servlet-api', version:'3.+' 
} 
```

您还希望在 Eclipse 或 Idea 的生成项目文件中包含提供的库：

```
idea.module.scopes.PROVIDED.plus += configurations.provided
eclipse.classpath.plusConfigurations += configurations.provided 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-09-10T13:33:09.370

为了使 javadoc 工作，我必须添加以下内容：

```
javadoc.classpath=sourceSets.main.compileClasspath 
```

# c++ - 条件显式模板实例化

> ID：13925730
> 
> 赞同：7
> 
> 时间：2012-12-18T03:16:12.137
> 
> 标签：c++, templates, c++11

除了预处理器，我如何有条件地启用/禁用显式模板实例化？

考虑：

```
template <typename T> struct TheTemplate{ /* blah */ };

template struct TheTemplate<Type1>;
template struct TheTemplate<Type2>;
template struct TheTemplate<Type3>;
template struct TheTemplate<Type4>; 
```

在某些编译条件下，Type3 与 Type1 相同，Type4 与 Type2 相同。发生这种情况时，我得到一个错误。我想检测类型是相同的，而不是在 Type3 和 Type4 上实例化，如

```
// this does not work
template struct TheTemplate<Type1>;
template struct TheTemplate<Type2>;
template struct TheTemplate<enable_if<!is_same<Type1, Type3>::value, Type3>::type>;
template struct TheTemplate<enable_if<!is_same<Type2, Type4>::value, Type4>::type>; 
```

我已经转移自己的注意力来尝试 enable_if 和 SFINAE（我相信我知道它们为什么会失败），但只有预处理器起作用了（呃）。我正在考虑将类型放入元组或可变参数中，删除重复项，然后将其余部分用于实例化。

有没有办法根据模板参数类型有条件地启用/禁用显式模板实例化？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T10:36:24.570

```
template <typename T> struct TheTemplate{ /* blah */ };

template<int> struct dummy { };

template struct TheTemplate<Type1>;
template struct TheTemplate<Type2>;
template struct TheTemplate<conditional<is_same<Type1, Type3>::value, dummy<3>, Type3>::type>;
template struct TheTemplate<conditional<is_same<Type2, Type4>::value, dummy<4>, Type4>::type>; 
```

`Type3`这仍然会产生四个显式实例化，但在与相同的情况下它们不会重复`Type1`（除非`Type1`是`dummy<3>`！）

# mysql - 如何获取mysql中最后一条之前的最后一条记录？

> ID：13925732
> 
> 赞同：8
> 
> 时间：2012-12-18T03:16:19.943
> 
> 标签：mysql, sql, database, relational-database

如果最后一条记录是记录 35，如何获取表的记录 34？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-18T03:22:09.070

最简单的方法

```
SELECT * FROM tab ORDER BY col DESC LIMIT 1,1 
```

这将从第二个 LIMIT 1,1 开始选择一条记录，表示先跳过并选择下一个

必须完成 order by，以便 last 是 first 提到的 col 很可能是 id

如果您知道所需记录的编号，但为什么不能选择 id=34 的位置？

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-18T03:22:09.997

如果您*知道*有 35 条记录，则需要`limit 1 offset 34`.

如果要从*任何*集合中获取倒数第二个元素，可以反转集合的顺序并选择一个元素，偏移一个元素。您可以自己实现这一点，首先选择逆序集合的前两个元素，然后反转集合并选择第一个元素：

```
select * from
  (select * from my_table order by id desc limit 2) table_alias
order by id limit 1 
```

# iphone - 在 ipad 上下载 iphone 应用程序

> ID：13925733
> 
> 赞同：-1
> 
> 时间：2012-12-18T03:16:26.910
> 
> 标签：iphone, ipad

如果 iOS 应用程序目标设备设置为 iPhone，应用程序是否仍然可以在 iTune 商店中的 iPad 上下载？

我这样做是因为我想在 iPad 上使用 iPhone 界面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T03:19:12.110

iPad 可以在兼容模式下下载您的 iPhone 应用程序。它将以 1:1（1x 模式）或放大模式（2x 模式）显示，但在 2x 模式下会模糊。

建议制作 Universal 构建，以便在 iPad 中拥有不模糊的全屏应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T03:19:02.860

为什么不使用通用构建？它同时支持 iPad/iPhone。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T03:19:23.607

您可以在 iPad 上下载针对 iPhone 的应用程序，但它会作为 iPhone 应用程序运行（窗口大小适当，不会缩放以适应 iPad 的更大尺寸）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T03:20:16.337

如果您只制作 iPhone 应用程序，那么您可以在 iPad 上下载它。它将以 2X 模式运行，并且看起来不漂亮。

# css - CSS中的内联svg过滤器

> ID：13925736
> 
> 赞同：4
> 
> 时间：2012-12-18T03:16:47.363
> 
> 标签：css, svg

阅读此问题后：[CSS 中的内联 SVG](https://stackoverflow.com/questions/10768451/inline-svg-in-css)（在 Firefox 和 Chrome 上完美运行）

```
body { background-image: 
        url("data:image/svg+xml;utf8,<svg>........</svg>");
      } 
```

我尝试应用一些滤镜效果

```
filter: url("data:image/svg+xml;utf8,<svg>........</svg>#filter01") 
```

它适用于 FF，但不适用于 Chrome。

是什么原因，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:12:43.267

尝试对数据字符串使用转义，例如

```
filter: url("data:image/svg+xml;utf8,%3Csvg%3E........%3C/svg%3E#filter01") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T05:49:08.123

我不相信你能解决它。这只是 Firefox 完全支持的，现在这种用法将被 *-filter 属性取代。

# c# - 通过任务并行库创建任务时在 lambdas 中使用“out”

> ID：13925738
> 
> 赞同：1
> 
> 时间：2012-12-18T03:16:47.770
> 
> 标签：c#, lambda, task-parallel-library

我有以下无法编译的代码。我得到错误

> 不能在匿名方法、lambda 表达式或查询表达式中使用 ref 或 out 参数“messageLockToken”

我承认我是 Lambdas 的新手，对解决这个问题有点困惑。有谁知道我如何以编译器可接受的方式表达下面的逻辑？

```
public T Receive<T>(TimeSpan receiveTimeout, out Guid messageLockToken)
{
    // do work
}

public Task<T> ReceiveAsync<T>(TimeSpan receiveTimeout, out Guid messageLockToken)
{
    Task<T> sendQueueMsgTask = new Task<T>(() => Receive<T>(receiveTimeout, out messageLockToken));
    return sendQueueMsgTask;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:51:18.997

首先，即使编译，您的方法也不起作用。那是因为当您使用 时`new Task()`，您总是必须调用`Start()`它`Task`（或者，使用`Task.Run()`）。

现在，你不能在`out`这里使用参数，因为它没有多大意义。您想`Task`立即从方法返回，但这也意味着`Guid`立即返回。这意味着您的调用无法`Receive()`实际影响`out`参数的值。

我认为使用`Tuple`（如 Rawling 建议的）或自定义返回类型是这里的方法：

```
public Task<Tuple<T, Guid>> ReceiveAsync<T>(TimeSpan receiveTimeout)
{
    return Task.Run(
        () =>
        {
            Guid messageLockToken;
            var result = Receive<T>(receiveTimeout, out messageLockToken);
            return Tuple.Create(result, messageLockToken);
        });
} 
```

这假设您实际上想要这样做，请参阅 Stephen Toub 的文章[*我应该为同步方法公开异步包装器吗？*](http://blogs.msdn.com/b/pfxteam/archive/2012/03/24/10287244.aspx)出于为什么这样做可能不是一个好主意的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:25:18.360

由于您不能`out`在此处使用参数，因此您可以：

*   返回一个`Tuple<T, Guid>`（或使用自定义泛型类），或
*   通过一个`Action<Guid>`而不是`out Guid`（所以而不是`ReceiveAsync(ts, out myGuid)`你打电话`ReceiveAsync(ts, g => myGuid = g)`）

（我不认为有任何方法可以解决这个问题，仍然`out`向调用者公开参数；`out`应该在方法返回时填充参数，但在您的情况下并非如此。）

# plugins - 更新到 Adob e Illustrator 16.0.3 后 AI 插件的自定义光标丢失 (OS X)

> ID：13925741
> 
> 赞同：1
> 
> 时间：2012-12-18T03:17:11.763
> 
> 标签：plugins, cursor, adobe, adobe-illustrator

有人遇到过同样的事情吗？我们的 Adob​​e AI 插件有一个自定义光标。它是一个带有 XML 描述的 PNG 文件，PNG 和 XML 在 .r REZ 文件中声明。**sUser->SetCursor(resID, iResourceManager);** 用于设置光标。并且可以在AI CS6上运行，但是安装16.0.3更新包后，没有自定义光标，只有默认的黑色箭头。我知道此更新对光标进行了一些更改，因为它支持高清屏幕分辨率，但 AI 光标可以调整大小而不会丢失任何细节。我可以做些什么来添加我们的光标资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:28:53.313

我昨天刚刚处理了这个问题。`AIResourceManagerHandle`似乎是有效的，但无论我尝试什么，调用都会返回错误`sAIUser->SetCursor()`。`CANT`光标`PNGI`ID 正确，`XML_`热点 ID 正确，等等。我什至尝试为光标制作各种更高分辨率的 PNG，但这也无济于事。甚至还有更新版本的 SDK，但我对其进行了比较，唯一的变化是一些不相关的评论。

我只是通过使用 Mac 的平台代码来解决它，并坚持使用 Windows 的 Illustrator 代码。我们已经有了一个游标类，这使它变得更加容易（如果你还没有的话，你可能想要做一个）。它最终看起来像这样：

```
class Cursor
{
    public:
        Cursor(const int cursorID_);
        virtual ~Cursor();
        virtual void enable();

    private:    
        int __cursorID;
        #if defined(MAC_ENV)
            NSCursor* __cursorMac;
        #endif
};

bool getResourceData(
    const long type_,
    const int id_,
    char*& data__,
    int& size__
) const
{
    static const int oneMeg = 1048576;

    data__ = NULL;
    size__ = 0;

    AIDataFilter* aidf = NULL;
    AIErr error = sAIDataFilter->NewResourceDataFilter(
        yourPluginRef,
        type_,
        id_,
        "",
        &aidf
    );
    if(error != kNoErr || !aidf)
        return false;

    // This is the max size to read when going in to ReadDataFilter(),
    // and the actual size read when coming out.
    size_t tmpSize = oneMeg;

    data__ = new char[ oneMeg ];
    error = sAIDataFilter->ReadDataFilter(aidf, data__, &tmpSize);

    AIErr ulError = kNoErr;
    while(aidf && ulError == kNoErr)
    {
        ulError = sAIDataFilter->UnlinkDataFilter(aidf, &aidf);
    }

    if(error != kNoErr)
    {
        delete[] data__;
        return false;
    }

    size__ = tmpSize;
    return true;
}

Cursor::Cursor(const int cursorID_)
{
    this->__cursorID = cursorID_;

    #if defined(MAC_ENV)
        this->__cursorMac = nil;

        char* pngData = NULL;
        int pngDataSize = 0;
        if(!getResourceData('PNGI', this->__cursorID, pngData, pngDataSize))
            return;

        NSPoint hs = NSMakePoint(0.0, 0.0);
        char* xmlData = NULL;
        int xmlDataSize = 0;
        if(getResourceData('XML_', this->__cursorID, xmlData, xmlDataSize))
        {
            std::string xmlStr(xmlData, xmlDataSize);
            // Parse xmlStr however you prefer. If you have an XML parser, rock on.
            // Otherwise, the XML is so simple that an sscanf() call should work.

            delete[] xmlData;
            xmlData = NULL;
        }

        NSData* pngNSD = [[NSData alloc] initWithBytes:pngData length:pngDataSize];
        delete[] pngData;
        pngData = NULL;

        NSImage* pngNSI = [[NSImage alloc] initWithData:pngNSD];
        [pngNSD release];
        pngNSD = nil;

        this->__cursorMac = [[NSCursor alloc] initWithImage:pngNSI hotSpot:hs];
        [pngNSI release];
        pngNSI = nil;
    #endif
}

Cursor::~Cursor()
{
    #if defined(MAC_ENV)
        if(this->__cursorMac)
        {
            [this->__cursorMac release];
            this->__cursorMac = nil;
        }
    #endif
}

void Cursor::enable()
{
    #if defined(MAC_ENV)
        if(this->__cursorMac)
        {
            [this->__cursorMac set];
        }
    #elif defined(WIN_ENV)
        sAIUser->SetCursor(this->__cursorID, yourCursorRsrcMgr);
    #endif
} 
```

根据项目的配置方式，您可能需要将源文件设置为编译为 Objective-C++ 和/或`#import <AppKit/AppKit.h>`某处。

# c# - 屏幕截图非常慢

> ID：13925744
> 
> 赞同：0
> 
> 时间：2012-12-18T03:17:32.433
> 
> 标签：c#, bitmap, screen-capture

我正在编写一个可以截取屏幕截图的应用程序，它需要超快（几秒钟）然后处理它们。这是我用来执行此操作的代码 - 它可以工作但非常慢。

```
using System.Drawing;
using System.Drawing.Imaging;

public static Bitmap CaptureScreen()
{
    Bitmap BMP = new Bitmap(System.Windows.Forms.Screen.PrimaryScreen.Bounds.Width,
                            System.Windows.Forms.Screen.PrimaryScreen.Bounds.Height,
                            System.Drawing.Imaging.PixelFormat.Format32bppArgb);
    System.Drawing.Graphics GFX = System.Drawing.Graphics.FromImage(BMP);
    GFX.CopyFromScreen(System.Windows.Forms.Screen.PrimaryScreen.Bounds.X,
                        System.Windows.Forms.Screen.PrimaryScreen.Bounds.Y,
                        0, 0,
                        System.Windows.Forms.Screen.PrimaryScreen.Bounds.Size,
                        System.Drawing.CopyPixelOperation.SourceCopy);

    return BMP;
} 
```

用法 - ：

```
Bitmap im1 = new Bitmap(CaptureScreen()); 
```

上面的代码工作正常，但至少需要 5 秒才能处理。所以有人可以提供一种像上面那样的方法，除了更快，我也想使用前景窗口来捕获，而不是整个屏幕。

**编辑**这是比较代码！

```
private void timer2_Tick(object sender, EventArgs e)
{

    pictureBox1.Image = CaptureScreen();
    pictureBox2.Image = CaptureScreenOld();
    Bitmap im1 = (Bitmap)pictureBox1.Image;
    Bitmap im2 = (Bitmap)pictureBox2.Image;
    for (int y = 0; y < pictureBox1.Height; y++)
    {
        for (int x = 0; x < pictureBox1.Width; x++)
        {
            // Get the color of the current pixel in each bitmap
            Color color1 = im1.GetPixel(x, y);
            Color color2 = im2.GetPixel(x, y);

            // Check if they're the same
            if (color1 != color2)
            {
                // If not, generate a color...
                Color myRed = Color.FromArgb(90, 0, 0);
                // .. and set the pixel in one of the bitmaps
                im2.SetPixel(x, y, myRed);
                pictureBox2.Image = im2;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T04:49:43.383

好吧，用`GetPixel`一堆时间来比较像素*真的很*慢。而是将您的位锁定到一个数组中：

```
private static void CompareBitmaps(Bitmap a, Bitmap b) {
    Stopwatch sw = new Stopwatch();

    sw.Start();

    var lockRect = new Rectangle(0, 0, a.Width, a.Height);
    BitmapData ad = a.LockBits(lockRect, ImageLockMode.ReadWrite, PixelFormat.Format32bppArgb);
    BitmapData bd = b.LockBits(lockRect, ImageLockMode.ReadWrite, PixelFormat.Format32bppArgb);

    Int32[] apixels = new Int32[ad.Width * ad.Height];
    Int32[] bpixels = new Int32[bd.Width * bd.Height];

    Marshal.Copy(ad.Scan0, apixels, 0, apixels.Length);
    Marshal.Copy(bd.Scan0, bpixels, 0, bpixels.Length);

    for(int i = 0; i < apixels.Length; i++) {
        if(apixels[i] != bpixels[i]) {
            unchecked {
                bpixels[i] = (int)0xff5a0000;
            }
        }
    }

    Marshal.Copy(bpixels, 0, bd.Scan0, bpixels.Length);

    a.UnlockBits(ad);
    b.UnlockBits(bd);

    sw.Stop();

    Console.WriteLine("CompareBitmaps took {0}.", sw.Elapsed);
} 
```

为此，我得到了大约 240 毫秒的时间；够了吗？

# silverlight - 我可以使用 Silverlight 卸载 GPU 上的数学运算吗？

> ID：13925753
> 
> 赞同：0
> 
> 时间：2012-12-18T03:19:07.693
> 
> 标签：silverlight, opencl, gpu, silverlight-5.0

我对 GPU 卸载感兴趣，并认为 Silverlight 可能能够以多平台方式将计算卸载到 GPU 上。

这可能吗？我可以使用哪些示例库？

Silverlight 是否有机会使用 OpenCL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:56:05.743

对于 GPU 卸载（在 Web 浏览器上下文中），您应该查看 WebGL 和 WebCL。我可能有偏见，但是像 Flash、Silverlight 和 Java 这样的专有插件几乎已经死了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T10:50:51.963

这个问题看起来像一个巨魔，但我会回答它；）

> 这可能吗？我可以使用哪些示例库？

仅对于 Windows，您可能能够使用 SL 4 COM 互操作功能进行破解，但我不会指望它。

Silverlight 不是多平台的：在 Windows 上运行全功能，在 MAC 上受限，并且在 Linux/Unix 上具有开发滞后......通过 Microsoft 未提供的 Moonlight 项目。

> Silverlight 是否有机会使用 OpenCL？

不，Silverlight 已经死了，而且从未真正活着（我也花了很多时间在这项技术上，几乎一无所获 :() 很可能 SL5 将是最后一个版本。

所以最好的办法是使用跨平台技术，如**Java**及其 OpenCL 绑定**JavaCL**：[http](http://code.google.com/p/javacl/) ://code.google.com/p/javacl/使用**Applets**或**JWS**部署。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T10:38:25.773

即使放弃 Silverlight 5 可能是最后一个版本的事实，微软目前也没有机会在其中支持 OpenCL/CUDA/etc...。

您可能会获得 DirectX 功能，因为它们在某些配置中支持当前的自定义着色器 (HLSL)，但不支持供应商特定 (CUDA) 或竞争 (OpenCL) 技术。

# javascript - 发布一个字节数组（Blob）

> ID：13925757
> 
> 赞同：0
> 
> 时间：2012-12-18T03:19:30.240
> 
> 标签：javascript, post, bytearray

我需要在发布文件之前对其进行加密。在 WebKit 中，我知道使用 FileWriter，我可以重写文件然后发布，但我的解决方案需要跨浏览器兼容。

我也可以把我所有的 blob 传递给一个 flash 上传器，但我会产生另一个问题。

javascript 中是否有将 ArrayBuffer 或字节数组作为文件发布的方法？

现在，我想到了 Ajax，但它可以处理 200MB 以上的文件吗？

[编辑]

有趣： [如何在 javascript 中将 dataURL 转换为文件对象？](https://stackoverflow.com/questions/6850276/how-to-convert-dataurl-to-file-object-in-javascript)

似乎可以通过 Ajax 发布 Blob。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T06:16:25.433

刚刚再次查看了上面的链接，按照caniuse.com的表，BlobBuilder兼容当前所有的浏览器，所以可以

1.  获取字节数组或任何其他数据
2.  将其转换为 base64
3.  将其转换为 blob
4.  使用您喜欢的方法使用 Ajax/xhr/FormData 将其作为普通文件发送

# c# - 从网页获取图像并显示（Windows Phone）

> ID：13925758
> 
> 赞同：0
> 
> 时间：2012-12-18T03:19:39.193
> 
> 标签：c#, windows-phone-7, http

我在从网站获取图像并在 Windows Phone 上显示时遇到了一些麻烦。图片链接每天都在变化（http://apod.nasa.gov/apod/astropix.html），但网站链接是一样的。

我见过很多人使用 HTMLAgility 包，但我认为我不能将它用于 Windows Phone。

如何从网页下载图像并将其显示在 imageview/picturebox 中？

我假设它会像 Parse Website > Get src string > load string > load image > show image。但真的很想得到一些关于如何做的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:11:05.743

嗨，这是一个帮助的代码块。我还没有遵循写下来的最佳实践：

```
 void ImageDownloader() 
    {
        WebClient client = new WebClient();
        client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(client_DownloadStringCompleted);
        client.DownloadStringAsync(new Uri("http://apod.nasa.gov/apod/astropix.html"));

    }

    void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        string str = e.Result.Remove(0,(e.Result.IndexOf("SRC=")+5));
        str = "http://apod.nasa.gov/apod/"+str.Substring(0, (str.IndexOf(".jpg")+4));
        ImageBrush imb = new ImageBrush();
        imb.ImageSource = new BitmapImage(new Uri(str));
        LayoutRoot.Background = imb;
    } 
```

Home 字符串“http://apod.nasa.gov/apod/”保持不变。

这里 LayoutRoot 是主网格。您可以根据自己的方便使用图像视图或图片框。

# r - 适合上下百分位线

> ID：13925760
> 
> 赞同：3
> 
> 时间：2012-12-18T03:19:59.707
> 
> 标签：r, ggplot2, data.table

我的数据或多或少看起来像这样（不知道如何粘贴图表）：

```
library(reshape2)
library(ggplot2)

df <- cbind(runif(2000,0,1000), rep(0,n=2000))
for (i in 1:nrow(df)) {
  df[i,2] <- runif(1, df[i,1], (10000-2*df[i,1])) 
}
colnames(df) <- c("x","y")
df.1 <- melt(data.frame(df), id="x")

p <- ggplot(df.1, aes(x=x, y=value))
p <- p + geom_point()
p <- p + geom_smooth()
p 
```

我需要一条位于底部 5% 的直线和一条位于顶部 95% 的直线，而不是显示的平滑线。一个问题是我有数百万分，所以我认为 data.table 是一个很好的前进方向：

```
library(data.table)
dt <- data.table(df)
dt[,xbin:=0]
for (i in 0:100) {
  x1 <- i*100
  x2 <- (i+1)*100
  dt[x>=x1 & x<x2, xbin:=x2]
}
setkey(dt,xbin)
result1.dt <- dt[,list(ymin=min(y), ymax=max(y)), by=key(dt)]
result1.df <- data.frame(result1.dt)

p <- p + geom_line(data=result1.df, aes(x=xbin, y=ymin))
p <- p + geom_line(data=result1.df, aes(x=xbin, y=ymax))
p 
```

线条还不是笔直的，但从这里修复它是微不足道的。

而不是最小值和最大值，我如何使用 data.table 获得第 5 个和第 95 个百分位数？我是否在重新发明轮子，即是否已经有一个统计方法（和一个函数）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T03:28:59.973

您可以使用`stat_quantile`将这些线添加到您的绘图中。

```
p + stat_quantile(quantiles = c(0.05,0.95)) 
```

![在此处输入图像描述](../Images/ae8bc4d84326fc800a6683aeb4d9480d.png)

这使用*分位数回归*，特别是包中的`rq`函数`quantreg`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T03:36:22.933

```
p <- p + geom_line(aes(x=c(0,1000), y= quantile(df[,"y"], prob=0.05) ) )
p+geom_line(aes(x=c(0,1000), y= quantile(df[,"y"], prob=0.95) ) ) 
```

评论：我更喜欢@mnel 的版本，尽管它可能不是你想要的。

# cakephp-2.0 - 我如何限制和关联 cakephp 中列出的两个选项

> ID：13925766
> 
> 赞同：1
> 
> 时间：2012-12-18T03:20:49.973
> 
> 标签：cakephp-2.0

嗨，我的数据库中有 3 个表： 潜在客户 领域 职业 添加潜在客户希望用户选择一个区域和属于它的职业。作为比赛，我可以限制控制器只显示该区域而不是所有职业数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:38:35.803

您可以使用可包含来限制查找中的数据[http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)

```
$this->Model->find('all', array(
    'contain' => array('Relation1', 'Relation3')
)); 
```

# google-app-engine - 使用 GWT 部署到 GAE 需要上传数百并且需要很长时间

> ID：13925769
> 
> 赞同：0
> 
> 时间：2012-12-18T03:21:09.053
> 
> 标签：google-app-engine, gwt

一些背景知识：我有一个部署到 appengine 的中型 GWT 应用程序。我最近将它配置为支持除 en_US 之外的一些语言环境，这在 GWT 编译期间导致了 96 种排列。

我正在测试应用程序的一些小改动，编译后它告诉我它必须上传 310 个文件。我已经坐在这里观看了 30 分钟，但没有任何进展——尽管我相信它最终会部署。

这是我使用 GWT/Appengine 的典型经验：上传数百个文件需要很长时间。但是，现在我相信，对于所有这些 GWT 排列，即使对应用程序进行非常简单的更改也需要一个小时或更长时间才能部署。那是相当痛苦的。

这是预期的/典型的吗？难道我做错了什么？我能做些什么来减轻这种痛苦吗？我还担心有一天我们会破坏某些东西并需要修复它，而我们最快能够扭转它的时间是一个小时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T05:24:35.327

如果您从 IDE 部署，请尝试使用 appcfg 上传文件。根据我的经验，它的工作速度要快得多：

[https://developers.google.com/appengine/docs/java/tools/uploadinganapp#Uploading_the_App](https://developers.google.com/appengine/docs/java/tools/uploadinganapp#Uploading_the_App)

顺便说一句，我有一个大型应用程序，即使在繁忙时间，我也从未进行过超过 10 分钟的部署（部署在晚上和周末工作得更快）。当您进行小修复时，您应该只更改几个文件 - 而不是数百个。

# c++ - 带有条件语句的 C++ 中的 sprintf()

> ID：13925772
> 
> 赞同：1
> 
> 时间：2012-12-18T03:21:23.547
> 
> 标签：c++, c, arduino

我正在尝试使用 sprintf() 为 C++ 中的 arduino 项目格式化 char 数组 我的目标是将以下整数格式化：日、月、年、小时、分钟和秒

DD/MM/YYYY HH:MM:SS

当整数 < 10 时出现我的问题

```
 sprintf (timeStr, "%c%u/%c%u/%u %c%u:%c%u:%c%u",(monthDay>0 && monthDay<=9)?'0':'',monthDay,(month>0 && month<=9)?'0':'',month,year,(hour>0 && hour<=9)?'0':'',hour,(minute>0 && minute<=9)?'0':'',minute,(second>0 && second<=9)?'0':'',second); 
```

现在这不会编译，因为我得到“空字符常量”，我认为它来自 '' 没有合法价值。

如果语句中的 %c 是有条件的，我只想要一个值，如果它 <10 我只想要一个值

如果有人对我如何实现这一点有任何见解，我将不胜感激，因为我真的坚持下去了！

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T03:25:47.777

你是对的，需要一个字符（顺便说一下，它*不是*`%c`空的）。`''`

 *但是，如果您在零填充之后，只需使用格式说明符`"%02d"`? 这就是您通常获得零填充数字的方式。换句话说，使用：

```
sprintf (timeStr, "%02d/%02d/%04d %02d:%02d:%02d",
    monthDay, month, year, hour, minute, second); 
```

许多嵌入式系统可能会排除浮点说明符（或可能使它们成为可选）以保留空间，但零填充或空格填充整数是它们都应该具有的相当简单的操作。

如果您发现一个实现如此不足以至于它*不*支持它们，您可以使用字符串而不是字符，因为空字符串*是*有效的：

```
sprintf (timeStr, "%s%d/%s%d/%d %s%d:%s%d:%s%d",
    (monthDay < 10) ? "0" : "",
    monthDay,
    :
    and so on ... 
```

但我很确定 Arduino 并没有*那么*缺陷。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T03:35:45.960

%c 格式总是只需要一个字符，因此`''`是不允许的。您想要打印零或一个字符的内容。您可以为此使用 %s ，并使条件表达式使用字符串文字而不是字符文字：`(monthDay > 0 && monthDay <= 9) ? "0" : ""`。*

# javascript - JavaScript：document.write() 在 Mac 终端中不起作用

> ID：13925774
> 
> 赞同：0
> 
> 时间：2012-12-18T03:21:36.667
> 
> 标签：javascript, parsing, serverside-javascript

我正在尝试从我从 Mac 终端（命令行）运行的一些服务器脚本中包含一些库。这不会在浏览器中运行 - 我正在为我的 iOS 应用程序的后端使用 Parse Cloud Code。任何想法为什么以下代码不起作用，而它在 Google Chrome 中起作用？

```
document.write('<script src="http://code.jquery.com/jquery-1.8.3.min.js" type="text/javascript"></script>');
document.write('<script src="https://raw.github.com/carlo/jquery-base64/master/ jquery.base64.min.js" type="text/javascript"></script>');
document.write('<script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/rollups/hmac-sha1.js" type="text/javascript"></script>'); 
```

从终端运行它会给出错误：{"code":141,"error":"Uncaught ReferenceError: document is not defined"}。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T03:38:11.737

服务器端Javascript中通常没有`document`。这是因为没有创建 DOM，这就是您收到错误 ( `Uncaught ReferenceError: document is not defined`) 的原因。

此外，通常，`script`标签不会用于加载 javascript 文件（没有 DOM）。

Node.js 使用模块接口`require`来请求模块（这也意味着模块不会在全局空间中使用；例如`window`在浏览器中，`process`在 Node.js 中）。不幸的是，很多客户端 javascript 库无法在服务器端运行（jQuery 就是这种情况，因为它用于操作服务器端不存在的 DOM）。

然而，在节点中，[`cheerio`](https://github.com/MatthewMueller/cheerio)基本上有人在服务器上实现 jQuery 语法来生成 DOM 字符串。但就您而言，我宁愿寻找在您的环境中工作的特定库。

**Enaway**，在你稍微澄清了你的问题之后。我认为您对为什么会收到`document not defined`错误有一个答案（您没有在浏览器中工作，因此您没有 DOM）。从那里，您真的需要阅读`Cloud Code Guide`文档并了解他们的环境是如何工作的；但绝对不是因为它说它使用 javascript，你可以将你在浏览器上的工作方式转移到服务器上。

祝你好运。

# wcf - IIS 5 上的 WebAPI + OData 服务

> ID：13925776
> 
> 赞同：1
> 
> 时间：2012-12-18T03:22:02.783
> 
> 标签：wcf, iis, asp.net-web-api, odata

我们在 IIS 5 上运行的客户遇到问题。我们的数据服务器使用 WebAPI 和 OData 的组合来返回信息，我无法让两者同时工作。

我相信问题归结为 IIS 中的扩展映射。我们的 OData 服务工作正常，但 WebAPI 没有，所以我们添加了一个 .* 扩展映射并修复了 WebAPI 的东西，但随后 OData 服务失败了。

两者都因“错误 404 - 找不到对象”而失败。

“.svc”映射和“.*”映射都使用相同版本的aspnet_isapi.dll。

有谁知道如何在 IIS 5 上运行这两种技术？

# jquery - jQuery 两个选择菜单按类显示/隐藏列表项

> ID：13925783
> 
> 赞同：1
> 
> 时间：2012-12-18T03:22:56.153
> 
> 标签：jquery, select, show-hide, siblings

我最近的问题：[jQuery 选择菜单显示具有相同 ID 的兄弟姐妹隐藏其他兄弟姐妹](https://stackoverflow.com/questions/13925034/jquery-select-menu-show-siblings-with-same-id-hide-other-siblings)

允许我使用选择菜单选项值显示/隐藏列表项：http: [//jsfiddle.net/Z3Qgz/](http://jsfiddle.net/Z3Qgz/)

如果我添加第二个选择菜单，如何将两个选择菜单链接在一起，以便显示的列表项代表两个菜单中选择的值？

```
$(function() {
    var $li = $('.levelThree').find('li')
    $("#orientation").change(function() {
        if (this.value == 'all') {
            $li.show();
        }
        else {
            $li.hide().filter("." + this.value).show();
        }
    }).change();
});
$(function() {
    var $li = $('.levelThree').find('li')
    $("#colours").change(function() {
        if (this.value == 'all') {
            $li.show();
        }
        else {
            $li.hide().filter("." + this.value).show();
        }
    }).change();
}); 
```

[http://jsfiddle.net/dRqRV/2/](http://jsfiddle.net/dRqRV/2/)

例如，选择“Landscape”和“CMYK”将只显示具有“Landscape CMYK”类的列表项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T04:52:25.100

您可以向元素添加 2 个其他类并使用类选择器，这样就不需要使用 if/else 语句。

```
<select id="orientation">
    <option value="all-orientations">All</option>
    ...
</select>
<select id="colours">
    <option value="all-colours">All</option>
    <option value="CMYK">CMYK</option>
    ...
</select>

<!-- the DIVs -->
<ul class="levelThree">
    <li class="Landscape CMYK all-colours all-orientations"><p>Landscape CMYK</p></li>
    <li class="Landscape RGB all-colours all-orientations"><p>Landscape RGB</p></li>
    <li class="Landscape PMS all-colours all-orientations"><p>Landscape PMS</p></li>
    ...
</ul> 
```

```
$(function() {
    var $li = $('.levelThree').find('li')
    $("#orientation, #colours").change(function() {
        var a = $("#orientation").val();
        var b = $("#colours").val();
        $li.hide().filter("." + a + "." + b).show();
    }).change();
}); 
```

[http://jsfiddle.net/3jRQq/](http://jsfiddle.net/3jRQq/)

# java - 比较 JUnit 中两个 Hibernate 会话是否相同

> ID：13925785
> 
> 赞同：0
> 
> 时间：2012-12-18T03:23:11.553
> 
> 标签：java, hibernate, junit

你知道如何使用 JUnit 来测试两个 Hibernate 会话是否相同吗？我需要覆盖`equals()`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T04:09:47.247

如果您只想查看两个引用是否指向同一个对象，那么 == 运算符就足够了。

如果您想要测试相等性，即它们具有相同的变量，那么您必须使用您的特定逻辑覆盖 equals 方法以确定相等性。但是，如果对象属于您无权访问源进行修改的类型，那么您将不得不依赖它们以满足您要求的方式实现 equals 方法。

在极少数情况下，如果它不是您想要的，那么只要该类是可扩展的，您就可以创建一个覆盖 equals 方法的匿名类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T04:27:01.317

看看这个问题[Hibernate Object Equality Checking](https://stackoverflow.com/questions/2949511/hibernate-object-equality-checking)

从上面的参考文献中，JUnit 断言应该是这样的：

`assertTrue(o1.getClass().equals(o2.getClass()) && o1.getId().equals(o2.getId()));`

# windows - 在 Windows 2008 上运行的服务器上每个 accept() 调用的内存消耗

> ID：13925788
> 
> 赞同：0
> 
> 时间：2012-12-18T02:23:59.633
> 
> 标签：windows, memory, sockets

我在 Windows 2008 上编写了一个简单而小型的服务器应用程序，它只接受连接，不做任何其他事情。我正在对套接字调用进行内存占用评估，我发现每个连接（在接受（）之后）至少消耗 2.5 KB 的内存。有趣的是，内存不是由调用 accept() 的进程消耗的，而是由操作系统进程消耗的。我相信这可能是因为在操作系统内部为每个连接创建了数据结构。

现在，我有两个关键问题：

是否可以通过任何方式减少这种内存占用（通过更改任何参数、配置等）？如果是怎么办？（因为如果我们计划服务器接受数百万个连接，每个连接的 2K 就太多了）

如果我的服务器打算接受数百万个连接，那么使用 Windows 2008 是个好主意吗？还是我应该切换到其他操作系统？

请给我建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T03:08:37.480

2.5K 很可能在套接字缓冲区中。您可以使用 setsockopt SO_RECVBUF 和 SO_SNDBUF 调用来减小大小。将使用其他内存，但设置这些应减少内存占用。

这就是 http 服务器等可以一次扩展到数千个并发连接的方式。没有它，内存可能会很快耗尽。

查看此链接以获取更多信息： [如何保留一百万个同时 TCP 连接？](https://stackoverflow.com/questions/2831434/how-to-retain-one-million-simultaneous-tcp-connections)

我应该指出，您的问题确实应该在 stackoverflow.com 上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T02:37:14.777

1.  不可以。连接结构必须由内核创建和跟踪，以便正确处理接收到的数据包。需要存储窗口大小、路径 MTU 和各种其他内容。您最终将需要接收缓冲区等。

2.  如果不详细了解您的特定应用程序（所有这些连接实际上在做什么），就很难说。但是进行 200,000 个当前连接非常困难，并且需要非常熟悉该特定问题领域的人。

# php - 将 JSON 数据发送到 PHP SERVER（本地主机到托管站点）

> ID：13925794
> 
> 赞同：1
> 
> 时间：2012-12-18T03:24:02.833
> 
> 标签：php, javascript, jquery, ajax, json

我正在尝试将 JSON 数据发送到服务器（本地主机到托管站点），不幸的是它不起作用。

我有这段代码，我在搜索解决方案时在这个网站上找到并对其进行了一些修改。

**原型.html**

这是启动功能的按钮

```
<button onclick="proto_test();">Test Button</button> 
```

这是我遇到问题的函数的代码。

```
function proto_test() {
var data = {},
data['abc'] = [];
data['abc'].push('some info');
data['abc'].push('some more info');
json_data = JSON.stringify(data);

$.post("proto2.php", {'updateValues': json_data}, function(data) {
alert(data);
});

} 
```

**proto2.php**

这是我正在回显的 php 文件的代码。

```
<?php
echo $_POST['updateValues'];
?> 
```

这是单击按钮后的样子。它会提醒结果。(LOCALHOST TO LOCALHOST) 换句话说，我使用的是 XAMPP。

![结果](../Images/5c596c6cbdda2db39ca8d9f926be3a27.png)

然后，如果我更改了 url 以传递数据。我将它传递给服务器（托管站点）它不起作用。

```
$.post("http://www.mysite.com/proto2.php", {'updateValues': json_data}, function(data){
alert(data);
}); 
```

任何想法如何解决这个问题？如果有人帮助我，我会很高兴。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T03:28:29.407

[阅读jQuery.post() API](http://api.jquery.com/jQuery.post/)中的附加说明。AJAX 请求受制于[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)。这就是为什么您不能对不同的域执行 ajax 发布。

如果您对目标服务器有控制权，则可以[启用跨域资源共享](http://enable-cors.org/)。查看有关如何启用 CORS 的[答案。](https://stackoverflow.com/a/7605119/1535679)注意：并非所有浏览器都支持 CORS。请参阅[CORS 浏览器支持](http://enable-cors.org/client.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T03:34:20.683

你能解释一下你想要做什么吗？

您是否考虑过使用表格？或通过 AJAX GET http 请求异步发送数据？

我相信你有你的理由，只是想帮助理解。

# php - MySQL 三表连接 - 用户和好友图片

> ID：13925803
> 
> 赞同：4
> 
> 时间：2012-12-18T03:25:15.157
> 
> 标签：php, mysql, sql, database, join

已经尝试了几个小时 - 不幸的是我被困在这个三表连接上。

问题是我可以检索用户朋友的所有照片。但我想要朋友的照片和用户的照片。但是，我不确定它的语法。

这是我的表结构：

```
active_users: id, username, name, etc...
friends: relationship_id (PK), friend1_ID (FK), friend2_ID (FK), status
pictures: picture_id (PK), user_id (FK), name, date, etc. 
```

所以这是我目前必须获取用户朋友照片的声明：

```
SELECT p.*, a.username
FROM friends f
JOIN active_users a ON (f.friend_1ID='$userID' AND f.friend_2ID=a.id AND status=1)
JOIN pictures p ON (p.user_id=f.friend_2ID) 
```

我如何修改它以包含用户的照片？我可以使用 UNION 来做到这一点，但我相信（或被告知）如果有通过用户输入的方法，这很昂贵并且容易受到 SQL 攻击。

我还考虑将用户添加为自己的朋友 - 这可以接受吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T03:31:49.590

您将需要一个额外的连接`pictures`- 一个来获取用户的照片，另一个来获取朋友的照片。给它们起不同的别名。

```
SELECT
  /* Note below about SELECT * here... */ 
  puser.*,
  pfriend.*,
  a.username
FROM 
  friends f
  /* We assume $userID is already validated and escaped */
  JOIN active_users a ON (f.friend_1ID='$userID' AND f.friend_2ID=a.id AND status=1)
  /* Join once for the user friend_1ID */
  LEFT JOIN pictures puser ON (puser.user_id = f.friend_1ID)
  /* And again for the friend friend_2ID */
  LEFT JOIN pictures pfriend ON (pfriend.user_id = f.friend_2ID) 
```

请注意，这将导致您`*`在此处的选择列表中使用问题，因为当您获取它们时，列名将是不明确的。您需要单独列出列并为其添加别名以消除歧义：

```
SELECT
  puser.picture_id AS puser_picture_id,
  puser.othercol AS puser_other,
  pfriend.picture_id AS pfriend_picture_id,
  pfriend.othercol AS pfriend_other,
  a.username
FROM... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T03:31:57.527

您可以修改加入以加入朋友或用户：

```
SELECT p.*, IF(p.user_id = friend_2ID, a.username,'$username')
FROM friends f
JOIN active_users a ON (f.friend_1ID='$userID' AND f.friend_2ID=a.id AND status=1)
JOIN pictures p ON (p.user_id=f.friend_2ID OR p.user_id = '$userID')
GROUP BY p.photo_id 
```

请注意，您应该确保 $userID 被转义，或者更好的是，使用参数化查询。

# mysql - 用count mysql更新where select

> ID：13925808
> 
> 赞同：1
> 
> 时间：2012-12-18T03:25:42.180
> 
> 标签：mysql, sql, join, sql-update

我有一个名为“people”的表，而 people 有一个名为“appearances”的关联表。我想用 MySQL 中的左连接选择的 'appearance_count' 更新 people 表。我只是在语法上遇到了一些麻烦。我会将更新语句放在以下查询中的什么位置。我尝试了与此类似的更新，但我不断收到错误“无法更新与选定表相同的表”（或类似的东西）。这是我的原始选择形式的查询：

```
 SELECT        people.*, 
 COUNT(appearances.id) as app_count,
 FROM          `people`
 INNER JOIN    `appearances`
 ON            `appearances`.`person_id` = `people`.`id`
 GROUP BY      `people`.`id`
 HAVING        app_count > 0; 
```

我将如何采用“app_count”并将 people.appearance_count 设置为该值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T03:28:57.023

我认为`HAVING`没有必要，因为它会过滤 a`COUNT`大于零的记录，并且您将`PEOPLE`使用`LEFT JOIn`.

```
UPDATE  people a
        LEFT JOIN
        (
            SELECT b.id, COUNT(c.person_ID) totalCOunt
            FROM    people b
                    INNER JOIN    appearances c
                        ON c.person_id = b.id
            GROUP BY b.id
        ) d ON a.ID = d.ID
SET     a.appearance_count = d.totalCount 
```

# c# - 文本框剪贴板中的额外行返回

> ID：13925811
> 
> 赞同：0
> 
> 时间：2012-12-18T03:26:12.823
> 
> 标签：c#, .net, textbox, clipboard, carriage-return

我创建了一个我个人使用的“Word Merge”例程。当我将项目添加到我的 3 个文本框中，然后合并时，一切看起来都很好。但是当我复制到剪贴板时，会出现我以前没有看到的额外回车符。任何人都可以帮忙吗？我附上了下面的代码和两个结果图像：

```
private void button25_Click(object sender, EventArgs e)
{
    char[] delimiterChars2 = { ',', ':', '|', '\n' };

    List<string> listBox1 = new List<string>(textBox_MergeList1.Text.Split(delimiterChars2));
    List<string> listBox2 = new List<string>(textBox_MergeList2.Text.Split(delimiterChars2));
    List<string> listBox3 = new List<string>(textBox_MergeList3.Text.Split(delimiterChars2));

    string outputDelimiter = "-";            

    var result = from s1 in listBox1
                 from s2 in listBox2
                 from s3 in listBox3
                 select s1 + outputDelimiter + s2 + outputDelimiter + s3;

    foreach (var item in result)
    {
        textBox_MergeListResults.Text = String.Join("\r\n", result);
    }

    Clipboard.SetText(textBox_MergeListResults.Text);
} 
```

我很确定这与我一开始的分隔符拆分有关，因为如果我只使用以下内容，我没有任何问题：

```
List<string> listBox1 = new List<string>() { "A", "B", "C" };
List<string> listBox2 = new List<string>() { "1", "2", "3" };
List<string> listBox3 = new List<string>() { "Dogs", "Cats", "Pigs" }; 
```

输出结果图片： [http ://screencast.com/t/zu49GgOok1m](http://screencast.com/t/zu49GgOok1m)

剪贴板结果图片：[http ://screencast.com/t/SqmJqFmqT](http://screencast.com/t/SqmJqFmqT)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T03:39:16.390

编辑：

玩玩后在聊天中回答。

`\r`需要在和上拆分`\n`。然后加入`\r`和`\n`也。

# android - 如何将 apk（android 应用程序）转换为 xap（windows 手机应用程序）

> ID：13925816
> 
> 赞同：-3
> 
> 时间：2012-12-18T03:26:22.030
> 
> 标签：android, apk, xap

我有一个适用于 Android 的 .APK 应用程序，但如何将 .APK 转换为适用于 Windows Mobile 的 .XAP 还是必须重新开发该应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T03:28:11.483

如何将橙子变成西瓜？你必须重新开发它。

考虑使用类似PhoneGap的框架来支持多种手机平台。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T03:29:00.470

您必须重新开发它，因为 Android 是 Java，而 XAP 是一种不同的语言

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T05:12:02.070

怎么把apk转成xap，都是不同的框架，windows phone支持windows os，android phone支持android os，所以不能转换，最好重新开发..

# c# - 找出请求发送者的身份 - AJAX Auto Complete Extender

> ID：13925824
> 
> 赞同：0
> 
> 时间：2012-12-18T03:27:39.970
> 
> 标签：c#, asp.net, ajax, autocomplete, code-reuse

这是我用作 Ajax 自动完成扩展器的数据源的典型 webMethod

```
[System.Web.Script.Services.ScriptMethod()]
[System.Web.Services.WebMethod(EnableSession = true)]

public static List<string> FontNamesList_AutoCompDataSrc(string prefixText)
{ 

    if (SeSn.CurrentSesionVariablsSet.FontList.Count == 0)
    {
        FntsList = ReflectMeths.anyClassFldsAsListByType<fntNamsClss>();

        SeSn.CurrentSesionVariablsSet.FontList = FontsList;
        SeSn.AddToCurrentSesseionVars(App.VariablesNames.FontsList,
            SeSn.CurrentSesionVariablsSet.Fontlist);
    }
    else
    {
        if (SeSn.VarExist(App.VariablesNames.FontsList))
             FontsList= SesnGetValAs.ListStr(App.VariableNames.FontsList);

        else FontsList= SeSn.CurrentSesionVariablsSet.FontList;
    }

    return AutoComplete.FromListStr(prefixText, FontsList);
} 
```

因此此方法将在 aspx 页面中为 AutoCompleteExtendr 提供服务。

我想知道哪一个 ajax AC Extender 正在请求源，所以我可以以某种方式对多个控件使用相同的方法。

如果我知道它是*谁*，我可以`switch`根据它的身份并根据请求服务的对象进行一些其他操作。

我希望我很清楚我的英语不好...

这是`.aspx`文件控件的示例

```
<cc1:ToolkitScriptManager ID="ToolKitScrptMan1" runat="server"></cc1:ToolkitScriptManager>

<cc1:AutoCompleteExtender ID="AutoCompleteExtender1" TargetControlID="TBX_FntsAC" runat="server"
                         MinimumPrefixLength="1" EnableCaching="true" CompletionSetCount="1"
                         CompletionInterval="100" ServiceMethod="FontNamesList_AutoCompDataSrc" 
                         FirstRowSelected="true" CompletionListCssClass="CL_Css_DataBase" CompletionListItemCssClass="CL_ItemCss_DataBase" CompletionListHighlightedItemCssClass="CL_tHighlightedItemCss_DataBase">
</cc1:AutoCompleteExtender> 
```

所以如果我有一些不同的要求

我只需要知道他们中的哪一个被解雇了。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:57:36.523

看一下`ContextKey`属性，它可用于将附加信息从网页传递到 web 方法。

必须修改 webmethod 的签名以适应`ContextKey`.
这里 - [http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx)

# perl - 在后台运行 perl 子程序

> ID：13925825
> 
> 赞同：6
> 
> 时间：2012-12-18T03:27:42.623
> 
> 标签：perl, process

有没有办法在后台运行 perl 子程序？我环顾四周，看到了一些关于线程的提及，但这将有助于查看一个示例，或者为我指明正确的方向。谢谢。

想`run_sleep`在后台运行。

```
#!/usr/bin/perl

print "Start of script";
run_sleep();
print "End of script";

sub run_sleep {
    select(undef, undef, undef, 5);  #Sleep for 5 seconds then do whatever
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-18T03:37:46.963

最简单的方法（恕我直言）是[`fork`](http://perldoc.perl.org/functions/fork.html)一个子流程并让它完成工作。Perl 线程可能很痛苦，所以我尽可能避免使用它们。

这是一个简单的例子

```
use strict;
use warnings;

print "Start of script\n";
run_sleep();
print "End of script\n";

sub run_sleep { 
    my $pid = fork;
    return if $pid;     # in the parent process
    print "Running child process\n";
    select undef, undef, undef, 5;
    print "Done with child process\n";
    exit;  # end child process
} 
```

如果您在 shell 中运行它，您将看到如下所示的输出：

```
Start of script
End of script
Running child process 
```

（等待五秒钟）

```
Done with child process 
```

父进程将立即退出并将您返回到您的 shell；子进程将在五秒钟后将其输出发送到您的 shell。

如果您希望父进程在子进程完成之前一直存在，那么您可以使用[`waitpid`](http://perldoc.perl.org/functions/waitpid.html).

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-18T03:39:07.757

使用线程：

```
use strict;
use warnings;
use threads;

my $thr = threads->new(\&sub1, "Param 1", "Param 2"); 

sub sub1 { 
  sleep 5;
  print "In the thread:".join(",", @_),"\n"; 
}

for (my $c = 0; $c < 10; $c++) {
  print "$c\n";
  sleep 1;
}

$thr->join(); 
```

# javascript - 用于带有旋转矩形的 2d 碰撞检测的 javascript 函数？

> ID：13925826
> 
> 赞同：4
> 
> 时间：2012-12-18T03:27:42.677
> 
> 标签：javascript, collision-detection

我正在用 javascript 制作游戏，但我找不到任何类似函数的东西，它需要 2 个边界框对象并在它们相交时返回 true。我发现的所有示例对于我的小游戏来说似乎都太复杂了，而且大多数都是特定于语言的：/

```
//my box object
function bounding_box (x, y, width, height, rotation) {
  var box = {};
  box.x = x;
  box.y = y;
  box.w = width
  box.h = height;
  box.r = rotation; //degrees from origin - all objects in the game have the same rotation origin
  return box;
}

function boxes_collide (a, b) {
  //if collision return true
  //else return false

  //my box collision function at the moment
  //doesn't work with rotation
  return !(
      ((a.y + a.h) < (b.y)) ||
      (a.y > (b.z + b.h)) ||
      ((a.x + a.w) < b.x) ||
      (a.x > (b.x + b.h))
  );
}

//create boxes
var boxa = bounding_box(0, 0, 5, 3, 45);
var boxb = bounding_box(1, 3, 4, 2, 90);

//test for collision
if (boxes_collide (boxa, boxb)) {
  alert('collision');
} 
```

我在这个小问题上被困了几个小时，任何帮助将不胜感激！:)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-03-14T21:54:21.460

参数 b 没有称为 z 的属性。

# database - 在 Xpages 中创建幻灯片

> ID：13925830
> 
> 赞同：1
> 
> 时间：2012-12-18T03:28:28.287
> 
> 标签：database, image, slideshow, xpages

我即将在 XPages 中创建图像幻灯片，所有图像都将参考 lotus notes 数据库。我不知道我将如何开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:04:27.500

我认为您需要**图像轮播**。如果那是您正在寻找的东西，那么这里有一些选择 -

1.  在 OpenNTF 上有一个名为[Home Page Template](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=Home%20Page%20Template)的项目，它有一个图像轮播
2.  [另一个名为XPages for Presentation 的](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=XPages%20for%20Presentation)OpenNTF 项目。这本身不是轮播，但可能会给您一些想法。
3.  [dojox.image.SlideShow](http://dojotoolkit.org/reference-guide/1.7/dojox/image/SlideShow.html) - 这个[演示页面](http://archive.dojotoolkit.org/nightly/dojotoolkit/dojox/image/tests/test_SlideShow.html)展示了它的实际效果

你也可以谷歌“图片轮播”来获取大量第三方 JavaScript 库并使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T14:46:48.247

我想你的问题太开放了，无法在这里回答。这当然是可行的，但听起来像是一项非常庞大而具体的社区支持工作。OpenNTF 上有一些例子。那个主页应用程序，我认为 Buildr 可能有一些东西。没有把握。如果 NSF 文件没有打开，那么要么联系项目经理，要么尝试升级你的 notes 客户端——假设它不仅仅是一个加密的数据库。

IdeaJam.net 曾经在他们的主页上有一个图像轮播。不确定他们是否仍然这样做，但如果是这样，那么查看该页面的来源可能会对您有所帮助。关于从笔记数据库中提取图像，我最近做了类似的事情，发现 Stephan Wissels 博客文章： http: [//www.wissel.net/blog/d6plinks/SHWL-86QKNM](http://www.wissel.net/blog/d6plinks/SHWL-86QKNM) 非常有帮助。Jeremy Hodge 还有一个名为“myPic”的 OpenNTF 项目，它也对图像做了很多工作。

建议您通过许多链接进行研究，从小处着手……您最终会得到解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T19:44:13.953

看看这些 - 许多 jQuery 插件为幻灯片提供了不同的选项

[http://speckyboy.com/2010/11/14/20-jquery-image-and-multimedia-gallery-plugins](http://speckyboy.com/2010/11/14/20-jquery-image-and-multimedia-gallery-plugins)

您可以将 jQuery 插件添加到您的数据库（http://notesin9.com/index.php/2012/09/13/notesin9-074-getting-started-with-jquery-plugins-in-xpages/）并从那里

# mysql - MySQL 中的高效子查询

> ID：13925833
> 
> 赞同：2
> 
> 时间：2012-12-18T03:28:45.580
> 
> 标签：mysql, sql, database, performance

我在 MySQL 方面绝对不是特别熟练，但直到现在我还没有必要。我正在处理一个大型数据库，特别是一个包含 1500 多行的用户表。所以我需要弄清楚如何有效地完成我用 IN 子句完成的工作。

这是查询：

```
SELECT * 
FROM artists_profile 
WHERE artist_name LIKE '%$test%' OR id IN (SELECT profile_id
              FROM artists_profileltp_join
            WHERE genre_id IN (SELECT id 
                               FROM artists_ltp 
                               WHERE genre LIKE '%$test%') OR  
                                     details LIKE '%$test%') 
```

包含样本数据的数据库

```
 artists_profile           artists_profileltp_join
+------+-------------+     +---------+------------+---------+
|  ID  | artist_name |     |genre_id | profile_id | details |
+------+-------------+     +---------+------------+---------+
|   1  | Jake        |     |     1   |       2    | rap     |
|   2  | Obama       |     |     2   |       3    | smooth  |
|   3  | Bob         |     |     1   |       1    | metal   |
+------+-------------+     +---------+------------+---------+
    artists_ltp
+------+-------+
|  ID  | genre |
+------+-------+
|   1  | rock  |
|   2  | jazz  |
+------+-------+ 
```

$test = "ja" 的期望结果将返回 Artist_profile ID 1 和 3，因为 Jake 以 "ja" 开头，而 Bob 播放的流派包括 "ja"。

桌子很简单。

Artists_profile 包含有关用户的所有唯一信息。Artists_profileltp_join 具有 profile_id (int(11))、genre_id (int(11)) 和 details (varchar(200)) 字段，并简单地将 Artists_profile 表连接到 Artists_ltp 表。

Artists_ltp 仅具有唯一的 ID 和 varchar(50) 字段。运行我的查询平均需要 30 秒。我能做些什么来加快速度并使我的子查询更有效率？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T03:35:47.170

```
SELECT  DISTINCT a.*
FROM    artist_profile a
        INNER JOIN artists_profileltp b
            ON a.ID = b.profile_ID
        INNER JOIN artists_ltp  c
            ON b.genre_id = c.id
WHERE   c.genre LIKE '%$test%' OR
        c.details LIKE '%$test%' 
```

`JOIN`这个会更好。但不幸的是，您的查询不会使用`INDEX`，因为您正在使用`LIKE`. 我建议你阅读一些关于`FULL TEXT SEARCH`

还有一件事，查询是易受攻击的`SQL Injection`，请阅读下面的文章以了解如何防止它，

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

# c# - 仅当以另一种形式单击按钮时如何运行代码

> ID：13925839
> 
> 赞同：0
> 
> 时间：2012-12-18T03:29:50.980
> 
> 标签：c#, winforms, events, button

我创建了一个带有标记为“确定”和“取消”按钮的新表单。单击第一个表单中的按钮会弹出该表单。只有在新的自定义表单中单击“确定”按钮时，我才想运行一些代码。这不是 MessageBox()。

到目前为止，我有这样的事情：

```
CustomForm c = new CustomForm();
DialogResult r = c.DialogResult;

c.ShowDialog();

if (r == DialogResult.OK)
{
    //Run code
} 
```

然而，这不起作用。我该如何正确编码？我还将“确定”按钮设置为 CustomForm 中的 AcceptButton。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T03:33:41.777

也许更喜欢像这样压缩它：

```
CustomForm c = new CustomForm();

if (c.ShowDialog() == DialogResult.OK) {
    // run code
} 
```

另外，请记住，您必须将另一个表单上按钮的 DialogResult 设置为 OK：

![DialogResult 属性](../Images/59affa4e55957fcde7d9344c42da9628.png)

`DialogResult`是一个`enum`。因此，它是按值复制的……而不是按引用复制的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T03:35:16.297

您需要在访问结果之前显示对话框。现在您正在创建对话框，将值存储在变量中，然后允许用户更改对话框的结果。这不会**更改**存储在变量中的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T03:44:00.820

您已经提到它们是两个按钮，那么您可以使用 OK 按钮的按钮单击事件来执行您的操作。如果我理解您的问题，这可能是正确的..//

# c# - 如何使用 WPF 同时播放两个声音文件？

> ID：13925840
> 
> 赞同：9
> 
> 时间：2012-12-18T03:30:05.450
> 
> 标签：c#, wpf, pixelsense

我用来`SoundPlayer`在 WPF 程序中播放音效。但是，我发现当同时播放两种音效时，新的会替换旧的（即新的会终止旧的并自行播放），但我想要的是即使在播放新的。

```
SoundPlayer wowSound = new SoundPlayer("soundEffect/Wow.wav");

SoundPlayer countingSound = new SoundPlayer("soundEffect/funny.wav");

wowSound.Play(); // play like background music

countingSound.Play();  // from click to generate the sound effect 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T03:35:49.200

您可以使用`SoundPlayer.PlaySync()`which`.wav`使用用户界面线程播放文件，以便`wowSound`首先播放。然后，`countingSound`将在播放完毕`wowSound`后播放

**例子**

```
SoundPlayer wowSound = new SoundPlayer(@"soundEffect/Wow.wav"); //Initialize a new SoundPlayer of name wowSound
SoundPlayer countingSound = new SoundPlayer(@"soundEffect/funny.wav"); //Initialize a new SoundPlayer of name wowSound
wowSound.PlaySync(); //Play soundEffect/Wow.wav synchronously
countingSound.PlaySync();  //Play soundEffect/funny.wav synchronously 
```

**注意**：您不能同时播放多个声音，`SoundPlayer`因为它不支持同时播放声音。如果您想同时播放两个或更多声音，那`System.Windows.Media.MediaPlayer`将是一个更好的选择

**例子**

```
MediaPlayer wowSound = new MediaPlayer(); //Initialize a new instance of MediaPlayer of name wowSound
wowSound.Open(new Uri(@"soundEffect/Wow.wav")); //Open the file for a media playback
wowSound.Play(); //Play the media

MediaPlayer countingSound = new MediaPlayer(); //Initialize a new instance of MediaPlayer of name countingSound
countingSound.Open(new Uri(@"soundEffect/funny.wav")); //Open the file for a media playback
countingSound.Play(); //Play the media 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T04:11:48.933

```
using System.Threading.Tasks;

private void MyMethod()
{
    Task.Factory.StartNew(PlaySound1);
    Task.Factory.StartNew(PlaySound2);
}

private void PlaySound1()
{
    SoundPlayer wowSound = new SoundPlayer("soundEffect/Wow.wav");
    wowSound.Play();
}

private void PlaySound2()
{
    SoundPlayer countingSound = new SoundPlayer("soundEffect/funny.wav");
    countingSound.Play();
} 
```

编辑：

Picrofo 是对的，它不能以这种方式完成，但看起来你可以使用[DirectShow .NET](http://directshownet.sourceforge.net/index.html)来实现这一点，它只是 MS DirectShow 的一个包装器......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T09:45:23.677

在 WPF 和 C# 中使用了一段时间的内置播放器后，我发现它们的功能太缺乏，所以我转而使用 NAudio。

[http://naudio.codeplex.com/](http://naudio.codeplex.com/)

它需要您编写更多代码，但是一旦您发现需求发生了变化（他们总是这样做）并且内置的媒体播放器将不再起作用，您会很高兴。

源代码附带了一些示例，您可以在 Stack Overflow、codeplex 网站和 Google 搜索中找到更多帮助。

# ruby-on-rails - Rails mysql数据库

> ID：13925844
> 
> 赞同：0
> 
> 时间：2012-12-18T03:30:58.547
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, dreamhost

我正在尝试创建一个使用 mysql 的应用程序。我创建的项目如下：

```
rails new appname -d mysql 
```

然后我进入文件夹并进行捆绑安装。并运行该应用程序`passenger start`

现在这确实适用于一个基本的应用程序，它给了我一个典型的 Rails 应用程序 index.html。他很好，尽管我随后尝试将我的 rails 版本上传到其中，这在我的本地机器上工作，将 database.yml 更改为我的配置，并使用用户名和类似的东西。虽然如果我尝试运行`rake db:create RAILS_ENV=production`然后我收到以下错误：

```
Couldn't create database for {"adapter"=>"mysql2", "encoding"=>"utf8", "reconnect"=>false, "database"=>"domain_production", "pool"=>5, "username"=>"root", "password"=>"****", "host"=>"localhost"}, charset: , collation:Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) 
```

我还删除了 index.html 以拥有我自己的，我得到了我的公用文件夹的文件列表。

# javascript - 基于下拉菜单的 Javascript 显示/隐藏

> ID：13925845
> 
> 赞同：2
> 
> 时间：2012-12-18T03:31:14.690
> 
> 标签：javascript, html, forms

我已经有了以下代码来根据下拉选择显示/隐藏两个表单元素。当页面上有一个使用 ID 的表单实例时，它就起作用了。现在有多种形式，它们使用类。我试过`getElementsByClass`了，但由于某种原因它不起作用。

这是Javascript：

```
function Toggle(obj){
    var val=obj.value;

    if (!obj.m){ obj.m=''; }
    if (!obj.m.match(val)){ obj.m+=','+val+','; }

    var hide=obj.m.split(',');

    for (var zxc0=0;zxc0<hide.length;zxc0++){
        if (document.getElementsByClassName(hide[zxc0])){
            document.getElementsByClassName(hide[zxc0]).style.display='none';
        }
    }

    var show=val.split(',');

    for (var zxc1=0;zxc1<show.length;zxc1++){
        if (document.getElementsByClassName(show[zxc1])){
            document.getElementsByClassName(show[zxc1]).style.display='';
        }
    }
} 
```

和 HTML：

```
<form class="contact" name="contact" action="#" method="post">
    <label>How did you hear about us:</label>
    <div id="styled-select">
        <select name="how" onChange="Toggle(this);" class="dropdown">
            <option value="Internet Search">Internet Search</option>
            <option value="Facebook" >Facebook</option>
            <option value="Twitter" >Twitter</option>
            <option value="LinkedIN" >LinkedIN</option>
            <option value="Referral,Referral2" >Referral</option>
            <option value="Other,Other2">Other</option>
        </select>
    </div>
     <label class="Referral" style="display:none;">Referred By:</label>
     <input name="Referral2" style="display:none;" class="hidden-txt Referral2">
     <label class="Other" style="display:none;">Please Specify:</label>
     <input name="Other2" value="" style="display:none;" class="hidden-txt Other2">
     ...
</form> 
```

从下拉列表中选择推荐时，应显示标签`class=Referral`和输入`class=Referral2`。选择其他后，标签`class=Other`和输入`class=Other2`应该会出现（并且推荐应该隐藏）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T03:37:47.807

试试这个脚本只是改变使用的变量。

```
<script type="text/javascript">
function ChangeDropdowns(value){
    if(value=="los"){
        document.getElementById('provider').style.display='none';
    }else if(value=="icm"){
        document.getElementById('provider').style.display='block';
    }
}
</script>

<select id="abonnement" name="abonnement" onchange="ChangeDropdowns(this.value);">
    <option value="">Selecteer soort</option>
    <option value="los">Los toestel</option>
    <option value="icm">Toestel icm abonnement</option>
</select>

<select id="provider" name="provider">
    <option value="">Selecteer een provider</option>
    <option value="">Maakt niet uit</option>
</select> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T04:13:57.300

我认为除非需要纯 JS，否则使用 JQuery 可能会更快/更容易。

**工作示例：http:** [//jsfiddle.net/p8ARq/2/](http://jsfiddle.net/p8ARq/2/)

**jQuery**

```
$("select").change(function () {
    // hide all optional elements
    $('.optional').css('display','none');

    $("select option:selected").each(function () {
        if($(this).val() == "Referral") {
            $('.referral').css('display','block');
        } else if($(this).val() == "Other") {
            $('.other').css('display','block');
        }
    });
}); 
```

**HTML**

```
<form class="contact" name="contact" action="#" method="post">
    <label>How did you hear about us:</label>
    <div id="styled-select">
        <select name="how" class="dropdown">
            <option value="Internet Search">Internet Search</option>
            <option value="Facebook" >Facebook</option>
            <option value="Twitter" >Twitter</option>
            <option value="LinkedIN" >LinkedIN</option>
            <option value="Referral" >Referral</option>
            <option value="Other">Other</option>
        </select>
     </div>
    <label class="optional referral" style="display:none;">Referred By:</label>
    <input class="optional referral" name="Referral2" style="display:none;" class="hidden-txt">
    <label class="optional other" style="display:none;">Please Specify:</label>
    <input class="optional other" name="Other2" value="" style="display:none;" class="hidden-txt">
    <label for="signup" class="text-checkbox">Add me to your email list</label>
    <input type="checkbox" name="signup" value="Yes" class="checkbox">
    <button class="send">Submit</button>                 
</form>​ 
```

​</p>

# openerp - 与 OpenERP 集成的最佳门户

> ID：13925847
> 
> 赞同：2
> 
> 时间：2012-12-18T03:31:36.677
> 
> 标签：openerp, portal

我在我的服务器上安装了 openERP，现在我需要一些门户网站的功能，如论坛、博客和社交网络，这些在 OpenERP 中不可用。

任何人都可以建议我最好的门户，它可以轻松地与 OpenERP 集成，而且工作量更少。

或者如果 OpenERP 支持这些模块，我在哪里可以找到它或者如何开发它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T09:33:07.403

OpenERP v7 具有[开箱即用的社交功能](http://v6.openerp.com/node/1269#h.9djynfxpycrp)：

*   *论坛*：OpenChatter 小部件在业务文档上提供了一个评论墙，可以充当讨论论坛。
*   *网络*：用户可以“关注”（订阅墙上的新消息）和“星”/“喜欢”（添加到收藏夹/待办事项列表）。
*   *博客*：您可以在员工或用户文档上使用 OpenChatter。或者对于更具协作性的东西，可以使用~~“Wiki”~~ “文档页面”功能。

![OpenERP 7 的起始页](../Images/37422b4b64545e8dc1aab0895a628648.png)

所以我给你的建议是看看v7。你可以：

*   在[Runbot 站点](http://runbot.openerp.com/)尝试：找到一个`trunk`绿灯的分支，然后单击`Connect`按钮。用户名和密码是`admin`。
*   [下载](http://nightly.openerp.com/trunk/nightly/)并安装到本地。

对于严肃的游戏，我建议使用 Ubuntu Server 主机作为主机，即使您需要为此设置虚拟机。[Opensourcerer 的安装指南](http://www.theopensourcerer.com/2011/04/19/how-to-install-openerp-6-on-ubuntu-10-04-lts-server-part-1/)是必读的，但我也推荐[Sisalp 的`install_xoe`脚本](http://openerpmanagementsystem.blogspot.pt/2012/02/openerp-easy-installation-using-sisalps.html)：它用 3 行安装，然后可以用一行完全自动化服务器实例。

为了进一步开发特定的功能，有一个学习曲线需要遵循，起初相当陡峭。最好的开始方法是遵循[v6.1 文档](http://doc.openerp.com/v6.1/index.html)。[v7](https://openerp-server.readthedocs.org/en/latest/)有一些文档，但它相当不完整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:24:13.123

In OPENERP 7.0 there is a module which called social networking which will be installed by default. I think this will be helpful for you.

# javascript - 我的 javascript 代码在 chrome 中看起来很奇怪

> ID：13925853
> 
> 赞同：1
> 
> 时间：2012-12-18T03:32:22.113
> 
> 标签：javascript, google-chrome

谁能帮我找出为什么这个页面在 FireFox 和 safari 中看起来不错，但在 Chrome 和 IE 中看起来它几乎没有烦人的跳帧。

我正在使用延迟为 0 的动画来根据滚动向上或向下移动 <sections>，所以看起来一个部分吃掉了前一个部分是一种视差，但不仅是背景，而且是整个部分。

[http://bksn.mx/tequilaarsenal/public/index/arsenal](http://bksn.mx/tequilaarsenal/public/index/arsenal)

我的 javascript 代码注释是西班牙语，但如果需要，我会很乐意翻译任何内容。

这是执行此操作的 JavaScript 代码的简短示例

```
tempScrollTop=0;
$(window).scroll(function(e) {

    windowTop = $(window).scrollTop(); 

    scrollDiff = tempScrollTop-windowTop;

    $("#sectionToMove").parallaxMio(p0,scrollDiff);
    tempScrollTop = windowTop;

});

$.fn.parallaxMio = function(pInicial,scrollDiff){
    if (scrollDiff < 0 ){
        //scroll down
        $(this).stop().animate({ top: '+='+scrollDiff }, 0);
    else if (scrollDiff > 0){
        //scroll up
        $(this).stop().animate({ top: '+='+scrollDiff }, 0);

    }

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T04:11:46.220

你可以使用这样的东西：

```
$(window).scroll(function(evt) {
    var e = window.event || evt
    var scrollDiff = e.detail?e.detail*(-120):e.wheelDelta;
    $("#sectionToMove").parallaxMio(p0,scrollDiff);
}); 
```

`e.wheelDelta`存在于 FF 中，而存在于`e.detail`其余部分中，并告诉您滚动的方向和数量。也是`e.wheelDelta`大部分时间`e.detail * (-120)`。

PS 作为一个建议，尝试声明你的私有变量（`scrollDiff`例如），因为你会“污染”你的全局空间，并且有一刻会想知道“为什么这个变量存在于窗口中”，以及“为什么我的函数使用相同的变量名不能正常工作”。

编辑：

另请参阅此链接： http: [//phrogz.net/js/wheeldelta.html](http://phrogz.net/js/wheeldelta.html)

# wordpress - 在 CentOS 上设置 FTP 以与 WordPress 一起使用

> ID：13925856
> 
> 赞同：1
> 
> 时间：2012-12-18T03:33:32.597
> 
> 标签：wordpress, ftp, vsftpd

我最近在我的 VPS 上设置了 WordPress，一切正常，除了 FTP。我已经安装了 vsftpd，但不知道如何配置用户和任何常规设置以使用 WordPress。我目前无法通过 FTP 连接到 VPS，出现“连接失败”错误。我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T04:45:46.873

当然你可以通过谷歌搜索找到你需要的信息。以下是一些帮助您入门的资源：

1.  [http://howto.gumph.org/content/setup-virtual-users-and-directories-in-vsftpd/](http://howto.gumph.org/content/setup-virtual-users-and-directories-in-vsftpd/)
2.  [http://centoshelp.org/servers/installing-configuring-vsftpd/](http://centoshelp.org/servers/installing-configuring-vsftpd/)
3.  [http://www.rackspace.com/knowledge_center/article/rackspace-cloud-essentials-5-centos-configuring-a-user-in-vsftpd](http://www.rackspace.com/knowledge_center/article/rackspace-cloud-essentials-5-centos-configuring-a-user-in-vsftpd)

# android - 是否可以从当前小部件链接到我自己的应用程序？

> ID：13925861
> 
> 赞同：0
> 
> 时间：2012-12-18T03:33:56.113
> 
> 标签：android, android-intent, android-widget, widget

我想将我的小部件和我的一个 android 应用程序结合起来..

有可能这样做吗？

我的计划是，一旦用户打开我的 android 小部件，小部件将直接打开我的 android 应用程序？

有什么办法吗？

我从我的小部件类在这里做了一些方法：

```
public class ExampleAppWidgetProvider extends AppWidgetProvider {

public void onUpdate(Context context, AppWidgetManager appWidgetManager,
int[] appWidgetIds) {
for (int i = 0; i < appWidgetIds.length; i++) {
int appWidgetId = appWidgetIds[i];

Intent intent = startActivity(new Intent("com.xxx.yyy.widget.FlamingoActivity"));
PendingIntent pendingIntent = PendingIntent.getActivity(context, 0,
intent, 0);

RemoteViews views = new RemoteViews(context.getPackageName(),
R.layout.widget1);

views.setOnClickPendingIntent(R.id.Image, pendingIntent);
appWidgetManager.updateAppWidget(appWidgetId, views);
}
} 
```

我试图通过 FlamingoActivity 类调用第二个应用程序，但它失败了.. :(

# c++ - 使用opencv同时显示多个摄像机源？

> ID：13925867
> 
> 赞同：4
> 
> 时间：2012-12-18T03:35:02.490
> 
> 标签：c++, opencv, camera

我有两台摄像机，需要同时显示来自不同窗口或同一窗口的视频。但是，使用以下代码，仅显示一个摄像头馈送 (camera(1))。有人可以指出我的代码中需要更改的内容，或者链接到可以达到预期效果的其他代码吗？

注意这不适用于立体视觉。

```
int main()
{

    //initialize and allocate memory to load the video stream from camera 
    CvCapture *capture1 = cvCaptureFromCAM(0);

    if( !capture1 ) return 1;

    //create a window with the title "Video1"
    cvNamedWindow("Video1");

    while(true) {
        //grab and retrieve each frames of the video sequentially 
        IplImage* frame1 = cvQueryFrame( capture1 );

        if( !frame1 ) break;

        //show the retrieved frame in the "Video1" window
        cvShowImage( "Video1", frame1 );

        //wait for 40 milliseconds
        int c = cvWaitKey(40);

        //exit the loop if user press "Esc" key  (ASCII value of "Esc" is 27) 
        if((char)c==27 ) break;
    }

    //initialize and allocate memory to load the video stream from camera 
    CvCapture *capture2 = cvCaptureFromCAM(1);

    if( !capture2 ) return 1;

    //create a window with the title "Video2"
    cvNamedWindow("Video2");

    while(true) {
        //grab and retrieve each frames of the video sequentially 
        IplImage* frame2 = cvQueryFrame( capture2 );

        if( !frame2 ) break;        

        //show the retrieved frame in the "Video2" window
        cvShowImage( "Video2", frame2 );

        //wait for 40 milliseconds
        int c = cvWaitKey(40);

        //exit the loop if user press "Esc" key  (ASCII value of "Esc" is 27) 
        if((char)c==27 ) break;
    }

    //destroy the opened window
    cvDestroyWindow("Video1"); 
    cvDestroyWindow("Video2");   
    //release memory
    cvReleaseCapture( &capture1 );
    cvReleaseCapture( &capture2 );

    return 0;  

    //VideoCapture1();
    //VideoCapture2();

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-18T05:33:31.983

澄清一下，您使用的是 C 还是 C++？如果您使用 C++，请使用 OpenCV 的 C++ 接口。

下面的例子对我有用：

```
#include <opencv2/opencv.hpp>

int main()
{
    //initialize and allocate memory to load the video stream from camera 
    cv::VideoCapture camera0(0);
    cv::VideoCapture camera1(1);

    if( !camera0.isOpened() ) return 1;
    if( !camera1.isOpened() ) return 1;

    while(true) {
        //grab and retrieve each frames of the video sequentially 
        cv::Mat3b frame0;
        camera0 >> frame0;
        cv::Mat3b frame1;
        camera1 >> frame1;

        cv::imshow("Video0", frame0);
        cv::imshow("Video1", frame1);

        //wait for 40 milliseconds
        int c = cvWaitKey(40);

        //exit the loop if user press "Esc" key  (ASCII value of "Esc" is 27) 
        if(27 == char(c)) break;
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T03:47:05.043

试试这个：

```
 CvCapture *capture1 = cvCaptureFromCAM(0);
    CvCapture *capture2 = cvCaptureFromCAM(1);

    if( !capture1 ) return 1;
    if (!capture2) return 1 ; 
    cvNamedWindow("Video1");
    cvNamedWindow("Video2") ;

    while(true) {
        //grab and retrieve each frames of the video sequentially 
        IplImage* frame1 = cvQueryFrame( capture1 );
        IplImage* frame2 = cvQueryFrame( capture2 );

        if( !frame1 || !frame2 ) break;

        cvShowImage( "Video1", frame1 );
        cvShowImage( "Video2", frame2 );

        //wait for 40 milliseconds
        int c = cvWaitKey(40);

        //exit the loop if user press "Esc" key  (ASCII value of "Esc" is 27) 
        if((char)c==27 ) break;
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-02T15:49:59.443

将 frame1 和 frame2 的声明放在 while 循环之外

我在创建 WebCam 类时遇到了同样的问题。对于内部声明帧和捕获的单个实例工作正常，但多个实例需要构造函数同时传递帧和捕获指针。

openCV 貌似不能多线程一些重要的设施

顺便说一句，使用 X11，要使多线程与 cvWaitKey() 一起工作，您需要链接 libX11.so.6 并调用 XInitThreads(); 作为 main() 中的第一条指令

希望这对戴夫莱恩有所帮助。

# html - 为什么当我缩小浏览器窗口时媒体查询不会激活？

> ID：13925868
> 
> 赞同：0
> 
> 时间：2012-12-18T03:35:14.927
> 
> 标签：html, css, media-queries

很抱歉问了一个简单的问题，但是当窗口变小或使用移动设备时，我正在尝试使用不同的样式表。当我将浏览器窗口缩小时没有任何反应。这是媒体查询。

```
<link rel="stylesheet" type="text/css" href="css.css" />
    <link rel="stylesheet" type="text/css"
     media="screen and (max-device-width:500px)"
     href="2ndCss.css" /> 
```

有人可以解释为什么它没有做任何事情吗？我尝试将最大设备宽度变小，并尝试将其设置为最大宽度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T03:48:49.213

如果您仔细注意您的媒体属性中的内容，您会注意到您正在使用`max-device-width`. 这意味着物理设备的屏幕尺寸必须`500px`小于或等于媒体查询才能启动。调整浏览器大小不会改变屏幕的物理尺寸。

使用`max-width`而不是`max-device-width`.

# tfs - Team Foundation Server - 确保开发人员可以成功编译签出的解决方案

> ID：13925871
> 
> 赞同：2
> 
> 时间：2012-12-18T03:35:27.653
> 
> 标签：tfs

我正在将 TFS 2012 Preview 用于我的朋友和我正在从事的项目。

我正在研究解决方案，它编译得很好，我检查了它。他提取了解决方案，它有各种各样的错误。这不是我处理此类事情的第一个解决方案。

该解决方案包含许多项目（N 层），包括 MVC 应用程序、SQL 数据库项目、工作流活动库、实体数据模型项目等。

我想知道是否有某种指南清单或选项来确保所有配置、程序集、数据库、实体模型等都包含在签入中，以确保解决方案在另一端编译。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T08:07:00.643

我将通过建议为作为门控签入触发的解决方案设置构建来正式确定 JeffN825 的答案。

这意味着在实际提交更改集之前将更改提交到构建服务器并在那里构建。如果构建失败，则会通知您并且更改将被签出。这样，您可以确保解决方案在一个全新的环境中构建。

[此页面](http://tfs.visualstudio.com/en-us/learn/build/setup-ci-build-in-vs/)提供了一个简单的构建设置指南。门控签入在*触发器*部分配置

值得注意的是，如果您的构建过程需要在构建计算机上使用 3rd 方 SDK 等，那么您可能很难使用标准的 Team Foundation Service 构建控制器进行构建。您需要在源代码管理中制作工作区的构建过程部分所需的所有 dll 等，并确保项目知道在哪里可以找到它们。

[NuGet](http://www.nuget.org/)是一个出色的工具，可确保您需要的所有内容都包含在内并可供构建服务器使用。如果您需要的是 NuGet 包，*我强烈建议*您使用该选项，而不是将其安装为 SDK。

但是，在许多情况下，您需要控制构建环境。在这种情况下，可能值得研究如何将自己的构建服务器作为托管在 Azure 上的 VM 运行，这使您能够通过远程桌面安装那些讨厌的 3rd 方 SDK。[这个博客](http://bartwullems.blogspot.no/2011/10/running-your-build-server-on-azure.html)提供了基本信息和一些很好的链接，提供了进一步的指导。

# linux - $'\n' 在 bash 中是什么意思？

> ID：13925879
> 
> 赞同：4
> 
> 时间：2012-12-18T03:36:12.880
> 
> 标签：linux, bash, shell, unix

这个stackoverflow问题的答案在[Linux shell中如何处理多行字符串的每一行？](https://stackoverflow.com/questions/5051556/in-a-linux-shell-how-can-i-process-each-line-of-a-multiline-string)提到这`$'\n'`是一种特殊的语法“并非在每个 shell 中都可用”。

我想知道语法是什么意思？

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-18T03:38:05.050

请参阅手册页的`QUOTING`部分：`bash`

```
 Words of the form $'string' are treated specially.  The word  expands  to
   string,  with  backslash-escaped  characters replaced as specified by the
   ANSI C standard.  Backslash escape sequences, if present, are decoded  as
   follows:

...
              \n     new line
...

   The  expanded result is single-quoted, as if the dollar sign had not been
   present. 
```

此语法不是标准 Unix Bourne shell 的一部分。它可能是特定于 bash 的，尽管我没有四处查看其他 shell 是否支持它。

# sql - 在sql中使用函数或直接列名

> ID：13925883
> 
> 赞同：4
> 
> 时间：2012-12-18T03:36:31.960
> 
> 标签：sql, function, oracle10g

我有一个关于在 sql 查询中使用函数的问题。

我有以下用于从表中获取用户名的功能

```
CREATE OR REPLACE
  FUNCTION get_info(
      p_emp_no employees.emp_id%TYPE)
    RETURN VARCHAR2
  AS
    o_userid employees.emp_name%TYPE;
  BEGIN
    SELECT emp_name INTO o_userid FROM employees WHERE emp_id = p_emp_no;
    RETURN o_userid;
  END;
  / 
```

当我在 sql 代码中使用上述函数时

```
select product_no, get_info(p.raised_by)
from products p, employees e
where p.raised_by  = e.emp_no 
```

执行比下面的 sql 花费更多的时间

```
select product_no, e.emp_name
from products p, employees e
where p.raised_by  = e.emp_no 
```

第二个查询比第一个查询快。

那么是否建议使用函数从表中获取用户名或使用直接列名并使用连接来链接员工表？

我问的原因是可能有多个对员工表的引用来获取**raise_by、created_by、modified_by**等的用户名。所以我认为使用函数来获取 emp_name 而不是与员工表的多个连接会更好。

对此的任何见解都是非常可观的。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T05:47:58.373

使用连接是要走的路。使用该函数将触发一个单独的查询，对每一行结果进行单独的索引查找，从而大大减慢了结果的速度。

我理解您希望避免多次连接，但在您的示例中，三个连接比三个函数调用要好。

这样想吧。该功能正在做它自己的加入

> WHERE emp_id = p_emp_no

而且它不仅是做一次，而且是对每一行单独的加入！

# html - 如何删除 KineticJs 中的对象？

> ID：13925891
> 
> 赞同：0
> 
> 时间：2012-12-18T03:37:25.493
> 
> 标签：html, html5-canvas, kineticjs

大家好，

```
 var stage = new Kinetic.Stage({
    container: 'container',
    width: 1230,
    height: 40
    });

    var layer = new Kinetic.Layer();
    var rectHeight = 30;
    var rectWidth = 100;
    var rectY = (stage.getHeight() - rectHeight) / 2;

    var triangle = new Kinetic.RegularPolygon({
        x: 25,
        y: 25,
        sides: 3,
        radius: 20,
        fill: '#00D2FF',
        stroke: 'black',
        strokeWidth: 2,
        draggable: true,
        dragBoundFunc: function(pos) {
            return {
                x: pos.x,
                y: this.getAbsolutePosition().y
            }
        }
    });

    // add cursor styling
    triangle.on('mouseover', function() {
        document.body.style.cursor = 'pointer';
    });
    triangle.on('mouseout', function() {
        document.body.style.cursor = 'default';
    });

    triangle.on('dblclick', function(){
        //alert("down");
        layer.clear();
        stage.clear();
    });

    layer.add(triangle);
    stage.add(layer);
} 
```

这是我的代码片段。这将创建一个能够拖动的三角形（从[http://kineticjs.com/](http://kineticjs.com/)教程获得）。

目的：我希望它在我双击它时删除三角形。

问题：

一世。可以删除三角形，但是当您重画三角形时，我将在删除它的当前位置下方绘制。当它被删除并一次又一次地重绘时，也会发生同样的事情。经过几次重绘后，它最终会出现在我的屏幕底部。

ii. Alert() 是用来弹出通知的吧？当我使用 alert() 时，可以从屏幕上删除三角形。如果没有，它会留在那里。

无论如何通过鼠标事件删除对象，当另一个鼠标事件发生时，它会在同一位置绘制对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T08:12:24.393

希望人们能够为他们的问题提供一个有效的 JSFiddle，必须自己做这件事很痛苦，如果你这样做，你更有可能得到回应。

如果您希望三角形重新出现在同一个位置，而不是删除它，为什么不直接隐藏它呢？

```
var stage = new Kinetic.Stage({
    container: 'container',
    width: 1230,
    height: 40
});

background = new Kinetic.Layer();
background.add(new Kinetic.Rect({
    x: 0,
    y: 0,
    width: stage.getWidth(),
    height: stage.getHeight(),
    name: 'backLayer'
}));

// this rect will allow us to use mouse events on the stage. There's probably a better way to do this, but I don't know it.
stage.add(background);

var layer = new Kinetic.Layer();
var rectHeight = 30;
var rectWidth = 100;
var rectY = (stage.getHeight() - rectHeight) / 2;

var triangle = new Kinetic.RegularPolygon({
    x: 25,
    y: 25,
    sides: 3,
    radius: 20,
    fill: '#00D2FF',
    stroke: 'black',
    strokeWidth: 2,
    draggable: true,
    dragBoundFunc: function(pos) {
        return {
            x: pos.x,
            y: 25
        }
    }
});

// add cursor styling
triangle.on('mouseover', function() {
    document.body.style.cursor = 'pointer';
});

triangle.on('mouseout', function() {
    document.body.style.cursor = 'default';
});

triangle.on('dblclick', function(evt) {
    this.hide();
    layer.draw();
    evt.cancelBubble = true;
});

background.on('click', function() {
    triangle.show();
    layer.draw();
});

layer.add(triangle);
stage.add(layer);​ 
```

[http://jsfiddle.net/RELQp/](http://jsfiddle.net/RELQp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:33:51.837

我同意PAEz。你应该重写你的代码。

但是实际上从对象本身中删除一个对象可能有点棘手，并且可能是 Kineticjs 某些版本中的一个错误。

```
triangle.on('dblclick', function(evt) {
   var node=evt.shape;
   layer.remove(node);
    layer.draw();

}); 
```

# silverlight - 将数据传输到另一个 XAML 页面的最佳方式是什么？

> ID：13925892
> 
> 赞同：1
> 
> 时间：2012-12-18T03:37:30.003
> 
> 标签：silverlight, xaml, windows-phone, windows-phone-8

在传递数据时导航到另一个 XAML 页面的文档化方法似乎是将数据序列化为 URL 参数。这对于简单的参数非常有用，例如单个数据库键：

```
NavigationService.Navigate(new Uri("/ViewContact.xaml?contactid=" + cid, UriKind.Relative)); 
```

但是，如果您想传入一个相当复杂的数据结构，例如搜索查询，该怎么办？该查询可能包含关键字、各种过滤器、项目数组等。使用 URL 参数表示此类数据将相当困难。

**问题：导航到另一个页面的推荐技术是什么，传入非平凡的参数？**

一个想法是首先将数据或查询设置为您导航到的页面的静态属性：

```
Query q = new Query();
// Set various parameters
ViewContact.SearchQuery = q;
NavigationService.Navigate(new Uri("/ViewContact.xaml?contactid=", UriKind.Relative)); 
```

然后，当加载 ViewContact 时，它会检查该静态属性并将数据加载到内存中。

这种方法有什么问题，还是有其他推荐的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:26:14.263

看看 Prism 讨论板上的这个线程：[Navigation using Object as parameter](http://compositewpf.codeplex.com/discussions/248576)。

接近尾声，有一个使用`NavigationUri`派生类的解决方案`Uri`：

```
public sealed class NavigationUri : Uri
{
  public NavigationUri(string uri)
    : base(uri, UriKind.Relative)
  {
    Parameters = new Dictionary<string, object>();
  }

  public Dictionary<string, object> Parameters
  {
    get;
    private set;
  }
} 
```

（我公开了构造函数）

然后你可以像这样使用它：

```
var uri = new NavigationUri("/ViewContact.xaml");
uri.Parameters["SearchQuery"] = q;
NavigationService.Navigate(uri); 
```

然后，在`OnNavigatedTo`您的方法中`ViewContact`：

```
public override void OnNavigatedTo(NavigationContext navigationContext)
{
  var uri = (NavigationUri)navigationContext.Uri;
  SearchQuery = (Query) uri.Parameters["SearchQuery"];
} 
```

正如原始线程中所建议的，您还可以使用类来生成参数键，而不是对它们进行硬编码：

```
public sealed class NavigationUriParameters
{
    public static readonly string SearchQuery = Guid.NewGuid().ToString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T04:28:18.237

在我的应用程序中，我在 URL 参数中传递了某种标识符，例如

```
/FlightInfo.xaml?FlightID=4 
```

然后在方法中查找该航班 ID `OnNavigatedTo()`。航班存储在 ViewModel 中，我将其作为静态属性保存在某处，因此它是相似的，但这样您的 URL 是有意义的，并且返回/恢复会更好地工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T14:04:05.230

如果您正在为 Silverlight 开发并希望支持深度链接，则必须将加载数据和显示页面所需的所有信息放在 URL 中，因为 url 是存储在链接中的内容。

在所有其他情况下（没有深度链接的 Silverlight 或 Windows Phone），您可以将信息（部分）存储在某个全局可用对象（例如应用程序）中的其他位置。

如前所述，您可以传递对象的标识符并在加载页面时检索对象（从服务或缓存中获取）

您还可以将当前的 ViewModel/Data 存储在 App 对象中，然后简单地将其绑定到新页面。

Depending on the amount of resources (time, bandwidth, concurrent users, ...) available, you might want to pick one of these or even switch between solution depending on the scenario.

# sql - 一个参数值可以有多个可能的值吗？

> ID：13925900
> 
> 赞同：1
> 
> 时间：2012-12-18T03:38:06.537
> 
> 标签：sql, sql-server-2008, reporting-services

我正在尝试在由多个可能值组成的 SSRS 参数中创建一个特定值。

因为在后端，这些标签值对中的每一个都可以有多个可能的值。

我想看看我是否可以使用带有硬编码这些值的 temp 表，但不确定如何

![在此处输入图像描述](../Images/ce4942db46cfa65a1f34e6202c3b049a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T07:34:18.347

对我来说听起来像是一个[XY 问题](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)，我强烈建议您研究以下两种替代方案来解决您的目标：

*   如果这些值（30、35、36 和 40）具有共同的含义，请考虑在数据库中的表中对它们进行规范化，并使值`SecurityDrops`对应于该组值（例如通过外键）。
*   使用诸如“-1”之类的魔法值并让查询为该情况定义一个异常。
*   对 使用诸如“-1”之类的魔法值`SecurityDrops`，如果选择它，则会弹出另一个参数`SecurityDropValues`MultiValued 并允许用户输入 30、35、26 和 40。

如果您坚持您在问题中建议的方向，“解决方案”将是制作文本类型的参数，并允许用户输入逗号分隔的值。但是，您必须在 SQL 中解析参数的输入，这并不漂亮。

# python - 在Python中提取百分比之前的所有数字？

> ID：13925901
> 
> 赞同：4
> 
> 时间：2012-12-18T03:38:09.523
> 
> 标签：python, regex

我有一个这样的字符串：

`receiving incremental file list genelaytics/ genelaytics/.project 421 3% 411.13kB/s 0:00:00 421 3% 411.13kB/s 0:00:00 (xfr#1, to-chk=13/15) 421 3% 411.13kB/s 0:00:00 (xfr#1, to-chk=8/15) genelaytics/.pydevproject 1,006 7% 982.42kB/s 0:00:00 (xfr#2, to-chk=12/15) genelaytics/hello.py 1,006 7% 982.42kB/s 0:00:00 (xfr#3, to-chk=11/15) genelaytics/manage.py 1,260 10% 1.20MB/s 0:00:00 (xfr#4, to-chk=10/15) genelaytics/ok.py 1,260 10% 1.20MB/s 0:00:00 (xfr#5, to-chk=9/15) genelaytics/genelaytics/ genelaytics/genelaytics/__init__.py 1,260 10% 35.16kB/s 0:00:00 (xfr#6, to-chk=7/15) genelaytics/genelaytics/__init__.pyc 1,399 11% 39.03kB/s 0:00:00 (xfr#7, to-chk=6/15) genelaytics/genelaytics/settings.py 6,416 50% 179.02kB/s 0:00:00 (xfr#8, to-chk=5/15) genelaytics/genelaytics/settings.pyc 9,468 75% 264.17kB/s 0:00:00 (xfr#9, to-chk=4/15) genelaytics/genelaytics/urls.py 9,813 77% 252.18kB/s 0:00:00 (xfr#10, to-chk=3/15) genelaytics/genelaytics/urls.pyc 10,409 82% 260.64kB/s 0:00:00 (xfr#11, to-chk=2/15) genelaytics/genelaytics/wsgi.py 11,553 91% 289.29kB/s 0:00:00 (xfr#12, to-chk=1/15) genelaytics/genelaytics/wsgi.pyc 12,596 100% 315.40kB/s 0:00:00 (xfr#13, to-chk=0/15) 12,596 100% 33.70kB/s 0:00:00 (xfr#13, to-chk=0/15) 12,596 100% 30.15kB/s 0:00:00 (xfr#13, to-chk=0/`15) 发送 287 字节接收 6,709 字节 518.22 字节/秒总大小为 12,596 加速为 1.80

我想提取百分比之前的所有数字：

```
3%, 3%, 7%, 10%, 75%, 82% and all. 
```

尝试使用：

```
re.search('\d*%',test).group() 
```

但这仅提取第一个百分比数字 3%。

我想要所有的数字。我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T03:40:04.027

使用`findall`：

```
In [58]: re.findall(r'\d+%', text)
Out[58]: 
['3%', '3%', '3%', '7%', '7%', '10%', '10%', '10%', '11%', '50%', '75%', '77%',
'82%', '91%', '100%', '100%', '100%'] 
```

此外，您可能希望使用`\d+`而不是`\d*`这样模式不匹配`%`前面没有数字的杂散。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-14T20:38:32.263

```
>>> import re
>>> text = "receiving incremental file list genelaytics/ genelaytics/.project 421 3% 411.13kB/s 0:00:00 421 3% 411.13kB/s 0:00:00 
(xfr#1, to-chk=13/15) 421 3% 411.13kB/s 0:00:00 (xfr#1, to-chk=8/15) genelaytics/.pydevproject 1,006 7% 982.42kB/s 0:00:00 (xfr#2, to-chk=12/15) genelaytics/hello.py 1,006 7% 982.42kB/s 0:00:00 (xfr#3, to-chk=11/15) genelaytics/manage.py 1,260 10% 1.20MB/s 0:00:00 (xfr#4, to-chk=10/15) genelaytics/ok.py 1,260 10% 1.20MB/s 0:00:00 (xfr#5, to-chk=9/15) genelaytics/genelaytics/ genelaytics/genelaytics/__init__.py 1,260 10% 35.16kB/s 0:00:00 (xfr#6, to-chk=7/15) genelaytics/genelaytics/__init__.pyc 1,399 11% 39.03kB/s 
0:00:00 (xfr#7, to-chk=6/15) genelaytics/genelaytics/settings.py 6,416 50% 179.02kB/s 0:00:00 (xfr#8, to-chk=5/15) genelaytics/genelaytics/settings.pyc 9,468 75% 264.17kB/s 0:00:00 (xfr#9, to-chk=4/15) genelaytics/genelaytics/urls.py 9,813 77% 252.18kB/s 0:00:00 (xfr#10, to-chk=3/15) genelaytics/genelaytics/urls.pyc 10,409 82% 260.64kB/s 0:00:00 (xfr#11, to-chk=2/15) genelaytics/genelaytics/wsgi.py 11,553 91% 289.29kB/s 0:00:00 (xfr#12, to-chk=1/15) genelaytics/genelaytics/wsgi.pyc 12,596 100% 315.40kB/s 0:00:00 (xfr#13, to-chk=0/15) 12,596 100% 33.70kB/s 0:00:00 (xfr#13, to-chk=0/15) 12,596 100% 30.15kB/s 0:00:00 (xfr#13, to-chk=0/15) sent 287 bytes received 6,709 bytes 518.22 bytes/sec total size is 12,596 speedup is 1.80"
>>> re.findall(r'(?:\d+%)|(?:\d+\.\d+%)',text)
['3%', '3%', '3%', '7%', '7%', '10%', '10%', '10%', '11%', '50%', '75%', '77%', '82%', '91%', '100%', '100%', '100%'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-29T10:42:51.037

改善捕获的更好答案

代码：

```
import re

# example text
text = '''100%
hgjhgjhgjhg
45.909%
67%
89 hjhjkkj
0.99 ^&^&*jgkg
0.89%'''

# search pattern 
re.findall(r'(?:\d+%)|(?:\d+\.\d+%)',text) 
```

输出：

```
['100%', '45.909%', '67%', '0.89%'] 
```

# c++ - G++ 4.5.0 中的 std::forward_as_tuple

> ID：13925904
> 
> 赞同：4
> 
> 时间：2012-12-18T03:38:26.990
> 
> 标签：c++, c++11, tuples, gcc4, perfect-forwarding

我对该功能有迫切的需求`std::forward_as_tuple`，但仅限于使用 GCC 4.5.0（我知道这是一个糟糕的情况，但它会为我解决很多问题，所以请保持尖刻的言论最低限度）。标`<tuple>`头似乎不包含该功能（应该如此），所以我的问题是：

1.  它是否隐藏在其他标题中？（这种情况以前发生过，但很难确定。）
2.  是否可以推出自己的实现？那就是：它是否可以用在 GCC 4.5.0*中实现的 c++11 的部分来实现？*如果有人真的知道如何做到这一点，那么奖金。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T03:52:33.727

实现很简单：

```
template <typename... Elements>
/*constexpr*/ tuple<Elements&&...>
forward_as_tuple(Elements&&... args) /* noexcept */
{
    return tuple<Elements&&...>(std::forward<Elements>(args)...);
} 
```

不知道它出现在哪个 GCC 中。根据[this document](http://gcc.gnu.org/projects/cxx0x.html) variadic templates和rvalue refs are available since gcc 4.3,所以它应该适用于你的gcc 4.5（我希望）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T10:25:31.580

> 它是否隐藏在其他标题中？（这种情况以前发生过，但很难确定。）

有什么难的`grep`？

> 标题`<tuple>`似乎不包含该功能（因为它应该）

`std::forward_as_tuple`最初被称为`std::pack_arguments`并于 2010 年 3 月在[N3059](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2010/n3059.pdf)中提出，并首次出现在 N3092 工作草案中。GCC 4.5.0 于 2010 年 4 月发布，当时该草稿上的墨水几乎未干。

Feel free to try and use C++11 features in an unmaintained, pre-C++11 compiler, but it's a bit unfair to say it should include features that didn't even exist when the release branch was cut and being prepared for a new release!

You should **at least** use GCC 4.5.4, using a dot-oh release is just asking for trouble, it will be full of new bugs that are fixed in later 4.5.x releases (although it still doesn't include `forward_as_tuple` or `pack_arguments`, they first appeared in GCC 4.6)

You could consider using `boost::tuple` instead, which attempts to provide a feature-complete implementation even for older compilers.

# python - 编辑 QTableView 单元格后如何更改背景颜色？

> ID：13925905
> 
> 赞同：5
> 
> 时间：2012-12-18T03:38:55.607
> 
> 标签：python, pyqt, qtableview

我有这个带有自定义模型和委托的 QTableView，我如何在编辑后更改单元格的背景颜色？

我应该在代表处这样做`setModelData()`吗？

```
index.model.setData(index, QVariant(True),Qt.UserRole) 
```

后来在模型的`data()`# 它调用自己？

```
if role == Qt.BackgroundColorRole:
    if index.model().data(index,Qt.UserRole).toBool():
        return QVariant(QColor(Qt.darkBlue)) 
```

在模型中，`setData()`我没有任何代码，例如：

```
if role==Qt.UserRole:
    .... 
```

这样做的正确方法是什么？

编辑：这是我`setData()`在自定义模型中的整个方法

```
def setData(self, index, value, role=Qt.EditRole):

if index.isValid() and 0 <= index.row() < len(self.particles):
    particle = self.particles[index.row()]
    column = index.column()
    if column == ID:
        value,ok= value.toInt()
        if ok:
            particle.id =value                 
    elif column == CYCLEIDANDNAME:
        cycleId,cycleName= value.toString().split(' ')
        particle.cycleId =cycleId
#                also need to set cycleName
        for name in self.cycleNames:
            if name.endsWith(cycleName):
                particle.cycleFrameNormalized=particle.cycleName = name
                break

    elif column == CYCLEFRAME:
        value,ok= value.toInt()
        if ok:
            print 'set new val to :',value
            particle.cycleFrame =value 
#                    self.setData(index,QVariant(QColor(Qt.red)),Qt.BackgroundRole)

    elif column == CLASSID:
        value,ok= value.toInt()
        if ok:
            particle.classId =value                 
    elif column == VARIATIONID:
        value,ok= value.toInt()
        if ok:
            particle.variationId =value                 

    self.emit(SIGNAL("dataChanged(QModelIndex,QModelIndex)"),
              index, index)

    return True

return False 
```

抱歉仍然没有线索，我将粘贴快速 gui 开发书示例中的完整代码：我在这里发布了我的代码 [http://pastebin.com/ShgRRMcY](http://pastebin.com/ShgRRMcY)

编辑单元格后如何更改代码以使单元格背景颜色发生变化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T07:44:05.103

您需要以某种方式跟踪模型中已编辑的项目。你不需要`UserRole`。您可以将其保留在内部，但当然，如果您想将此信息公开给外部`UserRole`，则非常适合。

这是一个简单的例子。您可以将其调整为您的代码：

```
import sys
from PyQt4 import QtGui, QtCore

class Model(QtCore.QAbstractTableModel):
    def __init__(self, parent=None):
        super(Model, self).__init__(parent)

        # list of lists containing [data for cell, changed]
        self._data = [[['%d - %d' % (i, j), False] for j in range(10)] for i in range(10)]

    def rowCount(self, parent):
        return len(self._data)

    def columnCount(self, parent):
        return len(self._data[0])

    def flags(self, index):
        return QtCore.Qt.ItemIsSelectable | QtCore.Qt.ItemIsEnabled | QtCore.Qt.ItemIsEditable

    def data(self, index, role):
        if index.isValid():
            data, changed = self._data[index.row()][index.column()]

            if role in [QtCore.Qt.DisplayRole, QtCore.Qt.EditRole]:
                return data

            if role == QtCore.Qt.BackgroundRole and changed:
                return QtGui.QBrush(QtCore.Qt.darkBlue)

    def setData(self, index, value, role):
        if role == QtCore.Qt.EditRole:
            # set the new value with True `changed` status
            self._data[index.row()][index.column()] = [value.toString(), True]
            self.dataChanged.emit(index, index)
            return True
        return False

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)

    t = QtGui.QTableView()
    m = Model(t)
    t.setModel(m)
    t.show()

    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-18T04:34:08.987

`QTableWidget`有一个信号[`itemChanged`](http://www.riverbankcomputing.com/static/Docs/PyQt4/html/qtablewidget.html#itemChanged)需要连接到一个`slot`. 一旦连接到插槽，信号将通过`QTableWidgetItem`已更改的插槽。从那里您可以使用`QTableWidgetItem`诸如[`setBackgroundColor`](http://www.riverbankcomputing.com/static/Docs/PyQt4/html/qtablewidgetitem.html#setBackgroundColor)更改背景的方法。

这是一个例子

```
#! /usr/bin/env python2.7

from PyQt4.QtCore import *
from PyQt4.QtGui import *
import sys

class Main(QTableWidget):

    def __init__(self):

        super(Main, self).__init__(2, 5)
        layout = QHBoxLayout(self)

        self.itemChanged.connect(self.changeBG)

    def changeBG(self, cell):

        cell.setBackgroundColor(QColor(225, 0, 225))

if __name__ == "__main__":
    app = QApplication(sys.argv)
    main = Main()
    main.show()
    app.exec_() 
```

# knockout.js - 淘汰赛：与可观察数组和复选框的复杂绑定

> ID：13925909
> 
> 赞同：3
> 
> 时间：2012-12-18T03:39:18.480
> 
> 标签：knockout.js, knockout-2.0

我有一个公司可能提供的一系列可观察的服务（即销售、服务、咨询）。这些服务中的每一项都可以由公司在零个或多个美国州执行，并且每个州都有一个可选的认证编号。因此，服务具有可观察的位置数组，位置是状态和证书编号的组合。

```
function Service(name) {
    var self = this;

    self.Name = ko.observable(name);
    self.Locations = ko.observableArray();
}

function Location(state) {
    var self = this;

    self.State = ko.observable(state);
    self.CertNum = ko.observable();
} 
```

在用户界面中，我想显示所有美国州的单个列表。用户将勾选公司运营所在的每个州旁边的复选框，从而制作一个州的“主列表”。反过来，这个主列表驱动出现在每个可能的服务下的选择。

例如，用户在主列表中勾选“Alabama”和“Arizona”。UI 然后将每个服务的单独位置呈现为复选框和文本框的组合。这是主视图模型：

```
function viewModel() {
    var self = this;

    self.AllStates = [
        { name: "Alabama", abbrev: "AL" },
        { name: "Alaska", abbrev: "AK" },
        { name: "Arizona", abbrev: "AZ" },
        { name: "Arkansas", abbrev: "AR" }
    ];

    self.BusinessStates = ko.observableArray();

    self.AllSelectedStates = ko.computed( function() {
        return ko.utils.arrayFilter( self.AllStates, function(item) {
            return self.BusinessStates.indexOf(item.abbrev) >= 0;
        });
    });

    self.Services = ko.observableArray([
        new Service("Sales"),
        new Service("Service"),
        new Service("Consulting")
    ]);
} 
```

一个简单的视图如下所示：

```
<h2>Master List</h2>
<ul data-bind="foreach: AllStates">
    <li>
        <label><input type="checkbox" data-bind="value: abbrev, checked: $root.BusinessStates"/> <span data-bind="text: name"></span></label></li>
</ul>

<h2>Services</h2>
<div class="service" data-bind="foreach: Services">
    <h3 data-bind="text: Name"></h3>
    <ul data-bind="foreach: $root.AllSelectedStates">
        <li>
           <label>
             <input type="checkbox" data-bind="value: abbrev, checked: $parent.Locations" /> 
             <span data-bind="text: name"></span>
           </label> 
           <input type="text" placeholder="Cert. Number" data-bind="value: ??" />
        </li>
    </ul>
</div> 
```

该视图至少让我将状态输入到服务的 Locations 数组中，但我不知道如何绑定 CertNum 属性。

假设用户在主列表中选择了阿拉巴马州和亚利桑那州。现在，对于“销售”服务，用户勾选“亚利桑那”并输入“98765”的认证号码。在“咨询”服务下，用户勾选“阿拉巴马州”并且不输入证书编号。理想情况下，我希望生成的 JSON 片段看起来像：

```
"Services": [
    {
        "Name": "Sales",
        "Locations": [
            {
                "State": { "name": "Arizona", "abbrev": "AZ" },
                "CertNum": "98765"
            }
        ]
    },
    {
        "Name": "Service",
        "Locations": []
    },
    {
        "Name": "Consulting",
        "Locations": [
            {
                "State": { "name": "Alabama", "abbrev": "AL" },
                "CertNum": null
            }
        ]
    }
] 
```

我可以渲染和绑定美国各州的“主名单”。我可以遍历服务并呈现为每个可用服务位置提供控件的 UI（即状态复选框，证书编号的文本框）。我无法绑定服务位置控件以控制相应位置数组中位置的成员资格，并同时影响证书编号的值。

我所做的最接近的尝试非常复杂和hacky，我使用[knockout-postBox 插件](https://github.com/rniemeyer/knockout-postbox)将viewModel.AllSelectedStates 属性链接到每个Service 模型上的类似属性，然后将新位置推送到每个Service.Locations 数组中. 它*几乎*可以工作，只是它会在主列表中选中或取消选中状态时清除对服务的更改。此外，我必须将每个可用位置推送到每个服务的 Locations 数组中，并依靠该位置上的 IsSelected 布尔标志来确定它是否已被选中（我宁愿*只*将位置放在被选中的数组中）。

您可以在此 JSFiddle 中看到尝试：http: [//jsfiddle.net/cbono/PU6Sq/23/](http://jsfiddle.net/cbono/PU6Sq/23/)

它的好处是它演示了 UI 应该如何表现。但我认为如果没有 postBox 插件，这是可能的，我只是没有以正确的方式来解决问题。我已经花了几天的时间来解决这个问题，但无法提出一个 100% 有效的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:33:55.640

`visible`使用-binding 比管理集合事件更容易。

```
<li data-bind="visible: State().IsSelected"> 
```

[http://jsfiddle.net/MizardX/XTkpb/](http://jsfiddle.net/MizardX/XTkpb/)

* * *

如果你真的需要处理它们，你可以缓存`StateAndCert`对象中的`Services`对象：

```
var self = this,
    cache = {};

self.Locations = ko.computed(function () {
    return ko.utils.arrayMap(states(), function (item) {
        var key = item.Abbrev();
        if (cache[key] === undefined) {
            cache[key] = new StateAndCert(item);
        }
        return cache[key];
    });
}); 
```

[http://jsfiddle.net/MizardX/HMAtE/](http://jsfiddle.net/MizardX/HMAtE/)

* * *

要从 JSON 渲染中隐藏某些属性，您可以将它们填充到`function(){}`属性中：

```
self.Meta = function(){};
self.Meta.IsSelected = ko.observable(false); 
```

# javascript - 导致此错误的原因 - “致命错误：无法找到本地咕噜声”

> ID：13925916
> 
> 赞同：389
> 
> 时间：2012-12-18T03:39:57.980
> 
> 标签：javascript, gruntjs

我先把旧版本的 grunt 删掉了，然后我安装了新的 grunt 版本，然后出现这个错误：

> D:\www\grunt-test\grunt grunt-cli：grunt 命令行界面。(v0.1.4)
> 
> 致命错误：无法找到本地咕噜声。
> 
> 如果您看到此消息，则说明未找到 Gruntfile 或未将 grunt 安装到您的项目本地。有关安装和配置 grunt 的更多信息，请参阅入门指南： http: [//gruntjs.com/getting-started](http://gruntjs.com/getting-started)

这是因为我的系统路径中没有对 grunt 的引用吗？或者是其他东西？我已经尝试重新安装了几次。

* * *

## 回答 #1

> 赞同：303
> 
> 时间：2012-12-18T06:41:12.737

我认为您的项目目录中没有`grunt.js`文件。使用`grunt:init`，它为您提供诸如 之类的选项`jQuery, node,commonjs`。选择你想要的，然后继续。这真的有效。有关更多信息，您可以访问[此](http://net.tutsplus.com/tutorials/javascript-ajax/meeting-grunt-the-build-tool-for-javascript/)。

做这个：

```
 1\. npm install -g grunt
 2\. grunt:init  ( you will get following options ):
      jquery: A jQuery plugin
      node: A Node module
      commonjs: A CommonJS module
      gruntplugin: A Grunt plugin
      gruntfile: A Gruntfile (grunt.js)
 3 .grunt init:jquery (if you want to create a jQuery related project.). 
```

它应该工作。

v1.4 的解决方案：

```
1\. npm install -g grunt-cli
2\. npm init
   fill all details and it will create a package.json file.
3\. npm install grunt (for grunt dependencies.) 
```

**编辑：新版本的更新解决方案：**

```
 npm install grunt --save-dev 
```

* * *

## 回答 #2

> 赞同：180
> 
> 时间：2014-11-24T22:26:14.177

## 在 node_modules 而不是全局安装 Grunt

`Unable to find local Grunt`可能意味着您已经全局安装了 Grunt。

Grunt CLI 坚持将 grunt 安装在本地 node_modules 目录中，因此 Grunt 对您的项目来说是本地的。

这将失败：

```
npm install -g grunt 
```

改为这样做：

```
npm install grunt --save-dev 
```

* * *

## 回答 #3

> 赞同：84
> 
> 时间：2015-02-17T18:33:38.403

做

```
npm install 
```

在本地安装 Grunt `./node_modules`（以及文件中指定的所有其他内容`package.json`）

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2015-01-25T03:26:12.260

如果您在项目中已经有一个文件`package.json`并且它包含`grunt`依赖项，

```
 "devDependencies": {
    "grunt": "~0.4.0", 
```

然后你可以运行`npm install`来解决问题

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-10-01T15:31:00.497

它说你没有本地`grunt`所以尝试：

`npm install grunt`

（没有`-g`它是本地的`grunt`）

虽然没有直接关系，但请确保您`Gruntfile.js`在当前文件夹中有。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-10-14T19:23:26.833

我错误地使用 sudo 和其他没有权限安装了一些软件包，这解决了我的问题。

```
sudo chown -R $(whoami) $HOME/.npm 
```

希望它可以帮助某人。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-07-07T23:35:09.660

根据使用的 grunt 版本，这里可能会出现一些问题。较新版本的 grunt 实际上指定您有一个名为`Gruntfile.js`（而不是旧的`grunt.js`）的文件。

您应该`grunt-cli`全局安装该工具（这是通过 完成的`npm install -g grunt-cli`）。这允许您`grunt`从命令行实际运行命令。

其次，确保你已经为你的项目在本地安装了 grunt。如果你看到你`package.json`没有类似`"grunt": "0.4.5"`的东西，那么你应该`npm install grunt --save`在你的项目目录中做。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-07-21T12:12:21.327

我不得不在 ubuntu 上执行以下命令来解决这个问题（我知道 grunt 1 小时）：

```
sudo npm install -g grunt
sudo npm install -g grunt-cli

cd /usr/local/bin
# current symlink points to ../lib/node_modules/grunt/bin/grunt*
sudo rm /usr/local/bin/grunt
sudo ln -s ../lib/node_modules/grunt-cli/bin/grunt* grunt 
```

它很脏，但它是我找到的唯一一种解决方案...... :(

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-09-10T15:02:00.530

以上都没有对我有用，因为我已经在全球范围内安装了 grunt（奇怪的是在其中几个答案中推荐），这把一切都搞砸了。这是有效的：

```
npm uninstall -g grunt
npm install 
```

直到现在，我才安装了本地 grunt，并且可以使用。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-08-11T02:31:10.073

只是`npm install`为了安装`node_modules`

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-12-08T06:47:26.883

你可以简单地运行这个命令：

```
npm install grunt --save-dev 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-03-30T06:44:22.023

作为 grunt 的新手并对其进行设置，我正在（也许愚蠢地）从 Google Drive 运行我的 grunt 项目/文件夹，因此我可以从我的笔记本电脑或工作站访问相同的代码/构建。

有相当多的nodes_modules文件夹同步回Google Drive，并且在某些时候似乎存在冲突，并且/nodes_modules/grunt文件夹被重命名为/nodes_modules/grunt (1)

通过删除 (1) 重命名它似乎对我来说是修复它。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-11-09T08:02:57.587

我在 Vagrant 中遇到了同样的问题。

我已经使用 sudo 运行命令进行安装。

```
sudo npm install -g grunt-cli 
```

它对我有用。

# php - 如何在 Yiibooster 中使用配置 TbEditableColumn？

> ID：13925917
> 
> 赞同：4
> 
> 时间：2012-12-18T03:40:00.687
> 
> 标签：php, yii, yii-extensions

我正在尝试使用 Yiibooster 让 TbEditableColumn 工作。我已按照此处的说明进行操作[http://yii-booster.clevertech.biz/components.html#editable](http://yii-booster.clevertech.biz/components.html#editable)

我对这条线感到困惑

```
'editable' => array(
'url' => $this->createUrl('site/editable'),
'placement' => 'right',
'inputclass' => 'span3'
) 
```

这是否意味着我应该已经有一个 actionEditable() 方法或需要创建一个？

我尝试在我的图像控制器中使用预先存在的 actionUpdate($id) 方法。

```
'editable' => array(
'url' => $this->createUrl('image/update', array('id'=>'1')),
'placement' => 'right',
'inputclass' => 'span3' 
```

ATM 它会更新前端，但是当我刷新页面时，它不会保留其值。

在这个例子中，我对 id 进行了硬编码。

如果我需要创建一个 actionEditable 方法，有没有人这样做并且可以发布如何？

亲切的问候 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T02:58:36.290

以下对我有用。

在我的 admin.php 视图中，我有以下代码：

```
'editable' => array(
    'url' => $this->createUrl('image/editableSaver'),
    'placement' => 'right',
    'inputclass' => 'span3'
), 
```

在我相应的控制器中，我有这个（根据@schmunk 的）评论。有细微的变化。

```
public function actionEditableSaver()
{
    Yii::import('bootstrap.widgets.TbEditableSaver');
    $es = new TbEditableSaver('Image');
    $es->update();
} 
```

所以我需要改变

```
public function actionEditableSaver()
{
    Yii::import('path.to.editable.EditableSaver');
    $es = new EditableSaver('MyModel');
    $es->update();
} 
```

到

```
public function actionEditableSaver()
{
    Yii::import('bootstrap.widgets.TbEditableSaver');
    $es = new TbEditableSaver('Image');
    $es->update();
} 
```

对应于我的小部件名称中的 Tb 前缀（从[http://yii-booster.clevertech.biz/getting-started.html](http://yii-booster.clevertech.biz/getting-started.html)下载）

我希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T08:25:53.227

到目前为止你是对的。该方法非常简单，因为有一个现有的组件。将以下代码放入您的控制器并调用`image/editableSaver`

```
public function actionEditableSaver()
{
    Yii::import('path.to.editable.EditableSaver');
    $es = new EditableSaver('MyModel');
    $es->update();
} 
```

# perl - 为什么 Tk 画布这么慢？

> ID：13925920
> 
> 赞同：5
> 
> 时间：2012-12-18T03:40:52.163
> 
> 标签：perl, tk

我使用 Perl 和 TK 编写了元胞自动机（康威的生命游戏），只是为了好玩和练习。它适用于控制台输出。当我使用 TK 时，在第一个版本中，我只是删除并添加了新的单元格（矩形），大约 100 步后，我的程序变慢了（大约 10 倍）。然后我重写了图形部分：最初制作了所有 2500 个单元格 (50x50)，然后更改它们的颜色而不是添加/删除它们。但经过 600-700 步后，我重新设计的自动机也开始减速。

**这是 TK 的功能/错误还是我做错了什么？**

按标签更改颜色：

```
$canvas->itemconfigure("cell"."$x $y", -fill=>'blue'); 
```

创建网格：

```
for($y = 0; $y < 50; $y++)
{
    for($x = 0; $x < 50; $x++)
    {
        $canvas->createRectangle($x * 10, $y * 10, ($x + 1) * 10, ($y  + 1) * 10, -fill=>'white', -tags=>["cell"."$x $y"]);
    }
} 
```

启动和停止循环：

```
sub start
{
    $repeat = $MainWindow->repeat($speed, sub{&maketurn;});
    # Function "maketurn" is not important, it is a simple counting of "alive" cells
    # and changing color by tag
}

sub stop
{
    if(defined($repeat))
    {
        $repeat->cancel();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T04:57:34.263

我发现一篇关于 tk canvas 小部件在很多项目上运行缓慢的文章。该问题听起来与您的问题非常相似：

[http://code.activestate.com/lists/perl-tk/17282/](http://code.activestate.com/lists/perl-tk/17282/)

解决方案可能是使用行为很像位图的 tk 照片小部件。调整您的代码会有点痛苦，但似乎画布小部件对于许多对象来说天生就很慢。

# c# - 如何让我的 Windows 窗体程序执行任何 SendTo 快捷方式

> ID：13925921
> 
> 赞同：3
> 
> 时间：2012-12-18T03:41:02.630
> 
> 标签：c#, winforms, sendto

我希望能够在我的程序内的文件列表上显示 SendTo 菜单，然后在所选文件上执行 SendTo 快捷方式或 droptarget。看来我可以 ShellExecute 一个 .lnk 文件，但我需要知道如何模拟将指定文件拖放到 droptarget 上，例如“Mail Recipient”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T16:24:28.120

使用“发送到”菜单项只不过是使用所选文件作为附加参数调用 lnk。

所以你只需要 shellexecute .lnk 并给你的目标

```
ShellExecute( 0, "open", lnkPath, targetfilePath, NULL, SW_SHOW ); 
```

# cmd - 用批处理文件在文件名中附加当前日期和时间

> ID：13925923
> 
> 赞同：5
> 
> 时间：2012-12-18T03:41:27.193
> 
> 标签：cmd

我尝试在我的日志文件的文件名中附加当前日期和时间。它工作得很好，但从来没有从上午 10:00:00 开始，我没有尝试它什么时候停止工作，也许在 00:00:00 我不知道。

请问我该如何解决这个问题？

这是批处理文件：

```
echo off
cls
date /t >> d:\Folder_Log\log.txt
time /t >> d:\Folder_Log\log.txt
echo Starting execution >> d:\Folder_Log\log.txt
java -jar d:\NetBeansProjects\myapplication\dist\myapplication.jar 2>> d:\Folder_Log\log.txt
echo Finished execution >> d:\Folder_Log\log.txt
:: Writing log file in D:\Folder_Log\Log.txt***********************************************************
Timeout /t 3 /nobreak >nul
ren d:\Folder_Log\log.txt-log-%date:~0,2%-%date:~3,2%-%date:~6,4%-%time:~0,2%-%time:~3,2%-%time:~6,2%.txt 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T05:07:31.810

如果小时小于 10，那么您的名字中会出现一个空格。必须引用带空格的名称。

```
ren "d:\Folder_Log\log.txt" "log-%date:~0,2%-%date:~3,2%-%date:~6,4%-%time:~0,2%-%time:~3,2%-%time:~6,2%.txt" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-21T07:17:14.743

要在批处理脚本中的文件之前附加日期和时间，它将起作用

设置 "hr=%time:~0,2%-%time:~3,2%-%time:~6%" 设置 "filename=%date%_%hr%_response_report.csv" echo >> %filename%

# web-services - 选择 Web 服务框架时应该考虑哪些因素？

> ID：13925925
> 
> 赞同：5
> 
> 时间：2012-12-18T03:42:19.573
> 
> 标签：web-services, delphi

我想构建我的第一个 Web 服务功能，我在 Delphi XE 中看到了几种方法来做到这一点……WebBroker、WebSnap、WebServices、Indy。我设置了一个 Apache 服务器和 Echo 演示，它展示了一种可能的架构/框架，但已经阅读到使用 WebBroker 可能允许将 Apache 排除在循环之外。

我需要简单性和一些可扩展性，但通常只需要几个客户端，最多 20 个。

一个人如何开始选择一种方法，一种可以在 Delphi 中支持大约 10 年的方法？我是 Web 编程新手，但从一开始就一直在使用 Delphi/TP。老铁们有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:18:35.453

你可以使用 Delphi 自带的 WebServices，在 Apache 或 IIS 下运行 ISAPI dll 或 cgi exe。如果您想要一个独立的解决方案、应用程序或服务，请使用 RemObjects（这将花费您，但物有所值）。

另外，看看这个[使用 Indy 构建独立的 Web 服务](http://edn.embarcadero.com/article/27513)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:57:40.383

（此答案假设您正在寻找 Delphi 的 SOAP Web 服务框架）

[如果系统需要为WS-Security](http://en.wikipedia.org/wiki/WS-Security) / [WS-Basic Profile](http://en.wikipedia.org/wiki/WS-I_Basic_Profile)等扩展做好准备，并且可能需要与其他平台的互操作性，我建议采用分层解决方案：

*   使用现有框架（如 .NET 平台上的 WCF 或 Java 平台上的 JAX-WS）向消费者公开 Web 服务

*   在 Delphi 端和 Web 服务层之间实现一个简单的通信接口（基于 JSON 或 XML 消息）

这将 Delphi 端与实际的 Web 服务层分离，从而允许支持消费者最先进的需求，而无需重新发明轮子或“破解”Delphi Web 服务限制

# c# - 如何保持零小数位为零？

> ID：13925927
> 
> 赞同：0
> 
> 时间：2012-12-18T03:42:35.843
> 
> 标签：c#

我用了：

```
Result_TextBox.Text = result.ToString(".#######");  //result is double 
```

但是如果结果是 100.0000000，它就变成了 100。我应该使用什么来保持小数点后 7 位的精度？

我试过：

```
Result_TextBox.Text = Math.round(result, 7);  //but this is effective at all, why? 
```

请帮忙

更新：有人可以解释“#”和“0”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T03:44:33.850

采用：

```
Result_TextBox.Text = result.ToString("0.0000000"); 
```

第二行不起作用，因为您试图将数字数据类型分配给字符串而不进行转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T03:49:37.637

这有效

```
Result_TextBox.Text = result.ToString("#.0000000"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T03:47:27.387

尝试：

```
result.ToString("0.0000000") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-16T15:12:18.283

有一个[标准的数字格式字符串](https://docs.microsoft.com/en-us/dotnet/standard/base-types/standard-numeric-format-strings)。
您可以使用[定点 ("F") 格式](https://docs.microsoft.com/en-us/dotnet/standard/base-types/standard-numeric-format-strings#the-fixed-point-f-format-specifier)说明符后跟一个数字来定义小数位数。

```
Console.WriteLine(100.ToString("F7"));
// -> 100.0000000

Console.WriteLine(100.ToString("F3"));
// -> 100.000 
```

示例：[https ://dotnetfiddle.net/EmPewm](https://dotnetfiddle.net/EmPewm)

# android - 当父元素不是时，使线性布局的子元素不可点击

> ID：13925928
> 
> 赞同：1
> 
> 时间：2012-12-18T03:42:36.160
> 
> 标签：android, android-layout

我有一个 LinearLayout 存储为`app_view`.

有一段时间我将`app_view`侧边栏滑过去。在这个时候，我想把所有东西都`app_view`变成不可点击的。

我不希望在显示侧边栏时可以点击布局的小条。

我试过设置`app_view.setClickable(false)`，但这似乎并没有在所有子元素上设置可点击？

处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-08-04T07:42:16.007

```
public static void setClickableRecursive(View view, boolean isClickable){
    if(view instanceof ViewGroup){
        ViewGroup group = (ViewGroup) view;
        for(int i = 0; i < group.getChildCount(); i++){
            setClickableRecursive(group.getChildAt(i), isClickable);
        }
    }else{
        view.setClickable(isClickable);
    }
} 
```

# plsql - 即使在转换原因之后，PlSQL 数据类型也无效

> ID：13925930
> 
> 赞同：1
> 
> 时间：2012-12-18T03:43:11.113
> 
> 标签：plsql

当我做

```
SQL> select cast( csv_convert.to_text( 'ABC,ACD,DE' ) as t_tbl_of_text ) from dual;
select cast( csv_convert.to_text( 'ABC,ACD,DE' ) as t_tbl_of_text ) from dual
             *
**ERROR at line 1:
ORA-00902: invalid datatype**

create or replace package csv_convert is
   type t_tbl_of_text is table of varchar2(32767);
    function to_text( p_str in varchar2 )
           return t_tbl_of_text;
end csv_convert;
/

Package created.

create or replace package body csv_convert as
    function to_text(p_str in varchar2 ) return t_tbl_of_text is
           l_data    t_tbl_of_text := t_tbl_of_text();
           l_str     varchar2(32767) default p_str || ',';
           l_n       number;
           begin
                   loop
                           l_n := instr( l_str, ',' );
                           exit when (nvl(l_n,0) = 0);
                           l_data.extend;
                           l_data( l_data.count ) := trim(substr(l_str,1,l_n-1));
                           l_str := substr( l_str, l_n+1 );
                   end loop;
           return l_data;
           end to_text;
end csv_convert;
  / 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:08:19.727

包中定义的 PL/SQL 类型对 SQL 语句是不可见的：它们是纯 PLSQL 构造，SQL 语言不能直接访问它们。可以观察到相同的现象`VARCHAR2`：SQL 可以定义/访问`VARCHAR2`多达 4000 个字节，而 PL/SQL 将能够处理多达 32767 个字节的字符串。

解决方法是使用 SQL 类型，例如 VARRAY 的嵌套表：

```
SQL> CREATE TYPE obj_tbl_of_text IS TABLE of varchar2(4000);
  2  /

Type created

SQL> CREATE OR REPLACE PACKAGE csv_convert IS
  2     FUNCTION to_text(p_str IN VARCHAR2) RETURN obj_tbl_of_text;
  3  END csv_convert;
  4  /

Package created

SQL> CREATE OR REPLACE PACKAGE BODY csv_convert AS
  2     FUNCTION to_text(p_str IN VARCHAR2) RETURN obj_tbl_of_text IS
  3        l_data obj_tbl_of_text := obj_tbl_of_text();
  4        l_str  VARCHAR2(32767) DEFAULT p_str || ',';
  5        l_n    NUMBER;
  6     BEGIN
  7        LOOP
  8           l_n := instr(l_str, ',');
  9           EXIT WHEN(nvl(l_n, 0) = 0);
 10           l_data.EXTEND;
 11           l_data(l_data.COUNT) := TRIM(substr(l_str, 1, l_n - 1));
 12           l_str := substr(l_str, l_n + 1);
 13        END LOOP;
 14        RETURN l_data;
 15     END to_text;
 16  END csv_convert;
 17  /

Package body created 
```

现在可以直接在 SQL 中调用 pacakge（即使没有 CAST）：

```
SQL> select csv_convert.to_text( 'ABC,ACD,DE' ) from dual;

CSV_CONVERT.TO_TEXT('ABC,ACD,DE')
--------------------------------------------------------------------------------
OBJ_TBL_OF_TEXT('ABC', 'ACD', 'DE') 
```

# windows-phone-8 - NFC 可以使用标签中的 URL 启动 Maps App 吗？

> ID：13925931
> 
> 赞同：0
> 
> 时间：2012-12-18T03:43:19.910
> 
> 标签：windows-phone-8

我正在尝试找到一种从 URL 启动地图应用程序的方法，该应用程序具有 lon/lat，最好是样式（空中）。我已经尝试按照其他地方的建议使用 bing 地图 URL 构造，如下所示：http: [//onlinehelp.microsoft.com/en-us/bing/ff808440.aspx](http://onlinehelp.microsoft.com/en-us/bing/ff808440.aspx)但它似乎不起作用。至少在我的 Lumia 822 上，它在 IE10 而不是应用程序中打开（当然，他们切换到诺基亚地图）。有没有办法构建一个将在地图应用程序而不是浏览器中的 WP8 中打开的 url（我猜 WP7 没关系，因为我说的是 NFC ......）？

我也尝试使用带有 explore-maps:// 的 uri……但在另一个问题中，Justin Angel 表示诺基亚的立场是不支持此功能，并且将来可能会被破坏。否则它会起作用——至少现在是这样。我想要一种不会破坏的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:02:27.140

有关在 NFC 标签上存储地理坐标的更多信息，请访问以下链接：[http ://social.technet.microsoft.com/wiki/contents/articles/13759.how-to-store-geo-coordinates-on-an -nfc-tag.aspx](http://social.technet.microsoft.com/wiki/contents/articles/13759.how-to-store-geo-coordinates-on-an-nfc-tag.aspx)

它还包含有关使用您自己的应用程序编写标签的更多信息。

在上一个链接中可以找到另一个可能对您有所帮助的链接是这个： http: [//www.developer.nokia.com/Blogs/Code/2012/03/22/cross-platform-nfc-geo-tags /](http://www.developer.nokia.com/Blogs/Code/2012/03/22/cross-platform-nfc-geo-tags/)这是一篇关于 2012 年 3 月的地理标签的博文，更侧重于诺基亚。

所有这些链接和帖子均由负责 Proximity API 的 NDEF 库的 Andreas Jakl 制作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T16:31:12.997

Windows Phone 接受“maps:”协议，因此您可以继续创建一个带有“maps:1234,5678”之类 url 的 NFC 标签，Windows Phone Maps 应用程序将为您打开它！

# javascript - 使用后退和下一个按钮在 html 页面之间切换

> ID：13925932
> 
> 赞同：3
> 
> 时间：2012-12-18T03:43:22.370
> 
> 标签：javascript, html

这是我的网站[http://www.damianplisko.com](http://www.damianplisko.com) 我想要一个上一个和下一个按钮，可以在我的 html 投资组合页面之间切换。如果用户在我的投资组合页面之一上，他们所要做的就是单击下一步并它会将他们带到下一个投资组合页面，而不是返回主菜单。无论如何要使用js来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T03:59:04.560

由于您没有使用 CMS（我推荐），因此在不使用 AJAX 或任何外部库的情况下，我能想到的最简单的解决方案是按照您希望它们显示的顺序创建一个包含所有页面的数组。

```
var pages = [
  'MedTech.html',
  'Trainer.html',
  'YoungGuns.html',
  ...
]; 
```

然后，您可以通过抓取当前页面并检查下一个页面来设置您的新 URL。

```
var next = document.getElementById('next'); // your DOM element

next.addEventListener('click', function() {

  var current = location.pathname, // current page ie. MedTech.html
      idx = pages.indexOf( current ); // find page in pages array

  // go to next page if page exists
  // otherwise go to first page   
  if ( idx > -1 ) {
    location.pathname = pages[ ++idx ] || pages[0];
  }

}); 
```

对于“后退”按钮，您可以简单地使用历史记录或调整上面的功能。

**编辑：**`idx > -1`如果您确保数组中的所有页面都确实存在，您可以在不检查的情况下逃脱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T20:09:31.000

使用 jquery 执行此操作的另一种方法是：

```
 var pages = ['page1.html', 'page2.html', 'page3.html'];

    $(".nav-button").on('click', function () {
        var currentPage = location.pathname,
            idx = pages.indexOf(currentPage),
            newIndex, failOver;
        if (idx > -1) {
            newIndex = $(this).hasClass("next") ? ++idx : --idx;
            failOver = $(this).hasClass("next") ? 0 : 2;
            location.pathname = pages[newIndex] || pages[failOver];
        }
    }); 
```

# android - android将文件从服务器下载到应用程序文件夹

> ID：13925933
> 
> 赞同：4
> 
> 时间：2012-12-18T03:43:29.493
> 
> 标签：android, download

我正在开发 Android 应用程序，它在 Assets 文件夹中有 json 文件。现在我想稍后从服务器更新此文件，但似乎无法在运行时更新 Assets 文件夹中的文件。所以我的问题是我最初应该把这个 json 文件放在哪个位置，然后它也可以从服务器更新。我也不想更新 android 代码并要求用户从市场上更新应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T03:57:37.920

您可以将 json 保存到共享首选项或 sqlite，然后调用服务器 api 来更新本地数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T05:53:15.467

/data/data/your.package.name/（这是应用程序的本地文件夹）或 sqlite。下次有更改时，您的文件可以直接下载到 /data/data/your.package.name/ 或 sqlite DB。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T05:48:01.813

在 apk 中添加或修改文件真的很难，应用程序不应该这样做。

您在 assets 文件夹中有一个配置文件，它是初始配置。当你下载一个新版本的配置文件时，你可以把它放在 sdcard 中，保存在 SharedPreference 或任何其他方法中进行持久化。当你想使用它时，你可以遍历所有这些配置并找到一个最新的。

# javascript - Displaying AJAX Data In Rows/Cells Of Existing Table Without Losing Separate Java Script Sorting, FIltering, Etc. Functionality Of Table

> ID：13925938
> 
> 赞同：1
> 
> 时间：2012-12-18T03:44:21.383
> 
> 标签：javascript, php, mysql, ajax, html-table

I am a complete programming novice having an issue of trying to get AJAX data appropriately into an existing table structure on my main page without losing the separate Javascript functionality of the table (sorting, filtering, etc.).

I have seen similar questions posed on this website that are close to what I am trying to accomplish but still do not provide the exact solution I am looking for.

I have an Ajax script that monitors a specified database table for any changes and will display any changes to a div tag ('object_area') on the main page via a php script in a separate file table.php. This AJAX script works perfectly.

Here is the ajax script:

```
// AJAX REQUEST
function httpRequest(){
        var httpRequest = null;
        try { httpRequest = new XMLHttpRequest(); }
        catch(e){
                try{httpRequest = new ActiveXObject("Msxml2.XMLHTTP");}
                catch(e){httpRequest = new ActiveXObject("Microsoft.XMLHTTP");}
        }
        return httpRequest;
}

var t;
function load_data(){
        var http_request = httpRequest();
        var object_area = document.getElementById('object_area');
        var url = "table.php";
        http_request.open("GET", url, true);
        http_request.onreadystatechange = function(){
                if(http_request.readyState == 4){
                        object_area.innerHTML = http_request.responseText;
                }
        }
        http_request.send(null);
        t = setTimeout(load_data, 1000);
}

document.onload = load_data(); 
```

Here is the pertinent code from table.php which is displayed back on the main page in the div tag: The data is pulled into a table (I have omitted the rest of the table code here and just shown the body data fetching portion.)

```
$result = mysql_query("SELECT * FROM Encounters WHERE encounterdate ='$mydate' && encounterstatus = 'pending'");

while($row = mysql_fetch_array($result))
{

  echo "<tr>";
  echo "<td>" . $row['encounterstatus'] . "</td>";
  echo "<td>" . $row['encountertime'] . "</td>";
  echo "<td>" . $row['patientfirstname'] . "</td>";
  echo "<td>" . $row['patientlastname'] . "</td>";
  echo "<td>" . $row['patientdob'] . "</td>";
  echo "<td>" . $row['encounterprovider'] . "</td>";
  echo "<td>" . $row['encountertype'] . "</td>";
  echo "<td>" . $row['encounterreason'] . "</td>";
  echo "<td>" . $row['primaryinsurancecompany'] . "</td>";
  echo "<td>" . $row['secondaryinsurancecompany'] . "</td>";
  echo "<td>" . $row['primaryinsuranceplanrules'] . "</td>";
  echo "<td>" . $row['copay1'] . "</td>";
  echo "<td>" . $row['deductible1'] . "</td>";
  echo "<td>" . $row['deductibleremaining1'] . "</td>";
  echo "<td>" . $row['coinsurance1'] . "</td>";
  echo "<td>" . $row['hrabalance'] . "</td>";
  echo "<td>" . $row['oopremaining'] . "</td>";
  echo "</tr>";
  } 
```

Here is the table code on the main page (similar to the one on table.php); but it has all the js functionality.

I want the AJAX data to display in this table without affecting the separate functionality.

Here is the code for the table on the main page using php to obtain the data row by row and display it in the table (note this is not by AJAX - it is just a standard table):

```
<table cellpadding="0" cellspacing="0" border="0" id="table" class="tinytable"> 
<thead>                         

    <tr>
<th><h3>Status</h3></th>
<th><h3>Time</h3></th>
<th><h3>First Name</h3></th>
<th><h3>Last Name</h3></th>
<th><h3>DOB</h3></th>
<th><h3>Provider</h3></th>
<th><h3>Visit Type</h3></th>
<th><h3>Visit Reason</h3></th>
<th><h3>Primary Insurance</h3></th>
<th><h3>Secondary Insurance</h3></th>
<th><h3>Policy Rules</h3></th>
<th><h3>Visit Copay</h3></th>
<th><h3>Deductible</h3></th>
<th><h3>Deductible Remaining</h3></th>
<th><h3>CI%</h3></th>
<th><h3>HRA</h3></th>
<th><h3>OOP</h3></th>
</tr>

</thead>
<tbody>

<?php
while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['encounterstatus'] . "</td>";
  echo "<td>" . $row['encountertime'] . "</td>";
  echo "<td>" . $row['patientfirstname'] . "</td>";
  echo "<td>" . $row['patientlastname'] . "</td>";
  echo "<td>" . $row['patientdob'] . "</td>";
  echo "<td>" . $row['encounterprovider'] . "</td>";
  echo "<td>" . $row['encountertype'] . "</td>";
  echo "<td>" . $row['encounterreason'] . "</td>";
  echo "<td>" . $row['primaryinsurancecompany'] . "</td>";
  echo "<td>" . $row['secondaryinsurancecompany'] . "</td>";
  echo "<td>" . $row['primaryinsuranceplanrules'] . "</td>";
  echo "<td>" . $row['copay1'] . "</td>";
  echo "<td>" . $row['deductible1'] . "</td>";
  echo "<td>" . $row['deductibleremaining1'] . "</td>";
  echo "<td>" . $row['coinsurance1'] . "</td>";
  echo "<td>" . $row['hrabalance'] . "</td>";
  echo "<td>" . $row['oopremaining'] . "</td>";
  echo "</tr>";
  }
 ?>         

 </tbody>
 </table> 
```

As previously mentioned, this table obtains functionality by a separate Javascript file (not shown here) that gives it the ability of sorting, filtering, etc.

Simply replacing the PHP "while loop" code with the div 'object_area' in the table body section results in loss of that separate scripting (sorting, filtering, etc) functionality of the table, although the data itself is displayed in a table format by virtue of table.php and does update correctly via the AJAX script. The loss of functionality would make sense considering the "table" on the main page is now really derived from two separate parts in this scenario.

Attempting to place the div directly in a table cell on the main page table in the manner below of course puts all the data in the first cell:

```
<?php
echo "<tr>";
echo "<td>"; 
?>  

<div id = "object_area"></div>

<?php
echo "</td>";
echo "</tr>";
?> 
```

I have also tried putting the entire table (js functionality and all) in table.php and displaying it in an I Frame on the main page. This does not work either.

Is there a way to parse the AJAX data into each specific cell of the table on the main page, row by row, based on the table structure and display it accordingly in the table body section without affecting the separate functionality of the entire table? (Perhaps there is a better way to do this, and I am going about this in the wrong fashion?).

# javascript - 如何使用 Javascript 函数作为另一个函数的参数？

> ID：13925945
> 
> 赞同：1
> 
> 时间：2012-12-18T03:45:43.657
> 
> 标签：javascript

每当我尝试在 Chromium 中运行此函数时，都会收到错误消息“Uncaught TypeError: Illegal invocation”。为什么会发生这种情况，我该如何解决？

```
getOutput([alert], ["Hi!", "Hello!", "Lolwut?"]); //why doesn't this call "alert"
//for each of the arguments?

//this function is supposed to return the output of each function for each argument.
function getOutput(functions, arguments){
    for(var i = 0; i < functions.length; i++){
        for(var j = 0; j < arguments.length; j++){
            functions[i](arguments[j]); //why doesn't this call the function
        }
    }    
}​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T03:50:45.573

**编辑**：

尽管此处给出的修复有效，但原因似乎与 rbtLong 建议的一样，即在`alert`其上下文之外调用本机函数（特别是此处）。使用这样的包装器：

```
function F(arg) {alert(arg);} 
```

代替`alert`您的代码原样使代码运行。尽管如此，如果您想要一个可以采用本机功能的通用功能，下面建议的修复方法仍然有效。

* * *

（顺便说一句：Safari 和 Firefox 也是如此）

它似乎与不允许在其后立即调用的数组访问构造有关。也许就像你做不到一样`1.toString()`。您可以像这样快速修复它：

```
getOutput([alert], ["Hi!", "Hello!", "Lolwut?"]);

function getOutput(functions, arguments){
    for(var i = 0; i < functions.length; i++){
        for(var j = 0; j < arguments.length; j++){
            var f = functions[i];
            f(arguments[j]);
        }
    }    
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T03:55:29.397

我相信这是因为你在它的上下文之外调用一个对象，这里描述的 method.call(args) [http://www.devguru.com/technologies/ecmascript/quickref/call.html](http://www.devguru.com/technologies/ecmascript/quickref/call.html)应该允许它。

```
functions[i].call(this, arguments[j]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T03:59:57.940

你的意思是这样的：

```
function getOutput(fn, args) { 
 for(var f = 0; f < fn.length; f++){
    for(var j = 0; j < args.length; j++){
        fun = fn[f];
        fun.call(this, args[j]);
    }
  }

}
getOutput([alert], ["Hi!", "Hello!", "Lolwut?"]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T03:52:21.387

我相信它会是这样的：

乐趣1（乐趣2（'大声笑'））；

或艰难的方式

var hi7 = fun2('大声笑')

乐趣1(hi7)

# ms-access - 如何在microsoft access中删除多个表中的记录

> ID：13925948
> 
> 赞同：1
> 
> 时间：2012-12-18T03:46:10.257
> 
> 标签：ms-access, select, highlight, sql-delete

如何从子表单中选择的多个表中删除记录，这些记录在选择时显示在下面的文本框中。“删除软件”按钮应该是删除它，是用向导创建的，但没有用。

![在此处输入图像描述](../Images/a08bf644e71fe671ccf357837f375a1e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:34:45.577

我不确定我是否喜欢这个表结构，从屏幕截图和 SQL 中可以看出**Application.SoftwareID**和**Software.ProductName**是相同的，所以不确定为什么需要这两个表。

但是，您只需要从选择**ComputerID的****应用程序**中删除，我不确定表单上的计算机名称字段是否是这样的，但如果是这样的话：

 **```
DELETE FROM Application WHERE ComputerID = [Forms]![Software_LicenseTracking]![ComputerName] 
```

如果没有，那么您可以通过隐藏的文本框公开相关的计算机 ID 字段并使用它。**

# objective-c - Objective-c 中的一种奇怪的类型转换

> ID：13925954
> 
> 赞同：3
> 
> 时间：2012-12-18T03:47:00.883
> 
> 标签：objective-c, ios, casting, uikit

我发现了一个演示片段，它使用了这样的类型转换：(int)view.'view' 是 UIView 对象的指针。我从来不知道它可以用来转换类型。有人可以帮我解释一下吗？在此处粘贴代码

```
- (CGPoint)accelerationForView:(UIView *)view
{
    // return
    CGPoint accelecration;

    // get acceleration
    NSValue *pointValue = [self._accelerationsOfSubViews objectForKey:
                                     [NSNumber numberWithInteger:(int)view]];
    if (pointValue == nil) {
        accelecration = CGPointZero;
    }
    else {
        [pointValue getValue:&accelecration];
    }

    return accelecration;
}

- (void)willRemoveSubview:(UIView *)subview
{
    [self._accelerationsOfSubViews removeObjectForKey:
                         [NSNumber numberWithInt:(int)subview]];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T04:00:49.500

```
[NSNumber numberWithInteger:(int)view] 
```

`view`不是类型的对象`UIView`，而是类型的指针`UIView*`。上面的代码将指针转换为 int 以便将其存储在 a 中`NSNumber`，显然是为了可以将其用作字典中的键。由于指针本身不是对象，因此您不能将它们用作字典键。但是如果你`NSNumber`从指针创建一个实例，你可以使用生成的对象作为键。人们有时会做这种事情来跟踪他们想要与一些未存储在对象本身中的对象（如视图）相关联的信息（如加速度）。

正如我在下面的评论中提到的，这里的代码使用`+numberWithInteger:`，这很好，因为该方法采用 a `NSInteger`，在 32 位系统上是 32 位，在 64 位系统上是 64 位。然而，作者随后通过强制转换为 取消了这个好的决定，`int`即使在 64 位系统上通常也是 32 位。演员真的应该是 to `NSInteger`，像这样：

```
[NSNumber numberWithInteger:(NSInteger)view] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T04:19:01.890

（注意：这是基于@Caleb 的回答，假设原始代码试图将`acceleration`值与 UIView 关联）

我会通过一个类别向 UIView 添加一个加速属性，如下所示：

UIView+加速.h：

```
@interface UIView ( Acceleration )
@property ( nonatomic ) CGPoint acceleration ;
@end 
```

UIView+加速.m

```
#import <objc/runtime.h>

@implementation UIView ( Acceleration )

const char * kAccelerationKey = "acceleration" ; // should use something with a prefix just in case

-(void)setAcceleration:(CGPoint)acceleration
{
    objc_setAssociatedObject( self, kAccelerationKey, [ NSValue valueWithCGPoint:acceleration ], OBJC_ASSOCIATION_RETAIN_NONATOMIC ) ;
}

-(CGPoint)acceleration
{
    return [ objc_setAssociatedObject( self, kAccelerationKey ) CGPointValue ] ;
}

@end 
```

删除`-accelerationForView:`and`-willRemoveSubview:`并使用`view.acceleration = <some point>`or `<some point> = view.acceleration`。

# c# - 当我从文本框中获取文本时，撇号变成 '

> ID：13925956
> 
> 赞同：0
> 
> 时间：2012-12-18T03:47:15.403
> 
> 标签：c#, asp.net, textbox, apostrophe

所以我知道当您尝试将撇号插入数据库时​​，撇号会搞砸，但我的撇号甚至在那之前搞砸了！这是我的代码的样子：

```
 String test = null;
   test= Textbox1.Text.ToString(); 
```

当我通过调试它，并说我在文本框1 中输入了“进展如何”时，我看到当我将该值传递给测试时，How's 中的撇号变成了“'”。

我猜它与页面的编码有关？但我不确定。有人知道吗？是否有一个字符列表会像这样搞砸，以便我可以进行通用修复？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T04:01:23.160

尝试使用[HttpUtility.HtmlDecode](https://msdn.microsoft.com/en-us/library/3ykbs7dz%28v=vs.110%29.aspx)。似乎您正在获取编码的字符串。

```
StringWriter myWriter = new StringWriter();
HttpUtility.HtmlDecode(Textbox1.Text.ToString(), myWriter);
String test = myWriter; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-09T08:27:06.057

我面临同样的问题。我已经通过更改页面的内容类型来解决它。

```
<%@ Page Language="C#" ContentType="application/xhtml+xm" %> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-18T04:08:56.813

我认为你有两个选择

1.  用 Say...Single_Quote 替换您的特殊字符（如 Single Quote），在从数据库中检索时，您可以在渲染时转换回 Single Quote

2.  插入数据库中的字符串。现在，在从数据库中获取数据时，您可以使用 Literal Control。此控件提供三个属性

    (a) 变换

    (b) 编码

    (c) 变换

# google-maps - What technique is mapwow.com using?

> ID：13925957
> 
> 赞同：-3
> 
> 时间：2012-12-18T03:47:20.863
> 
> 标签：google-maps, google-maps-api-3

I recently came across mapwow.com, and I was impressed with the Google Maps UI on custom content for map tiles.

Did they make this from scratch, or is there some Google Maps API or toolkit?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T04:02:44.273

实际上有一整篇关于制作这张地图的博客文章：

[http://int2e.com/blog/how-to-make-a-site-like-mapwowcom/](http://int2e.com/blog/how-to-make-a-site-like-mapwowcom/)

**编辑：**另外，如果您查看页面源代码，最后，大多数自定义平铺代码都在那里..

# iphone - 如何在 iPhone 上的 TableCell 中获取 TextField 位置？

> ID：13925965
> 
> 赞同：3
> 
> 时间：2012-12-18T03:48:51.113
> 
> 标签：iphone, objective-c, cocoa-touch, uitableview, uitextfield

![在此处输入图像描述](../Images/1c61846fd9b37a9c8d84315ebf02562e.png)

这是用户界面...（我知道它很丑...）橙色是视图，蓝色是表格，灰色的是表格单元格，最后，红色是表格单元格中的文本字段. 我的问题很简单，我只想知道红色文本字段的位置......似乎表格单元格可以上下移动，所以位置可以改变。所以，我不需要动态更新文本字段位置，我只需要用户单击文本字段时的位置，有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T04:46:03.877

您可以使用可用于 UIView 或其派生类的 convetrPoint 方法

```
- (CGPoint)convertPoint:(CGPoint)point toView:(UIView *)view
- (CGPoint)convertPoint:(CGPoint)point fromView:(UIView *)view 
```

在你的情况下，你需要这样做：

```
- (void)textFieldDidBeginEditing(UITextField *)textField 
{
     CGPoint textFieldOriginInTableView = [textFiled convertPoint:textField.frame.origin toView:tableView];
     //or if you want it relative to the orangeView, your toView should be the orangeView
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T05:18:16.983

我想提两件事：

1.  如果您的 textField 在 tabelViewCell 内，则无论单元格向上或向下多少，它的位置始终相同。这是因为 textField 是 tabelViewCell 的子视图，而不是视图。

2.  您可以通过以下几种方式获得：

    *   在`textFieldDidBeginEditing`委托方法上（正如您提到的，您需要在触摸它时表示开始编辑）。

    *   或者在您需要时通过以下代码：

    //你可以设置文本字段的标签

    ```
    UITableViewCell *cell = [yourTableView cellForrowAtIndexPath:yourCellIndexPath];
    UITextField *textField = (UITextField *)[cell.contentView viewWithTag:textFieldTag]; 
    ```

    //或者不想设置标签，只有文本字段存在

    ```
    for (UIView *v in [cell.contentView subviews]) {
      if ([v isKindOfClass:[UITextField class]]) {
          UITextField *textField = (UITextField *)v;
     }
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T03:54:36.433

假设拥有视图控制器是 UITextField 的委托，您可以实现 textFieldDidBeginEditing: 方法并获取文本字段的框架，如下所示：

```
- (void)textFieldDidBeginEditing(UITextField *)textField 
{
    CGRect rect = textField.frame;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T05:17:11.547

此代码集带有动画的框架尝试此代码...

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.2];
    CGRect youtTextFielfFrame = textField.frame;// get position of textfield from this code
    [textField setFrame:CGRectMake(textField.frame.origin.x - 50, textField.frame.origin.y,textField.frame.size.width,textField.frame.size.height)]; /// set frame which you want here......
    [UIView commitAnimations];
    return YES;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T05:24:11.217

首先给 textField 添加一个唯一的标签

```
yourTextField.tag = 1001; 
```

比在您想要文本字段位置的位置，只需执行

```
UITextField *myTextField = [cell viewWithTag:1001];

CGRect textFieldRect = myTextField.Frame; 
```

它将为您提供标记 textField 的框架，其中包含 textField 相对于其 superView 的 x、y、width、height 参数。

# r - Getting a random draw from the binomial distribution based on a sample statistic

> ID：13925969
> 
> 赞同：2
> 
> 时间：2012-12-18T03:49:35.140
> 
> 标签：r, random, montecarlo

EDIT: rephrased question for clarity of what I was wanting to achieve.

I have an observed dataset from which I want to use some information to feed into a Monte Carlo simulation. I'm using R for this study.

e.g. 8/8 individuals have a particular characteristic in my observed dataset.

What I want to do is use the sampling distribution from this observed data to choose some possible population proportions to feed into a random number generator, whereby I can then generate some simulated counts (where I also need to use a larger denominator).

The observed data and the 95% confidence interval are as follows:

```
binom.test(8, 8)
## gives point estimate of 1 and 95% CI 0.63, 1 
```

I would then want to take (e.g.) 1000 random draws from this sampling distribution to feed into a random binary outcome generator for a larger denominator (e.g. 12 trials per iteration). Let’s say the first random draw was a 0.75 chance of having an event (code below is just illustrating a single iteration):

```
set.seed(456)    
rbinom(1, 12, 0.75)
## Gives a count of 11 events out of 12 for this single iteration. 
```

My question then is how to get R to draw the probabilities from the observed data’s sampling distribution (i.e. 95% of these drawn probabilities should fall between 0.63 and 1, with a shape as defined by the underlying statistical theory), which I can then use to generate random counts with a larger denominator (probably using rbinom).

EDIT: My original post was more convoluted and confusing: I hadn’t fully thought through the implications of rbinom using a population parameter, even though I was pretty sure that this was the source of my "problem" with rbinom. Thanks to DavidRobinson and DWin for comments/answers that clarified my answer as well as my revised question...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:41:26.440

你很困惑......因为你的第一个问题是胡说八道......这是讨论的错误地点。有许多理论总体可以合理甚至不合理地从二项式总体中得出一系列观察到的伯努利图 8/8。假设你在一个瓮中有 99 个黑球和一个白球。在 8 次平局中得到 8/8 个黑球并进行替换是合理的。这种序列的概率为 (99/100)^8 = 0.923

这段代码展示了它在 R“实践”中是如何工作的

```
> set.seed(123)
> sum(rbinom(10000, 8, .99)==8)
[1] 9263 
```

所以在这个模拟中，8 个平局序列中有 92.63% 的 8 个球都是黑色的。现在重新考虑你在问什么，并提出更多这样的问题（在 stats.stackexchange。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T21:11:09.697

这个答案是根据@DavidRobinson（谢谢！）的评论提出的，他建议根据我观察到的数据对概率进行后验分布。

代码改编页。42 of Hoff, PD (2009), *A First Course in Bayesian Statistics* , Springer, NY。

```
## Set a uniform prior.
a <- 1; b <- 1
## Set observed data.
n <- 8; y <- 8

## Posterior 95% confidence interval:
qbeta(c(.025, .975), a+y, b+n-y)
## returns [1] 0.6637329 0.9971909 
```

这非常接近基于二项分布的置信区间，由于先验的影响略有不同。

```
binom.test(8, 8)
## returns  95% CI of 0.6305834 1.0000000. 
```

现在我可以从这个后验分布中绘制一组随机概率来生成一些计数。我将在这里仅使用五张画作说明。

```
set.seed(9876)
n.draws <- 5

## Use rbeta to get n.draws from posterior distribution.
drawn.probs <- rbeta(n.draws, a+y, b+n-y)

## Now I can use these drawn probabilities in rbinom to get simulated counts.
rbinom(n.draws, 12, drawn.probs) 
```

感谢您的评论/回答——这让我意识到这不仅仅是我在尝试使用 rbinom 时遇到的问题，而是我错过了一个中间步骤。

# solr - Querying partial phases with solr

> ID：13925973
> 
> 赞同：0
> 
> 时间：2012-12-18T03:49:52.960
> 
> 标签：solr, solr-query-syntax

I have a document with persons name and I would like to return those document based on partial names, for example:

Querying: "Joseph Gar*"

Should return

```
Joseph Garret
Joseph Garnier 
```

How to make that query using solr?

I have tried:

```
q=complete_name:"Joseph Gar*"
q=complete_name:"Joseph Gar"~5
q=complete_name:(Joseph AND Gar) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T03:58:10.887

您可以尝试以下查询：-

q=complete_name:约瑟夫·加尔*

然后对 Joseph 和 Gar 按指定顺序匹配的那些短语进行提升。请注意，上述内容也会产生名称类似于“Garret Joseph”的结果。但是，由于提振，这样的结果将被向下推。

但是，如果您只喜欢与上述顺序匹配的结果，那么我建议您查看以下链接：-

[https://issues.apache.org/jira/browse/SOLR-1604](https://issues.apache.org/jira/browse/SOLR-1604)

上面在短语中讨论了通配符。

注意：- 当我使用上述 jar 文件时，有时会超出最大布尔子句计数（可以在 solrconfig.xml 中增加。但是，它仍有可能不够用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:49:30.130

尝试在 schema.xml 中为您的字段（完整名称）使用以下字段类型，

```
<fieldType name="text_search" class="solr.TextField" sortMissingLast="true" omitNorms="true">
    <analyzer>
        <tokenizer class="solr.KeywordTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory" />  
    </analyzer>   
</fieldType> 
```

并且您在 schema.xml 中的字段定义就像

```
<field name="complete_name" type="text_search" indexed="true" stored="true"/> 
```

并使用类似的查询进行搜索

```
q=complete_name:*Joseph\ Gar* 
```

要处理字母和数字以外的特殊字符，请在每个字符前使用转义字符 \。示例：要搜索包含 $ 的文本，请给出 q=*\$*

希望这个答案可以解决您的问题。

# gcc - GCC-generated asm :: Where did I assign to that register?

> ID：13925974
> 
> 赞同：2
> 
> 时间：2012-12-18T03:49:52.657
> 
> 标签：gcc, assembly, x86, cpu-registers, att

> **Possible Duplicate:**
> [Not sure why we add the registers %rdx and %rax when the assembly code has been using %eax and %edx](https://stackoverflow.com/questions/13127611/not-sure-why-we-add-the-registers-rdx-and-rax-when-the-assembly-code-has-been)

all. So, here's my minimal program:

```
int main(int argc, char * argv[]){
    volatile int a;
    volatile int b;
    volatile int c;
    a = 9;
    b = 15;
    c = a+b;
    return c;
} 
```

I now run gcc -S on this, and here's the meat of the generated assembly:

```
.LCFI1:
    movl    %edi, -20(%rbp)    //unknown setup
    movq    %rsi, -32(%rbp)    //unknown setup
    movl    $9, -4(%rbp)       //a=9, so -4(%rbp) is the register for a.
    movl    $15, -8(%rbp)      //b=15, so -8(%rbp) is b's register.
    movl    -4(%rbp), %edx     //move a into the register for addition.
    movl    -8(%rbp), %eax     //move b into the register for additon.
    leal    (%rdx,%rax), %eax  //Add a and b, store in %eax. (PROBLEM LINE)
    movl    %eax, -12(%rbp)    //Store %eax in c's register.
    movl    -12(%rbp), %eax    //get ready to return c. 
    leave                      //we're done here.
    ret 
```

Okay, so you see the line I indicate as the problem line. Here's my question: What on earth are %rdx and %rax? The only registers I've loaded things into are %edx and %eax.

Since the program works, %rdx and %rax must be some sort of alias to %edx and %eax, accordingly. Can someone possibly explain the nuances of x86 register nomenclature? I'm completely in the dark on this.

(Of note, if I change the problem line to `addl %edx, %eax`, the result is identical, but if I change it to `addl %rdx, %rax`, I get "Error: Incorrect register '%rax' used with l suffix")

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T03:59:29.273

如果您不确定寄存器及其大小，请查看[此处。](https://stackoverflow.com/questions/228200/x86-assembly-registers-why-do-they-work-the-way-they-do/228231#228231)这样想

```
union{
  struct{
    uint32_t eax;
    uint32_t padd;
  };
  uint64_t rax;
}; 
```

`eax`并且`rax`共享同一个寄存器，`eax`是该寄存器的低部分。

这就是为什么`addl`不能使用以 r 为前缀的寄存器的原因，它们比`addl`预期的要长。试试`addq`吧。

# objective-c - iOS: self.object = nil not calling dealloc while release does

> ID：13925976
> 
> 赞同：1
> 
> 时间：2012-12-18T03:50:19.163
> 
> 标签：objective-c, ios, cocoa-touch, memory-management

I have a class subclassing UIView called BizView. and I have the following code

```
@property (nonatomic, retain)BizView * bizPlace; 
```

/

```
@synthesize bizPlace = _bizPlace;

    -(void) showBiz
    {

        BizView * biz = [[BizView alloc] initWithFrame:CGRectMake(0.0, 0.0, 320.0, 30.0)];
        self.bizPlace = biz;
        [biz release];

        self.bizPlace.delegate = self;
        [self.bizPlace doStuff];
    }

    -(void) removeBizView
    {
        [self.bizPlace removeFromSuperview];

        self.bizPlace = nil; //****** this does not call the dealloc of bizPlace
        // [_bizPlace release];   >>>>>>this does call the dealloc

        [self performSelector:@selector(showBiz) withObject:nil afterDelay:1];
    }

    //biz view delegates
    -(void)didBizStuff:(BizView *)bView
    {
        [self.view addSubview:_bizPlace];

        [self performSelector:@selector(removeBizView) withObject:nil afterDelay:1];

    }

    -(void)dealloc
    {
        self.bizPlace = nil;
        [super dealloc];
    } 
```

Now according to the docs and various articles on the internet, setting self.bizPlace = nil should call the dealloc of bizPlace but this is not the case here. However, calling [_bizPlace release] does. What could be the reason for this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T04:13:55.923

因此，您正在比较的两个步骤存在明显差异。当您使用强指针综合 bizPlace = _bizPlace 时，您正在为这个特定元素分配内存。此时，您有一个指针 (_bizPlace) 作为此类的一部分强分配。通过综合设置器将此设置为 nil 不会导致类释放其成员变量，但是在该特定变量上调用 release 会导致 _bizPlace 被释放。

这里发生了不同级别的 nil 设置，这是您应该从中删除的主要内容。您应该注意，综合到变量中的强属性的行为与局部变量分配的行为不同。这是由于指向内存块的人数众多。

# python - 使用 urllib2 登录网站 - Python 2.7

> ID：13925983
> 
> 赞同：37
> 
> 时间：2012-12-18T03:51:05.050
> 
> 标签：python, python-2.7, login, urllib2

好的，所以我将它用于 reddit 机器人，但我希望能够弄清楚如何登录到任何网站。如果这有意义....

我意识到不同的网站使用不同的登录表单等。那么我如何弄清楚如何为每个网站优化它？我假设我需要在 html 文件中查找某些内容，但不知道是什么。

我不想使用 Mechanize 或任何其他库（这是这里所有其他答案的内容，实际上并不能帮助我了解正在发生的事情），因为我想自己了解它是如何工作的。

urllib2 文档确实对我没有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-19T15:23:17.930

我会先说我已经有一段时间没有以这种方式登录了，所以我可能会错过一些更“接受”的方式来做到这一点。

我不确定这是否是您所追求的，但如果没有类似的库`mechanize`或更强大的框架`selenium`，在基本情况下，您只需查看表单本身并查找`inputs`. 例如，查看`www.reddit.com`，然后查看渲染页面的源代码，您会发现以下表单：

```
<form method="post" action="https://ssl.reddit.com/post/login" id="login_login-main"
  class="login-form login-form-side">
    <input type="hidden" name="op" value="login-main" />
    <input name="user" placeholder="username" type="text" maxlength="20" tabindex="1" />
    <input name="passwd" placeholder="password" type="password" tabindex="1" />

    <div class="status"></div>

    <div id="remember-me">
      <input type="checkbox" name="rem" id="rem-login-main" tabindex="1" />
      <label for="rem-login-main">remember me</label>
      <a class="recover-password" href="/password">reset password</a>
    </div>

    <div class="submit">
      <button class="btn" type="submit" tabindex="1">login</button>
    </div>

    <div class="clear"></div>
</form> 
```

在这里，我们看到了一些`input`- `op`、`user`和。另外，请注意参数 - 这是表单将发布到的 URL，因此将成为我们的目标。所以现在最后一步是将参数打包到有效负载中，并将其作为请求发送到URL。同样在下面，我们创建了一个新的，添加了处理 cookie 和添加标头的功能，为我们提供了一个更强大的开启器来执行请求）：`passwd``rem``action``POST``action``opener`

```
import cookielib
import urllib
import urllib2

# Store the cookies and create an opener that will hold them
cj = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))

# Add our headers
opener.addheaders = [('User-agent', 'RedditTesting')]

# Install our opener (note that this changes the global opener to the one
# we just made, but you can also just call opener.open() if you want)
urllib2.install_opener(opener)

# The action/ target from the form
authentication_url = 'https://ssl.reddit.com/post/login'

# Input parameters we are going to send
payload = {
  'op': 'login-main',
  'user': '<username>',
  'passwd': '<password>'
  }

# Use urllib to encode the payload
data = urllib.urlencode(payload)

# Build our Request object (supplying 'data' makes it a POST)
req = urllib2.Request(authentication_url, data)

# Make the request and read the response
resp = urllib2.urlopen(req)
contents = resp.read() 
```

请注意，这可能会变得更加复杂 - 例如，您也可以使用 GMail 执行此操作，但是您需要引入每次都会更改的参数（例如`GALX`参数）。同样，不确定这是否是您想要的，但希望它有所帮助。

# javascript - javascript 倒计时鼠标悬停重置

> ID：13925986
> 
> 赞同：0
> 
> 时间：2012-12-18T03:51:30.500
> 
> 标签：javascript, html, countdowntimer

我试图通过从 1 分钟倒计时到 0 秒来在我的网页上创建超时，然后显示一条消息。如果用户移动鼠标（即在页面上仍处于活动状态），则计时器将重置。我无法获得重置功能来重置我的值。它正在做的是比以前更快地倒计时并陷入牢不可破的循环中。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
        <script type="text/javascript">

            var mins = 1;
            var secs = 0;
            var timer;

            function start()
                {
                    timer = setInterval("update()", 1000);
                }

                function reset() {
                    var mins = 1
                    var secs = 0;
                    var timer;
                    start();
                }

            function update()
                {
                    var timeField = document.getElementById("time");
                    if (secs == 0)
                        {
                            if (mins == 0)
                                {
                                    timeField.innerHTML = "Time's up!";
                                    clearInterval(timer);
                                    alert("Time's up");
                                    return;
                                }

                            mins--;
                            secs = 59;
                        }
                        else 
                            {
                            secs--;
                            }
                        if (secs < 10)
                            {
                            timeField.innerHTML = 'Time left: ' + mins + ':0' + secs;
                        }
                        else
                             {
                             timeField.innerHTML = 'Time left: ' + mins + ':' + secs;
                             }       
                        }
</script>
</head>
<body onload="start();" onmousemove="reset();">
        <div id="time" >
        </div>
</body>
</html> 
```

我怎样才能让它重置倒计时并重新开始？我是javascript新手，所以请耐心等待。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T03:59:23.160

修改你的重置功能，

```
function reset() {
    mins = 1;
    secs = 0;

    window.clearInterval(timer);

    start();
} 
```

在所有函数之外声明计时器。

# jmeter - Jmeter不记录内网站点

> ID：13925988
> 
> 赞同：0
> 
> 时间：2012-12-18T03:51:54.153
> 
> 标签：jmeter, record, intranet

我在 Jmeter 上遇到了麻烦。我是 Jmeter 的新手。我尝试用Jmeter记录我们公司的内网站点，但没有记录。如果我将网站更改为其他网站，它可以工作。谁能建议我要设置什么？

还是Jmeter不支持内网录制？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:32:48.710

当然，只要是标准的 Http，JMeter 就支持内网站点记录。

检查内部站点的浏览器代理配置并为 jmeter 正确配置这些：请参阅命令行选项：

*   [http://jmeter.apache.org/usermanual/get-started.html](http://jmeter.apache.org/usermanual/get-started.html)

# python - 如何编码/解码 jpg 图像以仅使用“urllib.request.Request”上传

> ID：13925989
> 
> 赞同：1
> 
> 时间：2012-12-18T03:52:13.343
> 
> 标签：python, python-3.x, jpeg, image-uploading

我在发布的自定义多部分表单/数据中遇到图像未正确编码的问题。发出 HTTP POST 数据包后，我注意到代表图像的字节完全不同。我通过捕获工作场景的数据包（使用 Web 浏览器）并使用我的 python 应用程序进行了比较。

多部分表单主体的构造方式没有其他问题，只是图像没有为主体正确编码。

这是我打开图像并准备将其发送出去的操作：

```
image_data=(open('plane.jpg',mode='rb').read()) ## image_data is the jpeg in bytes                ------------- fist bytes
body.append(str(image_data))   ## coverting the data to a string such that it can be appended to the body array.  ------ bytes to string
body.append(CRLF)
body.append('--' + boundary + '--')
body.append(CRLF)
body=''.join(body)

## starting the post
unicode_data = body.encode('utf-8',errors='ignore')  ## --------string encoded
multipart_header['content-length']=len(unicode_data)
req = urllib.request.Request('http://localhost/api/image/upload', data=unicode_data, headers=multipart_header) ## Packet sent here and the image section of the unicode_data looks wrong but the other sections look good. 
```

图片上传：[http ://tinypic.com/view.php?pic=5aq3w6&s=6](http://tinypic.com/view.php?pic=5aq3w6&s=6)

那么编码这个图像并将其附加为要发送的正文的一部分的正确方法是什么？除了 python 3.3 附带的 API 之外，我不想使用任何 API。并希望留在 urllib 和 urllib2 中，我尝试将图像的字节版本附加到正文中，但显然字符串数组只能包含字符串，这就是为什么我创建了一个以字节为单位的图像的新字符串；我认为这是它下山的地方。

非常感谢帮助！

# c++ - 我不明白我为这个程序得到的输出。

> ID：13925993
> 
> 赞同：0
> 
> 时间：2012-12-18T03:52:47.673
> 
> 标签：c++, class, inheritance, polymorphism, derived-class

继承程序`class polygon`是基类，我创建了一个派生类调用矩形。在我的多边形基类中，我有一个构造函数和析构`print`函数以及面积和周长的两个函数。在我的派生类中，我有一个构造函数和析构`print`函数，以及面积和周长的两个函数`calc area`和`calc perimeter`函数。我不明白的是我现在运行这个程序时得到的输出。我想要的输出是`area = 45 perimeter = 28`. 我在使用时得到这个输出，`rect_1.calcarea()`但希望它使用`rect_1.printarea()`.

```
#include<iostream>
using namespace std;

class polygon 
{

protected:
    double area;
    double perimeter;
public:
    polygon(){}
    virtual ~polygon(){ }
    virtual double printarea() const { return area ;} 
    virtual double printperimeter() const { return perimeter ;}
};

class rectangle : public polygon
{

public:
    rectangle(double , double ) ;
    ~rectangle(){ }
    double calcarea() ;
    double calcperimeter() ;
    virtual double printarea() const { return area ;} 
    virtual double printperimeter() const { return perimeter ;}

private:
    double length;
    double width;
};

rectangle::rectangle(double l , double w) 
{
    length = l;
    width = w;
}

double rectangle::calcarea() 
{
    area = length*width;
    return area;
}

double rectangle::calcperimeter() 
{
    perimeter = length + width;
    perimeter = perimeter * 2;
    return perimeter;
}

void main ()
{
    rectangle rect_1 (9.0, 5.0);

    cout<<"The Area of Rect_1 is " <<rect_1.printarea() <<endl;
    cout<<"The Perimeter of Rect_1 is " <<rect_1.printperimeter() <<endl;

    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T04:04:17.477

`printarea()`只是返回成员变量的值`area`。您a）没有将其初始化为任何东西，并且b）没有计算任何地方的面积。

我会冒险猜测您的输出是零还是垃圾 - 取决于编译器选项 - 因为 area 没有初始化（即给定一个值）。

如果您`calcarea()`在矩形的构造函数内部调用，或者在实例化它的实例后在 main 中调用，那么`printarea()`将产生正确的值。您甚至可以`calcarea()`在内部调用`printarea()`以确保该值在需要时始终是最新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T05:03:20.130

试试下面的解决方案。这将解决您的问题。

这是我所做的更改：
我已将 Polygon 作为抽象类，因为您只想调用`printarea`或`printperimeter`of `Polygon`。此外，我分别调用了`calcarea`和`calcperimeter`。`printarea`尽管在 of / `printperimeter`of的主体中也可以这样做`Rectangle`。无需调用`calcarea`and `calcperimeter`。

```
#include<iostream>

using namespace std;

class polygon 
{

protected:
    double area;
    double perimeter;
public:
    polygon(){}
    virtual ~polygon(){ }
    virtual double printarea() = 0; 
    virtual double printperimeter() = 0;
};

class rectangle : public polygon
{

public:
    rectangle(double , double ) ;
    ~rectangle(){ }
    double calcarea() ;
    double calcperimeter() ;
    double printarea()  { return calcarea();} 
    double printperimeter() { return calcperimeter() ;}

private:
    double length;
    double width;
};

rectangle::rectangle(double l , double w) 
{
    length = l;
    width = w;
}

double rectangle::calcarea() 
{
    area = length*width;
    return area;
}

double rectangle::calcperimeter() 
{
    perimeter = length + width;
    perimeter = perimeter * 2;
    return perimeter;
}

void main ()
{
    rectangle rect_1 (9.0, 5.0);

    cout<<"The Area of Rect_1 is " <<rect_1.printarea() <<endl;
    cout<<"The Perimeter of Rect_1 is " <<rect_1.printperimeter() <<endl;

    system("pause");
} 
```

# cocoa - 带有标题和关闭按钮的 NSPanel HUD

> ID：13925994
> 
> 赞同：4
> 
> 时间：2012-12-18T03:52:55.220
> 
> 标签：cocoa

我在尝试创建类似于 VLC 均衡器中使用的 HUD 样式的 NSPanel 时遇到了困难（[图片在这里](http://fairerplatform.com/wp-content/uploads/2012/02/vlc-media-player-2-dune.jpg)）。首先，我想要一个带有关闭按钮和标题的透视面板。这是我试图用来实现的代码

```
- (IBAction)buttonTapped:(id)sender {
    NSPanel *panel = [[NSPanel alloc] initWithContentRect:NSMakeRect(200.0, 200.0, 300, 200)
                                                styleMask:NSHUDWindowMask | NSClosableWindowMask | NSTitledWindowMask
                                                  backing:NSBackingStoreBuffered
                                                    defer:YES];

    [panel makeKeyAndOrderFront:nil];
} 
```

`NSHUDWindowMask`参数显然有效，我得到一个灰色的透明面板。但是，`NSClosableWindowMask`参数似乎什么都不做（没有关闭按钮）并且`NSTitledWindowMask`会产生以下运行时错误：

> 平视显示窗口不支持窗口样式掩码 0x2003

据我从[文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/nspanel_Class/Reference/Reference.html#//apple_ref/doc/uid/20000244-DontLinkElementID_3)中可以看出，应该允许这种掩码组合。我在 OS X 10.7 和 10.8 sdks 上都试过了。有谁知道如何实现这种风格的窗口以及关闭/标题按钮？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T04:22:39.960

您发布的该文档链接似乎表明您也需要包含`NSUtilityWindowMask`在掩码中。

# tiff - 转换 16 位图像的选项

> ID：13925995
> 
> 赞同：0
> 
> 时间：2012-12-18T03:53:03.167
> 
> 标签：tiff, 16-bit, imagej, 8-bit

当我打开 tiff 格式的 16 位图像时，它打开为黑色图像。16 位 tiff 图像仅在程序 ImageJ 中打开；但是，它不会在预览中打开。我想知道我现在的选择是什么，以一种不降低分辨率的更简单的方式查看格式，而不是打开 ImageJ 来查看它。我应该将其转换为 8 位格式，但是当格式从 16 位减少到 8 位时，我不会丢失数据吗？另外，我正在考虑将 tiff 图像转换为 jpeg，但这会导致分辨率降低吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T00:22:17.250

从[ImageJ wiki 的故障排除页面](https://imagej.net/Troubleshooting#The_image_I_loaded_is_displayed_all_black.21_But_it_is_not_black.21)：

> 当 12 位、14 位或 16 位图像在没有自动缩放的情况下加载到 ImageJ 中时，可能会出现此问题。在这种情况下，显示将缩放到完整的 16 位范围（0 - 65535 强度值），即使实际数据值通常跨越更小的范围。例如，在 12 位相机上，最大可能的强度值是 4095，但 0 映射到黑色，65535 映射到白色，4095 最终（线性）映射到非常深的灰色，人眼几乎看不见.
> 
> 您可以通过单击图像 ▶ 调整 ▶ 亮度/对比度... 并点击自动按钮来解决此问题。
> 
> 您可以通过将鼠标移到图像上并查看 ImageJ 主窗口状态栏区域中的像素探针输出来验证是否存在实际数据。

换句话说，您的图像不太可能实际上都是 0 值，而是显示范围可能未设置为与数据范围对齐。如果您的图像的强度值范围从 67 到 520，但存储为 16 位图像（潜在值范围从 0 到 65535），则默认显示范围也是 0=黑色，65535=白色，以及介于两者之间的值线性缩放。所以所有这些值（57 到 520）都将显示为黑色。当您自动缩放时，它会重置显示范围以匹配数据范围，使值 67 及以下显示为黑色，值 520 及以上显示为白色，并且两者之间的所有内容都线性缩放。

如果您使用[Bio-Formats](https://imagej.net/Bio-Formats)插件将图像导入 ImageJ，您可以选中“自动缩放”选项以确保此动态显示范围缩放自动发生。

至于是否转成JPEG：JPEG是一种有损压缩格式，有其自身的问题。如果您要进行任何定量分析，我强烈建议您不要转换为 JPEG。有关更多详细信息，请参阅[斐济 wiki 关于 JPEG 的文章。](https://imagej.net/IP_Principles#Why_.28lossy.29_JPEGs_should_not_be_used_in_imaging)

同样，如果您只想在另一个应用程序中进行可视化，转换为 8 位也可以，但对下转换图像进行定量分析通常是错误的。请注意，当 ImageJ 将 16 位图像转换为 8 位时（使用“图像”>“类型”菜单），它会“烧入”您当前在“亮度/对比度”对话框中设置的任何显示范围映射，从而将*明显*的像素值转换为*实际*的 8 位像素值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:49:09.247

从 16 位图像更改为 8 位图像可能会降低对比度，但不一定会降低分辨率。分辨率的降低将来自于改变像素的数量。要将 16 位转换为 8 位，像素数将相同，但位深会发生变化。

16 位无符号灰度图像中`2^16-1` 的最大像素值为 8 位无符号灰度图像中的最大像素值为`2^8-1`

分辨率会受到影响的一种情况是，如果您有一个 16 位图像，其中包含一堆像素值的像素`x`，另一组具有像素值的像素，`x + 1`并转换为 8 位图像，然后将像素映射到相同的值“y”您将无法解析这两组像素。

如果您查看最大和最小像素值，您很可能能够在不丢失任何数据的情况下转换为 8 位图像。

如果 8 位图像中的信息减少，您可以执行转换并使用各种指标进行检查。一个这样的度量标准是熵。如果您没有丢失任何数据，则此数量应该相同。请注意，反过来不一定正确，即仅仅因为熵相同并不意味着数据相同。

如果您想要更多关于如何验证转换并查看是否丢失任何数据的建议，请告诉我。

# objective-c - 一个视图中的 2 个 UI 选择器视图干扰了每个 UI 选择器的文本视图

> ID：13925997
> 
> 赞同：0
> 
> 时间：2012-12-18T03:53:11.723
> 
> 标签：objective-c, ios, uitextfield, uipickerview, uipicker

我正在构建一个带有两个 UI 文本字段的应用程序。当触摸 UI 文本字段时，会出现一个 UI 选择器，供用户选择一个值以保留在 UI 文本字段中。当我测试应用程序并触摸一个 UI TextView 并滚动 UI Picker 时，两个 UI 文本字段都会更改值。这意味着，每个 UI 文本字段都受到每个 UI 选择器的影响。有谁知道为什么？谢谢你。

```
@interface ViewController () <UIPickerViewDataSource, UIPickerViewDelegate>

@end

@implementation ViewController
@synthesize ageTextField;
@synthesize relationshipTextField;
@synthesize resultLabel;
@synthesize calculateButton;
@synthesize agePickerView;
@synthesize relationshipPickerView;
@synthesize ageArray;
@synthesize relationshipArray;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    //age pickerView

    self.agePickerView = [[UIPickerView alloc]init];

    self.agePickerView.delegate = self;
    self.agePickerView.dataSource = self;
    self.agePickerView.showsSelectionIndicator = YES;
    self.ageTextField.inputView = self.agePickerView;

    self.ageArray = @[ @"1", @"2", @"3", @"4", @"5", @"5", @"6", @"7", @"8", @"9", @"10",       @"11", @"12"
 , @"13", @"14", @"15", @"16", @"17", @"18", @"19", @"20", @"21", @"22", @"23", @"24",     @"25", @"26", @"27", @"28", @"29", @"30", @"31", @"32", @"33", @"34", @"35", @"36", @"37", @"38", @"39", @"40", @"41", @"42", @"43", @"44", @"45", @"46", @"47", @"48", @"49", @"50", @"51", @"52", @"53", @"54", @"55", @"56", @"57", @"58", @"59", @"60", @"61", @"62", @"63", @"64", @"65", @"66", @"67", @"68", @"69", @"70", @"71", @"72", @"73", @"74", @"75", @"76", @"77", @"78", @"79", @"80", @"81", @"82", @"83", @"84", @"85", @"86", @"87", @"88", @"89", @"90", @"91", @"92", @"93", @"94", @"95", @"96", @"97", @"98", @"99", @"100" ];
[self pickerView:self.agePickerView
didSelectRow:0
inComponent:0];

//relationship pickerView

self.relationshipPickerView = [[UIPickerView alloc]init];

self.relationshipPickerView.delegate = self;
self.relationshipPickerView.dataSource = self;
self.relationshipPickerView.showsSelectionIndicator = YES;
self.relationshipTextField.inputView = self.relationshipPickerView;

self.relationshipArray = @[ @"1", @"2",@"3",@"4",@"5",@"6",@"7",@"8",@"9",@"10",@"11",@"12",@"13", @"14",@"15",@"16",@"17",@"18",@"19",@"20",@"21",@"22",@"23",@"24",@"25", @"26",@"27",@"28",@"29",@"30",@"31",@"32",@"33",@"34",@"35",@"36",@"37", @"38",@"39",@"40",@"41",@"42",@"43",@"44",@"45",@"46",@"47",@"48",@"49",@"50", @"51", @"52", @"53", @"54", @"55", @"56", @"57", @"58", @"59", @"60", @"61", @"62", @"63", @"64", @"65", @"66", @"67", @"68", @"69", @"70", @"71", @"72", @"73", @"74", @"75", @"76", @"77", @"78", @"79", @"80", @"81", @"82", @"83", @"84", @"85", @"86", @"87", @"88", @"89", @"90", @"91", @"92", @"93", @"94", @"95", @"96", @"97", @"98", @"99", @"100"];

[self pickerView:self.relationshipPickerView
    didSelectRow:0
     inComponent:0];

}

-(int) numberOfComponentsInPickerView:(UIPickerView *)pickerView{
return 1;
}

-(int) pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component   {
    return [self.ageArray count];
    return [self.relationshipArray count];
}

-(NSString *) pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row  forComponent:(NSInteger)component{
    return [self.ageArray objectAtIndex:row];
    return [self.relationshipArray objectAtIndex:row];
}

-(void) pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:   (NSInteger)component{
    self.ageTextField.text = [self.ageArray objectAtIndex:row];
    self.relationshipTextField.text = [self.relationshipArray objectAtIndex:row];
}

- (void)viewDidUnload
{
    [self setAgeTextField:nil];
    [self setRelationshipTextField:nil];
    [self setResultLabel:nil];
    [self setCalculateButton:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation: (UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

 @end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T03:55:57.233

```
-(int) pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component   {
    return [self.ageArray count];
    return [self.relationshipArray count];
} 
```

这不是 C（或 Objective-C）的工作方式。它*总是*只执行第一行。

您需要根据请求信息对返回值*进行条件化：* `UIPickerView`

```
if (pickerView == self.agePickerView) {
  return [self.ageArray count];
} else {
  return [self.relationshipArray count];
} 
```

然后将相同的模式应用于所有数据源方法。

# javascript - 在 IE 10 浏览器中未定义链接按钮的错误 __dopostback

> ID：13925998
> 
> 赞同：1
> 
> 时间：2012-12-18T03:53:21.723
> 
> 标签：javascript, asp.net

在 ASP.net 3.5 应用程序中，我正在使用调用服务器事件的链接按钮。链接按钮在*IE 9*或*FF*中都可以正常工作，但在*IE 10*中它会引发错误。

```
"__dopostback is undefined" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T03:59:32.833

我得到了一些解决方案：我忘了提到我也在使用 ScriptManager，所以我禁用了 EnablePartialRendering="false"

和

[http://social.msdn.microsoft.com/Forums/da-DK/iewebdevelopment/thread/16fa6eb9-255c-4d92-a183-06d8ed2fc8f6](http://social.msdn.microsoft.com/Forums/da-DK/iewebdevelopment/thread/16fa6eb9-255c-4d92-a183-06d8ed2fc8f6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-25T09:58:55.920

下载 Hotfix 这是微软的补丁，它会根据我的经验解决这个问题。

```
.NET 4 - [http://support.microsoft.com/kb/2600088][1]
.NET 2.0
   [2][2] for Win7 SP1/Windows Server 2008 R2 SP1, Windows Vista/Server 2008, Windows XP/Server 2003
    [3][3] for Win7/Windows Server 2008 R2 RTM 
```

# ruby - Windows下无法连接Datamapper和PostgreSQL

> ID：13925999
> 
> 赞同：1
> 
> 时间：2012-12-18T03:53:23.863
> 
> 标签：ruby, gem, datamapper

我只是想建立联系，但我不断收到一些错误

这是我的代码：

```
require 'data_mapper'  

# A Postgres connection:
DataMapper.setup(:default, 'postgres://postgres:mypassword@localhost:5432/pruebas') 
```

这些是错误：

```
C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require':
126: No se puede encontrar el módulo especificado.   - C:/Ruby193/lib/ruby/gems/
1.9.1/gems/do_postgres-0.10.10-x86-mingw32/lib/do_postgres/1.9/do_postgres.so (L
oadError)
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:i
n `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/do_postgres-0.10.10-x86-mingw32
/lib/do_postgres.rb:30:in `rescue in <top (required)>'
            from C:/Ruby193/lib/ruby/gems/1.9.1/gems/do_postgres-0.10.10-x86-mingw32
            /lib/do_postgres.rb:25:in `<top (required)>'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:i
n `require'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:i
n `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-postgres-adapter-1.2.0/lib/d
m-postgres-adapter/adapter.rb:1:in `<top (required)>'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:i
n `require'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:i
n `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-postgres-adapter-1.2.0/lib/d
m-postgres-adapter.rb:1:in `<top (required)>'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:i
n `require'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:i
n `rescue in require'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:i
n `require'
            from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/adapt
ers.rb:163:in `load_adapter'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/adapt
ers.rb:133:in `adapter_class'
            from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/adapt
ers.rb:13:in `new'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core.rb:23
0:in `setup'
        from pruebadb.rb:4:in `<main>' 
```

翻译`No se puede encontrar el módulo especificado.`：`Cannot find the specified module.`

我用谷歌搜索了很多没有答案。