# StackOverflow 问答 13242000-13242999

# c# - 创建一个旋转图片框内的图像的“swing-o-meter”

> ID：13242000
> 
> 赞同：1
> 
> 时间：2012-11-05T23:20:01.800
> 
> 标签：c#, image, rotation, picturebox

*所以我决定开始学习更多的代码，并且由于我认为*我不知道足够的基础知识而陷入了困境。如果这有什么不同的话，我之前在 C 和 C++ 中做过一些工作。

我决定要根据输入制作以某个角度定向的指针。我让箭头旋转的一切正常。到目前为止，我在图片框中有一个箭头 bmp 图像，下面的代码在我构建之前不会显示任何错误。我不完全确定其他人可能需要知道什么才能提供帮助，所以现在我将发布我的代码。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void label1_Click(object sender, EventArgs e)
    {

    }
    private Bitmap MoveImageByDesiredAngle(int original_width, int original_height, float desiredAngle)
    {
        Bitmap resultPicture = new Bitmap(original_width, original_height);
        Graphics g = Graphics.FromImage(resultPicture);
        g.TranslateTransform((float)original_width / 2, (float)original_height / 2);
        g.RotateTransform(desiredAngle);
        g.TranslateTransform(-(float)original_width / 2, -(float)original_height / 2);
        g.DrawImage(pictureBox1.Image, new Point(0, 0));
        return resultPicture;
    }
    private void button1_Click(object sender, EventArgs e)
    {
        float o;
        float r;

        o = float.Parse(textBox1.Text);
        r = float.Parse(textBox2.Text);

        float ratio;
        float angle;
        ratio = o / (o + r);
        angle = ratio * 180;

        Bitmap resultPicture = MoveImageByDesiredAngle(pictureBox3.Image.Width, pictureBox3.Image.Height, angle);
        pictureBox3.Image = resultPicture;
    }

}
} 
```

# sql - SQL 逻辑问题

> ID：13242001
> 
> 赞同：0
> 
> 时间：2012-11-05T23:20:08.850
> 
> 标签：sql, logic

我很喜欢泡菜！我正在检查一个表格，其中包含与患者疫苗相关的信息。对于每位患者，有 3 种可能的疫苗存储在四行中。这些疫苗具有相关的是/否值，用于描述疫苗是否有效。这些疫苗行中的每一个都有一个“静态”de_name 列，其中包含可能被管理的疫苗的名称。如果疫苗的值为“是”，则还有一个相关的行包含接种疫苗的日期值。幸运的是，包含日期的第二行还包含该字段的名称，可用于推断接种了哪种疫苗。由于该表的行性质，除了将每种可能性转化为它之外，没有明显的方法（对我而言）来搜索每个患者 s 自己的列并合并结果。这使我能够为接种的疫苗和接种疫苗的日期创建两个漂亮的列。这很有效，因为我不需要引用与是/否值相关的行，因为疫苗的名称和存在日期的事实允许我只使用日期字段本身。

在我被要求添加第四种疫苗之前，一切都很好而且很花哨，它不是持有是/否值，而是包含自由文本。我被要求将自由文本与其他疫苗的“静态”文本放在同一列中。这是一个问题，因为与其他疫苗不同，第四个疫苗日期行中没有显示非日期行疫苗自由文本条目的列。我必须引用第四行的自由文本，同时还要引用第四行的相关疫苗日期行的日期值。问题出现在何时，我不知道如何在合并语句中的 Case 语句中加入行（通过永久访问号码）！任何帮助都会很棒！

如果您需要我提供任何其他数据，请告诉我。我担心地包括了一些虚拟数据以及我的查询当前将显示的内容。

Data_Points 表：

```
 De_Num       De_Name                        De_Value     Perm_Visit_Num    PatientID

 6224       Flu vaccine                        yes             10111           12
 6225    Flu vaccine date administered       11/00/2012        10111           12
 6226     Pneumonia vaccine                    yes             10112           12
 6227  Pneumonia vaccine date administered   11/01/2012        10112           12
 6228      Tetanus vaccine                     yes             10113           12
 6229   Tetanus vaccine date administered    11/02/2012        10113           12
 6230      Other vaccine                 arbitrary free-text   10114           12
 6231  Other vaccine date administered       11/03/2012        10114           12
 6224       Flu vaccine                        yes             10115           10
 6225    Flu vaccine date administered       11/00/2012        10115           10
 6226     Pneumonia vaccine                    yes             10116           10
 6227  Pneumonia vaccine date administered   11/01/2012        10116           10
 6228      Tetanus vaccine                     yes             10117           10
 6229   Tetanus vaccine date administered    11/02/2012        10117           10
 6230      Other vaccine              more arbitrary free-text 10118           10
 6231  Other vaccine date administered       11/03/2012        10118           10 
```

我的查询

```
select * 
from
(select
        COALESCE(
            CASE
                WHEN de_num = '6225' THEN DE_Name
            END,
            CASE
                WHEN de_num = '6227' THEN DE_Name
            END,
            CASE
                WHEN de_num = '6229' and perm_visit_num in (select perm_visit_num from data_points where de_num = '6228' and de_value = 'Yes') THEN de_name
            END,
            CASE
                WHEN de_num = '6230' THEN DE_Value
            END
        ) VaccineAdministered,
        COALESCE(
            CASE
                WHEN de_num = '6225' THEN CASE DE_Value WHEN null THEN null ELSE DE_Value END
            END,
            CASE
                WHEN de_num = '6227' THEN CASE DE_Value WHEN null THEN null ELSE DE_Value END
            END,
            CASE
                WHEN de_num = '6229' and perm_visit_num in (select perm_visit_num from data_points where de_num = '6228' and de_value = 'Yes') THEN CASE DE_Value WHEN null THEN null ELSE DE_Value END
            END,
            CASE
                WHEN de_num = '6230' THEN 'foo'
            END
        )
from data_points
WHERE DE_Num in ('6227','6225','6229','6230')
)
where vaccineadministered != '' 
```

具有该虚拟数据的结果集和上面的当前 sql 查询：

```
Vaccine Administered                   DateAdministered

Flu vaccine date administered             11/00/2012
Pneumonia vaccine date administered       11/01/2012
Tetanus vaccine date administered         11/02/2012
arbitrary free-text                          foo
Flu vaccine date administered             11/00/2012
Pneumonia vaccine date administered       11/01/2012
Tetanus vaccine date administered         11/02/2012
more arbitrary free-text                     foo 
```

我的问题是我无法找到同时提取自由文本和相关日期的方法。我可以得到或，在这个查询中我得到自由文本。

请理解这是一件很难解释的事情，我真的需要帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T23:38:26.460

经过进一步思考，这就是您所需要的。我最初认为 de_num 是主键，但我认为它是某种条目类型。那么这不是一个糟糕的结构：

```
Select
  v.vaccine As "Vaccine Administered",
  d.de_value As DateAdministered
From (
  Select
    Perm_Visit_Num,
    Case When de_num = 6230 Then de_value else de_name end As vaccine
  From
    data_points
  Where
    de_num in (6224, 6226, 6228, 6230) -- change this to (6225, 6227, 6229, 6230) to display the exact results you had in mind
  ) v
  Inner Join (
  Select
    Perm_Visit_Num,
    de_value
  From
    data_points
  Where
    de_num in (6225, 6227, 6229, 6231)
  ) d
    On v.Perm_Visit_Num = d.Perm_Visit_Num 
```

这将加入疫苗记录以及所有情况下的给药日期记录。如果要显示其他值，可以在第一部分中使用 de_nums。

这假设每个 perm_visit_num 只有两个条目。如果您可以在一次访问中获得两种“其他疫苗”，那么这种结构根本无法应对。

[http://sqlfiddle.com/#!3/4a8dd/16/0](http://sqlfiddle.com/#!3/4a8dd/16/0)

# c++ - MicroBlaze 上 C++ 的线程安全

> ID：13242002
> 
> 赞同：4
> 
> 时间：2012-11-05T23:20:12.630
> 
> 标签：c++, stl, malloc, microblaze

有没有人为 MicroBlaze 编写过多线程 C++ 应用程序？Xilinx 文档指出：

> EDK 提供的标准 C 库不是为多线程环境构建的。STDIO 函数如 printf()、scanf() 和内存管理函数如 malloc() 和 free() 是非线程安全函数的常见示例。在多线程环境中使用 C 库时，必须使用适当的互斥技术来保护线程不安全函数。

此外，MicroBlaze GCC 报告线程模型是“单一的”。

如果我使用 C++ 标准库容器，这肯定是不安全的，对吗？

我什至可以从赛灵思得到这个简单问题的答案，更不用说解决它的方法了。这似乎是 Xilinx 提供的构建系统的一个主要缺陷。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T19:26:38.787

Xilinx 的答案（通过电子邮件）如下。它没有提到多线程。它还引用了他们在 2006 年（6 年前！！！）发布的软件工具 8.2i。简而言之，这没有任何意义。

得到教训：

*   赛灵思的支持很糟糕。
*   Xilinx 软件工具是他们事后才想到的。
*   我只能假设文档中概述的内容是正确的，特别是您不能在多线程环境中使用动态内存分配。这意味着没有 c++ 标准库容器。
*   如果您是即将选择 MicroBlaze 软核处理器的硬件人员，请在执行此操作之前与固件人员核实。他希望写什么样的应用程序？确保他知道他不能用 C++ 编写多线程应用程序。

> **malloc()**
> 
> Microblaze C 库附带了一个小的、最小的功能 malloc()。使用时，内存无法释放。不支持其他函数，例如 calloc、realloc 等。同时使用 malloc() 和例程（如 printf、scanf 等）时也存在错误。为了解决此问题，已删除最小功能 malloc()。它已被原始 Newlib malloc() 取代。因此，您应该不会看到任何功能问题。您可能会看到代码大小增加了大约 4K。由于新的完整功能 malloc() 请求内存的差异，用户程序可能需要检查其堆大小设置。如果你看到你的 malloc() 调用返回 NULL，它们曾经在哪里工作，请尝试增加你的堆大小。此更改对于修复损坏的功能至关重要。
> 
> 对于您仍然需要原始轻量级但损坏的 malloc() 功能的极少数情况，可以将源代码 (malloc.S) 作为要编译的源文件之一包含在内以构建您的应用程序。这将保留 EDK 8.2i 之前的旧功能、代码大小要求和动态内存要求。
> 
> **xil_malloc()**
> 
> MicroBlaze C 库附带了另一种动态内存分配实现，称为 xil_malloc()。这个程序有一些限制；它不会从堆中分配内存，而是从固定的 64K 缓冲区中分配内存。此例程现已弃用。尽管此例程仍可用于链接，但强烈建议不要使用它。请使用 malloc(); 它比 xil_malloc() 小，并提供更好的功能。使用 malloc() 时，请务必检查您的堆大小设置以满足您的动态内存要求。
> 
> 独立 BSP 包含一个参数“need_xil_malloc”。此参数旨在允许您编写包含 malloc() 的代码，但将其连接到 xil_malloc() 实现。由于参数实现中的错误以及 xil_malloc() 的弃用，该参数也被弃用。
> 
> Xilkernel 包含一个参数“use_xil_malloc”。此参数旨在允许内核消息队列实现使用 xil_malloc() 而不是 malloc()。由于 xil_malloc() 的弃用，该参数也被弃用。
> 
> 如果您出于遗留原因仍需要 xil_malloc() 源代码，可以下载和使用“xil_malloc.c”和“xil_sbrk.c”文件。
> 
> **C++ 应用程序**
> 
> Prior to EDK 8.2i C++ applications might exhibit unusual behavior, memory corruption, etc. To fix these issues, include the attached source file (newlib_malloc.c) as part of your application compilation. This will fix the unexplained crashes. This work-around fixes bugs in the malloc() implementation in the MicroBlaze C library. This work-around has been incorporated into the C library starting in EDK 8.2i.

This information also appears to be available at: [http://www.xilinx.com/support/answers/23345.html](http://www.xilinx.com/support/answers/23345.html)

# sql - 如何在 SQL 中将不同的值显示为不同的列？

> ID：13242004
> 
> 赞同：0
> 
> 时间：2012-11-05T23:20:14.733
> 
> 标签：sql, sql-server

我有一个带有列的表`UserID, SiteID, SiteViews`和另一个带有`UserID, First, Last`

我需要将数据显示为`First + Last, Site1Views, Site2Views`

只有 2 个站点 ID，我需要每个用户的 SiteViews 的总和。

目前我有：

```
select s.UserFirstName + ' ' + s.UserLastName as 'Name', 
j1.SiteViews as 'Site1Name',
j2.SiteViews as 'Site2Name' 
from (Users s INNER JOIN Usage j on s.UserID = j.UserID) 
```

我不知道该怎么做。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:23:03.263

听起来您可能想为此使用 PIVOT？我无法测试它，但这应该让你进入正确的方向？

```
select s.UserFirstName + ' ' + s.UserLastName as Name, 
       [Site1Name],
       [Site2Name]
FROM
       (SELECT s.UserFirstName + ' ' + s.UserLastName,
               SiteName,
               SiteVisits
        from Users s 
        INNER JOIN Usage j1 
          on s.UserID = j1.UserID
       )
PIVOT (SUM(SiteVisits) FOR SiteName IN ([Site1Name],[Site2Name])) as p 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T23:27:35.837

我是怎么理解的

```
select s.UserFirstName + ' ' + s.UserLastName as Name 
,(Select COUNT(*) from SiteViews s1 where s.UserID = s1.UserID /*other condition*/) as SiteView1
,(Select COUNT(*) from SiteViews s2 where s.UserID = s2.UserID /*other condition*/) as SiteView2 
from Users s 
```

# jquery - 在可拖动事件中使用 jquery 小部件变量

> ID：13242009
> 
> 赞同：1
> 
> 时间：2012-11-05T23:20:49.807
> 
> 标签：jquery, events, draggable

我想构建一个可以拖动到特定宽度的水平滚动条。宽度由小部件选项设置。然而，我意识到我不知道如何在可拖动事件中使用我在 _created-function 中声明的变量。

这是（现在工作的）代码：

```
$.widget( "my.scroller", {
    options: {
        rangemin: 0,
        rangemax: 1000
    },

    _create: function() {
        var scrollerrange = (this.options.rangemax - this.options.rangemin)

        this.element.draggable({
            axis: "x",

            drag: function(event, ui){
                var this.left = ui.position.left;

                // here I want to replace 700 with 'var scrollerrange'
                // and it works
                if(this.left > 0) this.left = 0;
                if(this.left < -scrollerrange) this.left = -scrollerrange;

                ui.position.left = this.left;
            },

        })
    },
}); 
```

这是我第一次尝试 jquery 小部件，我想知道这是否是正确的方法。我尝试了几件事，但没有任何效果。我还尝试从可拖动的小部件扩展我的小部件，但最终我走到了同样的死胡同。

**编辑：**它实际上只是代码中的一个错字，现在它可以工作了......

# javascript - svg/d3 中轴转换的语法

> ID：13242017
> 
> 赞同：15
> 
> 时间：2012-11-05T23:21:37.803
> 
> 标签：javascript, svg, d3.js

我有一个非常基本的语法问题。我一直在学习 d3、SVG 和 Javascript，主要是通过编辑别人的代码，这很有挑战性。

目标是在更新数据后更新y轴和基于数据的尺度。我希望轴（刻度和标签以及所有）与数据域一起转换。轴没有更新。问题可能与范围有关，或者我引用了错误的 SVG 元素。（实际上有几个情节同时更新，但我在这里只关注其中一个的轴。）

```
 function makeYaxis (chart, scale, nticks, label, width, height, xmf, visName)
{
    var yAxis = d3.svg.axis()
    .scale(scale)
    .orient("left")
    .ticks(nticks);
    chart.append("svg:g")
    .attr("class","y axis")
    .append("g")
    .attr("transform","translate(60,1)") // fix magic #
    .call(yAxis);
    var xMove = xmf.yylMarginFactor * width - 1;
    var yMove = (((1 - xmf.xxbMarginFactor) * height + 
          xmf.xxtMarginFactor * height) / 2);
    chart.append("svg:text")
    .attr("class", visName + "xLabel")
    .attr("x", 0)
    .attr("y", 0)
    .attr("dy", "-2.8em")
    .text(label)
    .attr("transform", "rotate(-90) translate(-" + yMove + "," + xMove + ")");
}
function makeYscale (plotMargin, thedata, xmf)
{
    var dataMin = d3.min(thedata[0]);
    var dataMax = d3.max(thedata[0]);
    var yyMargin = d3.max([plotMargin * (dataMax - dataMin),0.05]);
    var yy = d3.scale.linear()
    .domain([dataMin - yyMargin, yyMargin + dataMax])
    .range([(1 - xmf.xxbMarginFactor) * height, xmf.xxtMarginFactor * height]);
    return yy;
}
// Set up this visualization
var chart = d3.select("#vis1")
  .append("svg:svg")
  .attr("class", "vis1chart")
  .attr("width", width)
  .attr("height", height);

var yy = makeYscale(plotMargin, thetas, xmf);

makeYaxis(chart, yy, nYTicks, "parameter", width, height, xmf, "vis1");
var points = chart.selectAll("circle.vis1points")
    .data(thetas)
    .enter().append("svg:circle")
    .attr("class", "vis1points")
    .attr("cx", function (d, i) { return xx(i); })
    .attr("cy", function (d, i) { return yy(d); })
    .attr("r", 3);
points.transition()
    .attr("cx", function (d, i) { return xx(i); })
    .attr("cy", yy)
    .duration(dur);
vis1move();
function vis1move ()
{
    function movePoints ()
    { 
    var tmp = chart.selectAll(".vis1points").data(thetas[0], function (d, i) { return i; } );
    var opa1 = points.style("stroke-opacity");
    var opa2 = points.style("fill-opacity");
    tmp
        .enter().insert("svg:circle")
        .attr("class", "vis1points")
        .attr("cx", function (d, i) { return xx(i); })
        .attr("cy", yy)
        .attr("r", 3)
        .style("stroke-opacity", opa1)
        .style("fill-opacity", opa2);
    tmp.transition()
        .duration(10)
        .attr("cx", function (d, i) { return xx(i); })
    tmp.exit()
        .transition().duration(10).attr("r",0).remove();
    };
    // (Code for updating theta, the data, goes here)
    // Update axes for this vis
    yy = makeYscale(plotMargin, thetas, xmf);
    var transition = chart.transition().duration(10);
    var yAxis = d3.svg.axis()
        .scale(yy)
        .orient("left")
        .ticks(4);
    transition.select("y axis").call(yAxis);
    movePoints(); // Previously had been before axis update (fixed)
} 
```

对不起，我无法自给自足。

是否`transition.select.("y axis").call(yAxis)`正确？这里有什么明显的地方吗？

* * *

*编辑：*为了简单起见，我现在有

```
 // Update axes for this vis
    yy = makeYscale(plotMargin, thetas, xmf);
    var yAxis = d3.svg.axis().scale(yy);
    chart.select("y axis").transition().duration(10).call(yAxis); 
```

我想知道我最初创建轴的方式（在 中`makeYaxis()`）是否会阻止我正确选择它。该`yy`函数在后台返回正确的值，并且数据点被正确绘制和重新缩放。只是轴“卡住了”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T15:39:28.910

按照 meetamit 的建议和[此处](https://stackoverflow.com/questions/11126207/zooming-bar-graph-with-d3-js)的示例，我偶然发现了一个似乎是解决方案的方法。

首先，在 function 中`makeYaxis()`，我删除了 line `.append("g")`。我还将类名更新为`yaxis`. 该函数现在读取

```
function makeYaxis (chart, scale, nticks, label, width, height, xmf, visName)
{
    var yAxis = d3.svg.axis()
    .scale(scale)
    .orient("left")
    .ticks(nticks);
    chart.append("svg:g")
    .attr("class","yaxis") // note new class name
//  .append("g")
    .attr("transform","translate(60,1)") 
    .call(yAxis);
    // everything else as before
}
```

然后我在我的电话中添加了一个额外的时间段`select(".yaxis")`：

```
chart.select(".yaxis").transition().duration(10).call(yAxis); 
```

**如果有人能向我解释为什么这个解决方案似乎有效，我将不胜感激。**

# r - Windows 7：通过脚本安装多个 R 包

> ID：13242024
> 
> 赞同：4
> 
> 时间：2012-11-05T23:22:20.140
> 
> 标签：r

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T00:22:51.367

The odesolve package is depreciated and has been replaced by deSolve. R 2.15.1 is throwing an error when encountering this package. It could be causing problems for you. Here's a script I use for installing packages for new R installs.

```
libs=c("CircStats","coda","deldir","gplots","igraph","ks","odesolve‌​","RandomFields")
type=getOption("pkgType")                           
    CheckInstallPackage <- function(packages, repos="http://cran.r-project.org",
       depend=c("Depends", "Imports", "LinkingTo", "Suggests", "Enhances"), ...) {
         installed=as.data.frame(installed.packages())
    for(p in packages) {
        if(is.na(charmatch(p, installed[,1]))) { 
          install.packages(p, repos=repos, dependencies=depend, ...) 
                    }
      }
    } 
    CheckInstallPackage(packages=libs) 
```

# c# - 只录制一个窗口的视频

> ID：13242028
> 
> 赞同：5
> 
> 时间：2012-11-05T23:22:52.513
> 
> 标签：c#, screen-capture

我需要将我的屏幕捕获为视频，为此我使用了 Expression Encoder 4，但在我的应用程序中，我还需要捕获一个窗口，但我找不到这样做的方法，使用 EE4 我尝试动态更改`CaptureRectangle`我的[ScreenCaptureJob](http://msdn.microsoft.com/en-us/library/ff726642%28v=expression.40%29.aspx)，但这似乎是不可能的。所以我的问题是，您是否知道最好使用 C# 或 C++ 来执行此“单窗口捕获”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T04:42:59.460

您*可以*获取您感兴趣的窗口的窗口句柄，设置一个计时器，并在每个计时器滴答声中捕获该窗口的内容。这样做并非易事，但肯定是可能的。多年前我在 C 中做过，但该代码早已不复存在。

如果您只想捕获屏幕的矩形区域，问题会更简单。您可以获取窗口句柄，查询其大小和位置，然后从屏幕上复制该区域。在 C 或 C++ 中，您将获得桌面 DC 并从中复制位。在 C# 中，您可以创建一个`Bitmap`窗口大小，调用`Graphics.FromImage`以获取`Graphics`图像的对象，然后调用[CopyFromScreen](http://msdn.microsoft.com/en-us/library/6yfzc507.aspx)以获取窗口内容。缺点是只有在没有任何东西覆盖有问题的窗口时才有效。如果有东西覆盖了窗口的任何部分，你就会捕捉到它。

无论如何，您最终都会得到需要组合成视频的图像流。有许多图书馆可以做到这一点。对于 C# 解决方案，您可以从查看[从流式图像 c# 创建视频](https://stackoverflow.com/q/9607712/56778)开始。我怀疑有类似的 C++ 库。还有一些命令行工具可以做到这一点，尽管我对它们的体验并不令人满意。

# android - 在后台播放无线电流

> ID：13242029
> 
> 赞同：0
> 
> 时间：2012-11-05T23:22:56.263
> 
> 标签：android, android-layout, android-intent, streaming, android-music-player

您好，我正在为广播电台构建应用程序。现在我可以在应用程序中播放音乐，但是当我进入主屏幕时，音频停止了。有人对如何使用我的代码在后台继续播放音频有一些提示建议吗？

我的代码：

```
package com.wemait.rtvhardenberg;

import java.io.BufferedOutputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;

import com.wemait.rtvhardenberg.Nieuws.GetJSONData;
import com.wemait.rtvhardenberg.helper.AlertDialogManager;
import com.wemait.rtvhardenberg.helper.BackgroundSoundService;
import com.wemait.rtvhardenberg.helper.ConnectionDetector;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.graphics.drawable.AnimationDrawable;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnBufferingUpdateListener;
import android.media.MediaPlayer.OnPreparedListener;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.ProgressBar;

public class Muziek extends Activity implements OnClickListener {

    private final static String RADIO_STATION_URL = "http://stream.intronic.nl/rtvhardenberg";

    private ProgressBar playSeekBar;

    private Button buttonPlay;

    private Button buttonStopPlay;

    private MediaPlayer player;

    /**
     * Reference to the ImageView which will display the animation.
     */
    ImageView animation;

    // Connection detector
    ConnectionDetector cd;

    // Alert dialog manager
    AlertDialogManager alert = new AlertDialogManager();

    // Progress Dialog
    private ProgressDialog pDialog;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.muziek);

        cd = new ConnectionDetector(getApplicationContext());

        // Check for internet connection
        if (!cd.isConnectingToInternet()) {
            // Internet Connection is not present
            alert.showAlertDialog(Muziek.this, "Internet Connectie Error", "Zorg voor een werkende internet connectie", false);
            // stop executing code by return
            return;
        }

        animation = (ImageView)findViewById(R.id.imageAnimation);

        animation.setBackgroundResource(R.drawable.animation);

        //Intent svc=new Intent(this, BackgroundSoundService.class);
        //startService(svc);

        initializeUIElements();

        initializeMediaPlayer();
    }

    private void initializeUIElements() {

        playSeekBar = (ProgressBar) findViewById(R.id.progressBar1);
        playSeekBar.setMax(100);
        playSeekBar.setVisibility(View.INVISIBLE);

        animation.setVisibility(View.INVISIBLE);

        buttonPlay = (Button) findViewById(R.id.button_play);
        buttonPlay.setOnClickListener(this);

        buttonStopPlay = (Button) findViewById(R.id.button_stop);
        buttonStopPlay.setEnabled(false);
        buttonStopPlay.setOnClickListener(this);
    }

    public void onClick(View v) {
        if (v == buttonPlay) {
            startPlaying();
        } else if (v == buttonStopPlay) {
            stopPlaying();
        }
    }

    private void startPlaying() {
        //I tried this but didn't work thats why i've commented it away
        //new BackgroundSound().execute();
        //Intent svc=new Intent(this, BackgroundSoundService.class);
       // startService(svc);
        pDialog = new ProgressDialog(Muziek.this);
            pDialog.setMessage("Live radio laden ...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show(); 

        buttonStopPlay.setEnabled(true);
        buttonPlay.setEnabled(false);

        playSeekBar.setVisibility(View.INVISIBLE); // plaatje

        AnimationDrawable frameAnimation = 
                (AnimationDrawable) animation.getBackground();
        animation.setVisibility(View.INVISIBLE);
        frameAnimation.start();

        player.prepareAsync();
        frameAnimation.start();
        player.setOnPreparedListener(new OnPreparedListener() {
            public void onPrepared(MediaPlayer mp) {
                player.start();
               // buttonRecord.setEnabled(true);
                //new BackgroundSound().execute();

            }
        });
    }

    private void stopPlaying() {
        if (player.isPlaying()) {
            player.stop();
            player.release();
            initializeMediaPlayer();
        }

        buttonPlay.setEnabled(true);
        buttonStopPlay.setEnabled(false);
        playSeekBar.setVisibility(View.INVISIBLE);
        animation.setVisibility(View.INVISIBLE);
        //buttonRecord.setEnabled(false);
        //buttonStopRecord.setEnabled(false);
        //stopRecording();
    }

    private void initializeMediaPlayer() {
        player = new MediaPlayer();
        try {
            player.setDataSource(RADIO_STATION_URL);
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        Intent svc=new Intent(this, BackgroundSoundService.class);
        startService(svc);

        player.setOnBufferingUpdateListener(new OnBufferingUpdateListener() {

            public void onBufferingUpdate(MediaPlayer mp, int percent) {
                playSeekBar.setSecondaryProgress(percent);
                pDialog.dismiss();
                animation.setVisibility(View.VISIBLE);
                Log.i("Buffering", "" + percent);
            }
        });
    }

    @Override
    protected void onPause() {
        super.onPause();
        if (player.isPlaying()) {
            player.stop();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T00:40:29.780

看起来您已经在使用`Service`应用程序的 for 部分，这是长时间运行的后台活动的正确方法。

为了让事情在后台运行，你应该初始化`MediaPlayer`内部`Service`而不是你的`Activity`. 一旦它运行，您可以`Service`通过向它发送额外`Intent`的 s 或绑定到它来与它通信（请参阅[绑定服务](http://developer.android.com/guide/components/bound-services.html)）。

# ruby-on-rails - Rails、PaperClip、S3、Heroku：模型图标字段未保存

> ID：13242031
> 
> 赞同：2
> 
> 时间：2012-11-05T23:23:11.407
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, amazon-s3, paperclip

我正在使用 Rails 3.2 + Heroku + S3 + Paperclip 在我的`User`模型上存储图标。该模型虽然没有保存 4 个图标字段。图像正在正确处理并保存在 S3 上，并且没有发生错误。我还有另一个模型，它有一个通过 Paperclip 和 S3 存储的文档。该模型在所有情况下都能完美运行。该`User`图标在本地有效，但在 Heroku 上无效。

`production.rb`相关配置

```
config.paperclip_defaults = {
  :storage => :s3,
  :s3_credentials => {
    :bucket => ENV['AWS_BUCKET'],
    :access_key_id => ENV['AWS_ACCESS_KEY_ID'],
    :secret_access_key => ENV['AWS_SECRET_ACCESS_KEY']
  }
} 
```

用户型号代码：

```
class User < ActiveRecord::Base
  attr_accessible :icon

  has_attached_file :icon, :url => "/system/:rails_env/:attachment/:style/:hash.:extension",
    :hash_data => ":class/:attachment/:id",
    :hash_secret => "superSecretThing",
    :styles => { :medium => "300x300>", :thumb => "100x100>" },
    :default_url => "/blank.png"
  ... 
```

控制器代码：（这段代码有点疯狂，因为我是 AJAXing 文件 Base64 编码。）

```
 params[:user][:icon_data]
  decoded_file = Base64.decode64(data)
  begin
    split_name = params[:user][:icon_file_name].split(".")
    file = Tempfile.new([split_name[0..-2].join("."), ".#{split_name[-1]}"])
    file.binmode
    file.write(decoded_file)
    file.close
    @user.icon = open(file)
    @user.icon_file_name = params[:user][:icon_file_name]
  ensure
    file.unlink
  end
  @user.save 
```

我在另一个带有回形针附件的模型上做了几乎相同的过程，它完美无缺。在这两种情况下，附件都正确保存到 S3 并且没有引发错误。[这个要点有](https://gist.github.com/4021058)来自 Heroku 日志的控制器操作的示例输出。

我很困惑，因为另一个模型工作正常。唯一真正的区别是`User`附件进行图像处理，但该部分似乎工作正常。

[问题与此](https://stackoverflow.com/questions/4654111/paperclip-w-imagemagick-amazon-s3-and-heroku-imagemagick-s3-work-but-the?rq=1)相同，但那里的解决方案不适用。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:12:26.413

所以问题是**不包括`:path`参数**使它尝试将`:url`参数用于url和路径。真正的解决方法是`:path`在 url 之外包含参数。

例如，一个在本地和 Heroku 上都可以工作的固定配置：

```
has_attached_file :icon,
    :url => "/system/:rails_env/:attachment/:style/:hash.:extension",
    :path => "public/system/:rails_env/:attachment/:style/:hash.:extension",
    :hash_data => ":class/:attachment/:id",
    :hash_secret => "superDuperSecret",
    :styles => { :medium => "300x300>", :thumb => "100x100>" },
    :default_url => "/blank.png" 
```

# pdf-to-html - 如何使用 Homebrew 将 PDF 转换为 HTML？

> ID：13242037
> 
> 赞同：0
> 
> 时间：2012-11-05T23:23:43.907
> 
> 标签：pdf-to-html

我只是有人说使用自制软件将 PDF 转换为 HTML。我能够下载所有内容，但我不确定如何执行它。有人可以给我一步一步吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:34:17.003

[Homebrew](http://mxcl.github.com/homebrew)是 Mac OS X 的包管理器。您可以将其与[Macports](http://www.macports.org/)和[Fink](http://www.finkproject.org/)进行比较。

如果要将 PDF 转换为 HTML，可以安装程序或使用免费的在线转换器。只需在谷歌上搜索“ [PDF 到 HTML 转换器](https://www.google.com/search?q=PDF%20to%20HTML%20converter)”即可获得一些转换器。

* * *

启动 Homebrew 的命令是

```
$ brew 
```

美元符号表示 bash 或终端。编写命令时不要包含它。

# php - 现有 php 站点的 Drupal 自定义主题

> ID：13242040
> 
> 赞同：0
> 
> 时间：2012-11-05T23:23:52.287
> 
> 标签：php, drupal, drupal-theming

我是 drupal 的新手，刚刚完成了 drupal 的基本概念的学习。我们正在将现有的 php 站点迁移到 drupal。该网站每周发布文章，文章存储在数据库中。

如果我想拥有与现有网站完全相同的演示文稿，是否需要创建自定义主题？

并且只是寻求建议，如果有任何更简单的方法可以将现有的动态 php 站点迁移到 drupal。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:29:35.997

如果您想让它反映您当前网站的外观，您肯定需要创建一个自定义主题。我建议使用基本主题，例如[Zen](http://drupal.org/project/zen)，并从那里进行自定义。

就迁移而言，这实际上取决于您的站点当前的设置方式。我建议编写一个自定义脚本来将您的文章迁移到 Drupal。

# facebook - Facebook like 按钮的“评论弹出窗口”显示一半

> ID：13242046
> 
> 赞同：0
> 
> 时间：2012-11-05T23:24:31.240
> 
> 标签：facebook, button, facebook-like

我正在使用 WordPress 的 21 个主题。

在其他主题中，没有问题，但在 21 中，Facebook 的点赞按钮的评论弹出窗口有问题。它显示了一半。当我点击“Like”按钮时，视图如下：

![在此处输入图像描述](../Images/9d602af29072255f7907f89e590262a4.png)

您可以在以下网址查看网站：http: [//www.deneyimokulu.com/](http://www.deneyimokulu.com/)

我为 Wordpress 使用 Facebook 插件。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:27:06.753

您在类似按钮的 iframe 之前有一个 span 元素。

`<span style="height: 20px; width: 85px;">`

尝试将其更改为：

`<span style="height: 20px; width: 450px;">`

或将宽度添加到以下元素：

.fb_iframe_widget span {display: inline-block; 位置：相对；文本对齐：对齐；垂直对齐：文本底部；**宽度：450 像素！重要；**}

# ruby-on-rails - 跨域资源共享的安全性

> ID：13242049
> 
> 赞同：1
> 
> 时间：2012-11-05T23:24:55.223
> 
> 标签：ruby-on-rails, security, cors

我有 2 个 ruby​​ on rails 应用程序位于 2 个不同的域上（比如说*`www.exampleA.com`*和*`www.exampleB.com`*。我想在 2 个应用程序之间共享资源并且我正在使用 CORS：

*`exampleA.com`*发送 http POST 请求到*`exampleB.com`*.

在*`exampleB.com`*我正在检查`request.env['HTTP_ORIGIN']`以确保请求来自*`exampleA.com`*. 如果为真，我会通过设置响应标头以允许 http 发布请求来响应。

我的问题是我可以`request.env['HTTP_ORIGIN']`用作验证请求者身份的唯一检查吗？

有人*`www.exampleC.com`*可以伪造他们的 HTTP_ORIGIN 看起来像*`www.exampleA.com`*并发布恶意数据吗？如果是这样，验证请求者身份的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T06:18:45.427

[*Origin*](http://www.w3.org/TR/cors/#origin-request-header)[是页面作者无法为 XHR 请求设置](http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader-method)的几个标头字段之一。因此，您可以放心地信任 XHR 请求的*Origin*信息。

但是攻击者仍然有可能直接发送带有恶意数据的伪造请求。所以你仍然需要验证传入的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:31:19.307

抱歉，伪造大多数客户端提供的数据（包括来源）非常容易，因此不应将其用于任何类型的安全性。

# java - 带有偏差的 Java 递归三角形

> ID：13242050
> 
> 赞同：9
> 
> 时间：2012-11-05T23:24:56.497
> 
> 标签：java, recursion, geometry, deviation

您好，我对编程相当陌生，我正在尝试在 Java 中创建一个函数，该函数从角之间的较大三角形中点创建递归三角形，其中新三角形点偏离 y 值中的正常位置。请参阅下面的图片以进行可视化。

![可视化 - 图 1](../Images/b7c817d24a4fc70cab0891265a925f65.png)

![可视化 - 图 2](../Images/77fcf5926dbc29f7b1dc51a221e3898c.png)

第一张图显示了没有任何偏差的递归算法的进程（顺序 0,1,2），第二张图显示了（顺序 0,1）。

我已经设法生成了一段工作代码，它为前几个订单创建了我想要的东西，但是当我们达到订单 2 及以上时，我遇到了较小的三角形不使用相同中点的问题，因此看起来像下图。

![工作正在进行中](../Images/7df6f5ceb6cfa64b85f742a2b40a8113.png)

所以我需要一种方法来存储和调用每个三角形的正确中点。我一直在考虑实现一个新的类来控制中点的计算并存储它们等等，但正如我所说我需要帮助。

以下是我当前的代码

点类存储一个点的 ax 和 y 值

lineBetween 在选定点之间创建一条线

```
void fractalLine(TurtleGraphics turtle, int order, Point ett, Point tva, Point tre, int dev) {

    if(order == 0){
        lineBetween(ett,tva,turtle);
        lineBetween(tva,tre,turtle);
        lineBetween(tre,ett,turtle);
    } else {

            double deltaX = tva.getX() - ett.getX();
            double deltaY = tva.getY() - ett.getY();

            double deltaXtre = tre.getX() - ett.getX();
            double deltaYtre = tre.getY() - ett.getY();

            double deltaXtva = tva.getX() - tre.getX();
            double deltaYtva = tva.getY() - tre.getY();

            Point one;
            Point two;
            Point three;

            double xt = ((deltaX/2))+ett.getX();
            double yt = ((deltaY/2))+ett.getY() +RandomUtilities.randFunc(dev);
            one = new Point(xt,yt);

            xt = (deltaXtre/2)+ett.getX();
            yt = (deltaYtre/2)+ett.getY() +RandomUtilities.randFunc(dev);
            two = new Point(xt,yt);

            xt = ((deltaXtva/2))+tre.getX();
            yt = ((deltaYtva/2))+tre.getY() +RandomUtilities.randFunc(dev);
            three = new Point(xt,yt);

            fractalLine(turtle,order-1,one,tva,three,dev/2);
            fractalLine(turtle,order-1,ett,one,two,dev/2);
            fractalLine(turtle,order-1,two,three,tre,dev/2);
            fractalLine(turtle,order-1,one,two,three,dev/2);            
    }
} 
```

提前致谢

胜利者

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:38:53.613

您可以通过 3 个点（顶点）定义一个三角形。所以顶点 a、b 和 c 将形成一个三角形。**ab、ac**和**bc**的组合将是边。所以算法是这样的：

1.  首先从三个顶点 a、b 和 c 开始
2.  获取 3 条边 p1、p2 和 p3 的中点，并获取 4 个较小三角形的 4 组顶点。即 (a,p1,p2),(b,p1,p3),(c,p2,p3) 和 (p1,p2,p3)
3.  递归找到4个三角形的子三角形，直到达到深度。

所以作为一个粗略的指导，代码去

```
findTriangles(Vertexes[] triangle, int currentDepth) {
    //Depth is reached.
    if(currentDepth == depth) {
          store(triangle);
          return;
    }
    Vertexes[] first = getFirstTriangle(triangle); 
    Vertexes[] second = getSecondTriangle(triangle);
    Vertexes[] third = getThirdTriangle(triangle);;
    Vertexes[] fourth = getFourthTriangle(triangle)

    findTriangles(first, currentDepth+1);  
    findTriangles(second, currentDepth+1);
    findTriangles(third, currentDepth+1);
    findTriangles(fourth, currentDepth+1);
} 
```

您必须将相关三角形存储在数据结构中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:14:21.350

您在递归的不同路径中一次又一次地计算任何顶点的中点。只要您不随意更改它们，您就会为每条路径获得相同的中点，因此没有问题。但是，当然，如果您随机修改中点，您将在两个不同的递归路径中以两个不同的中点结束。

您可以修改您的算法，不仅通过三角形的 3 个角，还通过每个顶点的修改中点。或者您将它们保存在单独的列表或地图或其他东西中，并且只计算一次，然后查找它们。

# windows-phone-7 - windows phone 从 MainViewModel 加载数据

> ID：13242052
> 
> 赞同：2
> 
> 时间：2012-11-05T23:25:15.097
> 
> 标签：windows-phone-7

菜鸟问题可能。我正在开发一个 mvm wp7 应用程序，其中地图显示了沙龙的图钉。从链接中检索数据库。

我正在努力解决的问题是未从 App._ViewModel 加载可观察的集合数据（其中 json 序列化程序解析数据库并且工作正常）。在调试应用程序时会显示一个简单的地图，仅此而已。从数据库返回字符串属性会导致该代码中断。我也尝试过消息框来显示字符串，但仍然崩溃。

继承人的代码：

主视图模型.cs

> 公共类 MainViewModel {
> public bool IsDataLoaded { get; 私人套装；}
> 
> ```
>  public ObservableCollection<SalonViewModel> SalonCollection { get; private set; }
> 
>     public MainViewModel()
>     {
>         IsDataLoaded = false; 
>     }
> 
>     public ObservableCollection<SalonViewModel> LoadData()
>     {
>         SalonCollection = new ObservableCollection<SalonViewModel>();
>         var wednesday = new Uri("http://blehbleh.txt");
>         WebClient wc = new WebClient();
>         wc.OpenReadCompleted += new OpenReadCompletedEventHandler(wc_OpenReadCompleted);
>         wc.OpenReadAsync(wednesday);
> 
>         return SalonCollection;
>     }
> 
>     public void wc_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
>     { 
>         try
>         { 
>             DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(ObservableCollection<SalonViewModel>));
>             ObservableCollection<SalonViewModel> list = serializer.ReadObject(e.Result) as ObservableCollection<SalonViewModel>;
> 
>             foreach (SalonViewModel b in list)
>             { 
>                SalonCollection.Add(new SalonViewModel { sid=b.sid,sname=b.sname,sgeo_lat=b.sgeo_lat,sgeo_lon=b.sgeo_lon, 
> 
>             }
> 
>             this.IsDataLoaded = true;
> 
>         }
>         catch (Exception ex)
>         {
>             //throw ex;
>             MessageBox.Show(ex.Message);
>         }
>     } 
> ```

应用程序.cs

> 公共部分类应用程序：应用程序{
> 
> ```
>  private static MainViewModel viewModel;
> 
>     public static MainViewModel _viewModel
>     { 
>         get
>         {
>             if (viewModel == null)
>             {
>                 viewModel = new MainViewModel();
>             }
> 
>             return viewModel;
>         }
>     }
> 
>     void LoadData()
>     {
>         if (!_viewModel.IsDataLoaded)
>         {
>             _viewModel.LoadData();
>         }
>     } 
> ```
> 
> ETC

这是mappage.cs

> 私人无效沙龙地图加载（对象发送者，RoutedEventArgs e）{
> 
> ```
>  foreach (SalonViewModel Salon in App._viewModel.LoadData)
>              {
>                  MessageBox.Show(Salon.sname);
>                  Pushpin p = new Pushpin();
>                  p.Content = Salon.sname + System.Environment.NewLine + "Rate: "; 
>                  Layer.AddChild(p, new GeoCoordinate(Salon.sgeo_lon, Salon.sgeo_lat)); 
>              }
> 
>              Map1.Children.Add(Layer); 
> 
>          } 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T01:43:15.313

在您的`MainViewModel` `LoadData`函数中，`OpenReadAsync()`是一个异步函数，因此`SalonCollection`在下一行返回将返回一个 empty `ObservableCollection`，因为回调函数`wc_OpenReadCompleted`尚未运行。

此外，`MessageBox.Show`崩溃的原因是因为您试图在非 UI 线程上调用 UI 函数（此处的解决方案：[Windows Phone 7 上的 Dispatcher.Invoke()？](https://stackoverflow.com/questions/8004252/dispatcher-invoke-on-windows-phone-7)）

与其返回`ObservableCollection`并手动将子级添加到地图中，不如尝试将`MapItemsControl`一层绑定`Map`到`ObservableCollection`您的视图模型。这里有一个很好的例子：[Binding Pushpins to Bing Maps in Windows Phone](https://stackoverflow.com/questions/10968424/binding-pushpins-to-bing-maps-in-windows-phone)

# .htaccess - 动态子域重写 htaccess

> ID：13242062
> 
> 赞同：2
> 
> 时间：2012-11-05T23:26:32.237
> 
> 标签：.htaccess

首先 - 我读过很多类似的问题，但对我没有任何帮助。

这些是重写规则：

```
RewriteCond %{HTTP_HOST} ^([^/.]+)\.example\.com$ 
RewriteRule ^ index.php?user=%1 [L] 
```

它工作正常，但这不完全是我想要的。我正在运行像 kohana 这样的 MVC 框架，其中 url 结构如下所示：

```
example.com/controller/action/parameter 
```

但是当我尝试以下重写时，我得到一个内部服务器错误：

```
RewriteCond %{HTTP_HOST} ^([^/.]+)\.example\.com$ 
RewriteRule ^ index.php/user/view/%1 [L] 
```

那么，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:26:45.173

好的。. .

在与规则斗争了一段时间后，我找到了答案：

```
RewriteCond %{HTTP_HOST} ^([^/.]+)\.example\.com$ 
RewriteCond %1 !^(www|ftp|mail)$ [NC]
RewriteRule (.+)$ "http://example.com/user/%1" [L,P] 
```

# asp.net - 从自定义 asp 网络服务器控件发送动态 css

> ID：13242065
> 
> 赞同：2
> 
> 时间：2012-11-05T23:26:38.833
> 
> 标签：asp.net, css, custom-controls

如何根据用户设置从自定义控件呈现动态 css？我读 [了这篇](https://stackoverflow.com/questions/13184276/send-style-info-from-custom-server-asp-element)文章，但它不是我想要的。样式类没有得到所有 css 属性，直接写样式不是好方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T04:37:11.007

如果您的样式在每个用户的基础上发生变化，并且您希望完全控制渲染的内容，那么自己编写样式是一个非常好的方法。

您可以这样做：

```
 protected override void AddAttributesToRender(System.Web.UI.HtmlTextWriter writer)
    {
        var styleStr = "{color:red}";
        writer.AddAttribute(HtmlTextWriterAttribute.Name, "style");
        writer.AddAttribute(HtmlTextWriterAttribute.Value, styleStr);
        base.AddAttributesToRender(writer);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T09:27:25.913

如果您不想将样式应用于一个元素，您可以这样做：

```
 protected override void OnPreRender(EventArgs e)
    {
        ...
        Page.Header.Controls.Add(new LiteralControl("<style type='text/css'> .x { border-style:solid }</style>"));
    } 
```

# android - 具有动态内容的 ViewPager

> ID：13242066
> 
> 赞同：0
> 
> 时间：2012-11-05T23:26:58.887
> 
> 标签：android, tabs, android-viewpager

我正在使用[此处](http://thepseudocoder.wordpress.com/2011/10/13/android-tabs-viewpager-swipe-able-tabs-ftw/)建议的方法，以便使用 SupportV4 库在 Android 中实现可滑动标签。为了初始化 ViewPager，必须创建一个页面适配器，该适配器需要填充一个片段/选项卡列表，每个片段/选项卡都与一个活动相关联，如下所示：

```
/**
 * Initialise ViewPager
 */
private void intialiseViewPager() {
    List<Fragment> fragments = new Vector<Fragment>();
    fragments.add(Fragment.instantiate(this, Tab1Fragment.class.getName()));
    fragments.add(Fragment.instantiate(this, Tab2Fragment.class.getName()));
    fragments.add(Fragment.instantiate(this, Tab3Fragment.class.getName()));
    this.mPagerAdapter  = new PagerAdapter(super.getSupportFragmentManager(), fragments);

    this.mViewPager = (ViewPager)super.findViewById(R.id.viewpager);
    this.mViewPager.setAdapter(this.mPagerAdapter);
    this.mViewPager.setOnPageChangeListener(this);
} 
```

我的问题是：如何使用不与任何类关联的选项卡动态填充片段列表。例如选项卡列表，其中选项卡的标题是从字符串数组中获取的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:35:45.077

我在某处读到类名 PagerAdapter 不能使用，因为它正在被 android（或类似的东西）使用，所以我使用类名 ViewPagerAdapter... 将您的寻呼机适配器修改为这样的东西...

```
public class ViewPagerAdapter extends FragmentPagerAdapter {
    ArrayList<TabInfo> tabs;
    public ViewPagerAdapter(FragmentManager fm) {
        super(fm);
        tabs = new ArrayList<tabInfo>();
    }
    @Override
    public Fragment getItem(int i) {
        return tabs.get(i).fragment;
    }
    @Override
    public int getCount() {
        return tabs.size();
    }
    @Override
    public CharSequence getPageTitle(int position) {
        return tabs.get(position).title;
    }
    public class TabInfo {
        public Fragment fragment;
        String title;
    }
    public void addTab(Fragment _fragment, String _title) {
        final TabInfo _tabInfo = new tabInfo();
        _tabInfo.fragment=_fragment;
        _tabInfo.title = _title;
        tabs.add(_pageInfo);
    } 
```

以及您对此的初始化...

```
private void intialiseViewPager() {
    this.mPagerAdapter  = new ViewPagerAdapter(super.getSupportFragmentManager());
    mPagerAdapter.addTab(Fragment.instantiate(this, Tab1Fragment.class.getName()));
    mPagerAdapter.addTab(Fragment.instantiate(this, Tab2Fragment.class.getName()));
    mPagerAdapter.addTab(Fragment.instantiate(this, Tab3Fragment.class.getName()));
    this.mViewPager = (ViewPager)super.findViewById(R.id.viewpager);
    this.mViewPager.setAdapter(this.mPagerAdapter);
    this.mViewPager.setOnPageChangeListener(this);
} 
```

我使用 ArrayList 因为它有一个索引并且我对它很满意，您可以根据需要使用任何索引列表类型。

# facebook - 设置 Facebook 身份验证等

> ID：13242068
> 
> 赞同：0
> 
> 时间：2012-11-05T23:27:08.660
> 
> 标签：facebook, facebook-graph-api, user-interface

我已经连续几天尝试设置它，但我在任何地方都找不到任何体面的帮助，我厌倦了尝试一个接一个的教程来做一些不应该太难完成的事情！

我一直在尝试做的就是设置应用程序，这样我就可以请求权限来个性化向用户显示的内容，以添加诸如“Hello NAME”之类的内容以及其他内容以进行发布到他们的墙上等等等等。 .

我知道我的 App ID 和 App Secret。一个教程谈到了一个 API 密钥，其中没有显示给我......

我现在很困惑该怎么做，我有大量的测试文件要删除，所以如果你有任何用处，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T00:18:41.663

下载您需要使用的 SDK。在这里，我猜您将使用 PHP SDK。

**配置文件**

```
<?php

require_once ("fb/facebook.php");

$config = array();
$config['appId'] = 'xxxxxxxxxxxx';
$config['secret'] = 'xxxxxxxxxxxxxxxxxxxxxxxx';

$facebook = new Facebook($config);
$redirecturi = "http://yoururl/";
$user = $facebook->getUser();
if (empty($user['id']))
{
    $loginUrl = $facebook->getLoginUrl(array('scope' =>
            'YOUR PERMISSIONS HERE SEPERATED BY COMMA', 'redirect_uri' => $redirecturi));

    echo ("<script> top.location.href='" . $loginUrl . "'</script>");
}
$userdata = $facebook->api('/me'); 
```

?>

要回显 Hello Name，

现在您使用一个新的 PHP 文件 index.php

```
<?php
include("config.php");
echo $userdata['name'];
?> 
```

我知道这有点像勺子喂食，但是，是的，我开始很难，所以我希望其他人能够轻松克服。

对任何一开始就卡住的人都有用。

# c++ - 如何在 MFC 中检测 URL 重定向？

> ID：13242069
> 
> 赞同：0
> 
> 时间：2012-11-05T23:27:08.790
> 
> 标签：c++, url, mfc, http-redirect

使用**HttpSendRequest()**我可以从 MFC 导航到网页。我尝试访问的某些 URL 无效，但某些服务器没有发送错误 404，而是重定向到另一个页面。

我不确定如何检测此重定向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:37:09.290

`404`是“URL 完全未知”的 HTTP 状态代码。重定向是另一个状态码，`301`. 你可以通过`HTTP_QUERY_STATUS_CODE`.

顺便说一句，这不是 MFC，而是基本的 WinInet 功能。

# c# - 如何在项目中找到 ViewModel？

> ID：13242072
> 
> 赞同：0
> 
> 时间：2012-11-05T23:27:27.390
> 
> 标签：c#, wpf, mvvm

这个问题对于 MVVM 专家来说可能听起来很基础，但我试图了解我应该如何知道何时需要创建 ViewModel 以及需要创建多少个......好吧我知道 ViewModel 是 View (UI) 和 Model (Data ) 但有时我看到一个应用程序只有 2 个 UI 和一个模型，但其中涉及 5 个 ViewModel。

事实上，我只需要了解一个项目中的哪些现象应该用 ViewModel 来表示？

假设我们有一个电话簿应用程序。所以我假设联系人需要一个用户界面，例如搜索。显示、编辑和删除确实告诉我需要多少 UI。还，

```
{
 string firstName,
 string lastName,
 string phone,
 bool isCompany
} 
```

可以是模型的结构。

现在，当涉及到 ViewModel 时，我们要处理多少个 ViewModel？你怎么认识他们？

我希望这很清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T23:49:30.943

鉴于你的例子，我会安排这样的项目：

*   联系人 [项目]
    *   视图 [文件夹]
        *   MainWindow.xaml *（显示所有联系人的网格和用于添加/编辑/删除记录的工具栏）*
        *   CustomerInfo.xaml *（包含 Customer 对象的每个属性的字段的表单）*
    *   视图模型 [文件夹]
        *   MainWindowViewModel.cs *（MainWindow 的 ViewModel）*
        *   CustomerInfoViewModel.cs *（CustomerInfo 的 ViewModel）*
    *   楷模
        *   客户.cs

需要注意的一件事是，我将让 CustomerInfo 屏幕负责处理添加新客户和编辑现有客户的逻辑。本质上具有重复表单没有任何意义 - 只需在用户编辑现有客户时在初始化时填充每个字段的值。

此外，网格上的删除按钮可以调用执行命令来删除选定的用户；这也可以从 CustomerInfo 屏幕完成（删除当前客户）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:54:07.353

我使用 MVC 的时间不长，但是，在我的商店中，ViewModel 是我们构建我们想要传递给视图的数据的方式，帮助我理解它的方法之一是它可以用来将两个或更多模型在特定视图中使用。

模型设置您希望对象具有的属性，在此示例中，联系人返回类型“Person”，ContactAddress 返回类型“地址”（我使用了不同的数据类型，因为我认为它是一个更清晰的示例，我希望我没有t混淆任何东西）：

```
public class Models
{

public Person Contact
{
    // properties of first Model
    string firstName;
    string lastName;
}

public Address ContactAddress 
{
    // properties of second Model
    string Address1;
    string Address2;
    string City;
    string State;
    string Zip;
}
}// EndModels 
```

ViewModel 我们知道我们的最终视图将需要联系人数据以及他们的 ContactAddress 数据。我们可以使用 ViewModel 作为一种方式来保存两组数据并将其传递给我们的视图。

```
public class ContactVM
{
   // properties of the ViewModel, to hold data for each Model we need to pass to the view 
   public Person Contacts {get; set;}
   public Address ContactAddresses {get;set;} 

   // Constructor
   public ContactVM()
   {
        Contacts = new Person();
        ContactAddresses = new Address();
   }
} 
```

控制器 控制器将调用 ViewModel，然后调用每个 ViewModel 属性以使用正确的数据填充它们。有很多方法可以做到这一点，但为了便于举例，我将其排除在外。

```
public ActionResult Index()
{
    // create an instance of the ViewModel
    ContactVM contacts = new ContactVM();

    // make calls to populate your ViewModel properties with the correct data
    contacts.Contacts = //call to populate your Contact data here
    contacts.ContactAddresses = //call to populate your Address data here

    // pass the ViewModel to the View for use
    return View(contacts);
} 
```

# jpa - 有没有人尝试过使用 orientdb 实现 datanucleus JPA ？

> ID：13242076
> 
> 赞同：1
> 
> 时间：2012-11-05T23:27:49.203
> 
> 标签：jpa, datanucleus, orientdb

我正在尝试为我的 java 项目为 orientdb 实现 Datanucleus JPA。我能够成功地使其与 datanucleus3.1.2、mongodb 一起使用。但是当我尝试使用 orientdb 时，我读到它适用于 2.x（我想目前只有 2.x）。我用 2.x 替换了所有 datanucleus 3.x 罐子。

对于 mongodb，我有以下工作正常

`Persistence.createEntityManagerFactory("mongodb");`

使用persistence.xml

```
 <persistence-unit name="mongodb">
    <properties>
        <property name="datanucleus.ConnectionURL" value="mongodb:localhost:27017/db"/>
        <property name="datanucleus.storeManagerType" value="mongodb" />
        <property name="datanucleus.autoCreateSchema" value="true" />
    </properties>
</persistence-unit> 
```

有没有人能够让它工作？如何为 orientdb 创建实体管理器工厂？persistence.xml 应该是什么样子？

我不断收到 javax.persistence.PersistenceException: No Persistence provider for EntityManager named orientdb at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:84) at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:54)

# java - 在 Java 中解决 NullPointerException 的问题 - 认为这是一个初始化问题，但找不到

> ID：13242078
> 
> 赞同：0
> 
> 时间：2012-11-05T23:27:55.273
> 
> 标签：java, nullpointerexception

我仔细阅读了许多其他 NPE 解决方案，并且我尝试实施其他建议，但没有一个完全符合我正在尝试做的事情，它只会导致更多的 eclipse 错误。我已经编译并尝试从命令行运行，在命令行运行时为我正在运行的应用程序提供了几个字符串。下面是主类，以及包含主使用的方法的类。

使用 main 方法的类：

```
package my.package.ext;

public class WordCounterApp {

    /**
     * @param args
     * Two command line arguments: the first one needs to be in quotes, the string that will be used, the second optional argument
     * is the unique word to be counted (countWord method).
     * @param source 
     * @param word 
     */
    public static void main(String[] args) {
        String source = null;
        String uniqueword = null;
        StringBuilder word = null;
        WordCounter counter = new WordCounter(source, word);
        WordCounter uniqueCounter = new WordCounter(source, uniqueword);
        counter.countWords(source);
        counter.countUniqueWords(source);
        uniqueCounter.countWord(source, uniqueword);

}

} 
```

使用其他方法进行类：

```
package my.package.ext;
import java.util.*;
import java.util.regex.Matcher;
import java.util.regex.Pattern;
import java.lang.Character;
import java.lang.StringBuilder;

public class WordCounter {
    public Integer counter = 0;
    public String source;
    public HashSet<String> hashset;
    public StringBuilder word;
    public String uniqueword;

    public WordCounter(String source) {
         counter = new Integer(counter);
    }
    public WordCounter(String source, StringBuilder word) {
         counter = new Integer(counter);
    }
    public WordCounter(String source, String uniqueword) {
        counter = new Integer(counter);
    }
    /**
     *  
     * @param line - the string parameter to get a total word count from.
     */

    public int countWords(String source) {

        boolean word = false;
        int endOfLine = source.length() - 1;
        Integer counter = 0;

        for (int i = 0; i < source.length(); i++) {
            if (Character.isLetter(source.charAt(i)) == true && i != endOfLine) {
                word = true;
            //} else if (Character.charValue(line.charAt(i)) == "-" && i != endOfLine) {
            //  word = true;
            } else if (Character.isLetter(source.charAt(i)) == false && word == true) {
                counter++;
                word = false;
            } else if (Character.isLetter(source.charAt(i)) && i == endOfLine) {
                counter++;
            }
        }
        System.out.println(counter);
        return counter;
    }

/**
 * 
 * @param line - the string parameter that we will return the unique word count from. Randy recommends a HashSet.
 * Put it into a hashset. Hashsets don't allow duplicate elements. Then do a count. 
 */

    public int countUniqueWords(String line) {
        hashset = new HashSet<String>();
        word = new StringBuilder();
        int endOfLine = line.length() - 1;
        boolean isWord = false;
        String stringWord = null;
        Integer counter = 0;

        for (int i = 0; i < line.length(); i++) {
            if (Character.isLetter(line.charAt(i)) == true && i != endOfLine) {
                //System.out.println(i);
                word.append(line.charAt(i));
                isWord = true;
            } else if (Character.isLetter(line.charAt(i)) == false && isWord == true) {
                counter++;
                //System.out.println("Counter is: " + counter);
                stringWord = word.toString();
                //System.out.println("stringWord is now: " + stringWord);
                hashset.add(stringWord);
                //System.out.println(hashset);
                word = new StringBuilder();
                isWord = false;
            } else if (Character.isLetter(line.charAt(i)) && i == endOfLine) {
                counter++;
                stringWord = word.toString();
                hashset.add(stringWord);
            }
        }
        //System.out.println(counter);
        System.out.println("There are " + hashset.size() + " unique words in this string");
        System.out.println("These are the unique words in the string: " + hashset);
        return counter;

    }

/**
 * 
 * @param source - the string the word is to be counted from
 * @param word - the word to be counted
 * 
 */
    public void countWord(String source, String word) {

        String str = source;
        Pattern p = Pattern.compile("\\s"+word+"\\s");
        Matcher m = p.matcher(str);
        int count = 0;
        while (m.find()) {
            count++;
        }
        System.out.println("The word: " + "\"" + word + "\"" + " appears " + count + " times.");
        }

} 
```

我在这里确定了 NPE 的来源：

```
public int countWords(String source) {

    boolean word = false;
    int endOfLine = source.length() - 1;  //the source of the NPE is this line
    Integer counter = 0; 
```

所以看着那个，我想我没有正确初始化源。我尝试过类似 WordCounter source = new WordCounter()

但是我尝试的每一个变体，引入正确的构造函数，都会给我其他 eclipse 错误。我似乎无法到达那里，我担心我走错了路。我可能在这里也有其他问题。我也不确定从命令行运行的正确方法，同时将一些字符串作为参数传递给方法。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T23:31:02.887

您`source`的主要方法中的字符串是`null`，并且您将其作为参数传递给`countWords`方法。

```
 public static void main(String[] args) {
        String source = null;// it is null here
        ..............
        ............
        counter.countWords(source);// passing null here 
```

因此，当您打电话时，在您的 countWords 中

```
 int endOfLine = source.length() - 1; 
```

由于您的来源为空，它将抛出 NullPointerException。

初始化您的字符串以摆脱 NPE。

**编辑：**如果你想将 source 作为命令行参数传递。

```
String source =args[0]; 
```

并在运行时传递命令行参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:30:59.203

你的主要方法：

```
public static void main(String[] args) {
        String source = null;
        // ... a few lines
        counter.countWords(source);
        // ... more code

} 
```

产生的错误：

```
public int countWords(String source) {
    boolean word = false;
    int endOfLine = source.length() - 1;  //the source of the NPE is this line
    Integer counter = 0;
} 
```

发生是`source`因为`null`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T23:31:25.083

您将 null 作为源传递并稍后调用 source.length 。这会导致 NPE。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T23:31:47.710

counter.countWords(source);

这里源字符串为空，导致 NPE。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T23:32:58.517

在您的主要方法中，您分配`source`为 be `null`。你永远不会将它重新分配给其他任何东西，所以当你调用`counter.countWords(source)`它时，它相当于调用`counter.countWords(null)`。

这意味着，当您到达`countWords()`它尝试调用的行时`source.length()`，`source`实际上会`null`导致 a`NullPointerException`被抛出。为避免这种情况，您必须`source`在调用该方法之前将其赋值为某物。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-06T01:25:39.463

这是我的版本，基于您的“手动行解析”方法：

```
package forums;

import java.util.List;
import java.util.ArrayList;
import java.util.Set;
import java.util.HashSet;
import java.util.regex.Pattern;
import java.util.regex.Matcher;

public class WordCounterApp {

    private static void printUsage() {
        System.out.println("usage: java -cp C:\\Java\\home\\classes forums.WordCounterApp <text> [targetWord]");
        System.out.println("   <text> is a quoted string to be split into words.");
        System.out.println("   optional [targetWord] to be counted seperately.");
    }

    /**
     * @param args
     *  REQUIRED [0] text: a quoted string to be searched for words. 
     *  OPTIONAL [1] targetWord: the word to be counted, if desired.
     */
    public static void main(String[] args) {
        if (args.length==0) {
            printUsage();
            return;
        }
        String text = args[0];
        String targetWord = args.length>1 ? args[1] : null;
        WordCount wordCount = new WordCount(text);

        System.out.println();

        // all words in this string
        List<String> words = wordCount.all();
        System.out.println("There are "+words.size()+" words in the string. That are:\n"+words);
        System.out.println();

        // unique words in this string
        Set<String> uniqueWords = wordCount.unique();
        System.out.println("There are "+uniqueWords.size()+" unique words in the string. They are:\n"+uniqueWords);
        System.out.println();

        // the number of occurrences of the target word in this string, if given
        if (targetWord ! = null) {
            int targetCount = wordCount.of(targetWord);
            System.out.println("The word \""+targetWord+"\" appears "+targetCount+" times.");
            System.out.println();
        }

    }
}

/**
 * Counts the words on a line, in various ways.
 */
class WordCount 
{
    private final String _line;
    public WordCount(String line) {
        _line = line;
    }

    public List<String> all() {
        final List<String> results = new ArrayList<String>(64); // just a guess at max word-count.
        final Matcher matcher = Pattern.compile("\\w+").matcher(_line);
        int count = 0;
        while ( matcher.find() )
            results.add(matcher.group());
        return results;
    }

    /**
     * Returns a set of the unique words in the line
     */
    public Set<String> unique() {
        final HashSet<String> results = new HashSet<String>();
        final int lineLength = _line.length();
        final int endOfLine = lineLength-1;
        final StringBuilder wordBuffer = new StringBuilder(16); // just a guess at max-word-length
        char ch;
        boolean isInWord = false;
        // foreach character in the line EXCEPT the last one:
        for ( int i=0; i<endOfLine; ++i ) {
            ch = _line.charAt(i);
            if ( Character.isLetter(ch) ) {
                // we're at the start or continuation of the current word.
                wordBuffer.append(ch);
                isInWord = true;
            } else if ( isInWord ) {
                // we're reached the end-of-word, or the end-of-the-line.
                results.add(wordBuffer.toString());
                wordBuffer.setLength(0); // clear the word-buffer.
                isInWord = false;
            }
        }
        // handle the last character in the line seperately, just to save
        // testing for it everytime through the loop... and I personally 
        // think that the logic is easier to follow this way.
        ch = _line.charAt(endOfLine);
        if ( Character.isLetter(ch) )
            wordBuffer.append(ch);
        if ( wordBuffer.length() > 0 )
            results.add(wordBuffer.toString());
        return results;
    }

    /**
     * Returns the number of occurences of the targetWord.
     * @param targetWord - the word to be counted.
     */
    public int of(String targetWord) {
        final String regex = "\\s+"+targetWord+"\\s+";
        final Matcher matcher = Pattern.compile(regex).matcher(_line);
        int count = 0;
        while ( matcher.find() )
            ++count;
        return count;
    }

} 
```

如果是为自己做这个，该`all`方法将只使用[String.split(String regex)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)（因为它更简洁）；然后该`unique`方法将从该方法的结果开始`all`，而不是“手动解析”这些单词（再次因为它更简洁）。

Also, if I was doing this for real I'd be inclined to have one `frequencyTable` method that returns a `HashMap<String, int>` containing "the frequency table" - i.e. a map of each distinct word to the number of times it occurs. This recipe is flexible (and therefore reusable) and tends to be more efficient because you typically parse a line once, and then repeatedly query the parse-results... and if you're only querying the result once then you really haven't lost anything except a few clockticks, and they come in billions these days.

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-05T23:37:04.480

城市 17 大亨，

我停止阅读您的 main 方法，因为我已经找到了一个显示停止器：您根本没有做任何事情`args`（传递给 main 方法的命令行参数）......所以您的`source`,`uniqueWord`和`word`variables 都是 ALLWAYS `null`。 ..我认为这是你的根本原因`NullPointerException`。

您可能还想在谷歌上搜索：如何阅读堆栈跟踪......这是新程序员必须学习的技能，并且该技能甚至可以在（几乎所有）现代语言之间移植。

堆栈跟踪会准确地告诉您 NPE 发生在哪一行代码上，并且从那里通常很容易确定哪些变量是空的……特别是如果您使用调试器……只需放一个断点在违规行上，使用相同的输入重新运行程序，并检查该行上所有变量的值......其中一个或多个必须为空。

干杯。基思。

# javascript - 从下拉框中获取文本？

> ID：13242079
> 
> 赞同：0
> 
> 时间：2012-11-05T23:28:07.733
> 
> 标签：javascript, jquery, dom, client-side-scripting

这将获取在我的下拉菜单中选择的任何值。

```
document.getElementById('tester').value 
```

但是，我无法找出下拉菜单当前显示的文本要使用的属性。我尝试了“文本”然后查看了 W3Schools 但没有答案，这里有人知道吗？

对于那些不确定的人，这里是下拉框的 HTML。

```
<select name="tester" id="tester">
    <option value="1">A skill</option>
    <option value="2">Another skill</option>
    <option value="3">Yet another skill</option>
</select> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T23:32:00.700

尝试

```
var tester = document.getElementById('tester');
var text = tester.options[​​​tester.selectedIndex].innerHTML​; 
```

[**演示**](http://jsfiddle.net/447f6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T23:31:09.630

[文本对我来说看起来不错 - jsFiddle](http://jsfiddle.net/GUMHq/)

```
$('#tester').on('change', function(){
    console.log($('option:selected', this).text()); 
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T23:32:04.163

我想你想要这样的东西：

```
var d = document.getElementById('tester');
var selected_text = d.options[d.selectedIndex].text; 
```

（这是未经测试的，但你的答案应该与此类似）

# html - 如果 font-face 不存在 CSS 更改文本？

> ID：13242084
> 
> 赞同：3
> 
> 时间：2012-11-05T23:28:51.133
> 
> 标签：html, css, web, font-face

有没有办法根据用户是否具有某种字体（最好没有 javascript）来更改 HTML 文件中显示的文本？

例如，如果我想显示一个字体“AlphaIcons”：

```
<span>A</span> 
```

否则我想显示：

```
<span><img src="apple.png">Apple</span> 
```

（在这种情况下，将字体提供给没有它的用​​户不是一种选择）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T00:17:13.967

已编辑***查看这篇文章 - 它可能会引导您朝着正确的方向前进： [Changing Body Font-Size based on Font-Family with jQuery](https://stackoverflow.com/questions/1271477/changing-body-font-size-based-on-font-family-with-jquery)

在第一个答案中，它提供了一个可以检测字体的新库。如果您可以给它一个真/假布尔值，那么您也许可以在图像交换中写入。

* * *

我相信 CSS 已经可以为您做到这一点，使用 font-family 优先考虑您要使用的字体。如果它在用户系统上找不到第一个字体，它会转到下一个。

[http://www.w3schools.com/css/css_font.asp](http://www.w3schools.com/css/css_font.asp)

像这样使用css：

```
span {
    font-family:"AlphaIcons", "Times New Roman", Times, serif;
} 
```

还是我错过了什么？？？

如果您想使用 javascript 制作一些更高级的字体，请查看 Google 的 webfont 库： [http ://www.google.com/webfonts](http://www.google.com/webfonts)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T23:57:11.210

您无法使用纯 HTML 或 CSS 进行检查。你**需要**Javascript 来处理这个问题。

执行以下步骤：

*   通过 font-face 嵌入字体文件
*   使用 javascript 检测客户端浏览器中的字体是否可用。例如， [modernizr](http://modernizr.com)可以解决问题
*   当 font-face 不可用时，使用以下代码将图像插入到 span 中：

**HTML**

```
<span data-image="apple.png">A</span> 
```

**Javascipt**

```
// check font face compatibility
if (!Modernizr.fontface) {

    // replace each span content with the right image
    $('span').each(function(){

        // get the image 
        var image = $(this).data('image');

        // insert this image into the span tag  
        $(this).html('<img src="'+image+'" />');
    });
} 
```

数据属性只是许多可能的解决方案之一。只是一点提示。

一般来说，没有方法可以检查没有 Javascript 的字体的可用性。

# .htaccess - 大规模 .htaccess 重定向

> ID：13242087
> 
> 赞同：0
> 
> 时间：2012-11-05T23:29:32.843
> 
> 标签：.htaccess, redirect

我在重定向某些东西时遇到了一些问题。

我尝试使用 Redirect 301 /link/link/link to /link/link

有没有办法让它更容易，因为我需要重定向 100 多个链接。喜欢这个/博客/类别/节能/水暖/水暖/水暖/水暖/水暖/水暖/水暖/水暖/水暖/水暖/水暖/水暖/水暖/水暖/水暖/水暖/水暖/水暖/水暖/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道

/博客/类别/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/水暖/水暖/水暖/水暖/水暖/

/博客/类别/未分类/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/水暖/水暖/水暖/水暖/水暖/水暖/水暖/水暖/水暖/水暖/关于

/博客/类别/未分类/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/关于

/博客/类别/未分类/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道

/博客/类别/未分类/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/关于

/博客/类别/节水/水管/水管/水管/水管/水管/水管/水管/水管/水管/水管/水管/水管/水管/水管/水管/水管/水管/水管/水管/水管/水管/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道

/博客/类别/节水/水管/水管/水管/水管/水管/水管/水管/水管/水管/水管/水管/水管/水管/水管/水管/水管/水管/水管/水管/水管/水管/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/管道/关于

到主页？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:44:45.320

指令：

```
Redirect 301 /link/link/link /link/link 
```

不做你认为它做的事。它一起映射到节点，这意味着请求：

```
/link/link/link/foo/bar.html 
```

被重定向到：

```
/link/link/foo/bar.html 
```

所以也许你需要解决这个问题。你可以试试：

```
RedirectMatch 301 ^/link/link/link/?$ /link/link 
```

所以节点不像`Redirect`指令中那样连接。至于尝试“解决”您的这个问题，您可以尝试：

```
RedirectMatch 301 ^/([^/]+)/([^/]+)/([^/]+)/([^/]+)/\4/ / 
```

这会将任何看起来像：`/blah1/blah2/blah3/same/same/same/`等的东西重定向到主页`/`。匹配 URI 中的`\4`第 4 条路径，因此如果第 3 条路径之后的任何内容重复，则它会重定向。

# php - PHP 通知：会话未定义索引错误

> ID：13242093
> 
> 赞同：0
> 
> 时间：2012-11-05T23:30:19.300
> 
> 标签：php, session

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:34:37.253

只需将您的第三行更改为

```
if (isset($_SESSION['overview_id'])){ 
```

而是删除第二行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:34:37.890

您在检查之前设置了 session_id，因此在将其设置为另一个变量之前，它始终必须至少分配默认值，所以最好使用它

```
if(isset($_SESSION["overview_id"])){
    header("Location: account.php");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T23:35:59.660

就您提供的代码而言：

```
<?php 
session_start();

if(isset($_SESSION["overview_id"])){
    header("Location: account.php");
}

?> 
```

这将解决问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T23:37:12.440

since `$_SESSION["overview_id"]` is not set, then `$sess = $_SESSION["overview_id"];` will fail. This is how you have to do your test:

```
<?php session_start();

    if (isset($_SESSION["overview_id"])) {
        header("Location: account.php");
    }
?> 
```

# objective-c - 限制社交分享选项并为每项服务设置自定义消息

> ID：13242094
> 
> 赞同：1
> 
> 时间：2012-11-05T23:30:33.707
> 
> 标签：objective-c, ios, share, social-networking

我即将实现一个调用默认模式共享活动视图的共享按钮。

这是我到目前为止所得到的。

```
NSString *textToShare = [NSString stringWithFormat:@"Looking forward to meet you at %@",[eventItemObject eventName]];;
NSURL *url = [eventItemObject eventWebsiteURL];
NSArray *activityItems = [[NSArray alloc]  initWithObjects:textToShare,url,nil];

UIActivity *activity = [[UIActivity alloc] init];
NSArray *applicationActivities = [[NSArray alloc] initWithObjects:activity, nil];
UIActivityViewController *activityVC =
[[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:applicationActivities];

[self presentViewController:activityVC animated:YES completion:nil]; 
```

当我按下共享按钮时会调用它。

挑战：

1.  将共享选项限制为 Facebook、Twitter、邮件等（现在还显示复制到剪贴板和微博）
2.  为每种共享方法分配自定义共享消息/字符串。（现在*textToShare*字符串用于所有服务）

经过一些研究，我认为这可以使用新的 SLComposeViewController（在 iOS6 中）来完成，但我不确定在哪里/如何正确调用它。感谢任何实用的建议或示例！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T00:37:36.087

您可以使用 activityViewController 指定不显示哪些活动`setExcludedActivityTypes:`。例子：

```
[activityVC setExcludedActivityTypes:[NSArray arrayWithObjects:
                                                     UIActivityTypeMessage,UIActivityTypeCopyToPasteboard,
                                                     UIActivityTypeAssignToContact,UIActivityTypePostToWeibo,
                                                     UIActivityTypePrint,UIActivityTypeSaveToCameraRoll,
                                                     nil]]; 
```

至于将特定内容发送到不同的活动，我花了最后一天左右的时间试图弄清楚如何做到这一点。如果/当我弄清楚时，我会更新这篇文章以包含此信息。

# c++ - 为什么要嵌入脚本语言？

> ID：13242098
> 
> 赞同：9
> 
> 时间：2012-11-05T23:30:46.053
> 
> 标签：c++, python, lua

我现在正在学习 C++，我听说过很多关于嵌入式脚本语言的知识。我想象的完全不同。

我想我会用 C++ 编写我所有的性能密集型函数，并用 Lua 或 Python 等脚本语言调用它们。

但似乎情况正好相反。-> 用 Lua/Python 编写函数并用 C 代码调用它们。

**在 C++ 中嵌入一种语言而不是在 C++ 中编写 API 并用另一种语言调用这些函数有什么优势？**

例子：

```
// function in c++
int expensiveFunction(){
  return 1;
} 
```

然后在 Python 中，我将调用此函数，我将获得 C++ 的性能，但可以在运行时进行更改，这要归功于 Python 的运行时解释器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T23:37:15.440

实际上，很多游戏引擎喜欢通过嵌入 Lua 或 Python 来构建引擎的接口。这样做有以下好处：

*   非程序员可以与引擎交互。
*   您不需要为较小的脚本更改重新编译。
*   脚本中的错误可能不会使整个系统崩溃。

对于想要脚本语言的灵活性但又想要 C++ 的性能的项目，C++ 作为后端非常有用。我还没有听说过使用 C++ 作为前端，使用脚本语言作为后端的项目。

**API 风格**

我们在我公司的软件中使用这种风格。我们通过 Windows DLL 公开 API，大多数语言都可以轻松调用该 API。我们特别支持 VB 和 VBA。当后端不受脚本制作者的控制时，这非常棒。但是，很难从脚本制作者的角度调试出现的问题。

好处

*   强解耦
*   可从不同语言访问

缺点

*   难以调试 2 个进程

**嵌入式风格**

该软件实际上将脚本解释器嵌入到软件中。通过这种方式，您可以公开功能，就好像它们是本机功能一样。在这种风格中，脚本制作者和后端程序员通常在同一家公司。传统软件也可以使用它来允许其他人扩展应用程序的功能。如果他们共享源代码，您可以更轻松地调试脚本引起的问题。该应用程序还负责何时以及如何启动您的脚本。但是，为了支持其他语言，应用程序开发人员必须嵌入其他解释器。

好处

*   更强的耦合
*   更容易调试一个进程

缺点

*   只能通过批准的语言访问

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T02:00:09.533

真的，任何一种方法都可以正常工作。问题是哪种方法更适合您的特定应用。

例如，编写性能密集型代码作为语言的扩展非常适用于您希望它感觉就像有人正在使用脚本语言中的较小库的应用程序。如果您想为包含在 Python 应用程序中的图形渲染提供高性能 API，这就是您要走的路。

另一方面，如果您有一个几乎完全用 C++ 编写的引擎（例如游戏引擎），并且您想提供一种简单的方法来连接到游戏引擎*而无需重新编译*，您可以嵌入解释器。这就是为什么 geme 引擎经常用脚本语言编写例如 AI 或行为挂钩：例如，更改机器人的“响应时间”，您可以*立即看到差异，有时甚至无需重新启动游戏*。

这完全取决于哪一方“更大”的意图，但我相信你可以使用 Lua 或 Python 来做这两种方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T23:33:29.770

脚本在运行时编译，而主要语言将在编译时编译。这将使使用大型代码库变得相对容易，因为您不必编译整个项目来更新简单的脚本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T23:51:36.993

一个原因可能是你想使用一个 C++ 框架，它带来了它自己的主要功能（并迫使你将它用作程序的主要功能）。

在我看来，这通常是一个糟糕的框架设计——在一个程序中使用多个这样的框架并不容易......

这同样适用于一个程序中的多种脚本语言：只有一种语言可以提供主要功能。必须嵌入所有其他语言。

注意：使用线程，您可以获得“多个主要功能”之类的东西。好吧，并不是真正的多个主要功能。但是有多个事件处理循环。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-06T02:11:52.133

我曾经将 Python 嵌入到机器人控制器中。控制器管理着一个处理计算机芯片晶片的机器人，它还控制着各种其他设备。客户可以编写一个 Python 程序来执行诸如跟上晶片位置、开门、开关灯、读取开关等操作。或者它可以从串行线路或以太网读取指令并将其转换为动作. 当然，机器人的精细控制是在 C++ 级别处理的，在实时操作系统上以最紧迫的优先级运行。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-06T02:58:52.380

除了性能、重新编译、可维护性等考虑因素之外，另一个原因是代码安全性。

Compiled language like c/c++ is *harder* (not impossible) for others to know your exact algorithm without source code, while scripts are (apparently) *easier* to know its logic because they are there to compile at runtime.

# python - 如何使用 python 内置的 map 和 reduce 函数计算字符串中的字母频率

> ID：13242103
> 
> 赞同：3
> 
> 时间：2012-11-05T23:31:01.387
> 
> 标签：python, map, reduce, frequency-distribution

我想使用 pythons map 和 reduce 内置函数计算字符串中字母的频率。谁能提供一些关于我如何做到这一点的见解？

到目前为止我得到了什么：

```
s = "the quick brown fox jumped over the lazy dog"

# Map function
m = lambda x: (x,1)

# Reduce
# Add the two frequencies if they are the same
# else.... Not sure how to put both back in the list
# in the case where they are not the same.
r = lambda x,y: (x[0], x[1] + y[1]) if x[0] == y[0] else ????

freq = reduce(r, map(m, s)) 
```

当所有字母都相同时，这很有效。

```
>>> s
'aaaaaaa'
>>> map(m, s)
[('a', 1), ('a', 1), ('a', 1), ('a', 1), ('a', 1), ('a', 1), ('a', 1)]
>>> reduce(r, map(m, s))
('a', 7) 
```

当有不同的字母时，如何让它正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T23:40:10.047

暂时回避关于您的代码的问题，我将指出，一种常用的（也是最快的）计算事物的方法是使用集合模块中的 Counter 类。以下是它在 Python 2.7.3 解释器中的使用示例：

```
>>> from collections import Counter
>>> lets=Counter('aaaaabadfasdfasdfafsdff')
>>> lets
Counter({'a': 9, 'f': 6, 'd': 4, 's': 3, 'b': 1})
>>> s = "the quick brown fox jumped over the lazy dog"
>>> Counter(s)
Counter({' ': 8, 'e': 4, 'o': 4, 'd': 2, 'h': 2, 'r': 2, 'u': 2, 't': 2, 'a': 1, 'c': 1, 'b': 1, 'g': 1, 'f': 1, 'i': 1, 'k': 1, 'j': 1, 'm': 1, 'l': 1, 'n': 1, 'q': 1, 'p': 1, 'w': 1, 'v': 1, 'y': 1, 'x': 1, 'z': 1}) 
```

`addto(oldtotal,newitem)`要使用 reduce，请定义一个添加并`newitem`返回`oldtotal`新总数的辅助函数。总数的初始值设定项是一个空字典，`{}`. 这是一个解释的例子。请注意，get() 的第二个参数是当键不在字典中时使用的默认值。

```
 >>> def addto(d,x):
...     d[x] = d.get(x,0) + 1
...     return d
... 
>>> reduce (addto, s, {})
{' ': 8, 'a': 1, 'c': 1, 'b': 1, 'e': 4, 'd': 2, 'g': 1, 'f': 1, 'i': 1, 'h': 2, 'k': 1, 'j': 1, 'm': 1, 'l': 1, 'o': 4, 'n': 1, 'q': 1, 'p': 1, 'r': 2, 'u': 2, 't': 2, 'w': 1, 'v': 1, 'y': 1, 'x': 1, 'z': 1} 
```

下面显示的代码打印了几种方法中每一种 1000 次传递的执行时间。在带有两个不同字符串的旧 AMD Athlon 5000+ Linux 3.2.0-32 Ubuntu 12 系统上执行时，`s`它会打印：

```
String length is 44   Pass count is 1000
horsch1 : 0.77517914772
horsch2 : 0.778718948364
jreduce : 0.0403778553009
jcounter: 0.0699260234833
String length is 4931   Pass count is 100
horsch1 : 8.25176692009
horsch2 : 8.14318394661
jreduce : 0.260674953461
jcounter: 0.282369852066 
```

（reduce 方法的运行速度略快于 Counter 方法。）时序代码如下。它使用[timeit](http://docs.python.org/2/library/timeit.html#module-timeit)模块。在这里的代码中，第一个参数`timeit.Timer`是要重复计时的代码，第二个参数是设置代码。

```
import timeit
from collections import Counter
passes = 1000

m1 = lambda x: [int(ord(x) == i) for i in xrange(65,91)]

def m2(x):
    return [int(ord(x) == i) for i in xrange(65,91)]

def es1(s):
    add = lambda x,y: [x[i]+y[i] for i in xrange(len(x))]
    freq = reduce(add,map(m1, s.upper()))
    return freq

def es2(s):
    add = lambda x,y: [x[i]+y[i] for i in xrange(len(x))]
    freq = reduce(add,map(m2, s.upper()))
    return freq

def addto(d,x):
    d[x] = d.get(x,0) + 1
    return d

def jwc(s):
    return Counter(s)

def jwr(s):
    return reduce (addto, s, {})

s = "the quick brown fox jumped over the lazy dog"
print 'String length is',len(s), '  Pass count is',passes
print "horsch1 :",timeit.Timer('f(s)', 'from __main__ import s, m1,     es1 as f').timeit(passes)
print "horsch2 :",timeit.Timer('f(s)', 'from __main__ import s, m2,     es2 as f').timeit(passes)
print "jreduce :",timeit.Timer('f(s)', 'from __main__ import s, addto,  jwr as f').timeit(passes)
print "jcounter:",timeit.Timer('f(s)', 'from __main__ import s, Counter,jwc as f').timeit(passes) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T03:33:04.783

`ord()`通常给出ASCII码。我的方法计算每个索引对应于字母表中该位置的字母的字母的频率。由于您将字符串大写，因此此方法不区分大小写。

```
s = "the quick brown fox jumped over the lazy dog"

# Map function
m = lambda x: [ord(x) == i for i in xrange(0,26)]

add = lambda x,y: [x[i]+y[i] for i in xrange(len(x))]
freq = reduce(add,map(m, s.upper())) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T04:00:56.563

您还可以使用`defaultdict`：

```
>>> from collections import defaultdict
>>> d = defaultdict(int)
>>> s = 'the quick brown fox jumped over the lazy dog'
>>> for i in s:
...    d[i] += 1
...
>>> for letter,count in d.iteritems():
...    print letter,count
...
  8 # number of spaces
a 1
c 1
b 1
e 4
d 2
g 1
f 1
i 1
h 2
k 1
j 1
m 1
l 1
o 4
n 1
q 1
p 1
r 2
u 2
t 2
w 1
v 1
y 1
x 1
z 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-14T22:34:27.137

您还可以使用 s.count 方法：

```
{x: s.count(x) for x in set(s)} 
```

请注意，我曾经`set(s)`只计算一次字符串中每个字母的频率。这是我机器上的测试结果：

```
String length is 44   Pass count is 1000
horsch1  : 0.317646980286
horsch2  : 0.325616121292
jreduce  : 0.0106990337372
jcounter : 0.0142340660095
def_dict : 0.00750803947449
just_dict: 0.00737881660461
s_count  : 0.00887513160706

String length is 4400   Pass count is 100
horsch1  : 3.24123382568
horsch2  : 3.23079895973
jreduce  : 0.0944828987122
jcounter : 0.102299928665
def_dict : 0.0341360569
just_dict: 0.0643239021301
s_count  : 0.0224709510803 
```

这是一个测试代码：

```
import timeit
from collections import Counter, defaultdict
passes = 100

m1 = lambda x: [int(ord(x) == i) for i in xrange(65,91)]

def m2(x):
    return [int(ord(x) == i) for i in xrange(65,91)]

def es1(s):
    add = lambda x,y: [x[i]+y[i] for i in xrange(len(x))]
    freq = reduce(add,map(m1, s.upper()))
    return freq

def es2(s):
    add = lambda x,y: [x[i]+y[i] for i in xrange(len(x))]
    freq = reduce(add,map(m2, s.upper()))
    return freq

def addto(d,x):
    d[x] = d.get(x,0) + 1
    return d

def jwc(s):
    return Counter(s)

def jwr(s):
    return reduce (addto, s, {})

def def_dict(s):
    d = defaultdict(int)
    for i in s:
        d[i]+=1
    return d

def just_dict(s):
    freq = {}
    for i in s:
        freq[i]=freq.get(i, 0) + 1
    return freq

def s_count(s):
    return {x: s.count(x) for x in set(s)}

s = "the quick brown fox jumped over the lazy dog"*100
print 'String length is',len(s), '  Pass count is',passes
print "horsch1  :",timeit.Timer('f(s)', 'from __main__ import s, m1,     es1 as f').timeit(passes)
print "horsch2  :",timeit.Timer('f(s)', 'from __main__ import s, m2,     es2 as f').timeit(passes)
print "jreduce  :",timeit.Timer('f(s)', 'from __main__ import s, addto,  jwr as f').timeit(passes)
print "jcounter :",timeit.Timer('f(s)', 'from __main__ import s, Counter,jwc as f').timeit(passes)
print "def_dict :",timeit.Timer('f(s)', 'from __main__ import s, defaultdict, def_dict as f').timeit(passes)
print "just_dict:",timeit.Timer('f(s)', 'from __main__ import s, just_dict as f').timeit(passes)
print "s_count  :",timeit.Timer('f(s)', 'from __main__ import s, s_count as f').timeit(passes) 
```

# xamarin.ios - MonoDevelop 中的上下文相关 SDK 帮助

> ID：13242106
> 
> 赞同：2
> 
> 时间：2012-11-05T23:31:15.427
> 
> 标签：xamarin.ios, monodevelop

当我使用 Visual Studio 时，当光标位于方法上时，我可以按 F1 功能键，并且将显示该方法的相关 MSDN 文档。我目前正在使用 MonoDevelop/MonoTouch 开发一个 iPhone 应用程序，能够做同样的事情真的很有用。MonoDevelop 是否提供此功能，还是我需要使用浏览器搜索 SDK 文档？我用谷歌搜索，我发现这种行为的唯一参考是按 Command-Quote，它在我的系统上没有任何作用。有没有提供更好体验的替代方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T03:07:32.693

是的，但是 Mac 上的快捷方式是 Cmd-Opt-？（即美国键盘上的 Cmd-Opt-Shift-/）。如果需要，可以在首选项对话框中将其重新绑定到另一个键。

# django - Django TestCase 中的 client 和 client.Client 到底有什么区别？

> ID：13242112
> 
> 赞同：1
> 
> 时间：2012-11-05T23:31:30.950
> 
> 标签：django, testing

我对阅读文档的理解是这样的：

1.  client 是 TestCase 的子类。当我们运行时`manage.py test`，会为每个以“test_”开头的方法创建一个 SimpleTest 类的实例（继承自 TestCase）。这是`self`.
2.  客户端是客户端的子类。我们可以创建新的客户端实例，有时这样做会很有帮助。
3.  然而不知何故，当我们键入 时`self.client`，我们指的是在创建 TestCase 时实例化的特定客户端，而**不是**在 TestCase 下一层的客户端类。

它是否正确？如果是这样，这是怎么回事 - 与超类有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:07:40.803

如果我正确理解您的问题和[文档](https://docs.djangoproject.com/en/dev/topics/testing/#django.test.TestCase.client)。提供该`client`属性是为了方便每个测试都可以访问 `from django.test.client import Client`Client 实例。

你的第一个问题：

1.  client 是 TestCase 的子类。当我们运行 manage.py 测试时，我们的 SimpleTest 类（继承自 TestCase）的实例会为每个以“test_”开头的方法创建。这是自我。

从[源头](https://github.com/django/django/blob/master/django/test/client.py#L327)看起来 Client 根本不是 TestCase 的子类。

```
class Client(RequestFactory):
    """
    A class that can act as a client for testing purposes. 
```

从源头我看不到哪里？Client 类正在被实例化并附加到 TestCase 实例，但它在某个地方。

Django 是完全开源的，所以只要有一些空闲时间，就很容易追踪事情的发生方式和发生的地点。 [https://github.com/django/django](https://github.com/django/django) 遵循导入路径并四处寻找可以找到所有答案

# c# - 无法在 OnActionExecuting(ActionExecutingContext filterContext) 下访问 User.Identity

> ID：13242114
> 
> 赞同：9
> 
> 时间：2012-11-05T23:31:36.363
> 
> 标签：c#, .net, asp.net-mvc, authorization, authorize-attribute

我不确定我错过了什么，但我真的无法 `User.Identity`参考`OnActionExecuting(ActionExecutingContext filterContext)`

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Web.Security;
using System.Web.Routing;

.....

    public class RealUserAttribute : ActionFilterAttribute
    {
            public override void OnActionExecuting(ActionExecutingContext filterContext)
            {
                 /// if (User.Identity.IsAuthenticated) 
```

任何线索如何解决它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-05T23:39:22.867

我找到了解决方案。

它应该是

```
filterContext.HttpContext.User.Identity.IsAuthenticated 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-05T23:44:17.433

我相信您应该使用 AuthorizeAtribute 而不是 ActionFilter。尝试这样的事情：

```
using System.Web;
using System.Web.Mvc;

public class AuthorizeUser : AuthorizeAttribute
{
    public override void OnAuthorization(AuthorizationContext filterContext)
    {
        var id = filterContext.RequestContext.HttpContext.User.Identity;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-27T11:34:48.630

```
filterContext.RequestContext.HttpContext.Request.IsAuthenticated 
```

作品！并且无需检查 id User 或 User.Identity 是否为空

# html - 如何将大学个人网页重定向到内部 ip

> ID：13242115
> 
> 赞同：0
> 
> 时间：2012-11-05T23:31:40.067
> 
> 标签：html, redirect, webserver

我们有一个由我们部门管理的网络服务器，我们每个人都有一个个人网络空间网址，例如：

[http://students.university.edu/myusername](http://students.university.edu/myusername) (1)

我们可以访问我们的 webfiles 文件夹并编辑 index.html 并获得其他数据。我认为我们的部门网络服务器也安装了 php 服务器，因此我们也可以制作一个 php 网站。

但是我想在我实验室的机器上设置一个网络服务器，并将世界各地任何外部客户端对上述（1）我个人网络空间的任何访问重定向到我本地机器上的网络服务器。换句话说，我不想使用由我们部门 IT 管理的网络服务器，因为基本上我需要访问我计算机上的文件。正如您可能注意到的，我的机器的 ip 在我们的基础设施中是本地的，从外部是不可见的。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:38:09.480

在您的服务器上的 .htacces 文件中找到这篇文章，添加

命令拒绝，允许拒绝所有允许来自 192.168.0.0/24

这应该阻止除 ips 192.168.0.0 到 192.168.0.24 上的人以外的所有人

当然，如果你没有 .htacces 文件，你应该，你必须在文本编辑器中创建文件，只需调用它 .htaccess 没有扩展名

希望这可以帮助

# java - 打开文件并读取 Double 数据

> ID：13242116
> 
> 赞同：0
> 
> 时间：2012-11-05T23:31:44.960
> 
> 标签：java

试图从具有不同内容的文件中读取双重数据。例如，如果它是双倍，那么消息应该是“双倍数是 23.5”。如果它不是双数，则消息应该是“63 不是双数”。文件内容是

97.9

100.1

三

六十三

77

12.4

3002.4

76

凉爽的

34.6

就是这个

…………

我编写的代码打开文件并扫描下一行但似乎无法正常工作。

```
class ReadDouble 
 {

 Scanner scan = new Scanner(System.in);

try

{

    File textFile = new File ("doubleData.txt");
    Scanner scanFile = new Scanner (textFile);
    String str = scan.nextLine();

    while(scanFile.hasNextLine())
    {

        double num = Double.parseDouble(str);
        if(str == num)
        {
            System.out.println("Double number is" + str);
        }

    }//end while

}//end try

catch (NumberFormatException nfe)
{
   System.out.println(str + "Is not a Double number");
} 
```

}

}//结束类

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T23:35:18.893

您的 try-catch 应该在 while 循环内，否则它将在第一个异常中出现，其余行将被忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:36:59.193

鉴于您的文件格式，我不会打扰扫描仪。只需阅读每一行，将其传递给 Double.valueOf(String) 并在它不是双精度时捕获异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T23:48:14.360

首先，您应该`String str = scan.nextLine();`在循环内调用，否则您只会阅读第一行。此外，您的`try / catch`块应该被包裹`double num = Double.parseDouble(str);`在循环中，否则在遇到第一个非双精度后`while`您将不会再次调用。`scan.nextLine()`

最后，你不应该这样做`if(str == num)`，因为这总是错误的。如果`Double.parseDouble(str)`不抛出异常，则它包含在该行上找到的双精度。

这是一个从标准中读取的解决方案：

```
import java.util.Scanner;

public class ReadDouble {

    public static void main(String[] args){
        Scanner scan = new Scanner (System.in);

        while(scan.hasNextLine()){
        String str = scan.nextLine();

        try {
            num = Double.parseDouble(str);
            System.out.println("Double number is " + num);
        } catch (NumberFormatException nfe) {
            System.out.println(str + " is not a Double number");
        }       
    }
}
} 
```

另一种选择是使用`Scanner`来查看下一个元素是否是 a`double`如果它是使用读取它，`nextDouble()`否则使用读取`nextLine()`。

# facebook - Facebook 打开图形 api 缺少提要

> ID：13242121
> 
> 赞同：0
> 
> 时间：2012-11-05T23:32:19.393
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我使用 Facebook 的 Open Graph API 通过请求以下内容来检索特定用户的提要：

```
feed?ids=<list_of_comma_seperated_ids> 
```

这会返回我在 Facebook 网站上看到的几乎所有提要。然而，一些提要（主要是状态和照片的点赞）丢失了，尽管丢失的提要是公开的，任何 Facebook 用户都可以查看。

使用 fql 查询流表时也不会返回这些字段。
有没有办法获得那些丢失的提要？

谢谢

# c++ - 运行时用户输入解析

> ID：13242126
> 
> 赞同：2
> 
> 时间：2012-11-05T23:32:46.650
> 
> 标签：c++, parsing, runtime

我正在尝试创建一个运行时解析器，它可以识别给定语言的关键字或用于语法突出显示。我知道如何设计和实现一个简单的有限状态机，但问题是实时解析用户输入。从控制台很简单，我只需在用户按下回车键后调用 getline() 并逐个字符地遍历字符串。但在 GUI 环境中，我无法弄清楚如何实时解析。现在，我首先在 Metro 风格应用程序中创建一个简单的文本框，并通过触发 textchanged 事件来获取用户输入，将其存储到字符串中，然后将其发送到词法分析器进行解析。

```
void InterpreterMetro::MainPage::EditWindow_TextChanged(Platform::Object^ sender, Windows::UI::Xaml::Controls::TextChangedEventArgs^ e)
{
    String ^ input = "";
    input = EditWindow -> Text;

    // Send the string to the lexer for parsing
    m_lexer.Initialize( input )
} 
```

在我的词法分析器中，我执行以下操作：

```
void Lexer::Initialize( std::wstring input )
{
    // Store the current input string
    m_input = input;

    // Get the next character in the input
    NextCharacter();

    // Analyze the current input character
    Scan();
} 
```

在我的扫描函数中，我有一个由 switch 语句实现的简单有限状态机

```
Token Lexer::Scan()
{
    State = Initial;

    while( State != Exit )
    {
        switch( State )
        {
            case Initial:
                {
                    if( m_peek == '>' ){ State = Greater; }
                    else{ State = Exit; }
                } break;

            case Greater:
                {
                    NextCharacter();
                    if( m_peek == '='){ State = GreaterEqual; }
                    else{ return m_token.GREATER; }
                } break;

            case GreaterEqual:
                {
                    NextCharacter();
                    return m_token.GREATEREQUAL;
                } break;
        }
    }
} 
```

我遇到的主要问题是当我调用函数 NextCharacter() 来确定它是 > 还是 >= 时，字符会通过开关并绕过 nextcharacter 函数，因为它不等待下一个输入。但我不知道如何解决这个问题。这是我的 NextCharacter() 函数：

```
void Lexer::NextCharacter()
{
    std::wstring::iterator iterator = m_input.begin();

    for( iterator; iterator != m_input.end(); ++iterator )
    {
        m_peek = *iterator;
    }
} 
```

我一直在寻找一种解决方案，了解如何实时收集用户输入并对其进行迭代，以便在文本编辑器等环境中的运行时解析器中使用。我发现的一切都是基于控制台的，但基于 GUI 的却大不相同。谁能指出我正确的方向，最好的方法是什么？有没有更好的方法让用户在运行时解析器中输入？我这样做的方式完全错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T01:00:45.200

我认为您的 NextCharacter() 唯一有问题的是扫描整个输入字符串，始终返回最后一个字符。您最好在词法分析器中存储一个“当前”迭代器，并在它到达输入字符串的 end() 时停止。

在类词法分析器中：

```
class Lexer
{
   ... your current code...

private:
    std::wstring m_input;
    std::wstring::iterator m_it;
};

Lexer::Lexer()
   : m_input("")
   , m_it(m_input.end())
{
}

void Lexer::Initialize(const std::wstring& input)
{
    m_input = input;
    m_it = m_input.begin();
}

bool Lexer::NextCharacter()
{
    if (m_it != m_input.end())
    {
        m_peek = *m_it++;
        return true;
    }
    return false;
} 
```

类似的东西。在输入字符串副本旁边保留当前输入的迭代器。我在网页上敲了这个，所以肯定会有错误，但我希望你明白。

# python - 如何获取输入字符的位置？

> ID：13242130
> 
> 赞同：0
> 
> 时间：2012-11-05T23:33:00.467
> 
> 标签：python, events, user-interface, wxpython, textctrl

我有一个应用程序要求用户输入（wx Python）。我想控制 TextCtrl 里面的内容，所以我添加了事件：wx.EVT_CHAR。该功能正常工作，除了我想要当前输入的字符的位置。

假设我只希望一个角色在一个地方，我需要它的位置。那是我的概率。

```
 def handle_keypress(self, event, entry):
        key = event.GetKeyCode()
        keycode = [1,2,3,4,5,6] #example

        bool = False
        for char in keycode:
            if key == char:
                bool = True
                break

        if bool == True:
            event.Skip() 
```

thx，我希望你们能帮助我！

PS：对不起我的英语不好:(

编辑：问题解决了！

我虽然问题出在EVT_CHAR：[http ://www.wxpython.org/docs/api/wx.KeyEvent-class.html](http://www.wxpython.org/docs/api/wx.KeyEvent-class.html)

但事实并非如此，它在 TextCtrl 中：[http ://www.wxpython.org/docs/api/wx.TextCtrl-class.html](http://www.wxpython.org/docs/api/wx.TextCtrl-class.html)

GetInsertionPoint() 方法有效！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:42:04.137

```
self.text_ctrl.GetInsertionPoint() 
```

我想这就是你想要的

在您的示例中，“CCC”将始终返回 0，但这应该返回克拉的实际位置

# html - 如何使用 RDFa 编写/格式化 HTML 以便在源代码中易于人类阅读？

> ID：13242133
> 
> 赞同：1
> 
> 时间：2012-11-05T23:33:10.087
> 
> 标签：html, readability, code-readability, rdfa, human-readable

添加 RDFa 非常有趣，但往往会使我的源代码几乎无法阅读（即使编辑器有不错的语法突出显示）。例如：

```
<div id="me" prefix="foaf: http://xmlns.com/foaf/0.1/ schema:
http://schema.org/Person" typeof="foaf:Person schema:Person"
resource="http://carlboettiger.info#me"> <p> <img property="foaf:depiction"
src="assets/img/carlboettiger.png" alt="Photo of Carl Boettiger"
style="float: right; margin: 10px 10px"/>
I am  <a property="foaf:homepage schema:url"
href="http://carlboettiger.info"><span property="foaf:name
schema:name"><span property="foaf:givenName schema:givenName">Carl</span>
<span property="foaf:familyName schema:familyName">Boettiger</span></span></a>, <span
property="schema:jobTitle">a graduate student</span> with <span property="foaf:knows"><span
typeof="foaf:Person"><span property="foaf:name"><a property="foaf:homepage"
href="http://two.ucdavis.edu/%7Eme">Alan Hastings</a>
</span></span></span> in the <a property="foaf:workplaceHomepage"
href="http://www-eve.ucdavis.edu/eve/pbg/">Population Biology</a>
Ph.D program at<span property="schema:affiliation">UC Davis</span>,
working on <span property="foaf:interest">regime shifts</span>
in <span property="foaf:interest">ecology</span> and <span
property="foaf:interest">evolution</span>. Such shifts mark the most
dramatic events in <span property="foaf:interest">complex systems</span> 
```

我一般不喜欢密集标记，因此我经常更喜欢用 markdown 编写，但这在添加 RDFa 标记的上下文中似乎是不可能的，例如这个例子。

似乎有人可能会利用空格来使其更具人类可读性。是否有任何现有的工具或约定？（下面的示例只是来自`!fmt`vim 中的自动换行，通常看起来不错，但在这种情况下似乎不知所措）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T20:39:19.003

*   您应该更喜欢使用广泛传播的本体而不是复制已经具有等价物的类或谓词（或者只产生 owl:equivalentClass 或 owl:sameAs 关系）
*   RDFa 1.1 中有许多您没有使用过的快捷方式，例如 vocab 或 rel 属性
*   您可以使用缩进来美化标记

据此，您的页面可能如下所示：

```
<body prefix="schema: http://schema.org/"
      vocab="http://xmlns.com/foaf/0.1/">
    <p typeof="Person" resource="http://carlboettiger.info#me">
    <img property="depiction" style="float: right; margin: 10px 10px"
         src="assets/img/carlboettiger.png" alt="Photo of Carl Boettiger" />
    I am <a property="homepage schema:url" href="http://carlboettiger.info">
        <span property="name"><span property="givenName">Carl</span> <span property="familyName">Boettiger</span></span>
    </a>, a <span property="schema:jobTitle">graduate student</span> with
    <span rel="knows" typeof="Person">
        <span property="name"><a property="homepage" href="http://two.ucdavis.edu/%7Eme">Alan Hastings</a></span>
    </span> in the <a property="workplaceHomepage" href="http://www-eve.ucdavis.edu/eve/pbg/">Population Biology</a>
    Ph.D program at <span property="schema:affiliation">UC Davis</span>, working on
    <span rel="interest">
        <a href="http://en.wikipedia.org/wiki/Regime_shifts">regime shifts</a> in
        <a href="http://en.wikipedia.org/wiki/Ecology">ecology</a> and
        <a href="http://en.wikipedia.org/wiki/Evolution">evolution</a>.
        Such shifts mark the most dramatic events in <span>complex systems</span>
    </span>
    </p>
</body> 
```

# c++ - 二叉树：从文件崩溃中读取

> ID：13242136
> 
> 赞同：0
> 
> 时间：2012-11-05T23:33:30.810
> 
> 标签：c++

在测试了 insert 函数以及 swapSubTrees 和 printTree 函数之后，我终于让我的所有函数都可以工作了。现在我需要从一个文件创建一个二叉树，然后我让文件打开并读取文件的第一个整数，但是我的程序崩溃了。

有很多代码，我不想做一堵代码墙。我会发布我的重要部分，如果需要，我会提供其余的代码。

我的交换和打印功能是：

```
template<class elemType>
void bSearchTreeType<elemType>::printTree()
{
printTree(root);
}
template<class elemType>
void bSearchTreeType<elemType>::printTree(nodeType<elemType> *p)
{
if(p != NULL)
cout << p->info << endl;
printTree(p->lLink);
printTree(p->rLink);
}

template<class elemType>
void bSearchTreeType<elemType>::swapSubtrees(nodeType<elemType> * p)
{

 if (p != NULL)
  {

   if (p->lLink != NULL && p->rLink != NULL)
    {

      nodeType<elemType> * temp = p->lLink;
      p->lLink = p->rLink;
      p->rLink = temp;
      delete temp;
    }

  if (p->lLink != NULL && p->rLink == NULL)
   {
    swapSubtrees(p->lLink);
   }

 if (p->rLink != NULL && p->lLink == NULL)
  {
   swapSubtrees(p->rLink);
  }

 }
} 
```

我的主要程序是：

```
#include<iostream>
#include<fstream>
#include<cstdlib>
#include "binarySearchTree.h"

using namespace std;

int main()
{
bSearchTreeType<int>bt;
ifstream infile;

infile.open("binaryTree.txt");

if(!infile){
    cout<<"File not found"<<endl;
}

int tree;

while(infile>> tree)
{
    bt.insert(tree);
}

bt.swapSubtrees();

bt.printTree();
bt.swapSubtrees();

system("PAUSE");
return 0;

  } 
```

程序完全编译运行，开始打印从12开始的列表：

这是 binaryTree.txt 的内容：12 23 56 45 78 89 98 25 36 65 54

我有点困惑为什么它总是崩溃。有什么想法吗？当我手动构建列表时，程序不稳定。打印最后一项后，程序将挂起。现在它在尝试打印时挂起。我认为这是功能的问题。

非常感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T23:39:16.350

```
if (p->lLink != NULL && p->rLink != NULL)
   {

 nodeType<elemType> * temp = p->lLink;
  p->lLink = p->rLink;
  p->rLink = temp;
  delete temp;
} 
```

您正在删除指向 lLink.... 的指针，这意味着您正在删除整个 lLink 并可能试图在其他地方重新访问它？

处理这个问题的方法是将 temp 设置为 null 而不是删除。但这并不重要，因为 temp 是该块内的局部变量，它在 temp 设置为 null 后立即超出范围。

另一个在印刷中存在问题的潜在领域：-

```
 if(p != NULL)
    cout << p->info << endl;
    printTree(p->lLink);
    printTree(p->rLink); 
```

您需要大括号来包含 if 语句主体中的多个语句...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T23:41:58.907

我认为（不运行代码）的问题在于：

```
 delete temp; 
```

在交换三内。您正在复制指向 temp 的指针，而不是创建新的指针。没有必要删除它。由于内存分配的变幻莫测，您的程序有时可能会在不同的部分运行，有时会失败。

# google-app-engine - GWT 编译错误 - Restlet 相关？

> ID：13242140
> 
> 赞同：1
> 
> 时间：2012-11-05T23:33:52.043
> 
> 标签：google-app-engine, gwt, restlet

XXX 只是我需要保密的名字。

```
Compiling module com.XXX.XXX.XXX_Test
   Validating newly compiled units
      Ignored 12 units with compilation errors in first pass.
Compile with -strict or with -logLevel set to TRACE or DEBUG to see all errors.
   Scanning for additional dependencies: file:/D:/Eclipse/Indigo/Workspace/XXX%20Test/src/com/XXX/XXX/client/Restlet.java
      Computing all possible rebind results for 'com.wai.XXX.client.proxy.DonglesProxy'
         Rebinding com.XXX.XXX.client.proxy.DonglesProxy
            Checking rule <generate-with class='org.restlet.rebind.ClientProxyGenerator'/>
               [ERROR] Errors in 'file:/D:/Eclipse/Indigo/Workspace/XXX%20Test/src/com/XXX/XXX/client/proxy/DonglesProxy.java'
                  [ERROR] Line 11: No source code is available for type org.restlet.resource.ClientProxy; did you forget to inherit a required module?
               [ERROR] Unable to find type 'com.XXX.XXX.client.proxy.DonglesProxy'
                  [ERROR] Hint: Previous compiler errors may have made this type unavailable
                  [ERROR] Hint: Check the inheritance chain from your module; it may not be inheriting a required module or a module may not be adding its source path entries properly 
```

这是当我尝试对我的项目进行 GWT 编译时控制台告诉我的内容。我不明白的是，我已将“org.restlet.jar”包含在项目的构建路径中，并在 DonglesProxy 源代码中导入了以下内容：

```
import org.restlet.resource.ClientProxy;
import org.restlet.resource.Put; 
```

有人有什么想法吗？

我是 Java 和整个 Web 应用程序流程的新手，所以我的知识有点缺乏。这实际上是其他人尚未完成的项目，所以我在学习的同时尝试调试/理解其他人的代码......噩梦:(

任何帮助将不胜感激！

干杯凯夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T09:04:11.150

您必须使用：

*   导入 org.restlet。**客户端**.resource.ClientProxy；
*   导入 org.restlet。**客户端**.resource.Get；
*   导入 org.restlet。**客户端**.resource.Post；
*   导入 org.restlet。**客户端**.resource.Result；

定义代理；注意**“客户”**部分；

引用的导入必须是 GWT 分发的一部分；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:49:27.847

您必须将其添加到您的项目 xml 文件中。那就是 com.XXX.XXX.XXX_Test.gwt.xml 或类似的东西。您必须在此处添加此行，

```
<inherits name='org.restlet.whateverClass.xmlfilename />' 
```

这意味着您指向路径 org.restlet.whteverclass 中名为 xmlfilename.xml 的 xml 文件

例如，如果我使用 sencha ui 库 jar，我会添加，

```
<inherits name='com.sencha.gxt.ui.GXT' /> 
```

所以这里应该有一个名为 GXT.xml 的 xml 文件，位于路径 'com.sencha.gxt.ui'

# java - Maven Ant 任务 - 依赖项

> ID：13242142
> 
> 赞同：1
> 
> 时间：2012-11-05T23:33:59.623
> 
> 标签：java, maven, ant, build, maven-ant-tasks

我正在尝试将 ant 构建文件设置为用户 Maven 依赖项，我收到错误消息“无法创建任务或键入 urn:maven-artifact-ant:localRepository

```
 package uk.co.rrv;

import org.joda.time.DateTime;

public class Main {
    public static void main(String[] args) {
        DateTime dateTime = new DateTime();
        System.out.println("DateTime = " + dateTime);

        System.out.println("Plus 1 hour is " + dateTime.plusHours(1));
        System.out.println("Plus 10 minutes is " + dateTime.plusMinutes(10));
        System.out.println("Plus 60 seconds is " + dateTime.plusSeconds(60));

    }
} 
```

这是我的构建 xml 文件

```
<project name="TestBuild" basedir="." default="main" xmlns:artifact="antlib:maven.artifact.ant">

    <path id="maven-ant-tasks.classpath" path="Lib/maven-ant-tasks-2.1.3.jar" />
    <typedef resource="org/apache/maven/artifact/ant/antlib.xml"
             uri="antlib:org.apache.maven.artifact.ant"
             classpathref="maven-ant-tasks.classpath"/>

    <property name="src.dir"     value="src"/>
    <property name="build.dir"   value="build"/>
    <property name="classes.dir" value="${build.dir}/classes"/>
    <property name="jar.dir"     value="${build.dir}/jar"/>
    <property name="main-class"  value="uk.co.rrv.Main"/>

    <target name="clean">
        <echo>Initializing ....</echo>
        <delete dir="${build.dir}"/>
    </target>

    <target name="compile" depends="mvn-init">
        <echo>Compling ....</echo>
        <mkdir dir="${classes.dir}"/>
        <javac srcdir="${src.dir}" destdir="${classes.dir}" classpathref="maven-ant-tasks.classpath"/>
        <copy todir="${classes.dir}">
            <fileset dir="${log.dir}" excludes="**/*.java"/>
        </copy>
    </target>

    <target name="jar" depends="compile">
        <echo>Building Jar ....</echo>
        <mkdir dir="${jar.dir}"/>
        <jar destfile="${jar.dir}/${ant.project.name}.jar" basedir="${classes.dir}">
            <manifest>
                <attribute name="Main-Class" value="${main-class}"/>
            </manifest>
        </jar>
    </target>

     <target name="run" depends="jar">
        <echo>Execution ....</echo>
        <java fork="true" classname="${main-class}">
            <classpath>
                <path refid="classpath"/>
                <path location="${jar.dir}/${ant.project.name}.jar"/>
            </classpath>
        </java>
    </target>

    <target name="mvn-init" unless="compile.classpath" xmlns:artifact="urn:maven-artifact-ant">
        <typedef resource="org/apache/maven/artifact/ant/antlib.xml" uri="urn:maven-artifact-ant"
                 classpath="Lib/maven-ant-tasks-2.1.3   .jar"/>
        <condition property="maven.repo.local" value="${maven.repo.local}" else="${user.home}/.m2/repository">
            <isset property="maven.repo.local"/>
        </condition>
        <echo>maven.repo.local=${maven.repo.local}</echo>
        <artifact:localRepository id="local.repository" path="${maven.repo.local}"/>
        <artifact:pom file="pom.xml" id="maven.project"/>
        <artifact:dependencies pathId="compile.classpath" filesetId="compile.fileset" useScope="compile">
            <pom refid="maven.project"/>
            <localRepository refid="local.repository"/>
        </artifact:dependencies>
        <artifact:dependencies pathId="test.classpath" filesetId="test.fileset" useScope="test">
            <pom refid="maven.project"/>
            <localRepository refid="local.repository"/>
        </artifact:dependencies>
        <artifact:dependencies pathId="runtime.classpath" filesetId="runtime.fileset" useScope="runtime">
            <pom refid="maven.project"/>
            <localRepository refid="local.repository"/>
        </artifact:dependencies>
    </target>

    <target name="main" depends="clean,run"/>

</project> 
```

这是我的 pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <groupId>seamjpa</groupId>
    <artifactId>seamjpa</artifactId>
    <packaging>war</packaging>
    <version>1.0-SNAPSHOT</version>
    <name>seam-jpa</name>

    <repositories>
        <repository>
            <id>repository.jboss.org</id>
            <url>http://repository.jboss.org/maven2</url>
        </repository>
    </repositories>

    <dependencies>
             <dependency>
                <groupId>joda-time</groupId>
                <artifactId>joda-time</artifactId>
                <version>2.1</version>
            </dependency>

    </dependencies>

    <build>
        <finalName>${project.name}</finalName>
        <plugins>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <debug>true</debug>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <properties>
        <seam.version>2.2.0.GA</seam.version>
        <jsf.version>1.2_12</jsf.version>
        <richfaces.version>3.3.1.GA</richfaces.version>
        <slf4j.version>1.4.2</slf4j.version>
    </properties>

</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T10:55:46.030

修复对 maven-ant-tasks jar 的引用后，

```
-    <path id="maven-ant-tasks.classpath" path="Lib/maven-ant-tasks-2.1.3.jar" />
+    <path id="maven-ant-tasks.classpath" path="lib/maven-ant-tasks-2.1.3.jar" />

-        <javac ... classpathref="maven-ant-tasks.classpath"/>
+        <javac ... classpathref="compile.classpath"/>

-                <path refid="classpath"/>
+                <path refid="runtime.classpath"/>

-                 classpath="Lib/maven-ant-tasks-2.1.3   .jar"/>
+                 classpath="lib/maven-ant-tasks-2.1.3.jar"/> 
```

另请参阅文档中的[使用示例，包括](http://maven.apache.org/ant-tasks/usage.html)[通过 ant 引导](http://svn.apache.org/repos/asf/maven/maven-3/trunk/build.xml)可能有有用的示例。

# php - php get_browser 可能的值

> ID：13242147
> 
> 赞同：1
> 
> 时间：2012-11-05T23:34:35.827
> 
> 标签：php, browser

如果我使用 php get_browser()，“浏览器”键的可能值是什么？假设我选择返回一个数组。我需要通过开关确定它是哪个浏览器，但我在网上找不到列出可能值的任何地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T23:37:14.260

此列表由`browscap.ini`PHP 配置文件夹中的文件确定。您还可以使用您想要的任何浏览器名称添加您自己的`browscap.ini`文件。

看看文档：[http ://us1.php.net/get_browser](http://us1.php.net/get_browser)

# php - 检查用户名是否已经存在

> ID：13242150
> 
> 赞同：1
> 
> 时间：2012-11-05T23:34:49.910
> 
> 标签：php

我目前有我写的这段代码：

```
$username = $_POST['username'];
$password = $_POST['password'];
$rpassword = $_POST['rpassword'];
$usrip = $_SERVER['REMOTE_ADDR'];
$email = $_POST['email'];
$errors = array();
$checkUsername = $odb -> prepare("SELECT COUNT(*) FROM `users` WHERE `username` = :username");
$checkUsername -> execute(array(':username' => $username));
$countUsername = $checkUsername -> fetchColumn(0);
if ($checkUsername != 0)
{
$errors['Username is already taken'];
} 
```

然而，它似乎完全忽略了这一点，即使用户名相同（大写等），它仍然允许用户注册 2 个相同的用户。我的数据库如下所示：

[http://puu.sh/1mTcZ/9b2ff3b68f44b4cc486beacc2d2b88fd](http://puu.sh/1mTcZ/9b2ff3b68f44b4cc486beacc2d2b88fd)

我似乎根本无法让它工作。数据库结构如下：refined (dbname) > users (table) > username (row)

很感谢任何形式的帮助。

编辑：

经过一些更改，这就是我所拥有的，但是我似乎仍然遇到同样的问题。

```
$checkUsername = $odb->prepare("SELECT COUNT(*) FROM `users` WHERE LOWER(`username`) = :username");
$checkUsername -> execute(array(':username' => $username));
$countUsername = $checkUsername -> fetchColumn(0);
if ($checkUsername != 0)
{
$errors['Username is already taken'];
} 
```

用户名行现在也是 utf8_general_ci

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T23:54:54.080

好的，我会发表我的评论作为答案。

您的 IF 语句正在评估不正确的变量。它应该评估 $countUsername，而不是 $checkUsername。

此外，您似乎错误地初始化了您的错误数组。尝试：

```
if ($countUsername != 0)
{
    $errors[] = 'Username is already taken';
} 
```

我已经在我的数据库上对此进行了测试，并且可以正常工作。

```
Collation = latin1_general_cs    (cs = case sensitive) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:41:07.403

尝试将表排序规则设置为“utf8_general_ci”。您也可以将您的 sql 查询更改为

```
$checkUsername = $odb->prepare("SELECT COUNT(*) FROM `users` WHERE LOWER(`username`) = :username"); 
```

# windows - 如何从 Windows 服务获取前台窗口？

> ID：13242151
> 
> 赞同：0
> 
> 时间：2012-11-05T23:34:54.670
> 
> 标签：windows, service

我正在使用像这样的代码[获取活动窗口文本（并向其发送更多文本）](https://stackoverflow.com/questions/479548/get-active-window-text-and-send-more-text-to-it?rq=1)将键发送到前台窗口。当我从控制台运行它时，它工作得很好。当我从我的服务运行它时，GetForegroundWindow() 调用返回 0（零）。如何从我的服务中获取前台窗口句柄？

编辑：一些研究告诉我关于作为不同会话运行的服务 - 如果这与我的问题有关，我需要知道如何获取控制台（物理监视器）会话的前台窗口（如果存在）。

编辑#2：我的用例只涉及 XP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:30:50.193

如果您设置，那么在 XP GetForegroundWindow 将起作用

> 允许服务与桌面交互

服务属性中的复选框（登录选项卡）。这不适用于 Vista 和更新版本。

但是你不应该这样做，事实上你不应该从服务中调用 GetForegroundWindow，即使没有用户登录，服务也会运行，并且当有多个用户登录时它们也可以工作。

我不知道您为什么要从 Windows 服务执行此操作，但也许隐藏在托盘中的简单桌面应用程序可以解决问题。

# grammar - bnf 语法检查

> ID：13242152
> 
> 赞同：2
> 
> 时间：2012-11-05T23:35:02.787
> 
> 标签：grammar, bnf

有没有工具可以检查我的 bnf 语法？例如：

```
<assign>::=<var>=<expr>
<var>::=A|B|C
<expr>::=<expr>+<expr>
         |<var> 
```

根据我的 bnf 语法，A = B + C 是有效语句，而 A = B * C 不是。

是否有工具可以检查给定的语句是否有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T01:43:39.703

在我的 CS 课程中使用过[它](http://www.nongnu.org/bnf/)，我认为它几乎可以满足您的需求，即使用给定的语法验证语句。

# c++ - 我可以在另一个类的实例中显式调用对象的析构函数吗？

> ID：13242155
> 
> 赞同：0
> 
> 时间：2012-11-05T23:35:17.607
> 
> 标签：c++, class, object, destructor

我正在使用两个队列来实现一个堆栈作为练习。我在堆栈类的每个实例中都有两个队列对象。我希望堆栈的析构函数调用队列的析构函数。从网上看，析构函数的显式使用似乎并不常见，因为它们往往会被自动调用。我的代码：

```
template<class T>
class Stack {
// LIFO objects
   public:
      Stack(int MaxStackSize = 10);
      ~Stack();

      bool IsEmpty() const {return addS.IsEmpty();}
      bool IsFull() const {return addS.getSize()==maxSize;}

      Stack<T>& Add(const T& x);
      Stack<T>& Delete(T& x);
      void Print() const;
   private:
      LinkedQueue<T> addS;
      LinkedQueue<T> delS;
      int maxSize;
};

template<class T>
Stack<T>::Stack(int MaxStackSize)
{
   maxSize = MaxStackSize;
}

template<class T>
Stack<T>::~Stack()
{
   ~addS();
   ~delS();
}

template<class T>
class LinkedQueue {
// FIFO objects
    public:
        LinkedQueue() {front = rear = 0;} // constructor
        ~LinkedQueue(); // destructor
        bool IsEmpty() const
           {return ((front) ? false : true);}
        bool IsFull() const;
        T First() const; // return first element
        T Last() const; // return last element
        LinkedQueue<T>& Add(const T& x);
        LinkedQueue<T>& Delete(T& x);
      void Print() const;  // print the queue in order
      int getSize() const;

   private:
      Node<T> *front;  // pointer to first node
      Node<T> *rear;   // pointer to last node
};

template<class T>
LinkedQueue<T>::~LinkedQueue()
{// Queue destructor.  Delete all nodes.
   Node<T> *next;
   while (front) {
      next = front->link; 
      delete front; 
      front = next;
      }
} 
```

运行上面的代码会给我以下错误：

> stack.h: 在析构函数'Stack< T >::~Stack() [with T = int]': stackrunner.cc:9: 从这里实例化 stack.h:37: 错误: 不匹配调用'(LinkedQueue <int>)()'</p>

我是否错误地调用了析构函数？我不应该调用析构函数吗？调用类析构函数时是否会自动调用对象析构函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T23:37:13.870

Destructors are called automatically for you.

Calling a destructor on an already-destroyed-object is Undefined Behavior. It may crash, or lead to arbitrary results, or do real damage.

As a rule, *never* call a destructor explicitly (unless you have been using placement new to construct an object in existing storage).

# nservicebus - 如何取消延迟的 NServiceBus 消息？

> ID：13242158
> 
> 赞同：2
> 
> 时间：2012-11-05T23:35:27.500
> 
> 标签：nservicebus

假设我使用延迟消息功能在以后的某个时间点发送消息，但稍后我可能想取消该消息。

问题 1 - 进行原始`bus.Defer(...)`呼叫时，如何获取该消息的唯一标识符？我希望会有一个消息 id 或某种超时 id。

问题 2 - 没有直接调用 RavenDB 数据库，有没有办法查询总线以取回所有待处理的延迟消息？

问题 3 - 有什么方法可以取消延迟消息？我希望像`bus.CancelDeferred(messageid)`

是否有任何可用的，或者我可以使用任何其他机制来实现类似的结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T15:12:47.760

我有几次需要放弃延迟消息和未完成的回复，我通过在我的传奇中“增加相关 ID”来做到这一点。你没有提到 sagas，所以我不确定这个解决方案是否对你有用。但是，我确实认为它属于您要求的“任何其他机制”:)

看看这个例子——这里我有我的传奇的状态，除其他外，它包含一个自定义`CorrelationId`：

```
public class MySagaData : ISagaData
{
    // ... the usual stuff here

    public string CorrelationId { get; set; }
} 
```

然后，每次我推迟消息或请求某些内容时，我都会将推迟的消息和/或回复与相关 ID 的当前值相关联：

```
bus.Defer(time, new Something { CorrelationId = Data.CorrelationId });

bus.Send(new SomeRequest { CorrelationId = Data.CorrelationId }); 
```

因此在概念上将延迟消息和回复*与 saga 的当前状态相关联*。

然后，如果我想放弃所有未处理的消息，我只需将 saga 的相关 ID 重新设置为一个新值——我通常将该值设置为`somethingWithBusinessMeaning/timestamp`.

这样，被遗弃的消息将不会与任何 saga 实例相关联，实际上会被忽略。

是否有意义？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T08:55:09.233

1）目前没有办法做到这一点。如果您需要跟踪它们，您可以使用特定于应用程序的 id 添加自己的标题

2）不，你必须查询你提到的存储。那就是说这个的用例是什么？

3) 不，这是设计使然。鉴于您不能假设消息何时到达，您不能依赖超时被取消，因为延迟消息可能会卡在队列中并在您取消后立即处理。“取消”消息也可能会丢失。

简而言之：**无论如何，您的代码都需要准备好丢弃“无效”消息。**

# linux - 以简单的方式引导 Amazon Linux AMI

> ID：13242161
> 
> 赞同：1
> 
> 时间：2012-11-05T23:35:49.507
> 
> 标签：linux, amazon-ec2, amazon-web-services

当我的实例（Amazon Linux AMI）启动时，我想运行一个 python 程序（一个无限的 while 循环作为内部的侦听器）。我创建了一个简单的 shell 脚本，如下所示：

```
#!/bin/sh
python bootstrap.py > bootstrap.log 
```

然后我在每次实例启动时运行这个脚本的名称“ *`run_service.sh`*” 。*`/etc/rc.local`*但是这种简单的方法似乎不起作用，没有任何反应。

我发现 Amazon Linux AMI 是基于 Centos/Fedora，而不是 Ubuntu。该`cloud-init`选项似乎不太清楚，因为我需要将此实例捆绑到定制的 AMI 中。

那么，我怎样才能通过一种非常简单的方式避免像木偶/厨师等复杂的设置呢？

# emacs - Emacs auto-complete popup menu broken

> ID：13242165
> 
> 赞同：7
> 
> 时间：2012-11-05T23:36:04.143
> 
> 标签：emacs, autocomplete, elisp

I'm have reinstalled my emacs and now I'm using emacs v24.3.50 with `auto-complete` v1.4 and `popup.el` v0.5\. Unfortunately the popup "menu" of auto-complete is kinda broken (see attached screenshot).
The different items are not aligned along a commong vertical line [ignore the black overlay, that stems from CEDET and is probably meant to be placed on the right side next to the popup menu; the problem remains when disabling CEDET, so it is not related).

![example of error](../Images/25f156f66fad0f5980ceb4f704b45f32.png)

From what I can tell it looks like the extent of this "shift" between lines depends on how much the length of the strings differs. Also, when selecting a different suggestion using the arrow keys the horizontal shift of the lines changes a little (~few pixels) each time the mark is moved one line up/down.

I have uploaded the part of my `.emacs.d/init.el` that is used for configuring auto-complete [here](http://pastebin.com/jR0U4kcD).

Any suggestions on how to fix this?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T23:52:19.383

看来您正在使用比例字体，这会破坏叠加层左边缘的计算。

您可以尝试更改自动完成计算列的方式：

```
(setq popup-use-optimized-column-computation nil) 
```

您也可以更改为固定宽度的字体。

请注意，Emacs 的一些其他完成系统可以使用工具提示而不是覆盖，这样可以避免这个问题。

# php - Slideshow Caption, if empty keep previous on display

> ID：13242167
> 
> 赞同：0
> 
> 时间：2012-11-05T23:36:07.997
> 
> 标签：php, jquery, wordpress, slideshow, caption

This probably sounds unusual (it does to me) but in a wordpress image slideshow (using get attachments), if an image doesn't have a caption, I want to keep the previous caption on display until the next populated caption comes around.

Is this possible?:/

Thanks in advance for any help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T23:19:20.057

好吧，它现在已经排序，并且很抱歉之前没有显示代码，这是一个对我有用的解决方案；

```
<?php endif; ?>
    <?php if (have_posts()) : while (have_posts()) : the_post();
    $attachments = attachments_get_attachments();
    $total_attachments = count($attachments);
        if( $total_attachments > 0 ) :
        for ($i=0; $i < $total_attachments; $i++) : ?>
            <div><img src="<?php echo $attachments[$i]['location']; ?>" alt="<?php echo $attachments[$i]['caption']; ?>" title="<?php echo $attachments[$i]['title']; ?>">
            <?php if($attachments[$i]['caption']==""){
                 $new_caption=$attachments[$i-1]['caption'];    
            }else{
                 $new_caption=$attachments[$i]['caption'];  
            }
            ?>
            <h2 id="tagline" title="<?php echo $attachments[$i]['title']; ?>"><?php echo $new_caption; ?></h2>
            </div>
            <?php endfor; ?>
            <?php endif; ?>
    <?php endwhile; else: ?> 
```

# php - 动态生成的删除按钮

> ID：13242168
> 
> 赞同：0
> 
> 时间：2012-11-05T23:36:12.857
> 
> 标签：php, html

我是 php 新手，我想知道如何创建删除按钮之类的东西，用于删除列表中的项目，该列表将由动态增长的数组生成。

我的意思的一个例子是这样的：

```
<?php
if (isset($_REQUEST['foo']))
{
    if (isset($_SESSION['words']))
    {
        $_SESSION['words'][] = 'added word';
    }
    else
    {
        $_SESSION['words'] = array('cat', 'dog', 'you', 'me');
    }

    foreach ($_SESSION['words'] as $key => &$value)
    {
        echo "<p>" . 
             $value . 
             " - <input type='submit' name='delete_" . 
             $value . 
             "' value='Delete Entry' /></p>";
    }

    if (isset($_REQUEST['clear']))
    {
        session_destroy();
    }
?> 
```

在哪里，每次点击发送到我的脚本的按钮都会回显带有按钮的数组。

我想将删除按钮链接到一个看起来像这样的函数：

```
function delete_entry( $index )
{
    unset($_SESSION['words'][$index]);
    $_SESSION['words'] = array_values($_SESSION['words']);
} 
```

我要问的甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:51:54.020

您的单词数组似乎存储在您的会话变量中，所以我假设您要删除/添加单词。这个怎么样...？

1.  每个单词都有一个单独的表格，并带有一个隐藏字段，说明该单词是什么：

    所以在for循环中： `echo "<form><p>".$value." - <input type='submit' value='Delete Entry' /></p><input type=\"hidden\" name=\"delword\" value=\"".$value."\"/></form>";`

2.  `if(isset[$_REQUEST['delword']])`从会话数组中删除它（在执行循环*之前*执行此操作。（您可以使用[array_search](http://au1.php.net/manual/en/function.array-search.php)查找元素，然后按照您的建议运行 unset ）

如果您希望我详细说明此建议，请告诉我。

# sql-server - Where to get Microsoft SQL Management Studio when using Amazon RDS SQL servers?

> ID：13242170
> 
> 赞同：2
> 
> 时间：2012-11-05T23:36:20.117
> 
> 标签：sql-server, ssms, amazon-rds

My company is interested in using Amazon's RDS service for our Microsoft SQL Server Web Edition. However, we are a bit confused on how to actually connect to the database to initialize it.

In the Amazon [Getting Started Documentation](http://docs.amazonwebservices.com/AmazonRDS/latest/UserGuide/USER_ConnectToMicrosoftSQLServerInstance.html) it simply says "2\. Run Microsoft SQL Server Management Studio". Where would I obtain this management studio if the reason I am using Amazon RDS is to avoid buying a SQL Server license in the first place? Are there other programs that can do the same?

The connection settings from there seems very straight forward, but we're left looking for the actual software to connect.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:44:47.760

Microsoft Sql Server Management Studio 仅适用于 Sql Server 许可证。您可以获得一份 Sql Developer Edition 的副本。那也有管理工作室，而且便宜得多。

# c# - Need help creating a custom event handler

> ID：13242180
> 
> 赞同：1
> 
> 时间：2012-11-05T23:37:11.620
> 
> 标签：c#, event-handling

```
new System.Windows.Forms.MouseEventHandler(this.eventFunction) 
```

the above sends an 'object sender' and 'MouseEventArgs e' to my event function. I need to send another object with it, but if I use:

```
System.Windows.Forms.MouseEventHandler(this.eventFunction(object, MouseEventArgs, objectINeed)); 
```

It doesn't work. It just says there is an invalid argument. Even if I blatantly send it an object, MouseEventArgs, object.

Can anyone provide any insight?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T00:59:30.473

没有原因对象发送者应该已经拥有您需要传递给事件的信息。事件附加到对象。

您可以创建一个可以从事件中调用的方法，以检索您需要的对象或数据。

或者您可能使您需要引用的对象的范围足够高，以至于它已经可用于事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T01:48:57.327

您可以执行以下操作：

```
new System.Windows.Forms.MouseEventHandler((s, e) => this.eventFunction(objectINeed, e)); 
```

但是你为什么需要那个？

# database-design - Boyce-Codd normal form with circular functional dependencies

> ID：13242188
> 
> 赞同：3
> 
> 时间：2012-11-05T23:37:39.770
> 
> 标签：database-design, relational-database, functional-dependencies, bcnf

In relational database design, For example, there is schema S(banker, bname, customer) and function dependencies (FDs)

banker->bname customer,bname->banker

Is schema S in BCNF? Or it should be: (banker, bname) and (customer, banker)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:34:17.003

我不认为“S”在 BCNF 中。这是 Chris Date 对 BCNF 的非正式定义。

> 当且仅当唯一的决定因素是候选键时，relvar 才在 BCNF 中。（*数据库系统简介*，第 7 版，第 367 页）

术语*行列式*是指函数依赖的左侧。如果存在左侧不是候选键的函数依赖关系，则该关系不在 BCNF 中。

让我们用传统符号重写您的示例。

```
R{ABC}
A->B
BC->A 
```

有两个候选键：AC 和 BC。A->B 的左侧不是候选键。所以 R 不在 BCNF 中。

> 或者应该是：(banker, bname) and (customer, banker)

不，您的功能依赖关系非常清楚地表明客户*不能*确定银行家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:41:32.693

我认为应该是 (banker, bname) 和 (customer, banker)。对我来说看起来更像是外键关系。

# php - Sanitize CSS in PHP - Ruby Alternatives an option?

> ID：13242192
> 
> 赞同：2
> 
> 时间：2012-11-05T23:37:48.177
> 
> 标签：php, css, ruby-on-rails

We have a requirement to allow users to customise the CSS for a PHP app. In general, only that user will be able to view the custom CSS, but there are cases when other users in their group could also view the CSS, hence the need to ensure that its sanitized.

I am aware that HTMLPurifier and CSSTidy can be used for PHP, but CSSTidy is extremely outdated, and apparently can't handle everything that we need to throw at it.

I havent found any other PHP libs that can do this.

One alternative that I am exploring is taking a ruby library (http://apidock.com/rails/HTML/WhiteListSanitizer/sanitize_css or [https://github.com/courtenay/css_file_sanitize/blob/master/lib/css_sanitize.rb](https://github.com/courtenay/css_file_sanitize/blob/master/lib/css_sanitize.rb)) and converting it into php.

Before I go down that route, are there any alternatives to the above? And are there any pitfalls that I should be aware of before using one of the Ruby libs?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T01:54:55.363

> **更新：** 将近八年后，我想留下第二条笔记，因为我的回答开始受到反对。
> 
> 我不再像我早期的职业生涯那样处理 JS/CSS。近年来，我确实主要专注于构建后端服务和工具。因此，即使我努力保持敏锐，我在这方面的知识也可能已经过时，这需要纪律和努力。
> 
> 尽管如此，今天可能存在比 HtmlPrufier 和/或 TidyCSS 更好的工具。我并不是说这些工具不好。但社区支持和积极维护很重要。作为一个经验法则，我在我的应用程序中远离死的或未维护的依赖项。
> 
> 如果 PHP 必须在这里进行清理，我会先查看 [Wikimedia 的 CSS 清理](https://github.com/wikimedia/css-sanitizer)程序，如果它对我有用。或多或少，它正在完成这项工作。在文件系统中保留给定 CSS 的缩小版本，在应用程序端修改为更新也是我的次要目标。发送到浏览器时，预生成的版本可以让我的生活更轻松。任何工具都可以在那里工作，PHP 可能会为其触发一个专用事件。创建经过清理的 CSS 版本也可能是后台进程候选，而不是按需生成。也许通过 PHP 以外的其他平台的可用工具。所以现在有更多的选择和可能性。
> 
> 希望我的解释能为试图实现类似目标的人们提供一些启示。

**原来的答案是：**

HTMLPurifier 和 CSSTidy 是正确的工具。CSSTidy 仍然由[Cedric Morin和](https://github.com/Cerdic)[Github 上](https://github.com/Cerdic/CSSTidy)的少数其他开发人员维护。自 2012 年 4 月以来，CSSTidy 的默认 CSS 级别也是**CSS3.0**。

你可以用那个。

# java - 如何在 Maven 中添加 PostgreSQL 驱动程序作为依赖项？

> ID：13242196
> 
> 赞同：84
> 
> 时间：2012-11-05T23:38:25.543
> 
> 标签：java, hibernate, postgresql, maven

我正在尝试使用 Maven 开发 Java 应用程序，同时使用 Hibernate 和 PostgreSQL 数据库进行持久性。我不明白我应该如何将 PostgreSQL 驱动程序连接到我的应用程序。我知道您在 Maven 的 pom.xml 文件中添加了依赖项，该文件从远程存储库中查找 jars，但是其他 jars 呢？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-11-05T23:47:33.740

PostgreSQL 驱动程序 jar 包含在 Maven 的中央存储库中：

*   [包含的 PostgreSQL 驱动程序版本列表。](http://search.maven.org/#search%7Cga%7C1%7C%28g%3A%22org.postgresql%22%20OR%20g%3A%22postgresql%22%29%20AND%20a%3A%22postgresql%22)

对于最高 9.1 的 PostgreSQL，请使用：

```
<dependency>
    <groupId>postgresql</groupId>
    <artifactId>postgresql</artifactId>
    <version>VERSION</version>
</dependency> 
```

或 9.2+

```
<dependency>
    <groupId>org.postgresql</groupId>
    <artifactId>postgresql</artifactId>
    <version>VERSION</version>
</dependency> 
```

*（感谢@Caspar 的更正）*

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-02-23T11:49:44.123

更新最新版本：

```
<dependency>
    <groupId>org.postgresql</groupId>
    <artifactId>postgresql</artifactId>
    <version>42.2.14</version>
</dependency> 
```

[来源](http://mvnrepository.com/artifact/org.postgresql/postgresql)

希望能帮助到你！

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-11-05T23:43:42.810

根据您的 PostgreSQL 版本，您需要将 postgresql 驱动程序添加到您的`pom.xml`文件中。

对于 PostgreSQL 9.1，这将是：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <name>Your project name.</name>
    <dependencies>
        <dependency>
            <groupId>postgresql</groupId>
            <artifactId>postgresql</artifactId>
            <version>9.1-901-1.jdbc4</version>
        </dependency>
    </dependencies>
</project> 
```

您可以从 maven 的中央存储库获取依赖项（以及任何其他依赖项）的代码

如果您使用的是 postgresql 9.2+：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <name>Your project name.</name>
    <dependencies>
        <dependency>
            <groupId>org.postgresql</groupId>
            <artifactId>postgresql</artifactId>
            <version>42.2.1</version>
        </dependency>
    </dependencies>
</project> 
```

您可以从以下位置检查最新版本和依赖项片段：

*   [http://mvnrepository.com/artifact/postgresql/postgresql](http://mvnrepository.com/artifact/postgresql/postgresql)
*   [http://mvnrepository.com/artifact/org.postgresql/postgresql](http://mvnrepository.com/artifact/org.postgresql/postgresql)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-02T15:07:43.810

来自 PostgreSQL 站点，日期为 2016 年 2 月 4 日（[https://jdbc.postgresql.org/download.html](https://jdbc.postgresql.org/download.html)）：

> “这是驱动程序的当前版本。除非您有特殊要求（运行旧应用程序或 JVM），否则这是您应该使用的驱动程序。它支持 Postgresql 7.2 或更高版本，需要 1.6 或更高版本的 JVM。它包含对SSL 和 javax.sql 包。如果你使用的是 1.6 那么你应该使用 JDBC4 版本。如果你使用的是 1.7 那么你应该使用 JDBC41 版本。如果你使用的是 1.8 那么你应该使用 JDBC42 版本如果你正在使用一个早于 1.6 的 java 版本，那么您将需要使用驱动程序的 JDBC3 版本，这必然不是最新的”

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-19T19:50:41.290

```
<dependency>
    <groupId>org.postgresql</groupId>
    <artifactId>postgresql</artifactId>
    <scope>runtime</scope>
</dependency> 
```

# c++ - 索引增量如何在 C++ 中工作

> ID：13242197
> 
> 赞同：1
> 
> 时间：2012-11-05T23:38:46.380
> 
> 标签：c++, indexing, increment

我的导师告诉我使用索引来跟踪程序所在行中的哪个字符。索引是如何工作的？我知道它类似于计数，但除此之外我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:42:05.650

在较高级别上，索引适用于集合。它只是说“我想要那个集合的第*n*^个元素”（其中*n*是你的索引）。

因此，如果您有：

```
int foo[] = {2, 3, 5, 8, 13}; // array of 5 integers 
```

使用 0 作为索引将给您 2，使用 1 将给您 3，使用 2 将给您 5，使用 3 将给您 8，使用 4 将给您 13。

所有这些都是常数索引，所以它们总是会给你相同的结果。但是，如果您使用*变量*作为索引，这意味着您可以从集合中检索不同的元素。

在数组的情况下，该集合只是一块连续的内存。数组本身就是一个内存地址，通过将索引添加到该内存地址，您可以找到您要查找的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T23:42:17.730

通过索引，他只是指指向特定字符的指针。这可以只是一个跟踪字符位置的整数或实际的指针类型。

```
string test = "Hello";
const int sLength = 5;
int index = 0;
for ( ; index < sLength ; index++ )
{
    cout << "Character at index " << index << " = " << test[index];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T23:42:18.230

一开始，它帮助我将索引视为书签。书签会记录我最近查看的内容。

但是，要真正理解索引，您应该研究指针。您需要了解结构是如何存储在内存中的，地址是什么，以及如何从一个地址明智地移动到另一个地址。

# c++ - C 风格转换到 C++ 风格转换

> ID：13242203
> 
> 赞同：1
> 
> 时间：2012-11-05T23:39:32.507
> 
> 标签：c++, c

我不熟悉 C++ 转换，我想将我的 C 风格转换转换为 C++ 转换。这是我的代码，

```
typedef unsigned char u8;
u8 sTmp[20] = {0};

//.. code to put string data in sTmp

char* sData;
sData = (char*)&(sTmp[0]); 
```

在这里，我想转换`(char*)&(sTmp[0])`为 C++ 转换。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T23:58:13.677

你的演员阵容过于复杂。你得到数组的第一个元素，然后是那个元素的地址。在表达式中，数组衰减为指针，因此您可以仅通过数组名称获取数组的地址：

```
sData = (char*)sTmp; 
```

就像上面的@Richard 所说，在 C++ 上进行强制转换的最佳方法是使用 reinterpret_cast，如下所示：

```
sData = reinterpret_cast<char*>(sTmp); 
```

最后，*sTemp*（就像我已经提到的）将衰减为表达式上的指针，特别是*unsigned char* * （这是寻址原始内存的常用方法），因此您很可能实际上不需要将其转换为完全是*字符**。（除非你必须打印它，这似乎并不正确）

# java - 创建六边形，顶部和底部都有点

> ID：13242207
> 
> 赞同：1
> 
> 时间：2012-11-05T23:40:09.750
> 
> 标签：java, awt, polygon

我已经很长时间没有做过任何几何图形了，以至于我不知道该怎么做。

我创建了这个方法：

```
public Polygon getHex(int posX, int posY) {
        Polygon hex = new Polygon();
        for (int i = 0; i < 6; i++) {
            hex.addPoint((int) (posX + (50 * Math.cos(i * 2 * Math.PI / 6))),
                    (int) (posY + (50 * Math.sin(i * 2 * Math.PI / 6))));
        }
        return hex;
    } 
```

这将创建一个等边六边形，如下所示：

```
 _
 / \
 \_/ 
```

我需要一个像这样的旋转等边六边形：

```
 /\
  |  |
   \/ 
```

谁能帮我记住数学？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T23:46:06.393

更改`i * 2`为`(1 + i * 2)`，这将使您的所有点旋转 pi/6，这应该可以解决问题！

# sharepoint - 使用 Adob e Contribute 在 SharePoint 博客中发帖

> ID：13242215
> 
> 赞同：1
> 
> 时间：2012-11-05T23:41:00.530
> 
> 标签：sharepoint, sharepoint-2010, blogs, metaweblog, adobe-contribute

我正在尝试将 Adob​​e Contribute 设置为发布到 SharePoint 博客。使用 Contribute 的连接向导，我选择博客和其他博客服务器，然后粘贴我们的 SharePoint 博客的 URL 并单击下一步。这就是事情破裂的地方。我输入了我的 SharePoint 用户/通行证，但我不知道如何找到它要求的接入点。我尝试输入博客 URL 但这不起作用。这告诉我我的 MetaWeblog 用户/密码不正确。我已与我们的 SharePoint 管理员核实过，但他们没有给我答案。我已经在网上搜索并搜索了所有我可以处理的文档，但仍然一无所获。

有谁知道如何找到 SharePoint 博客的访问点？

**更新：经过更多研究后，我发现了一篇 MSDN 文章，它可能会在**[此处](http://msdn.microsoft.com/en-us/library/dd578332%28v=office.12%29.aspx)对 SharePoint 的 MetaWeblog API 有所了解。文章指出：

“博客API设置随着博客的兴起，大量的第三方博客写作软件被开发出来。为了让博客写作软件与实际的博客服务器无缝连接，已经为两个应用程序编写了一个RFC编程接口 (API)：Blogger API 和 MetaWeblog API。Blogger API 是一个较旧的标准，仅处理访问博客上的文本。较新的标准 MetaWeblog API 还处理额外的数据，例如常见的 RSS 构建的元数据，例如作者、标题、评论等

Windows SharePoint Services 支持 MetaWeblog API；在 Web 应用程序上启用后，用户可以通过第三方软件更新、编辑或创建博客文章。如果您通过 MetaWeblog API 接受用户名和密码，这些程序也可以登录以执行更新。否则，将使用站点的默认身份验证。如果您启用 API 并允许接受用户名和密码，请注意这些凭据是以明文形式发送的。在 Web 应用程序上启用 SSL 可以降低这种安全风险，本章稍后将进行讨论。让博客 API 保持启用状态，并打开用户名和密码接受。”

在文章的后面，它概述了如何设置第三方博客发布软件，并指出“对于远程发布 URL，您需要将 /_layouts/metaweblog.aspx 添加到博客 URL 的末尾（例如，服务器/myblog/_layouts/metaweblog.aspx)。” 我假设这是 Contribute 要求的“接入点”。

所以我让我们的 SharePoint 管理员启用 MetaWeblog API 并允许接受用户/通行证，然后我再次设置了博客连接，不幸的是，结果相同。我在想 SharePoint 中还有其他网站集/Web 应用程序设置需要设置才能正常工作，但我不知道它们会是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:22:29.993

免费的 Adob​​e TV 上有一个有用的视频序列 => 设置 Microsoft SharePoint 以与 Adob​​e Acrobat 9 共享审阅，[http ://tv.adobe.com/watch/acrobat-tips-and-tricks/setting-up- microsoft-sharepoint-for-a-shared-review-with-adobe-acrobat-9/](http://tv.adobe.com/watch/acrobat-tips-and-tricks/setting-up-microsoft-sharepoint-for-a-shared-review-with-adobe-acrobat-9/)

# java - 使用 readline() 和 split()

> ID：13242218
> 
> 赞同：0
> 
> 时间：2012-11-05T23:41:13.597
> 
> 标签：java, split, bufferedreader, readline

下面的代码大部分是不言自明的。但是，我在两种情况下遇到了麻烦：

1.  `while`即使命令行留空，循环也不会退出。

2.  如果输入是`test t1`变量`key`应该是“测试”（使用`System.out.println(key)`）这样做，但是由于某种原因它仍然没有进入`if`条件。

    ```
    String[] broken_text = null; String text = "";
    BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));
    while((text = reader.readLine()) != null) {     
      broken_text =    text.split(" ");
      String first_key = broken_text[0];    
      if (first_key == "test") {
            //some statements    
       }
    } 
    ```

我不知道为什么会这样，任何有关相同的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T23:43:07.777

使用 equals() 检查字符串是否相等。

```
if (first_key == "test") {
         //some statements
    }

should be

if (first_key.equals("test")) {
         //some statements
    } 
```

你`text`永远不会`null`因为你宣布它为

```
String text = ""; 
```

因此你的while循环将是一个无限循环

改变

```
String text = ""; 
to
String text = null; 
```

或者，如果您想将`text=""`字符串保留为空字符串。

采用

```
while(!(text = reader.readLine()).isEmpty()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T23:44:38.677

循环不会结束，因为空行会导致`readLine()`返回空字符串，而不是`null`.

比较失败，因为字符串必须与`equals()`not进行比较`==`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T23:45:33.207

在这种情况下`String` `text`永远不会`null`。您可以使用：

```
while (!(text = reader.readLine()).isEmpty()) { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T05:12:13.673

这应该是您编辑的代码：

```
String[] broken_text = null;
String text = "";
BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));

while((text = reader.readLine()) != null && !text.isEmpty()) {
    broken_text = text.split(" ");
    String first_key = broken_text[0];
    if ( "test".equals(first_key)) {
         //some statements
    }
} 
```

改成的原因`(text = reader.readLine()) != null`是`(text = reader.readLine()) != null && !text.isEmpty()`因为第一个字符遇到文件结束符就`readLine()`返回`null`，遇到第一个字符是`\r`(回车)、`\n`(换行)或者`\r\n`(回车)就返回""(空字符串)其次是换行）。并且您必须始终`null`在检查`isEmpty()`.

在*unix / Linux*控制台文件结尾是`[ctrl][d]`，在*DOS*上是`[ctrl][z]`

注意：如果您想从文件（您更有可能获得文件结尾）而不是控制台读取输入，那么您的`reader`初始化将如下所示：

```
 BufferedReader reader = new BufferedReader(new FileReader("d:\\a1.txt")); 
```

（假设您的输入数据在文件中：*"d:\a1.txt"*。）

# python - PIL resize() 是否持有 GIL？

> ID：13242221
> 
> 赞同：4
> 
> 时间：2012-11-05T23:41:33.037
> 
> 标签：python, python-imaging-library, cpython

例子：

```
image = Image.open('foo.png')
# releases the GIL?
resized = image.resize((800, 600), Image.ANTIALIAS)
# reacquires the GIL? 
```

显然，变量赋值需要保存 GIL，但很难将其分成两行。:)

如果有两个线程进行图像调整大小，这些调整大小可以在两个不同的内核上运行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T03:00:32.700

查看 1.1.7 的源代码，它似乎没有为`_resize`.

释放 GIL 的函数似乎是：

```
PyImaging_CreateWindowWin32 (createwindow on Win32)
PyImaging_EventLoopWin32 (eventloop on Win32)
pyCMSdoTransform (apply)
_buildTransform (buildTransform)
_buildProofTransform (buildProofTransform)
_encode_to_file (encode_to_file) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T00:51:33.100

来自[GIL 上的 Python wiki](http://wiki.python.org/moin/GlobalInterpreterLock)：

> 请注意，潜在的阻塞或长时间运行的操作（例如 I/O、图像处理和 NumPy 数字运算）发生在 GIL 之外。因此，只有在 GIL 中花费大量时间来解释 CPython 字节码的多线程程序中，GIL 才会成为瓶颈。

PIL 使用 C 扩展来完成大部分繁重的工作。因此，如果适用，实际的图像大小调整应该利用多线程。

如果您要同时调整多个图像的大小，我建议您考虑使用 Python 的本机[多处理](http://docs.python.org/2/library/multiprocessing.html)库。这应该可以达到使用多个内核的预期效果。

# ios - 更改出口对象属性

> ID：13242223
> 
> 赞同：0
> 
> 时间：2012-11-05T23:41:41.917
> 
> 标签：ios, uiviewcontroller, iboutlet

我有一个视图控制器**alertForNeedsClassification**作为另一个类中的属性，例如：

```
@interface SCAAppDelegate()
{
    HomeScreenViewController * _homeScreenViewController;
    NSInteger SCAStatus;
}
@property (strong, nonatomic) PromptClassifyViewController * alertForNeedsClassification;
@end

@implementation SCAAppDelegate

@synthesize alertForNeedsClassification;
@synthesize window = _window; 
```

PromptClassifyViewController 的界面如下所示：

```
@interface PromptClassifyViewController : UIViewController

@property (weak, nonatomic) IBOutlet UILabel *headerTitle;
@property (weak, nonatomic) IBOutlet UITextView *message;
@property (weak, nonatomic) IBOutlet UIButton *notNowButton;
@property (weak, nonatomic) IBOutlet UIButton *classifyButton;
@property (weak, nonatomic) IBOutlet UIImageView *backgroundImageView;
@property (weak, nonatomic) IBOutlet UIView *alertView;
@property NSUInteger tag;

@property (weak, nonatomic) IBOutlet id<PromptClassifyViewControllerDelegate> delegate;

- (void)show;
- (void)showFromView:(UIView *)view;
- (IBAction)show:(id)sender;
- (IBAction)dismiss:(id)sender;
- (IBAction)buttonWasPressed:(id)sender;
- (void)setHeaderTitleWithText:(NSString *)text;

@end 
```

我正在尝试更改 IBOutlets**消息**和**headerTitle**文本的值，如下所示：

```
alertForNeedsClassification = [[PromptClassifyViewController alloc] initWithNibName:@"PromptClassifyViewController" bundle:nil];
            //[alertForNeedsClassification setDelegate:self];
            self.alertForNeedsClassification.headerTitle.text =  @"A title";

            alertForNeedsClassification.message.text = @"A message"; 
```

然后我显示调用**show方法的****alertForNeedsClassification**（它类似于自定义 uialertview，但它不是 uialertview 的子类）。

 **问题是，无论我如何更改它，alertForNeedsClassification.view 上的文本始终是笔尖中定义的文本，即。我无法以编程方式更改它。

我的自定义警报视图基于 Jeff LaMarche 的设计：http: [//iphonedevelopment.blogspot.com/2010/05/custom-alert-views.html](http://iphonedevelopment.blogspot.com/2010/05/custom-alert-views.html)

任何想法可能会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T03:09:08.210

在分配/初始化之前，我正在为 IBOutlets 分配值。我实施的解决方案是将我需要的值设置为非 IBOutlet 属性（在这种情况下为 NSStrings），并在需要时在 Prompt...Controller 的 viewDidLoad 中分配这些值；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T02:01:58.710

分配和初始化对象时请小心`UIView`，尤其是在尝试使用 Nib 混合并动态生成对象时。最好的地方是在`-(void)awakeFromNib`或`-(void)viewDidLoad`

此外，请确保调用这些方法。仅使用`-(id)initWithNibName:bundle:`无法确保您的视图被加载。尝试在 parentViewController 的视图上`-(void)addChildViewController`，`-(void)addSubview:`以确保在初始化后加载视图。

如果必须在加载之前准备文本，请将其分配给类中的单独`NSString`属性`PromptClassifyViewController`。由于此属性独立于正在加载的视图，因此您可以在视图出现之前更改它的值。确保使用此文本并将其应用于`headerTitle`inside`-(void)show`方法。

由于您分配`PromptClassifyViewController`和访问`weak`引用`headerTitle`自`self. alertForNeedsClassification`，因此请确保之后不会立即释放它。

通常，`weak`选项不用于 IBOutlet 属性。虽然它在通过从 Interface Builder 中拖动对象来生成插座连接代码时使用。尝试使用`strong`.**

# c# - 从 MVC3 中的 DropDownList 获取价值 .. 比将 ID 绑定到另一个字段更好的方法？

> ID：13242224
> 
> 赞同：0
> 
> 时间：2012-11-05T23:41:50.507
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我想知道是否有另一种方式来表达以下代码。该代码按预期工作，但我对它如何定义我的命名约定有疑问。

```
//Model.cs:
[DisplayName("Device Manufacturer")]
public List<KeyValuePair<int, string>> DeviceManufacturer { get; set; }
public int SelectedManufacturerID { get; set; }

//Model.ascx:
<%= Html.DropDownListFor(model => model.SelectedManufacturerID, new SelectList(Model.DeviceManufacturer, "Key", "Value"))%> 
```

现在，无论何时更改选定的列表项——新值都存储在 SelectedManufacturerID 中。我能够像这样在我的控制器中接收值：

```
int selectedID = model.SelectedDataCenterID; 
```

**但是，**我对 MVC 为我的选择列表提供 ID“SelectedManufacturerID”这一事实感到不满意，因为它不是一个 ID 字段——它是一个选择列表。显然，这是为了支持绑定到 SelectedManufacturerID 字段。

如果我希望使用我的选择列表客户端，我现在有如下代码：

```
$('#SelectedManufacturerID').change(function(){
    console.log("OnSelectedIndexChanged!");
}); 
```

这个jQuery非常不清楚。没有迹象表明 SelectedManufacturerID 是一个选择 DOM 元素。使用本文顶部的 MVC 约定似乎不可能有正确的命名约定。有人有同感吗？我还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T23:52:55.643

如果需要，您可以使用不同的辅助方法[重载来更新下拉列表的 ID 或其他 html 属性。](http://msdn.microsoft.com/en-us/library/ee703436%28v=vs.108%29.aspx)`DropDownListFor`在这里，您可以将 html 属性作为最后一个参数传递。

```
<%= Html.DropDownListFor(model => model.SelectedManufacturerID,
             new SelectList(Model.DeviceManufacturer, "Key", "Value"),
                                          new { @id="ManufacturerList"})%> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T23:52:44.910

改为使用`select#SelectedManufacturerID`。

# c++ - 这个（c++）代码有什么问题吗？如果是这样，谁能告诉我哪里出错了？

> ID：13242226
> 
> 赞同：-5
> 
> 时间：2012-11-05T23:41:57.383
> 
> 标签：c++

我是 C++ 新手，正在练习练习。我使用 CodeBlocks IDE。

```
#include <iostream>

using namespace std;

int main() {
    double f;
    double m;
    int counter;
    counter = 0;
    for (f = 1.0, f <= 100.0, f++) { // error: expected primary-expression before ')'
        m = f / 3.28;
        cout << f << " feet is " << m << " meters!\n done";
        counter++;
        if (counter == 10) {
            cout << "\n";
            counter = 0;
        }
    }
    cin.ignore();
    cin.get();
    return 0;
} 
```

每次我把它放在我的 IDE 中，我都会收到以下错误：

> `error: expected primary-expression before ')' token`

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T23:43:26.323

您需要`for`用分号而不是逗号分隔语句中的子句。
此外，在内部声明循环变量更简洁`for`：

```
for(double f=1.0; f<=100.0; f++) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T23:44:07.130

您的 for 循环语句错误地用逗号分隔。将它们设为分号：

```
for (f = 1.0; f <= 100.0; f++) {

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T23:46:38.777

`for`循环在语句之间需要分号，所以它应该是：

```
for(f=1.0; f<=100.0; f++) 
```

你也错过了一个`}`之后`return 0;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T23:47:05.170

您的 for 声明不正确：

```
for(f=1.0, f<=100.0, f++) 
```

应该：

```
for(f = 1.0; f <= 100.0; f += 1) // for(initial value; continuation condition; increment) 
```

本质上，您需要将这些逗号更改为分号。

# gwt - GWT：“无法识别的调用格式”：是什么意思？

> ID：13242236
> 
> 赞同：0
> 
> 时间：2012-11-05T23:42:44.900
> 
> 标签：gwt, interop

```
public void query(String sql, QueryResult queryResult) {
    q = queryResult;
    realQuery(sql, conString);
}

public static native void realQuery(String sql, String conString) /*-{
    $wnd.pg.connect(conString, function(err, client) {
        client.query(sql, function(err, result) {
            console.log(result.rows);
            var code = "@db.tud.bp.werkstatt.client.PgClient::result(Ljava/lang/String;)(" + '"' + JSON.stringify(result.rows).replace('"','\\"') + '"' + ");";
            console.log(code);
            eval(code);
        });
    });
}-*/; 
```

我收到此错误：

```
com.google.gwt.event.shared.UmbrellaException: Exception caught: (Error) 
@de.tud.bp.werkstatt.client.PgClient::realQuery(Ljava/lang/String;Ljava/lang/String;)
([string: 'SELECT age FROM person WHERE name='Ayeb'', string: '/rest/query']): 
  unrecognized calling format
    at com.google.gwt.event.shared.HandlerManager.fireEvent(HandlerManager.java:129) 
```

“无法识别的呼叫格式”是什么意思，为什么我在搜索时没有得到任何谷歌结果？

我怀疑我在第 3 行中以错误的方式调用了 JSNI 函数。但我是 AFAIK 遵循[此处](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI#writing)文档中指定的所有规则。

**编辑**：

这有效：

```
public static native void realQuery(JavaScriptObject parsed) /*-{
    var sql = parsed[0];
    var conString = parsed[1];
    $wnd.pg.connect(conString, function(err, client) {
    });
}-*/; 
```

这不会：

```
public static native void realQuery(JavaScriptObject parsed) /*-{
    var sql = parsed[0];
    var conString = parsed[1];
    $wnd.pg.connect(conString, function(err, client) {
        client.query(sql, function(err, result) {
            console.log(result.rows);
        });
    });
}-*/; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:58:15.313

您不能将`eval`JSNI 调用调用到 Java 中——该代码不是真正的 JavaScript，而是 JS 和 Java 在 GWT 中交互方式的一部分。最终的工作方式是重写这些调用，以便它们调用真正的 JavaScript 函数。

# php - 从 3 个表中按时间对 mysql 结果进行排序

> ID：13242249
> 
> 赞同：0
> 
> 时间：2012-11-05T23:44:06.250
> 
> 标签：php, mysql, sql

我有 3 张桌子`questions`：`articles`和`pictures`

每个表中的行包含一个 current_timestamp 列`posted`，并链接到一个 id。我想按时间戳对所有三个行的结果进行排序，并且只回显三个中的最新一个（例如：如果问题是来自 ID 的最新问题，则仅显示）

```
if(count($interests) != 0){ foreach($interests as $interests_following){
    $interestid = mysql_result(mysql_query("SELECT `id` FROM `interests` WHERE `name` = '$interests_following'"),0);
    $interestquestions = @mysql_result(mysql_query("SELECT `question_text`, `posted` FROM `questions` WHERE `interest` = '$interests_following'"),0);
    $interestarticles = @mysql_result(mysql_query("SELECT `article_title`, `posted` FROM `articles` WHERE `interest_id` = '$interestid'"),0);
    $interestpictures = @mysql_result(mysql_query("SELECT `interest_pic_title`, `posted` FROM `interest_pictures` WHERE `interest_id` = '$interestid'"),0);

echo '.$interests_following.': //<Only display 1 newest item (article/picture/question here> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T23:49:48.370

使用`UNION ALL`：

```
SELECT posted 
FROM
(
    SELECT `question_text`, `posted` FROM `questions` 
    WHERE `interest` = '$interests_following'
    UNION ALL
    SELECT `article_title`, `posted` FROM `articles` 
    WHERE `interest_id` = '$interestid'
    UNION ALL
    SELECT `interest_pic_title`, `posted` FROM `interest_pictures` 
    WHERE `interest_id` = '$interestid'
) t
ORDER BY posted DESC LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:48:48.623

要返回单行：

```
$sql = "SELECT * FROM WHERE `name`='$interests_following' ORDER BY `posted` DESC LIMIT 1";
$result = mysql_query($sql);
$row = mysql_fetch_array($result); 
```

所有的工作都在 SQL 中

```
ORDER BY `posted` DESC LIMIT 1 
```

这命令结果首先具有最新的，然后只返回第一行。

如果您打算只返回 3 个表格中的一项，您有 2 个选择：

*   从每个中获取一行，然后确定 PHP 中的最新
*   使用 a`UNION`查找 SQL 中的单个最新行

后者减少了代码，但可能不太可读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T23:49:43.297

试试这个

```
$interestquestions = @mysql_result(mysql_query("SELECT `question_text`, `posted` FROM `questions` WHERE `interest` = '$interests_following' ORDER BY timestamp_field DESC limit 1"),0); 
```

这将仅显示您的时间戳的最新数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T23:51:51.713

我将向您展示 SQL 查询，以便您了解我所做的；根据需要使其适应您的代码。

```
SELECT 
  (SELECT question_text 
     FROM questions ORDER BY posted DESC LIMIT 1 ),

  (SELECT article_title 
    FROM articles ORDER BY posted DESC LIMIT 1 ),

  (SELECT interest_pic_title 
    FROM interest_pictures ORDER BY posted DESC LIMIT 1)
; 
```

这按时间戳 DESCending 排序，因此最新记录在前，然后将其限制为单个记录。结果将是`question_text, article_title, interest_pic_title`。

# c++ - 在托管环境中执行期间修改机器代码

> ID：13242252
> 
> 赞同：1
> 
> 时间：2012-11-05T23:44:18.453
> 
> 标签：c++, unmanaged, managed-c++

我正在尝试使用托管代码中的非托管库。非托管库在执行期间修改内存中的机器代码，就像调试器一样。当我在没有任何托管代码的情况下使用它时，它可以工作。我编写了一个托管 C++ 类库，该类库调用调用非托管库的非托管代码。我没有收到错误，但执行继续进行，就好像非托管库没有修改机器代码一样。

对我来说，托管代码正在使用一些保护来防止机器代码被修改，即使机器代码正在被非托管代码修改，这对我来说是有意义的。如果是，那么我不知道它是什么，所以我当然不知道如何关闭它。我试图在文档中找到相关的内容，但文档太模糊，我无法确定它是否相关。

谁能至少提供我的理论是否相关的指导？

# ssh - “到本地主机的连接被远程主机关闭。” 通过 ssh 进行 rsync 时

> ID：13242253
> 
> 赞同：0
> 
> 时间：2012-11-05T23:44:18.927
> 
> 标签：ssh, rsync

我正在尝试通过 ssh 隧道设置自动 rsync 备份（使用 cron），但收到错误“与远程主机关闭的本地主机连接。”。我正在运行 Ubuntu 12.04。我已经寻求帮助并尝试了许多解决方案，例如将 ALL:ALL 添加到 /etc/hosts.allow，检查 sshd_config 中的#MaxStartups 10:30:60，在 sshd_config 中设置 UsePrivilegeSeparation no，创建 /var/empty/sshd 但是没有人解决了这个问题。

我运行 autossh 以确保隧道始终存在：

```
autossh -M 25 -t -L 2222:destination.address.edu:22 pbeyersdorf@intermediate.address.edu -N -f 
```

这似乎运行良好，我已经能够将隧道用于各种 rsync 任务，事实上，我第一次通过 cron 运行以下 rsync 任务时它成功了：

```
rsync -av --delete-after /tank/Documents/ peteman@10.0.1.5://Volumes/TowerBackup/tank/Documents/ 
```

每个文件的状态和输出

```
sent 7331634 bytes  received 88210 bytes  40215.96 bytes/sec
total size is 131944157313  speedup is 17782.61 
```

自从第一次成功以来，每次尝试都会给我以下输出

```
building file list ... Connection to localhost closed by remote host.
rsync: connection unexpectedly closed (8 bytes received so far) [sender]
rsync error: unexplained error (code 255) at io.c(605) [sender=3.0.9] 
```

较小子目录的 rsync 操作按预期工作。我很感激任何关于可能是什么问题的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:31:00.420

似乎问题与autossh有关。如果我通过 ssh 而不是 autossh 创建隧道，它可以正常工作。我怀疑我可以调整影响 autossh 配置的环境变量，但出于我的目的，我通过将 rsycn 命令包装在一个脚本中解决了这个问题，该脚本首先通过 ssh 打开隧道，执行备份然后终止 ssh 隧道，从而消除对 autossh 创建的始终打开的隧道的需求：

```
#!/bin/sh
#Start SSH tunnel
ssh -t -L 2222:destination.address.edu:22 pbeyersdorf@intermediate.address.edu -N -f
#execute backup commands
rsync -a /tank/Documents/ peteman@localhost://Volumes/TowerBackup/tank/Documents/ -e "ssh -p 2222"
#Kill SSH tunnel
pkill -f "ssh.*destination.address" 
```

# c# - resx 相对于模型类的位置

> ID：13242254
> 
> 赞同：0
> 
> 时间：2012-11-05T23:44:20.237
> 
> 标签：c#, model, resx

存储模型项目中数据注释使用的资源文件的推荐策略是什么？例如，通过 display 属性的 resourcetype 属性。

这些资源文件应该与模型类存储在同一个项目中还是单独包含在其他地方？

我只是想知道它们是否应该存储在其他地方以允许在不重新编译模型项目的情况下更新资源文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:21:36.900

我们目前将它们存储在同一个项目中。我什至不确定您是否可以将本地资源存储在不同的项目中。

如果您认为需要定期更改资源，我建议您使用其他资源提供程序，例如数据库资源提供程序。

# ios - flash cs5 包不能嵌套问题

> ID：13242255
> 
> 赞同：0
> 
> 时间：2012-11-05T23:44:31.897
> 
> 标签：ios, actionscript-3, flash

所以我正在开发一个应用程序，当我尝试运行时出现“无法嵌套包”错误。flash 告诉我的语法没有错误。

代码 -

```
package {
    import flash.display.MovieClip;
    import flash.events.MouseEvent;

    public class main extends MovieClip {
        public function main() {
            init()
        }
        private function init():void
        {
            home_button.addEventListener(MouseEvent.CLICK, handleButtonClicks);
        }

        private function handleButtonClicks():void
        {
            stop();
            gotoAndStop("home_page");

        }
    }

} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T00:41:37.370

老线程（一个月前），我知道。

我猜您的代码在 de fla 中（不是外部文件）。只需删除单词 Package 及其括号 (package {}) 并再次运行。这将工作，保证。

而且，flash 也有可能给出关于“public”、“private”等范围声明的错误，也可以删除这些。

# jquery - CSS3/jQuery 过渡在 Firefox 中不起作用？

> ID：13242260
> 
> 赞同：1
> 
> 时间：2012-11-05T23:44:56.243
> 
> 标签：jquery, firefox, css, css-transitions

是否还有其他人对 FF 不呈现 jQuery 和 CSS3 转换有问题。例如，以下站点的演示在 FF 中不起作用，但在 Chrome 和 Safari 中起作用。FF 过去可以工作，但最近不行。我在多台电脑上都试过了，都有这个问题。

[http://ricostacruz.com/jquery.transit/](http://ricostacruz.com/jquery.transit/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T00:08:22.727

只是在这里假设，但也许该插件基于`-moz-transition`并且最新的 firefox 可能已经放弃对它的支持而支持`transition`? 我会进一步调查

编辑 FF16 更改为假设：

[https://developer.mozilla.org/en-US/docs/CSS/transition](https://developer.mozilla.org/en-US/docs/CSS/transition)

编辑 2：因为这是公认的答案，所以我将下面的评论合并 - 归功于@Boris Zbarsky：

> Firefox 并未放弃对 -moz-transition 或 -moz-transform 的支持。它增加了对过渡和转换的支持。但是 jquery.transit 在任何支持无前缀转换的浏览器中都被破坏了。请参阅[http://github.com/rstacruz/jquery.transit/issues/86](http://github.com/rstacruz/jquery.transit/issues/86)和[http://bugzilla.mozilla.org/show_bug.cgi?id=807636](http://bugzilla.mozilla.org/show_bug.cgi?id=807636)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T00:11:39.253

确保您有相关 CSS 属性的 -webkit-、-moz- 和无前缀版本（或者 jQuery 插件根据需要生成它们）。

Firefox 16 删除了对 2D 变换的 -moz- 前缀的要求。

[http://caniuse.com/#feat=transforms2d](http://caniuse.com/#feat=transforms2d)

# sql - sql server 查询条件

> ID：13242261
> 
> 赞同：0
> 
> 时间：2012-11-05T23:45:06.967
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

这里有张桌子：

```
ID   Name   Rank
1    X       Professor
2    X       Principal
3    X       Term Prof
4    X       assistant 
```

我想要编写存储过程来根据输入选择最后一个教授等级或助理等级。这是存储过程的格式：

```
create procedure proc_name(@includeassistant varchar(3))

end 
```

如果 includeassistant 为“yes”，则为 assistant，则必须显示最后一行，如果 include assistant 为 no，则必须提供 Term prof 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:09:42.693

我想知道您所说的“**最后**教授级别”是什么意思，但无论如何，T-SQL 中没有这样的功能`LAST`。但是你可以试试这个（假设`ID`是`IDENTITY`）：

```
create procedure proc_name
@includeassistant varchar(3)
AS
SET NOCOUNT ON

SELECT TOP 1 ID, Name, Rank
FROM tbl
WHERE (@includeassistant='YES' AND Rank='Assistant')
      OR (@includeassistant='NO' AND Rank='Professor')
ORDER BY ID DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T23:58:58.587

你可以这样使用

```
create procedure proc_name(@includeassistant varchar(3))
AS
BEGIN
  IF @includeassistant='YES'
     SELECT   * FROM dbo.[table] where [RANK]='assistant'
  ELSE 
     SELECT   * FROM dbo.[table] where [RANK]='Term Prof'
END

--- OR 

create procedure proc_name(@includeassistant varchar(3))
AS
BEGIN
  SELECT   * 
  FROM dbo.[table] 
  WHERE [RANK]=CASE WHEN @includeassistant='YES' THEN 'assistant' ELSE 'Term Prof' END
END 
```

# cuda - 使用 CUDA 共享内存改进全局访问模式

> ID：13242262
> 
> 赞同：1
> 
> 时间：2012-11-05T23:45:13.807
> 
> 标签：cuda, shared-memory

我有以下内核来获得一堆向量的大小：

```
__global__ void norm_v1(double *in, double *out, int n)
{
    const uint i = blockIdx.x * blockDim.x + threadIdx.x;

    if (i < n)
    {
        double x = in[3*i], y = in[3*i+1], z = in[3*i+2];
        out[i] = sqrt(x*x + y*y + z*z);
    }
} 
```

然而，由于`in`它`[x0,y0,z0,...,xn,yn,zn]`在分析器中表现不佳，表明全局负载效率为 32%。将数据重新包装为`[x0, x1, ..., xn, y0, y1, ..., yn, z0, z1, ..., zn]`极大地改善了事情（偏移量为`x`，`y`，并`z`相应地改变）。运行时间减少，效率高达 100%。

但是，这种包装对我的应用程序来说根本不实用。因此，我希望研究共享内存的使用。我的想法是让块中的每个线程`blockDim.x`从全局内存中复制三个值（分开）——产生合并访问。在最大值的假设下，`blockDim.x = 256`我想出了：

```
#define BLOCKDIM 256

__global__ void norm_v2(double *in, double *out, int n)
{
    __shared__ double invec[3*BLOCKDIM];

    const uint i = blockIdx.x * blockDim.x + threadIdx.x;

    invec[0*BLOCKDIM + threadIdx.x] = in[0*BLOCKDIM+i];
    invec[1*BLOCKDIM + threadIdx.x] = in[1*BLOCKDIM+i];
    invec[2*BLOCKDIM + threadIdx.x] = in[2*BLOCKDIM+i];
    __syncthreads();

    if (i < n)
    {
        double x = invec[3*threadIdx.x];
        double y = invec[3*threadIdx.x+1];
        double z = invec[3*threadIdx.x+2];

        out[i] = sqrt(x*x + y*y + z*z);
    }
} 
```

但是，这显然是有缺陷的，需要提前`n % blockDim.x != 0`知道最大值，并且在使用. 我应该如何最好地解决这个问题？`blockDim``out[i > 255]``n = 1024`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T04:19:56.720

我认为这可以解决`out[i > 255]`问题：

```
__shared__ double shIn[3*BLOCKDIM];

const uint blockStart = blockIdx.x * blockDim.x;

invec[0*blockDim.x+threadIdx.x] = in[ blockStart*3 + 0*blockDim.x + threadIdx.x];
invec[1*blockDim.x+threadIdx.x] = in[ blockStart*3 + 1*blockDim.x + threadIdx.x];
invec[2*blockDim.x+threadIdx.x] = in[ blockStart*3 + 2*blockDim.x + threadIdx.x];
__syncthreads();

double x = shIn[3*threadIdx.x];
double y = shIn[3*threadIdx.x+1];
double z = shIn[3*threadIdx.x+2];

out[blockStart+threadIdx.x] = sqrt(x*x + y*y + z*z); 
```

至于`n % blockDim.x != 0`我建议用 0 填充输入/输出数组以匹配要求。

如果您不喜欢`BLOCKDIM`宏 - 探索使用`extern __shared__ shArr[]`然后将第三个参数传递给内核配置：

```
norm_v2<<<gridSize,blockSize,dynShMem>>>(...) 
```

这`dynShMem`是动态共享内存使用量（以字节为单位）。这是一个额外的共享内存池，其大小在运行时指定，所有`extern __shared__`变量都将最初分配到其中。

* * *

你用的是什么GPU？Fermi 或 Kepler*可能会*通过 L1 缓存帮助您的原始代码。

* * *

如果您不想填充您的`in`数组，或者您最终在其他地方做类似的技巧，您可能需要考虑实现一个 device-side `memcopy`，如下所示：

```
template <typename T>
void memCopy(T* destination, T* source, size_t numElements) {
    //assuming sizeof(T) is a multiple of sizeof(int)
    //assuming one-dimentional kernel (only threadIdx.x and blockDim.x matters) 
    size_t totalSize = numElements*sizeof(T)/sizeof(int);
    int* intDest = (int*)destination;
    int* intSrc = (int*)source;
    for (size_t i = threadIdx.x; i < totalSize; i += blockDim.x) {
        intDest[i] = intSrc[i];
    }
    __syncthreads();
} 
```

它基本上将任何数组视为`int`-s 数组，并将数据从一个位置复制到另一个位置。您可能希望将基础`int`类型替换为`double`-s 或者`long long int`仅使用 64 位类型。

然后您可以将复制行替换为：

```
memCopy(invec, in+blockStart*3, min(blockDim.x, n-blockStart)); 
```

# objective-c - 获取 Xcode 4.5.2 的 10.6 Base SDK

> ID：13242263
> 
> 赞同：9
> 
> 时间：2012-11-05T23:45:25.430
> 
> 标签：objective-c, xcode

如何在 Xcode 4.5.2 中获取和使用 10.6 作为基础 SDK？

我从 Mac App Store 下载了 Xcode 4.5.2（通过 Apple 开发者网站上的链接）。

有没有办法可以以某种方式单独下载 10.6 SDK 并开始将其用作基础 SDK？

奇怪的是，我可以通过 Xcode 的 Preferences 窗口下载 10.6 SDK 的**文档**，但不能下载 SDK 本身。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T01:51:37.170

不，您不能单独下载 10.6 SDK。

您是否有不能使用 10.8 或 10.7 SDK 的原因？

请记住，仅仅因为您针对 10.8 SDK 构建，这并不意味着您不能让构建的应用程序在 10.8、10.7 和 10.6 上运行。（这通常是新开发人员混淆的原因）。`Deployment Target`您可以通过如下图所示的设置来控制向后兼容性。

![在此处输入图像描述](../Images/71dc4fa6f87885b47db7388cdb321472.png)

默认情况下，部署目标通常设置为与 SDK 相同的 OS X 版本，但将其更改为 10.6，例如，应该允许它在装有 OS X 10.6 的机器上运行。（当然，您应该真正进行测试以确保是这种情况）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-21T13:23:54.073

下载 xcode 与`MacOSX10.6.sdk`. 现在复制`MacOSX10.6.sdk`到 /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs

它也适用于 Xcode 5.0。

![在此处输入图像描述](../Images/a43db6915d04e68f68d6c8db13564c1d.png)

# windows - cd 到 cmd 中带有 dir 的搜索结果

> ID：13242265
> 
> 赞同：0
> 
> 时间：2012-11-05T23:45:34.230
> 
> 标签：windows, filesystems, cmd, dir, cd

我想知道如何使用批处理文件更改到包含特定文件名的目录。首先，我想使用命令搜索特定文件`dir`。我知道只会找到一个文件。然后我想要到`cd`包含该文件的目录。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T00:13:13.420

如果您只搜索文件名，这应该有效（编辑：但仅当搜索使用通配符时）：

```
for /R %%i in ("myfile.*") do cd "%%~dpi" 
```

（如果从命令行而不是在批处理文件中运行，则替换`%%`为。）`%`

如果搜索不使用通配符，您可以这样做：

```
for /R %%i in (.) if exist "%%i\myfile.txt" do cd "%%i" 
```

如果您需要使用该`dir`命令，例如，只选择只读文件，这是另一个选项：

```
for /F "usebackq tokens=*" %%i in (`dir /s /b /ar "readonly.txt"`) do cd "%%~dpi" 
```

# c - c语言中关于函数指针的2个问题

> ID：13242266
> 
> 赞同：2
> 
> 时间：2012-11-05T23:45:42.677
> 
> 标签：c, function

我有两个问题

1.我看到了

```
int (*Ptr)(int,int);
Ptr=someOtherFuncion; 
```

它不应该是这样的吗？

```
Ptr=&someOtherFuncion; 
```

2.我知道函数指针是这样的回调

```
 someOtherFunction(functionPointer) 
```

如果我放置一个不是指针的常规函数​​有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T23:51:23.050

函数的名称几乎立即衰减为指向该函数的指针，因此`someOtherFunction`衰减为`&someOtherFunction`显式提供给您的同一个指针。事实上，地址运算符 ( `&`) 的操作数是少数几个*不会*发生衰减的地方之一。

这会产生有趣的后果：即使您取消引用函数指针，它也会立即再次衰减。所以以下都是等价的：

```
someOtherFunction(1, 2);
(*someOtherFunction)(1, 2);
(**someOtherFunction)(1, 2);
(***someOtherFunction)(1, 2); 
```

所以，如果你觉得分配给一个没有明确地址的函数指针感到不舒服，一定要把它`&`放在那里，但你不必这样做。

解决问题的第二部分：*总是*通过函数指针调用函数，但是由于上述即时衰减，普通函数可以像函数指针一样被调用。

# iphone - iPhone 5 上的游戏中心视图被截断

> ID：13242267
> 
> 赞同：1
> 
> 时间：2012-11-05T23:45:43.393
> 
> 标签：iphone, size, game-center, mainwindow

我正在更新一个旧项目以支持 iPhone/iPod 5 的 4 英寸屏幕。我已将 Default-568h@2x.png 添加到我的项目中，几乎一切都很好，除了：

*   游戏中心覆盖（视图控制器）在底部被切断。![游戏中心覆盖被切断](../Images/7bba2e01c962d509ab16f5212d96ee6c.png)
*   推文弹出窗口不是全宽的。
*   屏幕右侧/底部未接收到触摸输入。

好像我的窗口长度不正确。

（我将提出一个解决方案，但我想要一些关于这是否是安全（或“正确”）解决方案的反馈。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:48:38.820

我手动编辑了我的 MainWindow.xib 文件，将 NSFrameSize 从 {320, 480} 更改为 {320, 568}，这已经解决了明显的问题。

这似乎不会在较旧/较小的屏幕上引起问题，但我想知道这是否是最好的全面解决方案......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:54:59.183

您不应该使用以下方法获得当前屏幕尺寸，然后使用它而不是手动更改它

```
 CGRect screenRect = [[UIScreen mainScreen] bounds];
CGFloat screenWidth = screenRect.size.width;
CGFloat screenHeight = screenRect.size.height; 
```

# mysql - MYSQL 查询：组合列并获取计数

> ID：13242268
> 
> 赞同：0
> 
> 时间：2012-11-05T23:45:42.927
> 
> 标签：mysql

我有大约 9 个包含相同类型字段的表。我想首先组合其中的 9 个，然后在该组合列中获得唯一值的不同计数。这是我到目前为止尝试过的，但无济于事。我也不确定这是返回此值的最有效方法吗？

```
SELECT COUNT(DISTINCT aircraft_id) FROM 
(
SELECT aircraft_id FROM database.a_message UNION ALL
SELECT aircraft_id FROM database.b_message UNION ALL
SELECT aircraft_id FROM database.c_message UNION ALL
SELECT aircraft_id FROM database.d_message UNION ALL
SELECT aircraft_id FROM database.e_message UNION ALL
SELECT aircraft_id FROM database.f_message UNION ALL
SELECT aircraft_id FROM database.g_message UNION ALL
SELECT aircraft_id FROM database.h_message UNION ALL
SELECT aircraft_id FROM database.i_message
) ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:51:04.013

```
SELECT DISTINCT aircraft_id,count(aircraft_id) FROM 
(
SELECT aircraft_id FROM database.a_message UNION ALL
SELECT aircraft_id FROM database.b_message UNION ALL
SELECT aircraft_id FROM database.c_message UNION ALL
SELECT aircraft_id FROM database.d_message UNION ALL
SELECT aircraft_id FROM database.e_message UNION ALL
SELECT aircraft_id FROM database.f_message UNION ALL
SELECT aircraft_id FROM database.g_message UNION ALL
SELECT aircraft_id FROM database.h_message UNION ALL
SELECT aircraft_id FROM database.i_message
) group by aircraft_id; 
```

或者

```
select aircraft_id,count(aircraft_id)
(
SELECT DISTINCT aircraft_id FROM 
(
SELECT aircraft_id FROM database.a_message UNION ALL
SELECT aircraft_id FROM database.b_message UNION ALL
SELECT aircraft_id FROM database.c_message UNION ALL
SELECT aircraft_id FROM database.d_message UNION ALL
SELECT aircraft_id FROM database.e_message UNION ALL
SELECT aircraft_id FROM database.f_message UNION ALL
SELECT aircraft_id FROM database.g_message UNION ALL
SELECT aircraft_id FROM database.h_message UNION ALL
SELECT aircraft_id FROM database.i_message
)
) group by aircraft_id; 
```

# java - Java和OpenGL；使用 delta 计算与帧无关的运动时的渲染伪影

> ID：13242269
> 
> 赞同：1
> 
> 时间：2012-11-05T23:45:45.687
> 
> 标签：java, opengl, lwjgl, delta

因此，我一直在使用 opengl 在 java 中制作一个小型演示程序，作为练习。一切都很顺利，直到我实现了 getTime(); 和 getDelta(); 计算每帧花费多少时间的函数。然后我通过将它们的速度乘以 getDelta() 将其应用于我所有的运动计算；它运作良好，只有当帧随机轻微下降和 getDelta(); 返回一个稍大的值，我的计算开始输出非常奇怪的值，这些值仍然在计算计算的运动范围内但不正确，这发生在几帧直到帧速率上升到正常（在这种情况下为 250FPS）和运动正常继续，甚至从确切位置继续。自 getDelta(); 以来，我不知道是什么原因造成的。似乎运作正常？

继承人一些代码：

```
private void movementCalculations(double delta) {

    sinInc += 0.0015;
    sinInc2 += 0.010;

    xMove[0] = xSpeed * (float) Math.sin(Math.toDegrees(sinInc / 100 * delta)) * 7500;
    yMove[0] = ySpeed * (float) Math.sin(Math.toDegrees(sinInc / 200 * Math.PI * delta)) * 2500;
    zMove[0] = zSpeed * (float) Math.sin(Math.toDegrees(sinInc / 200 * delta)) * 1250;

    for (int i = 1; i<16; i++) {
        xMove[i] = xSpeed * (float) Math.sin(sinInc2 / 128 * Math.PI * i/2 * delta) * WIDTH * 16;
        yMove[i] = ySpeed * (float) Math.sin(sinInc2 / 64 * Math.PI * i * delta) * HEIGHT * 4;
    }

    xMove[16] = xSpeed * (float) Math.sin(sinInc2 / 64 * Math.PI * 2 * delta) * WIDTH * 8;
    yMove[16] = ySpeed * (float) Math.sin(sinInc2 / 32 * Math.PI * 2 * delta) * HEIGHT * 4;

    xMove[17] = xSpeed * (float) Math.sin(sinInc2 / 32 * Math.PI * 2 * delta) * HEIGHT * 10;
} 
```

在以下调试输出中，Delta 4.0 是 250FPS 的正常值，然后 FPS 下降，突然 xMove[17] 返回几乎一样大但为负的值？

`Last frame in milliseconds: 231884072 Delta: 4.0 xMove[17]: 164.297 Last frame in milliseconds: 231884077 Delta: 5.0 xMove[17]: -160.83817 Last frame in milliseconds: 231884080 Delta: 3.0 xMove[17]: -0.7198944 Last frame in milliseconds: 231884084 Delta: 4.0 xMove[17]: 162.12277`

如果这还不够，这里有一个应用程序的工作 JAR 可执行文件，它包含在 JAR 中运行它的所有内容，因此您可以看到自己： [http ://harha.us.to/files/files_public/Starfield_Exe.jar](http://harha.us.to/files/files_public/Starfield_Exe.jar)

我只是不知道出了什么问题，或者我的代码中有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T04:12:11.877

您当前正在乘以增量，那么与帧速率无关的是...旋转速度`sinInc`？`sinInc2`

您可能想要乘以移动速度 ( `{x|y|z}Speed`)，但很难确定。

您应该首先将 delta 乘法向上移动到公因数，而不是`* delta`到处粘贴。

```
sinInc += (0.0015 * delta); 
```

将清楚地表明正弦增加将与帧速率无关，每单位时间为 0.0015 个单位。

至于运动，我怀疑你在`someXCoordinate[i] += xMove[i]`某个地方做。如果是这样，那么这就是放置 delta 的地方：

```
obj.xPosition += (obj.xVelocity * delta); 
```

# ms-access - 访问查询，其中条件类似于 Table1.Field 但字段是包含“*”的字符串类型

> ID：13242271
> 
> 赞同：1
> 
> 时间：2012-11-05T23:45:48.453
> 
> 标签：ms-access

我正在尝试在访问中创建一个选择查询，其中 Table2.FullNameField 列标准为“Like Table1.ShortNameField”。因此，如果 Table2.FullNameField 包含 Table1.ShortNameField，则选择该记录。这两个字段都是字符串。问题是名称包含 *。这是一个例子：

ShortNameField = "A*01"

FullNameField = “A*01:04”、“A*15:01”、“A*03:02”等

查询条件 = "Like Table1.ShortNameField" => Like A*01（其中 * 被解释为通配符）

上面 ShortNameField 的预期/期望结果是选择 FullNameField 为“A*01:04”的记录，但我得到的是“A*15:01”的记录。

所以问题是如何让 Like 函数将短名称中的 * 视为字符串的字符而不是通配符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T00:25:12.527

您可以考虑替换字符：

```
SELECT  t.shortnamefield, t.fullnamefield
FROM Table t
WHERE Replace([fullnamefield],"*","|") 
     Like "*" & Replace([shortnamefield],"*","|") & "*" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T02:02:27.407

要对 LIKE 子句中的特殊字符进行转义，一般规则是将字符括在 [] 中，例如 [*] 和 [?]。

例子：

```
select * from x where y like "[*]*" 
```

将为您提供表 x 中的所有记录，其中 y 字段以星号 (*) 开头。

# jquery - 使用 jQuery 选择仅 1 个类的紧随图像

> ID：13242272
> 
> 赞同：0
> 
> 时间：2012-11-05T23:45:49.680
> 
> 标签：jquery, image, next

我试图只选择使用 jQuery 的类的以下 img。

这不应该工作：

```
$('.upload_preview').next('img').attr('src',imgurl); 
```

这工作得很好，并且会填充所有 img 标签，但我只需要紧随其后的一个

```
 $('.upload_preview img').attr('src',imgurl); 
```

我遇到的问题是有多个上传字段。一旦我上传了一张图片，我需要抓住那个即时的 img 标签并填充它。这是在使用 Wordpress Media Uploader 的 click 函数中进行的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:56:05.750

试试这个：

```
$('.upload_preview img').first().attr('src',imgurl); 
```

你说使用`$('.upload_preview img')`得到了你所有的图像，所以从那个集合中只取`.first()`一个......

*请注意，如果图像位于元素内部*，则“紧跟图像”是描述图像元素的一种误导方式`'.upload_preview'`（它必须是您的第二行代码才能执行您所说的操作）。“第一个孩子形象”可能是一个更好的表达方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:49:34.397

不确定我是否正确理解，但如果您在 .upload_preview 中有图像，那么

```
$('.upload_preview img').next('img:first').attr('src', imgurl);​​ 
```

应该做的伎俩

# jquery - jQuery事件实时验证输入

> ID：13242278
> 
> 赞同：0
> 
> 时间：2012-11-05T23:46:07.903
> 
> 标签：jquery

我有一个要验证的表单字段。

```
<label for="name">Name: </label>
<input type="text" id="name" name="name"></input> 
```

当用户填写输入并移至下一个输入时，我想做一个 AJAX 请求。

我应该用 jQuery 监听什么事件？

我知道 jQuery Validation Plugin，但我认为它对于这种简单的回调来说太致命了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:56:58.277

对于您的每个输入，您都可以监听`blur`事件。[**在这里测试一下。**](http://jsfiddle.net/AgPp4/1/)

**HTML**

```
<form id='myform'>
    <label for="fname">First Name: </label>
    <input type="text" id="fname" name="fname"></input>
    <br/>
    <label for="lname">Last Name: </label>
    <input type="text" id="lname" name="lname"></input>
</form>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**JavaScript**

```
$('#myform').children('input').each(function(i, input){
    $(input).on('blur', validator);
});

function validator(){
    console.log('validating code goes here');
} 
```

# php - 为什么将MVC中的View拆分成视图类和模板

> ID：13242279
> 
> 赞同：14
> 
> 时间：2012-11-05T23:46:16.117
> 
> 标签：php, model-view-controller, magento, design-patterns, joomla

我对设计模式比较陌生，但我觉得我对 MVC 模式以及这种代码分离带来的优势有了很好的理解。

然而，我两次都看到了 MVC 模式的实际应用（Magento 和 Joomla！），还有进一步的专门化，*视图*由视图类（Magento 块）和 PHP 模板文件组成。如果有人能解释这种分裂的好处，我将不胜感激。

我也不知道如何在视图类和模板文件之间拆分我的代码。有时我发现自己编写了一个看似冗余的视图类（在 Joomla 中！），它只是访问模型，然后使数据可用于模板。模板中应该出现什么代码，视图类中应该出现什么代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T00:41:43.253

View，在 MVC 启发的设计模式中，负责你所有的 UI 逻辑。他们应该从模型层请求信息，并根据他们收到的信息，选择应该使用哪些模板来创建响应。或者即使需要任何渲染（视图也可以只发送一个 HTTP 标头）。

> [你可以说在经典的 MVC 和 Model2 MVC 模式中，视图只从模型层读取，而控制器只向它写入。]

如果您从模型层收到一些错误状态，视图将采用主布局模板并补充它的模板，该模板包含错误消息的 HTML 片段。然后它将整个东西组装起来向用户展示（在 Web 应用程序的情况下是浏览器）。

在您的基本 Web 应用程序中，模板只是包含标签和 php 变量的简单文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T00:08:13.717

您可以将`view`视为`what`并将模板视为`how`。

视图通过使用模型准备数据并使该数据可用于模板。

反过来，模板通常在视图的范围内被调用（至少在 Joomla! 中）。

起初这似乎有点多余，但是当使用*模板覆盖*时，这种方法的威力就会显现出来。然后，可以单独保留视图，仅覆盖模板（或子模板，就此而言）。

即使使用相同的主 (Joomla!) 模板，您也可以指定不同的*视图模板*作为参数，以防您需要一些专门的展示。这也消除了*代码重复*。

例如，假设您创建了一个新的*主模板*。您可以覆盖一些默认视图/模板，而其他一些则保持不变。然后，您可以创建一个新*视图*，例如*博客视图*，以及 2 个模板，*浅色间隔*和*深色密集*，用于 2 个不同的场景。这样，您只有一个视图来准备所有`what`和几个不同的模板来处理`how`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T00:03:17.400

在一般情况下，“视图”和“模板”之间的划分是这样的，如果您要通过不同的方法呈现视图数据 [即。HTML, XML, JSON, etc.] 那么你不需要继续重写'View'类，只需要创建新的'Template'类。如果您想将 AJAX 调用合并到您的前端，或者从其他应用程序（例如智能手机应用程序）进行调用，这将非常有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T00:27:33.207

老实说...性能的最佳选择是在后端创建 Web 服务并使用 javascript 库与服务器通信。joomla 和其他 cms 发行版试图将这两种设计模式抽象到 MVC 中，从而导致 MVC 和 Web 服务/客户端代码的混合。这种混合性质允许将扩展扩展到 javascript 领域，这似乎是 web 的发展方向。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T00:10:36.840

阅读此[http://www.codinghorror.com/blog/2008/05/understanding-model-view-controller.html](http://www.codinghorror.com/blog/2008/05/understanding-model-view-controller.html)。对我来说，MVC 意味着将一个函数注册到一个数组并循环遍历该数组并最终在主程序中调用一个函数。但对于许多人来说，似乎将模型（数据库）与视图（html 模板）和控制器（主应用程序）分开。但这不是我认为程序的特别之处。当您开发Web应用程序时，您自然会拥有所有这些后端，例如数据库，浏览器，后端和前端，html，css，图像文件，视频文件和php语言等。为什么用复杂的语言来混淆开发？我认为 MVC 通常是有用的。学习装饰器模式更有用。

# asp.net-mvc - 用于修改 Global.asax.cs 的 Nuget PowerShell 脚本

> ID：13242282
> 
> 赞同：5
> 
> 时间：2012-11-05T23:46:35.827
> 
> 标签：asp.net-mvc, powershell, nuget

我正在为我的公司 MVC4 模板构建一个 nuget 包。我遇到了一个问题，我需要`Global.asax.cs`修改以添加这两行：

```
using System.Web.Optimization; 
```

在顶部，在命名空间之前和

```
BundleConfig.RegisterBundles(BundleTable.Bundles); 
```

在`Application_Start()`方法结束时

我尝试在其中创建一个`Global.asax.cs.pp`with `namespace $rootnamespace$`，但这似乎不起作用。似乎 Nuget 不会覆盖现有文件？

如我所见，我的最后一个选择是编写一个 powershell 脚本（`Install.ps1`？）来执行此操作。这是我的`template.nuspec`

```
<?xml version="1.0" encoding="utf-8"?>
<package>
  <metadata>
    <id>Template.MVC4</id>
    <version>1.5</version>    
    <title>MVC4 Template</title>
    <description>Installs and configures files for MVC 4 application template.</description>
    <authors>Me</authors>
    <language>en-US</language>
    <dependencies>
        <dependency id="Microsoft.AspNet.Web.Optimization" />
    </dependencies>
    <iconUrl>http://www.someurl.com/Logo.jpg</iconUrl>
  </metadata>
  <files>   
    <file src="Template\Helpers\*" target="content\Helpers\" />
    <file src="Template\Content\*.css" target="content\Content\" />
    <file src="Template\Content\animGif\*" target="content\Content\animGif\" />
    <file src="Template\Content\custom-theme\*" target="content\Content\custom-theme\" />
    <file src="Template\Content\templateImages\*" target="content\Content\templateImages\" />
    <file src="Template\Scripts\*" target="content\Scripts\" />
    <file src="Template\Views\Shared\*" target="content\Views\Shared\" />
    <file src="Template\Views\Home\*" target="content\Views\Home\" />
    <file src="Template\Views\_ViewStart.cshtml" target="content\Views\" />
    <file src="NuGetPackage\App_Start\*" target="content\App_Start\" />
    <file src="NuGetPackage\Controllers\*" target="content\Controllers\" />
    <file src="NuGetPackage\Helpers\*" target="content\Helpers\" />
    <file src="NuGetPackage\Models\*" target="content\Models\" />
    <file src="NuGetPackage\Views\*" target="content\Views\" />
    <file src="NuGetPackage\*" target="content\" />
  </files>
</package> 
```

我的问题是 2 倍，1）我在 .nuspec 中做错了吗？和2）如果`Global.asax`用.pp修改a不是一个选项，那么当这个nuget被添加到项目时，我需要编写什么powershell脚本才能自动运行，我需要做任何特别的事情吗让它运行（阅读文档似乎只是放入`Install.ps1`就`tools\`可以了）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T16:32:17.647

如果有人需要，这是答案，它在您`Install.ps1`的`Tools`文件夹中：

```
param($installPath, $toolsPath, $package, $project)

# Read the transformed text from the custom template included in the package
$customGlobalAsax = $project.ProjectItems | where { $_.Name -eq "Global.asax.cs.custom" }
$customGlobalAsax.Open()
$customGlobalAsax.Document.Activate()
$customGlobalAsax.Document.Selection.SelectAll(); 
$replacementGlobalAsax = $customGlobalAsax.Document.Selection.Text;
$customGlobalAsax.Delete()

# Replace the contents of Global.asax.cs
$globalAsax = $project.ProjectItems | ForEach-Object { $_.ProjectItems } | where { $_.Name -eq "Global.asax.cs" }
if($globalAsax) {
    $globalAsax.Open()
    $globalAsax.Document.Activate()
    $globalAsax.Document.Selection.SelectAll()
    $globalAsax.Document.Selection.Insert($replacementGlobalAsax)
    $globalAsax.Document.Selection.StartOfDocument()
    $globalAsax.Document.Close(0)
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T10:54:17.823

在继续编写 PowerShell 脚本以更新现有源代码之前，我会先看看[WebActivator](https://github.com/davidebbo/WebActivator)。WebActivator 是一个 NuGet 包，可用于将启动和关闭代码添加到应用程序中，而无需修改 global.asax。

您可能希望使用 PostApplicationStartMethod 属性，以便在最后完成捆绑注册。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T12:49:46.320

如果您想“替换”某个文件中的某些文本，您可以这样做：

```
$file = $project.ProjectItems | ForEach-Object { $_.ProjectItems } | where { $_.Name -eq "Global.asax.cs" }
if($file) {
    $file.Open()
    $file.Document.Activate()
    $file.Document.Selection.StartOfDocument()
    $file.Document.ReplaceText("TextToFind`n", "TextToReplace")
} 
```

注意``n`\n 转义或输入（CR）。

如果您需要引号字符，它也`"`可以被转义``"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-24T14:32:01.327

如果有人看到这个帖子，我想指出，从 2013 年 4 月发布的 2.5 版开始，Nuget 将覆盖内容文件。如果使用 GUI，安装过程将检测问题并提示是否覆盖文件。新选项 -FileConflictAction 允许设置默认值。

请参阅发行说明： [http ://docs.nuget.org/docs/release-notes/nuget-2.5](http://docs.nuget.org/docs/release-notes/nuget-2.5)

# jquery - 解析内容中的所有链接

> ID：13242288
> 
> 赞同：1
> 
> 时间：2012-11-05T23:47:24.820
> 
> 标签：jquery, asp.net, html, anchor

我需要解析整个内容并查找链接，如果链接具有 pdf、doc、xls、ppt 等扩展名，则在链接旁边添加文件类型和文件大小。

我在 Stack Overflow 中找到了一个使用 jQuery 获取文件大小的示例，`getResponseHeader("Content-Length")`但这个示例始终为每个链接返回相同的文件大小。有人有这个样品吗？任何帮助都是高度适用的。

我当前的代码（我还没有检查扩展）

```
<script type="text/javascript">
    $(document).ready(
        function () {
            $('a').each(function (index, obj) {                    
                var eleHref = $(obj).attr('href');
                var extension = eleHref.substr((eleHref.lastIndexOf('.') + 1)).toUpperCase();
                var request;
                request = $.ajax({ type: "HEAD", url: $(eleHref).val(), success:
                function () {
                    $(obj).append(" (" + extension + ", " + parseFloat(request.getResponseHeader("Content-Length") / 1024).toFixed(2) + 'KB)');
                }
                });
            })             
        });            
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T00:15:50.853

假设您的图像/文档位于同一域中，这应该可以。

```
$('a').each(function() {

  var $this = $(this)
    , href = $this.attr('href')
    , ext = /(jpg|png|gif|doc|ppt|xls)$/i.exec( href )
    , req;

  if ( ext.length ) {
    req = $.ajax({
      type: 'HEAD',
      url: href,
      success: function() {
        var size = +req.getResponseHeader('Content-Length') / 1024 + 'KB';
        $this.append('<span>Extension: '+ ext +'</span>')
             .append('<span>Size: '+ size +'</span>');
      }
    });
  }

}); 
```

**编辑：**如果需要，可以将扩展映射到对象以获取更多信息：

```
var extensions = {
  ppt: 'Microsoft PowerPoint',
  doc: 'Microsoft Word',
  pdf: 'Adobe Portable Document Format',
  ...
}; 
```

进而：

```
...
$this.append('<span>Extension: '+ extensions[ ext ] +'</span>')
... 
```

# c# - 仅写入列表视图中的一列？

> ID：13242289
> 
> 赞同：3
> 
> 时间：2012-11-05T23:47:31.333
> 
> 标签：c#, winforms, listview

我的 listView 中有两列，我们称它们为 Column1 和 Column2。

是否可以仅将一堆项目添加到 column1，并使其仅在 column1 下而不是 column2 下？

当我添加项目时，它会将一个项目添加到 Column1，然后是 Column2，我不希望这样。

我该怎么做呢？

这是我的一些测试代码。我用两个字符串制作了一个数组。我希望这两个字符串都放在 column1 下（每个都在自己的行中）而不是 column2 下。当我测试它时，它们仍然在 column1 AND column2 下，这是我不想要的。

```
string[] h = {"Hi","Hello"};
listViewGoogleInsight.Items.Add(new ListViewItem(h)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:09:25.580

也许这会有所帮助：

```
string[] h = {"Hi","Hello"}; 
foreach(string s in h) //this in case when you have more that two strings in you array
   listViewGoogleInsight.Items.Add(new ListViewItem(s)); 
```

在您的代码中，您将一个字符串数组传递给 a 的构造函数，该构造函数`ListViewItem`正在创建“Hello”的一个 ListViewSubitem。您应该分别添加每个字符串。

编辑：在您要求仅添加到 column2 之后，您可以这样做。您必须将空字符串传递给第一列，因为您需要为第一列创建一个 ListViewItem 并为每个其他列创建一个额外的 ListViewSubitems。

```
 string[] h = { "Hi", "Hello" };
int count=0;
                foreach (string s in h) //this in case when you have more that two strings in you array
                {
                    ListViewItem lvi = listView1.Items[count++];
                    lvi.SubItems.Add(s);
                    listView1.Items.Add(lvi);
                } 
```

# mysql - 简化查询（使用左外连接）

> ID：13242293
> 
> 赞同：1
> 
> 时间：2012-11-05T23:47:51.723
> 
> 标签：mysql, sql, join, query-optimization, outer-join

我们的应用程序使用这个查询已经有一段时间了：

```
SELECT id 
FROM invoice 
WHERE id NOT IN 
(SELECT invoice_id FROM invoice_transaction) 

#437 rows returned 
```

在代码审查中，这个查询用左外连接重写：

```
SELECT invoice.id 
FROM invoice 
LEFT OUTER JOIN invoice_transaction on invoice.id=invoice_transaction.invoice_id 

#586 rows returned 
```

第一个查询返回 437 行，第二个（假定相同）查询返回 586 行。这不是对左外连接的有效使用吗？

重写此查询的更好方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T23:52:27.167

以下查询应返回与第一个查询相同的结果：

```
SELECT invoice.id 
FROM invoice 
LEFT OUTER JOIN invoice_transaction 
             on invoice.id = invoice_transaction.invoice_id
WHERE invoice_transaction.invoice_id IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T00:12:55.120

最好的方法是这个

```
SELECT id 
FROM invoice as i
WHERE not exists
(SELECT invoice_id FROM invoice_transaction as it where it.invoice_id=i.id ) 
```

# prolog - 在 Prolog 中使用全局数组或列表

> ID：13242297
> 
> 赞同：1
> 
> 时间：2012-11-05T23:48:15.020
> 
> 标签：prolog

我有一个任务以前缀表示法输入数学问题的字符/整数列表，并在输入错误时输出结果或错误。输入将是 main([list], X)，输出应该是结果。

我的问题是尝试以我在 C 中的方式使用堆栈，以便我可以使用我知道但不知道如何实现它的前缀方法。

我目前在尝试使用 OStack([]) 时遇到错误。作为声明，想知道是否有人可以解释或显示使用全局列表/数组的基本设置，或者我是否必须使用 main 传递的列表并创建多个方法。

具体来说，我想知道我是否可以像现在这样使用 OpStack 和 OStack，以及如何做到这一点。

谢谢你。

```
/* Used to imitate a stack */
pop(E, [E|Es],Es).
push(E, Es, [E|Es]).
seehead([X|TAIL],X).

OpStack([]).
OStack([]).

loop(Y,[X|TAIL]) :- integer(X), !,
                 pop(Popped, OStack, OStack),
             pop(Marker, OpStack, OpStack),
             pop(Operator, OpStack, OpStack),
         Z is Y + Operator + Popped,
         ( integer(seehead([TAIL],Z)) ->
          loop(Y, [Pop2|OStack]);
          push(Z, OStack, OStack), main(TAIL,X)
         ).

main([X |[]], X):-write(X).

main([X| TAIL],Z):- X == +, !, push(+, OpStack, OpStack), push("X", OStack, OStack),           main(TAIL, Z).
main([X| TAIL],Z):- X == *, !, push(*, OpStack, OpStack), push("X", OStack, OStack),     main(TAIL, Z).
main([X| TAIL],Z):- X == -, !, push(-, OpStack, OpStack), push("X", OStack, OStack), main(TAIL, Z).
main([X| TAIL],Z):- X == /, !, push(/, OpStack, OpStack), push("X", OStack, OStack), main(TAIL, Z).

main([X|TAIL], Z):-  integer(X),!,
         ( seehead([TAIL],Z) == "X" ->
          push(X, OStack, OStack), main(TAIL,X);
           loop(Y,OStack)
        ). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:56:52.350

您的代码包含一些语法问题，SWI-Prolog 亲切地强调了这些问题。

```
...
seehead([X|TAIL],X).  % use _TAIL. Note that usuall this is named peek
...
OpStack([]).  % first letter MUST be lowercase!
OStack([]).   % ditto
...
pop(Marker, OpStack, OpStack), % Marker is singleton!
...
loop(Y, [Pop2|OStack]);  % Pop2 is singleton!
...
loop(Y,OStack) % Y is singleton!
... 
```

单例是无用的，通常表示拼写错误。

但总的来说，我认为你是从错误的角度解决问题。Prolog 具有声明式编程的特点，通常这意味着比过程式编程**更简单**的代码。并且堆栈在评估中是*隐含*的，Prolog*是*一种基于递归的语言。不需要模拟堆栈（确实，对于这个例子，C 也比模拟堆栈更好地使用递归）。

因此，为了简单起见，实现规范：

```
main(List, X) :- loop(List, [], X).

loop([+|R], R2, N) :- !,
   loop(R, R1, T1),
   loop(R1, R2, T2),
   N is T1+T2.
...
loop([N|R], R, N) :-
   integer(N), !. % you will need to translate the character to number, I've simplified here

loop(Spec, _, _) :- % catchall rule 
   write(error_here(Spec)), nl,
   fail. % no error recovery, just print 
```

# asp.net - 使用 asp.net 加载 xml 文件不返回任何记录

> ID：13242298
> 
> 赞同：0
> 
> 时间：2012-11-05T23:48:27.527
> 
> 标签：asp.net, xml, vb.net

我有这个 XML 内容：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Option1>false</Option1>
  <Option2>http://www.google.com</Option2>
  <Option3>false</Option3>
  <Option4>false</Option4>
</configuration> 
```

我试图使用下面的代码来读取这个 xml，但 Dataset.tables.count 总是返回 0。

```
Dim dtConfig As New DataSet
Dim sArqXml as String = "asd.xml"

Dim xmlRoot As New XmlRootAttribute
xmlRoot.ElementName = "configuration"
xmlRoot.IsNullable = True

Dim xmlSer As XmlSerializer = New XmlSerializer(dtConfig.GetType, xmlRoot)
Dim fs As FileStream = New FileStream(sArqXml, FileMode.Open)

dtConfig = CType(xmlSer.Deserialize(fs), DataSet)
fs.Close() 
```

我怎样才能阅读这个 XML？解决方案可以在 c# 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T01:48:25.493

将 xml 文件加载到数据集中。

```
 Imports System.Xml
    Dim ds As New DataSet
    ds.ReadXml("path_to_your_xml_file") 
```

我认为在你的情况下应该是 ds.Table(0).Rows.Count

# glassfish - glassfish-application-client.xml 的正确文档类型是什么？

> ID：13242300
> 
> 赞同：1
> 
> 时间：2012-11-05T23:48:39.867
> 
> 标签：glassfish, glassfish-3

将应用程序部署到 GlassFish Open Source Edition 3.1.2（内部版本 23）时出现错误。GlassFish 抱怨我在 DOCTYPE 标记中打错字，但我从[Oracle 文档](http://docs.oracle.com/cd/E18930_01/html/821-2417/beaqo.html)中逐字复制了 DOCTYPE ！我使用了以下文档类型：

```
<!DOCTYPE glassfish-application-client PUBLIC ""-//GlassFish.org//DTD 
GlassFish Application Server 3.1 Application Client 6.0//EN"" 
"http://glassfish.org/dtds/glassfish-application-client_6_0-1.dtd"> 
```

什么是正确的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T23:48:39.867

正确的文档类型在“应用程序客户端”（在第二行）之前有一个“Java EE”，并且没有奇怪的四引号。我已在 Oracle 文档中告知了此错误。

```
<!DOCTYPE glassfish-application-client PUBLIC "-//GlassFish.org//DTD 
GlassFish Application Server 3.1 Java EE Application Client 6.0//EN" 
"http://glassfish.org/dtds/glassfish-application-client_6_0-1.dtd"> 
```

# jquery - 在嵌套在 .on() 内时使用 .off()

> ID：13242306
> 
> 赞同：1
> 
> 时间：2012-11-05T23:49:14.287
> 
> 标签：jquery, event-handling, listener, jquery-events

是否可以从侦听器中取消绑定侦听器？我想这样做是因为我有一个侦听器，它决定了它自己的解除绑定标准（例如，当按下某个键时，侦听器应该解除绑定）。

```
$input.on("keydown.listenerOne", function (press) {  
   if(press=="37"){
      $input.off("keyup.listenerOne");
   }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T23:51:48.623

是的，这是一个正确的方法。您可以在处理程序中取消绑定它，但请注意您有两个不同的事件（keyup 和 keydown）。也许你的意思是keyup。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T23:54:41.380

这不起作用，因为您正在绑定`keydown`事件并取消绑定`keyup`事件，根据您的示例，该事件没有绑定。此外，您引用的事件`press`将是`e`or`event`并且您需要引用该`which`属性：`if(e.which == 37)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T23:56:43.987

您应该取消绑定您正在绑定的同一件事。在这种情况下，您尝试在绑定`keyup`时解除`keydown`绑定。另外，`press`不会告诉你keyCode，你应该这样做

```
var code = press.keyCode || press.which;
if(code == 37) { //Enter keycode
   //Do something
} 
```

而不是`if (press == "37")`

取自[这个答案](https://stackoverflow.com/questions/302122/jquery-event-keypress-which-key-was-pressed)

# c# - 为什么 keydown 或 keyup 在此 SendMessage 示例中不起作用？

> ID：13242308
> 
> 赞同：1
> 
> 时间：2012-11-05T23:49:30.477
> 
> 标签：c#, dllimport, sendmessage

我正在使用此代码

```
 const int WM_KEYDOWN = 256;
    const int WM_KEYUP = 257;
    const int WM_CHAR = 258;

    public static void SendKeys(string message){
        int foregroundWindowHandle = GetForegroundWindow();
        uint remoteThreadId = GetWindowThreadProcessId(foregroundWindowHandle, 0);
        uint currentThreadId = GetCurrentThreadId();

        //AttachTrheadInput is needed so we can get the handle of a focused window in another app
        AttachThreadInput(remoteThreadId, currentThreadId, true);
        //Get the handle of a focused window
        int focused = GetFocus();
        //Now detach since we got the focused handle
        AttachThreadInput(remoteThreadId, currentThreadId, false);
        foreach (char c in message)
        {
            //SendMessage(focused, WM_CHAR, (int)c, null);
            SendMessage(focused, WM_KEYDOWN, 65, null);
            SendMessage(focused, WM_KEYUP, 66, null);
            SendMessage(focused, WM_CHAR, 67, null);
        }
    } 
```

当我测试它时（例如，记事本处于活动状态），只有字母 C 打印，所以只有 WM_CHAR 工作 - 为什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-06T00:53:06.423

首先，了解如何发送键盘消息的问题经常被问到。我假设您没有花费太多时间来寻找以前的答案。其次，了解初学者经常错误地认为发送键盘消息是最简单和最有效的解决方案。事实是，它通常不是最简单的，也不是最有效的，也不是最可靠的。

如果您要使用这样的 Windows 消息，那么请学习使用 Spy++。如果您不知道那是什么，请花一点时间熟悉 VS 工具菜单中的可用工具。

一个可能更简单、更有效和更可靠的解决方案通常是使用 WM_GETTEXT 和 WM_SETTEXT 消息。**并预测未来的问题，按下另一个应用程序中的按钮会向按钮的父**级发送 BN_CLICKED 通知。您可以使用 Spy++ 获得更多消息问题的答案。

# java - 套接字连接池

> ID：13242311
> 
> 赞同：1
> 
> 时间：2012-11-05T23:49:35.420
> 
> 标签：java, sockets

服务器是多线程的，我不想为每个请求创建一个套接字连接，而是要维护一个套接字连接池？如果一个客户端完成了它的工作，那么我想恢复连接并用于另一个客户端，有人可以解释我如何做套接字连接池吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T01:00:59.223

这个问题没有意义。入站连接通过 accept() 函数作为新套接字*传递给您。*你没有任何机会汇集它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:52:44.327

我不知道您要构建什么，但如果它的 TCP 服务器比您应该查看以下任何一个：

*   网状
*   灰熊
*   米娜

以上大部分内容为您处理线程池和长寿命连接（我不知道您所说的套接字池是什么意思）。我强烈建议您在看到一些好的轮子之前不要重新实现轮子；）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-06T12:31:32.793

这完全取决于客户及其编码方式。客户端应该打开一个套接字，并在该套接字上推送多个事务。您无法从服务器执行此操作，我也不认为这是一个很好的尝试。

问候优素福

# actionscript-3 - as3上的图像路径问题

> ID：13242312
> 
> 赞同：1
> 
> 时间：2012-11-05T23:49:37.000
> 
> 标签：actionscript-3, flashdevelop

我正在尝试为我们工作中的显示器创建一个屏幕保护程序。图像将上传到外部服务器，我将从该服务器中提取图像和 xml 文件。所以我的 Flash 应用程序和我的内容将位于两个不同的地方。我收到一个错误“SecurityError: Error #2000: No active security context”。如何覆盖错误并将图像带到我的舞台。

```
var xmlLoader:URLLoader = new URLLoader();
var xmlData:XML;
var imageList:XMLList;
var imageLoader:Loader = new Loader();
var timer:Timer =new Timer(5000);
var imageIndex:uint = 0;
var child:DisplayObject;

var path:String="http://bgxserv03.mgmmirage.org/interactivemedia/mmhub01/test/mb/edit_bay/hr/infoscreen/servamb/";

xmlLoader.load(new URLRequest(path +"output.xml"));
xmlLoader.addEventListener(Event.COMPLETE, xmlLoaded);
timer.addEventListener(TimerEvent.TIMER, tick);

function xmlLoaded(e:Event) {
     xmlData = new XML ( e.target.data);
     imageList = xmlData.image.name;
     timer.start();
     loadImage(imageList[0]);
}
 function imageLoaded(e:Event){
   if (child){
  myImageHolder.removeChild(child);
    }
 child = myImageHolder.addChild(imageLoader);
 Tweener.addTween(child, {alpha:0, time:1, delay:4});
 Tweener.addTween(child, {alpha:1, time:1, delay:5});
}

function loadImage(path:String){
imageLoader.load(new URLRequest( path +"photos/"));
imageLoader.contentLoaderInfo.addEventListener(Event.COMPLETE,imageLoaded);

} 
```

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:06:02.567

您需要将“Crossdomain.XML”放在服务器的根目录中。这将允许您的闪存文件从该服务器访问数据（在您的情况下为图像）。您可以从以下 URL 获取示例 xml，为您的服务器自定义它： [示例 CrossDomain.XML](http://twitter.com/crossdomain.xml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:09:27.970

What you are missing is probably a crossdomain.xml policy file at the domain of your image/xml files.

Use [this link](http://www.crossdomainmaker.com/) to create a crossdomain.xml file and add it to the root of your image/xml domain like so : "[http://bgxserv03.mgmmirage.org/crossdomain.xml](http://bgxserv03.mgmmirage.org/crossdomain.xml)"

The URLLoader load() function automatically checks for the crossdomain.xml. Loader class requires you specify that you are interested in checking for a policy file in a LoaderContext object sent to the load() function.

In your code, it looks like the error should be coming from the URLLoader xml file request, since it doesn't look like you are trying to access the bitmap data of your images in any way, which is normally what would throw a security error for image files. If it is a problem with the image loading part, then complete the following instructions and you should be set to go:

In your loadImage function, add a LoaderContext parameter to your load method call:

```
function loadImage(path:String){
    var loaderContext:LoaderContext = new LoaderContext();
    loaderContext.checkPolicyFile = true;
    imageLoader.load(new URLRequest( path +"photos/"), loaderContext);
    imageLoader.contentLoaderInfo.addEventListener(Event.COMPLETE,imageLoaded);
} 
```

Check out the [spec](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html) for more info on how to use the Loader class.

If you run into any trouble, [this thread](https://stackoverflow.com/questions/9716418/flash-as3-domain-com-crossdomain-xml-and-security-error) may be helpful.

# ruby-on-rails - Rails 远程表单验证

> ID：13242315
> 
> 赞同：5
> 
> 时间：2012-11-05T23:49:51.690
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, validation

只是一个简单的问题，我已经关注了[railscast](http://railscasts.com/episodes/136-jquery-ajax-revised)

远程真正的工作方式很好，但我如何验证模型？

我有这个

```
<%= form_for [:admin,@course], remote: true  do |f| %>
  <div class="field">
    <%= f.label :title, "The title:" %><br />
    <%= f.text_field :title %>
  </div>
  <div class="field">
    <%= f.label :description, "Descripcion:" %><br />
    <%= f.text_area :description %>
 </div>
 <div class="actions">
   <%= f.submit "Send"%>
 </div>
<% end %> 
```

我如何处理错误？

```
def create

  @course = Course.new(params[:course])

  respond_to do |format|
    if @course.save
      format.html { redirect_to admin_index_url, :notice=> 'Done !!' }
      format.js
    else
      format.html { flash.now[:alert] = "Not done" 
                    render "new"
                  }
      format.js
    end
  end        
end 
```

任何想法为什么这不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T00:12:28.963

由于您的 format.js 块是空的，并且创建操作是通过 :remote=>true 调用的，因此 rails 将执行默认操作，即查找 create.js.erb 以返回，它可能找不到。

为了说明，把它放在 app/views/?/create.js.erb 的 views 目录中：

```
alert('HI'); 
```

然后将其放入您的控制器中以查看替代方法：

```
respond_to do |format|
  if @course.save
    format.html { redirect_to admin_index_url, :notice=> 'Done !!' }
    format.js { render :js=>'alert("done");' }
  else
    format.html { flash.now[:alert] = "Not done" 
                render "new"
                }
    format.js { render :js=>'alert("not done");' }
  end
end 
```

所以现在，您只需将错误消息放入发送回的 HTML/Javascript 中，可能最简单的方法是将其放入适当的 .js.erb 文件中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T00:04:13.727

您必须在模型中定义验证器。

```
 class Course 
    validates :title, :presence => true
 end 
```

在您的控制器中，您尝试使用 @course.save 保存实例。如果它没有保存，您可以通过调用返回错误

```
 @course.errors.full_messages 
```

一旦你掌握了这些错误，你就传递给视图并向用户显示一条消息。不记得究竟如何使用 format js 来做到这一点。

编辑 2 ======== 检查此链接：[http](http://www.alfajango.com/blog/rails-3-remote-links-and-forms/) ://www.alfajango.com/blog/rails-3-remote-links-and-forms/ 试试这个

```
 respond_to do |format|
       if @course.save
          format.html { redirect_to admin_index_url, :notice=> 'Done !!' }
          format.js { render :js=>'alert("done");' }
       else
         render :json => @comment.errors, :status => :unprocessable_entity
       end
    end  

 In your javascript, bind the error callback and get the errors you passed in your controller.

 $(document).ready(function(){

$('#form_name').bind("ajax:error", function(evt, xhr, status, error){
  var $form = $(this),
      errors,
      errorText;

  try {
    // Populate errorText with the comment errors
    errors = $.parseJSON(xhr.responseText);
  } catch(err) {
    // If the responseText is not valid JSON (like if a 500 exception was thrown), populate errors with a generic error message.
    errors = {message: "Please reload the page and try again"};
  }

  // Build an unordered list from the list of errors
  errorText = "There were errors with the submission: \n<ul>";

  for ( error in errors ) {
    errorText += "<li>" + error + ': ' + errors[error] + "</li> ";
  }

  errorText += "</ul>";

  // Insert error list into form
  $form.find('div.validation-error').html(errorText);
});

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T22:08:46.007

为此，我开发了 jquery 插件。可能值得一看。

[https://github.com/bighostkim/remoteValidation](https://github.com/bighostkim/remoteValidation)

# c# - 如何制作一个简单的启动器应用程序？

> ID：13242319
> 
> 赞同：1
> 
> 时间：2012-11-05T23:50:17.510
> 
> 标签：c#, windows-8, visual-studio-2012, createprocess

我想为应用程序（例如 using `CreateProcess`）制作一个简单的启动器，我可以将其用作 HelloWorld 应用程序**并**自定义应用程序磁贴的外观——有点同时杀死两只鸟：

1.  熟悉环境和
2.  创建可以更改外观的图块*（不仅仅是更改应用程序的图标）。*

但是，我不确定从哪里开始。我尝试将此代码复制到命名空间中，但这不起作用：

```
[DllImport("coredll.dll")]
private static extern bool CreateProcess(null, "C:\\Program Files (x86)\\Steam\\Steam.exe"); 
```

完整的代码当然是这个用于 c# 的空白应用程序模板（*App.xaml.cs* -- at [C#, VB, and C++ project templates for Windows Store apps](http://go.microsoft.com/fwlink/?LinkId=234227)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T10:05:31.920

编写 Windows 应用商店应用程序需要学习执行常见任务的新方法。

一方面，Windows 应用商店应用程序（Metro）被限制运行其他进程。将您的应用想象为在沙盒中运行。您无法直接访问底层系统，您需要通过批准的渠道。

要在 Metro 中运行应用程序或打开文件，您应该[使用启动器](http://msdn.microsoft.com/EN-US/library/windows/apps/windows.system.launcher%28v=vs.10%29.aspx)。

要修改应用程序磁贴，您应该使用[磁贴 API](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh868260.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T04:25:30.413

而不是 call `CreateProcess`，您应该使用[Process](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)类。链接页面有一个创建和运行进程的示例。我想你会发现它比直接调用 Windows API 更容易使用。

# php - 用于列标题的 PHP 分解函数循环将所需的值返回到 Excel 文件中

> ID：13242321
> 
> 赞同：1
> 
> 时间：2012-11-05T23:50:26.863
> 
> 标签：php, mysql, excel

因此，我使用此代码将 mysql 查询标头中的数组返回到 Excel 文件中。

```
while($row_data = mysql_fetch_assoc($result)) {
$row = 1;
if ($col == 1) {
    $row_headings = array_keys($row_data);
    foreach($row_headings as $value) {
        $objPHPExcel->getActiveSheet()->setCellValueByColumnAndRow($col, $row, $value);
        $row++;
    }
    $row = 1;
    $col++; 
```

这些查询标头作为值返回，例如 1111X2222X3333。我想在某处使用这个explode函数来分解这些值

```
 list($sid,$gid,$qid) = explode("X", $string); 
```

使用此函数后，我想使用此查询在循环中使用此查询将所有这些列标题替换为我想要的值

```
 select * from lime_questions where sid = 1111 and gid = 2222 and qid = 3333 
```

如果有更好的方法来做到这一点，请告诉我。我很感激帮助

# c# - 计算文本文件中的单词数

> ID：13242328
> 
> 赞同：5
> 
> 时间：2012-11-05T23:51:14.850
> 
> 标签：c#, .net, regex

我正在尝试计算文本文件中的单词数，即这个，开始。

> 这是一个字数统计程序的测试。这只是一个测试。如果你的程序运行成功，你应该计算出这个文件有 30 个单词。

我正在使用 StreamReader 将文件中的所有内容放入一个字符串中，然后使用 .Split 方法获取单个单词的数量，但是当我编译和运行程序时，我一直得到错误的值。

```
using System;
using System.IO;

class WordCounter
{
    static void Main()
    {
        string inFileName = null;

        Console.WriteLine("Enter the name of the file to process:");
        inFileName = Console.ReadLine();

        StreamReader sr = new StreamReader(inFileName);

        int counter = 0;
        string delim = " ,.";
        string[] fields = null;
        string line = null;

        while(!sr.EndOfStream)
        {
            line = sr.ReadLine();
        }

        fields = line.Split(delim.ToCharArray());
        for(int i = 0; i < fields.Length; i++)
        {
            counter++;
        }
        sr.Close();
        Console.WriteLine("The word count is {0}", counter);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T23:57:39.290

尝试使用正则表达式，例如：

```
int count = Regex.Matches(input, @"\b\w+\b").Count; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T23:55:55.713

这应该适合你：

```
using System;
using System.IO;

class WordCounter
{
static void Main()
{
      string inFileName = null;

      Console.WriteLine("Enter the name of the file to process:");
      inFileName = Console.ReadLine();

      StreamReader sr = new StreamReader(inFileName);

      int counter = 0;
      string delim = " ,."; //maybe some more delimiters like ?! and so on
      string[] fields = null;
      string line = null;

      while(!sr.EndOfStream)
      {
         line = sr.ReadLine();//each time you read a line you should split it into the words
         line.Trim();
         fields = line.Split(delim.ToCharArray(), StringSplitOptions.RemoveEmptyEntries);
         counter+=fields.Length; //and just add how many of them there is
      }

      sr.Close();
      Console.WriteLine("The word count is {0}", counter);
} 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T23:55:40.750

几个提示。

1.  如果你只有句子“hi”，你的输出会是什么？
2.  您的计数器计算是：从 0 到`fields.Length`，递增计数器。和你`fields.Length`的柜台有什么关系？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T23:57:30.513

你可能会遇到一次性错误，试试这样的

```
 counter = 0;
    while(!sr.EndOfStream)
    {
        line = sr.ReadLine();
        fields = line.Split(delim.ToCharArray());
        counter += field.length();
    } 
```

当您可以直接获取数字时，无需遍历数组来计算元素

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-12T03:22:08.073

```
//Easy method using Linq to Count number of words in a text file
/// www.techhowdy.com
// Lyoid Lopes Centennial College 2018
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace FP_WK13
{
    static class Util
    {

        public static IEnumerable<string> GetLines(string yourtextfile)
        {
            TextReader reader = new StreamReader(yourtextfile);
            string result = string.Empty;
            string line;
            while ((line = reader.ReadLine()) != null)
            {
                yield return line;
            }
            reader.Close();
        }

        // Word Count 

        public static int GetWordCount(string str)
        {         
            int words = 0;
            string s = string.Empty;
            var lines = GetLines(str);

            foreach (var item in lines)
            {
                s = item.ToString();
                words = words +  s.Split(' ').Length;

            }

            return words;

        }

    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-24T11:01:08.050

```
using System.IO;
using System;
namespace solution
{
    class Program
    {
        static void Main(string[] args)
        {
            var readFile = File.ReadAllText(@"C:\test\my.txt");
            var str = readFile.Split(new char[] { ' ', '\n'}, StringSplitOptions.RemoveEmptyEntries);
            System.Console.WriteLine("Number of words: " + str.Length);
        }
    }
} 
```

# java - Eclipse 中每个 GUI 程序的奇怪错误

> ID：13242336
> 
> 赞同：1
> 
> 时间：2012-11-05T23:51:56.083
> 
> 标签：java, eclipse, swing, user-interface, scsi

```
Unable to open SCSI controller 0:[\] , error code: 0x5
Unable to open SCSI controller 1:[\] , error code: 0x5 
```

在我使用 GUI 编写的几乎**每个**程序中，当程序执行完毕时都会出现这两个错误。它只是随机开始的，我认为我没有做任何事情让它变成这样。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:54:28.430

请下载最新的JDK [http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

# matlab - 获取圆边界

> ID：13242341
> 
> 赞同：5
> 
> 时间：2012-11-05T23:52:23.280
> 
> 标签：matlab

我的矩阵中有一个 0 和 1 的逻辑圆形掩码，如下所示。

![面具](../Images/3e16adf1c69166e297f6b05335546790.png)

在另一个矩阵中获得外边界的最快方法是什么？

本质上，如果行中有重复的 1，我必须扫描每行左侧的第一个 1 和右侧的第一个 1（最上面和最下面的点只有一个 1）....有人可以帮我吗找到一个快速的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T00:02:10.583

您可以为此使用[regionprops](http://www.mathworks.nl/help/images/ref/regionprops.html)，以下是一些识别圆圈的示例：

*   [链接1](http://www.mathworks.com/matlabcentral/answers/42587-detect-certain-shapes-in-binary)
*   [链接2](http://www.mathworks.nl/products/image/examples.html?file=/products/demos/shipping/images/ipexroundness.html)
*   [链接3](http://blogs.mathworks.com/steve/2011/06/21/advanced-maneuvers-with-regionprops/)

或者如果你确定只有一个圆圈并且没有噪音，我假设你可以找到底部/顶部/左/右边缘并从中工作：

```
m = loadcirclefunction();
pix_left  = find(any(m,1),1,'first');
pix_right = find(any(m,1),1,'last');
pix_top   = find(any(m,2),1,'first');
pix_bottom= find(any(m,2),1,'last'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T00:39:55.267

其他答案对于在图像中查找一般圆圈很有用，但是由于您知道您正在寻找二进制掩码中的圆圈，因此 bwmorph 可能是您最好的选择。

```
I=imread('0ateM.png');
BW=im2bw(I);
BW2=bwmorph(BW,'endpoints'); 
```

![bwmorph 后的图像](../Images/0144585418fbf98fb936efb9bf8a797c.png) 编辑：正如我在评论中提到的，为了放大圆圈，以便将原始圆圈蒙版之外的 0 像素设置为 1，其他所有内容设置为 0，您可以反转原始蒙版，然后使用 bwmorph ：

```
WB=-(BW-1);
WB2=bwmorph(WB,'endpoints'); 
```

这具有不幸的副作用，即图像的边框变为 1。当然，您可以轻松更改此设置。对于 mxn 图像：

```
WB2(1,:)=0; WB2(:,1)=0; WB2(:,n)=0; WB2(m,:)=0; 
```

另一种方法是直接在原始图像上使用过滤器：

```
f=[1 1 1; 1 -9 1; 1 1 1];
G=filter2(f,BW);
BW2=im2bw(G); 
```

这将实现与上面的 WB2 相同的结果，而不会出现白边问题。之所以`im2bw`需要调用，是因为过滤后的值不再只是 0 或 1，它们的范围在 -8 和 8 之间，我们希望负值是 0，正值是 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T00:26:31.707

**蛮力与图像的大小成线性关系，**并且由于您需要复制图像，因此我认为*通过改进方法无法获得太多收益*。尽管如此，它应该很快，并且适用于图像上的任意数量的圆圈。

```
function bound = find_bound(circle)

[sy sx] = size(circle);
bound = circle;

for i = 2:sy-1
    for j = 2:sx-1
        if (~circle(i,j))
            bound(i,j) = any((circle(i-1:i+1,j-1:j+1)-circle(i,j))(:));
        end
    end
end 
```

# android - Protobuf 流式处理（延迟序列化）API

> ID：13242349
> 
> 赞同：5
> 
> 时间：2012-11-05T23:53:03.817
> 
> 标签：android, xml, json, model, protocol-buffers

我们有一个使用协议缓冲区来存储应用程序数据的 Android 应用程序。数据格式（大致）是单个 protobuf（“容器”），其中包含 protobuf（“items”）列表作为重复字段：

```
message Container {
    repeated Item item = 1;
} 
```

当我们想要保存对项目的更改时，我们必须重新创建 protobuf 容器，将所有项目添加到其中，然后将其序列化并将其写入文件。

这种方法的问题在于，它可能会使保存时使用的内存增加三倍，因为数据必须首先从模型类复制到 protobuf 构建器，然后在序列化 protobuf 时复制到字节数组，所有这些都在将其写入之前文件流。

我们想要一种方法来创建我们的 protobuf 容器并将其延迟序列化到流中，然后简单地将每个 protobuf 项（从我们的模型数据创建）添加到容器中，该容器将其序列化并将其写入流中，而不是保留所有内存中的项目，直到我们在内存中创建了整个容器。

**有没有办法构建一个 protobuf 并将其延迟序列化为流？**

如果没有办法正式做到这一点，是否有任何图书馆可以提供帮助？有没有人有任何建议或想法如何以其他方式解决这个问题？使这成为可能的替代数据格式或技术（例如 JSON 或包含 protobufs 的 XML）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T13:14:09.077

对于序列化：

protobuf 是一种可附加的格式，单个项目被*合并*，重复的项目被*附加*

因此，要将序列写为惰性流，您需要做的就是重复编写相同的结构，列表中只有一个项目：序列化 200 x “Container with 1 Item”的序列与序列化 1 x 100% 相同“装有 200 件物品的容器”。

所以：就这样做吧！

* * *

对于反序列化：

*从技术上讲*，这很容易以流的形式阅读 - 但是，这一切都取决于您使用的是哪个库。例如，我在 protobuf-net（一个 .NET / C# 实现）中将`Serializer.DeserializeItems<T>`其公开`T`为（`Serializer.DeserializeItems<Item>`取代的流式传输方式也是如此`Serializer.Deserialize<Container>`- protobuf 中实际上并不存在最外层的对象）

如果这不可用，但您可以访问原始阅读器 API，您需要做的是：

*   为标头读取一个 varint - 这将是值 10 (0x0A)，即字段编号 (1) 和线型 (2) 分别为“(1 << 3) | 2” - 所以这也可以是措辞：“从流中读取一个字节，并检查值为10”
*   为以下项目的长度读取一个 varint
*   现在：
    *   如果阅读器 API 允许您限制要处理的最大字节数，请使用此长度来指定后面的长度
    *   或使用长度限制流包装流 API，限制为该长度
    *   或者只是手动读取那么多字节，并从有效负载构造一个内存流
*   冲洗，重复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T21:38:12.687

在协议缓冲区的普通 java 版本中，有一个分隔文件，您可以在其中一次编写一个协议缓冲区。我不确定它是否在Android版本中

```
 aLocation.writeDelimitedTo(out); 
```

正如 Marc 指出的那样，它很容易实现；只需在序列化字节后面写一个长度。在 prortocol-buffers 的普通（非 android）java 版本中，您也可以这样做（您必须序列化为字节数组或类似的东西）

```
private CodedOutputStream codedStream = null;

public void write(byte[] bytes) throws IOException {
    if (bytes != ConstClass.EMPTY_BYTE_ARRAY) {
        codedStream.writeRawVarint32(bytes.length);
        codedStream.writeRawBytes(bytes);
        codedStream.flush();
    }
} 
```

和

```
 private CodedInputStream coded;

public byte[] read() throws IOException {
    if (coded == null) {
        throw new IOException("Reader has not been opened !!!");
    }
    if (coded.isAtEnd()) {
        return null;
    }
    return coded.readBytes().toByteArray(); 
```

在其他 Protocol-Buffers 版本中可能会发生一些事情

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T23:57:06.483

哪有这回事。protobuf 是一种压缩结构。为了有效地做到这一点，它需要所有的数据。您必须自己添加“流协议”。也许每 N 个项目发送一个 protobuf msg。

# iphone - iPhone：滚动到 UICollectionView 中的最后一项

> ID：13242358
> 
> 赞同：2
> 
> 时间：2012-11-05T23:54:23.127
> 
> 标签：iphone, scroll, collectionview

我使用用户库中的图像创建一个带有**UICollectionVIew的视图控制器。**

加载资产并从 UICollectionView 重新加载数据后，我尝试滚动到 UICollectionView 中的最后一项。

UICollectionView 已填充，但滚动到最后一个对象时收到错误消息。

这是我的代码

```
void (^assetEnumerate)(ALAsset *result, NSUInteger index, BOOL *stop) = ^(ALAsset* result, NSUInteger index, BOOL *stop){
    if (result != nil){
        [_assets addObject:result];
    }
};

void (^ALAssetsLibraryGroupsEnumerationResultsBlock)(ALAssetsGroup *group, BOOL *stop) = ^(ALAssetsGroup *group, BOOL *stop){
    if(group != nil){
        [group enumerateAssetsUsingBlock:assetEnumerate];
        [_collectionView reloadData];

        //OLD:
        //no mather what is filled in the indexPathForRow, it results in an error
        //[_collectionView scrollToItemAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] atScrollPosition:UICollectionViewScrollPositionTop animated:NO];

        //NEW: fix!
        dispatch_async(dispatch_get_main_queue(), ^{
            [_collectionView scrollToItemAtIndexPath:[NSIndexPath indexPathForRow:[_collectionView numberOfItemsInSection:0] inSection:0] atScrollPosition:UICollectionViewScrollPositionBottom animated:NO];
        });
    }
};

void (^ALAssetsLibraryAccessFailureBlock)(NSError *error) = ^(NSError *error){
    NSLog(@"ERROR: Couldn't enumerate group");
};

[_library enumerateGroupsWithTypes:ALAssetsGroupAll usingBlock:ALAssetsLibraryGroupsEnumerationResultsBlock failureBlock:ALAssetsLibraryAccessFailureBlock]; 
```

错误：

```
*** Assertion failure in -[UICollectionViewData layoutAttributesForItemAtIndexPath:], /SourceCache/UIKit_Sim/UIKit-2372/UICollectionViewData.m:485
2012-11-06 00:53:17.388 iBoob[6016:c07] *** 
Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'must return a UICollectionViewLayoutAttributes instance from -layoutAttributesForItemAtIndexPath: for path <NSIndexPath 0x968af20> 2 indexes [0, 0]'
*** First throw call stack:
(0x2988012 0x14e7e7e 0x2987e78 0xf7df35 0x95f3f2 0x93794e 0xa7e4 0x3fd46 0x2981e7c 0x2981a16 0x2981925 0x3fb8c 0x33eb53f 0x33fd014 0x33ed7d5 0x292eaf5 0x292df44 0x292de1b 0x20ca7e3 0x20ca668 0x42f65c 0x60cd 0x2ab5)
libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T06:27:14.950

我认为问题源于传递给的块`enumerateGroupsWithTypes`没有在 UI 线程上执行。尝试使用`performSelectorOnMainThread`执行更新您的 UI 的代码，如本问题中所述：

[如何在此线程中间更新 UI？](https://stackoverflow.com/questions/805410/how-do-i-update-the-ui-in-the-middle-of-this-thread)

# php - PHP preg_replace 除括号内的逗号外的所有逗号

> ID：13242360
> 
> 赞同：5
> 
> 时间：2012-11-05T23:54:31.177
> 
> 标签：php, regex, preg-replace

我正在尝试格式化 sql 语句以使其更易于阅读。

```
$sql = "SELECT title, url, author, FROM_UNIXTIME(published, '%Y') AS year FROM articles WHERE id IN(2010,2011,2012)"; 
```

预期结果：

```
SELECT
    title,
    url,
    author,
    FROM_UNIXTIME(published, '%Y') AS year 
FROM 
    articles 
WHERE
    id IN(2010, 2011, 2012) 
```

它只是将 SELECT、FROM、WHERE... 等关键字放在自己的行上，
然后在每个逗号后插入换行符 + 制表符，但不是括号内的逗号。

这是我的尝试

```
$sql = preg_replace('/(SELECT|FROM[^_]|WHERE)/', "\n$1\n\t", $sql);

function replace_commas($matches) {
    return str_replace(",", ",\n\t", $matches[0]);
}

$sql = preg_replace_callback("/(.*)/s", 'replace_commas', $sql);
//                            ^^^^^^^
//                           stuck here 
```

卡在这里：如何排除模式中括号内的逗号？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T00:06:33.483

如果可以有任意数量的嵌套括号，最好在回调函数中手动进行（通过逐个字符遍历字符串并计算括号）。如果您可以确保只有一层括号**并且**所有括号都匹配（以便您具有有效的语法），您可以使用前瞻，它断言`)`直到下一个`(`或字符串末尾没有：

```
'/,(?=[^)]*(?:[(]|$))/' 
```

您现在甚至不需要回调。只需使用`preg_replace`.

问题仍然是，这也会考虑到 SQL 语句中字符串中的括号，这就是为什么这个问题对于正则表达式来说通常有点太难了，只有在你施加上述条件时才能用它们来解决。

# vba - Word 文档：设置为横向

> ID：13242369
> 
> 赞同：1
> 
> 时间：2012-11-05T23:55:03.503
> 
> 标签：vba, ms-word

我在`ms-word`2007 年遇到了这个荒谬的问题。我的大部分宏都按预期工作，但方向似乎无法保持原位。我使用 VBA 将其设置为横向，但它总是会回到纵向。如果我在此行之后立即进入代码，则文档为*横向*，但只要我在文档中单击一次，它就会返回纵向。

你们知道为什么会这样吗？我似乎无法在 Google 上找到任何有此错误的人。

```
Option Explicit

Sub créer_rapport()
    Dim wdApp As Word.Application
    Dim wdDoc As Word.Document

    Set wdApp = New Word.Application
    wdApp.Visible = True

    Set wdDoc = wdApp.Documents.Open(Range("path_fichier").Value)

    wdApp.Selection.WholeStory
    wdApp.Selection.Font.Name = "Courier New"
    wdApp.Selection.Font.Size = 7

    wdDoc.PageSetup.Orientation = wdOrientLandscape
    wdDoc.PageSetup.PaperSize = wdPaperLegal
    wdDoc.SaveAs ActiveWorkbook.Path & "\test2", wdFormatXMLDocument

    Do While wdApp.Selection.Find.Execute("Merge")
        wdApp.Selection.MoveUp wdLine, 1
        wdApp.Selection.InsertBreak wdPageBreak
        wdApp.Selection.MoveDown wdLine, 2
    Loop

    With wdDoc
        .SaveAs (ActiveWorkbook.Path & "\test")
        .Close (True)
    End With

    wdApp.Quit False
End Sub 
```

这就是我的宏（现在）的全部内容。

（哦，你可以突出不良风格，这是我第一次为 Word 做 VBA 宏（我一直在 Excel 中做它们））

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T05:41:34.197

代替：

```
wdDoc.PageSetup.Orientation = wdOrientLandscape 
```

试试这个：

```
Selection.PageSetup.Orientation = wdOrientLandscape 
```

# jquery - 输入文本中的焦点或自动对焦在 Firefox 16.0.2 中不起作用

> ID：13242381
> 
> 赞同：2
> 
> 时间：2012-11-05T23:56:25.383
> 
> 标签：jquery, html, firefox, iframe, fancybox

我想在页面加载/启动后专注于输入文本。这是我的表格：

```
<form method="post" action="tags">
    <input type="hidden" name="id" id="id" value="getId()" />
    <input type="text" name="tag" id="tag" autofocus="autofocus"/>
    <input type="submit" value="Add" name="add" />
</form> 
```

我尝试了 jQuery，但它在 Firefox 上不起作用：

```
jQuery(document).ready(function(){
  jQuery("#tag").focus();
}); 
```

这是一个使用 Fancybox 作为 iframe 打开的窗口。这是我的 Fancybox 功能：

```
jQuery(".fancybox").fancybox({
    type: "iframe",
    width: 640,
    height: 320,
    afterClose : function() {
        location.reload();
        return;
    },
    afterShow: function() {
        jQuery('.fancybox-iframe').find('#tag').focus();
    }
}); 
```

有解决方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:14:49.193

试试这个。

```
 //change this selector:
$('yourselector').fancybox({
    onComplete: function() {
        $('#fancybox-frame').contents().find('#tag').focus();
    }
}); 
```

[API 参考](http://fancybox.net/api)

当您将内容加载`iframe`到`$(selector)`. [`.contents()`](http://api.jquery.com/contents/)虽然[`.find()`](http://api.jquery.com/find/)方法会。

`#fancybox-frame`是 fancybox 的默认 ID `iframe`。加载内容`onComplete`时触发回调。

* * *

经过一些测试，似乎`onComplete`处理程序触发得太早了。使用超时是一个丑陋的解决方案，因此调整加载的页面应该是一个更好的选择：

```
<form method="post" action="tags">
    <input type="hidden" name="id" id="id" value="getId()" />
    <input type="text" name="tag" id="tag" />
    <input type="submit" value="Add" name="add" />
</form>
<script>
document.getElementById('tag').focus();
</script> 
```

当它被加载到 iframe 中时，脚本将正常执行并按应有的方式聚焦输入元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:59:15.483

你提到了不存在的 id "tag"

```
<form method="post" action="tags">
    <input type="hidden" name="id" value="getId()" />
    <input type="text" name="tag" id = "tag" autofocus="autofocus"/>
    <input type="submit" value="Add" name="add" />
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T17:25:33.040

我在回答中省略了 contents() 。在 Fancybox v2.x 中，它类似于：

```
jQuery(".fancybox").fancybox({
type: "iframe",
width: 640,
height: 320,
afterClose : function() {
    location.reload();
    return;
},
afterShow: function() {
    jQuery('.fancybox-iframe').contents().find('#tag').focus()
}
}); 
```

谢谢肯尼迪和法布里西奥·马特。

# python - 重新采样表示图像的 numpy 数组

> ID：13242382
> 
> 赞同：82
> 
> 时间：2012-11-05T23:56:27.403
> 
> 标签：python, image-processing, numpy, scipy, python-imaging-library

我正在寻找如何以新的大小对表示图像数据的 numpy 数组进行重新采样，最好可以选择插值方法（最近的、双线性的等）。我知道有

```
scipy.misc.imresize 
```

它通过包装 PIL 的 resize 函数来做到这一点。唯一的问题是，由于它使用 PIL，numpy 数组必须符合图像格式，最多给我 4 个“颜色”通道。

我希望能够使用任意数量的“颜色”通道调整任意图像的大小。我想知道在 scipy/numpy 中是否有一种简单的方法可以做到这一点，或者我是否需要自己动手。

对于如何自己制作一个，我有两个想法：

*   `scipy.misc.imresize`单独在每个通道上运行的功能
*   创建我自己的使用`scipy.ndimage.interpolation.affine_transform`

对于大数据，第一个可能会很慢，第二个似乎不提供除样条曲线之外的任何其他插值方法。

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-05-12T17:19:54.177

根据您的描述，您想要[`scipy.ndimage.zoom`](https://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.zoom.html).

双线性插值是`order=1`，最近的是`order=0`，三次是默认值 ( `order=3`)。

`zoom`专门用于您想要重新采样到新分辨率的定期网格化数据。

举个简单的例子：

```
import numpy as np
import scipy.ndimage

x = np.arange(9).reshape(3,3)

print 'Original array:'
print x

print 'Resampled by a factor of 2 with nearest interpolation:'
print scipy.ndimage.zoom(x, 2, order=0)

print 'Resampled by a factor of 2 with bilinear interpolation:'
print scipy.ndimage.zoom(x, 2, order=1)

print 'Resampled by a factor of 2 with cubic interpolation:'
print scipy.ndimage.zoom(x, 2, order=3) 
```

结果：

```
Original array:
[[0 1 2]
 [3 4 5]
 [6 7 8]]
Resampled by a factor of 2 with nearest interpolation:
[[0 0 1 1 2 2]
 [0 0 1 1 2 2]
 [3 3 4 4 5 5]
 [3 3 4 4 5 5]
 [6 6 7 7 8 8]
 [6 6 7 7 8 8]]
Resampled by a factor of 2 with bilinear interpolation:
[[0 0 1 1 2 2]
 [1 2 2 2 3 3]
 [2 3 3 4 4 4]
 [4 4 4 5 5 6]
 [5 5 6 6 6 7]
 [6 6 7 7 8 8]]
Resampled by a factor of 2 with cubic interpolation:
[[0 0 1 1 2 2]
 [1 1 1 2 2 3]
 [2 2 3 3 4 4]
 [4 4 5 5 6 6]
 [5 6 6 7 7 7]
 [6 6 7 7 8 8]] 
```

* * *

*编辑：*正如 Matt S. 指出的那样，缩放多波段图像有一些注意事项。我从我[之前的一个答案](https://stackoverflow.com/a/16984081/325565)中几乎逐字复制了下面的部分：

缩放也适用于 3D（和 nD）阵列。但是，请注意，例如，如果您缩放 2 倍，您将沿*所有*轴缩放。

```
data = np.arange(27).reshape(3,3,3)
print 'Original:\n', data
print 'Zoomed by 2x gives an array of shape:', ndimage.zoom(data, 2).shape 
```

这产生：

```
Original:
[[[ 0  1  2]
  [ 3  4  5]
  [ 6  7  8]]

 [[ 9 10 11]
  [12 13 14]
  [15 16 17]]

 [[18 19 20]
  [21 22 23]
  [24 25 26]]]
Zoomed by 2x gives an array of shape: (6, 6, 6) 
```

在多波段图像的情况下，您通常不希望沿“z”轴进行插值，从而创建新波段。

如果您有想要缩放的 3 波段 RGB 图像，您可以通过将元组序列指定为缩放因子来实现：

```
print 'Zoomed by 2x along the last two axes:'
print ndimage.zoom(data, (1, 2, 2)) 
```

这产生：

```
Zoomed by 2x along the last two axes:
[[[ 0  0  1  1  2  2]
  [ 1  1  1  2  2  3]
  [ 2  2  3  3  4  4]
  [ 4  4  5  5  6  6]
  [ 5  6  6  7  7  7]
  [ 6  6  7  7  8  8]]

 [[ 9  9 10 10 11 11]
  [10 10 10 11 11 12]
  [11 11 12 12 13 13]
  [13 13 14 14 15 15]
  [14 15 15 16 16 16]
  [15 15 16 16 17 17]]

 [[18 18 19 19 20 20]
  [19 19 19 20 20 21]
  [20 20 21 21 22 22]
  [22 22 23 23 24 24]
  [23 24 24 25 25 25]
  [24 24 25 25 26 26]]] 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-06T04:10:36.687

如果您想重新采样，那么您应该查看 Scipy 的 rebinning[食谱](http://www.scipy.org/Cookbook/Rebinning)。特别是`congrid`最后定义的函数会支持rebinning或者interpolation（相当于IDL中的同名函数）。如果您不想插值，这应该是最快的选择。

您也可以直接使用[`scipy.ndimage.map_coordinates`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.interpolation.map_coordinates.html)，它将为任何类型的重采样（包括非结构化网格）进行样条插值。我发现 map_coordinates 对于大型数组（nx，ny > 200）来说很慢。

对于结构化网格的插值，我倾向于使用[`scipy.interpolate.RectBivariateSpline`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.RectBivariateSpline.html). 您可以选择样条的顺序（线性、二次、三次等），甚至可以为每个轴独立选择。一个例子：

```
 import scipy.interpolate as interp
    f = interp.RectBivariateSpline(x, y, im, kx=1, ky=1)
    new_im = f(new_x, new_y) 
```

在这种情况下，您正在执行双线性插值`(kx = ky = 1)`。不支持“最近”类型的插值，因为这只是在矩形网格上进行样条插值。这也不是最快的方法。

如果您在进行双线性或双三次插值，则执行两个 1D 插值通常要快得多：

```
 f = interp.interp1d(y, im, kind='linear')
    temp = f(new_y)
    f = interp.interp1d(x, temp.T, kind='linear')
    new_im = f(new_x).T 
```

您也可以使用`kind='nearest'`，但在这种情况下摆脱横向数组。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-06T12:43:42.620

你看过[Scikit-image](http://scikit-image.org/docs/dev/api/api.html)吗？它的`transform.pyramid_*`功能可能对您有用。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-01-10T16:13:55.997

我最近刚刚发现 scipy.ndimage.interpolation.zoom 的一个问题，我已将其作为错误报告提交：[https ://github.com/scipy/scipy/issues/3203](https://github.com/scipy/scipy/issues/3203)

作为替代方案（或至少对我而言），我发现 scikit-image 的 skimage.transform.resize 工作正常：[http ://scikit-image.org/docs/dev/api/skimage.transform.html#skimage .transform.resize](http://scikit-image.org/docs/dev/api/skimage.transform.html#skimage.transform.resize)

但是，它与 scipy 的 interpolation.zoom 的工作方式不同 - 您可以指定所需的输出形状，而不是指定乘数。这适用于 2D 和 3D 图像。

对于 2D 图像，您可以使用 transform.rescale 并指定乘数或比例，就像使用 interpolation.zoom 一样。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-09-26T23:57:04.657

您可以使用[`interpolate.interp2d`](https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.interp2d.html#scipy.interpolate.interp2d).

例如，考虑由 numpy 数组表示的图像`arr`，您可以将其调整为任意高度和宽度，如下所示：

```
W, H = arr.shape[:2]
new_W, new_H = (600,300)
xrange = lambda x: np.linspace(0, 1, x)

f = interp2d(xrange(W), xrange(H), arr, kind="linear")
new_arr = f(xrange(new_W), xrange(new_H)) 
```

当然，如果您的图像有多个通道，则必须对每个通道执行插值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-24T16:17:36.243

此解决方案在不影响 RGB 通道的情况下缩放输入图像的 X 和 Y：

```
import numpy as np
import scipy.ndimage

matplotlib.pyplot.imshow(scipy.ndimage.zoom(image_np_array, zoom = (7,7,1), order = 1)) 
```

希望这是有用的。

# objective-c - 我的嵌套 SUBQUERY 谓词有什么问题？

> ID：13242383
> 
> 赞同：6
> 
> 时间：2012-11-05T23:56:27.920
> 
> 标签：objective-c, core-data, subquery, nspredicate, one-to-many

我有你可以在下面看到的数据模型和一个嵌套的 SUBQUERY 谓词，但不知何故它不起作用。知道如何纠正它吗？

我想通了，这终于奏效了：

```
[NSPredicate predicateWithFormat:@"SUBQUERY(bs, $B, SUBQUERY($B.cs, $C, $C.ds.name != \"xxx\").@count > 0).@count > 0"]; 
```

![在此处输入图像描述](../Images/1da3c1cb08c21879c48344173adf2be9.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T09:28:50.980

好的，这是有效的解决方案：

```
[NSPredicate predicateWithFormat:@"SUBQUERY(bs, $B, SUBQUERY($B.cs, $C, $C.ds.name != \"xxx\").@count > 0).@count > 0"]; 
```

# c# - 是否有任何 c# 方法[获取]/[提供]声音频率信息的库？

> ID：13242392
> 
> 赞同：0
> 
> 时间：2012-11-05T23:57:15.740
> 
> 标签：c#, audio, microphone, frequency

> **可能重复：**
> [C# 中的频率分析器](https://stackoverflow.com/questions/1377661/frequency-analyzer-in-c-sharp)

我正在寻找从计算机麦克风获取当前声音频率的简单方法（或任何方法）。我想做一个自己的吉他调音器。

如何使用 C# 获得这个频率？

如果这样的库不存在，是否有任何算法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T00:38:18.043

您可以尝试使用[快速傅里叶变换](http://en.wikipedia.org/wiki/Fast_Fourier_transform)算法。

C# 中应该有相当多的实现，其中一些可以在[这个 stackoverflow question](https://stackoverflow.com/questions/170394/fast-fourier-transform-in-c-sharp)中找到。

# java - Spring MVC多个ModelAttribute在同一个表单上

> ID：13242394
> 
> 赞同：29
> 
> 时间：2012-11-05T23:57:38.503
> 
> 标签：java, html, spring-mvc, modelattribute

我有一个带有两个 ModelAttributes 的表单，一个是公民，另一个是惩罚。这两个对象由 jquery 选项卡分隔。我在让表单上的项目正确显示时遇到问题，有些正在显示，有些则没有。我的意思是html元素。

我不确定当页面上有多个 ModleAttributes 时控制器的外观。下面是代码示例：

**页**

```
<title>Citizen Registration</title>

    </head>

    <body>  
        <div id="tabs"> 

        <ul>
            <li><a href="#tab1">Citizen Registration</a></li>
            <li><a href="#tab2">Punishment</a></li>
        </ul>

        <div id="tab1">
            <form:form id="citizenRegistration" name ="citizenRegistration" method="post" modelAttribute="citizens" action="citizen_registration.htm">
                <div id="divRight" class="mainDiv">             
                    <div class="divGroup" id="divCharInfo"> 
                    <fieldset>  
                    <legend>Characteristics Info</legend>
                            <ol>    
                                <li><form:label for="photo" path="photo">Select Photo</form:label>
                                    <form:input path="photo" type="file" id="photo" title="Upload a photo"/><form:errors path="photo" id="errors"/></li>

                                <li>
                                    <label>Select Gender</label>
                                    <form:select path="genderId" id="genderId" title="Select Your Gender">
                                    <form:options items = "${gender.genderList}" itemValue="genderId" itemLabel="genderDesc" />
                                    </form:select>
                                    <form:errors path="genderId" class="errors"/>
                                </li>               

                                <li><form:label for="weight" path="weight">Enter Weight <i>(lbs)</i></form:label>
                                    <form:input path="weight" id="weight" title="Enter Weight"/><form:errors path="weight" id="errors"/>
                                </li> 

                                <li><form:label for="height" path="height">Enter Height <i>(feet)</i></form:label>
                                    <form:input path="height" id="height" title="Enter Height"/><form:errors path="height" id="errors"/>
                                </li> 
                                                .......................

            <div id="tab2">
                <form:form id="punishmentRegistration" name ="punishmentRegistration" method="post" modelAttribute="punishment" action="punishment_registration.htm">

                <ol>
                    <li>
                        <form:label for ="punishmentId" path="punishmentId">Punishment Number</form:label>
                        <form:input path="punishmentId" id="punishmentId"/><form:errors path="punishmentId" id="errors"/>                   
                    </li>

                    <li>
                        <form:label for="crimeRecNo" path="crimeRecNo">Select Crime</form:label>
                        <form:select path="crimeRecNo" id="CrimeRecNo" title="Select Crime">
                        <form:options items = "${crime.crimeList}" itemValue="crimeRecNo" itemLabel="crimeRecNo" title="crimeDesc"/>
                        </form:select>
                        <form:errors path="crimeRecNo" id="errors"/>
                    </li>   

                    <li>
                        <form:label for ="monitoringStDate" path="monitoringStDate"> Start Date </form:label>
                        <form:input path="monitoringStDate" id="monitoringStDate"/><form:errors path="monitoringStDate" id="errors"/>                   
                    </li>

                    <li>
                        <form:label for ="monitoringEnDate" path="monitoringEnDate"> End Date </form:label>
                        <form:input path="monitoringEnDate" id="monitoringEnDate"/><form:errors path="monitoringEnDate" id="errors"/>                   
                    </li>                   
                </ol>               

                </form:form>            
            </div>                      

        </div>

    </body>
</html> 
```

**控制器**

```
@RequestMapping(value="citizen_registration.htm", method = RequestMethod.GET)
    public ModelAndView loadPage(HttpServletRequest request,
                                 HttpServletResponse response,
                                 @ModelAttribute Citizens citizens, @ModelAttribute Punishment punishment,
                                 BindingResult result,
                                 ModelMap m, Model model) throws Exception {

//code here

return new ModelAndView("citizen_registration"); 
```

这是我的代码，但是当我运行它时，tab2 中没有显示任何内容，也没有显示 tab1 中的所有元素。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-06T00:02:53.047

如果您可以使用 Spring 表单绑定多个模型，我不这么认为。事实上，你应该看看 spring 绑定表单。 [http://static.springsource.org/spring/docs/1.1.5/taglib/tag/BindTag.html](http://static.springsource.org/spring/docs/1.1.5/taglib/tag/BindTag.html) 查看示例代码。我没有测试过代码。如有任何问题请告知。

# 模型

```
public class User{

private String username;
private String password;

..Setter and Getters
}

public class UserProfile{
private String firstName;
private String lastName;

setter and getter
} 
```

# 控制器

```
@Controller
public class MyController{
    @RequestMapping(....)
    public String newAccountForm(ModelMap map){
        User user = new User(); //Would recommend using spring container to create objects
        UserProfile profile = new UserProfile();

        map.addAttribute('user', user);
        map.addAttribute('profile', profile);

        return "form"
    }

     @RequestMapping(....)
        public String newAccountForm(@ModelAttrbite('User')User user, BindingResult resultUser, @ModelAttribute('UserProfile')UserProfile userProfile, BindingResult resultProfile){

//Check the binding result for each model. If not valid return the form page again
//Further processing as required.

        }
    } 
```

# JSP

```
<%@taglib  uri="http://www.springframework.org/tags" prefix="spring">

<form action="" method="post">

<spring:bind path="user.username">
   <input type="text" name="${status.expression}" value="${status.value}"><br />
        </spring:bind>

<spring:bind path="user.password">
   <input type="password" name="${status.expression}" value="${status.value}"><br />
        </spring:bind>

<spring:bind path="profile.firstName">
   <input type="text" name="${status.expression}" value="${status.value}"><br />
        </spring:bind>
<spring:bind path="profile.lastName">
   <input type="text" name="${status.expression}" value="${status.value}"><br />
        </spring:bind>

<input type="submit" value="Create"/>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-03T10:27:29.843

[我已经在此](https://stackoverflow.com/questions/9412639/multiple-modelattributes-in-a-jsp-with-spring/42021976#42021976)链接中提供了替代方法

```
<form:form method="POST" modelAttribute="applicationGeneralInformation">
  <div class="section2">
    <h2>General Informaion</h2>

    <form:input type="hidden" path="id" id="id"/>
    <label for="app_version">Version</label>: <form:input type="text" id="app_version" path="version"/><br/>
    <label for="app_func_desc">Description</label>: <form:input type="text" id="app_func_desc"
                                                                       path="functionalDescription"/><br/>
   <label for="app_sec_func">Functions</label>: <form:input type="text" id="app_sec_func"
                                                                  path="securityFunctions"/><br/>

</div>
<div class="section2">
  <h2>Application Content</h2>
  <form:form method="POST" modelAttribute="applicationContent">
    <div>
        <h3>CIA Rating</h3>
        <label for="CIARating">CIA Rating</label>: <form:select type="text" id="CIARating" path="CIARating">
        <form:option value="1">1</form:option>
        <form:option value="2">2</form:option>
        <form:option value="3">3</form:option>
        <form:option value="4">4</form:option>
    </form:select><br/><br/>
    </div>
    <div>
        <h3>Business Continuity and Disaster Recovery</h3>
        <div>
            <h4>RTO</h4>
            <label for="RTO">RTO</label>: <form:select type="text" id="RTO" path="RTO">
            <form:option value="1">< 2<sub>Hrs</sub></form:option>
            <form:option value="2">2<sub>Hrs</sub>-4<sub>Hrs</sub>    </form:option>
            <form:option value="3">4<sub>Hrs</sub>-48<sub>Hrs</sub></form:option>
            <form:option value="4">> 48<sub>Hrs</sub></form:option>
        </form:select><br/>
        </div>
        <div>
            <h4>RPO</h4>
            <label for="RPO">RPO</label>: <form:input type="text" id="RPO" path="RPO"/><br/>
        </div>
    </div>
  </form:form>
  <input type="submit" value="Submit">
 </div>
 </form:form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-28T07:54:32.627

```
<script type="text/javascript">
$(document).ready(
        function() {
            $("#userAttendance").submit(
                    function(e) {
                        e.preventDefault();
                        jQuery.ajaxSetup({
                            async : false
                        });
                        var a = "${pageContext.request.contextPath}";
                        alert(a);
                        $.post($(this).attr("action"), $(this).serialize(),
                                function(response) {
                                    $("#showTableByDate").html(response);
                                    jQuery.ajaxSetup({
                                        async : true
                                    });
                                });
                    });
            //Date picker
            $('#datepicker').datepicker({
                autoclose : true
            });
        }); 
```

# c - 重用命名结构作为嵌套结构会触发 GCC 中的重新定义错误

> ID：13242401
> 
> 赞同：3
> 
> 时间：2012-11-05T23:58:30.633
> 
> 标签：c, struct, unions

这是一个人为的例子，但表达了核心问题。我有一个联合和一个结构，它与现有代码库中的嵌套结构相同：

```
typedef union _MyUnion
{
  unsigned int A;
  struct _MyNestedStruct
  {
    int field
  } MyNestedStruct;
} MyUnion; 
```

和

```
typedef struct _MyStruct
{
  struct _MyNestedStruct
  {
    int field
  } MyNestedStruct;
} MyStruct; 
```

如果我在 Green Hills Compiler (GHC) 下编译它，那么就没有问题。在 GCC 下编译会出现错误“错误：重新定义 'struct _MyStruct'”。

首先，为什么我能够将命名结构作为嵌套结构成功编译？我怀疑 GHC 正在使用一些 C++ 规则进行编译，或者它支持嵌套结构中的命名结构。

其次，什么可以让我在没有任何重大代码更改的情况下成功编译？我知道我可以从嵌套结构中删除 _MyNestedStruct ，但这有什么后果吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T00:23:41.400

在 C 中，没有隐式或显式的命名空间范围，因此所有结构名称共享相同的命名空间。因此，`struct _MyNestedStruct`定义了两次，这是一个错误。GCC 是正确的，GHC 不是。

如果是 C++，那么代码是正确的，因为每个结构都会创建不同的命名空间范围，因此不会发生名称冲突。

我能想到的解决方案：

A）如果结构实际上是相同的，那么只在其他结构之外定义一次（你可以将它放在第一个结构中，但这会很奇怪）。

```
struct _MyNestedStruct
{
    int field
};

typedef union _MyUnion
{
  unsigned int A;
  struct _MyNestedStruct MyNestedStruct;
} MyUnion;

typedef struct _MyStruct
{
  struct _MyNestedStruct MyNestedStruct;
} MyStruct; 
```

B) 以不同的方式命名这两个结构。在 C 中，名称并不那么重要，只要定义相同即可。

C) 使用无名结构。我认为您根本不会使用这些名称：

```
typedef union _MyUnion
{
  unsigned int A;
  struct
  {
    int field;
  } MyNestedStruct;
} MyUnion;

typedef struct _MyStruct
{
  struct
  {
    int field;
  } MyNestedStruct;
} MyStruct; 
```

BTW, remember that any name beginning with and underscore plus an uppercase is reserved for the implementation and should not be defined by the user.

# php - 动态 Drupal 节点创建期间的数据库查询以获取实体 ID

> ID：13242402
> 
> 赞同：0
> 
> 时间：2012-11-05T23:58:44.087
> 
> 标签：php, drupal

我有一个脚本，它可以从我们的冲浪网络摄像头中获取最新图像，它保存了一个照片类型的节点。在该内容类型中，我有一个实体字段，它引用膨胀大小（内容类型 swell_data）。我可以添加一个静态实体 id 没问题：

```
// Reference Swell Data ID 176821 
$node->field_buoy_ref[$node->language][0]['target_id'] = 176821; 
```

如何动态查找由 swell_data 内容类型创建的最新节点（使用 CRON 作业每小时添加一次）并使用该值来代替？供您参考，这是我正在使用的当前脚本（感谢[FooNinja](http://fooninja.net/2011/04/13/guide-to-programmatic-node-creation-in-drupal-7/)）

```
define('DRUPAL_ROOT', getcwd());
require_once 'includes/bootstrap.inc';
drupal_bootstrap(DRUPAL_BOOTSTRAP_FULL);

$bodytext = "This was the view from the Camera at ".date('gA')." on ".date('l F jS Y');

$node = new stdClass(); // Create a new node object
$node->type = "photos"; // Or page, or whatever content type you like
node_object_prepare($node); 

$node->title = "Caswell Camera ". date('D M j G:i');
$node->language = LANGUAGE_NONE; 

// Author
$node->name = "Gower Live"; // UID of the author of the node; or use $node->name
// Publish Node
$node->status = 1;
//Set Body Text
$node->body[$node->language][0]['value']   = $bodytext;
$node->body[$node->language][0]['summary'] = text_summary($bodytext);
$node->body[$node->language][0]['format']  = 'filtered_html';

//Set Image Location (Caswell)
$node->field_photo_location[$node->language][0]['lat'] = 51.570195982718374;
$node->field_photo_location[$node->language][0]['lng'] = -4.030849980797484;

// Set the Photos date
$node->field_image_date[$node->language][0]['value'] = date("Y-m-d H:i:s");

// From the Webcam
$node->field_webcam_photo[$node->language][0]['value'] = "Caswell";

// Reference Wave Buoy
$node->field_buoy_ref[$node->language][0]['target_id'] = 176821; // I'd this value dynamically pulled from the DB

// Attach Latest Webcam Image
$file_path = drupal_realpath('images/webcams/caswell-webcam.jpg');
$file = (object) array(
            'uid' => 1,
            'uri' => $file_path,
            'filemime' => file_get_mimetype($file_path),
            'status' => 1,
);
// You can specify a subdirectory, e.g. public://foo/
$file = file_copy($file, 'public://');
$node->field_user_photo[$node->language][0] = (array) $file;

$path = 'node_created_on' . date('YmdHis');
$node->path = array('alias' => $path);

if($node = node_submit($node)) { // Prepare node for saving
    node_save($node);
    echo "Node with nid " . $node->nid . " saved!\n";
} 
```

谢谢

李

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:43:51.423

I added the following below the Bootstrap Line and bingo.

```
$result = db_query("SELECT nid, title, created FROM {node} WHERE type = :type AND title =:title", array(
  ':type' => 'wavebuoy_data',
  ':title' => "Buoy ". date('D M j gA'),
));
foreach($result as $row) {
$wave_buoy_ref_value = $row->nid;
//print_r($row);
} 
```

Then when building the node, added the following:

```
// Reference Wave Buoy
$node->field_buoy_ref[$node->language][0]['target_id'] = $wave_buoy_ref_value; 
```

Lee

# javascript - 即时创建多个选择列表选项并减少后续选择列表

> ID：13242403
> 
> 赞同：0
> 
> 时间：2012-11-05T23:58:52.957
> 
> 标签：javascript, jquery, dynamic, on-the-fly

在过去一周左右的时间里，我一直在尝试解决以下问题，并且在互联网上进行了多次搜索之后，在这里，还没有找到我想要实现的确切解决方案。

这是我在这里的第一篇文章，并决定在这里发帖，因为这个论坛已经多次保存了我的培根！

这就是我想要发生的事情：

用户从下拉列表中选择侦察员和领导者的数量。第一件 T 恤（小）填充了领导者人数 + 球探总数。

如果用户从小下拉列表中选择较少的数量，则剩余的数量用于填充中等选择列表，依此类推，直到 XXL。

下面的代码是到目前为止我已经走了多远，但它似乎有点错误，如果用户改变主意，选项值会一次又一次地附加，并且中框显示的是总选项而不是总数小选。

我不知道这是否是最好的方法，或者是否有更好的解决方案？

开始

```
<form method='post' id="wawBooking" action='processWAWBooking.php' >
    <div id="groupDetails" >
        <fieldset>
            <legend>Group Details</legend>
            <label for="noScouts">Number of scouts:</label>
            <select id='noScouts' name="noScouts"></select><br />
            <label for="noLeaders">Number of leaders:</label>
            <select id='noLeaders' name="noLeaders"></select><br />
        </fieldset>
    </div>
    <div style="clear: both;"></div>
    <div id="tshirts">
        <fieldset style="height: auto;">
            <legend>T-Shirts</legend>
            Total: <span id='totalTshirts'></span><br />
            Amount left (Total - current total): <span id='amountLeft'></span><br />
            Sum of Selected: <span id='liveTotal'></span><br />
            <label for='s'>Small</label>
            <select id='s'></select><br />
            <label for='m'>Medium</label>
            <select id='m'> </select><br />
            <label for='l'>Large</label>
            <select id='l'></select><br />
            <label for='xl'>X-Large</label>
            <select id='xl'></select><br />
            <label for='xxl'>XX-Large</label>
            <select id='xxl'></select><br />
        </fieldset>
    </div>
    <input type="reset" value="Reset Form" id="reset" style="float: left;"/>
    <input type="button" value="Order t-shirts" id="tshirtOrder" style="float: right;"/>
    <input type="submit" value="Submit Booking" style="float: right;"/>
</form>
<script type="text/javascript" src="http://code.jquery.com/jquery.js"></script> 
<script type="text/javascript">
    var scouts = 20;
    var leaders = 30;

    // ignore this bit - using just to demonstrate
    for (a = 0; a <= leaders; a++) {
        $('#noScouts').append("<option value='" + a + "'>" + a + "</option>");
    }
    for (b = 0; b <= scouts; b++) {
        $('#noLeaders').append("<option value='" + b + "'>" + b + "</option>");
    }
    // end of ignore section!

    $('#wawBooking').change(function(){
        var totalTshirts = parseInt($('#noLeaders').val()) + parseInt($('#noScouts').val());
        var liveTotal = parseInt($('#s').val())
                      + parseInt($('#m').val()) 
                      + parseInt($('#l').val()) 
                      + parseInt($('#xl').val()) 
                      + parseInt($('#xxl').val());
        if ($('#noScouts').val() && $('#noLeaders').val() > 0) {
            $('#totalTshirts').empty().append(totalTshirts);
            $('#liveTotal').empty().append(liveTotal);
            for (i = 0; i <= totalTshirts; i++) {
                $('#s').append('<option value="' + i + '">' + i + '</option>')
            }
            if ($('#s').val() > 0 && $('#s').val() < totalTshirts) {
                var subSmallMinusTotal = parseInt(totalTshirts) - parseInt($('#s').val());
                for (k = 0; k <= subSmallMinusTotal; k++) {
                    $('#m').append('<option value="' + k + '">' + k  + '</option>')
                }           
            }
        } 
    });

</script> 
```

有什么建议或提示吗？

提前谢谢了

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:04:34.993

这是一个可能的解决方案。您可能可以将其调整为更通用并从集合中生成列表，但我认为它会让您入门。

## [示例（JsFiddle）](http://jsfiddle.net/7azpL/1/)

**HTML**

```
<label for="noScouts">Number of scouts:</label>
<select id='noScouts' name="noScouts"></select><br />
<label for="noLeaders">Number of leaders:</label>
<select id='noLeaders' name="noLeaders"></select><br />
<label for="noSmall">s:</label>
<select id='noSmall' name="noSmall"></select>
<label for="noMed">m:</label>
<select id='noMed' name="noMed"></select>
<label for="noLarge">l:</label>
<select id='noLarge' name="noLarge"></select>
<label for="noXLarge">xl:</label>
<select id='noXLarge' name="noXLarge"></select>
<label for="noXXLarge">xxl:</label>
<select id='noXXLarge' name="noXXLarge"></select> 
```

**JS**

```
var sizes = $('#sizes'); 
var numScouts = new selectRange('#noScouts', { max: 30 }); 
var numLeaders = new selectRange('#noLeaders', { max: 20 }); 

var total = new watchVal(0); 
var small = new selectRange('#noSmall', { max: 0 }); 
var med = new selectRange('#noMed', { max: 0 }); 
var large = new selectRange('#noLarge', { max: 0 }); 
var xlarge = new selectRange('#noXLarge', { max: 0 }); 
var xxlarge = new selectRange('#noXXLarge', { max: 0 }); 

numScouts.change(zSetTotal); 
numLeaders.change(zSetTotal); 

total.change(function(e, total){
    small.setMax(total); 
}); 

small.change(function(){
   med.setMax(total.value() - small.value());
});

med.change(function(){
   large.setMax(total.value() - med.value() - small.value());
});

large.change(function(){
   xlarge.setMax(total.value() - med.value() - small.value() - large.value());
});

xlarge.change(function(){
   xxlarge.setMax(total.value() - med.value() - small.value() - large.value() - xlarge.value());
});

function zSetTotal(){
    total.value(numScouts.value() + numLeaders.value()); 
}

function watchVal(initVal){
    var _val = initVal; 
    var $_ctx = $(this); 
    $_ctx.value = function(newVal){
        if(newVal){
            _val = newVal;   
            $_ctx.trigger('change', _val);            
        }else{
            return _val;    
        }
    }    
    return $_ctx;         
}

function selectRange(selector, options){
    var _config = {
        max: 10               
    };
    var _select = null; 
    var _ctx = this; 

    function zInit(){
        $.extend(_config, options); 
        if($(selector).is('select')){
            _select = $(selector); 
        }else{
            _select = $('<select />'); 
            _select.appendTo(selector); 
        }
        _ctx.repaint(); 
    }            

    this.setMax = function(max){
        _config.max = max;       
        this.repaint();     
        _select.trigger('change');
    };

    this.repaint = function(){
        var prevPos = _select.find('> option:selected').index();         
        _select.empty(); 
        for (var i = 0; i <= _config.max; i++) {
            var option = $("<option />", {
                'value': i,
                'text': i        
            });

            _select.append(option); 
            if(i === prevPos){
                option.prop('selected', true);                   
            }
        }
    };

    this.value = function(){
        return parseInt(_select.val(), 10);             
    };

    this.change = function(fun){
        _select.change(fun);         
    };

    zInit(); 
}
​ 
```

# php - JQuery.post 回调数据为空

> ID：13242409
> 
> 赞同：6
> 
> 时间：2012-11-05T23:59:45.100
> 
> 标签：php, javascript, zend-framework, jquery

我遇到了 ZEND、JQuery、PHP 和 Javascript 的问题。我对这些语言很陌生，我只是在努力解决它们。

我在其他情况下也有过 jquery.post 的工作，但我现在不能让它做一个简单的调用。

phtml 文件 (/admin/user.phtml)

```
function testJquery()
{
var url = "<?php echo $myHome2Url.'/admin/newusercallback/sessionid/'.$_SESSION['mySessionId'].'/lang/'.$_SESSION['language']?>";
console.log(url);
$.post(url,{},
function(data)
{
    window.alert("Call successful!");
    window.alert(data);
},"json"); 
```

}

PHP 文件：（AdminController.php）

```
public function newusercallbackAction()
{
     echo json_encode("Test");
} 
```

存在 /admin/newusercallback.phtml 文件。

```
 <?php ?> 
```

运行时，控制台会打印以下消息：

```
POST https://dev.myurl.ca/admin/newusercallback/sessionid/0c1a5e41-ad0a-470d-9901-305464b48908/lang/ENG
https://dev.myurl.ca/admin/newusercallback/sessionid/0c1a5e41-ad0a-470d-9901-305464b48908/lang/ENG
GET https://dev.myurl.ca/admin/user/sessionid/0c1a5e41-ad0a-470d-9901-305464b48908/lang/ENG/report_id/0/ 
```

我有 2 个弹出框出现，上面写着呼叫成功！和空

问题是第二个弹出框应该说“测试”而不是 Null。

如果我直接浏览到 URL [https://dev.myurl.ca/admin/newusercallback/sessionid/0c1a5e41-ad0a-470d-9901-305464b48908/lang/ENG](https://dev.myurl.ca/admin/newusercallback/sessionid/0c1a5e41-ad0a-470d-9901-305464b48908/lang/ENG)，我的浏览器会显示一个带有文本的窗口

```
"Test" 
```

（包括引号）

我的问题是，为什么 testJquery 的回调数据为 Null，当直接浏览页面时正确显示数据“测试”？除此之外，我该如何解决它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T00:12:12.360

那是因为您的 jQuery 函数要求“json”格式，而文本“Test”不是 json。

解决方案： 1\. 删除 testJquery() 函数上的“json”数据类型：

```
 function testJquery(){
        $.post(url,{},function(data){
            window.alert("Call successful!");
            window.alert(data);
        });
    } 
```

2\. 编辑您的 AdminController.php 文件以编码数组对象

```
 public function newusercallbackAction(){
        echo json_encode(array("Test"));
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T00:10:18.873

看起来您的控制器仅响应 HTML/TEXT。我不知道该怎么做，但你的控制器应该返回 JSON

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T16:35:27.580

它仅在响应头“Content-Type”是有效的 json mime 时才有效，即`application/json`. 它也发生在速记版本`.getJSON`

在你输出其他任何东西之前把它放在你的php中

> header("内容类型: application/json; charset=utf-8");

# java - Java - 嵌套 GridBagLayout 布局管理器

> ID：13242410
> 
> 赞同：0
> 
> 时间：2012-11-06T00:00:08.213
> 
> 标签：java, swing, applet, layout-manager, gridbaglayout

我遇到了 GridBagLayouts 的问题。

我有一些组件如下图所示：

![在此处输入图像描述](../Images/1e9f4e8a544d797f50b1e458f459c15a.png)

如果“顶部”组件收缩得足够小，我希望“中心”组件能够移动到“右上角”的底部边缘上方。但是，这显然会导致问题，因为它必须在网格中的不同行中才能这样做。

为了解决这个问题 - 我将整个右列定义为其自己的容器，并具有自己的布局管理器。我希望这两列能够独立运行，但是我遇到了同样的问题！我看不出这两个布局管理器是如何交互的。谁能解释我的问题是什么？

这是相关代码（在我的类扩展Applet）：

```
public void init(){
    addComponents();
}

private void addComponents(){
    setLayout(new GridBagLayout());
    GridBagConstraints c = new GridBagConstraints();

    Left left = new Left();
    Top top = new Top();
    Center center = new Center();
    TopRight topRight = new TopRight();
    BottomRight bottomRight = new BottomRight();
    Bottom bottom = new Bottom();

    topRight.setPreferredSize(new Dimension(200,200));
    top.setPreferredSize(new Dimension(0,200));
    center.setPreferredSize(new Dimension(0,100));
    container.setPreferredSize(new Dimension(200,200));

    c.fill = GridBagConstraints.BOTH;

    c.gridx = 0; c.gridy = 0;
    c.gridwidth = 1; c.gridheight = 3;
    c.weightx = 0.2; c.weighty = 1.0;
    this.add(left,c);

    c.gridx = 1; c.gridy = 0;
    c.gridwidth = 1; c.gridheight = 1;
    c.weightx = 0.8; c.weighty = 0.8;
    this.add(top,c);

    c.gridx = 1; c.gridy = 1;
    c.gridwidth = 1; c.gridheight = 1;
    c.weightx = 0.8; c.weighty = 0.0;
    this.add(center,c);

    c.gridx = 1; c.gridy = 2;
    c.gridwidth = 1; c.gridheight = 1;
    c.weightx = 0.8; c.weighty = 0.2;
    this.add(bottom,c);

    JPanel container = new JPanel();
    container.setLayout(new GridBagLayout());

    c.gridx = 2; c.gridy = 0;
    c.gridwidth = 1; c.gridheight = 3;
    c.weightx = 0.0; c.weighty = 1.0;
    this.add(container,c);

    GridBagConstraints c2 = new GridBagConstraints();
    c2.fill = GridBagConstraints.BOTH;

    c2.gridx = 0; c2.gridy = 0;
    c2.gridwidth = 1; c2.gridheight = 1;
    c2.weightx = 0.0; c2.weighty = 0.0;
    container.add(topRight,c2);

    c2.gridx = 0; c2.gridy = 1;
    c2.gridwidth = 1; c2.gridheight = 1;
    c2.weightx = 0.0; c2.weighty = 1.0;
    container.add(bottomRight,c2);
} 
```

注意：显示的每个组件（左、上等）都是 JPanel 的扩展 - 每个组件都覆盖了它的 paint(Graphics g) 方法以用一些颜色填充它。

在此先感谢，并为长期阅读感到抱歉，

乔纳森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T04:16:12.547

我解决了这个问题。它与我不必要地设置 Top 组件的首选高度有关 - 当我删除该行时，它就像我想要的那样工作。

# python - 如何在 Python 中选择复选框

> ID：13242412
> 
> 赞同：6
> 
> 时间：2012-11-06T00:00:39.553
> 
> 标签：python, html, google-app-engine, checkbox, webapp2

我正在尝试在我的 HTML 中使用复选框，将这些复选框返回到我的 python 后端，然后在单击该框时增加三个计数器。

现在我的 HTML 如下并且工作正常：

```
<form method="post">
    <input type="checkbox inline" name="adjective" value="entertaining">Entertaining
    <input type="checkbox inline" name="adjective" value="informative">Informative
    <input type="checkbox inline" name="adjective" value="exceptional">Exceptional
</form> 
```

然后在我的python后端我有以下内容：

```
def post(self):
    adjective = self.request.get('adjective ')

    if adjective :
        #somehow tell if the entertaining box was checked
        #increment entertaining counter
        #do the same for the others 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T00:33:47.707

当您的表单有多个具有相同`name`属性的复选框时，在提交表单时请求将具有该名称的多个值。

您当前的代码用于`Request.get`获取一个值，但这只会在有多个值时检索第一个值。相反，您可以使用`Request.get_all(name)`(in webapp) 或`Request.get(name, allow_multiple=True)`(in webapp2) 获取所有值。这将返回一个（可能为空的）列表，其中包含该名称的所有值。

以下是您可以在代码中使用的方法：

```
def post(self):
    adjectives = self.request.get('adjective', allow_multiple=True)
    for a in adjectives:
        # increment count
        self.adjective_count[a] += 1 # or whatever

        # do more stuff with adjective a, if you want

    # do other stuff with the request 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T00:21:36.997

更改name =“”并将其与值相同会不会更容易，所以您可以问

如果娱乐：

如果信息丰富：

我不是 python 程序员，只是告诉你不

# c# - 使用 jQuery Ajax 将对象列表传递给 MVC 控制器方法

> ID：13242414
> 
> 赞同：125
> 
> 时间：2012-11-06T00:01:08.240
> 
> 标签：c#, asp.net-mvc, jquery

我正在尝试使用 jQuery 的 ajax() 函数将对象数组传递到 MVC 控制器方法中。当我进入 PassThing() C# 控制器方法时，参数“things”为空。我已经尝试使用 List 类型作为参数，但这也不起作用。我究竟做错了什么？

```
<script type="text/javascript">
    $(document).ready(function () {
        var things = [
            { id: 1, color: 'yellow' },
            { id: 2, color: 'blue' },
            { id: 3, color: 'red' }
        ];

        $.ajax({
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            type: 'POST',
            url: '/Xhr/ThingController/PassThing',
            data: JSON.stringify(things)
        });
    });
</script>

public class ThingController : Controller
{
    public void PassThing(Thing[] things)
    {
        // do stuff with things here...
    }

    public class Thing
    {
        public int id { get; set; }
        public string color { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：206
> 
> 时间：2012-11-06T16:38:40.603

使用 NickW 的建议，我能够使用`things = JSON.stringify({ 'things': things });`Here is the complete code 来完成这项工作。

```
$(document).ready(function () {
    var things = [
        { id: 1, color: 'yellow' },
        { id: 2, color: 'blue' },
        { id: 3, color: 'red' }
    ];      

    things = JSON.stringify({ 'things': things });

    $.ajax({
        contentType: 'application/json; charset=utf-8',
        dataType: 'json',
        type: 'POST',
        url: '/Home/PassThings',
        data: things,
        success: function () {          
            $('#result').html('"PassThings()" successfully called.');
        },
        failure: function (response) {          
            $('#result').html(response);
        }
    }); 
});

public void PassThings(List<Thing> things)
{
    var t = things;
}

public class Thing
{
    public int Id { get; set; }
    public string Color { get; set; }
} 
```

我从中学到了两点：

1.  contentType 和 dataType 设置在 ajax() 函数中是绝对必要的。如果它们丢失，它将无法正常工作。经过多次试验和错误，我发现了这一点。

2.  要将对象数组传递给 MVC 控制器方法，只需使用 JSON.stringify({ 'things': things }) 格式。

我希望这对其他人有帮助！

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2015-03-26T16:28:40.583

你就不能这样做吗？

```
var things = [
    { id: 1, color: 'yellow' },
    { id: 2, color: 'blue' },
    { id: 3, color: 'red' }
];
$.post('@Url.Action("PassThings")', { things: things },
   function () {
        $('#result').html('"PassThings()" successfully called.');
   }); 
```

...并用

```
[HttpPost]
public void PassThings(IEnumerable<Thing> things)
{
    // do stuff with things here...
} 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2018-06-10T19:45:11.453

我正在使用 .Net Core 2.1 Web 应用程序，但无法在此处获得单一答案。我要么得到一个空白参数（如果调用了该方法），要么得到一个 500 服务器错误。我开始尝试所有可能的答案组合，最后得到了一个有效的结果。

在我的情况下，解决方案如下：

## 脚本 - 对原始数组进行字符串化（不使用命名属性）

```
 $.ajax({
        type: 'POST',
        contentType: 'application/json; charset=utf-8',
        url: mycontrolleraction,
        data: JSON.stringify(things)
    }); 
```

## 在控制器方法中，使用 [FromBody]

```
 [HttpPost]
    public IActionResult NewBranch([FromBody]IEnumerable<Thing> things)
    {
        return Ok();
    } 
```

## 失败包括：

*   命名内容

    data: { content: nodes }, // 服务器错误 500

*   没有 contentType = 服务器错误 500

## 笔记

*   `dataType`不需要，尽管有些答案说了什么，因为它用于*响应解码（因此与此处的**请求*示例无关）。
*   `List<Thing>`也适用于控制器方法

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-11-06T00:51:52.910

格式化可能是问题的数据。尝试以下任何一种：

```
data: '{ "things":' + JSON.stringify(things) + '}', 
```

或者（来自[How can I post a array of string to ASP.NET MVC Controller without a form？](https://stackoverflow.com/questions/309115/how-can-i-post-an-array-of-string-to-asp-net-mvc-controller-without-a-form)）

```
var postData = { things: things };
...
data = postData 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-07-27T14:42:14.610

我对这一切都有完美的答案：我尝试了很多解决方案，最终无法让自己能够管理，请在下面找到详细答案：

```
 $.ajax({
            traditional: true,
            url: "/Conroller/MethodTest",
            type: "POST",
            contentType: "application/json; charset=utf-8",
            data:JSON.stringify( 
               [
                { id: 1, color: 'yellow' },
                { id: 2, color: 'blue' },
                { id: 3, color: 'red' }
                ]),
            success: function (data) {
                $scope.DisplayError(data.requestStatus);
            }
        }); 
```

**控制器**

```
public class Thing
{
    public int id { get; set; }
    public string color { get; set; }
}

public JsonResult MethodTest(IEnumerable<Thing> datav)
    {
   //now  datav is having all your values
  } 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-07-19T04:50:11.073

我可以让它工作的唯一方法是将 JSON 作为字符串传递，然后使用 反序列化它`JavaScriptSerializer.Deserialize<T>(string input)`，如果这是 MVC 4 的默认反序列化器，这很奇怪。

我的模型有嵌套的对象列表，使用 JSON 数据我能得到的最好的结果是最上面的列表，其中包含正确数量的项目，但项目中的所有字段都是空的。

这种事情不应该那么难。

```
 $.ajax({
        type: 'POST',
        url: '/Agri/Map/SaveSelfValuation',
        data: { json: JSON.stringify(model) },
        dataType: 'text',
        success: function (data) {

    [HttpPost]
    public JsonResult DoSomething(string json)
    {
        var model = new JavaScriptSerializer().Deserialize<Valuation>(json); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-03-02T13:55:01.203

**这是您查询的工作代码，您可以使用它。**

**控制器**

```
 [HttpPost]
    public ActionResult save(List<ListName> listObject)
    {
    //operation return
    Json(new { istObject }, JsonRequestBehavior.AllowGet); }
    } 
```

**javascript**

```
 $("#btnSubmit").click(function () {
    var myColumnDefs = [];
    $('input[type=checkbox]').each(function () {
        if (this.checked) {
            myColumnDefs.push({ 'Status': true, 'ID': $(this).data('id') })
        } else {
            myColumnDefs.push({ 'Status': false, 'ID': $(this).data('id') })
        }
    });
   var data1 = { 'listObject': myColumnDefs};
   var data = JSON.stringify(data1)
   $.ajax({
   type: 'post',
   url: '/Controller/action',
   data:data ,
   contentType: 'application/json; charset=utf-8',
   success: function (response) {
    //do your actions
   },
   error: function (response) {
    alert("error occured");
   }
   }); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-05-21T03:00:10.090

这对我来说效果很好：

```
var things = [
    { id: 1, color: 'yellow' },
    { id: 2, color: 'blue' },
    { id: 3, color: 'red' }
];

$.ajax({
    ContentType: 'application/json; charset=utf-8',
    dataType: 'json',
    type: 'POST',
    url: '/Controller/action',
    data: { "things": things },
    success: function () {
        $('#result').html('"PassThings()" successfully called.');
    },
    error: function (response) {
        $('#result').html(response);
    }
}); 
```

使用大写“C”中的“ContentType”。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-09-21T22:06:21.383

使用包含与 MVC 控制器预期的参数名称匹配的属性的另一个对象包装您的对象列表。重要的一点是对象列表的包装器。

```
$(document).ready(function () {
    var employeeList = [
        { id: 1, name: 'Bob' },
        { id: 2, name: 'John' },
        { id: 3, name: 'Tom' }
    ];      

    var Employees = {
      EmployeeList: employeeList
    }

    $.ajax({
        dataType: 'json',
        type: 'POST',
        url: '/Employees/Process',
        data: Employees,
        success: function () {          
            $('#InfoPanel').html('It worked!');
        },
        failure: function (response) {          
            $('#InfoPanel').html(response);
        }
    }); 
});

public void Process(List<Employee> EmployeeList)
{
    var emps = EmployeeList;
}

public class Employee
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-07-08T12:38:41.697

我可以确认在 asp.net core 2.1 上，删除内容类型使我的 ajax 调用工作。

```
function PostData() {
    var answer = [];

    for (let i = 0; i < @questionCount; i++) {
        answer[i] = $(`#FeedbackAnswer${i}`).dxForm("instance").option("formData");
    }

    var answerList = { answers: answer }

    $.ajax({
        type: "POST",
        url: "/FeedbackUserAnswer/SubmitForm",
        data: answerList ,
        dataType: 'json',
        error: function (xhr, status, error) { },
        success: function (response) { }
    });
} 
```

```
[HttpPost]
public IActionResult SubmitForm(List<Feedback_Question> answers)
{} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-01-04T09:32:31.660

```
 var List = @Html.Raw(Json.Encode(Model));
$.ajax({
    type: 'post',
    url: '/Controller/action',
    data:JSON.stringify({ 'item': List}),
    contentType: 'application/json; charset=utf-8',
    success: function (response) {
        //do your actions
    },
    error: function (response) {
        alert("error occured");
    }
}); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-07-01T14:54:12.440

`contentType`在 asp.net core 3.1 中删除对我有用

所有其他方法均失败

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-12-25T10:07:51.667

如果您使用的是 ASP.NET Web API，那么您应该只通过 `data: JSON.stringify(things)`.

你的控制器应该是这样的：

```
public class PassThingsController : ApiController
{
    public HttpResponseMessage Post(List<Thing> things)
    {
        // code
    }
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-04-24T07:56:11.867

来自@veeresh i 的修改

```
 var data=[

                        { id: 1, color: 'yellow' },
                        { id: 2, color: 'blue' },
                        { id: 3, color: 'red' }
                        ]; //parameter
        var para={};
        para.datav=data;   //datav from View

        $.ajax({
                    traditional: true,
                    url: "/Conroller/MethodTest",
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    data:para,
                    success: function (data) {
                        $scope.DisplayError(data.requestStatus);
                    }
                });

In MVC

public class Thing
    {
        public int id { get; set; }
        public string color { get; set; }
    }

    public JsonResult MethodTest(IEnumerable<Thing> datav)
        {
       //now  datav is having all your values
      } 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-03-31T13:54:46.413

我在尝试将一些数据从 DataTable 中的几个选定行发送到 MVC 操作时做了什么：

HTML 在页面的开头：

```
@Html.AntiForgeryToken() 
```

（只显示一行，从模型绑定）：

```
 @foreach (var item in Model.ListOrderLines)
                {
                    <tr data-orderid="@item.OrderId" data-orderlineid="@item.OrderLineId" data-iscustom="@item.IsCustom">
                        <td>@item.OrderId</td>
                        <td>@item.OrderDate</td>
                        <td>@item.RequestedDeliveryDate</td>
                        <td>@item.ProductName</td>
                        <td>@item.Ident</td>
                        <td>@item.CompanyName</td>
                        <td>@item.DepartmentName</td>
                        <td>@item.ProdAlias</td>
                        <td>@item.ProducerName</td>
                        <td>@item.ProductionInfo</td>
                    </tr>
                } 
```

启动 JavaScript 函数的按钮：

```
 <button class="btn waves-effect waves-light btn-success" onclick="ProcessMultipleRows();">Start</button> 
```

JavaScript 函数：

```
 function ProcessMultipleRows() {
            if ($(".dataTables_scrollBody>tr.selected").length > 0) {
                var list = [];
                $(".dataTables_scrollBody>tr.selected").each(function (e) {
                    var element = $(this);
                    var orderid = element.data("orderid");
                    var iscustom = element.data("iscustom");
                    var orderlineid = element.data("orderlineid");
                    var folderPath = "";
                    var fileName = "";

                    list.push({ orderId: orderid, isCustomOrderLine: iscustom, orderLineId: orderlineid, folderPath: folderPath, fileName : fileName});
                });

                $.ajax({
                    url: '@Url.Action("StartWorkflow","OrderLines")',
                    type: "post", //<------------- this is important
                    data: { model: list }, //<------------- this is important
                    beforeSend: function (xhr) {//<--- This is important
                      xhr.setRequestHeader("RequestVerificationToken",
                      $('input:hidden[name="__RequestVerificationToken"]').val());
                      showPreloader();
                    },
                    success: function (data) {

                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {

                    },
                     complete: function () {
                         hidePreloader();
                    }
                });
            }
        } 
```

MVC 动作：

```
[HttpPost]
[ValidateAntiForgeryToken] //<--- This is important
public async Task<IActionResult> StartWorkflow(IEnumerable<WorkflowModel> model) 
```

和 C# 中的模型：

```
public class WorkflowModel
 {
        public int OrderId { get; set; }
        public int OrderLineId { get; set; }
        public bool IsCustomOrderLine { get; set; }
        public string FolderPath { get; set; }
        public string FileName { get; set; }
 } 
```

结论：

错误的原因：

```
"Failed to load resource: the server responded with a status of 400 (Bad Request)" 
```

是属性：`[ValidateAntiForgeryToken]`对于MVC动作`StartWorkflow`

Ajax 调用中的解决方案：

```
 beforeSend: function (xhr) {//<--- This is important
                      xhr.setRequestHeader("RequestVerificationToken",
                      $('input:hidden[name="__RequestVerificationToken"]').val());
                    }, 
```

要发送对象列表，您需要形成示例中的数据（填充列表对象），并且：

**数据：{模型：列表}，**

**类型：“帖子”，**

# php - 如何在 php foreach 循环中替换 div 元素

> ID：13242416
> 
> 赞同：2
> 
> 时间：2012-11-06T00:01:47.837
> 
> 标签：php, javascript, html

我有一组从数据库中返回的数组，我正在使用 php`foreach`循环来遍历它们。如果我要返回 5 个数组`[1, 2, 3, 4, 5]`，每个数组都包含一个（时间、状态、位置），我想用某个 div 设置所有偶数数组的样式，用不同的 div 设置每个奇数数组的样式。我该怎么做？

我假设我会使用带模运算符的循环。

```
for ($i = 1; $i <= $count; $i++)
    if ($i % 2 == 0) {

    } else {

    }
} 
```

* * *

```
<?php foreach ($reservation as $seat) : ?> 
```

**如果是数组 1、3、5。**

```
 <div style="font-size:20px; background-color: #red; float:left;">
 <?php echo $seat['location']; ?>
 <?php echo $seat['time']; ?> 
 <?php echo $seat['status']; ?> </div> 
```

**如果是数组2、4**

```
<div style="font-size:20px; background-color: #blue; float:right;">
 <?php echo $seat['location']; ?>
 <?php echo $seat['time']; ?> 
 <?php echo $seat['status']; ?> </div>

<?php endforeach ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T00:06:11.387

看起来很合理，但是：

```
background-color: #blue; 
```

没有意义。'#' 用作十六进制颜色值的前缀，而你有一个颜色名称，所以你想要：

```
background-color: blue; 
```

或者

```
background-color: #0000ff; 
```

此外，您是否知道，在现代浏览器（即[IE9+](http://www.quirksmode.org/css/contents.html)）中，可以仅通过 CSS3 实现交替样式元素，例如

```
div:nth-child(odd) { background-color: blue; } 
```

查看

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T00:07:24.730

您不必使用 foreach 循环来枚举数组的所有元素：

```
for ($i=1; $i <= $count; $i++) {
    $seat = $reservation[$i-1];
    if ($i % 2 == 0) {
        // Do your 2 and 4
    } else {
        // Do your 1, 3 and 5
    }
} 
```

我建议为 div 设置 CSS 类“奇数”和“偶数”，然后在单独的文件中设置它们的样式。如果需要，还可以使用 CSS3 伪类`:nth-child(odd)`和`:nth-child(even)`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T00:09:38.127

只要您保留一个计数器，您的模数测试甚至可以在 foreach 循环中在线完成：

```
$ cat divloop.php 
<?php

$a=array( "one", "two", "three", "four", "five" );

$fmt="<div class='reservation %s'>%s</div>\n";

$count=0;

foreach ($a as $item) {
  printf($fmt, ++$count % 2 == 0 ? "even" : "odd", $item);
} 
```

结果：

```
$ php divloop.php 
<div class='reservation odd'>one</div>
<div class='reservation even'>two</div>
<div class='reservation odd'>three</div>
<div class='reservation even'>four</div>
<div class='reservation odd'>five</div>
$ 
```

在这一点上，使用显式类比依赖可能无法全面使用的浏览器功能更安全。至少每个人似乎都了解基本的 CSS。:)

```
.reservation {
  font-size: 20px;
  float: left;
}

.even {
  background-color: #blue;
}

.odd {
  background-color: #red;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T00:08:53.097

如果你把柜台放在 foreach 里怎么办。

```
$count = 0;
<?php foreach ($reservation as $seat) : ?>
if ($count % 2 == 0){
  //even div 
}else {
  // odd div
}
$count++;

<?php endforeach ?> 
```

# php - 简化前端控制器路由正则表达式

> ID：13242418
> 
> 赞同：0
> 
> 时间：2012-11-06T00:02:01.170
> 
> 标签：php, regex, routes, front-controller

我在制作自己的一个正则表达式来满足我的需求时遇到了很多麻烦。这是一个我试图不使用框架的应用程序，除了 Doctrine，但在那种情况下并不重要。我正在使用前端控制器模式，并使用注释将我的路由映射到控制器的方法。

像：

```
/**
 * @GetMethod
 * @Route(name=index)
 * @return UserProfileDto
 */
public function getUserProfile(); 
```

任何人都可以帮助制作一个正则表达式来匹配我需要的一切吗？

规则是：

*   必需的：

    *   控制器（ /controller，url 上的第一项）
    *   类型（.json、.xml、.html、...）
*   选修的：

    *   操作（/controller/action，url 上的第二项）
    *   参数（动作和类型之间的一切，/controller/action/param1/param2/param3.type）

这是我设法做到的：

```
<?php
header("content-type: text/plain");
// example url access: /profile/edit/23.html, /profile/delete/2.json, /profile.xml, /user/list.xml
$string = $_GET['u'];

$matches = array();

$objRoute = new stdClass();

preg_match_all("~^/(?P<controller>[^/\\.]+)~", $string, $matches);

if ($matches && $matches['controller']) {
    $objRoute->controller = $matches['controller'][0];
} else {
    $objRoute->controller = "index";
}

preg_match_all("~^/$objRoute->controller/(?P<action>[^/\\.]+)~", $string, $matches);

if ($matches && $matches['action']) { 
    $objRoute->action = $matches['action'][0];

    preg_match_all("~^/$objRoute->controller/{$objRoute->action}(?:/[^\\.]+)?\\.(?P<type>.+)$~", $string, $matches);

} else {

    preg_match_all("~^/$objRoute->controller\\.(?P<type>.+)$~", $string, $matches);
    $objRoute->action = "index";
    $objRoute->parameters = null;
}

if ($matches && $matches['type']) {
    $objRoute->type = $matches['type'][0];

    preg_match_all("~^/$objRoute->controller/{$objRoute->action}(?:/(?P<parameters>[^\\.]+))?\\.{$objRoute->type}$~", $string, $matches);
    if ($matches && $matches['parameters'] && $matches['parameters'][0]) {
        $objRoute->parameters = explode("/",$matches['parameters'][0]);
    } else {
        $objRoute->parameters = null;
    }

} else {
    die("Bad Request, no reponse type provided");
}
// "advanced" example method route @Route(name=edit/{id})
$route = "edit/{id}";

$route = preg_replace("~\\{([^\\}]+)\\}~", '(?P<' . '${1}' . '>[^/]+)', $route);

$routeTo = $objRoute->action . "/" . implode("/",$objRoute->parameters);

if ($objRoute->parameters && count($objRoute->parameters)) {
    preg_match_all("~^$route$~", $routeTo , $matches);
} 

foreach($matches as $idx => $match) {
    if ($match && $match[0] && !is_numeric($idx)) {
        $objRoute->{$idx} = $match[0];
    }
}

print_r($objRoute);

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T02:39:48.927

我将使用单个正则表达式来验证/匹配整个路由字符串，并从返回的 $matches 数组中提取控制器、操作、参数和类型。参数部分，可以有可变数量的部分，随后被解析。这是一个经过测试的 PHP 脚本，带有注释的正则表达式，应该是一个很好的起点：

```
<?php // test.php Rev:20121105_1900
$route = '/controller/action/param1/param2/param3.html';
$re = '%
    # Parse controller, action, params and type from route.
    ^                    # Anchor to start of string.
    /                    # $controller prefix (required).
    (?P<controller>      # $controller (required).
      [^/\\\\.]+         # Value = one or more non-/\..
    )                    # $controller (required).
    (?:                  # Action is optional.
      /                  # $action prefix.
      (?P<action>        # $action.
        [^/\\\\.]+       # Value = one or more non-/\..
      )                  # $action.
    )?                   # Action is optional.
    (?:                  # Parameters are optional.
      (?P<params>        # $params.
        (?:              # One or more parameters
          /              # Params separated by a /.
          [^/\\\\.]+     # Value = one or more non-/\..
        )+               # One or more parameters
      )                  # $params.
    )?                   # Parameters are optional.
    \.                   # $type prefix (required).
    (?P<type>            # $type (required).
      [^/\\\\.]+         # Value = one or more non-/\..
    )                    # $type (required).
    $                    # Anchor to end of string.
    %x';
if (preg_match($re, $route, $matches)) {
    // Valid route string.
    printf("OK: \"%s\" is a valid route string.\n", $route);
    printf(     "  controller = \"%s\"\n", $matches['controller']);
    printf(     "  type       = \"%s\"\n", $matches['type']);
    if ($matches['action']) {
        printf( "  action     = \"%s\"\n", $matches['action']);
    } else {
        printf( "  action     = (none)\n");
    }
    if ($matches['params']) {
        printf(     "  params     = \"%s\"\n", $matches['params']);
        $params = preg_split('%/%', $matches['params'], -1, PREG_SPLIT_NO_EMPTY);
        for ($i = 0; $i < count($params); ++$i) {
            printf( "    p[%d]     = \"%s\"\n", $i+1, $params[$i]);
        }
    } else {
        printf( "  params     = (none)\n");
    }
} else {
    // Not a valid route string.
    printf("ERROR: \"%s\" is NOT a valid route string.\n", $route);
}
?> 
```

## 输出：

```
OK: "/controller/action/param1/param2/param3.html" is a valid route string.
  controller = "controller"
  type       = "html"
  action     = "action"
  params     = "/param1/param2/param3"
    p[1]     = "param1"
    p[2]     = "param2"
    p[3]     = "param3" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T00:19:11.297

而不是使用正则表达式，您可以使用[`explode()`](http://us1.php.net/manual/en/function.explode.php)

例子：

```
$url = "/profile/edit/23.html";
$parsed = explode("/",$url); 
```

现在 $url 的每个元素都在解析后的数组中：

```
$objRoute->controller = $parsed[1];
$objRoute->action = $parsed[2];
... 
```

$parsed 的转储将为您提供：

```
"" // blank
"profile" // controller
"edit" // action
"23.html" // values 
```

# ios - SQLite FMDB 创建表 - 初学者 iOS

> ID：13242425
> 
> 赞同：7
> 
> 时间：2012-11-06T00:03:05.880
> 
> 标签：ios, sqlite, fmdb

我认为这是一个简单的问题，但我没有在 FMDB git 页面中找到答案。使用命令时：

```
[database executeUpdate:@"create table T_table(name text primary key, age int)"]; 
```

FMDB 或 SQLite 是否会进行某种验证以查看表是否已存在？

我可以在我的类初始化程序中调用此方法而不创建多个表吗？

对不起，如果愚蠢的问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-06T21:35:59.007

另一种解决方案是将您的查询更改为：

```
create table if not exists test_table (test_no NUMBER, test_name TEXT); 
```

或者，您可以使用以下方法检查是否存在：

```
select sql from SQLITE_MASTER where name = 'test_table' 
```

看看你是否得到任何结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T06:18:53.890

每当您`CREATE TABLE`向 FMDB 发出命令时，它都会在内部将其转换为相应的 SQLite 查询（您不必担心）。

根据 SQLite 网站上给出的官方文档，它指出：

`"It is usually an error to attempt to create a new table in a database that already contains a table, index or view of the same name."`

所以，如果你尝试创建另一个同名的表，SQLite 会抛出一个错误：

```
create table test_table (test_no NUMBER, test_name TEXT); //Table created

/* Now, try creating the table again */
create table test_table (test_no NUMBER, test_name TEXT); 
```

您将收到以下错误。
**错误：表 test_table 已存在**

因此，SQLite 检查表的存在，它不会允许另一个同名的表。

同样，您可以参考文档以获取更多详细信息。

**来源** [http://www.sqlite.org/lang_createtable.html](http://www.sqlite.org/lang_createtable.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-15T12:50:29.437

```
var databasePath = String()
    override func viewDidLoad() {
        super.viewDidLoad()

        let filemgr = FileManager.default
        let dirPaths = filemgr.urls(for: .documentDirectory,
                                    in: .userDomainMask)

        databasePath = dirPaths[0].appendingPathComponent("contacts.db").path

        if !filemgr.fileExists(atPath: databasePath as String) {

            let contactDB = FMDatabase(path: databasePath as String)

            if contactDB == nil {
                print("Error: \(contactDB.lastErrorMessage())")
            }

            if (contactDB.open()) {
                let sql_stmt = "CREATE TABLE IF NOT EXISTS CONTACTS (ID INTEGER PRIMARY KEY AUTOINCREMENT, NAME TEXT, ADDRESS TEXT, PHONE TEXT)"
                if !(contactDB.executeStatements(sql_stmt)) {
                    print("Error: \(contactDB.lastErrorMessage())")
                }
                contactDB.close()
            } else {
                print("Error: \(contactDB.lastErrorMessage())")
            }
        }
        save()

        // Do any additional setup after loading the view, typically from a nib.
    }

    override func didReceiveMemoryWarning() {
        super.didReceiveMemoryWarning()
        // Dispose of any resources that can be recreated.
    }
    func save()
    {
        let contactDB = FMDatabase(path: databasePath as String)

        if (contactDB.open()) {

            let insertSQL = "INSERT INTO CONTACTS (name, address, phone) VALUES ('\("abc")', '\("abc")', '\("1234")')"

            let result = contactDB.executeUpdate(insertSQL,
                                                  withArgumentsIn: [])

            if !result {
                //status.text = "Failed to add contact"
                print("Error: \(contactDB.lastErrorMessage())")
            }
            else
            {
                getData()
//                status.text = "Contact Added"
//                name.text = ""
//                address.text = ""
//                phone.text = ""
            }
        } else {
            print("Error: \(contactDB.lastErrorMessage())")
        }
    }

   func getData()
    {
        let contactDB = FMDatabase(path: databasePath as String)

        if (contactDB.open()) {
          //  let querySQL = "SELECT address, phone FROM CONTACTS WHERE name = '\(name.text!)'"
            let querySQL = "SELECT ID,address, phone FROM CONTACTS"

            let results:FMResultSet? = contactDB.executeQuery(querySQL,
                                                               withArgumentsIn: [])

            while results?.next() == true
            {
                let id = results?.string(forColumn: "ID")
                //(forColumn: "address")
                let phone = results?.string(forColumn: "phone")
                print(phone ?? "")
                print("\(id)")
                //status.text = "Record Found"
            }
//            else
//            {
//                print("")
//               // status.text = "Record not found"
//               // address.text = ""
////phone.text = ""
//            }
            contactDB.close()
        }
        else
        {
            print("Error: \(contactDB.lastErrorMessage())")
        }

    }

} 
```

# php - 如何使用 GTFS-realtime 来获取计划警报和延迟？

> ID：13242426
> 
> 赞同：2
> 
> 时间：2012-11-06T00:03:13.330
> 
> 标签：php, python, mysql, gtfs

我已经编写 PHP 几年了，我正在考虑处理 GTFS 实时提要。我已经为特定机构下载了 GTFS 文件，并使用 fgetcsv 函数使用 PHP 解析它们。

我现在坚持的是，我如何使用这些信息来查找服务延迟等。我习惯于通过 XML api 等解析信息，但以前没有处理过类似的事情。似乎需要一些我不知道但愿意学习的python知识。

如果有人可以为我提供适当的指导，我将不胜感激。我可以让它将记录存储到 MySQL 中，但我不确定我是否只需要针对当前时间戳与预期时间戳创建查询以查看是否存在延迟。我很难弄清楚下一步该做什么。

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:05:44.797

为了清楚起见，您正在使用[GTFS](https://developers.google.com/transit/gtfs/)提要*和*[GTFS 实时](https://developers.google.com/transit/gtfs-realtime/)提要，对吗？

我的理解是，要为停靠站生成最新的时间表信息，基本程序是

*   从 GTFS 提要中，获取一组行程 ID/停止序列对，用于在下一小时内到达停靠点的车辆。
*   从 GTFS 实时源中，获取每个行程 ID/停止序列对（如果存在于源中）的更新到达和离开时间。

实时馈送将提供绝对时间或相对时间（即延迟）；GTFS 数据中给出的计划时间允许您从一种转换到另一种。

# mysql - 如何构建我的用户数据库？

> ID：13242427
> 
> 赞同：0
> 
> 时间：2012-11-06T00:03:14.733
> 
> 标签：mysql, sql, database

我有一个网站，允许用户是不同的类型。这些类型中的每一种都可以做特定的事情。我在问我是否应该为我的所有用户设置 1 个表并将类型存储在一个枚举中，或者我应该为每种类型创建不同的表。现在，如果唯一不同的是类型，那么我很容易选择只使用一张桌子。但是，这是一个场景。

4 个用户是 A、B、C、D。

用户 A 有以下数据：

*   姓名
*   电子邮件

用户 B 有以下数据：

*   姓名
*   电子邮件
*   电话

用户 C 拥有以下数据：

*   姓名
*   电子邮件
*   电话
*   关于

用户 D 有以下数据：

*   姓名
*   电子邮件
*   电话
*   关于
*   地址

如果我要创建一个表，是否应该为不同的用户保留不同的字段为空？或者我应该为每个用户创建一个完整的单独表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T00:08:33.987

如果您可以为所有这些创建一个表，那就更好了。虽然有些文件可以为*空*。并为每种类型的用户添加一个额外的列 ( *enum )。*如果您保留当前的设计，则必须使用一些*连接*和*联合*进行记录。（*这在服务器上增加了额外的开销*）

```
CREATE TABLE users
(
    ID INT,
    name VARCHAR(50),
    email VARCHAR(50),
    phone VARCHAR(50),
    about VARCHAR(50),
    address VARCHAR(50),
    userType ENUM()         -- put types of user here
) 
```

另一种建议的设计是创建两个表，一个用于用户，另一个用于类型。这里的主要优点是每当您有其他类型的用户时，您不必更改表，只需在用户类型表上添加额外的记录，然后用户表将引用该记录。

```
CREATE TABLE UserType
(
    ID INT PRIMARY KEY,
    name VARCHAR(50)
)

CREATE TABLE users
(
    ID INT,
    name VARCHAR(50),
    email VARCHAR(50),
    phone VARCHAR(50),
    about VARCHAR(50),
    address VARCHAR(50),
    TypeID INT,
    CONSTRAINT rf_fk FOREIGN KEY (TypeID) REFERENCES UserType(ID)
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T03:52:05.653

基本数据库设计原则建议一个表用于公共元素和附加表，连接回基表，用于每种用户类型的唯一属性。

您的示例在简单的继承层次结构中建议每个用户类型一个且只有一个附加字段。这*真的*是数据的样子，还是只是为了举例？如果这是您要求的真实表示，我可能会（为了方便起见）使用单个表。但如果真正的要求更复杂，我会硬着头皮“正确”地做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T03:35:26.640

尝试创建四个表：

```
Table 1: Name, email
Table 2: Name, phone
Table 3: Name, about
Table 4: Name, address 
```

Name 是您在所有四个表上的主键。数据库中没有空值。您不是存储枚举类型，而是从表连接派生类型：

```
To find all User A select all records in table 1 not in table 2
To find all User B select all records in table 2 not in table 3
To find all User C select all records in table 3 not in table 4
To find all User D select all records in table 4 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T00:08:24.337

您不应该为不同的人创建表，因为这会导致数据库膨胀。最好创建一个包含您需要的所有字段的表。如果您不使用该字段，请传入空值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T00:10:33.630

我建议您使用 1 个带有可为空字段的单表。还有一张类似角色的表格。

# c# - 如何将连接字符串作为键值？

> ID：13242429
> 
> 赞同：0
> 
> 时间：2012-11-06T00:03:43.900
> 
> 标签：c#, asp.net

我想将连接字符串作为键。所以我在 web.config 中写了这段代码。

```
 <add key="connectstring" value="Data Source=USER-PC;Initial Catalog=DBName; Integrated Security=False; providerName=System.Data.SqlClient"/>
  </appSettings> 
```

但有错误，它说

```
Keyword not supported: 'providername'.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.ArgumentException: Keyword not supported: 'providername'.

Source Error:

Line 28:             SqlConnection conn;
Line 29:             conn = new SqlConnection(ConfigurationManager.AppSettings["connectstring"].ToString());
Line 30:                 
Line 31: 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:05:26.310

尝试使用 ConfigurationManager 对象：

```
string connectionString 
    = ConfigurationManager.ConnectionStrings["Conn"].ConnectionString;

<connectionStrings>
    <remove name="LocalSqlServer" />
    <add name="LocalSqlServer" 
        connectionString="Initial Catalog=MyDB;Data Source=MyPC;Integrated Security=SSPI;"
            providerName="System.Data.SqlClient" />
<connectionStrings> 
```

要使用 appSettings：

```
System.Configuration.ConfigurationManager.Appsettings.Get("connectstring"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T00:53:03.193

```
<appSettings>
<add key="connectstring" value="Data Source=USER-PC;Initial Catalog=DBName; Integrated Security=False;" providerName="System.Data.SqlClient"/> 
```

在您的值中单独**提供 providerName**

注意：您的值有错误，请在***False 后添加双引号；***

# c++ - 将参数传递给 C++ 中的无操作宏

> ID：13242431
> 
> 赞同：2
> 
> 时间：2012-11-06T00:04:04.093
> 
> 标签：c++, noop

我收到以下错误消息

```
error: '0' cannot be used as a function 
```

尝试编译以下行时：

```
NOOP(0 != width); 
```

NOOP 定义如下：

```
#define NOOP (void)0 
```

源代码是 SDK 的一部分 - 所以应该没问题。而且我发现这`(void)0`实际上是一种在 C++ 中描述“无操作”的有效方法。但是为什么要将布尔参数传递给什么都不做的函数呢？以及如何摆脱错误信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T00:07:53.387

MACRO 上没有定义任何参数，因此在预处理器替换代码后，该语句最终看起来像这样：

```
(void)0(0 != width); 
```

这使编译器误以为您正在尝试在 0 上使用“()”运算符。（即使用 0 作为函数）

我建议您删除“（0！=宽度）”（它具有误导性）而只写NOOP；

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T00:08:52.410

" `(void)0(0!=width);`" 不是有效的 C++，所以不行。`(void)0;`它本身在 C++ 中没有任何作用，因此可以用作 noop。而不是你当前的定义，我会使用：

```
#define NOOP(X) (void)0 
```

这告诉 C++ 预处理器有一个被调用的预处理器函数`NOOP`，它接受一个*任何*类型的参数，并将整个函数调用替换为`(void)0`. 因此，如果您有一行代码显示`NOOP("HELLO WORLD")`，那么预处理器会将*整个内容*替换为`(void)0`，C++ 编译器会继续忽略它。

# java - 在面板上显示时钟

> ID：13242435
> 
> 赞同：0
> 
> 时间：2012-11-06T00:04:44.563
> 
> 标签：java, swing, user-interface, awt, java-2d

出于某种原因，当我将 ClockComponent 对象添加到 JPanel 对象时，它没有显示出来。当我将它添加到 JFrame 对象而不是 JPanel 对象时，它确实会显示出来......我不明白为什么，我在这里发布这个问题之前已经查过了，但无济于事。有什么方法可以让我的从 JComponent 继承的 ClockComponent 对象显示在 JPanel 上？非常感谢您提前提供的帮助。

这是我的 ClockViewer 类，它在运行时不会显示时钟：

```
 import javax.swing.JFrame;
            import javax.swing.JPanel;

            public class ClockViewer
            {
                public static void main(String[] args)
                {
                    JFrame frame = new JFrame();
                    frame.setTitle("Clock viewer");
                    frame.setSize(500, 500);
                    JPanel panel = new JPanel();

                    ClockComponent comps = new ClockComponent(7, 40);

                    panel.add(comps);
                    frame.add(panel);

                    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                    frame.setVisible(true);
                }
            } 
```

这是我的 ClockComponent 类供参考：

```
 import java.awt.Graphics;
            import java.awt.Graphics2D;
            import java.awt.geom.Ellipse2D;
            import java.awt.geom.Line2D;

            import javax.swing.JComponent;

            public class ClockComponent extends JComponent
            {
                final int CENTER = 150;
                final double HOUR_HAND_LENGTH = 20;
                final double MINUTE_HAND_LENGTH = 40;

                private Line2D.Double hourHand;
                private Line2D.Double minuteHand;

                public ClockComponent(double hour, double minute)
                {
                    hourHand = new Line2D.Double(CENTER, CENTER, 
                            CENTER, CENTER - HOUR_HAND_LENGTH);
                    minuteHand = new Line2D.Double(CENTER, CENTER, 
                            CENTER, CENTER - MINUTE_HAND_LENGTH);

                    final int HOURS_ON_CLOCK = 12;
                    final int MINUTES_IN_HOUR = 60;
                    final double HOURS_TO_RADIANS = 2 * Math.PI / HOURS_ON_CLOCK;
                    final double MINUTES_TO_RADIANS = 2 * Math.PI / MINUTES_IN_HOUR;

                    hourHand.setLine(CENTER, CENTER, CENTER + HOUR_HAND_LENGTH * 
                            Math.sin((hour + minute / MINUTES_IN_HOUR) * HOURS_TO_RADIANS), 
                            CENTER - HOUR_HAND_LENGTH * 
                            Math.cos((hour + minute / MINUTES_IN_HOUR) * HOURS_TO_RADIANS));
                    minuteHand.setLine(CENTER, CENTER,
                            CENTER + MINUTE_HAND_LENGTH * Math.sin(minute * MINUTES_TO_RADIANS),
                            CENTER - MINUTE_HAND_LENGTH * Math.cos(minute * MINUTES_TO_RADIANS));
                }

                public void paintComponent(Graphics g)
                {
                    final int DIAMETER = 100;
                    final int POS_X_Y = CENTER - DIAMETER / 2;

                    Graphics2D g2 = (Graphics2D) g;

                    Ellipse2D.Double clockFace = 
                            new Ellipse2D.Double(POS_X_Y, POS_X_Y, DIAMETER, DIAMETER);

                    g2.draw(clockFace);
                    g2.draw(hourHand);
                    g2.draw(minuteHand);
                }
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T00:10:43.903

在面板中，您可以使用使时钟组件填充面板的整个区域的布局，例如`GridLayout`：

```
JPanel panel = new JPanel(new GridLayout(1, 0)); 
```

面板的默认设置`FlowLayout`不会展开任何子组件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T00:16:59.853

`ClockComponent`应该设置或覆盖首选大小。如果组件不可调整大小，许多人更喜欢覆盖它。这个例子只是设置它。

```
import java.awt.*;
import java.awt.geom.*;
import javax.swing.*;

public class ClockComponent extends JComponent
{
    final int CENTER = 150;
    final double HOUR_HAND_LENGTH = 20;
    final double MINUTE_HAND_LENGTH = 40;

    private Line2D.Double hourHand;
    private Line2D.Double minuteHand;

    public ClockComponent(double hour, double minute)
    {
        setPreferredSize(new Dimension(300,300));
        hourHand = new Line2D.Double(CENTER, CENTER, 
                CENTER, CENTER - HOUR_HAND_LENGTH);
        minuteHand = new Line2D.Double(CENTER, CENTER, 
                CENTER, CENTER - MINUTE_HAND_LENGTH);

        final int HOURS_ON_CLOCK = 12;
        final int MINUTES_IN_HOUR = 60;
        final double HOURS_TO_RADIANS = 2 * Math.PI / HOURS_ON_CLOCK;
        final double MINUTES_TO_RADIANS = 2 * Math.PI / MINUTES_IN_HOUR;

        hourHand.setLine(CENTER, CENTER, CENTER + HOUR_HAND_LENGTH * 
                Math.sin((hour + minute / MINUTES_IN_HOUR) * HOURS_TO_RADIANS), 
                CENTER - HOUR_HAND_LENGTH * 
                Math.cos((hour + minute / MINUTES_IN_HOUR) * HOURS_TO_RADIANS));
        minuteHand.setLine(CENTER, CENTER,
                CENTER + MINUTE_HAND_LENGTH * Math.sin(minute * MINUTES_TO_RADIANS),
                CENTER - MINUTE_HAND_LENGTH * Math.cos(minute * MINUTES_TO_RADIANS));
    }

    public void paintComponent(Graphics g)
    {
        final int DIAMETER = 100;
        final int POS_X_Y = CENTER - DIAMETER / 2;

        Graphics2D g2 = (Graphics2D) g;

        Ellipse2D.Double clockFace = 
                new Ellipse2D.Double(POS_X_Y, POS_X_Y, DIAMETER, DIAMETER);

        g2.draw(clockFace);
        g2.draw(hourHand);
        g2.draw(minuteHand);
    }

    public static void main(String[] args)
    {
        JFrame frame = new JFrame();
        frame.setTitle("Clock viewer");
        // bad practice
        //frame.setSize(500, 500);
        JPanel panel = new JPanel();

        ClockComponent comps = new ClockComponent(7, 40);

        panel.add(comps);
        frame.add(panel);
        // Good practice.
        frame.pack();

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
} 
```

# r - directlabels geom_dl() 中的标签大小

> ID：13242436
> 
> 赞同：11
> 
> 时间：2012-11-06T00:04:58.297
> 
> 标签：r, plot, ggplot2, font-size, direct-labels

我真的很喜欢`directlabels`动态定位情节标签的软件包。虽然仍然不完美，但它有助于合理地防止散点图标签之间的重叠，例如 - 特别是对于图表的草稿版本，而不是最终版本。

但是我无论如何都找不到在使用`geom_dl()`功能时更改标签大小。到底有没有？

我试图将`size`and`cex`作为正常或`aes()`参数传递给函数。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-06T02:03:24.933

放在`cex`一个列表中。其他格式化功能也应该放在列表中。请参阅中的一些示例`?directlabels::geom_dl`

```
library(ggplot2)
library(directlabels)

dat = data.frame(x = 1:10, y = 1:10, z = letters[1:10])

ggplot(dat, aes(x, y)) +
    geom_point() +
    geom_dl(aes(label = z), method = list(cex = 2, rot = -45, hjust = -.5)) 
```

![在此处输入图像描述](../Images/9bf4a420e33231a08bfee7e644349f27.png)

**编辑**

该方法也被放置在列表中：

```
ggplot(dat, aes(x, y)) +
    geom_point() +
    geom_dl(aes(label = z), method = list("smart.grid", cex = 2)) 
```

# list - 使用模板时未解析的外部符号

> ID：13242438
> 
> 赞同：1
> 
> 时间：2012-11-06T00:05:19.740
> 
> 标签：list, templates, external

我的项目是用 C++ 编写一个程序，该程序创建一个用户定义的、列表实现的堆栈和队列，用于检查逐字母回文和逐字回文。所以我需要有一个堆栈和队列来检查字符和字符串类型。由于它是一个中级编程项目（我的 C++ 序列中的第三门课程），我们不能使用 STL 列表/队列/堆栈对象，而且我们还没有学习模板。但我认为必须为字符串或字符输入编写不同的实现并想要使用模板是很烦人的。

当所有代码都在一个文件下时，我让程序运行得很好——类及其实现都在我的 main.cpp 中。但我将代码拆分，将类定义放在 list.h 中，将实现放在 list.cpp 中，并将驱动程序代码保留在 main.cpp 中。

现在，当我运行时，出现以下错误：

```
Error   1   error LNK2019: unresolved external symbol "public: void __thiscall  Stack<int>::push_front(int)" (?push_front@?$Stack@H@@QAEXH@Z) referenced in function _main  
Error   3   error LNK2019: unresolved external symbol "public: void __thiscall Queue<char>::push_back(char)" (?push_back@?$Queue@D@@QAEXD@Z) referenced in function _main   d:\my documents\visual studio 2012\Projects\DACUNTO_HW5P2_TEMP\DACUNTO_HW5P2_TEMP\main.obj  DACUNTO_HW5P2_TEMP
Error   2   error LNK2019: unresolved external symbol "public: int __thiscall Stack<int>::pop_front(void)" (?pop_front@?$Stack@H@@QAEHXZ) referenced in function _main  d:\my documents\visual studio 2012\Projects\DACUNTO_HW5P2_TEMP\DACUNTO_HW5P2_TEMP\main.obj  DACUNTO_HW5P2_TEMP
Error   4   error LNK2019: unresolved external symbol "public: char __thiscall Queue<char>::pop_back(void)" (?pop_back@?$Queue@D@@QAEDXZ) referenced in function _main  d:\my documents\visual studio 2012\Projects\DACUNTO_HW5P2_TEMP\DACUNTO_HW5P2_TEMP\main.obj  DACUNTO_HW5P2_TEMP
Error   5   error LNK1120: 4 unresolved externals   d:\my documents\visual studio 2012\Projects\DACUNTO_HW5P2_TEMP\Debug\DACUNTO_HW5P2_TEMP.exe 1   1   DACUNTO_HW5P2_TEMP 
```

我不知道为什么会发生这种情况，但是当程序都在一个文件下时，程序运行良好。这是我的代码：

main.cpp： http: [//pastebin.com/mQW4EV99](http://pastebin.com/mQW4EV99)

list.h：[http://pastebin.com/Lze6jZv2](http://pastebin.com/Lze6jZv2)

list.cpp：[http ://pastebin.com/7bks6Bt1](http://pastebin.com/7bks6Bt1)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:39:13.993

编译器希望模板的定义在使用时可见。

任何一个：

*   将定义移动到类声明（例如，类似于您的构造函数`List`）
*   或`#include`.cpp （并为您的理智更改其扩展名）

当您听说模板会增加编译时间时，这就是主要原因。

# java - 类型 Int 和 String 不兼容

> ID：13242441
> 
> 赞同：1
> 
> 时间：2012-11-06T00:05:32.890
> 
> 标签：java, string, int, incompatibility

嘿，我完成了这个井字游戏项目，我在我的 checkWin 方法中的棋盘类中有一个错误，其中获胜者 = board[0][i]; 作为 Int 和 String 的不兼容错误出现。我已经使用 Integer.toString() 命令在我的另一条板上修复了这个问题，但它不适用于这个。有任何想法吗？这是 checkWin 方法的代码。

```
public boolean checkWin()
{
    {
        int i;  // i = column
        int j; // j = row
        int count; 
        int winner; 

          winner = empty; // nobody has won yet

// Check all rows to see if same player has occupied every square.

        for (j = 0; j < boardSize; j ++)
{
        count = 0;
    if (board[j][0] != Integer.toString(empty))

    for (i = 0; i < boardSize; i ++)
    if (board[j][0] == board[j][i])
    count ++;
    if (count == boardSize)
    winner = (board[j][0]);
}

// Check all columns to see if same player has occupied every square.

    for (i = 0; i < boardSize; i ++)
{
    count = 0;
    if (board[0][i] != Integer.toString(empty))
    for (j = 0; j < boardSize; j ++)
    if (board[0][i] == board[j][i])
    count ++;
    if (count == boardSize)
    winner = board[0][i];
}

// Check diagonal from top-left to bottom-right.

    count = 0;
    if (board[0][0] != Integer.toString(empty))
    for (j = 0; j < boardSize; j ++)
    if (board[0][0] == board[j][j])
    count ++;
if (count == boardSize)
winner = board[0][0];

// Check diagonal from top-right to bottom-left.

count = 0;
if (board[0][boardSize-1] != Integer.toString(empty))
for (j = 0; j < boardSize; j ++)
if (board[0][boardSize-1] == board[j][boardSize-j-1])
count ++;
if (count == boardSize)
winner = board[0][boardSize-1];

// Did we find a winner?

if (winner != empty)
{
if (winner == Xstr)

System.out.println("\nCongratulations! P1 You win!");
else if (winner == Ostr)

System.out.println("\nCongratulations! P2 You win!");
else

return true; 
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T00:09:14.357

```
winner = board[0][i]; 
```

`winner`是 int 原始类型，`board`是多维字符串数组。

您正在尝试为 int 分配一个字符串，因此**为 Int 和 String 不兼容的错误**。

```
String[][] board; 
```

在其索引处有字符串，当您尝试访问时， `board[0][i]`您正在检索一个字符串。

如果您的板数组包含数字的字符串表示形式，例如

```
 boards=  {{"1"},{"2"}}; 
```

然后使用 Integer.parseInt() 它将 String 作为参数并返回一个 Integer。

```
winner = Integer.parseInt(board[0][i]); 
```

但请注意，如果传递给 parseInt 的 String 不是字符串的有效整数表示，它会抛出**NumberFormatException**。

# python - QTableView 上的 PySide 委托，带有文本和刻度

> ID：13242442
> 
> 赞同：2
> 
> 时间：2012-11-06T00:05:46.387
> 
> 标签：python, qt, delegates, pyside, qtableview

我正在`QTableView`使用自定义模型实现一个，我需要一个看起来像这样的单元格： [![](../Images/0d6ee99fe061fe8ecae8d4c7203d35cc.png)](https://i.stack.imgur.com/BQvDL.png)

目前，我使用下面的委托（改编自其他答案）在单个单元格上绘制标志（html 彩色文本），单击整个单元格会更改标志。

```
class HTMLDelegate(QtGui.QStyledItemDelegate):
    def Doc(self, options):
        if options.text == "0":
            return ""
        elif options.text == "1":
            return "<b><font align='right' color='green'>V</font></b>"
        elif options.text == "2":
            return "<font align='right' color='#FF8400'>!!</font>"
        elif options.text == "3":
            return "<b><font align='right' color='#CC0000'>F</font></b>"
        elif options.text == "4":
            return "<b><font align='right' color='#000000'>X</font></b>"

    def paint(self, painter, option, index):
        options = QtGui.QStyleOptionViewItemV4(option)
        self.initStyleOption(options,index)

        style = QtGui.QApplication.style() if options.widget is None else options.widget.style()

        doc = QtGui.QTextDocument()

        background = None
        doc.setHtml(self.Doc(options))

        options.text = ""
        style.drawControl(QtGui.QStyle.CE_ItemViewItem, options, painter);

        ctx = QtGui.QAbstractTextDocumentLayout.PaintContext()

        # Highlighting text if item is selected
        #if (optionV4.state & QStyle::State_Selected)
        #    ctx.palette.setColor(QPalette::Text, optionV4.palette.color(QPalette::Active, QPalette::HighlightedText));

        textRect = style.subElementRect(QtGui.QStyle.SE_ItemViewItemText, options, None)
        painter.save()
        if background:
            painter.fillRect(options.rect, QtCore.Qt.yellow)
        painter.translate(textRect.topLeft())
        painter.setClipRect(textRect.translated(-textRect.topLeft()))

        doc.documentLayout().draw(painter, ctx)

        painter.restore()

    def editorEvent(self, event, model, option, index):
        if not (index.flags() & QtCore.Qt.ItemIsEditable) > 0:
            return False

        # Do not change the checkbox-state
        if event.type() == QtCore.QEvent.MouseButtonRelease or event.type() == QtCore.QEvent.MouseButtonDblClick:
            if event.button() != QtCore.Qt.LeftButton:
                return False
            if event.type() == QtCore.QEvent.MouseButtonDblClick:
                return True
        elif event.type() == QtCore.QEvent.KeyPress:
            if event.key() != QtCore.Qt.Key_Space and event.key() != QtCore.Qt.Key_Select:
                return False
        else:
            return False

        # Change the flag-state
        self.setModelData(None, model, index)
        return False

    def setModelData (self, editor, model, index):
        '''
        The user wanted to change the old flag into the next
        '''
        #newValue = not bool(index.model().data(index, QtCore.Qt.DisplayRole))
        #model.setData(index, newValue, QtCore.Qt.EditRole)
        oldFlagIndex = model.index(index.row(), COD_COL_FLAGS)
        oldFlag = model.data(oldFlagIndex)

        if type(oldFlag) == long:
            newFlag = oldFlag + 1
            if newFlag > 4:
                newFlag = 0
        else:
            newFlag = 0
        model.setData(index, newFlag, QtCore.Qt.EditRole) 
```

我怎样才能做到这一点？
我想到的选项是：

*   绘制文本（丰富或简单）以及右侧像素图的委托

*   绘制两个文本字符串（一个普通文本和一个富文本，或两个富文本）的委托，一个左对齐，一个右对齐

作为练习，但对于应用程序不是必需的，最好仅在单击而不是整个单元格时触发标志更改。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T18:27:18.080

绘制事件有一个名为 option 的参数，它应该包含一个 rect 对象。该 rect 对象是所绘制内容的边界。您应该能够更改该矩形的宽度并为您希望绘制第二部分的位置创建一个新矩形。

```
rect = options.rect
options.rect = QtCore.QRect(rect.x(), rect.y(), rect.width()/2, rect.height())
style.drawControl(QtGui.QStyle.CE_ItemViewItem, options, painter);
options.rect = QtCore.QRect(rect.x()+rect.width()/2, rect.y(), rect.width()/2, rect.height())
options.text = "right side"
style.drawControl(QtGui.QStyle.CE_ItemViewItem, options, painter); 
```

# php - 将 PDF 存储在 MySQL 数据库中

> ID：13242444
> 
> 赞同：1
> 
> 时间：2012-11-06T00:05:54.810
> 
> 标签：php, pdf, symfony, twig

我正在开发一个应用程序，我需要以 PDF 格式创建发票。我正在使用[pdfbundle](https://github.com/psliwa/PdfBundle)并且正确创建了 PDF 文件：

```
public function helloAction()
{
    $format = $this->get('request')->get('_format');
    $name = "work!!!";
    return $this->render(sprintf('miomioBundle:Venta:helloAction.%s.twig', $format), array('name' => $name));
} 
```

但是我怎样才能将该文件存储在数据库中呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T00:10:22.350

最好将它们作为文件存储在磁盘上并在数据库中引用它们的位置。所以存储：

> /path/to/store/invoice_434992.pdf

在相关表中，每个表都有一个唯一的文件名，并在需要的地方引用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T00:10:12.903

您是否有任何特殊要求要将这些 pdf 存储在数据库中。通常，将大型二进制内容存储在数据库中是一个坏主意。

让发票在文件中，具有唯一的文件名，并将文件的路径存储在数据库表中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T00:11:21.913

我已经做到了。关于如何做到这一点，有一篇非常好的文章。

[http://www.php-mysql-tutorial.com/wikis/mysql-tutorials/uploading-files-to-mysql-database.aspx](http://www.php-mysql-tutorial.com/wikis/mysql-tutorials/uploading-files-to-mysql-database.aspx)

正如其他人所说，将二进制数据存储在数据库中可能不是一个好主意。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T00:10:13.077

您可以在数据库中创建一个表：

```
____________________________________________
| ID | TIME | QUERY | PDF_NAME | PDF_FILE  |
|----|------|-------|----------|-----------|
... 
```

PDF_FILE 的类型是 BLOB，其余的都是不言自明的。这样，如果您愿意，您可以搜索不久前发生的查询的结果。

# java - 每次下载页面时如何更新 Primefaces 数据表？

> ID：13242449
> 
> 赞同：0
> 
> 时间：2012-11-06T00:06:46.947
> 
> 标签：java, jsf, datatable, primefaces

我刚有`<p:dataTable/>`。当我在另一个页面中向该表添加新行时，该表不会刷新。RmaBean 是 managedBean 范围的会话。有任何想法吗？

```
<h:form id="mainMenuForm">        

            <p:dataTable id="dataTable" 
                         var="case" 
                         value="#{RmaBean.rmaModel}" 
                         widgetVar="rmaTable" 
                         editable="true" 

                         rows="10" paginator="TRUE" emptyMessage="No items found with given criteria."> 
```

...

```
<p:column></p:column>
        <p:column></p:column>
        <p:column><p:commandButton action="#{MainController.talletaUusiRma}" value="#{bundle.newRma_tallenna}" immediate="true"  ajax="false" style="width: 220px;"/></p:column>
    </p:row> 
```

当我向该表添加一个新对象时，我只是`rmaModel`每次都更新，我什至检查列表是否比以前长一个，并且有那个新对象。数据表仍然显示没有新对象的旧数据，为什么？

--------创建新的 RMA-------------

```
public String prepareNewRma() {
    current = new Rma();
    current.setUser("");
    return "newRma";
} 
```

--------使用序列号将数据提取到新的 RMA-----

```
public String haeTiedotSarjanrolla() {
    log.info("sarjanro=" + current.getSarjanro());
    System.out.println("---------------->sarjanro=" + current.getSarjanro());

    Sarjanumerot s = helper.getSerialInfo(current.getSarjanro());

    if (s != null) {
        current.setAn8(s.getAn8());
        current.setDsc1(s.getDsc1());
        current.setDsc2(s.getDsc2());
        current.setSarjanro(s.getId().getLotn());
        current.setTuotenro(s.getId().getLitm());
    }
    return "newRma";
} 
```

--------保存新的 RMA----------------

```
public String talletaUusiRma() {

    current.setCreated(new Timestamp(System.currentTimeMillis()));
    helper.tallennaRma(current);
    rmaNumbers = null;

   RmaBean papu = (RmaBean) JsfUtil.findBean("rmapapu");

   papu.updateTable();
    return "mainMenu";
} 
```

帮手：

```
 public void tallennaRma(Rma current) {
        try {
            Session session = HibernateUtil.getAsekorjausSessionFactory().getCurrentSession();
            session.beginTransaction();
            session.saveOrUpdate(current);
            session.getTransaction().commit();
        } catch (Exception e) {
            log.debug(e.getMessage());
                        JsfUtil.addErrorMessage(ResourceBundle.getBundle("resources/Bundle").getString("editRma_err_updateError"));
        } 
```

---------在 RmaBean 中更新模型和表格-----------

```
public void updateTable(){

    System.out.println("updateTableupdateTableupdateTable");
    rmaModel.setWrappedData(rmaModel.getUpdatedList());
    System.out.println("1111111..........");
    List<Rma> rmat = rmaModel.getUpdatedList();
    System.out.println("22222222.......");
    Iterator iter = rmat.iterator();
    System.out.println("------------------------>PITUUS: " +rmat.size());
    while (iter.hasNext()) {
        Rma t = (Rma) iter.next();
        System.out.println("t.getRma()NUMERO------->" +t.getRma());

    }

    RmaDataModel newRMAModel = new RmaDataModel(rmat); 
    rmaModel = newRMAModel;
} 
```

萨米人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:23:10.177

value-attribute of you dataTable is in session scope, so your datatable will only be rendered on you first request in this session (if you do not update this view manually).

Use view scoped bean for your views. If it's necessary that this list is in session scope, just inject the list from any session scoped bean to your view scoped bean.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:34:17.873

I made a real bubblegum solution because I couldn't fit it otherwise. I just write bean again to session, so it goes over the old one with name "rmapapu". No it is working. Is there any consequences or is this really bad idea?

```
 rmaModel = null;
    RmaDataModel rmaModel = new RmaDataModel(rmat);
    //rmaModel = newRMAModel;
    this.setRmaModel(rmaModel);

    FacesContext context = FacesContext.getCurrentInstance();
    HttpServletRequest request = (HttpServletRequest) context.getExternalContext().getRequest();
    HttpSession httpSession = request.getSession(false);
    httpSession.setAttribute("rmapapu", this); 
```

Thanks for everybody helping me. I still will read BalusC tutorial about that, because it would be nice to know how you should do that :)

Sami

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T15:34:31.197

如果我很好地理解了您的问题，您希望在另一页中完成操作时更新一个页面，这不是通过 ajax 更新自动完成的。必须通过推送来完成。您在 primefaces 展示中有几个例子：

[http://www.primefaces.org/showcase/push/index.jsf](http://www.primefaces.org/showcase/push/index.jsf)

从第一个例子：

```
<h:form id="form">  
    <h:outputText id="out" value="#{globalCounter.count}" styleClass="ui-widget display" />  

    <br />  

    <p:commandButton value="Click" actionListener="#{globalCounter.increment}" />  
</h:form>  

  <p:socket onMessage="handleMessage" channel="/counter" /> 
```

bb

```
 public synchronized void increment() {  
        count++;  

        PushContext pushContext = PushContextFactory.getDefault();  
        pushContext.push("/counter", String.valueOf(count));  
    } 
```

# hadoop - 使用 Java Runtime.exec() 在 Hadoop 上运行命令

> ID：13242450
> 
> 赞同：0
> 
> 时间：2012-11-06T00:06:54.777
> 
> 标签：hadoop, mapreduce, hdfs

有一个名为“cufflinks”的程序运行如下：

```
cufflinks -o <output-dir>  <input-file> 
```

该程序将 1 个文件作为输入，并在“输出目录”中生成 4 个文件作为输出。

我正在尝试在映射器类中使用 Runtime.exec() 在 Hadoop 集群上运行相同的程序。我在设置

> 输出目录=/一些/路径/on/HDFS

我期待这 4 个文件将作为 o/p 在 HDFS 上生成。然而，事实并非如此，HDFS 上的 o/p 目录不包含这 4 个文件中的任何一个。

然后我尝试设置

> 输出目录=/tmp/输出/

它奏效了。

谁能建议为什么它不能在 HDFS 上运行？我需要做什么才能使其在 HDFS 上运行？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T14:59:53.437

问题是袖扣程序应该使用 HDFS API 内部在 HDFS 中创建文件，而不是常规文件操作。

# haskell - 使用 SIGUSR1 重新加载 yesod 网站的内容

> ID：13242451
> 
> 赞同：2
> 
> 时间：2012-11-06T00:07:10.753
> 
> 标签：haskell, reload, githooks, yesod

为了重新加载 yesodweb.com 网站的内容，添加了重新加载路径。任何人都可以通过使用 wget 和 POST 来启动重新加载。这似乎并不安全。

是否可以使用 git hook 来启动重新加载？将新内容推送到服务器会触发博客内容的重新加载等。

我正在考虑安装一个 SIGUSR1 处理程序，而不是听一个特定的路由。这是可行的，还是会有某种竞争条件的风险？如果这是可行的，我应该在哪里添加我的处理程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T04:14:21.720

我个人会坚持使用 POST，并通过要求特定令牌或仅侦听特定 IP 地址来为其添加一些安全性。我没有打扰的原因是因为在此重新加载路线中没有太多的攻击向量：它可以触发的只是用户无法影响的硬编码存储库中的 git pull。

如果您想走信号路线，请查看`unix`包的[`System.Posix.Signals`](http://hackage.haskell.org/packages/archive/unix/2.6.0.0/doc/html/System-Posix-Signals.html)模块。我很`makeApplication`可能会添加代码。

# css - 在 Windows 8 Metro 中，是否可以设置单选按钮的选中状态？

> ID：13242454
> 
> 赞同：1
> 
> 时间：2012-11-06T00:07:25.480
> 
> 标签：css, windows-8, microsoft-metro, radio-button, winjs

我已经成功地设置了 Metro 中单选按钮的标准外观

```
input[type=radio]::-ms-check { 
    border: none; 
    background: transparent url('myImage.png');
} 
```

和活动状态

```
input[type=radio]::-ms-check:active { 
    border: none; 
    background: transparent url('myActiveImage.png');
} 
```

但是我一辈子都无法弄清楚如何设置选中状态的样式。明显的选择不起作用：

```
input[type=radio]::-ms-check:checked {}
input[type=radio]:checked {} 
```

这在 Metro 中是否可行？

更新：

```
input[type=radio]:checked::-ms-check {
    background: red;
} 
```

... 用于更改背景颜色，但不会删除单选圆点。如果我想在背景中使用自己的图像，这就是我需要做的。点可以去掉吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T00:22:57.610

问题是您没有使用正确数量的冒号`::-ms-check`。它是一个伪元素，所以它有两个冒号。（与伪选择器相反，伪选择器有一个。）

你也有向后的顺序。您需要指定要使用单选按钮的`::-ms-check`伪元素，而不是获取伪元素然后尝试设置其版本的样式。`:checked``::-ms-check``:checked`

因此，以下应该有效：

```
input[type=radio]::-ms-check {
    background: orange;
}

input[type=radio]:checked::-ms-check {
    background: blue;
    color: red; // to remove it, `color: transparent`
} 
```

现场演示（在 IE10 中查看）：[http ://codepen.io/anon/pen/zAwyp](http://codepen.io/anon/pen/zAwyp)

# regex - 如何使用 .htaccess 使用请求的第一个字母重写缓存子目录？

> ID：13242456
> 
> 赞同：1
> 
> 时间：2012-11-06T00:07:37.927
> 
> 标签：regex, .htaccess, mod-rewrite

我有一个缓存程序，可以创建动态生成的 php 文件的静态 html 文件。我目前使用 php 检查缓存版本是否存在，如果存在，我会提供它并退出 php。正如这个问题（http://stackoverflow.com/questions/5612735/using-mod-rewrite-to-view-cached-version-from-usual-url），我觉得这是浪费时间。但是，我有大约 5,000 个页面，因此，我不希望将它们全部放在同一个 /cache/ 目录中。相反，我想放置

```
/a-web-url/ in /cache/a/a-web-url.html.gz 
```

和

```
/this-is-another-url/ in /cache/t/this-is-another-url.html.gz 
```

我目前正在与

```
RewriteRule ^([A-Za-z0-9-_/\.]+)/$ /cache/$1 
```

但是，这假设所有内容都在同一个目录中。我希望将它们分成子目录。谢谢。

另请注意，我的所有文件都以 .html.gz 结尾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T00:21:25.837

使用规则

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/?cache/ [NC]
RewriteRule ^/?(.)(.*?)/?$ /cache/${lc:$1}/${lc:$1}${lc:$2}.html.gz [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T00:11:57.380

像这样的东西应该工作：

```
RewriteRule ^([a-z])([A-Za-z0-9-_/\.]+)/$ /cache/$1/$1$2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T00:14:10.457

您正在与当前模式匹配多个大写、小写、破折号和下划线。您可以修改它以使用相同的字符类仅匹配第一个字符，然后使用修饰符匹配其余字符，并使用第一个字符和其余字符的反向引用`+`重写。使用将阻止它匹配以 . 开头的 URL 。`$1``$2``(!?cache/)``/cache/`

```
RewriteRule ^(!?cache/)([A-Za-z0-9-_/\.])([A-Za-z0-9-_/\.]+)/$ /cache/$1/$1$2 [L] 
```

你可以在这里测试这个规则：http: [//htaccess.madewithlove.be/](http://htaccess.madewithlove.be/)

如果你想让第一个字符小写，你可以添加`RewriteMap tolower int:tolower`到你的`<VirtualHost>`配置中，然后`${tolower:$1}`用于第一个字符。

# c - OpenCL 在 Windows 上的 code::blocks 中包含 cl.h

> ID：13242460
> 
> 赞同：1
> 
> 时间：2012-11-06T00:08:01.917
> 
> 标签：c, include, opencl

这里的配置问题，希望将来对其他人有所帮助。

我创建了一个文件夹“C:\openCLcode\include\”，其中包含来自 Khronos 站点的所有必要文件：[http ://www.khronos.org/registry/cl/](http://www.khronos.org/registry/cl/)

现在我想创建一个运行 openCL 的 Code::Blocks 项目。所以我粘贴了一些示例代码并更改了包含路径：

在我的 .c 文件中：

```
#include <C:\openCLcode\include\cl.h> 
```

`cl.h`在它抱怨的那个文件中，`cl_platform.h`我也修复了那个路径：

```
#include <C:\openCLcode\include\cl_platform.h> 
```

现在我得到的问题是：`undefined reference to 'clGetPlatformIDs@12'`这是有问题的函数和行：

```
cl_device_id create_device() {

   cl_platform_id platform;
   cl_device_id dev;
   int err;

   /* Identify a platform */
    //////////////THIS IS THE LINE WITH ERROR:////////////
   err = clGetPlatformIDs(1, &platform, NULL);
    //////////////////////////////////////////////////////
   if(err < 0) {
      perror("Couldn't identify a platform");
      exit(1);
   }

   /* Access a device */
   err = clGetDeviceIDs(platform, CL_DEVICE_TYPE_GPU, 1, &dev, NULL);
   if(err == CL_DEVICE_NOT_FOUND) {
      err = clGetDeviceIDs(platform, CL_DEVICE_TYPE_CPU, 1, &dev, NULL);
   }
   if(err < 0) {
      perror("Couldn't access any devices");
      exit(1);
   }

   return dev;
} 
```

我觉得我真的搞砸了我的包含方案......有人可以推荐一个更好的方法来解决这个问题吗？

非常感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T01:09:20.063

您需要将 libOpenCL.a 库链接到您的项目。

1）右键单击您的项目（在代码块中）

2）选择“构建选项”

3）选择选项卡“链接器设置”

4) 按“添加”按钮

5) 选择带有 openCL 库的路径并选择 libOpenCL.a。

或者你可以用你的项目编译 OpenCL :) 只需在你的项目中添加所有 openCL .cpp 文件并尝试构建它。

# java - 保证交付到动态收件人列表

> ID：13242467
> 
> 赞同：1
> 
> 时间：2012-11-06T00:08:28.603
> 
> 标签：java, web-services, wso2, synapse, ws-reliablemessaging

我有一个即将推出的项目，通过网络服务向动态收件人列表提供有保证的通知消息传递。我们目前正在将 Synapse 用于其他一些转换、路由和代理要求，如果它们非常适合该任务，我很想继续使用 Synapse 或 WSO2。

Synapse/WSO2 提供 WS-ReliableMessaging 以保证交付给单个收件人，并提供 RecipientList 中介。但是，如何将两者结合起来并不明显。

我需要在每个收件人的基础上保证交付。

WSO2 提供这个吗？

一种选择可能是使用消息存储/消息处理器模式。可以将消息的克隆转储到消息存储中，每个收件人一个，以及预期收件人的嵌入式 url（可能带有自定义中介）。消息处理器可以将每个消息克隆发送给它们的预期接收者。但是一个重要的问题：消息处理器是否在第一次发送失败时停止并继续单独重试，阻止队列中的所有消息？我的猜测是它会阻止第一条失败的消息，直到它成功。

# string - 如何使用 sed/grep 提取两个单词之间的文本？

> ID：13242469
> 
> 赞同：176
> 
> 时间：2012-11-06T00:08:45.847
> 
> 标签：string, bash, sed, grep

我正在尝试输出一个字符串，其中包含字符串的两个单词之间的所有内容：

输入：

```
"Here is a String" 
```

输出：

```
"is a" 
```

使用：

```
sed -n '/Here/,/String/p' 
```

包括端点，但我不想包括它们。

* * *

## 回答 #1

> 赞同：211
> 
> 时间：2012-11-06T06:58:37.127

GNU grep 还可以支持正负前瞻和回溯：对于您的情况，命令将是：

```
echo "Here is a string" | grep -o -P '(?<=Here).*(?=string)' 
```

`Here`如果and出现多次`string`，您可以选择是从第一个`Here`到最后一个`string`匹配还是单独匹配。就正则表达式而言，它被称为[贪婪匹配（第一种情况）](https://regex101.com/r/IGG4l8/1/)或非[贪婪匹配（第二种情况）](https://regex101.com/r/IGG4l8/2/)

```
$ echo 'Here is a string, and Here is another string.' | grep -oP '(?<=Here).*(?=string)' # Greedy match
 is a string, and Here is another 
$ echo 'Here is a string, and Here is another string.' | grep -oP '(?<=Here).*?(?=string)' # Non-greedy match (Notice the '?' after '*' in .*)
 is a 
 is another 
```

* * *

## 回答 #2

> 赞同：140
> 
> 时间：2012-11-06T00:14:09.013

```
sed -e 's/Here\(.*\)String/\1/' 
```

* * *

## 回答 #3

> 赞同：84
> 
> 时间：2017-05-05T03:23:40.253

接受的答案不会删除可能在之前`Here`或之后的文本`String`。这会：

```
sed -e 's/.*Here\(.*\)String.*/\1/' 
```

主要区别在于`.*`紧接 before`Here`和 after的添加`String`。

* * *

## 回答 #4

> 赞同：46
> 
> 时间：2012-11-06T00:19:51.023

您可以单独在[Bash](http://mywiki.wooledge.org/BashFAQ/073)中剥离字符串：

```
$ foo="Here is a String"
$ foo=${foo##*Here }
$ echo "$foo"
is a String
$ foo=${foo%% String*}
$ echo "$foo"
is a
$ 
```

如果你有一个包含[PCRE](http://en.wikipedia.org/wiki/Perl_Compatible_Regular_Expressions)的 GNU grep ，你可以使用零宽度断言：

```
$ echo "Here is a String" | grep -Po '(?<=(Here )).*(?= String)'
is a 
```

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2013-06-08T13:11:26.737

如果您有一个包含许多多行出现的长文件，则首先打印数字行很有用：

```
cat -n file | sed -n '/Here/,/String/p' 
```

* * *

## 回答 #6

> 赞同：26
> 
> 时间：2014-08-19T15:07:42.587

通过 GNU awk，

```
$ echo "Here is a string" | awk -v FS="(Here|string)" '{print $2}'
 is a 
```

带有`-P`（*perl-regexp*）参数的 grep 支持`\K`，这有助于丢弃以前匹配的字符。在我们的例子中，先前匹配的字符串被`Here`从最终输出中丢弃。

```
$ echo "Here is a string" | grep -oP 'Here\K.*(?=string)'
 is a 
$ echo "Here is a string" | grep -oP 'Here\K(?:(?!string).)*'
 is a 
```

如果您希望输出是，`is a`那么您可以尝试以下操作，

```
$ echo "Here is a string" | grep -oP 'Here\s*\K.*(?=\s+string)'
is a
$ echo "Here is a string" | grep -oP 'Here\s*\K(?:(?!\s+string).)*'
is a 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2012-11-06T00:42:57.703

这可能对您有用（GNU sed）：

```
sed '/Here/!d;s//&\n/;s/.*\n//;:a;/String/bb;$!{n;ba};:b;s//\n&/;P;D' file 
```

`Here`这会在换行符上的两个标记（在本例中为和）之间呈现文本的每个表示，`String`并在文本中保留换行符。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2018-10-11T04:17:59.327

要理解`sed`命令，我们必须一步一步地构建它。

这是你的原文

```
user@linux:~$ echo "Here is a String"
Here is a String
user@linux:~$ 
```

让我们尝试使用ubstition 选项删除`Here`字符串`s``sed`

```
user@linux:~$ echo "Here is a String" | sed 's/Here //'
is a String
user@linux:~$ 
```

`String`在这一点上，我相信您也可以删除

```
user@linux:~$ echo "Here is a String" | sed 's/String//'
Here is a
user@linux:~$ 
```

但这不是您想要的输出。

要组合两个 sed 命令，请使用`-e`选项

```
user@linux:~$ echo "Here is a String" | sed -e 's/Here //' -e 's/String//'
is a
user@linux:~$ 
```

希望这可以帮助

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2020-02-05T09:56:57.207

您可以使用两个 s 命令

```
$ echo "Here is a String" | sed 's/.*Here//; s/String.*//'
 is a 
```

也有效

```
$ echo "Here is a StringHere is a String" | sed 's/.*Here//; s/String.*//'
 is a

$ echo "Here is a StringHere is a StringHere is a StringHere is a String" | sed 's/.*Here//; s/String.*//'
 is a 
```

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2015-06-17T04:45:57.377

上述所有解决方案都存在缺陷，即最后一个搜索字符串在字符串的其他地方重复。我发现最好写一个 bash 函数。

```
 function str_str {
      local str
      str="${1#*${2}}"
      str="${str%%$3*}"
      echo -n "$str"
    }

    # test it ...
    mystr="this is a string"
    str_str "$mystr" "this " " string" 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2012-11-06T00:19:40.613

您可以使用`\1`（参考[http://www.grymoire.com/Unix/Sed.html#uh-4](http://www.grymoire.com/Unix/Sed.html#uh-4)）：

```
echo "Hello is a String" | sed 's/Hello\(.*\)String/\1/g' 
```

括号内的内容将存储为`\1`.

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-12-01T22:51:27.987

**问题。** 我存储的爪子邮件消息包装如下，我正在尝试提取主题行：

```
Subject: [SLC38A9 lysosomal arginine sensor; mTORC1 pathway] Key molecular
 link in major cell growth pathway: Findings point to new potential
 therapeutic target in pancreatic cancer [mTORC1 Activator SLC38A9 Is
 Required to Efflux Essential Amino Acids from Lysosomes and Use Protein as
 a Nutrient] [Re: Nutrient sensor in key growth-regulating metabolic pathway
 identified [Lysosomal amino acid transporter SLC38A9 signals arginine
 sufficiency to mTORC1]]
Message-ID: <20171019190902.18741771@VictoriasJourney.com> 
```

Per A2 in this thread, [How to use sed/grep to extract text between two words？](https://stackoverflow.com/questions/13242469/how-to-use-sed-grep-to-extract-text-between-two-words)只要匹配的文本不包含换行符，下面的第一个表达式“有效”：

```
grep -o -P '(?<=Subject: ).*(?=molecular)' corpus/01

[SLC38A9 lysosomal arginine sensor; mTORC1 pathway] Key 
```

但是，尽管尝试了许多变体 ( `.+?; /s; ...`)，但我无法使这些变体起作用：

```
grep -o -P '(?<=Subject: ).*(?=link)' corpus/01
grep -o -P '(?<=Subject: ).*(?=therapeutic)' corpus/01
etc. 
```

**解决方案 1。**

[在不同行的两个字符串之间提取](https://stackoverflow.com/questions/38015153/extract-text-between-two-strings-on-different-lines)文本

```
sed -n '/Subject: /{:a;N;/Message-ID:/!ba; s/\n/ /g; s/\s\s*/ /g; s/.*Subject: \|Message-ID:.*//g;p}' corpus/01 
```

这使

```
[SLC38A9 lysosomal arginine sensor; mTORC1 pathway] Key molecular link in major cell growth pathway: Findings point to new potential therapeutic target in pancreatic cancer [mTORC1 Activator SLC38A9 Is Required to Efflux Essential Amino Acids from Lysosomes and Use Protein as a Nutrient] [Re: Nutrient sensor in key growth-regulating metabolic pathway identified [Lysosomal amino acid transporter SLC38A9 signals arginine sufficiency to mTORC1]] 
```

**解决方案 2.***

Per[如何使用 sed 替换换行符 (\n)？](https://stackoverflow.com/questions/1251999/how-can-i-replace-a-newline-n-using-sed?rq=1)

```
sed ':a;N;$!ba;s/\n/ /g' corpus/01 
```

将用空格替换换行符。

在[如何使用 sed/grep 提取两个单词之间的文本？](https://stackoverflow.com/questions/13242469/how-to-use-sed-grep-to-extract-text-between-two-words)，我们得到：

```
sed ':a;N;$!ba;s/\n/ /g' corpus/01 | grep -o -P '(?<=Subject: ).*(?=Message-ID:)' 
```

这使

```
[SLC38A9 lysosomal arginine sensor; mTORC1 pathway] Key molecular  link in major cell growth pathway: Findings point to new potential  therapeutic target in pancreatic cancer [mTORC1 Activator SLC38A9 Is  Required to Efflux Essential Amino Acids from Lysosomes and Use Protein as  a Nutrient] [Re: Nutrient sensor in key growth-regulating metabolic pathway  identified [Lysosomal amino acid transporter SLC38A9 signals arginine  sufficiency to mTORC1]] 
```

此变体删除了双空格：

```
sed ':a;N;$!ba;s/\n/ /g; s/\s\s*/ /g' corpus/01 | grep -o -P '(?<=Subject: ).*(?=Message-ID:)' 
```

给予

```
[SLC38A9 lysosomal arginine sensor; mTORC1 pathway] Key molecular link in major cell growth pathway: Findings point to new potential therapeutic target in pancreatic cancer [mTORC1 Activator SLC38A9 Is Required to Efflux Essential Amino Acids from Lysosomes and Use Protein as a Nutrient] [Re: Nutrient sensor in key growth-regulating metabolic pathway identified [Lysosomal amino acid transporter SLC38A9 signals arginine sufficiency to mTORC1]] 
```

# opengl - openGL 着色器共享变量

> ID：13242472
> 
> 赞同：1
> 
> 时间：2012-11-06T00:08:52.977
> 
> 标签：opengl, shader, shared, vertex-shader

我的问题与使用相同数据的多个着色器文件有关。

我知道你可以在 directX 但你可以在 openGL 中吗？

例子

vertexShader1 可能需要知道我的 cameraViewProjection vertexShader2 可能也需要

soooo有没有办法我可以

“#include”共享变量文件？

就像如果我想制作另一个名为“ShaderedVariables”的文件，我可以将我的世界信息放在那里，比如 cameraView 或 ViewProjection

我一直在到处寻找，但我仍然不知道这是否可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T02:37:51.210

OpenGL 不知道如何使用文件系统。它不知道有*一个*文件系统。所以它无法读取文件。

您可以尝试 ARB_shading_language_include （这也不会读取文件；它使您可以在内存中构建文件系统）。但现在，似乎只有 NVIDIA 支持它，所以它并不是最便携的解决方案。

通常，如果定义很小且很少，您只需将相同的内容放入每个着色器文件中：

```
// Shader1:
uniform mat4 cameraMatrix;
void main() {...}

// Shader2:
uniform mat4 cameraMatrix;
void main() {...} 
```

如果您的定义更实质性，您可以随时构建自己的包含系统。请注意，它`glShaderSource`需要*多个*字符串，而不仅仅是一个。所以你可以简单地在你的主要着色器字符串前面加上常用的定义，然后让每个实际的着色器选择他们实际使用的那些。

# scala - 播放框架-如何在此代码中为经过身份验证的用户调用此函数 play2 scala zentasks

> ID：13242481
> 
> 赞同：1
> 
> 时间：2012-11-06T00:09:52.100
> 
> 标签：scala, forms-authentication, action, playframework-2.0

在 play2 scala zentasks 示例应用程序中，代码片段如下所示

```
def IsAuthenticated(f: => String => Request[AnyContent] => Result) = 
    Security.Authenticated(username, onUnauthorized) { user =>
    Action(request => f(user)(request))
  } 
```

我需要做的是在模型中调用这个函数

```
def AddOnline(email: String, contact: Contact) = {
DB.withConnection { implicit connection =>
  SQL(
    """
      update contact
      set online_status = {'online'} //I want to write the value contact.status=online
      where email = {email}
    """
  ).on(
    'email -> contact.email,
    'online_status -> contact.online_status
  ).executeUpdate()
} 
```

}

`AddOnline`但我在这里的挑战是每次通过上述代码对某个用户进行身份验证时调用此函数。有人可以建议我该怎么做吗？我是这方面的新手，我兜兜转转，没有任何进展

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T07:01:25.753

您可以像这样调用该`addOnline`方法`IsAuthenticated`：

```
 def IsAuthenticated(f: => String => Request[AnyContent] => Result) = 
   Security.Authenticated(username, onUnauthorized) { user =>
   // Do what you need to do here before the action is called
   Contact.addOnline(user)
   Action(request => f(user)(request))
 } 
```

请注意，这`user`不是用户对象，而只是经过身份验证的用户的电子邮件。

此外，由于您只添加了在线状态，`user`因此您可以将 AddOnline 方法简化为类似的方法。

```
def addOnline(email: String) = {
  DB.withConnection { implicit connection =>
    SQL(
      """
        update contact
        set online_status = 'online'
        where email = {email}
      """
    ).on(
      'email -> email,
  ).executeUpdate()
} 
```

# ruby-on-rails - 为什么虚荣不在 app/models 中创建 vanity_experiments.rb 和类似内容

> ID：13242494
> 
> 赞同：0
> 
> 时间：2012-11-06T00:10:35.810
> 
> 标签：ruby-on-rails, vanity

我已经创建并运行了我的虚荣迁移，我可以看到生成的表`schema.rb`和`rails console`：

```
ActiveRecord::Base.connection.tables
 => ["schema_migrations", "pages", "users", "areas", "roles", "assignments", "categories", "heuristics", "references", "footnotes", "products", "orders", "vanity_metrics", "vanity_metric_values", "vanity_experiments", "vanity_conversions", "vanity_participants"] 
```

那么为什么它没有创建`vanity_experiments.rb`和类似的文件`app/models`呢？

我知道虚荣会使用 Redis 而不是我的 PostgreSQL 来存储数据，但是 Rails 仍然将每个表映射到一个模型，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T01:03:07.697

Vanity 支持多个适配器，包括 ActiveRecord。我的猜测是，如果您使用 ActiveRecord 适配器，生成器会创建这些迁移。

有关详细信息，请参阅[http://vanity.labnotes.org/configuring.html](http://vanity.labnotes.org/configuring.html)。

# php - 在 Kohana 之外的 File 中使用 Kohana

> ID：13242499
> 
> 赞同：1
> 
> 时间：2012-11-06T00:11:28.883
> 
> 标签：php, kohana

情况如下：

我在我的域电子邮件（所以 *@domain.com）上有一个包罗万象的重定向到位于 /home/domain/scripts/piper.php 的管道脚本。这个 piper 脚本不在 Kohana ORM 中，但我所有的其他文件都在。我想尝试在这个 piper.php 文件中使用 Kohana。

我已经尝试（不成功）以下所有方法：

**包括小花**

我不知道需要包含什么，更重要的是如何覆盖 Kohana 用来确定正确控制器的 url 变量。此外，这是一个包罗万象的 piper，因此它不使用 HTTP（据我所知），而是执行命令。

**管道**

我尝试了以下管道：

```
/home/domain/public_html/index.php --uri="piper" 
```

但是 cPanel 使这成为不可能，因为您只能指定目标脚本，而不能指定正确的标志等（除非我遗漏了什么）。

**PHP 执行（）**

我尝试使用以下行：

```
exec("php /home/domain/public_html/index.php --uri=\"/piper\"") 
```

我希望标准输入数据将在 exec() 命令中得到维护，但我永远无法让它识别 uri 命令，尽管我可以在我的本地主机上运行它并且它工作得很好。

我使用[http://www.coderelic.com/2011/10/creating-cron-jobs-in-kohana-3-x-is-a-piece-of-cake/](http://www.coderelic.com/2011/10/creating-cron-jobs-in-kohana-3-x-is-a-piece-of-cake/)作为参考，但无法获得任何工作。

我对这些解决方案中的任何一种都感到满意，这样我就可以看到收到的电子邮件，对其进行解析，然后根据参数发送电子邮件。

如果您需要更多信息，请与我们联系！我很难过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:04:48.227

`/home/domain/public_html/index.php --uri="piper"`将是一种有效的方法。如果您的主机很糟糕并且不允许您指定它，请将其放入 bash 脚本中并引用它。

如果您使用的是任何最新版本的 kohana（3.2 或 3.3），更好的方法是使用 Minion 运行命令行任务。这就是 Minion 的设计目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T10:28:04.520

您需要做的就是：

1.  将您的脚本修改`piper.php`为有效的 PHP 类；
2.  放在`/application/classes/`文件夹里；

`include`Kohana 将在初始化期间自动加载您的类文件（如）。

然后，您可以`piper`像往常一样使用您的课程`$piper = new Piper; ...`。

**UPD**

您必须通过 Kohana 发送电子邮件。

例如，创建控制器（使用URL`pipe`路由）：`/pipe`

```
public function action_pipe() {

    $pipe = new Pipe; // This creates new Pipe object (your emails serving class)

    $pipe->serve(); // Sserve emails within `serve()` method of Pipe class

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T22:03:36.363

尽管不可否认，我不确定这些其他答案是否正确，因为我无法弄清楚如何重现结果。

最终为我的情况工作的是创建一个`Controller_Piper`在`/home/domain/scripts/piper.php`. 我所做的是从中复制代码`/home/domain/public_html/index.php`并更改以下内容：

```
echo Request::factory("/piper")
->execute()
->send_headers(TRUE)
->body(); 
```

这会加载`piper`控制器并很好地执行所有内容。不确定它是否是最干净的，但它确实有效。

# python - Pythonic 实现数据类型的方法 (Python 2.7)

> ID：13242501
> 
> 赞同：8
> 
> 时间：2012-11-06T00:11:46.993
> 
> 标签：python, oop, types

我的大部分编程经验都是使用 C++。受 Bjarne Stroustrup 的演讲启发[，](http://channel9.msdn.com/Events/GoingNative/GoingNative-2012/Keynote-Bjarne-Stroustrup-Cpp11-Style)我最喜欢的编程技术之一是“类型丰富”的编程；开发新的健壮数据类型，不仅可以通过将功能包装到类型中来减少我必须编写的代码量（例如向量加法，而不是 newVec.x = vec1.x + vec2.x; newVec.y = ... 等等，我们可以只使用 newVec = vec1 + vec2) 但也会在编译时通过强类型系统揭示代码中的问题。

我最近在 Python **2.7**中进行的一个项目需要具有上限和下限的整数值。我的第一直觉是创建一个新的数据类型（类），它的行为与 python 中的普通数字相同，但始终在其（动态）边界值内。

```
class BoundInt:
    def __init__(self, target = 0, low = 0, high = 1):
        self.lowerLimit = low
        self.upperLimit = high
        self._value = target
        self._balance()

    def _balance(self):
        if (self._value > self.upperLimit):
            self._value = self.upperLimit
        elif (self._value < self.lowerLimit):
            self._value = self.lowerLimit
        self._value = int(round(self._value))

    def value(self):
        self._balance()
        return self._value

    def set(self, target):
        self._value = target
        self._balance()

    def __str__(self):
        return str(self._value) 
```

这是一个好的开始，但它需要像这样访问这些 BoundInt 类型的内容

```
x = BoundInt()
y = 4
x.set(y)           #it would be nicer to do something like x = y
print y            #prints "4"
print x            #prints "1"
z = 2 + x.value()  #again, it would be nicer to do z = 2 + x
print z            #prints "3" 
```

我们可以在类中添加大量python的“魔术方法”定义来增加一些功能：

```
def __add__(self, other):
    return self._value + other

def __sub__(self, other):
    return self._value - other

def __mul__(self, other):
    return self._value * other

def __div__(self, other):
    return self._value / other

def __pow__(self, power):
    return self._value**power

def __radd__(self, other):
    return self._value + other

#etc etc 
```

现在代码的大小正在迅速爆炸式增长，并且对正在编写的内容有大量重复，而回报却很少，这似乎一点也不像 Python。

当我开始想从普通的 python 数字（整数？）和其他 BoundInt 对象构造 BoundInt 对象时，事情变得更加复杂

```
x = BoundInt()
y = BoundInt(x)
z = BoundInt(4) 
```

据我所知，这需要在 BoundInt() 构造函数中使用相当大/丑陋的 if/else 类型检查语句，因为 python 不支持（c 样式）重载。

所有这一切都感觉非常像尝试在 python 中编写 c++ 代码，如果认真对待我最喜欢的书之一， *Code Complete 2* ，这是一个大罪。我觉得我在逆流而上，而​​不是让它带我前进。

我非常想学习编写 python 'pythonic-ally' 的代码，解决这类问题域的最佳方法是什么？什么是学习正确 Python 风格的好资源？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T01:05:47.787

标准库、流行的 PyPI 模块和 ActiveState 配方中有很多代码可以做这种事情，所以你最好阅读示例而不是试图从第一原理中弄清楚。`list`另外，请注意，这与创建-like 或-like 类非常相似`dict`，还有更多示例。

但是，对于您想要做的事情有一些答案。我将从最严重的开始，然后向后工作。

> 当我开始想从普通的 python 数字（整数？）和其他 BoundInt 对象构造 BoundInt 对象时，事情变得更加复杂......据我所知，这需要使用相当大/丑陋的 if/else 类型检查BoundInt() 构造函数中的语句，因为 python 不支持（c 风格）重载。

啊，但是想想你在做什么：你是`BoundInt`从任何可以像整数一样的东西构造 a ，包括，比如说，一个实际的`int`或 a `BoundInt`，对吧？那么，为什么不：

```
def __init__(self, target, low, high):
    self.target, self.low, self.high = int(target), int(low), int(high) 
```

我假设您已经添加了一个`__int__`方法`BoundInt`，当然（相当于 C++ `explicit operator int() const`）。

另外，请记住，缺少重载并不像您从 C++ 中想象的那么严重，因为没有用于制作副本的“复制构造函数”；您只需将对象传递出去，所有这些都会在幕后得到处理。

例如，想象一下这个 C++ 代码：

```
BoundInt foo(BoundInt param) { BoundInt local = param; return local; }
BoundInt bar;
BoundInt baz = foo(bar); 
```

这将复制`bar`到`param`，`param`到`local`，`local`到一个未命名的“返回值”变量，然后复制到`baz`。其中一些将被优化，而其他（在 C++11 中）将使用移动而不是复制，但仍然有 4 个复制/移动构造函数/赋值运算符的概念调用。

现在看一下 Python 等价物：

```
def foo(param): local = param; return local
bar = BoundInt();
baz = foo(bar) 
```

在这里，我们只有一个`BoundInt`实例——显式创建的实例——我们所做的只是将新名称绑定到它。即使分配`baz`为超出范围`bar`且`baz`不会复制的新对象的成员。制作副本的唯一方法是`BoundInt(baz)`再次显式调用。（这不是 100% 正确的，因为有人总是可以检查您的对象并尝试从外部克隆它，并且`pickle`,`deepcopy`等实际上可能会这样做......但在这种情况下，他们仍然没有调用“副本”构造函数”，您或编译器编写的。）

现在，如何将所有这些运算符转发到该值？

好吧，一种可能性是动态地进行。详细信息取决于您使用的是 Python 3 还是 2（对于 2，您需要支持多远）。但想法是您只有一个名称列表，并且对于每个名称，您定义一个具有该名称的方法，该方法调用值对象上的同名方法。如果您想要一个草图，请提供额外的信息并询问，但您最好寻找动态方法创建的示例。

那么，这是Pythonic吗？这要看情况。

如果您正在创建数十个“类似整数”的类，那么是的，它肯定比复制粘贴代码或添加“编译时”生成步骤要好，而且它可能比添加其他不必要的基类要好。

而且，如果您尝试跨多个版本的 Python 工作并且不想记住“我应该停止提供哪个版本以再次`__cmp__`像以前一样工作`int`？” 输入问题，我可能会走得更远，并从`int`自身中获取方法列表（`dir(int())`取出一些名称并将其列入黑名单）。

但是，如果你只是在做这门课，比如说，只有 Python 2.6-2.7 或 3.3+，我认为这是一个折腾。

一个好读的`fractions.Fraction`类是标准库中的类。它是清晰编写的纯 Python 代码。它部分地演示了动态和显式机制（因为它根据通用动态转发函数明确定义了每个特殊消息），如果您同时拥有 2.x 和 3.x，则可以比较和对比两者。

同时，您的班级似乎未指定。If `x`is a `BoundInt`and `y`is an `int`，`x+y`真的应该返回一个`int`（就像在你的代码中那样）？如果没有，你需要绑定它吗？怎么样`y+x`？应该`x+=y`怎么做？等等。

最后，在 Python 中，通常值得将这样的“值类”设为不可变，即使直观的 C​​++ 等效项是可变的。例如，考虑一下：

```
>>> i = BoundInt(3, 0, 10)
>>> j = i
>>> i.set(5)
>>> j
5 
```

我不认为你会期待这个。这在 C++ 中不会发生（对于典型的值类），因为`j = i`会创建一个新副本，但在 Python 中，它只是将一个新名称绑定到同一个副本。（它相当于`BoundInt &j = i`，而不是`BoundInt j = i`。）

如果你想`BoundInt`不可变，除了消除明显的东西之外`set`，还要确保不要实现`__iadd__`和朋友。如果你遗漏`__iadd__`,`i += 2`将变成`i = i.__add__(2)`: 换句话说，它将创建一个新实例，然后重新绑定`i`到该新实例，而留下旧实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T01:10:07.680

对此可能有很多意见。但是对于特殊方法的泛滥，您只需要这样做即可使其完整。但至少你只在一个地方做一次。内置的数字类型也可以子类化。这就是我为类似的实现所做的，您[可以查看它](http://code.google.com/p/pycopia/source/browse/trunk/aid/pycopia/aid.py#180)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T02:54:07.590

你的`set`方法令人憎恶。您不要**创建**一个默认值为 0 的数字，然后将该数字更改为其他数字。这是非常尝试在 Python 中编写 C++，如果你真的想以与处理数字相同的方式处理这些，将会给你带来无穷无尽的头痛，因为每次将它们传递给函数时，它们都是通过*引用*传递的（就像Python）。因此，您最终会在您认为可以将其视为数字的事物中遇到大量的别名，并且您几乎肯定会遇到错误，因为您没有意识到是别名的数字的值发生了变异，或者期望能够检索通过为另一个提供相同的值，将值存储在以 a`BoundInt`作为键的字典中。`BoundInt`

对我来说，`high`它们`low`不是与特定值关联的数据值`BoundInt`，它们是*类型参数*。我想要`7`type`BoundInt(1, 10)`中的数字`7`，而不是限制在 1 到 10 之间的数字，所有这些都是 type 中的值`BoundInt`。

如果我真的想做这样的事情，我会采取的方法是将子类`int`化为`BoundInt`类工厂；你给它一个范围，它给你限制在那个范围内的整数类型。您可以将该类型应用于任何“类似int”的对象，它会给您一个限制在该范围内的值。就像是：

```
_bound_int_cache = {}
def BoundInt(low, low):
    try:
        return _bound_int_cache[(low, high)]
    except KeyError:
        class Tmp(int):
            low = low
            high = high
            def __new__(cls, value):
                value = max(value, cls.low)
                value = min(value, cls.max)
                return int.__new__(cls, value)

        Tmp.__name__ = 'BoundInt({}, {})'.format(low, high)
        _bound_int_cache[(low, high)] = Tmp
        return _bound_int_cache[(low, high)] 
```

（缓存只是为了确保获得`BoundInt`相同低/高值的类型的两次不同尝试为您提供完全相同的类，而不是行为相同的两个不同类。在大多数情况下可能并不重要，但看起来更好。）

你会这样使用：

```
B = BoundInt(1, 10)
x = B(7) 
```

“类工厂”方法意味着，如果您有少量有意义的范围要在其中绑定整数，则可以全局为这些范围创建类（使用有意义的名称），然后像常规类一样使用它们。

子类`int`化使这些对象不可变（这就是为什么必须`__new__`在好理由）。它还免费为您提供**所有**整数方法，因此这些`BoundInt`类型的行为与*完全*一样`int`，除了当您创建一个值时，该值被类型限制。不幸的是，这意味着对这些类型的所有操作都返回`int`对象，而不是`BoundInt`对象。

如果您可以想出一种方法来协调 eg 中涉及的两个不同值的低/高值`x + y`，那么您可以覆盖特殊方法以使它们返回`BoundInt`值。想到的方法是：

1.  `x + y`取左操作数的边界并忽略右操作数（看起来混乱且不对称；违反=的假设`y + x`）
2.  取最大值`low`和最小值`high`。它非常对称，您可以将没有的数值`low`和`high`值视为`sys.minint`和`sys.maxint`（即只使用另一个值的边界）。如果范围根本不重叠，则没有多大意义，因为您最终会得到一个空范围，但是对这些数字一起操作可能无论如何都没有多大意义。
3.  取最小值`low`和最大值`high`。也是对称的，但在这里你可能想明确地忽略正常数字，而不是假装它们是`BoundInt`可以在整个整数范围内变化的值。

以上任何一个都可以工作，并且上述任何一个都可能在某些时候让你感到惊讶（例如，否定一个被限制在正范围内的数字总是会给你这个范围内最小的正数，这对我来说似乎很奇怪）。

如果您采用这种方法，您可能*不想*继承`int`. 因为如果您有`normalInt + boundedInt`, then`normalInt`将在不尊重您的代码的情况下处理添加。相反，您希望它不被识别`boundedInt`为一个`int`值，因此这`int`“`__add__`不会”起作用，并且会给您的班级一个尝试的机会`__radd__`。但是我**仍然**会将您的类视为“不可变的”，并使每个产生新数字的操作都构造一个新对象；实际上可以保证在某个地方改变数字会导致错误。

所以我会处理这样的方法：

```
class BoundIntBase(object):
    # Don't use this class directly; use a subclass that specifies low and high as
    # class attributes.
    def __init__(self, value):
        self.value = min(self.high, max(self.low, int(value)))

    def __int__(self):
        return self.value

# add binary operations to BoundInt
for method in ['__add__', '__radd__', ...]:
    def tmp(self, other):
        try:
            low = min(self.low, other.low)
            high = max(self.high, other.high)
        except AttributError:
            cls = type(self)
        else:
            cls = BountInd(low, high)
        v = getattr(int(self), method)(int(other))
        return cls(v)
    tmp.__name__ = method
    setattr(BountIntBase, method, tmp)

_bound_int_cache = {}
def BoundInt(low, low):
    try:
        return _bound_int_cache[(low, high)]
    except KeyError:
        class Tmp(int):
            low = low
            high = high
            def __new__(cls, value):
                value = max(value, cls.low)
                value = min(value, cls.max)
                return int.__new__(cls, value)

        Tmp.__name__ = 'BoundInt({}, {})'.format(low, high)
        _bound_int_cache[(low, high)] = Tmp
        return _bound_int_cache[(low, high)] 
```

似乎仍然比应有的代码多，但是您尝试做的实际上比您想象的要复杂。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T10:54:36.900

由于 Python 中丰富的语法支持，在所有情况下行为与数字完全一样的类型需要许多特殊方法（似乎没有其他类型需要这么多方法，例如，在 Python 中定义行为类似于列表、dict 的类型要简单得多：[几个方法，你有一个 Sequence](https://stackoverflow.com/a/13052108/4279)）。有几种方法可以减少代码的重复性。

[ABC 类，例如 `numbers.Integral`](http://docs.python.org/2/library/numbers.html) 为某些方法提供默认实现，例如，如果`__add__`, `__radd__`在子类中实现，则`__sub__`,`__rsub__` 自动可用。

[`fractions.Fraction`](http://docs.python.org/2/library/fractions.html) 用于 [`_operator_fallbacks`](http://hg.python.org/cpython/file/2.7/Lib/fractions.py#l280) 定义`__r*__`和提供后备运算符来处理其他数字类型：

```
__op__, __rop__ = _operator_fallbacks(monomorphic_operator, operator.op) 
```

Python 允许在工厂函数/元类中动态生成/修改一个类，例如， [任何人都可以帮助压缩这个 Python 代码吗？](https://stackoverflow.com/questions/11921320/can-anyone-help-condense-this-python-code). Even `exec`可以在（非常）罕见的情况下使用，例如 [`namedtuple()`](http://hg.python.org/cpython/file/2.7/Lib/collections.py#l287).

数字在 Python 中是不可变的，因此您应该使用`__new__`而不是`__init__`.

`__new__`可以在 `from_sometype(cls, d: sometype) -> your_type`类方法中定义未涵盖的罕见情况。反过来，特殊方法未涵盖的情况可以使用 `as_sometype(self) -> sometype`方法。

在您的情况下，一个更简单的解决方案可能是为您的应用程序域定义一个更高级别的类型。数字抽象可能太低级，例如 [`decimal.Decimal`](http://docs.python.org/2/library/decimal.html)超过 6 KLOC。

# c# - ASP.net 中的 Javascript 画布

> ID：13242504
> 
> 赞同：0
> 
> 时间：2012-11-06T00:12:03.897
> 
> 标签：c#, javascript

我正在尝试在 Visual Studio 应用程序的画布上绘制图像，然后在单击按钮后将该图像显示在 PDF 文件中。我正在使用 javascript 和 C#。到目前为止，我创建了一个名为“A”的网页，并在 .aspx 页面中创建了一个画布和按钮，但我不确定如何在 .aspx.cs 页面中获取此图像（其中显示“<strong> Image Here”），以便它可以写入 PDF 文件。我很确定我的代码目前将我的画布图像置于 base 64 中。非常感谢任何帮助。谢谢！

```
//A.aspx:
//Create canvas and save as base 64
<head>
    <script type="text/javascript">
        $(document).ready(function() {
            $('#saveButton').click(saveDrawing);
        });
    </script>  
</head>
<canvas id ="canvas1" class="pad" width="198" height="55"></canvas>
  <input type="button" name="saveButton" id="saveButton" value="Save Drawing">
  <script type="text/javascript">
      function saveDrawing() {
          var canvas = document.getElementById("canvas1");
          var context = canvas.getContext("2d");
          var imgData = canvas.toDataURL();
          //window.open(imgData);  //Not sure if I need this or not
      } 
```

```
//A.aspx.cs: Code Behind
public void Method(string A)
{
    PdfStamper pdfStamper = new PdfStamper(
        pdfReader, 
        new FileStream(newFile, FileMode.Create)
    );
    AcroFields pdfForm = pdfStamper.AcroFields;
    //This is where I need to get the image from A.aspx
    pdfForm.SetField("Picture is", (**Image Here**)); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T18:23:25.830

我用你需要做的基础知识做了一个[jsFiddle 。](http://jsfiddle.net/sdncP/)由于您使用的是 Asp.Net，因此您的整个页面都在一个表单中。当您单击提交按钮时，它应该将画布中的数据发布到隐藏字段中，您可以从`imageData`页面加载中获取数据。

我不确定您是否必须在尝试将数据保存到 PDF 之前对数据进行任何转换，但这应该会给您一个良好的开端。

# c - 在 fork() 和 exec() 之后创建管道

> ID：13242506
> 
> 赞同：1
> 
> 时间：2012-11-06T00:12:16.963
> 
> 标签：c, exec, fork, pipe

考虑以下：

1.  一个有孩子的父进程
2.  孩子使用 exec 系统调用运行另一个程序
3.  父子通过双向管道进行通信（命名为 MAINPIPE in rest）
4.  孩子是端口上的服务器绑定（例如 5000）

我的程序应该如下工作：

如果孩子从客户端收到某个消息，则创建另一个到他的父母的双向管道并发送/接收一些信息。

问题是：

当我在子级（使用）中创建一个管道`pipe()`并将文件描述符传递给父级（使用 MAINPIPE）时，父级在尝试从管道读取时收到“错误的文件描述符”错误消息。

任何的想法？

编辑：

伙计们，

我的问题不是将在子进程中创建的新管道的文件描述符传递给父级，我已经使用 MAINPIPE 完成了，

但问题是：父进程无法从新管道读取，收到此错误消息“错误文件描述符”，似乎文件描述符在父进程中关闭！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T00:16:15.367

在分叉之前创建管道。然后管道在父级和子级中都可用。无需传递文件描述符。

这是一个使用*unix 域套接字*将文件描述符从子级发送到父级的库的链接：

[http://gitorious.org/libancillary/libancillary](http://gitorious.org/libancillary/libancillary)

这是来源：

[http://gitorious.org/libancillary/libancillary/trees/master](http://gitorious.org/libancillary/libancillary/trees/master)

当然，您必须对其进行调整以适应您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T00:48:32.443

有一种方法可以将文件描述符从子进程发送到父进程：虽然你还没有说你是*如何*尝试这样做的，所以我不能说为什么它对你不起作用。

请注意，由于您需要*一个现有管道*来发送文件描述符，因此您可以在单个管道上多路复用多个*逻辑流。*它可能更容易，更便携。

* * *

编辑：您仍然拒绝*显示*用于将文件描述符从子级发送到父级的代码，但是[这个问题](https://stackoverflow.com/q/11355552/212858)包含一些相关的讨论。你能确认你是否在做类似的事情吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-12T14:11:06.933

一个文件描述符属于一个进程。在您的情况下，子进程。

传输文件描述符的编号（在您的情况下为 10）不会传输文件描述符本身。它只是传递数字10。数字10在子进程中可以表示文件描述符10，但作为一个文件描述符属于一个进程，它在父进程中是没有意义的。子进程仅在创建时从父进程继承文件描述符。

在创建子节点后打开的任何文件描述符都不会在父子节点之间共享。

如果您需要将实际的文件描述符传递给另一个（例如父）进程，unix 域套接字有这样做的机制，这里的其他帖子包含一些相关链接。

# css - WordPress/CSS 菜单未应用悬停效果

> ID：13242510
> 
> 赞同：0
> 
> 时间：2012-11-06T00:12:37.230
> 
> 标签：css, wordpress, menu

我最近将我的 WordPress 菜单转换为使用 WordPress 菜单系统，但现在我的悬停影响停止工作。

工作： [http ://codepen.io/JeremyEnglert/pen/rtFbA](http://codepen.io/JeremyEnglert/pen/rtFbA)

不工作（新）： [http ://codepen.io/JeremyEnglert/pen/aDICH](http://codepen.io/JeremyEnglert/pen/aDICH)

工作示例中的代码在切换到新菜单系统之前。我做了一个替换，用新代码替换旧的导航代码，但似乎有些东西阻止了悬停效果的发生。

有什么想法我哪里出错了吗？

# python - 写入 CSV - 行，而不是列

> ID：13242516
> 
> 赞同：0
> 
> 时间：2012-11-06T00:14:07.873
> 
> 标签：python, csv

我遇到了一个问题，即我的脚本写入多列而不是行。我不确定我做错了什么。

披露 - 我对编程真的很陌生。

编辑 - 想通了。这有效:-)

有什么想法吗？

```
import json
import csv
import subprocess
import urllib
import requests
from unidecode import unidecode

def main():
    list_writer= open_csv()
    info = test_method()
    for list in info:
        write_to_csv(list_writer, list)

def test_method():
    r = requests.get('https://api.github.com/legacy/repos/search/python'+'?start_page=1', auth=('user', 'pass'))
    dict_of_repos = json.loads(r.text)
    list_of_repos = dict_of_repos["repositories"]
    repo_information = []
    for repo in list_of_repos:
        indiv_repo = []
        indiv_repo.append(repo["name"])
        indiv_repo.append(repo["fork"])
        print indiv_repo
        repo_information.append(indiv_repo)
    return repo_information

def open_csv():
    github_csv = open('Githubcsv_1_2.csv', 'wb')
    writer = csv.writer(github_csv)
    return writer   

def write_to_csv(list_writer, info):
    list_writer.writerow(info)
    return

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T00:26:10.680

看起来你的`repo_information`意志看起来像

```
[
  ['name'],
  ['name2'],
  ['name3']
] 
```

所以看起来你只需要[`writerows`](http://docs.python.org/2/library/csv.html#csv.csvwriter.writerows)

```
def write_to_csv(list_writer, info):
    list_writer.writerows(info) 
```

当然，这会将所有数据写入一列（每个名称位于单独的行上）。如果您想将其全部写入同一行，您可以：

```
for repo in list_of_repos:            
        repo_information.append(repo['name'])
    print repo_information # ['name', 'name2', 'name3']
    return repo_information 
```

然后`writerow`就像你现在正在做的那样。然后，这会将所有名称放在同一行中。

# mysql - 设置 MySQL 外键和索引 - 迁移到 InnoDB

> ID：13242525
> 
> 赞同：0
> 
> 时间：2012-11-06T00:15:15.400
> 
> 标签：mysql, foreign-keys, innodb, indexing

我需要帮助设置外键以迁移到 InnoDB。情况是我有 3 张表：工作、客户和联系人。

一个工作属于一个客户，一个工作属于一个联系人。客户有很多工作并有很多联系人。一个联系人属于一个客户并且有很多工作。我需要帮助在工作表中设置外键，以便只能插入属于选定客户的联系人。（即如果客户 A 有联系人 A1 和 A2，客户 B 有联系人 B1，一旦您选择客户 A 作为工作客户，它将拒绝除 A1 或 A2 之外的联系人条目）。这可能与外键有关，还是我必须用我选择的编程语言进行验证？

这是我的架构：

```
CREATE TABLE jobs(
  job_id INT(11) NOT NULL AUTO_INCREMENT,
  customer_id INT(11) DEFAULT NULL,
  contact_id INT(11) DEFAULT NULL,
  job_number INT(11) UNSIGNED NOT NULL DEFAULT 0,
  status_void TINYINT(1) DEFAULT 0,
  PRIMARY KEY (job_id),
  INDEX active_jobs (job_number, status_void),
  INDEX customer_id (customer_id),
  UNIQUE INDEX job_number (job_number),
  CONSTRAINT FK_jobs_contacts_contact_id FOREIGN KEY (contact_id)
  REFERENCES contacts (contact_id) ON DELETE SET NULL ON UPDATE CASCADE,
  CONSTRAINT FK_jobs_customers_customer_id FOREIGN KEY (customer_id)
  REFERENCES customers (customer_id) ON DELETE SET NULL ON UPDATE CASCADE
)
ENGINE = INNODB
CHARACTER SET utf8
COLLATE utf8_general_ci;`

CREATE TABLE customers(
  customer_id INT(11) NOT NULL AUTO_INCREMENT,
  inactive TINYINT(1) DEFAULT 0,
  customer_name VARCHAR(50) NOT NULL DEFAULT '',
  PRIMARY KEY (customer_id),
  UNIQUE INDEX customer_name (customer_name),
  INDEX inactive (inactive)
)
ENGINE = INNODB
CHARACTER SET utf8
COLLATE utf8_general_ci;

CREATE TABLE contacts(
  contact_id INT(11) NOT NULL AUTO_INCREMENT,
  customer_id INT(11) DEFAULT NULL,
  inactive TINYINT(1) DEFAULT 0,
  first_name VARCHAR(50) DEFAULT NULL,
  last_name VARCHAR(50) DEFAULT NULL,
  PRIMARY KEY (contact_id),
  UNIQUE INDEX contact_key (customer_id, last_name, first_name),
  INDEX customer_id (customer_id),
  INDEX inactive (inactive),
  INDEX name (last_name, first_name),
  CONSTRAINT fk_contacts_customers_customer_id FOREIGN KEY (customer_id)
  REFERENCES customers (customer_id) ON DELETE RESTRICT ON UPDATE CASCADE
)
ENGINE = INNODB
CHARACTER SET utf8
COLLATE utf8_general_ci; 
```

我的另一个目标是设置索引以列出所有非无效的工作（status_void=0）以及所有非非活动的客户和联系人（非活动=0）。我不知道在这种情况下多列索引（工作）或两个单独的索引（客户/联系人）是否会有所帮助。

请放轻松，因为我还在学习。感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T01:18:37.953

> 这可能与外键有关，还是我必须用我选择的编程语言进行验证？

是的，是的。

这是 FK 添加到您的数据的参照完整性。但是，如果您不在应用程序中考虑它，您将呈现可怕的用户体验，这将允许用户输入不属于客户的联系人，并且在将其提交给数据库后会出现错误。最好在您的应用程序中考虑这一点，以防止这种情况被发送到数据库，并且 FK 是一种备份，以防以某种方式通过。

> 我的另一个目标是设置索引以列出所有非无效的工作（status_void=0）以及所有非非活动的客户和联系人（非活动=0）。我不知道在这种情况下多列索引（工作）或两个单独的索引（客户/联系人）是否会有所帮助。

要构建的索引往往是特定于查询的。因此，您可能希望展示一个示例查询，以最好地获得索引方面的建议，而不仅仅是您的最终目标是什么。重要的是要知道查询中的每个表引用只能使用一个索引。因此，如果表在 where 子句中有多个过滤器，您往往会通过拥有多列索引来获得最佳性能。

在规划索引时，最好考虑哪些列具有较少的唯一值，这些列会过滤掉更多的行并在索引中首先列出这些行。

综上所述，如果没有代表性查询和解释语句的结果，局外人就无法为您提供有关索引的建议，因为它们的有效性取决于它们所针对的数据。

# ssl - curl 不会在 Firefox 中使用由 --cacert 传递的导出站点证书验证证书

> ID：13242528
> 
> 赞同：1
> 
> 时间：2012-11-06T00:15:36.603
> 
> 标签：ssl, curl, wget, certificate

我不是 SSL 方面的专家，如果我错误地使用了一些与 SSL 相关的术语，请见谅。出于某种原因，我无法通过 https 下载文件，而 curl 使用 --cacert 选项为它提供了该站点的证书。

我有一个可通过 https 访问的 Intranet 站点。接受不受信任（或自签名）的 SSL 证书后，可以在 Firefox 中打开此站点。我将此站点的证书从 Firefox 导出到一个文件中。我已经从 /etc/pki/tls/certs 中删除了所有证书，因此除了 --cacert 选项提供的文件中的证书之外，curl 无法在任何地方找到证书。

当我使用指定证书文件的 --cacert 选项运行 curl 时，它会失败：

```
curl -v https://some-intranet-site.com/repodata/repomd.xml --cacert exported_certificate.cer

* Peer certificate cannot be authenticated with known CA certificates
curl: (60) Peer certificate cannot be authenticated with known CA certificates
More details here: http://curl.haxx.se/docs/sslcerts.html 
```

当我导出 Google 的证书并尝试使用 curl访问[https://gogole.com时，它可以工作：](https://gogole.com)

```
curl https://google.com --cacert ~/dev/tmp/google.cert 
<HTML><HEAD><meta http-equiv="content-type" content="text/html;charset=utf-8">
<TITLE>301 Moved</TITLE></HEAD><BODY>
<H1>301 Moved</H1>
The document has moved
<A HREF="https://www.google.com/">here</A>.
</BODY></HTML> 
```

你能给出任何解释吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:35:57.153

使用自签名证书可能不太好，因为您会收到警告。

在任何情况下，您都应该确保服务器证书的 CN 包含服务器的 DNS 名称。另外，确保exported_certificate.cer 是PEM 格式。我的猜测是你的格式是 DER。如果是 PEM 格式，那么您在常规文本编辑器中阅读它，如果是 DER，它是二进制的。

最后，如果您不想验证服务器证书，那么您可以使用 curl 使用“-k”跳过此操作。所以在你的情况下，“curl -k -v [https://some-intranet-site.com/repodata/repomd.xml](https://some-intranet-site.com/repodata/repomd.xml) ”

# mysql - 推荐的用户信息数据库结构

> ID：13242531
> 
> 赞同：1
> 
> 时间：2012-11-06T00:15:44.043
> 
> 标签：mysql, database, database-design

我试图弄清楚我应该如何为我的网站上的用户信息构建我的数据库结构（表）。我将存储的信息类型（无论如何此时）是：

*   关于我
*   生日（1970 年 1 月 1 日）
*   性别（男/女）
*   感兴趣的：（男性，女性，两者）
*   关系状态：（单身、恋爱、订婚、已婚）
*   网站：（mywebsite.com）
*   来自：（加利福尼亚州库比蒂诺）

所以这是我现在要存储的信息类型。我的问题基本上是，我应该只有一张桌子吗？还是根据信息的内容来拆分信息会更好（显然，我的用户有一个唯一的 ID，它将与每个信息表一起出现）。所以我不确定我是否应该有一个专门用于生日的表格，其中包含以下列：userID、Month、Day、Year；要不然是啥。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T00:22:34.680

如果用户只需要存储一个属性的一条信息，那么您不需要单独的表。例如，一个用户只有一个生日。您需要一个单独的`Birthdays`表的唯一原因是如果您想为同一个用户标识存储多个生日。您列出的每个属性看起来都可以放在一张`Users`表中。

至于分成`Birthdays`几列：userID、Month、Day、Year，这完全取决于您将如何使用这些信息。*您是否只*需要知道用户生日的月份、日期或年份？如果这是一个常见的需求，您可能希望单独存储它们。通常不是，因此您可能只想将其存储为单个 Date 值。

**注意：**您可以通过查看[Data Explorer](https://data.stackexchange.com/stackoverflow/query/new)查看 Stack Overflow 使用的架构。他们在一个用户表中保留了类似的数据集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T00:23:38.213

在绝大多数情况下，我已经看到您要求的内容存储在一张表中 - 通常是`user`或`users`.

也许还包括许多其他元素：

> *   用户 ID（唯一）
> *   注册日期
> *   状态（活动/过期/禁止）
> *   用户哈希
> *   加上其他各种...

老实说 - 这取决于你正在构建什么以及它是如何构建的，但我的建议是从简单开始。

关于生日，只需将日期存储为 mysql 日期格式：

```
YYYY-MM-DD 
```

这样，您可以使用 mysql 函数以多种方式对其进行操作。

希望这可以帮助。

# mysql - MYSQL 数据库联接表查询拉取有限记录并添加结果

> ID：13242532
> 
> 赞同：2
> 
> 时间：2012-11-06T00:15:44.573
> 
> 标签：mysql

我的数据库中有两个表，我正在尝试使用一个查询从这两个表中获取特定报告的数据。

表一是“电影”，它有以下字段：

*   电影_ID
*   姓名
*   季节

表二是每部电影的“票房”销售收入：

*   票房_ID
*   电影_ID
*   日期
*   数量

我想运行一个查询来比较给定季节每部电影的开放周末，并将它们作为一个数据集返回，并将收集的数量加在一起。所以我想拍摄每部电影并获得每部电影的前三天票房并将它们相加，以便我得到这样的查询

1.  电影A，4910万
2.  电影B，4220万
3.  电影C，2950万

请注意，收集的金额只需要输出数字，我会处理格式。我只是无法弄清楚如何只查询每部电影的前三天票房并将它们加在一起。

我知道我可以运行一个查询并获取具有票房的电影，然后遍历该查询并重新查询数据库，但我知道有很多电影并不是最有效的做事方式。我不确定是否有办法在一个查询中完成所有这些（每部电影的前三天加在一起），但我想看看是否有更高级的知识可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:19:51.987

```
SELECT  a.Name, SUM(COALESCE(b.Amount,0)) totalAmount
FROM    Movies a
        LEFT JOIN BoxOffice b
            ON a.Movies_ID = b.Movies_ID
WHERE   b.date BETWEEN DATE_ADD(CURDATE(),INTERVAL -3 DAY) AND CURDATE()
GROUP BY a.Name 
```

如果 的值为`CURDATE()`2012-11-06 （*即今天*），它将从*2012-11-03*到*2012-11-06*计算。

*后续问题，您如何计算日期？白天？按周？要不然是啥？*

**更新 1**

```
SELECT  a.Name, SUM(COALESCE(b.Amount,0)) totalAmount
FROM    Movies a
        LEFT JOIN BoxOffice b
            ON a.Movies_ID = b.Movies_ID
        LEFT JOIN
        (
            SELECT  movies_ID, MIN(date) minDate
            FROM    BoxOffice
            GROUP BY Movies_ID
        ) c ON a.Movies_ID = c.Movies_ID
WHERE   DATE(b.date) BETWEEN DATE(c.minDate) AND 
                             DATE(DATE_ADD(c.minDate,INTERVAL 3 DAY))
GROUP BY a.Name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T00:20:34.110

只需加入 Movies_ID 上的表格，并在发行日期和日期之间添加 TIMEDIFF 的 WHERE 为 3 天。

# javascript - 为流体 div 设置相同的高度？

> ID：13242535
> 
> 赞同：1
> 
> 时间：2012-11-06T00:15:54.423
> 
> 标签：javascript, jquery, html

我正在尝试为一组具有可变高度但固定宽度的 div 设置相同的高度。

这是我的代码：

```
<script type="text/javascript">
    $(document).ready(function () {
        var heightArray = $(".feature_content_body").map(function () {
            return $(this).height();
        }).get();
        var maxHeight = Math.max.apply(Math, Max, heightArray);
        $(".feature_content_body").height(maxHeight);
    });
</script> 
```

我不确定我在这里哪里出错了，因为我可以看到代码中应该使它工作的逻辑......

有人可以在这里阐明我的问题吗？

这是[一个演示链接](http://jsfiddle.net/zzf7r/1/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:17:07.143

这条线...

```
var maxHeight = Math.max.apply( Math, Max, heightArray); 
```

...应该...

```
var maxHeight = Math.max.apply( Math, heightArray); 
```

引用`Max`会有一个`ReferenceError`，除非你已经定义了它或者你正在运行它`with (Math) { }`。

# java - 我可以使用某些系统属性在命令行上关闭 Restlet 访问日志记录吗？

> ID：13242536
> 
> 赞同：0
> 
> 时间：2012-11-06T00:16:12.733
> 
> 标签：java, restlet

是否有系统属性设置（在命令行上使用`-D`标志）关闭 Restlet 中的访问记录？

我觉得这应该很简单，但我找不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T00:22:43.907

见[http://wiki.restlet.org/docs_1.1/13-restlet/27-restlet/48-restlet/101-restlet.html](http://wiki.restlet.org/docs_1.1/13-restlet/27-restlet/48-restlet/101-restlet.html)

你应该可以通过

```
-Djava.util.logging.config.file="/home/myApp/config/myLogging.properties 
```

在 myLogging.properties 集中

```
org.restlet.level=OFF 
```

# android - 为什么即使有足够的空间容纳 3 个，它也只在操作栏上显示 2 个菜单图标？

> ID：13242538
> 
> 赞同：0
> 
> 时间：2012-11-06T00:16:23.930
> 
> 标签：android, menu, overflow

我在菜单栏上有 3 个菜单图标，但每次它只显示 2 个图标，最后一个不在。我的问题是： 1\. 有足够的空间容纳 3 个图标，为什么只显示 2 个？2.如果系统认为第3个图标空间不够，为什么不将第2个和第3个图标合并成一个溢出菜单？

下面是我的 menu.xml

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item android:id="@+id/refresh"
          android:icon="@drawable/ic_menu_refresh"
          android:showAsAction="ifRoom" />        
    <item android:id="@+id/add_homework"
          android:icon="@android:drawable/ic_menu_edit"
          android:showAsAction="ifRoom" />    
    <item android:id="@+id/set_groupid"
          android:icon="@android:drawable/ic_menu_preferences"
          android:showAsAction="ifRoom" /> 

</menu> 
```

**这个片段在我的 MainActivity**

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.menu, menu);
    return super.onCreateOptionsMenu(menu);

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T01:20:59.070

> 我在菜单栏上有 3 个菜单图标

出于此答案的目的，我假设您通过“菜单栏”指的是操作栏。

> 但每次它只显示2个图标，最后一个不在

对于具有屏幕外 MENU 按钮的设备（或仿真器），按下 MENU 按钮可以使用最后一个。

> 有足够的空间容纳 3 个图标，为什么只显示 2 个？

大概是因为 Android 不同意您对是否有足够空间容纳 3 个图标的评估。

> 如果系统认为第三个图标空间不够用，为什么不将第二个和第三个图标组合成一个溢出菜单呢？

我不知道您为什么认为将第二个图标（您承认它适合）强制放入溢出菜单是个好主意。第三个菜单项位于溢出菜单中，对于缺少 MENU 按钮的设备，可通过操作栏上有一个或三个垂直点按钮的设备上的 MENU 按钮访问。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T17:47:28.787

我遇到了同样的问题并通过做两件事来解决它，尽管我认为主要原因是第二项。我正在使用 Android Asset Studio 为我的操作栏菜单创建图标。

1.  在 Android Asset Studio 中，我将图标设置为“修剪”。

2.  在我的 menu/activity_main.xml 定义文件（或任何你称之为菜单定义文件的文件）中，我用 **android:showAsAction="always"定义了我的菜单图标**

它看起来像这样：

```
 <item android:id="@+id/menu_test"
     android:icon="@drawable/ic_menu_test"
     android:title="@string/menu_test"
     android:showAsAction="always" /> 
```

# css - 将 Skeleton 框架默认更改为 1400px

> ID：13242542
> 
> 赞同：7
> 
> 时间：2012-11-06T00:16:59.333
> 
> 标签：css, html, skeleton-css-boilerplate

我对骨架很陌生，但我想将它用于一个项目。该项目由 4 个 div 组成，最大宽度为 1400px，我需要这些与浏览器一起缩小。我不确定如何将标准的 16 列宽 960px 更改为 1400px 以及与之相关的各种媒体查询。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T04:17:28.777

如果有人对此感兴趣，Ian Yates 在这篇文章/教程系列中做了很好的解释：

[http://webdesign.tutsplus.com/tutorials/complete-websites/building-a-responsive-layout-with-skeleton-widescreen/](http://webdesign.tutsplus.com/tutorials/complete-websites/building-a-responsive-layout-with-skeleton-widescreen/)

这只是将您所需的最小宽度媒体查询设置到骨架.css 并更改值的情况；任一百分比以像素为基础。这是我的一个例子。

```
/* Note: Design for a width of 1400px */
@media only screen and (min-width: 1400px) {
    .container                                  { width: 1400px; } /*whatever you want - can even be fixed if you prefer*/
    .container .column,
    .container .columns                         { margin-left: 0.78125%; margin-right: 0.78125%;  }
    .container .one.column,
    .container .one.columns                     { width: 4.6875%; }
    .container .two.columns                     { width: 10.9375%; }
    .container .three.columns                   { width: 17.1875%; }
    .container .four.columns                    { width: 23.4375%; }
    .container .five.columns                    { width: 29.6875%; }
    .container .six.columns                     { width: 35.9375%; }
    .container .seven.columns                   { width: 42.1875%; }
    .container .eight.columns                   { width: 48.4375%; }
    .container .nine.columns                    { width: 54.6875%; }
    .container .ten.columns                     { width: 60.9375%; }
    .container .eleven.columns                  { width: 67.1875%; }
    .container .twelve.columns                  { width: 73.4375%; }
    .container .thirteen.columns                { width: 79.6875%; }
    .container .fourteen.columns                { width: 85.9375%; }
    .container .fifteen.columns                 { width: 92.1875%; }
    .container .sixteen.columns                 { width: 98.4375%; }
    .container .one-third.column                { width: 31.7708%; }
    .container .two-thirds.column               { width: 65.1041%; }
    /* Offsets */
    .container .offset-by-one                   { padding-left: 6.25%; }
    .container .offset-by-two                   { padding-left: 12.5%; }
    .container .offset-by-three                 { padding-left: 18.75%; }
    .container .offset-by-four                  { padding-left: 25%; }
    .container .offset-by-five                  { padding-left: 31.25%; }
    .container .offset-by-six                   { padding-left: 37.5%; }
    .container .offset-by-seven                 { padding-left: 43.75%; }
    .container .offset-by-eight                 { padding-left: 50%; }
    .container .offset-by-nine                  { padding-left: 56.25%; }
    .container .offset-by-ten                   { padding-left: 62.5%; }
    .container .offset-by-eleven                { padding-left: 68.75%; }
    .container .offset-by-twelve                { padding-left: 75%; }
    .container .offset-by-thirteen              { padding-left: 81.25%; }
    .container .offset-by-fourteen              { padding-left: 87.5%; }
    .container .offset-by-fifteen               { padding-left: 93.75%; }
} 
```

# sql - 使用 Perl 将简化的 SQL 查询解析为 SQLite

> ID：13242543
> 
> 赞同：3
> 
> 时间：2012-11-06T00:17:02.803
> 
> 标签：sql, sqlite, parsing

我正在尝试将“简化”的 sql 查询转换为可用于 XnViews 数据库的有效 SQLite 查询，这意味着数据库布局对于我正在尝试做的事情来说充其量是次优的，而且我对此无能为力。

例如“(cat_10 and cat_12) and (cat_5 or cat_7)”。

这应该用于表“t3”，该表具有字段“if”（fileID）和“ic”（categoryID）。

条目如下所示：

```
if, ic
7, 10
7, 12
7, 4
9, 10
9, 12
9, 5
10, 10
10, 12
10, 7 
```

上面的简化查询应该只选择文件 9 和 10，因为 7 确实具有所需的类别 10 和 12，但既没有 5 也没有 7。

现在的实际问题是构建一个查询语句的地狱，因为我已经花了几个小时来简单地在两个类别之间进行 AND 工作。

```
SELECT if FROM t3 WHERE ic IN (10, 12) GROUP BY if HAVING count(if) = 2 
```

这给了我所有包含类别 10 和 12 的文件 ID，但我不知道我应该如何将其与剩余的“和（cat_5 或 cat_7）”结合起来。

当我计划这些简化的 sql 语句（由 html 和 js 中的 click-it-together-builder 生成）时，我打算简单地将“cat_5”替换为“t3.ic = 5”，其余部分保持原样。

当然，我没有预见到它不能作为一个整体检查条目的地方，并且不能有 ic = 5 和 ic = 7。这几乎破坏了一切。

所以我想知道是否有人知道我如何将这些简单的查询翻译成实际工作的查询，请记住它可能不限于（ x 和 y ）对。

编辑：我想出了如何做我给出的例子，我认为至少：

```
SELECT if FROM t3 WHERE ic IN (10, 12) GROUP BY if HAVING count(if) = 2
INTERSECT 
SELECT if FROM t3 WHERE ic IN (5, 7) GROUP BY if 
```

但现在的主要问题是以正确的顺序解决 ( ) 。

编辑 2：我想我正在尝试使用 group_concat() 将类别分组到一个字段中，然后我应该能够简单地对猫 LIKE "" AND 这将是我可以轻松拼凑在一起的小块，然后只是括号它应该可以工作。突出“应该”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T06:45:25.757

您的原始查询不符合预期。`WHERE ic IN (10, 12) GROUP BY if HAVING count(if) = 2`即使你`ic`在 10 和 10 中有 s 但根本没有 12，也会产生正确的结果。这与您对所需内容的文字描述背道而驰。这是需要内部查询来获取 12 和 10 的结果的地方。您可以在我在下面发布的小提琴链接中测试您的查询是否失败。

有点棘手，但这就是我直接解释它的方式。

```
SELECT DISTINCT ifc
FROM   t3
WHERE  ifc IN (
               SELECT   ifc
               FROM     t3 
               WHERE    ic = 10  
               GROUP BY ifc
               HAVING   COUNT(*) > 0             

               INTERSECT

               SELECT   ifc
               FROM     t3 
               WHERE    ic = 12
               GROUP BY ifc
               HAVING   COUNT(*) > 0
              )            
AND ic IN (5, 7) 
```

[试试小提琴](http://sqlfiddle.com/#!12/2fd5f/1)

我没有带来任何优化，你可以试试你的。小提琴链接是 Postgres 的，但这应该可以工作（没有让 SQLite 在我的浏览器中工作:(）

**编辑：** CL。指出了一个有趣的事情，即不必`HAVING`在内部查询中包含子句，这是真的。我用 SQL 术语解释 OP 的要求，目的是在不考虑任何优化的情况下使事情变得清晰。

这是一个更好看的查询：

```
SELECT DISTINCT ifc
FROM   t3
WHERE  ifc IN (
               SELECT   ifc
               FROM     t3 
               WHERE    ic = 10            

               INTERSECT

               SELECT   ifc
               FROM     t3 
               WHERE    ic = 12
              )            
AND ic IN (5, 7) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:42:50.727

好的，我出人意料地按照我最初的计划工作了。

```
SELECT Folders.Pathname || Images.Filename AS File FROM Images
JOIN Folders ON Images.FolderID = Folders.FolderID
LEFT JOIN (
    SELECT f, Cats, t4.if AS Tagged FROM t2
    JOIN (
        SELECT if, ' ' || group_concat(ic,' ') || ' ' AS Cats FROM t3 GROUP BY if
    ) st3 ON t2.i = st3.if
    LEFT JOIN t4 ON t2.i = t4.if
) st2 ON File = st2.f
$selectWhereImage $sqlqry
ORDER BY ModifiedDate $order LIMIT $offset, $limit 
```

我知道这是一个非常糟糕的查询，但它结合了我要查找的所有内容（类别 ID、是否标记、评级、颜色），可按日期排序，结果是完整的文件路径。

这可能是一种可怕的方法，但如果有人找到一种更好的工作方式，我可以简单地替换像“cat_5”这样的占位符，同时保持其余部分保持原样，需要括号和运算符，那么我会全神贯注：D

哦，$selectWhereImage 只包含一个更长的 WHERE，它限制 File 以图像格式结尾， $sqlqry 是上面的 refitte 东西，**cat_5**只会变成cat **LIKE '% 5 %'**，因为猫我可以匹配任何数字而不会在“10”中找到“1”，因为“1”不在“10”中：D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T20:31:18.053

如果您必须像以前那样使用相交，则应该更改错误的上层查询。既然你必须确保每个`if`人都有一个 10 和 12，`ic`那么如果没有两个单独的查询，你就无法逃脱。就像是：

```
SELECT ifc
FROM   t3
WHERE  ifc IN (
               SELECT   ifc
               FROM     t3 
               WHERE    ic = 10
              ) 
   AND ifc IN (
               SELECT   ifc
               FROM     t3 
               WHERE    ic = 12
              )

INTERSECT

SELECT ifc FROM t3 WHERE ic IN (5, 7) 
```

将`INTERSECT`在此处处理组，因此您不必显式添加，但这不会像我的其他查询那样有效。如果您必须摆脱子查询，您可以使用`JOIN`：

```
SELECT DISTINCT t.ifc
FROM   t3 AS t
JOIN   t3 AS v ON v.ifc = t.ifc
JOIN   t3 AS p ON p.ifc = t.ifc
WHERE  v.ic = 10 AND p.ic = 12 AND t.ic IN (5, 7) 
```

第二个的优点是它可以在不知道`INTERSECT`MySQL 的数据库上工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T20:15:07.607

A hackish approach which would be simpler and I believe faster is

```
SELECT DISTINCT ifc
FROM   t3
WHERE  ifc IN (
               SELECT   ifc
               FROM     t3 
               WHERE    ic = 10
              ) 
   AND ifc IN (
               SELECT   ifc
               FROM     t3 
               WHERE    ic = 12
              )               
AND ic IN (5, 7) 
```

# ruby-on-rails - Has_one 关联不起作用

> ID：13242547
> 
> 赞同：0
> 
> 时间：2012-11-06T00:17:23.003
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, associations

我无法找出这种关系的错误在哪里：

```
class Education < ActiveRecord::Base
  attr_accessible :description, :graduation, :student_id, :faculty_id, :department_id

  has_one :faculty
  belongs_to :student
end
#  id          :integer          not null, primary key
#  student_id  :integer
#  faculty_id  :integer
#  description :text
#  graduation  :string(255)

class Faculty < ActiveRecord::Base
  attr_accessible :department_id, :name

  belongs_to :education
  belongs_to :department
end

# == Schema Information
#
# Table name: faculties
#
#  id            :integer          not null, primary key
#  name          :string(255)
#  department_id :integer 
```

为什么我必须添加`education_id`到`faculties`表中？每个教育只有一个教师，教师属于许多教育。

```
>> Education.last.faculty
  Education Load (0.3ms)  SELECT "educations".* FROM "educations" ORDER BY "educations"."id" DESC LIMIT 1
  Faculty Load (0.2ms)  SELECT "faculties".* FROM "faculties" WHERE "faculties"."education_id" = 1 LIMIT 1
SQLite3::SQLException: no such column: faculties.education_id: SELECT  "faculties".* FROM "faculties"  WHERE "faculties"."education_id" = 1 LIMIT 1
ActiveRecord::StatementInvalid: SQLite3::SQLException: no such column: faculties.education_id: SELECT  "faculties".* FROM "faculties"  WHERE "faculties"."education_id" = 1 LIMIT 1
from /Users/rege/.rvm/gems/ruby-1.9.3-p194@ckdatabase/gems/sqlite3-1.3.6/lib/sqlite3/database.rb:91:in `initialize' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T00:26:25.033

无论您在哪一侧放置“belongs_to”，都将始终具有关联对象的 id - 这有点像定义。如果你属于某个东西，你就不属于另一个实例。

如果您希望每个教育只有一个教员，有两种选择：

*   **use a one-to-one**: when you also want the Faculty to only have one Education
*   **use a belongs_to with a one-to-many**: when you want each Faculty to have multiple Educations

So you might try this instead:

```
class Education < ActiveRecord::Base
  attr_accessible :description, :graduation, :student_id, :faculty_id, :department_id

  belongs_to :faculty
  belongs_to :student
end

class Faculty < ActiveRecord::Base
  attr_accessible :department_id, :name

  has_many :education
  belongs_to :department
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T00:25:38.043

我认为您的关系有些混乱-[官方文档](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)可能会有所帮助。

如果我理解你想要做什么，你需要这样的东西（关于你的教师/教育关系）：

```
class Education < ActiveRecord::Base
  attr_accessible :description, :graduation, :student_id, :faculty_id, :department_id

  belongs_to :faculty # foreign key - faculty_id
  belongs_to :student
end
#  id          :integer          not null, primary key
#  student_id  :integer
#  faculty_id  :integer
#  description :text
#  graduation  :string(255)

class Faculty < ActiveRecord::Base
  attr_accessible :department_id, :name

  has_many :educations
  belongs_to :department
end 
```

# list - 在 Clojure 中递归添加到列表

> ID：13242553
> 
> 赞同：2
> 
> 时间：2012-11-06T00:18:42.723
> 
> 标签：list, recursion, clojure, append

我正在尝试在 clojure 中递归地附加一个列表。就是解构我创建的一个POW函数，把(POW x 3)变成(* x (* xx))

我是一个真正的 Clojure 程序员新手，试图在 Clojure 中解决这个问题有点困难。我想出了：

```
(defn do-it [x n]
  (if (= n 0)
  (println x)
  ((dec n) (if (= x 'x))
     (list '* 'x 'x)
     (list '* 'x x)))) 
```

这不会编译或运行，但这就是我的计划。我的想法是每次添加另一个 (* x 到列表中时都减少 n。

我有这个，这与我正在尝试做的类似，但没有将 POW 想法实现到函数中：

```
(defn do-it [x]
  (if (= x 'x)
    (list '* 'x 'x)
    (list '* 'x x))) 
```

我在第一段代码的正确道路上吗？我正在尝试的甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T02:29:37.370

恐怕你发布的努力离题太远了。如果我要手写 pow，它看起来像这样：

```
(defn pow [x n]
  (if (= n 1)
    x
    (list '* x (pow x (dec n))))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T00:37:38.793

如果注意到前缀符号可以采用不同数量的参数，您可以简化问题。然后你的函数看起来像这样：

```
(defn power [x n]
  (cons '* (repeat n x)))

(power 2 3) => (* 2 2 2)
(power 'x 2) => (* x x) 
```

还包括零和一基本情况，因为：

```
(power 2 1) => (* 2) ; valid result, produces 2
(power 2 0) => (*) ; valid result, produces 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T05:14:44.577

```
(defn do-it [x n]
  (if (= 1 n)
    x
    (reduce (fn [chain _] `(~'* ~chain))
            `(~'* ~x ~x)
            (range 2 n))))

(do-it 5 10) ->
(* (* (* (* (* (* (* (* (* 5 5)))))))))

(do-it 5 1) ->
5 
```

# audio - 单声道假复音

> ID：13242555
> 
> 赞同：0
> 
> 时间：2012-11-06T00:18:49.930
> 
> 标签：audio, assembly, emulation

我正在为一个模拟系统（[Chip16](http://www.doc.ic.ac.uk/~tk2010/tutorials/chip16/beginner/spec.txt)）写音乐，它可以将 ADSR 格式的声音输出到单个通道。

此外，它在任何给定时间只能播放一种声音，必要时会切断播放声音。

如果我想要在旋律“后面”播放节拍或贝司，我会怎么做呢？有什么技巧可以模拟复音吗？

我知道它是如何在 IBM PC 扬声器上完成的——但这依赖于设备的物理/机械特性，这在此处是不可能的。

作为参考，可用的声音说明：

```
sng 0xAD, 0xVTSR       ; load Attack,Decay,Volume,Type,Sustain,Release params
snp rx, D              ; play sound, with frequency at [rx], for D milliseconds
snd0                   ; stop currently playing sound 
```

谢谢！

# git - 如何重命名 GIT 中央存储库

> ID：13242559
> 
> 赞同：3
> 
> 时间：2012-11-06T00:19:25.280
> 
> 标签：git

我们的组织中有一个中央 GIT 存储库。我想知道重命名这个中央存储库的最佳方法是什么。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T08:12:58.523

更改存储库的名称取决于所述存储库的管理方式。

*   在 GitHub（或 BitBucket，或...）上，您可以通过 GitHub GUI 管理页面为该 repo 获取 repo 名称。
*   在由 http 管理的服务器上，您只需更改根目录的名称，但您还必须修改根目录`httpd.conf`才能引用该新路径。
    如果您不希望用户*立即*受到影响，您可以复制该条目。
    符号链接是不够的。
*   在由 ssh 管理的服务器上，只需重命名目录就足够了。

在任何情况下，正如[slashingweapon所](https://stackoverflow.com/users/1292052/slashingweapon)[评论](https://stackoverflow.com/questions/13242559/how-to-rename-git-central-repository#comment18042864_13242559) 的，您需要每个用户更改他们的远程 URL（如“[更改远程 URL](https://help.github.com/articles/changing-a-remote-s-url) ”中所述）

```
git remote set-url origin new-url 
```

# magento - Magento Mage::getUrl 带后缀

> ID：13242562
> 
> 赞同：2
> 
> 时间：2012-11-06T00:19:47.303
> 
> 标签：magento

当 url 具有 .html 后缀时，在 magento 中处理生成 url 的正确方法是什么。

例如，要获取以下产品 url：

类别/product.html

你不能简单地做`Mage::getUrl('mycategory/myproduct.html')`或`Mage::getUrl('mycategory/myproduct')`

但反而

```
Mage::getUrl() . 'mycategory/myproduct.html' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:43:02.283

你——不？

拥有一个`getUrl`方法的重点是您提供抽象的、在幕后`module/controller/action`的 URL 部分，然后**系统**会为您处理生成实际的 HTML url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-22T22:13:16.270

获取产品网址的最佳方式：

```
$productId = ***;
$productUrl  = Mage::getBaseUrl().Mage::getResourceSingleton('catalog/product')->getAttributeRawValue($productId, 'url_key', Mage::app()->getStore()).Mage::helper('catalog/product')->getProductUrlSuffix(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-06T08:39:35.493

如果要获取产品 url，则应使用以下内容

```
$product = Mage::getModel('catalog/product')->load($productId);
echo $url = $product->getProductUrl(); 
```

如果你刚刚从后端创建了产品，你需要在保存过程之后获取这个 url，你必须通过使用事件来获取它`catalog_product_save_after`，创建一个观察者类，你可以在那里获取产品对象，感谢`$product = $observer->getEvent()->getProduct();`

# c# - 有时在signalR中断开连接不触发

> ID：13242565
> 
> 赞同：4
> 
> 时间：2012-11-06T00:19:53.970
> 
> 标签：c#, asp.net, signalr

我目前将我的用户保存在一个名为 OnlineUsers 的表中。当一个人连接或断开连接时，它会将用户 ID 和他的连接 ID 添加到表中，但由于某种原因（我相信当多个浏览器窗口打开时）断开功能有时不会触发，将用户留在表中并使其显示为“在线” “当他们真的不是的时候。以前有没有人遇到过这个问题，解决这个问题的好方法是什么？

更新**（抱歉没有放代码，我应该首先完成）

这是我要从表中添加和删除的数据库函数：

```
 public bool ConnectUser(Guid UserId, String ConnectionId)
            {
                if (!Ent.OnlineUsers.Any(x => x.UserId == UserId && x.ConnectionId == ConnectionId))
                {
                    Ent.OnlineUsers.AddObject(new OnlineUser { UserId = UserId, ConnectionId = ConnectionId });
                    Ent.SaveChanges();
                    return true;
                }
                else
                    return false;
            }
            public void DisconnectUser(Guid UserId, String ConnectionId)
            {
                if (Ent.OnlineUsers.Any(x => x.UserId == UserId && x.ConnectionId == ConnectionId))
                {
                    Ent.OnlineUsers.DeleteObject(Ent.OnlineUsers.First(x => x.UserId == UserId && x.ConnectionId == ConnectionId));
                    Ent.SaveChanges();
                }
            } 
```

这是我的集线器类连接和断开任务：

```
 public Task Disconnect()
        {

            disconnectUser();                
            return null;
        }
        public Task Reconnect(IEnumerable<string> connections)
        {
            connectUser();                
            return null;
        }
        public Task Connect()
        {
            connectUser();               
            return null;
        }
private void connectUser()
        {
            if (onlineUserRepository.ConnectUser(MainProfile.UserId, Context.ConnectionId))
            {
                Groups.Add(Context.ConnectionId, Convert.ToString(MainProfile.ChatId));
            }
        }
        private void disconnectUser()
        {
            onlineUserRepository.DisconnectUser(MainProfile.UserId, Context.ConnectionId);
            Groups.Remove(Context.ConnectionId, Convert.ToString(MainProfile.ChatId));
        } 
```

我已经检查过我使用的是最新版本的 signalR (0.5.3)，这似乎发生在我打开多个浏览器窗口并同时关闭它们时，用户将卡在数据库中。

如果需要，这是我的连接 ID 生成器类：

```
public class MyConnectionFactory : IConnectionIdGenerator
    {
        public string GenerateConnectionId(IRequest request)
        {            
            if (request.Cookies["srconnectionid"] != null)
            {
                return request.Cookies["srconnectionid"].ToString();
            }

            return Guid.NewGuid().ToString();
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T02:14:35.630

我认为您的连接工厂确实是问题所在。如果您没有找到 cookie，则继续生成新的 guid，但到那时已经太晚了。

我的理解是连接id是由客户端（客户端集线器）在初始化时建立的，不能在服务器端更改；它只能读取。实际上，当您在找不到 cookie 时返回新的 Guid 时，您正在更改客户端 ID。

在我的连接工厂中，如果找不到 cookie，我会抛出。在打开使用信号器的页面的控制器操作中，我确保已植入 cookie。

这是我的连接工厂：

```
public class ConnectionFactory : IConnectionIdGenerator
{
    public string GenerateConnectionId(IRequest request)
    {
        if (request.Cookies["UserGuid"] != null)
            return request.Cookies["UserGuid"].Value;

        throw new ApplicationException("No User Id cookie was found on this browser; you must have cookies enabled to enter.");
    }
} 
```

# java - 声明一个匿名类型的抽象变量？

> ID：13242566
> 
> 赞同：2
> 
> 时间：2012-11-06T00:19:57.413
> 
> 标签：java, types, declaration, abstract, anonymous-types

我想创建一个抽象的*参数*类。

```
public abstract class Parameter{

} 
```

我将至少有两个子类：

```
public class ParamDouble extends Parameter{
    public final double MIN;
    public final double MAX;
    private double value;

    public ParamDouble(double min, double max, double current){
         this.MIN = min; 
         this.MAX = max; 
         this.value = current; 
         }

    public void setValue(double v) {
        this.value = v;
        }
    public double getValue(){
        return this.value;
        }

} 
```

和：

```
public class ParamInt extends Parameter{
    public final int MIN;
    public final int MAX;
    private int value;

    public ParamDouble(int min, int max, int current){
         this.MIN = min; 
         this.MAX = max; 
         this.value = current; 
         }

    public void setValue(int v) {
        this.value = v;
        }
    public int getValue(){
        return this.value;
        }

} 
```

所以所有的子类都需要，最终的 MIN 和 MAX，以及 value，并包含三个参数构造函数，以及 setValue() 和 getValue()，但它们有不同的类型。

如何在抽象类中声明这些变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T00:32:34.797

您只需要一个具有正确类型绑定的泛型类：

```
public class Parameter<T extends Number & Comparable<T>> {
    public final T min;
    public final T max;
    private T value;

    public Parameter(T min, T max, T current) {
        this.min = min; 
        this.max = max; 
        setValue(current); // Use setter to check range on construction 
    }

    public void setValue(T v) {
        // being Comparable, we can check the range generically
        if (max.compareTo(v) < 0) { 
            throw new IllegalArgumentException("Value exceeds " + max);
        }
        if (min.compareTo(v) > 0) {
            throw new IllegalArgumentException("Value is below " + min);
        }

        this.value = v;
    }

    public T getValue() {
        return this.value;
    }
} 
```

### 的解释`<T extends Number & Comparable<T>>`

`T`is的边界`Number & Comparable<T>`，这意味着它必须同时是 a*和*a 。这样做是因为没有实现具有该方法的 ，但所有类（例如）都有，并且您需要该方法来检查方法中的参数范围。[`Number`](http://docs.oracle.com/javase/6/docs/api/java/lang/Number.html) *[`Comparable<T>`](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)`Number``Comparable``compareTo()``java.lang.Number``Integer``compareTo()``setValue()`*

 *如果没有这个特殊的界限，你就不能一般地检查范围。

另一个主要变化是制作`min`和`max`实例变量，而不是变量`static`。您可能会考虑将一些静态最小值/最大值传递给构造函数，或者实现这样的子类：

```
public class IntegerParameter extends Parameter<Integer> {

     public IntegerParameter(Integer current) {
         // specify a default min/max for the Integer impl
         super(-1, 999, current); 
     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T00:23:21.113

*java.lang.Number*是*java.lang.Integer 和 java.lang.Double*的*超类*。只需将您的值类型设为数字即可。

 *```
 private Number value;

    public abstract void setValue(Number v);
    public abstract Number getValue(); 
```

但是你的静态最终变量**MIN**和**MAX**如果在**抽象类**中声明，你将无法在你的子类中**继承**它们，因为它们被标记为**static final**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T00:29:54.453

有几件事我想提一下

1）你应该看看java泛型。这将是一个很好的候选人。

```
 public class Parameter<T extends Number> {
   private T value;

   public Parameter(T value) { this.value = value }

   public T getValue() { return value };
 } 
```

然后我可以声明 Double 或 Integer 的参数。

```
 Parameter<Double> doubleParam = new Parameter<Double>(2.5);
 Parameter<Integer> intParam = new Parameter<Integer>(1); 
```

2）我认为您不想在构造函数中设置 MIN 和 MAX 。这将允许您即时更改它。例如，考虑是否在允许设置之前检查了 MIN 和 MAX，例如

```
 public void setValue(T value)
 {
    if (value < MIN || value > MAX) // error
    else
      this.value = value;
 } 
```

现在我可以做一些古怪的事情了

```
 Parameter<Integer> i1 = new Parameter<Integer>(0, 10, 4);
 i1.set(11); // this would error, until we did

 Parameter<Integer> i2 = new Parameter<Integer>(0, 15, 4);
 i1.set(11); // now it works 
```

如果这就是你想要的，那很好 - 但这似乎有点奇怪。您可能只想制作 min 和 max 常规（非静态）成员或以其他方式初始化它们。**

# mysql - 查询以检索包含 Unix 日期的记录

> ID：13242569
> 
> 赞同：0
> 
> 时间：2012-11-06T00:20:16.087
> 
> 标签：mysql

我的 MySQL 数据库表中的一列以 Unix 格式存储日期。

我正在尝试检索日期晚于特定日期的所有行。如何编写查询来执行此操作？我想要类似的东西：

```
SELECT * FROM table_name WHERE date > "yyyy-mm-dd"; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:21:49.903

利用**[`FROM_UNIXTIME`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime)**

```
SELECT * 
FROM table_name 
WHERE DATE(FROM_UNIXTIME(date)) > "yyyy-mm-dd"; 
```

# jquery - 使用 jQuery 选择当前 div 的第一张图片

> ID：13242571
> 
> 赞同：2
> 
> 时间：2012-11-06T00:20:27.323
> 
> 标签：jquery, image

我刚刚发布了一个类似的问题，以发现这不是我所需要的。我很抱歉。

这是我正在使用的代码：

```
jQuery(document).ready(function($) { 

  $('.upload_button').click(function() {

    targetfield = $(this).prev('.logo_url');
    tb_show('', 'media-upload.php?type=image&amp;TB_iframe=true');

    window.send_to_editor = function(html) {
      imgurl = $('img',html).attr('src');
      jQuery(targetfield).val(imgurl);
      tb_remove();

      $('.upload_preview img').attr('src',imgurl); // THIS IS WHERE I'M HAVING PROBLEMS

      $('#submit_options_form').trigger('click');
    };

    return false;

  });
}); 
```

我对 jQuery 不是最好的，而且对某些东西还是很陌生。我需要在预览类中填充 img 标记的 url，但仅限于获取 url 的那个。我现在拥有的将填充具有该类的每个图像标签。任何帮助是极大的赞赏。

我需要它来填充它，就像填充输入字段一样。

编辑

这是一些示例 HTML。我在一个页面上使用多个这些。

```
<li class="slide">

            <input class="logo_url" name="theme_wptuts_options[logo]" value="src[]" />
                <input class="upload_button" type="button" class="button" value="<?php _e( 'Upload Logo' ); ?>" />

                <div class="upload_preview" style="min-height: 100px;">
                    <img style="max-width:100%;" src="src[]" />
                </div>

            <button class="remove_slide button-secondary">Remove This Slide</button>

</li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T00:55:59.057

使用 :eq(0)，它将选择第一个元素，恕我直言，与 .first() .last() 等相比，这是最好的方法 :)

```
$('.upload_preview img:eq(0)').attr('src',imgurl); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T00:53:20.320

imgurl* 已编辑 2012 年 11 月*5 日晚上 9:47 ET* *

这可能是它！我无法在小提琴中进行测试，因为我无法在小提琴中执行 window.send 功能。

[修订工作小提琴](http://jsfiddle.net/videsignz/SZF4Y/5/)

**jQuery**

```
var whichLi;

jQuery(document).ready(function() {

    $('.upload_button').click(function() {

       whichLi= $(this).parent('li');

       targetfield = $(this).prev('.logo_url');
        tb_show('', 'media-upload.php?type=image&amp;TB_iframe=true');

        window.send_to_editor = function(html) {

            imgurl = $('img', html).attr('src');
            jQuery(targetfield).val(imgurl);
            tb_remove();

            $(whichLi).find('img').attr('src', imgurl);
            $('#submit_options_form').trigger('click');
        };

        return false;

    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T02:51:11.917

经过大量的反复试验，这就是我最终得到的结果，就像我想要的那样。我感谢大家的帮助和回答。

```
jQuery(document).ready(function($) { 
$('.upload_button').click(function() {
     targetfield = $(this).prev('.logo_url');
     imgpreview = $(this).parent().find('img');
     tb_show('', 'media-upload.php?type=image&amp;TB_iframe=true');
window.send_to_editor = function(html) {
     imgurl = $('img',html).attr('src');
     jQuery(targetfield).val(imgurl);
     tb_remove();
     $(imgpreview).attr('src', imgurl);
     $('#submit_options_form').trigger('click');
};
return false;
});
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T00:22:15.500

`:first`选择器做的工作：

```
$('.upload_preview:first img').attr('src', imgurl); 
```

# objective-c - Objective C，为什么要在接口中声明方法

> ID：13242575
> 
> 赞同：1
> 
> 时间：2012-11-06T00:21:02.943
> 
> 标签：objective-c

我刚刚开始阅读我的第一本 Objective-C 书，而且大部分内容都很清楚，但是我想了解为什么它教我首先在接口中声明一个方法，我尝试从接口中删除它并在实现中执行它部分和所有似乎都有效，所以我的问题是它是否重要，如果是，这有助于完成什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T00:22:45.127

它是 C。在头文件中声明函数/方法允许其他编译单元查看您的函数原型并基于它们进行编译。不过，Objective-C 是通过动态调度工作的，因此即使您没有在标头中声明方法，它仍然存在于运行时。当您调用一个方法时，它会在运行时解析，因此它是否在标头中并不重要。

唯一的问题是，如果您不在标头中包含该方法，编译器必须对返回和参数类型做出假设。它默认`id`为 4 或 8 个字节，具体取决于您的架构，因此如果实际返回类型的大小不同（例如结构`BOOL`等），您将遇到麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T00:23:03.540

您必须在接口（标头）中声明您的方法以使其公开（可由/从其他类访问）。如果您仅在类内部使用方法，则不必在接口中声明它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T00:26:52.357

Objective-C 是一种高度动态的语言（和运行时），它尽可能推迟决策。

代码运行良好，因为在运行时对象确实响应了您指定的选择器。

但是，通过声明方法，您可以帮助 Objective-C 编译器帮助您检查在运行时不会遇到任何意外情况。

例如，参加以下课程：

```
@interface MDFoo : NSObject
- (void)blah;
@end

@implementation MDFoo

- (void)blah {
    NSLog(@"[%@ %@]", NSStringFromClass([self class]), NSStringFromSelector(_cmd));
}

- (void)boo {
    NSLog(@"[%@ %@]", NSStringFromClass([self class]), NSStringFromSelector(_cmd));
}

@end 
```

假设在另一个控制器类中，您创建了一个实例`MDFoo`并希望向它发送一些消息。

```
MDFoo *foo = [[MDFoo alloc] init];
[foo blah];
[foo boo]; // compiler warning
[foo yell]; // compiler warning 
```

当你编译程序时，编译器应该给你一个警告，最后两个方法都找不到，并且一个实例`MDFoo`可能不会响应这些选择器。

如果您随后运行该程序，则会记录以下内容：

```
foo[10540:303] [MDFoo blah]
foo[10540:303] [MDFoo boo]
foo[10540:303] -[MDFoo yell]: unrecognized selector sent to instance 0x1001082f0
foo[10540:303] *** Terminating app due to uncaught exception
            'NSInvalidArgumentException', reason: '-[MDFoo yell]:
                 unrecognized selector sent to instance 0x1001082f0' 
```

所以在运行时，关于警告的`boo`结果是什么都没有，但是关于警告`yell`是正确的，并导致应用程序终止。

从设计的角度来看，这也是让其他对象知道可以调用哪些消息的方式。（请参阅[Objective-C 编程语言：定义类 - 接口的角色](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocDefiningClasses.html#//apple_ref/doc/uid/TP30001163-CH12-TPXREF125)）。

# kinect - 如何在 CodeBlocks 或 Geany 中集成 OpenNI、NITE 库

> ID：13242576
> 
> 赞同：0
> 
> 时间：2012-11-06T00:21:04.603
> 
> 标签：kinect, codeblocks, openni, geany

我今天在 ubuntu 12.10 上安装了 OpenNI+NITE+kinect，样本运行良好。（运行 NITE 样本，它们像魅力一样工作）

我想开始在 Linux 中开发，我喜欢使用 IDE。对于 ubuntu，我一直使用 Geany 或 Codeblocks，我想知道是否有办法将 OpenNI、NITE 库集成到 IDE 中，以便我可以从 IDE 本身轻松编写、执行、调试代码。

我尝试自己在 geany 中添加库，但我所有的尝试都失败了。：/

此外，当我`make`为 OpenNI 中的示例示例执行操作时，我得到 *.d 和 *.o 文件，但我似乎没有得到可执行文件 *.out 。所以我不确定如何运行这些程序。

我是新手程序员，刚开始学习，所以请原谅菜鸟的问题。

感谢帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T04:43:47.490

通常，如果您使用 Geany 做一些重要的事情，您将需要提供自己的构建系统（即使是简单的 GNU Make 文件也可以）。[Geany 有意构建系统不可知论，并允许您运行手册](http://www.geany.org/manual/current/index.html#global-tags)中描述的任意构建命令以及[wiki 上](https://wiki.geany.org/howtos/configurebuildmenu)的有用文章。

如果您更详细地描述您称为“尝试失败”的错误/问题，则可能会提供更具体的解决方案。

# php - 使用 xpath 查找节点

> ID：13242580
> 
> 赞同：1
> 
> 时间：2012-11-06T00:21:30.490
> 
> 标签：php, xml, xpath, find

我想解析 google geocode api 响应，但结果的结构并不总是相同的。例如，我需要知道邮政编码，但它有时在`Locality/DependentLocality/PostalCode/PostalCodeNumber`节点中，有时在`Locality/PostalCode/PostalCodeNumber`节点中。我真的不知道这背后的逻辑，只想获取`PostalCodeNumber`节点的值，不管它到底在哪里。我可以用 XPath 做吗？如果是这样，怎么做？

**更新**

尝试过，`//PostalCodeNumber`但它返回一个空数组。代码片段如下：

```
$xml = new \SimpleXMLElement($response);
var_dump($xml->xpath('//PostalCodeNumber')); 
```

这`$response`是[http://maps.google.com/maps/geo?q=1055+Budapest&output=xml](http://maps.google.com/maps/geo?q=1055+Budapest&output=xml)的内容 （复制粘贴网址而不是点击它，因为一些字符问题...）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T00:28:03.050

尝试使用这个 XPath：

```
Locality//PostalCodeNumber 
```

它将找到元素的所有后代`PostalCodeNumber`。`Locality`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T00:36:25.423

```
//PostalCode/PostalCodeNumber 
```

应该做的伎俩。快速谷歌搜索产生以下[架构片段](http://schemas.stylusstudio.com/eml4/n2b3d787d/element_Locality.html)，表明可能存在多个嵌套的 DependentLocality 元素，因此您需要检查多个结果，并了解您是否想要最具体（嵌套最深）或最少具体的。

**更新：** 为了防止命名空间问题，将命名空间显式添加到查询中：

```
$xml = new SimpleXMLElement($response);
$xpath->registerXPathNamespace('ns', 'urn:oasis:names:tc:ciq:xsdschema:xAL:2.0');
var_dump($xml->xpath('//ns:PostalCodeNumber')); 
```

更新 2：修正了几个错别字

更新 3：

```
 <?php 
$result = file_get_contents('http://maps.google.com/maps/geo?q=1055+Budapest&output=xml');
$sxe = new SimpleXMLElement($result);
$sxe->registerXPathNamespace('c', 'urn:oasis:names:tc:ciq:xsdschema:xAL:2.0');
$search = $sxe->xpath('//c:PostalCodeNumber');
foreach($search as $code) {
  echo $code;
}
?> 
```

# c++ - 从天数计算日期？

> ID：13242583
> 
> 赞同：1
> 
> 时间：2012-11-06T00:21:45.523
> 
> 标签：c++

如何从 C++ 中的天数计算日期？我不需要您编写整个代码，我只是无法计算出计算月份和日期的数学方法！

例子：

```
input: 1
output: 01/01/2012

input: 10
output: 01/10/2012

input: 365
output: 12/31/2012 
```

它总是使用当前年份，如果超过 365，我会返回 0。不需要闰年检测。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T00:25:15.000

使用日期计算库，例如精细的[Boost Date_Time](http://www.boost.org/doc/libs/1_51_0/doc/html/date_time)库

```
using namespace boost::gregorian;
date d(2012,Jan,1);                     // or one of the other constructors
date d2 = d + days(365);                // or your other offsets 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T00:32:55.553

使用标准库甚至不是很困难。如果我像 C 程序员一样编写 C++ 代码，请见谅（C++`<ctime>`没有可重入`gmtime`函数）：

```
#include <time.h>
#include <cstdio>

int main(int argc, char *argv[])
{
    tm t;
    int daynum = 10;

    time_t now = time(NULL);
    gmtime_r(&now, &t);
    t.tm_sec = 0;
    t.tm_min = 0;
    t.tm_hour = 0;
    t.tm_mday = 1;
    t.tm_mon = 1;
    time_t ref = mktime(&t);
    time_t day = ref + (daynum - 1) * 86400;
    gmtime_r(&day, &t);
    std::printf("%02d/%02d/%04d\n", t.tm_mon, t.tm_mday, 1900 + t.tm_year);

    return 0;
} 
```

*抱歉，如果没有*闰年检测，我不知道如何做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T00:53:19.117

一个程序的简单**片段**，假设一年有 365 天：

```
int input, day, month = 0, months[13] = {0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334, 365};

while (input > 365) {
    // Parse the input to be less than or equal to 365
    input -= 365;
}

while (months[month] < input) {
    // Figure out the correct month.
    month++;
}

// Get the day thanks to the months array
day = input - months[month - 1]; 
```

# ruby-on-rails - 模型和测试中的验证方法之间的错误：单元断言结果

> ID：13242587
> 
> 赞同：2
> 
> 时间：2012-11-06T00:21:59.827
> 
> 标签：ruby-on-rails, ruby, unit-testing, testing, tdd

Ruby Noob - 我搜索过 SO，阅读[Rails Guide on Testing](http://guides.rubyonrails.org/testing.html)并观看了[RailsCast](http://railscasts.com/episodes/275-how-i-test)，但运气不佳。

我无法协调方法关联与我编写的测试。目前（下面的代码），两个测试，一个检查姓名的存在和一个检查电子邮件的存在，没有失败或错误地通过——好的，看起来不错。

如果我从模型中删除两个 validates 语句，那么两个测试都会失败——这也是有道理的。

但是，如果我只删除其中**一个**

```
validates :name, :presence => true 
```

**或者**

```
validates :email, :presence => true 
```

从模型来看，**两个**测试都通过了，没有失败。这个结果对我来说没有意义。我是否创建了错误的测试？

* * *

user.rb 模型：

```
class User < ActiveRecord::Base
  attr_accessible :email, :name 

  has_many :connections

  validates :name, :presence => true
  validates :email, :presence => true
end 
```

测试/单元/user_test.rb

```
require 'test_helper'

class UserTest < ActiveSupport::TestCase
  test "a user should have a name" do
    user = User.new
    assert !user.save
  end

  test "a user should have an email" do
    user = User.new
    assert !user.save
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:32:49.930

是的，您创建了错误的测试。在任何测试中，您只需要测试一个前提，因为在**用户应该拥有名称**的情况下，只要用户验证名称的存在。

首先让我们来看看为什么这两个测试在你的第三种情况下都通过了，因为模型中只有一个 validates 语句。

你的测试代码，

```
   用户 = User.new
   断言！user.save

```

所以如果你有`validates :name, :presence => true`或者`validates :email, :presence => true`

`user.save` 将返回 false，用户对象将不会保存，因为存在的任何验证都会生效。

您可能想要更改测试以检查**名称上的错误**。

```
用户 = User.new
 断言！user.save
 断言！user.errors.get(:email).blank？

```

```
用户 = User.new
 断言！user.save
 断言！user.errors.get(:name).blank？

```

您可能还想看看[https://github.com/thoughtbot/shoulda](https://github.com/thoughtbot/shoulda)，有助于使编写测试更容易:)

# c# - 将泛型指针传递给 C# 中的方法

> ID：13242588
> 
> 赞同：2
> 
> 时间：2012-11-06T00:22:03.697
> 
> 标签：c#, generics, pointers

我创建了一个泛型类型来充当指针，以便我可以通过引用传递。（也许有一种更简单的方法可以做到这一点，但我想强调我这样做是为了了解更多关于泛型和通过引用传递的信息，如果这有意义的话，这不是完成任务的最有效方式。）

这是我为泛型类型编写的代码

```
class GenericPointer<T> {
    public T item;
    public void setItem(T i){ item = i; }
    public T getItem(){ return item; }
} 
```

在我的程序中，我创建了一个名为“intPointer”的此类实例。值 143 是任意的。

```
GenericPointer<int> intPointer = new GenericPointer<int>();
intPointer.setItem(143);
Console.WriteLine(intPointer.getItem()); 
```

上述代码运行正常，设置并返回值 143。

我现在想将此“intPointer”传递给一个递增它的方法，然后再次打印该值。

所以我写了一个方法叫 addone()

```
public void addone(int i) { i ++; } 
```

现在我想进行以下调用（记住我已经将值设置为 143）：

```
Console.WriteLine(intPointer.getItem());
addone(intPointer);
Console.WriteLine(intPointer.getItem()); 
```

我期望看到的是 143 然后是 144 但是我收到以下错误：

```
The best overloaded method match for 'Notes.Program.addone(int)' has some invalid arguments 
```

和：

```
cannot convert from 'Notes.GenericPointer<int>' to 'int' 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T00:26:37.277

我将首先更正您的一些术语：您没有使用指针。C# 确实支持指针，但使用`unsafe`关键字，它们是真正的指针（例如，您可以直接操作的整数内存地址）。您编写的代码只是一个装箱对象的示例。

.NET 已经支持装箱，通过转换为`Object`; 但是，不建议也不需要这样做，因为该`ref`关键字解决了您尝试“修复”的问题。

使用`ref`关键字来描述一个值类型的参数，该参数应该按引用而不是按值传递。所有其他语义保持不变，如下所示：

```
void Foo() {
    int x = 123;
    Bar(ref x);
    Console.Write( x ); // prints "124".
}
void Bar(ref int x) {
    x++;
} 
```

我还有一些其他注意事项：

1.  C# 和 .NET 约定规定所有公共成员（方法、属性、字段等）都应该有 TitleCase，而不是 camelCase（即确保第一个字母大写）。
2.  不鼓励使用琐碎的 getter 和 setter 方法，而是使用 Properties（尽管我注意到您不能将`ref`参数与属性一起使用）。
3.  你得到你的错误是因为类型`intPointer`不是`int`，而是你的类`GenericPointer<int>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T00:34:40.150

虽然 GenericPointer 包装了一个 int，但它实际上并不是一个 int，因此不能将其视为一个。它具有 int 属性。

想象一下，如果 GenericPointer 包装了一个字符串。AddOne 会对此做什么。

您可以对类的属性进行操作，但不能将整个类视为其泛型类型。

可以编写一个 AddOne 方法，该方法接受一个 Generic Pointer 参数，然后检查它的 intyness，如果它是 int，则将其添加到内部项。我确信这不是一个好主意。

你真正想用这个 GenericPointer 实现什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T00:28:41.207

如果您希望参数是值类型（字符串、int、bool 等）时被引用，则将您的参数设置为：

```
public void addone(ref int i)
{
    i++;
} 
```

然后像这样调用方法：

```
addone(ref variableInt); 
```

您还可以查看[此](http://msdn.microsoft.com/en-us/library/z5z9kes2%28v=vs.110%29.aspx)内容以了解如何使您的类作为特定类型工作。

# javascript - 谷歌地图 v3 地理编码。多个最近的地址

> ID：13242603
> 
> 赞同：1
> 
> 时间：2012-11-06T00:23:11.223
> 
> 标签：javascript, google-maps-api-3

我正在尝试对 Lat/Lng 进行反向地理编码并获取最近的街道地址。然而，这并不总是完全准确的。我需要知道是否有可能获得不止一个近街道地址。

这是我所拥有的，它只给出一个完整的街道地址结果。

```
function locationizer(position){
    latitude = position.coords.latitude;
    longitude = position.coords.longitude;
    latlng = new google.maps.LatLng(latitude,longitude);

    map = new google.maps.Map(document.getElementById('map'), {
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: latlng,
      zoom: 15
    });

    var request = {
        address: latlng,
        radius: '100',
        types: ['street_address']
      };

      geocoder.geocode({'latLng': latlng}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        if (results[1]) {
          map.setZoom(11);
          console.log(results);

          for(var loc in results){
              $("#output").append(results[loc].formatted_address+"<br />");

        }
      } else {
        alert("Geocoder failed due to: " + status);
      }
    });
} 
```

示例输出

```
100 S High St, New Albany, OH 43054, USA
New Albany, OH, USA
Plain, OH, USA
New Albany, OH 43054, USA
Franklin, OH, USA
Ohio, USA
United States 
```

# javascript - 字符串的正则表达式以获取客户 ID

> ID：13242604
> 
> 赞同：-1
> 
> 时间：2012-11-06T00:23:18.070
> 
> 标签：javascript, jquery

我正在字符串中查找单词 customerID 编号。客户 ID 将采用这种格式`customerID{id}` ，因此请查看我将拥有的一些不同的字符串

```
 myVar = "id: 1928763783.Customer Email: test@test.com.Customer Name:John Smith.CustomerID #123456.";
 myVar = "id: 192783.Customer Email: test1@test.com.Customer Name:Rose Vil.CustomerID #193474.";
 myVar = "id: 84374398.Customer Email: test2@test.com.Customer Name:James Yuem."; 
```

理想情况下，我希望能够检查 CustomerID 是否存在。如果它确实存在，那么我想看看它是什么。我知道我们可以使用正则表达式，但不确定看起来如何谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T00:28:58.577

```
var match = myVar.match(/CustomerID #(\d+)/);
if (match) id = match[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T00:35:46.410

我不是 100% 熟悉语法，但我会说：“(CustomerID #([0-9]+).)”

我认为这是您要查找的有效正则表达式，它将检查字符串是否具有“CustomerID”后跟空格、数字符号和数字序列。通过用括号包围数字，如果发现某些东西，可以通过引用括号 2 来捕获它们

我不确定括号或句点在这种语法中是否需要在它们之前添加一个 \ 。抱歉，我无法提供更多帮助，但我希望这在某种程度上有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T00:37:38.157

玩弄它来满足您的需求：

```
// case-insensitive regular expression (i indicates case-insensitive match)
// that looks for one of more spaces after customerid (if you want zero or more spaces, change + to *)
// optional # character (remove ? if you don't want optional)
// one or more digits thereafter, (you can specify how long of an id to expect with by replacing + with {length} or {min, max})
var regex = /CustomerID\s+#?(\d+)/i;
var myVar1 = "id: 1928763783.Customer Email: test@test.com.Customer Name:John Smith.CustomerID #123456.";
var match = myVar1.match(regex);
if(match) { // if no match, this will be null
    console.log(match[1]); // match[0] is the full string, you want the second item in the array for your first group
} 
```

# php - 在 PHP 中使用变量输出 MySQL 列值

> ID：13242609
> 
> 赞同：0
> 
> 时间：2012-11-06T00:23:42.783
> 
> 标签：php, mysql

```
$tag = 6;   
$user_checkn = db_query("SELECT ".$tag." FROM advent_user_check WHERE uid=".$_SESSION ['uid']." LIMIT 1");  
$user_check = mysql_fetch_array($user_checkn);
echo $user_check[$tag]; 
```

这输出 6 而不是 0 的 db 值。为什么？

**更新**

想通了：列名周围的反引号丢失了：

```
$user_checkn = db_query("SELECT `".$tag."` FROM advent_user_check WHERE uid=".$_SESSION ['uid']." LIMIT 1"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:24:55.380

$tag 不是数据库中的名称。在您的代码中，$tag 是 6，所以它会打印出来。列名是什么？你基本上是在说`SELECT 6 FROM advent_user_check WHERE uid=....`

# drupal - Drupal为视频流创建下载链接？

> ID：13242612
> 
> 赞同：2
> 
> 时间：2012-11-06T00:24:17.687
> 
> 标签：drupal, drupal-7, drupal-modules

使用 Drupal 7 和 MediaFront，如何为当前正在观看的视频创建下载链接？如果我还想以 MP3 格式提供视频的音频怎么办？（将与视频一起上传的内容，因此无需转换）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T15:49:21.497

您是否尝试过[https://drupal.org/project/file_force](https://drupal.org/project/file_force)？我没用过，但看起来很有希望。

或者您可以尝试将Content-Disposition 标头设置为附件的[file_transfer() 。](https://api.drupal.org/api/drupal/includes!file.inc/function/file_transfer/7)

# java - rich:calendar defaultLabel 属性导致转换错误

> ID：13242613
> 
> 赞同：0
> 
> 时间：2012-11-06T00:24:19.277
> 
> 标签：java, jsf, richfaces

使用 Rich Faces 日历组件的 defaultLabel 属性可以正确显示日期格式的提醒文本，就像我希望的那样。但是，当此提醒文本位于可选字段上时，就会出现转换错误，就像它试图将提醒文本转换为日期一样。

```
<rich:calendar enableManualInput="true" value="#{participantSummaryManagedBean.dob}"
    id="dob" locale="US" popup="true" datePattern="MMddyyyy" defaultLabel="MMDDYYYY"
    showApplyButton="false" converterMessage="Use MMDDYYYY format">
</rich:calendar> 
```

在 RichFaces 版本 4.2.2.Final、4.2.3.Final 和 4.3.0.20121024-M2 中确认

有没有办法防止或解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T17:24:39.803

这是 Richfaces 中的一个缺陷 (https://issues.jboss.org/browse/RF-12594)。但是，从 4.3 开始（特别是 4.3.0.20121214-M3 开始）， defaultLabel 已被弃用并由 tag 代替`rich:placeholder`。例如：

```
<rich:calendar value="#{bean.dob}" id="dob" popup="true" datePattern="MMddyyyy" converterMessage="Use MMDDYYYY format" enableManualInput="true">
  <rich:placeholder value="MMDDYYYY" />
</rich:calendar> 
```

# command-line - 我想在系统 shell 中运行一个命令，然后用命令输入提示响应我正在运行的程序？

> ID：13242615
> 
> 赞同：0
> 
> 时间：2012-11-06T00:24:44.033
> 
> 标签：command-line, python-3.x

我在尝试着

1.  向终端发送命令

2.  在 Python 中响应程序的输入提示。

我怎样才能做到这一点？我知道如何使用 subprocess.check_output 来获得回报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T01:09:54.977

如果您在文件中有输入，通常`<`符号就可以了。

```
./executable < inputsfile 
```

# c - 逐行读取文件以获取整数

> ID：13242620
> 
> 赞同：0
> 
> 时间：2012-11-06T00:24:56.187
> 
> 标签：c

我只想从文件中输出 3 个整数。为什么这不起作用？我得到 -1079184140 和类似的。

```
int main(int argc, char *argv[]) 
{

   FILE* stream  = fopen(argv[2], "r");

   char line[80];

  for (int i = 0; i < 3; i++)
  {
    fgets(line, 80, stream);
    printf("%d \n", line);
  } 

  fclose(streamForInput);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T00:33:00.703

我会使用[sscanf](http://www.cplusplus.com/reference/clibrary/cstdio/sscanf/)。

```
int number;
sscanf (line, "%d", &number);
printf ("%d \n", number); 
```

这将拉出一行中的第一个整数。这不是最安全或最稳健的方式，但超出了范围。

PS：

```
fclose(streamForInput); 
```

应该：

```
fclose(stream); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T00:38:16.833

唔。第一个问题是：

```
 printf("%d \n", line); 
```

因为 line 是一个 char[]。但是你使用 %d 来输出它，所以你输出行，它是一个地址。所以 printf 打印行的地址......而不是你可以使用 printf ("%d", atoi(line));

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T00:35:55.920

要打印*字符串*，即`line`使用`%s`：

```
printf("%s \n", line); 
```

现在，如果它真的是一个整数，你可以使用`%d`：

```
int num = atoi(line);
printf("%d \n", num ); 
```

您所看到的是将指针类型（C 中的字符串基本上是这样的）视为整数类型的结果。由于指针保存内存地址，-1079184140 是指针保存的实际地址，表示为 32 位有符号整数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T00:46:48.390

如果您确切知道文件的内容（三个数字用空格分隔），为什么不直接读取呢？

```
if (fscanf(stream, "%d%d%d", &foo, &bar, &baz) < 3)
    // handle error

printf("%d\n%d\n%d\n", foo, bar, baz); 
```

但是，如果您想阅读台词，那么已经有其他很好的答案了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-25T15:57:52.207

逐行读取文件中的整数

```
 void read_file(char *filename, int *readbuff, int size)
   {
       FILE *fp = fopen(filename,"r");
       if(fp == NULL){
          printf("Failed to open file %s \n", filename);
          return;
       }

       /*the condition in for loop checks if the integer was read into
        readbuff[i] and the readbuff is not overflown*/
       for(int i = 0 ; fscanf(fp,"%d\n",&readbuff[i]) == 1  && i < size; ++i);

       fclose(fp);
       return;
   } 
```

# textarea - php textarea保存如图

> ID：13242633
> 
> 赞同：0
> 
> 时间：2012-11-06T00:26:08.760
> 
> 标签：textarea

当文本到达结束窗口时，textarea 会自动换行。将文本保存在 *.txt 我存储在一行中。如何以我看到的形式保存文本？如果在php中？

```
enter code here
if(isset($_POST['submit'])){
//narredi file
$ourFileName = "baza/$file1.txt";
$ourFileHandle = fopen($ourFileName, 'w') or die("can't open file");
fclose($ourFileHandle);
//konec naredi

//shrani besedilo
$area=$_REQUEST['area'];

        //$area12 = explode(" ", $area);
        //$area12 = str_replace('\n', '<br />', $area); 
```

$text = trim($_POST['area']); // 删除最后一个 \n 或空白字符 $text = nl2br($text);

```
$loadcontent = "baza/$file1.txt";
$fd=fopen("$loadcontent", "w+") or die("can't open file");
fwrite($fd,$text);
fclose($fd);
$file_contents=file_get_contents("baza/$file1.txt");

<textarea name="area" id="Data" wrap="on" cols=100 rows=5 >
test
testttt
testt</textarea>
<br>
<input type="submit" name="submit"  value="Objavi" /> 
```

我已经定义了文本区域大小（css），当我写更长的可见窗口的文本时，它会创建一个可见的新行，实际上是一行。我想要两行或更多....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:41:43.933

***对我来说太好了***

```
$vrst = explode("\n", $loadcontent1);
$vrst1 = count($vrst);                        
$a = 0;
StartOfLoop: 
$lines = array_slice(explode("\n", $loadcontent1), "$a", 1);
$stevil = strlen($loadcontent1); 
$stevilo = $stevil / 88;
$stringpred = implode("\n", $lines);
$trimmed1 = strlen($stringpred);
        $vrstic = $trimmed1/88+1;
if (88 > $trimmed1) goto pogojzavec;
 foreach ($lines as $key => $value)
{
$a=0;
do
  {
$lines[$key] = substr(trim($value), "$a", "88+$a");
$string = implode("\n", $lines);
$stringg11 = $string;
$stringg2 = "$stringg2\n$stringg11";
$a =$a +88;
  }
while ($a<=$trimmed1);
        }
goto preskok;
pogojzavec:
 foreach ($lines as $key => $value)
{
   $lines[$key] = substr(trim($value), 0, 88);
}
$string = implode("\n", $lines);
$stringg11 = $string;
$stringg2 = "$stringg2\n$stringg11";
preskok:
      $a = $a + 1;
  if($a < $vrst1)  goto StartOfLoop; 
```

# inno-setup - inno setup % 百分比进度条

> ID：13242637
> 
> 赞同：0
> 
> 时间：2012-11-06T00:26:32.447
> 
> 标签：inno-setup

任何人都知道如何将进度条的百分比放在进度条下方

例如：在 photoshop inno setup 5.5.1-unicode+Script ISDone 0.6 中编辑的图像谢谢

![在此处输入图像描述](../Images/f1dd4f768c2c7013549a3a5b429560e5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:38:40.670

如果您想在*安装* [向导页面](http://www.jrsoftware.org/ishelp/index.php?topic=wizardpages)上放置百分比标签，那么我认为这是不可能的。但是您可以使用[CreateOutputProgressPage](http://www.jrsoftware.org/ishelp/topic_isxfunc_createoutputprogresspage.htm)来控制进度条，并且可以通过 Pascal 脚本添加百分比标签。

```
[Code]
procedure InitializeWizard();
var
  Page: TOutputProgressWizardPage;
  PercentLabel: TLabel;
begin
  Page := CreateOutputProgressPage('Caption', 'Description');
  Page.ProgressBar.Show;
  PercentLabel := TLabel.Create(Page);
  PercentLabel.Top := Page.ProgressBar.Top + 20;
  PercentLabel.Caption := '0%';
  ...
end; 
```

另请阅读此问题：[Inno Setup Simple progress page for Run section](https://stackoverflow.com/q/6921254/256544)。它演示了如何控制进度。

# java - 通过socket-framework连接手机和电脑

> ID：13242641
> 
> 赞同：2
> 
> 时间：2012-11-06T00:26:57.363
> 
> 标签：java, networking, serversocket

我想把我的手机变成一个遥控器，它可以向我的电脑发送命令。我看过 Socket 框架，它看起来很有希望。假设我的电脑站在家里，通过路由器连接到我的 wifi，我的手机连接到 3G，而我在城里跑来跑去。那么是否可以将两者连接起来？如果是，我需要从手机连接到哪个 IP 地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:49:37.170

是的，它可以完成。您必须连接到您的外部 IP 地址（只是谷歌“我的 IP”）和您选择的端口号，打开路由器防火墙上的端口并将端口重定向到本地计算机上的端口IP 地址 - 我无能为力，因为如何做到这一点取决于路由器。

您可以使用 no-ip.com 等免费服务来获得免费域名，这样您就不必在 IP 发生变化时跟踪它。

# wpf - wpf 在后端通知更改的数据

> ID：13242645
> 
> 赞同：1
> 
> 时间：2012-11-06T00:27:38.773
> 
> 标签：wpf, client-server, wcf-client, business-objects

我目前正在开发一个客户端服务器应用程序并使用 WCF 接口进行通信。通过这个接口，我得到了我的业务对象。我正在使用 MVVM。

用户可以在客户端中进行更改（例如通过文本框）。稍后我想将对象发送回服务器，服务器将决定是否需要保存对象，或者是否应该忽略它，因为进行了 noch 更改。

我现在正在寻找一种方法来“标记”业务对象，以便服务器可以做出决定。有没有一个想法我怎么能做到这一点？？？或者更好的是有人知道教程吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:26:57.847

您正在尝试做的事情已经在[Entity Framework Self Tracking Entities](http://msdn.microsoft.com/en-us/library/vstudio/ff407090%28v=vs.100%29.aspx)中实现。我不知道您是否在后端使用 EF 作为 ORM，不过，您可以使用 STE T4 模板中的一些代码来实现您自己的更改跟踪逻辑。

# c# - 仅针对 Note On 解析 MIDI 文件

> ID：13242646
> 
> 赞同：3
> 
> 时间：2012-11-06T00:27:55.547
> 
> 标签：c#, .net, parsing, midi

我一直在试图弄清楚 MIDI 解析的神秘领域，但我没有运气。我要做的就是按照它们发生的顺序获取音符值（ `60`= C4， = C5 等）。`72`

我的代码如下。它所做的只是非常简单地以字节数组的形式打开一个文件，然后以十六进制读取所有内容：

```
byte[] MIDI = File.ReadAllBytes("TestMIDI.mid");
foreach (var element in MIDI) {
    string b = Convert.ToString(element,16);
    Debug.WriteLine(b);
} 
```

所有 TestMIDI.mid 包含的是 C5 上的一个音符。 [这是它的十六进制转储](http://pastebin.com/yVcNACGw)。使用[此信息](http://www.sonicspot.com/guide/midifiles.html)，我试图找到 Note On (`0x9`或只是`9`在转储中) 的简单十六进制值，但没有任何值。我可以找到一些`72`，但有 3 个，这对我来说没有任何意义（注意，注意，然后呢？）。

这是我第一次尝试将 MIDI 解析为文件并使用十六进制转储（他们甚至叫它吗？），所以如果我的方向完全错误，我很抱歉。 **我所需要的只是得到播放的音符，以及按什么顺序播放。我根本不需要时间或任何花哨的东西。** 这背后的原因（如果重要的话）是生成不同语言的新代码以在扬声器中播放，这与`beep`*nix 上的命令非常相似。正因为如此，我不想使用任何框架，1）我没有编程，真的没有学到任何东西，2）做的远远超过我需要的，使框架比我的实际代码更重.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T01:47:26.800

要做到这一点，您至少需要一个 MIDI 解析器的外观。搜索 0x9 事件是一个好的开始，但如果速度字段为 0，0x9 也是一个 Note-Off 事件。0x9 也可以出现在其他事件（元事件、MPQN 事件、增量时间等）中，所以你会得到误报。所以，你需要一些真正知道 MIDI 文件格式的东西才能准确地做到这一点。

寻找一个库，编写自己的库，或者移植一个开源库。如果你想看的话，[我的是 Java。](http://code.google.com/p/android-midi-lib/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-25T10:05:28.387

接受的答案不是问题的解决方案。它在一般情况下不起作用。我将提供此代码不起作用或失败的几种情况。这些案例的顺序对应于它们的概率——最可能的案例排在第一位。

*   **误报**。MIDI 文件包含许多数据结构，您可以在其中找到值为 144 的字节。这些结构不是 Note On 事件。对于真正的 MIDI 文件，您会得到一堆“音符”，它们不是音符，而是文件中的随机值。
*   **0 以外的频道**。大多数现代 MIDI 文件都包含几个*轨道块*。每个都保存特定 MIDI 通道（从 0 到 15）的事件。144（或十六进制的 90）表示通道 0 的 Note On 事件。因此您将错过很多其他通道的 Note On 事件。
*   **Running status**. MIDI files actively use concept of *running status*. This technique allows don't store status bytes of consecutive events of the same type. It means that status byte 144 can be written only once for the first Note On event and you will not find it further in the file.
*   **144 is the last byte in a file**. MIDI file can end with this value. For example if a custom chunk is the last chunk in the file or track chunk doesn't end with End of Track event (which is corruption according to MIDI file specification but possible scenario in real world). In this case you' ll get IndexOutOfRangeException on MIDI[i+1].

因此，您永远不应该搜索特定值来查找 MIDI 文件中的某些语义数据结构。您必须使用 Internet 上可用的 .NET 库之一。例如，对于[DryWetMIDI](https://github.com/melanchall/drywetmidi "干湿MIDI")，您可以使用以下代码：

```
IEnumerable<Note> notes = MidiFile.Read(filePath)
                                  .GetNotes(); 
```

# mysql - MySQL查询导致最大连接数

> ID：13242654
> 
> 赞同：0
> 
> 时间：2012-11-06T00:29:24.923
> 
> 标签：mysql, optimization, indexing

我每 30 秒对 MySQL 数据库运行一次以下查询：

```
SELECT message.id FROM message WHERE userto='13689' AND tstampviewed IS NULL AND message.status != 'VOID'; 
```

它经常出现在我的慢查询日志中，但在我看来，它已经尽可能地优化了。

解释的结果：

SELECT_TYPE = 简单

表 = 消息

类型 = 参考

POSSIBLE_KEYS = userto,tst,stat

KEY = 用户

KEY_LEN = 53

REF = 常量

行 = 1

EXTRA =“在哪里使用”

键 userto、tst 和 stat 都是普通的 BTREE 索引，一个对应于查询的 where 子句中引用的每个 varchar 字段。这是一个有 300K 行的 MyISAM 表。用户确实一致地写入表，但读取的可能性更大（读取与写入的比率为 10/1）。数据库服务器是具有大量 CPU 和快速驱动器的 Windows 2008 Enterprise。

在过去的一个月里，我们不断收到 max_connection 错误，即使我将 max_connections 从 750 增加到 1500。一天几次，查询似乎挂起（我无法验证这一点，因为我无权访问该进程实时列表），1500个查询堆积在它后面并最大化连接。这显然会导致许多其他问题。

上述查询始终出现在慢查询日志中，尽管我认为它已尽可能优化。任何人都可以告诉我或者指出我解决这个问题的正确方向吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T00:32:15.120

问题不在于查询 - 您正在打开与数据库的连接而不是关闭它，而是每次打开一个新连接。

# javascript - Typescript - 高阶函数类型

> ID：13242656
> 
> 赞同：23
> 
> 时间：2012-11-06T00:29:44.717
> 
> 标签：javascript, functional-programming, typescript, higher-order-functions

我对 TypeScript 感到非常兴奋。如何设置函数参数的类型？

```
function twoMoreThanYou(calculateANumber: Function):number {
    return calculateANumber(4) + 2;
}

function double(n:number):number {
    return n*2;
}

console.log("TWO MORE", twoMoreThanYou(double)) 
```

我怎样才能`calculateANumber`更好地打字？我想指定它必须是一个接受数字并返回数字的函数。

然后我可以为该类型制作一个“接口”或一些简写，以便我可以使我的高阶函数签名更具可读性吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-06T00:34:43.280

这两个都有效

```
interface NumberFunction extends Function {
    (n:number):number;
}

function twoMoreThanYou(calculateANumber: (n:number)=>number):number {
    ...
}

function twoMoreThanYou(calculateANumber: NumberFunction):number {
    ...
} 
```

# c# - 创建列表 > 来自各种列表 >

> ID：13242658
> 
> 赞同：2
> 
> 时间：2012-11-06T00:30:18.577
> 
> 标签：c#, list, generics, inheritance

在某些情况下-这是对先前问题的扩展。

[用 List<derivedClass> 覆盖 List<baseClass>](https://stackoverflow.com/questions/13105154/c-sharp-override-listbaseclass-with-listderivedclass)

反正，

我有一个通用基类“场景”

```
public class Scene<T> where T: SceneModel { } 
```

我还有两个继承自这个的类：

```
public class WorldScene : Scene<WorldModel> { }
public class BattleScene : Scene<BattleModel> { } 
```

现在我需要做的是拥有一个`List<Scene<SceneModel>>`包含 WorldScene 和 BattleScene 的混合物。在我需要列表的地方，我显然只需要使用 WorldScene 和 BattleScene 共有的属性/方法。

我知道它们是两个截然不同的对象-但鉴于它们继承自同一事物-我希望有一些巧妙的方法可以以这种方式对它们进行分组，而无需手动将它们转换为第三种类型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T00:46:03.257

如果 Scene<T> 的方法和属性允许，您可以定义一个[协变通用接口](http://msdn.microsoft.com/en-us/library/dd233059.aspx)IScene<out T> ，该接口实现了 Scene<T> ：

```
public interface IScene<out T> where T : SceneModel { }
    // use of T is limited to return values and out parameters

public class Scene<T> : IScene<T> where T : SceneModel { }

List<IScene<SceneModel>> list = new List<IScene<SceneModel>>();
list.Add(new WorldScene());
list.Add(new BattleScene());

foreach (IScene<SceneModel> scene in list) ... 
```

如果没有，您可以使用非泛型接口或非泛型基类，但不能在定义中包含泛型成员：

```
public interface IScene { }
    // no T

public class Scene<T> : IScene where T : SceneModel { }

List<IScene> list = new List<IScene>();
list.Add(new WorldScene());
list.Add(new BattleScene());

foreach (IScene scene in list) ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T00:48:52.363

问题是`WorldScene`and`BattleScene`不是从同一个公共类派生的：`Scene<WorldModel>`and`Scene<BattleModel>`是两个不同的类。

我将介绍一个基类 - 或一个接口 - 来声明您需要使用的功能：

```
public class Scene<T> : BaseScene where T: SceneModel { } 
```

然后将列表声明为`List<BaseScene>`

# html - 列出 HTML 画布中的唯一颜色

> ID：13242660
> 
> 赞同：6
> 
> 时间：2012-11-06T00:30:28.850
> 
> 标签：html, canvas

有没有一种有效的方法来获取当前在 HTML 画布中绘制的颜色列表？

我想正确的术语是当前复合材料的调色板

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T01:15:16.737

假设您有一个如下所示的 html 文档：

```
<canvas id="example" width="500" height="300"></canvas>
<ul id="list">
    <h3>Click the canvas to extract colors</h3>
</ul> 
```

我创建了一个小提琴，其中您有一个现成的画布，其中包含一些形状和颜色，当我们单击它时我们将处理它们。我不是为您创建颜色选择器，只是列出原始答案，应该作为实现第二部分的手段。

[这是小提琴](http://jsfiddle.net/pcZCP/)

提取颜色并列出它们的函数如下，我避免复制所有画布绘图内容，因为它仅用作示例并且不够通用。

```
var colorList = []; //This will hold all our colors 
function getColors(){
        var canvas      = document.getElementById('example');
        var context     = canvas.getContext('2d');
        var imageWidth  = canvas.width;
        var imageHeight = canvas.height;
        var imageData   = context.getImageData(0, 0, imageWidth, imageHeight);
        var data        = imageData.data;

        // quickly iterate over all pixels
        for(var i = 0, n = data.length; i < n; i += 4) {
           var r  = data[i];
           var g  = data[i + 1];
           var b  = data[i + 2];
           //If you need the alpha value it's data[i + 3]
           var hex = rgb2hex("rgb("+r+","+g+","+b+")");
           if ($.inArray(hex, colorList) == -1){
               $('#list').append("<li>"+hex+"</li>");
               colorList.push(hex);
           }
        }    
} 
```

这将产生一个结果，其中包含一个看似无序的十六进制值列表，这些值表示它们在图像中出现的顺序（因此“看似”），如果您想要一个颜色选择器，但是您可能需要考虑使用`colorList.sort();`which will order数组变成了黑白的方式。

请注意，我正在使用该`rgb2hex`函数将返回的值转换为我假设您想要的十六进制格式，如果您对 rgb 没问题，请随意不使用它，函数如下：

```
function rgb2hex(rgb) {
    rgb = rgb.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
    function hex(x) {
        return ("0" + parseInt(x).toString(16)).slice(-2);
    }
    return "#" + hex(rgb[1]) + hex(rgb[2]) + hex(rgb[3]);
} 
```

来源是[这个](https://stackoverflow.com/a/3627747/363262)，正如我在代码中的注释所说，如果需要，您也可以轻松提取 alpha 通道，但我选择了我能想到的最通用的场景（也是最简单的场景）。

# python - 无法使用 Rpy2

> ID：13242662
> 
> 赞同：0
> 
> 时间：2012-11-06T00:30:38.623
> 
> 标签：python, r, rpy2

为什么我尝试在 Python 中加载 Rpy2，解释器找到了该模块，但是一旦我尝试从中导入任何内容，它就会返回错误：

例如

```
import rpy2 # No errors, although it does not print anything 
```

但

```
import rpy2.robjects 
```

返回以下错误：

> /home/jimmy/.python_easy_install/rpy2-2.3.0beta1-py2.7-linux-x86_64.egg/rpy2/rinterface/_rinterface.so：未定义符号：Rf_translateCha rUTF8

* * *

我按照网站上的说明进行操作：

**1.**使用共享库选项安装 R：

```
# <go to the R source directory>
make distclean
./configure --enable-R-shlib
make
make install 
```

**2.**将此添加到我的`.bashhrc`：

```
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$RHOME/lib 
```

**3.**然后安装`rpy2`（`easy_install`我也试过`pip`）：

```
easy_install -d /home/jimmy/.python_easy_install rpy2 
```

为什么它不起作用？

这一切都在具有最新版本的`Rpy2`Linux`R`和`Python`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T01:17:09.487

这可能是因为在运行时选择了旧版本的 R。

我认为设置 LD_LIBRARY_PATH 的更好方法是：

```
export LD_LIBRARY_PATH=$RHOME/lib:$LD_LIBRARY_PATH 
```

# java - 从返回的接口投射？它总是安全的吗？

> ID：13242667
> 
> 赞同：0
> 
> 时间：2012-11-06T00:31:37.303
> 
> 标签：java, casting, type-safety

说我有这个功能：

```
public Set<String> giveUp()
{
    Set<String> alreadyGuessed = guessed;
    guessed = new LinkedSet<String>();

    //fill Guessed with possible words
    anag(currentWord, "");

    //Remove ones already guessed
    Iterator<String> alGuessIterator = alreadyGuessed.iterator();
    while (!alGuessIterator.done())
    {
        guessed.remove(alGuessIterator.get());
        alGuessIterator.advance();
    }

    return guessed;
} 
```

当我调用此函数并尝试使用以下行存储它时：

```
LinkedSet<String> notGuessed = (LinkedSet<String>)wordGame.giveUp(); 
```

不管上面函数的内部实现如何，这总是安全的吗？换句话说，不能Guessed 是一个ArraySet 并且它仍然保持一个完全安全的演员阵容吗？或者我是否误解了返回界面的意义，我只是应该有“Set notGuessed”来防止需要强制转换？

我的老师在课堂上的问题上毫无用处，如果我做任何不安全的铸造，也会立即给我0分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T00:34:45.487

那是不安全的，因为你不能确定底层的类型。如果您只需要访问`Set`接口定义的方法，那么您应该使用：

```
Set<String> set = wordGame.giveUp(); 
```

如果这恰好是`LinkedSet`您的代码将“工作”，但如果不是，您将获得一个`ClassCastException`. `LinkedSet`如果您出于某种原因需要它是一个特定的，那么该`giveUp()`方法应该`LinkedSet`显式地返回一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T00:34:34.887

`ClasscastException`不，除非返回类型与您正在转换的类型完全相同，否则您的转换将失败。

阅读这篇文章以了解[为什么编程到接口](https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T00:35:16.493

不，您将返回 Set 并转换为 LinkedSet。

如果你改变

```
Set<String> alreadyGuessed = guessed;
guessed = new LinkedSet<String>(); 
```

到

```
Set<String> alreadyGuessed = guessed;
guessed = new HashSet<String>(); 
```

你会有一个classcastexception。

链接集是集合，但集合不一定是链接集。除非您在代码中使用特定于 Linkedset 的方法，否则只需删除演员表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T00:35:50.273

对于仅在本地使用的事物，不使用全局字段会更好。在这种情况下，您应该`guessed`在本地声明，然后`anag`返回一些东西。

将事情保持在正确的范围内有时很烦人，但可以防止您在这里处理的确切类型的混乱。

至于你问的实际问题，让方法返回 a `LinkedSet`，那么你不必担心强制转换。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T00:36:30.757

返回接口引用类型的整个想法是所有用户都应该对它提供的方法感到满意，而不必担心底层实现。如果你必须投，你做错了。

# javascript - JQuery AutoComplete，手动选择第一个搜索的项目并绑定点击

> ID：13242669
> 
> 赞同：9
> 
> 时间：2012-11-06T00:32:12.333
> 
> 标签：javascript, jquery, jquery-autocomplete, jquery-ui-autocomplete

我想在自动完成中手动选择一个项目并在给定值的情况下单击它。

以下代码：

```
autocompleteitem.autocomplete("option", "autoFocus", true).autocomplete("search", autocompleteitem.val()); 
```

autocompleteitem 是一个输入对象，它包含我要搜索的值。现在这段代码成功地从下拉列表中选择了第一个项目，但它没有点击它。我不想自己单击它，我希望它以某种方式在该代码中发生。

我在上面的代码中尝试了以下添加但不起作用：

```
 .click(), .select(), .trigger('select'), .find('a').click(), .change() 
```

有什么办法可以做到吗？

谢谢

请有人帮忙

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-17T21:59:33.647

如果您查看 jQuery 团队在他们的自动完成[单元测试](https://github.com/jquery/jquery-ui/blob/master/tests/unit/autocomplete/autocomplete_core.js)中执行此操作的方式，他们会使用类似于以下代码的内容：

```
 var downKeyEvent = $.Event("keydown");
    downKeyEvent.keyCode = $.ui.keyCode.DOWN;  // event for pressing "down" key

    var enterKeyEvent = $.Event("keydown");
    enterKeyEvent.keyCode = $.ui.keyCode.ENTER;  // event for pressing "enter" key

    $("#autoComplete").val("item"); // enter text to trigger autocomplete
    $("#autoComplete").trigger(downKeyEvent);  // First downkey invokes search
    $("#autoComplete").trigger(downKeyEvent);  // Second downkey highlights first item
    $("#autoComplete").trigger(enterKeyEvent); // Enter key selects highlighted item 
```

这个[笨拙的](http://plnkr.co/edit/sxuvp1PdkLC4GKUoZkNS?p=preview)显示它工作

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-08T12:29:58.883

看看这个[jqFAQ.com](http://jqfaq.com/how-to-programmatically-pick-the-first-matching-option-for-a-value-and-set-it-in-the-autocomplete-textbox/)主题，这将帮助您以编程方式选择值的第一个匹配选项并将其设置到自动完成文本框中。也很少有其他与自动完成相关的常见问题解答，我认为这可能对您有用。

# objective-c - Objective-C XCode 4.5.2 UITableViewController 崩溃

> ID：13242679
> 
> 赞同：0
> 
> 时间：2012-11-06T00:33:17.720
> 
> 标签：objective-c, ios, xcode, uitableview

> **可能重复：**
> [带有 LLDB 的 Xcode 4.3 中出现奇怪的错误消息](https://stackoverflow.com/questions/9983192/weird-error-message-in-xcode-4-3-with-lldb)

在运行收到此错误后，我正在尝试解析 json 并定位到 UITableView：

```
Error [IRForTarget]: Couldn't find Objective-C indirect
ivar symbol OBJC_IVAR_$_UITableView._headerFooterNibMap 
```

调试，但我找不到任何可靠的修复。

编辑：

我跟踪了代码，发现它在 initWithNibName 方法上给了我错误

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
       self.title = NSLocalizedString(@tabBarTitle, @tabBarTitle);
       self.tabBarItem.image = [UIImage imageNamed:@tabBarIcon];
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T00:56:08.197

好的。谢谢大家的关注。

我只是`view`从 xib 文件中删除出口，然后添加一个`tableview`并委托它。然后重新编译代码，错误被删除。它现在工作正常。

# ruby - 无法在 Sinatra 应用程序中使用 Warden：env['warden'] 返回 nil

> ID：13242684
> 
> 赞同：2
> 
> 时间：2012-11-06T00:33:59.237
> 
> 标签：ruby, sinatra, rack, warden

我正在编写一个 Sinatra Rack 应用程序，我想使用 Warden 进行身份验证。我正在使用 heroku 的工具带，所以我使用工头来运行我的应用程序。我发现[了一些](https://gist.github.com/557436)可能应该让这个工作的代码。不幸的是，当我尝试实际访问 Warden env 对象时，它是 nil。

我尝试使用[sinatra_warden](https://github.com/jsmestad/sinatra_warden) gem，但它也有[自己的错误](https://github.com/jsmestad/sinatra_warden/issues/3)（可能与这个有关）。

配置.ru：

```
require './web.rb'
use Rack::Static, :urls => ["/css", "/img", "/js"], :root => "public"
run MyApp 
```

网络.rb：

```
require 'sinatra'
require 'warden'
require 'data_mapper'

require './config/datamapper.rb'
require './config/warden.rb' # I've tried this inside of MyApp, still didn't work

class MyApp < Sinatra::Base

  get '/test' do
    env['warden'].authenticate! # env['warden'] is nil :(
  end

end 
```

配置/warden.rb：

```
use Rack::Session::Cookie, :secret => ENV['SESSION_SECRET']

use Warden::Manager do |manager|
  manager.default_strategies :password
  manager.failure_app = MyApp.new
end

Warden::Manager.serialize_into_session { |user| user.id }
Warden::Manager.serialize_from_session { |id| User.get(id) }

Warden::Manager.before_failure do |env,opts|
  # Sinatra is very sensitive to the request method
  # since authentication could fail on any type of method, we need
  # to set it for the failure app so it is routed to the correct block
  env['REQUEST_METHOD'] = "POST"
end

Warden::Strategies.add(:password) do
  def valid?
    params["email"] || params["password"]
  end

  def authenticate!
    u = User.authenticate(params["email"], params["password"])
    u.nil? ? fail!("Could not log in") : success!(u)
  end
end 
```

版本：

*   西纳特拉：1.1.0
*   典狱长：1.2.1
*   机架：1.4.1
*   红宝石：1.9.3p194
*   工头：0.60.0

任何想法如何使用我描述的设置的守望者？

（PS出于好奇，env变量到底是什么？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T03:49:45.810

Rack 在内部使用类[Rack::Builder](https://github.com/chneukirchen/rack/blob/master/lib/rack/builder.rb)来解析您的 config.ru 文件并包装指令以构建中间件组件。

我相信您的构建器调用被忽略了`use`。`config/warden.rb`从该文件中删除指令并将它们添加到中间件堆栈中可能会起作用`config.ru`：

```
require './web.rb'

use Rack::Session::Cookie, :secret => ENV['SESSION_SECRET']

use Warden::Manager do |manager|
  manager.default_strategies :password
  manager.failure_app = MyApp.new
end

use Rack::Static, :urls => ["/css", "/img", "/js"], :root => "public"

run MyApp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-18T11:50:49.303

在您的 config.ru 中放置指向您的配置/看守的链接

```
require File.dirname(__FILE__) + '/config/warden' 
```

阅读典狱长自述文件。或者在 lib/warden.rb 中查找

我放

```
Warden.test_mode! 
```

代替 /test 路径上的 env 调用，并在

```
http://localhost:9292/test 
```

一些博主表示没有很多关于warden的文档，但我不同意。有一个完整的维基。见[https://github.com/hassox/warden/wiki](https://github.com/hassox/warden/wiki)

慢慢来，了解如何在 Rack 中使用中间件。这是一篇非常好的文章[https://blog.engineyard.com/2015/understanding-rack-apps-and-middleware](https://blog.engineyard.com/2015/understanding-rack-apps-and-middleware)

我想也许你可能想从测试开始，因为我找到了一个很好的例子，你可以在你的应用程序中使用它。

```
ENV['RACK_ENV'] = 'test'
require 'test/unit'
require 'rack/test'

require File.dirname(__FILE__) + '/web'

class AuthenticationTest < Test::Unit::TestCase
  include Rack::Test::Methods

  def app
    WardenTest #MyApp
  end

  def test_without_authentication
    get '/protected'
    assert_equal 401, last_response.status
  end

  def test_with_bad_credentials
    authorize 'bad', 'boy'
    get '/protected'
    assert_equal 401, last_response.status
  end

  def test_with_proper_credentials
    authorize 'admin', 'admin'
    get '/protected'
    assert_equal 200, last_response.status
    assert_equal "You're welcome, authenticated client", last_response.body
  end
end 
```

然后将一些路线添加到您的应用程序中。

```
helpers do
  def protected!
    return if authorized?
    headers['WWW-Authenticate'] = 'Basic realm="Restricted Area"'
    halt 401, "Not authorized\n"
  end

  def authorized?
    @auth ||=  Rack::Auth::Basic::Request.new(request.env)
    @auth.provided? and @auth.basic? and @auth.credentials and     
    @auth.credentials == ['admin', 'admin']
  end
end

get '/' do
  "Everybody can see this page"
end

get '/protected' do
  protected!
  "You're welcome, authenticated client"
end 
```

根据我使用 Ruby 的经验，从测试任何新项目开始总是一个好主意。我经常先测试小块，但只是为了了解它们是如何工作的。

一旦你更好地理解了 Rack，尤其是 Rack::Builder，你可以使用

```
map '/test' do
  ...all the middleware needed
  run App
end 
```

并尝试不同的配置，看看哪些配置最适合您的需求，就像我在写这篇文章时所做的那样。

享受！;-)

# jquery - iosSlider 开始/停止按钮 JQuery 更新

> ID：13242685
> 
> 赞同：0
> 
> 时间：2012-11-06T00:34:03.887
> 
> 标签：jquery, ios, slider, carousel

我正在使用[iosSlider](https://github.com/iosscripts/iosSlider)，它具有包含 autoSlide:true 的设置和选项，这些设置和选项是在文档就绪时设置的。

它还有一个公共方法 $('div').iosSlider('update'); 哪一个：

> 根据滑块的 HTML/CSS/JS 结构的更改更新/重新初始化内部变量/CSS 属性。

所以我的按钮 div 脚本是

```
$("#menuItem1").click(function () {
    $('.iosSlider').iosSlider('goToSlide', 1);
    $('.iosSlider').iosSlider('update');
}); 
```

我不知道把 autoSlide:false 作为我的更新放在哪里？幻灯片更改有效，我只想在用户跳转到幻灯片时停止自动滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T00:45:37.050

我错过了 autoSlideToggleSelector 设置哪种工作，我想我只需要制作两个按钮并设置 if 语句（即开始按钮：如果滑动，什么也不做；停止按钮：如果滑动，停止滑块）

任何帮助仍然很感激。

> autoSlideToggleSelector：（字符串）一个 jQuery 选择（例如 $('#autoScrollToggle') ），选择器返回的元素将在单击时禁用/启用自动滚动。注意：仅当 autoSlide 设置为“true”时才有效。

# sql - 子表单“已分配”控件未更新

> ID：13242692
> 
> 赞同：0
> 
> 时间：2012-11-06T00:35:03.707
> 
> 标签：sql, ms-access, vba

我正在创建一个 MS Access 2010 数据库，以允许用户输入将在查询中使用的一系列数据。

我有一个名为“Entry”的主表单和一个名为“SubEntry”的有界子表单（用于查看输入的记录）。主窗体（Entry）由文本/组合框控件组成，允许用户键入值，例如：

```
**Controls       ControlSource**

Date             "Entered by the user"
CompanyID        "Entered by the user"
TicketID         "Entered by the user"
TicketPrice      "Automatic retrieved by a query based on the entered 'Date' and 'TicketID' "
Pieces           "Entered by the user"
TotalPrice       "TicketPrice * Pieces"
CorrectedPrice   "Entered by the User"
Revenue          "=IIf([CorrectPrice]=0,[TotalPrice],[CorrectPrice])" 
```

这适用于输入和查看记录集。但问题是，在用户将记录集添加到子表单的初始阶段，确切的“收入”值会添加到子表单的“收入”字段中。但之后，当用户在 subfrom 中滚动并选择一个记录集（出现在主窗体的相应控件中）并更改值时。例如选择另一个ticketID 或Date，主表单中的“Revenue”值会发生变化，但不会在子表单的Revenue 字段中更新。同时，任何其他更改使主窗体在子窗体中自动更新，但不会更新“收入”值。

我对 MS Access 和 VBA 不太熟悉，只是想知道是否缺少一些明显的东西？如何处理子条目的“收入”字段以像子表单中的任何其他字段一样自动更新。

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:11:44.383

您需要将文本框与子表单中的相关字段相关联，因此：

```
txtEinnahme
ControlSource: KorrEinahme 
```

然后你需要代码来添加计算，例如：

```
Private Sub txtpiece_AfterUpdate()
    Me.txtEinnahme = IIf(Me.[DKorrEin] = 0, Me.[txtTotal], Me.[DKorrEin])
End Sub 
```

将类似的代码放在任何控件中都应该改变 txtEinnahme 的值。

# c - 将数据序列化为连续数组

> ID：13242698
> 
> 赞同：2
> 
> 时间：2012-11-06T00:35:28.870
> 
> 标签：c, serialization

我有一些我希望能够序列化为连续字节流的对象。两个问题：

1) 数组`char`适合这个任务吗？如果不是，有什么更好的选择？

2）这样做最有效的是什么？到目前为止，我所做的是使用`memcpy`. 例如，是否可以在不经过的情况下将 a 转换`double`为 8 个字节，`chars`反之亦然`memcpy`？

我很清楚这方面的外部库，但我喜欢学习新东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:43:01.870

序列化意味着您正在获取一个对象并为其提供一个表示，该表示可用于仅使用该表示来完全重建它。通常，序列化适用于文件存储，但它通常用于通过网络通信对象。

所以，通常，使用 char 或 unsigned char 就可以了。问题的真正意义在于确保您存储了对象包含的所有内容。这包括在您尝试序列化的对象中引用的对象。

我会从谷歌搜索“深拷贝”开始。[深拷贝与浅拷贝](https://stackoverflow.com/questions/184710/what-is-the-difference-between-a-deep-copy-and-a-shallow-copy)

编辑：memcpy 是“浅拷贝”的一种形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T01:07:36.520

1.  是的，char 是该任务的绝佳选择。

2.  如果您将结果存储到文件中并在同一架构上再次读取，则 memcpy 很好。但是如果你想通过套接字传递它或在其他地方打开它，你必须更加小心。对于浮点和整数类型，表示和字节顺序始终是一个问题。

不要在浮点数/整数上执行简单的 memcpy（并避免更多地从缓冲区强制转换（严格别名和 UB））。

对于浮点数，查找这两个函数 frexp() 和 ldexp()。网上有很多这样的，所以这里没有复制的意义。

对于积分，您可以执行以下操作：

```
buffer[0] = integer >> 24;  
buffer[1] = integer >> 16;  
buffer[2] = integer >> 8;  
buffer[3] = integer; 
```

这保证了返回相同的号码。

# javascript - 在 css3 表单上使用 Javascript

> ID：13242700
> 
> 赞同：0
> 
> 时间：2012-11-06T00:35:34.307
> 
> 标签：javascript, jquery, css

使用 JavaScript+jQuery 我正在操作图像宽度：

JAVASCRIPT

```
var imageWidth = .9 * $(window).innerWidth();
var imageHeight = .6 * $(window).innerWidth();

$("document").ready(function(){
    $(".class").css("width",imageWidth);
    $(".class").css("height",imageHeight);
}); 
```

但我也用它来给我的提交按钮一个 PHP 健壮的图像

CSS

```
 form input[type=submit]{
     background: url("xyz.png") no-repeat center center;
     width: 90px;
     height: 60px;
     border: none;
     color: transparent;
     font-size:0;
 } 
```

（有关这种 css 技术的更多信息，请访问 www.suburban-glory.com/blog?page=140）

我的问题不是很困难，但我找不到我需要的信息。如何`[type=submit]`在 JavaScript 中调用表单输入，以便可以操作用于提交按钮的图像？（正如您在示例中看到的那样，我只是调用 CSS 类）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T00:38:20.507

```
$('form input[type="submit"]').css('background-image', 'url("xyz.png")'); 
```

# c# - 如何根据数据库调用中的特定元素设置变量？

> ID：13242706
> 
> 赞同：0
> 
> 时间：2012-11-06T00:35:58.083
> 
> 标签：c#, ienumerable, resultset

好的，我将以我是 c# 新手和使用 WebMatrix 的事实作为开头。我正在尝试将数据库调用作为页面的一部分并获取特定于“类别”的信息，然后使用数据库中的该数据将信息放在页面上 - 例如，将页面标题设置为来自的 CategoryTitle数据库。下面是我的示例代码，我知道我只是不理解某些东西，但基本上我从数据库中获取数据（其中包括一堆关于类别的东西，例如；id、标题、描述等）到 IEnumerable（我不完全理解那是什么）然后我只想引用 CategoryTitle （这是数据库和结果集中的字段名称。当我使用下面的代码时，我收到以下错误“编译器错误消息： CS1061：'系统。

我知道“categoryData.CategoryTitle;” 部分是错误的，但我该怎么做？我可以使用foreach循环并执行“foreach（categoryData中的var row）”然后说“row.CategoryData”使其工作，但我觉得我不应该这样做，因为它只有一个记录结果放。

```
@{

    Layout = "~/layouts/_layout.cshtml";

    var categoryID = 1;
    IEnumerable<dynamic> categoryData = null;

    var db = Database.Open("Connection"); 
    categoryData = db.Query("exec sp_get_Category @CategoryID=" + categoryID);

    Page.Title = categoryData.CategoryTitle;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T00:40:00.833

您必须只取出一行，否则您正试图从集合中取出一个属性。尝试

```
Page.Title = categoryData.First().CategoryTitle; 
```

它只会拉出第一个结果，但如果没有结果，你会得到一个例外。或者，您可以执行`FirstOrDefault()`which 将首先返回或返回 null；然后你可以做一个空检查。

```
var firstValue = categoryData.FirstOrDefault();
if(firstValue == null)
{
    Page.Title = "Some default title":
}
else
{
    Page.Title = firstValue;
} 
```

# vba - 当值为空时，访问自定义属性的值会出现“内存不足”错误

> ID：13242707
> 
> 赞同：7
> 
> 时间：2012-11-06T00:36:08.847
> 
> 标签：Excel, vba, excel

我正在尝试在[Excel](/questions/tagged/excel "显示标记为“excel”的问题")工作表中创建自定义属性，然后检索其值。当我不使用空字符串时，这很好，即`""`. 当我使用空字符串时，出现此错误：

```
Run-time error '7':
Out of memory 
```

这是我正在使用的代码：

```
Sub proptest()

Dim cprop As CustomProperty
Dim sht As Worksheet

Set sht = ThisWorkbook.Sheets("control")
sht.CustomProperties.Add "path", ""

For Each cprop In ThisWorkbook.Sheets("control").CustomProperties
    If cprop.Name = "path" Then
        Debug.Print cprop.Value
    End If
Next

End Sub 
```

代码在`Debug.Print cprop.value`. 我不应该能够将属性设置为`""`最初吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T07:16:10.763

使用**vbNullChar**它可以工作，示例：

```
Sub proptest()
  Dim sht As Worksheet
  Set sht = ThisWorkbook.Sheets("control")

  ' On Error Resume Next
  sht.CustomProperties.Item(1).Delete
  ' On Error GoTo 0

  Dim pathValue As Variant
  pathValue = vbNullChar

  Dim pathCustomProperty As CustomProperty
  Set pathCustomProperty = sht.CustomProperties.Add("path", pathValue)

  Dim cprop As CustomProperty
  For Each cprop In ThisWorkbook.Sheets("control").CustomProperties
      If cprop.Name = "path" Then
          Debug.Print cprop.Value
      End If
  Next

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:32:14.283

我认为从 Daniel Dusek 的评论和回答中可以清楚地看出这是无法做到的。该属性应至少包含 1 个字符才能有效，不允许使用空字符串，并且在调用 .Value 时会出错。

所以你`Add`这个属性的长度为 1 或更多，当没有实际值被分配给它时`string`，你再次使用这个属性。`Delete`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-10T14:16:10.633

如前所述，无法设置空字符串。

一个简单的解决方法是使用一个神奇的词或字符，例如`~Empty`（或任何对你来说足够证明的东西）：

```
Dim MyProperty As Excel.CustomProperty = ...
Dim PropertyValue As String = If(MyProperty.Value = "~Empty", String.Empty, MyPropertyValue) 
```

一个稍微昂贵但 100% 安全的解决方法是使用一个字符开始自定义属性的所有值，然后您总是将其剥离。访问值时，系统地删除第一个字符：

```
Dim MyProperty As Excel.CustomProperty = ...
Dim PropertyValue As String = Strings.Mid(MyProperty.Value, 2) 
```

你可以编写一个扩展来让你的生活更轻松：

```
<System.Runtime.CompilerServices.Extension>
Function ValueTrim(MyProperty as Excel.CustomProperty) As String
    Return Strings.Mid(MyProperty.Value, 2)
End Function 
```

现在你可以像这样使用它：`Dim MyValue As String = MyProperty.ValueTrim`

添加自定义属性时使用相反的原则：

```
<System.Runtime.CompilerServices.Extension>
Function AddTrim(MyProperties As Excel.CustomProperties, Name As String, Value As String) as Excel.CustomProperty
    Dim ModifiedValue As String = String.Concat("~", Value) 'Use ~ or whatever character you lie / Note Strig.Concat is the least expensive way to join two strings together.
    Dim NewProperty As Excel.CustomProperty = MyProperties.Add(Name, ModifiedValue)      
    Return NewProperty 
End Function 
```

像这样使用：`MyProperties.AddTrim(Name, Value)`

希望这可以帮助遇到这个问题的其他人..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-03T15:41:52.447

基于其他答案和一些试验和错误，我编写了一个类来包装一个`Worksheet.CustomProperty`.

## 工作表属性：类

设置并获取 a 的值`Worksheet.CustomProperty`并测试 a`Worksheet`是否具有`CustomProperty`

```
VERSION 1.0 CLASS
Attribute VB_Name = "WorksheetProperty"
Attribute VB_GlobalNameSpace = False
Attribute VB_Creatable = False
Attribute VB_PredeclaredId = True
Attribute VB_Exposed = False
'@Folder("Classes")
'@PredeclaredId

Option Explicit
Private Type TMembers
    Name As String
    Worksheet As Worksheet
End Type
Private this As TMembers

Public Property Get Create(pWorksheet As Worksheet, pName As String) As WorksheetProperty
    With New WorksheetProperty
        Set .Worksheet = pWorksheet
        .Name = pName
        Set Create = .Self
    End With
End Property

Public Property Get Self() As WorksheetProperty
    Set Self = Me
End Property

Public Property Get Worksheet() As Worksheet
    Set Worksheet = this.Worksheet
End Property

Public Property Set Worksheet(ByVal pValue As Worksheet)
    Set this.Worksheet = pValue
End Property

Public Property Get Name() As String
    Name = this.Name
End Property

Public Property Let Name(ByVal pValue As String)
    this.Name = pValue
End Property

Public Property Get Value() As String
    Dim P As CustomProperty
    For Each P In Worksheet.CustomProperties
        If P.Name = Name Then
            Value = P.Value
            Exit Property
        End If
    Next
End Property

Public Property Let Value(ByVal pValue As String)
    Delete
    Worksheet.CustomProperties.Add Name:=Name, Value:=pValue
End Property

Public Property Get hasCustomProperty(pWorksheet As Worksheet, pName As String) As Boolean
    Dim P As CustomProperty
    For Each P In pWorksheet.CustomProperties
        If P.Name = pName Then
            hasCustomProperty = True
            Exit Property
        End If
    Next
End Property

Public Sub Delete()
     Dim P As CustomProperty
    For Each P In Worksheet.CustomProperties
        If P.Name = Name Then
            P.Delete
            Exit For
        End If
    Next
End Sub 
```

## 用法

我的自定义 Unit 类有几个属性返回一个 WorksheetProperty。它使我的数据库与我的工作表同步变得非常容易。

```
Public Function hasMeta(Ws As Worksheet) As Boolean
    hasMeta = WorksheetProperty.hasCustomProperty(Ws, MetaName)
End Function

Public Property Get Id() As WorksheetProperty
    Set Id = WorksheetProperty.Create(this.Worksheet, "id")
End Property

Public Property Get CourseID() As WorksheetProperty
    Set CourseID = WorksheetProperty.Create(this.Worksheet, "course_id")
End Property

Public Property Get Name() As WorksheetProperty
    Set Name = WorksheetProperty.Create(this.Worksheet, "unit_name")
End Property 
```

## 简单用法

```
'ActiveSheet has a CustomProperty
Debug.Print WorksheetProperty.hasCustomProperty(ActiveSheet, "LastDateSynced")

'Set a CustomProperty
WorksheetProperty.Create(ActiveSheet, "LastDateSynced").Value = Now

'Retrieve a CustomProperty
Debug.Print WorksheetProperty.Create(ActiveSheet, "LastDateSynced").Value 
```

# jquery - 使用计数器单击 DIV-1 时显示 DIV-sub-1

> ID：13242708
> 
> 赞同：0
> 
> 时间：2012-11-06T00:36:24.203
> 
> 标签：jquery, counter

我正在使用 PHP 生成独特的 div。以下是我的 HTML 代码示例：

```
<div id="wrapper">
  <div id="team-member-1"><img src="/theimage1.jpg" /></div>
  <div id="team-member-bio-1"><p>The team member's biography.</p></div>

  <div id="team-member-2"><img src="/theimage2.jpg" /></div>
  <div id="team-member-bio-2"><p>The team member's biography.</p></div>

  <div id="team-member-3"><img src="/theimage3.jpg" /></div>
  <div id="team-member-bio-3"><p>The team member's biography.</p></div>
</div> 
```

每个 div id 末尾的数字是 PHP 计数器生成的数字。我想用jQuery做的是当div“team-member-1”被点击时显示“team-member-bio-1”，当div“team-member”时显示“team-member-bio-2” -2" 被点击，等等。我知道我可以用一堆 if else 语句来做到这一点，但我知道这不是最有效的方法；我在页面上有大约 36 名团队成员。我在想我可以使用一个计数器并将 jQuery 计数器生成的数字添加到每个 div 名称的第一部分。作为 jQuery 的新手，我有点不确定格式化所有内容以使其正常工作的最佳方式。

如果您需要我提供任何其他信息，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T00:41:58.087

如果您需要使用现有代码，可以使用通用选择器并解析出 ID。

```
$('div[id^=team-member-]').click(function(){
    thisId = $(this).attr('id');
    bioId = thisId.substring(thisId.lastIndexOf('-')+1);
    var bioElement = $('#team-member-bio-'+bioId); // your bio div
}); 
```

看到这个[**jsFiddle**](http://jsfiddle.net/QVYr9/)。

但是，正确的方法是使用数据属性，例如`data-bioid="1"`and，您应该有一个通用类供 jQuery 将 click() 绑定到，甚至`class="team-member"`像这样：

```
<div id="wrapper">
  <div id="team-member-1" class="team-member" data-bioid="1"><img src="/theimage1.jpg" /></div>
  <div id="team-member-bio-1"><p>The team member's biography.</p></div>
</div> 
```

然后，您可以点击这些课程中的任何一个，并对成员简介进行一些操作：

```
$('.team_member').click(function(){
    bioId = $(this).data('bioid');   // the value of data-bio attribute
    var bioElement = $('#team-member-bio-'+bioId); // your bio div
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T00:42:38.447

```
$('div[id^=team-member-]').click(function()
{
  $(this).next().first().css('display','block'); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T00:44:02.540

这得到了 javascript 的最后一部分

```
 id.substring(id.lastIndexOf('-')+1)   

  //split also works here
  var num = id.split("-")
  var newID  = "team-member-" + ((num[2] *1) + 1) 
```

所以也许在每个你想要可点击的 div 上添加一个类

```
<div id="wrapper">
  <div id="team-member-1" class="clickable"><img src="/theimage1.jpg" /></div>
  <div id="team-member-bio-1"><p>The team member's biography.</p></div>

$(function(){
   $('.clickable').click(function(){
     var id = $(this).attr('id');
     var lastChar = id.substring(id.lastIndexOf('-')+1)
     nextid = "team-member-" + ((lastchar * 1) + 1) 
    $('#' + nextid ).show();
 });
}); 
```

编辑：其他答案启发我为您制定另一个解决方案，这应该与更少的代码一样好

```
$('div[id^=team-member-]').click(function()
{
  $(this).next($('div[id^=team-member-]')).show() 
}); 
```

- 这里是否有任何 bio div 、多个 bio div 或其他任何东西都没有关系

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T04:04:21.410

您可以使用图像标签作为键来查找当前点击的 div 。用于`has()`选择具有图像标签的特定元素。

```
 $('div[id*="team-member-"]:has(img)').click(function(){
        $(this).next().show('slow');
  });​ 
```

[现场演示](http://jsfiddle.net/KXBxE/)

# php - 使用 jquery/Ajax 刷新表 - 断开指向数据库/javascript 的链接

> ID：13242711
> 
> 赞同：0
> 
> 时间：2012-11-06T00:36:46.567
> 
> 标签：php, mysql, ajax

我正在修改一些显示 mysql 数据库中的行以自动刷新的结果表。我是新手，所以基于 [每 5 秒用 jQuery/Ajax 刷新一个表](https://stackoverflow.com/questions/5681380/refresh-a-table-with-jquery-ajax-ever-5-seconds)

这很好用，我已经通过要求向服务器发出请求来显示时间来测试它，这样我就可以在刷新发生时看到变化。

我的问题是，如果我将其应用于显示返回的 sql 结果的表（也使用 jquery 表排序器）。我的 sql 和 jquery 都失败，除非我将它们所依赖的所有文件和代码移动到我在其上回显表的 php 页面。这现在让我的页面变得一团糟。那么使用 ajax 刷新和管理结果表的最佳方法是什么，以及依赖文件/代码应该位于哪里？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T01:30:29.320

```
 <script type="text/javascript">
    $(document).ready(function(){
      refreshTable();
    });

    function refreshTable(){
        $('#tableHolder').load('getTable.php');
        setInterval(refreshTable, 5000);
    }
</script> 
```

# php - Symfony2 buildForm() 中的连接属性

> ID：13242712
> 
> 赞同：2
> 
> 时间：2012-11-06T00:37:02.403
> 
> 标签：php, symfony, doctrine

我在 Doctrine 中有一组实体，它们相互依赖以构建某些数据，我需要创建一个使用来自其中两个实体的数据的表单。

我有一个杂志实体、一个问题实体和一个章节实体。杂志（Mag1，Mag2）有它的名字，问题，它只属于一个杂志，有它的'编号'（Mag1->Issue 1，Mag1->Issue 2，Mag3->Issue 1，Mag2 -> Issue '夏天'）。这一章必须只属于一个问题，但是在创建表单时，要构建问题选择器，我需要连接两个实体的属性：

```
class ChapterType extends AbstractType
{
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->add('name')
        ->add('number')
        ->add('issue', 'entity', array(
                'class' => 'Bundle:Issue',
                'property' => 'magazine.name'
        ))
    ;
}
... 
```

我需要做的是在“属性”中连接类似的东西`'magazine.name'+'number'`（`'number'`问题将在哪里添加数字。尝试与`.`php字符串中的类似连接不起作用，因为它们不是字符串所以我不知道我必须做什么，或者是否可以这样做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T00:50:20.327

在问题中创建一个执行 concat 的新 getter。鉴于您已经正确设置了 ManyToOne 关系，getter 应该类似于：

```
public function getMagazzineAndIssue() {
   return $this->magazine->getName() . $this->number;
} 
```

在表单中，使用这个新方法作为属性：

```
$builder
    ->add('name')
    ->add('number')
    ->add('issue', 'entity', array(
            'class' => 'Bundle:Issue',
            'property' => 'magazineAndIssue'
    )) 
```

# php - 如何在 PHP 中要求相对路径

> ID：13242719
> 
> 赞同：1
> 
> 时间：2012-11-06T00:37:42.793
> 
> 标签：php, relative-path, require

PHP 如何从符号链接内部使用 Linux 服务器上的相对路径要求文件？

我试过了：

```
require_once(dirname(__DIR__) . "/app.config.php"); 
```

但这会引发错误，说明该文件不存在。这是文件结构：

```
/srv/www/accounts/dev
   app => /srv/www/myapp
       index.php
   app.config.php 
```

`app`一个符号链接也是如此，`/srv/www/myapp`但是当我尝试并要求`app.config.php`php 时，会感到困惑并尝试要求`/srv/www/myapp/app.config.php`而不是`/srv/www/accounts/dev/app.config.php`.

这怎么可能？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:40:14.007

尝试`require_once(__DIR__.'../app.config.php');`

希望有效:)

请注意，如果您使用的是 PHP < 5.3，请尝试`dirname(__FILE__)`代替`__DIR__`:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T00:41:07.173

require_once(__DIR__."/../app.config.php");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T00:53:28.167

我认为这是文件夹的设置方式，如果你喜欢 /srv/www/accounts/dev/app.config.php。与 /srv/www/myapp/app.config.php 位于不同的文件夹中

一个在 /accounts/dev 中，另一个在 /myapp

你不想要一个你想要绝对的相对路径，相对只会在那个文件夹中你必须至少让它知道要检查哪个文件夹，所以我想你想去另一个文件夹

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T00:58:19.430

您可以尝试使用 realpath() 来获取路径。那应该扩展符号链接并返回绝对路径。就像是：

```
require_once(realpath('../') . "app.config.php"); 
```

# c# - 可编辑的 Telerik Radgrid 在分页时丢失编辑

> ID：13242726
> 
> 赞同：1
> 
> 时间：2012-11-06T00:38:28.877
> 
> 标签：c#, telerik, radgrid

我正在使用 Telerik Radgrid，它以编辑模式加载，为用户提供类似 excel 的编辑功能。但是当用户单击分页并进行回发时，网格不会在编辑模式下加载。我需要在所有页面中进行编辑。

这就是我用来完成可编辑 radgrid 的方法。

```
protected void rgStoreCosting_DataBinding(object sender, EventArgs e)
    {
        for (int i = 0; i < dtStoreCosting.Rows.Count; i++)
        {
            rgStoreCosting.EditIndexes.Add(i);
        }
    } 
```

发生分页时，不再触发此事件，因此不进行编辑。有没有其他方法可以完成分页编辑。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T04:00:38.770

您可以尝试删除代码并将可编辑代码附加到 PreRender 事件：

```
protected void RadGrid1_PreRender(object sender, EventArgs e)
{
    for (int count = 0; count < RadGrid1.PageSize; count++)
    {
        RadGrid1.EditIndexes.Add(count);
    }

    RadGrid1.Rebind();
} 
```

* * *

![在此处输入图像描述](../Images/59becbb6119a0c6e67f41a4e4de5475a.png)

# java - 如何在控制台中播放 .3gp 音频文件？

> ID：13242727
> 
> 赞同：0
> 
> 时间：2012-11-06T00:38:39.830
> 
> 标签：java, audio, javasound, 3gp

我必须通过 Java 控制台程序播放 PC 中存在的 3gp 音频文件。我**没有使用 applet... 或 Swing *only console***。

如何在控制台中播放 .3gp 音频文件？

# android - Android：通过 Intent 共享文本和图像 (URL)

> ID：13242730
> 
> 赞同：5
> 
> 时间：2012-11-06T00:38:53.260
> 
> 标签：android, facebook, twitter, android-intent, share

我正在尝试通过 ACTION_SEND 意图与图像共享文本。问题是图像由 URL 表示，而不是本地 URI。我目前拥有的代码是：

```
Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);
shareIntent.setType("*/*");
shareIntent.putExtra(Intent.EXTRA_TEXT, text); // <- String
shareIntent.putExtra(Intent.EXTRA_STREAM, url); // <- URL object 
```

现在我已经尝试了一些变化。我尝试过使用 setType("image/*")，尝试从 URL 解析 Uri，尝试传递 URL 字符串本身，等等。到目前为止似乎没有任何效果。但是，当发送到 Twitter 时，我确实看到了文字，而不是图像。

编辑：显然原始描述没有足够的帮助，所以....当我启动上述意图时，它成功打开了一个选定的应用程序，如 Twitter、Facebook、Gmail 或短信，但在这些应用程序中都没有出现图像. 文本出现在 Twitter 中 - 我不记得文本是否出现在其他地方，但我现在的重点是图像部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T17:18:58.143

由于 Facebook 的政策，您将无法以这种方式在 Facebook 上分享，正如它在一个[已知错误](https://developers.facebook.com/bugs/332619626816423)中所说：

> API 不支持为用户预填消息

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-08-04T13:06:02.797

```
Intent sharingIntent = new Intent(Intent.ACTION_SEND_MULTIPLE);
sharingIntent.setType("image/*");
sharingIntent.setPackage("com.whatsapp");               
sharingIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);
sharingIntent.putExtra(Intent.EXTRA_TEXT,videoPos);
sharingIntent.putExtra(Intent.EXTRA_STREAM,getImageUri(getApplicationContext(), bitmap)); 
```

# javascript - IE 7 浏览器上的 Wordpress 站点菜单问题

> ID：13242731
> 
> 赞同：0
> 
> 时间：2012-11-06T00:39:02.260
> 
> 标签：javascript, html, wordpress, internet-explorer, css

我正在此站点菜单中创建 wordpress 站点，可在除 ie 7 以外的所有浏览器中使用，问题是每当子菜单上的父菜单水平显示和 z-index 问题时

我的网站网址

[http://kitchco-dev.com/](http://kitchco-dev.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:00:28.700

您只保留此更改，然后才能正常工作

```
 nav li {
          position: relative;
          z-index: 99; 
            }

        #access li li
        {
        clear:both;
        display:block;
        } 
```

# html - 未捕获的类型错误：无法读取 null 的属性“样式” - 找不到答案

> ID：13242733
> 
> 赞同：-2
> 
> 时间：2012-11-06T00:39:08.143
> 
> 标签：html

[http://i.imgur.com/brhP4.png](http://i.imgur.com/brhP4.png)

这是我现在拥有的整个 HTML，我不明白为什么会出现错误。我在网站上查找了其他版本，但没有一个答案符合我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T00:47:37.653

我在 jsfiddle 中玩过这个，用箭头键移动 img 似乎工作正常：http: [//jsfiddle.net/QsERY/](http://jsfiddle.net/QsERY/)

我不太确定为什么它在您的示例中不起作用，但请尝试将您的脚本标签放在`<head>`?

（PS请下次粘贴您的代码而不是链接到图像，这使得回答您的问题变得更加困难）

# geometry - 如何从两点找到直线的一般形式方程？

> ID：13242738
> 
> 赞同：29
> 
> 时间：2012-11-06T00:39:51.767
> 
> 标签：geometry

给定输入：

```
double x1,y1,x2,y2; 
```

如何找到一般形式的方程 (double a,b,c where ax + by + c = 0) ？

注意：我希望能够通过计算来做到这一点。所以斜率截距形式的等价物是这样的：

```
double dx, dy;
double m, b;

dx = x2 - x1;
dy = y2 - y1;
m = dy/dx;
b = y1; 
```

显然，这很简单，但我一直没能找到一般方程形式的解（这更有用，因为它可以做垂直线）。我已经看过我的线性代数书和两本关于计算几何的书（都太先进了，无法解释这一点）。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-11-06T00:51:16.423

如果你从方程开始`y-y1 = (y2-y1)/(x2-x1) * (x-x1)`（这是由两点定义的直线方程），通过一些操作你可以得到`(y1-y2) * x + (x2-x1) * y + (x1-x2)*y1 + (y2-y1)*x1 = 0`，你可以认识到：

*   `a = y1-y2`,
*   `b = x2-x1`,
*   `c = (x1-x2)*y1 + (y2-y1)*x1`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T00:43:19.030

两点相减得到正切`(x2-x1, y2-y1)`。对其进行归一化并旋转 90 度以获得法线向量`(a,b)`。取其中一个点的点积得到常数，`c`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-11T09:25:51.287

如果从 2 点定义线的方程开始

```
(x - x1)/(x2 - x1) = (y - y1)/(y2 - y1) 
```

你可以得到下一个等式

```
x(y2 - y1) - y(x2 - x1) - x1*y2 + y1*x2 = 0 
```

所以系数将是：

*   a = y2 - y1
*   b = -(x2 - x1) = x1 - x2
*   c = y1*x2 - x1*y2

我在 C 中的算法实现

```
inline v3 LineEquationFrom2Points(v2 P1, v2 P2) {
    v3 Result;

    Result.A = P2.y - P1.y;
    Result.B = -(P2.x - P1.x);
    Result.C = P1.y * P2.x - P1.x * P2.y;

    return(Result);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-18T11:11:20.257

捷径步骤：“**问题：(4,5) (3,-7)** ” **求解：m=-12/1**然后 **12x-y=48** ”**注：m 是斜率**” **复制分子，后缀“X”正分数负号之间。(tip: simmilar sign = add + copy the sign)** 1.将第二组改为相反的符号，2.ADD y1 to y2（表示根据符号添加或减去它们），3.ADD x1 to x2（也意味着添加或根据符号减去它们），4.然后将 12 和 1 乘以任何问题集。在那之后“ **BOOM** ” Tada！，你有你的答案

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2017-08-10T06:29:36.413

```
#include <stdio.h>
main()
{
    int a,b,c;
    char x,y;
    a=5;
    b=10;
    c=15;
    x=2;
    y=3;
    printf("the equation of line is %dx+%dy=%d" ,a,b,c);
} 
```

# javascript - 在 Javascript 中访问 c ookie 信息

> ID：13242742
> 
> 赞同：0
> 
> 时间：2012-11-06T00:40:01.683
> 
> 标签：javascript, cookies

无论如何，是否可以从 javascript 访问与 cookie 相关的数据，例如路径、标志和到期日期？对于 cookie 访问，我所能找到的只是`document.cookie`，它仅提供名称值对的列表。为什么 cookie 访问的接口如此有限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T00:46:50.440

不，就安全的跨浏览器支持而言，没有。推理归结为安全性。

cookie 的目标是允许从浏览器到服务器的来回通信。
如果您可以允许*任何*前端脚本手动编辑 cookie 的域/路径/过期，只是为了知道它的名称，这将导致很多潜在的安全漏洞，如果不是为了欺骗访问，那么至少对于无形中追踪人。

这并不是说 cookie 本质上是安全的，甚至根本就特别安全。
我的意思是说，通过允许任何和所有 JS 编辑发送到服务器的任何和所有 cookie 数据（不仅仅是 CRUD），任何安全伪装都会在心跳中消失。

# visual-studio - VS 的 F# REPL (2012)？

> ID：13242748
> 
> 赞同：2
> 
> 时间：2012-11-06T00:40:34.003
> 
> 标签：visual-studio, f#, visual-studio-2012, read-eval-print-loop

嗨，VS 2012 有一个简单的 F# REPL，所以我不必创建项目，我可以即时进行简单的计算吗？

我觉得有一个选项卡或工具箱将其停靠为以下选项卡之一：

![在此处输入图像描述](../Images/c443377e7e82b29742068f9abf08b431.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T00:43:19.973

您可以通过Visual Studio 中的[F# Interactive 窗口执行此操作。](http://msdn.microsoft.com/en-us/library/dd233175.aspx)

这可以从`View`-> `Other Windows`->获得`F# Interactive`，或者`Ctrl+Alt+F`如果您有默认的 Visual Studio 键绑定设置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T00:42:51.223

查看 -> 其他窗口 -> F# Interactive

# android - Android Gmail 收件箱屏幕上的添加按钮

> ID：13242752
> 
> 赞同：1
> 
> 时间：2012-11-06T00:41:35.420
> 
> 标签：android, button, gmail, screen, add

我想在 Android Gmain 收件箱屏幕上添加一个新按钮：1）可以这样做吗？2）如果是，如何进行？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:53:49.697

如果您打算在 Android 上的 Gmail 应用程序上执行此操作，那么答案是否定的。

您不能将代码注入其他应用程序，这将是一个巨大的安全漏洞。

# android - 淡化视图上的背景以启动计时器

> ID：13242754
> 
> 赞同：0
> 
> 时间：2012-11-06T00:41:40.373
> 
> 标签：android

到目前为止，在我的应用程序中，我在开始按钮旁边有一个 ImageView。当按下开始按钮时，ImageView 将替换为 TextView 以开始倒计时。理想情况下，我现在想要完成的是将图像放在开始按钮旁边，当按下开始按钮时，该图像的背景会褪色一点，并且倒计时在该图像中间开始，但不会褪色。

目前我唯一能想到的就是拥有一个 TextView 并将图像作为背景，但我现在的问题是如何淡化该背景。这会是一种理想/正确的方式吗？如果是这样，我将如何淡化背景？如果有另一种方法可以做到这一点，我将如何去做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T00:51:09.057

您可以在顶部使用图像视图的文本视图和图像视图，然后淡化图像视图，然后在单击按钮时淡化图像视图，方法是在图像视图上使用 setAlpha。

还有其他方法，例如使用可绘制列表，但这将为您节省更多工作。

[http://developer.android.com/reference/android/view/View.html#setAlpha(float](http://developer.android.com/reference/android/view/View.html#setAlpha(float) )

# iphone - iPhone 模拟器图标黑色

> ID：13242759
> 
> 赞同：1
> 
> 时间：2012-11-06T00:42:04.787
> 
> 标签：iphone, xcode, icons, ios-simulator

我的 plist 中有两个图标文件：icon.png icon@2x.png

两者都添加到我的项目中，添加到目标中，分别为 57x57 和 114x114 像素，均为 72 dpi。

它们都是从 .svg 生成的 png。

我用白色填充了透明度。其余颜色为黑色。

我已尝试删除该应用程序，清除派生数据并重新运行。

为什么这个图标在 iPhone 6 模拟器中显示为黑色方块？

编辑：尝试在 Icon.png 和 Icon@2x.png 中重命名为大写 I。擦除应用程序，擦除派生数据，干净，仍然没有骰子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T00:45:38.640

尝试以下操作：

1 - 在模拟器上删除您的应用程序，就像您在 iPhone 上删除应用程序一样。

2 - 在 xcode 上，转到菜单产品，然后单击清理。（或快捷键 Shift+Command+K）

3 - 尝试再次运行。

编辑：当您在计算机上打开 png 时，它们实际上显示为白色吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-29T18:51:20.377

所以我遇到了同样的问题，发现了这个旧线程。在我的情况下，问题原来是 PNG 图标中的 alpha 通道。具体来说：我的图标是黑色透明的，所以在黑色背景的模拟器上它显示为黑色。我通过在预览中打开并在关闭“alpha”按钮的情况下导出来解决。

# c# - 我可以使用 LINQ 获取某种类型的所有组件吗？

> ID：13242762
> 
> 赞同：2
> 
> 时间：2012-11-06T00:42:19.093
> 
> 标签：c#, linq, clr

我还很陌生`C#`，遇到了一些问题，我确信使用 LINQ 有一个很好的解决方案。

**背景：** 我继承了一个使用 CrystalReports 的项目，报告本身都有以统一方式关联的查看器表单 [包含组件/控件]（我很确定它们是机器生成的），其中之一是一个`ReportClass`包含数据库属性的组件。数据库属性是**唯一**`Log_On_Database`区分所有这些类中出现的方法 ( ) 的东西。我想做的是创建一个公共基类，它搜索表单`ReportClass`并使用它来填充其本地数据库变量w/属性值，以便我可以`Log_On_Database`在单个位置实现。

**问题：** 如何使用 LINQ 来获取`components`属于表单的所有（不仅仅是[只是]控件）并递归地获取那些*是*控件的（因此可以拥有自己的）？

**注意：**得到结果`List`会很棒，因为我可以测试长度为 0（出现严重错误）、1（预期）或更多（然后我可以在那些奇怪的情况下做我需要做的事情） -- 即使这都是生成的代码，我也不相信它*没有*以极其痛苦的方式进行修改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:10:29.953

到目前为止，我有*这个*：

```
 // Get all controls of a certain type:
    // http://stackoverflow.com/questions/3419159/how-to-get-all-child-controls-of-a-winform-of-a-specific-type-button-textbox
    public IEnumerable<Control> GetAll(Control control, Type type)
    {
        var controls = control.Controls.Cast<Control>();

        return controls.SelectMany(ctrl => GetAll(ctrl, type))
                                  .Concat(controls)
                                  .Where(c => c.GetType() == type);
    }

    protected ComponentCollection get_components(Component c)
    {
        Type parent = c.GetType();
        FieldInfo fieldInfo = parent.GetField("components", BindingFlags.Instance | BindingFlags.NonPublic);
        IContainer fieldData = (IContainer)fieldInfo.GetValue(components);

        return fieldData.Components;
    }

    protected void Log_On_Database()
    {
        // ReportClass decends from ReportDocument, which has the Database property we're interested in
        // this method grabs up any ReportDocument and decended objects. There should be only one.
        List<ReportDocument> reports = new List<ReportDocument>();

        // The list 'ctrls' contains all the Controls of 'this' form.
        List<Control> ctrls = GetAll(this, typeof(Control)).ToList();

        // Now we add all the components from all the controls which are ReportDocuments to the "reports" list.
        foreach (Control c in ctrls)
            foreach( Component x in get_components(c) )
            {
                if (x is ReportDocument)
                    reports.Add((ReportDocument)x);
            }

        switch (reports.Count)
        {
            case 0:
                MessageBox.Show("No report document found.");
                break;
            case 1:
                Log_On_Database( ((ReportDocument)reports[0]).Database );
                break;
            default:
                MessageBox.Show("Too many report documents found.");
                break;
        } // end switch

    } // end Log_On_Database 
```

在一个 LINQ 语句中获得所有内容会很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T18:31:50.940

使用 linq 你不能进行递归查询，所以`GetAll`应该保持原样。

但是你可以这样做：

```
var reports = GetAll(this, typeof(Control))
            .SelectMany(c => get_components(c))
            .OfType<ReportDocument>()
            .ToList(); 
```

# php - 文本输入是否正确，表格布局可以稍微改变吗

> ID：13242765
> 
> 赞同：0
> 
> 时间：2012-11-06T00:42:47.330
> 
> 标签：php, html

我有 2 个小问题需要帮助来处理以下代码：

```
echo "<table border='1' id='markstbl'>
      <tr>
      <th class='questionth'>Question No.</th>
      <th class='questionth'>Question</th>
      <th class='answerth'>Answer</th>
      <th class='answermarksth'>Marks per Answer</th>
      <th class='noofmarksth'>Total Marks</th>
      </tr>\n";
                $previous_question_id = null;
          foreach ($searchQuestionContent as $key=>$question) {
            if ($previous_question_id == $searchQuestionId[$key]) {
          $searchQuestionId[$key] = '';
          $question = '';
          $searchMarks[$key] = '';
      }else{
          $previous_question_id = $searchQuestionId[$key];
      }
        echo '<tr class="questiontd">'.PHP_EOL;
        echo '<td class="optiontypetd">'.htmlspecialchars($searchQuestionId[$key]).'</td>' . PHP_EOL;
        echo '<td>'.htmlspecialchars($question).'</td>' . PHP_EOL;
        echo '<td class="answertd">';
        echo $searchAnswer[$key];
        echo '</td>' ;
        echo '<td class="answermarkstd"><input class="individualMarks" name="answerMarks[]" id="individualtext" type="text" "/></td>' . PHP_EOL;
        echo '<td class="noofmarkstd">'.htmlspecialchars($searchMarks[$key]).'</td>' . PHP_EOL;
}      
        echo '</tr>';
        echo "</table>" . PHP_EOL; 
```

问题 1：如果您查看上表，我有一列将包含文本输入。现在每个文本输入将属于“答案”列中的每个答案。我的问题是文本输入是否正确设置，我在`name`属性中包含 [] 来设置数组？我`[]`应该在文本输入代码中包含什么内容吗？还有什么我应该包含的内容吗？

问题 2：目前，上面的代码使表格看起来像[JSFIDDLE1](http://jsfiddle.net/6jpwY/7/)中的这个示例。但我希望该表显示为本示例[JSFIDDLE2](http://jsfiddle.net/6jpwY/10/)。如您所见，另一个表中的空白行是行跨度，因此它看起来像问题，总分看起来像它在一个单元格中。我怎样才能让上面的表格看起来像 JSFIDDLE2？

更新：

以下是完整代码，无论何时使用，我仍然会收到未定义`$rowspans[....`的索引。下面的代码是否正确：

```
$assessment = $_SESSION['id'] . $sessionConcat;

$query = "SELECT q.SessionId, s.SessionName, q.QuestionId, q.QuestionContent, an.Answer, q.QuestionMarks 
FROM Session s 
INNER JOIN Question q ON s.SessionId = q.SessionId
JOIN Answer an ON q.QuestionId = an.QuestionId AND an.SessionId = q.SessionId
WHERE s.SessionName = ?
ORDER BY q.QuestionId, an.Answer
";

// prepare query
$stmt=$mysqli->prepare($query);
// You only need to call bind_param once
$stmt->bind_param("s", $assessment);
// execute query
$stmt->execute(); 

// This will hold the search results
$searchQuestionId = array();
$searchQuestionContent = array();
$searchAnswer = array();
$searchMarks = array();

// Fetch the results into an array

// get result and assign variables (prefix with db)
$stmt->bind_result($dbSessionId, $dbSessionName, $dbQuestionId, $dbQuestionContent, $dbAnswer, $dbQuestionMarks);
while ($stmt->fetch()) {
$searchQuestionId[] = $dbQuestionId;
$searchQuestionContent[] = $dbQuestionContent;
$searchAnswer[] = $dbAnswer;
$searchMarks[] = $dbQuestionMarks;
}   

?>      

</head>

<body>

<form id="QandA" action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">

<?php 

echo "<table border='1' id='markstbl'>
<tr>
<th class='questionth'>Question No.</th>
<th class='questionth'>Question</th>
<th class='answerth'>Answer</th>
<th class='noofmarksth'>Total Marks</th>
</tr>\n";
$previous_question_id = null;
$rowspans = array_count_values($searchQuestionId);
foreach ($searchQuestionContent as $key=>$question) {
if ($previous_question_id == $searchQuestionId[$key]) {
$searchQuestionId[$key] = '';
$question = '';
$searchMarks[$key] = '';
}else{
$previous_question_id = $searchQuestionId[$key];
}
echo '<tr class="questiontd">'.PHP_EOL;
echo '<td class="optiontypetd">'.htmlspecialchars($rowspans[$searchQuestionId[$key]]).'</td>' . PHP_EOL;
echo '<td>'.htmlspecialchars($question).'</td>' . PHP_EOL;
echo '<td class="answertd">';
echo $searchAnswer[$key];
echo '</td>';        echo '<td class="noofmarkstd">'.htmlspecialchars($searchMarks[$key]).'</td>' . PHP_EOL;
}
echo '</tr>';
echo "</table>" . PHP_EOL;

?>

<p><input id="submitBtn" name="submitMarks" type="submit" value="Submit Marks" /></p>

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T01:27:26.760

Q1。是的，您甚至可以在`[]`.

Q2。似乎`$searchQuestionId`在您的循环之前已填充，对吗？在这种情况下，您可以使用[`array_count_values`](http://www.php.net/manual/en/function.array-count-values.php)存储每个 ID 的频率并在循环期间访问该数组：

在你的循环之前：`$rowspans = array_count_values($searchQuestionId);`

在循环期间访问 rowspan 值：`$rowspans[$searchQuestionId[$key]]`。

您必须删除该行`$searchQuestionId[$key] = '';`，否则您将无法访问正确的`$rowspan`密钥。

最后，您必须设置更多`if`语句来跳过`<td>`某些行上的 s。

```
$previous_question_id = null;
$rowspans = array_count_values($searchQuestionId);
foreach ($searchQuestionContent as $key=>$question) {

    // removed logic, not necessary to set empty strings if you're skipping them

    echo '<tr class="questiontd">'.PHP_EOL;

    if ($previous_question_id != $searchQuestionId[$key]) {
        echo '<td class="optiontypetd" rowspan="'.$rowspans[$searchQuestionId[$key]].'">'.htmlspecialchars($searchQuestionId[$key]).'</td>' . PHP_EOL;
        echo '<td rowspan="'.$rowspans[$searchQuestionId[$key]].'">'.htmlspecialchars($question).'</td>' . PHP_EOL;
    }

    echo '<td class="answertd">';
    echo $searchAnswer[$key];
    echo '</td>' ;
    echo '<td class="answermarkstd"><input class="individualMarks" name="answerMarks[]" id="individualtext" type="text" "/></td>' . PHP_EOL;

    if ($previous_question_id != $searchQuestionId[$key]) {
        echo '<td class="noofmarkstd" rowspan="'.$rowspans[$searchQuestionId[$key]].'">'.htmlspecialchars($searchMarks[$key]).'</td>' . PHP_EOL;
    }

    // moved this to the end
    if ($previous_question_id != $searchQuestionId[$key]) {
        $previous_question_id = $searchQuestionId[$key];
    }
} 
```

# html - html表单没有动作，没有提交，没有javascript

> ID：13242766
> 
> 赞同：0
> 
> 时间：2012-11-06T00:42:47.253
> 
> 标签：html, forms

没有操作的表单服务器有什么用途，也没有提交或按钮，页面上的任何地方都没有 javascript..

```
 <form method="post">
               <input type="hidden" name="dtsg" value="AQAdsMJX" autocomplete="off" />
               <i class="imgprofpic">
               <img src="http://abc.com/img.jpg" class="imgCrop img"  />
               </i>
               <a href="/test">
               test
               </a>
               <input type="hidden" autocomplete="off" name="page" value="0" />
               <input type="hidden" autocomplete="off" name="last_page" value="0" />
               </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T01:04:38.180

我会将它用于 css `<style> form{ border:1px solid gray; } </style>`

还是有目的的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T01:26:39.113

它可能被设计为通过 ajax 调用读入另一个页面，其中 JS 将存在于阅读页面上。

# javascript - php中的ajax后日历控件不起作用:(

> ID：13242780
> 
> 赞同：-1
> 
> 时间：2012-11-06T00:44:00.857
> 
> 标签：javascript, css, ajax

我正在按照教程制作日历，我已经制作了日历的第一部分，但是在添加更多代码以制作上个月和下个月的按钮后，它不再工作:(

我在 ie 上收到此错误

网页错误详细信息消息：'document.getElementById(...)' 为空或不是对象行：23 字符：4 代码：0

它只显示处理而不是压光机。

这是代码，如果有人可以看一下，那就太好了

calendar_start.php - [http://tinypic.com/r/sdo19t/6](http://tinypic.com/r/sdo19t/6)（对不起，我不得不上传一张图片，因为它不允许我将其间隔 4 行以使其在所有地方都可以编码）。

show_calendar.php（这是您应该能够查看日历的文件

```
 <!DOCTYPE html>
<html>
<head>
<link href="calCss.css" rel="stylesheet" type="text/css" media="all" />

<script language="JavaScript" type="text/javascript">
function initialCalendar(){
var hr = new XMLHttpRequest();
var url = "calendar_start.php";
var currentTime = new Date();
var month = currentTime.getMonth() + 1;
var year = currentTime.getFullYear();
showmonth = month;
showyear = year;
var vars = "showmonth="+showmonth+"&showyear="+showyear;
hr.open("POST", url, true);
hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
hr.onreadystatechange = function() {
    if(hr.readyState == 4 && hr.status == 200) {
        var return_data = hr.responseText;
        document.getElementById("showcalendar").innerHTML = return_data;
    }
}
hr.send(vars);
document.getElementById("showCalendar").innerHTML = "processing...";
}
</script>

<script language="JavaScript" type="text/javascript">
function next_month(){
var nextmonth = showmonth + 1;
if (nextmonth > 12) {
   nextmonth = 1;
   showyear = showyear + 1;
 }
 showmonth = nextmonth;
 var hr = new XMLHttpRequest();
var url = "calendar_start.php";
var vars = "showmonth="+showmonth+"&showyear="+showyear;
hr.open("POST", url, true);
hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
hr.onreadystatechange = function() {
    if(hr.readyState == 4 && hr.status == 200) {
        var return_data = hr.responseText;
        document.getElementById("showcalendar").innerHTML = return_data;
    }
}
hr.send(vars);
document.getElementById("showCalendar").innerHTML = "processing...";
}
</script>

<script language="JavaScript" type="text/javascript">
function last_month(){

var lastmonth = showmonth - 1;
if (lastmonth < 1) {
   lastmonth = 12;
   showyear = showyear - 1;
 }
 showmonth = lastmonth;

 var hr = new XMLHttpRequest();
var url = "calendar_start.php";
var vars = "showmonth="+showmonth+"&showyear="+showyear;
hr.open("POST", url, true);
hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
hr.onreadystatechange = function() {
    if(hr.readyState == 4 && hr.status == 200) {
        var return_data = hr.responseText;
        document.getElementById("showcalendar").innerHTML = return_data;
    }
}
hr.send(vars);
document.getElementById("showCalendar").innerHTML = "processing...";
}
</script>

</head>
<body onLoad="initialCalendar();">
<div id="showCalendar"></div>
</body>
</html> 
```

calCss.css（我认为这很好，因为它以前有效）

```
#calendar_wrap {
width: 924px;
margin-left: auto;
margin-right: auto;
overflow: hidden;
}
.title_bar {
width: 100%; 
height: 30px;
}
.previous_month {
float: left;
width: 308px;
height: 30px;
text-align: left;
}
.show_month {
float: left;
width: 308px;
height: 30px;
text-align: center;
}
.next_month {
float: left;
width: 308px;
height: 30px;
text-align: right;
}
.week_days {
width: 100%;
}       
.days_of_the_week  {
float: left;
width: 14%;
text-align: center;
}      
.cal_day {
position: relative;
float: left;
margin-right: 4px;
margin-bottom: 4px;
width: 128px;
height: 95px;
background-color: #9C9;
}
.day_heading {
position: relative;
float: left;
width: 40px;
height: 16px;
padding: 6px;
color: #000;
font-family: Arial;
font-size: 14px;
}    
.openings {
width: 100%;
clear:left;
text-align: center;
}
.non_cal_day {
position: relative;
float: left;
margin-right: 4px;
margin-bottom: 4px;
width: 128px;
height: 95px;
background-color: #CCC;
}

.clear {
clear: both;
} 
```

希望这很简单，我对此很陌生，:)/:(这与本地主机无关

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T00:56:52.910

您几乎自己发现了错误。您发布了此错误消息：

```
Message: 'document.getElementById(...)' is null or not an object Line: 23 
```

所以看看第 23 行。

您的 div 有一个 id =“showCalendar”，而您正在调用“showcalendar”（小 c）。

请记住，属性 ID 区分大小写。

# java - 读取战争档案中的文本文件

> ID：13242782
> 
> 赞同：13
> 
> 时间：2012-11-06T00:44:21.863
> 
> 标签：java, jsf

我正在尝试从我的战争档案中读取一个文本文件，并在运行时在 facelets 页面中显示内容。我的文件夹结构如下

+war 存档 > +resources > +email > +file.txt

我尝试使用以下代码读取 resources/email/file.txt 文件夹中的文件

```
File file = new File("/resources/email/file.txt");
BufferedReader reader = null;
try {
    reader = new BufferedReader(new FileReader(file));
} catch (FileNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
StringBuffer buffer = new StringBuffer();
if (reader != null) {
    String line = reader.readLine();
    while (line != null) {
        buffer.append(line);
        line = reader.readLine();
// other lines of code 
```

然而问题是，当我运行上述代码的方法时，`FileNotFoundException`会抛出A。我也试过用下面这行代码来获取文件，但一直没有成功

```
File file = new File(FacesContext.getCurrentInstance()
        .getExternalContext().getRequestContextPath() + "/resources/email/file.txt"); 
```

我仍然得到`FileNotFoundException`. 这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-06T00:50:04.113

试试下面：

```
 InputStream inputStream = 
      getClass().getClassLoader().getResourceAsStream("/resources/email/file.txt");
   BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream )); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-06T00:48:24.660

尽量避免使用文件，因为这是为了从文件系统中读取内容。

由于您的资源被捆绑到 WAR 中，因此您可以通过类加载器访问它。

确保资源捆绑到您的 WEB-INF/classes 文件夹中。

```
InputStream in =
new InputStreamReader(FileLoader.class.getClassLoader().getResourceAsStream("/resources/email/file.txt") ); 
```

这是一个关于这个主题的好博客

[http://haveacafe.wordpress.com/2008/10/19/how-to-read-a-file-from-jar-and-war-files-java-and-webapp-archive/](http://haveacafe.wordpress.com/2008/10/19/how-to-read-a-file-from-jar-and-war-files-java-and-webapp-archive/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-27T08:52:07.337

如果你想获取 java File 对象，你可以试试这个：

```
String path = Thread.currentThread().getContextClassLoader().getResource("language/file.xml").getPath();
File f = new File(path);
System.out.println(f.getAbsolutePath()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-15T13:02:18.020

我更喜欢这种方法：

```
InputStream inputStream = getClass().getResourceAsStream("/resources/email/file.txt");

if (inputStream != null) {
    try (BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream))) {
       ...
    } catch ...
} else ... 
```

三个原因：

*   它同时支持：从绝对路径和相对路径（从给定的类开始）加载资源 - 另请参阅[此答案](https://stackoverflow.com/a/6608848/1725096)
*   获取流的方式短了一步
*   它利用*try-with-resources*语句隐式关闭底层输入流

# git - git多主设置？

> ID：13242785
> 
> 赞同：0
> 
> 时间：2012-11-06T00:44:55.100
> 
> 标签：git, git-remote, multi-master-replication

我的任务是配置以下设置。

目前，我们有一个开源项目的内部规范回购。我们有一个 post-receive 挂钩，可以将任何更新推送到公开的远程存储库。

Joe Public 可以从公共回购中提取。

除了 post-receive 钩子，没有人推送到远程仓库

我们有很多用户在内部处理代码，我真的不想弄乱他们已经在工作的工作流程。

内部用户从内部规范 repo 中检查代码并提交相同的代码。

外部开发人员必须提交补丁，然后内部用户将为他们提交（审查后）。

此时，我们要开始允许一些外部开发人员对存储库进行提交访问。

这意味着使远程回购规范。

这也意味着改变用户的工作流程。除非这里的集体可以提出我在 git 方面缺少的东西。

当前工作流程的快速图表。

内部用户。

从内部仓库克隆。-> 带代码的猴子 -> 推送到内部仓库 -> 接收后挂钩推送到远程仓库。

外部用户。

从外部仓库克隆。-> 带代码的猴子 -> 通过邮件列表提交补丁 -> 内部用户将代码推送到内部仓库 -> 接收后挂钩推送到远程仓库。

理想的新工作流程！

内部用户。

从内部仓库克隆。-> 在提供克隆之前，pre-receive hook 确保我们有一个来自远程的更新镜像 -> monkey with code -> push to internal repo -> pre-receive hook 代理提交到远程 repo 并同步 2.

外部用户。

从远程仓库克隆。-> 带代码的猴子 -> 推送到远程仓库。

这有点像多主设置。您可以将代码推送到任一存储库并从任一存储库中提取代码。

其他一些注意事项。

内部仓库可以从远程仓库推送和拉取。远程仓库**无法**访问内部仓库。

你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T01:24:53.887

这会有点令人讨厌，并且有一些工具旨在做到这一点——但它们通过“锁定”所有存储库来工作，只要有人对其中的任何一个进行更改。在你的情况下，我认为有一个更简单的方法。

1.  每个人都推送到远程存储库，期间。内部用户和外部用户。

2.  一个 cron 作业从远程存储库拉到内部存储库。

假设远程存储库位于`ssh://remote/dir/proj.git`，内部存储库位于`ssh://internal/someplace/proj.git`。添加到每个人的`.gitconfig`：

```
[url "ssh://remote/dir/"]
    pushInsteadOf = "ssh://internal/someplace/" 
```

这意味着克隆内部存储库的任何人仍然可以获得从附近服务器拉取的不错速度，但每个人都推送到同一个远程存储库。一旦*在每个人的工作站上以*`.gitconfig`这种方式设置，您只需要和--没有额外的标志，不需要配置东西。*`clone``push``pull`*

 *请注意，像这样的设置唯一真正的好处是从内部存储库获取时获得的额外速度。有一个惩罚，因为 cron 作业的粒度控制了内部用户获取更改的速度——但我真的希望你没有一堆猴子在同一个分支上打字。

### 挂钩注意事项

从存储库获取时，Git 中不会触发任何钩子。如果你想做这种你拉来响应的事情`git fetch`，你可以`git upload-pack`用一个包装脚本替换 ，该脚本在调用 real 之前同步两个存储库`git upload-pack`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T14:37:18.737

我处于非常相似的情况 - 我计划的方法是尝试配置本地存储库以执行从远程拉取的预接收挂钩（自动接受本地合并冲突）和后接收推送到远程仓库的钩子。此外，我计划设置一个 cron 作业，每 5 分钟左右从远程拉到本地，同时自动接受本地合并（因为我无法从远程推送 -> 本地）

通过这种方式，远程用户可以推拉他们的存储库，但本地存储库充当“主”，本地用户使用本地存储库。我认为自动冲突解决方案存在很多潜在问题。由于我们的 CI 设置为在有提交时每 15 分钟进行一次构建 - 问题会很快被*发现*。现在，*如何*连接所有这些...我明天开始...*

# jquery - 使用 jQuery 加载内容并附加到元素

> ID：13242786
> 
> 赞同：1
> 
> 时间：2012-11-06T00:44:56.173
> 
> 标签：jquery, html, css, appendto

我想使用 ajax 加载一些 HTML，然后将其作为`<div>`.

`$('div').load('extra-stuff.php');`将替换 div 的所有内容。`appendTo()`听起来很有希望，但现在最有效的 jQuery AJAX 函数是什么，它如何使用`appendTo`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T00:48:02.980

试试[`jQuery.get()`方法](http://api.jquery.com/jQuery.get/)

```
$.get('extra-stuff.php', function(data){
    $('div').append(data);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:05:46.230

您可以像这样使用负载附加：

```
jQuery('#AppendToMe').append( jQuery('<div>').load(...) ); 
```

# ios - Facebook iOS SDK v 3.1.1 遇到问题

> ID：13242787
> 
> 赞同：2
> 
> 时间：2012-11-06T00:45:17.143
> 
> 标签：ios, facebook-graph-api, ios6, facebook-ios-sdk

我的应用程序现在使用适用于 iOS 的 Facebook SDK 版本 3.1.1。

在 iOS6 上，我注意到`FBSession expirationDate`. 日期始终设置为 4001 年（遥远的未来？）。我已经读到这可能与`offline_access`许可有关，但我们并没有要求这样做（我们曾经在非常旧的应用程序版本中这样做过。但这是在干净图像上的全新安装。）

根据 FB SDK 指南，我们总是首先通过 FBSession openActiveSessionWithReadPermissions 请求基本读取权限。返回的会话到期日期始终为 4001-01-01。后来，当我们想发帖时，我们打电话`FBSession reauthorizeWithPublishPermissions`，要求`publish_action`。

在令牌过期之前，这一切似乎都可以正常工作。我只注意到 expireDate 问题，因为我发现我们正在将过期令牌传递给图形 API，并且这些调用失败了。

但这不应该发生，对吧？- 每当应用程序启动时我们调用`FBSession openActiveSessionWithReadPermissions`，每当应用程序启动时我们调用`FBSession handleDidBecomeActive`。刷新任何过期的活动令牌应该是正确的，是吗？

我可能做错了什么，有哪些事情需要检查？为什么将 expireDate 设置为 4001？

**编辑**：

我认为我的问题与此处描述的内容有关：[OpenActiveSession for Facebook iOS SDK 后访问令牌过期](https://stackoverflow.com/questions/12612629/expired-access-token-after-openactivesession-for-facebook-ios-sdk)

我没有使用任何 FB SDK 支持来调用图形 API。所以我没有利用显然内置的 SDK 支持来刷新 iOS6 管理的令牌。

**编辑 2**：

我认为这是我的问题的完全重复：

[iOS 6 Facebook登录不刷新访问令牌](https://stackoverflow.com/questions/13125430/ios-6-facebook-login-not-refreshing-access-token)

也在这里引用：http: [//developers.facebook.com/bugs/441739699216684 ?browse=search_5099512da57214b73000801](http://developers.facebook.com/bugs/441739699216684?browse=search_5099512da57214b73000801)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:21:17.257

offline_access 权限实际上确实返回了一个在 4001 年过期的身份验证令牌。

根据我目前的经验，iOS 6 的原生 FB 身份验证始终返回一个令牌，其到期日期（在您的应用程序的 plist 中）也记录为 4001 年，但根据[FB 令牌调试器](https://developers.facebook.com/tools/debug)，其实际到期日期大不相同。简而言之，不要依赖手机上存储的价值。不知何故，有一个断开。

我也有与您相同的假设（调用 FBSession openActive... 和 handleDidBecomeActive）关于通过调用这些方法来刷新我的令牌，但这对我来说也没有成功。

在您的更新中，您链接到我提出的类似问题，我刚刚添加了我的解决方案。您可以在这里查看：http: [//facebook.stackoverflow.com/questions/13125430/ios-6-facebook-login-not-refreshing-access-token#answer-13298770](http://facebook.stackoverflow.com/questions/13125430/ios-6-facebook-login-not-refreshing-access-token#answer-13298770)

希望这会有所帮助！

# ios - 非矩形图像裁剪iOS？

> ID：13242788
> 
> 赞同：4
> 
> 时间：2012-11-06T00:45:19.713
> 
> 标签：ios, objective-c, image, cocoa-touch, crop

有没有办法在 iOS 上以非矩形形状裁剪图像？我需要的是一个人能够用他们的手指在图像内画一个圆圈（或任何闭合的形状）并选择“裁剪”。这将使形状内部的内容保持不变，而外部被“删除”。不是黑色，而是透明的保存。如果然后我在一个视图中有两个 UIImageView 相互重叠，并将自定义裁剪的图像放在顶部，我需要后面的图像在形状之外可见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T00:49:52.567

是的，你会使用`CGImageMask`.

# jaxb - MOXy 编组错误的对象

> ID：13242794
> 
> 赞同：1
> 
> 时间：2012-11-06T00:46:34.090
> 
> 标签：jaxb, moxy, docx4j, wordprocessingml

我试图让 docx4j 支持 MOXy 作为其 JAXB 实现。

我们已经差不多了；见[docx4j 和 MOXy](http://www.docx4java.org/forums/docx-java-f6/moxy-t1242.html)

我遇到的问题是我有一[堂课](https://github.com/plutext/docx4j/blob/master/src/main/java/org/docx4j/wml/Text.java)：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(namespace = "http://schemas.openxmlformats.org/wordprocessingml/2006/main", name = "CT_Text", propOrder = {
    "value"
})
@XmlRootElement(name = "t")
public class Text 
```

MOXy 将其编组为 w:delInstrText，而不是 w:t，这是我所期望/希望的，也是 Java 6/参考实现所做的。

从[架构](https://github.com/plutext/docx4j/blob/master/xsd/wml/wml.xsd)：

```
 <xsd:element name="t" type="CT_Text">
            <xsd:annotation>
                <xsd:documentation>Text</xsd:documentation>
            </xsd:annotation>
        </xsd:element>

        <xsd:element name="delInstrText" type="CT_Text">
            <xsd:annotation>
                <xsd:documentation>Deleted Field Code</xsd:documentation>
            </xsd:annotation>
        </xsd:element> 
```

FWIW，ObjectFactory 包含：

```
public Text createText() {
    return new Text();
}

@XmlElementDecl(namespace = "http://schemas.openxmlformats.org/wordprocessingml/2006/main", name = "delInstrText", scope = R.class)
public JAXBElement<Text> createRDelInstrText(Text value) {
    return new JAXBElement<Text>(_RDelInstrText_QNAME, Text.class, R.class, value);
} 
```

这是使用 MOXy 罐子：

```
 +- org.eclipse.persistence:org.eclipse.persistence.moxy:jar:2.4.1
        |  +- org.eclipse.persistence:org.eclipse.persistence.core:jar:2.4.1
        |  |  \- org.eclipse.persistence:org.eclipse.persistence.asm:jar:3.3.1.v201206041142
        |  \- org.eclipse.persistence:org.eclipse.persistence.antlr:jar:3.2.0.v201206041011 
```

**更新：**

这是一个测试用例：

```
import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBElement;
import javax.xml.bind.Marshaller;

import org.docx4j.wml.R;
import org.docx4j.wml.Text;

public class MOXyTest {

    public static void main(String[] args) throws Exception {

        JAXBContext jc = JAXBContext.newInstance("org.docx4j.wml");
//        System.out.println(Version.getVersion());
//        System.out.println(jc.getClass());

        R run = new R();
        Text text = new Text();
        run.getContent().add(text);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(run, System.out);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:10:44.287

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

* * *

**更新**

我们已经能够重现您在 EclipseLink 2.4.1 中看到的错误。我们无法在 EclipseLink 2.4.2 或 2.5.0 流中重现该问题。我建议下载最新的 2.4.2 nightly build 并尝试一下：

*   [http://www.eclipse.org/eclipselink/downloads/nightly.php](http://www.eclipse.org/eclipselink/downloads/nightly.php)

我们仍在调查这个问题，以确保它得到真正的修复。

* * *

**原始答案**

到目前为止，当 MOXy 用作 JAXB 提供程序时，我无法重现您的问题的结果。您能否提供一些其他信息来帮助我重现您的用例。以下是我迄今为止尝试过的：

**Java 模型**

我从 GitHub 上的以下位置获取了 Java 模型：

*   [https://github.com/plutext/docx4j/tree/master/src/main/java](https://github.com/plutext/docx4j/tree/master/src/main/java)

**jaxb.properties**

我添加了一个`jaxb.properties`在`org.docx4j.wml`包中调用的文件，以启用 MOXy 作为 JAXB 提供程序。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

下面是我用来尝试重现该问题的演示代码：

```
package org.docx4j.wml;

import javax.xml.bind.*;
import org.eclipse.persistence.Version;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance("org.docx4j.wml");
        System.out.println(Version.getVersion());
        System.out.println(jc.getClass());

        Text text = new Text();

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(text, System.out);
    }

} 
```

**输出**

下面是运行演示代码的输出。我看到正确的根元素被`t`编组而不是问题`delInstrText`中描述的那样。

```
2.4.1
class org.eclipse.persistence.jaxb.JAXBContext
<?xml version="1.0" encoding="UTF-8"?>
<ns0:t xmlns:ns2="http://schemas.openxmlformats.org/schemaLibrary/2006/main" xmlns:ns1="http://schemas.openxmlformats.org/officeDocument/2006/math" xmlns:ns4="http://schemas.openxmlformats.org/drawingml/2006/main" xmlns:ns3="http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing" xmlns:ns0="http://schemas.openxmlformats.org/wordprocessingml/2006/main" xmlns:ns5="http://schemas.openxmlformats.org/officeDocument/2006/relationships"/> 
```

# tofixed - 我正在尝试限制输出值的小数位

> ID：13242798
> 
> 赞同：1
> 
> 时间：2012-11-06T00:47:16.173
> 
> 标签：tofixed

我目前拥有的是一个脚本，它在将不同的输入字段加在一起后输出一个值。

```
 <script type="text/javascript">
    $(function() {
        $("#addAll").click(function() {
            var add = 0;
            $(".amt").each(function() {
                add += Number($(this).val());
            });
            $("#para").html("&#36;<input size=&quot;18&quot; name=&quot;salestax&quot; class=&quot;amt&quot; readonly type=&quot;text&quot; value=" + add + " />");
        });
    });
</script> 
```

我试图将此输出的小数位限制为仅 2 位小数。

我需要添加什么？我认为它是 toFixed() 但我已经在很多地方尝试过。应该放在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T02:02:33.603

您应始终避免降低浮点值的精度，直到尽可能晚。在您的情况下，您希望`toFixed()`在构造显示 HTML 的行中应用。此外，您在 value 属性周围缺少引号。您的代码应如下所示：

```
$("#para").html("&#36;<input size=&quot;18&quot; name=&quot;salestax&quot; class=&quot;amt&quot; readonly type=&quot;text&quot; value=&quot;" + add.toFixed(2) + "&quot; />"); 
```

我不确定这`&quot;`是否真的有必要，我认为您可以只使用撇号 ( `'`)。

# vba - 选择两个单词之间的文本并删除空行

> ID：13242799
> 
> 赞同：0
> 
> 时间：2012-11-06T00:47:16.690
> 
> 标签：vba, replace, ms-word

我正在尝试删除两个占位符之间的 word 文档中出现的空行。

1.  我不确定如何在整个文档中找到占位符的位置。

2.  我不确定如何在占位符之间搜索并用单个回车替换多个回车。

我试图在[这里](https://stackoverflow.com/questions/6425595/word-vba-how-to-select-text-between-two-substrings-and-assign-to-variable)转换代码，但无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T22:20:11.750

如果您的占位符始终相同，您可以从 Word 的“查找和替换”对话框中完成整个操作。无需代码。

例如，要替换多个回车符：

*   Ctrl+H
*   打开“使用通配符”
*   查找： (Placeholder1)^13{2,}(Placeholder2) \包括括号
*   替换：\1 ^13 \2

如果您试图将其合并到更大的代码块中：

```
With Selection.Find
    .Text = "(Placeholder1)^13{2,}(Placeholder2)"
    .Replacement.Text="\1" & " ^13 " & "\2"
    .Forward = True
    .Wrap = wdFindContinue
    .MatchWildcards = True
    .Execute
End With 
```

让我知道这是否适合你。

# velocity - 从 .vm 文件中读取速度令牌/标签

> ID：13242800
> 
> 赞同：2
> 
> 时间：2012-11-06T00:47:19.477
> 
> 标签：velocity

我有一个应用程序，我正在尝试创建一个速度模板存储库，这将帮助我集中所有电子邮件模板，并允许我创建一个通信中心。所有模板都将在运行时调用，并通过服务填充数据。

我的问题是，当他们为速度模板定义模板输入时，我需要为用户提供可选和强制参数列表。

有没有办法从速度模板文件中读取标记/标签并提取它们？

就像我想要一个令牌列表 $name.address.streetName 可以从 .vm 文件中获得。

我不想去 Regex 。

我不必缓存或重用它们，它只是一次读取并将默认、强制和可选参数存储在数据库中。

我遵循这些模式： http: [//kickjava.com/src/org/apache/velocity/test/view/TemplateNodeView.java.htm](http://kickjava.com/src/org/apache/velocity/test/view/TemplateNodeView.java.htm)

[如何使用字符串作为速度模板？](https://stackoverflow.com/questions/1432468/how-to-use-string-as-velocity-template)

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T22:58:35.780

我让它像这样工作

```
 RuntimeServices runtimeServices = RuntimeSingleton.getRuntimeServices();            
        StringReader reader = new StringReader(String velocityTemplateBodu);
        SimpleNode node = runtimeServices.parse(reader, "dummyOne.vm");

        for(int i=0; i<node.jjtGetNumChildren();i++){
            if(node.jjtGetChild(i) instanceof org.apache.velocity.runtime.parser.node.ASTReference ){
                System.out.println("Node -----------------"+i +"---"+node.jjtGetChild(i).literal());
            }
        } 
```

使用 SimpleNode 类，您可以获得 .vm 文件中的所有节点。

使用 javaCC 作为 ASTReference 和 ASTText（都扩展 SimpleNode）来读取节点。要获取令牌，您需要获取 ASTReference 并使用 ASTText 获取 HTML 文本。

# powershell - PowerShell 使用 Documents 文件夹作为脚本的默认位置是否有充分的理由？

> ID：13242801
> 
> 赞同：1
> 
> 时间：2012-11-06T00:47:28.903
> 
> 标签：powershell, conventions

MS 将 Documents 文件夹硬编码为 WindowsPowerShell 的默认位置是否有很好的技术或其他原因？MS 过去曾因过多的配置而不是约定而受到批评（WCF？），但可以在 PowerShell 中进行更多配置。我和我认为大多数开发人员都喜欢将他们的开发工作集中在一个单独的文件夹或卷中，远离个人和系统文件。

例如，如果您安装 PoshGit，它将自行安装在 C:\Users\Your Name\WindowsPowerShell\Modules 中。我不希望它安装在我自己的开发分区 d:\Dev\PowerShellScripts 中。没有控制此位置的环境变量。

这是有原因的还是我不明白？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:41:09.607

你能再解释一下自己吗。

根据我的理解，PowerShell.exe 解释器基目录是由 , 定义的`$env:HOMEDRIVE`，`$env:HOMEPATH`可以使用用户配置文件进行更改。

如以下屏幕截图所示：

![PowerShell 基础目录](../Images/8f6b8f9c71f01baf13bfff4411416aa0.png) ![Active Directory 配置文件设置](../Images/657a5a68053d7b3e117001e7ac95ae76.png)

* * *

编辑：

好的，屏幕截图来自 Active Directory MMC 中的用户属性，您的 Windows 7 用户属性中有一个最简单的。但这与你的问题无关。

您的问题与模块安装有关。您必须知道的是，模块可以安装在任何地方（即使在共享目录中也可以使用一些技巧）。默认情况下，环境变量`$env:PSModulePath`指向`Get-Module -ListAvailable`查找它们的路径。因此，您可以添加`d:\Dev\PowerShellScripts\Modules`此路径，然后将`C:\Users\Your Name\WindowsPowerShell\Modules`PoshGit 创建的子文件夹复制到您的`Modules`目录中，它应该可以工作。与 Snapins 相对的模块不需要注册。

现在 PoshGit 选择将模块放在用户配置文件中，而不是让您选择位置的原因是 PoshGit 安装程序问题。

有关更多解释，请阅读[Modules](http://technet.microsoft.com/en-us/library/hh847804.aspx)和[about_environment_variables](http://technet.microsoft.com/en-us/library/hh847808.aspx)。

# c# - 通过在 C# 中更改数组的值来加倍数组大小

> ID：13242808
> 
> 赞同：0
> 
> 时间：2012-11-06T00:48:27.060
> 
> 标签：c#, asp.net, .net

我有这样的刺痛：

```
string searches = "my test"; 
```

然后我可以将它们分解成单独的术语，如下所示：

```
string[] split = searches.Split(new Char[] { ' ' }); 
```

这给了我：

```
[0] = "my"
[1] = "test" 
```

有什么快速的方法可以做到以下几点：

```
[0] = "my"
[1] = "test"
[2] = "my:"
[3] = "test:"
[4] = "my,"
[5] = "test," 
```

我需要将搜索词加倍并将“：”附加到加倍集的末尾。最简单有效的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:51:05.537

一种方法是快速而肮脏的 LINQ。如果你有很多东西要附加，你可以利用一个你想要附加的数组和一个可靠的 FOR 循环。

```
string[] stuffToAppend = new String[]{ ":", "," };

string[] split = searches.Split(new Char[] { ' ' });
List<String> newStrings = new List<String>(split);
foreach( String append in stuffToAppend )
    newStrings.AddRange( split.Select( s => s + append ) ); 
```

如果您确实需要一个数组，您现在可以通过 newStrings.ToArray() 获取新数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T00:53:57.900

一种简单的方法是使用联合：

```
 string searches = "my test";
            var split = searches.Split(new Char[] { ' ' });
            var modifiedArray1 = split.Select(x => x + ":");
            var modifiedArray2 = split.Select(x => x + ",");
            split = split.Union(modifiedArray1).ToArray().Union(modifiedArray2).ToArray();
            foreach (var s in split)
            {
                Console.WriteLine(s);
            } 
```

# facebook-like - OMG 我该如何解决最后两个问题：关于：无关的属性和解析器不匹配的元数据：我不知道足够的语法来做到这一点

> ID：13242812
> 
> 赞同：1
> 
> 时间：2012-11-06T00:48:56.473
> 
> 标签：facebook-like

我有最后一个警告，不知道如何解决。我花了大约一周零三天的时间在这个网站上阅读东西，但我只是没有背景来修复这些警告让我彻夜难眠。很抱歉打扰你们，但我不知道使这些东西正常工作的定义和语法，提前谢谢你们。这是页面：

应该修复的开放图警告

无关属性：此类型的对象不允许名为“fb:page_id”的属性。

解析器不匹配元数据：此元数据的解析器结果与输入元数据不匹配。这很可能是由于数据以一种意外的方式排序、为一个属性提供了多个值而只期望一个值、或者给定属性的属性值不匹配造成的。

以下是解析结果中未看到的输入属性： 'fb:page_id' 对象属性

fb:admins: 长度为 1 的数组⍾ 691633904

og:url: [http://www.penosoimages.com/](http://www.penosoimages.com/) og:type: website og:title: Northern Virginia Photography Services og:image:
og:description: 北弗吉尼亚州的活动报道和肖像摄影 og:site_name: Vincent Penoso Photography og:updated_time: 1352162367 Raw Open Graph 文档信息

元标记：元标记：元标记：元标记：元标记：元标记：元标记：URL

# shell - 无法将标准输出传递给变量

> ID：13242813
> 
> 赞同：1
> 
> 时间：2012-11-06T00:49:03.647
> 
> 标签：shell

看起来很傻......我不知道我做错了什么......

我需要将 .txt 文件编码更改为 utf-8。这里的脚本：

```
#!/bin/bash
for NOME_ARQ in *.txt do

##1 - verify file encoding and store in CODIFICACAO
CODIFICACAO=$(file --mime-encoding "$NOME_ARQ" | cut -d" " -f2)

##2 - convert to utf-8
iconv -f "$CODIFICACAO" -t utf-8 "$NOME_ARQ" -o temp01.txt

done 
```

为##1尝试了几种方法，但总是得到以下错误：

```
sc-sini2csv: line 5: sintax error near `token' unexpected `CODIFICACAO=$(file --mime-encoding "$NOME_ARQ" | cut -d" " -f2)'
sc-sini2csv: line 5: `CODIFICACAO=$(file --mime-encoding "$NOME_ARQ" | cut -d" " -f2)' 
```

我们从错误中看到，分配变量 $CODIFICACAO 时会出现问题

据我环顾四周，有两种将 STDOUT 分配给变量的方法：

1-使用反引号：

```
CODIFICACAO=`file --mime-encoding "$NOME_ARQ" | cut -d" " -f2` 
```

或者

2-使用$（）：

```
CODIFICACAO=$(file --mime-encoding "$NOME_ARQ" | cut -d" " -f2) 
```

他们都会给出同样的错误。

正如我所写，这似乎很愚蠢，但我被这个错误困住了......任何地狱将不胜感激！

PS：直接从终端（在 bash 脚本之外）使用 $() 或反引号将起作用....但我需要将它放入 shell 脚本中。

及时：我正在使用带有 bash shell 的 ubuntu

提前致谢 ！！！西尔维奥

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T00:52:08.200

您缺少一个分号：

```
for NOME_ARQ in *.txt; do 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T00:52:51.027

`do`应该在新的一行：

```
for NOME_ARQ in *.txt
  do 
```

# android - Android webview onReceivedError 显示自定义错误页面并重新加载以前的url onResume

> ID：13242817
> 
> 赞同：7
> 
> 时间：2012-11-06T00:49:46.427
> 
> 标签：android, webview

我们假设已经加载了一个 url（我们称它为原始 url）。

```
webView.setWebViewClient(new WebViewClient() {
    @Override
    public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
        webView.loadUrl("file:///android_asset/missing.html");
    } 
}); 
```

我创建了自己的错误页面，以防止出现“网页不可用消息”。应用程序必须在每次恢复时重新加载 webview。所以我有以下代码行：

```
@Override
protected void onResume() {
    super.onResume();
    webView.reload();
} 
```

这里的问题是，当错误页面被加载时（例如当用户没有连接到互联网时），然后连接再次可用并且用户恢复应用程序时，原始 url 没有加载（这似乎是逻辑，现在是missing.html）。但这是一个不错的方法吗？对问题有什么建议吗？

如果用户想要重新加载内容，还有一个刷新按钮。这里同样的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-25T16:16:50.673

您应该加载所需的 url 而不是使用 webView.reload()，如下所示：

```
webView.loadUrl("http://yoururl"); 
```

或返回上一页：

```
webView.loadUrl("javascript:history.go(-1)"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:54:21.393

我会像[http://developer.android.com/training/basics/network-ops/managing.html上建议的那样检查 onResume() 中的互联网连接](http://developer.android.com/training/basics/network-ops/managing.html)

```
public static boolean isOnline() {
  ConnectivityManager connMgr = (ConnectivityManager) App.instans.getSystemService(Context.CONNECTIVITY_SERVICE);
  NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();
  return (networkInfo != null && networkInfo.isConnected());
}

public void onResume() { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-14T09:35:21.197

不仅移动连接可能会断开，而且页面可能会变得不可用，正如您正确所说的那样，使用 webview.loadUrl("someerrorpage.html") 会创建虚假历史记录并在用户尝试刷新或按下时导致问题。

我的解决方案是用我自己的自定义错误页面替换默认错误页面的内容，例如

```
webView.evaluateJavascript("javascript:document.open();document.write('your custom error html');document.close();", null); 
```

# delphi - 有没有更简单的方法来进行布尔转换？

> ID：13242819
> 
> 赞同：21
> 
> 时间：2012-11-06T00:49:59.233
> 
> 标签：delphi, boolean, type-conversion, delphi-xe2

我在几乎所有的项目中都多次使用过这种场景，当我进行某种数据转换时，当涉及到布尔值时，在简化它时我有点迷茫。下面的这句话在我的代码中就像一个大拇指一样突出：

```
if BoolVal then
  StrVal:= 'True'
else
  StrVal:= 'False'; 
```

我想知道是否有更简单的方法来执行此评估？也许使用`Case`我不知道的声明？我的实际实现比单纯的更复杂，`StrVal`但它确实包括返回两个不同的值，具体取决于它是 True 还是 False。例如，这里有一些真实的代码......

```
if fsBold in Can.Font.Style then
  ConvertTo(AddSomeOtherText + 'True')
else
  ConvertTo(AddSomeOtherText + 'False'); 
```

这只是为了强调我希望的简单。我想知道我是否可以按照以下方式做一些事情：

```
ConvertTo(AddSomeOtherText + BoolToStrCase((fsBold in Can.Font.Style), 'True', 'False')); 
```

我确定这不是一个真正的命令，但我在一行中寻找那种简单性。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-06T00:54:17.200

在单元`StrUtils`中，有 ifthen()

```
StrVal := IfThen(BoolVal,'True','False'); 
```

对于这种特定情况，您甚至可以使用：

```
StrVal := BoolToStr(BoolVal); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-06T06:36:43.387

Ow com'on 没有人听说过布尔索引的数组吗？

```
const
  BOOL_TEXT: array[boolean] of string = ('False', 'True');
  YES_NO_TEXT: array[boolean] of string = ('No', 'Yes');
  ERROR_OR_WARNING_TEXT: array[boolean] of string = ('Warning', 'Error'); 
```

它实际上是 BoolToStr 本身使用的！

```
function BoolToStr(B: Boolean; UseBoolStrs: Boolean = False): string;
const
  cSimpleBoolStrs: array [boolean] of String = ('0', '-1'); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-06T00:55:20.843

为了将布尔值转换为字符串，有[BoolToStr](http://docwiki.embarcadero.com/Libraries/XE3/en/System.SysUtils.BoolToStr)，它至少从 Delphi 2007 开始就已经存在。您可以在最后一个示例中使用它，如下所示：

```
TextVal := BoolToStr((fsBold in Can.Font.Style), True); 
```

对于另一个方向（字符串到布尔值），你必须做一个实际的函数。这样的事情应该让你开始：

```
function StringToBoolean(const Value: string): Boolean;
var
  TempStr: string;
begin
  TempStr := UpperCase(Value);
  Result := (TempStr = 'T') or 
            (TempStr = `TRUE`) or 
            (TempStr = 'Y');
end;

BoolVal := StringToBoolean('True');     // True
BoolVal := StringToBoolean('False');    // False
BoolVal := StringToBoolean('tRuE');     // True 
```

当然，如果有废话，这不起作用`Value`，但是......

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-23T14:09:21.480

尝试其中任何一个。两者都比默认版本快得多。

```
type
 TBooleanWordType = (bwTrue, bwYes, bwOn, bwEnabled, bwSuccessful, bwOK, bwBinary);

 BooleanWord: array [Boolean, TBooleanWordType] of String =
  (
    ('False', 'No',  'Off', 'Disabled', 'Failed',     'Cancel', '0'),
    ('True',  'Yes', 'On',  'Enabled',  'Successful', 'Ok',     '1')
  );

function BoolToStr(Value: boolean; const BooleanWordType: TBooleanWordType = bwTrue): String; inline;
begin
   Result := BooleanWord[Value, BooleanWordType];
end;

function StrToBool(const S: String): Boolean; inline;
begin
  Result := False;
  case Length(S) of
    4: Result := (LowerCase(S) = 'true');
    5: Result := not (LowerCase(S) = 'false');
  end;
end; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-07-01T16:37:41.160

如果您喜欢钝化代码，这是一种有趣的方法（尤其是它是较大 Format 语句的一部分），但是如果您在后面（或前面）有更多参数，则必须小心，您必须在后面的参数索引明确的布尔值（告诉你它是钝的）：

`Format('The value of value is %*:s', [Integer(value)+1, 'False', 'True']);`

任何被抓到在生产代码中使用它的人都应该受到严厉的处理！

# spring - Spring config 位置文件未找到异常

> ID：13242823
> 
> 赞同：1
> 
> 时间：2012-11-06T00:50:29.760
> 
> 标签：spring, spring-security

在我的网络应用程序中，我正在尝试使用弹簧安全性。我有以下项目结构：

[![项目结构](../Images/adf11784b434b52e7d0cc651bf7acd6f.png)](https://i.stack.imgur.com/pdehF.png)

在我的 web.xml 中，我像这样设置 configLocations：

[![项目结构](../Images/78320034ec9452c862181fdae0999964.png)](https://i.stack.imgur.com/Mn8qE.png)

在我的 HibernateUtil 中，我像这样创建 ClassPathXmlApplicationContext：

[![项目结构](../Images/65440655794f51f5c582a7406548fb23.png)](https://i.stack.imgur.com/3mnvI.png)

但是，当我执行应用程序时，出现以下错误：

```
GRAVE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML    document from class path resource [resources/applicationContext.xml]; nested exception is    java.io.FileNotFoundException: class path resource [resources/applicationContext.xml] cannot     be opened because it does not exist
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:341)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)
at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)
at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:131)
at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:527)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:441)
at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4723)
at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5226)
at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5221)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680)
Caused by: java.io.FileNotFoundException: class path resource [resources/applicationContext.xml] cannot be opened because it does not exist
at org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:157)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:328)
... 20 more 
```

可能有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T00:57:28.350

请参阅 Maven 战争插件。

检查您的目标文件夹实际上包含文件。

[https://maven.apache.org/plugins/maven-war-plugin/examples/adding-filtering-webresources.html](https://maven.apache.org/plugins/maven-war-plugin/examples/adding-filtering-webresources.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T00:58:15.060

该错误清楚地告诉您它无法在您的类路径中找到 resources/applicationContext.xml。

查看您的代码组织，我认为问题在于您的 Spring applicaitonContext.xml 文件直接位于 WEB-INF 下并且在典型的 Web 应用程序中，这**不在**类路径中。您最好创建一个 WEB-INF/classes/ 文件夹并将您的 applicationContext.xml 文件放在那里。

由于错误是在抱怨 resources/appliationContext.xml，您可能还需要创建一个 WEB-INF/classes/resources/ 文件夹并将其放入其中。

# c# - 带有字典的 DataContract 反序列化器

> ID：13242825
> 
> 赞同：0
> 
> 时间：2012-11-06T00:50:43.337
> 
> 标签：c#, .net, datacontractserializer

如果我有一个像这样的 xml：

```
<Foo>
<Bar>
    <A>aaaa</A>
    <B>bbb</B>
</Bar>
<C>ccc</C></Foo> 
```

我可以使用相同的 DataContract Deserializer 将其反序列化为具有字典结构和字符串属性的 Foo 类吗？以 A 和 B 作为键，将“aaaa”和“bbb”作为字典中的值？

```
[DataContract]
class Foo
{

  [DataMember]
  public Dictionary<string, string> Bar
  { get; set; }

  [DataMember]
  public string C { get; set; }
} 
```

我知道在 MSDN 网站上有一个使用 CollectionDataContract 的示例，但它只使用 A 作为键，B 作为值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T03:36:08.633

没有办法自动执行此操作。如果你想要一本字典，你应该使用 LINQ to XML，并自己创建一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T03:43:53.327

我认为你能得到的最接近的东西是这样的

```
<UserQuery.Foo xmlns="http://schemas.datacontract.org/2004/07/" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
    <Bar>
       <Barentry>
          <A>aaa</A>
          <B>bbb</B>
       </Barentry>
    </Bar>
<C i:nil="true"/>
</UserQuery.Foo> 
```

使用此代码进行测试：

```
void Main()
{

var B=new Bar();
B.Add("aaa","bbb");
var tFoo=new Foo(){Bar=B};
DataContractSerializer ser=new DataContractSerializer(typeof(Foo));
ToXml<Foo>(tFoo).Dump();

}

        public static string ToXml<T>(T obj)
        {
            DataContractSerializer dataContractSerializer = new DataContractSerializer(obj.GetType());
            String text;
            using (MemoryStream memoryStream = new MemoryStream())
            {
                dataContractSerializer.WriteObject(memoryStream, obj);
                byte[] data = new byte[memoryStream.Length];
                Array.Copy(memoryStream.GetBuffer(), data, data.Length);
                text = Encoding.UTF8.GetString(data);
            }
            return text;
        }

[System.Runtime.Serialization.DataContract]
public class Foo
{

  [System.Runtime.Serialization.DataMember]
  public Bar Bar
  { get; set; }

  [System.Runtime.Serialization.DataMember]
  public string C { get; set; }
}

[CollectionDataContract
    (ItemName="Barentry",
    KeyName = "A", 
    ValueName = "B")]
public class Bar:Dictionary<string,string>{
} 
```

# internet-explorer-9 - Internet Explorer 10 框阴影大小

> ID：13242826
> 
> 赞同：2
> 
> 时间：2012-11-06T00:50:47.200
> 
> 标签：internet-explorer-9, size, conditional, css, internet-explorer-10

通常我不会在乎不同浏览器中 box-shadow 渲染的微小差异，但在这种情况下，box-shadow 的大小很重要。IE9 和 IE10 呈现[更小的 box-shadow](https://stackoverflow.com/questions/5982687/css3-box-shadow-blur-in-ie9)。Explorer 9 可以使用条件注释来修复稍大的框阴影，但 IE10 似乎已经取消了对条件注释的支持。有没有办法纠正 IE10 的盒子阴影大小，让它像 safari、chrome、firefox 一样大一点？

[我知道这与这个问题](https://stackoverflow.com/questions/9900311/how-do-i-target-only-ie10-for-certain-situations)有点相似，但也许有人对仅在 IE9/10 或 IE10 中有效的 box-shadows 大小有一个技巧。

作为记录 - 这是一个响应式站点，并且有问题的框阴影应用于具有百分比宽度的 li 元素（用于导航）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T12:13:39.950

我找到了解决方案。那里有几个 ie10 hack，但这个是`CSS only`针对`IE9`和`IE10`. 它被称为`@media Zero Hack`. [您可以在http://www.impressivewebs.com/ie10-css-hacks/](http://www.impressivewebs.com/ie10-css-hacks/)找到这个和其他 ie10 hack

```
.navigation ul li a {
  -moz-box-shadow: 2px 2px 7px #2d231c;
  -webkit-box-shadow: 2px 2px 7px #2d231c;
  -o-box-shadow: 2px 2px 7px #2d231c;
  box-shadow: 2px 2px 7px #2d231c;
}
@media screen and (min-width:0\0) {
    /* IE9 and IE10 rule sets go here */
.navigation ul li a {
  box-shadow: 2px 2px 15px #3a312a;
 }
} 
```

它在`IE9/10`. 如果这个错误被修复，`IE11`这也将是未来的证明。不知道怎么`IE11`处理`box-shadow`。更多关于[将 IE 特定的 CSS 移动到 @media 块中](http://blog.keithclark.co.uk/moving-ie-specific-css-into-media-blocks/)

# java - 在android中将String转换为Date会抛出ParseException

> ID：13242827
> 
> 赞同：-1
> 
> 时间：2012-11-06T00:50:54.473
> 
> 标签：java, android, date

只是不知道为什么这个片段不正确。

```
Calendar now = Calendar.getInstance();
DateFormat formatter = new SimpleDateFormat("yyyy/MM/dd"); 
String nowDate1 = formatter.format(now.getTime());
Date nowDate = formatter.parse(nowDate1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T01:08:18.577

根据您的评论，您不包括[try / catch 语句](http://docs.oracle.com/javase/tutorial/essential/exceptions/try.html)：

```
try {
    Calendar now = Calendar.getInstance();
    DateFormat formatter = new SimpleDateFormat("yyyy/MM/dd"); 
    String nowDate1 = formatter.format(now.getTime());
    Date nowDate = formatter.parse(nowDate1);
}
catch (Exception e) {
    e.printStackTrace();
} 
```

由于*parse()*可能在运行时抛出***ParseException***，编译器会警告你，这就是为什么你需要考虑 ParseException 的可能性。

# javascript - javascript getTime() 仅限 10 位数字

> ID：13242828
> 
> 赞同：11
> 
> 时间：2012-11-06T00:50:59.047
> 
> 标签：javascript, datetime

我正在使用以下函数来使用 javascript 获取时间：

```
function timeMil(){
    var date = new Date();
    var timeMil = date.getTime();

    return timeMil;
} 
```

我得到的价值是：

> 1352162391299

在 PHP 中，我使用`time();`函数来获取时间，我得到的值是

```
1352162391 
```

如何转换 javascript time 的值以删除最后 3 位数字并使其仅为 10 位数字。

> 从 1352162391299
> 到 1352162391
> 使得 Javascript 时间与 PHP 时间相同。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-06T00:52:00.777

我认为您只需将其除以 1000 毫秒，您将获得以秒为单位的时间

```
Math.floor(date.getTime()/1000) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-06T02:11:20.923

如果简洁是可以的，那么：

```
function secondsSinceEpoch() {
    return new Date/1000 | 0;
} 
```

在哪里：

*   `new Date`相当于`new Date()`
*   `| 0`截断结果的小数部分并且等价于`Math.floor(new Date/1000)`（参见[What does |0 do in javascript](https://stackoverflow.com/questions/33367264/what-does-0-do-in-javascript)）。

使用更新的功能，并允许将 Date 传递给函数，代码可以简化为：

```
let getSecondsSinceEpoch = (x = new Date) => x/1000 | 0; 
```

但我更喜欢函数声明，因为我认为它们更清晰。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-31T06:19:42.603

尝试将其除以 1000，并使用 parseInt 方法。

```
const t = parseInt(Date.now()/1000);

console.log(t); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T00:52:13.147

您可以除以 1000 并`Math.floor()`在 JavaScript 上使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-07T20:31:31.933

```
function ts() {
    return parseInt(Date.now()/1000);

} 
```

# python - Python 3\. 从列表中返回

> ID：13242837
> 
> 赞同：1
> 
> 时间：2012-11-06T00:52:16.617
> 
> 标签：python, python-3.x

我有一个这样的列表：

```
videos = ['http://www.youtube.com/watch?v=oKI-tD0L18A',
           'http://www.youtube.com/watch?v=82LCKBdjywQ',
           'http://www.youtube.com/watch?v=GpNSip5gyKo] 
```

我想将其作为列表返回，但使用更简单的形式，例如：“youtu.be/(id)”而不是“http://www.youtube.com/watch?v=(id)”。

我希望你们能理解我的问题。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T01:14:31.310

试试这个列表理解。它在“=”符号处拆分每个 url 以获取视频 ID。

```
 shortvids = ['youtu.be/'+x.split('=')[1] for x in videos] 
```

结果：

```
['youtu.be/oKI-tD0L18A', 'youtu.be/82LCKBdjywQ', 'youtu.be/GpNSip5gyKo'] 
```

# mysql - SQL 查询 - 两个具有多对一关系的表（规范化问题）

> ID：13242840
> 
> 赞同：2
> 
> 时间：2012-11-06T00:52:42.833
> 
> 标签：mysql, sql, normalization

我有这个示例表：

```
table ORDERS

client   orderno   cant1   code1   notes1   cant2   code2   notes2   cant[i]   code[i] [...]
--------------------------------------------------------------------------------------
1          1        3      AA01    Test      4      BB01    Testing
2          2        10     XX05    Test      

table PRODUCTS

code   prod    price
---------------------
AA01   Engine   100  
BB01   Wheel     50  

table CLIENTS

client   name      address     telephone
-----------------------------------------
  1     Maxwell   24 1st st    0987654321
  2     Hammer    77 main st   1234567890 
```

我需要将它们关联起来以获取每个产品线的数量、产品名称和价格（它们是 30 cant[i]、code[i] 和 notes[i]）以及客户的信息（姓名、地址、 ETC）

我发现了这种情况，但我不明白如何将其应用于我的：[SQL query two tables with relationship one-to-many](https://stackoverflow.com/questions/9420475/sql-query-two-tables-with-relation-one-to-many)

我希望它不会太复杂。

提前致谢！

# 编辑

感谢 ElectricLlama，我意识到这里的问题是存储订单的表。根据他的回答，数据库的规范化将改善我获取信息的方式。

对于任何对此解决方案感兴趣的人，我发现了这个很棒的网站： http: [//www.devshed.com/c/a/MySQL/An-Introduction-to-Database-Normalization/](http://www.devshed.com/c/a/MySQL/An-Introduction-to-Database-Normalization/)

这个SO答案清除了一切！超级清晰易懂！ [https://stackoverflow.com/a/1258776/888292](https://stackoverflow.com/a/1258776/888292)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T04:05:00.623

查看链接中的内容-是的，这似乎是很多废话，但这可能是获得所需内容的唯一方法。

问题是您的表格没有标准化。具体来说，您不应该有名为 code1 code2 code3 code4... code30 的字段

这种设计有很多缺陷，包括当客户有 31 种产品时会发生什么？

在规范化数据库中，您将有一个包含一组斜面、代码和注释的表，并且每个产品将有一行。

但我猜你无法正常化它。

很好地提出了您自己的答案，而且您现在还亲身体验了不规范化数据库的影响。

您*可能*要考虑的是创建一个视图，为您规范化它。它将介绍性能问题，但它会向您介绍视图，并让您有机会了解解决方案在规范化表中的样子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T04:26:18.750

同上@ElectricLlama & 这里有一些链接可以帮助你学习 SQL：

*   [W3Schools：SQL 教程](http://www.w3schools.com/sql/default.asp)
*   [SQLServerCentral.com 楼梯系列](http://www.sqlservercentral.com/stairway/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T13:05:44.903

我认为你的桌子应该看起来像

表订单

-------------

orderno
客户
代码
无法
注释

这里make orderno，client和code做一个表的复合主键

# vb.net - 使用 gridview/templatefield 更新 SQL 数据库

> ID：13242846
> 
> 赞同：0
> 
> 时间：2012-11-06T00:53:14.520
> 
> 标签：vb.net, gridview, sqldatasource, templatefield

任何人都知道如何使用模板字段所在的网格视图中已经使用的 SqlDataSource 和使用更新功能的按钮字段来获取文本框的 Templatefield 列，以将键入的数据反馈回 sql 数据库？我只是想知道是否有人知道如何让它工作，因为我无法找到任何方法来做到这一点。

如果你们中的任何人需要更多信息来帮助您解决这个难题，请告诉我。

如果我启用编辑和更改文本框中的信息以及同一行中的另一列字段，我可以将信息反馈到 SQL 服务器，但如果我只更改信息，它不会更新文本框是否处于编辑模式或只是单击更新按钮。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>
<body>
<center>
<form id="form1" runat="server">
<div>

    <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        DataKeyNames="Brdcst_Nbr" DataSourceID="SqlDataSource1" 
        EmptyDataText="There are no data records to display." Width="657px">
        <Columns>
            <asp:BoundField DataField="Brdcst_Nbr" HeaderText="Brdcst_Nbr"     ReadOnly="True" 
                SortExpression="Brdcst_Nbr" />
            <asp:BoundField DataField="Item_Nbr" HeaderText="Item_Nbr" 
                SortExpression="Item_Nbr" ReadOnly="True" />
            <asp:CheckBoxField DataField="IsPicked" HeaderText="IsPicked" 
                SortExpression="IsPicked" />
            <asp:TemplateField SortExpression="Row" HeaderText="Row">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Mode="twoway" AutoPostBack="true" CausesValidation="true" Text='<%# Bind("Row") %>'></asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Mode="twoway" AutoPostBack="true" CausesValidation="true" Text='<%# Bind("Row") %>'></asp:TextBox>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:ButtonField ButtonType="Button" CommandName="Update" Text="Update" />
            <asp:ButtonField ButtonType="Button" CommandName="Edit" Text="Edit" />
        </Columns>
        <EditRowStyle HorizontalAlign="Center" VerticalAlign="Middle" />
        <RowStyle HorizontalAlign="Center" VerticalAlign="Middle" />
    </asp:GridView>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConflictDetection="CompareAllValues" 
        ConnectionString="<%$ ConnectionStrings:ORDCConnectionString1 %>" 
        DeleteCommand="DELETE FROM [Test_New_Transpick] WHERE [Brdcst_Nbr] = @original_Brdcst_Nbr AND (([Item_Nbr] = @original_Item_Nbr) OR ([Item_Nbr] IS NULL AND @original_Item_Nbr IS NULL)) AND [IsPicked] = @original_IsPicked AND (([Row] = @original_Row) OR ([Row] IS NULL AND @original_Row IS NULL))" 
        InsertCommand="INSERT INTO [Test_New_Transpick] ([Brdcst_Nbr], [Item_Nbr], [IsPicked], [Row]) VALUES (@Brdcst_Nbr, @Item_Nbr, @IsPicked, @Row)" 
        UpdateCommand="UPDATE [Test_New_Transpick] SET [IsPicked] = @IsPicked, [Row] = @Row WHERE [Brdcst_Nbr] = @original_Brdcst_Nbr" 
        OldValuesParameterFormatString="original_{0}" 
        ProviderName="<%$ ConnectionStrings:ORDCConnectionString1.ProviderName %>" 
        SelectCommand="SELECT * FROM [Test_New_Transpick]" >
        <DeleteParameters>
            <asp:Parameter Name="original_Brdcst_Nbr" Type="String" />
            <asp:Parameter Name="original_Item_Nbr" Type="String" />
            <asp:Parameter Name="original_IsPicked" Type="Boolean" />
            <asp:Parameter Name="original_Row" Type="String" />
        </DeleteParameters>
        <InsertParameters>
            <asp:Parameter Name="Brdcst_Nbr" Type="String" />
            <asp:Parameter Name="Item_Nbr" Type="String" />
            <asp:Parameter Name="IsPicked" Type="Boolean" />
            <asp:Parameter Name="Row" Type="String" />
        </InsertParameters>
        <UpdateParameters>
            <asp:Parameter Name="Item_Nbr" Type="String" />
            <asp:Parameter Name="IsPicked" Type="Boolean" />
            <asp:Parameter Name="Row" Type="String" />
            <asp:Parameter Name="original_Brdcst_Nbr" Type="String" />
            <asp:Parameter Name="original_Item_Nbr" Type="String" />
            <asp:Parameter Name="original_IsPicked" Type="Boolean" />
            <asp:Parameter Name="original_Row" Type="String" />
        </UpdateParameters>
    </asp:SqlDataSource>

</div>
</form>
</center>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T01:25:15.357

因此，将 SQLdatabase 的属性从 CompareAllValues 更改为 OverwriteChanges 解决了这个问题。现在，只需更改需要更新的行/列中的文本框，就可以将更改写回 sql 数据库，而无需更改任何其他内容。

# cakephp - Cakephp 复杂找到“不在”

> ID：13242852
> 
> 赞同：5
> 
> 时间：2012-11-06T00:53:28.617
> 
> 标签：cakephp, find, notin

我有两个名为 calendar_colour 和 user 的表，

```
calendar_colour
(
   colour_id int primary key,
   colour varchar(15)
)

user
(
   id int primary key,
   name varchar(30),
   color int,
   foreign key(color) references calendar_colour(colour_id)
) 
```

在用户的添加功能中，我必须从下拉框中选择一种颜色。但我想使用以前用户尚未采用的颜色填充下拉列表。我尝试使用 find 命令，但似乎是错误的。

```
$curColours = $this->EventType->query('select color from event_types');

$this->set('colours', $this->EventType->CalendarColour->find('list',array('conditions'=>array('NOT',array('CalendarColour.colour_id' => $curColours))))); 
```

我使用数组`$colours`来填充下拉框。编写查找任何用户未使用的颜色的查找命令的正确方法是什么。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-06T01:07:30.953

你几乎拥有它：

```
$this->EventType->CalendarColour->find('list', array(
  'conditions' => array(
    'NOT' => array( // There's your problem! :)
      'CalendarColour.colour_id' => $curColours
    )
  )
)); 
```

# xml - 同名但属性不同的 XSD 元素定义

> ID：13242860
> 
> 赞同：1
> 
> 时间：2012-11-06T00:54:11.537
> 
> 标签：xml, xsd, jaxb

我有一个有趣的 XML 情况，我正在尝试为其编写 XSD。我正在使用的 Web 服务有一种不同寻常的发送响应的方式，因为它在某种程度上是通用的。

例如，

网络服务调用 1：

```
<rootElement>
  <result>
    <resultset>
      <row attr="some value" attr2="some value 2" />
    </resultset>
  </result>
</rootElement> 
```

网络服务调用 2：

```
<rootElement>
  <result>
    <resultset>
      <row someOtherAttr="some value" someOtherAttr2="some value 2" />
    </resultset>
  </result>
</rootElement> 
```

如您所见，唯一区分两个 Web 服务响应的是行元素中的属性。

我已经尝试了几种不同的方法，通过为结果元素设置一个抽象元素，这在一定程度上起作用，但我不知道如何允许 JAXB 在编组时选择要使用的结果元素。

IE

```
... other xs declarations excluded for sanity ...
<xs:element ref="abstractResult" />
... snip ...

<xs:element name="abstractResult" type="ResultType" abstract="true" />

<xs:complexType name="ResultType" abstract="true" />

<xs:complexType name="SomeResultType">
  <xs:complexContent>
    <xs:extension base="ResultType">
... snip ... 
```

这种方法的问题是 JAXB 在编组而不是搜索适当的实现时尝试实例化抽象 ResultType。

有没有办法避免这种情况？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:55:06.643

最终将模式分成独立的文件，其中有根元素的不同实现。

然后，我将多个模式绑定到它们自己的命名空间，以便编组器能够区分相似的元素。

由于 xml 没有来自 web 服务的命名空间，因此我使用 JDom 设置命名空间，因为我知道目标对象类型在运行时将是什么。

希望这可以帮助任何感兴趣的人。

# c# - 检查 DataGridView 上的所有复选框项目

> ID：13242861
> 
> 赞同：7
> 
> 时间：2012-11-06T00:54:12.117
> 
> 标签：c#, winforms, datagridview, checkbox

这是场景。

我有`checkbox`(Name:"Check All" ID:chkItems) 和`datagridview`. 当我点击这个复选框时，所有的复选框`datagridview`也会被选中。

我还在网格上添加了复选框列。

```
DataGridViewCheckBoxColumn CheckboxColumn = new DataGridViewCheckBoxColumn();
CheckBox chk = new CheckBox();
CheckboxColumn.Width = 20;
GridView1.Columns.Add(CheckboxColumn); 
```

这是复选框背后的代码。有问题`row.Cell`

```
private void chkItems_CheckedChanged(object sender, EventArgs e)
{
    foreach (DataGridViewRow row in GridView1.Rows)
    {
        DataGridViewCheckBoxCell chk = e.row.Cells(0);
        if (chk.Selected == false)
        {
            row.Cells(0).Value = true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-06T01:00:34.937

```
DataGridViewCheckBoxCell chk = (DataGridViewCheckBoxCell) row.Cells[0]; 
```

代替

```
DataGridViewCheckBoxCell chk = e.row.Cell(0); 
```

***编辑：** *我认为你真的想这样做：

```
foreach (DataGridViewRow row in dataGridView1.Rows)
{
       DataGridViewCheckBoxCell chk = (DataGridViewCheckBoxCell) row.Cells[0];
       chk.Value = !(chk.Value == null ? false : (bool) chk.Value); //because chk.Value is initialy null
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-29T03:40:39.123

```
 private void setCheckBoxInDataGrid(DataGridView dgv, int pos, bool isChecked)
    {
        for (int i = 0; i < dgv.RowCount; i++)
        {
            dgv.Rows[i].DataGridView[pos, i].Value = isChecked;
        }
    } 
```

我就是这样做的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-28T01:20:30.943

试试这个

```
foreach (DataGridViewRow row in this.dataGridView1.Rows)
{
      row.Cells[0].Value = row.Cells[0].Value == false ? true : false;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T10:03:15.153

如果您可以自行提供默认状态，`checkboxes of datagridview`即 True 或 False [不要分配空状态] 状态（这样做的原因将在后面解释）。

这可以通过以下代码完成，（当您搜索要查看的结果时输入此代码`DataGridView`）
`dgv`是`DataGridView`您正在使用的对象。

```
for (int i = 0; i < dgv.RowCount - 1; i++)
{
     dgv.Rows[i].DataGridView[0, i].Value = true;
} 
```

其中`DataGridView[0, i]`表示第 0 列第 i 行
这样做的原因是，加载时复选框默认处于`null`状态。代码没有比较`null`状态（创建对象空引用异常）。所以，一旦你为它分配一个状态，要么是 false 要么是 true 。它永远无法进入`null`状态。
在您要检查的 button_click_event 中键入以下代码

```
for (int i = 0; i < dgv.RowCount-1; i++)
{
    if (dgv.Rows[i].Cells[0].Value.ToString() != "")
    {
        dgv.Rows[i].Cells[0].Value = false;
    }
    else
    {
        dgv.Rows[i].Cells[0].Value = true;
    }
} 
```

它对我有用，我希望它对你有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-11T21:41:35.953

我试图选择所有复选框或选择它的相互性并计算一些值......所以写了这段代码可能会有所帮助。

```
foreach (DataGridViewRow item in DGDoc.Rows)
{
    if (item.Cells[0].Value == null)
        item.Cells[0].Value = "True";
    if (bool.Parse(item.Cells[0].Value.ToString()))
    {
        item.DefaultCellStyle.BackColor = System.Drawing.Color.FromArgb(241, 215, 215);
        strIDs += "," + item.Cells[1].Value.ToString();
        intSumPrice += Int64.Parse(item.Cells[4].Value.ToString());
        intSumTax += Int64.Parse(item.Cells[5].Value.ToString());
        intSumPay += Int64.Parse(item.Cells[6].Value.ToString());
    }
    else
    {
        item.DefaultCellStyle.BackColor = System.Drawing.Color.Empty;
    }
}
DGDoc.EndEdit(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-18T18:06:02.780

1-创建新按钮。

2-单击checkAll按钮时可以使用以下代码

3-单击按钮时，它将选中datagridview中的所有复选框，再次单击时，它将取消选中所有框。

```
private void btncheckall_Click(object sender, EventArgs e)
        {
            foreach (DataGridViewRow row in dgvResult.Rows)
            {
                row.Cells[0].Value = row.Cells[0].Value == null ? false : !(bool)row.Cells[0].Value;
            }
        } 
```

注意：在某些情况下，您必须先单击 datagridview，然后单击按钮。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-23T16:56:40.417

您可以像这样检查所有单元格：

```
private void CheckAllCheckboxItemsOnDataGridView(int columnIndex)
{ 
    foreach (DataGridViewRow row in dgFiles.Rows)
    {
        DataGridViewCheckBoxCell cell = (DataGridViewCheckBoxCell)row.Cells[columnIndex];

        cell.Value = !(cell.Value == null ? false : (bool)cell.Value); 
    }
} 
```

您可以像这样在 CheckedChanged 事件中使用方法：

```
private void chkItems_CheckedChanged(object sender, EventArgs e)
{
    CheckAllCheckboxItemsOnDataGridView(columnIndex: 0);
} 
```

# java - Android Json/Gson 问题

> ID：13242867
> 
> 赞同：0
> 
> 时间：2012-11-06T00:55:08.247
> 
> 标签：java, android, json, gson

我在处理这个 json 时遇到了问题。

```
{"directory": {
         "employees": {"employee": [
             {
                 "field": [
                     {
                         "content": "Charlotte Abbott",
                         "id": "displayName"
                     },
                     {
                         "content": "Charlotte",
                         "id": "firstName"
                     }, 
```

我将它转换成一个看起来像这样的类

```
@SerializedName("directory")
    public Directory directory;

    public class Directory
    {
        @SerializedName("employees")
        public Employees employees;
    }
    public class Employees
    {
        @SerializedName("employee")
        public List<Employee> employee;
    }

    public class Employee
    {
        @SerializedName("field")
        public List<Fields> fields;

        @SerializedName("id")
        public String employeeId;
    }
    public class Fields
    {
        @SerializedName("content")
        public String content;

        @SerializedName("id")
        public String label;
    } 
```

并且在序列化时并没有到达所有变量来插入数据。相反，我得到了所有的空值。但是，我得到了正确数量（数量）的 Directory 对象，所以我知道它已经达到了那么远。有人对我在这里做错了什么有一些见解吗？json就是它的样子，不是我设计的，而是它的使用方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T01:47:57.187

你必须使用一个相当奇怪的数据结构，但就是这样。

```
public class App {
    public static void main(String[] args) {
        Gson gson = new Gson();
        String jsonString = "{\"directory\": {\"employees\": {\"employee\": [{\"field\": [{\"content\": \"Charlotte Abbott\",\"id\": \"displayName\"},{\"content\": \"Charlotte\",\"id\": \"firstName\"}]}]}}}";

        Wrapper obj = (Wrapper) gson.fromJson(jsonString, Wrapper.class);

        System.out.println(obj.getDirectory().getEmployees().getEmployeeList()
                .get(0).getFieldList().get(0).getContent());
    }
} 
```

你需要一个`Wrapper`类来环绕`Directory`.

```
public class Wrapper {
    private Directory directory;

    public Directory getDirectory() {
        return directory;
    }

    public void setDirectory(Directory directory) {
        this.directory = directory;
    }
} 
```

`Directory`班级。

```
public class Directory {
    @SerializedName("employees")
    private Employees employees;

    public Employees getEmployees() {
        return employees;
    }

    public void setEmployees(Employees employees) {
        this.employees = employees;
    }
} 
```

`Employees`班级：

```
public class Employees {
    @SerializedName("employee")
    private List<Employee> employeeList;

    public List<Employee> getEmployeeList() {
        return employeeList;
    }

    public void setEmployeeList(List<Employee> employeeList) {
        this.employeeList = employeeList;
    }
} 
```

`Employee`班级：

```
public class Employee {
    @SerializedName("field")
    private List<Field> fieldList;

    public List<Field> getFieldList() {
        return fieldList;
    }

    public void setFieldList(List<Field> fieldList) {
        this.fieldList = fieldList;
    }
} 
```

`Field`班级：

```
public class Field {
    @SerializedName("content")
    private String content;
    @SerializedName("id")
    private String id;

    public String getContent() {
        return content;
    }

    public void setContent(String content) {
        this.content = content;
    }

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }
} 
```

在此处使用 GSON 示例查看 JSON 到 Java 对象：http: [//java.sg/parsing-a-json-string-into-an-object-with-gson-easily/](http://java.sg/parsing-a-json-string-into-an-object-with-gson-easily/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T01:44:13.007

所以这就是它的工作原理，我做对了，我只是在放入数据后没有正确验证数据，所以我因为无法分配和存储它以供以后访问而丢失了它。

它很丑，但地图看起来像这样

```
DIRECTORY obj
{
    EMPLOYEES obj
    {
        List employee []
        {
            int id
            List fields[]
            {
                content
                id
            {     
        {    
    { 
{ 
```

# jquery - 使用 Appendo 和 Wordpress 媒体上传器

> ID：13242871
> 
> 赞同：1
> 
> 时间：2012-11-06T00:55:24.937
> 
> 标签：jquery, ajax

有没有人在尝试实现这一点时遇到过麻烦？

我无法弄清楚为什么我的不起作用。我只能让第一个列表元素正常工作。如果我尝试使用 Appendo 添加另一个上传按钮，它是不可点击的。这是什么原因？

这只是一个猜测，但是当页面加载时，jQuery 是否知道一个类有多少个实例？如果是这样，我需要用 AJAX 处理这个吗？

我知道这是一个非常模糊的问题，但是为了发布一堆代码，我想我会看看是否有人对 Appendo 有类似的问题。感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:57:08.600

I figured it out!

I ditched appendo and used the jQuery's clone method instead which results in the following code

```
$("#cloner").bind('click', function(){
    $('#div').clone(true).appendTo('#container');
}); 
```

However, if you want to use appendo and have a button, you need to set copyHandlers to true. This tells it to copy EVERYTHING including event handlers so the button will work.

```
$('#div').appendo({
    copyHandlers: true,
}); 
```

# html - 停止音频缓冲 标签

> ID：13242877
> 
> 赞同：19
> 
> 时间：2012-11-06T00:56:14.843
> 
> 标签：html, html5-audio, audio-streaming, buffering

我目前正在使用 HTML5 音频播放器通过（移动）浏览器提供音频流（24/7 无线电流）。加载流并播放它工作正常。

主要问题是 HTML5`<audio>`标记即使在不活动时也会继续下载（缓冲）内容。对于移动用户来说，这可能是一个主要问题，因为他们中的大多数人为数据使用付费。到目前为止，我还没有找到一个体面的解决方案，可以跨浏览器来防止这种情况。

到目前为止我尝试过：

1.  按下暂停时卸载源。< 这不适用于跨浏览器

2.  删除音频播放器元素并加载一个新元素。这可行，但老实说，这是执行极其简单的任务的一种非常hacky 的方式。

我只是想知道在整个问题中是否有我忽略的东西，因为我确信我不是唯一一个遇到这个问题的人。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-04-22T11:20:52.343

该`<audio>`元素包括一个`preload`属性。这可以设置为“无”或“元数据”，以防止音频预加载。

来源：[https ://developer.mozilla.org/en/docs/Web/HTML/Element/audio](https://developer.mozilla.org/en/docs/Web/HTML/Element/audio)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T05:39:54.673

我为上述问题找到了一个可行的解决方案。可以在此处找到详细说明：[https ://stackoverflow.com/a/13302599/1580615](https://stackoverflow.com/a/13302599/1580615)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-25T04:35:32.013

您可以执行以下操作来停止缓冲负载而不会出现错误：

```
var blob = new Blob([], {type: "audio/mp3"});
var url = URL.createObjectURL(blob);
audio.src = _url; 
```

或者，缩短：

```
audio.src = URL.createObjectURL(new Blob([], {type:"audio/mp3"}); 
```

现在您没有加载“”，这是音频标签尝试加载的错误 url。相反，您正在加载一个由 Blob 制成的实际 url，该 Blob 不包含要播放的音频数据。

# opencl - 在 OpenCL 中发现早期退出

> ID：13242881
> 
> 赞同：0
> 
> 时间：2012-11-06T00:56:38.790
> 
> 标签：opencl

我正在尝试编写一个 OpenCL 实现`memchr`来帮助我了解 OpenCL 的工作原理。我打算做的是为每个工作项分配一块内存来搜索。然后，在每个工作项中，它循环搜索字符的块。

特别是如果缓冲区很大，我不希望其他线程在已经找到一个事件之后继续搜索（假设在任何给定的缓冲区中只有一个字符出现）。

我坚持的是，当工作项找到角色时，它如何向主机和其他线程指示？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T03:16:47.633

一种方法是使用全局标志变量。当您找到该值时，您自动将其设置为 1，其他线程在工作时将检查该值。

例如：

```
__kernel test(__global int* buffer, __global volatile int* flag)
{
    int tid = get_global_id(0);
    int sx = get_global_size(0);
    int i = tid;
    while(buffer[i] != 8) //Whatever value we're trying to find.
    {
        int stop = atomic_add(&flag, 0);  //Read the atomic value
        if(stop) 
            break;
        i = i + sx;
    } 
    atomic_xchg(&flag, 1);  //Set the atomic value
} 
```

这可能会比仅运行整个内核增加更多开销（除非您在每次迭代中都做大量工作）。此外，如果每个线程只检查数组中的单个值，则此方法将不起作用。每个线程必须有多个工作迭代。

最后，我看到了写入原子变量不会立即提交的实例，因此您需要检查此代码是否会因为写入未提交而在您的系统上死锁。

# c++ - 将电影转换为 OpenNI *.oni 视频

> ID：13242885
> 
> 赞同：4
> 
> 时间：2012-11-06T00:57:04.660
> 
> 标签：c++, c, kinect, video-processing, openni

[Kinect OpenNI 库](http://openni.org/)使用自定义视频文件格式来存储包含 rgb+d 信息的视频。这些视频的扩展名为 *.oni。我无法找到有关 ONI 视频格式的任何信息或文档。

我正在寻找一种将传统 rgb 视频转换为 *.oni 视频的方法。深度通道可以留空（即归零）。例如，我有一个带有音频和视频通道的 MPEG-4 编码 .mov 文件。

必须如何进行这种转换没有任何限制，我只需要以某种方式转换它！即，imagemagick、ffmpeg、mencoder 都可以，C/C++ 等中的自定义转换代码也是如此。

到目前为止，我只能[在 OpenNI 源代码中找到一个 C++ 转换实用程序](https://github.com/OpenNI/OpenNI/blob/master/Samples/NiConvertXToONI/NiConvertXToONI.cpp)。从它的外观来看，我将它从一个 *.oni 文件转换为另一个文件。我还设法找到[了一个博士生的 C++ 脚本，它可以将学术数据库中的图像转换为 *.oni 文件](http://www.uco.es/dptos/aceyte/arquitectura/profesores/jcgamez/?RESEARCH_%28English%29)。不幸的是，代码是西班牙语，不是我的母语之一。

非常感谢任何帮助或指示！

编辑：由于我的用例有点奇怪，可能需要一些解释。OpenNI 驱动程序（在我的例子中，我使用了出色的[Kinect for Matlab 库](http://www.mathworks.com.au/matlabcentral/fileexchange/30242-kinect-matlab)）允许您在创建 Kinect 上下文时指定 *.oni 文件。这允许您模拟连接接收视频数据的真实 Kinect - 在您测试/开发代码时很有用（您不需要连接 Kinect 来执行此操作）。在我的特殊情况下，我们将在生产环境中使用 Kinect（工厂环境中的过程控制），但在开发过程中我只有一个视频文件 :) 因此想要转换为 *.oni 文件。我们目前没有使用深度通道，因此不关心它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T08:37:26.523

我没有完整的答案，但请看一下 OpenNI/Samples 中的 NiRecordRaw 和 NiRecordSynthetic 示例。他们演示了如何使用任意或修改的数据创建 ONI。了解如何在 NiRecordSynthetic 中使用 MockDepthGenerator - 在您的情况下，您将需要 MockImageGenerator。有关更多详细信息，您可能想在 openni-dev 谷歌组中询问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-18T21:01:49.053

您是否查看过此命令及其相关文档

**NiConvertXToONI** -- NiConvertXToONI 打开任何记录，获取其中的每个节点，并将其记录到新的 ONI 记录中。它从命令行接收输入文件和输出文件。

# jsf-2 - 如何将 sitemap.xml 保留在 webapp 的部署文件夹之外？

> ID：13242888
> 
> 赞同：0
> 
> 时间：2012-11-06T00:57:25.050
> 
> 标签：jsf-2, glassfish-3, sitemap

我正在使用 glassfish 服务器 3.1.2 和 jsf 2.1。根据 sitemaps.org 标准，整个网站的站点地图文件应该在根文件夹中。我将有多个站点地图，并且站点地图将在我创建新条目后动态更改。[我在那里](https://stackoverflow.com/a/8889096/921535)读过，我想使用备用 docroot。但我无法为根目录创建备用 docroot。我应该找到一个像替代 docroot 一样的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:06:31.747

您可以创建一个简单的[servlet](https://stackoverflow.com/tags/servlets/info)来执行这项工作。

```
@WebServlet("/sitemap.xml")
public class SitemapServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        response.setContentType("text/xml");
        // You might want to add finer grained browser cache related headers.

        InputStream input = new FileInputStream("/some/path/to/sitemap.xml");
        OutputStream output = response.getOutputStream();
        // Now just write input to output using your favorite way.
        // ...
    }

} 
```

# mysql - 使用 group by 的 SQL 查询

> ID：13242892
> 
> 赞同：1
> 
> 时间：2012-11-06T00:57:55.247
> 
> 标签：mysql, sql, oracle

我有一个名为“EMP”的表和两个名为“deptno”的列，另一个名为“job”。我需要一个查询来了解每个部门内每种类型的工作有多少人。

我知道我需要使用 count() 和 group by 但我不知道如何做到这一点，任何帮助将不胜感激。

谢谢詹姆斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T00:58:54.530

```
select job, deptno, count(*) as people
from emp
group by job, deptno 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T00:59:55.653

```
 SELECT JOB, DEPTNO, count(1) AS EMP_COUNT
  FROM EMP
  GROUP BY JOB, DEPTNO; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T09:37:22.493

尝试这个

```
select job, deptno, count(*) as TotEmp
from emp
group by job, deptno 
```

# c# - 我可以在 Windows Phone 7.1 中使用 3rd 方库吗？

> ID：13242896
> 
> 赞同：1
> 
> 时间：2012-11-06T00:58:23.563
> 
> 标签：c#, windows-phone-7.1, fft

我要做一些声音频率测量。我找到了可以执行快速傅里叶变换（FFT）的第 3 方库。**我可以在 Windows Phone 7.5(7.1SDK) 应用程序中使用它们，**这样它就不会在 apphub 中被微软拒绝吗？（问题的粗体部分更重要）

找到的图书馆：

[http://code.google.com/p/aforge/](http://code.google.com/p/aforge/)

[http://www.exocortex.org/dsp/](http://www.exocortex.org/dsp/)

[http://www.mathdotnet.com/](http://www.mathdotnet.com/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T03:08:19.693

您可以毫无问题地使用纯托管库（假设它们在低信任环境中运行并且不进行任何外部 API 调用，因此数学库应该没问题）。

其他的，比如 AForge，将无法工作，因为它是一个原生库（并且不能保证在 WP7.1 上运行原生代码的能力）。然而，WP8 上的情况有所不同。

Exocortex DSP 库看起来也可以工作。

# c++ - 完全控制日志记录的 C/C++ 日志记录

> ID：13242900
> 
> 赞同：0
> 
> 时间：2012-11-06T00:58:55.373
> 
> 标签：c++, logging

关于完全控制它的 C++ 日志库/框架的建议是什么。我希望能够完全控制日志的存储位置、生成和显示/隐藏的信息而不会出现编译错误。我尝试过 log4cxx 和 log4cplus，但它们无法完全控制日志记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T01:13:15.567

我在一些项目中使用[GLog](http://code.google.com/p/google-glog/)。它工作得很好。它具有许多功能，可让您控制日志记录的不同方面。

有[Boost.Log](http://boost-log.sourceforge.net/libs/log/doc/html/index.html)。但是，正如该网站所说，它不是 Boost 的正式组成部分。它确实有条件地通过了审查，但建议进行一些重型修复。这是一种耻辱，因为我希望尽可能多地从 Boost 中获得一致性。

# java - Eclipse Oracle Hibernate StringIndexOutOfBoundsException

> ID：13242901
> 
> 赞同：0
> 
> 时间：2012-11-06T00:59:06.387
> 
> 标签：java, eclipse, oracle, jdbc

在从 MySql 转换到 Oracle 期间出现这个奇怪的错误。一切正常，直到我切换到 Oracle 驱动程序。自动装配类 SessionFactory 现在失败了，但是出现了这个奇怪的字符串错误：

```
Nov 5, 2012 4:52:06 PM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'services': Cannot create inner bean 'com.capitalone.api.socialdata.SocialDataApi#2f729e' of type [com.capitalone.api.socialdata.SocialDataApi] while setting bean property 'serviceBeans' with key [0]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.capitalone.api.socialdata.SocialDataApi#2f729e': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.capitalone.api.socialdata.service.SocialDataService com.capitalone.api.socialdata.SocialDataApi.socialDataService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.capitalone.api.socialdata.service.SocialDataServiceImpl#0': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.capitalone.api.socialdata.dao.ProfileDAO com.capitalone.api.socialdata.service.SocialDataServiceImpl.profileDAO; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.capitalone.api.socialdata.dao.ProfileDAOImpl#0': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.hibernate.SessionFactory com.capitalone.api.socialdata.dao.ProfileDAOImpl.sessionFactory; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/beans.xml]: Invocation of init method failed; nested exception is java.lang.StringIndexOutOfBoundsException: String index out of range: 13068
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:281)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:120)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveManagedList(BeanDefinitionValueResolver.java:353)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:153)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1325)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.capitalone.api.socialdata.SocialDataApi#2f729e': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.capitalone.api.socialdata.service.SocialDataService com.capitalone.api.socialdata.SocialDataApi.socialDataService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.capitalone.api.socialdata.service.SocialDataServiceImpl#0': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.capitalone.api.socialdata.dao.ProfileDAO com.capitalone.api.socialdata.service.SocialDataServiceImpl.profileDAO; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.capitalone.api.socialdata.dao.ProfileDAOImpl#0': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.hibernate.SessionFactory com.capitalone.api.socialdata.dao.ProfileDAOImpl.sessionFactory; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/beans.xml]: Invocation of init method failed; nested exception is java.lang.StringIndexOutOfBoundsException: String index out of range: 13068
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:285) 
```

在 DAO 文件中映射的列如下：

```
@Column(name="CHANNEL_NAME")
private String name; 
```

jdbc.properties 有以下几行：

```
jdbc.driverClassName=oracle.jdbc.driver.OracleDriver
jdbc.dialect=org.hibernate.dialect.OracleDialect
jdbc.databaseurl=jdbc:oracle:thin:@localhost:3306:MYDB 
```

.pom 文件有这个依赖：com.oracle ojdbc5 11.2.0.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:39:10.537

jdbc.properties 文件中的 @ 字符似乎导致字符串越界异常：我更改了：

```
jdbc.databaseurl=jdbc:oracle:thin:@localhost:3306:MYDB 
```

至：

```
jdbc.databaseurl=jdbc:oracle:thin://localhost:3306:MYDB 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T01:02:16.707

`Injection of autowired dependencies failed;`您是否在所有正确的地方更新了您的依赖项？

# android - 从应用程序通过 USB 将 Android 文件传输到 Windows 笔记本电脑

> ID：13242902
> 
> 赞同：1
> 
> 时间：2012-11-06T00:59:12.860
> 
> 标签：android

我有业务需求，用户希望通过 USB 从 android 应用程序（即以编程方式）将文件从 Android 设备复制到 Windows 7 笔记本电脑，因为没有可用的 wifi 或蜂窝数据覆盖。我想知道这是否可能？如何？示例将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T01:07:30.983

查找[adb](http://developer.android.com/tools/help/adb.html)，从这里你可以做一个简单的脚本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T01:08:38.473

我能想到的最简单的方法是将文件存储在设备 SD 卡（或内部存储器）上的特定位置，然后为计算机编写一个从设备复制文件的程序。

# ruby-on-rails - 回形针没有及时保存文件

> ID：13242904
> 
> 赞同：1
> 
> 时间：2012-11-06T00:59:30.520
> 
> 标签：ruby-on-rails, paperclip, elasticsearch, tire

我不知道我做了什么或发生了什么变化，因为这以前有效。

我有一个模型`Entry`，我使用 Paperclip 将文件附加`document`到它。现在，由于某种奇怪的原因，我不断收到

```
Errno::ENOENT in EntriesController#create
No such file or directory - /var/www/capsf-web/public/assets/entries/test.pdf 
```

我猜在 Paperclip 将文件保存到目录之前，我已经在尝试对文件进行编码。这是`Entry`看起来的样子。我正在使用 ElasticSearch 的附件映射器，这就是我对其进行编码的原因。

```
class Entry < ActiveRecord::Base
  include Tire::Model::Search
  include Tire::Model::Callbacks

  has_and_belongs_to_many :categories
  has_and_belongs_to_many :subcategories
  belongs_to :entry_type
  has_attached_file :document,
                    :url  => "/assets/entries/:basename.:extension",
                    :path => ":rails_root/public/assets/entries/:basename.:extension"

  before_post_process :image?

  validates_presence_of :entry_type

  attr_accessible :description, :title, :url, :category_ids, :subcategory_ids, :entry_type_id, :document

  mapping do
    indexes :title
    indexes :description
    indexes :categories do
      indexes :name
    end
    indexes :subcategories do
      indexes :name
    end
    indexes :entry_type
    indexes :document, :type => 'attachment'
  end

  def to_indexed_json
   #to_json( methods: [:category_name, :subcategory_name, :entry_type_name])
    {
    :title          => title,
    :description    => description,
    :categories     => categories.map { |c| { :name => c.name}},
    :subcategories  => subcategories.map { |s| { :name => s.name}},
    :entry_type     => entry_type_name,
    :document       => attachment
    }.to_json
  end
  def image?
    !(document_content_type =~ /^image.*/).nil?
  end

  def attachment
    if document.present?
      path_to_document = Rails.public_path+"/assets/entries/#{document_file_name}"
      Base64.encode64(open(path_to_document) { |pdf| pdf.read})
#If I comment out the line above everything works just fine.

    end
  end

end 
```

# xml - 不包含零的 getXpathCount

> ID：13242907
> 
> 赞同：1
> 
> 时间：2012-11-06T00:59:46.980
> 
> 标签：xml, xpath, selenium, phpunit

这是我为 Selenium/PHPUnit 编写的代码：

```
$this->getXpathCount("//img[contains(@src, 'yes_star')]/../div[contains(text(), '0')] 
```

如何重写此代码以计算不包含文本 0 的元素的 xpath？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T01:10:55.587

使用`not()`函数，例如：

```
//img[contains(@src, 'yes_star')]/../div[not(contains(text(), '0'))] 
```

# ios - 设置应用程序中使用的提示警报

> ID：13242918
> 
> 赞同：0
> 
> 时间：2012-11-06T01:01:13.103
> 
> 标签：ios

我注意到这种提示样式，我比 UIAlertView 提示更喜欢它，所以我想知道，它是一个自定义的 UIAlertView 还是只是一个包含两个按钮的 UIView，它们像任何其他 UIView 一样以编程方式上下动画。谢谢。

![在此处输入图像描述](../Images/801bf81feb71fd0093d89b64647afa21.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T01:04:23.107

这是一个`UIActionSheet`，不是`UIAlertView`，并且自 iOS 2.0 以来一直存在。[这是它的文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UIActionSheet_Class/Reference/Reference.html)。

# php - 如何合并 iCalendar 事件

> ID：13242924
> 
> 赞同：1
> 
> 时间：2012-11-06T01:02:37.743
> 
> 标签：php, algorithm, icalendar

我正在尝试将多个 iCalendar 合并在一起。我希望能够合并重叠的事件。因此，例如，如果我在星期一下午 12 点到下午 2 点有一个活动，在下午 1 点到 3 点有另一个活动，我想结束一个从下午 12 点到下午 3 点的活动。

我正在寻找一个在 PHP 中执行此操作的简单开源脚本，或者只是帮助算法本身。

任何形式的帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:23:37.287

对——遗憾的是，我无法帮助你编写 PHP 编码，因为我对 PHP 一无所知（这也意味着我的算法帮助可能只是遥遥无期）。但是，我对算法非常了解，所以我会想出尽可能多的方法。我会给出每个支持和反对的理由，你可以选择，希望我们都能学到一些东西。

首先，简化——注意当合并两个以上的 ICalendar 时，我们可以合并两个，然后将我们的结果与下一个等合并；这意味着我们的算法可以合并两个来工作。

考虑到这一点，我可以召集概念上最简单的合并：

1.  给定 ICalendar A 和 B，我们将它们合并成一个新的 ICalendar C
2.  初始化 C
3.  从 A 或 B 中挑选并删除最早的事件，将其添加到 C。
4.  做同样的事情，这次“合并事件”如果它们重叠。
5.  起泡，冲洗，重复直到 A 和 B 都是空的——C 现在应该包含 A 和 B 的合并。

实际上，这将接近最佳算法*——O(n)*时间，其中 n 是每个 ICalendar 的平均事件数；这意味着不会有其他方法出现……遗憾的是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T00:55:52.440

如果有人感兴趣，这就是我最终要做的。它可能不是最有效的，但对于我正在做的事情来说已经足够了。

1.  将日历解析为 Event 对象（每个对象都有一个开始时间和结束时间的 unix 时间戳），Event 类还应该有一个 toString() 方法用于导出。
2.  将所有对象存储在一个数组中，然后按开始时间排序（升序）
3.  为最终结果初始化一个数组，我们称之为“final_array”
4.  将数组中的第一个事件作为“A”
5.  从下一个事件开始遍历数组，我们将其命名为“B”
    1.  如果 B 在 A 结束后开始：将 A 添加到 final_array 并使 B 成为新的 A
    2.  如果 B 在 A 结束之前开始：
        1.  如果 B 在 A 结束之前结束：什么都不做
        2.  如果 B 在 A 结束之后结束：将 A 的结束时间更改为 B 的结束时间。
6.  Go back to 5 if you haven't reached the end of the array
7.  For each event in final_array, write event to the new calendar file

# c - 在 ELF 或 DWARF 中，如何获取 .PLT 部分值？-- 试图获取检测工具所在函数的地址

> ID：13242926
> 
> 赞同：1
> 
> 时间：2012-11-06T01:02:47.260
> 
> 标签：c, debugging, gdb, elf, instrumentation

我正在使用其 ELF 和 DWARF 信息获取程序的所有数据，并将 pin 工具连接到当前正在运行的进程——它是一种使用 Pin 工具的调试器。

为了从堆栈中获取局部变量，我正在使用可以从 Pin 访问的寄存器 EIP、EBP 和 ESP。

让我感到奇怪的是，当 pin 工具附加到进程时，我期望 EIP 指向正在运行的当前函数，但 EIP 指向的是 .PLT 部分。换句话说，如果在 Foo() 运行时 pin 工具被挂接到进程中，那么我期望 EIP 指向 Foo 函数内的某个地址。但是它指向 .PLT 部分的开头。

我需要知道的是进程当前所在的函数——有没有办法使用 .PLT 部分获取函数的地址？有没有其他方法可以从堆栈或使用 Pin 获取函数的地址？我希望我足够清楚，如果有任何问题，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T06:24:53.297

我可能不完全理解这里发生了什么......指令指针真的在 .plt 部分中还是你只是从 Pin 得到一个垃圾值？

您将正在读取的指令指针命名为 EIP，如果您在 64 位系统上运行，这可能会出现问题，是这样吗？您会看到指令指针寄存器在 32 位系统上是 32 位值，在 64 位系统上是 64 位值。所以 Pin 实际上为指令指针提供了 3 个 REG_* 名称：EIP、RIP 和 GBP。EIP 始终是寄存器的低 32 位一半，RIP 是 64 位值，而 GBP 是两者之一，具体取决于您的架构。在 64 位系统上请求 EIP 会给您带来垃圾，就像在 32 位系统上请求 RIP 一样。

否则，在谷歌上快速浏览一下就会给我[这个](http://www.linuxjournal.com/article/1060)。引用一点：

> 默认情况下，.plt 条目全部由链接器初始化，不指向正确的目标函数，而是指向动态加载器本身。因此，第一次调用任何给定函数时，动态加载程序会查找该函数并修复 .plt 的目标，以便下次使用此 .plt 插槽时，我们调用正确的函数。

更重要的是：

> 在将控制权转移给应用程序之前，可以指示动态加载程序将地址绑定到所有 .plt 插槽——这是通过在运行程序之前设置环境变量**LD_BIND_NOW=1来完成的。***例如，在调试程序时，这在某些情况下很有用。*

希望有帮助。

# javascript - 关闭窗口后编辑器无法消失

> ID：13242929
> 
> 赞同：0
> 
> 时间：2012-11-06T01:02:58.537
> 
> 标签：javascript, extjs, window, editor, floating

我在 Ext 4.1.0 和 Ext 4.1.1 上遇到问题

双击第一个单元格进行编辑，然后单击窗口关闭按钮，编辑器仍然浮动在页面上。但最后一个单元格可以。

以前有人遇到过这个问题吗？谢谢

```
Ext.onReady(function(){

    Ext.create('Ext.data.Store', {
        storeId:'simpsonsStore',
        fields:['name', 'email', 'phone'],
        data:{'items':[
            { 'name': 'Lisa',  "email":"lisa@simpsons.com",  "phone":"1224" },
            { 'name': 'Bart',  "email":"bart@simpsons.com",  "phone":"1234" },
            { 'name': 'Homer', "email":"home@simpsons.com",  "phone":"1244" },
            { 'name': 'Marge', "email":"marge@simpsons.com", "phone":"1254" }
        ]},
        proxy: {
            type: 'memory',
            reader: {
                type: 'json',
                root: 'items'
            }
        }
    });

    var table = Ext.create('Ext.grid.Panel', {
        title: 'Simpsons',
        store: Ext.data.StoreManager.lookup('simpsonsStore'),
        columns: [
            { 
                text: 'Name',  
                dataIndex: 'name',
                editor: { xtype: 'textfield', toFrontOnShow: false } 
            },
            { 
                text: 'Email', 
                dataIndex: 'email', 
                flex: 1 
            },
            { 
                text: 'Phone', 
                dataIndex: 'phone',
                editor: { 
                    xtype: 'numberfield', 
                    hideTrigger: true, 
                    validateOnChange : false
                } 
            }
        ],
        height: 200,
        width: 400,
        plugins:[ Ext.create('Ext.grid.plugin.CellEditing', {
            clicksToEdit: 2
        })]
    });

    var window = new Ext.Window({
        id: 'abc',
        title :'abc',
        modal : true,
        layout: 'border',
        resizable : true,
        draggable : true,
        closable : true,
        closeAction : 'hide',
        width :410,
        height :210,
        items : [table]
      });

    window.show();

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:12:09.017

为您处理此问题的最简单方法是侦听窗口的事件并使用文档中所述[**的**](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.plugin.CellEditing-method-cancelEdit)`beforeclose`celleditor`cancelEdit`方法取消此事件中的任何编辑。[](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.plugin.CellEditing-method-cancelEdit)

 **例如，这是应用了侦听器的窗口对象（来自上面的代码）：

```
var window = new Ext.Window({
    id: 'abc',
    title :'abc',
    modal : true,
    layout: 'border',
    resizable : true,
    draggable : true,
    closable : true,
    closeAction : 'hide',
    width :410,
    height :210,
    items : [ table],
    // add this listener to your window
    listeners: {
        beforeclose: function(panel) {
            var view = panel.down('gridview');

            if (view && view.editingPlugin) {
                view.editingPlugin.cancelEdit();
            }
        }
    }
}); 
```

**回复评论：**

这是一个可以做同样事情的覆盖。但是，在 ExtJS 初始化之后，您必须在每个应用程序中包含此覆盖。

当然，也可以用这个替换`Ext.grid.plugin.Editor`源代码中的 init 函数（这样您就不必在应用程序中包含覆盖），但出于多种原因，我不建议这样做。

```
Ext.override(Ext.grid.plugin.Editor, {
    init: function(grid) {

        // the normal init code (below) must be included in the override
        var me = this;
        me.grid = grid;
        me.view = grid.view;
        me.initEvents();
        me.mon(grid, 'reconfigure', me.onReconfigure, me);
        me.onReconfigure();
        grid.relayEvents(me, [
            'beforeedit',
            'edit',
            'validateedit',
            'canceledit'
        ]);
        grid.isEditable = true;
        grid.editingPlugin = grid.view.editingPlugin = me;

        // additional code to cancel editing before a grid is hidden
        grid.on('beforehide', function(grid) {
            var view = grid.view;

            if (view && view.editingPlugin) {
                view.editingPlugin.cancelEdit();
            }
        });

        // additional code to cancel editing before a grid is destroyed
        grid.on('beforedestroy', function(grid) {
            var view = grid.view;

            if (view && view.editingPlugin) {
                view.editingPlugin.cancelEdit();
            }
        });

    }
}); 
```

我还建议研究 MVC 架构，它会让你更容易处理这样的事情。**

# django - 在 Mac (10.6.8) 上为 Django 初始化 virtualenvwrapper

> ID：13242933
> 
> 赞同：3
> 
> 时间：2012-11-06T01:04:07.617
> 
> 标签：django, macos, osx-snow-leopard, virtualenvwrapper, initializing

我想使用 Django 并创建虚拟环境。我不太了解 virtualenvwrapper 网站上的初始化步骤文档。我已经在 /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages 中安装了 virtualenvwrapper。我也已经安装了 XCode、Homebrew 和 Posgres。

文档告诉我：

> $ export WORKON_HOME=~/Envs
> 
> $ mkdir -p $WORKON_HOME
> 
> $ 源 /usr/local/bin/virtualenvwrapper.sh
> 
> $ mkvirtualenv env1`

我对第一行特别困惑。它是否告诉我需要**创建**一个名为“WORKON_HOME”的项目文件夹并将其导出到另一个名为“Envs”的文件夹中？（我已经在我的 mac 上搜索了这两个文件夹，但没有找到它们）。然后在第二行我创建另一个目录'WORKON_HOME'？如果您有更好的解释/教程的建议或链接，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T01:09:13.723

将这 3 行放在您的`~/.bash_profile`文件中：-

```
export WORKON_HOME=$HOME/.virtualenvs
export PROJECT_HOME=$HOME/work
source `which virtualenvwrapper.sh` 
```

`$HOME`环境变量指向您用户的家。也称为 tilda“~”，即`/Users/your_osx_username/`.

`WORKON_HOME`是您使用文件中的`export`调用分配的新环境变量`~/.bash_profile`。这是保存所有新创建的 virtualenv 目录的地方。

`PROJECT_HOME`是您通常手动放置所有自定义项目目录的位置。与你的 virtualenvs 无关，只是一个简单的参考点，让你 cd 使用`cd $PROJECT_HOME`语法。

`which virtualenvwrapper.sh`指向 bash 脚本所在的位置`virtualenvwrapper.sh`，因此当您获取它时，该 bash 脚本中的函数可用于您的`mkvirtualenv`调用。

每当您打开“新 shell”（新选项卡，第一次更新文件后关闭当前选项卡`~/.bash_profile`）时，所有这些环境变量和 bash 函数都将在您的 shell 中可用。

当`mkvirtualenv -p python2.7 --distribute my_new_virtualenv_1`我们使用. 参考：-`my_new_virtualenv_1``~/.virtualenvs/`

```
calvin$ mkvirtualenv -p python2.7 --distribute my_new_virtualenv_1
Running virtualenv with interpreter /opt/local/bin/python2.7
New python executable in my_new_virtualenv_1/bin/python
Installing distribute..........................................................................................................................................................................................................done.
Installing pip................done.
virtualenvwrapper.user_scripts creating /Users/calvin/.virtualenvs/my_new_virtualenv_1/bin/predeactivate
virtualenvwrapper.user_scripts creating /Users/calvin/.virtualenvs/my_new_virtualenv_1/bin/postdeactivate
virtualenvwrapper.user_scripts creating /Users/calvin/.virtualenvs/my_new_virtualenv_1/bin/preactivate
virtualenvwrapper.user_scripts creating /Users/calvin/.virtualenvs/my_new_virtualenv_1/bin/postactivate
virtualenvwrapper.user_scripts creating /Users/calvin/.virtualenvs/my_new_virtualenv_1/bin/get_env_details 
```

所以如果你这样做

```
cd ~/.virtualenvs/my_new_virtualenv_1
calvin$ tree -d
.
├── bin
├── include
│   └── python2.7 -> /opt/local/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7
└── lib
    └── python2.7
        ├── config -> /opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/config
        ├── distutils
        ├── encodings -> /opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/encodings
        ├── lib-dynload -> /opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload
        └── site-packages
            ├── distribute-0.6.28-py2.7.egg
            │   ├── EGG-INFO
            │   └── setuptools
            │       ├── command
            │       └── tests
            ├── pip-1.2.1-py2.7.egg
            │   ├── EGG-INFO
            │   └── pip
            │       ├── commands
            │       └── vcs
            └── readline 
```

您将在其中看到此目录结构。

当然请注意，您正在使用`Envs`并且我正在`.virtualenvs`用作虚拟环境保存目录。

# mkmapview - 地图区域是针对用户位置而不是针对自定义位置的

> ID：13242937
> 
> 赞同：0
> 
> 时间：2012-11-06T01:05:10.643
> 
> 标签：mkmapview, core-location, mkcoordinateregion, mkcoordinatespan

好吧，这确实是一个愚蠢的问题和令人困惑的问题。我试图让地图跨越并专注于某个区域，所以我将位置设置为 Userlocation，它是完美的。

虽然当我保存用户位置并尝试在 viewDidLoad 中上传它们时，它不起作用。

```
 - (IBAction)GetcurrentLocation1:(id)sender{

    Maplocation.showsUserLocation=YES;
    MKCoordinateRegion mapRegion;
    mapRegion.center = Maplocation.userLocation.coordinate;
    NSLog(@"The USer Location are :%f %f",Maplocation.userLocation.coordinate.latitude,Maplocation.userLocation.coordinate.longitude);
    mapRegion.span.latitudeDelta = 0.2;
    mapRegion.span.longitudeDelta = 0.2;
    self.currentProduct.shop.longcoordinate=Maplocation.userLocation.coordinate.longitude;
    self.currentProduct.shop.latcoordinate=Maplocation.userLocation.coordinate.latitude;
    [Maplocation setRegion:mapRegion animated: YES];
}

    -(void)showtheuseronmap:(double)longtitude:(double)latitude{
        if(!annotation){
            annotation =[[MyAnotation alloc]initWithCoordinate:CLLocationCoordinate2DMake(latitude, longtitude) title:[self.currentProduct.shop shopname] subtitle:@"The shop is here"];
        }
        [Maplocation addAnnotation:annotation];
        MKCoordinateRegion mapRegion;
        CLLocationCoordinate2D locationsh=CLLocationCoordinate2DMake(latitude, longtitude);
        mapRegion.center=locationsh;
        NSLog(@"The USer Location are :%f",mapRegion.center.latitude);
        mapRegion.span.latitudeDelta= 0.2;
        mapRegion.span.longitudeDelta= 0.2;
        [Maplocation setRegion:mapRegion animated:YES];

        //Maplocation.showsUserLocation=YES;

    } 
```

在 viewDidLoad

```
[self showtheuseronmap:self.currentProduct.shop.longcoordinate :self.currentProduct.shop.latcoordinate]; 
```

在 NSLog 中，我可以正确看到坐标。

我真的很困惑，我不知道这是怎么回事？

# reporting - Sitecore Analytics 报告匿名用户与成员

> ID：13242941
> 
> 赞同：4
> 
> 时间：2012-11-06T01:05:49.660
> 
> 标签：reporting, sitecore, sitecore-dms

我正在尝试在 Sitecore Analytics 中设置一个报告，该报告将报告按成员/非成员划分的访问者数量。我查看了访问者和访问表，但据我所知，没有任何东西可以告诉我它是否是匿名用户。我是否需要设置访客资料才能获得我想要的东西，还是有更简单的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T03:12:53.013

DMS 对此有一个字段，Visitor.ExternalUser，但您需要编写代码来填充它。将此代码包含在您的登录处理程序中：

```
if (Tracker.IsActive) 
{
  Tracker.Visitor.ExternalUser = Sitecore.Context.User.DisplayName.ToLower(); 
} 
```

然后，您可以将填充此字段的访问者数量与访问者总数进行比较。

# security - 对于此 API，在 http 字符串中传递用户名/密码是否安全？

> ID：13242942
> 
> 赞同：3
> 
> 时间：2012-11-06T01:05:56.590
> 
> 标签：security, https

阅读 [http://getpocket.com/api/docs/](http://getpocket.com/api/docs/)

通过 HTTP 字符串传递密码是否安全？我的理解是，即使它是 HTTPS，这也不安全。正确的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T01:24:00.067

API 文档声明您正在通过 HTTPS 传递。实际上，HTTP 标头中的所有信息（无论是 GET 还是 POST）都是 SSL 传输的一部分，因此 URL 参数也被加密，因此您的 GET 参数也被加密。不能保证的是您的客户会保留什么。或者，如果有一些其他进程暴露了一些信息，例如您的服务器何时对主机名进行 DNS 查找。另一个例子是，如果你有一个浏览器，它会保留你在其中输入的所有内容的历史记录，包括你的 https url，那么你可能会危及你的安全性。

下面是 HTTP 标头，您的客户端将启动 TCP 连接并发送如下内容：

```
GET /tutorials/other/top-20-mysql-best-practices/ HTTP/1.1  
Host: net.tutsplus.com  
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.5) Gecko/20091102 Firefox/3.5.5 (.NET CLR 3.5.30729)  
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8  
Accept-Language: en-us,en;q=0.5  
Accept-Encoding: gzip,deflate  
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7  
Keep-Alive: 300  
Connection: keep-alive  
Cookie: PHPSESSID=r2t5uvjq435r4q7ib3vtdjq120  
Pragma: no-cache  
Cache-Control: no-cache 
```

SSL 将规定所有信息与发回的任何信息都进行加密。我想说你使用这个 API 是安全的，GET 和 POST 方法之间的唯一区别是，在 POST 中，参数将在正文中，而在 GET 中，参数在标题中。在这两种情况下，所有敏感信息都被加密。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T01:09:11.953

我原则上同意这听起来不安全。URL 可以以纯文本形式（甚至通过 HTTPS）出现在各种有趣的地方，比如日志。最好避免在任何地方使用纯文本。

您可能应该与 API 作者讨论是否有替代策略。例如，其中一些方法看起来同时支持 POST 和 GET，在这种情况下，您可能会 POST 密码详细信息，这是通过 HTTPS 连接执行的相对安全的操作。

# javascript - 使用 JavaScript 设置 div 的高度和宽度？

> ID：13242943
> 
> 赞同：0
> 
> 时间：2012-11-06T01:06:10.923
> 
> 标签：javascript, jquery, html, css

我试图通过javascript设置div的高度和宽度，但无济于事。我已经尝试了很多事情并且到目前为止没有运气，请告诉我我哪里出错了？我以为这将是直截了当的...

我不确定这里的问题是什么，在这种情况下我不能使用 CSS 来设置我需要在 JavaScript 中执行的变量，但这是另一个主题。

```
<div id="demo">Demo Div</div>

<script>
    var test = document.getElementById("demo");
    test.style.width = "100px";
    test.style.height = "100px";
    test.style.cssText = 'border:1px solid black;'
</script> 
```

提前谢谢你。（我也愿意接受 jQuery 替代方案）

-Epik-

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T01:09:39.533

问题是你的最后一行是 setting `cssText`，它覆盖了前两行设置的样式，而不是添加到它们。试试这个：

```
var test = document.getElementById("demo");
test.style.width = "100px";
test.style.height = "100px";
test.style.border = '1px solid black' 
```

演示：http: [//jsfiddle.net/ZtyfB/](http://jsfiddle.net/ZtyfB/)

既然你提到了 jQuery，这里有一种方法可以用来做同样的事情：

```
$("#demo").css({
    width : "100px",
    height : "100px",
    border : '1px solid black'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T01:13:40.293

**正在覆盖您设置的`cssText`高度和宽度，以及您拥有的任何其他样式。**

[jQuery](http://jquery.com/)，感谢[nnnnnn](https://stackoverflow.com/users/615754/nnnnnn)：

```
$("#demo").css({
    width : "100px",
    height : "100px",
    border : '1px solid black'
}); 
```

* * *

我建议像`cssText`这样丢弃`border`：

```
var test = document.getElementById("demo");
test.style.border = '1px solid black';
test.style.width = "100px";
test.style.height = "100px"; 
```

但是如果你真的需要`cssText`，那么先使用它：

```
var test = document.getElementById("demo");
test.style.cssText = 'border:1px solid black;';
test.style.width = "100px";
test.style.height = "100px"; 
```

最后一个可行的解决方案是使用`cssText`：

```
var test = document.getElementById("demo");
test.style.cssText = 'border:1px solid black; width: 100px; height: 100px'; 
```

# c# - 将文本框字符串转换为 int

> ID：13242945
> 
> 赞同：0
> 
> 时间：2012-11-06T01:06:18.740
> 
> 标签：c#, .net, winforms

我正在尝试将 2 个随机数变量与在文本框中输入的 int 值进行比较和相乘。如果它是正确的增量正确的答案它不会增加数字虽然它增量单独工作但它不适用于文本框。

```
private void button1_Click(object sender, EventArgs e)
{
    int x = Randomnumber.Next(12);
    int z = Randomnumber.Next(12);

    //int cv = +correct;
    textBox2.Text = x.ToString();
    textBox3.Text = z.ToString();

    int s = x * z;
    if (s == int.Parse(textBox4.Text))
    {
        correct++;
        numbercorrect.Text = correct.ToString();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T01:30:51.627

**编辑**这是假设您试图让用户在按下按钮之前输入他们的猜测。想我会把这个免责声明放在这里，因为你正在尝试做的事情令人困惑。

查看您当前的代码示例，您正在尝试解析 textBox4.Text，但是，您没有在代码示例中的任何位置设置 textBox4.Text。如果 textBox4.Text 为 string.Empty，则 int.Parse 将抛出异常。

您还应该考虑执行 Int.TryParse，因为它会告诉您它是否工作而不会引发异常。

**编辑：**由于这是一个猜谜游戏，您应该在继续之前验证用户在 textBox4 中的输入。

```
private void button1_Click(object sender, EventArgs e)
{
    int answer;
    if(!int.TryParse(textBox4.Text, out answer))
    {
        MessageBox.Show("Please Enter A Valid Integer.");
        return;
    }
    int x = Randomnumber.Next(12);
    int z = Randomnumber.Next(12);

    //int cv = +correct;
    textBox2.Text = x.ToString();
    textBox3.Text = z.ToString();

    int s = x * z;
    if (s == answer)
    {
        correct++;
        numbercorrect.Text = correct.ToString();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T23:29:09.710

```
 private void button1_Click(object sender, EventArgs e)
    {

        int result = Convert.ToInt32(textBox4.Text); int x, z;

        if (Convert.ToInt32(textBox2.Text) * Convert.ToInt32(textBox3.Text) == result)
        {
            correct++;
            numbercorrect.Text = correct.ToString();
            Randomnumber.Next(12);
            textBox2.Text = Randomnumber.Next(12).ToString();
            textBox3.Text = Randomnumber.Next(12).ToString();

        } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T01:10:32.760

您正在将文本框值与两个随机值的乘积进行比较。除非您在按下按钮之前知道这两个随机数是什么，否则 if 将失败。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T01:41:46.083

该子程序将在`Button1`按下后立即运行。这将显示两个随机数供用户相乘。（在 TB2 和 TB3 中显示。）

现在，一旦显示这些数字（在用户有机会输入任何答案之前），程序就会检查 TB4 中的值。这是空的，并在尝试解析时引发错误。

试着用 2 个按钮把它分成 2 个子程序：一个按钮显示一个新问题，一个按钮检查答案。

编辑：添加代码。（注意：我写了这个徒手 - 不知道它是否会编译......只是大致了解一下。注意按钮名称。）

```
//This routine sets up the problem for the user.
private void btnGenerateProblem_Click(object sender, EventArgs e) { 
  //Get 2 random factors
  int x = Randomnumber.Next(12);
  int z = Randomnumber.Next(12);

  //Display the two factors for the user
  textBox2.Text = x.ToString(); 
  textBox3.Text = z.ToString(); 
}

//This routine checks the user's answer, and updates the "correct count"
private void btnCheckAnswer_Click(object sender, EventArgs e) { 
  //Get the random numbers out of the text boxes to check the answer
  int x = int.Parse(textBox2.Text);
  int z = int.Parse(textBox3.Text);

  //Compute the true product
  int s = x * z; 

  //Does the true product match the user entered product?
  if (s == int.Parse(textBox4.Text))  {
    correct++; 
    numbercorrect.Text = correct.ToString(); 
  }
} 
```

在开头添加验证码`btnCheckAnswer_Click`。

# ruby-on-rails - 使用 `config.exceptions_app = self.routes` 修复 Rails 3.2 中的错误

> ID：13242947
> 
> 赞同：8
> 
> 时间：2012-11-06T01:06:21.437
> 
> 标签：ruby-on-rails, routing

根据这篇文章：

[http://blog.plataformatec.com.br/2012/01/my-five-favorite-hidden-features-in-rails-3-2/](http://blog.plataformatec.com.br/2012/01/my-five-favorite-hidden-features-in-rails-3-2/)

处理错误的最新方法如​​下所示：

```
# application.rb:
config.exceptions_app = self.routes

#routes.rb
match "/404", to: "site#not_found" 
```

但是，他没有解决 Rails 错误应用程序还处理 500 个错误、422 个错误（以及可能是这两个页面的其他错误？）的事实。

所以我拼凑了一个看起来像这样的解决方案：

```
# routes.rb
rack_error_handler = ActionDispatch::PublicExceptions.new('public/')
match "/422" => rack_error_handler
match "/500" => rack_error_handler 
```

这很好，因为它使我的 500 页保持轻量级。

还有其他我应该捕捉的错误吗？我的理解是，虽然 500 页面现在将使用两个机架应用程序，但它仍然与主要的 Rails 应用程序安全隔离。这个强吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-01T09:01:57.093

尝试这个

更新`config/application.rb`

```
config.exceptions_app = self.routes 
```

和你的路线文件

```
match "/404", :to => "errors#not_found" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T08:42:07.253

我在应用程序控制器中添加救援

```
 if Rails.env.production?
    rescue_from ActiveRecord::RecordNotFound, :with => :render_not_found
    rescue_from ActionController::RoutingError, :with => :render_not_found
    rescue_from ActionController::UnknownController, :with => :render_not_found
    rescue_from ActionController::UnknownAction, :with => :render_not_found
    rescue_from ActionView::MissingTemplate, :with => :render_not_found
  end

  def render_not_found(exception)
    logger.info("render_not_found: #{exception.inspect}")
    redirect_to root_path, :notice => 'The page was not found.'
  end 
```

然后添加一个errors_controller来挽救路由错误，将它添加到我的路由文件的底部

```
 match "*path", :to => "errors#routing_error" 
```

# html - 浏览器没有选择 CSS 类

> ID：13242948
> 
> 赞同：1
> 
> 时间：2012-11-06T01:06:24.837
> 
> 标签：html, css, css-selectors

我有以下 HTML：

```
 <div id="geo" class="myright">
                <img class="rounded-extra" src="images/mapa-bhcom.jpg" width="100%" height="100%"  >

                <br/>
                <br/>
                <br/>

                <h3>BHcom</h3>
                <p style="color: #858585; margin-top: -10px;">Ne dozvolite da Vam promaknu najbitnije informacije!</p>

                <ul class="connect">
                    <li class="email">
                        <a href="mailto:info@pagescroller.com">Pošaljite e-mail direktno</a>
                    </li>
                    <li class = "twitter">
                        <a href="http://twitter.com/remacez" target="_blank">Pratite nas na Twitteru</a>
                    </li>
                </ul>

            </div> 
```

我在我的一个也是唯一一个以 html 导入的 CSS 文件中有这个 CSS：

```
#geo .connect .email{
    background: transparent url('../images/icon_mail.png') no-repeat 0 0;
}

#geo .connect .twitter{
    background: transparent url('../images/icon_twitter.png') no-repeat 0 0;
}

#geo .connect a{
    display: block;
    text-decoration: none;
    padding: 0 0 2px 29px;
    margin: 10px 0 0;
    font-weight: normal;
    font-size: 12px;
    color: #666;
}

#geo .connect a:hover{
    color: #333;
    text-decoration: underline;
} 
```

但是，Firefox 或 Chrome 都没有选择我上面与电子邮件相关的样式。twitter 的 CSS 选择器很好。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T01:35:07.207

从背景属性中删除该`background: transparent`属性。Chrome 奇怪地选择了它并使其 100% 透明，因此图像将在那里但不显示。

```
background-image:url(../images/whatever.jpg) no-repeat; 
```

如果您需要它并且不希望子内容受到影响，这将适用于每个浏览器的背景透明度。

```
div {
 -khtml-opacity:.50; 
 -moz-opacity:.50; 
 -ms-filter:"alpha(opacity=50)";
  filter:alpha(opacity=50);
  filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0.5);
  opacity:.50; 
} 
```

如果您不希望透明度影响整个容器及其子容器，请检查此解决方法。你必须有一个绝对定位的孩子和一个相对定位的父母。[您可以在http://www.impressivewebs.com/css-opacity-that-doesnt-affect-child-elements/](http://www.impressivewebs.com/css-opacity-that-doesnt-affect-child-elements/)
查看演示

# php - 带有“where”的php mysql查询错误

> ID：13242955
> 
> 赞同：1
> 
> 时间：2012-11-06T01:07:39.720
> 
> 标签：php, mysql, where

我正在对我们的客户订单数据库进行查询，以查看上周的销售额。查询如下所示：

```
select
distinct day(from_unixtime(customerorder.datetime)) as day,
count(distinct customerorder.customerorderid) as count_totalorders,
count(distinct customerorderpos.itemid) as count_differentitems,
sum(customerorderpos.quantity_ordered) as quantity_ordered,
sum(customerorderpos.itemsubtotal) as item_subtotal,
sum(customerorderpos.pricechangetotal) as item_pricechangetotal,
sum(customerorderpos.itemtotal) as item_total,
sum(customerorderpos.purchase_price * customerorderpos.quantity_ordered) as item_purchasepricetotal,
sum(distinct cart_discounttotal) as total_discount,
sum(customerorderpos.itemtotal - (customerorderpos.purchase_price * customerorderpos.quantity_ordered) - (select distinct cart_discounttotal)) as item_earningstotal,
sum(distinct cart_total_shipping) as total_shipping,
sum(distinct cart_total_tax) as total_tax,
sum(distinct cart_total_complete) as total_complete
from customerorder
inner join customerorderpos on customerorder.customerorderid = customerorderpos.customerorderid
where
customerorder.datetime >= 1351494000 and
customerorder.status_cancelled = "0"
group by day(from_unixtime(customerorder.datetime))
order by customerorder.datetime 
```

当我在 PhpMyAdmin 中输入查询时工作正常并显示最近 7 天的订单。但是当我们在自己的软件中运行它时，它会报错。

```
$result = $db->query($query);
while ($row = $result->fetch_assoc()){ 
```

这显示：“致命错误：在非对象上调用成员函数 fetch_assoc()”

但是....如果我从查询中取出“where customerorder.datetime >= 1351494000”，它工作正常。换句话说，查询可以完美运行，直到我想将其限制在特定时间。Customerorder.datetime 是一个带有时间戳的 int(11) 列。

任何想法可能是什么问题？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T01:25:43.653

我认为这里的问题在于这部分

```
 customerorder.datetime >= 1351494000 
```

让它像这样：

```
 customerorder.datetime >= '1351494000' 
```

您必须将其封装起来才能使其正常工作。希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:13:15.810

谢谢你的帮助。我发现了问题，（当然）是我自己的错误！实际的 SQL 语法很好，我只是在我们自己的软件中遇到了一个错误（$query 正在运行，通过一个清理函数替换了 ">=" 字符，使查询无效）。

很抱歉浪费您的时间:(

# java - 如何在 Guice 中进行需要注入实例的动态绑定？

> ID：13242957
> 
> 赞同：9
> 
> 时间：2012-11-06T01:08:07.097
> 
> 标签：java, dynamic, configuration, guice

我想创建一个将实例动态绑定到命名注释的模块。用例是我想自动将我的配置中的值与属性文件中的键绑定为@Named 值。

但是配置绑定在不同的模块中，所以我需要注入配置。我看过的解决方案是：

1.  在 configure() 方法中绑定。此方法未注入，我无法获取基本配置。

2.  使用提供者/@Provides。提供者只绑定一个实例。

3.  使用 MultiBinder。我的用例与这个扩展提供的有点不同。多重绑定允许您分别绑定多个实例，然后将它们作为更复杂的包含类型的 Collection 注入。我想分别绑定每个实例，并让它们通过唯一可识别的方式注入。

4.  使用 childInjector。不幸的是，如果不对现有代码进行一些广泛的修改，这是不可能的。[这个答案](https://stackoverflow.com/questions/12774020/guice-how-to-bind-classes-that-are-dynamically-obtained-by-an-already-binded-o)很好地描述了如何以这种方式解决这个问题。

5.  以某种方式注入粘合剂。（我开始变得有点 hackier）Guice 允许注入 Injector 以供以后使用，我尝试通过 @Provides 方法将 Binder 注入到模块中，然后直接使用 binder 在方法中进行多个绑定。Guice 不会注入粘合剂。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T04:18:41.873

请记住，在*任何*注入发生之前，*所有*`configure`方法都会配置*所有*绑定。也就是说，有几件事：`Injector`

 *1.  将属性绑定`@Named`到单个`Properties`实例的内容非常有用，有一种[`Names.bindProperties(...)`](http://google-guice.googlecode.com/git/javadoc/com/google/inject/name/Names.html#bindProperties%28com.google.inject.Binder,%20java.util.Properties%29)方法可以自动为您完成。唯一的技巧是您需要`Properties`在运行时拥有实例`configure()`。

    如果它们同时可用，则不必担心将属性绑定到一个模块中并将应用程序绑定到另一个模块中。只要它们都进入同一个`Injector`，Guice就会将它们全部组合起来，让它们满足彼此的依赖关系。

2.  提供者可以返回不同的实例，并且通常会这样做——但你是对的，它不会帮助你区分键。如果直接注入 Properties 实例太难看，可以考虑创建一个轻量级工厂：

    ```
    public class ConfigOracle {
      @Inject private Properties properties;

      public String getAsString(String key) { ... }
      public int getAsInt(String key) { ... }
    }

    public class SomeConfigUser {
      @Inject private ConfigOracle configOracle;

      public void doStuff() {
        doStuffBasedOn(configOracle.getAsString("my.properties.key"));
      }
    } 
    ```

3.  您永远不需要将 a `Binder`（或其他任何东西）注入到模块中。

    *   如果实现`Module`，`binder`将是 的参数`configure()`。如果您`AbstractModule`按照应有的方式进行扩展，只需调用该`binder()`方法即可。
    *   如果需要，您可以通过构造函数参数将依赖项传递给模块，这（就我而言）是模块应该改变它们创建的绑定的唯一方法。
    *   没有理由你不能通过 Injector 创建一个 Module，但你必须首先拥有一个 Injector，听起来你只是想逃避只有一个。
    *   如果您需要注入器中的其他实例，您始终可以`Provider`使用字段/方法/构造函数编写实现`@Inject`，甚至可以在`@Provides`方法中接收参数（将自动[填充依赖项](http://google-guice.googlecode.com/git/javadoc/com/google/inject/Provides.html)）。

总的来说，我仍然喜欢子注入器方法（感谢链接和对我之前回答的赞美！），它最适合您的“基于注入实例的动态绑定”描述，并且实际上就是这么简单：

```
class PropertiesModule extends AbstractModule {
  Properties properties;

  PropertiesModule(Properties properties) {
    this.properties = properties;
  }

  @Override public void configure() {
    Names.bindProperties(binder(), properties);
  }
}

Injector oldInjector = Guice.createInjector(allYourOtherModules);
Module myModule = new PropertiesModule(oldInjector.get(Properties.class));
Injector injector = oldInjector.createChildInjector(myModule); 
```*

# matlab - 来自矩阵 MATLAB 的“查找和替换”

> ID：13242960
> 
> 赞同：1
> 
> 时间：2012-11-06T01:08:38.427
> 
> 标签：matlab, matrix, lookup

我有一个如下所示的矩阵：

```
a = [10 0; 12 5; 10 0; 12 0; 15 0; 15 2];
a =

10     0
12     5
10     0
12     0
15     0
15     2 
```

我正在寻找创建一个新矩阵，该矩阵查找并用取决于第一列值的值替换零。关键是这个矩阵：

```
Key =

10   100
12   200
15   300 
```

如果第一列中的值已经大于零，我想保留它。输出将如下所示：

```
Output =

10   100
12     5
10   100
12   200
15   300
15     2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T01:20:24.753

您可以巧妙地使用逻辑索引在一行中完成：

```
a(~a(:,2),2)=arrayfun(@(x)Key(Key(:,1)==x,2),a(~a(:,2),1))

%a =    
%    10   100
%    12     5
%    10   100
%    12   200
%    15   300
%    15     2 
```

# ruby - Rakefile 和 Gemfile

> ID：13242961
> 
> 赞同：3
> 
> 时间：2012-11-06T01:09:00.780
> 
> 标签：ruby, rake, jruby, gemfile, rakefile

所以我了解了 Rakefile 和 Gemfile 的基本概念（rakefile 基本上只是编译和链接应用程序的依赖项列表和 shell 命令，而 gemfiles 指定应用程序的 gem 版本依赖项），但是我应该如何统一使用它们呢？更具体地说：我在 Uni 有一个项目，我将使用 Ruby 1.8.7 和 JRuby 1.7 以及通过 RVM 在本地计算机上安装的一组 gem。

问题是我的应用程序必须在我的 Uni 的计算机实验室上编译和运行而没有错误，而 Uni 在这些机器上没有 JRuby。我可以安装到我的 shell 帐户上，我使用 JRuby 来编译我的应用程序，但现在我需要输入 jruby 安装的完整路径来编译我的项目（类似于 /usr/home/usrname/blah /jruby-1.7.0），我觉得这很烦人，我想要更简单的东西（同时学习）。

我 Uni 的机器安装了 Rake，我想知道是否可以设置一个 rake 文件来调用 JRuby 和我需要的所有 gem（在 gemfile 中指定它们各自的安装路径）。这可能吗？还是我以错误的方式考虑 rakefile 和 gemfile？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:08:50.483

Rakefile 用于设置在项目上下文中运行 Rake 的依赖项。您已经正确描述了 Gemfile 的用途。

Rake 是一个独立于 JRuby 的程序。它将包含在 JRuby 安装的 bin 文件夹中。当您到达您的 Rakefile 时，您已经处于错误版本的 Rake 的上下文中（包含在常规 Ruby 安装中的版本）。

我认为您正在寻找的只是对您的路径的修改。在您的路径中包含您的 JRuby bin 文件夹，这将允许您指定要使用的 Rake 版本。

对于 JRuby 版本：

```
jruby -S rake your:task 
```

或者只是普通的 Ruby 版本：

```
rake your:task 
```

# javascript - 使用 jQuery 动态地将文本附加到文本框的末尾

> ID：13242967
> 
> 赞同：-2
> 
> 时间：2012-11-06T01:09:30.067
> 
> 标签：javascript, jquery, input

我有以下输入标签：

```
<input type="text" id="title" class="title" maxlength="20> 
```

当用户键入时，我需要将“day”附加到框中文本的末尾。这是如何用 jQuery 完成的？
我试过这个：

```
$('#title').on('keyup', function() {
this.value = this.value+' day';
}); 
```

但它没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T01:22:41.927

使用 jQuery 在末尾追加文本，然后将插入符号移动到所需位置：

```
$('#title').on('keyup', function(e) {
    // Ignore if backspace is pressed
    if(e.keyCode == 46){
       return false;
    }

    // Set the value based on the current value length
    // If it's longer than 3, "day" is already appended
    this.value = (this.value.length<3)?this.value+="day":this.value;

    // Move caret to the latest added character
    var caretPos = this.value.length-3;
     if(this.createTextRange) {
        var range = this.createTextRange();
        range.move('character', caretPos);
        range.select();
    }
    else {
        if(this.selectionStart) {
            this.focus();
            this.setSelectionRange(caretPos, caretPos);
        }
        else
            this.focus();
    }
}); 
```

[现场工作的 jsFiddle 示例](http://jsfiddle.net/sWQ4D/4/)

# python - Tkinter - 输入框 - 格式化为日期

> ID：13242970
> 
> 赞同：4
> 
> 时间：2012-11-06T01:09:43.690
> 
> 标签：python, date, tkinter

我想要一个用于输入日期的输入框，以便用户只能以一种方式输入。

输入前的输入框看起来像这样（不带下划线）**`__/__/____`**，并且**`/`**在用户输入日期时不会删除 's。

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-06T03:35:08.103

感谢@Bryan Oakley 的主要提示，我想出了这个工作代码。

（更新：投入了几年的编程经验和一些最近的读者对改进代码的敏锐眼光。）

```
from __future__ import print_function

try:
    import Tkinter as tk
except ImportError:
    import tkinter as tk

class DateEntry(tk.Frame):
    def __init__(self, master, frame_look={}, **look):
        args = dict(relief=tk.SUNKEN, border=1)
        args.update(frame_look)
        tk.Frame.__init__(self, master, **args)

        args = {'relief': tk.FLAT}
        args.update(look)

        self.entry_1 = tk.Entry(self, width=2, **args)
        self.label_1 = tk.Label(self, text='/', **args)
        self.entry_2 = tk.Entry(self, width=2, **args)
        self.label_2 = tk.Label(self, text='/', **args)
        self.entry_3 = tk.Entry(self, width=4, **args)

        self.entry_1.pack(side=tk.LEFT)
        self.label_1.pack(side=tk.LEFT)
        self.entry_2.pack(side=tk.LEFT)
        self.label_2.pack(side=tk.LEFT)
        self.entry_3.pack(side=tk.LEFT)

        self.entries = [self.entry_1, self.entry_2, self.entry_3]

        self.entry_1.bind('<KeyRelease>', lambda e: self._check(0, 2))
        self.entry_2.bind('<KeyRelease>', lambda e: self._check(1, 2))
        self.entry_3.bind('<KeyRelease>', lambda e: self._check(2, 4))

    def _backspace(self, entry):
        cont = entry.get()
        entry.delete(0, tk.END)
        entry.insert(0, cont[:-1])

    def _check(self, index, size):
        entry = self.entries[index]
        next_index = index + 1
        next_entry = self.entries[next_index] if next_index < len(self.entries) else None
        data = entry.get()

        if len(data) > size or not data.isdigit():
            self._backspace(entry)
        if len(data) >= size and next_entry:
            next_entry.focus()

    def get(self):
        return [e.get() for e in self.entries]

if __name__ == '__main__':        
    win = tk.Tk()
    win.title('DateEntry demo')

    dentry = DateEntry(win, font=('Helvetica', 40, tk.NORMAL), border=0)
    dentry.pack()

    win.bind('<Return>', lambda e: print(dentry.get()))
    win.mainloop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-14T19:07:06.993

我发现了一个非常简单的解决方案。我希望有人能发现它有用。

```
self.entry1=tk.Entry(self)
self.entry1.insert(END, "    /    /        ")
self.entry1.config(fg="grey")

def datemask(self, event):
if len(self.entry1.get()) is 2:
    self.entry1.insert(END,"/")

elif len(self.entry1.get()) is 5:
    self.entry1.insert(END,"/")

elif len(self.entry1.get()) is 11:
    self.entry1.delete(10, END) 
```

绑定入口小部件

```
self.entry1.bind('<KeyRelease>', self.datemask) 
```

# c - 当客户端完成读取和发送文件时，从服务器停止接收

> ID：13242971
> 
> 赞同：1
> 
> 时间：2012-11-06T01:09:44.870
> 
> 标签：c, sockets

基本上我会在一段时间内使用 recv 来读取从我的客户端发送的数据。客户端完成读取文件并发送它，但服务器仍在此期间。我如何通知服务器文件发送完成意味着客户端的feof？

服务器

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>
#include <sys/types.h>      /*For Sockets*/
#include <sys/socket.h>     /*For Sockets*/
#include <netdb.h>      /*For gethostbyaddr()*/
#include <netinet/in.h>     /*For internet sockets*/
#include <dirent.h>

/*Function for creating the lof file of Server*/

void log_event (char *message,char *filename)
{

FILE *file; 
char *log_this;

time_t system_time; //Get the system time
time(&system_time);

log_this=strcat(ctime(&system_time),message); //Create the message to log 

/*Check for filename and log as appropiate*/

if (filename!=NULL)
    {
        file = fopen(filename,"a+"); 
        fprintf(file,"%s",log_this); /*writes the message*/
        fclose(file); /*done!*/     
    }
else    
    {
        file = fopen("ftp_tracelog.txt","a+"); 
        fprintf(file,"%s",log_this); /*writes the message*/
        fclose(file); /*done!*/ 
    }

}

int main (int argc,char *argv[])
{

/*DECLERATIONS*/

char *filename; 
char message [1024];
char *temp;
char temp_2[1024];
char buf[1024];
char *p=buf;
ssize_t  bytesRemaining = 1024;
ssize_t  bytesRemaining2 = 50;
char request[50];
char command[5];
char c[50];
char copy[1024]="COPY_OF_";
FILE *fp;
DIR *dp;
char list[1024];
int port,sock,newsock,serverlen,clientlen,fname_len,recvMsgSize,i,len,count;

struct sockaddr_in server,client;
struct sockaddr *serverptr, *clientptr;
struct hostent *rem;
struct dirent *ep;     

/*END OF DECLERATIONS*/

/*Check for required arguments and get them as appropiate*/

if (argc < 2) { 
        /* Check if server's port number is given */
        printf("Please give the port number!!!\n");
        exit(1);
        }

/*if server's port number is given and filename for log is given*/

if(argc>2){
    filename=argv[1];
    port=atoi(argv[2]);
       }

/*If only port is given*/
if (argc==2){
    port=atoi(argv[1]);
    filename=NULL;
         }

temp="--Server is Starting!!--";
sprintf(message,"%s\n",temp);
log_event(message,filename);

/* Create socket */

if ((sock = socket(PF_INET, SOCK_STREAM, 0)) < 0)
{perror("socket"); exit(1); }

server.sin_family = PF_INET; /* Internet domain */
server.sin_addr.s_addr = htonl(INADDR_ANY); /* My Internet address */
server.sin_port = htons(port); /* The given port */
serverptr = (struct sockaddr *) &server;
serverlen = sizeof (server);

/* Bind socket to address */

if (bind(sock, serverptr, serverlen) < 0) {
perror("bind"); exit(1); }

/* Listen for connections */

if (listen(sock, 40) < 0) { /* 5 max. requests in queue */
perror("listen"); exit(1); }

temp="---Listening for connections to port";
sprintf(temp_2,"%d----",port);
sprintf(message,"%s:%s\n",temp,temp_2);
log_event(message,filename);

/*Accepting Connecttion*/

while(1) {
    clientptr = (struct sockaddr *) &client;
    clientlen = sizeof(client);

        /* Accept connection */
        if ((newsock = accept(sock, clientptr, &clientlen)) < 0){ 
        perror("accept"); exit(1);}

        /* Find client's address */
        if ((rem = gethostbyaddr((char *) &client.sin_addr.s_addr,
        sizeof (client.sin_addr.s_addr), client.sin_family)) == NULL) {
        perror("gethostbyaddr"); exit(1);}

temp="----Accepted connection from ";
sprintf(temp_2,"%s----", rem -> h_name);
sprintf(message,"%s:%s\n",temp,temp_2);
log_event(message,filename);

/* Create child for serving the client */
switch (fork()) {

case -1:
perror("fork"); exit(1);

case 0: /* Child process */

do{

    /* Receive message from client */
    if ((recvMsgSize = recv(newsock,request,sizeof(request),0))< 0)
    perror("recv() failed");

printf("%s\n",request);
//printf("%s\n",command);

/*IF YOU ARE GOING TO EXECUTE AN LS COMMAND*/

if (strcmp(request,"ls")==0)
    {
        dp = opendir ("./");

        if (dp != NULL)
          { /*LOG LS REQUEST*/

            temp="--Client ";
            sprintf(temp_2,"%s requested ls -------",rem -> h_name);
            sprintf(message,"%s:%s\n",temp,temp_2);
            log_event(message,filename);

            /*SEND ALL DIRECTORY LISTING*/    

            while (ep = readdir (dp))
            {
                strcpy(list,ep->d_name);
                //printf("sending:%s\n",list);
                if (send(newsock,list,sizeof(list), 0)!= sizeof(list))
                perror("send() sent a different number of bytes than expected");
            }
            //IF DIRECORY IS FINISHED SEND A LAST MESSAGE FOR ENDING

                (void) closedir (dp);
            if (send(newsock,"end",sizeof("end"), 0)!= sizeof("end"))
            perror("send() sent a different number of bytes than expected");    
        }       

        else
        perror ("Couldn't open the directory");

    }

/*IF THE COMMAND IS PUT*/

if (strcmp(request,"put")==0) 
    {
    sprintf(buf,"");
    printf("execute put!!\n");
        do{
            ssize_t recvd;
            while (bytesRemaining) {

                if (( recvd =recv(newsock,p,bytesRemaining,0))< 0){
                perror("recv() failed");}
                bytesRemaining -= recvd;     // keep track of bytes left
                p += recvd;             
                    }
          }while (buf=="");
    strcat(copy,buf);

    fp=fopen(copy,"w+");
    count=0;

    while (c!="")
    {
        bzero(c,sizeof(c));
        if ((recvMsgSize = recv(newsock,c,sizeof(c),0))< 0)
        perror("recv() failed");
        fprintf(fp,"%s",c);

    }
    fclose(fp);
    printf("!!DONE!!!!\n");
    //printf("%s",request);

    }

}while (strcmp(request,"end")!=0); //run until client sents end request

/*LOG EXIT OF CLIENT*/

temp="--Client";
    sprintf(temp_2,"%s is disconnected---",rem -> h_name);
    sprintf(message,"%s:%s\n",temp,temp_2);
    log_event(message,filename);

close(newsock); /* Close socket */
exit(0);
} /* end of switch */
}/*end of while*/
} 
```

客户

```
#include <stdlib.h>
#include <string.h>
#include <stdio.h>
#include <netdb.h>
#include <netinet/in.h>
#include <sys/socket.h>
#include <sys/types.h>

int main (int argc,char *argv[])
{

int port, sock, serverlen,recvMsgSize,was_read;
int fname_len,msg_len,request_len;
char buf[256];
char *fname;
char request[50];
char list[1024];
char msg[512];
char op[1000];
char temp[5];
char *temp3;
char read;
FILE *fp;
char b[50];

struct sockaddr_in server;
struct sockaddr *serverptr;
struct hostent *rem;

temp3="put";

/* Are server's host name and port number given? */
if (argc < 3) {
printf("Please give host name and port number\n"); exit(1);

}

/* Create socket */
if ((sock = socket(PF_INET, SOCK_STREAM, 0)) < 0) {
perror("socket");
exit(1);
}

/* Find server address */
if ((rem = gethostbyname(argv[1])) == NULL) {
herror("gethostbyname"); exit(1);
}

/* Convert port number to integer */
port = atoi(argv[2]);

/* Internet domain */
server.sin_family = PF_INET; 
bcopy((char *) rem -> h_addr, (char *) &server.sin_addr,
rem -> h_length);

/*Server's Internet address and port*/
server.sin_port = htons(port); 
serverptr = (struct sockaddr *) &server;
serverlen = sizeof(server);

if (connect(sock, serverptr, serverlen) < 0) { /* Request connection */
perror("connect"); 
exit(1); }

printf("Requested connection to host %s port %d\n", argv[1], port);

do{

printf("Please enter request\n:");
scanf("%s",request);

/* Send the string to the server */
if (send(sock,request,sizeof(request), 0)!= sizeof(request))
perror("send() sent a different number of bytes than expected");

if(strcmp(request,"ls")==0)
{
    sprintf(list,"");

    /*Recieve from server*/
    while(strcmp(list,"end")!=0){

        if ((recvMsgSize = recv(sock,list,sizeof(list),0))< 0)
        perror("recv() failed");

        if(strcmp(list,"end")!=0){
        printf("%s\n",list);
                    }
                    }
bzero(request,sizeof(request));
}

/*Command for put*/
if(strcmp(request,"put")==0)
{   bzero(request,sizeof(request));
    bzero(list,sizeof(list));
    printf("Please enter filename:\n");
    scanf("%s",list);
    //printf("%s",list);

    if (send(sock,list,sizeof(list), 0)!= sizeof(list))
    perror("send() sent a different number of bytes than expected");

    fp=fopen(list,"r");

    if(fp==NULL)

    {
    puts ( "Cannot open target file" ) ;
        fclose (fp) ;
        exit(0);
    }

    while(!feof(fp))
    {
    bzero(b,sizeof(b));
    int was_read = fread(b, sizeof(char),50,fp);

    if (send(sock,b,(sizeof (char) * was_read), 0)!= (sizeof (char) * was_read))
    perror("send() sent a different number of bytes than expected");
    }   

    zero(b,sizeof(b));
    if (send(sock,b,sizeof(b), 0)!= sizeof(b))
    perror("send() sent a different number of bytes than expected");

}

}while (strcmp(request,"end")!=0);

close(sock); /* Close socket */
exit(0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T01:13:58.613

一种方法是让客户端在文件末尾关闭套接字。服务器将成功从 接收 0 个字节`recv()`，这意味着另一端干净地关闭了套接字。我注意到您当前没有在服务器代码中检测到此返回值，但您应该检测到。

我注意到您的协议能够请求多个文件。在这种情况下，您需要在发送实际文件之前发送文件中的字节数，然后服务器将知道需要多少字节。或者，您可以像 FTP 一样为文件数据打开第二个套接字连接（一次一个文件）。

作为文体说明，代码中的缩进很糟糕。很难阅读以找出块的开始和结束位置。纯粹出于格式化的原因，我会在代码审查中拒绝此代码。

# c# - 写入文本文件，跳过第一行

> ID：13242974
> 
> 赞同：0
> 
> 时间：2012-11-06T01:09:59.643
> 
> 标签：c#

我想写入一个文本文件，跳过第一行，否则会覆盖其他所有内容。我有一个从文件中读取的数组，如果需要更正文本文件中的数据，则使用它来存储和操作数据，然后我想立即写回数据。原始文本文件有两列，制表符分隔，加上我想保留的顶部单行。

谢谢，

阿曼达

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T01:36:03.837

你可以试试这个：

```
var content = System.IO.File
    .ReadLines(file_path)
    .Skip(1)
    .ToArray(); 
```

您现在有一个仅包含内容的数组 - 而不是标题行。因此，请随心所欲地修改它。

然后，要保留标题行，请执行以下操作将其写回：

```
System.IO.File.WriteAllLines(
    file_path,
    System.IO.File
        .ReadLines(file_path)
        .Take(1)
        .Concat(content)); 
```

那对你有用吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T01:25:51.850

您可以按照以下步骤完成它：

1.  使用以下命令阅读所有行[`ReadAllLines method`](http://msdn.microsoft.com/en-us/library/system.io.file.readalllines.aspx)：

    ```
    string[] lines = System.IO.File.ReadAllLines(@"File Path"); 
    ```

    现在改变任何东西，除了改变任何东西`lines[0]`来保证它的安全。

2.  跳过*第一行*以获取其余的*Modifiable Lines*以保留它：

    ```
    lines = lines.Skip(1).ToArray(); 
    ```

3.  *通过连接First Line*和*Modifiable Lines*来构造要写入文件的新数组。

    ```
    var newLines = new string[] { lines[0] }.Concat(lines); 
    ```

4.  使用以下代码写回所有行[`WriteAllLines method`](http://msdn.microsoft.com/en-us/library/bsz3b1wh.aspx)：

    ```
    System.IO.File.WriteAllLines(@"File Path", newLines); 
    ```

***注意：**这样您就不需要对实际文件进行两次 IO 调用，这是一项昂贵的操作。*

# c++ - typename U = equal_to 是什么 在模板中是什么意思？STL 等于 用法

> ID：13242976
> 
> 赞同：0
> 
> 时间：2012-11-06T01:10:13.230
> 
> 标签：c++, templates, generics

我一直试图理解这段代码

```
 template <typename T, typename _Prd = equal_to<T> >
    struct Vector3
    {
    protected:
        T i,j,k;
        _Prd comp;
    public:
        //default constructor
        Vector3(void);

        //explicit constructor
        Vector3(const T& ijk);

        //explicit constructor
        Vector3(const T& i,const T& j,const T& k);

        //copy constructor
        Vector3(const Vector3<T,_Prd>& copy_from);

        //getters
        T I() const;
        T J() const;
        T K() const;

        //setters
        void I(const T& i);
        void J(const T& j);
        void K(const T& k);

        //get magnitude of vector.
        T Magnitude() const;

        //angle between I,J (clockwise)
        T Direction() const;

        //angle between K and I,J
        T Elevation() const;

        //scale vector to 1
        Vector3<T,_Prd>& Normalize();

        //vector scale up-to value
        Vector3<T,_Prd>& Scale(const T& length);

        ...
}; 
```

我无法理解第一句话

```
template <typename T, typename _Prd = equal_to<T> > struct Vector3 {}; 
```

这是关于的用法，我从[here](http://www.cplusplus.com/reference/std/functional/equal_to/ "这里")和[here](http://en.cppreference.com/w/cpp/utility/functional/equal_to "这里")`equal_to<T>`找到了参考。但仍然没有这样的东西。感谢您帮助我理解这部分。

**更新：**

在看到答案并阅读一些教科书后，我的问题转向了两个方面。

**1\. 默认模板参数**

在 C++11 中，我们可以为模板提供默认模板参数。C++ 入门第 5 版中的示例。第 670 页。

```
#include <functional>
template <typename T, typename F = less<T> >
int compare (const T &v1, const T &v2, F f = F() )
{
    if (f(v1, v2) return -1 ;
    if (f(v2, v1) return 1 ;
    return 0 ;
} 
```

然后我们将此模板用作：

```
bool i = compare(0,42) ; 
```

模板将使用默认的 less 函数对象类来实例化。但是，当我们使用自己的对象时：

```
Sales_data item(cin), item2(cin) ;
bool j = compare (item, item2, compareIsbn) ; 
```

然后 F 转而使用 compareIsbn 函数对象。所以我上面的问题也会发生同样的情况，这种方式将为模板的用户留下一个入口，以允许他们引入自己的函数对象，在这种情况下，它被用作比较器。

**2.谓词**

检查[C++ 中的谓词是什么？](https://stackoverflow.com/questions/5921609/what-is-predicate-in-c)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T01:13:25.117

`std::equal_to`是一个类模板，它提供如下内容：

```
bool operator()(T const & lhs, T const & rhs) const { return lhs == rhs; } 
```

换句话说，它是一个封装了普通`==`比较器的函数对象类。关键是它`equal_to`可以被专门化，因此提供了一种非侵入性的方式来增加可定制性。

最重要的是，您的模板`Vector3`还提供了一种通过第二个模板参数自定义比较器的*侵入式*方法。

请注意，谓词通常是*对象*，而不仅仅是特征类。所以你的容器实际上将包含一个谓词子对象。如果谓词类是默认可构造的，这没问题，但如果不是，那么您通常必须在容器构造函数中提供谓词的副本。

作为一项家庭作业，您可以考虑如何避免在谓词子对象上花费任何实际*内存。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T01:13:35.197

第二个模板参数 _Prd 被分配了一个默认类型，就像函数可以有参数的默认值一样。STL 大量使用它。以 std::basic_string 为例

# database - 单个更新语句中的乐观锁定

> ID：13242979
> 
> 赞同：0
> 
> 时间：2012-11-06T01:10:50.893
> 
> 标签：database, transactions

如果我有两个线程在单独的事务中更新数据库，语句看起来像

线程 1

```
UPDATE people set id='12346' WHERE name='Jeff' 
```

线程 2

```
UPDATE people SET name = 'Jeff' WHERE id='12345' 
```

显然这里有一场比赛。如果线程 1 在线程 2 之前更改了 id，则 12345 将是无效的 ID（假设没有其他人在使用它）。

我想知道的是，在使用乐观锁定时，这是一种可能引发乐观锁定错误的情况（例如，过时的记录错误）吗？UPDATE/WHERE 是否构成读取和写入，或者每个 UPDATE 是否执行原子语句（或者它是否因数据库而异）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T01:12:55.367

DBMS 不将更新作为原子语句实现是非常糟糕的形式，但值得为您的特定环境验证这一点以确保。

# ios - 在 ios 上销毁/卸载视频对象 HTML5

> ID：13242983
> 
> 赞同：1
> 
> 时间：2012-11-06T01:11:03.040
> 
> 标签：ios, html, video, memory-leaks

我正在将多个视频加载到 ios 应用程序的 web 视图中的一个视频对象中。在观看了几个视频后，应用程序会崩溃，假设是内存泄漏。我正在寻找一种在视频暂停和关闭时或在加载新视频之前正确转储流或销毁先前视频的方法。任何帮助将非常感激：

```
<video class="videoPlayer" preload="auto" controls="controls">
    <source src="" type="video/mp4" />
</video>

function LoadNewVideo() {
    video = document.getElementsByTagName('video')[0];
    video.src = "assets/vids/vid" + vidSelect + ".mp4";
    video.load(); // need this for the new video to load
    video.play();
}

function StopVideo() {
    video.pause();
    // kill current video here
    // i've tried the following codes but didn't work
    video.src = '';
    video.load();
} 
```

# c# - 如何在 C# 控件上允许透明背景？

> ID：13242984
> 
> 赞同：0
> 
> 时间：2012-11-06T01:11:16.913
> 
> 标签：c#, background, controls, transparent

我一直在环顾四周，但从未找到真正直接的答案。目前，我正在努力

```
 public frmGameWindow()
    {
        InitializeComponent();
        SetStyle(ControlStyles.UserPaint, true);
        SetStyle(ControlStyles.SupportsTransparentBackColor, true);

    }
    private void frmGameWindow_Load(object sender, EventArgs e)
    {
        imgSrc.BackColor = Color.Transparent;
        lblName.BackColor = Color.Transparent;
    } 
```

然而，它仍然在父级的背景颜色之上提供控件（在这种情况下，是表单本身）。我正在尝试使用 Visual Studio 2010 标准安装中内置的严格功能编写一个非常基本的游戏引擎来帮助我学习 C#。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T01:20:02.020

覆盖控件并创建您自己的控件，您可以在其中覆盖方法。以下是您可以尝试的一些覆盖：

```
protected override CreateParams CreateParams
{
    get
    {
        CreateParams cp = base.CreateParams;
        cp.ExStyle |= 0x00000020; //WS_EX_TRANSPARENT

        return cp;
    }
} 
protected override void OnPaintBackground(PaintEventArgs pevent)
{
    // Don't paint background
} 
```

# php - 我应该在每个页面和请求中检查用户授权吗？

> ID：13242987
> 
> 赞同：2
> 
> 时间：2012-11-06T01:11:45.223
> 
> 标签：php, mysql, authentication

我创建了一个系统，该系统使用用户名/密码登录系统和“phpass”类来存储哈希并在用户登录时检查密码。

我还使用 AJAX 通过 javascript 加载用户信息（只有在用户登录时才能检索到）。

我的问题是，我应该在每个页面和每个返回 AJAX 值的文件中检查用户的身份验证，还是只是在 MySQL 数据库中创建一个“连接”条目。

是因为性能原因在每个页面和请求中使用'phpass'函数是错误的还是使用数据库方法是错误的？

如果用户已登录，保持用户连接并检查每个页面的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T01:15:50.310

使用 a`$_SESSION`并在每一页上检查它

IE

`$loggedIn = ($_SESSION['logged_in']) ? TRUE : FALSE;`

```
if($loggedIn == TRUE){
    //Do stuff here for a logged in user...}` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T02:43:11.637

如果您在标头或其他文件中包含一些配置文件，这些文件在整个网站上都可用，然后签入该文件以进行登录会话，而不是向每个页面添加代码

# javascript - jQuery Remotipart 将 [object Object] 发送到服务器

> ID：13242988
> 
> 赞同：3
> 
> 时间：2012-11-06T01:11:45.057
> 
> 标签：javascript, jquery, ruby-on-rails, file-upload, ruby-on-rails-3.2

我正在尝试使用 ajax 将文件上传到我的 Rails 应用程序。为方便起见，我包含了[jQuery.remotipart gem](https://github.com/JangoSteve/remotipart)。

```
// app/assets/javascripts/application.js
//= require jquery.remotipart 
```

我有一个上传文件的表格。这些文件由 CarrierWave 处理。

```
<%= form_for @import, remote: true do |f| %>
  <fieldset>
    <%= f.label :file, "Attach a CSV file" %>
    <%= f.file_field :file %>
  </fieldset>
  <%= f.submit :upload %>

<% end -%> 
```

不幸的是，当我提交带有附加文件的表单时，它似乎没有正确地到达我的控制器操作。params 哈希将字符串化的 JS 对象作为键。

```
Started POST "/file_imports" for 127.0.0.1 at 2012-11-06 01:00:49 +0000
Processing by FileImportsController#create as JS
  Parameters: {"object Object"=>{","=>{"object Object"=>{","=>{"object Object"=>nil}}}}}` 
```

在 Chrome 的开发工具中，我可以看到这确实是发送到服务器的表单数据：

![表单数据发送到服务器](../Images/e82f5bed36fd0d23235a95ea82c7a621.png)

当我删除时，表单可以完美运行`remote: true`（当然，在这种情况下，它发送的是 HTML 请求而不是 JS 请求）。

有人知道我做错了什么吗？顺便说一句，我使用的是 Rails 3.2.8 和 Remotipart 1.0.2（最新）。

**编辑：**做了一些更多的挖掘。

查看 Remotipart 源，我似乎无法理解它应该做什么。例如，在 中[`vendor/assets/javascripts/jquery.remotipart.js`](https://github.com/JangoSteve/remotipart/blob/master/vendor/assets/javascripts/jquery.remotipart.js#L22)，第 22 行具有以下内容：

```
settings.data = form.serializeArray(); 
```

再往下一点，设置通过`$.rails.ajax(settings)`.

该`$.fn.serializeArray()`方法返回一个 JS 对象数组。如果我们将它们分配给调用的数据属性`jQuery.ajax()`，这将解释我在服务器上看到的序列化对象参数。我们需要传递一个对象作为数据属性，而不是一个对象数组？

但是，当我尝试将数组扁平化为一个对象时，整个事情都会中断，并且会向服务器发送 HTML 请求而不是 JS 请求。我认为这与`jQuery.ajax.processData == false`.

我[在 Remotipart Github 上有一个问题](https://github.com/JangoSteve/remotipart/issues/48)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T08:06:57.380

经过大量的调试和阅读大量代码后，我终于有了与 Rails 3.2.8 配合使用的最新 gem。我被三个陷阱钉住了：

(1) 我在提交表单之前禁用了我的文件输入字段，这导致 remotipart 忽略它以包含在 iframe 提交中。您必须确保您的文件输入已启用。这是您看到的错误的直接原因。

(2) 在我的调试过程中，我`jquery.iframe-transport`用最新的上游源代码覆盖，它不支持`X-Http-Accepts`iframe 中的隐藏变量。您必须使用与 remotipart gem 捆绑的版本。

(3) 如果您使用的数据类型不是`script`. 如果您未在全局 ajax 选项中指定 dataType 或在表单上使用 data-type 属性，则这是默认设置。

# shopify - Shopify API：创建促销？

> ID：13242989
> 
> 赞同：11
> 
> 时间：2012-11-06T01:12:10.800
> 
> 标签：shopify

使用 Shopify API，是否可以为您的商店创建促销活动？如果没有，有没有办法在 Shopify 中以编程方式创建促销活动？（没有向管理员使用 CURL 帖子）

也就是说，我可以使用管理员手动创建促销活动，然后导航到`Promotions`并单击`Add a discount code`链接。我希望能够以编程方式做同样的事情，或者确定这是不可能的。[我在api list](http://api.shopify.com/)上没有看到任何明显的方法，但似乎应该是 API 方法。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-26T01:14:56.683

不幸的是，他们不允许这样做......不过，我求助于创建一个界面来这样做：

[https://github.com/MartinAmps/Shopify-Private-APIs](https://github.com/MartinAmps/Shopify-Private-APIs)

希望能帮助到你

**编辑**

我还创建了[一篇](http://ma.rtin.so/reverse-engineering-shopify-private-apis)关于它的博客文章。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T15:55:34.237

无法通过 API 创建折扣。

如果您愿意，我们已经制作了一个[可用于创建折扣代码的应用程序](http://apps.shopify.com/bulk-discounts)。

否则，您可以使用像 Mechanize 这样的工具来自动为您创建优惠券，但请记住，未来任何时候它都很有可能会中断，因为我们不会做出任何承诺来让我们的管理员在未来保持不变。任何更改都很有可能破坏您最终编写的任何脚本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-01T02:14:39.807

价格规则 API 现在是公开的，允许任何应用程序创建价格规则和折扣代码。

[https://help.shopify.com/api/price-rules](https://help.shopify.com/api/price-rules)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-10T14:43:09.407

如果您熟悉`Rails`或已经在使用`ActiveResource`Shopify API 调用，则可以加入此修改版本的`Discount < ActiveResource::Base` [https://gist.github.com/choonkeat/09a56da222f506e627c5](https://gist.github.com/choonkeat/09a56da222f506e627c5)