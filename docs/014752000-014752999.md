# StackOverflow 问答 14752000-14752999

# tridion - 错误：找不到引用合同的默认端点元素

> ID：14752003
> 
> 赞同：2
> 
> 时间：2013-02-07T13:14:07.947
> 
> 标签：tridion, tridion-2011, tridion-core-services

我正在编写以下代码以通过核心服务在 tridion 中创建一个 MM 组件，但是运行此服务时出现错误，

```
 public ComponentData GetNewMultimediaComponent(CoreServiceClient Client, string folderUri, string schemaUri, string title, FileInfo fi)
    {
        if (fi.Extension == ".png")
        {
            string mmType = GetMultiMediaType(fi.Extension);
            if (mmType != null)
            {
                string tempLocation = "";

                UploadResponse us = new UploadResponse();
                using (StreamUploadClient streamClient = GetConnection())
                {
                    FileStream objfilestream = new FileStream(fi.FullName, FileMode.Open, FileAccess.Read);
                    tempLocation = streamClient.UploadBinaryContent(fi.Name.ToLower(), objfilestream);
                }

                BinaryContentData bcd = new BinaryContentData
                {
                    UploadFromFile = fi.FullName,
                    MultimediaType = new LinkToMultimediaTypeData { IdRef = mmType },
                    Filename = fi.Name,
                    IsExternal = false
                };

                ComponentData res = GetNewComponent(folderUri, schemaUri, title);
                res.ComponentType = ComponentType.Multimedia;
                res.BinaryContent = bcd;

                res = (ComponentData)Client.Create(res, new ReadOptions()); 
```

在上面的代码中，我在下面的行中收到错误

```
using (StreamUploadClient streamClient = new StreamUploadClient()) 

{System.InvalidOperationException: Could not find default endpoint element that references contract 'Tridion.ContentManager.CoreService.Client.IStreamUpload' in the ServiceModel client configuration section. This might be because no configuration file was found for your application, or because no endpoint element matching this contract could be found in the client element.
       at System.ServiceModel.Description.ConfigLoader.LoadChannelBehaviors(ServiceEndpoint serviceEndpoint, String configurationName)
       at System.ServiceModel.ChannelFactory.ApplyConfiguration(String configurationName, Configuration configuration)
       at System.ServiceModel.ChannelFactory.ApplyConfiguration(String configurationName)
       at System.ServiceModel.ChannelFactory.InitializeEndpoint(String configurationName, EndpointAddress address)
       at System.ServiceModel.ChannelFactory`1..ctor(String endpointConfigurationName, EndpointAddress remoteAddress)
       at System.ServiceModel.EndpointTrait`1.CreateSimplexFactory()
       at System.ServiceModel.ClientBase`1.CreateChannelFactoryRef(EndpointTrait`1 endpointTrait)....... 
```

只是为了更新，我通过没有配置文件的 DLL 使用 tridion 核心服务并成功创建连接。

连接设置

```
public StreamUploadClient GetConnection()
    {
        BasicHttpBinding basicHttpBinding = new BasicHttpBinding
        {
            MaxReceivedMessageSize = 10485760,
            ReaderQuotas = new XmlDictionaryReaderQuotas
            {
                MaxStringContentLength = 10485760,
                MaxArrayLength = 10485760
            },
            Security = new BasicHttpSecurity
            {
                Mode = BasicHttpSecurityMode.None,
            }
        };

        EndpointAddress remoteAddress = new EndpointAddress("http://abc/webservices/CoreService2011.svc/streamUpload_basicHttp");

        StreamUploadClient client = new StreamUploadClient(basicHttpBinding, remoteAddress);
        try
        {
            client.Open();
        }
        catch (Exception ex)
        {
           //log.Error("Error:CoreServiceConectionOpen:Common:" + ex.Message);
            throw ex;
        }

        return client;
    } 
```

现在，在下一行出现错误

```
tempLocation = streamClient.UploadBinaryContent(fi.Name.ToLower(), objfilestream);

{System.ServiceModel.ProtocolException: The content type multipart/related; type="application/xop+xml";start="<http://tempuri.org/0>";boundary="uuid:739a821f-aee2-4eaf-9206-05a1ed19311c+id=1";start-info="text/xml" of the response message does not match the content type of the binding (text/xml; charset=utf-8). If using a custom encoder, be sure that the IsContentTypeSupported method is implemented properly. The first 560 bytes of the response were: '
--uuid:739a821f-aee2-4eaf-9206-05a1ed19311c+id=1
Content-ID: <http://tempuri.org/0>
Content-Transfer-Encoding: 8bit
Content-Type: application/xop+xml;charset=utf-8;type="text/xml"

<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Header><h:FilePath xmlns:h="http://www.sdltridion.com/ContentManager/CoreService/2011">C:\Windows\TEMP\tmp6841.png</h:FilePath></s:Header><s:Body><UploadResponse xmlns="http://www.sdltridion.com/ContentManager/CoreService/2011"/></s:Body></s:Envelope>
--uuid:739a821f-aee2-4eaf-9206-05a1ed19311c+id=1--
'. 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T13:23:16.413

问题出在这一行：

```
StreamUploadClient streamClient = new StreamUploadClient() 
```

这是您尝试连接的单独端点。通常，它会从 app.config 中选择连接的地址和所有其他属性，但由于您没有任何需要自己提供所有必需参数，类似于您对 CoreService 所做的事情。请参阅 app.config 示例以查看您需要的参数。

像这样的东西：

```
 public StreamUploadClient GetConnection()
    {
        BasicHttpBinding basicHttpBinding = new BasicHttpBinding
        {
            MaxReceivedMessageSize = 10485760,
            ReaderQuotas = new XmlDictionaryReaderQuotas
            {
                MaxStringContentLength = 10485760,
                MaxArrayLength = 10485760
            },
            MessageEncoding = WSMessageEncoding.Mtom,
            Security = new BasicHttpSecurity
            {
                Mode = BasicHttpSecurityMode.None,
            }
        };

        EndpointAddress remoteAddress = new EndpointAddress("http://abc/webservices/CoreService2011.svc/streamUpload_basicHttp");

        StreamUploadClient client = new StreamUploadClient (basicHttpBinding, remoteAddress);
        try
        {
            client.Open();
        }
        catch (Exception ex)
        {
            log.Error("Error:CoreServiceConectionOpen:Common:" + ex.Message);
            throw ex;
        }

        return client;
    } 
```

# python - Computer Vision: Masking a human hand

> ID：14752006
> 
> 赞同：11
> 
> 时间：2013-02-07T13:14:10.660
> 
> 标签：python, opencv, computer-vision

I'd like to detect my hand from a live video stream and create a mask of my hand. However I'm reaching quite a poor result, as you can see from the picture.

My goal is to track the hand movement, so what I did was convert the video stream from BGR to HSV color space then I thresholded the image in order to isolate the color of my hand, then I tried to find the contours of my hand although the final result isn't quite what I wanted to achieve.

How could I improve the end result?

```
import cv2
import numpy as np

cam = cv2.VideoCapture(1)
cam.set(3,640)
cam.set(4,480)
ret, image = cam.read()

skin_min = np.array([0, 40, 150],np.uint8)
skin_max = np.array([20, 150, 255],np.uint8)    
while True:
    ret, image = cam.read()

    gaussian_blur = cv2.GaussianBlur(image,(5,5),0)
    blur_hsv = cv2.cvtColor(gaussian_blur, cv2.COLOR_BGR2HSV)

#threshould using min and max values
    tre_green = cv2.inRange(blur_hsv, skin_min, skin_max)
#getting object green contour
    contours, hierarchy = cv2.findContours(tre_green,cv2.RETR_TREE,cv2.CHAIN_APPROX_SIMPLE)

#draw contours
    cv2.drawContours(image,contours,-1,(0,255,0),3)

    cv2.imshow('real', image)
    cv2.imshow('tre_green', tre_green)   

    key = cv2.waitKey(10)
    if key == 27:
        break 
```

Here the link with the pictures: [https://picasaweb.google.com/103610822612915300423/February7201303](https://picasaweb.google.com/103610822612915300423/February7201303). New link with image plus contours, mask, and original. [https://picasaweb.google.com/103610822612915300423/February7201304](https://picasaweb.google.com/103610822612915300423/February7201304)

And here's a sample picture from above:

![Sample picture of a torso with arms ... and a hand](../Images/197458b8a1021fdfce9d6956cc657cf6.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-07T16:44:14.823

There are many ways to perform pixel-wise threshold to separate "skin pixels" from "non-skin pixels", and there are papers based on virtually any colorspace (even with RGB). So, my answer is simply based on the paper Face Segmentation Using Skin-Color Map in Videophone Applications by Chai and Ngan. They worked with the YCbCr colorspace and got quite nice results, the paper also mentions a threshold that worked well for them:

```
(Cb in [77, 127]) and (Cr in [133, 173]) 
```

The thresholds for the `Y` channel are not specified, but there are papers that mention `Y > 80`. For your single image, `Y` in the whole range is fine, i.e. it doesn't matter for actually distinguishing skin.

Here is the input, the binary image according to the thresholds mentioned, and the resulting image after discarding small components.

![enter image description here](../Images/88631d42a4a30a0bda3f8cfca09c1e2d.png) ![enter image description here](../Images/1ae9b9d29875a97a838002dac3d563fc.png) ![enter image description here](../Images/93e4ebfcc125d9307524c89e5d94f8db.png)

```
import sys
import numpy
import cv2

im = cv2.imread(sys.argv[1])
im_ycrcb = cv2.cvtColor(im, cv2.COLOR_BGR2YCR_CB)

skin_ycrcb_mint = numpy.array((0, 133, 77))
skin_ycrcb_maxt = numpy.array((255, 173, 127))
skin_ycrcb = cv2.inRange(im_ycrcb, skin_ycrcb_mint, skin_ycrcb_maxt)
cv2.imwrite(sys.argv[2], skin_ycrcb) # Second image

contours, _ = cv2.findContours(skin_ycrcb, cv2.RETR_EXTERNAL, 
        cv2.CHAIN_APPROX_SIMPLE)
for i, c in enumerate(contours):
    area = cv2.contourArea(c)
    if area > 1000:
        cv2.drawContours(im, contours, i, (255, 0, 0), 3)
cv2.imwrite(sys.argv[3], im)         # Final image 
```

Lastly, there are a quite decent amount of papers that do not rely on individual pixel-wise classification for this task. Instead, they start from a base of labeled images that are known to contain either skin pixels or non-skin pixels. From that they train, for example, a SVM and then distinguish other inputs based on this classifier.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T10:49:24.840

A simple and powerful option is **histogram backprojection**. For example, create a 2D histogram using H and S (from HSV color space) or a* and b* (from La*b* color space), using pixels from different *training* images of your hand. Then use [cv2.calcBackProject][1] to classify the pixels in your stream. It's very fast and you should get 25 to 30 fps easily, I guess. Note this is a way to learn the *color distribution* of your object of interest. The same method can be used in other situations.

# django - Tastypie REST 上的 ForeignKey - 模型“”有一个空属性

> ID：14752007
> 
> 赞同：5
> 
> 时间：2013-02-07T13:14:12.297
> 
> 标签：django, rest, tastypie

我需要列出每个员工的工作时间，但我得到：

**模型 '' 有一个空属性 'work_journey' 并且不允许空值。**

上：

**/rest/tastypie/employee/?format=json**

模型.py

```
class Employee():
    registration = models.CharField(u'Registration', max_length=20, unique=True)
    work_journey = models.ForeignKey(WorkJourney, null=True, blank=True) 
```

hr.models.py

```
class WorkJourney(ModelPlus):
    code = models.CharField(max_length=10, null=True, unique=True)
    workinghours = models.CharField(max_length=40)
    excluded = models.BooleanField()

    class Meta:
        db_table='work_journey'
        verbose_name = u'Work Journey'

    def __unicode__(self):
        return self.workinghours 
```

资源.py

```
from suap.models import Employee
from hr.models import WorkJourney

class WorkJourneyResource(ModelResource):
    class Meta:
        queryset = WorkJourney.objects.all()
        resource_name = 'work_journey'
        authentication = BasicAuthentication()

class EmployeeResource(ModelResource):
    journey = fields.ForeignKey(WorkJourney, 'work_journey')
    class Meta:
        queryset = Employee.objects.all()
        resource_name = 'employee'
        authentication = BasicAuthentication() 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-07T13:24:15.817

1/当你在 ressoure.py 中定义你的关系时，你需要一个`WorkJourneyResource`而不是`WorkJourney`

2/ 要允许空值，只需添加`null=True, blank=True`

这是固定的代码：

```
class EmployeeResource(ModelResource):
    journey = fields.ForeignKey(WorkJourneyResource, 'work_journey', null=True, blank=True)
    .... 
```

# c - 二进制表达式的无效操作数，C

> ID：14752012
> 
> 赞同：3
> 
> 时间：2013-02-07T13:14:16.850
> 
> 标签：c

我正在研究一个函数，它需要一些值并找到这些值的最小值、最大值和平均值。我通过引用将所有内容传递给函数，当我尝试执行基本操作时遇到一些错误，例如`+`，`/`错误是

> 二进制表达式的无效操作数（'double *' 和 'double *'）

```
void MinMaxAvg(double *pA, double *min, double *max, double *avg, int lines, double *total )
{
    for (int i=0; i<lines; i++)
    {
        if ( i==0)
        {
            min = &pA[0];
            max = &pA[0];
        }
        else
        {
            if (&pA[i] < min)
            {
                min = &pA[i];
            }

            if (&pA[i] > max)
            {
                max = &pA[i];
            }
        }

        total += &pA[i];     //<-- Errors on this line

    }

    avg = (total / lines);         // <-- Errors on this line.

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T13:20:27.823

似乎您在那里混淆了某些类型。在您的示例中，您将*指针*设置为新值，而不是所述指针的值。

第一个必须是：

```
*total += pA[i]; 
```

而第二个应该是：

```
*avg = (*total / lines); 
```

实际上，您可能希望对那里的第二个错误使用浮点除法（一些编译器因在意想不到的地方使用整数除法而臭名昭著）：

```
*avg = (*total / (double)lines); 
```

但是，如果您这样做，您仍然会遇到错误。例如`&pA[i] > ...`将导致指针比较，即指针的*地址*将被比较。很可能不是你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T13:16:55.160

您正在尝试将地址添加到指针，这不是有效的操作。

你可能的意思是：

```
*total += pA[i]; 
```

您的使用`&pA`似乎很混乱，重新分配指针`min`和`max`.

如果您有一个指向值的指针（如`double *min`），那么`*min`您就是访问（读取或写入）指向的值的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T13:21:31.537

与 C++ 不同，C 语言中没有“通过引用”。如果您想使用变量值，您应该取消引用代码中的每个指针。现在您使用变量地址。

# php - 发送 js data-id 并接收 php？

> ID：14752013
> 
> 赞同：0
> 
> 时间：2013-02-07T13:14:17.180
> 
> 标签：php, ajax

我目前正在研究如何将 JavaScript 发送到 PHP 服务器端。我尝试使用 jquery ajax，但它需要提交（据我所知？）才能发送数据。我的问题是如何在不提交的情况下将 som 数据从 Javascript 发送到 PHP？

我摆弄了以下代码，但无法在 editproduct.php 接收数据

```
$.ajax({
  url: 'includes/editproduct/editproduct.php',
  type: 'GET',
  data: {
    id1: '1',
    id2: '2'
});

//PHP:
print_r($_GET); //Does not show any content 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:15:39.367

`print_r($_GET);`可能会带你到那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:17:51.340

当您使用时`type: 'GET'`，数据将存储在`$_GET`. 如果您想将数据存储在 中`$_POST`，请使用`type: 'POST'`.

此外，不需要围绕变量值的撇号。尝试

```
$.ajax({
  url: 'includes/editproduct/editproduct.php',
  type: 'GET',
  data: {
    id1: 1,
    id2: 2
  }
}); 
```

**（请注意丢失的大括号，它假设关闭数据部分）**

# java - 如何将带有意图的上下文发送到 2 个类？

> ID：14752017
> 
> 赞同：0
> 
> 时间：2013-02-07T13:14:28.223
> 
> 标签：java, android, android-intent

```
public void onClick(View arg0) {
            Intent i = new Intent(getApplicationContext(),
                    PlacesMapActivity.class,AddItemizedOverlay.class);
            // Sending user current geo location
            i.putExtra("user_latitude", Double.toString(gps.getLatitude()));
            i.putExtra("user_longitude", Double.toString(gps.getLongitude()));

            // passing near places to map activity
            i.putExtra("near_places", nearPlaces);
            // staring activity
            startActivity(i);
        } 
```

我想将意图发送到 PlacesMapActivity.class 和 AddItemizedOverlay.class，我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:19:47.983

构造两个单独的 Intent 并发送它们。

# android - 使用 AlarmManager 的多个警报

> ID：14752019
> 
> 赞同：0
> 
> 时间：2013-02-07T13:14:30.287
> 
> 标签：android, alarmmanager, alarms

我目前无计可施。

在我的应用程序中，用户可以通过选择他想要的工作日和时间来设置闹钟。

以下函数检查规则集并查找具有时间标准的规则。在这些情况下，它将为选定的每一天设置一个警报，并将其设置为重复（每 7 天）。

我已经阅读了很多关于多个警报的含义的帖子（与单个警报相反）。我想我已经考虑了以下几点：
- 为每个警报使用新的 Intent
- 为每个警报使用新的 PendingIntent
- 为每个警报使用不同的请求代码

请求代码被收集在一个 ArrayList 中，因此另一个函数可以在程序退出时清除所有警报。

现在的问题是：我的警报不会响。我能够追踪到这个函数的错误。AlarmManager 实例很好。我在最底部（在带星号的行之后）设置了一个测试警报。那火了 为什么？？？

```
clearAlarms();
int i=0;    
ArrayList<Rule> allRulesWithTimeFrames = new ArrayList<Rule>();
allRulesWithTimeFrames = Rule.findRuleCandidatesByTimeFrame();
for(Rule oneRule : allRulesWithTimeFrames)
{
    for(Trigger oneTrigger : oneRule.getTriggerSet())
    {
        if(oneTrigger.getTriggerType() == Event_Enum.timeFrame)
        {
            Calendar calNow, calSet;
            Time setTime;

            if(oneTrigger.getTriggerParameter())
                 setTime = oneTrigger.getTimeFrame().getTriggerTimeStart();
            else
                 setTime = oneTrigger.getTimeFrame().getTriggerTimeStop();

            calNow = Calendar.getInstance();            
            calSet = (Calendar) calNow.clone();
            calSet.set(Calendar.HOUR_OF_DAY, setTime.getHours());
            calSet.set(Calendar.MINUTE, setTime.getMinutes());
            calSet.set(Calendar.SECOND, 0);
            calSet.set(Calendar.MILLISECOND, 0);
            // At this point calSet would be a scheduling candidate. It's just the day the might not be right, yet.

            long milliSecondsInAWeek = 1000 * 60 * 60 * 24 * 7;

            for(int dayOfWeek : oneTrigger.getTimeFrame().getDayList())
            {
                // --------------------
                // Here's a lot of code I will spare you. It only changes
                // the variable calSetWorkingCopy.
                // --------------------

                SimpleDateFormat sdf = new SimpleDateFormat("E dd.MM.yyyy HH:mm");
                i++;
                String calSetWorkingCopyString = sdf.format(calSetWorkingCopy.getTime()) + " RequestCode: " + String.valueOf(i);
                Miscellaneous.logEvent("i", "AlarmManager", "Setting repeating alarm because of rule: " + oneRule.getName() + " beginning at " + calSetWorkingCopyString);

                Intent alarmIntent = new Intent(automationServiceRef, AlarmListener.class);
                PendingIntent alarmPendingIntent = PendingIntent.getBroadcast(automationServiceRef, i, alarmIntent, 0);
                centralAlarmManagerInstance.setInexactRepeating(AlarmManager.RTC_WAKEUP, calSetWorkingCopy.getTimeInMillis(), milliSecondsInAWeek, alarmPendingIntent);
                requestCodeList.add(i);
            }
         }
    }
}

        // ************* The below code is working *************
    // get a Calendar object with current time
    Calendar cal = Calendar.getInstance();
    // add 5 minutes to the calendar object
    cal.add(Calendar.SECOND, 10);
    SimpleDateFormat sdf2 = new SimpleDateFormat("E dd.MM.yyyy HH:mm");
    String calSetWorkingCopyString2 = sdf2.format(cal.getTime());
    Miscellaneous.logEvent("i", "AlarmManager", "Setting repeating alarm because of hardcoded test: beginning at " + calSetWorkingCopyString2);
    Intent alarmIntent2 = new Intent(automationServiceRef, AlarmListener.class);
    PendingIntent alarmPendingIntent2 = PendingIntent.getBroadcast(automationServiceRef, 0, alarmIntent2, 0);
    centralAlarmManagerInstance.setInexactRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), 5000, alarmPendingIntent2);
    requestCodeList.add(0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:40:25.277

尝试替换这个

```
PendingIntent alarmPendingIntent2 = PendingIntent.getBroadcast(automationServiceRef, 0, alarmIntent2, 0); 
```

有了这个

```
PendingIntent alarmPendingIntent2 = PendingIntent.getBroadcast(automationServiceRef, 0, alarmIntent2, PendingIntent.FLAG_CANCEL_CURRENT); 
```

# php - 使用 CodeIgniter 构建的表单不起作用

> ID：14752021
> 
> 赞同：0
> 
> 时间：2013-02-07T13:14:35.747
> 
> 标签：php, forms, codeigniter

我在处理使用 codeigniter 创建的表单时遇到问题。我尝试了多种在网页上呈现表单的方法。但是在不同的点上我都不成功。

我正在寻找渲染这个

我试图用代码渲染一个表单：

```
<?php $this -> load -> helper('form');
    $formattr = array('id="form1"'); 
    form_open('registerUsr', $formattr);?>
        <fieldset>
            <legend>Registration Form</legend>
            <p class="first">
                <label for="firstName">First Name: </label>
                <input type="text" id="name" name="firstName" size="20" value="<?php echo set_value('first_name'); ?>" />
            </p>
        </fieldset>
        <p class="submit"><button type="submit" value="Submit" /></p>
<?php echo form_close(); ?> 
```

我尝试使用 codeigniter 函数创建它

```
<?php echo form_open('registerUsr'); 
  echo form_input('$data'); 
  echo form_submit('submit', 'Submit'); 
  echo form_close();?> 
```

我尝试了混合使用 html 标签和辅助类函数的混合品种。

但在所有方面，最终呈现网页上的表单`<form class=“form1”&gt;`标签都丢失了。它也不是 index.php/registerUsr，而是进入 index.php/searchUniv 页面。（我已经检查了路线配置文件。它被正确指出）

任何建议/想法表示赞赏。

蒂亚:)

更新：这是控制器和路由文件

```
public function registration() {
        $this -> template -> title -> set('Register');
        $this -> template -> _content -> view('register_index', $overwrite = TRUE);
        $this -> template -> _sidebar -> view('gen_sidebar', $overwrite = TRUE);
        $this -> template -> publish();
    }

public function registerUsr(){
        $this -> template -> title -> set('Register');
        $searchItem = $this -> input -> post('form1');
        $this -> template -> publish();
    }
} 
```

register_index.php 是问题中的代码，现在看起来还可以。

```
$route['searchUniv']="sglobal/searchUniv";
$route['registration']="sglobal/registration";
$route['registerUsr']="sglobal/registerUsr"; 
```

模板是我编写的自定义库，在所有其他页面中都可以正常工作。这个应用程序处于最后阶段，所以我可以有 95% 的信心说，模板工作正常。此外，我正在查看最终渲染页面的来源以及它到底想要什么。那么，我们可以在指向模板之前查看任何配置吗？

现在最终的渲染看起来像：

```
<form action="http://localhost/univapp/index.php/registerUsr" method="post" accept-charset="utf-8" id="form1" class="form1"> 
```

但是在提交它的时候`http://localhost/univapp/index.php/searchUniv`

仅供参考，我在同一页面上还有另一个搜索表单（很远的 div，不同的 id，不同的名称，不同的类），它使用指向 index.php/searchUniv 的 POST。有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:13:34.613

你的第一个例子没有 echo `form_open()`。尝试在函数调用之前添加回声。

```
<?php $this -> load -> helper('form');
    $formattr = array('id="form1"'); 
    echo form_open('registerUsr', $formattr);?>
        <fieldset>
            <legend>Registration Form</legend>
            <p class="first">
                <label for="firstName">First Name: </label>
                <input type="text" id="name" name="firstName" size="20" value="<?php echo set_value('first_name'); ?>" />
            </p>
        </fieldset>
        <p class="submit"><button type="submit" value="Submit" /></p>
<?php echo form_close(); ?> 
```

默认情况下，表单也会提交到当前页面，这可能是它被定向到 index.php/searchUniv 的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:21:38.167

如果不需要，尽量避免使用 Codeigniter 助手，html 渲染速度比 php 快。表单助手所需要的只是 form_open() ，因为这会添加 csrf 令牌。您的代码中似乎也有一些错字！

**清单：**

***应用程序/config/config.php***

```
$config['base_url'] = 'http://www.mysite.com/'; //I suspect this is your problem with routing
$config['csrf_protection'] = TRUE; 
```

***应用程序/config/routes.php***

```
$route['register']  = 'controller/get_method'; //form
$route['register/post'] = 'controller/post_method'; //validation 
```

***意见/registerUsr.php***

```
<?php if( validation_errors() ) : ?>
  <p class=error>Please Correct the Errors below</p>
<?php endif; ?>

<?=form_open('register/post', array('id'=>'', 'class'=>''))?>

<fieldset>
    <legend></legend>
    <label for="firstname">
        <span class=required>*</span>
        First Name
        <small class=helper>Enter your First Name</small>
    </label>
    <input type=text id=firstname name=firstname value="<?=set_value('firstname')?>"/>
    <?=form_error('firstname')?>

    <button type=submit>Submit</button>
</fieldset>

<?=form_close()?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T06:47:56.013

发现错误。我正在查看“查看源代码”选项以了解页面的呈现方式以及呈现的数据。但是查看 DOM 检查器（Inspect Element）的输出告诉我 DOM 仍然没有考虑表单标签。作为对 DOM 对 PHP 填充的无效 HTML 执行的更正的一部分，它删除了它。

任何给出的属性`<input name=... .... />`都会被填充，`<input name=... .... >`因此会留下很多打开的标签。一旦`< />`模板中的每个标签都被更改`<> </>`，它就开始工作了。

简而言之，代码通过验证器运行，现在一切正常。

感谢您所有的帮助！

# android - android如何将.ini文件放在SO libs附近

> ID：14752024
> 
> 赞同：1
> 
> 时间：2013-02-07T13:14:49.553
> 
> 标签：android, native

如何将我的 .ini 文件放在我的 SO 库所在的文件夹中？本机代码使用 ApplicationPath 中的这个 .ini

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:37:51.940

> 如何将我的 .ini 文件放在我的 SO 库所在的文件夹中？

AFAIK，你不能。

> 本机代码使用 ApplicationPath 中的这个 .ini

请重写本机代码以减少尴尬，将路径作为 JNI 函数的参数。

# java - 使用哪个 java 集合？

> ID：14752029
> 
> 赞同：0
> 
> 时间：2013-02-07T13:15:16.557
> 
> 标签：java, collections

我无法确定哪个 Java 集合最适合我的场景。目前，我正在阅读一条记录，该记录为我提供了“帐号”和“客户名称”值。

基于这些值，我需要根据第一个文件中提供的帐号和客户名称搜索另一个文件。问题是第二个文件中的帐号不是唯一的，所以我需要同时使用帐号和客户名称进行搜索。

我不想为我从第一个文件中读取的每条记录打开、读取、搜索、关闭第二个文件，而是想将整个文件读入一个集合并使用 Collections 二进制搜索来定位第二个文件中的关联记录。

是否有某种类型的收藏最适合这个目的（如果有的话）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:21:54.500

假设您有足够的内存，我可能会使用[`HashMap<AccountIdentifier, CustomerRecord>`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html).

Where`CustomerRecord`是一个包含您要查找的记录的对象。

然后创建一个关键类：

```
public class AccountIdentifier {
    public String accountNumber;
    public String customerName;

    public AccountIdentifier(String accountNumber, String customerName) {
        this.accountNumber = accountNumber;
        this.customerName = customerName;
    }
    public int hashCode() {
        return (accountNumber+"#"+customerName).hashCode();
    }

    public boolean equals(Object obj) {
        if(!(obj instanceof AccountIdentifier)) return false;
        else {
            AccountIdentifier id = (AccountIdentifier)obj;
            return accountNumber.equals(id.accountNumber) && customerName.equals(id.customerName);
        }
    }
} 
```

因此，您必须通过读取每条记录并`CustomerRecord`使用其中包含的数据创建一个实例来将第二个文件预加载到内存中，并且还要`AccountIdentifier`放入您的`Map`：

`theMap.put(accountIdentifier, customerRecord);`

到了要搜索的时候，您已经从第一个文件中获得了 accountNumber 和 customerName，然后执行以下操作：

```
AccountIdentifier accountIdentifier = new AccountIdentifier(accountNumber, customerName);
CustomerRecord record = theMap.get(accountIdentifier); 
```

最后的评论，如果您的文件太大而无法放入内存，那么您应该考虑使用像[ehcache](http://ehcache.org)这样的缓存库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:22:33.763

最好的办法是创建一个包含帐号和客户名称的对象。然后您可以将您的客户文件读入到 a 中`Map<CustomerInfo, FileInfo>`。在这里，`CustomerInfo`是您的对象，其中仅包含客户姓名和帐号，并且`FileInfo`是您的对象，其中包含从文件中读取的所有信息。现在您可以对地图进行简单的查找。

请注意，您需要确保`CustomerInfo`实现`hashCode()`并`equals()`使其正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T13:23:08.287

我认为这更多地取决于您如何定义您的记录，而不是实际收藏。

您可以创建一个`Comparator`比较两条记录的记录，并且基本上考虑了 id 和 name，如果它们匹配，则假设它是相同的记录。

基于此，您可以使用您定义的比较器来搜索`ArrayList`（例如）符合您条件的记录。

二进制搜索仅在您仅返回**一个**匹配项时才有用，正如您从方法签名中看到的那样，**并且**您需要`Collection`在调用二进制搜索之前对其进行排序。

所以，总结一下：

*   定义一个`Comparator`接受两个`Record`对象并检查它们是否具有相同 id/name 的 a。

*   例如，将所有记录加载到一个`ArrayList`中。

*   对它们进行排序。

*   `Collections.binarySearch`使用您的排序集合和自定义比较器调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T13:29:25.863

为什么不做得更快呢？

创建一个类客户：

```
 public class Customer {
     private final int accountNumber;
     private final String customerName;

     public Customer (int accountNumber, String customerName) {
          this.accountNumber = accountNumber;
          this.customerName = customerName;
     }
     public boolean equals(Object o) {
          //check if accountNumber and customerName are equal
     } 
     public int hashCode() {
          return 13*accountNumber + 31*customerName.hashCode();
     }
 }
 public class CustomerBucket() {
     private final int forAccountNumber;
     private Map<String, Customer> map = HashMap<String, Customer>();
     public CustomerBucket(int forAccountNumber) {
         //...
     }
     public boolean equals(Object o) {
         return o.forAccountNumber == this.forAccountNumber;
     }
     public int hashCode() {
         return forAccountNumber;
     }
 }
 public class AccountSearcher {
     private final Set<CustomerBucket> set = new HashSet<CustomerBucket>();
     public Customer getCustomer(int accountNumber, String name) {
         return set.get(accountNumber).get(name);
     }
 } 
```

这样，您几乎可以在 O(1) 中搜索记录。此方法还使您能够搜索 accountNumbers（并返回与该号码关联的名称列表）。

# regex - 使用正则表达式从Matlab中的字符串数组中过滤掉字符串

> ID：14752033
> 
> 赞同：1
> 
> 时间：2013-02-07T13:15:26.680
> 
> 标签：regex, string, matlab

**是否有与 strmatch 等效的函数，它返回以指定正则表达式开头的所有数组元素的数字索引（而不是 string ？**

背景：我有一个名为`strarray`. 我想过滤掉所有没有特定`strprefix`. 以下代码查找存在特定前缀的字符串数组 ( [strmatch func](http://www.mathworks.co.uk/help/matlab/ref/strmatch.html) ) 的索引，然后从包含前缀的行构建新数组：

```
indexes = [];
n = strmatch(strprefix, strarray);
indexes = [indexes,n];
indexes = sort(indexes);
newarray = strarray(indexes); 
```

它工作正常，但是它`prefix`是一个字符串，我想改用定义的正则表达式。

**或者也许有一种更简单的方法（一个班轮？）来完成这样的任务？**

* * *

更新

我知道正则表达式功能。我正在尝试从字符串数组中过滤掉字符串，但我很难在一两个步骤中完成它。我当前的代码执行此操作（不确定它是否是正确的 Matlab 编码方式）。

*   步骤 1\. 清空不带前缀的字符串：`regexp(strarray,[prefix,'.*'],'match','once');`
*   Step 2\. 获取空行索引`emptyCells = cellfun(@isempty,array);`
*   步骤 3\. 删除空行`array(emptyCells) = [];`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:15:48.610

你真的自己解决了你的问题，但这里是你如何在一条（长）行中完成你所说的一切。注意-我假设您的`prefix`字符串以开头，`^`因此它正确匹配“字符串的开头”（如果确实是您想要做的）。其他问题 - 除非 strarray 中的所有字符串长度相同，否则您确实应该使用单元格数组。在这种情况下，您的第 3 步不会删除该字符串，它只是将其设置为`[]`. 因此，我建议更改逻辑，以便在输出中“包含所有好的字符串”，而不是删除坏字符串。这使它看起来如下：

```
strippedArray = strarray(~cellfun('isempty',regexp(strarray,[prefix,'.*'],'match','once'))); 
```

这对我有用...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:19:29.027

函数[REGEXP](http://www.mathworks.com/help/matlab/ref/regexp.html)允许您使用正则表达式匹配字符串。

如果您在构建或应用正则表达式时需要帮助，您可能需要发布更多详细信息。

# facebook - 发布到页面流 - api 返回 id 但帖子未出现在流中

> ID：14752034
> 
> 赞同：1
> 
> 时间：2013-02-07T13:15:28.520
> 
> 标签：facebook, api, post, stream

我正在运行一个小的 PHP 应用程序，其中一些用户使用图形 api 连接到 Facebook 并发布到他们的页面提要。它运行良好，没有问题，直到今天有用户告诉我他的帖子没有出现在他的页面上。我检查了我的数据库和日志文件，facebook api 没有例外，它返回了新帖子的 id。我尝试发布完全相同的帖子，并将相同的图像文件附加到我自己的页面上，并且一切都按预期工作。

这是执行 API 调用的 PHP 代码：

```
$fb = new facebook(array('appId'=>FB_APP_ID, 'secret'=>FB_APP_SECRET, 'cookie'=>true));
try {
  if(!empty($post->file)) {
    $do = "photos";
    $request['fileUpload'] = true;
    $request['source']     = "@".realpath("data/srmfiles/{$userIdentity->id}/{$post->file}");
    $fb->setFileUploadSupport(true);
  }
  $postToId = ($do=="photos" && $post->facebook_page->facebookFotoAlbumId)
          ? $post->facebook_page->facebookFotoAlbumId 
          : $post->facebook_page->facebookId;
  $fb->setAccessToken($post->facebook_page->accessToken);
  $response             = $fb->api("/{$postToId}/{$do}","POST",$request);
  $post->wasSuccessfull = 1;
  $post->facebook_id    = $response['id'];
}
catch(FacebookApiException $e){
  $post->failCount++;
  if($post->failCount>=3) {
    $post->wasSuccessfull = -1;
  }
  $handle = fopen("srm-errors-".date("Ymd").".txt","a");
  fwrite($handle,date("H:i:s")." - ".$e->getMessage()."\n");
  fclose($handle);
} 
```

有谁知道可能是什么问题，Facebook API 没有抛出异常，返回新帖子的 ID，但帖子没有出现在页面上，也不能直接通过 ID 查看？

# java - 是否有一种与数据库无关的方法来确定 JDBC 中的常见 SQL 错误？

> ID：14752036
> 
> 赞同：2
> 
> 时间：2013-02-07T13:15:29.630
> 
> 标签：java, database, jdbc

我在 JDBC 之上实现了一个轻量级 ORM 层，用于几种不同的数据库实现。

是否有一种与数据库无关的方法来确定常见的 SQL 错误？

（如...）

*   外键违规
*   独特的违反
*   检查违规
*   检测到死锁

使用 PostgreSQL 可以通过 识别`SQLException#getSQLState()`这些错误代码，但这些错误代码与 MySQL 中的相应错误代码不匹配。

尽管首选解决问题的通用方法，但似乎需要特定于驱动程序的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T13:21:02.300

[春天](http://www.springsource.org/)管理这个。他们已经完成了让您更轻松的工作。查看它的 JDBC 包。

Spring 不久前被 VMWare 收购，但他们仍然将其框架作为开源提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:30:58.430

虽然 Spring Framework 中的解决方案对已知 SQL 错误的分类有一些支持，但该解决方案是分层的，并且部分不正确。

我们觉得需要自定义实现，并提出了[jORM](https://github.com/jajja/jorm)[`com.jajja.jorm.Dialect`](https://github.com/jajja/jorm/blob/master/src/main/java/com/jajja/jorm/Dialect.java)的方言特定元素，一个轻量级的 Java ORM。数据基于特定版本的 SQL 引擎的测试。其他版本的引擎可能在错误表示上有所不同，并且某些引擎尚未经过检查。

**请注意**，遗憾的是，对于 JDBC 中的 SQL 错误分类，没有与数据库无关的替代方案。

# mysql - 从两个不相关的表中更新查询

> ID：14752046
> 
> 赞同：0
> 
> 时间：2013-02-07T13:15:47.123
> 
> 标签：mysql

我需要更新表中的列。应该从另一个表中检索更新值。我提出的查询是声明：

```
update db1.t1 set location=(select countryName from db1.t1, db2.t2 where t1.num 
between t2.beginNum AND t2.endNum limit 1) 
```

我收到以下错误：

```
Error Code: 1093 You can't specify target table t1 for update in FROM clause. 
```

`t1`然后，当我从`FROM`子句中删除表名时

```
update db1.t1 set location=(select countryName from db2.t2 where num 
between t2.beginNum AND t2.endNum limit 1) 
```

查询有效，但我不确定它是否正常工作。据我所知，`FROM`如果我从多个表中检索，我必须在子句中指定两个表。我工作的两张表没有任何共同的列。但是，在 中的`t1`两个值之间可以找到一个值`t2`。第二个查询绝对正确吗？查询如何知道子句来自第一个表`num`之后？`where`我害怕我得到错误的价值观。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:42:45.473

这两个查询做不同的事情。

第一个是尝试为`t2.CountryName`t1 中的每个位置分配一个任意值。它永远不会分配 NULL 值，因为可能有一些`t1.num`满足条件。什么时候`t1.num`不满足`between`条件。第一个查询中的两个引用是不同的引用，因此您在表之间`db1.t1`有一个隐式。`cross join`

第二个是将任意`t2.CountryName`位置分配给`num`行上的值满足条件的位置。对于其他行，将分配 NULL。

我的猜测是第二个查询确实是您想要做的。

# c# - 任何用户、工作站特定配置的配置文件位置

> ID：14752048
> 
> 赞同：1
> 
> 时间：2013-02-07T13:15:51.110
> 
> 标签：c#, vb.net

存储机器特定配置文件的正确位置在哪里。该文件会不时更改，并且需要任何用户都可以访问（因此每台机器一个配置）。我不想修改 app.config，因为它会在新版本中被覆盖并且由于许可原因。该文件将在第一次启动时创建，并保留在任何新版本中。问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:42:34.860

.NET 框架已经使用了一个机器配置文件，其中包含由在该机器上运行的所有 .NET 应用程序共享的设置，但听起来不像您正在寻找的。

如果您不需要应用程序能够对配置文件进行修改，那么我想说最简单的方法是将设置存储在可执行文件夹中的 XML 文件中。您可以轻松地从当前目录加载应用程序中的设置。您可以将文件命名为任何您想要的名称。

但是，如果您需要从应用程序中修改配置文件，那么我不建议这样做，因为并非每个用户都具有写入应用程序文件夹中文件所需的权限。因此，如果是这种情况，我建议将配置文件存储在隔离存储中。

当您更改应用程序的版本号时，隔离存储可能会变得有点棘手，以确保您的存储不会“丢失”。当您想要存储可从机器上运行的任何应用程序访问的设置时，它会变得更加棘手。过去，我需要制作一个独立的存储，供一套软件中的多个应用程序共享，因此我编写了以下类，该类非常适用：

```
Public Class LocalStorage
    Implements ILocalStorage

    Private Const _CompanyUrl As String = "http://www.mycompany.com"

    Public Function Read(Of T)(ByVal fileName As String) As T
        Dim contents As T = Nothing
        Dim serializer As XmlSerializer = New XmlSerializer(GetType(T))
        Try
            Using stream As Stream = New IsolatedStorageFileStream(fileName, FileMode.Open, FileAccess.Read, GetStorage())
                Using xmlReader As XmlReader = New XmlTextReader(stream)
                    contents = CType(serializer.Deserialize(xmlReader), T)
                End Using
            End Using
        Catch ex As FileNotFoundException
        Catch ex As Exception
            Throw New IOException("Failed to read from " + fileName + " in local isolated storage", ex)
        End Try
        Return contents
    End Function

    Public Sub Write(Of T)(ByVal fileName As String, ByVal serializableDataObject As T)
        Dim serializer As XmlSerializer = New XmlSerializer(GetType(T))
        Try
            Using stream As Stream = New IsolatedStorageFileStream(fileName, FileMode.Create, FileAccess.Write, GetStorage())
                Using xmlTextWriter As XmlTextWriter = New XmlTextWriter(stream, New UTF8Encoding(False))
                    xmlTextWriter.Formatting = Formatting.Indented
                    Dim namespaces As XmlSerializerNamespaces = New XmlSerializerNamespaces()
                    namespaces.Add("", "")
                    serializer.Serialize(xmlTextWriter, serializableDataObject, namespaces)
                End Using
            End Using
        Catch ex As Exception
            Throw New IOException("Failed to write to " & fileName & " in local isolated storage", ex)
        End Try
    End Sub

    Private Function GetStorage() As IsolatedStorageFile
        Return IsolatedStorageFile.GetStore(IsolatedStorageScope.Machine Or IsolatedStorageScope.Assembly, Nothing, New Url(_CompanyUrl))
    End Function
End Class 
```

# java - 如何使用斯坦福核心 NLP 在 Java 中执行共指解析？

> ID：14752049
> 
> 赞同：1
> 
> 时间：2013-02-07T13:15:52.607
> 
> 标签：java, xml-parsing, stanford-nlp

我有一段文字，我想对它进行coref解析，这样里面的所有代词都会被名词代替。这是我正在使用的代码：

```
Properties props = new Properties();
props.put("annotators", "tokenize, ssplit,pos,lemma,ner,parse,dcoref");
StanfordCoreNLP pi= new StanfordCoreNLP(props);

String text = "Delhi is the capital city of India.It is the second most populous metropolis in India after Mumbai and the largest city in terms of area.";   
Annotation doc = new Annotation(text);
pi.annotate(doc);
Map<Integer, CorefChain> graph = doc.get(CorefChainAnnotation.class);
for (Map.Entry entry : graph.entrySet()) { 
    CorefChain c = (CorefChain) entry.getValue();
    CorefMention cm = c.getRepresentativeMention();
    System.out.println(c);
} 
```

# javascript - 将用户输入解析为日期

> ID：14752050
> 
> 赞同：1
> 
> 时间：2013-02-07T13:15:55.457
> 
> 标签：javascript

我有一个用户插入日期的表单（**编辑**：输入是“按原样”复制表单文档，因此格式不同）

《2012 年 12 月 1 日》

“2012-12-01”

《2012.12.01》

“01.15.2012”

还有一些不友好的（但打字速度很快！）输入，如：

“01122012” // 2012 年 1 月 12 日

“011212” // 2012 年 1 月 12 日

输入格式不是固定的，所以我应该把我得到的东西弄得一团糟......

当然有一些优先级：

"12.12.12" 应该被解析为**yy.mm.dd** IF VALID，或者**dd.mm.yy**作为第二个选项。

大多数现成的函数都适用于“格式正确”的内容..所以我需要一个算法（或其他语言中解析器的良好示例代码）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:29:55.230

您可以“直接”执行此操作，例如：

```
var dateString; // user input date
if(dateString.split(" ").length == 3){
    // you have "yyyy mm dd" format
} else if(dateString.split("-").length == 3){
    // you have yyyy-mm-dd format
} else if(dateString.split(".").length == 3){
    // you have "yyyy.mm.dd" or "mm.dd.yyyy" format
} else {
    // suppose you have "yyyymmdd" or "mmddyyyy" format
} 
```

在您可以有两种不同格式的情况下，您必须检查日、年和月值是否为有效年份。如果是这样，您可以建立日期，否则尝试其他方式。

对于 yyyymmdd 和 mmddyyyy 组合，您可以使用`substr()`字符串上的函数来提取日、年和月。

但是，您始终必须考虑到用户输入可能不正确，例如“2012 年 3 月 12 日”或“abcdefg”，但我只是将整个功能包装到一个 try-catch 块中。

# metrics - TestLink 1.9.5 和 QueryMetrics

> ID：14752057
> 
> 赞同：2
> 
> 时间：2013-02-07T13:16:29.220
> 
> 标签：metrics, testlink

我在 TestLink 中还有另一个问题。我正在使用这个应用程序的 1.9.5 版本，我的问题如下：在这个版本中，我没有 TestReports 部分之前提供的功能 - QueryMetrics。这是一个非常好的功能，但现在它消失了，我不知道为什么。熟悉testlink的人可以给我答案吗？最后，是否可以在 1.9.5 TestLink（代码中的简单修改）中添加此功能，例如从旧的 testlink 版本？非常感谢您的帮助，因为我无法访问 TestLink 论坛： [http](http://www.teamst.org/forum/) ://www.teamst.org/forum/ 我写信给他们并发送了获取帐户的请求，但没有得到答复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:23:02.443

我也在使用 TestLink 并对此感到惊讶，他们的回答是提供这个指标是多么困难。
其实很简单，幸运的是TestLink 使用的是OOP。这意味着它不会衡量您有多少更改 - 您只需要几个简单的步骤：

1.  从 1.9.3 复制相关的 php 文件：比如 resultsMoreBuilds.php 和 resultsMoreBuildsGUI.php 到 lib/results

2.  复制它依赖的所有类：如 lib/functions/results.class.php - 它在 1.9.4-1.9.6 不存在 - 并且可以按原样复制和 testproject.class.php - 在这种情况下，您需要复制它作为附加类，例如重命名为 testproject3.class.php。

3.  编辑附加类本身：真正有一个附加类，即将“class testproject extends tlObjectWithAttachments”更改为“class testproject3 extends tlObjectWithAttachments”

4.  使用这个附加类：在 lib/functions/results.class.php 更新 "include('testproject.class.php');" 用“包括（'testproject3.class.php'）；” 和“$tproject_mgr = new testproject($this->db);” 用“$tproject_mgr = new testproject3($this->db);”

我相信这至少描述了一个想法，希望在这种情况下指标能够正常工作，但没有相关的缺陷字符串 - 这是因为问题跟踪界面已更改。但如果你有一个想法，你也可以在这里使用它。不幸的是，描述可能比预期的要长:)

# azure-table-storage - MongoLab 与 Azure 表存储

> ID：14752061
> 
> 赞同：5
> 
> 时间：2013-02-07T13:16:36.350
> 
> 标签：azure-table-storage, mlab

以一个 100gb 的数据库为例：

Azure 存储成本：6.05 英镑/平方米 AWS 上的 MongoLab 1 个节点成本：153.18 英镑/平方米

我错过了什么吗？计算错误？有人可以在这里为我解决问题吗？我更喜欢使用 MongoLab，因为我真的很喜欢 node/mongoDB。但与表存储一起使用似乎是一种更具成本效益的解决方案。

我知道键/值和文档存储之间的区别，我更喜欢后者。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-07T18:55:30.020

您需要考虑 Azure 表存储 (ATS) 是存储即服务。您无需设置任何服务器来管理存储和相关的 CRUD 操作。这由 Azure 为您处理，因为 ATS 是一个庞大的多租户系统。您只需请求一个帐户，接收一个端点（加上主密钥和辅助密钥），然后离开，每 GB 支付大约 7 美分（每 100K 交易一美分，这相当微不足道）。

使用 MongoDB，您需要部署自己的服务器，无论是在 AWS 还是在 Azure（或本地或其他任何地方），以及配置存储。开箱即用，今天的云提供商没有原生的 MongoDB 即服务产品。您的成本基础现在比 ATS 高得多，并且您负责备份/快照、MongoDB 维护等。即使是简单的 MongoDB 部署也将花费您至少两个虚拟机实例（不建议在生产中使用独立服务器由于定期停机）。最小的 Azure 实例为 0.02 美元/小时或约 14 美元/月 x 2，最低占用空间约为 30 美元/月（这是一个内存不足 1GB 的低端虚拟机；它不会为您提供高性能 MongoDB，但可能非常适合仅用于访问量很少的存在点网站或博客）。

现在，你提到了 MongoLab。他们*确实*拥有 MongoDB 即服务，并构建了多租户托管解决方案，并且他们的服务可在包括 Azure 在内的多个云上使用。他们收取的价格考虑了他们在虚拟机实例、存储和带宽以及服务器维护、备份策略、支持、高可用性、监控等方面的投资。

我不会太关注存储成本是您唯一的决定因素。如果您需要使用 ATS 执行任何类型的复杂查询，例如需要多个索引字段，您将需要构建额外的表来提供这些索引（或者您最终会进行分区扫描或表扫描以查找您想要的内容需要）。MongoDB 有一个非常强大的搜索和聚合引擎。如果您的应用程序需要这个，您可能会在开发人员时间工程和维护额外的表存储复杂性上花费更多的钱，而不是使用 MongoDB 并让您的应用程序“今天”运行。另一方面，如果您的数据非常适合表存储，其中分区 + 行键涵盖了绝大多数搜索情况，并且您可以利用实体​​组事务进行原子更新，

我希望这有帮助...

# jquery - 如何使 tablesorter 使用单个过滤器输入？

> ID：14752067
> 
> 赞同：0
> 
> 时间：2013-02-07T13:16:46.740
> 
> 标签：jquery, tablesorter

我有一个启用 tablesorter 的表，工作正常，但我想使用过滤器小部件。我知道默认行为是为每列添加一个输入字段，但我正在寻找一种方法来代替在表之外有一个“搜索”输入，该输入将过滤所有列。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T00:11:13.677

[Quicksearch](https://github.com/riklomas/quicksearch)是一个独立的插件，可以与 tablesorter 一起使用。

# algorithm - 欧拉计划 413

> ID：14752068
> 
> 赞同：-1
> 
> 时间：2013-02-07T13:16:46.667
> 
> 标签：algorithm, language-agnostic

我正在尝试解决[Project Euler 的第 413 个](http://projecteuler.net/problem=413)问题，并且我认为 euler 试图欺骗我。老实说，这个问题似乎并不复杂，至少如果有人使用蛮力的话。

但是，虽然我的 F 函数在参数为 '10' 时返回正确的 '9'，但当 N=10^3 时它返回**413** ......看在上帝的份上，这是问题的索引。

还有其他人面临同样的问题吗？对于 F(10^3)​​，也许是相同的数字？我不寻求数值解。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T06:15:42.417

是时候使用蛮力解决问题了（或者为什么你的方法不起作用）：

每个数字使用 10 次操作需要 10^19 * 10 = 10^20 次操作。

如果您有 3Ghz proc 和 10 个内核，并且每个内核可以执行一项操作，则您需要

10^20/(3*10^9 * 10) 秒求解。

也就是大约 100 年。

我可以确认测试用例正确

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:44:31.800

当我的 isOneChild(n) 函数递归删除数字并在每个级别检查时，我得到了 413。我得到了正确的答案，389。当我将它更改为索引到每个子字符串时。

当有前导 0 时，您的解决方案不会正确分支。例如，“00”应该分支到“0”和“0”，产生计数 2，但您的解决方案只转到“0”，产生计数 1。同样，“01”只分支到“1” ，错误地产生计数 0。

最小修复：除了值之外还跟踪一个字符串。

# wix - WiX 删除文件扩展名

> ID：14752076
> 
> 赞同：0
> 
> 时间：2013-02-07T13:17:28.867
> 
> 标签：wix, wix3

我向我的 WiX 项目添加了一个项目引用，一切似乎都在工作，直到我去检查已安装的文件。

他们不再有他们的扩展！因此无法使用为该扩展注册的任何应用程序自动打开。

以下是相关代码：

```
<Directory Id="TARGETDIR" Name="SourceDir">
    <Directory Id="ProgramFilesFolder">
        <Directory Id="INSTALLDIR" Name="My WiX Test">
            <Component Id="ExeCom" Guid="PUT-GUID-HERE" Directory="INSTALLDIR">
                <File Id="ExeFile" Name="ExeFile" Source="$(var.MyForm.TargetPath)" KeyPath="yes"/>
            </Component>
            <Component Id="TxtCom" Guid="PUT-GUID-HERE" Directory="INSTALLDIR">
                <File Id="TxtFile" Name="TxtFile" Source="sometextfile.txt" KeyPath="yes"/>
            </Component>
        </Directory>
    </Directory>
</Directory>

<Feature Id="Complete" Title="Complete" Level="1">
    <ComponentRef Id="ExeCom"/>
    <ComponentRef Id="TxtCom"/>
</Feature> 
```

安装后，我进入安装文件夹（Program Files\My WiX Test）并希望单击 exe 文件来启动应用程序。但是文件夹中的所有文件都没有扩展名。我必须手动重命名文件以添加 .exe 或 .txt，或者通过打开方式对话框。

有没有办法强制 WiX 添加扩展，或者我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:31:12.223

正如评论中已经说明的那样，最简单的（对于我们项目中的许多 .wxs 文件来查找我们使用自动检测的小地方）是在`name=`属性中指定扩展名。

经过一番努力，我们采用了我们甚至将 id 命名为扩展名的方式，这样就不必从构建中查找哪个 ID 属于哪个名称和哪个文件。

例子：

```
<Component Id="ImplantCopyRight">
<File Id="Copyright.txt" Name="Copyright.txt" 
Source="$(var.SourceRoot)/08-Impl/img/license/Implants/Copyright.txt" /> 
```

# ruby - win32oleruntimeError：（在 ole 方法“文本”中：）

> ID：14752082
> 
> 赞同：0
> 
> 时间：2013-02-07T13:17:46.440
> 
> 标签：ruby, excel, ui-automation

当我尝试访问 text 属性时发生错误：

```
#Here is where my error occurs
$password=wrksheet.cells(rows,"B") ['text'] 
```

上下文中的完整示例：

```
#require "C:\Ruby193\lib\ruby\gems\1.9.1\gems\rack-1.4.0\lib\rack\logger.rb"
require "watir"
require "watir-webdriver"
require "test/unit"
require "win32ole"

class TC_Login < Test::Unit::TestCase

    browser = Watir::Browser.new :ff
    browser.goto "gaana.com"
    #browser.driver.manage.timeouts.implicit_wait = 10
    browser.a(:class,"closeBtn").wait_until_present
    browser.a(:class,"closeBtn").click

    def test_login

        #Define the excel file
        excel= WIN32OLE::new("excel.Application")
        wrkbook=excel.Workbooks.Open("C:\\data\\test.xls")
        wrksheet = wrkbook.worksheets(1)
        wrksheet.select     

        #read the data from excel file
        rows = 2
            while    rows <= 9
                    #Here is where my error occurs
                    $password=wrksheet.cells(rows,"B") ['text']
                    puts $field
                    $username=wrksheet.cells(rows,"A") ['text']
                    $fullname=wrksheet.cells(rows,"C") ['text']

                    browser.a(:id,"joinus").click
                    browser.text_field(:id,"fullname").set($fullname)
                    browser.text_field(:id,"email").set($username)
                    browser.text_field(:id,"Password").set($password)
                    browser.a(:id, "save" ).click

                    rows=rows+1
            end
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:40:07.693

要获取 excel 单元格的文本，方法是`value`or `text`（两者似乎都有效，尽管我没有检查是否存在任何技术差异）。

如果您将该行（以及其他类似的行）更改为：

```
$password = wrksheet.cells(rows,"B").text 
```

或者

```
$password = wrksheet.cells(rows,"B").value 
```

# windows-installer - 如何在每次构建之间允许 MSI 升级？

> ID：14752083
> 
> 赞同：1
> 
> 时间：2013-02-07T13:17:46.677
> 
> 标签：windows-installer

我目前正在使用 Wise Studio 7 维护安装程序（在更改为 IS 2012 Spring 的过程中）我想要完成的是让 QA 能够在每个构建之间升级 MSI 包。不过，该公司不想更改每个版本的产品代码或版本号。我认为这可能与 PackageCode 有关，但它似乎不起作用。我收到一条消息，说产品当前已安装。也许 Wise Studio 的 dll 也妨碍了我。我不太了解它的作用。我已尝试更改其顺序和条件，使其不运行但不影响输出。

目前，我设置了升级表以防止降级。我还授权允许升级。如果我保持包代码相同，安装会在维护模式下运行，并且 QA 会使用维护对话框卸载之前的安装。但这不是真正的升级。我认为更改包代码应该允许小的更新。但显然我的理解是不正确的。也许这仅适用于补丁文件。

有什么方法可以实现我们想要的。我们真的不想增加版本号。该公司希望安装程序版本反映应用程序的发布号，而不是构建版本。当然，我们不想在构建之间将产品代码 GUID 设置为不同的值。

感谢您的任何见解。

编辑：我应该提到我们有一个持续的构建系统。

问候，丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T14:08:20.197

始终测试您的服务策略。

如果您计划向客户提供重大升级，那么这就是您应该测试的。

如果您计划进行较小的升级，那么这就是您应该测试的。

我建议“公司”（臭名昭著的“他们”）不应该关心产品代码。他们可以关注 ProductVersion 的主要和次要部分，但他们不应该关注构建部分。这两件事应该保留给 CM / Install Engineering，否则它们会限制你失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:33:39.653

您已经排除了 MSI 本身所有可能的解决方案。

*   仅更改包代码会使您处于小更新的领域。这将限制您可以进行的更改，并且很难推断当构建无序安装时会发生什么（由您的 QA 人员；通常您不会向世界发布多个这些构建）。
*   更改产品版本也会使您进入小升级领域。这更容易推理（并定义一个顺序），但同样具有限制性。但是，您必须更改前三个版本部分之一，而您已经拒绝了。
*   每次构建更改产品代码都会为您带来重大升级，这很容易推理，消除了大多数限制，并且应该自动删除以前的限制。这通常是我在这里的建议，除非您需要支持的方案是从先前发布的版本进行小升级。

所以要回答的问题是：你真的需要拒绝所有基于 MSI 的解决方案吗？如果需要，你能提供一些其他的方法吗？例如，您是否可以要求 QA 在启动新版本之前运行脚本或批处理文件来删除旧版本？您能否要求 QA 将他们的虚拟机恢复到没有先前构建的状态？

# c# - 自定义 WPF/XAML 画布

> ID：14752084
> 
> 赞同：3
> 
> 时间：2013-02-07T13:17:47.033
> 
> 标签：c#, wpf, xaml, controls

我正在尝试创建和使用自定义画布。这是 XAML (MyCanvas.xaml)：

```
<Canvas xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:Core="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:Namespace="clr-namespace:MyNamepace" xmlns:Properties="clr-namespace:MyNamepace.Properties" Core:Class="MyNamepace.MyCanvas">
    <Canvas.Resources>
        <Namespace:ImagesConverter Core:Key="ImagesConverter"/>
    </Canvas.Resources>
    <Image Source="{Binding Source={Core:Static Properties:Resources.Background}, Converter={StaticResource ImagesConverter}}" Stretch="Fill"/>
</Canvas> 
```

这是代码声明 (MyCanvas.xaml.cs)：

```
public partial class MyCanvas : Canvas 
```

当我尝试像这样使用它时：

```
<Namespace:MyCanvas Core:Name="Layout" Loaded="OnLoaded">
    <Namespace:MyUserControl Core:Name="Control1" Namespace:MyCanvas.Left="50" MyProperty="50">
        <Namespace:MyCanvas.Top>
            <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="(x - y) / 2">
                <Binding ElementName="Layout" Path="ActualHeight"/>
                <Binding Path="ActualHeight" RelativeSource="{RelativeSource Self}"/>
            </MultiBinding>
        </Namespace:MyCanvas.Top>
    </Namespace:MyUserControl>
    <Namespace:MyUserControl Core:Name="Control2" Namespace:MyCanvas.Left="744" Namespace:MyCanvas.Top="42" MyProperty="150"/>
</Namespace:MyCanvas> 
```

我得到两个不同的错误：

> “内容”属性只能设置一次。==> 不是继承Canvas吗？！？！？！
> 
> 成员“Top”无法识别或无法访问。==> 不是又继承了Canvas吗？！？！？！成员“Left”无法识别或无法访问。==> 不是又继承了Canvas吗？！？！？！

**编辑：这是我到目前为止......仍然得到“内容”已经设置错误！**

MyCanvas.xaml

```
<Canvas xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:Core="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:Namespace="clr-namespace:MyNamespace" xmlns:Properties="clr-namespace:MyNamespace.Properties" Core:Class="MyNamespace.MyCanvas">
    <Canvas.Background>
        <ImageBrush ImageSource="{Binding Source={Core:Static Properties:Resources.Background}, Converter={StaticResource ImagesConverter}}" Stretch="Fill"/>
    </Canvas.Background>
    <Canvas.Resources>
        <Namespace:ImagesConverter Core:Key="ImagesConverter"/>
    </Canvas.Resources>
</Canvas> 
```

MyCanvas.xaml.cs

```
public class MyCanvas : Canvas
{
    // ...
} 
```

主窗口.xaml

```
<Namespace:MyCanvas Core:Name="MyCanvas" Loaded="OnLoaded">
    <Namespace:MyUserControl ...
    <Namespace:MyUserControl ...
    <Namespace:MyUserControl ...
</Namespace:MyCanvas> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T13:23:52.827

`Left`并且`Top`是[附加属性](http://msdn.microsoft.com/en-us/library/ms749011.aspx)。这意味着它们不会被您的类继承。

您需要更改用户控件声明以使用`Canvas.Left`，`Canvas.Top`而不是：

```
<Namespace:MyUserControl Core:Name="Control2" Canvas.Left="744" Canvas.Top="42" 
                         MyProperty="150"/> 
```

内容的问题是您设置了两次，就像错误消息所说的那样。

1.  在`MyCanvas.xaml`您将其设置为`Image`.
2.  使用它时，您将其设置为您的用户控件。

要修复它，您需要添加一个`ItemsControl`to`MyCanvas`并将其声明为表示内容的控件：

```
<Canvas xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:Core="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:Namespace="clr-namespace:MyNamepace" xmlns:Properties="clr-namespace:MyNamepace.Properties" Core:Class="MyNamepace.MyCanvas">
    <Canvas.Resources>
        <Namespace:ImagesConverter Core:Key="ImagesConverter"/>
    </Canvas.Resources>
    <Image Source="{Binding Source={Core:Static Properties:Resources.Background}, Converter={StaticResource ImagesConverter}}" Stretch="Fill"/>
    <ItemsControl Content="{Binding Path=LocalContent, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Namespace:MyCanvas}}}" />
</Canvas> 
```

在你的类文件中：

```
[ContentProperty("LocalContent")]
public partial class MyCanvas : Canvas
{
    public static readonly DependencyProperty LocalContentProperty =
        DependencyProperty.Register(
            "LocalContent", 
            typeof(UIElementCollection), 
            typeof(MyCanvas ), 
            new PropertyMetadata(default(UIElementCollection)));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T13:36:53.990

添加到丹尼尔的回答中，您必须了解 WPF 引入了一个名为“依赖属性”和“依赖对象”的概念。简而言之，就像 C# 中的对象可以具有属性一样，WPF 中的依赖对象也可以具有依赖属性。尽管 c# 方法的工作方式有点不同。

对于依赖属性（例如附加属性），WPF 管理一个单独的表，其中包含指示哪些对象具有哪些属性的记录。换句话说，这意味着任何对象都可能具有任何属性，WPF 只是将一条记录添加到表中，为所述对象提供所述属性。例如，Canvas.Left 虽然由 Canvas*定义*，但可以由任何控件实现。WPF 只是将一条记录插入到依赖关系表中，瞧现在您的图像具有 Canvas.Left / Canvas.Top 属性。这意味着更小的内存占用，因为对象*选择*拥有一个属性（当添加记录时），而不是仅仅因为它派生自某个类而拥有一个属性。

以编程方式工作的方式是您使用 DependencyObject.SetValue / GetValue （所有 WPF 对象都派生自 DependencyObject 请参阅： http: [//miteshsureja.blogspot.com/2011/06/wpf-class-hierarchy.html](http://miteshsureja.blogspot.com/2011/06/wpf-class-hierarchy.html) - 事实上，记住这一点图表，因为它将帮助您更好地了解 WPF 在后台是如何工作的），这会将记录添加/读取到上述表中。当您定义依赖项属性时，您的 c# 访问器应该真正重定向到这些方法，因为 WPF（而不是对象本身）应该管理这些值（这就是 WPF 能够进行数据绑定的方式，而不是什么，因为它管理这些值并根据需要将它们转移到其他对象）。有关创建依赖属性的示例，请参阅：http: [//msdn.microsoft.com/en-us/library/ms752914.aspx](http://msdn.microsoft.com/en-us/library/ms752914.aspx). 依赖属性背后的概念非常简单，但您至少必须了解它才能理解很多 WPF 功能。

# javascript - 下载图像供以后使用（指导）

> ID：14752088
> 
> 赞同：0
> 
> 时间：2013-02-07T13:17:58.000
> 
> 标签：javascript, html, css, hover

我正在寻找的是一种允许我在用户的浏览器中下载图像以供以后使用的方法。图像将在鼠标悬停（悬停）事件时激活。问题是我不想只在用户悬停时下载图像，因为它会产生不好的效果。它必须在网站加载时下载。

有什么建议么 ？

[编辑] 谢谢你的建议！我不敢相信我忽略了明显的解决方案并寻找复杂的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:21:11.897

执行这种图像“预加载”的常用方法是使用 JavaScript`Image`对象。

```
var i = new Image;
i.onload = function() {
  console.log("Image: " + this.src + " loaded");
}
i.src = 'uri/to/file'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T13:21:11.767

使用类似的东西：

```
<img src="myImage.jpg" class="hidden" /> 
```

并将显示设置`none`为 CSS 中的类`.hidden`。然后它将被下载并且不会显示。

然后，当您开始使用该图像时，它已经在客户端上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T13:22:12.453

您正在寻找的是所谓的预加载器。您有两个选择，可以按 CSS（[教程](http://www.devirtuoso.com/2009/07/creating-a-css-image-preloader/)）或按 JavaScript（[教程](http://www.webreference.com/programming/javascript/gr/column3/index.html)）进行。这些解决方案之一应该为您提供您正在寻找的结果。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T13:22:56.507

检查这个解决方案： [“3 Ways to Preload Images with CSS, JavaScript, or Ajax”](http://perishablepress.com/3-ways-preload-images-css-javascript-ajax/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-07T13:25:34.423

[在网页中](http://www.pageresource.com/jscript/jpreload.htm)检查此 预加载图像

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-07T13:26:10.713

只需将所有图像放在隐藏的 div 中。图像将自动加载并缓存在浏览器中。因此，当您再次在 mouseove 上加载图像时，不会产生“不良效果”

```
 <div style="display:none;">
          <img src="url"  />
    </div> 
```

# android - AppWidgetProvider 类中的调用片段

> ID：14752090
> 
> 赞同：3
> 
> 时间：2013-02-07T13:18:03.193
> 
> 标签：android, fragment

我在 android 中创建小部件。我们通过 AppWidgetProvider 类中的意图调用活动。但是在 AppWidgetProvider 类中调用 Fragments 的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:31:23.550

> But what is the way for calling Fragments inside AppWidgetProvider class?

Fragments are for use by activities, not app widgets.

# c# - 在运行数据库的版本控制脚本时管理对象的依赖关系

> ID：14752094
> 
> 赞同：1
> 
> 时间：2013-02-07T13:18:11.120
> 
> 标签：c#, sql, sql-server, database, database-versioning

我们将我们的数据库置于版本控制之下。我们有大约 2400 个对象，其中大部分是存储过程。

因此，如果不存在，我们已经为除表之外的所有对象创建脚本。

我们在存储增量脚本的单独文件夹中维护表脚本。只有增量脚本被编号。其他与程序、视图和功能相关的脚本将直接运行。

因此，当开发人员在 svn 中提交更改时，我们希望在暂存版本上运行它们。问题是对象的依赖性。

如果开发人员在一次提交中提交了多个脚本，这些脚本可能相互依赖，或者如果我们想合并多个修订版然后组合运行脚本，那么我们无法确定运行脚本的正确顺序。

任何人都可以提出一些管理依赖项并帮助我们确保脚本首次运行的好方法。

我们不能在这么多的生产服务器中使用 redgate 工具，所以除了使用 sql compare 或 sql sourcecontrol，我将不胜感激。

我们总是首先运行 table delta 脚本，因为它们不依赖于其他对象（开发人员也会在脚本中管理它），然后是其他对象

我们已经为运行其他对象的顺序提供了一些解决方法，例如

1）我们可以将对象的依赖关系存储在另一个具有相同名称但扩展名不同的文件中，这样如果依赖关系发生变化，则开发人员应该使用脚本提交它。然后我们可以制作一棵树，根据它我们可以运行脚本。

2）我们可以先创建一个树然后在svn中提交它，如果依赖关系发生变化，然后我们可以在登台机器上测试脚本并发生错误后将它添加到树中。（这需要在第一次失败后提交svn并要求自动化过程第一次失败）

3）我们可以一次又一次地运行脚本，而无需使用事务的最大次数和对象的数量一样。假设最坏的情况，这将导致最终正确运行所有脚本。

如果您有其他想法或可以改进其中一些想法，请贡献。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:12:14.127

你看过 SQL Server 管理对象吗？

它支持通过[DependencyWalker](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.dependencywalker.aspx)类识别关系，因此可能正是您所追求的。

您是否要相信 SQL Server 维护的依赖链是准确的完全是另一回事......如果不是，那么您最好的选择可能是放弃自动化并让您的开发人员负责提交适当的升级脚本，即然后，您将按照提交给 SVN 的顺序重播。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:14:13.707

你看过这个吗？

[http://www.red-gate.com/products/sql.../sql-source-control/](http://www.red-gate.com/products/sql.../sql-source-control/)

这是一套相当不错的工具，可以用最少的努力来捕捉你的差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T14:38:05.800

如果您不能使用*任何*其他类型的自动化，您可以使用[tsort](http://en.wikipedia.org/wiki/Tsort_%28Unix%29)。tsort 实用程序是一个实现拓扑排序的 Unix 程序。（它可能适用于大多数操作系统。）它根据显示部分排序的输入输出完整的、总排序的字符串。

# windows - 复制具有权限但不覆盖内容的 windows 文件夹

> ID：14752096
> 
> 赞同：1
> 
> 时间：2013-02-07T13:18:18.093
> 
> 标签：windows, batch-file, permissions, directory

我想复制具有权限但不复制其内容的文件夹。举个例子：

```
C:\pictures and it has cat photos in it 
```

我只想复制以下权限

```
D:\pictures (has other pictures) 
```

我想把它复制到

```
E:\pictures (this folder is not existing) 
```

我用`robocopy`和 试过了`icacls`。但我无法使用 icacls 恢复数据：

```
icacls C:\pictures /save ntfspermissions.txt /c
icacls D:\pictures /restore C:\ntfspermissions.txt 
```

它只是说：`1 error`。

在 robocopy 中，我使用参数“ `/COPY:SAO`”进行了尝试。但它也不起作用。它仅适用于“ `/MIR`”，但如果我这样做，我也会复制内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:29:12.353

使用 get-acl 和 set-acl ：

```
$acl=get-acl -path C:\pictures
set-acl -path d:\pictures -AclObject $acl
New-Item -ItemType directory -Name pictures -Path e:\
set-acl -path e:\pictures -AclObject $acl 
```

Don Jones 的更详细回答：[http ://technet.microsoft.com/en-us/magazine/2008.02.powershell.aspx](http://technet.microsoft.com/en-us/magazine/2008.02.powershell.aspx)

# java - 如何从内部 AsyncTask 类的 onPostExecute 方法修改外部字段？

> ID：14752109
> 
> 赞同：0
> 
> 时间：2013-02-07T13:19:11.477
> 
> 标签：java, android, android-asynctask

在以下代码段中：

```
public class ExternalClass {
    private int num = 1;

    public void backgroundTask() {
        new HttpTask().execute();
    }

    public int getNum() {
        return num;
    }

    private class HttpTask extends AsyncTask<String, Void, String> {

        @Override
        protected String doInBackground(String... params) {
            //Do stuff...
        }

        @Override
        protected void onPostExecute(String result) {
            //Do stuff...
            ExternalClass.this.num = 2;
    }
} 
```

在活动中：

```
...
ExternalClass ec = new ExternalClass();
ec.backgroundTask();
int myNum = ec.getNum(); //NUM IS 1, NOT 2!! 
```

我究竟做错了什么？一切正常，我的 doInBackground() 和 onPostExecute() 成功完成，但字段“num”没有改变。我试过“num = 2”甚至“this.num = 2”（我知道不正确，但是......）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:26:25.770

执行完成 后，您将需要使用[AsyncTask.get()](http://developer.android.com/reference/android/os/AsyncTask.html#get%28%29)方法从 AsyncTask 将结果返回到主 UI 线程 `doInBackground()`

```
public void backgroundTask() {
        new HttpTask().execute().get();
    } 
```

**注意：**当您在主 UI 线程中调用 AsyncTask 的 get() 方法时，这将停止主线程的执行。您将需要`backgroundTask()`从后台线程调用方法

# java - Java - 递归排列？

> ID：14752112
> 
> 赞同：2
> 
> 时间：2013-02-07T13:19:18.623
> 
> 标签：java, permutation

嗨伙计们，我有这样的事情：

```
 String keyBase = "keyA";
  String[] valueBase = {"a1","a2","a3"};

  String keyLevel1 = "keyB";
  String[] valueLevel1 = {"b1","b2","b3"};

  String keyLevel2 = "keyC";
  String[] valueLevel2 = {"c1","c2","c3"}; 
```

并且需要这样的东西：

```
String[][] f1 = {{"keyA","a1"},{"keyB","b1"}{"keyC","c1"}}
String[][] f2 = {{"keyA","a1"},{"keyB","b1"}{"keyC","c2"}}
String[][] f2 = {{"keyA","a1"},{"keyB","b1"}{"keyC","c3"}}

String[][] f5 = {{"keyA","a1"},{"keyB","b2"}{"keyC","c1"}}
String[][] f6 = {{"keyA","a1"},{"keyB","b2"}{"keyC","c2"}}
... 
```

有什么简单但很好的方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:31:12.690

我不知道递归排列。
我只是根据您的输出进行了尝试。

```
for(int i = 0 ; i <3 ; i++) {
   for(int j = 0 ; j <3 ; j++) {
      for(int k = 0 ; k <3 ; k++) {
         system.out.println(keyBase +","+ valueBase[i] +","+
                            keyLevel1  +","+ valueLevel1[j]  +","+
                            keyLevel2  +","+ valueLevel2[k] )
      }
   }
 } 
```

# c++ - 如何在 CListCtrl 中拆分单个单元格

> ID：14752113
> 
> 赞同：0
> 
> 时间：2013-02-07T13:19:21.917
> 
> 标签：c++, mfc, split, nested, clistctrl

我目前正在开发 C++/MFC 应用程序，并且我有各种列表控件（例如 CListCtrlStyled 对象：

我需要**一种将单个行拆分为多列的方法**，*而无需*更改同一行中的单元格。

[在这里](http://i1141.photobucket.com/albums/n589/IT00/NesteCListCtrl.jpg)你可以看到我想要达到的结果。

起初，我想在另一个列表中插入一个列表，但这种方式似乎不可行......还有其他方法可以获得类似的效果吗？欢迎提供外部文档和/或示例代码的链接。

谢谢

它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:35:39.300

您可以使用

LPNMHEADER phdr = reinterpret_cast(pNMHDR); NMLISTVIEW *pLV = (NMLISTVIEW *) pNMHDR;

pLV->iItem; pLV->iSubItem；

# mapping - Restkit 嵌套数组映射错误

> ID：14752117
> 
> 赞同：1
> 
> 时间：2013-02-07T13:19:36.737
> 
> 标签：mapping, restkit, relationships, multidimensional-array

我正在尝试映射以下结构：

**计划.json：**

```
{
  "id" : "1",
  "floors" : [
    {
      "floor" : "1",
      "constrains" : 
      {
        "southWest":
        {
          "latitude": 50.076534 ,
          "longitude": 14.417152
        },
        "northEast":
        {
          "latitude": 50.077194,
          "longitude": 14.418526
        }
      }

    }
  ]
} 
```

对于这个结构：

```
@interface Plan : NSManagedObject

@property (nonatomic, retain) NSNumber * id;
@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) Building *building;
@property (nonatomic, retain) NSSet *floors;
@end

@interface Floor : NSManagedObject
@property (nonatomic, retain) NSNumber * floorId;
@property (nonatomic, retain) NSNumber * planId;
@property (nonatomic, retain) NSNumber * southWestLatitude;
@property (nonatomic, retain) NSNumber * southWestLongitude;
@property (nonatomic, retain) NSNumber * northEastLatitude;
@property (nonatomic, retain) NSNumber * northEastLongitude;
@property (nonatomic, retain) Plan *plan;
@end 
```

映射：

```
RKEntityMapping *floorMapping = [RKEntityMapping mappingForEntityForName:@"Floor" inManagedObjectStore:managedObjectStore];

floorMapping.identificationAttributes = @[ @"floorId" ];
[floorMapping addAttributeMappingsFromDictionary:@{
 @"floor": @"floorId",
 @"constraints.southWest.latitude": @"southWestLatitude",
 @"constraints.southWest.longitude": @"southWestLongitude",
 @"constraints.northEast.latitude": @"northEastLatitude",
 @"constraints.northEast.longitude": @"northEastLongitude"
 }];

RKEntityMapping *planMapping = [RKEntityMapping mappingForEntityForName:@"Plan" inManagedObjectStore:managedObjectStore];

planMapping.identificationAttributes = @[ @"id" ];
[planMapping addAttributeMappingsFromDictionary:@{
 @"id": @"id"}];

[planMapping addPropertyMapping:[RKRelationshipMapping relationshipMappingFromKeyPath:@"floors" toKeyPath:@"floors" withMapping:floorMapping]]; 
```

我认为我做的一切都是正确的，它实际上来自 TwitterCoreData 示例。但我还是得到了这样的回应：For plan

```
<Plan: 0x7385ca0> (entity: Plan; id: 0x736fdf0 <x-coredata://C74D92C0-FF0D-49F4-807B-F8B431733B8A/Plan/p1> ; data: {
    floors = "<relationship fault: 0x7386ac0 'floors'>";
    id = 1;
}) 
```

而对于地板

```
2013-02-07 14:39:55.184 CVUT Navigator[18061:c07] (
    "<Floor: 0x9353130> (entity: Floor; id: 0x933d670 <x-coredata://C74D92C0-FF0D-49F4-807B-F8B431733B8A/Floor/p1> ; data: <fault>)"
) 
```

没有抛出错误，只是错误的数据。你知道该怎么做吗？

谢谢托马斯

# ios - NSURLConnection 在下载大量数据时导致内存警告

> ID：14752121
> 
> 赞同：0
> 
> 时间：2013-02-07T13:19:50.463
> 
> 标签：ios, memory, download, warnings, nsurlconnection

我在 iOS（5.1、6.0、6.1）上遇到了一个令人不安的 NSURLConnection 问题。
当我尝试通过 http 请求下载大部分数据时，我的应用程序不会将发布的数据标记为真正发布（我稍后会解释）。

我的下载代码如下所示：

```
NSURL *url = [NSURL URLWithString:@"http://my.server/file.zip"];  
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];  
NSURLConnection *urlConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:NO];  
[urlConnection start]; 
```

委托是我的视图控制器。
此代码在主运行循环上调用（没有调度队列或执行类似的选择器）。
代表对收到的数据不做任何事情 - 不保留，不复制 - 什么都不做。

问题是，当我使用新创建的项目调用此代码时 - 它表现良好 - 下载所有数据并完成没有任何问题。

但是当在我的其他应用程序中调用代码时，突然所有下载的数据都会在应用程序中留下内存占用，一段时间后内存耗尽，应用程序收到内存警告并崩溃。

您可能会说 - 您的代表保留数据而不发布它。好吧，我试图用 Instruments 找到解决方案。你猜怎么着——我的应用程序在分配时显示它在下载资源时保留了大约 10 mb 的内存！Allocations 或 VM Tracker 上均未显示任何内容。

那么我怎么知道应用程序保留了下载数据的内存占用？

这是向我展示我的记忆报告的代码（在本网站的一些答案中找到它 - 但现在找不到它：

```
 -(void) report_memory {  
       struct task_basic_info info;  
       mach_msg_type_number_t size = sizeof(info);  
       kern_return_t kerr = task_info(mach_task_self(),
                                      TASK_BASIC_INFO,
                                      (task_info_t)&info,
                                      &size);  
       if( kerr == KERN_SUCCESS ) {  
          STLog(ST_DEBUG, @"Memory in use (in bytes): %u b ( %u mb )", info.resident_size, info.resident_size / (1024 * 1024) );  
       } else {  
          STLog(ST_DEBUG, @"Error with task_info(): %s", mach_error_string(kerr));  
       }  
   } 
```

我的问题是 - 这里发生了什么？
为什么应用程序会显示一些内存占用？
为什么工具显示没有过度分配？
NSURLConnection 过度分配的原因是什么？

PS。我还尝试更改磁盘、内存中的共享缓存大小，使用其他缓存策略 - 没有任何帮助:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T07:57:33.043

事实证明，当使用僵尸对象时， NSURLConnection 会保留已释放的对象。这可以防止它们完全释放 - 因此会占用内存。

解决方案是在通过 NSURLConnection 下载大量数据时不要使用僵尸对象。

# javascript - Jquery UI 可选 - 更改触发选定/未选定事件的 dom 对象

> ID：14752122
> 
> 赞同：1
> 
> 时间：2013-02-07T13:19:59.847
> 
> 标签：javascript, jquery, jquery-ui

我有一大堆可选择的对象。

您可以单击它们，然后将它们的 id 添加到表单中，当它们被取消选择时，它会再次从表单中删除。

我有一个工作版本，直到我注意到有时如果你点击太快，id 会被添加多次。

为了禁止这一点，我在列表项中添加了一个类，以便将其归类为处理。

**我的问题：**

我如何获得指向单击以添加类的 DOM 元素的指针

什么适用于所有“选定”但会导致其他问题：

```
$( ".ui-selected", this ).each(function() {
 if($(this).hasClass('processing'))
 return;
 $(this).addClass('processing');
 }); 
```

我现在所拥有的 - 只让元素触发事件......是错误的：

```
 $(".selectgroup").bind("mousedown", function(e) {
    e.metaKey = true;

   }).selectable( {filter: "li"},
        {
            stop: function(){
                // Add to Form
                $( ".ui-selected", this ).each(function() {
                if($(this).hasClass('processing'))
                return;
                $(this).addClass('processing');

                var itemid = $(this).attr("value");
                var formhtml ='<input type="hidden" name="tags[]" id="id'+itemid+'" value="'+itemid+'">';
                $("#tagform").append(formhtml);
                });
         },
        {
             unselected: function( event, ui ) {

                itemid = "#id" + ui.unselected.value;
                $('').removeClass('processing');
                alert(itemid);
                $(itemid).remove();
             }
        }................................. 
```

对于适合 jquery 的人来说，这一定很容易解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:34:07.160

我解决了我自己的问题。

当你现在它时，这很容易。

查看并节省一些时间：

```
 {
            selected: function(event,ui){
                // Add to Form
                var item = $(ui.selected);

                if(item.hasClass('processing')){
                  alert("return");  
                  return;
                }
                item.addClass('processing');

                var itemid = item.attr("value");
                alert("S ID - " + itemid);
                var formhtml ='<input type="hidden" name="tags[]" id="id'+itemid+'" value="'+itemid+'">';
                $("#tagform").append(formhtml);

            }
        },
        {
             unselected: function( event, ui ) {

                itemid = "#id" + ui.unselected.value;
                $(ui.unselected).removeClass('processing');
                alert(itemid);
                $(itemid).remove();
             } 
```

# javascript - IE8 中的 Javascript 错误“未实现”

> ID：14752123
> 
> 赞同：0
> 
> 时间：2013-02-07T13:20:05.407
> 
> 标签：javascript

在 IE8 F12 工具中出现此错误

我正在尝试编写不显眼的验证代码，其中我将在正文 onload 上调用 validate() 方法，它将根据其类名在元素的特定事件上附加验证代码。（例如，对于具有“必需”类的文本框，它将在其 onblur 上附加 required()）

![在此处输入图像描述](../Images/ef126e0d865afa3d8bcf5a71e72eacef.png)

这个错误的原因是什么？

**编辑**

问题不在 getElementsByClassName() 方法中，因为它返回的元素数组具有所需的类，正如您在 IE8 手表中看到的那样

![在此处输入图像描述](../Images/d9667b9e35344f3f59d42b6b20b87fb0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:28:03.410

试试这个解决方案 - 我对其进行了测试，它适用于您的代码段（您必须采用他在“更新：”段落中编写的代码）：

[javascript document.getElementsByClassName 与 IE 的兼容性](https://stackoverflow.com/questions/7410949/javascript-document-getelementsbyclassname-compatibility-with-ie)

看起来`getElementsByClassName`在 IE8 中不支持。

顺便说一句：这是一个完美的例子，为什么你应该使用 jQuery - 因为你不会有这样的问题:)

编辑：我这样测试它：

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript">

            function getElementsByClassName(node, classname) {
                var a = [];
                var re = new RegExp('(^| )'+classname+'( |$)');
                var els = node.getElementsByTagName("*");
                for(var i=0,j=els.length; i<j; i++)
                    if(re.test(els[i].className))a.push(els[i]);
                return a;
            }

            window.onload = function() {
                var a = getElementsByClassName(document.body,"required");

                for(var i = 0;i < a.length;i++)
                    a[i].onblur = function() { alert("blured")};
            };
        </script>
    </head>
    <body>
       <input class="required" type="text" name="uno" />
       <input class="required" type="text" name="duno" />
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:33:48.280

`getElementsByClassName`IE8 不支持。

你可以试试[`document.querySelectorAll`](https://developer.mozilla.org/en-US/docs/DOM/document.querySelectorAll)或[`document.querySelector`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector)。它更灵活，使用起来非常舒适。

在您的情况下，它将是：

```
var a = document.querySelectorAll(".required"); 
```

您可以使用基本的 css 选择器来获取 DOM 元素，就像`querySelector("#ID .class")`在 jQuery 中一样。

# javascript - Javascript倒计时问题

> ID：14752124
> 
> 赞同：0
> 
> 时间：2013-02-07T13:20:09.950
> 
> 标签：javascript, html

我设计了 2 页

由于某种未知原因，第二个没有刷新倒计时脚本，它只加载一次。

我尝试将 javascript 放在代码的不同位置，甚至从外部文件调用它，但这只会完全破坏倒计时脚本。

对于任何想使用此倒计时 javascript 的人，请随时这样做。代码如下：

```
<script>

var timeout;

// Uncomment below to use one.
var reset = function() {
    //timeout = weekly(4, 12, 5); // 0=sunday, 6 = saturday
    //timeout = daily(2, 0, 0);
    timeout = new Date('25-Feb-2013');
}

var displayEndText = function() {
    end_day = timeout.getDay();
    end_date = timeout.getDate();
    end_month = timeout.getMonth();
    end_year = timeout.getFullYear();
    end_hour = timeout.getHours();

    var now = new Date();
    todays_midnight = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1);
    tomorrows_midnight = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 2);

    dayText = "eek";
    timeText = "bar";

    a_p = "";
    if (end_hour < 12) {
        a_p = "AM";
    } else {
        a_p = "PM";
        end_hour -= 12;
    }
    end_min = timeout.getMinutes();
    if (end_min < 10) end_min = "0" + end_min;
    if ((end_hour == 0) && (end_min == 0)) {
        if (a_p == "AM") {
            timeText = "Midnight";
            var prevDay = new Date(timeout.getFullYear(), timeout.getMonth(), timeout.getDate() - 1);
            end_day = prevDay.getDay();
            end_date = prevDay.getDate();
        } else {
            timeText = "Midday";
        }
    } else {
        timeText = end_hour + ":" + end_min +" " + a_p;
    }

    if (timeout <= todays_midnight) {
        if ((end_hour == 0) && (end_min == 0)) {
            dayText = "";
        } else {
            dayText = "Today";
        }
    } else if (timeout <= tomorrows_midnight) {
        dayText = "Tomorrow";
    } else {
        d_names = new Array("Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday");
        m_names = new Array("January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December");
        var sup;
        switch (end_date) {
        case 1: 
        case 21:
        case 31: 
            sup = "st"; 
            break;
        case 2:
        case 22: 
            sup = "nd"; 
            break;
        case 3:
        case 23:
            sup = "rd";
            break;
        default:
            sup = "th";
        }
        dayText = d_names[end_day] + " " + end_date + "<SUP>" + sup + "</SUP> "
    }
    //document.getElementById('ed').innerHTML = d_names[end_day] + " " + end_date + "<SUP>" + sup + "</SUP> " + m_names[end_month] + " " + end_year + " at " + end_hour + " : " + end_min + " " + a_p;

    document.getElementById('ed').innerHTML = dayText + " at " + timeText;
}

var display = function () {
    var now = new Date();
    var secondsToGo = Math.ceil((timeout - now) / 1000);
    if (secondsToGo < 0) {
        reset();
        secondsToGo = Math.ceil((timeout - now) / 1000);
        window.location = "http://modeliving.co.uk/index1.php";
    }
    var secs = Math.floor(secondsToGo % 60);
    var minutesToGo = Math.floor(secondsToGo / 60);
    var mins = Math.floor(minutesToGo % 60);
    var hoursToGo = Math.floor(minutesToGo / 60);
    var hours = hoursToGo % 24;
    var daysToGo = Math.floor(hoursToGo / 24);

    if (secs < 10) secs = "0" + secs;
    if (mins < 10) mins = "0" + mins;
    if (hours < 10) hours = "0" + hours;    

    document.getElementById('cdDays').innerHTML = daysToGo;
    document.getElementById('cdHours').innerHTML = hours;
    document.getElementById('cdMins').innerHTML = mins;
    document.getElementById('cdSecs').innerHTML = secs;
    // document.getElementById('cdAll').innerHTML = daysToGo + ' days ' + hours + ' hours ' + mins + ' minutes ' + secs + ' seconds';

    displayEndText();
}

var weekly = function(dow, hour, min) {
    if (typeof(dow)==='undefined') dow = 1; // sunday midnight
    if (typeof(hour)==='undefined') hour = 0;
    if (typeof(min)==='undefined') min = 0;
    //dow = dow % 7;
    var now = new Date();
    var daysToGo = dow - now.getDay();
    if (daysToGo < 0) daysToGo += 7;
    if ((daysToGo == 0) && ((now.getHours()*60 + now.getMinutes()) >= (hour*60 + min))) daysToGo = 7;
    var result = new Date(now.getFullYear(), now.getMonth(), now.getDate()+daysToGo, hour, min, 0, 0);
    return result;
}

var daily = function(every, hour, min) {
    if (typeof(every)==='undefined') every = 2; // every 2 days
    if (typeof(hour)==='undefined') hour = 0;
    if (typeof(min)==='undefined') min = 0;
    var now = new Date();
    var daysToGo = Math.floor(((now - 0) / 1000 / 60 / 60 / 24) % every);
    if ((daysToGo == 0) && ((now.getHours()*60 + now.getMinutes()) >= (hour*60 + min))) daysToGo = every;
    var result = new Date(now.getFullYear(), now.getMonth(), now.getDate()+daysToGo, hour, min, 0, 0);
    return result;
}

reset();
display();
setInterval(display, 1000);

</script> 
```

然后将其添加到 html 中：

```
<div id="cdDays"></div>
<div id="cdHours"></div>
<div id="cdMins"></div>
<div id="cdSecs"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:26:29.047

当我在浏览器中打开第二页并查看 Javascript 控制台时，我发现您在这一行出现错误：

```
document.getElementById('ed').innerHTML = dayText + " at " + timeText; 
```

错误：

> 未捕获的类型错误：无法将属性“innerHTML”设置为 null

这是在从函数调用的`display`函数中，该函数在您的`setTimeout`函数之前调用。所以这个错误正在杀死执行。修复错误，您应该一切就绪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:28:34.547

注释第 178 行，它有效。您正在尝试访问不存在的 id='ed' 元素。

# jquery - jQuery将base64 URL存储为变量时更改它？

> ID：14752127
> 
> 赞同：0
> 
> 时间：2013-02-07T13:20:17.590
> 
> 标签：jquery, base64

出于某种原因，当我通过 jquery 传递 base64 url​​ 时，它正在改变
canvas.toDataURL();的值。

```
window.open(canvas.toDataURL()); 
```

将正确地产生它

```
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAzCAYAAACuR5nYAAAATklEQVRIS2P8DwQMRADGoaDw6dOnxHlmy5YtxClsbm4mTmFgYCBxChUUFIhTCIyUUYU4UybjaPDgy7WjwYO3TBsNntHgwQiB0USBN1EAAJ80SZkuW4e0AAAAAElFTkSuQmCC 
```

然而

```
var url = canvas.toDataURL();
window.open(url); 
```

将其更改为

```
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAzCAYAAACuR5nYAAAALElEQVRIS2NkIBIwEqmOYVQh3pAaDZ7R4MEIgdFEMZooRhMFOARGs8JgzQoA3IkANLlv8A4AAAAASUVORK5CYII= 
```

这显然会破坏 url，为什么 jQuery 会弄乱我的 URL，是他们的解决方法吗？

感谢您的任何帮助。

```
<canvas id="colors" height="50" width="10"></canvas>
<div class="colors">
<input type="text" class="url" value="0" />
    <div class="inputs">
        <input type="text" class="pos" value="0" />
        <input type="text" class="color" value="#ffffff" />
    </div>
    <div class="inputs">
        <input type="text" class="pos" value="1" />
        <input type="text" class="color" value="#000000" />
    </div>
</div>

$('.colors').each(function(){
    $(this).on('colors', function(){
        var canvas = document.getElementById('colors');
        var ctx = canvas.getContext('2d');
        var lingrad = ctx.createLinearGradient(0,0,0,50);

        $('.inputs').each(function(){
             var pos = $(this).find('.pos').val();
             var color = $(this).find('.color').val();
                 lingrad.addColorStop(pos, color);
        });

        ctx.fillStyle = lingrad;
        ctx.fillRect(0,0,10,50);

        var url = canvas.toDataURL();
        $(this).find('.url').val(url);
        alert(url);
    window.open(url);
    });
});

$('input').on('change', function(){
    $(this).trigger('colors');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:25:14.677

尝试这个：

```
var url = canvas.toDataURL("image/png"); 
```

# android - 在Android中将位图写入数组而不是文件流

> ID：14752132
> 
> 赞同：1
> 
> 时间：2013-02-07T13:20:42.707
> 
> 标签：android, arrays, bitmap

目前，当我想将位图保存到磁盘时，我使用：

```
bitmap.compress(Bitmap.CompressFormat.JPEG, 90, out); 
```

是否可以将数据写入字节数组？我需要处理进入磁盘的数据，而不仅仅是位图的图像数据。jpg 包含其他内容，例如元数据。我真的不在乎它是jpg。我对数据是什么不感兴趣，而只是访问通常会写入磁盘的整个数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:22:11.807

您可以使用：

```
public byte[] convertBitmapToByteArray(Bitmap bitmap) {
    ByteArrayOutputStream buffer = new ByteArrayOutputStream(bitmap.getWidth() * bitmap.getHeight());
    bitmap.compress(CompressFormat.PNG, 100, buffer);
    return buffer.toByteArray();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T13:42:27.933

如果你想保留原始像素数据（不压缩），你可以试试这个：

```
public byte[] bitmapToByteArray(Bitmap bitmap) {
    ByteBuffer byteBuffer = ByteBuffer.allocate(bitmap.getByteCount());
    bitmap.copyPixelsToBuffer(byteBuffer);
    return byteBuffer.array();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T13:42:51.683

您可以使用此代码：

```
 ByteArrayOutputStream out = new ByteArrayOutputStream();

                bMap.compress(Bitmap.CompressFormat.PNG, 100, out);
                byte[] imageArray = out.toByteArray(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-07T13:36:13.440

```
U can try this.

if (Utility.isWifiPresent()
                    || Utility.isMobileConnectionPresent()) {
                URL url = new URL(fileUrl);
                InputStream iStream = url.openConnection().getInputStream();// .read(data)
                ByteArrayOutputStream buffer = new ByteArrayOutputStream();
                byte[] tmpArray = new byte[1024];
                int nRead;
                while ((nRead = iStream.read(tmpArray, 0, tmpArray.length)) != -1) {
                    buffer.write(tmpArray, 0, nRead);
                }
                buffer.flush();
                data = buffer.toByteArray();
                FileOutputStream fOut = null;
        //path to store

                    fOut = Utility.getFileOutputStreamForCloud(
                            sdcardFolderPath, fileUrl);
                }
                fOut.write(data);
                fOut.flush();
                fOut.close(); 
```

# c# - 异步等待长函数的并发

> ID：14752141
> 
> 赞同：1
> 
> 时间：2013-02-07T13:21:02.567
> 
> 标签：c#, async-await, c#-5.0

我正在尝试同时处理许多任务，因为它们不需要彼此完成即可进入下一个任务。我使用了同步过程并尝试将其变为异步。但是，在测量性能时，这两种方法都需要完全相同的时间（大约 30 秒），我希望 Async 更快......如果我有 1）得到以下正确 2）了解什么 async 是有益的（我怀疑这是问题）。

```
public class ExpensiveTask {
 private int _seed;
 public ExpensiveTask(int seed){ _seed = seed; }
 public Process() { //TODO various things }
}

public class Controller {
 public static void main(string[] args){ 
    var program = new Controller();
    program.RunAsync(); // Runtime 36.9s
    program.Run(); // Runtime 36.6s
 }

 void Run(){
     Process(1);
     Process(2);
     Process(3);
 }

 async void RunAsync(){
      var taskList = new List<Task>();
      taskList.Add(ProcessAsync(1));
      taskList.Add(ProcessAsync(2));
      taskList.Add(ProcessAsync(3));

      await Task.WhenAll(taskList);
 }

 async Task ProcessAsync(int seed){
      var task = new ExpensiveTask(seed);

      task.Process();
 }

 void Process(int seed){
      var task = new ExpensiveTask(seed);

      task.Process();
 } 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T13:59:06.560

`async`不在线程池上运行您的代码。如果你想在不同的线程上执行你的 CPU-bound 代码，你需要使用`Task.Run`：

```
Task ProcessAsync(int seed){
  var task = new ExpensiveTask(seed);
  return Task.Run(() => task.Process());
} 
```

# meteor - Meteor：是否有一个响应式每个模板范围？

> ID：14752142
> 
> 赞同：16
> 
> 时间：2013-02-07T13:21:05.117
> 
> 标签：meteor, handlebars.js

我在同一页面上的多个（任意多个）位置呈现相同的 Handlebars 模板。在每个模板中，我想要一个按钮来切换 div 的可见性。当我用 保存此状态时`Session.set`，单击一个按钮显然会切换所有不需要的模板实例中的所有 div。

我可以将状态保存在模板实例的数据上下文中（`this.data`在`Template.myTemplate.rendered`和`Template.myTemplate.created`回调中绑定），但这有两个问题。

1.  `this.data`不是响应式数据源，因此不会传播到 div
2.  我无权访问模板实例`Template.myTemplate.events`（如上讨论的[meteor-core](https://groups.google.com/forum/?fromgroups=#!topic/meteor-core/TA7_jDXs10Q)）

最后，我可以以某种方式将其保存到集合中。但是我将如何唯一标识每个呈现的模板的状态？jQuery 也可能有一种 hacky 方式，但这不是我想要开发应该使用响应式模板的 Meteor 应用程序的方式。特别是当该模板变得更加复杂时。

我是否遗漏了一些东西，或者真的没有相当于 AngularJS 的控制器`$scope`为每个模板实例化传递一个？

**更新**：我在想这样的事情。

模板.html：

```
<template name="jsonObject">
    <input type="button" />
    <div class="{{hidden}}">content</div>
</template> 
```

客户端.js：

```
Template.jsonObject.hidden = function(){
    var ret = "";
    if (this._hidden) {
        ret = "hidden";
    }
    return ret;
};

Template.jsonObject.events({
    'click input' : function(event, template){
        template.data._hidden = true;
    }
}); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-02-07T20:12:32.087

所有其他答案都太复杂和/或过时了。从 Meteor 1.0 开始，维护每个模板状态的推荐解决方案是使用存储在[模板实例中的](http://docs.meteor.com/#/full/template_inst)[反应变量](http://docs.meteor.com/#/full/reactivevar_pkg)：

> 模板实例对象表示文档中模板的出现。它可以用于访问 DOM，并且可以为它分配在模板响应式更新时持续存在的属性。[...] 您可以为对象分配您选择的其他属性。

反应变量由[`reactive-var`核心包](http://docs.meteor.com/#/full/reactivevar_pkg)提供：

> 一个 ReactiveVar 持有一个可以获取和设置的值，这样调用`set`将使任何调用的计算无效`get`，根据反应数据源的通常合同。

您的代码变为：

```
Template.jsonObject.onCreated = function () {
  this.hidden = new ReactiveVar(false);
};

Template.jsonObject.helpers({
  hidden: function () {
    return Template.instance().hidden.get() ? 'hidden' : '';
  }
});

Template.jsonObject.events({
  'click input': function (event, template) {
    template.hidden.set(true);
  }
}); 
```

HTML 与您期望的相同：

```
<template name="jsonObject">
  <button>Click Me</button>
  <p>Hidden is {{hidden}}.</p>
</template> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-26T12:52:03.123

这就是我实现每个模板实例反应源的方式

我只想在恐龙的灭绝状态设置为灭绝时向用户询问恐龙灭绝的原因。

```
<template name="dinosaur">
   <label for="extinction-status">Extinction status</label>
   <select name="extinction-status">
     <option value="not-extinct">Not extinct</option>
     <option value="extinct">Extinct</option>
   </select>
   {{#if isExtinct extinctStatus newExtinctStatus extinctStatusDep}}
   <label for="extinction-reason">Reason for extinction</label>
   <input name="extinction-reason" type="text" placeholder="Why is it extinct?"/>
   {{/if}}
</template> 
```

为了反应性地显示原因字段，我们在模板函数中添加了一个`Deps.Dependency`to`this.data``created`

```
Template.dinosaur.created = function() {
  this.data.newExtinctStatus = null;
  this.data.extinctStatusDep = new Deps.Dependency;
}; 
```

我们监听用户何时更改灭绝状态选择，并更新`newExtinctStatus`并调用`changed`我们的`extinctStatusDep`.

```
Template.dinosaur.events({
  'change [name="extinction-status"]': function(event, template) {
    var extinctStatus = $(event.target).val();
    template.data.newExtinctStatus = extinctStatus;
    template.data.extinctStatusDep.changed();
  }
}); 
```

在助手中我们说我们依赖于`Deps.Dependency`我们通过

```
Template.dinosaur.helpers({
  isExtinct: function(status, newStatus, statusDep) {
    if (statusDep) {
      statusDep.depend();
    }
    if (newStatus) {
      if (newStatus == 'extinct') {
        return true;
      }
    else if (status == 'extinct') {
        // No new status is set, so use the original.
        return true;
    }
  }
}); 
```

这有点涉及添加 to `this.data`，但它允许每个模板的反应性，当您依赖尚未保存到某个东西的数据时很有用`Collection`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-26T10:18:22.057

**更新的答案 - METEOR 0.8.3**

Meteor 现在提供了该`UI._templateInstance()`函数，它可以访问模板助手中的模板实例。这允许更清洁的实现：

1.在下面的HTML代码中，删除`{{#with templateInstanceId=getTemplateInstanceId}}`

2.用这个替换JS代码：

```
var templateInstanceId = 0;

Template.divWithToggleButton.created= function() 
    { 
    this.templateInstanceId = ++templateInstanceId;
    };

Template.divWithToggleButton.events(
    {
    'click button': function(event, template) 
        {
        Session.set("visible", template.templateInstanceId);
        },
    });

Template.divWithToggleButton.visible= function() 
    { 
    return Session.equals("visible", UI._templateInstance().templateInstanceId);
    }; 
```

**以前的回答** 我在我的项目中有同样的要求：唯一标识一个模板实例以使用 with `Session.set`。

这是我的简单技巧，使用上下文替换和“滑动”唯一实例 id（稍后会详细介绍）：

在客户端代码的任何地方，放置：

```
var templateInstanceId = 0;

UI.registerHelper('getTemplateInstanceId', function()
{
    return templateInstanceId++;
}); 
```

然后`{{#with templateInstanceId=getTemplateInstanceId }}`在要唯一标识实例的模板中使用。以您的示例为例，它可能是这样的（未经测试）：

**HTML：**

```
<!-- Div with a toggle visibility button. Use as a Block Helpers (with # instead of >) -->
<template name="divWithToggleButton">
    {{#with templateInstanceId=getTemplateInstanceId }}
    <div>
        <!-- The 'toggle visibility' button -->
        <button type="button">Toggle Visibility</button>

        <!-- The div content -->
        {{#if visible}}
            {{> UI.contentBlock}}
        {{/if}}
    </div>
    {{/with}}
</template> 
```

**JS（客户端代码）：**

```
Template.divWithToggleButton.events(
{
    'click button': function(event, template) 
    {
        Session.set("visible", this.templateInstanceId);
    },
});

Template.divWithToggleButton.visible= function() 
{ 
    return Session.equals("visible", this.templateInstanceId);
}; 
```

现在关于这个奇怪的“滑动”唯一实例 id：

这个 id 在每次模板渲染时都会更新，我没有找到其他方法。**这意味着任何新的渲染都会使存储在 Session 中的唯一 id 无效**。如果您的 div 包含响应式数据源，则会发生新的渲染。根据您的情况，这可能是一个问题，也可能不是。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T14:56:26.230

我认为关于流星核心的讨论已经过时（尽管它是最近的）。[根据文档](http://docs.meteor.com/#eventmaps)（引用如下），这应该是可能的：

```
Template.myTemplate.events({
   foo: function(event, template) {
      var _div = template.find('...');
   }
}); 
```

> 处理程序函数接收两个参数：事件，一个包含有关事件信息的对象，以及模板，一个模板实例，用于定义处理程序的模板。处理程序还会在此接收一些额外的上下文数据，具体取决于处理事件的当前元素的上下文。在 Handlebars 模板中，元素的上下文是该元素出现的 Handlebars 数据上下文，它由块助手设置，例如 #with 和 #each。

**更新**

假设每个可隐藏的 div 都有一个唯一的 id，如果你尝试这样的事情会怎样？我没有测试过。

```
Template.jsonObject.hidden = function(){
    var _id = $(".classOfPossibleHiddenDiv").prop("id");
    return Session.get(_id) || false;
};

Template.jsonObject.events({
    'click input' : function(event, template){
        Session.set($(template.find(".classOfPossibleHiddenDiv")).prop("id"), true);
    }
}); 
```

# php - SOAP 和 PHP 和 WSDL 请求

> ID：14752146
> 
> 赞同：0
> 
> 时间：2013-02-07T13:21:16.933
> 
> 标签：php, soap, wsdl

我正在尝试使用 SOAP 和 PHP 从 WSDL 中获取一些信息

我有这些元素：

```
 <s:element name="GetVersion">
        <s:complexType>
           <s:sequence/>
        </s:complexType>
     </s:element>
     <s:element name="GetVersionResponse">
        <s:complexType>
           <s:sequence>
              <s:element name="ApplicationVersion" type="s:string"/>
              <s:element name="CgiVersion" type="s:string"/>
              <s:element name="SiteName" type="s:string"/>
           </s:sequence>
        </s:complexType>
     </s:element> 
```

如果元素序列具有复杂类型，我了解如何检索数据，但这似乎没有。

我通过 SOAP UI 运行 WSDL，当您运行“GetVersion”请求时，您会收到响应，它会返回应用程序版本、cgi 版本和站点名称。

如何构造我的请求以在 PHP 中返回相同的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:24:44.197

我所知道的：

复杂类型是php中的数组/对象

因此，定义一个具有您描述的属性的数组或对象，并**在您的 PHP Soap Server 实现中返回它**

```
function getVersion(){
$array['appversion'] = 1;
$array['cgiversion'] = 2;
$array['sitename'] = "test";
return $array;
} 
```

[http://www.php.net/manual/de/class.soapserver.php](http://www.php.net/manual/de/class.soapserver.php)

# c# - 使用 Utrace 获取位置后解析 XML

> ID：14752151
> 
> 赞同：0
> 
> 时间：2013-02-07T13:21:42.300
> 
> 标签：c#, xml, ip

大家好，我的想法很简单，我将使用 Utrace API 从 IP 地址（例如代理）获取位置信息。

看看这段代码（感谢谷歌）

```
public static string GetLocation(string IP)
    {
        var location = "";
        List<string> HTML_code = new List<string>();
        WebRequest request = WebRequest.Create("http://xml.utrace.de/?query=" + IP);
        using (WebResponse response = request.GetResponse())
        using (StreamReader stream = new StreamReader(response.GetResponseStream()))
        {
            string line;
            while ((line = stream.ReadLine()) != null)
            {
                HTML_code.Add(line);
            }
        }
        location = (HTML_code[296].Replace("<td><font size=\"-1\">", "")).Replace("</font></td>", "");
        return location;
    } 
```

好的，但是 utrace API 的输出如下：

```
 <?xml version="1.0" encoding="iso-8859-1"?>
    <results>
    <result>
    <ip>188.40.16.134</ip>
    <host></host>
    <isp>Hetzner Online AG Pagedesign</isp>
    <org>Hetzner Online AG Pagedesign</org>
    <region>Koblenz</region>
    <countrycode>DE</countrycode>
    <latitude>50.349998474121</latitude>
    <longitude>7.5999999046326</longitude>
    <queries>8</queries>
    </result>
    </results> 
```

我的 XML 技能不是最好的，希望你们能帮助我编辑这一行：

```
location = (HTML_code[296].Replace("<td><font size=\"-1\">", "")).Replace("</font></td>", ""); 
```

我会这样的输出：

```
Hetzner Online AG Pagedesign : Koblenz 
```

并不是

```
<?xml version="1.0" encoding="iso-8859-1"?>
    <results>
    <result>
    <ip>188.40.16.134</ip>
    <host></host>
    <isp>Hetzner Online AG Pagedesign</isp>
    <org>Hetzner Online AG Pagedesign</org>
    <region>Koblenz</region>
    <countrycode>DE</countrycode>
    <latitude>50.349998474121</latitude>
    <longitude>7.5999999046326</longitude>
    <queries>8</queries>
    </result>
    </results> 
```

在此先感谢您的帮助

编辑：

我的新代码如下：

```
public static void getloc(string ip)
    {
        var location = "";
        var wc = new WebClient();
       location = wc.DownloadString("http://xml.utrace.de/?query=" + ip);
       location = location.Replace("<?xml version=\"1.0\" encoding=\"iso-8859-1\"?>", "").Replace("<results>", "").Replace("<result>", "")
           .Replace("<ip></ip>", "").Replace("<org></org>", "").Replace("<latitude></latitude>", "").Replace("<longitude></longitude>", "").Replace("<queries>*</queries>", "")
            .Replace("</result>", "").Replace("</results>", "");  
        Console.WriteLine(location);
    } 
```

输出是：

```
<ip>212.19.62.76</ip>
<host>1</host>
<isp>Plus.line AG</isp>
<org>ANW GmbH &amp; Co. KG</org>
<region>Bechhofen</region>
<countrycode>DE</countrycode>
<latitude>49.150001525879</latitude>
<longitude>10.550000190735</longitude>
<queries>6</queries> 
```

如何获得像 Plus.line AG ANW GmbH & Co. KG Bechhofen 这样的输出

问候和感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:19:15.620

将 XML 加载到一个`XmlDocument`并正确解析它。

```
public static void getLoc(string ip)
{
    var wc = new WebClient();
    string location = wc.DownloadString("http://xml.utrace.de/?query=" + ip);

    XmlDocument doc = new XmlDocument();
    doc.LoadXml(location);

    XmlNode orgNode = doc.SelectSingleNode("//org/text()");
    XmlNode regionNode = doc.SelectSingleNode("//region/text()");

    return String.Format("{0} {1}", orgNode.Value, regionNode.Value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:46:13.033

使用 Linq to Xml 非常简单：

```
XDocument xdoc = XDocument.Parse(xml);
var result = xdoc.Descendatns("result")
                 .Select(r => new {
                     Org = (string)r.Element("org"),
                     Region = (string)r.Element("region")
                 }).Single(); 
```

这将返回具有 Org 和 Region 属性的强类型匿名对象。格式化：

```
String.Format("{0} : {1}", result.Org, result.Region); 
```

# javascript - 通过单击图像更改 div 内容

> ID：14752156
> 
> 赞同：0
> 
> 时间：2013-02-07T13:21:54.573
> 
> 标签：javascript, jquery

我有这个 div：

```
<div class="main_mark">
    <img src="/assets/welcome_main.png" alt="main" class="main_mark_image" />
</div> 
```

我想要下一件事：当用户单击图像时，此 div 将更改为：

```
<div class="main_mark">
    <embed width="420" height="345" src="http://www.youtube.com/v/XjR-4lbK1mI" type="application/x-shockwave-flash">
    </embed>
</div> 
```

所以在我的javascript中，我试图做类似的事情：

```
$(".main_mark_image").click(function () {
    $("#main_mark").innerHTML = "<embed width=420 height=345 src=http://www.youtube.com/v/XjR-4lbK1mI type=application/x-shockwave-flash></embed>";
}); 
```

但它不会改变任何东西..

任何帮助 aapreciated！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:29:07.030

Try:

```
$(".main_mark_image").click(function () {

    $(".main_mark").html = "<embed width=420 height=345 src=http://www.youtube.com/v/XjR-4lbK1mI     type=application/x-shockwave-flash></embed>";
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:26:46.113

使用@sdespont 和@kmd97 的组合

```
$(".main_mark_image").click(function () {
// Changed selector to class
$(".main_mark").html("<embed width=420 height=345 src=http://www.youtube.com/v/XjR-4lbK1mI     type=application/x-shockwave-flash></embed>");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T13:23:26.147

`$(".main_mark").html("Your code")`代替`$("#main_mark").innerHTML`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T13:24:12.077

main_mark 是一个类而不是一个 id。使用 .main_mark

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T13:24:16.537

使用`html`功能：[http ://api.jquery.com/html/](http://api.jquery.com/html/)

```
$(".main_mark_image").click(function () {
    $("#main_mark").html("<embed width=420 height=345 src=http://www.youtube.com/v/XjR-4lbK1mI type=application/x-shockwave-flash></embed>");
}); 
```

# asp.net - 如果结果是数字，则如果子字符串之间的文件名重命名文件

> ID：14752159
> 
> 赞同：0
> 
> 时间：2013-02-07T13:21:59.773
> 
> 标签：asp.net, c#-4.0

我有一些看起来像这样的文件：

prtx010.prtx010.0199.785884.351.05042413

prtx010.prtx010.0199.123456.351.05042413

prtx010.prtx010.0199.122566.351.05042413

prtx010.prtx010.0199.this.351.05042413

prtx010.prtx010.0199.something.351.05042413

现在，我想对这些文件进行子串化，以便得到以下结果

785884

123456

122566

（这是左21右-12）

问题是，我只想在指定位置之间对这些文件进行子串化，前提是它们是数字且长度为 6 位。

任何关于如何实现这一目标的想法都非常感激。

目前，这就是我所拥有的，但它对所有文件进行了子串化：

```
//Rename all files
DirectoryInfo di = new DirectoryInfo(@"\\prod\abc"); //location of files
DirectoryInfo di2 = new DirectoryInfo(@"\\prod\abc\");//where they are going
string lstrSearchPattern = "prtx010.prtx010.0199.";
foreach (FileInfo fi in di.GetFiles(lstrSearchPattern + "*"))

{
    string newName = fi.Name.Substring(lstrSearchPattern.Length, 6);
    fi.MoveTo(di2 + newName);

    //do something with the results
}
di = null; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:25:17.927

然后`newName`将包含您感兴趣的六个字符。例如，它可能包含`122566`，或者它可能包含`this.3`。您可以使用正则表达式来确定它是否为数字：

```
if (Regex.Matches(newName, @"^\d{6}$"))
{
    // The string is numeric.
} 
```

实际上，这并不完全正确，因为句号之后的模式可能是`123456abc`. 您要查找的是前缀字符串，后跟一个句点、六位数字和另一个句点。所以你想要的是：

```
Regex re = new Regex(@"$prtx010\.prtx010\.0199\.(\d{6})\.)");
Match m = re.Match(fi.Name);
if (m.Success)
{
    // The string is 6 digits
    string newName = m.Groups[1].Value;
} 
```

# asp.net - 通过 URL 传递参数并在下一页获取

> ID：14752160
> 
> 赞同：0
> 
> 时间：2013-02-07T13:22:00.433
> 
> 标签：asp.net, url

因此，每次单击按钮时都会加载一个新页面。但是 URl 用这个 URL 传递了 BOQId

```
protected string GetURLForEditingBoqPricelist()
{
    return ResolveUrl(@"~/Boq.aspx?BOQ_Id=" + this.boqId.ToString());
} 
```

加载 BOQ 页面并存储 BoqID 所以..

```
http://localhost:28889/Project/Boq.aspx?BOQ_Id=124 
```

然后在 BOQ.aspx 页面中，我怎样才能获得 BOQid 值，只需在 cs 中创建一个新的 int 并使其等于 ?? 有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:29:34.637

```
int id;
Int32.TryParse(Request.QueryString["BOQ_Id"], out id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:27:39.293

你可以使用，`int BOQid = Convert.ToInt32(Request.QueryString["BOQ_Id"]);`

# facebook - 无法显示我的 Facebook 粉丝专页的过去事件

> ID：14752161
> 
> 赞同：0
> 
> 时间：2013-02-07T13:22:02.543
> 
> 标签：facebook

当我尝试使用 GraphAPI 显示我的粉丝页面的事件（id = 212435238796460）时，它什么也没有显示，但是当我重定向到粉丝页面事件时，我看到了所有过去的事件。

我的 FQL : SELECT name, pic, start_time, end_time, location, description, eid FROM event WHERE eid IN (SELECT eid FROM event_member WHERE uid = 212435238796460)

GraphAPI: 212435238796460?fields=events

粉丝专页活动的直接链接：http: [//www.facebook.com/tworczyniezalezni? sk=events](http://www.facebook.com/tworczyniezalezni?sk=events)

非常感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:19:57.770

解决了！

SELECT name, pic, start_time, end_time, location, description, eid FROM event WHERE eid IN (SELECT eid FROM event_member WHERE uid = 212435238796460 and start_time>0) order by start_time DESC

# wpf - 每个 WPF DataGrid 列中的按钮

> ID：14752162
> 
> 赞同：0
> 
> 时间：2013-02-07T13:22:04.280
> 
> 标签：wpf, xaml, button, datagrid

我想为每个 wpf datagrid 列添加一个按钮。我的列是自动生成的，所以我没有 xaml 中列的定义。我如何使用列的模板来做到这一点，以便我有我的列标题和右侧的按钮。

编辑：

```
<DataGrid ItemsSource="{Binding User.myDataTable}" AutoGenerateColumns="True">
        <DataGrid.ColumnHeaderStyle>
            <Style TargetType="DataGridColumnHeader">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Here I want my ColumnName" />
                                <Button Content="Button"/>
                            </StackPanel>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </DataGrid.ColumnHeaderStyle>
    </DataGrid> 
```

User.myDataTable 已填充到模型中，并且工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:12:27.823

您可以通过使用样式来做到这一点：

```
<DataGrid>
    <DataGrid.ColumnHeaderStyle>
        <Style TargetType="DataGridColumnHeader">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="{Binding ColumnName}" />
                            <Button Content="Button" />
                        </StackPanel>
                    </ControlTemplate>
                 </Setter.Value>
             </Setter>
         </Style>
     </DataGrid.ColumnHeaderStyle>
 <DataGrid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T10:29:06.613

```
 use the below code:-

    DataGridTemplateColumn templateColumn = new DataGridTemplateColumn();

    FrameworkElementFactory HeaderStackpanel = new    FrameworkElementFactory(typeof(StackPanel));
    FrameworkElementFactory btn = new FrameworkElementFactory(typeof(Button));
    // Set the property for  Button

    btn.SetValue(Button.MarginProperty, new Thickness(-50, 0, 0, 0));
    btn.AddHandler(Button.ClickEvent, new RoutedEventHandler(BtnClick));
     // Set the Text Value to the buttons

    btn.SetValue(Button.ContentProperty, strEdit);

   // Append the Edit Button

   HeaderStackpanel.AppendChild(btn);
   DataTemplate headerTemplate = new DataTemplate();
   headerTemplate.VisualTree = HeaderStackpanel;

   templateColumn.HeaderTemplate = headerTemplate; 
```

# c# - C#我怎样才能最好地从文件菜单中创建一个“新项目”选项

> ID：14752174
> 
> 赞同：1
> 
> 时间：2013-02-07T13:22:31.940
> 
> 标签：c#, visual-studio

我有一个应用程序可以有效地管理共享驱动器上一组预定义文件夹中文件的工作流。即用户可以签出文件并签入并将它们移动到质量检查等，这会在预定义的文件夹结构中物理移动文件。

但是，目前这显然仅适用于单个项目（以及我已编码到程序中的一组文件夹）。

我想做的是有一个“创建新项目”的文件菜单项。选择后，会弹出一个对话框，询问项目名称以及其他一些信息，然后它会为该新项目创建文件夹结构，然后我就走了。

用户显然还需要选择使用哪个项目，以及选择哪个文件夹结构。

我不知道从哪里开始，所以任何指针都会非常有用。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:51:09.757

您可以尝试使用**托管包框架 (MPF)**提供 C# 类，您可以使用或继承这些类来实现您自己的项目类型。MPF 实现了 Visual Studio 期望项目类型提供的许多接口，让您可以自由地专注于实现项目类型的细节。#[礼貌](http://msdn.microsoft.com/en-us/library/vstudio/bb166157.aspx)

# [项目的 MPF - Visual Studio 2010](http://mpfproj10.codeplex.com/)

# ember-data - DS.AdapterPopulatedRecordArray 的目的是什么

> ID：14752176
> 
> 赞同：1
> 
> 时间：2013-02-07T13:22:32.980
> 
> 标签：ember-data

有人可以解释一下不可变 DS.AdapterPopulatedRecordArray 的目的是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T23:51:22.693

~~AFAIK 它不是一成不变的。~~它是该方法返回的*承诺*`find`，将填充从服务器返回的记录。不幸的是，目前没有太多文档，但您可以在[源代码](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/record_arrays/adapter_populated_record_array.js)中阅读更多内容。

### 编辑

它是不可变的。。

# android - Android/Eclipse：与屏幕边框匹配的图像

> ID：14752179
> 
> 赞同：0
> 
> 时间：2013-02-07T13:22:41.603
> 
> 标签：android, eclipse, layout, dimension

我正在努力使图像与屏幕的边框相匹配。这是一个 9 补丁图像。我已经问过这个问题（[Android：处理多个屏幕的图像大小](https://stackoverflow.com/questions/14747489/android-handling-images-size-for-multiple-screens)）但我得到的答案根本不令人满意，所以我会尝试问一个更一般的问题

如果我想根据我的屏幕宽度设置不同的布局，我会为 large xlarge small 和 normal 创建一个文件夹。但是我怎么能在正确的屏幕上预览布局呢？Eclips预览有几个，但正如它所说

```
xlarge screens are at least 960dp x 720dp
large screens are at least 640dp x 480dp
normal screens are at least 470dp x 320dp
small screens are at least 426dp x 320dp 
```

对于 2 个“普通屏幕”480*854 或 480*800，我没有相同的结果，那么我该如何继续？我只想要一个图像来匹配布局的边框我不认为它那么复杂，是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:59:48.370

在您的 XML 文件中尝试

```
<RelativeLayout 
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@+id/border_layout"
android:background="@drawable/border"
android:orientation="vertical" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
     android:layout_alignParentLeft="true"
     android:layout_alignParentRight="true"
    android:src="@drawable/icon1_1" />

</RelativeLayout> 
```

这两个参数将帮助您对齐布局。

```
 android:layout_alignParentLeft="true"
       android:layout_alignParentRight="true" 
```

如果您的边框不是父布局，则将上述属性替换为这些 .

```
 android:layout_alignLeft="@id/border"
         android:layout_alignRight="@id/border" 
```

# asp.net-mvc - Asp.net MVC AJAX - 如何使用 AJAX 访问数据？

> ID：14752185
> 
> 赞同：0
> 
> 时间：2013-02-07T13:22:57.023
> 
> 标签：asp.net-mvc, asp.net-ajax, asp.net-mvc-ajax

案例：**我的应用程序包含以下模块**

*   客户
*   项目
*   业务联系等

**客户端模块**代码

 **```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;
using System.Linq;
using System.Web;
namespace eCms.Models
{
public class Client
{
    public int ClientId { get; set; }
    public int? AddressId { get; set; }
    public int? ImageFileId { get; set; }

    [StringLength(1000)]
    [Required(ErrorMessage = "Company Name is required")]
    [Display(Name = "Company Name")]
    public string CompanyName { get; set; }

    [Display(Name = "Contact Number")]
    [StringLength(20)]
    public string ContactNumber { get; set; }

    [Display(Name = "Email")]
    [StringLength(100)]
    [DataType(DataType.EmailAddress)]
    [Email]
    public string Email { get; set; }

    [StringLength(260)]
    [DataType(DataType.Url)]
    [Display(Name = "Website")]        public string Website { get; set; }

    [Display(Name = "Show this client on website")]
    public bool IsPublic { get; set; }

    #region << relations >>

    [ForeignKey("AddressId")]
    public virtual Address Address { get; set; }

    [ForeignKey("ImageFileId")]
    public virtual ImageFile ImageFile { get; set; }

    #endregion
}

public class EmailAttribute : RegularExpressionAttribute
{
    public EmailAttribute()
        : base(@"[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}")
    {
        this.ErrorMessage = "Provide a valid email address";
    }
}} 
```

**Views/Shared/clients/Index.cshtml** 包含以下...

```
@model IEnumerable<eCms.Models.Client>
@using eCms.Models;
@{
ViewBag.Title = "Index";
eCmsContext db = new eCmsContext();}
<script type="text/javascript" lang="javascript">
function togglesDiv() {
    var catdiv = document.getElementById("addNewCat");
    catdiv.style.display = "none";
    if (catdiv.style.display == "") {
        catdiv.style.display = "none";
    }
    else {
        catdiv.style.display = "";
    }
}
 </script>
 <script type="text/javascript" lang="javascript">
function togglesDivClose() {
    var catdiv = document.getElementById("addNewCat");
        catdiv.style.display = "none";
}</script>
<section class="featured">
<div id="addNewCat" style="display: none; height: 800px; background: #777cdc; padding: 110px">
<div style="float: right">
<a href="#CLIENTS"><span onclick="togglesDivClose();" style="background: #777cdc;">
<img width="30" height="30" src="~/back.png" /></span></a>
</div>
<div style="float: left">
@foreach (var item in db.Clients.ToList()){
<a href="#ClientD"><span onclick="togglesDiv()">
 @* HERe -i want to display projects of selected client in div[named clints] */
</a>}       
</div>
</div>
<a name="ClientD"></a>
</section>
<div id="clients" style="padding: 5px; border: solid 1px #ff6a00; height: 800px; width: 970px; margin: 10px">
@foreach (var item in db.Clients.ToList())
{
<a href="#ClientD"><span onclick="togglesDiv()&GetID()" >
<img src="http://xyz.com/uploads/images/small/@Html.DisplayFor(clientItem => item.ImageFile.FileName)" width="150" height="150" /></span></a>
 } 
```

- togglediv() 是在单击 div 内的图像时创建新的 div[命名为 addNewCat]

**客户控制**代码...

 **```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using eCms.Models;
namespace MidasNext.Controllers
{
public class ClientsController : Controller
{
    private eCmsContext db = new eCmsContext();

    //
    // GET: /Clients/

    public ActionResult Index()
    {
        var clients = db.Clients.Include(c => c.Address).Include(c => c.ImageFile);
        return View(clients.ToList());
    }}} 
```

**您好** frnds 请帮助 m 通过**MVC AJAX解决此问题**

**问题的详细解释**

*v 有一个显示客户列表（图像或徽标）的 div (id=clients)。如果网络用户单击图像，那么它应该创建一个新的 div(id=addNewcat)........（这一切都很好）

但现在 ？？？在这个新创建的 div(id=addNewcat) 上，我想显示所选客户的项目。

提前谢谢.... :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:34:24.320

创建一个 AJAX 方法，该方法转到返回部分视图的控制器方法。在 AJAX 回调函数中，您将 div 的内容设置为结果，类似于：

```
$.get('/controller/method', { ID: ID },
            function (result) {                
                $('#yourDiv').html(result);
            }); 
```****

# html - 嵌套 div 不会用最小高度 100% 填充父 div

> ID：14752188
> 
> 赞同：5
> 
> 时间：2013-02-07T13:23:00.013
> 
> 标签：html, css

1）我有一个 div.full 最小高度：100%（html，正文是 100% 高度）

2）嵌套在里面我有一个带有固定背景图案（叠加）的 div.pattern

3）并再次嵌套一些内容。

我似乎无法让 div.pattern 填充整个父级（如果内容的高度很小）。最好我想避免使用 js 来解决这个问题。

我无法让 jsfiddle 工作。稍后将尝试 psoting 一个。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-07T13:32:05.303

当父元素的高度也被定义时，元素只能设置为百分比的高度/宽度值。在您的情况下，父母只有一个最小高度，这不是绝对高度定义。您必须明确设置高度以获得嵌套 div 的 100% 高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:30:26.020

而是在 div.full 和 div.pattern 中使用`height: 100%`而不是指定它`min-height`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T18:55:12.750

我的解决方案是使用多个背景而不是额外的 div 覆盖。我以这里描述的 CSS2 伪元素方式（带有背景图案的::before）完成了它：

[http://nicolasgallagher.com/multiple-backgrounds-and-borders-with-css2/](http://nicolasgallagher.com/multiple-backgrounds-and-borders-with-css2/)

# unix - where 和 which 的区别

> ID：14752191
> 
> 赞同：0
> 
> 时间：2013-02-07T13:23:12.333
> 
> 标签：unix, tcsh

Unix中的`where`and命令有什么区别？`which`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:48:47.257

**免责声明**：这是在使用 cygwin 的 windows 框中。

`Which`显示一个可执行文件的完整路径，`Where`可以显示多个。

```
$which git sh
```

会产生类似于`/bin/git/`传递的第一个 arg 的相对路径的东西，但是，

```
$where git sh
```

为传递的所有参数生成绝对路径，即注意我在一个 windows 盒子上，所以我得到了一些效果

```
C:\Program Files (x86)\Git\bin\git.exe
C:\Program Files (x86)\Git\cmd\git.exe
C:\Program Files (x86)\Git\bin\sh.exe
```

要添加到其他答案，我认为仅存在于 Windows 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:34:34.737

你的意思是在哪里？它只是找到二进制文件，而 wehereis 也试图找到源代码和手册页。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T13:45:41.423

“where”似乎不是一个常见的 unix 命令，我找不到任何手册页。

然而，[“哪里”确实存在于大多数 Windows 操作系统中。](http://ss64.com/nt/where.html)

查看上述链接。

```
WHERE (Windows 2003 + )

Locate and display files in a directory tree. 

The WHERE command is roughly equivalent to the UNIX 'which' command. 
By default, the search is done in the current directory and in the PATH. 
```

这是有道理的，因为“which”的手册页指出：

```
WHICH(1)

NAME
   which - shows the full path of (shell) commands. 
```

你在使用 Cygwin 吗？

我问是因为这将是“哪个”和“哪里”都存在于同一环境中的最常见情况。

在那种环境中，“which”将以类似 unix 的方式显示命令所在的路径。

```
$ which where
/cygdrive/c/Windows/system32/where 
```

而“where”将以类似窗口的方式显示路径。

```
$ where which
C:\cygwin\bin\which.exe 
```

# iphone - 如何在 iphone 中使用不同的纬度和经度值删除多个引脚？

> ID：14752195
> 
> 赞同：0
> 
> 时间：2013-02-07T13:23:19.750
> 
> 标签：iphone, map, latitude-longitude, pins

如何在 iphone 中使用不同的纬度和经度值删除多个图钉？

我有 10 个纬度和经度值。因此，通过使用这些值，我需要删除地图中的 10 个引脚（取决于纬度值计数）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:44:20.007

为放置地标创建类

```
#import <MapKit/MapKit.h>

@interface DDAnnotation : MKPlacemark 

// Re-declare MKAnnotation's readonly property 'coordinate' to readwrite. 
@property (nonatomic, readwrite, assign) CLLocationCoordinate2D coordinate;

@property (nonatomic, strong) NSString *title;
@property (nonatomic, strong) NSString *subtitle;

@end 
```

/////// 实施

```
#import "DDAnnotation.h"

@implementation DDAnnotation

- (id)initWithCoordinate:(CLLocationCoordinate2D)coordinate addressDictionary:(NSDictionary *)addressDictionary
{
    if ((self = [super initWithCoordinate:coordinate addressDictionary:addressDictionary]))
    {
        self.coordinate = coordinate;
    }
    return self;
}
@end 
```

将所有地点信息（包括纬度和经度）放入 `self.listOfPlaces`

```
- (void)showAllPlaces
{

    for(int i=0; i<self.listOfPlaces.count; i++)
    {
        NSMutableDictionary *cPlace = [self.listOfPlaces objectAtIndex:i];
        CLLocationCoordinate2D pCoordinate ;
        pCoordinate.latitude = [[cPlace objectForKey:@"latitude"] doubleValue];
        pCoordinate.longitude = [[cPlace objectForKey:@"longitude"] doubleValue];

        DDAnnotation *annotation = [[DDAnnotation alloc] initWithCoordinate:pCoordinate addressDictionary:nil] ;

        annotation.title = [cPlace objectForKey:@"placeName"];
        annotation.subtitle = [cPlace objectForKey:@"placeDescription"];
        annotation.image = [cPlace objectForKey:@"markerImage"];
        annotation.placeID = [cPlace objectForKey:@"placeID"];

        [self.mapView addAnnotation:annotation];
    }
    } 
```

# cryptography - 对数据进行数字签名的方法

> ID：14752198
> 
> 赞同：0
> 
> 时间：2013-02-07T13:23:24.040
> 
> 标签：cryptography, digital-signature

我研究数字签名已经有一段时间了。首先，我遇到了 PKCS 标准，该标准涉及将任何数据或文件视为二进制内容并对其进行签名/加密。

最近，我开始了解其他方式，例如：

1) W3C XML 签名：使用 XML 对互联网上的任何内容进行签名（XML 与否）

2) PDF 签名：ISO 格式规定了将数字签名添加到 pdf 阅读器可以阅读的 pdf 文件的机制。

以编程方式对数据进行数字签名还有哪些其他标准/技术？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:40:04.837

您提到的 PKCS#7。

CMS 是 PKCS#7 的扩展/继承者

较旧的 MS Office 二进制格式包含自己的签名机制（类似于 PDF 中的签名机制）。较新的 MS Office 基于 XML 的格式和 OpenOffice 格式使用 XMLDSig。

OpenPGP 签名（使用 OpenPGP 密钥对，而不是 X.509 证书）。

PKWare 支持 ZIP 档案的签名，他们允许人们自由地验证这些签名（但是，他们不提供自己签署 ZIP 的许可证 - 仅使用他们的 SecureZIP 应用程序）。

然后存在签署PNG图像的规范：ftp: [//ftp.simplesystems.org/pub/png/documents/signatures/index.html](ftp://ftp.simplesystems.org/pub/png/documents/signatures/index.html)

也许还有其他不那么广泛传播的格式也有签名，但这就是我目前能记住的全部。

# perl - 用 Perl 比较时间

> ID：14752207
> 
> 赞同：0
> 
> 时间：2013-02-07T13:23:57.660
> 
> 标签：perl, perl-module

我想检查当前时间是否小于、等于或大于 20:00（例如）。我怎么能用 Perl 做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:26:42.803

查看[`localtime`](http://perldoc.perl.org/functions/localtime.html)功能。

```
use warnings;
use strict;

my $after_time = "13:32";

my @time = localtime(time);    

if ($after_time =~ /(\d+):(\d+)/ and
    $time[2] >= $1 and
    $time[1] >= $2
)
{
    print "It is after $after_time";    
} 
```

**更新：**感谢 Dave Cross 指出由于两次调用`localtime()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T13:59:00.667

目前还不清楚你在问什么，但也许是这样的。

```
use Time::Piece;

my $hour = localtime->hour;

if ($hour < 20) {
  say "It's before 20:00";
} elsif {$hour > 20) {
  say "It's after 20:00";
} else {
  say "It's 20:00";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-05T13:35:12.633

实际上正确的“如果”条件会有所不同，如果小时大于分钟，您不需要检查分钟是否更大（我还固定了标志的方向:)

```
use warnings;
use strict;

my $after_time = "13:32";

my @time = localtime(time);    

if ( $after_time =~ /(\d+):(\d+)/
    and (( $time[2] > $1 ) || ( $time[2] == $1 and $time[1] >= $2 ))
) {
    print "It is after $after_time";    
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T19:53:50.590

```
my $now = DateTime->now(time_zone => 'local');
my $cutoff = $now->clone->truncate( to => 'day' )->set(hour => 20);

if ($now < $cutoff) {
  say "It's before 20:00";
} elsif ($now > $cutoff) {
  say "It's after 20:00";
} else {
  say "It's exactly 20:00";
} 
```

对于这种情况可能有点矫枉过正，但 DateTime 的灵活性允许您轻松实现其他逻辑（工作日/周末的不同截止时间，小时和分钟的截止时间），而无需深入研究 if-then-else 逻辑。

# c++ - 在桌面应用程序中托管 Metro 应用程序

> ID：14752209
> 
> 赞同：4
> 
> 时间：2013-02-07T13:24:08.177
> 
> 标签：c++, winapi, windows-8, microsoft-metro

我是 Win32 C++ 编程的新手。现在，我想创建一个能够托管 Metro (AppContainer) 应用程序的应用程序。似乎可以使用这些 COM 接口：

*   IApplicationDesignModeSettings（[MSDN 链接](http://msdn.microsoft.com/en-us/library/windows/desktop/jj553506(v=vs.85).aspx)）
*   IApplicationActivationManager（用于启动 Metro 应用程序）

我可以使用 IApplicationActivationManager 正常启动应用程序，但要能够在窗口内托管应用程序，需要在设计模式下启动应用程序。为了能够在设计模式下启动应用程序，我需要设置 IApplicationDesignModeSettings，它需要初始化 IInitializeWithWindow（[MSDN 链接](http://msdn.microsoft.com/en-us/library/windows/desktop/hh706981(v=vs.85).aspx)）。IInitializeWithWindow 的 Initialize() 方法需要一个“代理窗口”hwnd。这就是我的问题所在。我使用标准 CreateWindow() 和空回调创建了一个窗口，将该窗口 HWND 用作 IInitializeWithWindow->Initialize() 参数。但是这个方法不是返回 S_OK，而是返回 E_ACCESSDENIED 错误。为什么会这样？“代理窗口”是什么意思？可能的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T04:30:16.540

由于 Windows 8 沙盒模型，您无法在桌面应用程序中托管 Metro 应用程序。Metro Apps 由一个特殊进程 (wwahost.exe) 托管，该进程利用代理访问系统级资源。通过任何其他进程托管 Metro App 意味着有人可以扮演“中间人”并嗅探/操纵系统请求，这是不可接受的风险。另一方面，您可以通过单个 VM 托管 Metro Apps。

# zend-framework - Zend 框架路由器问题

> ID：14752215
> 
> 赞同：1
> 
> 时间：2013-02-07T13:24:19.687
> 
> 标签：zend-framework, frameworks, router

我的路线有问题。

因此，假设我有一个带有操作*edit的**TestController*，它获取一个名为“name”的参数。

 *访问 url 将是*test.com/test/edit/name/randomname*。

我想让它可以被*test.com/test/edit/randomname*访问，所以我在 Bootstrap 的函数 _initRoutes 中添加了它。

```
$router = Zend_Controller_Front::getInstance()->getRouter();
            $route = new Zend_Controller_Router_Route(
                'test/edit/:name',
                array('controller' => 'test', 'action' => 'edit', 'name' => 'Default'));
        $router->addRoute('edit-test', $route); 
```

所以它可以按我的意愿工作，但是发生了另一个问题。我在 layout.phtml 中有一个链接，类似于

```
<a href="<?php echo $this->url(array('controller' =>'account','action'=>'logout'));?>">Logout</a> 
```

问题是当我导航到*test.com/test/edit/randomname*时，上面的链接由于某种奇怪的原因发生了变化并指向与上面相同的 url，即*test.com/test/edit/randomname*。

怎么了？

注意：我使用模块，TestController 在默认模块中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:31:36.553

过去，我必须指定要与`url()`视图助手一起使用的路线。由于您的注销路由似乎使用默认路由，请在`url()`调用中指定它：

```
<a href="<?php 
  echo $this->url(array(
     'controller'  =>'account',
     'action'      =>'logout'
  ), 'default'); ?>">Logout</a> 
```

如果您没有明确指定路线，则使用*当前*路线，在您的情况下可能是`edit-test`路线。*

# java - 多数据输入/输出流混淆

> ID：14752218
> 
> 赞同：1
> 
> 时间：2013-02-07T13:24:29.187
> 
> 标签：java, sockets, file-upload, tcp, download

我正在创建一个允许上传和下载到文件服务器的简单程序。在服务器完全在线之前，我需要在上传和下载之间进行选择。事情是，我对数据输入/输出流等感到非常困惑，目前上传选项不起作用。它会自行工作，但不会以我在这里编码的方式工作。在这个阶段它毁了我的头！

服务器代码：

```
import java.io.*;
import java.net.*;

import javax.swing.JOptionPane;

 public class Server_Test {

public static void main(String a[]) throws Exception {

    int timeoutsecs = 600;
    int port = 4444;
    Socket sock;
    ServerSocket servsock = new ServerSocket(port, timeoutsecs);

    while (true) {

        // wait for the next client connection
        sock = servsock.accept();

        DataInputStream choice = new DataInputStream(sock.getInputStream());

        if (choice.read() == 1){

        // ****1*****
        // Download
        // Send I/O streams to the socket

        DataOutputStream out = new DataOutputStream(sock.getOutputStream());
        new Server_Test().sendFile(out);

        }else if (choice.read() == 2){

        // ****2****
        //Upload
        // Receive I/O streams from socket

        DataInputStream in = new DataInputStream(sock.getInputStream());
        new Server_Test().receiveFile(in);

        }

        // Close this connection, (not the overall // server socket)

        sock.close(); 

}
}

public void sendFile(DataOutputStream os) throws Exception{

     // String fileLoc = JOptionPane.showInputDialog(null, "What is the file location of the file you want to download?");
    File file = new File("C:\\TestFile.txt");
    FileInputStream fis = new FileInputStream(file);
    byte [] mybytearray  = new byte [(int)file.length()+1];

    BufferedInputStream bis = new BufferedInputStream(fis);

      bis.read(mybytearray,0,mybytearray.length);
      System.out.println("Sending...");
      os.write(mybytearray,0,mybytearray.length);
      os.flush();

    bis.close();

}

public void receiveFile(DataInputStream in) throws Exception{

    int filesize=6022386;
      int bytesRead;
      int current = 0;
      byte [] mybytearray  = new byte [filesize];

        FileOutputStream fos = new FileOutputStream("C:\\UploaTest.txt");
        BufferedOutputStream bos = new BufferedOutputStream(fos);
        bytesRead = in.read(mybytearray,0,mybytearray.length);
        current = bytesRead;

        do {
           bytesRead =
              in.read(mybytearray, current, (mybytearray.length-current));
           if(bytesRead >= 0) current += bytesRead;
        } while(bytesRead > -1);

        bos.write(mybytearray, 0 , current);
        bos.flush();
        bos.close();

} 
```

}

客户端代码：

```
import java.io.*;
import java.net.*;

import javax.swing.JOptionPane;

public class Client_Test {
public static void main(String a[]) throws Exception {

    Socket sock;

//  ServerSocket serverSocket = new ServerSocket(5556);

    sock = new Socket("127.0.0.1", 4444);
    System.out.println("Connecting...");

    Integer choice = Integer.parseInt(JOptionPane.showInputDialog(null, "Please type 1 for download and 2 for upload."));
    DataOutputStream outs = new DataOutputStream(sock.getOutputStream());

    outs.write(choice);
    //outs.flush();
    //outs.close();

    if(choice == 1){    

    // *****1*****
    //Download
    // Get I/O streams from the socket
    DataInputStream is = new DataInputStream(sock.getInputStream());
    // receive file
    new Client_Test().downloadFile(is);

    }else if(choice == 2){

    //*****2****
    //Upload
    //Send I/O streams to the socket.
    DataOutputStream out = new DataOutputStream(sock.getOutputStream());
    new Client_Test().uploadFile(out);

    }

    sock.close();
}

public void downloadFile(DataInputStream in) throws Exception{

     int filesize=6022386;
      int bytesRead;
      int current = 0;
      byte [] mybytearray  = new byte [filesize];

        FileOutputStream fos = new FileOutputStream("C:\\DowloadTest.txt");
        BufferedOutputStream bos = new BufferedOutputStream(fos);
        bytesRead = in.read(mybytearray,0,mybytearray.length);
        current = bytesRead;

        do {
           bytesRead =
              in.read(mybytearray, current, (mybytearray.length-current));
           if(bytesRead >= 0) current += bytesRead;
        } while(bytesRead > -1);

        bos.write(mybytearray, 0 , current);
        bos.flush();
        bos.close();

}

public void uploadFile (DataOutputStream out)throws Exception{

    File file = new File("C:\\TestFile.txt");
    FileInputStream fis = new FileInputStream(file);
    byte [] mybytearray  = new byte [(int)file.length()+1];

    BufferedInputStream bis = new BufferedInputStream(fis);

      bis.read(mybytearray,0,mybytearray.length);
      System.out.println("Sending...");
      out.write(mybytearray,0,mybytearray.length);
      out.flush();

      bis.close();

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T14:24:45.727

您面临的问题是由以下几行引起的：

```
if (choice.read() == 1){ 
```

和

```
 }else if (choice.read() == 2){ 
```

流阻塞直到数据可用，因此服务器在第一个 if 行等待。

当客户端然后发送 1 或 2 时，读取调用继续，读取的值与 1 进行比较。如果发送值 2，则比较为假，服务器继续到第二行并阻塞等待更多输入。

您应该将两个读取调用替换为一个：

```
int choiceValue = choice.read();
if (choiceValue==1)
{
}
else if (choiceValue==2
{
} 
```

这应该可以解决您当前的问题。

我认为您的 Server_Test.receiveFile() 方法中可能存在另一个问题，因为您似乎试图读取文件两次，一次在这一行

```
bytesRead = in.read(mybytearray,0,mybytearray.length); 
```

然后再次在循环中：

```
do {
           bytesRead =
              in.read(mybytearray, current, (mybytearray.length-current));
           if(bytesRead >= 0) current += bytesRead;
        } while(bytesRead > -1); 
```

# c++ - 是否存在使用 Visual C++ 编译代码但 Visual C++ 运行时不可用的情况？

> ID：14752224
> 
> 赞同：-1
> 
> 时间：2013-02-07T13:24:46.440
> 
> 标签：c++, visual-c++, compilation, conditional-compilation

我需要对一些（非常）跨平台代码进行更改，并添加对[`_CrtSetDbgFlag()`](http://msdn.microsoft.com/en-us/library/5at7yxcs%28v=vs.71%29.aspx)在 Visual C++ 运行时中实现的函数的调用。显然，该函数仅在针对 Visual C++ 运行时标头编译代码时可用。

我想使用`_MSC_VER`宏来有条件地包含这些调用。

```
#ifdef _MSC_VER
_CrtSetDbgFlag(value);
#endif 
```

现在是否有任何合理的配置无法编译？也许我可以使用 Visual C++ 针对 Visual C++ 以外的一些运行时编译代码？

是否有可能使用 Visual C++ 编译代码以便`_MSC_VER`定义，但在编译期间无法使用 Visual C++ 运行时调试的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:35:06.920

理论上，是的。

如果程序是使用动态运行时库（例如，MSVCRTxx.DLL）编译的（由 MSVC），并且运行时 DLL 已因任何原因（修补、检测、挂钩等）被修改，则某些 API 可能无法正常工作。该程序大多会崩溃。但是，我不认为这是一个普遍的情况。

所以，如果你真的关心这个问题，你最好*静态*编译和链接这段代码（见[/MT 编译器选项](http://msdn.microsoft.com/en-us/library/2kzt1wy3.aspx)）。这将保证`_CrtSetDbgFlag`嵌入到二进制文件中的正确实现。

# unix - 从 unix 访问交换全局地址列表 (GAL)

> ID：14752229
> 
> 赞同：0
> 
> 时间：2013-02-07T13:25:01.903
> 
> 标签：unix, exchange-server, addressbook, gal

在 unix 中访问交换全局地址列表（GAL）并对其进行一些操作（如查找联系人的经理等）的方法是什么？这可以在 Windows 中的 VBA Outlook App 中以非常简单的方式完成。我正在尝试在 unix 环境中找到一种方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:00:57.570

只要您的交换服务器上可以访问 LDAP，您就可以使用它。这是我为此编写的一个小脚本，显示了它在内部使用的 ldapseach 命令：

```
$ 411 -d -e joe.user
   command is "/usr/bin/ldapsearch -y ${HOME}/.ssh/temp -x -b dc=ACME,dc=com -H ldap://app.corp.company.com:3268 '(mail=joe.user@*)'"
                Joe User    555 329 3485 joe.user@acme.com,  NY 
```

几点评论：

*   在以前的公司，您可以进行未经身份验证的绑定。那更容易。
*   您可以看到我将密码临时存储在我的 .ssh 目录中。这在理论上很糟糕
*   您可能可以使用任何 LDAP 客户端。我想要一个没有依赖关系的简单脚本，所以我解析 ldapsearch 输出

# ruby - 使用 ruby 应用程序时出现 remove_entry_secure 错误

> ID：14752236
> 
> 赞同：6
> 
> 时间：2013-02-07T13:25:32.337
> 
> 标签：ruby, gem, ubuntu-10.04, docsplit

我正在尝试使用 docsplit 将 PDF 文件拆分为图像。但看来我的 ruby​​ 安装有问题。我每次都收到以下错误：

```
/usr/lib/ruby/1.8/fileutils.rb:694:in `remove_entry_secure': parent directory is world writable 
```

这是完整的命令行输出：

```
$ docsplit images pdf-test.pdf
/usr/lib/ruby/1.8/fileutils.rb:694:in `remove_entry_secure': parent directory is world writable, FileUtils#remove_entry_secure does not work; abort: "/tmp/d20130207-6739-1f9i6b" (parent directory mode 42777) (ArgumentError)
    from /var/lib/gems/1.8/gems/docsplit-0.6.4/lib/docsplit/image_extractor.rb:51:in `convert'
    from /var/lib/gems/1.8/gems/docsplit-0.6.4/lib/docsplit/image_extractor.rb:19:in `extract'
    from /var/lib/gems/1.8/gems/docsplit-0.6.4/lib/docsplit/image_extractor.rb:19:in `each'
    from /var/lib/gems/1.8/gems/docsplit-0.6.4/lib/docsplit/image_extractor.rb:19:in `extract'
    from /usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `each_with_index'
    from /var/lib/gems/1.8/gems/docsplit-0.6.4/lib/docsplit/image_extractor.rb:18:in `each'
    from /var/lib/gems/1.8/gems/docsplit-0.6.4/lib/docsplit/image_extractor.rb:18:in `each_with_index'
    from /var/lib/gems/1.8/gems/docsplit-0.6.4/lib/docsplit/image_extractor.rb:18:in `extract'
    from /var/lib/gems/1.8/gems/docsplit-0.6.4/lib/docsplit/image_extractor.rb:16:in `each'
    from /var/lib/gems/1.8/gems/docsplit-0.6.4/lib/docsplit/image_extractor.rb:16:in `extract'
    from /var/lib/gems/1.8/gems/docsplit-0.6.4/lib/docsplit.rb:63:in `extract_images'
    from /var/lib/gems/1.8/gems/docsplit-0.6.4/bin/../lib/docsplit/command_line.rb:44:in `run'
    from /var/lib/gems/1.8/gems/docsplit-0.6.4/bin/../lib/docsplit/command_line.rb:37:in `initialize'
    from /var/lib/gems/1.8/gems/docsplit-0.6.4/bin/docsplit:5:in `new'
    from /var/lib/gems/1.8/gems/docsplit-0.6.4/bin/docsplit:5
    from /usr/bin/docsplit:19:in `load'
    from /usr/bin/docsplit:19 
```

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-17T14:22:10.540

原来我的`/tmp`文件夹权限有问题。以下解决了该问题：

我遵循的步骤是：

```
user@host-$: chmod 777 -R /tmp
user@host-$: chmod o+t -R /tmp
user@host-$: ls -l tmp
drwxrwxrwt 2 user group 4096 2009-11-21 17:01 tmp 
```

# jquery - asp.net jquery淡出，更改文本和淡入平滑

> ID：14752240
> 
> 赞同：0
> 
> 时间：2013-02-07T13:25:41.107
> 
> 标签：jquery, asp.net, fadein, fadeout, raty

我正在使用 jquery.raty 框架来做评分系统。我有 5 颗星并排，在星星旁边，我有一个标签，上面写着“请给我打分”。当用户单击其中一颗星进行评分时，我希望标签淡出，将文本更改为“谢谢”，然后淡入标签。这是代码：

```
$('#<%=lbl_force_to_rate.ClientID %>').fadeOut(100);
$('#<%=lbl_force_to_rate.ClientID %>').delay(400).html("Thank you");
$('#<%=lbl_force_to_rate.ClientID %>').delay(400).val("Thank you");
$('#<%=lbl_force_to_rate.ClientID %>').delay(400).fadeIn(400); 
```

它完成了这项工作，但我看到发生了眨眼。并且它会在淡出之前更改文本，因此用户可以看到更改的文本。然后它淡出淡入。我怎样才能顺利完成？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:32:19.320

淡入淡出完成时使用回调。

并且每次在节点上应用某些东西时都无需搜索节点。使用链接。

```
$('#<%=lbl_force_to_rate.ClientID %>').fadeOut(100,function(){
   $(this).delay(400).html("Thank you")
    .delay(400).val("Thank you")
    .delay(400).fadeIn(400);
}); 
```

`delay`另外，如果它们是某种锻炼方式，您可能不需要s

```
$('#<%=lbl_force_to_rate.ClientID %>').fadeOut(100,function(){
   $(this).html("Thank you").val("Thank you").fadeIn(400);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:36:41.770

试试这个：

```
$('#<%=lbl_force_to_rate.ClientID %>').fadeOut(400, function() { 
    $(this).html("Thank you").fadeIn(400);
}); 
```

# c# - 当页码 = 1 时在 GridView 中隐藏数据分页器

> ID：14752241
> 
> 赞同：2
> 
> 时间：2013-02-07T13:25:44.850
> 
> 标签：c#, gridview, datapager

我正在使用 gridview 和其中的 datapager ，我找不到隐藏寻呼机的方法。我试过这段代码：

```
pager.Visible = (pager.PageSize < pager.TotalRowCount); 
```

还有其他方法可以实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:02:54.540

如果在 OnDataBound 事件中添加它，则可以使用此代码

```
protected void GridView1_DataBound(object sender, EventArgs e)
{
     pager.Visible = (pager.PageSize < pager.TotalRowCount); 
} 
```

# c++ - ray tracer.exe 中 0x010A85FB 处的未处理异常：0xC0000005：访问冲突写入位置 0x709DF990

> ID：14752243
> 
> 赞同：0
> 
> 时间：2013-02-07T13:25:46.830
> 
> 标签：c++

我一直试图摆脱这个错误，但似乎没有任何效果。我在 Visual Studio 2012 中使用 OpenGL 编写 C++ 代码。这里我初始化`rtScene`对象，这个对象的默认构造函数读取一个文件并设置其他数据成员的值。当我调用 function 时弹出错误`SphereSet()`，该函数使用数据成员的相应函数设置 sphere 的数据成员的值。

```
class rtPoint
{
    friend class Sphere;
    friend class rtScene;
private:
    double xx,yy,zz;
public:
    rtPoint():xx(0),yy(0),zz(0){cout<<"vi";};
    void rtPointSet(double x,double y,double z)
    {
        xx=x;yy=y;zz=z;
        //cout<<xx<<" "<<yy<<" "<<zz<<"\n";
    }
    void rtPointSet(rtPoint p)
    {
        xx=p.xx;
        yy=p.yy;
        zz=p.zz;
    }
};

class Sphere
{
    friend class rtScene;
private:
    rtPoint center;
    double radius;
    color3 color;
    Material surface;
public:
    Sphere():center(),radius(1),color(),surface(){};
    void SphereSet(double x,double y,double z,double r,
                   double rr,double gg,double bb,double Par,
                   double Pag,double Pab, double Pdr, double Pdg, 
                   double Pdb,double Psr,double Psg,double Psb,double PhCo)
    {
        center.rtPointSet(x,y,z);
        color.set(rr,gg,bb);
        radius=r;
        surface.MaterialSet(Par, Pag, Pab, Pdr, Pdg, Pdb, Psr, Psg, Psb, PhCo);
    }
};

class rtScene
{
private:
    Sphere *Sph_obj;
    //Sphere Sph_obj[3];
    int nS,nL;
    rtCamera CAM;
    rtLight *Lights;
public:
    rtScene(char *fname)
    {
        FILE *fp;
        fp=fopen(fname,"r");
        double a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;
        char ch;

        //.........read camera.........//
        fscanf(fp,"%lf,%lf,%lf,%lf,%lf,%lf\n",&a,&b,&c,&d,&e,&f);                   // 6 values
        this->CAM.rtCameraWindow(a,b,c,d,e,f);
        fscanf(fp,"%lf,%lf,%lf,%lf,%lf,%lf,%lf,%lf,%lf\n",&a,&b,&c,&d,&e,&f,&g,&h,&i);  // 9 values
        this->CAM.rtCameraSet(a,b,c,d,e,f,g,h,i);
        //.............................//

        //.......read Lights.............//
        fscanf(fp,"%c %d\n",&ch,&nL);
        cout<<nL;
        if(ch=='l')
        {
            this->Lights=new rtLight[nL];
            for(int i=0;i<nL;i++)
            {
                fscanf(fp,"%lf,%lf,%lf,%lf,%lf,%lf,%lf,%lf,%lf,%lf,%lf,%lf\n",&a,&b,&c,&d,&e,&f,&g,&h,&i,&j,&k,&l); //12 values
                this->Lights[i].rtLightSet(a,b,c,d,e,f,g,h,i,j,k,l);
            }
        }
        //..............................//

        //.....read spheres.............//
        fscanf(fp,"%c %d\n",&ch,&nS);
        cout<<nS;
        if(ch=='s')
        {
            this->Sph_obj=new Sphere[nS];
            //Sph_obj=(class Sphere *) malloc(sizeof(Sphere)*nS);
            for(int i=0;i<nS;i++)
            {
                fscanf(fp,"%lf,%lf,%lf,%lf,%lf,%lf,%lf,%lf,%lf,%lf,%lf,%lf,%lf,%lf,%lf,%lf,%lf\n",&a,&b,&c,&d,&e,&f,&g,&h,&i,&j,&k,&l,&m,&n,&o,&p,&q);
                this->Sph_obj[i].SphereSet(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q);
            }
        }
        //.............................//
    }
}; 
```

`rtPointSet`当函数尝试为 Sphere 的中心变量设置`xx`、`yy`、`zz`值时，代码崩溃并给出错误“ray tracer.exe 中 0x010A85FB 的第一次机会异常：0xC0000005：访问冲突写入位置 0x709DF990” 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:49:30.787

您正在覆盖循环变量。

```
 for(int i=0;i<nS;i++) // Loop over 'i'
    {
        fscanf(fp, [...],&i,[...]);   // Oops!
        this->Sph_obj[i].SphereSet([...]; // Bang!
    } 
```

声明接近它们使用的变量而不重用它们是一件好事——如果你在循环中声明了`a`.. `q`，编译器会为你捕捉到这个错误。

# php - PHP 代码未在站点中显示来自数据库的所有结果，而是在数据库中显示它们

> ID：14752251
> 
> 赞同：0
> 
> 时间：2013-02-07T13:26:12.087
> 
> 标签：php, mysql, select, webstore

将所有适当的类别打印到选择输入中时遇到一点问题。现在，它应该添加所有有孩子的类别。问题是，这并不完全正确。它只显示主要类别中的第一个和属于它的子类别，但不显示下一个主要类别项目。

例如：

1.  主类别：军鼓 子类别：多摩 子类别 子类别：Starphonic

2.  主类别：钹 子类别：Paiste

它仅显示第一个主要类别（例如 Snares）以及与其相关的所有内容。

我还希望它显示那些没有子类别的类别和那些有的类别。

```
 $result = mysql_query("SELECT COUNT(nimi) AS kpl FROM samppa_kategoriat");
  $row = mysql_fetch_array($result);
  $kpl = $row['kpl'];
  mysql_free_result($result);
  $sql = "SELECT
   samppa_kategoriat.nimi AS KatNimi,
   samppa_kategoriat.layer AS layerA,
   samppa_kategoriat.children AS lapsetA,
   samppa_alikategoriat.nimi AS AliNimi,
   samppa_alikategoriat.layer AS layerB,
   samppa_alikategoriat.parent AS parentA, 
   samppa_alikategoriat.children AS lapsetB,
   samppa_alikategoriatB.nimi AS AliNimiB, 
   samppa_alikategoriatB.parent AS parentB,
   samppa_alikategoriatB.layer AS layerC 
   FROM 
   samppa_kategoriat, 
   samppa_alikategoriat,
   samppa_alikategoriatB
  WHERE
   (samppa_kategoriat.nimi = samppa_alikategoriat.parent
  AND samppa_alikategoriat.nimi = samppa_alikategoriatB.parent)";
  $res = mysql_query($sql);
  $i = 0;
  while($n = mysql_fetch_object($res)){
  $countA[$i]   = mysql_real_escape_string(strip_tags($n->lapsetA));
  $countB[$i]   = mysql_real_escape_string(strip_tags($n->lapsetB));
  $nimiA[$i]    = mysql_real_escape_string(strip_tags($n->KatNimi));
  $nimiB[$i]    = mysql_real_escape_string(strip_tags($n->AliNimi));
  $nimiC[$i]    = mysql_real_escape_string(strip_tags($n->AliNimiB));
  $parentA[$i]  = mysql_real_escape_string(strip_tags($n->parentA));
  $parentB[$i]  = mysql_real_escape_string(strip_tags($n->parentB));
  $layerA[$i]   = mysql_real_escape_string(strip_tags($n->layerA));
  $layerB[$i]   = mysql_real_escape_string(strip_tags($n->layerB));
  $layerC[$i]   = mysql_real_escape_string(strip_tags($n->layerC));
  $i++;
  }
  for($i=1;$i<$kpl;$i++){
    echo "<option>$nimiA[$i] = $countA[$i] </option>";

    for($i=0;$i<$countA[$i];$i++){
      echo "<option>- $nimiB[$i] = $countB[$i]</option>";
    }
      for($i=0;$i<$countB[$i];$i++){
      echo "<option>-- $nimiC[$i]</option>";
      }
     }

        mysql_free_result($res);
        mysql_close($conn); 
```

?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:39:59.813

您在 for 循环中使用相同的变量名。

```
for($i=1;$i<$kpl;$i++){
  echo "<option>$nimiA[$i] = $countA[$i] </option>";

  for($i=0;$i<$countA[$i];$i++){
    echo "<option>- $nimiB[$i] = $countB[$i]</option>";
  }

  for($i=0;$i<$countB[$i];$i++){
    echo "<option>-- $nimiC[$i]</option>";
  }
} 
```

当他们都使用变量 $i 时，外部循环将不会保持其正确值。尝试将外部循环更改为`$j`而不是`$i`.

# xpages - 如何使用服务器端 javascript 获取外部网站的 HTML

> ID：14752261
> 
> 赞同：1
> 
> 时间：2013-02-07T13:27:05.737
> 
> 标签：xpages

我想通过使用服务器端 javascript 来获取任何网站的 HTML 代码/数据。我怎样才能做到这一点？

PS：我需要这个，因为由于相同的来源策略，我无法从客户端 javascript 执行外部域的 XMLHttpRequest。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T14:08:08.007

这是一个 Quick-n-Dirty 解决方案：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">

<xp:label id="labelURL">
    <xp:this.value>
        <![CDATA[#{javascript:
            var url:java.net.URL = new java.net.URL("http://google.com");
            url.openConnection();
            var is:java.io.InputStream = url.openStream();
            var c;
            var result = "";
            while( (c = is.read()) != (-1) ){
                result += @Char(c);
            }
            is.close();
            result
        }]]>
    </xp:this.value>
</xp:label>
</xp:view> 
```

访问远程 URL 的更好解决方案是使用[http://hc.apache.org/httpclient-3.x/](http://hc.apache.org/httpclient-3.x/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T22:24:44.857

[这里描述](http://www.wissel.net/blog/d6plinks/SHWL-8BQNWN)的问答方式少一点。正如 Sven 建议的那样，它使用提供身份验证、自动重定向等的 Apache HTTP 客户端。

# c++ - 关于 C++ 中 catch(...) 的安全使用

> ID：14752264
> 
> 赞同：-2
> 
> 时间：2013-02-07T13:27:11.560
> 
> 标签：c++, exception, exception-handling, catch-all

我正在和一位同事争论使用的危险`catch(...)`

他向我指出了一个可能的用途，*严格暗示*any`catch(...)`后面跟着一个跟踪/日志：以帮助确定一些非托管异常的起源。

我个人对此持怀疑态度。你知道任何明确的安全使用`catch(...)`

**编辑**：对于那些对辩论感兴趣的人，我的同事刚刚在 Programmers 网站上向我指出了[这个问题。](https://softwareengineering.stackexchange.com/questions/123436/is-catch-throw-a-bad-practice)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T13:31:41.957

`catch(...)`我所知道的最清晰有趣的安全使用是将用于处理各种异常的代码卸载到共享函数：

```
void handle_error() {
    try {
        throw;
    } catch (TiresomelyPedanticException &) {
        # lah lah I don't care
        return;
    } catch (InterestingException &) {
        log_something();
        throw;
    }
    // etc. This catch chain may *or may not* need a catch(...)
    // of its own, it depends whether part of its job is to
    // deal with the "miscellaneous" case.
} 
```

您使用这样的功能：

```
try {
    blah();
} catch(...) {
    handle_error();
} 
```

... 别的地方 ...

```
try {
    something_that_throws_the_same_exceptions_as_blah();
} catch (...) {
    handle_error();
} 
```

不过，上面的模式可能有点像 C++03 主义。在 C++11 中，编写捕获 lambda 非常容易，以下内容可能对调用者更有用，并且`catch(...)`模式中没有：

```
template <typename Func>
auto do_and_handle_error(Func f) -> decltype(f()) {
    try {
        return f();
    } // catch chain goes here
} 
```

像这样使用它：

```
do_and_handle_error(blah); 
```

`blah`或者在接受参数时实际上是必要的：

```
do_and_handle_error([&](void) { return blah(arg1,arg2); }); 
```

* * *

一个无聊的用法`catch(...)`是保证在程序终止之前堆栈将被展开：

```
int my_main() {
    RAIIClass some_object_i_want_to_get_destroyed_no_matter_what;
    some_code_that_might_throw();
    return 0;
}

int main() {
    try {
        return my_main();
    } catch (...) {
        throw;
    }
} 
```

如果没有捕获，标准将使其未指定或实现定义，`some_object`如果代码抛出，是否被销毁。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T13:32:24.117

异常经常被过度使用。这种过度使用几乎总是伴随着包罗万象的陈述。这通常是对异常的错误使用和理解的标志。我从不推荐它。可悲的是，在我工作的某个（坏）地方，其他人执行了这项政策。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T13:30:47.167

以下始终是安全的：

```
try
{
    some_local_stuff();
}
catch (...)
{
    clean_up_local_stuff();
    throw;
} 
```

换句话说，catch-all`catch`块只能与重新抛出完全相同的异常或存储异常指针以传输异常结合使用。

使异常完全消失的 Catch 块应该具体说明它们处理的异常类型。

# android - 在 Nexus 7 大屏幕上缩小 xlarge 应用程序

> ID：14752267
> 
> 赞同：1
> 
> 时间：2013-02-07T13:27:18.340
> 
> 标签：android, android-layout, android-manifest

*我知道在 Android 中支持不同屏幕尺寸的最佳方式是为不同的屏幕尺寸创建不同的布局。*

我知道可以将手机应用扩展到桌面大小的屏幕。我想知道是否可以**缩小**我的*res/layout-xlarge-land*布局以适应 Nexus 7。我在清单中添加了以下内容：

```
<supports-screens 
    android:resizeable="true"
    android:smallScreens="false" 
    android:normalScreens="false" 
    android:largeScreens="false" 
    android:xlargeScreens="true" /> 
```

但是 Nexus 7 仍然需要*res/layout-large*文件夹中的布局，它不会采用*res/layout-xlarge-land*文件夹中的布局。当我将*res/layout-xlarge-land*文件夹复制到*res/layout-large*文件夹时，它不会按比例缩小。

我在清单中尝试了各种不同的选项，但我无法让它工作。缩小规模有可能吗？

编辑：

我知道正确的方法是`large`为 Nexus 7 创建布局，然后为该设备创建特定的布局。但我正在按计划工作，我无法影响设计（专为 10 英寸平板电脑设计）。所以我被迫为7寸平板使用手机设计。

我知道如果在清单中指定，可以使仅限 Android 手机的应用程序放大以适应更大的屏幕。所以我想知道反过来是否可行，将 10 英寸布局缩小以适应 7 英寸屏幕（很像 iPad Mini 上的 iPad 应用程序缩小）。我从阅读这篇文章 ( [http://www.tested.com/tech/android/1381-how-android-scales-apps-for-different-screen-sizes](http://www.tested.com/tech/android/1381-how-android-scales-apps-for-different-screen-sizes) ) 中感觉到这是可能的，但我不能让它工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T14:03:11.437

您在开发过程中有几个误解。

首先，Android 不会为您“缩小”布局。您必须自己执行此操作，然后在特定文件夹中提供适合大小的布局。`xlarge`布局可能包含比布局更多的 UI 元素，`large`就像`land`布局可能会以不同于纵向对应的方式排列元素一样。如果您只是将布局从一个文件夹复制到另一个文件夹，那么真的不需要所有这些说明符，是吗？

其次，Nexus 7 是一个`large`设备，不像`xlarge`你想象的那样。Nexus 10 是`xlarge`.

# java - java使用有序数组拆分字符串

> ID：14752270
> 
> 赞同：0
> 
> 时间：2013-02-07T13:27:27.157
> 
> 标签：java, regex, arrays

我很难为以下问题找到一个聪明的解决方案。我有文本字符串“exp”和一个带有章节数的预定义列表“章节”。我的目标是根据章节的预定义顺序拆分文本。我有这个正则表达式：

```
"(\n(\\d\\.?){1,}?\\S+)" 
```

它与章节的编号相匹配，但是如果编号与章节列表中的第二个元素匹配，我如何检查它是否也匹配章节列表中的第一个元素和下一段中的第一个元素？

```
static String[] chapters;
chapters = new String[]{"1","1.1","1.2"};
String exp = 
"1 HeaderOne
1.1 HeaderOneOne
This is Text in the first Paragraph with the header 1.1.

1.2 HeaderOneTwo
This is Text in the second Paragraph."; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:44:25.373

如果我理解正确，请执行以下操作。

1.  将您的 exp 拆分为 '\n' 并将其添加到列表中。
2.  调用 Collections.sort(urSpilitLIst, urComparater);

在 urComparater 中编写 ur 列表的排序逻辑。排序逻辑将根据您的章节列表中的顺序进行排序。

# jquery - 无法让 Jquery.val 在 MVC4 中工作

> ID：14752271
> 
> 赞同：0
> 
> 时间：2013-02-07T13:27:32.460
> 
> 标签：jquery, asp.net-mvc-4

我知道我在某个地方做错了什么，有人可以向我指出吗？

我有一个视图模型，包含一个`CurrentSection`属性

```
public String CurrentSection {get; set;} 
```

在视图中，我调用 viewmodel 和 jQuery

```
@model Application1.ViewModels.fooVM

@Scripts.Render("~/bundles/jquery") 
```

然后我执行以下操作（在 JSFiddle 中有效）

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#CurrentSection").val('SecStoreIndex');
    });
</script>

@Html.EditorFor(X => X.CurrentSection) 
```

用 EditorFor 渲染为

```
<input id="CurrentSection" name="CurrentSection" type="hidden" value="" /> 
```

谁能指出我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:37:20.427

确保使用 jQuery 的脚本放置**在**包含 jQuery 之后：

```
@model Application1.ViewModels.fooVM

@Scripts.Render("~/bundles/jquery")

<script type="text/javascript">
    $(document).ready(function () {
        $("#CurrentSection").val('SecStoreIndex');
    });
</script>

@Html.EditorFor(X => X.CurrentSection) 
```

还要确保在你的内部你`_Layout.cshtml`还没有`@Scripts.Render("~/bundles/jquery")`打电话并获得重复的 jQuery 包含。

还要记住，默认模板使用 _Layout 中的 Scripts 部分，因此如果您使用此默认模板创建了应用程序，您可能应该将脚本放在此部分中：

```
@model Application1.ViewModels.fooVM

@section Scripts {
    <script type="text/javascript">
        $("#CurrentSection").val('SecStoreIndex');
    </script>
}

@Html.EditorFor(X => X.CurrentSection) 
```

另请注意，在这种情况下，我删除了`$(document).ready`包装器，因为默认模板将所有脚本放在 DOM 的末尾，就在结束`</body>`标记之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:20:55.027

我举起双手，承认自己的愚蠢。

我试图查看查看页面源的动态更改值视图。我突然想到这并没有出现。我发出了警报，并且正在更改值。

很抱歉浪费您的时间。

# jsf - 我想在下载记录超过 10000 条且用户能够下载的 excel 时在 jsf 中显示警告消息

> ID：14752273
> 
> 赞同：-3
> 
> 时间：2013-02-07T13:27:37.793
> 
> 标签：jsf

我想在 jsf 下载 excel 文件中显示警告消息。

我想在下载记录超过 10000 条且用户能够下载的 excel 时在 jsf 中显示警告消息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:09:38.330

It's not possible to send multiple responses to one request. You can send only one response back per request. So, in order to be able to send a warning message and a file for download, the client basically needs to send 2 requests.

Easiest would be if the first requests checks the size of the file and then sets the message accordingly.

```
public void submit() {
    excelFile = prepareExcelFile();

    if (excelFile.getRecordCount() > 10000) {
        addGlobalWarn("It's more than 1000 records! It can take quite some time.");
    }
} 
```

And have the form submit conditionally render a JS `window.location` call on the exact URL of the excel file.

```
<h:outputScript rendered="#{not empty bean.excelFile}">
    window.location = '#{excelFile.url}';
</h:outputScript> 
```

# android - 吐司.LENGTH_LONG

> ID：14752276
> 
> 赞同：2
> 
> 时间：2013-02-07T13:27:39.557
> 
> 标签：android

我是 android 新手，我正在理解一些已经开发的代码。我很困惑`Toast.LENGTH_LONG`。我搜索了它，我得到的是 - Toast 就像一条警报消息，一段时间后会消失，但没有更清楚，所以请任何人都可以帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:31:04.963

试试这个

```
 Toast.makeText(getApplicationContext(), "Your Message", Toast.LENGTH_LONG).show(); 
```

确切地说，现在是烤面包的时间段，还有任何疑问，而不是请更喜欢[这里](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:33:30.197

Toast 是一个临时视图，在 ui 线程中运行有限的时间并自动消失。假设它是现实世界中从烤面包机中冒出来的烟。一段时间后 IT 消失。这就是 toast 在 android 中的工作方式。实现它用户。

```
 Toast.makeText(getApplicationContext(), "Your Message", Toast.LENGTH_LONG).show(); 
```

LENGTH_SHORT 在短时间内显示视图或文本通知。此时间可由用户定义。这是默认设置。

LENGTH_LONG 长时间显示视图或文本通知。此时间可由用户定义。

阅读[此](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)内容以获取更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T13:30:44.470

随时查看官方的 android 文档。以下是您需要的所有信息：http: [//developer.android.com/reference/android/widget/Toast.html](http://developer.android.com/reference/android/widget/Toast.html)

```
LENGTH_LONG     Show the view or text notification for a long period of time.
LENGTH_SHORT    Show the view or text notification for a short period of time. 
```

# internet-explorer - 网络驱动程序 | IE9 | 设置自动下载文件

> ID：14752283
> 
> 赞同：5
> 
> 时间：2013-02-07T13:28:08.183
> 
> 标签：internet-explorer, download, selenium-webdriver

我需要测试下载操作。我已经为 FF 和 Chrome 浏览器配置了远程 webdrivers 来自动下载文件，而无需任何提示和弹出窗口。但我找不到任何有用的信息 - 如何允许 IE9 的文件自动下载。

我试过的：

*   找到任何可能的方法来配置驱动程序本身。什么也没找到：没有功能，没有选项，没有 cmd 参数
*   在安全选项卡中找到设置。我已经检查过了，发现允许这样做的设置已为 IE9 删除。
*   使用这样的注册表项，但它没有帮助（在[此处](http://answers.microsoft.com/en-us/ie/forum/ie9-windows_7/automatic-prompting-for-file-downloads/676e8727-e917-477d-adb9-d9f590ea22f9?msgId=7890487a-d970-4ced-a075-f6ae2b2c8f00)找到）：

> HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Zones\2202=0x0

还有这个：

> HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Internet Explorer\Main\FeatureControl\FEATURE_RESTRICT_FILEDOWNLOAD\iexplore.exe=0x00000000

谁知道怎么解决？这是真的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T17:27:50.467

不幸的是，我最近也遇到了这个问题。恐怕这不是好消息。

IE8 及以下，这是不同的，仅仅是因为它是一个你可以与之交互的新窗口。

IE9，它现在是一个内置的“框架通知栏”

您可以使用 PInvoke 单击保存按钮...请参阅此主题：

[https://stackoverflow.com/a/8532222/1173729](https://stackoverflow.com/a/8532222/1173729)

这个答案是针对 Watin 的，但唯一的区别是 Watin 已经封装了获取特定浏览器窗口句柄的能力。这可以简单地用你自己的方法来切换，要点一般只是获取 IE 窗口的句柄，沿着它的子元素向下走，直到你点击“保存”按钮。但是，这有一个主要缺点，将控件切换回 Selenium - 它不会发生，Selenium 只会挂起。

请注意，这一切都在 C# 中。Java 显然还有其他方式，例如“机器人”类：

[http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Robot.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Robot.html)

我没有使用它们，但是您将能够使用该类将其定向到“保存”按钮所在的位置。

将没有注册表项或设置来避免此问题 - 这根本不可能。

我已经决定，由于 FF 和 Chrome 可以设置为自动下载文件，您可以在之后验证它的存在。您测试该文件是否可以下载并显示在硬盘上。

如果在 Chrome 和 Firefox 中运行良好，那么在 IE9 中不会发生的可能性有多大？苗条，但可能。

底线是它是一个操作系统对话框，超出了 Selenium 的范围。

您还可以将其与 AutoIT 结合使用。我的经验是 AutoIT 也可能同样不稳定。

# mysqli - 使用 mysqli 调用准备 - SQL 语法错误

> ID：14752284
> 
> 赞同：0
> 
> 时间：2013-02-07T13:28:23.960
> 
> 标签：mysqli, prepare

```
$q2 = "UPDATE `tasks` SET `title` = ?, task = ?, rules = ?, media = ?, type = ?, xp = ?, available = ?, timestamp = ? WHERE id = ?";
            if ($stmt = $mysqli->prepare($q2)) {
                $stmt->bind_param("sssssissi", $_POST["tasktitle"], $_POST["editor"], $_POST["rules"], serialize($_POST["media"]), $_POST["type"], $_POST["xp"], $a = 0, strtotime("now"), $_GET['id']);
                $stmt->execute();
                $stmt->close();
            }
            $r = $mysqli->query($q2) or die($mysqli->error); 
```

我收到此错误消息：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '?, task = ?, rules = ?, media = ?, type = ?, xp = ?, available = ?, timestamp = ' at line 1 
```

什么是问题，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:38:45.773

我很确定它来自`$mysqli->query()`需要正确转义查询的调用（即，没有任何好的安全参数）。这就解释了为什么它一开始就抱怨`?`。

快速检查的方法是实际注释掉整个`if`语句并判断错误是否仍然出现。如果是这样，您知道这是查询而不是准备好的语句执行。

我对您的问题是：您为什么要执行准备好的语句，*然后*尝试再次将其作为查询运行？

我想你会发现`execute`你的更新做得很好。摆脱电话`query`，你应该没事。

# string - AS3 - 使用另一个变量字符串值的目标变量

> ID：14752285
> 
> 赞同：-1
> 
> 时间：2013-02-07T13:28:27.200
> 
> 标签：string, actionscript-3, variables, target

好的。所以我有一个函数，我通过它传递了一个名为 **objectName**的参数。不，我不知道该怎么做或解释它。就这样吧。

```
public function moveObject(ObjectName):void{

           //objectName now holds "myName" which is an object also

           //i would now like my variable called myNamePosition to equal 10

           //so it would need to grab the value of objectName which is myName:Object.
           //turn it into a string of some kind - myName:string
           //add "Position" to the end of it so its myNamePosition
           // make it equal to 10

           trace(myNamePosition);

    } 
```

传递的函数参数会改变，所以我实际上不能使用“myName”。而是“objectName”。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:37:53.443

例子：

```
package
{
import flash.display.MovieClip;

public class astest extends MovieClip
{
    public function astest()
    {
        init();
    }

    private var myNamePosition:int;
    private function init():void
    {
        moveObject({myName:{}})
    }

    public function moveObject(objectName:Object):void
    {
        var propName:String;
        for(propName in objectName)
            break;
        trace(propName);

        propName+="Position";
        trace(propName);

        this[propName] = 10;

        var propValue:* = this[propName];
        trace(propValue);
    }   
}
} 
```

输出：

```
myName
myNamePosition
10 
```

这是你需要的吗？

# maven - 找不到 hibernate-search-4.2.0.Final.jar 的有效 Maven 存储库

> ID：14752286
> 
> 赞同：0
> 
> 时间：2013-02-07T13:28:33.163
> 
> 标签：maven, jar, hibernate-search

我使用 Maven。

我想用最后一个版本的hibernate-search：4.2.0.Final 我在3.3.0.Final下

我不能为这个版本创建一个有效的 Maven 存储库。

我必须使用哪个 Maven 存储库来获取此版本的休眠搜索？

因为如果你去那里： [https ://repository.jboss.org/nexus/index.html#nexus-search;gav~org.hibernate~hibernate-search~~~~kw,versionexpand](https://repository.jboss.org/nexus/index.html#nexus-search;gav~org.hibernate~hibernate-search~~~~kw,versionexpand)

你会找到我需要的版本，但是当我下载 hibernate-search-4.2.0.Final.jar 并解压缩它时，我看到 jar 中只有 META-INF 文件夹但没有类：jar 无效！

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T14:44:42.793

hibernate-search 项目更改了他们的工件结构以使用 hibernate-search-orm 而不是 hibernate-search。Hibernate-search 现在只是一个 jar，它声明了对 hibernate-search-orm 的依赖，maven 将传递解析并包含在您的项目中。

在此处查看升级说明 - [https://community.jboss.org/wiki/HibernateSearchMigrationGuide](https://community.jboss.org/wiki/HibernateSearchMigrationGuide)

更具体地说，这个注释 - [https://community.jboss.org/wiki/HibernateSearchMigrationGuide#New_jars_Maven_modules_reorganization](https://community.jboss.org/wiki/HibernateSearchMigrationGuide#New_jars_Maven_modules_reorganization)

如果您在 pom 中查找休眠搜索，您将看到依赖项 - 这一切都应该从中央解决，无需任何额外的存储库。

```
<dependency>
    <groupId>${project.groupId}</groupId>
    <artifactId>hibernate-search-orm</artifactId>
    <version>${project.version}</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T14:44:53.080

JBoss 工件的最佳存储库是：[https ://repository.jboss.org/nexus/content/groups/public-jboss/](https://repository.jboss.org/nexus/content/groups/public-jboss/)

可用的存储库在其 wiki 中进行了说明：[https ://community.jboss.org/wiki/MavenRepository](https://community.jboss.org/wiki/MavenRepository)

该组`public-jboss`包含 JBoss 工件所需的所有版本和第三方工件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T13:37:20.193

maven central 还不够好吗？

[http://search.maven.org/#search|ga|1|hibernate-search](http://search.maven.org/#search|ga|1|hibernate-search)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T13:54:51.733

由于这是一个 JBoss 项目，您可以从我们的[Nexus](https://repository.jboss.org/nexus/index.html#welcome)存储库中获取最新版本。[以下](https://community.jboss.org/wiki/MavenGettingStarted-Developers)是如何在您的`~/.m2/settings.xml`. 你`pom.xml`then 应该包含这个依赖。

```
<dependency>
     <groupId>org.hibernate</groupId>
     <artifactId>hibernate-search</artifactId>
     <version>4.2.0.Final</version>
</dependency> 
```

# c# - db.SaveChange(); 异常 - 值不能为空

> ID：14752288
> 
> 赞同：0
> 
> 时间：2013-02-07T13:28:36.610
> 
> 标签：c#, savechanges

在 WPF 应用程序中，我想将数据保存到数据库。

```
db.Pytanias.Add(pyt); //all parameters in pyt has a value
db.SaveChanges(); 
```

何时保存到数据库时出现异常：

```
System.ArgumentNullException was unhandled
  HResult=-2147467261
  Message=Wartość nie może być zerowa. //value connot be null
Nazwa parametru: source
  Source=System.Core
  ParamName=source 
```

这是我的第二个项目，在第一个项目中，我的一切都完全相同，而且它正在工作，但我失去了它。所以我做了第二个相同的项目，我得到了例外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:42:12.183

如果您 100% 确定映射到不可空列的所有属性都已填充；那么这似乎与导航属性有关。

如果`pyt`对象具有一些导航属性，请检查它们是否也正确填充。

# jquery - Cannot get jQuery Backstretch to work on body

> ID：14752304
> 
> 赞同：0
> 
> 时间：2013-02-07T13:29:28.010
> 
> 标签：jquery, jquery-backstretch

[http://getfilming.co.uk/](http://getfilming.co.uk/) is the link. I have put

```
<script type='text/javascript' 
src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js'></script>
<script type='text/javascript' src='/wp-content/img/jquery.backstretch.min.js'></script>
<script type="text/javascript">
  $.backstretch("/wp-content/img/getfilmbg.png");
</script> 
```

just above `</head>` but to no avail!

Any help would be greatly appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:32:21.030

获取[http://getfilming.co.uk/wp-content/themes/Bosky/includes/js/jquery.cycle.all.js?ver=3.5.1](http://getfilming.co.uk/wp-content/themes/Bosky/includes/js/jquery.cycle.all.js?ver=3.5.1) 404（未找到）getfilming.co.uk:10

因为找不到文件 jquery.cycle.all.js，你得到了下一个错误：

未捕获的类型错误：对象 [对象对象] 没有方法“循环”

只需将插件放在那里就可以了

# asp.net - 从代码隐藏按钮单击

> ID：14752306
> 
> 赞同：0
> 
> 时间：2013-02-07T13:29:39.770
> 
> 标签：asp.net, button, modalpopupextender

我有一个列出工具和访问值的网格视图。要进行编辑，我在每一行都有一个编辑图像按钮。我有一个 OnRowBound 方法，它为每个按钮分配一个 OnClick 属性，以便我知道我需要编辑哪个记录。代码是

```
 Protected Sub ChangeFirstRowIcon(ByVal Sender As Object, ByVal e As GridViewRowEventArgs) Handles gv_AccessRights.RowDataBound

    'This sub fires on each gridview row created...
    'It first checks that the row is a data row (as opposed to Header, Footer etc.)
    'If ib_Edit is true then change add an attribut to button with aid, tid and ac values attached.

    If e.Row.RowType = DataControlRowType.DataRow Then

        Dim ib_Edit As ImageButton = e.Row.FindControl("ib_Edit")
        Dim lb_AccessID As Label = e.Row.FindControl("lb_AccessID")
        Dim hd_ToolID As HiddenField = e.Row.FindControl("hd_ToolID")
        Dim hd_AccessCode As HiddenField = e.Row.FindControl("hd_AccessCode")

        If ib_Edit IsNot Nothing Then
            ib_Edit.Attributes.Add("onClick", "proxyClick('" & lb_AccessID.Text & "', '" & hd_ToolID.Value & "', '" & hd_AccessCode.Value & "')")
        End If

    End If

End Sub 
```

我正在使用隐藏的代理按钮来显示一个模式弹出窗口，用户将使用它来编辑记录......（相同的弹出窗口将用于添加新的访问记录......但稍后会出现）。因此，在将我的详细信息传递给 proxyClick 之后，我将值设置为模式弹出窗口中的控件。javascript是....

```
 <script type="text/javascript">
    function proxyClick(aid, tid, ac) {
        document.getElementById('hd_AccessID').value = aid;
        document.getElementById('hd_ToolIDMod').value = tid;
        document.getElementById('hd_AccessCodeMod').value = ac;
        document.getElementById('but_SetModalDetails').click();
    }
    </script> 
```

作为参考，标记的主要部分是....

```
<table class="border">
    <tr>
        <td>
            <asp:Button ID="but_SetModalDetails" runat="server" Style="display: none" Text="Set modal details" ClientIDMode="Static" UseSubmitBehavior="true" />
            <asp:Button ID="but_HiddenProxy" runat="server" Style="display: none" Text="Hidden Proxy Button for Modal Popup" ClientIDMode="Static" />
        </td>
        <td class="rt">
        <asp:Button ID="but_AddTool" runat="server" AccessKey="A" CssClass="butGreen" Text="Add Tool" ToolTip="Add Tool - Alt A" />
        </td>
    </tr>
</table>

<asp:ModalPopupExtender ID="mpx_AddEditAccess" runat="server" CancelControlID="but_Cancel"
    BehaviorID="pn_AddEditAccess" PopupControlID="pn_AddEditAccess" TargetControlID="but_HiddenProxy"
    BackgroundCssClass="modalBackground" />
<asp:Panel ID="pn_AddEditAccess" runat="server" Width="500px" CssClass="modalPopup"
    Style="display: block">
    <div class="box">
        <h2>
            <asp:Label ID="lb_ModTitle" runat="server"></asp:Label>
        </h2>
        <asp:HiddenField ID="hd_AccessID" runat="server" ClientIDMode="Static"></asp:HiddenField>
        <div class="block">
            <asp:UpdatePanel ID="up_Access" runat="server" UpdateMode="Always">
                <Triggers>
                    <asp:AsyncPostBackTrigger ControlID="ddl_ToolName" EventName="SelectedIndexChanged" />
                </Triggers>
                <ContentTemplate>
                    <table>
                        <tr>
                            <th class="p66 rt">
                                Tool Name:&nbsp;
                            </th>
                            <td class="p66">
                                <asp:HiddenField ID="hd_ToolIDMod" runat="server" ClientIDMode="Static" />
                                <asp:DropDownList ID="ddl_ToolName" runat="server" AutoPostBack="true" AppendDataBoundItems="True"
                                    DataSourceID="SqlDS_Tools" DataTextField="ToolName" DataValueField="ToolID" OnSelectedIndexChanged="ddl_ToolName_SIC">
                                    <asp:ListItem Text="Please Select..." Value="0"></asp:ListItem>
                                </asp:DropDownList>
                                <asp:SqlDataSource ID="SqlDS_Tools" runat="server" ConnectionString="<%$ ConnectionStrings:ToolsConnString %>"
                                    SelectCommand="SELECT [ToolID], [ToolName] FROM [tbl_Tools] WHERE ([Redundant] = @Redundant)">
                                    <SelectParameters>
                                        <asp:Parameter DefaultValue="False" Name="Redundant" Type="Boolean" />
                                    </SelectParameters>
                                </asp:SqlDataSource>
                                <asp:RequiredFieldValidator ID="rfv_ddl_ToolName" runat="server" ControlToValidate="ddl_ToolName"
                                    CssClass="error" Display="Dynamic" ErrorMessage="Please Select Tool Name" InitialValue="0">
                                </asp:RequiredFieldValidator>
                            </td>
                        </tr>
                        <tr>
                            <th class="p66 rt">
                                Access Rights:&nbsp;
                            </th>
                            <td class="p66">
                                <asp:HiddenField ID="hd_AccessCodeMod" runat="server" ClientIDMode="Static" />
                                <asp:DropDownList ID="ddl_AccessCode" runat="server" Enabled="false">
                                    <asp:ListItem Text="No Access" Value="0"></asp:ListItem>
                                </asp:DropDownList>
                            </td>
                        </tr>
                        <tr>
                            <td class="p66">
                                <asp:Button ID="but_Cancel" runat="server" Text="Cancel" />
                            </td>
                            <td class="p66 rt">
                                <asp:Button ID="but_Save" runat="server" Text="Save" />
                            </td>
                        </tr>
                    </table>
                </ContentTemplate>
            </asp:UpdatePanel>
        </div>
    </div>
</asp:Panel> 
```

如您所见，我实现了两个隐藏按钮 but_SetModalDetails 和 but_HiddenProxy。但是_SetModalDetails 有一些代码隐藏，它设置了几个下拉列表（一个从数据源填充，另一个根据第一个的值动态填充。代码隐藏是......

```
 Protected Sub but_SetModalDetails_Click(ByVal sender As Object, ByVal e As EventArgs) Handles but_SetModalDetails.Click

    If hd_AccessID.Value = "0" Then
        lb_ModTitle.Text = "Assigning Access Rights to:"
        ddl_ToolName.SelectedIndex = 0
        ddl_AccessCode.SelectedIndex = 0
        ddl_AccessCode.Enabled = False
    Else
        lb_ModTitle.Text = "Edit Access Rights to:"
        ddl_ToolName.SelectedValue = hd_ToolIDMod.Value
        ddl_ToolName.Enabled = False
        SqlStr = "SELECT AccessID AS ddlValue, AccessText as ddlText FROM tbl_AccessCodes WHERE ToolID = " & hd_ToolIDMod.Value
        PopulateDDLvalue(ddl_AccessCode, SqlStr)
        ddl_AccessCode.SelectedValue = hd_AccessCodeMod.Value
        ddl_AccessCode.Enabled = True
    End If

    'NOW I NEED TO SIMULATE but_HiddenProxy Click

End Sub 
```

正如您在最后看到的，我需要模拟对 but_HiddenProxy 的单击，以便显示 modalPopup 填充了正确的数据。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:32:27.450

毕竟......我能够在代码隐藏中做所有事情......

我只需要一个隐藏按钮 but_HiddenProxy。

在 gridview 中，我没有为每个编辑图像按钮设置 onClick 属性，而是设置了一个命令名“AccessEdit”（不要使用“Edit”）。然后我有一个处理 gridview.RowCommand 事件的方法。这通过在所选行上使用 findControl 找到了我需要的各种信息。然后使用这些值填充弹出窗口中的下拉菜单，然后使用 show 命令使弹出窗口可见。

让我难过一阵子的一点是，为什么单击图像按钮时我的 RowCommand 没有触发。我忘记了我在阻止执行 RowCommand 的模式中进行了验证。我在图像按钮中粘贴了一个 CausesValidation="false" ，一切正常。

谈论用锤子敲碎坚果！

# javascript - 使用要查找的键数组和要替换的数组值查找和替换

> ID：14752308
> 
> 赞同：0
> 
> 时间：2013-02-07T13:29:44.957
> 
> 标签：javascript, jquery, regex, arrays, replace

我在 jQuery 中写了以下内容：

```
$(document).ready(function() {

    var wordlist = new Array();
    wordlist['BioResource'] = 'Bio Resource is a lorem';

    var array_length = wordlist.length;

    for(var key in wordlist) {
        $("p").html(function(index, value) {

            return value.replace(new RegExp("\b(" + key + ")\b", "gi"), '<a href="#" class="test" title="'+wordlist[key]+'">$1</a>');

        });
    }

}); 
```

它应该（但不）循环遍历 wordlist 数组，并且对于每个键，尝试在任何段落标签中找到该单词并将其替换为自身，但将其包装在带有数组适当值的标题标签的锚点中那把钥匙。

我究竟做错了什么？

如果我从中删除数组方面并直接输入键和值，则正则表达式本身正在工作，如下所示：

```
return value.replace(/\b(BioResource)\b/gi, '<a href="#" class="test" title="'+wordlist['BioResource']+'">$1</a>'); 
```

在此先感谢您的帮助。

保罗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:32:34.223

改变这个：

```
"\b(" + key + ")\b" 
```

对此：

```
"\\b(" + key + ")\\b" 
```

`\b`在字符串文字中表示退格字符。即使它没有任何特殊含义，要`\`在字符串中指定，您也需要对其进行转义：`\\`. 否则，`\`只会蒸发，或者会抛出语法错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:53:12.110

你可以把它转过来，替换你能找到的任何单词。这样，您只需遍历每个段落文本一次即可执行实际替换。

此解决方案查找每个段落中的所有单词，使用`(\w+)`并查看内容是否与您的`wordlist`对象匹配。当找到它时，它会进行替换，如果没有，它将不理会该词。

```
$('p').html(function(index, old) {
  return old.replace(/(\w+)/g, function($0, $1) {
        return wordlist[$1] || $0;
    });
}); 
```

# sql - SELECT distinct 给出错误的计数

> ID：14752309
> 
> 赞同：0
> 
> 时间：2013-02-07T13:29:52.880
> 
> 标签：sql, select, postgresql-9.2

我有一个问题，我`count(*)`将在过滤不同的行之前返回行数。

这是我的查询的简化版本。请注意，我将从表中提取许多其他数据，因此`group by`不会返回相同的结果，因为我可能必须按 10 列进行分组。它的工作方式`m`是映射映射`q`，`c`因此`kl`可以有多个对`q.id`. 我只想要一个。

```
SELECT distinct on (q.id) count(*) over() as full_count
from q, c, kl, m 
where c.id = m.chapter_id
    and q.id = m.question_id
    and q.active = 1
    and c.class_id = m.class_id
    and kl.id = m.class_id
order by q.id asc 
```

如果我运行它，我会得到`full_count = 11210`它只返回 9137 行。如果我在没有 的情况下运行它`distinct on (q.id)`，则 (q.id) 上的 distinct 确实是行数。

因此，计数函数似乎无权访问过滤后的行。我该如何解决这个问题？我需要重新考虑我的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:40:44.003

我不完全确定您到底要计算什么，但这可能会让您入门：

```
select id, 
       full_count,
       id_count
from (
    SELECT q.id, 
           count(*) over() as full_count,
           count(*) over (partition by q.id) as id_count,
           row_number() over (partition by q.id order by q.id) as rn
    from q
      join m on q.id = m.question_id
      join c on c.id = m.chapter_id and c.class_id = m.class_id
      join kl on kl.id = m.class_id
    where q.active = 1
) t
where rn = 1
order by q.id asc 
```

如果您需要*每个 id*的计数，那么该列`id_count`就是您需要的。如果您需要总体计数，但仅在每个 id 的行上，那么这`full_count`可能就是您想要的。

（请注意，我重写了您的隐式连接语法以使用显式连接）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:33:15.960

你可以使用子查询：

```
select qid, count(*) over () as full_count
from (SELECT distinct q.id
      from q, c, kl, m 
      where c.id = m.chapter_id
            and q.id = m.question_id
            and q.active = 1
            and c.class_id = m.class_id
            and kl.id = m.class_id
     ) t
order by q.id asc 
```

但这`group by` *是*正确的方法。`distinct`in的关键字`select`实际上只是对所有非聚合功能列进行分组的语法糖。

# javascript - Backbone：试图弄清楚基本的控制流程，有人可以告诉我这是否合理吗？

> ID：14752311
> 
> 赞同：0
> 
> 时间：2013-02-07T13:29:53.397
> 
> 标签：javascript, backbone.js, javascriptmvc

我正在构建一个带有搜索表单和一些结果的简单 Backbone 应用程序。我想：

*   允许用户更改“order by”选择字段的值，并适当地更新 URL 和结果
*   确保当用户通过预设 URL 到达时，显示正确的结果，并且所选表单元素与 URL 和结果匹配。

我想我已经找到了正确的控制流程来使用，但我真的很想找人检查一下。基本上，我让我的视图直接更新 URL，然后路由器完成更新模型的工作。然后其他视图听模型。

好像还可以，但是我得在View中手动构造URL，在Router中再解析一遍，感觉是重复的。所以很高兴知道这是否是在 Backbone 中做事的正确方法，或者我是否可以做得更好。

这是伪代码：

```
 User changes value of select to "price-asc"    
           |                                        
           |                                        
           v                                        
 Form view hears change event, and              
 updates the URL to #order-by-price-asc            
           |                                       
           |                                       
           v                                       
 Router looks at new route,        <----- User loads page, with 
  sets model value                       #order-by-price-asc route
           |
           |
           v   
  Results view hears change 
  to model value, loads in 
  new results via Ajax 
```

这是代码：

HTML：

```
<select id="order">
    <option value=''></option>
    <option value='price-asc'>price (low to high)</option>
    <option value='price-desc'>price (high to low)</option>
</select>
<div id="results"></div> 
```

JS：

```
var SearchModel = Backbone.Model.extend({
    initialize: function() {
        this.bind("change:query", function() {
        this.performSearch();
        });
    },
    performSearch: function() {
        // Will eventually do Ajax search here, 
        // but for the moment, just bind to query. 
        this.set("results", this.get("query"));
    },
});

var SearchFormView = Backbone.View.extend({
    el: $('#order'),
    events: {
        "change": "updateURL"
    },
    initialize: function() {
        this.model.on("change:results", this.updateFormClasses, this);
    },
    updateFormClasses: function(model, query) {
        this.$el.val(query);
    },
    updateURL: function(e) {
        var url = '';
        ($('#order').val() !== '') ? url += "/by-" + $('#order').val() : null;
        SearchApp.navigate(url, {trigger: true});
    }
});

var SearchResultsView = Backbone.View.extend({
    el: "#results",
    initialize: function() {
        this.model.on("change:results", this.displayResults, this);
    },
    displayResults: function(model, query) {
        this.$el.text(query)
    }
});

var AppRouter = Backbone.Router.extend({
    routes: {
    "*str": "index",
    },
    initialize: function() {
        this.searchModel = new SearchModel();
        this.searchFormView = new SearchFormView({
            model: this.searchModel
        });
        this.searchResultsView = new SearchResultsView({
            model: this.searchModel
        });
    },
    index: function(str) {
        var ordering = str.match(/by-.*/gi);
        if (ordering !== null) {
            this.searchModel.set({"query": ordering[0].replace('by-','')});
        }
    }
});
var SearchApp = new AppRouter();
Backbone.history.start({}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:06:41.110

您可以做的优化很少：

1.  使用可选的路由参数而不是手动解析 url：

    ```
    var AppRouter = Backbone.Router.extend({
        routes: {
          "*str(/by-:sort)": "index",
        },
        index: function(str, sort) {
          if(sort) {
            //...
          }
        }
    }); 
    ```

2.  考虑允许视图处理模型更改，而不是通过路由器。为了避免代码重复，将此逻辑封装在模型方法中。

    ```
    var SearchModel = Backbone.Model.extend({
      sort: function(field) {
        this.set({query:field});
      }
    });

    var SearchFormView = Backbone.View.extend({
      el:"#order",
      events: {
        "change": "updateSort"
      },
      updateSort: function(e) {
        var sortOrder = this.$el.val();

        //update model
        this.model.sort(sortOrder);

        //navigate without trigger:true, will update the URL but not trigger route
        SearchApp.navigate(sortOrder ? "/by-" + sortOrder : "");
      }
    }    

    var AppRouter = Backbone.Router.extend({
        index: function(str, sort) {
          if(sort) {
            this.searchModel.sort(sort);
          }
        }
    }); 
    ```

另请注意，我将`view.el`声明更改为, 并使用而不是 jQuery 选择器来`#order`引用元素。`this.$el`这些是不相关的，但仍然是最佳实践。

# c++ - Failure to build with Boost regex

> ID：14752313
> 
> 赞同：2
> 
> 时间：2013-02-07T13:29:56.457
> 
> 标签：c++, regex, boost

I am quite new to C++ and I was trying to learn regular expressions using the Boost library. I am trying the following simple code.

```
#include <cstdlib>
#include <iostream>
#include <cstring>
#include <boost/regex.hpp>

using namespace std;
using namespace boost;

/*
 * 
 */
int main()
{
    const regex expression( "How to re" );

    string string1 = "How to re";

    bool match=regex_match(string1,expression);

    if (match){
        cout<<"Yes"<<endl;
    }

    return 0;
} 
```

The problem is that a huge error is flagged when I try to run the file from the terminal. The error flagged is the following:

```
Undefined symbols:
  "boost::re_detail::get_mem_block()", referenced from:
      boost::re_detail::save_state_init::save_state_init(boost::re_detail::saved_state**, boost::re_detail::saved_state**)in ccqa7fIw.o
      boost::re_detail::perl_matcher<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::extend_stack()in ccqa7fIw.o
  "boost::match_results<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > > >::maybe_assign(boost::match_results<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > > > const&)", referenced from:
      boost::re_detail::perl_matcher<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::match_match()in ccqa7fIw.o
  "boost::re_detail::get_default_error_string(boost::regex_constants::error_type)", referenced from:
      boost::re_detail::cpp_regex_traits_implementation<char>::error_string(boost::regex_constants::error_type) constin ccqa7fIw.o
      boost::re_detail::cpp_regex_traits_implementation<char>::error_string(boost::regex_constants::error_type) constin ccqa7fIw.o
  "boost::re_detail::put_mem_block(void*)", referenced from:
      boost::re_detail::perl_matcher<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::unwind_extra_block(bool)in ccqa7fIw.o
      boost::re_detail::save_state_init::~save_state_init()in ccqa7fIw.o
  "boost::re_detail::raise_runtime_error(std::runtime_error const&)", referenced from:
      void boost::re_detail::raise_error<boost::regex_traits_wrapper<boost::regex_traits<char, boost::cpp_regex_traits<char> > > >(boost::regex_traits_wrapper<boost::regex_traits<char, boost::cpp_regex_traits<char> > > const&, boost::regex_constants::error_type)in ccqa7fIw.o
  "boost::re_detail::perl_matcher<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::construct_init(boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > > const&, boost::regex_constants::_match_flags)", referenced from:
      boost::re_detail::perl_matcher<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::perl_matcher(__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, __gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, boost::match_results<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > > >&, boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > > const&, boost::regex_constants::_match_flags, __gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >)in ccqa7fIw.o
  "boost::re_detail::cpp_regex_traits_implementation<char>::transform_primary(char const*, char const*) const", referenced from:
      boost::cpp_regex_traits<char>::transform_primary(char const*, char const*) constin ccqa7fIw.o
  "boost::re_detail::cpp_regex_traits_implementation<char>::transform(char const*, char const*) const", referenced from:
      boost::cpp_regex_traits<char>::transform(char const*, char const*) constin ccqa7fIw.o
  "boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::do_assign(char const*, char const*, unsigned int)", referenced from:
      boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::assign(char const*, char const*, unsigned int)in ccqa7fIw.o
  "boost::re_detail::verify_options(unsigned int, boost::regex_constants::_match_flags)", referenced from:
      boost::re_detail::perl_matcher<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::find_imp()in ccqa7fIw.o
  "boost::re_detail::perl_matcher<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::find()", referenced from:
      bool boost::regex_search<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >, char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >(__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, __gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, boost::match_results<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > > >&, boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > > const&, boost::regex_constants::_match_flags, __gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >)in ccqa7fIw.o
ld: symbol(s) not found
collect2: ld returned 1 exit status 
```

I really cannot understand what is going on here; I was also looking at examples of regex codes from other threads but couldn't find any solution. Can you please help me? Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:36:59.853

您不与 Boost 正则表达式库*链接*，它不仅是标题，而且还有一个您必须链接的库。

尝试

```
$ c++ -I $PATH/boost_1_52_0 filename.cpp -o filename -L$PATH/to/libraries -lboost_regex 
```

您还必须设置库的路径，因为您似乎使用了自定义构建的 Boost。

# ember.js - 如何在新（ember-1.0.0-pre.4）版本中按名称调用控制器方法

> ID：14752314
> 
> 赞同：2
> 
> 时间：2013-02-07T13:30:06.533
> 
> 标签：ember.js

我使用 Ember.ready 函数添加了一些像这样的键盘绑定[https://github.com/greggyNapalm/firebat-overlord/blob/master/web_static/static/js/app/app.js#L24](https://github.com/greggyNapalm/firebat-overlord/blob/master/web_static/static/js/app/app.js#L24)有没有合适的方法在新版本中执行此操作，询问因为不能再按其名称调用方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:01:15.613

做这种事情的最好的地方是从视图中。根据您的示例，这种情况下的适当视图可能是 TestsView。在插入/删除视图时，您可以从那里绑定和取消绑定键盘绑定。例如：

```
var TestsView = Ember.View.extend({
    templateName:  'testsTemplate',
    didInsertElement: function() {
       console.log("Controller: " + this.get('controller').toString());
       var self = this;
       Mousetrap.bind('ctrl+right', function() {

         self.get('controller').goToPage('next');
       });
    },
    wilLRemoveElement: function() {
       Mousetrap.unbind('ctrl+right');
    }
}); 
```

要查看控制器设置的内容，请尝试添加`console.log("Controller: " + self.get('controller').toString());`

# testing - Automated USB Device Testing

> ID：14752318
> 
> 赞同：1
> 
> 时间：2013-02-07T13:30:16.347
> 
> 标签：testing, usb, automated-tests, qa

Is there a solution for automated usb device testing? We're having an USB Device which is an Smartcard reader and USB Stick in one device. We want to test certain situations to figure out what happens if for example the stick gets plugged in and out in a specific time range.

We are thinking about an USB Cable which is controllable over an separate USB connection (Y-Cable).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T03:15:04.287

我曾在几家公司从事 USB 开发工作。我无法使用市售产品来模拟连接和分离，但以下是我们测试的一些方法：

*   USBCV + 金树 - USBCV 非常脆弱但免费。这也是徽标合规性所必需的。您可能需要一个专用站点来进行此测试，并且只允许一个人触摸。
*   USB 演示板 - 便宜的演示板可让您快速制作不同硬件配置文件的原型。它对于测试您的 USB 主机与不合规、恶意或难以获取的设备非常有用。
*   协议分析器 - 分析器允许您检测一些容忍主机消耗但违反标准的错误。我推荐 Total Phase 品牌。
*   定时器 + 机械继电器开关 - 您可以使用您最喜欢的 555 等效定时器组装一个便宜的自动连接/分离电路。USB就像飞一样。当你在空中时，你可能会没事的。起飞和降落，或附着和分离，是可怕的。对于仅出现 0.1% 的错误，这是一个非常有用的工具。
*   电流表 - 确保您不会过度使用公共汽车。
*   USB 眼图测试 - 确保您的信号看起来不错。您还可以通过在分析器中查找数据包错误来获得近似值。
*   手动测试——你可以在很大程度上实现自动化，但在某些时候你需要一个人来测试。

    如果您在不同的配置下测试上述内容（确保您尝试了各种集线器），您将有一个良好的开端。

# javascript - 将 HTTP 基本身份验证标头添加到 Backbone.js 同步函数可防止模型在 Save() 时更新

> ID：14752326
> 
> 赞同：5
> 
> 时间：2013-02-07T13:30:44.513
> 
> 标签：javascript, backbone.js, http-headers, cherrypy, basic-authentication

我正在开发一个 Web 应用程序，该应用程序由使用 Python 的 CherryPy 框架编写的 restful API 提供支持。我开始使用 jQuery 和服务器端模板的组合来编写用户界面，但最终切换到 Backbone.js，因为 jQuery 失控了。

不幸的是，我在让我的模型与服务器同步时遇到了一些问题。这是我的代码中的一个简单示例：

```
$(function() {
    var User = Backbone.Model.extend({
        defaults: {
            id: null,
            username: null,
            token: null,
            token_expires: null,
            created: null
        },

        url: function() {
            return '/api/users';
        },

        parse: function(response, options) {
            console.log(response.id);
            console.log(response.username);
            console.log(response.token);
            console.log(response.created);
            return response;
        }
    });

    var u = new User();
    u.save({'username':'asdf', 'token':'asdf'}, {
        wait: true,
        success: function(model, response) {
            console.log(model.get('id'));
            console.log(model.get('username'));
            console.log(model.get('token'));
            console.log(model.get('created'));
        }
    });
}); 
```

正如您可能知道的那样，这里的想法是向该服务注册一个新用户。当我打电话时`u.save();`，Backbone 确实向服务器发送了一个 POST 请求。以下是相关位：

**要求：**

```
Request URL: http://localhost:8080/api/users
Request Method: POST
Request Body: {"username":"asdf","token":"asdf","id":null,"token_expires":null,"created":null} 
```

**回复：**

```
Status Code: HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 109
Response Body: {"username": "asdf", "created": "2013-02-07T13:11:09.811507", "token": null, "id": 14, "token_expires": null} 
```

如您所见，服务器成功处理了请求并返回了`id`和 的值`created`。但是由于某种原因，当我的代码调用时`console.log(u.id);`，我得到`null`了，当我的代码调用时`console.log(u.created);`，我得到了`undefined`.

**tl;dr**：为什么 Backbone.js 在调用后不持久更改我的对象`save()`？

**编辑：** 我修改了上面的代码，以便在`success`回调中使用 get 函数访问模型属性。这应该可以解决原始代码的任何并发问题。

我还在模型的`parse`功能中添加了一些控制台日志记录。奇怪的是，每一个都是`undefined`......这是否意味着 Backbone.js 无法解析我的响应 JSON？

**编辑 2：** 几天前，我发现这个问题实际上是一个自定义标头，我添加到每个请求中以启用 HTTP 基本身份验证。有关详细信息，请参阅[此答案](https://stackoverflow.com/a/15003301/591374)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:34:56.720

这段代码：

```
u.save();
console.log(u.id);
console.log(u.username);
console.log(u.token);
console.log(u.created); 
```

立即运行......之后没有任何东西可以运行，排队的 ajax 请求开始。然后响应会稍晚一些，并且只有在那个时候值才会改变。

这些属性似乎也不是直接在对象上，但是保存的异步处理仍然存在，即使您将代码更正为拥有`console.log(u.get("id"))`等，您也不会得到预期的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T13:20:03.100

我弄清楚了这个问题，尽管我仍然无法解释*为什么*这是一个问题。我正在构建的 Web 应用程序有一个身份验证过程，该过程需要一个 HTTP 基本身份验证标头与所有请求一起传递。

为了使这项工作与 Backbone 一起工作，我重写了 Backbone.sync 函数并更改了[第 1398 行](https://github.com/documentcloud/backbone/blob/master/backbone.js#L1398)以添加标题。

**原始代码：**

```
var params = {type: type, dataType: 'json'}; 
```

**修改代码：**

```
var params = {
    type: type,
    dataType: 'json',
    headers: {
        'Authorization': getAuthHash()
    }
}; 
```

函数 getAuthHash() 只返回一个表示适当身份验证信息的 Base64 字符串。

出于某种原因，添加此标头会使同步/保存功能失败。如果我把它拿出来，一切都会如你所愿。

赏金仍然是开放的，我很乐意将它奖励给任何能够解释为什么会这样并提供问题解决方案的人。

**编辑：**

看起来问题是我将标头添加到请求的方式。[Github 上](https://github.com/fiznool/backbone.basicauth)有一个不错的小 JavaScript 库，它通过正确添加 HTTP Basic Auth 标头解决了这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T05:54:58.537

我已经测试了你的代码，它对我来说很好。

在此处查看演示，`jsfiddle.net/yxkUD/`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T14:45:16.113

尝试将自定义 beforeSend 方法添加到 ajax 请求以添加自定义标头。

例如： [https ://github.com/documentcloud/backbone/blob/master/backbone.js#L1424](https://github.com/documentcloud/backbone/blob/master/backbone.js#L1424)

# django - How can i redirect from one domain to another in django app?

> ID：14752340
> 
> 赞同：6
> 
> 时间：2013-02-07T13:31:38.457
> 
> 标签：django, redirect

Normally i would do it with `.htaccess` but django doesn't have it.

So what is the best way and what is the code for it to redirect from www.olddomain.com to www.newdomain.com?

NOTE: we are not using Apache, but Gunicorn

thanx!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T13:53:20.830

最好的方法仍然是使用您的 Web 服务器而不是 Django。这将比使用 Django 更快、更高效。

查看[此问题](https://stackoverflow.com/questions/2285879/how-do-i-redirect-domain-com-to-www-domain-com-under-django)以获取更多信息。

更新

如果您真的想在 django 中执行此操作，请编辑您的 url conf 文件（管理[django 的 url 调度](https://docs.djangoproject.com/en/1.4/topics/http/urls/)程序）以在顶部包含以下内容 -

```
from django.views.generic.simple import redirect_to

urlpatterns = patterns('',   
    (r'^.*$', redirect_to, {'url': 'http://www.newdomain.com'}),
) 
```

有关更多信息，请查看[文档](https://docs.djangoproject.com/en/1.4/ref/generic-views/#django-views-generic-simple-redirect-to)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T13:40:10.157

```
import urlparse
from django.http import HttpResponseRedirect

domain = request.GET['domain'] 
destination = reverse('variable_response',args=['Successful'])
full_address = urlparse.urljoin(domain, destination)
return HttpResponseRedirect(full_address) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-25T13:33:29.287

我遇到了同样的问题，所以我写了这个，它对我来说非常有效，也许其他人也需要它：

```
urlpatterns += [  # redirect to media server with same path
url(r'^media/', redirectMedia),
] 
```

并使用此功能重定向：

```
from urllib.request import urlopen
from django.http import HttpResponse
def redirectMedia(request):
    x = urlopen("http://www.newdomain.com" + request.path)
    return HttpResponse(x.read()) 
```

好好享受！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-02T04:43:42.447

对于 Django >= `2.0`，更简单的解决方案是使用[RedirectView](https://docs.djangoproject.com/en/3.1/ref/class-based-views/base/#redirectview)

例如在`urls.py`：

```
from django.views.generic.base import RedirectView

urlpatterns = [
    path('my_ext_uri', RedirectView.as_view(url='https://YOUR_EXTERNAL_URL')),
] 
```

[边注]

正如 Aidan 的回答中提到的，最好重定向将由 Web 服务器网关上的不同服务处理的请求，而不是在（Python/Django）应用程序服务器上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T14:56:54.650

我最终使用 heroku 并旋转了 1 个网络测功机（这是免费的）。

```
#views.py
def redirect(request):
    return render_to_response('redirect.html')

#redirect.html
<html>
<head>
<title>Blah</title>
<meta http-equiv="refresh" content="1;url=http://www.example.com">
</head>
<body>
<p>
Redirecting to our main site. If you're not redirected within a couple of seconds, click here:<br />
<a href="http://www.example.com">example.com</a>
</p>
</body>
</html> 
```

就那么简单。[可以在此处](http://webmaster.iu.edu/tools-and-guides/maintenance/redirect-meta-refresh.phtml)找到相同的示例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-28T14:59:57.540

更新到 Python 3 的[凯瑟琳](https://stackoverflow.com/users/2008506/catherine)答案的替代方案是：

```
from django.contrib.sites.shortcuts import get_current_site
from urllib.parse import urljoin
from django.http import HttpResponseRedirect

NEW_DOMAIN = 'www.newdomain.com' 
```

放入每个`view`：

```
def myView(request, my_id):
    if request.META['HTTP_HOST'] != NEW_DOMAIN:
        # remove the args if not needed
        destination = reverse('url_tag', args=[my_id])
        full_address = urljoin(DOMAIN, str(destination))
        return HttpResponseRedirect(full_address)
    # your view here 
```

`url_tag`是 中定义的`urlpatterns`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-03T21:39:48.160

我以简单的解决方案结束：

```
return HttpResponse(f"<script>location.replace('https://example.com/');</script>") 
```

如果用户不禁用 webbrowser 中的脚本，它会起作用

# wpf - Style not works with Application Commands

> ID：14752343
> 
> 赞同：0
> 
> 时间：2013-02-07T13:31:47.090
> 
> 标签：wpf, wpf-controls, command

I have MenuItem List and using the ApplicationCommnds like cut,copy,paste.I want to do some thing when Command is disable.But style not working on it.Default behaviour of ApplicationCommand is ii automatically set the foregroud grey if it disable.But it not working in my case.So i explicitly try to set it.

```
<TextBox x:Name="AssignmentTextBox" >
    <TextBox.ContextMenu>
        <ContextMenu Background="White">
            <MenuItem Command="ApplicationCommands.Undo" Style="StaticResource _MenuItem}"/>                                 
            <Separator />
            <MenuItem Command="ApplicationCommands.Cut"   Style="{StaticResource _MenuItem}"/>
            <MenuItem Command="ApplicationCommands.Copy"  Style="{StaticResource _MenuItem}" />
            <MenuItem Command="ApplicationCommands.Paste"  Style="{StaticResource _MenuItem}"/>                                    
            <Separator  />
            <MenuItem Command="ApplicationCommands.SelectAll"  Style="{StaticResource _MenuItem}"/>
        </ContextMenu>
    </TextBox.ContextMenu>
</TextBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:58:22.510

知道了。您在为第一个 MenuItem 设置 Style 属性的值时错过了括号**{ 。**

**怎么了**

```
<MenuItem Command="ApplicationCommands.Undo" Style="StaticResource _MenuItem}"/> 
```

**什么是对的**

```
<MenuItem Command="ApplicationCommands.Undo" Style="{StaticResource _MenuItem}"/> 
```

[已编辑]**在下面的测试用例中，启用的 MenuItems 将为绿色，禁用的 MenuItems 将为红色。希望这将帮助您解决您的问题**

```
<ContextMenu Background="White">
       <ContextMenu.Resources>
            <Style x:Key="_MenuItem1" TargetType="{x:Type MenuItem}">
                   <Style.Triggers>
                          <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsEnabled}" Value="false">
                              <Setter Property="Foreground" Value="Red"/>
                          </DataTrigger>
                          <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsEnabled}" Value="True">
                              <Setter Property="Foreground" Value="Green"/>
                          </DataTrigger>
                    </Style.Triggers>
            </Style>
      </ContextMenu.Resources>
      <MenuItem Command="ApplicationCommands.Undo" Style="{StaticResource _MenuItem1}"/>
      <Separator />
      <MenuItem Command="ApplicationCommands.Cut"   Style="{StaticResource _MenuItem1}"/>
      <MenuItem Command="ApplicationCommands.Copy"  Style="{StaticResource _MenuItem1}" />
      <MenuItem Command="ApplicationCommands.Paste"  Style="{StaticResource _MenuItem1}"/>
      <Separator  />
      <MenuItem Command="ApplicationCommands.SelectAll"  Style="{StaticResource _MenuItem1}"/>
  </ContextMenu> 
```

**截屏**

![在此处输入图像描述](../Images/7410d3ea43303eca26d70322441e906a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:47:51.777

似乎您已经更改了 MenuItem 模板或覆盖了前景，因此 CommandCan 执行无法更新正确的视觉元素以呈现为“禁用”，应该是灰色。

所以我想知道您是否可以使用键 _MenuItem 向我们展示模板或您的样式，也许我们可以判断您的情况出了什么问题。

# linux - sed如何删除文件中的前17行和后8行

> ID：14752348
> 
> 赞同：9
> 
> 时间：2013-02-07T13:32:11.590
> 
> 标签：linux, bash, sed, text-processing

我有一个 150GB 的大文件 CSV 文件，我想删除前 17 行和最后 8 行。我尝试了以下方法，但似乎无法正常工作

```
sed -i -n -e :a -e '1,8!{P;N;D;};N;ba' 
```

和

```
sed -i '1,17d' 
```

我想知道是否有人可以帮助 sed 或 awk，一个班轮会很棒吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-07T13:36:28.777

`head`并且`tail`比`sed`或更适合这项工作`awk`。

```
tail -n+18 file | head -n-8 > newfile 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-07T13:46:02.047

```
awk -v nr="$(wc -l < file)" 'NR>17 && NR<(nr-8)' file 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T01:31:14.087

所有 awk：

```
awk 'NR>y+x{print A[NR%y]} {A[NR%y]=$0}' x=17 y=8 file 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T13:37:41.377

```
Try this :

sed '{[/]<n>|<string>|<regex>[/]}d' <fileName>       
sed '{[/]<adr1>[,<adr2>][/]d' <fileName> 
```

在哪里

1.  /.../=分隔符

2.  n = 行号

3.  string = 在行中找到的字符串

4.  regex = 对应于搜索模式的正则表达式

5.  addr = 行的地址（数字或模式）

6.  d = 删除

参考这个[链接](http://en.kioskea.net/faq/1451-sed-delete-one-or-more-lines-from-a-file)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T13:37:21.893

```
LENGTH=`wc -l < file`
head -n $((LENGTH-8)) file | tail -n $((LENGTH-17)) > file 
```

编辑：正如 mtk 在评论中发布的那样，这不起作用。如果您想使用`wc`和跟踪文件长度，您应该使用：

```
LENGTH=`wc -l < file`
head -n $((LENGTH-8)) file | tail -n $((LENGTH-8-17)) > file 
```

或者：

```
LENGTH=`wc -l < file`
head -n $((LENGTH-8)) file > file
LENGTH=`wc -l < file`
tail -n $((LENGTH-17)) file > file 
```

是什么让这个解决方案没有 choroba 发布的那么优雅:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T14:17:33.870

我今天为 shell 学到了这一点。

```
{
  ghead -17  > /dev/null
  sed -n -e :a -e '1,8!{P;N;D;};N;ba'
} < my-bigfile > subset-of 
```

必须使用非消费`head`类，因此使用`ghead`GNU coreutils。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-09T23:47:10.277

类似于[雷神的回答](/a/14757916/)，但有点短：

```
sed -i '' -e $'1,17d;:a\nN;19,25ba\nP;D' file.txt 
```

`-i ''`告诉 sed 就地编辑文件。（您的系统上的语法可能有点不同。请查看手册页。）

如果`front`要从前面和`tail`结尾删除行，则必须使用以下数字：

```
1,{front}d;:a\nN;{front+2},{front+tail}ba\nP;D 
```

（我在这里把它们放在花括号中，但这只是伪代码。你必须用实际数字替换它们。此外，它应该与 一起使用`{front+1}`，但它不适用于我的机器（macOS 10.12.4）。我认为这是一个错误。）

我将尝试解释该命令的工作原理。这是一个人类可读的版本：

```
1,17d     # delete lines 1 ... 17, goto start
:a        # define label a
N         # add next line from file to buffer, quit if at end of file
19,25ba   # if line number is 19 ... 25, goto start (label a)
P         # print first line in buffer
D         # delete first line from buffer, go back to start 
```

First we skip 17 lines. That's easy. The rest is tricky, but basically we keep a buffer of eight lines. We only start printing lines when the buffer is full, but we stop printing when we reach the end of the file, so at the end, there are still eight lines left in the buffer that we didn't print - in other words, we deleted them.

# wordpress - 如何在联系表单 7 插件中将表单内容发送到其他页面

> ID：14752361
> 
> 赞同：1
> 
> 时间：2013-02-07T13:32:36.360
> 
> 标签：wordpress, contact-form-7

插件“Contact-Form-7：3rd-Party Integration”显示错误。我需要在不修改发送邮件功能的情况下将表单发送到另一个页面。

# ruby-on-rails - 多列上的rails唯一索引失败（sqlite3）

> ID：14752366
> 
> 赞同：1
> 
> 时间：2013-02-07T13:33:02.850
> 
> 标签：ruby-on-rails

使用 rails，我设置了一个 HATBM 模型，其中包含一个 users 表、一个 groups 表和一个用于连接的 groups_users（所有这些都使用脚手架命令）。现在我想添加一个迁移以在 group_users 表的 group_id 和 user_id 列上添加唯一索引，以约束 group_id/user_id 对是唯一的。各个列 group_id 和 user_id 不是 null 并且已经索引。

这是我想在迁移中执行的行：

```
add_index :groups_users, [:user_id, :group_id], :unique => true 
```

我收到以下错误：

```
-- add_index(:groups_users, [:user_id, :group_id], {:unique=>true})
rake aborted!
An error has occurred, this and all later migrations canceled:

SQLite3::ConstraintException: constraint failed: CREATE UNIQUE INDEX "index_groups_users_on_user_id_and_group_id" ON "groups_users" ("user_id", "group_id") 
```

我在 mac os 上使用 rails 3.2.11 和 sqlite3 作为数据库。

我相信一定有一些明显的解释，因为我没有在网上看到任何关于该错误的报告，但我非常卡住......这里不满足什么约束？我试图删除 group_id 和 user_id 上的索引，但它没有改变任何东西。如果我创建没有唯一性的双列索引，那么它可以工作（但无济于事......）

非常感谢有人的帮助...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T13:35:07.910

似乎`UNIQUE`约束无法用表中的当前数据填充。用`GROUP BY`和检查`COUNT`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T14:50:07.243

您的“groups_users”表中包含重复数据，因此您必须手动清除重复数据或使用`rake db:reset`.

一旦您清除了重复项，无论是通过从数据库中删除所有数据还是找到重复项，您应该能够`rake db:migrate`无错误地运行。

PS，请确保在运行上述命令之前备份您的数据库，因为它具有破坏性。

# android - 如何从 Android 设备检测联系人格式

> ID：14752367
> 
> 赞同：0
> 
> 时间：2013-02-07T13:33:06.457
> 
> 标签：android, android-contentprovider, android-contacts

我正在构建一个 Android 应用程序，我需要从用户的 Android 手机中检测联系人格式（名字、姓氏、昵称、电话、电子邮件、IM 等字段）。我该怎么做？

我从过去 5 天开始搜索它，但我没有得到任何回复......请建议我。

# c# - 重构重复的 Lambda 表达式

> ID：14752369
> 
> 赞同：4
> 
> 时间：2013-02-07T13:33:07.643
> 
> 标签：c#, asp.net-mvc, lambda

所以我们有如下所示的两种方法：

**方法一**

```
private IEnumerable<object> CreateCentreViewModelForExport(IQueryable<CentreTranslation> centreTranslation)
{
    return centreTranslation.Select(s => new
    {
        id = s.Centre.id,
        centreTranslationId = s.id,
        name = s.Centre.name,
        number = s.Centre.number,
        date_opened = s.Centre.date_opened,
        address_line_1 = s.address_line_1,
        address_line_2 = s.address_line_2,
        address_line_3 = s.address_line_3,
        city = s.city,
        county = s.county,
        country = s.Centre.Country.name,
        //country_id = s.Centre.country_id,
        translatedCountry = s.country,
        postcode = s.postcode,
        hidden = !(s.Centre.CentreStatus.Where(w => w.environment_id == 4).FirstOrDefault().active),
        about = s.about,
        virtualTour = s.Centre.virtual_tour,
        directions = s.directions,
        phone = s.Centre.phone,
        fax = s.Centre.fax,
        email = s.Centre.email,
        lat = s.Centre.position.Latitude,
        lng = s.Centre.position.Longitude,
        imageCount = s.Centre.image_count,
        translatedCentreName = s.name,
        amenities = s.amenities ,
        features = s.FeatureTranslations.Select(s2 => new FeatureViewModel()
        {
            id = s2.id,
            name = s2.Feature.name,
            selected = s2.selected
        }),
        businessCentreAbout = s.ProductTranslations.Where(w => w.Product.id == (int)Products.BusinessCentre).FirstOrDefault().about,
        officeSpaceAbout = s.ProductTranslations.Where(w => w.Product.id == (int)Products.OfficeSpace).FirstOrDefault().about,
        virtualOfficeAbout = s.ProductTranslations.Where(w => w.Product.id == (int)Products.VirtualOffice).FirstOrDefault().about,
        meetingRoomsAbout = s.ProductTranslations.Where(w => w.Product.id == (int)Products.MeetingRooms).FirstOrDefault().about,
        businessLoungeAbout = s.ProductTranslations.Where(w => w.Product.id == (int)Products.BusinessLounge).FirstOrDefault().about,
        dayOfficeAbout = s.ProductTranslations.Where(w => w.Product.id == (int)Products.DayOffice).FirstOrDefault().about,
        language_group = s.Language.language_group,
        culture = s.Language.cuture
    });
} 
```

**方法二**

```
private IQueryable<CentreViewModel> CreateCentreViewModel(IQueryable<CentreTranslation> centreTranslation)
{
    return centreTranslation.Select(s => new CentreViewModel()
    {
        id = s.Centre.id,
        centreTranslationId = s.id,
        name = s.Centre.name,
        number = s.Centre.number,
        date_opened = s.Centre.date_opened,
        address_line_1 = s.address_line_1,
        address_line_2 = s.address_line_2,
        address_line_3 = s.address_line_3,
        city = s.city,
        county = s.county,
        //country = s.Centre.Country.name,
        country_id = s.Centre.country_id,
        translatedCountry = s.country,
        postcode = s.postcode,
        hidden = !(s.Centre.CentreStatus.Where(w => w.environment_id == 4).FirstOrDefault().active),
        about = s.about,
        virtualTour = s.Centre.virtual_tour,
        directions = s.directions,
        phone = s.Centre.phone,
        fax = s.Centre.fax,
        email = s.Centre.email,
        lat = s.Centre.position.Latitude,
        lng = s.Centre.position.Longitude,
        imageCount = s.Centre.image_count,
        translatedCentreName = s.name,
        amenities = s.amenities,
        features = s.FeatureTranslations.Select(s2 => new FeatureViewModel()
        {
            id = s2.id,
            name = s2.Feature.name,
            selected = s2.selected
        }),
        businessCentreAbout = s.ProductTranslations.Where(w => w.Product.id == (int)Products.BusinessCentre).FirstOrDefault().about,
        officeSpaceAbout = s.ProductTranslations.Where(w => w.Product.id == (int)Products.OfficeSpace).FirstOrDefault().about,
        virtualOfficeAbout = s.ProductTranslations.Where(w => w.Product.id == (int)Products.VirtualOffice).FirstOrDefault().about,
        meetingRoomsAbout = s.ProductTranslations.Where(w => w.Product.id == (int)Products.MeetingRooms).FirstOrDefault().about,
        businessLoungeAbout = s.ProductTranslations.Where(w => w.Product.id == (int)Products.BusinessLounge).FirstOrDefault().about,
        dayOfficeAbout = s.ProductTranslations.Where(w => w.Product.id == (int)Products.DayOffice).FirstOrDefault().about
    });
} 
```

可以看出有很多重复的代码。第二种方法返回一个强类型视图模型，而第一种方法由于包含两个额外属性（语言组和文化）而返回一个对象。

第二种方法用于填充 MVC 视图，第二种方法用于导出到 Excel 函数。重新考虑这一点以尽量减少重复的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:36:49.290

我将创建一个 DTO 类并在其上设置一个接收 IQueryable centerTranslation 的 setter 方法。然后，您将对象传递给类并在该类中设置所有这些值，并将 dto 传递回您在那里拥有的原始方法。

```
 public class SomeDto
    {
        //All of the properties your setting in the other method

        public void SetDto(IQueryable<CentreTranslation> centreTranslation)
        {
            //call methods that set all the properties
        }

        private SetAddress(IQueryable<CentreTranslation> centreTranslation)
        {
            //set only address properties
        } 
```

我还会为类型创建更小的 setter 方法，例如与地址有关的所有内容，在 dto 对象上创建一个名为 SetAddress 的私有方法并继续下去。

拥有 DTO 对象后，您可以使用 Automapper 之类的工具直接从 DTO 对象映射到 ViewModel 对象。这将为您在整个应用程序中进行更多重构提供最大的灵活性。

```
 private ViewModel createViewModel(Dto)

 {
     return Mapper.Map(Dto, ViewModel);    
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:42:06.580

```
private IQueryable<object> CreateCentreViewModel(IQueryable<CentreTranslation> centreTranslation)
{
    return centreTranslation.Select(s => new 
    {
        model = new CentreViewModel()
        {
             id = s.Centre.id,
             centreTranslationId = s.id,
             name = s.Centre.name,
             [...]
        }
        language_group = s.Language.language_group,
        culture = s.Language.cuture
     }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T13:47:27.207

在 CentreViewModel 类中创建一个静态`FromCentreTranslation`方法，并将所有初始化都放在那里：

```
public class CentreViewModel 
{
   ....
   public static CentreViewModel FromCentreTranslation(CentreTranslation source)
   {
      CentreViewModel result = new CentreViewModel();
      result.id = source.Centre.id,
      result.centreTranslationId = source.id,
      result.name = source.Centre.name,
      ....
      result.businessLoungeAbout = source.ProductTranslations
                        .Where(w => w.Product.id == (int)Products.BusinessLounge)
                        .FirstOrDefault().about,
      result.dayOfficeAbout = source.ProductTranslations
                        .Where(w => w.Product.id == (int)Products.DayOffice)
                        .FirstOrDefault().about
      return result;
   }
} 
```

然后，您可以重构原始的两种方法，例如：

```
private IEnumerable<object> CreateCentreViewModelForExport
                                (IQueryable<CentreTranslation> centreTranslation)
{
   return centreTranslation.Select(s => new 
   {
      centreViewModel = CentreViewModel.FromCentreTranslation(s),
      language_group = s.Language.language_group,
      culture = s.Language.cuture
   }
} 
```

和

```
private IQueryable<CentreViewModel> CreateCentreViewModel
                                (IQueryable<CentreTranslation> centreTranslation)
{
  return centreTranslation.Select(s => CentreViewModel.FromCentreTranslation(s)),
} 
```

# javascript - 如何使用 jquery 找到 div 的下一个跨度？

> ID：14752375
> 
> 赞同：-4
> 
> 时间：2013-02-07T13:33:37.317
> 
> 标签：javascript, jquery, asp.net, css

我有一个**div**和它旁边的**span**我只想使用 jquery 给它**顶部**我该怎么做。**div**和**span**都是动态生成的。div 的 id 为“ **divTest** ”，我想找到该 div 的下一个跨度。我尝试了一些技巧，但还没有成功。

**更新：**

实际上我已经在页面上实现了密码强度。我想改变它的位置。我在浏览器中粘贴 html 渲染

```
 <input id="main_cntrlChangePwd_txtNewPassword" class="feild" type="password" maxlength="300" name="ctl00$main$cntrlChangePwd$txtNewPassword">
<div id="PasswordStrengthBorder" style="position: absolute; display: inline; height: 3px; top: 95px; left: 445px; border-style: solid; border-width: 1px; padding: 2px; width: 200px;"></div>
<div id="PasswordStrengthBar" class="BarIndicator" style="position: absolute; display: inline; height: 5px; top: 97px; left: 447px; width: 75px; background-color: blue;"></div>
<span style="position: absolute; top: 105px; left: 445px; font-size: 75%; display: inline-block;
 width: 240px;">5 more characters, At least 2 more numbers, 1 more symbol, 1 Upper case characters</span>
<br>
<span id="spNewPwd" class="imp_msg error_msg">Message</span>
</div> 
```

就这样

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-07T13:35:53.860

使用 jQuery [`next()`](http://api.jquery.com/next/)：

```
$("#divTest").next("span").css("top", "10px"); 
```

***现场演示：http:*** *[//jsfiddle.net/YUNXa/](http://jsfiddle.net/YUNXa/)*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T13:35:04.097

像这样？

```
$("#divTest").next(); 
```

或者你也可以试试

```
$('#divTest').nextAll('span:first'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T13:36:21.180

可能这就是你需要的

`$('#divTest').next('span')`

# jquery - Symfony 2 jQuery 表单

> ID：14752379
> 
> 赞同：0
> 
> 时间：2013-02-07T13:33:41.880
> 
> 标签：jquery, symfony, uploader

我正在尝试使用 jquery 构建一个简单的文件上传器。我在没有 Symfony2 的服务器上对其进行了测试，它可以工作。

我使用两个简单的控制器：

```
 /**
 * @Route("/")
 * @Template()
 */
public function indexAction()
{
    return array();
}

/**
 *  @Route("/new_project", name="newproject")
 *  @Method("POST")
 */
public function newProjectAction()
{
    $entity = new test();
    $entity->setName('test');

    $em = $this->getDoctrine()->getManager();
    $em->persist($entity);
    $em->flush();

     return new Response('<html><body>added</body></html>');
} 
```

还有我的索引视图

```
{% extends '::base.html.twig' %}
{% block script %}
<script type="text/javascript">
  <!--
    $(document).ready(function() {

        var options = {
        target: '#message', //Div tag where content info will be loaded in
        url: {{ path('newproject') }}, //The php file that handles the file that is uploaded
        beforeSubmit: function() {
            $('#uploader').html('<img src="ajax-loader.gif" border="0" />'); //Including a preloader, it loads into the div tag with id uploader
        },
        success:  function() {
            //Here code can be included that needs to be performed if Ajax request was successful
            $('#uploader').html('Plik przesłany');

        }
        };

        $('#upload').submit(function() {
            $(this).ajaxSubmit(options);
            return false;
        });

    }); 
//-->
</script>
{% endblock %}

{% block body %}
<div id="message"></div>
<form name="upload" id="upload" action="#" method="POST" enctype="multipart/form-data">
    <table cellpadding="4" cellspacing="4" border="0">
        <tr>
            <td colspan="2"><h1>Upload File via Ajax</h1></td>
        </tr>
       <tr>
            <td nowrap>File:</td>
            <td nowrap><input type="file" name="fileToUpload" id="fileToUpload" /></td>
        </tr>
        <tr>
            <td nowrap colspan="2"><input type="submit" id="uploadFile" value="Upload File" /></td>
        </tr>   

    </table>
</form>
<div id="uploader"></div>
{% endblock %} 
```

你能告诉我为什么它不起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:11:46.023

```
<script type="text/javascript">
  <!--
    $(document).ready(function() { 
```

将其更改为

```
<script type="text/javascript">
  //<!--
    $(document).ready(function() { 
```

请尝试显示错误并提及您使用的浏览器，并确保页面中包含 jquery 库。

# javascript - NodeJS Mongoose - 无法调用未定义的方法“toString”

> ID：14752380
> 
> 赞同：3
> 
> 时间：2013-02-07T13:33:44.320
> 
> 标签：javascript, mongodb, mongoose

我正在尝试将数据库中团队的名称打印到控制台，代码如下：

```
var Team = require('../schemas/Team').Model;
app.get('/match', function(req, res) {
    var key = 1359407087999; // Team Key
    Team.findByKey(key, function(err, team) {
        util.log(team);
        if (err) {
            util.log("Error occured");
        }
        if (!team) { 
            util.log("The team does not exist");
        } else {
            res.send("Found team: " + team.name);
        }
    });
}); 
```

代码成功地让团队在哪里`util.log(team)`。它将这个打印到控制台：

```
{
    __v: 0,
    _id: 5106e7ef9afe3a430e000007,
    name: 'Team Name',
    key: 1359407087999 
} 
```

这也适用于将其发送到网页时。

但是当我尝试将团队的名称发送到网页时，我使用`res.send`方法 =>得到以下输出`Found team: undefined`...当我尝试输出`team.name`而不是`team`控制台时，我得到了错误`Cannot call method 'toString' of undefined`

这也是我的团队猫鼬模式：

```
var Team = new Schema({
    'key' : {
        unique : true,
        type : Number,
        default: getId
    },
    'name' : { type : String,
        validate : [validatePresenceOf, 'Team name is required'],
        index : { unique : true }
    }
});

Team.statics.findByKey = function(key, cb){
    return this.find({'key' : key}, cb);
};

module.exports.Schema = Team;
module.exports.Model = mongoose.model('Team', Team); 
```

表演队

```
app.get('/show/team/:key', function(req, res){
    util.log('Serving request for url[GET] ' + req.route.path);
    Team.findByKey(req.params.key, function(err, teamData){
        util.log(teamData[0]);
        if (!err && teamData) {
            teamData = teamData[0];
            res.json({
                'retStatus' : 'success',
                'teamData' : teamData
            });
        } else {
            util.log('Error in fetching Team by key : ' + req.params.key);
            res.json({
                'retStatus' : 'failure',
                'msg' : 'Error in fetching Team by key ' + req.params.key
            });
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:42:39.353

名称是唯一的，因此您应该使用`findOne`而不是`find`.

```
Team.statics.findByKey = function(key, cb){
  return this.findOne({'key' : key}, cb);
}; 
```

# asp.net - 如何在 C# 中使用 itextsharp 创建单选按钮列表

> ID：14752382
> 
> 赞同：1
> 
> 时间：2013-02-07T13:33:55.630
> 
> 标签：asp.net, c#-4.0, itextsharp

我正在尝试使用 itextsharp 在 pdf 文件中制作单选按钮列表，但它会创建框。

有没有人可以告诉我为什么会这样？

```
for (int j = 0; j < 8; j++)
{
    Rectangle(0, 0, 22, 22), "RadioButtons_" + j.ToString(), "On");
    Rectangle _rect;

    _rect = new Rectangle(100, 100, 100, 100);

    radios[j] = new RadioCheckField(writer, _rect, "RadioButtons_" + j.ToString(), "On");
    radios[j].BackgroundColor = new GrayColor(0.8f);
    radios[j].BorderColor = GrayColor.BLACK;
    radios[j].CheckType = RadioCheckField.TYPE_CIRCLE;

    cell = new PdfPCell();
    if (j == 6)
    {
        cell.Colspan = 3;
        radios[j].Text = "&nbsp;&nbsp; Not Important";
    }
else if (j == 7)
    {
        cell.Colspan = 3;
        radios[j].Text = "Not Applicable";
    }
    else
    {
        cell.Colspan = 1;
    }

    kid = new iTextSharp.text.pdf.events.FieldPositioningEvents(writer, radios[j].CheckField, "radios");
    kid.Padding = 0.5f;
    cell.CellEvent = kid;
    table.AddCell(cell);
} 
```

# certificate - IISExpress ClientCertificate 设置步骤

> ID：14752386
> 
> 赞同：8
> 
> 时间：2013-02-07T13:33:57.080
> 
> 标签：certificate, iis-express, client-certificates

我正在尝试配置一个简单的网站以要求 IISExpress 上的客户端证书。

我的配置是根据这个归档的[jasonrshaver.com](https://web.archive.org/web/20111201044809/http://www.jasonrshaver.com/?tag=/IIS+Express)帖子。

```
<site name="XXXX" id="3">
 <application path="/" applicationPool="Clr4IntegratedAppPool">
  <virtualDirectory path="/" physicalPath="XXXX" />
 </application>
 <bindings>
  <binding protocol="http" bindingInformation="*:65360:localhost" />
  <binding protocol="https" bindingInformation="*:44300:localhost" />
 </bindings>
</site>
...
<access sslFlags="Ssl, SslNegotiateCert" />
...
<iisClientCertificateMappingAuthentication enabled="true">
</iisClientCertificateMappingAuthentication> 
```

它是一个输出 ClientCertificate 数据的简单 MVC4 Web 应用程序。

问题是当我浏览到 https 时，不会提示我在浏览器中输入证书。我确实有 4 个可以使用的证书；它们是在 Chrome 中配置的

任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T14:41:59.903

存在证书问题，而不是 IISExpress 配置问题。

我没有可用于客户端身份验证的证书。安装具有预期用途的证书后，一切正常。

所以上面的配置工作得很好。

# android - 从 sl4a 运行 python 模块

> ID：14752387
> 
> 赞同：0
> 
> 时间：2013-02-07T13:33:55.750
> 
> 标签：android, python

我已经安装了 py4a 和 sl4a，然后我将现有的 python 模块 pybluez 复制到我的手机到 storage/sdcard0/Download。我使用选项 Import Modules from py4a 导入了模块并安装了它。如何执行模块？

坦克，雷亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:41:54.127

执行？你不执行模块，通常一个模块有一个入口点，例如

```
import module
module.main() 
```

# android - 使用 onBind 方法接收命令

> ID：14752388
> 
> 赞同：1
> 
> 时间：2013-02-07T13:34:04.157
> 
> 标签：android, bind

我是android新手，我必须编写一个服务（在不同的进程上）来处理我的互联网通信功能，我查看了一些博客，发现使用信使我们可以在活动和服务之间进行通信（在不同的进程上),

我的问题在这里，到目前为止我正在做这样的事情：

```
private Messenger _commandReceiver = new Messenger(new CommandDispatcher());

public IBinder onBind(Intent intent) {
    return _commandReceiver.getBinder();
}

class CommandDispatcher extends Handler {
    public void handleMessage(Message message) {
    int command = data.getInt("command");
    Messenger activityMessenger = (Messenger) data.get("messenger");

    switch (command) {
                case Command.IS_AUTHENTICATED:
        break;
        ...
    }
}
} 
```

但是为什么我不应该在 onBind 方法上发送命令变量和活动信使并在那里处理整个事件，这样可以完全删除服务信使并且通信代码更简单，它会变成这样

```
public IBinder onBind(Intent intent) {

    Bundle data = intent.getExtras();
    int command = data.getInt("command");
    Messenger activityMessenger = (Messenger) data.get("messenger");

    switch (command) {
                case Command.IS_AUTHENTICATED:
        break;
        ...
    }
} 
```

我知道这可能是一个非常简单的问题，但我无法在任何地方找到答案，所以如果有人能帮助我，我将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T08:24:45.860

您的问题可能在官方文档中得到解决。

正如谷歌所说，

> 多个客户端可以同时连接到服务。但是，`onBind()`只有在第一个客户端绑定时，系统才会调用服务的方法来检索 IBinder。然后系统将相同的 IBinder 传递给绑定的任何其他客户端，而无需`onBind()` 再次调用。

在[绑定服务中查找](http://developer.android.com/guide/components/bound-services.html#Messenger)

我的建议是在您添加注册方法以`IBinder`区分不同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:39:53.213

**扩展 Binder 类** 如果您的服务对您自己的应用程序是私有的并且在与客户端相同的进程中运行（这很常见），您应该通过扩展 Binder 类并从 onBind() 返回它的实例来创建接口。客户端收到 Binder 并可以使用它直接访问 Binder 实现甚至服务中可用的公共方法。

当您的服务只是您自己的应用程序的后台工作者时，这是首选技术。您不会以这种方式创建界面的唯一原因是因为您的服务被其他应用程序或跨单独进程使用。

**使用 Messenger** 如果您需要您的界面在不同的进程中工作，您可以使用 Messenger 为服务创建一个界面。以这种方式，服务定义了一个 Handler 来响应不同类型的 Message 对象。这个 Handler 是 Messenger 的基础，它可以与客户端共享一个 IBinder，允许客户端使用 Message 对象向服务发送命令。此外，客户端可以定义自己的 Messenger，以便服务可以发回消息。

[http://developer.android.com/guide/components/bound-services.html](http://developer.android.com/guide/components/bound-services.html)

# ruby - 如何将 before_filter 应用于 Rails 3.2.11 中每个控制器的每个操作？

> ID：14752390
> 
> 赞同：12
> 
> 时间：2013-02-07T13:34:09.133
> 
> 标签：ruby, ruby-on-rails-3, authentication, redirect, before-filter

我想验证用户是否登录了对服务器的每个请求。

就像是：

```
:before_filter verify_logged_in 
```

我应该把 before_filter 放在哪里，以便它适用于所有控制器操作和所有请求？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-07T13:36:36.200

要确保过滤器适用于所有操作，请将其放在 application_controller.rb 中。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-07T14:21:45.773

应用程序控制器是所有其他类的基类。

如果您在此类中放置任何过滤器，则流程如下：

如果你`users`用任何动作点击资源的url say`index`动作然后：

控制首先转到`Application Controller`。它在那里检查过滤器，如果找到任何过滤器，则执行过滤器方法，然后进入用户控制器的索引操作。

**应用控制器：**

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  before_filter :verify_logged_in

end 
```

**其他控制器：**

```
class UsersController < ApplicationController

  def index

  end 
```

在上面的代码中，您可以看到另一个控制器正在继承父控制器的内容，即应用程序控制器。因此，如果您放入`before_filter`应用程序控制器，那么对于每个用户，它将验证用户是否为每个请求登录。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-07T17:03:54.247

将 before_filter 放在基类中（在 application_controller.rb 文件中），它将适用于基类及其所有派生类，例如

```
class ApplicationController < ActionController::Base
  before_filter :set_locale

  def set_locale
    I18n.locale = params[:locale] or I18n.default_locale
  end
end 
```

祝你好运 ：-）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T13:37:16.380

将它放在`ApplicationController`并从中继承所有其他控制器。如果您不覆盖`verify_logged_in`其中一个子控制器，它就可以正常工作。

# c# - 如何在 C# 中为 Windows 应用程序将数据从数据网格保存到 SQL Server？

> ID：14752394
> 
> 赞同：-4
> 
> 时间：2013-02-07T13:34:21.400
> 
> 标签：c#

我有一个包含 10 个空行和列的数据网格，我通过文本框将数据输入到数据网格中，然后我将数据网格中的所有记录保存到数据库中？

如何保存数据网格中的所有记录。

任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:51:16.850

```
 SqlConnection con = new SqlConnection(/*YOUR Connection Path*/);
            foreach (DataGridViewRow Row in dataGridView1.Rows)
            {
                con.Open();
                SqlCommand cmd = new SqlCommand("Insert into Service_Sub(Service_No,Service_Date) Values('" + Row.Cells[0].Value.ToString() + "','" + Row.Cells[1].Value.ToString() + "')",con);
                cmd.ExecuteNonQuery();
                con.Close();
            } 
```

# php - php按键组合多维数组中的数组

> ID：14752397
> 
> 赞同：0
> 
> 时间：2013-02-07T13:34:37.840
> 
> 标签：php, arrays

我有来自 $_POST 的以下数组：

```
array { 
["item"]=> array() { 
    [0]=> "pen" 
    [1]=> "pencil" 
    [2]=> "ruler" 

array { 
["note"]=> array() { 
    [0]=> "permanent" 
    [1]=> "not so permanent" 
    [2]=> "measures stuff" 

array { 
["cost"]=> array() { 
    [0]=> "67.99" 
    [1]=> ".15" 
    [2]=> "1.49" 
```

我想合并成一个单行项目，例如

```
array { 
["line_items"]=> array() {

["0"]=> array() {
        [item]=> "pen" 
        [note]=> "permanent"
        [cost]=> "67.99"

["1"]=> array() {
        [item]=> "pencil" 
        [note]=> "not so permanent"
        [cost]=> ".15"      

["3"]=> array() {
        [item]=> "ruler" 
        [note]=> "measures stuff"
        [cost]=> "1.49" 
```

我看过array_merge、array_merge_recursive、array_combine，但是所有这些函数都没有做我想要的。我已经为每个循环和 for 循环尝试了一些不同的方法，但我就是无法理解它。

请询问您是否需要更多信息，这不是很清楚，但就像我说的那样，我的脑袋 - 努力解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:36:57.043

为此，您必须自己想出一些东西：

```
$length = count($_POST['item']);
$items = array();
for ($i = 0; $i < $length; $i++) {
    $item = array();
    $item['item'] = $_POST['item'][$i];
    $item['note'] = $_POST['note'][$i];
    $item['cost'] = $_POST['cost'][$i];
    $items[] = $item;
}

var_dump($items); 
```

应该给你你需要的。请注意，它没有任何类型的错误检查或验证 - 您需要添加它。

**编辑**：在我的回答中犯了一个愚蠢的错误 - 已更正。

# c++ - 带有 SSE2 的 Newton Raphson - 有人可以解释一下这 3 行吗

> ID：14752399
> 
> 赞同：28
> 
> 时间：2013-02-07T13:34:40.960
> 
> 标签：c++, c, math, sse, newtons-method

我正在阅读这份文件： http: [//software.intel.com/en-us/articles/interactive-ray-tracing](http://software.intel.com/en-us/articles/interactive-ray-tracing)

我偶然发现了这三行代码：

> SIMD 版本已经快了很多，但我们可以做得更好。英特尔在 SSE2 指令集中添加了快速 1/sqrt(x) 函数。唯一的缺点是它的精度是有限的。我们需要精度，因此我们使用 Newton-Rhapson 对其进行改进：

```
 __m128 nr = _mm_rsqrt_ps( x ); 
 __m128 muls = _mm_mul_ps( _mm_mul_ps( x, nr ), nr ); 
 result = _mm_mul_ps( _mm_mul_ps( half, nr ), _mm_sub_ps( three, muls ) ); 
```

> 此代码假定存在一个名为“half”（四倍 0.5f）的 __m128 变量和一个变量“three”（四倍 3.0f）。

我知道如何使用 Newton Raphson 来计算函数的零，并且我知道如何使用它来计算数字的平方根，但我只是看不出这段代码是如何执行它的。

有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-07T13:59:12.493

鉴于牛顿迭代![y_n+1=y_n(3-x(y_n)^2)/2](../Images/41b59d381deeea604e85bfe36a1ae598.png)，在源代码中看到这一点应该很简单。

```
 __m128 nr   = _mm_rsqrt_ps( x );                  // The initial approximation y_0
 __m128 muls = _mm_mul_ps( _mm_mul_ps( x, nr ), nr ); // muls = x*nr*nr == x(y_n)^2
 result = _mm_mul_ps(
               _mm_sub_ps( three, muls )    // this is 3.0 - mul;
   /*multiplied by */ __mm_mul_ps(half,nr)  // y_0 / 2 or y_0 * 0.5
 ); 
```

准确地说，这个算法是针对[平方根的](http://en.wikipedia.org/wiki/Fast_inverse_square_root)。

请注意，这[仍然不能给出完全准确的结果](https://stackoverflow.com/questions/1528727/why-is-sse-scalar-sqrtx-slower-than-rsqrtx-x/1528751#1528751)。 `rsqrtps`使用 NR 迭代可提供几乎 23 位的准确度，而`sqrtps`的 24 位对最后一位进行正确舍入。

如果要将[结果截断为 integer](https://stackoverflow.com/questions/35885170/handling-zeroes-in-mm256-rsqrt-ps/35893242#35893242) ，则有限的准确性是一个问题。 `(int)4.99999`是`4`。另外，`x == 0.0`如果使用 , 请注意这种情况`sqrt(x) ~= x * sqrt(x)`，因为`0 * +Inf = NaN`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-12T16:37:48.767

为了计算 的反平方根`a`，牛顿法应用于`0=f(x)=a-x^(-2)`具有导数的方程，`f'(x)=2*x^(-3)`因此迭代步长

```
N(x) = x - f(x)/f'(x) = x - (a*x^3-x)/2 
     = x/2 * (3 - a*x^2) 
```

[与全局收敛的 Heron 方法](https://en.wikipedia.org/wiki/Heron's_method)相比，这种无除法方法具有有限的收敛区域，因此您需要一个已经很好的逆平方根近似值才能获得更好的近似值。

# iis - IIS URL 重写 40 4 错误

> ID：14752400
> 
> 赞同：0
> 
> 时间：2013-02-07T13:34:41.227
> 
> 标签：iis, url-rewriting

我正在运行下面的配置来重写例如

[http://www.phusewebdesign.co.uk/blog/Get-in-touch](http://www.phusewebdesign.co.uk/blog/Get-in-touch)

至

[http://www.phusewebdesign.co.uk/index.php?s=blog&p=Get-in-touch](http://www.phusewebdesign.co.uk/index.php?s=blog&p=Get-in-touch)

但我得到一个 404 错误，我错过了一些简单的东西我确定但无法在谷歌或这里找到答案

谢谢

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <rule name="RewriteUserFriendlyURL2" stopProcessing="true">
                    <match url="^([^/]+)/([^/]+)/?$" />
                    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
                        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                    </conditions>
                    <action type="Rewrite" url="index.php?s={R:1}&amp;p={R:2}" />
                </rule>
                <rule name="RewriteUserFriendlyURL1" stopProcessing="true">
                    <match url="^([^/]+)/?$" />
                    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
                        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                    </conditions>
                    <action type="Rewrite" url="index.php?p={R:1}" />
                </rule>
            </rules>
        </rewrite>
    </system.webServer>
</configuration> 
```

# controller - 覆盖 zfcuseradmin 控制器

> ID：14752403
> 
> 赞同：0
> 
> 时间：2013-02-07T13:34:50.367
> 
> 标签：controller, overriding, zend-framework2

我是 zf2 的新手，我试图覆盖 zfcuseradmin/useradmincontroller 但它不起作用。我已经尝试了很多东西，但无法让它发挥作用这也是我在这里的第一篇文章，如果它有任何不正确之处，请见谅。

我在名为 MyZfcUserAdmin 的模块文件夹中创建了一个文件夹，我也在使用 bjuauthorize，但不知道这对你们来说是否重要。引导程序正在工作，因为表单文件已添加到我的 zfcuseradmin 创建表单中

这是我的代码：

模块/MyzfcUserAdmin/config/module.config.php

```
return array( 
'controllers' => array(
    'invokables' => array(
        'MyZfcUserAdmin' => 'MyZfcUserAdmin\Controller\MyZfcUserAdminController',
    ),
),

); 
```

模块/MyzfcUserAdmin/src/MyzfcUserAdmin/Controller/MyZfcUserAdminController.php

```
<?php
namespace MyZfcUserAdmin\Controller;

use ZfcUserAdmin\Controller\UserAdminController as BaseUserAdminController;

class MyZfcUserAdminController extends BaseUserAdminController
{

public function createAction()
{
    $result = parent::createAction();
    $form = $this->getServiceLocator()->get('zfcuseradmin_createuser_form');        
    $request = $this->getRequest();

    $service = $this->getAdminUserService();

    $messages = array();
    if ($request->isPost()) 
    {

        $data = $request->getPost()->toArray();
        $data['governance'] = 1;

        if ($service->createasd($data) ) 
        {
            $messages[] = array(
                'type'    => 'success',
                'icon'    => 'icon-ok-sign',
                'message' => 'succes',
            );
            return $this->redirect()->toRoute('zfcadmin/zfcuseradmin/list');
        }
        else
        {
            $messages[] = array(
                'type'    => 'error',
                'icon'    => 'icon-remove-sign',
                'message' => 'failed',
            );

        }
    }

    return array(
        'messages'  => $messages,
        'createUserForm' => $form
    );   
}
} 
```

模块/MyzfcUserAdmin/Module.php

```
<?php

namespace MyZfcUserAdmin;

use BjyAuthorize\Provider\Role\ZendDb AS rolesDb;

class Module
{
    public $rights = array();
    public $governance = array();

    public function onBootstrap($e)
    {

        //get roles
        $serviceManager = $e->getTarget()->getServiceManager();
        $rolesdb = new rolesDb('', $serviceManager);

        $roles = $rolesdb->getRoles();
        $roleOptions = array('');
        foreach($roles AS $role)
        {
            $name = $role->getRoleId();
            if($name != 'guest')
                $roleOptions[$name] = ucfirst($name);
        }
        $this->rights = array(
                'name' => 'role',
                'type' => 'Zend\Form\Element\Select',     
                'attributes' => array(
                        'required' => 'required',
                ),
                'options' => array(
                        'label' => 'Rights',
                        'value_options' => $roleOptions,
                )
            );   

        $this->governance = array(
                'name' => 'governance',
                'options' => array(
                        'label' => 'Governance',
                        'checkedValue'   => 1,
                        'uncheckedValue' => 0,
                ),
                'attributes' => array(
                        'type' => 'checkbox',
                ),
            );   

        $app = $e->getParam('application');
        $em  = $app->getEventManager()->getSharedManager(); 
        $em->attach('ZfcUserAdmin\Form\CreateUser', 'init', function($e) {
            $form = $e->getTarget();
            //$form->add($this->rights);
            $form->add($this->governance);        

        });
        $em->attach('ZfcUserAdmin\Form\EditUser', 'init', function($e) {
            $form = $e->getTarget();
           // $form->add($this->rights);
            $form->add($this->governance);
        });
        $em->attach('ZfcUserAdmin\Form\EditUserFilter','init', function($e) {
            $filter = $e->getTarget();
            // Do what you please with the filter instance ($filter)

        });

    }

    public function getConfig()
    {
        return include __DIR__ . '/config/module.config.php';
    }

    public function getAutoloaderConfig()
    {
       return array(
            'Zend\Loader\StandardAutoloader' => array(
                'namespaces' => array(
                    __NAMESPACE__ => __DIR__ . '/src/' . __NAMESPACE__,
                ),
            ),
        );
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:54:49.927

您可以覆盖 module.config.php 中的路由

将控制器替换为路由定义中的默认控制器。

```
....
'zfcuser' => array(
            'type' => 'Literal',
            'priority' => 1000,
            'options' => array(
                'route' => '/user',
                'defaults' => array(
                    'controller' => 'myzfcuser',
                    //'controller' => 'zfcuser',
                    'action'     => 'index',
                ),
            ), 
```

另请查看 zfcuser.global.php 配置，您可以在其中修改路由选项

```
/**
 * Login Redirect Route
 *
 * Upon successful login the user will be redirected to the entered route
 *
 * Default value: 'zfcuser'
 * Accepted values: A valid route name within your application
 *
 */
//'login_redirect_route' => 'zfcuser',

/**
 * Logout Redirect Route
 *
 * Upon logging out the user will be redirected to the enterd route
 *
 * Default value: 'zfcuser/login'
 * Accepted values: A valid route name within your application
 */
//'logout_redirect_route' => 'zfcuser/login', 
```

# .net - 大会签署和证书

> ID：14752408
> 
> 赞同：0
> 
> 时间：2013-02-07T13:35:06.670
> 
> 标签：.net, certificate, ca, assembly-signing

我找到了以下方案，通过使用自定义根 CA 来保护企业软件的各个部分。这是做这种事情的正确方法吗？这种方式有问题吗？

方案：

1.  我有我的自定义根 CA。有一组由该 CA 创建的简单证书。
2.  有一个 .NET 程序集集。来自集合 A 的程序集使用来自我的 CA 的证书 A 签名，来自集合 B 的程序集使用来自我的 CA 的证书 B 签名。
3.  有一组信任我的 CA 的客户端（在证书管理单元中的第三方根 CA 文件夹中有它的证书）。
4.  使用受信任证书签名的程序集可以正常工作，使用不受信任证书签名的程序集将无法正常工作。
5.  我撤销了证书 B（在我的具有根 CA 的服务器上）。

问题：

1.  信息（证书 B 被吊销）是否会使用 OCSP 自动发送给每个客户端？
2.  是否每个程序集负载都会使用 Internet 连接进行 OCSP 调用？是否每台装有我的程序集的计算机都会进行此类调用？
3.  如果域中的一台计算机没有互联网连接，它会继续信任被撤销的证书吗？
4.  它是受保护的方式吗 - 客户端可以中断 OCSP 请求、阻止我的服务器地址等吗？
5.  证书 B 是否会自动放置到客户端服务器上的 Untrusted Certificates 文件夹中？
6.  那么，一般来说，客户端可以让我的软件使用不受信任的证书吗？
7.  是否可以从程序集中清除此证书标志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:09:48.270

假设 OCSP 配置正确：

1) 撤销应存储在验证机构数据库中，并应要求确认。OCSP 响应者将知道证书 B 的吊销。客户应该询问。

2）我不知道互联网连接，但是证书提供了一个验证机构 url 来验证证书，或者客户端已经配置了一个。如果这样的 URL 是互联网 URL，答案是肯定的。

3）我认为不会，毕竟证书可能会被泄露。也就是说，如果您使用的是自定义根 CA，则应该需要互联网连接。网络访问是的，但没有更多。

4) OCSP 请求已签名，因此需要付出很大的努力才能破坏它并伪造响应。它可以做到，但我想如果有人能做到，它可以做更多有趣的事情。

5) 我认为是的。如果 OCSP 请求完成并且证书被吊销，那么它将进入不受信任的证书。这是 Windows 标准行为。

6) 这是一个广泛的问题，如果您使用证书进行代码签名，并且它由 CLR 执行，您应该能够加载已签名的程序集。但可能有办法。

7) 我猜是这样，如果你可以用 ILSpy 或类似工具打开程序集，你也许可以得到一些版本的源代码并重新编译它。与 ILDASM 相同

它安全吗？是的，差不多。但是，如果您需要额外的安全性，您应该混淆您的代码并提供一个内部验证步骤，例如您通过 OCSP 显式验证的程序集中的嵌入式证书，并且该过程中的任何故障都会阻止进一步使用您的代码。

# javascript - 当使用 jquery 将页面加载到 div 中时，javascript 函数不起作用

> ID：14752409
> 
> 赞同：0
> 
> 时间：2013-02-07T13:35:06.577
> 
> 标签：javascript, jquery, asp.net

我想将一个 aspx 页面加载到 Default.aspx 上的 div 中。我用这个，

```
 $('div').load("Page.aspx"); 
```

它可以正常工作，但 Page.aspx 上的 javascript 函数不起作用。Javascript 代码在 plugins.js 中。我试图在 Default.aspx 和 Page.aspx 上包含 js 文件，但它不起作用。我怎样才能让它们工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:40:30.407

我认为问题是 Jquery 函数 Load() 获取请求的 html 内容并将其插入到 dom 中，它不加载 javascript 函数。

你可以使用

```
 document.write() function to get the requested javascript function
      and insert it in the html body preferrable a div at the top.
       for example:
        <script>window.jQuery || document.write('<script src="js/libs/jquery1.6.2.min.js"><\/script>')</script> 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T13:52:28.273

我假设这是因为在 jQuery 解析 DOM 之后内容被加载到页面中。

看看 jQuery .live() ( [http://api.jquery.com/live/](http://api.jquery.com/live/) )，它允许您为现在**和将来**匹配当前选择器的所有元素附加一个事件处理程序。

# php - PHP - MD5、SHA、哈希安全

> ID：14752416
> 
> 赞同：6
> 
> 时间：2013-02-07T13:35:21.617
> 
> 标签：php, security, hash, md5, sha1

我是一个用 PHP 构建的新网站的开发人员，我想知道最适合用于散列的东西是什么。我看过 md5 和 sha1 ，但有什么更安全的。
对不起，如果这是一个小问题，但我是 PHP 安全的新手，我正在努力使我的网站尽可能安全。还有什么是盐？
谢谢，
瓦西姆

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T13:39:06.210

首先，md5 和 sha1 已被证明可以抵抗碰撞攻击，并且可以很容易地进行彩虹表（当他们看到您的哈希值在他们的常用密码数据库中是否相同时）。
目前有两件事对密码来说足够安全，您可以使用。
第一个是sha512。sha512 是 SHA2 的子版本。SHA2 尚未被证明可以抵抗碰撞攻击，sha512 将生成 512 位散列。以下是如何使用 sha512 的示例：

```
<?php
hash('sha512',$password); 
```

另一个选项称为 bcrypt。bcrypt 以其安全散列而闻名。它可能是目前最安全的一种，也是最可定制的一种。
在您想开始使用 bcrypt 之前，您需要检查您的服务器是否启用了它，输入以下代码：

```
<?php
if (defined("CRYPT_BLOWFISH") && CRYPT_BLOWFISH) {
    echo "CRYPT_BLOWFISH is enabled!";
}else {
echo "CRYPT_BLOWFISH is not available";
} 
```

如果它返回它已启用，那么下一步很简单，您需要做的就是 bcrypt 密码（注意更多可定制性，您需要查看此[How do you use bcrypt for hashing passwords in PHP?](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)）：

```
crypt($password, $salt); 
```

现在回答你的第二个问题。盐通常是一个随机字符串，当你对它们进行哈希处理时，你在所有密码的末尾添加它。使用盐意味着如果有人获取了您的数据库，他们将无法检查散列以获取常用密码。使用彩虹表调用检查数据库。哈希时应始终使用盐！

以下是我对 SHA1 和 MD5 碰撞攻击漏洞的证明：
[http](http://www.schneier.com/blog/archives/2012/10/when_will_we_se.html) ://www.schneier.com/blog/archives/2012/10/when_will_we_se.html，http : [//eprint.iacr.org/2010/413.pdf](http://eprint.iacr.org/2010/413.pdf) , [http://people.csail.mit.edu/yiqun/SHA1AttackProceedingVersion.pdf](http://people.csail.mit.edu/yiqun/SHA1AttackProceedingVersion.pdf) , [http://conf.isi.qut.edu.au/auscert/proceedings/2006/gauravaram06collision.pdf](http://conf.isi.qut.edu.au/auscert/proceedings/2006/gauravaram06collision.pdf)和[了解 sha-1 碰撞弱点](https://stackoverflow.com/questions/1147830/understanding-sha-1-collision-weakness)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:43:21.803

salt 的全部目的是减缓攻击者将预先生成的哈希列表与目标哈希进行比较的速度。

攻击者不需要为每个明文密码预先计算一个“散列”值，而是需要为每个明文密码 (2^7 * 2^7) 预先计算 16384 个“散列”值。

这在今天有点相形见绌，但在第一次开发 crypt 函数时相当大 - 预先计算许多密码乘以您怀疑（字典）的明文密码数量的计算能力非常高。

今天没有那么多，这就是为什么我们有影子密码、除 crypt 之外的其他核心密码功能以及每个 sysad 都希望你选择一个不会出现在字典中的密码的原因。

如果您要生成的散列用于密码，这是一种被广泛接受的实现方法。

[http://www.openwall.com/phpass/](http://www.openwall.com/phpass/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T13:47:03.060

如果您打算对密码执行此操作，**请不要使用 MD5 或 SHA1**。众所周知，即使加盐，它们也很虚弱和不安全。

如果您将它们用于其他目的（例如，提供文件的哈希以确认其真实性，或提供随机哈希数据库列以提供伪随机排序顺序），那么它们很好（在一定程度上），但不是用于密码或您认为需要保持安全的任何其他内容。

当前密码拥有的最佳实践算法是 BCrypt，具有适当的加盐。

而在 PHP 中实现 BCrypt 密码散列的最佳方法是使用 PHP 的新密码 API。该 API 将作为一组内置函数出现在 PHP 的下一个版本 v5.5 中，该版本将在未来几个月内发布。好消息是他们还为当前 PHP 版本（5.3 和 5.4）的用户发布了向后兼容版本，因此即使 PHP 5.5 尚未发布，您也可以立即开始使用新的 API。

您可以从这里下载兼容性库：[https ://github.com/ircmaxell/password_compat](https://github.com/ircmaxell/password_compat)

另外：你问什么是“盐”。既然我在这个答案中提到过几次，我也应该解决这部分问题。

Salt基本上是在对密码进行哈希处理时添加到密码中的附加字符串，以使其更难破解。

例如，攻击者可能提前知道给定密码字符串的散列值是什么，甚至是一大堆给定密码字符串。如果他可以掌握您的散列数据并且您没有使用盐，那么他可以将您的散列与他的已知密码列表进行比较，如果您的任何用户使用容易猜到的密码，他们将是无论使用什么散列方法，都可以在几秒钟内破解。

但是，如果您在对密码进行哈希处理时添加了一个秘密的额外字符串，那么哈希值将与原始密码的标准哈希值不匹配，从而使攻击者更难找到该值。

好消息是，如果您使用的是我上面提到的 API，那么您不必太担心这方面的细节，因为 API 会为您处理加盐。

希望有帮助。

# php - Memcache 和 Mysqli 插入语句的建议

> ID：14752417
> 
> 赞同：0
> 
> 时间：2013-02-07T13:35:23.260
> 
> 标签：php, mysqli, memcached

好的，过去几天我一直在围绕 Memcache 工作，试图整理我能找到的最有用的文章（主要来自 Stackoverflow）

我了解使用 memcache 中的键创建值，并且已阅读正确/有效的键命名很重要。似乎使密钥唯一的最好方法是使用 $id。我的问题是如何在没有 $id 的情况下使密钥唯一（例如，如果 $id 只是在我的 Mysqli 数据库表中自动递增）

Memcache 插入和检索的示例如下：

```
$sql = "INSERT INTO products SET id = $id, name = $name";
// Run Insert Query Here using prepared statement
if (success === TRUE)
{
    //set a key
    $key = 'product_'.$id ;
    $product = array('id' => $id, 'name' => $name);
    $memcache->set($key, $product);
} 
```

我相信这可以正常工作，但我的问题是，如果我无法访问 $id，如何使密钥唯一？因为我可以使用该名称，但有可能两个用户可能具有相同的名称。

我希望这是有道理的。任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:37:52.307

您必须创建一个唯一的 ID，

3个解决方案：

*   使用[uniqid()](http://php.net/manual/fr/function.uniqid.php)
*   使用此解决方案[UUID 生成器](http://www.google.fr/url?sa=t&rct=j&q=php%20uuid&source=web&cd=3&cad=rja&ved=0CEMQFjAC&url=https://stackoverflow.com/questions/2040240/php-function-to-generate-v4-uuid&ei=3K0TUc29A7GZ0QXM-4C4CQ&usg=AFQjCNHUn2wnEn6nFSZ3rDCPLUG01rNujg&bvm=bv.42080656,d.d2k)
*   字符串的哈希（例如： md5('table_name_id:'.$id) 或 sha1('table_name_id:'.$id) ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:03:33.363

如果您使用 MySQL 自动为您生成 ID（通过`AUTO_INCREMENT`列），那么为什么不向 MySQL 询问它为新行提供的 ID 呢[`$mysqli->insert_id()`](http://www.php.net/manual/en/mysqli.insert-id.php)？

例子：

```
$result = $mysqli->query("insert into products set name='best product ever'");
if ($result === TRUE) {
    // put it into memcached
    $key = 'product_' . $mysqli->insert_id();
    $product = array('id' => $id, 'name' => $name);
    $memcache->set($key, $product);
} 
```

# php - php获取真实IP地址

> ID：14752420
> 
> 赞同：-2
> 
> 时间：2013-02-07T13:35:38.543
> 
> 标签：php, ip

嗯， `$_SERVER['REMOTE_ADDR']`WhatIsMyIP[显示](http://www.whatismyip.com/)了两个不同的 IP 地址。我想捕获 IP 地址，就像它在“whatismyip”上的显示方式一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T16:09:28.903

一些网络101：

```
 +--+
    |  |
    +--+
whatismyip.com                 +--+
108.162.207.135         +----- |  |
                        |      +--+
     |       +--+       |  your computer
     +------ |  | ------+  10.127.254.21
             +--+       |
          NAT router    |      +--+
          85.89.XX.XX   +----- |  |
                               +--+
                          your web server
                           10.127.254.22 
```

如果这是您的网络设置，`your web server`将看到两者通信时`10.127.254.21`的 IP 。`your computer`这是因为要将数据从 路由`your computer`到`your web server`，数据包只需要直接在两者之间的线路上传输。如果两者是同一台机器，它甚至不需要这样做。

`whatismyip.com``85.89.XX.XX`如果您尝试从 访问它，它将被视为原始 IP 地址，因为数据会在从到的途中`your computer`遍历您。NAT 路由器使用 NAT 技术代理请求，在此过程中隐藏您的*实际*IP 地址。看起来请求来自路由器，而不是您的.`NAT router``your computer``whatismyip.com`*`whatismyip.com``your computer`*

 *想要从头开始得到`85.89.XX.XX`答案是相当随意的。这不是“你的真实IP”，它是路由器的IP，与和之间的通信没有任何关系。`$_SERVER['REMOTE_ADDR']``your web server``your computer``your web server`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:37:23.397

该站点显示您的全球 IP 地址（您用来连接到互联网的地址）。`REMOTE_ADDR`显示客户端地址，我猜是你自己的机器，根本不通过互联网。这就是为什么它向您显示本地 IP 地址，而不是全局 IP 地址。

底线：您使用您的全局地址请求远程服务器 (whatismyip.com)，但使用您的本地地址请求您的本地服务器（如果它在同一台机器上，则为 127.0.0.1）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T13:56:45.657

当您运行本地 Web 服务器并使用`$_SERVER['REMOTE_ADDR']`它时，它将返回您在本地网络上的地址（如果在另一台计算机上）或 127.0.0.1（又名 localhost）如果在您自己的计算机上。而“我的 IP 是什么”将查看您的网络到 Internet 的 IP 地址。我希望这有助于澄清正在发生的事情。

无论如何，`$_SERVER['REMOTE_ADDR']`在适当的 Web 服务器上“实时”运行时应该可以正常工作，所以如果这是您计划做的，您不必担心。*

# correlation - Loadrunner 重放错误

> ID：14752421
> 
> 赞同：0
> 
> 时间：2013-02-07T13:35:42.367
> 
> 标签：correlation, loadrunner, wicketstuff

我正在 web/http 协议上录制脚本，但是在回复时出现错误

记录脚本两次并手动检查差异我发现我的 URL 中有一些“侦听器”，例如：

```
web_submit_data("bla_bla_2", 

            "Action=http://e34jbsl00267.somesone.se:8080/xxx/xxx/81174/xxx?5-1.IBehaviorListener.0-considerSomeList-considerSomeRepeater-4-considerSomeListItem-considerSomeMain-innerPanel-considerDetails-considerForm-considerRulesChoices",
            "Method=POST", 
```

当从 url 的末尾删除所有内容到“xxx？5-”时，脚本可以正常重播，但是当有这些监听器时，它不会出现 500 错误，并且在新浏览器中粘贴上面的 url 会给我一个错误从应用程序生成的页面。

这闻起来像相关性，但我看不到服务器返回的这些监听器，所以我知道相关性是不可能的。

帮助？

BR福格马格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:56:22.973

记录两次并比较记录。如果不同，则这将证实相关假设。通常，当出现 500 时，除非请求格式错误，否则它只是与先前请求中的应用程序状态脱节，返回了意外页面。

您可以通过遵循标准测试实践来交叉检查意外页面，对于每一步都有预期的结果。使用 web_reg_find() 或 web_reg_save_param() 检查每个提交的页面请求中的值，这些值表明预期的页面已返回。如果未返回预期页面，则中断业务流程脚本的流程，进行清理，然后返回业务流程或进入下一个迭代。（ return(1); 将导致系统立即迭代而不考虑迭代步调）

# c# - SQLite 冲突解决不起作用

> ID：14752422
> 
> 赞同：1
> 
> 时间：2013-02-07T13:35:42.693
> 
> 标签：c#, sqlite

我有一个包含 3 个表的 SQLite 数据库。

我正在尝试使用已经存在的主键将一行插入其中一个。主键是整数类型。

由于违反约束，该语句应该失败。在我的 c# 程序中，它没有失败，但也没有插入任何东西。所以基本上它就像我用`insert or ignore`. 如果我`insert or fail`明确使用它仍然不起作用。从 SQLite 管理器 firefox 插件打开数据库时也会发生这种情况。但是，如果我在 Sqliteman 中打开数据库，则查询会按预期失败。

是否有编译指示或我可能错过的东西？

编辑：这是表定义：

```
CREATE TABLE block(offset integer primary key,length integer,originaloffset integer,originalLength integer,page integer)
CREATE UNIQUE INDEX block_original_offset_index on block(originaloffset,offset,length) 
```

# java - Freemarker 字符串突出显示

> ID：14752428
> 
> 赞同：0
> 
> 时间：2013-02-07T13:36:09.713
> 
> 标签：java, freemarker

我想用 searchedText 字符串突出显示字符串的一部分。

示例：我有一个产品参考 abcDeFg（区分大小写），有人使用参考“def”搜索产品。结果应该是`abc<span class="hl">DeF</span>g`

问题：结果应该是突出显示的产品引用（区分大小写）异常结果：`abc<span class='light'>DeF</span>g` 我的结果：`abc<span class='light'>def</span>g`（def 很小）

目前我正在使用

```
 <#assign prodRef = product.getReference()>
 <#if (prodRef?lower_case?index_of(searchedText?lower_case) > -1)>
   <#assign textToReplace = "<span class='light'>" + searchedText + "</span>">
   ${product.reference?replace(searchedText, textToReplace, "i")}
 </#if> 
```

有人能告诉我如何解决这个问题吗？基本上我需要替换字符串函数来保持原始引用的大小写敏感。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T00:28:25.840

正则表达式可以单独做到这一点：

```
${product.reference?replace(
     "(" + searchedText + ")",
     "<span class='light'>$1</span>",
     "ri"
)} 
```

但是，then`searchText`不能包含任何在正则表达式中具有特殊含义的字符（或必须转义的字符）。

# php - Zend_Db_Select 和 N:N 关系

> ID：14752436
> 
> 赞同：1
> 
> 时间：2013-02-07T13:36:46.020
> 
> 标签：php, zend-framework

我在 Zend_Db_Select 上遇到了一些麻烦，自从我使用它很久以前（-：我需要一个这样的结果数组：

```
USER 0
 ID -> 1
 MY_NUMBERS -> (array)
    -> 1 ONE
    -> 2 TWO

USER 1 (array)
 ID -> 2 (int)
 MY_NUMBERS -> (array)
    -> 1 ONE
    -> 2 TWO
    -> 3 THREE
    -> 10 TEN 
```

这是我的查询的一部分

```
$select->from(array('USERS' => $table))
    ->join(
        array('USERS_NUMBERS' => 'USERS_HAS_NUMBERS'), // many to many
        'USERS.ID = USERS_NUMBERS.USER_ID'
    )
   ->joinLeft(
        array('N' => 'NUMBERS'),
        'USERS_NUMBERS.NUMBER_ID = NUMBERS.ID', 
        array('MY_NUMBERS' => 'NUMBERS.NUMBER')
   ); 
```

但是在我为每个现有关系返回一条记录的那一刻，如果用户 1 有 5 个数字，我会为该用户返回 5 条完整记录。

我知道我的选择在获取我需要的数组时是错误的，但我必须知道该怎么做:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:55:27.780

我会使用 Zend_Db_Table 并在其中设置关系，因此您的代码也更具可读性。[http://framework.zend.com/manual/1.12/en/zend.db.table.relationships.html](http://framework.zend.com/manual/1.12/en/zend.db.table.relationships.html)

然后，当您拥有用户时，您可以执行以下操作：

```
$user->findDependentRowset('numbers'); 
```

# iphone - 撤消 CGContext 行

> ID：14752438
> 
> 赞同：0
> 
> 时间：2013-02-07T13:36:48.323
> 
> 标签：iphone, objective-c, draw, cgcontext, undo

我知道这种帖子被问了很多时间，但我在谷歌和这个网站上搜索了很多，没有找到任何解决方案，这就是我发布这个问题的原因。我想撤消我绘制的 CGContext 线，而不使用 UIBezierPath 或其他任何东西。有办法吗？这是我用来绘制的代码：

```
 - (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

UITouch *touch = [touches anyObject];
CGPoint currentPoint = [touch locationInView:mainImageView];

UIGraphicsBeginImageContext(mainImageView.frame.size);
[mainImageView.image drawInRect:CGRectMake(0, 0, mainImageView.frame.size.width, mainImageView.frame.size.height)];

CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
CGContextSetLineWidth(UIGraphicsGetCurrentContext(), dimension);

const CGFloat *components = CGColorGetComponents([color CGColor]);
CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), components[0], components[1], components[2], components[3]);

CGContextBeginPath(UIGraphicsGetCurrentContext());
CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);
CGContextStrokePath(UIGraphicsGetCurrentContext());

mainImageView.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

lastPoint = currentPoint;} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:59:10.917

要添加撤消：

一旦图像被涂抹，您就无法在图像中显示任何信息......

您要么必须在每次更改图像时保留图像的副本（大量内存，尽管这可以通过仅保留更改区域的副本来减少）或者记录用户的绘图步骤然后重播它们撤消后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:57:44.260

由于您正在绘制图像，因此您可以将图像归零，可见线将消失。

```
mainImageView.image = NULL;
// Or
mainImageView.image = originalImage; // Where originalImage is your background if you're using one. 
```

**更新**

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    CGPoint currentPoint = [touch locationInView:mainImageView];

    UIGraphicsBeginImageContext(mainImageView.frame.size);

    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), dimension);

    const CGFloat *components = CGColorGetComponents([color CGColor]);
    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), components[0], components[1], components[2], components[3]);

    CGContextBeginPath(UIGraphicsGetCurrentContext());
    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);
    CGContextStrokePath(UIGraphicsGetCurrentContext());

    // Add the line as a subView.
    [mainImageView addSubView:[[UIImageView alloc] initWithImage:UIGraphicsGetImageFromCurrentImageContext()]];
    UIGraphicsEndImageContext();

    lastPoint = currentPoint;

}

- (void)undoLastLine
{
    [mainImageView.subviews.lastObject removeFromSuperview];
} 
```

# matlab - matlab - vlfeat - vl_pegasos (svm) 分类

> ID：14752440
> 
> 赞同：1
> 
> 时间：2013-02-07T13:36:50.523
> 
> 标签：matlab, svm, vlfeat

我正在使用 Matlab 中的[VLFeat](http://www.vlfeat.org/)库进行一些图像分析工作。我想使用他们的 Pegasos SVM 实现，因为他们已经实现了一些内核，特别是 Chi2 内核。

但是，我发现文档让我感到困惑。按照[本教程](http://www.vlfeat.org/overview/pegasos.html)，我有一个模型`w`和一个偏差`b`，但是我如何使用它来对我的测试数据进行分类？

我的起始数据是这样的（尺寸）..

```
size(train_data) = 
    200    210

size(train_labels) =
    1      210

size(test_data) =
    200    140

size(test_labels) =
    1      140 
```

我可以用..构建数据集

```
dataset = vl_maketrainingset(train_data, int8(train_labels)) 
```

给我..

```
dataset = 
      data: [200x210 double]
    labels: [1x210 int8] 
```

然后我可以建立模型..

```
[w b info] = vl_svmpegasos(dataset,0.01,'MaxIterations',5000); 
```

`w``200 x 1`我的模型 ('w'eights?) 是一个大小为 0 到 1的向量大小。

我相信我需要将此向量乘以 my`test_data`以获得某种*分数*，但我不确定这些分数的含义是什么。

任何方向都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:01:22.523

你看过他们的[Caltech 101 示例代码](http://www.vlfeat.org/applications/apps.html)吗？它使用pegasos并对结果进行了很好的评估。

这是相关的代码片段：

```
% --------------------------------------------------------------------
%                                                            Train SVM
% --------------------------------------------------------------------

lambda = 1 / (conf.svm.C *  length(selTrain)) ;
w = [] ;
for ci = 1:length(classes)
  perm = randperm(length(selTrain)) ;
  fprintf('Training model for class %s\n', classes{ci}) ;
  y = 2 * (imageClass(selTrain) == ci) - 1 ;
  data = vl_maketrainingset(psix(:,selTrain(perm)), int8(y(perm))) ;
  [w(:,ci) b(ci)] = vl_svmpegasos(data, lambda, ...
                                  'MaxIterations', 50/lambda, ...
                                  'BiasMultiplier', conf.svm.biasMultiplier) ;

  model.b = conf.svm.biasMultiplier * b ;
  model.w = w ;

% --------------------------------------------------------------------
%                                                Test SVM and evaluate
% --------------------------------------------------------------------

% Estimate the class of the test images
scores = model.w' * psix + model.b' * ones(1,size(psix,2)) ;
[drop, imageEstClass] = max(scores, [], 1) ;

% Compute the confusion matrix
idx = sub2ind([length(classes), length(classes)], ...
              imageClass(selTest), imageEstClass(selTest)) ;
confus = zeros(length(classes)) ;
confus = vl_binsum(confus, ones(size(idx)), idx) ; 
```

# iphone - 如何捕获由 system() 启动的进程的标准输出

> ID：14752443
> 
> 赞同：0
> 
> 时间：2013-02-07T13:36:53.833
> 
> 标签：iphone, ios, io-redirection

如何将输出保存`system("openssl enc -aes-128-cbc -k secret -P -md sha1 > FILENAME")`到文件中。

我尝试了以下方法：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains

(NSDocumentDirectory, NSUserDomainMask, YES);

NSString *documentsDirectory = [paths objectAtIndex:0];

NSString *fileName = [NSString stringWithFormat:@"%@/textfile.txt",

                      documentsDirectory];

NSString *str=[NSString stringWithFormat:@"openssl enc -aes-128-cbc -k secret -P -md sha1 > %s",[fileName UTF8String]];
NSLog(@"AES Key is %@",str);
system([str UTF8String]);

NSString *strAES = [NSString stringWithContentsOfFile:fileName encoding:nil error:nil];
NSLog(@"strAES Key is %@",strAES);

NSString *strAESKey=[[[[strAES componentsSeparatedByString:@"\n"] objectAtIndex:1] componentsSeparatedByString:@"="] objectAtIndex:1];
NSLog(@"strAESKey Key is %@",strAESKey);

// NSString *content = @"One\nTwo\nThree\nFour\nFive";
  [str writeToFile:fileName atomically:NO encoding:NSStringEncodingConversionAllowLossy error:nil];` 
```

我哪里错了？

该`system()`函数将输出发送到控制台，但由于 iPhone 没有控制台，我需要将输出重定向到文本文件并从文件中获取密钥以将其用于加密/解密。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:07:22.873

首先：请注意，我认为您不能`system(3)`在未越狱的 iOS 上使用。但我不确定，所以我将解释如何做到这一点：

这有点棘手。

要实现它，您必须知道每个进程都使用三个文件描述符打开：一个用于读取（`stdin`用于标准输入）和两个用于写入（`stdout`用于标准输出和`stderr`标准错误输出）。它们的 fd 编号为 0 ( `stdin`)、1 ( `stdout`) 和 2 ( `stderr`)。

要将标准输出或标准错误从程序重定向到文件，您必须执行以下操作：

*   首先，`fork(2)`过程。在父进程中`waitpid(2)`为子进程。
*   在子进程中：
    *   重新打开 ( `freopen(3)`)`stdout`并`stderr`转到您希望将输出重定向的文件。
    *   用来`execve(2)`执行你要调用的程序
    *   当命令终止时，父进程会得到一个 SIGCHLD 并且`waitpid(2)`应该返回

括号中的数字描述了`man 2 waitpid`该函数的手册页（例如）中的章节。

希望这会有所帮助，如果您有更多问题，请询问:-)

**更新：**由于 OP 只想获取输出，而不是具体到文件中，您可以使用`popen(3)`：

```
int status;
char value[1024];
FILE *fp = popen("openssl enc -aes-128-cbc -k secret -P -md sha1", "r");

if (fp == NULL) exit(1); // handle error

while (fgets(value, 1024, fp) != NULL) {
  printf("Value: %s", value);
}

status = pclose(fp);
if (status == -1) {
  /* Error reported by pclose() */
}
else {
  /* Use macros described under wait() to inspect `status' in order
   to determine success/failure of command executed by popen() */
} 
```

# java - 如何使用正则表达式从树结构中提取单词

> ID：14752448
> 
> 赞同：1
> 
> 时间：2013-02-07T13:37:03.817
> 
> 标签：java, regex, regular-language

我需要从树结构中提取名词短语，但我无法使用正则表达式模式从树结构中提取名词。

这是树结构

(TOP (ADJP (JJ 欢迎) (PP (TO to) (NP (NNP Regular) (NNP Expression) (NNS learnings)))))

我需要提取所有像 NP、NNP、NNS 等 pos 标签的词；我需要使用正则表达式模式获取正则、表达式、学习等单词。

有人可以帮我如何得到这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:43:40.873

不确定这是否是您想要的，但这会为您提取这些词：

```
Pattern regexpPattern = Pattern.compile("([A-Z]?[a-z]+)\\)");
Matcher m = regexpPattern.matcher("your string");
while (m.find()) {
    System.out.println(m.group(1));
} 
```

# javascript - mongodb打印没有空格的json，即unpretty json

> ID：14752450
> 
> 赞同：35
> 
> 时间：2013-02-07T13:37:12.017
> 
> 标签：javascript, mongodb

我正在使用 mongodb 2.2.0 并尝试在一行中打印 json，而不是使用`printjson()`or进行“漂亮”打印`find().pretty()`。即我需要以 json 格式列出的文档，只需运行命令即可`db.collection.find().limit(10)`，但我需要使用 javascript 文件中的光标来完成，如下所示：

```
var cursor = db.collection.find().sort({_id:-1}).limit(10000);
while(cursor.hasNext()){
    //printNonPrettyJson(cursor.next()); //How???!
} 
```

`print()`不做这项工作，它只是打印一些关于对象标识符的乱码。

我想要这个的原因是因为我从控制台调用 javascript 文件，然后将输出传递给一个文件，如下所示：

```
mongo mydatabase myjsfile.js >> /tmp/myoutput.txt 
```

编辑：我希望输出如下：

```
> db.zips.find().limit(2)
{ "city" : "ACMAR", "loc" : [ -86.51557, 33.584132 ], "pop" : 6055, "state" : "A
L", "_id" : "35004" }
{ "city" : "ADAMSVILLE", "loc" : [ -86.959727, 33.588437 ], "pop" : 10616, "stat
e" : "AL", "_id" : "35005" }
> 
```

不喜欢：

```
> db.zips.find().limit(2).pretty()
{
        "city" : "ACMAR",
        "loc" : [
                -86.51557,
                33.584132
        ],
        "pop" : 6055,
        "state" : "AL",
        "_id" : "35004"
}
{
        "city" : "ADAMSVILLE",
        "loc" : [
                -86.959727,
                33.588437
        ],
        "pop" : 10616,
        "state" : "AL",
        "_id" : "35005"
}
> 
```

正如所有其他方法所给出的。同样，我需要使用游标对象。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-09-16T10:52:52.767

```
var cursor = db.collection.find().sort({_id:-1}).limit(10000);
while(cursor.hasNext()){
    printjsononeline(cursor.next());
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T13:42:15.107

尝试- 在[MongoDB 文档](http://docs.mongodb.org/manual/core/read-operations/#cursors)`print(tojson())`中有一个使用光标进行打印的示例。

```
 var myCursor = db.inventory.find( { type: 'food' } );
    var myDocument = myCursor.hasNext() ? myCursor.next() : null;

    if (myDocument) {
        var myItem = myDocument.item;
        print(tojson(myItem));
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T14:12:30.010

你总是可以为此做一个 JS hack：

```
> db.tg.find().forEach(function(doc){ print(tojson(doc).replace(/(\r\n|\n|\r|\s)/gm, '')); })
{"_id":ObjectId("511223348a88785127a0d13f"),"a":1,"b":1,"name":"xxxxx0"} 
```

不漂亮但有效

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-17T09:26:13.873

使用“排序”和“限制”，可以自定义结果。使用 mongoexport --type=csv ，可以将结果打印到 csv 文件中，该文件可以在 xls 或一行中读取。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T14:47:46.307

如果每个项目都有 {} 括号并且没有其他项目，则使用正则表达式将其拆分在括号上。

这会将其拆分为 {..} {..} 项。但是如果有嵌套的 {} 它将不起作用。

```
var res = s.match(/\{(.|\s)*?\}/g);
if(res) for(var x=0;x<res.length;x++){
    // print  res[x].replace(/\s+/g," ");// w/o spaces
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-01T15:27:45.237

这是我从命令行使用的

```
mongoexport -d $dbname -c $collection -q '{ "id" : -1 }' 
```

不确定你可以 /sort /limit 它

# javascript - 在 Adob e Reader JavaScript API 中将打印机重置为默认打印机

> ID：14752457
> 
> 赞同：3
> 
> 时间：2013-02-07T13:37:27.683
> 
> 标签：javascript, pdf, printing, pdf-generation, adobe-reader

我有一个 PDF 文件，里面有一些脚本。脚本允许更改打印文档的打印机（因为我们有专用的条形码打印机和其他普通文档的打印机）。问题是，我不知道如何将打印机重置为计算机的默认设置。

打印代码如下：

```
var pp = getPrintParams(); // get printing parameters
pp.interactive = pp.constants.interactionLevel.automatic; // do not prompt user
pp.printerName = 'barcode_printer'; // set printer name
this.print(pp); // print 
```

根据[JavaScript API 参考](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/js_api_reference.pdf)（第 314、583 页），`getPrintParams()`返回默认打印参数并`pp.printerName`设置为`''`（空字符串）表示默认打印机。我意识到这一切都不是真的。实际上`getPrintParams()`返回最后使用的参数（不是新的/默认参数）并且`pp.printerName = ''`不会将打印机重置为默认参数，而是使用最后选择的打印机。

此外，该`PrintParams`对象似乎在不同打开的文档之间共享，因此我无法将默认打印机的名称（从第一次调用中读取`getPrintParams()`）存储在某个变量中，因为实际上我不知道读取的值是指默认打印机还是它已被其他打开的文档更改。

该行为在不同版本的 Adob​​e Reader（9、10、11）和 Foxit Reader 中是一致的。

请帮忙，如何以编程方式将打印机重置为默认打印机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:15:15.670

实际上，可以使用该`global`对象来解决该问题，该对象在一个 adobe reader 实例中在多个打开的文档之间共享。

第一次加载文档时，我检查`global`对象是否包含（我自己的）属性`defaultPrinter`，除非我调用`getPrintParams()`，读取`printerName`字段并将其分配给`global.defaultPrinter`. 然后我可以读取该字段以获取默认的打印机名称。代码如下：

```
if (global.defaultPrinter === undefined) {
    global.defaultPrinter = getPrintParams().printerName;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-26T07:58:03.047

设置`pp.printerName = '##NameOfAPrinterThatDoesntExists##'`将重置默认打印机。别紧张。

# java - 如何分析本机 JNI 库

> ID：14752459
> 
> 赞同：2
> 
> 时间：2013-02-07T13:37:30.567
> 
> 标签：java, c, jvm, java-native-interface, profiling

如何分析用 C 编写的 Java 本机接口库？

我知道常用的 C 分析器，但我的问题是如何分析***整个***集合，包括对 JVM 方法的调用，这可能会减慢程序的速度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T10:59:56.227

在对这里提出的一些方法进行一些研究和测试后，我最终使用了`sprof`.

基本上我遵循了[这个答案中](https://stackoverflow.com/a/4959168/838642)的说明。一些评论：

1.  我必须`LD_PROFILE_OUTPUT`留空才能得到结果`/var/tmp/`，否则不会生成输出文件。
2.  我分配`LD_PROFILE=libXXXX.so`

为了获取配置文件，我运行了加载和使用本机 JNI 库的 Java 代码，我得到了一个包含分析结果的文件：

`/var/tmp/libXXXX.so.profile`

获得文件后，您可以使用以下命令读取它：

`sprof /path/to/libXXXX.so /var/tmp/libXXXX.so.profile`

分析的结果遵循与 相同的模板`gprof`。[在这里](http://www.cs.utah.edu/dept/old/texinfo/as/gprof_toc.html)您可以找到对内容及其含义的描述。

# iphone - 从存储在 NSArray 中的对象中获取类/类型

> ID：14752462
> 
> 赞同：0
> 
> 时间：2013-02-07T13:37:37.767
> 
> 标签：iphone, ios, objective-c

我有不同对象的数组，例如：UISegmentedControl、UILabel 等。
如果我使用“objectAtIndex”，如何获取对象类型（类）？

我试着这样做：

```
//while my object count ok
while (i< [allChandeableSubview count]) {

  id random = [allChandeableSubview objectAtIndex:i];

  if([random isKindOfClass:[UISegmentedControl class]]){

     UISegmentedControl *newSegment = [[UISegmentedControl alloc]init];
     newSegment = random;
     newSegment.selectedSegmentIndex = 0;

   }
i++;
} 
```

但我认为这是错误的。请帮帮我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T13:44:49.210

试试这个:)

```
 for (id object in array) 
    {
        if ([object isKindOfClass:[UISegmentedControl class]])  
        {
             UISegmentedControl *segment = (UISegmentedControl *) object;
             segment.selectedSegmentIndex = 0;
             break;
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T13:44:23.597

我认为您不需要重新创建新对象：

```
//while my object count ok
while (i< [allChandeableSubview count]) {

  id random = [allChandeableSubview objectAtIndex:i];

  if([random isKindOfClass:[UISegmentedControl class]]){

     UISegmentedControl *newSegment = (UISegmentedControl*)random;
     newSegment.selectedSegmentIndex = 0;

   }
i++;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T13:46:50.050

首先，您可以稍微优化该代码：

编码

```
UISegmentedControl *newSegment = [[UISegmentedControl alloc]init];
newSegment = random; 
```

什么都不做，只是分配`random`给`newSegment`（`UISegmentedControl`上一行中创建的值一旦`newSegment`设置为指向另一个变量，就会“丢失”，并且在由 ARC 创建后立即`UISegmentedControl`被`dealloc`'ed - 假设您使用 ARC）。

其次，您的代码可以正常工作，但您可以说它不是非常面向对象的。面向对象和后期绑定语言（如Objective-C）背后的理念是，您只需向您的对象发送您想要的任何消息，并且它应该响应（即，实现一个处理消息的方法）。

因此，如果您想更加面向对象，那么您可以创建自己的 UIKit 类的子类，并添加一个`setup`方法（或类似名称），您只需从上面的代码片段中调用该方法，而无需基于类的显式测试。

它会变成

```
while (i< [allChandeableSubview count]) {

  id random = [allChandeableSubview objectAtIndex:i];

  [random setup];

  i++;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T13:49:26.480

希望下面的示例代码可以帮助你

```
UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];

UILabel *lbl = [[UILabel alloc] init];

UIView *vi = [[UIView alloc] init];

UISegmentedControl *segment = [[UISegmentedControl alloc] init];

NSMutableArray *marr = [NSMutableArray arrayWithObjects:btn, lbl, vi, segment, nil];

for (id obj in marr)
{
    Class cls = [obj class];

    id newObj = [[cls alloc] init];

    NSLog(@"class type %@", [newObj class]);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T14:37:37.993

如果您正在为 iOS 4+ 开发（我猜您是），那么最快的方法是使用[这里](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/enumerateObjectsUsingBlock%3a)`-enumerateObjectsUsingBlock`的解释。

所以，在你的情况下，我会写如下：

```
[allChandeableSubview enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    if ([obj isKindOfClass:[UISegmentedControl class]]) {
        UISegmentedControl *newSegment = (UISegmentedControl *)obj;

        newSegment.selectedSegmentIndex = 0;

        /* remove comment to stop enumerating
         *stop = YES;
         */
    }
}]; 
```

# java - 在java中将整数转换为字节数组，给出一个差异值

> ID：14752464
> 
> 赞同：-2
> 
> 时间：2013-02-07T13:37:41.550
> 
> 标签：java

*   我试图将大小为 4 的整数转换为字节数组，但它给了我奇怪的值。

    ```
     byte[] bytes1 = my_int_to_bb_le(196,4);
       public static  byte[] my_int_to_bb_le(int myInteger,int length)
       {
         return ByteBuffer.allocate(length).order(ByteOrder.LITTLE_ENDIAN).putInt(myInteger).array();
       } 
    ```

*   输出：-60 0 0 0

*   所需输出为：196 0 0 0

    尝试了此代码的替代代码，但无法提供相同的输出

    ```
    public static byte[] convertIntByteArray(int intval,int len)     
    {       
       byte[] intarray = new byte[len];          

       for(int i=0;i<len;i++)        
       {
           if(i==0)
           {
               intarray[i]=(byte)intval;
           }
           else
               intarray[i]=0;        
        } 
        return intarray;     
    } 
    ```

*   输出：-60 0 0 0

*   所需输出为：196 0 0 0

    谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:39:19.120

那是因为，一个（有符号的）字节介于`-128 to 127`

```
public class TestNumber{
  public static void main(String[] args){
    byte b1 = -60;
    int b2 = b1 & 0xFF;
    System.out.println("Without casting "+ b1);
    System.out.println("With casting "+b2);
    System.out.println("Bitwise Trickery " + (b1 & 0xFF));
  }
} 
```

如果您想查看每个数字的位在内存中的排列方式，只需使用`calc.exe`所有 Windows 操作系统提供的，更改`view`为`Programmer`，然后输入一个数字并查看其按位值。这就是我一直使用的按位运算:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:48:44.803

您可以使用以下命令打印字节的无符号表示：

```
for( byte b : byteArray ) {
    System.out.print((b & 0xFF )+" ");
} 
```

但更常见的字节被打印为零填充的十六进制，以获得更舒适的查看格式：

```
for( byte b : byteArray ) {
    System.out.format("%02X ", b);
} 
```

# php - PHP 表单字符集

> ID：14752465
> 
> 赞同：1
> 
> 时间：2013-02-07T13:37:43.627
> 
> 标签：php, character-encoding

我已经经历了几个关于堆栈溢出的类似问题，但没有一个给出结果。在我的简单形式中，我希望允许人们发布字符串，例如`"Pagé Caiçara"`

检查我的html头我有以下元：`<meta charset="UTF-8">`

我的表单标签

```
<form id="contato-form" action="some_file.php" method='POST' accept-charset='UTF-8'> 
```

而且我还有一个隐藏输入来强制 utf 编码：

```
<input name="utf8" type="hidden" value="&#x2713;" /> 
```

但是，如果尝试提交“Pagé Caiçara”并且他们检查我的 $_POST 给了我，它们似乎都不起作用：

```
echo print_r($_POST); 
```

输出：

> > Array ( [nome] => Pagé CaiÃ§ara [empresa] => Company [email] => my@mail.com.br [site] => nenhum.com.br [telefone] => 12 55558349 [mensagem] => Ã¡guia de Ã¡gua [utf8] => âœ“ ) 1

那么......接下来我应该尝试什么？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T14:44:42.147

您的问题的答案取决于您使用该输出的位置：

1.  在 PHP 中处理并返回结果/打印 html 页面

    > 如果您处理给定的数据并在 html 页面中打印结果，`<meta charset="utf-8">`输出将正确显示。

2.  在 PHP 中处理并打印为纯文本

    > 如果您想打印简单的输出，例如`print_r()`在脚本开头添加此行：`header('Content-Type: text/plain; charset=utf-8');`

3.  在 PHP 中处理并写入数据库

    > 如果您已将数据库/表字符集和排序规则设置为正确的值（utf-8），则结果将正确插入数据库中（确保在使用 DB 操作之前执行这些行

`mysql_query("SET NAMES 'utf8'", $db_link);`

`mysql_query("SET CHARACTER SET utf8", $db_link);`

`mysql_query("SET CHARACTER_SET_CONNECTION=utf8", $db_link);`

# php - 在 PHP 中创建配置文件

> ID：14752470
> 
> 赞同：115
> 
> 时间：2013-02-07T13:37:52.873
> 
> 标签：php, configuration-files

我想为我的 PHP 项目创建一个配置文件，但我不确定最好的方法是什么。

到目前为止，我有 3 个想法。

**1-使用变量**

```
$config['hostname'] = "localhost";
$config['dbuser'] = "dbuser";
$config['dbpassword'] = "dbpassword";
$config['dbname'] = "dbname";
$config['sitetitle'] = "sitetitle"; 
```

**2-使用常量**

```
define('DB_NAME', 'test');
define('DB_USER', 'root');
define('DB_PASSWORD', '');
define('DB_HOST', 'localhost');
define('TITLE', 'sitetitle'); 
```

**3-使用数据库**

我将在课堂上使用配置，所以我不确定哪种方式最好，或者是否有更好的方式。

* * *

## 回答 #1

> 赞同：248
> 
> 时间：2013-02-07T13:44:57.183

一种简单而优雅的方法是创建一个`config.php`只返回一个数组的文件（或任何你称之为的文件）：

```
<?php

return array(
    'host' => 'localhost',
    'username' => 'root',
); 
```

接着：

```
$configs = include('config.php'); 
```

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2015-12-07T14:03:01.863

使用 INI 文件是一种灵活而强大的解决方案！PHP 有[一个本地函数](https://secure.php.net/manual/en/function.parse-ini-file.php)来正确处理它。例如，可以像这样创建一个 INI 文件：

**应用程序.ini**

```
[database]
db_name     = mydatabase
db_user     = myuser
db_password = mypassword

[application]
app_email = mailer@myapp.com
app_url   = myapp.com 
```

所以你唯一需要做的就是打电话：

```
$ini = parse_ini_file('app.ini'); 
```

然后，您可以使用`$ini`数组轻松访问定义。

```
echo $ini['db_name'];     // mydatabase
echo $ini['db_user'];     // myuser
echo $ini['db_password']; // mypassword
echo $ini['app_email'];   // mailer@myapp.com 
```

**重要提示：**出于安全原因，INI 文件必须位于非公用文件夹中

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2016-10-16T06:08:10.257

我使用了@hugo_leonardo[解决方案](https://stackoverflow.com/a/14752605/756458)的轻微演变：

```
<?php

return (object) array(
    'host' => 'localhost',
    'username' => 'root',
    'pass' => 'password',
    'database' => 'db'
);

?> 
```

这允许您在包含 php 时使用对象语法：`$configs->host`而不是`$configs['host']`.

此外，如果您的应用程序具有客户端所需的配置（例如 Angular 应用程序），您可以让此`config.php`文件包含您的所有配置（集中在一个文件中，而不是一个用于 JavaScript 和一个用于 PHP）。然后，诀窍是拥有另一个`echo`仅包含客户端信息的 PHP 文件（以避免显示您不想显示的信息，例如数据库连接字符串）。打电话说`get_app_info.php`：

```
<?php

    $configs = include('config.php');
    echo json_encode($configs->app_info);

?> 
```

以上假设您`config.php`包含一个`app_info`参数：

```
<?php

return (object) array(
    'host' => 'localhost',
    'username' => 'root',
    'pass' => 'password',
    'database' => 'db',
    'app_info' => array(
        'appName'=>"App Name",
        'appURL'=> "http://yourURL/#/"
    )
);

?> 
```

因此，您的数据库信息保留在服务器端，但您的应用程序信息可通过 JavaScript 访问，例如`$http.get('get_app_info.php').then(...);`调用类型。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2017-07-13T16:57:43.240

我看到的具有相对优点/缺点的选项是：

**基于文件的机制**

这些要求您的代码在特定位置查找 ini 文件。这是一个难以解决的问题，并且总是出现在大型 PHP 应用程序中。但是，您可能需要解决问题才能找到在运行时合并/重用的 PHP 代码。

常见的方法是始终使用相对目录，或者从当前目录向上搜索以查找在应用程序的基本目录中专门命名的文件。

用于配置文件的常见文件格式是 PHP 代码、ini 格式文件、JSON、XML、YAML 和序列化 PHP

**PHP 代码**

这为表示不同的数据结构提供了极大的灵活性，并且（假设它是通过 include 或 require 处理的）解析的代码将从操作码缓存中获得——从而提高性能。

[include_path](http://php.net/manual/en/ini.core.php#ini.include-path)提供了一种在不依赖额外代码的情况下抽象文件潜在位置的方法。

另一方面，将配置与代码分离的主要原因之一是分离职责。它提供了将附加代码注入运行时的路径。

如果配置是从工具创建的，则可以验证工具中的数据，但没有标准函数来转义数据以嵌入到 PHP 代码中，如 HTML、URL、MySQL 语句、shell 命令...... .

**序列化数据** 这对于少量配置（最多约 200 项）相对有效，并且允许使用任何 PHP 数据结构。它只需要很少的代码来创建/解析数据文件（因此您可以花费精力确保仅在适当授权的情况下编写文件）。

自动处理写入文件的内容的转义。

由于您可以序列化对象，它确实创造了一个通过读取配置文件（__wakeup 魔术方法）来调用代码的机会。

**结构化文件**

按照 Marcel 或 JSON 或 XML 的建议将其存储为 INI 文件还提供了一个简单的 api，用于将文件映射到 PHP 数据结构（除了 XML，用于转义数据并创建文件），同时消除代码调用使用序列化 PHP 数据的漏洞。

它将具有与序列化数据相似的性能特征。

**数据库存储**

在您有大量配置但对当前任务所需的内容有选择性的情况下，这是最好的考虑 - 我惊讶地发现在大约 150 个数据项中，从本地 MySQL 实例检索数据比从反序列化数据文件。

OTOH 它不是存储用于连接数据库的凭据的好地方！

**执行环境**

您可以在PHP 运行的[执行环境中设置值。](http://php.net/manual/en/function.getenv.php)

这消除了 PHP 代码在特定位置查找配置的任何要求。OTOH 它不能很好地扩展到大量数据，并且难以在运行时进行普遍更改。

**在客户端**

我没有提到存储配置数据的一个地方是在客户端。再次，网络开销意味着这不能很好地扩展到大量配置。并且由于最终用户可以控制数据，因此必须以可检测到任何篡改的格式（即使用加密签名）存储数据，并且不应包含任何因泄露而受到损害的信息（即可逆加密）。

相反，这对于存储最终用户拥有的敏感信息有很多好处 - 如果您没有将其存储在服务器上，则无法从那里窃取。

**网络目录** 存储配置信息的另一个有趣的地方是 DNS / LDAP。这将适用于少量的小信息——但你不需要坚持第一范式——考虑一下，例如[SPF](https://en.wikipedia.org/wiki/Sender_Policy_Framework)。

基础设施支持缓存、复制和分发。因此，它适用于非常大的基础设施。

**版本控制系统**

配置，比如代码应该被管理和版本控制——因此直接从你的 VC 系统获取配置是一个可行的解决方案。但这通常会带来显着的性能开销，因此缓存可能是可取的。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-02-07T13:43:29.817

嗯 - 将数据库配置数据存储在数据库中会有点困难 - 你不觉得吗？

但实际上，这是一个非常固执己见的问题，因为任何风格都非常有效，而且这都是偏好问题。就个人而言，我会选择配置变量而不是常量——通常是因为除非必要，否则我不喜欢全局空间中的东西。我的代码库中的所有函数都不能轻松访问我的数据库密码（我的数据库连接逻辑除外）——所以我会在那里使用它，然后可能会销毁它。

**编辑**：回答您的评论-解析机制都不是最快的（ini、json等）-但它们也不是您真正需要关注优化的应用程序部分，因为速度差异会在这样的小文件上可以忽略不计。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-10-18T11:31:03.017

您可以创建一个配置类巫婆静态属性

```
class Config 
{
    static $dbHost = 'localhost';
    static $dbUsername = 'user';
    static $dbPassword  = 'pass';
} 
```

那么你可以简单地使用它：

```
Config::$dbHost 
```

* * *

有时在我的项目中，我使用设计模式 SINGLETON 来访问配置数据。使用起来非常舒适。

为什么？

例如，您的项目中有 2 个数据源。您可以选择启用其中的女巫。

*   mysql
*   json

您选择的配置文件中的某处：

```
$dataSource = 'mysql' // or 'json' 
```

当您更改源时，整个应用程序应该切换到新的数据源，工作正常并且不需要更改代码。

例子：

配置：

```
class Config 
{
  // ....
  static $dataSource = 'mysql';
  / .....
} 
```

单例类：

```
class AppConfig
{
    private static $instance;
    private $dataSource;

    private function __construct()
    {
        $this->init();
    }

    private function init()
    {
        switch (Config::$dataSource)
        {
            case 'mysql':
                $this->dataSource = new StorageMysql();
                break;
            case 'json':
                $this->dataSource = new StorageJson();
                break;
            default:
                $this->dataSource = new StorageMysql();
        }
    }

    public static function getInstance()
    {
        if (empty(self::$instance)) {
            self::$instance = new self();
        }
        return self::$instance;
    }

    public function getDataSource()
    {
        return $this->dataSource;
    }
} 
```

...以及您代码中的某处（例如，在某些服务类中）：

```
$container->getItemsLoader(AppConfig::getInstance()->getDataSource()) // getItemsLoader need Object of specific data source class by dependency injection 
```

我们可以从系统中的任何地方获取 AppConfig 对象，并且始终获取相同的副本（感谢静态）。类的init()方法在构造函数中调用，保证只执行一次。Init() body 检查 config $dataSource 的值，并创建特定数据源类的新对象。现在我们的脚本可以获取对象并对其进行操作，甚至不知道实际存在哪个具体实现。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-07T13:43:01.913

定义将使常量在您的类中的任何地方都可用，而无需使用全局，而变量在类中需要全局，我会使用定义。但同样，如果 db 参数在程序执行期间发生变化，您可能需要坚持使用变量。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-02-07T13:44:04.773

如果您认为出于任何原因将使用超过 1 db，请使用该变量，因为您将能够更改一个参数以切换到完全不同的 db。即用于测试、自动备份等。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-04-13T06:37:11.263

这是我的方式。

```
 <?php

    define('DEBUG',0);

    define('PRODUCTION',1);

    #development_mode : DEBUG / PRODUCTION

    $development_mode = PRODUCTION;

    #Website root path for links

    $app_path = 'http://192.168.0.234/dealer/';

    #User interface files path

    $ui_path = 'ui/';

    #Image gallery path

    $gallery_path = 'ui/gallery/';

    $mysqlserver = "localhost";
    $mysqluser = "root";
    $mysqlpass = "";
    $mysqldb = "dealer_plus";

   ?> 
```

有任何疑问请评论

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-02-07T13:41:14.897

我通常最终会创建一个包含我的数据库连接的 conn.php 文件。然后我将该文件包含在所有需要数据库查询的文件中。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-12-15T09:03:51.690

You can use this simple one:

```
define('someprop', 0); 
```

and

`echo someprop;` // output 0

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-01-09T14:56:30.200

这样的事情呢？

```
class Configuration
{

    private $config;

    public function __construct($configIniFilePath)
    {
        $this->config = parse_ini_file($configIniFilePath, true);
    }

    /**
     * Gets the value for the specified setting name.
     *
     * @param string $name the setting name
     * @param string $section optional, the name of the section containing the
     *     setting
     * @return string|null the value of the setting, or null if it doesn't exist
     */
    public function getConfiguration($name, $section = null)
    {
        $configValue = null;

        if ($section === null) {
            if (array_key_exists($name, $this->config)) {
                $configValue = $this->config[$name];
            }
        } else {
            if (array_key_exists($section, $this->config)) {
                $sectionSettings = $this->config[$section];
                if (array_key_exists($name, $sectionSettings)) {
                    $configValue = $sectionSettings[$name];
                }
            }
        }

        return $configValue;
    }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-06-08T05:46:36.870

如果我有一个像 config.conf 这样的配置文件（可以是 http://example.com/config.conf）

```
user=cacom
version = 2021608
status= true 
```

这是我的功能：

```
function readFileConfig($UrlOrFilePath){

    $lines = file($UrlOrFilePath);
    $config = array();

    foreach ($lines as $l) {
        preg_match("/^(?P<key>.*)=(\s+)?(?P<value>.*)/", $l, $matches);
        if (isset($matches['key'])) {
            $config[trim($matches['key'])] = trim($matches['value']);
        }
    }

    return $config;
} 
```

我们可以用：

```
$urlRemote = 'http://example.com/default-config.conf';
$localConfigFile = "/home/domain/public_html/config.conf";
$localConfigFile2 = "config.conf";

print_r(readFileConfig($localConfigFile2));
print_r(readFileConfig($localConfigFile));
print_r(readFileConfig($urlRemote)); 
```

# php - 如何使用 Sound Cloud API 按标签搜索特定用户的曲目？

> ID：14752471
> 
> 赞同：10
> 
> 时间：2013-02-07T13:37:52.933
> 
> 标签：php, json, api, soundcloud

我想按仅与我的用户名相关的标签搜索曲目，即皇家歌剧院。

例如：

```
http://api.soundcloud.com/users/royaloperahouse/tracks/?client_id=238947HSGDHSDG&tags=eric 
```

告诉我我需要使用 aq 参数。为了幽默，我搜索：

```
http://api.soundcloud.com/users/royaloperahouse/tracks/??client_id=238947HSGDHSDG&tags=eric&q=e 
```

并简单地从整个 Sound Cloud 中获取声音列表，而不是仅与我的用户相关的声音列表。同样，如果我尝试搜索曲目 API（不是用户）并限制查询，`&user_id`我会得到与所有用户相关的视频，而不是特定于皇家歌剧院的视频。

最终目标是找到皇家歌剧院上传的与特定艺术家相关的所有曲目。目前我们解决这个问题的方法是获取所有上传的曲目（目前为 37 个）并遍历这些曲目以匹配相关标签的曲目。显然，随着我们音乐列表的增长，这将开始成为一个问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:43:57.270

我以前没有使用过这个 API，但经过几次测试后，我想我发现了你的问题。

您不应将**用户**用作第一个 url 段，因为您不是在搜索用户，而是在搜索按用户名和标签过滤的曲目。

而是使用**track**作为第一个 url 段，并使用**q**参数过滤用户名。然后你也可以使用**标签**参数。

测试这个网址：[http ://api.soundcloud.com/tracks?q=username&tags=tag](http://api.soundcloud.com/tracks?q=username&tags=tag)

```
SC.get('/tracks/', {q:'royaloperahouse', tags: 'insights' },  function(result) { 
    console.log(result[0].tag_list);
}); 
```

老实说，我仍然不了解**q**参数。在 API 文档中，您可以在曲目、用户等中找到有关它的引用，并且在搜索页面中他们也谈论它，但我还没有找到任何关于**q**参数在每种查询类型中过滤什么的文档。在 track 中是用户名（和可能的用户 ID）

如果你正在使用这个 API，你应该在他们的 google group 中询问 soundcloud 团队更多这个参数的含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-26T19:50:47.017

首先，了解用户“id”和用户“permalink”的区别。它们都是唯一的用户标识符，但它们是具有不同目的的独立事物。您可以使用前者，但不能使用后者来访问曲目。所以而不是

```
http://.../users/royaloperahouse/... 
```

你应该使用

```
http://.../users/12127832/... 
```

如果您正在寻找其他艺术家，请将 12127832 替换为适当的 ID。此外，您可能应该将 JSON 指定为返回类型。总而言之，您的服务器调用应如下所示：

```
http://api.soundcloud.com/users/12127832/tracks.json?client_id=238947HSGDHSDG&tags=eric 
```

另外：**不要在 Stack Overflow 上发布您的客户 ID！！！**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-27T16:39:45.873

试试这个（你必须检查我的语法）：

```
SC.get('/tracks/',array('user_id' => 'YOUR_ID', q:'royaloperahouse', tags: 'insights' ),  function(result) { 
    console.log(result[0].tag_list);
}); 
```

或者

```
SC.get('users/YOUR_ID/tracks/', {q:'royaloperahouse', tags: 'insights' },  function(result) { 
    console.log(result[0].tag_list);
}); 
```

# c# - 类型 [MyClass] 不能在此上下文中使用

> ID：14752473
> 
> 赞同：1
> 
> 时间：2013-02-07T13:37:55.973
> 
> 标签：c#, xml, serialization, xmlserializer

我有一个`WebMethod`使用股票序列化和一些自定义序列化的对象返回一个具有数十个类的对象`IXmlSerializable`。它工作正常。我添加了一个定义为`Object`可以容纳任何这些类的属性。

大多数情况下，这是可行的——但是当新属性设置为一个特定的类时，框架会给我上面的异常（始终如一）。查看自动生成的序列化代码，我可以在`WriteX_XXX()`方法中看到用于处理我的许多类的代码，但不是导致异常的代码。我不知道这是否重要，但此类使用自定义序列化 via `IXmlSerializable`，并且适用于其他上下文。

我把`XmlIncluded`它放在`WebMethod`, 并将它作为额外类型添加到序列化程序中 - 但没有任何改变。唯一改变的事情是，如果我向`XmlElement`属性添加一个指定有问题类型的`Object`属性。但是，这将序列化代码更改为仅处理我指定的类型 - 我真的不想为此添加数百个`XmlElement`属性。

有人对此有任何想法吗？我在网上搜索过，但没有找到任何有用的东西......不幸的是，除了真实的代码（太大而无法包含在此处）之外，我无法通过一个简单的示例来重现它。

# internet-explorer - 在可插入协议处理程序中启用会话 cookie

> ID：14752477
> 
> 赞同：0
> 
> 时间：2013-02-07T13:38:02.047
> 
> 标签：internet-explorer, session-cookies, bho, pluggableprotocol

我们已经实现了我们自己的异步可插入协议处理程序，我们使用它来将 HTML 文档从我们自己的文档存储加载到 Internet Explorer。我们需要能够`document.cookie`使用我们的 APP 加载到浏览器中的文档来存储和检索会话 cookie。

但是，当我们设置`document.cookie`然后检查该值时，它总是设置为一个空字符串。我想我们需要实现一些额外的接口，但我没有找到任何可能表明我们缺少什么的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T14:48:29.303

[http://support.microsoft.com/kb/827644/en-us](http://support.microsoft.com/kb/827644/en-us)

找到以下注册表项：

```
HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings 
```

创建一个新密钥`PluggableProtocols`

添加一个新的字符串值。

键入要启用以访问 cookie 的可插入协议的名称，然后按 Enter。

例如，如果您的协议是`chill://`输入“chill”作为名称。

请注意，密钥可能还必须在

```
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Internet Settings 
```

# solr - 如何搜索短语

> ID：14752478
> 
> 赞同：0
> 
> 时间：2013-02-07T13:38:08.630
> 
> 标签：solr, solrnet

我做了一项工作以获取所有包含“Good”或“Microwave”或“Good Microwave”的文档，如果我将“Good Microwave”作为 q 参数传递，请指导我无论我是否朝着正确的方向前进。

我在我的模式中定义了两个字段类型（text_general 和 shingleString），如下所示

```
<fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
      <analyzer type="index">
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />        
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />        
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
    </fieldType>

<fieldType name="shingleString" class="solr.TextField" positionIncrementGap="100" omitNorms="true">
  <analyzer type="index">
    <tokenizer class="solr.KeywordTokenizerFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.PositionFilterFactory" />
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.KeywordTokenizerFactory"/>
    <filter class="solr.ShingleFilterFactory" outputUnigrams="true" outputUnigramIfNoNgram="true" maxShingleSize="99"/>
    <filter class="solr.PositionFilterFactory" />
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
</fieldType> 
```

然后在编制索引时，我将所有这些字段添加到两个不同的复制字段，如下所示。

```
<field name="SearchableField" type="shingleString" indexed="true" stored="false" multiValued="true"/>
    <copyField source="ProductName" dest="SearchableField"/>
     <copyField source="ProductDesription" dest="SearchableField"/>
    <copyField source="Product Feedback" dest="SearchableField"/>

<field name="SearchableField1" type="text_general" indexed="true" stored="false" multiValued="true"/>
    <copyField source="ProductName" dest="SearchableField1"/>
     <copyField source="ProductDesription" dest="SearchableField1"/>
    <copyField source="Product Feedback" dest="SearchableField1"/> 
```

现在，如果我同时查询 SearchableField 和 SearchableField1 这两个字段，我将获得所有包含“Good”或“Microwave”或“Good Microwave”的文档。下面是我用来获取所有文档的查询。q=SearchableField%3AGood+Microwave%0ASearchableField1%3AGood+Microwave

但是包含整个短语“Good Microwave”的文档得分很低。如果我的方法完全正确，任何人都可以指导我在那些包含整个短语的文件上获得更高的分数吗？

或者有人可以指导我实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:53:50.663

如果您有一个“text_general”类型的字段，搜索：q=good微波将找到其中包含“good”或“microwave”的任何文档。搜索:q="good微波" 将找到包含这两个术语的任何文档。q="good微波"^5 好的微波将查找包含任一术语的任何文档，但会提升包含彼此相邻的术语的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:08:10.120

您好，您可以使用带有字段类型 shingleString 的“建议组件”请求处理程序使用简单查询来搜索短语。只是您必须专注于您的查询语法......

```
 http://localhost:8983/solr/suggest?wt=xml&indent=true&spellcheck=true&spellcheck.q=usrsearchphrase

 <fieldType name="shingleString" class="solr.TextField" positionIncrementGap="100" omitNorms="true">
  <analyzer type="index">
    <tokenizer class="solr.KeywordTokenizerFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.PositionFilterFactory" />
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.KeywordTokenizerFactory"/>
    <filter class="solr.ShingleFilterFactory" outputUnigrams="true" outputUnigramIfNoNgram="true" maxShingleSize="99"/>
    <filter class="solr.PositionFilterFactory" />
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
</fieldType> 
```

# sql - 未启用并行数据仓库 (PDW) 功能

> ID：14752480
> 
> 赞同：5
> 
> 时间：2013-02-07T13:38:14.470
> 
> 标签：sql, sql-server

我有一个 WinForms 客户端应用程序，它使用参数执行以下 SQL 语句。

```
SELECT a.CaseNo, (c.Claimant + ' -v- ' + c.Defendant) AS CaseName, 
       a.Allocation - ISNULL(LAG(a.Allocation) 
       OVER (PARTITION BY a.CaseNo, a.FeeEarner ORDER BY a.AllocID), 0) AS Billing, a.AllocID 
FROM tblAllocations AS a INNER JOIN tblCases AS c ON a.CaseNo = c.CaseNo
WHERE a.CaseNo > 0 AND FeeEarner = @FeeEarner 
AND a.Date >= @StartDate 
AND a.Date <= @EndDate ORDER BY a.Date; 
```

当我在进行开发工作的笔记本电脑上运行此程序时，查询执行没有问题。返回的信息用于填充客户端应用程序中的数据网格。我正在使用 SQL Server 2012 Express。

但是，当在我的客户场所运行完全相同的客户端应用程序时，代码会返回错误。大多数错误消息是由我的应用程序生成的，它使我能够查明代码中出现问题的位置。但是，在我附加系统生成错误的消息末尾，我得到以下信息：

```
The parallel data warehouse (PDW) features are not enabled 
```

我以前从未见过此消息，因此无法确定问题所在。我尝试用 Google 搜索此错误消息，但没有发现任何有用的信息。我的客户正在使用 SQL Server 2008 R2 Express。

PDW 是 SQL Express 2012 中的一项功能，但 2008 R2 版本中没有？

我的查询需要 PDW 是怎么回事？

是否使用了 PARTITION，因为这是导致问题的查询之前我之前没有使用过的关键字？

在不让客户更改他们的 SQL 版本的情况下，有什么方法可以解决这个问题，例如通过更改我的 SQL 查询或在 SQL 中启用某些东西？

非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T13:48:51.713

该命令[`LAG`](http://msdn.microsoft.com/en-us/library/hh231256.aspx)仅在 SQL Server 2012 中受支持。

虽然如果这是问题，我对错误感到惊讶。

- 编辑 -

**要在不使用的情况下复制您的查询`LAG`：**

这基本上是从我提到的[文章中删除的；](http://blog.sqlauthority.com/2011/11/24/sql-server-solution-to-puzzle-simulate-lead-and-lag-without-using-sql-server-2012-analytic-function/)

```
SELECT 
       a.CaseNo, 
       (c.Claimant + ' -v- ' + c.Defendant) AS CaseName, 
       a.Allocation - ISNULL((
           CASE 
              WHEN N%2=1 
              THEN MAX(CASE 
                   WHEN N%2=0 
                   THEN a.Allocation 
                   END) 
              OVER (Partition BY N/2) 
              ELSE MAX(CASE 
                   WHEN N%2=1 
                   THEN a.Allocation
                   END) 
              OVER (Partition BY (N+1)/2) 
           END
       ), 0) AS Billing, 
       a.AllocID 
FROM tblAllocations AS a
LEFT JOIN (SELECT 
    Row_Number() OVER(ORDER BY b.Id) N,
    b.Id
  FROM tblAllocations as b) AS RowNum 
ON RowNum.id=a.id 
INNER JOIN tblCases AS c 
ON a.CaseNo = c.CaseNo
WHERE a.CaseNo > 0 
AND FeeEarner = @FeeEarner 
AND a.Date >= @StartDate 
AND a.Date <= @EndDate 
ORDER BY a.Date; 
```

这是在下面演示的：

# [**SQL 小提琴**](http://sqlfiddle.com/#!3/62680/8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-07T13:55:56.503

我有同样的问题，我解决了，在“Partition by”之后删除了“ORDER BY”

```
SELECT MAX(FechaActualizacion) OVER (Partition BY YEAR(FechaActualizacion), MONTH(FechaActualizacion), CampoEspecial, NumeroEspecial, TipoCampoEspecial) as FechaMax 
```

# c# - 我可以限制在 ThreadPool 中创建线程吗？

> ID：14752481
> 
> 赞同：2
> 
> 时间：2013-02-07T13:38:15.127
> 
> 标签：c#, multithreading, windows-phone-8, threadpool, download

我正在创建一个下载图像缩略图的 Windows Phone 8 应用程序。每个缩略图都从线程池下载到一个线程上。当有很多图像（比如 100 个）时，手机性能会因为大量线程下载缩略图而降低。

有没有办法可以控制一次在线程池中创建的线程数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:55:16.530

答案是否定的，你无法控制线程池中有多少线程。但是，您可以控制应用程序使用的线程数。而不是仅仅循环浏览您需要下载的图像列表，并启动任务（或者您正在执行的操作）。创建`X`多个线程或任务，等待它们完成，然后启动更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:08:38.593

您可以查看以下代码作为示例。在这里，我们将线程分成块，每个块将有 32 个线程。希望这会帮助你。

```
int noofthread = accounts.Length;
int startindex = 0;
int endindex = 32;

/* Runs the threads in 32 item chunks */
try
{
    int noofchunk = (int)Math.Ceiling(((double)noofthread / 32.00));

    if (noofthread < endindex)
        endindex = noofthread;
    for (int chunk = 0; chunk < noofchunk; chunk++)
    {
        List<ManualResetEvent> doneEvents = new List<ManualResetEvent>();

        for (int i = startindex; i < endindex; i++)
        {
            int accountID = Convert.ToInt32(accounts[i].Id, CultureInfo.InvariantCulture);
            string accountName = Convert.ToString(accounts[i].Name, CultureInfo.CurrentCulture);

            //List AccountID : AccountNames as they're running
            AddTransactionRecord(new StackFrame(true), accountID + ":" + accountName);

            //Create RunDate
            ReportingService.Date reportDate = new ReportingService.Date();
            reportDate.Day = _appSettings.ReportDate.Day;
            reportDate.Month = _appSettings.ReportDate.Month;
            reportDate.Year = _appSettings.ReportDate.Year;

            // Create object of your class
            Class c = new Class();
            doneEvents.Add(c.DoneEvent);
            ThreadPool.QueueUserWorkItem(c.ThreadPoolCallback, i);
        }

        WaitHandle.WaitAll(doneEvents.ToArray());
        startindex += 32;
        endindex += 32;
        if (endindex > noofthread)
        {
            endindex = noofthread;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-12T10:23:40.333

ThreadPool.SetMaxThreads can help you

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T15:23:18.540

如前所述，您无法控制线程池中的线程数量，但您可以创建一个自定义[TaskScheduler](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.threading.tasks.taskscheduler%28v=vs.105%29.aspx)，它只会同时运行一定数量的任务。[您可以从这里](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384006.aspx)找到示例。

# android - SQLite 选择今天和前一天的所有记录

> ID：14752488
> 
> 赞同：8
> 
> 时间：2013-02-07T13:38:45.233
> 
> 标签：android, sqlite, date, select

我的数据库中有下表：

```
 database.execSQL("create table " + TABLE_LOGS + " (" 
            + COLUMN_ID + " integer primary key autoincrement," 
            + COLUMN_ID_DAY_EXERCISE + " integer not null,"
            + COLUMN_REPS + " integer not null,"
            + COLUMN_WEIGHT + " real not null,"
            + COLUMN_1RM + " real not null,"
            + COLUMN_DATE + " integer not null"
            + ")"); 
```

我在 COLUMN_DATE 字段（整数）中存储了一个 unix 时间戳。

现在我有以下函数来获取所有记录：

```
public Cursor fetchCurrentLogs(long dayExerciseDataID) {
    // where day = today
    Cursor cursor = database.rawQuery("select " + MySQLiteHelper.COLUMN_ID + "," + MySQLiteHelper.COLUMN_REPS + ", " + MySQLiteHelper.COLUMN_WEIGHT + " " +
            "from " + MySQLiteHelper.TABLE_LOGS + " " +
            "where " + MySQLiteHelper.COLUMN_ID_DAY_EXERCISE + " = '" + dayExerciseDataID + "'", null);
    if (cursor != null) { cursor.moveToFirst(); }
    return cursor;
} 
```

现在我想做的是，我想让这个函数只抓取今天的记录。

然后我想让另一个函数完全相同，但是我希望它获取前一天的记录，而不是获取今天的记录。以前，我的意思是最近一天的记录不是今天。所以可能是昨天，或者三天前，或者一个月前。

我知道在 MySQL 中你可以在当天做这样的事情：

`where date_format(from_unixtime(COLUMN_DATE), '%Y-%m-%d')= date_format(now(), '%Y-%m-%d')`

SQLite 的等价物是什么？

另外，任何人都可以帮我解决上面提到的前一天的 where 子句吗？

非常感谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-07T14:42:32.867

```
String sql = "SELECT * FROM myTable WHERE myDate >= date('now','-1 day')"; 
Cursor mycursor = db.rawQuery(sql); 
```

**编辑：**

```
SELECT * from Table1 where myDate = (select max(myDate) from Table1 WHERE myDate < DATE('now') ) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-07T16:05:03.880

请参阅[日期/时间函数文档](http://www.sqlite.org/lang_datefunc.html)：

```
SELECT *
FROM MyTable
WHERE myDate >= date('now', '-1 days')
  AND myDate <  date('now') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-08T13:28:27.657

可能为时已晚，但它可以帮助某人。我和以前的开发人员没有什么不同，我只是想放我的版本，可能它甚至不是最好的......

```
 String selectQuery = "SELECT * FROM "+Your_table+" 
WHERE ("+Column_1+" = "+Value_For_Column1+" AND date("+Your_Column_With_Time_Values+") == date('now')) AND 

"+Some_Other_Column+" = "+Some_Other_Value+" OR "+Some_Other_Column+" = "+Some_Other_Value+" ORDER BY "+Your_Column+" DESC"; 
```

如果可能有一些错误，很可能是由于字符串连接造成的。谢谢！！

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-07T13:49:46.023

不要在 SQL 语句中进行转换。在您的 Java 方法中进行转换。让您的 Java 方法创建完整的 SQL 语句。您所需要的只是一个将 Java DateTime 转换为 unix 格式的函数。

```
Cursor cursor = database.rawQuery("select " + MySQLiteHelper.COLUMN_ID + "," + MySQLiteHelper.COLUMN_REPS + ", " + MySQLiteHelper.COLUMN_WEIGHT + " " +
            "from " + MySQLiteHelper.TABLE_LOGS + " " +
            "where " + MySQLiteHelper.COLUMN_ID_DAY_EXERCISE + " = '" + dayExerciseDataID + 
            " OR " + MySQLiteHelper.COLUMN_ID_DAY_EXERCISE + " = '" + previousDay(dayExerciseDataID) +
"'", null); 
```

您只需要创建 previousDay 方法。

# debugging - 为什么 XSL 翻译不起作用？

> ID：14752490
> 
> 赞同：2
> 
> 时间：2013-02-07T13:38:46.130
> 
> 标签：debugging, xslt

原谅我，我是 XSL 的新手，但这似乎不起作用：

```
call <a><xsl:attribute name="HREF">callto:translate(<xsl:value-of select="phone"/>, ' -().:', '')</xsl:attribute><xsl:value-of select="phone"/></a> 
```

XML 是

```
<phone>(555)-123-4567</phone> 
```

页面输出是

```
call <a href="callto:translate((555)-123-4567, ' -().:', '')">(555)-123-4567</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:54:08.820

您必须将翻译功能放在`<xsl:value-of`标签内。这是代码，已修复：

```
call <a><xsl:attribute name="HREF">callto:<xsl:value-of select="translate(phone, ' -().:', '')"/></xsl:attribute><xsl:value-of select="phone"/></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T02:32:14.380

**使用**：

```
call <a HREF="callto:{translate(phone, ' -().:', '')}"> 
```

# mysql - SQL Select All in Table 与“..”具有相同 ID

> ID：14752491
> 
> 赞同：3
> 
> 时间：2013-02-07T13:38:49.150
> 
> 标签：mysql, sql

基本上，我有一个支持用户表，不同部门有不同级别的不同用户。

所以假设我基本上有下表：

```
id | userID | deptID | level
1      1        1        1
2     119       1        2
3      2        1        3
4     101       2        1
5     104       2        2 
```

而且我有`id`号码，所以假设我想让所有用户与:`deptID`中的用户相同，从而返回前三行。`id``3`

那会是什么样的 SQL 语句？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T13:40:25.523

您可以使用以下包含子查询的查询：

```
SELECT * 
FROM <table> 
WHERE deptID=(
              SELECT deptID FROM <table> WHERE userID=3
             ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T13:41:14.507

```
select  u.*
from    users u join users u2 on u.deptID = u2.deptID
where   u2.id = 3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T13:41:23.670

```
SELECT *
FROM Users
WHERE deptID IN 
    (SELECT deptID FROM Users WHERE userID = 3) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T13:45:18.487

试试这个

```
select my.*
from myTable my
join myTable myt on my.deptID = myt.deptID
where myt.id = 3 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T13:45:46.823

```
select * from data where deptid in (select deptid from data where id=3); 
```

使用此查询

# iphone - 使用 UIImagePickerController 录制电影时的视频压缩？

> ID：14752493
> 
> 赞同：3
> 
> 时间：2013-02-07T13:38:55.143
> 
> 标签：iphone, ios, objective-c, video, uiimagepickercontroller

在我的 iphone 应用程序中，如果我使用 - 它选择一个视频，`UIImagePicker`它会自动压缩

录制后有什么方法可以压缩视频吗？我将录制的视频发布到服务器，质量是否等同于非压缩视频？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-11-07T08:35:54.163

使用自定义类（SDAVAssetExportSession）进行视频压缩。您可以从此链接下载它。下载后将 SDAVAssetExportSession.h 和 SDAVAssetExportSession.m 文件添加到您的项目中，然后下面的代码将有助于进行压缩

```
- (void)compressVideoWithInputVideoUrl:(NSURL *) inputVideoUrl
{
    /* Create Output File Url */

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSString *finalVideoURLString = [documentsDirectory stringByAppendingPathComponent:@"compressedVideo.mp4"];
    NSURL *outputVideoUrl = ([[NSURL URLWithString:finalVideoURLString] isFileURL] == 1)?([NSURL URLWithString:finalVideoURLString]):([NSURL fileURLWithPath:finalVideoURLString]); // Url Should be a file Url, so here we check and convert it into a file Url

    SDAVAssetExportSession *compressionEncoder = [SDAVAssetExportSession.alloc initWithAsset:[AVAsset assetWithURL:inputVideoUrl]]; // provide inputVideo Url Here
    compressionEncoder.outputFileType = AVFileTypeMPEG4;
    compressionEncoder.outputURL = outputVideoUrl; //Provide output video Url here
    compressionEncoder.videoSettings = @
    {
    AVVideoCodecKey: AVVideoCodecH264,
    AVVideoWidthKey: @800,   //Set your resolution width here
    AVVideoHeightKey: @600,  //set your resolution height here
    AVVideoCompressionPropertiesKey: @
        {
        AVVideoAverageBitRateKey: @45000, // Give your bitrate here for lower size give low values
        AVVideoProfileLevelKey: AVVideoProfileLevelH264High40,
        },
    };
    compressionEncoder.audioSettings = @
    {
    AVFormatIDKey: @(kAudioFormatMPEG4AAC),
    AVNumberOfChannelsKey: @2,
    AVSampleRateKey: @44100,
    AVEncoderBitRateKey: @128000,
    };

    [compressionEncoder exportAsynchronouslyWithCompletionHandler:^
     {
         if (compressionEncoder.status == AVAssetExportSessionStatusCompleted)
         {
            NSLog(@"Compression Export Completed Successfully");
         }
         else if (compressionEncoder.status == AVAssetExportSessionStatusCancelled)
         {
             NSLog(@"Compression Export Canceled");
         }
         else
         {
              NSLog(@"Compression Failed");

         }
     }];

}

To Cancel Compression Use Below Line Of code
 [compressionEncoder cancelExport]; //Video compression cancel 
```

# coldfusion - ColdFusion 10 自动更新未得到应用

> ID：14752503
> 
> 赞同：2
> 
> 时间：2013-02-07T13:39:45.320
> 
> 标签：coldfusion, coldfusion-10

我们正在使用 IIS 7 在 Windows 2008 RC2 上安装 CF10 Enterprise。

我们使用所有默认选择进行安装，直接安装，并应用了强制更新。到目前为止，一切都很好。当我们进入更新页面自动更新最新的当前修补程序（本文发布时为 7 个），这是累积的，安装和下载过程运行正常，实例重新启动，但是当我们再次检查以查看可用更新，它再次显示从 1 到 7 的所有更新，就好像我们根本没有应用更新一样。已安装的更新选项卡显示未应用任何更新。但是，查看系统信息页面，更新级别显示 HF7。

我们尝试了一种变体，一次应用一个修补程序。这在修补程序 2 中有效，但在应用修补程序 4 后，它“冻结”在那里，出现与上述相同的问题，没有显示在修补程序 2 之后应用了任何修补程序。这非常令人沮丧。我不知道是否已应用修补程序，并且不确定如何看待指示修补程序级别的系统信息页面。我们仍然生活在 ColdFusion 更新地狱中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T17:30:37.527

谢谢你的帮助。我们已经解决了这个问题，如果将来对任何人有帮助，我会在这里发布解决方案。热修复日志文件（例如：C:\ColdFusion10\cfusion\hf-updates\hf-10-00007）中记录的错误消息如下：

无法复制修补程序文件：C:\Users\xxx\002873.tmp\dist\cfusion 状态：致命错误附加说明：致命错误 - 无法将修补程序文件复制到目标位置：C:\ColdFusion10\cfusion 致命错误 - C:\ColdFusion10\cfusion\bin\coldfusion.exe（该进程无法访问该文件，因为它正在被另一个进程使用）

有几篇博文提到了权限问题，例如确保运行 CF10 的帐户具有本地管理员访问权限，或者 cfusion 目录具有适当的权限。我们已经尝试了这些解决方案，并且有几个变体没有运气。我们还停止了所有 CF 服务并手动应用了 HF，但同样的错误仍然存​​在。

在我们的例子中，我们重命名了上面错误日志中注明的coldfusion.exe，应用了修补程序，一切正常。所以，我不相信这真的是一个权限问题，而是（正如错误日志试图告诉我们的那样），coldfusion.exe 正在使用中。

*注意：对于 2013 年 7 月 9 日发布的更新 11，除了重命名 Coldfusion.exe 之外，还需要重命名 Coldfusionsvc.exe（在我们的例子中，重命名为 Coldfusionsvc_1.exe）*

# c++ - STL 流的包装类：转发操作符<< 调用

> ID：14752504
> 
> 赞同：1
> 
> 时间：2013-02-07T13:39:45.710
> 
> 标签：c++, stl, wrapper, operator-keyword

我目前正在为 STL 流编写一​​个包装器，以同步来自多个线程的写调用。我有以下（简化的）代码：

```
class Synchronize {
private:
    std::stringstream ss;
public:
    void write(std::string& str) {
        // locking ...
        ss << str;
        // unlocking ...
    };

    // other stuff ..
};

Synchronize& operator<<(Synchronize& o, std::string& str) {
    o.write(str);
    return o;
}

Synchronize& operator<<(Synchronize* o, std::string& str) {
    o->write(str);
    return *o;
} 
```

现在可以通过在类的对象上使用运算符来调用该`write()`方法，但只能使用. 并且还需要很多其他的东西，比如s 和s。`<<``Synchronize``std::string``std::stringstream``int``float`

`Synchronize`是否可以在没有大量自己功能的情况下将此功能添加到我的课程中`operator<<`？模板有帮助吗？或者我应该从`iostream`图书馆扩展一些类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:42:54.247

您可以将运算符重载变成朋友模板

在你的课堂上写

```
template<typename T>
friend Synchronize& operator<<(Synchronize& o, T const& t); 
```

那么定义可以是

```
template<typename T>
Synchronize& operator<<(Synchronize& o, T const& t) {
    o.write(t);
    return o;
}

 //edit
template<typename T>
void Synchronize::write(T& t)
{
    ss << t;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:22:20.810

如果我理解正确，您希望将许多读者聚集到一个目的地。您创建的体系结构（具有同步/锁定写入的 std::stream 包装器）不是一个好的解决方案。

这里的代码不像你期望的那样工作：

```
Synchronize your_stream;

void thread_function1()
{
    output << "this is a message " << "from thread_function1\n";
}
void thread_function2()
{
    output << "this is a message " << "from thread_function2\n";
} 
```

使用您的代码，输出可能是：

```
this is a message this is a message from thread_function2
from thread_function1 
```

您需要的是能够随时随地设置同步点：

```
your_stream  out;
out << synchronize_begin << "this is " << " a test" << synchronize_end; 
```

（这会缓冲`synchronize_begin`对象中的所有内容（可以转储到流中），当它接收到一个`synchronize_end`对象时，它会锁定 a `mutex`（与其他`synchronize_begin`实例共享）并写入`out`）。

或者：

```
std::ostream  out; // any std::ostream type
out << synchronized << "this is " << " a test"; // synchronized ends here 
```

（同步是一个缓冲区实例，它在行尾退出范围；当它被写入 out 时，它会锁定，然后写入它的数据。

# android - 使用AngularJS从服务器重定向时Android上的无限重定向循环

> ID：14752510
> 
> 赞同：6
> 
> 时间：2013-02-07T13:39:55.423
> 
> 标签：android, node.js, angularjs

我正在为旧版本的 Android (2.3.x) 构建一个 web/phonegap 应用程序。在我尝试将任何服务器重定向添加到组合中之前，一切都很好。这是场景：

服务器（node.js）有一个在“/”处监听的路由。当这条路由被命中时，它会检查是否存在会话。如果没有会话，它会重定向到 /login。很好，这部分有效（无论如何，服务器方面）。

当客户端获得重定向时，就会出现问题。因为Android 2.3 不支持history.pushState，它回退到hashbangs。这意味着 AngularJS 将 url 重写为 /#!/login，这会导致服务器请求到 '/'，这会导致服务器检查会话并重定向到 '/login'，这会导致 AngularJS 将 url 重写为 /#!/登录..等等等等..无限期。

任何想法如何使用 AngularJS 从服务器重定向？我不应该在我的路由中处理这个逻辑，而是尝试在客户端上实现它吗？我敢肯定，必须有一种方法来处理这个问题，但我似乎无法弄清楚。

任何帮助将不胜感激。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:38:51.330

使用一个简单的对象来命令重定向：
如果用户没有登录，返回`{action: "redirect" url:"/login"}`

然后在客户端，得到响应后，检查`action == 'redirect'`和`$location.path(url)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:16:24.697

如果您纯粹在客户端进行身份验证会更好。在角端开始时进行 ajax 调用，询问我们是否已登录。如果没有，提示用户输入信息（可能在模式对话框中），然后将其发布到服务器上的“/登录”。

为了安全起见，任何对身份验证敏感的信息都不应存储在客户端。相反，使用 ajax 检索它 - 如果用户未正确登录，则使用 401 或一些错误回复 ajax。

# c# - 从 JQuery 将 JSON 发布到 ASP.NET MVC 4 操作

> ID：14752522
> 
> 赞同：7
> 
> 时间：2013-02-07T13:40:30.873
> 
> 标签：c#, jquery, json, asp.net-mvc, asp.net-mvc-4

我正在开发一个使用 ASP.NET MVC 4 的应用程序。在某些方面，我觉得我正在从头开始学习一切:)。有人告诉我它值得。

我需要将一些 JSON 发布到我的控制器中的 Action 中。我的操作如下所示：

```
[Authorize]
public class MyController : Controller
{
    [HttpPost]
    public ActionResult RemoveItem(string itemID)
    {
      // Do stuff...
      return Json(new { Status = 1, Message="Success" });
    }
} 
```

我的 JQuery 代码如下所示：

```
function removeItem(id) {
  var json = { "itemID": id };
  $.ajax({
    type: "POST",
    url: "/myController/removeItem",
    contentType: "application/json; charset=utf-8",
    data: json,
    dataType: "json",
    success: removeItemCompleted,
    error: removeItemFailed
  });
}

function removeItemCompleted(results) {
}

function removeItemFailed(request, status, error) {
} 
```

在 Fiddler 中，我注意到返回了 500 错误。响应中的 TITLE 字段显示：“无效的 JSON 原语：itemID”。

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-07T13:56:03.400

请务必发送 JSON：

```
data: json, 
```

应该

```
data: JSON.stringify(json), 
```

IE7 及以下需要垫片：[https ://github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)

注意：戴夫 A 的回答也是正确的，但没有直接回答您的问题。我 +1 了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-07T13:54:12.730

你这里似乎不需要 JSON。理想情况下，id 参数将在您的 URI 中传递：

```
 url: "/myController/removeItem/"+id 
```

这可能就是您的 Action 无法识别的原因。它需要一个参数。

**跟进：**批评者指出传递的数据是一个字符串，因此不能作为 id 传递是不正确的。我*应该*指出应该将 action 方法重写为 accept `string id`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-12T04:42:38.367

```
 function removeItem(id) {
  var json = { "itemID": id };
  $.ajax({
    type: "POST",
    url: "/myController/removeItem",
    contentType: "application/json; charset=utf-8",
    data: JSON.stringify(json),
    dataType: "json",
    success: removeItemCompleted,
    error: removeItemFailed
  });
}

function removeItemCompleted(results) {
}

function removeItemFailed(request, status, error) {
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-25T20:01:16.490

使用此代码：

```
$('#delete').click(function () {
        var APIURL = "/api/products";
        var id = $('#SearchText').val();
        $.ajax({
            type: "DELETE",
            url: APIURL + '/' + id,
            success: function (data) {
                alert('Employee deleted');
            }
        });
    }); 
```

# android - 如何在 Android 中为 WebView 制作滚动监听器

> ID：14752523
> 
> 赞同：47
> 
> 时间：2013-02-07T13:40:51.257
> 
> 标签：android, webview, custom-controls, scrollview

如何`WebView`在 Android中实现 Scroll Listener

我试过这个，但它没有`Log.i`在滚动 webview 时调用我。

```
package com.example.webview.full.width;
import android.content.Context;
import android.util.AttributeSet;
import android.util.Log;
import android.webkit.WebView;
import android.widget.AbsListView;
import android.widget.AbsListView.OnScrollListener;

public class scorllableWebview extends WebView implements OnScrollListener {

Context ctx;
AttributeSet atrs;

public scorllableWebview(Context context) {
    super(context);

    ctx = context;
}

public scorllableWebview(Context context, AttributeSet atters){
    super(context, atters);

    ctx = context;
    atrs = atters;
}

@Override
public void onScroll(AbsListView view, int firstVisibleItem,
        int visibleItemCount, int totalItemCount) {

    Log.i("onScroll", "Called");
}

@Override
public void onScrollStateChanged(AbsListView view, int scrollState) {

    Log.i("onScrollStateChanged", "Called");

}
} 
```

这是我的`MainActivity.java`

```
package com.example.webview.full.width;
import android.app.Activity;
import android.app.ProgressDialog;
import android.os.Bundle;
import android.view.Menu;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.Toast;

public class MainActivity extends Activity {

ProgressDialog progressDialog;
scorllableWebview wv;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    wv = (scorllableWebview) findViewById(R.id.scorllableWebview);

    wv.getSettings().setJavaScriptEnabled(true);

    wv.getSettings().setBuiltInZoomControls(true);
    wv.getSettings().supportZoom();

    progressDialog = ProgressDialog.show(MainActivity.this,
            "Loading Book...!", "Please Wait");
    progressDialog.setCancelable(true);

    String htnlString = "<!DOCTYPE html><html><body style = \"text-align:center\"><script type=\"text/javascript\">for(a=1;a<=10;a++)document.write('<img style=\"border-style:dotted;border-width:10px;border-color:black;\"src=\"http://myURL.com/books_snaps/EN567/'+a+'.jpg\" alt=\"Page Not Found\"/>');</script></body></html>";
    // width=\"100%\"
    wv.setWebViewClient(new WebViewClient() {

        @Override
        public void onPageFinished(WebView view, String url) {
            progressDialog.dismiss();
            Toast.makeText(MainActivity.this, "Completed",
                    Toast.LENGTH_SHORT).show();
            wv.pageUp(true);
            super.onPageFinished(view, url);
        }

    });

    wv.loadDataWithBaseURL(null, htnlString, "text/html", "UTF-8", null);

}
   } 
```

这是我的 XML 文件。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<com.example.webview.full.width.scorllableWebview
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scorllableWebview"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-02-07T14:16:06.603

就像是：

```
public class ObservableWebView extends WebView
{
    private OnScrollChangedCallback mOnScrollChangedCallback;

    public ObservableWebView(final Context context)
    {
        super(context);
    }

    public ObservableWebView(final Context context, final AttributeSet attrs)
    {
        super(context, attrs);
    }

    public ObservableWebView(final Context context, final AttributeSet attrs, final int defStyle)
    {
        super(context, attrs, defStyle);
    }

    @Override
    protected void onScrollChanged(final int l, final int t, final int oldl, final int oldt)
    {
        super.onScrollChanged(l, t, oldl, oldt);
        if(mOnScrollChangedCallback != null) mOnScrollChangedCallback.onScroll(l, t, oldl, oldt);
    }

    public OnScrollChangedCallback getOnScrollChangedCallback()
    {
        return mOnScrollChangedCallback;
    }

    public void setOnScrollChangedCallback(final OnScrollChangedCallback onScrollChangedCallback)
    {
        mOnScrollChangedCallback = onScrollChangedCallback;
    }

    /**
     * Impliment in the activity/fragment/view that you want to listen to the webview
     */
    public static interface OnScrollChangedCallback
    {
        public void onScroll(int l, int t, int oldl, int oldt);
    }
} 
```

应该可以，这是未经测试的，但这适用于 Android 中的几乎所有其他视图。

你会像这样实现：

```
wv = (ObservableWebView) findViewById(R.id.scorllableWebview);
wv.setOnScrollChangedCallback(new OnScrollChangedCallback(){
    public void onScroll(int l, int t, int oldl, int oldt){
        if(t> oldt){
            //Do stuff
            System.out.println("Swipe UP");
            //Do stuff
        }
        else if(t< oldt){
            System.out.println("Swipe Down");
        }
        Log.d(TAG,"We Scrolled etc...");
    }
}); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-12-05T20:20:59.757

从 API 23 开始，您不再需要这样做，您只需使用所有视图上可用的新[OnScrollChangeListener](http://developer.android.com/intl/pt-br/reference/android/view/View.OnScrollChangeListener.html) ，包括在**WebView**上。但是由于您仍然需要支持旧版本，您仍然可以使用@Chris.Jenkins 的建议。我对提议的类进行了一些调整，使其与新的 OnScrollChangeListener 接口“更兼容”：

```
public class ObservableWebView extends WebView {
private OnScrollChangeListener onScrollChangeListener;

public ObservableWebView(Context context) {
    super(context);
}

public ObservableWebView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public ObservableWebView(Context context, AttributeSet attrs, int defStyleAttr) {
    super(context, attrs, defStyleAttr);
}

@Override
protected void onScrollChanged(int l, int t, int oldl, int oldt) {
    super.onScrollChanged(l, t, oldl, oldt);
    if (onScrollChangeListener != null) {
        onScrollChangeListener.onScrollChange(this, l, t, oldl, oldt);
    }
}

public void setOnScrollChangeListener(OnScrollChangeListener onScrollChangeListener) {
    this.onScrollChangeListener = onScrollChangeListener;
}

public OnScrollChangeListener getOnScrollChangeListener() {
    return onScrollChangeListener;
}

public interface OnScrollChangeListener {
    /**
     * Called when the scroll position of a view changes.
     *
     * @param v          The view whose scroll position has changed.
     * @param scrollX    Current horizontal scroll origin.
     * @param scrollY    Current vertical scroll origin.
     * @param oldScrollX Previous horizontal scroll origin.
     * @param oldScrollY Previous vertical scroll origin.
     */
    void onScrollChange(WebView v, int scrollX, int scrollY, int oldScrollX, int oldScrollY);
}
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-10-24T13:50:43.607

无需扩展 WebView。关于什么：

```
webView.getViewTreeObserver().addOnScrollChangedListener(new ViewTreeObserver.OnScrollChangedListener() {
    @Override
    public void onScrollChanged() {
        Log.v(TAG, "+++ scrollchanged "+webView.getScrollY());
    }
}); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-10-03T11:29:52.267

这是接受答案的更优雅的 Kotlin 版本

```
 class ObservableWebView @JvmOverloads constructor(
        context: Context,
        attrs: AttributeSet? = null,
        defStyleAttr: Int = 0
) : WebView(context, attrs, defStyleAttr) {
    var scrollListener: WebViewScrollListener? = null

    override fun onScrollChanged(scrollX: Int, scrollY: Int, oldScrollX: Int, oldScrollY: Int) {
        super.onScrollChanged(scrollX, scrollY, oldScrollX, oldScrollY)
        when {
            scrollY > oldScrollY -> scrollListener?.onScrollDown()
            scrollY < oldScrollY -> scrollListener?.onScrollUp()
        }
        scrollListener?.onScroll(scrollX, scrollY, oldScrollX, oldScrollY)
    }
}

interface WebViewScrollListener{
    fun onScroll(scrollX: Int, scrollY: Int, oldScrollX: Int, oldScrollY: Int)

    fun onScrollDown()

    fun onScrollUp()
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-06-27T12:53:36.627

你可以试试这个：

它适用于 API >= 23 Android Marshmallow

```
web.setOnScrollChangeListener(new View.OnScrollChangeListener() {

            @Override
            public void onScrollChange(View p1, int p2, int p3, int p4, int p5)
            {
                Toast.makeText(getApplicationContext, "Scrolled", Toast.LENGTH_SHORT).show();
            }
        }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-08-07T02:59:00.787

从`API 23`( `Android - 6.0`) ，您可以`WebView.OnScrollChangeListener`像这样实现

```
 public class MainActivity extends AppCompatActivity implements WebView.OnScrollChangeListener
    {
         @Override
         public void onScrollChange(View v, int scrollX, int scrollY, int oldScrollX, int oldScrollY) 
         {
             if(oldScrollY < scrollY) 
             {
                 //Scrolling Upwards
             }
             else if(oldScrollY > scrollY)
             {
                 //Scrolling Downwards
             }
         }
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-06T08:22:50.027

试试这个（查看你想要的所有视图）：创建一个 GestureDetector 然后一个 TouchListener 并设置为滚动的视图

```
OnCreate
         private GestureDetector gestureDetector;
         gestureDetector = new GestureDetector(this, new 
         GestureDetector.SimpleOnGestureListener() {
                @Override
                public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float 
           velocityY) {

                    if (velocityY < 0) {
                        collapse(frToolBar);

                    } else if (velocityY > 0) {
                        if (frToolBar.getVisibility()==View.GONE)
                        expand(frToolBar);
                    }
                    return super.onFling(e1, e2, velocityX, velocityY);
                }

                @Override
                public boolean onDown(MotionEvent e) {
                    return super.onDown(e);
                }
            });

          webView.setOnTouchListener((view, motionEvent) -> 
          gestureDetector.onTouchEvent(motionEvent));

    Two method - 

           public static void expand(final View v) {
            v.measure(WindowManager.LayoutParams.MATCH_PARENT,  
          indowManager.LayoutParams.WRAP_CONTENT);
             // final int targetHeight = v.getMeasuredHeight();
            final int targetHeight = v.getHeight();
            v.getLayoutParams().height = 1;
            v.setVisibility(View.VISIBLE);
            Animation a = new Animation() {
                @Override
                protected void applyTransformation(float interpolatedTime, Transformation t) 
           {
                    v.getLayoutParams().height = interpolatedTime == 1
                            ? WindowManager.LayoutParams.WRAP_CONTENT
                            : (int) (targetHeight * interpolatedTime);
                    v.requestLayout();
                }

                @Override
                public boolean willChangeBounds() {
                    return true;
                }
            };
            a.setDuration(300);
            v.startAnimation(a);

        }

        public static void collapse(final View v) {
            final int initialHeight = v.getMeasuredHeight();
            Animation a = new Animation() {
                @Override
                protected void applyTransformation(float interpolatedTime, Transformation t) 
           {
                    if (interpolatedTime == 1) {
                        v.setVisibility(View.GONE);
                    } else {
                        v.getLayoutParams().height = initialHeight - (int) (initialHeight * 
              interpolatedTime);
                        v.requestLayout();
                    }
                }

                @Override
                public boolean willChangeBounds() {
                    return true;
                }
            };
            a.setDuration(300);
            v.startAnimation(a);

        } 
```

# javascript - 使用其 API 从 AWS S3 获取非公共 JavaScript 文件

> ID：14752535
> 
> 赞同：3
> 
> 时间：2013-02-07T13:41:31.090
> 
> 标签：javascript, rest, amazon-s3

我正在尝试遵循 AWS API 从私有 S3 存储桶获取 JavaScript 文件。指南在这里：[签署和验证 REST 请求](http://docs.aws.amazon.com/AmazonS3/latest/dev/RESTAuthentication.html#ConstructingTheAuthenticationHeader)

环境是一个带有 jQ​​uery 的浏览器，所以这是一个 JavaScript 实现。我已经完成了我认为最困难的部分——用密钥签署请求。但现在我挂断了一些据说很容易的事情。我有这个生成的 REST 请求要传输：

```
GET /gss3/sayHello.js HTTP/1.1
Host: gss3.s3.amazonaws.com
Date: Thu Feb 07 2013 08:16:25 GMT-0500 (Eastern Standard Time)
Authorization: AWS AKIAJTURNBE6SXNTVVGQ:eWJOLZnj6Eja3CEC2CyifeURnxg= 
```

由于这是从 www.mydomain.com 对 s3.amazonaws.com 的调用，因此我正在查看 JSONP 以绕过相同的来源策略。但是，我看不到任何方法可以向 jQuery JSONP 调用添加额外的标头，并且要通过 AWS 进行身份验证，您必须通过第 4 行：

```
Authorization: AWS AKIAJTURNBE6SXNTVVGQ:eWJOLZnj6Eja3CEC2CyifeURnxg= 
```

所以我的问题是：我到底如何在我的浏览器/jQuery 环境中将此 REST 请求传输到 AWS？我在这里想念什么？谢谢大佬。。。。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T06:06:54.183

尽管此源代码是为 PHP 编写的，但博客[Amazon AWS S3 Query String Authentication with PHP](http://www.richardpeacock.com/blog/2010/07/amazon-aws-s3-query-string-authentication-php)展示了如何编译一个普通的旧查询字符串并将签名作为参数传递给 S3。

```
$url .= '?AWSAccessKeyId='.$awsKeyId
.'&Expires='.$expires
.'&Signature='.$signature; 
```

使用[crypto-js](http://code.google.com/p/crypto-js/)并转换为 Javascript 然后给我们这样的东西：

```
var filePath = "/bucket/file.js";
var dateTime = Math.floor(new Date().getTime() / 1000) + 300; // allows for 5 minutes clock diff
var stringToSign = "GET\n\n\n" + dateTime + "\n" + filePath;
var signature = CryptoJS.enc.Base64.stringify(CryptoJS.HmacSHA1(stringToSign, secretAccessKey));
var queryString = "?AWSAccessKeyId=" + accessKeyId + "&Expires=" + dateTime + "&Signature=" + encodeURIComponent(signature);

var script = document.createElement("script");
script.type = "text/javascript";
script.src = "https://s3.amazonaws.com/bucket/file.js" + queryString;
$("head").append(script); // jQuery version 
```

你去了，几乎整个香蕉都是为你写的。我希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T23:47:03.527

您不能将标头添加到 JSON-P 调用，因为 JSON-P 调用只是附加到您的网页的动态脚本标记，除非 S3 支持将其作为 GET 参数传递。

如果您使用的是 JSON-P，那么跨域问题就不再重要了。只要它的有效 JS 可以从任何域拉入您的网页。您只需要确保有问题的 S3 文件具有任何人都可以查看的权限。

最后一种方法是使用 CORS（跨域 ajax）启用 S3 存储桶，这是 S3 支持的一项新功能。然后，您可以对您的 s3 存储桶进行 vanilla ajax 跨域调用，并为您的心脏内容添加额外的标头。

# java - Java for循环多个变量

> ID：14752536
> 
> 赞同：11
> 
> 时间：2013-02-07T13:41:52.380
> 
> 标签：java

我不确定为什么我的 Java 代码无法编译，任何建议都将不胜感激。

```
 String rank = card.substring(0,1);
    String suit = card.substring(1);
    String cards = "A23456789TJQKDHSCl";
    String[] name = {"Ace","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Jack","Queen","King","Diamonds","Hearts","Spades","Clubs"};
    String c ="";
    for(int a = 0, b = 1; a<cards.length-1; b=a+1; a++;){
        if(rank===cards.substring(a,b){
            c+=name[a];
        }

    }
    system.out.println(c); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-07T13:43:51.083

1.  它是`cards.length()`，不是`cards.length`（`length`是 的**方法**，`java.lang.String`而不是**属性**）。

2.  它是`System.out`（大写的's'），而不是`system.out`。请参阅[java.lang.System](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html)。

3.  这是

    ```
    for(int a = 0, b = 1; a<cards.length()-1; b=a+1, a++){ 
    ```

    不是

    ```
    for(int a = 0, b = 1; a<cards.length-1; b=a+1; a++;){ 
    ```

4.  从语法上讲，它是`if(rank == cards.substring(a,b)){`，不是`if(rank===cards.substring(a,b){`（双等号，不是三等号；缺少右括号），而是要比较两个字符串是否相等，您需要使用`equals()`：`if(rank.equals(cards.substring(a,b))){`

您可能应该考虑下载[Eclipse](http://www.eclipse.org/downloads/packages/eclipse-ide-java-developers/junosr1)，它是一个（不仅是）用于 Java 开发的集成开发环境。Eclipse 在您键入时向您显示错误并提供修复这些错误的帮助。这使得开始 Java 开发变得更加容易。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-07T13:43:52.623

而不是这个： `for(int a = 0, b = 1; a<cards.length-1; b=a+1; a++;){`

它应该是

```
for(int a = 0, b = 1; a<cards.length()-1; b=a+1, a++){
                                     ^         ^    ^  
                                     |         |    |  
                                     |         |    |  
            -------------------------------------------Note the changes
           |                    
           v                                                  |
   if(rank==cards.substring(a,b){                             |
-------------------------------------------------------------                                  
|
v
System.out.println(c); //capital S in system 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-07T14:00:08.133

`for`循环中只允许使用两个分号。

1.  第一个分号之前是初始化部分。
2.  在第一个分号之后和第二个分号之前是条件部分（必须是布尔值）。
3.  第二个分号之后是变量操作部分（增量/减量部分）。

如果您有多个变量的初始化或多个变量的操作，您可以通过用逗号（，）分隔它们来实现。

```
for(int i=0, j=5; i < 5; i++, j--) 
```

注意：不允许使用逗号分隔的多个条件。

```
for(int i=0, j=5; i < 5, j > 5; i++, j--) // This is NOT allowed. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T13:48:48.170

我认为这应该有效：

```
 String rank = card.substring(0,1);
    String suit = card.substring(1);
    String cards = "A23456789TJQKDHSCl";

    String[] name = {"Ace","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Jack","Queen","King","Diamonds","Hearts","Spades","Clubs"};
    String c ="";
    for(int a = 0, b = 1; a<cards.length()-1; b=a+1, a++ )
    {
        if( rank.equals( cards.substring(a,b) ) )
        {
            c+=name[a];
        }

    }
    System.out.println(c); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T13:43:28.930

你的 for 循环是错误的。尝试 ：

```
for(int a = 0, b = 1; a<cards.length()-1; b=a+1, a++){ 
```

此外，`System`代替`system`和`==`代替`===`.

但我不确定你想做什么。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T13:43:38.713

for循环只能包含三个参数，你用过4个。请重述问题，你想实现什么？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-07T13:43:41.007

也用逗号分隔增量。

```
for(int a = 0, b = 1; a<cards.length-1; b=a+1, a++) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-07T13:43:59.850

更改此行

```
for(int a = 0, b = 1; a<cards.length-1; b=a+1; a++;){ 
```

至

```
for(int a = 0, b = 1; a<cards.length-1, b=a+1; a++){ 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-07T13:45:37.667

你的`for`循环格式不正确——它不能接受 4 个参数，而且你不能`;`像以前那样将两个参数结合起来。

利用：

```
for(int a = 0, b = 1; a<cards.length-1; a++) 
```

# eclipse-rcp - 处理“保存资源”对话框用户选择

> ID：14752545
> 
> 赞同：0
> 
> 时间：2013-02-07T13:42:23.520
> 
> 标签：eclipse-rcp

我有一个 RCP 应用程序管理保存在文件中的特定数据模型。有一个基于 org.eclipse.compare.* API 的合并比较功能。

关闭合并比较视图时，如果数据未保存，默认情况下会出现“保存资源”对话框。

问题是我没有找到机制来“通知”合并比较视图用户选择了什么，因此数据在关闭视图时没有保存。

一般来说，我的问题是如何根据从“保存资源”对话框中选择的内容来调用保存功能？排除这种情况，合并比较视图中的保存功能由保存命令的侦听器处理（例如，全部保存、保存），但从对话框启动的保存不是以这种方式处理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T11:05:25.210

我遇到了类似 urs 的问题我想问用户他是否想在文本编辑器中保存一些文件但不是所有文件

所以我用

```
PlatformUI.getWorkbench().saveAll(PlatformUI.getWorkbench().getActiveWorkbenchWindow(), PlatformUI.getWorkbench().getActiveWorkbenchWindow(), filter, true); 
```

# c# - 如何知道选中了哪个单选按钮？

> ID：14752558
> 
> 赞同：1
> 
> 时间：2013-02-07T13:42:54.780
> 
> 标签：c#, windows, winforms

我有这部分代码：（在按钮的单击事件中）

```
 foreach (RadioButton rb in grbFiltro.Controls.OfType<RadioButton>())
       {
           if (((RadioButton)rb).Checked)
           {
               switch (true)
               {
                   case rbt1.Checked:
                       //do something
                       break;
                   case rbt2.Checked:
                      //do something
                       break;
                   case rbt3.Checked:
                        //do something
                      break;
               }
           }
       } 
```

但是在 ---> case rbt1.Checked 中将单选按钮转换为字符串时出错

我该如何解决这个问题，或者我还能使用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:47:08.130

```
var rb = grbFiltro.Controls.OfType<RadioButton>()
             .SingleOrDefault(rb => rb.Checked.GetValueOrDefault()) as RadioButton;

if (rb!=null)
    switch (rb.Name)
           {
               case "button1":
                   //do something
                   break;
               case "button2":
                  //do something
                   break;
               case "button3":
                    //do something
                  break;
           } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:48:07.417

你有 25 个按钮，所以我可能会做类似的事情

```
 IEnumerable<RadioButton> buttons = grbFiltro.Controls.OfType<RadioButton>();
    foreach (var Button in buttons)
    {
         if (Button.Checked)
         {
             //Do Something
         }
     } 
```

如果您需要对每个按钮执行不同的操作，那么您将拥有一个 if / else 链，该链根据您的需要执行，但我猜您希望存储所选值并对其进行处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T13:54:05.017

您还可以在 CheckedChange 上添加一个侦听器，并始终将当前选定的单选按钮存储在一个字段中。然后，您只需在单击确认按钮后读取该值。如果您有超过 10 个单选按钮，这很方便

```
private RadioButton selectedButton;

//handler for Radio Buttons.
private void onRadioChange(Object sender, EventArgs e){
    if (((RadioButton)sender).Checked)
       this.selectedButton = (RadioButton)sender;
}

// handler for confirm button.
private void confirm(Object sender, EventArgs e){
   MessageBox.show(selectedButton.name + " selected");
} 
```

untestet，但这种方式应该可行。

# c# - C# 编译器是否计算常量的数学？

> ID：14752559
> 
> 赞同：12
> 
> 时间：2013-02-07T13:42:56.720
> 
> 标签：c#, performance, constants, compiler-optimization

给定以下代码：

```
const int constA = 10;
const int constB = 10;

function GetX(int input) {
    int x = constA * constB * input;
    ...
    return x;
} 
```

.Net 编译器会“替换”表达式并输入 1000，这样计算就不会一遍又一遍地重复吗？

在什么情况下代码运行最快：

1.  ```
    int x = constA * constB * input; 
    ```

2.  ```
    int x = 10 * 10 * input; 
    ```

3.  ```
    int x = 100 * input; 
    ```

我猜选项 3 会比 2 更快，但有时不是最易读的选项。编译器是否识别出这样的模式并相应地对其进行优化？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-07T13:47:26.177

[C# 常量表达式](http://msdn.microsoft.com/en-us/library/aa691319%28v=vs.71%29.aspx)：

> 只要表达式属于上面列出的类型之一并且只包含上面列出的结构，就会在编译时计算表达式。即使表达式是包含非常量结构的较大表达式的子表达式，也是如此。

（如果您愿意，还可以阅读更多内容）提到的“以上”是一个项目符号列表，包括：

> *   对类和结构类型的 const 成员的引用。

和，

> *   预定义的 +、–、*、/、%、<<、>>、&、|、^、&&、||、==、!=、<、>、<= 和 >= 二元运算符，提供每个操作数属于上面列出的类型。

因此，要直接回答您的问题，是的，编译器将在编译时执行计算。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-07T13:51:00.413

我在 LINQPad 中试过这个：

```
const int constA = 2;
const int constB = 50;

void Main()
{

    Console.WriteLine(GetX(12));
}

int GetX(int input) 
{
    int x = constA * constB * input;

    return x;
} 
```

IL是：

![在此处输入图像描述](../Images/cf9493f58503db9ea47d7b6ed064ea98.png)

十六进制 64 值（十进制为 100）是常数相乘的结果。mul 运算是乘以`input`。

所以听起来像应用于常量的操作是由编译器优化的。

# jquery - 隐藏 Jquery 通知栏

> ID：14752564
> 
> 赞同：0
> 
> 时间：2013-02-07T13:43:03.983
> 
> 标签：jquery

我正在使用 Jquery 在我的网页顶部显示通知。我正在使用以下功能来显示通知栏 -

```
function myBar(message) {
    $("<div />", { class: 'mybar', text: message, id: 'mymsg' }).hide().prependTo("body")
      .slideDown('slow');
} 
```

在`$(document).ready(function(){`我`myBar("my message");`用适当的 css 调用 , 。它根据需要显示栏。

现在我想在单击栏时隐藏栏。为此，我正在尝试这个

```
$("#mymsg").click(function() {
     $(this).remove();
}) 
```

但这不是这样工作的。关于什么可能是错的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:46:14.417

如果添加事件处理程序时您的 div 尚不存在，则 jQuery 集`$("#mymsg")`为空且未添加任何事件处理程序。

您可以`on`改用：

```
$(document.body).on('click', "#mymsg", function() {
     $(this).remove();
}); 
```

或者，如果您愿意，可以在添加 div 时绑定事件：

```
function myBar(message) {
    $("<div />", { class: 'mybar', text: message, id: 'mymsg' }).click(function(){
       $(this).remove();
    }).hide().prependTo("body").slideDown('slow');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:50:24.910

当页面加载时，消息元素在 DOM 中尚不存在，因此 click 事件处理程序未绑定到该元素。

由于这似乎是一次性消息，请考虑将事件处理程序直接链接到创建函数中。例如：

```
function myBar(message) {
    $("<div />", {
        class: 'mybar',
        text: message,
        id: 'mymsg'
    }).hide().prependTo("body").slideDown('slow').click(function() {
        $(this).remove();
    });
} 
```

# playframework - Play framework 1.x 重定向删除动作

> ID：14752566
> 
> 赞同：2
> 
> 时间：2013-02-07T13:43:17.153
> 
> 标签：playframework, playframework-1.x

我想将动作调用从一个控制器重定向到另一个控制器。ListController 显示条目列表，每个条目都有一个删除按钮。我不想在视图中使用具体的 EntryController 调用，因为我有一些稍后要实现的模拟控制器。

出于某种原因，play 不允许我调用 EntryController 上的动作，程序只是跳过调用线。调试播放代码我发现ControllerInstrumentation.isActionCallAllowed() 返回false。

**列表控制器**

```
public static void delete(Long id) {
  EntryController.delete(id);
} 
```

**ListController 索引视图**

```
#{a @delete(id)}delete{/a} 
```

**入口控制器**

```
public static void delete(Long id) {
  Entry entry = Entry.findById(id);
  entry.delete();
} 
```

**路线**

```
DELETE /{id}         ListController.delete
DELETE /entries/{id} EntryController.delete 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:40:27.147

route 说 ' `EntryController.delete`' 只接受 ' `DELETE`' 方法。因此，当您进行直接函数调用时，它会发出一个`HTTP GET`request 。您应该在重定向时覆盖 http 方法。

**列表控制器**

```
public static void delete(Long id) {
    //EntryController.delete(id);
    Map<String, Object> args = new HashMap<String, Object>();
    args.put("id", id);
    args.put("x-http-method-override", "DELETE");
    String fullUrl = Router.getFullUrl("EntryController.delete", args);
    redirect(fullUrl);
} 
```

# jquery - jquery - 如何为每个容器 div 中的每组子 div 设置高度？

> ID：14752578
> 
> 赞同：5
> 
> 时间：2013-02-07T13:43:41.113
> 
> 标签：jquery, css, class, height, parent-child

我有许多带有子 div 的容器（class="sidebox"），每个容器都有不同数量的内容。

在某些情况下，我希望每个子 div 的高度都是父 div 的 100%，有时要添加垂直分隔符样式。

为此，我`cfull`向子 div 和`vcon`具有“sidebox”类的容器添加了一个类。

然后调用一个jquery函数：

```
var y = $('.cfull').parent('div.vcon').height();
    $(".cfull").height(y) ; 
```

当只有一个实例并将其子 div 高度设置为边箱的高度时，这是完美的。

如果我`sidebox vcon`在 html 中添加第二个并给其中一个子 div 附加内容。第二个sidebox子div从sidebox的第一个实例获取高度设置

如何设置`class="sidebox vcon"`容器 div 中每组子 div 的高度？

我希望这是有道理的。

到目前为止，这是我的工作示例，您会看到第二个边箱的子项具有`style="height:#px"`来自第一个边箱的

[http://bit.ly/jqueryheightissue](http://bit.ly/jqueryheightissue)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T13:47:58.463

您正在做的事情称为隐式迭代。当你这样做时：

```
$('.cfull').height(y); 
```

...您正在做的是将所有`.cfull`元素设置为只有一个高度值（的当前值`y`）。

您想显式地遍历每个元素，可能使用`.each()`.

```
$('.cfull').each(function () {

    var self = $(this),
        container = self.parent('div.vcon');

    self.height(container.height());

}); 
```

但是，您应该能够仅使用纯 CSS 来完成您想要实现的目标。你试过做这样的事情吗？

```
.cfull {
    height : 100%;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T13:51:36.230

您需要遍历所有具有 . 类的元素`.cfull`。现场示例：http: [//jsfiddle.net/QpEgX/5/](http://jsfiddle.net/QpEgX/5/)

```
$('.cfull').each(function() {
    var y = $(this).parent('div.vcon').height();
    $(this).height(y) ;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T13:51:34.873

```
var height = 0;
$('.cfull').each(function () {
  height = $(this).parent('div.vcon').height();
  $(this).height(height);
}); 
```

# performance - 通过生产环境中的 JMX 进行休眠和 Ehcache 统计

> ID：14752589
> 
> 赞同：1
> 
> 时间：2013-02-07T13:44:14.453
> 
> 标签：performance, hibernate, caching, jmx, ehcache

我有更多关于意见和经验的问题，而不是技术解决方案。

您如何看待在生产环境中通过 JMX 控制台打开 Hibernate 统计信息和 Ehcache 统计信息？这似乎是个好主意还是可怕的主意？为什么？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T14:35:51.120

在我看来，这里有两个突出的问题：

1.  统计信息有用吗？在 JMX 中发布时您能否以有用的方式访问它们？
2.  启用统计信息是否会影响系统的整体性能？

我们假设 #1 是真的（否则我们为什么在这里？:)）

就＃2而言，您确实必须在负载下测试您的应用程序，无论是否有统计数据，但我的经验是这两个统计组件对性能的影响可以忽略不计。此外，定期收集和分析这些统计数据可能会带来改进，因为它会/可能会帮助您找到瓶颈或系统中可能没有使用缓存的部分。

我想你可能会争辩说有更好的方法来挖掘这些信息，比如让后台线程定期将统计信息写入日志文件，这适用于更简单的指标，如“元素如何在缓存中”，但许多统计信息不会如果核心引擎没有启用统计信息（如大多数 Hibernate 的指标），则可用。此外，JMX 已经走了很长一段路，并且有各种创造性的方式来访问和分析/报告/可视化它公开的数据。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T21:45:54.047

我工作的产品拥有一切——Hibernate stats、Ehcache stats、JMX 等等。但是我们通过我们的特殊后端（而不是 JMX）公开 Hibernate/Ehcache 信息，该后端只能由管理员用户访问，并使用 JMX 来监视绑定到我们的 SLA 合同的各种事物。但是，如果您的产品没有这样的后端，那么通过 JMX 公开 db/cache 统计数据对我来说听起来并不是一件错误的事情。

在生产环境中打开统计数据并不是什么大问题。成本大约是`AtomicLong` `incrementAndCount`每笔交易的一次操作，几乎是免费的。除非您每秒处理数百万笔交易，否则您不会注意到任何差异。

# python - python - 使用 nltk 和 scikit-learn 从文本中为标签云挑选最相关的词

> ID：14752595
> 
> 赞同：3
> 
> 时间：2013-02-07T13:44:26.930
> 
> 标签：python, data-mining, nltk, text-mining, scikit-learn

我想从文本中获取最相关的单词以准备标签云。

我使用了 scikit-learn 包中的 CountVectoriser：

```
cv = CountVectorizer(min_df=1, charset_error="ignore",
    stop_words="english", max_features=200) 
```

这很好，因为它给了我单词和频率：

```
counts = cv.fit_transform([text]).toarray().ravel()
words = np.array(cv.get_feature_names()) 
```

我可以过滤掉不常用的单词：

```
words = words[counts > 1]
counts = counts[counts > 1] 
```

以及单词，即数字：

```
words = words[np.array(map(lambda x: x.isalpha(), words))]
counts = counts[np.array(map(lambda x: x.isalpha(), words))] 
```

但它仍然不完美......

**我的问题是：**

1.  如何过滤掉动词？
2.  如何进行词干提取以摆脱同一个词的不同形式？
3.  如何调用 CountVectoriser 过滤掉两个字母的单词？

**另请注意：**

1.  我对 nltk 没意见，但像“你应该试试 nltk”这样的回答不是答案，请给我一个代码。
2.  我不想使用贝叶斯分类器和其他需要训练模型的技术。我没有时间，也没有训练分类器的例子。
3.  语言是英语

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T14:58:41.653

1-如何过滤掉动词？

取决于您要支持的语言。您将需要一个好的句子 + 单词标记器对和一个词性标注器。这三个组件通常使用机器学习模型来实现（尽管您可以使用基于规则的句子和单词标记器获得良好的结果）。如果您只想支持英语，您可以在 nltk 中找到预训练模型，但我不是专家，您必须阅读文档和教程 :)

一旦您知道如何将文本拆分为句子和单词并识别和删除动词，您就可以将其包装为 python 函数并将其传递给`CountVectorizer`构造函数，见下文。

2-如何执行词干去除同一个词的不同形式？

您必须将自定义`tokenizer`python 可调用函数传递给`CountVectorizer`构造函数，以同时处理令牌提取、词干提取和可选过滤。这在[文档](http://scikit-learn.org/dev/modules/feature_extraction.html#customizing-the-vectorizer-classes)中进行了解释。

对于词干本身，这取决于您要支持的语言，但您可以从[http://nltk.org/api/nltk.stem.html开始](http://nltk.org/api/nltk.stem.html)

有一个拉取请求可以更自然地插入词干分析器：

[https://github.com/scikit-learn/scikit-learn/pull/1537](https://github.com/scikit-learn/scikit-learn/pull/1537)

3- 如何调用 CountVectorizer 过滤掉两个字母的单词？

您可以更改用于标记化的默认正则表达式：

```
>>> from sklearn.feature_extraction.text import CountVectorizer
>>> CountVectorizer().token_pattern
u'(?u)\\b\\w\\w+\\b'
>>> CountVectorizer(token_pattern=u'(?u)\\b\\w{3,}\\b').build_tokenizer()(
...    'a ab abc abcd abcde xxxxxxxxxxxxxxxxxxxxxx')
['abc', 'abcd', 'abcde', 'xxxxxxxxxxxxxxxxxxxxxx']
>>> CountVectorizer(token_pattern=u'(?u)\\b\\w{3,9}\\b').build_tokenizer()(
...     'a ab abc abcd abcde xxxxxxxxxxxxxxxxxxxxxx')
['abc', 'abcd', 'abcde'] 
```

但在您的情况下，您可能希望整体替换标记器。您仍然可以查看[默认实现的源代码](https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/feature_extraction/text.py#L194)。

不过要注意一点：要构建标签云，直接使用 nltk 和`collections.Counter`python 标准库中的类可能要容易得多。sklearn 并没有为您提供太多的这项任务。

# php - PHP和Mysql中的新闻系统

> ID：14752596
> 
> 赞同：0
> 
> 时间：2013-02-07T13:44:38.693
> 
> 标签：php, mysql

我一直试图让这个系统工作几个小时，但仍然无法让它工作。这是教程的直接复制/粘贴，显然它适用于许多其他人，所以我不明白为什么它对我不起作用！该表已创建，因此根本不是问题......系统不会向mysql数据库输入任何内容，我也没有收到任何错误！！！！

该教程可以在这里找到：http: [//www.codingforums.com/archive/index.php/t-46916.html](http://www.codingforums.com/archive/index.php/t-46916.html)

我知道这不是一个安全的系统，但只要我能让它工作，我就会解决它！

这是代码：

**配置文件**

```
<?php

$dbhost="localhost";
$dbusername="myusernam";
$dbpassword="mypass";
$dbname="dataname";

$connect = mysql_connect($dbhost, $dbusername, $dbpassword);
mysql_select_db($dbname,$connect) or die ("Could not select database");

?> 
```

**add_news.php**

```
<?php

include("config.php");

if($submit)
{//begin of if($submit).

// Set global variables to easier names
$title = $_POST['title'];
$text1 = $_POST['text1'];
$text2 = $_POST['text2'];

//check if (title) field is empty then print error message.
if(!$title){ //this means If the title is really empty.
echo "Error: News title is a required field. Please fill it.";
exit(); //exit the script and don't do anything else.
}// end of if
//run the query which adds the data gathered from the form into the database
$result = mysql_query("INSERT INTO news (title, dtime, text1, text2)
VALUES ('$title',NOW(),'$text1','$text2')",$connect);
//print success message.
echo "<b>Thank you! News added Successfully!<br>You'll be redirected to Home Page after (4) Seconds";
echo "<meta http-equiv=Refresh content=4;url=index.php>";
}//end of if($submit).

// If the form has not been submitted, display it!
else
{//begin of else

?>
<br>
<h3>::Add News</h3>

<form method="post" action="<?php echo $PHP_SELF ?>">
Title: <input name="title" size="40" maxlength="255">
<br>
Text1: <textarea name="text1" rows="7" cols="30"></textarea>
<br>
Text2: <textarea name="text2" rows="7" cols="30"></textarea>
<br>
<input type="submit" name="submit" value="Add News">
</form>
<?
}//end of else

?> 
```

**news_view.php**

```
<?php

// load the configuration file.

include("config.php");
//load all news from the database and then OREDER them by newsid
//you will notice that newlly added news will appeare first.
//also you can OREDER by (dtime) instaed of (news id)
$result = mysql_query("SELECT * FROM news ORDER BY newsid DESC",$connect);

//lets make a loop and get all news from the database
while($myrow = mysql_fetch_assoc($result))
{//begin of loop

//now print the results:
echo "<b>Title: ";
echo $myrow['title'];
echo "</b><br>On: <i>";
echo $myrow['dtime'];
echo "</i><hr align=left width=160>";
echo $myrow['text1'];

// Now print the options to (Read,Edit & Delete the news)
echo "<br><a href=\"read_more.php?newsid=$myrow[newsid]\">Read More...</a>
|| <a href=\"edit_news.php?newsid=$myrow[newsid]\">Edit</a>
|| <a href=\"delete_news.php?newsid=$myrow[newsid]\">Delete</a><br><hr>";

}//end of loop

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:52:39.757

这应该更像是一个评论，但是因为那里的格式化选项非常有限，而且我有很多要评论的地方，所以这里是：

写那个例子的人......没有做得最好。

根本没有错误处理（`mysql_query("INSERT...`）。

请替换/扩展：

```
$result = mysql_query("INSERT INTO news (title, dtime, text1, text2)
VALUES ('$title',NOW(),'$text1','$text2')",$connect);
//print success message.
echo "<b>Thank you! News added Successfully!<br>You'll be redirected to Home Page after (4) Seconds";
echo "<meta http-equiv=Refresh content=4;url=index.php>"; 
```

和

```
$result = mysql_query("INSERT INTO news (title, dtime, text1, text2)
VALUES ('$title',NOW(),'$text1','$text2')",$connect);
if ( $result ){
//print success message.
echo "<b>Thank you! News added Successfully!<br>You'll be redirected to Home Page after (4) Seconds";
echo "<meta http-equiv=Refresh content=4;url=index.php>";
} else {
echo("Error: ".mysql_error() );
}
}//end of if($submit). 
```

我相信插入没有运行（无论出于何种原因，您现在希望可以看到）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:53:28.923

试试这个代码：

配置文件

```
<?php

$username = "myusernam";
$password = "mypass";

try {
    $connect = new PDO('mysql:host=localhost;dbname=dataname', $username, $password);
    $connect->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} catch(PDOException $e) {
    echo 'ERROR: ' . $e->getMessage();
}

?> 
```

addnews.php

```
<?php

include("config.php");

if(isset($_POST['submit'])){

$title = $_POST['title'];
$text1 = $_POST['text1'];
$text2 = $_POST['text2'];

if(empty($title)){ 
echo "Error: News title is a required field. Please fill it.";
exit(); 
}

$sql = "INSERT INTO news (title, dtime, text1, text2) VALUES (:title, NOW(), :text1, :text2)";
         $stmt = $connect->prepare($sql);
         $stmt->bindParam(':title', $title, PDO::PARAM_STR);
         $stmt->bindParam(':text1', $text1, PDO::PARAM_STR);
         $stmt->bindParam(':text2', $text2, PDO::PARAM_STR);
         $stmt->execute();

echo "<b>Thank you! News added Successfully!<br>You'll be redirected to Home Page after (4) Seconds";
echo "<meta http-equiv=Refresh content=4;url=index.php>";

}
?>

<br>
<h3>::Add News</h3>

<form method="post" action="<?php echo $PHP_SELF ?>">
Title: <input name="title" size="40" maxlength="255">
<br>
Text1: <textarea name="text1" rows="7" cols="30"></textarea>
<br>
Text2: <textarea name="text2" rows="7" cols="30"></textarea>
<br>
<input type="submit" name="submit" value="Add News">
</form> 
```

news_view.php

```
<?php

include("config.php");

$stmt = $connect->prepare('SELECT * FROM news ORDER BY newsid desc');
$stmt->execute();

while($sa = $stmt->fetch(PDO::FETCH_ASSOC)) {

echo "<b>Title: ";
echo $sa['title'];
echo "</b><br>On: <i>";
echo $sa['dtime'];
echo "</i><hr align=left width=160>";
echo $sa['text1'];

echo "<br><a href=\"read_more.php?newsid=$sa[newsid]\">Read More...</a>
|| <a href=\"edit_news.php?newsid=$sa[newsid]\">Edit</a>
|| <a href=\"delete_news.php?newsid=$sa[newsid]\">Delete</a><br><hr>";

}

?> 
```

# internet-explorer - 如何使用 Internet Explorer 使按钮中的文本居中？

> ID：14752603
> 
> 赞同：1
> 
> 时间：2013-02-07T13:44:52.687
> 
> 标签：internet-explorer, html

我创建了一个导航菜单。在 Google Chrome / Firefox 中它看起来非常好。但是在 Internet Explorer 中，按钮的文本在底部？！

那么我该如何解决以下问题？

看看我的意思：

**谷歌浏览器：** ![在此处输入图像描述](../Images/7caec02fd199f1e57a46e117fa4ab3b2.png)

**火狐浏览器：** ![在此处输入图像描述](../Images/9f48c1b6bf49cbb433ca31021984046f.png)

**IE浏览器：** ![在此处输入图像描述](../Images/f0313394efcc974b79f1761315bd73d8.png)

```
.auto-style2 {
    font-size: 40px;
    text-align: left;
    float:left;
}
.auto-style3 {
    width:1200px;
    height:50px;
    margin: 0px auto;
    text-align: left;
    vertical-align: middle;
}

.auto-style5 {
    text-align: right;
    float:right;
    line-height:50px;
}

<div class="auto-style3">
<div class="auto-style2">
    <strong>SPICYSOFTWARE</strong>
</div>
<div class="auto-style5">
    <button name="Abutton1" style="width: 100px; height: 30px; margin-left: 5px; vertical-align: middle; text-align: center;">MWST</button>
    <button name="Abutton2" style="width: 100px; height: 30px; margin-left: 5px; vertical-align: middle;">News</button>
    <button name="Abutton3" style="width: 100px; height: 30px; margin-left: 5px; vertical-align: middle;">Alle Apps</button>
    <button name="Abutton4" style="width: 100px; height: 30px; margin-left: 5px; vertical-align: middle;">Über uns</button>
    <button name="Abutton5" style="width: 100px; height: 30px; margin-left: 5px; vertical-align: middle;">Changelog</button>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:53:14.700

把这个放在你的脑海里。

```
 <!--[if IE]>
    <link rel="stylesheet" type="text/css" href="IE.css" />
 <![endif]--> 
```

为 IE 创建一个额外的 css 文件并相应地调整您的 IE css。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:51:21.627

您需要重置按钮行高，因为它是从`.auto-style5`元素继承的。

不幸的是，按钮有点繁琐。我认为 25px 应该是正确的。尝试添加：

```
.auto-style5 button {
    line-height: 25px;
} 
```

不过可能需要一些微调。

希望有帮助:)

**编辑**

或者像这样使它相对：

```
.auto-style5 button {
    line-height: 1.5;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T13:58:44.703

设置要继承的行高

```
 line-height: inherit; 
```

[http://jsbin.com/ovuguw/3/edit](http://jsbin.com/ovuguw/3/edit)

# javascript - 在 Javascript 中构造 JSON

> ID：14752606
> 
> 赞同：4
> 
> 时间：2013-02-07T13:44:57.533
> 
> 标签：javascript, json

我正在尝试在 js 中构造 JSON 对象。在堆栈溢出本身中已经有几篇关于这个主题的帖子。参考了[如何在javascript中动态构建JSON？](https://stackoverflow.com/questions/4314008/how-do-i-build-json-dynamically-in-javascript). 必须完全像帖子中提到的那样构建 JSON。

```
{
    "privilege": {
        "accesstype": "VIEW",
        "attribute": [
            {
                "code": "contenttype",
                "displayname": "Content type",
                "value": {
                    "valcode": "book_article",
                    "valdisplayName": "Book Article"
                }
            },
            {
                "code": "mime",
                "displayname": "Mime type",
                "value": {
                    "valcode": "xml",
                    "valdisplayName": "Xml"
                }
            }
        ]
    }
} 
```

按照帖子中的答案并尝试了这个，

```
var privilege = {};

privilege.attribute[0].code = "contenttype";
privilege.attribute[0].displayname = "Content type";
privilege.attribute[0].value.valcode = "book_article";
privilege.attribute[0].value.valdisplayName = "Book Article"; 
```

但是由于 privilege.attribute 未定义而出现错误。

我无法弄清楚我哪里出错了。假设必须有一些声明问题。任何关于它的光都会有很大的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T13:49:26.950

尝试这个：

```
 var privilege = {};
 privilege.attribute = [];
 privilege.attribute[0] = {};
 privilege.attribute[0].code="contenttype";
 privilege.attribute[0].displayname="Content type";
 privilege.attribute[0].value = {};
 privilege.attribute[0].value.valcode="book_article";
 privilege.attribute[0].value.valdisplayName="Book Article"; 
```

看看 Javascript 对象。那里有很多东西。例如[http://mckoss.com/jscript/object.htm](http://mckoss.com/jscript/object.htm)

**编辑**`privilege.attribute[0] = {};`：在评论提示后初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:51:27.027

为什么不只是做

```
var privilege = {
    "accesstype": "VIEW",
    "attribute": [{
        "code": "contenttype",
        "displayname": "Content type",
        "value": {
            "valcode": "book_article",
            "valdisplayName": "Book Article"
        }
    }, {
        "code": "mime",
        "displayname": "Mime type",
        "value": {
            "valcode": "xml",
            "valdisplayName": "Xml"
        }
    }]
} 
```

...实际上，您不需要键是字符串，您可以编写...

```
var privilege = {
    accesstype: "VIEW",
    attribute: [{
        code: "contenttype",
        displayname: "Content type",
        value: {
            valcode: "book_article",
            valdisplayName: "Book Article"
        }
    }, {
        code: "mime",
        displayname: "Mime type",
        value: {
            valcode: "xml",
            valdisplayName: "Xml"
        }
    }]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T13:49:26.510

尝试这个

```
privilege.attribute = [];
privilege.attribute.push({});

privilege.attribute[0].code="contenttype";
privilege.attribute[0].displayname="Content type";
privilege.attribute[0].value.valcode="book_article";
privilege.attribute[0].value.valdisplayName="Book Article"; 
```

# c# - 无法从树视图中检索已修改的选中项 - 仅显示加载状态

> ID：14752613
> 
> 赞同：0
> 
> 时间：2013-02-07T13:45:20.817
> 
> 标签：c#, asp.net, treeview, treeviewitem, radtreeview

我在 c# asp.net 中填充了一个树视图，并将数据绑定到它，一切都很好，并按应有的方式显示。我现在的问题是我希望保存对复选框的任何修改，即如果用户单击另一个框并保存但我选中的状态将保持为假。

这是我到目前为止所拥有的，它迭代了最初加载的内容而不是更改的内容，我尝试了很多变化，但没有设法让它工作 - 任何人有什么想法吗？

```
public void saveCheckedItems()
{

    if (treeListItems.CheckedNodes.Count > 0)
    {
        IList<RadTreeNode> allNodes = treeListItems.GetAllNodes();

        for (int i = 0; i < allNodes.Count; i++)
        {
            RadTreeNode node = (RadTreeNode)allNodes[i];
            string fileid = node.Value.ToString();
            if (node.Checked == true)
            {
                if (fileid.Length == 12)
                {
                    saveTreeChanges(Page.Request.QueryString["ID"], fileid,connectionStr);
                }
            }
        }
    }
} 
```

编辑 -

创建树视图如下

```
<telerik:RadTreeView ID="treeListItems" runat="server" CheckBoxes="True" Height="320px"
                            TriStateCheckBoxes="true" CheckChildNodes="true" Skin="WebBlue" CssClass="table table-bordered" OnNodeDataBound="RadTreeView1_NodeDataBound" >
                        </telerik:RadTreeView> 
```

像这样绑定数据

```
public void loadTreeList()
        {
            DataTable dt = treeMan.getTreeList(connectionStr);
            treeListItems.DataTextField = "Description";
            treeListItems.DataValueField = "FieldID";
            treeListItems.DataFieldID = "FieldID";
            treeListItems.DataFieldParentID = "ParentID";
            treeListItems.DataSource = dt;
            treeListItems.DataBind();
            treeListItems.ExpandAllNodes();
        } 
```

在示例中，我测试了它的 3 层树，并在第三层检查了一个元素。当我单击更多项目时，只有这个已选中的项目在列表中可见

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:26:32.250

尝试这个：

```
public void saveCheckedItems()
{
    IList<RadTreeNode> nodeCollection = treeListItems.CheckedNodes;
    foreach (RadTreeNode node in nodeCollection)
    {
        string fileid = node.Value.ToString();
        if (fileid.Length == 12)
        {
            saveTreeChanges(Page.Request.QueryString["ID"], fileid, connectionStr);
        }
    }
} 
```

保留已检查节点状态的唯一方法是将它们放入在页面回发之间持续存在的对象中。我建议您使用 cookie 或[ASP.NET Session State](http://msdn.microsoft.com/en-us/library/ms972429.aspx)。考虑以下评论中的示例：[http ://www.telerik.com/community/code-library/aspnet-ajax/treeview/save-the-expanded-state-of-the-treenodes-when-the-treeview- is-being-bound-upon-each-postback.aspx#1603151](http://www.telerik.com/community/code-library/aspnet-ajax/treeview/save-the-expanded-state-of-the-treenodes-when-the-treeview-is-being-bound-upon-each-postback.aspx#1603151)。

# facebook - 如何访问用户个人资料页面上的公共数据？

> ID：14752614
> 
> 赞同：0
> 
> 时间：2013-02-07T13:45:23.873
> 
> 标签：facebook, facebook-graph-api, permissions, profile

为了争论，假设我们有一个人几乎公开了他们页面上的所有内容——工作场所、家乡、位置、生日、电子邮件、电话号码、帖子等。

如何使用图形 API 访问这些信息？

目前我正在使用`$facebook->api('/'.$id;`它返回 id、first_name、last_name、link、gender、locale 和 updated_time。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:06:47.500

否则，您可以尝试像 LoginRadius 这样的第三方服务，它可以为您提供现成的代码来获取所有这些详细信息

# sql - 嵌套 SQL 更新不起作用

> ID：14752615
> 
> 赞同：1
> 
> 时间：2013-02-07T13:45:27.603
> 
> 标签：sql, ms-access

```
UPDATE
   tbl1 INNER JOIN tbl2 ON tbl1.id = tbl2.id 
SET tbl2.Field1 = 
   (SELECT TOP 1 tbl3.Field1 FROM tbl3 WHERE tbl3.FromDate<tbl1.StartDate And
    tbl3.Number=tbl2.Number ORDER BY tbl3.FromDate DESC) 
```

我尝试使用上述 SQL 更新 tbl2 中每一行的 Field1，但出现错误：

> 操作必须使用可更新的查询。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:04:36.330

因为连接语法的更新因数据库而异，所以我通常使用：

```
UPDATE tbl2
    SET tbl2.Field1 =  . . .
    from tbl1
    where tbl1.id = tbl2.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:23:59.233

根据您上面的描述，不需要通过join进行更新。怎么样：

```
UPDATE tbl2 
SET tbl2.Field1 = 
(SELECT TOP 1 tbl3.Field1 FROM tbl1 JOIN tbl2 AS tbl2_2 ON tbl1.id = tbl2_2.id 
                                    JOIN tbl3
 WHERE tbl3.FromDate < tbl1.StartDate
   AND tbl3.Number=tbl2.Number
 ORDER BY tbl3.FromDate DESC) 
```

如果表很大，我会考虑索引 tbl3.FromDate 和可能的 tbl2.Number。

布赖恩

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T21:11:04.523

这是您发布的 SQL 重新组织，因此它将在 UPDATE 中工作：

```
UPDATE tbl2
SET Field1 = 
   (
      SELECT TOP 1
         tbl3.Field1
      FROM tbl1
      INNER JOIN tbl2
      ON tbl1.id = tbl2.id
      INNER JOIN tbl3
      ON tbl2.Number = tbl3.Number
      WHERE 
         tbl3.FromDate<tbl1.StartDate
) 
```

# java - 从 InputStream 中删除换行符

> ID：14752622
> 
> 赞同：7
> 
> 时间：2013-02-07T13:45:52.347
> 
> 标签：java, file, inputstream

我喜欢从 an 中删除所有换行符（对于 \n 和 \r\n）`java.io.InputStream`，在读取文件时，相应的方法如下所示：

```
/**
 * @param target {@linkplain File}
 * @return {@linkplain InputStream}
 * @throws Exception
 */
protected InputStream initInput(final File file)
    throws Exception {
    InputStream stream = null;
    try {
        if (file.isDirectory()) {
            // throw exception
        }
        if (!file.exists()) {
            // throw another exception
        }
        // 
        // *remove newlines here*
        //
        stream = new FileInputStream(file);

    } catch (FileNotFoundException e) {
        // throw another exception
    }
    return stream;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T13:50:53.033

您可以将其转换为字符串，并将换行符替换为空：

```
InputStream is = new ByteArrayInputStream("file content".getBytes());

    //read it with BufferedReader
    BufferedReader br  = new BufferedReader(new InputStreamReader(is));

    StringBuilder sb = new StringBuilder();

    String line;
    while ((line = br.readLine()) != null) {
        sb.append(line.replace("\r","").replace("\n",""))       

    System.out.println(sb.toString()); 
```

考虑到您的文本不包含与您相关的“\n”和“\r”，这将是一件好事。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-07T15:19:21.973

您可以`java.io.FileInputStream`在阅读时跳过阅读方法，并以自己的方式实现和覆盖阅读`\r`方法`\n`。

Hier 是示例实现（没有任何错误处理）

```
import java.io.File;
import java.io.FileDescriptor;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;

public class NoNewLineFileInputStream extends FileInputStream {

    public NoNewLineFileInputStream(String filepath) throws FileNotFoundException {
        super(filepath);
    }

    public NoNewLineFileInputStream(File file) throws FileNotFoundException {
        super(file);
    }

    public NoNewLineFileInputStream(FileDescriptor filedescriptor) {
        super(filedescriptor);
    }

    @Override
    public int read(byte[] b) throws IOException {
        return this.read(b, 0, b.length);
    }

    @Override
    public int read(byte[] b, int off, int len) throws IOException {
        int n = 0, c;
        do {
            c = this.read();
            if(c != -1) {
                b[off + n] = (byte) c;
                n++;
                len--;  
            } else {
                return c;
            }
        } while(c != -1 && len > 0);
        return n;
    }

    @Override
    public int read() throws IOException {
        int c;
        do {
            c = super.read();
        } while(c != -1 && (c == '\n' || c == '\r'));
        return c;
    }
} 
```

对于一些基本测试...

```
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import junit.framework.Assert;

import org.junit.BeforeClass;
import org.junit.Test;

public class NoNewLineFileInputStreamTest {

    private final static String txt = "testnl.txt";

    @BeforeClass
    public static void genTestFile() throws IOException {
        OutputStream os = new FileOutputStream(txt);
        os.write((
                "Hello\n" +
                ",\r\n" +
                "World!\r" +
                "").getBytes());
        os.close();
    }

    @Test
    public void readInt() throws IOException {
        InputStream is = new NoNewLineFileInputStream(txt);
        int c = is.read();
        while(c != -1) {
            Assert.assertTrue(c != '\n' && c != '\r');
            c = is.read();
        }
        is.close();
    }

    @Test
    public void readBytes() throws IOException {
        InputStream is = new NoNewLineFileInputStream(txt);
        int l = is.available();
        if(l > 0) {
            byte[] content = new byte[l];
            int n = is.read(content);
            String expected = "Hello,World!";
            Assert.assertEquals(expected.getBytes().length, n);
            Assert.assertEquals(expected, new String(content, 0, n));
        }
        is.close();
    }

    @Test
    public void readBytesOffset() throws IOException {
        InputStream is = new NoNewLineFileInputStream(txt);
        int l = is.available();
        if(l > 0) {
            byte[] content = new byte[l*3];
            int n = is.read(content, 3, 5);
            String expected = "Hello";
            Assert.assertEquals(expected.getBytes().length, n);
            Assert.assertEquals(expected, new String(content, 3, n));
        }
        is.close();
    }
} 
```

你的方法看起来像这样

```
/**
 * @param target {@linkplain File}
 * @return {@linkplain InputStream}
 * @throws Exception
 */
protected InputStream initInput(final File file)
    throws Exception {
    InputStream stream = null;
    try {
        if (file.isDirectory()) {
            // throw exception
        }
        if (!file.exists()) {
            // throw another exception
        }
        // 
        // read operations using this implementation will jump over all '\n' and '\r'
        //
        stream = new NoNewLineFileInputStream(file);

    } catch (FileNotFoundException e) {
        // throw another exception
    }
    return stream;
} 
```

为了更好地与抽象类兼容，`java.io.InputStream`您可能希望在您的类中覆盖它的所有方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T13:50:22.123

有时，标准 Java 库无法提供足够的方法来操作其核心类。Apache Commons Lang 提供了这些额外的方法。

如果您可以使用该库，则[StringUtils.chomp](http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#chomp-java.lang.String-)方法可能有用。

# c# - 甚至找不到在行数据绑定网格视图上添加的复选框控件

> ID：14752629
> 
> 赞同：3
> 
> 时间：2013-02-07T13:46:14.937
> 
> 标签：c#, asp.net, gridview, dynamic, postback

我添加了控制

```
 if (e.Row.RowType == DataControlRowType.DataRow)
    {
        CheckBox chk = new CheckBox();
        chk.EnableViewState = true;
        chk.Enabled = true;
        chk.ID = "chkb";

        DataRowView dr = (DataRowView)e.Row.DataItem;
        chk.Checked = (dr[0].ToString() == "true");

        e.Row.Cells[1].Controls.Add(chk);
        e.Row.TableSection = TableRowSection.TableBody;
    } 
```

并试图通过

```
 if (GridView2.Rows.Count>0)
    {
        foreach (GridViewRow row in GridView2.Rows)
        {
            CheckBox cb =(CheckBox) GridView2.Rows[2].Cells[1].FindControl("chkb");
            if (cb != null && cb.Checked)
            {
                Response.Write("yest");
            }

        }
    } 
```

但我找不到它......实际上我的问题是我需要创建一个动态列表..为此我正在使用gridview

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:49:42.550

您需要在每个回发上创建动态控件，因为它是在当前生命周期结束时处理的。但是`RowDataBound`只是在您对`GridView`通常仅执行的操作进行数据绑定时触发`if(!IsPostBack)`（在第一次加载页面时）。

您应该创建动态控件，`RowCreated`而不是在每次回发时调用它。您可以根据需要对这些控件进行数据绑定`RowDataBound`，因为`RowCreated`首先触发。

```
protected void GridView1_RowCreated(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        CheckBox chk = new CheckBox();
        chk.EnableViewState = true;
        chk.Enabled = true;
        chk.ID = "chkb";
        e.Row.Cells[1].Controls.Add(chk);
    }
}

protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        var chk = (CheckBox)e.Row.FindControl("chkb");
        // databind it here according to the DataSource in e.Row.DataItem
    }
} 
```

# php - 裁剪图像左右两侧

> ID：14752633
> 
> 赞同：1
> 
> 时间：2013-02-07T13:46:38.567
> 
> 标签：php, image, gd

我有一张带有尺寸的图片`1440 X 500`。

我需要在左侧`200px`和右侧裁剪此图像`200px`。也就是说，新图像的尺寸必须为`1040 X 500`。

我正在尝试这个

```
$original_w = 1440;
$original_h = 500;

$new_w = 1040;
$new_h = 500;

$new_img = imagecreatetruecolor( $new_w, $new_h);
imagecopyresampled($new_img, $original_img, 200, 0, 200, 0, $new_w, $new_h, $original_w, $original_h); 
```

我没有得到理想的结果，请帮忙，我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:53:57.337

阅读[PHP 文档](http://www.php.net/manual/en/function.imagecopyresampled.php)，您使用`imagecopyresampled`错误：

```
imagecopyresampled ( 
   resource $dst_image , 
   resource $src_image , 
   int $dst_x , 
   int $dst_y , 
   int $src_x , 
   int $src_y , 
   int $dst_w , 
   int $dst_h , 
   int $src_w , 
   int $src_h 
) 
```

所以 ：

```
$original_w = 1440;
$original_h = 500;

$new_w = 1040;
$new_h = 500;

$new_img = imagecreatetruecolor( $new_w, $new_h);
imagecopyresampled($new_img, $original_img, 0, 0, 200, 0, $new_w, $new_h, $new_w, $new_h); 
```

将 1040*500 框从 (200,0) 坐标复制到 (0,0) 坐标处的新图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T13:53:26.623

你想要的可能是这样的：

`imagecopyresampled($new_img, $original_img, -200, 0, 0, 0, $new_w, $new_h, $original_w, $original_h);`

这告诉 PHP：

将从坐标 (0, 0) 开始的 1440x500 图像复制到从 (-200, 0) 开始的 1040x500 画布

这样，您将原始图像从画布左移 200 像素，并将画布宽度缩小 400 像素（这样右边的 200 像素也被切断）。

我相信这应该可以满足您的需求。

# c++ - 二维数组，无法成功填充数据。

> ID：14752639
> 
> 赞同：0
> 
> 时间：2013-02-07T13:46:51.660
> 
> 标签：c++

我在下面使用这个类

```
template<typename T>
class array_2d 
{
public:
    std::size_t data;
    std::size_t col_max;
    std::size_t row_max;
    std::vector<T> a;

    array_2d(std::size_t col, std::size_t row) : data(col*row), col_max(col), row_max(row), a(data)
    {}

    T& operator()(std::size_t col, std::size_t row) 
    {
        assert(col_max > col && row_max > row);
        return a[col_max*col + row];
    }
}; 
```

并像这样初始化它

```
 array_2d<CString> tableData(5, 2);
    for(int r = 0; r < 5; r++)
        for(int c = 0; c < 2; c++)
            tableData(r, c) = "Test"; 
```

并不断回来说我超出了向量的范围。我已经尝试了几个小时来获得一个成功的二维 CString 数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:50:15.670

说`tableData(c, r) = "Test";`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:50:14.203

呃..你的参数/参数顺序混淆了......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T13:55:52.603

`tableData(r, c) = "Test";`

对比

`T& operator()(std::size_t col, std::size_t row)`

这肯定行不通。

# qt - QTableView中单元格内容居中对齐

> ID：14752640
> 
> 赞同：5
> 
> 时间：2013-02-07T13:46:52.067
> 
> 标签：qt, qtableview, qabstracttablemodel

我有一个 QTableView。

有没有办法对齐中心，这个视图的所有单元格内容？

我没有使用任何代表。它只是`AbstractTableModel`作为模型添加到`QTableView`.

我应该如何将每个单元格内容与中心对齐？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T14:04:12.790

如果您不想使用自定义委托，您可以在`data`模型实现的函数中设置它，使用`Qt::TextAlignmentRole`：

```
QVariant MyModel::data ( const QModelIndex & index, int role = Qt::DisplayRole )
{
         if (role == Qt::TextAlignmentRole )
             return Qt::AlignCenter;
         else
             return QAbstractItemModel::data(index, role);
} 
```

# c# - 更快地执行“if”语句

> ID：14752643
> 
> 赞同：3
> 
> 时间：2013-02-07T13:47:08.567
> 
> 标签：c#, winforms, if-statement

有没有更快的方法来做到这一点？我有 36 张不同的图片，当图片发生变化时，我有一个跟踪图像（旋转）的字符串，image1 是旋转 = 1 等等，我要做的是使用 36 个这样的 if 语句：

```
if (rotation == 1) //This is picture1
{

}
else if (rotation == 2) //This is picture2
{

} 
```

一直到：

```
else if (rotation == 36) //This is picture36
{

} 
```

有没有什么办法可以用 1 或 2 行代码来计算它的旋转？任何在你问之前会说检查的人，我已经检查过了，我发现没有任何帮助，如果你发现了什么，请在此处发布。

我的 if 语句内部仅用于更改图像。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T13:50:52.033

要么使用数组

```
picture = img[i]; 
```

或者也许实际上在索引之后*命名*`image01.jpg`图像（例如，`image02.jpg`等）

数组给我的印象是最可扩展和最简洁的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T13:58:08.327

例如，如果您打印旋转，请在您的内部说。

```
if (rotation == 1) //This is picture1
{
   System.out.println(1);
}
else if (rotation == 2) //This is picture2
{
    System.out.println(2);
}

else if(rotation==36)
{
    System.out.println(36);
} 
```

您可以将整个代码更改为一行。

```
System.out.println(rotation); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T13:48:21.450

`WhateverYourPictureClassIs`您可以使用、 或`IDictionary<int,WhateverYourPictureClassIs>`、 或`switch`语句的数组。

比如图片信息是一个字符串：

```
string[] pictures = {
  "you might have a blank entry here if the first number is 1 instead of 0",
  "picture1",
  "picture2",
  "picture3",
  "picture4",
  // ...and so on...
}; 
```

然后查找图片是

```
if (picture >= 0 && picture < pictures.Length) { // The 0 might be 1 in your case
    pictureInfo = pictures[picture];
} 
```

或者

```
IDictionary<int,string> pictures = new Dictionary<int,string>();
pictures.Add(1, "picture1");
// ...and so on... 
```

抬头一看，大同小异。

或者

```
switch (picture) {
    case 1: pictureInfo = "picture1"; break;
    case 2: pictureInfo = "picture2"; break;
    // ...and so on...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T13:56:35.973

这是一个长镜头，我假设图像文件的名称将始终对应于旋转值，如下所示

旋转 = 1 -----> 文件
名 = image1.png 旋转 = 2 -----> 文件名 = image2.png

如果是这样，你可以这样做

```
string fileName = "image" + rotation + ".png"; 
```

您可以使用它以您需要的方式选择或显示您的文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T13:49:43.320

一个 switch 语句。

[http://www.dotnetperls.com/if-switch-performance](http://www.dotnetperls.com/if-switch-performance)

```
switch(number)
{
  case 1:

    break;
} 
```

或者，如果你有一个`List<T>`- 在这种情况下`T`是你的照片，你可以做

```
List<T> pictures = new List<T>();
T picture = pictures[rotation]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T13:49:45.130

最好的方法是使用 int 而不是 String，然后您可以使用`switch case`.

Java 7 允许在 switch 语句中使用字符串，我不知道在 C# 中是否可能。

# objective-c - 比较 UITableViews

> ID：14752644
> 
> 赞同：1
> 
> 时间：2013-02-07T13:47:10.847
> 
> 标签：objective-c, uitableview, comparison

我在 1 个类中使用多个 UITableView，但是我不能在我的代表中将它们分开。为什么这不起作用：

```
- (UIView*)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
    MenuHeader *header;
    if (tableView == myFirstTable) {
        header = [[MenuHeader alloc] initWithFrameAndTitel:CGRectMake(0, 0, [UIScreen mainScreen].bounds.size.width, 40) :@"Text for first table"];
    }
    else if (tableView == mySecondTable) {
        header = [[MenuHeader alloc] initWithFrameAndTitel:CGRectMake(0, 0, [UIScreen mainScreen].bounds.size.width, 40) :@"Text for second table"];
    }

    return header;
} 
```

我在 if 语句处设置了一个断点，但它从不设置标题。同样发生在

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {} 
```

我在@implementation 下声明了我的表格视图：

```
UITableView *myFirstTable;
UITableView *mySecondTable;
UITableView *myThirdTable; 
```

然后在初始化程序中：

```
myFirstTable = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, [UIScreen mainScreen].bounds.size.width, 180)];
myFirstTable.dataSource = self;
myFirstTable.delegate = self;
[self addSubview:myFirstTable];

... 
```

编辑

更多代码：

```
@implementation TableStuff

@synthesize delegate = _delegate;

UITableView *myFirstTable;
UITableView *mySecondTalbe;
UITableView *myThirdTable;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code

        myFirstTable; = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, [UIScreen mainScreen].bounds.size.width, 180)];;
        menuTable.dataSource = self;
        menuTable.delegate = self;
        [self addSubview:menuTable];

        mySecondTable = [[UITableView alloc] initWi....
        more init...

    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:45:21.607

现在我只是通过向 tableview 添加一个标签并将 tableview.tag 与一个整数进行比较来解决这个问题。仍然不知道为什么比较两个表视图不起作用。

# android - logcat 过滤器应用在哪里？

> ID：14752645
> 
> 赞同：2
> 
> 时间：2013-02-07T13:47:23.280
> 
> 标签：android, filter, filtering, adb, logcat

我有一个连接到 pc 的 android 设备并打开了多个显示 logcat 信息的 shell。每个人都使用其特定的过滤器运行。所以我现在的问题是，这些过滤器应用在哪里？已经在手机上，因此只有过滤后的消息通过 USB 发送。还是它们应用在 adb 服务器或客户端的 pc 上？我只是想防止多个未经过滤的 logcat 流在 USB 上同时运行，因为我的带宽有限。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:51:26.990

> 还是它们应用在 adb 服务器或客户端的 pc 上？

它们适用于呈现 LogCat 信息的任何应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:51:56.090

目前不可能在不同的设备上运行相同的构建。如果您有不同的构建，那么您可以根据设备名称或版本应用过滤器。

当你想这样做时，它可以通过一些技巧来实现。 `Log.v(LOG_TAG,"message");` 在您的 LOG_TAG 附加设备 ID 中，可以通过 TelephonyManager 识别。

并使用它添加过滤器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T14:01:27.070

Android 将设备上的日志信息存储到 4 个不同的缓冲区中（事件日志、系统日志、无线电日志、主日志）。之后，`adbd`守护进程可以访问此信息并将其发送给客户端。因此，只有在客户端您才能过滤信息，因为所有信息都存储在手机上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T02:26:11.147

`logcat`使用设备上的命令将数据从内核缓冲区中提取出来。如果你跑

`% adb logcat -\?`

您可以看到使用信息，其中包括“filterspecs”的描述。这些可以在命令行上设置，或者通过设置`ANDROID_LOG_TAGS`. 例如：

`% adb logcat '*:W'`

只会向您显示警告或错误级别的消息。

这里的诀窍是它`adb logcat`只是 的简写，还有将环境变量`adb shell logcat`传播到设备的额外好处。`ANDROID_LOG_TAGS`过滤是由`logcat`命令完成的，它只是将文本输出转储到 adb 上。该`logcat`命令的输出没有得到任何特殊处理。

因此，您的问题的答案是：过滤发生在设备上，针对每个窗口单独进行。

DDMS 的工作方式不同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T14:53:59.530

过滤器应用在手机上。因此，您中的一些人为不存在的 logcat 标记输入过滤器，然后没有流量通过 USB。但是使用 cmd shell 打开的每个 logcat 都会创建一个新的流，从而增加总流量。

# javascript - KineticJS 使用 Keydown 进行形状运动

> ID：14752650
> 
> 赞同：0
> 
> 时间：2013-02-07T13:47:43.267
> 
> 标签：javascript, html, canvas, kineticjs

我使用 KineticJS 中的 transitionTo 制作了一个形状，可以在箭头键（keydown 事件）的帮助下移动。

我有两个问题：

1\. 按键后形状的移动有一个短暂的延迟。如何消除延迟？

2.如何使形状在同时按下两个箭头键的情况下沿对角线移动？这是javascript：

```
var stage = new Kinetic.Stage({
    container: 'container',
    width: screen.width,
    height: 500
});
var layer = new Kinetic.Layer();

var circle = new Kinetic.Circle({
    x: stage.getWidth() / 2,
    y: stage.getHeight() / 2,
    radius: 70,
    fill: 'yellow',
    stroke: 'black',
    strokeWidth: 4
});

// add the shape to the layer
layer.add(circle);

// add the layer to the stage
stage.add(layer);

window.addEventListener('keydown', function(e) {
    if (e.keyCode == 37) { //Left Arrow Key
        setTimeout(function () {
            circle.transitionTo({
                x: circle.getX() - 10,
                y: circle.getY(),
                duration: 0.01
            })
        }, 0);
    }
    if (e.keyCode == 38) { //Up Arrow Key
        setTimeout(function () {
            circle.transitionTo({
                x: circle.getX(),
                y: circle.getY() - 10,
                duration: 0.01
            })
        }, 0);
    }
    if (e.keyCode == 39) { //Right Arrow Key
        setTimeout(function () {
            circle.transitionTo({
                x: circle.getX() + 10,
                y: circle.getY(),
                duration: 0.01
            })
        }, 0);
    }
    if (e.keyCode == 40) { //Top Arrow Key
        setTimeout(function () {
            circle.transitionTo({
                x: circle.getX(),
                y: circle.getY() + 10,
                duration: 0.01
            })
        }, 0);
    }
}); 
```

小提琴：http: [//jsfiddle.net/uUWmC/1/](http://jsfiddle.net/uUWmC/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:50:12.610

对于延迟，您可以像下面这样解开 setTimeout 和 transitionTo ；

```
window.addEventListener('keydown', function(e) {
    if (e.keyCode == 37) //Left Arrow Key
        circle.attrs.x -= 10;
    if (e.keyCode == 38) //Up Arrow Key
        circle.attrs.y += 10;
    if (e.keyCode == 39) //Right Arrow Key
        circle.attrs.x += 10;
    if (e.keyCode == 40) //Top Arrow Key
        circle.attrs.y -= 10;
    layer.draw();
}); 
```

对于对角线移动，您不能同时按下两个箭头键。这是您的操作系统限制。您可以使用 alt 键、ctrl 键……等等来按下它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-23T22:33:07.163

检测对角线移动以跟踪已按下/释放哪些键的最佳方法。我使用了一个名为“key_status.js”的 jQuery 插件，它允许您检查任何键的状态，例如：

```
if (keydown.left) {
  console.log("left arrow is down")
}
if (keydown.left && keydown.up) {
  console.log("Left/Up Diagonal!")
} 
```

当然，要执行此类操作，您需要将所有输入检查包装在 setTimeout 或 requestAnimFrame 中。

我在这里的优秀 html5 游戏教程中发现了这个脚本和方法：http: [//www.html5rocks.com/en/tutorials/canvas/notearsgame/](http://www.html5rocks.com/en/tutorials/canvas/notearsgame/)

直接链接到脚本：（[http://strd6.com/space_demo/javascripts/key_status.js](http://strd6.com/space_demo/javascripts/key_status.js)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-06T17:48:33.737

有一些库可以帮助您识别组合键。查看：

*   [http://dmauro.github.io/Keypress/](http://dmauro.github.io/Keypress/)
*   [http://robertwhurst.github.io/KeyboardJS/](http://robertwhurst.github.io/KeyboardJS/)

# google-apps-script - Google Apps 脚本 getFirstName 和 getGivenName 错误

> ID：14752651
> 
> 赞同：2
> 
> 时间：2013-02-07T13:47:51.933
> 
> 标签：google-apps-script

我正在使用 Google Apps 脚本尝试使用当前登录的用户的名字和姓氏预先填充一个字段。根据 Google 的文档，我应该可以使用[getGivenName()](https://developers.google.com/apps-script/class_domainuser#getGivenName)和[getFamilyName()](https://developers.google.com/apps-script/class_domainuser#getFamilyName)来获得它。当我使用以下代码包含那些时：

```
 var myFirstName = Session.getEffectiveUser().getGivenName();
  var myLastName = Session.getEffectiveUser().getFamilyName(); 
```

我收到以下错误：

```
TypeError: Cannot find function getGivenName in object
TypeError: Cannot find function getFamilyName in object 
```

另一方面，此代码有效：

```
var myEmail = Session.getEffectiveUser().getEmail();
var myUsername = Session.getEffectiveUser().getUsername(); 
```

这些功能还没有实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:29:13.370

您所指的文档是关于`UserManager`哪个是`Domain Service`域中唯一可用于 Google Apps 帐户的一部分...与此无关`Session.getEffectiveUser()`的是[Base service](https://developers.google.com/apps-script/class_session?hl=en)的一部分。

您可以使用自动完成功能来避免这种混淆。

**编辑：信息：**如果登录的用户在您的联系人中，那么您可以检索其中的任何内容。带注释的示例代码：

```
function getUserInfo(){
   var email = Session.getEffectiveUser().getEmail();
   var userName = Session.getEffectiveUser().getUsername();
Logger.log(email+'  '+userName)
   if(ContactsApp.getContact(email)){ ;// if the logged user is in your contacts
     var fullName = ContactsApp.getContact(email).getFullName();// there a quite a few parameters available from here
     var nickName = ContactsApp.getContact(email).getNickname();// these are just examples
     var tel =  ContactsApp.getContact(email).getPhones();// returns an array of phones object
     var telnums=[]
      for(var t in tel){telnums.push(tel[t].getLabel()+"="+tel[t].getPhoneNumber())} ;// get the numbers ans store in an array
Logger.log(fullName+' / '+nickName+' / phone :'+telnums.join(' & ')) ;// join the array for proper display
   }
} 
```

**编辑 2：根据您的评论：对于** *GOOGLE 应用帐户*，此代码正在获取用户信息，请参阅[此处的文档](https://developers.google.com/apps-script/class_domainuser)，您必须获取`user`对象

```
function getUserInfo(){
   var email = Session.getEffectiveUser().getEmail();
   var userName = Session.getEffectiveUser().getUsername();
Logger.log(email+'  '+userName)
   var user = UserManager.getUser(userName);// get the user object
   var firstName = user.getGivenName();// from there get whatever you want that is available (see autocomplete, not so much possibilities...)
   var familyName = user.getFamilyName();
  Logger.log(firstName+' / '+familyName)
} 
```

注意：在使用此脚本之前，您必须授权此 API：

![在此处输入图像描述](../Images/33d330fff274e0ff9c917b0ae7a01572.png)

# symfony - 调用未定义的方法 Doctrine\Bundle\DoctrineBundle\Registry::persist()

> ID：14752653
> 
> 赞同：1
> 
> 时间：2013-02-07T13:47:58.697
> 
> 标签：symfony, doctrine-orm, symfony-2.1

我最近将我的一个项目从 Symfony 2.0.x 升级到 2.1.x

一切正常，但是当我尝试在服务中持久化一个实体时，PHP 会抛出一个错误：

`Call to undefined method Doctrine\Bundle\DoctrineBundle\Registry::persist()`

在控制器中，一切正常。即使从服务中的 db 获取对象也可以，但不能调用`->persist($entity)`.

这是我的服务定义：

```
registration_form:
    class: KnowHow\ERegistration\BackendBundle\Service\RegistrationFormService
    arguments: [ @doctrine ] 
```

我的班级：

```
 class RegistrationFormService
 {
     /** @var $em \Doctrine\ORM\EntityManager */
     private $em;

     /**
      * Ctor.
      *
      * @param $doctrine
      */
     public function __construct($doctrine)
     {
        $this->em = $doctrine;
     }
} 
```

没关系，但是当我尝试做类似`$this->em->persist($entity)`的事情时，会抛出错误。

我不知道那里发生了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T13:55:13.837

你必须`@doctrine.orm.entity_manager`为你想做的事情注入

```
registration_form:
    class: KnowHow\ERegistration\BackendBundle\Service\RegistrationFormService
    arguments: [ @doctrine ]
               ----^ (isn't good) 
```

将其修改为

```
registration_form:
    class: KnowHow\ERegistration\BackendBundle\Service\RegistrationFormService
    arguments: [ @doctrine.orm.entity_manager ] 
```

或者，你必须使用这样的事情（在你的构造函数中）

```
public function __construct(Doctrine $doctrine)
{
    $this->em = $doctrine->getEntityManager();
} 
```

正如 Cyprian 所建议的，我将添加`$doctrine`变量类型以进行类型检查。不知道是否`Doctrine`是正确的课程，但我想是的

我建议仅`entity_manager`在您不需要整个`doctrine`供应商时才注入

# c - 尝试使用第三部分库 libmagic

> ID：14752656
> 
> 赞同：2
> 
> 时间：2013-02-07T13:48:04.867
> 
> 标签：c, visual-studio-2010, libmagic

我尝试使用此代码：

```
#include <stdio.h>
#include <magic.h>

int main(void)
{
    char *actual_file = "/file/you/want.yay";
    const char *magic_full;
    magic_t magic_cookie;
    magic_cookie = magic_open(MAGIC_MIME);
        if (magic_cookie == NULL) {
            printf("unable to initialize magic library\n");
            return 1;
            }
        printf("Loading default magic database\n");
        if (magic_load(magic_cookie, NULL) != 0) {
            printf("cannot load magic database - %s\n", magic_error(magic_cookie));
            magic_close(magic_cookie);
            return 1;
        }
    magic_full = magic_file(magic_cookie, actual_file);
    printf("%s\n", magic_full);
    magic_close(magic_cookie);
        return 0;

} 
```

执行此代码时出现消息：“无法加载魔法数据库”。为什么？我不明白是什么原因......

编译我使用 Visual Studio 2010，没有任何构建错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:53:59.117

可能是默认的魔法数据库（`NULL`作为第二个参数传递时得到`magic_load()`的没有安装，或者在 Windows 下找不到。尝试明确，即给它实际的绝对文件名。

文档说：

> 在执行任何魔术查询之前，必须使用 magic_load() 函数来加载作为文件名传入的数据库文件的冒号分隔列表，或者默认数据库文件为 NULL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T14:26:56.270

您的代码是正确的（除了最后没有检查`magic_full`。`NULL`它实际上可以在我的机器上运行。

您的魔术库有问题 - 也许您没有正确的魔术签名文件，或者您无权访问它，甚至文件已损坏！请检查您是否`MAGIC`设置了 env var，它是否指向正确的文件！

还尝试像这样确定 magic_load 的默认文件：

```
$ strace ./magic 2>&1 | grep open
open("/etc/ld.so.cache", O_RDONLY)      = 3
open("/usr/lib64/libmagic.so.1", O_RDONLY) = 3
open("/lib64/libc.so.6", O_RDONLY)      = 3
open("/lib64/libz.so.1", O_RDONLY)      = 3
open("/usr/share/file/magic.mime.mgc", O_RDONLY) = 3
$ 
```

这：`"/usr/share/file/magic.mime.mgc"`就是你要找的。然后，再次对 strace 执行`file`相同操作`file.yay`（这将确认`*mgc`文件是否良好）：

```
$ strace file --mime `/path/to/file.yay` 2>&1 | grep open
...
open("/usr/share/file/magic.mime.mgc", O_RDONLY) = 3
...
$ 
```

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T13:50:33.593

libmagic 的手册页有这个。

`magic_load(magic_t cookie, const char *filename);`

您正在传递参数`NULL`，`filename`因此它将尝试加载默认数据库文件。这似乎失败了。将其更改为`actual_file`也许，然后重试。

# asp.net-mvc-4 - ASP.NET MVC 使用相同的视图来编辑和创建

> ID：14752659
> 
> 赞同：1
> 
> 时间：2013-02-07T13:48:09.327
> 
> 标签：asp.net-mvc-4, edit

我创建了一个视图来编辑我的模型。视图是强类型的，有一次我会执行以下操作：

```
 @for (int i = 0; i < Model.Risks.Count; i++)
    {   
        @Html.EditorFor(m => Model.Risks[i]))
    } 
```

现在，如果集合不为空，即如果我编辑现有实体，这可以正常工作。

但是我想使用这个相同的视图来创建一个新实体。但由于集合为空，它会崩溃。如何确保它呈现编辑器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:11:09.453

只需使用 EditorTemplate 并摆脱视图中的任何循环：

```
@Html.EditorFor(m => m.Risks) 
```

现在 ASP.NET MVC 将在运行时检测集合是否为空且不执行任何操作，或者它是否具有值，它将自动为集合的每个元素呈现相应的编辑器模板。这样一来，您就可以用一块石头杀死两只鸟了：您的代码要容易得多，而且您不需要进行任何测试 => 您将此任务留给 ASP.NET MVC 框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:55:21.980

一种方法是在模型是新的时候设置默认值。

```
public IList<Risk> Risks {
  get {
      return IsNew() ? DefaultRisks() : risks;
  }
  set {
    risks = value;
  }
} 
```

然后可以在视图中使用属性 IsNew，例如按钮文本“创建”或“保存”

如果你最终在你的视图中有太多的 if 语句，最好将它们分开。

话虽如此，拥有相同的演示模型并不是一件坏事。

# iis - 如何使用 Windows 身份验证在 IIS 服务器上的请求标头中添加用户名字段

> ID：14752660
> 
> 赞同：2
> 
> 时间：2013-02-07T13:48:13.323
> 
> 标签：iis, http-headers, windows-authentication, reverse-proxy, url-rewrite-module

我有一个在 4502 端口上运行的 Web 应用程序，并且我使用带有 url 重写模块的 IIS 服务器，因此它的工作方式类似于带有 Windows 授权的反向代理。它工作正常，但我无法在我的应用程序上获取用户名字段。请求到来时是否可以在 IIS 服务器上添加用户名字段？谢谢你。

# shopify - Shopify：如何确保我的应用程序代理内容适用于所有模板？

> ID：14752662
> 
> 赞同：3
> 
> 时间：2013-02-07T13:48:19.170
> 
> 标签：shopify, liquid, liquid-layout

我正在为 Shopify 构建应用程序代理。

文档（[http://api.shopify.com/app_proxy.html](http://api.shopify.com/app_proxy.html)）说......

*如果来自代理 URL 的 HTTP 响应在其标头中设置了 Content-Type: application/liquid，Shopify 将使用商店主题在商店上下文中评估和呈现请求正文中的任何 Liquid 代码。这太棒了。如果使用得当，它可以自动让您的应用看起来像是属于商店的一部分，而无需任何人工干预。Shopify 商家喜欢这种东西。*

这是迄今为止我最好的尝试，默认模板（[http://plnkr.co/edit/iXbWWiMlEsi6NsA6uPtG?p=preview.](http://plnkr.co/edit/iXbWWiMlEsi6NsA6uPtG?p=preview.)）看起来不错，但我认为它不适用于所有模板。

如何确保我的内容适用于所有模板？我需要在我的内容中添加某些课程吗？我应该遵循的约定？一个例子会很棒。

迈克尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T05:58:12.657

最终，您将无法预测您将要处理的内容，因此这里有一些建议以使其尽可能无缝：

1.  让您的标记保持美观和简单。
2.  注入您自己的样式表来控制布局和宽度等，但不要指定字体或颜色，以便与主题保持一致。
3.  尝试使用流畅的布局，这样您就可以应对内容区域的不同宽度。

我建议的另一件事是设置一些测试商店（使用您的合作伙伴帐户）并使用不同的主题加载它们，以便您可以关注一些不同的主题。

# iphone - 从 iPhone 应用程序打开 PDF

> ID：14752667
> 
> 赞同：1
> 
> 时间：2013-02-07T13:48:36.353
> 
> 标签：iphone, ios, uiwebview, ios6

我正在开发一个应用程序，我在应用程序中创建一个 PDF 并且必须打开它，以便用户可以查看它。我知道我们可以使用 Webview 打开任何 PDF，但我想在 iPhone 的默认 PDF 查看器中打开 PDF（当我们点击电子邮件中任何附加的 PDF 时打开的那个）导航右侧有共享按钮栏和一个后退按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:57:41.243

简单的答案是使用 QuickLook 框架，这就是邮件客户端使用的（或接近它）。它有一个 pdf 查看器，而且使用起来非常简单，所以我将引导您查看苹果文档 :)

[http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/UsingtheQuickLookFramework.html](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/UsingtheQuickLookFramework.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:37:36.980

以下链接中有一个示例代码，它将为您提供 100% 的帮助。

[http://ios.biomsoft.com/2012/02/17/load-a-pdf-file-in-the-iphone-app-smoothly/](http://ios.biomsoft.com/2012/02/17/load-a-pdf-file-in-the-iphone-app-smoothly/)

# jquery - jQuery 验证插件 - 所有输入错误消息

> ID：14752675
> 
> 赞同：0
> 
> 时间：2013-02-07T13:49:03.823
> 
> 标签：jquery, jquery-validate

我在让我的代码正常工作时遇到了一些问题。用户可以添加更多输入框，我需要对它们进行验证。奇怪的是，如果我删除消息部分，它会起作用。

```
$("input.ing").each(function(){
    $(this).rules("add", {
        required: true,
        messages: {
            required: "Input a number"
        }
    });         
}); 
```

有任何想法吗？

提前致谢

树脂

编辑：发现这个 jsFiddle 可以满足需要，但是当我将代码复制到文档时，它不起作用！:( [http://jsfiddle.net/jYwJE/](http://jsfiddle.net/jYwJE/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:41:02.227

> 引用 OP：“用户可以添加更多输入框，我需要对它们进行验证。”

以下代码比您的 jsFiddle 更具体。它表明当用户单击一个按钮时，`newfield`会在表单中添加一个名为的新字段，然后将[规则动态添加](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)到这个新字段中。

```
$(document).ready(function () {

    $('#myform').validate({ // initialize the plugin
        rules: {
            field1: {
                required: true,
                minlength: 5
            },
            field2: {
                required: true,
                minlength: 5
            }
        }
    });

    $('button#add').one('click', function () {
        var field = '<input type="text" name="newfield" /><br />';
        $('#myform').prepend(field);
        $('[name="newfield"]').rules("add", {
            required: true,
            messages: {
                required: "this new field is now required"
            }
        });
    });

}); 
```

**演示：http: [//jsfiddle.net/km6XE/](http://jsfiddle.net/km6XE/)**

该演示仅显示如何添加*一个*新`input`字段。如果您希望用户能够添加更多`input`元素，则需要确保您的代码为每个新元素创建一个**唯一** 的，否则您将破坏 Validate 插件。`name``input`

# javascript - 从左侧进行切换

> ID：14752676
> 
> 赞同：2
> 
> 时间：2013-02-07T13:49:19.810
> 
> 标签：javascript, jquery, css

您好，我有以下 HTML：

```
<span class="slide1"><a href="#" class="slide1">Behavior</a></span>
<div id="second" class="content1">I’m not a good</div> 
```

和下面的jQuery：

```
$(document).ready(function () {
    $('#second').hide();
    $('span.slide1').click(function () {
        $('#second').slideToggle(800);
        return false;
    });
}); 
```

如何使隐藏的 div 切换并从左侧显示？

我的意思是当我单击元素时，我希望 div 出现在 span 元素的左侧。

这是我到目前为止所拥有的：

[http://jsfiddle.net/gVjFs/70/](http://jsfiddle.net/gVjFs/70/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:57:06.950

有两种方法可以做到这一点，一种也需要 jQuery UI，另一种只需要 jQuery。

**没有 jQuery UI：**

```
$(document).ready(function () {
     $('#second').hide();
     $('span.slide1').click(function () {
         $('#second').animate({width:'toggle'},800);;
         return false;
     });
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/gVjFs/75/)**。此示例使用 .animate() 更改宽度。

* * *

**使用 jQuery 用户界面**

```
$(document).ready(function () {
     $('#second').hide();
     $('span.slide1').click(function () {
         $('#second').show("slide", { direction: "left" }, 800);
         return false;
     });
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/gVjFs/74/)**。此示例使用 jQuery UI 的效果方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:58:35.617

您可以创建自定义动画，如下所示：

```
jQuery.fn.blindToggle = function(speed, easing, callback) {
  var h = this.outerWidth();
  return this.show().animate({marginLeft: parseFloat(this.css('marginLeft')) < 0 ? 0 : -h}, speed, easing, callback);  
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T13:53:50.727

我认为你只需要一些 CSS 样式来做到这一点。

```
.slide1 {
    display:inline-block;
}
.content1{
    display:inline-block;
} 
```

这是[更新的 JS Fiddle](http://jsfiddle.net/gVjFs/71/)

干杯。

**编辑：**再次阅读答案，看起来您希望它出现在左侧，对前面的内容感到抱歉，但是使用 css 您也可以做到这一点

```
.slide1 {
    display:inline-block;
}
.content1{
    float:left;
} 
```

[新的 JS 小提琴](http://jsfiddle.net/gVjFs/76/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T13:56:13.360

试试下面的。您将需要`effects`from `jquery-ui`，但正如我在您的 jsfiddle 中看到的那样，您正在使用它。

```
$(document).ready(function () {
    $('#second').hide();
    $('span.slide1').click(function () {
        $('#second').effect('slide', 500);
        return false;
    });
}); 
```

见[http://jsfiddle.net/gVjFs/73/](http://jsfiddle.net/gVjFs/73/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T13:57:11.243

像这样试试

```
.slide1 {
display:inline-block;
}
.content1{
display:inline-block;
float: left;
} 
```

[看演示](http://jsfiddle.net/Dineshkani/gVjFs/77/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T14:03:39.453

可以实现这样的效果：http: [//jsfiddle.net/gVjFs/70/](http://jsfiddle.net/gVjFs/70/)

```
<span id="second" class="content1" style="width:0px; display:inline-block; overflow:hidden; float: left; white-space:nowrap;">I’m not a good</span>

<a href="#" class="slide1" style="float: left;">Behavior</a>

   $(document).ready(function () {
       $('.slide1').click(function () {
           $('#second').animate({
               width: '100px',
           }, 1000);
       });
   }); 
```

# html - 超过 50 个赞后如何更改 Facebook og:title

> ID：14752689
> 
> 赞同：-1
> 
> 时间：2013-02-07T13:50:00.307
> 
> 标签：html, facebook, facebook-like

网站[http://rekhta.org](http://rekhta.org)从一开始就将标题设置为“Rekhta : baab-e-sukhan”。但 Facebook 一直将标题读作“调试器”。我尝试了所有可能的方法来改变它。

[调试器](https://developers.facebook.com/tools/debug/og/object?q=rekhta.org)曾经显示正确的标题，但评论框一直显示“调试器”，我认为这是缓存问题，并在网站启动后给了它一些时间：2013 年 1 月 11 日。

现在，当我尝试更改它时，即使调试器也不会显示正确的标题。

[这个](https://stackoverflow.com/questions/9026448/how-can-i-force-facebook-to-purge-its-cache-and-use-newer-meta-description-of-a)线程说

> og:title 和 og:type 最初只能编辑 - 在您的页面收到**50 个赞**后，**标题变为固定**，在您的页面收到 10,000 个赞后，类型变为固定。这些属性是固定的，以避免让已经喜欢该页面的用户感到惊讶。达到这些限制后更改标题或类型标签没有任何作用，您的页面将保留原始标题和类型。

Facebook 支持将我发送到这里，请建议我应该怎么做才能解决这个问题。

“调试器” - 在我的整个项目和数据库中甚至都不存在，在进行搜索后确认。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T05:18:37.400

我提出了一个错误请求，Facebook 正在调查它。（[链接](https://developers.facebook.com/bugs/141882722641011?browse=search_511c733426a1d2522933470)）

他们已经清除了他们这边的缓存:)

# python - gevent.http.HTTPServer API 建议流式传输，而是缓冲整个请求和响应

> ID：14752690
> 
> 赞同：7
> 
> 时间：2013-02-07T13:50:03.013
> 
> 标签：python, http, asynchronous, buffer, gevent

提供的 API`gevent.http.HTTPServer`似乎支持双向流式传输。请求对象不提供作为简单字符串的请求主体，而是提供`.input_buffer`一个 Python 可迭代的属性，而在另一个方向上，响应的数据可以通过三个调用以块的形式传递：

```
request.send_reply_start(200, 'OK')
request.send_reply_chunk(...)  # as many times as you wish
request.send_reply_end() 
```

但是我一定有一些错误配置，因为尽管有这个奇妙的无缓冲 API，我的请求处理程序直到*最后*一块请求 POST 数据最终到达时才被调用，而在另一个方向我没有看到*任何*标头到达我的客户端socket 直到服务器到达`.send_reply_end()`. 是否有一些我必须抛出的开关或一些我必须操作的配置设置才能关闭缓冲并查看请求并在它们到达时发送响应，例如 gevent 通过其支持原始套接字`StreamServer`？

我的应用程序需要支持可能大于 RAM 的单文件上传和下载，这将需要关闭此缓冲。

这是一个用 gevent 编写的简单服务器和客户端，它应该向您展示这种行为：

```
# srv.py

import gevent.http

M100 = 100 * 1024 * 1024

def main():
    print 'Serving on 8088...'
    gevent.http.HTTPServer(('0.0.0.0', 8088), handle).serve_forever()

def handle(request):
    print 'Is request chunked?', request.chunked
    for item in request.input_buffer:
        print 'received body segment of length', len(item), 'bytes'
    request.add_output_header('Content-Type', 'application/octet-stream')
    request.send_reply_start(200, 'OK')
    for i in range(5):
        print 'sending chunk', i
        request.send_reply_chunk(M100 * 'x')
    request.send_reply_end()

if __name__ == '__main__':
    main() 
```

和：

```
# cli.py

import requests
import time

M100 = 100 * 1024 * 1024

def gen():
    for i in range(5):
        print 'sending chunk', i
        yield M100 * 'x'
        time.sleep(1)

if __name__ == '__main__':
    r = requests.post('http://localhost:8088/', data=gen(), stream=True)
    for block in r.iter_content(M100):
        print 'received', len(block), 'bytes from download' 
```

感谢您的任何指导！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-07T07:54:31.993

**对服务器的请求：**查看源代码，看起来服务器的处理函数在请求完成之前不会被调用，无论它是否以分块方式发送。所以你在那里不走运。

**服务器响应：**服务器响应可以以流方式发送，但您需要在处理程序线程中自愿让出控制权才能使其工作（例如，通过`gevent.sleep()`在每个块之后调用）。

不幸的是，`gevent`似乎没有提供一种方法来等待给定块完成发送，然后再开始下一个块，因此如果生成数据的速度比发送速度快，则可能会遇到内存问题。

* * *

请注意，以上信息是指`gevent<1.0`使用该`libevent`库的 ，不适用于更新版本的`gevent`. 当前版本`gevent`不再包含`http`模块，所以这个问题没有实际意义。

# java - Windows XP 上的 jface/swt 树刷新问题

> ID：14752693
> 
> 赞同：1
> 
> 时间：2013-02-07T13:50:10.870
> 
> 标签：java, swt, jface

我有一个基于 SWT 的桌面应用程序。我有一棵包含在 ScrolledComposite 中的树。应用程序中的这段代码应该刷新 ui 组件。

```
aTreeViewer.setInput(this.items) //items is an array list of relevant objects 
```

但它在 Windows XP 和 Windows 7 上的行为很奇怪。在 Win XP 中，它返回一个硬 ArrayIndexOutofBounds 异常，该异常会影响我的应用程序的行为。

```
java.lang.ArrayIndexOutOfBoundsException: 46
       at org.eclipse.swt.widgets.Tree._getItem(Tree.java:254)
       at org.eclipse.swt.widgets.Tree._getItem(Tree.java:248)
       at org.eclipse.swt.widgets.Tree.findCell(Tree.java:2703)
       at org.eclipse.swt.widgets.Tree.WM_MOUSEMOVE(Tree.java:6806)
       at org.eclipse.swt.widgets.Control.windowProc(Control.java:4575)
       at org.eclipse.swt.widgets.Tree.windowProc(Tree.java:5958)
       at org.eclipse.swt.widgets.Display.windowProc(Display.java:4989)
       at org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)
       at org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:2546)
       at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3756) 
```

而在 Win 7 上，它似乎从 SWT 层返回此消息，该消息似乎是在我的 Eclipse 控制台上打印的 RunTimeException，但绝不会影响应用程序的行为。意思是，应用程序运行良好。

```
Ignored reentrant call while viewer is busy. This is only logged once per viewer instance, but similar calls will still be ignored.
java.lang.RuntimeException
       at org.eclipse.jface.viewers.ColumnViewer.checkBusy(ColumnViewer.java:763)
       at org.eclipse.jface.viewers.ColumnViewer.refresh(ColumnViewer.java:541)
       at org.eclipse.jface.viewers.StructuredViewer.refresh(StructuredViewer.java:1490)
       at com.sxsy.smtj.ui.cw.widgets.EwList.basicRefresh(EwList.java:86)
       at com.sxsy.smtj.ui.cw.widgets.EwTableList.basicRefresh(EwTableList.java:75)
       at com.sxsy.smtj.ui.cw.widgets.EwList.refresh(EwList.java:402)
       at com.sxsy.smtj.ui.cw.widgets.EwTableList.columnsChanged(EwTableList.java:115)
       at com.sxsy.smtj.ui.cw.widgets.EwTableColumn.updateWidget(EwTableColumn.java:377)
       at com.sxsy.smtj.ui.cw.widgets.EwTableColumn.width(EwTableColumn.java:407)
       at com.sxsy.smtj.ui.cw.widgets.WkTableWidget.doAutoSizeColumns(WkTableWidget.java:244)
       at com.sxsy.smtj.ui.cw.widgets.WkTableWidget.autoSizeColumns(WkTableWidget.java:87)
       at com.sxsy.smtj.ui.cw.widgets.WkTableWidget.processResizedEvent(WkTableWidget.java:437)
       at com.sxsy.smtj.ui.cw.widgets.EwList$3.controlResized(EwList.java:449)
       at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:235)
       at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
       at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
       at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1077)
       at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1058)
       at org.eclipse.swt.widgets.Tree.windowProc(Tree.java:5795)
       at org.eclipse.swt.widgets.Display.windowProc(Display.java:4976)
       at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
       at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java:2541)
       at org.eclipse.swt.widgets.Tree.callWindowProc(Tree.java:1442)
       at org.eclipse.swt.widgets.Tree.windowProc(Tree.java:5859)
       at org.eclipse.swt.widgets.Display.windowProc(Display.java:4976)
       at org.eclipse.swt.internal.win32.OS.SetScrollInfo(Native Method)
       at org.eclipse.swt.widgets.Tree.updateScrollBar(Tree.java:5660)
       at org.eclipse.swt.widgets.Tree.callWindowProc(Tree.java:1589)
       at org.eclipse.swt.widgets.Scrollable.WM_SIZE(Scrollable.java:316)
       at org.eclipse.swt.widgets.Composite.WM_SIZE(Composite.java:1662)
       at org.eclipse.swt.widgets.Tree.WM_SIZE(Tree.java:7137)
       at org.eclipse.swt.widgets.Control.windowProc(Control.java:4603)
       at org.eclipse.swt.widgets.Tree.windowProc(Tree.java:5958)
       at org.eclipse.swt.widgets.Display.windowProc(Display.java:4976)
       at org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method)
       at org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:2440)
       at org.eclipse.swt.widgets.Tree.callWindowProc(Tree.java:1534)
       at org.eclipse.swt.widgets.Control.WM_WINDOWPOSCHANGED(Control.java:5408)
       at org.eclipse.swt.widgets.Control.windowProc(Control.java:4616)
       at org.eclipse.swt.widgets.Tree.windowProc(Tree.java:5958)
       at org.eclipse.swt.widgets.Display.windowProc(Display.java:4976)
       at org.eclipse.swt.internal.win32.OS.ShowScrollBar(Native Method)
       at org.eclipse.swt.widgets.Tree.WM_SIZE(Tree.java:7124)
       at org.eclipse.swt.widgets.Control.windowProc(Control.java:4603)
       at org.eclipse.swt.widgets.Tree.windowProc(Tree.java:5958)
       at org.eclipse.swt.widgets.Display.windowProc(Display.java:4976)
       at org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method)
       at org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:2440)
       at org.eclipse.swt.widgets.Tree.callWindowProc(Tree.java:1534)
       at org.eclipse.swt.widgets.Control.WM_WINDOWPOSCHANGED(Control.java:5408)
       at org.eclipse.swt.widgets.Control.windowProc(Control.java:4616)
       at org.eclipse.swt.widgets.Tree.windowProc(Tree.java:5958)
       at org.eclipse.swt.widgets.Display.windowProc(Display.java:4976)
       at org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method)
       at org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:2440)
       at org.eclipse.swt.widgets.Tree.callWindowProc(Tree.java:1534)
       at org.eclipse.swt.widgets.Control.windowProc(Control.java:4623)
       at org.eclipse.swt.widgets.Tree.windowProc(Tree.java:5958)
       at org.eclipse.swt.widgets.Display.windowProc(Display.java:4976)
       at org.eclipse.swt.internal.win32.OS.SendMessageW(Native Method)
       at org.eclipse.swt.internal.win32.OS.SendMessage(OS.java:3385)
       at org.eclipse.swt.widgets.Tree.createItem(Tree.java:2104)
       at org.eclipse.swt.widgets.TreeItem.<init>(TreeItem.java:203)
       at org.eclipse.swt.widgets.TreeItem.<init>(TreeItem.java:91)
       at org.eclipse.jface.viewers.TreeViewer.createNewRowPart(TreeViewer.java:809)
       at org.eclipse.jface.viewers.TreeViewer.newItem(TreeViewer.java:315)
       at org.eclipse.jface.viewers.AbstractTreeViewer.createTreeItem(AbstractTreeViewer.java:847)
       at org.eclipse.jface.viewers.AbstractTreeViewer$1.run(AbstractTreeViewer.java:823)
       at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
       at org.eclipse.jface.viewers.AbstractTreeViewer.createChildren(AbstractTreeViewer.java:797)
       at org.eclipse.jface.viewers.TreeViewer.createChildren(TreeViewer.java:644)
       at org.eclipse.jface.viewers.AbstractTreeViewer.createChildren(AbstractTreeViewer.java:768)
       at org.eclipse.jface.viewers.AbstractTreeViewer.internalInitializeTree(AbstractTreeViewer.java:1548)
       at org.eclipse.jface.viewers.TreeViewer.internalInitializeTree(TreeViewer.java:833)
       at org.eclipse.jface.viewers.AbstractTreeViewer$5.run(AbstractTreeViewer.java:1532)
       at org.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1443)
       at org.eclipse.jface.viewers.TreeViewer.preservingSelection(TreeViewer.java:403)
       at org.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1404)
       at org.eclipse.jface.viewers.AbstractTreeViewer.inputChanged(AbstractTreeViewer.java:1525)
       at org.eclipse.jface.viewers.ContentViewer.setInput(ContentViewer.java:280)
       at org.eclipse.jface.viewers.StructuredViewer.setInput(StructuredViewer.java:1690)
       at com.sxsy.smtj.ui.cw.widgets.EwList.refreshItems(EwList.java:439)
       at com.sxsy.smtj.ui.cw.widgets.EwTableList.refreshItems(EwTableList.java:514)
       at com.sxsy.smtj.ui.cw.widgets.EwTableTree.refreshItems(EwTableTree.java:275)
       at com.sxsy.smtj.ui.cw.widgets.EwList.itemsHaveChanged(EwList.java:345)
       at com.sxsy.smtj.ui.cw.widgets.EwLinearList.itemsHaveChanged(EwLinearList.java:200)
       at com.sxsy.smtj.ui.cw.widgets.EwList.setItems(EwList.java:549)
       at com.sxsy.smtj.ui.cw.widgets.WkTableWidget.setItems(WkTableWidget.java:467)
       at com.sxsy.smtj.ui.abt.widgets.compatibility.ExtendedList.widgetSetItems(ExtendedList.java:574)
       at com.sxsy.smtj.ui.abt.widgets.compatibility.ExtendedList.setItems(ExtendedList.java:479)
       at com.sxsy.smtj.ui.wk.table.compatibility.WkTableWidgetView.setItems(WkTableWidgetView.java:645)
       at com.misys.liq.ui.collateral.LiqCollateralAgreementTypeDefinitionController.updateAttributeGrid(LiqCollateralAgreementTypeDefinitionController.java:1712)
       at com.misys.liq.ui.collateral.LiqCollateralAgreementTypeDefinitionController.showCoreAttributes(LiqCollateralAgreementTypeDefinitionController.java:1730)
       at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
       at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
       at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
       at java.lang.reflect.Method.invoke(Unknown Source)
       at com.sxsy.smtj.utilities.ReflectionUtility.invoke(ReflectionUtility.java:754)
       at com.sxsy.smtj.utilities.ReflectionUtility.directPerform(ReflectionUtility.java:740)
       at com.sxsy.smtj.utilities.ReflectionUtility.perform(ReflectionUtility.java:605)
       at com.sxsy.smtj.compatibility.va.kernel.core.DirectedMessage.performAction(DirectedMessage.java:106)
       at com.misys.liq.infrastructure.EventObservableSupport.signalEvent(EventObservableSupport.java:21)
       at com.sxsy.smtj.ui.abt.ObservableObject.primSignalEvent(ObservableObject.java:324)
       at com.sxsy.smtj.ui.abt.ObservableObject.signalEvent(ObservableObject.java:398)
       at com.sxsy.smtj.ui.abt.widgets.compatibility.BasicView.signalEvent(BasicView.java:1879)
       at com.sxsy.smtj.ui.abt.widgets.compatibility.ToggleButtonView$2.widgetSelected(ToggleButtonView.java:316)
       at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:248)
       at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
       at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
       at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
       at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
       at com.misys.liq.LoanIQ$13.value(LoanIQ.java:676)
       at com.sxsy.smtj.exceptions.ExceptionUtility.whenDo(ExceptionUtility.java:99)
       at com.misys.liq.LoanIQ.standardLiqEventLoop(LoanIQ.java:693)
       at com.misys.liq.LoanIQ.desktopTestManualLogIn(LoanIQ.java:924)
       at com.misys.liq.LoanIQ.mainClassic(LoanIQ.java:589)
       at com.misys.liq.LoanIQ.main(LoanIQ.java:309) 
```

我想到的第一件事是将我的 ui 逻辑包装在 Display.asyncExec 的可运行文件中，从而我能够修复 Win XP 中的奇怪行为。

虽然，我不知道内部发生了什么，或者即使我的修复是正确的。如果经历过这种 SWT 怪异的人能对此有所了解，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:30:08.110

这是一个 swt/jface 错误。此问题的解决方法是在设置实际对象之前将项目设置为空。

```
aTreeViewer.setInput(null);
aTreeViewer.setInput(this.items); 
```

# jpa - JPA 简单的多对多与 eclipselink

> ID：14752695
> 
> 赞同：4
> 
> 时间：2013-02-07T13:50:15.213
> 
> 标签：jpa, many-to-many, eclipselink

我有这个 ER 图：

![在此处输入图像描述](../Images/e6e4612ce6ebe542130d08cd4a4bcb81.png)

这被翻译成这些类：

**用户.java**

```
@Entity
@Table(name = "user")
@NamedQueries({
    @NamedQuery(name = "User.findAll", query = "SELECT u FROM User u")})
public class User implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "id")
    private Integer id;
    @Column(name = "name")
    private String name;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "user")
    private Collection<UserHasNotify> userHasNotifyCollection; 
```

**UserHasNotify.java**

```
@Entity
@Table(name = "user_has_notify")
@NamedQueries({
    @NamedQuery(name = "UserHasNotify.findAll", query = "SELECT u FROM UserHasNotify u")})
public class UserHasNotify implements Serializable {
    private static final long serialVersionUID = 1L;
    @EmbeddedId
    protected UserHasNotifyPK userHasNotifyPK;
    @Column(name = "has_read")
    private String hasRead;
    @JoinColumn(name = "notify_id", referencedColumnName = "id", insertable = false, updatable = false)
    @ManyToOne(optional = false)
    private Notify notify;
    @JoinColumn(name = "user_id", referencedColumnName = "id", insertable = false, updatable = false)
    @ManyToOne(optional = false)
    private User user; 
```

**UserHasNotifyPK.java**

```
@Embeddable
public class UserHasNotifyPK implements Serializable {
    @Basic(optional = false)
    @Column(name = "user_id")
    private int userId;
    @Basic(optional = false)
    @Column(name = "notify_id")
    private int notifyId; 
```

**通知.java**

```
@Entity
@Table(name = "notify")
@NamedQueries({
    @NamedQuery(name = "Notify.findAll", query = "SELECT n FROM Notify n")})
public class Notify implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "id")
    private Integer id;
    @Column(name = "message")
    private String message;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "notify")
    private Collection<UserHasNotify> userHasNotifyCollection; 
```

现在，我将添加一个实体 User 和 Notify 并在它们之间创建一个关系。所以我写了这个片段：

```
 User user = new User();
        user.setName("John");

        Notify notify = new Notify();
        notify.setMessage("Hello World");

        userFacade.create(user);
        notifyFacade.create(notify);

        UserHasNotify uhn = new UserHasNotify();
        uhn.setNotify(notify);
        uhn.setUser(user); 
        uhn.setHasRead("ok");
        uhnFacade.create(uhn); 
```

但我收到此错误：

```
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Column 'user_id' cannot be null
Error Code: 1048
Call: INSERT INTO user_has_notify (has_read, user_id, notify_id) VALUES (?, ?, ?)
    bind => [3 parameters bound]
Query: InsertObjectQuery(com.test.entity.UserHasNotify[ userHasNotifyPK=null ]) 
```

为什么？？？？？？？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:36:09.920

错误的原因可能在于远程通信。您使用外观的事实意味着您正在与后端进行远程通信。

这意味着您在实例上设置的`user`和实例将被发送到远程系统上，而本地实例永远不会收到生成的 ID。`notify``uhn`

要验证和解决此问题，您可以扩展您的示例：

保存`user`and后`notify`，从后端获取它们。这应该返回具有现有 ID 的持久实例。然后你可以使用它们来存储你的`uhn`关系。

**编辑**：我错过了`UserHasNotify`一个与嵌入 ID 的有状态关系的事实。在代码中，您从未设置此 ID，因此提供者会错过它。

对于这种情况，我建议使用 an`IdClass`而不是嵌入的 Id - 映射更具可读性，因此您可能不会两次映射`User`and`Notify`关系 - 一次在嵌入式 PK 中，再次在实体中；）

这是它的样子：

```
public class UserHasNotifyPK implements Serializable {
    private Notify notify;
    private User user;
    ...
    } 
```

.

```
@Entity
@Table(name = "user_has_notify")
@IdClass(UserHasNotifyPK.class)
@NamedQueries({
    @NamedQuery(name = "UserHasNotify.findAll", query = "SELECT u FROM UserHasNotify u")})
public class UserHasNotify implements Serializable {

    private static final long serialVersionUID = 1L;

    @Column(name = "has_read")
    private String hasRead;

    @Id
    @JoinColumn(name = "notify_id", referencedColumnName = "id", insertable = false, updatable = false)
    @ManyToOne(optional = false)
    private Notify notify;

    @Id
    @JoinColumn(name = "user_id", referencedColumnName = "id", insertable = false, updatable = false)
    @ManyToOne(optional = false)
    private User user; 
```

然后，您可以再次尝试相同的测试。

# python - 如何在 Python 中从 ac 文件中获取变量名列表

> ID：14752697
> 
> 赞同：1
> 
> 时间：2013-02-07T13:50:19.667
> 
> 标签：python, parsing

我有一个 ac 文件，想创建一个定义的所有变量名的列表 - 使用 Python。

例如来自以下 c 文件

```
int mynum = 12;

// Timers
VAR_IN_SECTION(task_timers, .mem_layout)
timers_t timers[DSP_NUM_TASK_TIMERS]; 
```

我想回归一些 Python 魔法

```
["mynum", "timers"] 
```

如何做到这一点（以一种不特定于良好 c 格式的方式），Python 的魔力是什么？

注意：这是用于解析仅包含变量声明的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:59:03.917

您可以使用[GCC-XML](http://www.gccxml.org/)工具将 C 源文件的声明转换为 XML。然后，您可以使用 Python XML 解析器（例如`lxml.etree`）来解析结果。

GCC-XML 输出 XML 结构相当容易解析。它将为您提供变量声明（标签：）`<Variable>`和类型定义（多个标签，例如`<FundamentalType>`, `<Pointer>`,`<Struct>`等...）。您需要执行一些处理以递归地派生实际类型（例如，`Pointer`引用子类型 -*指向的*类型），但如果您愿意花一些时间，它将为您提供所需的一切。

如果您只需要变量名称，请解析 XML for tag`Variable`并提取属性`name`。

奇怪的是，我正在构建这样一个解析器作为项目的一部分。我（还）不允许分发，但我希望它最终会开源发布。

例子：

```
typedef int* myintptr;

myintptr p; 
```

像这样生成 XML：

```
<Variable id="_3" name="p" type="_64" context="_1" location="f0:5" file="f0" line="5"/>
<Typedef id="_64" name="myintptr" type="_63" context="_1" location="f0:3" file="f0" line="3"/>
<PointerType id="_63" type="_156" size="64" align="64"/>
<FundamentalType id="_156" name="int" size="32" align="32"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:55:12.433

这适用于您提供的示例输入文件，但我很确定我需要更多的测试才能说这通常适用于 c 语法：

```
>>> s = """int mynum = 12;
... 
... // Timers
... VAR_IN_SECTION(task_timers, .mem_layout)
... timers_t timers[DSP_NUM_TASK_TIMERS];"""
>>>
>>> import re
>>> re.findall(r'\w+[ \t]+(\w+)',s)
['mynum', 'timers'] 
```

上面发布的答案不会获得指针：

```
int *p; 
```

拿起那些，也许调整一下正则表达式：

```
>>> re.findall(r'\w+[ \t]+(?:\*\s*)?(\w+)',s)
['mynum', 'timers', 'p'] 
```

使用 C，你不能寻找各种类型（`int`, `float`, `double`, `char`...），因为事物总是可以被 typedef'd 并且你也有`struct`（和`union`？）它们也可以这样工作......更不用说任何一点，你可以`#include "anyfile.c"`——作为一个程序员，这将是一件非常讨厌的事情，但这是可能的。我认为`c99`你也可以在任何你想要的地方声明变量（例如在宏中）。你也想收拾那些吗？换句话说，要正确执行此操作，您需要一个完整的 c 解析器来为您完成繁重的工作

# android - 如何在加载地图 Android V2 时获取用户位置并放大

> ID：14752707
> 
> 赞同：1
> 
> 时间：2013-02-07T13:50:41.083
> 
> 标签：android, android-maps-v2

我可以显示地图并在地图上显示按钮，当我点击它时，它会完全按照我的意愿执行。在我的代码中，我有这个：

```
 googleMap.setMyLocationEnabled(true);
 googleMap.getMyLocation(); 
```

有没有办法在加载地图时自动执行此操作，而无需点击放大位置按钮？

我对此进行了研究，并找到了获取用户位置的示例，但我发现的示例并没有达到我想要的效果，我不确定它是否是 V2 地图的代码。现在肯定有一个简单的，代码最少的方法来做到这一点吗？

我通读了 Stackoverflow 上的[这篇](https://stackoverflow.com/questions/14338955/how-can-i-get-center-location-on-maps-v2-on-android)文章，但我不知道如何处理这段代码：

```
googleMap.getCameraPosition().target 
```

我认为目标需要一个位置？

任何帮助表示赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:30:53.500

我通过使用以下代码解决了这个问题：

```
 lm =(LocationManager) getSystemService(Context.LOCATION_SERVICE);
    Criteria crit = new Criteria();

    towers = lm.getBestProvider(crit, false);

    Location location = lm.getLastKnownLocation(towers);

    if(location != null){

        Double glat = location.getLatitude();
        Double glon = location.getLongitude();

    } 
```

然后设置地图：

```
CameraPosition cp = new CameraPosition.Builder()
        .target(new LatLng(glat, glon))
        .zoom(15)
        .build();     
        googleMap.animateCamera(CameraUpdateFactory.newCameraPosition(cp)); 
```

这将获取用户的位置，当地图加载时，它会自动放大到该位置，您应该会看到您所在位置的蓝点！

# .net - 访问和传递参数中的存储过程/参数化查询

> ID：14752713
> 
> 赞同：1
> 
> 时间：2013-02-07T13:50:54.250
> 
> 标签：.net, ms-access, stored-procedures, parameter-passing

我在 Access 中创建了一个查询，看起来像这样......

```
SELECT project_master.ProjectID, project_master.OracleNum, project_master.BudgetYear, project_master.ProjectNum, project_master.Description, project_master.Description, project_master.Location, project_master.Region, project_master.ContactOwner, project_master.ContactDesigner, project_master.ProjectPriority, project_master.StartDate, project_master.InitialCloseDate, project_master.CurrentBonus, project_master.CurrentQty, project_master.TotalQty, project_master.TotalQty, project_master.SpendingYTD, project_master.SpendingLTD, project_master.SpendingAnnualBudget, project_master.SpendingForecast, project_master.SpendingMinimumForecast, project_master.SpendingRemainingCommitted, project_master.SpendingSaveOver, project_master.SpendingPushPull, project_master.IsCanceled, project_master.UserComments, project_master.tmp_reporting_selected, project_master.rep_header, project_master.rep_budget, project_master.rep_work_completed, project_master.rep_work_planned_completed, project_master.rep_variance_reason, project_master.rep_work_to_complete, project_master.rep_cutovers, project_master.rep_issues_resolution, project_master.rep_variance_reason1, project_master.rep_work_to_complete1, project_master.rep_cutovers1, project_master.rep_issues_resolution1 FROM project_master WHERE (((project_master.ProjectID)=[projectID])); 
```

现在我对 Access 一点也不熟悉，我正在尝试制作一个存储过程，但我只是看不到任何这样做的选项。我创建的这个查询似乎采用了 projectID 参数，但是当我尝试在 VB.NET 中调用它并将参数传递给它时，我得到了表中的每条记录，而不是我想要的记录。

```
Public Shared Function GetProjectByID(ByVal projectID As Integer) As DataTable
        Dim paramaterList As New List(Of DataParameter)
        paramaterList.Add(New DataParameter("@projectID", projectID, ParameterDirection.Input, OleDb.OleDbType.Integer))
        Return DAL.GetDataTableUsingReader("get_project_by_id", paramaterList)
End Function

Public Shared Function Create(ByVal projectID As Integer) As Project
        If projectID < 1 Then
            Throw New ArgumentException("The project ID is invalid.")
        End If
        Dim dt As DataTable = ProjectSQL.GetProjectByID(projectID)
        If dt.Rows.Count < 1 Then
            Throw New DataException("No project record found by the provided ID.")
        End If
        Return Repackage(dt)(0)
End Function

Friend Shared Function Repackage(ByVal dt As DataTable) As List(Of Project)
    Dim projectList As New List(Of Project)
    For i As Integer = 0 To dt.Rows.Count - 1
        Dim p As New Project
        Dim row As DataRow = dt.Rows(i)
        p.ProjectID = Convert.ToInt32(row("ProjectID"))
        p.OracleNum = Convert.ToString(row("OracleNum"))
        p.BudgetYear = Convert.ToInt32(row("BudgetYear"))
        'etc...
        projectList.Add(p)
    Next
    Return projectList
End Function 
```

基本上，我调用 Create() 方法并将一个整数传递给它，但我得到的是返回的所有记录而不是一条记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T14:21:19.720

```
WHERE (((project_master.ProjectID)=[projectID])) 
```

当数据库引擎看到`[projectID]`时，它不知道您打算将其作为参数。它认为您指的是同名字段。所以它返回`project_master.ProjectID`等于它自己的每一行，它应该是所有`ProjectID`不为空的行。

为参数指定一个不同的名称，该名称与数据源中的任何字段都不匹配。

```
WHERE (((project_master.ProjectID)=[which_projectID])) 
```

# php - 用 PHP 实现 OpenID

> ID：14752715
> 
> 赞同：7
> 
> 时间：2013-02-07T13:50:56.993
> 
> 标签：php, openid

我对实现 OpenID 很感兴趣，并且一直在阅读它，但仍有一些方面我有点困惑。

我已经看到了多个交互流程图和分步详细信息，例如[这个](http://www.windley.com/archives/2006/04/how_does_openid.shtml)，但它们都跳过了有关成功登录时发生的情况的详细信息。我读到的所有内容都类似于“成功登录后，用户被重定向回站点”。那么，我的网站如何知道登录成功？cookie 设置好了吗，我会收到 POST 回复吗？

例如，这是我包含的链接中的详细信息

```
9\. User POSTs response to OpenID Server.
10\. User is redirected to either the success URL or the failure URL returned in (5) depending on the User response

//this is the step that it says tells me I've had a succes/failure upon login
5\. Consumer inspects the HTML document header for <link/> tags with the attribute rel set to openid.server and, optionally, openid.delegate. The Consumer uses the values in these tags to construct a URL with mode checkid_setup for the Identity Server and redirects the User Agent. This checkid_setup URL encodes, among other things, a URL to return to in case of success and one to return to in the case of failure or cancellation of the request 
```

我不太确定如何解释。具体是什么告诉我登录成功？从我收集的信息来看，似乎标题中的某些内容已设置，但我如何访问它？假设我发现登录成功登录，这是否意味着我可以继续设置与我的网站相关的 cookie/会话？

**编辑-我找到[了 LightOpenID](http://gitorious.org/lightopenid#more)，它似乎适合我的需要，但我仍然有点不确定**

我在 localhost 上对其进行了测试，并让谷歌登录工作。登录后，我收到一个 URL，例如

```
User https://www.google.com/accounts/o8/id?id=sdlkfjlkwliej9392010fjos has logged in. 
```

检查代码，它是由以下生成的

```
echo 'User ' . ($openid->validate() ? $openid->identity . ' has ' : 'has not ') . 'logged in.'; 
```

我假设这意味着我只需检查 $openid->validate() 的登录信息？**对于给定的谷歌帐户，$openid->identity 每次都相同吗？**我假设是的，否则每次都无法跟踪用户。如果用户已经登录，我就可以设置 cookie、会话以及我认为必要的任何其他有趣的东西，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:17:54.387

这是我使用的一些代码：

```
require '../../php/lightopenid-lightopenid/openid.php';

if( isset( $_COOKIE[ 'claimed_id' ] ))
{
    $claimed_id = $_COOKIE[ 'claimed_id' ];
    try
    {

            if(!isset($_GET['openid_mode']))
            {
                            $openid = new LightOpenID;
                            $openid->identity = 'https://www.google.com/accounts/o8/id';
                            header('Location: ' . $openid->authUrl());
            }
            elseif($_GET['openid_mode'] == 'cancel')
            {
                    unset( $claimed_id );
                    setcookie( "claimed_id", 0, time() - 3600, "/" );
            }
            else
            {
                    $openid = new LightOpenID;

                    if( $openid->validate() )
                    {
                    // different login
                            if ( $_REQUEST[ 'openid_claimed_id' ] != $claimed_id )
                            {
                                    unset( $claimed_id );
                                    setcookie( "claimed_id", 0, time() - 3600, "/" );
                            }
                    }
                    else
                    {
                    // cant validate
                            unset( $claimed_id );
                            setcookie( "claimed_id", 0, time() - 3600, "/" );
                    }
            }
    }
    catch(ErrorException $e)
    {
            echo "Authentication error.";
            error_log( $e->getMessage() );
            exit;
    }
}

// fall through to rest of code... 
```

# mysql - 正整数数据类型（不带 0）

> ID：14752716
> 
> 赞同：0
> 
> 时间：2013-02-07T13:50:58.040
> 
> 标签：mysql

我需要一个大于 0 (1-65535) 的整数

是否有任何 mysql 类型或属性，如 unsigned，但没有 0 值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:54:39.797

不，那里没有。有 5 种不同类型的整数（如果包含枚举，则为 6 种）。您可以获得的最接近的是`SMALLINT`(0-65535)。 [http://dev.mysql.com/doc/refman/5.5/en/integer-types.html](http://dev.mysql.com/doc/refman/5.5/en/integer-types.html)

```
TINYINT   0-255
SMALLINT  0-65525
MEDIUMINT 0-16777215
INT       0-4294967295
BIGINT    0-18446744073709551615 
```

这些是整数类型的无符号值。

如评论中所述，您创建了一个小 int 并添加了一个触发器，该触发器将检查您是否插入了 0。

# ruby - Proc#curry 和 splat 运算符：使用任意数量的参数进行柯里化

> ID：14752717
> 
> 赞同：2
> 
> 时间：2013-02-07T13:50:58.627
> 
> 标签：ruby, functional-programming, currying

[Ruby 1.9 内置的对柯里化的](http://www.ruby-doc.org/core-1.9.3/Proc.html#method-i-curry)支持支持两种方法来处理带有任意数量参数的 proc：

```
my_proc = proc {|*x| x.max } 
```

1)`curry`没有参数：`my_proc.curry`. 您将逗号分隔的参数传递给 curried proc，就像您传递给普通 proc 一样。如果参数的数量是任意的，这将无法实现正确的柯里化（如果某些参数不是 splat 则很有用）

2)`curry`带参数：`my_proc.curry(n)`这样，currying 被应用，就好像 proc 将带`n`参数一样。例如：

```
my_proc.curry(3).call(2).call(5).call(1) #=> 5 
```

那么，如何使用任意数量的参数实现柯里化呢？这意味着，如果`n`没有给出？

我想到的一种方法是通过代理收集参数`call`，然后解析`proc`通过（如果使用/不使用参数`method_missing`以外的任何方法，请使用收集的参数调用），但我仍在寻找其他方法实现它。`call``call``proc`

**更新**

正如 Andy H 所说，问题在于何时停止使用咖喱。`call`就我的目的而言，如果在调用除此之外的任何方法或`call`在没有参数的情况下调用任何方法时停止柯里化 / proc 评估，那将是可以的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T09:23:49.270

内置`curry`方法对您不起作用。原因是它会产生一个 proc，只要它有足够的参数就可以进行评估。引用您链接到的文档：

> 一个 curried proc 接收一些参数。如果提供了足够数量的参数，它会将提供的参数传递给原始 proc 并返回结果。

这里要实现的关键点是零是 splat 参数的“足够数量的参数”。

```
f = ->(x, y, z, *args){ [x, y, z, args] } 
g = f.curry    # => a "curryable" proc
h = g.call(1)  # => another curryable proc
i = h.call(2)  # => another curryable proc
j = i.call(3)  # => [1, 2, 3, []] 
```

正如您所展示的，这些“可curryable”过程可以一次传递一个参数，每次都返回一个新的可curryable proc，直到传递了足够的参数，此时它会进行评估。这也是为什么他们不能支持任意长度的参数列表的原因——它怎么知道什么时候停止柯里化并只进行评估？

如果您想要一种允许任意数量参数的不同柯里化方式，您可以定义自己的柯里化方法：

```
def my_curry(f, *curried_args)
  ->(*args) { f.call(*curried_args, *args) }
end 
```

这是一个相当简单的实现，但可能符合您的目的。内置方法的主要区别在于它*总是*返回一个新的过程，即使已经传递了足够的参数，并且它不支持一次一个的“咖喱链”。

```
f = ->(x, y, z, *args) { [x, y, z, args] }

g = my_curry(f, 1)    # => a proc
g.call(2, 3)          # => [1, 2, 3, []] 
g.call(2, 3, 4, 5)    # => [1, 2, 3, [4, 5]]
g.call(2)             # => ArgumentError: wrong number of arguments (2 for 3)

h = my_curry(g, 2, 3) # => a proc
h.call                # => [1, 2, 3, []]
h.call(4, 5)          # => [1, 2, 3, [4, 5]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T16:28:49.553

我讨厌笨拙，但是忘记`curry`并写下来怎么样

```
my_proc = proc { |*x| x.max }
l = -> *x { my_proc.( 4, 6, 12, 1, *x ) }
l.call + 1 #=> 13 
```

你知道，Matz 自己说这`curry`“只是给功能性孩子的玩具”。它的实现并不特别，它并不比你在上面看到的更快或不同。Curry 在 Ruby 中没那么有用……

对于那些不相信我说的话的人，这里是确切的引用和链接：

[函数式编程儿童的复活节彩蛋](http://www.ruby-forum.com/topic/142699)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:08:09.887

我实现了一个使用子类`Basic Object`作为包装器进行柯里化的解决方案：

```
class CurryWrap < BasicObject

  def initialize proc
    @proc = proc
    @args = []
    return self
  end

  def call *args
    if args.size == 1
      @args << args.first
      return self
    elsif args.empty?
      return @proc.call(*@args)
    else
      @proc.call(*@args).call(*args)
    end
  end

  def == other
    @proc.call(*@args) == other
  end

  def method_missing m, *args, &block
    @proc.call(*@args).send(m, *args, &block)
  end

end 
```

有了这个，基本上可以做到以下几点：

```
my_proc = proc { |*x| x.max }

CurryWrap.new(my_proc).call(4).call(6).call(12).call(1) + 1 #=> 13 
```

除了参数之外的任何东西`call`都可以解决这个过程。

我不知道这是否是最优雅的方法，所以我暂时不接受答案。

# python - With reading hebrew in urllib2 python

> ID：14752721
> 
> 赞同：0
> 
> 时间：2013-02-07T13:51:03.513
> 
> 标签：python, encoding, urllib2

I read a webpage which contains hebrew characters, using:

```
response = ('').join(opener.open(url).readlines()) 
```

The result I get is mixed, some of the characters come back as unicode, which I can handle.

Some of the response seems garbled. In a format I cant recognize. An example of the recieved text is: שלך

More precisely, it looks like this (only a snippet...):

```
<h3 class="_52r al aps">About ‎גדי‎&lt;/h3><div>&#x5e9;&#x5dc;&#x5da; ....</div> 
```

The text between the divs seems scrambled. Can I convert it to unicode?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:58:34.970

You are looking at HTML entities; use the [`HTMLParser` library](http://docs.python.org/library/htmlparser.html) to decode these:

```
>>> import HTMLParser
>>> h = HTMLParser.HTMLParser()
>>> print h.unescape('&#x5e9;&#x5dc;&#x5da;')
שלך
>>> h.unescape('&#x5e9;&#x5dc;&#x5da;')
u'\u05e9\u05dc\u05da' 
```

To read a full `urllib2` response, just use `.read()`:

```
response = opener.open(url).read() 
```

# c# - 从母版页加载中查找请求的页面？

> ID：14752723
> 
> 赞同：0
> 
> 时间：2013-02-07T13:51:12.317
> 
> 标签：c#, asp.net

假设我在母版页加载事件中。如果用户已登录，我需要将它们重定向到 Login.aspx，如果未登录，我需要将它们重定向到 Login.aspx。但首先，我需要知道他们试图访问哪个页面。

我怎样才能得到这些信息？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:02:00.753

因此，您可以为所有页​​面创建一个基类，并在该类中覆盖 OnInit (EventArgs e) 方法。在此方法中，将检查用户是否在系统上签名的代码（通过检查表示用户的会话变量不为空），如果该变量为空，则执行重定向到登录页面。如果您采用这种方法，您的所有内容页面（登录页面除外）都必须继承自该基类。

我希望这可以帮助你。

```
public class BasePage : Page
{
    /// <summary>
    /// 
    /// </summary>
    /// <param name="e"></param>
    protected override void OnInit(EventArgs e)
    {
        if (Session["Usuario"] == null)
        {
            Response.Redirect(ResolveClientUrl("~/Login.aspx"));
        }        
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:38:37.337

这有点令人困惑。您希望相同的母版页从内容页（例如 default.aspx）重定向到登录页（例如 Login.aspx）并从登录页重定向到内容页。你只需要做这些事情之一。

首先，您将需要 2 个母版页（或仅从 Login.aspx 中删除母版页），因为您将陷入递归循环。

假设用户试图访问您的站点，但他们没有登录。他们将​​被重定向到 Login.aspx，它会检查并查看他们没有登录，将他们重定向到 Login.aspx，等等。 ..

如果他们已经登录，则不需要从 Login.aspx 重定向，因为他们不应该首先访问此页面，除非他们没有。

最后，在主页面中执行快速检查以查看用户是否已登录，如果未登录，则重定向到登录页面并将他们请求的页面作为 url 的参数传递（如前所述，创建 Session 变量有效也）。

```
If (!userLoggedIn)
{
    Response.Redirect("Login.aspx?Url=" + Request.Url);
} 
```

这会传入他们最初作为参数访问的 Url（例如 Login.aspx?Url=default.aspx）

然后在 Login.aspx

```
If (userSuccessfullyLoggedIn)
{
    Response.Redirect(Request.Params["Url"]);
} 
```

这会将他们重定向到他们最初请求的页面（例如 default.aspx）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T13:54:03.337

您可以使用`Request.RawUrl`获取当前请求的 URL。

```
if (Request.RawUrl.StartsWith("/login.aspx")){
   //Check whether user is logged in
} 
```

# git - 分支模型：如何将在一个分支中完成的更改移动到另一个分支

> ID：14752733
> 
> 赞同：2
> 
> 时间：2013-02-07T13:51:35.930
> 
> 标签：git

需要一个解释。所以我在功能分支上工作（让我们称之为`feature/feature1`），提交并推送到远程。

```
git commit -m "commit feature1"
git push origin feature/feature1 
```

然后我开始开发一个新功能，但我没有去开发、拉取和创建新功能分支，而是继续在`feature/feature1`分支上工作。

我不想放弃更改，我该如何创建新分支并将所有新更改从`feature/feature1`分支移动到新创建的分支？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:55:09.720

您可以使用`--onto`参数 of[`rebase`](http://www.kernel.org/pub/software/scm/git/docs/git-rebase.html)将一些更改从一个分支移动到另一个分支。在文档中有一个如何做到这一点的示例，该部分以

> 以下是如何将基于一个分支的主题分支移植到另一个分支，假装您使用 rebase --onto 从后一个分支分叉了主题分支。...

您的命令可能看起来像这样：

```
git branch feature/feature2
git reset --hard <sha1 of last commit of feature 1>
git rebase --onto <where you want branch to start> feature/feature1 feature/feature2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:56:24.930

如果你想创建一个包含当前提交的新分支，你应该做`git branch newbranchname`. 这将创建一个新分支，但不会更改旧分支。如果您想从旧分支中删除新提交，并且该分支尚未发布，您可以签出它并执行`git reset --hard lastcommitid`.

# java - Dropbox API (OAuth v1) 授予的访问令牌的有效性是什么以及如何刷新它？

> ID：14752736
> 
> 赞同：15
> 
> 时间：2013-02-07T13:51:43.267
> 
> 标签：java, oauth, dropbox, dropbox-api

[我在这里](https://forums.dropbox.com/topic.php?id=80430)阅读了 Dropbox 论坛上的一个帖子。但我仍然对令牌的有效期以及是否需要刷新它以及**如何**刷新感到困惑。我的应用程序需要离线对用户文件执行一些预定的操作，所以我需要更长的访问时间，比如说一周，而不需要再次要求用户授予访问权限。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-07T14:01:24.823

[Dropbox API Authentication Tutorial](https://www.dropbox.com/developers/start/authentication#python)似乎表明访问令牌在用户卸载您的应用程序或通过 Dropbox 页面明确撤销授权之前是有效的。

# android - Android ListView - 检索可见边界

> ID：14752741
> 
> 赞同：0
> 
> 时间：2013-02-07T13:52:05.077
> 
> 标签：android, listview, scrollview

我正在尝试获取 ListView 的（任何一个）可见坐标的值。我使用了 ScrollListener，但我不确定哪个属性会给我这些值。我最终想使用这些值来计算滚动方向。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:09:19.963

试试这个方法。

```
listView.getLastVisiblePosition() in your onScroll listner 
```

这不会给出坐标，但您会很容易地找到向上或向下的滚动方向。

这将返回一个`int`值，如果它增加而不是执行向下滚动，如果 ts 减少，则表示用户正在向上滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:37:32.647

`OnScrollListener`有一个你需要覆盖调用的函数`onScroll`，你可以用它来解决你的问题。这是一个代码片段：

```
listView.setOnScrollListener(new OnScrollListener() {

     @Override
     public void onScroll (AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {

          if (++firstVisibleItem + visibleItemCount > totalItemCount) {
               //Reached last element in list, Do Something...
          }
     }
} 
```

您可以使用它来确定用户是向上还是向下滚动以及坐标。`firstVisibleItem`将为您提供列表中第一个可见项目的位置/坐标，`visibleItemCount`将告诉您还有多少元素是可见的并且不`totalItemCount`言自明。

# perl - 退出递归子程序

> ID：14752745
> 
> 赞同：0
> 
> 时间：2013-02-07T13:52:12.533
> 
> 标签：perl

我希望我的代码在特定迭代后从递归子例程中逃脱

这是我的测试代码：

```
#!/usr/bin/perl 
use strict;

&sub();

my $count = 0;
sub sub
{
    if ( $count lt 1 )
    {
        print "This statment is visible \n";
        $count++;
        &sub();
    }
    else
    {
        return;
    }
} 
```

这给出了以下输出，我对此感到满意：

```
This statment is visible 
```

但如果我使用`#!/usr/bin/perl -w`，那么它会给我 hte 输出，但也会给我一个警告：

```
Use of uninitialized value $count in string lt at sub.pl line 9.
This statment is visible 
```

**问题 1：**如何摆脱上述警告。

现在，上面的代码是我的测试代码，我想将相同的逻辑应用于下面的实际代码：

简而言之，我想将 a 解析`hostname`为它的`IP address`. 如果它不起作用，那么我想将其附加`domain name (.my.company.net)`到`hostname`然后尝试名称解析。

但是，我上面的代码（在某些情况下，不知道为什么）进入无限深度递归并耗尽了整个内存。我的虚拟机变得无响应，我必须重新启动它才能让它恢复工作。

因此，我想在一次迭代后摆脱递归子程序，而不是进行无限递归。

这是代码：

```
#!/usr/bin/perl -w
use strict;

my $IP = to_ip("abcdefgh");
print $IP."\n";

my $count = 0;
sub to_ip
{
    if ( $count lt 1 )
    {
        use Socket;
        my $hostname    = shift;
        my $packed_ip   = gethostbyname($hostname);
        if ( defined $packed_ip )
        {
            sprintf inet_ntoa($packed_ip);
        }
        else
        {
            $hostname .= ".my.company.net";
            to_ip($hostname);
        }
        $count++;
    }
    else
    {
        return;
    }
} 
```

Aobve 代码给了我以下警告，然后又卡住了。我必须重新启动虚拟机才能重新启动。

```
Useless use of sprintf in void context at get_deleted_list.pl line 98. 
```

请忽略上述警告中的行号。它指的`sprintf`是我的子

**问题 2：**如何在一次迭代后摆脱我的 sub。我不在乎我是否从 sub 获得结果，但我想在一次迭代后摆脱它。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T14:02:35.457

**对问题1**的回答：将`my $count` **上面**的子程序调用：

```
my $count = 0;
&sub();

sub sub
{
  # ...
} 
```

`$count`调用 sub 时未声明。它不能用于将其与其他东西进行比较，因此是警告。如果没有警告，Perl 仍然会执行包含`$count`在其中的命令，但它不会抱怨。

**问题 2**：

首先，放在`$count`子程序调用之上。您的[`sprintf`](http://perldoc.perl.org/functions/sprintf.html)警告是告诉您您正在调用`sprintf`而不使用返回值。`sprintf`格式化一个字符串并返回它。如果你想输出那个字符串，你可以说`print sprintf $foo`，或者干脆使用[`printf`](http://perldoc.perl.org/functions/printf.html).

一旦你完成了这两项更改，它将不会在无限循环中运行。至少它对我有用。

另一件事：将`use Socket`潜艇的外部移动到最顶部。它是在编译时评估的，所以无论如何它都会被加载。如果您希望它仅在您来的时候加载，请使用`require Socket`and`Socket::inet_ntoa($packed_ip)`代替。

```
use strict; use warnings;
# use Socket;

my $count = 0;
my $IP = to_ip("abcdefgh");
print $IP. "\n";

sub to_ip {
  if ( $count lt 1 ) {
    my $hostname  = shift;
    my $packed_ip = gethostbyname($hostname);
    if ( defined $packed_ip ) {
      require Socket;                       # instead of use
      print Socket::inet_ntoa($packed_ip);
    } else {
      $hostname .= ".my.company.net";
      to_ip($hostname);
    }
    $count++;
  } else {
    return;
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T14:19:09.077

我认为一个简单的基于循环的解决方案会更直接：

```
sub to_ip
{
  use Socket;
  my $hostname = shift;
  for my $suffix ("", ".my.company.net") {
    my $packed_ip = gethostbyname("$hostname$suffix");
    next unless defined $packed_ip;
    return sprintf inet_ntoa($packed_ip);
  }
 } 
```

这只是按顺序尝试所有替代方案，直到一个成功，此时它返回所需的字符串。（顺便说一句，`sprintf`这里真的有必要吗？）。如果在没有成功调用的情况下退出循环`gethostbyname`，则隐式返回 undef。

# ios - 单个文件中的多个 @implementation 块

> ID：14752748
> 
> 赞同：2
> 
> 时间：2013-02-07T13:52:16.993
> 
> 标签：ios, objective-c

我一直在查看 Apple 的一些示例代码，特别`AVCam`是使用该`AVFoundation`框架的项目。

它是主视图控制器文件，开发人员有多个`@implementation`部分：

```
@implementation AVCamViewController
@implementation AVCamViewController (InternalMethods)
@implementation AVCamViewController (AVCamCaptureManagerDelegate) 
```

它们也有相应`@interface`的部分。

所有这些都在一个`AVCamViewController.m`文件中。我以前从未见过这样做，并且想知道其背后的基本原理。

这只是个人风格吗？

它是否提供任何固有的优势？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T13:58:54.767

它们被称为类别。这是一个很好的解释：[https ://stackoverflow.com/a/864877/865967](https://stackoverflow.com/a/864877/865967)

我确信其他人可以提供更具体的原因，但我认为当人们在同一个 .h/.m 文件中使用这种模式时，它只是为了可读性和分离。

# android - 从 android 应用程序连接到 wifi 设备

> ID：14752749
> 
> 赞同：0
> 
> 时间：2013-02-07T13:52:17.337
> 
> 标签：android, android-wifi, wifimanager, flashair

[在使用WifiManager](http://developer.android.com/reference/android/net/wifi/WifiManager.html)扫描网络后，我的应用程序（支持 2.2 及更高版本）需要与[FlashAir](http://www.toshiba-components.com/FlashAir/index.html)等**wifi 设备**连接。

**是否可以从应用程序**连接到设备？如果是，如何？

还是android操作系统限制它？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-07T13:54:19.797

拿这个，在这里你可能会找到你要找的东西^^他们在那里帮助了我^^ [Android中的服务器-客户端故障（套接字未绑定/套接字已在使用中）](https://stackoverflow.com/questions/14581866/server-client-malfunction-in-android-socket-is-not-bound-socket-is-already-in-u)

如果您更喜欢视觉和视听材料：[https](https://www.youtube.com/watch?v=XlryaovT_3k) ://www.youtube.com/watch?v=XlryaovT_3k 它关于网络，很好解释

# iphone - ios应用程序中的Pinterest集成？

> ID：14752750
> 
> 赞同：1
> 
> 时间：2013-02-07T13:52:18.883
> 
> 标签：iphone, ios, xcode, webview, pinterest

我正在尝试在 pinterest 上发布我的应用程序中的图像。从过去五天开始，我在 SO 上发布了一些问题后终于寻找完美的解决方案，现在我离解决我的问题只有一步之遥了。问题是当我使用 url 发布任何图像时成功地将我的图片发布到 pinterest 上，如下面的代码所示。

```
-(NSString*) generatePinterestHTML {
NSString *description = @"Post your description here";
NSString *sUrl = [NSString stringWithFormat:@"http://4.bp.blogspot.com/-w4oTZjlpgwo/T5_pi-KJPuI/AAAAAAAAAoM/rKm3E0XCbgY/s1600/flower.png"];
NSLog(@"URL:%@", sUrl);
NSString *protectedUrl = (__bridge NSString *)CFURLCreateStringByAddingPercentEscapes(NULL,(__bridge CFStringRef)sUrl, NULL, (CFStringRef)@"!'\"();:@&=+$,/?%#[]% ",CFStringConvertNSStringEncodingToEncoding(NSUTF8StringEncoding));
NSLog(@"Protected URL:%@", protectedUrl);
NSString *imageUrl = [NSString stringWithFormat:@"\"%@\"", sUrl];
NSString *buttonUrl = [NSString stringWithFormat:@"\"http://pinterest.com/pin/create/button/?url=www.flor.com&media=%@&description=%@\"", protectedUrl, description];

NSMutableString *htmlString = [[NSMutableString alloc] initWithCapacity:1000];
[htmlString appendFormat:@"<html> <body>"];
[htmlString appendFormat:@"<p align=\"center\"><a href=%@ class=\"pin-it-button\" count-layout=\"horizontal\"><img border=\"0\" src=\"http://assets.pinterest.com/images/PinExt.png\" title=\"Pin It\" /></a></p>", buttonUrl];
[htmlString appendFormat:@"<p align=\"center\"><img width=\"400px\" height = \"400px\" src=%@></img></p>", imageUrl];
[htmlString appendFormat:@"<script type=\"text/javascript\" src=\"//assets.pinterest.com/js/pinit.js\"></script>"];
[htmlString appendFormat:@"</body> </html>"];
return htmlString;
}
-(void)viewDidLoad
{
 [super viewDidLoad];
NSString *htmlString = [self generatePinterestHTML];
NSLog(@"Generated HTML String:%@", htmlString);
mywebview.backgroundColor = [UIColor clearColor];
mywebview.opaque = NO;
if ([mywebview isHidden]) {
    [mywebview setHidden:NO];
}
[mywebview loadHTMLString:htmlString baseURL:nil];
} 
```

下面的屏幕截图显示了我上面的代码结果

![在此处输入图像描述](../Images/6a522fec09b7a95199b2e5970b21e0be.png)![在此处输入图像描述](../Images/c6a3a01c0b29f6a5870ba516542162cc.png)

但是当我试图从我的应用程序上传图像时，它不能正常工作这是我的代码

```
 - (void)viewDidLoad
 {
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
savedImagePath = [[documentsDirectory stringByAppendingPathComponent:@"savedImage.png"] mutableCopy];
NSLog(@"savedImagePath..%@",savedImagePath);
NSData*  imageData = UIImagePNGRepresentation(mypimage);
[imageData writeToFile:savedImagePath atomically:YES];
[super viewDidLoad];
NSString *htmlString = [self generatePinterestHTML];
NSLog(@"Generated HTML String:%@", htmlString);
mywebview.backgroundColor = [UIColor clearColor];
mywebview.opaque = NO;
if ([mywebview isHidden]) {
    [mywebview setHidden:NO];
}
[mywebview loadHTMLString:htmlString baseURL:nil];
}
- (NSString*) generatePinterestHTML {
NSString *description = @"Post your description here";
NSString *stringUrl = [NSString stringWithFormat:@"%@",savedImagePath];
NSLog(@"stringUrl:%@", stringUrl);
NSURL *urlToUpload = [[NSURL alloc]initFileURLWithPath:stringUrl];
NSString* sUrl = [NSString stringWithFormat:@"%@",urlToUpload];
NSString *protectedUrl = (__bridge NSString *)CFURLCreateStringByAddingPercentEscapes(NULL,(__bridge CFStringRef)sUrl, NULL, (CFStringRef)@"!'\"();:@&=+$,/?%#[]% ",CFStringConvertNSStringEncodingToEncoding(NSUTF8StringEncoding));
NSLog(@"Protected URL:%@", protectedUrl);
NSString *imageUrl = [NSString stringWithFormat:@"\"%@\"", sUrl];
NSString *buttonUrl = [NSString stringWithFormat:@"\"http://pinterest.com/pin/create/button/?url=www.flor.com&media=%@&description=%@\"", protectedUrl, description];

NSMutableString *htmlString = [[NSMutableString alloc] initWithCapacity:1000];
[htmlString appendFormat:@"<html> <body>"];
[htmlString appendFormat:@"<p align=\"center\"><a href=%@ class=\"pin-it-button\" count-layout=\"horizontal\"><img border=\"0\" src=\"http://assets.pinterest.com/images/PinExt.png\" title=\"Pin It\" /></a></p>", buttonUrl];
[htmlString appendFormat:@"<p align=\"center\"><img width=\"400px\" height = \"400px\" src=%@></img></p>", imageUrl];
[htmlString appendFormat:@"<script type=\"text/javascript\" src=\"//assets.pinterest.com/js/pinit.js\"></script>"];
[htmlString appendFormat:@"</body> </html>"];
return htmlString;
} 
```

对于上面的代码，我的屏幕截图结果是 [link1](http://tinypic.com/view.php?pic=118mumu&s=6) [link2](http://tinypic.com/view.php?pic=2h7p8ar&s=6)所以请建议任何方法来解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:34:43.390

在服务器上发布图像并为 pinit 按钮分配适当的 URL 地址后，它对我有用。[我在这里](https://stackoverflow.com/questions/14652079/how-to-post-image-on-pinterest)为那些最有可能在 pinterest 上发布来自应用程序的本地图像的人发布我的答案。

希望对大家有所帮助。

谢谢

# javascript - Ext JS 网格日期值在 IE8 中的 NaN.NaN.NaN 值

> ID：14752756
> 
> 赞同：1
> 
> 时间：2013-02-07T13:52:38.210
> 
> 标签：javascript, extjs, extjs3

我有一个带有 json Store 和 DateField 的网格。Firefox 运行良好，但无法在 Internet Explorer 8 中运行。

我这样定义它：

```
function convert(v, rec) {
    var value;
    Ext.isEmpty(v) ? value = '' : value = v;
    return value;
}

fields : [                      
    {name: 'date1', type: 'date', dateFormat: 'Y-m-d', convert: convert},
    {name: 'date2', type: 'date', dateFormat: 'Y-m-d', convert: convert},
] 
```

在 Firefox 中它看起来不错，但在 Internet Explorer 中它只是`NaN.NaN.NaN`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T20:23:07.463

您不应该使用转换功能。指定 dateFormat 的全部意义在于告诉读者“我的日期以这种格式来自服务器，解析它们并将它们转换为日期对象”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T18:57:25.707

尝试使用 isNaN 函数：这里有一个例子：

函数（值）{如果（isNaN（值））{返回“”；//任何你想要的值}返回值；},

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T13:55:25.397

尝试将行更改为更标准的语法：

```
value = Ext.isEmpty(v) ? '' : v; 
```

# c# - join 子句中的表达式之一的类型不正确。调用“加入”时类型推断失败

> ID：14752758
> 
> 赞同：2
> 
> 时间：2013-02-07T13:52:41.503
> 
> 标签：c#, asp.net, linq, asp.net-mvc-4

我目前正在尝试将另一个表中的列连接到现有表并将其返回到 MVC 4 中的视图

```
var q = from accCo in db.AccControls
        join accCom in db.AccCompanies
        on new { accCo.ControlCode } equals
        new { ControlCode = accCom.Code }

        where accCo.ControlCode == Request.QueryString["ControlCode"]
        orderby accCom.Code
        select new Combined{ AccControls = accCo, AccCompoanies = accCom };

return View(q); 
```

但我收到上述错误

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T13:57:06.143

如果您加入的任何列可以为空，则需要将其更改为 .Value

```
on new { accCo.ControlCode } equals
            new { ControlCode = accCom.Code.Value } 
```

或者你可以使用这个

```
var q = from accCo in db.AccControls
    join accCom in db.AccCompanies
    where accCom.Code != null
    on new { accCo.ControlCode } equals
    new { ControlCode = accCom.Code }

    where accCo.ControlCode == Request.QueryString["ControlCode"]
    orderby accCom.Code
    select new Combined{ AccControls = accCo, AccCompoanies = accCom }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:54:49.347

尝试

```
var q = from accCom in db.AccCompanies
        let accCo = db.AccControls.FirstOrDefault(x => x.ControlCode == accCom.Code)
        where accCo.ControlCode == Request.QueryString["ControlCode"]
              && accCo != null
        orderby accCom.Code
        select new Combined { AccControls = accCo, AccCompoanies = accCom }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T14:00:46.660

也许它的`Request.QueryString["ControlCode"]`

尝试将其贴在 linq qry 之外，如下所示：

```
var code = Request.QueryString["ControlCode"];

var q = from accCo in db.AccControls
        join accCom in db.AccCompanies
        on new { accCo.ControlCode } equals
        new { ControlCode = accCom.Code }

        where accCo.ControlCode == code //EDIT
        orderby accCom.Code
        select new Combined{ AccControls = accCo, AccCompoanies = accCom }; 
```

# c++ - 使用升压条件变量

> ID：14752759
> 
> 赞同：0
> 
> 时间：2013-02-07T13:52:54.680
> 
> 标签：c++, boost

我正在尝试使用以下代码来测试同步提升条件变量，此代码确实同步。但它只显示 4 个值这里有什么问题？，我该如何解决？

在 Windows 7 上使用 vs 2012

提前致谢。

```
#include <iostream>
#include <queue>

#include "boost\thread.hpp"
#include "boost\timer.hpp"

using namespace std;

int counter;

boost::mutex m;
boost::condition_variable CworkDone;
bool workdone = true;

bool procOn = true;

void display()
{
while (procOn == true)
{
    boost::mutex::scoped_lock lock(m);      

    if (workdone)
    {
        cout<<counter<<endl;
        CworkDone.notify_one();
        workdone = false;
    }   
    else 
    {
        CworkDone.wait(lock);
    }
}

}

void increment()
{
for(int i = 0 ; i <10 ; ++i)
{

    boost::mutex::scoped_lock lock(m);

    if (!workdone)
    {
        boost::this_thread::sleep(boost::posix_time::millisec(500));
        ++counter;
        workdone = true;
        CworkDone.notify_one();
    }
    else
    {
        CworkDone.wait(lock);
    }
}
procOn = false;
}

   int main()
{
boost::thread dispthread(display);
boost::thread incthread(increment);
dispthread.join();
incthread.join();

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T13:57:04.470

问题是类生产者/消费者问题。您的代码实际上没有任何意义-您不能使用单个条件变量来等待双方，（请记住，您先调用通知然后等待-在相同的条件下，在相同的上下文中。）所以任何事情都可能发生。

您需要重构代码以使用两个条件变量，一个用于生产者，一个用于消费者，例如：

编辑：使用应该正确的纯 c++11 实现进行了更新。

```
#include <atomic>
#include <chrono>
#include <condition_variable>
#include <iostream>
#include <mutex>
#include <thread>

using namespace std;

mutex mutex_;
condition_variable con_, prd_;
atomic_bool done_{false}, process_{false}; // possibly overkill, but hey-ho
int counter = 0; // protected resource

void consumer()
{
  for (;;)
  {
    unique_lock<mutex> lock(mutex_);       // acquire the mutex before waiting
    // this is the correct way to wait on the condition (as highlighted by @Dale)
    con_.wait(lock, []{ return process_.load() || done_.load(); });
    if (!done_.load())
    {
      cout << counter << endl;
      process_.store(false);               // we're done with this item
      lock.unlock();                       // release before notifying
      prd_.notify_one();
    }
    else
      break;                               // we're done completely
  }
}

void producer()
{
  unique_lock<mutex> lock(mutex_);
  for (int i = 0; i < 10; ++i)
  {
    this_thread::sleep_for(chrono::milliseconds(500));
    ++counter;
    process_.store(true);                 // indicate that there is data
    con_.notify_one();
    // wait for the consumer to complete
    prd_.wait(lock, []{ return !process_.load(); });
  }
  done_.store(true);                      // we're done
  lock.unlock();                          // release before notifying
  con_.notify_one();
}

int main(void)
{
  thread c(consumer);
  producer();
  c.join();
} 
```

所以现在发生的事情是，消费者等待它的条件（只有生产者会调用`notify()`它），而生产者一旦产生了一些东西，就会调用这个通知，这将唤醒客户端。然后客户端将调用`notify()`以唤醒生产者。

上述更新的方法不应遭受我之前强调的虚假唤醒问题。这否定了对`timed_wait`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-11T18:37:07.397

Nim 关于需要单独的生产者和消费者 condition_variables 是正确的，但是该答案中等待条件的原始代码存在缺陷 [请参见下面的注释]，这就是 vivek 需要使用 timed_wait 的原因（顺便说一句，这不是一个理想的解决方案）。

Nim 已经修复了代码，所以如果您使用 C++11，Nim 答案中的代码是一个很好的解决方案。

如果您卡在旧版本的 C++ 上，下面的代码将起作用。

使用 condition_variable 的常见习惯用法是：

```
lock the mutex
while (not ready to go)
    condition_variable.wait()
do it 
```

而且，是的，误报是可能的，这就是为什么上面的代码在从 condition_variable.wait() 调用返回后重新测试“准备就绪”的原因。

使用 Nim 使用的函数对象（在本例中为 lambda 函数）重载的 boost::wait 方法实现了这个习惯用法，包括忽略误报（仍然会发生）。它使用函数对象来测试“ready-to-go”条件，并且在重新获取锁并重新测试函数之前不会返回。

下面的代码在 C++ 11 之前工作，并且没有使用基于函数对象的 boost wait 来明确实际发生的情况。

```
#include <boost/thread.hpp>

boost::mutex m;
boost::condition_variable cProducer;
boost::condition_variable cConsumer;
volatile bool readyToDisplay = false;
volatile bool done = false;

void display()
{
    boost::mutex::scoped_lock lock(m);
    while(!done)
    {
        while (!readyToDisplay)
        {
           cConsumer.wait(lock);
        }
        cout << counter << endl;
        readyToDisplay = false;
        cProducer.notify_one();
    }
}

void increment()
{
  while(!done)
  {
    boost::this_thread::sleep(boost::posix_time::millisec(500));
    boost::mutex::scoped_lock lock(m);
    while(readyToDisplay)
    {
       cProducer.wait(lock);
    }
    ++counter;
    readyToDisplay = true;
    done = (counter == 10);
    cConsumer.notify_one();
  }
}

int main()
{
    boost::thread dispthread(display);
    boost::thread incthread(increment);
    dispthread.join();
    incthread.join();
    return 0;
} 
```

输出：

```
1
2
3
4
5
6
7
8
9
10 
```

* * *

注意：为了帮助其他人浏览这个棘手的区域（并查看大惊小怪的内容），原始答案在显示方法中包含与此类似的代码：（添加了 # 行，并省略了一些细节。）

```
1: while (!done)
2: {
3:   boost::mutex::scoped_lock lock(m);
4:   cConsumer.wait(lock);
5:   std::cout << counter << endl;
6:   cProducer.notify_one();
7: } 
```

假设就在该线程执行第 3 行之前，另一个线程递增计数器并在条件变量上调用 notify_one。当此线程在第 3 行锁定互斥体并在第 4 行等待时，应该使其唤醒的通知已经发生，因此等待将永远挂起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T22:16:18.197

该程序显示 5 个值而不是 4 个

```
0
1
2
3
4 
```

你的循环

```
void increment()
{
for(int i = 0 ; i <10 ; ++i) 
```

仅通知 10 次中的 5 次，因为通知仅在此处完成

```
if (!workdone)
{
    boost::this_thread::sleep(boost::posix_time::millisec(500));
    ++counter;
    workdone = true;
    CworkDone.notify_one();
} 
```

这个条件是二分之一。

要解决它，一切都取决于你想做什么。如果您想收到 10 次通知，请将计数器从 10 更改为 20 ;-)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-05-23T19:25:08.490

只需在 boost::mutex::scoped_lock lock(m); 之前添加 boost::this_thread::sleep(boost::posix_time::millisec(10); 在增量函数中。一点点同步问题

# java - 在 Java 中，为什么 readLine() 在关闭的套接字连接上阻塞？

> ID：14752760
> 
> 赞同：6
> 
> 时间：2013-02-07T13:52:56.637
> 
> 标签：java, timeout, bufferedreader

我有一个简单的客户端/服务器应用程序。服务器设置为如果在 N 秒内没有数据进入，则会发生超时并关闭套接字连接。我通过 Socket.setSoTimeout() 做到这一点。如果客户端挂起，一切正常。但是，如果客户端死了（例如，我用 Ctrl-C 杀死它），那么 readLine() 永远不会超时。

这是服务器代码，如果有区别的话：

```
public void run()
{
    PrintWriter out = null;
    BufferedReader in = null;

    try {
        sock.setSoTimeout(10000);

        out = new PrintWriter(sock.getOutputStream(), true);
        in = new BufferedReader(new InputStreamReader(sock.getInputStream()));

        String input;
        while ((input = in.readLine()) != null) { 
```

我尝试将信号处理程序放入客户端以将 ABEND 消息发送到服务器，但这不起作用（我怀疑套接字在发送 ABEND 之前已关闭，但我并没有真正花时间试图弄清楚那出来）。

有没有办法定期唤醒并检查套接字状态以查看它是否已关闭？或者（更好）如果套接字关闭，没有 readLine() 挂起？我应该使用某种无缓冲的阅读器吗？是否存在支持类似 readLine 机制的无缓冲读取器？

我在 Linux 上使用 Java 6。

编辑：我在空闲期间自己杀死了客户；此时所有数据都已发送和接收。我已经验证（通过 ps）客户端程序不再运行；Java进程确实被杀死了。使用 netstat 我可以看到套接字在两端都关闭了，但 readLine() 仍然挂起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:23:09.813

我认为你误诊了这个问题。

如果套接字的输入端已经关闭，那么`readLine()`调用*应该*会看到关闭。在消耗完所有缓冲数据后，调用应该返回一个`null`. （如果套接字正常关闭，您将不会收到 IOException，但如果连接超时，您可能会收到一个……例如。）

最明显的解释是套接字还没有关闭。看看另一端将关闭套接字的情况，并找出为什么还没有发生这种情况。

* * *

这些都不是解决方案，但我会回答完整性。

> 有没有办法定期唤醒并检查套接字状态以查看它是否已关闭？

另一个线程可以做到这一点，但不是这个。

> 或者（更好）如果套接字关闭，没有 readLine() 挂起？

这就是应该发生的事情。

> 我应该使用某种无缓冲的阅读器吗？

它没有帮助。你最终不得不`readLine()`自己实现，你的代码会在同一点阻塞。阻塞行为发生*在*阅读器链的缓冲和字符解码层之下。

> 是否存在支持类似 readLine 机制的无缓冲读取器？

不，它没有。看上面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T18:33:22.187

当您花费数小时追查不存在的问题时，您不讨厌它吗？在我尝试为 Stephen CI 提供 SSCCE 时发现我无法提供这样的示例，因为它*正在*工作。我的调试代码正在创建问题...

作为记录，这是工作代码（以防其他人遇到类似问题）：

**sscceServer.java**

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.ServerSocket;
import java.net.Socket;

public class sscceServer
{
    public static class EchoHandlerThread implements Runnable
    {
        private final Socket sock;
        private final int id;

        public EchoHandlerThread(Socket s, int i)
        {
            sock = s;
            id = i;
        }

        public void run()
        {
            try {
                //----- set socket read timeout to 10 seconds -----
                sock.setSoTimeout(10000);

                PrintWriter out = new PrintWriter(sock.getOutputStream(), true);
                BufferedReader in = new BufferedReader(new InputStreamReader(sock.getInputStream()));

                String input;
                while ((input = in.readLine()) != null) {
                    System.out.println("[" + id + "] <" + input + ">");
                }

                out.close();
                in.close();
                sock.close();

                System.out.println("\tConnection #" + id + " closed");
            }
            catch (Exception ex) {
                throw new RuntimeException(ex);
            }
        }
    }

    public static class Listener
    {
        private final InetAddress bindip;
        private final int portnum;

        public Listener(String ipstr, int pn)
        {
            try {
                bindip = InetAddress.getByName(ipstr);
                portnum = pn;
            }
            catch (Exception ex) {
                throw new RuntimeException(ex);
            }
        }

        public void start()
        {
            try {
                ServerSocket srvsock = new ServerSocket(portnum, 0, bindip);
                System.out.println("Listening on " + bindip.getHostAddress() + ":" + portnum);

                int connum = 0;
                while (true) {
                    Socket sock = srvsock.accept();

                    connum++;
                    InetAddress ipaddr = sock.getInetAddress();
                    System.out.println("Connection #" + connum + " from: " + ipaddr.getHostAddress());

                    new Thread(new EchoHandlerThread(sock, connum)).start();
                }
            }
            catch (Exception ex) {
                throw new RuntimeException(ex);
            }
        }
    }

    public static void main(String[] args)
    {
        Listener lsnr = new Listener("localhost", 8988);
        lsnr.start();
    }
} 
```

**sscceClient.java**

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.Socket;

public final class sscceClient
{
    public static void main(String[] args)
    {
        try {
            Socket sock = new Socket("localhost", 8909);

            PrintWriter out = new PrintWriter(sock.getOutputStream(), true);
            BufferedReader in = new BufferedReader(new InputStreamReader(sock.getInputStream()));

            out.println("Lorem ipsum dolor sit amet, consectetur adipiscing elit.");
            out.println("Ut sem ante, mollis ut porttitor at, aliquet vel nulla.");
            out.println("Suspendisse quis sapien ante, a cursus nunc.");

            //---- sleep for 20 seconds -----
            Thread.sleep(20000);

            out.close();
            in.close();
            sock.close();
        }
        catch (Exception ex) {
            throw new RuntimeException(ex);
        }
    }
} 
```

谢谢您的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T14:21:45.630

根据[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html#readLine())，该`readLine()`方法将抛出 IOException。并且根据 IOException 的[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html)，异常应该在中断时抛出。在不编写代码的情况下，我会说您可以通过 catch 来处理流过早关闭的情况`IOException`。

# google-analytics-api - Google 客户端 API - 自动身份验证

> ID：14752764
> 
> 赞同：0
> 
> 时间：2013-02-07T13:53:07.770
> 
> 标签：google-analytics-api

我想显示来自我的 GA 帐户的 Google Analytics 数据，并使其可供任何未经身份验证的用户使用。我已经完成了 OAuth2 访问，但我每次都必须登录我的谷歌帐户。有什么办法可以设置自动认证？我的意思是每个打开页面的用户都从我的谷歌分析页面获取数据。我需要类似 GAPI 类的东西。谢谢你的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:36:31.460

**Questions:**

1.What have you tried?

2.Whats the point of showing your analytics details to all the users?

**You can try the following:**

1.  You have to store your oauth token in db or in some files.

2.  When you are loading the page , you have to check in the backend its a valid token , or expired token. If its expired you can exchange the token with the valid oauth token .

3.  Once you got the valid token you can call the api on the fly and display the Google Analytics data to user.

# android - AdMob 在 android 中需要什么权限

> ID：14752769
> 
> 赞同：5
> 
> 时间：2013-02-07T13:53:14.513
> 
> 标签：android, location, admob, ads

在[谷歌的网站上](https://developers.google.com/mobile-ads-sdk/docs/)，他们只提到了其中两个：

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

什么位置都没有？可以吗？

我在论坛上注意到人们还使用其他权限，例如：

```
<meta-data android:value="true" android:name="ADMOB_ALLOW_LOCATION_FOR_ADS" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />     
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" /> 
```

是否可以先使用这两个，或者我应该将我的列表扩展到位置（还有其他什么？）以便提供更好的配置广告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:10:59.683

如果您启用这些权限，那么这将允许 admob 对您的广告进行地理定位。

当然，声明的唯一理由是：

```
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" /> 
```

是因为你想在开发过程中尝试不同的位置。当您的应用发布时，您不需要此权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-10T06:08:28.390

它可能会帮助某人

```
You should never request location permissions from users for the sole purpose of advertising. 
```

[https://support.google.com/admob/answer/6373176?hl=en](https://support.google.com/admob/answer/6373176?hl=en)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-30T23:40:45.970

```
 <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

这样，您将获得来自设备所在地区（国家）的广告

# java - 'null'，同时完全迭代 ZipEntry（来自 ZipInputStream）

> ID：14752771
> 
> 赞同：0
> 
> 时间：2013-02-07T13:53:16.743
> 
> 标签：java, zipinputstream

我以下列方式使用 ZipInputStream（代码）：

```
public InputStream getArtifactInputStream(InputStream contentInputStream)
  throws ArtifactProviderException
{       
    ZipInputStream zipInputStream = new ZipInputStream(contentInputStream);

    InputStream artifactContent=null;
    Properties externalizedProperties = null;
    ZipEntry ze=null;
    try {
        ze = zipInputStream.getNextEntry();
    } catch (IOException e) {
        throw new ArtifactProviderException(e);
    }
    boolean propertiesFound = false;
    try {
        while (ze  != null) {
          String name = ze.getName();
          if(name.endsWith(PROP_EXTENSION) && !ze.isDirectory())
          {  
              externalizedProperties = new java.util.Properties();
              externalizedProperties.load(zipInputStream);
              propertiesFound = true;
          }
          else if(name.endsWith(ARTIFACT_EXTENSION) && !ze.isDirectory())
          {  
              artifactContent = zipInputStream;

              artifactName = name.substring(name.lastIndexOf("/")+1, name.indexOf(ARTIFACT_EXTENSION));
              break;
          }
            ze=zipInputStream.getNextEntry();  
        }
    } catch (IOException e) {
        throw new ArtifactProviderException(e);
    }   
    return artifactContent;
} 
```

问题是我不确定在 zipEntry 上循环时 PROP_EXTENSION 文件是先出现还是 ARTIFACT_EXTENSION 出现，因此在任何这些情况下我都不能使用“break”，如果我不使用 break while 循环完成循环最后 artifactContent 指向包含“null”zipEntry 的 zipInputStream。

我该如何解决这个问题，这里有其他选择吗？

'contentInputStream' 基本上是 jar 或 zip。

希望我能够解释问题，如果您需要更多详细信息，请回复。

在此先感谢， Piyush

# macos - 如何以编程方式触发 mouseDown:(NSEvent *)（不使用鼠标）？

> ID：14752772
> 
> 赞同：2
> 
> 时间：2013-02-07T13:53:18.957
> 
> 标签：macos, mouse, mouseevent

我正在开发一个 Leap Motion 应用程序，我已经用它移动了光标，但我不知道如何以编程方式触发 mouseDown:(NSEvent *)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:27:40.427

这***在 Cocoa Mac 中***对我很有效：

```
void PostMouseEvent(CGMouseButton button, CGEventType type, const CGPoint point)
{
   CGEventRef theEvent = CGEventCreateMouseEvent(NULL, type, point, button);
   CGEventSetType(theEvent, type);
   CGEventPost(kCGHIDEventTap, theEvent);
   CFRelease(theEvent);
} 
```

使用此链接了解参数：[https ://developer.apple.com/library/mac/#documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html)

例如，要在我使用的点 (500,500) 触发 MouseDown 事件：

```
PostMouseEvent(kCGMouseButtonLeft, NX_LMOUSEDOWN, CGPointMake(200, 200)); 
```

# .net - 在 ConditionalExpression 上设置 IfTrue 属性

> ID：14752773
> 
> 赞同：1
> 
> 时间：2013-02-07T13:53:19.297
> 
> 标签：.net, expression

有没有办法在初始工厂方法之外设置 .NET（4.0 及更高版本）中 ConditionalExpression 的 IfTrue 属性？

我的目标是拥有一个通用的 SafeAction 类，以便在执行后续操作 (IfTrue) 之前检查谓词，但独立设置替代操作 (IfFalse)。

我想我可以有自己的工厂方法以我需要的方式生成 ConditionalExpression 对象。我只是在想这些属性（IfTrue、IfFalse、Test）只是委托，可以在 ConditionalExpression 对象的整个生命周期中重置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:03:39.470

不，那是不可能的。您必须为此编写自己的方法。

您可以为此编写流畅的扩展方法：

```
public static ConditionalExpression WithTrue(this ConditionalExpression item,
                                             Expression ifTrue)
{
    return Expression.Condition(item.Test, ifTrue, item.IfFalse, item.Type);
} 
```

# mysql - 具有多个 'WHEN' 值的 mysql 'case'

> ID：14752775
> 
> 赞同：4
> 
> 时间：2013-02-07T13:53:22.550
> 
> 标签：mysql, case

我有一个查询，需要对其他 2 列为真的列进行计数。当 'DealerName' like '%MINI%' AND 'DealerContact_Y' = 1 时，我需要计算 'DealerName'

但我不确定语法。此查询产生错误

```
SELECT DealerName,
       count(DealerShipId) as dealersContacted,
       CASE WHEN
       DealerName LIKE "%MINI%", WHEN DealerContact_Y = 1
       THEN Count(DealerContact_Y) END as Mini_contacted_yes,
       Campaign, 
       DealerId 
       FROM tblsummaryResults 
```

有没有办法在 case 语句中做多个 WHENS？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T13:54:54.370

您可以使用以下方式编写它`DealerName LIKE '%MINI%' AND DealerContact_Y = 1`：

```
SELECT DealerName,
  count(DealerShipId) as dealersContacted,
  count(CASE 
          WHEN DealerName LIKE '%MINI%' 
              AND DealerContact_Y = 1
          THEN DealerContact_Y END) as Mini_contacted_yes,
  Campaign, 
  DealerId 
FROM tblsummaryResults 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:55:27.903

所以，像这样计数：

```
COUNT(
  IF(DealerName LIKE "%MINI%" AND DealerContact_Y = 1, DealerContact_Y, NULL)
) AS Mini_contacted_yes 
```

# c++ - 为什么 seekg 功能不起作用？

> ID：14752776
> 
> 赞同：0
> 
> 时间：2013-02-07T13:53:23.123
> 
> 标签：c++, file, get, seekg

这是代码：

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main(int argc, char *argv[])
{
  string infile(argv[1]);
  ifstream fin(infile.data());

  string var_name;
  char ch = fin.get();
  cout << ch << endl;

  ch = fin.get();
  cout << ch << endl;

  ch = fin.get();
  cout << ch << endl;

  cout << "pos: " << fin.tellg() << endl;
  fin.seekg(-sizeof(char),ios::cur);
  cout << "pos: " << fin.tellg() << endl;

  ch = fin.get();
  cout << ch << endl;

  return 0;
} 
```

文件内容只是一个字符串：

```
<
?
x
m 
```

输出是：

```
<\n
?\n
x\n
pos: 3\n
pos: 2
x 
```

为什么打印的最后一个字符仍然是'x'？为什么 seekg 函数不将文件指针向后移动一个字节？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T13:59:07.860

*读取 x后*文件指针的位置为 3 ，但 x 本身位于位置 2（因为第一个字符位于位置 0）。向后移动 1 个字符会将文件指针放在它最近读取的字符处，这正是这里发生的情况。

如果你想移动到最后一个字符读取之前的那个字符，你需要通过-2而不是-1来寻找。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T14:03:01.247

如果您这样做，它将起作用：`fin.seekg(-sizeof(char)-1,ios::cur);`

注意：寻找文本文件中的任意位置是未定义的行为。请参见此处：[如何从文件末尾读取第 6 个字符 - ifstream？](https://stackoverflow.com/questions/12276834/how-to-read-the-6th-character-from-the-end-of-the-file-ifstream)

# c++ - 如何提取 std::string c 的元素

> ID：14752779
> 
> 赞同：0
> 
> 时间：2013-02-07T13:53:42.810
> 
> 标签：c++, stdstring

我有一个`std::sting`这样的：

```
std::string Str = "PARAM1;PARAM2;PARAM3;PARAM4" 
```

我需要提取每个参数，例如：

```
char* param1 = explodStr[1] //return PARAM1 ... 
```

我不熟悉 std::string，

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:58:02.180

我经常将此功能用于此类任务。它就像 PHP 的[爆炸](http://php.net/manual/en/function.explode.php)一样：

```
//------------------------------------------------------------------------------
// Name: explode
// Desc: Returns an array of strings, each of which is a substring of <s>
//       formed by splitting it on boundaries formed by the string <delimiter>.
//       (similar to PHP's explode)
//------------------------------------------------------------------------------
inline std::vector<std::string> explode(const std::string &delimeter, const std::string &s, int limit) {
    std::vector<std::string> results;

    if(!delimeter.empty()) {    

        std::string::size_type start = 0;
        std::string::size_type end   = s.find(delimeter, start);

        if(limit <= 0) {
            while(end != std::string::npos) {           
                results.push_back(s.substr(start, end - start));
                start = end + delimeter.size();
                end = s.find(delimeter, start);

                if(start == s.size() && end == std::string::npos) {
                    results.push_back(std::string());   
                }
            }
        } else if(limit > 0) {
            while(--limit > 0 && end != std::string::npos) {
                results.push_back(s.substr(start, end - start));
                start = end + delimeter.size();
                end = s.find(delimeter, start);

                if(start == s.size() && end == std::string::npos) {
                    results.push_back(std::string());   
                }
            }
        }

        if(start != s.size()) {
            results.push_back(s.substr(start)); 
        }

        while(limit++ < 0 && !results.empty()) {
            results.pop_back();
        }
    }

    return results;
} 
```

或者没有限制：

```
//------------------------------------------------------------------------------
// Name: explode
// Desc: Returns an array of strings, each of which is a substring of <s>
//       formed by splitting it on boundaries formed by the string <delimiter>.
//       (similar to PHP's explode)
//------------------------------------------------------------------------------
inline std::vector<std::string> explode(const std::string &delimeter, const std::string &s) {
    return explode(delimeter, s, 0);
} 
```

用法如下所示：

```
std::vector<std::string> x = explode(",", "THIS,IS,A,TEST"); 
```

# java - JodaTime DateTime，ISO8601 GMT 日期格式

> ID：14752782
> 
> 赞同：26
> 
> 时间：2013-02-07T13:53:50.897
> 
> 标签：java, jodatime

我怎样才能得到以下格式：

```
2015-01-31T00:00:00Z 
```

（ISO8601 GMT 日期格式）

在 joda time (java) 中的 DateTime 对象之外？例如。

```
DateTime time = DateTime.now();
String str = // Get something like 2012-02-07T00:00:00Z 
```

谢谢！:)

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-07T14:12:29.107

JODA [Javadoc](http://joda-time.sourceforge.net/apidocs/org/joda/time/base/AbstractInstant.html#toString%28%29)指示输出 ISO8601`toString`中`DateTime`的日期。如果您需要将所有时间字段清零，请执行以下操作：

```
final DateTime today = new DateTime().withTime(0, 0, 0, 0);
System.out.println(today); 
```

这将包括输出字符串中的毫秒数。要摆脱它们，您需要使用@jgm 在此处建议的格式化程序。

如果您希望它与您在这篇文章中要求的格式（使用文字`Z`字符）匹配，这将起作用：

```
System.out.println(today.toString(DateTimeFormat.forPattern("yyyy-MM-dd'T'HH:mm:ss'Z'"))); 
```

如果您需要将值设置为 UTC，请按如下方式对其进行初始化：

```
final DateTime today = new DateTime().withZone(DateTimeZone.UTC).withTime(0, 0, 0, 0); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-25T07:06:54.977

@jgm 在文档中，`ISODateTimeFormat.dateTime()`有描述

> 返回一个包含完整日期和时间的格式化程序，由“T”分隔 (yyyy-MM-dd'T'HH:mm:ss.SSSZZ)。

但是如果您设置时区，例如，

```
DateTimeFormatter fmt = ISODateTimeFormat.dateTime();  
System.out.println(fmt.print(new DateTime().toDateTime(DateTimeZone.UTC))); 
```

它将以 Z 结尾。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-07T13:59:17.387

使用[ISODateTimeFormat](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/ISODateTimeFormat.html)

```
DateTime dt = new DateTime();
DateTimeFormatter fmt = ISODateTimeFormat.dateTimeNoMillis();
String str = fmt.print(dt); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T13:56:44.710

设置一个`DateTimeFormatter`：

```
DateTimeFormatter formatter = DateTimeFormat.forPattern("yyyy-MM-dd'T'HH:mm:ssZ");
formatter.print(time); 
```

# android - 安卓锁屏铃声可用吗？

> ID：14752783
> 
> 赞同：0
> 
> 时间：2013-02-07T13:53:52.300
> 
> 标签：android, view, frameworks, lockscreen

为了给应用程序一种更像 android 的感觉，我想将在两种“方式”之间进行选择的风格切换为锁屏环之类的东西，您可以在其中向右/向左拖动中心。我用谷歌搜索了很多，我唯一“发现”的是 Android 代码必须隐藏在框架 APK 文件中的某个地方，所以我想也许你们知道我在哪里可以找到类似的东西，或者是第 3 方“在免费许可下查看“？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:10:38.963

您可以使用适用于 Android 3.0 及更高版本的开源[GlowPadView](https://github.com/nadavfima/GlowPadView/)。Gingerbread 及以下 AFAIK 没有可用的实现，您必须自己制作一个。

# c++ - 不使用范围运算符无法访问 C++ 命名空间变量

> ID：14752795
> 
> 赞同：2
> 
> 时间：2013-02-07T13:54:17.607
> 
> 标签：c++, namespaces

我无法理解命名空间。A.cpp：

```
#include <iostream>
namespace A { int pause = 8; }
int main() {
    std::cout << A::pause << std::endl;
    return 0;
} 
```

它打印出来`8`。但是，现在我添加`using namespace A`并更改`A::pause`为 just `pause`。A.cpp：

```
#include <iostream>
namespace A { int pause = 8; }
using namespace A;
int main() {
    std::cout << pause << std::endl;
    return 0;
} 
```

现在，我得到编译错误：

```
A.cpp: In function ‘int main()’:
A.cpp:5: error: reference to ‘pause’ is ambiguous
/usr/include/unistd.h:507: error: candidates are: int pause()
A.cpp:2: error:                 int A::pause
A.cpp:5: error: reference to ‘pause’ is ambiguous
/usr/include/unistd.h:507: error: candidates are: int pause()
A.cpp:2: error:                 int A::pause 
```

有人可以解释出了什么问题吗？我想`using namespace A`可以让我省略`A::`，类似于如何`using namespace std`让你省略`std::`。我尝试将线路移入，`main()`但收到相同的错误消息。请注意，我特意选择了变量名`pause`，因为它显然与 in 中`pause()`声明的冲突`iostream`。任何反馈表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T13:56:36.050

编译器会告诉您问题所在。它有两种可能的解决途径`pause`——一种是通过`A::pause`，另一种是通过在任何命名空间`pause()`中定义`<unistd.h>`并存在于任何命名空间之外的函数。编译器无法决定使用哪个，所以你必须帮助它。

如果您在`A`命名空间内为变量选择了一个不太通用的名称，例如`pause_val`，您可以在没有命名空间范围的情况下输出它

```
#include <iostream>
namespace A { int pause_val = 8; }
using namespace A;
int main() {
    std::cout << pause_val << std::endl;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T13:56:56.133

因为有一个名为的*系统函数*`pause`。如果您更仔细地检查错误消息，您会看到它也在 system header 中定义`<unistd.h>`。

系统`pause`函数位于全局命名空间中，当您这样做时，您也将命名空间`using namespace A`中的符号拉`A`入全局命名空间。所以现在你`pause`在全局命名空间中有两个符号，这是编译器抱怨的。

如果您调用 function ，它*可能会*起作用`pause`，因为只能调用函数而不是整数变量。但是，您也可以将函数用作变量（作为函数指针），这会导致这种冲突。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T13:57:13.947

正如错误消息所说，在您添加`using`语句后，全局命名空间中命名的**内容不止一个。**`pause`这就是为什么`using namespace whatever;`在全球范围内是一个坏主意。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-07T14:06:18.443

> 有人可以解释出了什么问题吗？我认为使用命名空间 A 允许我省略 A::，类似于使用命名空间 std 允许你省略 std::

是的，确实如此，但是你也有*所有其他的东西叫做`pause`*竞争竞争。

这就是为什么`using namespace`经常不受欢迎的原因。

# automated-tests - 机器人框架的 [文档] 中的测试用例级变量

> ID：14752796
> 
> 赞同：4
> 
> 时间：2013-02-07T13:54:17.567
> 
> 标签：automated-tests, robotframework

我无法让测试级别变量出现在文档中。

假设我有这个测试套件：

```
| *Variables* |
| ${SystemUnderTest} = | Staging

| *testcase* |
| Device Test |
| | Set Test Variable   | ${device}      | iPhone
| | [Documentation]     |  Device is: ${device} |
| | ...                 |  System is: ${SystemUnderTest} |
| | No Operation 
```

这会产生这个日志：

```
TEST CASE: Device TestExpand All
Full Name:  T.Device Test
Documentation:  
Device is: ${device} System is: Staging 
```

请注意，套件级别变量得到了正确处理，但测试级别 1 没有。
如何让所有变量得到平等对待？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-17T13:04:04.773

从 robotframework 2.7 开始，有一个名为 的内置关键字`Set test documentation`，可用于替换或附加到现有文档。这*不会*影响控制台中的输出，但更改*会*反映在日志和报告中。

例如：

```
| *Variables* |
| ${SystemUnderTest} = | Staging

| *testcase* |
| Device Test |
| | Set Test Variable   | ${device}      | iPhone
| | [Documentation]     |  Device is: ${device} |
| | ...                 |  System is: ${SystemUnderTest} |
| | Substitute vars in documentation
| | No Operation

| *Keywords* |
| Substitute vars in documentation
| | ${doc}= | replace variables | ${test documentation}
| | set test documentation | ${doc} 
```

有关详细信息，请参阅[http://robotframework.googlecode.com/hg/doc/libraries/BuiltIn.html?r=2.7.7#Set%20Test%20Documentation](http://robotframework.googlecode.com/hg/doc/libraries/BuiltIn.html?r=2.7.7#Set%20Test%20Documentation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T14:49:02.563

这个解决方案对我来说有点骇人听闻，但它确实为您提供了您想要的功能。

## 测试.txt

```
| *Setting*   | *Value*            |
              # This should start as the value for your first test
| Suite Setup | Set Suite Variable | ${device} | foo

| *Test Case* | *Action* | *Argument*
#
| T100 | [Documentation] | Should be foo: ${device}
       # Do some stuff
|      | No Operation
       # This setups the device name for the next test.
|      | Set Suite Variable | ${device} | bar 
#
| T101 | [Documentation] | Should be bar: ${device}
       # Do some stuff
|      | No Operation
|      | Set Suite Variable | ${device} | bing
#
| T102 | [Documentation] | Should be bing: ${device}
       # Do some stuff
|      | No Operation 
```

当我运行该套件时，我得到以下输出：

```
==============================================================================
Test                                                                          
==============================================================================
T100 :: Should be foo: foo                                            | PASS |
------------------------------------------------------------------------------
T101 :: Should be bar: bar                                            | PASS |
------------------------------------------------------------------------------
T102 :: Should be bing: bing                                          | PASS |
------------------------------------------------------------------------------
Test                                                                  | PASS |
3 critical tests, 3 passed, 0 failed
3 tests total, 3 passed, 0 failed
============================================================================== 
```

在上一个测试结束时设置设备变量有点不干净，但只要你留下评论，它应该一点也不不清楚。

# git - 删除“in-pack”中的文件

> ID：14752800
> 
> 赞同：1
> 
> 时间：2013-02-07T13:54:30.343
> 
> 标签：git

我有一个 git repo，我做了一些更改（添加 svn，...）。

使用 svn 之前的大小小于 1 MB，现在是 38 MB。

如何去除多余的尺寸？

```
$ git count-objects -v
count: 0
size: 0
in-pack: 1041
packs: 1
size-pack: 37475
prune-packable: 0
garbage: 0 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-08T21:12:45.410

如果您不需要所有历史记录，则可以`git clone --depth DEPTH`仅获取**DEPTH**最近的提交。但是你失去了你的历史......

您是在本地工作还是通过网络工作？

# java - .Net 和 Java 应用程序之间的单点登录

> ID：14752801
> 
> 赞同：2
> 
> 时间：2013-02-07T13:54:33.140
> 
> 标签：java, .net, iis, glassfish, single-sign-on

我们在 IIS 上使用基于表单的身份验证对数据库（不是 AD）使用 asp 和 asp.net 编写的遗留应用程序。我们正在 glassfish 上编写一个新的 Java 应用程序，我们需要一个单点登录解决方案来验证用户身份，以便他们可以在两者之间无缝移动，而无需再次登录。

这个问题有什么安全的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T14:13:00.787

我认为从长远来看，最好的方法是决定 SSO 技术/实现，然后*更改遗留应用程序*以使用它。我知道更改遗留应用程序可能会很痛苦，但如果它是实用的，你应该这样做。

* * *

**更新**

您不必完全重写您的旧应用程序。如果您可以识别出也支持旧语言的 SSO 技术，那么您可能只需重写登录页面和（可能）访问控制和/或本地帐户管理就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:12:47.530

看看 spring 安全性（如果你不反对在你的 java 应用程序中使用 spring）。它们支持数十种解决方案，可能是您用于 ASP 应用程序的任何解决方案。[http://static.springsource.org/spring-security/site/](http://static.springsource.org/spring-security/site/)

或者，您可以使用 apache shiro [http://shiro.apache.org/](http://shiro.apache.org/)，它也支持几乎所有的安全性。

我建议查看其中一个是否支持您已经在旧应用程序上使用的内容，让 java 应用程序支持您现有的安全机制可能会更容易，而不是尝试将新的安全层反向移植到 ASP 中。

# python - 在 res_config 中设置默认持续时间

> ID：14752803
> 
> 赞同：2
> 
> 时间：2013-02-07T13:54:40.750
> 
> 标签：python, default, openerp

我有一个模块，它有一个创建日期（当然是创建日期）和截止日期。

问题是我希望能够根据它的创建日期为这个截止日期设置一个默认值。但我希望能够从（比如说）res_config 动态配置它。

例如

如果我将 res_config 中的默认值配置为 5 天，我希望将截止日期的默认值填充为创建日期前 5 天的日期。

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:08:52.483

我设法使用模型做到了这一点`ir.configure_parameter`。

在 res_config.py 中：

```
class my_configuration(osv.osv_memory):
    _inherit = ['res.confi.settings']
    _columns = {
       'default_deadline' : fields.integer('Days per default', help="""Help field"""),
    }
    ...
    def set_default_deadline(self, cr, uid, ids, context=None):
        config = self.browse(cr, uid, ids)
        config = config and config[0]
        val = '%s' %(config.default_deadline) or '10'
        self.pool.geet('ir.config_parameter').set_param(cr,uid, 'key_value', val)
        return True 
```

我们已经创建了一个系统参数。它实际上是作为从 'key_value' 到字符串 val 的映射创建的，因此我们必须在必要时将其转换为所需的类型。就我而言，y 创建了一个函数来获取我的模块中的截止日期：

```
def _get_deadline_date(self, cr, uid, context=None):
    val = self.pool.get('ir.config_parameter').get_param(cr, uid, 'key_value')
    try:
        val = int(val)
    except: 
        # Just in case...
        val = 30
    return (datetime.now() + timedelta(days=val)).strftime('%Y,%m,%d')

_defaults = {
    'deadline_date': lambda s, cr, uid, c: s._get_deadline_date(self, cr, uid,     context=c),
} 
```

谢谢，希望对你有帮助！

# javascript - 有什么方法可以避免 Javascript 对象中的所有“this”？

> ID：14752814
> 
> 赞同：1
> 
> 时间：2013-02-07T13:55:14.850
> 
> 标签：javascript, object

在使用构造函数定义 JS 对象时，有没有办法避免对每个对象属性都使用“this”？看起来非常难看。例如

```
function Thingy(abc) {
  this.var1 = abc;
  this.var2 = this.var1 + " hello ";
  // etc
}

var myObj = new Thingy(); 
```

看来我应该能够使用“var var2”然后省略“this”而只引用“var2”，但我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T14:00:35.320

您可以使用任何您喜欢的对象，并`return`在最后简单地使用它，例如：

```
function Thingy(abc) {
  var thingy = {};
  thingy.var1 = abc;
  thingy.var2 = thingy.var1 + " hello ";
  return thingy;
} 
```

或者

```
function Thingy(abc) {
  var thingy = {
    var1: abc,
    var2: abc + " hello "
  };
  return thingy;
} 
```

或者

```
function Thingy(abc) {
  return {
    var1: abc,
    var2: abc + " hello "
  };
} 
```

或者

```
function Thingy(abc) {
  var var1 = abc,
      var2 = var1;
  var2 += " hello ";
  return {
    var1: var1,
    var2: var2
  };
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T14:06:35.263

好吧，恐怕您会遇到这种语言的设计方式。

但是在某种意义上，您可以使用`var`构造函数中的普通语句。在那里创建的任何函数都可以访问包含这些属性的闭包：

```
function Thingy(abc) {
    var var1 = abc;
    this.func1 = function(str) {return var1 + ", hello";};
}

var thing1 = new Thingy("Dan");
thing1.func1();  // => "Dan, hello" 
```

请注意，这是将完全私有变量封装在对象中的方法，因此它通常是一种有用的技术。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T13:57:15.583

不，没有办法避免它。您需要使用`this`将变量分配给对象。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-07T14:02:48.957

尝试

```
function Thingy(abc) {
  with(this)
  {
    var1 = abc;
    var2 = this.var1 + " hello ";
  // etc
  }
} 
```

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/with](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/with)

# php - 不使用表显示 php+mysql 行

> ID：14752816
> 
> 赞同：0
> 
> 时间：2013-02-07T13:55:16.087
> 
> 标签：php, html, mysql, css

如何在不使用表的情况下显示 mysql 中的行？就像 twitter feed 和 facebook 上的那些。是否可以使用`<span>`or`<div>`或使用无序列表？

我想显示图片缩略图、姓名、他们的帖子。

到目前为止，我的代码只显示帖子本身。

```
$sql_check = mysql_query("SELECT * FROM messages order by msg_id desc");
if(isset($_POST['message']))
{
    $message = $_POST['message'];

    mysql_query("INSERT INTO messages(msg, userid) values ('$message', ". $s_id . ")");

    $sql_msg = mysql_query("SELECT msg ,msg_id FROM messages where userid = $s_id order by msg_id desc");

    $row = mysql_fetch_array($sql_msg);
}

while($row = mysql_fetch_array($sql_msg)){
    <table cellpadding="0" cellspacing="0" width="500px">
        <tr>
            <td style="padding:14px;" class="comment_box" align="left"><?php echo $row['msg']; </td>
        </tr>
    </table>
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:06:19.057

代替表，使用`div`或`span`...

```
$sql_check = mysql_query("SELECT * FROM messages order by msg_id desc");
if(isset($_POST['message']))
{
$message = $_POST['message'];

mysql_query("INSERT INTO messages(msg, userid) values ('$message', ". $s_id . ")");

$sql_msg = mysql_query("SELECT msg ,msg_id FROM messages where userid = $s_id order by msg_id desc");

$row = mysql_fetch_array($sql_msg);
}

while($row = mysql_fetch_array($sql_msg)){ ?>

        <div><?php echo $row['msg']; ?> </div>
<?php
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:57:38.813

根据最适合相关内容的内容选择您的标记。如果您有表格数据，那么它属于表格。列表应该放在列表中。不要基于一些“tagX 不好”的想法或因为它看起来是一种特定的方式而选择，因为外观可以改变。最终，任何东西都可以看起来像其他任何东西，所以只需选择合适的基础。

表格不是我对此类内容的首选标记，但可以接受。

[http://jsfiddle.net/dcWsp/](http://jsfiddle.net/dcWsp/)

```
table, tbody {
    display: block;
}

tr {
    display: block;
    overflow: hidden;
    margin: 1em 0;
}

td {
    display: block;
}

td.avatar {
    float: left;
    margin-right: 1em;
}

td.author {
    font-weight: bold;
}

<table>
    <!-- loop starts here -->
    <tr>
        <td class="avatar"><img src="http://placehold.it/100x100" /></td>
        <td class="author">Batman</td>
        <td class="message">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus porta elit vel ante hendrerit facilisis. Curabitur aliquam sollicitudin diam, id posuere elit consectetur nec. Vestibulum quam dolor, feugiat in posuere a, posuere imperdiet tellus. Mauris sed ligula vitae urna consequat aliquet.</td>
    </tr>
    <!-- loop ends here -->
</table> 
```

这是另一种标记和样式的方法，看起来几乎相同：

[http://jsfiddle.net/dcWsp/2/](http://jsfiddle.net/dcWsp/2/)

```
article {
    overflow: hidden;
    margin: 1em 0;
}

img.avatar {
    float: left;
    margin: 0 1em 1em 0;
}

h1.author {
    font-weight: bold;
}

<section class="comments">
    <!-- loop starts here -->
    <article>
        <h1 class="author"><img src="http://placehold.it/100x100" class="avatar" /> Batman</h1>
        <p class="message">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus porta elit vel ante hendrerit facilisis. Curabitur aliquam sollicitudin diam, id posuere elit consectetur nec. Vestibulum quam dolor, feugiat in posuere a, posuere imperdiet tellus. Mauris sed ligula vitae urna consequat aliquet.</p>
    </article>
    <!-- loop ends here -->
</section> 
```

# c# - 具有不同文化的日期时间值格式不正确

> ID：14752821
> 
> 赞同：1
> 
> 时间：2013-02-07T13:55:31.857
> 
> 标签：c#, datetime, localization, cultureinfo

我在 Thread 文化方面遇到了一点问题，并获得了正确显示的日期。我正在重载 DateTime 类的 ToString() 方法。

使用文化“en-CA”，我的日期以正确的格式“yyyy/MM/dd”出现，但使用文化“fr-CA”，我的日期出现“yyyy-MM-dd”

我做了一些单元测试来显示这个问题。英语测试有效，但法语总是失败。

即使我将 GetDateInStringMethod 更改为 .ToShortDateString。我仍然遇到同样的问题。

```
[Test()]
public void ValidInEnglish()
{
    Thread.CurrentThread.CurrentCulture = new CultureInfo("en-CA");
    Thread.CurrentThread.CurrentCulture.DateTimeFormat.ShortDatePattern = Utility.DatePattern;
    DateTime? currentDate = new DateTime(2009,02,7);
    string expected = "2009/02/07";
    string actual = DateUtils.GetDateInString(currentDate);

//This works
    Assert.AreEqual(expected, actual);
}

[Test()]
public void ValidInFrench()
{
    Thread.CurrentThread.CurrentCulture = new CultureInfo("fr-CA");
    Thread.CurrentThread.CurrentCulture.DateTimeFormat.ShortDatePattern = Utility.DatePattern;
    DateTime? currentDate = new DateTime(2009, 02, 7);
    string expected = "2009/02/07";
    string actual = DateUtils.GetDateInString(currentDate);
// This doesn't work
    Assert.AreEqual(expected, actual);
}

public static string GetDateInString(DateTime? obj)
{
    if (obj == null || !obj.HasValue)
    {
        return string.Empty;
    }

    return obj.Value.ToString(Utility.DatePattern);
}

public const string DatePattern = "yyyy/MM/dd"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T14:06:46.157

更改此行：

```
return obj.Value.ToString(Utility.DatePattern); 
```

对此：

```
return obj.Value.ToString(Utility.DatePattern, CultureInfo.InvariantCulture); 
```

在这里阅读：[System.Globalization.InvariantCulture](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.invariantculture.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T14:14:07.477

这不起作用，因为使用法语文化默认使用日期时间格式化程序`-`而不是`/`用作分隔符。

如果您想保持您的日期相同，无论文化如何，`[CultureInfo.InvariantCulture](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.invariantculture.aspx)`

如果您想使用法语格式，请将您的预期测试结果更改为`"2009-02-07"`.

如果您正在寻找更多信息，请查看[此 msdn 链接](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.invariantculture.aspx)。

如果您想要个人推荐一个用于处理令人敬畏的全球化的库，那么我会推荐[Noda Time](http://noda-time.blogspot.com/)。

# jmeter - 重复使用提取器？

> ID：14752832
> 
> 赞同：2
> 
> 时间：2013-02-07T13:56:23.213
> 
> 标签：jmeter

我使用模块控制器来调用测试片段。这是跨多个线程组重用控制器和采样器的好方法。

我有一组大约十几个提取器（CSS 和 RegEx），我想将它们重用于不同的 HTTP 采样器。（采样器会有所不同，但我要针对每个运行的提取器是相同的。）

有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T14:29:26.787

您有 2 个选项：

*   如果适用，您可以使用范围，请参阅[http://jmeter.apache.org/usermanual/test_plan.html#scoping_rules](http://jmeter.apache.org/usermanual/test_plan.html#scoping_rules)

*   否则将您的 CSS 表达式放在变量中并在提取器中使用它们

# php - 看似随机的 SoapFault：不是有效的方法

> ID：14752837
> 
> 赞同：3
> 
> 时间：2013-02-07T13:56:34.673
> 
> 标签：php, soap, wsdl, zend-soap

我的 SOAP 解决方案出现问题。有时我会收到一条错误消息：

```
Function (functionA) is not a valid method for this service 
```

**8 个月后编辑** 虽然我找不到问题的原因，但我能够解决它。每当我收到来自 API 的响应时，我都会检查 SoapFault 并发送另一个相同的请求并使用第二次返回的答案。（作为答案发布）

这发生在来自 PHP 的调用中，例如：

```
functionA() - expected response
functionA() - expected response
functionA() - SoapFault
functionA() - expected response 
```

在上述所有调用中都将得到相同的结果，并且使用相同的参数（如果有的话）。因为它几乎适用于所有调用，所以我知道该函数和相应的 WSDL 就在那里。

我认为问题在于缓存没有该功能的旧版本。我尝试使用以下方法禁用缓存：

```
ini_set("soap.wsdl_cache_enabled", "0"); 
```

并在每次调用时添加一个随机虚拟参数，并在我使用 Zend_SoapClient 时禁用它。

```
'cache_wsdl' = false 
```

我希望有人可以指出我的任何方向或对可能的原因有任何直接的建议。

我的代码如下所示：

```
public function __construct()
{
        $wsdl =  "http://catlovers.nl/index.php?wsdl&dummy=".rand(1000,9999);

        $this->_client = new Zend_Soap_Client($wsdl, array(
            'soapVersion' => SOAP_1_1,
            'cache_wsdl' => false 

        ));
        $this->_client->setWsdlCache(false);
}

function __call($name, $arguments) // Calls are made this way
{
    array_unshift($arguments, $this->_apiKey, $this->_user, $this->_password);
    return call_user_func_array(array($this->_client, $name), $arguments);
}
public function getCat()
{
    return ($this->__call('getCat',array()));
} 
```

在“另一边”我有：

```
$server = new nusoap_server();

$server->wsdl->addComplexType('Cat', ....

$server->register( 'getCat', return Cat ...

function getCat($apikey, $email, $password)
{
  $cat = $db->get("redCat");
  return $cat;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T09:08:20.877

首先，尝试使用内置`SoapClient`类调用函数并打印调试信息：

```
$wsdl =  "http://abcd.com/index.php?wsdl&dummy=".rand(1000,9999);
$soap = new SoapClient($wsdl, array(
   'cache_wsdl' => WSDL_CACHE_NONE,
   'trace' => true,
));

try {
    var_dump($soap->functionA());
} catch ( Exception $ex ) {
    var_dump($ex);
}
var_dump($soap->__getLastRequest());
var_dump($soap->__getLastRequestHeaders());
var_dump($soap->__getLastResponse());
var_dump($soap->__getLastResponseHeaders()); 
```

这样你就知道问题出在哪里了。如果一直一切正常，问题就出在 Zend 的课堂上。如果没有，请查看什么服务响应。可能存在一些服务器端错误或具有此类 ID 的虚拟生成失败

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:51:50.930

我猜您的问题与 nusoap 有关，因为多年来我一直在使用 PHP soap 服务器/客户端，但我从未遇到过这个问题。（但我总是对 nusoap lib 有奇怪的问题）

目前我正在使用[jool.nl web service helper](http://www.jool.nl/jool-tech-zone/webservice-helper/)，它非常强大但整洁且面向对象的库不仅使编码更容易和更干净，而且还为您提供面向对象的web服务设计方法。它还为带有文档的 Web 服务提供了一个很好的 Web 界面。

由于这个库使用内部 PHP SOAP 服务器，我很确定你的问题将会消失。

我建议你试一试，我敢肯定，如果你使用这个库创建你的第一个 Web 服务，你将永远不会尝试其他东西。

我希望这可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-11T14:46:27.050

所以在尝试其他解决方案后问题仍然存在，所以我永远无法找到问题的根本原因。另一方面，我找到了一种方法来解决自我编写它以来一直存在的问题。这就是我使用用户、密码和密钥对 API 的调用以进行身份​​验证的样子。

```
function __call($name, $arguments)
{
    /* Using the stored data to ensure that the user is allowed to access */
    /* ............... */

    array_unshift($arguments, $this->_apiKey, $this->_user, $this->_password);
    $call = call_user_func_array(array($this->_client, $name), $arguments);
    if(isset($call->faultstring) && substr(trim($call->faultstring),0,7) == "Function")
    {
        $recall = call_user_func_array(array($this->_client, $name), $arguments);
        return $recall;
    }
    else
        return $call;
} 
```

这基本上是：如果第一次不起作用，请再试一次。

# php - 循环遍历复选框数组

> ID：14752843
> 
> 赞同：4
> 
> 时间：2013-02-07T13:56:49.630
> 
> 标签：php

我有一个表格，其中包含从表格中填充的行。每行都有一个“复选框”，用户可以检查或不检查。

提交表单后，我希望能够读取已选中的复选框并将结果插入数据表中。

到目前为止我的代码形式：

```
<form method="post" name="form1" action="<?php echo $editFormAction; ?>">
<table
<?php do { ?>
<tr>
<td>input type="text" name="InspectRoomNo" value="<?php print $row_InspectItems['AuditItemNo']; ?>"></td>
<td>php echo $row_InspectItems['AuditItem']; ?>td>
<td>input name="check[]" type="checkbox"  ></td>
</tr>
<?php } while ($row_InspectItems = mysql_fetch_assoc($InspectItems)); ?>
<input type="submit" value="Insert record">
</table> 
```

插入：从表中获取 $Items

```
while($row = mysql_fetch_assoc($Items))
{
$array[] = $row['AuditItem'];
}

foreach($array as $id) {
$AuditItemID = mysql_real_escape_string($id);

if(isset($_POST['check'])){
$Checked = mysql_real_escape_string($_POST['check'][$row]);
}
} 
```

我遇到的问题是所有复选框的返回值都是 true，即使未选中复选框也是如此。

谁能帮我解决这个问题。

非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T14:03:16.650

像这样做：

```
if(!empty($_POST['check'])) {
    foreach($_POST['check'] as $check) {
        echo $check; 
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T14:02:19.393

您应该将项目 ID 放在复选框名称中：

```
<td><input name="check[<?= $row_InspectItems['AuditItem']; ?>]" type="checkbox" /></td> 
```

然后，您可以简单地对其进行迭代：

```
foreach ($_POST['check'] as $id => $value) {
    // do stuff with your database
} 
```

我假设运行这个脚本的人是值得信任的，因为伪造 id 列表很容易；确保当前用户有权更新这些记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T14:06:46.560

发生了什么，只有选中的复选框被发送到服务器，所以你会看到你的`$_POST['check']`数组（这是一个数组！）小于你在屏幕上显示的项目数。

您应该添加您的 ID，以便您知道检查了哪些复选框并调整您的 php 处理代码以处理数组而不是单个值。

您还覆盖了`InspectRoomNo`每一行，因此您也应该在那里使用一个数组。

表单端看起来像：

```
<td><input type="text" name="InspectRoomNo[<?php echo row_InspectItems['AuditItemNo']; ?>]" value="<?php print row_InspectItems['AuditItemNo']; ?>"></td>
<td><?php echo $row_InspectItems['AuditItem']; ?></td>
<td><input name="check[<?php echo row_InspectItems['AuditItemNo']; ?>]" type="checkbox"  ></td> 
```

# php - 转移到 mysqli，mysql_result

> ID：14752844
> 
> 赞同：2
> 
> 时间：2013-02-07T13:56:54.287
> 
> 标签：php, mysql, mysqli

我正在将我的项目从 mysql 转换为 mysqli，我的问题是它`mysqli_result()`不适用于我的旧代码。我的旧代码是：`mysql_result($res,0,0);`

当我尝试`mysqli_result()`使用旧代码添加时，它不起作用。

还有另一种方法可以使用我的旧参数吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T13:59:36.653

`mysqli_result()`不适用于您的旧参数，因此您需要创建一个新函数，这是一个适用于您的旧参数的函数的代码：

```
function mysqli_result($res, $row, $field=0) { 
    $res->data_seek($row); 
    $datarow = $res->fetch_array(); 
    return $datarow[$field]; 
} 
```

# android - 内存泄漏图像库 Android

> ID：14752851
> 
> 赞同：0
> 
> 时间：2013-02-07T13:57:08.263
> 
> 标签：android, bitmap, weak-references

我正在尝试在 android 中实现一个图片库。基于[http://www.mobisoftinfotech.com/blog/android/android-gallery-widget-example-and-tutorial/](http://www.mobisoftinfotech.com/blog/android/android-gallery-widget-example-and-tutorial/)的代码，我改变了一些细节。

我正在使用 Wea​​kReference，似乎当我有太多位图时，垃圾收集器会破坏我的弱引用。我该如何处理？

我通过这个函数得到我的位图：

```
 public static WeakReference<Bitmap> getBitmap(String imageName, int width,
        int height) {
    String pathToImage = getPathToImage(imageName);
    Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(pathToImage, options);

    /*
     * Calculate inSampleSize
     */
    options.inSampleSize = calculateInSampleSize(options, width, height);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;

    WeakReference<Bitmap> scaledBitmap = new WeakReference<Bitmap>(
            BitmapFactory.decodeFile(pathToImage, options));
    return scaledBitmap;
} 
```

而且我采用了 320x480 的解决方案，所以我认为它不是那么大......

当图库中的图片超过 3 张时，其中一些不会显示。

画廊教程不是很好吗？还有其他方法可以实现吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:06:14.547

你应该看看 lrucache 类，而不是使用软引用（它在蜂窝中可用，但它是 android-support 库的一部分。

您可以在此处阅读更多相关信息：http: [//developer.android.com/training/displaying-bitmaps/cache-bitmap.html](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html) 这非常方便：使用它，您不必自己处理弱引用的内存： -)

# javascript - MVC 4.0 javascript 不起作用

> ID：14752854
> 
> 赞同：0
> 
> 时间：2013-02-07T13:57:12.197
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-4

有一个移动应用程序并想运行一个 javascript。将脚本（“startstop”）放在一个包中：

```
 public static void RegisterBundles(BundleCollection bundles)
    {
        bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                    "~/Scripts/jquery-1.*"));

        bundles.Add(new ScriptBundle("~/bundles/startstop").Include(
                    "~/Scripts/startstop*"));
    ... 
```

在视图中包含捆绑包：

```
@section Scripts {
    @Scripts.Render("~/bundles/startstop")    
} 
```

简化脚本：

```
$(document).ready(function () {
    alert('Hello');
}); 
```

当我运行页面/应用程序时，*startstop-script*中的 Action(s) 没有被触发/执行 ( `IExporer/Chrome`)。但是，当我复制生成的页面的源代码（包括脚本和内容）并在`IExporer/ Chrome`此 startstop 脚本中打开保存的（复制的）页面时，运行良好。

有人知道可能出了什么问题吗？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:00:48.670

如果脚本文件名以 .min.js 结尾，则会被忽略。如果是这种情况，请尝试将其添加到 RegisterBundles 函数的顶部。

```
bundles.IgnoreList.Clear(); 
```

编辑：澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T07:23:42.400

不知道为什么，但问题是由@section.Scripts 引起的：

```
@section Scripts {
    @Scripts.Render("~/bundles/startstop")    
} 
```

如果没有这个部分，*startstop-script*可以正常工作：

```
@Scripts.Render("~/bundles/startstop") 
```

做这项工作。第一种情况与第二种情况略有不同：

```
 </div>
  </div>
<script src="/Scripts/jquery-1.7.2.js"></script>
<script src="/Scripts/jquery.mobile-1.1.0.js"></script>
<script src="/Scripts/jquery-1.7.2.js"></script>
<script src="/Scripts/startstop.js"></script>
</body></html> 
```

而工作变体看起来像：

```
 <script src="/Scripts/jquery-1.7.2.js"></script>
     <script src="/Scripts/startstop.js"></script>
     </div>
  </div>
<script src="/Scripts/jquery-1.7.2.js"></script>
<script src="/Scripts/jquery.mobile-1.1.0.js"></script>
</body></html> 
```

仍然让我感到困惑，但它有效......！

# android - 编辑 android init.rc 以重启第三方守护进程

> ID：14752857
> 
> 赞同：2
> 
> 时间：2013-02-07T13:57:23.660
> 
> 标签：android, c++, linux, android-ndk, daemon

我有一个用 C++ 编写的守护程序，在 android 的后台运行。

我希望该守护程序在崩溃或意外事件时重新启动，而不添加独立的崩溃保护。做这个的最好方式是什么 ？我希望编辑init.rc。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T14:52:05.400

您应该在*init.rc*文件中指定：

```
service <name> <pathname> [ <argument> ]
     critical
     <option>
     <option>
     ... 
```

我认为在你的情况下你不应该指定选项。但是，您可以[在此处](https://github.com/android/platform_system_core/blob/master/init/readme.txt)找到选项列表。编辑 init.rc 后运行`make`命令。

# java - 在 JPanel 中插入 JLabel 不会将其置于顶部

> ID：14752860
> 
> 赞同：0
> 
> 时间：2013-02-07T13:57:39.840
> 
> 标签：java, swing, jpanel, jlabel

我正在尝试在 JPanel 元素中插入包含图像的 JLabel。结果有点令人惊讶，因为图像（即 JLabel）没有直接放在 JPanel 的顶部，而是前面有一个空行......

有没有办法把它放在 (0,0) 而不是 (0,1) ？

这是我的代码：

```
Image i; // une image donnée

JFrame f = new JFrame();
f.setTitle("test");
f.setSize(i.getWidth(null), i.getHeight(null));
f.setLocationRelativeTo(null);
f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

f.setResizable(false);
f.setAlwaysOnTop(false);
f.setUndecorated(false);

JPanel pan = new JPanel();

JLabel l = new JLabel(new ImageIcon(i));
pan.add(l);

f.setContentPane(pan);     
f.setVisible(true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:58:27.110

## （更新帖子）

尝试使用`f.add(pan)`而不是`f.setContentPane(pan)`.

## （旧帖）

```
JLabel l = new JLabel(new ImageIcon(i));
f.add(l); 
```

我认为您打算将其添加到面板中：

```
JLabel l = new JLabel(new ImageIcon(i));
pan.add(l); 
```

# javascript - 简单的谷歌地图方向链接

> ID：14752867
> 
> 赞同：1
> 
> 时间：2013-02-07T13:58:07.997
> 
> 标签：javascript, html, google-maps

好的，我正在玩一个链接，一旦点击我希望它将手机从 wepapp 转移到谷歌地图或在线版本。的每个位置都会有所不同，具体取决于 MySQL 的状态，因此编码将如下所示：

```
 <a href="https://maps.google.co.uk/maps?hl={QTE.business_address},{QTE.business_postcode}" target="_blank" style="color:#999"> 
```

如您所见，{QTE.business_address} 带来了地址和 {QTE.business_postcode} 邮政编码，现在我可以添加什么样的链接来将这些详细信息传播到移动浏览器或更好的 Gmap 应用程序中的地图上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T17:11:56.687

您可以在此处找到参数的（非官方）描述：[http ://www.seomoz.org/ugc/everything-you-never-wanted-to-know-about-google-maps-parameters](http://www.seomoz.org/ugc/everything-you-never-wanted-to-know-about-google-maps-parameters)

所以参数必须`q`是`hl`

示例：[https ://maps.google.co.uk/maps?q=Berlin,%20Alexanderplatz%201,10178](https://maps.google.co.uk/maps?q=Berlin,%20Alexanderplatz%201,10178)

# php - jQuery 中的 $.get 命令出错

> ID：14752871
> 
> 赞同：0
> 
> 时间：2013-02-07T13:58:13.850
> 
> 标签：php, jquery-mobile

我是 jQuery 新手，需要帮助找出 $.get 不回复的原因。

让我解释一下我所拥有的：有一个主要的 index.php 如下：

```
<!DOCTYPE html> 
<html lang="en"> 
<head>  <meta charset="utf-8"> </head> 
<body>

<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/reqhan.js"> </script>
  <input id="string" type="text" />
  <input id="button" type= "button" value="Go" />
    <div id="div"></div>

</body>
</html> 
```

js/reqhan.js 包含

```
$(document).ready(function(e) {
alert('1');
$('#button').click(function() {
$.get('php/reverse.php',{input: string},function(data){alert('2');});
    $('#div').text(data);
    alert('3');

 });
 }); 
```

reverse.php 包含一个简单的代码（我在此处粘贴但没有预览它），它从 reqhan.js 文件中获取文本并返回一个回显消息。

在 Google Chrome 上运行代码时，会显示第一个警报，但不会显示其余警报，当然还有 `$('#div').text(data);' 不会将数据发送回 js 文件。

如果需要更多信息，请告诉我。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:01:50.517

在对数据执行任何操作之前，您正在关闭回调函数

试试这个：

```
$(document).ready(function(e) {
    alert('1');
    $('#button').click(function() {
        $.get('php/reverse.php',{input: string},function(data){
            alert('2');
            $('#div').text(data);
            alert('3');
        });
    });
}); 
```

尝试格式化您的代码，以便每对括号都有自己的缩进。它应该有助于捕捉这样的小东西。

# java - 我们可以在spring中将带有in-it参数的servlet过滤器更改为拦截器吗

> ID：14752876
> 
> 赞同：0
> 
> 时间：2013-02-07T13:58:28.240
> 
> 标签：java, spring, servlets, spring-mvc, interceptor

我在作为参考添加的一个 jar 文件中有一个过滤器。

我的项目是春天性质的。我开发了一个网络服务。对这个 Web 服务的所有请求都应该被我的过滤器“HelloWorld”拦截。

此过滤器位于其中一个参考文件中。

在这里，我想我会将它实现为拦截器。

参考文件中的过滤器看起来像

```
public class HelloWorld implements Filter {
private static final Logger _logger = Logger.getLogger(HelloWorld.class.getName());

  protected String name = null;

  public HelloWorld()
  {
  }

  public HelloWorld(String name) {
    this.name = name;
  }

    public void doFilter(ServletRequest req, ServletResponse res,
            FilterChain chain) throws IOException, ServletException {

        HttpServletRequest request = (HttpServletRequest) req;

        PrintWriter out = response.getWriter();
        out.println("Hello "+name);     
        chain.doFilter(req, res);
    }
    public void init(FilterConfig config) throws ServletException {

        //Get init parameter
        String testParam = config.getInitParameter("test");

        //Print the init parameter
        System.out.println("test param: " + testParam);
    }
    public void destroy() {
        //add code to release any resource
    }

    //some other methods as well 
} 
```

实现这一点的最佳方法是什么。由于应用程序的限制，我无法在 web.xml 中配置过滤器。

我们是否可以直接将这个 HelloWorld 过滤器作为拦截器的引用，使其行为类似于拦截器。我们可以在spring中将此过滤器更改为拦截器并在spring.xml中进行配置而不更改功能。

抱歉，如果我的问题很简单。

谢谢。

# javascript - 在javascript的提示框中插入一组图像

> ID：14752877
> 
> 赞同：0
> 
> 时间：2013-02-07T13:58:28.723
> 
> 标签：javascript

```
<script>
var input = new Array();
input = ['../color/Red.jpg', '../color/Yellow.jpg','../color/Blue.jpg'];
var choice=prompt("choose four colours from  :    "+input);
</script> 
```

我想在提示框中显示图像；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T14:00:07.017

您不能在`prompt()`框中显示图像。这仅接受文本，不接受图像或 HTML。

您可以改用自定义模式弹出窗口，例如：[jQuery UI Dialog](http://jqueryui.com/dialog/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:59:55.420

提示框只接受文字，不好意思。不过，您可以尝试将图像放入 div 中，然后将 div 设置为弹出窗口。

# ruby-on-rails - 从 i18n YAML 文件中获取字符串？

> ID：14752886
> 
> 赞同：7
> 
> 时间：2013-02-07T13:58:56.233
> 
> 标签：ruby-on-rails, ruby, internationalization, yaml

我有一些查看代码：

```
<span data-something="[<%= t('.asd') %>, <%= t('.dsf') %>]></span> 
```

我使用此代码将一些动态字符串转换为视图。我的 YAML 类似于：

```
en:
  feature:
    asd: "Asdddd"
    dsf: "adasdsadasda" 
```

有没有一种方法可以通过语言环境从 YAML 动态获取所有“功能”并将其放入数据属性中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T14:39:30.790

这很简单：

```
I18n.translate('feature').values.join(', ') 
```

你最终会得到一个 string `"Asdddd, adasdsadasda"`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T14:03:11.683

我认为获取哈希就像`t('feature')`获取哈希一样容易，您可能只想拥有这些值，所以您可以尝试`t('feature').keys`吗？

# json - 将 JSON 响应提取到参数中

> ID：14752890
> 
> 赞同：3
> 
> 时间：2013-02-07T13:59:03.447
> 
> 标签：json, visual-studio-2012, performance-testing, url-parameters

我需要将这个特定的 JSON 字段提取到一个参数中，以便在 Visual Studio 中进行性能测试：

“ExamAnswerId”：“757a3735-e626-412b-934c-e577c6963d51”

当我尝试通过右键单击响应并单击“添加提取规则”手动执行此操作时，会出现问题。文本被分成 3 个不同的行，旁边有很多不可读的数字，如下所示：“0x00000000 7B 22 45 78 61 6D 41 6E 73 77 65 72 49 64 22 3A {“ExamAnswerId”：0x00000010 22 37 35 37 61 33 37 33 35 2D 65 36 32 36 2D 34"757a3735-e626-4

这听起来很愚蠢，但我不知何故需要提取 3 个不同的参数，只是因为我不能复制/粘贴它——这也是我认为我失败的地方。

ExamAnswerId 对我稍后完成另一个网络请求很重要，但我似乎无法正确传递它。

非常感谢所有输入！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-18T16:31:59.117

你看到这个发布的回复了​​吗？[http://social.msdn.microsoft.com/Forums/en-US/vstest/thread/b26114a2-7a24-45eb-b5d1-01e9165045b0/](http://social.msdn.microsoft.com/Forums/en-US/vstest/thread/b26114a2-7a24-45eb-b5d1-01e9165045b0/)

只需按照他们的建议使用提取测试，您应该可以正常工作。您的 Starts With 可能是“ExamAnswerId”：“而您的 Ends With 可能是”。HTH。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-18T13:34:37.057

我对提取规则有类似的问题。不得不逃避引号以使条件起作用。像这样：

开头为：\"ExamAnswerId\":\"结尾为
：\"

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-22T09:38:52.120

执行以下步骤：

1.  添加所有可用`ExamAnswerId`的 CSV 文件。
2.  现在添加 CSV 作为数据源。

让我们假设 CSV 文件名是`testdata`and`tableName=testData#csv`和`columnName=ExamAnswerId`。
请注意，当您添加数据源时，您会看到表名。

3.  替换这个：

    ```
    ["ExamAnswerId": "757a3735-e626-412b-934c-e577c6963d51"] 
    ```

    这样：

    ```
    ["ExamAnswerId": "{{testdata.testdata#csv.ExamAnswerId}}"] 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-13T14:15:02.670

我用 JSON 管理会话。以下**链接**对我有用：

[https://social.msdn.microsoft.com/Forums/vstudio/en-US/b26114a2-7a24-45eb-b5d1-01e9165045b0/cant-fetch-json-value-and-extract-to-parameter?forum=vstest](https://social.msdn.microsoft.com/Forums/vstudio/en-US/b26114a2-7a24-45eb-b5d1-01e9165045b0/cant-fetch-json-value-and-extract-to-parameter?forum=vstest)

示例：0x00000000 7B 22 53 65 73 73 69 6F 6E 22 3A 22 63 66 39 37 {“会话”：“cf97 0x00000010 64 33 65 61 2D 36 39 38 33 2D 34 31 37 30 2D

我用变量 MySessionID 左边界“会话”创建了“Extrat_Text”：右边界“，

然后我在后续请求中通过 {{MySessionID}} 代替 Session。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-21T00:40:59.863

或者我们可以使用正则表达式（正面向前看和正面向后看）例如我想在 JSON 结果中获取 access_token 属性，如下所示

```
{"token_type":"Bearer","expires_in":"3600","ext_expires_in":"0","expires_on":"1474420129","not_before":"1474416229","resource":"5fe3f443","access_token":"eyJ0eXAiOiJKV1QiLCJhbGci"} 
```

我可以使用这个正则表达式：

```
(?<=\"access_token\"\:\").*(?=\") 
```

# android - 在保持状态的同时切换片段

> ID：14752895
> 
> 赞同：2
> 
> 时间：2013-02-07T13:59:12.613
> 
> 标签：android, android-fragments, actionbarsherlock, slidingmenu

决定重写这个问题：

我有三个片段，称为 AB C。每个片段都有一个视图，其中包含一些字段供用户填写。用户应该能够使用菜单在不同的片段之间切换。如果用户在片段 A 中填写信息，然后切换到 C 填写更多信息，然后切换回 A，则用户在 A 中键入的信息应该仍然存在。

我想我需要以某种方式使用 FragmentManager 但我无法弄清楚添加/替换/附加的正确组合......这是使其按我想要的方式工作所必需的。

有人可以提供一个代码片段，让我在保持每个片段视图状态的同时在片段之间切换。

当前工作解决方案：

mContent 是活动片段，是活动的私有成员变量。

如果有人认为这种方法有问题或使其更高效/更健壮的方法，请告诉我！

```
public void switchContent(String fragmentTag) {
    FragmentManager fragmentManager = getSupportFragmentManager();
    FragmentTransaction transaction = fragmentManager.beginTransaction();

    if ( fragmentManager.findFragmentByTag( fragmentTag ) != mContent ) {
        if ( !mContent.isDetached() ) {
            transaction.detach( mContent );
        }

        if ( fragmentManager.findFragmentByTag( fragmentTag ) == null ) {
            if ( fragmentTag.equals( "details" ) ) {
                mContent = ScheduleDetailsFragment.newInstance();
            } else if ( fragmentTag.equals( "notes" ) ) {
                mContent = ScheduleNotesFragment.newInstance();
            } else if ( fragmentTag.equals( "exceptions" ) ) {
                // @TODO - Create Exceptions Fragment
            }
        } else {
            mContent = ( SherlockFragment ) fragmentManager.findFragmentByTag( fragmentTag );
        }
        if ( mContent.isDetached() ) {
            transaction.attach( mContent );
        } else if ( !mContent.isAdded() ) {
            transaction.add( R.id.content_frame, mContent, fragmentTag );
        }

        transaction.commit();
    }
    getSlidingMenu().showContent();
} 
```

谢谢你，内森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:17:03.957

> 我基于提供的示例之一的代码，但每次单击菜单项时它都会返回一个新片段，因此状态信息会丢失。

如果您的页面保持某种形式的状态/会话，`Fragment`则为每个导航事件返回一个新的用户体验是非常糟糕的，并且在内存使用方面也不是那么好。

我建议让您的滑动菜单`FragmentManager`在您的主菜单中使用`Activity`来维护`Fragments`您之间切换的所有内容。它将管理它们的所有状态，您可以使用`findFragmentByTag(String tag)`. 您只需要确保每个都`Fragment`保存您添加的任何状态（初始创建后更改的值/数据）`onSaveInstanceState(Bundle outState)`并将其恢复为`onCreate(Bundle savedInstanceState)`. 我不确定您当前使用的滑动菜单是如何管理的，所以这可能是不可能的。希望这至少可以帮助您朝着正确的方向前进。

**编辑：更新问题的更新答案 -** 这是我将如何切换`Fragments`. 通过使用替换，您将完全切换`Fragments`，同时重用已经创建的。为了让您的片段保存/恢复它们的状态，您需要参考我上面的答案。如果不清楚，请搜索一些如何在`Fragments`和中保存状态的示例`Activities`。

```
public void switchContent(String fragmentTag) {

    // If our current fragment is null, or the new fragment is different, we need to change our current fragment
    if (mContent == null || !mContent.getTag().equals(fragmentTag)) {
        FragmentManager fragmentManager = getSupportFragmentManager();
        FragmentTransaction transaction = fragmentManager.beginTransaction();

        // Try to find the fragment we are switching to
        Fragment fragment = fragmentManager.findFragmentByTag(fragmentTag);

        // If the new fragment can't be found in the manager, create a new one
        if (fragment == null) {
            if (fragmentTag.equals("details")) {
                mContent = ScheduleDetailsFragment.newInstance();
            }
            else if (fragmentTag.equals("notes")) {
                mContent = ScheduleNotesFragment.newInstance();
            }
            else if (fragmentTag.equals("exceptions")) {
                // @TODO - Create Exceptions Fragment
            }
        }
        // Otherwise, we found our fragment in the manager, so we will reuse it
        else {
            mContent = (SherlockFragment) fragment;
        }

        // Replace our current fragment with the one we are changing to
        transaction.replace(R.id.content_frame, mContent, fragmentTag);
        transaction.commit();

        getSlidingMenu().showContent();
    }
    else {
        // Do nothing since we are already on the fragment being changed to
    }
} 
```

# mysql - MySQL：如何解决此查询的临时表错误？

> ID：14752899
> 
> 赞同：3
> 
> 时间：2013-02-07T13:59:33.057
> 
> 标签：mysql, sql, database-design, phpmyadmin, relational-database

好的，我今天整天都在为此烦恼，无法让它工作，基本上我试图从一个临时表中随机查询 12 张照片，其中包含所有活跃登录用户尚未投票的照片。

错误显然是*#1137 - Can't reboot table: 'r1'* which temp table can only be reference一次。

```
 CREATE TEMPORARY TABLE unvoted_photos
    SELECT *
    FROM photo
    WHERE photo.photo_uid 
    NOT IN 
    ( SELECT photo_uid
    FROM vote
    WHERE vote.user_uid = '12345' ) ;

    SELECT photo_uid, caption, storage_path
      FROM unvoted_photos AS r1 
      JOIN (SELECT (RAND() * 
                    (SELECT MAX(id)
                    FROM unvoted_photos)) AS sid)
                    AS r2
     WHERE r1.id >= r2.id
     ORDER BY r1.id ASC
     LIMIT 12; 
```

由于性能问题，随机选择查询遵循此[示例。](https://stackoverflow.com/questions/4329396/mysql-select-10-random-rows-from-600k-rows-fast)否则这肯定会奏效。

```
 SELECT ... FROM photo WHERE photo_uid NOT IN ( voted images subquery ) ORDER BY RAND() LIMIT 12 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:58:41.433

根据关于该问题的讨论，这是一种将两者合并在一起的方法，您应该可以立即运行。我会用`JOIN`s 重写它，但在这种情况下，我已将临时表放入子查询中，这样您就可以看到发生了什么。

```
SELECT photo_uid, caption, storage_path
  FROM (
          SELECT photo_uid, caption, storage_path
          FROM photo
          WHERE photo.photo_uid 
          NOT IN 
          ( 
            SELECT photo_uid
            FROM vote
            WHERE vote.user_uid = '12345' 
          )

       ) r1 
  JOIN (SELECT (RAND() * 
                (SELECT MAX(id)
                FROM unvoted_photos)) AS sid)
                AS r2
 WHERE r1.id >= r2.id
 ORDER BY r1.id ASC
 LIMIT 12; 
```

# gwt - 初始化 AsyncCallback 时出现 GWT RPC ClassNotFoundException

> ID：14752902
> 
> 赞同：0
> 
> 时间：2013-02-07T13:59:39.657
> 
> 标签：gwt, callback, rpc, classnotfoundexception

这不是我第一次尝试 RPC。所有其他人都运作良好，但我不知道，为什么这不。

```
 public void confirmRequest(String requestId, boolean confirmWithDefault, List<String> values, final String laneId){
    AsyncCallback<Void> callback = new AsyncCallback<Void>(){
        @Override
        public void onFailure(Throwable caught)
        {
            // TODO Auto-generated method stub

        }

        @Override
        public void onSuccess(Void result)
        {
            Window.alert("jo");
            ServiceCalls.this.mainmenu.getSlidePanel().getLaneMenu().getProperLanes().get(laneId)
                    .getDefaultButton().setText("");
            statusFor();

        }

    };
    getLaneProxy().confirmRequest(requestId, confirmWithDefault, values, laneId, callback);
} 
```

当我运行程序时，它甚至不会抛出异常。它只是没有做它应该做的事情。然后我调试了一下，发现此时抛出了 ClassNotFoundException。

```
AsyncCallback< Void> callback = new AsyncCallback<Void>() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:16:42.320

假设您使用的是 GWT 2.5.0，这是一个[已知问题](https://code.google.com/p/google-web-toolkit/issues/detail?id=7527)；升级到已修复的 2.5.1-rc1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T17:51:47.420

我有同样的问题，并在[gridDragon 的帮助下](https://stackoverflow.com/a/21614234/2355146)找到了解决方案。我的问题是 web.xml 中的 servlet 配置错误，因此找不到我的 Impl 类。

# objective-c - 无法将 UIButton.highlighted 设置为 NO

> ID：14752903
> 
> 赞同：0
> 
> 时间：2013-02-07T13:59:47.813
> 
> 标签：objective-c, uibutton

我在每个单元格中都有一个`UITableViewCell`with 。`UIButton`当按钮被按下时，我将其状态设置为突出显示，就像在[这个](https://stackoverflow.com/a/7418662/1313939)答案中一样：

```
[self performSelector:@selector(doHighlight:) withObject:[cell.subviews objectAtIndex:2] afterDelay:0.0]; 
```

然后我这样做：

```
- (void)doHighlight:(UIButton *)sender {

    if (sender.highlighted) {
        [sender setHighlighted:NO];
    } else {
    [sender setHighlighted:YES];
    }
} 
```

但是该按钮不仅根本没有突出显示，也没有谈到我应该能够取消突出显示它的事实。

关于什么是错的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:51:08.067

我最终使用了`UIButton`'s`selected`属性。它不需要任何`delay`东西，并且可以很好地处理这种类型的事情：

```
if (!sender.selected) {
    [sender setSelected:YES];
    [cell addSubview:hiddenButton];
    [self performSelector:@selector(doHighlight:) withObject:sender];
} else {
    [sender setSelected:NO];
    [self performSelector:@selector(doUnHighlight:) withObject:sender];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:12:50.090

这是您正在寻找的可能的解决方案。我修改了我的答案

```
 UIButton *button=[cell.subviews objectAtIndex:2];

//I am adding these five lines to ensure the different 
//states of the button to achieve your highlighted state goal. 

UIImage *highlightImage = [UIImage imageNamed:@"highlight.png"];//Also used  when button is selected
UIImage *normalImage = [UIImage imageNamed:@"normal.png"];
[button setBackgroundImage:normalImage forState:(UIControlStateHighlighted)];
[button setBackgroundImage:highlightImage forState:(UIControlStateSelected)];
[button setBackgroundImage:normalImage forState:UIControlStateNormal];

 [self performSelector:@selector(doHighlight:) withObject:[cell.subviews objectAtIndex:2]];

-(IBAction) doHighlight:(id)sender
{
    if ([sender isKindOfClass:[UIButton class]])
    {
        UIButton *btn=(UIButton*)sender;
        if (btn.isSelected) {
            [btn setSelected:NO];
        }
        else
        {
            [btn setSelected:YES];
        }
    }
} 
```

# php - facebook PHP 错误 102，会话密钥无效或不再有效

> ID：14752908
> 
> 赞同：1
> 
> 时间：2013-02-07T14:00:00.483
> 
> 标签：php, facebook

我正在尝试使用 PHP 和 Facebook 进行简单的登录。问题是当它应该显示“iframe”、“popup”或“page”时我有这个结果（它们都不起作用）

```
API Error Code: 102
API Error Description: Session key invalid or no longer valid
Error Message: Iframe dialogs must be called with a session key 
```

我现在使用的代码是这样的：

```
$config = array(
    'appId' => 'CODE1',
    'secret' => 'CODE2',
    'cookie' => true
);

$params = array(
    'redirect_uri' => 'http://domain.dev',
    'display'=>'iframe'
);

$facebook = new Facebook($config);

$user = $facebook->getUser();
if ($user) {
    //something
} else {
    $user = null;
    $loginUrl = $facebook->getLoginUrl($params);    
    //redirect to loginURL                  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T14:13:53.480

试试这个 ：

```
if (!(isset($_REQUEST['state'])) {
    $loginUrl = $facebook->getLoginUrl(array(
        'redirect_uri' => 'http://domain.dev',
        'display' => 'popup',
        'scope' => 'user_photos'
            ));
    echo $loginUrl; 
```

如需更多参考，您可以使用：

[http://www.9lessons.info/2011/02/login-with-facebook-and-twitter.html](http://www.9lessons.info/2011/02/login-with-facebook-and-twitter.html)

# php - 如何打印出视图文件中的值？

> ID：14752909
> 
> 赞同：1
> 
> 时间：2013-02-07T14:00:02.610
> 
> 标签：php, cakephp, cakephp-1.3, cakephp-2.0

我有一个这样的数组，我想在视图文件中打印出来，但是它是空的，数组就是这样

```
array(
(int) 0 => array(
    'ProductsUserNode' => array(
        'product_user_node_id' => '155',
        'user_node_id' => '53',
        'product_id' => '1',
        'is_active' => '1',
        'expiry' => '0000-00-00',
        'created' => '2013-01-10 10:27:22',
        'modified' => '2013-01-10 10:27:22',
        'created_view' => '10:27 AM, Jan 10,2013',
        'modified_view' => '10:27 AM, Jan 10,2013'
    ),
    'UserNode' => array(
        'user_node_id' => '53',
        'division_id' => '28',
        'role_id' => '4',
        'user_id' => '56',
        'created' => '2013-01-10 10:27:20',
        'created_view' => '10:27 AM, Jan 10,2013'
    ),
    'Product' => array(
        'product_id' => '1',
        'name' => 'Manager',
    )
), 
```

我在视图文件中使用此代码

```
 foreach ($products as $products)
             {
             ?>
            <tr>
                <td>    <?php $products['ProductsUserNode']['product_id']?> </td>
                <td>    <?php $products['Product']['name']?>    </td>
            </tr>
            <?php }?> 
```

我也像这样在控制器中设置了变量，

```
 $this->set('products',$products); 
```

但它不工作，有什么问题？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T14:02:48.817

使用`echo`关键字打印变量。

```
 foreach ($products as $product)
 {
 ?>
 <tr>
      <td>    <?php echo $product['ProductsUserNode']['product_id']?> </td>
      <td>    <?php echo $product['Product']['name']?>    </td>
 </tr>
 <?php }?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T14:07:03.467

> foreach ($products as $products) // 错误

您需要正确地迭代它（基本的 php！）：

```
<?php foreach ($products as $product) { ?>
        <tr>
            <td> <?php echo h($product['ProductsUserNode']['product_id']); ?> </td>
            <td> <?php echo h($product['Product']['name']); ?> </td>
        </tr>
<?php } ?> 
```

另请注意 h() 以保护视图。

PS：你应该“烘焙”你的代码。这样你就可以从中学习如何正确处理它。

# json - 将新属性插入 JSON

> ID：14752914
> 
> 赞同：0
> 
> 时间：2013-02-07T14:00:16.403
> 
> 标签：json, texturepacker

我知道我可以像这样将新属性插入 JSON：

```
var jsonObj = {
    members: 
           {
            host: "hostName",
            viewers: 
            {
                user1: "value1",
                user2: "value2",
                user3: "value3"
            }
        }
}

jsonObj.members.viewers["user4"] = "value4"; 
```

但是我需要使用的 JSON 是这样的（来自 Texture Packer）：

```
var jsonObj = {
    "frames": {
        "chaingun.png": {
            "frame": {
                "x": 1766,
                "y": 202,
                "w": 42,
                "h": 34
            },
            "rotated": false,
            "trimmed": true,
            "spriteSourceSize": {
                "x": 38,
                "y": 32,
                "w": 42,
                "h": 34
            },
            "sourceSize": {
                "w": 128,
                "h": 128
            }
        }        
    }
} 
```

如何将新属性插入“框架”？由于语音标记，这让我感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:04:13.937

您可以像这样简单地链接成员：

```
jsonObj.frames["chaingun.png"]["frame"]["z"] = 1234;

// or

jsonObj.frames["chaingun.png"].frame.z = 4567; 
```

# android - 在数据库或首选项中保存信息的性能/内存消耗

> ID：14752915
> 
> 赞同：0
> 
> 时间：2013-02-07T14:00:18.457
> 
> 标签：android, performance, sqlite, sharedpreferences

我需要存储我的 Android 应用程序的大量和可变数量的复选框状态。每 5-10 分钟我需要检索一个复选框的状态（应该通过其他活动中的用户交互来更改）。我知道我可以将它们存储在 sharedPreferences 或 SQLite 数据库中。数量或复选框从 10 到*(infinite-1) 不等*。

我的第一个想法是将所有状态存储在一个字符串中：

```
chk1:true,chk2:false,chk3:false,chk4:false,chk5:true 
```

`:`由和分隔`,`。我可以在一个`getString()`电话中检索我所有的复选框状态。

我离开了这个解决方案，因为我的复选框数量越来越多，而且我认为拥有一个包含数千个数据的字符串并没有执行。

我的第二个想法是将每个 chk 存储在单独的首选项中。我离开了这个解决方案，因为我需要检索可能多次我的复选框状态..想象 `getString()`调用 10000 次或更多次它是资源的浪费。

我的第三个想法是将所有单一状态存储在 SQLite 数据库中。

```
 ID   Status
  1      T
  2      F
  3      F
  4      F
  5      T 
```

在这个解决方案中，我不喜欢我需要大量时间访问我的数据库。

如果我需要从现在到无限期每 5 分钟检索一次复选框状态，最好的解决方案是什么（性能和内存消耗）？**DB 或 sharedpref**？如果是数据库，我需要每次打开数据库并实例化一个游标，还是应该在我的活动开始时实例化它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:20:53.017

我肯定会选择 SQLite。

共享首选项和 SQLite 都有缓存机制，但 SQLite 是专门为检索和存储大量数据而设计的，而共享首选项更适合简单的应用程序……嗯……首选项。

此外，如果您的数据模型发生变化（相信我，这种情况一直都在发生），SQLite 特别有用。SQLite 还将缓存一些最常用的数据片段（技术上：数据库页面）——它会适应数据的实际使用模式。

至于打开数据库 - 我绝对建议打开一次并多次重复使用您创建的连接 - 这将使您免于每次打开数据库的开销（这是一项昂贵的操作）并且还允许 SQLite 学习（适应) 如何根据您实际使用数据的方式缓存数据（例如访问顺序、特定 SQL 语句缓存等）

# c# - 如何使用 NHibernate 和 Envers 交换唯一的排序列条目？

> ID：14752916
> 
> 赞同：3
> 
> 时间：2013-02-07T14:00:20.387
> 
> 标签：c#, .net, nhibernate, swap, nhibernate-envers

我现在正在使用 NHibernate 一段时间，最后遇到了一个问题，我既找不到答案，也找不到其他人似乎有这个问题。环境是 NHibernate 3.3.1.4000 和 NHibernate.Envers 1.4 用于保存历史。

我有以下类型的数据库表/实体类：

```
public class ProcedureStep
{
    public virtual int Id { get; protected internal set; }
    public virtual Procedure ParentObject { get; set; }
    public virtual int StepNo { get; set; }
    public virtual string Name { get; set; }
} 
```

与映射：

```
public class ProcedureStepMap : ClassMap<ProcedureStep>
{
    public ProcedureStepMap()
    {
        Table("ProcedureStep");
        Id(x => x.Id);

        References(x => x.ParentObject).Not.Nullable().UniqueKey("UK_PO_SN");
        Map(x => x.StepNo).Not.Nullable().UniqueKey("UK_PO_SN");
        Map(x => x.Name).Not.Nullable();
    }
} 
```

我们有一个包含过程步骤列表的父对象。用户现在可以添加、删除或修改不同的步骤。一种“修改”是使用按钮在步骤列表中向上或向下移动所选项目来改变程序步骤的顺序。

让我们举一个具体的例子：

该方案是 4 个过程步骤 1-4 的列表：

```
(1) Aaaa
(2) Bbbb <--
(3) Cccc
(4) Dddd 
```

用户选择第二项“Bbbb”并按下“Up”按钮，得到：

```
(1) Bbbb <--
(2) Aaaa
(3) Cccc
(4) Dddd 
```

在代码中，我现在想做类似的事情

```
Begin Transaction
1) Set "Aaaa" to StepNo = 0
2) Set "Bbbb" to StepNo = 1
3) Set "Aaaa" to StepNo = 2
End Transaction 
```

但是现在 NHibernates 开始发挥作用了。NHibernate 在提交事务时对第 1 步一无所知，因此尝试对数据库仅使用 2 个更新命令（第 2 步和第 3 步），由于 StepNo 列的独特性，这不起作用。在第 1 步之后添加 session.flush() 不会改变该行为的任何内容（我可以理解，因为我们在事务中）。

下一个想法只是`session.CreateQuery("update...").ExecuteUpdate()`用来对数据库进行更改，它工作正常，但正在围绕 Envers 工作，让我没有此更改的历史记录（再次很容易理解，因为 sql 刚刚传递）。

但是，在一次交易中拥有一切并拥有 Envers 的历史，进行这种改变的正确方法是什么？难道不是让“StepNo”列独一无二是让它工作的唯一方法吗？不希望丢失列的唯一性，因为正确的排序和数据库确保这一点很重要，这将是一个很大的帮助。

预先感谢您的想法！

[解决方案]：

jbl 和 cremor 似乎有唯一的答案。连同其他一些麻烦点，我们现在决定完全跳过 Envers，并使用一种更专业的方式来进行历史管理，不太通用，更适合我们的需求。如果没有 Envers，则可以使用 sql 命令通过简单的 3 步更新来解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T07:06:02.193

如果您的数据库支持可延迟约束，我会使用它们。

# android - 从布局中膨胀drawable

> ID：14752925
> 
> 赞同：0
> 
> 时间：2013-02-07T14:00:48.817
> 
> 标签：android, android-layout, listview, android-imageview, android-custom-view

我有一个定义列表视图项目的布局。我需要如下：

![在此处输入图像描述](../Images/0a85401582b46af20049917207cb995d.png)

我需要那个红色矩形（ImageView）覆盖两个LinearLayouts（见我上传的图片）。

我当前的列表项布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@color/background"
    android:paddingLeft="15dip"
    android:paddingRight="15dip" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/item_rounded"
        android:padding="15dip" >
    <TextView
            android:id="@+id/text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Item 1"
            android:textSize="16sp" />
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:07:27.730

试试这个布局：

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@color/background"
        android:paddingLeft="15dip"
        android:paddingRight="15dip" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/item_rounded"
            android:padding="15dip" >

            <TextView
                android:id="@+id/text"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Item 1"
                android:textSize="16sp" />
        </LinearLayout>
    </LinearLayout>

    <ImageView
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:background="#FF0000" />
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:11:27.650

```
Try below code

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#ffeecc"
    android:paddingLeft="15dip"
    android:paddingRight="15dip" >
    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:background="@drawable/item_rounded"
        android:padding="15dip" >

    <TextView
            android:id="@+id/text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Item 1"
            android:textSize="16sp" />
    </LinearLayout>
</RelativeLayout> 
```

# .net - 用于群发邮件的 Windows 服务

> ID：14752927
> 
> 赞同：-1
> 
> 时间：2013-02-07T14:00:51.977
> 
> 标签：.net

Windows 服务是否可以用于从数据库和邮件（大约 300 封邮件）中获取数据，并提供 15 分钟的时间间隔和计时器？

在这种情况下，Windows 服务是一个不错的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:18:01.457

如果该计划相当于：

```
while (true)
{
    SendEmailsFromDatabase();
    Thread.Sleep(TimeSpan.FromMinutes(15));
} 
```

那么你就不需要 Windows 服务了。您需要一个控制台应用程序和一个计划任务。请参阅[程序不是猫](http://blog.mischel.com/2013/02/01/programs-are-not-cats/)。

# php - 不同捆绑中实体之间的教义关联映射或来自两个不同捆绑的实体之间的关联？

> ID：14752928
> 
> 赞同：4
> 
> 时间：2013-02-07T14:00:51.783
> 
> 标签：php, symfony, orm, doctrine, entity-relationship

地区：

```
namespace Acme\RegionBundle\Entity;

class Region
{

    private $id;

    /**
     * @ORM\OneToMany(targetEntity="User")
     * @ORM\JoinColumn(name="region_id", referencedColumnName="id")
     */
    private $users;
} 
```

用户：

```
namespace Acme\UserBundle\Entity;

class User
{
    private $id;
    private $region_id;
} 
```

如何在不提及完全指定的实体路径（即硬编码依赖）的情况下关联来自不同捆绑包的实体。

有没有更好的方法？

可以[解决目标实体侦听器](http://symfony.com/doc/master/cookbook/doctrine/resolve_target_entity.html)是一个解决方案。我无法理解它如何应用在这里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T20:46:00.973

解析目标实体侦听器允许您在运行时重新定义关联。它基本上允许您映射如下内容：

```
@ORM\OneToMany(targetEntity="My\Namespace\UserInterface") 
```

如您所见，将接口映射为目标实体没有多大意义。当您告诉必须将每个`My\Namespace\UserInterface`都替换为`Other\Namespace\User`参考时，它变得非常有用。

# sql-server - 如何在存储过程中声明数组。通过查询向数组添加值。并遍历存储过程中数组元素的循环

> ID：14752929
> 
> 赞同：0
> 
> 时间：2013-02-07T14:00:54.197
> 
> 标签：sql-server, database, sql-server-2008, stored-procedures

如何在存储过程中声明数组。通过查询向数组添加值。并遍历 mssql 存储过程中数组元素的循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:10:05.007

TSQL 不提供数组。请改用[表变量](http://msdn.microsoft.com/en-us/library/ms188927.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:06:37.803

要快速回答这组问题：

1）您可以使用表变量或临时表而不是数组

2) 要通过查询向数组添加值，您可以使用`SELECT INTO`or`INSERT`语句

3）要迭代槽项目，您可以使用`CURSOR`或者`WHILE`循环

# symfony - 在 Symfony 2 WebTestCase 上创建测试数据库和加载夹具的最佳方法？

> ID：14752930
> 
> 赞同：69
> 
> 时间：2013-02-07T14:00:56.370
> 
> 标签：symfony, doctrine, tdd

我有一个在我的应用程序中执行一些基本路由的 WebTestCase。

我想，在`setUp`PHPUnit 的方法上，创建一个与我的主数据库相同的测试数据库，并将夹具加载到其中。

我目前正在做一些解决方法并执行一些控制台命令，如下所示：

```
class FixturesWebTestCase extends WebTestCase
{
    protected static $application;

    protected function setUp()
    {
        self::runCommand('doctrine:database:create');
        self::runCommand('doctrine:schema:update --force');
        self::runCommand('doctrine:fixtures:load --purge-with-truncate');
    }

    protected static function runCommand($command)
    {
        $command = sprintf('%s --quiet', $command);

        return self::getApplication()->run(new StringInput($command));
    }

    protected static function getApplication()
    {
        if (null === self::$application) {
            $client = static::createClient();

            self::$application = new Application($client->getKernel());
            self::$application->setAutoExit(false);
        }

        return self::$application;
    }
} 
```

但我很确定这不是最好的方法，特别是因为`doctrine:fixtures:load`期望用户点击一个`Y`字符来确认操作。

我该如何解决？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-07T15:15:18.077

如果要使用`doctrine:fixtures:load`，可以使用该`--append`选项来避免用户确认。由于您每次都在重新创建数据库，因此不需要清除。我曾经单独使用理论夹具进行测试，但后来改用夹具和[LiipFunctionalTestBundle](https://github.com/liip/LiipFunctionalTestBundle)来避免 DRY。此捆绑包使灯具更易于管理。

编辑：David Jacquel 的答案是加载 Doctrine Fixtures 的正确答案：

```
doctrine:fixtures:load --no-interaction 
or
doctrine:fixtures:load -n 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-10-15T13:11:25.850

为了绕过用户确认，您可以使用

```
doctrine:fixtures:load --no-interaction
or
doctrine:fixtures:load -n 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2014-03-02T19:53:15.187

## **更新的答案**

您可以为您的测试用例创建一个基类，通过利用[Doctrine Data Fixtures](https://github.com/doctrine/data-fixtures)库中的一些类来轻松加载夹具。这个类看起来很像这样：

```
<?php

use Doctrine\Common\DataFixtures\Executor\ORMExecutor;
use Doctrine\Common\DataFixtures\FixtureInterface;
use Doctrine\Common\DataFixtures\Purger\ORMPurger;
use Doctrine\ORM\EntityManagerInterface;
use Symfony\Bridge\Doctrine\DataFixtures\ContainerAwareLoader;
use Symfony\Bundle\FrameworkBundle\Test\KernelTestCase;

abstract class FixtureAwareTestCase extends KernelTestCase
{
    /**
     * @var ORMExecutor
     */
    private $fixtureExecutor;

    /**
     * @var ContainerAwareLoader
     */
    private $fixtureLoader;

    public function setUp()
    {
        self::bootKernel();
    }

    /**
     * Adds a new fixture to be loaded.
     *
     * @param FixtureInterface $fixture
     */
    protected function addFixture(FixtureInterface $fixture)
    {
        $this->getFixtureLoader()->addFixture($fixture);
    }

    /**
     * Executes all the fixtures that have been loaded so far.
     */
    protected function executeFixtures()
    {
        $this->getFixtureExecutor()->execute($this->getFixtureLoader()->getFixtures());
    }

    /**
     * @return ORMExecutor
     */
    private function getFixtureExecutor()
    {
        if (!$this->fixtureExecutor) {
            /** @var \Doctrine\ORM\EntityManager $entityManager */
            $entityManager = self::$kernel->getContainer()->get('doctrine')->getManager();
            $this->fixtureExecutor = new ORMExecutor($entityManager, new ORMPurger($entityManager));
        }
        return $this->fixtureExecutor;
    }

    /**
     * @return ContainerAwareLoader
     */
    private function getFixtureLoader()
    {
        if (!$this->fixtureLoader) {
            $this->fixtureLoader = new ContainerAwareLoader(self::$kernel->getContainer());
        }
        return $this->fixtureLoader;
    }
} 
```

然后，在您的测试用例中，只需扩展上述类并在您的测试之前添加所有需要的夹具并执行它们。这将在加载夹具之前自动清除您的数据库。示例如下：

```
class MyTestCase extends FixtureAwareTestCase
{
    public function setUp()
    {
        parent::setUp();

        // Base fixture for all tests
        $this->addFixture(new FirstFixture());
        $this->addFixture(new SecondFixture());
        $this->executeFixtures();

        // Fixtures are now loaded in a clean DB. Yay!
    }
} 
```

## **旧答案**

*（我决定“弃用”这个答案，因为它只解释了如何清理数据库而不告诉如何加载之后的固定装置）。*

有一种更简洁的方法可以完成此操作，而无需运行命令。它基本上包括使用 SchemaTool 和 ORMPurger 的组合。您可以创建一个执行此类操作的抽象基类，以避免为每个专门的测试用例重复它们。这是一个测试用例类的代码示例，它为通用测试用例设置数据库：

```
use Doctrine\Common\DataFixtures\Purger\ORMPurger;
use Doctrine\ORM\Tools\SchemaTool;

abstract class DatabaseAwareWebTestCase extends WebTestCase {

    public static function setUpBeforeClass() {

        parent::setUpBeforeClass();

        $kernel = static::createKernel();
        $kernel->boot();
        $em = $kernel->getContainer()->get('doctrine')->getManager();
        $schemaTool = new SchemaTool($em);
        $metadata = $em->getMetadataFactory()->getAllMetadata();

        // Drop and recreate tables for all entities
        $schemaTool->dropSchema($metadata);
        $schemaTool->createSchema($metadata);
    }

    protected function tearDown() {

        parent::tearDown();

        $purger = new ORMPurger($this->getContainer()->get('doctrine')->getManager());
        $purger->setPurgeMode(ORMPurger::PURGE_MODE_TRUNCATE);
        $purger->purge();
    }
} 
```

这样，在运行从上述类继承的每个测试用例之前，数据库模式将从头开始重建，然后在每次测试运行后清理。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-06-13T10:15:29.963

我偶然发现了一个名为[Doctrine-Test-Bundle](https://github.com/dmaicher/doctrine-test-bundle)的非常简洁的包 ，而不是在每个测试上创建和删除模式，它只是回滚。我的测试从 1 分 40 秒到.. 2 秒。而且是孤立的。您所需要的只是一个清晰的测试数据库，它就可以解决问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-11-17T05:55:13.793

我使用了这个命令：

```
yes | php app/console doctrine:fixtures:load --purge-with-truncate 
```

当然，LiipFunctionalTestBundle 看起来很有希望。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-21T11:35:09.743

我想像`doctrine:fixtures:load`命令一样加载你所有的装置。我不想`exec`从测试用例中跑出来，因为这似乎是一种混乱的做事方式。我查看了教条命令本身是如何做到这一点的，并且只是复制了相关行。

我从 Symfony 扩展，在`WebTestCase`创建内核后，我只是调用了我的方法，它的工作方式与 Doctrine load-fixtures 命令完全一样。

```
 /**
     * Load fixtures for all bundles
     *
     * @param Kernel $kernel
     */
    private static function loadFixtures(Kernel $kernel)
    {
        $loader = new DataFixturesLoader($kernel->getContainer());
        $em = $kernel->getContainer()->get('doctrine')->getManager();

        foreach ($kernel->getBundles() as $bundle) {
            $path = $bundle->getPath().'/DataFixtures/ORM';

            if (is_dir($path)) {
                $loader->loadFromDirectory($path);
            }
        }

        $fixtures = $loader->getFixtures();
        if (!$fixtures) {
            throw new InvalidArgumentException('Could not find any fixtures to load in');
        }
        $purger = new ORMPurger($em);
        $executor = new ORMExecutor($em, $purger);
        $executor->execute($fixtures, true);
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-08T13:02:17.597

就在最近，捆绑包[hautelook/AliceBundle](https://github.com/hautelook/AliceBundle)公开了两个特征来帮助您解决在功能测试中加载夹具的用例：`RefreshDatabaseTrait`和`ReloadDatabaseTrait`.

从文档：

```
namespace App\Tests;

use Hautelook\AliceBundle\PhpUnit\RefreshDatabaseTrait;
use Symfony\Bundle\FrameworkBundle\Test\WebTestCase;

class NewsTest extends WebTestCase
{
    use RefreshDatabaseTrait;

    public function postCommentTest()
    {
        $client = static::createClient(); // The transaction starts just after the boot of the Symfony kernel
        $crawler = $client->request('GET', '/my-news');
        $form = $crawler->filter('#post-comment')->form(['new-comment' => 'Symfony is so cool!']);
        $client->submit($form);
        // At the end of this test, the transaction will be rolled back (even if the test fails)
    }
} 
```

你很好！

# java - 从hadoop中的job conf获取输入路径

> ID：14752931
> 
> 赞同：0
> 
> 时间：2013-02-07T14:00:56.823
> 
> 标签：java, hadoop, hdfs

我正在将路径设置为 conf 的输入位置

```
FileInputFormat.setInputPaths(conf, new Path("path/to/folder")); 
```

当我尝试实现自己的 RecordReader 时，如何从 conf 中检索此位置

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T00:19:28.233

此调用设置的属性是`map.input.dir`，因此这应该适合您：

```
conf.get("map.input.dir"); 
```

附带说明一下，您的记录阅读器应该对`initialize(InputSplit, TaskAttemptContext)`方法中给出的输入拆分进行操作，因为您在 setInputPath 中传递的文件夹实际上将解析为多个输入拆分，通常一个用于文件夹中的每个文件（可能还有多个较大的可拆分文件的输入拆分）。

`FileInputFormat`基于输入格式的传递`FileSplit`给初始化方法，您应该能够从该`FileSplit.getPath()`方法中提取要处理的实际文件。

# solr - 在多个字段上执行搜索的最佳方式

> ID：14752933
> 
> 赞同：0
> 
> 时间：2013-02-07T14:01:07.307
> 
> 标签：solr, solrnet

我必须对 ex.（ProductName、ProductDescription、FeedBackOfProduct 等）的几个字段执行搜索。

目前我有 2 种方法 1\. 我将所有这些可搜索字段复制到一个复制字段中并在该字段上执行搜索。但这里的问题是我怎样才能提升一个特定的领域，比如假设只在 ProductName 上。

2.或者我会按字段名称搜索并相应地给予提升。产品名称：“测试”^50.0 产品描述：“易于处理”~100^70.0

请告诉我哪种方法最好。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:59:39.233

With the 2nd option (search by field with boost) you have more control over how documents are scored, as you note you do not have this control with 1st option. Either way is a valid approach and which one you want to use will depend on your use case scenarios.

# ruby-on-rails - 如何在 rails-api gem 中使用视图助手？

> ID：14752935
> 
> 赞同：7
> 
> 时间：2013-02-07T14:01:16.430
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, backend, rails-api

我使用[rails-api](https://github.com/spastorino/rails-api)和[rabl](https://github.com/nesquena/rabl) gems 来制作 api 应用程序。我不想将很多逻辑放入 rabl 视图中，但如果我想将其提取到助手中。Rails-api gem 不包括助手支持（没关系），那么**我如何才能在我的 json 视图中启用助手？（我需要包含哪些中间件，哪些模块等）**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-13T15:03:24.030

在呈现视图的控制器中，您必须

1.  包括 ActionController::Helpers 和
2.  使用 'helper' 方法向视图提供您自己的 Helper 模块

在我的 API 应用程序中，我创建了一个 RenderingController，它充当所有渲染控制器的超类：

```
class RenderingController < ApplicationController
  include AbstractController::Layouts
  include AbstractController::Translation
  include ActionController::ImplicitRender
  include ActionController::Helpers

  helper ApplicationHelper, OtherHelper
end 
```

# cpu-usage - CPU使用率是什么意思？

> ID：14752936
> 
> 赞同：8
> 
> 时间：2013-02-07T14:01:18.770
> 
> 标签：cpu-usage

当一个核心的 CPU 使用率为 100% 时，这意味着什么？

这是否意味着一个进程已经达到了内核的最大可能性能（使用矢量化），还是意味着 CPU 正在执行与内核时钟一样多的周期？

此外，如果它是 100%，我是否可以暗示该进程受 CPU 限制，即更快更大的缓存、内存、总线等不会产生任何影响？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-09-29T20:30:16.073

CPU 使用率通常意味着： CPU 执行任何工作的实时时间百分比。90% CPU 使用率意味着 CPU 90% 忙，10% 空闲。当 CPU 空闲时，它什么也不做，只是等待中断。

在此视图中，CPU 始终包括高速缓存和内存。从这个意义上说，更大的缓存和更快的内存总是会让你的 CPU 工作得更快。

CPU 使用率为 100% 意味着进程总和 CPU 受限。如果 CPU 更快，它们会运行得更快。

CPU 使用率低于 100% 意味着进程处于总 I/O 限制中。如果 CPU 运行得更快，它们就不会运行得更快。

# ember.js - 如何在 EmberJS 的 2.2 路由器中使用动态段？

> ID：14752937
> 
> 赞同：5
> 
> 时间：2013-02-07T14:01:21.267
> 
> 标签：ember.js, ember-router

我不知道如何在 EmberJS 的新路由器 API 中创建具有动态段的路由。我已经花了一个星期的时间尝试了很多东西，但它不起作用。我对自己感到非常沮丧，因为我已经多次阅读了文档、API 和源代码，但无法弄清楚如何完成这项工作。我渴望得到帮助。

我正在尝试实现以下路线：

*   /profile/:userId -> 索引
*   /profile/:userId/activity -> 活动页面
*   /profile/:userId/...

我的路由器是这样设置的

```
App.Router.map(function() {
  return this.resource("profile", function() {
    this.route("index", { path: '/:userId' });
    this.route("activity", { path: '/:userId/activity' });
  });
}); 
```

然后，每当我尝试与`linkTo`帮助程序链接时，都会收到以下错误：`Uncaught More objects were passed than dynamic segments`

```
<li>{{#linkTo "profile.index" user}}overview{{/linkTo}}</li> 
```

如果我不包含该`user`对象，那么我会收到另一个错误`Uncaught Error: assertion failed: Cannot call get with 'id' on an undefined object.`（显然是因为没有对象可以获取其 ID）

如果有任何帮助，这是我的路线声明

```
App.ProfileIndexRoute = Ember.Route.extend({
  model: function(params) {
    return Ember.Object.create({
      id: 1
    });
  },
  setupController: function(controller, model) {
    return controller.set("content", model);
  }
});

App.ProfileActivityRoute = Ember.Route.extend({
  model: function(params) {
    return Ember.Object.create({
      id: 1
    });
  },
  setupController: function(controller, model) {
    return controller.set("content", model);
  }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T15:26:28.947

[JSBin 示例](http://jsbin.com/adedag/105/edit)

你可以用更多的嵌套来构造你的路由以获得你想要的 URL（并且你不需要在你的路由器中有一个 return 语句）：

```
App.Router.map(function() {
  this.resource("profile", function() {
    this.resource("userprofile", { path: '/:userId' }, function() {
      this.route("index", { path: '/' });
      this.route("activity", { path: '/activity' });
    });
  });
}); 
```

然后像这样设置你的路线：

```
App.IndexRoute = Ember.Route.extend({
  model: function(params) {
    return [Ember.Object.create({
      id: 1
    })];
   }
});

App.UserprofileIndexRoute = Ember.Route.extend({
  model: function(params) {
    console.log("userindex route", params);
    return Ember.Object.create({
      id: 1
    });
  },
  setupController: function(controller, model) {
    return controller.set("content", model);
  }
});

App.UserprofileActivityRoute = Ember.Route.extend({
  model: function(params) {
    return Ember.Object.create({
      id: 1
    });
  },
  setupController: function(controller, model) {
    return controller.set("content", model);
  }
}); 
```

您可以链接到该`/profile/1`页面：

```
{{#linkTo userprofile.index user}} 
```

或链接到`/profile/1/activity`页面：

```
{{#linkTo userprofile.activity user}} 
```

# nginx - 使用 nginx 模拟慢响应时间以进行测试

> ID：14752943
> 
> 赞同：10
> 
> 时间：2013-02-07T14:01:27.150
> 
> 标签：nginx, jmeter, load-testing

我正在开发一个 facebook 画布应用程序，我想对其进行负载测试。我知道 facebook 对自动化测试的限制，所以我通过创建一个在 nginx 下提供的虚假 Web 应用程序并将我的 /etc/hosts 将 graph.facebook.com 指向 127.0.0.1 来模拟图形 api 调用。

我正在使用 jmeter 对应用程序进行负载测试，并且模拟工作正常。现在我想模拟缓慢的图形 api 响应，看看它们如何影响我的应用程序。如何配置 nginx 以便它为发送到模拟 graph.facebook.com 应用程序的每个请求插入延迟？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-07T19:35:23.047

您可以通过添加延迟来减慢 localhost（网络）的速度。
使用`ifconfig`命令查看网络设备：在 localhost 上它可能是`lo`，在 LAN 上它的`eth0`.

*   添加延迟使用此命令（在`lo`网络设备上添加 1000ms 延迟）

    `tc qdisc add dev lo root netem delay 1000ms`

*   改变延迟使用这个

    `tc qdisc change dev lo root netem delay 1ms`

*   查看当前延迟

    `tc qdisc show dev lo`

*   并消除延迟

    `tc qdisc del dev lo root netem delay 1000ms`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-05-11T13:03:35.900

我之前的回答有效，但它更适合所有请求都需要放慢速度的情况。从那以后，我不得不想出一个解决方案，让我只能根据具体情况打开速率限制，并提出以下配置。在使用它之前，请务必阅读整个答案，因为有一些重要的细微差别需要知道。

```
 location / {
        if (-f somewhere/sensible/LIMIT) {
           echo_sleep 1;
           # Yes, we need this here too.
           echo_exec /proxy$request_uri;
        }

        echo_exec /proxy$request_uri;
    }

    location /proxy/ {
        internal;
        # Ultimately, all this goes to a Django server.
        proxy_pass http://django/;
        proxy_set_header Host            $http_host;
        proxy_set_header X-Forwarded-For $remote_addr;
    } 
```

**重要说明：各种路径中是否存在正斜杠会有所不同。**例如`proxy_pass http://django`，没有尾部斜杠的 ，与上面代码中的行*不*一样。

操作原理很简单。如果文件`somewhere/sensible/LIMIT`存在，则匹配的请求`location /`会暂停一秒钟，然后再继续。所以在我的测试套件中，当我想要网络减速时，我创建文件，当我想要消除减速时，我将其删除。（而且我有清理代码，可以在每次测试之间删除它。）理论上，我更喜欢为此使用变量而不是文件，但问题是每次请求都会重新初始化变量。所以我们不能有一个`location`块来设置一个变量来关闭限制，另一个来关闭它。（这是我尝试的第一件事，但由于变量的生命周期而失败）。可能可以使用 Perl 模块或 Lua 来保存变量或摆弄 cookie，但我决定不走这些路线。

重要笔记：

1.  `echo`将模块中的指令（如`echo_sleep`和`echo_exec`）与导致产生响应的 nginx 的 stock 指令混合不是一个好主意。我最初`echo_sleep`在一起`proxy_pass`并得到了不好的结果。这就是为什么我们有将股票指令与东西`location /proxy/`分开的块。（有关通过拆分块解决的类似冲突，`echo`请参阅此[问题。）](https://github.com/openresty/echo-nginx-module/issues/5)

2.  `echo_exec`由于工作原理，内部和外部的两个指令`if`是必需的`if`。

3.  该`internal`指令阻止客户端直接请求`/proxy/...`URL。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-24T12:38:05.830

我已经修改了一个 nginx 配置来使用`limit_req_zone`和`limit_req`引入延迟。下面将服务速率降低到每秒 20 个请求 ( `rate=20r/s`)。我已设置`burst=1000`为我的应用程序不会收到 503 响应。

```
http {
    limit_req_zone $binary_remote_addr zone=one:10m rate=20r/s;
    [...]
    server {
        [...]
        location / {
            limit_req zone=one burst=1000;
            [...]
        }
    }
} 
```

文档在[这里](http://nginx.org/en/docs/http/ngx_http_limit_req_module.html)。我不相信有一种方法可以使用这种方法来指定统一的延迟。

# android - NoClassDefFoundError。如何解决？

> ID：14752946
> 
> 赞同：0
> 
> 时间：2013-02-07T14:01:30.890
> 
> 标签：android, noclassdeffounderror

我正在创建一个 Android 应用程序，该应用程序使用 Microsoft Hawaii SDK 来执行用手机相机拍摄的图片的 OCR。在执行我的 Android 应用程序期间出现错误。日志猫是这样的：

```
02-07 14:48:59.617: E/AndroidRuntime(24660): FATAL EXCEPTION: main
02-07 14:48:59.617: E/AndroidRuntime(24660): java.lang.NoClassDefFoundError: com.example.mobile.RecognitionActivity
02-07 14:48:59.617: E/AndroidRuntime(24660):    at com.example.mobile.FotocameraActivity.onActivityResult(FotocameraActivity.java:143)
02-07 14:48:59.617: E/AndroidRuntime(24660):    at android.app.Activity.dispatchActivityResult(Activity.java:4820)
02-07 14:48:59.617: E/AndroidRuntime(24660):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2980)
02-07 14:48:59.617: E/AndroidRuntime(24660):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2435)
02-07 14:48:59.617: E/AndroidRuntime(24660):    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2476)
02-07 14:48:59.617: E/AndroidRuntime(24660):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1990)
02-07 14:48:59.617: E/AndroidRuntime(24660):    at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3355)
02-07 14:48:59.617: E/AndroidRuntime(24660):    at android.app.ActivityThread.access$700(ActivityThread.java:127)
02-07 14:48:59.617: E/AndroidRuntime(24660):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1155)
02-07 14:48:59.617: E/AndroidRuntime(24660):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-07 14:48:59.617: E/AndroidRuntime(24660):    at android.os.Looper.loop(Looper.java:137)
02-07 14:48:59.617: E/AndroidRuntime(24660):    at android.app.ActivityThread.main(ActivityThread.java:4476)
02-07 14:48:59.617: E/AndroidRuntime(24660):    at java.lang.reflect.Method.invokeNative(Native Method)
02-07 14:48:59.617: E/AndroidRuntime(24660):    at java.lang.reflect.Method.invoke(Method.java:511)
02-07 14:48:59.617: E/AndroidRuntime(24660):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:816)
02-07 14:48:59.617: E/AndroidRuntime(24660):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:583)
02-07 14:48:59.617: E/AndroidRuntime(24660):    at dalvik.system.NativeStart.main(Native Method) 
```

FotocameraActivity.Java 的代码是这样的：

```
package com.example.mobile;

import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Rect;
import android.location.GpsStatus;
import android.location.GpsStatus.Listener;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore;
import android.util.Log;

import android.view.View;
import android.widget.ImageView;

public class FotocameraActivity extends Activity {

   // dati che servono per la fotocamera
private static final int CAMERA_REQUEST = 100; // un numero a nostro
                                                                                                // piacimento
File tmpFotoFile = null;
byte[] bitmapdata;
ImageView preview;
LocationManager locationManager;
String gps;
final static String ARRAY_BYTE = "ARRAY_BYTE";
final static String GPS = "GPS";

@Override
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        locationManager = (LocationManager)this.getSystemService(Context.LOCATION_SERVICE);
        if(locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)){
        startGpsTracking();
        }

        try {
                launchCamera();
        } catch (IOException e) {
                throw new RuntimeException(e);
        }
}

private void startGpsTracking() {
         // TODO Auto-generated method stub
         locationManager.addGpsStatusListener(gpsListener);
         locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 500, 3, myLocationListener);
   }

private Listener gpsListener = new Listener(){
   public void onGpsStatusChanged(int status){
         switch(status){
         case GpsStatus.GPS_EVENT_FIRST_FIX:
                Log.d(LOCATION_SERVICE,"onGpsStatusChanged First Fix");
                break;
         case GpsStatus.GPS_EVENT_SATELLITE_STATUS:
                Log.d(LOCATION_SERVICE, "onGpsStatusChanged Satellite");
                break;
         case GpsStatus.GPS_EVENT_STARTED:
                Log.d(LOCATION_SERVICE, "onGpsStatusChanged Started");
                break;
         case GpsStatus.GPS_EVENT_STOPPED:
                Log.d(LOCATION_SERVICE, "onGpsStatusChanged Stopped");
                break;
         }
   }
};

private LocationListener myLocationListener = new LocationListener(){

         public void onLocationChanged(Location location) {
                // TODO Auto-generated method stub
                double lng = location.getLongitude(), lat = location.getLatitude();
                gps += String.format("%6f", lng) + "#" + String.format("%6f", lat); 

         }

         public void onProviderDisabled(String provider) {
                // TODO Auto-generated method stub

         }

         public void onProviderEnabled(String provider) {
                // TODO Auto-generated method stub

         }

         public void onStatusChanged(String provider, int status, Bundle extras) {
                // TODO Auto-generated method stub

         }

};

   private void launchCamera() throws IOException {

        // Fase 1
        tmpFotoFile = File.createTempFile("OCRPic", null);

        Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI); //Uri.fromFile(tmpFotoFile));
        startActivityForResult(cameraIntent, CAMERA_REQUEST);
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        if (requestCode == CAMERA_REQUEST) {
                Bitmap datifoto = null;
                Uri picUri = data.getData();
                if(picUri != null){

                       try {
                              datifoto = android.provider.MediaStore.Images.Media.getBitmap(this.getContentResolver(), picUri);
                              //datifoto = android.provider.MediaStore.Images.Media.getBitmap(this.getContentResolver(), android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);//Uri.fromFile(tmpFotoFile));
                              } catch (FileNotFoundException e) {
                                    throw new RuntimeException(e);
                              } catch (IOException e) {
                                    throw new RuntimeException(e);
                              }
                }
                       ByteArrayOutputStream bos = new ByteArrayOutputStream();
                       datifoto.compress(Bitmap.CompressFormat.JPEG, 70, bos);
                       bitmapdata = bos.toByteArray();
                       //tmpFotoFile.delete();

                SimpleView view = new SimpleView(this, datifoto); // creo l'istanza
                                                                                                                        // // della                                                                                                       // view...
                setContentView(view); // e la setto

                Intent intentRecognize = new Intent(this, RecognitionActivity.class); **<-Here refers the logcat for the error**
                intentRecognize.putExtra(ARRAY_BYTE, bitmapdata);
                intentRecognize.putExtra(GPS, gps);
                startActivity(intentRecognize);
        }

}
   }

class SimpleView extends View{

private Bitmap bitmap;
private Paint tmpPaint = new Paint(Paint.ANTI_ALIAS_FLAG);

public SimpleView(Context context, Bitmap bitmap) {
        super(context);
        this.bitmap = Bitmap.createScaledBitmap(bitmap,480,320,false);//ridimensiono l'immagine
}

@SuppressLint("DrawAllocation")
@Override
protected void onDraw(Canvas canvas){
super.onDraw(canvas);
canvas.drawBitmap( bitmap, null , new Rect(0,0,getWidth(),getHeight()),tmpPaint);
}

} 
```

而 RecognitionActivity.Java 的代码是这样的：

```
package com.example.mobile;

import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.TextView;
import microsoft.hawaii.sampleappbase.HawaiiBaseAuthActivity;

public class RecognitionActivity extends HawaiiBaseAuthActivity {

private TextView tv;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_recognition);

    tv.setText("Prova");
    tv.setVisibility(View.VISIBLE);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_recognition, menu);
    return true;
}

} 
```

我注意到，在 RecognitionActivity 中，如果我从 Activity 扩展该活动，它可以工作，但如果我扩展 HawaiiBaseAuthActivity，它会崩溃。

我注意到 logcat 中的另一条消息，它出现在应用程序启动的那一刻：

```
02-07 14:48:14.717: E/dalvikvm(24660): Could not find class 'com.example.mobile.RecognitionActivity', referenced from method com.example.mobile.FotocameraActivity.onActivityResult 
```

但是该活动是在我的工作区中定义的！

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T14:07:45.540

您是否已将 com.example.mobile.RecognitionActivity 添加到 AndroidManifest.xml 中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:02:39.787

1.  在清单文件中提及您的活动名称和操作以及类别。
2.  在您的活动中提及您的起始内容视图并在活动中提及您的视图 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T14:21:08.570

似乎您尚未在清单文件中注册“RecognitionActivity”活动。

# iphone - 当用户在应用程序中截屏时显示警报消息

> ID：14752947
> 
> 赞同：0
> 
> 时间：2013-02-07T14:01:33.010
> 
> 标签：iphone, xcode

当用户在 iphone 中截屏并退出应用程序时，我如何显示警报，直到用户将其从 iphone 照片库中删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:39:21.533

[您可以通过Darwin notification](https://developer.apple.com/library/mac/#DOCUMENTATION/Darwin/Conceptual/MacOSXNotifcationOv/DarwinNotificationConcepts/DarwinNotificationConcepts.html)检测屏幕截图。至于检测截图是否被删除，我认为不可能。即使是这样，也不能保证图像没有上传或以其他方式共享。

# oop - 类是面向对象语言中的对象吗

> ID：14752948
> 
> 赞同：10
> 
> 时间：2013-02-07T14:01:34.137
> 
> 标签：oop, class, object, instance

**类是面向对象语言中的对象吗？**Class 方法如何仅通过名称访问`class.method name`？（内部工作）。这和 a 一样`object.method`吗？

如果 Class 与 object 相同（属于 object 类，它是 OO 中所有事物的超类）并且我们实例化它（使其成为对象），**我们可以创建 Object 类以外的类的实例的实例。**

（主要对**理论观点**感兴趣，即使实际上不需要）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T14:29:13.247

好吧，这取决于您使用的语言；在一切都是对象（例如[Smalltalk](http://en.wikipedia.org/wiki/Smalltalk)）的纯 OO 语言中，类也不例外，也是对象。在其他不将类视为一等公民的语言中，它们只是特殊的语言结构或原始类型。从现在开始，我将使用 Smalltalk 作为目标语言，因为它支持反射和同质的风格。

> 如何仅通过 class.method 名称访问 Class 方法？（内部工作）。这和object.method一样吗？

由于类是对象，因此它们又是类（[元类](http://en.wikipedia.org/wiki/Metaclass)）的实例。因此，向类发送消息只是向一个对象发送消息，该对象的作用是表示类的行为方式。那里有很多文献，您可以在[此处](http://marianopeck.wordpress.com/2011/04/30/smalltalk-reflective-model/)和[此处](http://www.cs.washington.edu/education/courses/cse341/04wi/lectures/17-smalltalk-classes.html)查看示例以进行一些介绍。

> 如果 Class 与 object 相同（属于 object 类，它是 OO 中所有事物的超类）并且我们实例化它（使其成为对象），我们可以创建 Object 类以外的类的实例的实例。

我不确定我是否在这里跟随你，但为了澄清起见，并非总是`Object`所有类的超类。问题是，如果你开始关注类和元类之间的关系，你可能会遇到一种无限循环。不同的语言以不同的方式解决这个问题，例如，在 VisualWorks Smalltalk 中，`Object`它是`nil`. 事情是它`nil`也是一个对象（记住，一切都是对象），它实际上代表“无”。如您所料，`nil`它是一个类 ( `UndefinedObject`) 的实例，它还实现了一些类协议。因此，它可以用来表示没有任何继承的类形式:)。

最后，我不知道这是否回答了您的问题，但是是的，您可以使用完整的反射功能做很多很酷的事情，例如动态创建新类或重塑现有类。我将在此处留下一些您可能会对此主题感兴趣的文档：

*   [元类](http://esug.org/data/Old/vw-tutorials/Adv_VWNotPrintable/Metaclasses.pdf)
*   [了解元类](http://scg.unibe.ch/download/st/09Metaclasses.pdf)
*   [调试对象](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.57.3575)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T14:06:26.920

类不是对象，您可以将其视为对象的“蓝图”。它描述了该对象的形状和行为。对象是类的实例。

请参阅[此处](http://en.wikipedia.org/wiki/Class_%28computer_programming%29)了解更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T14:06:52.267

**类是面向对象语言中的对象吗？**

阶级的概念首先是理论上的。即使您的语言不支持“类”的正式概念（例如 Javascript），您也可以使用“类”语义定义事物。类是对象的*模板*，您可以从中创建*实例*。

**如何仅通过 class.method 名称访问 Class 方法？**

我不太清楚你的意思。一些语言支持“静态”或“类”方法，它们是不在类实例的上下文中调用的方法。因此，它与“object.method”不同，后者是类上的普通方法，其中“this”（或等效项）将是调用该方法的实例。

**Java**（来自评论）

对于 Java，有一个名为 的类`Object`和一个名为 的类`Class`。 [看到这个](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html)。这些 Java 构造**与 Class 和 Object的*****概念*****是分开的***。前者是实现细节——它们是设计者如何构建语言，后者是一般概念。因此，在 Java 中，您可以拥有*Object*的实例，其中该实例是类型`Object`（Java 构造）的对象（概念）。*

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T14:39:12.267

对象的基本概念意味着已分配了一些内存。正如[devdigital](https://stackoverflow.com/users/248164/devdigital)所说，类只是一个对象的蓝图，它拥有基本结构并确定对象在实例化时的行为方式。

类只是身体（没有灵魂），对象是与环境相互作用的活体（有灵魂），或者在生物学方面对外部刺激（公共方法和属性）做出反应，类似于生活哲学:)

从技术上讲，类只是驻留在内存中的机器可解释代码（不需要主内存或寄存器）。对象是加载到可执行内存（寄存器/主内存）中的代码*

# jsp - JSP 中的重定向 URL

> ID：14752954
> 
> 赞同：0
> 
> 时间：2013-02-07T14:01:53.840
> 
> 标签：jsp, url, redirect

我正在使用 jsp 开发一个 web 应用程序，它有一个名为的页面`product.jsp`，它有一个添加产品信息的表单。add 函数工作正常，也可以添加到 MySql 表中。

但我的问题是，即使它添加了以下网址，即使我刷新，它仍然保留在地址栏中。

```
http://localhost:8084/SupipiCrafts_Backup/product_Servlet?txtICode1=ITM002&txtPackNo1=PCK003&txtIName1=Mike+Statue&txtMat1=Wood&txtCat1=Animals&txtSize1=Medium&txtSID1=SUP008&txtSName1=Safa&txtPDate1=2013-02-27&txtQty1=45&txtUprice1=34.0&txtTprice1=1530.0&txtlRate1=34.0&txtfRate1=54.0&txtRlvl1=20&txtLoc1=&txtDesc1=&btnUpdate=o 
```

我想`product.jsp`在执行添加功能后重定向并加载页面。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T03:49:35.980

至于我在没有 servlet url 的情况下重定向到页面的要求，我使用 javascript 重定向到`product.jsp`页面，如下代码所示：

```
<script>
location.replace("product.jsp");
</script> 
```

谢谢 ！

# c# - XElement.SetElementValue 在值之前和之后添加新行

> ID：14752958
> 
> 赞同：0
> 
> 时间：2013-02-07T14:02:04.850
> 
> 标签：c#, .net, xml, linq, linq-to-xml

我有一个替换 resx 文件中值标记内容的代码。如果我获取值元素并更改其内容，一切都会按预期工作：

```
foreach (XElement dataEl in doc.Root.Descendants("data"))
{
    XElement valueEl = dataEl.Element("value");
    valueEl.Value = valueEl.Value;
    Console.WriteLine(dataEl);
} 
```

结果是：

```
...
<value>myvalue</value>
... 
```

但设置值：

```
dataEl.SetElementValue("value", dataEl.Value); 
```

结果是：

```
...
<value>
myvalue
</value>
... 
```

为什么要`SetElementValue`添加这些新行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:50:56.493

MSDN 中的 XElement.Value：获取或设置此元素的串联文本内容。

因此 dataEl.Value 返回在“数据”节点内找到的所有文本。在这种情况下，只有“value”子节点存在，所以它返回它的文本，但理论上你可以在里面有其他子节点，比如“value2”。

在这种情况下，您最终会得到“myvalue”+newline+“myvalue2”，这似乎是.net 中的默认实现，我认为如果您也只有一个孩子，它会使用这个换行符。

另一方面： `XElement valueEl = dataEl.Element("value");`

valueEl 没有任何子元素，因此 valueEl.Value 只是一个字符串。

为什么要使用 dataEl.SetElementValue("value", dataEl.Value) ？是否要设置父“数据”节点的所有连接文本？

# java - 使用 selenium webdriver 在页面中查找选项卡

> ID：14752961
> 
> 赞同：1
> 
> 时间：2013-02-07T14:02:08.550
> 
> 标签：java, selenium, webdriver, selenium-webdriver

我是 selenium 的新手，我正在尝试访问以下网站上的标签完整记分卡标签。

[http://www.espncricinfo.com/icc-womens-world-cup-2013/engine/current/match/594903.html](http://www.espncricinfo.com/icc-womens-world-cup-2013/engine/current/match/594903.html)。

我的Java代码是：

```
driver.get("http://www.espncricinfo.com/icc-womens-world-cup-2013/engine/current/match/594903.html");

driver.manage().timeouts().implicitlyWait(5L, TimeUnit.SECONDS);
driver.findElement(By.xpath("//*[@id='st_1']")).click(); 
```

但是，它似乎无法找到该选项卡。你能帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:05:26.610

“选项卡”位于`iframe`

在你可以对 an 中的元素做任何事情之前`iframe`，你必须使用“激活”框架`driver.switchTo().frame("live_iframe")`

# mysql - MySQL 'AND' 查询未按预期工作

> ID：14752972
> 
> 赞同：1
> 
> 时间：2013-02-07T14:02:45.523
> 
> 标签：mysql

我目前正在处理 3 张桌子。配方、成分和配方。这是经典的多对多情况，recipeIng 可以解决这个问题。

但是，我无法获得我认为的一个相当简单的“AND”查询。我想要实现的是一次搜索多种成分。例如：

```
SELECT r.recipeTitle AS recipe
FROM Recipe r
WHERE recipeID IN(
    SELECT r.recipeID
    FROM recipeIng il, Ingredient i
    WHERE (il.ingredientID = i.ingredientID)
    AND (il.recipeID = r.recipeID)
    AND (i.ING LIKE '%cheese%' AND i.ING LIKE '%salmon%')

); 
```

查询运行时，它不输出任何内容。我似乎看不到我在这里做错了什么。任何帮助将非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T14:09:38.940

所以基本上你想要包含你查询的任何成分的食谱。这可以使用简单的直接连接来执行：

```
SELECT DISTINCT(r.recipeTitle) AS recipe
FROM Ingredient i
INNER JOIN recipeIng il ON il.ingredientID = i.ingredientID
INNER JOIN Recipe r ON r.recipeID = il.recipeID
WHERE i.ING LIKE '%cheese%' OR i.ING LIKE '%salmon%' 
```

`DISTINCT()`确保您不会两次看到相同的食谱，以防它包含两种成分。

~~如果这两种成分都必须存在于食谱中，则必须使用`AND`而不是`OR`.~~

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T14:05:07.303

首先，您的查询可以大大简化，因为您不需要外部查询。以下是完全相同的：

```
SELECT r.recipeTitle AS recipe
FROM recipeIng il, Ingredient i, Recipe r
WHERE (il.ingredientID = i.ingredientID)
AND (il.recipeID = r.recipeID)
AND (i.ING LIKE '%cheese%' AND i.ING LIKE '%salmon%') 
```

其次，您不需要所有这些括号。

```
SELECT r.recipeTitle AS recipe
FROM recipeIng il, Ingredient i, Recipe r
WHERE il.ingredientID = i.ingredientID
AND   il.recipeID = r.recipeID
AND   i.ING LIKE '%cheese%' 
AND i.ING LIKE '%salmon%' 
```

第三，您应该 INNER JOIN 表以使它们之间的关系更清晰：

```
SELECT r.recipeTitle AS recipe
FROM recipeIng il JOIN 
     Ingredient i ON  il.ingredientID = i.ingredientID JOIN
     Recipe r ON il.recipeID = r.recipeID
WHERE i.ING LIKE '%cheese%' 
AND   i.ING LIKE '%salmon%' 
```

至此，问题应该很清楚了——有 2 种可能的可能性，2 种可能性大于 1 种可能性。

1) 您的`ING`字段将配方的所有成分存储在一个字段中。如果是这种情况，那么您没有一个食谱，其成分需要奶酪和鲑鱼。

2) 您的`ING`字段每行仅存储 1 种成分。`Cheese`但是，您要求的是包含和的单行`Salmon`。这不是您的意图，因此查询是错误的。

```
-- SELECT ALL RECIPES USING CHEESE *OR* SALMON
SELECT r.recipeTitle AS recipe
FROM recipeIng il JOIN 
     Ingredient i ON  il.ingredientID = i.ingredientID JOIN
     Recipe r ON il.recipeID = r.recipeID
WHERE i.ING LIKE '%cheese%' 
AND   i.ING LIKE '%salmon%'

-- SELECT ALL RECIPES USING CHEESE *AND* SALMON
SELECT r.recipeTitle AS recipe
FROM recipeIng il JOIN 
     Ingredient iCheese 
         ON  il.ingredientID = i.ingredientID 
         AND i.ING LIKE '%cheese%'  JOIN
     Ingredient iSalmon 
         ON  il.ingredientID = i.ingredientID 
         AND i.ING LIKE '%salmon%'  JOIN 
     Recipe r ON il.recipeID = r.recipeID 
```

请注意，以上仅为示例 - 在不了解您的架构的情况下，这些只是提示和建议 :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T14:05:09.527

使用`i.ING LIKE '%cheese%' OR i.ING LIKE '%salmon%'`而不是`AND`，并添加`GROUP BY r.recipeID`with`HAVING COUNT(DISTINCT i.ING ) = 2`以确保所选内容`r.recipeID`同时具有`ING`：

```
SELECT r.recipeTitle AS recipe
FROM Recipe r
WHERE recipeID IN(
    SELECT r.recipeID
    FROM recipeIng il
    INNER JOIN Ingredient i ON il.ingredientID = i.ingredientID 
    WHERE il.recipeID = r.recipeID
      AND (i.ING LIKE '%cheese%' OR i.ING LIKE '%salmon%')
    GROUP BY r.recipeID
    HAVING COUNT(DISTINCT i.ING ) = 2
); 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/88c25/1)

因此，如果`r.recipeID`只有其中一个，则`COUNT(DISTINCT i.ING )`不会等于 2，因此它将被淘汰。

`HAVING COUNT(DISTINCT i.ING ) = 2`将为您提供那些只有奶酪和鲑鱼两个标签的食谱，没有更多成分，如果您正在寻找那些至少具有两种成分的食谱，请使用``HAVING COUNT(DISTINCT i.ING ) >= 2`。

这是*假设*成分`ING`作为每行一个值输入到字段中。

# php - 是否可以从 PHP 服务器接收来自 Ajax 的响应

> ID：14752973
> 
> 赞同：0
> 
> 时间：2013-02-07T14:02:46.490
> 
> 标签：php, javascript, jquery

我正在尝试向大量联系人发送电子邮件，并且我希望能够测量发送的程度，即显示一个加载栏，显示发送电子邮件时的发送百分比。下面是html

```
<div id="loading" style="height:20px;"></div> 
```

然后是Javascript代码

```
$.ajax({
    type: "POST",
    url: "engine/send-mail.php",
    data: "action=sendmail",
    success: function (Databack) {
        $('#loading').css('width', Databack);
    }
}); 
```

注意php服务器端代码

```
$query = "SELECT email FROM clientsdata";
while ($data = mysql_fetch_array($query)) {
    extract($data);
    mail_user($email, $subject, $message);
    $no++;
    echo $no."px;";
} 
```

更像是一个进度条，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:08:30.697

您可以使用许多 PHP 类来更新网页中的可视进度条。

例如：[http ://www.m4d3l-network.com/developpement/php/simple-progress-bar/](http://www.m4d3l-network.com/developpement/php/simple-progress-bar/)

Zend Framezork 嵌入了这个功能顺便说一句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:21:12.073

看看这篇关于在数据进入时使用 jQuery 显示 ajax 的[帖子。](https://stackoverflow.com/a/6093244/2033671)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T14:22:04.677

您可以查询例如。40 个电子邮件地址，而不是全部。然后多次调用您的电子邮件脚本，每次调用 ajax 时您都会发送接下来的 40 封电子邮件……因此您可以非常轻松地设置进度条。也许在您的数据库中创建一个包含所有要发送的电子邮件的电子邮件队列，并且每个 ajax 调用都会从队列中删除已发送的电子邮件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T14:06:35.903

您将无法这样做，因为您的 php 只会在脚本结束时响应。

您可以做的是将一个 ID 链接到数据库的每封电子邮件，这样之后您就可以在 javascript 中循环遍历 UID 数组来链接 ajax 调用。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-07T14:07:38.837

您需要一个异步请求。有几种方法可以做到这一点，例如长轮询或 Web Sockets。我不确定周围是否有任何框架，但[这个帖子](https://stackoverflow.com/questions/124462/asynchronous-php-calls)似乎是相关的。

# c# - SonarException：未知指标：临时方法行

> ID：14752976
> 
> 赞同：2
> 
> 时间：2013-02-07T14:02:48.673
> 
> 标签：c#, code-analysis, sonarqube

我一直在寻找答案好几个小时，但我没有找到任何解决方案。

我正在为 C# 项目运行声纳，我使用 Sonar 3.4 和 sonar-runner 2.0 以及 C# 插件：

*   声纳-csharp-core-plugin-1.4
*   声纳-csharp-fxcop-plugin-1.4
*   声纳-csharp-gallio-plugin-1.4
*   声纳-csharp-gendarme-plugin-1.4
*   声纳-csharp-ndeps-plugin-1.4
*   声纳-csharp-squid-plugin-1.4
*   声纳-csharp-stylecop-plugin-1.4

在通过 sonar-runner 运行分析后，我得到了那个异常

```
    线程“主”org.sonar.runner.RunnerException 中的异常：org.sonar.api.utils.SonarException：无法装饰 'org.sonar.api.resources.File@243e2c21[key=ApplicationName.cs,dir=,filename =ApplicationName.cs,语言=C#]'
        在 org.sonar.runner.Runner.delegateExecution(Runner.java:288)
        在 org.sonar.runner.Runner.execute(Runner.java:151)
        在 org.sonar.runner.Main.execute(Main.java:84)
        在 org.sonar.runner.Main.main(Main.java:56)
    引起：org.sonar.api.utils.SonarException: 装饰失败'org.sonar.api.resources.File@243e2c21[key=ApplicationName.cs,dir=,filename=ApplicationName.cs,language=C#]'
        在 org.sonar.batch.phases.DecoratorsExecutor.executeDecorator(DecoratorsExecutor.java:84)
        在 org.sonar.batch.phases.DecoratorsExecutor.decorateResource(DecoratorsExecutor.java:70)
        在 org.sonar.batch.phases.DecoratorsExecutor.decorateResource(DecoratorsExecutor.java:63)
        在 org.sonar.batch.phases.DecoratorsExecutor.decorateResource(DecoratorsExecutor.java:63)
        在 org.sonar.batch.phases.DecoratorsExecutor.execute（DecoratorsExecutor.java:55）
        在 org.sonar.batch.phases.Phases.execute（Phases.java:92）
        在 org.sonar.batch.bootstrap.ProjectModule.doStart（ProjectModule.java:129）
        在 org.sonar.batch.bootstrap.Module.start（Module.java:68）
        在 org.sonar.batch.bootstrap.BatchModule.analyze(BatchModule.java:147)
        在 org.sonar.batch.bootstrap.BatchModule.analyze(BatchModule.java:141)
        在 org.sonar.batch.bootstrap.BatchModule.doStart(BatchModule.java:136)
        在 org.sonar.batch.bootstrap.Module.start（Module.java:68）
        在 org.sonar.batch.bootstrap.BootstrapModule.doStart（BootstrapModule.java:83）
        在 org.sonar.batch.bootstrap.Module.start（Module.java:68）
        在 org.sonar.batch.Batch.execute(Batch.java:106)
        在 org.sonar.runner.internal.batch.Launcher.executeBatch（Launcher.java:6
        在 org.sonar.runner.internal.batch.Launcher.execute（Launcher.java:61）
        在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        在 java.lang.reflect.Method.invoke(Method.java:601)
        在 org.sonar.runner.Runner.delegateExecution(Runner.java:285)
        ... 3 更多
    引起：org.sonar.api.utils.SonarException：未知指标：temp-method-lines
        在 org.sonar.batch.index.DefaultIndex.addMeasure(DefaultIndex.java:184)
        在 org.sonar.batch.DefaultDecoratorContext.saveMeasure（DefaultDecoratorContext.java:111）
        在 org.sonar.plugins.uselesscodetracker.decorator.TempMethodLinesDecorator.computeDistributionFromChildren(TempMethodLinesDecorator.java:58)
        在 org.sonar.plugins.uselesscodetracker.decorator.TempMethodLinesDecorator.decorate(TempMethodLinesDecorator.java:49)
        在 org.sonar.batch.phases.DecoratorsExecutor.executeDecorator(DecoratorsExecutor.java:79)
        ... 24 更多

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:04:18.240

我不知道这个“temp-method-lines”指标是什么，从来没有听说过......

请安装 .NET 和 C# 插件生态系统的最新版本：[2.0 版](http://docs.codehaus.org/display/SONAR/C#+Ecosystem)。此外，请确保您卸载任何其他可能带来此未知指标的插件（可能是您编写的自定义插件？？）。

**请升级到 Sonar 3.4.1，因为 3.4 版本存在严重错误。**

# android - jQuery Mobile 向下滑动和向上滑动适用于 Android 移动网站

> ID：14752979
> 
> 赞同：-4
> 
> 时间：2013-02-07T14:02:53.070
> 
> 标签：android, iphone, html, jquery-mobile, swipe

有谁知道如何使用 jquery 在移动设备上设置正确的代码以在移动设备上向下和向上滑动？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T14:06:00.023

不幸的是，jQuery mobile 中不存在 swipeup 和 swipedown，它们也没有计划用于 1.3 版。这里有一个第 3 方插件：http: [//developingwithstyle.blogspot.com/2010/11/jquery-mobile-swipe-up-down-left-right.html](http://developingwithstyle.blogspot.com/2010/11/jquery-mobile-swipe-up-down-left-right.html)。像使用普通事件一样使用它们：向下滑动和向上滑动。

如果你需要这个实现，你也可以使用这个插件：http: [//www.netcu.de/jquery-touchwipe-iphone-ipad-library](http://www.netcu.de/jquery-touchwipe-iphone-ipad-library)。它也适用于安卓设备。这是一个最坏的情况解决方案，因为与官方事件不同，这些事件在桌面浏览器上不起作用。

```
$("#wrapper").touchwipe({
     wipeLeft: function() { 
         $("#carousel").trigger("next", 1);
     },
     wipeRight: function() { 
         $("#carousel").trigger("next", 1);        
     },
     min_move_x: 20,
     min_move_y: 20,
     preventDefaultEvents: true
}); 
```

**编辑 ：**

这是一个工作示例： http: [//jsfiddle.net/Gajotres/97h45/](http://jsfiddle.net/Gajotres/97h45/)仅在 Android 和 iOs 设备上进行测试。我已经在 iOS 6 和 Android 4.1.1 上测试过了

# r - 如何在 R 中实现递归过程？

> ID：14752980
> 
> 赞同：2
> 
> 时间：2013-02-07T14:02:58.783
> 
> 标签：r, recursion

假设我有一个向量`v = c(250,1200,700)`、一个起始值`n`和一个函数，例如

```
f = function(v){

g = function(v){ 
    cases(
    v <= 20 -> 0.1,
    v > 20 & v <= 100 -> 0.075,
    v > 100 -> .05
    )  
  }
  suppressWarnings(g(v))
} 
```

`f`是使用包中编写`cases`的`memisc`——我对 R 还是新手，很想知道是否`f`可以用“更好”的方式进行编码。无论如何，我正在寻找将执行以下递归过程的代码（包括“大”长度的向量）：

```
f(n), 
f(n)*v[1]+n, 
f(f(n)*v[1]+n)*v[2] + f(n)*v[1]+n, 
f(f(f(n)*v[1]+n)*v[2] + f(n)*v[1]+n)*v[3] + f(f(n)*v[1]+n)*v[2] + f(n)*v[1]+n 
```

最终我对最后一行的价值感兴趣。

为任何帮助而欢呼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T15:27:15.637

如果我理解正确，这就是您所说的过程：

```
 X1 = f(n)
 X2 = X1*v[1] + n
 X3 = F(X2)*v[2] + X2
 X4 = F(X3)*v[3] + X3 
... 
```

如果您需要所有中间步骤，则递归函数相当无用，因为您还需要存储在结果中的中间步骤。因此，您可以使用基本的 R 轻松编写代码：

```
Thefun <- function(v,n){
  l <- length(v)
  res <- numeric(l+1)

  res[1] <- g(n)
  res[2] <- res[1]*v[1] + n
  for(i in seq(2,l)){
    res[i+1] <- res[i] + g(res[i])*v[i]
  }
  return(res)
} 
```

结果的最后一个值是您需要的结果。由于您只需要最后一步的结果，因此您可以使用以下方法递归地执行此操作`Recall`：

```
Recfunc <- function(v,n){
    l <- length(v)
    if(l > 0){
        res <- Recall(v[-l],n)
        return(g(res)*v[l] + res)
    } else {
      return(n)
    } 
} 
```

* * *

在旁注上

你可以定义你的函数 g 不同，像这样（我称之为 fv）：

```
fv <- function(v){
   0.1*(v <= 20) + 0.075*(v > 20 & v <=100) + 0.05*(v>100)
} 
```

如果与您的功能相比，您的速度将提高 6 倍。

```
vec <- sample(1:150,1e5,TRUE)
benchmark(
   fv(vec),
   g(vec),
   columns=c("test","replications","elapsed","relative"),
   replications = 1000

)

     test replications elapsed relative
1 fv(vec)         1000    9.39    1.000
2  g(vec)         1000   56.30    5.996 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T14:59:44.457

我在这里假设这`n`是 v 的长度。我像这样重写 recursion：

```
y1 <- n                  ## slight change here
y2 <- f(y1)*v[1] +y1, 
y3 <- f(y2)*v[2] +y2
y4 <- f(y3)*v[3] +y3
.... I can''t see the terms > length(v) so my first assumption 
```

因此，例如，您可以像这样实现：

```
filter.f <- function(func=f,coef=v){
  n <-  length(coef)
  y <- numeric(n)
  y[1] <- n
  for(i in 2:n)
    y[i] <- func(y[i-1])*coef[i-1]+y[i-1] ## here the recursion
  y[1] <- f(n)
  y
}

 filter.f()
[1]   0.1 124.0 159.0 191.5
 v=c(250, 1200, 700)
filter.f()
[1]   0.1  28.0 118.0 
```

# php - 更改 yoast SEO 插件设置的 Wordpress 语言环境

> ID：14752984
> 
> 赞同：1
> 
> 时间：2013-02-07T14:03:15.400
> 
> 标签：php, html, wordpress

我的 WordPress 网站位于英国。我能够将 html属性`lang`从更改`en-US`为`en-GB`，但是当我查看我的源代码时`og:locale`，打开图形的属性显示为`en-US`，它是由 yoast SEO 插件生成的。有没有办法将语言环境更改为`en-GB`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T14:35:07.890

从[文档中](http://yoast.com/wordpress-seo-api-docs/)：

> `wpseo_locale (string)`
> 
> 允许更改 opengraph 集中使用的语言环境（以后可能在其他位置）。

这是其他人如何在functions.php中解决它[的具体示例：](http://wordpress.org/support/topic/plugin-wordpress-seo-by-yoast-how-do-you-set-the-oglocale-value)

```
add_filter('wpseo_locale', 'override_og_locale');
function override_og_locale($locale)
{
    return "en_GB";
} 
```

# ios - iOS - 打开 AL - 多个源或多个缓冲区

> ID：14752989
> 
> 赞同：0
> 
> 时间：2013-02-07T14:03:26.097
> 
> 标签：ios, loops, openal

我是 Open AL 的新手。
在我的 iOS 应用程序中，我必须播放多个音频文件（并行），它们基本上是持续时间为 2 到 3 秒的动物/鸟类声音。
在我看来，我有不同的动物按钮。用户可以点击一个按钮，动物的声音将连续循环播放，直到用户再次点击相同的按钮来停止它。
在 Open AL 中，我可以有一个源和多个缓冲区，也可以有多个源，每个源都有一个缓冲区。对于我动态添加/删除声音的要求，哪个好：是“创建多个源”还是“一个源和多个缓冲区”。
哪个选项将是优化的解决方案。有人可以指导我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:28:57.413

如果您希望能够在播放另一种动物声音的同时播放另一种动物声音，您将需要多个来源。如果您希望能够在从磁盘加载时播放多个动物声音而不会延迟播放，则需要多个缓冲区。

但是，拥有大量缓冲区会占用内存，因此如果内存不足，您可能需要妥协（具有相同数量的源，但缓冲区较少，并进行某种动态加载以减少延迟感用户部分）。

也就是说，从简单开始：1 个源，每个动物声音 1 个缓冲区。如果它们很短，则您不太可能耗尽内存，因此无需进行优化。

# java - 通过 Java 导入 DXL 不适用于 8.5.2

> ID：14752991
> 
> 赞同：0
> 
> 时间：2013-02-07T14:03:30.590
> 
> 标签：java, import, xpages, lotus-domino

我对 DXL 导入有另一个问题，实际上它与我的旧问题相同（[http://goo.gl/LchgP](http://goo.gl/LchgP)）

只要您在 Domino 8.5.3 服务器上，一切正常。使用 8.5.2 将无法正常工作。我收到以下错误消息：

```
07.02.2013 14:45:06   HTTP JVM: NotesException: DXLImporter output object is invalid, uninitialized, or not explicitly declared and strongly typed
07.02.2013 14:45:06   HTTP JVM:     at lotus.domino.local.DxlImporter.importDxl(Unknown Source)
07.02.2013 14:45:06   HTTP JVM:     at biz.bcc.common.BCCPropertyStore.importDXLFile(BCCPropertyStore.java:514)
07.02.2013 14:45:06   HTTP JVM:     at biz.bcc.common.BCCPropertyStore.saveProperties(BCCPropertyStore.java:777)
07.02.2013 14:45:06   HTTP JVM:     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
07.02.2013 14:45:06   HTTP JVM:     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)
07.02.2013 14:45:06   HTTP JVM:     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
07.02.2013 14:45:06   HTTP JVM:     at java.lang.reflect.Method.invoke(Method.java:600)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.jscript.types.JavaAccessObject.call(JavaAccessObject.java:321)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.jscript.types.FBSObject.call(FBSObject.java:161)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.jscript.ASTTree.ASTCall.interpret(ASTCall.java:175)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.jscript.ASTTree.ASTProgram.interpret(ASTProgram.java:119)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.jscript.ASTTree.ASTProgram.interpretEx(ASTProgram.java:139)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.jscript.JSExpression._interpretExpression(JSExpression.java:435)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.jscript.JSExpression.access$1(JSExpression.java:424)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.jscript.JSExpression$2.run(JSExpression.java:414)
07.02.2013 14:45:06   HTTP JVM:     at java.security.AccessController.doPrivileged(AccessController.java:284)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.jscript.JSExpression.interpretExpression(JSExpression.java:410)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.jscript.JSExpression.evaluateValue(JSExpression.java:251)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.jscript.JSExpression.evaluateValue(JSExpression.java:234)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.xsp.javascript.JavaScriptInterpreter.interpret(JavaScriptInterpreter.java:220)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.xsp.binding.javascript.JavaScriptMethodBinding.invoke(JavaScriptMethodBinding.java:111)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.xsp.application.ActionListenerImpl.processAction(ActionListenerImpl.java:60)
07.02.2013 14:45:06   HTTP JVM:     at javax.faces.component.UICommand.broadcast(UICommand.java:324)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.xsp.component.UIEventHandler.broadcast(UIEventHandler.java:365)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.xsp.component.UIDataPanelBase.broadcast(UIDataPanelBase.java:400)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.xsp.component.UIDataPanelBase.broadcast(UIDataPanelBase.java:400)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.xsp.component.UIViewRootEx.broadcast(UIViewRootEx.java:1490)
07.02.2013 14:45:06   HTTP JVM:     at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:307)
07.02.2013 14:45:06   HTTP JVM:     at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:428)
07.02.2013 14:45:06   HTTP JVM:     at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:94)
07.02.2013 14:45:06   HTTP JVM:     at com.sun.faces.lifecycle.LifecycleImpl.phase(LifecycleImpl.java:210)
07.02.2013 14:45:06   HTTP JVM:     at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:96)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.xsp.controller.FacesControllerImpl.execute(FacesControllerImpl.java:250)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.xsp.webapp.FacesServlet.serviceView(FacesServlet.java:206)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.xsp.webapp.FacesServletEx.serviceView(FacesServletEx.java:193)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.xsp.webapp.FacesServlet.service(FacesServlet.java:154)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.xsp.webapp.FacesServletEx.service(FacesServletEx.java:137)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.xsp.webapp.DesignerFacesServlet.service(DesignerFacesServlet.java:86)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.designer.runtime.domino.adapter.ComponentModule.invokeServlet(ComponentModule.java:538)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.domino.xsp.module.nsf.NSFComponentModule.invokeServlet(NSFComponentModule.java:1140)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.designer.runtime.domino.adapter.ComponentModule$AdapterInvoker.invokeServlet(ComponentModule.java:803)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.designer.runtime.domino.adapter.ComponentModule$ServletInvoker.doService(ComponentModule.java:758)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.designer.runtime.domino.adapter.ComponentModule.doService(ComponentModule.java:527)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.domino.xsp.module.nsf.NSFComponentModule.doService(NSFComponentModule.java:1124)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.domino.xsp.module.nsf.NSFService.doServiceInternal(NSFService.java:513)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.domino.xsp.module.nsf.NSFService.doService(NSFService.java:342)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.designer.runtime.domino.adapter.LCDEnvironment.doService(LCDEnvironment.java:304)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.designer.runtime.domino.adapter.LCDEnvironment.service(LCDEnvironment.java:261)
07.02.2013 14:45:06   HTTP JVM:     at com.ibm.domino.xsp.bridge.http.engine.XspCmdManager.service(XspCmdManager.java:291) 
```

自上一个问题以来，代码没有改变。

您知道为什么它应该在虚拟机上的 mylocal 服务器 8.5.3 上运行，而在我们的其他服务器上运行 8.5.2 则无法运行吗？

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:39:23.760

我认为这是因为您使用的是 getCurrentSessionAsSignerWithFullAccess 方法。据我所知，这是一个扩展库方法。确保在两台服务器上都安装了 extlib。在 8.5.3 中可能会安装升级包，这自动意味着您拥有扩展库。在 8.5.2 上。你必须手动安装它。

# directfb - 如何在带有 DirectFB 1.6.3 的 Ubuntu 12.04 64 位上运行此 DFB 图像示例？

> ID：14752993
> 
> 赞同：1
> 
> 时间：2013-02-07T14:03:32.463
> 
> 标签：directfb

这个相同的示例在我的带有 DirectFB 1.4.11 的旧 Ubuntu 10.10 中运行没有问题，并在黑屏中心显示一条黄线：

```
#include <iostream>
#include <stdio.h>
#include <unistd.h>
#include <directfb.h>

using namespace std;

static IDirectFB *dfb = NULL;
static IDirectFBSurface *primary = NULL;
static int screen_width = 0;
static int screen_height = 0;
#define DFBCHECK(x...)                                         \
  {                                                            \
    DFBResult err = x;                                         \
                                                               \
    if (err != DFB_OK)                                         \
      {                                                        \
        fprintf( stderr, "%s <%d>:\n\t", __FILE__, __LINE__ ); \
        DirectFBErrorFatal( #x, err );                         \
      }                                                        \
  }
int main(int argc, char **argv) {

    DFBSurfaceDescription dsc;
    DFBCHECK(DirectFBInit (&argc, &argv));
    DFBCHECK(DirectFBCreate (&dfb));
    DFBCHECK(dfb->SetCooperativeLevel (dfb, DFSCL_FULLSCREEN));
    dsc.flags = DSDESC_CAPS;
    dsc.caps = DFBSurfaceCapabilities(DSCAPS_PRIMARY | DSCAPS_FLIPPING);
    DFBCHECK(dfb->CreateSurface( dfb, &dsc, &primary ));
    DFBCHECK(primary->GetSize (primary, &screen_width, &screen_height));
    DFBCHECK(primary->FillRectangle (primary, 0, 0, screen_width, screen_height));
    DFBCHECK(primary->SetColor (primary, 0xFF, 0xFF, 0x00, 0xff));
    DFBCHECK(primary->SetSrcColorKey(primary, 0xFF, 0xFF, 0x00));
    DFBCHECK(primary->SetBlittingFlags(primary, (DFBSurfaceBlittingFlags) ( DSBLIT_BLEND_ALPHACHANNEL | DSBLIT_SRC_COLORKEY)));
    DFBCHECK(primary->DrawLine (primary, 0, screen_height / 2, screen_width - 1, screen_height / 2));
    primary->Flip(primary, NULL, DFBSurfaceFlipFlags(0));
    sleep(3);
    primary->Release(primary);
    dfb->Release(dfb);
    cout << "DONE!\n";
    return 23;
} 
```

但是这个相同的例子只会在 Ubuntu 12.04 中使用 DirectFB 6.3 显示黑屏，没有线条。

控制台输出为：

```
# ./a.out 

   ~~~~~~~~~~~~~~~~~~~~~~~~~~| DirectFB 1.6.3 |~~~~~~~~~~~~~~~~~~~~~~~~~~
        (c) 2012-2013  DirectFB integrated media GmbH
        (c) 2001-2013  The world wide DirectFB Open Source Community
        (c) 2000-2004  Convergence (integrated media) GmbH
      ----------------------------------------------------------------

(*) DirectFB/Core: Single Application Core. (2013-02-07 11:05) 
(*) Direct/Memcpy: Using libc memcpy()
(*) Direct/Thread: Started 'Fusion Dispatch' (-1) [MESSAGING OTHER/OTHER 0/0] <8388608>...
(*) Direct/Thread: Started 'VT Switcher' (-1) [CRITICAL OTHER/OTHER 0/0] <8388608>...
(*) Direct/Thread: Started 'VT Flusher' (-1) [DEFAULT OTHER/OTHER 0/0] <8388608>...
(*) DirectFB/FBDev: Found 'svgadrmfb' (ID 0) with frame buffer at 0x00000000, 15360k (MMIO 0x00000000, 0k)
(*) Direct/Thread: Started 'PS/2 Input' (-1) [INPUT OTHER/OTHER 0/0] <8388608>...
(*) DirectFB/Input: IMPS/2 Mouse (1) 1.0 (directfb.org)
(*) Direct/Thread: Started 'PS/2 Input' (-1) [INPUT OTHER/OTHER 0/0] <8388608>...
(*) DirectFB/Input: IMPS/2 Mouse (2) 1.0 (directfb.org)
(*) Direct/Thread: Started 'Linux Input' (-1) [INPUT OTHER/OTHER 0/0] <8388608>...
(*) DirectFB/Input: Power Button (1) 0.1 (directfb.org)
(*) Direct/Thread: Started 'Linux Input' (-1) [INPUT OTHER/OTHER 0/0] <8388608>...
(*) DirectFB/Input: AT Translated Set 2 keyboard (2) 0.1 (directfb.org)
(*) Direct/Thread: Started 'Linux Input' (-1) [INPUT OTHER/OTHER 0/0] <8388608>...
(*) DirectFB/Input: VMware VMware Virtual USB Mouse (3) 0.1 (directfb.org)
(*) Direct/Thread: Started 'Linux Input' (-1) [INPUT OTHER/OTHER 0/0] <8388608>...
(*) DirectFB/Input: VMware VMware Virtual USB Mouse (4) 0.1 (directfb.org)
(*) Direct/Thread: Started 'Linux Input' (-1) [INPUT OTHER/OTHER 0/0] <8388608>...
(*) DirectFB/Input: ImPS/2 Generic Wheel Mouse (5) 0.1 (directfb.org)
(*) Direct/Thread: Started 'Hotplug with Linux Input' (-1) [INPUT OTHER/OTHER 0/0] <8388608>...
(*) DirectFB/Input: Hot-plug detection enabled with Linux Input Driver 
(*) Direct/Thread: Started 'Joystick Input' (-1) [INPUT OTHER/OTHER 0/0] <8388608>...
(*) DirectFB/Input: Joystick 0.9 (directfb.org)
(*) DirectFB/Input: Hot-plug detection enabled with Input Hub Driver 
(*) Direct/Thread: Started 'Keyboard Input' (-1) [INPUT OTHER/OTHER 0/0] <8388608>...
 (!!!)  *** ONCE [Joystick sends JS_EVENT_INIT events, make sure it has been calibrated using 'jscal -c'
] *** [joystick.c:99 in joystick_handle_event()]
(*) DirectFB/Input: Keyboard 0.9 (directfb.org)
(*) DirectFB/Genefx: MMX detected and enabled
(*) DirectFB/Graphics: MMX Software Rasterizer 0.7 (directfb.org)
(*) DirectFB/Core/WM: Default 0.3 (directfb.org)
(*) FBDev/Mode: Setting 800x600 RGB32
(*) FBDev/Mode: Switched to 800x600 (virtual 800x600) at 32 bit (RGB32), pitch 8192
(*) FBDev/Mode: Setting 800x600 RGB32
(*) FBDev/Mode: Switched to 800x600 (virtual 800x600) at 32 bit (RGB32), pitch 8192
(*) FBDev/Mode: Setting 800x600 RGB32
(*) FBDev/Mode: Switched to 800x600 (virtual 800x1200) at 32 bit (RGB32), pitch 8192
(*) FBDev/Mode: Setting 800x600 RGB32
(*) FBDev/Mode: Switched to 800x600 (virtual 800x600) at 32 bit (RGB32), pitch 8192
DONE! 
```

知道为什么不画线吗？不知道是不是64位系统的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-31T09:38:44.250

你的意思是`1.6.3`版本。我不知道您的配置选项。例如`MMX Support`. 您可以重新配置和重新安装它`--enable-debug`和/或`--enable-trace`运行程序以`--dfb:debug`获取更多信息。在运行时也`DirectFB`做了很多，`system call`所以你可以通过`strace`. 这是一个老问题，但最近这些是我建议的方法来查找运行 directfb 应用程序的相关问题。祝你好运。

# build-process - 如何将 Flash Player 预建应用程序添加到 Android 中的 system.img？

> ID：14752998
> 
> 赞同：3
> 
> 时间：2013-02-07T14:03:49.873
> 
> 标签：build-process, apk, android-source, flash-player-11

我正在尝试通过将 Flash Player 添加到默认系统应用程序来自定义我的 android 系统。我使用 Android.mk 文件将 .apk 文件添加到 packages/apps/FlashPlayer

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE_TAGS := optional
LOCAL_MODULE := FlashPlayer
LOCAL_SRC_FILES := FlashPlayer.apk
LOCAL_MODULE_SUFFIX := .apk
LOCAL_MODULE_CLASS := APPS
LOCAL_CERTIFICATE := PRESIGNED
include $(BUILD_PREBUILT) 
```

这个 apk 还使用了一些库：libflashplayer.so libstagefright_froyo.so。libstagefright_honeycomb.so 和 libysshared.so。

我为每个模块创建了一个模块并将它们添加到变量 PRODUCT_PACKAGES 中的 generic.mk

```
PRODUCT_PACKAGES:=  libflashplayer \
libstagefright_froyo \
libstagefright_honeycomb \
libysshared \
FlashPlayer \ 
```

我用 adb shell 进行了测试，apk 在 /system/app 中，而库在 /system/lib 中，但是当我尝试从浏览器播放电影时，它说没有安装 flash 播放器。

但是，如果我使用 adb install 命令手动安装 FlashPlayer，则可以从浏览器播放电影。

你能帮忙解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T06:26:00.207

根据 PluginManager.java，库应该在 /system/lib/plugins/com.adobe.flashplayer 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T19:20:33.427

我遇到了同样的问题。出于某种原因，WebKit 无法加载通过将它们添加到 PRODUCT_PACKAGES 列表中安装的插件。但是，如果您使用 adb install 安装它们，WebKit 将加载它们。我仍然没有找到安装它们的其他方法。只有 adb install 会让它们工作。如果您对此有任何进展，请在此处更新您的帖子。