# StackOverflow 问答 16032000-16032999

# facebook - 使用 Facebook 社交插件评论

> ID：16032000
> 
> 赞同：2
> 
> 时间：2013-04-16T08:18:01.947
> 
> 标签：facebook, plugins, comments, social

我有 Facebook 评论社交插件。它工作正常并且安装完美。但是，当有人给我留言时如何通知我，以便我回复并批准该评论？我想不通这个？

任何指导表示赞赏！

谢谢。

# linux - 如何在循环中检查后台多个进程的退出状态？

> ID：16032001
> 
> 赞同：1
> 
> 时间：2013-04-16T08:18:04.730
> 
> 标签：linux, bash, shell, process

我在后台有一个带有脚本的循环

```
while read host
do
./script &
done
wait  #waits till all the background processes are finished 
```

但我想检查进程的退出状态我会怎么做

```
while read host
do
./script &
wait $! || let "FAIL+=1"
done
wait
echo $fail 
```

但是上面的代码会并行执行，因为时间对我来说是一个重要因素，所以我希望所有主机都并行执行。

这是否可以知道哪个进程失败了以便我可以做

```
 echo "these are the list of process ids in background that failed"
   12346
   43561
   ..... 
```

可以在后台运行的并行进程的数量是否有任何限制。在上述循环中运行大约 20 个并行进程是否安全

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T07:20:52.017

您可以将其添加到脚本的末尾：

```
RC=$?
test $RC -eq 0 || echo "$$ failed"
exit $RC 
```

$$ 返回 shell 的 PID。您的后台脚本将在各自独立的 shell 中运行。

该`exit $RC`行显然是可选的。

# java - 代码适用于 Windows JDK 7，但不适用于 Linux JDK 7

> ID：16032002
> 
> 赞同：1
> 
> 时间：2013-04-16T08:18:09.370
> 
> 标签：java, linux, windows, encryption, java-7

以下代码在 Windows 上的 Oracle JDK 7 中运行良好，但在 Linux 上失败并出现以下错误：`javax.crypto.IllegalBlockSizeException: Input length must be multiple of 8 when decrypting with padded cipher`在行`Cipher.doFinal(ciphertextArray)`这使用完全相同的 Jar 文件和完全相同的命令行等***。文本和密码的值来自虽然是命令行，但我怀疑问题出在此处，我只是不知道在哪里......***

```
String saltD = text.substring(0,12);
String ciphertext = text.substring(12,text.length());

// BASE64Decode the bytes for the salt and the ciphertext
Base64 decoder = new Base64();
byte[] saltArray = decoder.decode(saltD);
byte[] ciphertextArray = decoder.decode(ciphertext);

// Create the PBEKeySpec with the given password
PBEKeySpec keySpec = new PBEKeySpec(password.trim().toCharArray());

// Get a SecretKeyFactory for PBEWithSHAAndTwofish
SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(encryptionMethod);

// Create our key
SecretKey key = keyFactory.generateSecret(keySpec);

// Now create a parameter spec for our salt and iterations
PBEParameterSpec paramSpec = new PBEParameterSpec(saltArray, ITERATIONS);

// Create a cipher and initialize it for encrypting
Cipher cipher = Cipher.getInstance(encryptionMethod);
cipher.init(Cipher.DECRYPT_MODE, key, paramSpec);

// Perform the actual decryption
byte[] plaintextArray = cipher.doFinal(ciphertextArray);
return new String(plaintextArray); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:09:02.413

观察结果似乎是由于两个平台上的默认字符集不同。

您需要确保使用*指定*的字符集而不是依赖于平台默认值`String`来`byte[]`执行转换（反之亦然） 。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T03:00:06.490

问题是文本字符串中包含“$”字符，而在 Linux 的命令行中这些字符是转义字符。它们需要在字符串本身中转换为“\$”。*

# android - 在android中禁用DPAD键

> ID：16032005
> 
> 赞同：4
> 
> 时间：2013-04-16T08:18:37.797
> 
> 标签：android, android-layout, android-tabhost, android-keypad

我正在尝试捕获由箭头键（向上、向下、向右和向左）生成的事件并禁用它们。下面的代码片段来自活动类之一。

```
@Override
public boolean onKeyUp(int keyCode, KeyEvent event) {
    if(event.getAction() == KeyEvent.KEYCODE_DPAD_DOWN) return true;
    else return true;
} 
```

但是，有了这些代码，键导航就可以工作了。我尝试将关键侦听器添加到也不起作用的活动中。

目标设备是三星 GT-I5500，Android 2.2 版本开启。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T08:41:33.700

也覆盖 onKeyDown 并返回 true 而不是 false。像这样的东西：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    switch (keyCode) {
        case KeyEvent.KEYCODE_DPAD_LEFT:
        case KeyEvent.KEYCODE_DPAD_RIGHT:
        case KeyEvent.KEYCODE_DPAD_UP:
        case KeyEvent.KEYCODE_DPAD_DOWN:
            return true; 
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:25:16.247

在[文档](http://developer.android.com/reference/android/view/KeyEvent.Callback.html#onKeyUp%28int,%20android.view.KeyEvent%29)中，声明您应该返回：

*   *如果您处理了事件，则为*true**
**   *如果您想**允许下一个接收者处理事件，则返回***false*。**

 **您的方法返回 false，因此您将事件传递给默认键处理程序**

# ios - 处理大量错误代码的设计模式

> ID：16032008
> 
> 赞同：1
> 
> 时间：2013-04-16T08:18:44.677
> 
> 标签：ios, api, error-handling

我目前正在从事的项目必须使用 Web API，它以数字格式返回大量错误代码。

例如，如果我有一个错误“ACCESS_DENY”，它可能具有不同的含义，具体取决于使用它的上下文。对于每个错误，我都必须显示一条警告消息。这样**，尽管错误代码相同，警报消息也可以针对不同情况而有所不同。**它无法更改，因为这是 API 的问题。

但问题是 API 不断地被改变。我不想一直编辑我的代码。此外，我不考虑为每个错误类别编写异常类。可能的解决方案之一是将所有错误放在 XML 文件中并编写一个单例来处理它。但对我来说似乎不是很明确的决定。

我正在使用 Objective-C 语言和 iOS SDK 编写一个 iOS 项目。

解决这个问题的好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:37:58.293

我认为最好的方法是实践“合同优先”的开发。准备：

*   用例特定的有效载荷输入/输出对象。
*   可重用的域对象。
*   将您的服务请求/响应的结果从特定于用例的有效负载对象映射到您的可重用域。. . 这样，如果它发生变化，您只需更改映射层。
*   践行“严于律己，宽以待人”的信条，也就是“不泄露你的胆量”。. . 实际上，服务生产者比客户更适合坚持这一点。. .

这个想法是您提供一个随着时间推移相对稳定的 API，但可以自由更改 API 背后发生的事情。如果 API 发生变化，请考虑所有也会发生变化的服务订阅者。避免大的前期设计，但尽量让集成合同尽快充实。

# c++ - 如何使用 eclipse c++ 和 MinGW 编译器设置 GLFW？

> ID：16032014
> 
> 赞同：3
> 
> 时间：2013-04-16T08:18:51.757
> 
> 标签：c++, eclipse, opengl, mingw, glfw

如何使用 MinGW 编译器包含`glfw.h`和链接库`libglfw.a`以及`libglfadll.a`在 eclipse juno c++ 中。这是我在设置它时所做的尝试：

![在此处输入图像描述](https://i.stack.imgur.com/pwHLQ.png)

这是我尝试使用的构建命令：

`g++ -o Practice.exe "src\\main.o" "-lC:\\Users\\Kaiden.ZEUS\\Files" & "Folders\\Programming\\C++\\Workspaces\\Practice\\Practice\\lib\\libglfw.a" "-lC:\\Users\\Kaiden.ZEUS\\Files" & "Folders\\Programming\\C++\\Workspaces\\Practice\\Practice\\lib\\libglfwdll.a"`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:15:28.703

这些都不是 OpenGL 或 GLEW 所特有的，您在这里处理的是基本的程序员技能：如何配置编译器链接器工具链以使用其他库。这是必不可少的知识，所以请耐心地学习它。以下只是您应该更改的注释的简短列表。但是你真的应该学习一些关于编译和链接过程的学习材料来理解它。

* * *

您应该将库和头文件放在系统范围的目录中，*而不是*编译器套件的标准目录，并将它们配置为编译器和链接器的附加搜索路径。

*不要*将第 3 方库和头文件放入您的项目源代码树中，除非您采取适当的预防措施，以免干扰可能已安装的系统范围实例。

此外，您必须在 GLFW 的静态或动态链接版本之间进行选择。如果您同时使用两者，则会出现符号冲突（这是 GLFW 特有的）。

在您的构建命令行中，您正在使用带有正斜杠的 -l `option with *directories*. This is wrong, search paths are specified using`-L `(capital L), while`-l ` ，从而节省了一些输入，即转义以生成命令的单个反斜杠。在你的情况下（我缩短了路径）`(lower l) just specifies library names without the path, prefix and suffix. Also you can replace backslashes``/``\\`

```
g++ -o Practice.exe "src/main.o" "-LC:/Users/Kaiden.ZEUS/Files/ ... /lib" "-lglfw" 
```

或者

```
g++ -o Practice.exe "src/main.o" "-LC:/Users/Kaiden.ZEUS/Files/ ... /lib" "-lglfwdll" 
```

但是，此编译命令缺少包含文件的规范。假设您已经安装了 GLEW 标头，`C:/Users/Kaiden.ZEUS/Files/ ... /include/GL`您将添加

```
"-IC:/Users/Kaiden.ZEUS/Files/ ... /include/GL" 
```

到命令行。

# javascript - Windows 商店应用程序 - 拆分示例，显示组

> ID：16032020
> 
> 赞同：0
> 
> 时间：2013-04-16T08:19:09.163
> 
> 标签：javascript, windows-store-apps

我正在为我的程序使用默认拆分示例，但我在这里遇到了一个问题。该应用程序不显示不包含任何项目的我组。好的，这是有道理的，但在我的情况下，我必须以任何一种方式显示组，如果它们包含项目。

我怎样才能做到这一点？现在我为每个组都有一个示例项目，这使得它们可见。我必须使用这个“技巧”，因为当我的应用程序启动时，它根本不包含任何项目。当我单击任何组时，我使用 ajax 请求获取它们（在后台使用一些 api，所以我必须这样做）。

# php - SOAP 方法调用极慢

> ID：16032025
> 
> 赞同：3
> 
> 时间：2013-04-16T08:19:25.727
> 
> 标签：php, performance, soap

我正在研究一个严重依赖 SOAP 调用的项目。问题是加载时间非常长。

```
$client = new SoapClient("https://link.to.wsdl");
$client = $client->GetDestination(array(
"parameter1" => $param1,
"parameter2" => $param2
)); 
```

现在我做了一些计时，代码的第一部分（启动一个对象 $client）大约需要 2 秒，非常可以接受。但是当调用 getDestination 时，它会增加大约 10 秒的加载时间。这适用于我调用的每个 get 或 set 方法。

此代码在 php 5 上运行。方法是用 .net 4.x 编写的

有谁知道这是为什么以及如何解决？

编辑：ping 统计 10 个数据包传输，10 个数据包接收，0.0% 数据包丢失往返 min/avg/max/stddev = 1.086/2.320/3.624/1.157 ms

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T08:24:32.737

[`soap.wsdl_cache_enabled`](http://www.php.net/manual/en/soap.configuration.php#ini.soap.wsdl-cache-enabled)首先，您应该使用ini 值或使用构造函数的`$options`参数启用 WSDL 缓存[`SoapClient`](http://www.php.net/manual/en/soapclient.soapclient.php)。这将阻止 PHP 一次又一次地下载 wsdl 并将加速构造函数（2 秒也很长）

为了加速方法调用本身，我需要更多信息。您是否能够使用[wireshark](http://www.wireshark.org/)来检查您的应用程序和soap 服务器之间的网络通信？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-15T19:47:20.377

我在连接到与我的代码相同的机器上的 SOAP 服务时遇到了类似的问题。它是通过使用`http://127.0.0.1/`而不是`http://localhost/`作为 url 来解决的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-01T10:36:58.467

你好，如果你在 plesk 检查这个文档 [https://docs.plesk.com/fr-FR/obsidian/administrator-guide/g%C3%A9rer-des-sites-web/sites-web-et-domaines/param %C3%A8tres-d%E2%80%99h%C3%A9bergement/param%C3%A8tres-de-script-web/param%C3%A8tres-php.70742/](https://docs.plesk.com/fr-FR/obsidian/administrator-guide/g%C3%A9rer-des-sites-web/sites-web-et-domaines/param%C3%A8tres-d%E2%80%99h%C3%A9bergement/param%C3%A8tres-de-script-web/param%C3%A8tres-php.70742/)

[https://docs.plesk.com/fr-FR/obsidian/administrator-guide/h%C3%A9bergement-web/gestion-de-php/types-de-gestionnaires-php.75145/](https://docs.plesk.com/fr-FR/obsidian/administrator-guide/h%C3%A9bergement-web/gestion-de-php/types-de-gestionnaires-php.75145/)

对我来说，我必须在我网站的 php 设置中设置“exec php as FPM by apache”

# java - Swing 动态添加面板未显示

> ID：16032030
> 
> 赞同：0
> 
> 时间：2013-04-16T08:19:34.950
> 
> 标签：java, swing, panel, visibility

我目前正在使用 Netbeans GUI 构建器制作一个 java swing GUI。我正在尝试将一堆面板动态添加到另一个面板，但它们没有显示出来。我已经尝试从可能有意义的每个点使用 repaint()、revalidate()、updateUI() 和 setvisible(true)。我还测试了面板是否添加到容器中。它们被添加，根本不显示。

这是添加面板的代码：

```
 public void setArrangement(LinkedList<PanelScheduleMusician> scheduledPlaces, LinkedList<PanelMusician> assignedMusicians, LinkedList<PanelMusician> freeMusicians) {

    _scheduledPlaces = scheduledPlaces;
    _assignedMusicians = assignedMusicians;
    _freeMusicians = freeMusicians;
}

public void displayPanels() {

    if(_assignedMusicians != null && _assignedMusicians.size() > 0) {
        Iterator<PanelScheduleMusician> iterator = _scheduledPlaces.iterator();
        for(PanelMusician p: _assignedMusicians) {
            iterator.next().setMusician(p);
        }
    }

    if(_scheduledPlaces != null && _scheduledPlaces.size() > 0) {
        GroupLayout layout = new GroupLayout(panelAssignedMusician);
        panelAssignedMusician.setLayout(layout);
        layout.setAutoCreateGaps(true);
        layout.setAutoCreateContainerGaps(true);
        GroupLayout.ParallelGroup parallelGroup = layout.createParallelGroup();
        GroupLayout.SequentialGroup sequentialGroup = layout.createSequentialGroup();

        for(PanelScheduleMusician p: _scheduledPlaces) {
            parallelGroup.addComponent(p);
            sequentialGroup.addComponent(p);
        }
        layout.setHorizontalGroup(parallelGroup);
        layout.setVerticalGroup(sequentialGroup);
    }

    if(_freeMusicians != null && _freeMusicians.size() > 0) {
        GroupLayout layout = new GroupLayout(panelFreeMusician);
        panelFreeMusician.setLayout(layout);
        layout.setAutoCreateGaps(true);
        layout.setAutoCreateContainerGaps(true);
        GroupLayout.ParallelGroup parallelGroup = layout.createParallelGroup();
        GroupLayout.SequentialGroup sequentialGroup = layout.createSequentialGroup();

        for(PanelMusician p: _freeMusicians) {
            parallelGroup.addComponent(p);
            sequentialGroup.addComponent(p);
        }
        layout.setHorizontalGroup(parallelGroup);
        layout.setVerticalGroup(sequentialGroup);
    }
}

public void reset() {
    removeAll();
    initialise();
}

private void initialise() {
    initComponents();
    displayPanels();
    revalidate();
    updateUI();

} 
```

在这里我创建面板并调用方法：

```
 public FormEditDuty() {
    initComponents();

    LinkedList<PanelScheduleMusician> l1 = new LinkedList<>();
    LinkedList<PanelMusician> l2 = new LinkedList<>();
    LinkedList<PanelMusician> l3 = new LinkedList<>();

    l1.add(new PanelScheduleMusician());
    l1.add(new PanelScheduleMusician());
    l1.add(new PanelScheduleMusician());
    l1.add(new PanelScheduleMusician());

    l3.add(new PanelMusician());
    l3.add(new PanelMusician());
    l3.add(new PanelMusician());

    panelVioline1.setArrangement(l1, l2, l3);
    panelVioline1.reset();
} 
```

我创建面板的方式只是一个测试，但在我继续之前它需要工作。如果我直接在同一个类中创建和添加面板，它工作正常。

# android - 点击时Android删除通知（由mNotifyBuilder创建）

> ID：16032031
> 
> 赞同：10
> 
> 时间：2013-04-16T08:19:36.383
> 
> 标签：android, notifications

我找到了很多答案，但没有帮助:(我有这个代码：

```
private static void generateNotification(Context context, String message) {
    int icon = R.drawable.icon;
    NotificationManager mNotificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);

    int notifyID = 96;
    NotificationCompat.Builder mNotifyBuilder = new NotificationCompat.Builder(context)
        .setContentTitle("MyApp")
        .setContentText(message)
        .setDefaults(Notification.DEFAULT_ALL)
        .setAutoCancel(true)
        .setSmallIcon(icon);

    Notification notification = mNotifyBuilder.build();
    notification.flags |= Notification.FLAG_AUTO_CANCEL;

    mNotificationManager.notify(notifyID, notification);
} 
```

但是，如果我点击通知，没有任何反应，它仍然存在。在文档中，我需要使用：

```
.setAutoCancel(true) 
```

有人有类似的问题，有人告诉他使用：

```
notification.flags |= Notification.FLAG_AUTO_CANCEL; 
```

我都使用了，但没有结果:(非常感谢你的回答。:)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-16T08:37:36.027

我认为，如果您不使用 Intent 与您的通知，唯一的方法是关闭它以滑动它。

否则，您可以使用 Intent 打开您的活动，这实际上会清除通知：

```
Intent showIntent = new Intent(this, YourActivity.class);
PendingIntent contentIntent = PendingIntent.getActivity(this, 0, showIntent, 0); 
```

并将其添加到通知中：

```
NotificationCompat.Builder mNotifyBuilder = new NotificationCompat.Builder(context)
    .setContentTitle("MyApp")
    .setContentText(message)
    .setDefaults(Notification.DEFAULT_ALL)
    .setAutoCancel(true)
    .setContentIntent(contentIntent)
    .setSmallIcon(icon); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-16T08:26:59.050

用户可以关闭所有通知，或者如果您将通知设置为自动取消，一旦用户选择它，它也会被删除。

您还可以为 NotificationManager 上的特定通知 ID 调用 cancel()。cancelAll() 方法调用会删除您之前发出的所有通知。

例子：

```
mNotificationManager.cancel(notifyId); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-16T12:52:29.873

我一般用

```
mNotificationManager.cancleAll(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T08:45:20.673

只需在按钮 onclick 事件中使用此行-

```
mNotificationManager.cancel(notifyId);//id is that u used for notification 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-11T14:10:29.077

只需添加

```
 Intent showIntent = new Intent();
            PendingIntent contentIntent = PendingIntent.getActivity(this, 0, showIntent, 0);

    myNotification = new Notification.Builder(getApplicationContext())
                    .setContentTitle("Title")
                    .setContentText("Text")
                    .setTicker("notificatio")
                    .setContentIntent(contentIntent)
                    .setDefaults(Notification.DEFAULT_ALL)
                    .setAutoCancel(true)
                    .setSmallIcon(R.drawable.ic_launcher)
                    .build(); 
```

添加空的待处理意图，然后单击通知，通知将被删除。这个对我有用。

# javascript - 带返回值的getJSON，有人可以看看这里有什么问题吗？

> ID：16032034
> 
> 赞同：0
> 
> 时间：2013-04-16T08:19:44.817
> 
> 标签：javascript, jquery, getjson

我试图从回调函数返回一个值，但没有成功。

你能看出这里有什么问题吗？？：

```
function getval( callback ){
    jQuery.getJSON('http://data.mtgox.com/api/1/BTCUSD/ticker?callback=?', function(data) {
        // We can't use .return because return is a JavaScript keyword.
        callback(data['return'].avg.value);
    });
}

$(function () {
        $(document).ready(function() {
        getval( function ( value ) {
            alert( 'Do something with ' + value + ' here!' );
        } );
    });

}); 
```

这是 JSFIddle 链接：http: [//jsfiddle.net/kf6qb/1/](http://jsfiddle.net/kf6qb/1/)

**非常感谢！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:27:09.180

`?callback=?`从 URL 中删除。该 API 不支持 JSONP，并允许跨域调用。

看我的[小提琴](http://jsfiddle.net/barmar/kf6qb/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:31:20.890

check this code its working [FIDDLE](http://jsfiddle.net/rajesh007/kf6qb/4/)

```
$(function () {
    jQuery.getJSON('http://data.mtgox.com/api/1/BTCUSD/ticker?', function(data) {
        // We can't use .return because return is a JavaScript keyword.
        alert(data.return.avg.value);
    });
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-16T08:26:49.517

您的数据没有名为 的字段`return`。`data['return']`是`undefined`。

# grails - Grails 在引导完成后执行服务方法

> ID：16032036
> 
> 赞同：2
> 
> 时间：2013-04-16T08:19:53.027
> 
> 标签：grails, bootstrapping, servletcontextlistener

快速查看是否可以在引导程序的 init() 完成后运行一段代码？

最好的方法是什么？

我有一些需要连接的外部系统，我想在这个块完成时显示一个“索引”页面，上面写着“连接到子系统”或类似的东西，然后一旦完成，应用程序就可以正常工作。

我是否认为您在引导之后才能访问页面？有没有一种简单的方法来限制人们在此服务运行时访问系统的其他部分？这看起来可行吗？

为任何帮助干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T12:50:22.290

Based on your requirement as you also pointed out bootstrap is not your friend. you need a view and controller for your screen and a service for your connection logic to external systems. You also need a flag or a method for sanity check of the communication within the scope of application or session. Then I would suggest to create a filter and check if you have the connections, if not redirect them to the controller that will connect it. Sudo:

```
class ConnectionFilters {
def filters = {
    loginCheck(controller: '*', action: '*') {
        before = {
            if (!session.connection ) {
                redirect(controller:'connection',action: 'connect')
                return false
            }
        }
    }
} 
```

}

```
class controller {
    def connectionService
    def connect (){
        try {
            connectionService.connectTo('systemx')
            connectionService.connectTo('systemy')
            connectionService.connectTo('systemz')
        }
        catch(e){
            session.connection = false
            redirect view:'error'
        }
        session.connection = true
    }
}

class ConnectionService {
    def connectTo(systemname){
        ....
    }
} 
```

# asp.net - 如何在静态 Web 方法中注册客户端脚本？

> ID：16032039
> 
> 赞同：1
> 
> 时间：2013-04-16T08:19:56.373
> 
> 标签：asp.net, c#-4.0, static-methods, client-side-scripting

我想在静态 Web 方法中注册客户端脚本。这是我的代码：

```
 public static class ScriptRegister
 {
    public static void RegisterScript(Page page, string script)
    {
        page.ClientScript.RegisterStartupScript(typeof(Page), "Refresh", script, true);
    }
 } 
```

我使用这个类来注册客户端脚本。

```
 [WebMethod]
    public static void UpdateCartCount(int prodId, int count)
    {
            ...
             ScriptRegister.RegisterScript(this.Page,script);
    } 
```

如您所知，我不能在静态方法中使用***它。***你对此有什么建议吗？

# python - zope中的python错误-打印，但从不读取“打印”变量

> ID：16032040
> 
> 赞同：1
> 
> 时间：2013-04-16T08:20:08.353
> 
> 标签：python, zope

我是 python 和 zope 的新手。在 ZMI 中，我使用以下代码创建了一个新的 python 脚本：

```
the_message = 'hello there human'

print the_message 
```

我无法保存文件，因为它给出了错误“打印，但从不读取”打印的变量“。

如果我使用`return the_message`它，它会保存并显示正常。

有谁知道这里出了什么问题？有什么我需要添加到我的脚本中的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:44:33.420

您需要*明确*返回`printed`：

```
the_message = 'hello there human'

print the_message

return printed 
```

`printed`变量不会被隐式读取。请参阅Zope 2 书的 Basic Sc​​ripting 一章中的[Print Statement Support](http://docs.zope.org/zope2/zope2book/BasicScripting.html#print-statement-support)。

# asp.net-mvc - MVC 禁用特定验证器的不显眼验证

> ID：16032042
> 
> 赞同：2
> 
> 时间：2013-04-16T08:20:14.883
> 
> 标签：asp.net-mvc, jquery-validate, unobtrusive-validation

我目前正在构建一个 MVC4 项目，该项目通过数据注释使用不显眼的验证。

我有一个特定的字段“PostalCode”，它既是 [Required]，又是附加了一个 [RegularExpression] 验证器。问题是，只有在选择了特定国家/地区时才应验证此正则表达式。（这个国家将是默认值，我们可以假设在几乎所有情况下都会使用它）

现在我需要一些方法来在选择不同的国家/地区时禁用此正则表达式验证，同时保持所需的验证器处于活动状态。

我发现的几乎所有解决方案都使用 jQuery.validator.defaults.ignore 过滤器，但这会禁用该项目上的两个验证器。

关于如何最好地解决这个问题的任何想法？

编辑：小代码片段显示这是如何工作的。

```
[Required]
[RegularExpression("^[1-9]\\d{3} ?[a-zA-Z]{2}$"] //Should only be verified if Country == "The Netherlands"
string PostalCode{get;set;}

[Required]
string Country {get;set;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:17:46.147

最后，我根据这篇博文编写了自己的 ValidationAttribute：http: [//thewayofcode.wordpress.com/2012/01/18/custom-unobtrusive-jquery-validation-with-data-annotations-in-mvc-3 /](http://thewayofcode.wordpress.com/2012/01/18/custom-unobtrusive-jquery-validation-with-data-annotations-in-mvc-3/) 这是一个优雅的解决方案，所需的工作量比我预期的要少。

编辑：根据要求，我提供自己创建的解决方案：

```
// DependentRegularExpressionAttribute.cs
    /// <summary>
/// Only performs a regular expression validation if a specified other property meets a validation requirement
/// </summary>
[AttributeUsage(AttributeTargets.Property, AllowMultiple = true)]
public class DependentRegularExpressionAttribute : ValidationAttribute, IClientValidatable
{
    private readonly Regex _regex;
    private readonly string _otherPropertyName;
    private readonly Regex _otherPropertyRegex;

    public DependentRegularExpressionAttribute(string regex, string otherPropertyName, string otherPropertyRegex)
    {
        _regex = new Regex(regex);
        _otherPropertyName = otherPropertyName;
        _otherPropertyRegex = new Regex(otherPropertyRegex);
    }

    /// <summary>
    /// Format the error message filling in the name of the property to validate and the reference one.
    /// </summary>
    /// <param name="name">The name of the property to validate</param>
    /// <returns>The formatted error message</returns>
    public override string FormatErrorMessage(string name)
    {
        return string.Format(ErrorMessageString, name, _regex, _otherPropertyName, _otherPropertyRegex);
    }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        var validationResult = ValidationResult.Success;

        if (value == null || String.IsNullOrEmpty(value as string))
            return validationResult;

        // Using reflection we can get a reference to the other property
        var otherPropertyInfo = validationContext.ObjectType.GetProperty(_otherPropertyName);
        var otherPropertyValue = otherPropertyInfo.GetValue(validationContext.ObjectInstance, null);
        if (otherPropertyValue == null || String.IsNullOrEmpty(otherPropertyValue as string))
            return validationResult;
        if (_otherPropertyRegex.IsMatch(otherPropertyValue.ToString()))
        {
            if (!_regex.IsMatch(value.ToString()))
                validationResult = new ValidationResult(ErrorMessage);
        }

        return validationResult;
    }

    #region IClientValidatable Members

    /// <summary>
    ///  
    /// </summary>
    /// <param name="metadata"></param>
    /// <param name="context"></param>
    /// <returns></returns>
    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        string errorMessage = FormatErrorMessage(metadata.DisplayName ?? metadata.PropertyName);

        // The value we set here are needed by the jQuery adapter
        var dependentRegexRule = new ModelClientValidationRule
        {
            ErrorMessage = errorMessage,
            ValidationType = "dependentregex"
        };
        //"otherpropertyname" is the name of the jQuery parameter for the adapter, must be LOWERCASE!
        dependentRegexRule.ValidationParameters.Add("otherpropertyname", _otherPropertyName);
        dependentRegexRule.ValidationParameters.Add("regex", _regex);
        dependentRegexRule.ValidationParameters.Add("otherpropertyregex", _otherPropertyRegex);

        yield return dependentRegexRule;
    }

    #endregion

}

    // customvalidation.js
    $.validator.addMethod("dependentregex", function (value, element, params) {
    var regex = new RegExp(params[0]);
    var otherElement = document.getElementById(params[1]);
    var otherElementRegex = new RegExp(params[2]);

    if (!value || !otherElement.value)
        return true;

    if (otherElementRegex.test(otherElement.value)) {
        if (!regex.test(element.value))
            return false;
    }
    return true;
});

$.validator.unobtrusive.adapters.add("dependentregex", ["regex", "otherpropertyname", "otherpropertyregex"], function(options) {
    options.rules["dependentregex"] = [options.params.regex,
        options.params.otherpropertyname,
        options.params.otherpropertyregex];
    options.messages["dependentregex"] = options.message;
}); 
```

在我的视图模型中，我执行以下操作：

```
 [Display(Name = "Customer_PostalCode", ResourceType = typeof(Resources.DisplayNames))]
    [DependentRegularExpression("^[1-9]\\d{3} ?[a-zA-Z]{2}$", "CorrespondenceCountry", "Nederland", ErrorMessageResourceType = typeof(Resources.Validation), ErrorMessageResourceName = "Customer_PostalCode")] //"Nederland" is a regular expression in this case
    [Required(ErrorMessageResourceType = typeof(Resources.Validation), ErrorMessageResourceName = "Shared_RequiredField")]
    public string CorrespondenceZipCode { get; set; } 
```

最后，customvalidation.js 方法与 C# 代码的作用基本相同。可以在我引用的博文中找到有关所有功能的详细说明

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:30:19.520

It seems like you want a "required if" validation attribute. I would check out [http://foolproof.codeplex.com/](http://foolproof.codeplex.com/) - it has an implementation that you can use like so (lifted directly from the project's site):

```
private class Person
{
    [Required]
    public string FirstName { get; set; }

    [Required]
    public string LastName { get; set; }

    public bool Married { get; set; }

    [RequiredIfTrue("Married")]
    public string MaidenName { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:13:28.237

看看这个，我自己没用过，不过好像很适合你的需求[http://foolproof.codeplex.com/workitem/18974](http://foolproof.codeplex.com/workitem/18974)

他们有一个看起来像这样的例子：

```
[RequiredIf("Country", Operator.RegExMatch, "(1033|4105)", ErrorMessage = "{0} is required")]
public string State { get; set; }

[Required(ErrorMessage = "{0} is required")]
public int Country { get; set; } 
```

# tsql - TSQL 获取唯一（不重叠）日期时间范围

> ID：16032046
> 
> 赞同：0
> 
> 时间：2013-04-16T08:20:30.730
> 
> 标签：tsql, datetime, overlapping

这是一个这样的问题：[TSQL 从日期时间范围获取重叠时段，](https://stackoverflow.com/questions/15873116/tsql-get-overlapping-periods-from-datetime-ranges)但结果请求不同。

这是表格：

```
create table period (
    id int,
    starttime datetime,
    endtime datetime,
    type varchar(64)
  );

insert into period values (1,'2013-04-07 8:00','2013-04-07 13:00','Work');
insert into period values (2,'2013-04-07 14:00','2013-04-07 17:00','Work');
insert into period values (3,'2013-04-08 8:00','2013-04-08 13:00','Work');
insert into period values (4,'2013-04-08 14:00','2013-04-08 17:00','Work');
insert into period values (5,'2013-04-07 10:00','2013-04-07 11:00','Holyday'); /* 1h overlapping with 1*/
insert into period values (6,'2013-04-08 10:00','2013-04-08 20:00','Transfer'); /* 6h overlapping with 3 and 4*/
insert into period values (7,'2013-04-08 11:00','2013-04-08 12:00','Test');  /* 1h overlapping with 3 and 6*/ 
```

我需要**唯一不重叠**的日期时间范围表。

在前面的示例中，结果将是：

```
'2013-04-07 08:00','2013-04-07 13:00'
'2013-04-07 14:00','2013-04-07 17:00'
'2013-04-08 08:00','2013-04-08 20:00' 
```

如果可能是时间碎片，这不是很重要，例如：

```
'2013-04-08 08:00','2013-04-08 13:00'
'2013-04-08 12:00','2013-04-08 20:00' 
```

**- 编辑 -**

另一个例子：

```
create table period (
    id int,
    starttime datetime,
    endtime datetime,
    type varchar(64)
  );

insert into period values (1,'2013-06-13 8:30','2013-06-13 12:30','');
insert into period values (2,'2013-06-13 8:38','2013-06-13 12:38','');
insert into period values (3,'2013-06-13 13:18','2013-06-13 17:45','');
insert into period values (4,'2013-06-13 13:30','2013-06-13 17:30','');
insert into period values (5,'2013-06-13 20:00','2013-06-13 23:59',''); 
```

这应该返回：

2013-06-13 08:30 - 2013-06-13 12:38

2013-06-13 13:18 - 2013-06-13 17:45

2013-06-13 20:00 - 2013-06-13 23:59

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:14:26.600

但是你只有一个不重叠的时期，还是我理解错了这个问题？

```
select * 
from period t
where id in (
select t1.id
from period t1 
join period t2 on t1.id <> t2.id
where t2.endtime <= t1.starttime or t2.starttime >= t1.endtime
group by t1.id
having count(*) + 1 = (select count(*) from period)
) 
```

结果：

```
'2013-04-07 14:00','2013-04-07 17:00' 
```

**更新**：好的，所以你想合并重叠范围。尝试这个：

```
select starttime, endtime 
from period 
where id in (
select t1.id
from period t1 
join period t2 on t1.id <> t2.id
where t2.endtime < t1.starttime or t2.starttime > t1.endtime
group by t1.id
having count(*) + 1 = (select count(*) from period)
) 

union all

select min(start), max(fin) from (
select 
case when t2.starttime < t1.starttime then t2.starttime else t1.starttime end as start,
case when t2.endtime < t1.endtime then t1.endtime else t2.endtime end as fin
from period t1 
join period t2 on t1.id < t2.id
where t2.endtime >= t1.starttime and t2.starttime <= t1.endtime) overlaps
group by datepart(dd, start), datepart(dd, fin) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T09:34:25.273

我找到了这个解决方案......我认为这不是最好的方法，但似乎有效。

```
DECLARE @union_unique TABLE (id INT IDENTITY(1, 1) primary key ,starttime datetime,endtime datetime)
DECLARE @idset TABLE (id int)

DECLARE @i int

SET @i = 1
IF (SELECT COUNT(*) FROM period) > 0
    WHILE (@i <= (SELECT MAX(id) FROM period))
       BEGIN

          delete from @idset
          insert into @idset
          select distinct t2.id
          from period t1
          join @union_unique t2 on convert(date, t1.starttime)=convert(date, t2.starttime)
          where t1.id=@i and
          (
            t1.starttime >= t2.starttime and t1.starttime <= t2.endtime 
            or
            t1.endtime >= t2.starttime and t1.endtime <= t2.endtime 
            or
            t1.starttime <= t2.starttime and t1.endtime >= t2.endtime 
           )

          if(select count(*) from @idset)=0
            insert into @union_unique (starttime, endtime) select starttime, endtime from period where id=@i
          else
            BEGIN

              insert into @union_unique (starttime, endtime)
                select 
                    min(starttime),
                    max(endtime)
                from (
                    select starttime, endtime from @union_unique where id in (select id from @idset)
                    union 
                    select starttime, endtime from period where id=@i
                ) alll

              delete from @union_unique where id in (select id from @idset)

            END

          SET @i = @i + 1

    END

select * from @union_unique order by starttime 
```

# excel - VBA 写入文件是舍入数值 - 如何防止？

> ID：16032048
> 
> 赞同：0
> 
> 时间：2013-04-16T08:20:41.607
> 
> 标签：excel, vba

在下面的代码中，我在确保文件编写器不会将我的数字四舍五入到一定的小数位时遇到问题。我需要使用变体，因为有时值是字符串，有时是数字。

我怎样才能强制它准确地写出变量是什么？例如，下面的代码可能显示 0.00038，我想显示确切的值。

```
Dim MyFile1 As Variant
Dim MyNumber as Variant

MyFile0 = "C:/myfile.csv"
fnum0 = FreeFile()
Open MyFile0 For Output As fnum0

MyNumber = 0.0003759656

Print #fnum0, MyNumber 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:13:14.687

你的代码很好。问题出在excel上。在 excel 中打开 CSV（包括通过 VBA）时，excel 会确定单元格是什么。通常，如果它看起来像一个超过 5 个字符的数字，它将以科学记数法表示或四舍五入到 5 位。

请注意您之前对 CSV 文件所做的操作或从何处获取它，但这里有一些选项可以防止 excel 更改您的数据：

在 VBA 中，使用 Workbook.OpenText 命令打开 CSV：

- 将所有 excel 单元格作为文本*

- 具有这么多小数位的列存储的数字（注意最多 30 个小数位适用）

- 将特定列存储为文本。

--此处提供选项语法的完整列表[http://msdn.microsoft.com/en-us/library/office/bb22351(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/office/bb22351(v=office.12).aspx)

您也可以将 CSV 导入 Excel 电子表格，它会为您提供为每列选择数据类型的选项。然后针对 excel 文件运行 VBA。

如果您没有在 excel 中进行公式化，我建议将数字存储为文本字符串。VBA 会在需要时自动将数字字符串转换为数值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:52:38.090

您很可能遇到浮点错误。它们是非常小的错误，当数字从/到基数 10（人类）到/从基数 2（计算机）转换时会发生。出于您的目的，您需要确定两个值不相等意味着什么。这不仅仅是`val1 <> val2`因为这不能解释微小的错误。例如，如果你在处理金钱问题，你可能不会关心不到一分钱的东西。因此，您可以将不等式确定为`ABS(val1 - val2) > .001`。您只需要确定您对平等的容忍度并与该标准进行比较即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-27T21:49:45.470

可能是您的数字没有在 vba 中存储为数字，当您编写它时，Excel 会对其进行转换。假设您的数字是 1.789，然后将其写入格式为“通用”的单元格。Excel 会写 1.79（并认为这是数字，甚至不是格式问题）。

我发现，如果您先将数字转换为小数 CDEC(YOURNUMBER)，它将正确写入。为了更好地衡量，我还验证了单元格是 '.NUMBERFORMAT = "GENERAL'

# html - SharePoint2010 FieldDefinition FullHtml 字段，需要禁止脚本标签

> ID：16032051
> 
> 赞同：1
> 
> 时间：2013-04-16T08:20:50.623
> 
> 标签：html, sharepoint-2010

我有一个相当棘手的问题。我有一个 SharePoint 2010 列表定义。在这个定义中，我定义了一个字段，如下所示：

```
<Field ID="{AAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAA}"
            Name="MyComponentHTMLTemplate"
            DisplayName="HTML template"
            Type ="HTML"
        Description="HTML template for (my component)."
            StaticName=MyComponentHTMLTemplate"
        RichText ="FALSE"
        RichTextMode ="FullHtml"
            Required="FALSE">
        <Default>
          <![CDATA[<a href='{URL}' title='{DESCRIPTION}'>{KEYWORD}</a>]]>
        </Default>
      </Field> 
```

如您所见，该字段接受 html 标签。这是期望的行为。但是，该字段不能接受一件事 -`<scrpit>`标签。

```
<a href='{URL}' title='{DESCRIPTION}'>{KEYWORD}<script>alert.('this is not allowed')</script></a> 
```

这是为了防止跨站点脚本和类似的恶作剧。如何将字段设置为接受 html，但不接受脚本标签？到目前为止，我的谷歌搜索没有得到任何答案。任何意见，将不胜感激。

# delphi - Delphi7 TAdoQuery 中的多行参数

> ID：16032053
> 
> 赞同：0
> 
> 时间：2013-04-16T08:20:54.653
> 
> 标签：delphi, parameter-passing, ado, tadoquery

使用 Delphi 7 和 SQL Server 2005，我试图将多行参数（Stringlist.text）传递给 TAdoQuery 插入脚本。插入成功，但是当我从字段中取回数据时，我取

```
Line 1  Line 2  Line 3 
```

代替

```
Line 1  
Line 2  
Line 3 
```

表中的字段类型是 nvarchar(MAX)，我无法将其更改为任何其他类型，该表不是我的。我试图将参数类型从宽字符串更改为 ftMemo，但没有任何变化。任何想法？

```
var
  QRDestLicenze: TADOQuery;
  LsLic := TStringList;

begin
  LsLic := TStringList.Create;
  LsLic.Add('Line 1');
  LsLic.Add('Line 2');
  LsLic.Add('Line 3');
  QRDestLic.Parameters.FindParam('FieldName).Value := LsLic.Text;
  QRDestLic.ExecSQL;
end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:23:39.930

尽管使用的是 Delphi 6 和 SQL Server 2008，但我创建了一个完全相同的演示。

```
 Memo1.Lines.Clear;
  Memo1.Lines.Add('Line 1');
  Memo1.Lines.Add('Line 2');
  Memo1.Lines.Add('Line 3');

  ADOQuery1.SQL.Text := 'INSERT INTO Absences '+
    '(Employee, Date_from, Notes) '+
    'VALUES (99999, ''16/04/2013'', :sNotes)';
  ADOQuery1.Parameters.ParamValues['sNotes'] := Memo1.Lines.Text;
  ADOQuery1.ExecSQL;

  ADOQuery1.SQL.Text := 'SELECT Notes FROM Absences '+
    'WHERE Employee = 99999';
  ADOQuery1.Open;
  Memo2.Lines.Text := ADOQuery1.FieldByName('Absence_notes').AsString; 
```

这按预期工作，显示：

```
Line 1
Line 2
Line 3 
```

在两个备忘录中。

“Notes”字段的类型为 VARCHAR(Max)。

我将参数类型保留为默认值 (ftString)，并且没有更改 TADOConnection 或 TADOQuery 上的其他默认设置。

我使用“Microsoft OLE DB Provider for SQL Server”作为 ADO 数据链接提供程序。

我们是否可以尝试重现您的问题？

# sql - 创建选择查询如何使用 cast 将 varchar 转换为 int

> ID：16032055
> 
> 赞同：1
> 
> 时间：2013-04-16T08:20:59.280
> 
> 标签：sql, sql-server-2008, select, casting, substring

我想转换值

```
2to5experience

3to7experience 
```

到Minexperience：

```
2
3 
```

最大经验

```
5
7 
```

所以我创建了以下查询，

```
select cast(substring(Cast(Experience AS VARCHAR(50)),1,1)*365*24*60*60 as int) as Experience 
      from requirementsdetailsfororganization 
```

上面的一个正在工作。当我更新如下查询时，出现错误。

```
select 'Insert into Jobs(requirementId,organizationId,Minexperience)values(' + 
   Cast(o.RequirementID as varchar(50))+',' +
   Cast(o.OrganizationID as varchar(50))+',' +
   cast(substring(CAST(Experience AS VARCHAR(50)),1,1)*365*24*60*60 as int)+')'
   FROM RequirementsDetailsforOrganization AS o 
```

它显示错误

“将 varchar 值')' 转换为数据类型 int**时转换失败”**

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:27:36.007

在您选择的倒数第二行中，您将表达式转换为`int`然后添加（使用`+`） a `)`。由于左侧的值`+`是整数，SQL Server 也尝试将右侧的操作数转换为`+`整数。

尝试将演员表更改为，`int`以便将其转换为`varchar`：

```
select 'Insert into Jobs(requirementId,organizationId,Minexperience)values(' + 
   Cast(o.RequirementID as varchar(50))+',' +
   Cast(o.OrganizationID as varchar(50))+',' +
   cast(substring(CAST(Experience AS VARCHAR(50)),1,1)*365*24*60*60 as varchar(50))+')'
   FROM RequirementsDetailsforOrganization AS o 
```

笔记：

`Experience`to的演员`varchar`阵容可能是多余的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:00:06.240

尝试以下步骤。

```
--Create Table :
Create Table #Table
(
Name Varchar(50),
Experience Varchar(20)
)
Go

-- Insert Values :
Insert into #Table Values('Tom','0to0experience')
Insert into #Table Values('Victor','0to1experience')
Insert into #Table Values('Mark','11to12experience')
Go

--View Data
Select  * from #Table

--Using CharIndex  and Substring :
Select Name,
Substring(Experience,1,CharIndex('to',Experience)-1) as Yearfrom,
Substring(Experience,(CharIndex('to',Experience)+2),Len(Replace(Experience,'experience','')) - (CharIndex('to',Experience)+1)) as YearTo
from #Table

--Clean Up:
Drop Table #Table 
```

# javascript - 显示 div 并更改内部内容:)

> ID：16032059
> 
> 赞同：0
> 
> 时间：2013-04-16T08:21:08.683
> 
> 标签：javascript, jquery, show, hidden

我有简单的 jquery 显示和隐藏，但我需要一点帮助我有这个

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js" type="text/javascript"></script>
<script type="text/javascript">

$(document).ready(function(){

        $(".slidingDiv").hide();
        $(".show_hide").show();

    $('.show_hide').click(function(){
    $(".slidingDiv").slideToggle();
    });

});

</script> 
```

和 CSS

```
.slidingDiv {
    height:300px;
    background-color: #99CCFF;
    padding:20px;
    margin-top:10px;
    border-bottom:5px solid #3399FF;
}

.show_hide {
    display:none;
} 
```

添加简单的 Html

```
<a href="#" class="show_hide">Show</a>
<div class="slidingDiv">
Fill this space with really interesting content. <a href="#" class="show_hide">hide</a></div> 
```

我需要的是当有人单击 SHOW 时，该元素将打开，但是，我希望当有人单击 SHOW 时，在打开 DIV 元素时将 SHOW 更改为 HIDE，并且当有人单击 HIDE 时，再次更改为 SHOW，并且问题是我会有很多隐藏的元素，怎么做？例如我将在页面上有很多slidingDIV，但我想打开那个连接到那个href

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:24:48.250

改变：

```
$('.show_hide').click(function(){
    $(".slidingDiv").slideToggle();
}); 
```

至：

```
 $('.show_hide').click(function(){
    $(".slidingDiv").slideToggle();

    if($(this).text() == "Show" ? $(this).text("Hide") : $(this).text("Show"));
 }); 
```

**更新您编辑的问题：**

要仅更改相关的 div，请使用此代码（将下一个 .slidingDiv 获取到单击的 href）：

```
$('.show_hide').click(function(){
     $(this).next(".slidingDiv").slideToggle();

     if($(this).text() == "Show" ? $(this).text("Hide") : $(this).text("Show"));
}); 
```

你可以在这里看到这个工作：http: [//jsfiddle.net/EYnhk/](http://jsfiddle.net/EYnhk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:27:50.110

您可以使用：

```
<script type="text/javascript">
    $(document).ready(function(){
        $(".slidingDiv").hide();
        $(".show_hide").show();
        $('.show_hide').click(function(){
            $(".slidingDiv").Toggle();
            if ($('.show_hide').text() == "Show"){
                $('.show_hide').text('hide');
            }else {
                $('.show_hide').text('Show');
            }
        });       
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:42:05.227

尝试这个....

```
$(document).ready(function(){
    $(".slidingDiv").hide();
    $('.show_hide').click(function(){
        if( $(this).html()=="Show"){
            $(this).html("Hide");
        }
        else{
            $(this).html("Show");
        }
    $(".slidingDiv").slideToggle();
    });
}); 
```

[这里](http://jsfiddle.net/ru6gr/3/)

# java - 为什么资源包未在 java 支持的 webscript 中加载

> ID：16032076
> 
> 赞同：0
> 
> 时间：2013-04-16T08:22:08.780
> 
> 标签：java, alfresco, spring-surf

我有一个 webscript 定义如下：

*   mywebscript.get.desc.xml
*   mywebscript.get.properties
*   mywebscript.get.json.ftl

这个 webscript 由一个 java 控制器支持，如下所示：

```
<bean id="webscript.mypackage.mywebscript.get"
    class="javapackage.MyWebscriptGet" parent="webscript">
    <property name="serviceRegistry" ref="ServiceRegistry" />
    <property name="messageService" ref="messageService" />
</bean> 
```

我无法在 java 代码中检索“mywebscript.get.properties”中定义的某些属性，我尝试使用`messageService`and `I18nUtil.getMessage`，但似乎加载了其他属性，但我需要的属性没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:09:20.063

文件中的资源`webscriptname.get.properties`无法通过消息服务或 I18NUtil 获得。后两者是全局范围的，而 webscript 属性特定于该 WebScript。要获得它们，您需要使用 WebScript 定义。

在 Java 中，这意味着执行以下操作：

```
protected Map<String, Object> executeImpl(WebScriptRequest req,
      Status status, Cache cache) 
{
   Map<String, String> templateVars = req.getServiceMatch().getTemplateVars();
   WebScript webscript = req.getServiceMatch().getWebScript();
   ResourceBundle webscriptRB = webscript.getResources();

   ....
} 
```

从`WebScriptRequest`获取`Match`，从那里获取`WebScript`，这将为您提供 webscript 特定属性作为`ResourceBundle`

# git - Git：同时在两个不同的分支上进行相同的编辑

> ID：16032077
> 
> 赞同：1
> 
> 时间：2013-04-16T08:22:14.923
> 
> 标签：git, branch, git-branch

如果我想编写应该在这两个分支中的代码，我想知道是否可以同时在两个分支上工作。因此，如果我提交更改，它实际上会更新两个分支。

例如 ：

我的**分支 A**中的代码是这样的

```
print "I like cake" 
```

我的**分支 B**中的那个是

```
print "I love bananas" 
```

但我希望他们**都有**这行代码：

```
print "Everyone loves stackoverflow" 
```

我真的必须将它写在分支A，复制它，结帐B，然后粘贴吗？

我不能将更改应用于两个不同的分支吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:29:33.897

If you want to work on two branches simultaneously you should seriously think about why you have separate branches to begin with. Branches are usually there so you have separated commits that do not interfere with the other ones.

That being said you could† cherry-pick the commit on B, once it’s done on branch A. This will reapply the commit on the other branch. I.e. `git cherry-pick A` to pick the top commit on `A` and reapply it to the current branch.

†The problem is that it would try to add the diff, where the line `print "I like cake"` is being removed which is not present on branch B, so the patch would fail and as such also the cherry-pick, resulting in a conflict. And that actually makes sense: How exactly should Git know that those two cake/banana-love lines are actually related to each other?

# cakephp - 部署 cakePHP 项目

> ID：16032080
> 
> 赞同：0
> 
> 时间：2013-04-16T08:22:17.257
> 
> 标签：cakephp, deployment, cakephp-2.0

如何配置的值：

CAKE_CORE_INCLUDE_PATH 假设我的托管域是 www.example.com 我已经做到了：

> if (!defined('CAKE_CORE_INCLUDE_PATH')) { 定义('CAKE_CORE_INCLUDE_PATH', DS . 'usr' . DS . 'lib'); }

但它不起作用并给我以下错误：

警告：包括（/usr/lib/Cake/bootstrap.php）：无法打开流：没有这样的文件或目录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:38:43.057

正如@AD7six 建议的那样，您不需要修改此常量。您需要确保该`lib`目录与您的`app`目录一起部署。如果您想将`lib`目录重新定位到其他地方，如果您将拥有多个应用程序，则需要`include_path`在`php.ini`文件中添加路径（请参阅[文档](http://book.cakephp.org/2.0/en/deployment.html#multiple-cakephp-applications-using-the-same-core)）。

理论上，您应该能够将您的整个应用程序直接部署到您的 Web 服务器，并将您的域映射指向`index.php`CakePHP 目录的根目录（位置`app`和位置`lib`）。

# jquery - 在谷歌地图上添加 WMS（网络地图服务）地图

> ID：16032089
> 
> 赞同：1
> 
> 时间：2013-04-16T08:22:51.570
> 
> 标签：jquery, .net, google-maps, wms

我有一个地图服务器，其 url 是：

xxxx/services/MapServer?f=abc

当我在服务器上写这个 url 时，我可以看到 wms 地图，它显示了城市边界、城市之间的方式等。现在我正在研究谷歌地图，我将在谷歌地图上添加（覆盖）Wms 地图，有没有在 Google 地图上添加 Wms 的方法，我使用的是 Google Map API V3。我将使用 jquery 进行此过程

# java - String.toLowerCase 中的 StackOverflowError

> ID：16032090
> 
> 赞同：0
> 
> 时间：2013-04-16T08:22:59.067
> 
> 标签：java, string, htmlunit, stack-overflow

它看起来像一个太长的字符串导致以下异常：

```
Caused by: java.lang.StackOverflowError
    at java.lang.String.toLowerCase(String.java:2496)
    at com.gargoylesoftware.htmlunit.html.NamedAttrNodeMapImpl.fixName(DomElement.java:489)
    at com.gargoylesoftware.htmlunit.html.NamedAttrNodeMapImpl.get(DomElement.java:602)
    at com.gargoylesoftware.htmlunit.html.DomElement.getAttribute(DomElement.java:215)
    at com.gargoylesoftware.htmlunit.javascript.host.css.CSSStyleDeclaration.getStyleMap(CSSStyleDeclaration.java:634)
    at com.gargoylesoftware.htmlunit.javascript.host.css.ComputedCSSStyleDeclaration.getStyleMap(ComputedCSSStyleDeclaration.java:243)
    at com.gargoylesoftware.htmlunit.javascript.host.css.CSSStyleDeclaration.getStyleAttribute(CSSStyleDeclaration.java:472)
    at com.gargoylesoftware.htmlunit.javascript.host.css.ComputedCSSStyleDeclaration.getStyleAttribute(ComputedCSSStyleDeclaration.java:162)
    at com.gargoylesoftware.htmlunit.javascript.host.css.CSSStyleDeclaration.jsxGet_position(CSSStyleDeclaration.java:4008)
    at com.gargoylesoftware.htmlunit.javascript.host.css.ComputedCSSStyleDeclaration.jsxGet_position(ComputedCSSStyleDeclaration.java:1304)
    at com.gargoylesoftware.htmlunit.javascript.host.css.ComputedCSSStyleDeclaration.getPositionWithInheritance(ComputedCSSStyleDeclaration.java:1883)
    at com.gargoylesoftware.htmlunit.javascript.host.css.ComputedCSSStyleDeclaration.getTop(ComputedCSSStyleDeclaration.java:1737)
    at com.gargoylesoftware.htmlunit.javascript.host.css.ComputedCSSStyleDeclaration.getTop(ComputedCSSStyleDeclaration.java:1769)
    at com.gargoylesoftware.htmlunit.javascript.host.css.ComputedCSSStyleDeclaration.getTop(ComputedCSSStyleDeclaration.java:1769)
    at com.gargoylesoftware.htmlunit.javascript.host.css.ComputedCSSStyleDeclaration.getTop(ComputedCSSStyleDeclaration.java:1769)
    at com.gargoylesoftware.htmlunit.javascript.host.css.ComputedCSSStyleDeclaration.getTop(ComputedCSSStyleDeclaration.java:1769)
    at com.gargoylesoftware.htmlunit.javascript.host.css.ComputedCSSStyleDeclaration.getTop(ComputedCSSStyleDeclaration.java:1769) 
```

`ComputedCSSStyleDeclaration`我猜是导致这个问题的循环。

字符串的物理极限是多少？我可以限制循环检测器`ComputedCSSStyleDeclaration`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:34:11.287

是否已经存在关于此的错误？[http://sourceforge.net/p/htmlunit/bugs/1233/](http://sourceforge.net/p/htmlunit/bugs/1233/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T08:50:26.400

原因是代码中存在递归调用。请检查。

**在更深层次的JVM知识来解释这个问题：java虚拟机规范已经规定了java栈异常的两种情况：**

1.  Java栈是允许自动扩展的， `OOM(OutOfMemory)`当申请不到足够的内存时会报错。

2.  Java栈是由栈帧构成的，每个java方法push一个帧，`StackOverflowError`当当前线程的栈深度大于jvm的允许值时会抛出。

也许对你有帮助:)

# java - 为什么我的 Uri 没有被 android 中的 ACTION_DIAL 获取？

> ID：16032093
> 
> 赞同：0
> 
> 时间：2013-04-16T08:23:04.613
> 
> 标签：java, android

我发现以下代码运行良好：

```
Intent intent = new Intent( Intent.ACTION_DIAL , Uri.parse("tel:555-2368") ); 
```

但是当我尝试下面的代码时，它不起作用。我正在尝试通过从文件中读取来创建 URI。

```
File f = new File ( "tushar.txt") ;
f.createNewFile() ;

fw = new FileWriter(f) ;
bfr = new BufferedWriter(fw);
bfr.write("9654309293") ;
bfr.write("9876543210") ;
Uri u = Uri.fromFile(f) ;

Intent intent =
new Intent(Intent.ACTION_DIAL, u); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:33:59.170

试试这个-

```
File f = new File ( "tushar.txt") ;
f.createNewFile() ;

fw = new FileWriter(f) ;
bfr = new BufferedWriter(fw);
bfr.write("tel:9654309293") ;
bfr.write("tel:9876543210") ;
bfr.flush();
fw.close();
Uri u = Uri.fromFile(f) ;

Intent intent =
new Intent(Intent.ACTION_DIAL, u); 
```

# css - 具有可变高度 iframe 和 div 框的 div 容器未正确展开

> ID：16032095
> 
> 赞同：1
> 
> 时间：2013-04-16T08:23:09.990
> 
> 标签：css, variables, html, height

我正在为网站制作基本模板。它有 1 个标题的 div 容器，标题下方水平列出的主菜单，主要内容是谷歌地图 iframe（可变宽度）和侧边栏（绝对宽度，向右浮动）和页脚。

我在主要内容的高度上遇到了一些问题。我希望 iframe 和侧边栏具有相同的高度，同时适合页面并为页脚留出边距，但主要内容始终将自身设置为最小高度而不是拉伸到页面。

**HTML**

```
<body>
   <div id="wrapper">
      <div id="header"><img src="images/logo.png" width="360" height="127" /> </div><!--header-->

      <div id="menu">
         <ul><li><a href="index.html">Home</a></li>
         <li><a href="about.html">About</a></li>
         <li><a href="network.html">Network</a></li>
         <li><a href="help.html">Help</a></li>
         <li><a href="contact.html">Contact</a></li></ul>
      </div><!--mrnu-->

      <div id="content">
         <div id="sidebar">
         Sidebar
         </div><!--sidebar-->

      <div id="main">
         <iframe id="map" width="100%" height="auto" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.co.uk/maps?q=52.988337,3.120117&amp;num=1&amp;ie=UTF8&amp;t=m&amp;z=6&amp;ll=51.206883,7.756348&amp;output=embed"></iframe>
      </div><!--main-->

      <div class="clear"></div>
      </div><!--content-->

      <div class="push"></div><!--push-->

      <div id="footer" class="footer">
      </div><!--footer-->
   </div><!--wrapper-->
</body>
</html> 
```

**CSS**

```
body {
    font-family: 'Trebuchet MS', Verdana, Helvetica, Arial, sans-serif;
    font-size: 75.00%; 
    color: #fff;
    background: url(images/bg.png);
}
a{
    color: #090; 
    text-decoration:none; 
}
a:focus, a:hover, a:active { 
    color: #FFF;
    text-decoration: underline;
}
.clearfix:after {
    content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden
}
* {
   margin: 0;
}
html, body {
   height: 100%;
}
/* div tags */

#wrapper    {
   width: auto;
   min-height: 100%;
   height: auto !important;
   height: 100%;
   margin: 0 auto -100px;
}
#header { 
   position: relative;
   width: auto; 
   height: auto; 
   background-color: #090; 
}

#menu { 
   width: auto; 
   height: auto; 
   border: 2px solid #000; 
   font-size: 18px; 
}

#menu ul { 
   padding: 0px; 
   margin: 0px; 
   text-align: center; 
}

#menu li { 
   display: inline; 
   padding: 50px; 
}

#content    {
   width: auto;
   height: 100%;
}

#main   {
   width: auto;
   margin-right: 125px;
}
#map    {
   width: 100%;
   height: auto;
}

#sidebar    {
   width: 125px;
   height: auto;
   float: right;
   text-align: center;
   background-color: #FC0;
}

#footer {
   width: auto;
   height: 125px;
   background-color:#CC0;

}
/* classes */

.clear  {
   clear: both;
}

.footer .push   {
   height:125px;
} 
```

**注意：**可能有 1 或 2 行未使用的代码我在玩它时没有发现，所以如果有什么看起来不合适的地方，那么它可能是。

我已经看到了使用固定宽度容器解决这个问题的方法，但我认为问题在于我使用了 float 函数。我已经读过定位需要是绝对的才能正常工作，但是使用浮动是我能够找到的唯一方法，它允许地图使用可变宽度填充空间。

它可能与我正在测试的浏览器不兼容一样简单，但我不确定。

提前致谢，如果这篇文章有点乱，请见谅。我相信我很快就会学会保持清洁；D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:41:36.570

尝试这些样式更改-：

```
#map    {
   width: 100%;
//   height: auto;
}

#content    {
   width: auto;
   //height: 100%;
   height: auto;
} 
```

将#content 设置为height:auto 会推动#footer div 与#content div 相遇。

并将`<iframe>`高度设置为 100%（或 80% 以显示页脚）。它仍然留下地图 div 现在将页脚推到屏幕高度以下的问题。为了解决这个问题，可以为 iframe 设置一个绝对高度，或者使用 iframe 的替代方法。

# teradata - 如何查询系统信息和元数据？

> ID：16032100
> 
> 赞同：0
> 
> 时间：2013-04-16T08:23:29.527
> 
> 标签：teradata

在基于 Teradata 构建的数据仓库中，我如何知道整个数据仓库中有多少个数据库，仓库中有多少个数据集市，哪些数据库的表最多，哪些数据库最常用。这当然是一个编程问题，因为我问的是如何查询 Datawarehouse 以获得所需的信息。

我想了解一下数据仓库。类似的信息或建议肯定会有所帮助——我应该注意什么？什么是数据仓库的“心脏”。当您开始使用全新的 Datawarehouse 时，您首先需要查看的是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T16:32:38.867

转至[Teradata 文档网站](http://www.info.teradata.com/Datawarehouse/eBrowseBy.cfm?page=TeradataDatabase)，找到您正在使用的 Teradata 版本的“数据字典”一书。有许多可用的字典视图。

包含环境中所有数据库的特别称为“dbc.databases”，因此运行以下命令：

```
select *
from   dbc.databases
where  DBKind = 'D' 
```

DBKind 的另一个值是“U”，它将包括系统上的用户。

有关表的信息在`dbc.tables`和其他视图中。我不知道任何 Teradata 的“数据集市”概念，所以我无法为您提供帮助。

回答“最常用”之类的问题需要使用其中一个查询日志表 (DBQL)。但是，您应该询问您的系统 DBA 是否可以使用这些视图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T18:06:35.997

-- 存在多少个数据库

```
 ```
SEL COUNT(*) 
FROM dbc.databases 
WHERE dbkind = 'D' 
``` 
```

 `-- 哪些数据库的表最多？

```
 ```
SEL databasename, COUNT(*) 
FROM dbc.tables
WHERE tablekind = 'T' GROUP BY 1 ORDER BY 2 DESC 
``` 
```

 `TABLEKIND 定义

*   A：聚合UDF
*   B：组合的聚合和有序分析函数
*   E：外部存储过程
*   F：标量 UDF
*   G：触发
*   H：实例或构造方法
*   一：加入索引
*   J：杂志
*   M：宏
*   N：哈希索引
*   P：存储过程
*   问：队列表
*   R：表函数
*   S：有序分析函数
*   T：表
*   U：用户定义的数据类型
*   五：查看
*   X：授权

-- 最常用的数据库。

```
SEL DatabaseName, AccessCount, LastAccessTimeStamp 
FROM dbc.databases ORDER BY AccessCount 
```

还要确保查看**dbc.columns**表，了解每个表中的列、它们的数据类型等信息。``

# c# - TaskScheduler.Current 和 TaskScheduler.FromCurrentSynchronizationContext() 的区别？

> ID：16032102
> 
> 赞同：11
> 
> 时间：2013-04-16T08:23:32.150
> 
> 标签：c#, task, scheduler

我有一个从数据库获取产品的任务，以及`ContinueWith`操作一些 UI 修改的操作，因此我遇到了问题，因为任务创建了一个新线程，并且 UI 修改不是在 UI 线程中执行的。

我尝试使用此修复程序：

```
var currentScheduler = TaskScheduler.Current;

Task.Factory.StartNew(() =>
{    
    // get products   
}).ContinueWith((x) => handleProductsArrived(x.Result, x.Exception), currentScheduler); 
```

但它根本没有用。我检查并`ContinueWith`没有在 currentScheduler 的线程中执行，而是在另一个线程中执行。

我发现了这个方法：

```
Task.Factory.StartNew(() =>
{
    // get products
}).ContinueWith((x) => handleProductsArrived(x.Result, x.Exception), TaskScheduler.FromCurrentSynchronizationContext()); 
```

它有效。那么有什么区别呢？为什么我的第一个代码不起作用？谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-16T08:29:43.220

从文档中`TaskScheduler.Current`：

> 当未从任务中调用时，Current 将返回默认调度程序。

然后从[任务计划程序文档](http://msdn.microsoft.com/en-us/library/dd997402.aspx)中：

> 任务并行库和 PLINQ 的默认调度程序使用 .NET Framework 线程池来排队和执行工作。

因此，如果您`TaskScheduler.Current`在不参与任务时使用，您将获得一个使用线程池的调度程序。

如果您调用`TaskScheduler.FromCurrentSynchronizationContext()`，您将获得一个当前[同步上下文](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.aspx)- 在 Windows 窗体或 WPF 中（当从 UI 线程调用时）是在相关 UI 线程上安排工作的上下文。

这就是为什么第一个代码不起作用的原因：它在线程池线程上执行了您的延续。您的第二个代码在 UI 线程上执行了延续。

请注意，如果您可以使用 C# 5 和 async/await，则所有这些都可以*更*简单地处理。

# ios - 视图容器不显示表视图控件 ios

> ID：16032108
> 
> 赞同：0
> 
> 时间：2013-04-16T08:24:02.933
> 
> 标签：ios, xcode, uiview, uitableview

我正在尝试在容器中嵌入表格视图控件，这是我的应用程序：当我将表格视图控件类设置为 UITableViewController 时，一切正常：它显示了容器内的控制器。

但是现在我想在表格视图控制器后面放一些代码，所以我添加一个类（h，m 文件）并将 UITableViewController 的类设置为 TableController（这是我的类名），当我现在加载应用程序时，它不显示控制器。

寻找这个问题的一些解释或解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:52:27.247

您可以简单地创建一个 View 控制器类而不是创建一个 tableviewcontroller 类。在其 xib 中，添加一个 tablview。设置表的委托和数据源，并开始处理它。

# ios - iOS - 分布式应用程序列表

> ID：16032113
> 
> 赞同：1
> 
> 时间：2013-04-16T08:24:10.713
> 
> 标签：ios, xcode, git, repository, plist

我正在将 git 与 iPad xcode 项目一起使用。

我有一个`AppSettings.plist`包含在项目存储库中的应用程序设置 plist 文件 ()。

我希望我的开发人员`AppSettings.plist`在进行新克隆时开始执行此操作，但我不希望每次更新时都提交此文件，因此每个开发人员都可以保留自己的版本。

我想 .gitignoring 它并提供一个`AppSettings.plist.dist`但是我们怎么能记住每次我们想让他更新这个文件的构建者呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:16:18.337

因此，您不仅想要文件的静态模板，还想要修改文件并将这些修改合并到工作副本中？

*注意：*我们称之为`AppSettings.plist`“工作副本”和`AppSettings.plist.dist`“模板”</p>

我的建议是在文件中添加一个版本号。当您在存储库中进行更改时，您会增加版本号。然后在构建时检查工作副本和模板中的这些数字，如果它们不匹配，则会发出错误。

如果你不关心新旧，你也可以使用[git 的 ident 功能](http://git-scm.com/docs/gitattributes#_%3Ctt%3Eident%3C/tt%3E)。这会将模板的 blob id 添加到结帐时。如果工作副本中的 id 不同，则显然不是基于该模板。

# iphone - iPhone 搜索栏

> ID：16032115
> 
> 赞同：0
> 
> 时间：2013-04-16T08:24:18.200
> 
> 标签：iphone, objective-c, uisearchbar

我想在我的应用程序中实现 UISearchBar。我的应用程序包含一个中间带有文本的视图，通过向左或向右滑动，您可以获得相同的视图，但带有另一个文本。

我的目标是添加搜索抛出消息数组的 UISearchBar，然后在 tableview 中显示结果（开始搜索后会出现，我的应用程序中现在没有 tableview）。

有什么建议么 ？？！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:29:58.300

使用 UISearchDisplayController
看看这些教程[Link1](http://cocoabob.net/?p=67) 和[Link2](http://blog.patrickcrosby.com/2010/04/27/iphone-ipad-uisearchbar-uisearchdisplaycontroller-asynchronous-example.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:13:41.833

您可以做一件事，为了从 Array 列表中搜索，您可以使用 NSPredicate 类来获取搜索到的对象形式的数组列表。

然后使用相同的数组作为 UITableView 的数据源。并重新加载其内容。

# java - WebappclassLoader 和 StandardclassLoader jar 冲突

> ID：16032120
> 
> 赞同：4
> 
> 时间：2013-04-16T08:24:23.243
> 
> 标签：java, eclipse, tomcat, classloader

我有一个我认为是由于 Tomcat 引起的问题，但我不确定该去哪里，因为我对这个主题不太了解

问题是，我有几个使用 log4j 的项目，最近在启动服务器时出现以下错误：

```
log4j:ERROR A "org.apache.log4j.ConsoleAppender" object is not assignable to a "org.apache.log4j.Appender" variable.
log4j:ERROR The class "org.apache.log4j.Appender" was loaded by 
log4j:ERROR [org.apache.catalina.loader.StandardClassLoader@a9ae05] whereas object of type 
log4j:ERROR "org.apache.log4j.ConsoleAppender" was loaded by [WebappClassLoader
  delegate: false
  repositories:
    /WEB-INF/classes/ 
```

做了一些阅读，我看到它指出这是由于同一个罐子有几个副本。现在，我相信这是 Tomcat 的错。我在 Eclipse 中制作了第二台服务器，新服务器启动正常，所以这听起来像是服务器配置的问题。

所以我假设我的旧 Tomcat 正在加载一个 jar 文件，这会导致冲突，而新的没有这个 jar 文件会导致其配置冲突？我的问题是；我该如何寻找罪魁祸首 jar 或配置错误？

# javascript - 导入文件预览

> ID：16032123
> 
> 赞同：0
> 
> 时间：2013-04-16T08:24:32.293
> 
> 标签：javascript, jquery, parsing, ofx

我有这个导入用户交易的表格。我增强了用户可以预览他们将导入其帐户的交易列表的表单。

样本：

![在此处输入图像描述](https://i.stack.imgur.com/RbcjQ.png)

上面的示例预览是针对我成功完成的 QIF 文件格式的。

现在我正在尝试预览 OFX 文件格式，但很难将其排列在表格中并获得确切的值。

这是我的代码：

```
<input type="file" name="transactions" id="id_transactions">

<div style="display:none;width:335px;" id="preview-box">
    <h4 class="thin" class="black">Import Preview</h4>

    <table class="simple-table responsive-table footable">
        <thead>
            <tr>
                <th scope="col" width="10%"><small class="black">Date</small></th>
                <th scope="col" width="10%"><small class="black">Amount</small></th>
                <th scope="col" width="20%"><small class="black">Payee</small></th>
            </tr>
        </thead>
    </table>

    <div class="scrollable" style="height:100px">
        <table class="simple-table responsive-table footable">
            <tbody id="preview-table"></tbody>
        </table>
    </div><br/>
</div> 

<script>
    $('#id_transactions').change(function() {
        var upload = document.getElementById('id_transactions')
        var files = upload.files
        if (files != undefined) {
            var reader = new FileReader();

            reader.onload = function(e) {
                var extension = upload.value.split('.').pop().toLowerCase()
                var lineSplit = e.target.result.split("\n");
                var payee = ''
                var date
                var amount
                var content = "";
                var content1 = "";
                var content2 = "";

                if(extension == "qif"){
                    // for qif preview
                }else if(extension == "ofx"){
                    $('#preview-box').show(500)

                    for(var i = 1; i < lineSplit.length; i++) {
                        //I'm stuck here....
                    }
                }

                $('#preview-table').html(content);
            };
            reader.readAsText(files.item(0));
        }
    });
</script> 
```

**样本.ofx**

```
 OFXHEADER:100
DATA:OFXSGML
VERSION:103
SECURITY:NONE
ENCODING:USASCII
CHARSET:1252
COMPRESSION:NONE
OLDFILEUID:NONE
NEWFILEUID:NONE

<OFX>
  <SIGNONMSGSRSV1>
    <SONRS>
      <STATUS>
        <CODE>0
        <SEVERITY>INFO
      </STATUS>
      <DTSERVER>20071015021529.000[-8:PST]
      <LANGUAGE>ENG
      <DTACCTUP>19900101000000
      <FI>
        <ORG>MYBANK
        <FID>01234
      </FI>
    </SONRS>
  </SIGNONMSGSRSV1>
  <BANKMSGSRSV1>
      <STMTTRNRS>
        <TRNUID>23382938
        <STATUS>
          <CODE>0
          <SEVERITY>INFO
        </STATUS>
        <STMTRS>
          <CURDEF>USD
          <BANKACCTFROM>
            <BANKID>987654321
            <ACCTID>098-121
            <ACCTTYPE>SAVINGS
          </BANKACCTFROM>
          <BANKTRANLIST>
            <DTSTART>20070101
            <DTEND>20071015
            <STMTTRN>
              <TRNTYPE>CREDIT
              <DTPOSTED>20070315
              <DTUSER>20070315
              <TRNAMT>200.00
              <FITID>980315001
              <NAME>DEPOSIT
              <MEMO>automatic deposit
            </STMTTRN>
            <STMTTRN>
              <TRNTYPE>CREDIT
              <DTPOSTED>20070329
              <DTUSER>20070329
              <TRNAMT>150.00
              <FITID>980310001
              <NAME>TRANSFER
              <MEMO>Transfer from checking
            </STMTTRN>
            <STMTTRN>
              <TRNTYPE>PAYMENT
              <DTPOSTED>20070709
              <DTUSER>20070709
              <TRNAMT>-100.00
              <FITID>980309001
                <CHECKNUM>1025
              <NAME>John Hancock
            </STMTTRN>
          </BANKTRANLIST>
          <LEDGERBAL>
            <BALAMT>5250.00
            <DTASOF>20071015021529.000[-8:PST]
          </LEDGERBAL>
          <AVAILBAL>
            <BALAMT>5250.00
            <DTASOF>20071015021529.000[-8:PST]
          </AVAILBAL>
        </STMTRS>
      </STMTTRNRS>
  </BANKMSGSRSV1>
</OFX> 
```

有人已经这样做了吗？

**更新：**

输出：

![在此处输入图像描述](https://i.stack.imgur.com/u28MT.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:15:22.647

你知道吗，这个 OFX 文件格式在第二部分看起来很像 XML，用一个空行分隔两个部分（如果我错了，请纠正我，我不知道这种格式）。

在`onload`事件监听器中，尝试这样的事情：

```
var ofxParts = e.result.split("\r?\n\r?\n"), ofxHeaders, ofxDocument;

ofxHeaders = JSON.parse("{"
    + ofxParts[0].replace(/(\w+) *: *(\w*)/g, "\"$1\": \"$2\"")
        .replace(/\r?\n/g, ", ") + "}");

ofxDocument = new DOMParser().parseFromString(ofxParts[1]
        .replace(/<(\w+)>(?!\n|\r\n)(.*)/g, "<$1>$2</$1>")); 
```

现在您应该在一个有用的 Javascript 对象中拥有 OFX 标头，如下所示：

```
ofxHeaders = {
    "OFXHEADER": "100",
    "DATA": "OFXSGML",
    "VERSION": "103",
    "SECURITY": "NONE",
    "ENCODING": "USASCII",
    "CHARSET": "1252",
    "COMPRESSION": "NONE",
    "OLDFILEUID": "NONE",
    "NEWFILEUID": "NONE"
}; 
```

`document.evaluate`并且您可以像任何其他 XML 一样抓取和选择您的 OFX​​ 文档。

只要您使用`FileReader`. IE10 除外，它不支持`document.evaluate`. 如果要使用 XPath ，则必须创建`ActiveXObject`并使用。`loadXML`

或者你可以只使用 jQuery：

```
var $ofx = $.parseXML(ofxParts[1].replace(/<(\w+)>(?!\n|\r\n)(.*)/g, "<$1>$2</$1>")); 
```

**编辑**：您现在可以通过这种方式创建表的行：

```
var $xfers = $ofx.find("STMTTRN");

content = $xfers.map(function(xf) {
    var $xf = $(xf), date = $xf.find("DTPOSTED").text();
    return "<tr><td>" + date.substring(4, 6) + "/" + date.substring(6)
        + "/" + date.substring(0, 4) + "<td></td>" + $xf.find("NAME").text()
        + "</td><td>" + $xf.find("TRNAMT").text() + "</td></tr>";
}).join(""); 
```

# android - 共享偏好以保存完整的活动

> ID：16032126
> 
> 赞同：0
> 
> 时间：2013-04-16T08:24:37.750
> 
> 标签：android, sharedpreferences

我正在创建一个应用程序，在该应用程序的离线演示中我想保存完整的活动，以便当用户再次打开应用程序时，它将获得对该活动的最后更改。我的活动包含 2 个搜索栏、1 个切换按钮、1 个数字选择器，所以我的问题是，我可以将其用于完整活动，而不是为每个视图使用共享首选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:37:39.123

使用以下方法将数据保存到 Bundle

`protected void onSaveInstanceState(Bundle outState) { // TODO Auto-generated method stub super.onSaveInstanceState(outState); }`

# php - 从具有错误字符集的 MySQL 列中挽救希伯来语

> ID：16032140
> 
> 赞同：1
> 
> 时间：2013-04-16T08:25:30.580
> 
> 标签：php, mysql, character

如此愚蠢，我将希伯来语存储在一个带有错误字符集的 MySQL 表中。我在输入大量数据后意识到，我想知道是否仍然可以访问这些数据。此后，我使用 CONVERT TO 将表的字符集更改为希伯来语，并且新条目正确存储，但旧条目仍显示为：

```
×?×? ×× ×? ×?×?×?×¨ ×?×?×©×?×§ ×?××? ×?×?×©×?×§ 
```

有没有办法将该数据修改回希伯来语或已经造成损害？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:05:41.557

应该是可能的，看起来像 x 的字符是希伯来语平面的逃生。

调查`http://php.net/manual/de/function.utf8-decode.php`。

如果 utf8-decode 不起作用，注释中的功能之一可能会起作用。确保为 PHP 使用多字节字符集。

# exchange-server - 需要您对 Exchange ActiveSync 客户端的建议

> ID：16032141
> 
> 赞同：0
> 
> 时间：2013-04-16T08:25:36.360
> 
> 标签：exchange-server, exchange-server-2007, exchange-server-2010, activesync

我正要开始构建 MS Exchange ActiveSync 客户端。我发现了两种类型的实现。我不知道哪个是正确的方法。

1.  [http://social.msdn.microsoft.com/Forums/en-US/os_exchangeprotocols/thread/3b1e73fc-b69a-4ed2-a905-d15af6666f22](http://social.msdn.microsoft.com/Forums/en-US/os_exchangeprotocols/thread/3b1e73fc-b69a-4ed2-a905-d15af6666f22)

2.  [http://msdn.microsoft.com/en-us/library/hh361570%28EXCHG.140%29.aspx](http://msdn.microsoft.com/en-us/library/hh361570%28EXCHG.140%29.aspx)

第一个选项表示命令发送到我的 Exchange 服务器（从我的 iPhone 邮件应用程序）并且**正文不是 xml 编码的**。*如果不使用编码的 xml*，我真的没有找到任何其他关于 ActiveSync 的标准文档。

第二个选项说使用 WBXML 和 ActiveSync HTTP 来执行正确的操作。它的接缝非常有据可查。

在思考执行发送邮件、回复、转发、标记已读/未读等操作的正确方法时，我真的很困惑。

你们能指导我选择正确的基本方法，它支持所有版本的 Exchange 服务器，而且变化很小（Exchange 2007、2010 等）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T08:29:27.997

既然您提到了 Exchange ActiveSync，我相信您正在构建一个 PDA 邮件客户端？如果是，您可以使用 WBXML 方法。

例如，如果您在 phoneGap 中构建 Android 应用程序，那么您可以通过两种方法解决此问题。用户使用[KXML](http://kxml.sourceforge.net/) java 解析器来解析、编码和解码 wbxml、xml 或使用[此](https://github.com/asutherland/jsas)库的 javascript 方法。

# c# - 操作系统区域设置和浏览器语言

> ID：16032145
> 
> 赞同：1
> 
> 时间：2013-04-16T08:25:41.670
> 
> 标签：c#, asp.net, localization

我正在开发一个 asp.net 项目，我们需要根据 2 个不同的来源对 UI 进行本地化。

最常见的情况是用户登录时。在我们的用户管理系统中，我们知道哪种语言是他的首选语言。在这种情况下，一切都很好，很容易。

另一种情况是用户尚未登录时。在这种情况下，我们使用浏览器语言。为了找到它，我们使用以下代码

```
if (Request.UserLanguages != null && Request.UserLanguages.Length > 0)
{
    //USE THE LANGUAGE
} 
```

我们有一个用户向我们报告说他没有更改他的浏览器语言，而是他的操作系统区域设置，但它影响了应用程序中使用的语言......

这对我来说听起来很奇怪......遗憾的是，用户不是 IT 人员，并且很难提供更多有用的信息。

你们有人听说过这是可能的吗？在我看来，这似乎不应该发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:48:34.480

您是否尝试在`<system.web>`应用程序文件的部分中为您的应用程序设置两个属性`web.config`？

```
 <globalization culture="auto" uiCulture="auto" /> 
```

两者`culture`和`uiCulture`属性都需要根据用户语言选择进行相应设置。

# javascript - 不依赖于 URL 的浏览器插件的本地存储

> ID：16032156
> 
> 赞同：-1
> 
> 时间：2013-04-16T08:26:18.463
> 
> 标签：javascript, jquery, plugins, local-storage

所以我正在编写一个需要在本地存储数据的浏览器插件。我正在使用 jQuery jStorage 插件，所以我的代码如下所示：

```
var value = ($.jStorage.get("test")) + 1 ;
$.jStorage.set("test", value);
console.log($.jStorage.get("test")); 
```

问题是它专门将值存储到您所在的网站。因此，如果插件在 example1.com 上激活，则该值可能是 10；那么如果它在 example2.com 上激活，则值可能会完全不同；

我需要在本地存储数据，这些数据在所有页面上都保持不变。通过将其存储在浏览器插件存储或其他东西中（不是那么理想，因为这意味着对于每个浏览器我都必须再次弄清楚我假设。）

但是任何帮助或指导都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:37:39.703

您可以使用 jquery 的本地存储功能。请参考以下示例

为变量赋值

```
localStorage["sample"] = 1; 
```

从本地存储中获取价值

```
var mySample = localStorage["sample"]; 
```

Jquery 将在浏览器中存储局部变量，因此即使在刷新页面后您也会得到。

希望能帮助到你。

# stored-procedures - Visual Studio 中的存储过程返回类型或

> ID：16032157
> 
> 赞同：0
> 
> 时间：2013-04-16T08:26:22.583
> 
> 标签：stored-procedures, visual-studio-2012

我在我的 SQL Server 2005 数据库上运行了一个非常简单的存储过程。

```
ALTER PROCEDURE [dbo].[Survey_Response_DELETE_For_Survey]
    @surveyId uniqueidentifier
AS
BEGIN
    DELETE FROM SurveyResponse
    WHERE SurveyId = @surveyId

    RETURN 0   -- Ideally this would be RETURN @@ROWCOUNT
END 
```

当我将存储过程拖到 O/R 设计器表面 (Visual Studio 2012) 上时，我收到以下消息：

**无法检测到以下存储过程的返回类型。在“属性”窗口中设置每个存储过程的返回类型**

当我尝试执行此操作时，我选择*“int (System.Int32)”*并收到一条警告消息，指出更改无法撤消，但属性窗口不会更新为显示“int”，它只是显示*“（无)'*

我努力了...

*   重新创建存储过程
*   在 O/R 中删除并重新创建数据库连接
*   删除连接，退出 Visual Studio，重新创建连接

这些都不起作用。现在花了一天半的时间，如果有任何想法/建议，将不胜感激。

谢谢。

# mysql - SQL - 减少时间请求

> ID：16032160
> 
> 赞同：1
> 
> 时间：2013-04-16T08:26:34.447
> 
> 标签：mysql, sql

我有这张桌子（eod）：

```
| eod_id | company_symbol |    date    | open  | close | high  |  low  | 
|      1 |            AAA | 01-01-2000 | 40.00 | 42.00 | 43.00 | 39.00 | 
```

我使用这 3 个请求：

```
1\. SELECT COUNT(*) FROM eod WHERE company_symbol="AAA" AND CLOSE>OPEN 
AND DATE BETWEEN "0000-00-00" AND "0000-00-00";
2\. SELECT COUNT(*) FROM eod WHERE company_symbol="AAA" AND CLOSE<OPEN 
AND DATE BETWEEN "0000-00-00" AND "0000-00-00";
3\. SELECT min(date), max(date) FROM eod WHERE company_symbol="AAA" 
```

每个请求大约需要 0.7 秒才能执行，所以我想减少每个请求的时间。我该如何处理？是否可以只在一个中完成两个第一个请求？

在此先感谢您的帮助，

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:41:34.863

结合前两个：

```
SELECT
    SUM(CASE WHEN CLOSE>OPEN THEN 1 ELSE 0 END) as Higher,
    SUM(CASE WHEN CLOSE<OPEN THEN 1 ELSE 0 END) as Lower
FROM eod WHERE company_symbol="AAA"
AND DATE BETWEEN "0000-00-00" AND "0000-00-00"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:42:36.893

正如您怀疑前两个查询可以组合：

```
SELECT  COUNT(CASE WHEN CLOSE < OPEN THEN 1 END),
        COUNT(CASE WHEN CLOSE > OPEN THEN 1 END) 
FROM    eod
WHERE   company_symbol="AAA" 
AND     DATE BETWEEN "0000-00-00" AND "0000-00-00"; 
```

*（我假设你`DATE BETWEEN`的条款只是一个例子，但如果不是，它可以改为`DATE = "0000-00-00"`）*

我想说 company_symbol 上的非聚集索引是必须的，如果您的 dbms 支持非键列，则包含`OPEN`,`CLOSE`并`DATE`在此索引中，然后根据您插入/更新数据的频率，也可能值得在您的日期列上建立索引.

与基于性能的问题一样，您可以比我们帮助您更好地帮助自己，您可以查看执行计划、IO 统计数据并运行各种测试等，以确定是什么导致您的查询变慢，一旦您确定更具体地说，您可以查看添加特定索引来解决问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-16T08:30:27.627

我提高性能的第一个建议是永远不要使用用户**计数（*）**，而是在您的情况下使用像**count(eod_id)**这样的单个列。

# javascript - 如何使用 JQuery 在 Android 的通知区域中提醒消息

> ID：16032161
> 
> 赞同：-1
> 
> 时间：2013-04-16T08:26:36.913
> 
> 标签：javascript, android, jquery, jquery-mobile

我使用 Jquery 和 PhP 为 Android 移动开发了一个基于浏览器的小型应用程序。如何在通知区域（如果应用程序主页不可见，我可以看到该消息的屏幕顶部）中提醒一条消息，如“流程已完成”。我不想打扰用户，就像屏幕顶部的通知或提醒一样。谢谢是提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:36:33.493

您将不得不使用 Phonegap 和[状态栏通知插件](https://github.com/phonegap/phonegap-plugins/tree/master/Android/StatusBarNotification)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:31:06.473

You mean the notification panel **outside** of the browser on the home screen? If your app is just browser based, I'm afraid you have no chance to access anything outside of the browser window.

There are solutions to access such features, a popular example being **[Phonegap](http://phonegap.com/)** but I'm not sure if the notification functionality is part of it.

# android - 关于ListView中ViewHolder模式的实现优化

> ID：16032164
> 
> 赞同：5
> 
> 时间：2013-04-16T08:26:41.333
> 
> 标签：android, performance, listview

所以众所周知的 ViewHolder 模式通常看起来像（ListAdapter）：

```
 ...

    @Override
    public View getView(final int position, View convertView, final ViewGroup parent) {

        final Album album = albums.get(position);

        ViewHolder viewHolder = null;
        if (convertView==null){
            convertView = inflater.inflate(R.layout.albums_list_item, null);

            final ImageView albumImage = (ImageView) convertView.findViewById(R.id.album_icon);

            final TextView txtTitle = (TextView) convertView.findViewById(R.id.album_title);

            final TextView txtDescription = (TextView) convertView.findViewById(R.id.album_copyright);

            viewHolder = new ViewHolder();
            viewHolder.albumImage = albumImage;
            viewHolder.txtTitle = txtTitle;
            viewHolder.txtDescription = txtDescription;
            convertView.setTag(viewHolder);
        }
        else
            viewHolder = (ViewHolder)convertView.getTag();

        viewHolder.txtTitle.setText(album.getTitle(locale));
        viewHolder.txtDescription.setText(album.getCopyrightInfo(locale));
        ...
        return convertView;
    } 
```

而 ViewHolder 类通常看起来像：

```
static class ViewHolder{
    public ImageView previewImage;
    public TextView txtTitle;
    public TextView txtDescription;
} 
```

我的问题是关于 ViewHolder 的实现。
1）为什么不使用构造函数而不是初始化每个字段？
2）为什么它使用默认访问类型而不是受保护（实际上它必须是私有的，但这会由于 JIT 创建的静态访问器而影响性能）？好吧，我猜它只是关于继承。
那么为什么以下模式不是更好（不包括“保护与默认”访问类型）：

```
protected static class ViewHolder{
    public final ImageView previewImage;
    public final TextView txtTitle;
    public final TextView txtDescription;

    public ViewHolder (final ImageView previewImage,  final TextView txtTitle, final TextView txtDescription){
        this.previewImage = previewImage;
        this.txtTitle = txtTitle;
        this.txtDescription = txtDescription;
    }
} 
```

ListAdapter 的唯一变化是：

```
...
final TextView txtDescription = (TextView) convertView.findViewById(R.id.album_copyright);
viewHolder = new ViewHolder(albumImage, txtTitle, txtDescription);
convertView.setTag(viewHolder);
... 
```

无论如何，它必须调用构造函数。这只是品味问题吗？或者这个版本是否会以某种方式变慢，或者它会以某种方式影响性能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T08:55:38.837

我使用了一种与您的方法非常相似的方法，但我更进一步，因为`ViewHolder`适配器类是私有的，我通过将视图传递给它的构造函数并在那里设置值将它与类紧密耦合，例如

```
 private class ViewHolder
    {
      protected final ImageView image;
      protected final TextView  title;
      protected final TextView  status;

      public ViewHolder( final View root )
      {
         image = (ImageView) root.findViewById( R.id.artist_image );
         title = (TextView) root.findViewById( R.id.artist_title );
         status = (TextView) root.findViewById( R.id.artist_status );
      }
   } 
```

而在`getView(...)`

```
 View row = convertView;

  if ( null == row || null == row.getTag() )
  {
     row = inflater.inflate( R.layout.adapter_artists, null );
     holder = new ViewHolder( row );
     row.setTag( holder );
  }
  else
  {
     holder = (ViewHolder) row.getTag();
  } 
```

我喜欢这样做，因为它使我的适配器代码更简单，`getView(...)`并且具有最终变量的好处。我可能会获得轻微的速度提升，使其受到保护，但我发现即使有大量列表，性能也足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T08:34:16.073

我认为这只是品味问题。至于我，它甚至看起来比标准的更好。此外，由于使用最终变量，您的版本可能会更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T08:46:52.030

在我看来，这是最好的方法，但是我会更改您的代码。您在`ViewHolder`设置视图的位置有一个构造函数，但我可以看到您没有在代码中使用它。我会使用它或只是删除它。还有一件事，实际上有一种更好的方法可以获得相同的效果，但它只适用于 Android 4+：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

    ImageView mIcon;
    TextView mName;
    if (convertView == null) {
        convertView = LayoutInflater.from(context)
          .inflate(R.layout.my_contact_listing, parent, false);
        mIcon = (ImageView) convertView.findViewById(R.id.contact_icon);
        mName = (TextView) convertView.findViewById(R.id.contact_name);
        convertView.setTag(R.id.contact_icon, mIcon);
        convertView.setTag(R.id.contact_name, mName);
    } else {
        mIcon = (ImageView) convertView.getTag(R.id.contact_icon);
        mName = (TextView) convertView.getTag(R.id.contact_name);
    }

    Contact mContact = getItem(position);
    mName.setText(mContact.getName());
    mIcon.setImageResource(mContact.getIcon());

    return convertView;
} 
```

# c# - 在运行时分配复合外键的一部分

> ID：16032165
> 
> 赞同：0
> 
> 时间：2013-04-16T08:26:42.807
> 
> 标签：c#, fluent-nhibernate-mapping

我有一个类引用另一个具有复合 ID 的类：

```
SingleIdClassMap(){
  Id(x=>x.Id);
  References(x=>CompositeIdClass);
}

CompositeIdClass(){
  CompositeId().KeyReference(x => x.SingleIdClass).KeyReference(x => x.DynamicProperty);
} 
```

现在这不会编译，因为在 中`SingleIdClassMap`，没有关于 的信息`DynamicProperty`。我希望在运行时从另一个类加载它：

```
PropertyClass.Singleton.GetCurrentProperty(); 
```

有没有办法告诉 NHibernate 它可以从中检索复合键的第二部分的值`PropertyClass.GetCurrentProperty()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:29:04.930

IMO过滤器最简单

```
EntityMap()
{
    Id(x => x.Id);
    HasMany(x => Texts)
        .KeyColumn("entity_id")
        .ApplyFilter("languageFilter", "language_id = :lid");
}

EntityTextClass()
{
    CompositeId()
        .KeyReference(x => x.Entity, "entity_id")
        .KeyProperty(x => x.LanguageId);
}

// at beginning of request
session.EnableFilter("languageFilter").SetParameter(":lid", languageId);

var entity = session.Query<Entity>().Fetch(e => e.Texts).First();
string text = entity.Texts.First();  // could be a seperate property 
```

或者如果您需要所有文本（例如在查看/编辑本地化时）

```
var entity = session.Query<Entity>().Fetch(e => e.Texts).First();
var allTexts = entity.Texts; 
```

# git - 是否可以恢复所有未提交的文件和非版本控制文件以及 git 存储库中已删除的项目？

> ID：16032166
> 
> 赞同：0
> 
> 时间：2013-04-16T08:26:47.767
> 
> 标签：git

目前，我正在做一个java项目。我正在我的计算机中创建一个工作空间，并且我已经从服务器的 git 存储库中克隆了项目。

不小心，我的一个项目被从工作空间中删除了。它已经包含

一种。一些未提交的文件 b. 和一些未版本控制的文件。

再次从服务器存储库克隆同一个项目时，那些未提交和未版本化的文件不存在。所以，我遇到了大麻烦。

是否可以从工作空间中获取已删除项目中存在的所有未提交和非版本化文件？请尽快回复我。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:29:04.967

## 不

未跟踪的文件 - 不跟踪。Git 对它们一无所知。

## 防止再次发生

为避免将来发生此类问题：

*   使用功能分支
*   经常提交（小原子提交）
*   采用`git stash`

按预期使用分支（无论你在做什么，一个新的分支）让你可以自由地提交你喜欢的任何东西，知道你以后可以使用 - 或*不*使用 - 这些提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:29:13.437

不，git 不能帮助你处理它不知道的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:49:48.947

不。如果文件未被跟踪，那么 git 对它们一无所知.. 下次考虑使用功能分支并经常提交

```
git checkout -b <f-branch>
git commit -a 
```

# java - 线程“main”中的异常 java.lang.RuntimeException: Stub ，查看了所有线程但没有用

> ID：16032172
> 
> 赞同：1
> 
> 时间：2013-04-16T08:27:02.670
> 
> 标签：java, opencv, javacv, java.util.logging

这是一个人脸识别类，它从数据文件夹中读取人脸，但是当我运行这段代码时，我遇到了下面给出的错误。所有[相关](https://stackoverflow.com/questions/9213533/exception-in-thread-main-java-lang-runtimeexception-stub)线程都无法解决我的问题。任何帮助将不胜感激。

```
 public  class FaceRecognition {

          /** the logger */
          private static final Logger LOGGER = Logger.getLogger(FaceRecognition.class);
          //JavaLoggingClassName.loginfo();
          /** the number of training faces */
          private int nTrainFaces = 0;
          private int width = 320;
          private int height = 240;
          /** the training face image array */
          IplImage[] trainingFaceImgArr = null;//IplImage.create(width, height, IPL_DEPTH_8U, 4);
          /** the test face image array */
          IplImage[] testFaceImgArr= null;
          //IplImage image = IplImage.create(width, height, IPL_DEPTH_8U, 4);
         // Bitmap mBitmap;
          //IplImage image = IplImage.create(width, height, IPL_DEPTH_8U, 4);
          //private Bitmap mBitmap;

          /** the person number array **/
          CvMat personNumTruthMat;
          /** the number of persons **/
          int nPersons;
          /** the person names */
          final List personNames = new ArrayList<>();
          /** the number of eigenvalues */
          int nEigens = 0;
          /** eigenvectors */
          IplImage[] eigenVectArr;
          /** eigenvalues */
          CvMat eigenValMat;
          /** the average image */
          IplImage pAvgTrainImg;
          /** the projected training faces */
          CvMat projectedTrainFaceMat;

          /** Constructs a new FaceRecognition instance. */
          public FaceRecognition() {
          }
          //JavaLoggingClassName.loginfo()
          /** Trains from the data in the given training text index file, and store the trained data into the file 'data/facedata.xml'.
           *
           * @param trainingFileName the given training text index file
           */
          public void learn(final String trainingFileName) {
            int i;

            // load training data
            LOGGER.info("===========================================");
            //IplImage 
            LOGGER.info("Loading the training images in " + trainingFileName);
            //IplImage image = IplImage.create(width, height, IPL_DEPTH_8U, 4);
            //mBitmap.copyPixelsFromBuffer(image.getByteBuffer());
            try
            {
            trainingFaceImgArr /*mBitmap*/ = loadFaceImgArray(trainingFileName);
            } catch (Exception e)
            {

                Log.i("ERROR", "ERROR in Code: " + e.toString());
                e.printStackTrace();
            }

            nTrainFaces = trainingFaceImgArr.length;
            LOGGER.info("Got " + nTrainFaces + " training images");
            if (nTrainFaces < 3) {
              LOGGER.error("Need 3 or more training faces\n"
                      + "Input file contains only " + nTrainFaces);
              return;
            }

            LOGGER.info("created projectedTrainFaceMat with " + nTrainFaces + " (nTrainFaces) rows and " + nEigens + " (nEigens) columns");
            if (nTrainFaces < 5) {
              LOGGER.info("projectedTrainFaceMat contents:\n" + oneChannelCvMatToString(projectedTrainFaceMat));
            }

            /* @param szFileTest the index file of test images

            } catch (IOException ex) {
              throw new RuntimeException(ex);
            }

            LOGGER.info("Data loaded from '" + filename + "': (" + nFaces + " images of " + nPersons + " people).");
            final StringBuilder stringBuilder = new StringBuilder();
            stringBuilder.append("People: ");
            if (nPersons > 0) {
              stringBuilder.append("<").append(personNames.get(0)).append(">");
            }
            for (i = 1; i < nPersons && i < personNames.size(); i++) {
              stringBuilder.append(", <").append(personNames.get(i)).append(">");
            }
            LOGGER.info(stringBuilder.toString());

            return faceImgArr;
          }

          /** Does the Principal Component Analysis, finding the average image and the eigenfaces that represent any image in the given dataset. */
          private void doPCA() {
            int i;
            CvTermCriteria calcLimit;
            CvSize faceImgSize = new CvSize();

            // set the number of eigenvalues to use
            nEigens = nTrainFaces - 1;

            LOGGER.info("allocating images for principal component analysis, using " + nEigens + (nEigens == 1 ? " eigenvalue" : " eigenvalues"));

            // allocate the eigenvector images
            faceImgSize.width(trainingFaceImgArr[0].width());
            faceImgSize.height(trainingFaceImgArr[0].height());
            eigenVectArr = new IplImage[nEigens];
            for (i = 0; i < nEigens; i++) {
              eigenVectArr[i] = cvCreateImage(
                      faceImgSize, // size
                      IPL_DEPTH_32F, // depth
                      1); // channels
            }

            // allocate the eigenvalue array
            eigenValMat = cvCreateMat(
                    1, // rows
                    nEigens, // cols
                    CV_32FC1); // type, 32-bit float, 1 channel

            // allocate the averaged image
            pAvgTrainImg = cvCreateImage(
                    faceImgSize, // size
                    IPL_DEPTH_32F, // depth
                    1); // channels

            // set the PCA termination criterion
            calcLimit = cvTermCriteria(
                    CV_TERMCRIT_ITER, // type
                    nEigens, // max_iter
                    1); // epsilon

            LOGGER.info("computing average image, eigenvalues and eigenvectors");
            // compute average image, eigenvalues, and eigenvectors
            cvCalcEigenObjects(
                    nTrainFaces, // nObjects
                    new PointerPointer(trainingFaceImgArr), // input
                    new PointerPointer(eigenVectArr), // output
                    CV_EIGOBJ_NO_CALLBACK, // ioFlags
                    0, // ioBufSize
                    null, // userData
                    calcLimit,
                    pAvgTrainImg, // avg
                    eigenValMat.data_fl()); // eigVals

            LOGGER.info("normalizing the eigenvectors");
            cvNormalize(
                    eigenValMat, // src (CvArr)
                    eigenValMat, // dst (CvArr)
                    1, // a
                    0, // b
                    CV_L1, // norm_type
                    null); // mask
          }

          /** Stores the training data to the file 'data/facedata.xml'. */
          private void storeTrainingData() {
            CvFileStorage fileStorage;
            int i;

            LOGGER.info("writing data/facedata.xml");

            // create a file-storage interface
            fileStorage = cvOpenFileStorage(
                    "data/facedata.xml", // filename
                    null, // memstorage
                    CV_STORAGE_WRITE, // flags
                    null); // encoding

            // Store the person names. Added by Shervin.
            cvWriteInt(
                    fileStorage, // fs
                    "nPersons", // name
                    nPersons); // value

            for (i = 0; i < nPersons; i++) {
              String varname = "personName_" + (i + 1);
              String personame=(String)personNames.get(i);
              cvWriteString(
                      fileStorage, // fs
                      varname, // name
                      personame, // string
                      0); // quote
            }

            // store all the data
            cvWriteInt(
                    fileStorage, // fs
                    "nEigens", // name
                    nEigens); // value

            cvWriteInt(
                    fileStorage, // fs
                    "nTrainFaces", // name
                    nTrainFaces); // value

            cvWrite(
                    fileStorage, // fs
                    "trainPersonNumMat", // name
                    personNumTruthMat, // value
                    cvAttrList()); // attributes

            cvWrite(
                    fileStorage, // fs
                    "eigenValMat", // name
                    eigenValMat, // value
                    cvAttrList()); // attributes

            cvWrite(
                    fileStorage, // fs
                    "projectedTrainFaceMat", // name
                    projectedTrainFaceMat,
                    cvAttrList()); // value

            cvWrite(fileStorage, // fs
                    "avgTrainImg", // name
                    pAvgTrainImg, // value
                    cvAttrList()); // attributes

            for (i = 0; i < nEigens; i++) {
              String varname = "eigenVect_" + i;
              cvWrite(
                      fileStorage, // fs
                      varname, // name
                      eigenVectArr[i], // value
                      cvAttrList()); // attributes
            }

            // release the file-storage interface
            cvReleaseFileStorage(fileStorage);
          }

          /** Opens the training data from the file 'data/facedata.xml'.
           *
           * @param pTrainPersonNumMat
           * @return the person numbers during training, or null if not successful
           */
          private CvMat loadTrainingData() {
            LOGGER.info("loading training data");
            CvMat pTrainPersonNumMat = null; // the person numbers during training
            CvFileStorage fileStorage;
            int i;

            // create a file-storage interface
            fileStorage = cvOpenFileStorage(
                    "data/facedata.xml", // filename
                    null, // memstorage
                    CV_STORAGE_READ, // flags
                    null); // encoding
            if (fileStorage == null) {
              LOGGER.error("Can't open training database file 'data/facedata.xml'.");
              return null;
            }

            // Load the person names.
            personNames.clear();        // Make sure it starts as empty.
            nPersons = cvReadIntByName(
                    fileStorage, // fs
                    null, // map
                    "nPersons", // name
                    0); // default_value
            if (nPersons == 0) {
              LOGGER.error("No people found in the training database 'data/facedata.xml'.");
              return null;
            } else {
              LOGGER.info(nPersons + " persons read from the training database");
            }

            // Load each person's name.
            for (i = 0; i < nPersons; i++) {
              String sPersonName;
              String varname = "personName_" + (i + 1);
              sPersonName = cvReadStringByName(
                      fileStorage, // fs
                      null, // map
                      varname,
                      "");
              personNames.add(sPersonName);
            }
            LOGGER.info("person names: " + personNames);

            // Load the data
            nEigens = cvReadIntByName(
                    fileStorage, // fs
                    null, // map
                    "nEigens",
                    0); // default_value
            nTrainFaces = cvReadIntByName(
                    fileStorage,
                    null, // map
                    "nTrainFaces",
                    0); // default_value
            Pointer pointer = cvReadByName(
                    fileStorage, // fs
                    null, // map
                    "trainPersonNumMat", // name
                    cvAttrList()); // attributes
            pTrainPersonNumMat = new CvMat(pointer);

            pointer = cvReadByName(
                    fileStorage, // fs
                    null, // map
                    "eigenValMat", // nmae
                    cvAttrList()); // attributes
            eigenValMat = new CvMat(pointer);

            pointer = cvReadByName(
                    fileStorage, // fs
                    null, // map
                    "projectedTrainFaceMat", // name
                    cvAttrList()); // attributes
            projectedTrainFaceMat = new CvMat(pointer);

            pointer = cvReadByName(
                    fileStorage,
                    null, // map
                    "avgTrainImg",
                    cvAttrList()); // attributes
            pAvgTrainImg = new IplImage(pointer);

            eigenVectArr = new IplImage[nTrainFaces];
            for (i = 0; i < nEigens; i++) {
              String varname = "eigenVect_" + i;
              pointer = cvReadByName(
                      fileStorage,
                      null, // map
                      varname,
                      cvAttrList()); // attributes
              eigenVectArr[i] = new IplImage(pointer);
            }

            // release the file-storage interface
            cvReleaseFileStorage(fileStorage);

            LOGGER.info("Training data loaded (" + nTrainFaces + " training images of " + nPersons + " people)");
            final StringBuilder stringBuilder = new StringBuilder();
            stringBuilder.append("People: ");
            if (nPersons > 0) {
              stringBuilder.append("<").append(personNames.get(0)).append(">");
            }
            for (i = 1; i < nPersons; i++) {
              stringBuilder.append(", <").append(personNames.get(i)).append(">");
            }
            LOGGER.info(stringBuilder.toString());

            return pTrainPersonNumMat;
          }

          /** Saves all the eigenvectors as images, so that they can be checked. */
          private void storeEigenfaceImages() {
            // Store the average image to a file
            LOGGER.info("Saving the image of the average face as 'data/out_averageImage.bmp'");
            cvSaveImage("data/out_averageImage.bmp", pAvgTrainImg);

            // Create a large image made of many eigenface images.
            // Must also convert each eigenface image to a normal 8-bit UCHAR image instead of a 32-bit float image.
            LOGGER.info("Saving the " + nEigens + " eigenvector images as 'data/out_eigenfaces.bmp'");

            if (nEigens > 0) {
              // Put all the eigenfaces next to each other.
              int COLUMNS = 8;        // Put upto 8 images on a row.
              int nCols = Math.min(nEigens, COLUMNS);
              int nRows = 1 + (nEigens / COLUMNS);        // Put the rest on new rows.
              int w = eigenVectArr[0].width();
              int h = eigenVectArr[0].height();
              CvSize size = cvSize(nCols * w, nRows * h);
              final IplImage bigImg = cvCreateImage(
                      size,
                      IPL_DEPTH_8U, // depth, 8-bit Greyscale UCHAR image
                      1);        // channels
              for (int i = 0; i < nEigens; i++) {
                // Get the eigenface image.
                IplImage byteImg = convertFloatImageToUcharImage(eigenVectArr[i]);
                // Paste it into the correct position.
                int x = w * (i % COLUMNS);
                int y = h * (i / COLUMNS);
                CvRect ROI = cvRect(x, y, w, h);
                cvSetImageROI(
                        bigImg, // image
                        ROI); // rect
                cvCopy(
                        byteImg, // src
                        bigImg, // dst
                        null); // mask
                cvResetImageROI(bigImg);
                cvReleaseImage(byteImg);
              }
              cvSaveImage(
                      "data/out_eigenfaces.bmp", // filename
                      bigImg); // image
              cvReleaseImage(bigImg);
            }
          }

          /** Converts the given float image to an unsigned character image.
           *
           * @param srcImg the given float image
           * @return the unsigned character image
           */
          private IplImage convertFloatImageToUcharImage(IplImage srcImg) {
            IplImage dstImg;
            if ((srcImg != null) && (srcImg.width() > 0 && srcImg.height() > 0)) {
              // Spread the 32bit floating point pixels to fit within 8bit pixel range.
              CvPoint minloc = new CvPoint();
              CvPoint maxloc = new CvPoint();
              double[] minVal = new double[1];
              double[] maxVal = new double[1];
              cvMinMaxLoc(srcImg, minVal, maxVal, minloc, maxloc, null);
              // Deal with NaN and extreme values, since the DFT seems to give some NaN results.
              if (minVal[0] < -1e30) {
                minVal[0] = -1e30;
              }
              if (maxVal[0] > 1e30) {
                maxVal[0] = 1e30;
              }
              if (maxVal[0] - minVal[0] == 0.0f) {
                maxVal[0] = minVal[0] + 0.001;  // remove potential divide by zero errors.
              }                        // Convert the format
              dstImg = cvCreateImage(cvSize(srcImg.width(), srcImg.height()), 8, 1);
              cvConvertScale(srcImg, dstImg, 255.0 / (maxVal[0] - minVal[0]), -minVal[0] * 255.0 / (maxVal[0] - minVal[0]));
              return dstImg;
            }
            return null;
          }

          /** Find the most likely person based on a detection. Returns the index, and stores the confidence value into pConfidence.
           *
           * @param projectedTestFace the projected test face
           * @param pConfidencePointer a pointer containing the confidence value
           * @param iTestFace the test face index
           * @return the index
           */
          private int findNearestNeighbor(float projectedTestFace[], FloatPointer pConfidencePointer) {
            double leastDistSq = Double.MAX_VALUE;
            int i = 0;
            int iTrain = 0;
            int iNearest = 0;

            LOGGER.info("................");
            LOGGER.info("find nearest neighbor from " + nTrainFaces + " training faces");
            for (iTrain = 0; iTrain < nTrainFaces; iTrain++) {
              //LOGGER.info("considering training face " + (iTrain + 1));
              double distSq = 0;

              for (i = 0; i < nEigens; i++) {
                //LOGGER.debug("  projected test face distance from eigenface " + (i + 1) + " is " + projectedTestFace[i]);

                float projectedTrainFaceDistance = (float) projectedTrainFaceMat.get(iTrain, i);
                float d_i = projectedTestFace[i] - projectedTrainFaceDistance;
                distSq += d_i * d_i; // / eigenValMat.data_fl().get(i);  // Mahalanobis distance (might give better results than Eucalidean distance)
        //          if (iTrain < 5) {
        //            LOGGER.info("    ** projected training face " + (iTrain + 1) + " distance from eigenface " + (i + 1) + " is " + projectedTrainFaceDistance);
        //            LOGGER.info("    distance between them " + d_i);
        //            LOGGER.info("    distance squared " + distSq);
        //          }
              }

              if (distSq < leastDistSq) {
                leastDistSq = distSq;
                iNearest = iTrain;
                LOGGER.info("  training face " + (iTrain + 1) + " is the new best match, least squared distance: " + leastDistSq);
              }
            }

            // Return the confidence level based on the Euclidean distance,
            // so that similar images should give a confidence between 0.5 to 1.0,
            // and very different images should give a confidence between 0.0 to 0.5.
            float pConfidence = (float) (1.0f - Math.sqrt(leastDistSq / (float) (nTrainFaces * nEigens)) / 255.0f);
            pConfidencePointer.put(pConfidence);

            LOGGER.info("training face " + (iNearest + 1) + " is the final best match, confidence " + pConfidence);
            return iNearest;
          }

          /** Returns a string representation of the given float array.
           *
           * @param floatArray the given float array
           * @return a string representation of the given float array
           */
          private String floatArrayToString(final float[] floatArray) {
            final StringBuilder stringBuilder = new StringBuilder();
            boolean isFirst = true;
            stringBuilder.append('[');
            for (int i = 0; i < floatArray.length; i++) {
              if (isFirst) {
                isFirst = false;
              } else {
                stringBuilder.append(", ");
              }
              stringBuilder.append(floatArray[i]);
            }
            stringBuilder.append(']');

            return stringBuilder.toString();
          }

          /** Returns a string representation of the given float pointer.
           *
           * @param floatPointer the given float pointer
           * @return a string representation of the given float pointer
           */
          private String floatPointerToString(final FloatPointer floatPointer) {
            final StringBuilder stringBuilder = new StringBuilder();
            boolean isFirst = true;
            stringBuilder.append('[');
            for (int i = 0; i < floatPointer.capacity(); i++) {
              if (isFirst) {
                isFirst = false;
              } else {
                stringBuilder.append(", ");
              }
              stringBuilder.append(floatPointer.get(i));
            }
            stringBuilder.append(']');

            return stringBuilder.toString();
          }

          /** Returns a string representation of the given one-channel CvMat object.
           *
           * @param cvMat the given CvMat object
           * @return a string representation of the given CvMat object
           */
          public String oneChannelCvMatToString(final CvMat cvMat) {
            //Preconditions
            if (cvMat.channels() != 1) {
              throw new RuntimeException("illegal argument - CvMat must have one channel");
            }

            final int type = cvMat.type();
            StringBuilder s = new StringBuilder("[ ");
            for (int i = 0; i < cvMat.rows(); i++) {
              for (int j = 0; j < cvMat.cols(); j++) {
                if (type == CV_32FC1 || type == CV_32SC1) {
                  s.append(cvMat.get(i, j));
                } else {
                  throw new RuntimeException("illegal argument - CvMat must have one channel and type of float or signed integer");
                }
                if (j < cvMat.cols() - 1) {
                  s.append(", ");
                }
              }
              if (i < cvMat.rows() - 1) {
                s.append("\n  ");
              }
            }
            s.append(" ]");
            return s.toString();
          }

          /** Executes this application.
           *
           * @param args the command line arguments
           */

          public static void main(final String[] args) {
              BasicConfigurator.configure();
            // PropertyConfigurator.configure(args[0]);
            // if(args[0]!=null)
             /*{
                System.out.println("null index");
             }
             else continue;
             */
             final FaceRecognition faceRecognition = new FaceRecognition();
         //   main myMain = new main();
           // myMain.FaceRecognition();

            //faceRecognition.learn("data/some-training-faces.txt");
          //  faceRecognition.learn("G:\\android_support\\javacv-examples\\OpenCV2_Cookbook\\data\\all10.txt");
            faceRecognition.learn("data/all100.txt");
            //faceRecognition.recognizeFileList("data/some-test-faces.txt");
           // faceRecognition.recognizeFileList("G:\\android_support\\javacv-examples\\OpenCV2_Cookbook\\data\\lower3.txt");
            faceRecognition.recognizeFileList("data/lower3.txt");
          }
        } 
```

**错误**

```
Exception in thread "main" java.lang.RuntimeException: Stub!
    at android.util.Log.i(Log.java:9)
    at FaceRecognition.learn(FaceRecognition.java:126)
    at FaceRecognition.main(FaceRecognition.java:846) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T08:48:39.653

看来您尝试在主机上测试 android 类。也许使用 JUnit。**那是行不通的**。有两个选项打开：

1.  如果可能，将功能移到库中，以便不 `android`使用任何包。例如使用`java.util.logging`而不是`android.util.Log`.
2.  使用 android 仪器测试（谷歌它）。

如果您使用 Maven：请记住 android 库是`<scope>provided</scope>`.

# ruby-on-rails - Heroku 没有反映对 Redmine 代码所做的更改

> ID：16032174
> 
> 赞同：0
> 
> 时间：2013-04-16T08:27:10.117
> 
> 标签：ruby-on-rails, heroku, redmine

我遇到了一个奇怪且有些令人困惑的问题。

我正在尝试在 Heroku 上安装 Redmine。我按照说明进行操作，可以说这并不是一帆风顺。

我现在正在尝试执行 db:migrate 过程。（我必须编辑 application.rb 中的所有内容才能做到这一点，但还不知道这会导致什么。）

但是，在进行迁移时，我收到了消息

```
Plugins in vendor/plugins (/app/vendor/plugins) are no longer allowed. Please, put your Redmine plugins in the `plugins` directory at the root of your Redmine directory (/app/plugins) 
```

通过 StackOverflow 和其他一些站点，我找到了生成此消息的位置（environment.rb）并删除了生成它的代码。

但是，当我推送到 Heroku 并再次尝试迁移时，再次出现相同的消息。

我尝试将 Heroku repo/app 克隆到测试目录，当我检查 environment.rb 文件时，代码不存在，但是如果我尝试迁移（或任何 rake 任务），消息仍然会出现。即使来自测试目录。

我在代码的其他部分查找了相同的消息，但还没有找到。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:39:04.917

这里有两件事之一

*   您没有解决代码中的问题 - 在生产模式下本地运行它会显示这一点

或者

*   您没有正确地将代码推送到 Heroku。你是在 master 分支上开发吗？您是否在功能分支中进行开发？如果是这样，您是否将该分支推入 Heroku 上的 master ？( `git push heroku feature_branch:master`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T01:25:04.557

好吧，我知道发生了什么。一个良好的睡眠可以完成的事情真是太神奇了！

事实证明，我之前提到的 application.rb 文件中的垃圾基本上是附加到 app.rb 的 config 目录中的其他文件。其中包括 yml 文件以及 environment.rb 和 routes.rb 等其他文件。在这些废话中是我从 environment.rb 中删除的插件恐慌代码

（在一些更改告诉我应用程序已经初始化之后，它终于在运行 rake 时曝光了！）

所以我从 application.rb 和 viola 中删除了所有这些附加的废话！在职的。

我不知道为什么要这样做，因为没有它 redmine 工作正常（到目前为止）。

# java - 无法在尚未调用 Looper.prepare() Android 的线程内创建处理程序。在计时器中循环

> ID：16032180
> 
> 赞同：0
> 
> 时间：2013-04-16T08:27:24.740
> 
> 标签：java, android, time

我试图通过在服务中创建一个线程来从我的 php 服务器接收消息，但它不起作用。无法进入 while 循环和标题显示的错误消息。请帮忙。

```
 //Set the schedule function and rate
            Timer t = new Timer();
            t.scheduleAtFixedRate(new TimerTask() {

                    @Override
                    public void run() {
                        runOnUiThread(new Runnable() {

                            @Override
                            public void run() {

                        // TODO Auto-generated method stub

                            }

                        });
                    }

                    private void runOnUiThread(Runnable runnable) {
                        // TODO Auto-generated method stub
                        String flag = receivermessage();
                        while (flag.equals("N")){
                            notifyUser();
                        }
                        Log.d(TAG, "Download Successful");
                    }

            }, 0, 10000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:39:40.570

最好使用 asynctask 并在 asynctask doinbackground() mtd 中接收 msg。因为 web 服务调用可能需要更多时间，你不能在 android 中阻塞主线程超过 5 秒。

# c# - Windows 商店应用程序：我使用全局变量和扩展启动画面是否正确？

> ID：16032185
> 
> 赞同：0
> 
> 时间：2013-04-16T08:27:40.747
> 
> 标签：c#, windows-8, microsoft-metro, windows-store-apps, winrt-xaml

我创建了一个包含许多 web 服务调用的应用程序，为了使流程更好，并可能通过 windows 商店关于启动时间的要求，我决定使用扩展启动屏幕来加载所有主要数据，然后跨不同共享这些数据使用我在 App.xaml.cs 中定义的全局变量的页面。

我的问题是：以这种方式使用全局变量是否正确，当应用程序暂停/恢复时是否存在丢失这些数据的风险？，因为我只是从扩展的初始屏幕初始化这些数据。

下面是我的代码

**这是 app.xaml.cs 页面中的一些代码：**在这里我定义全局变量，在我进入扩展启动屏幕之前从我的 web 服务加载应用程序的背景图像

```
 sealed partial class App : Application
        {

            **public string[] NavigateData { get; set; }
            public NavigationCacheMode NavigationCacheMode { get; set; }**

            public App()
            {
                this.InitializeComponent();
                this.Suspending += OnSuspending;

                //Cache the page     
                this.NavigationCacheMode = Windows.UI.Xaml.Navigation.NavigationCacheMode.Enabled;
            }

            protected async override void OnLaunched(LaunchActivatedEventArgs args)
            {
                Frame rootFrame = Window.Current.Content as Frame;
               //---------------------------------Live tile
                var uris = new List<Uri> 
                { 
                    new Uri("http://XXX.XX.XX.XXX/WebApi/WebService.asmx/GetFirstTile"),

                    new Uri("http://XXX.XX.XX.XXX/WebApi/WebService.asmx/GetSecondTile"),
                    new Uri("http://XXX.XX.XX.XXX/WebApi/WebService.asmx/GetStatisticTile"),
                    new Uri("http://XXX.XX.XX.XXX/WebApi/WebService.asmx/GetNewsTile1"),
                    new Uri("http://XXX.XX.XX.XXX/WebApi/WebService.asmx/GetNewsTile2"),

                };

                TileUpdater LiveTileUpdater = TileUpdateManager.CreateTileUpdaterForApplication();         
                LiveTileUpdater.EnableNotificationQueue(true);  // Enable notifications
                LiveTileUpdater.Clear();  // Clear the current set of updates
                LiveTileUpdater.StartPeriodicUpdateBatch(uris, PeriodicUpdateRecurrence.HalfHour);
                //------------------------------Live tile section end

                // Do not repeat app initialization when the Window already has content,
                // just ensure that the window is active
                if (rootFrame == null)
                {
                    // Create a Frame to act as the navigation context and navigate to the first page
                    rootFrame = new Frame();
                    weather.Common.SuspensionManager.RegisterFrame(rootFrame, "appFrame");

       //When the app is loaded first time it calls the web service to get wich background picture to use
             //--------------------------Getting and setting background image for all the pages--------------------
                    string appBackgGround;
       ServiceReference.WebServiceSoapClient webServiceObj = new ServiceReference.WebServiceSoapClient();
                    // Get the name of the Background picture
       appBackgGround = await webServiceObj.GetBackgroundImageAsync();

                    // Her we set the application background Image for all pages  "backgroundImageBlueSky.jpg"
                    rootFrame.Background = new ImageBrush
                    {
                        Stretch = Windows.UI.Xaml.Media.Stretch.UniformToFill,
                        ImageSource = new BitmapImage { UriSource = new Uri("ms-appx:///Assets/"+appBackgGround) }

                    };
      //--------------------------Bacground image end--------------------

                    if (args.PreviousExecutionState == ApplicationExecutionState.Terminated)
                    {
                        //TODO: Load state from previously suspended application
                        await weather.Common.SuspensionManager.RestoreAsync();
                    }

                    // Place the frame in the current Window
                    Window.Current.Content = rootFrame;
                }

                if (rootFrame.Content == null)
                {
                    // When the navigation stack isn't restored navigate to the first page,
                    // configuring the new page by passing required information as a navigation
                    // parameter
                    //Go to the extended splash screen
                    if (!rootFrame.Navigate(typeof(ExtendedSplashScreen), rootFrame.GetNavigationState()))
                    {
                        throw new Exception("Failed to create initial page");
                    }

                }
                // Ensure the current window is active
                //create the about page
                var _Helper = new Flyouts.SettingsHelper();
                _Helper.AddCommand<Flyouts.About>("About");
                Window.Current.Activate();
            }

            private async void OnSuspending(object sender, SuspendingEventArgs e)
            {
                var deferral = e.SuspendingOperation.GetDeferral();
                //TODO: Save application state and stop any background activity
                await weather.Common.SuspensionManager.SaveAsync();
                deferral.Complete();
            }

        }
    } 
```

**ExtendedSplashScreen：**在这里，我在转到主页之前从 web 服务加载应用程序的一些初始化数据。数据保存到 App.xaml.cs 中定义的全局变量。在加载此数据时，会显示一个进度环。加载数据后，我转到主页

```
public sealed partial class ExtendedSplashScreen : Page
{

    parameterItem max1DayAgo = new parameterItem();
    parameterItem min1DayAgo = new parameterItem();

    public ExtendedSplashScreen()
    {
        this.InitializeComponent();
    }

    protected override async void OnNavigatedTo(NavigationEventArgs e)
    {

        string[] periodSelector     = { "1DayAgo", "1WeekAgo", "1MonthAgo" };
        string[] modeSelector       = { "max", "min" };
        string[] parameterSelector  = { "umtTemp1", "umtWindSpeed", "umtAdjBaromPress", "umtRainRate" };

        //---------------GETTING WEBSERVICE DATA FOR STARTUP-------------
        //Create a webservice object
        ServiceReference.WebServiceSoapClient webServiceObj = new ServiceReference.WebServiceSoapClient();       
        var getMax1DayAgoObj = await webServiceObj.GetSelectedMaxMinDataAsync(parameterSelector, periodSelector[0], modeSelector[0]);

        //create an object that holds min data for yesterday

        var getMin1DayAgoObj = await webServiceObj.GetSelectedMaxMinDataAsync(parameterSelector, periodSelector[0], modeSelector[1]);
        //Save arrayOfValue and arrayOfUnit to a parameterItem object. these objects are created during startup
        // and the can be accessed and updated by all methods in this page later we will see that maxMinButton_Click method
        //for the maxMinButton will use these data
        max1DayAgo.arrayOfValue = getMax1DayAgoObj.arrayOfValue;
        max1DayAgo.arrayOfUnit = getMax1DayAgoObj.arrayOfUnit;

        min1DayAgo.arrayOfValue = getMin1DayAgoObj.arrayOfValue;
        min1DayAgo.arrayOfUnit = getMin1DayAgoObj.arrayOfUnit;

        string[] startupData = new string[13];

        startupData[0] = " " + max1DayAgo.arrayOfValue[0] + " " + max1DayAgo.arrayOfUnit[0]; //    maxTemp 
        startupData[1] = " " + max1DayAgo.arrayOfValue[1] + " " + max1DayAgo.arrayOfUnit[1]; //    maxWindSped 
        startupData[2] = " " + max1DayAgo.arrayOfValue[2] + " " + max1DayAgo.arrayOfUnit[2]; //    maxAirPressure 
        startupData[3] = " " + max1DayAgo.arrayOfValue[3] + " " + max1DayAgo.arrayOfUnit[3];//     maxRainfall

        startupData[4] = " " + min1DayAgo.arrayOfValue[0] + " " + min1DayAgo.arrayOfUnit[0]; //    minTemp 
        startupData[5] = " " + min1DayAgo.arrayOfValue[1] + " " + min1DayAgo.arrayOfUnit[1];//     minWindSped 
        startupData[6] = " " + min1DayAgo.arrayOfValue[2] + " " + min1DayAgo.arrayOfUnit[2];//     minAirPressure  
        startupData[7] = " " + min1DayAgo.arrayOfValue[3] + " " + min1DayAgo.arrayOfUnit[3];//     minRainfall
        // Main fields

        var getLatestTempObj        = await webServiceObj.GetLatestDataAsync("umtTemp1");
        var getLatestWindObj        = await webServiceObj.GetLatestDataAsync("umtWindSpeed");
        var getLatestwindDirObj     = await webServiceObj.GetLatestDataAsync("umtAdjWinDir");
        var getLatestairPressureObj = await webServiceObj.GetLatestDataAsync("umtAdjBaromPress");

        startupData[8] = " " + getLatestTempObj.Value + " " + getLatestTempObj.Unit;//temperatureMainTxtBlock.Text
        startupData[9] = " " + getLatestWindObj.Value + " " + getLatestWindObj.Unit;//temperatureMainTxtBlock.Text
        startupData[10] = "" + getLatestwindDirObj.Value; //temperatureMainTxtBlock.Text
        startupData[11] = " " + getLatestairPressureObj.Value + " " + getLatestairPressureObj.Unit;//temperatureMainTxtBlock.Text
        startupData[12] = "Last update: " + getLatestwindDirObj.Timestamp;//temperatureMainTxtBlock.Text
        **//pass the webservice data to the global variable
        (App.Current as App).NavigateData = startupData;**

        //since im using extendes splash screen i reset the navigation history so the user cannot go back to the extended splash screen      
        this.Frame.SetNavigationState(e.Parameter as string);
        //Go to mainpage
        this.Frame.Navigate(typeof(MainPage));
    }
} 
```

**MainPage：**在 Mainpage 中，我在文本框中显示由扩展启动屏幕加载的全局数据。

```
public sealed partial class MainPage : weather.Common.LayoutAwarePage
    {
        //Defining objects use through this page
        maxMinSelector maxMinButtonSelector = new maxMinSelector();

        parameterItem max1DayAgo = new parameterItem();
        parameterItem min1DayAgo = new parameterItem();

        parameterItem max1WeekAgo = new parameterItem();
        parameterItem min1WeekAgo = new parameterItem();

        parameterItem max1MonthAgo = new parameterItem();
        parameterItem min1MonthAgo = new parameterItem();

        EasingDoubleKeyFrame keyFrame = new EasingDoubleKeyFrame();

        public MainPage()
        {
            this.InitializeComponent();
            Loaded += MainPage_Loaded;

             Code
         ------------------
         ------------------
         ------------------
         ------------------
            //Cache the page     
            this.NavigationCacheMode = Windows.UI.Xaml.Navigation.NavigationCacheMode.Enabled;
        }

        void MainPage_Loaded(object sender, RoutedEventArgs e)
        {
             Code
            ------------------
         ------------------
         ------------------
         ------------------
        }

        protected override void OnNavigatedTo(NavigationEventArgs e)
        {

            // HERE i use the global data initialised in the extended splash screen
            base.OnNavigatedTo(e);
            maxTempTextblock.Text = (App.Current as App).NavigateData[0];
            maxWindSpedTextBlock.Text = (App.Current as App).NavigateData[1];
            maxAirPressureTextBlock.Text = (App.Current as App).NavigateData[2];
            maxRainfallTextBlock.Text = (App.Current as App).NavigateData[3];

            minTempTextblock.Text = (App.Current as App).NavigateData[4];
            minWindSpedTextBlock.Text = (App.Current as App).NavigateData[5];
            minAirPressureTextBlock.Text = (App.Current as App).NavigateData[6];
            minRainfallTextBlock.Text = (App.Current as App).NavigateData[7];

            temperatureMainTxtBlock.Text = (App.Current as App).NavigateData[8];
            WindSpeedTxtBlockLower.Text = (App.Current as App).NavigateData[9];
            WindDirectionTxtBlockLower.Text = (App.Current as App).NavigateData[10];
            airPressureTxtBlockLower.Text = (App.Current as App).NavigateData[11];
            LastUpdateTextField.Text = (App.Current as App).NavigateData[12];

        }

        Code
          ------------------
         ------------------
         ------------------
          ------------------
         ------------------
         ------------------
         ------------------

          ------------------
         ------------------
         ------------------
         ------------------

         ------------------

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T03:53:42.777

这并不是您确切问题的真正答案，但 Build 2012 中有一个很棒的视频，关于启动响应能力和 XAML 性能，可能会触及您所要求的内容。他确实谈到了如何处理有很多启动琐事的应用程序。

[http://channel9.msdn.com/Events/Build/2012/4-103](http://channel9.msdn.com/Events/Build/2012/4-103)

# php - 从php数组中检索值

> ID：16032187
> 
> 赞同：1
> 
> 时间：2013-04-16T08:27:44.097
> 
> 标签：php, arrays

因此，我`$_POST`在进行一些`unset()`修改后生成了以下数组：

```
Array ( [actual-1] => 2 [target-1] => 4 [act-1] => dzdz [quarter-1] => 3 [year-1] => 2016 [actual-2] => 1 [target-2] => 3 [act-2] => zz [quarter-2] => 2 [year-2] => 2016 [actual-53] => 3 [target-53] => 2 [act-53] => zzd [quarter-53] => 1 [year-53] => 2015 [actual-58] => 5 [target-58] => 1 [act-58] => eec [quarter-58] => 2 [year-58] => 2013 ) 
```

我运行以下代码来提取值并以以下形式显示它们：

```
ID -- Level -- Action -- Target -- Action Quarter: -- Action year -- 
```

编码：

```
foreach(array_chunk($array,2,true) as $val) {
  foreach($val as $k=>$v) {
    if (strpos($k, "actual") !== false) {
      $temp    = explode("-",$k);
      $id      = $temp[1];
      $actual  = $v;
    }
    if (strpos($k, "act") !== false) {
      $action = $v;
    }
    if (strpos($k,"target") !== false) {
      $target= $v;
    }
    if (strpos($k, "quarter") !== false) {
      $action_quarter = $v;
    }
    if(strpos($k, "year") !== false){
      $action_year = $v;
    }           
  }
  echo "ID ".$id." Level ".$actual." action ".$action." Target: ".$target. " Action Quarter: ". $action_quarter. " Action year : ".$action_year;
  echo "<br><--->";
} 
```

但我得到的是`output messing up the values`：

```
Notice: Undefined variable: action_quarter in C:\www\index\DevIT\classes\hr_competences.php on line 475

Notice: Undefined variable: action_year in C:\www\index\DevIT\classes\hr_competences.php on line 475
ID 1 Level 2 action 2 Target: 4 Action Quarter: Action year :
<--->
Notice: Undefined variable: action_year in C:\www\index\DevIT\classes\hr_competences.php on line 475
ID 1 Level 2 action dzdz Target: 4 Action Quarter: 3 Action year :
<--->ID 2 Level 1 action 1 Target: 4 Action Quarter: 3 Action year : 2016
<--->ID 2 Level 1 action zz Target: 3 Action Quarter: 3 Action year : 2016
<--->ID 2 Level 1 action zz Target: 3 Action Quarter: 2 Action year : 2016
<--->ID 53 Level 3 action 3 Target: 2 Action Quarter: 2 Action year : 2016
<--->ID 53 Level 3 action zzd Target: 2 Action Quarter: 1 Action year : 2016
<--->ID 58 Level 5 action 5 Target: 2 Action Quarter: 1 Action year : 2015
<--->ID 58 Level 5 action eec Target: 1 Action Quarter: 1 Action year : 2015
<--->ID 58 Level 5 action eec Target: 1 Action Quarter: 2 Action year : 2013 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:39:45.253

只需在顶部声明所有变量即可消除此错误。IE

```
<?php
$id = null;
$actual = null;
$action = null;
$target = null;
$action_quarter = null;
$action_year = null;
// Your code 
```

原因是有时您声明`$action_quarter`and `$action_year`，但并不总是因为您的 if 语句。

我也相信你`array_chunk($array,2,true)`应该阅读`array_chunk($array,5,true)`。

这是您的代码的工作副本：

```
<?php
$id = null;
$actual = null;
$action = null;
$target = null;
$action_quarter = null;
$action_year = null;
$array = array('actual-1' => 2, 'target-1' => 4, 'act-1' => 'dzdz', 'quarter-1' => 3, 'year-1' => 2016, 'actual-2' => 2, 'target-2' => 4, 'act-2' => 'dzdz', 'quarter-2' => 3, 'year-2' => 2016);

foreach(array_chunk($array, 5, true) as $val) {
  foreach($val as $k=>$v) {
    if (strpos($k, "actual") !== false) {
      $temp    = explode("-",$k);
      $id      = $temp[1];
      $actual  = $v;
    }
    if (strpos($k, "act") !== false) {
      $action = $v;
    }
    if (strpos($k,"target") !== false) {
      $target= $v;
    }
    if (strpos($k, "quarter") !== false) {
      $action_quarter = $v;
    }
    if(strpos($k, "year") !== false){
      $action_year = $v;
    }           
  }
  echo "ID ".$id." Level ".$actual." action ".$action." Target: ".$target. " Action Quarter: ". $action_quarter. " Action year : ".$action_year."<br />";
}
?> 
```

**注意**我已经缩短了你的数组，只是因为我懒得全部输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T08:43:20.173

不用这么复杂的代码，试试下面的：

```
$array = array( 'actual-1' => 2, 'target-1' => 4, 'act-1' => 'dzdz', 'quarter-1' => 3, 'year-1' => 2016, 'actual-2' => 1, 'target-2' => 3, 'act-2' => 'zz', 'quarter-2' => 2, 'year-2' => 2016, 'actual-53' => 3, 'target-53' => 2, 'act-53' => 'zzd', 'quarter-53' => 1, 'year-53' => 2015, 'actual-58' => 5, 'target-58' => 1, 'act-58' => 'eec', 'quarter-58' => 2, 'year-58' => 2013 );

$new_array = array();
foreach($array as $k => $v){
    list($name, $n) = explode('-', $k);
    $new_array[$n][$name] = $v;
}

echo '<pre>';print_r($new_array);echo '</pre>'; // print the new Array

// Print a nice table ?
$table = '<table border="1"><tr><td>ID</td><td>Level</td><td>Action</td><td>Target</td><td>Action Quarter</td><td>Action Year</td></tr>';
foreach($new_array as $k => $v){
    $table .= '<tr><td>'.$k.'</td><td>'.implode('</td><td>', $v).'</td></tr>';
}
$table .= '</table>';

echo $table; // print the table 
```

[在线演示](http://codepad.viper-7.com/h15XCo)。

* * *

生成查询：

```
$_SESSION['KayttajaId'] = 545;$employee = 'wut'; // for testing purposes

$query = 'INSERT INTO actual_levels(manager_id,employee_id,comp_id,actual_level,actiontext,time,theyea‌​r,target,year,quarter) VALUES ';

$c = count($new_array);$i=1;
foreach($new_array as $k => $v){
    // Maybe you want to change the manager ID & employee after each iteration ?
    $query .= '("'.$_SESSION['KayttajaId'].'","'.$employee.'","'.$k.'","'.$v['actual'].'","'.$v['target'].'",GetDate(), "2012","'.$v['act'].'","'.$v['year'].'","'.$v['quarter'].'")';
    if($i >= $c){break;}
    $i++;
    $query .= ', ';
}

echo $query; 
```

询问：

```
INSERT INTO actual_levels(manager_id,employee_id,comp_id,actual_level,actiontext,time,theyea‌​r,target,year,quarter) VALUES 
("545","wut","1","2","4",GetDate(), "2012","dzdz","2016","3"), 
("545","wut","2","1","3",GetDate(), "2012","zz","2016","2"), 
("545","wut","53","3","2",GetDate(), "2012","zzd","2015","1"), 
("545","wut","58","5","1",GetDate(), "2012","eec","2013","2") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:48:12.277

@Graham 解决方案是正确的，

但是一个丑陋的解决方法就是更改[error_reporting 级别](http://php.net/manual/bg/errorfunc.configuration.php)并隐藏警告/通知消息。

```
error_reporting(E_ERROR); // display only errors a.k.a crash
//error_reporting(E_WARNING); display only errors, warning
//error_reporting(E_ALL); // display only errors, warning, notice, deprecated .. etc

ini_set('display_errors', '1'); 
```

将上面的代码放在您的 php 代码或`index.php`.

正如我所说，“隐藏”警告不是一个好习惯，但如果您正在调试遗留项目或由于任何原因无法修复所有警告......它可能很有用:)

# php - 错误获取数组

> ID：16032191
> 
> 赞同：0
> 
> 时间：2013-04-16T08:28:05.947
> 
> 标签：php, html, mysql, fetch

我尝试使用 mysql_fetch_array 和这段代码来获取我的所有数据

```
while($row = mysql_fetch_array($sql)){
    if($row_counter % 2){
        $row_color="bgcolor='#FFFFFF'";
    }else{
        $row_color="bgcolor='#F3F6F8'";
    }
    echo "<tr class=\"TrColor\" ".$row_color.">";
    echo "<td>" . $row['wipo_applicant1_city'] . "</td>\n";
    echo "<td>" . $row['applicant1_addr1'] . "</td>\n";
    echo "<td>" . $row['wipo_applicant1_state'] . "</td>\n"; 
    echo "<td>$" . $row['invention-title'] . "</td>\n";  
    echo "</tr>";
    $row_counter++;
} 
```

但我有一个错误

```
syntax error, unexpected T_WHILE, expecting ',' or ';' 
```

在这一行

```
while($row = mysql_fetch_array($sql)){ 
```

有人知道那条线有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:30:45.310

听起来你错过了一个`;`or`,`在那个之前的线上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T08:30:54.943

循环之前的行末尾`while`没有分号`;`

```
echo 'Whatever' //<--- You must be missing a semi-colon here
while($row = mysql_fetch_array($sql)){ //<----- So not exactly this line, but the line before 
```

# vb.net - 如何在 Visual Basic 应用程序中打开“Windows 搜索”？

> ID：16032193
> 
> 赞同：4
> 
> 时间：2013-04-16T08:28:10.857
> 
> 标签：vb.net, vba, vb6, windows-search

如何使用 Visual Basic 打开应用程序中特定文件夹的“Windows Search Companion”或“Windows Basic Search”？

![在此处输入图像描述](https://i.stack.imgur.com/k8CeB.jpg)

我找到[了这篇文章](http://www.ehow.com/facts_6876557_can-always-search-specified-folder_.html)，但这不是我要找的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T08:49:52.233

像这样？

**VBA/VB6 代码**

```
Option Explicit

'~~> API declaration for the windows "Search Results" dialog
Private Declare Function ShellSearch& Lib "shell32.dll" _
Alias "ShellExecuteA" (ByVal hwnd As Long, ByVal lpOperation As String, _
ByVal lpFile As String, ByVal lpParameters As String, ByVal lpDirectory As String, _
ByVal nShowCmd As Long)

Private Const SW_SHOWNORMAL = 1

Const drv As String = "C:\"

Sub Sample()
    ShellSearch 0, "Find", drv, "", "", SW_SHOWNORMAL
End Sub 
```

在 VBA 中测试

**在 Win XP 中**

![在此处输入图像描述](https://i.stack.imgur.com/7eYNY.png)

**在赢 7**

![在此处输入图像描述](https://i.stack.imgur.com/1Webn.png)

**VB.NET（在 Visual Studio Ultimate 64 位上测试）**

```
'~~> API declaration for the windows "Search Results" dialog
Private Declare Function ShellSearch Lib "shell32.dll" _
Alias "ShellExecuteA" (ByVal hwnd As Integer, ByVal lpOperation As String, _
ByVal lpFile As String, ByVal lpParameters As String, ByVal lpDirectory As String, _
ByVal nShowCmd As Integer) As Integer

Private Const SW_SHOWNORMAL = 1

Const drv As String = "C:\"

Private Sub Button1_Click(ByVal sender As System.Object,
ByVal e As System.EventArgs) Handles Button1.Click
    ShellSearch(0, "Find", drv, "", "", SW_SHOWNORMAL)
End Sub 
```

# postgresql - PostgreSQL 中 pgScript 的目的是什么？

> ID：16032198
> 
> 赞同：13
> 
> 时间：2013-04-16T08:28:38.723
> 
> 标签：postgresql, pgadmin

我无法理解对 pgScript 的需求，它可以使用 pgAdmin 工具执行。什么时候应该使用？plpgSQL 不能做什么？Microsoft SQL Server 中的等效项是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-16T07:35:36.450

pgScript 是一种客户端脚本语言，而 pl/PgSQL 在服务器上运行。这意味着它们有完全不同的用例。例如，PgScript 可以管理事务状态，而 pl/PgSQL 不能，但是 pl/Pgsql 可以用来扩展 SQL 的语言，而 pgScript 不能。

此外，这意味着两者将处理许多其他完全不同的事情，从查询计划到动态 SQL，而 pgScript 需要查询之间的往返，而 pl/Pgsql 不需要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-03T19:34:16.340

pgScript 的一种用途是定义变量并稍后在 SQL 中使用它们。

例如，您可以执行以下操作：

```
declare @mytbl, @maxid; 
set @mytbl = 'sometable'; 
set @maxid = 2500; 
set @res = select count(*) from @mytbl where id <= @maxid;
print @res; 
```

这种方法是在脚本顶部只包含您想要更改的任何变量，而不是那些深埋在复杂 SQL 查询中的变量。

当然，pgScript 是仅在 PgAdmin III 客户端中可用的功能，例如他的评论中提到的@{Craig Ringer}。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-20T03:18:27.190

我使用了 Toad Data Modeler 的 DDL 脚本生成器。

我在 PgAdmin-III 中使用**普通查询执行运行脚本，但它一直给我错误：**
*"ERROR: relationship "user" already exists SQL state: 42P07"*。

**我在PgAdmin-III**中运行了 Execute pgScript ，它运行良好。

# android - 在尝试中设置文本 NullPointerException

> ID：16032200
> 
> 赞同：0
> 
> 时间：2013-04-16T08:28:46.263
> 
> 标签：android, json, nullpointerexception, textview

我遇到了 setText 的奇怪问题。我有来自互联网的 json 对象这个 json 不是 null 并且，当程序尝试执行时`json.getString("not_status") == 1`，我得到了// 如果我更改为并将其移到块外，它就在第 92 行，它工作正常。问题是-我可以在里面设置Sext吗？`NullPointerExeption``active.setText(json.getString("not_status"));``active.setText(json.getString("not_status"));``active.setText("abc");``try{}``try{}`

```
JSONObject json = null;
TextView active = (TextView) findViewById(R.id.tv_atc_active);
// some code to put data to json
try {
if (json!=null) {
Log.d("Gues: ", "5_1 " +json.getString("not_status"));
active.setText(json.getString("not_status"));
}
}
catch (JSONExaption e){
e.printTrace
} 
```

Log.d("猜测：", "5_1" +json.getString("not_status")); 给我后续，证明 json.getString("not_status") == 1

```
04-16 08:50:06.575: D/Gues:(1189): 5_1 1 
```

日志

```
04-16 08:33:12.944: E/AndroidRuntime(1018): FATAL EXCEPTION: main
04-16 08:33:12.944: E/AndroidRuntime(1018): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.regtest/com.example.regtest.AddToCheckActivity}: java.lang.NullPointerException
04-16 08:33:12.944: E/AndroidRuntime(1018):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
04-16 08:33:12.944: E/AndroidRuntime(1018):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
04-16 08:33:12.944: E/AndroidRuntime(1018):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
04-16 08:33:12.944: E/AndroidRuntime(1018):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
04-16 08:33:12.944: E/AndroidRuntime(1018):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-16 08:33:12.944: E/AndroidRuntime(1018):     at android.os.Looper.loop(Looper.java:137)
04-16 08:33:12.944: E/AndroidRuntime(1018):     at android.app.ActivityThread.main(ActivityThread.java:4745)
04-16 08:33:12.944: E/AndroidRuntime(1018):     at java.lang.reflect.Method.invokeNative(Native Method)
04-16 08:33:12.944: E/AndroidRuntime(1018):     at java.lang.reflect.Method.invoke(Method.java:511)
04-16 08:33:12.944: E/AndroidRuntime(1018):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
04-16 08:33:12.944: E/AndroidRuntime(1018):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
04-16 08:33:12.944: E/AndroidRuntime(1018):     at dalvik.system.NativeStart.main(Native Method)
04-16 08:33:12.944: E/AndroidRuntime(1018): Caused by: java.lang.NullPointerException
04-16 08:33:12.944: E/AndroidRuntime(1018):     at com.example.regtest.AddToCheckActivity.onCreate(AddToCheckActivity.java:92)
04-16 08:33:12.944: E/AndroidRuntime(1018):     at android.app.Activity.performCreate(Activity.java:5008)
04-16 08:33:12.944: E/AndroidRuntime(1018):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
04-16 08:33:12.944: E/AndroidRuntime(1018):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
04-16 08:33:12.944: E/AndroidRuntime(1018):     ... 11 more 
```

json输出

```
04-16 08:50:06.554: D/JSON(1189): {"not_id":"7217801","not_section":"1973","not_street":"m","not_sqTotal":"0","not_sqLiving":"0","not_sqKitchen":"0","not_sqLand":"0","not_unitLand":"0","not_sqHouse":"0","not_flat":"3","not_floor":"0","not_floors":"0","not_title":"\u041f\u0440\u043e\u0434\u0430\u0436\u0430 3 \u043a\u043e\u043c\u043d\u0430\u0442\u043d\u043e\u0439 \u043a\u0432\u0430\u0440\u0442\u0438\u0440\u044b \u0432 \u043d\u043e\u0432\u043e\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 \u0411\u0435\u043b\u0430\u044f \u0426\u0435\u0440\u043a\u043e\u0432\u044c \u0413\u043b\u0443\u0448\u043a\u0438","not_text":"","user_phone1":"+38111111111","user_phone2":"","user_contact":" ","not_region":"1","not_district":"2","not_settle":"34","not_price":"99999999","not_photo":"a:1:{i:0;a:2:{s:2:\"id\";s:7:\"8036442\";s:4:\"desc\";s:0:\"\";}}","not_date":"2013-04-15 10:46:26","not_date_till":"2013-05-15 00:00:00","not_up":"0","not_premium":"0","not_status":"1","not_huurl":"http:\/\/mirkvartir.ua\/offers\/view\/7217801-prodazha-3-komnatnoj-kvartiry-v-novostrojkax-belaya-cerkov-glushki.html","region_title":"\u041a\u0438\u0435\u0432\u0441\u043a\u0430\u044f","district_title":"\u0411\u0435\u043b\u0430\u044f \u0426\u0435\u0440\u043a\u043e\u0432\u044c","settle_title":"\u0413\u043b\u0443\u0448\u043a\u0438","section_title":"\u041f\u0440\u043e\u0434\u0430\u0436\u0430 \u043a\u0432\u0430\u0440\u0442\u0438\u0440 \u0432 \u043d\u043e\u0432\u043e\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445"} 
```

json代码

```
 public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {

        // Making HTTP request
        try {
            // defaultHttpClient

            String u = url;
            u = u +"?";
            //System.setProperty("192.168.4.200", "3128");

//          if (httpClient == null) {
//              httpClient = new DefaultHttpClient();
//              Log.d("New Client","bad");
//          }
            httpClient = HttpClientFactory.getThreadSafeClient();
            //DefaultHttpClient httpClient = c.getClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));
            for(int i =0;i<params.size();i++)
            {
            u =u +params.get(i).getName()+"="+params.get(i).getValue() +"&";
            }
            Log.d("your url is",u);
            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
            Log.d("data is sent", "true");

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();

        }
        Log.d("wait", "true");
        try {

            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "UTF-8"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {

                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
            Log.d("JSON", json);
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:30:23.823

试试这个。您必须在使用之前初始化活动的 textview。

```
active = (TextView)findViewById(R.id.yourTextViewname); 
active.setText(json.getString("not_status")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:35:51.570

您应该使用 findViewById(R.id.TextViewname); 将视图安装到 java；然后执行设置文本。由于您捕获只会捕获 JSONException，因为您只提到了这一点。尝试安装视图，它应该可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:35:59.053

这：

```
TextView active = (TextView) findViewById(R.id.tv_atc_active); 
```

仅当视图当前在屏幕上时才有效（也就是说，您调用`setContentView`了包含该 ID 的 xml，或者您手动添加了它。

所以它很可能是你的`active`is NULL，然后任何使用它的调用都会抛出一个`nullpointerException`

# c - 如何在ARM中使用pld指令

> ID：16032202
> 
> 赞同：5
> 
> 时间：2013-04-16T08:28:51.607
> 
> 标签：c, gcc, arm

我像这样使用它。

```
__pld(pin[0], pin[1], pin[2], pin[3], pin[4]); 
```

但我得到这个错误。

```
undefined reference to `__pld' 
```

我错过了什么？我需要包含头文件或其他东西吗？我使用的是 ARM Cortex A8，它甚至支持**pld**指令吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T13:48:35.207

如[this answer](https://stackoverflow.com/questions/16022362/how-to-tell-the-compiler-to-unroll-this-loop/16023295#16023295)所示，您可以按照[Clark](https://stackoverflow.com/users/193892/amigable-clark-kant)使用内联汇编程序。 `__builtin_prefetch`也是一个很好的建议。要知道的一个重要事实是`pld`指令如何作用于 ARM；对于某些处理器，它什么也不做。对于其他人，它将数据带入缓存。这仅对**读取**操作（或读取/修改/写入）有效。要注意的另一件事是，如果它确实在您的处理器上工作，它会获取整个缓存行。所以获取`pin`数组的例子，不需要指定所有成员。

通过确保`pld`数据与缓存对齐，您将获得更高的性能。另一个问题是，通过查看前面的代码，您只能通过**读取**的变量获得性能。在某些情况下，您只是在**写入**pin 数组。*预取*这些项目没有任何价值。ARM 有一个*写入缓冲区*，因此**写入**是一起批处理的，并且会自动突发到 SDRAM 芯片。

将所有**读取**数据组合在一个缓存行上将显示出最大的性能改进；整条生产线可以用单个`pld`. 此外，当您*展开*循环时，编译器将能够看到这些**读取**，并尽可能提前安排它们，以便将它们填充到缓存中；至少对于某些 ARM CPU。

另外，您可以考虑，

```
 __attribute__((optimize("prefetch-loop-arrays"))) 
```

本着对另一个问题的公认答案的精神；`-O3`如果它在您指定的 CPU 上有效，编译器可能已经启用了它。

可以指定各种编译器选项`--param NAME=VALUE`，允许您在内存子系统上向编译器提供提示。如果你得到正确的参数，这可能是一个非常有效的组合。

*   `prefetch-latency`
*   `simultaneous-prefetches`
*   `l1-cache-line-size`
*   `l1-cache-size`
*   `l2-cache-size`
*   `min-insn-to-prefetch-ratio`
*   `prefetch-min-insn-to-mem-ratio`

确保`-mcpu`为支持`pld`. 如果一切正常，编译器应该会自动为您执行此操作。但是，有时您可能需要手动执行此操作。

作为参考，这里是gcc-4.7.3的**ARM** `prefetch loop arrays`代码激活。

```
 /* Enable sw prefetching at -O3 for CPUS that have prefetch, and we have deemed
     it beneficial (signified by setting num_prefetch_slots to 1 or more.)  */
  if (flag_prefetch_loop_arrays < 0
      && HAVE_prefetch
      && optimize >= 3
      && current_tune->num_prefetch_slots > 0)
    flag_prefetch_loop_arrays = 1; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T08:37:31.153

试试[http://www.ethernut.de/en/documents/arm-inline-asm.html](http://www.ethernut.de/en/documents/arm-inline-asm.html)

在 GCC 中，它可能看起来像这样：

示例来自： http: [//communities.mentor.com/community/cs/archives/arm-gnu/msg01553.html](http://communities.mentor.com/community/cs/archives/arm-gnu/msg01553.html) 和 pld 的用法：

```
 __asm__ __volatile__(
    "pld\t[%0]"
    :
    : "r" (first) ); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T08:50:49.967

你可能想看看 gcc 的[`__builtin_prefetch`](http://gcc.gnu.org/onlinedocs/gcc-4.6.4/gcc/Other-Builtins.html#index-g_t_005f_005fbuiltin_005fprefetch-3145). 为了您的方便，我在这里复制了它：

> 此功能用于通过在访问数据之前将数据移动到缓存中来最小化缓存未命中延迟。您可以将对 __builtin_prefetch 的调用插入到您知道内存中可能很快会被访问的数据地址的代码中。如果目标支持它们，将生成数据预取指令。如果预取在访问之前足够早地完成，那么数据将在访问时位于缓存中。
> 
> addr 的值是要预取的内存地址。有两个可选参数，rw 和 locality。rw 的值是编译时常数 1 或 0；1 表示预取正在准备写入内存地址，默认值为零表示预取正在准备读取。值局部性必须是介于 0 和 3 之间的编译时常量整数。值为零表示数据没有时间局部性，因此在访问后无需将其留在缓存中。值为 3 表示数据具有高度的时间局部性，应尽可能保留在所有级别的缓存中。一和二的值分别表示低或中等程度的时间局部性。默认值为三个。
> 
> ```
>  for (i = 0; i < n; i++)
>        {
>          a[i] = a[i] + b[i];
>          __builtin_prefetch (&a[i+j], 1, 1);
>          __builtin_prefetch (&b[i+j], 0, 1);
>          /* ... */
>        } 
> ```
> 
> 如果 addr 无效，数据预取不会产生故障，但地址表达式本身必须有效。例如，如果 p->next 不是有效地址，则 p->next 的预取不会出错，但如果 p 不是有效地址，则评估会出错。
> 
> 如果目标不支持数据预取，如果地址表达式包含副作用但不生成其他代码并且 GCC 不发出警告，则计算地址表达式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-09T03:54:34.020

> ```
> undefined reference to `__pld' 
> ```

要回答有关未定义引用的问题，`__pld`是 ARM 编译器内在的。请参阅ARM 手册中的[__pld 内在函数。](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0491g/CJAGADAC.html)

也许 GCC 不承认 ARM 固有的。

# iphone - 如何使用 iphone SDK 中的两个按钮在运行时更改应用程序语言？

> ID：16032207
> 
> 赞同：2
> 
> 时间：2013-04-16T08:29:05.323
> 
> 标签：iphone, ios, objective-c, ios4

我正在 ios 平台上建立一个项目，想在这个应用程序中使用两种语言，也想要。用户可以在运行时更改语言假设我们可以使用两个语言按钮按钮 1 用于英语，按钮 2 用于德语，用户可以随时使用这些按钮更改应用程序语言。任何帮助或教程

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T08:50:30.707

假设您已经为英语和德语创建了本地化，您的应用将使用在设置中选择的语言（这是首选选项）。

如果您想直接从您的应用程序设置语言：

```
[[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithObjects:@"en", nil] forKey:@"AppleLanguages"]; 
```

只会将您的应用程序的语言设置为英语（对于德语，我假设键是“de”）。您还应该：

```
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

在您的应用程序重新启动之前，这不会生效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-05T10:57:17.613

使用该方法创建一个类“LanguageUtils”：

```
- (NSString *) localizedString:(NSString *)key
{
    if (self.currentLanguage == nil) {
        self.currentLanguage = @"en";
    }

    NSString* path = [[NSBundle mainBundle] pathForResource:[self.currentLanguage lowercaseString] ofType:@"lproj"];
    NSBundle* languageBundle = [NSBundle bundleWithPath:path];
    return [languageBundle localizedStringForKey:key value:@"" table:nil];
} 
```

和属性 NSString currentLanguage。

然后在你的 .pch 中做：

```
#undef NSLocalizedString
#define NSLocalizedString(key, _comment) [[Language sharedInstance] localizedString:key] 
```

像魅力一样工作，您可以在运行时重新定义当前语言。

请记住，您的视图应该由您自己刷新。它不会自动为您完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-01T18:28:57.450

我想出了一个解决方案，允许您使用`NSLocalizedString`. 我创建了一个`NSBundle`call类别`NSBundle+RunTimeLanguage`。界面是这样的。

```
// NSBundle+RunTimeLanguage.h
#import <Foundation/Foundation.h>
@interface NSBundle (RunTimeLanguage)
#define NSLocalizedString(key, comment) [[NSBundle mainBundle] runTimeLocalizedStringForKey:(key) value:@"" table:nil]
- (NSString *)runTimeLocalizedStringForKey:(NSString *)key value:(NSString *)value table:(NSString *)tableName;
@end 
```

实现是这样的。

```
// NSBundle+RunTimeLanguage.m
#import "NSBundle+RunTimeLanguage.h"
#import "AppDelegate.h"

@implementation NSBundle (RunTimeLanguage)

- (NSString *)runTimeLocalizedStringForKey:(NSString *)key value:(NSString *)value table:(NSString *)tableName
{
    AppDelegate *appDelegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
    NSString *path= [[NSBundle mainBundle] pathForResource:[appDelegate languageCode] ofType:@"lproj"];
    NSBundle *languageBundle = [NSBundle bundleWithPath:path];
    NSString *localizedString=[languageBundle localizedStringForKey:key value:key table:nil];
    return localizedString;
}
@end 
```

不仅仅是将导入添加`NSBundle+RunTimeLanguage.h`到使用`NSLocalizedString`.

如您所见，我将语言代码存储在`AppDelegate`. 这可以存储在您想要的任何地方。

我唯一不喜欢的就是`NSLocalizedString`marco重新定义的警告。也许有人可以帮我修复这部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T09:24:41.783

[这](http://aggressive-mediocrity.blogspot.in/2010/03/custom-localization-system-for-your.html)非常好，并且在应用程序内以及设备语言发生变化时也会更改语言。我在许多应用程序中都使用了它。

对于本地化，我们通常使用

```
 NSLocalizedString(@"hello",@"Hello World"); 
```

在自定义实现中，他们有类似的东西

```
 AMLocalizedString(@"hello",@"Hello World"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-05T10:46:13.333

这是演示教程

[https://github.com/object2dot0/Advance-Localization-in-ios-apps](https://github.com/object2dot0/Advance-Localization-in-ios-apps)

只需删除

```
 [self dealloc]; 
```

从

```
 -(IBAction) languageSelection:(id)sender 
```

所以不会崩溃！！！请享用！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T08:41:31.870

您必须为此使用本地化。只需将键和值存储在 localizable.string 中，然后根据您的要求加载适当的 .string 文件。您可以参考以下教程： [http ://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial](http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-29T06:25:56.187

**SWIFT 2.0 版本** 我们可以在运行时执行此操作，而无需在 Swift 2.0 中重新启动应用程序，如下所示

在类中创建一个函数，假设**LanguageManager**是类的名称

```
class LanguageManager
{

    static let sharedInstance =  LanguageManager()

    //Make a function for Localization. Language Code is the one which we will be deciding on button click.
    func LocalizedLanguage(key:String,languageCode:String)->String{

        //Make sure you have Localizable bundles for specific languages.
        var path = NSBundle.mainBundle().pathForResource(languageCode, ofType: "lproj")

        //Check if the path is nil, make it as "" (empty path)
        path = (path != nil ? path:"")

        let languageBundle:NSBundle!

        if(NSFileManager.defaultManager().fileExistsAtPath(path!)){
            languageBundle = NSBundle(path: path!)
            return languageBundle!.localizedStringForKey(key, value: "", table: nil)
        }else{
            // If path not found, make English as default
            path = NSBundle.mainBundle().pathForResource("en", ofType: "lproj")
            languageBundle = NSBundle(path: path!)
           return languageBundle!.localizedStringForKey(key, value: "", table: nil)
        }
    }
} 
```

如何使用这个。
现在假设您有两种语言用于应用程序（英语和西班牙语）
英语 - **en**
西班牙语 - **es**
[![在此处输入图像描述](https://i.stack.imgur.com/XcEgp.png)](https://i.stack.imgur.com/XcEgp.png)

假设您必须为标签放置一些东西

```
//LOGIN_LABEL_KEY is the one that you will define in Localizable.strings for Login label text
 logInLabel.text = LanguageManager.sharedInstance.LocalizedLanguage("LOGIN_LABEL_KEY", languageCode: "es")

//This will use the Spanish version of the text. 
//"es" is the language code which I have hardcoded here. We can use a variable or some stored value in UserDefaults which will change on Button Click and will be passed in loginLabel 
```

有关语言代码的更多信息，请参阅下面的链接
[https://developer.apple.com/library/ios/documentation/MacOSX/Conceptual/BPInternational/LanguageandLocaleIDs/LanguageandLocaleIDs.html](https://developer.apple.com/library/ios/documentation/MacOSX/Conceptual/BPInternational/LanguageandLocaleIDs/LanguageandLocaleIDs.html)

或者

[http://www.ibabbleon.com/iOS-Language-Codes-ISO-639.html](http://www.ibabbleon.com/iOS-Language-Codes-ISO-639.html)

# asp.net - ASP.NET, when updating a record through a GridView, the contents of that record are deleted, why?

> ID：16032220
> 
> 赞同：2
> 
> 时间：2013-04-16T08:29:42.773
> 
> 标签：asp.net, gridview

I have been coding a gridview into my website for a day or so now but simply cannot get it to work, fixing one problem just creates more issues.

When selecting edit on a particular record, the gridview goes into the edit item template as it should, but once I have changed the records I want to change, I click update, and then once the gridview returns to item template, all fields on the record are empty?

Here is the GridView code:

```
<asp:GridView ID="GridView1" runat="server" AllowPaging="True" 
        AutoGenerateColumns="False" DataKeyNames="PlantID" 
        DataSourceID="SqlDataSource1" AllowSorting="True" CellPadding="4" 
        ForeColor="#333333" GridLines="None" OnRowCancelingEdit="GridView1_RowCancelingEdit"
        OnRowEditing="GridView1_RowEditing" OnRowUpdating="GridView1_RowUpdating">
        <AlternatingRowStyle BackColor="White" />
        <Columns>
            <asp:CommandField ButtonType="Button" ShowEditButton="true" />
            <asp:CommandField ButtonType="Button" ShowDeleteButton="true" />
            <asp:CommandField ButtonType="Button" ShowCancelButton="true" />
            <asp:CommandField ButtonType="Button" ShowSelectButton="True" />
            <asp:BoundField DataField="PlantID" HeaderText="PlantID" InsertVisible="False" 
                ReadOnly="True" SortExpression="PlantID" />
            <asp:TemplateField HeaderText="Latin Name">
                <ItemTemplate>
                    <%# Eval("LatinName") %>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox runat="server" ID="txtLatinName" Text='<%# Eval("LatinName") %>' />
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Popular Name">
                <ItemTemplate>
                    <%# Eval("PopularName") %>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox runat="server" ID="txtPopularName" Text='<%# Eval("PopularName")%>' />
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Season">
                <ItemTemplate>
                    <%# Eval("Season") %>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox runat="server" ID="txtSeason" Text='<%# Eval("Season") %>' />
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Aftercare">
                <ItemTemplate>
                    <%# Eval("Aftercare") %>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox runat="server" ID="txtAftercare" Text='<%# Eval("Aftercare") %>' />
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Categories">
                <ItemTemplate>
                    <%# Eval("Categories") %>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox runat="server" ID="txtCategories" Text='<%# Eval("Categories") %>' />
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Description">
                <ItemTemplate>
                    <%# Eval("Description") %>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox runat="server" ID="txtDescription" Text='<%# Eval("Description") %>' />
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Uses">
                <ItemTemplate>
                    <%# Eval("Uses") %>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox runat="server" ID="txtUses" Text='<%# Eval("Uses") %>' />
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="FoliageColour">
                <ItemTemplate>
                    <%# Eval("FoliageColour") %>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:Textbox runat="server" ID="txtFoliageColour" Text='<%# Eval("FoliageColour") %>' />
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Flower Colour">
                <ItemTemplate>
                    <%# Eval("FlowerColour") %>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox runat="server" ID="txtFlowerColour" Text='<%# Eval("FlowerColour") %>' />
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="FloweringPeriod">
                <ItemTemplate>
                    <%# Eval("FloweringPeriod") %>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox runat="server" ID="txtFloweringPeriod" Text='<%# Eval("FloweringPeriod") %>' />
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Height">
                <ItemTemplate>
                    <%# Eval("Height") %>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox runat="server" ID="txtHeight" Text='<%# Eval("Height") %>' />
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Spread">
                <ItemTemplate>
                    <%# Eval("Spread") %>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox runat="server" ID="txtSpread" Text='<%# Eval("Spread") %>' />
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Instructions">
                <ItemTemplate>
                    <%# Eval("Instructions") %>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox runat="server" ID="txtInstructions" Text='<%# Eval("Instructions") %>' />
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Price">
                <ItemTemplate>
                    <%# Eval("Price") %>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox runat="server" ID="txtPrice" Text='<%# Eval("Price") %>' />
                </EditItemTemplate>
            </asp:TemplateField>
        </Columns>
        <EditRowStyle BackColor="#2461BF" />
        <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
        <RowStyle BackColor="#EFF3FB" />
        <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
        <SortedAscendingCellStyle BackColor="#F5F7FB" />
        <SortedAscendingHeaderStyle BackColor="#6D95E1" />
        <SortedDescendingCellStyle BackColor="#E9EBEF" />
        <SortedDescendingHeaderStyle BackColor="#4870BE" />
    </asp:GridView>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
        ProviderName="<%$ ConnectionStrings:ConnectionString.ProviderName %>" 
        SelectCommand="SELECT * FROM [Plants]" 
        DeleteCommand="DELETE FROM [Plants] WHERE [PlantID] = ?" 
        InsertCommand="INSERT INTO [Plants] ([PlantID], [LatinName], [PopularName], [Season], [Aftercare], [Categories], [Description], [Uses], [FoliageColour], [FlowerColour], [FloweringPeriod], [Height], [Spread], [Instructions], [Price]) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)" 
        UpdateCommand="UPDATE [Plants] SET [LatinName] = ?, [PopularName] = ?, [Season] = ?, [Aftercare] = ?, [Categories] = ?, [Description] = ?, [Uses] = ?, [FoliageColour] = ?, [FlowerColour] = ?, [FloweringPeriod] = ?, [Height] = ?, [Spread] = ?, [Instructions] = ?, [Price] = ? WHERE [PlantID] = ?">
        <DeleteParameters>
            <asp:Parameter Name="PlantID" Type="Int32" />
        </DeleteParameters>
        <InsertParameters>
            <asp:Parameter Name="PlantID" Type="Int32" />
            <asp:Parameter Name="LatinName" Type="String" />
            <asp:Parameter Name="PopularName" Type="String" />
            <asp:Parameter Name="Season" Type="String" />
            <asp:Parameter Name="Aftercare" Type="String" />
            <asp:Parameter Name="Categories" Type="String" />
            <asp:Parameter Name="Description" Type="String" />
            <asp:Parameter Name="Uses" Type="String" />
            <asp:Parameter Name="FoliageColour" Type="String" />
            <asp:Parameter Name="FlowerColour" Type="String" />
            <asp:Parameter Name="FloweringPeriod" Type="String" />
            <asp:Parameter Name="Height" Type="String" />
            <asp:Parameter Name="Spread" Type="String" />
            <asp:Parameter Name="Instructions" Type="String" />
            <asp:Parameter Name="Price" Type="Decimal" />
        </InsertParameters>
        <UpdateParameters>
            <asp:Parameter Name="LatinName" Type="String" />
            <asp:Parameter Name="PopularName" Type="String" />
            <asp:Parameter Name="Season" Type="String" />
            <asp:Parameter Name="Aftercare" Type="String" />
            <asp:Parameter Name="Categories" Type="String" />
            <asp:Parameter Name="Description" Type="String" />
            <asp:Parameter Name="Uses" Type="String" />
            <asp:Parameter Name="FoliageColour" Type="String" />
            <asp:Parameter Name="FlowerColour" Type="String" />
            <asp:Parameter Name="FloweringPeriod" Type="String" />
            <asp:Parameter Name="Height" Type="String" />
            <asp:Parameter Name="Spread" Type="String" />
            <asp:Parameter Name="Instructions" Type="String" />
            <asp:Parameter Name="Price" Type="Decimal" />
            <asp:Parameter Name="PlantID" Type="Int32" />
        </UpdateParameters>
    </asp:SqlDataSource> 
```

Here is the code behind file:

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.OleDb;

public partial class Staff : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        BindDataPlant();
    }
}

private void BindDataPlant()
{
    OleDbConnection Conn = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0; Data Source=" + Server.MapPath("~/App_Data/LincolnGardenCentre.accdb;"));

    try
    {
        Conn.Open();
        if (Conn.State.ToString() == "Open")
            Page.Title = "Connection Successful";
        else
            Page.Title = "Connection Unsuccessful";

        OleDbCommand Comm = new OleDbCommand();
        Comm.Connection = Conn;
        Comm.CommandText = "Select * FROM Plants;";

        OleDbDataAdapter DA = new OleDbDataAdapter();
        DA.SelectCommand = Comm;
        DataSet DS = new DataSet();
        OleDbCommandBuilder CB = new OleDbCommandBuilder(DA);
        DA.Fill(DS, "PLANTS");
    }
    catch (Exception e)
    {
        Response.Redirect("Error.aspx");
    }
    finally
    {
        Conn.Close();
        Conn.Dispose();
    }
}

protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
{
    GridView1.EditIndex = e.NewEditIndex;
    BindDataPlant();
}

protected void GridView1_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
{
    e.Cancel = true;
    GridView1.EditIndex = -1;
    BindDataPlant();
}

protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    GridViewRow row = (GridViewRow)GridView1.Rows[e.RowIndex];

    int PlantID = Int32.Parse(GridView1.DataKeys[e.RowIndex].Value.ToString());

    TextBox txtLatinName = (TextBox)row.FindControl("txtLatinName");
    TextBox txtPopularName = (TextBox)row.FindControl("txtPopularName");
    TextBox txtSeason = (TextBox)row.FindControl("txtSeason");
    TextBox txtAftercare = (TextBox)row.FindControl("txtAftercare");
    TextBox txtCategories = (TextBox)row.FindControl("txtCategories");
    TextBox txtDescription = (TextBox)row.FindControl("txtDescription");
    TextBox txtUses = (TextBox)row.FindControl("txtUses");
    TextBox txtFoliageColour = (TextBox)row.FindControl("txtFoliageColour");
    TextBox txtFlowerColour = (TextBox)row.FindControl("txtFlowerColour");
    TextBox txtFloweringPeriod = (TextBox)row.FindControl("txtFloweringPeriod");
    TextBox txtHeight = (TextBox)row.FindControl("txtHeight");
    TextBox txtSpread = (TextBox)row.FindControl("txtSpread");
    TextBox txtInstructions = (TextBox)row.FindControl("txtInstructions");
    TextBox txtPrice = (TextBox)row.FindControl("txtPrice");

    OleDbConnection Conn = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0; Data Source=" + Server.MapPath("~/App_Data/LincolnGardenCentre.accdb;"));

    try
    {
        Conn.Open();
        if (Conn.State.ToString() == "Open")
            Page.Title = "Connection Successful";
        else
            Page.Title = "Connection Unsuccessful";

        OleDbCommand Comm = new OleDbCommand();
        Comm.Connection = Conn;

        Comm.Parameters.Add("@PlantID", OleDbType.Integer).Value = PlantID.ToString();
        Comm.Parameters.Add("@LatinName", OleDbType.VarChar).Value = txtLatinName.Text;
        Comm.Parameters.Add("@PopularName", OleDbType.VarChar).Value = txtPopularName.Text;
        Comm.Parameters.Add("@Season", OleDbType.VarChar).Value = txtSeason.Text;
        Comm.Parameters.Add("@Aftercare", OleDbType.VarChar).Value = txtAftercare.Text;
        Comm.Parameters.Add("@Categories", OleDbType.VarChar).Value = txtCategories.Text;
        Comm.Parameters.Add("@Description", OleDbType.VarChar).Value = txtDescription.Text;
        Comm.Parameters.Add("@Uses", OleDbType.VarChar).Value = txtUses.Text;
        Comm.Parameters.Add("@FoliageColour", OleDbType.VarChar).Value = txtFoliageColour.Text;
        Comm.Parameters.Add("@FlowerColour", OleDbType.VarChar).Value = txtFlowerColour.Text;
        Comm.Parameters.Add("@FloweringPeriod", OleDbType.VarChar).Value = txtFloweringPeriod.Text;
        Comm.Parameters.Add("@Height", OleDbType.VarChar).Value = txtHeight.Text;
        Comm.Parameters.Add("@Spread", OleDbType.VarChar).Value = txtSpread.Text;
        Comm.Parameters.Add("@Instructions", OleDbType.VarChar).Value = txtInstructions.Text;
        Comm.Parameters.Add("@Price", OleDbType.Decimal).Value = txtPrice.Text;

        Comm.CommandText = "UPDATE Plants SET LatinName = @LatinName, PopularName = @PopularName, Season = @Season, Aftercare = @Aftercare, Categories = @Categories, Description = @Description, Uses = @Uses, FoliageColour = @FoliageColour, FlowerColour = @FlowerColour, FloweringPeriod = @FloweringPeriod, Height = @Height, Spread = @Spread, Instructions = @Instructions, Price = @Price WHERE PlantID = @PlantID";
        Comm.Connection = Conn;
        Comm.ExecuteNonQuery();

        GridView1.EditIndex = -1;
        BindDataPlant();
    }
    catch (Exception ex)
    {
        Response.Redirect("Error.aspx");
    }
    finally
    {
        Conn.Close();
        Conn.Dispose();
    }
} 
```

}

Can anyone shed any light onto what is happening here?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:21:16.260

删除网格标记中的 DataSourceId 并在 BindDataPlant 方法中绑定网格

GridView1.DataSource = DS;

GridView1.DataBind()

声明后 DA.Fill(DS, "PLANTS");

它会解决你的问题。

# c# - 从后面的代码中获取变量值并在 aspx 页面中使用

> ID：16032221
> 
> 赞同：0
> 
> 时间：2013-04-16T08:29:43.043
> 
> 标签：c#, asp.net

我需要验证数据库中的数据（数量）存储在后面的代码中的文本框（数量），并且我必须使用后面代码中的变量值验证给定的输入值，以便用户不能使用更多的数量然后数据库中的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T08:40:10.310

假设您`Quantity`在后面的代码中有一个变量，它包含用户可以插入的最大数量，您需要向您的 TextBox 添加一个验证器，如下所示：

```
<asp:RangeValidator id="Range1"
           ControlToValidate="TextBox1"
           MinimumValue="0"
           MaximumValue="<%# Quantity %>"
           Type="Integer"
           Text="Value inserted is more than the allowed maxium quantity"
           runat="server"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T08:36:35.263

将该变量公开或创建一个可以保存该变量值的属性，然后您可以像这样在 aspx 页面中访问它

```
<body>
    <form id="form1" runat="server">
    <div>
    <h1><%=Name%></h1>
    </div>
    </form>
</body> 
```

代码背后的代码应该是这样的

```
 public string Name{ get; set; }
protected void Page_Load(object sender, EventArgs e)
{
    Name = "Mega Mind";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:41:47.177

正如我从您的问题标题而不是描述中了解到的那样，您想从您的客户端脚本代码（即 aspx）中访问代码中的变量

您可以使用 ClientScriptManager.RegisterClientScriptBlock() 注册变量

[在此处输入链接描述](http://msdn.microsoft.com/en-us/library/bahh2fef.aspx)中的更多信息

# c# - C#：获取 FFmpeg 的网络摄像头名称

> ID：16032223
> 
> 赞同：2
> 
> 时间：2013-04-16T08:29:43.750
> 
> 标签：c#, .net, ffmpeg, video-streaming, video-capture

在我的 C# 应用程序中，我使用 FFmpeg 流式传输桌面，它工作正常。我还希望 FFmpeg 从网络摄像头发布视频。问题是，当我使用桌面作为输入时，设备名称参数是已知的（-i video=UScreenCapture），但不是当我想使用网络摄像头和麦克风时。所以，我的问题是，如何使用 C# 获取网络摄像头和麦克风名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:08:43.227

我讨厌回答自己的问题，但这次我会这样做。FFmpeg 中有“list_devices”命令（ffmpeg -list_devices true -f dshow -i dummy）。它为您提供音频和视频输入列表。你可以猜到，我解决了这个问题，将 FFmpeg 的输出重定向到我的应用程序，执行此命令并从中选择相机/麦克风名称。

# php - 如何使用 PHP stomp 库创建一个临时队列？

> ID：16032224
> 
> 赞同：0
> 
> 时间：2013-04-16T08:29:48.123
> 
> 标签：php, activemq, stomp

我正在使用**PHP Stomp 客户端**（版本 1.0.0）连接并向**ActiveMQ**（版本 5.7.0）发送消息。

我已经读过，如果您订阅一个名为 的目的地`"/temp-queue/"`，这将触发 ActiveMQ 创建一个临时队列。

但是，当我尝试这样做时，它会创建一个名为`"queue://temp-queue"`而不是临时队列的队列。

有没有办法让 Stomp 在 ActiveMQ 上创建一个临时队列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:42:41.883

如果您尝试创建临时队列并且只使用名称`"/temp-queue/"`，那么这就是问题所在，临时队列部分是目标前缀，您仍然需要给它一个类似`"/temp-queue/1234"`或类似的名称。通常名称值来自 UUID 或其他一些唯一的 Id 生成器。

# c - 如何在linux内核中运行while循环几毫秒？

> ID：16032228
> 
> 赞同：2
> 
> 时间：2013-04-16T08:29:59.843
> 
> 标签：c, linux, time, timer, linux-kernel

我需要在 Linux 内核中进行一些轮询以继续一段时间，所以我需要设计在几毫秒间隔后退出的 while 循环。那么我该怎么做呢？

我虽然可以使用`gettimeofday()`，但可以在用户空间使用，我希望在内核空间使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:00:20.430

使用`msecs_to_jiffies`：

```
unsigned long j0,j1,delay;
delay = msecs_to_jiffies(20); /* 20 msec delay */
j0 = jiffies; 
j1 = j0 + delay; 

while (time_before(jiffies, j1)) 
        /* do something */ 
```

如果您的系统上有高分辨率计时器，您可以使用它的时间量级小于一瞬间。一般考虑使用内核定时器或`hrt`.

*   [内核中的高分辨率时序？](https://stackoverflow.com/questions/7770353/high-resolution-timing-in-kernel)
*   [IBM 的教程](http://www.ibm.com/developerworks/linux/library/l-timers-list/)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-16T08:58:05.073

您可以使用该`sleep`功能，例如`sleep(1)`：它将停止活动 1 秒。

# java - 使用 Java Rally Rest API 创建特定于用户故事的缺陷/任务

> ID：16032230
> 
> 赞同：2
> 
> 时间：2013-04-16T08:30:03.480
> 
> 标签：java, rest, rally

如何使用 java Rally-Rest-API 为用户故事创建缺陷/任务。任何人都可以拥有集会查询属性可用的链接吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:24:11.143

您可以在此处找到对 Java REST API 的介绍：

[https://developer.help.rallydev.com/java-toolkit-rally-rest-api](https://developer.help.rallydev.com/java-toolkit-rally-rest-api)

以及关于 Rally 的 Webservices API 的文档：

[https://rally1.rallydev.com/slm/doc/webservice](https://rally1.rallydev.com/slm/doc/webservice)

要创建新缺陷并将其与故事相关联，您可以执行以下操作：

```
// Query for Story to associate with Defect
String storyFormattedID = "US20142";
QueryRequest storyRequest = new QueryRequest("HierarchicalRequirement");
storyRequest.setFetch(new Fetch("FormattedID","Name","Changesets"));
storyRequest.setQueryFilter(new QueryFilter("FormattedID", "=", storyFormattedID));
QueryResponse storyQueryResponse = restApi.query(storyRequest);
JsonObject storyJsonObject = storyQueryResponse.getResults().get(0).getAsJsonObject();
String storyRef = storyJsonObject.get("_ref").toString();

JsonObject newDefect = new JsonObject();
newDefect.addProperty("Name", "Test Defect");
newDefect.addProperty("Priority", "High Attention");
newDefect.addProperty("Severity", "Major Problem");
newDefect.addProperty("Requirement", storyRef);

CreateRequest storyCreateRequest = new CreateRequest("defect", newDefect);
CreateResponse storyCreateResponse = restApi.create(storyCreateRequest); 
```

任务的过程将非常相似：

```
// Create a new Task and associate to the same Requirement
JsonObject newTask = new JsonObject();
newTask.addProperty("Name", "Test Task");
newTask.addProperty("State", "Defined");
newDefect.addProperty("WorkProduct", storyRef);

CreateRequest taskCreateRequest = new CreateRequest("task", newTask);
CreateResponse taskCreateResponse = restApi.create(taskCreateRequest); 
```

# javascript - Get server time/count/sum (javascript)

> ID：16032237
> 
> 赞同：0
> 
> 时间：2013-04-16T08:30:38.233
> 
> 标签：javascript, html

So basically this is what i want to do:get server time (date&time),count 24 hours backwards,go to "link",sum all "XX" within these 24 hours

Example: current time 11:00 16.04.2013

```
16.04.2013 09:59:16 XX
16.04.2013 06:30:18 YY
16.04.2013 05:44:07 XX
15.04.2013 22:10:10 XX
15.04.2013 10:00:00 XX 
```

and the function should return 3 as sum

@ Marco Forberg

```
<table class="messages-list">
<tbody><tr>
<td class="date">16.04.2013 09:59:16
</td>
<td class="text"> XX
</td>
</tr>
</tbody>
</table> 
```

and current time

```
<span id="servertime" rel="1366102414">11:53:33</span> 
```

# ruby - Ruby 2.0 iconv 替换

> ID：16032241
> 
> 赞同：25
> 
> 时间：2013-04-16T08:30:49.670
> 
> 标签：ruby, ruby-2.0

我不知道 Ruby 但想运行一个脚本，其中：

> D:/Heather/Ruby/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in `require': 无法加载此类文件 -- iconv (LoadError)

如果我评论 iconv 代码，它会以某种方式工作，但如果我可以重新编码这部分会更好：

```
return Iconv.iconv('UTF-8//IGNORE', 'UTF-8', (s + ' ') ).first[0..-2] 
```

没有`iconv`。也许我可以`String#encode`在这里以某种方式使用？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-16T08:39:05.253

Iconv 在 1.9.3 中被弃用（删除）。你仍然可以安装它。

如果您不确定，请参考资料： [https ://rvm.io/packages/iconv/](https://rvm.io/packages/iconv/)

但是，建议您不要而是使用：

```
string.encode("UTF-8", :invalid => :replace, :undef => :replace, :replace => "?") 
```

[API](http://ruby-doc.org/core-1.9.3/String.html#method-i-encode)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-08T09:24:06.560

**从 Ruby 2.1 开始可以使用**String#scrub 。****

 **```
str.scrub(''),
str.scrub{ |bytes| '' } 
```

相关问题：[Ruby 1.9.X 中 Iconv.conv(“UTF-8//IGNORE”,…) 的等价物？](https://stackoverflow.com/questions/7870636/equivalent-of-iconv-convutf-8-ignore-in-ruby-1-9-x)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-01-23T17:43:43.873

如果您不在 Ruby 2.1 上，因此无法使用`String#scrub`，则以下内容将忽略字符串中未正确 UTF-8 编码的所有部分。

```
string.encode('UTF-16', :invalid => :replace, :replace => '').encode('UTF-8') 
```

encode 方法几乎完全符合您的要求，但需要注意的是，如果它认为字符串已经是 UTF-8，则 encode 不会做任何事情。因此，您需要更改编码，通过仍然可以编码 UTF-8 可以编码的完整 unicode 字符集的编码。（如果你不这样做，你会破坏任何不在该编码中的字符 - 7bit ASCII 将是一个非常糟糕的选择！）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-29T02:24:40.793

我对单独使用一行 string.encode 的各种方法并不满意

但我写了一个回填，在 MRI pre 2.1 或其他没有它的红宝石中实现 String#scrub。

[https://github.com/jrochkind/scrub_rb](https://github.com/jrochkind/scrub_rb)**

# eclipse - Oracle eclipse connection

> ID：16032243
> 
> 赞同：0
> 
> 时间：2013-04-16T08:30:53.207
> 
> 标签：eclipse, oracle, database-connection

I am absolutely new to oracle. I am using oracle 10g connection and just on experimental basis trying to connect to HR schema, through the database explorer. After much difficulty I figured SID, hostname etc, but now m stuck again.

Now I'm trying to establish a connection to the Database via eclipse but the ping keeps failing and get the following error

> java.sql.SQLException: Io exception: The Network Adapter could not establish the connection at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:113) at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:147) at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:257) at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:389) at oracle.jdbc.driver.PhysicalConnection.(PhysicalConnection.java:454) at oracle.jdbc.driver.T4CConnection.(T4CConnection.java:165) at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:35) at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:802) at org.eclipse.datatools.connectivity.drivers.jdbc.JDBCConnection.createConnection(JDBCConnection.java:206) at org.eclipse.datatools.connectivity.DriverConnectionBase.internalCreateConnection(DriverConnectionBase.java:104) at org.eclipse.datatools.connectivity.DriverConnectionBase.open(DriverConnectionBase.java:53) at org.eclipse.datatools.connectivity.drivers.jdbc.JDBCConnection.open(JDBCConnection.java:72) at org.eclipse.datatools.enablement.internal.oracle.JDBCOracleConnectionFactory.createConnection(JDBCOracleConnectionFactory.java:27) at org.eclipse.datatools.connectivity.internal.ConnectionFactoryProvider.createConnection(ConnectionFactoryProvider.java:83) at org.eclipse.datatools.connectivity.internal.ConnectionProfile.createConnection(ConnectionProfile.java:355) at org.eclipse.datatools.connectivity.ui.PingJob.createTestConnection(PingJob.java:76) at org.eclipse.datatools.connectivity.ui.PingJob.run(PingJob.java:59) at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:16:28.740

每当您看到网络适配器无法建立连接时，您要么使用了错误的 SQL Developer URL，要么遇到了基本的 SQL*Net 连接问题！此错误很可能是由以下因素之一引起的：

*   您使用了错误的网址

*   使用了错误的端口号或 IP 地址（或 DNS 主机名）

*   监听器配置不正确

*   侦听器进程（服务）未运行。您可以使用“lsnrctl start”命令或在 Windows 上通过启动侦听器服务重新启动它。

请参阅[此链接](https://forums.oracle.com/forums/thread.jspa?threadID=620751)以获取更多详细信息

# java - 使用 Java springdata 保存带有上限数组（$slice 和 $sort）的 mongoDB 文档

> ID：16032246
> 
> 赞同：1
> 
> 时间：2013-04-16T08:31:03.860
> 
> 标签：java, mongodb, sorting, spring-data, slice

我正在使用 mongoDB 和 Java SpringData 开发一个日志寄存器。

这里[MongoDb capped sub-collection](https://stackoverflow.com/questions/6550346/mongodb-capped-sub-collection)讨论了 mongoDB 结构，但我会使用 Java。最重要的是我有一个包含一个或多个字段和一个上限数组的文档。

Java中有一些方法或方法可以做到这一点吗？

我的对象是这样的：

```
user = {
   name: String,
   latest_messages: [String] (capped to a 100 elements)
} 
```

在 Java 中：

```
public class MessageLog {
    private ObjectId id;
    private String name;
    private List<Message> messages;
} 
```

在哪里：

```
public class Message{
    private String text;
    private String level;
    private Date date;
} 
```

**编辑**：

我正在使用带有 Spring 源的 Java（mongodb 驱动程序 v2.10.1：[http](http://central.maven.org/maven2/org/mongodb/mongo-java-driver/2.10.1/) ://central.maven.org/maven2/org/mongodb/mongo-java-driver/2.10.1/ ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:37:26.253

我终于得到了使用此代码的解决方案：

```
// Define the search query
BasicDBObject searchQuery = new BasicDBObject().append("idU", idUser);

// To create the json query to modify
BasicDBObject logDocument = new BasicDBObject();

// Create the object and add it to a list (because the $each require a list)
List<DBObject> list = new ArrayList<DBObject>();
DBObject object = new BasicDBObject().append("text", logMessage.getText());
object.append("level", logMessage.getLevel())
object.append("date", logMessage.getDate());
list.add(object);

// Create the $sort and $slice query at the same time
logDocument.append(
    "$push",
    new BasicDBObject().append("logs", new BasicDBObject().append("$each", list).append("$sort", new BasicDBObject().append("date", 1))
            .append("$slice", -10)));

String json = "{findAndModify:\"collectionLog\", query:" + searchQuery.toString() + ", update: " + logDocument.toString() + ", upsert:true}";

try {
     getMongoTemplate().executeCommand(json);
} catch (Exception e) {
     System.out.println(e);
} 
```

我希望它对其他人有用！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:37:18.297

如您所见，MongoDB 无法提供此功能，因此必须在应用层解决。

默认情况下，Java 不支持任何像封顶集合一样工作的东西。但是[Apache Commons 项目的集合库有](http://commons.apache.org/proper/commons-collections/)[CircularFiFoBuffer](http://commons.apache.org/proper/commons-collections/javadocs/api-release/index.html)类，这似乎是您需要的。您使用最大尺寸创建它。当您添加一个新元素并且它已经达到最大尺寸时，最旧的元素将被丢弃。迭代顺序是从最旧的元素到最新的元素。

没有外部库的解决方法可以使用[LinkedList](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html)完成。使用 addFirst() 方法添加新元素，检查大小，当它大于所需的最大大小时，调用 removeLast()。

# php - MySQL 插入查询请求资源

> ID：16032249
> 
> 赞同：0
> 
> 时间：2013-04-16T08:31:08.750
> 
> 标签：php, mysql, parameters, insert, resources

我在 xampp 上运行以下代码（完美安装）。我已经用 mysqli 替换了 mysql 并重新排列了查询（先连接，稍后插入语句），但都无济于事。请帮忙。

错误：警告：mysql_query() 期望参数 2 是资源，第 19 行 C:\xampp\htdocs\test.php 中给出的字符串

```
<?php

    $hname = "localhost";
    $username = "root";
    $password = "";
    $db = "test";

    $connect = mysql_connect($hname, $username, $password, $db);

    if ($connect) {
        echo "Connected to Database <br /> <br />";

        $ins = "INSERT INTO 'test'.'testtable' (name) VALUES ('james')";

        //mysql_select_db ($connect, "users");

        if (mysql_query("INSERT INTO 'test'.'testtable' (name) VALUES ('james')", "mysql_connect($hname, $username, $password, $db)")) {
            echo "Values Entered Successfully. Your Account was created";
        } else {
            echo "Your Account was not created";

        }

    }   else {
            echo "Failed to Connect :(";
    }

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:33:36.683

`"mysql_connect($hname, $username, $password, $db)"`不应在引号中。您想调用函数并将结果作为参数传递，而不是传递字符串。

但是您确实应该将其称为单独的语句，以便检查错误：

```
$con = mysql_connect($hname, $username, $password) or die ("Could not connect to DB: ".mysql_error());
mysql_select_db($db, $con);

mysql_query("INSERT INTO 'test'.'testtable' (name) VALUES ('hunaid')", $con); 
```

您的代码的另一个问题是，成功`mysql_query`并不表明是否插入了任何行，它只是表明查询在语法上是有效的。您需要调用`mysql_affected_rows()`以了解插入了多少行。

你真的不应该使用 mysql 扩展，它们已被弃用。您应该使用 mysqli 或 PDO。这将允许您使用准备好的语句，以避免 SQL 注入问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:40:08.833

试试这个连接。

```
mysql_connect("localhost", "root", "password") or die(mysql_error());
    echo "Connected to MySQL<br />";
mysql_select_db("test") or die(mysql_error());

For the MYSQL INSERT try:

mysql_query("INSERT INTO testtable (name) VALUES('hunaid') ") 
or die(mysql_error()); 
```

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:41:03.673

mysql_connect中没有`$db`参数。删除它。

检查此链接以获取`mysql_connect`参数[http://php.net/manual/en/function.mysql-connect.php](http://php.net/manual/en/function.mysql-connect.php)

你为什么`mysql_connect($hname, $username, $password)`用 mysql_query 传递。您已经在 MySQL 查询之前创建了一个连接。如果未指定链接标识符，`mysql_connect()`则假定打开的最后一个链接。

但是，如果您特别喜欢将 connect 语句传递给查询，则应该将其作为资源传递。目前，您作为字符串传递。不要将连接语句括在引号中。

还要删除 db 和 table name 周围的单引号。

你需要的是：

```
if (mysql_query("INSERT INTO test.testtable (name) VALUES ('hunaid')", mysql_connect($hname, $username, $password))) {
    echo "Values Entered Successfully. Your Account was created";
} else {
   echo "Your Account was not created";

} 
```

但我认为这就足够了

```
if (mysql_query("INSERT INTO test.testtable (name) VALUES ('hunaid')")) {
    echo "Values Entered Successfully. Your Account was created";
} else {
   echo "Your Account was not created";
} 
```

无需指定连接语句，因为您已经在顶部创建了它。

此外，而不是在查询中指定数据库。在运行查询之前添加`mysql_select_db`以选择 dB。

所以完整的事情将是：

```
$hname = "localhost";
$username = "root";
$password = "";
$db = "test";

$connect = mysql_connect($hname, $username, $password);

if ($connect) {

    echo "Connected to Database <br /> <br />";

    mysql_select_db($db);

    $ins = "INSERT INTO testtable (name) VALUES ('james')";

    if (mysql_query($ins)) {
         echo "Values Entered Successfully. Your Account was created";
    } else {
        echo "Your Account was not created";

    }
}   else {
    echo "Failed to Connect :(";
} 
```

更多的是避免使用 mysql* 函数。

此扩展自 PHP 5.5.0 起已弃用，并将在未来删除。相反，应该使用[**MySQLi**](http://www.php.net/manual/en/book.mysqli.php)或[**PDO_MySQL扩展**](http://www.php.net/manual/en/ref.pdo-mysql.php)

希望这可以帮助你:)

# sql-server-2008 - How to copy a existing stored procedure ( .sql file ) into a MS SQL Server 2008R2 database with SQL Server Management Studio

> ID：16032253
> 
> 赞同：1
> 
> 时间：2013-04-16T08:31:23.640
> 
> 标签：sql-server-2008, stored-procedures, ssms

I had on another PC a database which did contain a stored procedure, I could see it in the object explorer of MS SQL Server Management Studio like in the picture below: ![enter image description here](https://i.stack.imgur.com/Pmzsf.png)

My web-application connected to the SQL database executes this procedure `sql.execute("dbo.calculateLiftUp")`

Now I switched everything to another location and the old Database is gone. I a new instance of a MS SQL Server 2008R2 database and I created a new database.

Now I need to add to this database `test_db`( which has no stored procedure in the moment ) my `dbo.calculateLiftUp` stored procedure from this file `calculateLiftUp.sql`

![enter image description here](https://i.stack.imgur.com/s8Gl7.png)

I worked with this manual: [http://msdn.microsoft.com/en-us/library/ms345415%28v=sql.105%29.aspx](http://msdn.microsoft.com/en-us/library/ms345415%28v=sql.105%29.aspx) I followed the steps, pasted the code from the `calculateLiftUp.sql` file into the new stored procedure and everything was possible until:

> 8.To create the stored procedure, on the Query menu, click Execute.

The problem is that the stored procedure wants to `ALTER PROCEDURE [dbo].[calculateLiftUp]` which is not possible because the stored procedure does not exist. But regarding to the manual you have to execute the stored procedure in order to create it.

![enter image description here](https://i.stack.imgur.com/aaoJY.png)

My question is: How can I add this file `calculateLiftUp.sql` as a stored procedure into a database.

# c# - Usage of in method call before parameters

> ID：16032260
> 
> 赞同：-4
> 
> 时间：2013-04-16T08:31:49.037
> 
> 标签：c#

I found this code at [CRM 2011: Custom Workflow Activity Output Parameters don´t show](https://stackoverflow.com/questions/16011966/crm-2011-custom-workflow-activity-output-parameters-dont-show) and wonder what `<string>` does here

```
entity.Name = AccountName.Get<string>(executionContext); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:34:11.280

它是一个泛型类型参数，可以做几件事。在此处阅读更多信息[http://msdn.microsoft.com/en-us/library/0zk36dx2(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/0zk36dx2(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:34:31.190

定义参数的`<string>`类型，这称为泛型。您可以在此处阅读有关泛型的更多信息（[http://msdn.microsoft.com/en-gb/library/512aeb7t(v=vs.80).aspx](http://msdn.microsoft.com/en-gb/library/512aeb7t%28v=vs.80%29.aspx)）

# jquery - jQuery Datepicker setDate 在 IE 6、7 中不起作用

> ID：16032262
> 
> 赞同：1
> 
> 时间：2013-04-16T08:32:07.553
> 
> 标签：jquery, jquery-ui, internet-explorer-7, datepicker, internet-explorer-6

我使用**IE 6**和**7**。我的项目包含 jQuery.js v. **1.9.1**和 jQuery UI v. **1.9.2**。

我有带有 jQ​​uery 日历字段的 html 页面：

```
...
<input type='text' id='Birthday'>
<!-- for only test purpose-->
<input type='button' style="width: 100px;" value="Get value" id='getValue'>
... 
```

和 javascipt 文件：

```
$(document).ready(function () {
     $('#Birthday').datepicker({showOn: "button"});
     $('#Birthday').datepicker("setDate", new Date(1930, 0, 1));
     $('#getValue').click(function(){
          alert($('#Birthday').datepicker("getDate"));
     });
}); 
```

然后我编辑输入文本框（没有打开日历对话框）并将日期设置为**1958 年**1 月 1 日，然后单击“获取值”按钮。警报框将显示 01/01/ **1930**（错误日期）。我尝试在`.datepicker("refresh")`之后使用命令，`"setDate"`但结果是一样的。

如何修复 jQuery UI setDate 函数以在 IE 6...10 中工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:21:00.690

我通过将`onSelect`参数添加到 Datepicker 来解决此问题：

```
$('#Birthday').datepicker({
   showOn: "button",
   onSelect: function()
   {
     // this will fire change on the underlying input
     $(this).change();
   }
}); 
```

此代码在 IE 6/7/8/9 中运行良好。

# c++ - 无法打开源文件“限制”

> ID：16032269
> 
> 赞同：0
> 
> 时间：2013-04-16T08:32:26.133
> 
> 标签：c++, c, iar

我正在做一个`C++`项目，现在将一些功能移植到`C`. 该项目在我使用`cpp`文件时运行良好，但是，当我`C`在项目中包含文件时，编译器无法找到某些标头`<limits>`，例如`<algorithm>`等。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T08:35:45.640

的 C 版本`<limits>`分别称为`<limits.h>`和`<float.h>`。它们的代码与 C++ 中的函数不兼容，`<limits>`但用途相同。

`<algorithm>`是纯 C++ 库头文件，不能在 C 程序中使用。如果您的代码依赖于 中的功能`<algorithm>`，则必须从头开始重写它们。

# sql - 查询加薪并存入数据库

> ID：16032273
> 
> 赞同：-1
> 
> 时间：2013-04-16T08:32:40.873
> 
> 标签：sql, sql-server-2008

我想选择一名员工并将他/她的工资提高 9.5% 并将更改保存在数据库中

查询如下..我在 SQL server 2008 中使用了两个相关的表 Employee_Tbl 和 Job_Tbl

```
SELECT  Employee_Tbl.EmployeeID, 
        Employee_Tbl.Salary,(Employee_Tbl.Salary*5/100)+Employee_Tbl.Salary as       
        SalaryIncreaseByFivePercent
FROM    Employee_Tbl INNER JOIN
                         Job_Tbl ON Employee_Tbl.JobTitle = Job_Tbl.JobTitle 
```

我面临使用相同查询在数据库中保存额外列 SalaryIncreaseByFivePercent 的问题。有没有人可以告诉？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:42:17.490

你想在`UPDATE`这里使用和声明。像下面这样的东西可以解决问题

```
UPDATE Emplotee_Tbl 
SET Employee_Tbl.Salary = (Employee_Tbl.Salary*5/100) + Employee_Tbl.Salary 
FROM Employee_Tbl AS et 
    INNER JOIN Job_Tbl AS jt 
        ON et.JobTitle = jt.JobTitle 
WHERE Employee_Tbl.EmployeeLastName = "Burns";
GO 
```

我希望这有帮助。

* * *

编辑。要创建一个名为的新列`SalaryIncreaseByFivePercent`并在其中插入更新后的薪水，您只需使用创建新列

```
ALTER TABLE table_name
ADD column_name datatype;
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:56:20.970

我不可能在选择查询中添加一列

首先添加一个新列来存储浮动数据类型的增加薪水`increasedSalary`。

```
ALTER TABLE Employee_Tbl
ADD increasedSalary float 
```

然后更新表

```
UPDATE Emplotee_Tbl 
SET increasedSalary = (Employee_Tbl.Salary*5/100) + Employee_Tbl.Salary
FROM Employee_Tbl  t 
   INNER JOIN Job_Tbl  j 
ON t.JobTitle = j.JobTitle 
```

# vb.net - 如何在 vb.net 2010 中打印表格？

> ID：16032275
> 
> 赞同：-1
> 
> 时间：2013-04-16T08:32:45.283
> 
> 标签：vb.net, forms, printing

我想打印一个带有可滚动 datagridview 表的表单。但是我在 *.docx 中得到了一个空文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:49:16.703

来自[MSDN - PrintForm 组件 (Visual Basic)](http://msdn.microsoft.com/en-us/library/bb690938.aspx)

```
' For Direct Printing to a Printer
Dim pf As New PrintForm
pf.Form = Me
pf.PrintAction = PrintToPrinter
pf.Print() 
```

有关“打印到文件”选项，请参阅[MSDN - 使用 PrintForm 组件打印表单。](http://msdn.microsoft.com/en-us/library/bb629268%28v=vs.90%29.aspx)

# html5-audio - 在 HTML5 音频播放器中记录/计算播放次数

> ID：16032278
> 
> 赞同：0
> 
> 时间：2013-04-16T08:32:54.693
> 
> 标签：html5-audio

我正在使用[audio.js](http://kolber.github.io/audiojs/)播放器。是否可以记录/计算播放次数？
这样我就可以显示用户播放特定歌曲的次数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:37:38.857

不确定实际代码是什么，但看起来您可以使用`trackEnded`事件回调。如果向其添加事件侦听器，则可以增加`playCount`可以传递给 localStorage 或数据存储的 a。

# javascript - 更新后焦点丢失

> ID：16032284
> 
> 赞同：3
> 
> 时间：2013-04-16T08:33:10.700
> 
> 标签：javascript, jsf, jquery, primefaces

我有两个输入的表格，其中一个值取决于另一个值。当用户更改一个字段时，我需要重新计算值（这是在 setter 方法中完成的）并更新表单。

这是我的例子：

```
<h:form>
<p:inputText id="price1" value="#{bean.price1}"}">
    <p:ajax event="blur" update="@this, price2"/>
</p:inputText>
<p:inputText id="price2" value="#{bean.price2}">
    <p:ajax event="blur" update="@this, price1"/>
</p:inputText>
</h:form> 
```

问题是更新焦点后丢失，例如，如果用户使用 Tab 键从 price1 移动到 price2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T14:47:09.813

你可以试试这个：

```
<h:form id="fm">
    <script type="text/javascript">
        function test(){
            $(PrimeFaces.escapeClientId('fm:price2')).focus();
        }
    </script>
    <p:inputText id="price1" value="#{bean.price1}" >
        <p:ajax event="blur" oncomplete="test();" update="@this, price2"                listener="#{bean.hand}"/>
    </p:inputText>
    <p:inputText widgetVar="xxx" id="price2" value="#{bean.price2}">
        <p:ajax event="blur" update="@this, price1"/>
    </p:inputText>
</h:form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T09:06:46.147

*   为您的输入设置 widgetVar
*   对于 p:ajax，设置 oncomplete="PF('YOUR_WIDGET_VAR_NAME').jq.focus();"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:35:56.703

```
$("#price2").focusout(function(){
    $("#price1").focus();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-28T16:27:30.163

这是一个非常烦人的问题，它与 JSF 执行部分渲染的方式有关。它替换了重新渲染的整个元素，导致焦点丢失。

解决这个问题的唯一方法是存储焦点保持元素的 tabIndex 并在 DOM 更新后再次设置焦点。

[您可以在这篇博文JSF 2 AJAX focus issues](http://www.knitelius.com/2014/07/15/keeping-focus-on-element-with-jsf-2-ajax-render/)中找到有关该解决方案的更多详细信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-09T14:33:11.613

这篇有用的帖子展示了如何在 backing bean 中设置焦点；授予它打破了bean / ui之间的分离，但它确实允许您在需要时添加一些逻辑到您想要设置焦点的位置：

[http://jsfcorner.blogspot.com/2015/06/focus-html-element-after-ajax-call-with.html](http://jsfcorner.blogspot.com/2015/06/focus-html-element-after-ajax-call-with.html)

tldr： `RequestContext.getCurrentInstance().execute("PrimeFaces.focus('frm:additionalInfo');");`

# .net - System.Text.Encoding 值

> ID：16032286
> 
> 赞同：0
> 
> 时间：2013-04-16T08:33:14.280
> 
> 标签：.net, vb.net, visual-studio, streamwriter, streamwriter.write

我收到可选参数的错误，它说“需要常量表达式”

我该如何解决这个问题？

```
Private Function Write_Text_To_File(ByVal Text_File As String, _
                              ByVal Text As String, _
                              ByVal Append_Text As Boolean, _
                              Optional Encoding As System.Text.Encoding = System.Text.Encoding.Default) As Boolean

    Try : Using TextFile As New IO.StreamWriter(Text_File, Append_Text, Encoding) : TextFile.WriteLine(Text) : End Using
        Return True
    Catch ex As Exception
        'Return False
        Throw New Exception(ex.Message)
    End Try

End Function 
```

> 更新：

解决方案

```
#Region " Write Text to File "

' [ Write Text to File Function ]
'
' // By Elektro H@cker
'
' Examples :
'
' Write_Text_To_File("C:\Test.txt", "Text", False)
' Write_Text_To_File("C:\Test.txt", "Text", True, System.Text.Encoding.UTF8)

Private Function Write_Text_To_File(ByVal Text_File As String, _
                              ByVal Text As String, _
                              ByVal Append_Text As Boolean, _
                              Optional Encoding As System.Text.Encoding = Nothing) As Boolean
    Try
        If Encoding Is Nothing Then Encoding = System.Text.Encoding.Default
        Using TextFile As New IO.StreamWriter(Text_File, Append_Text, Encoding) : TextFile.WriteLine(Text) : End Using
        Return True
    Catch ex As Exception
        'Return False
        Throw New Exception(ex.Message)
    End Try

End Function

#End Region 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:35:09.723

> 我该如何解决这个问题？

好吧，您根本*不能*将`Encoding.Default`其用作默认参数值。

您可以做的是`Nothing`用作默认参数值，并且只需：

```
If Encoding Is Nothing Then
    Encoding = System.Text.Encoding.Default
End If 
```

请注意，这确实意味着您不能使用`Nothing`其他含义。

另一种选择是只使用重载 - 提供一个没有编码参数的版本，它只是调用*带有*编码参数的版本，传入`Encoding.Default`.

另外两点需要注意：

*   您的参数名称不遵循[.NET 命名约定](http://msdn.microsoft.com/en-us/library/vstudio/ms229002.aspx)；他们应该是驼峰式的
*   `Encoding.Default`通常是一个*不好*的默认使用（并且命名不佳）。`Encoding.UTF8`如果您不指定一个，.NET 中的几乎所有内容实际上都用作默认编码；我会敦促你效仿。

# qt - QGraphicsView 上的 QwtPlot 调整大小

> ID：16032287
> 
> 赞同：0
> 
> 时间：2013-04-16T08:33:16.310
> 
> 标签：qt, qwt

我有一个带 qwtplot 的 TimeGraph 类。此 qwtplot 显示在 QGraphicsView 上。qwtplot 有方法 resize en resizeEvent 但我不明白如何使用它们。

```
TimeGraph::TimeGraph(QWidget* parent, int in_display_time, QwtText title)
{
    display_time = in_display_time;

    graph.setParent(parent);
    graph.setFixedSize(parent->width() - 20, parent->height() - 20);
    graph.move(QPoint(10, 10));

    grid.attach(&graph);
    curve.attach(&graph);
    curve.setPen(QPen(Qt::red, 2));
    curve.setRenderHint(QwtPlotItem::RenderAntialiased);

    if (title.text() != NULL)
        graph.setTitle(title);

    graph.setAxisScaleDraw(QwtPlot::xBottom, new TimeScaleDraw(QDateTime(QDate(0, 0, 0), QTime(0, 0, 0, 0))));
    graph.setAxisScale(QwtPlot::xBottom, - display_time, 0);
    graph.setAxisLabelRotation(QwtPlot::xBottom, -20.0);
    graph.setAxisLabelAlignment(QwtPlot::xBottom, Qt::AlignLeft | Qt::AlignBottom);

    graph.show();
} 
```

和标题

```
struct Data { QVector<double> x; QVector<double> y;};

class TimeGraph
{
private :
    QwtPlot graph;
    QwtPlotCurve curve;
    QwtPlotGrid grid;
    Data data;
    int display_time;

public:
    TimeGraph(QWidget* parent, int in_display_time, QwtText title = QwtText());
    void addPoint(QDateTime date, double y);
    void resize(QRect zone);
}; 
```

我创建我的图表是这样的：

> graph_O2 = new TimeGraph(ui->graphicsView_graph_o2, 120);

当 graphicsView 被调整大小时，我会调整自己的图形大小。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:03:03.557

我推荐的最佳方法是遵循 - 制作一个包含除 qwt 控件之外的所有内容的 UI。对于 qwt 控制，只需使用 Widget 或 Frame（根据您的喜好）保留一个空间。您可以设置所需的所有类型的尺寸约束）。您可以从预览中检查它。将 Widget/Frame 名称设置为您喜欢的名称，例如 m_fmQwtPlotContainer。（您可以在 QtDesigner - objectName 中执行此操作）。然后你可以写这样的东西：

```
QWidget * pParent = findChild<QWidget*>("m_fmQwtPlotContainer"); 
QVBoxLayout * pLayout = new QVBoxLayout(pParent); 
pParent->setLayout( pLayout ); 
..then your code using pParent as a parent for your widget..
TimeGraph * pGraph = new TimeGraph( pParent );
pLayout->insertItem( pGraph ); 
```

这样您就可以将带有 TimeGraph 的表单插入您喜欢的位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:58:03.300

我已经测试了我的类 TimeGraph 的两种方法

> 类 TimeGraph : 公共 QWidget { ... }

和

> TimeGraph::TimeGraph(int in_display_time, QwtText title) : QWidget() { display_time = in_display_time;
> 
> ```
> graph.setParent(this);
> //graph.setMaximumSize(parent->width() - 20, parent->height() - 20);
> graph.setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding); 
> ```
> 
> ... }

和 ：

> ui->widget_graph_O2 = new TimeGraph(120);

该图未显示，因为它没有大小。

如果我测试第二种方法

> 类时间图 {...}

和

> TimeGraph::TimeGraph(QWidget* parent, int in_display_time, QwtText title) { display_time = in_display_time;
> 
> ```
> graph.setParent(parent);
> //graph.setMaximumSize(parent->width() - 20, parent->height() - 20);
> graph.setSizePolicy(QSizePolicy::Preferred, QSizePolicy::Preferred); ... } 
> ```

和

> graph_O2 = new TimeGraph(ui->widget_graph_four, 120);

图表不随框架调整大小。

我忘记了什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:19:29.867

真的*必须*将 qwt plot 放在 qgraphicsview 之上吗？我有一段时间没有使用 Qwt，但是 AFAIK 所有的绘制都是在paintEvent 中使用直接绘制完成的。（这是它如此之快的原因之一）。在 QGraphicsView 上使用 Qwt 控件的最正确方法（由我决定）是添加带有忽略转换标志的小部件项。关于调整大小，如果您将 Qwt 放在常用小部件中，它将自行处理所有调整大小。如果您有一些具有自定义调整大小的复杂结构，您应该在父小部件上处理调整大小事件，如果父类不可用，则通过 eventFilter 处理。

# nhibernate - 使用 NHibernate 的 QueryOver API 的嵌套集合查询

> ID：16032288
> 
> 赞同：0
> 
> 时间：2013-04-16T08:33:17.953
> 
> 标签：nhibernate, queryover, nested-sets

我使用[嵌套集模型](http://en.wikipedia.org/wiki/Nested_set_model)存储类别的层次结构，也就是说，每个类别都有一个`Left`和一个`Right`值，每个类别都有一个比任何父项更高`Left`和更小的值。`Right`

我想查询属于某个类别（包括该类别）的子类别的所有类别。也就是说，我需要从给定类别开始的整个子树。

如果子树的根 id 由 @catId 给出，我可以使用以下 SQL 来获取子树：

```
select * 
    from Category c, 
    (select [Left], [Right] from Category where Id = @catId) as t
where c.[Left] >= t.[Left] 
 and c.[Right] <= t.[Right] 
```

现在我正在尝试使用 NHibernate 和 QueryOver API 来做类似的事情。那是我有点卡住的地方。

如果我把它分成两个查询，这很容易：

```
var cat = session.Get<Category>(catId);

var matches = session.QueryOver<Category>()
                     .Where(x => x.Left >= cat.Left && x.Right <= cat.Right)
                     .List(); 
```

但这是两个查询 - 一个会更好。我试图提出一个使用子查询的解决方案，虽然这在技术上可行，但查询可能不是最佳的，因为现在执行了两个子查询而不是一个。

```
var matches = session.QueryOver<Category>()
                     .WithSubquery.WhereProperty(x => x.Left)
                        .Ge(QueryOver.Of<Category>()
                          .Where(c => c.Id == catId)
                          .Select(c => c.Left))
                      .WithSubquery.WhereProperty(x => x.Right)
                        .Le(QueryOver.Of<Category>()
                           .Where(c => c.Id == catId)
                           .Select(c => c.Right)).List(); 
```

（除此之外，并非所有 DBMS 都支持返回标量值的子查询，例如 SqlServerCE，但这是另一个问题）

有没有更好的方法来实现这一目标？如有必要，我可以针对这种情况切换查询 API。因此，如果 eq 在 HQL 中有一种巧妙的方法，我可以接受。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:08:43.773

我认为获得一个包含嵌套集中树的子树将类似于（SQL）：-

```
SELECT 
    node.*
FROM 
    Category AS node,
    Category AS parent
WHERE 
    node.left BETWEEN parent.left AND parent.right
    AND parent.TreeID = @catID
ORDER BY 
    node.left; 
```

这将使用 QueryOver (AFAIK) 中不可能的 CROSS JOIN

但是，在[HQL](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-from)甚至更好的[linq](https://stackoverflow.com/questions/9643934/crossjoin-using-queryover)中都是可能的。

# java - 如何在 Java 中同步 Thread.sleep 和 Thread.interrupt？

> ID：16032289
> 
> 赞同：0
> 
> 时间：2013-04-16T08:33:21.760
> 
> 标签：java, multithreading, interrupt, thread-sleep

我想编写一个测试来在线程执行可中断调用时中断它，例如`Thread.sleep`.

我想同步两个线程：一个线程调用`Thread.sleep`，另一个等待第一个线程开始休眠并用`Thread.interrupt`.

如何确保第二个线程在开始睡眠*后中断第一个线程？*可能吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T08:39:26.977

您无法确定，因为例如操作系统可能决定在`Thread.sleep`语句之前暂停第一个线程。在实践中，如果您也可以在第二个线程中使用小睡眠以及同步，那应该没问题：

```
final CountdownLatch start = new CountdownLatch(1);

final Thread t1 = new Thread (new Runnable () {
    public void run() {
        start.await();
        Thread.sleep(1000);
    }
});

Thread t2 = new Thread (new Runnable () {
    public void run() {
        start.await();
        Thread.sleep(100); //wait a little to make sure that t1 is asleep
        t1.interrupt();
    }
});

t1.start();
t2.start();

Thread.sleep(100); //wait to make sure both threads are started
start.countdown(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T08:42:27.507

使用同步器并在从休眠线程休眠之前通知中断线程其锁定。引入一个非常小的延迟（远小于睡眠线程的睡眠时间），唤醒后在睡眠线程上发出中断。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T09:48:55.313

为什么在调用 Thread.sleep 后要中断？中断的产生使得它的效果是相同的，不管它的调用时间是什么，它是在调用 sleep() 之前还是之后。你只想测试一下吗？然后循环轮询，直到线程进入[TIMED_WAITING](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.State.html#TIMED_WAITING)状态：

```
t1.start();
while (t1.getState()!= Thread.State.TIMED_WAITING) {
   Thread.sleep(10);
}
t1.interrupt(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-10T14:17:22.060

为保证 2 个线程相继启动，您需要使用

```
join() 
```

例如（忽略处理异常）：

```
Thread t1 = new Thread();
Thread t2 = new Thread();

t1.start();
t2.join();
t2.start(); 
```

我没有测试代码，但这里是更多信息的文档： [https ://docs.oracle.com/javase/tutorial/essential/concurrency/join.html](https://docs.oracle.com/javase/tutorial/essential/concurrency/join.html)

# php - 用于提取和解析数据并将其保存到数据库的网络爬虫

> ID：16032290
> 
> 赞同：0
> 
> 时间：2013-04-16T08:33:22.773
> 
> 标签：php, web-crawler

我希望将某个网站的内容复制到本地数据库中，以进行进一步的个性化搜索。我知道我必须使用爬虫，并且我找到了一些关于 scrapy 的很好的参考资料。

我的问题是你知道任何用 PHP 编写的好的爬虫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:35:49.073

我会推荐[史努比](http://sourceforge.net/projects/snoopy/)。试一试，让我们知道您的想法！

# java - 以编程方式从 Android 连接 FTP 服务器

> ID：16032292
> 
> 赞同：0
> 
> 时间：2013-04-16T08:33:31.547
> 
> 标签：java, android, eclipse

我正在尝试为 android 创建 ftp 客户端，但我没有连接服务器 [https://www.drivehq.com/](https://www.drivehq.com/)是此应用程序的主机。库是“org.apache.commons.net_2.0.0.v200905272248 ( 1).jar"

下面是我的代码。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
tv = (TextView) findViewById(R.id.tv);
ftpConnect("www.drivehq.com","uname","password",21);
}
public boolean ftpConnect(String host, String username, String password,int port) {
try {
mFTPClient = new FTPClient();
mFTPClient.connect(InetAddress.getByName(host));
if (FTPReply.isPositiveCompletion(mFTPClient.getReplyCode())) {
//boolean status = mFTPClient.login(username, password);
mFTPClient.setFileType(FTP.BINARY_FILE_TYPE);
mFTPClient.enterLocalPassiveMode();
tv.setText("Connected");
//return true;//status;
}
tv.setText("not Connected");
} catch (Exception e) {
tv.setText(""+e);
}
return false;
} 
```

它只是在 TextView 中显示空白屏幕。我还尝试提供主机名，例如[https://www.drivehq.com/](https://www.drivehq.com/)和 www.drivehq.com/ 和[http://www.drivehq.com/](http://www.drivehq.com/) 当我连接到 ftp 服务器时，如何显示它的文件夹等意味着使用webview？

谢谢。

# sql - vb.net中的sql where子句

> ID：16032296
> 
> 赞同：1
> 
> 时间：2013-04-16T08:33:41.573
> 
> 标签：sql, vb.net

这是我使用 sql 查询分析器的工作 sql 语法，它显示我想要的记录

```
SELECT     OE_Category, OE_ID
FROM         tblOfficeEquipmentProfile
WHERE     (OE_ID = 'dxdxdx') 
```

在将它用于 vb.net 时：

```
 Public Sub DisplayCategory()
    'based on oe_id'
    Dim sqlconn As New SqlClient.SqlConnection
    sqlconn.ConnectionString = "server = SKPI-APPS1;" & _
    "Database = EOEMS;integrated security=true"

    Dim sqlcommand As New SqlCommand

    sqlconn.Open()
    Dim da As New SqlDataAdapter("SELECT OE_Category, OE_ID FROM tblOfficeEquipmentProfile WHERE OE_ID = '" & txtOEID.Text & "'", sqlconn)
    Dim dt As New DataTable
    da.Fill(dt)
    cmbCategory.DataSource = dt
    cmbCategory.ValueMember = "CAT_ID"
    cmbCategory.DisplayMember = "CAT_Name"
    sqlconn.Close()
End Sub 
```

发生错误：

> 无法绑定到新的显示成员。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T08:37:38.140

您的选择`OE_Category, OE_ID` 和绑定`CAT_ID`和`CAT_Name`

改为尝试：

```
cmbCategory.ValueMember = "OE_ID"
cmbCategory.DisplayMember = "OE_Category" 
```

你也不绑定控件

# php - 如何在不使用捆绑软件的情况下使用 Gaufrette 将图像上传并存储到 S3 中？

> ID：16032297
> 
> 赞同：1
> 
> 时间：2013-04-16T08:33:45.357
> 
> 标签：php, amazon-web-services, amazon-s3

我发现了这个[http://knplabs.com/blog/give-your-projects-a-gaufrette](http://knplabs.com/blog/give-your-projects-a-gaufrette)

它提供的代码示例是

```
<?php

$amazon = new AmazonS3('myKey', 'mySecretKey', 'myToken');
$adapter = new Gaufrette\Adapter\AmazonS3($amazon, 'my_bucket');
$filesystem = new Gaufrette\Filesystem($adapter);

if ( ! $filesystem->has('foo')) {
    $filesystem->write('foo', 'Some content');
}

echo $filesystem->read('foo'); 
```

这似乎不是在写入图像文件。

我还发现[Gaufrette 上传图片并存储在 AmazonS3](https://stackoverflow.com/questions/14591076/gaufrette-upload-image-and-store-in-amazons3)

但答案似乎倾向于为 Symfony 使用 Gaufrette 捆绑包。

我没有使用 Symfony，所以我希望有一个很好的例子可以用来通过 Gaufrette 将图像上传到 S3。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T07:19:27.863

您的示例写入文本“一些内容”。取而代之的是，您可以放置​​图像内容。

```
$imageData = file_get_contents('/tmpupload/picture.jpeg');
$filesystem->write('foo', $imageData); 
```

您还应该将图像 mime 类型写入 amazon/gaufrette。如果我没记错的话，这应该有效：

```
$filesystem->write('foo', $imageData, ['content-type' => 'image/jpeg']); 
```

# android - 关于 AlertDialog 显示

> ID：16032300
> 
> 赞同：0
> 
> 时间：2013-04-16T08:33:46.837
> 
> 标签：android, android-alertdialog

我想在屏幕底部显示 AlertDialog，但在 AlertDialog 的底部和屏幕底部之间有一个空格。
我的代码如下：

```
private void editor(Context context){
   AlertDialog.Builder builder = new AlertDialog.Builder(context);    
   View view = addLayout(R.layout.edit_layout); 
   final AlertDialog myDialog = builder.create();
   Window window = myDialog.getWindow();
   myDialog.setView(view);
   myDialog.show();
   window.setGravity(Gravity.BOTTOM);// set the AlertDialog in screen the bottom.
} 
```

那么如何在没有空格的情况下在屏幕底部显示 AlertDialog 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:28:23.120

使用此代码希望它会有所帮助。

```
 AlertDialog dialog = builder.create();
       dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
       WindowManager.LayoutParams wmlp = dialog.getWindow().getAttributes();

         wmlp.gravity = Gravity.Bottom | Gravity.LEFT;
        wmlp.x = 100;   //x position
        wmlp.y = 100;   //y position

         dialog.show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:53:38.910

```
private void editor(Context context, int theme, int customLayout) {
    Dialog builder = new Dialog(context, theme);//R.style.customDialog
    builder.setContentView(customLayout);
    builder.show()
} 
```

在文件中

> res/values/styles.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">

<style name="customDialog" parent="@android:style/Theme.Dialog">
    <item name="android:windowIsFloating">false</item>
</style>

</resources> 
```

在您的布局中将主要布局重力设置为：

> android:gravity="bottom|center_horizo​​ntal"

* * *

为了使这个 customDialog 样式的间距，将 ie`android:padding`设置为 10dp

附言。没有测试，但它应该可以工作，在任何问题上都可以告诉我

# javascript - Jquery Knockout - 在数据绑定属性中获取元素实例

> ID：16032307
> 
> 赞同：3
> 
> 时间：2013-04-16T08:34:16.347
> 
> 标签：javascript, jquery, knockout.js

我有一个`select`元素，我使用 Jquery Knockout 绑定 css 类。

我想直接从`data-bind`属性访问当前元素实例，而不在其中创建属性`ViewModel`（因为我有许多`select`共享相同功能的元素）

这可能吗？

```
<select id="select1" data-bind="css: { 'no-value-selected': $item.val() == '' }">
    <option value="">[Select a value]</option>
    <option value="1">1</option>
    <option value="2">2</option>
</select> 
```

**编辑** 使用 ViewModel 来实现这一点（我想避免的）

```
function ViewModel() {
    this.select1HasNoValueSelected = ko.computed(function () {
        return $("#select1").val() == '';
    }, this);
};
var viewModel = new ViewModel();
ko.applyBindings(viewModel);

<select id="select1" data-bind="css: { 'no-value-selected': select1HasNoValueSelected }"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:09:36.147

您在`css`绑定方面走错了路，因为如果您不使用可观察对象，如果您的选择值发生变化，它将不会更新您的类。

但是，您可以（错过）使用`event`绑定并订阅更改事件：

```
<select id="select1" class="no-value-selected" data-bind="event: { 'change': 
function() { $($element).val() == '' ? 
             $($element).addClass('no-value-selected') : 
             $($element).removeClass('no-value-selected') } }">
    <option value="">[Select a value]</option>
    <option value="1">1</option>
    <option value="2">2</option>
</select> 
```

演示[JSFiddle。](http://jsfiddle.net/Wvfnu/)（第二个下拉菜单）

但最好的解决方案是不与 KnockOut 对抗，并为视图模型上的每个选择提供属性：

```
function ViewModel() {    
    this.select1Value = ko.observable()
};

<select id="select1" data-bind="css: { 'no-value-selected': !select1Value() }, 
                                value: select1Value">
    <option value="">[Select a value]</option>
    <option value="1">1</option>
    <option value="2">2</option>
</select> 
```

演示[JSFiddle。](http://jsfiddle.net/Wvfnu/)（第三个下拉菜单）

或者根本不要将 Kncokout 用于此功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T08:42:07.050

您可以尝试使用`$element`而不是`$item`：

```
<select data-bind="css: { 'no-value-selected': $element.val() == '' }">
    <option value="">[Select a value]</option>
    <option value="1">1</option>
    <option value="2">2</option>
</select> 
```

文档： http: [//knockoutjs.com/documentation/binding-context.html](http://knockoutjs.com/documentation/binding-context.html)

# dojo - 将 Dojos EnhancedGrid 与客户端插件一起使用

> ID：16032309
> 
> 赞同：2
> 
> 时间：2013-04-16T08:34:23.640
> 
> 标签：dojo, dgrid

我有一个带有 JsonRestStore 绑定到后端 Rest API 的 EnhancedGrid。这就是我的代码：

```
 <script>

        /**
        * Creates Dojo Store.
        */

        require(["dojo/store/JsonRest"], function (JsonRest) {
            myStore = new JsonRest({ handleAs: 'json', target: 
                'https://api.twitter.com/1/statuses/user_timeline.json'+
                '?trim_user=true&screen_name=twitter&count=100' });
        });

        var layout = [[
            { name: 'Created at', field: 'created_at', datatype: 'string', 
                width: '100px' },
            { name: 'Message', field: 'text', datatype: 'string', 
                width: 'auto', autoComplete: true },
            { name: 'Source', field: 'source', datatype: 'string', 
                width: '200px', filterable: false },
            { name: 'Retweets', field: 'retweet_count', datatype: 'number', 
                width: '100px', disabledConditions: ["startsWith", "notStartsWith"] }
        ]];

        /**
        * Creates Dojo EnhancedGrid.
        */

        require(["dojox/grid/DataGrid",
            "dojox/grid/EnhancedGrid",
            "dojo/data/ObjectStore",
            "dojox/grid/enhanced/plugins/Filter",
            "dojox/grid/enhanced/plugins/NestedSorting",
            "dojox/grid/enhanced/plugins/Pagination", 
            "dojo/domReady!"
        ], function (DataGrid, EnhancedGrid, ObjectStore) {

            var grid = new EnhancedGrid({
                id: 'grid',
                store: dataStore = new ObjectStore({ objectStore: myStore }),
                structure: layout,
                //clientSort: "true",
                rowsPerPage: 5,
                rowSelector: "20px",
                selectionMode: "single",
                plugins: {
                    filter: {
                        ruleCount: 5,
                        itemsName: "Tweets"
                    },
                    nestedSorting: true,
                    pagination: {}
                }
            });

            grid.placeAt('grid5');
            grid.startup();  
        });
    </script>
    <div id="grid5"></div> 
```

如您所见，我为我的网格使用了几个插件。过滤器插件工作正常。为此，我只使用客户端过滤。但是插件分页和嵌套排序不起作用。

排序：单击箭头“asc”或“desc”不会更改顺序。分页：导航到接下来的 25 个条目仍然包含与之前的页面相同的 25 个条目。

对于这两个插件，点击后似乎只是从后端加载新的 json 并再次呈现。网络流量也表明了这一点。有没有办法让它在客户端工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:52:40.737

您的 REST 服务必须支持插件所需的所有操作！如果您的服务支持这些操作并且仍然无法正常工作，那么插件从您的 REST API 访问数据的方式一定有问题。

如果您单击排序/分页元素，请使用诸如 firebug 之类的东西运行您的应用程序并查看会发生什么（= 从服务器请求的内容）。如果服务器响应没有排序或分页，那么您将必须配置插件，以便他们知道如何创建有效的 url（= 一个实际执行您期望的 url）。

另一种方法是在您的服务器上创建一些东西，将 dojo 请求映射到有效的 REST API 请求。

# iphone - 如何从 iphone 的数据库中仅检索 3imagepaths 或 id

> ID：16032310
> 
> 赞同：0
> 
> 时间：2013-04-16T08:34:30.237
> 
> 标签：iphone, ios

我是电话编程的新手。我将图像路径和音频路径存储在数据库中。现在我想检索图像路径表单数据库，我得到所有图像路径，但我只想检索 3 个图像路径，剩下的东西我想在其他地方使用。任何人都可以告诉我如何只检索 3 个图像路径表单数据库 下面的代码用于从数据库中检索图像路径

```
 NSString *docsDir;
                NSArray *dirPaths;

                // Get the documents directory
                dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

                docsDir = [dirPaths objectAtIndex:0];
                arrayy=[[NSMutableArray alloc]init];
                arrayy2=[[NSMutableArray alloc]init];
                arrayy1=[[NSMutableArray alloc]init];
                // array2=[[NSMutableArray alloc]init];

                // Build the path to the database file
                databasePath =  [docsDir stringByAppendingPathComponent: @"Taukydaataaa.db"];
                //  NSLog(@"%@",databasePath);
                NSFileManager *fn=[NSFileManager defaultManager];
                NSError *error;
                BOOL success=[fn fileExistsAtPath:databasePath];

                if(!success) {

                    NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"Taukydaataaa.db"];
                    success = [fn copyItemAtPath:defaultDBPath toPath:databasePath error:&error];
                }

                const char *dbpath = [databasePath UTF8String];

                sqlite3_stmt    *statement;

                if (sqlite3_open(dbpath, &contactDB) == SQLITE_OK)
                {

  NSString *querySQL = [NSString stringWithFormat: @" select t.imagepath,t.audiopath,t.id from blauky b,taukyblauky tb,tauky t where tb.blaukyid=b.id and tb.taukyid=t.id and tb.blaukyid=1"];

                    const char *query_stmt = [querySQL UTF8String];

                    if (sqlite3_prepare_v2(contactDB, query_stmt, -1, &statement, NULL) == SQLITE_OK)
                    {

                        while(sqlite3_step(statement) == SQLITE_ROW)
                        {

                             email_idField = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement,2)];

                          email_idField1 = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement,1)];
                            email_idField2 = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement,0)];

                            //       NSString *email_idField2 = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement,2)];
                            NSLog(@"ASlma");
                            NSLog(@"%@",email_idField);

                            NSLog(@"%@",email_idField1);
                            NSLog(@"%@",email_idField2);
                            [arrayy addObject:email_idField];
                            [arrayy1 addObject:email_idField1];
                            [arrayy2 addObject:email_idField2];
                            NSLog(@"%@",arrayy);
                            NSLog(@"%@",arrayy1);
                            NSLog(@"%@",arrayy2);
                            NSLog(@"Iam here");

                            }
                        }
                    }
                } 
```

谢谢阿斯拉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:36:42.680

您可以添加`LIMIT 3`到您的查询。

# node.js - Mongoose：如何查找和更新许多

> ID：16032313
> 
> 赞同：0
> 
> 时间：2013-04-16T08:34:31.233
> 
> 标签：node.js, mongodb, express, mongoose

我是整个 JS/Mongo 的新手，并试图在这里找到最好的方法。

基本上我有一组项目，我想将其中的一部分锁定给特定用户。所以一步一步

1.  找到 X 个解锁物品 ( `lock=''`)
2.  设置字段`lock='user.name'`
3.  向用户显示项目

好的，这里可能会有一些竞争条件问题，但暂时，我们不要担心。主要问题是一旦完成，用户 2 应该无法找到/锁定相同的项目。

在 Mongoose 文档中，我发现[findOneAndUpdate](http://mongoosejs.com/docs/api.html#model_Model.findOneAndUpdate)似乎完全符合我的要求，除了它只处理一项。

这里有哪些选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-17T07:05:16.850

有 updateMany，看看[mongoose docs](http://mongoosejs.com/docs/api.html#model_Model.updateMany)和[mongo docs](https://docs.mongodb.com/manual/reference/method/db.collection.updateMany/)。

```
 db.collection.updateMany(
   <filter>,
   <update>,
   {
     upsert: <boolean>,
     writeConcern: <document>,
     collation: <document>
   }
) 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-04-16T08:53:00.310

如果您正在搜索的 api 支持不可用，您可以试试这个。首先列出与您的条件匹配的所有数据，然后在过滤后的数据上应用更新。

我举一个例子：

```
 Query query= query.addCriteria(Criteria.where("page_id").is(new Long("1234")));    
     List<PageWidgetDetails> pageWidgetDetailsList = mongo.find(query,    PageWidgetDetails.class);

              for (PageWidgetDetails pageWidgetDetailsObj : pageWidgetDetailsList) {
                    String widget_id=pageWidgetDetailsObj.getWidgetId();
                    query=new Query(Criteria.where("widget_id").is(widget_id));
                      update=new Update();
                     update.set("widget_description", "blah blah ....");

                     mongo.upsert(query, update, PageWidgetDetails.class);

    } 
```

# perl - 使用 perl 脚本执行一个简单的 API

> ID：16032322
> 
> 赞同：1
> 
> 时间：2013-04-16T08:35:08.253
> 
> 标签：perl, api, http, url, https

我正在尝试使用 perl 脚本执行 API。我处于初始阶段，下面是我得到的简单脚本，它不起作用。我使用*get*命令来执行 API。但我不确定它是否会起作用。事实上，我找不到 get 命令不会起作用，因为我在这段代码中遇到了不同的错误。这个脚本给了我如下错误

```
Use of uninitialized value $api_content in print at igmp.pl line 11. 
```

这是脚本。

```
#!/usr/bin/perl   
use strict; 
use warnings;  
use LWP::Simple;  

my $api_content;

my $api = 'https://admin:Macin123@12.34.45.67/set_param?init.snmp_ver=3&mib.save'; 
$api_content = get($api); 

print $api_content; 
```

如果有一个命令对执行这个简单的 API 有用，请告诉我。基本上我需要将snmp的值设置为3并保存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:41:14.173

我认为你的问题是，你需要一个 LWP Objekt

```
my $ua = LWP::UserAgent->new;
my $response = $ua->get('https://admin:Macin123@12.34.45.67/set_param?init.snmp_ver=3&mib.save');

if ($response->is_success) {
    print $response->decoded_content;  # or whatever
}
else {
    die $response->status_line;
} 
```

# java - 为什么Java中有多个垃圾收集器？

> ID：16032328
> 
> 赞同：30
> 
> 时间：2013-04-16T08:35:19.593
> 
> 标签：java, garbage-collection

默认情况下，我在机器上启动的每个 Java 进程似乎都有两个垃圾收集器。我正在通过 JConsole 进行检查。

示例 - 对于我当前正在运行的 Eclipse。

### PS MarkSweep

```
Collection Count - 221
Collection Time - 102118
Memory Pool Names - java.lang.String[4] 
```

### PS清除

```
Collection Count - 241
Collection Time - 2428
Memory Pool Names - java.lang.String[2] 
```

我假设他们有重叠的池。当使用相同的池（Eden、survivor、old gen）时，两个垃圾收集器如何协同工作？池之间的对象移动是否没有重叠（例如调用第二种算法时从一个幸存者到另一个幸存者的移动）？即使不是，为什么每个池需要多个收集器？

我读过[这篇关于 GC](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)的文章。他们提到对不同的主要和次要 GC 使用不同的收集器，但似乎没有提到在同一个池上使用多个收集器。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-16T09:02:00.793

> 我假设他们有重叠的池。

这个假设是错误的。PS Scavenge 将用于年轻（eden，survivor）代，PS MarkSweep 将用于老一代。唯一的“重叠”是 PS Scavenge 将在对象存在一段时间后将其移动到老年代，然后让 PS MarkSweep 处理它们。

为不同的池设置不同的垃圾收集器的好处是，对伊甸池中的对象运行良好的算法不一定对老一代对象运行良好。

[本文介绍了不同垃圾收集器协同工作的各种选项。](http://www.fasterj.com/articles/oraclecollectors1.shtml)

至于在没有空间将对象移动到老年代时发生的“主要”集合，[Sun 的这份（诚然旧的）白皮书](http://www.oracle.com/technetwork/java/javase/memorymanagement-whitepaper-150215.pdf)说如下：

> ...年轻代收集算法未运行。而是在整个堆上使用老年代收集算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:08:40.247

形成您提供的文章：

> 通常，在每次次要收集期间，来自年轻代的部分幸存对象会移动到老年代。最终，tenured generation 将被填满并且必须被回收，从而产生一个majorcollection，整个堆都被回收。主要收集通常比次要收集持续更长时间，因为涉及的对象数量要多得多。

# php - 在 mySQL 查询错误 1005 中找不到错误

> ID：16032331
> 
> 赞同：0
> 
> 时间：2013-04-16T08:35:24.593
> 
> 标签：php, mysql, syntax

我是 PHP 和 mySQL 的新手，我似乎不知道错误在哪里，查询是

分隔符 $$

```
CREATE TABLE `bms`.`client_unit_people` (
  `unit_people_ID` int(13) unsigned NOT NULL AUTO_INCREMENT,
  `client_block_ID` int(13) unsigned NOT NULL,
  `client_unit_ID` int(13) unsigned NOT NULL,
  `people_name` varchar(255) NOT NULL,
  `people_salutation` varchar(255) NOT NULL,
  `people_telephone` varchar(20) DEFAULT NULL,
  `people_mobile` varchar(20) DEFAULT NULL,
  `user_account_ID` int(13) unsigned DEFAULT NULL,
  `web_access` enum('Yes','No') NOT NULL DEFAULT 'No',
  `tel_prefs` enum('Yes','No') NOT NULL DEFAULT 'No',
  `mob_prefs` enum('Yes','No') NOT NULL DEFAULT 'No',
  `email_prefs` enum('Yes','No') NOT NULL DEFAULT 'No',
  PRIMARY KEY (`unit_people_ID`),
  KEY `FK_up_ua_idx` (`user_account_ID`),
  KEY `FK_ua_up_idx` (`user_account_ID`),
  KEY `FK_up_cu_idx` (`client_unit_ID`),
  KEY `FK_up_cb_idx` (`client_block_ID`),
  CONSTRAINT `FK_up_cb` FOREIGN KEY (`client_block_ID`) REFERENCES `client_blocks` (`client_block_ID`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `FK_ua_up` FOREIGN KEY (`user_account_ID`) REFERENCES `user_accounts` (`user_ID`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `FK_up_cu` FOREIGN KEY (`client_unit_ID`) REFERENCES `client_units` (`client_unit_ID`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='List of people associated with units'$$ 
```

我收到的错误是：

> 错误代码：1005。无法创建表“bms.client_unit_people”（错误号：150）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:44:45.507

我认为外键约束必须引用目标表中正确类型的索引列。

确保您已在这些表中为相关键创建索引并且类型匹配。

例如，`client_blocks`应该有一个索引`client_block_ID`，并且两个表之间的类型应该是相同的。

[在线文档](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)显示这是导致 1005/150 错误的最可能原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:50:54.907

如果您要重新创建之前删除的表，则它必须具有符合引用它的外键约束的定义。通常 150 错误与外键约束有关。列名和类型必须是正确的，并且索引必须存在于引用的键中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:04:55.460

我认为您应该在 MySQL 论坛的[此线程中找到有关您的问题的提示。](http://forums.mysql.com/read.php?22,19755,19755)希望有帮助:)

# c# - 使用 ASP.NET 条码生成器将二维码图像流式传输到您的 ASP.NET 网页中，然后单击下载

> ID：16032334
> 
> 赞同：0
> 
> 时间：2013-04-16T08:35:44.640
> 
> 标签：c#, javascript, asp.net, vb.net

我正在使用 ASP.NET 条码生成器将 QR 码图像流式传输到我的 ASP.NET 网页中

```
http://www.onbarcode.com/asp_net/qr-code-generator.html 
```

我想通过单击按钮下载此图像。

我已经尝试过 javascript，而是下载了它在另一个窗口中打开的图像。还尝试更改 MIME 类型。

PS：我不是要下载保存的图像。

这是它创建图像的方式：要在 html 或 aspx 页面中创建条形码图像，您可以将图像标签 (img) 插入到您的网页中。例如，`<img src="http://YourDomain:Port/barcode/qrcode.aspx?DATA=0123456789" />`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:39:36.947

您是否尝试过将 img 标签包装在锚点中，即 `<a href="http://YourDomain:Port/barcode/qrcode.aspx?DATA=0123456789"><img src="http://YourDomain:Port/barcode/qrcode.aspx?DATA=0123456789" /></a>`

如果所需的效果应该是在没有用户交互的情况下下载文件（除了单击图像），您应该创建一个处理程序，在图像响应上设置正确的标题。

这可以使用类似的东西来完成：Response.Clear();

```
Response.AddHeader("content-disposition", "attachment; filename=" + fileName);
Response.WriteFile(filePath);
Response.ContentType = "";
Response.End(); 
```

# php - Azure Table PHP：url 编码使延续令牌无效

> ID：16032342
> 
> 赞同：1
> 
> 时间：2013-04-16T08:36:10.350
> 
> 标签：php, azure-table-storage

我已经实现了一种方法来计算从查询中检索到的所有实体。如果实体超过 1000，我使用延续令牌继续

```
public static function countResults($storageAccountName, $tableName, $filter, $projections = null)
{
    $count = 0;
    $options = null;
    $continue = false;
    do
    {
        $options = Azure::getEntitiesFromTable($storageAccountName, $tableName, $filter, $projections, $options);

        $currentResults = $options->getEntities();
        $count += count($currentResults);

        // if specified it means there are other results
        $continue = (!is_null($options->getNextPartitionKey()) && !is_null($options->getNextRowKey()));             

    } while ($continue);

    return $count; 
} 
```

只需返回 QueryEntitiesResult 对象并将其用作执行过滤器的方法的输入，在该过滤器中获取分区键和行键并将它们设置为传递给 TableRestProxy->queryEntities 的 QueryEntitiesOptions 对象

所以没有任何东西应用于延续令牌。问题是 TableRestProxy->queryEntities 将 $this->_encodeODataUriValue 应用于 pkey 和 rowkey。这会使令牌无效，并且总是返回相同的前 1000 个结果。删除它的工作编码。这是图书馆的错误吗？

# opencv - 如何去除错误检测？

> ID：16032344
> 
> 赞同：7
> 
> 时间：2013-04-16T08:36:22.070
> 
> 标签：opencv, image-processing

我正在使用 OpenCV 检测二进制图像中的椭圆，如下所示。在图像中，有八个椭圆需要检测。我可以使用 findContours 获得很多轮廓，包括八个椭圆。问题是：我如何判断哪个是椭圆哪个不是？如何删除所有其他错误检测？

![在此处输入图像描述](https://i.stack.imgur.com/qcVLn.png) ![在此处输入图像描述](https://i.stack.imgur.com/rkVWS.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T16:51:19.203

在这种特定情况下，[霍夫圆变换](http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/hough_circle/hough_circle.html)可能是最简单的解决方案。

复制教程中的代码并将参数更改`cv::HoughCircles()`为：

```
/// Apply the Hough Transform to find the circles
HoughCircles( src_gray, circles, CV_HOUGH_GRADIENT, 1, 10, 40, 30, 0, 0 ); 
```

**输出**：

![在此处输入图像描述](https://i.stack.imgur.com/lUJc1.png)

但我喜欢@George 的想法，随它去吧，它比指定硬编码常量更健壮。我的方法对这张图片很有效，但是如果你有不同大小的圆圈和东西的图片，你想使用`cv::minEnclosingCircle()`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-16T11:03:29.463

一个选项有点老套：在 findContours 之上使用[minEnclosureCircle](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontours#minenclosingcircle)并按 min 过滤轮廓。基于阈值的封闭半径（删除小于半径 A（删除小斑点）和大于半径 B（删除大斑点））。您还可以尝试[minAreaRect](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontours#minarearect)并检查宽度/高度比以寻找均匀的斑点而不是高/宽的斑点。

不那么 hacky 的解决方案是使用 Hough 变换。看看[霍夫圆](http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/hough_circle/hough_circle.html)和教程

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T03:12:14.730

现在我想我已经使用自己的算法成功地解决了这个问题。只需发布它以供将来参考。

如下图，所有的椭圆都可以准确定位。并且成功去除了错误检测。另一方面，该算法非常省时：在我的普通桌面上处理所有图像只需 0.03 秒。图像尺寸：448x336 像素

算法过程：

1.  使用函数 findContours 从二值图像中检测轮廓
2.  通过设置轮廓最小尺寸的阈值来删除太小的轮廓
3.  使用函数 fitEllipse 检测椭圆
4.  将轮廓与相应的椭圆进行比较。具体来说，将所有轮廓点代入一般椭圆方程（参见[http://www.maa.org/joma/volume8/kalman/general.html](http://www.maa.org/joma/volume8/kalman/general.html)）。然后计算代数误差。如果误差小于阈值，则排除该轮廓。

![在此处输入图像描述](https://i.stack.imgur.com/mGZnB.png)

**编辑：** **对 George Profenza 和 karlphillip 的回答的评论。** 感谢 George Profenza 和 karlphillip 的回答。但是，他们的回答并不能很好地解决问题。George Profenza 给出的第一个想法是为轮廓的大小设置阈值。事实上，我已经在我的算法中使用了它。但显然这是算法的初步步骤。有很多“好”尺寸的错误检测。George Profenza 的第二个想法是使用 HoughCircles，也是由 karlphillip 提出的。HoughCircles 的问题是：（a）它很慢，而我需要在嵌入式系统中实时实现算法。(b) 它只能检测圆形而不能检测椭圆。当然，当椭圆接近圆时，它也有效。但对于一般情况，它不会。此外，我上面的方法无法检测到“图 8”。这是一个大问题，我仍在努力。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T03:10:26.677

虽然之前已经接受了另一个答案，但是有几个选项需要探索，所以我会添加另一个答案。假设 Hough 方法对您的应用程序来说足够快，这里有一些有趣的替代方案：

1.  [使用 OpenCV 进行椭圆检测](https://stackoverflow.com/questions/10982988/ellipse-detection-with-opencv)
2.  [http://toyhouse.cc/profiles/blogs/modified-hough-ellipse-transform-detecting-ellipse-in-an-accurate](http://toyhouse.cc/profiles/blogs/modified-hough-ellipse-transform-detecting-ellipse-in-an-accurate)
3.  [http://www.codeforge.com/article/131943](http://www.codeforge.com/article/131943)
4.  我在上面的评论中添加的论文：[http ://www.bmva.org/bmvc/1988/avc-88-041.pdf](http://www.bmva.org/bmvc/1988/avc-88-041.pdf)

我还可以补充一点，霍夫可能是可靠地检测椭圆的“正确”方法，但您可能会遇到额外的挑战。您表示 Hough circles 在您的桌面上足够快，但桌面的性能与嵌入式系统匹配程度如何？嵌入式系统有浮点单元吗？如果不是，请不要对软件模拟浮点所表现出的性能过于担心。您仍然可以使用定点数学、查找表等令人满意地实现 Hough 算法。

# android - 调用 onClick 时更改 ImageButton 的图像

> ID：16032349
> 
> 赞同：1
> 
> 时间：2013-04-16T08:36:40.980
> 
> 标签：android, android-widget

我有一个 ImageButton 在单击时执行长时间运行的操作。所以我没有成功地尝试在*onClick*调用开始时更改图像并在结束时将其更改回来。

我已经尝试了下面的代码，但我发现android在*onClick*完成后重绘了按钮图像，所以它没有用。

如果可能的话，我也愿意接受其他方式来做到这一点。

下面是我使用的代码片段。*Thread.sleep*代表长时间运行的操作。我希望在执行到达睡眠时而不是在*onClick*完成后看到图像变化。

```
btnTest = (ImageButton) findViewById(R.id.btnTest);
btnTest.setOnClickListener(new OnClickListener() {
@Override
public void onClick(View v) {
    System.out.println("start");
    btnTest.setImageResource(R.drawable.add);
    try {
        Thread.sleep(1000);
    } catch (InterruptedException e) {
    }

    System.out.println("end");
    btnTest.setImageResource(R.drawable.del);
}
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T08:41:16.357

您的问题是您`sleep()`在（或以其他方式阻止）UI 线程。请理解主/UI 线程负责重绘和所有事件处理。如果你在那里*睡觉*（`onClick()`在 UI 线程中执行），那么 Android 将无法做*任何*与用户界面相关的事情。

背景是多线程 GUI 效率极低。大多数与 UI 相关的调用，例如`setBackground`，简单地设置一些数据甚至安排更多的活动，都不会立即产生效果，并且只有当控件返回到主 UI 线程控制循环时才会产生结果，例如协调重绘。试想一下，如果您一个接一个地启动几个布局更改并且每个都将立即处理会发生什么——这将导致大量计算在下一刻变得无效。

所以主线程只不过是一个处理各种回调的巨大循环，包括`Activity`生命周期方法、事件侦听器回调等。所以如果你愿意的话，UI 是单线程的。

你需要做的是在一个`AsyncTask`或线程上执行你的长时间运行的操作。对于初学者，我会尝试一个`AsyncTask`. 在再次在 UI 线程上运行的 AsyncTask`onPostExecute()`方法中，您可以随意操作用户界面。

为了快速成功，您还可以使用线程：

```
@Override
public void onClick(View v) {
    // on UI thread
    btnTest.setImageResource(R.drawable.add);
    // launch concurrent thread
    (new Thread(new Runnable() {
            @Override
            // the code of this method will run concurrently
            public void run() {
                System.out.println("start");
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {}
                System.out.println("end");
                // at this point, we need to get back to the UI thread
                // for simplicity, we use the view's convenience method for that
                v.post(new Runnable() {
                    @Override
                    // the code of this method will run on the UI thread
                    public void run() {
                       btnTest.setImageResource(R.drawable.del);
                    }
                })
            }
        })
    ).start();
} 
```

`AsyncTask`看起来好多了，但它并不容易即时创建和使用。

请注意，上面的代码会创建一个`Thread`运行，直到它离开它的`run()`方法，或者 Android 杀死了托管您的应用程序的 Linux 进程。

另请注意，此线程包含对代码中许多对象的引用，因为它可以访问其周围范围内的所有内容。

结论是，如果您的 Thread 确实运行了很长时间，它可能会持有对不再可见的 View 的引用，因此僵尸内存对象可能会恶化您的应用程序的资源消耗。

另外，您提到您正在那里进行长期运行的操作。问题是，该操作是*等待*还是*计算*一些东西。如果它计算某些东西，您可能会发现它现在需要十倍的时间，除非您按照此处所述[调整`AsyncTask`/`Thread`优先级](https://stackoverflow.com/a/14217816/1856738)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T08:51:44.983

我希望你会在 onclick 中做一些操作，而不仅仅是 Thread.Sleep()。

在这种情况下，您可以使用以下方法使用 AsyncTask。

```
btnTest = (ImageButton) findViewById(R.id.btnTest);
btnTest.setOnClickListener(new OnClickListener() {

   @Override
   public void onClick(View v) {

       new SomeLongRunningOperationAsyncTask().execute();

   }
}); 
```

> **用于长时间运行的进程的 AsyncTask 类。**

```
class SomeLongRunningOperationAsyncTask extends AsyncTask<Void, Void, Void>
{

    @Override
    protected void onPreExecute() {

        super.onPreExecute();
        System.out.println("start");
        btnTest.setImageResource(R.drawable.add);

    }

    @Override
    protected Void doInBackground(Void... params) {

        //your long running operation.
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {

        super.onPostExecute(result);
        System.out.println("end");
        btnTest.setImageResource(R.drawable.del);
    }
} 
```

# javascript - 在javascript中对行进行排序

> ID：16032353
> 
> 赞同：0
> 
> 时间：2013-04-16T08:36:48.840
> 
> 标签：javascript, jquery, csv

我有这段代码可以解析 csv 文件而不是给我一个图表，我的问题是我希望它按字母顺序对 csv 文件的行进行排序，而不是开始比较以找到相同的单词并希望它停止检查下一个单词只要它没有找到相似之处，所以程序不需要检查 9000 * 9000 行。

```
<html>
<head>
    <title>Chart</title>
    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript" src="highcharts.js"></script>
    <link rel="stylesheet"  href="style.css" />
</head>

<body>

<script>
$(document).ready(function() {
$.ajax({
   type: "GET",
   url: "uk-4_2_2013.complet.csv",
   dataType: "text",
   success: function(data) {processData(data);}
});
});

function processData(allText) {
// varriable qui contient toutes les lignes du fichier CSV
var allTextLines = allText.split(/\r\n|\n/);

// liste des lignes 
var lignes=new Array(); 
var nombres=new Array(); 

// liste d'occurance qui correspond a chaque ligne
var nombre =[];
var x=0;
var y=0;
var inter1;
var inter2;
var i=0;
var j=0;    
//on parcours les lignes

for ( i=0; i<allTextLines.length; i++) 
  { 
    inetr1 = allTextLines[i].split(';');

      if(lignes.indexOf(inetr1[0])<0)
      {
             lignes[x]=inetr1[0];
             nombres[x]=0;
               for (j=0; j<allTextLines.length; j++)    
                {
                    inetr2 = allTextLines[j].split(';');
                   if (inetr1[0]==inetr2[0])
                     {
                       nombres[x]=nombres[x]+1;
                     }       
                }                   
         x=x+1;                                               
      }   
  }

 $('#Chart_App').highcharts({
    chart: {
        type: 'bar'
    },
    xAxis: {
        categories: lignes
    },
    yAxis: {
        title: {
            text: 'Apps Downloaded'
        }
    },
    series: [{

        data: nombres
    }]
});  
}
</script>

<div id="Chart_App">
</div>

</body>
</html> 
```

csv 看起来像这样

```
house
home
world
house
home 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:59:01.787

正如评论所说，您应该使用数据库对如此大量的数据执行此操作。

无论如何，在 Javascript 中，一旦您拥有一个包含 CSV 值的数组，您就可以使用[sort](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)方法按字母顺序对其进行排序。

```
allTextLines.sort(); 
```

这将更改原始数组。

编辑：计数发生...

我了解您想检查每个单词在 CSV 中出现的次数。您有一个每行一个单词的 CSV，因此 allTextLines 是一个每个元素一个单词的数组。在 sort() 方法之后，它是按字母顺序排列的。这是一个想法：

```
allTextLines.sort();

var lignes = new Array();  // diferent word values
var nombres = new Array();  // their occurrences
var word = allTextLines[0];  // temp word value
var count = 0;  // different words counter
var occurrence = 1; // occurrence of the temp word
for ( i=1; i<allTextLines.length; i++) {
  if (allTextLines[i] != word){
    lignes[count] = word;
    nombres[count] = occurrence;
    count++;
    word = allTextLines[i];
    occurrence = 0;
  } else {
    occurrence++;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:58:36.780

您已经有一个包含您的值的数组。您可以像这样对其进行排序：

```
var allTextLines = allText.split(/\r\n|\n/);
for(var i = allTextLines.length;--i;){
   allTextLines[i] = allTextLines[i].split(';');
}
//...
// now depending on your keys, sort your Array according to the
// index x where the relevant words are
allTextLines.sort(function(a,b){return (a[x] > b[x]);}) 
```

现在您已经对 Array`allTextLines`进行了排序，并且可以完成其余的工作。

# gwt - GWT 树更改位置

> ID：16032357
> 
> 赞同：3
> 
> 时间：2013-04-16T08:37:07.620
> 
> 标签：gwt, tree, onclick

我在我的 GWT WebApp 中添加了一个树。现在，当您单击一个元素时，整个网站都会向下滚动。这通常意味着我失去了对单击对象的关注，因此我必须移动鼠标并再次单击该项目。

当您总是必须在一个项目上单击两次时，这非常烦人。

也许有可能删除这个“自动对焦选项”，或者有人有其他想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-24T23:59:43.807

GWT 2.5.1 有一个新选项来修复滚动到视图中的行为。创建新的 Tree 对象调用后

```
tree.setScrollOnSelectEnabled(false); 
```

禁用滚动选择。

请记住，之后您的树将始终设置为 (0,0) 滚动位置。这意味着如果树碰巧有滚动条，那可能是个问题（然后它会滚动到顶部，而不是专注于选定的项目）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-28T20:16:56.213

也仍然可以滚动到选定的项目，例如，从代码隐藏创建它时：

```
tree.addItem(treeItem);
treeItem.getElement().scrollIntoView(); 
```

虽然在添加和禁用之后动态启用自动滚动（setScrollOnSelectEnabled）可能无法按预期工作

upd：当 treeitem 是启用了自动滚动的小部件时会出现问题。单击项目两次滚动树顶。纯文本还是可以的。

upd2：在某些 IE 中 setScrollOnSelectEnabled(false) 无效，焦点仍然在小部件项目单击上跳跃。原因似乎执行流程最终到达 Element.focus() 导致不正确的行为（由于不正确的元素？）。它从 onSelection(moveFocus=true) 开始。使用 moveFocus=false 很好。要禁用此功能，需要制作自己的 Tree 版本并禁用 moveFocus 并调用 Element.focus() 以获得正确的元素。

但！setScrollOnSelectEnabled(true) 很好，第二次点击时不会跳到顶部！因此解决方法是根据检测到的浏览器启用此设置。

# ruby-on-rails - Ruby on Rails + Sidekiq：如何更改计划的作业开始时间？

> ID：16032362
> 
> 赞同：12
> 
> 时间：2013-04-16T08:37:22.810
> 
> 标签：ruby-on-rails, ruby, sidekiq

我最近开始使用 Sidekiq，并注意到它有一个我一直在寻找的很棒的功能：

```
UserMailer.delay_until(5.days.from_now).find_more_friends_email 
```

基本上我可以在未来安排一份工作，所以我不需要我的应用程序不断地轮询具有开始时间的新事件。

现在这就像一个魅力，但我如何更改工作的开始时间？通常，某些预定事件的开始时间会发生变化。我如何在 sidekiq 中复制它？

我知道我可以删除作业并创建一个新作业，但是否可以只修改开始时间？

**编辑**：

我建立在 Oto Brglez 的想法之上，这是记录在案的代码：

```
module TaskStuff
  class TaskSetter
    include Sidekiq::Worker
    sidekiq_options retry: false

    def perform(task_id)
      task = Task.find(task_id)
      # Get the worker that's performing this job
      if worker = AppHelpers.find_worker(jid)
        # If the worker matches the "at" timestamp then this is the right one and we should execute it
        if worker.last["payload"]["at"].to_s.match(/(\d*\.\d{0,3})\d*/)[1] == task.start.to_f.to_s.match(/(\d*\.\d{0,3})\d*/)[1]
          task.execute
        else
          custom_logger.debug("This worker is the wrong one. Skipping...")
        end
      else
        custom_logger.error("We couldn't find the worker")
      end
    end
  end
end

module AppHelpers

  [...]

  def self.find_worker(jid)
    Sidekiq::Workers.new.select {|e| e.last["payload"]["jid"] == jid}.first
  end

  [...]

end

> task = Task.create(start: 5.hours.from_now)
> TaskStuff::TastSetter.perform_at(task.start, task.id) 
```

现在如果我这样做

```
> task.update_attributes(start: 4.hours.from_now)
> TaskStuff::TastSetter.perform_at(task.start, task.id) 
```

该任务将在 4 小时内执行，而另一个作业（将在 5 小时内执行）将在到达时间时被忽略并删除。

最初我尝试使用`Time.now`而不是，`worker.last["payload"]["at"]`但这可能非常不准确，因为计划的作业不会总是按时执行。检查间隔为 15 秒，如果所有工作人员都在其他地方忙，则作业可能会进一步延迟。

我不得不使用它`Regexp`来匹配开始时间，因为在阅读时`task.start`我可能会得到一个小数位数不同的浮点数，并且 if 条件不会通过。这样，我将两个值都设为小数点后 3 位。

我发现获得工作的“at”属性的唯一方法是通过工人获得它。如果我要问 Redis 或使用 Mike's `Sidekiq::ScheduledSet.new`，我不会得到当前的工作，因为它已经从 Redis 中撤出。

**编辑 2**：

对于任何感兴趣的人，我采用了类似但不同的方法。基本上，我没有比较 的开始时间，而是`Task`在模型和 Sidekiq 调用中添加了一个额外的字段，称为`start_token`. 如果使用与对象相同的令牌调用了 sidekiq 作业，则它是有效的，否则丢弃并跳过该作业。每次模型更改 start_time 时，令牌都会更新。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2015-03-06T14:05:50.657

这可能没有回答这个问题，但这个问题首先出现在谷歌上，用于“sidekiq 增加已安排工作的时间”。

Sidekiq 在 SortedEntry 作业上有这个方法（`reschedule`）。

找工作：

```
job = Sidekiq::ScheduledSet.new.find_job(job_id) 
```

重新安排工作：

```
job.reschedule(Time.now + 2.hours) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T08:51:52.697

我不认为编辑/更新工作是方式。每次发生变化时，我通常都会创建新工作。然后在作业本身中检查执行某些任务的时间是否正确...如果时间正确，请继续执行任务，否则跳过...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-01T10:47:12.403

您还可以通过使用 job.reschedule() 方法来做一件事，另一种方法是删除您的第一个计划作业，然后使用新时间再次添加。

**代码：**

```
 bugs = @user.bugs
  queue = Sidekiq::ScheduledSet.new
  queue.each do |job|
    job.delete if bugs.ids.include? job.args.first
  end 
```

> 这将删除与用户错误 ID 匹配的所有作业

# java - 有人可以给我一个分层架构的例子吗？

> ID：16032365
> 
> 赞同：0
> 
> 时间：2013-04-16T08:37:35.187
> 
> 标签：java, layer

我必须为可以添加/删除/更新帐户的银行员工做一个 java 应用程序，但我不知道如何实现分层架构。我有 Gui，数据库，我对分层架构有所了解，但我不知道如何编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:44:26.437

问题太笼统了，但是分层架构是可以在任何地方应用的东西。所以Android是分层架构的一个很好的例子。

见这里[http://developer.android.com/about/versions/index.html](http://developer.android.com/about/versions/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:44:58.693

既然这个范围很广，我会很广泛地回答。

*通常*，它被认为是应用程序行为和状态的独特分离，每一个都旨在仅应用于其给定的关注点，并且不应泄漏到另一个关注点。

这通常以：表示层（Web、桌面 gui、控制台等）、服务（此处为业务规则）层和数据访问层（DAO、存储库等）而告终。

# iphone - 登录后自动重定向到查看 - iOS

> ID：16032370
> 
> 赞同：0
> 
> 时间：2013-04-16T08:37:40.543
> 
> 标签：iphone, ios, xcode

我有一个 iOS 应用程序，它为非注册用户提供一些服务，并为注册用户提供更多服务。

每次我打开应用程序时，它都会在默认访问者页面上打开，我必须重新登录。

我希望应用程序检查用户是否登录，然后将他重定向到正确的页面。

我正在使用故事板，我认为这与`didFinishLaunchingWithOptions:`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T04:45:48.650

我真的不认为@Necro 正在做什么是必要的。

为什么不每次应用程序进入前台时检查活动会话，如果没有，则（模态地）呈现您的登录视图控制器而不显示动画。这种架构在注销时也提供了非常清晰的逻辑，因为您所做的就是清除会话，显示登录视图控制器，并将主导航层次结构弹出到它的根视图控制器。

简单的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:53:14.520

您可以使用[NSUserDefaults](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)来保存有关您的应用程序的信息。

当用户成功登录您的应用程序后，您可以存储用户之前正确登录的状态。

```
 //SETTING USER DEFAULTS
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:txtUsername.text forKey:@"Username"];
    [defaults setObject:txtPassword.text forKey:@"Password"];
    [defaults setObject:"true" forKey:@"LoginStatus"];
    [defaults synchronize];

    //RETRIEVING USER DEFAULTS 
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSString *Username = [defaults objectForKey:@"Username"];
    NSString *Password = [defaults objectForKey:@"Password"];
    NSString *Status = [defaults objectForKey:@"LoginStatus"]; 
```

然后，一旦您完成了这项工作，您就可以对其应用一些逻辑。

```
 if ([Status isEqualToString:@"true"]) {
        [self loginUser:Username :Password]
    } 
```

- - - 编辑 - - -

评论中有人说在这里存储密码可能会很麻烦。转到这个：[Queston](https://stackoverflow.com/questions/3829068/hash-a-password-string-using-sha512-like-c-sharp)获取一个函数来散列密码字符串。

最后感谢所有投票支持我的人。

# iphone - 按下部分中的特殊表格视图单元格时，如何更改多个标签中的文本？

> ID：16032372
> 
> 赞同：0
> 
> 时间：2013-04-16T08:37:50.873
> 
> 标签：iphone, objective-c, xcode, tableview, tableviewcell

好的，所以我需要一些帮助。我的代码几乎完成了我想要它做的事情，但我认为有一个小问题。我有一个表格视图，它从 .plist 文件中获取其信息，我的代码将其放在表格视图中。现在，我想要的是，当我按下表格视图单元格时，我想要四个不同的标签更改为我在代码中指定的内容。我得到了这个工作，但只在第一部分（我有 AB 部分）。当我按下第二部分中的第一个表格视图单元格时，我的标签值与第一部分中的第一个单元格相同。任何想法如何让这个工作？

她是我的视图控制器.h：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController<UITableViewDataSource, UITableViewDelegate>

@property (copy, nonatomic) NSDictionary *firstTableView;
@property (copy, nonatomic) NSArray *firstTableViewKey;

@property (weak, nonatomic) IBOutlet UILabel *norskLabel;
@property (weak, nonatomic) IBOutlet UILabel *infinitivLabel;
@property (weak, nonatomic) IBOutlet UILabel *presensLabel;
@property (weak, nonatomic) IBOutlet UILabel *preteritumLabel;
@property (weak, nonatomic) IBOutlet UILabel *perfektumLabel;

@end 
```

这是我的viewcontroller.m：

```
#import "ViewController.h"

static NSString *SectionsTableIdentifier = @"SectionsTableIdentifier";

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    UITableView *tableView = (id)[self.view viewWithTag:1];
    [tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:SectionsTableIdentifier];

    NSString *path = [[NSBundle mainBundle] pathForResource:@"SterkeVerb" ofType:@"plist"];

    self.firstTableView = [NSDictionary dictionaryWithContentsOfFile:path];

    self.firstTableViewKey = [[self.firstTableView allKeys] sortedArrayUsingSelector:@selector(compare:)];

    tableView.backgroundColor = [UIColor clearColor];
    tableView.opaque = NO;
    tableView.backgroundView = nil;

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];

}
#pragma mark -
#pragma mark Table View Data Source Methods
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
return [self.firstTableViewKey count];

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
NSString *key = self.firstTableViewKey[section];
NSArray *nameSection = self.firstTableView[key];
return [nameSection count];

}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section{
    return self.firstTableViewKey[section];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:SectionsTableIdentifier];

    NSString *key = self.firstTableViewKey[indexPath.section];
    NSArray *nameSection = self.firstTableView[key];

    cell.textLabel.text = nameSection[indexPath.row];
    return cell;

}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    if (indexPath.row == 0){

        _norskLabel.text = @"å bake";
        _infinitivLabel.text = @"zu backen";
        _presensLabel.text = @"bäckt/backt";
        _preteritumLabel.text = @"backte";
        _perfektumLabel.text = @"hat gebacken";

}

    else if (indexPath.row == 1){

        _norskLabel.text = @"å motta";
        _infinitivLabel.text = @"zu empfangen";
        _presensLabel.text = @"empfängt";
        _preteritumLabel.text = @"empfing";
        _perfektumLabel.text = @"hat empfangen";
    }
} 
```

我还有其他几个如果要放入代码中，但这将是一个很长的列表。如果你能告诉我如何将第一个“if”放在 B 部分，将“else if”放在 E 部分。也许如何在另一个部分中获得其他东西，那就太好了！

感谢我得到的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:04:09.353

正如我之前在评论中提到的，这里的代码片段显示了如何完成对部分的检查。默认情况下，它适用于第 0 部分。不适用于其他部分。

这是代码：

> -(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

```
 if (indexPath.section == 0) {

    if (indexPath.row == 0 )
    {
        _norskLabel.text = @"å bake";
        _infinitivLabel.text = @"zu backen";
        _presensLabel.text = @"bäckt/backt";
        _preteritumLabel.text = @"backte";
        _perfektumLabel.text = @"hat gebacken";

    }

    else if (indexPath.row == 1){

        _norskLabel.text = @"å motta";
        _infinitivLabel.text = @"zu empfangen";
        _presensLabel.text = @"empfängt";
        _preteritumLabel.text = @"empfing";
        _perfektumLabel.text = @"hat empfangen";
    }

}

else if (indexPath.section == 1){

    if (indexPath.row == 0 ){

        _norskLabel.text = @"å bake";
        _infinitivLabel.text = @"zu backen";
        _presensLabel.text = @"bäckt/backt";
        _preteritumLabel.text = @"backte";
        _perfektumLabel.text = @"hat gebacken";

    }

    else if (indexPath.row == 1){

        _norskLabel.text = @"å motta";
        _infinitivLabel.text = @"zu empfangen";
        _presensLabel.text = @"empfängt";
        _preteritumLabel.text = @"empfing";
        _perfektumLabel.text = @"hat empfangen";
    }

} 
```

}

调查一下，如果您还有任何问题，请告诉我们。

谢谢 :)

# c# - mouse_event 与真正的鼠标事件

> ID：16032373
> 
> 赞同：1
> 
> 时间：2013-04-16T08:37:52.547
> 
> 标签：c#, mouseevent, keyevent, mouseclick-event, cursor-position

1.  **真正的鼠标单击**（手动）和**从代码执行单击**（通过c# 中的[mouse_event](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646260%28v=vs.85%29.aspx) ）之间有区别吗？
2.  同样，真正移动鼠标光标和设置Cursor.Position有区别吗？

**如果有区别：**

1.  如何识别该事件的来源？
2.  有一种方法可以模拟**鼠标单击**/**光标移动**，就好像它来自**鼠标或键盘驱动程序**一样？

* * *

**Edit1：**为@Marco Forberg 添加了代码示例。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    [System.Runtime.InteropServices.DllImport("user32.dll", CharSet = System.Runtime.InteropServices.CharSet.Auto, CallingConvention = System.Runtime.InteropServices.CallingConvention.StdCall)]
    public static extern void mouse_event(uint dwFlags, uint dx, uint dy, uint cButtons, uint dwExtraInfo);

    Button button;

    private void Form1_Load(object sender, EventArgs e)
    {

        button = new Button();
        button.Text = "Click";
        button.Location = new Point(50, 50);
        button.Size = new System.Drawing.Size(100, 20);
        button.Click += button_Click;
        Controls.Add(button);

        Button simulate = new Button();
        simulate.Text = "Simulate";
        simulate.Location = new Point(50, 100);
        simulate.Size = new System.Drawing.Size(100, 20);
        simulate.Click += simulate_Click;
        Controls.Add(simulate);

    }

    void button_Click(object sender, EventArgs e)
    {
        Console.WriteLine(sender);
    }

    void simulate_Click(object sender, EventArgs e)
    {
        Point location = button.PointToScreen(Point.Empty);
        Cursor.Position = new Point(location.X + (button.Width / 2), location.Y + (button.Height / 2));

        mouse_event(0x02 | 0x04, 0, 0, 0, 0);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-10T15:01:43.287

@Garath， [MSLLHOOKSTRUCT](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644970%28v=vs.85%29.aspx)包含一个`LLMHF_INJECTED`标志，当事件来自`mouse_event`函数调用时设置。

您可以使用`SetWindowsHookEx`我[在此处](https://stackoverflow.com/a/26301949/361177)解释的方法检索此信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T08:41:01.723

如果您创建正确的事件参数，则没有区别。找出事件来自“机器”的唯一方法是分析时刻。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T08:39:32.767

我也在尝试在 C# 中执行此操作，但在注入的 c# dll 中，托管 clr。我的一个朋友建议阅读这篇文章[http://pastebin.com/rj4YcW4C](http://pastebin.com/rj4YcW4C)

我试过 mouse_event、PostMessage、SendMessage、SendInput 和 Cursor.Position。所有人都被忽略了，但我相信那篇文章有我们都在寻求的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T08:43:41.183

真正单击控件和以编程方式调用鼠标事件处理程序之间的区别应该是`sender`参数。

对于真正的鼠标点击，您会收到作为发送者点击的控件。当您以编程方式调用事件处理程序时，您应该提供一个*合理*的发送者

# reporting-services - SSRS - 条形图 - 条形色标取决于值

> ID：16032377
> 
> 赞同：1
> 
> 时间：2013-04-16T08:38:06.983
> 
> 标签：reporting-services, colors, charts, scale, bar-chart

我创建了一个条形图，其中包含 1 个数据系列和大约 8 个值在 0-100% 范围内的条形图。不久前，我找到了一个关于如何为同一数据系列中的列制作不同颜色的教程，并尝试对其进行修改以满足我当前的需求，但我做错了。

同一数据系列中的不同颜色的工作方式如下：

我编辑报告代码以添加以下功能：

```
Private colorPalette As String() = {"Green", "Blue", "Red", "Orange", "Aqua", "Teal", "Gold", "RoyalBlue", "#A59D93", "#B8341B", "#352F26", "#F1E7D6", "#E16C56", "#CFBA9B"} 
Private count As Integer = 0 
Private mapping As New System.Collections.Hashtable() 
Public Function GetColor(ByVal groupingValue As String) As String 
  If mapping.ContainsKey(groupingValue) Then 
    Return mapping(groupingValue) 
  End If 
  Dim c As String = colorPalette(count Mod colorPalette.Length) 
  count = count + 1 
  mapping.Add(groupingValue, c) 
  Return c 
End Function 
```

现在我有可公开访问的函数 GetColor，我在图表上的数据系列颜色公式中使用它（系列属性，“填充”选项卡）：

`=Code.GetColor(Fields!proc_choroby.Value)`

我试图修改原始函数以根据系列值返回颜色。我已经写了这段代码，但它显然是错误的：

```
Public Function GetColor(ByVal value As Single) As String
    Dim color As String
    If value < 0.4 Then
    color = "FFFFCC"
    ElseIf value > 0.4 And value < 0.6 Then
    color = "FFFF00"
    ElseIf value > 0.6 And value < 0.7 Then
    color = "FFCC00"
    ElseIf value > 0.7 And value < 0.8 Then
    color = "FF9900"
    ElseIf value > 0.8 And value < 0.9 Then
    color = "993300"
    Else: color = "800000"
    End If
    Return color
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:43:36.300

我刚刚发现错误，返回的颜色值在开头缺少“#”。其余的工作完全正常。

我的问题已经解决了，但无论如何我都会发布这个问题，以防将来有人想使用它，而我在谷歌上没有找到任何关于这个主题的内容。

# android - Dropbox Sync API“帐户未链接”

> ID：16032380
> 
> 赞同：2
> 
> 时间：2013-04-16T08:38:21.207
> 
> 标签：android, api, dropbox, dropbox-api

我正在按照[这个 Dropbox 教程](https://www.dropbox.com/developers/sync/start/android#linking-accounts)来启动和设置我的“Hello Dropbox 同步应用程序”。
尽管我将按照教程中给出的步骤进行操作，但我会遇到错误。
权限、应用程序密钥、应用程序秘密等都在他们的位置上，但仍然没有得到我要去的地方。请帮助我摆脱困境。提前致谢

这是我的 Manifest.xml ：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.bguru.mydropboxdemo"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.bguru.mydropboxdemo.MyDropboxDemoActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:name="com.dropbox.sync.android.DbxAuthActivity" />

    <activity
        android:name="com.dropbox.client2.android.AuthActivity"
        android:launchMode="singleTask" >
        <intent-filter>
            <data android:scheme="db-MY_APP_KEY" />

            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.BROWSABLE" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

    <service
        android:name="com.dropbox.sync.android.DbxSyncService"
        android:enabled="true"
        android:exported="false"
        android:label="Dropbox Sync" />
</application> 
```

爪哇代码：

```
public class MyDropboxDemoActivity extends Activity implements OnClickListener
{
    Button btnLinkToDropbox;
    DbxAccountManager dropBoxAcMngr;
    static final int REQUEST_LINK_TO_DROPBOX = 444;
    static final String APP_KEY = "MY_APP_KEY";
    static final String APP_SECRET = "MY_APP_SECRET";

@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_my_dropbox_demo);
    dropBoxAcMngr = DbxAccountManager.getInstance(this, APP_KEY , APP_SECRET);

    btnLinkToDropbox = (Button) findViewById(R.id.btnLinkDropboxAC);
    btnLinkToDropbox.setOnClickListener(this);

}

@Override
public void onClick(View v)
{
    dropBoxAcMngr.startLink(getParent(), REQUEST_LINK_TO_DROPBOX);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if(requestCode == REQUEST_LINK_TO_DROPBOX)
    {
        if(resultCode == Activity.RESULT_OK)
        {
            btnLinkToDropbox.setText("Successfully Linked To Your Dropbox Account");
            btnLinkToDropbox.setEnabled(false);
            Toast.makeText(this, "Account Linked", Toast.LENGTH_LONG).show();
        }
        else
        {
            btnLinkToDropbox.setText("Failed to Link Your Dropbox Account\nTry Again?");
            Toast.makeText(getApplicationContext(), "Account Linking failed", Toast.LENGTH_LONG).show();
        }
    }
    super.onActivityResult(requestCode, resultCode, data);
}
} 
```

logcat 显示：

```
 04-17 11:08:52.740: E/AndroidRuntime(4492): FATAL EXCEPTION: main
04-17 11:08:52.740: E/AndroidRuntime(4492): java.lang.ExceptionInInitializerError
04-17 11:08:52.740: E/AndroidRuntime(4492):     at com.dropbox.sync.android.CoreAccountManager.initNativeLib(CoreAccountManager.java:109)
04-17 11:08:52.740: E/AndroidRuntime(4492):     at com.dropbox.sync.android.CoreAccountManager.<init>(CoreAccountManager.java:89)
04-17 11:08:52.740: E/AndroidRuntime(4492):     at com.dropbox.sync.android.DbxAccountManager.getInstance(DbxAccountManager.java:112)
04-17 11:08:52.740: E/AndroidRuntime(4492):     at com.dropbox.sync.android.DbxAccountManager.getInstance(DbxAccountManager.java:99)
04-17 11:08:52.740: E/AndroidRuntime(4492):     at com.bguru.mydropboxdemo.MyDropboxDemoActivity.onCreate(MyDropboxDemoActivity.java:27)
04-17 11:08:52.740: E/AndroidRuntime(4492):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-17 11:08:52.740: E/AndroidRuntime(4492):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1662)
04-17 11:08:52.740: E/AndroidRuntime(4492):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1726)
04-17 11:08:52.740: E/AndroidRuntime(4492):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-17 11:08:52.740: E/AndroidRuntime(4492):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:949)
04-17 11:08:52.740: E/AndroidRuntime(4492):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-17 11:08:52.740: E/AndroidRuntime(4492):     at android.os.Looper.loop(Looper.java:130)
04-17 11:08:52.740: E/AndroidRuntime(4492):     at android.app.ActivityThread.main(ActivityThread.java:3770)
04-17 11:08:52.740: E/AndroidRuntime(4492):     at java.lang.reflect.Method.invokeNative(Native Method)
04-17 11:08:52.740: E/AndroidRuntime(4492):     at java.lang.reflect.Method.invoke(Method.java:507)
04-17 11:08:52.740: E/AndroidRuntime(4492):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:880)
04-17 11:08:52.740: E/AndroidRuntime(4492):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:638)
04-17 11:08:52.740: E/AndroidRuntime(4492):     at dalvik.system.NativeStart.main(Native Method)
04-17 11:08:52.740: E/AndroidRuntime(4492): Caused by: java.lang.ExceptionInInitializerError
04-17 11:08:52.740: E/AndroidRuntime(4492):     at com.dropbox.sync.android.NativeLib.<init>(NativeLib.java:33)
04-17 11:08:52.740: E/AndroidRuntime(4492):     at com.dropbox.sync.android.NativeLib.<clinit>(NativeLib.java:11)
04-17 11:08:52.740: E/AndroidRuntime(4492):     ... 18 more
04-17 11:08:52.740: E/AndroidRuntime(4492): Caused by: java.lang.UnsatisfiedLinkError: Couldn't load DropboxSync: findLibrary returned null
04-17 11:08:52.740: E/AndroidRuntime(4492):     at java.lang.Runtime.loadLibrary(Runtime.java:429)
04-17 11:08:52.740: E/AndroidRuntime(4492):     at java.lang.System.loadLibrary(System.java:554)
04-17 11:08:52.740: E/AndroidRuntime(4492):     at com.dropbox.sync.android.NativeHttp.<clinit>(NativeHttp.java:364)
04-17 11:08:52.740: E/AndroidRuntime(4492):     ... 20 more 
```

# java - 如何线程化这个应用程序

> ID：16032381
> 
> 赞同：-1
> 
> 时间：2013-04-16T08:38:28.970
> 
> 标签：java, opencv, javacv, object-detection, marvin-framework

我正在使用 Marvin 框架和 Java CV (OpenCV)，

目标： - 检测视频中的绿色区域并在该区域上制作一个矩形。

解决方案： - 使用 Marvin 框架，我已经能够检测到静态图像中的绿色区域

问题：- 在视频中做同样的事情，因为每帧必须从 x,y 坐标扫描并且必须制作矩形，它甚至没有显示检测，性能问题也。

1) [MarvinTest](http://pastebin.com/RHsLZ4rW)类 ：从视频中获取帧并发送到 SkinDetection 类以检测绿色区域。

2）类[SkinColordetection](http://pastebin.com/v28NNQSe)：检测绿色区域并通过它绘制矩形。

视频是通过使用电影制作者移动的这个[静态图像制作的。](http://s22.postimg.org/rsnee7pbl/hand_pic2.jpg)需要帮助执行它，视频正在运行，但绿色区域没有被矩形突出显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T11:20:23.510

我在线程中遇到问题，我在每个帧的 x 和 y 坐标中进行迭代，所以现在在 marvin 框架中，我们有示例程序，它可以解决这个问题。

已解决

# iphone - 使用 Twitter+OAuth 从 iOS 中的 Twitter 帐户获取关注者和关注者

> ID：16032383
> 
> 赞同：0
> 
> 时间：2013-04-16T08:38:32.707
> 
> 标签：iphone, ios, objective-c, twitter, twitter-oauth

在我的应用程序中，我使用 Twitter+OAuth 进行 Twitter 身份验证，现在我需要显示用户的关注者列表，并附上他们的姓名和图片，还需要邀请他们加入我的应用程序......我该怎么做？

我已经尝试过这个 APi api.twitter.com/1/followers/ids.json?id=myuser 这将返回一个用户 ID 的 JSON 数组，我可以将其与其他 API 结合使用来获取他们的用户信息。但它最多限制 100 个用户

和 api.twitter.com/1/followers/ids.json?id=myuser 它只给出 id。对于其他信息，每次我需要调用查找 api 来获取其他信息。有什么方法可以让我在一个 api 调用中获取所有信息？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:50:26.213

[从 Twitter 获取关注者](https://stackoverflow.com/questions/6834931/get-followers-and-following-from-twitter-account-in-ios)

希望对你有帮助

# ruby-on-rails - 如何在两个独立的 Rails 应用程序之间共享布局和资源？

> ID：16032386
> 
> 赞同：1
> 
> 时间：2013-04-16T08:38:57.110
> 
> 标签：ruby-on-rails, ruby, layout

我目前正在将旧版 Rails 2.xx 应用程序迁移到 Rails 3.2。我通过将单体应用程序的特定部分分解为小型专用应用程序来做到这一点。我的麻烦在于代码重复。较小的应用程序将为一般布局、javascript 和 css 共享相同的客户端代码。**如何打包布局和客户端代码，以便在单独的独立应用程序之间共享？**我最初的猜测是这可以通过可安装的引擎来完成。但我不确定这是否是矫枉过正。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-08-15T05:02:40.147

我写了一篇博客[http://blogs.pigrider.com/blogs/22](http://blogs.pigrider.com/blogs/22)来展示我如何逐步构建一个共享布局引擎，以便在 Rails 3.2 中的多个应用程序中使用。

**浏览我的博客：**

这篇博客展示了我如何构建一个 Rails 引擎来逐步在多个应用程序之间共享布局。我在这个博客中构建共享布局引擎的方式可能不是最好的。但是，我只想给那些仍在努力构建这种引擎的人提供一些线索。

1.  我的引擎的名称是“PigderLayout”。运行命令 rails plugin new PigriderLayout --mountable -d mysql 创建一个新的引擎项目。这里我使用 -d mysql 因为我使用 MySQL 作为数据库。您可以更改它以适合您自己的数据库，并且不要忘记将相应的数据库 gem 添加到 Gemfile。我将 gem 'mysql2', '0.3.11' 放入我的 Gemfile 中。

2.  为所有共享布局内容生成一个控制器。运行这个命令 rails generate controller main globalLayout aboutUs contactUs。在这里，我在这个主控制器中有三个动作。然后，编辑文件 config/routes.rb，让它看起来像：

    PigriderLayout::Engine.routes.draw
    匹配 "AboutUs"=>"main#aboutUs", :as=>:aboutUs
    匹配 "ContactUs"=>"main#contactUs", :as=>:contactUs
    end

3.  在目录 app/views/pigrider_layout/main 中，您现在应该看到三个视图文件。它们是 globalLayout.html.erb、aboutUs.html.erb 和 contactUs.html.erb。你可以在 aboutUs.html.erb 和 contactUs.html.erb 中写任何你想要的东西。在文件 globalLayout.html.erb 中，我写道：

……

# windows-ce - 是否可以有选择地并行构建 WinCE 目录

> ID：16032388
> 
> 赞同：1
> 
> 时间：2013-04-16T08:38:58.773
> 
> 标签：windows-ce, platform-builder

我想知道是否可以（通过 blddemo）并行构建一些目录（即它们的树），而另一些则不能。

我有一种情况，其中包含软件部分的某些目录已调整为并行构建（即 build -M x 效果很好），而其他目录则没有，因此我无法进行全局 MP 构建。

谢谢，帕维尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:55:26.220

设置[`BUILD_MULTIPROCESSOR`环境变量](http://msdn.microsoft.com/en-us/library/ee479008%28v=winembedded.60%29.aspx)，然后使用文件中的[`SYNCHRONIZE_BLOCK`](http://msdn.microsoft.com/en-US/library/ee479031%28v=winembedded.60%29.aspx)和[`SYNCHRONIZE_DRAIN`](http://msdn.microsoft.com/en-US/library/ee478969%28v=winembedded.60%29.aspx)宏`SOURCES`来强制执行所需的构建顺序。

# matplotlib - pad_inches=0 和 bbox_inches="tight" 使绘图小于声明的 figsize

> ID：16032389
> 
> 赞同：41
> 
> 时间：2013-04-16T08:39:00.870
> 
> 标签：matplotlib, plot

我正在制作一个嵌入到乳胶中的出版质量图，我希望在大小和字体方面非常精确（以便文章中的字体与图中的字体大小相同）。为了防止绘图在乳胶中缩放，我希望它具有精确的大小，但我不能。这是我的代码：

```
import matplotlib.pyplot as plt
from matplotlib import rc, rcParams
from numpy import sin

rc('text', usetex=True)
rc('font', family='serif', serif='Computer Modern Roman', size=8)
rc('legend', fontsize=10)

width_in = 5
fig = plt.figure(1, figsize=(width_in, 2))
ax = fig.add_subplot(111)
ax.plot(range(0,100), sin(range(0,100)))

fig.tight_layout()
fig.savefig('test.eps', bbox_inches='tight', pad_inches=0)
plt.close() 
```

问题在于 bbox_inches='tight' 和 pad_inches=0。添加这些选项使我的地块宽 4.76 英寸，而不是声明的 5 英寸。但我希望他们节省空间。那么如何解决呢？

编辑：嗯，答案建议删除`bbox_inches='tight'`和`pad_inches=0`使用`tight_layout()`. 然后图像大小合适，但周围仍有一些白色填充。我可以用 删除它`fig.tight_layout(pad=0)`，但是它移动到框内的图形标题看起来很难看。另一方面，我可以使用`tight_layout(rect=[...])`并获得所需的结果，但要获得正确的数字是一项手动工作 - 我不喜欢它。因此，目前我没有看到任何简单而通用的解决方案来解决我的问题。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-16T13:54:24.497

您遇到的问题是，它`bbox_inches='tight'`只是删除了图形周围的所有额外空白，在渲染后实际上并没有重新排列图形中的任何内容。

您可能需要调整传递给`tight_layout`（[教程](http://matplotlib.org/users/tight_layout_guide.html)）的参数以获得所需的效果。

希望这能让你指出正确的方向。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-04-27T13:04:23.530

我在为 LaTeX 制作 matplotlib 图时遇到了同样的问题。由于我的地块不允许使用`tight_layout`，因此发出[此](https://stackoverflow.com/questions/35393863/matplotlib-error-figure-includes-axes-that-are-not-compatible-with-tight-layou)警告，我最终使用了`fig.subplots_adjust(bottom=bottom_pos, top=top_pos, left=left_pos, right=right_pos)`. 请参阅本[教程](http://matplotlib.org/faq/howto_faq.html#howto-subplots-adjust)。它需要手动找到`bottom_pos`等的最佳值，但在我的情况下，它似乎是获得图像而没有太多空白而不改变输出的图形大小的唯一可能性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T19:08:45.143

您的原始绘图周围必须有空格，否则 bbox_inches=tight 不会删除任何区域。我知道有两种解决方案：

1.  简单的方法是使用`tight_layout`tcaswell 提到的。

2.  更复杂但更可控的方法是避免使用`fig.add_subplot(111)`，而是使用`fig.add_axes()`它可以让您在定义轴实例时对轴的大小更加严格。然后，您可以调整轴的大小，以根据需要占用尽可能多的图形区域，以保持 5" 图形区域。完成此操作后，我建议您不要使用`bbox_inches`或将其设置为 None （默认值）避免不必要的裁剪。 `fig.add_axes()`需要一个`rect`参数作为其第一个参数，其中`[left_position, bottom_position, width, height]`每个参数的范围从 0 到 1。

编辑：`tight_layout`再次阅读本教程后，我意识到它几乎涵盖了所有内容。我没有意识到它能够轻松地保持轴实例的纵横比，即使图形的纵横比与轴实例的纵横比不同。当我定义我的轴区域时，我倾向于尝试非常明确，因为我处理卫星图像并尝试将其保持为原始传感器分辨率或该传感器分辨率的某个因素，这需要更多的控制。

# java - 无法传递 jtree 值节点

> ID：16032391
> 
> 赞同：0
> 
> 时间：2013-04-16T08:39:02.627
> 
> 标签：java, swing, jtree

我在传递 jtree 节点的值时遇到问题。我将节点值转换为字符串，然后将字符串传递给另一个从数据库返回字符串以显示在文本窗格中的方法，但这是错误的，输出消息是“java.lang.nullpointerexception”有人能帮帮我吗？
这是我的代码

```
 public class Selector implements TreeSelectionListener {

@Override
public void valueChanged(TreeSelectionEvent event) {
    // TODO Auto-generated method stub
     Object obj = event.getNewLeadSelectionPath().getLastPathComponent();
     String node = obj.toString();

     try{
     resultt = treelistener.SelectionListener(node);

     txtpane.setText(resultt);
     }
     catch (NullPointerException ne){
         System.out.print(ne);
     }
}
} 
```

这是treelistener代码

```
 public class TreeListener {

DbConnection connection;
Statement st = null;
ResultSet rs = null;
String result = null;

public String SelectionListener(String node) {
    // TODO Auto-generated method stub
    Connection con = connection.openConnection();
    System.out.print(node);

    String sql = "Select penjelasan from tArtikel where judul = '%" + node +"%'"  ;
    try{

        st = con.createStatement();
        rs = st.executeQuery(sql);
            while (rs.next()) {
                result = rs.getString(1);
                }
        rs.close();
        st.close();
        con.close();
        System.out.print(result);
    }
    catch (Exception e){
        System.out.println(e);
    }

    return result;
}

    } 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:29:46.757

have you initialize your object from class TreeListener? Please create a code like this in your valueChanged object :

```
TreeListener treelistener=new TreeListener(); 
```

Please tell us again what is like after you add that code.

# c - 如何让mmap'ed内存同步到文件？

> ID：16032396
> 
> 赞同：0
> 
> 时间：2013-04-16T08:39:13.230
> 
> 标签：c, memory-management, posix, interpreter, mmap

我正在为我的 postscript 解释器构建一个内存管理器，我希望它能够将会话挂起到磁盘并恢复保存的会话。我使用匿名设计它`mmap`，一切似乎都有效。测试代码访问内存似乎没有问题。但是现在我已经删除`MAP_ANONYMOUS`并提供了一个`O_RDWR`文件描述符，测试运行后我看不到文件中的内存内容。

```
#include <stdlib.h> /* exit free malloc realloc */
#include <stdio.h> /* fprintf printf perror */
#include <string.h> /* memset */
#include <unistd.h> /* getpagesize */

#include <sys/stat.h> /* open */
#include <fcntl.h> /* open */

/* placeholder error function */
/* ultimately, this will do a longjmp back to the central loop */
void error(char *msg) {
    fprintf(stderr, "%s\n", msg);
    perror("last system error:");
    exit(EXIT_FAILURE);
}

unsigned pgsz /*= getpagesize()*/; /*=4096 (usually on 32bit)*/

/*
typedef struct {
    unsigned char *base;
    unsigned used;
    unsigned max;
} mfile;
*/

/* dump mfile details to stdout */
void dumpmfile(mfile *mem){
    printf("{mfile: base = %p, "
            "used = 0x%x (%u), "
            "max = 0x%x (%u)}\n",
            mem->base,
            mem->used, mem->used,
            mem->max, mem->max);
    unsigned u;
    for (u=0; u < mem->used; u++) {
        if (u%16 == 0) {
            printf("\n%06u %04x: ", u, u);
        }
        printf("%02x ", (unsigned) mem->base[u]);
    }
    puts("");
}

/* memfile exists in path */
int getmemfile(){
    int fd;
    fd = open(
            "x.mem",
            O_RDWR);
    return fd;
}

/* initialize the memory file */
void initmem(mfile *mem){
    int fd;
    struct stat buf;
    size_t sz = pgsz;

    fd = getmemfile();
    if (fd != -1){
        fstat(fd, &buf);
        sz = buf.st_size;
        if (sz < pgsz) sz = pgsz;
    }

#ifdef MMAP
    mem->base = mmap(NULL,
            sz,
            PROT_READ|PROT_WRITE,
            MAP_PRIVATE
# ifndef MREMAP
            |MAP_AUTOGROW
# endif
            | (fd == -1? MAP_ANONYMOUS : 0) , fd, 0);
    if (mem->base == MAP_FAILED)
#else
    mem->base = malloc(pgsz);
    if (mem->base == NULL)
#endif
        error("unable to initialize memory file");
    mem->used = 0;
    mem->max = pgsz;
}

/* destroy the memory file */
void exitmem(mfile *mem){
#ifdef MMAP
    munmap(mem->base, mem->max);
#else
    free(mem->base);
#endif
    mem->base = NULL;
    mem->used = 0;
    mem->max = 0;
}

// ... omitting some address table functions not relevant here.

mfile mem;

/* initialize everything */
void init(void){
    pgsz = getpagesize();
    initmem(&mem);
    (void)initmtab(&mem); /* create mtab at address zero */
}

void xit(void){
    exitmem(&mem);
}

int main(){
    init();
    unsigned ent;
    int seven = 7;
    int ret;

    //printf("getmemfile: %d\n", getmemfile());

    ent = mtalloc(&mem, 0, sizeof seven);
    put(&mem, ent, 0, sizeof seven, &seven);
    get(&mem, ent, 0, sizeof seven, &ret);
    printf("put %d, got %d\n", seven, ret);

    unsigned ent2;
    ent2 = mtalloc(&mem, 0, 8*sizeof seven);
    put(&mem, ent2, 6, sizeof seven, &seven);
    get(&mem, ent2, 6, sizeof seven, &ret);
    printf("put %d in slot 7, got %d\n", seven, ret);
    //get(&mem, ent2, 9, sizeof seven, &ret);
    //printf("attempted to retrieve element 10 from an 8-element array, got %d\n", ret);

    unsigned ent3;
    char str[] = "beads in buddha's necklace";
    char sret[sizeof str];
    ent3 = mtalloc(&mem, 0, strlen(str)+1);
    put(&mem, ent3, 0, sizeof str, str);
    get(&mem, ent3, 0, sizeof str, sret);
    printf("stored and retrieved %s\n", sret);

    xit();
    return 0;
} 
```

运行测试，检查文件。

```
乔什@Z1 ~/xpost
$ 进行测试
cc -g -Wall -Wextra -DTESTMODULE -om mc
./ob && ./m
放 7，得到 7
将 7 放入插槽 7，得到 7
佛项链中的珠子储存和取回

乔什@Z1 ~/xpost
$ od x.mem
0000000 000000 000000 000000 000000 000000 000000 000000 000000
*
0200000

乔什@Z1 ~/xpost
$
```

我需要以某种方式*冲洗它吗？*或关闭文件？~~哦。废话，我敢打赌，不是吗？好吧，我花了一些精力打字，所以我会分享。如果它过于本地化，那就这样吧。~~没有。`close`根本不会改变输出。

更新：现在看来一切正常。最后几个问题是硬编码文件名，在 open() 调用中省略 O_CREAT。和其他小错误。我已经添加`msync`了很好的措施，但这`MAP_SHARED`是对上述问题的*修复*。此模块和相关模块可在[http://code.google.com/p/xpost/source/browse/](http://code.google.com/p/xpost/source/browse/)查看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:53:30.517

由于您使用对内存区域所做的更改来映射事物，`MAP_PRIVATE`因此对于您的进程来说是私有的。要使更改对其他人可见（写入文件的内容），您需要使用`MAP_SHARED`.

此外，您需要使用`ftruncate`. 否则，映射区域只会覆盖文件中不存在的部分。

如果您真的想确保数据最终保存在磁盘上，请使用`msync`，但通常您将能够立即看到写入 mmap:ed 区域的内容，除非您使用的是少数几个不支持的操作系统之一'没有统一的缓冲区和对象缓存。

# ruby-on-rails - 覆盖 has_many << 函数

> ID：16032402
> 
> 赞同：1
> 
> 时间：2013-04-16T08:39:31.913
> 
> 标签：ruby-on-rails, polymorphic-associations, ruby-on-rails-2, model-associations

我在**Rails 2**应用程序中有一些类：`Group`有一些`group_items`. 每个`group_item`都有一个多态的`ìtem`:`user`或`contact`.

```
class Group < AR::Base
  has_many :group_items
  has_many :users,    :through => :group_items
  has_many :contacts, :through => :group_items
end

class GroupItem < Ar::Base
  belongs_to :group
  belongs_to :item, :polymorphic => true
  belongs_to :users :conditions =>
      [ "#{GroupItem.table_name}.item_type = ? ", User.to_s ],
      :foreign_key => 'item_id'
  belongs_to :contacts :conditions =>
      [ "#{GroupItem.table_name}.item_type = ? ", Contact.to_s ],
      :foreign_key => 'item_id'
  validates_presence_of :group_id, :item_id, :item_type
end 
```

一切都很完美。但我可以使用这个功能：

```
@my_group.users << @my_user
@my_group.contacts << @my_contact 
```

该关联似乎太复杂而无法执行此操作：

```
ActiveRecord::RecordInvalid for GroupItem: item_type must be filled 
```

有没有办法使用这个功能，比如覆盖这个`Group` `users<<`功能？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:27:54.593

我找到了一个漂亮的解决方案，使用关联扩展

```
has_many :users, :through => :group_items do
  def <<(user)
    group_item = proxy_owner.group_items.create({ :item => user })
    return false if !group_item.valid?
    return proxy_target
  end
end 
```

# c++ - 为什么这个模板没有解析？

> ID：16032404
> 
> 赞同：0
> 
> 时间：2013-04-16T08:39:34.770
> 
> 标签：c++, templates

我不明白为什么这不起作用

```
In member function ‘void Test_CB::testCB()’: 
error: no matching function for call to ‘calculateCB(USSM&, USSM&, NL&, double&, CD&)’
candidate is:
template<class T, class V> std::vector<CV> calculateCB(const T&, const T&, const NL&, double, const CD&) 
```

通话是这样的

```
USSM x1;
USSM x2;
NL x3;
double x4;
CD x5;
CV b = calculateCB<USSM, USM>(x1,x2,x3,x4,x5)[0]; 
```

我只是描述了类型。它们以正确的方式创建或返回。

模板声明为

```
template <class T, class V>
std::vector<CV> calculateCB(T const & x1,
                            T const & x2,
                            NL const & x3,
                            double x4,
                            CD const & x5); 
```

我还将模板（作为绝望的措施）实例化为

```
template<>
std::vector<CV> calculateCB<USSM,USM>(USSM const & x1,
                                      USSM const & x2,
                                      NL const & x3,
                                      double x4,
                                      CD const & x5); 
```

请注意，第二个模板参数是模板函数中内部使用的变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:10:42.320

我发现了问题，它源于我正在使用的类之一的错误前向声明（NL）。实际名称要复杂得多，由于大小写不匹配，我看不出有什么区别。

我认为 g++ 的错误信息至少应该告诉你哪里不匹配。

# powershell - 在PowerShell中计算电子邮件

> ID：16032408
> 
> 赞同：0
> 
> 时间：2013-04-16T08:39:38.947
> 
> 标签：powershell, hashtable, exchange-server

我想从 Exchange 2010 中保存未送达的电子邮件地址并获取表的结果，其中包含电子邮件以及未送达的次数。为此，我编写了脚本：

```
$all = Get-TransportServer | Get-MessageTrackingLog -EventID "FAIL" -start "04/14/2013" -resultsize unlimited | Select Recipients
$output = @{}
foreach($i in $all)
{ 
$v = $i.Recipients
if ($output.Contains($v))
{
$output.set_Item($v,$output[$v]+1)
$output[$v]
}
else
{
$output.Add($v, 1)
"new"
}
} 
```

但它不起作用。请帮助找出问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:46:29.990

您正在尝试使用 collectinn ($recipents) 作为 $output 中的哈希表键。

get-messagetrackinglog 可以返回一个日志数据。我会避免使用 Group-Object 并坚持使用哈希表，但要这样做：

```
 $output = @{}

  Get-TransportServer |
  Get-MessageTrackingLog -EventID "FAIL" -start "04/14/2013" -resultsize unlimited |
  Select -Expand Recipients |
  foreach {$output[$_]++} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:45:20.447

我无法验证您是否正确使用了 mail-cmdlet，但为了简化整个代码，请使用`Select-Object -Expand`拆分所有数组（如果邮件有多个收件人）并`Group-Object`计算每个地址：

```
Get-TransportServer |
Get-MessageTrackingLog -EventID "FAIL" -start "04/14/2013" -resultsize unlimited |
Select-Object -ExpandProperty Recipients |
Group-Object |
Select Name, Count 
```

要验证其余代码是否有效，您必须运行

```
Get-TransportServer |
Get-MessageTrackingLog -EventID "FAIL" -start "04/14/2013" -resultsize unlimited 
```

如果返回您想要的结果，请自行查看。

# blackberry-10 - 使用编码在黑莓级联中显示启动画面

> ID：16032411
> 
> 赞同：0
> 
> 时间：2013-04-16T08:39:42.703
> 
> 标签：blackberry-10

你能告诉我如何使用编码制作启动画面吗？因为我想从网络服务中获取数据。我必须显示启动屏幕，直到所有数据都将获取。所以我还在启动屏幕上方显示加载程序，所以请告诉我该怎么做？

感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:46:20.623

我没有电脑，所以不能给你代码，但总体思路是：

1 显示您的启动画面

2 将斜线屏幕连接到 Web 请求代码中的信号

3 做你的网络请求。这将是一个异步操作

4 当Web服务请求完成时，发出信号

5 断开启动画面与信号的连接

6 就是这样

# solr - 如何在 Solr 中进行过滤？

> ID：16032414
> 
> 赞同：1
> 
> 时间：2013-04-16T08:40:05.540
> 
> 标签：solr, lucene

我想索引一个文档并对某些字段应用一系列过滤器。这就是我在 schema.xml 中定义这些字段之一的方式：

```
<field name="features" type="text_en" indexed="true" stored="true" multiValued="true"/> 
```

我的字段类型是

```
<fieldType name="text_en" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StopFilterFactory"
            ignoreCase="true"
            words="lang/stopwords_en.txt"
            enablePositionIncrements="true"
            />
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.EnglishPossessiveFilterFactory"/>
    <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
    <filter class="solr.PorterStemFilterFactory"/>
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
    <filter class="solr.StopFilterFactory"
            ignoreCase="true"
            words="lang/stopwords_en.txt"
            enablePositionIncrements="true"
            />
    <filter class="solr.LowerCaseFilterFactory"/>
<filter class="solr.EnglishPossessiveFilterFactory"/>
    <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
    <filter class="solr.PorterStemFilterFactory"/>
  </analyzer>
</fieldType> 
```

我希望过滤器删除停用词和词干，以便获得更多匹配（例如运行匹配运行）。过滤器在“分析”选项卡中完美运行，但在查询搜索方面，我没有得到预期的结果，主要是我无法找到使用“text_en”字段定义的任何内容。

我在这里想念什么？

# android - 如何将jpeg文件附加到android中的邮件？

> ID：16032419
> 
> 赞同：0
> 
> 时间：2013-04-16T08:40:43.117
> 
> 标签：android

我将附加文件，但它们显示为（0 字节）下面的代码是我使用的

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
emailIntent.setType("image/jpeg");
emailIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
emailIntent.putExtra(Intent.EXTRA_SUBJECT, "ToDoNot.es");
emailIntent.putExtra(Intent.EXTRA_TEXT, Html.fromHtml(message));
File save_Image;
File temp=null;
save_Image=new File(ToDoViewActivity.this.getFilesDir(),"todofile");
temp=new File(save_Image,"tempfile"+String.valueOf(values.getAsInteger("rowid"))+".jpg");
Uri U = Uri.fromFile(new File("file://"+temp.getPath()));
emailIntent.putExtra(Intent.EXTRA_STREAM,U);
startActivity(Intent.createChooser(emailIntent, "Send email using")); 
```

输出： ![在此处输入图像描述](https://i.stack.imgur.com/1IwkN.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T15:36:17.450

我也遇到了这个问题——问题是你试图从你的应用程序的内部文件目录中附加一个文件，而电子邮件意图没有访问它的权限。

首先将其复制到“外部”存储，然后将其附加到电子邮件中。那应该工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:18:54.983

你不输入文件类型......也许是因为这个。

```
save_Image=new File(.........................."todofile.jpg") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:20:33.153

该问题可能与**临时**文件上的**getPath**调用有关。检查该调用的返回值，并确保您传递给**putExtra**的构造 URI与这些文档中描述的样式之一匹配：

 ****[尝试将文件从 SD 卡附加到电子邮件](https://stackoverflow.com/questions/587917/trying-to-attach-a-file-from-sd-card-to-email)

[https://superuser.com/questions/352133/what-is-the-reason-that-file-urls-start-with-three-slashes-file-etc](https://superuser.com/questions/352133/what-is-the-reason-that-file-urls-start-with-three-slashes-file-etc)

*最值得注意的是，您需要在file:*后面加上 3 个斜杠：此外，但不太可能，您的问题可能是由您使用**setType**设置的 MIME 类型引起的。****

# php - 如果用户没有照片，如何显示默认图像

> ID：16032425
> 
> 赞同：0
> 
> 时间：2013-04-16T08:40:59.167
> 
> 标签：php, row

例如，如果用户在我们的数据库中没有照片，那么行显示默认照片我该怎么做，请帮助我，谢谢

```
 $result = mysql_query($query) or die(mysql_error());
    $rows = mysql_num_rows($result);

      echo "<table class='hovertable' border='1' cellpadding='0' cellspacing='0'>";
echo "<tr><th>Photo</th><th>Teacher Detail</th></tr>";

if ($rows > 0) {
        while($row = mysql_fetch_array($result)) {

    echo "<tr><td align='center'>";
    echo "<img src=images/".$row['photo'] ." width='90' height='90'></a></td>";
    echo '<td valign="top">Teacher Name: ';
    echo $row['name'], '<br/>';
    echo 'Teacher No: ';
    echo $row['teacherno'], '<br/>';
    echo 'Father Name: ';
    echo $row['fathername'], '<br/>';
    echo '</td></tr>';

        }
} else {
        echo "<tr><td colspan=\"5\">No results found!</td></tr>";
}

echo "</table>" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:43:57.067

```
<?php 
   if(isset($row['photo'] && $row['photo'])
   { 
       echo "<tr><td align='center'>";
       echo "<img src=images/".$row['photo'] ." width='90' height='90'></a></td>";
    }
   else
   {
     echo "<tr><td align='center'>";
    echo "<img src=images/Sample.jpg" width='90' height='90'></a></td>";
   }
  ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T08:46:28.513

尝试这样做：

```
echo "<img src=images/". $row['photo'] === NULL ? "default_img" : $row['photo'] .
"width='90' height='90'></a></td>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:52:09.770

只需检查是否`$row['photo']`不为空或包含字符串。如果我们得到匹配，则用户有图像，否则，我们可以输出默认图像。下面是一个很好的示例。

**编码**

```
if (!empty($row['photo']) AND isset($row['photo'])){
    // Image is not empty and there is data contained within the array value
    echo "<img src='images/" . $row['photo'] . "' width='90' height='90' />";
} else {
    // There is no data contained within the value, show the default image
    echo "<img src='images/default_image.png' width='90' height='90' />";
} 
```

**这是怎么回事？**

使用`empty()`我们使用它来确定一个字符串（或一个数组）是否为空，如果是，这将返回`FALSE`. `isset()`检查变量是否被设置，如果没有，它将返回`FALSE`。

-- *snip* -- 用户改变了问题，答案改变了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T08:44:53.423

```
if ($rows > 0){
     echo 'the user photo';
else{
     echo 'default photo';
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T08:45:23.953

```
echo "<table class='hovertable' border='1' cellpadding='0' cellspacing='0'>";
echo "<tr><th>Photo</th><th>Teacher Detail</th></tr>";

if ($rows > 0) {
    while ($row = mysql_fetch_array($result)) {

        echo "<tr><td align='center'>";
        if (isset($row['photo']) && !empty($row['photo'])) {
            echo "<img src='images/" . $row['photo'] . "' width='90' height='90'></a></td>";
        } else {
            echo "<img src='images/noimage.jpg' width ='90' height = '90'></a></td>";
        }
        echo '<td valign="top">Teacher Name: ';
        echo $row['name'], '<br/>';
        echo 'Teacher No: ';
        echo $row['teacherno'], '<br/>';
        echo 'Father Name: ';
        echo $row['fathername'], '<br/>';
        echo '</td></tr>';
    }
} else {
    echo "<tr><td colspan = \"5\">No results found!</td></tr>";
}

echo "</table>"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T08:46:54.713

这似乎不是手头代码的完整部分。

但是，如果您的查询完好无损，我建议您删除`die(mysql_error())`，然后在两个 echo 语句之后尝试以下操作：

```
 } else {
    echo "<img src='images/default_image.png' width='90' height='90'>";
 } 
```

另外值得注意的是，您有一个`</a>`没有开始`<a>`标签的终止。这不是有效的 HTML。

# python - 从按钮列表中查找单击了哪个按钮

> ID：16032430
> 
> 赞同：0
> 
> 时间：2013-04-16T08:41:10.500
> 
> 标签：python, tkinter

**问题**

我正在创建一个应用程序来处理一个人的所有联系方式。记录存储在文本文件中，因此第 5 到第 10 索引由用户给出的每个联系人的昵称组成。我想将所有这些昵称作为按钮列出，当用户选择任何一个按钮时，该联系人的详细信息将使用`tkSimpleDialog.showinfo('text','contact details')`.

* * *

**目标**

1.  决定在按钮列表中单击了哪个按钮。
2.  这是我经常面临的一个问题：将参数传递给回调函数

* * *

**代码**

请注意，此代码没有完成我想要实现的功能。

```
buttons = []

inFile = open('test','r')

for i in inFile:

    thisrecord = i    
    buttons.append(Button(self.frame,text='Name: %s' %i[5:10],command=self.show(thisrecord))

inFile.close() 
```

* * *

**我试过的**

当我尝试上面的代码时，发生的事情是每次都显示存储在文件中的最后一条记录，无论我按下什么按钮。我发现了为什么会发生这种情况。显然，按钮都是一次创建的，然后每当调用每个按钮时都会调用回调函数。

如果我的按钮数量有限，那么我绝对可以为每个按钮定义函数，然后将它们用作回调。这就是我在我的应用程序的欢迎页面中所做的事情，该页面具有以下按钮：`add new contact`等等`see details of contact`。

但是在这种情况下，记录的数量不是固定的。所以我在这里修复，不明白该怎么做。

我进一步尝试使用检查按钮，以便用户想要查看的任何记录，他都可以勾选并按继续并继续。但即使这样也失败了，因为首先创建了检查按钮，而不是在代码运行时。

**请**帮我解决这个问题。

* * *

**眼镜**

Linux Mint 14
Python 2.7
tkinter 8.5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:06:36.050

正如您已经注意到的，您`self.show(thisrecord)`甚至可以在创建按钮之前调用，因为这是按钮参数的一部分。您希望将函数用作回调。

因此，要修复它，请创建一个返回可用作回调的函数的函数：

```
# add to your class
def showCallback(self,record):
    """ returns a callback for self.show """
    def callback():                 # make a new function
        return self.show(record)    # that shows the given record
    return callback                 # return this function

for thisrecord in inFile:
    buttons.append(Button(self.frame,text='Name: %s' %i[5:10],
                           command=self.showCallback(thisrecord)) 
```

`self.showCallback(thisrecord)`现在将为每条记录返回不同的函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T09:06:44.797

在您的示例`self.show(thisrecord)`中，在创建 Button 时执行，结果（可能为 None）绑定到`command`.

您想要的是在此处传递一个函数，该函数在您单击按钮时执行，而不是在构建时执行。一种方法是使用`functools.partial`，如下所示：

```
import Tkinter as tk
from functools import partial

root = tk.Tk()
buttons = []
inFile = ['... line1 ...', '... line2 ...', '...']

def show(par):
    print par

for i in inFile:
    thisrecord = i    
    button = tk.Button(root, text='Name: %s' %i[5:10], command=partial(show, thisrecord))
    button.pack()
    buttons.append(button)

tk.mainloop() 
```

或者你可以定义你自己的函数，它返回一个回调函数来完成这项工作。

*注意*：发布示例时，最好包含将其粘贴到解释器中以使其运行所需的所有内容...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T09:07:34.350

你在做什么：`command=self.show(thisrecord)`你实际上是在执行`self.show(..)`带有参数的函数`thisrecord`并将返回值分配给 key `command`。

你实际上应该做什么：

```
command=partial(self.show, thisrecord) 
```

所做[**`partial`**](http://docs.python.org/2/library/functools.html#functools.partial)的是返回一个带有冻结部分参数的新函数。

* * *

另一个例子来演示`partial`：

```
from functools import partial

def fn(x):
    print x

functions = []
for i in range(0,3):
    functions.append(partial(fn, i))

for func in functions:
    func() 
```

# django - django-shop 跳过发货

> ID：16032431
> 
> 赞同：1
> 
> 时间：2013-04-16T08:41:11.753
> 
> 标签：django, python-2.7, django-shop

我正在使用 django-shop，但我不知道如何跳过运输，因为我不需要它。我尝试了几种方法，但没有发现问题。

有人有想法吗？

我试图复制 flate_rate 运费来自己做，但我遇到了一个问题，没有反向匹配。

这是我的文件：

```
# -*- coding: utf-8 -*-
from decimal import Decimal
from django.conf.urls import patterns, url
from django.shortcuts import render_to_response
from django.template import RequestContext
from django.utils.translation import ugettext_lazy as _
from shop.util.decorators import on_method, shop_login_required, order_required

class PostShipping(object):
"""
This is just an example of a possible flat-rate shipping module, that
charges a flat rate defined in settings.SHOP_SHIPPING_FLAT_RATE
"""
    url_namespace = 'post'
    backend_name = 'La Poste'
    backend_verbose_name = _('La Poste')

    def __init__(self, shop):
        self.shop = shop  # This is the shop reference, it allows this backend
        # to interact with it in a tidy way (look ma', no imports!)
        self.rate = 0

@on_method(shop_login_required)
@on_method(order_required)
def view_process_order(self, request):
    """
    A simple (not class-based) view to process an order.

    This will be called by the selection view (from the template) to do the
    actual processing of the order (the previous view displayed a summary).

    It calls shop.finished() to go to the next step in the checkout
    process.
    """
    self.shop.add_shipping_costs(self.shop.get_order(request),
                                 'la poste',
                                 Decimal(self.rate))
    return self.shop.finished(self.shop.get_order(request))
    # That's an HttpResponseRedirect

@on_method(shop_login_required)
@on_method(order_required)
def view_display_fees(self, request):
    """
    A simple, normal view that displays a template showing how much the
    shipping will be (it's an example, alright)
    """
    ctx = {}
    ctx.update({'shipping_costs': Decimal(self.rate)})
    return render_to_response('shop/shipping/flat_rate/display_fees.html',
        ctx, context_instance=RequestContext(request))

def get_urls(self):
    urlpatterns = patterns('',
        url(r'^$', self.view_display_fees, name='flat'),
        url(r'^process/$', self.view_process_order, name='flat_process'),
    )
    return urlpatterns 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:48:15.550

看了一眼[github repo](https://github.com/divio/django-shop/tree/master/shop/shipping/backends)后，似乎没有禁用运输的设置。但是，您可以定义自己的运输后端来自定义事物（使运输静默通过）。

如果您只是销售数字产品，我建议您编写自己的代码，[这并不难。](http://www.packtpub.com/article/setting-up-complete-django-ecommerce-store-30-minutes)

# jquery - jQuery Datatables 的第一行中的单选按钮为空

> ID：16032433
> 
> 赞同：0
> 
> 时间：2013-04-16T08:41:13.883
> 
> 标签：jquery, datatables

我的数据表中有一个问题，第一行的单选按钮总是空的。但是如果我看到它使用 firebug 单选按钮选项被**选中**。

我已经搜索并发现它是 DataTables 中的错误。我已经阅读了所有其他解决方案，但没有一个适合我。有没有人有解决这个问题的方法？

我正在使用以下 **RadioButton**

```
 <input type="radio"
  name="<?php echo $patent['Patent']['id']?>" value="1"
  <?php if($patent['Patent']['review_1']=='1'){ ?>checked="checked"<?php } ?>
  class="<?php if($patent['Patent']['review_1']=='1'){ ?>checked<?php } ?>"
  id="<?php echo $patent['Patent']['id']?>">Yes

 <input type="radio" 
  name="<?php echo $patent['Patent']['id']?>" value="0"
  <?php if($patent['Patent']['review_1']=='0'){ ?>checked="checked"<?php } ?>
  class="<?php if($patent['Patent']['review_1']=='0'){ ?>checked<?php } ?>"
  id="<?php echo $patent['Patent']['id']?>">No 
```

我在带有**fnDrawCallback**函数的 DataTables 代码中使用了以下 jquery 调整，但它也不起作用。

```
"fnDrawCallback": function() {
                  $('.checked input:radio:checked').attr("checked","checked");
                }, 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T08:16:15.337

这是它的快速解决方案。基本上，您需要在应用 DataTable 后通过 JS/jQuery 将单选按钮设置为选中状态。

下面的链接用于扩展演示这是小提琴：

```
//JQuery Code

$(document).ready(function(){  
    $('#department_permissions_table').dataTable();  
} // code to set the value as checked.  

$("#deptartment_permission[2]").attr('checked', 'checked'); );

//JS Code  

radiobtn = document.getElementById("theid"); radiobtn.checked = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:25:06.967

首先，那是什么样的 PHP 脚本？如果它可以工作，请您尝试检查下面的脚本：

```
 <input type="radio"
  name="<?php echo $patent['Patent']['id']; ?>" value="1"
  <?php if($patent['Patent']['review_1'] == 1){ echo 'checked="checked"'; } ?>
  class="<?php if($patent['Patent']['review_1'] == 1){ echo "checked"; } ?>"
  id="<?php echo $patent['Patent']['id']; ?>">Yes

 <input type="radio" 
  name="<?php echo $patent['Patent']['id']; ?>" value="0"
  <?php if($patent['Patent']['review_1'] == 0){ echo 'checked="checked"'; } ?>
  class="<?php if($patent['Patent']['review_1'] == 0){ echo "checked"; } ?>"
  id="<?php echo $patent['Patent']['id']; ?>">No 
```

# css - CSS浮动div但保持最小高度

> ID：16032436
> 
> 赞同：1
> 
> 时间：2013-04-16T08:41:17.733
> 
> 标签：css, html

我需要将 2 个 div #left 浮动到左侧 #right 到右侧，但是当我这样做时，我的 #hold for left 和 right 不会扩展（它设置为 min-height）。

有什么办法可以让 2 个 div 并排浮动，但让它们保持最小高度？

我试过：显示：内联块；但它与 IE 排序是一团糟。我也试过`position:relative`和`position:absolute`。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T08:47:03.400

简单的修复很抱歉给您带来不便，如果其他人遇到同样的问题，只需添加`overflow: hidden;`到您的#hold div。

感谢这篇文章： [如何让两个并排的 div 高度相同？](https://stackoverflow.com/questions/2997767/how-do-i-keep-two-divs-that-are-side-by-side-the-same-height)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-16T16:51:35.350

我有同样的问题并且理解你模糊的描述，我认为这就是你的意思：

[http://jsfiddle.net/QT6jS/8/](http://jsfiddle.net/QT6jS/8/)

解决方案是在所有浮动的底部添加另一个 div，这将清除所有内容。min-height 不会跟随浮点数，但会跟随一个带有 clear:both; 的 div。

```
 <div class="parent_expander" style="clear:both;"></div> 
```

这将为您提供以下结果：

[http://jsfiddle.net/QT6jS/9/](http://jsfiddle.net/QT6jS/9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:45:23.220

您描述的情况的一个基本示例没有问题。

**HTML**

```
<div class="test">Something</div>
<div class="test">Something</div> 
```

**CSS**

```
.test{
    float: left;
    min-height:100px;
    background: yellow;
} 
```

**工作示例** [http://jsfiddle.net/QT6jS/](http://jsfiddle.net/QT6jS/)

# java - 为没有 equals() 的对象创建 hashmap 或 set

> ID：16032437
> 
> 赞同：1
> 
> 时间：2013-04-16T08:41:22.297
> 
> 标签：java, equals

我正在创建一个类的子类 where`equals()`和`hashCode()`are`final`并且基于身份。（特别是带有合约的[XML DOM XOM ：](http://www.xom.nu/apidocs/)

```
public final boolean equals(Object o)

    Tests for Node/Element identity. That is, two Node/Element objects 
    are equal if and only if they are the same object. 
```

`Element`是可子分类的（例如

```
 FooElement extends xom.nu.Element 
```

我广泛使用它。我还开发了平等方法（例如

```
fooElementA.isEqualTo(fooElementB) 
```

我想用它来创建集合和哈希图。

我无法重写 XOM 库，也无法说服作者发布该`equals()`方法。是否有我可以使用的通用解决方法（例如包装器、委托、子类化`HashMap`等）？

注意：`hashCode()`也是最终的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T08:44:35.577

如果这是 .NET，我建议您[`Dictionary`使用自定义`IEqualityComparer<T>`](http://msdn.microsoft.com/en-us/library/ms132072.aspx). 在 Java 中，尽管您需要将对象包装[*到*](http://www.dofactory.com/Patterns/PatternDecorator.aspx)实现`hashCode`和`equals`.

```
final class FooElementWrapper {

  private final FooElement inner;
  public FooElementWrapper(FooElement inner) {
    this.inner = inner;
  }

  @Override
  public int hashCode() {
    return 0; // replace by a proper implementation!!!
  }

  @Override
  public boolean equals(Object o) {
    if(o instanceof FooElementWrapper) {
      return this.isEqualTo((FooElementWrapper)o);
    } else {
      return false;
    }
  }

} 
```

A`Set<FooElementWrapper>`现在应该做这项工作。您绝对应该`hashCode`使用适用于`FooElement`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T09:06:15.063

您可以使用自己的比较器创建[TreeSet](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html)（或[TreeMap ）。](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)

```
Set<Element> set = new TreeSet<Element>(new Comparator<Element>() {
    @Override
    public int compare(Element e1, Element e2) {
        // Your own compare logic
    }
}); 
```

* * *

## 笔记

从文档

> 请注意，如果要正确实现 Set 接口，集合维护的顺序（无论是否提供显式比较器）必须与 equals 一致。

这意味着您没有履行 equals 方法的一般合同。

**当且仅当**您在文档中明确说明您正在做什么时，您才可以使用此方法。

# android - Android 4.2 Jelly bean Dalvik VM 中的垃圾收集如何工作？

> ID：16032438
> 
> 赞同：2
> 
> 时间：2013-04-16T08:41:25.753
> 
> 标签：android, garbage-collection, android-4.2-jelly-bean, dalvik

编辑：这句话“所以在 android 2.3 中并发标记和扫描用于堆栈相关对象，将所有内容视为指针，复制垃圾收集用于堆中的对象”是否正确？任何人都可以解释吗？[android 2.3 中的垃圾收集器](https://stackoverflow.com/questions/4859424/garbage-collector-in-android-2-3)

我知道已经讨论了**Android 中的垃圾收集**主题，但是我找不到关于它如何工作的清晰而详细的解释，特别是在 Android 的最新版本**Jelly Bean 4.2**中。

除了主要问题，我还有两个更具体的问题：

1)实现了**哪些算法**（Mark and Sweep、Concurrent Mark and Sweep、Copying、generational、incremental..）以及它们是如何**适应****实际的 Android/Dalvik 的**？

2）作为初学者，我如何自己**分解它的工作原理**（方法或工具）？

任何输入表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T21:13:48.667

自 Gingerbread (2.3) 以来，Dalvik 的垃圾收集器没有显着变化，因此您可以找到的那个时代或更新版本的任何信息都可能适用于 Jellybean。

它使用并发标记和清除方法。它不复制或压缩，并且有一点世代的概念（对受精卵分配的内存进行优化）。

了解其工作原理的最佳方法是阅读源代码。大多数相关代码位于`dalvik/vm/alloc`.

# javascript - 抽象 jQuery

> ID：16032440
> 
> 赞同：8
> 
> 时间：2013-04-16T08:41:31.817
> 
> 标签：javascript, jquery, design-patterns, architecture, aura.js

在[Nicholas Zakas](http://www.slideshare.net/nzakas/scalable-javascript-application-architecture-2012)和[Addy Osmani](http://www.addyosmani.com/scalablejs/)的这些谈话中，他们讨论了在构建大型 Javascript 应用程序时使用外观模式作为沙箱的想法，以便将应用程序与底层基础库分离。

这种解耦在理论上允许您切换一个基础库，而无需重写您的应用程序模块。然而在实践中，这似乎更难以实施。

这个提议的架构有具体的实现，例如[AuraJS](https://github.com/aurajs/aura)。然而，从查看源代码来看，沙箱似乎仍然通过从它的一些方法返回 jQuery 对象而具有泄漏的抽象。

我并不特别关心 AuraJS，但更多的是尝试抽象像 jQuery 这样的库而不丢失这么多功能的一般概念。

例如，假设我的外观/沙箱有一个 dom 方法`.find(selector)`。我可以想到它可能返回的 3 个选项：

1.  *一个 jQuery 对象*- 这会将 jQuery 泄漏到消费模块中。

2.  *一个原始的 dom 元素*- 功能丧失，没有人真正想要使用它！没有连锁。

3.  *一个自定义的类 jQuery 包装器*- 可能非常复杂，但似乎是理想的解决方案。

所以我的问题是，**你如何在不丢失太多功能的情况下抽象出一个像 jQuery 这样的库，以便在将来的某个时候用最小的努力来替换它？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:53:14.590

这是一个使用模块作为架构的非常简单的示例：

```
<!DOCTYPE html>
<title>Module play</title>
<body>
<script>

// myCore provides all functionality required by modules
// Could use a library in here
var myCore = {

  getContainer: function() {
    // code in here to find a suitable container in which to put widgets
    // This is where different client capabilities will be tested to ensure the
    // widget behaves in it's user agent context - desktop, phone, tablet, pad, etc.

    // very simple shortcut
    return {
            element: document.body,

            // This function could use a general purpose library
            add: function(widget) {
              this.element.appendChild(widget.getElement());
            }
    };

  },

  // This function could use a general purpose library
  getNewWidget: function() {
    var element = document.createElement('div');

    return {

      getElement: function() {
        return element;
      },

      display: function(text) { 

        // Tightly couple to itself or not? 
        this.getElement().innerHTML = '<em>' + text + '</em>';

        // or
        element.innerHTML = '<em>' + text + '</em>';
      }
    }
  }
};

// Missing sandbox layer...

// Add a module - only uses myCore API (access should be controlled by
// the sandbox), does not deal with underlying library or host objects
(function() {

  // Get a container to add a widget too
  var container = myCore.getContainer();

  // Create a widget
  var widget = myCore.getNewWidget();

  // Add the widget to the container
  container.add(widget);

  // Give something to the widget to display
  widget.display('Hello World');

}());

</script>
</body> 
```

所以你可以看到，在模块级别，你并不关心宿主环境或底层库，你只是在编写普通的 ECMAScript。你可以得到真正的防守并做一些事情，比如：

```
(function() {
    var container, widget;

    if (!myCore) return;

    if (myCore.getContainer) { // Some would include an isCallable test too

      container = myCore.getContainer();
    }

    // getWidget could be a method of container instead so that
    // everything you need is either a method or property of container
    // or widget
    if (myCore.getWidget) {
      widget = myCore.getWidget();
    }

    ...
} 
```

依此类推，一切都经过测试和检查。我省略了错误处理，但希望这个例子就足够了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T09:14:05.123

我认为您是在询问是否编写更多模块化代码，但 jquery 不是一个好的案例。

异步模块定义 [http://addyosmani.com/writing-modular-js/](http://addyosmani.com/writing-modular-js/)

# c# - 如何在 Cete Dynamicpdf 中创建项目符号列表？

> ID：16032441
> 
> 赞同：1
> 
> 时间：2013-04-16T08:41:32.127
> 
> 标签：c#

看过 Cete DynamicPDF 文档，但似乎找不到任何关于创建项目符号列表的内容。这肯定是可能的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-05T04:25:16.117

好像这就是你所追求的

[http://www.dynamicpdf.com/support/net_help_library_09_07/ceTe.DynamicPDF~ceTe.DynamicPDF.PageElements.UnorderedList.html](http://www.dynamicpdf.com/support/net_help_library_09_07/ceTe.DynamicPDF~ceTe.DynamicPDF.PageElements.UnorderedList.html)

在 C# 中，这将类似于以下内容（未经测试）

```
var list = new UnorderedList(0, 0, width, height, font, fontSize, UnorderedListStyle.Disc);
list.Items.Add("Item 1");
list.Items.Add("Item 2");
list.Items.Add("Item 3");

currentPage.Elements.Add(list); 
```

# php - 添加具有不同级别php的新用户的最佳方法

> ID：16032446
> 
> 赞同：3
> 
> 时间：2013-04-16T08:41:48.000
> 
> 标签：php, sql

我在 PHP 中创建了一个应用程序，它有用户并且用户有不同的级别，比如说 1、2、3、4。当用户登录时，它会设置一个会话，其中包含他们的级别号。该应用程序根据用户级别显示不同的页面，如下所示：

```
if($role_level > 3)
{
    //Show something
} 
```

现在我想创建一个添加用户部分，用户可以在其中添加新用户并可能从下拉（html 选择）框中为他们定义一个角色。但他们只能定义一个低于自己的角色。我在想这样的事情：

```
<select>
    ("SELECT * FROM `roles` WHERE `roles_level` < $role_level)
    loop results into <options></options>
</select> 
```

对此有何评论？更好的解决方法？以上会有影响吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T08:54:35.950

您的想法似乎可行，但它不是很灵活，因为它允许角色之间的单一直接层次结构。如果您需要分支角色怎么办？例如，您现在可能将“用户”、“发布者”、“审阅者”和“管理员”作为当前的 1、2、3 和 4。

用户只能阅读文章，出版商也可以撰写和编辑他们的文章，审稿人也可以编辑其他出版商的文章，管理员也可以做管理工作。

如果你想要一个主持人角色怎么办？版主可以编辑任何人的文章，但不能撰写新文章。你将如何实现它？你不能用你当前的模型。

建议你定义一个“roles”表，一个“actions”表，以及它们之间的NM关系表：

角色：

*   1、用户
*   2、出版商
*   3、审稿人
*   4、管理员
*   5、article_moderator

行动：

*   1、read_post
*   2、write_post
*   3、edit_own_post
*   4、edit_others_post
*   5、管理工具

Roles_Actions：

*   1,1
*   2,1
*   2,2
*   2,3
*   3,1
*   3,2
*   3,3
*   3,4
*   4,1
*   4,2
*   4,3
*   4,4
*   4,5
*   5,1
*   5,4（注意版主 (5) 不能 write_own_post 甚至不能 edit_own_post 而只能 edit_others_post）

当然，这更复杂，但未来更灵活

我建议你也阅读这个答案： @Vyktor 的[LINK](https://stackoverflow.com/a/16033401/998759)，它解释了 ACL 概念，对大型项目很有用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T09:29:23.317

我认为 STT LCU 已经提供了一个[很好的答案](https://stackoverflow.com/a/16032701/1149736)，但是出于学习目的（*是的，这只是一个扩展*）我想添加示例如何在生产环境中（并且已经完成），我最喜欢的示例 - [Zend Framework 的**A** ccess控制**列表**](http://framework.zend.com/manual/1.12/en/zend.acl.introduction.html)****。[**_**](http://framework.zend.com/manual/1.12/en/zend.acl.introduction.html) [_](http://framework.zend.com/manual/1.12/en/zend.acl.introduction.html)****

 ****他们指定了三个单独的项目/对象/不确定如何调用它们：

*   **资源**- 你指的是什么，这可以是*大项目*，如`Forums`, `News`, `Articles`... 或*原子项目*，如`Forums_<forum_id>_others_posts_title`. 这应该取决于您期望有多少用户以及结构的复杂程度。如果您只有 10 个用户和 1 个管理员，那么您可以为整个站点使用一个资源。另一方面......想象你是谷歌，有成千上万的应用程序在你的控制之下，你想提出统一和集中的 ACL 控制......很多很多很多资源。
*   **角色**- 这应该是不言自明的，但示例：`Banned`, `Visitor`, `User`, `ForumModerator`, `ArticlesModerator`, `SiteAdministrator`. 在最佳框架（例如提到的 Zend）中，您可以构建层次结构并继承角色之间的访问权限。
*   **访问控制**- `Visitor can list list articles, but cannot read them`...这又是一件应该很直观的事情，但这里有一点争议：
    *   *使用层次结构*- 假设您指定这样的层次结构`none < list < read < write < create < edit < delete`，并自动将您全部放在左侧，例如自动写入授予您读取和列出。这很好，很直观……但是当这种方法没用时，这里有一个例子：*Black box*，您希望用户在其中发布项目，而不是阅读它们。
    *   *使用标志*- **x chmod style* 访问由以下位置确定`flag`：
        *   1 - 执行/列出目录内容
        *   2 - 写
        *   4 - 阅读
            Where you can use binary and to check access: `access&WRITE`，或使用具有大量列的 sql 模式。

总结一下：你可以做的事情很多，我真的**建议**阅读 Zend 的 ACL，这样你会感觉到 API 的**外观**，也许你会意识到一些你不会想到的可能的缺点自己的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T08:51:23.983

如果角色像你说的那样静态（1,2,3,4），那么我建议跳过额外的数据库命中并使用快速`for`循环！

```
<select>
<?php
for( $iRole = $role_level - 1; $iRole > 0; --$iRole )
    echo '<option value='.$iRole.'>'.$iRole.'</option>';
?>
</select> 
```

否则，您似乎走在正确的轨道上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T09:02:32.077

好的，您可以拥有一个包含权限的表。如果级别数不多，您还可以创建不同的数据库帐户。对不同部分具有不同的访问权限。

并且要小心你应该检查这个人和他/她想做的事情。我的意思是仅仅显示一个选项是不够的，你应该检查服务器端的权限。

并且您可以像@STT LCU 所说的那样创建操作和用户（角色）。

但这还不够，因为您需要一个代码或类似权限检查器的类。使用它您可以检查权限。

```
if($perm->IsHaveAccess('editing_post')){
//the logic
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-16T09:13:31.053

您的问题有一个非常好的解决方案。它是 ACL（访问控制列表）。

有角色和资源，您可以访问它:)

Zend Site 有一个例子。

```
$acl = new Zend_Acl();

$acl->addRole(new Zend_Acl_Role('guest'))
    ->addRole(new Zend_Acl_Role('member'))
    ->addRole(new Zend_Acl_Role('admin'));

$parents = array('guest', 'member', 'admin');
$acl->addRole(new Zend_Acl_Role('someUser'), $parents);

$acl->add(new Zend_Acl_Resource('someResource'));

$acl->deny('guest', 'someResource');
$acl->allow('member', 'someResource');

echo $acl->isAllowed('someUser', 'someResource') ? 'allowed' : 'denied'; 
```

更多关于[http://framework.zend.com/manual/1.12/en/zend.acl.introduction.html](http://framework.zend.com/manual/1.12/en/zend.acl.introduction.html)

我被教导说，如果有一些东西写得很好并且有效，那么浪费时间去写新东西是没有意义的。

这些角色、资源和它们之间的关系可以保存在数据库中，并在需要时加载。

这是一个非常基本的示例，Zend_Acl 为您提供了一个非常强大的工具，这取决于您如何使用它。如果您不想使用 Zend Class，您可以查看它并以类似的方式设计您的类。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-16T08:48:40.773

如果您知道您将拥有所有可用的数字（即，您不会选择 1、2、5、6、20），那么这样做会容易得多：

```
foreach(range(1,$role_level-1) as $level):
    echo "<option value='$level'>Level $level</option>";
endforeach; 
```

而且，是的，你的想法将足够有效，可以做一个基本的权限系统。****

# html - IE10 css Hover 不适用于触摸设备

> ID：16032448
> 
> 赞同：2
> 
> 时间：2013-04-16T08:41:50.560
> 
> 标签：html, css, menu, touch, internet-explorer-10

嗨，我的页面上有一个简单的 CSS 悬停菜单，但在使用触摸设备时，它似乎不适用于 IE10。

这个问题有什么解决办法吗？

示例：http: [//jsfiddle.net/Z8Q8T/](http://jsfiddle.net/Z8Q8T/)

html:

```
<ul class="Menu">
  <li>
    <a href="javascript:void(0);">First</a>
    <ul>
      <li>
        <a href="#1" class="Active">1</a>
      </li>
      <li>
        <a href="#2">2</a>
      </li>
      <li>
        <a href="#3">3</a>
      </li>
      <li>
        <a href="#4">4</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="javascript:void(0);">Second</a>
    <ul>
      <li>
        <a href="#5">5</a>
      </li>
      <li>
        <a href="#6">6</a>
      </li>
      <li>
        <a href="#7">7</a>
      </li>
      <li>
        <a href="#8">8</a>
      </li>
    </ul>
  </li>
</ul> 
```

CSS：

```
.Menu, .Menu ul {
    list-style: none;
    display: block;
    margin: 0;
}
.Menu > li {
    float: left;
    padding-bottom: 1px;
    margin: 0 10px;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 11px;
    text-transform: uppercase;
}
.Menu > li:hover, .Menu > li:active {
    position: relative;
}
.Menu li a {
    display: block;
    color: #000000;
    text-decoration: none;
}
.Menu > li > a {
    border-bottom-style: solid;
    border-bottom-width: 3px;
    border-bottom-color: transparent;
}
.Menu > li > a:hover, .Menu > li > a:active {
    border-bottom-color: #A9A9A9;
}
.Menu li > ul {
    margin-top: 0px;
    /* to ensure that we dont leave the ul and the hovering effect stops */
    border-radius: 0 0 3px 3px;
    -o-border-radius: 0 0 3px 3px;
    -ms-border-radius: 0 0 3px 3px;
    box-shadow: 0px 0px 3px #888;
    padding: 0px 2px 2px 2px;
    background-color: White;
    position: absolute;
    left: -4000px;
    /* Hack to fix animation */
    min-width: 100%;
    opacity: 0;
    transition: opacity 0.2s linear;
    -webkit-transition: opacity 0.2s linear;
    -moz-transition: opacity 0.2s linear;
}
.Menu li:hover > ul, .Menu li a:active + ul {
    left: -4px;
    z-index: 100;
    opacity: 1;
}
.Menu li ul > li {
    border-left-style: solid;
    border-left-width: 3px;
    border-left-color: transparent;
    padding: 0 3px;
    margin: 3px 0;
    white-space: nowrap;
}
.Menu li ul > li:hover, .Menu li ul > li:active {
    border-left-color: #A9A9A9;
}
.Menu li ul > li.Active {
    border-left-color: black;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T08:58:23.300

您可以在`:focus`每次使用时添加，`:hover`这将使菜单与选项卡和移动设备一起使用。

希望这对您有所帮助。

编辑：注意：您可以更好地隐藏折叠打开的菜单并使其在悬停和聚焦时可见。它现在构建的方式点击选项卡仍然会通过“不可见”链接。而且，遗憾的是，它们现在不会下降焦点。

解决方案？：我做了一些努力并找到了“修复”。[这个 jsFiddle](http://jsfiddle.net/Z8Q8T/3/)应该可以工作。但仍应`:focus`在其他 CSS 规则中添加以使样式在所有情况下都正常。当“下拉”中的链接成为焦点时，菜单应保持打开状态。（但我认为这不会在移动设备上造成任何问题。）

我只是改变了一点CSS：

```
.Menu li a:hover + ul,
.Menu li a:focus + ul,
.Menu li a:active + ul
{
    left: -4px;
    z-index: 100;
    opacity: 1;
} 
```

注意'+'。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-11T16:14:37.257

Win8 上的 IE 10 似乎通过 aria 属性有一个解决方案：http: [//msdn.microsoft.com/en-us/library/jj152141%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/jj152141%28v=vs.85%29.aspx)

"在具有切换交互内容可见性的悬停行为的页面元素上，将元素的 aria-haspopup 属性设置为 "true" "
"当启用触摸的设备上的 Internet Explorer 10 用户第一次点击页面元素时，用户的体验将与将光标悬停在元素上的用户相同。在用户点击页面上的其他位置、再次点击元素或导航到另一个页面之前，该元素将保持悬停状态。此外，默认第一次点击页面元素时不会执行 onclick 事件的操作（例如链接导航）。”

# rest - REST POST 没有数据？

> ID：16032449
> 
> 赞同：0
> 
> 时间：2013-04-16T08:41:52.340
> 
> 标签：rest, symfony, fosrestbundle

我正在尝试使用 Symfony2 创建一个 REST 服务。我关注了几篇文章，并让 GET 函数正常工作；我能够获取我的对象列表或特定对象列表。但是使用 POST 将我的对象保存到数据库中是行不通的。我正在使用 FOSRestBundle。

我创建了我的实体 Coldlead、我的表单 ColdleadType，并在控制器中创建了我的 newAction。但是，当我在 bash 上使用 curl 测试 POST 操作时，FORM 似乎没有收到任何信息。

这是我执行的命令：

```
curl -v -H "Accept: application/json" -H "Content-type: application/json" -X POST -d '{"coldlead":{"registeredAt":"2013-04-12", "firstName": "John", "lastName": "Doe"}}' http://mvibesemail.roland.local/app_dev.php/coldleads | less 
```

回应是：

```
{"form":{"children":{"firstName":[],"lastName":[],"email":[],"registeredAt":{"errors":["This value should not be blank."],"children":{"date":{"children":{"year":[],"month":[],"day":[]}},"time":{"children":{"hour":[],"minute":[]}}}},"ip":[],"fromSiteUrl":[],"isConfirmed":[],"isVerified":[],"isMember":[],"unsubscribeUrl":[]}}} 
```

我想我错过了最后一个链接。也许与序列化程序有关。希望有人能给我一个提示。

我阅读（并尝试过）的文章是：

*   [http://williamdurand.fr/2012/08/02/rest-apis-with-symfony2-the-right-way/](http://williamdurand.fr/2012/08/02/rest-apis-with-symfony2-the-right-way/)
*   [http://npmasters.com/2012/11/25/Symfony2-Rest-FOSRestBundle.html](http://npmasters.com/2012/11/25/Symfony2-Rest-FOSRestBundle.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:05:38.270

我的问题是日期时间字段。我将 ColdLeadType 更改为：

```
$builder
  // ...
  ->add('registeredAt', 'date', array(
      'widget' => 'single_text',
      'format' => 'yyyy-MM-dd'
    )
  ) 
```

现在我可以让它与命令行 curl 一起工作。

# c# - 以毫秒精度获取 DateTime.Now

> ID：16032451
> 
> 赞同：265
> 
> 时间：2013-04-16T08:41:56.690
> 
> 标签：c#, datetime, precision, milliseconds

如何以毫秒精度准确构建实际时间的时间戳？

我需要像 16.4.2013 9:48:00:123 这样的东西。这可能吗？我有一个应用程序，我每秒对值进行 10 次采样，我需要在图表中显示它们。

* * *

## 回答 #1

> 赞同：346
> 
> 时间：2013-04-16T08:45:29.870

> 如何以毫秒精度准确构建实际时间的时间戳？

我怀疑你的意思是毫秒*精度*。`DateTime`具有很高的精度，但在精度方面相当粗糙。一般来说，你不能。通常系统时钟（从中`DateTime.Now`获取数据）的分辨率约为 10-15 毫秒。有关更多详细信息，请参阅 Eric Lippert[关于精度和准确性的博客文章](https://docs.microsoft.com/archive/blogs/ericlippert/precision-and-accuracy-of-datetime)。

如果您需要比这更准确的时间，您可能需要考虑使用 NTP 客户端。

但是，尚不清楚您是否真的需要毫秒精度。如果您不关心*确切的*时间 - 您只想以正确的顺序显示样本，并具有“相当不错”的准确性，那么系统时钟应该没问题。我建议您使用`DateTime.UtcNow`而不是使用`DateTime.Now`，以避免围绕夏令时转换等的时区问题。

如果您的问题*实际上*只是将 a 转换为`DateTime`毫秒精度的字符串，我建议使用：

```
string timestamp = DateTime.UtcNow.ToString("yyyy-MM-dd HH:mm:ss.fff",
                                            CultureInfo.InvariantCulture); 
```

（请注意，与您的样本不同，这是可排序的，并且不太可能导致混淆它是“月/日/年”还是“日/月/年”。）

* * *

## 回答 #2

> 赞同：131
> 
> 时间：2013-04-16T08:45:01.627

这应该有效：

```
DateTime.Now.ToString("hh.mm.ss.ffffff"); 
```

如果您不需要显示它并且只需要知道时差，请不要将其转换为字符串。就这样吧，`DateTime.Now();`

并用于`TimeSpan`了解时间间隔之间的差异：

例子

```
DateTime start;
TimeSpan time;

start = DateTime.Now;

//Do something here

time = DateTime.Now - start;
label1.Text = String.Format("{0}.{1}", time.Seconds, time.Milliseconds.ToString().PadLeft(3, '0')); 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2017-01-05T17:22:44.857

我正在寻找一个类似的解决方案，基于这个线程上的建议，我使用以下 `DateTime.Now.ToString("MM/dd/yyyy hh:mm:ss.fff")` ，它就像魅力一样工作。注意：这`.fff`是您希望捕获的精度数字。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2018-01-31T19:23:59.517

使用具有毫秒和格式的 DateTime 结构，如下所示：

```
string timestamp = DateTime.UtcNow.ToString("yyyy-MM-dd HH:mm:ss.fff", 
CultureInfo.InvariantCulture);
timestamp = timestamp.Replace("-", "."); 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2013-11-29T00:15:52.777

[Pyromancer 的回答](https://stackoverflow.com/questions/16032451/get-datetime-now-with-milliseconds-precision/16032507#16032507)对我来说似乎相当不错，但也许你想要：

```
DateTime.Now.Millisecond 
```

但是，如果您要比较日期，则 TimeSpan 是要走的路。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-02-16T20:16:14.930

如果您仍然想要一个日期而不是像其他答案那样的字符串，只需添加此扩展方法。

```
public static DateTime ToMillisecondPrecision(this DateTime d) {
    return new DateTime(d.Year, d.Month, d.Day, d.Hour, d.Minute,
                        d.Second, d.Millisecond, d.Kind);
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-07-25T16:39:19.867

据我了解这个问题，你可以去：

```
DateTime dateTime = DateTime.Now;
DateTime dateTimeInMilliseconds = dateTime.AddTicks(-1 * dateTime.Ticks % 10000); 
```

这将切断小于 1 毫秒的滴答声。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-04-30T16:25:19.373

`DateTime.UtcNow`和的问题`DateTime.Now`在于，根据计算机和操作系统的不同，它可能只能精确到 10 到 15 毫秒之间。但是，在 Windows 计算机上，可以使用低级函数[GetSystemTimePreciseAsFileTime](https://msdn.microsoft.com/en-us/library/windows/desktop/hh706895(v=vs.85).aspx)来获得微秒精度，请参见`GetTimeStamp()`下面的函数。

```
 [System.Security.SuppressUnmanagedCodeSecurity, System.Runtime.InteropServices.DllImport("kernel32.dll")]
    static extern void GetSystemTimePreciseAsFileTime(out FileTime pFileTime);

    [System.Runtime.InteropServices.StructLayout(System.Runtime.InteropServices.LayoutKind.Sequential)]
    public struct FileTime  {
        public const long FILETIME_TO_DATETIMETICKS = 504911232000000000;   // 146097 = days in 400 year Gregorian calendar cycle. 504911232000000000 = 4 * 146097 * 86400 * 1E7
        public uint TimeLow;    // least significant digits
        public uint TimeHigh;   // most sifnificant digits
        public long TimeStamp_FileTimeTicks { get { return TimeHigh * 4294967296 + TimeLow; } }     // ticks since 1-Jan-1601 (1 tick = 100 nanosecs). 4294967296 = 2^32
        public DateTime dateTime { get { return new DateTime(TimeStamp_FileTimeTicks + FILETIME_TO_DATETIMETICKS); } }
    }

    public static DateTime GetTimeStamp() { 
        FileTime ft; GetSystemTimePreciseAsFileTime(out ft);
        return ft.dateTime;
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-08T13:51:19.513

`DateTime`另一种选择是从源`DateTime`值构造一个新实例：

```
// current date and time
var now = DateTime.Now;

// modified date and time with millisecond accuracy
var msec = new DateTime(now.Year, now.Month, now.Day, now.Hour, now.Minute, now.Second, now.Millisecond, now.Kind); 
```

无需进行任何 to-string 和 from-string 转换，而且它也是非常易于理解和可读的代码。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-12-03T15:42:16.163

尝试使用 datetime.now.ticks。这提供了纳秒级精度。取两个刻度的增量 (stoptick - starttick)/10,000 是指定间隔的毫秒数。

[https://docs.microsoft.com/en-us/dotnet/api/system.datetime.ticks?view=netframework-4.7.2](https://docs.microsoft.com/en-us/dotnet/api/system.datetime.ticks?view=netframework-4.7.2)

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2017-08-04T13:00:42.257

```
public long millis() {
  return (long.MaxValue + DateTime.Now.ToBinary()) / 10000;
} 
```

如果您想要微秒，只需更改`10000`为`10`，如果您想要微秒的 10，请删除`/ 10000`。

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2014-04-01T08:38:33.317

DateTime.Now.ToString("ddMMyyyyhhmmssffff")

# objective-c - 从 TTStyledTextLabel 迁移

> ID：16032459
> 
> 赞同：0
> 
> 时间：2013-04-16T08:42:28.923
> 
> 标签：objective-c, xcode, three20

我正在使用 Three20 框架中的 TTStyledTextLabel。我只是将它用于文本标记，例如**粗体文本**。现在我应该从 Three20 迁移。

实现 TTStyledTextLabel 功能的最简单方法是什么？可能有 TTStyledTextLabel 等价物吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:01:17.260

看看[TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel)。它的工作方式类似于 iOS 6 中的 UILabel，但支持 iOS 5（甚至可能是 iOS 4）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:49:53.083

看看标准[`UILabel`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UILabel_Class/Reference/UILabel.html)。它支持[`NSAttributedString`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSAttributedString_Class/Reference/Reference.html)从 iOS 6 开始。

# javascript - 回调函数中的引用

> ID：16032462
> 
> 赞同：2
> 
> 时间：2013-04-16T08:42:42.883
> 
> 标签：javascript, tween

我试图通过回调函数传递一个对象，`onUpdateTween( groups[i], this );`但它没有给我正确的对象。它只给了我来自 groups 数组的最后一个对象。我该如何解决这个问题？

```
function transform( duration ) {    
   for ( var i = 0; i < groups.length ; i ++ ) {                    

      new TWEEN.Tween(object.rotation)
      .to( rot , duration )
      .easing( TWEEN.Easing.Exponential.InOut ) 
      .onUpdate( function() {
                   onUpdateTween( groups[i], this );
                 })
      .start();                 

   }    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:51:05.630

您应该创建一个本地范围以封装此变量：

```
function transform( duration ) {    
   for ( var i = 0; i < groups.length ; i ++ ) {                    

      new TWEEN.Tween(object.rotation)
          .to( rot , duration )
          .easing( TWEEN.Easing.Exponential.InOut ) 
          .onUpdate( updateTween(i, this) )
          .start();                 

   }    
}

function updateTween(index, object) {
    return function() {
        onUpdateTween( groups[index], object );
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T08:53:22.093

只需在循环中调用一个函数：

```
function transform( duration ) {    
    for ( var i = 0; i < groups.length; i ++ ) {
        transformGroup( groups[i] );
    }

    function transformGroup( group ) {
        new TWEEN.Tween(object.rotation)
            .to( rot, duration )
            .easing( TWEEN.Easing.Exponential.InOut ) 
            .onUpdate( function() {
                onUpdateTween( group, this );
            })
            .start();                 
    }    
} 
```

每次调用该`transformOne()`函数时，它都会创建一个包含`group`参数的闭包，以便`onUpdate()`处理程序获取正确的组。

或另一种方法来做同样的事情：

```
function transform( duration ) {    
    for ( var i = 0; i < groups.length; i ++ ) {
        transformGroup( groups[i], duration );
    }
}

function transformGroup( group, duration ) {
    new TWEEN.Tween(object.rotation)
        .to( rot, duration )
        .easing( TWEEN.Easing.Exponential.InOut ) 
        .onUpdate( function() {
            onUpdateTween( group, this );
        })
        .start();                 
} 
```

无论哪种方式都可以。

是`this`在那里获得你需要的价值，还是这也是一个问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:44:24.000

```
function transform( duration ) {    
   for ( var i = 0; i < groups.length ; i ++ ) {                    
      with({i:i}) {
          new TWEEN.Tween(object.rotation)
          .to( rot , duration )
          .easing( TWEEN.Easing.Exponential.InOut ) 
          .onUpdate( function() {
                       onUpdateTween( groups[i], this );
                     })
          .start();                 

       }
   }
} 
```

:D

# c++ - 如何将二进制值分配给 mpz_class 对象

> ID：16032463
> 
> 赞同：0
> 
> 时间：2013-04-16T08:42:45.430
> 
> 标签：c++, gmp

我想为 mpz_class 对象分配一个二进制值

我有一个二进制数 10011101111001111100010111000011111010010。

我想将它分配给值对象，即（mpz_class 值）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-06T06:01:51.320

我写这篇文章是希望任何找到解决方案的人都有更好的选择来实现所描述的功能。

GMP 提供了将 mpz 结构导出和导入二进制文件的功能，它们是：

```
mpz_import(mpz_t rop, size_t count, int order, size_t size, int endian, size_t nails, const void *op)
mpz_export(void *rop, size_t *countp, int order, size_t size, int endian, size_t nails, const mpz_t op) 
```

它们在[Integer Import and Export](https://gmplib.org/manual/Integer-Import-and-Export.html)中有更好的描述。通常，您使用 mpz_export 命令导出 mpz_t 结构，它将以 W|W|W|W|W 的格式输出二进制数组，其中 W 是您指定为 Word 的二进制字节组。order 参数以 Word 形式指定二进制的字节序，endian 参数指定 W（二进制字节组）内部的字节序。

所以在上面的例子中，如果我们有一个数字的二进制表示

```
const char num[100];
// assuming some initialization of num from may be inbound network packet? 
```

我们可以使用二进制文件创建 mpz_t

```
mpz_t res; mpz_init(res);
mpz_import(res, 100, -1, 1, -1, 0, num); 
```

假设我们拥有的字节是小端序，Word 的大小是 1 个字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:47:27.937

这是一种方法，是否是您需要的我不能说，因为您仍然没有很好地描述您的问题

```
mpz_class value("1356396726226", 10); 
```

这是另一种方式

```
mpz_class value("10011101111001111100010111000011111010010", 2); 
```

这两个示例都使用带字符串的 mpz_class 构造函数。也许这就是你要找的。

# bluetooth - MIDI 蓝牙

> ID：16032465
> 
> 赞同：6
> 
> 时间：2013-04-16T08:42:51.070
> 
> 标签：bluetooth, midi, latency, bluetooth-lowenergy, rfcomm

我正在启动一个通过蓝牙进行无线 MIDI 连接的项目。据我所知，BT 规范中没有定义 MIDI 配置文件。

我想知道你们中的一些人是否有兴趣分享有关在 BT 上使用 MIDI 的最佳方式的经验，尤其是关于延迟问题。

我的项目基于 BT 低能耗 (BTLE)，我现在正在尝试找到要使用的最佳 BT 配置文件，可能是串行端口 RFCOMM 现有配置文件，还是新的自定义配置文件？

任何提示将不胜感激。最佳杰罗姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T07:18:50.950

像 RFCOMM 这样的配置文件不属于 BTLE，而是属于蓝牙经典。

在音乐应用程序中，您应该关心延迟。从第一个字节开始的时间是从 MIDI 键盘发送到它到达目的地的时间真的很重要。SPP / RFCOMM 中没有确切的波特率，但吞吐量取决于两侧。 [http://snapshot.bluecove.org/bluecove-examples/bluecove-tester/speed.html](http://snapshot.bluecove.org/bluecove-examples/bluecove-tester/speed.html)

如果您输入 MIDI（31250 BAUD），通过“通道”发送，通过 MIDI（31250 BAUD）发送，那么您需要查看 2 件事：1）吞吐量，必须足够大以“接收”和“源” ' Midi In 和 Midi Out 2) 延迟，必须足够快以使其在“音乐上”准确。

一个 Midi ON 事件大约需要 30 个信号位，因此您每秒可以发送大约 104 个 Midi 事件。延迟约为 10 毫秒。

在 iOS 上，如果您违反建议，最快的连接间隔（大约 20 个字节的 1 个块）约为 19 毫秒，如果您遵循建议，则为 39 毫秒。总延迟将是：Midi In (10ms) + BTLE GATT (up to 39ms) + Midi Out (10ms) = 60ms。比普通 MIDI 电缆慢 6 倍。最小 BTLE 连接间隔为 7.5 毫秒，但您会在最低级别丢失数据包，所以我们只说 10 毫秒：Midi In (10ms) + BTLE (10ms) + Midi Out (10ms) = 30ms。还不错，但也不是很令人印象深刻。在每个连接间隔中，您可以打包大约 20 字节，因此应该有足够的带宽或吞吐量。

看看这个 BTLE RFCOMM 项目：http: [//support.connectblue.com/display/PRODBTSPA/Bluetooth+Low+Energy+Serial+Port+Adapter+-+Getting+Started](http://support.connectblue.com/display/PRODBTSPA/Bluetooth+Low+Energy+Serial+Port+Adapter+-+Getting+Started)

# c - 试图找到偶数，但程序似乎不起作用

> ID：16032468
> 
> 赞同：0
> 
> 时间：2013-04-16T08:43:10.210
> 
> 标签：c

我编写了一个程序来确定您的输入是否均匀，但它似乎不起作用。似乎是什么问题？

```
#include<stdio.h>
int main() {
  int x, y;
  x = 0;
  while (x < 5) {
    printf("input a number\n");
    scanf("%d", y);
    if (y % 2 == 0) printf("your number is an even number\n");
    else print("your number is not an even number\n");
    x++;
  }
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T08:52:45.597

`scanf`需要一个指向输出变量的指针：

```
scanf("%d", &y); 
```

它不是 C++ 函数，因此它不能通过引用接受变量。

# android - 使用jquerymobile在phonegap中下载多个文件

> ID：16032469
> 
> 赞同：0
> 
> 时间：2013-04-16T08:43:11.190
> 
> 标签：android, ios, cordova, mobile, download

正如标题所说：有没有办法使用jquery mobile在phonegap中下载多个文件？

例如点击一个链接，然后下载一个漏洞库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:51:48.853

您可以使用 Phone gap FILE API 文件传输对象来执行此操作

如果你想下载多个文件，那么你可以在循环中使用文件传输，或者如果下载文件是 zip 格式，那么文件传输和[提取 zip 插件对你来说很容易](https://github.com/phonegap/phonegap-plugins/tree/master/Android/ExtractZipFile)

方法一>

示例文件传输代码：

配置 Zip 插件然后应用此代码

```
function download(remoteFile)
{
      var localFileName = remoteFile.substring(remoteFile.lastIndexOf('/') + 1);
          window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function (fileSystem) {
              fileSystem.root.getFile(localFileName, { create: true, exclusive: false }, function (fileEntry) {
                  var localPath = fileEntry.fullPath;
                  console.log("localPath1:" + localPath);
                  if (device.platform === "Android" && localPath.indexOf("file://") === 0) {
                      localPath = localPath.substring(7);
                  }
                  console.log("localPath2 save:" + localPath);
                console.log("thid is localFileName :"+localFileName);
                  extractFile(localFileName); //No need for other formated file except zip file.
                  var ft = new FileTransfer();
                  ft.download(remoteFile,
                      localPath, function (entry) {
                          console.log("file path:" + entry.fullPath);
                          var linkopen = document.getElementById("openlink");
                          linkopen.style.display = "block";
                          linkopen.href = entry.fullPath;
                          var zippath = entry.fullPath;
                          console.log(zippath);
                          $("#btnExtract").show();

                      }, fail);
              }, fail);
          }, fail);
       console.log("completed");
} 
```

*这里写这个代码是为了考虑Zipfile。您需要更改代码。

方法二：删除

> 提取文件（本地文件名）；

从代码

# cocos2d-iphone - 关于以这种方式切换场景

> ID：16032473
> 
> 赞同：0
> 
> 时间：2013-04-16T08:43:22.767
> 
> 标签：cocos2d-iphone

[我想以与我的swf 演示](https://dl.dropboxusercontent.com/u/76275795/ScenesSwitch.swf)相同的方式切换场景（对不起，我的英语很差。:(

Scene1 正在运行，然后上面的图片下降到中心，下面的图片同时上升到中心。这两张照片关闭了`scene 1`。然后图片上下颠倒回去。同时，`scene2`正在显现。

我的朋友告诉我这是 about `CCTransition`，但没有相同的效果过渡。
我想在 中，我写图片在功能中`scene1`移到中心，而在 中，我写图片在 中移回外部。但它并不完美。 `onExitTransitionDidStart``scene2``onEnterTransitionDidFinish`

# node.js - 为meteor.com平台构建NodeJS模块

> ID：16032485
> 
> 赞同：1
> 
> 时间：2013-04-16T08:44:06.230
> 
> 标签：node.js, meteor, npm

我正在使用 MeteorJS 0.6.1 和 NPM 集成。

对于流星应用程序，我需要使用 NodeJS 模块[node-time](https://github.com/TooTallNate/node-time)。需要构建此模块才能运行。在我的电脑上它可以工作，但它是为本地平台构建的：Mac OS ..

当我执行“ **meteor deploy mysite.meteor.com** ”时，我在 meteor.com 云上收到以下错误：

> 信息错误：/meteor/containers/xxx-yyy/bundle/app/packages/time/node_modules/time/build/Release/time.node：无效的 ELF 标头

我想问题是，meteor.com 和我的 mac 不是同一个平台。

所以问题是，我怎样才能“准备”/“构建”/“配置”我的应用程序能够在meteor.com 平台上运行。

PS：[Meteor 0.6.0：全新的分发系统、应用程序包、NPM 集成](http://meteor.com/blog/2013/04/04/meteor-060-brand-new-distribution-system-app-packages-npm-integration)：

> 如果 NPM 模块具有特定于架构的二进制组件，则使用流星捆绑包或流星部署构建的包将包含为开发人员平台构建的组件，并且可能无法在其他平台上运行。

# python - 字符串中的字符替换：如何使用正则表达式？

> ID：16032487
> 
> 赞同：0
> 
> 时间：2013-04-16T08:44:08.967
> 
> 标签：python, regex, string

我在用这个替换之前的空格 - 工作，但是 - 非常不雅的代码：

```
my_string = "There , are , many , wrong . spaces , before interpunction  marks !"

my_string.replace(" ,", ",").replace(" .", ".").replace(" !", "!").replace(" ?", "?") 
```

现在我试图想出一个更优雅的解决方案，即正则表达式。但我得到的只是：

```
import re
my_string = re.sub(r"[\s]+[,.!?]", XXX, my_string) 
```

我只是不明白如何让**XXX**用`whitespace+mark`相应的`mark`. 或者如何简单地去除所有标记之前的每个空格 - 这也可以......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:45:59.550

您想为标点符号创建一个捕获组，然后在替换表达式中引用该组：

```
re.sub(r'\s+([,.!?])', r'\1', my_string) 
```

您不需要在`\s`;周围使用括号。它已经是一个字符类。

示范：

```
>>> import re
>>> my_string = "There , are , many , wrong . spaces , before interpunction  marks !"
>>> re.sub(r'\s+([,.!?])', r'\1', my_string)
'There, are, many, wrong. spaces, before interpunction  marks!' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T08:47:49.253

您需要使用括号捕获标点符号，然后使用`\1`:

```
import re
my_string = "There , are , many , wrong . spaces , before interpunction  marks !"
my_string = re.sub(r"[\s]+([,.!?])", r"\1", my_string)
print my_string  # There, are, many, wrong. spaces, before interpunction  marks! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:45:59.277

添加捕获组：

```
[\s]+([,.!?]) 
```

然后在替换中使用它：

```
\1 
```

\n 表示第 n 个捕获组，\0 表示整个匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T08:52:51.200

最后一行应该是这样的：

```
my_string = re.sub(r"\s+([,.!?])", r'\1', my_string) 
```

模式部分中的括号组成了一个组，然后你引用该组，`\1`因为它是第一个也是唯一的组。

# wix - 在安装开始之前运行 wix 自定义操作

> ID：16032488
> 
> 赞同：3
> 
> 时间：2013-04-16T08:44:12.000
> 
> 标签：wix, wix3.5

在 WiX 中显示第一个 UI 之前，有什么方法可以运行自定义操作？这是因为，我需要在开始安装之前停止任务计划程序任务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T14:24:00.203

当然，只需在`InstallUISequence`. 例如，如果您使用任何标准的 WixUI 对话框：

```
<InstallUISequence>
   <Custom Action='StopTaskScheduler' Before='PrepareDlg' />
</InstallUISequence> 
```

注意：此操作不会被提升执行。

# javascript - Bootstrap 中的 Typeahead：当输入不匹配时，建议保留在那里

> ID：16032491
> 
> 赞同：1
> 
> 时间：2013-04-16T08:44:15.787
> 
> 标签：javascript, twitter-bootstrap, typeahead.js

  我在 Bootstrap 中使用 typeahead 为我的应用程序使用 Ajax 从服务器端获取建议。
  一切都很好，除了：我正在写正确的输入并得到像“行尸走肉”这样的建议。当我开始输入错误的输入时，比如 walkkkk，除非我按 ESC 键，否则这些建议仍然存在。这让我很恼火.
![在此处输入图像描述](https://i.stack.imgur.com/fyOoS.png)
  我检查了服务器端，当我开始输入错误的输入时，服务器没有返回任何内容。
  如何自动隐藏建议？

这是相对的js代码：

```
$('#query').typeahead({
    source: function(query, process){
        suggestions = {};
        labels = [];
        $.post('suggest.do', {query: query, limit: '10'}, function(data){
            var sugg = jQuery.parseJSON(data).data;

            if(sugg == 'NOTHING' || sugg == 'ERROR'){
                return;
            }
            $.each(sugg, function(index, item){
                suggestions[item.name] = item;
                labels.push(item.name);
            });
            return process(labels);
        });
    },
    items: 10,
    minLength: 1,
    updater: function(item){
        //irrelative code
    },
    matcher: function(item){
        return true;
    },
    highlighter: function(item){
        var ent = suggestions[item];
        var html = '' +
                    '<div class="entity-block">' +
                    '<span class="label label-important">' + ent.type + '</span>&nbsp;' + 
                    '<span class="sugg-name">' + ent.name + '</span>' +
                    '</div>';
        return html;
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:55:30.530

```
source: function(query, process){
    suggestions = {};
    labels = [];
    $.post('suggest.do', {query: query, limit: '10'}, function(data){

        //Check if any data is returned, if not clear the text and exit the func
        if(!data || data.length == 0){
           $('#query').val("");
           return;
        }

        var sugg = jQuery.parseJSON(data).data;

        if(sugg == 'NOTHING' || sugg == 'ERROR'){
            return;
        }
        $.each(sugg, function(index, item){
            suggestions[item.name] = item;
            labels.push(item.name);
        });
        return process(labels);
    });
}, 
```

# r - IGRAPH IN R：找到最大化边属性乘积的顶点之间的路径

> ID：16032499
> 
> 赞同：2
> 
> 时间：2013-04-16T08:44:36.750
> 
> 标签：r, probability, shortest-path, igraph

我需要找到一种方法来找到最大化边缘属性乘积的两个顶点之间的路径。在我的例子中，边缘属性是连接的概率。假设我想在以下示例中找到顶点 1 和 4 之间的最大概率路径：

```
require(igraph)    
G<-graph.data.frame(as.data.frame(cbind(id1=c(1,1,2,3,1,4),id2=c(2,3,4,4,5,5),weight=c(0.5,0.35,0.5,0.9,0.6,0.6))), directed=FALSE)

plot(G, edge.label=paste(E(G),"=",signif(E(G)$weight, digits=1)), vertex.size=10)

#weighted shortest path using connection probability
a<-get.shortest.paths(G,1,4, weights=E(G)$weight, output="epath")[[1]]
E(G)[a]
prod(E(G)$weight[a])

#weighted shortest path using the inverse of connection probability
b<-get.shortest.paths(G,1,4, weights=1-E(G)$weight, output="epath")[[1]]
E(G)[b]
prod(E(G)$weight[b]) 
```

在这个例子中，最大化连接的路径是通过顶点 5，实际上概率的乘积等于 0.36 (0.6*0.6)。最短路径函数似乎根据属性的总和给予优先级，而不是乘积。实际上，在上面的示例中，无论我使用概率还是概率的倒数，它都建议了两条连接概率较低的路径（0.25 和 0.315）。

有没有办法找到最大化产品的路径？？？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:54:22.960

您正在使用最短路径算法来获得最长路径。所以反转权重是必要的。同时，您想要最大化产品而不是求和。结合 -

```
x<-get.shortest.paths(G,1,4, weights=-log(E(G)$weight), output="epath")[[1]]
E(G)[x]
prod(E(G)$weight[x]) 
```

# javascript - 解析外部 JsonFile

> ID：16032502
> 
> 赞同：0
> 
> 时间：2013-04-16T08:44:46.850
> 
> 标签：javascript, json

嘿伙计们，我正在尝试解析以下 json 文件： http: [//osthessen-news.de/json2.php](http://osthessen-news.de/json2.php)

为了实现这一点，我使用以下 javascript：

更新：

```
<body>
<div id="placeholder"></div>
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script>

        var url = 'http://osthessen-news.de/json2.php';

        alert("ASDFFD");

        $(document).ready(function(){
                          var url = "http://osthessen-news.de/json2.php";
                          $.getJSON(url, function(data) {
                                    var output="<ul>";
                                    for (var i in data.news) {
                                    output+="<li>" + data.news[i].id + " " + data.news[i].Ueberschrift +"</li>";
                                    }

                                    output+="</ul>";
                                    document.getElementById("placeholder").innerHTML=output;
                                    });
                          });          

    </script>
</body> 
```

在本网站上找到：http: [//iviewsource.com/codingtutorials/getting-started-with-javascript-object-notation-json-for-absolute-beginners/](http://iviewsource.com/codingtutorials/getting-started-with-javascript-object-notation-json-for-absolute-beginners/)

我是 javascript 中 json 的新手。我也尝试了不同的方法。那么有人能告诉我我做错了什么吗？提前谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:47:17.870

使用常规 for 循环而不是 for..in 语法。 `For..in`主要用于迭代对象的属性，而正则 for 语法更适合数组。由于 news 是一个数组，因此正则语法是最合适的。

```
for (var i = 0; i < data.news.length; i++) {
    output+="<li>" + data.news[i].id + " " + data.news[i].ueberschrift +"</li>";
} 
```

另外，尝试将所有这些包装在`document.ready`

```
$(document).ready(function(){
   var url = "http://osthessen-news.de/json2.php"; 
 $.getJSON(url, function(data) {
    var output="<ul>";
    for (var i in data.news) {
        output+="<li>" + data.news[i].id + " " + data.news[i].ueberschrift +"</li>";
    }

    output+="</ul>";
    document.getElementById("placeholder").innerHTML=output;
}); 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:50:34.783

使用常规的 each 循环而不是 for..in 语法。

```
jQuery.each(data.news, function(j, val) {
    output+="<li>" + val.id + " " + val.ueberschrift +"</li>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:00:56.130

我试过了，对象没有`.ueberschrift`，它有`.Ueberschrift`哪个很重要（大小写敏感性）。

另外，这是 jquery，所以（警告：这是我的风格挑剔）：

`for (var i in data.news)`

应该

`$(data.news).each( ...`

和

`document.getElementById("placeholder").innerHTML=output;`

应该

`$('#placeholder').html(output);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T08:54:40.230

我在 Chrome 上遇到错误（XMLHttpRequest 无法加载[http://osthessen-news.de/json2.php。Access-Control-Allow-Origin](http://osthessen-news.de/json2.php)不允许 Origin null。）

您不能通过 AJAX 从不同的域加载文件。

[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

# html - CSS 链接性能

> ID：16032508
> 
> 赞同：5
> 
> 时间：2013-04-16T08:45:09.177
> 
> 标签：html, css, performance

我不知道链接是否是正确的术语。
我谈论这样的编码：

```
 html > body > div > ul > li > a{
        /*css*/
    } 
```

我和我的一个朋友谈过，他告诉我，像这样编写 css 在渲染 css 时会导致浏览器性能下降。
那么这是真的还是我真的应该只声明类/ID并指定它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T08:48:57.430

您应该尽可能具体，以便定位您的元素。最好使用 id。

但最终——这种微优化是相当无关紧要的。只有在您优化了几乎*所有*其他内容（压缩图像、提供静态内容、使用 css 精灵、最小化资产等）后才值得一看

[http://www.stevesouders.com/blog/2009/03/10/performance-impact-of-css-selectors/](http://www.stevesouders.com/blog/2009/03/10/performance-impact-of-css-selectors/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T08:48:24.217

在我看来，您应该使用最少数量的选择规则。规则越多，处理时间就越长。

所以是的，使用类和 ID 是更好的做法。

同样是您上面给出的示例，如果您尝试将 CSS 应用于所有标签，则只需

```
a {
/* css */
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T08:49:52.123

浏览器从右到左读取 CSS，这意味着在您的示例中，浏览器将查找 all `<a>`，然后查找 parent `<li>`，直到找到`<html>`.

所以对于性能来说是的，这种写作风格对性能不利。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T09:07:32.703

If you only want to apply to an element within a certain element, you can try something like this:

```
#ullID li{ ... } 
```

By doing so, you set the styles for the `li` tags within the #ullID element. If you want to go even deeper, you can do it like so:

```
#ullID li a{ ... } 
```

I'd say this will be faster performance wise in contrary to using:

```
 html > body > div > ul > li > a{ ... } 
```

Hope this helps :)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-16T09:10:44.383

这是选择器优化的粗略近似：

1.  编号（#myid）
2.  类（.myclass）
3.  标签（div，h1，p）
4.  项目清单
5.  相邻兄弟 (h1 + p)
6.  列表项子项 (ul > li)
7.  后代（li a）
8.  通用 (*) 9.attribute (a[rel="external"])
9.  伪类和伪元素 (a:hover, li:first)

这是在谈论 SEO 时要记住的事情。这并不意味着您必须忘记所有这些而只使用类和 id。问题是，当您说`div #child ul li a img`浏览器首先查看和 img 时，然后查看它是否有一个有`a`父级的`li`父级，依此类推。

# python - 新手 Python 用户数学

> ID：16032514
> 
> 赞同：0
> 
> 时间：2013-04-16T08:45:23.347
> 
> 标签：python

我是这方面的初学者；我今天刚开始编码，我遇到了这个问题。除了不会加、减、除或其他任何东西之外，代码类型的工作原理：它只是说`TypeError: unsupported operand type(s) for -: 'str' and 'str'` 或者只是输入数字。有人能帮我吗？以下是代码示例：

```
a = input("Enter First Name:")
b = input("Enter Last Name:")
c = (" Welcome to the New World Order")
print ("Hey " + a + b+ c)
d = (": ")
num = input("Please enter a number "+a+b+d)
num1 = input("Please enter another number "+a+b+d)
num2 = num+num1
print ('is this your number umm ... ', (num2))
input ("Press<enter>") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:50:08.460

输入始终是“str”（字符串）类型，您需要将它们转换为 int 或 float 才能对它们进行数学运算。

```
num = int(input("Please enter a number "+a+b+d)) 
```

请注意，如果用户输入了无效数字，整个程序将崩溃，您必须使用**try**来处理，**除了**.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T09:04:34.080

```
fname = raw_input("Enter First Name:")
lname = raw_input("Enter Last Name:")
c = (" Welcome to the New World Order")
print ("Hey " + fname + " " + lname + c)
d = (": ")

num  = raw_input("Please enter a number "+ fname + " " + lname +" " + d)
num1 = raw_input("Please enter another Number "+ fname + " " + lname +" " + d)

num2 = int(num) +  int(num1)

print '%s %s is these your numbers umm ... '% (num,num1)
print '%d is sum of  your numbers umm ... '% (num2)
raw_input ("Press<enter>") 
```

> 我认为这就是你想要做的。
> 
> 如果你是完全的新手，你可能应该先学习 python。
> 
> 使用这个[Learn Python the Hard Way](http://learnpythonthehardway.org/book/)
> 
> 或了解更多概念[阅读 Python 文档](http://docs.python.org/2/tutorial/index.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T08:48:47.513

`input()`返回*字符串*，除非您先将它们转换为数字，否则这些字符串将被连接而不是求和（并且`TypeError`在尝试对它们进行减法、乘法或除法时会抛出 a ）：

```
>>> "1" + "2"
'12'
>>> "1" - "2"
Traceback: <snip>
TypeError: unsupported operand type(s) for -: 'str' and 'str'
>>> "1" * "2"
Traceback: <snip>
TypeError: can't multiply sequence by non-int of type 'str'
>>> "1" * 2  # This is possible (but is still concatenation)!
'11'
>>> "1" / "2"
Traceback: <snip>
TypeError: unsupported operand type(s) for /: 'str' and 'str' 
```

您需要使用以下值从您的值创建整数`int()`：

```
num2 = int(num) + int(num1) 
```

这将抛出一个`ValueError`if`num`或者`num1`不包含任何可以解释为整数的东西，所以你可能想抓住它：

```
try:
    num2 = int(num) + int(num1)
    print ('is this your number umm ... ', num2)
except ValueError:
    print('You really should enter numbers!') 
```

# c# - 运行时错误无法投射对象

> ID：16032516
> 
> 赞同：0
> 
> 时间：2013-04-16T08:45:26.910
> 
> 标签：c#, asp.net-mvc-3, linq

转换完成时出现运行时错误。如何解决？

```
public spc GetSc(int ID)
{
    var SC = from items in db.Stable where items.id== ID orderby items.id select items;
    SC.Cast<spc>();
    return (spc)SC; // This line throws the error
} 
```

错误信息：

```
Unable to cast object of type
'System.Data.Entity.Infrastructure.DbQuery`1[Tool.Models.Transaction.spc]'
to type 'Tool.Models.Transaction.spc'. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T08:48:26.553

您正在尝试将单个`spc`从`IQueryable<spc>`（可以包含 0 到任何`spc`'s）返回到单个实体。

打电话`.Single(OrDefault)()`或`.First(OrDefault)()`在 SC 上。

# android - 如何在android中拆分从mysql获取的日期和时间

> ID：16032518
> 
> 赞同：3
> 
> 时间：2013-04-16T08:45:30.113
> 
> 标签：android, datetime, split

我从 MySql 获取日期，格式为“yyyy-mm-dd hh:mm:ss” 我只想分割日期和时间，分别显示日期和时间。时间如 hh:mm，日期如 yyyy-mm-dd。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T08:53:46.197

您还可以使用 StringTokenizer 类，它允许您将字符串分解为标记。您可以指定将分隔标记的字符。

例子：

```
String date = "yyyy-mm-dd hh:mm:ss";
StringTokenizer tk = new StringTokenizer(date);

String date = tk.nextToken();  // <---  yyyy-mm-dd
String time = tk.nextToken();  // <---  hh:mm:ss 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T08:47:09.283

这取决于您将如何使用它，但您可以`String.split(" ")`获取这两个部分或将其解析为日期/日历并提取日期和时间。

例如：

```
String d = "2013-05-11 13:59:50";
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-mm-dd hh:mm:ss");

try {

    Calendar c = Calendar.getInstance();
    c.setTime(sdf.parse(d));

    Log.d("DEBUG", "year:" + c.get(Calendar.YEAR));
    //...
} catch (ParseException e) {
} 
```

**另外**，正如 njzk2 所说：另一种方法是在表中存储一个长值，以便您可以将其直接提取到日期/日历中

```
Calendar c = Calendar.getInstance();
c.setTimeInMillis(yourDbLongValue); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T09:12:33.803

> 试试下面的代码。

```
String dateValue = "2013-05-11 13:59:50";
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-mm-dd hh:mm:ss");

Date date = null;
try {
    date = sdf.parse(dateValue);
} catch (ParseException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

SimpleDateFormat timeFormatter = new SimpleDateFormat("hh:mm");
String sa = timeFormatter.format(date); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T08:49:10.880

如果 MySQL 的结果是可控的，你可以这样做`select DATE(my_date_time) FROM my_table;`只会给你日期。如果不是，那么我猜如果您将日期视为一个字符串，您可以对其进行子串（拆分）并获取前 10 个字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T08:50:02.590

使用子字符串方法

```
startdate=start_time.substring(0, 10); 
starttime=start_time.substring(11, 16); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T08:50:43.420

```
SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
String fullDate = format.format(mDate.getTime());
date = fullDate.substring(0, fullDate.indexOf(" ");
time = fullDate.substring(fullDate.indexOf(" " + 1); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-30T04:39:12.923

将时间拆分为小时、分钟和秒。

```
String timeSpent="12:30:10";
String[] seperatedTime= timeSpent.split(":");
int hours = Integer.parseInt(seperatedTime[0]);
int minutes = Integer.parseInt(seperatedTime[1]);
int seconds = Integer.parseInt(seperatedTime[2]);
int duration = 3600 * hours + 60 * minutes + seconds; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-09-07T12:51:46.327

RoadBean roadBean = new RoadBean();

StringTokenizer tk = new StringTokenizer(jsonObject.getString("datetime"));

字符串 split_date = tk.nextToken();

字符串 split_time = tk.nextToken();

roadBean.setDate(split_date);

roadBean.setTime(split_time);

mRoadBeanList.add(roadBean);

# bash - 如何抑制 Unix 的“找不到命令”输出？

> ID：16032520
> 
> 赞同：0
> 
> 时间：2013-04-16T08:45:35.847
> 
> 标签：bash, unix, command-line, stdout

我的目标：当我输入一些不是有效的 Unix 命令时，它会被提供给一个特殊的函数，而不是显示“找不到命令”消息。

我找到了[这篇文章](http://speaking-my-language.blogspot.com/2008/06/command-not-found-handler-not-only-in.html)，它让我走到了一半。

```
trap 'if ! type -t $BASH_COMMAND >/dev/null; then special_function $BASH_COMMAND; fi' DEBUG 
```

这允许我运行我的特殊功能。但是之后仍然出现“找不到命令”错误。

有什么办法可以告诉 Bash 禁止显示该消息？无论是在这个命令中，还是在特殊函数中，都可以。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:11:04.777

In ZSH; this can be achieved by adding this to the .zshrc

```
setopt debugbeforecmd
trap 'if ! whence -w "$ZSH_DEBUG_CMD" >& /dev/null; then special_function $ZSH_DEBUG_COMMAND;fi' DEBUG
exec 2> >(grep -v "command not found" > /dev/stderr) 
```

This will behave in a very weird way in bash; because bash sends the prompt to stderr ( In effect you will be able to see the prompt and anything you type only after pressing the Enter key ). ZSH on the other hand, handles the prompt and stderr as separate streams.

If you can find a way to make bash to send the prompt to some other location ( say /dev/tty ) something similar will work in bash also.

**EDIT :**

It seems that bash versions > 4 have a `command_notfound_handle` function that can do what you want. You can define it in your ~/.bashrc

```
command_notfound_handle {
   special_function $1
   # The command that was not found is passed as the first argument to the fn
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:47:13.967

我唯一能想到的就是重定向stderr。我认为这不是一个很好的解决方案，但可能是一个起点。就像是：

```
$BASH_COMMAND 3> /tmp/invalid

if [ -f /tmp/invalid ]; then 
  if [ $(grep -c "command not found" /tmp/invalid) -ne 0 ]; 
     special_function $BASH_COMMAND
     rm /tmp/invalid
  fi
fi 
```

看起来有点笨拙，但可以进行一些调整。

# c - C 中 AVR 上的舍入数字

> ID：16032522
> 
> 赞同：1
> 
> 时间：2013-04-16T08:45:41.923
> 
> 标签：c, avr, atmega

我正在为 AVR（C 语言）编写代码，以连续改变三个 PWM 通道的占空比。为此，我编写了一个函数，它以百分比形式接收一个值*，*并将某些寄存器设置为由百分比和定时器的 TOP 值确定的某些值。伪代码——

```
register = (int) (duty / 100 * timer_top); 
```

但是，除非 duty = 100，否则这是行不通的（没有 PWM 输出）。

我尝试在 math.h 中使用 round() 函数，但这也给出了类似的输出，并使编译的文件变得不必要地大。我尝试了其他方法，例如——

```
register = duty / 100 * timer_top
register = (duty / 100 * timer_top) + 0.5
register = (int) (duty / 100 * timer_top) + 0.5 
```

但没有一个工作。有人可以帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T11:50:15.073

如果`duty`是整数，`duty / 100`则将是*整数*商，即截断为整数，`duty`小于 100 时为零。避免这种情况的计算上最便宜的方法是先执行乘法，例如

```
register = duty * timer_top / 100; 
```

如果你想做真正的浮点除法，你可以写成

```
register = (int) (duty / 100\. * timer_top); 
```

其中常量中的小数点使其成为双精度值。在这种情况下，您还可以使用您编写的其他替代方法来影响舍入行为。但是您也可以仅使用整数除法来获得不同的舍入行为，例如

```
register = (duty*timer_top + 50)/100; 
```

这将四舍五入到最接近而不是零，就像您`+ 0.5`在双值方法中所做的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:12:37.517

尝试这个：

```
Register = (long long)duty * timer_top / 100; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T15:59:38.793

您可以仅使用整数数学来进行舍入函数的粗略版本。以下伪代码假定所有数字都是正数：

```
intermediate = 100 * timer_top
register = duty/intermediate;
if (duty%intermediate>intermediate/2) {
    register++;
} 
```

# c# - 如何更改 Gridview 控件？

> ID：16032533
> 
> 赞同：0
> 
> 时间：2013-04-16T08:46:03.747
> 
> 标签：c#, asp.net, gridview, controls

我有一个带有gridview 的C# ASP.NET 项目。gridview 有一个数据集作为数据源。

网格包含一个日期字段，但是当您编辑该字段时，您必须输入日期，并且无法选择日期，因为它是一个文本框。

你将如何改变gridview的控制。

这是我尝试过的，但没有奏效。（只是尝试将所有文​​本框转换为日历作为测试。

```
foreach (TableCell cell in grdViewDetails.Rows[e.RowIndex].Cells)
{
   cell.Controls[0] = cell.Controls[0] as Calendar; //This didnt work....
   //do other stuff
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:48:06.910

而不是这样做，你可以简单地使用 ajax 工具包的日历 exterder。这里是 lnik 了解更多细节。[关联](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Calendar/Calendar.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:15:21.900

将日期列更改为模板字段。在编辑模板中，将日历扩展器添加到文本框。简单的。

# c - stdarg.h 不处理字符指针

> ID：16032534
> 
> 赞同：0
> 
> 时间：2013-04-16T08:46:09.027
> 
> 标签：c, pointers, char, arguments

所以我一直在尝试将 stdarg 用于不确定的参数。对于 int 它工作得很好，但现在我正在尝试使用 char 指针。这是我的代码：

```
 void updateValue(char *parameter, parameterTypes type, ...)
    {
       va_list arg_list;
       U32 value;
       char* stringValue;

       va_start(arg_list, type);
       value = va_arg(arg_list, U32);
       stringValue = va_arg(arg_list, char*);
       va_end(arg_list);
       printf("\n\n%s\n\n", stringValue);
    } 
```

当我调用这个函数时，我只是使用：

```
 updateValue("name", stringType, "TestingVaArg"); 
```

前两个参数是列表中参数的名称和它的类型。这在没有 stdarg 设置的情况下工作，所以这不是问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T08:53:20.047

您应该*使用*`type`参数来确定变量部分的类型。当只传递一个参数时，您似乎同时访问*了*a`U32`和 a 。`char*`

你需要类似的东西：

```
if( type == stringType )
{
  char *stringValue = va_arg(arg_list, char *);
  print("got string '%s'\n", stringValue);
}
else if( type == u32Type )
{
 /* ... */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T08:49:56.720

有了这两行

```
value = va_arg(arg_list, U32);
stringValue = va_arg(arg_list, char*); 
```

您尝试从堆栈中获取*两个值，但您只为 va-list 传递**了一个*参数。这意味着当您尝试获取字符串时，您将超出堆栈上的参数列表，并获得一个看似随机的指针。

# c# - ASP.NET 从数据库中的自定义分隔行中读取单个值

> ID：16032539
> 
> 赞同：0
> 
> 时间：2013-04-16T08:46:21.447
> 
> 标签：c#, asp.net, sql-server, vb.net, sqldatareader

我将通过表单保存的值存储在名为“属性”的数据库列中，例如：

```
value1#||#value2#||#value3#||#value4 
```

问题是如何在使用“For Each row As DataRow In table.Rows”时从此字符串中检索例如“value2”。

使用 '`row("Properties")`显然会返回： `value1#||#value2#||#value3#||#value4`.

如何使用拆分函数构造某些东西以检索特定值（例如 value2）？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:48:32.610

只需使用`split("#||#")`按值拆分字符串。在您获得 value2 的情况下，您将执行以下操作：

```
String[] splitValues = row("Properties").ToString().Split(new String[] {"#||#"}, StringSplitOptions.None);
String value2 = splitValues[1]; 
```

# java - 如何解决 StreamCorruptedException：java 中的无效流标头？

> ID：16032544
> 
> 赞同：1
> 
> 时间：2013-04-16T08:46:40.953
> 
> 标签：java, objectinputstream

尝试通过 Java 中的 UDP 套接字发送对象时出现此异常

> java.io.StreamCorruptedException：无效的流标头：00000000

这是发件人的代码：`

```
public class Epl_Client implements Serializable{
public static void main(String[] args )
{
 try{
  ParseMessage pm = new PaseMessage();  
  DatagramSocket Sock;
  Sock = new DatagramSocket();
  DatagramPacket Dp;
  ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream(4 * 1024);
  ObjectOutputStream objectOutputStream = new ObjectOutputStream(byteArrayOutputStream);
  objectOutputStream.writeObject(lg);
  byte[] objectBytes = byteArrayOutputStream.toByteArray();
  Dp = new DatagramPacket(objectBytes,   objectBytes.length,InetAddress.getByName("localhost"),9876);

  Sock.send(Dp);

    Sock.close();

 }
 catch (Exception e){
 System.out.println("exception caught" + e);
 }
}} 
```

接收器代码：

```
public class ClassServer{
public static void main(String[] args){
    ParseMessage pm=new ParseMessage();

    try{         
        byte[] recvBuf = new byte[5000];
        while(true){ 
                DatagramSocket serverSocket = new DatagramSocket(9876);
               ByteArrayInputStream bais = new ByteArrayInputStream(recvBuf);
               ObjectInputStream objectInputStream = new ObjectInputStream(bais);
               pm= (ParseMessage)objectInputStream.readObject();
               System.out.println(pm.message);
               bais.close();
               objectOutputStream.close();
              }
        }
        catch(Exception e)
        {
            System.out.println("Exceptiom"+e);
        }  
}} 
```

和班级

```
public class ParseMessage  implements Serializable{
  String message; 
  public ParseMessage() 
 { message="Inavalid";}} 
```

任何人都可以帮助解决此错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:50:58.670

你从来没有真正从套接字接收任何东西。查看您的代码 - 您创建了一个`DatagramSocket`，然后再也不会引用它。您总是在构建一个`ByteArrayInputStream`包装满零的数组。

需要调用[`DatagramSocket.receive`](http://docs.oracle.com/javase/6/docs/api/java/net/DatagramSocket.html#receive%28java.net.DatagramPacket%29)，然后在构造时使用接收到的数据的长度`ByteArrayInputStream`。但是，您需要确定可以将所有数据放入一个数据包中。您确定不想要基于流的协议吗？

# ssis - 连接excel中的两列并使用SSIS插入sql server

> ID：16032545
> 
> 赞同：0
> 
> 时间：2013-04-16T08:46:51.447
> 
> 标签：ssis, sql-server-2012

问候！

我用 Excelsource、Dataconversion、lookup 和 Oledbdestination 创建了一个 SSI 包。使用它，我可以将数据从 excel 插入到 sqlserver。我有新的要求，例如，在 excelsheet 中我有 id、firstname、lastname、..etc... 我在 sqlserver 中有一个包含列、id、name 等的表。要求是将名字和姓氏连接在一起，然后插入sqlserver。我怎样才能通过 SSIS 实现这一点。请任何建议。

问候桑吉塔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T10:28:43.770

您可以使用`Derived Transformation`.Create a`New Derived Column Name`并在表达式中仅`concatenate`使用 2 列

```
FirstName + LastName 
```

# php - 使用 phpQuery 删除空的 XML 元素

> ID：16032553
> 
> 赞同：-3
> 
> 时间：2013-04-16T08:47:18.157
> 
> 标签：php, xml, phpquery

如标题中所述，我想从 XML 文档中删除所有空元素。

**空**我的意思是元素中没有任何**文本**节点或其子节点。

是否可以使用 phpQuery 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:16:50.610

我在本主题的答案中使用了 Gordon 的代码：[Reg expression to remove empty Tags (any them)?](https://stackoverflow.com/questions/4721729/reg-expression-to-remove-empty-tags-any-of-them/4722152)

首先，我试图将他的 XPath 查询放入`phpQueryObject::find()`方法中，但它给了我一个警告，说它是不正确的查询。不知道为什么，因为它正在使用`DOMXPath`并且应该可以工作。

无论如何，解决方案仍然很简单。

```
$pqDoc = phpquery::newDocument() // phpQueryObject created some way. Doesn't matter here.
$xp = new DOMXPath($pqDoc->getDOMDocument());
foreach($xp->query('//*[not(node()) or normalize-space() = ""]') as $node) {
    $node->parentNode->removeChild($node);
} 
```

现在您已经删除了空元素，并且您仍然可以使用您的更改`phpQueryObject`，因为它实际上已经在`DOMDocument`' 的引用上工作了。

# jsf - 为什么当我使用标签 f:event ManagedBean 的构造函数有多个调用？

> ID：16032558
> 
> 赞同：1
> 
> 时间：2013-04-16T08:47:46.773
> 
> 标签：jsf, constructor

我正在用 ManagedBeans 编写项目，但我遇到了问题 - 构造函数的多次调用和 bean 的多个实例。测试bean的来源：

```
@Named(value = "newJSFManagedBean1")
@SessionScoped
public class NewJSFManagedBean1 implements Serializable {
    static private int createdcount = 0;

    public NewJSFManagedBean1() {
        createdcount++;
        System.out.println("Constructor.createdcount = " + createdcount);
    }

    public String getMessage() {
        return this.getClass().getName() + ".createdcount=" + createdcount;
    }

    public void preRenderBean(ComponentSystemEvent cse) {
    }

} 
```

在这种情况下，构造函数调用了一次：

```
<h:body>
    <h:outputText value="#{newJSFManagedBean1.message}"/>
</h:body> 
```

结果是： createdcount=1 - 没关系

但是，如果我添加标签 f:event ManagedBean 的构造函数被多次调用：

```
<h:body>
    <f:event listener="#{newJSFManagedBean1.preRenderBean}" type="preRenderComponent"/>
    <h:outputText value="#{newJSFManagedBean1.message}"/>
</h:body> 
```

结果是： createdcount= **3** - 为什么？

谢谢。

# java - Selenium 将 xpaths 保存在属性文件或 excel 表中的最佳方法是什么

> ID：16032561
> 
> 赞同：1
> 
> 时间：2013-04-16T08:48:00.033
> 
> 标签：java, selenium, selenium-webdriver, selenium-grid

我有两个 Selenium java 自动化混合框架作品。

在一个框架中，xpath 存储在 OR.properties 文件中。

在其他框架中，xpaths 存储在 excel sheet 中。

最后，我正在创建另一个新框架，以便在我的新框架中使用哪种方式（OR.Properties/Excel 表）。

任何人都可以建议您的经验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T10:19:58.310

也不要使用页面对象并在页面对象内定义定位器。

最大的优点是它将与页面相关的所有内容保存在一个地方，这使得重构测试变得更加容易。

这是一个非常简单的 Java 示例（您没有指定哪种语言，所以我不知道这是否与您相关，但这个概念应该成立）。

```
public class HomePage {

    @FindBy(how = How.NAME, using = "q")
    private WebElement searchTerms;

    public HomePage(WebDriver driver) {
        PageFactory.initElements(driver, this)
    }

    /**
     * Perform a Google search
     *
     * @param searchString Search query
     */
    public void searchFor(String searchString) {
        searchTerms.clear();
        searchTerms.sendKeys(searchString);
        searchTerms.submit();
    }
} 
```

您应该具有确定元素如何在页面对象内定位和交互的逻辑，然后测试可以使用页面对象来驱动您正在测试的站点。

在 selenium 用户邮件列表上也有很多关于这个主题的讨论，这里有几个有用的线程：

*   [页面对象或测试框架方法设计，哪个更好？更多方法与参数化方法？](https://groups.google.com/forum/?fromgroups=#!searchin/selenium-users/page%2420object/selenium-users/Qp3kqHsslMg/nOPPcxjyuMMJ)
*   [页面对象构造函数](https://groups.google.com/forum/?fromgroups=#!topic/selenium-users/QYEC5-clH_k)

最后，Selenium 文档和 Selenium wiki 中提供了有关页面对象的一些信息：

*   [页面对象设计模式](http://docs.seleniumhq.org/docs/06_test_design_considerations.jsp#page-object-design-pattern)
*   [页面对象](https://code.google.com/p/selenium/wiki/PageObjects)
*   [页面工厂](https://code.google.com/p/selenium/wiki/PageFactory)

# php-internals - 尝试重新生成 zend_language_scanner.c

> ID：16032576
> 
> 赞同：0
> 
> 时间：2013-04-16T08:48:38.437
> 
> 标签：php-internals

我正在尝试在 PHP 中添加一个新关键字（只是学习核心），所以我所做的是：向 zend_language_parser.y 添加一个新标记，在 unticket_statement 中使用它，编译 PHP，但它没有成功。似乎我需要在 zend_language_scanner.l 中添加这个新关键字（我通过这个文件中的另一个定义假设它）并在 re2c 的帮助下重新生成 zend_language_scanner.c。

但这是 re2c 给我的：

```
$ re2c -isgf Zend/zend_language_scanner.l
re2c: error: line 1004, column 6: can't find symbol 
```

第 1004 行包含以下定义：

```
LNUM    [0-9]+ 
```

即使在未更改的 zend_language_scanner.l 文件上也会弹出此错误。

这是`re2c -v`输出：`re2c 0.13.5`

有谁知道我怎样才能重新生成这个扫描仪或者我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T14:17:32.533

你应该这样尝试：

```
re2c --no-generation-date --case-inverted -cbdF -o a.c  zend_language_scanner.l 
```

我有同样的问题，直到我从文件中找到源 cmd `Makefile.frag`：

```
$(RE2C) $(RE2C_FLAGS) --case-inverted -cbdFt Zend/zend_language_scanner_defs.h -oZend/zend_language_scanner.c Zend/     zend_language_scanner.l) 
```

# c# - 锁定 SQL Server 表以进行写入但不用于读取

> ID：16032582
> 
> 赞同：1
> 
> 时间：2013-04-16T08:48:59.147
> 
> 标签：c#, .net, sql, sql-server

**建议的副本没有回答标题中的问题。**

我想锁定一个表，这样它就不能被写入，但可以被读取。那可能吗？

与 的交易中会发生这种情况`IsolationLevel.Serializable`吗？还是仅适用于受影响的行？（这也是对读取的锁定吗？）

如果重要的话：我在 C# 中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T17:04:15.677

您应该在表上创建一个 UNIQUE 约束。即使您设法通过第一个进程锁定表，另一个进程很可能只会被阻塞，直到第一个进程存在。

然后，您可能会开始摆弄超时以确保第二个进程在访问表之前超时，并且您将自己打开一个痛苦的世界。

迄今为止，涵盖构成重复的任何字段的唯一约束是您的最佳选择 - 并将确保不输入任何重复项，据我了解，这是您的最终目标（以及详细的评论）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T08:51:15.730

不，它不可能。

只有持有锁的会话才能访问该表。在释放锁之前，没有其他会话可以访问它。

参考以下链接：

[http://msdn.microsoft.com/en-gb/library/ms173763.aspx](http://msdn.microsoft.com/en-gb/library/ms173763.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-16T09:03:16.487

您可能想寻找 NOLOCK / ReadUncommitted 选项：[http ://www.mssqltips.com/sqlservertip/2470/understanding-the-sql-server-nolock-hint/](http://www.mssqltips.com/sqlservertip/2470/understanding-the-sql-server-nolock-hint/)

它可以让您从当前锁定的表中读取数据，但请注意其含义：您最终可能会读取“幽灵”数据，即在事务中已插入然后回滚的数据。

# java - 如何从 utf-8 表示的字符串中获取源字符串

> ID：16032583
> 
> 赞同：1
> 
> 时间：2013-04-16T08:49:01.857
> 
> 标签：java, utf-8

我有一个从 Internet 获取的页面，内容是 utf-8 编码为字符串，可能类似于：

```
{"has_more": true, "items": [{"body": "\u6ca1\u6709\u4f20\u8bf4\u4e2d\u7684\u90a3\u4e48\u597d",...} 
```

我尝试使用 URLDecoder.decode()，但它不起作用，它输出的正是输入的内容。有什么建议么？这是 utf-8 显式编码的字符串对象，它不是 inputStream 或某事。我做了一些搜索工作，发现几乎没有相关性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:53:13.297

那就是 JSON 编码，它以特定的方式处理某些特定的字符。它不是 URL 编码，因此不起作用。

为什么不尝试使用 JSON 库？[json simple](https://code.google.com/p/json-simple/)或[GS​​ON](https://code.google.com/p/google-gson/)是很好的开始。

出于好奇：这里描述了您所看到的编码：[RFC4627](http://www.ietf.org/rfc/rfc4627.txt)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:02:14.063

源代码符号是 u-encoded ( `\uXXXX`)，但 String 本身是一个无法区分的普通字符串 (Java/JavaScript)，例如`\n`or `\t`。

JDK 有一个转换工具：

```
native2ascii -encoding UTF-8 -reverse mypage.json plain-utf8.json 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:53:10.393

您可以使用[Gson](https://code.google.com/p/google-gson/)将它们转换为地图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T08:53:16.540

查看 Java 中的库 - Java 中的 [JSON](http://www.json.org/java/index.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T08:54:17.150

是的，它的[JSON](http://json.org/)（JavaScript Object Notation）是一种轻量级的数据交换格式。

通过 [http://www.json.org/java/](http://www.json.org/java/)

# git - 用原始帐户分叉一个分叉项目

> ID：16032584
> 
> 赞同：3
> 
> 时间：2013-04-16T08:49:03.510
> 
> 标签：git, github, git-fork

我在 GitHub 上有一个名为的项目`A`，我的用户是`user1`. 后来，另一位用户将`user2`我的项目分叉`A`到他的新项目`B`中。现在他对我的原始项目（以及项目名称）进行了足够的更改，我想将他的项目分叉`B`到我帐户中的另一个项目。我希望当我按下 fork 按钮时，`C`会在我的帐户中创建一个项目，但是浏览器将我重定向到原始项目，而不是它`A`。

我知道我可以将项目中所做的更改`B`再次拉到我的项目`A`中，但是更改`B`很重要，我想创建另一个项目。我可以在 project 中创建一个新分支`A`，但我不喜欢这种方法。

是否可以在我的帐户中实际创建项目`C`（可能使用第三个新名称）？我怎样才能实现这个目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T09:49:15.277

您遇到这种情况的原因与您不能`github fork`从同一个帐户两次执行同​​一个项目的原因相同。它与 github 如何实际定义一个 fork 以及它如何处理它有关。当你对 ala Github 进行分叉时，由分叉产生的个人存储库实际上与父项目共享相同的标识符。因此，试图将 C 从 B 分叉回拥有 A 的同一账户是不可能的。

您应该使用`git`命令，与多个遥控器交互是很常见的。在您的本地存储库中，将 A 和 B 添加为远程 ( `git remote add <alias_B> <url_B>`)，然后从一个存储库获取/合并/推送更改到另一个存储库。

# html - 用于多页的 iScroll

> ID：16032585
> 
> 赞同：1
> 
> 时间：2013-04-16T08:49:04.773
> 
> 标签：html, cordova, iscroll, iscroll4

我正在用 html5-css-js 做 phonegap 项目。

在这个项目中，我使用 iscroll swipe 来解决页面之间的滑动手势问题。

在我的第一页上，我的 iscroll 工作并向下滚动所有页面。

但是当我刷我的第二页时，我的第二页看起来是静态的。它不触底，不显示数据，不移动。

这是我使用的代码；

```
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0"/>
    <link rel="stylesheet" type="text/css" href="css/styles.css">
    <script type="text/javascript" src="js/cordova-2.5.0.js"></script>
</head>
<body>

    <div class="frame">

        <div id="pageWrapper">

            <div id="pageScroller">

                <div class="page" >
                    <div id="wrapper">
                        <div class="scroller">
                            <h1>Canlı Skorlar</h1>
                            <hr/>
                            <table border="1">
                                <tr>
                                    <td rowspan="2" width="15%" align="center"> data1 </td> 
                                    <td width="85%"> data2</td>
                                    <td> data3 </td>
                                </tr> 
                                <tr> 
                                    <td> data4 </td> 
                                    <td> data5</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="page" >
                    <div id="wrapper">
                        <div class="scroller">
                            <h1>Canlı Skorlar</h1>
                            <hr/>
                            <table border="1">
                                <tr>
                                    <td rowspan="2" width="15%" align="center"> data1 </td> 
                                    <td width="85%"> data2</td>
                                    <td> data3 </td>
                                </tr> 
                                <tr> 
                                    <td> data4 </td> 
                                    <td> data5</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="page" >
                    <div id="wrapper">
                        <div class="scroller">
                            <h1>Canlı Skorlar</h1>
                            <hr/>
                            <table border="1">
                                <tr>
                                    <td rowspan="2" width="15%" align="center"> data1 </td> 
                                    <td width="85%"> data2</td>
                                    <td> data3 </td>
                                </tr> 
                                <tr> 
                                    <td> data4 </td> 
                                    <td> data5</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="page" >
                    <div id="wrapper">
                        <div class="scroller">
                            <h1>Canlı Skorlar</h1>
                            <hr/>
                            <table border="1">
                                <tr>
                                    <td rowspan="2" width="15%" align="center"> data1 </td> 
                                    <td width="85%"> data2</td>
                                    <td> data3 </td>
                                </tr> 
                                <tr> 
                                    <td> data4 </td> 
                                    <td> data5</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

<script src="js/jquery-1.7.2.min.js"></script>
<script src="js/iscroll.js"></script>
<script src="js/scroll.js"></script>

</body>
</html> 
```

任何人都可以告诉我如何摆脱这个问题？

谢谢。

**更新：**滚动.js

```
document.addEventListener("orientationchange", updateLayout);

// The wrapperWidth before orientationChange. Used to identify the current page number in updateLayout();
wrapperWidth = 0;

var myScroll = new iScroll('pageWrapper', {
    snap: true,
    momentum: false,
    hScrollbar: false,
    vScrollbar: false,
    lockDirection: true});

updateLayout();

function updateLayout() {

    var currentPage = 0;

    if (wrapperWidth > 0) {
        currentPage = - Math.ceil( $('#pageScroller').position().left / wrapperWidth);
    }

    wrapperWidth = $('#pageWrapper').width();

    $('#pageScroller').css('width', wrapperWidth * 4);
    $('.page').css('width', wrapperWidth - 40);
    myScroll.refresh();
    myScroll.scrollToPage(currentPage, 0, 0);
}

page3Scroll = new iScroll('wrapper', {hScrollbar: false, vScrollbar: false, lockDirection: true }); 
```

由于限制，我无法放置 iscroll js。

所以，我没有吃 js 文件夹。

所以。帮助请我的朋友。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:28:38.237

我在 iscroll4 文档上找到了这个解决方案。

“iScroll 需要为您需要的每个滚动区域进行初始化。对于任何单个页面上可以拥有的 iScroll 数量没有限制，如果不是由设备内存/cpu 强加的话。内容的类型和长度会影响数量可以同时使用的 iScrolls。”

我希望它对某人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-13T20:37:31.203

尝试在“pageshow”事件后初始化/刷新函数，因为 iScroll 存在*display:none*属性问题。

在此处查看我的详细说明：[https ://stackoverflow.com/a/18726304/1959362](https://stackoverflow.com/a/18726304/1959362)

例如：

```
$('#<id-of-your-jqm-page>').on('pageshow', function() {
    setTimeout(function () {
        myScrollFunction .refresh();
    }, 100);
}); 
```

# linux - scp 失败并出现“FIPS_mode_set：指纹不匹配”错误

> ID：16032587
> 
> 赞同：0
> 
> 时间：2013-04-16T08:49:09.850
> 
> 标签：linux, ssh, openssl, scp, fips

我有以下机器：

```
Linux ssim-21416 2.6.18-348.3.1.el5 #1 SMP Mon Mar 11 19:39:25 EDT 2013 x86_64 x86_64 x86_64 GNU/Linux 
```

和

```
CentOS release 5.9 (Final) 
```

现在，当我尝试执行 scp 或 ssh 时，它会失败并出现以下错误：

```
7477:error:2D06C06E:FIPS routines:FIPS_mode_set:fingerprint does not match:fips.c:493:
lost connection 
```

我的机器上安装了以下 openssl rpm：

```
openssl-0.9.8e-26.el5_9.1 
```

安装了以下 fips rpm

```
fipscheck-lib-1.2.0-1.el5
fipscheck-1.2.0-1.el5 
```

请问有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-01T03:31:07.623

> 当我尝试执行 scp 或 ssh 时，它失败并出现以下错误...

这对我来说很难提供帮助，因为我不了解 Red Hat 或 CentOS。但我确实了解 OpenSSL 及其 FIPS 流程，所以我给你一个应该可行的建议。但这需要你做更多的工作。

下载并`scp`自己构建`ssh`。但是，当您这样做时，请执行以下操作：

```
$ export CC=`find /usr/local -name fipsld`
$ echo $CC 
$ /usr/local/ssl/fips-2.0/bin/fipsld
$ export FIPSLD_CC=`find /usr/bin -name gcc`
$ echo $FIPSLD_CC 
/usr/bin/gcc 
```

现在，做一个标准`config`和`make`. 有时你必须做`config`，然后调整`CC`和`FIPSLD_CC`，然后运行 ​​make。

安装它们`/usr/local/bin`并从那里使用它们。

* * *

如果您需要从源代码构建 OpenSSL FIPS 对象模块和 FIPS 功能库，那么：

```
# Build the FIPS Object Module
$ tar xzf openssl-fips-2.0.5.tar.gz
$ cd openssl-fips-2.0.5
$ ./config
$ make
$ sudo make install

# Build the FIPS Capable Library
$ tar xzf openssl-1.0.1f.tar.gz
$ cd openssl-1.0.1f
$ ./config fips <other options you like>
$ make all
$ sudo make install 
```

请务必使用在 FIPS 模式下运行的工具来验证下载的签名。如果您没有这样的工具，您将不得不从 OpenSSL 基金会订购一张 CD。

# php - 使用 fgetcsv 将数据添加到 sql server

> ID：16032591
> 
> 赞同：0
> 
> 时间：2013-04-16T08:49:19.037
> 
> 标签：php, sql-server-2008, csv, import

今天使用 fgetcsv 对我来说是一个全新的功能。我习惯于与 mysql 打交道，所以 sql server 也是一种野兽。因此，我为什么转向你们！

我有以下代码，我相信除了获取 csv 并将其放入 sql 表之外，它可以满足我的所有需求。

你们能帮忙提供一些可以缓解这个问题的示例代码吗？

```
function connect() {
    if (!function_exists('sqlsrv_num_rows')) { // Insure sqlsrv_1.1 is loaded.
        die ('sqlsrv_1.1 is not available');
    }

    /*
    * Log all Errors.
    */
    sqlsrv_configure("WarningsReturnAsErrors", TRUE);        // BE SURE TO NOT ERROR ON A WARNING
    sqlsrv_configure("LogSubsystems", SQLSRV_LOG_SYSTEM_ALL);
    sqlsrv_configure("LogSeverity", SQLSRV_LOG_SEVERITY_ALL);

    $conn = sqlsrv_connect('instance', array
    (
    'UID' => 'userName',
    'PWD' => 'password',
    'Database' => 'database',
    'CharacterSet' => 'UTF-8',
    'MultipleActiveResultSets' => true,
    'ConnectionPooling' => true,
    'ReturnDatesAsStrings' => true,
    ));

    if ($conn === FALSE) {
        get_last_error();
    }

    return $conn;
}

function query($conn, $query) {
    $result = sqlsrv_query($conn, $query);
    if ($result === FALSE) {
        get_last_error();
    }
    return $result;
}

function execute ( $stmt ) {
    $result = sqlsrv_execute($stmt);
    if ($result === FALSE) {
        get_last_error();
    }
    return $result;
}

$conn = connect();

if (($handle = fopen(getcwd().'C:\path\TASKS.csv', "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 10000, ",")) !== FALSE) { 
        $db->execute("INSERT INTO Database..table (taskID, name, active) VALUES ('{$data[1]}','{$data[2]}','{$data[3]}')");
        set_time_limit(60); // reset timer on loop
    } 
} 
```

使用上面的代码，我目前收到以下错误

无法打开流：第 51 行的 C:\path\insertDataFGet.php 中的参数无效

第 51 行是 $db->e​​xecute 行

csv样本

```
1,taskName1,1
2,taskName2,0
3,taskName3,0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:52:50.793

以下是我在我的一个小导入脚本中的操作方法。可能有更好的方法可以做到这一点，但这很有效。

```
if (($handle = fopen(getcwd()."/tmp/updatedpricing.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 10000, ",")) !== FALSE) {  // loop through each line of CSV. Returns array of that line each time so we can hard reference it if we want.
    $db->execute("UPDATE table SET col1='{$data[1]}',col2='{$data[2]}',col3='{$data[3]}' WHERE something=something",ENABLE_DEBUG);
    set_time_limit(60); // reset timer on loop
    } 
}
fclose($handle); 
```

这段代码只是一个例子有两个问题，首先直接在你的代码中实现是 getcwd() 在你的情况下你不需要它，因为我使用虚拟路径和动态创建的“ln -s”所以我的工作目录并不总是相同的，文件也不总是在同一个位置。由于您知道确切的路径，因此您可以直接将路径放入

```
if (($handle = fopen('C:\path\TASKS.csv', "r")) !== FALSE) { 
```

第二个问题是您不能复制和粘贴我的 sql 语句，因为它依赖于我的自定义 mysql db 访问类。因此，您必须更改开头的行`$db->execute`以使用可用的 mysql 函数。如果你正在做一个基本的插入，我想你可以单独构建你的查询，然后通过你的`query()`or`execute()`函数传递它，任何一个都应该工作。不要忘记正确指定您编写示例代码的表名是错误的。

第三个问题是您需要确保正确转义输入变量`$data[]` 等，并确保将 CSV 中的列与插入列相匹配，不要忘记`$data`将从 0（零）开始计数

# android - 由于布局设计，布局按钮和 toast 无法正常工作 - 更新

> ID：16032594
> 
> 赞同：0
> 
> 时间：2013-04-16T08:49:24.643
> 
> 标签：android, layout, android-relativelayout

我的申请有问题。它是为在屏幕上拖动球而设计的。我的问题是（我认为）我的布局设计（我不知道我该怎么做）。我的 MainActivity 中有这样的布局：

```
 //Creates 3 layouts
    LinearLayout view = (LinearLayout)LayoutInflater.from(this).inflate(R.layout.main, null);
    view.setClickable(true);
    RelativeLayout layout = new RelativeLayout(this);
    final DrawView custom = new DrawView(this);
    //Creates the background and sets the background.
    RelativeLayout background = new RelativeLayout(this);
    Resources res = getResources();
    Drawable drawable = res.getDrawable(R.drawable.achtergrond);
    background.setBackground(drawable);
    layout.addView(background, new LinearLayout.LayoutParams(widthOfBackground, LayoutParams.WRAP_CONTENT));
    //Rules of the background, forced to the right
    RelativeLayout.LayoutParams params1 = (RelativeLayout.LayoutParams)background.getLayoutParams();
    params1.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
    background.setLayoutParams(params1);
    //Adding of the layouts to the main layout.
    layout.addView(custom); 
    layout.addView(view);
    //Shows the view to the user
    setContentView(layout); 
```

我制作了 3 个布局： - 一个带有我的主要 xml 布局（视图） - 一个包含其他布局的 RelativeLayout。 - 例如：制作球的 drawView。

我的问题是当我在主布局中创建一个按钮时。按钮确实出现了，但我无法使用它。如果我在 MainActivity 中创建了一个 onClick 方法，它不会做任何事情。此外，如果我尝试在我的 MainActivity 中创建一个 toast 消息，它不会出现。

非常感谢我的布局的任何帮助或提示！

drawView（自定义）的代码是这样的：

```
package HVA.getConnected.toptopo;

import java.util.ArrayList;
import java.util.Timer;
import java.util.TimerTask;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Point;
import android.os.Handler;
import android.os.Message;
import android.os.SystemClock;
import android.view.MotionEvent;
import android.view.View;

public class DrawView extends View {
protected static final int REFRESH = 0;
public ColorBall[] colorballs = new ColorBall[1]; // array that holds the balls
private int balID = 0; // variable to know what ball is being dragged

public DrawView(Context context) {
    super(context);
    setFocusable(true); //necessary for getting the touch events
    // setting the start point for the balls

    Point point1 = new Point(200,200);
    Point point1a = new Point(755,502);

    // declare each ball with the ColorBall class
    colorballs[0] = new ColorBall(context,R.drawable.vlag_frankrijk, point1, R.drawable.vlag_frankrijk_vink, point1a);

}

// the method that draws the balls
@Override 
protected void onDraw(Canvas canvas) {
        //draw the balls on the canvas
    for (ColorBall ball : colorballs) {
        canvas.drawBitmap(ball.getBitmap(), ball.getX(), ball.getY(), null);
      }

}

// events when touching the screen
public boolean onTouchEvent(MotionEvent event) {
    int eventaction = event.getAction(); 

    int X = (int)event.getX(); 
    int Y = (int)event.getY(); 

    switch (eventaction ) { 

    case MotionEvent.ACTION_DOWN: // touch down so check if the finger is on a ball
        balID = 0;
        System.out.println("debug 1");
        for (ColorBall ball : colorballs) {
            // check if inside the bounds of the ball (circle)
            // get the center for the ball
            int centerX = ball.getX() + 25;
            int centerY = ball.getY() + 25;

            // calculate the radius from the touch to the center of the ball
            double radCircle  = Math.sqrt( (double) (((centerX-X)*(centerX-X)) + (centerY-Y)*(centerY-Y)));

            // if the radius is smaller then 23 (radius of a ball is 22), then it must be on the ball
            if (radCircle > 0 && radCircle < 23){
                balID = ball.getID();
                break;
            }

            // check all the bounds of the ball (square)
            if (X > ball.getX() && X < ball.getX()+50 && Y > ball.getY() && Y < ball.getY()+50){
                balID = ball.getID();
                break;
            }
          }
        System.out.println("debug 2");
         break; 

    case MotionEvent.ACTION_MOVE:   // touch drag with the ball
        // move the balls the same as the finger
        if (balID > 0) {
            colorballs[balID-1].setX(X-25);
            colorballs[balID-1].setY(Y-25);
        }

        break; 

    case MotionEvent.ACTION_UP: 
        // touch drop - just do things here after dropping
        if (balID > 0){
            ColorBall a = colorballs[balID-1];
            if(a.getX() > a.getDestX()-100 && a.getX() < a.getDestX()+100 &&
                    a.getY() > a.getDestY()-100 && a.getY() < a.getDestY()){
                System.out.println("___Drag X & Y is good");
                colorballs[balID-1].setCanMove(false);
            }
        }
        break; 
    } 
    // redraw the canvas
    invalidate(); 
    return true; 

}
} 
```

我进行了更多研究，吐司消息确实在 MainActivity 类中起作用，但按钮不起作用。现在程序不能运行了。我添加了这个：

```
 b1 = (Button) findViewById(R.id.btn1);
    b1.setOnClickListener(this); 
```

我得到的错误是我需要使用 OnClickListener 转换 onclicklistener。但是当我这样做时，它不能再运行了。它因错误 ClassCastException 而崩溃，我不知道如何解决这个问题。

onClick 方法：

```
 @Override
public void onClick(View v) {
    // Perform action on click
    switch(v.getId()) {
    case R.id.btn1:
        System.out.println(".....");
        Toast.makeText(this, "hoi?", Toast.LENGTH_LONG).show();
        break;
    }

}} 
```

吐司是：

```
Toast.makeText(this, "text", Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T17:08:29.677

布局设置使用 onclickListeners 使应用程序崩溃，现在我的 XML 文件中有 View 类，这解决了我的所有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:34:13.967

像这样使用

```
 Button btn = (Button) findViewById(R.id.btn1);
                 btn.setOnClickListener(new OnClickListener() {
                         public void onClick(View v) {
                showToastMessage(R.id.btn1);

                         }
                      });}

                //showToastMessage(int id) method definition here

              public void showToastMessage(int id)
             {    
                  switch(id) {
               case id:
              System.out.println(".....");
           Toast.makeText(this, "hoi?", Toast.LENGTH_LONG).show();
               break;
                 }

                 } 
```

# android - 如何在片段内实现水平滑动？

> ID：16032596
> 
> 赞同：4
> 
> 时间：2013-04-16T08:49:31.333
> 
> 标签：android, android-viewpager, android-gesture

我在一个活动中有两个片段。我想在其中一个片段中实现滑动。我的布局是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#ffffff"
    android:orientation="horizontal" >

    <fragment
        android:id="@+id/image_list_fragment"
        android:name="com.example.fragments.QGridFragment"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="100" >
    </fragment>

    <fragment
        android:id="@+id/image_viewer_fragment"
        android:name="com.example.fragments.QViewerFragment"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="85" />

</LinearLayout> 
```

我想在`image_viewer_fragment`片段中实现滑动。我正在寻找一种使用`ViewPager`或的方法`GestureListener`。对于没有片段的正常活动，我可以使用[这种](http://developer.android.com/training/implementing-navigation/lateral.html)方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:18:55.063

我试图在我的应用程序中实现滑动功能，为此我创建了一个`SwipeDetector`实现`OnTouchListener`.

下面是代码：

```
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;

public class SwipeDetector implements OnTouchListener {

    public static enum Action {
        LR, // Left to Right
        RL, // Right to Left
        TB, // Top to bottom
        BT, // Bottom to Top
        None, // when no action was detected
        Click
    }

    private static final String logTag = "SwipeDetector";
    private static final int MIN_DISTANCE = 100;
    private float downX, downY, upX, upY;
    private Action mSwipeDetected = Action.None;

    public boolean swipeDetected() {
        return mSwipeDetected != Action.None;
    }

    public Action getAction() {
        return mSwipeDetected;
    }

    public boolean onTouch(View v, MotionEvent event) {
        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN: {
            downX = event.getX();
            downY = event.getY();
            mSwipeDetected = Action.None;
            // Log.i(logTag, "Click On List" );
            return false; // allow other events like Click to be processed
        }
        case MotionEvent.ACTION_UP: {
            upX = event.getX();
            upY = event.getY();

            float deltaX = downX - upX;
            float deltaY = downY - upY;

            // horizontal swipe detection
            if (Math.abs(deltaX) > MIN_DISTANCE) {
                // left or right
                if (deltaX < 0) {

                    mSwipeDetected = Action.LR;
                    return false;
                }
                if (deltaX > 0) {

                    mSwipeDetected = Action.RL;
                    return false;
                }
            }
            /*
             * else
             * 
             * // vertical swipe detection if (Math.abs(deltaY) > MIN_DISTANCE)
             * { // top or down if (deltaY < 0) { Log.i(logTag,
             * "Swipe Top to Bottom"); mSwipeDetected = Action.TB; return false;
             * } if (deltaY > 0) { Log.i(logTag, "Swipe Bottom to Top");
             * mSwipeDetected = Action.BT; return false; } }
             */

            mSwipeDetected = Action.Click;
            return false;
        }
        }
        return false;
    }

} 
```

在`onCreateView`要添加滑动动作的片段方法中，通过在视图方法中`SwipeDetector`设置来实现。`setOnTouchListener`

像这样：

```
SwipeDetector swipeDetector = new SwipeDetector();
view.setOnTouchListener(swipeDetector);

if (swipeDetector.getAction() == Action.LR) {
   //Do some action
} 
```

# php - TIMESTAMPDIFF 适用于日，但不适用于 Minute

> ID：16032606
> 
> 赞同：1
> 
> 时间：2013-04-16T08:50:09.443
> 
> 标签：php, mysql, timestamp

我的查询有问题，即使我现在发布帖子，TIMESTAMPDIFF 也不适用于 MINUTE。但是，如果我把 DAY 或 MONTH 放在它的工作原理上，我真的无法弄清楚可能是什么问题。我有比秒更新的帖子。请任何帮助将不胜感激

```
SELECT h2s_job.job_id,
       h2s_job.job_title,
       h2s_job.job_description,
       h2s_job.job_category,
       h2s_job.wantORoffering,
       h2s_job.address,
       h2s_job.cell,
       h2s_job.email,
       h2s_job.date_registered,
       h2s_ad_info.date_registered,
       h2s_job.user_id
FROM h2s_job
INNER JOIN h2s_ad_info ON h2s_job.user_id=h2s_ad_info.user_id
WHERE TIMESTAMPDIFF(MINUTE,h2s_ad_info.date_registered ,NOW())<1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:53:42.177

我假设`date_registered`是一个`TIMESTAMP`or `DATETIME`。如果是这样，您可以这样做：

```
where NOW() - SECOND(h2s_ad_info.date_registered) < 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:06:46.647

试试这个，

```
"SELECT TIMESTAMPDIFF(MINUTE, h2s_ad_info.date_registered, now()),
           h2s_job.job_id,
           h2s_job.job_title,
           h2s_job.job_description, 
           h2s_job.job_category,
           h2s_job.wantORoffering,
           h2s_job.address,h2s_job.cell,
           h2s_job.email,
           h2s_job.date_registered,
           h2s_job.user_id 
    From h2s_job
    INNER JOIN h2s_ad_info
    ON  h2s_job.user_id=h2s_ad_info.user_id
    where (TIMESTAMPDIFF(MINUTE, h2s_ad_info.date_registered, now()) < 1)"; 
```

这可以帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T14:46:02.597

我发现了您的问题：它从您插入时间的位置开始：转到您的数据库，将 date_registered 数据类型设置为 datetime：然后使用波纹管函数并使用 $date_registered 插入您的数据库：更改国家和城市以获取正确的时间，因为那是您遇到问题的地方：我确定您的系统上的时间不一样，这就是原因。所以定位你的国家和城市

```
<?php
    # function to get right time 
    date_default_timezone_set('Africa/Johannesburg');
    function time_diff_conv($start, $s)
    {
        $string="";
        $t = array( //suffixes
            'd' => 86400,
            'h' => 3600,
            'm' => 60,
        );
        $s = abs($s - $start);
        foreach($t as $key => &$val) {
            $$key = floor($s/$val);
            $s -= ($$key*$val);
            $string .= ($$key==0) ? '' : $$key . "$key ";
        }
        return $string . $s. 's';
    }

date_registered = date('Y-m-d H:i:s');

# use this if u wanna show day friday like that date('l jS \of F Y \a\t h:i:s A')."\n";
    # function to get right time 
?> 
```

# objective-c - 如何始终将按钮和标签粘在一起

> ID：16032613
> 
> 赞同：1
> 
> 时间：2013-04-16T08:50:29.527
> 
> 标签：objective-c, uibutton, uilabel

我想要一个按钮和标签总是粘在一起。我希望它是静态的，我找到了一个将 UICollectionView 与单元格一起使用的解决方案。我在`"Connection "" cannot have a prototype object as its destination"`这里得到并找到了一个解决方案：[在storyboard-IB中向原型单元格添加项目时出现奇怪的错误，](https://stackoverflow.com/questions/12150715/strange-error-when-adding-items-to-prototype-cells-in-storyboard-ib)但那里给出的答案是关于动态的。这样做的正确方法是什么？我不需要单元格中的@property，我只需要按钮和标签中的@property，我只希望标签和按钮粘在一起。所以实际上是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/JgiHi.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:24:31.930

你应该`UIView`用 a`UIButton`和 a`UILabel`作为它的子视图。如果你想使用`UITableView`or `UICollectionView`，这个父`UIView`级实际上就是`UITableViewCell`or `UICollectionViewCell`。

# .net - 在单元测试中等待任务完成

> ID：16032615
> 
> 赞同：1
> 
> 时间：2013-04-16T08:50:32.157
> 
> 标签：.net, wpf, unit-testing, dispatcher

我有一个简单的窗口，带有名为*SimpleText的 Button 和 TextBox*

```
/// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

        }

        private void ButtonClicked(object sender, RoutedEventArgs e)
        {
            TestMe();

        }

        public Task TestMe()
        {
            return Task.Factory.StartNew(() =>
            {
                for (int i = 0; i <= 11000; i++)
                {
                    var text = i;
                    SimpleText.Dispatcher.Invoke(() => SimpleText.Text = text.ToString(CultureInfo.InvariantCulture));
                }
            });
        }
    } 
```

当我点击按钮程序执行*ButtonClicked* 然后我决定测试这段代码

```
 [TestMethod]
        public void TestMethod1()
        {
            var mainWindow = new MainWindow();
            Assert.IsNotNull(mainWindow);

            var task =  mainWindow.TestMe();
            DispatcherUtil.DoEvents();

            Assert.AreEqual(mainWindow.SimpleText.Text, "11000");
        } 
```

*DispatcherUtil*是辅助类。帮我从调度程序队列中处理事件

```
public static class DispatcherUtil
    {
        [SecurityPermissionAttribute(SecurityAction.Demand, Flags = SecurityPermissionFlag.UnmanagedCode)]
        public static void DoEvents()
        {
            var frame = new DispatcherFrame();
            Dispatcher.CurrentDispatcher.BeginInvoke(DispatcherPriority.Background,
                new DispatcherOperationCallback(ExitFrame), frame);
            Dispatcher.PushFrame(frame);
        }

        private static object ExitFrame(object frame)
        {
            ((DispatcherFrame)frame).Continue = false;
            return null;
        }
    } 
```

我的测试落在文本框值“34”。有时测试值“56”。因此我需要等待所有队列完成。我怎样才能做到这一点？

如果我通过 task.Wait() 等待，我的测试将无休止地运行并且从未完成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:00:13.330

好的，我知道这里发生了什么：您的测试方法并`SimpleText.Dispatcher`在同一个线程上运行这意味着如果您调用`SimpleText.Dispatcher.Invoke`然后`task.Wait()`您就​​会遇到典型的死锁：

```
[TestMethod]
public void TestMethod1()
{
    var mainWindow = new MainWindow();
    Assert.IsNotNull(mainWindow);

    var task =  mainWindow.TestMe();
    DispatcherUtil.DoEvents(); // synchronously invokes onto this thread
    task.Wait(); // blocks this thread so DoEvents is blocked (I've added this).

    Assert.AreEqual(mainWindow.SimpleText.Text, "11000");
} 
```

如果您现在更改`Invoke`为`BeginInvoke`调用不再同步并且一切正常。

```
public Task TestMe()
{
    return Task.Factory.StartNew(() =>
    {
        for (int i = 0; i <= 11000; i++)
        {
            var text = i;
            SimpleText.Dispatcher.BeginInvoke( 
                // this is now asynchronous so non-blocking
                () => SimpleText.Text = 
                         text.ToString(CultureInfo.InvariantCulture));
        }
    });
} 
```

# javascript - 浏览器窗口再次聚焦后如何执行jQuery-function？// 意外的调整大小行为

> ID：16032617
> 
> 赞同：0
> 
> 时间：2013-04-16T08:50:41.837
> 
> 标签：javascript, jquery, css, resize, css-position

我有一个 position:fixed Header 我想水平居中。所以我写了一个在`windwo.resize`- 和 -事件处执行的函数`document.ready`来改变页眉的左边距。但这不是重点，因为一切正常。

有时在我的 MacBook 关闭（休眠）或切换到另一个 Chrome 选项卡或另一个 OSX 工作区后，我的标题不再居中。似乎 OSX 正在偷偷调整窗口的大小，因此 CSS 代码会发生变化，但如果不手动调整浏览器窗口的大小，它就永远不会变回来。但问题并非每次都会出现...

这就是为什么我想在我的窗口再次聚焦后执行一些代码以防止这种丑陋的行为。

*另一个想法*：这可能与`document.resize`- 和 -事件之间的区别`window.resize`有关吗？我应该使用什么？

# objective-c - 具有可选属性的实体在雪豹中崩溃

> ID：16032621
> 
> 赞同：1
> 
> 时间：2013-04-16T08:50:49.567
> 
> 标签：objective-c, xcode, macos, core-data

好的，所以我的问题很简单。我需要我的属性之一是可选的。在 10.7 和 10.8 下它很好，但在雪豹下它会崩溃。当我取消选中“可选”时，它不再崩溃，但现在保存会导致错误并且不会发生。

这就是我设置托管对象上下文的方式：

```
self.notesPersistentStore = [self.notesStoreCoordinator
                              addPersistentStoreWithType:NSSQLiteStoreType
                              configuration:nil
                              URL:self.notesStoreUrl
                              options:nil
                              error:nil];

_notesContext = [[NSManagedObjectContext alloc] init];
_notesContext.mergePolicy = NSMergeByPropertyStoreTrumpMergePolicy;
[_notesContext setPersistentStoreCoordinator:self.notesStoreCoordinator];
[[NSNotificationCenter defaultCenter] addObserver:self
                                       selector:@selector(notesContextChanged:)
                                       name:NSManagedObjectContextObjectsDidChangeNotification
                                       object:self.notesContext]; 
```

这是它崩溃的部分：

```
- (void)notesContextChanged:(NSNotification *)notification_
{
    [self.notesContext save:nil];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:10:54.490

知道了！

雪豹希望 NSManagedObjectContext 的保存发生在主线程上

```
dispatch_async(dispatch_get_main_queue(), ^{
    NSError *error;
    [self.notesContext save:&error];
    [Utils handleError:error];
}); 
```

现在它起作用了！

让我感到困惑的是，如果所有属性都被指定为强制属性，那么即使在 10.6 上也不在主线程上运行，它也能很好地工作。那好吧...

# joomla - 在谷歌分析中跟踪注册用户的内容 - Joomla 2.5

> ID：16032626
> 
> 赞同：0
> 
> 时间：2013-04-16T08:51:10.890
> 
> 标签：joomla, google-analytics

我有一个 Joomla 2.5.9 网站，我需要跟踪注册用户阅读了哪些内容（这是一个培训计划网站）。

为此，我尝试在 Google Analytics 中创建一个自定义变量，如下所示：

```
/ set custom variables 
```

_gaq.push(["_setCustomVar", 1, "RegisteredUsers", "{UserName}", 1]); // 跟踪页面视图

实际上在 GA 中创建了一个自定义变量，但它没有用：它只是给了我所有用户的页面浏览量。

有谁知道如何修复上面的代码，以便我可以看到注册用户看到的页面？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:34:23.590

我认为最简单的方法是在模板中添加对登录用户的检查：

```
if (!JFactory::getUser()->guest)
{
  JFactory::getDocument()->addScriptDeclaration("
    _gaq.push(["_setCustomVar", 1, "RegisteredUsers", "{UserName}", 1]);
  ");
} 
```

取决于您如何添加 Google Analytics 跟踪代码（使用 JDocument 方法或作为原始模板 html），但概念是相同的。

# c# - WebClient 在表单 POST 后重定向到响应页面

> ID：16032627
> 
> 赞同：2
> 
> 时间：2013-04-16T08:51:11.230
> 
> 标签：c#, asp.net, post, webclient

我在尝试将某些表单值发布到页面 + 重定向用户时遇到了一些麻烦。例如：

*   用户点击注册按钮
*   填充了一些表单值
*   WebClient 发布这些值并重定向到外部 URL

我可以在没有 WebClient 的情况下通过中间 .aspx 和`onload="document.forms[0].submit()"`添加到正文的标准表单轻松实现这一点。

但是，我想在没有中间页面的情况下执行此操作。这可以使用 WebClient （或类似的）吗？

我像这样发布我的价值观：-

```
using (WebClient wc = new WebClient())
{
     NameValueCollection nvc = new NameValueCollection(8);
     nvc.Add("_charset_", "utf-8");
     nvc.Add("shop_id", "");
     nvc.Add("email", "");
     nvc.Add("amount", "");
     nvc.Add("curr", "");
     nvc.Add("paymentType", "");
     nvc.Add("kdnr", "");
     nvc.Add("ordernr", "");

     byte[] response = wc.UploadValues("https://www.trustedshops.com/shop/protection.php", nvc);
} 
```

我可以从字节数组中获取响应，这只是我发布到的页面的 html，但是，我想实际将用户发送到发布的页面，以便他们看到预填充的表单。这可以做到吗？

谢谢

# java - Maven 适合小型 Java 项目吗？

> ID：16032637
> 
> 赞同：8
> 
> 时间：2013-04-16T08:51:33.487
> 
> 标签：java, maven, project-management, build-process, build-automation

作为 Java SE 开发的初学者，我对使用 Maven 正确管理和组织我的项目非常感兴趣。

然而，尽管我非常愿意学习如何使用它，但我不想花更多的时间来理解 Maven，而不是实际编码。是的，我知道 Maven 的优点和缺点，我只担心学习曲线。

这个项目将持续 5 个月，只有一个开发人员——但以后*可能*需要更多的人来维护它。我知道大型项目使用它非常成功，但在我的情况下使用 Maven 值得，还是浪费时间？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T08:58:16.470

Maven 起初看起来很复杂，但是一旦您了解了基础知识，它确实可以节省大量时间。开始并不难，这种体验对于任何其他未来几乎任何规模的 Java 项目都非常有用。我会去的。[你有5分钟](http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html)吗？;)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-16T08:57:25.433

我认为你会花时间为一个小项目设置 Maven

*   引导项目
*   如果需要调整插件选项（java源/目标等）
*   添加依赖项

将与为小型项目设置 Ant 一样小，甚至可能更小。

当项目很小并且没有特殊要求时，Maven 尤其简单，因此您的用例将完全适合它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T08:55:39.240

您不需要了解太多关于 maven 的知识就可以使用它，并且在任何情况下，您都将使用一些或其他构建工具来构建您的项目，所以为什么不使用 maven。

开箱即用，无需任何配置 Maven 为您完成了大部分标准操作，因此您无需深入了解。

如果您使用 Eclipse，那么您可以通过 eclipse 使用 maven 创建新项目，这将为您生成默认的 maven pom.xml。

当您需要 Maven 的更多功能时，您可以学习和使用它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T08:58:08.610

最好继续使用 Maven，因为有时该项目可能会随着时间而发展，而其他将在未来从事此工作的开发人员会感谢您 :)。当然，您可以使用 Ant+Ivy 实现相同的目标，但在我看来，maven 将很容易设置并以最少的努力开始运行。此外，您不必担心会根据需要临时捆绑的依赖 jar。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-16T10:39:59.660

对于第一个计时器，它可能真的是压倒性的。正如其中一条评论所提到的，对您的小项目最有用的是依赖管理。

我会说这取决于您正在进行的项目。如果您只需要构建一个 JAR 或 WAR，您实际上可以节省大量编写 ANT 脚本所需的时间。如果您希望过多地调整构建过程，我建议您不要使用 Maven。

# c# - 从另一个线程更新树视图

> ID：16032639
> 
> 赞同：1
> 
> 时间：2013-04-16T08:51:39.873
> 
> 标签：c#, wpf, multithreading, treeview

我对 c# (WPF) 中的线程很陌生，因为我已经成功实现了一些标签和进度条更新，所以我不明白为什么当我尝试从在单独线程中调用的另一个类将项目添加到我的 GUI 的 treeView 时我得到一个例外：

> WindowsBase.dll 中出现“System.InvalidOperationException”类型的未处理异常
> 
> 附加信息：调用线程无法访问此对象，因为不同的线程拥有它。

我的更新树视图代码是这样的：

```
private void updateTreeView(TreeView tree, List<TreeViewItem> items, Boolean clear) {
            tree.Dispatcher.Invoke(new Action(() => {
                if (clear) {
                    tree.Items.Clear();
                }
                ItemCollection treeitems = tree.Items;
                foreach (TreeViewItem item in items) {
                    treeitems.Dispatcher.Invoke(new Action(() => {
                        treeitems.Add(item);
                    }));
                }
                tree.ItemsSource = treeitems;
            }));
        } 
```

以及该行的异常点：

> treeitems.Add(item);

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:17:06.100

您可以使用以下内容：

```
 delegate void DUpdateTreeView(TreeView tree, List<TreeViewItem> items, Boolean clear);
 private void UpdataTreeView(TreeView tree, List<TreeViewItem> items, Boolean clear)
    {
        if (tree.InvokeRequired)
        {
            DUpdateTreeView d = new DUpdateTreeView(UpdataTreeView);
            // replace this by the main form object if the function doesn't in the main form class 
            this.Invoke(d, new object[] { tree, items, clear }); 
        }
        else
        {
            if (clear)
            {
                tree.Items.Clear();
            }
            else
            {
                // Here you can add the items to the treeView
                /***
                ItemCollection treeitems = tree.Items;
                foreach (TreeViewItem item in items)
                {
                    treeitems.Dispatcher.Invoke(new Action(() =>
                    {
                        treeitems.Add(item);
                    }));
                }
                tree.ItemsSource = treeitems;
                ***/
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-25T16:57:04.777

这是一个非常古老的问题，但我想我会回答它。您的示例中有两个调度程序。您有一个正在获取其线程的树视图和一个似乎是在不同线程中创建的列表。

但是代码应该看起来更像这样。对不起，在这种情况下，我在调用中使用了一个委托。

```
 tree.Dispatcher.BeginInvoke(Sub()
          Dim node = new TreeViewItem() With {.Header = "Header"}
          tree.items.add(node)
                             End Sub) 
```

我没有跳出 UI 线程来添加原始问题中的节点。

# wpf - WPF DataGrid 和 Codeplex 上的 WPF 工具包

> ID：16032645
> 
> 赞同：1
> 
> 时间：2013-04-16T08:51:52.503
> 
> 标签：wpf, user-interface, datagrid, wpftoolkit

好吧，我完全糊涂了。我是 WPF 新手（不知道上周我读了多少次这句话），我正在为我的项目调查 DataGrids。

WPF 4.0 中的 DataGrid 没有提供太多的功能。**谁能告诉我该网格是否与[WPF Toolkit](http://wpf.codeplex.com/releases/view/40535)中的相同？**

该项目的代码是否成为 .NET4.0 的一部分？

**如果没有，是否有关于 WPF Toolkit DataGrid 的任何文档？**

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:51:57.243

据我所知`DataGrid`，最初是 WPF Toolkit 中的外部控件，但后来被包含在 WPF 4 的标准控件库中（请参阅[相关主题](http://msdn.microsoft.com/en-us/library/vstudio/bb613588%28v=vs.100%29.aspx#new_controls)）。因此，如果您使用的是 WPF 4，那么您不需要使用任何外部工具包`DataGrid`，并且它的所有文档都可以在[MSDN：DataGrid](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid%28v=vs.100%29.aspx)上找到。

这里有一个[关于数据网格](https://stackoverflow.com/questions/112518/what-wpf-datagrid-controls-are-worth-the-money-and-or-effort)的主题。它很旧，但或多或​​少是真实的。

# javascript - 无法使用 getJSON 检索数据

> ID：16032648
> 
> 赞同：-1
> 
> 时间：2013-04-16T08:51:54.890
> 
> 标签：javascript, jquery, ajax, html

这是我的页面代码...

```
<html>
<head>
<script src="jquery-1.7.2.js"></script>
</head>

<body>
<script>
var url = "https://natiweb-natiweb.rhcloud.com/game.php";
 $.getJSON(url,function(data){
              $.each(data,function(i,user){
alert("inside json");
    alert(user.appname);
               });
            }
        );

</script>

</body>
</html> 
```

我无法从服务器获取数据......如果我在 js 文件中编写脚本代码，警报不会弹出它工作正常。但我需要动态填充页面，因此我需要在正文中编写此查询。我在 json 函数中添加了警报。即使这样也不会弹出。我认为json没有被执行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:34:20.927

尝试自动执行您的代码，这就是 jquery doc 上的示例所说的。

```
<script>
(function() {
var url = "https://natiweb-natiweb.rhcloud.com/game.php";
$.getJSON(url,function(data){
$.each(data,function(i,user){
alert("inside json");
alert(user.appname);
           });
        }
    );  

})();
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:55:07.490

尝试这个.....

```
var url = "https://natiweb-natiweb.rhcloud.com/game.php";
 $.getJSON(url,function(data){
   $.each(data,function(i,user){
    alert(user.appname[i]);
           });
        }
    ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:57:51.547

试试这个，因为你在那个数组中得到数组，你的 json 存在

```
alert(user[0].appname); 
```

# actionscript-3 - 如何获取加载的 SWF 的舞台宽度

> ID：16032652
> 
> 赞同：2
> 
> 时间：2013-04-16T08:52:18.923
> 
> 标签：actionscript-3, stage

我正在将显示图像幻灯片的 SWF 加载到另一个阶段。当我使用`stage.stageHeight`或`stage.stageWidth`在加载的 SWF 中时，我得到加载 SWF 的舞台的宽度和高度，而不是加载的 SWF 舞台。

我的问题是，如何从加载的 SWF 本身而不是主舞台中获取加载的 SWF 的宽度和高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:50:01.430

我看到的唯一方法是读取 swf 元数据。您可以[`com.senocular.utils.SWFReader`](http://www.senocular.com/flash/actionscript/?file=ActionScript_3.0/com/senocular/utils/SWFReader.as)为此使用：

```
package
{
import com.senocular.utils.SWFReader;

import flash.display.Sprite;
import flash.events.KeyboardEvent;

[SWF(width="800", height="200", backgroundColor="0x8B8B8B")]
public class astest extends Sprite
{
    public function astest()
    {
        stage.addEventListener(KeyboardEvent.KEY_UP, onKb);
    }

    protected function onKb(event:KeyboardEvent):void
    {
        var swf:SWFReader = new SWFReader(root.loaderInfo.bytes);

        trace("swf.width: "+swf.width);
        trace("swf.height: "+swf.height);
    }

}
} 
```

输出：

```
swf.width: 800
swf.height: 200 
```

一定要传递`loaderInfo`加载的 swf 文件而不是加载器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:28:40.710

加载的swf将给出原始舞台大小。但是，在 swf 加载完成之前，该数据不可用，因此您应该在访问它们之前等待实例调度，否则它将引发错误。[`LoaderInfo`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#loaderInfo) [`height`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/LoaderInfo.html#height)[`width`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/LoaderInfo.html#width)`LoaderInfo``Event.COMPLETE`

# visual-studio-2012 - 如何使用命令行 vstest.console.exe 在解决方案中运行所有测试？

> ID：16032654
> 
> 赞同：17
> 
> 时间：2013-04-16T08:52:35.893
> 
> 标签：visual-studio-2012, continuous-integration

使用命令行 vstest.console.exe 在解决方案中运行所有测试的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:03:16.740

你可以试试这个，它讨论了如何使用 VSTest exe 在构建中运行测试。 [http://msdn.microsoft.com/en-ca/library/vstudio/ms253138.aspx#Runner_VS](http://msdn.microsoft.com/en-ca/library/vstudio/ms253138.aspx#Runner_VS)

# cmake - 使用 cmake 安装 NSIS 后如何要求重新启动

> ID：16032664
> 
> 赞同：0
> 
> 时间：2013-04-16T08:52:54.413
> 
> 标签：cmake, nsis

安装结束后是否可以要求用户重新启动系统？

我正在将 NSIS 与 CMake 一起使用。

谢谢你的帮助，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:27:57.083

您可以使用 execute_process 命令从 cmake 文件执行另一个脚本。

查看此处 [1] 了解更多信息。

[1] [http://www.cmake.org/cmake/help/cmake2.6docs.html#command:execute_process](http://www.cmake.org/cmake/help/cmake2.6docs.html#command:execute_process)

# javascript - 具有设置值 onload 的 javascript 传递元素

> ID：16032667
> 
> 赞同：0
> 
> 时间：2013-04-16T08:52:57.983
> 
> 标签：javascript, html, django

我有一个小型 Django 网站，我在其中一个页面上使用了一些 Javascript 来更改创建新课程的表单。它允许用户选择学生与选择元素相关的评估数量：

```
<select id="number_of_coursework" onchange="put_assessment_forms(this)">
    <option value="0">0</option>
    <option value="1" selected>1</option>
    <option value="2">2</option>
    ...
</select> 
```

Javascript然后根据生成HTML`element.value`并将其放入`innerHTML`网站中。这很好用。

我的问题是，如果课程已经存在，我希望页面已经设置为正确数量的评估。如何`onload`在 body 标记中使用来调用函数并传递一个值为 2 的元素？还是我需要以另一种方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:55:24.043

假设您的视图检查数据库并查看课程是否存在。如果课程存在，它会设置`num_of_assessments = 2`，或任何实际数字。如果课程不存在，请设置`num_of_assessments = None`。

在您的模板中，您可以这样做：

```
<select id="number_of_coursework" onchange="put_assessment_forms(this)">
    <option value="0" {% if num_of_assessments = 0 %}selected="selected"{% endif %}>0</option>
    <option value="1" {% if num_of_assessments = 1 %}selected="selected"{% endif %}>1</option>
    <option value="2" {% if num_of_assessments = 2 %}selected="selected"{% endif %}>2</option>
    ...
</select> 
```

# java - 如何循环 SQL 语句？

> ID：16032668
> 
> 赞同：4
> 
> 时间：2013-04-16T08:52:57.983
> 
> 标签：java, jsp, loops, jdbc

我正在尝试为列表中的每个值运行一个新的 SQL 命令。我有以下内容，它只是为我列表中的金额一次又一次地重复相同的值。

请注意，我必须通过数组列表中的值数量循环 SQL，并将每个值作为名称插入 SQL 中，如下所示。

这样做的最佳方法是什么，因为这绝对不是。

```
 int listSize = al.size();

    for(int i = 0; i < listSize; i++) {         
        ResultSet rs1 = name.executeQuery("SELECT sum(hours) FROM PROJECT_TIME WHERE DATE = '"+date+"' AND name = '"+al.listIterator().next()+"'");
        al1.add(rs1.getString(1));
        rs1.close();

    }
    System.out.println(al1); 
```

结果：

[70, 70, 70, 70, 70, 70, 70, 70, 70, 70]

预期结果：

[70、80、110、60、35、10、15、10、0、25]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T09:01:23.040

问题在

```
al.listIterator().next() 
```

它始终返回相同的值。因此，查询返回相同的结果集字符串，这就是为什么你的结果总是如此`70`。

试试这个代码：

```
int listSize = al.size();

for(int i = 0; i < listSize; i++) {         
    ResultSet rs1 = name.executeQuery("SELECT sum(hours) FROM PROJECT_TIME WHERE DATE = '"+date+"' AND name = '"+al.get(i)+"'");
    while(rs1.next()){
        al1.add(rs1.getString(1));
    }
    rs1.close();

}
System.out.println(al1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T09:03:26.117

每次您创建新的迭代器时，它每次都返回相同的值。试试下面的代码

```
int listSize = al.size();

    for(int i = 0; i < listSize; i++) {         
        ResultSet rs1 = name.executeQuery("SELECT sum(hours) FROM PROJECT_TIME WHERE DATE = '"+date+"' AND name = '"+al.get(i)+"'");
        al1.add(rs1.getString(1));
        rs1.close();

    }
    System.out.println(al1); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T08:56:07.790

请用

```
while(rs1.next()){
  System.out.println(rs1.getString(1));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T09:22:40.657

简单的答案是您需要在从结果集中读取之前执行`al.get(i)`和调用。`rs1.next()`您还应该在尝试从结果集中读取之前检查调用是否`rs1.next()`返回。`true`

但这忽略了一个事实，即在循环中执行查询很糟糕——性能会很糟糕，而且你正在敲击数据库。每次您调用`name.executeQuery`远程调用时都会产生所有开销，并且您正在为您正在迭代的集合中的每个项目执行此操作。如果集合中有 1000 个项目，那就是 1000 个远程调用。此外，使用字符串连接来构建查询意味着数据库必须在每次执行查询时计算查询计划。

要正确执行此操作，您应该使用准备好的语句执行单个查询，然后遍历结果集 - 1 个远程调用 - 类似于：

```
PreparedStatement preparedStatement = null;
ResultSet resultSet = null;

try
{
  preparedStatement = connection.prepareStatement("SELECT sum(hours) FROM project_time WHERE date = ? AND name IN ?");

  preparedStatement.setDate(1, date);
  preparedStatement.setArray(2, connection.createArrayOf("VARCHAR", al.toArray());

  resultSet = preparedStatement.executeQuery();

  List<String> hours = new ArrayList<String>();

  while (resultSet.next()) 
  {
    hours.add(resultSet.getString(1));
  }

  System.out.println(hours);
}
finally
{
  if (resultSet != null) resultSet.close();
  if (preparedStatement != null) preparedStatement.close();
} 
```

在不知道您使用的数据库的情况下，很难知道语法是否 100%，但您应该了解要点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T09:06:11.517

像这样设置 for 循环以使用列表中的每个条目：

```
 for(String name : al) {         
        ResultSet rs1 = name.executeQuery("SELECT sum(hours) FROM PROJECT_TIME WHERE DATE = '"+date+"' AND name = '"+name+"'");
        al1.add(rs1.getString(1));
        rs1.close();

    }
    System.out.println(al1); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T09:06:59.897

你可以用while替换for循环

```
Interator i = al.listIterator(); 
while(i.hasNext()){ 
    String name = i.next(); 
    ResultSet rs1 = name.executeQuery("SELECT sum(hours) FROM PROJECT_TIME WHERE DATE ="+date+"' AND name = '"+name+"'"); 
    while(rs1.next()){ 
      System.out.println(rs1.getString(1)); 
    } 
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-17T07:02:13.703

当您对 List 使用迭代器时，它会为您提供列表中的第一个元素位置，当调用 Iterator.next() 时，Iterator 会移动到嵌套元素位置。

`int listSize = al.size();

```
for(int i = 0; i < listSize; i++) {         
    ResultSet rs1 = name.executeQuery("SELECT sum(hours) FROM PROJECT_TIME WHERE DATE = '"+date+"' AND name = '"+al.get(i)+"'");
    al1.add(rs1.getString(1));
    rs1.close();

}
System.out.println(al1);` 
```

# mysql - php mysql matching and return value

> ID：16032671
> 
> 赞同：1
> 
> 时间：2013-04-16T08:53:08.320
> 
> 标签：mysql, sql

My tables are :

```
studens_exam_answers_tbl
----------------------------------------------------
exam_id | question_id | student_id  | student_answer 
----------------------------------------------------
    10       1           6              1 
    10       2           6              4
    10       3           6              3
    10       4           6              0
    10       5           6              5
    10       1           5              1
    10       2           5              2
    10       3           5              2
    10       4           5              5
    10       5           5              5

question_poll__tbl
--------------------------------------------------------------------------------
question_id | question  | option_1 |  option_2 | ....| option_5 |correct_answer
--------------------------------------------------------------------------------
    1          ....         ....       ....      ...    ....        5
    2          ....         ....       ....      ...    ....        2
    3          ....         ....       ....      ...    ....        3
    4          ....         ....       ....      ...    ....        4
    5          ....         ....       ....      ...    ....        1 
```

I want to match student answers with correct answers with sql. If students answer is correct 'it is true' else 'false'. if student_answer is 0 'empty'.

How can i do it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:02:39.617

try this

```
 Select student id, (Case when student_answer=0
    then ""
    else
    when student_answer=correct_answer then "true"
    else "false"
    end ) as Result
    from studens_exam_answers_tbl inner join question_poll__tbl on studens_exam_answers_tbl.question_id.question_id =question_poll__tbl.question_id 
```

# skype - 在 Skype 中实现个人语音邮件的代码

> ID：16032678
> 
> 赞同：1
> 
> 时间：2013-04-16T08:53:17.130
> 
> 标签：skype, skype4com, skype4java

我有一个项目，我将接收来自某些 Skype 用户的 Skype 电话。用户需要通过预定义的消息进行响应，然后根据响应将被引导到下一站（代理或呼叫或其他预先录制的消息）。

我确实发现了很多 Skype 的 DTMF 和 IVR 实现并尝试实现它们，一切正常，但问题在于将录制的消息播放为 Skype 呼叫响应。有人可以帮助我如何编写 C# 代码来更改 Skype 的音频源以播放 wav 或 mp3 文件吗？

我检查过：

[http://devforum.skype.com/t5/Desktop-API/Event-for-incoming-call/td-p/9174](http://devforum.skype.com/t5/Desktop-API/Event-for-incoming-call/td-p/9174)

[http://community.skype.com/t5/Desktop-API-former-Public-API/Sending-Audio-in-Skype/td-p/422](http://community.skype.com/t5/Desktop-API-former-Public-API/Sending-Audio-in-Skype/td-p/422)

[通过 Skype 通话发送音频](https://stackoverflow.com/questions/8244530/send-audio-over-skype-call?rq=1)

列举一些。除了将音频播放为 Skype 响应之外，可以实现所有功能。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T08:20:19.867

我已经使用 C# 完成了这件事。如果您的电话 varialbe 是`CurrentCall`：

```
TCallIoDeviceType DeviceType = TCallIoDeviceType.callIoDeviceTypeFile;
CurrentCall.set_InputDevice(DeviceType, audio_file_directory); 
```

音频文件必须是单声道 WAV-s 文件。

# python - How to add Users menu item in our module?

> ID：16032685
> 
> 赞同：0
> 
> 时间：2013-04-16T08:53:32.963
> 
> 标签：python, xml, openerp

i try it in this way.but unable to create users.please advice me to do that

```
 <record id="action_res_users" model="ir.actions.act_window">
        <field name="name">Users</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">res.users</field>
        <field name="view_type">form</field>
    </record>

    <menuitem action="action_res_users" id="menu_action_res_users"
        parent="menu_bpl_registers" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:10:15.230

Code seems fine. Did you update your module after running OpenERP server ? If you already did it and still menu is not coming, I can suggest You to try it by creating a new database.

# jqgrid - 如何增加 Struts2jquery 网格中一行的文本框大小？

> ID：16032686
> 
> 赞同：0
> 
> 时间：2013-04-16T08:53:34.223
> 
> 标签：jqgrid, struts2, struts2-jquery

```
<sjg:gridColumn name="scenarioDescription"
                index="scenarioDescription"
                title="Scenario Description" 
                sortable="true"
                editable="true" 
                edittype="text" /> 
```

***我尝试在标签内使用 width="250" 但它不起作用。我是 jquery 的新手。任何帮助，将不胜感激。提前谢谢**。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:43:49.267

我自己不使用 Struts2。一般来说，jqGrid*允许*在`editoptions`. 例如使用

```
editoptions: {size:10, maxlength: 15} 
```

编辑期间创建的元素的添加`size="10"`和`maxlength="15"`属性。`<input>`

如果我查看struts2-jquery 的网格部分[的文档](https://code.google.com/p/struts2-jquery/wiki/EditGrid)，您似乎可以通过向元素`editoptions`添加`editoptions`属性来指定。`<sjg:gridColumn>`你可以尝试类似的东西

```
<sjg:gridColumn name="scenarioDescription"
                title="Scenario Description" 
                editable="true"
                editoptions="{size: 10, maxlength: 15}" /> 
```

`size`属性的确切值`maxlength`或您可以选择的其他值符合您的要求。

# jakarta-ee - 在 JSF2 应用程序 (Glassfish) 中检索登录的 Windows 用户 (ActiveDir)

> ID：16032690
> 
> 赞同：0
> 
> 时间：2013-04-16T08:53:46.790
> 
> 标签：jakarta-ee, active-directory, glassfish, single-sign-on

我目前无法找出在我的应用程序中获取当前登录用户的登录名的最先进/标准解决方案。通过登录，我的意思是在使用应用程序的客户端上登录的 (Windows)-用户名。它将仅在 Intranet 环境中运行。

我正在使用 Windows Server 环境，使用 Glassfish 部署我的 JSF2 应用程序。

到目前为止，我发现的是关于 WAFFLE、jCIFS 和 SPNEGO 的建议。我能找到的关于 WAFFLE 和 Glassfish 的所有信息似乎要么[已经过时](https://groups.google.com/forum/?fromgroups=#!topic/waffle-users/5ZOCPccvNTI)，要么[再也找不到了](https://github.com/dblock/waffle/blob/master/Source/JNAWindowsAuthProvider/src-test/waffle/servlet/NegotiateSecurityFilterTests.java)。我只是搜索错误还是真的没有“教程”如何配置 WAFFLE 以与 Glassfish 一起使用？jCIFS，据我所知，不再支持。SPNEGO 有一个 Glassfish 教程，但老实说，我无法按照它进行操作，也无法重现所有步骤。显然，一些关于身份验证机制的背景知识——我没有——会有所帮助。

所以现在我希望，因为我发现的关于这个主题的大多数信息至少有 1.5 年的历史，从那以后有一些新的东西可以解决我的问题。如果没有，那么您的建议是什么？由于我已经编写了一些 PHP 应用程序（在 Apache 上运行），然后我能够通过 REMOTE_USER 服务器变量获取用户名，所以我考虑通过 Apache 调用我的 JSF 应用程序并以这种方式传递用户名。这也是一种选择吗？当然，如果我有选择，我更喜欢 JavaEE 解决方案......

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:37:09.713

获取当前登录的用户：

```
System.getProperty("user.name"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:40:01.943

对于 Java EE，获取登录用户：

*   在 EL：`#{request.remoteUser}`
*   使用 JSF API：`FacesContext.getCurrentInstance().getExternalContext().getRemoteUser();`
*   从 HttpServletRequest:`getUserPrincipal()`和`getRemoteUser()`
*   使用注入：`@Inject Principal principal;`

# objective-c - 如何获取在 NSOutlineView 的上下文菜单中右键单击的元素？

> ID：16032698
> 
> 赞同：1
> 
> 时间：2013-04-16T08:54:23.517
> 
> 标签：objective-c, cocoa

我有一个`NSOutlineView`并且还创建了一个菜单，当我右键单击任何元素时，它会显示为上下文菜单。

现在我有2个问题。

1.  如何识别右键单击的元素，以便对上下文菜单中的任何功能采取相应的行动。
2.  在我实际打开上下文菜单以根据右键单击的元素删除或禁用菜单项之前，如何更改上下文菜单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:00:07.527

该`clickedRow`方法（继承自`NSTableView`）将为您提供行号。

然后可以使用`NSOutlineView`'s将行号转换为项目`itemForRow`。

对于菜单部分，该`NSMenuDelegate`方法`menu:updateItem:atIndex:shouldCancel:`是在菜单显示之前调用的，因此您可以根据需要对其进行修改。

根据[文档](http://developer.apple.com/library/mac/#documentation/cocoa/reference/NSMenuDelegate_Protocol/Reference/Reference.html)，您还必须实施`numberOfItemsInMenu:`.

您可以将相同的对象设置为大纲视图和菜单的委托。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:04:36.960

理论上，当右键单击一行时，它应该已经是 NSOutlineView 中选中的行。无论如何，这通常不会发生。

我通过实现以下方法（也回答了第二个问题）解决了这个问题：

```
- (void)menuNeedsUpdate:(NSMenu *)menu 
```

将此方法插入您的一个类中并将该类注册为菜单委托（请注意：NSMenu，而不是单个 NSMenuItem）。在上面的代码中，我添加了这段代码，用于在右键单击时自动选择单击的行。

```
if ([[arrayController selectedObjects] count] == 0 || [[arrayController selectedObjects] count] == 1) {
        if ([myTable clickedRow] != -1) {
            [myTable selectRowIndexes:[NSIndexSet indexSetWithIndex:[myTable clickedRow]] byExtendingSelection:FALSE];
        }
    } 
```

据我所知，这在 NSTableView 中可以正常工作，因此它也应该在您的 NSOutlineView 中工作。

关于第二个问题，您可以使用上述方法在每次显示 NSMenu 时得到通知。

# jquery - jQuery 从顶部推送提要

> ID：16032699
> 
> 赞同：0
> 
> 时间：2013-04-16T08:54:25.687
> 
> 标签：jquery, jquery-animate

我有一个提要站点，一旦 MySQL 表上有新行，它就会自行更新。这是我的代码：

```
 var cacheData;
var data = $('#refresh').html();
var auto_refresh = setInterval(
function ()
{
    $.ajax({
        url: 'index.php',
        type: 'POST',
        data: data,
        dataType: 'html',
        success: function(data) {
            if (data !== cacheData){
                //data has changed (or it's the first call), save new cache data and update div
                cacheData = data;

                $('#refresh').fadeOut("fast");
                $('#refresh').load('index.php?_=' +Math.random()+' #refresh');
                $('#refresh').fadeIn("slow");
            }           
        }
    })
}, 1000); 
```

目前，它只是完全淡出，然后随着新帖子淡入。有没有办法像 FaceBook 一样将所有其他结果向下滑动，然后淡入新结果？我努力了

```
 $('#refresh').animate({top:$('#refresh').height(data); - $('#refresh').height(cacheDate);},"slow");
$('#refresh').load('index.php?_=' +Math.random()+' #refresh');
$('#refresh').fadeIn("slow"); 
```

这是这样做的方法吗？我试图通过新帖子的高度将分区向下推，然后将其淡入，但没有奏效。谁能发现为什么/我必须做什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:58:48.043

创建一个新的 div 元素，将其隐藏，将其添加到父容器并`slideDown()`用于该效果。此外，仅从服务器发回新帖子（比较时间戳）。

# wpf - 在数据网格中选择组合框第一项时，OnPropertyChanged 不会触发

> ID：16032700
> 
> 赞同：0
> 
> 时间：2013-04-16T08:54:25.830
> 
> 标签：wpf, data-binding, datagrid, combobox

我在 WPF gridview 中有一个组合框，如下所示：

```
 <DataGridComboBoxColumn Header="Type" SelectedItemBinding="{Binding Path=Type, UpdateSourceTrigger=PropertyChanged}"
                                        ItemsSource="{Binding Source={my:EnumValues {x:Type my:CommandTypes}}}" 
                                        MinWidth="100"/> 
```

它背后的 ViewModel 是这样的：

```
public class LoadSimCommand {
    public CommandTypes Type
    {
        get
        {
            return mType;
        }
        set
        {
            mType = value;
            switch (mType)
            {
                /* Set some dependency properties */
            }
        }
    }
} 
```

这很好用，除了一种情况：当我单击组合框并从列表中选择第一项时，ViewModel 没有更新。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:02:12.420

当我输入问题时，我想到了答案。我仍然想分享解决方案，以防其他人遇到同样的问题。ViewModel 没有更新，因为 ViewModel 的 CommandTypes 属性默认值为 0，它转换为枚举中的第一个值。Therefore, when the first item is selected, the property isn't changed and therefore OnPropertyChanged is not fired because the property hasn't changed.

现在，我不想引入一个额外的 CommandType 来解决这个问题，所以我决定欺骗我的数据类型并将其设为 Nullable，如下所示：

```
public CommandTypes? Type; 
```

现在 Type 的初始值为 null，我可以用`value.HasValue`它来做一些健全性测试。我还将我想要设置的依赖属性的初始状态更改为`switch`“无效”值，以便我的 UI 状态仍然一致。

作为最后一步，我添加了具有以下内容的 RowEditEnding 事件处理程序：

```
private void DataGridView_RowEditEnding(object sender, DataGridRowEditEndingEventArgs e)
{
    // Check if the entered type is not null
    if (!(e.Row.Item is LoadSimCommand) || 
         (e.Row.Item as LoadSimCommand).Type == null)
    {
        e.Cancel = true;
    }
} 
```

这样，当未设置正确的行类型时，不会提交该行。

希望这对某人有用！

# windows-phone-7 - 如何在 Windows Phone 7 中使用 SOAP

> ID：16032704
> 
> 赞同：0
> 
> 时间：2013-04-16T08:54:50.300
> 
> 标签：windows-phone-7, soap

不知道该怎么办。

我有我需要的所有数据，但不知道如何正确使用它。

我已经开始添加“服务参考”。我添加了这个 URL：transpawebserviceslive/gateway.asmx

所以我现在所做的就是这个。对于我的按钮上的单击事件以验证密码和用户名是否正确，我已执行以下操作，但我不知道我是否在这里执行此操作：

```
 private void Button_Click_1(object sender, RoutedEventArgs e)
  {
  ServiceReference.GatewaySoapClient client = new  ServiceReference.GatewaySoapClient();
  client.AuthenticateAsync(username.Text,password.Text,sign.Text,password.Text);
  client.AuthenticateCompleted += client_AuthenticateCompleted;
  }

  void client_AuthenticateCompleted(object sender,  ServiceReference.AuthenticateCompletedEventArgs e)
    {
        ServiceReference.AuthenticatedDto test = new  ServiceReference.AuthenticatedDto();

        if (kund.Text == test.CustomerUser)
        {
            MessageBoxResult m = MessageBox.Show("Ok", "Ok", MessageBoxButton.OK);
        }
        else 
        {
            MessageBoxResult m = MessageBox.Show("Wrong", "W", MessageBoxButton.OK);
        } 
```

不知道我在这里做什么，有一些帮助会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:52:49.890

你在那里所做的一切都是正确的。您只需要解析响应并继续。

```
void client_AuthenticateCompleted(object sender,  ServiceReference.AuthenticateCompletedEventArgs e)
{
    if (e.Error == null) //To ensure there is no error in the request
        {
            if (e.Result.Contains("ERROR"))
                MessageBox.Show("Authentication failed", "Ok", MessageBoxButton.OK);
            else
                MessageBox.Show("Authenticaion success", "Ok", MessageBoxButton.OK);
        }
} 
```

# c# - HttpClient.PostAsJsonAsync 崩溃而不抛出异常

> ID：16032708
> 
> 赞同：11
> 
> 时间：2013-04-16T08:55:09.460
> 
> 标签：c#, asp.net-web-api

我有一个带有 WebAPI 控制器的 ASP.NET MVC 应用程序，以及一个使用这些控制器的控制台应用程序。控制台应用程序从计划任务运行并从远程源获取数据，对其进行解析，然后在退出之前将其发布到 MVC 应用程序。

这适用于几个控制器，但其中一个调用是在不引发异常的情况下使控制台应用程序崩溃。用于所有控制器的调用者代码：

```
 public async Task<string> Post<T>(string urlRoot, string url, T data)
    {
        var result = "";
        try
        {
            var httpClient = GetHttpClient(urlRoot);
            var response = await httpClient.PostAsJsonAsync(url, data); // Exits here
            if (response.IsSuccessStatusCode)
            {
                result = await response.Content.ReadAsAsync<string>();
            }
        }
        catch (Exception e)
        {
            Debug.WriteLine(e.ToString());
        }
        return result;
    } 
```

调用时程序退出`await httpClient.PostAsJsonAsync(url, data)`。使用断点，既不会到达`catch`块也不会`if`到达语句。然而，调用正在进行，因为使用正确的数据调用 Web API 控制器。

这些程序共享相同的代码，以便`T`通过 API 调用传递。

从输出窗口：

> 程序“[9640] ProgramName.vshost.exe: Managed (v4.0.30319)”已退出，代码为 0 (0x0)。

我想知道发布数据的大小是否有问题，但我没有找到任何说明大小限制的文档。

所以我的问题是：

1.  什么可能导致控制台应用程序过早退出？
2.  如何检测到这一点并防止程序退出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-25T06:09:10.623

可能的问题之一是您不`await`执行 Post 方法。这是我正在谈论的简化版本：

```
 static void Main(string[] args)
    {
        Action testAction = async () =>
        {
            Console.WriteLine("In");
            await Task.Delay(100);
            Console.WriteLine("First delay");
            await Task.Delay(100);
            Console.WriteLine("Second delay");
        };
        testAction.Invoke();
        Thread.Sleep(150);
    } 
```

`testAction`将在第二个等待任务中中止，并且控制台以 0 代码退出。输出将是：

```
 In
   First delay
   Press any key to continue . . . 
```

就我而言，我只会`Console.ReadKey()`在 Main 方法的末尾添加 call 。在您的情况下，可能需要一些不同的东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-29T18:40:52.660

请看一下这个问题，它列举了一些您需要处理的异常：

[.NET 控制台应用程序中的全局异常处理程序](https://stackoverflow.com/questions/3133199/net-global-exception-handler-in-console-application)

```
Application.ThreadException += MYThreadHandler;

AppDomain.CurrentDomain.UnhandledException += new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException); 
```

还要考虑任务异常的这种方法：

```
static void Main(string[] args)
{
    Task<int> task = new Task<int>(Test);
    task.ContinueWith(ExceptionHandler, TaskContinuationOptions.OnlyOnFaulted);
    task.Start();
    Console.ReadLine();
}

static int Test()
{
    throw new Exception();
}

static void ExceptionHandler(Task<int> task)
{
    var exception = task.Exception;
    Console.WriteLine(exception);
} 
```

您可以在此问题的答案之一中找到更多详细信息：

[捕获在不同线程中抛出的异常](https://stackoverflow.com/questions/5983779/catch-exception-that-is-thrown-in-different-thread)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:15:02.917

I would suggest testing to see if the JSON.Net serializer is capable of serializing your type.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T12:35:58.817

1.  一旦你点击等待控制将返回给 Post 的调用者。

2.  不要在 post 方法中等待，而是从返回的任务中使用 ContinueWith，例如：[UI 线程上的任务继续](https://stackoverflow.com/questions/4331262/task-continuation-on-ui-thread)或等待返回的任务：http: [//msdn.microsoft.com/en-gb/library/dd537610.aspx](http://msdn.microsoft.com/en-gb/library/dd537610.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-23T02:51:29.720

“exited with code 0”表示程序正常退出。因此，可能是调用者的调用者`Post<T>`甚至上层调用者确定是时候结束程序了。如果你熟悉 WinDbg 等调试工具，你可以在 ntdll 函数处设置原生断点来进一步诊断案例，但通常你只需要查看你的代码库。

# marmalade - 果酱 s3eAudio 无法在 Windows 版本上播放

> ID：16032709
> 
> 赞同：1
> 
> 时间：2013-04-16T08:55:15.347
> 
> 标签：marmalade, build-environment

我正在构建一个多平台应用程序，当我们为 Windows 构建时，音频仅适用于构建它的 PC。当我们为平板电脑构建时，所有声音都可以工作，当我们为 PC 构建时，只有音频没有播放，音效（s3eSound）工作正常。

我们使用的声音路径是相对的（数据/声音）。

是否有一些我需要注意的特定窗口，或者是否有人对我可以从哪里开始寻找有任何想法？

谢谢，

线

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:48:53.007

问题一定是路径问题。声音文件不可用于指定位置的果酱。所以这是最可能的原因。我可以想象的另一个陷阱是您没有进行包含 bin 文件（group.bin 文件）的构建。因此应用程序无法找到声音（应该在 bin 文件中）。

如果是这种情况，您需要在部署工具中选择合适的资产组。

# javascript - JavaScript 在实时环境中有效，但在 jsFiddle.net 上无效

> ID：16032710
> 
> 赞同：0
> 
> 时间：2013-04-16T08:55:15.847
> 
> 标签：javascript

这在我的“实时”系统中有效，但在我将其粘贴到 Jsfiddle 时无效。当我更改选择时，该函数没有被调用。为什么？

[http://jsfiddle.net/uEQg2/1/](http://jsfiddle.net/uEQg2/1/)

```
function InsertPrice(Variante) {
document.getElementById('pricebox-right').innerHTML = 'US $ ' + Variante;
return true; } 
```

# csv - 使用 python pandas 转置 csv 结构

> ID：16032711
> 
> 赞同：2
> 
> 时间：2013-04-16T08:55:16.203
> 
> 标签：csv, python-2.7, pandas

我有以下csv结构：

```
'国家' '1960' '1961' '1962'
澳大利亚 450 567 723
新西兰 125 320
工业 350 375 395
SL        
帕克 100 115 218

```

使用 Python Pandas 如何将上述结构转换（转置）为以下结构？

```
'国家' '年份' '价值'
澳大利亚 1960 450
澳大利亚 1961 567
澳大利亚 1962 723
新西兰 1960   
新西兰 1961 125
...

```

我尝试使用 pivot 是徒劳的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T09:36:40.370

```
In [19]: df
Out[19]:
year     1960  1961  1962
Country
AUS       450   567   723
NZ        NaN   125   320
IND       350   375   395
SL        NaN   NaN   NaN
PAK       100   115   218

In [20]: df.stack().reset_index()
Out[20]:
   Country  year    0
0      AUS  1960  450
1      AUS  1961  567
2      AUS  1962  723
3       NZ  1961  125
4       NZ  1962  320
5      IND  1960  350
6      IND  1961  375
7      IND  1962  395
8      PAK  1960  100
9      PAK  1961  115
10     PAK  1962  218 
```

显然 NaN 被丢弃了。

# php - 附件名称和文件扩展名在电子邮件 *.eml 中不起作用

> ID：16032713
> 
> 赞同：6
> 
> 时间：2013-04-16T08:55:23.083
> 
> 标签：php, email, zend-framework, email-attachments, eml

我想创建`.eml`带有多个附件格式的电子邮件文件。附件已生成并且附件的内容是正确的。但附件始终采用`.dat`格式，文件名为“ATT00001”、“ATT0002”..等

目前我正在关注[this stackoverflow question](https://stackoverflow.com/questions/8776481/php-library-to-generate-eml-email-files)中给出的解决方案，我的代码如下

*PHP*

```
 foreach($reports as $pdf){
        $attachment = file_get_contents("auto_report_attachments\\Template_Attachment.eml");
        $attachment = str_replace("TEMPLATE_MIME_TYPE", $pdf['type'], $attachment);
        $attachment = str_replace("TEMPLATE_FILE_NAME", $pdf['filename'], $attachment);
        $attachment = str_replace("TEMPLATE_ATTACHMENT_CONTENT", base64_encode($pdf['file']), $attachment);

        $content .= $attachment;
        unset($attachment);
    } 
```

*模板附件*

```
--080107000800000609090108
Content-Type: "TEMPLATE_MIME_TYPE"
name="TEMPLATE_FILE_NAME"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
filename="TEMPLATE_FILE_NAME"

TEMPLATE_ATTACHMENT_CONTENT 
```

`$content`是上面链接中描述的主要电子邮件标题和正文。我的`.eml`文件看起来像；

```
MIME-Version: 1.0
Date: Tue, 16 Apr 2013 09:03:37 +0100
From: sender@emailhost.com
To: recipient@emailhost.com
Subject: Email subject
Content-Type: multipart/mixed; boundary="080107000800000609090108"

This is a message with multiple parts in MIME format.

--080107000800000609090108
Content-Type: text/html

<p><strong>Project Name: Some Project and the body continues...</p>

--080107000800000609090108
Content-Type: "application/pdf"
name="AM22831 -  - Cover Sheet.pdf"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
filename="AM22831 -  - Cover Sheet.pdf"

JVBERi0xLjMKMyAwIG9iago8PC9UeXBlIC9QYWdlCi9QYXJlbnQgMSAwIFIKL1Jlc291cmNlcyAyIDAgUgovQ29udGVudHMgNCAwICiUlRU9GCg==

--080107000800000609090108
Content-Type: "application/pdf"
name="AM22831 -  - Manufacturing Status.pdf"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
filename="AM22831 -  - Manufacturing Status.pdf"

cSAxMTMuMzkgMCAwIDMwLjUzIDE0LjE3IDU1MC41OCBjbSAvSTEgRG8gUQpxIDAuMDAwIDAuMDAwIDEuMDAwIHJnIEJUIDEzMC4zOSRU9GCg==

--080107000800000609090108 
```

上面的`base64`内容给出了文件中正确的内容，`PDF`当文件通过选择以打开时打开`PDF Reader`。但是这些文件没有`.pdf`格式。`.xls`和`.doc`所有其他文件类型也是如此。所有文件均`.dat`采用标准命名格式而不是指定名称。

请帮我解决这个附件进来所需`file type`的指定文件名。

注意：`base64`示例`.eml`文件中的内容被截断

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T13:58:48.030

我自己找到了答案..!! 的标题`Template_Attachment`应该如下

```
--080107000800000609090108
Content-Type: TEMPLATE_MIME_TYPE;name="TEMPLATE_FILE_NAME"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;filename="TEMPLATE_FILE_NAME"

TEMPLATE_ATTACHMENT_CONTENT 
```

在这种情况下，边界在哪里`080107000800000609090108`，并且在所有附件的末尾，应该有另一个`080107000800000609090108`来结束电子邮件。

希望有一天这会对某人有所帮助:-)

PS：所以实际`.eml`文件如下所示，它应该可以完美运行

```
MIME-Version: 1.0
Date: Tue, 16 Apr 2013 09:03:37 +0100
From: sender@emailhost.com
To: recipient@emailhost.com
Subject: Email subject
Content-Type: multipart/mixed; boundary="080107000800000609090108"

This is a message with multiple parts in MIME format.

--080107000800000609090108
Content-Type: text/html

<p><strong>Project Name: Some Project and the body continues...</p>

--080107000800000609090108
Content-Type: application/pdf;name="AM22831 Cover Sheet.pdf"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;filename="AM22831 Cover Sheet.pdf"

JVBERi0xLjMKMyAwIG9iago8PC9UeXBlIC9QYWdlCi9QYXJlbnQgMSAwIFIKL1Jlc291cmNlcyAyIDAgUgovQ29udGVasdsDFDffjMBakdjKJHBzdHlsZT0iY29=

--080107000800000609090108
Content-Type: application/excel;name="AM22831 Manufacturing Status.xls"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;filename="AM22831 Manufacturing Status.xls"

DQoNCjx0YWJsZSBib3JkZXI9IjAiPg0KPHRyPg0KPHRkIGNvbHNwYW49IjMiIHJvd3NwYW49IjIiIGFsaWduPSJjZW50ZXIiPg0KICAgIDxoMSBzdHlsZT0iY29= 
```

# ios - GDataXML 获取子节点

> ID：16032715
> 
> 赞同：3
> 
> 时间：2013-04-16T08:55:36.647
> 
> 标签：ios, xml, gdataxml

有我的 XML 数据：

```
 <item>
    <title>The Powerful Academician Able to Reduce Tobacco Hazards</title>
    <link>http://china15min.com/2013/03/26/the-powerful-academician-able-to-reduce-tobacco-hazards/</link>
    <comments>http://china15min.com/2013/03/26/the-powerful-academician-able-to-reduce-tobacco-hazards/#comments</comments>
    <pubDate>Tue, 26 Mar 2013 08:43:37 +0000</pubDate>
    <dc:creator>Panda Walking</dc:creator>
            <category><![CDATA[Economics]]></category>
    <category><![CDATA[Academician of Chinese Engineering Academy]]></category>
    <category><![CDATA[China Tobacco Control Association]]></category>
    <category><![CDATA[China's tobacco industry]]></category>
    <category><![CDATA[CORESTA]]></category>
    <category><![CDATA[low-tar cigarettes in China]]></category>
    <category><![CDATA[signatory country of the World Health Assembly on Tobacco Control Framework Convention]]></category>
    <category><![CDATA[smokers in China]]></category>
    <category><![CDATA[Xie Jian Ping]]></category>
    <category><![CDATA[Yunnan]]></category>

    <guid isPermaLink="false">http://china15min.com/?p=1891</guid>
    <description><![CDATA[During the two sessions, the deputies of NPC are obliged to answer journalists&#8217; questions, which may include special topics besides national affairs.  For example, why is the &#8220;tobacco academician&#8221; able to keep his position unswayed despite strong opposition from various... <a href="http://china15min.com/2013/03/26/the-powerful-academician-able-to-reduce-tobacco-hazards/" class="read-more">Read More &#8250;</a><img alt="" border="0" src="http://stats.wordpress.com/b.gif?host=china15min.com&#038;blog=37468365&#038;post=1891&#038;subd=china15min&#038;ref=&#038;feed=1" width="1" height="1" />]]></description>
    <wfw:commentRss>http://china15min.com/2013/03/26/the-powerful-academician-able-to-reduce-tobacco-hazards/feed/</wfw:commentRss>
    <slash:comments>0</slash:comments>

    <media:content url="http://1.gravatar.com/avatar/ad06eed181b094ac3022d4507d38c2b7?s=96&#38;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D96&#38;r=G" medium="image">
        <media:title type="html">china15min</media:title>
    </media:content>

    <media:content url="http://china15min.files.wordpress.com/2013/03/xiejinping.jpg" medium="image">
        <media:title type="html">xiejinping</media:title>
    </media:content>
</item> 
```

使用这种方法，我可以获得 "link" 、 "title" 和 "pubDate" 节点，

```
- (void)parseRss:(GDataXMLElement *)rootElement entries:(NSMutableArray *)entries {

    NSArray *channels = [rootElement elementsForName:@"channel"];
    for (GDataXMLElement *channel in channels) {
    NSString *blogTitle = [channel valueForChild:@"title"];
    NSArray *items = [channel elementsForName:@"item"];
    for (GDataXMLElement *item in items) {
        NSString *articleTitle = [item valueForChild:@"title"];
        NSString *articleUrl = [item valueForChild:@"link"];
        NSString *articleDateString = [item valueForChild:@"pubDate"];
        NSDate *articleDate = [NSDate dateFromInternetDateTimeString:articleDateString formatHint:DateFormatHintRFC822];
        BQWRSSEntry *entry = [[BQWRSSEntry alloc] initWithBlogTitle:blogTitle
                                                  articleTitle:articleTitle
                                                    articleUrl:articleUrl
                                                   articleDate:articleDate];
        [entries addObject:entry];

        }
    }
} 
```

而且我使用相同的方法来获取“描述”，但结果字符串为空。

我怎样才能得到“描述”和第二个“媒体：内容网址”网址字符串***“ [http://china15min.files.wordpress.com/2013/03/xiejinping.jpg](http://china15min.files.wordpress.com/2013/03/xiejinping.jpg) ”***

请帮助我，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:57:00.663

我不知道为什么您无法检索描述。您可以像这样轻松获取值：

```
NSString *description = [item valueForChild:@"description"]; 
```

否则，要检索第二个“media:content url”url 字符串，请遵循以下命令：

```
NSArray *mediaContents  = [item elementsForName:@"media:content"];
if ([mediaContents count] > 1)
{
    GDataXMLElement *media2 = [mediaContents objectAtIndex:1];
    GDataXMLNode *urlString = [media2 attributeForName:@"url"];
} 
```

完整的代码应如下所示：

```
- (void)parseRss:(GDataXMLElement *)rootElement entries:(NSMutableArray *)entries {

    NSArray *channels = [rootElement elementsForName:@"channel"];
    for (GDataXMLElement *channel in channels) {
        NSString *blogTitle = [channel valueForChild:@"title"];
        NSArray *items = [channel elementsForName:@"item"];
        for (GDataXMLElement *item in items) {
            NSString *articleTitle = [item valueForChild:@"title"];
            NSString *articleUrl = [item valueForChild:@"link"];
            NSString *articleDateString = [item valueForChild:@"pubDate"];

            NSString *description   = [item valueForChild:@"description"];
            NSArray *mediaContents  = [item elementsForName:@"media:content"];
            if ([mediaContents count] > 1)
            {
                GDataXMLElement *media2 = [mediaContents objectAtIndex:1];
                GDataXMLNode *urlString = [media2 attributeForName:@"url"];
            }

            BQWRSSEntry *entry = [[BQWRSSEntry alloc] initWithBlogTitle:blogTitle
                                                  articleTitle:articleTitle
                                                    articleUrl:articleUrl
                                                   articleDate:articleDate];
            [entries addObject:entry];
        }
    }
} 
```

# jquery - jQuery UI.hide('slide') 带有边距的奇怪行为

> ID：16032719
> 
> 赞同：14
> 
> 时间：2013-04-16T08:55:51.897
> 
> 标签：jquery, jquery-ui

我在`.hide('slide')`许多元素上使用 jQuery UI 的动画。问题是，当我`margin`在这些元素上指定 a 时，动画似乎会向下跳，一旦完成，就会返回到其原始位置。如果我`margin`从这些元素中删除 ，问题就不复存在了。

### [我已经设置了一个简化的示例小提琴来显示问题](http://jsfiddle.net/s5U38/14/)

## CSS

```
div.score {
    width: 32px;
    height: 32px;
    background-color: blue;
    color: white;
    text-align: center;
    margin: 10px;
    padding-top: 6px;
} 
```

## jQuery

```
$('div.score').click(function() {
    var $this = $(this);
    $this.hide('slide', { direction: 'right' }, 250, function() {
        $this.show('slide', { direction: 'left' }, 250)
             .text(parseInt($this.text(), 10) + 1);
    });
}); 
```

## HTML

```
<div class="score">0</div>
<div class="score">0</div> 
```

谁能解释这是什么原因，这是一个错误吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T09:35:30.170

`div.ui-effects-wrapper``div.score`在动画之前包装你的元素（jQuery UI）。`outerHeight(true)`脚本使用包括边距[http://api.jquery.com/outerHeight](http://api.jquery.com/outerHeight)的方法计算其高度。

所以`div.ui-effects-wrapper`高度是`div.score`高度+`div.score`边距->`52px`

但是你的元素仍然有边距规则，所以实际的包装高度是`52px + 20px = 72px`.

我认为这是一个错误。

您可以使用此版本（带有简单的包装器） [http://jsfiddle.net/vpetrychuk/s5U38/31/](http://jsfiddle.net/vpetrychuk/s5U38/31/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T09:37:21.620

我用另一个 div 作为容器来解决这个问题，它需要边距，而计数器本身没有边距：

**HTML**

```
<div class="slideContainer">
    <div class="score">0</div>
</div> 
```

**CSS**

```
div.slideContainer {
    width: 32px;
    height: 32px;
    margin: 10px;
} 
```

[http://jsfiddle.net/nPjEG/](http://jsfiddle.net/nPjEG/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:47:00.433

您可以使用`margin: auto 0 10px;`or`magin: auto 10px 10px;`代替`margin: 10px;`

# ruby - 在将字符串写入日志文件之前从字符串中删除颜色装饰

> ID：16032726
> 
> 赞同：10
> 
> 时间：2013-04-16T08:56:25.267
> 
> 标签：ruby, logging, colors, ansi-escape

我像这样使用红宝石记录器：

```
$logger = Logger.new MultiIO.new($stdout, log_file) 
```

`MultiIO`我从[这个答案](https://stackoverflow.com/a/6407200/674039)中得到的课程在哪里。大多数情况下，这很好用，但我使用`'colored'`ruby​​gem 在终端上提供彩色输出。不幸的是，这也最终出现在日志文件中，因为 ANSI 转义看起来像`[32mPASS[0m`或一些类似的不可打印字符垃圾。

在保持 tty 字符串颜色的同时清理日志文件字符串的最佳方法是什么？我不介意猴子补丁`Logger`或`MultiIO`，但我绝对不希望对 logfile 和 screen 进行两次不同的调用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-16T10:12:21.040

这是我目前的解决方案

```
class ColourBlind
  def initialize(*targets)
     @targets = targets
  end

  def write(*args)
    @targets.each {|t| t.write(*args.map {|x| x.gsub(/\e\[(\d+)m/, '')}.compact)}
  end

  def close
    @targets.each(&:close)
  end
end 
```

进而：

```
$logger = Logger.new MultiIO.new($stdout, ColourBlind.new(log_file)) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-08T09:49:17.390

从[着色宝石](https://github.com/fazibear/colorize/blob/9f18a27e260746cc7092d9f03403711ab62d7167/lib/colorize.rb)：

```
class String
  REGEXP_PATTERN = /\033\[([0-9]+);([0-9]+);([0-9]+)m(.+?)\033\[0m|([^\033]+)/m

  def uncolorize
    self.scan(REGEXP_PATTERN).inject("") do |str, match|
      str << (match[3] || match[4])
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-03-09T14:44:46.443

为了去除 ANSI 颜色，我建议

```
string_with_ascii = "..."
string_no_ascii = string_with_ascii.gsub(/\e\[([;\d]+)?m/, '') 
```

# android - Android GridView 多选

> ID：16032727
> 
> 赞同：2
> 
> 时间：2013-04-16T08:56:30.793
> 
> 标签：android, gridview, multi-select

我想用 GridView 布局做一个活动。我将能够在gridview的元素上拖动手指来多选项目（例如[Ruzzle](https://play.google.com/store/apps/details?id=se.maginteractive.rumble.free)）。当我举起手指时，我必须显示我选择了多少项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-28T22:52:12.557

我知道这是一个老问题，但最近我们遇到了同样的问题，我们想出了一些办法。

假设您要将单元格的颜色更改为绿色。您只需要调用`GridView.setOnTouchListener`并实现`OnTouchListener`类似于以下内容：

```
...
private final int SELECTED_CELL_COLOR = Color.GREEN;
private int mPosition = GridView.INVALID_POSITION;
private boolean mSelecting = false;
...
@Override
public boolean onTouch(View v, MotionEvent event) {
    int action = event.getActionMasked();
    switch (action){
    case MotionEvent.ACTION_DOWN:
    case MotionEvent.ACTION_MOVE:
    case MotionEvent.ACTION_UP:
        int x = (int)event.getX();
        int y = (int)event.getY();
        GridView grid = (GridView)v;
        int position = grid.pointToPosition(x, y);
        if(position != GridView.INVALID_POSITION) {
            v.getParent().requestDisallowInterceptTouchEvent(true); //Prevent parent from stealing the event
            View cellView = (View)grid.getItemAtPosition(position);
            switch (action){
            case MotionEvent.ACTION_DOWN:
                mSelecting = true;
                mPosition = position;
                cellView.setBackgroundColor(SELECTED_CELL_COLOR);
                break;
            case MotionEvent.ACTION_MOVE:
                if (mPosition != position) {
                    mPosition = position;
                    cellView.setBackgroundColor(SELECTED_CELL_COLOR);
                } else {
                    //Repeated cell, noop
                }
                break;
            case MotionEvent.ACTION_UP:
                mSelecting = false;
                mPosition = GridView.INVALID_POSITION;
                //Here you could call a listener, show a dialog or similar
                break;
            }
        }else{
            if(mSelecting){
                mSelecting = false;
            }
        }
    break;
    case MotionEvent.ACTION_CANCEL:
        mSelecting = false;
        break;
    }
    return true;
} 
```

# maven - Manifest.mf 找不到 org.junit

> ID：16032740
> 
> 赞同：2
> 
> 时间：2013-04-16T08:57:13.233
> 
> 标签：maven, junit, tycho

我正在尝试使用 Tycho 为 Eclipse RCP 应用程序运行 jUnit 测试。

为此，我创建了一个简单的 jUnit 测试，当我单击 Run as > jUnit-Test 时运行。但是当我想用 mvn test 运行它时，它找不到 jUnit。

我在 Internet 上读到我必须将 jUnit 添加到 Build-Path。-> 我已经这样做了。此外，我读到我必须在我的 Manifest.mf 文件中添加 jUnit 作为 require-bundle。但是问题来了！！我收到错误：无法解决捆绑“org.junit”。

我的 MANIFEST.MF 文件如下所示：

```
 Manifest-Version: 1.0
    Bundle-ManifestVersion: 2
    Bundle-Name: Tests
    Bundle-SymbolicName: myPackageName
    Bundle-Version: 1.0.0.qualifier
    Bundle-Vendor: myCompany
    Fragment-Host: thePackageWhereTestesPluginIs
    Bundle-RequiredExecutionEnvironment: JavaSE-1.6
    Require-Bundle: org.junit 
```

我的错误在哪里？当我服用 org.junit4 时，它也无法解决......

谢谢！

更新：

现在我使用而不是require-bundle：

```
 Import-package: org.junit4 
```

（或 org.junit，其行为相同）并且可以在 manifest.mf 文件中解决。但是当我运行它时，出现以下错误： [ERROR] -> [Help 1] org.apache.maven.InternalErrorException: Internal error: java.lang.RuntimeException: org.osgi.framework.BundleException: Bundle myTestBundle cannot be解决了解决错误：Bundle myTestBundle - Missing Constraint: Import-Package: org.junit4; 版本="0.0.0"

我该如何解决这个问题？

谢谢！！

我的测试包的 pom 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<project
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">    <modelVersion>4.0.0</modelVersion>
<parent>
        <artifactId>myProject.tycho.master</artifactId>
        <groupId>myProject</groupId>
        <version>0.0.1-SNAPSHOT</version>
        <relativePath>../myProject.tycho.master/pom.xml</relativePath>
    </parent>
    <groupId>myProject</groupId>
    <artifactId>myProject.myTestBundle</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <packaging>eclipse-test-plugin</packaging>

<dependencies>
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.8.1</version>
</dependency>
</dependencies>
</project> 
```

父pom：

```
 <project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<modelVersion>4.0.0</modelVersion>
<groupId>myProject</groupId>
<artifactId>myProject.tycho.master</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>pom</packaging>

<properties>
    <tycho.version>0.17.0</tycho.version>
</properties>

<modules>
    <module>../myProject.myTestBundle</module>

</modules>

<repositories>
    <!-- configure p2 repository to resolve against -->
    <repository>
        <id>Repository1</id>
        <layout>p2</layout>
        <url>url-to-a-p2-site-on-my-server</url>
    </repository>
</repositories>

<build>
    <plugins>
        <plugin>
            <groupId>org.eclipse.tycho</groupId>
            <artifactId>tycho-maven-plugin</artifactId>
            <version>${tycho.version}</version>
            <extensions>true</extensions>
        </plugin>
        <plugin>
            <groupId>org.eclipse.tycho</groupId>
            <artifactId>target-platform-configuration</artifactId>
            <version>${tycho.version}</version>
            <configuration>
                <resolver>p2</resolver>
                <pomDependencies>consider</pomDependencies>
                <target>
                    <artifact>
                        <groupId>myGroupId</groupId>
                        <artifactId>myGroupId.target</artifactId>
                        <classifier>targetPlatform</classifier>
                    </artifact>
                </target>
                <environments>
                    <environment>
                        <os>macosx</os>
                        <ws>cocoa</ws>
                        <arch>x86_64</arch>
                    </environment>
                    <environment>
                        <os>linux</os>
                        <ws>gtk</ws>
                        <arch>x86</arch>
                    </environment>
                    <environment>
                        <os>linux</os>
                        <ws>gtk</ws>
                        <arch>x86_64</arch>
                    </environment>
                    <environment>
                        <os>win32</os>
                        <ws>win32</ws>
                        <arch>x86</arch>
                    </environment>
                    <environment>
                        <os>win32</os>
                        <ws>win32</ws>
                        <arch>x86_64</arch>
                    </environment>
                </environments>
                <ignoreTychoRepositories>false</ignoreTychoRepositories>
            </configuration>
        </plugin>
    </plugins>
</build>
    </project> 
```

更新：我想我解决了这个问题！我将 jUnit 添加到我的 p2 更新站点，现在我没有收到任何错误！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:29:27.940

我通过将 jUnit 添加为 p2 更新站点来解决我的问题，并在 Manifest.mf 中将其用作：

```
Require-Bundle: org.junit; bundle-version = "4.11.0" 
```

# html - 仅锚标记垂直滚动，禁用水平滚动

> ID：16032744
> 
> 赞同：0
> 
> 时间：2013-04-16T08:57:48.977
> 
> 标签：html, anchor

我有一个页面，左侧有一个菜单，其中包含右侧元素的锚点。单击左侧锚点时，我希望它仅垂直滚动（而不是水平滚动），以便无论如何左侧菜单都保留在屏幕上。基本上，我想要一个仅垂直的锚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:05:50.080

要么像这样使用 jquery：

```
$('a[href^="#"]').on('click', function(event) {
 target = this.id.offset().top;
 $('html,body').animate({
   scrollTop: target
  }, 1000);
event.preventDefault();
} 
```

“点击页面内的任何链接，获取页面顶部的偏移量，并在 1 秒内将滚动动画向下滚动到该位置。”

或使用此插件[http://flesler.blogspot.com/2007/10/jqueryscrollto.html](http://flesler.blogspot.com/2007/10/jqueryscrollto.html)进行更多控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-21T10:06:57.690

一个插入式解决方案，香草 JS：

```
const scrolledParentSelector = ".app-content"; // or e.g. body
const scrolled = document.querySelector(scrolledParentSelector);

const anchors = document.querySelectorAll("a[href^='#']"); // hash tag anchor href starts with '#'
anchors.forEach(a => {
  a.onclick = function(e) {
    e.preventDefault();
    const href = a.getAttribute("href").slice(1); // remove initial '#'
    const target = document.querySelector(`[id='${href}']`);
    const top = target.offsetTop;
    scrolled.scrollTop = top;
  };
}); 
```

# java - 网站使用 facebooklogin 插件并将用户凭据存储到数据库 JAVA 或 Javascript 到我的表单文本框中

> ID：16032745
> 
> 赞同：1
> 
> 时间：2013-04-16T08:57:49.797
> 
> 标签：java, javascript, facebook

我正在使用 Facebook 登录按钮在我的网站中与 facebook 集成。但是，我不知道如何在通过 facebook 登录时将用户名等（facebook 上的用户数据）从 facebook 保存到我的数据库中。如何做到这一点？

目前，当点击facebook登录按钮时，会打开一个窗口，我们可以输入facebook用户名和密码，它就会被连接。

如何在登录时进入 JAVA 或 JAVASCRIPT 部分以在 facebook 上存储用户数据，如果已经存在登录到站点而不存储任何数据？

我还想将数据存储到我的用户个人数据库中？可以在 Servlet 上完成吗？

我什至现在制作表格我想提取用户的信息并将其显示在我创建的文本框中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:27:02.503

**如果您想为 twitter 和linkedin 执行此操作，最终不仅要查看 facebook，您应该记住，您永远不会获得用户的 facebook/twitter/linkedin 密码。**

现在谈到你的观点，特别是对于 facebook，你应该了解`Graph Api`和是什么`permissions`？

好消息是，facebook 会向您返回一些用户数据**（根据您要求的权限）**，`json`您可以解析并保存到您的数据库中。`servlet`因此，您可以在您的或`java`代码中解析此 json 响应。

> 但我强烈建议您做一些 google 和 checkout facebook 登录和图形 API 集成教程，因此您将能够在您的特定前端实现相同的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:21:43.487

如果您使用的是 PHP，您可以使用这个[Facebook 登录教程](http://net.tutsplus.com/tutorials/php/how-to-authenticate-your-users-with-facebook-connect/)

或者你也可以使用这个[Facebook 登录 Tuts 2](http://onlinewebapplication.com/login-facebook-twitter-php/)

# android - 像微信一样的Android Dialog

> ID：16032752
> 
> 赞同：0
> 
> 时间：2013-04-16T08:58:05.347
> 
> 标签：android, customdialog

![在此处输入图像描述](https://i.stack.imgur.com/NOLss.jpg)

有谁知道如何创建一个如上图所示的对话框？

1.  圆角。
2.  透明背景。
3.  没有标题、按钮、边框。
4.  淡入——延迟5秒——淡出。

*我见过toast、弹出窗口、对话框、警告对话框，这些最适合上面的哪一个？:)

* * *

如果可以提供一些代码片段会很好，我对 android 很陌生 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:09:27.937

这根本不是问题。只需创建具有延迟和淡入淡出的第 9 个可绘制补丁，并将其作为对话框的背景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:32:14.750

对于自定义对话框检查[http://www.c-sharpcorner.com/UploadFile/2fd686/androd-dialogs/](http://www.c-sharpcorner.com/UploadFile/2fd686/androd-dialogs/)

```
 private void createCustomDialog(){
        //Create a dialog object
        final Dialog dialog = new Dialog(MainActivity.this);
        //Set its layout
        dialog.setContentView(R.layout.custom_dialog_layout);
        //Set the title
        dialog.setTitle("This is custom layout");
        //Make it cancelable
        dialog.setCancelable(true);
        //We need to dismiss the dialog so we add a listener to the ok button
        dialog.findViewById(R.id.okButton).setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                dialog.dismiss();
            }
        });

        dialog.show();
    }
} 
```

对于深色 alpha 背景，您可以创建一个可绘制对象。下面的代码将为您提供带圆角的半透明背景。

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android"  >
      <item>
           <shape android:shape="rectangle">
                <gradient
                    android:startColor="#AA000000"
                    android:endColor="#AA000000"
                    android:angle="-90"
                    android:type="linear"
                    />
                <corners android:radius="10dp" />
            </shape>
        </item>
</layer-list> 
```

对于自动隐藏部分，您可以使用

```
Animation anim = new AlphaAnimation(1,0);
anim.setDuration(300);
anim.setStartOffset(5000);
anim.setInterpolator(new LinearInterpolator());
anim.setFillAfter(false);

myView.startAnimation(anim); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T09:32:47.790

尝试这个

使用您想要的内容创建 XML，然后将透明图像设置为

我正在为您提供图片，请使用此图片

和

声明 PopupWindow 类型的字段。PopupWindow 弹出窗口；

在这里夸大你的布局

```
 View v = inflatter.inflate(R.layout.yourlayout, null); 
```

将布局设置为弹出窗口

```
v1.measure(View.MeasureSpec.UNSPECIFIED, View.MeasureSpec.UNSPECIFIED);
int height1 = v1.getMeasuredHeight();
popup= new PopupWindow(v, (int) (width * 0.8), height1, true);
 popup.showAtLocation(mainlayout, Gravity.CENTER, 0, 0); 
```

`mainlayout`是您的活动视图组

这是我在我的应用程序中使用的一段代码。

![透明背景](https://i.stack.imgur.com/Y6sc8.png)

示例我在我的应用程序中使用了类似的东西

![弹出示例](https://i.stack.imgur.com/N2CGy.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T09:36:36.007

自定义 Toast 将为您做所有事情，只需准备您的 xml 并将其设置为 Toast，这是一个示例：

```
public class CustomToast {

public CustomToast(Context ctx, CharSequence text) {

    LayoutInflater inflater = LayoutInflater.from(ctx);
    View layout = inflater.inflate(R.layout.toast_layout, null);

    TextView txt = (TextView) layout.findViewById(R.id.toastText);
    txt.setText(text);

    Toast myToast = new Toast(ctx.getApplicationContext());
    myToast.setGravity(Gravity.CENTER_VERTICAL, 0, 100);
    myToast.setDuration(Toast.LENGTH_SHORT);
    myToast.setView(layout);
    myToast.show();
    }

} 
```

# svn - Maven - 提取自修订以来修改的资源（加上二进制文件）

> ID：16032757
> 
> 赞同：2
> 
> 时间：2013-04-16T08:58:21.613
> 
> 标签：svn, maven, maven-plugin, java-ee-5

我们有一个使用 Ant 构建的 Java EE 5 项目，我们正在将其移植到 Maven 构建基础架构。

我们使用 SVN 作为版本控制和 Jenkins 构建服务器。

奇怪的是，一些“补丁”交付仅包括自上一个主要版本以来修改的源和二进制文件，这些称为“补丁增量”。然后将此增量应用于主要版本的二进制文件。

我们实现这一点的方法是记录主要版本的最后一个修订，运行自该修订以来的 svn log 以获取修改源列表，然后使用与源名称（svn log 输出）匹配的自定义脚本与其对应二进制文件，然后将其复制到“增量结构”中。

在将自定义脚本调整为新的 Maven 项目结构之前，我想知道是否有 Maven 方法来完成这一切？

此外，非常感谢生成这种“三角结构”的其他想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:35:53.280

您的要求是独一无二的，我怀疑任何现有的插件都能满足它。

您可以开发自己的 Maven 插件来执行此操作。或者，如果您准备好与 Ant 一起使用的东西，您可以使用[Maven ANT 插件](http://maven.apache.org/plugins/maven-antrun-plugin/)，尽管这将被视为滥用 Maven，因为您实际上是在使用 ANT 构建并且可以完全跳过 Maven。我没有看到任何更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T21:39:21.017

一旦我在相同的情况下参与了这样的 Maven 插件的开发——从 Ant 迁移到 Maven，delta 构建。

我认为开源中不存在此类插件的原因之一（除了与 Maven 哲学冲突）是补丁（delta）的组装规则对每种具体情况都高度特定。例如，我们的补丁结构由十几个子目录组成，所有子目录都有不同的包含在补丁中的规则，也受到合并的影响。

但是，在我看来，我们决定编写 Maven 插件而不是支持旧的 Ant 脚本是正确的。Ant 代码的测试和支持非常昂贵，与 Maven 的集成增加了更多的复杂性。另一方面，用纯 Java 编写的 Maven 插件并带有单元测试和集成测试并不难，因此可以轻松捕获回归。

因此，如果您打算保持进行增量构建的要求，我建议您花时间编写自定义 Maven 插件。

我们使用[SVNKit](http://www.svnkit.com/)库与 SVN 集成以简化开发（无需解析 的文本输出`svn log`）并使我们的插件环境独立（无需`svn`在 PATH 中包含二进制文件）。

# c# - SharpPcap SendQueue 由于转换失败而失败

> ID：16032763
> 
> 赞同：0
> 
> 时间：2013-04-16T08:58:37.937
> 
> 标签：c#

我尝试使用 SharpPcap 并使用 SharpPcap 中的示例从 pcap 文件（libpcap）发送数据包：

[http://sourceforge.net/p/sharppcap/code/ci/SharpPcap_4_1_0/tree/Examples/Example10.SendQueue/Example10.SendQueues.cs](http://sourceforge.net/p/sharppcap/code/ci/SharpPcap_4_1_0/tree/Examples/Example10.SendQueue/Example10.SendQueues.cs)

现在我的问题在第 124 行：`var winPcapDevice = device as WinPcapDevice;`

这`device`是我的网卡适配器，在选择此设备后它设置为空，但在命令之后`var winPcapDevice = device as WinPcapDevice;`变量`winPcapDevice`为空可能是因为类型不是预期的，因此 SendQueue 无法传输。这个例子取自项目页面，也许熟悉这个项目的人可以告诉我如何解决它？

# visual-c++ - MFC 中的日期验证

> ID：16032764
> 
> 赞同：0
> 
> 时间：2013-04-16T08:58:38.103
> 
> 标签：visual-c++, mfc

我有两个用于 FROM 和 TO 日期的日期时间选择器控件。我想将 TO 日期开始日期限制为 FROM 日期。

示例：如果 FROM 日期是 2013 年 4 月 12 日，则 TO 日期选择器应允许用户仅选择从 2013 年 4 月 12 日到当前日期的日期。

DoDataExchange() 方法中的代码如下。

```
 DDX_Text(pDX, IDC_DATETIME_FILTER_FROM, m_daysStartDateVal);
 DDV_MinMaxDateTime(pDX, m_daysStartDateVal,&StartDate,&COleDateTime::GetCurrentTime());
 DDX_Text(pDX, IDC_DATETIME_FILTER_TO, m_daysEndDateVal);
 DDV_MinMaxDateTime(pDX,m_daysEndDateVal,&m_daysStartDateVal.GetTickCount(),&COleDateTime::GeCurrentTime()); 
```

每当我更改 FROM 日期时，它都不会反映 TO 日期选择器中的可能日期。

如何将其限制为 FROM 日期的开始日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:16:11.830

对话框数据验证不是这样工作的。您只能指定一个（静态）范围，并且例程会验证您的值是否在该预定义范围内。但是，您可以使用自己的验证例程扩展此机制。

下面的示例函数采用两个变量和一个范围，并确保

```
void AFXAPI DDV_MinMaxDates(
   CDataExchange* pDX,
   COleDateTime& fromValue, COleDateTime& toValue,
   const COleDateTime* refMinRange, const COleDateTime* refMaxRange)
{
  if(fromValue > toValue ||
     fromValue < refMinRange || fromValue > refMaxRange ||
     toValue < refMinRange || toValue > refMaxRange)
  {
     AfxMessageBox(_T("Incorrect interval!"));
     pDX->Fail();
  }
} 
```

你可以像这样使用它：

```
DDV_MinMaxDates(pDX, m_daysStartDateVal, m_daysEndDateVal, &StartDate,&COleDateTime::GetCurrentTime()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:07:56.687

如果您希望`CDateTimeCtrl`控件根据两个控件中的当前输入动态更改允许的范围，那么您可以使用`CDateTimeCtrl::SetRange`. 要在`SetRange`每次控件之一更改时调用，您应该处理`DTN_DATETIMECHANGE`发送给父级的通知。

# javascript - Jquery .ajax 没有按预期工作

> ID：16032768
> 
> 赞同：2
> 
> 时间：2013-04-16T08:58:50.440
> 
> 标签：javascript, jquery

我有以下代码可以在单独的 functions.js 文件中调用 json Web 服务。

```
function getMajorGroups(){

var element = $(".item-group-button");

$.ajax({
    type:"GET",
    url:"localhost:6458/posApplication/getAllMajorGroups",
    data:"{}",
    contentType:"application/json; charset=utf-8",
    dataType:"json",
    done:successResult(majorGroups),
    fail:errorResult(error)
});
}

function successResult(majorGroups){
    var mGroups = response.d;
    $("#item-groups").empty();

    $.each(majorGroups ,function(){
        var h3 = $('h3').append(majorGroups.code);
        element.append(h3);
        $("#item-groups").prepend(element);
    });
}

function errorResult(error){
    alert("error");
} 
```

当我运行网页并使用 firebug 跟踪步骤时，我可以看到脚本已执行。但它不会在 ajax 调用中执行成功或失败代码。我在这里做错什么了吗？

下面是服务返回的字符串示例。

{"majorGroups":[{"update":"false","hasMore":"false","status":"A","description":"Beverage","majorGroupId":"48","code" :"Beverage"},{"update":"false","hasMore":"false","status":"A","description":"Laundry","majorGroupId":"51","code" :"洗衣店"},{"update":"false","hasMore":"false","status":"A","description":"Cigarette","majorGroupId":"50","code" :"Cigarette"},{"update":"false","hasMore":"false","status":"A","description":"Food","majorGroupId":"47","code":"Food"},{"update":"false","hasMore":"false","status":"A","description": "健康中心","majorGroupId":"52","code":"健康中心"}],"failure":"false"}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:12:56.397

`$.ajax`没有名为 的属性`failoure`。`error`应该使用所以它看起来像`error: errorResult`

除了检查请求是通过 Chrome 开发工具或一些类似工具中的网络选项卡发出的。检查原始响应中的内容并确保这是您想要的。如果请求失败，您将看到方法或至少有错误代码。

如果到目前为止一切都很好，那么请确保在 DOM 准备好时添加 DOM 元素，所以用`$(function(){ /* your stuff here */ })`

编辑：

这不是方法`done`，`fail`应该使用。jQuery ajax 调用返回承诺。

```
$.ajax({
  url : "..."
  /* omitted */
}).done(successCallback).fail(failCallback) 
```

其中 successCallback 可以是函数名称，如您定义的 succes 函数，也可以是匿名函数，如

```
.done(function(response){
  // do stuff with response
} 
```

我认为你应该仔细阅读 jQuery 文档。

你的`$.each`电话也有点坏了——你跳过了提供给的函数中的参数`$.each`

# php - 在获得应用程序权限后在某人的页面上发布（如果已获得）

> ID：16032775
> 
> 赞同：1
> 
> 时间：2013-04-16T08:59:21.360
> 
> 标签：php, facebook, post, sdk, token

嗨，我正在寻找一种在用户授权后在多个 Facebook 页面上发布的方法。我希望能够以应用程序的名义在具有用户（页面管理员）授权的页面列表（没有管理员权限）上发布。

我已经设置了 php facebook SDK，并且能够为我自己的页面获取长寿令牌并将它们作为页面发布。

有人可以帮助我吗，因为自从删除`offline_access`许可后我不知道该怎么做？

# xcode - 替换 UITextField 占位符

> ID：16032776
> 
> 赞同：1
> 
> 时间：2013-04-16T08:59:38.367
> 
> 标签：xcode, uitextfield, storyboard, placeholder

我有一个 'IBOutlet UITextField* textField' 与 .xib 文件中的 UITextField 连接。我将此元素用作连接到情节提要中的 VC 的视图控制器类中的组合框。我的问题是如何修改占位符文本？我已经尝试了以下 3 种方法，但没有任何效果！！

```
-(void) setPlaceholder:(NSString *)label
{
    textField.placeholder = label;
    [textField setPlaceholder:label];
    [textField cell ]setPlaceholderString:label];
} 
```

谢谢你的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:55:18.427

只要你的 textField 已经合成，你应该可以使用： `textField.placeholder = label`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:44:40.427

把它放在你的 viewcontroller 方法的 viewdidload 方法中，因为当我调用我的 setPlaceholder 方法时，占位符字段没有初始化

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:18:52.487

`textField.placeholder = @"placeholder"`应该工作，检查是否`label`并`textField`实际指向各自的对象。

# r - 如何在维度未知时设置矩阵的唯一行名和列名？

> ID：16032778
> 
> 赞同：20
> 
> 时间：2013-04-16T08:59:45.943
> 
> 标签：r, matrix, rename

我有像这样的矩阵：

```
 [,1][,2][,3][,4]
[1,]  12  32  43  55
[2,]  54  54  7   8
[3,]  2   56  76  88
[4,]  58  99  93  34 
```

我事先不知道矩阵中有多少行和列。因此，我需要动态创建行名和列名。

我可以直接命名列（行），例如：

```
colnames(rmatrix) <- c("a", "b", "c", "d") 
```

但是，如何动态创建名称向量以适应矩阵的尺寸？

```
nm <- ("a", "b", "c", "d")
colnames(rmatrix) <- nm 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-16T09:11:01.817

您可以使用`rownames`and`colnames`和设置`do.NULL=FALSE`来动态创建名称，如下所示：

```
set.seed(1)
rmatrix  <-  matrix(sample(0:100, 16), ncol=4)

dimnames(rmatrix) <- list(rownames(rmatrix, do.NULL = FALSE, prefix = "row"),
                          colnames(rmatrix, do.NULL = FALSE, prefix = "col"))

rmatrix
     col1 col2 col3 col4
row1   26   19   58   61
row2   37   86    5   33
row3   56   97   18   66
row4   89   62   15   42 
```

您可以根据需要更改`prefix`命名行/列。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-16T09:08:45.153

要动态命名列（或行），您可以尝试

```
colnames(rmatrix) <- letters[1:ncol(rmatrix)] 
```

where`letters`可以替换为您选择的列名向量。你可以对行做类似的事情。  

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-06-10T22:38:46.180

您可以使用`provideDimnames`. 具有不同程度定制的一些示例：

```
m <- matrix(1:12, ncol = 3)

provideDimnames(m)
#   A B  C
# A 1 5  9
# B 2 6 10
# C 3 7 11
# D 4 8 12

provideDimnames(m, base = list(letters, LETTERS))
#   A B  C
# a 1 5  9
# b 2 6 10
# c 3 7 11
# d 4 8 12

provideDimnames(m, base = list(paste0("row_", letters), paste0("col_", letters)))
#       col_a col_b col_c
# row_a     1     5     9
# row_b     2     6    10
# row_c     3     7    11
# row_d     4     8    12 
```

# java - Hibernate Session 在存储过程中的数据

> ID：16032779
> 
> 赞同：1
> 
> 时间：2013-04-16T09:00:09.023
> 
> 标签：java, hibernate, jpa

我有一个简单的问题。是否有能力从存储过程中的休眠会话中获取数据？看起来像：

```
@Transactional
public void doAction() {
    Product pr = new Product("Apple");
    hibernateTemplate.save(product);
    executeStoredProcedure();
    hibernateTemplate.save(new Product("foobar"));
} 
```

executeStoredProcedure - 方法通过 JDBC 执行存储过程。此存储过程必须有权访问已创建的产品 (Apple)。

此外，使用 db 的所有操作都应在一个事务中执行。

我怎样才能实现类似的东西？

使用 Oracle DB (PLSQL)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:07:16.953

Try calling [`flush()`](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/orm/hibernate3/HibernateTemplate.html#flush%28%29) before invoking the stored procedure in order to have the new product synced to the database.

Quote from the javadoc of flush():

> Only invoke this for selective eager flushing, for example when JDBC code needs to see certain changes within the same transaction.

...which is exactly what you need, I think.

# razor - 更新 和

> ID：16032781
> 
> 赞同：1
> 
> 时间：2013-04-16T09:00:10.067
> 
> 标签：razor, asynchronous, updatepanel, master-pages, umbraco

我正在尝试使用 . 我正在做的是使用 ajax 请求具有特定信息的 web 服务，获得答案，并希望使用从 ajax 请求到 web 服务的更新答案更新 razorscript 中呈现的 HTML。在 javascript 中，我尝试部分回发更新面板的异步更新。

我有以下代码

母版页：

```
<asp:ScriptManager runat="server" ID="ScriptManager"/>
<asp:UpdatePanel runat="server" ID="UpdatePanel1">
    <ContentTemplate>
        <umbraco:Macro Alias="Macro1" runat="server"></umbraco:Macro>
    </ContentTemplate>
</asp:UpdatePanel> 
```

Javascript：

```
$__doPostBack('UpdatePanel1', ''); 
```

首先，真的可以管理这个吗？我可以从 javascript 访问 UpdatePanel 吗？其次，这是最好的方法吗？如果没有，我怎样才能更有效地做到这一点。

编辑：

Ajax 请求的代码：

```
$.ajax({
    type: "POST",
    cache: false,
    url: "/Handlers/Handler.ashx",
    data: jsonData,
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function () {

       //Here i want to update the UpdatePanel, if possible
       },

       error: function () {

        }
    }); 
```

问候大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:00:59.310

通过在每次 web 服务请求后重新加载页面来临时解决它。仍然想知道是否有可能通过将宏放入 UpdatePanel 并调用它来更新宏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:35:26.790

如果您已经在使用 Web 服务，则在 ajax 请求的回调中直接使用 javascript 更新 HTML。[jQuery](http://jquery.com/)在这方面做得很好，但根据复杂性，您可能希望使用提供一些模板的框架，例如[Knockout](http://knockoutjs.com/)、[Handlebars.js](http://handlebarsjs.com/)或[mustache](http://mustache.github.io/)或[Ember.js](http://emberjs.com/)。

更新面板很方便，但我认为不可能以您在此处尝试的方式使用它们。ASP.Net 控件和剃须刀不能很好地混合。

# android - 无法查看 textview 中的所有文本

> ID：16032788
> 
> 赞同：1
> 
> 时间：2013-04-16T09:00:45.297
> 
> 标签：android

在表格行中，我有 2 个文本视图。但是当我试图显示文本并且如果文本长度很长我无法看到所有的字符串。仅部分可见

```
 <TableRow
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >

                <TextView
                    android:id="@+id/Add"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="@string/restaurant_address"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/Restaurant_add"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:ellipsize="end"
                    android:maxLines="2"
                    android:singleLine="false" />
            </LinearLayout>
        </TableRow> 
```

我没有得到什么错误..我能知道我在做什么错误吗？

我也将单行设置为 false 并将椭圆大小设置为结束。但我仍然面临同样的问题。

谢谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:04:24.380

您可以将 LinearLayout 放在 ScrollView 中，如果 Text 太长，您可以向下滚动，您会看到整个 String 。. .

```
<TableRow
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

          <ScrollView>  

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >

                <TextView
                    android:id="@+id/Add"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="@string/restaurant_address"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/Restaurant_add"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:ellipsize="end"
                    android:maxLines="2"
                    android:singleLine="false" />
            </LinearLayout>
           </ScrollView>
        </TableRow> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:04:09.557

这条线是因为什么： android:maxLines="2"

去掉它就可以了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:08:32.973

请使用 Linearlayout 代替 tablerow。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T09:25:16.573

您可以选择多种解决方案...

- 将您的文本视图设置为多行，如下所示

```
yourtextview.setSingleLine(false); 
```

- 这不是最佳的，但你也可以减少你的文本视图的文本大小......

希望这可以帮助...

# c++ - 如何从 C++ 获取 Windows 上的驱动程序版本

> ID：16032789
> 
> 赞同：5
> 
> 时间：2013-04-16T09:00:50.710
> 
> 标签：c++, windows, driver

我正在寻找一种编程方式来获取驱动程序的版本号。我想要设备管理器在设备的驱动程序属性中显示的相同编号。

背景：我有一个与一些自定义硬件对话的应用程序。自定义硬件的设备驱动程序在某个版本号之前存在已知错误。我希望应用程序检查驱动程序版本并警告用户是否需要更新它。该应用程序在 Windows XP 和 7 上运行，并使用 C++ 编写。

我之前使用的一个技巧是直接从 system32/drivers 读取 .sys 文件并直接搜索“FileVersion”。这很糟糕，原因有很多。特别是它似乎需要 Windows 7 上的管理员权限。

我知道类 GUID 和硬件 ID（即“USB\VID_1234&PID_5678”）。

应用程序当前使用 SetupDiGetClassDevs、SetupDiEnumDeviceInterfaces 和 SetupDiGetDeviceInterfaceDetail 来获取“DevicePath”。然后它使用该路径调用 CreateFile 以与驱动程序对话。

看起来我需要从某个地方获取一个 SP_DRVINFO_DATA 结构。我尝试了 setupapi.h 中的各种函数，例如 SetupDiGetDeviceInterfaceDetail。这是我尝试过的一些失败的代码：

```
int main(void)
{
    HDEVINFO DeviceInfoSet = SetupDiGetClassDevs((LPGUID)&GUID_DEVINTERFACE_USBSPI, NULL, NULL,
        DIGCF_PRESENT | DIGCF_DEVICEINTERFACE);

    SP_INTERFACE_DEVICE_DATA InterfaceDeviceData;
    InterfaceDeviceData.cbSize = sizeof(SP_INTERFACE_DEVICE_DATA);

    // Cycle through all devices.
    for (int i = 0; i < 32; i++)
    {
        if (!SetupDiEnumDeviceInterfaces(DeviceInfoSet, 0, (LPGUID)&GUID_DEVINTERFACE_USBSPI, i, &InterfaceDeviceData))
            break;

        PSP_DEVICE_INTERFACE_DETAIL_DATA DeviceInterfaceDetailData;
        DWORD RequiredSize;

        SetupDiGetDeviceInterfaceDetail(DeviceInfoSet, &InterfaceDeviceData, NULL, 0, &RequiredSize, NULL);
        DeviceInterfaceDetailData = (PSP_DEVICE_INTERFACE_DETAIL_DATA)HeapAlloc(GetProcessHeap(), HEAP_GENERATE_EXCEPTIONS | HEAP_ZERO_MEMORY, RequiredSize); 
        try
        {
            DeviceInterfaceDetailData->cbSize = sizeof(SP_DEVICE_INTERFACE_DETAIL_DATA);
            SetupDiGetDeviceInterfaceDetail(DeviceInfoSet, &InterfaceDeviceData, DeviceInterfaceDetailData, RequiredSize, NULL, NULL);

            // Try to get the driver info. This part always fails with code 
            // 259 (ERROR_NO_MORE_ITEMS).
            SP_DRVINFO_DATA drvInfo;
            drvInfo.cbSize = sizeof(SP_DRVINFO_DATA);
            if (!SetupDiEnumDriverInfo(DeviceInfoSet, NULL, SPDIT_CLASSDRIVER, i, &drvInfo))
                printf("error = %d\n", GetLastError());

            printf("Driver version is %08x %08x\n", drvInfo.DriverVersion >> 32, drvInfo.DriverVersion & 0xffffffff);
        }
        catch(...)
        {
            HeapFree(GetProcessHeap(), 0, DeviceInterfaceDetailData);
            throw;
        }
        HeapFree(GetProcessHeap(), 0, DeviceInterfaceDetailData);
    }

    SetupDiDestroyDeviceInfoList(DeviceInfoSet);

    return 0;
} 
```

* * *

**编辑**- 我更新的代码现在看起来像这样：

```
HDEVINFO devInfoSet = SetupDiGetClassDevs(&GUID_DEVINTERFACE_USBSPI, NULL, NULL,
                                          DIGCF_PRESENT | DIGCF_DEVICEINTERFACE);

// Cycle through all devices.
for (int i = 0; ; i++)
{
    // Get the device info for this device
    SP_DEVINFO_DATA devInfo;
    devInfo.cbSize = sizeof(SP_DEVINFO_DATA);
    if (!SetupDiEnumDeviceInfo(devInfoSet, i, &devInfo))
        break;

    // Get the first info item for this driver
    SP_DRVINFO_DATA drvInfo;
    drvInfo.cbSize = sizeof(SP_DRVINFO_DATA);
    if (!SetupDiEnumDriverInfo(devInfoSet, &devInfo, SPDIT_COMPATDRIVER, 0, &drvInfo))
        printf("err - %d\n", GetLastError()); // Still fails with "no more items"
}

SetupDiDestroyDeviceInfoList(devInfoSet); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T11:49:51.570

您错误地`i`在`SetupDiEnumDriverInfo`. 这应该是每个驱动程序的每个驱动程序信息元素的内部循环。因此，您无法检索设备 #1 的驱动程序信息 #0。

尽管如此，这并不能解释为什么设备#0 的信息#0 失败。为此，您必须查看`SetupDiEnumDriverInfo`. 这是`SP_DEVINFO_DATA`您设备的结构，但您将其设置为`NULL`. 这将为您提供与设备类关联的驱动程序列表，而不是设备。即适用于具有类驱动程序的鼠标和 USB 记忆棒。您的设备可能具有特定于供应商的驱动程序，因此您需要该特定设备的驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-07T21:17:18.870

当您问了一个几乎相同的问题时，我只在此处发布了我的答案的链接：

[为什么 SetupDiEnumDriverInfo 为我的驱动程序提供两个版本号](https://stackoverflow.com/questions/16063402/why-does-setupdienumdriverinfo-give-two-version-numbers-for-my-driver?answertab=active#tab-top)

# javascript - 多个存储元素 .css()

> ID：16032792
> 
> 赞同：3
> 
> 时间：2013-04-16T09:00:59.960
> 
> 标签：javascript, jquery

我有这个 jQuery 代码：

```
nextimg = $('.index-slide-container img#' + next);
nextcaption = $('.index-slide-container .index-slide').filter('#'+next);

nextimg.css({
    'left':'100%',
    'z-index':'99'
});
nextcaption.css({
    'left':'100%',
    'z-index':'99'
}); 
```

我想知道您是否可以以某种方式将两个 .css 函数组合/链接为一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:02:42.347

您可以使用 jQuery[`add()`](http://api.jquery.com/add/)函数：

```
nextimg.add(nextcaption).css({
    'left':'100%',
    'z-index':'99'
}); 
```

# spring - 在 Spring MVC 应用程序中记录的最佳实践是什么

> ID：16032793
> 
> 赞同：0
> 
> 时间：2013-04-16T09:01:07.697
> 
> 标签：spring

我一直在尝试找出使用***Spring MVC*登录我的应用程序的最佳实践。**如果可以，请帮助我理解并找出最佳实践。

现在我看到在我的应用程序中实现日志记录的两种选择：

1.  Log4J 日志记录（传统方法非 AOP 特定）

2.  基于 AOP 的日志记录

我真的很感激答案，让我了解选择哪种方法以及每种选择的好处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:07:15.643

Log4J provides good flexibility by providing log4j.properties where you can configure what level of logging you are intersted in. I would recommend using the Log4J logging.

[Here](https://stackoverflow.com/questions/1978358/usage-of-log4j-levels) is a good reference point elaborating the Log4J logging levels.

# c# - 有什么方法可以隐藏正在运行的第 3 部分应用程序的窗口框架？

> ID：16032794
> 
> 赞同：1
> 
> 时间：2013-04-16T09:01:13.523
> 
> 标签：c#, windows, winapi

我有不是我的 exe 应用程序。应用程序有窗口，窗口内显示图片和其他数据内容。我想让应用程序全屏显示，或者至少隐藏应用程序的框架，或者（如果可能的话）将应用程序的内容包装到我自己的全屏表单中。

是否可以： * 使第 3 部分应用程序全屏 * 隐藏应用程序的窗口框架 * 将应用程序嵌入到我的 onf winform 应用程序中

# php - Google Maps API 区域搜索

> ID：16032795
> 
> 赞同：0
> 
> 时间：2013-04-16T09:01:21.733
> 
> 标签：php, google-maps

我有一组地址/坐标。在我的软件中，用户应该能够搜索特定地址或坐标，并在特定半径内找到坐标集的周围位置。结果应显示在地图上。（就像 Google Places for Restaurants 一样，只有我自己的一组地点）在静态地图上显示地点不是问题，而是处理一组地址（~5000）并计算到搜索地点的距离。

如何使用 Google 的 API 建立这样的功能？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:37:12.743

您可以使用 harvesine 公式和边界框。或者您可以使用空间索引和边界框。Harvesine 公式用于球体。您很可能使用直线距离（如乌鸦苍蝇）。

# java - Java 32 位系统 int[] 数组的内存大小

> ID：16032797
> 
> 赞同：2
> 
> 时间：2013-04-16T09:01:26.887
> 
> 标签：java, arrays, memory-management, int

在 Java 中，在 32 位操作系统上，我存储`5736 int[]`包含`54759118`整数的数组。如果每个`int`原语都占用`4`字节，那么我将得到 minimum `54759118 * 4 = 219036472 bytes ~ 220 megabytes`。由于我有`5736`对`int[]`对象的引用，存储这些引用的开销是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:03:31.940

Java 中的每个`32-bit`指针分配约 4 个字节。因此，它将是`5736 * 4 = 22944 bytes`

# java - 连接到 Android 上的 WCF WebService / 415 错误

> ID：16032799
> 
> 赞同：0
> 
> 时间：2013-04-16T09:01:39.277
> 
> 标签：java, android, web-services

我想在 Android 项目上连接到我的 WCF WebService。我按照教程

[http://javatutorialspoint.blogspot.com/2012/02/android-web-service-access-using-ksoap2.html](http://javatutorialspoint.blogspot.com/2012/02/android-web-service-access-using-ksoap2.html)

但我收到 415 错误。也许还有其他简单的连接方式？或者我应该修复什么？

> 04-16 10:57:10.675: E/WS(4858): java.io.IOException: HTTP 请求失败，HTTP 状态：415

这是我的网络服务的网址（它是本地的）[http://hq.fs.com.pl:8090/fs/Integrator](http://hq.fs.com.pl:8090/fs/Integrator)

# 活动

```
package com.example.fs;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.util.Log;
import android.widget.TextView;
import android.app.Activity;
import android.os.Bundle;

public class AndroidWSClientActivity extends Activity {

    //private static final String SOAP_ACTION = "http://ws.android.com/sayHello";
    //private static final String METHOD_NAME = "sayHello";
    //private static final String NAMESPACE = "http://ws.android.com/";
    //private static final String URL = "http://175.157.229.119:8080/AndroidWSTest/services/PrintMsg?wsdl";

    // WS
    private static final String SOAP_ACTION = "http://tempuri.org/IntegratorMethods/GetAddonsTypes";
    private static final String METHOD_NAME = "GetAddonsTypes";
    private static final String NAMESPACE = "http://tempuri.org/";
    private static final String URL = "http://hq.fs.com:8090/fs/Integrator?wsdl";

    TextView textView;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_wsclient_page);

    textView = (TextView) findViewById(R.id.textView2);

    Thread networkThread = new Thread() {
        @Override
        public void run() {
          try {
             SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);         
             SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
             envelope.setOutputSoapObject(request);

             HttpTransportSE ht = new HttpTransportSE(URL);
             ht.call(SOAP_ACTION, envelope);
             final  SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
             final String str = response.toString();

             runOnUiThread (new Runnable(){ 
         public void run() {
             textView.setText(str);
               }
           });
          }
         catch (Exception e) {
            Log.e("WS", e.toString());
         }
        }
      };
      networkThread.start();
      }
} 
```

# 更新

我用 chrome://soaclient/content/webservices.xul 检查了我与 WebService 的连接，一切看起来都很好。我有操作：GetAddonsTypes 和状态：200 OK。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-30T05:47:44.253

我是一名中国开发人员，所以我的英语很差。我遇到了同样的问题，通过将 SoapEnvelope.VER12 更改为 SoapEnvelope.VER10 解决了这个问题。问题解决了，但是不知道为什么。我的 wsdl 文件是 xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" 所以版本应该是 12，而不是 10。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-31T21:05:54.797

我有同样的问题，通过在 WCF 服务的端点配置上将 WsHttpBinding 更改为 basicHttpBinding 来解决它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:12:10.267

这可能会帮助你点`Request`赞

```
private static final String URL =
"http://give Here Server Ipaddress/AndroidWSTest/services/PrintMsg?wsl"; 
```

意味着提供当前更新`ipaddress` 也确保您的通过

```
(NAMESPACE, METHOD_NAME) 
```

是正确的并且匹配`webServie` `Method name`并且`Namespace`还检查`Intenet Conncetion`和`webservice`工作正常`Server`的一面或不是

# struts2 - 运行简单的 struts 2 应用程序时出现以下错误-

> ID：16032803
> 
> 赞同：-1
> 
> 时间：2013-04-16T09:01:48.363
> 
> 标签：struts2

无法加载配置。- 行动 -

> 文件：/D:/DATA/STUDY/anup/Struts2Workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp1/wtpwebapps/FirstStrutsApplication/WEB-INF/classes/struts.xml:6:55 at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:58) 在 org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:374) 在 org.apache.struts2.dispatcher.Dispatcher.init( Dispatcher.java:418) 在 org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:69) 在 org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51)在 org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:281) 在 org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:262) 在 org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4746) 在 org.apache.catalina.core.StandardContext 的 org.apache.catalina.core.ApplicationFilterConfig.(ApplicationFilterConfig.java:107)。 startInternal(StandardContext.java:5399) at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559) at org .apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549) at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) at java.util.concurrent.FutureTask.run(Unknown Source) at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread。运行（未知来源）原因：找不到动作类 [com.javatpoint.Product] - 动作 - 文件：/D:/DATA/STUDY/anup/Struts2Workspace/.metadata/.plugins/org.eclipse.wst.server。 core/tmp1/wtpwebapps/FirstStrutsApplication/WEB-INF/classes/struts.xml:6:55 at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.verifyAction(XmlConfigurationProvider.java:409) at com.opensymphony.xwork2.config .providers.XmlConfigurationProvider.addAction(XmlConfigurationProvider.java:354) 在 com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addPackage(XmlConfigurationProvider.java:468) 在 com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadPackages(XmlConfigurationProvider .java:264) 在 org.apache.struts2.config.StrutsXmlConfigurationProvider.loadPackages(StrutsXmlConfigurationProvider.java:111) 在 com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:193) 在 com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:55)

struts.xml：

```
<?xml version="1.0" encoding="UTF-8"?> 
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN" "struts.apache.org/dtds/struts-2.0.dtd">; 
<struts> 
  <package name="default" extends="struts-default"> 
    <action name="getTutorial" class="com.anup.work.TutorialAction" method="execute"> 
      <result name="success">/success.jsp</result> 
    </action> 
  </package>
</struts> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T15:23:05.063

您的 .class 文件没有被创建。右键单击您的项目，转到属性。选择 java 编译器并检查设置（取消选中启用复选框）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:36:53.243

答案明确说明了问题所在：

```
Action class [com.javatpoint.Product] not found 
```

您的操作类没有被部署，或者根本不存在。

# javascript - JS字符串搜索问题

> ID：16032809
> 
> 赞同：0
> 
> 时间：2013-04-16T09:02:02.427
> 
> 标签：javascript, string, search, substring

在另一个字符串的开头搜索一个字符串可以这样：

```
 if ($(this).text().search(new RegExp(filter, "i")) < 0) { ... 
```

我还想搜索第二个单词（逗号后），但以下永远不会返回命中：

```
findcomma = ($(this).text().indexOf(",")+1); // plus 1 to ignore comma itself
    if ($(this).text().substring(findcomma,$(this).text().length).search(new RegExp(filter, "i")) < 0) { ... 
```

对第二个 If 语句的帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:11:20.807

我认为你的括号不匹配`()`。只需将 if 条件重写为

```
if (($(this).text().substring(findcomma,$(this).text().length)).search(new RegExp(filter, "i")) < 0) 
```

# php - 在多维数组中使用 MySQL 添加数组

> ID：16032812
> 
> 赞同：0
> 
> 时间：2013-04-16T09:02:10.483
> 
> 标签：php, dynamic, multidimensional-array

我正在创建一个 json 多维数组以在我的 jquery 移动面板中使用，它就像一个魅力，但是......

现在我想让一些面板列表动态化并从数据库中获取一些数据，但我不知道该怎么做？

这是我的静态数组：

```
$panels = array(
        array('list' => '<li><a href="../index.html">Start</a></li>'),
        array('list' => '<li><a href="#">My profile</a></li>'),
        array('list' => '<li><a href="#">Statistics</a></li>'),
        array('list' => '<li data-role="list-divider">My groups</li>'),
        array('list' => '<li><a href="pages/grouppage.html?groupid=1" rel="external">My first group</a></li> '),
        array('list' => '<li><a href="pages/grouppage.html?groupid=5" rel="external">I am testing again</a></li> ')); 
```

如您所见，我的最后两个列表是相同的，应该来自我的数据库，具体取决于它是哪个用户，但我不知道该怎么做？

希望提前帮助和感谢:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:14:47.017

```
$database_data = "some data from database";
$data = array('list'=>$database_data);
$panels[] = $data ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:13:53.947

这应该对您有用，并根据要求编写您的查询..

```
 while ($r = mysql_fetch_array($query)) {
    $arr[] = array(
                'list' => '<li><a href='" . $r['page_url'] . "'>" . $r['page_name'] . "</a></li>'
            );
 } 
```

# sqlite - 跨多台服务器复制sqlite数据库的方法

> ID：16032825
> 
> 赞同：30
> 
> 时间：2013-04-16T09:02:45.003
> 
> 标签：sqlite, replication, distributed-computing, high-availability, rethinkdb

我正在开发一个分布式工作的应用程序，并且我有一个必须在分布式服务器之间共享的 SQLite 数据库。如果我在 serverA 中并更改 sqlite 行，则此更改必须立即在其他服务器中，但如果服务器脱机然后又联机，它必须更新与其他服务器相同的所有信息。

我正在尝试使用小型 SQLite 数据库开发 HA 服务。

我正在考虑使用 MongoDB 或 ReThinkDB 之类的东西，因为复制工作正常，而且我拥有独立的在线服务器数据。

是否有库或其他 SQL 方法可以在服务器之间共享数据？

提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-09-03T17:33:46.473

我使用 Raft 共识协议来复制我的 SQLite 数据库。你可以在这里找到系统：

[https://github.com/rqlite/rqlite](https://github.com/rqlite/rqlite)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-15T22:16:20.517

以下是一些选项：

[精简版](http://litereplica.io)：

它支持使用单个主（可写节点）和一个或多个副本（只读节点）的 SQLite3 数据库的主从复制。

如果设备脱机然后又联机，则辅助/从属数据库将逐步更新为主/主数据库。

[精简同步](http://litesync.io)：

它实现了多主复制，因此我们可以在任何节点上写入数据库，即使设备处于离线状态。

在两者上，我们都使用修改后的 URI 打开数据库，如下所示：

```
  “file:/path/to/app.db?replica=master&bind=tcp://0.0.0.0:4444”</pre>
[艾格莱特](https://aergolite.aergo.io)：
基于区块链，它具有最高级别的安全性。存储不可变的关系数据，由资源使用率低的分布式共识保护。
披露：我是这些解决方案的作者

```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-17T20:52:59.397

您可以通过在应用程序中嵌入[SymmetricDS](http://www.symmetricds.org/download)来同步 SQLite 数据库。它支持偶尔连接的客户端，因此它会在服务器上线时捕获更改并同步它们。它支持几种不同的数据库平台，可以用作库或独立服务。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-04T15:37:00.007

您还可以使用[CopyCat](http://copycat.fr)，它支持 SQLite 以及其他一些数据库类型。

# r - 计算逐行比例

> ID：16032826
> 
> 赞同：20
> 
> 时间：2013-04-16T09:02:48.813
> 
> 标签：r, dataframe, apply

我有一个数据框：

```
x <- data.frame(id = letters[1:3], val0 = 1:3, val1 = 4:6, val2 = 7:9)
#   id val0 val1 val2
# 1  a    1    4    7
# 2  b    2    5    8
# 3  c    3    6    9 
```

在每一行中，我想计算每个值的相应比例（比率）。例如，对于“val0”列中的值，我想逐行计算 val0 / (val0 + val1 + val2)。

期望的输出：

```
 id     val0  val1   val2
1  a    0.083  0.33   0.583
2  b    0.133  0.33   0.533
3  c    0.167  0.33   0.5 
```

谁能告诉我最好的方法是什么？这里只有三列，但可以有很多列。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-16T09:06:37.013

以下应该可以解决问题

```
cbind(id = x[, 1], x[, -1]/rowSums(x[, -1]))
##   id       val0      val1      val2
## 1  a 0.08333333 0.3333333 0.5833333
## 2  b 0.13333333 0.3333333 0.5333333
## 3  c 0.16666667 0.3333333 0.5000000 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-16T10:16:17.120

还有另一种选择（尽管这主要是一个漂亮的版本`sweep`）... `prop.table`：

```
> cbind(x[1], prop.table(as.matrix(x[-1]), margin = 1))
  id       val0      val1      val2
1  a 0.08333333 0.3333333 0.5833333
2  b 0.13333333 0.3333333 0.5333333
3  c 0.16666667 0.3333333 0.5000000 
```

从帮助文件的“描述”部分`?prop.table`：

> 这确实`sweep(x, margin, margin.table(x, margin), "/")`适用于新手，除了如果边距长度为零，则得到 x/sum(x)。

因此，您可以在下面看到，这与@Jilber 的解决方案非常相似。

而且... R 开发人员能够体谅我们这些新手真是太好了，不是吗？:)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-16T09:19:21.820

另一种选择使用`sweep`

```
sweep(x[,-1], 1, rowSums(x[,-1]), FUN="/")
        val0      val1      val2
1 0.08333333 0.3333333 0.5833333
2 0.13333333 0.3333333 0.5333333
3 0.16666667 0.3333333 0.5000000 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-10-13T20:36:53.723

`adorn_percentages()`janitor 包中的函数执行以下操作：

```
library(janitor)
x %>% adorn_percentages()
 id       val0      val1      val2
  a 0.08333333 0.3333333 0.5833333
  b 0.13333333 0.3333333 0.5333333
  c 0.16666667 0.3333333 0.5000000 
```

这等效于`x %>% adorn_percentages(denominator = "row")`，尽管`"row"`是默认参数，因此在这种情况下不需要。`adorn_percentages(x)`如果您更喜欢不使用`%>%`管道，则等效调用是。

*免责声明：*我创建了 janitor 包，但觉得发布这个是合适的；该功能旨在执行此任务，同时使代码更清晰易读，并且可以从 CRAN 安装包。

# json - 从 Google Geocode Api 获得更短的响应

> ID：16032828
> 
> 赞同：0
> 
> 时间：2013-04-16T09:02:55.477
> 
> 标签：json, google-maps, google-geocoding-api

这是我对 api 的 Get 请求：

```
http://maps.googleapis.com/maps/api/geocode/json?latlng=50.126886,14.421954&language=cs&sensor=false 
```

而且我得到了非常长的响应，这对于移动设备来说并不理想。所以我应该添加哪些参数来得到第一个结果`"address_components"`，`"formatted_address"`但不要得到其他东西（它们对我来说没用）。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:11:59.687

我认为您不能限制响应（[https://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)）。

您*可以*做的（如果您真的想限制响应）是通过您自己的服务器代理响应并删除一些结果。

你确定，你的问题是结果的大小吗？通常，下载网站所花费的大部分时间都花在了初始化请求上。这基本上意味着您应该支持更少的请求而不是每个请求的大小。

好资源：

*   [HTTP 请求与文件大小？](https://stackoverflow.com/questions/9855545/http-requests-vs-file-size)
*   [http://developer.yahoo.com/blogs/ydn/high-performance-sites-rule-1-fewer-http-requests-7163.html](http://developer.yahoo.com/blogs/ydn/high-performance-sites-rule-1-fewer-http-requests-7163.html)
*   [我应该瞄准更少的 HTTP 请求还是更多的可缓存 CSS 文件？](https://stackoverflow.com/questions/2685520/should-i-aim-for-fewer-http-requests-or-more-cacheable-css-files)

# python - Python提取包含单词的句子

> ID：16032832
> 
> 赞同：16
> 
> 时间：2013-04-16T09:03:12.490
> 
> 标签：python, regex, text-segmentation

我正在尝试从文本中提取包含指定单词的所有句子。

```
txt="I like to eat apple. Me too. Let's go buy some apples."
txt = "." + txt
re.findall(r"\."+".+"+"apple"+".+"+"\.", txt) 
```

但它正在返回我：

```
[".I like to eat apple. Me too. Let's go buy some apples."] 
```

代替 ：

```
[".I like to eat apple., "Let's go buy some apples."] 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-16T09:07:14.570

不需要正则表达式：

```
>>> txt = "I like to eat apple. Me too. Let's go buy some apples."
>>> [sentence + '.' for sentence in txt.split('.') if 'apple' in sentence]
['I like to eat apple.', " Let's go buy some apples."] 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-04-16T09:09:20.783

```
In [3]: re.findall(r"([^.]*?apple[^.]*\.)",txt)                                                                                                                             
Out[4]: ['I like to eat apple.', " Let's go buy some apples."] 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-16T09:07:00.647

```
In [7]: import re

In [8]: txt=".I like to eat apple. Me too. Let's go buy some apples."

In [9]: re.findall(r'([^.]*apple[^.]*)', txt)
Out[9]: ['I like to eat apple', " Let's go buy some apples"] 
```

但请注意，@jamylak`split`基于 - 的解决方案更快：

```
In [10]: %timeit re.findall(r'([^.]*apple[^.]*)', txt)
1000000 loops, best of 3: 1.96 us per loop

In [11]: %timeit [s+ '.' for s in txt.split('.') if 'apple' in s]
1000000 loops, best of 3: 819 ns per loop 
```

对于较大的字符串，速度差异较小，但仍然很重要：

```
In [24]: txt = txt*10000

In [25]: %timeit re.findall(r'([^.]*apple[^.]*)', txt)
100 loops, best of 3: 8.49 ms per loop

In [26]: %timeit [s+'.' for s in txt.split('.') if 'apple' in s]
100 loops, best of 3: 6.35 ms per loop 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-16T09:06:27.970

您可以使用[str.split](http://docs.python.org/3/library/stdtypes.html?highlight=str.split#str.split)，

```
>>> txt="I like to eat apple. Me too. Let's go buy some apples."
>>> txt.split('. ')
['I like to eat apple', 'Me too', "Let's go buy some apples."]

>>> [ t for t in txt.split('. ') if 'apple' in t]
['I like to eat apple', "Let's go buy some apples."] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-16T09:11:56.327

```
r"\."+".+"+"apple"+".+"+"\." 
```

这条线有点奇怪；为什么要连接这么多单独的字符串？你可以只使用 r'..+apple.+.'。

无论如何，你的正则表达式的问题是它的贪婪。默认情况下，a`x+`将`x`尽可能频繁地匹配。因此，您`.+`将匹配尽可能多的字符（*任何*字符）；包括点和`apple`s。

您要改用的是非贪婪表达式；您通常可以通过`?`在末尾添加 a 来做到这一点：`.+?`.

这将使您得到以下结果：

```
['.I like to eat apple. Me too.'] 
```

如您所见，您不再获得两个苹果句子，但仍然获得`Me too.`. 那是因为您仍然匹配`.`之后`apple`，因此不可能不捕获以下句子。

一个有效的正则表达式是这样的：`r'\.[^.]*?apple[^.]*?\.'`

在这里你不看*任何*字符，而只看那些本身不是点的字符。我们还允许根本不匹配任何字符（因为在`apple`第一句中的之后没有非点字符）。使用该表达式会导致：

```
['.I like to eat apple.', ". Let's go buy some apples."] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-13T09:00:22.103

显然，有问题的样本`extract sentence containing substring`不是
`extract sentence containing word`. 如何`extract sentence containing word`通过python解决问题如下：

一个词可以在句子的开头|中间|结尾。不限于问题中的示例，我将提供一个在句子中搜索单词的通用功能：

```
def searchWordinSentence(word,sentence):
    pattern = re.compile(' '+word+' |^'+word+' | '+word+' $')
    if re.search(pattern,sentence):
        return True 
```

仅限于问题中的示例，我们可以解决如下：

```
txt="I like to eat apple. Me too. Let's go buy some apples."
word = "apple"
print [ t for t in txt.split('. ') if searchWordofSentence(word,t)] 
```

对应的输出是：

```
['I like to eat apple'] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-27T12:07:02.663

```
import nltk
search = "test"
text = "This is a test text! Best text ever. Cool"
contains = [s for s in nltk.sent_tokenize(text) if search in s] 
```

# rotation - 如何旋转 3d 点

> ID：16032838
> 
> 赞同：0
> 
> 时间：2013-04-16T09:03:19.397
> 
> 标签：rotation, rotational-matrices

这可能是一个愚蠢的问题。但我只是想确定一下。给定一个 3d 点 p (x,y,z) 和旋转矩阵 R。旋转 R 后 p 的坐标是多少？是R * P吗？我做了一个实验，发现它并没有像我预期的那样给出结果。谢谢。

# c# - 如何从数据库中读取图像数据并插入它？

> ID：16032839
> 
> 赞同：1
> 
> 时间：2013-04-16T09:03:22.190
> 
> 标签：c#, asp.net

我希望你能帮我解决一些误解错误。我实现了一个从活动目录中获取所有内容的代码。问题是我不知道我是否正确实现了它，尤其是图像数据。

```
public System.Drawing.Image GetUserPicture(string userName) {
  try {
    var directoryEntry = new DirectoryEntry("LDAP://DC=darcairo,DC=com");
    var directorySearcher = new DirectorySearcher(directoryEntry);
    directorySearcher.Filter = ("(SamAccountName=" + userName + ")");
    var user = directorySearcher.FindOne();
    var bytes = user.Properties["thumbnailPhoto"][0] as byte[];
    using(var ms = new MemoryStream(bytes)) {
      return Bitmap.FromStream(ms);
    }
  } catch (Exception e) {
    return null;
  }
} 
```

然后我的目的是将这些数据（如用户名等）插入数据库。

```
protected void Button1_Click(object sender, EventArgs e) {
  try {
    char[] delimiters = new char[] {
      '\\'
    };
    string domainuser = System.Security.Principal.WindowsIdentity.GetCurrent().Name.Split(delimiters)[1];
    profile dir = new profile();
    string fname = dir.get_activeDiretory_DisplayName(domainuser);
    string mail = dir.get_activeDiretory_Email(domainuser);
    string department = dir.get_activeDiretory_Department(domainuser);
    string photo = Convert.ToString(dir.GetUserPicture(domainuser));
    string sql = string.Empty;
    string atc = System.Configuration.ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
    sql = "INSERT INTO Profile (uid, uname, ufname, uemail, udepartment, uphoto) ";
    sql += "VALUES(@uid, @uname, @ufname, @uemail, @udepartment, @uphoto); set identity_insert Profile off";
    using(SqlConnection c = new SqlConnection(atc)) {
      using(SqlCommand cmd = new SqlCommand(sql, c)) {
        //cmd.Parameters.AddWithValue("OrderID", 1);
        cmd.Parameters.AddWithValue("uid", 1);
        cmd.Parameters.AddWithValue("uname", domainuser);
        cmd.Parameters.AddWithValue("ufname", fname);
        cmd.Parameters.AddWithValue("uemail", mail);
        cmd.Parameters.AddWithValue("udepartment", department);
        cmd.Parameters.AddWithValue("uphoto", photo);
        c.Open();
        cmd.ExecuteNonQuery();
        c.Close();
        Label2.Text = "Record Inserted";
      }
    }
    Label2.Text = "inserted";
  } catch (Exception s) {
    Label2.Text = "not inserted " + "Error= " + s.Message;
  }
  string str = "";
  foreach(GridViewRow g in GridView1.Rows) {
    str = str + g.Cells[0].Text + g.Cells[1].Text + g.Cells[2].Text + g.Cells[3].Text + g.Cells[4].Text + Convert.ToByte(g.Cells[5]);
  }
  GridView1.Enabled = true;
} 
```

但是，sql中的图像数据是“Varbinary(max)”。

这是动态网格视图：

```
<asp:GridView 
  ID="GridView1" 
  runat="server" 
  AutoGenerateColumns="False" 
  BackColor="White" 
  BorderColor="#336666" 
  BorderStyle="Double" 
  BorderWidth="3px" 
  CellPadding="4" 
  DataKeyNames="UID" 
  DataSourceID="SqlDataSourceProf" 
  GridLines="Horizontal" 
  Width="433px" 
  Height="472px">
  <Columns>
    <asp:BoundField DataField="UID" HeaderText="UID" InsertVisible="False" ReadOnly="True" SortExpression="UID" />
    <asp:BoundField DataField="UName" HeaderText="UName" SortExpression="UName" />
    <asp:BoundField DataField="UFName" HeaderText="UFName" SortExpression="UFName" />
    <asp:BoundField DataField="UEmail" HeaderText="UEmail" SortExpression="UEmail" />
    <asp:BoundField DataField="UDepartment" HeaderText="UDepartment" SortExpression="UDepartment" />
    <asp:TemplateField>
      <ItemTemplate>
        <asp:Image ID="Image1" Height="100" Width="100" runat="server" ImageUrl='' />
      </ItemTemplate>
    </asp:TemplateField>
  </Columns>
  <FooterStyle BackColor="White" ForeColor="#333333" />
  <HeaderStyle BackColor="#336666" Font-Bold="True" ForeColor="White" />
  <PagerStyle BackColor="#336666" ForeColor="White" HorizontalAlign="Center" />
  <RowStyle BackColor="White" ForeColor="#333333" />
  <SelectedRowStyle BackColor="#339966" Font-Bold="True" ForeColor="White" />
  <SortedAscendingCellStyle BackColor="#F7F7F7" />
  <SortedAscendingHeaderStyle BackColor="#487575" />
  <SortedDescendingCellStyle BackColor="#E5E5E5" />
  <SortedDescendingHeaderStyle BackColor="#275353" />
</asp:GridView>
<asp:SqlDataSource 
  ID="SqlDataSourceProf" 
  runat="server" 
  ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
  SelectCommand="SELECT * FROM [Profile]">
</asp:SqlDataSource> 
```

除图像外的所有作品。你能帮忙或给我一些提示吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:39:40.827

将图像写入数据库

```
public static void WriteImage(ref SqlCommand CMD, Bitmap Img, string ParaName)
{
    WriteImage(ref CMD, Img, ParaName, SupportedImageFormats.JPG);
}

public static void WriteImage(ref SqlCommand CMD, Bitmap Img, string ParaName, SupportedImageFormats imgFormat)
{
    using (System.IO.MemoryStream MS = new System.IO.MemoryStream()) {
        SaveToStream(MS, Img, imgFormat, false);
        CMD.Parameters.Add(ParaName, SqlDbType.VarBinary).Value = MS.GetBuffer();
    }
} 
```

对于位图对象

```
Bitmap mImage = new Bitmap(strPathForImage); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:05:31.960

您可以为此使用通用处理程序。

将用户 ID 作为查询字符串参数传递给通用处理程序，将处理程序响应类型设置为`image/jpg`并将图像数据写入响应。然后将此处理程序分配为`ImageUrl`.

例如

```
public class ghCompanyLogoImage : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        Stream objLogoStream = null;

        objLogoStream = GetCompanyLogo(context);

        if (objLogoStream != null && objLogoStream.Length > 0)
        {
            // Set up the response settings
            context.Response.ContentType = "image/jpeg";
            context.Response.BufferOutput = false;

            const int buffersize = 1024 * 16;
            byte[] buffer = new byte[buffersize];
            int count = objLogoStream.Read(buffer, 0, buffersize);
            while (count > 0)
            {
                context.Response.OutputStream.Write(buffer, 0, count);
                count = objLogoStream.Read(buffer, 0, buffersize);
            }
        }
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }

    private Stream GetCompanyLogo(HttpContext context)
    {
        try
        {
            // Fetch image data stored in DB, convert it to MemoryStream and return it.
            // You can read querystring value here using "context.Request.QueryString[]"
        }
        catch (Exception ex)
        {
            throw ex;
        }
    }
} 
```

然后，要在 html 中显示图像，请将图像 url 指定为，

```
ImageUrl ="~/ghCompanyLogoImage.ashx?ID=Val" 
```

我希望它有所帮助。

# javascript - Javascript 匿名闭包

> ID：16032840
> 
> 赞同：18
> 
> 时间：2013-04-16T09:03:23.930
> 
> 标签：javascript, anonymous-function

我已经阅读了很多关于 Javascript 中的闭包的内容这些大括号是干什么用的？[我在mozilla.org](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)上读到，它说闭包应该定义为

`(function(){...})();`

但在[http://www.adequatelygood.com/JavaScript-Module-Pattern-In-Depth.html](http://www.adequatelygood.com/JavaScript-Module-Pattern-In-Depth.html)上，它说闭包函数是

`(function(){...}());`

有什么区别或后一个是错误的？最后一个（）的目的是什么？你会在里面放一些参数吗？我正在寻找一个很好的参考。

[编辑：此外， Mozilla.org](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)上有一个示例

```
var makeCounter = function() {
var privateCounter = 0;
  function changeBy(val) {
    privateCounter += val;
  }
  return {
    increment: function() {
      changeBy(1);
    },
    decrement: function() {
      changeBy(-1);
    },
    value: function() {
      return privateCounter;
    }
  }  
}; 
```

为什么这个“功能”需要分号？如果需要在声明后立即调用，则应在结束分号之前放置 ()。但是没有。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-16T09:06:38.653

The syntax

```
(function(){...})() 
```

is simply an immediately invoked anonymous function. It does not matter how you use your brackets, as the underlying code is a function being declared, and invoked.

Closures are instead used to describe a situation where a function has access to variables declared outside of its scope, accessible via closures

For clarity :

If we have the following function

```
 function hello() {
      alert("Hello");
   } 
```

We can call the function with the following

```
hello() 
```

Which invokes the function 'hello'. But if we do not wish to give it a name, but still invoke it, then we can do

```
(function hello() {
   alert("Hello");
})() 
```

Which will do the exact same as the previous example of calling `hello`

However, in this scenario there is no point in giving the function the name 'hello', so we can simply remove it:

```
(function() {
    alert("Hello");
})() 
```

Which is the notation used in your original question.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-16T09:49:29.550

您的示例显示了[立即调用函数表达式](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)或 IIFE。它对口译员说：

*   这是一个功能
*   它没有名字
*   使其远离全局范围，即“窗口”
*   现在打电话

是的，您可以将参数放在最后一个（）内。例如：

```
(
    function(username){
        alert("Hello " + username);
    }
)("John Smith") 
```

[闭包](http://jibbering.com/faq/notes/closures/)是 javascript 的一个特性，它允许我们实现[数据隐藏](http://en.wikipedia.org/wiki/Information_hiding)，这大致相当于 C++ 或 Java 等语言中的私有变量。

```
function getBmiCalculator(height, weight) {
    // These are private vars
    var height = height;
    var weight = weight;

    function calculateBmi(){
        return weight / (height * height);
    }
    return calculateBmi;
}

var calc = getBmiCalculator(1.85, 90);

// calc still has access to the scope where height and weight live.
var bmi = calc();
alert(bmi); 
```

在这个例子中，在 calc 被销毁之前，身高和体重不能被垃圾收集。存在身高和体重的记忆部分或“范围”是“封闭的”

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T09:14:28.197

没有区别。你也可以这样做：

```
true && function(){ /* code */ }();
0,function(){ /* code */ }();

!function(){ /* code */ }(); // Facebook style
~function(){ /* code */ }();
-function(){ /* code */ }();
+function(){ /* code */ }();

// with new    
new function(){ /* code */ }
new function(){ /* code */ }() // if you need arguments then use brackets 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-09T23:49:50.213

分组运算符可以将函数描述括在没有调用括号的情况下，也可以包括调用括号。即下面的两个表达式都是正确的 FE：

```
 (function () {})();
      (function () {}()); 
```

[函数表达式](http://dmitrysoshnikov.com/ecmascript/chapter-5-functions/#question-about-surrounding-parentheses)

# hibernate - 休眠自动增量 id sql server 2005

> ID：16032842
> 
> 赞同：2
> 
> 时间：2013-04-16T09:03:31.227
> 
> 标签：hibernate, sql-server-2005, annotations

我正在尝试使用注释学习休眠。现在我已经与 SQL SERVER 2005 建立了成功的数据库连接。我已经做了一个类事件，但是出现了以下异常：

```
Hibernate: insert into EVENTS (EVENT_DATE, title) values (?, ?)
1235 [main] WARN org.hibernate.util.JDBCExceptionReporter - SQL Error: 515, SQLState:23000
1235 [main] ERROR org.hibernate.util.JDBCExceptionReporter 
- Cannot insert the value NULL 
into column 'id', table 'hibernate_db.dbo.EVENTS'; column does not allow nulls. INSERT fails. 
```

事件类：

```
@Entity
@Table( name = "EVENTS" )
public class Event {

    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    @Column(name = "EVENT_ID", unique = true, nullable = false)
    private int event_id; 
```

如果您需要更多信息，请说出来。有人可以帮我吗？我完全不知道我的自动递增 event_id 有什么问题...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T11:31:10.680

由于相关问题，我似乎明白了：[Hibernate Auto Increment ID](https://stackoverflow.com/questions/2011528/hibernate-auto-increment-id?rq=1)

```
@GeneratedValue(strategy = javax.persistence.GenerationType.IDENTITY) 
```

现在正在为我自动增加 EVENT_ID 做伎俩。

所以我的 event_id 新代码是：

```
@Id
@GeneratedValue(strategy = javax.persistence.GenerationType.IDENTITY)
@Column(name="EVENT_ID", unique = true, nullable = false)
private int event_id; 
```

# android - Jquery mobile文件控件在设备中不起作用

> ID：16032844
> 
> 赞同：0
> 
> 时间：2013-04-16T09:03:33.600
> 
> 标签：android, jquery, jquery-mobile, file-upload, android-webview

我`File`在 jquery mobile 1.2.0 中使用默认控件。它在浏览器中工作正常。但它不能在设备中工作。我试过三星 Galaxy Tab 2。

控制 html 看起来像：

```
<div id="divattachImg" data-role="fieldcontain">
    <label for="attachImg">Attach Image (Optional):</label>
    <input type="file" name="attachImg" id="attachImg" value="" maxlength="45">
</div> 
```

当我单击设备中的控件时，它什么也不做。就像，点击从未发生过。我在这里做错了什么还是jqm有这个问题？如果是这样，你能建议解决这个问题吗？

任何帮助，将不胜感激。

PS：我在 android webview 中使用它。（不是电话间隙。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:13:44.000

好吧，Gajotres 已经回答了我的问题，但由于它不起作用，他删除了那个答案。但他在回答中提供了一个[链接](http://m0s-programming.blogspot.in/2011/02/file-upload-in-through-webview-on.html)，帮助我解决了我的问题。我正在回答我的问题，希望它在未来对其他人有所帮助。

在该教程中，[最后一条评论](http://m0s-programming.blogspot.in/2011/02/file-upload-in-through-webview-on.html?showComment=1345308705417#c4277804208730525915)包括一个[工作示例](http://opensourcesoftwareandme.blogspot.in/2012/08/attaching-file-in-cordova-uploading-it.html#.UW-3g6JHJDQ)。[该示例](https://github.com/claudemamo/file-attach-cordova-upload-jqm/blob/master/src/main/java/org/opensourcesoftwareandme/FileAttachmentActivity.java)说明您需要为 <3.x 和 >3.x 使用具有不同参数的方法。我用过它，它奏效了。

所以最终的解决方案将是：

```
private ValueCallback<Uri> mUploadMessage;
private final static int FILECHOOSER_RESULTCODE = 1;

public class MyWebChromeClient extends WebChromeClient {

        public void openFileChooser(ValueCallback<Uri> uploadMsg) {

            mUploadMessage = uploadMsg;
            Intent i = new Intent(Intent.ACTION_GET_CONTENT);
            i.addCategory(Intent.CATEGORY_OPENABLE);
            i.setType("image/*");
            System.out.println("starting act for result");
            MainActivity.this.startActivityForResult(
                    Intent.createChooser(i, "Image Browser"),
                    FILECHOOSER_RESULTCODE);
        }

        public void openFileChooser(ValueCallback<Uri> uploadMsg,
                String acceptType) {
            mUploadMessage = uploadMsg;
            Intent i = new Intent(Intent.ACTION_GET_CONTENT);
            i.addCategory(Intent.CATEGORY_OPENABLE);
            i.setType("image/*");

            MainActivity.this.startActivityForResult(
                    Intent.createChooser(i, "Choose type of attachment"),
                    FILECHOOSER_RESULTCODE);
        }
    }

@Override
    protected void onActivityResult(int requestCode, int resultCode,
            Intent intent) {
        // TODO Auto-generated method stub
        if (requestCode == FILECHOOSER_RESULTCODE) {
            if (null == mUploadMessage)
                return;
            Uri result = intent == null || resultCode != RESULT_OK ? null
                    : intent.getData();
            mUploadMessage.onReceiveValue(result);
            mUploadMessage = null;
        }
    } 
```

希望它对将来的人有所帮助。

# qt - Opencv2 cvtColor() 不起作用

> ID：16032845
> 
> 赞同：11
> 
> 时间：2013-04-16T09:03:37.040
> 
> 标签：qt, opencv

我在 Ubuntu 12.04 上使用 OpenCV2。我可以成功运行图像读取显示代码。但是我无法运行具有内置功能的代码，例如。cvtColor()

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>

#include <stdio.h>

int main(int argc, char *argv[])
{
    cv::Mat image = cv::imread("img.jpg");

    if( image.data == NULL )
    {
        printf( "file cannot be loaded\n");
        return 1;
    }

    cv::namedWindow("My");
    cv::imshow("My", image);

    cv::Mat result;
    cv::cvtColor(image, result, CV_BGR2Luv);

    cv::imwrite("outImg.jpg", result);

    cv::waitKey(0);

    return 0;
} 
```

我正在为我的 OpenCV 使用 Qt-creator 使用 --libs, --cflags 编译后，我收到以下编译器错误：

```
make: Entering directory `/home/swaroop/Work/ai-junkies/cuda/uc_davis/opencv2.x/OpenCV2Test'
g++ -g -c -pipe -O2 -Wall -W -D_REENTRANT -DQT_WEBKIT -DQT_NO_DEBUG -DQT_CORE_LIB -DQT_SHARED -I/usr/share/qt4/mkspecs/linux-g++ -I. -I/usr/include/qt4/QtCore -I/usr/include/qt4 -I/usr/include/opencv -I. -o main.o main.cpp
main.cpp: In function 'int main(int, char**)':
main.cpp:22:29: error: 'CV_BGR2Luv' was not declared in this scope
main.cpp:22:39: error: 'cvtColor' was not declared in this scope 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-16T09:13:12.443

`cvtColor`宣布于`opencv2/imgproc/imgproc.hpp`

请记住它是**#include**而不是#import

```
#include <opencv2/imgproc/imgproc.hpp> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-27T21:55:41.513

或者，如果您正在测试事物并且不关心过度包含，您可以简单地使用一行：

```
#include <opencv2/opencv.hpp> 
```

它将包括大多数 opencv2 头文件。

# javascript - 在 javascript 上使用 cookie/session 存储值

> ID：16032849
> 
> 赞同：-2
> 
> 时间：2013-04-16T09:03:52.590
> 
> 标签：javascript

如何使用 javascript 将此值从隐藏字段存储到 cookie/会话

```
function SelectedRowsHidden() {
                var hiddenField = $("#<%= SelectedRowsState.ClientID %>");
                var selectedValues = "";

                for (var row in selectedRows) {
                    if (selectedRows[row])
                        selectedValues = selectedValues + row;
                }
                //hiddenField.val(selectedValues); //selectedvalues must be stored on cookie or session
                //codes for cookies / session
            } 
```

创建 cookie / session 后，我将如何将其传递给另一个 session。

```
function restoreSelectedRows(){
                //var getRowState = document.getElementById('<%= SelectedRowsState.ClientID %>').innerHTML;
                var getRowState = $("#SelectedRowsState").val(); // gives me undefined value
                $("#jqGrid").jqGrid('setSelection', getRowState, true);
                //code here
            } 
```

我真的不知道我将如何实现这一目标。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:02:35.617

请检查此代码。在这里我尝试涵盖以下几点：

1.) 使用 Javascript 创建 cookie。

2.) 在另一个页面上使用会话读取 Cookie 值。

**我想在此之前清除一件事，因为会话是服务器端功能，所以您无法在 javascript 中设置会话。**

**使用 javascript 编写 cookie 的第一页：**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
<script type="text/javascript">
    function writeCookie() {
        var exdays = null;//Specify how much days you want cookie age
        var value = document.getElementById('HiddenField1').value;
        var exdate = new Date();
        exdate.setDate(exdate.getDate() + exdays);
        var c_value = escape(value) + ((exdays == null) ? "" : "; expires=" + exdate.toUTCString());
        document.cookie = "TestCookie=" + c_value;//Cookie name with value

    }
</script>
</head>
<body>
<form id="form1" runat="server">
<div>
    <asp:Button ID="Button1" runat="server" Text="Click" 
        OnClientClick="writeCookie();"/>
    <asp:HiddenField ID="HiddenField1" runat="server" Value="HiddenFieldValue" />
</div>
</form> 
```

**使用 Session 读取 Cookie 的第二页：**

**ASPX 文件：**

```
<html xmlns="http://www.w3.org/1999/xhtml">
 <head runat="server">
   <title></title>
 </head>
 <body>
<form id="form1" runat="server">
<div>
    <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
</div>
</form>
</body>
 </html> 
```

**CS文件：**

```
protected void Page_Load(object sender, EventArgs e)
{
    HttpCookie aCookie = Request.Cookies["TestCookie"];
    if (aCookie != null)
    {
        Label1.Text = aCookie.Value;
        session["hiddenvalue"] = aCookie.Value;
    }
    else
    {
        //Cookie not set.
    }
} 
```

希望这能解决您的疑问，如果仍然缺少某些东西，请告诉我。

# asp-classic - 将文件上传到服务器，然后附加到电子邮件并以 asp 格式发送

> ID：16032851
> 
> 赞同：0
> 
> 时间：2013-04-16T09:03:55.320
> 
> 标签：asp-classic

我有一个根据用户输入上传文件的应用程序..将图像上传到我的网络服务器上的文件夹。我现在希望脚本在上传后发送附有图片的电子邮件

任何帮助都非常感谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:12:47.220

我强烈建议您在代码中执行此操作，并且不要监视服务器上的文件夹是否有任何更改！EG，上传完成后使用 CDOSYS 发送电子邮件

我将假设您知道文件名和文件位置，并且可以将此路径存储为变量。我不知道你选择了什么变量名，所以我将使用一个名为`uploadedFilePath`

```
<%
Dim ObjSendMail
Set ObjSendMail = CreateObject("CDO.Message")

ObjSendMail.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2 
ObjSendMail.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/smtpserver") ="mail.yourDomainName.com"
ObjSendMail.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25
ObjSendMail.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/smtpusessl") = False 
ObjSendMail.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/smtpconnectiontimeout") = 60
ObjSendMail.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate") = 1 
ObjSendMail.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/sendusername") ="myEmail@myDomainName.com"
ObjSendMail.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/sendpassword") ="myPassword"

ObjSendMail.Configuration.Fields.Update

ObjSendMail.To = "someone@AntoherDomain.com"
ObjSendMail.Subject = "Upload complete"
ObjSendMail.From = "me@myDomainName.com"
ObjSendMail.AddAttachment = uploadedFilePath

ObjSendMail.HTMLBody = "<p>Hi,<br /> A file has been uploaded!</p>"    
ObjSendMail.Send    
Set ObjSendMail = Nothing
%> 
```

# javascript - Jquery移动页面不能折叠扩展

> ID：16032852
> 
> 赞同：0
> 
> 时间：2013-04-16T09:03:56.910
> 
> 标签：javascript, html, css, cordova, jquery-mobile

我有一个 jquery 移动应用程序，其中有一个可折叠的 div。

当我单击此可折叠文件时，它会打开，但页面高度保持在 100%，这意味着我无法向下滚动并查看其中的内容。

我认为 jquery mobile 是为了在打开这样的东西时调整页面高度？

```
<div id="hints" class="main" data-role="page" data-theme="a">
    <div data-role="content" id="content">
         <h2>Hints &amp; Tips</h2>
         <p>Helping you get the most out of ARMA 3</p>
         <div data-role="collapsible" data-theme="e" data-content-theme="e">
             <h4>Launch Paramaters</h4>
         </div>
    </div>
</div> 
```

如果可能的话，我真的想要一个 CSS 修复而不是一个 JS，因为这不应该需要 JS。

我努力了：

```
* {
    min-height:100% !important;
}

* {
    min-height:auto !important;
} 
```

似乎影响它的 CSS 是：

```
.ui-panel{
border:1px solid #333;
background:#111;
color:#fff;
font-weight:bold;
text-shadow:0 -1px 0 #000;
background-image:-webkit-gradient(linear,left top,left bottom,from( #3c3c3c ),to( #111 ));
background-image:-webkit-linear-gradient( #3c3c3c,#111 );
background-image:-moz-linear-gradient( #3c3c3c,#111 );
background-image:-ms-linear-gradient( #3c3c3c,#111 );
background-image:-o-linear-gradient( #3c3c3c,#111 );
background-image:linear-gradient( #3c3c3c,#111 )
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:53:18.547

我终于发现了问题，这是由于这段代码：

```
.ui-panel{
    border:1px solid #333;
} 
```

如果有人能解释为什么这会导致问题，将不胜感激！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T09:09:53.123

你的问题很奇怪，这不应该发生。您是否修改了页面的任何 CSS 或样式属性？（比如定义一个固定的高度等）

# spring - Spring 3.0 的动态图块模板

> ID：16032857
> 
> 赞同：1
> 
> 时间：2013-04-16T09:04:15.777
> 
> 标签：spring, spring-mvc, dynamic, tiles2

我目前正在使用 Spring 3 和 Tiles 2 开发应用程序。

我对 Tiles 和动态内容有疑问。

我想要一个“标题”模板，其中包含一个填充有数据库信息的菜单。

由于菜单可通过应用程序获得，我不想将信息放在请求控制器中。

你有什么资料吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:21:55.400

解决方案是在菜单定义上使用 ViewPreparer。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T07:37:51.660

查看本[教程](http://tech.finn.no/the-ultimate-view-tiles-3/)，它可以帮助您

*   弹簧到瓷砖集成，
*   带有通配符的定义，
*   使用 OptionsRenderer 实现回退模式，以及
*   定义组成。

[http://tech.finn.no/the-ultimate-view-tiles-3/](http://tech.finn.no/the-ultimate-view-tiles-3/)

# r - 通过变量将数据从长格式重塑为短格式，并重命名列

> ID：16032858
> 
> 赞同：5
> 
> 时间：2013-04-16T09:04:21.380
> 
> 标签：r, aggregate, data.table, plyr, reshape

如何使用`plyr`, `reshape2`, `aggregate`function 和/或更优雅地做到这一点`data.table`？

```
library(plyr)

set.seed(1) 
x <- data.frame(Ind = paste0("Ind", 1:10), Treatment = c(rep("Treat",10),rep("Cont",10)),
value = rnorm(20,60,8))

tr <- subset(x, Treatment == "Treat")
tr <- rename(tr, c("value" = "Treat"))

ct <- subset(x, Treatment == "Cont")
ct <- rename(ct, c("value" = "Cont"))

merge(ct[-2], tr[-2], by = "Ind", all = T, sort = F)

# Do not run, data.frame:
     Ind     Cont    Treat
1   Ind1 72.09425 54.98837
2   Ind2 63.11875 61.46915
3   Ind3 55.03008 53.31497
4   Ind4 42.28240 72.76225
5   Ind5 68.99945 62.63606
6   Ind6 59.64053 53.43625
7   Ind7 59.87048 63.89943
8   Ind8 67.55069 65.90660
9   Ind9 66.56977 64.60625
10 Ind10 64.75121 57.55689 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-16T09:50:52.150

要添加到您的选项...

这是我们的起始数据：

```
set.seed(1) # Nice for reproducible examples
x <- data.frame(Ind = paste0("Ind", 1:10), 
                Treatment = c(rep("Treat",10),rep("Cont",10)),
                value = rnorm(20,60,8)) 
```

### `xtabs`

请注意，输出是 a `matrix`，而不是 a `data.frame`。

```
xtabs(value ~ Ind + Treatment, x)
#        Treatment
# Ind         Cont    Treat
#   Ind1  72.09425 54.98837
#   Ind10 64.75121 57.55689
#   Ind2  63.11875 61.46915
#   Ind3  55.03008 53.31497
#   Ind4  42.28240 72.76225
#   Ind5  68.99945 62.63606
#   Ind6  59.64053 53.43625
#   Ind7  59.87048 63.89943
#   Ind8  67.55069 65.90660
#   Ind9  66.56977 64.60625 
```

### `reshape`

```
reshape(x, direction = "wide", idvar="Ind", timevar="Treatment")
#      Ind value.Treat value.Cont
# 1   Ind1    54.98837   72.09425
# 2   Ind2    61.46915   63.11875
# 3   Ind3    53.31497   55.03008
# 4   Ind4    72.76225   42.28240
# 5   Ind5    62.63606   68.99945
# 6   Ind6    53.43625   59.64053
# 7   Ind7    63.89943   59.87048
# 8   Ind8    65.90660   67.55069
# 9   Ind9    64.60625   66.56977
# 10 Ind10    57.55689   64.75121 
```

`reshape`如果您想使用以下选项同时更改名称：

```
setNames(reshape(x, direction = "wide", idvar="Ind", timevar="Treatment"), 
         c("Ind", "Treat", "Cont")) 
```

### `split`+`merge`

同样，`setNames`可以在这里使用，或者您可以在之后重命名列。

```
temp <- split(x[-2], x$Treatment)
merge(temp[[1]], temp[[2]], by = "Ind", suffixes = names(temp))
#      Ind valueCont valueTreat
# 1   Ind1  72.09425   54.98837
# 2  Ind10  64.75121   57.55689
# 3   Ind2  63.11875   61.46915
# 4   Ind3  55.03008   53.31497
# 5   Ind4  42.28240   72.76225
# 6   Ind5  68.99945   62.63606
# 7   Ind6  59.64053   53.43625
# 8   Ind7  59.87048   63.89943
# 9   Ind8  67.55069   65.90660
# 10  Ind9  66.56977   64.60625 
```

### `ddply`从`plry`

（我不是普通的“plyr”用户，所以完全不确定这是否是最好的方法）。

```
library(plyr)
ddply(x, .(Ind), summarize, 
      Treat = value[Treatment == "Treat"], 
      Cont = value[Treatment == "Cont"])
#      Ind    Treat     Cont
# 1   Ind1 54.98837 72.09425
# 2  Ind10 57.55689 64.75121
# 3   Ind2 61.46915 63.11875
# 4   Ind3 53.31497 55.03008
# 5   Ind4 72.76225 42.28240
# 6   Ind5 62.63606 68.99945
# 7   Ind6 53.43625 59.64053
# 8   Ind7 63.89943 59.87048
# 9   Ind8 65.90660 67.55069
# 10  Ind9 64.60625 66.56977 
```

### `unstack`（好像选项还不够！）

```
unique(data.frame(x[1], unstack(x, value ~ Treatment)))
#      Ind     Cont    Treat
# 1   Ind1 72.09425 54.98837
# 2   Ind2 63.11875 61.46915
# 3   Ind3 55.03008 53.31497
# 4   Ind4 42.28240 72.76225
# 5   Ind5 68.99945 62.63606
# 6   Ind6 59.64053 53.43625
# 7   Ind7 59.87048 63.89943
# 8   Ind8 67.55069 65.90660
# 9   Ind9 66.56977 64.60625
# 10 Ind10 64.75121 57.55689 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-16T09:33:53.763

这里有一个`data.table`方法：

```
x.dt <- as.data.table(x)
setkey(x.dt, "Ind")
x.dt[, setattr(as.list(value), 'names', c("Treat", "Cont")),by=Ind]
#       Ind    Treat     Cont
#  1:  Ind1 57.73997 54.06263
#  2: Ind10 64.23664 65.98024
#  3:  Ind2 58.71422 58.01650
#  4:  Ind3 52.71239 62.64899
#  5:  Ind4 65.09401 75.51550
#  6:  Ind5 47.04052 61.80900
#  7:  Ind6 61.95129 55.20021
#  8:  Ind7 58.02494 55.41143
#  9:  Ind8 69.38424 57.71132
# 10:  Ind9 62.02491 57.06147 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-16T09:07:01.927

You can use function `dcast()` from library `reshape2`.

```
 dcast(data=x,Ind~Treatment)
     Ind     Cont    Treat
1   Ind1 53.45988 53.68913
2  Ind10 54.02344 66.32866
3   Ind2 57.44591 62.32354
4   Ind3 67.53185 53.14807
5   Ind4 52.42713 55.04052
6   Ind5 63.80633 61.58893
7   Ind6 59.40308 51.66228
8   Ind7 67.79597 73.60620
9   Ind8 58.15420 65.06976
10  Ind9 61.45161 63.73947 
```

# jquery - 最小化捕获的jQuery点击事件的失败率

> ID：16032860
> 
> 赞同：0
> 
> 时间：2013-04-16T09:04:24.613
> 
> 标签：jquery, google-analytics

当用户与不同的元素（主要是点击事件）交互时，我使用 jquery 来触发事件，然后将它们提交给 Google Analytics。有哪些方法可以最大限度地减少未捕获点击事件的潜在故障？

我已经意识到并尝试在下面解决的一些明显问题： - 添加短暂的延迟以确保代码触发 - Ctrl+单击以在新选项卡中打开

还有其他我错过的吗？在什么情况下，下面的代码无法捕获用户交互？

```
 // Clicked Social Profile
  $('.socialprofile').click(function(){

    if ($(this).attr('target').toLowerCase() == '_blank' || e.metaKey || e.ctrlKey || e.which == 2 || e.which == 3) {
      var newtab = true;
    }

    if (!newtab) {
      e.preventDefault();
      setTimeout('location.href = "' + this.href  + '"', 150);
    }

  }); 
```

# laravel - Laravel：将数据从基本控制器传递给 default.blade.php

> ID：16032861
> 
> 赞同：5
> 
> 时间：2013-04-16T09:04:29.687
> 
> 标签：laravel, laravel-3

我有一个基本控制器，它有一种方法可以将 twitter 提要返回到我的视图中。

我想将视图中的它从页面视图移动到默认刀片以减少冗余，因为它将出现在站点范围内。如何将数据从基本控制器传递到刀片？

我可以将它从页面控制器发送到我的视图，如下所示：

```
public function get_index()
{
    ..................
    $this->layout->nest('content', 'home.index', array(
        'tweets' => $this->get_tweet()
    ));
} 
```

在视图中，像这样输出它：

```
if ($tweets)
{
    foreach ($tweets as $tweet)
    {
        .............. 
```

我想在 default.blade.php 和我的 Base_Contoller 中完成所有这些工作：

```
<?php
class Base_Controller extends Controller {
    /**
     * Catch-all method for requests that can't be matched.
     *
     * @param  string    $method
     * @param  array     $parameters
     * @return Response
     */
    public function __call($method, $parameters)
    {
        return Response::error('404');
    }

    public function get_tweet()
    {
        ...........
        return $tweets;
    }
} 
```

这怎么可能？

//////////////////////更新/////////////////////////// //

应用程序/模型/tweets.php

```
<?php
class Tweets {
    public static function get($count = 3)
    {
        Autoloader::map(array(
        'tmhOAuth'     => path('app').
                'libraries/tmhOAuth-master/tmhOAuth.php',
            'tmhUtilities' => path('app').
                'libraries/tmhOAuth-master/tmhUtilities.php'
        ));
        $tmhOAuth = new tmhOAuth(array(
            'consumer_key'        => 'xxx',
            'consumer_secret'     => 'xxx',
            'user_token'          => 'xxxxx',
            'user_secret'         => 'xxxxx',
            'curl_ssl_verifypeer' => false
        ));
        $code = $tmhOAuth->request('GET',
        $tmhOAuth->url('1.1/statuses/user_timeline'), array(
            'screen_name' => 'xxx',
            'count' => $count
        ));
        $response = $tmhOAuth->response['response'];
        $tweets = json_decode($response, true);
        return $tweets;
    }
} 
```

应用程序/视图/小部件/tweets.blade.php

```
@foreach ($tweets)
    test
@endforeach 
```

应用程序/视图/布局/default.blade.php

```
....
{{ $tweets }}
.... 
```

应用程序/composers.php

```
<?php
View::composer('widgets.tweets', function($view)
{
    $view->tweets = Tweets::get();
});
View::composer('layouts.default', function($view)
{
    $view->nest('tweets', 'widgets.tweets');
}); 
```

应用程序/控制器/base.php

```
<?php
class Base_Controller extends Controller {

    /**
     * Catch-all method for requests that can't be matched.
     *
     * @param  string    $method
     * @param  array     $parameters
     * @return Response
     */
    public $layout = 'layouts.default';

    public function __call($method, $parameters)
    {
        return Response::error('404');

    }

} 
```

应用程序/控制器/home.php

```
<?php
class Home_Controller extends Base_Controller {

    public $layout = 'layouts.default';

    public $restful = true; 

    public function get_index()
    {
        Asset::add('modernizr', 'js/thirdparty/modernizr.js');
        Asset::add('jquery',
            'http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js');
        Asset::add('scripts', 'js/scripts.js');

        $this->layout->title = 'title';
        $this->layout->nest('content', 'home.index', array(
            //'data' => $some_data
        ));
    }
} 
```

给我一个

> 未定义变量：推文

错误

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-16T10:13:30.020

第 1 步 - 为您的推文创建一个视图，我们称之为它`widgets/tweets.blade.php`，它将接受您的`$tweets`数据。如果您想要更高的性能，这使得将来缓存推文视图变得非常容易。我们还需要一个模型来为您生成推文数据。

第 2 步 - 将推文数据传递到您的推文视图中，让我们为此使用[View Composer](http://three.laravel.com/docs/views#view-composers)，以便将逻辑保留在视图中（但在视图之外）。

第 3 步 - 创建您的默认布局，我们称之为`layout/default.blade.php`. 这将接受`$content`和`$tweets`。我们将用另一个[View Composer](http://three.laravel.com/docs/views#view-composers)嵌套 tweets 视图。您可以嵌套`$content`在控制器操作中。

第 4 步 -`$layout`在您的`Base_Controller`.

第 5 步 - 盈利！

注意 - 如果这些是您的第一个视图作曲家，那么您需要将它们包含在`application/start.php`

* * *

```
// application/models/tweets.php
class Tweets {
    public static function get($count = 5)
    {
        // get your tweets and return them
    }
}

// application/views/widgets/tweets.blade.php
@foreach ($tweets)
    {{-- do something with your tweets --}}
@endforeach

// application/views/layouts/default.blade.php
<section class="main">{{ isset($content) ? $content : '' }}</section>
<aside class="widget widget-tweets">{{ $tweets }}</aside>

// application/composers.php
View::composer('widgets.tweets', function($view)
{
    $view->tweets = Tweets::get();
});
View::composer('layouts.default', function($view)
{
    $view->nest('tweets', 'widgets.tweets');
});

// application/start.php (at the bottom)
include path('app').'composers.php';

// application/controllers/base.php
class Base_Controller extends Controller {
    public $layout = 'layouts.default';
}

// application/controllers/home.php
class Home_Controller extends Base_Controller {

    public $restful = true;

    public function get_index()
    {
        $this->layout->nest('content', 'home.welcome');
    }

} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-16T09:34:08.143

```
View::share('key', 'value'); 
```

在你看来使用（刀片语法）

```
{{$key}} 
```

或（PHP 语法）

```
echo $key; 
```

# fabricjs - 拖动时，fabric.js 将活动对象置于其他对象之上

> ID：16032863
> 
> 赞同：1
> 
> 时间：2013-04-16T09:04:36.193
> 
> 标签：fabricjs

我的问题是，fabric.js 在拖动时会在其他对象之上创建活动对象。

我知道一个属性可以做到这一点，无法提醒。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:11:20.787

你可以这样做：

```
canvas.add(red, blue); // add youre objects..

function myDrag(e) {   // funciton on drag (moving)
  e.target.bringToFront();
}

canvas.on({
  'object:moving': myDrag,
}); 
```

想要添加更多活动？使用事件检查[器@fabricjs](http://fabricjs.com/events/)

我做了一个工作[Fiddle](http://jsfiddle.net/qm7LJ/)。希望它有帮助...

# java - 变量声明时的Java内存使用情况？

> ID：16032865
> 
> 赞同：5
> 
> 时间：2013-04-16T09:04:50.027
> 
> 标签：java, variables, memory-management, global-variables

关于内存效率，我有以下问题：

必须为相应的变量使用正确的数据类型。将数值表示`1`为 a`byte`需要八分之一的内存（但如果我错了，请纠正我）。不过我的问题是，内存分配/扣除是否发生在定义变量类型或初始化时？这可能看起来很奇怪，但我问的是不需要初始化的全局变量，因为它们具有与局部变量相对的默认值。我还想知道 Object 数据类型是否有默认大小？我认为这是基于 JVM（32 位与 64 位）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:20:26.620

> 必须为相应的变量使用正确的数据类型。

当然。Java 是一种强类型语言。你的观点？

> 将数值 1 表示为一个字节需要八分之一的内存（但如果我错了，请纠正我）。

你错了。根据相邻声明的其他变量和类型，它可能需要 4 甚至 8 个字节，具体取决于 JVM 使用的填充。

> 不过我的问题是，内存分配/扣除是否发生在定义变量类型或初始化时？

两者都不。它发生在分配时间，即`new`时间，而不是例如在构造函数期间。

> 这可能看起来很奇怪，但我问的是不需要初始化的全局变量，因为它们有默认值

所有变量都需要初始化。在静态或实例变量的情况下，您不必编写初始化*程序代码*。引用 Java 的“全局”一词没有任何意义。

> 与局部变量相反。

它是什么没有任何区别。该变量仍然必须为其分配空间并在其中存储一个值，无论是静态的、实例的还是方法本地的。

> 我还想知道 Object 数据类型是否有默认大小？我认为这是基于 JVM（32 位与 64 位）？

这个问题毫无意义。类的实例`Object`始终具有相同的大小，没有仔细记录或指定任何地方，因此可以随 JVM 自由变化。其他类的实例同上。在我能看到的任何有用的意义上，任何地方都没有“默认”。

# asp.net - ASP.NET - 使用性能良好的 SQL 数据库进行本地化

> ID：16032866
> 
> 赞同：0
> 
> 时间：2013-04-16T09:04:53.180
> 
> 标签：asp.net, database, performance, caching, localization

作为 ASP.NET 网站的一部分，我维护本地化/文本翻译是使用存储在 SQL 数据库中的文本而不是使用 ResX 文件来处理的；为什么以这种方式完成取决于遗留问题，但这就是我们所做的，但它确实使我们能够相当轻松地进行更改。文本存储在这样的表中：

```
CREATE TABLE [Text](
    [TextID] [int] NOT NULL,
    [LanguageID] [int] NOT NULL,
    [Text] [nvarchar](max) NULL
)
CONSTRAINT [PK_Text] PRIMARY KEY CLUSTERED 
(
    [TextID] ASC,
    [LanguageID] ASC
) 
```

并且网站中的代码隐藏将引用所选语言的文本 ID，以将正确的文本分配给 HTML 元素，例如标签等。

现在因为我们有这么多可用的文本并且在每个页面请求上访问数据库只是为了翻译一个页面非常慢，我们实际上所做的是在应用程序启动时使用[HttpApplicationState](http://msdn.microsoft.com/en-gb/library/ms178594%28v=vs.100%29.aspx)将该表中的所有文本缓存到服务器内存中。

我们现在遇到的问题是，因为我们有几个 Web 服务器正在负载平衡，所以更新静态缓存变得很困难；我们现在必须等待应用程序池回收，然后才能看到所做的任何更改。同样正如上面的链接所暗示的：

> ...在应用程序状态下存储大块数据可能会填满服务器内存，导致服务器将内存分页到磁盘。

所以我想知道我可以使用什么其他解决方案？我需要能够缓存所有这些文本以获得更高的性能，但还需要能够比每天一次更频繁地更新它，并且能够跨多个服务器管理此缓存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T17:28:30.000

您正在寻找的术语是“分布式缓存”。如果你用谷歌搜索，你会找到一些对你有帮助的选项。分布式缓存的一些优点：

1.  数据存储在 RAM 中，而不是磁盘中。
2.  数据分布在许多节点上，并允许您水平扩展（只需添加一个节点）。
3.  缓存将在他们自己的专用机器上运行。这将减轻 Web 服务器上的负载。

需要研究的一些技术：

1.  AppFabric（适用于 .NET）：[http ://en.wikipedia.org/wiki/AppFabric#AppFabric_Caching](http://en.wikipedia.org/wiki/AppFabric#AppFabric_Caching)
2.  内存缓存： http: [//memcached.org/](http://memcached.org/)
3.  沙发底座：http : [//www.couchbase.com/](http://www.couchbase.com/)

我之前在 .NET 中使用过 AppFabric，它对我们公司非常有效。很容易添加节点并根据需要增长。

# c# - 使用 c# 在 Word 中按名称访问表

> ID：16032867
> 
> 赞同：2
> 
> 时间：2013-04-16T09:04:53.850
> 
> 标签：c#, office-interop

我有一个包含很多表格的文档。我想使用 C# 和 Microsoft.Office.Interop.Word 修改这些表。我读到我可以使用 Tables 接口遍历所有表。

问题：是否可以为表命名/ID 并通过其名称访问表？（就像 Powerpoint 自动化中的形状一样）。

问题 2：如果 Microsoft.Office.Interop.Word 无法实现，那么像 Aspose Words 这样的替代方案是否提供了更方便的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T03:32:57.383

> 是否可以为表命名/ID 并通过其名称访问表？

Table 对象确实提供了一个[ID](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.table.id.aspx)属性，但这只是保存为网页的文档。我假设这不是你想要的。

它仍然是可能的，但它不是由 API 提供的；您需要自己创建此功能。有两种方法：

**一：**使用互操作，您可以检索表的哈希码，该哈希码（希望）返回一个唯一的 ID。例如：

```
Word.Application wordApp = new Word.Application();
Word.Document wordDoc = wordApp.Documents.Open(@"C:\Users\username\Documents\HasTables.docx");
var tableID = wordDoc.Tables[1].GetHashCode(); 
```

一个彻底的解决方案可能是将文档中所有表的 ID 存储在 Dictionary 或其他具有键/值对映射的集合类型中。现在请注意，这些 ID 不会在 Word 会话中持续存在……因此，如果您需要能够识别同一会话之外的表，则需要另一种方法。

**二：**使用 OpenXML（对于 .docx 格式）和/或 WordML（对于 Word 2003 XML，如果您不能简单地将文件升级到 .docx）为每个 w:tbl 元素创建您自己的 Id 或 Name 属性。您可以使用自己的命名空间来消除歧义。这也将在 Word 会话中持续存在。这是一个与 Interop 不同的世界，但在我看来，这是更好的路线（性能，可用文档）。

> 如果 Microsoft.Office.Interop.Word 无法实现，那么像 Aspose Words 这样的替代方案是否提供了更方便的方法？

[不，Aspose 在他们的TableCollection](http://www.aspose.com/docs/display/wordsnet/TableCollection+Members)或[Table](http://www.aspose.com/docs/display/wordsnet/Table+Members)对象中没有提供类似的东西。

# java - 我什么时候必须用 try/catch 包围？

> ID：16032869
> 
> 赞同：2
> 
> 时间：2013-04-16T09:04:55.570
> 
> 标签：java, eclipse

我有一些代码：

```
public static void a() throws NumberFormatException {
        return;
    }

    public static void b() throws InterruptedException{
        return;
    }

    public static void main(String[] args) {

        a();
        b();

    } 
```

并且 Eclipse 说我必须将 try/catch 包围到函数调用 b()，但我不必使用 a() 调用来做到这一点。为什么？如何使函数 make 在被调用时用 try 和 catch 包围？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T09:07:22.197

Because `InterruptedException` is a checked exception and `NumberFormatException` is an unchecked expcetion.

For checked exception, compiler forces you to either surround them with `try-catch` block or declare them with `throws`, while for unchecked exceptions `try-catch` block is not compulsory.

As function `a()` throws `NumberFormatException` (unchecked exception) compiler do not force you to surround the function call with `try-catch`.

As function `b()` throws `InterruptedException` (checked exception) compiler forces you to either surround the function call with `try-catch` or declare them with `throws`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T09:07:29.430

`NumberFormatException` is not a checked Exception(i.e because it has java.lang.RuntimeException as its base class), which means that the developer is not forced to handle(its the developer's choice whether to handle it or not) when the developer chooses not to handle the exception and if the exception occurs, it will be handled by the JVM.

Where as `InterruptedException` (i.e because it has java.lang.Exception as its base class) is a checked exception which means that the developer has to handle it every time either by using a try-catch block or by declaring the exception in the Throws clause.

Take a look at this [example](http://javarevisited.blogspot.in/2011/12/checked-vs-unchecked-exception-in-java.html).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T09:11:53.960

NumberFormatException 是一个 RuntimeException -> 未选中

InterruptedException 是一个检查异常

我发现 Java 教程对于学习 Java 及其 API 非常有用，事实上，我仍然不时使用它：

[http://docs.oracle.com/javase/tutorial/essential/exceptions/index.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/index.html)

[http://docs.oracle.com/javase/tutorial/](http://docs.oracle.com/javase/tutorial/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T09:07:43.377

This is because `NumberFormatException` extends `RuntimeException` - i.e. it is `unchecked` exception. While `InterruptedException` is `checked` exception - it should be catched in `try...catch` block, or you should add `throws` to `main()` method.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-16T09:08:38.483

因为 NumberFormatException() 是未经检查的异常 InterruptedException 被检查，你必须用 try-catch 来包围检查的异常，但你不必尝试检查 - 每个方法都会有 try-catch。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T09:09:23.530

公共类 InterruptedException 扩展 Exception 在线程等待、休眠或以其他方式被占用时抛出，并且线程在活动之前或期间被中断。有时某个方法可能希望测试当前线程是否已被中断，如果是，则立即抛出此异常。

但对于第一种情况，它不会询问 NumberFormatException 是未经检查的异常。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-16T09:15:35.767

所有`Exception`扩展`RuntimeException`并不意味着明确的 try-catch 块。他们被称为`Unchecked`。这些异常理论上保留给 VM 抛出的不可恢复的运行时错误。然而，它们现在被普遍使用，因为很多人同意说`Checked`异常机制是一个糟糕的设计概念。

`Unchecked`当您的程序无法从错误中恢复并让它们传播到将负责正确记录和/或向用户显示错误的横向层异常处理时，您通常会使用它。

检查异常通常用于调用者需要处理错误的情况，因为它能够从中恢复或触发特定行为。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-16T09:25:43.740

关键字`throws`声明一个方法可能会抛出该异常。虽然已检查的异常必须与未检查的异常一起处理，但这是可选的。在您的情况下，a 抛出一个[NumberFormatException](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/NumberFormatException.html)，它派生自 RuntimeException ，根据定义，这是一个未经检查的异常，请参阅[第 11.2 节：异常的编译时检查](http://docs.oracle.com/javase/specs/#44121)：

> 未经检查的异常类是类 RuntimeException 及其子类，以及类 Error 及其子类。所有其他异常类都是检查异常类。

根据定义，b类抛出的InterruptedException是一个检查异常（必须在try-catch块中捕获）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-16T09:29:03.560

Java中有两种处理异常的方法 -

```
1\. surround try/catch
2\. propagate exeption 
```

如果要在本地处理此异常，请使用 try/catch 块。基本上，`try`块内是有可能引发异常的代码。

但是`throws SomeException`如果您希望这可能`exception`由...处理，您可以在方法签名中使用`calling method`...这`calling method`也可以进一步传播`exception`...如果所有方法都不会`try/catch`出现此异常，它将由`Java Virtual Machine`at抛出`execution time`

# ruby - RVM 安装：`/usr/local/rvm'：权限被拒绝

> ID：16032870
> 
> 赞同：4
> 
> 时间：2013-04-16T09:04:55.963
> 
> 标签：ruby, rvm

```
demas@demas:~$ sudo rm -rf /etc/rvmrc /etc/profile.d/rvm.sh /usr/local/rvm

demas@demas:~$ curl -L https://get.rvm.io | bash -s stable
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   184  100   184    0     0    218      0 --:--:-- --:--:-- --:--:--   308
100 13145  100 13145    0     0  12150      0  0:00:01  0:00:01 --:--:-- 12150
mkdir: cannot create directory `/usr/local/rvm': Permission denied 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-16T10:36:15.163

作为消除此问题的快速变体，您可以创建`rvm`目录并允许每个人写入它：

```
sudo mkdir /usr/local/rvm; sudo chmod a+xwr /usr/local/rvm 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T09:15:50.640

您需要在开始新安装之前清理 shell 环境变量，最简单的方法是注销并重新登录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-15T07:58:19.877

我`sudo`在“|”的右侧添加了 在 bash` 之前，它似乎工作：

```
curl -sSL https://get.rvm.io | sudo bash -s -- --version latest** 
```

结果： 下载[https://github.com/wayneeseguin/rvm/archive/1.26.10.tar.gz](https://github.com/wayneeseguin/rvm/archive/1.26.10.tar.gz)

# google-chrome-extension - 在基于内容脚本的 Chrome 扩展中请求参数

> ID：16032871
> 
> 赞同：0
> 
> 时间：2013-04-16T09:04:55.997
> 
> 标签：google-chrome-extension

我完全没有开发 chrome 扩展的经验，但是为了一些准时的需要，我必须修改现有的扩展，以便要求用户输入套接字的连接端口。

它由一个 manifest json 文件和两个内容脚本组成，其中一个是 jquery 库。我认为这应该很简单，但是经过一些谷歌研究，我找不到我的问题的直接答案。

### 清单.json

```
{
  "name": "MyExtension",
  "version": "1.0",
  "manifest_version": 2,
  "content_scripts": [
    {
      "matches": ["http://myurl.com/"],
      "css": ["style.css"],
      "js": ["jquery-1.7.2.min.js", "script.js"]
    }
  ]
} 
```

### 脚本.js

```
(function() {
    var sock = null;

    function connect() {
        if (sock !== null) {
            return;
        }

        sock = new WebSocket('ws://localhost:1234/'));

        [...]

    }

    [...]

})(); 
```

为了清楚起见，我的目标是用用户通过对话窗口设置的自定义端口替换套接字的“1234”端口。

提前感谢您的帮助，

罗曼·拉罗什

# javascript - 带有“不是”规则的浏览器检查

> ID：16032872
> 
> 赞同：1
> 
> 时间：2013-04-16T09:04:56.327
> 
> 标签：javascript, jquery, internet-explorer

我有这个工作代码

```
if ($.browser.msie && parseInt($.browser.version, 10) < 9){
}
else{
    $('.insert_checkpassword').toggle($('#password').val().length > 0);
} 
```

可以做得更小吗？

我想对所有浏览器执行此代码，但不是更小的版本 9

像这样

```
if IS NOT ($.browser.msie && parseInt($.browser.version, 10) < 9){
    $('.insert_checkpassword').toggle($('#password').val().length > 0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:07:20.297

You need to use [**logical not operator**](http://www.ecma-international.org/ecma-262/5.1/#sec-11.4.9) `!`, you can read more about logical operators [here](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators).

```
if (!( $.browser.msie && parseInt($.browser.version, 10) < 9)){
    $('.insert_checkpassword').toggle($('#password').val().length > 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:07:54.370

This would do it:

```
if (!$.browser.msie || parseInt($.browser.version, 10) >= 9) {
    $('.insert_checkpassword').toggle($('#password').val().length > 0);
} 
```

Note that `$.browser` is deprecated and shouldn't be relied upon.

# perl - 在 Perl 退出时避免只读 forked() RAM 分配

> ID：16032873
> 
> 赞同：3
> 
> 时间：2013-04-16T09:04:58.137
> 
> 标签：perl, memory, fork, copy-on-write

在 Perl 中，我生成了一个巨大的只读数据结构，然后`fork()`.

这是为了在分叉时利用 RSS 页面上的 COW。它工作得非常好，但是当一个子进程退出时，它会在死亡之前从 itelf 分配所有 RAM。

**有没有办法避免这种无用的分配？**

这是显示该问题的示例 Perl 代码。

```
#! /usr/bin/perl
my $a = [];
# Allocate 100 MiB
for my $i (1 .. 100000) {
        push @$a, "x" x 1024;
}
# Fork 10 other process
for my $j (1 .. 10) {
        last unless fork();
}
# Sleep for a while to be able to see the RSS
sleep(5); 
```

在示例`vmstat`输出中，我们可以看到它首先只分配了 100MiB，然后在第一次睡眠后它分配了一小段时间，然后全部释放。

```
procs -----------memory---------- ---swap-- -----io---- --system-- -----cpu------
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
 0  0      0 1329660  80596  86936    0    0    21    18  160   25  0  0 100  0  0
 1  0      0 1328048  80596  86936    0    0     0     0 1013   44  0  0 100  0  0
 0  0      0 1223888  80596  86936    0    0     0     0 1028   76 11  5 84  0  0
 0  0      0 1223888  80596  86936    0    0     0     0 1010   40  0  0 100  0  0
 0  0      0 1223888  80596  86936    0    0     0     0 1026   54  0  0 100  0  0
 0  0      0 1223888  80596  86936    0    0     0     0 1006   39  0  0 100  0  0
13  0      0 741156  80596  86936    0    0     0     0 1012   66 13 58 28  0  0
 0  0      0 1329288  80596  86936    0    0     0     0 1032   60  0  0 100  0  0 
```

*注意：这似乎不是 Perl 版本特定的问题。当我测试 5.8.8、5.10.1 和 5.14.2 时，它们都表现出这种行为。*

**更新：**

正如@choroba 在评论中所问的那样，我也尝试`undef`了数据结构，但似乎它在分配 RAM 时触发了内存接触。

您可以在第一个脚本的末尾添加以下代码段。

```
# Unallocate $a
undef $a;
# Sleep for a while to be able to see the RSS
sleep(5); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:20:39.443

实际上，正如我自己发现的那样，这种行为是一种**特性**，答案就在[Perl 文档](http://perldoc.perl.org/functions/exit.html "在 perl 中退出")中：

> 该`exit()`函数并不总是立即退出。同样，任何需要调用的对象析构函数都会在真正退出之前调用。如果这是一个问题，你可以调用`POSIX::_exit($status)`来避免`END`和析构函数处理。

事实上，在原始代码示例的末尾添加它确实可以避免这种行为。

```
# XXX - To be added just before ending the process
# Use POSIX::_exit($status) to end without allocating copy-on-write RAM
use POSIX;
POSIX::_exit(0); 
```

*注意：为此，孩子也必须在数据结构超出范围之前退出。*

# wpf - 如何通过命令参数传递整个当前视图

> ID：16032876
> 
> 赞同：0
> 
> 时间：2013-04-16T09:05:09.043
> 
> 标签：wpf

我有一个用户控件，并在该用户控件中控制一个按钮。

单击该按钮时，我需要通过命令参数传递整个视图。

如何通过命令参数传递视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:08:41.730

如果我记得正确的方法（并且您想绑定到当前的 Window 实例），它应该是

```
CommandParameter="{Binding RelativeSource={RelativeSource AncestorType={x:Type Window}}}" 
```

请参阅：[如何将 WPF 绑定与 RelativeSource 结合使用？](https://stackoverflow.com/questions/84278/how-do-i-use-wpf-bindings-with-relativesource)

# html - 使用 HTML 表格，如何使第一列固定宽度，第二列和第三列剩余宽度各 50%

> ID：16032878
> 
> 赞同：1
> 
> 时间：2013-04-16T09:05:18.467
> 
> 标签：html, css

所以想象我有一个 100px 宽的空间，它可以改变。我想将表格的第一列固定为 30 像素，第二列和第三列我想将剩余宽度（70 像素）各占 50%，使它们各为 35 像素。

所以当空间的宽度变为 300px 时，列宽将是 30px、135px、135px（其中 135px 是 270px 除以 2 即 50%）。

这是我的尝试，但不起作用：

```
<table width="100%" >
                    <tr>
                        <td width="30px"> </td>
                        <td align="center" width="25%"></td>
                        <td align="center" width="25%"></td>
                    </tr>
 </table> 
```

我尝试过其他各种方法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:19:00.443

尝试这个：

```
<table width="100%" >
    <tr>
        <td width="30px" bgcolor="red"></td>
        <td align="center" bgcolor="blue"></td>
        <td align="center" bgcolor="green"></td>
    </tr>
</table> 
```

**[小提琴](http://jsfiddle.net/236Lu/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:14:34.453

以 px 为单位设置表格的宽度，然后以 % 为单位设置 tds 的大小。

在此示例中，您需要 60 像素的总宽度。

```
<table width="60px" >
                    <tr>
                        <td width="50%"> </td>
                        <td align="center" width="25%"></td>
                        <td align="center" width="25%"></td>
                    </tr>
</table> 
```

# javascript - .js 脚本没有响应

> ID：16032882
> 
> 赞同：0
> 
> 时间：2013-04-16T09:05:39.453
> 
> 标签：javascript, html, css, coda

所有这一切都是新手，并试图让我的 .js 脚本在 Coda2 中工作。如果有人知道为什么 .js 脚本文件没有响应，那就太好了！

先感谢您！

```
<!DOCTYPE html>
<html>
<head>
    <title>Button Magic</title>
    <link rel='stylesheet' type='text/css' href='stylesheet.css' />
    <script type= 'text/javascript' src='//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js'></script>
    <script type= 'text/javascript' src='script.js'></script>
</head>
<body>
    <div><br/><strong>Click Me!</strong></div>
</body> 
```

在脚本中：

```
$(document).ready(function() {
$('div').mouseenter(function() {
    $('div').fadeTo('fast',1);
});
$('div').mouseleave(function(){
    $('div').fadeTo('fast',0.5);
}); 
```

});

请在此处找到我的代码的图像：

[http://postimg.org/image/qis0sitd1/](http://postimg.org/image/qis0sitd1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:07:01.910

You haven't added a script tag to include jQuery.

```
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.js' type='text/javascript'></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:12:37.183

您必须包含 jQuery 库。您可以为此使用[Google CDN](https://developers.google.com/speed/libraries/devguide)：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Button Magic</title>
        <link rel='stylesheet' type='text/css' href='stylesheet.css' />
        <script type= 'text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js'></script>
        <script type= 'text/javascript' src='script.js'></script>
    </head>
    <body>
        <div><br/><strong>Click Me!</strong></div>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T09:10:45.557

您还没有包含 Jquery 库，请包含一个。

例如：[http ://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js)

# java - 如何在 Unix 中使用 rpm 文件安装 java

> ID：16032886
> 
> 赞同：1
> 
> 时间：2013-04-16T09:05:52.033
> 
> 标签：java, bash, unix

我已将 JDK 7 rpm 文件下载到我的 64 位 Unix 机器中，并尝试使用以下命令安装 Java：

```
rpm -ivh jdk-7u17-linux-x64.rpm 
```

但我收到此错误：

```
error: can't create transaction lock on /var/lib/rpm/.rpm.lock (Permission denied) 
```

请帮助我如何在我的 Unix 机器中安装 Java。我正在使用 bash shell，我也没有 root 凭据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:11:44.360

尝试使用 sudo 命令

`sudo rpm -ivh jdk-7u17-linux-x64.rpm`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:12:26.597

如果您在 sudoers 列表中，请尝试`sudo rpm -ivh jdk-7u17-linux-x64.rpm`. 如果你不这样做，那么系统管理员就是你的救星。

# knockout.js - 淘汰赛选择更改和json

> ID：16032887
> 
> 赞同：0
> 
> 时间：2013-04-16T09:05:58.370
> 
> 标签：knockout.js

我的 json 数据是

```
{"person":
        [
        {"Name":"Name1",
        "City":"1",
        "PostCode":1234
        },
        {"Name":"Name2",
        "City":"2",
        "PostCode":12
        }]
} 
```

我的用户界面是，

```
<tbody id="container" data-bind="foreach: person">

                        <tr>
                            <td>
                                <input id="Name" style="width: 100px" type="text" data-bind="value:Name" class="dynamic" />
                            </td>
                            <td>
                                <select id="City" style="width: 100px" data-bind="value: City" class="dynamic" >                            
                                    <option value="0">NY</option>
                                    <option value="1">NJ</option>
                                    <option value="2">CA</option>                                 
                                </select>
                            </td>
                            <td>
                                <input id="PostCode" disabled="disabled" style="width: 100px" type="text" data-bind="value: PostCode, enable: City() == '0' || City() == '1'"" class="dynamic"/>
                            </td> 
```

```
<select id="City" style="width: 100px" data-bind="value: County" class="dynamic" >                            
                                <option value="0">Test0</option>
                                <option value="1">Test1</option>
                                <option value="2">Test2</option>                                 
                            </select>
                               </td>
                        </tr>
                    </tbody> 
```

我的视图模型是，

```
 <script type="text/javascript">
  var jsonData = {};
    $.getJSON("test.json", function (data) {
        jsonData = ko.mapping.fromJS(data);       
        ko.applyBindings(jsonData);
    }
);
</script> 
```

我需要做的是，当我更改下拉文本时，我必须根据所选城市更改我的县下拉列表。**我的下拉文本不是来自我的 json**。我尝试使用“订阅”选项。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:22:28.317

您可以在邮政编码文本框上使用*启用*绑定，例如：

```
<td>
     <input id="PostCode" disabled="disabled" style="width: 100px" type="text" 
      data-bind="
          value: PostCode, 
          enable: City() == '1' || City() == '2'" 
     class="dynamic"/>
</td> 
```

# php - Symfony 2 用户认证

> ID：16032888
> 
> 赞同：0
> 
> 时间：2013-04-16T09:05:59.093
> 
> 标签：php, symfony

在我的网站中，我根据文档实现了用户身份验证。我想知道的是如何在 15 分钟不活动后自动断开用户的连接。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:10:51.867

如此处所述，[以下](https://stackoverflow.com/questions/10330865/how-to-set-expiration-time-to-session-in-the-controller)代码段应带您实现目标：

```
$session->start();

if (time() - $session->getMetadataBag()->getCreated() > $maxTime) {
  $session->invalidate();
  throw new SessionExpired(); // redirect to expired session page
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:09:30.140

您可以设置会话超时来建立这样的功能。请参阅[如何在控制器中为会话设置过期时间？](https://stackoverflow.com/questions/10330865/how-to-set-expiration-time-to-session-in-the-controller)这将在 15 分钟不活动后第一次单击结束用户的会话，并将他重定向到登录页面。

也可以自动断开连接，例如在 15 分钟不活动后（通过 javascript）重定向到注销 url。

# javascript - Removing row refresh page jquery

> ID：16032892
> 
> 赞同：1
> 
> 时间：2013-04-16T09:06:06.410
> 
> 标签：javascript, jquery

I am facing an issue with my jquery. I have used jQuery to add controls to table, along with a remove button to remove that particular row in table. here is my code on how i am creating controls in table.

**HTML**

```
<table id="controls" cellpadding="10" cellspacing="10">
</table>
<input id="btnAdd" type="button" value="Add" /> 
```

my jquery code looks like this

**jquery**

```
$(document).ready(function() {
            $("#btnAdd").click(function() {
        var field = $("#field").val();
                var year = new Date().getFullYear()
                var DDL_fromProfession = "<select name='ParametersFromProf' id='DDL_FromProYear'>";
                for (var i = 1950; i <= year; i++) {
                    DDL_fromProfession += "<option text='" + i + "' value='" + i + "'>" + i + "</option>";
                }
                DDL_fromProfession += "</select>";
                var DDL_ToProfession = "<select name='ParametersToProf'  id='DDL_ToProYear'>";
                for (var i = 1950; i <= year; i++) {
                    DDL_ToProfession += "<option text='" + i + "' value='" + i + "'>" + i + "</option>";
                }
                DDL_ToProfession += "</select>";

                var newRow1 = "<tr><td align='center' style='font-size: large; color: #212121;' height='35px'>from"
                 + DDL_fromProfession + " to " + DDL_ToProfession + "</td></tr>"
                 + "<tr><td align='center' style='font-size:large;color:#212121;' height'35px'>"
                 + "<input type='checkbox' name='chkbx_CurrPro' value='" + k + "'>I currently work here</input>";
                newRow1 += "<br/><button id='btn_rmv'>Remove</button>";

                var input = "<input name='parameters' id='field' type='text' />";
                var input1 = "<input name='parametersCompany' id='field' type='text'/>"

                //var inputCurrent="<input name='Current' id='Currfield' type='hidden'/>"

                var newRow = "<tr><td align='center' style='font-size: x-large; color: #212121;' height='35px'>"
                 + input + " at " + input1 + "</td></tr>";
                $('#controls').append(newRow);
                $('#controls').append(newRow1);
            });
        }); 
```

to remove last row i am using. **jquery**

```
$(document).ready(function() {

            $("#controls").delegate("#btn_rmv", "click", function() {
                $(this).closest("tr").remove();
                return false;
            });
        }); 
```

clicking on remove button refresh the page and remove all the rows that i have added instead of last one. NOTE: What i ahve digged out is `.delegate` is server side and it refresh the page. i am unable to remove last row with `$("#btn_rmv").click(function()` on my page

Please point me to right direction. Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:26:15.233

我有类似的经历：我使用的是谷歌浏览器，每次调用函数时它都会刷新页面。您将不得不返回 false。我的问题是当我使用“onclick”从元素调用函数时。当我从 onclick 调用该函数时，我必须包含“return false;”：

```
onclick="return false; functionName()" 
```

试试这个，看看它是否有效：

```
$(document).ready(function() {
    $("#btnAdd").click(function() {
        /* YOUR CODE */

        return false;
    });
}); 
```

或者这个，看看它是否有效：

```
$(document).ready(function() {
    $("#btnAdd").click(function() {
        /* YOUR CODE */            
    });

    return false;
}); 
```

抱歉，我的 Javascript 不是很好 :(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:49:57.753

有问题的代码不起作用`k`，因为未定义，如行中使用的那样

```
value='" + k + "' 
```

如果此错误得到纠正，那么下一个问题是您正在创建多个相同的元素`id`，如此处所示

```
newRow1 += "<br/><button id='btn_rmv'>Remove</button>"; 
```

这在无效的 HTML 中会导致 jQuery 在查找具有*唯一* `id`性的元素时出现问题。

通过更改`k`for`0`并将其更改`id`为 a `class`，*删除*代码将**仅**删除按钮打开的*当前行*。我假设您确实想删除该行以及前 2 行。

```
$('#controls').delegate('.btn_rmv', 'click', function() {
    var index = $(this).closest('tr').index() + 1 // as nth-child is 1-based indexing
    $('#controls tr:nth-child(n+' + (index - 2) + '):nth-child(-n+' + index + ')').remove(); // remove 3 rows
    return false
}); 
```

[**看演示**](http://jsfiddle.net/5VudB/)

请注意，自 jQuery 1.7 以来，[`.delegate()`](http://api.jquery.com/delegate/)已被取代，[`.on()`](http://api.jquery.com/on/)因此更新后的函数为：

```
$('#controls').on('click', '.btn_rmv', function() {
    var index = $(this).closest('tr').index() + 1
    $('#controls tr:nth-child(n+' + (index - 2) + '):nth-child(-n+' + index + ')').remove();
    return false
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T09:27:50.460

你可以这样做..

```
 var RowCount = 0;

    $(document).ready(function() {

        $("#btnAdd").click(function() {
            RowCount = RowCount + 1;

            var newRow1 = "<tr id='tr" + RowCount + "'><td align='center' style='font-size: large; color: #212121;' height='35px'>from"
             + DDL_fromProfession + " to " + DDL_ToProfession + "</td></tr>"
             + "<tr><td align='center' style='font-size:large;color:#212121;' height'35px'>"
             + "<input type='checkbox' name='chkbx_CurrPro' value='" + k + "'>I currently work here</input>";

            newRow1 += "<br/><button id='btn_rmv' onclick='RemoveRow(" + RowCount + ")'>Remove</button>";
        });

    });

    function RemoveRow(RowID) {
        $('#RemoveRow' + RowID).remove();
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T09:28:24.940

看起来您正在将删除单击处理程序连接到`$(document).ready`.

在 document.ready 上，移除按钮尚不存在（因为它们是在 document.ready 代码运行后单击“添加”时动态生成的）。这就是为什么`$("#btn_rmv").click(function()...`不工作。

因此，在`$("#btnAdd").click`事件中动态插入删除按钮后，您必须明确地向其添加点击处理程序。

编辑：

如果您生成具有唯一 id 的删除按钮（例如 btn_rmv_1、btn_rmv_2 等），您可以将以下内容添加到您的添加处理程序（在将新按钮附加到 DOM 之后）：

```
$('#btn_rmv_1').click(removeButtonFunction); 
```

# java - invoking java scriptlet in JSP using HTML

> ID：16032899
> 
> 赞同：1
> 
> 时间：2013-04-16T09:06:25.517
> 
> 标签：java, jsp, servlets, scriptlet

I am trying to find a way to invoke a piece of `java code` within the JSP using HTML form

```
 <form method="get" action="invokeMe()">

       <input type="submit" value="click to submit" />

  </form>

  <%
     private void invokeMe(){
       out.println("He invoked me. I am happy!");   
     }
  %> 
```

the above code is within the JSP. I want this run the scriptlet upon submit

I know the code looks very bad, but I just want to grasp the concept... and how to go about it.

thanks

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T09:49:46.277

您可以使用*Ajax*将表单提交给**servlet**并评估 java 代码，但要留在同一个窗口中。

```
<form method="get" action="invokeMe()" id="submit">

       <input type="submit" value="click to submit" />

</form>

<script>
    $(document).ready(function() {
        $("#submit").submit(function(event) {
            $.ajax({
                type : "POST",
                url : "your servlet here(for example: DeleteUser)",
                data : "id=" + id,
                success : function() {
                    alert("message");
                }
            });
            $('#submit').submit(); // if you want to submit form
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T09:17:22.870

对不起，**不可能。**

Jsp 躺在 `server`一边并`html`继续播放，`client side`除非不做 a`request`你不能这样做:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T09:19:17.363

你不能写`java method`in `scriptlet`。因为在`compilation`时间 code in`scriptlet`成为`service`方法的一部分。因此，方法中的方法是错误的。

您可以如何在下面的代码中编写`java methods`和调用`init tag`。`scriptlet`

```
<form method="get" action="">

       <input type="submit" value="click to submit" />

  </form>

    <%
        invokeMe();

     %>

  <%!
       private void invokeMe(){
       out.println("He invoked me. I am happy!");   
     }
   %> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T09:41:15.560

不可能。提交表单后，它会向服务器发送请求。您有 2 个选项：

让服务器在收到表单发送的请求时执行所需的操作

或者

使用 Javascript 在客户端上执行所需的操作：

```
 <form name="frm1" action="submit" onsubmit="invokeMe()"
 ...
 </form>

 <script>
 function invokeMe()
 {
 alert("He invoked me. I am happy!")
 }
 </script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T09:12:25.190

您不能这样做，因为 JSP 呈现发生在服务器端，而客户端永远不会`invokeMe()`在返回的 HTML 中接收 Java 代码（即函数）。无论如何，它不知道在运行时如何处理 Java 代码！

更重要的是，`<form>`标签不*调用函数*，它向属性中`form`指定的 URL发送 HTTP 。`action`

# android - 如何为图像设置匹配父级、包装内容、水平滚动

> ID：16032907
> 
> 赞同：0
> 
> 时间：2013-04-16T09:06:40.683
> 
> 标签：android, html, css, cordova

我想了解这些功能，以便在 Eclipse 的 html 文件中为 Phonegap android 实现它。

**匹配父母/包装内容**

我不知道如何给出 MATCH PARENT / WRAP CONTENT，所以我给出了以下 2 种方式

```
<div id="container" style="width:315px height:150px"> 
```

或者当我给

```
<div id="container" > 
```

我面临的问题是当我没有给出任何宽度时..这个元素是一个图像，它会一直持续到测量结束/最大限制。

**DIV 元素之间的空间以及每个元素左侧和顶部可见的空间**

当我给出以下信息时，视图的左侧和顶部有一个间隙

```
<div id="wrapper" style="width: 100%; float: left; margin: 0px; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px;"> 
```

**水平滚动视图**

对于我给的**水平滚动视图**

```
 div#main
        {  //background-image:url('img/image1.png');
           position:absolute;
           top:40%;
           margin-top:-50px;
        } 
```

当我们滚动图像时，背景也会滚动......但是，虽然我希望图像单独滚动机器人背景......

**我该怎么办？**

所以，请帮助我在 HTML()中设置**MATCH PARENT、WRAP CONTENT 和水平滚动视图？**

**编辑：建议后的代码**

```
<div id="wrapper" style="width: 100%; float: left;padding:0px; margin:0px;">
        <div id="container" style="padding:0px; margin:0px;">

        <div id="head" style="background-image:url(mdpi/purple_navigation.png);"></div>
        <h1 style=" margin-left:0px; margin-top:0px;  padding:0px; margin:0px;"> ABC</h1></div>

        <div id="wrapper" style="padding:0px; margin:0px;">
        <div id="images"  style="padding:0px; margin:0px;">
        <marquee direction="left" behavior="alternate" scrolldelay="3" width="100% padding:0px; margin:0px;"><img src="mdpi/banner1.png"/><img src="mdpi/banner2.png"/><img src="mdpi/banner3.png"/><img src="mdpi/banner4.png"/><img src="mdpi/banner5.png"/></marquee> 
        </div>

        <div id="title" style="padding:0px; margin:0px;"><h1>title</h1></div>
        <div id="desc" style="padding:0px; margin:0px;"><p>description </p></div>
        </div>

</div>

</body> 
```

**更改前** ![更改前](https://i.stack.imgur.com/uUg4I.png)

**更改后** ![更改后](https://i.stack.imgur.com/a1j4O.png)

## **我应该如何将标题中的文本（ABC/标题）带到中心？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:10:03.633

要使标题的文本居中，您所要做的就是添加`text-align:center;`到该 div。

另外，我在这个[fiddle](http://jsfiddle.net/vTSmt/36/)中改变了一些东西。

这是您想要的结果，只是没有背景颜色吗？

我所做的更改是我将 div 移动`#description` `div`并添加了样式到其他一些 div。

> 如果您有任何其他问题，或者这对您不起作用，请告诉我。

***希望这是令人满意的:)***

# php - OpenCart: How to disable province display on the invoice?

> ID：16032913
> 
> 赞同：1
> 
> 时间：2013-04-16T09:06:48.543
> 
> 标签：php, html, templates, opencart, shopping-cart

Although we have provinces in the Netherlands we do not use them in an address (postcode is the most important thing with us). For this reason I disabled the province in the OpenCart checkout process. It still displays however on the invoice I print out, and since no province is filled in, the first province on the list is standard displayed, which is often the wrong one. For this reason I want to take away the province from the OpenCart invoice.

So I opened `admin/view/template/sale/order_invoice.tpl` and searched for the relevant part. Unfortunately, the address is referred to as `$order['payment_address']` and `$order['shipping_address']`. Somehow, that code prints out the address including breaklines (`<br />`).

My question is now: how do I disable just the province in the customer address displayed on the invoice?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:22:26.087

还打开控制器类`admin/controller/sale/order.php`并检查填充 和 的相关部分`$order['payment_address']`并`$order['shipping_address']`注释掉适当的行（*省*被添加到字符串/数组的位置）。

同样的事情也应该在前端完成 - `catalog/controller/account/order.php`.

应该是这样的：

```
$find = array(
    '{firstname}',
    '{lastname}',
    '{company}',
    '{address_1}',
    '{address_2}',
    '{city}',
    '{postcode}',
    //'{zone}',
    //'{zone_code}',
    '{country}'
);

$replace = array(
    'firstname' => $order_info['payment_firstname'],
    'lastname'  => $order_info['payment_lastname'],
    'company'   => $order_info['payment_company'],
    'address_1' => $order_info['payment_address_1'],
    'address_2' => $order_info['payment_address_2'],
    'city'      => $order_info['payment_city'],
    'postcode'  => $order_info['payment_postcode'],
    //'zone'      => $order_info['payment_zone'],
    //'zone_code' => $order_info['payment_zone_code'],
    'country'   => $order_info['payment_country']  
); 
```

您可能还必须将格式行从

```
$format = '{firstname} {lastname}' . "\n" . '{company}' . "\n" . '{address_1}' . "\n" . '{address_2}' . "\n" . '{city} {postcode}' . "\n" . '{zone}' . "\n" . '{country}'; 
```

到（见`/*`和`*/`评论）：

```
$format = '{firstname} {lastname}' . "\n" . '{company}' . "\n" . '{address_1}' . "\n" . '{address_2}' . "\n" . '{city} {postcode}' /*. "\n" . '{zone}'*/ . "\n" . '{country}'; 
```

**到评论：**

现在我不确定，地址格式有可能在创建后存储在订单中。在这种情况下，将控制器中的相应行更改为：

```
/*if ($order_info['payment_address_format']) { // <-- same for $order_info['shipping_address_format']
    $format = $order_info['payment_address_format'];
} else {
    $format = '{firstname} {lastname}' . "\n" . '{company}' . "\n" . '{address_1}' . "\n" . '{address_2}' . "\n" . '{city} {postcode}' . "\n" . '{zone}' . "\n" . '{country}';
}*/

$format = '{firstname} {lastname}' . "\n" . '{company}' . "\n" . '{address_1}' . "\n" . '{address_2}' . "\n" . '{city} {postcode}' /*. "\n" . '{zone}'*/ . "\n" . '{country}'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-18T09:22:46.967

对我来说，这个解决方案有效：

编辑：`admin/controller/sale/order.php`

```
$replace = array(
                'firstname' => $order_info['shipping_firstname'],
                'lastname'  => $order_info['shipping_lastname'],
                'company'   => $order_info['shipping_company'],
                'address_1' => $order_info['shipping_address_1'],
                'address_2' => $order_info['shipping_address_2'],
                'city'      => $order_info['shipping_city'],
                'postcode'  => $order_info['shipping_postcode'],
                //'zone'      => $order_info['shipping_zone'],
                //'zone_code' => $order_info['shipping_zone_code'],
                'zone'      => '',
                'zone_code' => '',
                'country'   => $order_info['shipping_country'] 
```

首先它不起作用，我认为这是缓存问题并清除所有缓存，但它不起作用。然后我搜索了请求`order_invoice`，这也用于`/system/storage/modification/admin/controller/sale`. 清除修改缓存后，它起作用了！

# java - Force reload of data for excel report

> ID：16032924
> 
> 赞同：0
> 
> 时间：2013-04-16T09:07:16.327
> 
> 标签：java, ajax, excel, jsp, displaytag

I use displaytag to show data in a table with an excel report. Every row has an checkbox that when clicked changes a flag in the database for that row. This is handled by Ajax. So when I select/unselect the checkbox Ajax updates a column in the database and the checkbox state is preserved in the html.

The problem is that when I change a state of couple of checkboxes the changes are not reflected in the excel report because it seems to use the data which have been uploaded at the beginning.

The question is:

Is it possible to force reload of data from the database for the excel report to have the fresh data in the report?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:11:44.073

XLloop 将为您提供帮助。
这是一个用于在集中式服务器（函数服务器）上实现 Excel 用户定义函数 (UDF) 的开源框架。
请在[此处查看详细信息。](http://xlloop.sourceforge.net/)

**它具有以下特点：**

可扩展的 Java 服务器框架。
用许多其他语言编写的本机服务器框架（请参阅语言部分）。
长时间运行操作的弹出窗口（带有取消选项）
支持通过 JXLL 托管 C++ XLL。
基于反射的函数适配器，用于极快地部署 java 方法。
Bean 脚本框架适配器，因此可以用任何 BSF 支持的语言（例如 Ruby、Python、Javascript）编写函数。
Lisp 函数处理程序，用于动态评估 Lisp 表达式。
无需重新启动即可将函数动态添加到 Excel。
函数可以注册为 Excel 函数（带有帮助信息）。
具有多服务器故障转移/可扩展性的快速二进制协议。
JSON over HTTP(S) 协议。
新：可以配置为连接到多个功能服务器（提供者）。

# primefaces - how to get the database values by using hibernate and how to display that values in a primefaces dataTable?

> ID：16032928
> 
> 赞同：-1
> 
> 时间：2013-04-16T09:07:24.210
> 
> 标签：primefaces

Here i have some doubts.If you know the answer please post here.

How to get the list of values into database table by using hibernate?

How to display that values into primefaces dataTable?

Here i am posting what i am trying .see below

```
 <p:dataTable id="users" value="#{user.listUsers}" var="user"
        sortBy="user.id" rows="10" style="width: 30%">

        <p:column>

            <f:facet name="header">

                <h:outputText value="ID" />

            </f:facet>

            <h:outputText value="#{user.id}" />

        </p:column>

        <p:column>

            <f:facet name="header">

                <h:outputText value="Name" />

            </f:facet>

            <h:outputText value="#{user.name}" />

        </p:column>

        <p:column>

            <f:facet name="header">

                <h:outputText value="Surname" />

            </f:facet>

            <h:outputText value="#{user.surName}" />

        </p:column>

    </p:dataTable> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:58:43.833

在这里，我找到了如何将表值显示到 primefaces 数据表中的答案。

在这里，我正在放置我正在尝试的代码。

```
<p:dataTable value="#{actions.messages}" var="act">
                        <p:column style="width:10%;text-align:left" filterBy="#{act.id}" >
                            <f:facet name="header">
                                <h:outputText value="ID" id="id" />
                            </f:facet>
                            <h:outputText value="#{act.id}" />
                        </p:column>

                        <p:column style="width:20%;text-align:left"
                            sortBy="#{act.action}">
                            <f:facet name="header">
                                <h:outputText value="Customer" id="customer" />
                            </f:facet>
                            <h:outputText value="#{act.action}" />
                        </p:column>

                        <p:column style="width:40%;text-align:left"
                            sortBy="#{act.scheduled}">
                            <f:facet name="header">
                                <h:outputText value="Date" />
                            </f:facet>
                            <h:outputText value="#{act.scheduled}" />
                        </p:column>

                        <p:column style="width:30%;text-align:left"
                            sortBy="#{act.status}">
                            <f:facet name="header">
                                <h:outputText value="Action" />
                            </f:facet>
                            <h:outputText value="#{act.status}" />
                        </p:column>
                    </p:dataTable> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:03:08.513

这是我正在开发的名为 Actions 的 bean 类。

@ManagedBean(name = "actions", eager = true)

@SessionScoped

公共类动作实现可序列化{

```
private static final long serialVersionUID = 1L;

private int id;

private String action;

private String assignedTo;

private String assignedBy;

private Date scheduled;

private Date actual;

private String outcome;

private String status; 
```

//这里写上面属性的setter&getter方法

```
public ArrayList<Actions> getMessages() {
    ActionsDao dao = new ActionsDao();
    return dao.getActions();

} 
```

}

您可以使用您选择的注释或 hbm 文件来映射 bean 类。

在这里我只使用映射文件，原因是，首先我试图创建注释，但它提出了一些问题，即 jar 文件存在问题。您使用正确的 jar 文件不是问题，您可以继续注释，否则最好使用 hbm 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T06:06:32.123

这是名为 ActionsDao 的休眠 dao 类名

```
public class ActionsDao {
public Session session;

public ArrayList<Actions> getActions() {

    session = Util.getSessionFactory().openSession();

    Transaction tx = session.beginTransaction();

    try {
        @SuppressWarnings("unchecked")
        ArrayList<Actions> actionsList = (ArrayList<Actions>) session
                .createQuery("from Actions").list();

        tx.commit();
        boolean found = false;

        for (Actions actions : actionsList) {

            Actions action = new Actions();
            action.setId(actions.getId());
            action.setAction(actions.getAction());
            action.setActual(actions.getActual());
            action.setAssignedBy(actions.getAssignedBy());
            action.setAssignedTo(actions.getAssignedTo());
            action.setScheduled(actions.getScheduled());
            action.setOutcome(actions.getOutcome());
            action.setStatus(actions.getStatus());

            actionsList.contains(action);

            found = true;

        }
        if (found) {
            return actionsList;
        } else {
            return null;
        }
    } catch (Exception e) {
        System.out.println("Error In getActions() -->" + e.getMessage());
        return (null);
    } finally {
        session.close();
    }

} 
```

}

# c# - How can I handle an interface method that may or may not be async?

> ID：16032932
> 
> 赞同：7
> 
> 时间：2013-04-16T09:07:33.120
> 
> 标签：c#, asynchronous, windows-runtime, c#-5.0, async-await

I am attempting to create a serialization interface (similar to Cocoa's `NSCoding` protocol) so that I can get a quick binary representation of a class to send across a network or store in a database. However, some cases (especially involving image encoding) have many async-only methods that require `await`ing. However, if the bytes do not get written in order then of course the whole representation is corrupted. I must make sure that the current object is finished serializing before I continue to the next object. Here is the main loop of what I am doing.

```
 public async static Task<byte[]> Serialize(this IList<ISerializable> list) {
        using (Archiver archiver = new Archiver()) {
            archiver.Write(list.Count);
            foreach (ISerializable value in list) {
                await archiver.Write(value);
            }
            return archiver.Result;
        }
    } 
```

`Archiver` just uses `MemoryStream` and `BitmapWriter` under the hood to write either values that `BinaryWriter` can accept directly, or `ISerializable` objects, and then spits out the result as a byte array. `ISerializable` is just an interface with two methods (`Serialize` and `Deserialize`). They both return `Task` so that they can be `await`ed. The problem is when I have a serialization method that doesn't have any async components. I can do one of two things:

A) I can tack on `async` to that class's serialization methods anyway and put up with the compiler warning saying that it will execute synchronously (I don't like to have compiler warnings).

B) Manually return an empty task at the end of the method (`return Task.Run(() => {});`). However, this looks and smells really weird.

Both A and B seem to execute without a problem, but are there any problems with this approach that I may have missed? I am not aware of a binary serializer in Windows Runtime (I included the tag just to dispel any confusion). Perhaps there is an option C that I can consider? Actually I didn't want to make the serialization methods async, but for some reason `task.Wait()` was not waiting, and I was getting a null reference exception from trying to use an object created with `CreateAsync` before it was ready.

**EDIT** I thought of an option C. I could just wrap the entire method in an `await Task.Run(...)` call. Would this be normal?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T12:10:13.727

我认为这里最好的解决方案，假设您要同步执行该方法是正常编写它，除非您将`Task`在方法结束时返回一个完成。

要获得`Task`具有某些特定值的完成，您可以使用[`Task.FromResult()`](http://msdn.microsoft.com/en-us/library/hh194922.aspx).

如果您想要 a`Task`没有值（即实际上只是`Task`，而不是`Task<TResult>`），您可以使用例如`Task.FromResult(true)`（这是 a `Task<bool>`）并将其隐式转换为`Task`。

# c - Mysterious Memory Limit Exceeded; Segmentation Fault error on sieve of Eratosthenes algorithm

> ID：16032938
> 
> 赞同：-3
> 
> 时间：2013-04-16T09:07:55.650
> 
> 标签：c, segmentation-fault

So, segmentation fault, or memory limit exceeded error occurs when, program tries to access memory out of program stack or you have no more memory left to be allocated to the program.

Edit: When I wrote this question, I was unaware about debugger in programming language. But now that I know, this program runs and all the memory of arrays are allocated in the start of the program.

So my question:

Why this C code is giving segmentation fault error? This code is the implementation of sieve of Eratosthenes.

```
#include <stdio.h>

#define LIMIT   10000000
#define PRIMES  700000
int is_prime[LIMIT];
int prime[PRIMES];

main()
{
    int i, j;
    for (i = 0; i < LIMIT; i++)
        is_prime[i] = 1;
    is_prime[0] = is_prime[1] = 0;
    for (i = 0; i < LIMIT; i++)
        if (is_prime[i])
            for (j = i*i; j < LIMIT; j += i)
                is_prime[j] = 0;

    j = 0;
    for (i = 0; i < LIMIT && j < PRIMES; i++)
        if (is_prime[i])
            prime[j++] = i;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:10:38.513

```
 for (j = i*i; j < LIMIT; j += i) 
```

那里的`i*i`in 可能溢出，导致很大的*负数*。这使得后续`is_prime[j]`访问数组超出范围。那应该是：

```
 for (j = i+i; j < LIMIT; j += i) 
```

# android - Need to access AsyncTask value in Main Class

> ID：16032939
> 
> 赞同：0
> 
> 时间：2013-04-16T09:07:56.680
> 
> 标签：android, android-asynctask

I am facing an issue in Async task, can anyone please suggest me any solution.
I have downloaded this example from this link :
[Source](http://www.aliexpress.com/item/10-1-inch-hdmi-input-lcd-monitor-12V/720526553.html)

My Current Structure is

*   Main Class extends MyTask and implements AsyncTaskCompleteListener interface.
*   AsyncTaskCompleteListener is an Interface contains the onTaskComplete Method .
*   MyTask extends Async Task and onPostExcute contains CallBackMethod which will return the result-set got from the doInBackground.
*   Http Class(Utils) contains the Http connection and returns the Result-set to AsyncTaskComleteListner from PostExecute.

I am trying to get my result-set Value in the main class from the interface method to perform my further operation.
I tried to get the value from static variables, static method but non of them worked, and also tried with creating a new class object to send and receive the result but every time it gives me **NullPointerException** . Because the statement written after the AsyncTask gets executes before getting the result.

I have also tried to get the Status of asyncTask from its method getStaus(), but it returns only Running and dose not notify when the task is completed or finished.

Here is the code sample:

**Main Class Code :**

```
package com.example.androidasynctask;

public class MainActivity extends Activity implements AsyncTaskCompleteListener {

public static String[] asyncResult;
String res[] = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

public void btnclick(View view) {
    /*MyTask asyncTask = new MyTask(this);
    String [] asyncTaskResult = asyncTask.execute("fetchCategory.php","1%Id%1");*/

    //AsyncTask<String, Void, String[]> asyncTaskRes = new MyTask(this).execute("fetchCategory.php","1%Id%1");
    //new MyTask(this).execute("fetchCategory.php","1%Id%1");
    MyTask asyncTask = (MyTask) new MyTask(this).execute("fetchCategory.php","1%Id%1");

     if(asyncTask.getStatus().equals(AsyncTask.Status.FINISHED) || asyncTask.getStatus().equals(AsyncTask.Status.PENDING)) {
         asyncTask.execute();
     }
     else {

         Log.v("In Else","Get Value");
     }

}

@Override
public void onTaskComplete(String[] result) {
    Log.v("IN ON TASK COMPLETE","VALUE = "+result[1]);

}

/*@Override
public void onTaskComplete(String result) {
    System.out.println("calling onTaskComplete SIMPLE....");
    System.out.println("result :: "+ result);
}*/

public static class GetAsyncResult
{
    static String[] returnValues;

    public GetAsyncResult()
    {}
    public GetAsyncResult(String[] res)
    {

        returnValues = res;
        Log.v("getResultSetValues","returnValues"+returnValues[1]);
    }

    public void getResultSetValues()
    {
        Log.v("getResultSetValues","returnValues"+returnValues[1]);

    }

}

} 
```

**Async Task Code :**

```
public class MyTask extends AsyncTask<String, Void, String[]> {

private Activity activity;
private ProgressDialog dialog;
private AsyncTaskCompleteListener callback;
public String[] asyncResultSetValue = null;
public MyTask(Activity act) {
    Log.v("MY TASK","ACTIVITY"+act);
    this.activity = act;
    this.callback = (AsyncTaskCompleteListener)act;
}

@Override
protected void onPreExecute() {
    super.onPreExecute();

    Log.v("MY TASK","in ON PRE EXECUTE");
    dialog = new ProgressDialog(activity);
    dialog.setMessage("Loading...");
    dialog.show();
}

@Override
protected String[] doInBackground(String... params) {
    Log.v("MY TASK","DO IN BACKGROUND");
    Log.v("PARAMS"," params[0] = "+params[0]+ "| params[1]"+params[1]);
    asyncResultSetValue = Utils.process_query(params[0],params[1]);
    return asyncResultSetValue;
}

@Override
protected void onPostExecute(String[] result) {
    super.onPostExecute(result);
    Log.v("MY TASK","in ON POST EXECUTE");
    if (null != dialog && dialog.isShowing()) {
        dialog.dismiss();
    }
    callback.onTaskComplete(result);
}

} 
```

**HTTP CLASS CODE :**

```
 public class Utils {

    static String result = null;
    String endResult;
    static java.io.InputStream  is = null;
    static StringBuilder sb=null;
    static String delimiter = "\\|";            
    static String delimiter1 = "\\%";
    static String[] temp = null;
    static String[] temp1 = null;
    static ArrayList<NameValuePair> nameValuePairs;
    static Context context;
    static ProgressDialog mDialog;
    static HttpResponse response;
    static String[] resultset_value = null;
    //static String url = "http://fortuneworkinprogress.in/News_App/";  //Global URL
    static String url = "http://10.0.2.2/News_App/";    //Global URL
    static String query_type,parameter;     

    /*************** PROCESS QUERY START  ***************/
      public static String[] process_query(String str_url, String parameter) {
            // String strval = select_parameter;
        String ret_val[] = null;
        String get_sel_val[] = null;    
        int loopcount =0;
        url = url+str_url;                                                                  //!!!! ######### CONCATINATING AND CREATING FULL URL ######## !!!!!!//
        Log.v("PROCESS QUERY PARAMETER","URL = "+url+" | PARAMTER = "+parameter);
        nameValuePairs = new ArrayList<NameValuePair>();

        //Log.i("STR VAL",""+strval);       //To Check which values are recieved
        try
        {
            String strval = parameter;
            get_sel_val=strval.split(delimiter1);

            for(int i =0; i < get_sel_val.length ; i++)     
            {

                loopcount = Integer.parseInt(get_sel_val[0]);           // First Delimeted Value which tells the number of count
                Log.i("Loopcount","cnt = "+loopcount);

            }

            for(int j=1;j<=(loopcount*2);j=j+2)                         //For Loop for making Name Values Pares Dynamic
            {
                nameValuePairs.add(new BasicNameValuePair(get_sel_val[j],get_sel_val[j+1]));
                //Log.i("J = ["+j+"]","pairvalue1 = "+get_sel_val[j]+"pairvalue2 ="+get_sel_val[j+1]);
            }
        }
        catch(Exception e)
        {
            Log.w("Exception in the getting value","Exp = "+e);
        }

        //nameValuePairs.add(new BasicNameValuePair("id","1"));

        try{
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(url);
                Log.v("CONNECT URL   ","Final url "+url);
                Log.w("CONNECTION STATUS ",httppost.toString());
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                Log.w("PAERSE VALUE ",nameValuePairs.toString());
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();
                Log.w("1", "Connection establised succesfuly");
           }
         catch(Exception e)
         {
             Log.e("log_tag", "Error in http connection"+e.toString());
         }

         try{
                BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                sb = new StringBuilder();
                sb.append(reader.readLine() + "\n");
                Log.v("SB VALUE = ","sb = "+sb.toString());
                String line="0";
                while ((line = reader.readLine()) != null) 
                {
                    sb.append(line + "\n");
                }
               is.close();
               result=sb.toString();

                //  Toast.makeText(getBaseContext(), result ,Toast.LENGTH_LONG).show();

                Log.w("result", result);
            }
          catch(Exception e)
          {
              Log.e("log_tag", "Error converting result "+e.toString());
              Toast.makeText(null, "error converting response to string" ,Toast.LENGTH_LONG).show();
          }

         String[] temp = null;
         String[] tempResult = null;

         if(result!=null)
         {
             tempResult = result.split(delimiter);                  //Split the entire return string into "rows"
             for(int i =0; i < tempResult.length-1 ; i++)       
              {
                 temp = null;   
                 temp = tempResult[i].split(delimiter1);        //Find columns for each row
                 ret_val = temp;
                 resultset_value=ret_val;
              }
        }
        else
        {
            Toast.makeText(null, "Cannot Find Routes" ,Toast.LENGTH_LONG).show();
        }

         Log.v("BEFORE RETUNR = ","ret_val = "+ret_val.toString());
         return ret_val;                                            //Returning the result value array
    }

                    /*************** PROCESS QUERY ENDS ***************/

      public static boolean isNetworkAvailable(Activity activity) 
      {
        ConnectivityManager connectivity = (ConnectivityManager) activity
                .getSystemService(Context.CONNECTIVITY_SERVICE);
        if (connectivity == null) 
        {
            return false;
        } 
        else
        {
            NetworkInfo[] info = connectivity.getAllNetworkInfo();
            if (info != null) 
            {
                for (int i = 0; i < info.length; i++) {
                    if (info[i].getState() == NetworkInfo.State.CONNECTED) 
                    {
                        return true;
                    }
                }
            }
        }
        return false;
    }

} 
```

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:55:27.027

```
Because the statement written after the AsyncTask gets executes before getting the result. 
```

原因是[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)在单独的线程上运行，而不是在您的主（UI）线程上。

```
MyTask extends Async Task and onPostExcute contains CallBackMethod which will return the result-set got from the doInBackground. 
```

您将获得此方法的结果值

```
 @Override
public void onTaskComplete(String[] result) {
    Log.v("IN ON TASK COMPLETE","VALUE = "+result[1]);

} 
```

在下面的代码中评论，

```
 if(asyncTask.getStatus().equals(AsyncTask.Status.FINISHED) || asyncTask.getStatus().equals(AsyncTask.Status.PENDING)) {
     asyncTask.execute();
 }
 else {

     Log.v("In Else","Get Value");
 } 
```

做出改变，

`public static String[] asyncResult;`至`public String[] asyncResult = null;`

改变以下，

`asyncResultSetValue = Utils.process_query(params[0],params[1]);`去`asyncResult = Utils.process_query(params[0],params[1]);` 和`return asyncResultSetValue;`去`return asyncResult ;`

通过添加一个日志来查看值，您将获得此方法的结果值

```
 @Override
public void onTaskComplete(String[] result) {
    Log.v("IN ON TASK COMPLETE","VALUE = "+result[1]);
    Log.v("IN ON TASK COMPLETE","VALUE = "+asyncResult[1]);

} 
```

# c# - WindowsPhone equivalent of "UITabController with UINaviagtionController per each Tab" in iOS

> ID：16032940
> 
> 赞同：1
> 
> 时间：2013-04-16T09:07:58.597
> 
> 标签：c#, windows-phone-7, xaml, uinavigationcontroller, uitabbarcontroller

I have iOS application with `UITabBarController` that contains `UINaviagtionController` for each Tab, like on the picture below. ![My iOS app root controller](https://i.stack.imgur.com/kXxol.png)

I also want to port my application to `WindowsPhone` (>=7.5).

My question is: Which UI components/services can I use to create the navigation flow like in my iOS app?

**Update**

1.  About `UITabController` you can think like about tabs in windows ![enter image description here](https://i.stack.imgur.com/t4Ayn.png)

2.  The hierarchy of controllers that painted on the picture above mean that each tab in `UITabController` will have own `UINavigationController` (in the WP terms this is `NavigationService`). So if you will use the navigation on one tab this will not affect to navigation on other tabs.

But as far as I know by default WP application have only one instance of `NavigationService`.

So actually my question is relevant to a question: Can WP application use more than one `NavigationService`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:37:03.740

Windows Phone 使用稍微不同的 UI 概念。而不是使用`Tab`控制，你应该使用`Panorama`或`Pivot`控制。前者用于在单个大页面上显示完全不同的元素时使用，后者用于显示相同数据的多个视图。这意味着`Panorama`用于显示不同数据的多个视图。

每当您从一个页面导航到另一个页面时`NavigationService`，它都会保留当前堆栈。它用作硬件后退按钮的历史记录（与 iOS 中的软件按钮不同）。

这意味着您在您的应用程序中只保留*一个*先前打开的页面序列，可以向后导航，不能有任何“侧面”堆栈，因为它们没有意义。

因此，如果您要从一个数据透视项目导航到某个其他应用程序页面，您将使用唯一的`NavigationService`. 因此，每个枢轴/全景项目使用与应用程序其余部分相同的堆栈。

如果有些事情仍然不清楚，请随时在这里提问。

# python - 来自数据库的加权边列表的图

> ID：16032943
> 
> 赞同：4
> 
> 时间：2013-04-16T09:08:10.403
> 
> 标签：python, networkx

我有存储在数据库中的加权边列表。如何轻松地从中创建图表（无需将其写入文件并读取它）

这里是可复制的

```
import sqlite3 
con = sqlite3.connect(":memory:")

with con:
    cur = con.cursor()    
    cur.execute("CREATE TABLE DATEN(Source TEXT, Target TEXT, Weight REAL)")
    cur.execute("INSERT INTO DATEN VALUES('X33', 'X20', 0.014)") 
    cur.execute("INSERT INTO DATEN VALUES('X32', 'X20', 0.024)") 
    cur.execute("INSERT INTO DATEN VALUES('X23', 'X20', 0.167)") 
    cur.execute("INSERT INTO DATEN VALUES('X23', 'X32', 0.015)") 
    cur.execute("INSERT INTO DATEN VALUES('X32', 'X33', 0.003)") 
    cur.execute("INSERT INTO DATEN VALUES('X23', 'X33', 0.035)")

cur.execute('SELECT * FROM DATEN')
data = cur.fetchall() 
```

我创建图表的尝试失败：

```
import networkx as nx
G = nx.Graph()
for x in data:
     x1 = {'source': data[0][0], 'target': data[0][1], 'weight':  data[0][2]} 
     print x1 

     G.add_edge(x1)  # THIS IS NOT WORKING 
```

有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T09:26:53.673

游标是一个迭代器，它在执行 SELECT 语句后产生行。例如，不是将所有结果提取到一个列表中

```
rows = cur.fetchall() 
```

您可以使用

```
for row in cur: 
```

但是，由于 NetworkX [add_weighted_edges_from](http://networkx.github.io/documentation/latest/reference/generated/networkx.DiGraph.add_weighted_edges_from.html#add-weighted-edges-from)方法接受一个迭代器，您可以`cur`直接传递：

```
G.add_weighted_edges_from(cur) 
```

这是多态性的一个很好的例子。NetworkX 的设计者不需要做任何特别的事情，甚至不需要预料 sqlite3 游标可能会作为参数传递，他们只需要在假设第一个参数是迭代器的情况下编写代码。

* * *

```
import networkx as nx
import sqlite3 
import matplotlib.pyplot as plt

with sqlite3.connect(":memory:") as con:
    cur = con.cursor()    
    cur.execute("CREATE TABLE DATEN(Source TEXT, Target TEXT, Weight REAL)")
    cur.execute("INSERT INTO DATEN VALUES('X33', 'X20', 0.014)") 
    cur.execute("INSERT INTO DATEN VALUES('X32', 'X20', 0.024)") 
    cur.execute("INSERT INTO DATEN VALUES('X23', 'X20', 0.167)") 
    cur.execute("INSERT INTO DATEN VALUES('X23', 'X32', 0.015)") 
    cur.execute("INSERT INTO DATEN VALUES('X32', 'X33', 0.003)") 
    cur.execute("INSERT INTO DATEN VALUES('X23', 'X33', 0.035)")

    G = nx.Graph()
    cur.execute('SELECT Source, Target, Weight FROM DATEN')
    G.add_weighted_edges_from(cur)    

nx.draw(G)
plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/fnPEX.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:20:51.483

[`Graph.add_edge()`](http://networkx.github.io/documentation/latest/reference/generated/networkx.Graph.add_edge.html#networkx.Graph.add_edge)不以 dict 作为参数，它至少需要两个节点和可选的关键字参数。试试这个：

```
import networkx as nx
G = nx.Graph()
for x in data:
     G.add_edge(x[0], x[1], weight=x[2]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:26:59.520

首先，你能给我们错误信息吗？

然后，您似乎没有正确使用 add_edge （请参阅：[http](http://networkx.github.io/documentation/latest/reference/generated/networkx.Graph.add_edge.html#networkx.Graph.add_edge) ://networkx.github.io/documentation/latest/reference/generated/networkx.Graph.add_edge.html#networkx.Graph.add_edge ）

你应该尝试像这样添加你的边缘：

```
import networkx as nx
G = nx.Graph()
for x in data:
    G.add_edge(x[0], x[1], weight=x[2]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-13T04:40:47.460

这有效

```
f=open('G_train.txt','r')
data=f.read()
EDGES=ast.literal_eval(data)

g = nx.DiGraph((x, y, {'weights': v}) for (x, y), v in Counter(EDGES).items())

print("Edges", g.edges(data=True), sep='\n') 
```

# c# - How to create an empty IOrderedEnumerable and IEnumerable >

> ID：16032949
> 
> 赞同：13
> 
> 时间：2013-04-16T09:08:28.480
> 
> 标签：c#, razor, umbraco

I need a way to create an empty IOrderedEnumerable and IEnumerable>

//above IGrouping DynamicNode gets stripped out by stackoverflow :(

Reason: I create 3 empty list types (IOrdered, IGrouping, IEnumerable) then based on some other information (options a user specifies such as order by create date or group by month) I then call a function on it assigning a list of said type.

(short snippet)

```
//DOESNT WORK THIS IS THE PART I NEED
IEnumerable<DynamicNode> baseList = Enumerable.Empty<DynamicNode>();
IOrderedEnumerable<DynamicNode> orderedList =  (IOrderedEnumerable<DynamicNode>)Enumerable.Empty<DynamicNode>();
IEnumerable<IGrouping<string, DynamicNode>> groupedList = (IEnumerable<IGrouping<string, DynamicNode>>)Enumerable.Empty<DynamicNode>();
//ABOVE DOESNT WORK THIS IS THE PART I NEED

if (order)
    {
        if (group)
    {
        groupedList = returnGroupedOrderedList(nodeList, ascending, useFeatured, groupBy, orderBy);
    }
    else
    {
        orderedList = returnOrderedList(nodeList, ascending, useFeatured, orderBy);
    }
} 
```

Anyone know how to do it?

ps If I haven't been clear enough please let me know how I can help you, help me :)

Thanks!

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-16T09:11:52.523

第一个应该按原样工作：

```
IEnumerable<DynamicNode> baseList = Enumerable.Empty<DynamicNode>(); 
```

第二个应该有一个小技巧：

```
IOrderedEnumerable<DynamicNode> orderedList =
    Enumerable.Empty<DynamicNode>().OrderBy(x => 1); 
```

第三个应该稍作改动：

```
IEnumerable<IGrouping<string, DynamicNode>> groupedList = 
    Enumerable.Empty<IGrouping<string, DynamicNode>>(); 
```

# ios - custom tableviewcell doesn't take up the remainder of parent tableview container's space

> ID：16032951
> 
> 赞同：0
> 
> 时间：2013-04-16T09:08:31.763
> 
> 标签：ios, cocoa

I develop a custom tableviewcell for use across my projcect, named UpdatesTableViewCell class. what I've got up until now has been shown in the snapshots at the bottom of this question.

Only problem I've been unfortunately experiencing is all about that the app layout only work in portrait orientation, but not in landscape mode.

That's to say, when my iphone get rotated to landscape, the above mentioned custom cell doesn't seem to fill up all the space of the containing table view, leaving some gap after it. That would not be of pleasant user experience.

please note that I also set autosizing to tell the tableviewcell to expand both left and right, filling up the container's space. (See 1st snapshot picture)

any advice to get it right in landscape orientation would be very much appreciated

..

# UpdatesTableViewCell.xib

![enter image description here](https://i.stack.imgur.com/hC2P5.png)

# UpdatesTableViewCell.h

```
#import <UIKit/UIKit.h>

@interface UpdatesTableViewCell : UITableViewCell

@end 
```

# UpdatesTableViewCell.m

```
#import "UpdatesTableViewCell.h"

@implementation UpdatesTableViewCell

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

@end 
```

and the final piece here is a snippet of code in ResultViewController.m (The parent UITableViewController where the UpdatesTableViewCell get used)

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UpdatesTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {

        NSArray* views = [[NSBundle mainBundle] loadNibNamed:@"UpdatesTableViewCell" owner:nil options:nil];

        for (UIView *view in views) {
            if([view isKindOfClass:[UITableViewCell class]])
            {
                cell = (UpdatesTableViewCell*)view;
            }
        }
    }

    return cell;
} 
```

Here is the unexpected result as mentioned:

![enter image description here](https://i.stack.imgur.com/oJwwt.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:13:24.397

> 请注意，我还设置了 autosizing 来告诉 tableviewcell 向左和向右扩展，填满容器的空间。（见第一张快照图片）

您需要标记水平箭头以调整宽度。

你现在拥有的是：

`UIViewAutoresizingFlexibleLeftMargin`和`UIViewAutoresizingFlexibleRightMargin`
视图通过在左/右边缘的方向上扩展或收缩来调整大小。

你需要的是：

`UIViewAutoresizingFlexibleWidth`
视图通过扩大或缩小其宽度来调整大小。

# wpf - MVVM and UserControl

> ID：16032955
> 
> 赞同：0
> 
> 时间：2013-04-16T09:08:36.293
> 
> 标签：wpf, xaml, mvvm, viewmodel

I'm in a little bit of a pickel, here it is:

I have a MainWindow.xaml using a userControl. This latter needs a path to function properly and has it passed through a public string property.

The MainWindow is coupled with a viewmodel in which I do the work needed to create the path needed above.

Is there a clean way to set the userControl's path property from the MainWindow.xaml, such as for instance a binding to one of its viewmodel's properties? Something like

```
<uc:MyUserControl x:Name="controlsName" 
    PathPropertyNeeded="{Binding ViewModelsProperty}" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:16:41.100

你需要一个依赖属性：

[http://wpftutorial.net/DependencyProperties.html](http://wpftutorial.net/DependencyProperties.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:11:42.803

是的，您只需要确保它`PathPropertyNeeded`是一个[依赖属性](http://msdn.microsoft.com/en-gb/library/system.windows.dependencyproperty.aspx)。

# objective-c - Adding badge number in UItabbarView Controller in runtme

> ID：16032964
> 
> 赞同：0
> 
> 时间：2013-04-16T09:09:02.943
> 
> 标签：objective-c, uitabbarcontroller, badge

I am trying to add **badge number** in `UITabBarController` and it is working . But i started NSTimer . when timer completed . it calls webservice and in return i get badge number .

but when i set badge number to `UITabBarController` in this senario . it is no more working.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:18:29.863

```
[[super.tabBarController.viewControllers objectAtIndex:2] tabBarItem].badgeValue = @"1"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:24:35.717

没有看到你的代码很难说，但有两种可能性浮现在脑海中：

1.  您正在尝试从不是主线程的线程设置徽章值。尝试将您的徽章值设置代码包装`dispatch_async`到主队列中：

    ```
    dispatch_async(dispatch_get_main_queue(), ^
    {
        // set badge number    
    }); 
    ```

2.  您设置 badgeValue 的项目为零。尝试在添加徽章编号的行中添加断点或一些 NSLog 语句，并检查某些对象的值是否为 nil。

# python - Replace twitter feed by blog entries

> ID：16032966
> 
> 赞同：1
> 
> 时间：2013-04-16T09:09:13.640
> 
> 标签：python, django, mezzanine

In the default [mezzanine](http://mezzanine.jupo.org/) theme, on the right hand side there is a [twitter feed](http://mezzanine.jupo.org/docs/packages.html#module-mezzanine.twitter). I would like to replace this with the latest blog entries. I believe that `{% blog_recent_posts 5 as recent_posts %}` as [documented here](http://mezzanine.jupo.org/docs/packages.html#module-mezzanine.blog) should do the trick but I cannot find where I need to add this line.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:04:50.493

花点时间查看每个应用程序（核心、博客、画廊等）中的“模板”目录。

这些将向您显示所有默认模板，您可以通过使用与这些应用程序中相同的路径创建它们来覆盖这些模板，但在您自己的项目中的“模板”目录中。

您会在 mezzanine/core/templates 中看到 base.html - 这是所有其他模板扩展的根模板，因此您通常希望将其复制到项目的模板文件夹中。

在 base.html 中，您将看到包含推文的位置，因此您可以从那里开始自定义内容。

如果您有任何其他问题，您将在邮件列表中得到更快的回复。

# c# - Windows 8 XAML 速度问题

> ID：16032972
> 
> 赞同：0
> 
> 时间：2013-04-16T09:09:28.033
> 
> 标签：c#, windows-runtime, winrt-xaml

我一直在编写 Windows 8 Store XAML/C# 应用程序，在 Windows Surface 设备上进行测试期间发现该应用程序在页面之间导航的速度非常慢。

该应用程序遵循 MVVM 模式并使用 SQLite。我的第一个想法是对 SQLite 的数据访问会减慢速度。

我已经剥离了我所有的 c# 代码和数据访问代码，所以我只剩下一个 XAML shell。

这样做之后，我仍然发现页面在它们之间导航时加载速度很慢。

我在一页上有大约 60 个控件（TextBoxes、Combos 和 CheckBox），所以我不会说这有什么大不了的，加载需要 1-2 秒。这听起来可能不多，但它是一个显着的暂停，并且没有任何数据访问代码。

有没有人有任何提示可以加快 XAML 页面的绘制/加载速度？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:46:54.843

问题是，如果您将 Grid + ScrollViewer 作为页面的根容器，您将无法虚拟化任何东西。

但是，您可以用 GridView（默认支持滚动）替换此 Grid + ScrollViewer，并将 GridView.ItemsPanel 设置为 VirtualizingStackPanel。

这将需要对您的代码进行一些重构。

一种解决方案是将您的表单拆分为控件的“组”。例如，如果您的表单的目标是编辑用户配置文件，您可以有一个“个人信息”组和“专业信息”组。一旦你有一个组层次结构，只需将你的 GridView 绑定到这些组，virtualizingStackPanel 将完成仅显示/实例化要显示的控件的工作。

# magento - getChildHtml('right')的内容在哪里？>

> ID：16032973
> 
> 赞同：9
> 
> 时间：2013-04-16T09:09:28.070
> 
> 标签：magento, content-management-system, e-commerce

我正在尝试重新组织我的右侧边栏。在模板（2columns-right）中，它调用：

`<?php echo $this->getChildHtml('right') ?>`

我在哪里可以找到这个变量的内容？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-16T10:30:50.570

对方法的调用会`getChildHtml()`加载带有传递给方法的名称的子块的 HTML，因此在这种情况下，我们正在寻找一个名为*right*的子块。

为了确定在哪里可以找到这个子块，我们需要知道哪个块正在调用这个方法。我知道对该`getChildHtml()`方法的特定调用出现在主页列模板中，因为*右边*是列之一。因此，查看`page.xml`布局文件并搜索在其中找到方法调用的模板文件，您会发现如下内容：

```
<reference name="root">
    <action method="setTemplate"><template>page/2columns-right.phtml</template></action>
    <!-- Mark root page block that template is applied -->
    <action method="setIsHandle"><applied>1</applied></action>
</reference> 
```

在布局文件中使用`<reference>`标签允许您更改目标块，并且`<action>`标签允许您在正在使用的块内运行块方法。所以这部分布局将模板设置在*根*块内。由此我们知道调用该方法的是*根块。*`getChildHtml()`

接下来让我们看看*根*块在布局中的定义位置，它在同一个`page.xml`布局文件中，并且应该在顶部附近：

```
<block type="page/html" name="root" output="toHtml" template="page/3columns.phtml">
    ...
    <block type="core/text_list" name="right" as="right" translate="label">
        <label>Right Column</label>
    </block>
    ...
</block> 
```

这个块中有很多定义，但是你可以看到它被命名为*root*并定义了很多子块。这些子块之一被命名为*正确*的，并且该方法正在输出其 HTML 的该块`getChildHtml()`。重要的是要注意块类型 - `core/text_list`。这是一种特殊的块类型，这意味着当使用该`getChildHtml()`方法渲染该块的 HTML 时，子块也将被渲染。如果块类型`page/html`与根块一样，添加到*正确*块的每个子块都需要它自己的`getChildHtml()`方法调用，使用这种块类型，您只需要调用`getChildHtml('right')`并且所有子块也将被渲染。

如您所见，此处定义了*正确*的块，但它是空的。这是因为与引用根块 ( ) 的标记完全相同，`<reference name="root">`其他布局文件通过引用*右块将子块添加到右**块*。

 *```
<reference name="right">
    ...
</reference> 
```

因此，要最终回答您的问题（并希望在此过程中提供一些信息），您需要查看布局文件而不是`page.xml`对*正确*块的引用，在这里您将找到`getChildHtml()`方法调用输出的所有子内容。

您可以在自己的模块布局文件中更改添加到*右侧*`local.xml`块的内容，如果您不创建模块，则可以更改布局文件。[我在这里](https://magento.stackexchange.com/questions/1475/adding-mini-cart-to-header-not-displaying/1500#1500)`local.xml`的答案中简要介绍了布局文件，其中包含添加新块和删除其他布局文件中添加的块的示例语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:25:46.567

你会在你的 layout.xml 文件中找到一切的来源。它会有列表块，调用 .phtml 文件和数据来自那里。我希望你理解我想要传达的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:08:50.500

```
<reference name="right">  
    <block type="yourmodule/yourblock" name="yourblock" as="yourblock" />
 </reference> 
```

你可以像这样添加你的自定义块。*

# android - 摩托罗拉 Atrix 2 中缺少彩信主体

> ID：16032975
> 
> 赞同：1
> 
> 时间：2013-04-16T09:09:33.140
> 
> 标签：android, android-intent

我使用以下代码发送彩信，

```
String message = Fname + Mobileno + Homeno + Workno
                                + Workmail + Homemail + Gtalk + Skype
                                + Address + Company + Title + Website;
                    Intent i = new Intent(Intent.ACTION_SEND);
                        i.putExtra("address",orgphonenumber);
                        Uri uri = Uri.parse("file://"+Environment.getExternalStorageDirectory()+"/Talk&Share/Images/profpic.png");
                        i.putExtra(Intent.EXTRA_STREAM,uri);
                        i.putExtra("sms_body","Hello");

                        i.setType("image/png");
                        i.putExtra("exit_on_sent", true);
                        startActivityForResult(i, ONLINE); 
```

上面的代码在所有设备上运行并显示图像和正文文本。但在摩托罗拉 Atrix 2 上，它在正文中显示空白文本。任何帮助将不胜感激。

# php - 为什么这个 javascript 不能得到我们在弹出表单中想要的值

> ID：16032979
> 
> 赞同：0
> 
> 时间：2013-04-16T09:09:49.733
> 
> 标签：php, javascript, html, sql-server-2008, jquery

我有一个如下所示的弹出表单 ![在此处输入图像描述](https://i.stack.imgur.com/NTdTx.png)

这里的代码

```
*<div   class="popup_window_css" id="sample" display="none">
<table class="popup_window_css">
<tr    class="popup_window_css">
<td    class="popup_window_css">
<div   class="popup_window_css_head"><img src="../../images/close.gif" alt="" width="9" height="9" />Aksi</div>
<div   class="popup_window_css_body"><div style="border: 1px solid #808080; padding: 6px; background: #FFFFFF;">
<div>
Werehouse Product
<br><select id="wp" name="wp" >
        <option selected>- Jenis Werehouse -</option>
        <?php
        $q = mssql_query("select WHSName from tblSPDMstWarehouseProduct Order by WHSID"); 

        while ($r = mssql_fetch_array($q)){
        echo "<option value=$r[WHSName]>$r[WHSName]</option>";
        }
        ?>
</select>
</br>
Posisi
     <br><input type="text" id="posisi" name="posisi" readonly/></br>
Product ID
     <br><select id="pid" name="pid">
        <option selected = "selected" >- Produk ID -</option>
            <?php
            $q = mssql_query("select ProductID from tblMstProduct Order by ProductID"); 

            while ($r = mssql_fetch_array($q)){
            echo "<option value=$r[ProductID]>$r[ProductID]</option>";
        }?>
        </select>
    </br>
Product Name
     <br><input type="text" id="pname" name="pname" size="65" readonly/>
     </br>
Production Date
<br><input type='text' id="tgl" name="tgl"></br>
<button id="save">Save</button>
<button id="view">View</button>
<button id="delete">Delete</button>
<span id="status"></span>
<img src="../../images/loading.gif" id="loading" style="display:none">
</div>
<div class="popup_window_css_foot"></div></td></tr></table>
</div>* 
```

使用 ajax.jquery 作为控制事件。像 $("#save").click(function(){.....});

```
<script type="text/javascript">
var wp;
var posisi;
var pid;
var pname;
var pdate;
var datanya;
$(document).ready(function(){
//jika tombol save diclick
$("#save").click(function(){
//ambil nilai-nilai dari masing-masing input
wp = $("#wp").val();
if(wp==="- Jenis Werehouse -"){
alert("Pilih dulu jenis werehouse");
exit();
}
posisi = $("#posisi").val();
pid = $("#pid").val();
if(pid==="- Produk ID -"){
alert("Pilih dulu ID Produk");
exit();
}
pname = $("#pname").val();
if(pname==""){
alert("Pilih dulu ID Produk");
exit();
}
pdate=$("#pdate").val();
if(pdate==""){
alert("Isi dulu tanggal inputnya");
exit();
} 
```

这里的问题

```
 datanya = "wp="+wp+"&posisi="+posisi+"&pid="+pid+"&pname="+pname;
    datanya = datanya+"&pdate="+pdate;
    //tampilkan status Updating dan animasinya
    $("#status").html("Proses...");
    $("#loading").show();
    $.ajax({
    type:"POST",
    url: "aksi.php",
    data: "op=save"+datanya,
    cache: false,
    success: function(msg){
    if(msg=="sukses"){
    $("#status").html("Data Berhasil Disimpan...");
    }else{
    $("#status").html("ERROR..penyimpanan data GAGAL!");
    }
    $("#loading").hide();
    }
    });
    });
    });
    </script> 
```

在这个脚本上，我尝试通过元素 id 获取值并使用 POST 作为方法。这里 aksi.php 代码

```
 <?php
    //conect to database
    //get the value

        $op = $_POST['op'];
        if($op == "save"){
        $WH = htmlspecialchars($_POST['wp']);
        $Posisi = htmlspecialchars($_POST['posisi']);
        $ProductID = htmlspecialchars($_POST['pid']);
        $ProductName = htmlspecialchars($_POST['pname']);
        $ProductionDate = htmlspecialchars($_POST['pdate']);
        $save = mssql_query("Insert tblTrnProduct values('$ProductID', '$ProductName', '$WH', '$Posisi', '$ProductionDate')
        WHERE Posisi='$Posisi'");
        if($save){
        echo "sukses";
        }else{
        echo "error";
        }
        }
?> 
```

在 aksi.php 上没有记录任何值。c'z 当我使用时`<?php print_r($_POST) ?>`有一个空结果。当然，当我在浏览器中运行它时，总是说“ERROR..penyimpanan data GAGAL”。有什么问题？请建议...带有代码示例将更加感激..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:29:03.287

`&`我认为您在 ajax 发布数据值中缺少 a ：`data: "op=save&"+datanya,`

JQuery 带有一个非常有用的方法[$.param](http://api.jquery.com/jQuery.param/)它将编码您的查询字符串

在你的情况下：

```
var datanya = {"op": "save", "wp": wp, "posisi": posisi, "pid": pid, "pname": pname, "pdate": pdate}
[...]
$.ajax({
  data: $.param(datanya) ,
  [...]
}); 
```

# device - Getting live info from /dev/input

> ID：16032982
> 
> 赞同：10
> 
> 时间：2013-04-15T00:18:48.720
> 
> 标签：device, c, udev, block-device

I am unsure if this is the correct place for this question. I am attempting to obtain the axis position values from a joystick `/dev/input/js0` on my system. If I run `jstest /dev/input/js0` it will give me live feedback on all buttons and axis positions.

I am trying to feed this information into my C program to control servos. Is there a function for doing this? I have not worked much with input devices in programming so this is all new to me.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-09-17T07:04:46.840

您可以运行此[python 代码](https://github.com/node-red/node-red/blob/master/nodes/core/hardware/nrgpio.py#L194-L215)来读取事件。
您还可以使用高级模块[python-evdev](https://github.com/gvalkov/python-evdev)。

```
#!/usr/bin/env python

import struct

infile_path = "/dev/input/js0"
EVENT_SIZE = struct.calcsize("llHHI")
file = open(infile_path, "rb")
event = file.read(EVENT_SIZE)
while event:
    print(struct.unpack("llHHI", event))
    (tv_sec, tv_usec, type, code, value) = struct.unpack("llHHI", event)
    event = file.read(EVENT_SIZE) 
```

样本输出：

```
(73324490, 8454144, 55242, 1118, 25231360)
(73324490, 42008576, 55242, 1118, 58785792)
(73324490, 75563008, 55242, 1118, 92340224)
(73324490, 109117440, 55242, 1118, 125894656)
(73324490, 142671872, 55242, 1118, 159449088)
(73324490, 176226304, 55242, 1118, 193003520)
(73324490, 209780736, 55242, 1118, 226557952)
(73324490, 243335168, 55242, 1118, 8519680)
(73324490, 25296896, 55242, 1118, 42074112)
(73324490, 58884097, 55242, 1118, 75661313)
(73324490, 92405760, 55242, 1118, 109215745)
(73324490, 125992961, 55242, 1118, 142737408)
(73324490, 159514624, 55242, 1118, 176324609)
(73327790, 84041474, 58542, 1118, 84049919)
(73328030, 84044852, 58782, 1118, 84017152)
(73331790, 33749013, 62542, 1118, 33742256)
(73331790, 33736851, 62562, 1118, 33731108)
(73331830, 33723339, 62602, 1118, 33718273)
(73332090, 33723339, 62862, 1118, 33685504) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-03-15T04:32:00.940

以kev的帖子为基础

从 linux/joystick.h 文件：

```
struct js_event {
    __u32 time;     /* event timestamp in milliseconds */
    __s16 value;    /* value */
    __u8 type;      /* event type */
    __u8 number;    /* axis/button number */
}; 
```

所以[python格式](https://docs.python.org/2/library/struct.html)应该是：“LhBB”

```
infile_path = "/dev/input/js0"
EVENT_SIZE = struct.calcsize("LhBB")
file = open(infile_path, "rb")
event = file.read(EVENT_SIZE)
while event:
    print(struct.unpack("LhBB", event))
    (tv_msec,  value, type, number) = struct.unpack("LhBB", event)
    event = file.read(EVENT_SIZE) 
```

XBOX One S 控制器的示例输出：

```
// type=button, number=button number
//msec, value, type, number
(2114530, 1, 1, 0) // A pressed
(2114670, 0, 1, 0) // A released
(2116490, 1, 1, 1) // B pressed
(2116620, 0, 1, 1) // B released
(2117370, 1, 1, 2) // X pressed
(2117520, 0, 1, 2) // X released
(2118220, 1, 1, 3) // Y pressed
(2118360, 0, 1, 3) // Y released 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-15T00:58:46.207

此页面：[http](http://scaryreasoner.wordpress.com/2008/02/22/programming-joysticks-with-linux/) : //scaryreasoner.wordpress.com/2008/02/22/programming-joysticks-with-linux/ 有一篇关于如何从 /dev/input/js0 读取信息的精彩文章

您从文件中读取的事件格式记录在此处：[https](https://www.kernel.org/doc/Documentation/input/input.txt) ://www.kernel.org/doc/Documentation/input/input.txt 。这是一个包含时间戳、事件类型和标识符以及值的简单结构：

```
struct input_event {
    struct timeval time;
    unsigned short type;
    unsigned short code;
    unsigned int value;
}; 
```

# android - 如何在 Android 中保存（下载）包含所有图像、css 等的 HTML 页面？

> ID：16032984
> 
> 赞同：2
> 
> 时间：2013-04-16T09:10:00.483
> 
> 标签：android, html, css, save

我正在开发用于从 wiki 资源打开页面的 Android 应用程序。我想保存这些页面以供以后观看。那么，是否有可能使用库来做到这一点 - 编写我自己的 html-parser 对我来说有点复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:13:46.687

如果您只需要 HTML 解析器，这里有一些开源 Java 解析器：[Java 解析器](http://java-source.net/open-source/html-parsers)

您也可以使用[Html.fromHtml(source)](http://developer.android.com/reference/android/text/Html.html)；

我不确定它是否支持所有 HTML 标签，但它有一个处理程序，您可以在 unknown tags 上实现。. .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:20:54.570

您可以使用 ，`DefaultHttpClient`因为响应将保存所有数据。

这是基本语法：

```
HttpClient client = new DefaultHttpClient();
HttpGet request = new HttpGet('http://www.somedomain.com/somePath');

try {
    HttpResponse response = client.execute(request);
    // store the response afterwards
} catch ([…]) {
    […]
} 
```

更多信息可以在这里找到：[Android 开发者 | 默认HttpClient](http://developer.android.com/reference/org/apache/http/impl/client/DefaultHttpClient.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:19:31.263

没有简单的方法，您需要保存 html 数据和所有资源 image/css/scripts 等并更新 html 数据中的路径（为此，您需要 html 解析器），**[类似的问题在这里得到解答。](https://stackoverflow.com/a/9415274/1677824)**

# jquery - 加载 打开时使用ajax 我在选择框中有一长串项目（或多或少 6000）。当我加载 PHP 页面时，需要一段时间。因为这个 <select> 很少发生，所以我想加载 <option> 以防万一，我需要它们。我会调用 jquery 函数 $("#select_id").load("code.php").change(); 但是我应该使用哪个处理程序？我怎么能射击用户，这是加载 1-2 秒。

> ID：16032989
> 
> 赞同：0
> 
> 时间：2013-04-16T09:10:15.757
> 
> 标签：jquery, ajax

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:18:15.737

尝试这个：

```
var $select = $('#select_id');
$select.load('code.php', function () {
    $select.change(function() {
      alert('Handler for .change() called.');
    });
}); 
```

我们在这里使用了**回调函数**。因此，代码`select.change()`将在后处理和 HTML 插入完成后执行。

# c# - Is effective usage of hashes of changing audio (mp3) files possible

> ID：16032990
> 
> 赞同：3
> 
> 时间：2013-04-16T09:10:19.667
> 
> 标签：c#, hash, tags, mp3, id3

I'm going to create a music library program, easy. Storing the information, easy.

I previously looked at another music library made in c#, the guy claimed that even if you move the file, on rediscovery it will know all the information about that file retrieved from the database (xml, sql).

More info on rediscovery: When you move files you have to get the music library to rediscover because its current information is wrong, such as the file path, on re discovery it will find the file, check it in the database, and update any information

I thought this is impossible, till now. If you hash a file and use that hash as the key, you can then use that to always check the file to make sure it is the one.

Please correct me if I'm wrong and confirm what I'm saying is true (that is the question).

*   File path isn't used in hashing the file. (I don't know how to hash)
*   Re hash after every ID3 tag write (changing the file changes the hash?)
*   Using the Hash as an Key/Id will mean that if the file is moved it can be still referenced to the information stored about it
*   Once information read is read out of the xml (if we're using xml as a database) file, storing it in a dictionary is the quickest and best way to have the contents in memory

It is a question, it needs an answer, its about c#. I'm using c#, thats why it's specific, I'm doing background research, I just wanted some expert opinion on what i've stated

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T09:26:47.293

## 回答您的问题

*   计算哈希时不应使用文件路径。既不是文件名也不是扩展名。

*   如果所有更改都发生在您的应用程序中，则在每次写入 ID3 标记后重新散列将解决您的问题

*   hash 可以安全地用作您的目的的密钥（见下文）

*   可能是的，如果我理解正确的话

## 重复哈希值的可能性

根据您选择的散列函数，如果您搜索，您将在年、千年、十亿年中找到/生成另一个具有相同散列的文件，或者直到世界末日您都不会这样做。

**这都是概率问题**。检查[每个散列函数的详细信息，](http://en.wikipedia.org/wiki/List_of_hash_functions)以了解找到具有相同散列的另一个文件的概率有多低。

## mp3 文件中更改标签的问题

虽然这可能是个问题，但您需要做的只是散列文件中不是 ID3 标记的部分。它们通常位于文件的末尾，只占文件大小的很小百分比。

您可以做的是在不会更改的文件部分使用散列函数。**散列时只需跳过文件的最后 N 个字节**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:27:33.733

是的，如果你散列*文件内容*，那么即使文件移动到其他地方，当你再次执行它时，它仍然会产生相同的散列。所以是的，您可以根据文件内容的哈希值完全识别文件（例如，这就是 Git 所做的）。至于创建文件的哈希，有几个问题会告诉你如何去做，例如[这个](https://stackoverflow.com/questions/1993903/how-do-i-do-a-sha1-file-checksum-in-c).

请注意，由于 ID3 标记和其他内容，您的文件不是不可变的，因此对文件内容进行散列处理可能不是最好的主意。如果您更改文件的标签，其哈希值将更改，从而生成一个*新*文件（至少对于您的应用程序而言）。当然，如果您更改应用程序中的标签*，*那么您可以轻松跟踪这些更改并更新旧记录以使用新哈希。同样的想法也可以应用于根据文件的路径来识别文件（如果你在应用程序中移动它，你也可以在数据库中更新它的路径）。但问题是这两种操作都可能发生在您的应用程序之外。

因此，这两种识别方法（文件内容的散列或文件路径）都存在一些缺陷，但没有真正的替代方法来识别文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T09:31:33.880

哈希将为您工作。它基本上根据文件中的所有字节创建校验和。使用良好的哈希将为您提供每个文件的唯一签名（如果找到两个具有相同哈希的不同文件，则更有可能连续五次中奖）。

问题是您需要读取整个文件来计算哈希。这可能会稍微损害性能。

因此，在重新发现时，您可能需要首先检查文件大小是否相同。如果没有，则无需读取整个文件并计算哈希。但是您需要为此存储文件大小和哈希。

有关散列的一些信息（使用 MD5 方法）

[http://www.fastsum.com/support/md5-checksum-utility-faq/md5-hash.php](http://www.fastsum.com/support/md5-checksum-utility-faq/md5-hash.php)

# java - Calling Previous Model Behavior of JTable.setModel()

> ID：16032991
> 
> 赞同：4
> 
> 时间：2013-04-16T09:10:20.970
> 
> 标签：java, swing, jtable, tablemodel

Have one `JTable` on my swing screen. While loading screen, I am setting one table model which is created for this table only. And at run time if there is any data change I am recreating the same model and again set it using `objJTable.setModel(objCustTableModel)`.

Now the problem is table model which is loaded at the time of screen load, same model object get called while setting `objJTable.setModel(objCustTableModel)` at run time which called getColumnClass(int col) method from `CustTableModel` class. After this object call, my new model object get called. Again if I set another new table model, by using same code `objJTable.setModel(objCustTableModel2)`, model call's functions get called first from `objCustTableModel` and then `objCustTableModel2`.

In short `setModel()` function first call previous model object and then current model object. How can I restrict to call of previous model object?

For example

```
import java.awt.Cursor;
import java.awt.Point;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.AbstractTableModel;

/**
 * Steps to reproduce issue.
 * 1\. Run this program.
 * 2\. There will be two rows in table. Delete all rows one by one.
 * 3\. Now click on Add button and see the exception.
 * 
 * I come to know that this exception is because of table.setAutoCreateRowSorter(true); line, which is there in TestCustTableModel's constructor
 * If you comment this line, then issue got resolved.
 * But I want to apply sorting on columns so this line is required.
 */

public class TestCustTableModel extends JPanel{
    JTable table = new JTable();
    public TestCustTableModel() {

        Object[][] data = new Object[2][3];
        data[0][0] = "1";
        data[0][1] = "User1";
        data[0][2] = "Delete";

        data[1][0] = "2";
        data[1][1] = "User2";
        data[1][2] = "Delete";

        JButton addButton = new JButton("Add");
        addButton.addMouseListener(new AddListener());
        table.setModel(new CustModel(data));
        table.addMouseListener(new TableListener());

        /**#################################
         * Following line throws ArrayIndexOutOfBoundsException. Please comment or Uncomment following line and see the difference.
         */
        table.setAutoCreateRowSorter(true);

        table.getTableHeader().setCursor(new Cursor(Cursor.HAND_CURSOR));
        JScrollPane scrollPane = new JScrollPane(table);

        this.add(addButton);
        this.add(scrollPane);
    }

    class TableListener extends MouseAdapter {
        public void mouseClicked(MouseEvent evnt) {
            Point p = evnt.getPoint();
            if(table.columnAtPoint(p) == 2) {
                Object[][] data = null;
                if(table.getModel().getRowCount() == 2 && table.rowAtPoint(p) == 0) {
                    data = new Object[1][3];
                    data[0][0] = "2";
                    data[0][1] = "User2";
                    data[0][2] = "Delete";
                }else if(table.getModel().getRowCount() == 2 && table.rowAtPoint(p) == 1) {
                    data = new Object[1][3];
                    data[0][0] = "1";
                    data[0][1] = "User1";
                    data[0][2] = "Delete";
                }else {
                    data = new Object[0][];
                }
                table.setModel(new CustModel(data));
            }
        }
    }

    class AddListener extends MouseAdapter{

        @Override
        public void mouseClicked(MouseEvent evnt) {
            if(table.getModel().getRowCount() == 2) {
                return;
            }
            Object[][] data = new Object[table.getModel().getRowCount() + 1][3];
            for(int i = 0; i <= table.getModel().getRowCount(); i++) {
                data[i][0] = i;
                data[i][1] = "User" + i;
                data[i][2] = "Delete";
            }
            table.setModel(new CustModel(data));
        }

    }

    class CustModel extends AbstractTableModel {
        private String[] columnNames = {"ID", "NAME", "DELETE"};
        private Object[][] data = null;

        public CustModel(Object[][] data) {
            this.data = data;
        }
        public int getColumnCount() {
            return columnNames.length;
        }

        public int getRowCount() {
            return data.length;
        }

        public String getColumnName(int col) {
            return columnNames[col];
        }

        public Object getValueAt(int row, int col) {
            return data[row][col];
        }

        public Class getColumnClass(int col) {
            return getValueAt(0, col).getClass();
        }
    }

    private void display() {
        JFrame f = new JFrame("SwapTableModel");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        TestCustTableModel obj = new TestCustTableModel();
        obj.display();
    }
} 
```

at this time swing first internally called `getColumnClass` function on the basis of `objCustTableModel` and after that using `objCustTableModel2` object. I want to restrict call which is on the basis of `objCustTableModel`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T17:15:22.017

从这个[例子](https://stackoverflow.com/a/8260663/230513)`getColumnClass()`开始，我没有看到下面显示的实现出现意外行为。

```
private Model() {
    final Object[] data = {this.toString()};
    this.model = new DefaultTableModel(data, 1){

        @Override
        public Class<?> getColumnClass(int columnIndex) {
            System.out.println(data[0]);
            return super.getColumnClass(columnIndex);
        }
    };
    model.addRow(data);
} 
```

请注意，它可以在确定单元格需要渲染的任何时候`JTable`调用。`getColumnClass()`如有必要，您可以使用`EventQueue.invokeLater()`来安排“在处理完所有未决事件后发生”的事情。

```
EventQueue.invokeLater(new Runnable() {
    @Override
    public void run() {
        // do something
    }
}); 
```

附加物：

*   如果`getAutoCreateRowSorter()`是`true`，`setModel()`则尝试恢复`RowSorter`使用旧模型创建的。

*   您可以在更改模型`setAutoCreateRowSorter(true)` *后*指定，如下所示，或者扩展您`TableModel`以更新模型，如下[所示](https://stackoverflow.com/a/11241218/230513)。

*   使用`ActionListener`for`JButton`代替`MouseListener`.

*   使用`TableCellEditor`表格中的 for 按钮，如此[处](https://stackoverflow.com/a/5559747/230513)和[此处](https://stackoverflow.com/a/5556631/230513)所示。

代码：

```
addButton.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        if (table.getModel().getRowCount() == 2) {
            return;
        }
        Object[][] data = new Object[table.getModel().getRowCount() + 1][5];
        table.setRowSorter(null);
        for (int i = 0; i <= table.getModel().getRowCount(); i++) {
            data[i][0] = i;
            data[i][6] = "User" + i;
            data[i][7] = "Delete";
        }
        table.setModel(new CustModel(data));
        table.setAutoCreateRowSorter(true);
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-13T07:28:15.637

```
 DefaultTableModel model ;
    /** Creates new form DynRowAdd */
    public DynRowAdd() {
        initComponents();
          model = new DefaultTableModel();
                    jTable1.setModel(model);
                    model.addColumn("Id");
                    model.addColumn("First Name");
                    model.addColumn("Last Name");
                    model.addColumn("Company Name");
    }
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         

        model.addRow(new Object[]{jTextField1.getText(), jTextField2.getText(),jTextField3.getText(),jTextField4.getText()});

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-29T09:38:54.950

我之前遇到过类似的问题，因为我在 jtable 的 ListSelectionListener 中调用 jTable.getValueAt(jTable.getSelectedRow(),col)，并且在更改 jtable 的模型后，它在调用 jTable.setModel 后抛出无效索引，超出范围异常（模型）在行选择之​​后，它通过确保调用值和选定的行获取器来解决 - jTable.getValueAt(jTable.getSelectedRow(),col) - 不是来自仍在制作的旧事件，通过jtable的ListSelectionListener中的！event.getValueIsAdjusting（），我通过这个问题理解这个符号，它不是试图在调用jtable的集合模型调用中的旧模型时调用值和选定的行getter - 如果你有更好的知识，如果我错了或不准确，请纠正我 - ,这是我之前的问题的一个示例，您可以尝试评论 !event.getValueIsAdjusting() if 条件，以查看符号：

```
package testingsetmodel;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Container;
import java.awt.EventQueue;
import java.awt.Font;
import java.awt.Rectangle;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import java.util.ArrayList;
import javax.swing.ButtonGroup;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JRadioButton;
import javax.swing.JScrollPane;
import javax.swing.ListSelectionModel;
import javax.swing.SwingConstants;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableColumn;

public class TestingSetModel extends javax.swing.JFrame implements ItemListener  {

    TestingSetModel() {                                

        init();        

    }

    private void init()
    {

        northPanel = new JPanel( );     // for adding jtable6
        eastPanel = new JPanel( );      // for adding jtable7
        southPanel = new JPanel( );     // for adding 2 jradiobuttons

        first = new JRadioButton("1st");               
        second = new JRadioButton("2nd", true);  

        rg = new ButtonGroup( ); 
        rg.add( first ) ;  rg.add( second ) ;                              

        first.addItemListener(this);        second.addItemListener(this); 

        jScrollPane6 = new JScrollPane();
        jScrollPane7 = new JScrollPane();

        northPanel.add(jScrollPane6);    eastPanel.add(jScrollPane7);
        southPanel.add(first);      southPanel.add(second);        

        jTable6 = new javax.swing.JTable(){
            DefaultTableCellRenderer renderRight = new DefaultTableCellRenderer();

            { // initializer block
                renderRight.setHorizontalAlignment(SwingConstants.RIGHT);
            }

            @Override
            public TableCellRenderer getCellRenderer (int arg0, int arg1) {
                return renderRight;
            }

            @Override
            public boolean isCellEditable(int row, int col) {
                switch (col) {
                    case 0:
                    return false;
                    default:
                    return true;
                }
            }

        };

        jTable6.setAutoCreateRowSorter(false);

        jTable6.setFont(new java.awt.Font("Traditional Arabic", 0, 19));

        jTable6.setEnabled(true);

        jTable6.setRowHeight(25);

        ((DefaultTableCellRenderer)jTable6.getTableHeader().getDefaultRenderer()).setHorizontalAlignment(JLabel.RIGHT);
        jTable6.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        jScrollPane6.setViewportView(jTable6);
        jTable6.setSelectionBackground(new Color(0,100,255,7)); // cutomize selection color
        jTable6.setSelectionForeground(Color.black);

        jTable6.setRowSelectionAllowed(true);

        setTheDefaultJTable6Model();

        if(jTable6.getRowCount()>0)
        {
            for(int i = 0; i<jTable6.getRowCount(); i++)
            {
                if(jTable6.getValueAt(i,0).toString().equalsIgnoreCase("4"))
                {
                    jTable6.setRowSelectionInterval(i, i);
                    jTable6.scrollRectToVisible(new Rectangle(jTable6.getCellRect(i, 0, true)));
                }
            }
        }

        jTable7 = new javax.swing.JTable(){
            DefaultTableCellRenderer renderRight = new DefaultTableCellRenderer();

            { // initializer block
                renderRight.setHorizontalAlignment(SwingConstants.RIGHT);
            }

            @Override
            public TableCellRenderer getCellRenderer (int arg0, int arg1) {
                return renderRight;
            }

            @Override
            public boolean isCellEditable(int row, int col) {
                switch (col) {
                    case 0:
                    return false;
                    default:
                    return true;
                }
            }

        };

        jTable7.setAutoCreateRowSorter(false);

        jTable7.setFont(new java.awt.Font("Traditional Arabic", 0, 19));

        jTable7.setEnabled(true);

        jTable7.setRowHeight(25);

        jTable7.setSelectionMode(javax.swing.ListSelectionModel.SINGLE_SELECTION);

        jScrollPane7.setViewportView(jTable7);
        jTable7.setSelectionBackground(new Color(0,100,255,7)); // cutomize selection color for lite one for writting under selection
        jTable7.setSelectionForeground(Color.black);

        jTable7.setRowSelectionAllowed(true);

        jTable6.getSelectionModel().addListSelectionListener(new ListSelectionListener(){

            @Override
            public void valueChanged(ListSelectionEvent event) {

                // try to comment the following if condition, and setting the model through changing the jradiobuttons
                if(!event.getValueIsAdjusting() && jTable6.getSelectedRow() != -1 && jTable6.getSelectedRowCount() == 1)
                {

                    DefaultTableModel clinicsSpecsJtableModel = new DefaultTableModel(); // the model
                    Object[] clinicsSpecsJtableColumnsNames = new Object[2]; // the four showable columns from the jtable model
                    clinicsSpecsJtableColumnsNames[0] = "name" ;
                    clinicsSpecsJtableColumnsNames[1] = "address" ;
                    clinicsSpecsJtableModel.setColumnIdentifiers(clinicsSpecsJtableColumnsNames);
                    Object[] clinicsSpecsJtableRowData = new Object[2];
                    ArrayList<String> clinicsNames = new ArrayList<>();
                    ArrayList<String> clinicsAddresses = new ArrayList<>();
                    clinicsNames.add("J34hp "+jTable6.getValueAt(jTable6.getSelectedRow(), 0).toString());
                    clinicsNames.add("J34df "+jTable6.getValueAt(jTable6.getSelectedRow(), 0).toString());
                    clinicsNames.add("J34as "+jTable6.getValueAt(jTable6.getSelectedRow(), 0).toString());
                    clinicsNames.add("J34gh "+jTable6.getValueAt(jTable6.getSelectedRow(), 0).toString());
                    clinicsNames.add("J45hj "+jTable6.getValueAt(jTable6.getSelectedRow(), 0).toString());
                    clinicsNames.add("J56gr "+jTable6.getValueAt(jTable6.getSelectedRow(), 0).toString());
                    clinicsNames.add("J34mn "+jTable6.getValueAt(jTable6.getSelectedRow(), 0).toString());
                    clinicsNames.add("J56vr "+jTable6.getValueAt(jTable6.getSelectedRow(), 0).toString());
                    clinicsNames.add("J45pi "+jTable6.getValueAt(jTable6.getSelectedRow(), 0).toString());
                    clinicsAddresses.add("21 Tmk st");
                    clinicsAddresses.add("13 bcv st");
                    clinicsAddresses.add("67 rfb st");
                    clinicsAddresses.add("81 Tmk st");
                    clinicsAddresses.add("31 Tmk st");
                    clinicsAddresses.add("23 Jkl st");
                    clinicsAddresses.add("54 IUR st");
                    clinicsAddresses.add("51 Jkl st");
                    clinicsAddresses.add("71 rfb st");
                    for( int i=0 ; i<clinicsNames.size() ; i++ )
                    {

                        clinicsSpecsJtableRowData[0] = clinicsNames.get(i);
                        clinicsSpecsJtableRowData[1] = clinicsAddresses.get(i);

                        clinicsSpecsJtableModel.addRow(clinicsSpecsJtableRowData); // adding the row to the model

                    }
                    jTable7.setModel(clinicsSpecsJtableModel); // setting the model to the jtable
                    for (int column = 0; column < jTable7.getColumnCount(); column++)
                    {
                        TableColumn tableColumn = jTable7.getColumnModel().getColumn(column);
                        int preferredWidth = tableColumn.getMinWidth();
                        int maxWidth = tableColumn.getMaxWidth();

                        for (int row = 0; row < jTable7.getRowCount(); row++)
                        {
                            TableCellRenderer cellRenderer = jTable7.getCellRenderer(row, column);
                            Component c = jTable7.prepareRenderer(cellRenderer, row, column);
                            int width = c.getPreferredSize().width + jTable7.getIntercellSpacing().width;
                            preferredWidth = Math.max(preferredWidth, width);

                            //  We've exceeded the maximum width, no need to check other rows

                            if (preferredWidth >= maxWidth)
                            {
                                preferredWidth = maxWidth;
                                break;
                            }
                        }

                        tableColumn.setPreferredWidth( preferredWidth );
                    }
                    jTable7.getTableHeader().setFont(new Font("Traditional Arabic", 0, 17)); // assure the column headers font and text size
                    ((DefaultTableCellRenderer)jTable7.getTableHeader().getDefaultRenderer()).setHorizontalAlignment(JLabel.RIGHT); // align right
                    jTable7.setSelectionMode(ListSelectionModel.SINGLE_SELECTION); // set single selection only enabled
                    jScrollPane7.setViewportView(jTable7); // draw jtable             

                }                       

            }

        });                                   

        Container cont = getContentPane();
        cont.add(northPanel, BorderLayout.NORTH);
        cont.add(eastPanel, BorderLayout.EAST);
        cont.add(southPanel, BorderLayout.SOUTH);

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); // to close the JFrame        

    }

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // TODO code application logic here
        EventQueue.invokeLater(() -> {

            JFrame f = new TestingSetModel();
            f.setSize(800, 600);    
            f.setVisible(true);        

        });
    }

    private javax.swing.JPanel northPanel, southPanel, eastPanel;                                   
    private javax.swing.JRadioButton first, second;
    private javax.swing.ButtonGroup rg;                
    private javax.swing.JTable jTable6;
    private javax.swing.JScrollPane jScrollPane6;
    private javax.swing.JTable jTable7;
    private javax.swing.JScrollPane jScrollPane7;

    @Override
    public void itemStateChanged(ItemEvent e) {

        if(first.isSelected())
        {

            setTheDefaultJTable6Model();
            removeJTable7Rows();

        }else if(second.isSelected())
        {

            setTheCustomizedJTable6Model();
            removeJTable7Rows();

        }

    }

    private void removeJTable7Rows()
    {

        DefaultTableModel defaultModel = (DefaultTableModel) jTable7.getModel();
        defaultModel.setRowCount(0);        

    }    

    private void setTheDefaultJTable6Model()
    {

        DefaultTableModel numbersJtableModel = new DefaultTableModel(); // the model
        Object[] numbersJtableColumnsNames = new Object[1]; // the four showable columns from the jtable model
        numbersJtableColumnsNames[0] = "number" ;

        numbersJtableModel.setColumnIdentifiers(numbersJtableColumnsNames);
        Object[] numbersJtableRowData = new Object[1]; 
        ArrayList<String> numbers = new ArrayList<>();

        numbers.add("1");
        numbers.add("2");
        numbers.add("3");
        numbers.add("4");
        numbers.add("5");
        numbers.add("6");

        for( int i=0 ; i<numbers.size() ; i++ ) // feeding array of object with numbers data
        {
            numbersJtableRowData[0] = numbers.get(i);

            numbersJtableModel.addRow(numbersJtableRowData); // adding the row to the model

        }

        jTable6.setModel(numbersJtableModel); // setting the model to the jtable

        for (int column = 0; column < jTable6.getColumnCount(); column++)
        {
            TableColumn tableColumn = jTable6.getColumnModel().getColumn(column);
            int preferredWidth = tableColumn.getMinWidth();
            int maxWidth = tableColumn.getMaxWidth(); 

            for (int row = 0; row < jTable6.getRowCount(); row++)
            {
                TableCellRenderer cellRenderer = jTable6.getCellRenderer(row, column);
                Component c = jTable6.prepareRenderer(cellRenderer, row, column);
                int width = c.getPreferredSize().width + jTable6.getIntercellSpacing().width;
                preferredWidth = Math.max(preferredWidth, width);

                //  We've exceeded the maximum width, no need to check other rows

                if (preferredWidth >= maxWidth)
                {
                    preferredWidth = maxWidth;
                    break;
                }
            }                    

            tableColumn.setPreferredWidth( preferredWidth );
        }

        jTable6.getTableHeader().setFont(new Font("Traditional Arabic", 0, 17)); // assure the column headers font and text size
        ((DefaultTableCellRenderer)jTable6.getTableHeader().getDefaultRenderer()).setHorizontalAlignment(JLabel.RIGHT); // align right
        jTable6.setSelectionMode(ListSelectionModel.SINGLE_SELECTION); // set single selection only enabled
        jScrollPane6.setViewportView(jTable6); // draw jtable

    }

    private void setTheCustomizedJTable6Model()
    {

        DefaultTableModel numbersJtableModel = new DefaultTableModel(); // the model
        Object[] numbersJtableColumnsNames = new Object[1]; // the four showable columns from the jtable model
        numbersJtableColumnsNames[0] = "number" ;

        numbersJtableModel.setColumnIdentifiers(numbersJtableColumnsNames);
        Object[] numbersJtableRowData = new Object[1]; 
        ArrayList<String> numbers = new ArrayList<>();

        numbers.add("10");
        numbers.add("20");
        numbers.add("30");
        numbers.add("40");
        numbers.add("50");
        numbers.add("60");

        for( int i=0 ; i<numbers.size() ; i++ ) // feeding array of object with numbers data
        {
            numbersJtableRowData[0] = numbers.get(i);

            numbersJtableModel.addRow(numbersJtableRowData); // adding the row to the model

        }

        jTable6.setModel(numbersJtableModel); // setting the model to the jtable

        for (int column = 0; column < jTable6.getColumnCount(); column++)
        {
            TableColumn tableColumn = jTable6.getColumnModel().getColumn(column);
            int preferredWidth = tableColumn.getMinWidth();
            int maxWidth = tableColumn.getMaxWidth(); 

            for (int row = 0; row < jTable6.getRowCount(); row++)
            {
                TableCellRenderer cellRenderer = jTable6.getCellRenderer(row, column);
                Component c = jTable6.prepareRenderer(cellRenderer, row, column);
                int width = c.getPreferredSize().width + jTable6.getIntercellSpacing().width;
                preferredWidth = Math.max(preferredWidth, width);

                //  We've exceeded the maximum width, no need to check other rows

                if (preferredWidth >= maxWidth)
                {
                    preferredWidth = maxWidth;
                    break;
                }
            }                    

            tableColumn.setPreferredWidth( preferredWidth );
        }

        jTable6.getTableHeader().setFont(new Font("Traditional Arabic", 0, 17)); // assure the column headers font and text size
        ((DefaultTableCellRenderer)jTable6.getTableHeader().getDefaultRenderer()).setHorizontalAlignment(JLabel.RIGHT); // align right
        jTable6.setSelectionMode(ListSelectionModel.SINGLE_SELECTION); // set single selection only enabled
        jScrollPane6.setViewportView(jTable6); // draw jtable

    }    

} 
```

此示例应通过在 setTheDefaultJTable6Model() 方法中通过 setModel() 方法选择单选按钮组中的另一个单选按钮来更改 jTable6 的模型。因此，在这种情况下，我们与 jtable 模型有联系，但不能确保它不是来自任何仍在进行更改的先前事件，在将 jtable 的模型设置为新模型后，我们会遇到异常

# c++ - Any C/C++ library for analyzing SVG paths?

> ID：16032993
> 
> 赞同：1
> 
> 时间：2013-04-16T09:10:30.063
> 
> 标签：c++, c, svg

I need to analyze SVG files to identify paths that are connected, nested shapes etc. Is there any free C/C++ library that provides methods to analyze SVG paths - like finding if 2 paths overlap, whether a path lies entirely within a rectangle and so on? I tried searching on the web but couldn't find any close matches.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:18:22.747

您可以像碰撞检测一样处理它：使用与数学/物理/游戏编程中使用的重叠/交叉/封闭相同的原则检查路径点是否重叠或在形状内，您应该没问题。如果您需要更多指针，请给我留言。

**附录：** 对于一个简单的、有据可查的 2d 碰撞检测库，我可能会看看[Box2D](http://box2d.org/)：免费、流行且有据可查；或者[OZCollide](http://www.tsarevitch.org/ozcollide/) 从我所看到的情况来看，还不错，而且很容易掌握。

关于一般碰撞检测，有一个我多年来一直使用的站点，它是一个方便的文档/知识库：[RealTimeRendering](http://www.realtimerendering.com/intersections.html)

还有[Corey O'Neils 的](http://coreyoneil.com/portfolio/index.php?project=5) [碰撞检测工具包](https://code.google.com/p/collisiondetectionkit/)，但是这需要您将相关代码从 ActionScript 移植到 C++。

最后，GameDev 有一个很好的链接来学习 2d 中的碰撞检测，它是一个名为[reni2d](http://www.gamedev.net/topic/584518-reni2d-library---added-shader-supportpixel-perfect-collision/)的学习框架的帖子。

希望这可以帮助！