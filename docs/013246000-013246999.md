# StackOverflow 问答 13246000-13246999

# c# - 如何复制具有相同属性的不同类的对象？

> ID：13246001
> 
> 赞同：0
> 
> 时间：2012-11-06T07:01:43.020
> 
> 标签：c#, asp.net-mvc-3, object, inheritance, model

朋友们好！

我有 2 个模型类说**Page**和**PageHistory**。两者都包含相同的属性。在这里，每当我编辑**Page**对象时，我都需要使用相同的属性值更新**PageHistory对象。**

我试过这样的事情：

```
[HttpPost]
        [ValidateInput(false)]
        public ActionResult Edit(Page page, FormCollection frm)
        {
            try
            {
                if (ModelState.IsValid)
                {
                    page.IsPublished = !string.IsNullOrEmpty(frm["BtnPublish"]);
                    _db.Entry(page).State = EntityState.Modified;
                    _db.SaveChanges();

                    //Add updated page in hitory, if something is modified
                    PageHistory ph=new PageHistory();
                    ph.ID=page.ID
                    // likewise all attributes.....
                    // after all values are assigned, save a History object
                    ph.SaveChanges();

                    return RedirectToAction("Subpages", new { id = page.ParentId });
                }
            }
            catch (DataException)
            {
                //Log the error (add a variable name after DataException)
                ModelState.AddModelError("", "Unable to save changes. Try again, and if the problem persists see your system administrator (http://support.mysite.com).");
            }
            return View(page);
        } 
```

它正在工作，但这并没有那么优化，是否有任何替代方法可用于复制对象？还有一个问题是，是否可以**从 Page 类继承 PageHistory**类**，****因为**两者都包含相同的属性？哪一个是最好的方法？

 ***** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T07:09:48.047

1.  我建议您使用相同的模型进行相同的数据表示。

2.  我建议您创建继承类 PageHistory。它将允许您将 Page 转换为 PageHistory，例如：

    ```
    (PageHistory) page; 
    ```

3.  我建议您将 PageHistory 道具复制封装在界面后面，例如：

    ```
    public interface IPageHistoryBuilder
    {
        PageHistory Build(Page page);
    }

    public class PageHistoryBuilder : IPageHistoryBuilder
    {
        public PageHistory Build(Page page)
        {
            return new PageHistory
            {
                // copy ALL the props here
            }
        }
    } 
    ```

您的代码将如下所示：

```
if (ModelState.IsValid)
{
    page.IsPublished = !string.IsNullOrEmpty(frm["BtnPublish"]);
    _db.Entry(page).State = EntityState.Modified;
    _db.SaveChanges();

    var ph = pageHistoryBuilder.Build(page);
    ph.SaveChanges();
// and so long
} 
```

并且不要忘记在控制器构造函数中声明构建器：

```
public class YourController : Controller
{
     private readonly IPageHistoryBuilder pageHistoryBuilder;
     public YourController(IPageHistoryBuilder pageHistoryBuilder)
     {
         this.pageHistoryBuilder = pageHistoryBuilder;
     }
} 
```****

# ruby-on-rails - Ruby 中名词的复数化和大写化

> ID：13246002
> 
> 赞同：1
> 
> 时间：2012-11-06T07:01:50.050
> 
> 标签：ruby-on-rails, ruby, capitalization, pluralize

我正在为 Ruby on Rails 中的特定网页实现视图计数功能。我使用haml列表来达到我的目的。（JavaScript 库获取列表并将其呈现为下拉列表。）

这是代码片段：

```
%li.action
  = link_to t(question.views_count.to_s + ' views') 
```

我的问题是视图中的 V 在输出中大写，即使对于 0 和 1 个视图，视图也是复数形式。有什么办法可以解决这些问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:07:06.497

请参阅此链接以获取复数 [http://apidock.com/rails/ActionView/Helpers/TextHelper/pluralize](http://apidock.com/rails/ActionView/Helpers/TextHelper/pluralize)

试试你`console`的`for example`

```
1.9.3p125 :028 > pluralize(2, 'View')
 => "2 Views" 
```

**更新**

在您的控制台中尝试并使用**[大写](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-capitalize)**

```
"view".capitalize 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T08:12:32.223

你做错了，你应该让 I18N 系统（即`t`方法）自己处理复数。正确的复数处理非常复杂，不要尝试自己使用字符串操作。您正在使用该`t`方法，但它可以为您做更多的事情。

来自[I18N 指南](http://guides.rubyonrails.org/i18n.html#pluralization)：

> 插值变量有一个特殊的`:count`作用，它既被插值到翻译中，又用于根据 CLDR 定义的复数规则从翻译中选择复数：
> 
> ```
> I18n.backend.store_translations :en, :inbox => {
>   :one => '1 message',
>   :other => '%{count} messages'
> }
> 
> I18n.translate :inbox, :count => 2
> # => '2 messages' 
> ```

因此，假设您正确设置了消息数据库，那么您将执行以下操作：

```
t(:views, :count => question.views_count) 
```

你的英文翻译文件会是这样的：

```
views:
  one: "1 view"
  other: "%{count} views" 
```

# javascript - 尝试验证是否选择了单选按钮

> ID：13246007
> 
> 赞同：0
> 
> 时间：2012-11-06T07:02:17.167
> 
> 标签：javascript

我看了几个地方，找不到一个有效的例子。在我的示例中，我选择了 radio 组并测试 null，因此我可以发出一条消息，告诉用户进行选择。

```
<script>                        
function validate(form) {   
    fail = validate__veteran(form);
    if (fail == "") { 
        return true;
        } else { 
            alert(fail);
            return false;
        }
    }
</script>
<script> 

    function validate_veteran(form) {
        var radios = document.getElementsById('veteran');
        if (radios == null) {
            return "please make a selection for veteran";
        }
        return "";
    }
</script>
<form method="post" action="checkbox.php" onSubmit="return validate(this)">
        Veteran?<**input type="radio" id="veteran"** name="veteran" value="veteran" /> yes <br>
                <input type="radio" id="veteran" name="veteran" value="" /> no <br>
<input id="submit" type="submit" name="submit" value="Signup" />                        
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T07:06:03.363

您可以像这样获得检查状态：

```
var radios = document.getElementById('veteran').checked; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T07:07:05.033

1.  更好的是，为您的单选按钮分配两个不同的 ID，并检查使用

    ```
     document.getElementsById('ContorlID').checked 
    ```

或者通过你的代码 ng，使用 value 属性

```
 function validate_veteran(form) {
       var radios = document.getElementsById('veteran');
       if (radios.value == "" {
         return "please make a selection for veteran";
       }
    return "";
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T07:08:10.040

如果你可以使用 Jquery，这可以在单行中实现

```
 if ($('input[name=veteran]:checked').length <1) {
      alert("please make a selection for veteran");
return false;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T07:20:15.360

将您的表格更改为：

```
<form method="post" name='myForm' action="checkbox.php" onSubmit="return validate(this)"> 
```

和

```
 <script>
    function validate_veteran(form) 
    var veteran="";
        for (var i=0; i < document.myForm.veteran.length; i++)
   {
   if (document.myForm.veteran[i].checked)
      {
      veteran = document.myForm.veteran[i].value;
      }
 return veteran
    }
    </script> 
```

# ruby - 如何在 Hpricot ruby 中提取 onclick

> ID：13246008
> 
> 赞同：0
> 
> 时间：2012-11-06T07:02:36.373
> 
> 标签：ruby, hpricot

我想从中获取 parentID。

```
<div class="module-head" onclick="getURL('/DU/initAction.do?parentId=1063&categoryType=6')"></div> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T09:09:20.253

设置：

```
html = <<-EOF
<div class="module-head" onclick="getURL('/DU/initAction.do?parentId=1063&categoryType=6')"></div>
EOF 
```

杏：

```
doc = Hpricot html 
```

或 Nokogiri：

```
doc = Nokogiri::HTML html 
```

有趣的是，两者都是一样的：

```
doc.at('div')[:onclick][/parentId=(\d+)/, 1]
#=> "1063" 
```

# android - 如何在 PreferenceActivity 中显示标题

> ID：13246011
> 
> 赞同：3
> 
> 时间：2012-11-06T07:02:28.883
> 
> 标签：android, preferences

我`PreferenceActivity`在这个例子中使用以及[从 4.0 开始的平板电脑 Android](http://developer.android.com/guide/topics/ui/settings.html)

但是标题中不显示标题，怎么会有这些广告呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:12:11.040

PreferenceActivity 扩展了 ListActivity，当您使用 addPreferencesFromResource() 从 xml 扩展首选项时，它会将这些内容放入 ListActivity 使用的标准 ListView 中。所以基本上，你可以使用 setContentView() 来指定一个布局，但你需要有一个 ID 为“@+android:id/list”的 ListView。

```
protected void onCreate(Bundle savedInstanceState) {
requestWindowFeature(Window.FEATURE_NO_TITLE);
super.onCreate(savedInstanceState);
addPreferencesFromResource(R.xml.login_settings);
setContentView(R.layout.login_settings_layout);} 
```

您将需要 login_settings_layout.xml 中的 ListView，如下所示：

```
<ListView 
android:id="@+android:id/list"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-19T11:51:57.247

This is beacause ttitle is not enabled.

```
getActionBar().setDisplayShowTitleEnabled(false); 
```

Change it to and then call `setTitle()`

```
getActionBar().setDisplayShowTitleEnabled(true);
setTitle("Your Title"); 
```

# php - 无法追踪逻辑错误

> ID：13246016
> 
> 赞同：0
> 
> 时间：2012-11-06T07:03:11.300
> 
> 标签：php, mysql

我有以下 PHP 代码：

```
if(!($rsContactList=mysql_query($sqlContactList,$con)))
{
    echo mysql_error();
}
else
{
    echo mysql_num_rows($rsContactList);
    while(($contact=mysql_fetch_array($rsContactList)))
    {
        $phone = $contact['telephone'];
        echo "<option value='$phone>'$phone</option>";
    }
} 
```

我得到的行数超过一但无法显示。让我知道为什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:06:09.067

您正在将数据提取到数组中。这意味着它只是获取所有数据并将其放入数组中而无需循环。您可能想在`mysql_fetch_assoc`这里使用，因为它会获取下一行，执行您的代码并再次获取下一行。

```
while($contact = mysql_fetch_assoc($rsContactList)) { } 
```

或者为了防止`assignment in condition`错误：

```
while(($contact = mysql_fetch_assoc($rsContactList)) !== false) { } 
```

* * *

但是，您不应该再使用`mysql_*`了。现在有更好的选择，比如[`PDO`](http://php.net/manual/en/book.pdo.php)and [`mysqli`](http://nl3.php.net/manual/en/book.mysqli.php)。我自己使用 mysqli 是这样的：

```
$rMysqli = new mysqli("localhost", "user", "password", "database");

$sSqlQuery $rMysqli->query("SELECT * FROM table");
while(($aRowQuery = $sSqlQuery->fetch_assoc()) !== false) {  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T07:07:20.950

改变

```
While(($contact=mysql_fetch_assoc($rsContactList)))
        {... 
```

至

```
While($contact=mysql_fetch_assoc($rsContactList))
        {... 
```

# asp.net - 无法解析服务器返回的 JSON：您正在尝试解码无效的 JSON 字符串：

> ID：13246023
> 
> 赞同：1
> 
> 时间：2012-11-06T07:03:47.403
> 
> 标签：asp.net, web-services, extjs4

我正在使用 ExtJs 4.0。

我正在尝试从 Web 服务的数据库中获取数据并尝试在网格面板中进行设置，但出现以下错误**Ext.Error: Unable to parse the JSON returned by the server: You're trying to decode an invalid JSON String:**

extjs 代码：

```
Ext.application({
    name: 'HelloExt',
    launch: function() {
        // Model definition and remote store (used Ext examples data)
        Ext.define('ForumThread', {
            extend: 'Ext.data.Model',
            fields: ['countryId', 'countryName'],
            idProperty: 'countryId'
        });

        var store = Ext.create('Ext.data.Store', {
            pageSize: 20,
            model: 'ForumThread',
            autoLoad: true,
            proxy: {
                type: 'ajax',
                url: '../reports/report.asmx/display',
                contentType: "application/json; charset=utf-8;",
                 //url: '/grid.json',
                reader: {    
                    root: 'Data',          
                    type: 'json'
                }
            }
        });

        // Define grid that will automatically restore its selection after store reload
        Ext.define('PersistantSelectionGridPanel', {
            extend: 'Ext.grid.Panel'

        });

        // Create instance of previously defined persistant selection grid panel
        var grid = Ext.create('PersistantSelectionGridPanel', {
            autoscroll: true,
            height: 300,
            renderTo: Ext.getBody(),
            //region: 'center',
            store: store,
            multiSelect: true, // Delete this if you only need single row selection
            stateful: true,
            forceFit: true,
            loadMask: false,
            viewConfig: {
                stripeRows: true
            },
            columns:[{
                id: 'countryId',
                text: "countryId",
                dataIndex: 'countryId',
                flex: 1,
                sortable: false
            },{
                text: "countryName",
                dataIndex: 'countryName',
                width: 70,
                align: 'right',
                sortable: true
            } ]
        });
    }
}); 
```

报告.asmx

```
 [WebService(Namespace = "http://tempuri.org/")]
        [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
        [ToolboxItem(false)]
        // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
      [System.Web.Script.Services.ScriptService]
 [Serializable]

        public class report : System.Web.Services.WebService
            {

                [WebMethod]
                public string HelloWorld()
                {
                    return "Hello World";
                }
                [WebMethod]
                [ScriptMethod(ResponseFormat = ResponseFormat.Json, UseHttpGet = true, XmlSerializeString = false)]
                public string display()
                {
                     employee obj = new employee();

                JavaScriptSerializer serializer = new JavaScriptSerializer();
                return serializer.Serialize(obj.selectAll_employeeDetail(0, 0, 0));
                }
            } 
```

谁能建议我...我的代码有什么问题？/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T07:18:41.790

可能是因为您编写了一些可能不正确的奇怪的自定义 JSON 序列化（删除尾随、结束字符？为什么？）

.NET JSON 序列化很简单：

```
JavaScriptSerializer serializer = new JavaScriptSerializer();
HttpContext.Response.Write(serializer.Serialize(Object));
HttpContext.Response.ContentType = "application/json"; 
```

您必须将 [Serializable] 属性添加到类或使用已经具有该属性的 .NET 类型。

您返回的字符串必须不是有效的 JSON。

[编辑] 奇怪的事情：Asmx 服务（也可能是 WCF 服务，因为我从 microsoft AJAX 脚本逆向工程解决方案）不寻找“接受”标头来定义响应类型，因为它应该导致 RFC 用于 http： [http://www .w3.org/Protocols/rfc2616/rfc2616-sec14.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)

> Accept request-header 字段可用于指定响应可接受的某些媒体类型。

所以这应该足够了，但使用 jQuery.ajax 就不行了。从我上面提到的 AJAX 脚本中，我获取了标头 Content-Type：

> “内容类型”：“应用程序/json；charset=utf-8”

用这个 jQuery 工作得很好。所以我想你必须将此标头添加到请求中，这应该可以。奇怪的是 [ScriptMethod] 属性没有将 JSON 的默认响应设置为状态[http://msdn.microsoft.com/en-us/library/system.web.script.services.scriptmethodattribute.aspx](http://msdn.microsoft.com/en-us/library/system.web.script.services.scriptmethodattribute.aspx)：

> 指定将响应序列化为 JSON 还是 XML。默认值为 Json。您还必须通过此标头强制服务作为脚本服务工作：

[http://en.wikipedia.org/wiki/List_of_HTTP_header_fields](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields)：

> Content-Type 请求正文的 MIME 类型（用于 POST 和 PUT 请求）

[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)：

> Content-Type entity-header 字段表示发送给接收者的 entity-body 的媒体类型

所以我猜微软的人会这样做：“如果你不以 JSON 格式发送，我们也不会把它发送给你。” :)

我希望这会奏效。

PS：因为这是 json 服务，如果您返回 .NET 内置类型或具有 [Serializable] 属性的类型，您可以直接返回它。不需要预先序列化无论如何都会被序列化的响应。

# iphone - MPAVController >> 没有足够的缓冲来跟上

> ID：13246026
> 
> 赞同：0
> 
> 时间：2012-11-06T07:03:58.213
> 
> 标签：iphone, ios, xcode, ios6, audio-recording

我正在使用此代码播放视频。

```
player= [[ MPMoviePlayerViewController alloc] initWithContentURL:movieURL];
player.navigationController.navigationBar.hidden = YES;
player.moviePlayer.scalingMode = MPMovieScalingModeAspectFit;
player.moviePlayer.controlStyle = MPMovieControlStyleNone;
player.moviePlayer.movieSourceType = MPMovieSourceTypeFile;
player.moviePlayer.fullscreen = NO;
[self presentModalViewController:player animated:NO]; 
```

视频播放完美但问题是在完成播放后我在控制台中得到了这个结果。

```
[MPAVController] Autoplay: Likely to keep up or full buffer: 0
[MPAVController] Autoplay: Skipping autoplay, not enough buffered to keep up. 
```

然后在我尝试录制声音但无法录制之后。

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:11:21.457

同样的任务是由我完成的......你可以参考我的代码......我希望它有帮助......

```
- (IBAction) startRecording:(id)sender
{

    NSLog(@"**************Recording start**************");    

    NSMutableDictionary *recordSetting = [[NSMutableDictionary alloc] init];

    // We can use kAudioFormatAppleIMA4 (4:1 compression) or kAudioFormatLinearPCM for nocompression
    [recordSetting setValue :[NSNumber numberWithInt:kAudioFormatLinearPCM] forKey:AVFormatIDKey];

    // We can use 44100, 32000, 24000, 16000 or 12000 depending on sound quality
    [recordSetting setValue:[NSNumber numberWithFloat:41000.0] forKey:AVSampleRateKey];

    [recordSetting setValue:[NSNumber numberWithInt: kAudioFormatAppleLossless] forKey:AVFormatIDKey];

    // We can use 2(if using additional h/w) or 1 (iPhone only has one microphone)
    [recordSetting setValue:[NSNumber numberWithInt: 1] forKey:AVNumberOfChannelsKey];

    [recordSetting setValue:[NSNumber numberWithInt:16] forKey:AVEncoderBitRateKey];

    NSError *error;

    if (![[NSFileManager defaultManager] fileExistsAtPath:mediaPath])
    {
        [[NSFileManager defaultManager] createDirectoryAtPath:mediaPath withIntermediateDirectories:NO attributes:nil error:&error];
    }

    mediaPath = [[NSString stringWithFormat:@"%@/sound.caf", DOCUMENTS_FOLDER] retain];
    NSURL *url = [NSURL fileURLWithPath:mediaPath];
    NSLog(@"AUDIOPATH%@",mediaPath);
    err = nil;
    NSData *audioData = [NSData dataWithContentsOfFile:[url path] options: 0 error:&err];

    if(audioData) {

        NSFileManager *fm = [NSFileManager defaultManager];
        [fm removeItemAtPath:[url path] error:&err];

    }

    err = nil;
    audioRecorder = [[ AVAudioRecorder alloc] initWithURL:url settings:recordSetting error:&err];

    if(!audioRecorder){

        NSLog(@"audioRecorder : %@ %d %@", [err domain], [err code], [[err userInfo] description]);
        UIAlertView *alert =
        [[UIAlertView alloc] initWithTitle: @"Warning"
                                   message: [err localizedDescription]
                                  delegate: nil cancelButtonTitle:@"OK"
                         otherButtonTitles:nil];
        [alert show];
        return;
    }

    //prepare to record
    [audioRecorder setDelegate:self];
    [audioRecorder prepareToRecord];

    audioRecorder.meteringEnabled = YES;

    BOOL audioHWAvailable = audioSession.inputIsAvailable;

    if (! audioHWAvailable) {

        UIAlertView *cantRecordAlert = [[UIAlertView alloc] initWithTitle: @"Warning"
                                                                  message: @"Audio input hardware not available"
                                                                 delegate: nil cancelButtonTitle:@"OK"
                                                        otherButtonTitles:nil];
        [cantRecordAlert show];
        [cantRecordAlert release];
        return;
    }

    // start recording
    [audioRecorder record];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:18:09.157

您需要在播放视频后录制音频，因此您必须使用此通知才能知道电影播放器​​已完成播放视频...为此您需要使用此代码。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlaybackComplete:)
        name:MPMoviePlayerPlaybackDidFinishNotification object:moviePlayerController]; 
```

在那个 moviePlaybackComplete: 方法中，您录制了音频。为此，您最好使用 AVAudioPlayer 类。现在使用这段代码进行记录..

```
AVAudioRecorder *recorder = [[AVAudioRecorder alloc] initWithURL:recordedTmpFile settings:recordSetting error:&error];
[recorder setDelegate:self];
[recorder prepareToRecord];
[recorder record]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T15:28:07.110

我不确定这是否会有所帮助，但您应该向您展示`MPMoviePlayerViewController`presentMoviePlayerViewControllerAnimated [:](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/UIViewController_MediaPlayer_Additions/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/presentMoviePlayerViewControllerAnimated:)，而不是`presentModalViewController:animated:`像这样：

```
[self presentMoviePlayerViewControllerAnimated:player]; 
```

如果您手动关闭`MPMoviePlayerViewController`您应该使用`dismissMoviePlayerViewControllerAnimated`.

[这是一个](https://stackoverflow.com/questions/12414717/ios-6-streaming-player-com-apple-coremedia-networkbuffering-bug)可能*有助于*解决 MPAVController 日志问题的线程。似乎您`MPMoviePlayerViewController` `moviePlayer`正在`MPMoviePlayerController`对`MPMoviePlayerViewController`.

如果没有看到您用于执行语音录制的代码，就无法判断您的语音录制问题是否与 MPMoviePlayerViewController 相关，或者您是否在其他地方有错误。我建议发布更多您的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T10:48:40.607

我还发现这些消息可能是由于向媒体播放器发送了不正确的 URL 引起的。有时候真的就是这么简单。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-12T18:27:38.310

检查 MPMoviePlayerController 上的[useApplicationAudioSession](https://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/MPMoviePlayerController/MPMoviePlayerController.html)属性。在 iOS 3.1.x 中，电影播放器​​总是获得自己的系统提供的音频会话。在较新版本的 iOS 中，它现在可以共享应用程序会话，这也是默认值。在开始播放电影之前尝试将该属性切换为 NO。

# javascript - 在客户端通过多个条件过滤jqGrid

> ID：13246029
> 
> 赞同：3
> 
> 时间：2012-11-06T07:04:20.613
> 
> 标签：javascript, jqgrid

我有一个带有一些记录的 jqGrid，并希望根据多个条件过滤记录。

例如，如果有三列，名称、年龄和城市，我想在以下条件下过滤网格：

```
Name = "Mark" and Age = 25 and City = 'NY' 
```

以下代码工作正常 -

```
 var grid = jQuery("#memberDetails");
 var postdata = grid.jqGrid('getGridParam', 'postData');

 var filterArray = new Array();
 var filterConidtion; 

 filterConidtion = new Object();
 filterConidtion.field = "name";
 filterConidtion.op = "eq";
 filterConidtion.data = "Mark";
 filterArray.push(filterConidtion);

 filterConidtion = new Object();
 filterConidtion.field = "Age";
 filterConidtion.op = "eq";
 filterConidtion.data = "25";
 filterArray.push(filterConidtion);

 filterConidtion = new Object();
 filterConidtion.field = "City";
 filterConidtion.op = "eq";
 filterConidtion.data = "NY";
 filterArray.push(filterConidtion);

 jQuery.extend(postdata, {
        filters: {
            "groupOp": "and",
            "rules": filterArray
        }
    });

 grid.jqGrid('setGridParam', {
            search: true,
            postData: postdata
    });

 grid.trigger("reloadGrid", [{
        page: 1
    }]); 
```

但我不确定如何使以下过滤器工作：

```
Name = "Mark" and Age = 25 and (City = 'NY' OR City = 'FL') 
```

在`groupOp`AND 或 OR 条件下工作，不确定如何在`groupOp`

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T08:37:04.467

的格式在[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:advanced_searching#options)`filters`中进行了描述。要实现更复杂的搜索条件，可以使用. 相应的代码可能如下：`groups``filters`

```
var $grid = $("#memberDetails");

$.extend($grid.jqGrid("getGridParam", "postData"), {
    filters: JSON.stringify({
        groupOp: "AND",
        rules: [
            { field: "Name", op: "eq", data: "Mark" },
            { field: "Age",  op: "eq", data: "25" }
        ],
        groups: [
            {
                groupOp: "OR",
                rules: [
                    { field: "City", op: "eq", data: "NY" },
                    { field: "City", op: "eq", data: "FL" }
                ],
                groups: []
            }
        ]
    })
});
$grid.jqGrid("setGridParam", {search: true})
     .trigger('reloadGrid', [{current: true, page: 1}]); 
```

# javascript - 寻找支持内联弹出窗口的 jQuery 工具提示插件，如 overLib

> ID：13246031
> 
> 赞同：0
> 
> 时间：2012-11-06T07:04:04.167
> 
> 标签：javascript, jquery, jquery-plugins, tooltip, mouseover

我将从代码开始

```
<form name='form 1' action='$action'>
input tags
<table>
some tr tags along with td tags
and after some lines in the same table under a td tag
<td>
<a href="javascript:void(0);" onclick="return overlib('<FORM name=\'form 2\' action=\'$action\'>....code for this form.....</FORM>');">XYZ</a>
</td>
....
....
</table>
</form> 
```

如您所见，我使用[overLib](http://www.bosrup.com/web/overlib/)创建了一个内联弹出窗口。当您单击“XYZ”时，这将返回一个表单。它工作正常。

现在我想使用其他一些 jQuery 插件，我尝试了 jQuery Hovercards、jQuery tooltip 等。但我面临的问题是这些插件没有像 overLib 这样的弹出功能。他们基本上使用“hiddendiv”并在您将鼠标悬停在“XYZ”上时显示它（当您将鼠标悬停在XYZ上时应该返回表单）但它不返回表单，为什么？因为如果你仔细注意到 this`form 2`在 inside`form 1`并且你知道你不能使用`form`inside another `form`。它在 overLib 案例中运行良好，因为它正在创建一个弹出窗口。

现在我正在寻找一个 overLib 替代方案，它可以创建一个弹出窗口，以便我可以在该弹出窗口中返回一个表单。是否有任何具有内联弹出功能的工具提示插件？或者我如何调整这个 HTML 代码以允许表单内的表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:47:45.423

没有找到任何相关的插件，所以我创建了一个简单的 jQuery 弹出窗口。这个[答案](https://stackoverflow.com/a/1329605/257635)帮助了我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T07:47:52.163

尝试替换此代码

```
<a href="javascript:void(0);" onclick="return overlib('<FORM name=\'form 2\' action=\'$action\'>....code for this form.....</FORM>');">XYZ</a> 
```

有了这个

```
<a href="javascript:void(0);" onclick="return overlib('\<FORM name=\'form 2\' action=\'$action\'\>....code for this form.....\</FORM\>');">XYZ</a> 
```

我试过了，效果很好。

# iphone - 在 Objective C 中将数字舍入到更大的值

> ID：13246032
> 
> 赞同：-1
> 
> 时间：2012-11-06T07:04:24.877
> 
> 标签：iphone, objective-c

我想将我的数字四舍五入到更大的价值。例如，如果我有 234，我想将其设为 300，将 4436 设为 5000。我已经尝试过，但我可以将我的价值四舍五入，而不是十万，而是几十。就像我有一个值 7771 它四舍五入到 7900 或 7800 但我想要它在 8000。

```
int temp = lroundf([[arrayPercentage objectAtIndex:i]floatValue]);
maxPer = (((temp + 10)/10))*10; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:25:01.490

这个怎么样：

```
-(void)roundUpNumber:(NSInteger) num {
    NSInteger numLength = [[NSString stringWithFormat:@"%ld",num] length];
    NSInteger newNum = ceil(num/pow(10,numLength-1)) * pow(10,numLength -1);
    NSLog(@"%ld",newNum);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T07:27:22.070

```
int num, count = 0;
    int originalNumber = 7771;

    num = originalNumber;
    while (num) {
        num = num/10;
        count ++;
    }

    int power = pow(10,(count -1));

    int firstDigit = originalNumber / power;

    int finalNumber = (firstDigit + 1)*  power;

    NSLog(@"final result : %d",finalNumber); 
```

# sql-server - 在 sql server 中回滚事务的更好方法是什么？

> ID：13246038
> 
> 赞同：1
> 
> 时间：2012-11-06T07:04:39.697
> 
> 标签：sql-server, sql-server-2008, tsql, transactions, rollback

我开始知道我们可以使用“ **set xact_abort on** ”进行回滚事务我想知道回滚事务的更好方法：使用“set xact_abort on”或简单的以下代码

```
begin try
begin tran
-- statements 
commit tran
end try
begin catch
rollback tran
end catch 
```

请帮助我在一次插入记录数时选择哪种方法更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T05:18:57.060

您提到的代码是我通常遵循的，因为它允许以优雅的方式处理错误条件。在 proc 中使用时，您可以在 catch 块中记录额外信息，例如使用的源/proc 参数等。

# c# - 这是。' 有用的属性？

> ID：13246043
> 
> 赞同：0
> 
> 时间：2012-11-06T07:04:36.560
> 
> 标签：c#, asp.net, properties

找不到任何关于它的文章。所以..正在使用'* *this。**Chart1..' 在 asp.net、c# 中有用吗？任何时间节省或为什么以及何时应该使用它？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T07:07:49.223

它根本不是特定于 ASP.NET 的。它只是 C# 的一部分。

有些人建议您应该*始终*使用它来指示您指的是实例成员，而不是静态成员或局部变量。

*就我个人而言，我仅在需要*消除歧义时才使用它，例如

```
public Person(string name)
{
    this.name = name;
} 
```

假设您处于不影响代码*含义*的情况（即您没有消除歧义），它对生成的 IL 绝对没有影响，因此不会对性能造成损害或好处。

请注意，在您想要在当前对象上调用扩展方法的极少数情况下，您也需要使用`this`。例如：

```
public class Foo<T> : IEnumerable<T>
{
    // Implementation omitted

    public int CountDistinct()
    {
        return this.Distinct().Count(); // this is required here
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T07:10:41.657

根据 MSDN， 的三种常见用途`this`：

*   限定被相似名称隐藏的成员。
*   将对象作为参数传递给其他方法
*   声明索引器

有关示例，请参阅[文档](http://msdn.microsoft.com/en-us/library/dk1507sz%28v=vs.80%29.aspx)。

# objective-c - UIScrollView 的高度会改变吗？

> ID：13246052
> 
> 赞同：0
> 
> 时间：2012-11-06T07:05:31.313
> 
> 标签：objective-c, ios, uitableview, uiscrollview

我正在添加`UITableView`和`UIButton`。`UIScrollView`按钮位于 tableview 下方。

好吧，当我从表中选择任何行时，它会在该行上添加一个按钮，到目前为止一切正常，但是当我第二次单击该行时，它会删除添加在其上的按钮，但问题是随着删除该按钮它也向上滚动我的表格，表格下方的按钮位于其位置，即。它在表格和按钮之间留下了空隙。每次单击一行时都会重新加载我的表。`UIButton`在下面添加代码`UITableView`

```
 - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        mainTable.frame = CGRectMake(mainTable.frame.origin.x, mainTable.frame.origin.y,
                                      mainTable.frame.size.width,
                                      ([menuItemsArray count] * 60) + 380);

        [scrollView setContentSize:CGSizeMake(320,([menuItemsArray count] * 60) + 80 + 350)];

        reserverBtnBottom = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        [reserverBtnBottom setFrame:CGRectMake(20.0f,mainTable.frame.size.height,280, 40)];
        [reserverBtnBottom addTarget:self action:@selector(reserveBtnAction) forControlEvents:UIControlEventTouchUpInside];

        [reserverBtnBottom setBackgroundImage:[UIImage imageNamed:@"normal.png"] forState:UIControlStateNormal];
        [reserverBtnBottom setAlpha:1];
        [reserverBtnBottom setTitle:@"Reserve this table" forState:UIControlStateNormal];
        [reserverBtnBottom setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
        [scrollView addSubview:reserverBtnBottom];
rest thing goes here
} 
```

我错过了什么？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:40:47.343

`heightForRowAtIndexPath`对于这种计算来说是一个不好的地方，因为你正在改变一个单行状态，这个方法可能会被调用一次来计算新的高度。当它被调用时，单元格仍然具有旧的高度值，表格也是如此。

按钮位置计算应移至`layoutSubviews:`表格和按钮超级视图的方法，**在**您的示例中它是一个滚动视图。它应该工作的方式是，一旦它们中的任何一个更改了它的框架，超级视图就会重新计算所有子视图框架。

有时，不是用`layoutSubviews:`处理覆盖框架计算`viewController`，而是你试图做的，但你以错误的方式做。如果您不想覆盖 scrollView ，则需要为框架计算找到更好的位置`layoutSubviews:`。

如果您只需要滚动视图来添加表格下方的按钮，那么根据我的经验，摆脱滚动视图会更好（至少因为您在另一个滚动视图中确实有滚动视图，这不是一个好习惯）并添加表footerView 的按钮。页脚视图显示在表格下方并与表格一起滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:03:50.940

很长一段时间后，我解决了我的问题。把这段代码`viewWillAppear`改为`heightForRowAtIndexPath`-

```
mainTable.frame = CGRectMake(mainTable.frame.origin.x, mainTable.frame.origin.y,
                                      mainTable.frame.size.width,
                                      ([menuItemsArray count] * 60) + 380);

        [scrollView setContentSize:CGSizeMake(320,([menuItemsArray count] * 60) + 80 + 350)]; 
```

并将我的 reserveBtnBottom 移动到 UITableView 的页脚。

感谢**A-Live**的大力帮助。

# iphone - 解析一个 url 字符串

> ID：13246069
> 
> 赞同：0
> 
> 时间：2012-11-06T07:07:05.293
> 
> 标签：iphone, objective-c, ios, parsing

我有一个带有 url 和属性的 URL 字符串。请提供一些逻辑，以便我可以解析网址。网址的格式为：

`url= http://www.sample.com?`" 此处的另一个 url，其参数由 & 分隔" ¶m

我想要一个字符串中的“另一个url，参数由&分隔”，另一个字符串中的“param”。

我正在使用 IOS 即目标 c。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T07:16:56.957

`NSURL`有一个方法`pathComponents`，它返回一个包含所有不同路径组件的数组。

```
NSString *url_ = @"foo://name.com:8080/12345;param?foo=1&baa=2#fragment";
NSURL *url = [NSURL URLWithString:url_];

NSLog(@"scheme: %@", [url scheme]); 
NSLog(@"host: %@", [url host]); 
NSLog(@"port: %@", [url port]);     
NSLog(@"path: %@", [url path]);     
NSLog(@"path components: %@", [url pathComponents]);        
NSLog(@"parameterString: %@", [url parameterString]);   
NSLog(@"query: %@", [url query]);       
NSLog(@"fragment: %@", [url fragment]); 
```

输出：

```
scheme: foo
host: name.com
port: 8080
path: /12345
path components: (
    "/",
    12345
)
parameterString: param
query: foo=1&baa=2
fragment: fragment 
```

来源：[iOS：将 URL 解析为段](https://stackoverflow.com/questions/5903157/ios-parse-a-url-into-segments)

# c# - 无法在 C# 中更新 UI 组件

> ID：13246076
> 
> 赞同：1
> 
> 时间：2012-11-06T07:07:36.350
> 
> 标签：c#, events, user-interface, components, message-loop

我正在编写一个程序来监视网络上各种设备的状态。这些设备的详细信息存储在一个文件中。HandleClientComm 类从文件中读取有关这些设备的信息并与它们建立 tcp 连接。读取文件后，使用 manEvent 进行通知。为每个设备调用 UpdateGUI 函数。当 data.caller 等于 1 时，它会为该设备添加控件，但禁用组框。函数 hd.StartThreads 使用 Threadpool 侦听来自各种设备的连接。接受连接后，将再次调用 UpdateGUI 函数，其 data.caller 值为 2。我的问题是未启用 groupbox。消息框显示“开始”，但没有结束。尝试访问除组框以外的其他控件，但发现我无法从那里访问任何控件。消息循环是否有问题，因为我的代码中没有运行无限循环？

```
namespace FA
{
  public partial class EditDevice : Form
  {
      public struct DisplayComponents
      {
          public GroupBox gp;
          public List<Panel> labelPanel;
          public List<FlowLayoutPanel> picPanel;
          public List<Label> LabelList;
          public List<PictureBox> Pics;
          public Label Mid, Date, Time;
          public int gpHeight, gppt;
      };
      public DisplayComponents[] comps;
      private DeviceList[] dev;
      private ManualResetEvent manEvent;
      private int devCount;
      private HandleClientComm hd;

      public EditDevice()
      {
          InitializeComponent();
          //Create event to notify whether device file has been read
          manEvent = new ManualResetEvent(false);
          //Create object of the client communication class
          hd = new HandleClientComm(manEvent);
          //wait for the file read notification
          manEvent.WaitOne();
          //get the device count
          devCount = hd.devCount;
          //get the device details
          dev = hd.dv; 
          initializeForm();
          //Add event handler for device status change
          hd.StatusChanged += new HandleClientComm.StatusChangeHandler(UpdateGUI);
          //Start thread to monitor device status
          Thread th = new Thread(hd.StartThreads);
          th.Start();
          th.Join();
      }

       public void initializeForm()
      {
          //Create components
          comps = new DisplayComponents[hd.devCount];
          // Groupbox initial point
          int gppt = 40;
          //Calculate Groupbox point and heights for each devices
          for (int i = 0; i < devCount; i++)
          {
              comps[i].gpHeight = 60;
              comps[i].gpHeight = comps[i].gpHeight + (dev[i].Zones / 21) * 77;
              if (dev[i].Zones % 21 != 0)
                  comps[i].gpHeight += 77;
              comps[i].gppt = gppt;
              gppt += comps[i].gpHeight+10;
          } 
      }

      private void UpdateGUI(object sender, StatusChangeEventArgs data)
      {
          if (data.caller == 1)
          {
              //Function to add controls to the form
              addDeviceControls(data.index);
          }
          else
          {
              MessageBox.Show("begin");
              comps[data.index].gp.Enabled = true;
              MessageBox.Show("end");
          }
      }
   }

 public class StatusChangeEventArgs : EventArgs
  {
      public int index { get; internal set; }
      public int caller { get; internal set; }

      public StatusChangeEventArgs(int index1, int callno)
      {
          this.index = index1;
          this.caller = callno;
      }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:56:17.403

听起来您的`HandleClient.Comm.StatusChangehandler(UpdateGUI);`电话正在消耗错误，或者更高级别的东西正在捕获它们。您是否尝试过中断指向并单步执行代码？

为了从不同的线程更新控件，您需要在主线程上调用更改。

请看这个问题，因为它可能会帮助你更多。[如何从 C# 中的另一个线程更新 GUI？](https://stackoverflow.com/questions/661561/how-to-update-the-gui-from-another-thread-in-c)

如果您使用的是 WPF，那么它的完成方式略有不同，需要调用 Dispatcher.Invoke 以进行更新。

我希望这能够帮到你。听起来您的错误确实在您不知情的情况下被消耗掉了。

# android - Android中的蓝牙打印

> ID：13246082
> 
> 赞同：1
> 
> 时间：2012-11-06T07:08:00.370
> 
> 标签：android

我正在开发一个 android 应用程序，我需要在其中使用蓝牙打印字符串数据。

谁能帮我解决这个问题。

我正在使用 Google nexus 和三星 Galaxy Tab，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T07:21:38.473

您必须使用蓝牙 api 来搜索设备，使用蓝牙适配器搜索设备，使用蓝牙套接字连接蓝牙设备。您还需要在清单文件中设置一些权限才能使用蓝牙 api，此[链接](http://developer.android.com/guide/topics/connectivity/bluetooth.html)将对您有所帮助..

# android - 将mapview中的地图从一个位置移动到android中的另一个位置

> ID：13246084
> 
> 赞同：0
> 
> 时间：2012-11-06T07:08:01.123
> 
> 标签：android, google-maps, android-mapview, android-maps

我在我的应用程序中有一种情况，我应该将我的地图从一个位置移动到另一个位置....我对 android 很陌生..我发现了如何在两个位置之间画一条线..

```
public class Mapview extends MapActivity implements LocationListener{
MapController mc;
GeoPoint p,p1,p2;
LocationManager lm;
String provider;
 class Mapoverlay extends com.google.android.maps.Overlay
 {

    @Override
    public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
            long when) {
        // TODO Auto-generated method stub
        super.draw(canvas, mapView, shadow);
        Point screenpoints=new Point();     
        Point screenpoints1=new Point();
        Point screenpoints2=new Point();
         Paint paint;
         paint = new Paint();
         paint.setColor(Color.RED);
         paint.setAntiAlias(true);
         paint.setStyle(Style.FILL);
         paint.setStrokeWidth(2);
         paint.setAlpha(120);
         Paint paint1;
         paint1 = new Paint();
         paint1.setColor(Color.BLUE);
         paint1.setAntiAlias(true);
         paint1.setStyle(Style.FILL);
         paint1.setStrokeWidth(2);
         paint1.setAlpha(120);
        if(p != null)
        {
            mapView.getProjection().toPixels(p, screenpoints);
            mapView.getProjection().toPixels(p1, screenpoints1);
            mapView.getProjection().toPixels(p2, screenpoints2);
//              Bitmap map=BitmapFactory.decodeResource(getResources(),      R.drawable.pushpin1);
//               canvas.drawBitmap(map, screenpoints.x, screenpoints.y-53, null);
             canvas.drawLine(screenpoints.x,screenpoints.y,screenpoints1.x,screenpoints1.y, paint);
             canvas.drawLine(screenpoints.x,screenpoints.y,screenpoints2.x,screenpoints2.y, paint);
        }

        return true;

    }

 }

@Override
protected void onCreate(Bundle icicle) {
    // TODO Auto-generated method stub
    super.onCreate(icicle);
    setContentView(R.layout.mapview);
    MapView map=(MapView)findViewById(R.id.mapView);
    map.setBuiltInZoomControls(true);
     mc=map.getController();
     String[] coordinates={"51.4750766129036", "-3.15672342166522"};
     double lat = Double.parseDouble(coordinates[0]);
     double lng = Double.parseDouble(coordinates[1]);

     p=new GeoPoint((int)(lat*1E6), (int)(lng*1E6));
     String[] coordinates1={"17.453117" , "78.467586" };
     double lat1 = Double.parseDouble(coordinates1[0]);
     double lng1 = Double.parseDouble(coordinates1[1]);

     p2=new GeoPoint((int)(lat1*1E6), (int)(lng1*1E6));
      p1 = new GeoPoint(19240000,-99120000);

//        p = new GeoPoint(19241000,-99121000);
     lm=(LocationManager)getSystemService(Context.LOCATION_SERVICE);

     Criteria criteria = new Criteria();
     criteria.setAccuracy(Criteria.ACCURACY_FINE);
     criteria.setAltitudeRequired(false);
     criteria.setBearingRequired(false);
     criteria.setCostAllowed(true);
     criteria.setPowerRequirement(Criteria.POWER_LOW);
     provider=lm.getBestProvider(criteria, true);

     Location loc=lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
     List<String>  lists=lm.getAllProviders();
//       float f=loc.distanceTo(loc);
     if (loc!=null){
         System.out.println("Provider " + provider + " has been selected.");
        onLocationChanged(loc); 
     }else{
         Toast.makeText(getApplicationContext(), "Provider " + provider+ loc +  lists+" has not been selected.", 5000).show();
//           this.finish();
     }

//       Toast.makeText(getApplicationContext(), p.getLatitudeE6()+p.getLongitudeE6(), Toast.LENGTH_SHORT).show();
     mc.animateTo(p);
     mc.setZoom(1);
     map.invalidate();
     Mapoverlay mapOverlay = new Mapoverlay();
        List<Overlay> listOfOverlays = map.getOverlays();
        listOfOverlays.clear();
        listOfOverlays.add(mapOverlay);        

} 
```

我被困在没有用户活动的情况下将地图从一个位置移动到另一个位置

例如：当应用程序启动显示纽约市的位置时，地图应移至德克萨斯州......任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T09:30:05.233

试试这个类只传**Activity act,GeoPoint src,GeoPoint dest, int color, MapView mMapView**

```
To call this class do this

    new getRoute().DrawPath(this,mGeoPoint,getGeoPoint,Color.RED,mMapView);  

  public class getRoute 
    {
        /*Variable*/
        double mIntentLatitude, mIntentLongitude;
        double mCursorLatitude, mCursorLongitude, mStartLatitude, mStartLongitude, mEndLatitude, MEndLongitude;
        String mJsonData;
        String mEnd_Address, mStart_Address, mName;
        int mLength;
        GeoPoint mGeoPoint = new GeoPoint(220328269, 725588202);
        double mLatitude_End[], mLongitude_End[], mLatitude_Start[], mLongitude_Start[];
        Activity activity;

        public getRoute
        (){

        }   
        boolean error = false;
        public void DrawPath(Activity act,GeoPoint src,GeoPoint dest, int color, MapView mMapView01)
        {
            // connect to map web service
            DrawPathBack draw = new DrawPathBack(act, src, dest, color, mMapView01);
            draw.execute("Draw");
        }
        public class DrawPathBack extends AsyncTask<String, Integer,Void>
        {
            ProgressDialog bar;
            List<Overlay> mListOverlay;
            MapOverlay mapOverlay;
            ItemizedOverlay<OverlayItem> mItemizedOverlay;

            GeoPoint src,dest;
            int color;
            MapView mMapView;
            CommonMethod mCommonMethod;
            String [] pairs;
            String[] lngLat;

            public DrawPathBack(Activity act,GeoPoint gpsrc,GeoPoint gpdest, int c, MapView mMap)
            {
                activity =act;
                src=gpsrc;
                dest=gpdest;
                color = c;
                mMapView=mMap;
                mListOverlay = mMapView.getOverlays();
                mapOverlay = new MapOverlay(mGeoPoint);
                mListOverlay.add(mapOverlay);
                mMapView.invalidate();

            }
            @Override
            protected Void doInBackground(String... params)
            {

                HttpParams httpParameters = new BasicHttpParams();

                HttpConnectionParams.setSoTimeout(httpParameters, 60000);

                HttpClient client = new DefaultHttpClient();

                try {

                    HttpPost httpPost = new HttpPost("http://maps.googleapis.com/maps/api/directions/json?origin="+ (Double.toString((double)src.getLatitudeE6()/1.0E6)) + "," +(Double.toString((double)src.getLongitudeE6()/1.0E6 ) + "&destination=" + (Double.toString((double)dest.getLatitudeE6()/1.0E6)) + ","+  (Double.toString((double)dest.getLongitudeE6()/1.0E6))+ "&sensor=false"));
                    mIntentLatitude=((double)src.getLatitudeE6()/1.0E6);
                    mIntentLongitude=((double)src.getLongitudeE6()/1.0E6);

                    //httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                    HttpResponse httpResponse = client.execute(httpPost);
                    mJsonData = EntityUtils.toString(httpResponse.getEntity());

                } catch (ClientProtocolException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                return null;
            }
            @Override
            protected void onProgressUpdate(Integer... progress)
            {
                bar.setMessage("Time Progress "+progress[0]);
            }
            @Override
            protected void onPostExecute(Void result) 
            {
                try {

                    JSONObject jsonObj = new JSONObject(mJsonData);

                    // grabbing the routes object
                    JSONArray routes = jsonObj.getJSONArray("routes");

                    for (int i = 0; i < routes.length(); i++) {

                        JSONObject rout = routes.getJSONObject(i);

                        JSONObject bounds = rout.getJSONObject("bounds");

                        JSONObject northest = bounds.getJSONObject("northeast");

                        mStartLatitude = northest.getDouble("lat");
                        mStartLongitude = northest.getDouble("lng");

                        JSONObject southwest = bounds.getJSONObject("southwest");
                        mEndLatitude = southwest.getDouble("lat");
                        MEndLongitude = southwest.getDouble("lng");
                        System.out.println("get data from jeson" + mCursorLatitude + mCursorLongitude + mEndLatitude
                                + MEndLongitude);

                        // grabbing the routes legs
                        JSONArray legs = rout.getJSONArray("legs");
                        System.out.println("length of legs array     " + legs.length());
                        for (int j = 0; j < legs.length(); j++) {
                            JSONObject leg = legs.getJSONObject(j);
                            System.out.println("enter in second array");

                            JSONObject distance = leg.getJSONObject("distance");
                            String mTextDistent = distance.getString("text");
                            System.out.println("distances bitween two point" + mTextDistent);
                            JSONObject duration = leg.getJSONObject("duration");
                            String mTextDurestion = duration.getString("text");

                            mEnd_Address = leg.getString("end_address");

                            mStart_Address = leg.getString("start_address");
                            System.out.println("get data from jeson in second arry"
                                    + mTextDurestion + " " + mEnd_Address + "  " + mStart_Address);

                            JSONArray step = leg.getJSONArray("steps");

                            mLength = step.length();

                            mLatitude_End = new double[mLength];
                            mLongitude_End = new double[mLength];
                            mLatitude_Start = new double[mLength];
                            mLongitude_Start = new double[mLength];

                            for (int k = 0; k < step.length(); k++) {

                                JSONObject st = step.getJSONObject(k);

                                System.out.println("enter in third array");
                                JSONObject end_lo = st.getJSONObject("end_location");

                                JSONObject start_lo = st
                                .getJSONObject("start_location");

                                mLatitude_End[k] = end_lo.getDouble("lat");
                                mLongitude_End[k] = end_lo.getDouble("lng");

                                mLatitude_Start[k] = start_lo.getDouble("lat");
                                mLongitude_Start[k] = start_lo.getDouble("lng");

                            }
                            for (int mDistanse = 0; mDistanse < mLength; mDistanse++) {
                                System.out.println("end location let" + mLatitude_End[mDistanse]);
                                System.out.println("end location long+"
                                        + mLongitude_End[mDistanse]);
                                System.out.println("Start location let"
                                        + mLatitude_Start[mDistanse]);
                                System.out.println("Start location long"
                                        + mLongitude_Start[mDistanse]);
                            }
                        }
                    }

                } catch (Exception e) {
                    // TODO: handle exception
                    e.printStackTrace();
                }
            }
        }

        public class MapOverlay extends com.google.android.maps.Overlay {

            public MapOverlay(GeoPoint mGeoPoint) {

            }

            @Override
            public boolean draw(final Canvas canvas, MapView mapView,
                    boolean shadow, long when) {

                Point mpoint = new Point();
                Point mpoint1 = new Point();

                int let[] = new int[mLength];
                int lon[] = new int[mLength];
                int let_end[] = new int[mLength];
                int lon_end[] = new int[mLength];
                GeoPoint newGeoPoint = null;
                GeoPoint newGeoPoint1;
                for (int k = 0; k < mLength; k++) {

                    let[k] = (int) (mLatitude_Start[k] * 1E6);
                    lon[k] = (int) (mLongitude_Start[k] * 1E6);

                    let_end[k] = (int) (mLatitude_End[k] * 1E6);
                    lon_end[k] = (int) (mLongitude_End[k] * 1E6);
                    newGeoPoint1 = new GeoPoint(let_end[k], lon_end[k]);
                    newGeoPoint = new GeoPoint(let[k], lon[k]);
                    mapView.getProjection().toPixels(newGeoPoint, mpoint);
                    mapView.getProjection().toPixels(newGeoPoint1, mpoint1);
                    Paint paint = new Paint();

                    paint.setColor(Color.RED);
                    paint.setStyle(Paint.Style.FILL_AND_STROKE);
                    paint.setStrokeWidth(5);
                    canvas.drawCircle(mpoint.x, mpoint.y, 5, paint);
                    paint.setColor(Color.BLUE);
                    canvas.drawLine(mpoint.x, mpoint.y, mpoint1.x, mpoint1.y, paint);
                    paint.setColor(Color.BLACK);
                    paint.setStrokeWidth(100);
                    paint.setStyle(Paint.Style.FILL);
                    if(k==mLength-1){
                        Bitmap bmp = BitmapFactory.decodeResource(activity.getResources(), R.drawable.green_pin);
                        canvas.drawBitmap(bmp,mpoint1.x ,mpoint1.y-30, null);
                    }
                    GeoPoint dumy=new GeoPoint((int)(mIntentLatitude * 1E6), (int)(mIntentLongitude * 1E6));
                    Point dumy1 = new Point();
                    mapView.getProjection().toPixels(dumy, dumy1);
                    Bitmap bmp = BitmapFactory.decodeResource(activity.getResources(), R.drawable.dest_pin);
                    canvas.drawBitmap(bmp,dumy1.x,dumy1.y - 25, null);
                    mapView.getController().animateTo(dumy);
                    mapView.invalidate();
                }
                return false;

            }

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T07:21:28.310

如果您想在特定位置移动地图，请尝试此操作，然后获取该位置的纬度或经度，然后传入：

```
MapController mMapController;

mMapController=mMapView.getController();
    mMapController.setCenter(new GeoPoint((int)(lat * 1E6), (int)(lon * 1E6))); 
```

如果您想在两个位置之间绘制路径，那么只需在此传递 lat 和 lon：

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, 
                Uri.parse("http://maps.google.com/maps?saddr="+ String.valueOf(from_lattitude) +","+ String.valueOf(from_longitude) +"&daddr="+ String.valueOf(dest_lati) +","+ String.valueOf(dest_longi)));
                startActivity(intent); 
```

# php - 在php中上传文件替换

> ID：13246093
> 
> 赞同：1
> 
> 时间：2012-11-06T07:08:32.723
> 
> 标签：php, file, upload, replace

我想删除一个已经存在的文件并将新文件添加到同一文件夹中。我已经在会话中添加了 tmp 名称。已经删除了现有的，但它不在新的中移动。

```
<?php
session_start();
$files = $_SESSION['Already'];
$tmp=$_SESSION['PATH'];
unlink('../upload/'.$files);
$to="../upload/".$files; 
move_uploaded_file($tmp,$to);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:15:01.423

尝试替换文件。如果文件名完全相同，则无需取消链接。只需使用`move_uploaded_file()`即可。

了解导致错误的原因很重要。检查您的服务器`error_logs`以获取此类信息。

# opencv - OpenCV 2.4.3 - JavaCV 0.3 - FaceRecognizer 类 - LBPH - 更新功能仍然无法正常工作

> ID：13246094
> 
> 赞同：4
> 
> 时间：2012-11-06T07:08:33.827
> 
> 标签：opencv, face-recognition, javacv

我已经使用 javacv LBPH 类在 Java 中实现了人脸识别，但是我遇到了 FaceRecognizer.LBPH 不支持更新功能的问题。这是错误：

“OpenCV 错误：功能/特征未实现（此人脸识别器（FaceRecognizer.LBPH）不支持更新，您必须使用人脸识别器::train 来更新它。）在未知函数中，文件......\src \opencv\modules\contrib\src\facerec.cpp，第 305 行"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:53:43.663

这就是问题所在。在 OpenCV 存储库的主干中，该方法是虚拟的，并被 LBPH FaceRecognizer 覆盖。所以它被C++中的*后期绑定规则调用。*这适用于 C++ 和所有包装器。**但是问题来了**：在 OpenCV 的 2.4 分支中，团队希望保证二进制兼容性，因此从方法签名中删除了*virtual关键字。*这会导致所有问题，因为不再调用覆盖的方法。我会修复它并相应地更新这篇文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:14:00.120

这现在在 iOS 中对我有用（在以前的版本中没有调用更新）。我使用这些说明从最新的 repo 版本重建了框架：http: [//docs.opencv.org/trunk/doc/tutorials/introduction/ios_install/ios_install.html](http://docs.opencv.org/trunk/doc/tutorials/introduction/ios_install/ios_install.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T09:15:13.550

我有同样的问题。显然该功能未在 OpenCV 2.4.3 中实现，请参见：[javacv](http://code.google.com/p/javacv/issues/detail?id=233)

# c# - 使用 C# 将端口号引用到服务名称

> ID：13246099
> 
> 赞同：1
> 
> 时间：2012-11-06T07:08:47.473
> 
> 标签：c#, ruby, mono, port

在 Linux 上使用 MONO。

如何使用 C# 将端口号与服务配对？

例子：

```
port 80 = http
port 443 = https 
```

并将其输出到控制台，我需要这个用于我构建的简单端口扫描仪。

我知道这个函数存在于 ruby​​ 中：

```
Socket.getservbyport(80, "tcp") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T10:33:19.357

**视窗版本**

更新：看到海报在提出问题后添加了 Linux 和 Mono 标签为时已晚，因此编写了 Windows 实现。在 Linux 上使用第二篇文章中的 Mono 版本。

Mohammad 的解决方案在许多方面都比替代方案更便携。getservbyname() 和 getservbyport() 依赖于平台，需要使用 P/Invoke 才能在 Windows 上与 c# 一起使用，而且很可能在 Mono 上也是如此。

要在 Mono 中实现下面的代码，您需要使用平台特定的 API（标头为 netdb.h）进行 PInvoke - 请注意 WSAStartUp() 和 WSACleanUp() 是特定于 Windows 的套接字初始化函数，与 Linux 无关系统。目前没有单声道设置，因此无法提供特定于 linux 的解决方案，但如果您愿意跳过这些环节，这里有一个 windows（32 位）示例，可将您的代码基于：

```
namespace SocketTest
{
    using System;
    using System.Net;
    using System.Net.Sockets;
    using System.Runtime.InteropServices;
    using System.Runtime.Serialization;

    [Serializable]
    public class SocketUtilException : Exception
    {

        public SocketUtilException()
        {
        }

        public SocketUtilException(string message)
            : base(message)
        {
        }

        public SocketUtilException(string message, Exception inner)
            : base(message, inner)
        {
        }

        protected SocketUtilException(
            SerializationInfo info, StreamingContext context)
            : base(info, context)
        {
        }
    }
    public static class SocketUtil
    {
        private const int WSADESCRIPTION_LEN = 256;

        private const int WSASYSSTATUS_LEN = 128;

        [StructLayout(LayoutKind.Sequential)]
        public struct WSAData
        {
            public short wVersion;
            public short wHighVersion;

            [MarshalAs(UnmanagedType.ByValTStr, SizeConst = WSADESCRIPTION_LEN+1)]
            public string szDescription;

            [MarshalAs(UnmanagedType.ByValTStr, SizeConst = WSASYSSTATUS_LEN+1)]
            public string wSystemStatus;
            [Obsolete("Ignored when wVersionRequested >= 2.0")]
            public ushort wMaxSockets;
            [Obsolete("Ignored when wVersionRequested >= 2.0")]
            public ushort wMaxUdpDg;
            public IntPtr dwVendorInfo;
        }

        [StructLayoutAttribute(LayoutKind.Sequential)]
        public struct servent
        {
            public string s_name;
            public IntPtr s_aliases;
            public short s_port;
            public string s_proto;
        }

        private static ushort MakeWord ( byte low, byte high)
        {

            return  (ushort)((ushort)(high << 8) | low);
        }

        [DllImport("ws2_32.dll", CharSet = CharSet.Auto, ExactSpelling = true, SetLastError = true)]
        private static extern int WSAStartup(ushort wVersionRequested, ref WSAData wsaData);
        [DllImport("ws2_32.dll", CharSet = CharSet.Auto, ExactSpelling = true, SetLastError = true)]
        private static extern int WSACleanup();
        [DllImport("ws2_32.dll",  SetLastError = true, CharSet = CharSet.Ansi)]
        private static extern IntPtr getservbyname(string name, string proto);
        [DllImport("ws2_32.dll", SetLastError = true, CharSet = CharSet.Ansi)]
        private static extern IntPtr getservbyport(short port, string proto);

        public static string GetServiceByPort(short port, string protocol)
        {

            var wsaData = new WSAData();
            if (WSAStartup(MakeWord(2, 2), ref wsaData) != 0)
            {
                throw new SocketUtilException("WSAStartup",
                    new SocketException(Marshal.GetLastWin32Error()));

            }
            try
            {
                var netport = Convert.ToInt16(IPAddress.HostToNetworkOrder(port));
                var result = getservbyport(netport, protocol);
                if (IntPtr.Zero == result)
                {
                    throw new SocketUtilException(
                        string.Format("Could not resolve service for port {0}", port),
                        new SocketException(Marshal.GetLastWin32Error()));
                }
                var srvent = (servent)Marshal.PtrToStructure(result, typeof(servent));
                return srvent.s_name;;
            }
            finally
            {
                WSACleanup();
            }
        }

        public static short GetServiceByName(string service, string protocol)
        {

            var wsaData = new WSAData();
            if(WSAStartup(MakeWord(2,2), ref wsaData) != 0)
            {
                throw new SocketUtilException("WSAStartup", 
                    new SocketException(Marshal.GetLastWin32Error()));

            }
            try
            {
                var result = getservbyname(service, protocol);
                if (IntPtr.Zero == result)
                {
                    throw new SocketUtilException(
                        string.Format("Could not resolve port for service {0}", service), 
                        new SocketException(Marshal.GetLastWin32Error()));
                }
                var srvent = (servent)Marshal.PtrToStructure(result, typeof(servent));
                return Convert.ToInt16(IPAddress.NetworkToHostOrder(srvent.s_port));
            }
            finally
            {
                WSACleanup();
            }

        }
    }
    class Program
    {

        static void Main(string[] args)
        {

            try
            {

                var port = SocketUtil.GetServiceByName("http", "tcp");
                Console.WriteLine("http runs on port {0}", port);

                Console.WriteLine("Reverse call:{0}", SocketUtil.GetServiceByPort(port, "tcp"));

            }
            catch(SocketUtilException exception)
            {
                Console.WriteLine(exception.Message);
                if(exception.InnerException != null)
                {
                    Console.WriteLine(exception.InnerException.Message);
                }
            }

        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:02:56.323

**单声道 Linux 版本**

我有一点时间，所以在我的 Ubuntu Linux 机器上设置了 Mono 进行测试。getservbyport() 和 getservbyname() 的 Mono PInvoke 实现比在 Windows 上更简单（只需加载内置网络内容的 libc）。这是示例代码以供参考，以防万一有人想要它；）

```
namespace SocketUtil
{
    using System;
    using System.Net;
    using System.Collections.Generic;
    using System.Runtime.InteropServices;
    using System.Runtime.Serialization;

    [Serializable]
    public class SocketUtilException : Exception
    {

        public SocketUtilException()
        {
        }

        public SocketUtilException(string message)
            : base(message)
        {
        }

        public SocketUtilException(string message, Exception inner)
            : base(message, inner)
        {
        }

        protected SocketUtilException(
            SerializationInfo info, StreamingContext context)
            : base(info, context)
        {
        }
    }

    public static class SocketUtil
    {

        [StructLayoutAttribute(LayoutKind.Sequential)]
        public struct servent
        {
            public string s_name;
            public IntPtr s_aliases;
            public ushort s_port;
            public string s_proto;
        }

        [DllImport("libc", SetLastError = true, CharSet = CharSet.Ansi)]
        private static extern IntPtr getservbyname(string name, string proto);
        [DllImport("libc", SetLastError = true, CharSet = CharSet.Ansi)]
        private static extern IntPtr getservbyport(ushort port, string proto);

        public static string GetServiceByPort(ushort port, string protocol, out List<string> aliases)
        {
            var netport = unchecked((ushort)IPAddress.HostToNetworkOrder(unchecked((short)port)));
            var result = getservbyport(netport, protocol);
            if (IntPtr.Zero == result)
            {
                throw new SocketUtilException(
                    string.Format("Could not resolve service for port {0}", port));
            }
            var srvent = (servent)Marshal.PtrToStructure(result, typeof(servent));
            aliases = GetAliases(srvent);
            return srvent.s_name;

        }

        private static List<string> GetAliases(servent srvent)
        {
            var aliases = new List<string>();
            if (srvent.s_aliases != IntPtr.Zero)
            {
                IntPtr cb;

                for (var i = 0;
                    (cb = Marshal.ReadIntPtr(srvent.s_aliases, i)) != IntPtr.Zero;
                    i += Marshal.SizeOf(cb))
                {
                    aliases.Add(Marshal.PtrToStringAnsi(cb));
                }
            }
            return aliases;
        }

        public static ushort GetServiceByName(string service, string protocol, out List<string> aliases)
        {

            var result = getservbyname(service, protocol);
            if (IntPtr.Zero == result)
            {
                throw new SocketUtilException(
                    string.Format("Could not resolve port for service {0}", service));
            }

            var srvent = (servent)Marshal.PtrToStructure(result, typeof(servent));
            aliases = GetAliases(srvent);
            var hostport = IPAddress.NetworkToHostOrder(unchecked((short)srvent.s_port));
            return unchecked((ushort)hostport);

        }
    }
    class Program
    {

        static void Main(string[] args)
        {

            try
            {
                List<string> aliases;
                var port = SocketUtil.GetServiceByName("https", "tcp", out aliases);

                Console.WriteLine("https runs on port {0}", port);
                foreach (var alias in aliases)
                {
                    Console.WriteLine(alias);
                }

                Console.WriteLine("Reverse call:{0}", SocketUtil.GetServiceByPort(port, "tcp", out aliases));

            }
            catch (SocketUtilException exception)
            {
                Console.WriteLine(exception.Message);
                if (exception.InnerException != null)
                {
                    Console.WriteLine(exception.InnerException.Message);
                }
            }

        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T07:47:26.287

在 Windows 上，有一个“服务”文件位于 System32\Drivers\Etc\ 文件夹中。我编写了以下代码来解析它。您可以使用它来查找有关您想要的任何端口的信息：

```
class Program
{
    static void Main(string[] args)
    {
        var services = ReadServicesFile();

        // For example, I want to find information about port 443 of TCP service
        var port443Info = services.FirstOrDefault(s => s.Port == 443 && s.Type.Equals("tcp"));

        if (port443Info != null)
        {
            Console.WriteLine("TCP Port = {0}, Service name = {1}", port443Info.Port, port443Info.Name);
        }

    }

    static List<ServiceInfo> ReadServicesFile()
    {
        var sysFolder = Environment.GetFolderPath(Environment.SpecialFolder.System);
        if (!sysFolder.EndsWith("\\"))
            sysFolder += "\\";

        var svcFileName = sysFolder + "drivers\\etc\\services";

        var lines = File.ReadAllLines(svcFileName);

        var result = new List<ServiceInfo>();
        foreach (var line in lines)
        {
            if (string.IsNullOrEmpty(line) || line.StartsWith("#"))
                continue;

            var info = new ServiceInfo();

            var index = 0;

            // Name
            info.Name = line.Substring(index, 16).Trim();
            index += 16;

            // Port number and type
            var temp = line.Substring(index, 9).Trim();
            var tempSplitted = temp.Split('/');

            info.Port = ushort.Parse(tempSplitted[0]);
            info.Type = tempSplitted[1].ToLower();

            result.Add(info);
        }

        return result;
    }
} 
```

您还需要以下类声明：

```
class ServiceInfo
{
    public ushort Port { get; set; }
    public string Name { get; set; }
    public string Type { get; set; }
} 
```

# c# - 无法在 Point3DCollection 中偏移 Point3D

> ID：13246100
> 
> 赞同：0
> 
> 时间：2012-11-06T07:09:19.927
> 
> 标签：c#, wpf

我正在尝试偏移 Point3DCollection 中的一个点，但无法将其转换为新位置。文本框显示第一个点的 0,0,0 虽然我正在对其进行 3,3,3 的偏移。以下代码有什么问题：

```
var result = new Point3DCollection(n);

var pt1 = new Point3D(0, 0, 0);
var pt2 = new Point3D(5, 5, 5);

result.Add(pt1);
result.Add(pt2);  
result[0].Offset(3,3,3);
textbox1.Text = result[0].X + "," + result[0].Y + "," + result[0].Z; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:09:45.540

See under "remarks" here: [http://msdn.microsoft.com/en-us/library/system.windows.media.media3d.point3d.offset.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.media3d.point3d.offset.aspx)

So result[0] does not give you a reference to the object but a copy, so that you change the offset of that copy and not the one in your collection.

If you need to work with a collection, one solution would be to replace your object in the collection and with a new Point3D object at the same index.

# c# - 将后面的 asp.net 代码行添加到 htmltable

> ID：13246101
> 
> 赞同：1
> 
> 时间：2012-11-06T07:09:07.600
> 
> 标签：c#, asp.net

我正在尝试单击 Add Row 按钮向 HtmlTable 添加一个新行。它增加了一行。但它不会添加更多行。请指教。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Test.aspx.cs" Inherits="eLaundrySearchWeb.Test" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
 </head>
<body>
<form id="form1" runat="server">
<div>
<table id="myTable" runat="server">
                            <tr>
                                <td>
                                    <asp:DropDownList ID="DropDownList1"   runat="server">
                                    </asp:DropDownList>
                                </td>
                                <td>
                                    <asp:TextBox ID="txtQty" runat="server">
                                    </asp:TextBox>
                                </td>
                                <td>
                                    <asp:Button ID="Button1" runat="server" Text="Add Row" OnClick="AddRow_Click" 
                                    />
                                </td>
                            </tr>
                        </table>
</div>
</form> 
```

```
protected void AddRow_Click(object sender, EventArgs e)
    {
        //Random r=new Random();
        //int rv=r.Next(0,100);
        int numOfRows = myTable.Rows.Count;
        HtmlTableRow row = new HtmlTableRow();
        row.ID = "tbl_row"+(numOfRows+1);
        HtmlTableCell cell1 = new HtmlTableCell();
        cell1.ID = "tbl_cell1"+ (numOfRows+1);
        TableCell cell2 = new TableCell();
        cell2.ID = "tbl_cell2" + (numOfRows + 1);
        TextBox tb = new TextBox();
        tb.ID = "tbQty" + (numOfRows + 1);
        cell1.Controls.Add(tb);
        row.Cells.Add(cell1);
        myTable.Rows.Add(row);
        myTable.DataBind();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:17:54.037

每次单击时它都会添加行`button`。这里唯一的问题`button`是导致动态创建的控件`postback`上的和`postback`被清除。然后你的`button`点击事件再次添加一行。所以在你看来，该行只添加一次。但实际上它每次都在添加，只是`postback`早期的被清除了。尝试将您的代码转换为函数并在`postback`.

**[类似的问题](https://stackoverflow.com/questions/553073/adding-controls-dynamically-to-an-updatepanel-in-asp-net-ajax)**

# c++ - 使用glulookat进行opengl平移

> ID：13246102
> 
> 赞同：1
> 
> 时间：2012-11-06T07:09:28.623
> 
> 标签：c++, opengl

我想在一个 3d 对象上平移相机，无论是向左还是向右或向上和向下。上下很容易（只需增加/减少 y 值）。当 x 为 0 或 z 为 0 时左右很容易。但是，在 x 或 z 都不为 0 的情况下，简单地增加/减少一个常数是行不通的。有这个数学公式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T00:36:20.230

你的 x OR z 有什么值并不重要，gluLookAt() 只是用当前参数定义你的起点。

我建议你阅读一些关于[panning](http://www.codeguru.com/cpp/g-m/opengl/article.php/c2683/Panning-zooming-and-rotation-in-OpenGL.htm)的文档。很不错的文档，懂了原理，闭着眼睛做吧：）

您可以在此处阅读有关 LookAt 功能的更多信息：1.http://msdn.microsoft.com/en-us/library/windows/desktop/dd368663(v=vs.85).aspx 2.http://www.felixgers .de/teaching/jogl/gluLookAt.html

# solr - 如何整合 spring-data-jpa 和 spring-data-solr？

> ID：13246106
> 
> 赞同：0
> 
> 时间：2012-11-06T07:09:35.360
> 
> 标签：solr, spring-data, spring-data-jpa, spring-data-solr

为了启用全文搜索，我曾经使用过hibernate-search和solrJ，不，我正在尝试spring-data-solr，但发现我似乎没有与spring-data-jpa一起工作。我只是无法使配置正确。如果我将以下 solr 配置 xml 添加到我的项目中。我会收到错误消息。spring-data-solr 的 config xml 文件为：

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p" xmlns:context="http://www.springframework.org/schema/context"
  xmlns:solr="http://www.springframework.org/schema/data/solr" xmlns:util="http://www.springframework.org/schema/util" xmlns:cache="http://www.springframework.org/schema/cache" xmlns:security="http://www.springframework.org/schema/security"
  xsi:schemaLocation="http://www.springframework.org/schema/data/solr http://www.springframework.org/schema/data/solr/spring-solr-1.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd
        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security.xsd">

 <!-- 
  #####################################
  CONTEXT SETTINGS
  #####################################
   -->
  <context:property-placeholder location="classpath:laa.properties" ignore-resource-not-found="true" />

 <!-- 
  #####################################
  SOLR
  #####################################
 -->
  <solr:solr-server id="solrServer" url="${solr.host}" />

  <bean id="solrTemplate" class="org.springframework.data.solr.core.SolrTemplate" scope="singleton">
    <constructor-arg ref="solrServer" />
  </bean>

</beans> 
```

错误信息是：

```
org.xml.sax.SAXParseException; systemId: http://www.springframework.org/schema/data/jpa/spring-jpa.xsd; lineNumber: 18; columnNumber: 48; src-resolve: Cannot resolve the name 'repository:repository' to a(n) 'type definition' component.
    at org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
    at org.apache.xerces.util.ErrorHandlerWrapper.error(Unknown Source)
    at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)
    at org.apache.xerces.impl.xs.traversers.XSDHandler.reportSchemaError(Unknown Source)
    at org.apache.xerces.impl.xs.traversers.XSDHandler.getGlobalDecl(Unknown Source)
    at org.apache.xerces.impl.xs.traversers.XSDComplexTypeTraverser.traverseComplexContent(Unknown Source)
    at org.apache.xerces.impl.xs.traversers.XSDComplexTypeTraverser.traverseComplexTypeDecl(Unknown Source)
    at org.apache.xerces.impl.xs.traversers.XSDComplexTypeTraverser.traverseGlobal(Unknown Source)
    at org.apache.xerces.impl.xs.traversers.XSDHandler.traverseSchemas(Unknown Source)
    at org.apache.xerces.impl.xs.traversers.XSDHandler.parseSchema(Unknown Source)
    at org.apache.xerces.impl.xs.XMLSchemaLoader.loadSchema(Unknown Source)
    at org.apache.xerces.impl.xs.XMLSchemaValidator.findSchemaGrammar(Unknown Source)
    at org.apache.xerces.impl.xs.XMLSchemaValidator.handleStartElement(Unknown Source)
    at org.apache.xerces.impl.xs.XMLSchemaValidator.emptyElement(Unknown Source)
    at org.apache.xerces.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T06:34:38.023

您在类路径上缺少 Spring Data Commons。

# ubuntu - 编辑时在远程计算机和桌面之间同步代码

> ID：13246107
> 
> 赞同：2
> 
> 时间：2012-11-06T07:09:21.953
> 
> 标签：ubuntu, dropbox, shared

我的桌面上安装了一个 IDE，通常会在安装了 ubuntu 的远程计算机上测试代码。与命令行编辑器相比，我觉得自己在 IDE 中编辑代码很舒服。因此，我想知道是否有任何好的软件或某种方式可以将我的代码立即同步到远程计算机，以便我可以打开远程计算机的命令行并立即运行代码。

像共享文件系统之类的东西，但同步速度超快。我在远程计算机上安装了 ubuntu，并且我拥有管理员权限。我的桌面是安装了 10.8 的 mac。我的台式机和远程计算机都有很好的带宽，但它们位于地球的另一端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:25:56.347

由于您有一台远程 Linux 机器，因此您可能会在其上运行 SSH 服务器以进行远程访问。这意味着您还可以使用 sftp 访问远程文件系统。

在 Mac 上，您可以使用 OSXFuse（作为 sftp 设备驱动程序）和 Macfusion（作为配置 sftp 连接的 UI）挂载 sftp 文件系统。Sftp 是 ssh 的子协议，因此您可以使用普通的 ssh 帐户登录。

您可以从这里下载 OSXfuse：[https ://github.com/osxfuse/osxfuse/downloads](https://github.com/osxfuse/osxfuse/downloads)

和 Macfusion 从这里：[http ://macfusionapp.org/](http://macfusionapp.org/)

安装 OSXFuse 时，一定要选择“MacFUSE Compatibility Layer”（默认禁用）。

安装后，您的远程文件夹将像外部磁盘一样运行，因此您可以直接在其中打开和编辑文件。任何更改都将通过网络自动保存。

# python - Python IOError：Errno 13 权限被拒绝

> ID：13246114
> 
> 赞同：2
> 
> 时间：2012-11-06T07:10:05.567
> 
> 标签：python, recursion, ioerror

好吧，我完全困惑了。我整晚都在做这个，我无法让它工作。我有权查看文件，我想做的就是阅读该死的东西。每次我尝试我都会得到：

```
Traceback (most recent call last):
  File "<pyshell#3>", line 1, in <module>
    scan('test', rules, 0)
  File "C:\Python32\PythonStuff\csc242hw7\csc242hw7.py", line 45, in scan
    files = open(n, 'r')
IOError: [Errno 13] Permission denied: 'test\\test' 
```

这是我的代码。它尚未完成，但我觉得我至少应该为我正在测试的部分获得正确的值。基本上我想查看一个文件夹，如果有文件扫描，它会寻找我设置的任何内容`signatures`。如果有文件夹，我将根据`depth`指定扫描或不扫描它们。如果有`depth < 0`那么它将返回。如果`depth == 0`那样，它将只扫描第一个文件夹中的元素。如果`depth > 0`它会扫描文件夹直到指定的深度。这些都不重要，因为无论出于何种原因，我都没有读取文件的权限。我不知道我做错了什么。

```
def scan(pathname, signatures, depth):
'''Recusively scans all the files contained in the folder pathname up
until the specificed depth'''
    # Reconstruct this!
    if depth < 0:
        return
    elif depth == 0:
        for item in os.listdir(pathname):
            n = os.path.join(pathname, item)
            try:
                # List a directory on n
                scan(n, signatures, depth)
            except:
                # Do what you should for a file
                files = open(n, 'r')
                text = file.read()
                for virus in signatures:
                    if text.find(signatures[virus]) > 0:
                        print('{}, found virus {}'.format(n, virus))
                files.close() 
```

只是一个快速的编辑：

下面的代码做了非常相似的事情，但我无法控制深度。但是，它工作正常。

```
def oldscan(pathname, signatures):
    '''recursively scans all files contained, directly or
       indirectly, in the folder pathname'''
    for item in os.listdir(pathname):
        n = os.path.join(pathname, item)
        try:
            oldscan(n, signatures)
        except:
            f = open(n, 'r')
            s = f.read()
            for virus in signatures:
                if s.find(signatures[virus]) > 0:
                    print('{}, found virus {}'.format(n,virus))
            f.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:40:40.233

我冒昧地猜测那`test\test`是一个目录，并且发生了一些异常。您盲目地捕获异常并尝试将目录作为文件打开。这给了 Windows 上的 Errno 13。

用于`os.path.isdir`区分文件和目录，而不是try...except。

```
 for item in os.listdir(pathname):
        n = os.path.join(pathname, item)
        if os.path.isdir(n):
            # List a directory on n
            scan(n, signatures, depth)
        else:
            # Do what you should for a file 
```

# python - 在python中读取文件

> ID：13246116
> 
> 赞同：0
> 
> 时间：2012-11-06T07:10:34.217
> 
> 标签：python

Python学习者。所以请原谅我。我正在关注：[http ://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files](http://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files)

我想读一个文件；这是我的文件：

```
# cat test 
line1 word1
line2 word2
line3 word3
line4 word4 
```

这是我的代码：

```
>>> f = open ('test')
>>> for line in f:
...     print f
... 
<open file 'test', mode 'r' at 0xb7729180>
<open file 'test', mode 'r' at 0xb7729180>
<open file 'test', mode 'r' at 0xb7729180>
<open file 'test', mode 'r' at 0xb7729180> 
```

我如何以及为什么超过输出？我希望它能每行打印每一行。我在这里想念什么。查看上面提到的链接，我的语法似乎还可以，但输出不是

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T07:13:38.813

在迭代期间，您正在打印`f`而不是`line`变量。

```
>>> f = open ('test')
>>> for line in f: 
...        print line 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T07:12:07.237

您正在打印文件句柄，将***print f***替换为***print line***：

```
f = open ('test')
for line in f:
    print line 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T07:14:21.870

```
for line in open('test')
    print line 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T07:15:44.177

您必须使用 readline 函数读取行。然后它将每一行变成一个列表值。那是你可以做你的 for 声明的时候。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T07:17:08.050

`for line in f:`

这意味着'遍历 f 的内容，将每个项目分配给名为'line'的变量'。不是相反。f 不会改变..这是您从中获取数据的内容，而不是您分配给它的变量。

也就是说，我看到的另一个答案..来自名字以'D'开头的人..是正确的：你想要`print (line)`，而不是`print(f)`。我用 () 写它是因为这是一个好习惯，它使你的代码与 Python 2.x 和 Python 3.x 兼容。

# bubble-sort - C中的冒泡排序不规则表

> ID：13246118
> 
> 赞同：2
> 
> 时间：2012-11-06T07:10:28.390
> 
> 标签：bubble-sort

我试图使用冒泡排序对一个参差不齐的表进行排序。我的算法只对第一行进行排序，但其余行未排序。我认为问题在于“最后一个”变量没有正确初始化。

```
void bubbleSort (int **table)
{
// Local Declarations
    int temp;
    int current;
    int walker;
    int column;
    int row=0;
    int numCol = 0;
    int last = *table[numCol];

// Statements
    while (table[row] != NULL) {
        for (column = 2; column <= *table[row]; column++) {
            for (current = 2; current < last; current++) {
                bool swapsOccured = false;
                for (walker = last; walker > current; walker--) {
                    if (table[row][walker] > table[row][walker - 1]) {
                        swapsOccured = true;
                        temp                   = table[row][walker];
                        table[row][walker]     = table[row][walker - 1];
                        table[row][walker - 1] = temp;
                        } // if
                    } // for walker
                if (!swapsOccured)
                    return;
                } // for current
            }
            row++;
        } // while
    return;
} 
```

# javascript - ASP.Net 打印无对话框

> ID：13246125
> 
> 赞同：0
> 
> 时间：2012-11-06T07:10:56.540
> 
> 标签：javascript, asp.net, printing

我希望我的 Web 应用程序在出现后自动打印 w 弹出页面，而不要求客户端选择要选择的打印机。

如何使用 java-script 或 ajax 在 ASP.Net 中处理静默打印，或者什么是最适合这种情况的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:39:25.133

您不能这样做是有充分理由的，例如：

*   用户应该始终能够选择他们想要使用的打印机。

*   用户应该始终能够选择是否打印某些内容（想象一下垃圾邮件会不断从您的打印机中飞出）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T10:42:50.353

一些第三方控件可用于此（在 WPF 中）。请检查这在 asp.net 中是否也有用。

[http://www.textcontrol.com/en_US/support/documentation/dotnet/n_wpf_printing.printing.htm](http://www.textcontrol.com/en_US/support/documentation/dotnet/n_wpf_printing.printing.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-22T13:09:14.040

```
//OnTouchPrint.aspx.cs
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Drawing.Printing;
using System.IO;
using System.Drawing;

namespace TokenPrint
{
    public partial class Try : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {

            }

        }

         private void printDocument1_PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs e)
           {

                Graphics g = e.Graphics;
                SolidBrush Brush = new SolidBrush(Color.Black);
                string printText = TextBox1.Text;
                g.DrawString(printText, new Font("arial", 12), Brush, 10, 10);

            }

        protected void Press_Click(object sender, EventArgs e)
        {
            try
            {
                string Time = DateTime.Now.ToString("yymmddHHMM");
                System.Drawing.Printing.PrinterSettings ps = new System.Drawing.Printing.PrinterSettings();
                ps.PrintToFile = true;
               // ps.PrintFileName = "D:\\PRINT\\Print_"+Time+".oxps"; /* you can save file here */
                System.Drawing.Printing.PrintDocument pd = new System.Drawing.Printing.PrintDocument();
                pd.PrintPage += new PrintPageEventHandler(printDocument1_PrintPage);
                System.Drawing.Printing.StandardPrintController printControl = new System.Drawing.Printing.StandardPrintController();
                pd.PrintController = printControl;
                pd.DefaultPageSettings.Landscape = true;
                pd.PrinterSettings = ps;
                pd.Print();
                TextBox1.Text = "";
                ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "alertMessage", "alert('Printed Successfully.Check: Drive D')", true);

            }
            catch (Exception ex)
            {

            }

        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            Response.Redirect("Try.aspx");
        }
    }
}

//OnTouchPrint.aspx

<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="OnTouchPrint.aspx.cs" Inherits="TokenPrint.Try" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>

</head>
<body>
    <form id="form1" runat="server">

    <asp:TextBox ID="TextBox1" runat="server" Width="235px" Height="142px" 
        TextMode="MultiLine"></asp:TextBox>

    <br />
    <br />
    <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" 
        ControlToValidate="TextBox1" ErrorMessage="Empty message can not be printed!" 
        ValidationGroup="vgp1"></asp:RequiredFieldValidator>
    <br />
    <br />
    <asp:Button ID="Press" runat="server" Text="Press" onclick="Press_Click" 
        ValidationGroup="vgp1" />

    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Refresh" 
        ValidationGroup="vgp2" />
&nbsp;&nbsp;&nbsp;

    </form>
</body>
</html> 
```

# c# - 使用 c# 桌面应用程序编写脚本

> ID：13246128
> 
> 赞同：1
> 
> 时间：2012-11-06T07:11:23.003
> 
> 标签：c#, javascript, wsh

我有一个支持新 C# 插件的 C# 桌面应用程序。

我想更改能够接受脚本作为插件的现有 C# 应用程序。

脚本可以是 JavaScript、Windows 脚本宿主 (WSh) 或任何脚本。（它必须是一个插件并且想要在运行时编译和运行）

我想知道 C# 是否具有脚本编译和运行功能。如果您知道任何支持 dll、好的链接或有用的项目，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:16:35.067

从[CS-Script 主页](http://www.csscript.net/)：

> “CS-Script 是一个基于 CLR（公共语言运行时）的脚本系统，它使用符合 ECMA 标准的 C# 作为编程语言。CS-Script 目前针对 Microsoft 实现的 CLR (.NET 2.0/3.0/3.5/4.0)，并完全支持单核细胞增多症。”

另外，它也是开源的！

另一种选择是实现[IronPython](http://ironpython.net/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T07:26:13.357

查看[Dynamic Language Runtime](http://dlr.codeplex.com/)，它允许您在程序中嵌入[IronPython](http://ironpython.codeplex.com/) 和[IronRuby](http://ironruby.codeplex.com/)等语言。

这是一个关于如何在 C# 程序中嵌入 IronPython的[网页。](http://secretgeek.net/host_ironpython.asp)

另请参阅在 Voidspace 上[嵌入 DLR](http://www.voidspace.org.uk/ironpython/embedding.shtml)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T06:32:40.143

我发现[http://jint.codeplex.com/](http://jint.codeplex.com/)对于带有 C# 桌面应用程序的 javascript 解决方案很有用，像 javascript 到 C# 和 C# javascript 的最低级别交互成功。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T07:13:24.993

C# 没有用于 JavaScript 或任何其他脚本的内置编译器，您必须将自己的编译器附加到您的应用程序并在运行时调用它。

# iphone - 如何在ios中集成谷歌地图？

> ID：13246130
> 
> 赞同：0
> 
> 时间：2012-11-06T07:11:12.883
> 
> 标签：iphone, ios, google-maps, map

我在我的 android 应用程序中集成了**谷歌地图 API 。**现在我在 ios 中进行相同的编程。我不明白如何将**谷歌地图 API 集成到我的 ios**应用程序中。或者是否可以将谷歌地图 API 集成到 ios 应用程序中？请帮我。如果你有任何教程，它会是最appriciated。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:14:04.350

您需要为此使用 MKMapView。看看这个教程： http: [//www.icodeblog.com/2009/12/21/introduction-to-mapkit-in-iphone-os-3-0/](http://www.icodeblog.com/2009/12/21/introduction-to-mapkit-in-iphone-os-3-0/)

# youtube-api - 特定类别中 Youtube 数据 API 中的频道搜索

> ID：13246133
> 
> 赞同：0
> 
> 时间：2012-11-06T07:11:45.893
> 
> 标签：youtube-api

我想让一个特定类别中的所有频道都说“X”。我如何使用 youtube 数据 API 来实现这一点？获取所有频道很容易，我们可以根据搜索的关键字获取这些频道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:55:11.780

使用 Youtube API v3，频道可以通过 Freebase 主题 ID 过滤，除了关键字

[https://developers.google.com/youtube/v3/docs/search/list](https://developers.google.com/youtube/v3/docs/search/list)

# javascript - 如何从javascript中的json响应中获取变量？

> ID：13246134
> 
> 赞同：1
> 
> 时间：2012-11-06T07:12:05.503
> 
> 标签：javascript, json

我在从响应字符串中获取变量时遇到问题。我的回复是这样的：

```
responseText = {'page':'2','endOfPage':'yes','content':'abc'}

alert(responseText.page); 
```

返回未定义，有人可以建议怎么做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T07:18:53.760

您的问题是您的 responseText 实际上是一个字符串（`responseText = "{'page':'2','endOfPage':'yes','content':'abc'}";`）。您首先必须解析它以创建一个对象，但这会失败，因为您使用的是单引号，这不是有效的 JSON - 您需要使用双引号来解决问题：

```
var json= "{ \"page\": 2, \"endOfPage\": \"yes\", \"content\": \"abc\" }";
var obj = JSON.parse(json);
alert(obj.page); 
```

如果您无法更改 JSON 生成器实现以返回带双引号的响应，请尝试将每个单引号替换为双引号，如下所示：

```
var invalidJson = "{'page':'2','endOfPage':'yes','content':'abc'}";
validJson= invalidJson.replace(/\'/g, "\"");
var obj = JSON.parse(validJson);
alert(obj.page); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-06T07:28:22.600

*   如果你使用 jQuery，你可以使用这个：

> responseText = '{"page":"2","endOfPage":"yes","content":"abc"}';
> responseText = jQuery.parseJSON(responseText);
> 警报（responseText.endOfPage）；

*   在 Javascript 中：

> ```
> responseText =  '{"page":"2","endOfPage":"yes","content":"abc"}';
> alert(JSON.parse(responseText).page); 
> ```

一些现代浏览器支持将 JSON 解析为原生 js 对象

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-06T07:18:51.987

您需要使用 eval 函数将 json 转换为 object：

```
responseText = {'page':'2','endOfPage':'yes','content':'abc'}​​​​
var responseObject = eval(responseText);

alert(responseObject.page); 
```

# javascript - jQuery获取表格的所有第一个单元格

> ID：13246136
> 
> 赞同：0
> 
> 时间：2012-11-06T07:11:49.253
> 
> 标签：javascript, jquery

我需要获取某个表中所有行的所有 tds（单元格），是否有一种优雅的方法可以做到这一点，或者我是否需要以某种方式自己遍历集合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:14:30.903

尝试`first-child`

```
 $('table tr td:first-child')
 or
 $("table tr td:first")
 or
 $("table tr td").first() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T07:12:58.833

此代码将返回您的表中的所有 tds，id=tableId

```
$('#tableId td') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T07:14:19.160

您的问题标题与您的问题正文不同。您可能对此解决方案感兴趣，但我不能确定：

```
$('#table_id tr td:first-child') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T07:14:56.007

你必须循环它

试试这个

```
$('#mytable tr').each(function() {
var customerId = $(this).find("td:first").html();    
}); 
```

# php - 也以阿拉伯数字显示日期 - PHP

> ID：13246138
> 
> 赞同：1
> 
> 时间：2012-11-06T07:11:55.353
> 
> 标签：php

> **可能重复：**
> [将数字日期（03-11-1991）转换为阿拉伯数字（1991/11/03）php](https://stackoverflow.com/questions/11646546/convert-numeral-date03-11-1991-into-arabic-no-php)

这是我客户的要求。他想用普通数字显示今天的日期，也想用阿拉伯数字显示今天的日期。[看这个屏幕截图](https://i.imgur.com/lolRi.png)

我可以通过以下代码片段轻松获取当前日期：

```
$current_date = date('d').'-'.date('m').'-'.date('Y'); 
```

但是我怎样才能将数字转换为阿拉伯数字并显示它们。？请建议好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T07:23:15.743

检查这个[uk.php.net/manual/en/class.intldateformatter.php](http://uk.php.net/manual/en/class.intldateformatter.php)或者你可以使用下面的字符串替换功能

```
header('Content-Type: text/html; charset=utf-8');
$standard = array("0","1","2","3","4","5","6","7","8","9");
$eastern_arabic_symbols = array("٠","١","٢","٣","٤","٥","٦","٧","٨","٩");
$current_date = date('d').'-'.date('m').'-'.date('Y');
$arabic_date = str_replace($standard , $eastern_arabic_symbols , $current_date); 
```

# windows-8 - 更改应用名称

> ID：13246139
> 
> 赞同：1
> 
> 时间：2012-11-06T07:12:17.963
> 
> 标签：windows-8, windows-store

是否可以通过更新更改已经在 Windows 8 商店中的应用程序的名称？我可以想象可以通过清单文件更改实际名称，但是商店中的名称呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T10:41:25.660

这是 MSDN 上有关更改应用程序名称所需操作的指南：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh868182.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh868182.aspx)

我自己试过了，它就像一个魅力！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:32:01.950

我想这应该是可能的 - 应用程序名称由 App Manifest 中的名称确定。唯一的问题可能是新名称是否已被其他人使用。

# windows - 如何以 .net 形式处理链式构造函数和 InitializeComponent

> ID：13246142
> 
> 赞同：0
> 
> 时间：2012-11-06T07:12:03.990
> 
> 标签：windows, vb.net, winforms, constructor

假设我有两个用于 Windows 窗体的构造函数

```
Sub New (byref Foo as Foo)
    InitializeComponent()
    ...do some work
End Sub 
```

和

```
Sub New (byref Foo as Foo, Bar as Bar)
    InitializeComponent()
    _bar = Bar
    Me.New(Foo)
End Sub 
```

使用第二个构造函数时，InitializeComponent 会被调用两次。那样可以么？我应该尝试阻止它吗？如何？

你可能会说我可以从第二个构造函数中消除它，但是我可以在调用 InitializeComponent 之前开始进行赋值（比如 _bar = Bar）吗？在调用 InitializeComponent 之前，是否有关于您应该做什么或不应该做什么的指导方针？或者是否可以安全地调用它两次而没有任何实际后果？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:19:06.903

`InitializeComponent` *仅在最深的构造函数中*调用（参数数量最多）。然后链接其他构造函数来调用这个构造函数并为缺少的参数提供默认值。

这是 C# 示例

```
public MyForm(Foo foo)
  : this(foo, null)
{   
}

public MyForm(Foo foo, Bar bar)
{
   InitializeComponent();
   _bar = bar;
   // do some work
} 
```

我相信在VB中它会看起来像这样

```
Public Sub New(foo As Foo)
    Me.New(foo, Nothing)
End Sub

Public Sub New(foo As Foo, bar As Bar)
    InitializeComponent()           
    _bar = bar
    ' do some work
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T07:24:31.397

在这种情况下，操作的顺序并不重要，所以我可以简单地立即调用最终的构造函数，然后在它返回时执行我的特殊任务：

```
Public Sub New(ByVal wpPost As WordPressPost, URLs As String())
    Me.New(wpPost)
    _URLs = URLs
End Sub

Public Sub New(ByVal wpPost As WordPressPost)
    InitializeComponent()
    _wppost = wpPost
End Sub 
```

# opengl - OpenGL如何在内部存储命令？

> ID：13246147
> 
> 赞同：2
> 
> 时间：2012-11-06T07:12:15.067
> 
> 标签：opengl, graphics, 3d

据说ihat OpenGL驱动程序将OpenGL命令存储在一些fifo队列缓冲区中，然后执行它。我敦促知道它是如何存储的。它是一些包含数据记录和偏移量的数组，作为命令类型的枚举；pes 或不同的东西？我知道这可能不是标准化的，所以它可以（也许）以不同的方式完成，但我对至少一些，一个真正的实现感到好奇。它是如何/可以做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T08:15:12.057

如果你真的想知道，你必须进入 nVidia 或 ATI 驱动程序代码，这是专有的。但是您可以随时查看[Mesa GL 源代码](http://www.mesa3d.org/download.html)。

# c++ - 如何在班级学生的枚举中添加和删除值

> ID：13246148
> 
> 赞同：0
> 
> 时间：2012-11-06T07:12:41.363
> 
> 标签：c++, enums

如何在 C++ 中从枚举中添加、删除值？
示例：如果我有班级学生：

```
 class Student {
string Name;
string fathername;
string sername;
unsigned int    id-std;
unsigned int    old; 
```

* * *

```
int faculty = 0;
 enum { prog , econ , sport };

  add fac(  );

  delete fac (  ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T07:14:52.903

`enum`在 C++ 中是一组**命名的整数常量，它在***编译时*被评估，你不能像那样添加或删除它们的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T07:19:40.653

如果您尝试使用位掩码，则每个枚举值必须是 2 的幂，并且在枚举中是唯一的：

```
enum MyEnum { prog = 1, econ = 2, sport = 4 }; 
```

要同时选择`prog`和`econ`，请键入：

```
MyEnum v = prog | econ; 
```

要稍后删除标志`prog`，请键入：

```
v = v & ~prog; 
```

[您可以在 Wikipedia 上的位掩码页面上](http://en.wikipedia.org/wiki/Mask_%28computing%29)找到更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T07:18:27.217

这对于枚举是不可能的。

一种方式可能是地图：

```
std::map<std::string, int> theFaculties;
theFaculties["prog"] = 1;
theFaculties["econ"] = 2;
...

int faculty = theFaculties["prog"]; 
```

您可以添加/删除，但您必须照顾 operator[] 因为创建不存在的密钥。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T07:21:05.663

枚举是一种用户定义的类型，由一组称为枚举数的命名**常量组成。**使用枚举的替代方法是使用`#define`or `const`。因此，您不能从枚举中删除或添加值。

# javascript - 我想要一个只接受数字 0 或 0.0 / 0.5 / 1 或 1.0 /1.5 /2 或 2.0/ 2.5 / 3 或 3.0 /3.5 /4 或 4.0/ 4.5 / 5 的 javascript 正则表达式

> ID：13246149
> 
> 赞同：0
> 
> 时间：2012-11-06T07:12:43.187
> 
> 标签：javascript, regex

我想要一个只接受数字的 javascript 正则表达式

```
0 or 0.0 / 0.5 / 1 or 1.0 /1.5 /2 or 2.0/ 2.5 / 3 or 3.0 /3.5 /4 or 4.0/ 4.5 / 5 
```

我正在使用下面的表达式，它可以正常工作，但是当我给出 5.0 或 5.1 或 5.2 或 5.3 或 5.4 或 5.5 时它失败的唯一条件：

```
var regOrderNo = /^[0-5]+(\.[05])?$/; 
```

我想要一个在数字 5 之后不允许小数的正则表达式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T07:21:08.403

```
var regOrderNo = /^(5|[0-4](\.[05])?)$/; 
```

由于您不希望 5 像其他人一样被对待，因此您需要为它准备一个单独的案例。

另外，请注意`+`消失了。您的正则表达式可能匹配 123123123.5。你要确保只有一位数字。

# c# - 访问页面资源元素

> ID：13246151
> 
> 赞同：0
> 
> 时间：2012-11-06T07:12:55.447
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

如何在 C# 编码中访问页面资源元素？我的 XAML 中有以下代码。我想访问`image`我的 C# 代码中的元素，但它无法访问。

```
<Page.Resources>
 <DataTemplate x:Key="Standard250x250ItemTemplate">
     <Grid HorizontalAlignment="Left" Width="150" Height="150">
         <Border Background="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}">
             <Image x:Name="image" Source="{Binding Image}"  Stretch="UniformToFill" AutomationProperties.Name="{Binding Title}" />
         </Border>    
     </Grid>
 </DataTemplate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:19:27.183

它不可访问，因为 DataTemplate 资源在加载之前不会被实例化。您需要先执行以下操作才能加载它：

```
var dataTemplate = (DataTemplate)this.Resources["Standard250x250ItemTemplate"];
var grid = dataTemplate.LoadContent(); 
```

然后遍历元素树得到Image。

在许多情况下，更好的方法是定义附加的依赖属性或附加的行为，您可以将其附加到 XAML 中的图像并编写与关联图像相关的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T02:56:04.317

这取决于您何时尝试访问它。如果尝试访问已经渲染的元素的图像控件，那么您可以像这样使用 ItemContainerGenerator：

```
 //assumes using a ListView
    var item = (ListViewItem)listView.ItemContainerGenerator.ContainerFromItem(myModel);

    // traverse children
    var image = GetChildOfType<Image>(item);
    // use the image!

private T GetChildOfType<T>(DependencyObject obj)
{
    for(int i = 0; i< VisualTreeHelper.GetChildrenCount(obj); i++)
    {
        var child = VisualTreeHelper.GetChild(obj, i);
        if(child is T) return child as T;

        T item = GetChildOfType<T>(child);
        if(item != null) return item;
    }
    return null;
} 
```

如果您需要更改图像的属性，那么也可以通过绑定来完成。

# python-2.7 - 强制下载 - Python

> ID：13246155
> 
> 赞同：0
> 
> 时间：2012-11-06T07:13:01.400
> 
> 标签：python-2.7, download

我想问你，如何在 Python 中从浏览器强制下载文件。我有很多 pdf 文件，我强制使用 PHP 下载，以防止在浏览器中打开它们

```
<?php
  if (isset($_GET['download'])) {
    $link = $_GET['download'];
    header('Content-disposition: attachment; filename='.$link.'');
    header('Content-type: application/pdf');
    readfile($link);
  }
?> 
```

我已经尝试了一半的互联网，我使用了 urllib，urllib2，标题，.. 我相信这是我错过的一件简单的事情，因为我刚刚学习 python，我想将我的网站重写为 Python 来学习它。我能够创建pdf文件的副本，重命名它们，无论如何。但它始终保留在服务器上。它没有开始下载。

请问有什么想法吗？

谢谢你，祝你有美好的一天。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:17:58.443

检查此链接 - [http://css-tricks.com/snippets/htaccess/force-files-to-download-not-open-in-browser/](http://css-tricks.com/snippets/htaccess/force-files-to-download-not-open-in-browser/)

将行添加到您的 apache conf（或 htaccess）

> AddType 应用程序/八位字节流 .pdf

非常适合我。

**[编辑]**

检查链接 -[使用 Pyramid、ningx、X-Accel-Redirect Header 将 pdf 下载为下载](https://stackoverflow.com/questions/12967734/serve-up-pdf-as-a-download-with-pyramid-ningx-x-accel-redirect-header)

*需要注意的一点*——

> 内容处置：附件

尝试告诉我这是否有效。

有关该主题的更多链接 -
[内容处置](https://stackoverflow.com/questions/3433454/content-disposition)

[如何以“更智能”的方式使用 python 下载文件？](https://stackoverflow.com/questions/862173/how-to-download-a-file-using-python-in-a-smarter-way)

# powershell - 如何使用powershell从文本文件中读取字符串

> ID：13246157
> 
> 赞同：1
> 
> 时间：2012-11-06T07:13:07.287
> 
> 标签：powershell, text, substring

我想从文本文件中读取特定字符串并将该字符串输出到另一个文本文件中。

我的文本文件（Sample.txt）如下所示：

```
@{AssemblyName=Microsoft.Office.Excel, Version=1.0.0.0, Culture=neutral,     PublicKeyToken=1y08bdf1111e0105c; Path=C:\Tes\app1\cc\application; ProjectPath=C:\test\application\Application.vbproj; Name=Microsoft.Office.Excel}

@{AssemblyName=System; Path=C:\Tes\app2\ser\application; ProjectPath=C:\test\application2\Application.vbproj; Name=System} 
```

我不想包含除程序集名称之外的任何内容。即，脚本不应考虑版本、文化等。

文本文件有很多这样的汇编信息。我只想读取**AssemblyName**并将其写入 powersehll 中的另一个文本文件。例如： output.txt 应该只包含**Microsoft.Office.Excel**。

**另外，我想排除一些以特定字符串开头的程序集名称，例如： System**。我怎样才能做到这一点？

我在下面尝试过，但它没有向 output.txt 写入任何内容。

```
$workdir = "C:\Test"
$Txt = "$workdir\Sample.txt"

Function GetAsmName($rTxt)
{

Get-Content $Txt

$regex = '@{AssemblyName="(\w*?)"[,|;]'
$matches = (select-string  -Path $Txt -Pattern $regex)
$matches | Select -Expandproperty Matches | Select @{n="Name";e={$_.Groups[1].Value}}
Set-Content -path $workdir\Output.txt -value $matches
} 
```

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T08:04:32.003

尝试：

```
$workdir = "C:\Test"
$Txt = "$workdir\Sample.txt"    
Function GetAsmName($rTxt)
{    
$captures = gc $rTxt | 
            select-string -Pattern '(?<=AssemblyName=)([^;|,]*)' -allmatches |
            select -expa matches | select -expa value    
Set-Content -path $workdir\Output.txt -value $captures
}

GetAsmName $Txt 
```

# android - 如何找回Android中所有帐户的密码？

> ID：13246167
> 
> 赞同：3
> 
> 时间：2012-11-06T07:14:17.500
> 
> 标签：android

我想检索我的 Android 手机中关联的所有帐户（Facebook、Dropbox、Gmail 等）的密码……我尝试了下面的编码，但无法获取密码……

```
 AccountManager am = AccountManager.get(this);
    Account [] acc = am.getAccounts();
    if (acc.length > 0){
        for (int i=0; i<acc.length; i++){
            String password = am.getPassword(acc[i]);
            listedAcc += acc[i] + " Password:" + password.toString() + "\n\n";
        }
        accounts.setText(listedAcc.toString()); 
```

有人可以帮我解决这个问题...谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T07:30:10.110

你不可以做这个

只有使用与 facebook/gmail/../other 帐户的身份验证器相同的 UID 的应用程序才能调用此方法。其他应用程序将始终收到错误消息。

的文档`getPassword()`说：

> 此方法要求调用者持有权限 AUTHENTICATE_ACCOUNTS 并具有与帐户的身份验证器相同的 UID。

我认为这句话的最后一部分对你的情况很重要。您正在尝试获取尚未为其编写 Authenticator 的帐户的密码。Authenticator 定义了如何对某个服务进行身份验证。只有身份验证器或使用相同 UID 的应用程序才允许调用 getPassword() 方法。通过这一限制，可以确保没有人可以窃取用户的帐户凭据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T07:23:11.050

您将获得安装在 android 手机中的 gmail 和电子邮件应用程序的帐户详细信息。我的意思是您将仅获得默认应用程序帐户详细信息。您将无法获取这些帐户的密码。但是在根设备中，您将获得密码。但无根设备不会让你抓住它，因为它违反隐私。

代码片段。

```
AccountManager manager = (AccountManager) getSystemService(ACCOUNT_SERVICE);
Account[] list = manager.getAccounts();
String gmail = null;

    for(Account account: list)
    {
        if(account.type.equalsIgnoreCase("com.google"))
        {
            gmail = account.name;
            break;
        }
    } 
```

**需要使用许可：**

```
 <uses-permission android:name="android.permission.GET_ACCOUNTS"></uses-permission> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T07:20:21.867

来自方法 API：[Api](http://developer.android.com/reference/android/accounts/AccountManager.html#getPassword%28android.accounts.Account%29)

此方法要求调用者持有权限 AUTHENTICATE_ACCOUNTS 并具有与帐户的身份验证器相同的 UID。

# c# - 通过 C# 在 Excel 中给出数字格式

> ID：13246172
> 
> 赞同：2
> 
> 时间：2012-11-06T07:14:42.090
> 
> 标签：c#, html, styles, export-to-excel, number-formatting

我正在尝试从`GridView`.

下面是我的代码：

```
 public override void ExecuteResult(ControllerContext context)
        {

            HttpContext curContext = HttpContext.Current;
            curContext.Response.Clear();

            curContext.Response.AddHeader("content-disposition", "attachment;filename=" + fileName);
            curContext.Response.Charset = "";
            curContext.Response.Cache.SetCacheability(HttpCacheability.NoCache);
            curContext.Response.ContentType = "application/vnd.ms-excel";
            StringWriter sw = new StringWriter();
            HtmlTextWriter htw = new HtmlTextWriter(sw);
            htw.WriteLine("<font size=6>COMPANY<font>");
            htw.WriteLine("</br>");
            ExcelGridView.HeaderStyle.BackColor = Color.Orange;
            ExcelGridView.RenderControl(htw);
            ExcelGridView.Rows[2].
            htw.WriteLine("<table border=1 bgcolor=#DBA901>");
            htw.WriteLine("<tr >");
            htw.WriteLine("<td>");
            htw.WriteLine("Total");
            htw.WriteLine("</td>");
            htw.WriteLine("<td colspan=1>");
            htw.WriteLine(totalQ);
            htw.WriteLine("</td>");
            htw.WriteLine("<td>");
            htw.WriteLine("</td>");
            htw.WriteLine("<td  style=mso-number-format:.00>");
            htw.WriteLine(totalP);
            htw.WriteLine("</td>");
            htw.WriteLine("</tr>");
            htw.WriteLine("<table>");

            byte[] byteArray = Encoding.ASCII.GetBytes(sw.ToString());
            MemoryStream s = new MemoryStream(byteArray);
            StreamReader sr = new StreamReader(s, Encoding.ASCII);
            curContext.Response.Write(sr.ReadToEnd());

            curContext.Response.End();
        } 
```

我的问题是在 Excel 中生成的表格中，数字不是以十进制格式显示的。

**例如 123.45 将按原样显示，但 123.00 将显示为 123。我想在这些值中强制执行 .00。另外，我只想在第三列和第四列中强制执行它。**

GridView 中的值与我希望的一样，但是在导出到 Excel 时仅发生上述问题。

谁能建议我一个可能的解决方案？谢谢你。

**注意**：在上面的代码中**ExcelGridView.RenderControl(htw);** 是 GridView 的代码，**ExcelGridView**是 GridView 的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T08:19:52.967

尝试使用 EPPlus 库从 C# 创建 Excel：

[http://epplus.codeplex.com/](http://epplus.codeplex.com/)

使用此库，您可以将单元格格式设置为数字，使用十进制和千位分隔符。

尝试使用 StringBuilder （自定义格式有效）：

```
public override void ExecuteResult(ControllerContext context)
{

    HttpContext curContext = HttpContext.Current;
    curContext.Response.Clear();
    curContext.Response.AddHeader("content-disposition", "attachment;filename=" + fileName);
    curContext.Response.Charset = "";
    curContext.Response.Cache.SetCacheability(HttpCacheability.NoCache);
    curContext.Response.ContentType = "application/vnd.ms-excel";
    StringBuilder sb = new StringBuilder();
    sb.Append("<font size=6>COMPANY<font>");
    sb.Append("</br>");
    ExcelGridView.HeaderStyle.BackColor = Color.Orange;
    ExcelGridView.RenderControl(htw);
    ExcelGridView.Rows[2].
    sb.Append("<table border=1 bgcolor=#DBA901>");
    sb.Append("<tr >");
    sb.Append("<td>");
    sb.Append("Total");
    sb.Append("</td>");
    sb.Append("<td colspan=1>");
    sb.Append(totalQ);
    sb.Append("</td>");
    sb.Append("<td>");
    sb.Append("</td>");
    sb.Append("<td  style=mso-number-format:.00>");
    sb.Append(totalP);
    sb.Append("</td>");
    sb.Append("</tr>");
    sb.Append("<table>");

    byte[] byteArray = Encoding.ASCII.GetBytes(sb.ToString());
    MemoryStream s = new MemoryStream(byteArray);
    StreamReader sr = new StreamReader(s, Encoding.ASCII);
    curContext.Response.Write(sr.ReadToEnd());

    curContext.Response.End();
} 
```

# c++ - 在可变参数模板上计算函数

> ID：13246182
> 
> 赞同：3
> 
> 时间：2012-11-06T07:15:47.027
> 
> 标签：c++, c++11, variadic-templates, variadic-functions, constexpr

我试图找出在可变参数类型列表上实现函数的最惯用方式。例如，计算所有类型的最大大小。我知道有几种方法可以完成这样的任务，但我想知道什么时候选择哪种策略。

这些是我会考虑的机制（可能存在更多，如果有，请提及）：

*   类型特征（最好使用 using 声明简洁）：

    ```
    template <typename Head>
    using max_size = typename std::integral_constant<size_t, sizeof(Head)>::type;

    template <typename Head, typename... Tail>
    using max_size = ?; 
    ```

*   `constexpr`职能：

    ```
    template <typename Head>
    constexpr size_t max_size() { return sizeof(Head); }

    template <typename Head, typename... Tail>
    constexpr size_t max_size() { ? } 
    ```

我的问题是双重的：

1.  计算的哪些特征决定了选择什么策略？

2.  在每种情况下，上述最大尺寸示例的示例实现如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T07:34:44.147

我个人更喜欢函数而不是特征，我发现它们更容易操作和更自然。但这当然是主观的；）

```
#include <iostream>

template <typename Head>
constexpr size_t max_size() { return sizeof(Head); }

template <typename Head, typename Next, typename... Tail>
constexpr size_t max_size() {
    return max_size<Head>() > max_size<Next, Tail...>() ?
           max_size<Head>() : max_size<Next, Tail...>();
}

int main() {
  std::cout << "int: " << max_size<int>() << "\n";
  std::cout << "char, short, int: " << max_size<char, short, int>() << "\n";
  std::cout << "char, double, int: " << max_size<char, double, int>() << "\n";
} 
```

在[liveworkspace](http://liveworkspace.org/code/3af95db1f4235401ea0cf6dc318e75f2)行动：

```
int: 4
char, short, int: 4
char, double, int: 8 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T07:44:35.550

我会远离严格使用`constexpr`，因为它们更难组合。例如，我什至不确定高阶元函数是否可以使用`constexpr`，如果是这样的话，它们使用函数指针作为模板参数，这很丑陋。

一般来说，我从一个元函数类开始：

```
struct max_size {
  template<typename... Ts>
  struct apply : parampack_foldl::apply<boost::mpl::quote2<boost::mpl::max>, typename boost::mpl::sizeof_<Ts>::type...>;
}; 
```

然后创建一个别名来减少打字：

```
template<typename... Ts>
using MaxSize = typename max_size::apply<Ts>::type; 
```

或者，创建一个 constexpr 函数：

```
template <typename... Ts>
constexpr size_t max_size() { return max_size::apply<Ts...>::type::value; } 
```

第二步真的只是风格问题，真正重要的是你有第一个，它给你最多的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T17:49:49.880

为了完整起见，还有继承技术：

```
#include <cstddef>
using std::size_t;

template<size_t ...S> struct max_size_t;

template<size_t S1, size_t S2, size_t ...Rest>
struct max_size_t<S1, S2, Rest...>
   : max_size_t<(S2 < S1) ? S1 : S2, Rest...> {
};

template<size_t S>
struct max_size_t<S> {
  static const int value = S;
}; 

template<> struct max_size_t<> {
  static const int value = 0;
};

template<typename ...T> struct max_size : max_size_t<sizeof(T)...> {};

// Using the same test-harness as Matthieu M:
#include <iostream>

int main() {
  std::cout << "int: " << max_size<int>::value << "\n";
  std::cout << "char, short, int: " << max_size<char, short, int>::value << "\n";
  std::cout << "char, double, int: " << max_size<char, double, int>::value << "\n";
  return 0;
} 
```

也在[liveworkspace](http://liveworkspace.org/code/7ce51b276deb6263b1af1e95bda7f0ca)。

虽然这不是我选择实现的一种方式`max_size`，但当所需的函数是返回类型的函数时，它非常方便（下面是高度人为的示例）：

```
template<typename T1, typename T2, bool B=(sizeof(T1)>sizeof(T2))> struct selector;
template<typename T1, typename T2> struct selector<T1, T2, true> { using type = T1; };
template<typename T1, typename T2> struct selector<T1, T2, false> { using type = T2; };

template<typename T1, typename ...Rest> struct largest_type;

template<typename T1, typename T2, typename ...Rest>
struct largest_type<T1, T2, Rest...>
   : largest_type<typename selector<T1, T2>::type, Rest...> {};

template<typename T1> struct largest_type<T1> { using type = T1; };

#include <iostream>
int main() {
  static const unsigned long long u = 1ULL << 63;
  std::cout << "int: " << typename largest_type<int>::type(u) << "\n";
  std::cout << "int, double: " << typename largest_type<int, double>::type(u) << "\n";
  std::cout << "short, float, long long: " << typename largest_type<short, float, long long>::type(u) << "\n";
return 0;
} 
```

[在这里](http://liveworkspace.org/code/16ee907b8e8684f2a6715b5cb5fc7acc)看到它。

# java - eclipse jdt编译器中不必要的强制转换警告

> ID：13246188
> 
> 赞同：0
> 
> 时间：2012-11-06T07:15:54.620
> 
> 标签：java, warnings, eclipse-jdt

如何在没有 Eclipse IDE 的 eclipse jdt 编译器中禁用（抑制）不必要的强制转换警告？也许有任何编译选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:19:01.793

**去 ： -**

> Windows -> 首选项 -> 左侧面板上的 Java -> 编译器 -> 错误/警告。

在那里你可以禁用你不想要的警告。

* * *

要在使用 编译时禁用警告`javac`，可以使用`-Xlint:-name`flag，其中`name`是警告的名称。

有关编译时可用的更多选项，请参阅[javac doc](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/javac.html#options)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T09:35:00.803

呃，去掉不必要的演员表？

# scala - 具有多个参数列表和柯里化的 Scala 按名称参数

> ID：13246189
> 
> 赞同：11
> 
> 时间：2012-11-06T07:16:27.753
> 
> 标签：scala

在 Scala (2.9.2) 中，我试图创建一个在访问时提供其他值的函数

```
() => Any 
```

我以为我通过名称/柯里化解决方案成功地做到了这一点：

```
def byName(theValue : => Any)() : Any = theValue
val myHolder = byName(myValue)_ 
```

所以我的持有人是正确的类型。但是我发现在创建这个 curried 函数的过程中，按名称参数被评估。如果我执行以下操作，它会按预期工作：

```
def byName(theValue : => Any) : Any = () => theValue
val myHolder = byName(myValue) 
```

我得出结论，柯里化过程的某些部分是引用第一个参数列表并触发其评估。任何人都可以确认和/或解释为什么或是否有任何关于使用具有多个参数列表的名称参数的指南？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T09:03:04.040

这对我来说似乎是一个错误。我可以在 scala 2.9.1 中触发这种奇怪的行为，但不能在 scala 2.10 RC1 中触发，所以我想这在某个时候已经修复。

在 Scala 2.9.1 中：

```
Welcome to Scala version 2.9.1.final (Java HotSpot(TM) Client VM, Java 1.6.0_27).
Type in expressions to have them evaluated.
Type :help for more information.
scala> def byName(theValue : => Any)() : Any = theValue
byName: (theValue: => Any)()Any
scala> def myValue: String = { println("Computing myValue"); "hello" }
myValue: String
scala> val myHolder = byName(myValue)_
Computing myValue
myHolder: () => Any = <function0>
scala> myHolder()
res0: Any = hello 
```

在 Scala 2.10-RC1 中：

```
Welcome to Scala version 2.10.0-RC1 (Java HotSpot(TM) Client VM, Java 1.6.0_27).
Type in expressions to have them evaluated.
Type :help for more information.

scala> def byName(theValue : => Any)() : Any = theValue
byName: (theValue: => Any)()Any
scala> def myValue: String = { println("Computing myValue"); "hello" }
myValue: String
scala> val myHolder = byName(myValue)_
myHolder: () => Any = <function0>
scala> myHolder()
Computing myValue
res0: Any = hello 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T09:30:42.970

问题是 [https://issues.scala-lang.org/browse/SI-302](https://issues.scala-lang.org/browse/SI-302) 和 [https://issues.scala-lang.org/browse/SI-5610](https://issues.scala-lang.org/browse/SI-5610)

就个人而言，我发现现在的“旧”行为更直观：部分应用意味着应用了某些东西。

或者正如奥德斯基所说：

> 不，这就是 eta 扩展的定义方式。你不只是在表达式周围包裹一个 lambda，你首先评估你能做的。

但相反，强制评估比设计暂停它的语法更容易。

# java - 无法加载类“com.google.gwt.validation.rebind.GwtSpecificValidatorGenerator”

> ID：13246192
> 
> 赞同：0
> 
> 时间：2012-11-06T07:16:58.180
> 
> 标签：java, gwt

伙计们，出现以下错误的原因可能是什么？

```
Loading inherited module 'com.test.courierApp.AdminPanel'
   Loading inherited module 'com.google.gwt.user.User'
      Loading inherited module 'com.google.gwt.editor.Editor'
         Loading inherited module 'com.google.gwt.validation.Validation'
            [ERROR] Unable to load class 'com.google.gwt.validation.rebind.GwtSpecificValidatorGenerator' 
```

在我从自己构建的 GWT 切换到官方 2.5 之后，它开始发生。我可以看到 GwtSpecificValidatorGenerator之前[存在于主干](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/validation/rebind/GwtSpecificValidatorGenerator.java?r=11210)中，这解释了为什么编译器找不到它。

但我无法解释的是在我的代码中引用了这个缺失的类。我到处搜索，甚至在 IntelliJ 的缓存中......

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T05:56:45.637

看起来这是IDEA的一些故障。删除所有全局库并重新添加必要的库后，编译错误消失了。太糟糕了 ：（

# python - python 2.7 中的 re.sub

> ID：13246197
> 
> 赞同：0
> 
> 时间：2012-11-06T07:17:03.957
> 
> 标签：python, regex

尝试使用 re.sub，python 2.7 将 html 文件中的文本块替换为“xxx”。我只能让它与没有空格或换行符的基本字符串一起工作。此代码找不到可替换的内容。我试过 DOTALL 和其他东西，但没有任何效果。它只是打印整个文件。我已成功使用 re.search，但这不起作用。

代码：

```
print re.sub(r'table\sstyle\=(.+)script', r'xxx', text, re.S) 
```

正在搜索（文本）：

```
<table style="background-color: #ecddb0">
<tbody>
<TR>
<TD>
<style type="text/css">
body {
background-color: #ffffff;
margin: 0px;
padding: 0px 0 0 0px;
</style>
<script type="text/javascript 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T07:27:22.160

的第四个参数`re.sub`是`count`。你想设置`flags`：

```
re.sub(r'table\sstyle\=(.+)script', r'xxx', text, flags=re.S) 
```

# java - Spring 3.0 MVC 自定义 WebArgumentResolver 跳过验证

> ID：13246199
> 
> 赞同：2
> 
> 时间：2012-11-06T07:17:28.880
> 
> 标签：java, spring, validation, spring-mvc

我们有几个带`@RequestMapping`注释的控制器方法可以做一些事情。他们每个人都有一个以上的论点，我们希望受到约束。例如：

```
@RequestMapping(value = "/a/b", method = RequestMethod.GET)
@ResponseBody
public Response getAB(ARequest aRequest, BRequest bRequest) throws ServiceException {
    ...
} 
```

这显然工作正常。但是，我们的需求中的一个怪癖是我们获取包含*下划线*的请求参数。例如; 在上面的端点上，我们会收到一个如下所示的请求：`http://x:8000/a/b?req_param=1`。这会导致默认的 Spring 绑定失败，因为在我们想要绑定的对象中，我们定义了`req_param`驼峰式 ( `reqParam`) 而不是在 Java 代码中使用下划线。

为了解决这个问题，我们实现了我们自己的注解 ( `@Camelize`) 和我们自己的自定义`WebArgumentResolver`，我们已经在 Spring 上下文中注册了它们。然后我们用 注释我们的控制器方法参数`@Camelize`，这会导致我们的自定义`WebArgumentResolver`介入并更正绑定。这也很好用。

现在问题出现了，更具体地说，当我们还想*验证*我们的论点时，这似乎失败了。例如，继续上面的示例：

```
@RequestMapping(value = "/a/b", method = RequestMethod.GET)
@ResponseBody
public Response getAB(@Camelize @Valid ARequest aRequest, Errors aRequestErrors, BRequest bRequest) throws ServiceException {
    ...
} 
```

这失败了，但有例外：`java.lang.IllegalStateException: Errors/BindingResult argument declared without preceding model attribute. Check your handler method signature!`.

看来我们不能同时使用我们的自定义`WebArgumentResolver`和验证使用`@Valid`。我们已经将其缩小到 custom `WebArgumentResolver`，从某种意义上说*，只要*this*不*返回`UNRESOLVED`，Spring MVC 就不会打扰验证并抛出上面的异常。

*   谁能确认这是预期的行为？
*   有解决办法吗？目前我们正在考虑删除自定义`WebArgumentResolver`并用过滤器替换它，但这似乎对我们需要的东西非常具有侵入性。

谢谢！

**编辑：**我们使用的是 Spring 3.0.5。

# c++ - cout 部分打印没有 endl

> ID：13246204
> 
> 赞同：1
> 
> 时间：2012-11-06T07:18:17.007
> 
> 标签：c++, cout, output

我正在打印一堆字符串，如下所示：

```
cout<<count<<"|"<<newTime.time<<"|"<<newCat<<"|"<<newCon<<endl; 
```

其中count是一个计数器，newTime.time是一个时间字符串，newCat和newCon都是字符串。输出如下：

```
06:02:11:20:08|DB Mgr|Sending query: “SELECT * FROM users” 
```

显然，它忽略了计数和“|”。但是，如果我将代码更改为

```
cout<<count<<"|"<<endl;
cout<<newTime.time<<"|"<<newCat<<"|"<<newCon<<endl; 
```

输出刚刚变成

```
2|
06:02:11:20:08|DB Mgr|Sending query: “SELECT * FROM users” 
```

我首先在想这是否是缓冲区的问题。我将endl更改为flush，但问题仍然存在。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T07:23:56.043

*听起来*您的`time`字符串中可能有回车符`\r`。如果是这种情况，那么使用第一种方法输出*仍将*输出计数和分隔符，但`\r`将返回到行首并开始覆盖它。

您的第二种方法不会覆盖计数，因为它位于前一行（`\r`如果您已经在行首，则 a 几乎没有明显的效果）。

如果您在类似 UNIX 的平台上运行，您可以通过类似`od -xcb`（十六进制转储过滤器）的管道输出来查看输出中是否有 a `\r`。

或者，如果您的代码中有一个字符串，您可以查看它是否包含回车符，例如：

```
std::string s = "whatever";
size_t pos = s.find ('\r');
if (pos != std::string::npos) {
    // carriage return was found.
} 
```

例如，以下程序：

```
#include <iostream>

int main (void) {
    std::string s1 = "strA";
    std::string s2 = "\rstrB";
    std::string s3 = "strC";

    std::cout << s1 << '|' << s2 << '|' << s3 << '\n';
    std::cout << "=====\n";

    std::cout << s1 << '|' << '\n';
    std::cout << s2 << '|' << s3 << '\n';

    std::cout << "=====\n";
    size_t pos = s2.find ('\r');
    if (pos != std::string::npos)
        std::cout << "CR found at " << pos << '\n';
    return 0;
} 
```

似乎输出以下内容：

```
strB|strC
=====
strA|
strB|strC
=====
CR found at 0 
```

但事实上，第一行实际上是：

```
strA|(\r)strB|strC 
```

`(\r)`回车在哪里。

* * *

请记住，您很少需要`endl`- 它实际上是`\n`一个在大多数情况下并不是真正需要的同花顺。您可以摆脱使用`\n`，让自动冲洗自行处理。

# c - 当 main() 函数不返回零时会发生什么

> ID：13246210
> 
> 赞同：4
> 
> 时间：2012-11-06T07:18:15.953
> 
> 标签：c, operating-system

请考虑以下代码：

```
#include <stdio.h>

int main()
{
    int x;
    printf ("\nEnter x: ");
    scanf ("%d", &x);

    return x;
}

Output:
$Enter x: -2

$echo $?
254 
```

我的问题是：

操作系统通过执行进程 P（上面正在执行的代码）知道 main() 的返回值是非零的。

在这种情况下，操作系统是否会进行任何处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T07:20:56.317

返回值实际上表示程序完成的状态。非零值表示程序已异常终止。该状态可能被其他程序使用，因此返回实际状态始终是一个好习惯。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T07:27:55.767

这里的“操作系统”必须清楚你所理解的。

如果您从 shell 的角度来看（这通常只是另一个用户空间程序，而不是内核本身的一部分），进程的退出值用于评估表达式的值，并且在执行 shell 时很重要编程，因为它是进程终止后最自然的检查。

从内核的角度来看，进程的退出值在很大程度上被忽略了。内核必须在进程之后进行清理，无论它返回的退出代码如何。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T23:07:08.920

通常，当程序“按预期”执行时，我们返回 0。如果它执行了不应该执行的操作，则根据错误类型返回非零值（对此您可以参考 errno 手册）。现在这个返回值被程序运行的“shell”接收。可以使用“$?”访问此返回值 在 BASH 中。所以它纯粹是为了用户对程序的可访问性（它运行正确，如果不是什么错误）。然后，此返回值可用于 shell 脚本等，以决定是否重新运行或管理员想要执行的任何操作。内核只是清理用户级程序。

# javafx - JavaFX：如何在初始化期间从控制器获取阶段？

> ID：13246211
> 
> 赞同：98
> 
> 时间：2012-11-06T07:18:36.130
> 
> 标签：javafx, initialization, javafx-2, javafx-8, stage

我想从我的控制器类处理舞台事件（即隐藏）。所以我所要做的就是通过添加一个监听器

```
((Stage)myPane.getScene().getWindow()).setOn*whatIwant*(...); 
```

但问题是初始化立即开始

```
Parent root = FXMLLoader.load(getClass().getResource("MyGui.fxml")); 
```

和之前

```
Scene scene = new Scene(root);
stage.setScene(scene); 
```

因此 .getScene() 返回 null。

我自己发现的唯一解决方法是在 myPane.sceneProperty() 中添加一个侦听器，当它变为非 null 时，我得到了场景，添加到它的 .windowProperty() 我的！该死的！我最终检索到的监听器处理阶段。这一切都以设置所需的侦听器为舞台事件而告终。我觉得听众太多了。这是解决我的问题的唯一方法吗？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-11-06T08:18:21.607

`FXMLLoader`您可以在初始化之后通过获取控制器的实例`getController()`，但您需要实例化 an`FXMLLoader`而不是使用静态方法。

`load()`之后直接调用控制器后，我会通过这个阶段：

```
FXMLLoader loader = new FXMLLoader(getClass().getResource("MyGui.fxml"));
Parent root = (Parent)loader.load();
MyController controller = (MyController)loader.getController();
controller.setStageAndSetupListeners(stage); // or what you want to do 
```

* * *

## 回答 #2

> 赞同：119
> 
> 时间：2015-07-28T20:48:07.853

您只需要提供`AnchorPane`一个 ID，然后您就可以从中获取`Stage`。

```
@FXML private AnchorPane ap;
Stage stage = (Stage) ap.getScene().getWindow(); 
```

从这里，您可以添加`Listener`您需要的内容。

编辑：正如下面 EarthMind 所述，它不一定是`AnchorPane`元素；它可以是您定义的任何元素。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2015-06-18T08:19:18.587

我知道这不是您想要的答案，但 IMO 提出的解决方案并不好（而且您自己的方式是）。为什么？因为它们取决于应用程序状态。在 JavaFX 中，控件、场景和舞台不相互依赖。这意味着控件可以在不添加到场景的情况下存在，并且场景可以在不附加到舞台的情况下存在。然后，在时刻 t1，控制可以附加到场景，并且在时刻 t2，可以将场景添加到舞台（这解释了为什么它们是彼此可观察的属性）。

因此，建议获取控制器引用并调用方法，将阶段传递给它的方法会为您的应用程序添加一个状态。这意味着您需要在创建阶段之后的正确时刻调用该方法。换句话说，您现在需要遵循一个顺序： 1- 创建阶段 2- 通过方法将创建的阶段传递给控制器​​。

在这种方法中，您不能（或不应该）更改此顺序。所以你失去了无国籍状态。在软件中，一般来说，状态是邪恶的。理想情况下，方法不应要求任何调用顺序。

那么什么是正确的解决方案？有两种选择：

1-您的方法，在控制器侦听属性中获得舞台。我认为这是正确的做法。像这样：

```
pane.sceneProperty().addListener((observableScene, oldScene, newScene) -> {
    if (oldScene == null && newScene != null) {
        // scene is set for the first time. Now its the time to listen stage changes.
        newScene.windowProperty().addListener((observableWindow, oldWindow, newWindow) -> {
            if (oldWindow == null && newWindow != null) {
                // stage is set. now is the right time to do whatever we need to the stage in the controller.
                ((Stage) newWindow).maximizedProperty().addListener((a, b, c) -> {
                    if (c) {
                        System.out.println("I am maximized!");
                    }
                });
            }
        });
    }
}); 
```

2-您在创建的地方做您需要做的事情`Stage`（这不是您想要的）：

```
Stage stage = new Stage();
stage.maximizedProperty().addListener((a, b, c) -> {
            if (c) {
                System.out.println("I am maximized!");
            }
        });
stage.setScene(someScene);
... 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2014-10-15T04:17:31.417

在控制器中获取舞台对象的最简单方法是：

1.  在自己创建的控制器类中添加一个额外的方法，例如（它将是在控制器类中设置阶段的 setter 方法），

    ```
    private Stage myStage;
    public void setStage(Stage stage) {
         myStage = stage;
    } 
    ```

2.  在启动方法中获取控制器并设置阶段

    ```
    FXMLLoader loader = new FXMLLoader(getClass().getResource("MyFXML.fxml"));
    OwnController controller = loader.getController();
    controller.setStage(this.stage); 
    ```

3.  现在您可以访问控制器中的舞台

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-01-23T14:31:58.750

Platform.runLater 用于阻止执行，直到初始化完成。在这种情况下，我想在每次调整窗口宽度时刷新列表视图。

```
Platform.runLater(() -> {
    ((Stage) listView.getScene().getWindow()).widthProperty().addListener((obs, oldVal, newVal) -> {
        listView.refresh();
    });
}); 
```

在你的情况下

```
Platform.runLater(()->{
    ((Stage)myPane.getScene().getWindow()).setOn*whatIwant*(...);
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-11T10:13:57.187

为任何节点分配**fx:id**或声明变量：锚窗格、按钮等。然后向其添加事件处理程序，并在该事件处理程序中插入以下给定代码：

```
Stage stage = (Stage)((Node)((EventObject) eventVariable).getSource()).getScene().getWindow(); 
```

希望，这对你有用！

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2017-08-12T16:48:36.547

你可以得到 with `node.getScene`，如果你不调用 from `Platform.runLater`，结果是一个空值。

空值示例：

```
node.getScene(); 
```

示例没有空值：

```
Platform.runLater(() -> {
    node.getScene().addEventFilter(KeyEvent.KEY_PRESSED, event -> {
               //your event
     });
}); 
```

# php - 将 PHP 数据获取到 Javascript 数组中

> ID：13246214
> 
> 赞同：-1
> 
> 时间：2012-11-06T07:18:27.793
> 
> 标签：php, javascript, jquery, ajax, arrays

> **可能重复：**
> [在 PHP 和 Javascript 之间传输数组的最佳方式](https://stackoverflow.com/questions/393479/best-way-to-transfer-an-array-between-php-and-javascript)

我正在尝试使用 AJAX 将一系列数组从 PHP 返回到 javascript。

我尝试将电子邮件地址预先格式化为 JSON 对象并将其返回到我的 JS 脚本，然后将其解析为 JSON，但没有运气。

我有一个名为 emails 的主数组，我希望这些数组从 PHP 返回并转换为 JS 数组，我尝试过：

```
emails = $.makeArray($.parseJSON(email)) ; 
```

但没有运气。

我怎样才能达到我想要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:21:59.697

您应该能够使用`JSON_encode`将数组直接从 PHP 传递到 Javascript 变量：

```
<?php
    $arr = array(
        array("foo" => "bar")
    );
?>
<script type='text/javascript'>
    var myarray = <?php echo JSON_encode($my_array); ?>;
    alert(myarray[0].foo);
</script> 
```

# android - 平板电脑安卓应用程序安装错误

> ID：13246224
> 
> 赞同：0
> 
> 时间：2012-11-06T07:18:47.653
> 
> 标签：android, google-maps, tablet, failed-installation

制作了一个安卓应用程序，但在平板电脑上不支持。它使用`Google APIs [Android 2.2]`并有很多地图和`GPS`东西。它在手机上运行良好，但是当我在平板电脑上运行应用程序时，它说

```
Installation error: INSTALL_FAILED_MISSING_SHARED_LIBRARY 
```

我的清单文件有：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="8" />

<supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="true"
    android:resizeable="true"
    android:smallScreens="true"
     />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.CALL_PHONE" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.GET_TASKS" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <uses-library android:name="com.google.android.maps" />

    <activity .......... 
```

还做了

```
res/layout
res/layout-land
res/layout-large 
```

我认为这`<uses-library />`是造成问题的原因。写作`<uses-library android:name="com.google.android.maps" android:required="false />`不会解决我的问题，因为无论是手机还是平板电脑，谷歌地图都是必要的。

有什么建议么 ？
谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T07:23:40.520

```
To get past INSTALL_FAILED_MISSING_SHARED_LIBRARY error with Google Maps for Android:

1) Install Google map APIs. This can be done in Eclispe Windows/Android SDK and AVD Manager -> Available Packages -> Third Party Add-ons -> Google Inc. -> Google APIs by Google Inc., Android API X

2) From command line create new AVD. This can be done by listing targets (android list targets), then android create avd -n new_avd_api_233 -t "Google Inc.:Google APIs:X"

3) Then create AVD in Eclipse Windows/Android SDK and AVD Manager -> New... -> (Name: new_avd_X, Target: Google APIs (Google Inc.) - API Level X)

4) Create Android Project in Eclipse File/New/Android Project and select Google APIs Build Target.

5) add <uses-library android:name="com.google.android.maps" /> between <application> </application> tags.

5) Run Project as Android Application.

If error persists, then you still have problems, if it works, then this error is forever behind you. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T07:21:17.013

试试这个：

右键单击您的项目 > 属性 > Android >使用您正在使用的等效 api 级别检查**Google API**而不是**Android**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T17:01:34.793

我认为您的问题是因为您要测试的平板电脑没有谷歌地图库，有些平板电脑不支持地图应用程序，因为没有GPS，并且制造商没有包含谷歌地图库；是产品中没有功能的东西。

# iphone - 将标签/按钮/文本拖到另一个视图

> ID：13246226
> 
> 赞同：0
> 
> 时间：2012-11-06T07:18:50.013
> 
> 标签：iphone, ios5, uibutton, uilabel, iphone-5

有两种看法。在第一个视图中，我创建了标签、文本字段、按钮。用户如何将该标签/文本字段/按钮拖到第二个视图并编辑标签名称和大小、按钮名称和大小、文本字段大小/添加占位符。

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:49:25.307

您以编程方式创建了标签、文本字段和按钮，并将它们作为子视图添加到 view1 中。至此正确，但是如何将它们拖到 view2 中？它们在 xib 文件中不可见。因此，无法将以编程方式创建的对象从一个视图拖到另一个视图。您做一件事，将它们作为子视图添加到 view2 。

# iphone - 我如何在 UITableView 上添加 UIActivityIndi cator

> ID：13246227
> 
> 赞同：0
> 
> 时间：2012-11-06T07:19:10.167
> 
> 标签：iphone, objective-c, ios

我想知道何时首次加载 iphone 活动`UIActivityIndicator`的`UITableView`表加载必须开始闪烁，以及当我单击加载更多单元格时表在 iphone 中完全加载时，我还想在加载更多行时显示活动闪烁请告诉我如果您自己完成此代码，我该怎么做，这是代码，然后在此先感谢

```
#import "RootViewController.h"
#import "Tweet.h"

@implementation RootViewController

@synthesize customImage,pagecontrol,cell;//indexPath;

#pragma mark -
#pragma mark View lifecycle

- (void)viewDidLoad 
{
    pageSize = 2;

       // totalpages =(NSInteger) (xmlParser.tweets)/5 ;
    xmlParser = [[XMLParser alloc] loadXMLByURL:@"http://api.twitter.com/1/statuses/user_timeline/KentFranks.xml"];

    [super viewDidLoad];

    self.title = @"Tweets";

}

#pragma mark -
#pragma mark Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView 
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
{
    if([xmlParser.tweets count]>pageSize)
    {
        return pageSize+1;
    }
    return  xmlParser.tweets.count;
    }

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{

    static NSString *CellIdentifier = @"Cell";

    cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];

    }

    //UIImage    *twitterLogo = [[UIImage imageNamed:@"twitter-logo.png"]autorelease];

    NSString *imagepath = [[NSBundle mainBundle] pathForResource:@"twitter-logo" ofType:@"png"];

    UIImage *image =[[ UIImage alloc] initWithContentsOfFile:imagepath];
    cell.imageView.image = image;

    cell.detailTextLabel.text= @"Add Subtitle here";

    Tweet *currentTweet = [[xmlParser tweets] objectAtIndex:indexPath.row];
    if(indexPath.row<pageSize)

    {
        cell.textLabel.text = currentTweet.content;
    }

    else
    {

cell.textLabel.text = @"Load more ";
}

        NSLog(@"cell: %@",cell);
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    return cell;

}

-(IBAction)loadmorebutton:(id)sender;
{

    NSIndexPath *currentPath = [self.tableView indexPathForSelectedRow];
    NSIndexPath *nextPath = [NSIndexPath indexPathForRow:currentPath.row+1 inSection:currentPath.section];
    [self.tableView selectRowAtIndexPath:nextPath animated:YES scrollPosition:UITableViewScrollPositionMiddle];
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath  *)indexPath{

    if (indexPath.row==pageSize) 
    {
        pageSize=pageSize+2;
        [tableView reloadData];

    }

}

/*
 -(IBAction)pagecontrol:(UIPageControl *)pageControl
 {
    [self.tableView reloadData];
}
 -(IBAction)Pageindexchanges:(id)sender
{
    NSLog(@"clicked page index: %i ",pagecontrol.currentPage);

}
*/
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 55;
}

#pragma mark -
#pragma mark Table view delegate

/*- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{

}
*/

#pragma mark -
#pragma mark Memory management

- (void)didReceiveMemoryWarning 
{

    [super didReceiveMemoryWarning];

}

- (void)viewDidUnload 
{

}

- (void)dealloc 
{
    [xmlParser release];
    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:23:06.823

试试这个代码可能对你有帮助......

将微调器直接添加到单元格视图感觉有点 hacky，所以我使用 1x1 透明 png 作为图像视图并将其调整为我的微调器大小：

```
UITableViewCell *cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"NoReuse"] autorelease];
cell.textLabel.text = @"Loading...";

UIActivityIndicatorView *spinner = [[[UIActivityIndicatorView alloc] 
     initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray] autorelease];

// Spacer is a 1x1 transparent png
UIImage *spacer = [UIImage imageNamed:@"spacer"];

UIGraphicsBeginImageContext(spinner.frame.size);

[spacer drawInRect:CGRectMake(0,0,spinner.frame.size.width,spinner.frame.size.height)];
UIImage* resizedSpacer = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();
cell.imageView.image = resizedSpacer;
[cell.imageView addSubview:spinner];
[spinner startAnimating];

return cell; 
```

这给出了一个如下所示的单元格：

![加载单元](../Images/bda2957725907c20c88bd7a8a6bf3e55.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T07:42:45.397

这可能会帮助你 [https://github.com/pothibo/PHRefreshTriggerView](https://github.com/pothibo/PHRefreshTriggerView) ![这是 PHRefreshTriggview](../Images/828b3528b20ca1c7a5dac376175472ba.png)

第二个选项是 [https://github.com/enormego/EGOTableViewPullRefresh](https://github.com/enormego/EGOTableViewPullRefresh)

![现在这是第二张图片](../Images/45e881c7999e14ab140b23dc375d47ef.png)

# javascript - Jquery：图像src交换上的淡入淡出

> ID：13246228
> 
> 赞同：2
> 
> 时间：2012-11-06T07:18:52.510
> 
> 标签：javascript, jquery, html, fadein

我有一段 JQuery 脚本可以在点击时更改图像的 src：

```
var imgsrc;
$('#thumbs img').click(function(){
imgsrc = $(this).attr('src');
$('#mainphoto img').attr('src', imgsrc); 
```

我想知道是否有办法将 .fadeIn() 添加到这里？

我试过了：

```
$('#mainphoto img').fadeIn().attr('src', imgsrc); 
```

但这不起作用。

谁能建议一种方法来调整赛门铁克以适应这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T07:24:24.973

尝试

```
$('#thumbs img').click(function(){
    var imgsrc = $(this).attr('src');
    $('#mainphoto img').fadeOut(function(){
       $(this).attr('src', imgsrc).fadeIn();
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T07:25:53.537

试试这个

```
$('#thumbs img').click(function() {
    var imgsrc = $(this).attr('src');

    $('#mainphoto img').fadeOut().attr('src', imgsrc).load(function() {
        $(this).fadeIn();
    });
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-06T07:39:33.190

我在[jsFiddle](http://jsfiddle.net/2sAur/)中为您做了一个示例。

基本上，我所做的是在图像上监听点击事件。执行单击时，我将当前图像的显示更改为无，还将图像的 src 更改为新的，然后执行淡入（恢复显示）。

Javascript代码是：

```
$('#image').click(function(){
        $(this).css("display", "none");
        $('#image').attr('src', 'http://www.stat4you.com/theme/0.1.11/images/stat4you.png');
        $("#image").fadeIn("slow");
    })​ 
```

在 fadeIn ([这里](http://api.jquery.com/fadeIn/)) 的 jQuery 文档页面中，还有一些其他类似的示例：

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T07:27:49.087

```
$('#thumbs img').click(function () {
 var imgsrc = $(this).attr('src');
            $('#mainphoto img').fadeOut(function () {
                $(this).attr('src', imgsrc);
                $(this).fadeIn();
            });
        }) 
```

# java - 如何在java中将String转换为byteArray和byteArray到String Array？

> ID：13246231
> 
> 赞同：0
> 
> 时间：2012-11-06T07:19:04.473
> 
> 标签：java, android, string, bytearray, arrays

我想在java中将String转换为bytearray ..

例如，我想要如下输出：

```
String s = "82,73,70,70,90,95,3,0,87,65,86"; 
```

现在的逻辑是，我想要 bytearray 值中的相同字符串值，例如

```
byte[] b ={82,73,70,70,90,95,3,0,87,65,86}; 
```

`b = s.getBytes();`不返回相同的值...它返回字节数组值的每个字符串

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T07:22:37.070

`String`将by 逗号拆分`String array`为`Byte`.

```
 String s = "82,73,70,70,90,95,3,0,87,65,86";
        String[] splitedStr = s.split(",");
        byte[] b = new byte[split.length];
        int i=0;
        for (String byt : splitedStr) {
                 try{
            b[i++]=Byte.parseByte(byt);
                 }catch(Exception ex){ex.printStackTrace();}
        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T07:24:46.307

所以你可以尝试拆分你`String`的`,`，然后在循环中用静态方法**解析**每个数字`Byte.parseByte(<el>);`

```
String source = "1,2,3,4,5";
String[] temp = source.split(","); // this split your String with ,
byte[] bytesArray = new byte[temp.lenght];
int index = 0;
for (String item: temp) {
   bytesArray[index] = Byte.parseByte(item);
   index++;
} 
```

也有看看

*   [`Convert string to byte[]`](https://stackoverflow.com/questions/228987/convert-string-to-byte)
*   [`Byte order mark`](http://en.wikipedia.org/wiki/Byte_Order_Mark)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T07:22:01.803

```
String.split(",") 
```

返回一个包含单个数字的字符串数组。

```
Byte.parse() 
```

将您的字符串解析为字节值。循环遍历所有元素并填充您的字节数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-27T13:02:17.340

# # **如何在 java 中将 String 转换为 byteArray 和 byteArray 到 String Array？**#

```
String passwordValue="pass1234";

        SharedPreferences sharedPreferences;

        SharedPreferences.Editor editor;

        sharedPreferences = getActivity.getSharedPreferences("key",Context.MODE_PRIVATE);

        editor = sharedPreferences.edit();

        byte[] password = Base64.encode(passwordValue.getBytes(), Base64.DEFAULT);

        editor.putString("password", Arrays.toString(password));

        editor.commit();

        String password = sharedPreferences.getString("password", "");

        if (password != null) {

        String[] split = password.substring(1, password.length()-1).split(", ");

        byte[] array = new byte[split.length];

        for (int i = 0; i < split.length; i++) {

        array[i] = Byte.parseByte(split[i]);

        }

        byte[] decodeValue = Base64.decode(array, Base64.DEFAULT);

        userName.setText("" + new String(decodeValue));

        }  
        Output:-

        password:-"pass1234"  

        Encoded:-password: 0 = 99
        1 = 71
        2 = 70
        3 = 122
        4 = 99
        5 = 122
        6 = 69
        7 = 121
        8 = 77
        9 = 122
        10 = 81
        11 = 61
        12 = 10

        Decoded password:-pass1234 
```

# asp.net - Web.config 自定义错误模式冲突

> ID：13246236
> 
> 赞同：23
> 
> 时间：2012-11-06T07:19:44.817
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, web-config

我对 Web.Config 有一个重大而重要的问题，我需要查看我的页面的错误并在 asp.net Web 表单和 Web 配置中解决它，但是当发生错误时，我看到另一个错误并且我看到此消息：

> customErrors 模式为 Off 或 On 或 RemoteOnly，

我将此属性设置为 Off，但不显示错误并再次说请将属性设置为 On your CustomError。

![在此处输入图像描述](../Images/b815b1dbca25f826de7baa6a70569850.png)

![在此处输入图像描述](../Images/57fc99ad6ac7e73c1af348ffb967be19.png)

当我将模式设置为开时，请说请将 customErrors 模式再次设置为开。

![在此处输入图像描述](../Images/c4594ab9f3fc228a65dd0f4241e4d979.png)

![在此处输入图像描述](../Images/d210eee98ee61c8f23a0b71432b6d14e.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-01-13T10:35:41.753

> 当您遇到配置问题时，请确保您的设置未被覆盖。

在这种情况下，您的服务器可能具有`<deployment retail="true" />`覆盖应用程序设置并禁用跟踪输出、自定义错误和调试功能的配置。

将值更改为“假”

```
<deployment retail="false" /> 
```

**[MSDN 链接](http://msdn.microsoft.com/en-us/library/ms228298%28v=vs.85%29.aspx)**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-06T04:25:56.873

确保将 customErrors 标记嵌套在标记内的某个位置，`<system.web>`如下所示：

```
<system.web>
<customErrors mode="Off" />
</system.web> 
```

根据您的描述，它很可能是您放置在那里或以其他方式自动生成的。也尝试设置为 On 并重新启动应用程序池。您可以通过简单地`web.config`通过添加中断返回来修改文件来做到这一点，或者甚至只需按空格键，只要您进行了更改。现在重新上传，确保这是您第二次将 customErrors 模式设置为 On。希望您现在可以查看自定义错误页面。

如果您仍然有问题，并且可以从 IIS 管理器访问您的网站，请尝试在功能视图中编辑 .NET 错误页面。这也将做同样的事情，前提是您的自定义错误页面位于`web.config`文件要访问的正确目录中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-20T05:58:56.917

首先，您可以将 CustomErrors 模式从“RemoteOnly”设置为“off” `<customErrors mode="Off"></customErrors>`

其次，您可以检查 global.asax。也许您创建的 Response.Redirect 与 customError 中的 defaultRedirect 相同。您可以在此处查看更多详细信息[ASP.NET customErrors with mode=remoteOnly 和 global.asax 处理异常](https://stackoverflow.com/questions/3283008/asp-net-customerrors-with-mode-remoteonly-and-global-asax-handling-exceptions)

最后，也许你在你的 webconfig 中创建**了两个**system.web。您的配置文件中应该只有一个。请再次检查您的 webconfig。不要忘记`<compilation debug="true"/>`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-16T16:17:08.170

要显示调试错误而不显示自定义错误页面，您不需要 a`defaultRedirect`并且简单地拥有它然后应该输出调试/异常信息：

```
<system.web>
    <customErrors mode="On" />
</system.web> 
```

注意：确保`On`以大写**O**开头。通过更改 web.config，这应该（默认情况下）回收您的应用程序池并立即被拾取。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-01-18T22:14:11.697

这是如何在自定义页面上显示异常的示例代码。

首先使用按钮创建 Default.aspx：

```
 <asp:Button ID="Button1" runat="server" OnClick="Button1_Click" Text="Throw Error" /> 
```

为按钮单击事件添加以下代码：

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        throw new Exception("Sample Exception on my Page");
    } 
```

其次创建带有标签的 ErrorPage.aspx：

```
 <asp:Label ID="Label1" runat="server" Text=""></asp:Label> 
```

错误页面的代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        Exception ex = Server.GetLastError();
        if (ex != null && ex.InnerException != null)
        {
            Label1.Text = string.Format("An error occured: {0}", ex.InnerException.Message);
        }
    } 
```

最后在 web.config 中放置以下配置：

> ```
>  <system.web>
>       <customErrors mode="On" defaultRedirect="~/ErrorPage.aspx" redirectMode="ResponseRewrite" />
>     </system.web> 
> ```

编译并从 Default.aspx 开始。单击您的按钮，错误将显示在您的自定义页面上。

快乐编码！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-13T18:09:31.033

我只是想在这里发表评论，但我没有足够的评论点，我们可以查看产生错误的实际页面并查看整个 web.config 吗？您可以模糊连接字符串等，以免泄露任何密码。

但就我所见，

我认为从你所说的你正在本地机器上使用 IIS Express 调试。我会完成 IIS Express，或者 ctrl+F5 页面来查看站点是否没有被缓存。

将自定义错误设置为 Off 将向您显示调试消息 - 注意 Off 中的“O”必须用 f 的小写字母大写。看起来你有这个，但值得一提

自定义错误关闭 - 指定禁用自定义错误。这允许显示详细的错误。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-01-15T10:26:15.660

我从来没有见过它说设置为开。我已经看到它说将 customeErrors 设置为 off，这将为您提供详细的错误。将其设置为关闭，然后将您看到的实际错误消息添加到此帖子中。你确定你没有收到像 404 错误这样的不同消息吗？

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-01-18T22:57:03.897

据我所知，您没有`<customErrors mode="Off" />`作为节点中的第一个`<system.web>`节点。

如果我猜的话，你在一个节点中有 customErrors`<compilation targetFramework="x.x">`节点。

您可能将应用程序池设置为另一个版本的 .NET 框架，而不是编写应用程序。确保该`<customErrors mode="Off" />`节点是该节点中的第一个`<system.web>`，然后它很可能会给您详细的错误消息。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-01-19T13:05:10.557

删除这条线对我有用！

```
<customError  /> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-01-20T00:16:55.880

许多托管公司实际上覆盖了他们的 web.config 文件中的设置。您通常可以在网站的虚拟主机仪表板中设置这些具体属性。

如果您告诉我们您正在使用的具体虚拟主机，我们应该能够通过具体步骤提供更好的帮助。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-06-04T01:46:20.017

将模式设置为开，保存 web.config 然后刷新或重新启动 IIS，并确保模式在保存后仍设置为开。再次浏览它，它应该显示错误...

# android - 带有进度条和网格视图的 Android 图像下载器（Android 运行时）

> ID：13246246
> 
> 赞同：1
> 
> 时间：2012-11-06T07:20:37.643
> 
> 标签：android, exception, gridview, android-progressbar, imagedownload

我是 Java 和 Android 的新手。

在此应用程序中**，我尝试使用进度条下载多个图像并在 GridView 中显示图像。**我没有收到任何错误**，但有一些例外。**当我在 Eclipse 中运行此代码时，模拟器只显示“不幸停止”。所以请谁能帮我解决这个问题？

> java.lang.RuntimeException：无法实例化活动 ComponentInfo{com.kailash.imagedownloader/com.kailash.imagedownloader.MainActivity}：java.lang.InstantiationException：无法实例化类 com.kailash.imagedownloader.MainActivity；没有空的构造函数
> 
> 新实例失败：否（）
> 
> threadid=1：线程以未捕获的异常退出（组=0x40a13300）

这是代码：

```
package com.kailash.imagedownloader;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

import android.app.Activity;
import android.app.Dialog;
import android.app.ProgressDialog;
import android.graphics.drawable.Drawable;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Environment;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.GridView;
import android.widget.ListAdapter;

public class MainActivity extends Activity{

Button btnShowProgress;
private ProgressDialog pDialog;
GridView grid_view;
public static final int progress_bar_type = 0; 

protected static final String[] URLS = {
 "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_2944.jpg",
    "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_2989.jpg",
    "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3005.jpg",
    "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3012.jpg",
    "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3034.jpg",
    "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3047.jpg",
    "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3092.jpg",
    "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3110.jpg",
    "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3113.jpg",
    "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3128.jpg",
    "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3160.jpg",
};
public MainActivity(MainActivity mainActivity) {
    // TODO Auto-generated constructor stub
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    GridView gridview = (GridView) findViewById(R.id.grid_view);
    gridview.setAdapter((ListAdapter) new MainActivity(this));

    btnShowProgress = (Button) findViewById(R.id.btnProgressBar);
    grid_view = (GridView) findViewById(R.id.grid_view);
    btnShowProgress.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            new DownloadImages().execute(URLS);
        }
    });

    //new DownloadImages().execute();
}

@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case progress_bar_type: 
        pDialog = new ProgressDialog(this);
        pDialog.setMessage("Downloading file. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setMax(1000);
        pDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        pDialog.setCancelable(true);
        pDialog.show();
        return pDialog;
    default:
        return null;
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public class DownloadImages extends AsyncTask {

      @Override
      protected void onPreExecute() {
          super.onPreExecute();
          showDialog(progress_bar_type);
      }

    protected Object doInBackground(Object... params) {
        System.out.println("External Storage State = " + Environment.getExternalStorageState());
        File directory=new File(Environment.getExternalStorageDirectory(), "/Images");
        if (directory.exists()==false)
        {
            directory.mkdir();
        }
        for(int i = 0; i <URLS.length; i++) {
            try {
                File firstFile=new File(directory+"/" +i+ ".jpeg");
                if(firstFile.exists()==false)
                {
                    HttpClient httpClient =new DefaultHttpClient();
                    HttpGet httpGet =new HttpGet(URLS[i]);
                    HttpResponse resp = httpClient.execute(httpGet);
                    System.out.println("Status Code = " +resp.getStatusLine().getStatusCode());
                    if(resp.getStatusLine().getStatusCode()==200)
                    {
                        HttpEntity entity = resp.getEntity();
                        InputStream is = entity.getContent();
                        Boolean status = firstFile.createNewFile();

                        FileOutputStream foutS = new FileOutputStream(firstFile);
                        byte[] buffer = new byte[1024];
                        long total = 0;
                        int count;
                        while((count = is.read(buffer)) != -1){
                            total += count;
                            foutS.write(buffer, 0, count);
                        }
                        foutS.close();
                        is.close();
                        publishProgress(i);

                        }
                    }

                }catch(MalformedURLException e){
                    e.printStackTrace();
                }catch(ClientProtocolException e){
                    e.printStackTrace();
                }catch(IOException e){
                    e.printStackTrace();
                }
        }
        return null;
            }

     protected void onProgressUpdate(String... progress) {

         pDialog.setProgress(Integer.parseInt(progress[0]));
    }

    @SuppressWarnings("unchecked")
    protected void onProgressUpdate(Object... values){
        super.onProgressUpdate(values);

        }
     protected void onPostExecute(String file_url) {
         dismissDialog(progress_bar_type);
         String imagePath = Environment.getExternalStorageDirectory().toString() + "/Images";
          grid_view.setBackgroundDrawable(Drawable.createFromPath(imagePath));
       }
 }

} 
```

**谢谢****请帮忙**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:27:19.460

> java.lang.RuntimeException：无法实例化活动 ComponentInfo{com.kailash.imagedownloader/com.kailash.imagedownloader.MainActivity}：java.lang.InstantiationException：无法实例化类 com.kailash.imagedownloader.MainActivity；**没有空的构造函数**

扩展时不应创建构造函数`Activity`。当系统调用空构造函数时，创建另一个会导致类没有空构造函数。

也不需要创建一个，因为您根本不应该自己实例化一个活动。出于某种原因，您在内部实例化您的活动`onCreate`并将其转换为`ListAdapter`，这是一个错误：

```
gridview.setAdapter((ListAdapter) new MainActivity(this)); 
```

`ListAdapter`您应该使用为此扩展的不同类。

# matlab - 1] 在脚本运行期间更改变量值 2] 在循环中运行脚本时不会更新工作区中的变量值

> ID：13246261
> 
> 赞同：1
> 
> 时间：2012-11-06T07:21:49.270
> 
> 标签：matlab, serial-port, simulink, modbus

我正在使用 modbus RTU（串行通信）通过 Matlab 控制锅炉试验工厂。

我通过一个循环运行我的控制程序（在编辑器中）45分钟，但我面临两个问题：

1] 运行程序时我无法更改任何变量值，这是非常需要的。

2] 运行脚本时，我无法在工作区中看到实时数据。

它在完成执行时间后更新所有变量。对于我的应用程序，我希望每次迭代都出现数据。

我无法解决它们，所以我切换到 simulink，但这更令人沮丧。

在 simulink 中，我使用用户定义的块（嵌入式 Matlab 函数）来生成不支持内置 matlab 函数（如 dec2hex）的 modbus 地址 PDU。

请有人在 simulink 中告诉我，串行发送/接收支持哪种数据格式？（ASCII/HEX/DEC）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:40:19.407

如果您想在每次迭代后查看系统的状态，可以通过在此处设置断点来解决。如果需要，您甚至可以更改变量的值。

# sql-server-2005 - 我想从 with 的值中为函数提供参数

> ID：13246266
> 
> 赞同：0
> 
> 时间：2012-11-06T07:22:15.017
> 
> 标签：sql-server-2005

```
WITH
EmpDetails(EmpCode)
AS
(
 SELECT EmpCode 
 FROM Employee.tblEmp_Demographics 
 WHERE RecordStatus='present' 
)  

    select *,ROW_NUMBER() OVER (PARTITION BY EmpCode ORDER BY DateTaken DESC) AS RowNum,    
    (select GradeName From Master.GradeMaster where GradeCode=Grade And Deleted=0) As Grade,    
    SUM(Amount) OVER(PARTITION BY Grade) AS EmpAmount,
    SUM(DependentAmount) OVER(PARTITION BY Grade) As DepAmount,
    0 As CheckNo 
    from [dbo].[SELECT_AIRTICKET_DETAILS_BY_DATE](EmpDetails.EmpCode,getdate(),1) WHERE YEAR(DateTaken)=year(getdate()) 
```

但我得到一个错误

> 消息 4104，级别 16，状态 1，行 11 无法绑定多部分标识符“EmpDetails.EmpCode”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:26:52.720

我相信问题是您将列`EmpDetails.EmpCode`名传递给表值函数而不是单个值的结果。你可以试试这个：

```
DECLARE @EmpCode nvarchar(100);

SELECT TOP 1
       @EmpCode = EmpCode 
  FROM Employee.tblEmp_Demographics
 WHERE RecordStatus='present';

select *,ROW_NUMBER() OVER (PARTITION BY EmpCode ORDER BY DateTaken DESC) AS RowNum,    
(select GradeName From Master.GradeMaster where GradeCode=Grade And Deleted=0) As Grade,    
SUM(Amount) OVER(PARTITION BY Grade) AS EmpAmount,
SUM(DependentAmount) OVER(PARTITION BY Grade) As DepAmount,
0 As CheckNo 
from [dbo].[SELECT_AIRTICKET_DETAILS_BY_DATE](@EmpCode,getdate(),1) WHERE YEAR(DateTaken)=year(getdate()); 
```

如果您想要`Employee.tblEmp_Demographics`表中多个值的结果，您可以遍历每个值（可能不是最好的），或者修改表值函数以返回包含所有 EmpCode 值的结果集，然后添加一个`WHERE`子句将数据过滤为需要。

* * *

***编辑***

可能是这样的——注意修改后的函数返回所有 EmpCodes & 少了一个参数：

```
select *,ROW_NUMBER() OVER (PARTITION BY EmpCode ORDER BY DateTaken DESC) AS RowNum,    
(select GradeName From Master.GradeMaster where GradeCode=Grade And Deleted=0) As Grade,    
SUM(Amount) OVER(PARTITION BY Grade) AS EmpAmount,
SUM(DependentAmount) OVER(PARTITION BY Grade) As DepAmount,
0 As CheckNo 
  FROM [dbo].[SELECT_AIRTICKET_DETAILS_BY_DATE](getdate(),1) AS [Tickets]
 INNER JOIN Employee.tblEmp_Demographics
         ON tblEmp_Demographics.EmpCode = [Tickets].EmpCode
        AND tblEmp_Demographics.RecordStatus = 'present'
 WHERE YEAR(DateTaken) = year(getdate()); 
```

使用此解决方案，该函数将返回所有 EmpCode，但我们通过`INNER JOIN`对`Employee.tblEmp_Demographics`表执行 an 来过滤掉不必要的。

# java - 没有叶子的 JTree

> ID：13246270
> 
> 赞同：-1
> 
> 时间：2012-11-06T07:22:17.823
> 
> 标签：java, swing, jtree, treenode

是否可以制作没有叶子的JTree？如果可能的话，请告诉我方法。

![JTree 图像](../Images/86e538ec17430f1564f797d9a6d470e6.png)

我想将这些突出显示的叶子转换为文件夹或父级。

如果您想要除此之外的任何其他内容，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:23:38.143

如此所示[`FileTreeModel`](http://java.dzone.com/news/taking-new-swing-tree-table-a-)，`isLeaf()`应该返回`false`并且`getChildCount()`应该返回`0`目录。结果如图[所示](https://codereview.stackexchange.com/a/4447/6692)；虽然不明显，但该`test`目录是空的。

```
@Override
public boolean isLeaf(Object node) {
    File f = (File) node;
    return !f.isDirectory();
}

@Override
public int getChildCount(Object parent) {
    File f = (File) parent;
    if (!f.isDirectory()) {
        return 0;
    } else {
        return f.list().length;
    }
} 
```

![图片](../Images/7c1220f9da6f43a6289eb3845f86da6a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T07:28:03.787

我认为，如果您始终从 TreeModel 中的 isLeaf 返回 true，但从 getChildCount 为您的叶节点返回 0，您将得到您想要的。

# python - UnicodeDecodeError （再次）使用 format() 但不使用连接

> ID：13246273
> 
> 赞同：3
> 
> 时间：2012-11-06T07:22:57.583
> 
> 标签：python

我有一个带有文本字段`title`和`text`. 当我想打印它们时，我得到了（惊喜，惊喜！）`UnicodeDecodeError`。当我尝试格式化输出字符串时，它给了我一个错误，但是当我只是连接文本和标题并返回它时，我没有收到错误：

```
class Chunk:
  # init, fields, ...

  # this implementation will give me an error
  def __str__( self ):
    return u'{0} {1}'.format ( enc(self.text), enc(self.title) )

  # but this is OK - all is printed without error
  def __str__( self ):
    return enc(self.text) + enc(self.title)

def enc(x):
  return x.encode('utf-8','ignore') # tried many combinations of arguments...

c = Chunk()
c.text, c.title = ... # feed from external file
print c 
```

屁股！错误！

```
return u'{0} {1}'.format ( enc(self.text), enc(self.title) )
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc2 in position 2844: ordinal not in range(128) 
```

我想我使用了所有可能的组合`encode`/ `decode`/ `utf-8`/ `ascii`/ `replace`/ `ignore`/...

（python unicode 问题*真的很*烦人！）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T07:28:07.710

1.  当您返回 unicode 时，您应该[覆盖`__unicode__`，而不是。`__str__`](https://stackoverflow.com/questions/1307014/python-str-versus-unicode)
2.  无需调用`.encode()`，因为输入已经是 unicode。写吧

    ```
    def __unicode__(self):
        return u"{0} {1}".format(self.text, self.title) 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T07:33:14.297

避免2.x python的unicode问题最简单的方法就是将整体编码设置为utf-8，否则这样的问题会在突然出现的地方不断出现：

```
import sys
reload(sys)
sys.setdefaultencoding('utf-8') 
```

# algorithm - 小于给定数字且没有重复数字的数字数量

> ID：13246275
> 
> 赞同：4
> 
> 时间：2012-11-06T07:22:57.743
> 
> 标签：algorithm, math, combinations, digits

我们如何找到小于给定数字且其中没有重复数字的数字的数量？

例如，小于 100 的此类数字的数量为 90。（11、22、33、44、55、66、77、88、99 具有重复数字，因此被排除在外）。

同样，对于小于 1000 的数字，必须排除 101、110、122、202 等数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T08:00:39.610

Here is a way to make it quicker. Notice that there is a correlation between the number of digits in the max number and the solution (number of numbers which I will call `NON`)

```
100 (3 digits) => NON = 10 * 9  
1000 (4 digits) => NON = 10 * 9 * 8  
10000 (5 digits) => NON = 10 * 9 * 8 * 7  
...  
10000000000 (11 digits) => NON = 10 * 9 * 8 * 7 * 6 * 5 * 4 * 3 * 2 * 1 
```

after one billion you're bound to repeat a digit

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T09:10:26.143

你可以考虑两种情况：

*   比限制短的数字
*   与某个数字的限制不同的数字

`d`-digit 数字的计数是`9*9*8*... = 9*9!/(9-d)!`（第一个数字可能不为零）。所有短于`d`0 位数字的计数 + .. - 位数字的计数`d-1`。这些总和可能是预先计算的（甚至是硬编码的）。

`d`给出第一个数字的数字的计数`f`是`(10-f)*...*(10-(d-1)) = (10-f)!/(10-d)!`。您也可以预先计算阶乘。

伪代码：

```
To precompute fac:
  - fac = int[10];
  - fac[0] = 1;
  - for i in 1..10:
    - fac[i] = fac[i-1] * i;

To precompute count_shorter:
  - cs = int[10];
  - cs[0] = 0;
  - cs[1] = 1; // if zero is allowed
  - for i in 1..10:
    - cs[i+1] = cs[i] + 9 * fac[9] / fac[10-i]
  - count_shorter = cs;

To determine the count of numbers smaller than d:
  - sl = strlen(d)
  - if sl > 10
    - return count_shorter[11]
  - else
    - sum = 0
    account for shorter numbers:
    - sum += count_shorter[sl]
    account for same-length numbers; len=count of digits shared with the limit:
    - sum += 9* fac[9] / fac[10-sl];
    - for every len in 1..{sl-1}:
      count the unused digits less than d[len]; credits to @MvG for noting:
      - first_opts = d[len]-1;
      - for every i in 0..{len-1}:
        - if d[i] < d[len]
          - first_opts -= 1;
      - sum += first_opts * fac[9-len] / fac[10-sl] 
  - return sum 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T11:19:20.600

这是一些执行此操作的代码。代码中的注释。基本思想是您一次遍历最后计数的数字的数字，并且对于每个数字位置，您可以计算在该位置之前具有相同数字但在该当前位置具有较小数字的数字。这些函数建立在彼此之上，因此最后的`cntSmaller`函数是您实际调用的函数，也是具有最详细注释的函数。我已经检查了这是否与高达 30000 的所有参数的蛮力实现一致。我已经对替代实现进行了广泛的比较，所以我相当有信心这段代码是正确的。

```
from math import factorial

def take(n, r):
    """Count ways to choose r elements from a set of n without
    duplicates, taking order into account"""
    return factorial(n)/factorial(n - r)

def forLength(length, numDigits, numFirst):
    """Count ways to form numbers with length non-repeating digits
    that take their digits from a set of numDigits possible digits,
    with numFirst of these as possible choices for the first digit."""
    return numFirst * take(numDigits - 1, length - 1)

def noRepeated(digits, i):
    """Given a string of digits, recursively compute the digits for a
    number which is no larger than the input and has no repeated
    digits. Recursion starts at i=0."""
    if i == len(digits):
        return True
    while digits[i] in digits[:i] or not noRepeated(digits, i + 1):
        digits[i] -= 1
        for j in range(i + 1, len(digits)):
            digits[j] = 9
        if digits[i] < 0:
            digits[i] = 9
            return False
    return True

def lastCounted(n):
    """Compute the digits of the last number that is smaller than n
    and has no repeated digits."""
    digits = [int(i) for i in str(n - 1)]
    while not noRepeated(digits, 0):
        digits = [9]*(len(digits) - 1)
    while digits[0] == 0:
        digits = digits[1:]
    assert len(digits) == len(set(digits))
    return digits

def cntSmaller(n):
    if n < 2:
        return 0
    digits = lastCounted(n)
    cnt = 1 # the one from lastCounted is guaranteed to get counted
    l = len(digits)
    for i in range(1, l):
        # count all numbers with less digits
        # first digit non-zero, rest all other digits
        cnt += forLength(i, 10, 9)
    firstDigits = set(range(10))
    for i, d in enumerate(digits):
        # count numbers which are equal to lastCounted up to position
        # i but have a smaller digit at position i
        firstHere = firstDigits & set(range(d)) # smaller but not duplicate
        if i == 0: # this is the first digit
            firstHere.discard(0) # must not start with a zero
        cnt += forLength(l - i, 10 - i, len(firstHere))
        firstDigits.discard(d)
    return cnt 
```

*编辑：* `cntSmaller(9876543211)`返回 8877690，这是您可以使用非重复数字形成的最大数字数。这超过 10!=3628800 的事实让我困惑了一段时间，但这是正确的：当您考虑将序列填充到长度 10 时，除了数字中某处的零之外，还允许前导零序列。这增加了纯排列的计数。

# html - css 布局 - 重复背景和重叠图像

> ID：13246278
> 
> 赞同：0
> 
> 时间：2012-11-06T07:22:52.713
> 
> 标签：html, css

我被要求设计一个看起来像舞台的页面。图形元素排列如下：

```
[curtain repeat][left curtain][stage][right curtain][curtain repeat] 
```

左幕、舞台和右幕在屏幕中间保持固定宽度。如果浏览器水平展开，外部的“幕布重复”需要锚定到它们各自的幕布上，但朝着浏览器的外部重复。效果是边缘到边缘的幕布舞台幕布。

现在，我需要实现的另一个技巧是左右窗帘覆盖或重叠舞台。因此，如果我将一个元素放置在舞台右侧很远的位置，“右幕”的一部分将与它重叠，就好像该元素部分位于幕后一样。

我仍在学习 css 技巧，但我可以使用跳跃开始，因为这超出了我的经验水平。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:14:24.723

这是一个没有图像的基本结构，只有 bkg 颜色：

[http://jsfiddle.net/dtYKL/](http://jsfiddle.net/dtYKL/)

HTML：

```
<div class="theatre">

    <div class="content">
        <div class="curtain left">left curtain</div>
        <div class="stage">stage!</div>
        <div class="curtain right">right curtain</div>
    </div>

</div> 
```

CSS：

```
body, html{
    margin:0;            
    width:100%;
    height:100%;
}

.theatre{
    width:100%;                
    background:#369; /* this is where you'd add your repeating curtain bkg */
}

.theatre .content{ /* this is your fixed-width stage content */
    position:relative;            
    width:600px;
    height:400px;
    margin: 30px auto; /* centers the content */        
}

.content .curtain{ /* set your common styles, dimensions, positions for left + right curtains */
    position:absolute;    
    width:100px;
    height:100%;
    text-align:center;    
}

.content .left.curtain{ /* position and add image for left curtain */
    left:0;
    top:0;    
    background:#963; /* this is where you'd add your left curtain image */
}

.content .right.curtain{ /* position and add image for right curtain */
    right:0;
    top:0;    
    background:#963; /* this is where you'd add your right curtain image */
}

.content .stage{
    width:100%;
    height:100%;
    border-bottom:5px solid #000000; /* this will simulate a stage floor, you can use a solid bkg image if you want */
    box-sizing:border-box; /* this is so the border added above won't add to the div height */
    background-color:#888888; /* this is the stage background */    
    text-align:center;    
} 
```

​我将所有的内容都嵌套在一个 .theatre 类的 div 中，这样你就可以为你的作品指定一个设定的高度。如果这不是必需的，请随意移除该级别的收容并仅使用“身体”作为重复背景幕。如果您有任何问题，请让我知道，祝您好运！:)

# php - 伪流

> ID：13246280
> 
> 赞同：2
> 
> 时间：2012-11-06T07:22:57.737
> 
> 标签：php, pseudo-streaming

我目前测试脚本读取 mp4 文件的伪流，当我阅读一切正常时，但我无法移动时间线？问题？我的编码（mp4 元数据）是正确的，因为在播放器中没有此代码的情况下阅读时，我可以在时间线上移动。我使用 fplayer 来阅读 mp4。

```
 // ----- NO CACHE -----
session_cache_limiter('nocache');

// General header for no caching
$now = gmdate('D, d M Y H:i:s') . ' GMT';
header('Expires: ' . $now); // rfc2616 - Section 14.21
header('Last-Modified: ' . $now);
header('Cache-Control: no-store, no-cache, must-revalidate, pre-check=0, post-check=0, max-age=0'); // HTTP/1.1
header('Pragma: no-cache'); // HTTP/1.0

// ----- Seek position -----
$seekat = 0;
if (isset($_GET["pos"])) {
    $position = $_GET["pos"];
    if (is_numeric ($position)) {
        $seekat = $position;
    }
    if ($seekat < 0) $seekat = 0;
}

$filename = 'test.mp4'; 
$ext = strrchr($filename, ".");
$prefix = "";
$file = $prefix . $filename;
if (($filename != "") && (file_exists($file)) && ($ext==".mp4")) {
    header("Content-Type: video/x-mp4");
    if ($seekat > 0) header('Content-Length: ' . (filesize($file)-$seekat));
    else header('Content-Length: ' . filesize($file));

    if ($seekat != 0) {
        print("FLV");
        print(pack('C', 1 ));
        print(pack('C', 1 ));
        print(pack('N', 9 ));
        print(pack('N', 9 ));
    }
    $fh = fopen($file, "rb");
    fseek($fh, $seekat);
    while (!feof($fh)) {
        print (fread($fh, 16384));
        // print (fread($fh, filesize($file)));
    }
    fclose($fh);
} 
```

你能帮我吗谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T00:56:14.547

```
header("Content-Type: video/x-mp4"); 
```

我目前使用相同的代码，但即使当我流式传输 mp4 时，我也会让标题内容与 flv 一样

```
Content-Type: video/x-flv 
```

希望它会有所帮助

# codeigniter - 如何将 2 个参数路由到控制器？

> ID：13246286
> 
> 赞同：23
> 
> 时间：2012-11-06T07:23:51.783
> 
> 标签：codeigniter, codeigniter-2, codeigniter-url, codeigniter-routing

这似乎很基本，但我无法掌握它。

我正在尝试向控制器中的方法发送多个参数，如下所示：

```
http://localhost/ci/index.php/subjects/3/state 
```

这是我尝试过的路由：

```
$route['subjects/(:num)'] = 'subjects/view/$1';
$route['subjects/(:num)/{:any}'] = 'subjects/view/$1/$2'; 
```

该方法接受2个参数：

```
public function view($slug, $id = null){

} 
```

但我似乎得到了 404。我怎样才能让它工作？我需要视图方法始终接受 1 个参数和可选的其他参数。

**注意**：我包括 url 助手。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-06T07:41:41.780

您的路由括号有问题只需将其从 {} 更改为 () 括号即可

从

```
$route['subjects/(:num)/{:any}'] = 'subjects/view/$1/$2'; 
```

到

```
$route['subjects/(:num)/(:any)'] = 'subjects/view/$1/$2'; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-10-15T12:16:19.827

始终维护您的路由规则

像

```
$route['subjects/(:num)/(:any)/(:any)/(:any)'] = 'subjects/view/$1/$2/$3/$4';
$route['subjects/(:num)/(:any)/(:any)'] = 'subjects/view/$1/$2/$3';
$route['subjects/(:num)/(:any)'] = 'subjects/view/$1/$2'; 
```

始终遵循此模式进行路由

如果你像这样添加

```
$route['subjects/(:num)/(:any)'] = 'subjects/view/$1/$2';
$route['subjects/(:num)/(:any)/(:any)/(:any)'] = 'subjects/view/$1/$2/$3/$4';
$route['subjects/(:num)/(:any)/(:any)'] = 'subjects/view/$1/$2/$3'; 
```

那么总是第一个条件每次都为真。

另请参阅此链接--> [codeigniter 路由规则](https://ellislab.com/codeigniter/user-guide/general/routing.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-20T11:20:25.997

我曾经尝试过这个 URI 模式

```
$route['(:any)'] = 'welcome/list1/$1';
$route['(:any)/(:num)'] = 'welcome/list1/$1/$2';

$route['(:any)/(:any)'] = 'welcome/list2/$1/$2';
$route['(:any)/(:any)/(:num)'] = 'welcome/list2/$1/$2/$3';

$route['(:any)/(:any)/(:any)'] = 'welcome/list3/$1/$2/$3'; 
```

但它没有用......所以我用正则表达式替换它

`([a-z 0-9 -]+)`更换`(:any)` 和 `([0-9]+)`更换`(:num)`

所以它变成了

```
$route['([a-z 0-9 -]+)'] = 'welcome/list1/$1';
$route['([a-z 0-9 -]+)/([0-9]+)'] = 'welcome/list1/$1/$2';

$route['([a-z 0-9 -]+)/([a-z 0-9 -]+)'] = 'welcome/list2/$1/$2';
$route['([a-z 0-9 -]+)/([a-z 0-9 -]+)/([0-9]+)'] = 'welcome/list2/$1/$2/$3';

$route['([a-z 0-9 -]+)/([a-z 0-9 -]+)/([a-z 0-9 -]+)'] = 'welcome/list3/$1/$2/$3'; 
```

它对我有用:)

# jquery-ui - jQueryUI 1.9.1 是否有闭包编译器外部？

> ID：13246288
> 
> 赞同：2
> 
> 时间：2012-11-06T07:23:58.067
> 
> 标签：jquery-ui, google-closure-compiler

有谁知道 jQueryUI 1.9.1 的外部文件？

或者是否有可以生成外部文件的工具？似乎那里的某个人必须足够聪明，才能弄清楚如何自动完成。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:23:43.137

不幸的是，答案是目前不存在任何版本的 jQuery UI 的已知外部。

jQuery UI 文档现在有公共提要，这将使从该文档生成外部数据成为可能，但这还没有完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-01T19:59:57.937

据我所知，jQuery UI API 不可能有一个有意义的闭包外部声明。问题源于 API 结构。而不是创建可类型化的方法，例如：

```
var date = $("#datepicker").getDate();  // does not work 
```

API 为每种类型的小部件公开子方法，其中方法选择器作为第一个参数的字符串给出，例如

```
var date = $("#datepicker").datepicker("getDate"); 
```

这意味着该`datepicker`函数可以接受多种参数，并返回多种类型，这取决于提供的方法选择器。我能弄清楚如何使用 externs 声明的最好方法是遵循以下模式：

```
/**
 * @param {(string|Object)} fnName
 * @param {...?} fnArgs
 * @return {?}
 */
jQuery.prototype.datepicker = function(fnName, fnArgs) {}; 
```

这对于正确调用 jQuery UI API 具有消除警告消息的效果，但无助于查找不正确的调用。

# java - 在java中编写GIT预提交钩子？

> ID：13246291
> 
> 赞同：9
> 
> 时间：2012-11-06T07:23:53.813
> 
> 标签：java, git, pre-commit-hook

我需要用Java编写一个Git pre commit hook，它会在实际提交之前检查开发人员提交的代码是否根据特定的**eclipse代码格式化程序**进行了格式化，否则拒绝提交。是否可以用 Java 编写预提交挂钩？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T07:41:29.020

这个想法是调用一个脚本，然后调用你的java程序（检查格式）。

您可以[在这里看到一个用 python 编写的示例](http://bluec0re.blogspot.fr/2012/05/git-pre-receive-hook-with-checkstyle.html)，它调用 java.util.

```
try:
    # call checkstyle and print output
    print call(['java', '-jar', checkstyle, '-c', checkstyle_config, '-r', tempdir])
except subprocess.CalledProcessError, ex:
    print ex.output  # print checkstyle messages
    exit(1)
finally:
    # remove temporary directory
    shutil.rmtree(tempdir) 
```

[另一个示例直接调用`ant`](http://bbgen.net/blog/2011/06/junit-git-hooks/)，以执行 ant 脚本（该脚本又调用 Java JUnit 测试套件）

```
#!/bin/sh

# Run the test suite.
# It will exit with 0 if it everything compiled and tested fine.
ant test
if [ $? -eq 0 ]; then
  exit 0
else
  echo "Building your project or running the tests failed."
  echo "Aborting the commit. Run with --no-verify to ignore."
  exit 1
fi 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-19T19:32:23.810

从 Java 11 开始，您现在可以使用 java 命令运行未编译的主类文件。

```
$ java Hook.java 
```

如果您像这样剥离`.java`并在顶行添加一个shebang：

```
#!/your/path/to/bin/java --source 11
public class Hook {
    public static void main(String[] args) {
        System.out.println("No committing please.");
        System.exit(1);
    }
} 
```

然后您可以像使用任何其他脚本文件一样简单地执行它。

```
$ ./Hook 
```

如果您重命名文件`pre-commit`，然后将其移动到您的`.git/hooks`目录中，您现在就有了一个有效的 Java Git Hook。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T07:27:11.623

您可以使用任何可以被 shell 理解的语言编写钩子，并使用正确配置的解释器（bash、python、perl）等。

但是，为什么不在 java 中编写您的 java 代码格式化程序，并从 pre-commit 挂钩调用它。

# android - Sencha 示例 - “设备”在原生 android 包上显示白屏

> ID：13246292
> 
> 赞同：1
> 
> 时间：2012-11-06T07:24:21.830
> 
> 标签：android, sencha-touch-2

我尝试使用位于 "~\sencha-touch-2.0.1.1\examples\device" 位置的“设备”示例。现在，当我通过浏览器运行它时，它会运行，我可以看到“设备方向”和“地理定位”模块作为相机模块工作，只有在我们转换为原生构建时才会工作。

但是，当我将其转换为本机 android 包并在 Nexus 7 平板电脑上运行该 Apk 文件时，我在“日志”控制台上得到一个没有错误的白屏。

任何想法为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:25:32.777

需要更多信息您是否使用 index.html 作为您的入口点？？？在那里发出警报，看看会发生什么

# powershell - 导出到excel的脚本

> ID：13246301
> 
> 赞同：4
> 
> 时间：2012-11-06T07:24:35.873
> 
> 标签：powershell, scripting, powershell-2.0, powershell-remoting, powershell-3.0

我有以下脚本：--寻求将输出转换为 excel 格式的帮助

```
$servers = get-content “c:\list.txt”
foreach ($server in $servers)
{
$server
$command = “quser /server:” + $server
invoke-expression $command 
} 
```

当执行以下格式的输出时。

```
server1
 USERNAME              SESSIONNAME        ID  STATE   IDLE TIME  LOGON TIME
 Vdw231                ica-tcp#8           7  Active          .  11/5/2012 10:40 AM
 Vdw232                ica-tcp#60         16  Active      16:18  11/5/2012 2:22 PM
 Vdw233                ica-tcp#71          3  Active          .  11/6/2012 6:10 AM
 Vdw234                ica-tcp#72          1  Active          3  11/6/2012 6:59 AM
 Vdw235                ica-tcp#73          5  Active          .  11/6/2012 6:59 AM
 Vdw236                rdp-tcp#74          2  Active          .  11/6/2012 7:07 AM
server2
 USERNAME              SESSIONNAME        ID  STATE   IDLE TIME  LOGON TIME
 Vdw210                ica-tcp#44         14  Active      13:50  11/5/2012 9:03 AM
 Vdw211                ica-tcp#67          6  Active          .  11/6/2012 1:56 AM
 Vdw212                ica-tcp#70          1  Active         45  11/6/2012 6:34 AM
 Vdw213                ica-tcp#72          9  Active         25  11/6/2012 6:53 AM
 Vdw214  
server3
 USERNAME              SESSIONNAME        ID  STATE   IDLE TIME  LOGON TIME
 Vdw215                rdp-tcp#131         1  Active         19  11/5/2012 1:42 AM
 Vdw216                rdp-tcp#132         4  Active         17  11/5/2012 2:06 AM
 Vdw217                rdp-tcp#143         6  Active          .  11/6/2012 3:31 AM 
```

我的要求是我想将此输出转换为 excel 格式以提交给管理层。下面是我想...从上面的脚本中获得的 excel 格式...

![在此处输入图像描述](../Images/5ba9aa43800d78c48334b1238e96f2cb.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T14:08:21.877

我已经重写了这个，但我没有测试完整的脚本，也没有优化。如果您遇到任何问题，请随时与我联系。

```
 $statuses = @()
    $servers = get-content "c:\list.txt"
    $splitter = [regex]"\s+"

    foreach ($server in $servers)
    {
        $command = "quser /server:$server" 
        $lines = @((invoke-expression $command | Out-String) -split "`n")
        #remove header
        $lines = $lines[1..$lines.count]
        foreach ($line in $lines)
        {
            $attrs = @($splitter.Split($line.Trim(),6))
            if ( $attrs -eq 6 )
            {
                $status = New-Object PSCustomObject -Property @{
                "SERVER"=$server;
                "USERNAME"=$attrs[0];
                "SESSIONNAME"=$attrs[1];
                "ID"=$attrs[2];
                "STATE"=$attrs[3];
                "IDLE_TIME"=$attrs[4];
                "LOGON_TIME"=[datetime]$attrs[5]}

                $statuses += $status
            }
        }
    }

    #your filter here
    #$statuses = $statuses | where{ XXXXX }

    $statuses | Export-Csv G:/test.csv -NoTypeInformation 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-22T14:07:07.263

您需要将 PSObject 转换为与 excel 兼容的数组，然后在 excel 表中写入此数组

将此代码包含在您的 *.PS1 脚本中，并像这样使用：**get-process | 导出-Excel**

```
#=============================================================================
# Convert powershell Object to Array for Excel
#=============================================================================
function ConvertTo-MultiArray {
 <#
    .Notes
        NAME: ConvertTo-MultiArray
        AUTHOR: Tome Tanasovski
        Website: http://powertoe.wordpress.com
        Twitter: http://twitter.com/toenuff
        Version: 1.2
    .Synopsis
        Converts a collection of PowerShell objects into a multi-dimensional array

    .Description
        Converts a collection of PowerShell objects into a multi-dimensional array.  The first row of the array contains the property names.  Each additional row contains the values for each object.

        This cmdlet was created to act as an intermediary to importing PowerShell objects into a range of cells in Exchange.  By using a multi-dimensional array you can greatly speed up the process of adding data to Excel through the Excel COM objects.

    .Parameter InputObject
        Specifies the objects to export into the multi dimensional array.  Enter a variable that contains the objects or type a command or expression that gets the objects. You can also pipe objects to ConvertTo-MultiArray.

    .Inputs
        System.Management.Automation.PSObject
        You can pipe any .NET Framework object to ConvertTo-MultiArray

    .Outputs
        [ref]
        The cmdlet will return a reference to the multi-dimensional array.  To access the array itself you will need to use the Value property of the reference

    .Example
        $arrayref = get-process |Convertto-MultiArray

    .Example
        $dir = Get-ChildItem c:\
        $arrayref = Convertto-MultiArray -InputObject $dir

    .Example
        $range.value2 = (ConvertTo-MultiArray (get-process)).value

    .LINK
        http://powertoe.wordpress.com

#>
    param(
        [Parameter(Mandatory=$true, Position=1, ValueFromPipeline=$true)]
        [PSObject[]]$InputObject
    )
    BEGIN {
        $objects = @()
        [ref]$array = [ref]$null
    }
    Process {
        $objects += $InputObject
    }
    END {
        $properties = $objects[0].psobject.properties |%{$_.name}
        $array.Value = New-Object 'object[,]' ($objects.Count+1),$properties.count
        # i = row and j = column
        $j = 0
        $properties |%{
            $array.Value[0,$j] = $_.tostring()
            $j++
        }
        $i = 1
        $objects |% {
            $item = $_
            $j = 0
            $properties | % {
                if ($item.($_) -eq $null) {
                    $array.value[$i,$j] = ""
                }
                else {
                    $array.value[$i,$j] = $item.($_).tostring()
                }
                $j++
            }
            $i++
        }
        $array
    }
}
    #=============================================================================
    # Export pipe in Excel file
    #=============================================================================
    function Export-Excel {
        [cmdletBinding()]
        Param(
            [Parameter(Mandatory=$true, Position=1, ValueFromPipeline=$true)]
            [PSObject[]]$InputObject
        )
        begin{
            $header=$null
            $row=1
            $xl=New-Object -ComObject Excel.Application
            $wb=$xl.WorkBooks.add(1)
            $ws=$wb.WorkSheets.item(1)
            $xl.Visible=$false
            $xl.DisplayAlerts = $false
            $xl.ScreenUpdating = $False
            $objects = @()

            }
        process{
            $objects += $InputObject

        }
        end{
            $array4XL = ($objects | ConvertTo-MultiArray).value

            $starta = [int][char]'a' - 1
            if ($array4XL.GetLength(1) -gt 26) {
                $col = [char]([int][math]::Floor($array4XL.GetLength(1)/26) + $starta) + [char](($array4XL.GetLength(1)%26) + $Starta)
            } else {
                $col = [char]($array4XL.GetLength(1) + $starta)
            }
            $ws.Range("a1","$col$($array4XL.GetLength(0))").value2=$array4XL

            $wb.SaveAs("$([Environment]::GetFolderPath('desktop'))\Export-Excel ($(Get-Date -Format u)).xlsx")
            $xl.Quit()
            Remove-Variable xl
        }
    } 
```

你得到

![在此处输入图像描述](../Images/c5bb132e18f3daef40a6e03f75afeb56.png)

# android - 我有 google play 帐户，但不想共享帐户凭据，但想从我的应用程序的 google play 帐户发送统计信息

> ID：13246303
> 
> 赞同：2
> 
> 时间：2012-11-06T07:25:12.520
> 
> 标签：android

我有 google play 开发者帐户，并且为客户制作了一些应用程序。在这个帐户中，我有应用统计信息，例如下载量、哪些设备、哪些国家/地区。客户想要该应用程序的详细信息，但我不想将我的帐户凭据提供给客户。

我可以每周通过邮件发送这些信息吗？

有没有办法通过邮件发送所有统计数据和图表的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:29:32.667

请观看此视频。你会得到信息的。但我们没有任何 API。

[http://www.youtube.com/watch?v=dr5sGLY210Q](http://www.youtube.com/watch?v=dr5sGLY210Q)

[http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=139628](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=139628)

希望这会帮助你 。

# xml - 为 JSTL XML 属性提供动态值

> ID：13246304
> 
> 赞同：1
> 
> 时间：2012-11-06T07:24:56.870
> 
> 标签：xml, jsp, jstl

我想为 JSTL XML 中的选择属性提供动态值

我有以下代码

```
<x:forEach var="product" begin="${startRange}" end="${endRange}" select="$doc/queryProductResponse/product">
 <c:set var="nameElement" value="name"/>
 <tr class="tableRow">
          <td>
            <x:out select="$product/[nameElement]" />
          </td>
  </tr> 
```

在这里，我正在读取产品 xml，我想动态查找元素值。所以无论我想要获取的元素都存储在一个变量中。所以在上面的代码中，我将元素名称存储在一个名为 nameElement 的变量中，我是试图传递给 x:out 标签的 select 属性。但它不起作用。无论如何使用JSTL动态指定元素名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:28:30.760

我得到了答案。使用 XPath 名称函数，我们可以动态指定属性名称。

```
<c:set var="elementName" value="description"/> 
<x:out select="$product/*[name()=$elementName]" /> 
```

# c# - 将数据下载为 .xls 格式文件

> ID：13246306
> 
> 赞同：0
> 
> 时间：2012-11-06T07:25:10.027
> 
> 标签：c#, jquery, asp.net-mvc

我需要将列表数据下载为 .xls 文件。我的控制器代码如下。

```
 [HttpGet]
        public void AttendeeListToExport()
        {
            string campaign_id = string.Empty;
            campaign_id = ((MemberProfile)HttpContext.Current.Profile).HOWCampaignID;
            AutoCRM.Services.HOW.Attendee.Manage manage = new AutoCRM.Services.HOW.Attendee.Manage();
            DataSet lst = manage.AttendeeListToExport(campaign_id);
            if (lst != null)
            {
                if (lst.Tables[0].Rows.Count > 0)
                {
                    DataTable dt = lst.Tables[0];
                    // Export all the details to Excel
                    string filename = campaign_id + "_" + DateTime.Now.ToString("ddMMyyyy") + ".xls";
                    Export objExport = new Export();
                    objExport.ExportDetails(dt, Export.ExportFormat.Excel, filename);
                }
            }
        } 
```

js代码

```
$('#exportToExcel').on("click", function () {
        alert('hi');
        $.ajax({
            url: "/api/Attendee/AttendeeListToExport",
            async: true,
            cache: false,
            success: function (result) {
                alert(result);
            }
        });
    }); 
```

代码正确执行但文件未下载

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T07:50:29.737

您可以通过以下两种方式通过 javascript 下载文件：

**使用 HiddenIFrame ：**

```
var downloadURL = function downloadURL(url) {
    var iframe;
    var hiddenIFrameID = 'hiddenDownloader';
    iframe = document.getElementById(hiddenIFrameID);
    if (iframe === null) {
        iframe = document.createElement('iframe');  
        iframe.id = hiddenIFrameID;
        iframe.style.display = 'none';
        document.body.appendChild(iframe);
    }
    iframe.src = url;   
} 
```

**使用jQuery：**

```
$('a').click(function(e) {
    e.preventDefault();  //stop the browser from following
    window.location.href = 'uploads/file.doc';
});

<a href="no-script.html">Download now!</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T07:32:31.193

您不能使用 ajax 下载文件。您必须使用隐藏的 iframe 或直接链接到文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T07:55:38.800

如果您的控制器操作返回一个 FileResult，您可以从您的 javascript 函数中下载它，如下所示：

```
$('#exportToExcel').on("click", function () {
    window.open("/api/Attendee/AttendeeListToExport", "_blank");
}); 
```

# linux - 如何在 sunos 中获取附加到特定端口的进程 ID

> ID：13246309
> 
> 赞同：5
> 
> 时间：2012-11-06T07:25:49.167
> 
> 标签：linux, unix, operating-system, sunos

我正在尝试在 SunOS 上使用端口 7085 附加进程。我尝试了以下命令。

`netstat -ntlp | grep 7085`没有返回任何东西

`netstat -anop | grep 7085`也试过这个。此开关在 SunO 中无效

我得到以下输出。

`#netstat -anop`

`netstat: illegal option -- o`

`usage: netstat [-anv] [-f address_family]`

`netstat [-n] [-f address_family] [-P protocol] [-g | -p | -s [interval [count]]]`

`netstat -m [-v] [interval [count]]`

`netstat -i [-I interface] [-an] [-f address_family] [interval [count]]`

`netstat -r [-anv] [-f address_family|filter]`

`netstat -M [-ns] [-f address_family]`

`netstat -D [-I interface] [-f address_family]`

SunOS 的版本是 SunOS 5.10。我相信 netstat 是唯一可以做到这一点的命令。

netstat 的确切开关是什么，它将为我提供端口附加的进程 ID？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T09:37:55.460

```
pfiles /proc/* 2>/dev/null | nawk '
/^[0-9]*:/ { pid=$0 }
/port: 7085$/ { printf("%s %s\n",pid,$0);}' 
```

*   `pfiles /proc/*`正在检索所有进程文件描述符详细信息
*   `2>/dev/null`由于瞬态过程在此期间死亡而丢弃错误
*   每行以数字开头，后跟冒号报告进程 ID 和详细信息，它存储在 awk pid 变量中
*   当一行以字符串结尾`port: <portnumber>`（这里是 7085）时，会显示相应的 pid 变量。

注意：您需要所需的权限才能从您不拥有的进程中获取端口信息（root 拥有所有权限）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T16:29:06.743

看看`lsof` [http://linux.about.com/library/cmd/blcmdl8_lsof.htm](http://linux.about.com/library/cmd/blcmdl8_lsof.htm)命令。

该命令描述了哪些进程正在使用哪些文件描述符。请记住，端口 7085 上的任何内容都将具有自己的文件描述符，您可以使用它来追溯使用它的进程。

我会尝试类似的东西：

```
$ lsof -i :7085 
```

希望它可以提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T07:11:55.670

我从[这里](http://www.unix.ms/pcp/)得到了他的剧本。登录到 Solaris 系统。打开 vi 编辑器。进入插入模式。复制并粘贴此脚本。保存文件并命名为 PCP。授予执行权限。使用 -p 或 -P swithc 运行此脚本。它将提供带有 PID、PROCESS 名称和端口的输出。

**确保您需要在 ksh shell 中执行它。**

PCP 是一个脚本，它使管理员能够查看 Solaris 系统上正在使用的开放 TCP 端口。它将端口映射到 PID，反之亦然。它接受通配符，并且一目了然地显示所有打开的端口及其相应的 PID。很好的脚本提供了非常好的输出。就试一试吧。

例子： `#pcp -p PORT_NUMBER or #pcp -P PROCESS_ID`

```
#!/usr/bin/ksh
#
# # PCP (PID con Port)
# v1.10 08/10/2010 Sam Nelson sam @ unix.ms
#
# If you have a Solaris 8, 9 or 10 box and you can't
# install lsof, try this. It maps PIDS to ports and vice versa.
# It also shows you which peers are connected on which port.
# Wildcards are accepted for -p and -P options.
#
# Many thanks Daniel Trinkle trinkle @ cs.purdue.edu
# for the help, much appreciated.

#
i=0
while getopts :p:P:a opt
do
case "${opt}" in
p ) port="${OPTARG}";i=3;;
P ) pid="${OPTARG}";i=3;;
a ) all=all;i=2;;
esac
done
if [ $OPTIND != $i ]
then
echo >&2 "usage: $0 [-p PORT] [-P PID] [-a] (Wildcards OK) "
exit 1
fi
shift `expr $OPTIND - 1`
if [ "$port" ]
then
# Enter the port number, get the PID
#
port=${OPTARG}
echo "PID\tProcess Name and Port"
echo "_________________________________________________________"
for proc in `ptree -a | awk '/ptree/ {next} {print $1};'`
do
result=`pfiles $proc 2> /dev/null| egrep "port: $port$"`
if [ ! -z "$result" ]
then
program=`ps -fo comm= -p $proc`
echo "$proc\t$program\t$port\n$result"
echo "_________________________________________________________"
fi
done
elif [ "$pid" ]
then
# Enter the PID, get the port
#
pid=$OPTARG
# Print out the information
echo "PID\tProcess Name and Port"
echo "_________________________________________________________"
for proc in `ptree -a | awk '/ptree/ {next} $1 ~ /^'"$pid"'$/ {print $1};'`
do
result=`pfiles $proc 2> /dev/null| egrep port:`
if [ ! -z "$result" ]
then
program=`ps -fo comm= -p $proc`
echo "$proc\t$program\n$result"
echo "_________________________________________________________"
fi
done
elif [ $all ]
then
# Show all PIDs, Ports and Peers
#
echo "PID\tProcess Name and Port"
echo "_________________________________________________________"
for proc in `ptree -a | sort -n | awk '/ptree/ {next} {print $1};'`
do
out=`pfiles $proc 2>/dev/null| egrep "port:"`
if [ ! -z "$out" ]
then
name=`ps -fo comm= -p $proc`
echo "$proc\t$name\n$out"
echo "_________________________________________________________"
fi
done
fi
exit 0 
```

# c# - 格式化字符串文字

> ID：13246313
> 
> 赞同：4
> 
> 时间：2012-11-06T07:26:10.480
> 
> 标签：c#, .net, string

`first letter`我想用它所在的某种格式来格式化一个字符串值`Uppercase`。
例如：

```
string.Format("{0}", "myName"); //Output must be : "MyName" 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T07:31:17.427

请查看 MSDN 以了解您的情况，请参阅[TextInfo.ToTitleCase Method](http://msdn.microsoft.com/en-us/library/system.globalization.textinfo.totitlecase.aspx)。

```
string myString = "wAr aNd pEaCe";        
TextInfo myTI = new CultureInfo("en-US", false).TextInfo;
Console.WriteLine("\"{0}\" to titlecase: {1}", myString, myTI.ToTitleCase(myString)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T07:30:05.673

如果您只想将第一个字母大写，也许：

```
string s = string.Format("{0}", char.ToUpper(myname[0]) + myname.Substring(1)); 
```

否则，将每个单词大写可能使用`TextInfo.ToTitleCase`?

```
string s = string.Format("{0}",
    CultureInfo.CurrentCulture.TextInfo.ToTitleCase(myname)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T07:28:58.060

尝试

```
string test = "myname";
string formatted = System.Globalization.CultureInfo
                         .CurrentUICulture.TextInfo.ToTitleCase(test); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-06T07:36:02.113

```
CultureInfo cultureInfo   = Thread.CurrentThread.CurrentCulture;
TextInfo textInfo = cultureInfo.TextInfo;

Console.WriteLine("{0}", textInfo.ToTitleCase(myname)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-06T07:34:18.667

```
string input = "myname";
var charArray = input.ToArray();
charArray[0] = char.ToUpper(charArray[0]);

string result = new string(charArray); 
```

# mysql - SQLGrammarException：无法执行本机批量操作查询错误

> ID：13246314
> 
> 赞同：1
> 
> 时间：2012-11-06T07:26:11.723
> 
> 标签：mysql

我在一个函数中执行以下查询，但出现“SQLGrammarException：无法执行本机批量操作查询错误”异常。

任何人都可以告诉我解决方案吗？我不想使用 HQL 。

```
 query = session.createSQLQuery("CREATE TEMPORARY TABLE temp select `"+xAxis+"`, sum(value) as length from (select * from "+xAxis+"Table union select `"+xAxis+"`, sum(cycles) as value from "+Constants.TABLE_NAME+" where datestamp >= '"+startDate+"'  and datestamp < '"+endDate+"'  and `"+groupBy+"` = '"+groupByBar1+"' and `"+xAxis+"` = 'Uptime' group by `"+xAxis+"`) as t group by `"+xAxis+"` "+fixOrderString+" ;CREATE TEMPORARY TABLE test select `"+xAxis+"`, sum(value) as length from (select * from "+xAxis+"Table union select `"+xAxis+"`, sum(cycles) as value from "+Constants.TABLE_NAME+" where datestamp >= '"+startDate+"'  and datestamp < '"+endDate+"' and  `"+xAxis+"` = 'Uptime' group by `"+xAxis+"`) as t group by `"+xAxis+"` "+fixOrderString+" ;alter table test add column `"+groupByBar1+"` INTEGER ;");  
            query.executeUpdate();              
            query = session.createSQLQuery("update test,temp set `"+groupByBar1+"` = temp.length where test.`"+xAxis+"` = temp.`"+xAxis+"` ; drop table temp ; CREATE TEMPORARY TABLE temp select `"+xAxis+"`, sum(value) as length from (select * from "+xAxis+"Table union select `"+xAxis+"`, sum(cycles) as value from "+Constants.TABLE_NAME+" where datestamp >= '"+startDate+"'  and datestamp < '"+endDate+"' and  `"+groupBy+"` = '"+groupByBar2+"' and `"+xAxis+"` = 'Uptime' group by `"+xAxis+"`) as t group by `"+xAxis+"` "+fixOrderString+"  ;alter table test add column `"+groupByBar2+"` INTEGER ; ");
            query.executeUpdate();
            query = session.createSQLQuery("update test,temp set `"+groupByBar2+"` = temp.length where test.`"+xAxis+"` = temp.`"+xAxis+"` ; drop table temp ; CREATE TEMPORARY TABLE temp select `"+xAxis+"`, sum(value) as length from (select * from "+xAxis+"Table union select `"+xAxis+"`, sum(cycles) as value from "+Constants.TABLE_NAME+" where datestamp >= '"+startDate+"'  and datestamp < '"+endDate+"' and  `"+groupBy+"` = '"+groupByBar3+"' and `"+xAxis+"` = 'Uptime' group by `"+xAxis+"`) as t group by `"+xAxis+"` "+fixOrderString+"  ;alter table test add column `"+groupByBar3+"` INTEGER ;");
            query.executeUpdate();
            query = session.createSQLQuery("update test,temp set `"+groupByBar3+"` = temp.length where test.`"+xAxis+"` = temp.`"+xAxis+"` ; drop table temp ; CREATE TEMPORARY TABLE temp select `"+xAxis+"`, sum(value) as length from (select * from "+xAxis+"Table union select `"+xAxis+"`, sum(cycles) as value from "+Constants.TABLE_NAME+" where datestamp >= '"+startDate+"'  and datestamp < '"+endDate+"' and  `"+groupBy+"` = '"+groupByBar4+"' and `"+xAxis+"` = 'Uptime' group by `"+xAxis+"`) as t group by `"+xAxis+"` "+fixOrderString+"  ;alter table test add column `"+groupByBar4+"` INTEGER ;");
            query.executeUpdate();
            query = session.createSQLQuery("update test,temp set `"+groupByBar4+"` = temp.length where test.`"+xAxis+"` = temp.`"+xAxis+"` ; drop table temp ; CREATE TEMPORARY TABLE temp select `"+xAxis+"`, sum(value) as length from (select * from "+xAxis+"Table union select `"+xAxis+"`, sum(cycles) as value from "+Constants.TABLE_NAME+" where datestamp >= '"+startDate+"'  and datestamp < '"+endDate+"' and  `"+groupBy+"` = `"+Constants.OTHERS+"' and `"+xAxis+"` = 'Uptime' group by `"+xAxis+"`) as t group by `"+xAxis+"` "+fixOrderString+"  ;alter table test add column `"+Constants.OTHERS+"' INTEGER ;");
            query.executeUpdate();
            query = session.createSQLQuery("update test,temp set `"+Constants.OTHERS+"` = temp.length where test.`"+xAxis+"` = temp.`"+xAxis+"`;");
            query.executeUpdate();
            query = session.createSQLQuery("select * from test "+fixOrderString+" ;"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:53:45.947

您想捕获该异常并将其打印出来以查看根本原因。例如，您可以使用 Log4j 执行此操作：

```
log.error("Error", e); 
```

根本原因可能是由于某种原因，在第一个语句中创建的临时表实际上没有在以下语句中看到。

# silverlight - Silverlight mvvm中的文本框可见性/折叠

> ID：13246322
> 
> 赞同：1
> 
> 时间：2012-11-06T07:26:48.020
> 
> 标签：silverlight, mvvm

我有 mvvm 模式的 Silverlight5 我有一个疑问。在 xaml 中，我使用了一个文本块，并在其中绑定了一些 id。如果文本块内容值为 1 或 2 意味着另一个文本框是可见的，或者是折叠的..如何实现..

我的代码：

```
 <TextBlock Name="textBlock1" Text="{Binding id}" Loaded="textBlock1_Loaded" Visibility="Collapsed" />
<TextBox Text="{Binding name,Mode=TwoWay}"  x:Name="t1" Visibility="{Binding IsVisible,Converter={StaticResource visibilityconverter}}" /> 
```

在视图模型中，我为 id 创建了属性并引发了事件并将值绑定到文本块。

要将值转换为可见，我在一个名为“Converters”的单独文件夹中有一个 visibilityconverter 类

```
public class visibilityconverter:IValueConverter
    {

       public object Convert(object value, Type targetType,
                                       object parameter, CultureInfo culture)
        {
            if (id==1 && id==2)
            {
                return Visibility.Visible;
            }
            return Visibility.Collapsed;
        }

        public object ConvertBack(object value, Type targetType,
                                    object parameter, CultureInfo culture)
        {
            throw new NotImplementedException();
        }

    } 
```

在上面的 visibleconverter 类中，我如何从 viewmodel 获取 id 值并检查它。如果我从 viewmodel 获取值到 visibilityconverter 意味着我将继续进行。

告诉我你是否可以..！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T08:31:38.957

嗨，我找到了解决方案..

```
 In xaml give the following:

<TextBox Text="{Binding name,Mode=TwoWay}"  x:Name="t1" Visibility="{Binding id,Converter={StaticResource visibilityconverter}}" /> 
```

在 visibilityConverter 类中：

公共类可见性转换器：IValueConverter {

```
public object Convert(object value, Type targetType,
                               object parameter, CultureInfo culture)
{
    string v = value.ToString();
    if (v =="1" ||  v=="2")
    {
        return Visibility.Visible;
    }
    return Visibility.Collapsed;
}

public object ConvertBack(object value, Type targetType,
                            object parameter, CultureInfo culture)
{
    throw new NotImplementedException();
} 
```

}

问题解决了... ！

# haskell - 按错误类型参数化部分函数

> ID：13246323
> 
> 赞同：4
> 
> 时间：2012-11-06T07:26:49.610
> 
> 标签：haskell, error-handling, typeclass

我有一种情况，我使用的大多数操作都是部分函数。我希望函数的返回类型根据上下文而变化，这应该确定发生的异常处理类型以及报告的错误类型。我目前的解决方案是定义一个由错误类型参数化的函数，然后使用类型类将操作实现为开放函数。例如，下面是*head*的一个实现，假设在单元类型方面对*Maybe*有一个合适的*Error*和*MonadError实现：*

 *```
class (Error e, MonadError e m) => Head m e | m -> e where
  head :: [a] -> m a

errorHead :: (Error e, MonadError e m) => e -> [a] -> m a
errorHead e []       = throwError e
errorHead e (x : xs) = return x

instance Head Maybe () where
  head = errorHead ()

instance Head (Either String) String where
  head = errorHead "error: empty list" 
```

这种实现的优点是可以根据调用*head*的上下文抛出不同的错误。我的问题是这是否可以在不使用辅助操作和开放函数定义函数的情况下完成。如果不是，第二个问题是这个解决方案是否是最优的。特别是，有没有更好的方法来实现这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T22:38:07.250

[http://hackage.haskell.org/package/errors](http://hackage.haskell.org/package/errors)包有许多实用程序用于在`Maybe`、`Either`、`MaybeT`和`EitherT`.*

# php - WordPress 中 WooCommerce 插件中的产品子类别未显示在 UI 上？

> ID：13246324
> 
> 赞同：0
> 
> 时间：2012-11-06T07:26:52.200
> 
> 标签：php, plugins, woocommerce

产品类别已成功显示在网页上。但子类别不显示在页面上。我已经检查了管理面板目录部分中的所有条件。请向我建议解决方案。我在 php 中使用 WordPress 中的 WooCommerce 插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:19:32.843

我已经解决了这个问题。首先选择任何产品的子类别。然后显示类别或子类别。然后在外观中菜单选项的导航菜单中，将子类别添加到类别的导航菜单中。请确保子类别将被拖动到父子关系中。就像在菜单中一样：父 1 子 1 父 2

然后，将显示子类别。子类别应该在 woocommerce 插件的产品面板的类别面板中的父项中。

# mysql - WHERE 条件下的 SQL 查询

> ID：13246326
> 
> 赞同：1
> 
> 时间：2012-11-06T07:26:57.787
> 
> 标签：mysql, sql, select

如果我这样写查询是否很好：-（请参阅where条件中的查询）

```
SELECT distinct(id) "idea_id" 
FROM ideas 
WHERE deleted_by_user = 0 AND moderation_flag = 1 AND 
user_id in (select id 
            from users 
            where confirm like "yes") 
ORDER BY time_of_creation DESC 
```

让我知道这个查询是否有问题：thanx提前..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:31:02.460

```
SELECT distinct i.id "idea_id" 
FROM ideas i join users u
on i.user_id=u.id and u.confirm ='yes'
WHERE i.deleted_by_user = 0 
AND i.moderation_flag = 1 
ORDER BY i.time_of_creation DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T07:31:23.380

```
SELECT  distinct a.ID idea_id
FROM    ideas a
        INNER JOIN users b
            ON a.user_id = b.id
WHERE   a.deleted_by_user = 0 AND 
        a.moderation_flag = 1 
        b.confirm = 'YES'
ORDER BY time_of_creation DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T07:47:35.783

您可以通过两种方式编写此查询：

```
SELECT DISTINCT(i.id) "idea_id" 
FROM ideas i 
INNER JOIN users u ON i.user_id = u.id 
WHERE i.deleted_by_user = 0 AND i.moderation_flag = 1 AND u.confirm = 'yes' 
ORDER BY i.time_of_creation DESC; 
```

和

```
SELECT DISTINCT(i.id) "idea_id" 
FROM ideas i 
WHERE i.deleted_by_user = 0 AND i.moderation_flag = 1 AND 
EXISTS (SELECT * FROM users u WHERE i.user_id = u.id  AND u.confirm = 'yes')
ORDER BY i.time_of_creation DESC; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T08:21:25.737

回答您的问题 - 使用子查询没有问题。

另一方面，在以一种或另一种方式编写查询时，您（至少）需要考虑三件不同的事情：

1.  数据库运行我的查询的效率如何？（如果数据库很小，这可能根本不重要）
2.  这有多容易制定和编写？- 通常连接到
3.  对于阅读我的代码的其他人来说，这有多容易理解？（如果我查看一年前编写的代码，我自己可能算作“其他人”......）

如果您的数据库规模很大，效率很重要，那么选择如何制定查询的最佳方法通常是以不同的方式编写它并在数据库上进行测试。（但往往数据库中的查询优化器这么好，没关系）

# javascript - ASP.NET ScriptBundle 不适用于 .min.js？

> ID：13246327
> 
> 赞同：8
> 
> 时间：2012-11-06T07:26:58.223
> 
> 标签：javascript, asp.net-mvc, bundle

我可以使用下面的方法成功地包含来自 ASP.NET MVC 的带有 ScriptBundle 的 jquery 库

```
bundles.Add(new ScriptBundle("~/bundles/jquery").Include("~/Scripts/jquery-1.7.1.js")); 
```

但是，如果我更改为最小化库，我无法从浏览器中获取它

```
bundles.Add(new ScriptBundle("~/bundles/jquery").Include("~/Scripts/jquery-1.7.1.min.js")); 
```

代码有什么问题吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-06T09:02:22.850

除非文件中的`EnableOptimizations`is`true`或编译元素中的 debug 属性`Web.config`设置为 false，否则文件不会被捆绑或缩小。此外，`.min`不会使用文件的版本，将选择完整的调试版本。`EnableOptimizations` 覆盖`Web.config`文件中编译元素中的调试属性

[更多信息](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-08T23:16:07.787

尝试清除忽略列表。

```
public class BundleConfig
    {
        public static void RegisterBundles(BundleCollection bundles)
        {
            bundles.IgnoreList.Clear();

            // code cleared for clarity

        }
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-06T07:42:15.240

您的代码一切正常，这就是它的工作方式，您可以尝试更改`ignoreList`。

更多细节：[mvc4 bundler 不包括 .min 文件](https://stackoverflow.com/questions/11980458/mvc4-bundler-not-including-min-files)

# java - “需要 Java”虽然我当然有 Java

> ID：13246331
> 
> 赞同：0
> 
> 时间：2012-11-06T07:26:50.630
> 
> 标签：java, google-chrome

当我在 Chrome 中打开带有 Java 小程序的页面时（在 Ubuntu 12.04 上），我收到一条消息“需要 Java 才能在此页面中显示某些元素”。当我单击“安装插件”按钮时，它会将我带到 Java 下载页面：http: [//java.com/en/download/index.jsp](http://java.com/en/download/index.jsp)

但是，我确信 Java 已经安装在我的计算机上，因为我使用 Java 和 Eclipse 进行开发！就这个：

```
erelsgl@ubuntu:~$ which java
/usr/bin/java
erelsgl@ubuntu:~$ ls -la /usr/bin/java
lrwxrwxrwx 1 root root 22 Oct 10 18:39 /usr/bin/java -> /etc/alternatives/java
erelsgl@ubuntu:~$ ls -la /etc/alternatives/java
lrwxrwxrwx 1 root root 46 Oct 10 18:39 /etc/alternatives/java -> /usr/lib/jvm/java-6-openjdk-amd64/jre/bin/java 
```

为什么我需要重新下载 Java？我不能只安装插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T09:30:11.667

可能是 32 位 / 64 位之间的差异。当您安装了 64 位 Java 时，32 位浏览器仍然会报告没有安装 Java 插件。我认为反过来也是正确的，尽管我从未尝试过。

如果不是这种情况 - 浏览器仍然需要安装 Java 插件。在您的机器上拥有一个运行时是不够的。如果您先安装 Java，然后再安装浏览器，那么您可能已经遇到此问题。重新安装 Java 应该可以解决它，尽管我对它的 Linux 版本不太熟悉，不能肯定地说。

# asp.net - Asp.net GridView 控件

> ID：13246337
> 
> 赞同：0
> 
> 时间：2012-11-06T07:27:42.377
> 
> 标签：asp.net, gridview

我想像这样显示网格视图-（图 1）

```
Sr.no  Class  ----Division------   Total
              A      B       C
-----------------------------------
 1\.    1st    10     20       30     60
 2\.    2nd    20     10       40     70
-----------------------------------
Total  30     30       70     130 
```

显示的值是 A、B、C 部门的 total_no_students。

从表中我得到这样的数据-（图2）

```
Class      A     B     C
 1st      10     20    30
 2nd      20     10    40 
```

我创建了gridview ..但是如果我直接绑定数据，我得到的数据与图2相同

我应该如何自定义 gridview 以便将数据显示为图 1

除了gridview，如果我可以使用任何其他控件，请建议我谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:40:57.307

底行将需要一个 GridView 页脚。

[页脚示例](http://www.ezzylearning.com/tutorial.aspx?tid=1676759)

对于列总数，以下示例将解决您的问题（查看 Rahul 的答案）

[行总计示例](https://stackoverflow.com/questions/5098793/gridview-column-and-row-total)

# php - PHP邮件功能，密件抄送不起作用

> ID：13246338
> 
> 赞同：2
> 
> 时间：2012-11-06T07:27:44.913
> 
> 标签：php

我试图弄清楚为什么这个 PHP 邮件函数的密件抄送部分在下面的代码中不起作用：

```
function _send_user_email($to, $subject, $message) {
$headers   = array();
$headers[] = "MIME-Version: 1.0";
$headers[] = "Content-type: text/html; charset=iso-8859-1";
$headers[] = "From: Customer Service <support@mydomain.com>";
$headers[] = "Bcc: <support@mydomain.com>";
$headers[] = "X-Mailer: PHP/".phpversion();

mail($to, $subject, $message, implode("\r\n", $headers));
} 
```

我认为指定与发件人地址相同的密件抄送电子邮件地址应该没有任何问题，但我不确定。

当我测试这个功能时，收件人收到了消息，但密件抄送没有通过。知道为什么吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T07:36:24.293

说真的，不要使用这个`mail()`功能——你只是让自己进入一个受伤的世界。

如果你想做的不仅仅是最基本的电子邮件，我强烈建议你使用一个像样的邮件类，[比如 phpMailer](http://code.google.com/a/apache-extras.org/p/phpmailer/)。

它会让事情变得容易得多。无需再为自己构建标题或尝试让 mime 类型工作而烦恼。发送到多个地址、抄送和密件抄送地址变得简单，添加附件从几乎不可能变得`mail()`简单。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T08:57:01.733

在你的脚本中尝试这个你必须更改`""`并`''`删除`<>`然后它会在这里工作我编辑了你的脚本

```
function _send_user_email($to, $subject, $message) { 
$headers   = array();
$headers[] = "MIME-Version: 1.0";
$headers[] = "Content-type: text/html; charset=iso-8859-1";
$headers[] = "From: Customer Service <support@mydomain.com>";
$headers[] = 'Bcc: support@mydomain.com';
$headers[] = "X-Mailer: PHP/".phpversion();
mail($to, $subject, $message, implode("\r\n", $headers));
} 
```

**这是我的邮件功能示例**

```
$headers .= 'MIME-Version: 1.0' . "\r\n";  
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";  
$headers .= "From: mydemo.com<$your_email>\r\n" .  
$headers .= 'Bcc: mydemo@mydemo.com' . "\r\n";
$headers .= "X-Mailer: PHP/" . phpversion(); 
mail($to, $subject, $message, $headers); 
```

**现在如果你想在消息中使用 Html**

```
$headers .= 'MIME-Version: 1.0' . "\r\n";  
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";  
$headers .= "X-Mailer: PHP/" . phpversion(); 

For Exampe Message
$message .='<table><tr><td></td></tr></table>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-24T12:08:51.140

尝试像这个例子一样使用 Cci：

```
$headers = array(
    'From' => $from,
    'To' => $to,
    'Cci' => $bcc,
    'Subject' => $subject
); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-06T07:34:45.720

它工作正常，我测试了脚本发现垃圾箱中的电子邮件丢弃。

尝试添加电子邮件持有人的姓名：

```
"Bcc: Support <support@mydomain.com>"; 
```

# sql - 从 ALL_DB_LINKS 中删除

> ID：13246339
> 
> 赞同：0
> 
> 时间：2012-11-06T07:27:27.447
> 
> 标签：sql, oracle

我这里有问题。

我写了一个简单的（只是尝试）查询来创建数据库链接。

```
CREATE DATABASE LINK XXX.US.ORACLE.XXX; 
```

之后我想删除它。但它说“第 1 行出现错误：ORA-01031：权限不足”

我如何删除该数据，因为它是数据字典视图

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T07:32:36.773

我在这里有一个解决方案。

只需使用这个简单的查询

```
DROP DATABASE LINK database_link_name;
DROP PUBLIC DATABASE LINK database_link_name; 
```

对于 database_link_name 我们可以看到使用这个查询

```
SELECT DB_LINK, USERNAME, HOST FROM ALL_DB_LINKS; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T07:34:56.300

**您不得从字典表中删除行！**

正确的方法是删除数据库链接

[http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_8010.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_8010.htm)

# javascript - 使用 JavaScript 生成的 Html 代码无法正常工作

> ID：13246345
> 
> 赞同：0
> 
> 时间：2012-11-06T07:27:47.090
> 
> 标签：javascript, jquery, html

我正在尝试使用 JQuery 实现 IN Place Editing 功能。这是代码
`editinplace.js`

```
$(document).ready(function() {
    //When div.edit me is clicked, run this function
    $("div.editme").click(function() {
        //This if statement checks to see if there are 
        //and children of div.editme are input boxes. If so,
        //we don't want to do anything and allow the user
        //to continue typing
        if ($(this).children('input').length == 0) {

            //Create the HTML to insert into the div. Escape any " characters 
            var inputbox = "<input type='text' class='inputbox' value=\""+$(this).text()+"\">";

            //Insert the HTML into the div
            $(this).html(inputbox);

            //Immediately give the input box focus. The user
            //will be expecting to immediately type in the input box,
            //and we need to give them that ability
            $("input.inputbox").focus();

            //Once the input box loses focus, we need to replace the
            //input box with the current text inside of it.
            $("input.inputbox").blur(function() {
                var value = $(this).val();
                $(".editme").text(value);
            });
        }
    });

}); 
```

`ButtonClickFunction.js`

```
function ADDRADIOBUTTON(){

    //Creating the div Tag
    var answer_div = document.createElement("div");
    answer_div.setAttribute("class", "answer"); 
    answer_div.id = "answer_div_"+counter;

    // Creating the Radio button tag
    var answer_tag = document.createElement("input");
            answer_tag.setAttribute("type", "radio");
            answer_tag.id = "answer_tag_"+counter;
            answer_tag.setAttribute("name", answer_div.id);

                // Creating the Label Tag
    var radio_label_tag = document.createElement("label");
    radio_label_tag.setAttribute("for", answer_tag.id);

                //Creating the label        
    var In_Place_Edit_div = document.createElement("div");
        In_Place_Edit_div.setAttribute("class", "editme"); 
        var In_Place_Edit = document.createTextNode("label");
    In_Place_Edit_div.appendChild(In_Place_Edit);

         radio_label_tag.appendChild(In_Place_Edit_div);

            // Adding Radio button dot on the div and screen actually       
            answer_div.appendChild(answer_tag);

            //Adding the Label here on the right of radio button.
            answer_div.appendChild(radio_label_tag);

    // Adding Answer div to the main div        
    var element=document.getElementById("divid_"+counter);
    element.appendChild(answer_div);

} 
```

该`index.php`文件包括这两个 JS 文件以及 jquery-1.8.2.min.js

```
<script language="javascript" src="js/jquery-1.8.2.min.js"></script>
<script language="javascript" src="js/editinplace.js"></script>
<script type="text/javascript" src="js/ButtonClickFunction.js"></script> 
```

我要做的是创建一个带有标签的单选按钮，当我们单击它时可以编辑标签。现在这里的问题是当我使用代码时

```
<div class="editme">Please click me!!</div> 
```

直接在 index.html 页面中它可以正常工作，但是当我尝试动态生成与`ButtonClickFuction.js`文件中显示的相同的代码行时，它不起作用。可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T07:31:24.737

动态创建HTML元素后，必须再次绑定click函数。否则将不起作用。只需在动态创建< div class="edttime">请点击我之后调用click函数！否则点击将不起作用新创建的具有类 edttime 的 div。

```
 $("div.editme").click(function() {
    //This if statement checks to see if there are 
    //and children of div.editme are input boxes. If so,
    //we don't want to do anything and allow the user
    //to continue typing
    if ($(this).children('input').length == 0) {

        //Create the HTML to insert into the div. Escape any " characters 
        var inputbox = "<input type='text' class='inputbox' value=\""+$(this).text()+"\">";

        //Insert the HTML into the div
        $(this).html(inputbox);

        //Immediately give the input box focus. The user
        //will be expecting to immediately type in the input box,
        //and we need to give them that ability
        $("input.inputbox").focus();

        //Once the input box loses focus, we need to replace the
        //input box with the current text inside of it.
        $("input.inputbox").blur(function() {
            var value = $(this).val();
            $(".editme").text(value);
        });
    } 
```

# google-app-engine - Google App Engine 和 Multi-Player Unity 游戏架构上的应用程序大小

> ID：13246347
> 
> 赞同：1
> 
> 时间：2012-11-06T07:28:14.673
> 
> 标签：google-app-engine, unity3d

我正在开发一个多用户游戏的应用程序。我的应用程序将在浏览器上运行。所以这里我的统一文件通过 SFS 服务器与数据库通信。这是我的应用程序遵循的典型架构。我当前的应用程序大小约为 47MB。

现在我正在尝试将应用程序上传到 Google App Engine。我制作了一些较小（尺寸）的演示并尝试上传它们，它们运行良好。但刚刚意识到我当前的应用程序没有上传，因为它超过了 32MB 配额。有没有办法让我的文件仍然工作（除了减小文件大小）？

另外，上面提到的架构（Unity-SFS-MySQL）在 GAE 上能正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:39:30.377

您似乎达到了每个文件 32MB 的最大部署限制（总计 1GB）。请参阅[部署配额](https://developers.google.com/appengine/docs/quotas#Deployments)。

您的项目中是否有大于 32MB 的文件？你能把它分成更小的文件吗？如果没有，您可能需要[将文件上传到 blobstore](https://developers.google.com/appengine/docs/java/blobstore/overview#Uploading_a_Blob)并[从那里提供](https://developers.google.com/appengine/docs/java/blobstore/overview#Serving_a_Blob)。

# c# - 窗口窗体上的 Request.PhysicalApplicationPath 等效项

> ID：13246348
> 
> 赞同：0
> 
> 时间：2012-11-06T07:28:17.410
> 
> 标签：c#, asp.net, winforms

我需要将一个 asp.net 应用程序转换为窗口形式。但这里的问题是什么是**Request.PhysicalApplicationPath**

```
string repFilePath = Request.PhysicalApplicationPath + @"\CrystalReports\SampleFile\" + strRepTemp; 
```

和 FindControl

> `CheckBox chk = (CheckBox)dataItem.FindControl("chkItem");`

在窗口窗体上..

任何想法？

* * *

我如何在窗口窗体上使用 datagridview 转换它

aspx.cs 代码

```
 foreach (GridDataItem dataItem in RadGrid1.MasterTableView.Items)
        {
            string strDrawingID = dataItem.OwnerTableView.DataKeyValues[x]["DrawingID"].ToString();
            CheckBox chk = (CheckBox)dataItem.FindControl("chkItem"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:30:00.387

您可以使用`Path.GetDirectoryName(Application.ExecutablePath)`来获取应用程序的目录。您可以只替换`Request.PhysicalApplicationPath`为`Path.GetDirectoryName(Application.ExecutablePath)`，但我建议使用`Path.Combine`.

```
string repFilePath = Path.Combine(Path.Combine(Path.GetDirectoryName(Application.ExecutablePath),  @"CrystalReports\SampleFile"),strRepTemp); 
```

# html - 谷歌图表堆叠不起作用

> ID：13246352
> 
> 赞同：0
> 
> 时间：2012-11-06T07:28:29.570
> 
> 标签：html, google-visualization

这是我的 HTML

```
<html>
<head>
<script type="text/javascript" 
src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
google.load("visualization", "1", {packages:["corechart"]});
google.setOnLoadCallback(drawChart);
var jsonDataObj = {
"rows":[
{"c":[{"v":"2001"},{"v":"43"},{"v":"43"}]},
{"c":[{"v":"2002"},{"v":"43"},{"v":"43"}]},
{"c":[{"v":"2003"},{"v":"43"},{"v":"43"}]},
{"c":[{"v":"2004"},{"v":"43"},{"v":"43"}]}
],
"cols":[
{"id":"","label":"Year","type":"string"},
{"id":"","label":"profits","type":"number"}, 
{"id":"","label":"expenses","type":"number"}
]
};
function drawChart() {
var jsonData = jsonDataObj;
var data = new google.visualization.DataTable(jsonData);
var options = {
width: 800, height: 480,
//isStacked:true,
title: 'Company Performance'
};
var chart = new google.visualization.BarChart(document.getElementById('chart_div'));
chart.draw(data, options);
}
</script>
</head>
<body>
<div id="chart_div"></div>
</body>
</html> 
```

如果我启用 isStacked 选项，则显示的图片完全错误 ![在此处输入图像描述](../Images/82ecfb4b7f104fa3022d361712b0d6f6.png)

如果我禁用它，图表很好 ![在此处输入图像描述](../Images/640504c9fbcda604e87623b6b5b3cdca.png)

让我知道如何让堆叠工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:25:19.113

经过一些测试，我找到了错误的原因：您在数据中定义了一个字符串而不是数字，固定页面如下：

```
<html>
<head>
<script type="text/javascript" 
src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
google.load("visualization", "1", {packages:["corechart"]});
google.setOnLoadCallback(drawChart);
var jsonDataObj = {
"rows":[
{"c":[{"v":"2001"},{"v":65},{"v":40}]},
{"c":[{"v":"2002"},{"v":67},{"v":43}]},
{"c":[{"v":"2003"},{"v":80},{"v":35}]},
{"c":[{"v":"2004"},{"v":97},{"v":47}]}
],
"cols":[
{"id":"","label":"Year","type":"string"},
{"id":"","label":"profits","type":"number"}, 
{"id":"","label":"expenses","type":"number"}
]
};

function drawChart() {
var jsonData = jsonDataObj;
var data = new google.visualization.DataTable(jsonData);
var options = {
width: 800,
height: 480,
isStacked: true,
title: 'Company Performance'
};
var chart = new google.visualization.BarChart(document.getElementById('chart_div'));
chart.draw(data, options);
}
</script>
</head>
<body>
<div id="chart_div"></div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-06T22:41:50.343

请看一下这个例子[https://jsfiddle.net/912jggdw/](https://jsfiddle.net/912jggdw/)

```
google.load('visualization', '1', {packages: ['corechart', 'bar']});
google.setOnLoadCallback(drawStacked);

function drawStacked() {
        var data = new google.visualization.arrayToDataTable([
          ["Category",    "A", "Total"    ],
          ["Planned",  500,        500       ],
          ["Achieved",  400,       600       ]
        ]);

      var options = {
        width: 300,
        height: 400,
        legend: {position: "none"},
        bar: { groupWidth: '75%' },
        isStacked: true,
      };

      var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
      chart.draw(data, options);
    }
```

```
 <script type="text/javascript" src="https://www.google.com/jsapi"></script>
  <div id="chart_div"></div>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-07T00:02:27.450

另一种选择是使用 Google Image Charts。

这很好，因为

1) 它适用于所有浏览器，包括旧浏览器，因为它是一张图片。

2）你可以用它做子弹图，当没有选项在新的谷歌图表中做“子弹图”时，即使是样式为“条形图”的普通差异图在最新版本的 Firefox 中也不起作用（我试过第 39 版）。

这是一个很好的[例子](http://chart.apis.google.com/chart?chs=110x300&cht=bvs&chco=8DB2E3&chd=t:45&chbh=30&chm=r,ff0000,0,0.495,0.5,1%7Cr,D4D1D1,0,0,0.5%7Cr,F3F3F3,0,0.5,1&chxt=x,y&chxl=0:%7CCriteria%201%7C1:%7C0%7C100%7C200&chxs=0,000000,15)：

[![在此处输入图像描述](../Images/00e1a27e2cebf7f8f0c995666b7ad81f.png)](https://i.stack.imgur.com/HxgqU.png)

在此处阅读有关 Google 图片图表的更多信息：

[https://developers.google.com/chart/image/?hl=en](https://developers.google.com/chart/image/?hl=en)

# java - 读取文本文件并添加到列表时出现内存不足错误

> ID：13246353
> 
> 赞同：0
> 
> 时间：2012-11-06T07:28:35.473
> 
> 标签：java, arrays, file

我正在尝试读取文本文件并将每一行添加到列表中。该列表在准备好的语句中用于将记录插入到数据库中。问题是当有 1000000 条记录时，执行变得太慢，并且有时会出现内存不足错误。

我的代码

```
while ((sRec = in.readLine()) != null) {
        myCollection.add(reversePad(sRec, hmSizeLookup, colLength, tableName));
        a = Utility.getPositions(sRec, hmSizeLookup, colLength);
        i = i + 1;
}
for (int j = 0; j < a.length; j++) {
    Field f = (Field) hmSizeLookup.get(String.valueOf(j));
    sAllFields += f.getColumnName();
    if (j < a.length) {
        sValues += "?";
    }
    if (j < a.length - 1) {
       sValues += ",";
       sAllFields += ",";
    }
}
sQ = "insert  into " + tableName + "(" + sAllFields + ") values(" + sValues + ")";
ds1.executePreparedStatement(sQ, myCollection); 
```

如何从文本文件一次只读取 1000 行并需要执行插入操作？这应该一直持续到文本文件的结尾。

任何建议表示赞赏，

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:36:12.503

您需要在文件循环中插入。

将插入代码剪切到一个函数中，每 1000 行调用一次，然后调用 myCollection.clear()

在循环之后，您需要为最后一次插入后的任何数据再次调用它。

所以像：

```
int line = 0;
while ((sRec = in.readLine()) != null) {
        myCollection.add(reversePad(sRec, hmSizeLookup, colLength, tableName));
        a = Utility.getPositions(sRec, hmSizeLookup, colLength);
        i = i + 1;
    if (++line > 1000) {
        doTheInsert(myCollection);
        myCollection.clear();
        line = 0;
    }
}
doTheInsert(myCollection); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T07:37:21.643

这是一百万种可能的实现之一：

```
String sRec = null;
READ_LINES:
do {
    for (int i = 0; (sRec = in.readLine()) != null && i < 1000;  i++) {
        myCollection.add(reversePad(sRec, hmSizeLookup, colLength, tableName));
        a = Utility.getPositions(sRec, hmSizeLookup, colLength);
    }
} while (sRec != null); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T07:37:50.873

仅当我要上班时的伪代码：

```
 int maxLines=1000;
    int currentLine=0;

    while ((sRec = in.readLine()) != null) {

      Add to collection
      Increment currentLine
      if currentLine % maxLnes == 0 {
         UpdateDB(collection)
         clear collection
         currentLine=0
      }

    }

updateDB(collection)  // catch any stragglers 
```

很抱歉缺少工作代码，但这个想法是合理的，看起来你知道你的 java 方式。

# linux - linux内核模块防止文件系统卸载

> ID：13246362
> 
> 赞同：0
> 
> 时间：2012-11-06T07:28:59.027
> 
> 标签：linux, filesystems

我不希望用户卸载我的内核模块正在监视的文件系统。我怎么做。我有指向可用的 super_block 和 block_device 的指针。

我能做的唯一方法是在该分区中打开一个虚拟文件并保持打开状态。它很丑。

# jquery - 在视频上应用曲线

> ID：13246367
> 
> 赞同：1
> 
> 时间：2012-11-06T07:29:36.690
> 
> 标签：jquery, video, jquery-plugins, html5-video, video.js

我正在使用 videojs 3.2.0 插件播放视频。我已经在视频周围设置了曲线边框，所以视频从边界结束，看起来不太好。我想根据边框弯曲视频及其控制栏，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:54:46.600

如果要对整个视频应用半径，则应将属性添加到 video.js 元素本身，

[这是 jsfiddle 的工作示例](http://jsfiddle.net/uAWzQ/)

这是添加的CSS：

```
#example_video_1,.vjs-controls,.video-js,.vjs-poster{
    border-radius:5px;
}
.vjs-controls{
    border-bottom-left-radius:5px;
    border-bottom-right-radius:5px;    
} 
```

# facebook - FBSession 在返回前台时经常无法在 FBSessionStateCreatedTokenLoaded

> ID：13246368
> 
> 赞同：1
> 
> 时间：2012-11-06T07:29:22.673
> 
> 标签：facebook, facebook-ios-sdk

我正在使用 Facebook iOS SDK3.0（客户端尚未准备好迁移到 3.1），并且当应用程序在较长时间后返回前台时（接近天）; 如果我只是将应用程序发送到后台并在一两分钟后返回前台，我没有问题

我的代码如下，如果我应该提供更多信息，请告诉我；我在设备（4、4S、5）和 iOS 版本（4.3、5.0、5.1、6.0）上都有这个问题

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
  ...   
  if (![self openSessionWithAllowLoginUI:NO]) {
    // still allow loading the public feed even though user is not logged in (the view controller will have a login button overlay)
    [[self pictureFeedVC] loadFeed];
  }
  ...
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
  DEBUGLog(@"didBecomeActive");
  DEBUGLog(@"FBSession is Open? %@",FBSession.activeSession.isOpen ? @"YES" : @"NO");

  if (FBSession.activeSession.state == FBSessionStateCreatedOpening) {
    //Dismiss login view controller
    if ([self.tabBarController modalViewController]) {
        [self.tabBarController dismissModalViewControllerAnimated:NO];
    }
    [FBSession.activeSession close];
  }
}

- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
  BOOL result = NO;

  [FBSettings setLoggingBehavior:[NSSet setWithObjects:FBLoggingBehaviorSessionStateTransitions,nil]];
  NSArray *permissions = [NSArray arrayWithObjects:@"publish_actions", @"email", nil];

  FBSession *session = [[FBSession alloc] initWithAppID:nil permissions:permissions urlSchemeSuffix:FB_URL_SCHEME_SUFFIX tokenCacheStrategy:nil];

  if (allowLoginUI || (session.state == FBSessionStateCreatedTokenLoaded)) {
    [FBSession setActiveSession:session];
    [session openWithCompletionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
        [self sessionStateChanged:session state:state error:error];
    }];
    result = session.isOpen;
  }
  return result;
}

- (void)sessionStateChanged:(FBSession *)session state:(FBSessionState)state error:(NSError *)error
{
  DEBUGLog(@"changed FB state");
  switch (state) {
    case FBSessionStateOpen:
      if (!error) {
        DEBUGLog(@"FBSessionStateOpen");
        [[self pictureFeedVC] loadFeed];
      }
    break;
    case FBSessionStateClosed:
      DEBUGLog(@"FBSessionStateClosed");
    case FBSessionStateClosedLoginFailed:
      DEBUGLog(@"FBSessionStateClosedLoginFailed");
      [session closeAndClearTokenInformation];
      [self.tabBarController showFBLoginView];
      break;
    default:
      break;
    }
} 
```

我遇到问题，在后台长时间运行后，`DEBUGLog(@"FBSession is Open? %@",FBSession.activeSession.isOpen ? @"YES" : @"NO");`in`applicationDidBecomeActive:`将打印一个`NO`

更多信息：这个应用程序完全依赖 Facebook 登录，它使用 facebook 用户 ID 来识别用户，因此对于很多操作，我需要传递 Facebook 访问令牌，以便服务器可以获取 facebook 用户 ID，即使很多次操作不需要对 facebook 的 api 调用（当然除了从访问令牌中获取用户 ID）。我的另一个问题是我是否需要主动做一些事情来刷新令牌或做一些事情来保持 FBSession 处于打开状态（如果是这样，如何？），这是否是`FBSession.activeSession`我返回前台时可能不处于打开状态的原因？

提前非常感谢！

# objective-c - UIScrollView contentsize 属性

> ID：13246373
> 
> 赞同：1
> 
> 时间：2012-11-06T07:29:56.250
> 
> 标签：objective-c, uiscrollview

我有一个 UIScrollView - 590 x 650 我在滚动视图中有 2 个 UIImage，尺寸为：620 x 450 所以，我设置了 contentsize 和属性：

```
 self.scroller.minimumZoomScale=0.5;
    self.scroller.maximumZoomScale=6.0;
    self.scroller.contentSize=CGSizeMake(1350, 950);// EDIT : 1350 because 620 + 620 
    //950 because 450 + 450 and 50 extra

    self.scroller.contentInset=UIEdgeInsetsMake(64.0,0.0,44.0,0.0);
    self.scroller.scrollIndicatorInsets=UIEdgeInsetsMake(64.0,0.0,44.0,0.0);

    self.scroller.delegate=self; 
```

但是当我尝试运行和滚动时，仅显示第二张图像的一半/部分并且滚动弹回，即使我一直拉动滚动条以显示第二张图像的结尾。

我在这里做错了什么？
我的内容大小设置/假设是否正确？

如果这个问题已经回答了，请指点我，因为我找不到正确的解释。

编辑：*.h 文件

```
@interface ViewController : UIViewController<UIScrollViewDelegate>
{
    UIScrollView *scroller;
    UIImageView *varImage1;
    UILabel *lblStyle;
    BOOL isAlpha;
    UITextView *textView;
}

@property (retain, nonatomic) IBOutlet UIScrollView *scroller;
@property (retain, nonatomic) IBOutlet UIImageView *varImage1;
@property (retain, nonatomic) IBOutlet UILabel *lblStyle;

- (IBAction)notesClick:(id)sender;
@property (retain, nonatomic) IBOutlet UIButton *notesClick;

@property (retain, nonatomic) IBOutlet UITextView *textView;

@end 
```

*.m 文件

```
// calculate minimum scale to perfectly fit image width, and begin at that scale
    float minimumScale = [scroller frame].size.width  / [varImage1 frame].size.width;
    [scroller setMinimumZoomScale:minimumScale];
    [scroller setZoomScale:minimumScale];
    scroller.contentSize= CGSizeMake(960,1170);

    scroller.delegate=self; 
```

图像尺寸为 1170x960 UIImage 视图尺寸为：1170x960（宽 x 高）图片集形式 IB 和属性设置为缩放以适应。

滚动视图大小为 590 x 650（宽 x 高）

对象层次结构：

![在此处输入图像描述](../Images/a9dc8ee11d81479c6646633bfc2a7127.png)

加载时的初始视图：*注意：即使图像部分显示，我也无法向右滚动并查看图像的其余部分。 ![在此处输入图像描述](../Images/2eaff9c9cde0a11379b8b64513410a0f.png)

缩小图像后，即使图像仅部分显示，我也可以滚动 ![在此处输入图像描述](../Images/5fa852f8e66626f9d595c4b1f40da02c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:02:54.587

您能向我们展示您在哪里创建和添加图像的代码吗？

以下是一种安全且通用的方法：

```
CGSize contentSize = CGSizeZero;
for(UIView *view in self.scroller.subviews) {
  contentSize.height = MAX(contentSize.height, view.frame.origin.y + view.frame.size.height);
  contentSize.width  = MAX(contentSize.width, view.frame.origin.x + view.frame.size.width);
}
CGFloat border = 50;
contentSize.height += border;
contentSize.width  += border;
self.scroller.contentSize = contentSize; 
```

它只会在 scrollView 中找到任何视图的最低和最右位置并将其用作 contentSize。

# linux - Git，有权限问题推送

> ID：13246377
> 
> 赞同：2
> 
> 时间：2012-11-06T07:30:26.947
> 
> 标签：linux, git

所以我对 Git 和一般开发来说是全新的。我是几台不同机器上的 Linux 和 Mac 用户，并且有几个使用 AWS 的云服务器，我在所有这些机器上都从事小型 Python 项目。

我将首先尝试解释我想要什么，希望我已经接近拥有适用于我的用例的最佳解决方案。我希望能够在我拥有的任何设备上编写代码，包括家里的 Ubuntu 桌面、工作 Macbook、云服务器、工作中的 Ubuntu 桌面和个人 Macbook。显然我正在使用不同的主机名和用户名，我是唯一一个在我的代码上工作的人。

我浏览了 git 指南，它正在工作，有点。我试图在我的云服务器上设置我的存储库，我也将更改代码。我一直在尝试从我的 Macbook 提交和推送，但一整天都收到一连串权限错误，我不得不返回 repo 并 chown -R 作为我的 ssh 轮用户，因为那里的每个对象都在获取覆盖为根。

以下是我在尝试从我的 macbook 推送时看到的一些示例错误消息：

一个提交：

```
macbook:dev macbookuser$ git commit
# On branch master
# Your branch is ahead of 'origin/master' by 6 commits.
#
nothing to commit, working directory clean 
```

然后是推：

```
macbook:dev macbookuser$ git push
user1@myserver-aka-repo.com's password: 
Counting objects: 18, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (12/12), done.
Writing objects: 100% (14/14), 1.62 KiB, done.
Total 14 (delta 7), reused 0 (delta 0)
error: insufficient permission for adding an object to repository database ./objects

fatal: failed to write object
error: unpack failed: unpack-objects abnormal exit
To user1@myserver-aka-repo.com:/home/myserver-aka-repo/dev/.git
! [remote rejected] master -> master (n/a (unpacker error))
error: failed to push some refs to 'user1@myserver-aka-repo.com:/home/myserver-aka-repo/dev/.git' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:49:08.990

如果 chown 并且`umask 0002`没有在服务器上修复此问题，请确保您推送到的 repo 已与正确的模式共享。

```
 git config core.sharedRepository 
```

有关此选项的更多信息，请参阅“ [Git 推送错误：将对象添加到存储库数据库的权限不足](https://stackoverflow.com/a/6448326/6309)”。

我通常设置`core.sharedRepository`为`umask`，并将我的设置`umask`为`0002`。

# javascript - 通过浏览器检测用户不活动 - 纯粹通过 javascript

> ID：13246378
> 
> 赞同：27
> 
> 时间：2012-11-06T07:30:36.973
> 
> 标签：javascript, dom-events, session-timeout

在构建监视器时，它将监视用户在浏览器上的任何活动，例如单击按钮或在文本框上键入（而不是将鼠标悬停在文档上）。因此，如果用户长时间没有活动，会话将超时。

我们需要在没有 jQuery 或类似的东西的情况下做到这一点。我可能会使用ajax。另一端的 Java servlet 更可取。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-11-06T07:43:31.120

[这是跟踪空闲时间的纯 JavaScript 方法](https://jsfiddle.net/mManishTrivedi/cbq1hmtg/)，当它达到一定限制时执行一些操作，您可以相应地修改并使用

```
var IDLE_TIMEOUT = 60; //seconds
var _idleSecondsCounter = 0;
document.onclick = function() {
    _idleSecondsCounter = 0;
};
document.onmousemove = function() {
    _idleSecondsCounter = 0;
};
document.onkeypress = function() {
    _idleSecondsCounter = 0;
};
window.setInterval(CheckIdleTime, 1000);

function CheckIdleTime() {
    _idleSecondsCounter++;
    var oPanel = document.getElementById("SecondsUntilExpire");
    if (oPanel)
        oPanel.innerHTML = (IDLE_TIMEOUT - _idleSecondsCounter) + "";
    if (_idleSecondsCounter >= IDLE_TIMEOUT) {
        alert("Time expired!");
        document.location.href = "logout.html";
    }
} 
```

此代码将在显示警报和重定向之前等待 60 秒，并且任何操作都将“重置”计数 - 鼠标单击、鼠标移动或按键。

它应该尽可能跨浏览器，并且直截了当。如果您将 ID 为 SecondsUntilExpire 的元素添加到页面，它还支持显示剩余时间。

参考：[如何知道浏览器空闲时间？](https://stackoverflow.com/questions/9564602/how-to-know-browser-idle-time/9564811#9564811)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T07:53:01.277

您建议的方法的问题是会话将超时，即使用户正在移动鼠标或输入输入。因此，如果您将会话超时设置为 20 分钟，并且用户持续输入 21 分钟，则会话仍将超时，即使他们一直处于“活动状态”。唯一可以防止会话超时的是对服务器的新请求。

**解决方案1：让服务器控制会话超时**

除非您在后台发出 Ajax 请求，否则会不断更新会话，您可以在页面加载时设置 JavaScript 超时，并以这种方式提醒用户。除非您向服务器发出其他请求，否则当用户在您的页面上时，没有必要让它变得困难：

```
setTimeout(function () {
   alert("You've timed out baby!");
}, 1200000); // 20 minutes in millisec (modify to your session timeout) 
```

如果用户访问另一个页面或重新加载该页面，则会话会被更新并且 JavaScript 计时器会被重置。如果用户不这样做，会话将在用户收到警报的同时超时。

**解决方案2：让客户端控制会话超时**

如果您希望 JavaScript 完全控制会话的持续时间，以便在用户键入、移动鼠标​​或其他任何内容时更新会话，您将不得不在后台向服务器发出 Ajax 请求，所以会话更新。（这可能是一个空的虚拟请求，只是命中服务器的东西）

然后，您必须跟踪您认为“用户活动”的所有操作（AnhSirk 在他的回答中提出了一种方法）并在发生此类事件时重置超时计时器。如果用户长时间处于非活动状态，则您必须向服务器上的页面发出 Ajax 请求，这会使会话无效，然后您可以提醒用户会话已超时。

# javascript - 使用 JavaScript 显示隐藏的 div

> ID：13246381
> 
> 赞同：0
> 
> 时间：2012-11-06T07:31:07.910
> 
> 标签：javascript, css, class, html

我有一*类*div（其中有 5 个）。在我的 CSS 中，我将该类设置为`display:none;`. 每个 div 也有一个唯一的*ID*。我想用 JS 让这些 div 单独出现。

像这样的东西：

```
<style>
.hidden{
     display:none; }
</style>
<script>
function displayDiv1(){
    document.getElementById('div1').style.display = "block"; }
function displayDiv2(){
    document.getElementById('div2').style.display = "block"; }
</script>
<div class="hidden" id="div1">
<p>some stuff here</p>
</div>
<div class="hidden" id="div2">
<p>some more stuff here</p>
</div> 
```

这是一个 jfiddle（不工作）[http://jsfiddle.net/DAzZT/](http://jsfiddle.net/DAzZT/)

是否可以做这样的事情，或者我必须单独声明每个`div` `display:none;`使用`id`而不是`class`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:32:34.107

您只需将您的函数放在正确的范围内，就像您在问题中所做的那样，然后使用`document.getElementById`. 将左侧的 onLoad 选项更改为 no wrap(body)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T07:34:13.103

试试这个**[小提琴](http://jsfiddle.net/pintu31/DAzZT/1/)**

您应该使用文档对象调用它

```
function display1(){
document.getElementById('div1').style.display = "block";
}
function display2(){
 document.getElementById('div2').style.display = "block"; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T07:34:03.683

您可以为此使用 jQuery。就像你说的那样，你在你的css中设置了 display: none ，然后使用 jQuery 你有 $('#element').show(); - 显示或 $('#element').hide() 隐藏。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T07:37:35.977

问题只是`getElementById`，你需要写`document.getElementById`。并且只做一个功能来做同样的工作：

```
function showDiv(id) {
    document.getElementById(id).style.display = "block";
    return false;
} 
```

称它为：

```
<a href="#" onclick="return showDiv('your_div_id');">Show Div</a> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-06T07:48:19.383

首先，您的代码中有一个错误，它`document.getElementById`不是`getElementById`.

你也在你的小提琴中犯了一个错误。您选择将代码包装到一个`onLoad`函数中。这会导致您的实际 JavaScript 看起来像这样。

```
window.addEvent('load', function() {
    function display1(){
        document.getElementById('div1').style.display = "block";
    }
    function display2(){
        document.getElementById('div2').style.display = "block"; 
    }
}); 
```

您的函数定义在函数**内部**，它们在全局范围内不可访问。因此，如果您现在单击其中一个链接，则会生成一个`Uncaught ReferenceError`.

要解决此问题，您可以设置不将代码包装到函数中（在左侧选择框架下的第一个下拉选择`no wrap (head)`或`no wrap (body)`.

或者更好的尝试是将函数添加到全局`window`对象，保持`onLoad`包装并修改您的代码。

```
window.display1 = function(){
    document.getElementById('div1').style.display = "block";
}
window.display2 = funnction(){
    document.getElementById('div2').style.display = "block"; 
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-06T07:48:36.027

尝试`document.getElementById`而不是`getElementById`在 javascript 函数中

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-06T07:35:31.823

这是一个简单的解决方案：

```
<script>
    function display(num){
       document.getElementById('div'+num).style.display = "block";
       return false;
    }
</script>
<a href="#" onclick="return display(1);">Open Div 1</a><br />
<a href="#" onclick="return display(2);">Open Div 2</a> 
```

[演示](http://jsfiddle.net/EaEGP/)（我删除了你`position:absolute`让两个 div 都可见）

# android - 遇到 Facebook SDK 错误

> ID：13246382
> 
> 赞同：1
> 
> 时间：2012-11-06T07:30:51.337
> 
> 标签：android, facebook

我正在创建在 Facebook 上具有共享按钮的应用程序，但出现错误：

**此页面包含以下错误：**

**第 2 行第 182 列的错误：Entityref: Expecting ';'**

**下面是第一个错误之前的页面渲染。**

当我在模拟器上运行应用程序时，我没有收到此错误。当我在设备上运行应用程序时，我只会收到这种错误。

此错误的可能原因是什么？

非常感谢您的帮助。谢谢！

下面的代码是 Facebook SDK 的示例代码：

```
public class FacebookShare extends Activity
{
    private String                      APP_ID, APP_SECRET, Name, Link, Description, Picture;
    private int                         fbTYPE;
    private Facebook                    facebook;
    private AsyncFacebookRunner mAsyncRunner;
    private Activity                    ctx;
    private Bitmap                      bitmap;

    SharedPreferences                   mPrefs;

    public FacebookShare(Activity ctx)
    {
        APP_ID = "...obfuscated...";

        facebook = new Facebook(APP_ID);
        mAsyncRunner = new AsyncFacebookRunner(facebook);
        this.ctx = ctx;
    }

    public void shareFB(int TypeOfSharing)
    {
        APP_ID = "...obfuscated...";
        facebook = new Facebook(APP_ID);
        mAsyncRunner = new AsyncFacebookRunner(facebook);

        this.fbTYPE = TypeOfSharing;
        loginToFacebook();
    }

    public void loginToFacebook()
    {
        Log.v("debugging", "Entered Login to facebook");
        String access_token = mPrefs.getString("access_token", "");
        long expires = mPrefs.getLong("access_expires", 0);

        if (!access_token.equals(""))
        {
            facebook.setAccessToken(access_token);

            Log.v("Access Token", facebook.getAccessToken());
        }

        if (expires != 0)
        {
            facebook.setAccessExpires(expires);
        }

        if (!facebook.isSessionValid())
        {
            Log.v("debugging", "Session is Invalid");

            facebook.authorize(ctx, new String[]{
            "email","publish_stream"
            }, facebook.FORCE_DIALOG_AUTH, new DialogListener()
            {

                public void onCancel()
                {
                    // Function to handle cancel event
                }

                public void onComplete(Bundle values)
                {
                    // Function to handle complete event
                    // Edit Preferences and update facebook acess_token

                    SharedPreferences.Editor editor = mPrefs.edit();
                    editor.putString("access_token", facebook.getAccessToken());
                    editor.putLong("access_expires", facebook.getAccessExpires());
                    editor.commit();

                    if (fbTYPE == 1)
                    {
                        postToWall();
                    }
                    else if (fbTYPE == 0)
                    {
                        postToWall(getBitmap());
                    }
                }

                public void onError(DialogError error)
                {
                    Log.v("debugging", error.getMessage());
                }

                public void onFacebookError(FacebookError fberror)
                {
                    Log.v("debugging", fberror.getMessage());
                }

            });
            Log.v("debugging", "Passed from authorization");
        }
        else
        {
            if (fbTYPE == 1)
            {
                Log.v("debugging", "Entered Post to facebook");
                postToWall();
            }
            else if (fbTYPE == 0)
            {
                Log.v("debugging", "Entered Post image to facebook");
                postToWall(getBitmap());

            }
        }
    }

    public void clearCredentials()
    {

        try
        {

            facebook.logout(ctx);

        }
        catch (MalformedURLException e)
        {

            e.printStackTrace();

        }
        catch (IOException e)
        {

            e.printStackTrace();

        }

    }

    public void postToWall()
    {
        // post on user's wall.
        Bundle params = new Bundle();
        params.putString("description", getDescription());
        params.putString("picture", getPicture());
        params.putString("name", getName());
        params.putString("link", getLink());

        facebook.dialog(ctx, "feed", params, new DialogListener()
        {

            public void onFacebookError(FacebookError e)
            {
            }

            public void onError(DialogError e)
            {
            }

            public void onComplete(Bundle values)
            {
                Toast.makeText(ctx, "Thanks for sharing JOLENPOP", Toast.LENGTH_SHORT).show();
            }

            public void onCancel()
            {
                // Login_Activity.asyncFBLogin fblogin = null;
                // fblogin.execute();
            }
        });

    }

    public void postToWall(Bitmap bmImage)
    {
        Log.v("debugging", "entered postToWall(bitmap)");
        byte[] data = null;
        Bitmap bm = Bitmap.createBitmap(bmImage);
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        bm.compress(CompressFormat.JPEG, 100, baos);
        data = baos.toByteArray();

        Bundle params = new Bundle();
        params.putString("method", "post");
        params.putString("message", getDescription());
        params.putByteArray("image", data);

        try
        {
            String response = facebook.request("me");
            response = facebook.request("me/photos", params, "POST");
            if (response == null || response.equals("") || response.equals("false"))
            {
                Log.v("response String", response);
                return;
            }
            else if (response.toLowerCase().contains("error"))
            {
                Log.v("response String", response);
                return;
            }
        }
        catch (Exception e)
        {

            return;
        }

        Toast.makeText(ctx, "Your photo has been successfuly published!", Toast.LENGTH_LONG).show();
    }

    public void getProfileInformation()
    {
        mAsyncRunner.request("me", new RequestListener()
        {
            public void onComplete(String response, Object state)
            {
                Log.d("Profile", response);
                String json = response;
                try
                {
                    JSONObject profile = new JSONObject(json);
                    // getting name of the user
                    String name = profile.getString("name");
                    // getting email of the user
                    String email = profile.getString("email");

                    runOnUiThread(new Runnable()
                    {

                        public void run()
                        {
                            // Toast.makeText(getApplicationContext(), "Name: " + name
                            // + "\nEmail: " + email, Toast.LENGTH_LONG).show();
                        }

                    });
                }
                catch (JSONException e)
                {
                    e.printStackTrace();
                }
            }

            public void onIOException(IOException e, Object state)
            {

            }

            public void onFileNotFoundException(FileNotFoundException e, Object state)
            {

            }

            public void onMalformedURLException(MalformedURLException e, Object state)
            {

            }

            public void onFacebookError(FacebookError e, Object state)
            {

            }
        });
    }

    /**
     * setters
     * */
    public void setFacebook(Facebook facebook)
    {
        this.facebook = facebook;
    }

    public void setAsyncRunner(AsyncFacebookRunner mAsyncRunner)
    {
        this.mAsyncRunner = mAsyncRunner;
    }

    public void setPrefs(SharedPreferences mPrefs)
    {
        this.mPrefs = mPrefs;
    }

    public void setName(String val)
    {
        this.Name = val;
    }

    public void setLink(String val)
    {
        this.Link = val;
    }

    public void setBitmap(Bitmap val)
    {
        this.bitmap = val;
    }

    public void setDescription(String val)
    {
        this.Description = val;
    }

    public void setPicture(String val)
    {
        this.Picture = val;
    }

    /**
     * getters
     * */

    public String getAppID()
    {
        return this.APP_ID;
    }

    public String getName()
    {
        return this.Name;
    }

    public String getLink()
    {
        return this.Link;
    }

    public String getDescription()
    {
        return this.Description;
    }

    public String getPicture()
    {
        return this.Picture;
    }

    public Bitmap getBitmap()
    {
        return this.bitmap;
    }

} 
```

这是我如何使用它：

```
fbShare = new FacebookShare(this);
mPrefs = PreferenceManager.getDefaultSharedPreferences(this); 
```

然后;

```
Bitmap screenshot = this.glSurfaceView.mRenderer.screenCapture;
        fbShare.setName("JOLENPOP");
        fbShare.setDescription("I got a score of " + this.glSurfaceView.mRenderer.Score + " in JOLENPOP! Try to beat me!");
        fbShare.setBitmap(screenshot);
        fbShare.setPrefs(mPrefs);
        fbShare.shareFB(0); 
```

# magento - 调用动作表单 json 类型块 magento

> ID：13246383
> 
> 赞同：1
> 
> 时间：2012-11-06T07:31:11.170
> 
> 标签：magento

谁能告诉我是否可以在

```
{{block type="multibanners/multibanners" category_id="9" name="multibanners" alias="multibanners" template="multibanners/multibanners.phtml"}}. 
```

或者

替代行动`json type block`？

谢谢

# php - 在 apache tomcat 服务器上使用 CakePHP

> ID：13246386
> 
> 赞同：1
> 
> 时间：2012-11-06T07:31:16.403
> 
> 标签：php, apache, .htaccess, cakephp, tomcat

我有 2 个用于单个应用程序的平台，一个在 jsp 中，另一个在 php 中（我使用的是 CakePHP）。

**我想做的事 ？**

现在我们想在两个平台之间共享会话，在这种情况下，我们需要使用可以部署 php 和 jsp 网页的单个 web 平台。

**问题是什么？**

现在的问题是`.htaccess`文件无法在 apache tomcat 服务器上运行，所以我们无法使用 CakePHP。有没有办法在 apache tomcat 服务器上使用 Using CakePHP？

我发现这个 [http://tukey.org/urlrewrite/](http://tuckey.org/urlrewrite/)可以解决我的问题？如果是怎么办？

我的`.htaccess`档案

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteRule    ^$ app/webroot/    [L]
   RewriteRule    (.*) app/webroot/$1 [L]
</IfModule> 
```

提前致谢

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:15:16.737

看看这个：

[http://php-java-bridge.sourceforge.net/doc/tomcat6.php](http://php-java-bridge.sourceforge.net/doc/tomcat6.php)

对于 Session，我认为最好的方式是在某处（例如，XML 或 YAML 文件）序列化会话变量。这是两种不同的语言，会话变量存储在内存中，进程之间无法访问。

# python - 在手动退出时结束 pythonw.exe 进程

> ID：13246394
> 
> 赞同：0
> 
> 时间：2012-11-06T07:31:21.987
> 
> 标签：python

我似乎找不到合适的谷歌搜索来找出应该很容易的东西。

我正在使用 wxPython 创建一个 GUI，并将 Python 文件保存为 .pyw，所以我没有控制台。然后，当用户执行操作时，我将另一个 .py 文件导入主窗口。这样做会创建不会关闭的 pythonw.exe 实例。需要明确的是，如果我在运行时不打开/插入第一个文件中的其他 .py 文件，则仅打开主控制台时打开的 .pyw 将从我的进程中清除。

当我使用该程序时，一切都很好，但是当我使用 Windows“X”按钮关闭时，我的进程中仍然出现 pythonw.exe，并且我打印错误的文件由于使用它的其他东西而被锁定（ pythonw.exe)。我需要使用什么代码来确保 python 完全退出？每当我在文件中构建时，它似乎也会保留 - 也退出，并且如果我插入另一个模块，它只会保留在进程中（仅通过用户输入完成）

这也可能很明显，但是如果我手动打开导入的文件，它具有相同的行为，就像我关闭文件时 python.exe 关闭一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-10-17T07:37:09.420

如果你想退出应用程序，你可以这样做：

```
import os
os._exit(0) 
```

当正常的 exit() 或到达主文件的末尾由于后台线程运行而不起作用时，此方法有效。

但是，因此您将结束杀死所有正在运行的线程。您应该查看导致问题的导入文件的代码，看看它是否有线程。

# mysql - MYSQL 中的日期优先

> ID：13246400
> 
> 赞同：1
> 
> 时间：2012-11-06T07:32:06.263
> 
> 标签：mysql

如何在MYSQL中设置一周的第一天？例如，如果我说 Set DateFirst = 1，则一周的第一天设置为星期一。如果 DateFirst = 2，则在 MSSQL 中将一周的第一天设置为星期二。MySQL中的任何等效功能？

# c# - 在后台线程上初始化时，我的字段是否应该是 volatile 的？

> ID：13246401
> 
> 赞同：4
> 
> 时间：2012-11-06T07:32:35.083
> 
> 标签：c#, .net, multithreading

在应用程序启动时，我在后台线程上实例化一个类，然后将其分配给一个变量。我稍后从我的主线程访问该变量。这个变量只分配一次。

我的理解是这里不需要使用 volatile 关键字，因为在 UI 线程中第一次访问之前，无法缓存引用。我的想法是正确的，还是我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T07:37:42.623

> 我对么？

是的。只有当一个线程重复读取一个变量（从另一个线程写入）时，缓存才是一个问题。

而且因为分配给引用是原子的，所以你是安全的。

# jakarta-ee - 如何让 Netbeans 在运行时打开 contextRoot？

> ID：13246402
> 
> 赞同：1
> 
> 时间：2012-11-06T07:32:15.870
> 
> 标签：jakarta-ee, maven, netbeans, ear

使用 NetBeans 7.2。

我有一个打包为 .EAR 的企业应用程序。

在 POM 中，我设置了上下文根，如下所述：[http](http://maven.apache.org/plugins/maven-ear-plugin/examples/customizing-context-root.html) ://maven.apache.org/plugins/maven-ear-plugin/examples/customizing-context-root.html到

```
/myapp 
```

通过检查 maven 生成的 application.xml，它确实被设置到这个位置（我可以成功浏览到 localhost:8080/myapp）。

但是，当我在 NetBeans 中“运行”.EAR 时，它总是会打开

```
localhost:8080/myapp_war-1.0-SNAPSHOT 
```

这个页面不存在所以我得到一个 404 并且必须手动浏览到 url。
我要打开

```
localhost:8080/myapp 
```

我如何让它做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:50:24.653

今天又搜了一下，最近报了一个bug。所以我不相信目前有办法解决这个问题。

[http://netbeans.org/bugzilla/show_bug.cgi?id=221541](http://netbeans.org/bugzilla/show_bug.cgi?id=221541)

# ruby-on-rails - Rails 布局中的 jPlayer javascript 导致路由错误

> ID：13246405
> 
> 赞同：2
> 
> 时间：2012-11-06T07:32:52.137
> 
> 标签：ruby-on-rails, layout, routing, jplayer

我正在尝试使用 jPlayer 播放 mp3。我有 jPlayer CSS 和图像工作，现在只是播放 mp3 的问题。为此，我在 application.html.erb 布局的头部包含以下 javascript：

```
 <script type="text/javascript">
  $(document).ready(function(){
    $("#jquery_jplayer_1").jPlayer({
      ready: function () {
        $(this).jPlayer("setMedia", {
             mp3: "media/sound.mp3",
          // m4a: "http://www.jplayer.org/audio/m4a/Miaow-07-Bubble.m4a",
          // oga: "http://www.jplayer.org/audio/ogg/Miaow-07-Bubble.ogg"
        });
      },
      swfPath: "/javascripts",
      supplied: "mp3, m4a, oga"
    });
  }); 
```

当我加载页面并单击播放按钮时，出现以下路由错误：

```
ActionController::RoutingError (No route matches [GET] "/calls/media/sound.mp3") 
```

有人介意花一点时间向我解释这是为什么吗？我应该在这样的东西中包含javascript吗？

```
<%= javascript_tag 'some js code' %> 
```

非常感谢任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:26:36.753

我意识到我错过了一个开始/即将“media/sound.mp3”更改为“/media/sound.mp3”。

然后，我决定使用路径助手

# html - -webkit-box-reflect - 用于 FireFox 的 CSS

> ID：13246409
> 
> 赞同：4
> 
> 时间：2012-11-06T07:33:09.733
> 
> 标签：html, css, internet-explorer

我正在尝试做一些类似**http://designshack.net/tutorialexamples/HoverEffects/Ex5.html**的事情，其中​​图像的反射显示在下面，但是它在 IE 或 FireFox 上不起作用。这是我的代码[http://jsfiddle.net/srvcm/1/](http://jsfiddle.net/srvcm/1/)有什么技巧可以让 firefox 做到这一点吗？

```
 .ex img {
        <!--margin: 25px;-->
        opacity: 0.9;
        border: 1px solid #eee;

        /*Transition*/
        -webkit-transition: all 0.5s ease;
        -moz-transition: all 0.5s ease;
        -o-transition: all 0.5s ease;

        /*Reflection*/
        -webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(.7, transparent), to(rgba(0,0,0,0.1)));

    }

    .ex img:hover {  
       opacity: 1;

       /*Reflection*/
      -webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(.7, transparent), to(rgba(0,0,0,0.7)));

       /*Glow*/
      -webkit-box-shadow: 0px 0px 20px rgba(255,255,255,0.8);
      -moz-box-shadow: 0px 0px 20px rgba(255,255,255,0.8);
      box-shadow: 0px 0px 20px rgba(255,255,255,0.8);
    } 
```

先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T07:39:33.857

[http://caniuse.com/#search=box-ref](http://caniuse.com/#search=box-ref) <- 该属性似乎缺乏跨浏览器兼容性

# c - ipv6 多播接收

> ID：13246410
> 
> 赞同：2
> 
> 时间：2012-11-06T07:33:22.470
> 
> 标签：c, sockets, ipv6, multicast, multicastsocket

我无法接收服务器发送的多播数据包。我可以看到通过 tcpdump 接收到的数据包。谁能让我知道我在这里做错了什么。谢谢。

```
struct ipv6_mreq mreq;
struct sockaddr_in6 servaddr;

sock = socket(AF_INET6,SOCK_DGRAM,0);

servaddr.sin6_family = AF_INET6;
servaddr.sin6_port = htons(61624);
servaddr.sin6_addr = in6addr_any;

inet_pton(AF_INET6,"ff38:40:2001::1",&mreq.ipv6mr_multiaddr);

mreq.ipv6mr_interface = 0;
setsockopt(sock,IPPROTO_IPV6,IPV6_JOIN_GROUP, &mreq,sizeof(mreq));
bind(sock,(struct sockaddr *)&servaddr,sizeof(servaddr));
/* using poll to receive data */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:08:53.117

零是~~无效的~~应该是“嘿内核，为我选择一个”界面索引。这对您不起作用，很可能是因为您的路由表没有与给定多播组匹配的显式条目，并且默认路由通过不同的接口。

用于[`if_nametoindex(3)`](http://www.unix.com/man-page/FreeBSD/3/if_nametoindex/)解析接口名称并将其存储`ipv6mr_interface`到`struct ipv6_mreq`.

# html - 是否可以从使用 collection_select 生成的下拉框中获取项目的选择顺序？

> ID：13246411
> 
> 赞同：1
> 
> 时间：2012-11-06T07:33:23.307
> 
> 标签：html, ruby-on-rails, forms

**问题**：是否可以从使用 collection_select 生成的下拉框中获取项目的选择顺序？

我正在以简单的形式执行以下操作：

```
<%= f.collection_select(:category_ids, Category.all, :id, :name, {}, html_options = {:multiple => true} ) %> 
```

有了这个，我可以获得一组选定的类别，但是它们是按自上而下的顺序排列的（因为它们出现在列表中）。

例如，假设我有以下类别：

1.  红色的
2.  绿色的
3.  蓝色的
4.  橙子

如果我选择绿色、橙色、红色，我想得到一个 [2, 4, 1] 的返回数组，但我得到的是 [1, 2, 4] 。

我发现这篇文章提到以这种方式订购它们是 HTML 标准的东西。有没有解决的办法？

[html中的选择顺序选择多个？](https://stackoverflow.com/questions/10446796/order-of-selection-in-html-select-multiple)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:58:06.430

当然，也有绕口令。使用对用户操作敏感的语言，例如 JavaScript。在这种情况下，请使用关联数组之类的数据结构，其中选择一个选项会更新相应的元素，而取消选择会使数组中的元素无效。

# android - 清楚地理解矩阵计算

> ID：13246415
> 
> 赞同：19
> 
> 时间：2012-11-06T07:33:43.563
> 
> 标签：android, math, android-bitmap

我有这个代码片段。我不明白矩阵通过的[`Matrix.preScale`](https://developer.android.com/reference/android/graphics/Matrix#preScale(float,%20float))and 。**这是什么意思？****有没有了解矩阵计算的仿真网站？****你能给我一些关于用于图形的数学的网站吗？**对不起，我数学不好。:)[`Bitmap.createBitmap`](https://developer.android.com/reference/android/graphics/Bitmap#createBitmap(android.graphics.Bitmap,%20int,%20int,%20int,%20int,%20android.graphics.Matrix,%20boolean))

 **```
public Bitmap createReflectedImages(final Bitmap originalImage) {
    final int width = originalImage.getWidth();
    final int height = originalImage.getHeight();
    final Matrix matrix = new Matrix();
    matrix.preScale(1, -1);
    final Bitmap reflectionImage = Bitmap.createBitmap(originalImage, 0, (int) (height * imageReflectionRatio),
            width, (int) (height - height * imageReflectionRatio), matrix, false);
    final Bitmap bitmapWithReflection = Bitmap.createBitmap(width, (int) (height + height * imageReflectionRatio + 400),
            Config.ARGB_8888);
    final Canvas canvas = new Canvas(bitmapWithReflection);
    canvas.drawBitmap(originalImage, 0, 0, null);
    final Paint deafaultPaint = new Paint();
    deafaultPaint.setColor(color.transparent);
    canvas.drawBitmap(reflectionImage, 0, height + reflectionGap, null);
    final Paint paint = new Paint();
    final LinearGradient shader = new LinearGradient(0, originalImage.getHeight(), 0,
            bitmapWithReflection.getHeight() + reflectionGap, 0x70ffffff, 0x00ffffff, TileMode.CLAMP);
    paint.setShader(shader);
    paint.setXfermode(new PorterDuffXfermode(Mode.DST_IN));
    canvas.drawRect(0, height, width, bitmapWithReflection.getHeight() + reflectionGap, paint);
    return bitmapWithReflection;
} 
```

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-11-06T08:12:21.517

不要想得太难，至少不要在早期阶段。

只需将矩阵视为数字数组即可。在这种情况下，Android 矩阵有 3 行，每行 3 个数字。每个数字都告诉 Android 图形函数如何缩放（更大/更小）、平移（移动）、旋转（转动）或倾斜（在 2D 平面中扭曲）应用矩阵的“事物”。

矩阵看起来像这样（请参阅此处的[文档](http://developer.android.com/reference/android/graphics/Matrix.html)）。

```
{Scale X, Skew X, Transform X
Skew Y, Scale Y, Transform Y
Perspective 0, Perspective 1, Perspective 2} 
```

好消息是你不需要知道任何矩阵数学，实际上几乎不需要数学，就可以在 Android 中使用矩阵。这就是 preScale() 等方法为您做的事情。理解背后的数学并不难，大多数事情你只需要加、乘和[SOHCHAHTOA](http://en.wikipedia.org/wiki/Trigonometry#Mnemonics)。

[数学挑战的矩阵变换/](http://www.useragentman.com/blog/2011/01/07/css3-matrix-transform-for-the-mathematically-challenged/)

当您阅读 Matrix 文档时，您会看到带有“set”、“post”或“pre”前缀的旋转、翻译等方法。

想象一下，您创建了一个新矩阵。然后使用 setRotate() 设置矩阵进行旋转。然后使用 preTranslate() 进行翻译。因为您使用了“pre”，所以翻译发生在旋转之前。如果您使用“post”，则轮换将首先发生。'set' 清除矩阵中的任何内容并重新开始。

为了回答您的具体问题， new Matrix() 创建了“恒等矩阵”

```
{1, 0, 0
 0, 1, 0
 0, 0, 1} 
```

它按 1 缩放（因此大小相同）并且不进行平移、旋转或倾斜。因此，应用单位矩阵将无济于事。下一个方法是 preScale()，它应用于此单位矩阵，在您展示的情况下，会产生一个可缩放的矩阵，并且不执行任何其他操作，因此也可以使用 setScale() 或 postScale() 来完成。

希望这可以帮助。**

# javascript - 如何让用户使用window.open登录网站？

> ID：13246416
> 
> 赞同：0
> 
> 时间：2012-11-06T07:34:11.880
> 
> 标签：javascript, jquery, html

我在下面的示例 JavaScript 程序中编写了这个，以在新窗口中打开一个网站。

我的问题是，一旦我们有了用户名和密码，我们是否可以让他在点击打开窗口按钮后自动登录到 gmail 网站？

请分享你的看法

```
<html>
<head>
<script>
function open_win()
{
window.open("http://www.gmail.com")
}
</script>
</head>
<body>

<input type="button" value="Open Window" onclick="open_win()">

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:39:29.457

不，您无法做到这一点，因为 gmail 授权操作是 HttpPost 操作，您将无法执行此类跨服务器请求。或者你在谷歌工作，你可以访问 Access-Control-Allow-Origin 标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T07:40:13.510

你不能。

即使你可以，我认为谷歌不会欣赏这一点，目前正在研究如何禁止这类事情。

因此，即使您设法使其工作，它也会在一段时间后停止工作，因为您可能会使用某种安全漏洞。

编辑：

如果您想在自己的网站和同一个域中使用它，那么可以，您可以使用普通会话或编写一些花哨的不安全登录代码。

可能您想使用 oauth 或其他一些授权方法。

编辑：

打开弹出窗口，询问凭据。在向服务器发送请求后，登录，编辑会话。之后在客户端使用[js 窗口](http://www.perlscriptsjavascripts.com/tutorials/javascript/window_1.html)关闭当前弹出窗口并刷新主页。主页将检查会话数据，您知道该用户已登录。

# jquery - jquery,gridview,asp.net

> ID：13246419
> 
> 赞同：1
> 
> 时间：2012-11-06T07:34:00.470
> 
> 标签：jquery, asp.net, data-binding, gridview, client-side

我的 .aspx 页面中有一个 GridView，它在后面的代码中绑定到 SQL Server 数据库表。我还有一个 jQuery UI 范围滑块。现在我必须根据滑块的值过滤 GridView 中的数据，这应该在客户端完成。简而言之，我必须像[下面的链接](http://jiren.github.com/filter.js/filterjs.html)那样建立一个页面，但不知道从哪里开始以及如何做。我google了很多，但没有得到任何完整的指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T08:22:24.150

ASP.NET GridView 控件仅在服务器端获取数据。如果要在客户端过滤数据，首先应将所有数据传递给客户端，然后根据过滤器的值有条件地显示相应的行。

ASP.NET 有一种算法，可以在呈现 .aspx 页面时将 html id 分配给它的所有控件。该算法由[`ClientIDMode`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)和[`ClientIDRowSuffix`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.clientidrowsuffix.aspx)属性控制。一旦您知道所有行的客户端 ID，您就可以根据过滤器的当前值使用 jQuery 切换它们的可见性。

# spring - JMS 客户端需要哪些 HornetQ 库？

> ID：13246422
> 
> 赞同：3
> 
> 时间：2012-11-06T07:34:03.987
> 
> 标签：spring, jms, hornetq

我有一个独立的 hornetq 服务器和一个使用它的*JMS 客户端*！关于 hornetq 用户手册，我应该只将*jnp-client.jar*和*jms.jar*添加到客户端类路径中。但是当我尝试使用 hornetq 服务器（产生和消费消息）时，抛出了几个 ClassNotFoundExceptions，所以我强制将这些 jar 文件添加到我的客户端类路径中：

*1\. jms 2\. jnp-client* 3\. hornetq-jms-client 4\. netty 5\. hornetq-core-cilent 6\. jboss-common

我是在使用*Hornetq 核心客户端*而不是*jms 客户端*吗？*jms客户端*我真正需要什么jar文件？

我的 applicationContext.xml：

```
<!-- JndiTemplate -->
<bean id="jndiTemplate" class="org.springframework.jndi.JndiTemplate">
        <property name="environment">
            <props>
                <prop key="java.naming.factory.initial">org.jnp.interfaces.NamingContextFactory</prop>
                <prop key="java.naming.factory.url.pkgs">org.jboss.naming:org.jnp.interfaces</prop>
                <prop key="java.naming.provider.url">jnp://localhost:1099</prop>
            </props>
        </property>
</bean>

<!-- Connection Factory -->
<bean id="hornetqConnectionFactory" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiTemplate" ref="jndiTemplate"/>
        <property name="jndiName" value="/ConnectionFactory" />
</bean>

<!-- Destionation -->
<bean id="annotationDeleteCommandDestination" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiTemplate" ref="jndiTemplate"/>
        <property name="jndiName" value="/queue/command/annotation/deleteQueue" />
</bean>

<!-- Message Listener -->
<bean id="annotationMessageHandler" class="command.messaging.handler.annotation.AnnotationMessageHandler">
        <property name="annotationService" ref="annotationService"/>
</bean>

<!-- Message Listener Container -->
<bean id="annotationDeleteCommandMsgListenerContainer"
      class="org.springframework.jms.listener.DefaultMessageListenerContainer" 
      p:connectionFactory-ref="hornetqConnectionFactory"
      p:destination-ref="annotationDeleteCommandDestination"
      p:cacheLevelName="CACHE_CONSUMER"
      p:messageListener-ref="annotationDeleteCommandMessageHandler"
      p:concurrentConsumers="10"
      p:maxConcurrentConsumers="50"
      p:receiveTimeout="5000"
      p:idleTaskExecutionLimit="10
      p:idleConsumerLimit="5" />

<!-- Message Producer -->
<bean id="messageSender" class="command.messaging.sender.MessageSender">
        <property name="connectionFactory" ref="hornetqConnectionFactory" />
</bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:09:33.740

HornetQ-JMS-Client 是 HornetQ-Core-Client 的适配器，它公开了 JMS API。所以你需要他们两个。

而 HornetQ-Core-Client 在内部需要 netty，所以你也需要那个。

不确定jboss-common。你需要一些日志依赖，但我不记得到底是哪一个。

请注意，与 SOAP 不同，JMS 是一种 API，而不是协议。应用程序的其余部分独立于 API 提供者，但您需要正确的客户端库来理解您的 JMS 服务器使用的自定义协议。因此，例如，您不能使用 HornetQ JMS 客户端连接到 ActiveMQ。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-27T16:25:07.253

根据文档...

如果您只使用纯 HornetQ Core 客户端（即没有 JMS），那么您需要 hornetq-core-client.jar、hornetq-commons.jar 和 netty.jar。

如果您在客户端使用 JMS，那么您还需要包含 hornetq-jms-client.jar 和 jboss-jms-api.jar。

这些是指独立 hornetq 下载的 lib 目录中的文件。

我也需要添加 jnp-client.jar 以避免 CNF。

# javascript - 邮政编码字段的Javascript验证

> ID：13246423
> 
> 赞同：0
> 
> 时间：2012-11-06T07:34:18.753
> 
> 标签：javascript, validation

我有 JavaScript 代码来验证页面中的邮政编码字段，如下所示：

```
<script type="text/javascript">
 var zip=$("#zip").val();
if (zip == '') {
               errorMessage = REG_FIELD_EMPTY_ZIP;
               $('#msg_zip').html(errorMessage).show();
               }
               else {
                if ((zip.length) < 5) 
                    {
                    errorMessage = REG_FIELD_LENGTH_ZIP;
                $('#msg_zip').html(errorMessage).show();
                }
                    else 
                    {
                if (!reg.test(zip)) {
                errorMessage = REG_FIELD_ONLYDIGITS_ZIP;
                $('#msg_zip').html(errorMessage).show();
                }
               else {
                $('#msg_zip').html('').hide();
                    }
             }
           }
           </script> 
```

在这里，我想添加更多条件： 1> 此邮政编码字段还应支持加拿大邮政编码格式 (A#A #A#)，它应该接受或不带空格。如果该值不是加拿大邮政编码格式，2> 它应该只接受 5 位数字。如何修改上述脚本，以便我的邮政编码字段也可以接受加拿大邮政编码格式。通过搜索，我发现一些正则表达式可以接受加拿大邮政编码为 /^[ABCEGHJKLMNPRSTVXY]\d[AZ] *\d[AZ]\d$/; 但是当我测试它时，它不接受小写字母。
任何人都可以澄清如何更改我的脚本，以便它应该接受加拿大邮政编码或只接受 5 位数字。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:38:45.283

您对加拿大邮政编码的正则表达式是正确的。如果您希望它接受小写字母，则必须将其与不区分大小写的选项（**i**）一起使用：

```
(/^[ABCEGHJKLMNPRSTVXY]\d[A-Z] *\d[A-Z]\d$/i).test(zip) 
```

5位数字的正则表达式：

```
/^\d{5}$/ 
```

结合这两个：

```
(/^[ABCEGHJKLMNPRSTVXY]\d[A-Z] *\d[A-Z]\d$/i).test(zip) || (/^\d{5}$/).test(zip) 
```

# windows - hello world 没有输出 - Qt SDK 2010 - Mingw (gcc 4.6.3) - WindowsXP

> ID：13246424
> 
> 赞同：3
> 
> 时间：2012-11-06T07:34:39.930
> 
> 标签：windows, qt, mingw

Qt:`qt-sdk-win-opensource-2010.01` 明威: `1686-mingw32-gcc-4.6.3-release`:

**.pro**文件：

```
TEMPLATE    = app
TARGET      = 
SOURCES     += ef.cpp
DEPENDPATH  += .
INCLUDEPATH += . 
```

**.cpp**：_

```
#include <stdio.h>    
int main(int argc, char *argv[]) 
{
    printf ("\nhjhjk\n");
} 
```

编译和可执行输出如下：

![在此处输入图像描述](../Images/63b93a348ead549ff7a317a346ec0344.png)

调用的可执行文件`temp`和调用的目标文件`ef.o`在`debug`文件夹中创建。

我已经按照这里的`qmake.conf`描述编辑了文件[。](https://stackoverflow.com/questions/13227354/warning-cannot-find-entry-symbol-nable-stdcall-fixup-defaulting)

**打印语句不会被打印。请帮忙。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T07:36:31.203

尝试将 CONFIG+=console 添加到您的 .pro 文件中

# java - 以编程方式禁用菜单项

> ID：13246428
> 
> 赞同：3
> 
> 时间：2012-11-06T07:34:27.507
> 
> 标签：java, swing, desktop-application, netbeans-platform, jmenuitem

我正在使用 Netbeans RCP 开发桌面应用程序。我有许多菜单项通过 TopComponents 中的注释添加到菜单中。我希望能够禁用其中几个菜单项，具体取决于登录用户的访问权限。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T20:35:05.870

在 NetBeans 平台中执行此操作的一种方法是在菜单中注册[Presenter.Menu ：](http://bits.netbeans.org/dev/javadoc/org-openide-util/org/openide/util/actions/Presenter.Menu.html)

```
@ActionID(id = "com.company.MyPresenter", category = "Edit")
@ActionRegistration(displayName = "com.company.Bundle#CTL_MyPresenter")
@ActionReference(path = "Menu/Edit", position = 1)
public class MyPresenter implements Presenter.Menu {

    @Override
    public JMenuItem getMenuPresenter() {
        // return menu item from your ACL'd registry
    }
} 
```

当您`Presenter.Menu`在菜单中注册 a 时`getMenuPresenter()`，平台会调用该方法以获取`JMenuItem`添加到菜单中的实际内容。

通常你只`JMenuItem`需要在这里构建一个，但由于你需要能够在应用程序的其他部分中获取它，你需要保留某种菜单项的注册表，以便检索相同的实例.

一种方法是将所有 ACL 的菜单项注册为`ServiceProvider`. 通过这种方式，您可以`Lookup`在需要启用/禁用它们时全部使用它们。

一个`ServiceProvider`接口：

```
public interface ControllableMenuItem {

    void setEnabled(boolean enabled);

    JMenuItem getMenuItem();
} 
```

`ControllableMenuItem`注册为的实现`ServiceProvider`：

```
@ServiceProvider(service = ControllableMenuItem.class)
public class MyMenuItem implements ControllableMenuItem {

    private JMenuItem menuItem;

    @Override
    public void setEnabled(boolean enabled) {
        getMenuItem().setEnabled(enabled);
    }

    @Override
    public JMenuItem getMenuItem() {
        if (menuItem == null) {
            menuItem = new JMenuItem(new MyAction());
        }
        return menuItem;
    }
} 
```

现在，您可以在需要启用/禁用`Lookup`所有`ControllableMenuItem`s 时：

```
Collection<? extends ControllableMenuItem> menuItems = 
    Lookup.getDefault().lookupAll(ControllableMenuItem.class);
for (ControllableMenuItem item : menuItems) {
    item.setEnabled(isAuthorized());
} 
```

然而，还有一件事情可以正常工作。您需要一种方法来保证`Presenter.Menu`得到的实例与得到的实例相同`Lookup`。做到这一点的一种方法 - 诚然不是很优雅 - 是将其注册`MenuItem`为`@ServiceProvider`自己并在以下位置查找`getMenuPresenter()`：

```
// replaces the above annotation of MyMenuItem
@ServiceProviders(value = {
    @ServiceProvider(service = ControllableMenuItem.class),
    @ServiceProvider(service = MyMenuItem.class)
})
public class MyMenuItem implements ControllableMenuItem {...} 
```

```
public class MyPresenter implements Presenter.Menu {

    @Override
    public JMenuItem getMenuPresenter() {
        MyMenuItem myMenuItem = Lookup.getDefault().lookup(MyMenuItem.class);
        return myMenuItem.getMenuItem();
    }
} 
```

通过这种方式，您可以保证无论何时您都获得相同的`Lookup`实例`ControllableMenuItem`。

这只是这样做的一种方式。这里的要点是，当您需要禁用它们时，您需要有一种机制来获取所有 ACL 菜单项的相同实例。

控制哪些菜单项实际进入菜单系统的另一种方法是为每个访问级别创建单独的模块，并在用户未被授权使用特定功能组时简单地[禁用模块。](http://netbeans.dzone.com/news/how-quietly-disable-netbeans-m)这在许多方面都是有益的，并且是使用模块化系统的优势之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T07:38:58.587

*   请参阅[Oracle 教程如何使用菜单](http://docs.oracle.com/javase/tutorial/uiswing/components/menu.html)，运行代码示例

*   用于, ,和[`Xxx.setEnabled(false)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JMenuItem.html#setEnabled%28boolean%29)_`JMenu``JMenuItem``JRadioButtonMenuItem``JCheckBoxMenuItem`

# ruby-on-rails - 我收到 rvm：安装 rvm 后找不到命令

> ID：13246429
> 
> 赞同：11
> 
> 时间：2012-11-06T07:34:49.357
> 
> 标签：ruby-on-rails, ruby, rvm, sproutcore

我知道上面的问题是很常见的问题。我已经阅读了有关此主题的多个帖子。但我没有得到任何解决方案。

我已经在本地安装了 rvm。我们已经有了安装文件。SO进入文件夹并运行安装命令。

```
$ ./install 
```

然后我检查了用户主文件夹中的 ./rvm 文件夹

```
$ cd ~/.rvm 
```

文件夹存在。因此安装成功。

现在我在命令行中输入 rvm

```
$ rvm 
```

我低于异常

```
$ rvm
-sh: rvm: command not found 
```

在阅读了有关此问题的 stackoverflow 中的多篇文章后，我了解到我必须在 .bash_profile 中添加以下行，因为我使用的是 Mac OSX 10.7.3

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" 
```

即使我在输入 rvm 时遇到同样的异常。我需要做些什么额外的事情吗？还是我错过了什么？请帮忙

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-06T07:40:25.707

试用步骤：

1.  注销并登录到您的系统。

2.  打开一个新终端并手动运行

> 源 $HOME/.rvm/scripts/rvm

然后

> 转速

检查这些解决方法。

## 更新：

为了避免跑

> 源 $HOME/.rvm/scripts/rvm

每次打开终端时，将这一行包含`~/.MacOSX/environment`在您的 Mac 中（这类似于在aka目录`~/.bashrc`下的基于 GNU/Linux 的系统中）。`$home``~`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-01-04T16:11:19.020

就我而言，我在 Windows 10 中使用 Ubuntu Bash 并解决我使用的问题：

```
source /usr/local/rvm/scripts/rvm 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-01-10T04:21:57.067

对于那些在 2018 年这样做的人，只需添加

```
source $HOME/.rvm/scripts/rvm 
```

到您的主目录中的 .bash_profile 。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-06T16:46:47.020

您需要在终端模拟器首选项中启用登录 shell，有时需要使用`/usr/bin/bash --login`，这里是一个示例[https://rvm.io/integration/gnome-terminal/](https://rvm.io/integration/gnome-terminal/)

启用登录 shell 后，您需要关闭终端应用程序并重新打开它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-07-18T10:56:57.000

[对于 Ubuntu 18.04，在使用此处的说明](https://github.com/rvm/ubuntu_rvm)安装**rvm**后，我必须运行以下命令来解决问题。

```
source /usr/share/rvm/scripts/rvm 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-09-03T16:32:41.030

我只需要打开一个新的终端会话。

我安装后使用：

```
curl -sSL https://get.rvm.io | bash -s stable --ruby
rvm install 2.2 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-26T13:45:00.613

这是可用于 RVM 的其他选项之一：

```
source /etc/profile.d/rvm.sh 
```

# c#-4.0 - 如何更新 XML 上第二个元素的属性？

> ID：13246433
> 
> 赞同：0
> 
> 时间：2012-11-06T07:34:57.500
> 
> 标签：c#-4.0, linq-to-xml

我可以知道如何使用 linq to xml 更新第二个元素的属性吗？我确实写了一些代码，但它不起作用，它只会更新用户属性……很抱歉问这种简单的问题。

我的 XML：

```
<Settings>
<Settig>
<User id="1" username="Aplha"/>
<Location Nation="USA" State="Miami" />
<Email>user1@hotmail.com</Email>
</Setting>
</Settings> 
```

我的 CS：

```
public static void saveSetting(MainWindow main)
    {
        XDocument document = XDocument.Load("Setting.xml");
        IEnumerable<XElement> query = from p in document.Descendants("User")
                                      where p.Attribute("id").Value == "1"
                                      select p;

        foreach (XElement element in query)
        {               
             string i = "New York";
             element.SetAttributeValue("State", i);
        }

        document.Save("Setting.xml");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T07:38:51.920

您要选择`Setting`元素；您仍然可以选择 on `id=1`，如下所示：

```
IEnumerable<XElement> query = from p in document.Descendants("Setting")
                                  where p.Element("User").Attribute("id").Value == "1"
                                  select p; 
```

然后选择`Location`更新前的元素：

```
foreach (XElement element in query)
{    
    element.Element("Location").SetAttributeValue("State", "New York");           
} 
```

# android - 如何在字符串选择中播放不同的声音？

> ID：13246438
> 
> 赞同：1
> 
> 时间：2012-11-06T07:34:59.143
> 
> 标签：android, arrays, audio

首先，我昨天开始学习 Android 编程。我正在制作一个字符串，并且在每个选择中我都想播放不同的声音。好的，我有一个，但是在另一个选择中播放相同的声音，因为我不知道该怎么做；也许是具有不同情况的开关？谢谢，现在我有这个代码。`

```
import android.app.ListActivity;    
import android.media.AudioManager;    
import android.media.MediaPlayer;    
import android.os.Bundle;    
import android.view.View;    
import android.widget.ArrayAdapter;    
import android.widget.ListView;

public class sonidos extends ListActivity { 
   public String[] frases = {
        "cake",
        "butter",
        "apple",

   };
   @Override
   public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_expandable_list_item_1, frases));
   }
   public void onListItemClick(ListView parent, View v){
        this.setVolumeControlStream(AudioManager.STREAM_MUSIC);
        setContentView(R.layout.sonidos);
   }
   public void onListItemClick(ListView parent, View v, long id){
        MediaPlayer sound = MediaPlayer.create(sonidos.this, R.raw.dtrain);
        if (sound.isPlaying()) {
          sound.stop();
        } else {
                try {
                     sound.start();
                } catch (IllegalStateException e) {          
                     e.printStackTrace();
                }
        }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:13:43.613

你需要写这样的东西：

```
public void onListItemClick(ListView parent, View v, long id){

MediaPlayer sound = null;
switch (id) { // argument 'id' is the row of the clicked item

     case FIRST_ROW:
         sound = MediaPlayer.create(sonidos.this, R.raw.dtrain);
     break;

     case SECOND_ROW: 
         sound = MediaPlayer.create(sonidos.this, R.raw.bell);
     break;

    // and so on ...
}

  if (sound.isPlaying()) {

   sound.stop();

  } else {

   try {

    sound.start();

   } catch (IllegalStateException e) {

    e.printStackTrace();

   }
  }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:16:50.477

如果您使用`assets`文件夹中的声音，则可以使用以下内容：

```
public void onListItemClick(ListView parent, View v, long id){
    MediaPlayer player = new MediaPlayer();
    AssetFileDescriptor afd;
    try {
        switch(id)
        {
            case 1: afd = getAssets().openFd("cake.mp3"); break;
            case 2: afd = getAssets().openFd("butter.mp3"); break;
            default : afd = getAssets().openFd("apple.mp3"); break;
        };
        player.setDataSource(afd.getFileDescriptor(),afd.getStartOffset(),afd.getLength());
        player.prepare();

    } catch (IOException e) {
        e.printStackTrace();
        SM.Exception("## Exception playing sound!");
    }

    if (player.isPlaying()) {
          player.stop();
        } 
    else {
            try {
                 player.start();
            } catch (IllegalStateException e) {          
                 e.printStackTrace();
            }
        }
} 
```

希望这可以帮助。

# actionscript-3 - 如何避免关注 Flex 中的控件？

> ID：13246443
> 
> 赞同：0
> 
> 时间：2012-11-06T07:35:46.030
> 
> 标签：actionscript-3, apache-flex, air, flash-builder, flashbuilder4

我有一个自定义组件，其父组件是具有水平布局的组，因为我有两个控件，一个是 TextInput，另一个是日期字段。当在 ant 地方使用这个自定义组件时，我将 tabindex 提供给该控件作为一个整体。

我只想如果用户选项卡（键盘）那么当焦点在 Textinput 上时，焦点不在 dateField 上。

我是如何做到这一点的。

这是我的代码。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
         xmlns:s="library://ns.adobe.com/flex/spark" 
         xmlns:mx="library://ns.adobe.com/flex/mx" width="100%" height="20" 
         xmlns:components="com.zigron.controls.extended.components.*"
         creationComplete="creComp()">
    <!--
    Author : Tahir Alvi
    Date   : 11/06/2012
    Place  : Zigron Inc
    -->
    <fx:Declarations>
        <mx:DateFormatter id="formatter" formatString="MM/DD/YYYY" />
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import mx.controls.TextInput;
            import mx.events.CalendarLayoutChangeEvent;

            import spark.events.TextOperationEvent;

            private var _selectedDate:Date;
            private var _text:String='';
            private var _propmt:String='DOB';

            //---- creation Complete ----------
            private function creComp():void
            {
                id_dob.tabIndex = tabIndex;
            }
            //--At the initlize of datefield hide the Textinput ---
            protected function init():void 
            {
                var tf:TextInput = df.mx_internal::getTextInput();
                tf.visible = false;
                tf.includeInLayout = false;
            }
            //-- date change handler ---
            protected function df_changeHandler(event:CalendarLayoutChangeEvent):void
            {
                id_dob.text     = formatter.format(df.selectedDate.toString());
                text            = id_dob.text;

                selectedDate   = df.selectedDate;
            }
            // -- Text Input Change handler and apply masking on it -------
            protected function id_txt_changeHandler(event:TextOperationEvent):void
            {
                var s:String    = id_dob.text.replace(/[^0-9]/g,"");
                id_dob.text     = s.substring(0,2) + (s.length>2?"/"+s.substring(2,4) + (s.length>4?"/"+s.substring(4,8):""):"");
                id_dob.selectRange(id_dob.text.length, id_dob.text.length);

                text            = id_dob.text;

                if(text.length)
                {
                    selectedDate = null;
                }
                else
                {
                    text = '';
                }
            }

            [Bindable]
            public function get selectedDate():Date
            {
                return _selectedDate;
            }

            public function set selectedDate(value:Date):void
            {
                _selectedDate = value;
            }

            [Bindable]
            public function get text():String
            {
                return _text;
            }

            public function set text(value:String):void
            {
                _text = value;
                if(_text.length)
                    id_dob.text = _text;
            }

            [Bindable]
            public function get propmt():String
            {
                return _propmt;
            }

            public function set propmt(value:String):void
            {
                _propmt = value;
            }

        ]]>
    </fx:Script>
    <s:layout>
        <s:HorizontalLayout horizontalAlign="left" verticalAlign="top" gap="2"/>
    </s:layout>
    <components:LabelTextInput id="id_dob" 
                               width="100%" prompt="{propmt}" change="id_txt_changeHandler(event)"/>
    <mx:DateField id="df" 
                  initialize="init()" width="20" change="df_changeHandler(event)" selectableRange="{{rangeEnd:new Date()}}"
                  toolTip="Select Date of Birth" yearNavigationEnabled="true" textInputStyleName="mandatoryDateSkin"
                  maxYear="{new Date().getFullYear()}" minYear="1901"/>
</s:Group> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:01:07.750

我在一个带有文本输入的自定义组件中遇到了类似的问题。我的解决方案是创建一个公共变量，如下所示：

```
//This is my component MyComponent...
[Bindable] public var fTabIndex:int = -1;

<mx:TextInput id="field" tabIndex="{fTabIndex}"/> 
```

（其他组件...）

```
//Other component
<mx:TextInput tabindex="1"/>
<control:MyComponent fTabIndex="2"/> 
```

我希望它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-20T12:24:13.080

设置启用=“假”；并在需要时在代码中更改它。

# sql - 对整个查询进行一次日期检查

> ID：13246447
> 
> 赞同：1
> 
> 时间：2012-11-06T07:35:43.620
> 
> 标签：sql, oracle

我有以下查询：

```
select 
    fp.id, 
    fr.id,
    sum(case 
        when to_date(fp.offered_date) BETWEEN TO_DATE( :ad_startdate, 'YYYY-MM-DD') 
             AND TO_DATE(:ad_enddate, 'YYYY-MM-DD') and fp.result <> 'E'
             then 1 
        else 0 
        end) total,
    sum(case when fp.result = 'G' 
        and  to_date(fp.offered_date) >=  :ad_startdate
        and  to_date(fp.offered_date) <= :ad_enddate then 1 else 0 end) colorgreen,
    sum(case when fp.resultat = 'R' 
        and  to_date(fp.offered_date) >=  :ad_startdate
        and  to_date(fp.offered_date) <= :ad_enddate then 1 else 0 end) colorred
FROM 
    fruit_properties fp, fruit fr
WHERE 
    fp.id = fr.id
GROUP BY 
    fp.id, fr.id 
```

我正在检查每个总和列的日期 1 次，并且感觉可以以某种方式完成一次？现在，如果我在总列中只检查一次，那么 colorgreen + colorred 可能会大于总数，因为无论它们有什么日期，它都很重要。

可以以某种方式增强我的查询吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T08:22:55.617

你可以像这样简化。但请检查您的 SQL。您正在混合 TO_DATE 和 CHAR 数据类型。这只会以灾难告终。

例如你有：

```
when to_date(fp.offered_date) BETWEEN TO_DATE( :ad_startdate, 'YYYY-MM-DD') 
             AND TO_DATE(:ad_enddate, 'YYYY-MM-DD') 
```

对比

```
sum(case when fp.result = 'G' 
    and  to_date(fp.offered_date) >=  :ad_startdate 
```

在一种情况下，您是 TO_DATE'ing ad_startdate 但不是另一种（所以它是否已经是一个日期？）。您也在 TO_DATE 列，但至关重要的是没有格式掩码。该列真的是 VARCHAR 数据类型吗？如果是这样，您真的不应该将日期存储为除 DATE 之外的任何内容。

无论如何，假设该列是 DATE 数据类型并且绑定是 DATE 类型。

```
select fruit_prop_Id,fruit_id, 
       sum(case when result != 'E' then within_offer else 0 end) total,
       sum(case when result = 'R' then within_offer else 0 end) colorred,
       sum(case when result = 'G' then within_offer else 0 end) colorgreen
 from (select fp.id fruit_id, 
                fr.id fruit_prop_Id,
                fp.result,
                case 
                   when fp.offered_date >= :ad_startdate
                    and fp.offered_date <= :ad_enddate then 1 else 0 end within_offer
         from fruit_properties fp, fruit fr
        where fp.id = fr.id)
        group by fruit_id, fruit_prop_Id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T07:53:37.183

您可以将日期检查放在 where 子句中：

```
select 
    fp.id, 
    fr.id,
    sum(case when  and fp.result <> 'E' then 1 else 0 end) total,
    sum(case when fp.result = 'G' then 1 else 0 end) colorgreen,
    sum(case when fp.resultat = 'R' then 1 else 0 end) colorred
FROM 
    fruit_properties fp, fruit fr
WHERE 
    fp.id = fr.id
    AND to_date(fp.offered_date) >=  :ad_startdate
    AND to_date(fp.offered_date) <= :ad_enddate
GROUP BY 
    fp.id, fr.id 
```

编辑：正如评论中所指出的，此查询将过滤掉在给定时间间隔内没有任何报价日期的 id。

# iphone - 获取字符串的语言

> ID：13246449
> 
> 赞同：2
> 
> 时间：2012-11-06T07:36:28.243
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

假设我有一个标题字符串，用不同的语言编写。

有没有办法检查每个字符串是哪种语言？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T08:11:04.927

我没有玩过它，但你应该看看[NSLinguisticTagger](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSLinguisticTagger_Class/Reference/Reference.html)及其`- (NSOrthography *)orthographyAtIndex:(NSUInteger)charIndex effectiveRange:(NSRangePointer)effectiveRange`方法。来自[NSOrthography 文档](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSOrthography_Class/Reference/Reference.html#//apple_ref/occ/cl/NSOrthography)：

> NSOrthography 类描述一段文本的语言内容，通常用于拼写和语法检查。
> 
> 一个 NSOrthography 实例描述：
> 
> 文本包含哪些脚本。这些脚本中的每一个的主要语言和可能的其他语言。整个文本的主要脚本和语言。脚本由标准的四字母标签（Latn、Grek、Cyrl 等）统一描述，超级标签 Jpan 和 Kore 通常用于日文和韩文，Hans 和 Hant 用于中文文本；如果无法识别特定脚本，则使用标签 Zyyy。有关国际化的更多信息，请参阅国际化编程主题。
> 
> 语言由 BCP-47 标签统一描述，最好采用规范形式；如果无法确定特定语言，则使用标签 und。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T07:49:40.877

您可以简单地使用[Google Transalate REST API](https://developers.google.com/translate/v2/using_rest#detect-language)来查找语言。

您可以使用[RestKit](http://restkit.org/)之类的东西向谷歌服务器发出 REST 请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T07:48:37.427

有允许语言对话的谷歌翻译 API。我相信您一定会发现某些东西会为您的字符串返回匹配的语言。有关详细信息，请参阅[Google 翻译 API](http://www.raywenderlich.com/1448/how-to-translate-text-with-google-translate-and-json-on-the-iphone)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T07:39:12.230

您可以使用[N-gram 采样频率技术](http://en.wikipedia.org/wiki/N-gram)。我不是专家，但据传它们在实践中运行良好。

请参阅[netspeak](http://www.netspeak.org/)和类似的论文[等](http://aclweb.org/anthology-new/W/W11/W11-0813.pdf)。

# ios - 如何在不增加背景图像大小的情况下增加（自定义类型）UIButton 的可点击（点击）区域

> ID：13246452
> 
> 赞同：11
> 
> 时间：2012-11-06T07:36:26.040
> 
> 标签：ios, ios5, uibutton

是否可以在不更改按钮背景图像大小的情况下增加 UIButton 的可点击区域

我试过了：

```
[shareButton setContentEdgeInsets:UIEdgeInsetsMake(top, left, bottom, right)]; 
```

&

```
[shareButton setImageEdgeInsets:UIEdgeInsetsMake(top, left, bottom, right)]; 
```

但这些都不起作用。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-19T05:50:24.930

制作 UIButton 类型`buttonWithType:UIButtonTypeCustom`并为其分配一个较小尺寸的图像。

不要将图像设置为背景图像，否则它会随按钮一起增长。改为将其设置为主图像。

例如，如果您想将可点击区域设置为 64x64 大小并且您想显示大小为 32x32 的图像：按钮大小应为 64x64，图像大小应为 32x32。

以编程方式：

```
 UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];

// use an image with the desired size (for example 32x32)
[button setImage: [UIImage imageNamed: @"buttonIcon.png"] forState: UIControlStateNormal];
// just set the frame of the button (64x64)
[button setFrame: CGRectMake(xPositionOfMyButton, yPositionOfMyButton, 64, 64)]; 
```

界面生成器：

![界面生成器示例](../Images/2d94f0280487d65e4192cf803ba00a99.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T07:56:07.827

子类化 UIButton 的父视图，并覆盖 hitTest:withEvent:

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event
{
    CGPoint buttonPoint = [self convertPoint:point toView:_button];
    if ([_button pointInside:buttonPoint withEvent:event]) { // you may add your requirement here
        return _button;
    }
    return [super hitTest:point withEvent:event];
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-02T13:14:23.277

使用您喜欢的设计方法（界面生成器/视觉格式语言）与自动布局一起使用所需的大小布局 UIButton。将标题或图像设置为内容，并使用具有可点击区域大小的透明图像作为背景图像。

```
_button = [UIButton buttonWithType:UIButtonTypeCustom];
[_button setImage:[UIImage imageNamed:@"contentImage"] forState:UIControlStateNormal];
[_button setBackgroundImage:[UIImage imageNamed:@"transparentImage"] forState:UIControlStateNormal]; 
```

这里是 _button.layer.borderWidth = 1 的示例。

[![例子](../Images/35adb0f33fa39747468f20d7b25a52bb.png)](https://i.stack.imgur.com/xvje8.png)

# python - 无法使用 python smtp 发送电子邮件

> ID：13246456
> 
> 赞同：3
> 
> 时间：2012-11-06T07:37:19.817
> 
> 标签：python, smtp

我正在使用 python 开发一个应用程序，我需要通过邮件发送文件。我写了一个程序来发送邮件，但不知道有什么问题。代码贴在下面。请任何人帮助我使用这个 smtp 库。我有什么遗漏吗？还有谁能告诉我 smtp 中的主机是什么！我正在使用 smtp.gmail.com。也有人可以告诉我如何通过电子邮件发送文件（.csv 文件）。谢谢您的帮助！

```
#!/usr/bin/python

import smtplib

sender = 'someone@yahoo.com'
receivers = ['someone@yahoo.com']

message = """From: From Person <someone@yahoo.com>
To: To Person <someone@yahoo.com>
Subject: SMTP e-mail test

This is a test e-mail message.
"""

try:
   smtpObj = smtplib.SMTP('smtp.gmail.com')
   smtpObj.sendmail(sender, receivers, message)         
   print "Successfully sent email"
except:
   print "Error: unable to send email" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T08:14:00.870

您没有登录。还有几个原因可能导致您无法通过，包括被您的 ISP 阻止，如果无法在您身上获得反向 DNS，gmail 会退回您，等等。

```
try:
   smtpObj = smtplib.SMTP('smtp.gmail.com', 587) # or 465
   smtpObj.ehlo()
   smtpObj.starttls()
   smtpObj.login(account, password)
   smtpObj.sendmail(sender, receivers, message)         
   print "Successfully sent email"
except:
   print "Error: unable to send email" 
```

我刚刚注意到您要求能够附加文件。这改变了事情，因为现在你需要处理编码。尽管我不认为，但仍然没有那么难遵循。

```
import os
import email
import email.encoders
import email.mime.text
import smtplib

# message/email details
my_email = 'myemail@gmail.com'
my_passw = 'asecret!'
recipients = ['jack@gmail.com', 'jill@gmail.com']
subject = 'This is an email'
message = 'This is the body of the email.'
file_name = 'C:\\temp\\test.txt'

# build the message
msg = email.MIMEMultipart.MIMEMultipart()
msg['From'] = my_email
msg['To'] = ', '.join(recipients)
msg['Date'] = email.Utils.formatdate(localtime=True)
msg['Subject'] = subject
msg.attach(email.MIMEText.MIMEText(message))

# build the attachment
att = email.MIMEBase.MIMEBase('application', 'octet-stream')
att.set_payload(open(file_name, 'rb').read())
email.Encoders.encode_base64(att)
att.add_header('Content-Disposition', 'attachment; filename="%s"' % os.path.basename(file_name))
msg.attach(att)

# send the message
srv = smtplib.SMTP('smtp.gmail.com', 587)
srv.ehlo()
srv.starttls()
srv.login(my_email, my_passw)
srv.sendmail(my_email, recipients, msg.as_string()) 
```

# android - Android alertdialog 不会第一次关闭

> ID：13246458
> 
> 赞同：0
> 
> 时间：2012-11-06T07:37:27.837
> 
> 标签：android, android-alertdialog

我有一个在正常情况下工作正常的警报对话框。但是，当我关闭显示器并且设备进入空闲状态然后重新打开时，对话框存在并且按下后退按钮不会从第一次将其关闭。如果我按取消 3 或 4 次，它最终会被解雇。知道这可能是什么原因吗？

# php - php mysql动态表格显示带编号

> ID：13246459
> 
> 赞同：0
> 
> 时间：2012-11-06T07:37:13.073
> 
> 标签：php, javascript, mysql

我有页面，我使用 php 从 mysql 填充表。我有 10 张桌子。如果表中没有数据，则不显示该表。

我已经为表一显示了像“1”这样的编号，为表 2 显示了 2，依此类推。现在如果表 3、6、9 没有数据，那么页面将显示数字 1、2、4、5、7、8、10 的表。但我希望根据显示的表格数量进行编号。

```
$tbl2= "SELECT * FROM wp_health_aanvullend_moduliar WHERE health_id=$hid";
$rs2 = mysql_query($tbl2);
$count2 = mysql_num_rows($rs2);

 <?php if($count2 > 0){?>

<table class="sub_front_efect" cellpadding="0" cellspacing="0" style=" border:none; margin:10px 0;">
<thead>
    <tr>
      <th colspan="100%" class="health_sub_front">Aanvullend moduliar</th></tr>
</thead>
<tbody>

<?php  $wp_health_aanvullend_moduliar = "wp_health_aanvullend_moduliar";
             $crows = $wpdb->get_results( "SELECT * FROM $wp_health_aanvullend_moduliar WHERE health_id=$hid");
              foreach ($crows as $crow) {
                 $type          = $crow->type ;
                 $price         = $crow->price;

              ?>
    <tr data-price="<?php echo $price; ?>"><td width="65%"><?php echo $type; ?></td><td style="border-right:1px solid #ccc;">&euro; <?php echo $price; ?></td></tr>
    <?php 
              }
    ?>
  </tbody> 
```

```
<?php } ?> 
```

如果所有表格都有数据，则全部显示。![有数字的表](../Images/bb591350751b11d1390ea4c30f033fb7.png) 什么是逻辑

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:00:04.727

You should use a counter inside the loop where you displaying the tables. In all tables without content the counter wouldn't be increase.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:44:00.910

**尝试这样的事情：**

```
$k=1;
for($i=1;$i<=10;$i++)
{
$query="select * from table".$i."";
$result=mysql_query($result);
$count=mysql_num_rows($result);
if($count>0)
{
echo"<table>";
echo"<tr><td>Table".$k."</td></tr>";
echo"</table>
$k++;
}

} 
```

# javascript - 对象值设置器的 Javascript 语法糖

> ID：13246464
> 
> 赞同：1
> 
> 时间：2012-11-06T07:37:25.040
> 
> 标签：javascript

有没有一种简单的方法可以在一行中做到这一点

```
( node.innerText || node.textContent ) = text
// node = DOM node  
// text = string 
```

显然上面的方法是行不通的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T07:44:03.897

只需使用`node.innerText = node.textContent = text`，这是无害的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T07:45:15.657

可以这样做：

```
node['textContent' in node? 'textContent' : 'innerText'] = text 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T07:42:43.120

首先，不太紧凑的尝试

```
node.innerText ? node.innerText = text : node.textContent = text 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T07:44:20.290

使用 JQuery 来缩短你的语法

使用[.text()](http://api.jquery.com/text/)方法

所以你的代码将是

```
if($(selector).text() = text){
// your code here
} 
```

# yii - 默认在 dropDownList Yii 中选择一项

> ID：13246468
> 
> 赞同：2
> 
> 时间：2012-11-06T07:38:03.180
> 
> 标签：yii, dropdownbox

我有一个动态下拉列表，数据来自数据库。

```
 <?php $sel_id = $selected_id_array[0]->UPR_RelationType;?> 
```

我的下拉菜单看起来像这样

```
 <?php echo    CHtml::dropDownList('RelationType_'.$pat_id[0]->PAT_ID,'U2U_RelationType',CHtml::listData(MasterTypeItems::model()->findAllByAttributes(array('MSTT_MST_ID'=>$relationship_type_array[0]->MST_ID),array('order' => 'MSTT_Name')), 'MSTT_ID', 'MSTT_Name'),array('id'=>'select','class'=>'relation_type','style'=>'width:50px')); 
```

在这个下拉列表中，我必须默认选择`$sel_id;`

例如，`$sel_id=5;`在下拉列表中，我必须选择在 yii 中选择的第 5 个选项。请给我任何建议，我必须在下拉菜单中选择什么`$sel_id`；

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T08:12:02.677

如果我正确理解您的问题，您想要实现的是一个下拉列表，其中已经有一个预选选项。如果是这样，那么这段代码应该可以工作。

```
echo dropDownList(string $name, string $select, array $data, array $htmlOptions=array ( )) 
```

其中 $select 将是您的默认选定项目。

更多信息可以在这里找到：[http ://www.yiiframework.com/doc/api/1.1/CHtml#dropDownList-detail](http://www.yiiframework.com/doc/api/1.1/CHtml#dropDownList-detail)

# java - @Transactional 和 GenericApplicationContext 不能一起工作

> ID：13246469
> 
> 赞同：2
> 
> 时间：2012-11-06T07:37:46.073
> 
> 标签：java, spring, spring-transactions

我正在通过注释使用@Transactional 和事务管理（tx:annotation-driven...）。我在使用 GenericApplicationContext 创建应用程序上下文并从中获取一些 bean 时遇到问题：

```
GenericApplicationContext ctx = new GenericApplicationContext();

// Load beans definitions 
XmlBeanDefinitionReader xmlReader = new XmlBeanDefinitionReader(ctx);
xmlReader.loadBeanDefinitions(new ClassPathResource(CONTEXT_PATH));

// Register the datasource 
ctx.getBeanFactory().registerSingleton(CONTEXT_DATASOURCE_BEAN_NAME, dataSource);

// Get the service
ServiceInterface service = (ServiceInterface) ctx.getBean("service"); 
```

我有 ServiceInterface 的实例，但我想要包含有关事务信息的代理。

你能解释一下我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T07:45:52.617

需要在 ctx.getBean() 之前调用 ctx.refresh()。然后将调用 BeanPostProcessors。

# python - 是否可以防止 .NET 运行时在退出时卸载 DLL？

> ID：13246470
> 
> 赞同：1
> 
> 时间：2012-11-06T07:38:06.720
> 
> 标签：python, .net, qt, pyqt

我们正在用 Python、Qt4（目前为 4.6.1）和 .NET（出于集成原因）编写一个混合模式应用程序。

现在，当应用程序正常存在时，.NET 运行时被卸载，它将 PROCESS_DETACH 感知到所有 DLL。当 QHostInfoLookupManager' detriuctor estrys 线程池时，这似乎会导致崩溃。

有没有办法防止这种情况，除了：

*   终止进程？
*   将 .NET 代码移动到单独的进程以避免 Qt 问题。

当我崩溃时，调用堆栈如下：

```
python26.dll!1e02edbf()     
[Frames below may be incorrect and/or missing, no symbols loaded for python26.dll]  
python26.dll!1e078aba()     
QtCore.pyd!01971058()   
QtCore4.dll!qt_message_output(QtMsgType msgType=QtWarningMsg, const char * buf=0x077526a8)  Line 2223 + 0x1c bytes  C++
QtCore4.dll!qt_message(QtMsgType msgType=QtWarningMsg, const char * msg=0x671b8464, char * ap=0x0012f1d4)  Line 2297    C++
QtCore4.dll!qWarning(const char * msg=0x671b8464, ...)  Line 2378 + 0x11 bytes  C++
QtCore4.dll!QWaitCondition::~QWaitCondition()  Line 156 C++
QtCore4.dll!QThreadPoolPrivate::~QThreadPoolPrivate()  + 0xa2 bytes C++
QtCore4.dll!QThreadPoolPrivate::`scalar deleting destructor'()  + 0x8 bytes C++
QtCore4.dll!QObject::~QObject()  Line 992 + 0x16 bytes  C++
QtCore4.dll!QThreadPool::~QThreadPool()  Line 430 + 0xf bytes   C++
QtNetwork4.dll!QHostInfoLookupManager::~QHostInfoLookupManager()  Line 454 + 0x23 bytes C++
QtNetwork4.dll!QHostInfoLookupManager::`scalar deleting destructor'()  + 0x8 bytes  C++
QtNetwork4.dll!`theHostInfoLookupManager'::`8'::`dynamic atexit destructor for 'cleanup''()  + 0x14 bytes   C++
QtNetwork4.dll!_CRT_INIT(void * hDllHandle=0x00385f30, unsigned long dwReason=3694344, void * lpreserved=0x00385f08)  Line 449  C
QtNetwork4.dll!__DllMainCRTStartup(void * hDllHandle=0x64000000, unsigned long dwReason=0, void * lpreserved=0x00000000)  Line 560 + 0x8 bytes  C
QtNetwork4.dll!_DllMainCRTStartup(void * hDllHandle=0x64000000, unsigned long dwReason=0, void * lpreserved=0x00000001)  Line 510 + 0xe bytes   C
ntdll.dll!_LdrpCallInitRoutine@16()  + 0x14 bytes   
ntdll.dll!_LdrShutdownProcess@0()  - 0xfe bytes 
kernel32.dll!__ExitProcess@4()  + 0x42 bytes    
kernel32.dll!7c81cb26()     
mscorwks.dll!SafeExitProcess()  + 0xb7 bytes    
mscorwks.dll!DisableRuntime()  - 0x199708 bytes 
mscoreei.dll!RuntimeDesc::ShutdownAllActiveRuntimes()  + 0x873e bytes   
mscoreei.dll!_CorExitProcess@4()  + 0x26 bytes  
mscoree.dll!_ShellShim_CorExitProcess@4()  + 0x94 bytes 
msvcr90.dll!__crtCorExitProcess(int status=0)  Line 716 C
msvcr90.dll!__crtExitProcess(int status=0)  Line 722 + 0x8 bytes    C
msvcr90.dll!doexit(int code=0, int quick=0, int retcaller=0)  Line 632  C
msvcr90.dll!exit(int code=0)  Line 412 + 0xc bytes  C
python26.dll!1e030405()     
python26.dll!1e02cd93()     
python26.dll!1e02e887()     
python26.dll!1e02ccba()     
MyApp.exe!orz::runPythonFile(const char * file=0x00a203f0, QDir pydir={...}, QString pypath={...})  Line 66 + 0x3e bytes    C++
MyApp.exe!orz::the_main(int argc=2, char * * argv=0x003860e0)  Line 132 + 0x50 bytes    C++
MyApp.exe!main(int argc=2, char * * argv=0x003860e0)  Line 152 + 0xd bytes  C++
MyApp.exe!_WinMain@16()  + 0xb8 bytes   
kernel32.dll!_BaseProcessStart@4()  + 0x23 bytes 
```

也许有一些我的消息处理，但我不希望从 .net 中卸载 dll。我尝试稍微更改我的日志记录以避免 python 调用，但后来我卡住了“没有运行用户模式线程，应用程序死锁”，似乎与[http://qt-project.org/forums/viewthread/20462](http://qt-project.org/forums/viewthread/20462)有关。

```
ntdll.dll!_KiFastSystemCallRet@0()  
ntdll.dll!_NtWaitForSingleObject@12()  + 0xc bytes  
kernel32.dll!_WaitForSingleObjectEx@12()  + 0x8b bytes  
kernel32.dll!_WaitForSingleObject@8()  + 0x12 bytes 
QtCore4.dll!QWaitCondition::wait(QMutex * mutex=0x07ccf200, unsigned long time=4294967295)  Line 175 + 0x15 bytes   C++
QtCore4.dll!QThreadPoolPrivate::waitForDone()  Line 295 + 0x10 bytes    C++
QtCore4.dll!QThreadPool::~QThreadPool()  Line 429   C++ 
```

Qt 不支持 dll 卸载，引用自上面的帖子

> “老实说，我不知道如何处理这项任务。我似乎记得看到 Windows 线程会在应用程序退出时消失的情况，但不会向这些线程发出 HANDLE 信号（这意味着如果在句柄上等待，您的应用程序将死锁）。
> 
> 我很想简单地将其标记为“超出范围”，因为正如 Thiago 所说，我们不测试也不真正支持在加载 Qt 库后从应用程序中卸载它们。”</p>

# gsm - 如何识别 ISO7816 通信是 GSM 还是 EMV？

> ID：13246471
> 
> 赞同：0
> 
> 时间：2012-11-06T07:38:09.717
> 
> 标签：gsm, 3g, smartcard, 3gp, emv

我已阅读 ISO7816、3GPP 和 EMV 数据表，但我不明白如何识别通信是 GSM 还是 EMV 或其他任何东西。

问题是命令是不同的beetwin每个协议，但有时具有相同的INS（GSM FETCH：INS = 12和基本的ISO7816 PERFORM TRANSACTION OPERATION：INS = 12）。

我需要知道以前的命令，如 SELECT 或 READ BINARY，如果通信是在 GSM 或 EMV 或其他东西中建立的。

是否可以 ？CLA与此有关吗？

ETSI 102 221 说 FETCH：CLA = 80；INS = 12 ; ISO7816-7 说 FETCH : INS = 10 ; P2 = 8A；

我真的很困惑，我真的不明白。

谢谢您的帮助。

蒂姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T22:40:36.527

您可以将 CLA 字节的第一个（高位）位视为 INS 字节的一部分。原因是这是专有位，这意味着 APDU 的其余部分只兼容 ISO 7816 的格式，而不是由它定义的。

显然，尝试找到其他方法比对 APDU 通信进行指纹识别更好，尽管我必须承认我在您指出的 ETSI 标准中找不到太多关于协议识别的内容。有许多不同的智能卡协议，而 ISO 7816-4 只是一个（设计非常糟糕的）总括协议。

如果幸运的话，您将在 ISO 7816-15 中获得更多信息，但大多数时候只有 ID 卡符合该特定部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:07:31.057

@owlstead - PKCS#15（或 7816-15）并不能真正帮助破译传入的 APDU-s，实际上它不描述 APDU-s，而是描述数据对象关系。

但从实际的角度来看 - 您很可能会为 EMV 和 GSM 提供两种不同的应用程序（因此是入口点）。

基本命令是相同的，但它们的含义各不相同（想想 HTTP 之上的 REST 应用程序......）

# java - 如何使用 selenium webdriver 捕获网页的屏幕截图？

> ID：13246477
> 
> 赞同：0
> 
> 时间：2012-11-06T07:38:17.650
> 
> 标签：java, webdriver

我正在尝试使用下面提到的脚本捕获网页的屏幕截图：

```
File scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);

FileUtils.copyFile(scrFile, new File("D:\\screenshot.jpg")); 
```

我得到以下 copyFile 方法类型未定义。除了 import java.io.File 之外，我还缺少任何包吗？并导入 com.sun.jna.platform.FileUtils;。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:09:07.403

I am using the same approach as you and it works fine for me.

One guess: Check imports in the project:

```
import org.apache.commons.io.FileUtils; 
```

That could be causing the error you are getting...

BTW here is my method which works fine:

```
public void takeScreenshot(String nameOfOutputFileIncludingExtension) throws IOException {
    File scrFile = new File("");
    scrFile = ((TakesScreenshot)getDriver().getScreenshotAs(OutputType.FILE);
    File destination = new File("target/surefire-reports/" + nameOfOutputFileIncludingExtension);
    System.out.println("Screenshot stored at:" + destination.getAbsolutePath());
    FileUtils.copyFile(scrFile, destination);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:09:36.923

Import should be : `import org.apache.commons.io.FileUtils;`

# oracle - oracle 存储过程会在过程中支持strcspn 和strncpy 吗？

> ID：13246482
> 
> 赞同：-1
> 
> 时间：2012-11-06T07:38:48.247
> 
> 标签：oracle, stored-procedures, plsql, oracle10g, oracle11g

oracle 存储过程是否支持在过程中使用“strcspn”和“strncpy”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T07:58:26.123

它们是 c 函数而不是 pl/sql。从您提供的字符串中获取 IP + 端口，就像这个匿名块示例一样

（示例代码假定字符串中有一个“-”，您可能需要预先验证它！）

```
declare
  v_str  varchar2(1000) := '4000-10.1.1.1';
  v_port pls_integer;
  v_ip   varchar2(50);
begin
  v_port := substr(v_str, 1, instr(v_str, '-')-1);
  v_ip   := substr(v_str, instr(v_str, '-') + 1);
  dbms_output.put_line(v_port);
  dbms_output.put_line(v_ip);
end;
/ 
```

# python - python程序环绕

> ID：13246483
> 
> 赞同：0
> 
> 时间：2012-11-06T07:38:28.273
> 
> 标签：python, python-2.7

我有以下程序语句（program1.py）

我有一个程序1：

```
try:

except: 
```

我还有另一个程序 2（program2.py）：

```
def something: 
      print hello 
```

有没有办法将程序 1 导入到程序 2 中，程序 1 环绕程序 2，所以程序应该是

```
try:
   def something: 
          print hello    # all program 2 components

except: 
```

我对如何做到这一点感到困惑，任何指针将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:43:08.453

在program1.py中，需要调用该`something`函数。因此，它将新函数（通过函数调用）包装到 try-except 块中。我建议，你从网上的基本信息了解模块间程序流程处理。您不能将其视为简单的解析，而应将其视为函数调用。

HTH。

下面的链接将帮助您理解。
[python中的模块和集成。](http://docs.python.org/2/tutorial/modules.html#packages)
[类似的stackoverflow问题](https://stackoverflow.com/questions/9028036/how-to-link-multiple-python-scripts)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T07:43:33.600

您可以使用导入

程序1.py：

```
from program2 import something
try:
    something()
exception:
    # Some more code 
```

程序2.py：

```
def something:
    print 'Hello, World!' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T07:47:06.323

我建议的方法是使用装饰器：

```
def tryit(fn):
    def wraps(*args, **kwargs):
        try:
            fn(*args, **kwargs)
        except Exception, e:
            print e
    return wraps

def doStuff(x, y):
    return x / y

@tryit
def main(arg1, arg2):
    print doStuff(arg1, arg2)

if __name__ == "__main__":
    main(1, 10.0)
    main(100, 0) 
```

**输出**

```
0.1
integer division or modulo by zero 
```

你的逻辑可能需要重新设计，但我认为这最终是值得的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T09:07:32.820

`program2.py`：

```
from contextlib import contextmanager

@contextmanager
def tryer():
    try:
        yield  # code within with statement runs here
    except:
        print "Failed! 
```

`program1.py`：

```
from program2 import tryer

with tryer():
    print 'Hello, World!' 
```

# magento - 如何检查 url 重写管理 magento 中是否存在特定的目标路径？

> ID：13246486
> 
> 赞同：0
> 
> 时间：2012-11-06T07:38:51.220
> 
> 标签：magento, url-rewriting

我在 magento url 重写管理中几乎没有自定义 url。我需要检查url重写管理中是否存在特定的目标路径。例如，如果我的目标路径是“XXXX/YYYY/XYZ”，我将如何检查该目标路径是否存在于 url 重写管理中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T08:15:56.070

通过使用`Mage_Core_Model_Url_Rewrite`模型，例如：

```
$oUrlRewriteCollection = Mage::getModel('core/url_rewrite')
    ->getCollection()
//  ->addStoreFilter($iStoreId)
    ->addFieldToFilter('target_path', 'XXXX/YYYY/XYZ');

if (count($oUrlRewriteCollection) > 0) {
    // target path does exist
} 
```

# java - Selenium 2：导航出浏览器窗口时找不到动态生成的菜单中的项目

> ID：13246487
> 
> 赞同：0
> 
> 时间：2012-11-06T07:38:32.080
> 
> 标签：java, selenium

我在回归测试脚本中使用了 Java 和 Selenium Webdriver。我选择了一个 FirefoxDriver 对象来执行测试活动。问题如下：当脚本打开的窗口失焦时（例如，如果我手动切换到另一个程序），找不到动态生成的菜单项。这是代码：

```
WebElement locationField = wd.findElement(By.xpath("//input[@id='service_location']"));
locationField.click();
wd.manage().timeouts().implicitlyWait(2, TimeUnit.SECONDS);

List<WebElement> countriesList = wd.findElements(By.xpath("//ul[@id='ui-id-1']/li/a"));
int randomCountryInt = (int) (Math.random() * countriesList.size());
WebElement country = countriesList.get(randomCountryInt); //IndexOutOfBoundsException exception is thrown
country.click(); 
```

通过单击“locationField”字段生成菜单（我的脚本中的“countriesList”）。如果我不最小化打开的窗口或不切换到另一个程序，则脚本运行成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T09:27:49.407

单击位置字段按钮后使用切换到窗口功能。

```
driver.switchTo().window("WindowName"); 
```

# android - 在 ffmpeg 中使用 build_libstagefright 为 android 构建文件 .so

> ID：13246489
> 
> 赞同：0
> 
> 时间：2012-11-06T07:38:56.610
> 
> 标签：android, windows-7, android-ndk, ffmpeg, cygwin

为了在 android 中使用 ffmpeg，我尝试使用 build_libstagefright 来构建 ffmpeg

ffmpeg/工具/lib_stagefright

但它总是出现一个我无法解决的错误。

ffmpeg/config.log 底部的消息是

arm-linux-androideabi-g++ -D_ISOC99_SOURCE -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -D_POSIX_C_SOURCE=200112 -D_XOPEN_SOURCE=600 -DPIC -I../android-source/frameworks/base/include -I../android-source/system/核心/包含 -I../android-source/frameworks/base/media/libstagefright -I../android-source/frameworks/base/include/media/stagefright/openmax -I/home/user/android-ndk/来源/cxx-stl/gnu-libstdc++/include -I/home/user/android-ndk/sources/cxx-stl/gnu-libstdc++/libs/armeabi-v7a/include -march=armv7-a -mfloat-abi= softfp -mfpu=neon -march=armv7-a -std=c99 -fomit-frame-pointer -fPIC -marm -Wno-multichar -fno-exceptions -fno-rtti -D__STDC_CONSTANT_MACROS -c -o /tmp/ffconf.6ZzEMs87。 o /tmp/ffconf.5jbfvJxK.cpp

./configure: line 701: /home/user/android-ndk/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-g++: 无法执行二进制文件

错误：找不到 libstagefright_h264

有人有这个解决方案吗？？

我的构建环境是

1.  窗口 7
2.  赛格温
3.  android-NDK-r8b linux版本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:43:21.293

看一下`ffmpeg/config.log`- 最后一行必须有错误描述。

PS。在 Windows 上，我使用 MinGW|MSYS 成功编译了 ffmpeg

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T03:04:03.833

我找到了一个方法，让我越过这个错误。

在 ffmpeg/configure 文件中

起源 ：

> > 启用 libstagefright_h264 && require_cpp libstagefright_h264 "binder/ProcessState.h media/stagefright/MetaData.h

固定的 ：

> > 启用 libstagefright && require_cpp libstagefright_h264 "binder/ProcessState.h media/stagefright/MetaData.h

当我在这里将 libstagefright_h264 修复为 libstagefright 时，在出现下一个错误之前似乎是正常的。

```
CC      libavcodec/lagarithrac.o
CC      libavcodec/latm_parser.o
CXX     libavcodec/libstagefright.o
/bin/sh: /home/user/android-ndk/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux- x86/bin/arm-linux-androideabi-g++: cannot execute binary file
CC      libavcodec/lcldec.o
common.mak:51: recipe for target `libavcodec/libstagefright.o' failed
make: *** [libavcodec/libstagefright.o] Error 126
make: *** Waiting for unfinished jobs.... 
```

PS：ffmpeg版本是1.0

# c# - 互操作服务与正常编码

> ID：13246492
> 
> 赞同：1
> 
> 时间：2012-11-06T07:39:21.383
> 
> 标签：c#, .net, winforms, c#-4.0

我正在尝试制作一个可以调整大小和拖动的无边界表单。
好吧，我有两个教程可以这样做[**link1**](http://www.codeproject.com/Articles/11114/Move-window-form-without-Titlebar-in-C)和[**link2**](http://www.codeproject.com/Articles/13571/Draggable-Form-Drag-a-Borderless-Form-by-Clicking)（以及更多）。
第一个链接`System.Runtime.InteropServices`用小代码简单引用，
第二个链接是调用事件，如`MouseUp`,`MouseDown`和`MouseMove`大代码。

我尝试了对我来说可以的两个代码。由于我不擅长 C#，因此我无法根据性能确定哪个好。请建议我应该去哪个..

就个人而言，我怀疑使用 Interopservices（因为我对此一无所知）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T08:05:34.237

link1 中的代码使用 Windows 原生的库，并且不适用于其他平台。它甚至可能不适用于未来版本的 Windows。

但是由于操作系统控制了您的表单，因此使用托管解决方案需要更多的代码来执行相同的操作，正如您在链接 2 中看到的那样。

在这两种情况下，您都可以以基本形式实现解决方案并从中继承。性能方面，link1 会更快，因为它不处理`MouseMove`事件。但我不知道你是否会*注意到*性能差异。

# javascript - jquery根据复选框启用禁用链接

> ID：13246499
> 
> 赞同：-1
> 
> 时间：2012-11-06T07:39:14.477
> 
> 标签：javascript, jquery, jquery-ui

我需要根据选中的复选框禁用/启用“a.href”链接。我有一个复选框列表（2 列）。When at least one checkbox in a column "install" is checked, "Install" link should be enabled, otherwise disabled. 当在“删除”列中至少选中一个复选框时，应启用具有相同类名的链接，否则禁用。

我已经尝试过了，但不确定这是否正确，它不起作用：

```
function refleshCheckboxes() {
    if ($("input:checked").length > 0) {
        $("input:checked").each(function(index, e) {
            var css = $(e).attr('class').split(' ').slice(-1);
            $("div.markActions a").each(function (index, e) {
                $(e).removeClass("disablelink").hasClass(css);
            });

        });
    }
    else {
        $("div.markActions a").addClass("disablelink");
    }
} 
```

$("div.markActions a") - 这是 a.href 链接所在的位置（在此 div 内）

复选框与 a.href 链接具有相同的类名。所以我想获取复选框的类名并将该类与 a.href 链接的类匹配。

复选框：

```
<input type="checkbox" value="2" class="checkbox install"> 
```

关联：

```
<a class="iconDiskPlus install disablelink" href="#">Install</a> 
```

![在此处输入图像描述](../Images/e6f5009ce0106d1193552be37dd25b95.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:56:54.390

我想到了：

```
function refleshCheckboxes() {
    if ($("input.checkbox:checked").length > 0) {
        var arr = new Array(".install", ".uninstalled", ".enabled", ".disabled", ".download", ".remove");
        for (i = 0; i < arr.length; i++) {
            if ($("input.checkbox:checked").is(arr[i])) {
                $(".markActions a" + arr[i]).removeClass("disablelink");
            } else {
                $(".markActions a" + arr[i]).addClass("disablelink");
            }
        };
    }
    else {
        $("div.markActions a").addClass("disablelink");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:10:02.313

试试下面的一个。

​</p>

```
$(function(){

    $('input.install').click(function(){ 

        var install_link =  $('a.install');
        if($('input.install:checked').length !=0){
        install_link.addClass('enablelink').text('install enabled');
        }
        else{
        install_link.addClass('disablelink').text('install disabled');                

        }                     
});         
});​ 
```

查看 js fiddle 进行[演示](http://jsfiddle.net/gchoken/8sPad/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T08:11:14.667

您可以将 onclick 事件设置为这样的复选框：

```
<input id="someId" type="checkbox" value="2" class="checkbox install" onclick="myFunction()"> 
```

在你的 js 文件中定义一个函数：

```
function myFunction(){
    var checkBox = document.getElementById("someId");
    if(checkBox.checked == true){
        //you have to give an id attribute to the object
        // which you want to hide
        var hideIt = document.getElementById("id");
        hideIt.style.visibility = "none";
    }
} 
```

# javascript - 取消 stringByEvaluatingJavaScriptFromString

> ID：13246504
> 
> 赞同：1
> 
> 时间：2012-11-06T07:40:06.963
> 
> 标签：javascript, objective-c, ios

我有使用 stringByEvaluatingJavaScriptFromString 调用的 JS，运行大约需要 9 秒，但如果用户需要，我希望能够立即取消它。

然而，似乎整个线程都被这个阻塞了。

我准备做任何事情来允许用户取消它（例如删除 UIWebView ），但似乎没有任何效果，因为应用程序在继续之前等待 stringByEvaluatingJavaScriptFromString 返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:28:36.080

不知道怎么取消。为了改进 UI，从这个[UIWebView stringByEvaluatingJavaScriptFromString in background](https://stackoverflow.com/questions/9196620/uiwebview-stringbyevaluatingjavascriptfromstring-in-background)，

尝试将您的 JavaScript 拆分为离散的执行块，并使用 JavaScript 计时器将它们流水线化，如下所示（JS 代码，而不是 Obj-C）：

```
var i = 0;
var operation = function() {

    switch (i) {
    case 0:
       //do first part of code
       break;
    case 1:
       //do second part of code
       break;
    case 2:
       //do third part of code
       break;
    etc...
    }

    //prepare to execute next block
    i++;
    if (i < TOTAL_PARTS) {
        setTimeout(operation, 0);
    }
};
operation(); 
```

这将防止您的脚本在执行时阻止用户交互。

有关更多详细信息，请检查该线程[UIWebView stringByEvaluatingJavaScriptFromString in background](https://stackoverflow.com/questions/9196620/uiwebview-stringbyevaluatingjavascriptfromstring-in-background)。

# sql-server - 提高 SQL Server 查询性能

> ID：13246511
> 
> 赞同：1
> 
> 时间：2012-11-06T07:41:23.513
> 
> 标签：sql-server, tsql

我编写了一个查询，在该查询中创建了一个字符串并根据条件从表中获取不同的值。

该表有大约 5000 行。此查询需要将近 20 秒才能执行。

我相信字符串比较使查询变得如此缓慢。但我想知道我的替代方案是什么。

**询问：**

```
select distinct
   Convert(nvarchar, p1.trafficSerial) +' ('+  p1.sourceTraffic + ' - ' + p1.sinkTraffic + ' )' as traffic
from 
   portList as p1
inner join 
   portList as p2 ON p1.pmId = p2.sinkId
                  AND P1.trafficSerial IS NOT NULL 
                  AND (p1.trafficSerial = p2.trafficSerial) 
                  AND (P1.sourceTraffic = P2.sourceTraffic) 
                  AND (P1.sinkTraffic = P2.sinkTraffic)
where 
   p1.siteCodeID = @SiteId 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T08:11:21.783

一种选择是创建一个计算列并在其上创建一个索引

本文讨论它[http://blog.sqlauthority.com/2010/08/22/sql-server-computed-columns-index-and-performance/](http://blog.sqlauthority.com/2010/08/22/sql-server-computed-columns-index-and-performance/)

```
ALTER TABLE dbo.portList ADD
traffic AS Convert(nvarchar,trafficSerial) +' ('+  sourceTraffic + ' - ' + sinkTraffic + ' )' PERSISTED
GO

CREATE NONCLUSTERED INDEX IX_portList_traffic
ON dbo.portList  (traffic)
GO

select distinct traffic from dbo.portList 
```

您还应该确保连接关系中的每一列都有索引：

```
p1.trafficSerial & p2.trafficSerial
P1.sourceTraffic & P2.sourceTraffic
P1.sinkTraffic & P2.sinkTraffic 
```

和过滤器的列：`p1.siteCodeID`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:16:09.500

这肯定有帮助：

1.  如果您可以从您的 select 语句中删除 distinct，则此查询将加速很多。很多时候，我通过系统的客户端或 Web 部分处理不同的值，例如 Visual Basic、php、c# 等。请删除不同的关键字，并在执行至少两次后再次查询。但是，如果您无法删除 distinct 则只需将其留在那里。

2.  这很重要：将聚集索引扫描转换为聚集索引查找或仅索引查找。这将大大加快您的查询速度。您通过修改索引从索引扫描中获取索引查找。通常，聚集索引扫描来自与聚集索引的列的比较，聚集索引很多时候是主键。我怀疑这个专栏是 portside.sitecodeid

最好的祝福，

通西科尔萨诺

# android - 如何在 android 的 List Header 中的图像视图中设置图像？

> ID：13246519
> 
> 赞同：0
> 
> 时间：2012-11-06T07:42:16.970
> 
> 标签：android, list, imageview

我试图创建一个应用程序来解析 JSON 数据并生成缩略图和列表视图。与 TED 应用程序非常相似的东西，请看下面的截图：

[https://lh6.ggpht.com/52KEhYtmJE-IV7yfMyAF9JZ1K4nTZGsZ-KM1eQG4-yMmlTqv-KaL7b1JE7I2W3wNVw](https://lh6.ggpht.com/52KEhYtmJE-IV7yfMyAF9JZ1K4nTZGsZ-KM1eQG4-yMmlTqv-KaL7b1JE7I2W3wNVw)

我能够使用以下方法成功地将标题添加到我的列表视图中：

```
View header = getLayoutInflater().inflate(R.layout.header, null);

list.addHeaderView(header);

list.setAdapter(adapter); 
```

布局文件夹中的标头 xml 文件包含一个 ImageView，我找到了使用的 id

```
iv=(ImageView) findViewById(R.id.ivback); 
```

但是我的问题是，每当我尝试将其设置为任何图像时，都会出现空指针异常，记录它表明 iv 为空。

知道为什么 iv 是 null 吗？由于 iv 为 null ， iv.setImage() 方法不起作用。

提前致谢

我还确认我传递的图像链接不为空

那么如何将图像设置为我已作为标题添加到列表中的图像视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:44:33.113

它为空，因为您应该从标题视图而不是活动视图中获取图像视图。它应该像：

```
iv=(ImageView) header.findViewById(R.id.ivback); 
```

# api - 使用 Google Maps API 在 InfoWindow 中放置自定义控件

> ID：13246521
> 
> 赞同：2
> 
> 时间：2012-11-06T07:42:29.757
> 
> 标签：api, google-maps, controls, infowindow

是否可以使用 Google Maps API 在 InfoWindow 中放置一组自定义控件？如果是这样，怎么办？我试过了，但找不到在 InfoWindow 的“内容”字段中编写 API 代码的方法。

# string - 如何从 ListBox 中检索所选项目并将其转换为字符串？

> ID：13246522
> 
> 赞同：0
> 
> 时间：2012-11-06T07:42:11.547
> 
> 标签：string, listbox

我试过

```
if( ListBox.SelectedItem.ToString().Equals("test")
{
    //do something
} 
```

和

```
if( ListBox.SelectedValue.ToString().Equals("test")
{
    //do something
} 
```

他们都没有将选定的值或项目放入字符串

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:58:06.293

如果那是您的代码的实际外观，则存在错误。您应该在 if 语句的末尾添加一个大括号。

如果不是，我在那里看不到任何错误。但请注意，如果您使用 SelectedItem.toString()。那没有给你价值。这将返回对象值。例如，它将为您提供类似“System.Data.DataRowView”的内容。所以这个条件永远不会实现。

这就是我从您的代码中看到的全部内容。

# java - 使用 Java 进行文件拆分的问题

> ID：13246528
> 
> 赞同：0
> 
> 时间：2012-11-06T07:42:50.903
> 
> 标签：java, java-io

使用 java 将文件拆分为不同的字节数组时，文件的应用程序不会呈现文件。即使原始文件和重新加入文件的字节数相同，也会发生这种情况。

此处的目标是将一个大文件拆分为不同的字节数组，并通过网络使用不同的编程语言 (C#) 重新加入这些字节数组。

我为拆分编写的代码如下：

```
File f = new File(fileLoc);
FileInputStream fi = new FileInputStream(f);
int size = fi.available();

int MB2 = 1048576 * 2;
int total = size / MB2;
if (size % MB2 != 0) {
    total += 1;
}
int ch;

while (size > 0) {
    int arraysize;
    if (size < MB2) {
        arraysize = size;
    } else
        arraysize = MB2;
    byte bytes_read[] = new byte[arraysize];
    ch = fi.read(bytes_read, 0, arraysize);
    // The byte_read is added to an array list of byte[]
    // and send along with certain other parameters 
    size = size - ch;
    count++;
}
fi.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T07:57:35.160

你有两个问题：

*   您正在`available()`用作了解文件长度的一种方式。这不是该方法的作用。available() 几乎不应该被使用。我从未见过任何使用它是个好主意的用例。
*   您正在使用该`read()`方法并忽略其返回值。您使用它来 dcrment 大小变量，但您不在乎字节数组是用读取字节填充还是用零填充。`read()`不能保证读取与您要求的一样多的字节。

字节通过线路发送并被另一端读取的方式可能存在其他错误。

# java - 使用 POST 发送 JSON 对象时的 HTTP 415

> ID：13246529
> 
> 赞同：20
> 
> 时间：2012-11-06T07:42:55.787
> 
> 标签：java, json, post

```
import java.io.BufferedReader;    
import java.io.InputStreamReader;    
import java.net.HttpURLConnection;    
import java.net.URL;    
import java.io.DataOutputStream;        
import java.io.InputStream;

public class TestingPost {

 public static void main(String args[]) {

    URL url;
    HttpURLConnection connection = null;  
    String targetURL=".....";//here is my local server url
    String urlParameters="{\"clubhash\":\"100457d41b9-ab22-4825-9393-ac7f6e8ff961\",\"username\":\"anonymous\",\"message\":\"simply awesome\",\"timestamp\":\"2012/11/05 13:00:00\"}";

    try {
      //Create connection
      url = new URL(targetURL);
      connection = (HttpURLConnection)url.openConnection();
      connection.setRequestMethod("POST");
      connection.setRequestProperty("Content-Type", 
           "application/x-www-form-urlencoded");

      connection.setRequestProperty("Content-Length", "" + 
               Integer.toString(urlParameters.getBytes().length));
      connection.setRequestProperty("Content-Language", "en-US");  

      connection.setUseCaches (false);
      connection.setDoInput(true);
      connection.setDoOutput(true);

      //Send request
      DataOutputStream wr = new DataOutputStream (
                  connection.getOutputStream ());
      wr.writeBytes (urlParameters);
      wr.flush ();
      wr.close ();

      //Get Response    
      InputStream is = connection.getInputStream();
      BufferedReader rd = new BufferedReader(new InputStreamReader(is));
      String line;
      StringBuffer response = new StringBuffer(); 
      while((line = rd.readLine()) != null) {
        response.append(line);
        response.append('\r');
      }
      rd.close();
      System.out.println("message="+response.toString());

    } catch (Exception e) {

      e.printStackTrace();

    } finally {

      if(connection != null) {
        connection.disconnect(); 
      }
    }
  }

} 
```

我正在尝试使用 HTTP POST 方法发送 JSON 对象。以上是代码，但我得到

```
java.io.IOException: Server returned HTTP response code: 415 for URL: ....
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
at TestingPost.main(TestingPost.java:38)" 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-06T07:48:34.930

你得到的 HTTP 响应代码是

```
415 Unsupported Media Type 
```

这意味着服务器无法处理您发送给它的格式。您的 HTTP 请求设置此标头：

```
Content-Type: application/x-www-form-urlencoded 
```

这是提交表单时浏览器发送的内容类型。如果要发送 JSON，请使用此标头：

```
Content-Type: application/json 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-05T20:20:15.750

我正确地通过了

```
Content-Type: application/json 
```

但是我的服务器仍然拒绝请求，因为我也通过了

```
Accept: application/json 
```

在我的情况下这是不允许的。

# php - 带有 php 的 crontab 不起作用

> ID：13246533
> 
> 赞同：0
> 
> 时间：2012-11-06T07:43:21.743
> 
> 标签：php, crontab, freebsd, postfix-mta

我的情况是我有一个 php 文件`/root/test.php`。我像这样设置我的root的crontab

`* * * * * /usr/local/bin/php /root/test.php`

test.php 的内容用于为 postfix 生成别名数据库，如下所示：

`<?php echo shell_exec("postaliases hash:/etc/aliases"); >`

我知道 test.php 由 crontab 成功运行。但是里面的 shell_exec 似乎不起作用（我在 /etc/ 下找不到我的目标 aliases.db 文件）。我已经测试过`php -f test.php`直接使用推荐是有效的。

我知道情况有点复杂。但是，如果有人可以解决我的问题，我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:12:38.593

1.  使用 postaliases 的完整路径。很可能它不在执行脚本的用户的路径中

2.  为什么要使用 php 脚本来调用 shell？只需使用 shellscript

# ios - 如何打开核心数据模型创建的sqlite文件查看条目

> ID：13246535
> 
> 赞同：1
> 
> 时间：2012-11-06T07:43:31.087
> 
> 标签：ios, core-data

该文件位于 /Users/anand/Library/Application Support/iPhone Simulator/6.1/Applications/66751FC8-AC4E-4D62-93F1-DAAB2F3D67BF/Documents

但我无法在 finder 中导航到此路径，因为 Library 文件夹未出现在 /Users/anand 列表下。

我可以在终端中列出它，但是我如何打开 sqlite 文件来查看存储的条目。

请注意我想使用可视化工具而不是命令行 sqlite3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T07:48:21.417

您可以通过按`cmd + shift + G`Finder 并输入路径来导航到该文件夹​​。或者您可以使用`open <path>`终端命令。

Mac 有几个可视化的 SQLite 客户端。有关详细信息，请参阅此问题：[Mac SQLite 编辑器](https://stackoverflow.com/questions/100959/mac-sqlite-editor)。我个人最喜欢的是[SQLIteManager](https://itunes.apple.com/us/app/sqlitemanager/id412443832?mt=12)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T07:48:50.067

如果您在查找器中，请单击`Go`，然后按住`alt`键和库将出现

我使用[Sqlite 浏览器](http://sourceforge.net/projects/sqlitebrowser/)

# c++ - 内部类声明

> ID：13246537
> 
> 赞同：2
> 
> 时间：2012-11-06T07:43:33.400
> 
> 标签：c++, class-design

> **可能重复：**
> [使用嵌套 C++ 类和枚举的优缺点？](https://stackoverflow.com/questions/216748/pros-and-cons-of-using-nested-c-classes-and-enumerations)

考虑以下声明。

```
class A {
    public:
    class B{
    };
}; 
```

没什么特别的。

*   但是这样做有什么好处呢？
*   将一个类放在另一个类中可能有什么原因？
*   两个类之间没有继承优势。
*   如果将 B 放在 A 内部是为了共享其私有名称，那么 A 对于 B 来说只是一个命名空间，并且有理由将 B 设为私有。

你怎么看待这件事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T07:50:05.893

从概念上讲，它让程序员知道 B 类与 A 类特别相关。当您在 A 类之外使用 B 类时，您必须使用 A::B 类型，这每次都会提醒您 B 是与 A 相关。这不会添加任何功能，但显示了关系。

同样，您根本不必使用继承/组合或类。您可以或多或少地通过使用结构和函数来模拟 C 中的类。这只是一种让代码更简洁、更直接的方法，让程序员更容易将代码与设计联系起来。类比公共子类更能做到这一点，但这只是一个例子。

如果它是一个私有/受保护的子类（我认为它不在您的示例中），那么这显然将该类限制为该类和该类的子类的实现，如果唯一的该类的用例在该类（可能还有它的子类）的实现中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T08:18:39.613

**好处 1：命名空间方面**

事实上，`A`为 提供了一个命名空间`B`，这可以帮助我们更好地构建我们的代码。考虑一个带有`vector`for`A`和`iterator`for的具体示例`B`。可以说，

```
class vector {
public:
  class iterator { /*...*/ };

  iterator begin() { /*...*/ }
}; 
```

比打字、阅读和理解更容易

```
class vector_iterator {
  /*...*/
};

class vector {
public:
  vector_iterator begin() { /*...*/ }
}; 
```

特别注意：

1.  当两个类 (`vector`和`iterator`) 相互依赖时，即使用彼此的成员，上面的第二个版本将需要前向声明这两个类中的一个，并且在某些情况下，相互的类型依赖可能会导致无法解决的情况。（使用嵌套类，避免此类问题要容易得多，因为在嵌套类定义的大部分部分中，外部类被认为是*完全定义的*。这是由于 §9.2/2。）

2.  您很可能拥有许多其他数据类型来维护自己的数据类型`iterator`，例如`linked_list`. 使用上面的第二个版本，您需要定义`linked_list_iterator`为一个单独的类。您添加的这些“依赖”类型和替代类型越多，类名称就会变得越长越复杂。

**好处 2：模板**

继续上面的例子，现在考虑一个函数模板，它接受一个容器（例如上面定义的）作为参数`vector`并`linked_list`迭代它们：

```
template <typename Container>
void iterate(const Container &container) {
  /*...*/
} 
```

在这个函数中，你显然非常喜欢使用迭代器类型`Container`. 如果那是嵌套类型，那很容易：

```
typename Container::iterator 
```

但如果不是，则必须将迭代器类型作为单独的模板参数：

```
template <typename Container, typename Iterator>
void iterate(const Container &container) {
  /*...*/
  Iterator it = container.begin();
  /*...*/
} 
```

如果该迭代器类型没有出现在函数参数中，编译器甚至无法猜测类型。每次调用该`iterate`函数时，都必须将其显式添加到尖括号中。

**最后说明：**这些都与嵌套类是声明为公共还是私有无关。我上面的例子表明公共嵌套类型显然更可取，因为我认为该`iterator`类型应该能够在容器类之外使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T07:53:24.087

*将一个类放在另一个类中的原因可能是什么？*

*   如果您需要将 B 的范围限制为仅适用于 A，那么内部类定义会有所帮助。因为它将类范围限制为本地。这是调用范围本地化。这些在更通用的术语中称为`inner class declaration`。检查此[链接](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=/com.ibm.xlcpp8a.doc/language/ref/cplr061.htm)。
*   这个 stackoverflow[问题](https://stackoverflow.com/questions/216748/pros-and-cons-of-using-nested-c-classes-and-enumerations)可以帮助您了解更多。

# jsf - JSF 在数据表上显示数据库记录

> ID：13246538
> 
> 赞同：1
> 
> 时间：2012-11-06T07:43:46.787
> 
> 标签：jsf

我已经在这里搜索了一个小时，不幸的是我无法将数据库记录显示到数据表中，我是 JSF 的新手，我现在对 JSF 不太了解，但我正在构建一个简单的 crud 应用程序我已经知道如何使用 JSF 创建、删除记录，但我在将这些记录显示到我的数据表时遇到了问题。我尝试创建arraylist，我尝试为此创建另一个类，为了更清楚，这里是我的代码：

这是我的 index.jsf：

```
<?xml version='1.0' encoding='windows-1252'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<f:view xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html">
    <html xmlns="http://www.w3.org/1999/xhtml">
        <h:head></h:head>
        <h:body>
            Username: 
            <h:outputText value="#{ backing_index.userName }" id="Username">
                <p>
                    &nbsp;
                </p>
                <p>
                    &nbsp;
                </p>
                <p>
                    &nbsp;
                </p>
            </h:outputText>
            <p>
                RoleI.D: 
                <h:outputText value="#{backing_index.roleId}" id="RoleID"/>
            </p>
            Role Description: 
            <h:outputText  value="#{backing_index.roleDesc}" id="Description"/>

            <h:dataTable value="#{ backing_index.tableRs }" var="user" rules="rows" cellpadding="7">
                <f:facet name="header"></f:facet>
                <f:facet name="footer"></f:facet>

                <h:column>
                    <f:facet name="header">ID</f:facet>
                    #{ user.tableId }
                </h:column>

                <h:column>
                    <f:facet name="header">First Name</f:facet>
                     #{ user.tableFirstName }
                </h:column>

                <h:column>
                    <f:facet name="header">Middle Name</f:facet>
                     #{ user.tableMiddleName }
                </h:column>

                <h:column>
                    <f:facet name="header">Last Name</f:facet>
                     #{ user.tableLastName }
                </h:column>

                <h:column>
                    <f:facet name="header">Delete</f:facet>
                    <h:commandButton action="#{ backing_index.deleteAction }" value="Remove this">
                        <f:param value="Remove" name="delete" />
                    </h:commandButton>
                </h:column>

            </h:dataTable>
        </h:body>
    </html>
    <!--oracle-jdev-comment:auto-binding-backing-bean-name:backing_index-->
</f:view> 
```

这是我的 bean 代码：

```
package view.backing;

import javax.faces.component.html.HtmlOutputText;
import javax.faces.bean.*;
import javax.faces.context.*;
import javax.annotation.*;
import javax.faces.*;
import java.sql.*;
import java.util.*;

@RequestScoped

public class Index {

private Connection con;
private ResultSet rs;

private String userName;
private String roleId;
private String roleDesc;

//Variable of Data Table
private TableUser[] tableRs;
//End of Variable

//Start of getter and setter for Data table

public void setTableRs(Index.TableUser[] tableRs) {
    this.tableRs = tableRs;
}

public Index.TableUser[] getTableRs() {
    return tableRs;
}

//End of getter and setter

public void setUserName(String userName) {
    this.userName = userName;
}

public String getUserName() {
    return userName;
}

public void setRoleId(String roleId) {
    this.roleId = roleId;
}

public String getRoleId() {
    return roleId;
}

public void setRoleDesc(String roleDesc) {
    this.roleDesc = roleDesc;
}

public String getRoleDesc() {
    return roleDesc;
}

@PostConstruct
public void init()throws SQLException, ClassNotFoundException{

    Class.forName("oracle.jdbc.driver.OracleDriver");
    con = DriverManager.getConnection("jdbc:oracle:thin:@localhost/XE", "JEROME", "perbert101");
    displayUserInfo();
    displayTableRecords();
}

private void displayUserInfo()throws SQLException{
    FacesContext context = FacesContext.getCurrentInstance();
    userName = (String)context.getExternalContext().getSessionMap().get("userName");
    roleId = (String)context.getExternalContext().getSessionMap().get("roleId");

    Statement state = con.createStatement();
    state.executeQuery("SELECT * FROM ROLES WHERE ID = 2");
    rs = state.getResultSet();
    while(rs.next()){
        roleDesc = rs.getString(3);
    }

}

private void displayTableRecords()throws SQLException{
    String query = "SELECT * FROM USERS";
    PreparedStatement state = con.prepareStatement(query);
    state.execute();
    rs = state.getResultSet();
    while(rs.next()){
        tableRs = new TableUser[]{new TableUser(rs.getLong(1), rs.getString(2), rs.getString(7), rs.getString(5))};

    }

}

//Table Records Store
public static class TableUser{
    long tableId;
    String tableFirstName;
    String tableMiddleName;
    String tableLastName;

    public TableUser(long tableId, String tableFirstName, String tableMiddleName, String tableLastName){
        this.tableId = tableId;
        this.tableFirstName = tableFirstName;
        this.tableMiddleName = tableMiddleName;
        this.tableLastName = tableLastName;
    }

    public void setTableId(long tableId) {
        this.tableId = tableId;
    }

    public long getTableId() {
        return tableId;
    }

    public void setTableFirstName(String tableFirstName) {
        this.tableFirstName = tableFirstName;
    }

    public String getTableFirstName() {
        return tableFirstName;
    }

    public void setTableMiddleName(String tableMiddleName) {
        this.tableMiddleName = tableMiddleName;
    }

    public String getTableMiddleName() {
        return tableMiddleName;
    }

    public void setTableLastName(String tableLastName) {
        this.tableLastName = tableLastName;
    }

    public String getTableLastName() {
        return tableLastName;
    }
}

} 
```

我没有任何错误或其他东西，它只显示数据库中的最后一条记录。伙计们，如果你知道最简单的方法，你能教我怎么做，我总是追求一个干净、简短的代码。非常感谢您的帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T08:13:02.260

您的 displayTableRecords() 方法中有一个错误。在 while 循环中，您为每次迭代实例化新的 TableUser 数组。实际上，您应该做的是将 TableUser 对象一一添加到现有数组中。

使用 ArrayList inseadof 数组。

```
private List<TableUser> tableRs = new ArrayList<TableUser>();

public List<TableUser> getTableRs() {
    return tableRs;
}

public void setTableRs(List<TableUser> tableRs) {
    this.tableRs = tableRs;
}

private void displayTableRecords() {
    String query = "SELECT * FROM USERS";
    PreparedStatement state = con.prepareStatement(query);
    state.execute();
    rs = state.getResultSet();
    while (rs.next()) {

        tableRs.add(new TableUser(rs.getLong(1),
                rs.getString(2), rs.getString(7), rs.getString(5)));

    }
} 
```

# xss - HTML 和属性编码

> ID：13246540
> 
> 赞同：11
> 
> 时间：2012-11-06T07:39:36.227
> 
> 标签：xss, encoding, html

我[在 Meta SO 上](https://meta.stackexchange.com/questions/104230/attack-of-the-double-encoded-hellip-part-n)看到了一篇文章，我很好奇未编码和编码的 HTML 字符之间的细微差别，**在 HTML 属性**中，在以下环境中：安全性、最佳实践和浏览器支持。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-06T08:08:27.537

HTML 编码将在 HTML 标记中具有语义意义的某些字符替换为可以显示给用户而不影响解析标记的等效字符。

最重要和最明显的字符是 <、>、& 和 "，它们分别被替换为`&lt;`、`&gt;`、`&amp;`和`&quot;`。此外，编码器可以用等效的 HTML 实体编码替换高位字符，因此可以保留内容并即使页面以 ASCII 格式发送到浏览器，也能正确呈现。

另一方面，HTML 属性编码仅替换那些对防止字符串破坏 HTML 元素的属性很重要的字符的子集。具体来说，您通常只需将 "、& 和 < 替换为`&quot;`、`&amp;`和`&lt;`。这是因为属性的性质、它们包含的数据以及它们如何被浏览器或 HTML 解析器解析和解释的方式与读取 HTML 文档及其元素。

* * *

就这与 XSS 的关系而言，您希望正确清理来自外部源（例如用户）的字符串，以便它们不会破坏您的页面，或者更重要的是，注入可以改变或破坏您的应用程序的标记和脚本或影响用户的机器（通过利用浏览器或平台漏洞）。

如果您想在页面中显示用户生成的内容，您需要对字符串进行 HTML 编码，然后将其显示在您的标记中，他们输入的所有内容都将按字面显示，而无需担心 XSS 或损坏的标记。

如果您需要将用户生成的内容附加到属性中的元素（例如，`tooltip`链接上的 a），您需要进行属性编码以确保内容不会破坏元素的标记。

您可以使用相同的 HTML 编码函数来处理属性编码吗？从技术上讲，是的。在您链接的元问题的情况下，听起来他们正在获取经过编码和解码的 HTML，然后使用该结果作为属性值，如果您遵循的话，这会导致编码标记按字面意思显示。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-11-19T18:29:11.037

我建议查看[OWASP XSS 预防规则 1 和 2](https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet#RULE_.231_-_HTML_Escape_Before_Inserting_Untrusted_Data_into_HTML_Element_Content)。
一个简短的总结...

**HTML**规则****1****

 **> 使用 HTML 实体编码转义以下字符 ...
> `&`--> `&amp;`
> `<`--> `&lt;`
> `>`--> `&gt;`
> `"`--> `&quot;`
> `'`--> `&#x27;`
> `/`-->`&#x2F;`

****HTML 通用属性**规则**2****

 ****> 除字母数字字符外，使用 &#xHH; 转义所有 ASCII 值小于 256 的字符。格式（或命名实体，如果可用）以防止切换出属性。这条规则如此广泛的原因是开发人员经常不引用属性。正确引用的属性只能使用相应的引号进行转义。不带引号的属性可以用许多字符分开，包括 [space] % * + , - / ; < = > ^ 和 |。******

# java - Eclipse 没有正确复制上下文

> ID：13246541
> 
> 赞同：1
> 
> 时间：2012-11-06T07:44:13.770
> 
> 标签：java, eclipse, jakarta-ee, deployment, tomcat6

**Eclipse 版本：**（Java EE）：3.7 Indigo，32 位
**Tomcat 版本：** 6.0
**操作系统：** Windows 7 64 位 SP1

**问题：**我在 Eclipse 中创建了一个动态 web 应用程序 xyz。在正确集成 Eclipse 和 Tomcat 后，我​​将 xyz 添加到本地服务器实例，并在 server.xml（在 Eclipse 服务器项目中）编辑 xyz 的上下文条目以包含 jdbc 资源引用。

**`server.xml (in Eclipse. Username, pwd, ip etc. below are altered)`**

```
<Context docBase="xyz" path="/xyz" reloadable="true" source="org.eclipse.jst.j2ee.server:xyz">
      <Resource auth="Container" 
                driverClassName="oracle.jdbc.driver.OracleDriver" 
                factory="org.apache.commons.dbcp.BasicDataSourceFactory"
                maxActive="100"
                maxIdle="30"
                name="jdbc/xyz"
                username="123"
                password="123"
                type="javax.sql.DataSource"
                url="jdbc:oracle:thin:@1.1.1.1:sid" />
</Context> 
```

但是，当 Eclipse将此 server.xml 文件**发布**到热部署文件夹（在 Windows 中，位于 .metadata ... > tmp0 > conf）时，Eclipse会完全**忽略**Resource 引用。部署的 server.xml 文件如下所示：

```
<Context
    docBase="C:\ws\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\xyz"
    path="/xyz"
    reloadable="true"
    source="org.eclipse.jst.j2ee.server:xyz" /> 
```

为什么会这样？（有解决办法吗？）。换句话说，如何让 Eclipse使用我的资源引用部署**server.xml文件？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:47:36.527

您应该将 DataSource 条目放入`Context.xml`而不是`Server.xml`

从版本开始，不建议`<Context></context>`在 server.xml中使用。`6.0`

更新：解决*Sever.xml*不复制

参考此报价[来源](http://www.eclipse.org/forums/index.php/m/39249/)

> 您无需编辑临时目录中的副本。下次发布时，它将从主副本（当前在配置中）更新。
> 
> 既然您对 Tomcat 配置有足够的了解，那么还有一件事会有所帮助。在 Preferences > Server 下，选中在工作区中创建资源的复选框。然后删除现有的 Tomcat 服务器并创建另一个。这将在工作区而不是在 .metadata 目录中创建所有资源，因此您可以在工作区中的其他文件旁边编辑它们。

# android - 强制关闭以制作 AlertDialog 和 DialogInterface

> ID：13246542
> 
> 赞同：0
> 
> 时间：2012-11-06T07:44:15.987
> 
> 标签：android, dialog, onclick, android-alertdialog

这是我的代码：

```
 btnSendSMS.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            final String phoneNo = txtPhoneNo.getText().toString();

            final String message = '\u00AB' + "smsmks" + '\u00BB' + ' '
                    + txtMessage.getText().toString();
            if ((phoneNo.length() > 0) && (message.length() > 0)) {
                //pilihan, mengirim citra gambar atau tidak
                final CharSequence[] items = { "Text", "Image" };
                AlertDialog.Builder kk = new AlertDialog.Builder(getBaseContext());
                kk.setTitle("Pilih Metode Penginputan");
                kk.setItems(items, new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int x) {
                        Intent i = null;
                        if ("Text".equals(items[x])) {
                            sendSMS(phoneNo, message);
                            Toast.makeText(getBaseContext(), phoneNo,
                                    Toast.LENGTH_SHORT).show();

                        } else {
                            i = new Intent(TulisPesanLontara.this,
                                    KonversiGambar.class);
                            startActivity(i);
                        }
                    }
                }).show();  

            } else
                Toast.makeText(getBaseContext(),
                        "Please enter both phone number and message.",
                        Toast.LENGTH_SHORT).show();
        }
    } 
```

没有发现错误，但是如果我运行并单击项目，我会强制关闭。你能帮我吗？谢谢大家（抱歉英语不好）

这是我的日志猫

11-06 15:48:27.658: D/fastDelete(5657): ============= 结束处理删除事件 ================ ============ 11-06 15:48:28.307: I/fastDelete(5657): !!!fastDelete 阶段结束！！！11-06 15:48:30.371: D/AndroidRuntime(5657): 关闭 VM 11-06 15:48:30.371: W/dalvikvm(5657): threadid=1: 线程退出未捕获异常 (group=0x40020648) 11 -06 15:48:30.373：E/AndroidRuntime(5657)：致命异常：主要 11-06 15:48:30.373：E/AndroidRuntime(5657)：android.view.WindowManager$BadTokenException：无法添加窗口 -- 令牌null 不适用于应用程序 11-06 15:48:30.373: E/AndroidRuntime(5657): at android.view.ViewRoot.setView(ViewRoot.java:568) 11-06 15:48:30.373: E/AndroidRuntime( 5657): 在 android.view.WindowManagerImpl.addView(WindowManagerImpl.java:209) 11-06 15:48:30.373: E/AndroidRuntime(5657): 在 android.view。Looper.loop(SourceFile:351) 11-06 15:48:30.373: E/AndroidRuntime(5657): 在 android.app.ActivityThread.main(ActivityThread.java:3850) 11-06 15:48:30.373: E/ AndroidRuntime(5657): 在 java.lang.reflect.Method.invokeNative(Native Method) 11-06 15:48:30.373: E/AndroidRuntime(5657): 在 java.lang.reflect.Method.invoke(Method.java: 538) 11-06 15:48:30.373: E/AndroidRuntime(5657): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:901) 11-06 15:48:30.373: E/ AndroidRuntime(5657): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:659) 11-06 15:48:30.373: E/AndroidRuntime(5657): 在 dalvik.system.NativeStart.main(Native方法）11-06 15:48:37.789：I/Process(5657)：发送信号。PID：5657 SIG：9 main(ActivityThread.java:3850) 11-06 15:48:30.373: E/AndroidRuntime(5657): at java.lang.reflect.Method.invokeNative(Native Method) 11-06 15:48:30.373: E/AndroidRuntime (5657)：在 java.lang.reflect.Method.invoke(Method.java:538) 11-06 15:48:30.373：E/AndroidRuntime(5657)：在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller。运行（ZygoteInit.java:901）11-06 15:48:30.373：E/AndroidRuntime（5657）：在 com.android.internal.os.ZygoteInit.main（ZygoteInit.java:659）11-06 15:48： 30.373: E/AndroidRuntime(5657): at dalvik.system.NativeStart.main(Native Method) 11-06 15:48:37.789: I/Process(5657): 发送信号。PID：5657 SIG：9 main(ActivityThread.java:3850) 11-06 15:48:30.373: E/AndroidRuntime(5657): at java.lang.reflect.Method.invokeNative(Native Method) 11-06 15:48:30.373: E/AndroidRuntime (5657)：在 java.lang.reflect.Method.invoke(Method.java:538) 11-06 15:48:30.373：E/AndroidRuntime(5657)：在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller。运行（ZygoteInit.java:901）11-06 15:48:30.373：E/AndroidRuntime（5657）：在 com.android.internal.os.ZygoteInit.main（ZygoteInit.java:659）11-06 15:48： 30.373: E/AndroidRuntime(5657): at dalvik.system.NativeStart.main(Native Method) 11-06 15:48:37.789: I/Process(5657): 发送信号。PID：5657 SIG：9 调用（Method.java:538）11-06 15:48:30.373：E/AndroidRuntime（5657）：在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run（ZygoteInit.java:901）11-06 15： 48:30.373: E/AndroidRuntime(5657): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:659) 11-06 15:48:30.373: E/AndroidRuntime(5657): 在 dalvik.system .NativeStart.main(Native Method) 11-06 15:48:37.789: I/Process(5657): 发送信号。PID：5657 SIG：9 调用（Method.java:538）11-06 15:48:30.373：E/AndroidRuntime（5657）：在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run（ZygoteInit.java:901）11-06 15： 48:30.373: E/AndroidRuntime(5657): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:659) 11-06 15:48:30.373: E/AndroidRuntime(5657): 在 dalvik.system .NativeStart.main(Native Method) 11-06 15:48:37.789: I/Process(5657): 发送信号。PID：5657 SIG：9

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:02:03.873

只需在 getBaseContext 的位置传递整个应用程序使用 getApplicationContext() 的引用，因为 getBaseContext 只接受特定的活动引用..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T07:49:55.040

只需将 getBaseContext() 替换为 getApplicationContext() 或使用 ActivityName.this。

# django - i18n 在 heroku 的生产环境中不起作用

> ID：13246545
> 
> 赞同：8
> 
> 时间：2012-11-06T07:44:25.330
> 
> 标签：django, heroku, internationalization

我看过一百多篇关于 i18n 问题的帖子，但似乎没有解决方案可以解决我的问题。

我有一个使用 Django 1.3.1 运行的应用程序，它在我的开发机器上运行良好。但是当我带到**heroku**时，什么也没有发生。这些文件根本没有翻译。似乎找不到我项目中的语言环境文件夹。

语言环境文件夹在我的项目级别，这是我的设置：

```
BASE_PATH = os.path.dirname(os.path.abspath(__file__))

LANGUAGE_CODE = 'pt-br'

USE_I18N = True

USE_L10N = True

ugettext = lambda s: s
LANGUAGES = (
    ('en-us', ugettext('English')),
    ('pt-br', ugettext('Portuguese')),
)

LOCALE_PATHS = (
       os.path.join(BASE_PATH, "locale"),
) 
```

语言环境文件夹遵循以下结构：

```
locale
    pt_BR
        LC_MESAGES
            django.mo
            django.po 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T22:58:54.893

我发现不同的平台喜欢不同的语言文件夹名称。我在我的开发系统 (Mac OS X) 上大发雷霆，因为 '/pt-br/LC_MESSAGES/' 不起作用，即使 makemessages 以这种方式创建文件夹并且编译消息也可以正常工作。一旦我将语言重命名为“/pt_br/LC_MESSAGES/”（注意下划线），它终于焕发生机。

将同一个项目迁移到生产环境（Ubuntu），它再次停止工作，我在 Sun 下尝试了一切，认为文件夹名称必须已经正确，因为它们在我的开发中工作。机器。最后，出于绝望，我尝试将“/pt_BR/LC_MESSAGES/”之类的国家组件大写，然后，它又开始工作了。

即使认为我的 Python 和 Django 以及我所有的各种 Python/Django 库和应用程序（按设计）都是相同的版本，我怀疑每个系统下面都有不同的 gettext 版本/构建，这可能是造成差异的原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-12T18:12:00.023

默认情况下，编译的翻译文件 ( `*.mo`) 会被 git 忽略。确认您已从`.gitignore`文件中删除此异常。

如果是这种情况，请删除此异常，将这些文件添加到 git，提交并推送到 Heroku 以使它们可用于 Heroku 中的应用程序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-17T23:02:20.903

在上面的示例中，您编写 `LC_MESAGES`而不是 **`LC_MESSAGES`**（注意双 S），我相信这很可能是您的问题。

如果没有，请继续阅读！

我最近遇到了这个问题（再次！），答案在[这部分 django 文档中找到](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#how-django-discovers-translations)

我怀疑你有同样的问题，因为你的“管理”应用程序被翻译但不是你自己的（项目）应用程序。

似乎 Django 正在寻找您的翻译，如下所示：

> 1.  LOCALE_PATHS 中列出的目录具有最高优先级，首先出现的目录的优先级高于后面出现的目录。
> 2.  然后，它会查找并使用 INSTALLED_APPS 中列出的每个已安装应用程序中是否存在区域设置目录。首先出现的优先级高于后来出现的优先级。
> 3.  最后，django/conf/locale 中的 Django 提供的基本翻译被用作后备。

使用上面描述的设置，您必须确保您的树看起来像这样（最重要的是 settings.py 位于“locale”目录上方的目录中）：

```
+-project_top/
  |
  +-project_app/
  | |
  | +-locale/
  | | |
  | | +-pt_BR/
  | |   |
  | |   +-LC_MESSAGES/
  | |     |
  | |     +-django.po
  | |  
  | +-settings.py
  |
  +-manage.py 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-12T08:43:33.960

首先，您的语言设置错误。

它应该是这样的：

```
LANGUAGES = (
    ('zh', 'China'),
    ('en', 'English'),
    ('ja', 'Japanese'),
) 
```

接下来，检查 cookie 设置中的域是否正确。

我有同样的问题，并认为 Heroku 的虚拟环境永远不会支持 i18n，但最后发现我在会话 cookie 中的 'django-language' 值属于我的本地测试服务器 '0.0.0.0:5000'。

更改设置后，我在本地服务器上完成的翻译开箱即用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-03T12:45:21.637

在某些情况下，名称中带有“-”或“_”的目录未正确寻址。我解决了将 url 自定义为 2 字符代码的问题。这可以通过创建别名来完成：

```
from django.conf import global_settings, locale
EXTRA_LANG_INFO = {
    'pt': {
        'fallback': ['pt-br'],
    },
}
LANG_INFO = dict(locale.LANG_INFO, **EXTRA_LANG_INFO)
locale.LANG_INFO = LANG_INFO 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-23T08:06:25.630

我想强调上面@msaad 的评论。如果您在 Mac OS X 上开发并且您的翻译目录都是小写的，那么将其从 es_es -> es_ES 更改并重新部署。这为我解决了这个问题。在 OS X 上，系统不区分大小写，但在 linux 系统上则不区分大小写。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-11T14:04:38.927

我不回答与 Heroku 相关的问题，只是为了收集大多数可能性：

我有 Debian 10 开发和 Debian 10 虚拟服务器在生产中。开发中一切正常，i18n 生产失败。

原因：我需要**`apt install gettext`**.

此外，请确保**.mo 文件在 git 中**并且没有被 .gitignore 禁用（这个答案已经在这里），

# javascript - Javascript来操作css文件？

> ID：13246549
> 
> 赞同：1
> 
> 时间：2012-11-06T07:44:54.300
> 
> 标签：javascript

我使用 javascript 来更改对象的显示，同一个对象已经有一个 css 类：#id{display:none;} 当我使用 javascript 将显示更改为显示：块时，显示：块；出现在 HTML 中的对象本身上。css 属性似乎覆盖了 html 的属性，因为它仍然不显示。
prev4.onclick = function(){ lrg.setAttribute("src", eventpic4); lefta.setAttribute("display", "block"); };

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T08:08:08.337

一个好的做法是避免在 JavaScript 中直接操作样式；您可以改用类并让 CSS 处理样式：

```
<style>
  #id { display: none; }
  #id.enabled { display: block; }
</style>
<script>
  document.getElementById("id").className = "enabled";
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T07:48:48.987

```
 document.getElementById('id').style.display = 'block' 
```

# javascript - 无法调用当前对象中的函数。为什么？

> ID：13246551
> 
> 赞同：0
> 
> 时间：2012-11-06T07:45:01.420
> 
> 标签：javascript, jquery

我有一个名为的函数`Validation`，其中包含三个函数。现在，当我想从内部的一个函数（即第 13 行）调用另一个函数时`Validation`。然后我收到此错误

```
Uncaught TypeError: Object [object Object] has no method 'validateAddress' 
```

这是我的代码

```
var Validation = function () {
var inputs, field, errors = [], self = this,

emptyFieldsValidation = function () {
    $('#form input').each(function (i, el) {
        inputs = $(this);
        if ( inputs.val() == '' ) {
            inputs.css('border', '1px solid red');
            return errors.push('emptyFields');
        } else {
            inputs.css('border', '1px solid #ccc');
            if (inputs.hasClass('from')) {
                if (!self.validateAddress(inputs.val()))
                    errors.push('invalidFromAddress');
            }
            if (inputs.hasClass('to')) {
                if (!self.validateAddress(inputs.val()))
                    errors.push('invalidToAddress');
            }
            if (inputs.hasClass('time')) {
                if (!self.validateForNumber(inputs.val()))
                    errors.push('invalidTime');
            }
        }
    });
    return !!errors.length;
},

validateAddress = function (val) {
    var streetregex = /^[\w+\s]+\d+,\s*[\s\w]+$/;
    if (streetregex.test(val)) return true;
    else return false;
},

validateForNumber = function (val) {
    if (!isNaN(val)) return true;
    else return false;
};

return {
    emptyFieldsValidation: emptyFieldsValidation
};
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T07:53:38.767

替换为`self.validateAddress`刚刚`validateAddress``emptyFieldsValidation`

[您可以在此处](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope#Nested_functions_and_closures)阅读有关嵌套函数和闭包的更多信息。

# magento - 如何阻止谷歌缓存magento网站？

> ID：13246555
> 
> 赞同：0
> 
> 时间：2012-11-06T07:45:19.620
> 
> 标签：magento, caching

我试图将 no archive 命令放入 head.phtml 文件中，但这不起作用。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:52:18.720

尝试在您的网络根文件夹或magento文件夹安装中创建一个robot.txt文件并放入

robots.txt 文件中的第一个解决方案

```
User-Agent: *
Disallow: / 
```

.htaccess 文件中的第二种解决方案

```
RewriteEngine on
RewriteCond %{HTTP_USER_AGENT} AltaVista [OR]
RewriteCond %{HTTP_USER_AGENT} Googlebot [OR]
RewriteCond %{HTTP_USER_AGENT} msnbot [OR]
RewriteCond %{HTTP_USER_AGENT} Slurp
RewriteRule ^.*$ "http\:\/\/htmlremix\.com" [R=301,L] 
```

基于文章[Block Google and bots using htaccess and robots.txt的信息](http://www.htmlremix.com/seo/block-google-and-bots-using-htaccess-and-robots-txt)

# ios - 如何使用 Instruments UIAutomation 测试 iOS Web 应用程序

> ID：13246556
> 
> 赞同：1
> 
> 时间：2012-11-06T07:45:03.560
> 
> 标签：ios, web-applications, ios-ui-automation, xcode-instruments

当我测试本机应用程序时，我可以选择目标（选择目标列表中列出的来自真实设备的应用程序；或者在模拟器的情况下 - 在应用程序项目中选择配置文件菜单项）。

**但是如何为 Web 应用程序选择目标？**

在这种情况下，我是否必须选择某个浏览器作为目标？设备有 Safari 和 Chrome 浏览器。Chrome 浏览器出现在目标列表中。但是当我尝试运行脚本时，它不起作用。Chrome 刚刚启动，但会执行任何操作。

我还尝试创建只需在浏览器中打开网页的 XCode 项目。但是当我尝试运行脚本时出现“目标应用程序不是最前面的”错误。如果仪器选择目标列表中不存在这些应用程序，是否有可能选择设备上安装的应用程序作为目标？设备主页上有指向 Web 应用程序的链接。我可以以某种方式选择它作为目标吗？在 Organizer（从 XCode 调用）中，仅显示一个 - 本机应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:48:36.070

UI 自动化仅适用于您使用 Xcode 构建的本机应用程序。从您的问题来看，您似乎想为 iOS 启动 Mobile Safari 或 Chrome，并使用 UI 自动化对其进行操作。那是行不通的。Instruments 可以让您连接到在模拟器或设备上运行的未编译的应用程序，但只有一些 Instruments 可以工作，UI Automation 不是其中之一。

如果您的 Web 应用程序包装在本机外壳中，那么您可以使用 UI 自动化。您可能想查看[电话差距](http://phonegap.com)。它是一个成熟的包装器，它试图将本机功能暴露给您不需要的 Web 应用程序。但是，如果您仍然想尝试这个，它是一个得到很好支持的网页包装器这一事实可能是一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T14:50:41.673

UI 自动化不支持 Web 自动化。试用适用于 iOS 的 Selenium Web 驱动程序，有助于在 iOS Safari 浏览器上自动化 Web 应用程序。在设备和模拟器上运行。

# ios - iOS 中的视频编辑问题

> ID：13246557
> 
> 赞同：2
> 
> 时间：2012-11-06T07:45:15.727
> 
> 标签：ios, avfoundation, video-editing, avasset

我目前正在开发一个合并所需数量视频的 iOS 应用程序。一旦用户点击按钮合并视频，视频就会被连接起来，然后使用 AVPlayer 播放：

```
CMTime nextClipStartTime = kCMTimeZero;
NSInteger i;
CMTime transitionDuration = CMTimeMake(1, 1); // Default transition duration is one second.

// Add two video tracks and two audio tracks.
AVMutableCompositionTrack *compositionVideoTracks[2];
AVMutableCompositionTrack *compositionAudioTracks[2];
compositionVideoTracks[0] = [self.mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
compositionVideoTracks[1] = [self.mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
compositionAudioTracks[0] = [self.mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
compositionAudioTracks[1] = [self.mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];

CMTimeRange *passThroughTimeRanges = alloca(sizeof(CMTimeRange) * [self.selectedAssets count]);
CMTimeRange *transitionTimeRanges = alloca(sizeof(CMTimeRange) * [self.selectedAssets count]);

// Place clips into alternating video & audio tracks in composition, overlapped by transitionDuration.
for (i = 0; i < [self.selectedAssets count]; i++ )
{
    NSInteger alternatingIndex = i % 2; // alternating targets: 0, 1, 0, 1, ...
    AVURLAsset *asset = [self.selectedAssets objectAtIndex:i];

    NSLog(@"number of tracks %d",asset.tracks.count);

    CMTimeRange assetTimeRange;
    assetTimeRange.start = kCMTimeZero;
    assetTimeRange.duration = asset.duration;
    NSValue *clipTimeRange = [NSValue valueWithCMTimeRange:assetTimeRange];
    CMTimeRange timeRangeInAsset;
    if (clipTimeRange)
        timeRangeInAsset = [clipTimeRange CMTimeRangeValue];
    else
        timeRangeInAsset = CMTimeRangeMake(kCMTimeZero, [asset duration]);

    AVAssetTrack *clipVideoTrack = [[asset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
    [compositionVideoTracks[alternatingIndex] insertTimeRange:timeRangeInAsset ofTrack:clipVideoTrack atTime:nextClipStartTime error:nil];

    AVAssetTrack *clipAudioTrack = [[asset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];
    [compositionAudioTracks[alternatingIndex] insertTimeRange:timeRangeInAsset ofTrack:clipAudioTrack atTime:nextClipStartTime error:nil];

    // Remember the time range in which this clip should pass through.
    // Every clip after the first begins with a transition.
    // Every clip before the last ends with a transition.
    // Exclude those transitions from the pass through time ranges.
    passThroughTimeRanges[i] = CMTimeRangeMake(nextClipStartTime, timeRangeInAsset.duration);
    if (i > 0) {
        passThroughTimeRanges[i].start = CMTimeAdd(passThroughTimeRanges[i].start, transitionDuration);
        passThroughTimeRanges[i].duration = CMTimeSubtract(passThroughTimeRanges[i].duration, transitionDuration);
    }
    if (i+1 < [self.selectedAssets count]) {
        passThroughTimeRanges[i].duration = CMTimeSubtract(passThroughTimeRanges[i].duration, transitionDuration);
    }

    // The end of this clip will overlap the start of the next by transitionDuration.
    // (Note: this arithmetic falls apart if timeRangeInAsset.duration < 2 * transitionDuration.)
    nextClipStartTime = CMTimeAdd(nextClipStartTime, timeRangeInAsset.duration);
    nextClipStartTime = CMTimeSubtract(nextClipStartTime, transitionDuration);

    // Remember the time range for the transition to the next item.
    transitionTimeRanges[i] = CMTimeRangeMake(nextClipStartTime, transitionDuration);
}

// Set up the video composition if we are to perform crossfade or push transitions between clips.
NSMutableArray *instructions = [NSMutableArray array];

// Cycle between "pass through A", "transition from A to B", "pass through B", "transition from B to A".
for (i = 0; i < [self.selectedAssets count]; i++ )
{
    NSInteger alternatingIndex = i % 2; // alternating targets

    // Pass through clip i.
    AVMutableVideoCompositionInstruction *passThroughInstruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
    passThroughInstruction.timeRange = passThroughTimeRanges[i];
    AVMutableVideoCompositionLayerInstruction *passThroughLayer = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:compositionVideoTracks[alternatingIndex]];

    passThroughInstruction.layerInstructions = [NSArray arrayWithObject:passThroughLayer];
    [instructions addObject:passThroughInstruction];

    AVMutableVideoCompositionLayerInstruction *fromLayer;

    AVMutableVideoCompositionLayerInstruction *toLayer;

    if (i+1 < [self.selectedAssets count])
    {
        // Add transition from clip i to clip i+1.

        AVMutableVideoCompositionInstruction *transitionInstruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
        transitionInstruction.timeRange = transitionTimeRanges[i];
        fromLayer = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:compositionVideoTracks[alternatingIndex]];
        toLayer = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:compositionVideoTracks[1-alternatingIndex]];

        // Fade out the fromLayer by setting a ramp from 1.0 to 0.0.
        [fromLayer setOpacityRampFromStartOpacity:1.0 toEndOpacity:0.0 timeRange:transitionTimeRanges[i]];

        transitionInstruction.layerInstructions = [NSArray arrayWithObjects:fromLayer, toLayer, nil];
        [instructions addObject:transitionInstruction];

    }

    AVURLAsset *sourceAsset = [AVURLAsset URLAssetWithURL:[self.selectedItemsURL objectAtIndex:i] options:[NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES] forKey:AVURLAssetPreferPreciseDurationAndTimingKey]];

    AVAssetTrack *sourceVideoTrack = [[sourceAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];

    CGSize temp = CGSizeApplyAffineTransform(sourceVideoTrack.naturalSize, sourceVideoTrack.preferredTransform);
    CGSize size = CGSizeMake(fabsf(temp.width), fabsf(temp.height));
    CGAffineTransform transform = sourceVideoTrack.preferredTransform;

    self.videoComposition.renderSize = sourceVideoTrack.naturalSize;
    if (size.width > size.height) {

        [fromLayer setTransform:transform atTime:sourceAsset.duration];
    } else {

        float s = size.width/size.height;

        CGAffineTransform new = CGAffineTransformConcat(transform, CGAffineTransformMakeScale(s,s));

        float x = (size.height - size.width*s)/2;

        CGAffineTransform newer = CGAffineTransformConcat(new, CGAffineTransformMakeTranslation(x, 0));

        [fromLayer setTransform:newer atTime:sourceAsset.duration];
    }

}

self.videoComposition.instructions = instructions;

self.videoComposition.frameDuration = CMTimeMake(1, 30);

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *myPathDocs =  [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"mergeVideo-%d.mov",arc4random() % 1000]];

NSURL *url = [NSURL fileURLWithPath:myPathDocs];

self.exporter = [[AVAssetExportSession alloc] initWithAsset:self.mixComposition presetName:AVAssetExportPresetMediumQuality];
self.exporter.outputURL=url;
self.exporter.outputFileType = AVFileTypeQuickTimeMovie;
self.exporter.videoComposition = self.videoComposition;
self.exporter.shouldOptimizeForNetworkUse = YES;

self.playerItem = [AVPlayerItem playerItemWithAsset:self.mixComposition];
self.playerItem.videoComposition = self.videoComposition;
AVPlayer *player = [AVPlayer playerWithPlayerItem:self.playerItem];
AVPlayerLayer *playerLayer = [AVPlayerLayer playerLayerWithPlayer:player];
[playerLayer setFrame:CGRectMake(0, 0, self.imageView.frame.size.width, self.imageView.frame.size.height)];
[[[self imageView] layer] addSublayer:playerLayer];
playerLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;
[player play];

[[NSNotificationCenter defaultCenter]
 addObserver:self selector:@selector(checkPlayEnded) name:AVPlayerItemDidPlayToEndTimeNotification object:self.playerItem]; 
```

我目前面临以下问题：

1.  如果一个视频是纵向的，而另一个是横向的，我将如何在横向旋转纵向视频，因为我的视图是横向的，但纵向视频保留其原始？（我正在加载存储在相机胶卷中的视频，而不是在我的应用程序中记录它们）

2.  忽略上述问题，如果我合并任意数量的视频，它们都可以正常工作。一旦我将该新视频保存在我的库中，然后再次将其加载到我的应用程序中并尝试将该视频与其他一些新视频一起加入，分辨率就会受到干扰，尽管如果两个视频在应用程序中单独播放，效果真的很好。我该如何解决？

（我已经尝试按照 WWDC 2010 视频编辑教程进行操作，所以这段代码是从那里提取的。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-14T06:02:40.733

在为 AVMutableVideoCompositionInstruction 创建对象时，您可以在上面的代码中检查视频运行时的方向。

要附加到代码以解决问题的代码是....

```
AVMutableVideoCompositionInstruction *instruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
instruction.timeRange = CMTimeRangeMake(kCMTimeZero, [mutableComposition duration]);
AVAssetTrack *videoTrack = [[mutableComposition tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];

AVMutableVideoCompositionLayerInstruction * layerInstruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:videoTrack];

UIImageOrientation videoAssetOrientation_  = UIImageOrientationUp;
BOOL  isVideoAssetPortrait_  = NO;
CGAffineTransform videoTransform = assetVideoTrack.preferredTransform;

if(videoTransform.a == 0 && videoTransform.b == 1.0 && videoTransform.c == -1.0 && videoTransform.d == 0)
{
    videoAssetOrientation_= UIImageOrientationRight;
    isVideoAssetPortrait_ = YES;
}
if(videoTransform.a == 0 && videoTransform.b == -1.0 && videoTransform.c == 1.0 && videoTransform.d == 0)
{
    videoAssetOrientation_ =  UIImageOrientationLeft;
    isVideoAssetPortrait_ = YES;
}

CGFloat FirstAssetScaleToFitRatio = 320.0 / assetVideoTrack.naturalSize.width;
if(isVideoAssetPortrait_)
{
    videoSize=CGSizeMake(350,400);
    FirstAssetScaleToFitRatio = 320.0/assetVideoTrack.naturalSize.height;
    CGAffineTransform FirstAssetScaleFactor = CGAffineTransformMakeScale(FirstAssetScaleToFitRatio,FirstAssetScaleToFitRatio);
    [layerInstruction setTransform:CGAffineTransformConcat(assetVideoTrack.preferredTransform, FirstAssetScaleFactor) atTime:kCMTimeZero];
}
else
{
    videoSize=CGSizeMake(assetVideoTrack.naturalSize.width,assetVideoTrack.naturalSize.height);
} 
```

上面的代码将使横向视频保持横向并防止视频从纵向转换为横向。

我希望这会有所帮助。而不是首先转换为正确的方向然后应用编辑。如果您附加此代码，您的一步将减少，并且可以在一个代码中同时以更快的方式完成这两项操作（即编辑和方向）。

# sql - 反之选择数据

> ID：13246561
> 
> 赞同：0
> 
> 时间：2012-11-06T07:45:48.470
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我的数据库中有两个表。

```
1) User Table

id  username    password    logo    email
1   admin        admin      NULL    1   
2   support     support     NULL    NULL    
3   test        test        NULL    NULL    

2) Link Account Table

ID  AccountID   LinkAccountID
1       1           2 
```

现在，如果我选择带有 accountid 1 的用户名，那么如果我选择带有 accountid 2 的用户名，它会以同样的方式返回我 Admin 和 Support，那么它也会返回 admin 和 support，如果我选择带有 accountid 3 的用户名，那么它将只返回 test

反之亦然，如果在链接帐户表帐户 id 为 1 或 linkaccountid 为 1 将返回两个 id

提前致谢

问候

阿米特维亚斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T08:17:08.777

```
Select u.id,u.Name
from user u
left join
(
Select AccountID as AID , LinkAccountID as sec from Account
union
Select LinkAccountID as AID,AccountID  as sec from Account
) a 
on a.AID=u.ID

where @SearchUser in (Coalesce(a.Aid,u.id),Coalesce(a.Sec,u.id)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T08:04:28.620

Assuming you can manage to change `@SearchID` to whatever ID you want to search for, then this is one way to do it

```
select * from users a
where a.id = @SearchID

or
 a.id in (
    select b.AccountID from link_account b where b.LinkAccountID = @SearchID
         union 
    select b.LinkAccountID from link_account b where b.AccountID = @SearchID); 
```

I have tried it and it is working.

Here is the Fiddle for that [http://sqlfiddle.com/#!3/738b7/110](http://sqlfiddle.com/#!3/738b7/110)

# c# - 引用类型的结构详解

> ID：13246562
> 
> 赞同：2
> 
> 时间：2012-11-06T07:46:24.763
> 
> 标签：c#

我知道引用类型对象由两部分组成：对对象的引用，它本质上是一个保存真实对象地址的指针，以及驻留在堆上的对象本身，它可能被 GC 移动。反过来，对象本身由两部分组成：实例数据部分（字段）和元数据部分。

我在网上阅读了很多关于引用类型的存储模型的页面，但没有一个给出关于元数据部分如何组织的具体描述。我只知道它在 32 位系统上占用了 8 个字节（可以通过 profiling 观察到），其中 4 个字节包含一个指向 vtable 的指针，但是额外的 4 个字节呢？GC标记？内置属性？有人详细了解吗？我知道它是特定于实现的，我只是很想知道它实际上是如何逐位组织的。例如，Boehm GC 只需要一点作为标记，为什么 CLR 需要 4 个字节？

--->8----

请参阅评论中 Damian 提供的链接！这就是我一直在寻找的答案。

# c# - 我可以使用 Word 2003 组件通过 C# 将 .doc 文件转换为 .pdf 吗？

> ID：13246564
> 
> 赞同：2
> 
> 时间：2012-11-06T07:46:12.000
> 
> 标签：c#, ms-word, ms-office

我正在制作一个小型应用程序来验证是否可以使用 C# 将 Word 2003 文档转换为 PDF 格式，并且我正在使用该[`ExportAsFixedFormat`](http://msdn.microsoft.com/en-us/library/office/bb256835%28v=office.12%29.aspx)方法。它适用于 Word 2010。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:51:11.560

据我所知，它在 2003 年不起作用，此选项最初是在 Word 2007 中引入的。

您可以随时尝试：安装 pdf 打印机并使用 c# 将此文档“打印”到此“打印机”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T07:51:23.447

根据[文档](http://msdn.microsoft.com/en-us/library/office/bb256835%28v=office.12%29.aspx)，该`ExportToFixedFormat`方法是在 Word 2007 中添加的。所以我敢打赌，不，您不能导出 Word 2003 文档。

您可以尝试的一件事是该[`Convert`](http://msdn.microsoft.com/en-us/library/office/bb243727%28v=office.12%29.aspx)方法，理论上应该允许您将 2003 文件转换为 2007 格式，然后将其导出为 PDF。

# php - shell_exec 一直阻塞直到完成，我希望它是非阻塞的

> ID：13246565
> 
> 赞同：0
> 
> 时间：2012-11-06T07:46:16.693
> 
> 标签：php, linux, terminal

我有以下 PHP 代码：

```
shell_exec("(traceroute odesk.com > trace.txt;echo 'traceIsDone'>>trace.txt) &"); 
```

该行需要 50 秒才能完成，它与 ping 一起使用，当我在终端窗口中执行该行时，它会立即返回：

```
(traceroute odesk.com > trace.txt;echo 'traceIsDone'>>trace.txt) & 
```

如何在 PHP 转到下一行后立即执行该命令？所以不等待 shell_exec 命令完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T08:10:25.017

你应该使用`popen()`：

> 通过对 command 给出的命令进行分叉来打开一个进程的管道。

它说它派生了命令，即它在一个新线程中启动它，因此它不会阻塞您的主线程。因此，我认为这就是您想要使用的。

您可以非常像`fopen()`（如果您熟悉它的话）使用`fgets()`,`fgetss()`和`fwrite()`.

[PHP 手册中的 popen()](http://uk3.php.net/manual/en/function.popen.php)

# c - 如何在C中打开一个进程？

> ID：13246570
> 
> 赞同：-1
> 
> 时间：2012-11-06T07:47:36.423
> 
> 标签：c, process

如何在 C 中打开与我的程序无关的进程？例如：如果用户输入以下输入： start C:\Windows\calc.exe

然后计算器将打开。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:51:19.637

*C*标准不知道[进程。](http://en.wikipedia.org/wiki/Process_%28computing%29)您可以在没有进程的系统（例如裸机或 MS-DOS）中使用标准*C进行编码。*

在符合 Posix 的系统上，您可以使用[popen(3)](http://pubs.opengroup.org/onlinepubs/009695399/functions/popen.html)（带有`fscanf`和`pclose`）。

您也可以使用[system(3)](http://pubs.opengroup.org/onlinepubs/009695399/functions/system.html)函数。

您的操作系统可能具有非 Posix 接口。请深入了解您系统的开发人员文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:58:26.583

尝试使用该`system()`功能。[MSDN 链接](http://msdn.microsoft.com/en-us/library/277bwbdz%28v=vs.71%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T07:52:27.363

您可以在 Windows 上尝试[createProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425(v=vs.85).aspx) 。还可以查看这个[线程](http://www.cplusplus.com/forum/windows/19762/)和[这个](https://stackoverflow.com/questions/42531/how-do-i-call-createprocess-in-c-to-launch-a-windows-executable)之前提出的问题。

# java - 使用java swing加密html文件

> ID：13246571
> 
> 赞同：0
> 
> 时间：2012-11-06T07:47:18.407
> 
> 标签：java, swing, encryption, jar, setup-project

我正在开发一个 Swing 应用程序，我必须将 HTML 文件提供给客户端，但我不希望客户端访问它们。

有什么方法可以将我的文件放在受密码保护的文件夹中，或者我可以加密文件，我的程序应该在 Swing 应用程序中访问它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T07:55:30.223

您可以使用共享的隐藏密钥对它们进行加密。一种用于您的应用程序，在软件中硬编码，另一种用于您自己，用于加密 html 文件。

这就是你所能做的。一旦解密，就很容易从中获取内容，因为他们总是可以编写自己的类来实现你的类，只显示内容（实际上大约有 15 行代码，java 反编译器现在工作得很好）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T07:52:29.360

呵呵，这在技术上当然是可行的，但在某些时候，您的客户可以使用明文 - 如果不是通过其他方式，那么至少通过网络嗅探......

使用您的资源编写好的代码，不要费心加密您的 HTML。

干杯，

# c# - 构建具有代码完成功能的文本编辑器

> ID：13246573
> 
> 赞同：2
> 
> 时间：2012-11-06T07:47:49.397
> 
> 标签：c#, php, editor, code-completion

目前我正在尝试为 PHP 语言构建一个文本编辑器，它应该具有代码完成功能，即如果我开始输入一个单词，一个动态创建的下拉列表将显示所有可用的关键字以我输入的字母开头。任何机构都可以建议我如何做到这一点。想法对我来说就足够了。如果可能的话，请给我一个链接到这个用 C# 构建的简单应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:58:37.450

考虑到一般来说这不是一件容易的事，所以没有一些“简单”的应用程序。

即使**总的来说**想法不是火箭科学。您需要定义一个单词字典，对应于某个键。当你输入“。” （在`C#`）你必须从字典中挑选所有对应于键的单词，该键等于从“。”*左侧找到的单词。*

要做到这一点，真正的工作应用程序并不容易。顺便说一句，我可以建议在他们的编辑器上查看 [MonoDevlop](http://monodevelop.com/download/monodevelop_2.0_released)。

几年前我用它为 DSL 公司做一个简单的编辑器需要，并花费不少时间来正确理解内部，很好地集成“我的新语言”，从 Mono 中“分离”控制并注入到我们的应用程序中，就像一个可停靠窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T07:56:49.390

如果我在你的地方我真的会尽量避免轮子......代码完成是大多数IDE现在附带的东西，所以你所追求的已经可用......

话虽如此，我会尝试检查 PHP API 并构造一个[Suffix tree](http://en.wikipedia.org/wiki/Suffix_tree)。这种类型的树通常允许快速查找给定单词。索引 API 后，您还可以添加用户在执行实际编程时添加的任何其他变量。

您可以在用户输入第三个字母后自动在后缀树中启动搜索，或者为用户提供手动激活它的方法，就像`Ctrl-Space`大多数 IDE（Visual Studio、Netbeans、Eclipse 等）的键盘一样。

请注意，这可能会变得很棘手，因为您可能想要选择适当的变量类型。

# c++ - Gsoap Http 事件回调

> ID：13246577
> 
> 赞同：1
> 
> 时间：2012-11-06T07:47:35.587
> 
> 标签：c++, visual-c++, soap, gsoap

我下载了 gSoap 并为 wsdl 生成了源代码。我可以连接到服务器并发送请求。

但我无法理解如何捕获发送的字节数、接收字节数等 http 事件。我阅读了这份文件[http://www.cs.fsu.edu/~engelen/soapdoc2.html](http://www.cs.fsu.edu/~engelen/soapdoc2.html)。

但是我找不到我需要的东西。我找到了函数`fsend`。据我了解，当我们向服务器发送请求时，正在执行此功能。我必须做这样的事情吗？

```
service.fsend = Custom; 
```

`Custom`我的回调在哪里？

我发现其他回调是 ffiltersend。据我了解，发送请求时正在运行此功能。我用这个。但我不明白这个方法中的最后一个参数是指向 size_t 的指针。当我从这个指针获得值并除以 2 时，我得到了我的实际字节数。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-05T15:35:24.160

要获取发送、接收字节数的统计信息，并将入站和出站消息记录到文件系统，请使用 gSOAP 软件附带的“日志记录插件”。

首先，注册插件：

```
#include "plugin/logging.h" // this file is in the gSOAP distro path
...
soap_register_plugin(soap, logging); 
```

然后使用这些函数设置入站和出站消息的日志记录目标：

```
soap_set_logging_inbound(struct soap*, FILE*);
soap_set_logging_outbound(struct soap*, FILE*); 
```

其中作为第二个参数传递的文件描述符指向一个打开的文件，您可以在记录之前和之后打开和关闭该文件。`NULL`用作第二个参数以禁用日志记录。

要获取统计信息，即消息大小字节计数，请使用：

```
soap_get_logging_stats(struct soap*, size_t *sent, size_t *recv); 
```

此调用将更新第二个和第三个参数。

仅此而已。

如果您想使用自己的消息处理回调，那么从`plugin/logging.c`文件中学习如何完成可能是一个不错的起点。这个文件很短。

# php - 如何保护需要原始使用的数据

> ID：13246581
> 
> 赞同：1
> 
> 时间：2012-11-06T07:47:50.963
> 
> 标签：php, security, paypal

我有一个需要保护的应用程序。这些数据是来自 Paypal 的数据，允许我向人们收费（如果他们批准了我），在我在我的网站上启动此功能之前，我想确保它是安全的。

我知道使用密码可以使用盐和单向哈希，但是由于需要以原始格式使用这些数据，我想知道如何存储这些数据。

用户或我将无法使用这些数据，但它会存储在数据库中，我想这样做，所以如果数据库被黑客入侵，那么就没有任何“价值”了。

任何人都可以为我的问题提供任何建议或解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:58:57.150

听起来您正在寻找[PHP 的 Mcrypt 函数。](http://php.net/manual/en/book.mcrypt.php)它们允许使用密钥等对数据进行加密和解密。您所要做的就是在将您希望保护的数据存储到数据库之前对其进行加密。您还可以在需要时使用与加密它们相同的密码来解密它们。

# shell - 如何将 shell 脚本中所有内容的标准输出重定向到日志文件？

> ID：13246593
> 
> 赞同：0
> 
> 时间：2012-11-06T07:48:52.607
> 
> 标签：shell, io-redirection, redirectstandardoutput

让我们考虑一下 shell 脚本中有许多系统命令，每个命令都将一些内容返回到 stdout 或 stderr。

有没有办法将所有从 shell 脚本生成的 stdout 或 stderr 重定向到日志文件，而不是分别对每个命令执行重定向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T07:55:37.787

显然简单的解决方案是使用

```
./scriptfile.sh > foo.log 
```

因此使用脚本文件生成的所有标准输出都转到 foo.log

但是，我想您的问题是针对使用脚本的解决方案。您可以使用 exec 命令（重新）将文件描述符定向到给定文件（以下代码段中的第 2 行会将 stdout 重定向到 foo.log）：

```
#!/bin/sh
exec 1>>foo.log

echo blue
echo blart 
```

# php - 如何逐行读取大文件？

> ID：13246597
> 
> 赞同：540
> 
> 时间：2012-11-06T07:49:10.160
> 
> 标签：php

我想逐行读取文件，但没有将其完全加载到内存中。

我的文件太大而无法在内存中打开，如果尝试这样做，我总是会出现内存不足错误。

文件大小为 1 GB。

* * *

## 回答 #1

> 赞同：781
> 
> 时间：2012-11-06T07:51:30.540

您可以使用该`fgets()`函数逐行读取文件：

```
$handle = fopen("inputfile.txt", "r");
if ($handle) {
    while (($line = fgets($handle)) !== false) {
        // process the line read.
    }

    fclose($handle);
} else {
    // error opening the file.
} 
```

* * *

## 回答 #2

> 赞同：137
> 
> 时间：2012-11-06T07:55:24.480

```
if ($file = fopen("file.txt", "r")) {
    while(!feof($file)) {
        $line = fgets($file);
        # do same stuff with the $line
    }
    fclose($file);
} 
```

* * *

## 回答 #3

> 赞同：117
> 
> 时间：2014-10-04T05:28:56.383

您可以为文件使用面向对象的接口类 - **SplFileObject** [http://php.net/manual/en/splfileobject.fgets.php](http://php.net/manual/en/splfileobject.fgets.php) (PHP 5 >= 5.1.0)

```
<?php

$file = new SplFileObject("file.txt");

// Loop until we reach the end of the file.
while (!$file->eof()) {
    // Echo one line from the file.
    echo $file->fgets();
}

// Unset the file to call __destruct(), closing the file handle.
$file = null; 
```

* * *

## 回答 #4

> 赞同：80
> 
> 时间：2017-03-27T17:54:37.787

如果您要打开一个大文件，您可能希望在 fgets() 旁边使用生成器以避免将整个文件加载到内存中：

```
/**
 * @return Generator
 */
$fileData = function() {
    $file = fopen(__DIR__ . '/file.txt', 'r');

    if (!$file)
        die('file does not exist or cannot be opened');

    while (($line = fgets($file)) !== false) {
        yield $line;
    }

    fclose($file);
}; 
```

像这样使用它：

```
foreach ($fileData() as $line) {
    // $line contains current line
} 
```

这样您就可以在 foreach() 中处理单个文件行。

注意：生成器需要 >= PHP 5.5

* * *

## 回答 #5

> 赞同：35
> 
> 时间：2015-04-09T07:06:25.493

有一个`file()`函数可以返回文件中包含的行数组。

```
foreach(file('myfile.txt') as $line) {
   echo $line. "\n";
} 
```

* * *

## 回答 #6

> 赞同：31
> 
> 时间：2012-11-06T08:23:30.883

使用缓冲技术来读取文件。

```
$filename = "test.txt";
$source_file = fopen( $filename, "r" ) or die("Couldn't open $filename");
while (!feof($source_file)) {
    $buffer = fread($source_file, 4096);  // use a buffer of 4KB
    $buffer = str_replace($old,$new,$buffer);
    ///
} 
```

* * *

## 回答 #7

> 赞同：30
> 
> 时间：2018-06-21T20:46:23.060

显而易见的答案并不存在于所有回复中。
PHP 有一个简洁的流定界符解析器可用于此目的。

```
$fp = fopen("/path/to/the/file", "r");
while (($line = stream_get_line($fp, 1024 * 1024, "\n")) !== false) {
  echo $line;
}
fclose($fp); 
```

* * *

## 回答 #8

> 赞同：25
> 
> 时间：2015-11-25T00:21:21.183

```
foreach (new SplFileObject(__FILE__) as $line) {
    echo $line;
} 
```

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2017-08-04T13:24:58.087

这就是我管理非常大文件的方式（测试高达 100G）。它比 fgets() 更快

```
$block =1024*1024;//1MB or counld be any higher than HDD block_size*2
if ($fh = fopen("file.txt", "r")) { 
    $left='';
    while (!feof($fh)) {// read the file
       $temp = fread($fh, $block);  
       $fgetslines = explode("\n",$temp);
       $fgetslines[0]=$left.$fgetslines[0];
       if(!feof($fh) )$left = array_pop($lines);           
       foreach ($fgetslines as $k => $line) {
           //do smth with $line
        }
     }
}
fclose($fh); 
```

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2014-01-28T21:14:06.160

小心'while（！feof ... fgets（）'的东西，fgets可能会出错（返回false）并永远循环而不会到达文件末尾。codaddict最接近正确但是当你的'while fgets'循环结束，检查 feof；如果不是真的，那么你有一个错误。

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2018-02-24T15:43:19.857

SplFileObject 在处理大文件时很有用。

```
function parse_file($filename)
{
    try {
        $file = new SplFileObject($filename);
    } catch (LogicException $exception) {
        die('SplFileObject : '.$exception->getMessage());
    }
    while ($file->valid()) {
        $line = $file->fgets();
        //do something with $line
    }

    //don't forget to free the file handle.
    $file = null;
} 
```

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2015-07-19T01:18:15.563

这个问题的流行解决方案之一将与新行字符有关。它可以很容易地用一个简单的`str_replace`.

```
$handle = fopen("some_file.txt", "r");
if ($handle) {
    while (($line = fgets($handle)) !== false) {
        $line = str_replace("\n", "", $line);
    }
    fclose($handle);
} 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2019-06-23T15:07:23.253

```
<?php
echo '<meta charset="utf-8">';

$k= 1;
$f= 1;
$fp = fopen("texttranslate.txt", "r");
while(!feof($fp)) {
    $contents = '';
    for($i=1;$i<=1500;$i++){
        echo $k.' -- '. fgets($fp) .'<br>';$k++;
        $contents .= fgets($fp);
    }
    echo '<hr>';
    file_put_contents('Split/new_file_'.$f.'.txt', $contents);$f++;
}
?> 
```

* * *

## 回答 #14

> 赞同：-9
> 
> 时间：2014-03-17T16:19:15.453

带数组返回的读取函数

```
function read_file($filename = ''){
    $buffer = array();
    $source_file = fopen( $filename, "r" ) or die("Couldn't open $filename");
    while (!feof($source_file)) {
        $buffer[] = fread($source_file, 4096);  // use a buffer of 4KB
    }
    return $buffer;
} 
```

# mysql - 加入两个表并按 xyz 分组

> ID：13246598
> 
> 赞同：1
> 
> 时间：2012-11-06T07:49:12.267
> 
> 标签：mysql, sql

我有两张桌子

表格1：

```
 ref       status

    abc     1
    abc     1
    abc     2
    abc     3
    abc     5(not in Table2)
    abc     5(not in Table2) 
```

表 2：

```
 ref          status

    abc     1
    abc     1
    abc     2
    abc     3
    abc             4(not in Table1)
    abc     4(not in Table1) 
```

我想加入这两个表并执行分组，以便最终结果如下所示：

结果表：参考状态

```
 abc     1
    abc     2
    abc     3
    abc     4
    abc     5 
```

我试过这个

```
 SELECT DISTINCT Table1.ref, Table1.status, Table2.ref, Table2.status
    FROM Table1, Table2
    GROUP BY Table1.ref, Table1.status, Table2.ref, Table2.status; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T07:50:40.540

```
SELECT DISTINCT ref, status
FROM
(
    SELECT ref, status
    FROM Table1
    UNION ALL
    SELECT ref, status
    FROM Table2
) x 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!2/dd87a/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T09:15:07.170

试试下面的代码：

```
SELECT DISTINCT ref, status
FROM Table1
UNION 
SELECT DISTINCT ref, status
FROM Table2 
```

# wpf - 单独的 ResourceDictionary 中的 DataTemplate

> ID：13246602
> 
> 赞同：9
> 
> 时间：2012-11-06T07:49:11.273
> 
> 标签：wpf, xaml, binding, resources, datatemplate

我知道有很多与这个问题相关的主题，但我找不到完全适合我的问题的解决方案......也许没有？

目前我有`UserControl`一个导航，它允许用户在不同的屏幕之间切换。这些屏幕是在my as的`Resources`一部分中定义的。`UserControl``DataTemplate`

**像这样的东西：**

```
<DataTemplate TargetType={x:Type vm:ViewModel1}>
    ...
</DataTemplate>
<DataTemplate TargetType={x:Type vm:ViewModel2}>
    ...
</DataTemplate>
<DataTemplate TargetType={x:Type vm:ViewModel3}>
    ...
</DataTemplate> 
```

好的，我想做的是将这些 DataTemplates 放在单独的 XAML 文件中，并将此文件链接到 UserControl 的资源部分。我真的必须让这个新的 XAML 资源字典在我的应用程序中全局可用（将其添加到 App.xaml 资源中）还是有另一种/更好的方法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-06T08:13:47.470

不，您不必使其全球化。只需在您的用户控制资源部分中声明资源字典，就像在 app.xaml 中所做的一样。

```
<Control.Resources>
   <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="Dictionary1.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Control.Resources> 
```

`"..\Folder\Folder\Dictionary.xaml"`如果需要，您可以使用相对文件路径指向文件。

# ios - 任何人为 iOS 编译 mimetic

> ID：13246605
> 
> 赞同：0
> 
> 时间：2012-11-06T07:49:43.870
> 
> 标签：ios, cross-compiling, mime-message, multipartentity

我想为 IMAP 消息创建一个 mime / multipart 解析器。我有几个链接说[mimetic](http://www.codesink.org/mimetic_mime_library.html)可以做到这一点，但我无法为 iOS 编译它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-16T21:45:01.393

请查找适用于 iOS 的模拟 C++ 库的更新构建脚本。

```
#!/bin/bash

echo "$(tput setaf 2)"
echo "###################################################################"
echo "# Preparing to build libmimetic"
echo "###################################################################"
echo "$(tput sgr0)"

JOBS=$(sysctl -n hw.logicalcpu)
# The results will be stored relative to the location
# where you stored this script, **not** relative to
# the location of the protobuf git repo.
PREFIX=`pwd`/libmimetic
if [ -d ${PREFIX} ]
then
    rm -rf "${PREFIX}"
fi
mkdir -p "${PREFIX}/platform"

# A "YES" value will build the latest code from GitHub on the master branch.
# A "NO" value will use the tarball downloaded from ...
USE_GIT_MASTER=NO

MIMETIC_GIT_DIRNAME=mimetic
MIMETIC_VERSION=0.9.8
MIMETIC_RELEASE_URL=http://www.codesink.org/download/mimetic-${MIMETIC_VERSION}.tar.gz
MIMETIC_RELEASE_DIRNAME=mimetic-${MIMETIC_VERSION}
LIBMIMETIC=libmimetic

BUILD_MACOSX_X86_64=YES

BUILD_I386_IOSSIM=YES
BUILD_X86_64_IOSSIM=YES

BUILD_IOS_ARMV7=YES
BUILD_IOS_ARMV7S=YES
BUILD_IOS_ARM64=YES

MIMETIC_SRC_DIR=/tmp/mimetic

DARWIN=darwin`uname -r`

XCODEDIR=`xcode-select --print-path`
IOS_SDK_VERSION=`xcrun --sdk iphoneos --show-sdk-version`
MIN_SDK_VERSION=6.0

MACOSX_PLATFORM=${XCODEDIR}/Platforms/MacOSX.platform
MACOSX_SYSROOT=${MACOSX_PLATFORM}/Developer/SDKs/MacOSX10.10.sdk

IPHONEOS_PLATFORM=`xcrun --sdk iphoneos --show-sdk-platform-path`
IPHONEOS_SYSROOT=`xcrun --sdk iphoneos --show-sdk-path`

IPHONESIMULATOR_PLATFORM=`xcrun --sdk iphonesimulator --show-sdk-platform-path`
IPHONESIMULATOR_SYSROOT=`xcrun --sdk iphonesimulator --show-sdk-path`

# Uncomment if you want to see more information about each invocation
# of clang as the builds proceed.
# CLANG_VERBOSE="--verbose"

CC="xcrun clang"
CXX="xcrun clang"

CFLAGS="${CLANG_VERBOSE} -DNDEBUG -g -O0 -pipe -fPIC -fcxx-exceptions"
CXXFLAGS="${CLANG_VERBOSE} ${CFLAGS} -std=c++11 -stdlib=libc++"

LDFLAGS="-stdlib=libc++"
LIBS="-lc++ -lc++abi"

echo "PREFIX ..................... ${PREFIX}"
echo "USE_GIT_MASTER ............. ${USE_GIT_MASTER}"
echo "MIMETIC_GIT_DIRNAME ....... ${MIMETIC_GIT_DIRNAME}"
echo "MIMETIC_VERSION ........... ${MIMETIC_VERSION}"
echo "MIMETIC_RELEASE_URL ....... ${MIMETIC_RELEASE_URL}"
echo "MIMETIC_RELEASE_DIRNAME ... ${MIMETIC_RELEASE_DIRNAME}"
echo "BUILD_MACOSX_X86_64 ........ ${BUILD_MACOSX_X86_64}"
echo "BUILD_I386_IOSSIM .......... ${BUILD_I386_IOSSIM}"
echo "BUILD_X86_64_IOSSIM ........ ${BUILD_X86_64_IOSSIM}"
echo "BUILD_IOS_ARMV7 ............ ${BUILD_IOS_ARMV7}"
echo "BUILD_IOS_ARMV7S ........... ${BUILD_IOS_ARMV7S}"
echo "BUILD_IOS_ARM64 ............ ${BUILD_IOS_ARM64}"
echo "MIMETIC_SRC_DIR ........... ${MIMETIC_SRC_DIR}"
echo "DARWIN ..................... ${DARWIN}"
echo "XCODEDIR ................... ${XCODEDIR}"
echo "IOS_SDK_VERSION ............ ${IOS_SDK_VERSION}"
echo "MIN_SDK_VERSION ............ ${MIN_SDK_VERSION}"
echo "MACOSX_PLATFORM ............ ${MACOSX_PLATFORM}"
echo "MACOSX_SYSROOT ............. ${MACOSX_SYSROOT}"
echo "IPHONEOS_PLATFORM .......... ${IPHONEOS_PLATFORM}"
echo "IPHONEOS_SYSROOT ........... ${IPHONEOS_SYSROOT}"
echo "IPHONESIMULATOR_PLATFORM ... ${IPHONESIMULATOR_PLATFORM}"
echo "IPHONESIMULATOR_SYSROOT .... ${IPHONESIMULATOR_SYSROOT}"
echo "CC ......................... ${CC}"
echo "CFLAGS ..................... ${CFLAGS}"
echo "CXX ........................ ${CXX}"
echo "CXXFLAGS ................... ${CXXFLAGS}"
echo "LDFLAGS .................... ${LDFLAGS}"
echo "LIBS ....................... ${LIBS}"

while true; do
    read -p "Proceed with build? (y/n) " yn
    case $yn in
        [Yy]* ) break;;
        [Nn]* ) exit;;
        * ) echo "Please answer yes or no.";;
    esac
done

echo "$(tput setaf 2)"
echo "###################################################################"
echo "# Fetch Mimetic"
echo "###################################################################"
echo "$(tput sgr0)"

(
    if [ -d ${MIMETIC_SRC_DIR} ]
    then
        rm -rf ${MIMETIC_SRC_DIR}
    fi

    cd `dirname ${MIMETIC_SRC_DIR}`

    if [ -d ${MIMETIC_RELEASE_DIRNAME} ]
    then
        rm -rf "${MIMETIC_RELEASE_DIRNAME}"
    fi
    curl --location ${MIMETIC_RELEASE_URL} --output ${MIMETIC_RELEASE_DIRNAME}.tar.gz
    tar xvf ${MIMETIC_RELEASE_DIRNAME}.tar.gz
    mv "${MIMETIC_RELEASE_DIRNAME}" "${MIMETIC_SRC_DIR}"
    rm ${MIMETIC_RELEASE_DIRNAME}.tar.gz
    cd ${MIMETIC_SRC_DIR}
    sed -i '' '/test\/Makefile/d' configure.in
sed -i '' '/test win32/ c\
SUBDIRS = mimetic
' /tmp/mimetic/Makefile.in
)

echo "$(tput setaf 2)"
echo "###################################################################"
echo "# x86_64 for Mac OS X"
echo "###################################################################"
echo "$(tput sgr0)"

if [ "${BUILD_MACOSX_X86_64}" == "YES" ]
then
    (
        cd ${MIMETIC_SRC_DIR}
        make distclean
        ./configure --disable-shared --prefix=${PREFIX} --exec-prefix=${PREFIX}/platform/x86_64-mac "CC=${CC}" "CFLAGS=${CFLAGS} -arch x86_64" "CXX=${CXX}" "CXXFLAGS=${CXXFLAGS} -arch x86_64" "LDFLAGS=${LDFLAGS}" "LIBS=${LIBS}"
        make -j${JOBS}
#        make check
        make install
    )
fi

MIMETICC=${PREFIX}/platform/x86_64-mac/bin/mimetic

###################################################################
# This section contains the build commands for each of the
# architectures that will be included in the universal binaries.
###################################################################

echo "$(tput setaf 2)"
echo "###########################"
echo "# i386 for iPhone Simulator"
echo "###########################"
echo "$(tput sgr0)"

if [ "${BUILD_I386_IOSSIM}" == "YES" ]
then
    (
        cd ${MIMETIC_SRC_DIR}
        make distclean
        ./configure --build=x86_64-apple-${DARWIN} --host=i386-apple-${DARWIN} --disable-shared --prefix=${PREFIX} --exec-prefix=${PREFIX}/platform/i386-sim "CC=${CC}" "CFLAGS=${CFLAGS} -miphoneos-version-min=${MIN_SDK_VERSION} -arch i386 -isysroot ${IPHONESIMULATOR_SYSROOT}" "CXX=${CXX}" "CXXFLAGS=${CXXFLAGS} -arch i386 -isysroot ${IPHONESIMULATOR_SYSROOT}" LDFLAGS="-arch i386 -miphoneos-version-min=${MIN_SDK_VERSION} ${LDFLAGS}" "LIBS=${LIBS}"
        make -j${JOBS}
        make install
    )
fi

echo "$(tput setaf 2)"
echo "#############################"
echo "# x86_64 for iPhone Simulator"
echo "#############################"
echo "$(tput sgr0)"

if [ "${BUILD_X86_64_IOSSIM}" == "YES" ]
then
    (
        cd ${MIMETIC_SRC_DIR}
        make distclean
        ./configure --build=x86_64-apple-${DARWIN} --host=x86_64-apple-${DARWIN} --disable-shared --prefix=${PREFIX} --exec-prefix=${PREFIX}/platform/x86_64-sim "CC=${CC}" "CFLAGS=${CFLAGS} -miphoneos-version-min=${MIN_SDK_VERSION} -arch x86_64 -isysroot ${IPHONESIMULATOR_SYSROOT}" "CXX=${CXX}" "CXXFLAGS=${CXXFLAGS} -arch x86_64 -isysroot ${IPHONESIMULATOR_SYSROOT}" LDFLAGS="-arch x86_64 -miphoneos-version-min=${MIN_SDK_VERSION} ${LDFLAGS}" "LIBS=${LIBS}"
        make -j${JOBS}
        make install
    )
fi

echo "$(tput setaf 2)"
echo "##################"
echo "# armv7 for iPhone"
echo "##################"
echo "$(tput sgr0)"

if [ "${BUILD_IOS_ARMV7}" == "YES" ]
then
    (
        cd ${MIMETIC_SRC_DIR}
        make distclean
        ./configure --build=x86_64-apple-${DARWIN} --host=armv7-apple-${DARWIN} --disable-shared --prefix=${PREFIX} --exec-prefix=${PREFIX}/platform/armv7-ios "CC=${CC}" "CFLAGS=${CFLAGS} -miphoneos-version-min=${MIN_SDK_VERSION} -arch armv7 -isysroot ${IPHONEOS_SYSROOT}" "CXX=${CXX}" "CXXFLAGS=${CXXFLAGS} -arch armv7 -isysroot ${IPHONEOS_SYSROOT}" LDFLAGS="-arch armv7 -miphoneos-version-min=${MIN_SDK_VERSION} ${LDFLAGS}" "LIBS=${LIBS}"
        make -j${JOBS}
        make install
    )
fi

echo "$(tput setaf 2)"
echo "###################"
echo "# armv7s for iPhone"
echo "###################"
echo "$(tput sgr0)"

if [ "${BUILD_IOS_ARMV7S}" == "YES" ]
then
    (
        cd ${MIMETIC_SRC_DIR}
        make distclean
        ./configure --build=x86_64-apple-${DARWIN} --host=armv7s-apple-${DARWIN} --disable-shared --prefix=${PREFIX} --exec-prefix=${PREFIX}/platform/armv7s-ios "CC=${CC}" "CFLAGS=${CFLAGS} -miphoneos-version-min=${MIN_SDK_VERSION} -arch armv7s -isysroot ${IPHONEOS_SYSROOT}" "CXX=${CXX}" "CXXFLAGS=${CXXFLAGS} -arch armv7s -isysroot ${IPHONEOS_SYSROOT}" LDFLAGS="-arch armv7s -miphoneos-version-min=${MIN_SDK_VERSION} ${LDFLAGS}" "LIBS=${LIBS}"
        make -j${JOBS}
        make install
    )
fi

echo "$(tput setaf 2)"
echo "##################"
echo "# arm64 for iPhone"
echo "##################"
echo "$(tput sgr0)"

if [ "${BUILD_IOS_ARM64}" == "YES" ]
then
    (
        cd ${MIMETIC_SRC_DIR}
        make distclean
        ./configure --build=x86_64-apple-${DARWIN} --host=arm --disable-shared --prefix=${PREFIX} --exec-prefix=${PREFIX}/platform/arm64-ios "CC=${CC}" "CFLAGS=${CFLAGS} -miphoneos-version-min=${MIN_SDK_VERSION} -arch arm64 -isysroot ${IPHONEOS_SYSROOT}" "CXX=${CXX}" "CXXFLAGS=${CXXFLAGS} -arch arm64 -isysroot ${IPHONEOS_SYSROOT}" LDFLAGS="-arch arm64 -miphoneos-version-min=${MIN_SDK_VERSION} ${LDFLAGS}" "LIBS=${LIBS}"
        make -j${JOBS}
        make install
    )
fi

echo "$(tput setaf 2)"
echo "###################################################################"
echo "# Create Universal Libraries and Finalize the packaging"
echo "###################################################################"
echo "$(tput sgr0)"

(
    cd ${PREFIX}/platform
    mkdir universal
    lipo x86_64-sim/lib/${LIBMIMETIC}.a i386-sim/lib/${LIBMIMETIC}.a arm64-ios/lib/${LIBMIMETIC}.a armv7s-ios/lib/${LIBMIMETIC}.a armv7-ios/lib/${LIBMIMETIC}.a -create -output universal/${LIBMIMETIC}.a
)

(
    cd ${PREFIX}
    mkdir bin
    mkdir lib
    cp -r platform/x86_64-mac/lib/* lib
    cp -r platform/universal/* lib
    rm -rf platform
    lipo -info lib/${LIBMIMETIC}.a
)

if [ -d "${PREFIX}-${MIMETIC_VERSION}" ]
then
    rm -rf "${PREFIX}-${MIMETIC_VERSION}"
fi
mv "${PREFIX}" "${PREFIX}-${MIMETIC_VERSION}"

echo Done! 
```

由 freenode irc 中#iphonedev 的 ytain 提供。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-01T21:26:16.887

这是旧帖子。但也许它会帮助某人

我如何在我的项目（shell 脚本）中构建 mimetic。

```
# Building mimetic
pushd mimetic

 # i368
 export CC="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/llvm-gcc"
 export CXX="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/llvm-g++"
 export AR="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/ar"
 export CFLAGS="-pipe -miphoneos-version-min=4.0 -fpascal-strings -fmessage-length=0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -arch i386 -O2 -fPIC -DDARWIN_NO_CARBON -Wall -W"
 export CXXFLAGS="-pipe -miphoneos-version-min=4.0 -fpascal-strings -fmessage-length=0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -arch i386 -O2 -fPIC -DDARWIN_NO_CARBON -Wall -W"
 mkdir build_i386
 pushd build_i386
  ../configure -prefix=`pwd`
  make clean
  pushd mimetic
   make || exit 1
   make install
  popd
 popd

 # armv7
 export CC="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/llvm-gcc"
 export CXX="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/llvm-g++"
 export AR="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/ar"
 export CFLAGS="-pipe -miphoneos-version-min=4.0 -fpascal-strings -fmessage-length=0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -arch armv7 -mthumb -O2 -fPIC -Wall -W -DDARWIN_NO_CARBON -D__ARM_ARCH_7__ -D__MARM_THUMB__ -D__ARM_NEON__"
 export CXXFLAGS="-pipe -miphoneos-version-min=4.0 -fpascal-strings -fmessage-length=0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -arch armv7 -mthumb -O2 -fPIC -Wall -W -DDARWIN_NO_CARBON -D__ARM_ARCH_7__ -D__MARM_THUMB__ -D__ARM_NEON__"
 mkdir build_armv7
 pushd build_armv7
  ../configure --host=i386 --prefix=`pwd`
  make clean 
  pushd mimetic
   make || exit 1
   make install
  popd
 popd

 # bundle
 lipo build_i386/lib/libmimetic.a build_armv7/lib/libmimetic.a  -create -output libmimetic.a

popd 
```

# java - 选择表名的 SQL 查询

> ID：13246606
> 
> 赞同：0
> 
> 时间：2012-11-06T07:49:53.187
> 
> 标签：java, mysql

我想获取所有以_tbl结尾的数据库表名，如xyz_tbl、pqr_tbl等。在mysql中使用java.pls帮助我..目前我的查询检索所有表名，但我只想要以_tbl结尾的表名。我的代码是...

```
public List selectTable() {
    List tableNameList= new ArrayList();

    try {
        DatabaseMetaData dbm = c.conn.getMetaData();
        String[] types = {"TABLE"};
        c.rs = dbm.getTables(null, null, "%", types);
        while (c.rs.next()) {
            tableNameList.add(c.rs.getString("TABLE_NAME"));
        }            
    } catch(Exception e) {
        System.out.println(e.toString());              
    }
    return tableNameList;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:57:01.817

你可以使用mysql查询

```
show tables from tablename like '%_tbl'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T07:57:27.983

您是否尝试过使用不同的表名模式？

你可以试试这个： -

```
c.rs = dbm.getTables(null, null, "%_tbl", types); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T08:12:35.263

我无法回复 Rohit 的帖子。他的回答看起来是正确的。

如果您对 DatabaseMetaData 的 getTables 方法的 JDK 文档执行以下操作，请参阅签名和文档注释。

```
ResultSet getTables(String catalog, String schemaPattern, String tableNamePattern, 
                    String[] types) throws SQLException 
```

*参数：*

> **目录**- 目录名称；必须与存储在数据库中的目录名称匹配；"" 检索那些没有目录的；null 表示不应使用目录名称来缩小搜索范围
> **schemaPattern** - 模式名称模式；必须与存储在数据库中的模式名称匹配；"" 检索那些没有模式的；null 表示不应使用模式名称来缩小搜索范围
> **tableNamePattern** - 表名称模式；必须与存储在数据库
> **类型**中的表名称匹配- 表类型列表，必须来自 getTableTypes() 返回的表类型列表，以包括在内；null 返回所有类型

在这种情况下，使用`%_tbl`应该可以。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T07:54:56.203

使用 String.endsWith() 方法检查表名是否以“_tbl”结尾。

例如在你的 while 循环中：

```
 while (c.rs.next())
 {
      String tableName = c.rs.getString("TABLE_NAME");
      if(tableName.endsWith("_tbl"))
      {
          tableNameList.add(c.rs.getString("TABLE_NAME"));
      }
 } 
```

# actionscript-3 - as3中的视频分割

> ID：13246609
> 
> 赞同：0
> 
> 时间：2012-11-06T07:50:01.750
> 
> 标签：actionscript-3, video

我需要在 as3 中开发一个视频编辑器。在哪里，我需要将长视频分成小片段并保存。有办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T07:58:00.647

你见过这个：来自 bytearray.org 的[FLVSlicer ？](http://www.bytearray.org/?p=955)这可能是一个好的开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:25:05.573

还要检查这个快速 Alchemy FLV 编码器：[http ://www.zeropointnine.com/blog/updated-flv-encoder-alchem/](http://www.zeropointnine.com/blog/updated-flv-encoder-alchem/)

# java - 如何在没有 System.exit 的情况下退出 Java 程序？（来自用户输入？）

> ID：13246611
> 
> 赞同：4
> 
> 时间：2012-11-06T07:50:16.087
> 
> 标签：java

这是我的代码。我不确定如何使用返回值退出程序。有任何想法吗？这是我的任务的最后一步。重要区域标有 /////// 我听说返回有效，但是当我将 main 中的 void 更改为 int 时，程序说 main 必须是 void。

```
import java.util.Scanner;

public class CommissionCalculator {

    public static void main(String args[]) {
        // Initialize a Scanner to read input from the command line
        Scanner ItemSelect = new Scanner(System.in);
        double comp = 200.00;
        double item1 = 239.99;
        double item2 = 129.75;
        double item3 = 99.95;
        double item4 = 350.89;
        double comm = 0.09;
        int choice;

        /* Note that we'll be doing this at least once and most likely multiple times...
         * Prompt the user with a menu of the four items and their values (this information is included in the problem statement)
         */
        System.out.println("Item\tValue");
        System.out.println("1\t$239.99");
        System.out.println("2\t$129.75");
        System.out.println("3\t$99.95");
        System.out.println("4\t$350.89"); 
        /* Display the user's current compensation */
        System.out.printf("Current compensation: $%.2f", comp);

        /* 
         * Prompt and take input from the user (you may assume that they will only enter int values)
         * They'll enter an item number (1 - 4) to record its sale or 0 to exit
         * 
         * NOTE: THE U0SER DOES NOT ENTER PRICES DIRECTLY... THEY ENTER ITEM NUMBERS TO INDICATE WHAT WAS SOLD
         * NOTE: THE USER MAY ENTER THE SAME ITEM NUMBRER MULTIPLE TIMES
         * 
         * If the user provides invalid input (a value other than 0 - 4) display "ERROR: Invalid input!" and prompt them again
         */
        do
        {

            System.out.print("\nPlease select an item from the " +
                               "list above (or enter 0 to exit): ");
            choice = ItemSelect.nextInt();

            {   
                if (choice != 1 && choice != 2 && choice != 3 && choice != 4 && choice != 0)
                {
                    do
                      {
                        System.out.print("ERROR: Invalid Input!\n");
                        System.out.println("Item\tValue");
                        System.out.println("1\t$239.99");
                        System.out.println("2\t$129.75");
                        System.out.println("3\t$99.95");
                        System.out.println("4\t$350.89");
                        System.out.printf("Current compensation: $%.2f", comp);
                        System.out.print("\nPlease select an item from the " +
                                   "list above (or enter 0 to exit): ");
                        choice = ItemSelect.nextInt();
                        if (choice == 1)
                        {
                            comp += (comm * item1);
                            System.out.printf("Current compensation: $%.2f", comp);
                        }
                        if (choice == 2)
                        {
                            comp += (comm * item2);
                            System.out.printf("Current compensation: $%.2f", comp);
                        }
                        if (choice == 3)
                        {
                            comp += (comm * item3);
                            System.out.printf("Current compensation: $%.2f", comp);
                        }
                        if (choice == 4)
                        {
                            comp += (comm * item4);
                            System.out.printf("Current compensation: $%.2f", comp);
                        }
                        if (choice == 0)
                        {
                            System.out.printf("Total Earnings: $%.2f", comp);
                            System.exit(0); ///////
                        }

                      }while (choice != 1 && choice != 2 && choice != 3 && choice != 4 && choice != 0); 

                }
                else
                {
                    if (choice == 1)
                    {
                        comp += (comm * item1);
                        System.out.printf("Current compensation: $%.2f", comp);
                    }
                    if (choice == 2)
                    {
                        comp += (comm * item2);
                        System.out.printf("Current compensation: $%.2f", comp);
                    }
                    if (choice == 3)
                    {
                        comp += (comm * item3);
                        System.out.printf("Current compensation: $%.2f", comp);
                    }
                    if (choice == 4)
                    {
                        comp += (comm * item4);
                        System.out.printf("Current compensation: $%.2f", comp);
                    }
                    if (choice == 0)
                    {
                        System.out.printf("Total Earnings: $%.2f", comp);
                        System.exit(0);
                    }
                }

            }
        }while (choice != 0);

        /* After the user enters 0, display the salesperson's earnings in the format "Total earnings: $NNN.NN" and exit
         * For example, if the salesperson sold two item 3s this week the final output would be "Total earnings: $217.99"
         */
        if (choice == 0)
        {
            System.out.printf("Total Earnings: $%.2f", comp);
            System.exit(0);   ///////
        }
        ItemSelect.close();
        System.exit(0);    ///////
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-06T08:00:32.987

As long as you don't need to return custom exit code (other than 0, as returned by `System.exit(0)`) and don't start new threads, you can terminate your program by doing

```
return; 
```

in your `main()` method. Note that there is no value returned, so that you don't need to change your `main()` method from `void` to `int`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-26T19:55:15.570

如果您以合乎逻辑的方式编写程序，并且代码正常运行，则不需要 exit() 或 return，除非该方法应该在最后返回某些内容，在这种情况下，您将只有一个 return 语句在您的方法结束时，例如，使用一个带有 0 案例的开关，而不是堆叠的 if 构造，因为这些构造无论如何都是低效的。案例做任何计算和输出，案例 0 做你在循环结束后所做的事情，除了不需要的 exit() 调用。一旦循环结束，方法结束。

# jquery - 按文本长度设置 div 宽度

> ID：13246612
> 
> 赞同：2
> 
> 时间：2012-11-06T07:50:04.273
> 
> 标签：jquery, html, size, font-size

我做了这个jQuery：

定义持有人 div：

```
var cimHolder = componentWrapper.find('.cim_holder'); 
```

如果标题存在数据等于标题：

```
 if(data.attr('title') != undefined && !isEmpty(data.attr('title'))){
                cimData = data.attr('title');
                cimExist = true;

        } 
```

如果标题存在，则在 div 中显示：

```
 if(cimExist){
            cimHolder.css('width', 'auto');//reset
            cimHolder.html(cimData); 
```

按字符长度设置 div 宽度：

```
 var hossz = cimData.length*6.5;
            //console.log(cimData);
            if(parseInt(cimHolder.css('width'), 10)>200){
                cimHolder.css('width', hossz+'px');
            }
            } 
```

但是这样如果你得到很多宽字符，div会很小，但是当你得到很多窄字符时，它会很长。如何解决这个问题？

编辑：如果我将 div 设置为自动或 100%，它将不适合文本，只需使用屏幕中的所有空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T08:01:45.833

inline elements like span or a -tags (`display: inline;`) are only as wide as their content. If you have a block element like a div (`display: block;`) the width is 100% by default. so if you don't need a block element, you can use display: inline;

Has you log the value of `parseInt(cimHolder.css('width'), 10)` ? Maybe the "px" unit can not be parsed correctly.

Greetings

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T07:51:33.993

那么你可以使用这两个css属性：

```
max-width: 100px;
min-width: 50px; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T07:52:16.610

为什么不使用

```
overflow:visible; 
```

这样它总是必须匹配包含文本的宽度，无论多长。

# java - 如何使用实体管理器调用具有多个输入和输出参数的存储过程

> ID：13246614
> 
> 赞同：6
> 
> 时间：2012-11-06T07:50:43.870
> 
> 标签：java, stored-procedures, jpa, ejb, java-ee-6

我们在从应用程序调用存储过程时遇到问题。数据库是`oracle 10g` 这个过程有2个输入参数和2个输出参数。

输入 1：- DB-List 输入 2：- 字符串

输出 1：-再次是一个 DB-List 输出 2：- 编号

当我们尝试使用

```
 Query q = session.createSQLQuery("{call proc_name(?,?,?,?)}"); 
```

我们无法区分`in`参数和`out`参数。那么我们应该如何使用它来处理它。

另外，我们尝试使用如下可调用语句：

```
Session session = (Session) getEntityManager().getDelegate();
SessionImpl sessionImpl = ((SessionImpl) getEntityManager().getDelegate());
Connection cc = sessionImpl.connection();
CallableStatement callableStatement = null;

callableStatement = cc.prepareCall("{call proc_name(?,?,?,?)}");
ArrayDescriptor descriptor = ArrayDescriptor.createDescriptor("DB_LIST",callableStatement.getConnection());
ARRAY paramArray = new ARRAY(descriptor, callableStatement.getConnection(), array);
callableStatement.setArray(1, paramArray);
callableStatement.setString(2, "N");
callableStatement.registerOutParameter(3, OracleTypes.ARRAY, "DB_RETURN_LIST");
callableStatement.registerOutParameter(4, Types.INTEGER);
// executing the query
callableStatement.execute(); 
```

我们收到以下错误：

```
javax.ejb.EJBException: java.lang.ClassCastException: 
$Proxy50 cannot be cast to oracle.jdbc.OracleConnection 
```

能否请您提供一些建议。

这是我们正在使用的实体管理器

```
public abstract class GenericDAO<T, ID extends Serializable> implements IGenericDAO<T, ID> {
private final Class<T> persistentClass;
@PersistenceContext(unitName = "firstPersistenceUnit")
@Produces
private EntityManager entityManager;

public void setEntityManager(final EntityManager entityManager) throws DataAccessException {
this.entityManager = entityManager;
}

public EntityManager getEntityManager() throws DataAccessException {
return entityManager;
}
} 
```

这是 Persistance.xml 中的条目

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="firstPersistenceUnit">
<provider>org.hibernate.ejb.HibernatePersistence</provider>
<jta-data-source>java:jboss/firstDataSource</jta-data-source>
<class>com.domain.Branch</class>
<exclude-unlisted-classes>true</exclude-unlisted-classes>
<shared-cache-mode>ENABLE_SELECTIVE</shared-cache-mode>
<validation-mode>AUTO</validation-mode>
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect" />
        <property name="hibernate.connection.driver_class" value="oracle.jdbc.driver.OracleDriver" />
        <property name="hibernate.show_sql" value="true"/>
        <property name="hibernate.format_sql" value="true"/>
    </properties>
</persistence-unit>

<persistence-unit name="secondPersistenceUnit">
<provider>org.hibernate.ejb.HibernatePersistence</provider>
<jta-data-source>java:jboss/secondDataSource</jta-data-source>
<class>com.domain.PocJeeCounty</class>
<exclude-unlisted-classes>true</exclude-unlisted-classes>
<shared-cache-mode>ENABLE_SELECTIVE</shared-cache-mode>
<validation-mode>AUTO</validation-mode>
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect" />
        <property name="hibernate.connection.driver_class" value="oracle.jdbc.driver.OracleDriver" />
        <property name="hibernate.show_sql" value="true"/>
        <property name="hibernate.format_sql" value="true"/>
    </properties>
</persistence-unit>
</persistence> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T09:48:46.477

不要使用第二种方式，而是使用@NamedStoredProcedureQuery 和@StoredProcedureParameter 创建和定义查询和查询参数。以下是您要求的代码

```
@NamedStoredProcedureQuery(  
    name="PROC_NAME",  
    procedureName="proc_name",  
    returnsResultSet=true/false,  
    parameters={  
        @StoredProcedureParameter(queryParameter="param1",name="p1",direction=Direction.IN,type=Integer.class),  
        @StoredProcedureParameter(queryParameter="param2",name="p2",direction=Direction.IN,type=Timestamp.class),  
        @StoredProcedureParameter(queryParameter="param3",name="p3",direction=Direction.OUT,type=String.class),  
        @StoredProcedureParameter(queryParameter="param4",name="p4",direction=Direction.OUT,type=Integer.class)  
    }  
    ) 
```

并使用 em.createNativeQuery() 方法

# c - 交换两个指针以交换数组

> ID：13246615
> 
> 赞同：3
> 
> 时间：2012-11-06T07:50:50.690
> 
> 标签：c, pointers, runtime-error

我有以下代码，我想制作它，以便板现在具有 new_board 的值，反之亦然。由于它们都是指针，我想我可以交换它们指向的地址。当我在 print2() 中打印时，地址被适当地交换了。但是，当我在 print1() 中打印时，地址以某种方式交换回来，这对我来说没有任何意义。此外，如果我在 print2() 处打印出板上的值，它们也是正确的。

```
main(){
  char *new_board = (char *)malloc(sizeof(char) * rows * cols );
  char *board = (char *)malloc(sizeof(char) * rows * cols );
  update_board2(board, new_board, rows, cols);
  print1();
}

void update_board2(char *board, char *new_board, int rows, int cols){
  //do a bunch of stuff
  char *temp = board;
  board = new_board;
  new_board = temp;
  print2();
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-06T07:55:21.330

如果要更改指针本身的值，则函数`update_board2`必须接受双指针。否则，指针会在函数内被复制，并且您只交换这些临时副本，而不是调用者传递的真实指针：

```
void update_board2(char **board, char **new_board){
  char *temp = *board;
  *board = *new_board;
  *new_board = temp;
  print2();
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-06T07:52:51.943

您需要进行以下更改：

```
update_board2(&board, &new_board, rows, cols);

void update_board2(char **board, char **new_board, int rows, int cols){
  //do a bunch of stuff
  char *temp = *board;
  *board = *new_board;
  *new_board = temp;
  print2();
} 
```

在这种情况下，指针将正确交换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T07:58:53.620

你的主要问题也需要修复

IE

```
char * new_board = (char *)malloc(sizeof(char) * rows * cols );
char * board = (char *)malloc(sizeof(char) * rows * cols ); 
```

malloc 返回一个指针，而不是一个字符。

# css - 悬停时使用的 CSS 菜单可防止输入获得焦点

> ID：13246616
> 
> 赞同：1
> 
> 时间：2012-11-06T07:50:54.943
> 
> 标签：css

我根据教程改编了这个菜单。有些东西不起作用，所以我不得不做出改变。然而，我是一个完整的 css php 新手。我遇到的问题是悬停是此菜单的关键，它会导致输入框被不可见的层覆盖，从而阻止它们获得焦点。如果您单击页面底部并向上移动，它将起作用，但如果您先浏览菜单，则不会。我已经尝试了很多方法来解决这个问题，但是由于我有限的 CSS 能力，我无法解决这个问题。所有帮助将不胜感激谢谢

它需要一张图片，但作为新成员，我似乎无法发布图片:(这是我从哪里获取图片的链接，图片在那里 [http://www.script-tutorials.com/demos/91/索引.html](http://www.script-tutorials.com/demos/91/index.html)

CSS

```
body {
background-color:#f1f1f1;
font-family: georgia,sans-serif;
color:#333;
margin:0;
padding:0;
}

#wrapper {
width:70%;
background-color:#f8f8f8;
margin:0 auto;
border-left:1px solid #ccc;
border-right:1px solid #ccc;
}

#wrapper1{
width:98%;
background-color:#f8f8f8;
margin:0 auto;
border-left:1px solid #ccc;
border-right:1px solid #ccc;
}

#content {
width:76%;
float:left;
padding:10px;
}

#content input{

margin:5;

}

#content br{
clear: left;
}

.navbar {
    position:relative;

    width:90%;
    height:20px;
    margin:20px auto;
    padding:15px;
    border-radius:3px;
    /*-moz-border-radius:3px;*/
    -webkit-border-radius:3px;
}

/*------------------------------------------------------------------------------*/
/* main menu styles */
#nav,#nav ul {
    font-family:verdana;
    list-style:none;
    margin:0;
    padding:0;
    position:absolute;

}
#nav {
    height:50px;
    left:0%;
    overflow:hidden;
    top:0;

}
#nav li {
    float:left;
    position:relative;
    z-index:10;
}
#nav li a {
    background:url(bg-menu.png) no-repeat center top;
    color:#fff;/*text color on menu*/
    display:block;
    float:left;
    font-size:14px;
    height:51px;
    line-height:40px;
    padding:0 10px;
    position:relative;
    text-decoration:none;
    z-index:20;
}
#nav li:first-child a {
    background:url(bg-menu.png) no-repeat left top;
    padding-left:45px;
}
#nav li ul li:first-child a {
    background-image:none;
    padding-left:10px;
}
#nav li.pad {
    background:url(bg-menu.png) no-repeat right top;
    display:block;
    height:51px;
    width:45px;
}
#nav li.xpad {
    background:url(bg-menu.png) no-repeat center top;
    display:block;
    height:51px;
    width:165px;
}

#nav ul {

    background:#2A3241;
    height:auto;
    padding:10px 0;
    position:absolute;
    top:-115px;
    width:120px;
    z-index:10;

    border-radius:8px; /*some css3*/
    /*-moz-border-radius:8px;*/
    -webkit-border-radius:8px;
    transition:0.8s ease-in-out;
    box-shadow:2px 2px 3px rgba(0, 0, 0, 0.5);
/*  -moz-box-shadow:2px 2px 3px rgba(0, 0, 0, 0.5);*/
    -webkit-box-shadow:2px 2px 3px rgba(0, 0, 0, 0.5);
    -moz-transition:0.8s ease-in-out;
    -o-transition:0.8s ease-in-out;
    -webkit-transition:all 0.8s ease-in-out;
}
#nav ul li {
    width:280px;
}
#nav ul li a {
    background:transparent;
    height:20px;
    line-height:20px;
    width:160px;
}

 #nav:hover {
    height:200px;
}
#nav li:hover ul {
    -moz-transform:translate(0,161px); /*some css3 - moves entire sub menu box down*/
    -o-transform:translate(0,161px);
    -webkit-transform:translate(0,161px);
}
#nav a:hover,#nav li:hover > a {/*changes color of text when mouse over*/
    color:#d632f2;

} 
```

菜单

```
<div class="navbar">

       <ul id="nav">
    <li><a ></a></li>   
            <li><a href="#">Home</a>

                    <ul>
                        <li><a href="#">Home</a></li>
                        <li><a href="#">Login</a></li>
                        <li><a href="#">Page 1</a></li>
                        <li><a href="#">Page 2</a></li>                     
                    </ul>

            </li>
 <li class="xpad"></li> 
            <li><a href="#">Testing</a>

                    <ul>
                        <li><a href="#">Single Asset</a></li>
                        <li><a href="#">Asset Groups</a></li>
                    </ul>

            </li>
 <li class="xpad"></li>     
            <li><a href="#">Reports</a>

                    <ul>
                        <li><a href="#">Page 1</a></li>
                        <li><a href="#">Page 2</a></li>                 
                    </ul>

            </li>
 <li class="xpad"></li> 
            <li><a href="#">Administration</a>

                    <ul>
                        <li><a href="#">Page 4</a></li>
                        <li><a href="#">Page 5</a></li>
                    </ul>

            </li>
 <li><a ></a></li>          
            <li class="pad"></li>
        </ul>
</div> <!-- end #nav --> 
```

测试页

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>

<meta http-equiv="content-type" content="text/html; charset=utf-8" />

<meta name="description" content="" />

<meta name="keywords" content="" />

<meta name="author" content="" />

<link rel="stylesheet" href="style.css" type="text/css"  media="screen" />

<title>Menu Test</title>

</head>

    <body>

        <div id="wrapper">
<?php include('nav.php'); ?>

<div id="content">
<label for="name">Name</label>
<input <input name="name" type="text" id="name" value = "1"><br />
<label for="phone">Phone Number</label>';
<input <input name="phone" type="text" id="phone" value = "2"><br />
<h1>Heading1</h1>
<h2>Heading2</h2>
<h3>Heading3</h3>
<h4>Heading4</h4>
<h5>Heading5</h5>

<h3>Paragraph Element</h3>

<p>

Quisque pellentesque sodales aliquam. Morbi mollis neque eget arcu egestas non ultrices neque volutpat. Nam at nunc lectus, id vulputate purus. In et turpis ac mauris viverra iaculis. Cras sed elit a purus ultrices iaculis eget sit amet dolor. Praesent ac libero dolor, id viverra libero. Mauris aliquam nibh vitae eros sodales fermentum. Fusce cursus est varius ante vehicula eget ultrices felis eleifend. Nunc pharetra rutrum nibh et lobortis. Morbi vitae venenatis velit.

</p>

<p>

Quisque pellentesque sodales aliquam. Morbi mollis neque eget arcu egestas non ultrices neque volutpat. Nam at nunc lectus, id vulputate purus. In et turpis ac mauris viverra iaculis. Cras sed elit a purus ultrices iaculis eget sit amet dolor. Praesent ac libero dolor, id viverra libero. Mauris aliquam nibh vitae eros sodales fermentum. Fusce cursus est varius ante vehicula eget ultrices felis eleifend. Nunc pharetra rutrum nibh et lobortis. Morbi vitae venenatis velit.

</p>

<h3>Another Heading Starting Point</h3>

<p>

Quisque pellentesque sodales aliquam. Morbi mollis neque eget arcu egestas non ultrices neque volutpat. Nam at nunc lectus, id vulputate purus. In et turpis ac mauris viverra iaculis. Cras sed elit a purus ultrices iaculis eget sit amet dolor. Praesent ac libero dolor, id viverra libero. Mauris aliquam nibh vitae eros sodales fermentum. Fusce cursus est varius ante vehicula eget ultrices felis eleifend. Nunc pharetra rutrum nibh et lobortis. Morbi vitae venenatis velit.

</p>

<p>

Quisque pellentesque sodales aliquam. Morbi mollis neque eget arcu egestas non ultrices neque volutpat. Nam at nunc lectus, id vulputate purus. In et turpis ac mauris viverra iaculis. Cras sed elit a purus ultrices iaculis eget sit amet dolor. Praesent ac libero dolor, id viverra libero. Mauris aliquam nibh vitae eros sodales fermentum. Fusce cursus est varius ante vehicula eget ultrices felis eleifend. Nunc pharetra rutrum nibh et lobortis. Morbi vitae venenatis velit.

</p>

</div> <!-- end #content -->

        </div> <!-- End #wrapper -->

    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:29:02.303

尝试删除

```
<input 
```

在您的输入字段之前。这可能会有所帮助。

# matlab - Matlab计算距离

> ID：13246618
> 
> 赞同：-5
> 
> 时间：2012-11-06T07:51:10.347
> 
> 标签：matlab

我在计算两个不同矩阵之间的距离时遇到问题。第一个矩阵是`5000x6`，第二个矩阵是`5x80`。

我想使用这种语法来计算距离：

```
pdist2(mCe(1,:),row); 
```

但这给了我一个错误，说“x 中的列必须在 y 中相同”。

当矩阵的列数不同时，有没有办法计算距离？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T08:06:13.397

该`pdist2`函数根据度量计算一组点之间的距离。**度量是来自相同度量空间**的 2 个向量参数的函数，因此它们需要具有相同的维度。根据度量的定义，您想做的事情是不可能的。阅读此链接了解更多详情

[http://en.wikipedia.org/wiki/Metric_space](http://en.wikipedia.org/wiki/Metric_space)

# php - 使用 MYSQL 和下拉菜单

> ID：13246621
> 
> 赞同：0
> 
> 时间：2012-11-06T07:51:21.310
> 
> 标签：php, mysql

好的，我几乎从我的数据库中获得了一个下拉菜单并发布到它以工作。我让它拉下数据并将其提交给数据库。还是一个树桩。如果我有示例“ABC Trucking”作为选项。它只将“ABC”发布到 table1。无论出于何种原因，它都没有发布两个词？有任何想法吗？查看运营商名称下拉菜单在 div 中的位置。

我的代码：

```
<?php

if (isset($_POST["submit"]) && $_POST["submit"] == "Submit")
{
    for ($count = 1; $count <= 9; $count++)
    {
        $fields[$count] = "";
        if (isset($_POST["field" . $count . ""]))
        {
            $fields[$count] = trim($_POST["field" . $count . ""]);
            //echo $fields[$count] . "<br />";
        }
    }

    $con = mysql_connect("local", "user", "pass");
    mysql_select_db("DB", $con);

    $carriername = mysql_real_escape_string($_POST['carriername']);
    $fromzip = mysql_real_escape_string($_POST['fromzip']);
    $tozip = mysql_real_escape_string($_POST['tozip']);
    $typeofequipment = mysql_real_escape_string($_POST['typeofequipment']);
    $weight = mysql_real_escape_string($_POST['weight']);
    $length = mysql_real_escape_string($_POST['length']);
    $paymentamount = mysql_real_escape_string($_POST['paymentamount']);
    $contactperson = mysql_real_escape_string($_POST['contactperson']);
    $loadtype = mysql_real_escape_string($_POST['loadtype']);

    $insert = "INSERT INTO table1 (`carriername` ,`fromzip` ,`tozip` ,`typeofequipment` ,`weight` ,`length` ,`paymentamount` ,`contactperson` ,`loadtype`) VALUES('$carriername' ,'$fromzip' ,'$tozip' ,'$typeofequipment' ,'$weight' ,'$length' ,'$paymentamount' ,'$contactperson' ,'$loadtype');";
    mysql_query($insert) or die(mysql_error());

    $select = "SELECT `carriername` ,`fromzip` ,`tozip` ,`typeofequipment` ,`weight` ,`length` ,`paymentamount` ,`contactperson` ,`loadtype` FROM `table1` ORDER BY `paymentamount` DESC;";
    $result = mysql_query($select) or die(mysql_error());
}
?>
</script>
<style ="text-align: center; margin-left: auto; margin-right: auto;"></style>
</head>
<body>
<div
 style="border: 2px solid rgb(0, 0, 0); margin: 16px 20px 20px; width: 400px; background-color: rgb(236, 233, 216); text-align: center; float: left;">
<form action="" method="post";">
  <div
  style="margin: 8px auto auto; width: 300px; font-family: arial; text-align: left;"><br>
  <table style="font-weight: normal; width: 100%; font-size: 12px;"
 border="1" bordercolor="#929087" cellpadding="6" cellspacing="0">
   <table
 style="font-weight: normal; width: 100%; text-align: right; font-size: 12px;"
 border="1" bordercolor="#929087" cellpadding="6" cellspacing="0">
    <tbody>
    <tr>
    <td style="width: 10%;">Carrier:</td><td>
 <?php  

$con = mysql_connect("local", "user", "pass");
    mysql_select_db("DB", $con);

$query=("SELECT * FROM table2"); 

$result=mysql_query($query) or die ("Unable to Make the Query:" . mysql_error() ); 
echo "<select name=carriername>";   

while($row=mysql_fetch_array($result)){  

echo "<OPTION VALUE=".$row['carriername'].">".$row['carriername']."</OPTION>"; 
} 

echo "</select>";  

?>
              </td>
        </tr>
        <tr>
              <td style="width: 35%;">Pick Zip:</td><td> <input id="fromzip" name="fromzip" maxlength="50"
 style="width: 100%;" type="text">
        </tr>
        <tr>
              <td style="width: 35%;">Drop Zip:</td><td> <input id="tozip" name="tozip" maxlength="50"
 style="width: 100%;" type="text">
        </tr>
        <tr>
              <td style="width: 35%;">Load Type:</td><td> <input id="loadtype" name="loadtype" maxlength="50"
 style="width: 100%;" type="text">
        </tr>
        <tr>
              <td style="width: 35%;">Rate:</td><td> <input id="paymentamount" name="paymentamount" maxlength="50"
 style="width: 100%;" type="text">
        </tr>
          </tbody>
  </table>
  <p style="text-align: center;"><input name="submit" value="Submit"
 class="submit" type="submit"></p>
  </div>
</form>
</div>
<p style="margin-bottom: -20px;">&nbsp;</p>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T07:57:06.170

代替 ：

```
echo "<OPTION VALUE=".$row['carriername'].">".$row['carriername']."</OPTION>"; 
```

用这个

```
echo "<OPTION VALUE='".$row['carriername']."'>".$row['carriername']."</OPTION>"; 
```

注意*'* in ur value...concate *''*到你的 value attr .. 使它成为一个字符串....

已编辑

```
echo "<select name='carriername'>";   
while($row=mysql_fetch_array($result)){  
  echo "<OPTION VALUE=".$row['carriername'].">".$row['carriername']."</OPTION>"; 
} 
echo "</select>"; 
```

# iphone - 如何在 iPhone 的运行时（相机）上使用 UISlider 更改视频或图像的亮度？

> ID：13246625
> 
> 赞同：2
> 
> 时间：2012-11-06T07:51:10.407
> 
> 标签：iphone, ipad, ios6, xcode4.5

```
-(IBAction)changeslidervalue:(id)sender
{
NSUserDefaults *defaults2 = [NSUserDefaults standardUserDefaults];   
float values = [defaults2 floatForKey:@"slider_preference"];
NSLog(@"value of slider %f",values);

if(imageView == nil){
imageView = [[UIView alloc] initWithFrame: CGRectMake ( 0, 0, 500, 500)];

imageView.backgroundColor = [UIColor whiteColor];
imageView.userInteractionEnabled  = NO;
}
if(values < 0.1){
    imageView.backgroundColor = [UIColor whiteColor];
    imageView.alpha = 0.4;
}
else if((values < 0.2) && (values > 0.1)) {
    imageView.backgroundColor = [UIColor whiteColor];
    imageView.alpha = 0.2;
}
else if((values < 0.3) && (values > 0.2)) {
    imageView.backgroundColor = [UIColor whiteColor];
    imageView.alpha = 0.1;
}
else if((values < 0.4) && (values > 0.3)) {
    imageView.backgroundColor = [UIColor whiteColor];
    imageView.alpha = 0.0;
}
else if((values < 0.5) && (values > 0.4)) {
    imageView.backgroundColor = [UIColor whiteColor];
    imageView.alpha = 0.1;
}
else if((values < 0.6) && (values > 0.5)) {
    imageView.backgroundColor = [UIColor whiteColor];
    imageView.alpha = 0.2;
}

NSLog(@" Brightness is %f",values );
[self.view addSubview:imageView];
[self.view bringSubviewToFront:imageView];
[imageView release]; 
```

}

我正在使用此代码单击相机按钮（运行时间），然后更改拍摄照片或视频的亮度。请有人帮助我或解决我的问题。

# android - 如何在单击列表视图项时插入加载对话框

> ID：13246640
> 
> 赞同：0
> 
> 时间：2012-11-06T07:52:37.827
> 
> 标签：android, progressdialog

我有一个列表活动。当我单击此列表活动的一个项目时，调用的活动需要时间来加载，因此我想添加一个加载对话框，该对话框应在活动开始后立即消失。但我做不到。我也很困惑在列表活动或被调用活动中添加对话框。在将对话框添加到后面的活动时，我收到此错误：

`android.view.WindowManager$BadTokenException: Unable to add window -- token android.app.LocalActivityManager$LocalActivityRecord@40521cd0 is not valid; is your activity running?`

这就是我插入对话框的方式

```
 super.onCreate(savedInstanceState);         
        setContentView(R.layout.graphview);     
        ProgressDialog pdialog=new ProgressDialog(this);
         pdialog.setCancelable(true);
         pdialog.setMessage("Loading ....");
         pdialog.show(); 
```

请告诉我出了什么问题。

这是我的完整代码：

```
 public class List12 extends ListActivity {

     private List<String> item = null;
     private List<String> path = null;
     private String root;
     private TextView myPath;
     private ProgressDialog mProgressDialog;
     public static final int DIALOG_DOWNLOAD_PROGRESS = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        final Bundle b=this.getIntent().getExtras(); 
        final String path=(String) b.get("key"); 
        setContentView(R.layout.list13);
        myPath = (TextView)findViewById(R.id.path);

            root = Environment.getExternalStorageDirectory().getPath()+"/"+path+"/raw/";        

            File f = new File(root);
            File[] files = f.listFiles();
            if(files==null)
            {
                Toast.makeText(this, "No stored records for the patient", Toast.LENGTH_LONG).show();
                List12.this.finish();
            }
            // TODO Auto-generated catch block
            else
            getDir(root, path);

    }

    private void getDir(String dirPath, String id)
    {
     myPath.setText("Stored data for "+id);
     item = new ArrayList<String>();
     path = new ArrayList<String>();
     File f = new File(dirPath);
     File[] files = f.listFiles();

     if(!dirPath.equals(root))
     {
      item.add(root);
      path.add(root);
      item.add("../");
      path.add(f.getParent()); 
     }

     for(int i=0; i < files.length; i++)
     {
      File file = files[i];

      if(!file.isHidden() && file.canRead()){
       path.add(file.getPath());
          if(file.isDirectory()){
           item.add(file.getName() + "/");
          }else{
           item.add(file.getName());
          }
      } 
     }

     ArrayAdapter<String> fileList =
       new ArrayAdapter<String>(this, R.layout.row, item);
     setListAdapter(fileList); 
    }@Override
     protected void onListItemClick(ListView l, View v, int position, long id) {
      // TODO Auto-generated method stub
      File file = new File(path.get(position)); 
      Bundle b=new Bundle();    
      String array = file.getAbsolutePath();
      b.putString("key",array); 
      b.putBoolean("flag", false);
      Intent in = new Intent(getParent(), Display.class);
      TabGroupActivity parentActivity = (TabGroupActivity)getParent();
      in.putExtras(b);  
      parentActivity.startChildActivity("Dsiplay", in);
      ProgressDialog pdialog=new ProgressDialog(List12.this);
      pdialog.setCancelable(true);  
    pdialog.setMessage("Loading ...."); 
      pdialog.show();
     }} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T09:41:35.403

尝试使用 AsyncTask 作为子类

```
class yourFileOperationTask extends AsyncTask<String, String, String> {

 @Override
 protected void onPreExecute(String result) {
 //create and show your progress dialog here
    }
 @Override
 protected String doInBackground(String... params) {  
 // Do the stuff here(your file operation)
  }  
 @Override
 protected void onPostExecute(String result) {
 //dismiss the dialog and  start the intent.
    }
} 
```

然后在您的 onclick 中执行此操作：

```
//note that you can change the parameter types of your AsyncTask
new yourFileOperationTask().execucte(stringArrayParameter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T07:58:24.033

将您的进度对话框放在点击侦听器中例如：

```
public class MyList extends ListActivity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    Button btn  = (Button) findViewById(R.id.button1);
    btn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            ProgressDialog pdialog=new ProgressDialog(MyList.this);
             pdialog.setCancelable(true);
             pdialog.setMessage("Loading ....");
             pdialog.show();
        //Rest of the code
        }
    });
}

} 
```

# c++ - 从大队列中过滤子队列或将几个子队列组织成一个大队列 - 如何实现？

> ID：13246641
> 
> 赞同：0
> 
> 时间：2012-11-06T07:52:19.527
> 
> 标签：c++, data-structures

这就是我想要做的：
1\. 一个包含所有元素的通用队列
2\. 几个子队列，其元素按特定标准过滤，它们的元素集不会相互交叉。
3\. 如果元素从通用队列中删除，它将从相应的子队列中删除。

删除是指迭代器不会返回它，不一定会立即删除。

现在我正在考虑持有几个带有子向量的向量。尽管从中访问随机元素会很痛苦，因为我将用于将对象排序到相应队列的标准无论如何都与我将在一般队列中寻找对象的标准无关。

如果更具体一点，我想要一个事件队列，其中包含几个按某些标准过滤的子队列，例如事件的起源点。

# ibm-doors - (DOORS/DXL) 使用 Tab 在某些属性中拆分对象文本的脚本

> ID：13246643
> 
> 赞同：2
> 
> 时间：2012-11-06T07:52:50.697
> 
> 标签：ibm-doors

我使用了一年，但现在我必须修改小脚本，而且我是`DXL`. 我已经搜索过之前的问题，但我不知道我该怎么做。

我必须开发一个脚本来分析同一正式模块中的所有对象，以从每个“对象文本”中提取由制表符分隔的不同字符串，以写入同一对象的其他不同属性。

正式的模块内容已从 Word 中导入。这样，普通文本格式被定义为“对象文本”，并且每个标题样式都与给定的级别标题相关联。这样，每个对象都提供了对象标题或对象文本（但不能同时提供两者）。具有对象标题的对象不需要任何进一步的操作。但是，对于带有对象文本的对象，我必须从对象文本中提取一些由制表符分隔的属性。

例如，典型的对象文本可能是：

```
NNNN       TEXT/TABLE/OLE OBJECT/ANY OTHER STRING      (XXXXXX)     (YYYYYY) 
```

应用脚本后，应将其转换为：

```
Attribute 1: NNNN
Object Text: TEXT/TABLE/OLE OBJECT/ANY OTHER STRING
Attribute 2: XXXXXX
Attribute 3: YYYYYY 
```

我有一个小脚本作为例子，但我整个早上都试图修改它以获得我需要但我做不到：

```
Object o = current
//bool get_text(Object o) {return o."Object Heading" "" != ""}
string get_text(Object o)
{
    if (o."Object Heading" "" != "")
        return "Object Heading" 
    else 
        return "Object Text"
}
Regexp r_id = regexp "(http://0-9a-z/.+) "
for o in current Module do
{
    string texto = o.(get_text(o))
    if (r_id text)
    {
        o."Attribute 1" = textmatch 1
        string input = richTextWithOle(o.(get_text(o)))
        string output = cutRichText(input, 0, length(textmatch 1))
        o.(get_text(o)) = richText(output) 
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:41:08.630

这是一个复杂的问题，但我想我已经弄清楚了。感谢您发布此内容，因为我将来可能会发现它也很有用。

我试过了，它似乎工作：

```
Object o

string get_text(Object o)
{
    if (o."Object Heading" "" != "")
        return "Object Heading"
    else 
        return "Object Text"
}

char cTab = '\t'  //The tab character to find
Buffer b = create
string tmp = ""   //Needed to concatenate buffer parts
int offset = 0

for o in current Module do
{
    string attr = get_text(o)
    b = o.attr                      //Put the contents in the buffer
    offset = contains(b, cTab)      //Find the first tab
    o."Attribute 1" = b[0:offset-1] //Set the first Attribute
    b = b[offset+1:]                //Remove the first attribute from the text

    offset = contains(b, cTab)
    if(offset > -1)
    {
      if(attr == "Object Heading") o.attr = b[0:offset-1]

      b = b[offset+1:]

      offset = contains(b, cTab)
      if(offset > -1)
      {
        o."Attribute 2" = b[1:offset-2] //Set the second Attribute without the ()
        b = b[offset+1:]

        o."Attribute 3" = b[1:length(b)-2]  //Set the third Attribute without the ()
      } else {
        o."Attribute 2" = b[1:length(b)-2]  //Set the second Attribute without the ()
      }
    } else {
      if(attr == "Object Heading") o.attr = b[0:]
    }

    if(attr == "Object Text")
    {
      b = richTextWithOle(o.attr) ""     //This section removes the attributes from the contents without losing the rich text formatting and OLEs that may be present.

      string word = o."Attribute 1"
      offset = contains(b, word, 0)
      tmp = b[0:offset-1] "" b[(offset+length(word)+5):]
      b = tmp

      word = "(" o."Attribute 2" ")"
      offset = contains(b, word, 0)
      if(offset > -1)
      {
        tmp = b[0:offset-6] "" b[offset+length(word):]
        b = tmp
      }

      word = "(" o."Attribute 3" ")"
      offset = contains(b, word, 0)
      if(offset > -1)
      {
        tmp = b[0:offset-6] "" b[offset+length(word):]
      }

      o.attr = richText(tmp)      //Set the Object Text or Heading
    }
}

delete b                        //Release the buffer resources 
```

让我知道这是否会给您带来任何麻烦，或者您是否想要对代码进行更详细的解释。

编辑：我更新了上面的代码来处理你提到的问题。现在应该全部设置好了。让我知道您是否还有其他问题。

# python - Python找出最高匹配

> ID：13246654
> 
> 赞同：0
> 
> 时间：2012-11-06T07:53:40.023
> 
> 标签：python, database, algorithm, set

我想制作一个工具来帮助我规划生产。

我有 2000 个产品的表格，以及大约 1500 个不同的模型板（我在一家铸造厂工作）。每个型号铭牌上最多有 10 个不同（或相同）的型号（型号 = 产品）。当我收到订单时，我将其分解并最终得到如下列表：

```
product1 = 200
product2 = 500
product3 = 300 
```

其中 productX 是代码，数字是需要的数量。

我想制作一个工具，它可以扫描模型板并找到我上面有大部分订购部件的板。我也想用 Python 来做，因为我对它很熟悉，而且我以前写过与我们的数据库交互的程序。

现在我希望我解释得足够好:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T08:04:53.417

“最高匹配”可以用两种方式解释：

### 具有最大数值的项目

`sorted`在每行的右侧使用：

```
>>> l
['product1 = 200', 'product2 = 500', 'product3 = 300']
>>> sorted(l, key=lambda x:int(x.split('=')[1]))
['product1 = 200', 'product3 = 300', 'product2 = 500']
>>> sorted(l, key=lambda x:int(x.split('=')[1]), reverse=True)
['product2 = 500', 'product3 = 300', 'product1 = 200'] 
```

### 最频繁的项目

Python[`Counter`](http://docs.python.org/2/library/collections.html#collections.Counter)可能是您正在寻找的数据结构。将您的元素插入到一个序列中，从中创建一个计数器，然后提取该`most_common()`元素。

```
>>> from collections import Counter
>>> l=['a','a','a','b','c']
>>> c=Counter(l)
>>> c.most_common()
[('a', 3), ('c', 1), ('b', 1)]
>>> c.most_common()[0][0]
'a' 
```

# php - 下载 asmx 列表文件并将它们用作 wsdl 文件 + 共享点

> ID：13246669
> 
> 赞同：1
> 
> 时间：2012-11-06T07:54:47.110
> 
> 标签：php, sharepoint, wsdl, asmx

我正在尝试通过用 php 编写的 web 服务从 share-point 2007 中的列表中检索数据：

```
<?php
//Authentication details
$authParams = array('login' => 'username', 'password' => 'password' , "authentication" => SOAP_AUTHENTICATION_DIGEST);

/* A string that contains either the display name or the GUID for the list.
 * It is recommended that you use the GUID, which must be surrounded by curly
 * braces ({}).
 */
$listName = "Testlist";
$rowLimit = '150';

/* Local path to the Lists.asmx WSDL file (localhost). You must first download
 * it manually from your SharePoint site (which should be available at
 * yoursharepointsite.com/subsite/_vti_bin/Lists.asmx?WSDL)
 */
$wsdl = "http://localhost/phpsp/Lists.wsdl";

//Creating the SOAP client and initializing the GetListItems method parameters
$soapClient = new SoapClient($wsdl, $authParams);

$params = array('listName' => $listName, 'rowLimit' => $rowLimit);

//Calling the GetListItems Web Service
$rawXMLresponse = null;
try{
    $rawXMLresponse = $soapClient->GetListItems($params)->GetListItemsResult->any;
}
catch(SoapFault $fault){
    echo 'Fault code: '.$fault->faultcode;
    echo 'Fault string: '.$fault->faultstring;
}
echo '<pre>' . $rawXMLresponse . '</pre>';
..
..
?> 
```

我在共享点和 url 中创建了列表，列表显示显示“.asmx”扩展名。我如何手动下载列表并将它们用作“.wsdl”，如本示例代码中所做的那样。

我在网上搜索了相同的内容，人们告诉它可以在以下位置获得：

`sharepoint.url/subsite/_vti_bin/Lists.asmx?WSDL`

但是，我无法获得 .wsdl 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T10:34:21.500

请从中获取此 wsdl 文件`http://sharepointserver:port/_vti_bin/Lists.asmx?wsdl` 并将文件保存`listswsdl.wsdl`到您的 php 服务器`phpsp/listswsdl.wsdl`

最后，修改这一行：

```
$wsdl = "http://localhost/phpsp/listswsdl.wsdl"; 
```

# javascript - 如何修复 jQuery 1.8 “不支持的伪：全部”错误？

> ID：13246670
> 
> 赞同：1
> 
> 时间：2012-11-06T07:55:06.237
> 
> 标签：javascript, jquery, javascript-events

它适用于 jquery 1.3，但是当我尝试用 1.8 替换它时，我得到“不支持的伪：全部”错误：

这是我当前的代码：

```
 $(function () {
            $('input[id$=btnAdd]').click(function (e) {
                e.preventDefault();
                // Assuming you get a JSON object from a service
                var lenBefore = $('select[id$=DDL] :all').length;
                var obj = { "6": "Item6", "7": "Item7", "8": "Item8" };
                $.each(obj, function (value, text) {
                    $('select[id$=DDL]').append($('<option></option>').val(value).html(text))
                });
                var lenAfter = $('select[id$=DDL] :all').length;
                $("#para").html("<b>" + (lenAfter - lenBefore) + "</b>" + " new items were added");
                $(this).attr("disabled", "disabled");
            });
        }); 
```

先生/女士，您的回答会很有帮助。谢谢++

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T08:05:21.480

我想你想要`$('select[id$=DDL] option')`or `$('select[id$=DDL] *')`or`$('select[id$=DDL]').children()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T07:59:43.437

这是因为 jquery 不支持`:all`选择器

正如您在[jquery Selectors](http://api.jquery.com/category/selectors/)中看到的那样，没有任何选择器`:all`

# r - 递归地将列添加到 data.frame，其中值对应于列表中的向量

> ID：13246671
> 
> 赞同：0
> 
> 时间：2012-11-06T07:55:10.090
> 
> 标签：r

我有一个向量列表，其值在 1 到 100 之间。

```
[[1]]
[[1]][[1]]
[1] "a"

[[1]][[2]]
[1] 41  5 53 55 56

[[2]]
[[2]][[1]]
[1] "b"

[[2]][[2]]
[1] 41 1 57 53  48 
```

等等

我如何以某种方式到达以下 data.frame

```
 no      1        2
  1      NA        b
  41      a        b
   5      a       NA
  53      a       NA
  55      a       NA
  56      a       NA
  48     NA        b
  57     NA        b
  53     NA        b 
```

并从那里填写缺失的行并根据列“no”排序。从 1 运行到 100？例如。

```
 no      1        2
  1      NA        b
  2      NA       NA
  3      NA       NA
  4      NA       NA
  5      a        NA 
```

一直等到第 100 行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T08:33:52.140

对于第一部分，试试这个：

```
x <- list(list("a",c(41,5,53,55,56)),list("b",c(41,1,57,53,48)))

xl <- lapply(x,function(y) `names<-`(as.data.frame(y),c("chr","no")))

xm <- merge(xl[[1]],xl[[2]],by="no",all=T)
xm
  no chr.x chr.y
1  1  <NA>     b
2  5     a  <NA>
3 41     a     b
4 48  <NA>     b
5 53     a     b
6 55     a  <NA>
7 56     a  <NA>
8 57  <NA>     b 
```

第二个（为简洁起见，我没有打印输出）：

```
merge(data.frame(no=1:100),xm,all=T) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T08:44:40.270

这是一种方法`lapply`：

数据：

```
dat <- list(list("a", c(41, 5, 53, 55, 56)), list("b", c(41, 1, 57, 53, 48))) 
```

解决方案：

```
lev <- 1:100                # the unique numbers
vec <- rep(NA, length(lev)) # a vector full of NAs

data.frame(no = lev,
           setNames(lapply(dat,
                           function(x) "[<-"(vec, lev %in% x[[2]], x[[1]])),
                    seq_along(dat)), check.names = FALSE) 
```

输出（前 10 行）：

```
 no    1    2
1     1 <NA>    b
2     2 <NA> <NA>
3     3 <NA> <NA>
4     4 <NA> <NA>
5     5    a <NA>
6     6 <NA> <NA>
7     7 <NA> <NA>
8     8 <NA> <NA>
9     9 <NA> <NA>
10   10 <NA> <NA> 
```

# python - Cocos2d: AttributeError: 'Director' 对象没有属性 '_window_virtual_width'

> ID：13246677
> 
> 赞同：6
> 
> 时间：2012-11-06T07:55:14.547
> 
> 标签：python, cocos2d-iphone

我们正在使用 cocos2d 框架来创建游戏。我们对这个框架完全陌生，所以我们无法让 director 对象按预期工作。这是我们的代码骨架：

```
from cocos.director import director
from cocos.layer import base_layers

import sys
import math
import os

import pyglet
import cocos

world_width = 1000
world_height = 1000
class NetworkMap(cocos.layer.ScrollableLayer):
    def __init__(self, world_width, world_height):
        self.world_width = world_width
        self.world_height = world_height
        super(NetworkMap, self).__init__()
        bg = ColorLayer(170,170,0,255,width=500,height=500)
        self.px_width = world_width
        self.px_height = world_height
        self.add(bg,z=0)

class TestScene(cocos.scene.Scene):
    def __init__(self):
        super(TestScene,self).__init__()

    def on_enter():
        director.push_handlers(self.on_cocos_resize)
        super(TestScene, self).on_enter()

    def on_cocos_resize(self, usable_width, usable_height):
        self.f_refresh_marks()

def main():
    scene = TestScene()
    director.init(world_width, world_height, do_not_scale=True)
    world_map = NetworkMap(world_width, world_height)
    scroller = cocos.layer.ScrollingManager()
    scroller.add(world_map)
    scene.add(scroller)
    director.run(scene) 
```

所以出于某种原因，导演没有我们想要的所有属性。我们的堆栈跟踪是：

```
Traceback (most recent call last):
File "map.py", line 49, in <module>
main()
File "map.py", line 39, in main
scene = TestScene()
File "map.py", line 29, in __init__
super(TestScene,self).__init__()
File "/usr/local/lib/python2.7/dist-packages/cocos2d-0.5.5-py2.7.egg/cocos/scene.py",     line 95, in __init__
super(Scene,self).__init__()
File "/usr/local/lib/python2.7/dist-packages/cocos2d-0.5.5-py2.7.egg/cocos/cocosnode.py", line 114, in __init__
self.camera = Camera()
File "/usr/local/lib/python2.7/dist-packages/cocos2d-0.5.5-py2.7.egg/cocos/camera.py", line 56, in __init__
 self.restore()
 File "/usr/local/lib/python2.7/dist-packages/cocos2d-0.5.5-py2.7.egg/cocos/camera.py", line 76, in restore
 width, height = director.get_window_size()
 File "/usr/local/lib/python2.7/dist-packages/cocos2d-0.5.5-py2.7.egg/cocos/director.py", line 522, in get_window_size
 return ( self._window_virtual_width, self._window_virtual_height)
AttributeError: 'Director' object has no attribute '_window_virtual_width' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T08:45:34.023

您需要在实例化第一个场景之前初始化导演。director 是初始化屏幕、设置 Cocos2D 框架等的全局对象。

我发现了其他一些错误：

*   您需要更改`ColorLayer`才能完全合格，例如`cocos.layer.ColorLayer`.
*   `on_enter`需要`self`作为第一个参数。
*   您需要`f_refresh_marks`在您的 TestScene 类中定义。

这是代码的工作副本。（工作，从某种意义上说它不会抛出错误，而不是它进行任何类型的滚动。）

```
from cocos.director import director
from cocos.layer import base_layers

import sys
import math
import os

import pyglet
import cocos

world_width = 1000
world_height = 1000
class NetworkMap(cocos.layer.ScrollableLayer):
    def __init__(self, world_width, world_height):
        self.world_width = world_width
        self.world_height = world_height
        super(NetworkMap, self).__init__()
        bg = cocos.layer.ColorLayer(170,170,0,255,width=500,height=500)
        self.px_width = world_width
        self.px_height = world_height
        self.add(bg,z=0)

class TestScene(cocos.scene.Scene):
    def __init__(self):
        super(TestScene,self).__init__()

    def on_enter(self):
        director.push_handlers(self.on_cocos_resize)
        super(TestScene, self).on_enter()

    def on_cocos_resize(self, usable_width, usable_height):
        self.f_refresh_marks()

    def f_refresh_marks(self):
        pass

def main():
    director.init(world_width, world_height, do_not_scale=True)
    scene = TestScene()
    world_map = NetworkMap(world_width, world_height)
    scroller = cocos.layer.ScrollingManager()
    scroller.add(world_map)
    scene.add(scroller)
    director.run(scene)

if __name__ == '__main__': main() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T16:37:34.437

我遇到了同样的问题（堆栈跟踪非常相似），这是因为我试图在调用 director.init() 之前创建一个层。将 director.init() 移到代码的前面为我修复了它。

# android - Android - 如何通过单击按钮更改 xml 视图/布局？

> ID：13246681
> 
> 赞同：2
> 
> 时间：2012-11-06T07:55:38.647
> 
> 标签：android, eclipse, sdk

我想使用一个按钮来更改 xml 布局/视图（您将显示的页面究竟称为什么）。我开发了一个应用程序，其中包含大约 5 或 6 个页面，我需要能够使用按钮前进到页面并使用不同的按钮返回上一页。

按钮 1 是前进按钮

按钮 2 是后退按钮

按钮 3 是重置按钮（返回第一页）

提前感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:03:01.447

您可以为每个视图制作活动，或者您可以实现翻转查看器

样本布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
<Button android:id="@+id/flip_me"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="Flip Me!"
/>
<ViewFlipper android:id="@+id/details"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
<TextView
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:textStyle="bold"
android:textColor="#FF00FF00"
android:text="This is the first panel"
/>
<TextView
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:textStyle="bold"
android:textColor="#FFFF0000"
android:text="This is the second panel"
/>
<TextView
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:textStyle="bold"
android:textColor="#FFFFFF00"
android:text="This is the third panel"
/>
</ViewFlipper>
</LinearLayout> 
```

示例活动：

```
public class FlipperSample extends Activity {

 ViewFlipper flipper;

 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        setContentView(R.layout.main);

        flipper=(ViewFlipper)findViewById(R.id.details);

        Button btn=(Button)findViewById(R.id.flip_me);

        btn.setOnClickListener((View.OnClickListener) new flipMyView());

    }

 class flipMyView implements View.OnClickListener {
  public void onClick(View view) {
   flipper.showNext();
  }
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:03:48.043

您可以使用 ViewFlippers，也可以在单击按钮时将布局设置为您的活动...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T08:08:39.830

使用`setContentView(R.layout.newLayout)`更改布局 在按钮上`onClick`调用`setContentView`不同的布局文件，如下所示

```
Button btn1 = (Button) findViewById(R.id.button1);
    btn1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            setContentView(R.layout.newLayout);
        }
    }); 
```

注意：由于您这样做`findViewById(R.id.button1)`会创建`NullPointerException`该视图没有该元素的情况，因此请小心

# java - Seam 持久性能否在独立应用程序中使用（在任何 Web 容器之外）

> ID：13246683
> 
> 赞同：2
> 
> 时间：2012-11-06T07:55:51.167
> 
> 标签：java, seam, cdi, weld

接缝持久性 (http://www.seamframework.org/Seam3/PersistenceModule) 可以在独立的焊接驱动应用程序中使用吗？独立是指任何 Web 容器之外的应用程序；只是一个简单的 Java 应用程序。

我想答案在理论上是肯定的，但恐怕它们是潜伏在黑暗中的依赖项（Servlet / Java EE / 等）。

我们非常满意地在我们的独立应用程序中使用 Weld，我试图弄清楚是否可以使用 Seam 持久性。

我没有找到任何文件验证/无效这种可能性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T05:14:00.270

我不认为它可以。我和一个试图让它工作的人来回走了很长一段时间，但对他来说没有任何结果。不过看看 DeltaSpike，我敢肯定那里有一些东西可以满足您的需求。

# python - Boost.Python | .so 文件中的符号，但我得到 ImportError: undefined symbol

> ID：13246689
> 
> 赞同：2
> 
> 时间：2012-11-06T07:55:49.027
> 
> 标签：python, boost, boost-python, bjam, python-import

我正在使用 Boost.Python 在我的 Python 应用程序中嵌入 C++ 代码。该模块构建良好，并带有一些警告。当我在 Python 中导入模块时，出现此错误：

```
ImportError: .../cdtm_ext.so: undefined symbol: gsl_multimin_fdfminimizer_conjugate_fr 
```

该符号定义在外部库（Gnu Scientific Library）头文件中，该符号存在于 .so 文件中：

```
$ nm cdtm_ext.so | grep gsl_multimin_fdfminimizer_conjugate_fr
   U gsl_multimin_fdfminimizer_conjugate_fr 
```

这是我的`Jamroot`文件：

```
import python ;

if ! [ python.configured ]
{
    ECHO "notice: no Python configured in user-config.jam" ;
    ECHO "notice: will use default configuration" ;
    using python ;
}

use-project boost
  : ../../../.. ;

project
  : requirements 
    <library>/boost/python//boost_python
    <include>/usr/local/include/gsl
    ;

python-extension cdtm_ext : cdtm.boost.cpp cdtm/cdtm-model.cpp cdtm/corpus.cpp    cdtm/main.cpp cdtm/opt.cpp cdtm/utils.cpp : <library-path>/usr/local/include/gsl ;

install convenient_copy 
  : cdtm_ext 
  : <install-dependencies>on <install-type>SHARED_LIB <install-type>PYTHON_EXTENSION
    <location>. 
  ; 
```

当我使用低级 C++ 接口编写自己的扩展时，我遇到了类似的问题。我通过在函数调用 `gsl`的库列表中添加库名称来解决问题。. 我不知道如何用 Boost.Python 做同样的事情。`Extension``module = Extension(... libraries = ['gsl', 'cblas'] ...)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:21:39.670

该符号`gsl_multimin_fdfminimizer_conjugate_fr`未定义在 中`cdtm_ext.so`，它被引用`cdtm_ext.so`但未定义，这就是它的意思`U`。您需要链接到您的案例中的库`gsl`以定义该符号。

有关如何将库与 bjam 链接，请参阅[http://www.boost.org/doc/libs/1_46_1/doc/html/bbv2/tutorial.html#bbv2.tutorial.prebuilt 。](http://www.boost.org/doc/libs/1_46_1/doc/html/bbv2/tutorial.html#bbv2.tutorial.prebuilt)

# javascript - 基于 json 或 XML 的 Javascript 表单过滤器制作选项框

> ID：13246692
> 
> 赞同：1
> 
> 时间：2012-11-06T07:56:01.740
> 
> 标签：javascript, json, filter

我试图想出一种基于 AJAX、XML 或 Json 的过滤方法。我想听听任何制作过这种过滤器或有任何提示的人的意见。

数据可能是：

```
<wine table>
<wine>
<color>red</color>
<origin>California</origin>
<produced>2005</produced>
<grape>Pinot Noir</grape>
</wine>

<wine>
<color>white</color>
<origin>France</origin>
<produced>2008</produced>
<grape>Chardonnay</grape>
</wine>
</wine table> 
```

必须能够：

1.  创建表单域以选择子组
2.  当用户选择第一个选项时，所有子组必须更改为正确的以下数据。（过滤选项框以匹配生成的过滤数据）
3.  如果用户在表单字段上开始选择，即 3（葡萄），则必须更改先前的选项框以更正过滤器数据。

有谁知道任何脚本或教程或任何可以帮助我的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:07:01.580

您可能想查看[ExtJS 示例](http://docs.sencha.com/ext-js/4-1/#!/example/form/xml-form.html)。

使用 ExtJS 这很容易。示意图：

*   您定义一个带有 fields的`Wine` *模型*`color`，`origin`等等。
*   使用 JSON 或 XML 类型的*读取器*和*写入*器为模型定义一个*代理*（创建/读取/更新/销毁的列表 URL） 。
***   使用表单组件创建*视图。**   创建一个`datagrid` *视图*来浏览葡萄酒并将它们加载到表单中（就像 一样简单[`form.loadRecord(wineModelRecord)`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Panel-method-loadRecord)）。请参阅[此示例](http://docs.sencha.com/ext-js/4-1/#!/example/form/form-grid.html)。*   在控制器中，您订阅`submit`表单事件以创建/更新`Wine`模型记录。**

 **实际上，我相信任何其他 MVC 框架（如 Backbone.js 或 Angular.js）都可以轻松完成相同的操作。**

# python - Scipy kd-tree 实现抛出“负维度”

> ID：13246694
> 
> 赞同：1
> 
> 时间：2012-11-06T07:56:32.883
> 
> 标签：python, numpy, scipy, kdtree

每次我尝试做任何涉及 kd-tree 的事情时，似乎都会出现以下错误。奇怪的是，就在几天前，这段代码运行良好，并且在我同事的机器上仍然运行良好（我们使用的是相同的存储库）。

无论我输入什么，它似乎都会发生。

任何人都可以提供任何见解吗？

```
 File "filename.py", line 69, in methodname
    get_index = self.kd_tree.query(array_to_query)
  File "/Library/Python/2.7/site-packages/scipy-0.12.0.dev_ddd617d_20120920-py2.7-macosx-10.8-x86_64.egg/scipy/spatial/kdtree.py", line 425, in query
    for c in np.ndindex(retshape):
  File "/Library/Python/2.7/site-packages/numpy-1.8.0.dev_9597b1f_20120920-py2.7-macosx-10.8-x86_64.egg/numpy/lib/index_tricks.py", line 536, in __init__
    x = as_strided(_nx.zeros(1), shape=shape, strides=_nx.zeros_like(shape))
  File "/Library/Python/2.7/site-packages/numpy-1.8.0.dev_9597b1f_20120920-py2.7-macosx-10.8-x86_64.egg/numpy/lib/stride_tricks.py", line 28, in as_strided
    return np.asarray(DummyArray(interface, base=x))
  File "/Library/Python/2.7/site-packages/numpy-1.8.0.dev_9597b1f_20120920-py2.7-macosx-10.8-x86_64.egg/numpy/core/numeric.py", line 320, in asarray
    return array(a, dtype, copy=False, order=order)
ValueError: negative dimensions are not allowed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:32:50.967

从来没有找到答案，但强制重新安装 numpy 和 scipy 解决了这个问题。

# c# - 单击组标题时如何检查所有项目？

> ID：13246696
> 
> 赞同：0
> 
> 时间：2012-11-06T07:56:37.233
> 
> 标签：c#, winforms, objectlistview

我使用[ObjectListView](http://objectlistview.sourceforge.net/cs/index.html)列出所有项目。而且当我单击由ObjectListView生成的Group单元格标题时，我不知道如何接收单击事件。

我想实现检查（或取消选中）单击组中所有项目的功能。

* * *

编辑：

我通过添加一个按钮来检查/取消选中所选项目来克服。ObjectListView 将选择单击组的所有项目，因此我通过按钮调用选中/取消选中行为。

* * *

编辑：

GroupTaskClicked 事件不起作用。ObjectListView的版本是v2.6.0（2012/10/20），用Visual Studio 2010。

好吧，GroupStateChanged 事件会触发，但它会触发不止一次。我将详细解释我的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:42:01.397

GroupStateChanged 将触发。我通过以下方法收听事件。

```
 private void olvList_GroupStateChanged(object sender, BrightIdeasSoftware.GroupStateChangedEventArgs e)
        {
            Trace.WriteLine("Name:" + e.Group.Header + "\r\nSelected:" + e.Group.Selected + "\r\nFocused:" + e.Focused + "\r\n");

        } 
```

当我单击一个名为“MyClickGroup”的组单元格时，它将触发 2 个事件。

```
Name:MyClickGroup
Selected:True
Focused:False
Name:MyClickGroup
Selected:True
Focused:True 
```

如果我单击一个名为“MyNewGroup”的组单元格，而另一个名为“MyClickGroup”的单元格首先被单击，它将触发 4 个事件。

```
Name:MyClickGroup
Selected:True
Focused:False
Name:MyClickGroup
Selected:False
Focused:False
Name:MyNewGroup
Selected:True
Focused:False
Name:MyNewGroup
Selected:True
Focused:True 
```

因此，`GroupStateChanged`event`Selected`和`Focused`state 是`True`，表示当前选定和聚焦的组单元格。这是我想要的关于组单元格上的单击事件。

# vb.net - 当用户点击外部时关闭窗口窗体

> ID：13246699
> 
> 赞同：3
> 
> 时间：2012-11-06T07:56:39.423
> 
> 标签：vb.net, winforms

任何人都知道如何编写代码，如果用户点击窗体外的窗体，窗体将自动关闭？即，我有两个表格，当我显示 form2 然后我点击它外部时，表格 2 将关闭。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T08:02:29.900

Does this help? Try the first two solutions, one of which should work for you.

[Winforms: Close modal dialog when clicking outside the dialog](https://stackoverflow.com/questions/4507483/winforms-close-modal-dialog-when-clicking-outside-the-dialog)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T09:20:44.960

您可以`LostFocus`像这样简单地使用表单的内置事件

```
Private Sub Form1_LostFocus(ByVal sender As Object, ByVal e As EventArgs) _
        Handles Me.LostFocus

    Me.Close()
End Sub 
```

# iphone - 如何在 iOS 6 中的地图上绘制路线？

> ID：13246702
> 
> 赞同：3
> 
> 时间：2012-11-06T07:56:59.827
> 
> 标签：iphone, ios, mapkit, ios6-maps, maproute

我想在地图上显示地图并绘制路线。我的应用程序支持 ios 4 plus。那么我应该如何使用地图在 ios 6 上和以前一样工作。我也想知道我应该在我的应用程序中使用自定义地图视图来显示地图和路线还是应该使用

```
[[UIApplication sharedApplication] openURL:] 
```

我从来没有用户`MapKits`。所以请提供任何教程。也让我知道是否有任何可以使用的 rd 方库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T12:00:45.410

如果您不想要应用内地图。使用以下内容：

```
NSString *destinationAddress = @"Amsterdam";

Class itemClass = [MKMapItem class];
if (itemClass && [itemClass respondsToSelector:@selector(openMapsWithItems:launchOptions:)]) {

    CLGeocoder *geocoder = [[CLGeocoder alloc] init];
    [geocoder geocodeAddressString:destinationAddress completionHandler:^(NSArray *placemarks, NSError *error) {
        if([placemarks count] > 0) {

            MKPlacemark *placeMark = [[MKPlacemark alloc] initWithPlacemark:[placemarks objectAtIndex:0]];

            MKMapItem *mapItem = [[MKMapItem alloc]initWithPlacemark:placeMark];

            MKMapItem *mapItem2 = [MKMapItem mapItemForCurrentLocation];

            NSArray *mapItems = @[mapItem, mapItem2];

            NSDictionary *options = @{
        MKLaunchOptionsDirectionsModeKey:MKLaunchOptionsDirectionsModeDriving,
        MKLaunchOptionsMapTypeKey:
            [NSNumber numberWithInteger:MKMapTypeStandard],
        MKLaunchOptionsShowsTrafficKey:@YES
            };

            [MKMapItem openMapsWithItems:mapItems launchOptions:options];

        } else {
            //error nothing found
        }
    }];
    return;
} else {

    NSString *sourceAddress = [LocalizedCurrentLocation currentLocationStringForCurrentLanguage];

    NSString *urlToOpen = [NSString stringWithFormat:@"http://maps.google.com/maps?saddr=%@&daddr=%@",
                 [sourceAddress stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding],
                 [destinationAddress stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:urlToOpen]];
} 
```

这将打开地图应用程序并检查它是 ios5 还是 ios6。

对于 ios5，我使用`LocalizedCurrentLocation`这篇文章中的[http://www.martip.net/blog/localized-current-location-string-for-iphone-apps](http://www.martip.net/blog/localized-current-location-string-for-iphone-apps)

对于 ios6，我使用 CLGeocoder 获取地标，然后用它和当前位置打开地图。

记得添加`CoreLocation.framework`和`MapKit.framework`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T08:21:08.353

我认为这会帮助你：

[http://developer.decarta.com/Apis/IOS/Tutorial/Lesson6](http://developer.decarta.com/Apis/IOS/Tutorial/Lesson6)

[http://developer.decarta.com/Apis/IOS/Tutorial/Lesson6Example](http://developer.decarta.com/Apis/IOS/Tutorial/Lesson6Example)

或这个？

[http://spitzkoff.com/craig/?p=136](http://spitzkoff.com/craig/?p=136)

如果您想要地图中的数据，也许这样做很有趣：

[http://www.raywenderlich.com/21365/introduction-to-mapkit-in-ios-6-tutorial](http://www.raywenderlich.com/21365/introduction-to-mapkit-in-ios-6-tutorial)

或者一些关于 Mapkit 的基本信息

[http://www.techotopia.com/index.php/Working_with_Maps_on_the_iPhone_with_MapKit_and_the_MKMapView_Class](http://www.techotopia.com/index.php/Working_with_Maps_on_the_iPhone_with_MapKit_and_the_MKMapView_Class)

# ios - AIR for iOS：鼠标点击不适用于一帧？

> ID：13246706
> 
> 赞同：-1
> 
> 时间：2012-11-06T07:57:12.800
> 
> 标签：ios, actionscript-3, air

所以我现在有一个非常奇怪的错误。我正准备将我的应用程序部署到 App Store（已经在我的 iPhone 上按预期运行了多个调试版本），但突然之间，鼠标点击似乎无法在单个帧上工作。

它们在 Flash CS6 Pro 的 iPhone 模拟器 (ADL) 中按预期运行。

事件在几个帧中以相同的方式设置，根本不应该有问题。自从更新程序的其他元素以来，我没有更改事件侦听器或函数。

还值得注意的是，这些按钮上的 MOUSE_DOWN 动画工作正常。

我尝试了以下方法来解决问题，但无济于事：

*   将事件侦听器直接添加到每个按钮
*   让一个事件侦听器处理每个按钮
*   将该单个事件侦听器添加到舞台
*   使用 MOUSE_UP 事件而不是 MouseEvent.CLICK

非常感谢您的及时帮助，因为我希望部署此应用程序以尽快对其进行审核。此外，仅仅因为它让我感到困惑......

提前非常感谢，哈利。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-06T09:35:49.710

对 flash.events.MouseEvent 进行第二次导入会导致冲突，导致鼠标单击无法正常工作（在此特定帧上再次调用导入语句，因此为什么其他帧按预期工作，但这个没有）。

# ios - 如何在 cocos2d 中添加 iPhone5 支持

> ID：13246707
> 
> 赞同：5
> 
> 时间：2012-11-06T07:57:18.250
> 
> 标签：ios, cocos2d-iphone, iphone-5

我使用了 Cocos2d：

```
-hd.png for iPhone HD 
-ipad.png for iPad. 
-ipadhd.png for iPad HD. 
```

像这样，我们需要为 iPhone 5 使用哪个扩展？另外如何在 cocos2d 中启用 iPhone 5 支持？

**更新 1：**我们可以很容易地支持 iPhone5 这样

```
#define IS_IPHONE5 (([[UIScreen mainScreen] bounds].size.height-568)?NO:YES)

#define TEX_GAME_BG   (IS_IPHONE5) ? ( @"bg-whd.png") : ( @"bg.png")

mBG1 = [CCSprite spriteWithFile:TEX_GAME_BG]; 
```

**更新 2：**  使用通用功能...把它放在 cocos2d.h 或任何通用文件中

```
static inline NSString *i5res(NSString * data)
{
    if(IS_IPHONE5)
    {
        return [data stringByReplacingOccurrencesOfString:@"." withString:@"-whd."];
    }

    return data;
}
//usage
CCSprite *bg = [CCSprite spriteWithFile:i5res(@"bg.png")]; 
```

**更新 3：** Cocos2d 现在也支持 iphone5。-iphone5hd

```
 imageName-iphone5hd.png for iPhone 5 HD. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T09:22:44.570

cocos2d 中没有 iPhone5 尺寸图片的扩展。如果您需要使用这样的图像，您必须自己加载它们。

也许还可以考虑如何完全避免图像。如果您使用背景图像，也许您可​​以使用平铺图像代替？

启用 iPhone 5 支持与任何 iOS 项目相同，只需将 Default-568h@2x.png 启动图像添加到您的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T10:59:21.770

有一种方法可以完成这项工作，您必须更新 cocos2d (v2.0) 框架中的 CCFileUtils 文件。检查此链接，文件和信息在那里

[http://www.cocos2d-iphone.org/forum/topic/39491/page/4](http://www.cocos2d-iphone.org/forum/topic/39491/page/4)

# asp.net - 根文件夹中是否可以有多个 Web.Config 文件

> ID：13246710
> 
> 赞同：3
> 
> 时间：2012-11-06T07:57:01.677
> 
> 标签：asp.net

我们可以通过保留单个 web.config 来配置特定文件夹中网页的设置。可以有多个 web.config 在同一个层次结构中，因为我在**web.config.debug**和**web.config.release**和**web.config**中看到了一些。为什么他们的目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T07:59:21.463

这些是[web.config 转换](http://msdn.microsoft.com/en-us/library/dd465326.aspx)，它允许您将更改应用于项目的不同构建（调试、开发、发布等）。

后缀为`.debug`,`.release`等的是转换文件。他们获取基础`web.config`并使用您指定的 XML-Document-Transform 属性对其进行修改。

一个经典的用例是`debug=true`属性，您永远不想在生产中使用它。您可以使用简单的转换将其从`web.config.release`文件中删除：

**网页配置**

```
<configuration>
    <compilation debug="true" />
</configuration> 
```

**Web.config.release**

```
<configuration>
    <compilation xdt:Transform="RemoveAttributes(debug)" />
</configuration> 
```

# grails - 如何在grails的域类中限制hasMany的数量有限

> ID：13246714
> 
> 赞同：1
> 
> 时间：2012-11-06T07:57:40.040
> 
> 标签：grails, grails-orm, has-many

我正在开发一个 grails 应用程序，我有像 Tip、TipTag 这样的域类。概念是，对于一个提示，我应该只有 5 个 TipTag。

```
class Tip {
    String description
    static hasMany = [tags:TipTag]

    static constraints = {
        description(nullable:false,size:50..500)
    }   
} 
```

如何在grails中限制这一点？还有其他方法吗？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T08:45:01.753

[maxSize](http://grails.org/doc/latest/ref/Constraints/maxSize.html) [约束](http://www.grails.org/doc/latest/ref/Constraints/Usage.html)应该为您完成这项工作：

```
class Tip {
    String description
    static hasMany = [tags:TipTag]

    static constraints = {
        description(nullable:false,size:50..500)
        tags(maxSize: 5)
    }   
} 
```

# delphi - xmpp如何获取当前连接jid名称

> ID：13246716
> 
> 赞同：0
> 
> 时间：2012-11-06T07:58:02.457
> 
> 标签：delphi, xmpp

我有两个关于 XMPP 协议的问题：

1）如何通过请求**IQ 命令**为我当前的 JID（我的连接帐户）首次注册时请求**名称**？

 **2) 如何更改我的花名册帐户之一的**昵称**(JIDS) ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T09:11:53.880

[http://www.rfc-editor.org/rfc/rfc6121.txt](http://www.rfc-editor.org/rfc/rfc6121.txt)

第 2.1.2.4 节描述了 NAME 属性。

> 'name' 属性......由用户（不是联系人）确定。尽管“名称”属性的值可能对人类用户有意义，但它对服务器是不透明的。客户端在添加或更新名册项目时包含“名称”属性是可选的。

这基本上意味着连接本身没有NAME。

而且，如果您将自己添加到自己的名册中 - 那么为任何其他联系人获取 NAME 并没有什么不同。

* * *

第 2.1.5 节显示了更改某些属性所需的节 - 在您的情况下，这将是 NAME 属性。

* * *

如果您对 XMPP 有任何疑问 - 最简单的方法是获取一些长期存在的知识，例如 JAJC 或 Vacuum-IM，打开 XML 日志控制台，执行您的操作并阅读真正交换了哪些节。**

# .net - Azure CloudTable 是线程安全的吗？

> ID：13246720
> 
> 赞同：24
> 
> 时间：2012-11-06T07:58:24.913
> 
> 标签：.net, azure, azure-storage, azure-table-storage

我正在使用来自不同线程（ASP.NET 应用程序）的 Storage SDK 2.0 写入 Azure 表存储。

CloudTable对象是**线程****安全的**吗？我可以只初始化一次 CloudStorageAccount、CloudTableClient 和 CloudTable（例如，在静态构造函数中），然后在不同的线程中使用它们吗？

还是每次从空白处创建所有 CloudStorageAccount、CloudTableClient 和 CloudTable 对象更好（如[本文](https://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services/)所示）？它会以任何方式影响性能吗？

*每次对表执行操作时获取 CloudTable 实例的首选方法是什么？*

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-06T09:40:56.537

[云存储账户](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.cloudstorageaccount.aspx)

> 此类型的任何公共静态（在 Visual Basic 中为 Shared）成员都是线程安全的。不保证任何实例成员都是线程安全的。

[云表客户端](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storageclient.cloudtableclient.aspx)

> 此类型的任何公共静态（在 Visual Basic 中为 Shared）成员都是线程安全的。不保证任何实例成员都是线程安全的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-04T03:31:29.680

1.  不幸的是，它们不是线程安全的
2.  幸运的是，这并不重要：通信是基于 HTTP 的，这意味着没有重用连接，并且每次应用程序只是创建一个新的 HTTP 连接。所以只需重新创建每个线程的所有内容。而且我什至在一个线程中进行了测试，为每个查询重新创建所有内容只需要花费更多。

# java - 模棱两可的方法

> ID：13246723
> 
> 赞同：0
> 
> 时间：2012-11-06T07:58:32.267
> 
> 标签：java, methods, paragraph, ambiguous

我有这段代码：

```
public Paragraph paragraph() {
    Paragraph paragraph = new Paragraph(before.getLeading());
    paragraph.add(before);
    if (numbered) {
        paragraph.addSpecial(new Chunk(String.valueOf(pageN), before.getFont()));
    }
    if (after != null) {
        paragraph.addSpecial(after);
    }
    paragraph.setAlignment(alignment);
    return paragraph;
} 
```

编译器说在第二行我有这个错误：

```
reference to Paragraph is ambiguous, both method Paragraph(float) in Paragraph and method Paragraph(Chunk) in Paragraph match 
```

# c# - 如何将多个系列添加到动态图表

> ID：13246737
> 
> 赞同：0
> 
> 时间：2012-11-06T07:59:10.857
> 
> 标签：c#, asp.net

我把我的所有代码并尝试创建一个动态图表，该系列来自数据库，我循环通过 listitem 集合并尝试填充系列并添加到图表中。但是即使我循环通过（“@Plant2”，DT.Rows [i ][0].ToString()); Plant2 并尝试填充多个系列

植物系列 = DT.Rows[i][0].ToString();

Chart1.Series.Add(plantseries);

然后给系列 X 和 Y 值成员。最后我无法获得图表中的所有系列，结果表明循环中所有项目的最后一个相同值，就像我的代码将最后一个值覆盖到相同的系列名称上。请帮助我，我搞不清楚了。

```
 string[] lstBox = HiddenField2.Value.Split(seperator, StringSplitOptions.RemoveEmptyEntries);
            ListItemCollection lstItemCollection = new ListItemCollection();

            for (int i = 0; i < lstBox.Length; i++) 
              {
                  lstItemCollection.Add(new ListItem(lstBox[i])); 
              }

            DataTable DT = new DataTable();
            DT.Columns.Add("Plant");
            foreach (ListItem item in lstItemCollection) 
            { 
                DataRow dr = DT.NewRow();            
                dr["Plant"] = item.Value; 
                DT.Rows.Add(dr); 
            } 

            String plantseries = "";
            Chart1.Legends.Add("Plants");
            LegendItem legendItem = new LegendItem();

        for (int i = 0; i < lstItemCollection.Count; i++)
        {
            DataTable monthlychart = new DataTable();
            if (cnn.State == ConnectionState.Closed)
            {
                cnn.Open();
                SqlCommand cmd1 = new SqlCommand("prc_Chart_individual_plant", cnn);
                cmd1.CommandType = System.Data.CommandType.StoredProcedure;
                cmd1.Parameters.AddWithValue("@Plant", strPlants.ToString());
                cmd1.Parameters.AddWithValue("@Configuration", strconfig.ToString());
                cmd1.Parameters.AddWithValue("@Startdate", dtstart);
                cmd1.Parameters.AddWithValue("@Enddate", dtend);
                cmd1.Parameters.AddWithValue("@Plant2", DT.Rows[i][0].ToString());
                SqlDataAdapter adapt1 = new SqlDataAdapter(cmd1);
                adapt1.Fill(monthlychart);
                Chart1.DataSource = monthlychart;
                cnn.Close();
            }

            plantseries = DT.Rows[i][0].ToString();
            Chart1.Series.Add(plantseries);
            Chart1.Series[plantseries].XValueMember = Convert.ToString(monthlychart.Columns[4]);
            Chart1.Series[plantseries].YValueMembers = Convert.ToString(monthlychart.Columns[8]);                 
            Chart1.DataBind();

            legendItem.Name = plantseries;                
            legendItem.BorderWidth = 4;
            legendItem.ShadowOffset = 1;

            Random random = new Random();
            Color c = Color.FromArgb(random.Next(0, 255), random.Next(0, 255), random.Next(0, 255));
            legendItem.Color = c;

            Chart1.ChartAreas[0].AxisX.LabelStyle.Format = "M.yy";

            Chart1.Series[plantseries].IsVisibleInLegend = true;
            Chart1.Series[plantseries].IsValueShownAsLabel = true;
            Chart1.Series[plantseries].ToolTip = "Data Point Y Value: #VALY{G}";
         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:27:33.500

这是最好的方法，它有效

```
for(int j=0; j<monthlychart.Rows.Count; j++)
                {
                    if(monthlychart.Rows[j][4]!=DBNull.Value)
                    {
                        DateTime xvalue = Convert.ToDateTime(monthlychart.Rows[j][4]);
                        double yvalue = Convert.ToDouble(monthlychart.Rows[j][8]);
                        Chart1.Series[plantseries].Points.AddXY(xvalue,yvalue);
                        Chart1.DataBind();

                    }
                } 
```

# ios - Replace snapshot image (taken by iOS when app goes to BG) when app resumes

> ID：13246739
> 
> 赞同：3
> 
> 时间：2012-11-06T07:59:01.643
> 
> 标签：ios

I need to hide/replace the screenshot image taken by iOS when app goes to background. The purpose is to display different image(similar to splash screen) instead of screenshot taken by iOS. Also i cannot add any screen on window when app goes to background because that will cause showing of the added screen every time when app resumes.

What i want is in some circumstance the should not show the screenshot taken by iOS when app resumes and instead of that i should be able to show different splash screen.

Thanks Rohit

# visual-studio-2010 - To find ending of a if { visual studio 2010

> ID：13246746
> 
> 赞同：0
> 
> 时间：2012-11-06T07:59:39.720
> 
> 标签：visual-studio-2010

> **Possible Duplicate:**
> [Go to Matching Brace in Visual Studio?](https://stackoverflow.com/questions/1501921/go-to-matching-brace-in-visual-studio)

"if" will have starting { and ending } how can we jump to the closing } of a if statement from starting { of the if. What is the sort cut for the same in visual studio 2010

# java - 为什么我不能插入我的 File 对象作为比较？

> ID：13246757
> 
> 赞同：0
> 
> 时间：2012-11-06T08:00:23.727
> 
> 标签：java, oop, object, comparable

`theTree.insert(new File("a", 1));`我收到与:一致的错误`The method insert(Comparable) in the type Tree is not applicable for the arguments (File)`。

当我尝试这样投射时，`theTree.insert((Comparable) new File("a", 1));`我得到其他错误： E `xception in thread "main" java.lang.ClassCastException: File cannot be cast to java.lang.Comparable at TreeApp.main(tree.java:134)`。

为什么我不能通过这个对象？

我的对象：

```
class FileObject
{
    public String name;
    public int size;

    File(String a, int b)
    {
        this.name = a;
        this.size = b;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T08:02:47.880

因为你的`File`类没有实现`Comparable`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T08:03:27.110

你需要实施`Comparable<File>`

```
class File implements Comparable<File>
    {
        public String name;
        public int size;

        File(String passedName, int passedSize)
        {
            this.name = passedName;
            this.size = passedSize;
        }

        @Override
        public int compareTo(File o) {
            //e.g Provide comparable on size
            return Integer.valueOf(size).compareTo(o.size);
        }
    } 
```

参考：

*   [`Comparable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)

*注意：请`compareTo`在合同中提供实现`equals`方法。*

# python - 如何将库添加到我的 Google App Engine 项目？

> ID：13246764
> 
> 赞同：0
> 
> 时间：2012-11-06T08:01:02.187
> 
> 标签：python, google-app-engine

针对[Google 的这个错误，](http://code.google.com/p/googleappengine/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Component%20Status%20Stars%20Summary%20Language%20Priority%20Owner%20Log&groupby=&sort=&id=2749)我计划用最新版本的 WebOb 版本 1.2.3 替换 webob 库，据传它可以修复这个错误。我已经从他们的网站下载了该项目，只是将其添加到项目根目录并不能解决问题。下载项目的文件夹名为“WebOb-1.2.3”

在 App.yaml 中需要做什么才能包含我上传到服务器的最新版本？

我正在运行python。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:27:59.103

通常，您只需将文件夹（例如 /webob）复制到应用程序目录的根目录，并且由于不直接支持该版本，因此请不要将其包含在 app.yaml 中。

# mysql - How to get the count of rows from a table in cakephp

> ID：13246769
> 
> 赞同：1
> 
> 时间：2012-11-06T08:01:39.073
> 
> 标签：mysql, cakephp

I have two tables:

```
id  category    status
1   test        1
2   test1       1
3   test2       1 
```

This is the `group_master` table.

```
groupid     groupname   groupmaster 
1           yy          1
2           xx          1
3           yyyy                1
4           xrx         1
5           yy          2
6           xx          2
7           yyyy                2
8           xfgdrx              3 
```

This is the `membergroup` table.

The `group_master.id` is same as in `membergroup.groupmaster`.That menas i want to get each row from first table and also want to get the count from second table

That means:

```
id  category    status  Count
1   test        1       4
2   test1       1       3
3   test2       1       1 
```

This is the result i want to get.

How can i do this in Cakephp with pagination ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T08:06:53.800

尝试这个：

您需要**加入**两个表并执行**GROUP BY**

```
SELECT g.id,g.category,g.status,count(*) as Count
FROM   group_master g
JOIN   membergroup m
ON     g.id=m.groupmaster
GROUP BY g.id,g.category,g.status 
```

# [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/e3c18/2)

# c++ - ifstream read() 的奇怪问题

> ID：13246770
> 
> 赞同：0
> 
> 时间：2012-11-06T08:01:54.117
> 
> 标签：c++

我是论坛的新手。我有一个奇怪的问题。我有一个简单的代码，它使用 read() 函数从文件中读取未格式化的数据。代码如下。

```
int main () {
    ifstream meshfile;
    char buf[1000], ch;
    memset(buf, 0, 1000);
    meshfile.open ("sometextfile");
    meshfile.read (buf, 1000);//38+62+(19*47) + 7);
    cout << strlen(buf) << std::endl;
    cout << buf << std::endl;
} 
```

使用下面的示例输入文件运行代码时，会给出 1006 作为 buf 的长度，并为 buf 打印额外的字符。奇怪的是，这只发生在 bufsize 为 1000 & 1000 个字符被读取时。将 bufsize 更改为 > 1000 并读取 1000 个字符不会产生此错误。这可能是编码问题吗？

示例输入文件是

> fdjgjdskgggggggggggggggggggggggggggggj bvjgdsv dsjkvgds gvdsj gvjdsgvjksdjkfgdsjkgfdsjgfsdjgfjkdsgfkjsdgjfgsdjfgdsjgfsdjgfjsdgfjsgfjsdgfjgsdjfgsdjfgdsjgfsdjgfsdjgfjsdgfjsdgfjsdg fdjgjdskgggggggggggggggggggggggggggggj bvjgdsv dsjkvgds gvdsj gvjdsgvjksdjkfgdsjkgfdsjgfsdjgfjkdsgfkjsdgjfgsdjfgdsjgfsdjgfjsdgfjsgfjsdgfjgsdjfgsdjfgdsjgfsdjgfsdjgfjsdgfjsdgfjsdg fdjgjdskgggggggggggggggggggggggggggggj bvjgdsv dsjkvgds gvdsj gvjdsgvjksdjkfgdsjkgfdsjgfsdjgfjkdsgfkjsdgjfgsdjfgdsjgfsdjgfjsdgfjsgfjsdgfjgsdjfgsdjfgdsjgfsdjgfsdjgfjsdgfjsdgfjsdg fdjgjdskgggggggggggggggggggggggggggggj bvjgdsv dsjkvgds gvdsj gvjdsgvjksdjkfgdsjkgfdsjgfsdjgfjkdsgfkjsdgjfgsdjfgdsjgfsdjgfjsdgfjsgfjsdgfjgsdjfgsdjfgdsjgfsdjgfsdjgfjsdgfjsdgfjsdg fdjgjdskgggggggggggggggggggggggggggggj bvjgdsv dsjkvgds gvdsjgvjdsgvjksdjkfgdsjkgfdsjgfsdjgfjkdsgfkjsdgjfgsdjfgdsjgfsdjgfjsdgfjsgfjsdgfjgsdjfgsdjfgdsjgfsdjgfsdjgfjsdgfjsdgfjsdg fdjgjdskgggggggggggggggggggggggggggggj bvjgdsv dsjkvgds gvdsj gvjdsgvjksdjkfgdsjkgfdsjgfsdjgfjkdsgfkjsdgjfgsdjfgdsjgfsdjgfjsdgfjsgfjsdgfjgsdjfgsdjfgdsjgfsdjgfsdjgfjsdgfjsdgfjsdg

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:06:27.903

你的问题是使用[`strlen`](http://en.cppreference.com/w/cpp/string/byte/strlen) 它期望一个以`\0`.

`read`不在`\0`缓冲区末尾添加 a ，因此 strlen 读取超出缓冲区的边缘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:04:53.200

使缓冲区长度为 1001 个字符，为 nul 终止留出空间。Memset 1001 也是。没有那个 nul 终止符， strlen 将无法工作。

更好的是，使用 <array> 而不要使用 memset。一个简单的 buf[1000] = 0 就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T08:06:12.000

从文件中读取的不是以 '\0' 结尾的字符串，而是原始数据。您应该检查包含实际读入缓冲区的字节数的 stream.gcount() 的返回值，并在后续代码中使用它。[手册在这里](http://www.cplusplus.com/reference/iostream/istream/read/)。

```
 size_t size = meshfile.read(buf, sizeof(buf)/sizeof(*buf)).gcount();
  std::cout << size << std::endl; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T09:12:32.260

我认为这里的人，我的意思是：

1)read(..) 不添加空终止符。

2）您使用 memset 将缓冲区初始化为 0。当您读取 < 1000 个字符时，读入的最后一个字符之后的数组元素仍然为 0（实际上为 null，因为它们已初始化为该值）因此即使 read(..) 没有添加 null 终止符，事情没有打破。这就是为什么 Jive Dadson 要求您将缓冲区大小调整为 1001 个字符并将您的数组初始化为 0，这样即使您读入 1000 个字符，第 1001 个字符仍然是 0，并将充当空终止符。

但这实际上是一个错误。考虑一下当你读到最后一行 < BUF_SIZE 时会发生什么？因此，最好按照一些海报的建议检查每轮读入的字符数。

3）当您读取 > 1000 个字符时，您是否更改为更大的缓冲区，并且您是否为这个更大的缓冲区将缓冲区初始化为“0”？如果是这样，自然不会有问题，因为情况与上述相同。如果没有，我很好奇您如何将 > 1000 个字符读入 1000 个字符的缓冲区。

4）基本上您当前读取数据的方法是不可靠的。您应该调整缓冲区的大小，使其比您打算读取的最大值多 1 个元素。每次读取后，如果您打算将 buf 作为字符串传递并执行复制、printf 等操作，则应获取实际读入的字符数并设置空终止符。

# java - How to set repetition when timeout exception occurs

> ID：13246771
> 
> 赞同：0
> 
> 时间：2012-11-06T08:02:02.653
> 
> 标签：java

I've used JAXWS-RI 2.1 to create an interface for my web service, based on a WSDL. I can interact with the web service no problems, but haven't been able to specify repetition when SocketTimeoutException:

```
try {
  final Response response = service.serviceName(params);
} catch (SocketTimeoutException e) {

} 
```

is there a way how to specify it in service or I need to code this ?

for example I would set for 3 repetation and when after 3 exception there will be stil timemout so this exception will be thrown

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:20:25.170

没有本地方法可以做到这一点（我怀疑你来自 Ruby，这是一种语言特性）。您将需要循环，然后在成功时中断，例如

```
for (int i = 0 ; i < 3 ; i++) {
    try {
        final Response response = service.serviceName(params);
        break;
    } catch (SocketTimeoutException e) {
        Thread.getCurrentThread().sleep(10 * 1000);
    }
} 
```

# java - Swing components not displaying

> ID：13246772
> 
> 赞同：-3
> 
> 时间：2012-11-06T08:02:05.893
> 
> 标签：java, swing, user-interface

I've had this problem many times before while using Java swing. I run the program, and nothing at all displays but the window; the moment you resize it even by a pixel, everything appears perfectly. Could anyone please tell me why this is happening?
Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T13:41:49.460

总是从头开始[`invokeLater()`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)，使用[布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)，*最后*[`pack()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#pack%28%29)制作框架。`setVisible()`

 *```
EventQueue.invokeLater(new Runnable() {

    @Override
    public void run() {
        JFrame f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new JPanel(new GridLayout(0, 1));
        panel.add(...);
        panel.add(...);
        f.add(new JScrollPane(panel));
        f.pack();
        f.setVisible(true);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T09:52:25.220

确保以下代码将出现在 GUI 代码的末尾。

`frame.setSize(500,500); // size of the frame`

`frame.setVisible(true); // make frame window visible`*

# xml - App Engine - Java Cache Control wont work

> ID：13246774
> 
> 赞同：1
> 
> 时间：2012-11-06T08:02:11.067
> 
> 标签：xml, file, google-app-engine, caching, static

This is a noobie question

I would like to add expires headers for static files.

I tried :

```
<static-files>
     <include path="/**.png" expiration="4d 5h" />
</static-files> 
```

and put this in the *appengine-web.xml*

But everytime i deploy this on the egine, the engine wont work anymore. Maybe i used the wrong location for the code?

Here is the full code :

```
<?xml version="1.0" encoding="utf-8"?>

<appengine-web-app xmlns="http://appengine.google.com/ns/1.0">
  <!-- REQUIRED: CHANGE THE <application> TAG! -->
    <application>myname</application>
    <version>1</version>

        <static-files>        <include path="/**.png" expiration="4d 5h" />    </static-files>

    <system-properties>
        <property name="java.util.logging.config.file" value="WEB-INF/logging.properties"/>
    <property name="com.google.gdata.DisableCookieHandler" value="true"/> 

    <!-- OPTIONAL: Put in your configuration values in this section. -->
    <property name="com.google.ytd.BrandingTag" value=""/>
    <property name="com.google.ytd.LinkBackText" value=""/>
    <property name="appengine.orm.disable.duplicate.pmf.exception" value="false"/>
    <property name="com.google.ytd.RecaptchaPrivateKey" value=""/>
    <property name="com.google.ytd.RecaptchaPublicKey" value=""/>  
    </system-properties>

  <ssl-enabled>true</ssl-enabled>
  <sessions-enabled>true</sessions-enabled>
  <threadsafe>false</threadsafe>

    <inbound-services>
    <service>mail</service>
  </inbound-services>
</appengine-web-app> 
```

# ruby-on-rails - 如何在rails中获得赞助人宝石提出的原始卷曲请求

> ID：13246775
> 
> 赞同：1
> 
> 时间：2012-11-06T08:02:23.500
> 
> 标签：ruby-on-rails, curl

我正在使用[赞助者](http://patron.rubyforge.org/)gem 来创建 curl 请求。这是代码

```
 s = Patron::Session.new
    s.connect_timeout = 15
    s.timeout = 15
    s.base_url = API_URL
    s.headers['Date'] = DATE_HEADER
    s.headers['Accept'] = 'application/xml'
    s.headers['Content-Type'] = 'application/json'
    s.headers['Authorization'] = "API" + " " + auth_token
    response = s.delete(uri)
    response.status 
```

我怎样才能得到这个 gem 发出的原始 curl 请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T09:46:07.930

你不能。错误...您可以通过 monkey_patching`Patron::Session.request`方法，并在处理之前产生请求。但请注意，这不是“libcurl”请求，因为它只存在于 C 代码中，它是一个`Patron::Request`实例。

另外，请注意您的猴子补丁可能随时中断，因为您必须重写整个方法！

`yield`您在处理对 libcurl 的请求之前添加了一个，因此您有机会通过一个块来获取它。

```
req = nil
response = s.delete(uri) do |r|
  req = r
end
# now req should be your request instance. 
```

这是补丁的提示：

```
class Patron::Session

# You have to patch all the standard methods to accept a block
def get(url, headers = {}, &block)
  request(:get, url, headers, &block)
end
# do the same for get_file, head, delete, put, put_file, post, post_file and post_multipart

def request(action, url, headers, options = {}, &block)
  # If the Expect header isn't set uploads are really slow
  headers['Expect'] ||= ''

  req = Request.new
  req.action                 = action
  req.headers                = self.headers.merge headers
  req.timeout                = options.fetch :timeout,               self.timeout
  req.connect_timeout        = options.fetch :connect_timeout,       self.connect_timeout
  req.max_redirects          = options.fetch :max_redirects,         self.max_redirects
  req.username               = options.fetch :username,              self.username
  req.password               = options.fetch :password,              self.password
  req.proxy                  = options.fetch :proxy,                 self.proxy
  req.proxy_type             = options.fetch :proxy_type,            self.proxy_type
  req.auth_type              = options.fetch :auth_type,             self.auth_type
  req.insecure               = options.fetch :insecure,              self.insecure
  req.ignore_content_length  = options.fetch :ignore_content_length, self.ignore_content_length
  req.buffer_size            = options.fetch :buffer_size,           self.buffer_size
  req.multipart              = options[:multipart]
  req.upload_data            = options[:data]
  req.file_name              = options[:file]

  base_url = self.base_url.to_s
  url = url.to_s
  raise ArgumentError, "Empty URL" if base_url.empty? && url.empty?
  uri = URI.join(base_url, url)
  query = uri.query.to_s.split('&')
  query += options[:query].is_a?(Hash) ? Util.build_query_pairs_from_hash(options[:query]) : options[:query].to_s.split('&')
  uri.query = query.join('&')
  uri.query = nil if uri.query.empty?
  url = uri.to_s
  req.url = url

  yield req if block_given? # added line

  handle_request(req)
end
end 
```

# session - httpservletrequest is null when http-only is set to true

> ID：13246777
> 
> 赞同：0
> 
> 时间：2012-11-06T08:02:26.323
> 
> 标签：session, jboss7.x, httponly

I am using JBoss 7 and I have configure my session config in web.xml as follows:

```
<session-config>
<session-timeout>240</session-timeout>
<http-only>true</http-only>
</session-config> 
```

However, in my servlet, i am getting a nullpointerexception when I try to retrieve the current session as follows:

```
request.getSession(false); 
```

Am I missing anything?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:57:13.390

[根据文档](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpServletRequest.html#getSession(boolean))，这似乎是正确的。

片段：

```
Returns the current HttpSession associated with this request or, if there is no current session and create is true, returns a new session.

If create is false and the request has no valid HttpSession, this method returns null. 
```

再次查看您的`web.xml`代码段后，它并不完全正确。`<http-only/>`不是 的一部分`<session-config/>`。`<cookie-config/>`按照以下方式将其移入：

```
<session-config>
    <session-timeout>240</session-timeout>
    <cookie-config>
        <http-only>true</http-only>
    </cookie-config>
</session-config> 
```

# javascript - 遍历 JavaScript 对象树

> ID：13246780
> 
> 赞同：3
> 
> 时间：2012-11-06T08:02:24.083
> 
> 标签：javascript, json

我试图穿过这棵树并打印所有“元素”对象，但它不适用于我

```
var config = {
"tree": {
    "element": {
        "name": "pd",
        "children": {
            "element": {
                "name": "pd2",
                "children": {}
            },
            "element": {
                "name": "pd3",
                "children": {
                    "element": {
                        "name": "pd6",
                        "children": {}
                    },
                    "element": {
                        "name": "pd5",
                        "children": {
                            "element": {
                                "name": "pd7",
                                "children": {
                                    "element": {
                                        "name": "pd8",
                                        "children": {}
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "element": {
                "name": "pd4",
                "children": {}
            }
        }
    }
} 
```

}

但它只多次打印两个对象
这是我的代码

```
 function parseConfig(configs){
    for(var element in configs){
        if (typeof(configs[element])=="object") {
            console.log(configs[element]);
            parseConfig(configs[element]);
        }
      }
     } 
```

这是[jsfiddle上的代码](http://jsfiddle.net/xpJ2V/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T08:12:43.610

因此，仅通过在您的 jsfiddle 页面中运行 JSLint，我就发现了一些事情：

1.  一个对象有许多键和值，但是如果它们具有相同的键，你将如何区分不同的值呢？换句话说，您不能有多个具有相同名称的键，因此具有多个“元素”键的嵌套对象将无效。
2.  我认为您不能在 for 循环中声明元素，请尝试提前声明它：

    变量元素；对于（配置中的元素）{

3.  如果你真的希望这段代码在这个 jsfiddle 中做一些事情，你将不得不把它放在一个 onLoad 函数中。如果您只是使用 jsfiddle 向我们展示您的代码，那么我希望您实际上是在使用它的任何地方调用它。

我计算了您的密钥并[在此处](http://jsfiddle.net/3vPxm/3/)修复了#2 。或者在下面看到它：

```
var config = {
    "tree": {
        "element": {
            "name": "pd",
            "children": {
                "element1": {
                    "name": "pd2",
                    "children": {}
                },
                "element2": {
                    "name": "pd3",
                    "children": {
                        "element1": {
                            "name": "pd6",
                            "children": {}
                        },
                        "element2": {
                            "name": "pd5",
                            "children": {
                                "element": {
                                    "name": "pd7",
                                    "children": {
                                        "element": {
                                            "name": "pd8",
                                            "children": {}
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "element3": {
                    "name": "pd4",
                    "children": {}
                }
            },
            "element": {
                "name": "pd4",
                "children": {}
            }
        }
    }
};

function parseConfig(configs) {
    var element;
    for (element in configs) {
        if (typeof(configs[element]) == "object") {
            console.log(configs[element]);
            parseConfig(configs[element]);
        }
    }
}
parseConfig(config);​ 
```

拥有多个“元素”键的另一种方法是拥有一个包含元素列表的“元素”数组。

# wordpress - 使用 wp_dropdown_categories wordpress 进行多项选择

> ID：13246781
> 
> 赞同：1
> 
> 时间：2012-11-06T08:02:44.173
> 
> 标签：wordpress, categories

我想添加一个显示最新帖子的类别列表的小部件。但是我找到了插件[http://wordpress.org/extend/plugins/category-posts/](http://wordpress.org/extend/plugins/category-posts/) 但是这个插件一次只显示一个类别。当我打开小部件文件 cat-posts.php 时，我看到了代码 wp_dropdown_list 。那么你能告诉我如何让它选择多个类别以显示所有类别的最新帖子。是否有可能或有另一种方法来完成相同的任务。请建议。

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T09:12:56.487

您可以检查：

```
wp_category_checklist() 
```

[http://codex.wordpress.org/Function_Reference/wp_category_checklist](http://codex.wordpress.org/Function_Reference/wp_category_checklist)

您可以定义自定义walker，并将复选框更改为具有多项选择的下拉菜单。

# c# - 查找精确的 url 匹配

> ID：13246784
> 
> 赞同：1
> 
> 时间：2012-11-06T08:02:38.610
> 
> 标签：c#, regex

我想使用正则表达式在 url 列表中找到确切的 url mach。

```
 string url = @"http://web/P02/Draw/V/Service.svc";
                string myword = @"http://web/P02/Draw/V/Service.svc http://web/P02/Draw/V/Service.svc?wsdl";
                string pattern = @"(^|\s)" + url + @"(\s|$)";
                Match match = Regex.Match(pattern, myword);
                if (match.Success)
                {
                    myword = Regex.Replace(myword, pattern, "pattern");
                } 
```

但是该模式不返回任何结果。

你认为是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T08:12:48.350

除了奇怪的格式，这里有一个匹配列表中每个单独 URL 的模式。

```
Pattern = "http://([a-zA-Z]|/|[0-9])*\.svc"; 
```

坦率地说，我认为您在语法或实现方面没有问题。如果你想调整我上面写的表达式，这里就是这样做的地方：[在线正则表达式工具](http://gskinner.com/RegExr/ "自动正则表达式")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T08:07:17.687

您将错误的参数传递给`Regex.Match`方法。你需要像这样交换参数>

```
Match match = Regex.Match(myword,pattern); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T08:12:27.900

为什么不在字符串集合上使用 Linq（用空格分隔时）

```
myword.Split(' ').Where(x => x.Equals(url)).Single().Replace(url, "pattern"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T08:15:00.797

*   正如已经指出的那样，你的论点是错误的
*   `.``url`在正则表达式中模式是一个特殊字符，所以当你使用它来构建模式时你需要转义- 你可以使用`Regex.Escape(url)`
*   您不需要在执行替换之前检查匹配是否成功，除非您有其他逻辑取决于匹配是否成功。

# android - Android：复杂的UI设计

> ID：13246785
> 
> 赞同：2
> 
> 时间：2012-11-06T08:03:02.333
> 
> 标签：android, android-layout, user-interface, android-ui

我必须用这个屏幕制作 Android 应用程序（它将是现有 iOS 应用程序的 Android 版本）： ![在此处输入图像描述](../Images/25f0a0cbb8cd0e4d0758e957c705ec47.png)

您可以看到有几个图像、按钮和文本标签位于非常特定的位置。

问题是 Android 设备的屏幕尺寸和尺寸非常不同。如何在不同的屏幕上保持元素的相对大小？

以这张图为例，我可以计算，例如，屏幕宽度与圆半径的比值。但是，如何在众多的 Android 屏幕上保持这个比例呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T08:11:36.027

您必须为您的应用程序创建多个资源。Android 有 4 种分辨率（ldpi、mdpi、hdpi 和 xhdpi）和 4 种通用屏幕尺寸（小、中、大和特大）。因此，您必须制作 4 种布局（如果您不打算支持平板电脑，则需要 3 种布局，因为平板电脑属于超大类别）以支持屏幕尺寸。

这是一个一般指南：

将小、中、大和特大的布局放在 res/ 文件夹中，如下所示：

```
res/layout/sample_layout.xml             // default layout
res/layout-small/sample_layout.xml       // layout for small screen size
res/layout-large/sample_layout.xml       // layout for large screen size
res/layout-xlarge/sample_layout.xml      // layout for extra large screen size 
```

你也可以使用

`res/layout-land/sample_layout.xml`适用于所有屏幕尺寸的横向，或者您可以将特定屏幕尺寸的横向布局定位为`res/layout-medium-land/sample_layout.xml`

请注意，所有布局都具有相同的名称。

准备好布局后，还需要注意图像分辨率

再次在您的 res/ 文件夹中添加如下图像：

```
res/drawable-ldpi/sample_image.png         // low density
res/drawable-mdpi/sample_image.png         // medium density
res/drawable-hdpi/sample_image.png         // high density
res/drawable-xhdpi/sample_image.png        // extra high density 
```

再一次，所有图像都具有相同的名称。

设计图像的一般准则是：

```
ldpi is 0.75x dimensions of mdpi
hdpi is 1.5x dimensions of mdpi
xhdpi is 2x dimensinons of mdpi 
```

通常，我为 320x480 屏幕设计 mdpi 图像，然后按照上述规则将尺寸相乘以获得其他分辨率的图像。

Android 将根据设备自动选择布局和图像的最佳组合。例如，对于高分辨率中等尺寸设备，将向用户显示布局中等和高密度的图像。

确保为所有这些组合创建模拟器并彻底测试您的应用程序。这是官方文档以获取更多信息：

[https://developer.android.com/guide/practices/screens_support.html](https://developer.android.com/guide/practices/screens_support.html)

对于测量单位，您可以使用`density independent pixels (dp or dip)`它将在多个分辨率下以稳定的方式保持您的相对高度、距离等。

# android - 通过电脑浏览器访问安卓手机sdcard

> ID：13246787
> 
> 赞同：1
> 
> 时间：2012-11-06T08:03:07.743
> 
> 标签：android, ip-address, remote-access, file-sharing

我是安卓新手。我需要开发一个应用程序，只需使用手机生成的 ip 地址，我就可以从我的电脑浏览器访问我的 android 手机 sd 卡。我得到了 IP 地址，但找不到任何示例。如果有人有任何例子或任何知识，请回复。我急需它。先感谢您。

知识因分享而增长......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:07:11.380

它不是一件简单的事情。您需要在手机上实现类似[FTP 服务器的功能。](http://www.w3.org/Protocols/rfc959/)或[samba 服务器](http://www.samba.org/cifs/docs/what-is-smb.html)。

如果您无法下载已经为您提供 samba 服务器的[应用程序之一。](https://play.google.com/store/apps/details?id=lysesoft.andsmb&feature=search_result#?t=W251bGwsMSwyLDEsImx5c2Vzb2Z0LmFuZHNtYiJd)

***编辑***：你可能会很好地看看像[swiftp](http://code.google.com/p/swiftp/)这样的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:15:14.853

你的应用真的很有趣。您可以下载应用程序 wifiFileExplorer 然后反向翻译以获取源参考。链接：[http ://www.mediafire.com/?7tyvrvh26ekwwxe](http://www.mediafire.com/?7tyvrvh26ekwwxe)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T10:20:32.790

您可以下载应用程序 wifiFileExplorer 然后反向翻译以获取源参考这是不可能的

# timeout - XMPPFramework：发送超时消息

> ID：13246788
> 
> 赞同：3
> 
> 时间：2012-11-06T08:03:00.970
> 
> 标签：timeout, reachability, xmppframework

我在我的 iOS 应用程序中使用[XMPPFramework](https://github.com/robbiehanson/XMPPFramework)在客户端和服务器之间发送和接收命令消息。服务器将立即响应不同的命令消息。

有时候连接很慢，客户端发来的消息会很长一段时间没有响应。所以我想知道如何发送超时的 XMPP 消息，或者我必须自己实现。

反正：

1.  这去`- (void)xmppStream:(XMPPStream *)sender didSendMessage:(XMPPMessage *)message`。
2.  使用[Reachability](https://github.com/tonymillion/Reachability)，仍然可以通过`[[Reachability reachabilityForInternetConnection] isReachable]`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T06:09:23.373

为什么不在发送消息时设置一个计时器，覆盖 XMPPStream 上的响应回调，然后查看哪个先调用？

# indexing - OpenOffice 在一个索引而不是另一个索引中添加条目

> ID：13246792
> 
> 赞同：0
> 
> 时间：2012-11-06T08:03:17.123
> 
> 标签：indexing, openoffice-writer

OpenOffice 文档 (Writter) 中有两个索引：一个用于所有内容，另一个仅用于文档表。

当我通过以下步骤在索引中添加条目（例如，高于主索引的修订历史）时：

1.  选择要在索引中添加的标题
2.  菜单 > 插入
3.  索引和表格 > 条目
4.  从索引下拉菜单中选择“目录”并插入

之后，如果我更新两个索引，则该条目将添加到两个索引中。我不希望该条目出现在表格索引中，而只希望出现在主要内容索引中。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:49:15.370

我暂时找到了办法。由于该主题高于我想从一个索引中排除的主要内容索引，因此我遵循了以下步骤：

1.  右键单击表索引
2.  编辑索引/表格
3.  为章节创建索引/表（而不是整个文档）

# ssh - 通过 SSH 访问特定的终端模拟器

> ID：13246796
> 
> 赞同：1
> 
> 时间：2012-11-06T08:03:52.523
> 
> 标签：ssh, terminal-emulator

背景：我每天都使用一个 linux 机器（称之为主机）。但有时，GUI/鼠标/键盘停止工作并且它（主机）挂起。除了重新启动它（主机）之外，我什么也做不了。所以，现在我总是在它（主机）上运行一个 ssh 服务器，这样我就可以连接到它并安全地关闭它。我通过在我的笔记本电脑上使用 VNC 客户端（称之为 REMOTE）来做到这一点。它从主机复制整个屏幕，所以即使我在主机上的鼠标/键盘不起作用，我也可以用 REMOTE 关闭东西。但是 VNC 的网络使用成本高且速度慢。我想用普通的 ssh 连接替换它。

问题重新定义：所以，如果我启动一个简单的程序在“主机”上的终端上无休止地打印“hello world”。我如何通过 SSH 在“REMOTE”上看到相同的终端（带有 hello world 打印）。不只是看，控制这个程序说停止它，杀死它等等。

# node.js - 摩卡运行正常，但显示未定义

> ID：13246798
> 
> 赞同：1
> 
> 时间：2012-11-06T08:04:01.860
> 
> 标签：node.js, testing, mocha.js, should.js

我`mocha`用来测试我的nodejs代码，测试运行正常，但是当我`mocha test.js`用来运行测试时，我传递给的字符串`describe`似乎没有显示。

代码如下：

```
var assert = require("should");
describe("FrontEndTest", function(){
    describe('websocket establish connection', function(){
        it('should establish connection correctly', function(done){
            var res;
            var wsClient = create_ws_client('ws://127.0.0.1:9876','brain_burst');
            wsClient.on('connect', function(connection){
                res = true;
                res.should.be.true;
                done();
            });
            wsClient.on('connectFailed', function(error){
                res = false;
                res.should.be.true;
                done();
            });
            console.log(res);
        });
        it('should disconnected by server.(also, that may crash server if there is not a protocol validation)', function(done){
            var res;
            var wsClient = create_ws_client('ws://127.0.0.1:9876');
            wsClient.on('connect', function(connection){
                res = true;
                res.should.be.false;
                done();
            });
            wsClient.on('connectFailed', function(error){
                res = false;
                res.should.be.false;
                done();
            });
        });
    });
}); 
```

命令结果`mocha`显示：

> 未定义․․</p>
> 
> ✔ 完成 2 次测试（68 毫秒）

为什么它显示`undefined`，因为我已经传递了一个字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:10:19.543

以下行不是导致它的原因吗？

```
console.log(res); 
```

# java - 名称中的错误更正

> ID：13246800
> 
> 赞同：7
> 
> 时间：2012-11-06T08:04:06.353
> 
> 标签：java, c++, algorithm, error-correction

我正在尝试设计一种在名称中执行纠错的算法。我的方法是使用正确名称的数据库，计算每个名称与输入名称之间的编辑距离，然后建议最接近的 5 或 10 个。

此任务与单词中的标准纠错有很大不同，因为某些名称可能会被首字母代替。例如，“Jonathan Smith”和“J. Smith”实际上非常接近，很容易被认为是同一个名字，所以如果不是 0，编辑距离应该非常小。另一个挑战是，有些名字在发音时可能会以不同的方式书写相同的。例如`Shnaider`，并且`Schneider`是由具有不同语言环境的人编写的同名版本（我猜有更好的例子）。还有另一种情况——想象一下写作中可能出现的所有错误，`Jawaharlal Nehru`其中大部分与真实姓名无关。同样，它们中的大多数可能在语音上是相似的。

显然 Lucene 的纠错算法在这里对我没有帮助，因为它不能处理上述情况。

所以我的问题是：你知道任何能够对名称进行纠错的库吗？你能提出一些处理上述情况的算法吗？

我对 c++ 或 java 中的库感兴趣。至于算法建议，任何语言或伪代码都可以。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T08:19:02.497

有关语音匹配，请参阅[Soundex](http://en.wikipedia.org/wiki/Soundex)。

我认为修改 Levenshtein 距离算法以将“缩写为初始”和“从初始扩展”视为单距离编辑应该很简单，但目前细节超出了我的范围。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T23:47:03.383

你也可以看看[Metaphone](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/language/Metaphone.html)。

# ruby-on-rails - 如何使用 Devise Omniauth + (Facebook、Twitter、Google) 完成多重身份验证？

> ID：13246802
> 
> 赞同：5
> 
> 时间：2012-11-06T08:04:19.637
> 
> 标签：ruby-on-rails, devise, omniauth

我已经使用 git [OmniAuth 的以下教程在我的 Rails 应用程序中成功实现了 Devise Omniauth 身份验证：](https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview)

但是它不支持多重身份验证，可能你们都知道，并且以前也遇到过同样的问题，但是如果你们成功地调整了同样的问题，请告诉我解决方案。

这是我需要使用 Omniauth + Devise 完成的场景。

我们有一个名为 John 的用户，他已经在 Google 和 Facebook 中拥有相同的电子邮件 ID“John@yopmail.com”的帐户。

所以约翰第一次尝试用他的谷歌账户登录，这次约翰已经成功登录。

但是 john 第二次尝试使用他的 facebook 帐户登录，这一次我们的应用程序将 john 重定向到设计的 registration_url ，而没有让他使用他的 facebook 帐户登录。

我知道为什么这是hapepnig，因为设计将在内部验证电子邮件的唯一性。但我很想知道，有没有办法调整这个问题，以便我们可以实现多重身份验证。Stack-Overflow 也做得非常好。

请帮我找出解决方案。

谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T08:10:52.333

试试这个，在你的`devise.rb`文件中**评论**这一行或更改电子邮件并为此使用差异，然后尝试

```
 # to authenticate or find a user. Default is :email.
  config.case_insensitive_keys = [ :email ]
  # modifying a user and when used to authenticate or find a user. Default is :email.
  config.strip_whitespace_keys = [ :email ] 
```

# grails - 在 Cloud Foundry 的 grails 应用程序中存储和显示图像文件

> ID：13246804
> 
> 赞同：0
> 
> 时间：2012-11-06T08:04:30.167
> 
> 标签：grails, cloud-foundry, file-access, image-file

我有一个 grails 应用程序，它允许用户上传图像文件并且可以显示这些图像。该应用程序实际上只将文件路径存储在数据库中，并将图像文件保存在文件系统中。

我读过一些帖子说 Cloud Foundry 不支持本地文件系统访问。所以我的问题是，如果我想将我的应用程序部署到 Cloud Foudry，我应该做哪些修改？我希望图片仍然可以直接显示在网页上，用户不必为了查看而将它们下载到自己的计算机上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T08:39:55.023

当您的应用程序停止、崩溃或移动时，存储在文件系统上的图像可能会消失。它不应该用于您想要保留的内容。此外，文件系统存储不可扩展。也就是说，如果您的应用程序的多个实例正在运行，则本地存储仅对应用程序的特定实例可见，并且在所有实例中不可见或共享。

为了满足您的要求，可以使用本地服务（例如 MongoDB GridFS、具有 blob 数据类型的 MySQL）或外部 blob 存储（例如 Box.net 或 Amazon S3）。

# c# - Xml Schema 规范是否使用默认值定义了可选属性的序列化？

> ID：13246810
> 
> 赞同：2
> 
> 时间：2012-11-06T08:05:00.280
> 
> 标签：c#, jaxb, xsd

首先，Xml Schema 规范*确实*指定了解析**：**`optional attribute with a default value`如果这样的属性在 xml 文档中不存在，那么当使用 XSD 解析时，它们似乎存在，并且具有该默认值。

其次，一些工具将这个想法应用于**序列化**，因此具有默认值的属性被省略（换句话说：给定`an optional attribute with a default value`，当属性具有该值时，它被省略）。

但是，据我所知，这种序列化行为**并未**在 Xml Schema 中指定。但这是一个复杂的规范，也许我错过了 - 规范是否定义了序列化`optional attribute with a default value`？

* * *

如果不是，也许它已经成为*事实上的*标准——许多工具是否实现了这种行为？我已经看到 Microsoft 和 MarkLogic 这样做了：

*   C# [XML 序列化可选属性的默认值](https://stackoverflow.com/questions/3411542/xml-serialization-of-the-default-values-of-optional-attributes)
*   “.net”（一般？）[当值与默认值相同时包括xml属性](https://stackoverflow.com/questions/11857274/including-xml-attribute-when-the-value-is-the-same-as-the-default)
*   MarkLogic[中的默认模式值](https://stackoverflow.com/questions/13143530/default-schema-values-in-marklogic)

但不是 JAXB：

*   **not** JAXB [JAXB 避免保存默认值](https://stackoverflow.com/questions/8885011/jaxb-avoid-saving-default-values)

* * *

最后，——也许我在主观性的悬崖上摇摇欲坠——行为**应该**是什么？

省略具有默认值的属性可以减少混乱，尤其是在默认值是预期和常见的情况下。例如`minOccurs`并`maxOccurs`默认`1`在 XSD 本身中 - 如果您一直在处理 XSD，然后序列化结果，让它们突然出现在每个`<element>`,`<sequence>`等`<choice>`上会降低可读性。

OTOH，在对象和数据结构中，如果有默认值，我们希望它存在，如果我们查看它。因此，当省略具有默认值的属性时，可能会令人惊讶——如上述 SO 问题所示。

我认为这可能取决于您认为结果是数据还是数据表示。使用表示，可以非常方便地对其进行修改以使其更具可读性。但是对于数据，您希望它完全*是*数据。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:29:37.243

对于第一个问题，答案是否定的——这不是 XSD 规范所关心的问题。

第二，很难从一个人那里得到答案，仅仅是因为有很多工具包在做这种事情……什么构成“许多”，哪些被认为是相关的，等等。

第三……在我的工作中，我（曾经）经常遇到在 XSD中**不使用默认值的建议。**争论是默认值通过强制使用 XSD 感知处理器或强制消费者应用程序中的其他逻辑/设置来限制 XML 实例的正确使用。而且，我们不要忘记那些认为默认值是邪恶的人 - 难以发现的错误的来源，例如测试/生产环境中的配置项。

话虽如此，对我而言，序列化默认值的工具很好地表明了采用“防御性编程”风格；它促进了 XML 的互操作性，而与模式语言无关。

所以，我相信任何严肃的 XSD 感知 XML 序列化程序都应该提供一个选项来启用/禁用默认值的序列化。我会将默认设置为 ON（序列化）。

如果您有专门的处理器，这些处理器在设计上必须理解并遵守 XSD 定义的语言，那么实际上线路上的默认值可能会被认为是混乱的（您的最小/最大出现参考）；可以选择关闭这些值应该会有所帮助。

# vim - 尝试在 vim 上使用 xdebug

> ID：13246812
> 
> 赞同：2
> 
> 时间：2012-11-06T08:04:56.397
> 
> 标签：vim, xdebug

我正在尝试在 Linux 上将 xdebug 与 vim 一起使用。我按照[说明](https://mutelight.org/minimal-guide-to-debugging-php-with-xdebug-and-vim)安装 xdebug，之后如果我从 apache 服务器内的文件调用 phpinfo()，我可以看到有关 xdebug 的信息。

在 vim 中打开一个文件后，假设当我按 F5 时它应该显示类似“等待端口 9000 上的新连接 10 秒......”，但它没有显示任何内容......

任何的想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T13:42:25.937

我建议您查看一个名为 vdebug 的新 vim 调试器插件：[https](https://github.com/joonty/vdebug) ://github.com/joonty/vdebug - 它正在积极开发并且看起来非常有能力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T16:14:30.180

我遇到了同样的问题，事实证明我的终端模拟器正在捕获按键而不是将其发送到 vim（我认为）。将功能重新映射到不同的键解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-09T15:24:36.673

它实际上可能是他/她的键盘。如果键盘具有多媒体功能以及 F1-F12 ......那么通常在功能键行旁边有一个“F-Lock”键，可以打开/关闭功能键行为。真的很烦人，恕我直言，对于这些天出售的新键盘......而且键盘很少有灯来指示所述功能键的不可告人的操作。

我这么说是因为，这正是我刚刚发生的事情。

# algorithm - 邻居加入算法输出

> ID：13246813
> 
> 赞同：1
> 
> 时间：2012-11-06T08:05:06.920
> 
> 标签：algorithm, graph, matrix

我正在尝试实现邻居加入算法，目前我已经让它正常工作，在每一步计算正确的长度并输出正确的值。

但是，我正在努力获得算法的最终输出，我需要它来输出整体计算的矩阵表示，因为我想将它直观地表示为图形。通过算法主循环的每次迭代，我得到一个节点子组，这些节点可以追溯到算法的开始，但我不相信这个子组可以使用，因为它包含我无法真正做到的冗余信息指定最终表示中是否需要。

我在这里使用这个算法：[http](http://en.wikipedia.org/wiki/Neighbor_joining#The_algorithm) ://en.wikipedia.org/wiki/Neighbor_joining#The_algorithm 任何帮助都会很棒，如果需要，我可以提供更多信息，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:56:50.837

我已阅读您提供的链接，在我看来您确实需要这些信息。

该算法的每一步都将 2 个节点合并为 1 个节点，从而使您的距离矩阵更小，直到所有内容都合并为止。您需要记住合并到其结果节点的节点的距离。如果合并 A 和 B，则距离矩阵的列/行将替换为属于新节点 u 的列/行。你需要记住 A 和 B 到 u 的距离。

合并所有内容后，您应该拥有必须连接的所有节点的所有距离，您可以开始可视化。

# internet-explorer - 当 span 是锚的子级时，不显示标题工具提示

> ID：13246818
> 
> 赞同：4
> 
> 时间：2012-11-06T08:05:42.600
> 
> 标签：internet-explorer, tooltip, anchor, title, html

例如，考虑以下 DOM 结构。

```
<a href="#" title="The Anchor">
  <img src="http://www.adiumxtras.com/images/thumbs/dango_status_icon_set_7_19047_6248_thumb.png" />
  <span>This is a link</span>
</a> 
```

问题是悬停在`This is a link`文本上不会显示工具提示，而将鼠标悬停在图像上会显示工具提示。这个问题不会在任何地方发生，即如果一个页面有多个像上面这样的 DOM 片段，有些会在悬停时显示工具提示，有些则不会。这种奇怪的行为只存在于具有 HTML 4 过渡文档类型的 IE8 和 IE9 中（IE8 和 IE9 分别以 IE8 和 IE9 标准模式运行。）。如果我使用严格的文档类型，这个问题就会消失。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

这无论如何都与JS有关吗？还是 DOM 中的其他东西可能导致这种情况？

我在 stackoverflow 中找到了与此问题类似的参考资料，但没有一个可以解释发生这种情况的原因。

[HTML 链接标题属性工具提示 Internet Explorer 8](https://stackoverflow.com/questions/4897530/html-link-title-atrribute-tooltip-internet-explorer-8#comment5450831_4897557)

[https://stackoverflow.com/a/7901175/1571437](https://stackoverflow.com/a/7901175/1571437)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T07:16:50.650

即使`span`which is a child of`anchor`具有一些最小高度，因为它包含的文本，锚本身在 IE 中没有任何高度。因此，每当您将鼠标悬停在文本上时，工具提示都不会出现。要验证相同，请在控制台中执行以下代码片段

```
document.getElementById("element's id").offsetHeight // will return 0 
```

这是 IE 中的一个错误，解决方法是执行以下操作：

```
a[title] span {
    display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T15:35:04.290

稍微提一下我刚刚在这种情况下遇到的一个 IE 谜题（IE7 模式下的 IE9）。我与 title-Tooltips 的链接在其中嵌套了 div，并且工具提示显示 - 但如果下面有一个 spacer-div，其定义中带有“clear:both”，则不会。在我从垫片中取出清除后，工具提示出现了。以前，它们没有显示在垫片上方的行中，但它们在垫片下方工作。是的。多几个小时的试验来寻找 IE 解决方法。

当然，没有 clear:both 的分隔符不能很好地工作（FF 把它放在上面的其他内容之上..）。最后，它有助于将 title-atts 放入内部 div 而不是链接本身。

# c# - WCF 错误“序列不包含元素”-“集合超出固定大小”

> ID：13246828
> 
> 赞同：2
> 
> 时间：2012-11-06T08:06:23.597
> 
> 标签：c#, wcf, windows-services, nettcpbinding

我是 WCF 的新手。我开始创建一个 WCF 项目，将人们的信息保存在 EF 数据库中。

我有很多错误并通过在各个站点中搜索来修复它们，但最近我被一些错误阻止并且无法修复它们。

我的项目是具有实体框架数据模型的**n 层。**服务器有4层。

**DAL**（包含 EF 数据模型）--> **BLL**（用于插入/更新/删除函数的类库）-->**服务层**（wcf 类库）-->**主机层**（windows 服务）

我在 Windows 服务中托管我的服务。服务绑定是 nettcpbinding。我将服务配置为 true，所以这里没问题。

我有一个名为“Common”（类库）的项目，所有 4 个项目都可以访问它，并且如您所知，我创建了一个代码生成器并将生成的类粘贴到 common.（使用 DAL 的单独类模型）。

现在cient只有（主机层）服务参考。在客户端，我在服务类中有所有实体类。

当我想将对象插入数据库时​​会出现问题。请参阅下面的代码：

**服务器端（这是在 BLL 和服务层）：**

```
namespace BLL
{
    public static class bz
    {
        public static class People
        {
            public static void myInsert(Common.People p, out bool Result)
            {
                Result = false;

                Common.EFContainer cntx = new Common.EFContainer();
                cntx.ContextOptions.ProxyCreationEnabled = false;
                cntx.ContextOptions.LazyLoadingEnabled = false;

                if (p.FirstName == "" || p.FirstName == null)
                {
                   throw new Exception("Fill Fist Name") ;
                }
                //  ... more validate
                //-->I Do not use first or single etc in validating<--
                try
                {

                    cntx.Peoples.AddObject(p);
                    cntx.SaveChanges();
                    Result = true;
                }
                catch (Exception ex)
                {
                    throw ex;
                }
            }
        }
        public static class Gender
        {
             public static List<Common.Gender> GetData()
             {
                Common.EFContainer cntx = new Common.EFContainer();
                cntx.ContextOptions.ProxyCreationEnabled = false;
                cntx.ContextOptions.LazyLoadingEnabled = false;

                return cntx.Genders.ToList();
             }
        }
    }
}

namespace ServiceLayer
{

[ServiceContract(SessionMode = SessionMode.Required)]
public interface IService
{
    [FaultContract(typeof(NormalExeption))]
    [OperationContract]
    bool AddToPeople(Common.People p);

    [OperationContract]
    List<Common.Gender> GetGenders();
}

  [ServiceBehavior(InstanceContextMode = InstanceContextMode.Single, ConcurrencyMode =     System.ServiceModel.ConcurrencyMode.Single)]
 public class myService : IService
 {
    [OperationBehavior]
    public bool AddToPeople(Common.People p)
    {
      try
        {
            BLL.bz.People.myInsert(p, out result);

             return result;
        }
        catch (Exception ex)
        { 
           var exep = new NormalExeption(ex.Message, ex.Source, 0, Icons.Error);
           throw new FaultException<NormalExeption>(exep, new FaultReason(new FaultReasonText(ex.Message)));
        }
    }
    [OperationBehavior]
    public  List<Common.Gender> GetGenders()
    {
       return BLL.bz.Gender.GetData();
    }
 } 
```

}

**客户端 ：**

```
ServiceRef.People p = new ServiceRef.People();
ServiceRef.myServiceClient client=new ServiceRef.myServiceClient();

p.FirstName="S";

//... Fill Other Fields 

p.Childs=new List<ServiceRef.Child>();
p.Childs.Add(new ServiceRef.Child(){FirstName="A"});

p.Gender=client.GetGenders.first();

//... --->No Error Happen Till Here Error Is After This in Service<---

try
{
  client.AddToPeople(p);
}
Catch(FaultException fe)
{
  messagebox.show(fe.Detail.Message);
} 
```

**我的问题：**

插入人员对象后，这两个错误都发生在客户端。

当我为我的 EF 使用 Poco 代码生成器时，我收到此错误：

> 集合超出固定大小

此错误发生在 poco 类定义中。

当我为我的 EF 使用自我跟踪代码生成器时，我收到此错误：

> 序列不包含任何元素

我认为这个错误发生在`contex.addobject(p)`并且我没有在我的代码中使用任何返回这个异常的`Single`Or 。`First`

有人帮助我 - 我可以使用哪个代码生成器没有这些错误，或者我该如何修复这些错误？我有VS 2010。

编辑：当服务器向客户端发送对象但客户端插入失败时，该服务工作。在客户端服务参考配置中，我将集合类型更改为： `System.Collection.Generic.List`

# symfony - Symfony 2.1 中的注释验证不起作用

> ID：13246829
> 
> 赞同：0
> 
> 时间：2012-11-06T08:06:22.203
> 
> 标签：symfony, validation, symfony-2.1

实体属性：

```
 /**
 * @var string $content
 *
 * @ORM\Column(name="content", type="string", length=300)
 * @Assert\NotBlank(message="Please enter question")
 * @Assert\Length(
 *   min = "15",
 *   max = "300",
 *   minMessage = "Text question must be larger than 15 symbol",
 *   maxMessage = "Text question must be less than 300 symbol"
 * )
 */
protected $content; 
```

表单提交（在控制器中）：

```
// Add questions
if ($request->getMethod() === 'POST') {
  $formQuestion->bind($request);

  if ($formQuestion->isValid()) {
    // Here code save question
  }
  else {
    $errors = $formQuestion->getErrors():
    // Null array ((
  }
} 
```

没有错误显示（（为什么不读取注释验证。其他属性很好验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:22:46.907

```
 is you set form reset tag in your twig template 

like this 
 {{ form_rest(form) }} 
```

# listview - 用于非常大列表的 jQuery Mobile 组件？

> ID：13246840
> 
> 赞同：2
> 
> 时间：2012-11-06T08:07:21.130
> 
> 标签：listview, jquery-mobile

我需要显示非常大的项目列表，最多可以有 10,000 个项目。我已经在我的计算机上使用 Chrome 对 listview 组件进行了一些测试，但是显示列表需要一段时间，所以在移动设备上可能会更糟。

所以我正在寻找一个允许显示非常大的列表的组件。通过仅加载当前可见的项目，或通过分页或类似方式加载。或者也许可以为此定制 JQM 内置列表视图？任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T09:18:41.673

我在以前的项目中成功使用了[jquery.mobile.lazyloader](http://dcarrith.github.com/jquery.mobile.lazyloader/)。我有相当简单的数据，可以只使用[json2html](http://json2html.com/)模板选项，尽管支持其他模板库。我确实发现它是一个相当复杂的插件，但是在上述网站上有一些很好的例子可供参考。

# ios - 渐进式下载和缓存

> ID：13246844
> 
> 赞同：3
> 
> 时间：2012-11-06T08:08:02.477
> 
> 标签：ios, ipad, video-streaming

我想从远程服务器播放视频并将其缓存在 ipad 上本地，以便下次如果它存在，我也可以离线播放。

以前有人做过吗？我想渐进式下载是一种选择，但需要了解它的保存位置，我可以通过 icloud 备份这些吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T19:23:17.187

在第一个示例中，我从一个简单的 java 服务器 [https://github.com/mooncatventures-group/StreamX播放渐进式下载流](https://github.com/mooncatventures-group/StreamX)

[http://www.youtube.com/watch?v=Rdb0eKhmH4Q](http://www.youtube.com/watch?v=Rdb0eKhmH4Q)

然后是这个流，以防 rtsp 并使用 alassetwriter

[https://github.com/mooncatventures-group/FFPlayer-beta1/blob/master/FFAVFrames-test/ViewController.m](https://github.com/mooncatventures-group/FFPlayer-beta1/blob/master/FFAVFrames-test/ViewController.m)

# .htaccess - htaccess 重定向退出特定文件

> ID：13246845
> 
> 赞同：0
> 
> 时间：2012-11-06T08:08:06.527
> 
> 标签：.htaccess, redirect, http-status-code-404, default, not-exists

我存储这样的文件
products/back.jpg
products/thumbnail.jpg

products/items/1/back.jpg
products/items/1/thumbnail.jpg

products/items/2/back.jpg
products/items/2/thumbnail。 jpg

产品/项目/.../back.jpg
产品/项目/.../thumbnail.jpg

如果找不到文件重定向到根文件夹（产品/）但用户在旧路径名中看到与他们请求的相同，如何编写带有条件的 htaccess？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:17:01.743

在文档根目录的 htaccess 文件中，添加：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^products/.+/([^/\.]+)\.jpg$ /products/ [L] 
```

如果您想尝试加载相同的图像，请将`RewriteRule`行更改为：

```
RewriteRule ^products/.+/([^/\.]+)\.jpg$ /products/$1.jpg [L] 
```

如果要将这些规则放在**/products/**目录中的 htaccess 文件中，请`products/`从模式中删除：

```
RewriteRule ^.+/([^/\.]+)\.jpg$ /products/ [L] 
```

# blackberry - 如何在 BB 中编写 BrowserField 的水平滚动代码

> ID：13246847
> 
> 赞同：0
> 
> 时间：2012-11-06T08:08:08.413
> 
> 标签：blackberry, horizontal-scrolling, browserfield

我是BB开发的新手。我想在我的 BB 应用程序中加载一个 WebView，而不使用默认设备浏览器来加载 URL。以下是我在*BrowserScreen*类中使用的代码，它扩展了**MainScreen**。

```
 BrowserField browserField = new BrowserField(myBrowserFieldConfig);
    browserField.addListener(myBrowserFieldListener);
    add(browserField);
    browserField.requestContent("http://www.myurl.com/"); 
```

这将加载 URL 并显示网页而不会出现任何错误。唯一的问题是该网站不是专门为移动设备开发的。所以网站的宽度超出了BB设备的屏幕。我只能垂直滚动，不能水平滚动。如何以编程方式在`BrowserField`.

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:44:01.880

此代码应该可以工作：

```
public class YourClass extends MainScreen {   
    public YourClass()   {
        //Apply config here if you want
        BrowserField myBrowserField=new BrowserField();
        HorizontalFieldManager manager=new HorizontalFieldManager(Manager.HORIZONTAL_SCROLL|Manager.VERTICAL_SCROLL);
        manager.add(myBrowserField);
        this.add(manager);   
    } 
} 
```

# android - 屏幕旋转时画廊重置

> ID：13246850
> 
> 赞同：0
> 
> 时间：2012-11-06T08:08:17.713
> 
> 标签：android, screen-orientation, android-gallery, baseadapter

我有一个带有 BaseAdapter 的画廊视图，我从 Internet 下载图像，下载图像并设置为画廊异步。大约有2000张图片。当我旋转屏幕时，异步任务继续，但画廊设置为空并且不显示任何现在或旧图像。

这是 BaseAdapter 的代码：

```
private class AdaptadorImagenes extends BaseAdapter {

        private Context contexto = null;
        private ArrayList<Integer> datos = new ArrayList<Integer>();

        public AdaptadorImagenes(Context contexto) {

            this.contexto = contexto;
        }

        public void addItem(Integer posicion) {

            datos.add(posicion);
            notifyDataSetChanged();
        }

        @Override
        public int getCount() {
            return datos.size();
        }

        @Override
        public Object getItem(int position) {
            return null;
        }

        @Override
        public long getItemId(int position) {
            return position;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            ImageView imagen = new ImageView(contexto);
            imagen.setImageBitmap(getBitMapRedimensionado(position));
            imagen.setScaleType(ScaleType.FIT_XY);
            return imagen;

        }

        /**
         * Metodo para redimensionar un bimap
         * 
         * @param posicion
         *            del bitmap en una lista que contiene los path
         * @return bitmap redimensionado
         */
        private Bitmap getBitMapRedimensionado(int posicion) {

            File fichero = new File(pathImagenes.get(posicion));
            Bitmap bmOriginal = redondeaEsquinasBitmap(Bitmap
                    .createScaledBitmap(
                            BitmapFactory.decodeFile(fichero.toString()), 210,
                            210, true));

            return bmOriginal;
        }

        /**
         * Metodo para redondear las esquinas de un bitmap
         * 
         * @param bitmap
         *            a redondear
         * @return bitmap redondeado
         */
        public Bitmap redondeaEsquinasBitmap(Bitmap bitmap) {
            Bitmap salida = Bitmap.createBitmap(bitmap.getWidth(),
                    bitmap.getHeight(), Config.ARGB_8888);

Canvas canvas = new Canvas(salida);

        final int color = 0xff424242;
        final Paint paint = new Paint();
        final Rect rect = new Rect(0, 0, bitmap.getWidth(),
                bitmap.getHeight());
        final RectF rectF = new RectF(rect);
        final float roundPx = 12;

        paint.setAntiAlias(true);
        canvas.drawARGB(0, 0, 0, 0);
        paint.setColor(color);
        canvas.drawRoundRect(rectF, roundPx, roundPx, paint);

        paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
        canvas.drawBitmap(bitmap, rect, rect, paint);

        return salida;
    }

} 
```

在我设置的清单中 `android:configChanges="keyboardHidden|orientation"`

我认为将已下载的图像数量保存在一个变量中，并在旋转屏幕时设置所有图像，但是当超过 500 个时，此过程非常缓慢。

有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:37:23.427

看看 ImageLoader。此链接可以帮助[在 ListView](https://stackoverflow.com/questions/541966/how-do-i-do-a-lazy-load-of-images-in-listview/3068012#3068012)或[http://androidimageloader.com/中延迟加载图像](http://androidimageloader.com/)

您也可以在活动的 AndroidManifest 中取消更改方向：

```
android:name="com.example.MainActivity" android:configChanges="keyboardHidden|orientation" android:screenOrientation="portrait" 
```

# iphone - 类之间的 Objective-C iPhone 数据

> ID：13246852
> 
> 赞同：0
> 
> 时间：2012-11-06T08:08:15.390
> 
> 标签：iphone, objective-c

这是我的情况。我有一个带有按钮的 ViewController 类 A，该按钮通过执行以下操作转到 TableViewController 类 B。

```
- (void) goToClassB
{
    ViewControllerB *viewController =
    [[ViewControllerB alloc] initWithStyle:UITableViewStylePlain];
    // Present view controller modally.
    if ([self
        respondsToSelector:@selector(presentViewController:animated:completion:)]) {
        [self presentViewController:viewController animated:YES completion:nil];
    } else {
        [self presentModalViewController:viewController animated:YES];
    }
} 
```

我希望能够拥有一个 A 类和 B 类都可以访问和编辑的数组。我该如何实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:14:52.427

在 B 类中创建一个数组变量，例如：

```
@interface classB:NSObject
{
  NSMutableArray *arrayFromA;
}
@property (nonatomic, assign)  NSMutableArray *arrayFromA; 
```

综合变量。

并在此方法中传递数组，如：

```
- (void) goToClassB
{
   ViewControllerB *viewController = [[ViewControllerB alloc] initWithStyle:UITableViewStylePlain];
   [viewController setArrayFromA:yourArray];
   // Present view controller modally.
   if ([self
     respondsToSelector:@selector(presentViewController:animated:completion:)])
    {
     [self presentViewController:viewController animated:YES completion:nil];
    }
    else
    {
      [self presentModalViewController:viewController animated:YES];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:12:03.583

在 ViewControllerA 中创建一个 NSMutableArray，并在分配后将其传递给 ViewControllerB。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T08:19:53.577

这可以实现创建 NSMutableArray 并在其中一个类中分配属性

```
@property(nonatomic,assign) NSMutableArray *array; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T08:22:41.260

正如其他人指出的那样，最简单的方法是通过设置属性将数组简单地传递给 B，但另一种选择是让 B 对 A 具有弱反向引用。因此，您始终使用相同的数组。如果 A 和 B 同时更改数组，这可能很有用。

```
@interface ViewControllerA : UIViewController
@property (nonatomic, strong)  NSArray *array;
@end 

@interface ViewControllerB : UIViewController
@property (nonatomic, weak)  ViewControllerA *viewControllerA;
@end 

/* When you're creating the ViewControllerB, do this: */
...
viewController.viewControllerA = self;
...

/* Use the array (From ViewControllerB) */

- (void)doSomethingWithTheArray
{
    self.viewControllerA.array = ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T08:23:24.343

我提到您希望两者都进行编辑。您可以使用应用程序委托来共享应用程序级别的变量。检查此[链接](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)。

一些代码在这里。在您的应用委托类中。

```
@interface YourDelegateClass:UIResponder
{
  NSMutableArray *array;
}
@property (nonatomic, assign)  NSMutableArray *array; 
```

您可以使用此代码从应用程序类的任何位置访问该数组

```
YourDelegateClass * delegate =[[UIApplication shareApplication]delegate];
yourclassa.array = delegate.array;
or yourclassb.array = delegate.array; 
```

注意：你必须在课堂上或你的代表上*分配** **delegate.array *。**

 ** * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-06T08:27:26.470

在 view1 设置属性中创建 NSMutable 数组

```
@property(nonatomic,assign) NSMutableArray *array; 
```

在 viewB 中创建相同的数组并设置属性和

```
@property (nonatomic, assign)  NSMutableArray *arrayB; 
```

> @Synthesize

Now at the time call viewB set value of array of viewA to viewB like this

```
ViewControllerB *viewController = [[ViewControllerB alloc] initWithStyle:UITableViewStylePlain];
[viewController arrayB:array]; 
```*

# c# - C# sms 库长消息

> ID：13246853
> 
> 赞同：1
> 
> 时间：2012-11-06T08:08:15.783
> 
> 标签：c#, gsm

我正在使用短信库是我的项目，

```
http://www.codeproject.com/Articles/20420/How-To-Send-and-Receive-SMS-using-GSM-Modem 
```

以下是我从中挑选参考的链接。我有一个问题，如果一条消息超过一个消息长度，那么它会给我错误。

我的问题是：我怎样才能用这个库发送长消息。

以下是我的代码

```
SmsSubmitPdu pdu = new SmsSubmitPdu("Long Message","Number", ""); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T08:16:14.523

您应该按照以下几点发送长短信：

> 1.添加用户数据头
> 
> 2.添加填充位来编码您的消息。

这些链接肯定会对您有所帮助：

[http://hiteshagja.com/send-long-sms/](http://hiteshagja.com/send-long-sms/)

[http://mobiletidings.com/2009/02/18/combining-sms-messages/](http://mobiletidings.com/2009/02/18/combining-sms-messages/)

# php - 异步将值从客户端传递到服务器并返回到客户端

> ID：13246854
> 
> 赞同：0
> 
> 时间：2012-11-06T08:08:23.777
> 
> 标签：php, javascript, ajax

很长一段时间以来，我一直试图解决这个问题。我知道 JavaScript 是客户端脚本，PHP 是服务器端脚本，但是是否可以将浏览器纪元时间传递给 PHP 脚本以运行一些计算，然后根据结果返回 geoJSON 数据；全部异步？

我想传递给 PHP 脚本的函数类似于：

```
function retreiveUTC() {
  var now = new Date().getTime();
  var browserUTC = Math.floor(now)/1000.0;  // this returns epoch time of the browser
} 
```

然后我想获取从函数生成的纪元时间并将其传递给 php 脚本以确定要返回的 JSON 文件。

例如，我将有以下文件驻留在服务器上：

```
1352188536.JSON
1352187536.JSON
1352177536.JSON

```

我想检索最接近浏览器时代结果的那个。先感谢您。

更新代码如下：

不知道我做错了什么，但我从 ajax 调用中获得了成功，但返回值未定义。

阿贾克斯的东西：

```
 $.post ('timezone.php',
    {
        epochTime: browserUTC
    }, 
    function (result) {
       //do someting to result
    }, "json");

    var browserUTC = new Date().getTime();

    $.post ('timezone.php',
    {
        epochTime: browserUTC
    }, 
    function (result,status) {
   //display file name returned by PHP
        alert(result.file + "\n" + status);
   //console.log('test');
    }); 
```

PHP：

```
 <?php
    $epochTime = round($_POST['epochTime'] / 1000);
    $res= array();
    $res['file'] = $epochTime . '.JSON';
    return json_encode($res);
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:25:44.837

我相信它是通过标准的 AJAX 调用完成的。例如，如果您使用 jQuery：

```
 $.post ('pathToPHPScript.php', {epochTime: browserUTC}, function (result) {
       //do someting to result
    }, "json"); 
```

在 PHP 脚本中，您可以像标准 POST 变量一样检索纪元时间的值：

```
$epochTime = $_POST['epochTime'];
//do required calculations 
```

所以 PHP 有内置的[json_encode](http://php.net/manual/en/function.json-encode.php)函数，可以帮助从数组中生成 JSON 编码的字符串。如果你传递一个数组，你可以在 jQuery 中检索：

```
//PHP
$res= array();
$res['file'] = $epochTime . '.JSON';
return json_encode($res); 
```

在上面引用的 jQuery 回调函数中：

```
 $.post ('pathToPHPScript.php', {epochTime: browserUTC}, function (result) {
       //display file name returned by PHP
       console.log(result.file);
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:17:24.943

我猜您是在询问异步请求。您可以向您的 php 脚本发送 AJAX 请求并获取相应的 JSON 数据并进行处理。你必须改变设计。

首先，当请求页面时，发送普通数据（JSON 除外），一旦在客户端加载了 javascript 文件，您就可以调用该函数，在函数结束时，只需使用 AJAX 请求发送浏览器时间回到另一个 php 脚本，该脚本将获取相应的 JSON 文件并提供给客户端。

使用 jquery 库以更简单的方式执行 AJAX 请求。

# git - 多个 git 大师

> ID：13246857
> 
> 赞同：0
> 
> 时间：2012-11-06T08:08:21.973
> 
> 标签：git, replication

两家公司 A 和 B 都使用带有中央存储库的 git，以允许围绕其源代码创建项目 wiki、文档等。假设它们都归一个共同的母组织所有。

两家公司的用户只能将提交推送给他们自己公司内的其他用户，或者他们的中央服务器。

是否可以通过在两个中央服务器之间打开网络路由并让每个项目（基于规则集，可能像名为 .exportable 的顶级文件一样简单）在两个服务器之间复制来扩展这种情况？开发人员必须能够在每一端提交，不能简单地成为一面镜子。

我想如果可能的话，每个接受提交的主人都必须检查提交是否会进入，锁定，联系另一个主人，锁定，检查它是否会提交，然后从远端提交并删除锁（这个这种情况可能会扩展到两家以上的公司）。

我已经可以设想到各种各样的问题；但这可能吗，如何，有例子吗？

编辑：也许项目可以命名空间并且主人可以托管他们自己的项目并代理其他主人为他们不拥有的项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T19:36:13.823

Gitolite 在它所谓的“重定向推送”中对此提供了支持：

> 通常，一个主控（并且只有一个主控）推送到一个从属，而从属对用户是“只读的”。Gitolite 允许从站接收来自用户的推送并将它们透明地重定向到主站。
> 
> 这简化了复杂设置中的用户的操作，让他们可以使用本地镜像来获取和推送对所有存储库的访问。

[http://sitaramc.github.com/gitolite/mirroring.html](http://sitaramc.github.com/gitolite/mirroring.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:29:00.237

我不知道是否有可能完全实现您所描述的，但可以肯定这将非常复杂。

有一种更简单的解决方案。使用带有 git 存储库的一台主服务器作为“主服务器”，另一台作为“备份/从属服务器”。从站可以与主站同步（你可以使用 rsync 或其他东西）。在这种情况下，您必须禁止向从属推送（推送只能向主控推送）。这将提供两个具有完全相同内容的存储库（因为从站将定期从主站获取更改）

在这种情况下，从主机和从机都可以进行获取（当然还有拉取）。也可以从 master 和 slave 克隆存储库。

在推送之前（假设您的原始存储库是从属存储库，您需要使用命令 git remote add 添加第二个 - 主存储库）。

简而言之：

*   你有主库和从库，你可以从中提取、获取、克隆

*   两者都
    可以

*   只推送到 master - 这将消除复杂的锁和同步问题

# kml - 如何在 Google Sky 中启用 TimeSpan？

> ID：13246858
> 
> 赞同：1
> 
> 时间：2012-11-06T08:08:25.683
> 
> 标签：kml, google-earth, google-earth-plugin

我有一个在天空视图中运行的谷歌地球应用程序，在以前版本的谷歌地球中，我能够在功能（例如地标）中使用 TimeSpan 元素，这样我就可以在地标在天空中移动时为其设置动画。似乎在最新版本的 Google 地球中，此功能已在天空视图中禁用。如果可能，我该如何重新启用它？

# python - Python：处理计算器中的第二个运算符

> ID：13246863
> 
> 赞同：0
> 
> 时间：2012-11-06T08:08:49.617
> 
> 标签：python, calculator

我正在创建一个计算器程序，我几乎完成了。我遇到的最后一个问题是处理第二个操作员。

该程序采用最多包含两个运算符的表达式（例如 2/3*4）。它将它分成 2,/,3,*,4 并使用许多不同的函数来求解表达式。现在我在下面展示的具体部分是解决第一个表达式的函数，（我已经解决了其余部分）：

```
def firstOperationWithOneOperator(numEx1,numEx2,opEx1):

    if opEx1=="*":
        solution1=numEx1*numEx2
        print(solution1)
        return solution1
    elif opEx1=="/":
        solution1=numEx1/numEx2
        print(solution1)
        return solution1
    elif opEx1=="+":
        solution1=numEx1+numEx2
        print(solution1)
        return solution1
    elif opEx1=="-":
        solution1=numEx1-numEx2
        print(solution1)
        return solution1 
```

所以我现在有一个工作功能，可以用一个运算符（例如 2/3）解决问题，如您在上面看到的。我需要一些帮助来了解如何在检查操作顺序的同时处理第二个操作员。那么如何解决2+3*5这样的表达式呢？如果有限制，我将继续更新我的 OP。如果有任何不清楚的地方，请询问，我将编辑 OP。

编辑：

```
def fowoo(nums1,fowoo(nums2,nums3,ops2),ops1):
    print(fOWOO(nums1, fOWOO(nums2, nums3, ops2), ops1)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:23:13.007

```
fOWOO = firstOperationWithOneOperator 
```

您需要在以下之间做出决定：

```
fOWOO(num1, fOWOO(num2, num3, op2), op1)  # num1 `op1` (num2 `op2` num3) 
```

和

```
fOWOO(fOWOO(num1, num2, op1), num3, op2)  # (num1 `op1` num2) `op2` num3 
```

基于优先级`op1`和`op2`

* * *

所以：

*   `2 / 3 + 4`->`fOWOO(fOWOO(2, 3, '/'), 4, '+')`
*   `2 + 3 / 4`->`fOWOO(2, fOWOO(3, 4, '/'), '+')`

# internet-explorer - 如何防止 Internet Explorer 连接超时？

> ID：13246865
> 
> 赞同：2
> 
> 时间：2012-11-06T08:09:00.733
> 
> 标签：internet-explorer, asp-classic, timeout

如果网站处理和加载页面的时间超过 10 秒，`Internet Explorer`将执行`connection timeout`. 用户可以通过将注册表中的默认值设置为更高的值来防止这种情况发生。

但我真的不能告诉我的任何客户这样做；那么**我如何首先防止这种情况发生呢？**

我一直学会不要使用 a`buffer`并刷新它，因为这会使数据的计算变慢。另一个问题是，所有的计算都是先完成的，然后放入 a`multidimensional array`中，最后用`response.write`. 我不认为，`buffer` `flush`可以对此做任何事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:54:02.713

> 我不认为，缓冲区刷新可以对此做任何事情吗？

是的，它可以：

> [服务器无响应时 Internet Explorer 错误“连接超时”](http://support.microsoft.com/kb/181050/en-us)：
> 
> Internet Explorer 对服务器返回数据施加了超时限制。默认情况下，超时限制如下： Internet Explorer 5 到**8：60 分钟**

[如this question](https://stackoverflow.com/questions/2625650/internet-explorer-8-timeout-too-quick-on-page-posts)中所述，您所指的超时似乎可能由不同的应用程序错误地设置。

> 如果页面在几分钟内没有返回，许多用户会认为出现了问题，他们会停止该过程。因此，您应该将您的服务器进程设计为在大约五分钟内返回数据，这样用户就不必等待很长时间。

知识库文章还指出：

> 您通常可以将长流程分解成更小的部分。或者，服务器可以返回状态数据以更新用户有关该过程的信息。此外，您可以创建一个基于消息或异步方式的长服务器进程，以便在提交作业后立即返回给用户，然后在长进程完成后通知用户。

所以你应该把数据刷新到客户端，这样它就知道服务器还活着。

> 我一直学会不使用缓冲区并刷新它，因为这会使数据的计算变慢。

请显示此类声明的来源。当然，它会使计算变慢，但很可能不会显着。

我喜欢知识库文章中建议的方法。让您的服务器立即返回，同时将长时间运行的操作排入队列。然后客户端可以轮询操作的进度，因此它不会超时。

# iphone - canSendText 返回 false

> ID：13246867
> 
> 赞同：1
> 
> 时间：2012-11-06T08:09:04.163
> 
> 标签：iphone, objective-c, ios

我正在尝试通过我当前的应用程序发送短信。

```
 if ([NSClassFromString(@"MFMessageComposeViewController") canSendText]) 
```

我已经尝试了上面的行，但它返回false？我确定我可以通过手机发送短信（使用真实设备进行测试），那么我是否缺少任何设置？

所以尝试了这个：

```
 Class smsClass = (NSClassFromString(@"MFMessageComposeViewController"));
   if(smsClass != nil)
   {
      if ([smsClass canSendText])
      {
          [self presentMessageComposeViewController];
      }
   } 
```

smsClass 返回零。

非常感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T08:34:59.357

试试这个

```
MFMessageComposeViewController *controller = [[[MFMessageComposeViewController alloc] init] autorelease];
if([MFMessageComposeViewController canSendText])
{
    controller.body = @"Hello Test massage";
    controller.recipients = [NSArray arrayWithObjects:@"12345678", @"87654321", nil];
    controller.messageComposeDelegate = self;
    [self presentModalViewController:controller animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:23:16.287

根据[Apple 文档](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html)，canSendText 仅适用于 iOS 4 及更高版本。

因此，如果您使用 iOS 3 运行您的设备，您的应用程序行为是正常的。

为什么要使用 NSClassFromString ，以下应该可以工作（在 iOS 4 及更高版本上）：

```
[MFMessageComposeViewController canSendText]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T09:33:18.777

```
if ([NSClassFromString(@"MFMessageComposeViewController") canSendText]) 
```

将始终返回 false。因为`canSendText`仅适用于 class `MFMessageComposeViewController`。但`NSClassFromString(@"MFMessageComposeViewController")`会返回一个类（不是`MFMessageComposeViewController`类）。

也许你可以试试这样。

```
 Class smsClass = (NSClassFromString(@"MFMessageComposeViewController"));
   if(smsClass != nil)
  {
      if ([(MFMessageComposeViewController *)smsClass canSendText])
      {
          [self presentMessageComposeViewController];
      }
   } 
```

或者你可以简单地使用

```
[MFMessageComposeViewController canSendText]; 
```

# google-earth-plugin - Plugin Placemark snap to location grid size too large

> ID：13246868
> 
> 赞同：0
> 
> 时间：2012-11-06T08:09:02.240
> 
> 标签：google-earth-plugin

When trying to add a placemark to the plugin via the API. The place mark positions itself to an invisible grid that seems to be about a metre square.

My application needs accuracy to 10cm, does anyone know how to stop the place mark snapping to a grid and positioning at the mouse pointer location exactly???

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:24:37.097

你能举一个地标的例子吗？没有看到很难说，但我猜你可能使用 5 个小数位定义它的坐标。这将解释“似乎大约一平方米的隐形网格”。

> 我的应用程序需要精确到 10 厘米

Google 地球和地图 API 使用精确到小数点后六位的坐标。这提供了赤道周围约 11 厘米的精度。离赤道越远，误差越大。所以你不能精确到10厘米，赤道纬度最多只能是11厘米。

您可以使用下表粗略了解坐标中的小数位数与地球上的精度之间的关系。同样，距离赤道越远，精度就会下降。

```
Accuracy of decimal coordinates at the equator

0   1.0         111 km
1   0.1         11.1 km
2   0.01        1.11 km
3   0.001       111 m
4   0.0001      11.1 m
5   0.00001     1.11 m  * (What I think you are using now.)
6   0.000001    0.111 m * (The highest accuracy possible in the api.)
7   0.0000001   1.11 cm
8   0.00000001  1.11 mm 
```

# ajax - 如何调用 portlet.java 类的特定方法而不是覆盖 serveResource 方法？

> ID：13246870
> 
> 赞同：4
> 
> 时间：2012-11-06T08:09:08.397
> 
> 标签：ajax, jquery, liferay, portlet, liferay-6

我需要一些关于 ajax 的 liferay 帮助。现在我正在从我的`view.jsp`页面调用 ajax 方法来提交一些数据。

这是我正在使用的示例代码`view.jsp`：

```
<%@ include file="/init.jsp"%>

<portlet:actionURL name="AddTest" var="add1" />
<portlet:resourceURL id="AddTest" var="AddTest"></portlet:resourceURL>

<html>
<head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>

    <script type="text/javascript">
    function addToDo(addToDo){
        var todo =document.getElementById('toDo').value;
        $.ajax({
            url :addToDo,            
              data: {"todo":todo,"CMD":"addToDo"},
              type: "GET",
              dataType: "text",
            success: function(data) {              
                  $("#toDoList").html(data);
            }
        });
    }
    </script>
</head>

<body>

    <portlet:resourceURL var="addToDo" id="addToDo"></portlet:resourceURL>

    <form>
        <input type="text" name="toDo" id="toDo">
        <button name="Add" type="button" onclick="addToDo('<%=addToDo%>')">Add</button>
        <div id="toDoList">

        </div>
    </form>
</body>
</html> 
```

在我的`portlet.java`课堂上，这个 ajax 调用调用了一种方法：

```
@Override
public void serveResource(ResourceRequest request, ResourceResponse response){
    if(request.getParameter("CMD").equals("addToDo")) {

        System.out.println("came here for add");

        mediatype userToDo = new mediatypeImpl();
        //userToDo.setMediaId(12345);
        try {
            userToDo.setPrimaryKey((CounterLocalServiceUtil.increment()));
            userToDo.setMedianame(request.getParameter("todo"));
            mediatypeLocalServiceUtil.addmediatype(userToDo);
        }
        catch (SystemException e) {
            e.printStackTrace();
        }
    }
} 
```

所以我的问题是，现在它只是`@override`从任何 ajax 类中调用默认方法。但是如何`portlet.java`在 ajax 调用中调用特定的类方法呢？

我是ajax的新蜜蜂。所以请指导我无论如何你可以......

使用以下网址调用 ajax 时出现以下错误

```
<portlet:actionURL name="ajax_AddAdvertise" var="addToDo" windowState="<%= LiferayWindowState.EXCLUSIVE.toString()%>"> </portlet:actionURL>

06:47:03,705 ERROR [http-bio-8080-exec-23][render_portlet_jsp:154] java.lang.NoSuchMethodException: emenu.advertise.portlet.RestaurantPortlet.ajax_AddAdvertise(javax.portlet.ActionRequest, javax.portlet.ActionResponse)
    at java.lang.Class.getMethod(Class.java:1605) 
```

我的流程操作方法如下

```
 @ProcessAction(name = "ajax_AddAdvertise")
    public void ajax_AddAdvertise(ResourceRequest request,ResourceResponse response) {

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T12:40:20.800

> 如何在 ajax 调用中调用 portlet.java 类的特定方法？

我认为我们不能有两个不同版本的`serveResource`方法，就像我们为操作方法所做的那样，至少没有默认实现。

如果你想要不同的方法，你将不得不采用[Spring MVC ( `@ResourceMapping`)](http://portlets-in-action.blogspot.in/2011/09/spring-portlet-mvc-ajax.html)的方式来获得它。

不过，您可以`serveResource`使用`resourceId`以下方法在您的方法中定义不同的逻辑（[完整示例](http://learnliferay.wikidot.com/resource-serving-example)）：

在 JSP 中：

```
<portlet:resourceURL var="myResourceURL" id="myResourceID01" /> 
```

在 portlet 类中，该`serveResource`方法将包含以下代码：

```
String resourceID = request.getResourceID();

if(resoureID.equals("myResourceID01")) {
   // do myResourceID01 specific logic
} else {
   // else do whatever you want
} 
```

**请记住 [重要]**
在 portlet 中您不应该使用`<html>`, `<head>`,`<body>`标记，因为 portlet 生成页面的片段而不是整个页面。即使允许，您的结果页面也不会格式正确，并且在不同浏览器上的行为会有所不同。而且修改 DOM 元素的 javascript 将完全没用。

**[在此评论](https://stackoverflow.com/questions/13246870/how-to-call-specific-method-of-portlet-java-class-rather-then-overide-serveresou/13251286#comment18077578_13251286)后编辑：**
您还可以将 ajax 与操作方法一起使用：

人们`<portlet:actionURL>`通常将 ajax 用于`<form>`- `POST`。

为此，`actionURL`在您的 jsp 中以稍微不同的方式生成，如下所示：

```
<portlet:actionURL name="ajax_AddAdvertise" var="addToDo" windowState="<%= LiferayWindowState.EXCLUSIVE.toString()%>">
</portlet:actionURL> 
```

在您的 portlet 中，您可以拥有（如问题所示）：

```
@ProcessAction(name = "ajax_AddAdvertise")
public void ajax_AddAdvertise(ActionRequest request, ActionResponse response) {
// ... your code
} 
```

# c - 无法在 C 中使用 getchar() 和指针表示法获取用户输入

> ID：13246876
> 
> 赞同：0
> 
> 时间：2012-11-06T08:09:36.883
> 
> 标签：c, pointers, notation, getchar

我正在将程序从普通数组表示法更改为纯指针表示法，并且我无法在 while 循环中使用 getchar() 接收用户输入。我打印出程序正在接收并输出倒置的问号。我不确定为什么会发生这种情况，因为我从未更改过变量类型。问题在于接收用户输入的第二个函数。感谢您的帮助。

```
#include <stdio.h>
#include <stdlib.h>

/* Function prototypes */
void fillS1(char * x);

void fillS2(char * x, char * y, char z);

void strFilter(char * a, char * b, char c);

int main(int argc, const char * argv[])
  {
    char s1[42];
    char s2[22];
    char x = 0;

    fillS2(s2, s1, x);

    return 0;
}

/* Function to generate a random string of 40 uppercase letters */
void fillS1(char randomlyGeneratedString[])
{
char * pointerToRandom = randomlyGeneratedString;
int i;

for (i = 0; i < 40; i++) {
    *(pointerToRandom + i) = 'A' + rand() % 26;
}
pointerToRandom[40] = (char)0;

//printf("This is the generated string %s\n", pointerToRandom);

}

/* Function to get user input of characters */
void fillS2(char userString[], char randomString[], char replacementCharacter)
{

char * pointerToUserString = userString;
char * pointerToRandom = randomString;

int i = 0;
int n = 0;
int capitalLetterCheck = 0;

char loopContinue = 0;
char copyString[42];

char * pointerToCopyString = copyString; 

fillS1(pointerToRandom);

do {

    /* For loop to copy the first randomly generated string */
    for(i = 0; i < 42; i++)
        *(pointerToCopyString + i) = *(pointerToRandom + i);

    i = 0;
    capitalLetterCheck = 0;

    /* While loop to to get user input */
    printf("Please enter at least 2 capital letters and a maximum of 20.\n");
    while  (((*(pointerToUserString + i)) = getchar() != '\n'))  {

        /* Counter to determine how many characters were entered */
        i++;

    }

    i++;

    *(pointerToUserString + i) = '\0';

    //printf("This is the value if i %i", i);
    //printf("This is the user's string %s", pointerToUserString);

    /* Capital letter check */
    for (n = 0; n < 20; n++) {
        if (((*(pointerToUserString + i)) >= 'A') && (*(pointerToUserString + i) <= 'Z'))                  
   {          
            capitalLetterCheck++;
        }
    }

    if (i < 3) {
        printf("You need at least two letters\n");
    }

    else if (i > 21){
        printf("You cannot have more than twenty letters\n");
    }

    else if (capitalLetterCheck >= 2) {

        puts(pointerToUserString);

        printf("Enter a character to replace occuring letters.\n");
        scanf("%c", &replacementCharacter);
        getchar();

        strFilter(pointerToCopyString, pointerToUserString, replacementCharacter);

    }

    else

        printf("You  must have 2 capital letters.\n");

    printf("Would you like to enter another string (y/n)?\n");
    loopContinue = getchar();
    getchar();

} while (loopContinue != 'n' && loopContinue != 'N');

}

/* Function to replace letters with the character chosen by the user */
void strFilter(char a[], char b[], char c)
{
char * pointerToA = a;
char * pointerToB = b;

int i = 0;
int n = 0;

while (n < 20) {

    for (i = 0; i < 40; i++) {
        if ((*(pointerToA + i)) == *(pointerToB + n)){
            *(pointerToA + i) = c;
        }
    }
    i = 0;
    n++;
}

puts(a);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T08:14:32.903

问题是在`if`声明中：

```
(*(pointerToUserString + i)) = getchar() != '\n' 
```

赋值是一个表达式，其优先级*低于*比较。这意味着上述内容与以下内容相同：

```
(*(pointerToUserString + i)) = (getchar() != '\n') 
```

所以被分配了不是你想要`(*(pointerToUserString + i))`的表达式的值。`getchar() != '\n'`

# php - 使用 glob 通过扩展名查找文件

> ID：13246879
> 
> 赞同：0
> 
> 时间：2012-11-06T08:09:53.977
> 
> 标签：php, windows, glob

我想找到所有具有小写或大写扩展名“tif”或“tiff”的文件。目前我正在使用以下代码：

```
$total_files = glob(BATCH_TIFF_PATH."*.[tT][iI][fF]") 
```

但我只得到那些`.tif`小写或大写的文件

其中`BATCH_TIFF_PATH`是一个常量路径，包括路径`\`的最后一个。

而且我还想限制不在文件夹中找到任何`ti`一个`tifff`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:14:46.077

这应该可以解决问题。

```
$total_files = glob(BATCH_TIFF_PATH."*.{[tT][iI][fF][fF],[tT][iI][fF]}", GLOB_BRACE) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:28:16.717

既然您专门寻找这两个扩展，为什么不在正则表达式中硬编码它们呢？

```
\.(tif|tiff|TIFF|TIF)$ 
```

这将匹配字符串（文件名）末尾的 tif、tiff、TIF 或 TIFF 后面的点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T08:36:46.297

我不知道真正的批处理正则表达式，但这通常会起作用，你只需要适应它。

`.*\.(tiff?|TIFF?)$`

# android - API 级别 4 中的 overridePendingTransition

> ID：13246883
> 
> 赞同：1
> 
> 时间：2012-11-06T08:10:08.523
> 
> 标签：android

我的应用程序 minSdkVersion 是 4。我想对动画使用 overridePendingTransition 方法。如何？API 级别低于 5 的动画是否有任何 Compatibale 包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:43:26.237

以正常方式是不可能的。

无论如何，有非常规的方法可以做:) 答案是不要使用默认的应用程序框架。只有一个活动，它将是兼容性库中的 FragmentActivity（它是第 4 级）。使用默认动画或 Nineoldandroids.com 管理您自己的屏幕堆栈和您自己的动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:16:58.933

在您的清单文件中

```
<uses-sdk
    android:minSdkVersion="4"
    android:targetSdkVersion="15" /> 
```

尝试添加这段代码，看看它是否有效，因为android支持在更高版本中编译和在更低版本中运行

还有一件事，尽量保持`minSdkVersion`至少 7，因为`very very very very less`人们使用 API 4

# google-apps-script - 使用 Busy 修饰符的 Google Apps 脚本日历事件

> ID：13246884
> 
> 赞同：1
> 
> 时间：2012-11-06T08:10:14.390
> 
> 标签：google-apps-script

我正在尝试编写一个脚本，该脚本仅修改标记为“忙碌”的事件，但似乎无法弄清楚我的脚本如何查看该信息。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-19T09:03:08.070

为此，Google 现在建议使用[高级日历服务，它使用与](https://developers.google.com/apps-script/advanced/calendar#reference)[公共 Google 日历 API](https://developers.google.com/google-apps/calendar/v3/reference/)相同的对象、方法和参数。

它还包括对[透明度](https://developers.google.com/google-apps/calendar/v3/reference/events#resource)的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:02:19.497

无法通过 Google Apps 脚本访问该特定的“透明度”字段。您可以在[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)中为该项目记录一些内容。

但是，这可以通过跳过几圈来实现。

1.  使用带有 oAuth 的[UrlFetch](https://developers.google.com/apps-script/external_apis)与[Google Apps Calendar API对话](https://developers.google.com/google-apps/calendar/)
2.  以适当的透明度查看那里的事件并记录这些事件 ID
3.  现在在 Apps Script中循环浏览[CalendarApp中的事件。](https://developers.google.com/apps-script/class_calendarapp)
4.  当 ID 与不透明事件（忙碌）匹配时，请在 Apps 脚本中对这些事件进行必要的更改。注意 - Apps 脚本返回的 ID 已将 @google.com 附加到 Google Apps Calendar API 返回的 ID。你需要在那里做一个快速的连接。

在第一部分获得正确的事件有点痛苦，但更新这些事件的第二部分应该都在 Apps 脚本中本地工作。

# excel - excel vba如何将多个不连续范围的值复制到数组中

> ID：13246885
> 
> 赞同：7
> 
> 时间：2012-11-06T08:10:11.433
> 
> 标签：excel, vba

我正在尝试将多个非连续范围的值复制到一个数组中。我写了这样的代码：

```
summaryTempArray = .range("A2:D9,A11:D12,A14:D15").Value 
```

但它只复制第一部分 (A2:D9)。然后，我尝试了以下操作并收到错误消息-“对象_全局的方法联合失败”-我使用联合的方式是否有任何错误？

```
summaryTempArray = Union(.range("A2:D9"), .range("A11:D12"), .range("A14:D15")).Value 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T08:38:52.613

不知道你的 有什么问题`union`，但它会创建相同的范围，你在第一次尝试时就说过。

问题是，您现在有多个区域。你可以，据我所知，现在必须解决。

这是一个示例，它将解析所有区域的数组，而不单独添加每个单元格，而是将每个区域单独添加到摘要数组中：

```
Public Sub demo()
  Dim summaryTempArray() As Variant
  Dim i As Long

  With Tabelle1
    ReDim summaryTempArray(1 To .Range("A2:D9,A11:D12,A14:D15").Areas.Count)

    For i = 1 To .Range("A2:D9,A11:D12,A14:D15").Areas.Count
      summaryTempArray(i) = .Range("A2:D9,A11:D12,A14:D15").Areas(i)
    Next i
  End With

End Sub 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T15:38:05.387

如果将源范围放入数组很重要，我相信 Jook 的解决方案与您将获得的一样好。但是，我认为解决方案应该包括从不规则数组中提取值的说明。这并不难，但语法晦涩难懂。

我也不能让你的`Union`陈述失败。我认为上下文中有些东西会导致我无法复制的失败。

下面的代码显示这两个范围是相同的，并且只有第一个子范围被加载到您报告的数组中。它以一种可能令人满意的替代方法结束。

```
Option Explicit
Sub Test()

  Dim CellValue() As Variant
  Dim rng As Range

  With Worksheets("Sheet1")

    Set rng = .Range("A2:D9,A11:D12,A14:D15")
    Debug.Print rng.Address
    Set rng = Union(.Range("A2:D9"), .Range("A11:D12"), .Range("A14:D15"))
    Debug.Print rng.Address
    ' The above debug statements show the two ranges are the same.

    Debug.Print "Row count " & rng.Rows.Count
    Debug.Print "Col count " & rng.Columns.Count
    ' These debug statements show that only the first sub-range is included the
    ' range counts.

    CellValue = rng.Value

    Debug.Print "Rows " & LBound(CellValue, 1) & " to " & UBound(CellValue, 1)
    Debug.Print "Cols " & LBound(CellValue, 2) & " to " & UBound(CellValue, 2)
    ' As you reported only the first range is copied to the array.

    rng.Copy Destination:=Worksheets("Sheet2").Range("A1")
    ' This shows you can copy the selected sub-ranges.  If you can copy the
    ' required data straight to the desired destination, this might be a
    ' solution.

  End With

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-30T08:44:01.917

我遇到了同样的问题并尝试了一些方法但没有成功，直到我遇到了这个问题：-

```
 dim i as integer
    Dim rng1 as range
    Dim str as string
    dim cels() as string
    Set rng1 = sheet1.Range("A2:D9,A11:D12,A14:D15")
    str = rng1.address(0,0)
    cels() = split(str, ",")     '<--- seems to work OK
    for i = 0 to 2
        Debug.Print cels(i)
    Next i 
```

如果这是一种“不正确”的转换方法，我会很感兴趣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-04T14:02:27.850

可以从非并发单元格范围创建多维数组。我所做的是将上面的一些代码用于范围复制机制，我学到了两件事；使用该方法，您可以引用实际的单元格而不仅仅是数据，您还可以使用它移动和保持顺序。在我的个人项目中，我们必须使用一些 excel 文件来填写校准数据。它运行计算并生成校准记录报告供我们的文件稍后参考。这些库存文件很无聊！我想稍微修饰一下，并根据校准是否通过，为大多数文档空单元格着色。这些文件将各个检查步骤分开，因此我想要查看的范围并不总是相邻的。我想出的是使用下面的复制功能创建一个新工作表并将所有非并发范围粘贴到一组漂亮的新并发范围中，然后让我的数组查看新工作表以绘制我的表格。我让它运行我需要的查找，然后摆脱现在无用的工作表。

```
Public Sub ColorMeCrazy()

' First Declare your variables that you will need line notes will be added to all the ones for just the array problem
Dim chkarray As Variant

Dim i As Integer ' for the array lookup loop
Dim j As Integer ' also for the array lookup loop

Dim chk1 As Boolean
Dim chk2 As Boolean

Dim cpyrange As Range ' the non-concurrent range collector haha.
Dim cz As Range

chk2 = True

Set cz = Worksheets("AN_PRM-36").Range("A1:I1,C2:I2,I3:I35,A30:H32,D33:H35,C34:C35,A36:E36,A22:H23,D24:H24,A16:H16,A8:H9,D10:H10")

' the next item below sets the ranges i wish to use. see that they arent all just right next to eachother.
Set cpyrange = Worksheets("AN_PRM-36").Range("G7:H7,G15:H15,G21:H21,G28:H29")

' this is the new sheet i made to create the array with
Sheets.Add.Name = "AN_PRM-36tmp"

' the data gets coppied to the new sheet but now its all together
cpyrange.Copy Destination:=Worksheets("AN_PRM-36tmp").Range("A1")

' now i tell the array i want it to use the data on the new sheet
chkarray = Worksheets("AN_PRM-36tmp").Range("A1:B5")

'this was my look up for the nonsense that i wanted to do later
For i = LBound(chkarray, 1) To UBound(chkarray, 1)

    For j = LBound(chkarray, 2) To UBound(chkarray, 2)

        Debug.Print chkarray(i, j)
            If chkarray(i, j) = "Pass" Then
            chk1 = True
            Else
            chk2 = False
            End If
    Next
Next

If chk1 = True And chk2 = True Then
cz.Interior.ColorIndex = 4

Else
cz.Interior.ColorIndex = 3

End If

' this last bit will get rid of the new sheet and not ask you are you sure you want it gone.
Application.DisplayAlerts = False
Sheets("AN_PRM-36tmp").Delete
Application.DisplayAlerts = True

End Sub 
```

# c# - 通过实体框架使用事务回滚更改

> ID：13246889
> 
> 赞同：0
> 
> 时间：2012-11-06T08:10:37.110
> 
> 标签：c#, entity-framework-4, transactions, dao, data-access

我有这个从通用 DAO 继承方法的特定 DAO 我想向此代码添加一个事务，以便回滚在发现异常时所做的所有更改

```
 TDAO tDAO = new TDAO();
        TDAO2 tDAO2 = new TDAO2();

        //Get the DAO to delete from the database let's call them dDao and dDao2

        //Start the Transaction
        using (TransactionScope trans = new TransactionScope())
        {
            try
            {
                //Delete all SGC Associated switch
                TDAO2.Delete(dDao);

                //Delete switch
                TDAO.Delete(dDao2);

                //send notification
                base.SendChangeNotification();

                //Commit the Information Completing the Transaction
                trans.Complete();
            }
            catch (UpdateException ex)//SQL exception
            {
                //Log the error
                //Rollback the changes if there is an exception
                throw new Exception(Resources.ErrorMessages.OperationNotPermited);
            }
            catch (Exception ex) //Other exception
            {
                //Log the error
                throw new Exception(Resources.ErrorMessages.UndifenedError);
            }
        } 
```

在 Visual Studio 中，转到项目中的“引用”图标。右键单击，添加引用。然后搜索 System.Transactions.dll。选择它，单击确定。然后尝试重建您的项目。还要确保顶部有 Using 语句 (C#) 或 Imports 语句 (VB)，例如 Using System.Transactions;

并且更改在代码中。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:22:20.847

您需要完成事务，否则事务将回滚。因此，在您的代码中，您需要添加 Transaction.Complete() 方法，如果您不这样做，它会自行回滚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T10:22:32.657

尽管您将此标记为已解决，但仍然是一个答案。

如果您使用实体框架，则不必担心事务。上下文管理工作单元并确保它在一个事务中提交（或回滚）。您的代码包含太多低级数据访问内容。让 EF 执行您的 CRUD 操作。

Entity Framework 允许您在代码的大部分部分中对*持久性一无所知。*我的观点是：你不需要 DAO 模式。更糟糕的是：它只会妨碍你。它首先将数据库操作和上下文实例分开，然后您必须通过事务范围将它们放在一起。这意味着：您正在管理工作单元。与 POCO 合作，而不是与 DAO 合作。让一个上下文实例跟踪更改并通过一次`SaveChanges()`调用保存它们。

# opencv - 如何使用函数“warpAffine”对我想要处理的任何 Mat 进行 warpAffine？不仅是（uchar）img？

> ID：13246900
> 
> 赞同：2
> 
> 时间：2012-11-06T08:11:22.230
> 
> 标签：opencv

当我使用函数“warpAffine”处理 CV_32S Mat 或其他一些函数时，它会出错。我发现：也许，“warpAffine”只能处理垫子，对吗？如果没有，我怎么能 warpAffine 其他类型的垫子？谢谢！

这里，如果 src 不是 uchar 类型，就会报错。

```
Mat src= Mat::zeros( 50, 50, CV_32S  );
Mat warp_dst= Mat::zeros( src.rows, (int)src.cols*1.41421356+1,  CV_32S  );
    for (int i = 0; i < 50; i++)   
        for (int j = 0; j < 50; j++)
        {
            (int)src.at<int>(i,j) =i*j;
            cout << (int)src.at<int>(i,j) <<endl;
        }
    srcTri[0] = Point2f( 0.0,0.0 );
    srcTri[1] = Point2f( src.cols*1.0 - 1, 0 );
    srcTri[2] = Point2f( 0, src.rows*1.0 - 1 );
    dstTri[0] = Point2f( src.cols*0.0, src.rows*0.0 );
    dstTri[1] = Point2f( src.cols*1.0-1, src.rows*0.0 );
    dstTri[2] = Point2f( src.cols*0.41421356-1, src.rows*1.0-1 );
warp_mat = getAffineTransform( srcTri, dstTri );
warpAffine( src, warp_dst, warp_mat, warp_dst.size() ); 
```

# php - Ajax 无法缓存

> ID：13246901
> 
> 赞同：5
> 
> 时间：2012-11-06T08:11:25.930
> 
> 标签：php, ajax, caching

我想将数据缓存在 broswer 中，这样 broswer 就不需要在几分钟内查询服务器。我添加了 php 缓存标头，但似乎它不起作用。这是我的 ajax 代码和 php 代码： Ajax 代码：

```
function myAjax(name, callback) {
    var url = './php/getJson.php?name=' + encodeURIComponent(name) + '&callback=?';
    jQuery.getJSON(url, function(data) {
        callback(data);
        jQuery.ajaxSetup({ cache: true });
    });
} 
```

PHP代码：

```
$seconds_to_cache = 3600;
$ts = gmdate("D, d M Y H:i:s", time() + $seconds_to_cache) . " GMT";
$lm = gmdate("D, d M Y H:i:s", time() - $seconds_to_cache/2) . " GMT";
header("Last-Modified: $lm");
header("Expires: $ts");
header("Pragma: cache");
header("Cache-Control: public, max-age=$seconds_to_cache");

include_once('getData.php');

$output = $_GET['name'];

echo $_GET['callback'].'('.$output.')'; 
```

感谢**MitchS**和**lenzai**的帮助。这个问题解决了。*cache:true*选项应该在任何 ajax 查询之前设置，并且旧的 jquery 库不支持缓存。所以**请确保您使用的是最新的 jquery 库**

对于想要一个工作示例的人：

阿贾克斯代码：

```
var callback = function(data) {
    alert("callback");
}
function myAjax(name) {
    var url = './php/getJson.php?name=' + encodeURIComponent(name) + '&callback=?';

    jQuery.ajaxSetup({ cache: true });
    jQuery.getJSON(url, function(data) {
        callback(data);
    });
} 
```

PHP代码：

```
$seconds_to_cache = 3600;
$ts = gmdate("D, d M Y H:i:s", time() + $seconds_to_cache) . " GMT";
$lm = gmdate("D, d M Y H:i:s", time() - $seconds_to_cache/2) . " GMT";
header("Last-Modified: $lm");
header("Expires: $ts");
header("Pragma: cache");
header("Cache-Control: public, max-age=$seconds_to_cache");

$output = '{"eventList":["event1","test event"]}';

echo $_GET['callback'].'('.$output.')'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T08:41:32.910

您正在将`Last-Modified`标题设置为一小时前并将其设置`max-age`为一小时。

这意味着在您发送此数据时，它已经处于缓存允许的最大期限，并且必须重新发送任何后续请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T03:50:35.763

我根据您的代码编写了一个测试项目。 [http://test-lenzai.rhcloud.com/index.html](http://test-lenzai.rhcloud.com/index.html)

每次按下按钮，它都会启动一个新的 ajax 请求...查询被发送两次，然后使用浏览器缓存！！！！

这是由 JQuery 引起的：

*   附加了第一个查询`&_=s135227990...`（可能是一些时间戳）
*   随后的查询没有这个额外的参数，所有相同的查询都有效地使用了缓存。

现在的问题是如何调整 jquery 以使第一个和第二个 ajax 查询相同

# ios - iOS推送通知，收到消息时自动响应服务器

> ID：13246902
> 
> 赞同：2
> 
> 时间：2012-11-06T08:11:28.460
> 
> 标签：ios, background, push-notification, apple-push-notifications

我的要求是将推送通知从服务器发送到 iPhone。一切运作良好。除非我需要我的 iPhone 端能够在收到通知时立即反馈到服务器端。如果我的应用程序在前台，我可以通过**didReceiveRemoteNotification**方法发送 HTTP 请求。但是如果我的应用程序在后台（单击主页按钮退出），则根本不会调用**didReceiveRemoteNotification ！**为什么？？？我在扯头发！

从技术上讲，我相信它是可以实现的。我检查了“Whats App”，phoneA 向 phoneB 发送消息：如果 phoneB 离线，phoneA 只会得到一个滴答声。稍后如果phoneB 上线，phoneA 会得到一个双勾。如果 phoneB 在后台，phoneA 也可以得到一个双勾。这意味着虽然 phoneB 在后台，但它做了一些事情。

我想知道当应用程序在后台时，Whats App 可以做什么。

非常感谢！问候，

本鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-29T08:41:04.967

请查看屏幕截图并确定您在您的应用中执行了相同操作，以便在您的应用处于后台时调用 didReceiveRemoteNotification[![在此处输入图像描述](../Images/1e3cf0f84dd8ca8d145e236a13371bc4.png)](https://i.stack.imgur.com/JZzue.png)

# php - 为什么 PHP 函数 htmlentities(...) 返回错误的结果？

> ID：13246903
> 
> 赞同：4
> 
> 时间：2012-11-06T08:11:35.400
> 
> 标签：php, html-entities

我有以下代码：

```
function testAccents() {
    $str = "àéè";
    $html = htmlentities($str);
    echo $html;
} 
```

当我运行它时，`&agrave;&eacute;&egrave;`我得到的不是`&Atilde;&nbsp;&Atilde;&copy;&Atilde;&uml;`.

我认为这可能是编码问题，但文件是 utf-8 ：

```
> file -bi PublicationTest.php 
  text/x-c++; charset=utf-8 
```

为什么我会得到这个奇怪的结果？

编辑：我使用 PHP 5.3。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-06T08:15:06.777

在 PHP 5.4.0 之前，[`htmlentities()`](http://php.net/htmlentities)默认需要 ISO-8859-1 数据。它将您的 UTF-8 输入解释为单字节字符，这会导致您得到有趣的结果。

具体指定编码。

```
$html = htmlentities($str, ENT_COMPAT, "UTF-8"); 
```

# web - 为什么我的网站在前面放“www”时会放大/缩小？

> ID：13246916
> 
> 赞同：0
> 
> 时间：2012-11-06T08:12:31.050
> 
> 标签：web

我的第一个网站正在进行中，但是当我在域前加上“www”时，它会缩小（或缩小，取决于兄弟），这可能是什么原因？我现在真的只有网站要显示，但会根据需要回答问题。我将 Django 和 apache2 与 mod_wsgi 和 psycopg2 一起使用。

[postacle.com](http://postacle.com)

[www.postacle.com](http://www.postacle.com)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T08:13:50.620

不适合我。您的浏览器可能有一个缩放设置，您不小心更改了您的站点，但它仅适用于单个域。尝试按`Ctrl`+`0`重置缩放设置（即控制加零）。

# java - GAE 存储到数据库但不显示在视图中

> ID：13246919
> 
> 赞同：1
> 
> 时间：2012-11-06T08:12:39.710
> 
> 标签：java, google-app-engine, google-cloud-datastore

嗨，我有谷歌应用引擎应用程序。我使用 JPA 和简单的 servlet 和 jsp。

我的代码：

```
Training training = new Training();
    training.setCoachName(req.getParameter("coachName"));
    training.setDate(req.getParameter("date"));
    training.setTime(req.getParameter("time"));
    EntityManager entityManager = EMFService.get().createEntityManager();
    try {
        entityManager.getTransaction().begin();
        entityManager.persist(training);
        entityManager.flush();           
        entityManager.getTransaction().commit();
    } finally {
        entityManager.close();
    }

    resp.sendRedirect("/overview"); 
```

和 servlet 用于查看培训列表

```
EntityManager entityManager = EMFService.get().createEntityManager();
    Query q = entityManager.createQuery("select t from " + Training.class.getName() + " t ");
    List<Training> result = q.getResultList();
    req.setAttribute("trainigs", result);
    entityManager.close();
    RequestDispatcher view = req.getRequestDispatcher("index.jsp");
    view.forward(req, resp); 
```

问题是，我存储到 db 记录，但 index.jsp 上没有显示。在我尝试有时刷新页面后，记录就在那里。所以在存储记录和在jsp上显示之间有几秒钟的延迟。

问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:33:00.503

您遇到的是一个称为[最终一致性](https://developers.google.com/appengine/docs/java/datastore/structuring_for_strong_consistency)的 Datastore 属性。

基本上发生的情况是：当您将数据写入 HRD 时，它会将数据写入表，然后在构建索引之前返回（= 索引是异步构建的）。由于查询需要索引，因此在建立索引之前，它们不会找到新写入的数据。

解决方案（在上面的链接中了解更多信息）：

1.  使用 get 而不是查询。获取总是强一致的。重构您的应用程序，以便将新保存的数据的键传递给视图 JSP，像往常一样执行查询，然后通过 get 将新写入的数据添加到列表中。
2.  使用链接中描述的祖先查询（恕我直言，在您的情况下是一个糟糕的解决方案）。

# ria - 部署 Silverlight RIA 远程服务器返回错误：NotFound

> ID：13246930
> 
> 赞同：1
> 
> 时间：2012-11-06T08:13:15.527
> 
> 标签：ria

我已经安装了 RIA 服务器，将相关的 DLL 设置为“copy local = true”，但是每当我的应用程序尝试访问我的服务/数据库时，我都会得到：

查询“GetWeatherDatas”的加载操作失败。远程服务器返回错误：NotFound。

我通过从 Visual Studio 复制 xap 文件和测试页面进行部署。

Fiddler 报 404 错误

GET /TheWeatherProjectv2-Web-WeatherDataService.svc/binary/GetWeatherDatas?$orderby=it.date_recorded%2bdesc&$take=10080

是否需要将应用程序设置添加到 IIS 或更改我的 Web 配置中的某些内容？

这台机器是 Windows 7 pro，运行 IIS 7.5，我将应用程序托管在我自己的机器上。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:14:57.827

通过 Visual Studio 2012 使用“发布”解决了这个问题，我还必须在我的 SQL Server 数据库中添加一个 IISAPPPOOL\DefaultAppPool 帐户

# php - 打印 Visifire Silverlight 对象

> ID：13246931
> 
> 赞同：0
> 
> 时间：2012-11-06T08:13:26.383
> 
> 标签：php, silverlight, visifire

我正在使用 PHP。
有一个使用 JavaScript 插入到 html 页面中的 visifire 图表对象。
当我打印页面时，图表不显示。
是一种打印方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:36:09.793

你能告诉我你是如何导出图表的吗？您必须在 Chart 中设置[ToolBarEnabled](http://www.visifire.com/documentation/Visifire_Documentation/Charts/Reference/Attribute_Reference/ToolBarEnabled1.htm)属性才能打印它？

# jquery - 为什么 .first() 在这里不起作用？

> ID：13246933
> 
> 赞同：6
> 
> 时间：2012-11-06T08:13:34.340
> 
> 标签：jquery

在下面的代码中，我试图获取“最新”下的第一个 div 的值，但我不断得到“未定义”。我期待值 5705。这应该有效，对吧？我该如何正确设置？

```
var auto_refresh = setInterval(function()
{
    console.log($('.latest').first().attr('lastValue'));
}, 5000); // refresh every 5 seconds 
```

html部分：这里会添加更多的div。所以 5705 可能是 5710 或其他东西。

```
<div class="latest">
<div class="story" lastValue="5705">Story 5</div>
<div class="story" lastValue="5704">Story 4</div>
<div class="story" lastValue="5703">Story 3</div>
<div class="story" lastValue="5702">Story 2</div>
<div class="story" lastValue="5701">Story 1</div>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T08:16:31.017

你必须选择第一个**孩子**而不是第一个**容器**

```
$('.latest>div').first().attr('lastValue') 
```

或者

```
$('.latest').children().first().attr('lastValue') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T08:14:47.527

您要选择第一个孩子，而不是选择最新类的第一个元素。

```
console.log($('.latest > div').first().attr('lastValue')); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T08:16:45.797

因为您选择了错误的元素，所以您*想要*这些`.story`元素，但您正在*选择*这些`.latest`元素。采用：

```
$('.latest .story:first').attr('lastValue'); 
```

或者：

```
$('.latest .story:first-child`).attr('lastValue'); 
```

或者：

```
$('.story:first-child').attr('lastValue'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T08:17:30.130

您有几种方法可以做到这一点：

```
console.log($('.latest .story').first().attr('lastValue')); 
```

或者

```
console.log($('.latest .story:first-child').attr('lastValue')); 
```

或者

```
console.log($('.latest').find('.story').attr('lastValue')); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-06T13:09:44.837

`$('.latest')`返回具有`latest`in`class`属性的任何元素的数组。
所以`$('.latest').first()`返回这个数组的第一个元素。
在您的示例中，返回的 HTML 元素`div.latest`不是第一个`div.story`.

如果您尝试 :`console.log($('.latest').first().attr('class'))`您将看到与您所写内容匹配的内容。

看来您要到达第一个最新故事，即`div.story`元素下的第一个`div.latest`元素。
所以尝试：`console.log($('.latest .story').first())`

我在这里对 JSFIDDLE 的测试：http: [//jsfiddle.net/lnplnp/yuMPf/](http://jsfiddle.net/lnplnp/yuMPf/)

# android - 具有不同方向的活动数量的应用程序

> ID：13246934
> 
> 赞同：0
> 
> 时间：2012-11-06T08:13:37.457
> 
> 标签：android, tabs, screen-orientation

在我们的应用程序中，我有四个选项卡，在第一个选项卡上，单击第一个选项卡时显示三个选项。三个选项是： - 1）相机视图。2) 地图视图 3) 列表视图。

我需要纵向模式下的整个应用程序，除了地图视图和相机视图。我们需要在纵向模式和横向模式下显示这些视图。我在清单文件中为选项卡活动设置了 android:screenOrientation="portrait" 。

我不知道如何在运行时更改不同的活动，tabview 中的不同 2 方向。

帮助将被appriciated。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T09:09:48.643

您好，您可以使用此代码...

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:15:58.257

您可以随时调用此方法：

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T08:20:28.967

> 我需要纵向模式下的整个应用程序，除了地图视图和相机视图。我们需要在纵向模式和横向模式下显示这些视图。我在清单文件中为选项卡活动设置了 android:screenOrientation="portrait" 。

您需要`android:screenOrientation="portrait"`在清单中为选项卡中显示的每个活动进行设置。

或者您可以在您的 java 文件中执行此操作，例如[Dr. Dredel](https://stackoverflow.com/users/59947/dr-dredel)为每个活动建议的

# grails - 无法安装 grails 插件 mongodb

> ID：13246935
> 
> 赞同：1
> 
> 时间：2012-11-06T08:13:37.337
> 
> 标签：grails, plugins, installation

我正在使用带有 GGTS ide 的 grails-2.0.4 版本。当我尝试安装 mongodb 时发生了一些错误。我尝试了两种方式。

```
 **1)compile ":mongodb:1.0.0.GA"** 
```

然后它得到这个错误：

| 加载 Grails 2.0.4 | 配置类路径 :: 问题摘要 :: :::: ERRORS 服务器访问错误：连接超时：连接 url=http://plugins.grails.org/grails-mongodb/tags/RELEASE_1_0_0_GA/mongodb-1.0.0.GA。绒球

```
Server access Error: Connection timed out: connect url=http://plugins.grails.org/grails-mongodb/tags/RELEASE_1_0_0_GA/grails-mongodb-1.0.0.GA.jar

Server access Error: Connection timed out: connect url=http://repo.grails.org/grails/plugins//mongodb/1.0.0.GA/mongodb-1.0.0.GA.pom

Server access Error: Connection timed out: connect url=http://repo.grails.org/grails/plugins//mongodb/1.0.0.GA/mongodb-1.0.0.GA.jar

Server access Error: Connection timed out: connect url=http://repo.grails.org/grails/core//mongodb/1.0.0.GA/mongodb-1.0.0.GA.pom

Server access Error: Connection timed out: connect url=http://repo.grails.org/grails/core//mongodb/1.0.0.GA/mongodb-1.0.0.GA.jar

Server access Error: Connection timed out: connect url=http://svn.codehaus.org/grails/trunk/grails-plugins/grails-mongodb/tags/RELEASE_1_0_0_GA/mongodb-1.0.0.GA.pom

Server access Error: Connection timed out: connect url=http://svn.codehaus.org/grails/trunk/grails-plugins/grails-mongodb/tags/RELEASE_1_0_0_GA/grails-mongodb-1.0.0.GA.jar

Server access Error: Connection timed out: connect url=http://repo1.maven.org/maven2//mongodb/1.0.0.GA/mongodb-1.0.0.GA.pom

Server access Error: Connection timed out: connect url=http://repo1.maven.org/maven2//mongodb/1.0.0.GA/mongodb-1.0.0.GA.jar 
```

| 错误无法解决依赖关系（在 BuildConfig.groovy 中将日志级别设置为“警告”以获取更多信息）：

*   :mongodb:1.0.0.GA

    ```
     **2) grails install-plugin C:\Documents and Settings\marao18\Desktop\gorm-mongodb-0.5.4** 
    ```

    然后出现此错误：请帮助我。

    ```
     | Loading Grails 2.0.4 
    ```

    | 配置类路径。| 环境设置为开发..... | 解析插件 C:\Documents. 请稍候... :: 问题总结 :: :::: ERRORS 服务器访问错误：连接超时：connect url=http://plugins.grails.org/grails-%5CDocuments/tags/RELEASE_and/%5CDocuments-and .pom

    服务器访问错误：连接超时：connect url=http://plugins.grails.org/grails-%5CDocuments/tags/RELEASE_and/grails-%5CDocuments-and.zip

    服务器访问错误：连接超时：connect url=http://repo.grails.org/grails/plugins/C/%5CDocuments/and/%5CDocuments-and.pom

    服务器访问错误：连接超时：connect url=http://repo.grails.org/grails/plugins/C/%5CDocuments/and/%5CDocuments-and.zip

    服务器访问错误：连接超时：connect url=http://repo.grails.org/grails/core/C/%5CDocuments/and/%5CDocuments-and.pom

    服务器访问错误：连接超时：connect url=http://repo.grails.org/grails/core/C/%5CDocuments/and/%5CDocuments-and.zip

    服务器访问错误：连接超时：connect url=http://svn.codehaus.org/grails/trunk/grails-plugins/grails-%5CDocuments/tags/RELEASE_and/%5CDocuments-and.pom

    服务器访问错误：连接超时：connect url=http://svn.codehaus.org/grails/trunk/grails-plugins/grails-%5CDocuments/tags/RELEASE_and/grails-%5CDocuments-and.zip

    服务器访问错误：连接超时：connect url=http://repo1.maven.org/maven2/C/%5CDocuments/and/%5CDocuments-and.pom

    服务器访问错误：连接超时：connect url=http://repo1.maven.org/maven2/C/%5CDocuments/and/%5CDocuments-and.zip

| 解析插件 [name:\Documents, group:C, version:and] 时出错。未找到插件。| 未找到名称 [C:\Documents] 和版本 [and] 的错误插件

# python - 字符串赋值

> ID：13246941
> 
> 赞同：1
> 
> 时间：2012-11-06T08:14:08.030
> 
> 标签：python

我看了一下python代码，其中字符串变量分配看起来像：

```
var1 = var2[:] 
```

我只是想知道有什么区别：

```
var1 = var2 
```

这是我的实验：

```
>>> original = "some text"
>>> copy1 = original
>>> copy2 = original[:]
>>> original = "another text"
>>> copy1
'some text'
>>> copy2
'some text' 
```

**更新：**

这是一个完整的[代码](http://pastebin.com/CvTgkPz9)。此代码搜索替换密码的密钥。如果我删除 '[:]' 此代码将运行非常缓慢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T08:20:30.850

由于[interning](https://stackoverflow.com/questions/1136826/what-does-python-intern-do-and-when-should-it-be-used)，两者之间通常没有区别（在结果对象中）。我们可以通过操作符检查两个变量是否指向同一个对象，与`is`操作`==`符检查对象的实际内存地址是否相同：

```
>>> a = "foo"
>>> b = a
>>> a is b
True
>>> c = a[:]
>>> a is c
True 
```

实习是一种节省内存和加速不可变对象比较的机制，它的工作原理是这样的：在创建新的不可变对象之前，python 检查是否已经存在相同的不可变对象。如果是这样，它只使用对现有对象的引用。它可以做到这一点而不会造成伤害，因为没有办法改变不可变的。这就是为什么即使是两个独立创建的字符串也可能指向同一个对象：

```
>>> a = "foo"
>>> b = "foo"
>>> a is b
True 
```

但是，如果`var2`是一些可变的顺序对象，例如 a `list`，那么`var2[:]`将是 的浅拷贝`var2`，因此对一个对象进行更改不会影响另一个对象。

```
>>> a = list("foo")
>>> a
['f', 'o', 'o']
>>> b = a
>>> b is a
True
>>> c = a[:]
>>> c is a
False
>>> b.pop()
'o'
>>> a
['f', 'o']
>>> b
['f', 'o']
>>> c
['f', 'o', 'o'] 
```

如需了解全貌，另请阅读 Ashwini Chaudharys 的回答。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T08:21:53.410

`[:]` 表示法用于切片，

`a[m:n]`将返回从 index `m`upto开始的字符`n-1`，如果没有传递任何内容，则返回整个字符串。

```
In [1]: a="foobar"

In [2]: a[:]          #this is equal to a only as nothing to passed to slicing
Out[2]: 'foobar'

In [3]: a[1:]         #return everything after index 1
Out[3]: 'oobar'

In [4]: a[:1]         #return everything before 1st index
Out[4]: 'f'

In [5]: a[:-1]        #return everything before the last character
Out[5]: 'fooba' 
```

`b=a[:]`和之间的区别在于`b=a`b=a 在内部采用更少的步骤：

```
In [7]: def func1():
   ...:     a="foo"
   ...:     b=a
   ...:     

In [8]: def func2():
   ...:     a="foo"
   ...:     b=a[:]
   ...:     

In [9]: dis.dis(func1)
  2           0 LOAD_CONST               1 ('foo')
              3 STORE_FAST               0 (a)

  3           6 LOAD_FAST                0 (a)
              9 STORE_FAST               1 (b)
             12 LOAD_CONST               0 (None)
             15 RETURN_VALUE        

In [10]: dis.dis(func2)
  2           0 LOAD_CONST               1 ('foo')
              3 STORE_FAST               0 (a)

  3           6 LOAD_FAST                0 (a)
              9 SLICE+0             
             10 STORE_FAST               1 (b)
             13 LOAD_CONST               0 (None)
             16 RETURN_VALUE 
```

`timeit`：

```
In [11]: %timeit func1()
1000000 loops, best of 3: 336 ns per loop

In [12]: %timeit func2()
1000000 loops, best of 3: 397 ns per loop 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T08:24:47.370

在您链接到的完整代码中，有可能`original`是 a `list`，而不是 a `str`：

```
parentkey,parentscore = startkey or list('ABCDEFGHIJKLMNOPQRSTUVWXYZ'),-99e99 
```

进而

```
child = parentkey[:]
# swap two characters in the child
child[a],child[b] = child[b],child[a] 
```

正如**lazer**所提到的，在这种情况下，创建一个副本会有所作为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T08:26:00.477

请注意，在您的代码中，变量可以是 a`list`而不是字符串。

请参见以下示例：

```
>>> a = [1,2,3]
>>> b = a
>>> b[0] = 'foo'
>>> a
['foo', 2, 3] 
```

但：

```
>>> a = [1,2,3]
>>> b = a[:]
>>> b[0] = 'foo'
>>> a
[1, 2, 3] 
```

换句话说，在第一个示例中，对的引用`a`被保留在`b`并更改`b`更改`a`中。使用切片表示法`[:]`可以进行深度（1 级）复制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T08:24:39.847

`a[:]`和 just 一样`a`，`id(a) == id(a[:])`所以没有区别）

```
a = 'Convert an integer number to a binary string Convert an integer number to a binary'
id(a) == id(a[:])
>>> True 
```

对于 list [:] 返回它的副本。

```
a = [1, 2, 3]
id(a) == id(a[:])
>>> False 
```

# vba - 在访问中使用 VBA 的 GUI。来自查询的记录集

> ID：13246942
> 
> 赞同：0
> 
> 时间：2012-11-06T08:14:08.437
> 
> 标签：vba, ms-access, ms-access-2007, recordset

使用 VBA 在 Access 中制作 GUI（我在这个学期第一次看到它，这对我来说看起来很不寻常）。我得到了`Authors`我有列的表格，`author_id`和带有列的表格，。我在表单上有按钮，单击时应要求用户输入作者姓氏，然后搜索并显示该作者的所有书籍。`last_name``first_name``Books``author_id``book_name`

因此，我尝试从 Authors 表中查找作者 ID，然后从 Books 表中显示 author.author_id 等于 books.author_id 的所有书籍。

我在想我需要创建包含 author_id 值的临时查询，然后使用 SQLquery 使用此查询创建记录集，`"SELECT [Books].[book_name] AS [Bookname] FROM [Books] WHERE [Books].[author_id] = [test].[ID]"`但我卡在这里 - 我试图检查这件事是否有效，但它说有一个错误`3061`

```
Private Sub authorlist_Click()

    Dim dbs As Database, authorsRS, booksRS As Recordset, queryStr, idbynameQuery, srchASurStr, strOutput, srId As String, qdf As QueryDef

    Set dbs = CurrentDb()

    srchASurStr = InputBox("Input author surname, please", , , 100, 100)

    strQuery = "SELECT [Authors].[author_id] AS [ID] FROM [Authors] WHERE [Authors].[last_name] =  " & srchASurStr & ""

    Set authorsRS = dbs.OpenRecordset(strQuery, dbOpenSnapshot)

    With dbs
        Set qdf = .CreateQueryDef("test", strQuery)
        DoCmd.OpenQuery "test"
        .QueryDefs.Delete "test"
    End With

End Sub 
```

那么你能帮我了解一下有什么问题吗？是否有更简单的方法来显示某个作者的所有书籍（可能不使用 SQL 查询）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T10:48:41.210

SQL 语句中的字符串值需要用单引号 ( `'`) 或双引号 ( `"`) 括起来：

```
SELECT author_id FROM authors WHERE last_name = "Smith" 
```

如果不带引号写：

```
SELECT author_id FROM authors WHERE last_name = Smith 
```

`Smith`将被理解为字段名称而不是字符串值。所以你的代码应该是这样的：

```
'Chr returns a string from a character code. 34 is the code for "
strQuery = "SELECT author_id FROM authors WHERE last_name = " & Chr(34) & srchASurStr & Chr(34) 
```

在 VBA 中，您可以通过将字符串加倍来转义双引号：

```
strQuery = "SELECT author_id FROM authors WHERE last_name = """ & srchASurStr & """" 
```

* * *

**SQL 注入**：请记住，如果用户在其中输入一个字符串`"`，则可能会出现错误，因为生成的 SQL 语句具有无效的语法：

```
SELECT author_id FROM authors WHERE last_name = "Smi"th" 
```

避免这个问题的正确方法是使用参数。

* * *

一些注意事项：

*   您可以在查询中引用表单控件：`[Forms]![FormName]![ControlName]`. 因此，您可以创建一个基于表单文本框过滤的已保存查询，而不是使用输入框。
*   考虑使用组合框让用户从列表中进行选择，而不是让用户键入自由文本。组合框可以有多个列，组合框的值是第一列 ( `author_id`)，显示的值是另一个表达式 (`last_name`或`last_name & " " & first_name`)。如果将 ColumnWidths 属性设置为 0（对于第一列），则将显示下一列
*   如果您更喜欢使用文本框，请考虑`LIKE`在查询中使用运算符，以显示`last_name`包含用户字符串的所有作者：

    `SELECT author_id FROM authors WHERE last_name LIKE "%sm%"`

    将返回 Smith、Smythe 和 Asmodeus。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:04:33.320

我建议你设置一个表单和子表单。表单可以包含作者详细信息，子表单可以包含该作者的书籍，您可以进一步添加一个文本框，用户可以填写部分作者姓名。然后，您可以将过滤器应用于主表单以显示具有该名称的所有作者。

```
Me.Filter = "Author Like '*" & Me.Search & "*'"
Me.FilterOn = True 
```

对此有许多变体，用户可以从组合或列表框中选择名称。该表单可以是在标题中带有过滤器/搜索等的连续表单。

# php - 如何在 php 中为 javascript 打印数组值（'value1'、'value2'）

> ID：13246953
> 
> 赞同：-2
> 
> 时间：2012-11-06T08:14:55.110
> 
> 标签：php, arrays

我有月份数组，我只需要将值打印为'Oct'，'Nov'

```
echo implode(', ', $months); 
```

我试过 implode 但得到的值是 Oct, Nov 我需要这些值像 'Oct', 'Nov'

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T08:58:27.507

做你想做的事情的唯一正确方法是使用[`json_encode()`](http://php.net/json_encode).

```
echo json_encode($months); 
```

*任何*使用字符串函数`implode`等的解决方案都可能在极端情况下失败。仅使用月份名称不太可能发生，但最好还是正确执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:16:38.923

这不是很优雅，但可以完成这项工作：

```
echo '\''.implode('\', \'', $months). '\''; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-06T08:16:53.967

Tty 使用：

```
for($i = 0 ; $i< sizeof($months) ; $i++){
     echo "'".$months[$i]."'";
     if($i != (sizeof($months)-1))
       echo ", ";
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-06T08:51:31.500

```
$my_array = array('October', 'NOvember');
echo "'" . implode("', '", $my_array) . "'"; 
```

# java - 具有@OneToOne 关系的 jpa 规范

> ID：13246959
> 
> 赞同：4
> 
> 时间：2012-11-06T08:15:09.130
> 
> 标签：java, repository, jpa-2.0, criteria-api

我想使用带有规范的 jpa 存储库

现在我有两张桌子

```
@Entity
@Table(name="user")
public class User implements Serializable {

private static final long serialVersionUID = 1L;

private Long idUser;

private Area area;

@Id @GeneratedValue(strategy=GenerationType.AUTO)
@Column(name="iduser")
public Long getIdUser() {
return idUser;
}
public void setIdUser(Long idUser) {
this.idUser = idUser;
}

@OneToOne(fetch=FetchType.LAZY)
@JoinColumn(name="idarea")
public Area getArea() {
    return area;
}

public void setArea(Area area) {
    this.area = area;
}

} 
```

和面积表

```
@Entity
@Table(name = "area")
public class Area {

@Id @GeneratedValue(strategy=GenerationType.AUTO)
@Column(name="idarea")
private Long idArea;

@Column(name="area_name")
private String areaName;

public Long getIdArea() {
    return idArea;
}

public void setIdArea(Long idArea) {
    this.idArea = idArea;
}

public String getAreaName() {
    return areaName;
}

public void setAreaName(String areaName) {
    this.areaName = areaName;
}

} 
```

然后我有用户存储库，它也扩展了 JpaSpecificationExecutor

```
public interface UserRepository extends   CrudRepository<User,Long>,JpaSpecificationExecutor<User> {
} 
```

最后我有一个简单的规范

```
public class UserSpecification {

public static Specification<User> findByAreaName(final String areaName){
    return new Specification<User>() {

        @Override
        public Predicate toPredicate(Root<User> root,
                CriteriaQuery<?> criteria, CriteriaBuilder cb) {
            return cb.equal(root.<String>get("??????"),areaName);
        }
    };

}

} 
```

所以，我的问题是：我必须在“？？？？？？” 那是表区域的areaName？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T08:21:07.807

你可以试试

```
return cb.equal((Path<String>) ((Path<Area>) root.get("area")).get("areaName"),areaName); 
```

而且您必须确保该区域已加载，因为它很懒惰。

编辑：正如我在评论中提到的，也许只是尝试不进行投射。

对于这种情况，我有一种方法，您可以根据自己的需要进行调整：

```
@SuppressWarnings("unchecked")
private <T, R> Path<R> getPath(Class<R> resultType, Path<T> root, String path) {
    String[] pathElements = path.split("\\.");
    Path<?> retVal = root;
    for (String pathEl : pathElements) {
        retVal = (Path<R>) retVal.get(pathEl);
    }
    return (Path<R>) retVal;
} 
```

它用点表示法调用以获取路径。在您的情况下，它将是：

```
getPath(String.class, root, "area.areaName"); 
```

希望能帮助到你！

# tomcat - 在 Tomcat 中为每个服务启用相互 SSL

> ID：13246961
> 
> 赞同：2
> 
> 时间：2012-11-06T08:15:11.650
> 
> 标签：tomcat, ssl, tomcat7

我已经成功地在客户端应用程序和 Tomcat 实例之间设置了相互 SSL。但是，我现在正在寻找一种方法，通过相互 SSL 仅公开部署在 Tomcat 中的服务子集。虽然看起来可以使用 APR 配置（通过将“SSLVerifyClient”属性的值定义为“可选”），但我似乎无法找到一种方法来对 Tomcat 中的 SSL 的 JSSE 实现做同样的事情。感谢任何关于如何做到这一点的意见。

干杯，普拉巴斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T11:15:25.247

（请注意，`SSLVerifyClient="optional"`使用 APR 等效于`clientAuth="want"`使用 JSSE 连接器。尽管是可选的，但这是在连接时协商的，一旦服务器知道路径就不会重新协商。）

如果您只想对某些 web 应用程序（或路径）使用客户端证书身份验证，则需要使用信任库配置连接器，但保留`clientAuth="false"`.

然后，在您的 中`WEB-INF/web.xml`，您需要配置`CLIENT-CERT`身份验证。这将在必要时使用重新协商来请求客户端证书。配置如下所示：

```
<web-app>
    <display-name>My Webapp</display-name>
    <security-constraint>
        <web-resource-collection>
            <web-resource-name>App</web-resource-name>
            <url-pattern>/</url-pattern>
        </web-resource-collection>
        <auth-constraint>
            <role-name>cert</role-name>
        </auth-constraint>
        <user-data-constraint>
            <transport-guarantee>CONFIDENTIAL</transport-guarantee>
        </user-data-constraint>
    </security-constraint>

    <login-config>
        <auth-method>CLIENT-CERT</auth-method>
    </login-config>

    <security-role>
        <role-name>cert</role-name>
    </security-role>
</web-app> 
```

（在配置 Tomcat 用户时，您还需要将用户的主题 DN 映射到适当的角色。）

# magento - 购物车中的 Magento 缺货说明

> ID：13246963
> 
> 赞同：0
> 
> 时间：2012-11-06T08:15:40.003
> 
> 标签：magento, fonts, notifications, cart

如何更改购物车中这张便笺的颜色？我在主css文件中找不到它。字体默认为浅灰色，买家很容易看不到。我想更改它，但找不到合适的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:43:05.167

尝试使用chrome，右键单击元素（exp文本或输入）然后选择“检查元素”，你会发现css url路径

# xcode - URL Scheme：什么样的字符串结果

> ID：13246964
> 
> 赞同：0
> 
> 时间：2012-11-06T08:15:50.737
> 
> 标签：xcode, visual-studio, url-scheme, marmalade

我正在使用 Marmalade 通过 VisualStudio 和 PC 开发 iOS 应用程序。像 HeyZap 这样的社交功能的集成需要通过以下方式对其进行初始化：

```
loadHeyzap("YOUR_APP_ID_HERE","YOUR_APP_URL_HERE", true); 
```

App_ID 是在 iTunes 应用页面中定义的 ID（我知道了）。

App_URL “也应该类似地替换为您的 iPhone 的 URL 方案” [来自 HeyZap 集成文档]。

好吧，HeyZap 帮助台对通过使用 VisualStudio+PC 获取此字符串没有用处（事实上，他们告诉我“使用 XCode+Mac 代替......”）。由于这是一个简单的字符串，我想我可以从我的应用程序的已知参数开始获取它。我想在里面找到类似 [app_name]&=other-chars-....

有没有办法在不使用 XCode 的情况下构建这个字符串，只是从我已经拥有的信息开始并在这里和那里放置一些特殊的字符？换句话说，是否有一种标准方法可以自动构建此字符串，而无需通过 XCode 进行构建？我想准备一个函数来传递我的应用程序参数，结果我得到了 URL Scheme 字符串。

干杯，

扎普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:54:10.703

造物主的回答是错误的。URL 模式是应用程序在 iOS 中相互通信的方式。

*这是 Apple 必须说的* [http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007899](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007899)

一个例子是：yourgame://

*这是您如何在 XCode 中定义一个*

When you define a URL schema in XCode, you can call that URL from Safari or any app installed on the device and it will switch to your game.

The way you define it in XCode is by going to your project settings, clicking the Info tab at the top, going to the bottom where it says "URL Types", expand that, and click the + button at the bottom. Then define both the identifier and the URL schemes with something reasonably unique like "yourgamename". Done!

[http://i.stack.imgur.com/pxEKd.png](http://i.stack.imgur.com/pxEKd.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T07:14:22.473

URL 方案很可能是您的应用在 App Store 中的 url。您可以从 iTunesConnect 获得它。转到您的应用程序并复制`View in App Store`链接的 url。这就是你想要的字符串;-)

让我知道它是否不起作用。

**编辑：**
嗯，App url 对我有用，不知道为什么它不适合你。如果你想编辑 URL 方案，你也可以不使用 XCode 来完成。您需要在 mkb 设置中包含 Info.plist 文件。您可以在那里编辑或检查 marmalade 正在使用的当前 URL 方案。默认 plist 文件位于 s3e 文件夹中。不知道具体位置。

# java - 本示例中使用的 Android Java 对象/类语法

> ID：13246965
> 
> 赞同：0
> 
> 时间：2012-11-06T08:15:50.133
> 
> 标签：java, android

我是 Android 新手，但我知道`Javascript`所以我对面向对象编程有一定的了解。

在这一行：

```
Resources myResources = getResources();
AnimationDrawable androidAnimation;
androidAnimation = 
  (AnimationDrawable)myResources.getDrawable(R.drawable.frame_by_frame); 
```

1.  androidAnimation 是由 AnimationDrawable 类初始化的新对象吗？
2.  在 (AnimationDrawable)myResources 中，类在括号中的语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T08:24:38.167

1.  不`androidAnimation`。不是一个对象。它是指向`AnimationDrawable`类实例的引用。

    在以下`object creation`陈述和分配中：-

    ```
    MyClass obj = new MyClass(); 
    ```

    *   RHS 的价值 -`new MyClass()`创建一个`object`.

    *   LHS 上的值 -`MyClass obj`创建对该对象的引用。

2.  这被称为`typecasting`。这样做是因为`reference type`该方法调用返回的可能与`reference type on LHS`. 因此，需要进行类型转换以使其兼容。

有关这些概念的更多详细信息，请参阅[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/index.html)：-

*   [第 4.3 节。- 引用类型和值](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.3)
*   [第 5 节 - 转换和促销](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html)
*   [Oracle 教程 - 类和对象](http://docs.oracle.com/javase/tutorial/java/javaOO/index.html)

# javascript - 从 JavaScript 调用 Date()。这种方法从何而来？

> ID：13246969
> 
> 赞同：1
> 
> 时间：2012-11-06T08:16:08.947
> 
> 标签：javascript, html

我正在尝试开始学习 JavaScript，而不是一直复制它。我知道这可能非常简单，但它`Date()`从何而来？为什么我可以调用它？

```
<!DOCTYPE html>
<html>
<head>
<script>
    function displayDate() {
        document.getElementById("demo").innerHTML = Date();
    }
</script>
</head>
<body>

<h1>My First JavaScript</h1>
<p id="demo">This is a paragraph.</p>

<button type="button" onclick="displayDate()">Display Date</button>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T08:17:10.530

`Date()`是一个内置对象，在全局范围内声明，就像`Math`等`Array`。

`4.2 Language Overview`您可以在[ECMA 规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)中的部分阅读有关此内容的更多信息。引用：

> ECMAScript 定义了一组内置对象，这些对象完善了 ECMAScript 实体的定义。这些内置对象包括全局对象、Object 对象、Function 对象、Array 对象、String 对象、Boolean 对象、Number 对象、Math 对象、Date 对象、RegExp 对象、JSON 对象、以及错误对象 Error、EvalError、RangeError、ReferenceError、SyntaxError、TypeError 和 URIError。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T08:20:54.223

它是[Date 对象的构造函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)，它是JavaScript 中可用的[全局对象之一。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects)

**编辑：**请注意您的代码示例不使用`new`，因此它没有被用作构造函数——它将返回一个字符串而不是一个对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T08:21:41.763

在[ECMAScript 规范](http://ecma-international.org/ecma-262/5.1/#sec-A.5)中描述了[Date 对象](http://ecma-international.org/ecma-262/5.1/#sec-15.9.2.1)。也可以尝试[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)以获取更多信息和示例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T08:28:59.623

Date() 是一个内置对象，在全局范围内声明

请记住，日期的值是来自用户电脑而不是服务器日期的客户端值

# javascript - 单击按钮时的工具提示

> ID：13246971
> 
> 赞同：2
> 
> 时间：2012-11-06T08:16:18.567
> 
> 标签：javascript, jquery

我需要在单击时显示一个工具提示（而不是悬停），它应该在 200 毫秒后淡出

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:19:07.957

我想推荐 Twitter Bootstrap 库 - 它有你想要的一切，并且已经非常巧妙地实现了 [http://twitter.github.com/bootstrap/javascript.html#tooltips](http://twitter.github.com/bootstrap/javascript.html#tooltips)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:36:22.673

我通常使用这个 jQuery 插件：

[提示 jQuery 插件](http://code.drewwilson.com/entry/tiptip-jquery-plugin)

这是一个示例 HTML 代码：

```
<img class="example" src="example.jpg" title="Example text" /> 
```

您可以像这样自定义工具提示：

```
$(document).ready(function(){
    $(".example").tipTip({activation: "click"});
}); 
```

单击图像时会出现工具提示，但只有当您将鼠标移出图像时才会消失。

# javascript - 从 python HttpResponse 获取 XML

> ID：13246974
> 
> 赞同：0
> 
> 时间：2012-11-06T08:16:21.000
> 
> 标签：javascript, python, html, xml, django

有什么方法可以从 python HttpResponse 获取 xml 数据（通过 Javascript）并将其放入网页上的 body 元素中？

python中有我的xml示例：

```
import xml.etree.ElementTree as ET

root = ET.Element("table")

tr = ET.SubElement(root, "tr")
td = ET.SubElement(tr, "td")
td.text = "some text"
tree = ET.ElementTree(root) 

response = HttpResponse(tree) 
```

JS：

```
$(document).ready(function() {
  $.get("http://localhost:8000/getXml", function(data){
    alert(data);
  });      
}); 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:34:20.840

HTML 是 XML，因此您作为 HTTP 响应返回的任何 HTML（部分，而不是完整页面，即没有`<head>`或`<body>`标签）都可以插入网页中。

这就是 ajax 请求的作用。

您想使用 XML API 构建响应吗？虽然你可以这样做，但 django template 非常适合。以任何方式构建响应，获取字符串表示并作为响应返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:40:20.950

I agree with Rohan that you should research Python if you're trying to serve data from Python to a web-client, or as a mixture of HTML/CSS/Javascript, or what have you. Check this [Django tutorial](https://docs.djangoproject.com/en/dev/intro/tutorial01/) out. It's awesome and only took me a few days to get through, and allows for a lot of different applications. The Onion, if you've ever heard of it apparently uses Django.

# c++ - 如何在共享库中的确切行号上设置断点？

> ID：13246975
> 
> 赞同：1
> 
> 时间：2012-11-06T08:16:21.573
> 
> 标签：c++, c, gdb

我有一个源文件 shared_lib_test.c ，其中有如下代码：

```
10 void test_function(void)
11 {
12    do_me();
13    skip_me();
14    return;
15 } 
```

我想使用 gdb 跳过第 13 行，我该怎么做？此函数属于共享库而不是二进制文件。

如果此函数属于二进制文件，那么我可以使用以下命令来执行此操作：

```
b shared_lib_test.c:13
commands 1
jump 14
continue
end 
```

但由于它属于共享库，我无法在源文件的确切行号上设置断点，我尝试了'b test_function +2'，但对 gdb 来说似乎是非法的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T10:16:15.427

**对于调试共享库**，您需要使用

`set breakpoint pending`-- 设置调试器关于挂起断点的行为。

在共享库中设置断点是很常见的。共享库可以在程序执行时显式加载和卸载，并且可能重复加载。为了支持这个用例，gdb 会在加载或卸载任何共享库时更新断点位置。通常，您会在调试会话开始时、未加载库以及库中的符号不​​可用时在共享库中设置断点。当您尝试设置断点时，gdb 会询问您是否要设置所谓的挂起断点——地址尚未解析的断点。

gdb 提供了一些额外的命令来控制当 `break' 命令无法将断点地址规范解析为地址时发生的情况：

`set breakpoint pending auto` 这是默认行为。当 gdb 找不到断点位置时，它会询问您是否应该创建挂起的断点。

`set breakpoint pending on` 这表明一个无法识别的断点位置应该会自动导致一个挂起的断点被创建。

`set breakpoint pending off` 这表示不创建挂起的断点。任何无法识别的断点位置都会导致错误。此设置不会影响之前创建的任何挂起断点。

`show breakpoint pending` 显示用于创建挂起断点的当前行为设置。

**来回答你的问题。即跳线**

`jump +1`当您的代码到达该共享库行（skip_me（））之前时使用。

**参考**

[http://wiki.documentfoundation.org/Development/How_to_debug](http://wiki.documentfoundation.org/Development/How_to_debug)

[gdb：如何使用 --command 标志在未来的共享库上设置断点](https://stackoverflow.com/questions/100444/gdb-how-to-set-breakpoints-on-future-shared-libraries-with-a-command-flag)

[http://bhushanverma.blogspot.in/2009/08/how-to-debug-shared-library-using-gdb.html](http://bhushanverma.blogspot.in/2009/08/how-to-debug-shared-library-using-gdb.html)

[http://www.toptip.ca/2010/06/gdb-skip-instructions-or-lines-while.html](http://www.toptip.ca/2010/06/gdb-skip-instructions-or-lines-while.html)

[我可以使用 gdb 跳过一行吗？](https://stackoverflow.com/questions/4037308/can-i-use-gdb-to-skip-a-line)

# c# - 理解 SOLID 设计的单一职责原则

> ID：13246977
> 
> 赞同：3
> 
> 时间：2012-11-06T08:16:36.127
> 
> 标签：c#, oop, single-responsibility-principle

我目前正在尝试学习 SOLID 设计原则以及行为驱动开发，但我很难理解单一责任原则。我试图为使用测试驱动开发的 c# 找到一个很好的教程，但在这方面找不到任何有价值的东西。无论如何，在花了几天时间阅读之后，我决定最好的学习方式是通过经验，所以我开始尽我所能使用这些原则创建一个小应用程序。

这是一个简单的保龄球得分计算器。我认为最好的方法是从最简单的部分开始，所以我从球（或投掷）层面开始。现在我已经创建了测试以及处理球（投掷）分数的接口和类，以确保它们不是无效的，即。`<10`或`>0`。在实现这个之后，我意识到球类基本上只是一个可以为空的整数，所以也许我什至不需要它......但现在它就在那里。

继球之后，我决定添加的下一个合乎逻辑的东西是框架接口和类。这就是我卡住的地方。这是我所在的位置：

```
namespace BowlingCalc.Frames
{
    public interface IFrame : BowlingCalc.Generic.ICheckValid
    {
        void AddThrow(int? score);
        int? GetThrow(int throw_number);
    }
}

namespace BowlingCalc.Frames
{
    public class Frame : IFrame
    {
        private List<Balls.IBall> balls;
        private Balls.IBall ball;
        private int frame_number;

        public Frame(Balls.IBall ball, int frame_number)
        {
            this.ball = ball;
            this.frame_number = frame_number;
            balls = new List<Balls.IBall>();
            check_valid();
        }

        public void AddThrow(int? score)
        {
            var current_ball = ball;
            current_ball.Score = score;
            balls.Add(current_ball);
        }

        public int? GetThrow(int throw_number)
        {
            return balls[throw_number].Score;
        }

        public void check_valid()
        {
            if (frame_number < 0 || frame_number > 10)
            {
                throw (new Exception("InvalidFrameNumberException"));
            }
        }

    }
} 
```

框架使用我之前实现的球类通过依赖注入将球得分添加到框架中。它还实现了一种方法来返回帧中任何给定球的得分。

我想要做的，以及我被困的地方，是我想添加一种方法来确保帧分数是有效的。（目前只是第 1-9 帧的简单情况，其中两个球的总分必须为 10 或更少。稍后我将继续讨论更复杂的第 10 帧情况。）

问题是我不知道如何以可靠的方式实现这一点。我正在考虑将逻辑添加到类中，但这似乎违背了单一责任原则。然后我想将它添加为一个单独的接口/类，然后在其分数更新时在每一帧上调用该类。我还想过创建一个单独的接口`IValidator`或类似的东西，并在 Frame 类中实现它。不幸的是，我不知道其中哪一种（如果有的话）是最好的/可靠的做事方式。

那么，什么是一个好的、可靠的方法来实现一个验证帧分数的方法呢？

* * *

注意：非常欢迎对我的代码提出任何批评。我很高兴学习创建更好的代码，并且很高兴收到任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T01:53:15.183

当我想到 SRP 时，我倾向于将重点放在责任方面。反过来，类的名称应该理想地描述其职责。对于某些类，这与该类应该是什么有关（如果 Frame 缺少行为并且仅表示状态，则 Frame 可能是一个很好的示例），但是当您有行为责任时，名称是关于该类应该是什么去做'。

计算分数本身是一个相当小的责任，所以让我们考虑一些稍微大一点、更自然可分解的东西。这是保龄球游戏的一种可能的故障，它具有简单的责任和适当的偏执封装（我们都是这里的朋友，但没有人希望任何人误作弊。）

```
//My job is to keep score; I don't interpret the scores
public interface IScoreKeeper : IScoreReporter
{
    void SetScore(int bowlerIndex, int frameIndex, int throwIndex, int score);
}

//My job is to report scores to those who want to know the score, but shouldn't be allowed to change it
public interface IScoreReporter
{
    int? GetScore(int bowlerIndex, int frameIndex, int throwIndex);        
}

//My job is to play the game when told that it's my turn
public interface IBowler
{
    //I'm given access to the ScoreReporter at some point, so I can use that to strategize
    //(more realisically, to either gloat or despair as applicable)

    //Throw one ball in the lane, however I choose to do so
    void Bowl(IBowlingLane lane);
}

//My job is to keep track of the pins and provide score feedback when they are knocked down
//I can be reset to allow bowling to continue
public interface IBowlingLane
{
    int? GetLastScore();

    void ResetLane();
}

//My job is to coordinate a game of bowling with multiple players
//I tell the Bowlers to Bowl, retrieve scores from the BowlingLane and keep
//the scores with the ScoreKeeper.
public interface IBowlingGameCoordinator
{
    //In reality, I would probably have other service dependencies, like a way to send feedback to a monitor
    //Basically anything that gets too complicated and can be encapsulated, I offload to some other service to deal with it
    //I'm lazy, so all I want to do is tell everybody else what to do.

    void PlayGame(IScoreKeeper gameScore, IEnumerable<IBowler> bowlers, IBowlingLane lane);
} 
```

请注意，如果您想使用此模型来简单地计算分数（不玩真正的游戏），您可以有一个存根 Bowler（什么都不做）和一个 MockBowlingLane，它产生一系列分数值。BowlingGameCoordinator 负责处理当前的投球手、帧数和投球，因此得分会累积。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T09:27:30.533

接口的目的是`ICheckValid`什么？你`check_valid`在别处打电话吗？在我看来，既然`frame_number`似乎实际上是 a 的只读属性`Frame`，为什么在没有任何额外接口的情况下在构造函数中验证它的一致性是错误的呢？（构造函数应该产生*一致*的对象，因此可以随意验证传入的参数。）

但是，与其问如何正确验证该字段，不如问为什么确实需要?`frame_number`中的属性。`Frame`看起来这是该项目在某个数组中的索引 - 您可以只使用索引，为什么将其存储在`Frame`? 您可能希望稍后编写一些 if/else 逻辑，例如：

```
if (frame_number == 10) {
     // some rules
} else {
     // other rules
} 
```

但是，这不太可能是一种可靠的方法，因为您最终可能会在`Frame`. 相反，您可以创建一个基类`FrameBase`，在其中定义大部分逻辑以及一些要在`OrdinaryFrame`和中实现的抽象方法`TenthFrame`，您可以在其中定义不同的规则。这将使您`frame_number`完全避免 - 您只需创建 9`OrdinaryFrames`和 1 `TenthFrame`。

至于批评：您的代码似乎抽象了球和框架，但由于某种原因忽略了“投掷”或“滚动”。考虑需要添加每个滚动的轨迹信息，您需要更改`IFrame`界面，添加类似`void SetThrowTrajectory(int throwNumber, IThrowTrajectory trajectory)`. 但是，如果您在 eg 中抽象丢弃`IBallRoll`，那么与轨迹相关的功能将很容易适合那里（以及一些布尔计算属性，例如`IsStrike`, `IsSpare`）。

# sql-server - TSQL 查询对每个范围的时间段求和

> ID：13246987
> 
> 赞同：0
> 
> 时间：2012-11-06T08:17:06.173
> 
> 标签：sql-server, tsql, time

我需要创建一个查询来从一个范围相交中总结白天的小时数和夜晚的小时数。例如这个范围：

```
8AM-8PM -> day
8PM-8AM -> night 
```

以及一个或多个起止时间段：

```
7.30AM 10.00PM 
```

我想得到这个值：

```
12 day's hours
2.5 night's hours 
```

我不知道这是完成此功能的最糟糕的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:45:23.100

很抱歉添加另一个答案。但我意识到你似乎只处理时间，我的其他解决方案需要几天时间。这是一个只处理时间的解决方案：

```
declare @t table(timefrom time(0), timeto time(0))
insert @t values('10:30', '21:30')
insert @t values('07:00', '20:20')
insert @t values('19:00', '21:00')
insert @t values('00:00', '23:59')
insert @t values('00:00', '00:00')

select timefrom, timeto, 
cast(dayminutes/60.0 as decimal(5,2)) [day hours]
,cast((datediff(minute, timefrom, timeto) - a.dayminutes)/60.0 as decimal(5,2)) [night hours]
from @t
cross apply
(select datediff(minute, case when timefrom > '08:00' then timefrom else '08:00' end
,case when timeto < '20:00' then case when 
timeto < '08:00' then '08:00' else timeto end else '20:00' end ) dayminutes) a 
```

结果：

```
timefrom    timeto    day hours  night hours
10:30:00    21:30:00  9.50       1.50
07:00:00    20:20:00  12.00      1.33
19:00:00    21:00:00  1.00       1.00
00:00:00    23:59:00  12.00      11.98
00:00:00    00:00:00  0.00       0.00 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:25:17.100

正如我在评论中所写，这是一个脑筋急转弯。我希望你能把它和你的代码结合起来。

```
declare @t table(datefrom smalldatetime, dateto smalldatetime)
insert @t values('2012-01-01 10:30', '2012-01-02 09:00')
insert @t values('2012-01-01 08:00', '2012-01-02 20:20')
insert @t values('2012-01-01 19:00', '2012-01-02 13:00')
insert @t values('2012-01-01 20:00', '2012-01-02 00:00')
insert @t values('2012-01-01 23:00', '2012-01-03 00:00')

select datefrom, dateto, day, cast(datediff(minute, datefrom, dateto)/60.0 - day as decimal(9,2)) night
from @t t
cross apply
(select dateadd(day, datediff(hour, '1900-01-01 20:00', datefrom)/24, '1900-01-02 08:00') a,
dateadd(day, datediff(hour, '1901-01-01 09:00', dateto)/24, '1901-01-01 20:00' ) b) c
cross apply 
(select cast(((datediff(hour, a, b) - 12 * datediff(day, a,b)) * 60
+case when a < datefrom then -datediff(minute, a, datefrom) else 0 end
+case when b > dateto then +datediff(minute, b, dateto) else 0 end) / 60.0 as decimal(9,2)) day) e 
```

结果：

```
datefrom          dateto               day    night
2012-01-01 10:30  2012-01-02 09:00:00  10.50  12.00
2012-01-01 08:00  2012-01-02 20:20:00  24.00  12.33
2012-01-01 19:00  2012-01-02 13:00:00   6.00  12.00
2012-01-01 20:00  2012-01-02 00:00:00   0.00   4.00
2012-01-01 23:00  2012-01-03 00:00:00  12.00  13.00 
```

# c# - 客户端 nit 中的列表框更改出现在服务器端，而 asp 向导不起作用

> ID：13246992
> 
> 赞同：1
> 
> 时间：2012-11-06T08:17:17.680
> 
> 标签：c#, javascript, jquery, asp.net

我有两个列表框控件 withen 一个 asp 向导，它是代码：

```
<asp:Wizard DisplaySideBar="False" ID="Wizard1" runat="server" ActiveStepIndex="1" BackColor="#F7F6F3" BorderColor="#CCCCCC" 
                                    BorderStyle="Solid" BorderWidth="1px" Font-Names="Verdana" 
                                    Font-Size="0.8em" OnFinishButtonClick="OnFinishButtonClick"
                                    OnNextButtonClick="savePassword"  >

<HeaderStyle BackColor="#5D7B9D" BorderStyle="Solid" Font-Bold="True" 
    Font-Size="0.9em" ForeColor="White" HorizontalAlign="Left" />
<NavigationButtonStyle BackColor="#FFFBFF" BorderColor="#CCCCCC" 
    BorderStyle="Solid" BorderWidth="1px" Font-Names="Verdana" Font-Size="0.8em" 
    ForeColor="#284775" />
<SideBarButtonStyle BorderWidth="0px" Font-Names="Verdana" ForeColor="White" />
<SideBarStyle BackColor="#7C6F57" BorderWidth="0px" Font-Size="0.9em" 
    VerticalAlign="Top" />

<StepNavigationTemplate>
    <asp:Button ID="StepPreviousButton" runat="server" CausesValidation="False" 
        CommandName="MovePrevious" Text="Previous" Width="70px" BackColor="#FFFBFF" BorderColor="#CCCCCC"
        BorderStyle="Solid" Font-Names="Verdana"  ForeColor="#284775" BorderWidth="1px" Font-Size="0.8em"/>
    <asp:Button ID="StepNextButton" runat="server" CommandName="MoveNext" 
        Text="Next" Width="70px" BackColor="#FFFBFF" BorderColor="#CCCCCC"
        BorderStyle="Solid" Font-Names="Verdana"  ForeColor="#284775" BorderWidth="1px" Font-Size="0.8em"  />
</StepNavigationTemplate>    
<StepStyle BorderWidth="0px" ForeColor="#5D7B9D" /> 
<WizardSteps>
    <asp:WizardStep ID="WizardStep1" runat="server" Title="User Data"  
        StepType="Start">
        <%-- some code --%>
    </asp:WizardStep>
    <asp:WizardStep ID="WizardStep2" runat="server" Title="Company Data" 
        StepType="Step">
        **<table>

            <tr>
                <td class="style4">
                    <font face="tahoma" style="font-weight: bold; font-size: 10px;">Categories<div 
                        class="important">
                        *</div>
                    </font>
                </td>
                <td class="style9">
                <asp:ListBox ID="registerCompCats" runat="server" CssClass="ListBox1"
                ClientIDMode="Static" DataTextField="value" DataValueField="key"
                Rows="5" size="5" style="width:135px; size:5px;" SelectionMode="Multiple" ></asp:ListBox>
                    &nbsp;&nbsp;&nbsp;</td>
                <td class="style1">
                    <table>
                        <tr>
                            <td style="padding-left: 20px;">

                                <img id="addCat" 
                        src="images/buttons/btn_addCat.jpg" title="Add Category"  />
                            </td>
                        </tr>
                        <tr>
                            <td style="padding-left: 20px;">
                                <img id="removeCat" 
                        src="images/buttons/btn_removeCat.jpg" title="Remove Category" />
                            </td>
                        </tr>
                    </table>
                </td>
                <td>
                <asp:ListBox ID="registerCompAcats" runat="server" CssClass="ListBox2" 
                ClientIDMode="Static" DataTextField="value" DataValueField="key" ViewStateMode="Enabled"
                Rows="5" size="5" style="width:135px; size:5px; margin-top: 0px;" SelectionMode="Multiple"
                 ></asp:ListBox>
                    &nbsp;<asp:RequiredFieldValidator ID="registerCompAcatsValidator" runat="server" 
                        ControlToValidate="registerCompAcats" Display="None" ErrorMessage="categories required "></asp:RequiredFieldValidator></td>
            </tr>

        </table>**
    </asp:WizardStep>
    <asp:WizardStep ID="WizardStep3" runat="server" Title="Final Data" StepType="Finish">
         <%-- some code --%>
    </asp:WizardStep>
</WizardSteps> 
```

第一个列表框的数据带有页面加载，第二个列表框的数据通过使用java script cod按下中间的按钮完成，即代码：

```
$(function () {

//            for (var i = 0; i < x.length; i++) {
//                $(x[i]).keyup(function (event) {
//                    if (event.keyCode == 13) {
//                        $(".SearchBarControlBtn").click();
//                    }
//                });

//            }
$('#addCat').click(function () {
    $(".ListBox1 > option:selected").appendTo(".ListBox2");        
    sortlist(".ListBox1 > option");
    sortlist(".ListBox2 > option");
    selectAll();

});

$('#removeCat').click(function () {
    $(".ListBox2 > option:selected").appendTo(".ListBox1");
    sortlist(".ListBox1 > option");
    sortlist(".ListBox2 > option");
    selectAll();

}); 
```

});

该代码在两个列表框之间移动的页面和数据中运行良好，但是当我转到代码后面的页面以保存第二个列表框的内容时，我发现它是空的

哪里有问题 ？？

注意：使用相同的代码（HTML、javascript）但删除步骤向导第二个列表框中的数据显示良好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:53:19.233

是的，它们将是空的，因为它们不在视图状态中。您可以使用回发执行一些 ajax 以在列表中添加列表项。然后它们将出现在您的列表框中。你可以在这里阅读更多信息：http: [//msdn.microsoft.com/en-us/library/ms972976.aspx](http://msdn.microsoft.com/en-us/library/ms972976.aspx)

# android - 依赖库的项目中缺少 R 文件

> ID：13246997
> 
> 赞同：0
> 
> 时间：2012-11-06T08:17:47.263
> 
> 标签：android, library-project

我正在尝试在我的android应用程序中使用jfeinstein10 / SlidingMenu [http://goo.gl/PEZ9M](http://goo.gl/PEZ9M)。首先我添加了Sliding Menu的库项目，然后我也添加了ActionBarSherlock。Sliding Menu库依赖于ActionBarSherlock。

我的应用程序也依赖于 SlidingMenu 应用程序。

我的问题是，当我将一个库项目作为依赖项添加到我的主项目时，主项目的 R 文件消失了，我在主项目中的所有 R 引用都无法解析。

有谁知道将库项目添加为依赖项后 R 文件消失问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T07:22:06.600

使用 Project Properties 并单击 Android 部分，将 Project Build Target 更改为 Android 4.0.3 (API 15)。更改 API 级别后清理项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T01:23:32.743

好的，我只是在这个问题上苦苦挣扎了一段时间，现在我终于解决了，这是我采取的步骤。

*   首先，我将 Eclipse 的 android SDK 更新到了最新版本。
*   然后我通过**帮助->检查更新来更新eclipse本身**
*   接下来下载最新版本的 SlidingMenu 和 ActionBarSherlock 并将它们解压到一个文件夹中
*   然后在eclipse中导入ActionBarSherlock，方法是创建“从现有源中新建Android项目”并选择解压缩目录中的“库”文件夹
*   对 SlidingMenu 重复上述步骤
*   此时非常重要的是确保您在两个导入的库项目中没有任何错误

如果 ActionBarSherlock 中有错误，请右键单击项目转到“Android 工具”->“添加支持库”。如果没有，这应该可以解决您遇到的任何问题然后转到项目 --> 清理并清理项目

默认情况下，滑动菜单的目标是 2.2 或 2.1（抱歉不记得是哪一个了……真的太晚了，我的脑袋里有雾：z）

右键单击 SlidingMenu 项目并在打开的窗口中选择**属性，选择****Google APIs 4.0.3**的目标构建选择确定并执行 CTRL + SHIFT + O 并且您遇到的任何问题或警告都应该消失。

有了它，然后再次右键单击 SlidingMenu 项目并选择属性。在 Android 下的窗口中，一直向下滚动并添加对 ActionBarSherlock 库的引用。还要确保选中“是库”复选框。申请并确定。

接下来，您必须为您的项目做同样的事情。右键单击它-> Android 下的属性 一直向下滚动并将SlidingMenu 添加为库。**确保未**选中“是库”复选框。

此时我遇到了依赖错误。问题是在您的项目“libs：文件夹”中，您将有文件：“android-support-v13.jar”和“android-support-v4.jar”导致冲突。

我所做的是删除 v4 并将 v13.jar 文件复制粘贴到所有 3 个项目的 libs 文件夹中，即我的项目、SlidingMeny 和 ActionBarSherlock。

这解决了上述问题并且有效！

希望这可以帮助某人，这样他们就可以在晚上的正常时间入睡！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T02:39:12.117

我刚刚遇到了这个问题，我不需要更改我的构建目标。我必须做的是确保我的应用程序和任何实现支持库的库都使用相同的支持库版本。最简单的方法是：

**右键单击有问题的每个项目和库，然后选择 Android 工具 -> 添加支持库... ***

# buffer - iOS - RemoteIO AudioUnits，可能有 2 个？

> ID：13246999
> 
> 赞同：3
> 
> 时间：2012-11-06T08:17:55.893
> 
> 标签：buffer, core-audio, audiounit, remoteio

我正在尝试这样做

**RemoteIO1（用于录制到缓冲区）-> kAudioUnitType_Mixer -> RemoteIO2（用于播放输出）**

**RemoteIO1**用于 2 个目的：

1) 将音频馈入混音器通道 0

2）将音频从麦克风录制到缓冲区

**kAudioUnitType_Mixer**

1) 从 RemoteIO 获取音频 - 输入 0

2) 将 (1) 中的音频与缓冲区中的音频混合 - input1

**远程IO2**

1）获取混合音频并将其发送到播放

最初我以为我可以只从混音器输出播放，但下面给了我一个错误。我可以确认我需要另一个 RemoteIO 来进行播放吗？

```
// Enable Mixer for playback
status = AudioUnitSetProperty(_mixerUnit,
                              kAudioOutputUnitProperty_EnableIO,
                              kAudioUnitScope_Output,
                              mixerOutputBus,
                              &flag,
                              sizeof(flag));

if (noErr != status) { NSLog(@"Enable Mixer for playback error"); return; } 
```

另外，我做了以下测试，发现似乎只有一个 RemoteIO 可用（inputComponent 和 inputComponent2 的地址相同）

```
// Get component
AudioComponent inputComponent = AudioComponentFindNext(NULL, &desc);
AudioComponent inputComponent2 = AudioComponentFindNext(NULL, &desc); 
```

我的应用程序中只能有一个 RemoteIO 实例是真的吗？如果是这样，第二个 RemoteIO 的替代方案是什么？

谢谢。

码头。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T07:22:04.007

我了解到，iOS 无法使用 2 个 remoteIO。（如果我错了，请纠正我）。RemoteIO 就像墙上的一个插座——一个插头说“输入”，另一个说“输出”。“输入”未连接到“输出”。因此，我能够将混音器的输出连接到 remoteIO 的输出。同时，我从 RemoteIO 输入中捕获了麦克风音频。