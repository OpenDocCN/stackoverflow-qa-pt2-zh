# StackOverflow 问答 12629000-12629999

# css - CSS 左上角和右下角缩放以适应，但不是在 Firefox 中？

> ID：12629002
> 
> 赞同：0
> 
> 时间：2012-09-27T19:49:10.797
> 
> 标签：css

我有一个文本框，我想缩放以适应 div。这在 chrome 中很容易做到：

HTML：

```
<div id="div">
<textarea id="textarea"></textarea>
</div> 
```

CSS：

```
#div {
    position:absolute;
    bottom:0;
    left:0;
    right:0;
    height:4em;
}
#textarea {
    position:absolute;
    top:.2em;
    bottom:.2em;
    left:.2em;
    right:.2em;
    width:auto;
} 
```

这在 chrome 中效果很好。另一方面，Firefox 似乎不喜欢同时拥有`left:`and`right:`或同时拥有`top:`and `bottom:`。它似乎比其他两个更喜欢`top:`和`left:`，并且不会像 chrome 那样缩放 textarea 以适应。有没有办法在 Firefox 中实现这一点，还是我必须等待 mozilla 自己实现？

编辑：jsfiddle，根据要求：http: [//jsfiddle.net/Monchoman45/kKxus/](http://jsfiddle.net/Monchoman45/kKxus/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:02:59.930

试试这个 -[**演示**](http://jsfiddle.net/T29DW/1/)

```
#div {
    background: beige;
    position:absolute;
    bottom:0;
    left:0;
    right:0;
    height:4em;
    padding: .2em;
}

#textarea {
    -webkit-box-sizing: border-box;
       -moz-box-sizing: border-box;
            box-sizing: border-box;
    width: 100%;
    height: 100%;
} 
```

# javascript - 减少 HTTP 请求

> ID：12629007
> 
> 赞同：1
> 
> 时间：2012-09-27T19:49:30.877
> 
> 标签：javascript, jquery, ajax, httpwebrequest

我正在使用此代码动态加载外部页面

```
$(function() {
   $('#nav a').click(function() {
    var page = $(this).attr('href');
    $('#content').load(page + '.php');
    return false;
    });
}); 
```

我注意到，每次单击其中一个菜单选项卡时，都会发送一个新的 HTTP 请求并再次加载该页面。我想知道如何让每个页面加载一次，所以当我浏览标签时，已经加载的页面显示而不发送新的请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T19:52:16.443

[您可以使用.data()](http://api.jquery.com/data/) “标记”已经加载了标记的选项卡，并且仅在标记不存在时发出 HTTP 请求。

**编辑**：关于氪石的评论，这将是解决问题的一种简单方法：

```
var pages = {};

$(function() {
  $('#nav a').click(function() {
    var page = $(this).attr('href');

    if (!(page in pages)) {
      $.get(page, function (data) {
        pages[page] = data;
      });
    }

    $('#content').html(pages[page]);

    return false;
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:00:37.280

```
$('#nav a').click(function(e) {
    e.preventDefault();
    $this = $(this);
    if ($this.data('loaded') !== true) {
        // Load it.
        $this.data('loaded', true);
    } else {
        alert('Already loaded that one!');
    }
}); 
```

这将满足您的需求。您需要将加载代码放在我有`// Load it.`评论的地方，并且可能还想删除该`else`块。 [http://jsfiddle.net/rRumK/](http://jsfiddle.net/rRumK/)

# jquery - 带间隔和播放/暂停功能的小 div 推子

> ID：12629011
> 
> 赞同：0
> 
> 时间：2012-09-27T19:49:43.653
> 
> 标签：jquery, fadein, setinterval, fadeout, css-selectors

我正在玩一个小推子。它适用于单个子元素，但元素中的元素不是：http: [//jsfiddle.net/cz9a2/](http://jsfiddle.net/cz9a2/)

应该：

```
<div class="fadein">
<div class="fadd"><img src="http://farm3.static.flickr.com/2610/4148988872_990b6da667.jpg"></div>
<div class="fadd"><img src="http://farm3.static.flickr.com/2597/4121218611_040cd7b3f2.jpg"></div>
<div class="fadd"><img src="http://farm3.static.flickr.com/2531/4121218751_ac8bf49d5d.jpg"></div>
</div> 
```

结果：（用萤火虫检查）

```
<div class="fadein">
<div class="fadd" style="display: block;"></div>
<div class="fadd" style="display: none;"></div>
<div class="fadd" style="opacity: 0.00000555164;"></div>
<img src="http://farm3.static.flickr.com/2610/4148988872_990b6da667.jpg" style="opacity: 0.00000555164;">
<img src="http://farm3.static.flickr.com/2597/4121218611_040cd7b3f2.jpg" style="opacity: 0.000298526;">
<img src="http://farm3.static.flickr.com/2531/4121218751_ac8bf49d5d.jpg" style="opacity: 0.000298526;">
</div> 
```

看来， :first-child 不是在另一个 div （ fadd ）之后淡化一个 div （ fadd ）的正确方法......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:22:13.587

我对函数进行了一些修改，以使所有代码都在间隔内执行，因此它淡入淡出正确的项目。

看看这个小提琴：http: [//jsfiddle.net/johnkoer/cz9a2/48/](http://jsfiddle.net/johnkoer/cz9a2/48/)

```
 var pauseplay;

function startFader() {

    //Fade out the first visible item
    $x = $(".fadd:visible").fadeOut(1000);

    // Get the next sibling
    $next = $x.next();

    // if the next is not an element, go back to the first one
    if ($next.length == 0) $next = $(".fadd:first-child");

    // Fade the next one in
    $next.fadeIn(1000);
}

function stopFader() {
    window.clearInterval(pauseplay);
    console.log("stop");
}

$('.fadein .fadd:gt(0)').hide();

pauseplay = window.setInterval(startFader, 2000);

var $button = $('#toggler');
$button.toggle(function() {
    stopFader();
    $(this).toggleClass('playin pausin');
}, function() {

    $(this).toggleClass('pausin playin');

    pauseplay = window.setInterval(startFader, 2000);

});​ 
```

# php - 使用 CI 电子邮件类向 mail() 添加附加参数

> ID：12629019
> 
> 赞同：1
> 
> 时间：2012-09-27T19:50:36.513
> 
> 标签：php, codeigniter

我正在尝试找到一种使用 Codeigniters 电子邮件类（使用 mail() 发送方法）向电子邮件添加附加参数的方法。我找不到任何文档或其他信息。你们知道框架内是否有办法吗？

PHP本机邮件（）：

```
mail ( string $to , string $subject , string $message [, string $additional_headers 
       [, string $additional_parameters ]] ); 
```

代码点火器：

```
$this->load->library('email');
$this->email->from('your@example.com', 'Your Name');
$this->email->to('someone@example.com');
$this->email->subject('Email Test');
$this->email->message('Testing the email class.');
$this->email->additional_parameters('something_goes_here'); // this is what I need
$this->email->send(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:22:57.927

## [CodeIgniter 的电子邮件库](http://codeigniter.com/user_guide/libraries/email.html)只是 PHP 的[mail()](http://php.net/manual/en/function.mail.php)的包装器。

如果你深入内核并检查`system/libraries/Email.php`，`_send_with_mail()`是启动 PHP 原生的函数`mail()`。

安全模式下的当前实现使用：

```
mail($this->_recipients, $this->_subject, $this->_finalbody, $this->_header_str) 
```

当前没有安全模式的实现使用：

```
mail($this->_recipients, $this->_subject, $this->_finalbody, $this->_header_str, "-f ".$this->clean_email($this->_headers['From']) 
```

两者都不允许*用户定义的内容*填充`$additional_parameters`变量。您需要扩展`CI_Email`该类来完成此操作：

在`application/libraries/`创建一个`MY_Email.php`包含内容的文件：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
class MY_Email extends CI_Email{
    public $additional_params = "";
    function __construct(){
        parent::__construct();
    }

    function additional_params($ap){
        $this->additional_params = $ap;
    }

    protected function _send_with_mail(){
        if ($this->_safe_mode == TRUE){
            if ( ! mail($this->_recipients, $this->_subject, $this->_finalbody, $this->_header_str, $this->additional_params)) return FALSE;
            else return TRUE;
        }
        else{
                if ( ! mail($this->_recipients, $this->_subject, $this->_finalbody, $this->_header_str, "-f ".$this->clean_email($this->_headers['From']) . " " . $this->additional_params)) return FALSE;
                else return TRUE;
        }
    }    

} 
```

## 现在，要使用它：

`$this->email->additional_params('something_goes_here');`

当您调用 时`$this->email->send()`，此函数将接管并附加参数！

没有测试过这些。但这是一般的想法。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:29:37.093

随意使用 php mail() 函数。框架并不意味着您必须使用框架中的每个功能。

# vim - Sort lines by "labels" and append the output after the lines

> ID：12629021
> 
> 赞同：1
> 
> 时间：2012-09-27T19:50:38.020
> 
> 标签：vim

I have just posted a question about ["How to search a Dictionary with the contents of a list"](https://stackoverflow.com/questions/12620603/how-to-search-a-dictionary-with-the-contents-of-a-list), and received answers by El Isra, romainl and Zyx which solved the question.

But it occurred to me (in a todo list point of view) that it might be interesting to display the results in a specific way, ie, views by categories (or "labels") created.

The resulting lines were :

```
Call Tom about the Foo project @Tom &Foo
Complete the summary of the Bar project and send it to Thomas &Bar @Tom
Have Susan send me and Tom her forecasts for the Foo project @Susan @Tom &Foo 
```

Is it possible in Vim to display those results after the lines by category (or "label") this way (separated by blank line) :

```
Call Tom about the Foo project @Tom &Foo
Complete the summary of the Bar project and send it to Thomas &Bar @Tom
Have Susan send me and Tom her forecasts for the Foo project @Susan @Tom &Foo

@Tom
Call Tom about the Foo project &Foo
Complete the summary of the Bar project and send it to Thomas &Bar
Have Susan send me and Tom her forecasts for the Foo project @Susan &Foo

@Susan
Have Susan send me and Tom her forecasts for the Foo project @Tom &Foo

&Foo
Call Tom about the Foo project @Tom
Have Susan send me and Tom her forecasts for the Foo project @Susan @Tom

&Bar
Complete the summary of the Bar project and send it to Thomas @Tom 
```

In fact, I remembered this was the way ("views") [Lotus Agenda](http://en.wikipedia.org/wiki/Lotus_Agenda) proceeded, although in a much more sophisticated way...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:17:26.913

I don't think you'd actually want those grouped results inserted into the original todo file, but rather have a filtered, separate list. For that, the quickfix list is ideal.

I would write a function that iterates over a passed list of categories, and performs `:vimgrepadd` commands over your todo list, resulting in the following calls:

```
:vimgrep /@Tom/ %
:vimgrepadd /@Susan/ %
:vimgrepadd ... 
```

This gets you all occurrences grouped by category in the quickfix list, which you can open via `:copen`. Now, what's still missing is any segregation of the categories. You could use `setqflist()` to insert separator lines, but I would probably store the number of quickfix elements after each `:vimgrep` and then build a custom `'foldexpr'` that uses these line numbers to fold each category. It's a bit of implementation effort, but you've asked for something outside the usual realm of text editing.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:30:46.007

Even though it is possible to do this in Vim, I think tasks like these are better done in another programming language for the sake of **decoupling**: Vim scripts are only meant to be used to enhance some part of the editors functionality. That's for example why Vim doesn't have a built-in `sort` command (update: it actually does now in Vim 7): because this command does a task that is also useful in combination with other editors/commands.

If you create a set of Python/Perl scripts to do this text processing for you (which are arguably better text-processing languages than Vimscript), it would be easy to combine them with Vim, for example:

```
:%!python myscript.py 
```

Would send the entire contents of the current buffer to `myscript.py` and replace the buffer with the results. You could also take a look at `:help read!`.

# php - 根据复选框输入动态生成带有唯一 ID 的文本区域

> ID：12629023
> 
> 赞同：0
> 
> 时间：2012-09-27T19:50:40.623
> 
> 标签：php, javascript, jquery

我正在为我的公司开发一个程序来处理不同的产品类型并创建文件。

我有一个表单，最终会在几个月内增长到接近 150 个复选框选项。我正在尝试就最好的方法获得意见，从长远来看可以节省我的时间。

所以例如我有这个：

```
<input type="checkbox" value="NOT" name="size">NOT<br />
<input type="checkbox" value="THA" name="size">THA<br />
<input type="checkbox" value="TAB22" name="size">TAB22<br /> 
```

我需要的是，对于单击的每个复选框，我需要显示一个带有简单标题的文本区域，该标题等于它上方的复选框值，位于名为`<div id="inputArea">`From here 的 div 中，然后用户将在相应的文件名中粘贴文本区域。基本上每个文本区域都与一个复选框选项相关联。

我使用 PHP 来处理表单，所以当它被提交时，我需要将每个具有值的文本区域的值存储到单独的变量中。有没有办法动态地做到这一点？

我对 jquery、javascript、php 或任何东西持开放态度。

我只是好奇最好这样做。否则我的知识只能手动创建 150 个复选框，然后创建 150 个文本区域，然后创建 150 个 jQuery 隐藏/显示方法，然后创建 150 个 php 检查以确定哪些文本区域具有值并将它们分配给变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:39:50.740

你可以试试这个

**HTML**

```
<form action="some_action.php" method="post">
    <input type="checkbox" value="NOT" name="size">NOT<br />
    <input type="checkbox" value="THA" name="size">THA<br />
    <input type="checkbox" value="TAB22" name="size">TAB22<br />
    .... 
</form> 
```

**JS**

```
$('input:checkbox[name="size"]').on('click', function(){
    if($(this).is(':checked'))
    {
        $('<div class="inputArea"></div>') // inputArea is a class not an ID because ID should be anique
        .append($('<textarea />', {id:'txtArea_'+$(this).val(), name:'txtArea_'+$(this).val()}))
        .insertAfter($(this).next('br'));
    }
    else
    {
        $(this).next('br').next('div.inputArea').remove();
    }
}); 
```

[**演示**](http://jsbin.com/uwakus/3/edit)。

每个`textarea`都有名称和 ID，前缀`txtArea_`为对应复选框的值，因此如果提交了一个复选框并且它的值是，`NOT`那么您可以检索相应文本区域的值`php`作为

```
$txtArea_NOT=$_POST['txtArea_NOT']; // When form's method is post 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:02:54.283

如果您使用的是 jQuery，您应该能够使用/修改以下内容作为基础。

```
$('input[type=checkbox]').click(function() {
  var value = $(this).val();
  $(this).append(value +'<br /><textarea name="'+ value +'"></textarea>');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T20:11:40.657

您可以尝试使用 Wrap 和 unwrap 方法来完成您的工作。

记住**ID**在页面中应该是唯一的。因此，我为 textarea div 分配了一个类，而不是 id。

```
$('input[type=checkbox]').on('click', function() {
    var isChecked = $(this).is(':checked');
    if (isChecked) {
        $(this).wrap('<div class="inputArea"></div>');
        $(this).closest('div').prepend('<textarea class="text-area" cols="10" rows="2"></textarea>');
    }
    else{
       $(this).closest('div').find('.text-area').remove();
        $(this).unwrap();
    }
});​ 
```

[在这里演示](http://jsfiddle.net/sushanth009/DnveY/)

所以基本上你将你的复选框包装在一个 div 中并分配它。当你取消选中它时，包装器被删除......这与其他复选框无关。所以它应该适用于任意数量的复选框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T20:26:40.313

## HTML

您应该为复选框设置唯一的 ID，这也是一种很好的做法。这也将显示/隐藏文本区域，以保留已输入的任何文本——这可能是好事也可能是坏事，这取决于您的要求。

```
<form name="frmSize" method="POST" action="somePage.php">
    <div><input id="cbNot" class="cbFileList" type="checkbox" value="NOT" name="not">NOT</div>
    <div><input id="cbTha" class="cbFileList" type="checkbox" value="THA" name="tha">THA</div>
    <div><input id="cbTab22" class="cbFileList" type="checkbox" value="TAB22" name="tab22">TAB22</div>
</form> 
```

## JavaScript

```
var cbList = document.getElementsByClassName( 'cbFileList' );
var i;

for ( i = 0; i < cbList.length; i++ ) {
    createTextArea( cbList[i] );
    cbList[i].addEventListener( 'click', function() {
        var cb = this;
        if ( cb.checked ) {
            showTextArea( cb );
        } else {
            hideTextArea( cb );
        }
    });
}

function showTextArea( cb ) {
    document.getElementById( 'div-' + cb.id).style.display = '';
}

function hideTextArea( cb ) {
    document.getElementById( 'div-' + cb.id).style.display = 'none';
}

function createTextArea( cb ) {
    var newDiv = document.createElement( 'div' );
    var newTextArea = document.createElement( 'textarea' );

    newDiv.setAttribute( 'id', 'div-' + cb.id );
    newDiv.innerHTML = '<b>' + cb.value + '</b><br/>'; // Create bold text using checkbox's value

    newTextArea.setAttribute( 'id', 'ta-' + cb.id );
    newTextArea.setAttribute( 'name', 'ta-' + cb.id );
    newTextArea.innerHTML = cb.value;

    newDiv.appendChild( newTextArea );
    cb.parentNode.appendChild( newDiv );
} 
```

## 输出

```
<div>
    <input id="cbNot" class="cbFileList" type="checkbox" value="NOT" name="not">NOT
    <div id="div-cbNot">
        <b>NOT</b><br/>
        <textarea id="ta-cbNot"></textarea>
    </div>
</div>
<div>
    <input id="cbTha" class="cbFileList" type="checkbox" value="THA" name="tha">THA
    <div id="div-cbTha">
        <b>THA</b><br/>
        <textarea id="ta-cbTha" name="ta-cbTha"></textarea>
    </div>
</div>
... 
```

## PHP

```
<?
    // run a for loop through $_POST[] and check for any field prefixed with 'ta-'
    foreach( $_POST as $key => $value ) {
        if ( strpos( $key, 'ta-' ) !== false && strlen( $value ) > 0 ) {
            // Found a textarea with content!
            // Do something with $_POST[$key], which contains the contents of textarea
        }
    }
?> 
```

# vb.net - Excel.Interop DisplayAlerts 为 false 并不能处理所有问题

> ID：12629025
> 
> 赞同：0
> 
> 时间：2012-09-27T19:50:58.097
> 
> 标签：vb.net, excel, excel-interop

好的，我以前试过在这里找到这个，但没有运气。我遇到的问题是，当两个程序尝试保存、关闭或以任何方式与单个 Excel 工作簿交互时，同时出现一个对话框。

对话框显示类似“[文件路径] 正在使用中，无法访问”之类的内容。

我将 DisplayAlerts 设置为 false，但它不会捕捉到这一点。

有没有其他人遇到过这个问题并有可行的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:57:34.210

该文件当前正在使用是由于操作系统抛出它而不是 Excel（本身）。

看看[这里](http://msdn.microsoft.com/en-us/library/office/bb177478%28v=office.12%29.aspx)的文档。

据我了解，Excel 可以控制在 Excel 正常工作期间出现的警报（例如关闭文件而不保存会引发一个对话框，使用 可以防止出现该对话框`DisplayAlerts`）。

# wcf - 运行 WCF REST 服务时在端点中出现错误

> ID：12629028
> 
> 赞同：1
> 
> 时间：2012-09-27T19:51:13.983
> 
> 标签：wcf, rest

我正在使用 WebHttpBinding 开发 REST 服务。在我的服务中一切都很完美，但在运行时它给出了`Error Endpoint not Found`.

web.config 文件是这样的：

```
 <configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
  </system.web>
  <system.serviceModel>
    <services>
      <service name="Service">
        <endpoint address="http://localhost:10492/Service.svc" binding="webHttpBinding" contract="IService" behaviorConfiguration="webby"/>
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior name="webby">
          <webHttp helpEnabled="true"/>
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true"/>

  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <!--
        To browse web app root directory during debugging, set the value below to true.
        Set to false before deployment to avoid disclosing web app folder information.
      -->
    <directoryBrowse enabled="true"/>
  </system.webServer>
</configuration> 
```

在地址我也试过这样：

```
<endpoint address="" binding="webHttpBinding" contract="IService" behaviorConfiguration="webby"/> 
```

但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:56:19.643

这是一个让您入门的好链接：[http ://weblogs.asp.net/kiyoshi/archive/2008/10/08/wcf-using-webhttpbinding-for-rest-services.aspx](http://weblogs.asp.net/kiyoshi/archive/2008/10/08/wcf-using-webhttpbinding-for-rest-services.aspx)

您尝试在哪个地址连接到您的 Web 服务？（您是否尝试在 Web 浏览器中导航到该地址，以及您输入的 URL 是什么？）

[编辑]

由于您托管在 Web 应用程序中，IIS（或您使用的任何 Web 服务器）将期望您的服务存在服务描述符文件。您不能只在 web.config 中创建一个 URI，并将其托管在 IIS 中，而文件系统上没有关联的“服务”文件（这是您的 Service1.svc 文件）。

**这是在 Internet 信息服务中托管 WCF 服务所特有的细微差别 - 如果您正在阅读专为自托管方案设计的教程，则很容易忘记这一步。**

确保您的网站中有一个名为“Service1.svc”的文件，它应该包含如下内容：

```
<%@ServiceHost Language="C#" Service="MyNamespace.Service1" Factory="System.ServiceModel.Activation.WebServiceHostFactory" %> 
```

这是在 IIS 中托管 REST 服务的教程：http: [//saravananarumugam.wordpress.com/2011/03/04/simple-rest-implementation-with-webhttpbinding/](http://saravananarumugam.wordpress.com/2011/03/04/simple-rest-implementation-with-webhttpbinding/)

另一个让我担心的问题是，您定义的端点地址（“http://localhost:10492/Service.svc”）不符合 REST 约定。我不希望这会是你的问题，但这是一个问题。

# c - 磁盘数据结构的架构

> ID：12629029
> 
> 赞同：5
> 
> 时间：2012-09-27T19:51:14.743
> 
> 标签：c, database, filesystems, disk, b-tree

最接近我最终了解磁盘 btree 架构的是[this](http://www.bitcore.org/stuff/school/programming%20courses/csc345/btree.c)。

它很简单，很容易阅读和理解。但我仍然感到困惑。似乎根本没有任何内存数据结构。我错过了什么吗？是什么使它成为 btree？仅仅是“指向”其子节点键的 long 数组吗？那效率高吗？这就是大多数数据库和文件系统的设计方式吗？

有没有办法在内存中的磁盘 btree（或其他数据结构）上实现？每个节点在哪里包含一个文件偏移量或什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T14:02:20.770

节点指针通常作为地址存储在磁盘上（例如使用长整数）。

通常，实现选择使用物理地址或逻辑地址：

*   物理地址指定存储节点的实际偏移量（在文件或类似文件中）。
*   相反，逻辑地址需要某种机制，每次导航/遍历指针时解析为物理地址。

物理寻址更快（因为不需要解析机制）。但是，逻辑寻址可以允许重新组织节点而无需重写指针。能够以这种方式重新组织节点的能力可以作为实现良好聚类、空间利用率甚至低级数据分布的基础。

一些实现使用逻辑和物理寻址的组合，使得每个地址都由一个（动态地）指向段（blob）的逻辑地址和该段内的物理地址组成。

重要的是要注意节点地址是基于磁盘的，因此它们不能直接转换为内存中的指针。

在某些情况下，当数据加载到内存时将基于磁盘的指针转换为内存指针（然后在写入时转换回基于磁盘的指针）是有益的。

这种转换有时称为*指针混合*，可以通过多种方式实现。基本思想是，在指针被导航/遍历之前，不应将由*混杂*的内存指针寻址的数据加载到内存中。

常见的方法是使用逻辑内存寻址方案或使用内存映射文件。内存映射文件使用虚拟内存寻址，其中内存页面在访问之前不会加载到内存中。虚拟内存映射文件由操作系统提供。这种方法有时称为*缺页寻址*，因为访问尚未映射到内存的内存页面上的数据会导致缺*页*中断。

# ruby - 使用虚拟属性作为哈希

> ID：12629030
> 
> 赞同：0
> 
> 时间：2012-09-27T19:51:17.293
> 
> 标签：ruby, ruby-on-rails-3

我希望能够在作为哈希的非数据库模型上具有虚拟属性。我只是不知道从这个哈希中添加和删除项目的语法是什么：

如果我定义：

```
attr_accessor :foo, :bar 
```

然后在模型中的一个方法中，我可以使用：

```
self.foo = "x" 
```

但我不能说：

```
self.bar["item"] = "value" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:03:43.037

尝试

```
self.bar = Hash.new
self.bar["item"] = "value" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T20:28:33.403

```
class YourModel
  def bar
    @bar ||= Hash.new
  end

  def foo
    bar["item"] = "value"
  end
end 
```

但经典的方法是：

```
class YourModel
  def initialize
    @bar = Hash.new
  end

  def foo
    @bar["item"] = "value"
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T19:56:58.503

只需使用[OpenStruct](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/ostruct/rdoc/OpenStruct.html)、[Hash with Indifferent Access](http://as.rubyonrails.org/classes/HashWithIndifferentAccess.html)或[Active Model](http://railscasts.com/episodes/219-active-model)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T08:39:47.980

当你打电话时：

```
attr_accessor :foo, :bar 
```

在你的课堂上，Ruby 在幕后做了如下的事情：

```
def foo
  return @foo
end
def foo=(val)
  @foo = val
end

def bar
  return @bar
end
def bar=(val)
  @bar = val
end 
```

#foo 和 #bar 方法只是返回实例变量，而 #foo= 和 #bar= 只是设置它们。因此，如果您希望其中一个包含哈希，则必须在某处分配此哈希。

我最喜欢的解决方案如下：

```
class YourModel

  # generate the default accessor methods
  attr_accessor :foo, :bar

  # overwrite #bar so that it always returns a hash
  def bar
    @bar ||= {}
  end

end 
```

# c# - .NET 中的性能分析

> ID：12629032
> 
> 赞同：3
> 
> 时间：2012-09-27T19:51:26.183
> 
> 标签：c#, .net, performance, profiling, performance-testing

我写了一个`Stopwatch`用于分析方法和`for/foreach`循环的类。使用`for`and`foreach`循环它会针对 a `Parallel.For`or`Parallel.ForEach`实现测试标准循环。

你会像这样编写性能测试：

**方法：**

```
PerformanceResult result = Profiler.Execute(() => { FooBar(); }); 
```

**对于循环：**

```
SerialParallelPerformanceResult result = Profiler.For(0, 100, x => { FooBar(x); }); 
```

**ForEach 循环：**

```
SerialParallelPerformanceResult result = Profiler.ForEach(list, item => { FooBar(item); }); 
```

每当我运行测试（其中一个`.Execute`，`.For`或`.ForEach`）时，我都会将它们放在一个循环中，这样我就可以看到性能如何随时间变化。

性能示例可能是：

方法执行 1 = 200ms
方法执行 2 = 12ms
方法执行 3 = 0ms

执行时 1 = 300ms（串行）、100ms（并行）
执行时 2 = 20ms（串行）、75ms（并行）
执行时 3 = 2ms（串行）、50ms（并行）

ForEach 执行 1 = 350ms（串行），300ms（并行）
ForEach 执行 2 = 24ms（串行），89ms（并行）
ForEach 执行 3 = 1ms（串行），21ms（并行）

**我的问题是：**

1.  为什么性能会随着时间而变化，.NET 在后台做了什么来促进这一点？

2.  串行操作如何/为什么比并行操作更快？我已确保我使操作复杂化以正确查看差异......在大多数情况下，串行操作似乎更快！？

**注意：**对于并行处理，我正在 8 核机器上进行测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T09:36:59.757

在对性能分析进行了更多探索之后，我发现使用秒表并不是衡量特定任务性能的准确方法

*（感谢斧头和 Loren 对此的评论！）*

**秒表不准确的原因：**

1.  测量以经过的时间（以毫秒为单位）计算，而不是 CPU 时间。
2.  测量可能会受到背景“噪音”和线程密集型进程的影响。
3.  测量不考虑 JIT 编译和开销。

话虽如此，使用秒表可以随意探索性能。考虑到这一点，我在一定程度上改进了我的分析算法。

在它只是简单地执行传递给它的表达式之前，它现在可以对表达式进行多次迭代，从而建立平均执行时间。第一次运行可以省略，因为这是 JIT 发挥作用的地方，并且可能会出现一些主要开销。可以理解，这永远不会像使用像[Redgate 的 ANTS profiler](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)这样的专业分析工具那样复杂，但对于更简单的任务来说没问题！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-27T19:10:11.737

根据我上面的评论：*我自己做了一些简单的测试，随着时间的推移没有发现任何差异。你能分享你的代码吗？我会把我的答案放在一个答案中，因为它不适合这里。*

这是我的示例代码。（我也尝试了静态和实例方法，没有区别）

```
class Program
{
    static void Main(string[] args)
    {
        int to = 50000000;
        OtherStuff os = new OtherStuff();

        Console.WriteLine(Profile(() => os.CountTo(to)));
        Console.WriteLine(Profile(() => os.CountTo(to)));
        Console.WriteLine(Profile(() => os.CountTo(to)));
    }

    static long Profile(Action method)
    {
        Stopwatch st = Stopwatch.StartNew();
        method();
        st.Stop();
        return st.ElapsedMilliseconds;
    }
}

class OtherStuff
{
    public void CountTo(int to)
    {
        for (int i = 0; i < to; i++)
        {
            // some work...
            i++;
            i--;
        }
    }
} 
```

示例输出为：

```
331
331
334 
```

考虑改为执行此方法：

```
class OtherStuff
    {
        public string CountTo(Guid id)
        {
            using(SHA256 sha = SHA256.Create())
            {
                int x = default(int);
                for (int index = 0; index < 16; index++)
                {
                    x = id.ToByteArray()[index] >> 32 << 16;
                }
                RNGCryptoServiceProvider rng = new RNGCryptoServiceProvider();
                byte[] y = new byte[1024];
                rng.GetBytes(y);
                y = y.Concat(BitConverter.GetBytes(x)).ToArray();
                return BitConverter.ToString(sha.ComputeHash(BitConverter.GetBytes(x).Where(o => o >> 2 < 0).ToArray()));
            }
        }
    } 
```

样本输出：

```
11 
0 
0 
```

# python - Django：注释不起作用？

> ID：12629034
> 
> 赞同：0
> 
> 时间：2012-09-27T19:51:36.070
> 
> 标签：python, django, annotations

我有两个模型，Product，它与 RatingEntry 具有一对多的关系：

```
>>> product_entries = models.Products.objects.all()
>>> annotated = product_entries.annotate(Count("ratingentry"))
>>> len(annotated)
210
>>> a = annotated.filter(ratingentry__count__lte = 10)
>>> b = annotated.filter(ratingentry__count__gt = 10)
>>> len(a)
10
>>> len(b)
200
>>> len(a | b)
10 //should be 210 
```

如果我将 a 和 b 更改为列表并将它们连接起来，则长度为 210。

知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T23:26:16.527

我认为这种行为是 Django 的对象关系映射中的一个错误。如果您查看 Django 为您的查询生成的 SQL，您将看到如下内容：

```
>>> q1 = (Products.objects.annotate(num_ratings = Count('ratingentries'))
...       .filter(num_ratings__gt = 10))
>>> q2 = (Products.objects.annotate(num_ratings = Count('ratingentries'))
...       .exclude(num_ratings__gt = 10))
>>> print(str((q1 | q2).query))
SELECT `myapp_products`.`id`, COUNT(`myapp_ratingentries`.`id`) AS
`num_ratings` FROM `myapp_products` LEFT OUTER JOIN `myapp_ratingentries` ON
(`myapp_products`.`id` = `myapp_ratingentries`.`product_id`) GROUP BY
`myapp_products`.`id` HAVING COUNT(`myapp_ratingentries`.`id`) > 10
ORDER BY NULL 
```

请注意，条件 from`q1`包含在`HAVING`查询的子句中，但条件 from`q2`已丢失。

您可以通过像这样构建查询来解决该问题：

```
>>> q = Q(num_products__gt = 10) | ~Q(num_products__gt = 10)
>>> q3 = Products.objects.annotate(num_ratings = Count('ratingentries')).filter(q)
>>> print(str(q3.query))
SELECT `myapp_products`.`id`, COUNT(`myapp_ratingentries`.`id`) AS
`num_ratings` FROM `myapp_products` LEFT OUTER JOIN `myapp_ratingentries` ON
(`myapp_products`.`id` = `myapp_ratingentries`.`product_id`) GROUP BY
`myapp_products`.`id` HAVING (COUNT(`myapp_ratingentries`.`id`) > 10 OR NOT
(COUNT(`myapp_ratingentries`.`id`) > 10 )) ORDER BY NULL 
```

请注意，这两个条件现在都包含在该`HAVING`子句中。

我建议您[将此作为错误报告给 Django 开发人员](https://code.djangoproject.com/newticket)。（如果无法修复，那么至少应该记录在案。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-27T20:06:30.160

查询集不支持按位包含。Django 没有引发错误，而是将其视为逻辑 OR 并返回第一个计算`True`. 因为它们都是有效的查询集，所以总是返回第一个。

如果您想实际组合两个查询集，则需要将它们转换为列表，然后将一个与另一个扩展，或者使用 itertools.chain 之类的东西，但最终会得到一个不能用于任何事情的生成器但是迭代。无论哪种方式，组合查询集都将不允许对这些查询集进行任何进一步的操作。

# mysql - 为什么在MYSQL中使用GROUP BY时DISTINCT显示不同的结果

> ID：12629036
> 
> 赞同：1
> 
> 时间：2012-09-27T19:51:48.620
> 
> 标签：mysql, group-by, distinct

我有以下两个查询：

`SELECT id, sex FROM user WHERE sex=0 GROUP BY id LIMIT 10;`使用以下输出：

```
+----+-----+
| id | sex |
+----+-----+
|  3 |   0 |
|  6 |   0 |
| 30 |   0 |
| 36 |   0 |
| 38 |   0 |
| 40 |   0 |
| 43 |   0 |
| 46 |   0 |
| 48 |   0 |
| 54 |   0 |
+----+-----+
10 rows in set (0.04 sec) 
```

和

`SELECT DISTINCT id, sex FROM user WHERE sex=0 LIMIT 10;`

```
+------+-----+
| id   | sex |
+------+-----+
|  721 |   0 |
|  440 |   0 |
|  485 |   0 |
| 2388 |   0 |
| 1215 |   0 |
| 1218 |   0 |
| 6569 |   0 |
| 5123 |   0 |
| 5178 |   0 |
| 5177 |   0 |
+------+-----+
10 rows in set (0.03 sec) 
```

但它们显示出不同的结果。是什么让他们创造了不同的结果。我的印象是 LIMIT 是在一切完成后应用的。LIMIT 可能会影响这一点，或者在尝试查找唯一/不同值时 DISTINCT 和 GROUP BY 的行为是否不同。他们在输出结果之前订购它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:56:49.113

因为您的查询不是确定性的。如果您没有在查询中添加*order by*，mysql 会选择以最快方式访问的数据。如果你改变你的查询，mysql可以改变他的执行计划，所以其他行将被确定为最快的访问。

如果您想要一个确定性（每次它应该返回相同的）结果，请添加一个 order by，以正确的顺序对所有业务键（或主键）列进行排序

这将是确定性的：

```
SELECT DISTINCT id, sex 
FROM user 
WHERE sex=0 
order by id
LIMIT 10 
```

编辑：这是因为 GROUP BY 意味着'order by'，distinct不是，因为group by必须在临时表中“分组”，所以它可以聚合，同时distinct忽略重复值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T20:00:04.223

因为您没有使用 ORDER BY 子句。如果您使用 ORDER BY clausweree，它将对结果集进行排序，这在两种情况下都应返回相同的结果

# php - 我的 php 代码没有正确添加

> ID：12629039
> 
> 赞同：2
> 
> 时间：2012-09-27T19:51:57.573
> 
> 标签：php

我做了一个计数器，我正在使用 PHP，几乎一切都很好，但我发现了一个小错误。

我在柜台上的前两步进展顺利，即`$bid`和`$stax`。

我的最后一个结果`$pay`应该是：`8138 + 814 + 448 = 9400`但它给了我`$9,399`

**我的输出是：**

```
Value $8,138 bid $814 tax $448 You Pay $9,399
Value $8,952 bid $895 tax $492 You Pay $10,339
Value $9,847 bid $985 tax $542 You Pay $11,373 
```

这是我的php

```
<?php
$i = 0;
$v = 8138;  // value : 8138
do {
    $i++;
    $bid  = $v / 10;      // output : $814
    $ftax = $v + $bid;
    $stax = $ftax / 20;  // output : tax $448
    $pay  = $v + $bid + $stax;   // 8138 + 814 + 448 = 9400
    echo "Value $" . number_format($v) . " bid $" . number_format($bid) . " tax $" . number_format($stax) . " You Pay $" . number_format($pay) . "<br />";
    $v = $v * 1.1;
} while ($i <= 2);
?> 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T19:57:11.780

将您的回声线更改为不删除小数：

```
echo "Value $" . $v . " bid $" . $bid . " tax $" . $stax . " You Pay $" . $pay . "<br />"; 
```

> 价值 $8138 出价 $813.8 税 $447.59 您支付 $9399.39
> 价值 $8951.8 出价 $895.18 税 $492.349 您支付 $10339.329
> 价值 $9846.98 出价 $984.698 税 $541.5839 您支付 $11373.2619

所以 8138 + 813.8 + 447.59 = 9399.39，向下舍入为 9399。

另一方面，如果你立即四舍五入，813.8 向上取整为 814，447.59 向上取整为 448，但你甚至在开始之前就在计算中添加了 0.61，这显然会导致更高的数字（9400）。

这就是为什么数学和科学老师告诉你不要四舍五入直到最后，因为每次你这样做，你的答案就会变得不那么准确。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T19:57:47.983

如果您不想使用小数，请使用`round()`. 此外，与小数相乘。[在此处](http://codepad.org/XNStPbeV)查看实际操作

```
$i = 0;
$v = 8138;  // value : 8138
 do {
$i++;
$bid  = round($v / 10);      // output : $814
$ftax = $v + $bid;
$stax = round($ftax / 20);  // output : tax $448
$pay  = $v + $bid + $stax;   // 8138 + 814 + 448 = 9400
echo "Value $" . number_format($v) . " bid $" . number_format($bid) . " tax $" .      number_format($stax) . " You Pay $" . number_format($pay) . "<br />";
$v = round($v * 1.1); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T19:57:17.140

缺乏铸造/小数是你们的问题伙伴。哈哈哈

# tsql - 一次更新 HumanResources.Employee 表 'column SickLeave Hours' 10 行（允许批量大小可变）

> ID：12629040
> 
> 赞同：0
> 
> 时间：2012-09-27T19:51:58.580
> 
> 标签：tsql

更新 HumanResources.Employee 表 'column SickLeave Hours'

我需要执行以下逻辑：如果 Hours 大于或等于 35 设置为 40 如果小于 35 设置为 0。如何打破循环？

如何在 SQL Server 中实现这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:15:26.910

我不确定您的确切列名是什么，但也许您想要类似的内容：

```
DECLARE @BatchSize int
SET @BatchSize = 10
WHILE @@ROWCOUNT > 0
BEGIN
   UPDATE TOP (@BatchSize) HumanResource.Employee
     SET SickLeaveHours = CASE WHEN SickLeaveHours >= 35 THEN 40 ELSE 0 END
   WHERE SickLeaveHours NOT IN (40,0)
END 
```

# c - g++-4.6.real：错误：无法识别的选项“-R”

> ID：12629042
> 
> 赞同：2
> 
> 时间：2012-09-27T19:52:12.690
> 
> 标签：c, boost, build, autotools, libtool

我正在尝试使用此配置命令从源代码编译[phpcompiler 。](http://phpcompiler.org)

```
./configure  --prefix=/opt/phc-0.3.0.1/    --with-php=/opt/php-5.3.17/ 
```

配置错误是，

```
checking for exit in -lboost_regex-mt... no
checking for exit in -lboost_regex-mt... (cached) no
checking for exit in -lboost_regex... no
checking for exit in -lboost_regex... (cached) no
checking for exit in -lboost_regex... (cached) no
configure: error: Could not link against boost_regex 
```

那是完全错误的，因为我同时安装了 boost 和 boost_regex 软件包。库和头文件。然后我在`config.log`文件中挖了这个

```
configure:17053: g++ -o conftest -g -O2    -L/lib/php5 -L/usr/lib/php5 conftest.cpp /usr/lib/libCrun.so.1 -lphp5 -L/opt/php-5.3.17//lib -R/opt/php-5.3.17//lib -ldl  >&5
g++-4.6.real: error: /usr/lib/libCrun.so.1: No such file or directory
g++-4.6.real: error: unrecognized option '-R' 
```

所以，对于这个`unrecognized option '-R'`错误，很多`-lboost_regex`检查都失败了！

我怎样才能解决这个问题？有没有我可以编辑的文件来修复它？以及为什么`-R`使用？我认为这将是`-L`标志。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:47:44.163

由于[您的评论](https://stackoverflow.com/questions/12629042/g-4-6-real-error-unrecognized-option-r#comment17037881_12629042)表明此`-R`选项来自`configure`，因此 in 中的以下行[`m4/php-embed.m4`](http://code.google.com/p/phc/source/browse/trunk/m4/php-embed.m4?spec=svn3418&r=3358#26)似乎是最可能的来源：

```
LIBS="-lphp5 -L${PHP_INSTALL_PATH}/lib -R${PHP_INSTALL_PATH}/lib $LIBS" 
```

如果你看一下`configure`，所有其他出现的`-R`都会写成，`${wl}-R`最`${wl}`有可能扩展到的地方`-Wl,`。所以解决这个问题的一种方法是在上面的行中添加`${wl}`before`-R`并运行`autogen.sh`recreate `configure`。

在检查现有错误后，您可能希望为此提交[错误。](http://code.google.com/p/phc/issues/list)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-14T22:00:46.657

`-R`您可以在已删除的 Git 2.23（2019 年第二季度）中看到类似的错误（和解决方案） 。
简化了在运行时指定查找动态库的路径的方式。
旧的默认值 pass`-R/path/to/dir`已被新的默认值 pass 取代`-Wl,-rpath,/path/to/dir`，这是最近 GCC 使用的。

请参阅[Ævar Arnfjörð Bjarmason ( ) 的](https://github.com/avar)[提交 0f50c8e](https://github.com/git/git/commit/0f50c8e32c872097f86c424a17e2e4f856bd2f6e)（2019 年 5 月 17 日[）](https://github.com/avar)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 51d6c0f](https://github.com/git/git/commit/51d6c0f0159a7f8ec02bc5a095172cee857b4e3a))^(中，2019 年 6 月 13 日）)[`avar`](https://github.com/avar)
^([`gitster`](https://github.com/gitster))

> ## `Makefile`: 删除`NO_R_TO_GCC_LINKER`标志
> 
> 将我们的默认`CC_LD_DYNPATH`调用更改为 GCC 这些天喜欢的东西。
> 由于 GCC 4.6 发布未知标志尚未传递给[ld(1)](https://linux.die.net/man/1/ld)。因此，除非设置，否则我们之前的默认设置`CC_LD_DYNPATH=-R`会在现代 GCC 上导致错误`NO_R_TO_GCC_LINKER`。
> 
> 我们对“ `-R`”的使用可以追溯到[455a7f3](https://github.com/git/git/commit/455a7f3275d264f6e66045b92c83747ec461dda5)（“更多可移植性”，2005-09-30，Git v0.99.8a）。
> 不久之后，在[bbfc63d](https://github.com/git/git/commit/bbfc63dd78037a3f94c3f342384caee1037d09ab)（“`gcc`不一定通过运行时 libpath 与`-R`”，2006-12-27，Git v1.5.0-rc1）`NO_R_TO_GCC`中添加了标志，允许可选使用“ `-Wl,-rpath=`”。
> 
> 然后在[f5b904d](https://github.com/git/git/commit/f5b904db6b02e0ded76732eabe106069a87859fd) ("Makefile: Allow CC_LD_DYNPATH to be override", 2008-08-16, Git v1.6.1-rc1) 中添加了将此标志完全覆盖为其他内容的功能，因为某些链接器既不使用“ `-Wl,-rpath,`”也不使用“ `-R`” .
> 
> 据我所知，我们应该在事后看来，早在 2006 年就做出了这种改变。当时
> GCC &`ld`支持这种类型的调用，或者至少从[binutils-gdb.git 开始](http://sourceware.org/git/?p=binutils-gdb.git)。a1ad915dc4（“[...]添加对`-rpath`[...] 的支持”，1994-07-20）。
> 
> 进一步阅读和现有技术可以在以下位置找到：
> 
> *   [tsuna/boost.m4 第 15 期](https://github.com/tsuna/boost.m4/issues/15)
> *   [侏儒问题 641416](https://bugzilla.gnome.org/show_bug.cgi?id=641416)
> *   [构建 cURL 将`-R`选项传递给链接器](https://curl.haxx.se/mail/archive-2014-11/0005.html)
> 
> [阅读那些在2011 年 3 月 25 日发布](https://gcc.gnu.org/gcc-4.6/changes.html)`-R`的 GCC 4.6 中引入的报告似乎是一个简单的“ ”错误，但我不能绝对肯定地确认这一点，它的发行说明在这个主题上是模棱两可的，我不能不必费心尝试针对 GCC 4.5 构建和平分它。

# javascript - 自定义 Javascript 未加载到 Drupal 中的分页页面（第一页除外）

> ID：12629045
> 
> 赞同：0
> 
> 时间：2012-09-27T19:52:26.510
> 
> 标签：javascript, drupal, dom, pagination

我正在运行以下影响页面视图元素的 jQuery。

```
$(document).ready(function($){                    
    $(".views-field-field-video").click(function() {
        $(this).parent().find("a.cboxElement").click();
    }); 
}); 
```

该代码完美运行，但仅在第一页上。当我使用底部的寻呼机并导航到任何其他页面时，脚本不起作用。然后，当我导航回第一页时，脚本也失败了。

但是，如果我重新加载页面，它会将我带回到第一页并且脚本会再次运行。

我正在链接一个 .js 文件，并`<head> </head>`使用它正在加载标签之间的链接`<script type="text/javascript" src="http://source_to_file"></script>`，我可以在 Web 开发人员工具中看到。

编辑：我在脚本中选择的类在所有页面上都保持不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:03:56.610

听起来你只需要重新安排活动。Drupal 为您提供了一种在 javascript 中正确执行此操作的好方法：

```
Drupal.attachBehaviors('.behavior_class'); 
```

但是，如果您没有将上下文传递给您的行为，这将引起很多麻烦。

对于 drupal 6，请确保您的代码已包含在内：

```
Drupal.behaviors.clikfocus_map = function (context) { 
```

对于 Drupal 7：

```
(function ($) {
  Drupal.behaviors.ajax_example = {
    attach:function (context) {
    }
  }
})(jQuery); 
```

你的选择器应该都有

```
$('.myselector', context'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:59:18.747

听起来您只是在第一次加载页面时才添加点击事件。如果您随后动态添加 HTML（带有分页），那么您需要将点击事件重新添加到这些新对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T01:31:51.063

原来我只需要在视图上关闭 AJAX。很抱歉让事情变得过于复杂，但感谢您的所有帮助！

# mysql - 如何在 mysql 组中对记录进行排序？

> ID：12629048
> 
> 赞同：1
> 
> 时间：2012-09-27T19:52:31.157
> 
> 标签：mysql, sql, group-by, sql-order-by

所以假设我这样做

```
SELECT * FROM table t GROUP BY t.id 
```

假设表中有多行具有相同的 id，最终只会出现该 id 的一行......我想 mysql 将对具有相同 id 的结果进行排序并返回第一个或其他东西......我的问题是......mysql如何执行这个排序，有没有办法可以控制它的排序，例如，它使用某个字段等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:57:37.967

您可以`GROUP BY`使用几个不同的列来排列结果分组的顺序。

```
SELECT * FROM table t GROUP BY t.id, t.foo, t.bar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T21:09:36.737

在严格正确的 SQL 中，当您使用 GROUP BY 时，所有被选择的值必须是在 GROUP BY 子句中命名的列或聚合函数。MySQL 允许您违反此规则，除非您设置了`only_full_group_by`模式。但是，尽管它允许您执行此类查询，但它没有指定将为每个分组列选择哪一行。

如果要选择与其他列的最大值或最小值相对应的行，可以执行以下操作：

```
SELECT a.*
FROM table a
JOIN (SELECT id, max(somecol) maxcol
      FROM table
      GROUP BY id) b
ON a.id = b.id
AND a.somecol = b.maxcol 
```

请注意，如果它们都具有最大值，则每个 ID 仍然可以返回多行。您可以添加最终的 GROUP BY 子句，它将任意选择其中一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T21:25:33.630

当将此 MySQL 扩展用于标准 SQL GROUP BY 功能时，您无法控制服务器选择非聚合、非 GROUP BY 列的哪些值。[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/group-by-hidden-columns.html)讨论了这种特定情况并明确指出

> 服务器可以自由地从每个组中选择任何值，因此除非它们相同，否则选择的值是不确定的。此外，从每个组中选择值不会受到添加 ORDER BY 子句的影响。

# plugins - 无法让某些插件示例在 InDesign 上运行

> ID：12629049
> 
> 赞同：1
> 
> 时间：2012-09-27T19:52:33.937
> 
> 标签：plugins, adobe, adobe-indesign

我正在尝试为 InDesign 开发一个新插件。但现在我正在查看 SDK 附带的一些示例。事实是我无法让这些插件在 InDesign 上运行（例如 SnippetRunner）。然后我编译，得到一个构建成功的消息并将它移动到插件的 InDesign 目录，以及它的资源目录。它们正确加载（因为在启动期间我没有收到消息错误）。但是插件的选项卡不显示。好像里面没有任何插件。

会发生什么？

# php - 如何从 codeigniter 中的本地路径获取路径 url

> ID：12629052
> 
> 赞同：1
> 
> 时间：2012-09-27T19:52:41.200
> 
> 标签：php, html, codeigniter

我在 codeigniter 中创建下载链接时遇到问题。我的问题是我的文件名有一个本地路径：

```
C:\wamp\www\elance\zip2\uploads/13487727859183.zip 
```

现在要制作下载链接，我需要类似的东西`http://localhost/elance/zip2/uploads/13487727859183.zip`

我很困惑，没有得到解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:09:12.613

我想我理解你的问题，因为我今天遇到了同样的问题。

下面是我的单行解决方案，这里有一个解释，以确保我理解正确。

您有一个文件和该文件名的本地路径，可能存储在数据库表或类似文件中......对吗？

例如。C:\wamp\www\myApp\path\to\file.zip

您希望您的应用程序吐出一个链接，以便查看您网页的人可以单击该链接并下载文件，对吗？

您的应用程序位于：C:\wamp\www\myApp\index.php

下面的动态解决方案仅在您的文件存储在应用程序根目录的子目录中时才有效，而且它很容易，因为它利用了 CodeIgniter 的预定义常量和 url 帮助器：

```
// FCPATH -> where the index.php file lives
// $my_file  -> your file
$file_url = str_replace(FCPATH, base_url(), $my_file); 
```

而已。

只需将文件路径的“FCPATH”部分替换为“base_url()”输出即可。

如果您的文件所在的文件夹不是您的 app 文件夹的子文件夹，则您必须对 FCPATH 和 base_url() 位进行硬编码...

希望有帮助！皮特

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T21:26:04.287

未经测试，我认为这应该可以正常工作。该功能将需要放置在助手中

```
function create_download_link($file, $base_url, $location = "C:\wamp\www\") {

    $link = "<a href='" . str_replace("\\", "/", str_replace($location, $base_url, $file)) . "'>Download File</a>";

    return $link;

}

//example call
create_download_link("C:\wamp\www\elance\zip2\uploads/13487727859183.zip", base_url(), "C:\wamp\www\"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T20:53:20.133

如果你想转换`C:\wamp\www\elance\zip2\uploads/13487727859183.zip`成`http://localhost/elance/zip2/uploads/13487727859183.zip`你可以简单地使用[str_replace](http://php.net/manual/en/function.str-replace.php)

```
$str = "C:\wamp\www\elance\zip2\uploads/13487727859183.zip";
$str = str_replace("C:\wamp\www\","http://localhost/", $str);
$str = str_replace('\\', '/', $str); 
```

# spring - applicationcontext.xml 文件的问题

> ID：12629055
> 
> 赞同：1
> 
> 时间：2012-09-27T19:52:56.303
> 
> 标签：spring, applicationcontext

我在 Eclipse 中使用 Struts 2、Hibernate 和 Spring。我对`applicationcontext.xml`文件的位置有疑问。创建 bean 时，我的应用程序显示`applicationcontext.xml`无法找到的错误。该文件位于`webcontent/WEB-INF`. 然后我将它复制到`src`文件夹中，现在它可以工作了。但是，如果我从文件夹中删除它`WEB-INF`，即使欢迎文件也不会加载。我必须保留两份副本`applicationcontext.xml`才能使应用程序正常工作。我该如何解决这个问题？

# c++ - 如何在 C/C++ 中将 int 添加到 char[]

> ID：12629056
> 
> 赞同：2
> 
> 时间：2012-09-27T19:52:57.510
> 
> 标签：c++, c, char

我有这样的代码：

```
int i = 123;
char myString[100];
strcpy(myString, "my text"); 
```

以及我想如何在“我的文字”之后添加 123。如何在 C/C++ 中做到这一点？

最后`myString`应该是`my test123`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T19:54:09.567

在 C++ 中：

```
std::stringstream ss;
ss << "my text" << i;
std::string resultingString = ss.str(); 
```

**没有 C/C++ 这样的东西**。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-27T19:55:50.413

在 C++11 中：

```
std::string result = "my text" + std::to_string(i); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-27T19:55:29.770

（补充卢奇安的回答）

在 C 中：

```
char myString[128];
int i = 123;
snprintf(myString, sizeof(myString), "My Text %d", i); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-27T19:54:44.037

假设 mystring 足够大，在这个例子中就是：

```
sprintf( myString, "my text%d", 123 ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T20:05:35.290

使用 C++ 中的 Qt QString 对象：

```
std::cout << QString("my text %1").arg(123456); 
```

# xml - XSLT 将 HTML 列表转换为 XML

> ID：12629062
> 
> 赞同：0
> 
> 时间：2012-09-27T19:53:45.497
> 
> 标签：xml, xslt, xhtml

**问题：** *已解决，我能够生成一个脚本，该脚本将通过我的 XHTML 列表并生成 XML 输出。*

问题是：当我有一个有序列表时，XSLT 应该是什么样子？

谢谢@Sbof

我需要生成以下 XML：

```
<ParagraphStyleRange AppliedParagraphStyle="ParagraphStyle/ul">
  <CharacterStyleRange AppliedCharacterStyle="CharacterStyle/Character Style 1">
    <Content>abc</Content>
    <Br/>
    <Content>xyz</Content>
    <Br/>
    <Content>abc</Content>
    <Br/>
    <Content>xyzabc</Content>
    <Br/>
  </CharacterStyleRange>
</ParagraphStyleRange>
<ParagraphStyleRange AppliedParagraphStyle="ParagraphStyle/ol level 1">
  <CharacterStyleRange AppliedCharacterStyle="CharacterStyle/Character Style 1">
    <Content>xyz</Content>
    <Br/>
  </CharacterStyleRange>
</ParagraphStyleRange>
<ParagraphStyleRange AppliedParagraphStyle="ParagraphStyle/ol level 2">
  <CharacterStyleRange AppliedCharacterStyle="CharacterStyle/Character Style 1">
    <Content>abc</Content>
    <Br/>
  </CharacterStyleRange>
</ParagraphStyleRange> 
```

我有看起来像这样的 XHTML（内容不同，但做同样的事情）：

```
<?xml version="1.0" encoding="utf-8" ?>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
</head>
<body>
<ol>
    <li>abc</li>
    <li>xyz</li>
    <li>abc</li>
    <li>xyzabc</li>
    <li>xyz<ol>
        <li>abc</li>
        </ol>
    </li>
    <li>xyzxyz</li>
    <li>abc</li>
    <ol>
        <li>xyz</li>
    </ol>
    <li>next level</li>
</ol>
</body>
</html> 
```

这是横穿 XHTML 的 XSLT 片段：

```
 <xsl:template match="xhtml:ol/xhtml:li[not(*)]">
    <xsl:call-template name="para-style-range">
      <xsl:with-param name="style-name">article%3aol Level 1</xsl:with-param>
    </xsl:call-template>
    <xsl:if test ="xhtml:ol/xhtml:li[*]|
                   xhtml:ul/xhtml:li[*]">
      <xsl:apply-templates select="xhtml:ol/xhtml:li[*]|
                                   xhtml:ul/xhtml:li[*]" />
    </xsl:if>
  </xsl:template> 
```

这是我使用脚本得到的结果：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<idPkg:Story xmlns:idPkg="http://ns.adobe.com/AdobeInDesign/idml/1.0/packaging" DOMVersion="7.5">
    <Story Self="ucb" AppliedTOCStyle="n" TrackChanges="false" StoryTitle="$ID/" AppliedNamedGrid="n">
        <StoryPreference OpticalMarginAlignment="false" OpticalMarginSize="12" FrameType="TextFrameType" StoryOrientation="Horizontal" StoryDirection="LeftToRightDirection"/>
        <InCopyExportOption IncludeGraphicProxies="true" IncludeAllResources="false"/>
        <ParagraphStyleRange AppliedParagraphStyle="ParagraphStyle/ul">
            <CharacterStyleRange AppliedCharacterStyle="CharacterStyle/Character Style 1">
                <Content>abc</Content>
                <Br/>
                <Content>xyz</Content>
                <Br/>
                <Content>abc</Content>
                <Br/>
                <Content>xyzabc</Content>
                <Br/>
            </CharacterStyleRange>
        </ParagraphStyleRange>
        <ParagraphStyleRange AppliedParagraphStyle="ParagraphStyle/ol level 1">
            <CharacterStyleRange AppliedCharacterStyle="CharacterStyle/Character Style 1">
                <Content>xyz</Content>
                <Br/>
            </CharacterStyleRange>
        </ParagraphStyleRange>
        <ParagraphStyleRange AppliedParagraphStyle="ParagraphStyle/ol level 2">
            <CharacterStyleRange AppliedCharacterStyle="CharacterStyle/Character Style 1">
                <Content>abc</Content>
                <Br/>
            </CharacterStyleRange>
        </ParagraphStyleRange>
        <ParagraphStyleRange AppliedParagraphStyle="ParagraphStyle/ol level 1">
            <CharacterStyleRange AppliedCharacterStyle="CharacterStyle/Character Style 1">
                <Content>xyzxyz</Content>
                <Br/>
                <Content>abc</Content>
                <Br/>
            </CharacterStyleRange>
        </ParagraphStyleRange>
        <ParagraphStyleRange AppliedParagraphStyle="ParagraphStyle/ol level 3">
            <CharacterStyleRange AppliedCharacterStyle="CharacterStyle/Character Style 1">
                <Content>xyz</Content>
                <Br/>
            </CharacterStyleRange>
        </ParagraphStyleRange>
        <ParagraphStyleRange AppliedParagraphStyle="ParagraphStyle/ol level 1">
            <CharacterStyleRange AppliedCharacterStyle="CharacterStyle/Character Style 1">
                <Content>next level</Content>
                <Br/>
            </CharacterStyleRange>
        </ParagraphStyleRange>
    </Story>
</idPkg:Story> 
```

XSLT 截取段落的属性值：

```
<xsl:template name="para-style-range">
    <!-- The name of the paragraph style in InDesign -->
    <xsl:param name="style-name"/>
    <xsl:param name ="isTable" />
    <!-- A string of text that will precede the paragraph's actual content (ex: 'by ')-->
    <xsl:param name="prefix-content" select="''"/>
    <ParagraphStyleRange>
      <xsl:attribute name="AppliedParagraphStyle">
        <xsl:value-of select="concat('ParagraphStyle/', $style-name)"/>
      </xsl:attribute>
      <xsl:if test="$prefix-content != ''">
        <CharacterStyleRange>
          <Content><xsl:value-of select="$prefix-content"/></Content>
        </CharacterStyleRange>
      </xsl:if>
      <xsl:apply-templates select="text()|*" mode="character-style-range"/>
      <xsl:choose>
        <xsl:when test ="$isTable = 'true'">
          <!--Dont do any thing here-->
        </xsl:when>
        <xsl:otherwise>
          <Br/>
        </xsl:otherwise>
      </xsl:choose>

    </ParagraphStyleRange>
  </xsl:template> 
```

让我知道我是否可以提供更多脚本来帮助那些仍然对代码感到困惑或需要帮助弄清楚它的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:52:11.110

以下 XSL 适用于您的示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"
    xmlns:html="http://www.w3.org/1999/xhtml"
    exclude-result-prefixes="html">
    <xsl:template match="text()"/>
    <xsl:template match="/">
        <rootElement>
            <xsl:apply-templates/>
        </rootElement>
    </xsl:template>
    <xsl:template match="//html:ol">
        <ParagraphStyleRange>
            <xsl:attribute name="AppliedParagraphStyle">
                <xsl:text>ParagraphStyle/ol level </xsl:text>
                <xsl:value-of select="count(ancestor::html:ol)"/>
            </xsl:attribute>
            <xsl:apply-templates select="child::html:li"/>
        </ParagraphStyleRange>
        <xsl:apply-templates select="descendant::html:ol"/>
    </xsl:template>

    <xsl:template match="//html:li">
        <CharacterStyleRange>
            <xsl:attribute name="AppliedCharacterStyle">
                <xsl:text>CharacterStyle/Character Style </xsl:text>
                <xsl:value-of select="count(ancestor::html:li)"/>
            </xsl:attribute>
        <Content>
            <xsl:value-of select="normalize-space(text())"/>
        </Content>
        <br/>
        </CharacterStyleRange>
    </xsl:template>
</xsl:stylesheet> 
```

我使用的确切输入是

```
<!DOCTYPE html SYSTEM "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title></title>
    </head>
    <body>
        <ol>
            <li>level1a</li>
            <li>level1b
                <ol>
                    <li>level2a</li>
                    <li>level2b</li>
                    <li>level2c
                        <ol>
                            <li>level3a</li>
                        </ol>
                    </li>
                </ol>
            </li>
        </ol>
    </body>
</html> 
```

您可能需要根据您的确切需求对其进行调整。

# c# - 处理从 Windows 商店项目中的线程池传播出的意外异常

> ID：12629063
> 
> 赞同：0
> 
> 时间：2012-09-27T19:53:45.993
> 
> 标签：c#, .net, exception-handling, windows-runtime, windows-store-apps

我想在 C# windows store 项目中记录未捕获的异常。

对于在 UI 线程中执行的代码，我可以使用 Windows.UI.Xaml.Application.Current.UnhandledException 事件，但是在线程池中执行的代码的异常不会触发该事件。

我可以尝试确保包装所有“RunAsync”调用以记录未捕获的异常，但很容易意外绕过该解决方案。API 中是否有针对此的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T06:34:48.830

我不确定是否有可用的东西，但是您可以创建自己的 RunAsync 版本，它需要执行一个操作并将其包装在 try/catch 块中，然后再使用 RunAsync 的平台版本执行它，然后继续制作确保这是您在后台运行的唯一方法。

除此之外 - 启用所有异常的中断进行调试（Alt+Ctrl+E，检查所有）应该可以帮助您找到问题区域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T06:40:18.940

您如何安排代码作为 Threadpoolthread 运行？如果您使用的是任务，请检查 TaskScheduler 上的 UnobservedException 事件

```
System.Threading.Tasks.TaskScheduler.UnobservedTaskException +=new EventHandler<UnobservedTaskExceptionEventArgs>(...); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T14:05:01.230

目前我知道有两个意外的异常处理程序：

*   `System.Threading.Tasks.TaskScheduler.UnobservedTaskException`对于存储在任务中的异常，这些异常在任务被垃圾收集之前未被访问。
*   `Application.Current.UnhandledException`对于从 UI 线程传播的异常。

我还不知道有什么可以捕获从线程池传播出来的异常。

# php - 谷歌浏览器更新的 CSS 问题

> ID：12629065
> 
> 赞同：2
> 
> 时间：2012-09-27T19:53:55.247
> 
> 标签：php, css, google-chrome, joomla

在最近的 google chrome 更新之前，我的 topmenu 没有问题

现在自从它更新以来，顶部菜单上的最后一项（只有最后一项）进入下一行。

任何想法为什么会这样？

这是代码：

```
 /* TopMenu 
    ---------------*/
    #topmenu {
      float:right;
      margin:6px 15px 0}

  #topmenu ul.menu { 

margin:0;
padding:0;}
#topmenu ul.menu li {

  display:inline;
  float:left;
  padding:0 1.1em 0 0;
  border-right:1px dotted #555;
  margin:0 0 0 1.1em;
  text-shadow: 1px 1px 1px #FFFFFF;
  list-style-type:none;}
  #topmenu ul.menu li a {
    border-bottom:1px dotted rgba(0,0,0,0);
    color: #3F5868;
      padding-bottom: 2px;}
    #topmenu ul.menu li.active a,
    #topmenu ul.menu li a:hover {
      color:#000;
      border-bottom-color:rgba(0,0,0,0);
      text-decoration:none;}

  #topmenu ul.menu li a img {
    float:left;
    margin:0px 8px -4px 0}

  #topmenu ul.menu li:last-child {
    border:none;
    padding-right:0;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:42:16.150

我使用的是最新版本的 Chrome，www.housemarket.ie 上的 #topmenu 导航中的最后一项与其余菜单项是内联的。然而，出于某种原因，它只是一个项目符号，但是当我在检查器中将项目符号更改为填充文本时，它会保持在同一行。也许尝试刷新浏览器的缓存？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T21:02:56.847

我在 Chrome 的网站上注意到了这个问题，但看起来你正在积极尝试自己解决这个问题，这让我很难看到菜单发生了什么。如果您不希望更改菜单中的内容，您可以通过为#topmenu 设置大约 300 像素的宽度来轻松解决此问题。否则，我将假设这是填充问题。

# guice - Guice：是否可以在给定特定父/接口/注释的情况下获取所有绑定实例？

> ID：12629069
> 
> 赞同：5
> 
> 时间：2012-09-27T19:54:32.650
> 
> 标签：guice, guice-servlet

我知道这可能不是最纯粹形式的依赖注入，但假设我必须使用：

```
@Inject
Injector injector; 
```

使用这个注入器，是否可以获得*所有*给定的绑定实例：

1.  每个实例将继承自一个父类？
2.  每个实例将实现的接口？
3.  每个实例都有一个注释？

我看到了*Injector#findBindingsByType()*方法，但我不确定它在这方面是否有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T02:12:06.400

您可以注入通过多重绑定关联的给定类型的列表。查看文档：

[https://github.com/google/guice/wiki/Multibindings](https://github.com/google/guice/wiki/Multibindings)

# r - 在R中的一行中找到一个单词

> ID：12629072
> 
> 赞同：3
> 
> 时间：2012-09-27T19:54:44.537
> 
> 标签：r, file-io, line

我在 R 中阅读了一个 .txt 文件，文本由制表符和 \n 分隔。我想要的是找到可以找到单词“Delimiter1”的行号，然后提取该信息直到“Delimiter2”。这里的问题是这个词包含在格式中：

```
 \tab \tab \n
    Delimiter1 from data\tab\tab\n
    \tab\tab\data1 \tab data2 \n
    \tab\tab\data2  \tab data2 \n
    .....
    Delimiter2 from data\tab\tab\n
     ...... 
```

我试过 pmatch()，但一点运气都没有。这是架构的粗略草稿：

```
 fileName="text_all.txt"
    conn=file(fileName,open="r")
    line=readLines(conn)
    tabd<-strsplit(line,"\t") 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T21:34:30.207

正如 nograpes 已经建议的那样，您可以使用以下代码：

```
line[grep("Delimiter1", line, fixed = TRUE):grep("Delimiter2", line, fixed = TRUE)] 
```

每个都`grep`应该返回包含命名分隔符的行的索引。该`fixed`参数确保您不必担心分隔符字符串中的特殊正则表达式语法。如果多次找到任一字符串，代码将中断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T23:14:34.120

如果您的分隔符是唯一的（看起来），您可以使用例如此功能：

```
#' Text between delimiters
#' @param x character vector
#' @param tag1 start delimiter
#' @param tag2 stop delimiter
#' @return character vector
lines.between.tags <- function(x, tag1, tag2)
    x[do.call(seq, as.list(grep(paste(tag1, tag2, sep = '|'), x)))] 
```

简单的例子：

```
> text <- c('foo', 'Delimiter1 from data \t \n', 1:5, 'Delimiter2 from data \t \n', 'bar')
> lines.between.tags(text, 'Delimiter1', 'Delimiter2')
[1] "Delimiter1 from data \t \n" "1"                         
[3] "2"                          "3"                         
[5] "4"                          "5"                         
[7] "Delimiter2 from data \t \n" 
```

# salesforce - 如何在 apex salesforce 中创建每分钟运行的计划作业

> ID：12629073
> 
> 赞同：2
> 
> 时间：2012-09-27T19:54:47.660
> 
> 标签：salesforce, apex-code

我计划使用 salesforce 中的预定顶点创建预定作业。我知道我们可以每隔一小时编写和运行一次作业。我想知道是否有一种方法可以让我们每分钟而不是每小时运行一次代码。我知道以下代码每隔一小时就可以正常工作。

```
System.schedule('Scheduled Job', '0 15 * * * ?', new scheduledJob()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:44:55.147

你**不能**按秒安排。您可以使用单个`Scheduleable`界面执行的最小假设计划是**每小时一次**。如果您需要比这更短的时间范围，请使用外部集成、触发器或出站消息（使用工作流规则）

# python - 如何使用退出或继续程序

> ID：12629079
> 
> 赞同：1
> 
> 时间：2012-09-27T19:55:14.233
> 
> 标签：python, python-2.7

我写了这段代码，但我的导师说程序应该循环输入新的输入，直到运行程序的人告诉我停止。

> *提示：可以使用零 (0) 公里的输入来停止程序。

有人可以告诉我如何将其包含在我的代码中吗？我使用`x=raw_input()`, 因为当我运行程序时它在 cmd 中关闭得非常快。

```
def kilo():
    kilometers = input("Please enter a distance in kilometers?:") 
    return kilometers

def miles(km):
   """calculates miles from kilometers km""" 
   miles = km * 0.6214
   return miles    

def main():
  print "This program converts kilometers to miles." 
  km = kilo()
  print miles(km) 

  main()

 x= raw_input() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:12:21.650

你不需要`main()`例行公事。

代替`def main():`，您可以使用`while True:`循环。如果`km`碰巧返回为`0`，您可以`break`退出循环：

```
if km==0:
    break 
```

此外，最好明确并使用`kilometers = float(raw_input("Please enter..."))`.

# c++ - 使用 libpcap 读取数据包数据

> ID：12629080
> 
> 赞同：0
> 
> 时间：2012-09-27T19:55:16.913
> 
> 标签：c++, c, pcap, libpcap, packets

我正在使用 pcap 来监控 http 请求和响应。我已经设置了 pcap_loop 并且我在我的回调函数中获取数据包，但我不知道如何读取数据包内容。这是我的回调函数：

```
void got_packet(u_char *args, const struct pcap_pkthdr *header, const u_char *packet)
{
     printf("%s\n", packet);
} 
```

输出总是看起来像一系列反斜杠和后面的三个数字

\200\205\300

我想知道如何使内容可读，以便查找和处理 http 请求和响应？

**更新：**

我的目标是阅读 HTTP 请求和响应是否有任何适当而简洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T20:53:23.447

这是因为输出是原始二进制数据，而不是 ascii 字符串，所以 printf 只输出它直到第一个 0 字节。要打印数据包中的所有可读内容，请使用以下内容：

```
for (int i = 0; i < header->caplen; ++i) {
    if (isascii(packet[i])) {
      putchar(packet[i]);
    } else {
      putchar('.');
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T21:04:21.430

Libpcap 将为您提供一个原始数据包，包括所有标头。您需要从中提取所需的数据，我建议将其转换为代表数据包的标准结构。就像是，

```
/* Start with the ether header */
ethernet = (struct ether_header *) packet;

/* Do a couple of checks to see what packet type we have */
if (ntohs (ethernet->ether_type) == ETHERTYPE_IP)
{
            // Cast it to an IP packet struct
    ip_hdr = (struct ip*)(packet + sizeof(struct ether_header));

    //If TCP...
    if(ip_hdr->ip_p == 6)
    {
               packet_info.tcp_hdr = *(struct tcphdr*)((char*)ip_hdr + sizeof(struct ip));
               // Work on extracting the actual data for HTTP stuff over here 
```

# php - 在单词之前和之后提取字符串的一部分

> ID：12629081
> 
> 赞同：2
> 
> 时间：2012-09-27T19:55:28.903
> 
> 标签：php, regex, string, search

我需要在**查询词****之前**和**之后****提取**并显示一些词，例如谷歌搜索结果，例如：

 ******```
$str = "hi user! welcome to new php open source world, we are trying to learn you something!";
$query = "new php";
$result = "... welcome to new php open source ..."; 
```

我在 google 上搜索了一个 SO，但没有找到明确的答案，或者我的 php 知识还不够！是否有一个可行且易于使用的功能来完成这项工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T20:27:31.620

```
function yourFuncName($str, $query, $numOfWordToAdd) {
    list($before, $after) = explode($query, $str);

    $before = rtrim($before);
    $after  = ltrim($after);

    $beforeArray = array_reverse(explode(" ", $before));
    $afterArray  = explode(" ", $after);

    $countBeforeArray = count($beforeArray);
    $countAfterArray  = count($afterArray);

    $beforeString = "";
    if($countBeforeArray < $numOfWordToAdd) {
        $beforeString = implode(' ', $beforeArray);
    }
    else {
        for($i = 0; $i < $numOfWordToAdd; $i++) {
            $beforeString = $beforeArray[$i] . ' ' . $beforeString; 
        }
    }

    $afterString = "";
    if($countAfterArray < $numOfWordToAdd) {
        $afterString = implode(' ', $afterArray);
    }
    else {
        for($i = 0; $i < $numOfWordToAdd; $i++) {
            $afterString = $afterString . $afterArray[$i] . ' '; 
        }
    }

    $string = $beforeString . $query . ' ' . $afterString;

    return $string;
} 
```

**输出为：** `user! welcome to new php open source world,` ( *$numOfWordToAdd = 3* )

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T20:17:01.093

这是一个工作示例，我很清楚我做了什么以及如何做：

```
<?php

$str = "hi user! welcome to new php open source world, we are trying to learn you something!";
$query = "new php";    

$expl = explode($query, $str);

    // items on the left side of middle string
    $expl_left = explode(" ", $expl[0]);

    $left_cnt = count($expl_left);

    $new_left = $expl_left[$left_cnt-3] . " " . $expl_left[$left_cnt-2];

    // items on the right side of middle string
    $expl_right = explode(" ", $expl[1]);

    $new_right = $expl_right[1] . " " . $expl_right[2];

    // new string formated
    $new = "... " . $new_left . " " . $query . " " . $new_right . " ...";

print $new;

?> 
```

如果您有一些问题，请随时问...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T20:04:09.853

```
$result = preg_replace('/(.+)?([^\s]+.{10}'.$query.'.{10}[^\s]+)(.+)?/', '... $2 ...', $str); 
```

这将从您提供的相同字符串和查询返回相同的结果。如果之前或之后的长度（分别）在单词的中间开始或结束，它将继续直到它在停止之前完成单词。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T20:06:55.433

假设“单词”是任何一系列非空白字符，以下将`new php`在字符串的任一侧提取 3 个单词`$subject`，但如有必要则接受更少的单词：

```
if (preg_match('/(?:\S+\s+){1,3}new php(?:\s+\S+){1,3}/', $subject, $regs)) {
    $result = $regs[0];
} 
```

将 s 更改为`3`您喜欢的任何数字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-13T16:59:54.537

我使用了以下功能和爆炸：

```
public static function returnSearch($query, $str, $wordcount) {
    $explode = explode($query, $str);
    $result = null;
    //if explode count is one the query was not found
    if (count($explode) == 1) {
        $result = implode(' ', array_slice(str_word_count($explode[0], 2), -$wordcount, $wordcount)) . " ";
    }
    //if explode count is more than one the query was found at least one time
    if (count($explode) > 1) {
        //check for if the string begins with the query
        if (!empty($explode[0])) {
            $result =  "..." . implode(' ', array_slice(str_word_count($explode[0], 2), -$wordcount, $wordcount)) . " ";
        }
        $result = $result . $query;
        if (!empty($explode[1])) {
            $result = $result . " " . implode(' ', array_slice(str_word_count($explode[1], 2), 0, $wordcount)) . "...";
        }
    }
    //return result
    return $result;
} 
```******

# android - 录制 .m4a 文件 Android

> ID：12629083
> 
> 赞同：5
> 
> 时间：2012-09-27T19:55:35.893
> 
> 标签：android, audio-recording, m4a

如何在 Android 2.2 中使用 MediaRecorder录制 M4A*音频文件？*
我需要设置什么输出格式、编码器和采样率？

我需要从麦克风录制并保存在 SDCARD

**更新**

我尝试了这段代码，但结果无效（例如，不在浏览器中播放）：

```
recorder = new MediaRecorder();
recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB); // error here ?!?
recorder.setAudioSamplingRate(96000); // what value ? 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-03-13T16:37:20.603

这些代码用于生成 m4a 文件：

```
 mRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
    mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.HE_AAC); 
```

或者

```
 mRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
    mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC); 
```

和

```
 mRecorder.setAudioChannels(1);
    mRecorder.setAudioSamplingRate(44100);
    mRecorder.setAudioEncodingBitRate(96000);
    mRecorder.setOutputFile(absFilePath);// must have an .m4a extension 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T20:01:56.580

试试下面的链接

[如何将音频文件录制为 .m4a 格式？](https://stackoverflow.com/questions/7357826/how-can-i-record-audio-file-as-m4a-format)

或者

[http://www.benmccann.com/blog/android-audio-recording-tutorial/](http://www.benmccann.com/blog/android-audio-recording-tutorial/)

这可能会对您有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-31T07:59:53.923

试试这个，换

`recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);`

至

```
recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC); 
```

# cuda - CUDA 同步内核

> ID：12629084
> 
> 赞同：6
> 
> 时间：2012-09-27T19:55:37.220
> 
> 标签：cuda

嗨，我对 CUDA 中的编程有疑问。我有以下代码：

```
int main () {

    for (;;) {
        kernel_1 (x1, x2, ....);
        kernel_2 (x1, x2 ...);
        kernel_3_Reduction (x1);

    // code manipulation host_x1
    // Copy the pointer device to host
        cpy (host_x1, x1, DeviceToHost)
        cpu_code_x1_manipulation;
        kernel_ (x1, x2, ....);
    }

} 
```

那么当拷贝制作时如何保证kernel_1、kernel_2和kernel_3完成各自的任务呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T20:01:23.117

在同一流上启动的所有操作都是同步的。在上面的代码中，所有的内核都会一个接一个地运行。如果需要 kernel_1 和 kernel_2 并行运行，则必须明确指定流。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T20:27:27.487

`cudaDeviceSynchronize();`仅在您希望确保所有内核完成的地方使用。在此命令之后，您可以假设所有内核和所有挂起的设备函数调用都已完成。

# c# - 我想从 Lync Server 中的 RTC DB 获得联系

> ID：12629085
> 
> 赞同：1
> 
> 时间：2012-09-27T19:55:39.170
> 
> 标签：c#, sql-server, lync, mmc3

我有一个项目来管理 Lync Server 中的联系人

当我成功为用户创建填充联系人列表时，但当用户在 MS Lync 客户端登录时，状态选项卡不起作用？

# jquery - .destroy 后在 Jquery 对话框中重新加载视频

> ID：12629086
> 
> 赞同：0
> 
> 时间：2012-09-27T19:55:41.550
> 
> 标签：jquery, jquery-ui-dialog

一旦对话框关闭，我想 .destroy 视频实例，但随后能够单击链接并再次出现视频。目前，当我尝试单击链接时关闭对话框，视频将不会重新启动。非常感谢任何帮助。

```
$(function(){

                $('#dialog').dialog({
                    open: function() { $(".ui-dialog").addClass("ui-dialog-shadow"); },
                    autoOpen: false,
                    width: 660,
                    height: 400,
                    modal: true,
                    close: function() {
    $(this).dialog('destroy').append('#dialog');
},

                });

                $('#dialog_link').click(function(){
                    $('#dialog').dialog('open');
                    return false;
                });

                $('#dialog_link, ul#icons li').hover(
                    function() { $(this).addClass('ui-state-hover'); },
                    function() { $(this).removeClass('ui-state-hover'); }
                );

            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:59:01.607

我建议将其用作您的关闭功能。

```
close: function() {
    if( ! $(this).length ) {
         $('body').append('<div id="dialog"></div>');
    }
}, 
```

# c# - “（float）integer == integer”在C#中是否保证相等？

> ID：12629087
> 
> 赞同：18
> 
> 时间：2012-09-27T19:55:43.913
> 
> 标签：c#, floating-point, equality

虽然“我们都知道”可能有问题，浮点值`x == y`在哪里`x`和是，这个问题更具体一点：`y`

```
int x = random.Next(SOME_UPPER_LIMIT);
float r = x;
// Is the following ALWAYS true?    
r == x 
```

现在，由于float 的*范围*比整数的范围大得多（但精度不足以在边缘唯一地呈现整数），如果对这个问题的回答*也*解决了上面的哪些值`x`可以保证，如果可以保证的话。

* * *

目前我的代码*正在*做这个假设（对于相对较小的 x 值） - 我想确保我不会被咬 :)

* * *

这将失败并显示“不等于：16777217”（cast float -> int）：

```
for (int i = 0; i < int.MaxValue; i++) {
   float f = i;
   if ((int)f != i) throw new Exception("not equal " + i);
} 
```

这个类似的代码不会失败（只有 int -> float）；但是，*由于转换中的损失，有几个浮点数可以“等于”相同的 integer*，并且可能代表一个静默错误：

```
for (int i = 0; i < int.MaxValue; i++) {
   float f = i;
   if (f != i) throw new Exception("not equal " + i);
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-27T20:07:24.983

是的，无论值是什么，比较总是正确的`int`。

将`int`转换为 a`float`进行转换，第一次转换为`float`将始终给出与第二次转换相同的结果。

考虑：

```
int x = [any integer value];
float y = x;
float z = x; 
```

`y`和的值`z`将始终相同。如果转换丢失精度，则两个转换将以完全相同的方式丢失精度。

如果您将`float`背面转换`int`为比较，那是另一回事。

* * *

另外，请注意，即使`int`转换为的特定值`float`总是产生相同的`float`值，这并不意味着该`float`值对于该值必须是唯一的`int`。有`int`值在`(float)x == (float)(x+1)`哪里`true`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-27T20:04:47.573

下面的实验表明答案是你不存在相等不成立的极端情况

```
 static void Main(string[] args)
    {
        Parallel.For(int.MinValue, int.MaxValue, (x) =>
        {
            float r = x;
            // Is the following ALWAYS true?    
            bool equal = r == x;
            if (!equal) Console.WriteLine("Unequal: " + x);                
        });

        Console.WriteLine("Done");
        Console.ReadKey();

        return;
} 
```

转换似乎是合理的

```
float f = i; 
```

和

```
if ((int)f != i) 
```

应该遵循同样的规则。这证明 int -> float 和 float -> int 转换是双射。

*注意：*实验代码实际上并没有测试边缘情况 int.MaxValue，因为 Parallel.For 的*to*参数是独占的，但我单独测试了该值并且它也通过了测试。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-27T20:07:35.140

在比较 int 和 float 时，int 被隐式转换为 float。这确保了同样的精度损失发生，因此比较总是会发生。只要您不干扰隐式转换或进行算术运算，等式就应该成立。例如，如果你这样写：

```
bool AlwaysTrue(int i) {
    return i == (float)i;
} 
```

有一个隐式转换，所以它等价于这个应该总是返回 true 的函数：

```
bool AlwaysTrue(int i) {
    return (float)i == (float)i;
} 
```

但如果你这样写：

```
bool SometimesTrue(int i) {
    return i == (int)(float)i;
} 
```

那么就没有更多的隐式转换，精度的损失只发生在右侧。结果可能是错误的。同样，如果你这样写：

```
bool SometimesTrue(int i) {
    return 1 + i == 1 + (float)i;
} 
```

那么双方的精度损失可能不相等。结果可能是错误的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-27T20:05:07.213

我运行了这段代码，没有抛出异常：

```
for (int x = Int16.MinValue; x < Int16.MaxValue; x++)
{
 float r = x;
 if (r != x)
 {
  throw new Exception("Failed at: " + x);
 }
} 
```

仍在等待（未完成此测试，因为它花费了太长时间，但在运行时从未抛出异常）：

```
for (long x = Int64.MinValue; x < Int64.MaxValue; x++)
{
 float r = x;
 if (r != x)
 {
  throw new Exception("Failed at: " + x);
 }
} 
```

回过头来运行您的示例，但需要注意的是，这是输出：

```
[Exception: not equal 16777217 ?= 1.677722E+07 ?= 16777216]

for (int i = 0; i < int.MaxValue; i++)
{
 float f = i;
 if ((int)f != i) throw new Exception("not equal " + i + " ?= " + f + " ?= " + (int)f);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T20:05:10.957

我对浮点算术计算的理解是它们由 CPU 处理，这完全决定了你的精度。因此，没有确定的值超过该值，浮点数会失去精度。

例如，我曾认为 x86 架构可以保证最低限度，但事实证明我错了。

# python - 哪一种是获取目录列表的更快方法 subprocess.Popen 或 os.listdir

> ID：12629091
> 
> 赞同：0
> 
> 时间：2012-09-27T19:55:58.050
> 
> 标签：python, python-2.7

我想检索目录中的文件列表。使用`subprocess.Popen`或使用`os.listdir`. 该目录包含 10000 个文件。这必须递归地完成以从目录及其子目录中检索列表。我知道我们可以`os.walk`用来检索目录的内容，但`os.walk`不能用于我应该做的事情。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T20:33:13.147

`os.listdir`很可能被编译的 c 调用相同的基本 libc 系统方法`ls`。

相反，`subprocess.Popen`fork 一个全新的进程，这是一项昂贵的系统操作，并且需要新的文件句柄来处理 tty 操作。

# sql-server-2008 - 命名存储过程参数和连接

> ID：12629092
> 
> 赞同：1
> 
> 时间：2012-09-27T19:56:03.117
> 
> 标签：sql-server-2008, tsql, sql-server-2008-r2, sql-server-2012

> **可能重复：**
> [在 TSQL 中强制转换整数并连接到 varchar](https://stackoverflow.com/questions/4936180/cast-integer-and-concatenate-to-varchar-in-tsql)

如何使用具有更复杂值的命名参数调用存储过程。这是一个有点编造的例子：

```
EXEC MyStoredProc @Param1='My name is: '+@Name 
```

或者：

```
EXEC MyStoredProc @Param1=CONCAT('My name is: ',@Name) 
```

尝试将文字字符串“我的名字是：”与变量 @Name 连接时出现错误。括号对这件事没有任何帮助。这是 T-SQL 的限制吗（即使用命名参数时，等号后面的表达式必须是单个文字或变量）？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T19:58:49.747

单程

```
declare @Var1 varchar(50)
select @Var1 = 'My name is: '+@Name

EXEC MyStoredProc @Param1=@Var1 
```

函数也是如此

你不能这样做

```
EXEC MyStoredProc @Param1=getdate() 
```

你需要做

```
declare @Var1 datetime
select @Var1 = getdate()

EXEC MyStoredProc @Param1=@Var1 
```

# android - Eclipse 64 位 - Android 虚拟设备管理器无法创建 SD 卡

> ID：12629109
> 
> 赞同：2
> 
> 时间：2012-09-27T19:57:12.497
> 
> 标签：android, eclipse-plugin, windows-7-x64, avd

我正在运行 Windows 7 64 位和 Eclipse 也是 64 位，安装了最新的 ADT 插件和 Android ADK。全部按照 Android SDK 站点上的说明安装。

当我尝试创建新的 AVD 时，我收到以下消息。

[ *Date* *Time* - SDK Manager] 创建 SD 卡失败。[ *Date* *Time* - SDK Manager] 无法在 AVD 文件夹中创建 sdcard。

我尝试过不同的 SD 卡尺寸，认为这可能与存储空间分配有关，但似乎并非如此，因为我的硬盘驱动器还有很多空间。考虑到我的帐户拥有管理员权限，它也不应该是不能创建文件夹。我真的不知道这里出了什么问题，我所能找到的只是 Ubuntu 上的帖子，没有太大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-07T02:22:08.160

我在我的窗户上发现了类似的问题。似乎这种情况仅发生在 64 位机器上。要解决此问题，请确保您对 Android SDK 目录中 Tools 文件夹下的所有文件具有完全访问权限。对于 linux/ubuntu，执行以下命令

```
 chmod -R 777 ../tools 
```

对于 windows，转到 Android SDK 目录..

右键单击工具文件夹>属性>转到选项卡“安全”>选择“用户”>编辑>选择“完全控制”，保存并关闭它。

这样做后它应该可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T22:14:31.360

转到计算机中的以下目录：

C:\Users\.android\avd

在此目录中，您将找到包含您的 avd 机器的定义和内容的所有文件和目录 -

现在执行基本的故障排除步骤：

- 检查 avd 目录是否存在以及是否包含名为“sdcard.img”的文件。

-如果文件存在，尝试重命名它（检查它是否被锁定）然后去eclipse并要求创建一个新的sd卡。

- 如果失败，请尝试手动创建一个具有该名称的文件以检查权限。

祝你好运

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-07-14T14:47:16.633

关闭处于打开状态的模拟器，然后重试。这对我有用。

# sql - 快速计算数百万个搜索值

> ID：12629110
> 
> 赞同：1
> 
> 时间：2012-09-27T19:57:15.520
> 
> 标签：sql, math

假设我有一个包含数百万个具有价格属性的小部件的数据库。小部件属于供应商，我将小部件卖给客户，首先从供应商那里购买，然后再卖给客户。有了这个基本设置，如果客户向我询问每个低于 50 美元的小部件，列出它们是微不足道的。

但是，我对各个供应商的小部件价格进行了不同的标记。所以我可以将供应商 A 的小部件加价 10%，我可以将供应商 B 的小部件加价 5 美元。在数据库中，这些标记将与我的 ID、供应商 ID、标记类型（平面、百分比）和标记率一起存储在连接表中。最重要的是，供应商可以在向我销售时添加他们自己的标记（这些标记将与供应商的 ID、我的 ID 和标记类型/费率在同一个连接表中）。

因此，如果我想从供应商 A 处出售 45 美元的小部件，它可能会被供应商的 10% 加价（至 49.50 美元）加价，然后是我自己的 10 美元固定加价（至 59.50 美元）。该小部件不会出现在客户搜索价格低于 50 美元的小部件中。但是，一个 80 美元的小部件在到达客户端时可能会被标记为 45 美元，并且应该在结果中返回。这些标记可能会发生变化，假设我是这个系统中通过供应商向客户销售小部件的数百人中的一员，所有人在该标记表中都有自己的标记关系。

有没有在数百万个对象上快速执行这样的计算的先例？我意识到这是一个巨大的、非平凡的问题，但我很好奇人们将如何开始解决这样的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T20:00:00.580

将列添加到数据库并存储计算结果，并使用相关记录更改更新它们。您无法*为数百万*条记录即时计算这些值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T20:01:24.520

> 有没有在数百万个对象上快速执行这样的计算的先例？

标准。严重地。数据仓库，风险预测。像这样的东西 - 你的问题很小。预先计算所有组合，将它们存储在适当的更高级别的数据库服务器中，完成。

它并不大 - 说真的。它只对小型服务器来说是巨大的，但是一旦你得到一个计算网格......它就很简单了。数以百万计的物体？每台机器在一分钟内计算 100.000 个对象，1000 万是 100 分钟对象。而且你没有那么多变化。

# php - 动态调用类方法参数

> ID：12629112
> 
> 赞同：7
> 
> 时间：2012-09-27T19:57:18.107
> 
> 标签：php, oop, dynamic, method-invocation

我正在做一些事情，我需要能够将一个索引的 args 数组传递给一个方法，就像`call_user_func_array`工作原理一样。我会使用`call_user_func_array`，但它不是 OOP 方法，这是不受欢迎的，它要求方法是静态的，这会破坏目标类的 OO。

我曾尝试使用`ReflectionClass`但无济于事。您不能调用类方法的参数，只能调用构造函数。不幸的是，这是不可取的。

因此，我查看了手册页并查看了`ReflectionFunction`但没有办法实例化该类，将其指向一个方法，然后`invokeArgs`使用它。

使用示例`ReflectionFunction`（请记住，这个问题被标记为 PHP 5.4，因此语法）：

```
$call = new \ReflectionFunction( "(ExampleClass())->exampleMethod" );
$call->invokeArgs( ["argument1", "argument2"] ); 
```

这失败了：

```
Function (Index())->Index() does not exist 
```

使用示例`ReflectionMethod`

```
$call = new \ReflectionMethod( "ExampleClass", "exampleMethod" );
$call->invokeArgs( new ExampleClass(), ["argument1", "argument2"] );
print_r( $call ); 
```

这失败了：

```
ReflectionMethod Object
(
    [name] => Index
    [class] => Index
) 
```

参数永远不会传递给方法。

期望的结果是：

```
class ExampleClass() {
    public function exampleMethod( $exampleArg1, $exampleArg2 ){
        // do something here
        echo "Argument 1: {$exampleArg1}\n";
        echo "Argument 2: {$exampleArg2}\n";
    }
}

$array = [ 'exampleArg1Value', 'exampleArg2Value' ]; 
```

如果我传递`$array`给 的一个实例`ExampleClass->exampleMethod()`，我将只有一个参数，即一个数组。相反，我需要能够提取单个参数。

我在想，如果有一种方法可以召唤我`ReflectorFunction`，`ReflectorClass`我会以船形和我的方式进入，但看起来这是不可能的。

有没有人有他们以前用来完成此任务的任何东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T19:58:54.783

AFAIK，以下应该有效：

```
$call = new \ReflectionMethod( "ExampleClass", "exampleMethod" );
$call->invokeArgs( new ExampleClass(), ["argument1", "argument2"] );
print_r( $call ); 
```

PHP 是什么次要版本？你在 5.4.7 上吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T20:24:19.903

我已经编写了自己的依赖注入器，并且还使用参数动态构造了类。这里有一些代码可以帮助你：

```
$type = 'ExampleClass';

$reflector = new \ReflectionClass( $type );

if ( !$reflector->isInstantiable() )
  throw new \Exception( "Resolution target [$type] is not instantiable." );

$constructor = $reflector->getConstructor();

$parameters = $constructor->getParameters(); 
```

At this point you have a array of parameters, needed for construction. You can now substitute the parameters with the values and construct the class.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-28T13:49:12.787

For some reason, something got stuck, somewhere.

```
$call = new \ReflectionMethod( "ExampleClass", "exampleMethod" );
$call->invokeArgs( new ExampleClass(), ["argument1", "argument2"] ); 
```

Now returns

```
Argument 1: argument1
Argument 2: argument2 
```

I am going to try to reproduce the issue. It is on a fresh php 5.4.7 install with php-cli and fpm.

# json - 通过 Web 服务将 JSON 读取到为 Hibernate 注释的 POJO 中

> ID：12629115
> 
> 赞同：0
> 
> 时间：2012-09-27T19:57:32.587
> 
> 标签：json, hibernate, pojo, restlet-2.0

我正在通过网络服务阅读以下 json。有没有办法将 json 读入三个合适的 POJO？POJO 由 hibernate 生成，用于与数据库通信。

基本上我需要将`person`json读入一个`Perso`n POJO，将`pets`json读入一组`Pet`POJO，将`toy`json读入一组`Toy`POJO。

JSON

```
{
"person":{"first_name":"John", "last_name":"Smith"},
"pets":[{"species":"dog", "name":"Adama"}, {"species":"cat", "name":"Benton"} ],
"toys":[{"car":"corvet", "color":"black"}, {"action_figure":"hancock", "height":"1ft"} ]
} 
```

网络服务

```
@Post
public Representation readForm(Representation representation) {
    try {
        Person aPerson = …
        Set<Pet>  petSet = …
        Set<Toy> toySet = ...

      …. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:33:19.227

您可以使用 xStream 。您将必须创建一个将所有 3 种类型的对象作为属性的 VO。给它们各自的别名，您将在该 VO 中获得所有 3 种类型的对象。您只需调用它们的 getter 即可获取它们。

# php - PHP 通过 CLI 使用 imap_open() 下载附件

> ID：12629119
> 
> 赞同：1
> 
> 时间：2012-09-27T19:57:38.360
> 
> 标签：php, imap, command-line-interface

我很接近完成这个，但我一直在下载附件。

到目前为止，我正在使用以下代码获取所有必要的电子邮件标题信息：

（另外，我通过命令行执行此操作：CentOS 6）

```
<?php
echo "\n";
$hostname = '{imap.gmail.com:993/imap/ssl}INBOX';
$username = 'myemail@mydomain.com';
$password = 'myfunpassword';

/* try to connect */
$inbox = imap_open($hostname,$username,$password) or die('Cannot connect to Gmail: ' . imap_last_error());

/* grab emails */
$emails = imap_search($inbox,'ALL'); 

/* if emails are returned, cycle through each... */
if($emails) {

    /* begin output var */
    $output = '';

    /* put the newest emails on top */
    rsort($emails);

    /* for every email... */
    foreach($emails as $email_number) {

        /* get information specific to this email */
        $overview = imap_fetch_overview($inbox,$email_number,0);
        $message = imap_fetchbody($inbox,$email_number,1);

        $output.= $email_number."\n";
        $output.= ($overview[0]->seen ? '[read]' : '[unread]')."\n"; 
        $output.= "date:".$overview[0]->date."\n";
        $output.= "to:".$overview[0]->to."\n";
        $output.= "from:".$overview[0]->from."\n";
        $output.= "size:".$overview[0]->size."\n"; //size in bytes
        $output.= "msgno:".$overview[0]->msgno."\n"; 
        $output.= "message_id:".$overview[0]->message_id."\n"; //Message-ID
        $output.= "uid:".$overview[0]->uid."\n"; //UID the message has in the mailbox
        $output.= "from:".$overview[0]->from."\n";
        $output.= "subject:".$overview[0]->subject."\n";
        /* output the email body */
        $output.= "message:".$message; 

                /* detect attachments here */

                $output.="\n\n";
        }
  echo $output;

} // eof $emails check

imap_close($inbox);
?> 
```

这很好用！所以现在，我有这段代码可以告诉我每封电子邮件中是否有附件：

```
<?php
// put this code above where it says "detect attachments here"

        // attachments detection
        $struct = imap_fetchstructure($inbox,$email_number);
        $contentParts = count($struct->parts);      

           if ($contentParts >= 2) {
                for ($i=2;$i<=$contentParts;$i++) {
                    $att[$i-2] = imap_bodystruct($inbox,$email_number,$i);
                }
                for ($k=0;$k<sizeof($att);$k++) {
                    if ($att[$k]->parameters[0]->value == "us-ascii" || $att[$k]->parameters[0]->value    == "US-ASCII") {
                        if ($att[$k]->parameters[1]->value != "") {
                            $selectBoxDisplay[$k] = $att[$k]->parameters[1]->value;
                        }
                    } elseif ($att[$k]->parameters[0]->value != "iso-8859-1" &&    $att[$k]->parameters[0]->value != "ISO-8859-1") {
                        $selectBoxDisplay[$k] = $att[$k]->parameters[0]->value;
                    }
                }

               if (sizeof($selectBoxDisplay) > 0) {
                    for ($j=0;$j<sizeof($selectBoxDisplay);$j++) {
                        $output.= "\n--file:". $selectBoxDisplay[$j]."";
                    }
               }

           }

        // eof attachments detection
?> 
```

这也有效！但是现在我需要下载附件，并且大多数教程都向我展示了如何从浏览器的角度而不是 CLI 的角度来完成它。所以我在这里肯定需要一点帮助。

我期待有一种方法可以确定在服务器上下载文件的位置。

# android - 在手指触摸时更改 Href 块的背景颜色

> ID：12629120
> 
> 赞同：0
> 
> 时间：2012-09-27T19:57:41.680
> 
> 标签：android, jquery, button, colors, background

这是我的jsfiddle：

[http://jsfiddle.net/Wgajs/4/](http://jsfiddle.net/Wgajs/4/)

当用户用手指按下按钮/链接时，我不知道如何使用 jquery 实现相同的效果。我已经访问了该网站，但发现它非常混乱，不知道要查找什么。

我需要 jquery 的原因是因为这个效果在 Android 移动浏览上不能正常工作。当您向下滚动页面并触摸一个链接时，突出显示的绿色变得全是错误的，并且只显示部分，或者更糟糕的是，被分割和参差不齐。

所以我问，有人可以告诉我如何在单击链接变为绿色时采用“活动”css类的相同效果 - 并更改它以便当用户触摸智能手机上的按钮时它可以工作（使用jquery）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:10:23.687

试试这个解决方案

***CSS***

```
a.menuButton:active, activeBtn {... // Add activeBtn 
```

***JS***

```
 $(function() {
   $('a.menuButton').on('mousedown', function(){
          $(this).addClass('activeBtn')        
        }
        )​​​​​​;
   $('a.menuButton').on('mouseup', function(){
          $(this).removeClass('activeBtn')        
        }
    );  

}); 
```

***[jsfiddle](http://jsfiddle.net/abaksheyev/Wgajs/5/)***

​</p>

# java - Java - 从递归函数返回

> ID：12629122
> 
> 赞同：3
> 
> 时间：2012-09-27T19:57:46.297
> 
> 标签：java, arrays, recursion, permutation

我正在尝试返回字符串数组中所有可能的值排列。我提出了以下代码，可以进行所有可能的排列；它工作正常。

```
private void combineArray(String sPrefix, String[] sInput, int iLength) {
    if (iLength == sPrefix.length()) {
        //This value should be returned and concatenated:
        System.out.println(sPrefix);
    } else {
        for (int i=0; i<sInput.length; i++) {
            combineArray(sPrefix.concat(sInput[i]), ArrayUtils.removeElement(sInput, sInput[i]), iLength);
        }
    }
} 
```

如果我输入 {x, y ,z} 它会打印到控制台：

```
xyz
xzy
yxz
yzx
zxy
zyx 
```

我的问题是我找不到将这些值返回给原始调用函数的方法。所以我希望这个函数不返回“void”，而是返回一个包含 sPrefix 连接值的“String”。

我已经为此苦苦挣扎了一段时间，我似乎再也看不清楚了。：） 任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T20:03:05.517

我认为与其返回一个列表，不如将一个列表作为参数传入，然后在方法中填充它*可能会更好：*

```
private void combineArray(List<String> lOut, String sPrefix, String[] sInput, int iLength) {
    if (iLength == sPrefix.length()) {
        //This value should be returned and concatenated:
        System.out.println(sPrefix);
        lOut.add(sPrefix);
    } else {
        for (int i=0; i<sInput.length; i++) {
            combineArray(lOut, sPrefix.concat(sInput[i]), ArrayUtils.removeElement(sInput, sInput[i]), iLength);
        }
    }
} 
```

然后，您可以有一个包装方法来创建`new ArrayList<String>`，将其传递给上述方法，然后返回它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T20:01:52.020

你可以有一个`ArrayList<String>`并将所有字符串添加到它..然后你可以返回这个 ArrayList..

```
List<String> listString = new ArrayList<>();
private void combineArray(String sPrefix, String[] sInput, int iLength) {
    if (iLength == sPrefix.length()) {
        listString.add(sPrefix);
        //This value should be returned and concatenated:
        System.out.println(sPrefix);
    } else {
        for (int i=0; i<sInput.length; i++) {
            combineArray(sPrefix.concat(sInput[i]), ArrayUtils.removeElement(sInput, sInput[i]), iLength);
        }
    }
    return listString;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-27T20:03:32.490

继续附加到相同的输出..像这样：

```
private String combineArray(String sPrefix, String[] sInput, int iLength, String output) {
    if (iLength == sPrefix.length()) {
        //This value should be returned and concatenated:
        System.out.println(sPrefix);
        output = output+"|+sPrefix;
        return output;
    } else {
        for (int i=0; i<sInput.length; i++) {
            output = combineArray(sPrefix.concat(sInput[i]), ArrayUtils.removeElement(sInput, sInput[i]), iLength, output);
        }
    }
} 
```

一旦基本概念有效，您也可以使用 ListArray 而不是 String。

# sql - 可以在同一个数据表上显示具有空 ID 和非空 id 的数据的 SQL 查询？

> ID：12629128
> 
> 赞同：2
> 
> 时间：2012-09-27T19:58:01.250
> 
> 标签：sql, select, join, null

你好我有一个问题在这里...

我先给你看我的桌子...

```
[Vendedores](
    [IdVendedor] [int] IDENTITY(1,1) NOT NULL,
    [IdGrupo] [int] NULL,
    [IdInfoContacto] [int] NULL,
    [ApellidoPaterno] [varchar](30) NULL,
    [ApellidoMaterno] [varchar](30) NULL,
    [Nombre] [varchar](35) NULL,
    [Estado] [varchar](10) NULL,
 CONSTRAINT [PK_Vendedores] PRIMARY KEY CLUSTERED 

[Clientes](
    [IdCliente] [int] IDENTITY(1,1) NOT NULL,
    [IdGrupo] [int] NULL,
    [IdVendedor] [int] NULL,
    [IdDireccion] [int] NULL,
    [IdInfoContacto] [int] NULL,
    [FechaAlta] [date] NULL,
    [ApellidoPaterno] [varchar](30) NULL,
    [ApellidoMaterno] [varchar](30) NULL,
    [Nombre] [varchar](40) NULL,
    [Empresa] [text] NULL,
    [Estado] [varchar](20) NULL,
    [Estatus] [varchar](20) NULL,
 CONSTRAINT [PK_Clientes] PRIMARY KEY CLUSTERED 

[dbo].[Mensajes](
    [IdMensaje] [int] IDENTITY(1,1) NOT NULL,
    [IdCliente] [int] NULL,
    [IdVendedor] [int] NULL,
    [CorreoRemitente] [varchar](100) NULL,
    [CorreoCliente] [varchar](100) NULL,
    [CorreosAdicionales] [varchar](max) NULL,
    [Tema] [varchar](100) NULL,
    [Mensaje] [varchar](max) NULL,
    [Fecha] [date] NULL,
    [Hora] [time](5) NULL,
 CONSTRAINT [PK_Mensajes] PRIMARY KEY CLUSTERED 

[Archivos](
    [IdArchivo] [int] IDENTITY(1,1) NOT NULL,
    [IdMensaje] [int] NULL,
    [Nombre] [varchar](max) NULL,
    [Ubicacion] [varchar](50) NULL,
 CONSTRAINT [PK_Archivos] PRIMARY KEY CLUSTERED 
```

在我正在开发的系统中有两种发送消息的方法......：

第一个是，您选择一个客户端，当发送消息时，客户端的 ID (IdCliente) 从 Clientes 表中获取并插入到 Mensajes 表的新行中。这样，当您要查看所有发送的消息时，您可以清楚地看到发送到哪个客户端。

第二个将是免费的，您可以发送给任何您想要的人，您不必选择客户。因此，当您注册新消息时，IdCliente 列将为空。

现在有一些注意事项：供应商是发送消息的卖家或用户，Archivos 是指文件，如果您想附加文件，对于每个文件，将在 Archivos 中插入一个新行，每个都带有同样的IdMensaje。

目前，我有一个查询，允许我查看我的所有消息（与客户端），并显示该消息附加了多少文件。这里是：

```
SELECT (Clientes.ApellidoPaterno + ' ' + Clientes.ApellidoMaterno + ' ' + Clientes.Nombre) AS Cliente, Mensajes.* FROM (SELECT Mensajes.IdMensaje, Mensajes.IdCliente, Mensajes.IdVendedor, Mensajes.CorreoRemitente, Mensajes.CorreoCliente, Mensajes.CorreosAdicionales, Mensajes.Tema, Mensajes.Mensaje, Mensajes.Fecha, Mensajes.Hora, COUNT(Archivos.IdArchivo) AS Archivos FROM Mensajes LEFT OUTER JOIN Archivos ON Mensajes.IdMensaje = Archivos.IdMensaje GROUP BY Mensajes.IdMensaje, Mensajes.IdCliente, Mensajes.IdVendedor, Mensajes.CorreoRemitente, Mensajes.CorreoCliente, Mensajes.CorreosAdicionales, Mensajes.Tema, Mensajes.Mensaje, Mensajes.Fecha, Mensajes.Hora) AS Mensajes JOIN Clientes ON Clientes.IdCliente = Mensajes.IdCliente ORDER BY Mensajes.Fecha DESC, Mensajes.Hora DESC 
```

"(Clientes.ApellidoPaterno + ' ' + Clientes.ApellidoMaterno + ' ' + Clientes.Nombre) AS Cliente" 显示客户端全名

但是，现在我想要一个查询，其中显示与上面相同的信息......加上以下......

*   IdCliente = null 的消息
*   如果 IdCliente = null 那么我上面提到的 Cliente 列将是“”（空格）

如果我需要更具体，请让我知道我必须在哪一部分提供更多信息。

我希望你们能帮助我提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:06:18.527

首先，将您的 JOIN 更改为 LEFT JOIN：

```
LEFT JOIN Clientes ON Clientes.IdCliente = Mensajes.IdCliente 
```

这将允许没有关联 IdCliente 的消息保留。要获得所需的空白空间，请使用 COALESCE：

```
COALESCE(Clientes.ApellidoPaterno + ' ' + Clientes.ApellidoMaterno + ' ' + Clientes.Nombre, '') AS Cliente 
```

# python - 用一个小的 Python 脚本创建一个 exe

> ID：12629133
> 
> 赞同：1
> 
> 时间：2012-09-27T19:58:38.353
> 
> 标签：python

我使用 Python 2.7 创建了一个小脚本。

使用 py2exe 我一直在尝试使用[本教程](http://www.py2exe.org/index.cgi/Tutorial)创建一个可执行文件：

我能够创建名为的 exe 文件`sdf.exe`

我在 sdf.exe 的目录中有所有必要的库。

从命令行运行 sdf.exe 时，我没有收到任何错误和消息；但是该程序并没有做它打算做的事情，即创建一个名为`output.csv`.

**当我运行`sdf.py`它时，它没有问题；但是，运行`sdf.exe`什么也不做，也不返回任何错误。**

我错过了什么？太感谢了！

这是完整的代码：

```
import csv

thefile = []
output = []

def dowork():
    global thefile
    sourceFile='e.csv'
    thefile=ReadFile(sourceFile)
    CleanFile(sourceFile)    
    ProcessFile()
    AddHeader()
    WriteFile()

def ReadFile(filename):
    return list(csv.reader(open(filename, 'rb'), delimiter=',', quotechar='"'))[1:]

def CleanFile(sourceFile):
    global thefile
    iBalance=8
    iAging=7
    thefiletmp=[]
    for i, line in enumerate(thefile):
        if line[2]=='':
            del thefile[i]
        else:
            if thefile[i][iAging]=='':
                thefile[i][iAging]='0'
            thefiletmp.append(line[4:])
    thefile=thefiletmp

def ProcessFile():
    global thefile
    iCompany=1
    iNum=0
    iDate=2
    iAging=3
    iBalance=4
    COMPANIES=GetDistinctValues(1)
    mytemparray=[]
    mytempfile=[]
    TotalEachCustomer=0
    for company in COMPANIES:
        for line in thefile:
            if line[iCompany]==company:
                mytemparray.append(line[iCompany])
                mytemparray.append(line[iNum])
                mytemparray.append(line[iDate])
                iAgingCell=int(line[iAging])
                line[iBalance]=line[iBalance].replace(',','')
                if iAgingCell in range(0,31):
                    mytemparray.append(line[iBalance])
                    mytemparray.append('0')
                    mytemparray.append('0')
                    mytemparray.append('0')
                if iAgingCell  in range(31,61):
                    mytemparray.append('0')
                    mytemparray.append(line[iBalance])
                    mytemparray.append('0')
                    mytemparray.append('0')
                if iAgingCell  in range(61,91):
                    mytemparray.append('0')
                    mytemparray.append('0')
                    mytemparray.append(line[iBalance])
                    mytemparray.append('0')
                if iAgingCell >90:
                    mytemparray.append('0')
                    mytemparray.append('0')
                    mytemparray.append('0')
                    mytemparray.append(line[iBalance])
                TotalEachCustomer+=float(line[iBalance])
                mytemparray.append(line[iBalance])
                mytempfile.append(mytemparray)
                mytemparray=[]
        mytempfile.append(['','','','','','','',''])
        mytempfile.append([company+ " Total",'','','','','','',TotalEachCustomer])
        mytempfile.append(['','','','','','','',''])
        TotalEachCustomer=0
    thefile=mytempfile

def AddHeader():
    global thefile
    thefile[:0]=[['Account Name', 'Num','Date', '0-30', '31-60', '61-90', '91 Plus','Total']]

def WriteFile():
    global thefile
    out_file = open("output.csv", "wb")
    writer = csv.writer(out_file)
    for line in thefile:
        writer.writerow(line)
    out_file.close()

def GetDistinctValues(theColumn):
    return sorted(list(set(line[theColumn] for line in thefile))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T21:56:40.563

我很惊讶它完全适用于非编译版本。我看不到在哪里`dowork()`调用。

我认为你只需要添加`dowork()`到 scipt 的底部

# android - Phonegap Android 文件传输错误代码 3

> ID：12629135
> 
> 赞同：5
> 
> 时间：2012-09-27T19:58:44.240
> 
> 标签：android, cordova, upload

我正在开发适用于 Android 的移动应用程序，它使用 Dave Johnson 的 Facebook Connect 插件 ( [https://github.com/davejohnson/phoneg...)、Camera](https://github.com/davejohnson/phonegap-plugin-facebook-connect)和 FileTransfer。基本上，用户点击一个按钮来拍照（手机相机启动，用户拍照），然后这张照片被上传到服务器。问题是第一次一切都很好，但是当我再次按下按钮拍摄第二张照片时，照片无法上传到服务器，返回的错误来自 FileTransfer - 错误代码 3。

我设置了 options.chunkedMode = false; 这没有帮助。

我知道这是一个连接错误，我在 /res/xml/cordova.xml 文件中将要上传图片的域列入白名单。我在网上搜索了很多以找到一个有效的解决方案，还有其他人抱怨这个，但没有提供有效的解决方案。我正在使用 Cordova 1.8.1（我还使用 1.8.0, 1.7.0, 1.6.1, 1.5.0 进行了测试）。我使用较新版本的 Phonegap 进行了测试，例如 1.9.0，但无法构建项目 - facebook 插件不适用于此版本的 Phonegap。我正在使用 Emulator Android 4.1 (API 16) 进行测试。在查看详细日志时，我尝试了不同的方法使其工作，但我无法使其工作。我正在寻找解决方案，因为它非常重要，请帮我解决这个问题。预先感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:03:28.300

您可以尝试以下任一方法：

在您的 AndroidManifest.xml 文件的标签中设置 android:debuggable="true"。

设置而不是像评论部分中建议的那样仅设置 *，如下所示：

```
<!-- <access origin="https://example.com" /> allow any secure requests to example.com -->
<!-- <access origin="https://example.com" subdomains="true" /> such as above, but including subdomains, such as www -->
<!-- <access origin=".*"/> Allow all domains, suggested development use only --> 
```

从; [https://stackoverflow.com/a/12011782/610880](https://stackoverflow.com/a/12011782/610880)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T03:45:56.967

这是 phonegap 库中的一个未修复的错误，因为没有错误修复，我必须通过我的工作来解决它（基本上在每次备用故障时重新上传）：

```
ft.upload(path,
          encodeURI("http://yourdomain.com/upload.php"),
            function(result) {
                alert("Uploaded");
            },
            function(error) {
        ft.upload(path,
        encodeURI("http://yourdomain.com/upload.php"),
        function(result) {
                alert("Uploaded");                  
        },
        function(error) {
            alert("Error uploading image");
        },
        { fileName: name, fileKey: "file", mimeType: "image/jpeg", chunkedMode: false }, true);     
                },
                { fileName: name, fileKey: "file", mimeType: "image/jpeg", chunkedMode: false }, true); 
```

# android - Android Png 覆盖问题

> ID：12629140
> 
> 赞同：1
> 
> 时间：2012-09-27T19:58:58.293
> 
> 标签：android, google-maps, png, overlay

```
public PNGOverlay(Bitmap original, GeoPoint topLeftGeoPoint, GeoPoint bottomRightGeoPoint) {
    this.original = Bitmap.createScaledBitmap(original, original.getWidth(), original.getHeight(), true);

    ...
    topGeoPoint = topLeftGeoPoint;
    bottomGeoPoint = bottomRightGeoPoint;
}

@Override
public void draw(Canvas canvas, MapView mapView, boolean shadow) {
        super.draw(canvas, mapView, false);

        Projection projection = mapView.getProjection();

        Point leftTop = new Point();
        Point rightTop = new Point();
        Point rightBottom = new Point();
        Point leftBottom = new Point();

        projection.toPixels(topGeoPoint, leftTop);
        projection.toPixels(new GeoPoint(topGeoPoint.getLatitudeE6(), bottomGeoPoint.getLongitudeE6()), rightTop);
        projection.toPixels(bottomGeoPoint, rightBottom);
        projection.toPixels(new GeoPoint(bottomGeoPoint.getLatitudeE6(), topGeoPoint.getLongitudeE6()), leftBottom);

        ....

        Paint paint = new Paint();
        paint.setFilterBitmap(true);
        paint.setAntiAlias(true);

        canvas.drawBitmap(original, null, new Rect(leftTop.x, leftTop.y, rightBottom.x, rightBottom.y), paint);

       ....
} 
```

我对这段代码有疑问。当我在 mapView 上绘制 png 时，png 图像显示在指南针和 GPS 位置指示器上？任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:22:03.683

从您的问题很难猜出您的问题到底是什么，但是如果您的意思是 PNG 被绘制在其他叠加层上并且您希望它位于它们之下，您可以通过首先将 PNG 叠加层添加到 mapview 来解决它。

MapView 按照您添加它们的顺序从每个叠加层调用 draw 方法：

```
mapview.getoverlays().add(overlay1);
mapview.getoverlays().add(overlay2); 
```

这导致overlay2 被绘制在overlay1 上。

```
mapview.getoverlays().add(overlay2);
mapview.getoverlays().add(overlay1); 
```

这导致在overlay2 上绘制overlay1。

祝你好运。

# asp.net-mvc - 如何强制 ASP.NET Web API 始终返回 JSON？

> ID：12629144
> 
> 赞同：107
> 
> 时间：2012-09-27T19:59:10.327
> 
> 标签：asp.net-mvc, asp.net-web-api

ASP.NET Web API 默认进行内容协商 - 将根据`Accept`标头返回 XML 或 JSON 或其他类型。我不需要/想要这个，有没有办法（比如属性或其他东西）告诉 Web API 总是返回 JSON？

* * *

## 回答 #1

> 赞同：172
> 
> 时间：2012-09-27T20:13:17.173

清除所有格式化程序并重新添加 Json 格式化程序。

```
GlobalConfiguration.Configuration.Formatters.Clear();
GlobalConfiguration.Configuration.Formatters.Add(new JsonMediaTypeFormatter()); 
```

**编辑**

我把它加到`Global.asax`里面了`Application_Start()`。

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2013-08-09T11:23:47.760

[在 ASP.NET Web API 中仅支持 JSON –**正确的方式**](http://www.strathweb.com/2013/06/supporting-only-json-in-asp-net-web-api-the-right-way/)

将 IContentNegotiator 替换为 JsonContentNegotiator：

```
var jsonFormatter = new JsonMediaTypeFormatter();
//optional: set serializer settings here
config.Services.Replace(typeof(IContentNegotiator), new JsonContentNegotiator(jsonFormatter)); 
```

JsonContentNegotiator 实现：

```
public class JsonContentNegotiator : IContentNegotiator
{
    private readonly JsonMediaTypeFormatter _jsonFormatter;

    public JsonContentNegotiator(JsonMediaTypeFormatter formatter) 
    {
        _jsonFormatter = formatter;    
    }

    public ContentNegotiationResult Negotiate(
            Type type, 
            HttpRequestMessage request, 
            IEnumerable<MediaTypeFormatter> formatters)
    {
        return new ContentNegotiationResult(
            _jsonFormatter, 
            new MediaTypeHeaderValue("application/json"));
    }
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-05-01T18:45:07.683

Philip W 有正确的答案，但为了清晰和完整的工作解决方案，编辑您的 Global.asax.cs 文件如下所示：（注意我必须将参考 System.Net.Http.Formatting 添加到库存生成的文件中）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net.Http.Formatting;
using System.Web;
using System.Web.Http;
using System.Web.Mvc;
using System.Web.Optimization;
using System.Web.Routing;

namespace BoomInteractive.TrainerCentral.Server {
    // Note: For instructions on enabling IIS6 or IIS7 classic mode, 
    // visit http://go.microsoft.com/?LinkId=9394801

    public class WebApiApplication : System.Web.HttpApplication {
        protected void Application_Start() {
            AreaRegistration.RegisterAllAreas();

            WebApiConfig.Register(GlobalConfiguration.Configuration);
            FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
            RouteConfig.RegisterRoutes(RouteTable.Routes);
            BundleConfig.RegisterBundles(BundleTable.Bundles);

            //Force JSON responses on all requests
            GlobalConfiguration.Configuration.Formatters.Clear();
            GlobalConfiguration.Configuration.Formatters.Add(new JsonMediaTypeFormatter());
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-01-17T00:00:51.080

```
GlobalConfiguration.Configuration.Formatters.XmlFormatter.SupportedMediaTypes.Clear(); 
```

这将清除 XML 格式化程序，因此默认为 JSON 格式。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-03-26T18:23:55.190

受到 Dmitry Pavlov 出色答案的启发，我对其稍作修改，以便可以插入任何我想强制执行的格式化程序。

归功于德米特里。

```
/// <summary>
/// A ContentNegotiator implementation that does not negotiate. Inspired by the film Taken.
/// </summary>
internal sealed class LiamNeesonContentNegotiator : IContentNegotiator
{
    private readonly MediaTypeFormatter _formatter;
    private readonly string _mimeTypeId;

    public LiamNeesonContentNegotiator(MediaTypeFormatter formatter, string mimeTypeId)
    {
        if (formatter == null)
            throw new ArgumentNullException("formatter");

        if (String.IsNullOrWhiteSpace(mimeTypeId))
            throw new ArgumentException("Mime type identifier string is null or whitespace.");

        _formatter = formatter;
        _mimeTypeId = mimeTypeId.Trim();
    }

    public ContentNegotiationResult Negotiate(Type type, HttpRequestMessage request, IEnumerable<MediaTypeFormatter> formatters)
    {
        return new ContentNegotiationResult(_formatter, new MediaTypeHeaderValue(_mimeTypeId));
    }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-07-24T08:40:29.747

这设置了正确的标题。显得优雅一些。

```
public JsonResult<string> TestMethod() 
{
return Json("your string or object");
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-10-30T14:11:24.143

如果您只想对一种方法执行此操作，则将您的方法声明为返回`HttpResponseMessage`而不是`IEnumerable<Whatever>`执行：

```
 public HttpResponseMessage GetAllWhatever()
    {
        return Request.CreateResponse(HttpStatusCode.OK, new List<Whatever>(), Configuration.Formatters.JsonFormatter);
    } 
```

这段代码对于单元测试来说很痛苦，但也可以这样：

```
 sut = new WhateverController() { Configuration = new HttpConfiguration() };
    sut.Configuration.Formatters.Add(new Mock<JsonMediaTypeFormatter>().Object);
    sut.Request = new HttpRequestMessage(); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-09-26T11:10:41.187

对于那些使用 OWIN

```
GlobalConfiguration.Configuration.Formatters.Clear();
GlobalConfiguration.Configuration.Formatters.Add(new JsonMediaTypeFormatter()); 
```

变为（在 Startup.cs 中）：

```
 public void Configuration(IAppBuilder app)
        {
            OwinConfiguration = new HttpConfiguration();
            ConfigureOAuth(app);

            OwinConfiguration.Formatters.Clear();
            OwinConfiguration.Formatters.Add(new DynamicJsonMediaTypeFormatter());

            [...]
        } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-04-12T08:26:41.693

哟可以在 WebApiConfig.cs 中使用：

```
config.Formatters.JsonFormatter.SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/html")); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-04-07T20:58:26.293

```
 public System.Web.Http.Results.JsonResult<MeineObjekt> Get()
    {
        return Json(new MeineObjekt()
        {
            Cod = "C4666",               
            Payment = 10.0m,
            isEnough = false
        });
    } 
```

# c - 重复符号和应用程序崩溃

> ID：12629145
> 
> 赞同：3
> 
> 时间：2012-09-27T19:59:14.520
> 
> 标签：c, warnings, aix, nm, duplicate-symbol

我正在 AIX 上编译一个程序。它编译成功，但给出以下警告：

```
ld: 0711-224 WARNING: Duplicate symbol: .basename
ld: 0711-345 Use the -bloadmap or -bnoquiet option to obtain more information. 
```

我试图在我的“common.o”文件中找到这个符号。

```
nm -X64 -f common.o | fgrep '.basename'

.basename            T        3776         120 
```

但是当在可执行文件上找到这个符号时，我发现以下内容：

```
nm -X64 CCF | fgrep '.basename'
.basename            T  4295089984         120
.basename            T  4295174672
.basename            t  4295174672          40 
```

*   我可以显示包含此符号的库名称吗？

*   这个符号是否出现在我的源文件中？（可能听起来很傻，但我真的不知道）

> 我找到了这个问题的答案，它可以在源头中追踪。

*   我应该采取哪些步骤来删除此警告？这个重复的符号也会导致应用程序崩溃吗？就我而言，它正在崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:35:40.057

根据[手册页](http://www.kernel.org/doc/man-pages/online/pages/man3/basename.3.html)，有两个版本`basename()`，一个 POSIX 和一个 GNU，看起来你正在链接它们。根据您的需要，您将需要选择一个并抑制另一个。手册页解释了如何。

因为它们的行为不同，为其中一个编译的代码可能会在链接器/加载器将其绑定到另一个时崩溃。如果您可以选择编译器，选择非 gcc 可能会有所帮助。

# sql - 如何为选择/更新/删除语句创建存储过程

> ID：12629146
> 
> 赞同：-6
> 
> 时间：2012-09-27T19:59:16.517
> 
> 标签：sql, database, stored-procedures

我有这个要转换为存储过程的 sql 语句。我怎样才能做到这一点？

```
select a.name, a.lastname, from myTable where b.name= a.lastname 
```

谢谢

更新这是对的人吗

```
CREATE PROCEDURE myProcedure
AS
BEGIN
SELECT [a.name],
       [a.lastname]
FROM [myTable]
WHERE [b.name] = a.lastname
END 
```

这是我真正正在研究的代码之一

sql语句

```
SELECT RTRIM(l.Lab1) + '/' + RTRIM(l.LabR) AS Lab, meta.Title,ls.[ID],ls.[surveyID], ls.[specialistID],ls.[isCompleted] FROM [MyDIM].[dbo].[lsLabSurvey] ls JOIN [MYDIM].[dbo].[dimDocMetaInfo] meta ON meta.id = ls.[surveyID] and specialistID = @PID and isCompleted=1 JOIN MyDatabase.DBO.PID_Table l ON ls.ID = l.ID 
```

和我尝试的存储过程

```
CREATE PROCEDURE PROCD1
AS
BEGIN
SELECT RTRIM(l.Lab1) + '/' + RTRIM(l.LabR) 
AS Lab, 
   meta.Title,
   la.[ID],
   ls.[surveyID],
   ls.[specialistID],
   ls.[isCompleted]
FROM [MyDIM].[dbo].[lsLabSurvey] ls 
JOIN [MyDIM].[dbo].[dimDocMetaInfo] meta 
ON meta.id = ls.[surveyID] 
and specialistID = @PID 
and isCompleted=1 
JOIN MyDatabase.DBO.PID_Table l 
ON ls.ID = l.ID 
```

结尾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:02:50.080

这真的没那么难。你已经完成了 95% 的工作。以下是针对 SQL Server 的：

```
CREATE PROCEDURE SomeProcedureName  
AS  
select a.name, a.lastname, from myTable where b.name= a.lastname 
```

* * *

我强烈推荐这本书：[http ://www.barnesandnoble.com/w/sams-teach-yourself-sql-in-10-minutes-ben-forta/1100070678](http://www.barnesandnoble.com/w/sams-teach-yourself-sql-in-10-minutes-ben-forta/1100070678)

它涵盖了基本的 SQL 语法，并给出了 SQL 不同“方言”的示例。每个 RDBMS 执行类似功能的语法略有不同，您需要了解您正在使用的数据库的方言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T22:46:18.520

正如大卫所说，你快到了，但只需要稍作改动。

1.  我想@Pid 是一个参数，如果是这样，存储过程定义中缺少它。
2.  （和specialistId=@Pid 和iscompleted =1）形成Where 子句（过滤器表达式）。所以程序是这样的

`

```
CREATE PROCEDURE PROCD1 (@PID INT )
AS 
    BEGIN
        SELECT  CONVERT(VARCHAR,RTRIM(l.Lab1)) + '/' + CONVERT(VARCHAR,RTRIM(l.LabR)) AS Lab ,
                meta.Title ,
                la.[ID] ,
                ls.[surveyID] ,
                ls.[specialistID] ,
                ls.[isCompleted]
        FROM    [MyDIM].[dbo].[lsLabSurvey] ls
                INNER JOIN [MyDIM].[dbo].[dimDocMetaInfo] meta ON meta.id = ls.[surveyID]
                INNER JOIN MyDatabase.DBO.PID_Table l ON ls.ID = l.ID
        WHERE   ls.specialistID = @PID
                AND ls.isCompleted = 1
    END 
` 
```

希望这可以帮助。

# html - html元素在chrome的第一页加载时意外不可见

> ID：12629147
> 
> 赞同：4
> 
> 时间：2012-09-27T19:59:17.237
> 
> 标签：html, css

我正在[http://asbjorn.org/ny/](http://asbjorn.org/ny/)上处理我的新在线作品集，我遇到了最奇怪的问题！

每次您第一次打开页面时，幻灯片的下一个和上一个按钮都不会出现。如果我打开检查器，它们会立即弹出，并且在重新加载页面时也会出现。

它们是非常标准的 html 元素，不是动态添加的，所以我不知道为什么会发生这种情况！当然，我不能让网站访问者重新加载页面只是为了看到他们。：/

我真的希望有人能帮助我！:)

更新：似乎这是一个仅限 chrome 的问题。对我来说，它在 Win7 和 OSX 上的 chrome 中始终如一地发生。我的一些朋友也有同样的问题（可能在 osx 上的 chrome 中）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T20:22:06.847

所以我会尝试回答。当我在 Chrome 22 中看到问题并打开检查器时，我注意到div`#previousLink`和`#nextLink`div`width`在损坏状态下的值为 0。尝试在 CSS 中为这些设置显式宽度，或使嵌套图像使用`display: block`.

```
#previousLink { width: 31px; }
#nextLink { width: 37px; } 
```

或者

```
#previousLink img,
#nextLink img { display: block; } 
```

我认为这些内联项目和您的`overflow: hidden`规则的组合正在咬您。我*认为*。这是一个棘手的错误！

# web-services - Symfony2 网站和 RESTful API

> ID：12629150
> 
> 赞同：8
> 
> 时间：2012-09-27T19:59:26.423
> 
> 标签：web-services, rest, symfony

我目前正在开发一个 Web 应用程序，该应用程序严重依赖移动和桌面客户端向 Web 服务器咨询信息。这可以很好地完成，使 RESTful API 可用于处理此问题。所以我的想法是让应用程序充当“平台”，在幕后处理所有真实的业务逻辑和数据库信息。

我的计划是让平台使用 symfony2 和 OAuth 2.0 身份验证机制，并结合 RESTful Web 服务。

现在我真正的困境出现在网站组件上。理想情况下，我想将该网站视为另一个向该 REST 平台询问信息的客户端，并将其与平台本身完全分开。

为了更清楚一点，假设我们正在使用这种架构创建一个博客，所以会有一个“平台/后端”，它提供一个休息服务来列出文章，例如：/articles/5。这在后端，使用 symfony2/doctrine 意味着应用程序有一个 Article 模型类，这些可以从数据库中请求。一个简单的控制器查询文章编号 5 并以 JSON 格式返回所有信息。

现在这个例子中的网站，可以做简单的事情，也有一个文章实体，直接查询数据库，但我认为如果它可以通过它的 REST api 与平台对话并使用该信息作为实体的“后端”。

所以真正的问题是，有没有使用 symfony2 支持这种设计？实体是否依赖 REST api 进行 CRUD 操作？或者我最好将平台/网站变成一个单一的东西并与所有通用实体共享一个“CoreBundle”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:05:07.747

Symfony 中没有任何东西可以阻止你做你想做的事。

在客户端，您可以使用[Backbone.js](http://backbonejs.org/)或[Spine.js](http://spinejs.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-23T11:11:29.997

看看 FosRestBundle，它让你的 api 更容易创建： [https ://github.com/FriendsOfSymfony/FOSRestBundle/blob/master/Resources/doc/index.md](https://github.com/FriendsOfSymfony/FOSRestBundle/blob/master/Resources/doc/index.md)

# javascript - AngularJS指令包含范围=假？

> ID：12629151
> 
> 赞同：7
> 
> 时间：2012-09-27T19:59:29.080
> 
> 标签：javascript, html, binding, angularjs

如何使用 transclude 防止指令创建新范围？

这个[jsfiddle](http://jsfiddle.net/RHLzK/)由于带有红色边框的新范围，我无法绑定任何东西。

**html:**

```
<div ng-app="components">
    <input ng-model="var">
    <block>
        123
        <input ng-model="var">
    </block>
</div> 
```

**JavaScript：**

```
angular.module('components', []).directive('block',function(){
    return{
        scope:false,
        replace:true,
        restrict:"E",
        transclude:true,
        template:'<div class="block" ng-transclude></div>',
        link:function(scope, el, attrs, ctrl){

        }
    }
}); 
```

**CSS：**

```
.ng-scope{
  border:1px solid red;
    margin:10px;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T20:48:19.017

它实际上是此处所述的预期行为（ng-transclude 创建子范围）：[https](https://github.com/angular/angular.js/issues/1056) ://github.com/angular/angular.js/issues/1056 并在此处讨论：[https ://groups.google.com/forum /#!msg/angular/45jNmQucSCE/hL8x48-JfZIJ](https://groups.google.com/forum/#!msg/angular/45jNmQucSCE/hL8x48-JfZIJ)

您可以通过在范围内的对象（obj.var）上设置成员来解决此问题，就像在这个小提琴中一样：http: [//jsfiddle.net/rdarder/pnSNj/10/](http://jsfiddle.net/rdarder/pnSNj/10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-17T13:58:20.583

尽管 Angular 团队不建议这样做，但另一种解决方法是在嵌入部分中显式调用 $parent 范围：

```
<div ng-app="components">
    <input ng-model="var">
    <block>
        123
        <input ng-model="$parent.var">
    </block>
</div> 
```

# java - Java Spring MongoDB 删除

> ID：12629152
> 
> 赞同：3
> 
> 时间：2012-09-27T19:59:29.357
> 
> 标签：java, spring, mongodb

我正在使用 Java Spring MongoDB API。当我使用 MongoTemplate 并尝试删除一个对象时，它不会删除。我正在使用 Spring 3.0.6.REALEASE。我的代码如下所示：

豆类.xml

```
<mongo:mongo host=“localhost“ port=“27017“/>

<mongo:db-factory dbname=“database5“ mongo-ref=“mongo“/>

<bean id=“mongoTemplate“ class=“org.springframework.data.mongodb.core.MongoTemplate“&gt;
<constructor-arg name=“mongoDbFactory“ ref=“mongoDbFactory“/>
</bean>

@Document
public class Student {

@Id
private String id;
@Field
private int age;

public Student(int age) {
    this.age = age;
}

// getters and setters
} 
```

我通过 ApplicationContext 获取 mongoTemplate 并调用传递由 Id 和 age 填充的 Student 对象的 remove 方法，但它没有删除。

有任何想法吗？

```
Student student = new Student(5);
student.setId(“ “);
mongoTemplate.remove(student); 
```

其中Id是填写的Id。

没有例外，但是当找到这个 Id 时它仍然存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T20:57:26.317

尝试指定集合名称：

```
mongoTemplate.remove(student, "student"); 
```

或者您也可以尝试使用查询将其删除：

```
mongoTemplate.remove(new Query(Criteria.where("id").is(student.getId())), Student.class); 
```

此外，要获取有关正在发生的事情的更多信息，请使用 getLastError：

```
System.out.println(mongoTemplate.getDb().getLastError()); 
```

如果对象被删除，您将看到 n:1 如下所示：

```
{ "serverUsed" : "vmd-eumongoacct-002/172.20.15.15:27017" , **"n" : 1** , "lastOp" : { "$ts" : 1365111932 , "$inc" : 1} , "connectionId" : 305018 , "err" :  null  , "ok" : 1.0} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-27T18:08:48.623

尝试关注

1）确保您仅使用来自弹簧数据的注释类。因为，您没有提供完整的代码，所以我看不到您的导入。

```
import org.springframework.data.annotation.Id
import org.springframework.data.mongodb.core.mapping.Document 
```

2）尝试先保存对象并删除相同的对象。如果此测试有效，那么您的删除也将有效。

```
mongoTemplate.save(userObj);
System.out.println("saved user id:"+userObj.getId());
mongoTemplate.remove(userObj); 
```

# android - LayoutAnimationController 可以只为指定的 View 设置动画吗

> ID：12629159
> 
> 赞同：4
> 
> 时间：2012-09-27T20:00:03.200
> 
> 标签：android, layout-animation

是否有可能以这样的方式覆盖 Android ，只有我在 a 中指定的`LayoutAnimationController`某些 child才会动画？我的目标是根据当前状态选择任意一组子视图，并在完全相同的时间使用相同的动画为它们设置动画，然后在稍后选择不同的任意子视图集并执行相同的操作. 我希望能够持续执行此操作，直到完成运行。`View``ViewGroup``Activity``Activity`

到目前为止，我已经查看并取消了几个选项：

1.  单独调用`startAnimation(Animation)`特定的子视图，但不能保证它们将在完全相同的时间开始和结束，尤其是在任意集合中的视图数量很大的情况下。
2.  覆盖`LayoutAnimationController.getAnimationForView()`似乎是最简单的方法，但该方法是最终的，不能被覆盖。

一段时间以来，我一直在为此挠头，并认为我会给 Stack Overflow 一个机会。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T08:32:11.937

我无法找到改变 Android 的方法`LayoutAnimationController`，但确实想出了一个简单的解决方案来满足我的需求。我创建了一个`View`子类，如果我愿意，它可以选择性地忽略运行动画的调用。

```
public class AnimationAverseView extends View {

    private boolean mIsAnimatable = true;

    public void setAnimatible(boolean isAnimatable) {
        if (!isAnimatable) {
            clearAnimation();
        }
        mIsAnimatable = isAnimatable;
    }

    @Override
    public void startAnimation(Animation animation) {
        if (mIsAnimatable) {
            super.startAnimation(animation);
        }
    }
} 
```

我不担心任何其他可能的动画相关方法，因为我只`View`通过`LayoutAnimationController`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-02T15:51:43.907

我看到这个问题是在 7 年零 6 个月前提出的，但今天我自己也遇到了，创建自定义子视图对我来说似乎有点麻烦。

我发现使用自定义外部布局似乎可以解决问题，您必须重写 attachLayoutAnimationParameters。对于属于布局动画的每个子视图都会调用此方法，并且在 ViewGroup 中实际触发布局动画时调用此方法。它将 AnimationLayoutParams 附加到孩子，在这种情况下它是动画的。所以简单地说，如果你不给一个孩子附加任何 LayoutAnimation 参数，它就不会成为布局动画的一部分。

```
class CustomLayout @JvmOverloads constructor(
    context: Context, attrs: AttributeSet? = null, defStyleAttr: Int = 0
) : ConstraintLayout(context, attrs, defStyleAttr) {

    private val excludeForLayoutAnimation by lazy {
        listOfNotNull(findViewById(R.id.text), findViewById(R.id.fab))
    }

    override fun attachLayoutAnimationParameters(
        child: View?,
        params: ViewGroup.LayoutParams?,
        index: Int,
        count: Int
    ) {
        if (child !in excludeForLayoutAnimation) {
            super.attachLayoutAnimationParameters(child, params, index, count)
        }
    }

} 
```

如果您现在只是在外部自定义视图上调用它，它将排除您指定的子视图：

```
customView?.apply {
    layoutAnimation = AnimationUtils.loadLayoutAnimation(
        context,
        R.anim.layout_animation_fade_in
    )
    scheduleLayoutAnimation() // or maybe startLayoutAnimation()
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-03T03:55:13.753

我无法对已接受的答案添加评论，因此请在此处添加一些附加信息。happydude（2 月 17 日）的评论对我来说也是正确的。我有一个`FrameLayout`作为我的`ListView`标题的最外层视图，我需要重写该`setAnimation()`方法以防止标题与列表的其余部分一起动画。因此，您应该检查您可能需要覆盖哪些其他动画方法。

# c++ - 模板化类的模板化成员编译失败。VC++ 工作，但 G++ 失败

> ID：12629164
> 
> 赞同：2
> 
> 时间：2012-09-27T20:00:24.353
> 
> 标签：c++

以下代码在 Visual C++ 2010 下编译良好，但在 Android NDK r8b 的 GCC 4.6 下编译不正常。

```
template<typename A>
struct foo
{
    template<typename B>
    B method()
    {
        return B();
    }
};

template<typename A>
struct bar
{
    bar()
    {
        f_.method<int>(); // error here
    }

private:
    foo<A> f_;
}; 
```

GCC给出的错误是

```
error : expected primary-expression before 'int'
error : expected ';' before 'int' 
```

为标记线。对于我的生活，我无法弄清楚什么是错的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T20:03:32.627

GCC 是正确的，因为`f_`它的类型`foo<A>`取决于模板参数`A`，您需要`method`使用`template`关键字限定调用：

```
f_.template method<int>();  // This will work 
```

# ms-access - 使用 Microsoft Access 在一个处理程序中捕获所有单击事件

> ID：12629167
> 
> 赞同：1
> 
> 时间：2012-09-27T20:00:50.273
> 
> 标签：ms-access, office-2007

我正在制作一个屏幕自定义键盘，我想知道如何将所有点击事件发送到一个方法并让它根据控件的名称确定要做什么。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:40:59.383

您可以将 On Click 行设置为函数的名称，例如 =MyFunction()

![点击功能](../Images/ba9d6715e8e403ccf51fab67523b49ee.png)

然后：

```
Function MyFunction()
    'The button that was clicked
    Debug.Print Screen.ActiveControl.Name
End Function 
```

# iphone - 例如消息的接收器类型是前向声明 popToRootViewController

> ID：12629169
> 
> 赞同：2
> 
> 时间：2012-09-27T20:01:01.540
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我已经看到有关此错误的类似问题。但我不确定它在这种情况下如何应用

这是错误

```
Receiver type for instance message is a forward declaration 
```

这是我的代码。

```
MyAppDelegate *appDel = (MyAppDelegate*) 
    [[UIApplication sharedApplication] delegate];
[appDel.secondTabNavController popToRootViewControllerAnimated:NO]; 
```

这里有什么问题，我该如何解决？

我澄清了我对这段代码的使用是正确的，因为我的标签控制器中的每个标签都有不同的导航控制器。我这样做是因为我在每个控制器中推送视图。 [几个 UINavigation 控制器，每个选项卡一个，作为我的应用程序委托的出口？](https://stackoverflow.com/questions/12609424/several-uinavigation-controllers-one-for-each-tab-as-an-outlets-from-my-app-de)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T21:13:03.120

尝试导入 appdelegate.h，它应该可以正常工作。

实现这一点的更好方法是使用通知。1\. 达到条件时发送通知 2\. 在适当的视图控制器中处理通知。（您也可以在应用程序委托中处理它，但这不是一种干净的方式）

# iphone - Menu Path 2.0 示例，去掉 autorelease，Apple Mach-O Linker 出现

> ID：12629173
> 
> 赞同：0
> 
> 时间：2012-09-27T20:01:20.353
> 
> 标签：iphone, xcode, menu

我已经下载了菜单路径 2.0 示例 [https://github.com/yourabi/PathMenuExample/downloads](https://github.com/yourabi/PathMenuExample/downloads) 当我将此代码放在我的新项目中并强迫我删除我所做的自动发布时。接下来，当我编译它时。我收到 Apple Mach-O 链接器错误：

“_OBJC_CLASS_$_ExpandableNavigation”，引用自：ViewController.o 中的 objc-class-ref ld：未找到架构 armv7 clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

我不明白发生了什么事。我已经添加了几乎所有 CoreData 并尽量避免使用苹果 Mach-o 链接器。当我删除整个“ExpandableNavitgation”代码时。它工作正常。但我的应用程序需要这个。没有菜单路径 2.0 就不好看

```
 - (void)viewDidLoad
    {

    [super viewDidLoad];
    /////////////////////////////////////////////////
    // initialize ExpandableNavigation object with an array of buttons.
    NSArray* buttons = [NSArray arrayWithObjects:button1, button2, button3, button4, button5, nil];

    ////////////////////////////////////////////////
    // This doesn't work. Xcode forced me to remove autorelease.
    // APPLE Mach-O Linker.
    //  Code Removed dated: Sep 25, 2012
    //  Test: Error
    //
    //
    //self.navigation = [[[ExpandableNavigation alloc] initWithMenuItems:buttons mainButton:self.main radius:52.0] autorelease];

    ////////////////////////////////////////////////
    // Remove AutoRelease. This is problem I'm having.
    // It works fine if you remove NSArray and This.
    // Code Added dated: Sep 27, 2012
    // Test: APPLE MacH-O-Linker.
    //
    //
    self.navigation = [[ExpandableNavigation alloc] initWithMenuItems:buttons mainButton:self.main radius:52.0];

    .... 
```

我不知道如何解决这个问题。我很困惑并坚持使用 XCode 4.5。

# c# - 如何删除 Windows 模拟器中的调试字符串？

> ID：12629174
> 
> 赞同：4
> 
> 时间：2012-09-27T20:01:20.353
> 
> 标签：c#, visual-studio, windows-phone-7

> **可能重复：**
> [WP7 RTM 模拟器在右侧显示帧计数器和 dx 信息 - 这是默认值吗？](https://stackoverflow.com/questions/3840969/wp7-rtm-emulator-is-displaying-the-framecounter-and-dx-info-on-the-rightside-i)

我想为我的应用程序截取一张漂亮的屏幕截图并发送给朋友，但我在右上角得到了愚蠢的调试字符串。如何删除它？

例如，如果使用加速，似乎是数字和移位

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-27T20:06:11.457

尝试以非调试方式运行它：

*   使用发布版本而不是调试版本
*   使用 Ctrl-F5 而不是 F5 启动（因此没有附加调试器）

IIRC，这将阻止显示诊断信息。您可能只需要采取这些步骤之一，但我不能告诉您是哪一个。

# mysql - 使用 SET 的 MYSQL 变量导致行为差异

> ID：12629179
> 
> 赞同：0
> 
> 时间：2012-09-27T20:01:39.650
> 
> 标签：mysql, variables, set, session-variables

为什么是当使用 SET 设置变量时，在某些情况下，一个语句可以设置多个变量，而在其他情况下需要发出两个单独的变量。

例如，这很好用：

```
SET
@uname := 'John',
@acct_trade := 218.01,
@acct_labor := 518.01,
@acct_cntgy := 818.01; 
```

只使用一个分号。

但是，当它是这样的：

```
SET @datestart := '2012-01-01',
SET @dateend :=  '2012-02-29'; 
```

它不起作用。我必须让他们每个人都有自己的电话。

```
SET @datestart := '2012-01-01';
SET @dateend :=  '2012-02-29'; 
```

我假设这与它要求 2 个字符串的事实有关。我什至尝试将它投射到日期。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:06:07.463

在失败的示例中，您有`SET`两次关键字。如果你从第二行删除它应该可以工作：

```
SET
@datestart := '2012-01-01',
@dateend :=  '2012-02-29'; 
```

这是因为`SET`关键字充当完整的语句直到结束分号。当它碰到另一个`SET`关键字时，它是无效的语法。

# mysql - 为什么报告的数据库大小（在磁盘上？）与内存中的不同

> ID：12629180
> 
> 赞同：5
> 
> 时间：2012-09-27T20:01:41.100
> 
> 标签：mysql, innodb

我的数据库包含三个表，分别有 50k、50k 和 5m 行。它们都是 InnoDB。（最大的一个包含 varchar[256]）。我的数据库大小是 214MB，我通过查询得到的`information_schema.TABLES`（我猜这给出了磁盘上数据+索引的大小？）

我有 1.5GB 的 RAM，我想我会将所有表的引擎转换为 MEMORY。但是当我开始转换最大的表时，我得到了 1114 错误。

经过一番研究，我发现`max_heap_table_size`只有 16MB。因此，我将`max_heap_table_size`and设置`tmp_table_size`为 1GB。

当我再次尝试转换时，我看到**mysqld.exe**进程的内存使用量超过 1.2GB，然后在转换一半行之前再次抛出同样的错误！我从最大的表中删除了一半的行，它终于适合了——内存为 700MB！

**为什么一个214MB的数据库，竟然装不下4倍多的内存？**

除了数据+索引之外，进程中还有其他东西在消耗内存吗？

*机器：Intel P4 - 1.9GHz，1.5GB RAM，Win7 Ultimate。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T06:39:59.553

我找到[了这个 dba.se 问题](https://dba.stackexchange.com/questions/11912/how-much-memory-will-a-memory-table-take-up)，其中接受的答案有一个指向[这个 dev.mysql 页面](http://dev.mysql.com/doc/refman/5.5/en/memory-storage-engine.html)的链接，上面写着：

> *MEMORY 表使用固定长度的行存储格式。VARCHAR 等可变长度类型使用固定长度存储。*

就像我在问题中提到的那样，我有一个 5m 行的表，其中有一个 varchar[256] 列。

**5,000,000 x 256 = 1.19G（假设每个字符 1 个字节）**，所以我认为这就是答案！

仅该特定列就占了 95% 的空间，其余的来自其他数字列。我猜 InnoDB 没有将它以固定长度存储在磁盘上。而且由于该字段的测试值大多不超过 10 - 15 个字符，因此它在磁盘上占用的空间非常小。

# .htaccess - 移动域名 - 只有主页有效

> ID：12629183
> 
> 赞同：0
> 
> 时间：2012-09-27T20:01:58.357
> 
> 标签：.htaccess, magento, mod-rewrite, hyperlink

我将一个站点移至一个 magento 新域名。主页运行良好，但所有链接都给出 404。

我验证了 httpd.conf 中启用了“*LoadModule rewrite_module modules/mod_rewrite.so*”

.htaccess 有这个条目：

```
## rewrite everything else to index.php
RewriteRule .* index.php [L] 
```

**旧址**

```
http://old_site.com/                    << this works
http://old_site.com/en/contentpage.html         << this works 
```

**新网站**

```
http://newsite.com/shop1/en
http://newsite.com/shop1/en/contentpage.html     << this is a typical link from the home page                                    
                                                 << link from new site takes me here, but this gives 404 error

http://newsite.com/shop1/index.php/en/contentpage.html  < this link, however, does works
http://newsite.com/shop1/en/contentpage.html            << link from new site takes me here, but this gives 404 error 
```

.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T06:57:20.953

根据您提供的描述，在安装过程中似乎没有设置*使用 apache 重写*选项，或者在某个地方迷路了。

检查表中的路径`web/seo/use_rewrites`-`core_config_data`它应该具有值**1**，如果没有，则将其设置为 1。

# asp.net-mvc - Dynamic JqGrid MVC3 (Razor) 删除功能

> ID：12629186
> 
> 赞同：0
> 
> 时间：2012-09-27T20:02:05.687
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jqgrid, mvcjqgrid

我在我的项目中使用[https://github.com/robinvanderknaap/MvcJqGrid](https://github.com/robinvanderknaap/MvcJqGrid)，我想对 Grid 中的每一行实现删除功能。我关注[了 http://playground.webpirates.nl/mvcjqgrid](http://playground.webpirates.nl/mvcjqgrid)示例项目。我没有找到与删除功能相关的任何帮助。

有谁知道如何做到这一点？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:40:06.003

MvcJqGrid 没有实现 jqgrid 的编辑和删除功能。

# c++ - 非实例化模板成员的编译时错误而不是链接时错误

> ID：12629191
> 
> 赞同：3
> 
> 时间：2012-09-27T20:02:49.127
> 
> 标签：c++, templates, visual-c++, c++03

我有一个模板类`ItemContainer`，它实际上是整个系列容器的外观，具有不同的功能，如排序、索引、分组等。

`cpp.`使用 pimpl idiom 和显式实例化将实现细节隐藏在文件中。模板仅使用定义容器实际行为的众所周知的有限实现类集进行实例化。

主模板实现了所有容器支持的常用功能 - `IsEmpty()`,`GetCount()`等`Clear()`。

每个特定容器都专门化了一些仅由它支持的功能，例如`Sort()`排序容器、`operator[Key&]`键索引容器等。

这种设计的原因是该类替代了一些史前人在 90 世纪初编写的几个遗留的手工自行车容器。想法是用现代 STL&Boost 容器替换旧的腐烂实现，尽可能保持旧界面不变。

**问题**

当用户试图从某些专业中调用不支持的功能时，这种设计会导致不愉快的情况。它编译正常，但在链接阶段产生错误（符号未定义）。不是非常用户友好的行为。

**例子：**

```
 SortedItemContainer sc;
 sc.IsEmpty(); // OK
 sc.Sort(); // OK

 IndexedItemContainer ic;
 ic.IsEmpty(); // OK
 ic.Sort(); // Compiles OK, but linking fails 
```

当然，可以通过使用继承而不是专门化来完全避免这种情况，但我不喜欢生成很多具有 1-3 个函数的类。想保留原创设计。

是否有可能将其变成编译阶段错误而不是链接阶段一？我有一种感觉可以以某种方式使用静态断言。

此代码的目标编译器是 VS2008，因此实际的解决方案必须与 C++03 兼容，并且可以使用 MS 特定的功能。但也欢迎可移植的 C++11 解决方案。

**源代码：**

```
// ItemContainer.h
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

template <class Impl> class ItemContainer
{
public:

   // Common functions supported by all specializations
   void Clear();
   bool IsEmpty() const;
   ...

   // Functions supported by sequenced specializations only
   ItemPtr operator[](size_t i_index) const; 
   ...

   // Functions supported by indexed specializations only
   ItemPtr operator[](const PrimaryKey& i_key) const;
   ...

   // Functions supported by sorted specializations only
   void Sort();
   ...

private:

   boost::scoped_ptr<Impl> m_data; ///< Internal container implementation

}; // class ItemContainer

// Forward declarations for pimpl classes, they are defined in ItemContainer.cpp
struct SequencedImpl;
struct IndexedImpl;
struct SortedImpl;

// Typedefs for specializations that are explicitly instantiated
typedef ItemContainer<SequencedImpl> SequencedItemContainer;
typedef ItemContainer<IndexedImpl> IndexedItemContainer;
typedef ItemContainer<SortedImpl> SortedItemContainer;

// ItemContainer.cpp
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// Implementation classes definition, skipped as non-relevant
struct SequencedImpl { ... };
struct IndexedImpl { ... };
struct SortedImpl { ... };

// Explicit instantiation of members of SequencedItemContainer
template  void SequencedItemContainer::Clear(); // Common
template  bool SequencedItemContainer::IsEmpty() const; // Common
template  ItemPtr SequencedItemContainer::operator[](size_t i_index) const; // Specific

// Explicit instantiation of members of IndexedItemContainer
template  void IndexedItemContainer::Clear(); // Common
template  bool IndexedItemContainer::IsEmpty() const; // Common
template  ItemPtr IndexedItemContainer::operator[](const PrimaryKey& i_key) const; // Specific

// Explicit instantiation of members of SortedItemContainer
template  void SortedItemContainer::Clear(); // Common
template  bool SortedItemContainer::IsEmpty() const; // Common
template  void SortedItemContainer::Sort(); // Specific

// Common functions are implemented as main template members
template <class Impl> bool ItemContainer<Impl>::IsEmpty() const
{
   return m_data->empty(); // Just sample
}

// Specialized functions are implemented as specialized members (partial specialization)
template <> void SortedItemContaner::Sort()
{
   std::sort(m_data.begin(), m_data.end(), SortFunctor()); // Just sample
}

...
// etc 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T21:31:18.887

如果在编译时知道某个函数将不会被实现，那么该函数不应该首先被声明。否则，这是一个编程错误。

话虽如此，您必须避免声明这样的函数，或者声明它以使该声明仅在实现时才有效。这可以通过 a`static_assert`或 SFINAE 来实现。例如

```
template<class Container>   // you need one instantination per container supported
struct container_traits
{
   static const bool has_sort;  // define appropriately in instantinations
   /* etc */
};

template<class container>
class ContainerWrapper {

  unique_ptr<container> _m_container;

  template<bool sorting> typename std::enable_if< sorting>::type
  _m_sort()
  {
    _m_container->sort();
  }

  template<bool sorting> typename std::enable_if<!sorting>::type
  _m_sort()
  {
    static_assert(0,"sort not supported");
  }

public

  void sort()
  {
    _m_sort<container_traits<container>::has_sort>();
  }

  /* etc */

}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T20:31:08.983

考虑这个例子：

```
class A {
public:
  void foo() {}
  void bar();
}; 
```

只有在链接阶段才能检测到`A::bar()`未定义的错误，这与模板无关。

您应该为不同的容器定义单独的接口并将它们用于您的实现。只是以下一种可能性：

```
template <class Impl> 
class ItemContainerImpl
{
public:
   ItemContainerImpl();
protected:
   boost::scoped_ptr<Impl> m_data; ///< Internal container implementation
};

// No operations
template <class Impl>
class Empty : protected virtual ItemContainerImpl<Impl> {};

template <class Impl, template <class> class Access, template <class> class Extra = Empty> 
class ItemContainer : public Extra<Impl>, public Access<Impl>
{
public:

   // Common functions supported by all specializations
   void Clear();
   bool IsEmpty() const;
   ...
};

template <class Impl>
class SequencedSpecialization : protected virtual ItemContainerImpl<Impl> {
public:
   // Functions supported by sequenced specializations only
   ItemPtr operator[](size_t i_index) const; 
   ...
};

template <class Impl>
class IndexedSpecialization : protected virtual ItemContainerImpl<Impl> {
public:
   // Functions supported by indexed specializations only
   ItemPtr operator[](const PrimaryKey& i_key) const;
   ...
};

template <class Impl>
class Sorted : protected virtual ItemContainerImpl<Impl> {
public:
   // Functions supported by sorted specializations only
   void Sort();
   ...
};

// Typedefs for specializations that are explicitly instantiated
typedef ItemContainer<SequencedImpl, SequencedSpecialization> SequencedItemContainer;
typedef ItemContainer<IndexedImpl, IndexedSpecialization> IndexedItemContainer;
typedef ItemContainer<SortedImpl, IndexedSpecialization, Sorted> SortedItemContainer; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T20:16:48.880

尽管有很好的答案建议使用 SFINAE，但我继续寻找符合我原始设计的解决方案。最后我找到了。

关键思想是对特定函数成员使用**专门**化，而不是显式实例化。

**做了什么：**

1.  为主模板添加了特定功能的虚拟实现。仅包含静态断言的实现被放置在头文件中，但没有内联到类定义中。
2.  从`.cpp`文件中删除了特定功能的显式实例化。
3.  特定的函数专业化声明被添加到头文件中。

**源代码：**

```
// ItemContainer.h
//////////////////////////////////////////////////////////////////////////////
template <class Impl> class ItemContainer
{
public:

   // Common functions supported by all specializations
   void Clear();
   bool IsEmpty() const;
   ...

   // Functions supported by sorted specializations only
   void Sort();
   ...

private:

   boost::scoped_ptr<Impl> m_data; ///< Internal container implementation

}; // class ItemContainer

// Dummy implementation of specialized function for main template
template <class Impl> void ItemContainer<Impl>::Sort()
{
   // This function is unsupported in calling specialization
   BOOST_STATIC_ASSERT(false);
}

// Forward declarations for pimpl classes,
// they are defined in ItemContainer.cpp
struct SortedImpl;

// Typedefs for specializations that are explicitly instantiated
typedef ItemContainer<SortedImpl> SortedItemContainer;

// Forward declaration of specialized function member
template<> void CSortedOrderContainer::Sort();

// ItemContainer.cpp
//////////////////////////////////////////////////////////////////////////////

// Implementation classes definition, skipped as non-relevant
struct SortedImpl { ... };

// Explicit instantiation of common members of SortedItemContainer
template  void SortedItemContainer::Clear();
template  bool SortedItemContainer::IsEmpty() const;

// Common functions are implemented as main template members
template <class Impl> bool ItemContainer<Impl>::IsEmpty() const
{
   return m_data->empty(); // Just sample
}

// Specialized functions are implemented as specialized members
// (partial specialization)
template <> void SortedItemContaner::Sort()
{
   std::sort(m_data.begin(), m_data.end(), SortFunctor()); // Just sample
}

...
// etc 
```

* * *

这种方式至少适用于 VS2008。

对于使用 C++11 的 GCC，`static_assert`需要一些技巧来启用惰性模板函数实例化（已[编译示例](http://liveworkspace.org/code/f613e5e9bb3c33fad0597278ba8ac447)）：

```
template <class T> struct X
{
    void f();
};

template<class T> void X<T>::f()
{
   // Could not just use static_assert(false) - it will not compile.
   // sizeof(T) == 0 is calculated only on template instantiation and       
   // doesn't produce immediate compilation error
   static_assert(sizeof(T) == 0, "Not implemented");
}

template<> void X<int>::f()
{
  std::cout << "X<int>::f() called" << std::endl;
}

int main()
{
   X<int> a;
   a.f(); // Compiles OK

   X<double> b;
   b.f(); // Compilation error - Not implemented!
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T10:10:53.043

那这个呢 ？

```
template <class T, class supported_types> struct vec_enabler : 
  boost::mpl::contains<supported_types, T> {};

// adding Sort interface
template <class T, class enabler, class Enable = void>
struct sort_cap{};

template <class T, class enabler>
struct sort_cap<T, enabler, 
                typename boost::enable_if< typename enabler::type >::type>
{
  void Sort();
};

// adding operator[]
template <class T, class U, class R, class enabler, class Enable = void>
struct index_cap{};

template <class T, class primary_key, class ret, class enabler>
struct index_cap<T, primary_key, ret, enabler, 
                 typename boost::enable_if< typename enabler::type >::type>
{
  ret operator[](primary_key i_index) const;
};

template <class Impl> 
class ItemContainer : 
  public sort_cap<Impl, 
                  vec_enabler<Impl, boost::mpl::vector<A, B> > >, // sort for classes A or B
  public index_cap<Impl, size_t, ItemPtr, 
                   vec_enabler<Impl, boost::mpl::vector<C> > >, // index for class C
  public index_cap<Impl, primaryKey, ItemPtr, 
                   vec_enabler<Impl, boost::mpl::vector<B> > > // index for class B
{
public:
  void Clear();
  bool IsEmpty() const;
}; 
```

我发现使用继承是实现您想要做的最干净的方法（即“向类添加接口”。）然后我们有以下内容：

```
int main(){
    ItemContainer<A> cA;
    cA.Sort();

    //ItemPtr p = cA[0]; // compile time error

    ItemContainer<C> cC;
    //cC.Sort(); // compile time error
    ItemPtr p = cC[0];
    //ItemPtr pp= cC[primaryKey()]; // compile time error
} 
```

当然，您仍然可以在 .cpp 文件中编写实现。

# css - 3D CSS 变换 - transform:rotateX(180deg);

> ID：12629194
> 
> 赞同：0
> 
> 时间：2012-09-27T20:02:54.517
> 
> 标签：css, 3d, transform

我正在尝试通过沿 x 轴上下翻转（180 度）来为悬停时的图像设置动画。

就像[**这里**](http://css3.bradshawenterprises.com/transforms/#css3dtransforms)

除了由于某种原因我无法让它工作。

```
img {
    transition:all 2s ease-in-out;
    perspective: 800px;
    perspective-origin: 50% 100px;
}

img:hover {
    transform:rotateX(180deg);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T20:15:55.383

根据[this page](http://caniuse.com/#feat=transforms2d)，Chrome仍然需要`-webkit`前缀。

您缺少浏览器前缀。

```
img {
    -webkit-transition:all 2s ease-in-out;
    -webkit-perspective: 800px;
    -webkit-perspective-origin: 50% 100px;
}

img:hover {
    -webkit-transform:rotateX(180deg);
} 
```

这也意味着您需要为各自的浏览器添加其他浏览器前缀。如果您不想乱用浏览器前缀，您可以使用 Lea Verou 的名为[prefixfree.js](http://leaverou.github.com/prefixfree/)的插件来为您处理这一切。

# javascript - 正文中的Javascript-jquery-mobile-backbone执行两次

> ID：12629200
> 
> 赞同：1
> 
> 时间：2012-09-27T20:03:25.797
> 
> 标签：javascript, jquery, backbone.js

执行两次 js 脚本时遇到问题

# 主.js：

```
(function($){

Backbone.sync = function(method, model, success, error){
    success();
};

var Movie = Backbone.Model.extend({
    defaults: {title:"", year:"", plot:"", extended_plot:""}
});

var List = Backbone.Collection.extend({
    model: Movie
});

var MovieRow = Backbone.View.extend({
    tagName: 'li',

    initialize: function(){
        _.bindAll(this, 'render');
        this.model.bind('change', this.render);
    },

    render: function(){
        $(this.el).html('<span>' + this.model.get('title') + '</span>');
    }
});

var MovieList = Backbone.View.extend({
    el: $('#content'),

    initialize: function(){
        _.bindAll(this, 'render', 'appendItem', 'addItem');

        this.collection = new List();
        this.collection.bind('add', this.appendItem);

        console.log('initializing');
        this.render();
    },

    render: function(){
        console.log('rendering');
        $(this.el).append("<ol></ol>");
    },

    appendItem: function(movieObj){
        var movieView = new MovieRow({
            model: movieObj
        });
        console.log('appending');

        $('ol', this.el).append(movieView.render().el);
    },

    addItem: function(titleStr){
        var movieObj = new Movie();
        movieObj.set({title: titleStr});

        this.collection.add(movieObj);
    }

});

console.log('main');
var listView = new MovieList();     })(jQuery); 
```

# 索引.php：

```
<!-- language: lang-html -->
<head>
    <meta charset="utf-8">
    <title><?php echo "$title: $subtitle"; ?></title>

    <meta name="viewport" content="width=device-width, initial-scale=1"> 

    <link href="css/default.css" rel="stylesheet" />
    <link href="css/jquery.mobile-1.1.1.css" rel="stylesheet"/>
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/jquery.mobile-1.1.1.js"></script>
    <script type="text/javascript" src="js/underscore.js"></script>
    <script type="text/javascript" src="js/backbone.js"></script>

</head>
<body>
    <div data-role="header" id="header"><h1>GREATES MOVIES OF ALL TIMES</h1></div>
    <div data-role="content" id="content">
    </div>

    <script type="text/javascript" src="js/main.js"></script>
</body> 
```

# 输出：

main---------------main.js（第 64 行）

初始化-------main.js（第37行）

渲染---------main.js（第42行）

GET http:// ******* /main.js?_=1348774790150---200 OK---jquery.js（第8281行）

main--------------jquery.js（第 627 行）

初始化------jquery.js（第600行）

渲染---------jquery.js（第605行）

## 提前致谢！

# ruby-on-rails - 密码不是 A2 主机上的模块错误

> ID：12629204
> 
> 赞同：0
> 
> 时间：2012-09-27T20:03:40.337
> 
> 标签：ruby-on-rails, deployment, migration, hosting, encryption

我试图将 Ruby on Rails 3.0.3 应用程序部署到 A2 Hosting，我使用Passenger遵循了本教程（ [http://wiki.a2hosting.com/index.php/Rails_3 ）。](http://wiki.a2hosting.com/index.php/Rails_3)

但我无法迁移我的应用程序，这是错误：

```
$ bundle exec rake db:migrate RAILS_ENV=production --trace
rake aborted!
Cipher is not a module
/usr/lib/ruby/1.8/openssl/cipher.rb:22 
```

我查看了很多关于这个问题的信息，我发现了这个： http: [//posterous.mclov.in/how-to-solve-the-cipher-is-not-a-module-error](http://posterous.mclov.in/how-to-solve-the-cipher-is-not-a-module-error)但我无法访问到该文件，因为 A2 Hosting 不允许我拥有管理员访问权限。

有谁知道如何解决这个问题？

Ruby 版本：ruby 1.8.7 Rails 版本：rails 3.0.3

这是运行应用程序所需的 gem 列表：

```
gem 'rails', '3.0.3'
gem "devise", "~> 1.4.2"
gem 'jquery-rails', '>= 1.0.12'
gem "paperclip", "~> 2.3.15"
gem "rubyzip"
gem "spreadsheet", '0.6.5.7'
gem "roo", '1.9.5'
gem "schema_plus"
gem "prawn", '0.12.0'
gem "prawn-layout", '0.8.4'
gem 'mysql2', '< 0.3' 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:38:51.370

我不知道您是否还有问题，我们已经更改了 Ruby 的 Wiki 和程序，这可能会解决您的问题。可以在此处找到安装 Rails 应用程序的新说明：[https ://my.a2hosting.com/knowledgebase.php?_m=knowledgebase&_a=viewarticle&kbarticleid=665](https://my.a2hosting.com/knowledgebase.php?_m=knowledgebase&_a=viewarticle&kbarticleid=665)

我希望这会有所帮助！谢谢，安迪

# r - 将特定函数应用于数据框的所有行时出错

> ID：12629208
> 
> 赞同：0
> 
> 时间：2012-09-27T20:03:52.513
> 
> 标签：r, dataframe, plyr

如果之前已经解决过这个问题，请提前道歉，但我已经尝试查看与 ddply、sapply 和 apply 相关的所有问题，但我终生无法解决这个问题......

我编写了一个函数 countMonths，它将计费周期中的日、月和总天数作为参数，并返回计费周期所属的日历月数：

```
countMonths <- function(day, month, cycle.days) {
  month.days <- c(31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31)
  if (month < 1 | month > 12 | floor(month) != month) {
    cat("Invalid month value, must be an integer from 1 to 12")
  } else if (day < 1 | day > month.days[month]) {
    cat("Invalid day value, must be between 1 and month.days[month]")
  } else if (cycle.days < 0) {
    cat("Invalid cycle.days value, must be >= 0")
  } else {
    nmonths <- 1
    day.ct <- cycle.days - day
    while (day.ct > 0) {
      nmonths <- nmonths + 1
      month <- ifelse(month == 1, 12, month - 1) # sets to previous month    
      day.ct  <- day.ct - month.days[month] # subtracts days of previous month
    }
    nmonths
  }
} 
```

我想将此功能应用于包含客户计费记录的data.frame中的每一行，例如

```
> head(cons2[-1],10)
   kwh cycle.days  read.date row.index year month day kwh.per.day
1  381         29 2010-09-02         1 2010     9   2   13.137931
2  280         32 2010-10-04         2 2010    10   4    8.750000
3  282         29 2010-11-02         3 2010    11   2    9.724138
4  330         34 2010-12-06         4 2010    12   6    9.705882
5  371         30 2011-01-05         5 2011     1   5   12.366667
6  405         30 2011-02-04         6 2011     2   4   13.500000
7  441         32 2011-03-08         7 2011     3   8   13.781250
8  290         29 2011-04-06         8 2011     4   6   10.000000
9  296         29 2011-05-05         9 2011     5   5   10.206897
10 378         32 2011-06-06        10 2011     6   6   11.812500

> dput(head(cons2[-1],10))
structure(list(kwh = c(381L, 280L, 282L, 330L, 371L, 405L, 441L, 
290L, 296L, 378L), cycle.days = c(29L, 32L, 29L, 34L, 30L, 30L, 
32L, 29L, 29L, 32L), read.date = structure(c(1283385600, 1286150400, 
1288656000, 1291593600, 1294185600, 1296777600, 1299542400, 1302048000, 
1304553600, 1307318400), class = c("POSIXct", "POSIXt"), tzone = "UTC"), 
    row.index = 1:10, year = c(2010, 2010, 2010, 2010, 2011, 
    2011, 2011, 2011, 2011, 2011), month = c(9, 10, 11, 12, 1, 
    2, 3, 4, 5, 6), day = c(2L, 4L, 2L, 6L, 5L, 4L, 8L, 6L, 5L, 
    6L), kwh.per.day = c(13.1379310344828, 8.75, 9.72413793103448, 
    9.70588235294118, 12.3666666666667, 13.5, 13.78125, 10, 10.2068965517241, 
    11.8125)), .Names = c("kwh", "cycle.days", "read.date", "row.index", 
"year", "month", "day", "kwh.per.day"), row.names = c(NA, 10L
), class = "data.frame") 
```

我尝试了几个选项，但没有一个效果很好。具体来说，我需要能够将给定 var 的值作为标量（或长度为 1 的向量）传递给数据帧中的每一行，但它们总是作为向量传递：

```
> cons2$tot.months <- countMonths(cons2$day, cons2$month, cons2$cycle.days)  
Warning messages:
1: In if (month < 1 | month > 12 | floor(month) != month) { :
  the condition has length > 1 and only the first element will be used
2: In if (day < 1 | day > month.days[month]) { :
  the condition has length > 1 and only the first element will be used
3: In if (cycle.days < 0) { :
  the condition has length > 1 and only the first element will be used
4: In while (day.ct > 0) { :
  the condition has length > 1 and only the first element will be used
5: In while (day.ct > 0) { :
  the condition has length > 1 and only the first element will be used 
```

我终于能够使用 ddply 获得正确的结果，将每一行视为自己的组，但这需要很长时间：

```
cons2 <- ddply(cons2, .(account, year, month, day), transform,
               tot.months = countMonths(day, month, cycle.days)
) 
```

有没有更好的方法将此函数应用于我的数据框的每一行？或者，作为一个相关问题，如何将数据框中的变量作为标量参数（给定行的值）而不是数据框中该 var 的所有值的向量传递？如果有人能指出我的想法在概念上哪里出了问题，我将特别感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:58:23.223

要使该函数正常工作，您可以使用`mapply`它将连续地将您的函数应用于您传递给它的所有向量的每个元素。所以你可以这样做：

```
mapply(countMonths,cons2$day,cons2$month,cons2$cycle.days) 
```

正如我在评论中提到的，有更简单的方法可以做到这一点。例如，我认为这会起作用：

```
cons2$read.date=as.Date(cons2$read.date)
monnb <- function(d){ lt <- as.POSIXlt(as.Date(d, origin="1900-01-01"));  lt$year*12 + lt$mon }
mondf <- function(d1, d2)  monnb(d2) - monnb(d1) 
mondf(cons2$read.date-cons2$cycle.days,cons2$read.date) + 1 
```

另外，我注意到您正在尝试捕获您的功能不起作用的所有条件，这很棒！有一个非常方便的函数`stopifnot`可以用于此目的：

```
countMonths <- function(day, month, cycle.days) {
  month.days <- c(31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31)
  stopifnot(month >=1 & month <= 12 & floor(month)==month & cycle.days >=0 & day >= 1 & day <= month.days[month]) 
  nmonths <- 1
  day.ct <- cycle.days - day
  while (day.ct > 0) {
    nmonths <- nmonths + 1
    month <- ifelse(month == 1, 12, month - 1) # sets to previous month    
    day.ct  <- day.ct - month.days[month] # subtracts days of previous month
  }
  nmonths
} 
```

* * *

至于对您的函数的评论，我认为它有效，但它没有利用 R 中的向量运算。我从另一个答案中得到的函数非常巧妙，因为它允许您在一次，而不是依次循环遍历每一个。

# java - TimeSeries 中的相对时间戳

> ID：12629215
> 
> 赞同：1
> 
> 时间：2012-09-27T20:04:17.623
> 
> 标签：java, jfreechart

我正在尝试制作一个非常简单的图表，该图表显示在一秒钟内测量的力。我有一个简单的例子，它输出下图：

![在此处输入图像描述](../Images/7c75ff1466c591a41130ab4559c5a065.png)

这是我的代码：

```
TimeSeries series1 = new TimeSeries("Force", "Domain", "Range");

//generate values
for (int i = 0; i < 1000; i++) {
    series1.add(new TimeSeriesDataItem(new Millisecond(i, 0, 0, 0, 1, 1, 2012), i));
}

TimeSeriesCollection dataset = new TimeSeriesCollection();
dataset.addSeries(series1);

JFreeChart chart = ChartFactory.createXYLineChart("Measured Forces", 
            "Time", "Force in Pounds", dataset, PlotOrientation.VERTICAL, 
        false, false, false);

ChartUtilities.saveChartAsPNG(new File("/home/rfkrocktk/Desktop/chart.png"), chart, 1280, 720); 
```

如何将那些丑陋的 1,325,404,800,000 值转换为简单的 0-1,000 值，代表测量的总时间而不是确切的系统时间？

我一直在寻找符合我要求的构造函数，但我似乎找不到它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T00:29:59.217

[`ChartFactory.createXYLineChart()`](http://www.jfree.org/jfreechart/api/javadoc/src-html/org/jfree/chart/ChartFactory.html#line.1723)创建 的两个实例`NumberAxis`，每个实例用于域和范围。作为替代方案，请考虑[`ChartFactory.createTimeSeriesChart()`](http://www.jfree.org/jfreechart/api/javadoc/src-html/org/jfree/chart/ChartFactory.html#line.1886)，它使用 a`DateAxis`作为域。在任何一种情况下，您都可以`setXxxFormatOverride()`在轴上使用来获得任何所需的格式。[此处](https://stackoverflow.com/a/12481509/230513)显示的示例指定了一个工厂`DateFormat`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T21:49:25.850

据我所知，TimeSeries 不支持“相对时间”的概念——所有 x 值类型（如毫秒）都基于 java.util.Date，它产生一个绝对时间。

我认为使用 XYSeries 而不是 TimeSeries 可能会更好。那么 x 值可以是整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T20:29:01.373

诀窍是通过[ChartFactory.createTimeSeriesChart()使用](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/ChartFactory.html#createTimeSeriesChart%28java.lang.String,%20java.lang.String,%20java.lang.String,%20org.jfree.data.xy.XYDataset,%20boolean,%20boolean,%20boolean%29)[RelativeDateFormat](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/util/RelativeDateFormat.html)进行域轴格式设置。这会以#h#m#.###s 的格式打印标签。例如，您可能会看到“0h0m2.529s”。

```
 JFreeChart chart;
  XYPlot plot;
  DateAxis axis;
  TimeSeriesCollection dataset;
  TimeSeries series;
  RelativeDateFormat format;
  long startTime;

  series    = new TimeSeries("Time");
  dataset   = new TimeSeriesCollection(series);
  chart     = ChartFactory.createTimeSeriesChart("Relative", "Elapsed Time", "Value", dataset, true, true, true); 
  plot      = chart.getXYPlot();
  axis      = (DateAxis) plot.getDomainAxis();
  format    = new RelativeDateFormat();
  startTime = System.currentTimeMillis();

  axis.setDateFormatOverride(format);
  format.setBaseMillis(startTime); 
```

# c++ - 编程竞赛的 C++ 阅读输入

> ID：12629218
> 
> 赞同：3
> 
> 时间：2012-09-27T20:04:31.727
> 
> 标签：c++

代码解析字符串输入的最简单方法是什么，如下所示：

```
WORD WORD2
WORD3 WORD4

WORD5
WORD6 
```

也就是说，未知数量的单词对后跟一个空白行，然后是未知数量的单词，每行一个。我想将这些单词的第一组放入一个地图中，将第二个单词列表放入一个向量中。

使用`getline`在发现第一组配对词何时终止时存在问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T20:14:49.483

一个简单的使用问题`getline`和一些容器：

```
#include <string>
#include <sstream>
#include <iostream>
#include <vector>
#include <map>

std::map<std::string, std::string> m;
std::vector<std::string>           v;

for (std::string line; std::getline(std::cin, line); )
{
    if (line.empty()) { break; }

    std::string x, y;
    std::istringstream iss(line);

    if (!(iss >> x >> y >> std::ws)) { /* fatal error */ }

    m[x] = y;
}   

for (std::string line; std::getline(std::cin, line); )
{
    v.push_back(std::move(line));
}

std::cout << "We read " << m.size() << " pairs and " << v.size() << " words.\n"; 
```

如果你想确保文件的第一部分精确地由成对的单词组成，中间有一个空格，你可以加强这个条件：

```
if (!(iss >> x >> y >> std::ws) || iss.get() != EOF) { /* fatal error */ } 
```

同样，如果您愿意，您可以添加检查文件的第二部分是否不包含空格。最后，您可以使用`insert()`map 来检查没有重复的键；在 C++11 中，你应该可以说`m.emplace(std::move(x), std::move(y));`. 并且 an`unordered_map`使用字符串可能更有效。

# iphone - Markdown 到 NSAttributedString 库？

> ID：12629219
> 
> 赞同：17
> 
> 时间：2012-09-27T20:04:41.803
> 
> 标签：iphone, ios, nsstring, markdown, nsattributedstring

现在 iOS 6 完全支持 NSAttributedString，是否有一个库可以将带有 markdown 的 NSString 转换为 NSAttributedString？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-20T03:15:39.553

我刚刚向 MGBoxKit 添加了一个`NSString`轻量级[标记](https://github.com/sobri909/MGBoxKit)`NSAttributedString`解析器。这不是 Markdown，但它非常相似。到目前为止，它支持粗体、斜体、下划线、等宽、文本颜色、背景颜色和字距调整。

MGMushParser类现在是一个独立的 pod，因此可以独立于 MGBoxKit 轻松使用[。](https://github.com/sobri909/MGMushParser)

```
NSString *markup = @"**bold**, //italics//, __underlining__, `monospacing`, and {#0000FF|text colour}";

UIFont *baseFont = [UIFont fontWithName:@"HelveticaNeue" size:18];
UIColor *textColor = UIColor.whiteColor;

myLabel.attributedString = [MGMushParser attributedStringFromMush:markup
                               font:baseFont color:textColor]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-07T23:43:28.183

我刚刚开源了一个项目，该项目采用原始降价并将其转换为 NSAttributedString：

[https://github.com/dreamwieber/AttributedMarkdown](https://github.com/dreamwieber/AttributedMarkdown)

这是一个正在进行中的工作，包括一个演示应用程序，该应用程序展示了如何将属性分配给各种降价元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T17:50:19.153

[DTCoreText](https://github.com/Cocoanetics/DTCoreText)将 html 转换为 NSAttributedString，[OHAttributedLabel](https://github.com/AliSoftware/OHAttributedLabel)也有一些基本的降价支持。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-17T11:41:31.377

你也可以看看[https://github.com/xing/XNGMarkdownParser](https://github.com/xing/XNGMarkdownParser)，工作快速可靠

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-18T05:41:29.040

供将来参考，因为这是我找到的第一篇文章，您现在可以使用[NSAttributedString initWithData 和 NSDocumentTypeDocument](https://developer.apple.com/library/ios/documentation/UIKit/Reference/NSAttributedString_UIKit_Additions/Reference/Reference.html#//apple_ref/doc/uid/TP40011688-CH1-SW33)在 iOS 7 上解析简单的 html

对 HTML 使用 Markdown 解析器似乎很容易，然后使用 initWithData 来完成剩下的工作。请参阅[http://initwithfunk.com/blog/2013/09/29/easy-markdown-rendering-with-nsattributedstring-on-ios-7](http://initwithfunk.com/blog/2013/09/29/easy-markdown-rendering-with-nsattributedstring-on-ios-7)。

对于 HTML 转换，请参阅我在[ios7 font size change when create nsattributedstring from html中的回答](https://stackoverflow.com/questions/20992950/ios7-font-size-change-when-create-nsattributedstring-from-html/24817891#24817891)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-23T14:03:28.570

看起来[Bypass](http://uncodin.github.io/bypass/)是一个很好的选择，它也经常更新（与提到的大多数其他 repos 不同）。它甚至提供了一个自定义`UIView`子类来处理渲染本身。它还直接使用 Core Text 而不是 UITextView，这应该更快。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-01-21T04:49:10.343

我一直在努力完善易于使用的完整 Markdown 库，最后我找到[了 CocoaMarkdown](https://github.com/indragiek/CocoaMarkdown)。

它真的很棒，支持大部分语法并且有易于使用的 API。唯一缺少的是图像支持，所以我分叉了它并添加了全图像支持，以及缓存和启用使用 URL 中包装的图像，希望它能解决我对其他人的问题：

[https://github.com/X8/CocoaMarkdown](https://github.com/X8/CocoaMarkdown)

# sql - 选择与另一个表相关的行的计数字段

> ID：12629223
> 
> 赞同：1
> 
> 时间：2012-09-27T20:04:52.513
> 
> 标签：sql

我很长时间以来一直在努力解决这个问题，不知道如何解决它。我很难描述，所以请耐心等待。有两个表：

表“用户”

```
UserId PK
Gender 
```

表格“表格”

```
FormId PK
UserId1 FK
UserId2 FK
Type 
```

表单始终与两个用户相关，但并非所有用户都有相关表单。现在我想只计算那些具有相关表格的用户的指定性别。

所以结果，我想拥有某物。像这样：

```
# |  Gender | GenderCount
1 |  male   |     43
2 |  female |     12
3 |  trans  |     2 
```

我尝试了以下 SQL 脚本，但结果并不明显（所有 GenderCount 的总和大于实际用户数）

```
SELECT u.Gender AS 'Gender', COUNT(u.Gender) AS 'GenderCount' 
FROM Users u, Forms f 
WHERE ((f.UserId1 = u.UserId) 
    OR (f.UserId2 = u.UserId)) 
AND (Type = 'Foo') 
GROUP BY Gender 
ORDER BY GenderCount 
DESC 
```

有什么技巧可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T22:16:02.643

让我们来看看你想要什么：

*   每个性别有多少人回答了任何表格？
*   注意：每个用户都应该只计算一次，无论他们填写了多少表格。

像这样措辞，答案变得相当明显，至少在伪代码中：

```
SELECT
    u.Gender,
    COUNT(u.Gender)
FROM
    Users u
WHERE
    [User has answered a form]
GROUP BY
    u.Gender 
```

确定用户是否已回答表单的最简单方法取决于所使用的 SQL 的特定风格。您需要使用子查询。如何访问它有几个选项。

`IN`是最常用的方法：

```
SELECT
    u.Gender        Gender,
    COUNT(u.Gender) GenderCount
FROM
    Users u
WHERE
    u.id IN (
        SELECT f.UserId1 user_id FROM Forms f WHERE Type = 'Foo'
        UNION
        SELECT f.UserId2 user_id FROM Forms f WHERE Type = 'Foo'
    )
GROUP BY
    Gender
ORDER BY
    GenderCount DESC 
```

在可用的情况下，`EXISTS`阅读起来更自然，有时速度更快：

```
SELECT
    u.Gender        Gender,
    COUNT(u.Gender) GenderCount
FROM
    Users u
WHERE
    EXISTS(
        SELECT '1'
        FROM Forms f
        WHERE
            (f.UserId1 = u.id OR f.UserId2 = u.id)
            AND Type = 'Foo'
    )
GROUP BY
    Gender
ORDER BY
    GenderCount DESC 
```

关于速度：查询优化器通常会尽可能地转换，`IN`以`EXISTS`避免不必要地选择额外的行。但是，使用多个列需要 an`OR`或 a `UNION`，因此即使在这种情况下也可能很漂亮。即：既`OR`不能`UNION`很好地使用索引，也不能很好地使用索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T20:13:12.033

跳过每个用户生成多行的连接：

```
SELECT Gender, COUNT(Gender) AS 'GenderCount' 
FROM Users
WHERE UserId IN (SELECT UserId1 FROM Forms WHERE Type = 'Foo' 
                 UNION 
                 SELECT UserId2 FROM Forms WHERE Type = 'Foo')
GROUP BY Gender 
ORDER BY GenderCount DESC 
```

或者，如果您更愿意避免使用 UNION（顺便说一句，这在这种情况下完全有效），您可以使用 OR，如下所示：

```
SELECT Gender, COUNT(Gender) AS 'GenderCount' 
FROM Users
WHERE UserId IN (SELECT UserId1 FROM Forms WHERE Type = 'Foo')
   OR UserId IN (SELECT UserId2 FROM Forms WHERE Type = 'Foo')
GROUP BY Gender 
ORDER BY GenderCount DESC 
```

正如其他人指出的那样，也有一些方法可以使用 JOIN 来做到这一点。但是，JOIN 为 DBMS 引擎增加了不必要的复杂性，因为它首先需要匹配行，然后减少到 DISTINCT 值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T20:15:25.260

```
SELECT u1.Gender AS 'Gender', COUNT(*) AS 'GenderCount'
FROM
    Users u1 
        INNER JOIN 
    (SELECT DISTINCT u.UserId
    FROM 
        Users u
            INNER JOIN Forms f ON ((f.UserId1 = u.UserId) 
                                OR (f.UserId2 = u.UserId))
                                AND (f.Type = 'Foo')) T ON T.UserId = u1.UserId
GROUP BY Gender 
ORDER BY GenderCount DESC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T20:14:01.197

你应该使用

```
count(distinct u.UserId) 
```

这样用户只会被计算一次：count(distinct field_name) 计算 field_name 中包含的唯一值的数量，因此在主键上计算不同的值可以得到唯一用户的数量，这就是你要找的。

此外，您最好不要加入，而是使用这样的 in 子句

```
select Gender, count(distinct UserId) as GenderCount
from Users
where u.UserId in (select UserId1 from Forms) or u.UserId in (select UserId2 from Forms) 
```

它可能也会稍微快一点。

# prolog - Prolog 是否有条件并像 Common Lisp 一样重新启动系统？

> ID：12629228
> 
> 赞同：5
> 
> 时间：2012-09-27T20:05:12.223
> 
> 标签：prolog, iso-prolog

Common Lisp 允许通过[条件和重新启动](http://www.gigamonkeys.com/book/beyond-exception-handling-conditions-and-restarts.html)来处理异常。粗略地说，当一个函数抛出异常时，“捕捉者”可以决定“抛出者”应该如何/是否应该继续。Prolog 是否提供类似的系统？如果没有，是否可以在现有谓词之上构建一个用于遍历和检查调用堆栈的谓词？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T15:35:22.423

Prolog的[ISO/IEC 标准](https://stackoverflow.com/tags/iso-prolog/info)只提供了一个非常基本的异常和错误处理机制，它或多或少地与 Java 提供的相当，与 Common Lisp 的丰富机制相去甚远，但仍有一些值得注意的地方。特别是，除了实际的信令和处理机制之外，许多系统都提供了类似于`unwind-protect`. 也就是说，一种确保目标将被执行的方法，即使存在其他未处理的信号。

## ISO投掷/1，接球/3

使用 引发/抛出异常`throw(Term)`。`Term`首先创建一个副本，`copy_term/2`让我们调用它`Termcopy`，然后这个新副本用于搜索`catch(Goal, Pattern, Handler)`其第二个参数与 一致的对应项`Termcopy`。当`Handler`被执行时，所有由 引起的统一`Goal`都被撤消。因此，在执行`Handler`时无法访问存在的替换`throw/1`。并且没有办法在`throw/1`执行的地方继续。

内置谓词的错误通过执行对应于[ISO 错误类](http://www.complang.tuwien.ac.at/ulrich/iso-prolog/error_k#error_classes)`throw(error(Error_term, Imp_def))`之一的where发出信号，并且可能提供实现定义的额外信息（如源文件、行号等）。`Error_term``Imp_def`

在许多情况下，在本地处理错误会大有裨益，但许多实现者认为它过于复杂而无法实现。

使 Prolog 处理器在本地处理每个错误的额外工作是相当可观的，并且比 Common Lisp 或其他编程语言大得多。这是由于 Prolog 中统一的本质。错误的本地处理将需要撤消在内置执行期间执行的统一：因此，实现者有两种可能性来实现这一点：

*   在调用内置谓词时创建一个“选择点”，这会产生很多额外的开销，无论是创建这个选择点还是“尾随”后续绑定
*   手动检查每个内置谓词，并根据具体情况决定如何处理错误——虽然这在运行时开销方面是最有效的，但也是最昂贵和最容易出错的方法

类似的复杂性是由利用内置的 WAM 寄存器引起的。同样，人们可以在缓慢的系统或具有显着实现开销的系统之间进行选择。

## 异常处理程序/3

然而，许多系统在内部提供了更好的机制，但很少有人始终如一地向程序员提供它们。IF/Prolog 提供`exception_handler/3`了与它具有相同参数`catch/3`但在本地处理错误或异常的方法：

```
[用户] ?- catch((arg(a,f(1),_); Z=ok), 错误(type_error(_,_),_), 失败)。

不

[用户] ?- exception_handler((arg(a,f(1),_); Z=ok), error(type_error(_,_),_), 失败)。

Z = 好的

是的

```

## setup_call_cleanup/3

很多系统都提供了这个内置功能。`unwind-protect`由于 Prolog 的回溯机制，它非常相似，但需要一些额外的复杂性。请参阅其[当前定义](http://www.complang.tuwien.ac.at/ulrich/iso-prolog/cleanup)。

* * *

所有这些机制都需要由系统实现者提供，它们不能建立在 ISO Prolog 之上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T10:35:39.180

您可以使用假设推理来实现您想要的。假设允许假设推理的 Prolog 系统支持以下推理规则：

```
G, A |- B
----------- (Right ->)
G |- A -> B 
```

有一些 Prolog 系统支持这一点，例如[lambda Prolog](http://sites.google.com/site/proghol/)。您现在可以使用假设推理来实现例如 restart/2 和 signal_condition/3。假设假设推理是通过 (-:)/2 完成的，那么我们可以有：

```
restart(Goal,Handler) :- 
   (handler(Handler) -: Goal).

signal_condition(Condition, Restart) :- 
   handler(Handler), call(Handler,Condition,Restart), !.
signal_condition(Condition, _) :- 
   throw(Condition). 
```

该解决方案不会无缘无故地遍历整个堆栈跟踪，而是直接查询处理程序。但它引出了我是否需要一个特殊的 Prolog 或者我是否可以自己进行假设推理的问题。作为第一个近似值，(-:)/2 可以如下实现：

```
(Clause -: Goal) :- assume(Clause), Goal, retire(Clause).

assume(Clause) :- asserta(Clause).
assume(Clause) :- once(retact(Clause)).

retire(Clause) :- once(retract(Clause)).
retire(Clause) :- asserta(Clause). 
```

但如果 Goal 发出裁减或异常，上述操作将无法正常工作。因此，例如[Jekejeke Minlog](http://www.jekejeke.ch/idatab/doclet/prod/en/docs/15_min/package.jsp) 0.6 中可用的更好解决方案是：

```
(Clause -: Goal) :- compile(Clause, Ref), assume_ref(Ref), Goal, retire_ref(Ref).

assume_ref(Ref) :- sys_atomic((recorda(Ref), sys_unbind(erase(Ref)))).

retire_ref(Ref) :- sys_atomic((erase(Ref), sys_unbind(recorda(Ref)))). 
```

sys_unbind/1 谓词在绑定列表上安排撤消目标。它对应于 SICStus 的 undo/1。绑定列表对剪切具有弹性。sys_atomic/1 确保撤消目标始终是计划的，即使在执行期间发生外部信号，例如最终用户发出中止。它对应于例如 setup_call_cleanup/3 的第一个参数的处理方式。

在这里使用子句引用的好处是子句只编译一次，即使在目标和 (-:)/2 之后的延续之间发生了回溯。但除此之外，解决方案很可能比通过调用将目标放在堆栈跟踪上要慢。但是可以想象 Prolog 系统的进一步改进，例如 (-:)/2 作为一种原始且适当的编译技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T21:11:30.030

ISO prolog 定义了这些谓词：

*   `throw/1`引发异常。参数是要抛出的异常（任何术语）
*   `catch/3`它执行一个目标并捕获某些异常，在这种情况下它执行异常处理程序。第一个参数是要调用的目标，第二个参数是异常模板（如果抛出的异常`throw/1`与该模板统一，则执行处理程序目标），第三个参数是执行处理程序目标。

示例用法：

```
test:-
  catch(my_goal, my_exception(Args), (write(exception(Args)), nl)).

my_goal:-
  throw(my_exception(test)). 
```

关于您的注释*“如果不是，是否可以在现有谓词之上构建一个用于遍历和检查调用堆栈的谓词？”* 我认为没有通用的方法可以做到这一点。也许查看您正在使用的 prolog 系统的文档，看看是否有某种方法可以遍历堆栈。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T19:13:37.713

正如他在回答中提到的错误，ISO Prolog 不允许这样做。然而，一些实验表明，SWI-Prolog 提供了一种可以建立条件和重启的机制。下面是一个非常粗略的概念证明。

“捕手”调用`restart/2`来调用一个目标并提供一个谓词，以便在出现条件时在可用的重新启动中进行选择。“投掷者”调用`signal_condition/2`. 第一个论点是提出的条件。第二个参数将绑定到选择的重新启动。如果不选择重新启动，则条件变为异常。

```
restart(Goal, _) :-  % signal condition finds this predicate in the call stack
    call(Goal).

signal_condition(Condition, Restart) :-
    prolog_current_frame(Frame),
    prolog_frame_attribute(Frame, parent, Parent),
    signal_handler(Parent, Condition, Restart).

signal_handler(Frame, Condition, Restart) :-
    ( prolog_frame_attribute(Frame, goal, restart(_, Handler)),
        call(Handler, Condition, Restart)
    -> true
    ; prolog_frame_attribute(Frame, parent, Parent)
    -> signal_handler(Parent, Condition, Restart)
    ; throw(Condition)  % reached top of call stack
    ). 
```

# lua - 修改控件后 Lua 的神秘输出

> ID：12629229
> 
> 赞同：0
> 
> 时间：2012-09-27T20:05:16.857
> 
> 标签：lua, wxwidgets

我正在使用 Lua 和 wxLua 来构建 GUI。通常当我退出应用程序时，我没有得到 Lua 的输出。

但是我只是像这样向 wxListView（称为 myListView）添加了一个函数

```
myListView.foo = bar

function bar (self)
    -- do something with the wxListView
end 
```

无论我是否调用过 foo()，当我退出应用程序时，我都会从 Lua 获得以下输出：

```
~wxLuaObject -2 1 0 
```

如果我注释掉分配，退出应用程序时我不会得到任何输出。相反，我稍后在代码中将 foo 设为 nil ：

```
myListView.foo = nil 
```

当该行执行时，我立即得到相同的输出，然后在程序退出时再次得到相同的输出。

输出是什么意思？我究竟做错了什么？我如何解决它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T22:53:24.117

这似乎是 wxLuaObject 被破坏并且`m_reference == LUA_NOREF`（在您的情况下为-2）并且 Lua 状态对象未处于关闭状态（在您的情况下报告为 0）的情况的内部诊断：

```
// this is from modules/wxlua/src/wxlbind.cpp (starts on line 83 in my version)
wxLuaObject::~wxLuaObject()
{
    if ((m_reference != LUA_NOREF) && m_wxlState->Ok() && !m_wxlState->IsClosing())
    {
        m_wxlState->wxluaR_Unref(m_reference, &wxlua_lreg_refs_key);
        m_reference = LUA_NOREF;
    }
    //else if (!m_wxlState->IsClosing())
    //    wxPrintf(wxT("~wxLuaObject %d %d %d\n"), (int)m_reference, (int)m_wxlState->Ok(), (int)m_wxlState->IsClosing()); 
```

我在我的 wxlua 代码 (2.8.12.1) 中注释掉了这条消息，但您可能需要检查您的版本并根据需要进行升级。`~wxLuaObject`这是源代码中唯一出现消息的地方。它似乎是无害的，但它可能指向您正在做的其他问题。

# php - 即使不应该发送任何响应，php-脚本也会发送垃圾数 据

> ID：12629230
> 
> 赞同：0
> 
> 时间：2012-09-27T20:05:18.400
> 
> 标签：php, android, ios, json

我有一个脚本，用于将文件从 android 设备上传到我的服务器。它工作得非常好，除了 ios 开发人员开始遇到问题，因为他无法解析来自脚本的响应，因为 iphone json 解析器在响应结束时抱怨垃圾。在Android中，解析器不在乎并且工作正常，所以在调试后我看了看，我发现了这个

```
array(5){ 
```

在我的 json 响应结束时。Android 只是处理它，但 ios 像醉酒的水手一样绊倒了这个小小的不规则。因此，我摆脱了对客户端的 json 响应，并且看到响应仍然返回到手机，即使我浏览了整个脚本并删除了每个打印调用。

所以....我的问题是什么会导致 php 脚本发送响应，即使它从未这样做过。请记住，我在代码中逐行检查并四重检查所有内容以确保不发送任何响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T22:05:17.393

确保您已删除或注释掉所有`print_r`或`var_dump`语句。

# objective-c - Cocoa - awakeFromNib 没有被调用

> ID：12629241
> 
> 赞同：1
> 
> 时间：2012-09-27T20:06:41.530
> 
> 标签：objective-c, macos, cocoa

我有一个 MainMenu.xib，而 AppController 是它的文件所有者。我添加`-(void)awakeFromNib`了效果很好的方法。现在，道路上的几轮固定装置`awakeFromNib`不再被调用，我不知道为什么。它拥有 xib，因此应在未归档时调用它。这是怎么回事？

**编辑：**

好吧，我重命名`awakeFromNib`为`something`，并从...调用它，`init`这很有效。仍然困惑为什么`awakeFromNib`不是。我那里也有一个`+(void) initialize`方法，会不会搞砸了？

```
- (id)init {
    self = [super init];
    if (self) {
        [self something];
    }
    return self;
}

-(void)something {
    NSLog(@"yup");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T20:30:36.160

在 nib 中设置文件所有者的类名只是为了让您可以告诉 Xcode 向您展示哪些对象的出口和操作，以便您可以连接起来。当应用程序运行并加载 nib 时，它不会影响*实际*是文件所有者的对象。

MainMenu nib 的 File's Owner 始终是应用程序对象，无论您在 Xcode 的检查器中为 FO 设置什么类名。将其设置为任何类名，但 NSApplication[1] 是错误的。

当您运行您的应用程序时，您应该会在控制台中找到有关您尝试连接的 AppController 的任何出口或操作的错误消息。它们无法连接，因为应用程序对象没有它们。

在 nib 编辑器中更改类名，并在 MainMenu nib 中将 AppController 创建为自定义对象。

* * *

> 好吧，我重命名`awakeFromNib`为`something`，并从...调用它，`init`这很有效。

这意味着它`init`被调用，这意味着你正在调用它。`awakeFromNib`这是在笔尖中创建它的有效替代方法，但如果它不在笔尖中或拥有笔尖，则不应覆盖。

`alloc`您的选择：使用and继续创建 AppController `init`，或者删除该代码并在 MainMenu nib 中创建它。

* * *

[1]：或者，如果您将 NSApplication 子类化并将应用程序包的主体类更改为该子类，则该子类的名称。

# python - 如何获得按键？

> ID：12629242
> 
> 赞同：-3
> 
> 时间：2012-09-27T20:06:46.577
> 
> 标签：python

我想知道如何在python中按下一个键

我试着做：

```
import msvcrt as keys
while True:
    key = keys.getch()
    if key == "a":
        print("You have pressed a") 
```

有谁知道如何修理它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:18:45.230

这可能会帮助您：

```
import msvcrt
while True:
    if msvcrt.kbhit() and msvcrt.getch() == chr(97): # chr(97) = 'a'
        print("You have pressed a") 
```

注意：您的代码和我的代码在许多 Python IDE 中都不起作用！您需要执行 python 文件，例如在命令窗口中。

# javascript - 插入使用innerHTML 将按钮插入HTML 表 我试图在相关的Javascript 函数中使用.innerHTML 将输入按钮插入HTML 表。每当我使用相同的 JS，但将“选择”替换为其他 HTML 时，它都可以正常工作。只有  和 

> ID：12629249
> 
> 赞同：1
> 
> 时间：2012-09-27T20:07:23.253
> 
> 标签：javascript, html, html-table, innerhtml

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T20:16:51.243

此行将触发“意外标识符”错误：

```
cell.innerHTML = "<input id="Button" type="button" value="ClickHere" />"; 
```

问题是你的报价。JavaScript 解释器与用于表示 JavaScript 中的字符串的引号和 HTML 中使用的引号混淆了。您需要对字符串中的引号进行转义，或者将单引号用于其中一种目的。

单引号可以工作：

```
cell.innerHTML = '<input id="Button" type="button" value="ClickHere" />'; 
```

或者，转义引号会起作用：

```
cell.innerHTML = "<input id=\"Button\" type=\"button\" value=\"ClickHere\" />"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:09:30.210

我想你正在寻找`<input type="button" />`不选择也许？选择元素用于下拉菜单。

# debugging - 使用 GCC 检测 ABI 兼容性问题

> ID：12629255
> 
> 赞同：10
> 
> 时间：2012-09-27T20:07:59.723
> 
> 标签：debugging, gcc, g++, glibc, abi

我最近花了相当多的时间来跟踪一个问题，该问题是由编译一个库引起的`-D_GLIBCXX_DEBUG`（它告诉 libstdc++ 使用带有额外检查的标准库的调试版本）但编译客户端程序时没有。这导致了 ABI 兼容性问题。

有什么方法可以用 GCC 自动检测这样的问题吗？Visual Studio 提供了我认为可以达到此目的的[`detect_mismatch`编译指示](http://msdn.microsoft.com/en-us/library/ee956429.aspx)，但我不知道任何 GCC 等效项。`GLIBCXX_3.4.9`GCC做了一些嵌入符号名称（`mylib_debug_stl`例如*使用*那个符号真的很hacky。

或者，其他人如何避免这个问题？将库的检查版本构建为不同的名称或类似名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T22:00:48.033

> 有什么方法可以用 GCC 自动检测这样的问题吗？

只有链接器可以检测您是否链接了不兼容的代码，而不是编译器。

备用链接器可以检测该选项`gold`的一些问题。`--detect-odr-violations`

> 或者，其他人如何避免这个问题？将库的检查版本构建为不同的名称或类似名称？

我只是确保在我想使用调试模式时重建所有内容，我认为我不想保留一个使用调试模式构建的库。它用于调试，而不是用于正常使用。

反正我很少用`-D_GLIBCXX_DEBUG`，我更经常做类似的事情：

```
#if 0
# include <debug/vector>
namespace my_class_stl = __gnu_debug;
#else
#include <vector>
namespace my_class_stl = std;
#endif

struct my_class
{
  typedef my_class_stl::vector<int> container;
  typedef container::iterator iterator;
  // ...
}; 
```

然后，当我想为该特定类使用调试模式向量时，我会更改预处理器条件，而不影响程序中的**每个**容器。因为更改涉及写入文件（并因此更新其时间戳）任何依赖于该标头的内容都将由 重建`make`，并且有两种不同的类型`std::vector<int>`和`__gnu_debug::vector<int>`，它们具有不同的符号并且不能被链接器混淆。

只是定义`_GLIBCXX_DEBUG`不会导致所有依赖项都被重建，并且会默默地改变`std::vector`全局的定义，而不是将特定的容器更改为具有不同名称的不同类型，`__gnu_debug::vector`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T23:25:07.347

> 原来是由使用 -D_GLIBCXX_DEBUG 编译库引起的（它告诉 libstdc++ 使用带有额外检查的标准库的调试版本）但编译客户端程序时没有。

支持这种配置是一个*明确* `libsdc++`的调试模式设计目标，我有点怀疑这是你问题的*真正*原因。

在`-D_GLIBCXX_DEBUG`没有`ABI`.

# ajax - 尝试将 jQuery 1.4.2 插件更新到 1.8.2 但出现语法错误，无法识别的表达式

> ID：12629257
> 
> 赞同：5
> 
> 时间：2012-09-27T20:08:12.360
> 
> 标签：ajax, jquery, jquery-plugins

# [解决]

有关问题的详细信息，请参见下文。

线

```
var maxUl = $(objUl+'[rel="'+maxItems+'"]'); 
```

需要是

```
var maxUl = $(objUl.attr('id')+'[rel="'+maxItems+'"]'); 
```

与当前的 jQuery 1.8.2 实现一起工作。

* * *

首先感谢您花时间与我一起研究我的问题。我已经查看了许多其他问题，并且尽我所能告诉这个问题不一样。

当我尝试在页面上加载 jQuery 插件时，我从 firebug 收到此错误：错误：语法错误，无法识别的表达式：[object Object][rel="7"]

*注意：*该插件在运行 jQuery 1.4.2 时工作正常，但运行多个 jQuery 实例不是该项目的选项。

我正在尝试实现的插件可以在[这里找到并](http://www.ajaxshake.com/plugin/EN/828/263cff77/drill-down-menu-with-jquery-drilldownmenu.html)[在这里](http://www.ajaxshake.com/demo/EN/828/263cff77/drill-down-menu-with-jquery-drilldownmenu.html)下载

## 最佳的揣测

到目前为止，我想我已经设法将其缩小到他的 js 文件（jquery.dcdrilldown.1.2.js）中的这两行

```
// Get level of largest sub menu
var maxUl = $(objUl+'[rel="'+maxItems+'"]');
var getIndex = findMaxIndex(maxUl); 
```

尽我所能在打电话后告诉休息

```
var maxUl = $(objUl+'[rel="'+maxItems+'"]'); 
```

因为萤火虫没有到达`findMaxIndex()`方法中的断点。

## 我的 HTML 文件看起来像这样

### JS 调用

```
$(function() { // Drill down menu
  $('#drilldown').dcDrilldown({
    speed           : 'slow',
    saveState       : true,
    showCount       : false,
    linkType        : 'breadcrumb'
}); 
```

### HTML ul

```
<div class="graphite dd-container">
<ul id="drilldown">
<li><a href="#">Home</a>
  <ul>
    <li><a href="#">Page 1</a></li>
    <li><a href="#">Page 2</a></li>
    <li><a href="#">Page 3</a></li>
    <li><a href="#">Page 4</a></li>
  </ul>
</li>
<li><a href="#">Products</a> 
```

您能提供的任何帮助将不胜感激，谢谢大家。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T20:45:13.610

您需要查看 objUl 的设置。我敢打赌，当您连接到另一个字符串时，它曾经将自己解析为一个字符串。现在它可能不会这样做（因此是 [object Object] 部分）。

查看 objUl 的设置并尝试获取它的 .attr('id') 值。

**编辑** 更改

```
var maxUl = $(objUl+'[rel="'+maxItems+'"]'); 
```

至

```
var maxUl = $(objUl.attr('id')+'[rel="'+maxItems+'"]'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-28T19:22:27.290

要使用 jQuery 1.10.4，进行以下更改使其工作正常

```
// var maxUl = $(objUl+' [rel="'+maxItems+'"]');
var maxUl = $(objUl.html()+' [rel="'+maxItems+'"]'); 
```

和

```
//$('#'+idHeader+' a').live('click',function(e){
$('#'+idHeader).on('click','a',function(e){ 
```

# scala - 静态类型为 Map 时，Scala SortedMap.map 方法返回未排序的地图

> ID：12629260
> 
> 赞同：7
> 
> 时间：2012-09-27T20:08:25.640
> 
> 标签：scala, collections, functional-programming, higher-order-functions, sortedmap

我在使用 Scala 的 SortedMap[A,B] 时遇到了一些未经授权的奇怪现象。如果我声明对 SortedMap[A,B] "a" 的引用是 Map[A,B] 类型，那么对 "a" 的映射操作将产生一个未排序的映射实现。

例子：

```
import scala.collection.immutable._

object Test extends App {
    val a: Map[String, String] = SortedMap[String, String]("a" -> "s", "b" -> "t", "c" -> "u", "d" -> "v", "e" -> "w", "f" -> "x")
    println(a.getClass+": "+a)

    val b = a map {x => x}  // identity
    println(b.getClass+": "+b)
} 
```

上面的输出是：

> class scala.collection.immutable.TreeMap: Map(a -> s, b -> t, c -> u, d -> v, e -> w, f -> x)
> class scala.collection.immutable.HashMap$ HashTrieMap: Map(e -> w, f -> x, a -> s, b -> t, c -> u, d -> v)

身份转换前后键/值对的顺序不一样。

奇怪的是，从“a”中删除类型声明会使这个问题消失。这在一个玩具示例中很好，但会使 SortedMap[A,B] 无法用于传递给需要 Map[A,B] 参数的方法。

一般来说，我希望诸如“map”和“filter”之类的高阶函数不会改变它们所应用的集合的基本属性。

有谁知道为什么“地图”会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:20:29.947

与大多数收集`map`方法一样，该方法不是专门为`SortedMap`. 它在更高级别的类（[TraversableLike](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/collection/TraversableLike.scala#L230)）上定义，并使用“构建器”将映射结果转换为正确的返回类型。

那么它如何决定“正确”的返回类型是什么？好吧，它试图给你返回它开始时的返回类型。当你告诉 Scala 你有 a`Map[String,String]`并要求它这样做时`map`，构建器必须弄清楚如何“构建”返回的类型。由于您告诉 Scala 输入是 a `Map[String,String]`，因此构建器决定`Map[String,String]`为您构建 a 。建造者不知道你想要一个`SortedMap`，所以它不会给你一个。

当您不使用`Map[String,String]`类型注释时它起作用的原因是 Scala 推断出的类型`a`is `SortedMap[String,String]`。因此，当您调用 时`map`，您是在 a 上调​​用它`SortedMap`，并且构建器知道构造 a`SortedMap`以返回。

至于您断言方法不应改变“基本属性”，我认为您从错误的角度看待它。这些方法将始终为您返回一个符合您指定类型的对象。它是定义构建器行为的*类型，而不是底层实现。*当你这样想的时候，它是形成方法应该如何表现的契约的*类型。*

## 为什么我们想要这个？

为什么这是首选行为？让我们看一个具体的例子。假设我们有一个`SortedMap[Int,String]`

```
val sortedMap = SortedMap[Int, String](1 -> "s", 2 -> "t", 3 -> "u", 4 -> "v") 
```

如果我`map`用一个修改键的函数来覆盖它，当它们的键发生冲突时，我就有丢失元素的风险：

```
scala> sortedMap.map { case (k, v) => (k / 2, v) }
res3: SortedMap[Int,String] = Map(0 -> s, 1 -> u, 2 -> v) 
```

但是，嘿，没关系。`Map`毕竟是 a ，而且我知道它是 a `Map`，所以我应该期待这种行为。

现在假设我们有一个接受一`Iterable`对的函数：

```
def f(iterable: Iterable[(Int, String)]) = 
  iterable.map { case (k, v) => (k / 2, v) } 
```

由于这个函数与 s 无关，如果这个函数的结果的元素比输入的少`Map`，那将是*非常令人惊讶的。*毕竟，`map`on a`Iterable`应该产生每个元素的映射版本。但是 a`Map` *是*一`Iterable`对中的一个，所以我们可以将它传递给这个函数。那么当我们这样做时，Scala 会发生什么？

```
scala> f(sortedMap)
res4: Iterable[(Int, String)] = List((0,s), (1,t), (1,u), (2,v)) 
```

看那个！没有丢失任何元素！换句话说，Scala 不会因为违反我们对`map`on an`Iterable`应该如何工作的期望而让我们感到惊讶。如果构建器尝试`SortedMap`根据输入是 a 的事实来生成 a `SortedMap`，那么我们的函数`f`会产生令人惊讶的结果，这会很糟糕。

所以这个故事的寓意是：使用类型告诉集合框架如何处理您的数据。如果您希望您的代码能够预期地图已排序，那么您应该将其键入为`SortedMap`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T21:39:34.663

的签名`map`是：

`def map[B, That](f: ((A, B)) ⇒ B)(implicit bf: CanBuildFrom[Map[A, B], B, That]): That`

隐式参数`bf`用于构建结果集合。因此，在您的示例中，由于`a`is的类型，因此 of`Map[String, String]`的类型`bf`是：

`val cbf = implicitly[CanBuildFrom[Map[String, String], (String, String), Map[String, String]]]`

它只是构建了一个`Map[String, String]`没有任何属性的`SortedMap`. 看：

`cbf() ++= List("b" -> "c", "e" -> "g", "a" -> "b") result`

有关更多信息，请参阅这篇出色的文章：[http ://docs.scala-lang.org/overviews/core/architecture-of-scala-collections.html](http://docs.scala-lang.org/overviews/core/architecture-of-scala-collections.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T22:53:07.193

正如 dyross 指出的那样，它是 Builder，它是根据目标类型（通过 CanBuildFrom）选择的，它决定了您从`map`操作中获得的集合的类。现在这可能不是您想要的行为，但它确实允许您选择目标类型：

```
val b: SortedMap[String, String] = a.map(x => x)(collection.breakOut) 
```

（`breakOut`给出一个`CanBuildFrom`类型由上下文决定的泛型，即我们的类型注解。）

因此，您可以添加一些类型参数，允许您接受任何类型的 Map 或 Traversable（请参阅[此问题](https://stackoverflow.com/q/12204869/770361)），这将允许您在方法中执行映射操作，同时保留正确的类型信息，但正如您所见，这并不简单.

我认为一个更简单的方法是使用 collections' 等方法来定义应用于集合的函数`map`，`flatMap`而不是通过将集合本身​​发送到方法。

即代替

```
def f[Complex type parameters](xs: ...)(complex implicits) = ...
val result = f(xs) 
```

做

```
val f: X => Y = ...
val results = xs map f 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T23:46:38.287

简而言之：您明确声明`a`为 type `Map`，并且 Scala 集合框架非常努力地尝试高阶函数，例如`map`并且`filter`不更改它们所应用的集合的基本属性，因此它也会返回 a`Map`因为这就是你明确告诉它你想要。

# javascript - 函数似乎访问了变量的最后一个引用，而不是将其存储在函数调用中

> ID：12629261
> 
> 赞同：0
> 
> 时间：2012-09-27T20:08:29.067
> 
> 标签：javascript, jquery

我打算把这篇写得又长又复杂，但我想采用直截了当的方法。

我有一个循环，它创建一个元素数组，其中变量**Url**。数组如下所示：

```
 x = [url,function(){...},function(){...}]; 
```

然后进入一个arrayList：

```
 arrayList = [x1,x2,x3,x4,x5]; 
```

我认为到目前为止这是有道理的。它在 arrayList 对象中存储 1 个 var 和 2 个函数。

这是踢球者。

当我遍历arrayList 时，**url**都是一样的，是创建arraylist 的forloop 中对**url的最后引用。**

我解决这个问题的尝试是，对变量执行 .toString() 以将其内容存储在数组中，而不是变量名本身。 *那没用:(*

我会怎么做才能解决这个问题？我很难过:-(

**编辑：我想展示循环的样子，因为其中一个答案是关于数组不准确地引用它**

**Edit2：导致问题的 url 是内部 url，在下面的 displayFile 中。似乎这些都指向同一个参考，这是一个诺诺。我将如何改变这些？我必须将它作为参数传递吗？？？**

```
var newArray = new Array();
for(var i=0;i<fileUrls.length;++i) {
   var url = fileUrls[i];
   var x = [];//new Array();
   x = [url,
    function(){
       displayFile(url, 'image', null, ft_id, null, null, null, null, !MA.isiOS());
    }, 
    function(e){
    if(DEBUG) console.log('Error creating gallery thumbnail');
    alert('There was a problem creating a thumbnail');
    MA.hideMessage();
    }
];
newArray.push(x);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:16:02.280

我认为你拥有的是：

```
arrayList = [x,x,x,x,x]; 
```

即包含对同一对象的多个引用的数组。如果是这种情况，那么当您查看`url`不同项目中的属性时，您一直在查看同一个属性，因为它一遍又一遍地是同一个项目。

这将是重用数组来填充`arrayList`数组的结果，例如：

```
var x = [];
var arrayList = [];
for (int i = 0; i < 5; i++) {
  x[0] = 'url ' + i;
  x[1] = function(){};
  x[2] = function(){};
  arrayList.push(x);
} 
```

解决方案是在每次迭代中创建一个新数组：

```
var arrayList = [];
for (int i = 0; i < 5; i++) {
  var x = [];
  x[0] = 'url ' + i;
  x[1] = function(){};
  x[2] = function(){};
  arrayList.push(x);
} 
```

* * *

### 编辑：

要使调用中`url`使用的变量特定于每次迭代，您需要一个闭包来捕获该值：`displayFile`

```
var newArray = new Array();
for(var i=0;i<fileUrls.length;++i) {
  var url = fileUrls[i];
  var x = [];//new Array();

  var f;
  (function(url){
    f = function(){
      displayFile(url, 'image', null, ft_id, null, null, null, null, !MA.isiOS());
    };
  })(url);

  x = [url, f , 
    function(e){
      if(DEBUG) console.log('Error creating gallery thumbnail');
      alert('There was a problem creating a thumbnail');
      MA.hideMessage();
    }
  ];
  newArray.push(x);
} 
```

# php - 403 禁止错误和 html 元标记

> ID：12629262
> 
> 赞同：0
> 
> 时间：2012-09-27T20:08:43.970
> 
> 标签：php, html, apache, meta-tags, http-status-code-403

我正在将 php/mysql 与 apache 2 服务器一起使用。

我有一个使用`<textarea>`html 标签的 php 数据输入表单。

我通常输入一些元标记，如“描述”或“关键字”，当我保存表单时，文本区域保存在我的数据库中的 mysql 文本区域字段中。

好久没有问题，但是前几天我尝试保存数据输入表单时，它会产生403禁止错误。

上面有一些奇怪的东西。如果我在 textarea 中只输入一个元标记 `<meta name="description"...>`，则没有问题，但是如果我按“Enter”键并像`<meta name="keywords"...>`在 textarea 中一样添加第二个标签，然后按“保存”键，则会产生错误。

令人惊讶的是，如果我在两个行标签之间写一个字母，例如

`<meta name="description"...>A<meta name="keywords"...>`，它再次接受并将其保存到数据库中。

我联系了我的管理服务器并告诉了有关`mod_security`apache 服务器上设置的错误配置，但他们认为这不是问题。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:47:18.837

我找不到原因，但我可以找到解决方案。

我在字符串的开头或结尾手动添加了一个无用的字符，例如 char(255)。

字符串，表示`<meta name="description"...>`或，`<meta name="keywords"...>`。

当我想将字符串保存在我的数据库中时，只需删除这个字符

```
$string = str_replace(char(255),'',$string); 
```

令人惊讶的是！...一切都会好起来的，它接受 $string ！

非常感谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:09:16.880

检查您的 www 或 public_html 目录的权限。

# groovy - grails：将域类分配给另一个域类

> ID：12629263
> 
> 赞同：1
> 
> 时间：2012-09-27T20:08:45.690
> 
> 标签：groovy, grails-2.0

我有一个用户被分配到团队的场景。
不同的 ClientServices 分配给不同的团队，
我们需要以 RoundRobin 方式将这些团队中的用户分配给 clientservice
我试图按如下方式解决它以获取将映射团队名称和 ClientServiceInstance 列表的地图，以便我可以进行进一步处理在上面

```
def teamMap = [:]  
clientServicesList.each {clientServiceInstance->  
            if(teamMap[clientServiceInstance.ownerTeam] == null){  
                teamMap.putAt(clientServiceInstance.ownerTeam, new ArrayList().push(clientServiceInstance))  
            }else{  
                def tmpList = teamMap[clientServiceInstance.ownerTeam]  
                tmpList.push(clientServiceInstance)  
                teamMap[clientServiceInstance.ownerTeam] = tmpList  
            }  
        }    

but instead of pushing clientServiceInstance it pushes true.

Any idea? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:33:30.907

我相信另一个版本是：

```
def teamMap = clientServicesList.inject( [:].withDefault { [] } ) { map, instance ->
  map[ instance.ownerTeam ] << instance
  map
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T20:23:23.977

`new ArrayList().push(clientServiceInstance)`return `true`，这意味着您将其放入您的列表中，`teamMap`而不是我认为应该是列表的列表中？相反，您可能想要

```
teamMap.putAt(clientServiceInstance.ownerTeam, [clientServiceInstance]) 
```

顺便说一句，您的代码不是很 Groovy ;)

您可以将其重写为

```
def teamMap = [:]
clientServicesList.each { clientServiceInstance ->
    if (teamMap[clientServiceInstance.ownerTeam]) {
        teamMap[clientServiceInstance.ownerTeam] << clientServiceInstance
    } else {
        teamMap[clientServiceInstance.ownerTeam] = [clientServiceInstance]
    }
} 
```

尽管我确信有更好的方法来编写它。

# jquery - 如何使用 jquery 使用 each() 方法填充此表

> ID：12629264
> 
> 赞同：0
> 
> 时间：2012-09-27T20:08:44.967
> 
> 标签：jquery, each

我试图迭代这个过程..使用 jquery (each();) 中的 for-loop 方法，但我不能让它发生。知道如何在每次添加更多 carItems 而无需手动操作时创建更多“行”吗？谢谢！

```
 <!doctype html>
    <html>
    <head>
        <meta charset="utf-8">
        <title>  </title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

        <script type="text/javascript" src="script.js"></script>
    </head>

    <body>
        <table id="cart">
            <thead>
              <tr>
                <th>Name</th>
                <th>Qty.</th>
                <th>Total</th>
              </tr>
            </thead>
            <tr class="template" style="display:none;">
              <td><span class="item_name">Name</span></td>
              <td><span class="item_qty">Quantity</span></td>
              <td><span class="item_total">Total</span>.00</td>
            </tr>
          </table>
    </body>

    </html>

    function template(row, cart) {
      row.find('.item_name').text(cart.name);
      row.find('.item_qty').text(cart.qty);
      row.find('.item_total').text(cart.total);
      return row;
    }

    $(document).ready(function(){
      var newRow = $('#cart .template').clone().removeClass('template');
        var newRow_1 = $('#cart .template').clone().removeClass('template');

      var cartItem = 
      {
        name: 'Glendatronix',
        qty: 1,
        total: 450
      };

       var cartItem_1 = {
        name: 'Glendatronix',
        qty: 1,
        total: 450
      };

      template(newRow, cartItem)
        .appendTo('#cart')
        .fadeIn(); 

          template(newRow_1, cartItem_1)
        .appendTo('#cart')
        .fadeIn();   
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:25:20.357

```
var tmpl = $('#cart .template').clone();    

var template = function(cart) {
    var html = tmpl;
    html.find('.item_name').text(cart.name);
    html.find('.item_qty').text(cart.qty);
    html.find('.item_total').text(cart.total);
    return html.html();
}

var cart = [
{
  name: 'Glendatronix 1',
  qty: 1,
  total: 450
},{
  name: 'Glendatronix 2',
  qty: 1,
  total: 450
}];

$.each(cart, function(item) {
   $('#cart').append('<tr>' + template(cart[item]) + '</tr>' );
}); 
```

所以基本上，将您的购物车摘要放在一个数组中。遍历这个数组，获取基本模板并用数据修改它。但是在我上一条评论中用模板应该如何工作来改变它，我不喜欢我添加的技巧:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T20:40:27.247

您也可以在此处尝试此解决方案。它还使用来自 jquery 的克隆并附加该项目。

[http://jsfiddle.net/L89kw/5](http://jsfiddle.net/L89kw/5)

顺便说一句：在将元素附加到表*后*`.fadeIn()`添加（我`animate({opacity: 1})`在示例中使用）很重要。没有阅读文档，但我认为 append 不会返回新元素（至少在 jquery 1.7.2 中没有）

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T20:29:05.697

```
var cartItems = 
[
    {
        name: 'Glendatronix',
        qty: 1,
        total: 450
    },
    {
        name: 'Glenda',
        qty: 2,
        total: 451
    }
];

$(function(){

     $.each(cartItems, function(){

         var $tr = $('<tr/>')
             .html('<td>' +  this.name + '</td>'); //add names, quantity etc here...
             .appendTo('#cart');

     });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T20:19:27.393

克隆很好，但你可以采取下一步并使用类似车把的东西[http://handlebarsjs.com/](http://handlebarsjs.com/)我有很好的经验

另一个替代 JQUERY 模板插件[http://api.jquery.com/category/plugins/templates/](http://api.jquery.com/category/plugins/templates/)

或者对你的代码有更大影响的 knockout.js 作为一个更广泛的框架。*

# clojure - Nest Noir 路线

> ID：12629265
> 
> 赞同：2
> 
> 时间：2012-09-27T20:08:56.010
> 
> 标签：clojure, routes, metaprogramming, noir

我有一个为特定数据存储生成密钥的应用程序。如果有 7 个这样的路由和 5 个应用程序，那么我的 event.clj 中将总共有 35 个路由（或者，如果拆分，7/file in 5 个文件）。我想动态地执行以下操作：

```
(defnested "/:app-name"
    (defpage "/generate/event" {:keys [app-name event-name time] :as key-map}
     (response/json
      {:key (key-model/build-key :event key-map)}))

    (defpage "/generate/event/unread" {:keys [app-name event-name] :as key-map}
     (response/json
      {:key (key-model/build-key :unread-for-event key-map)}))
) 
```

这样我就可以编写每条路由一次，然后传递应用程序名称（而不是在查询参数中传递它，它可以工作但不是很 RESTful。

奖金

如何动态调用命名空间，以便`key-model/build-key`调用`redis-model/build-key`或`riak-model/build-key`基于应用名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:01:32.973

不确定我是否理解这个问题，但这不是你要找的：

```
(defpage "/:app-name/generate/event" {:keys [app-name event-name time] :as key-map}
    (response/json
      {:key (key-model/build-key :event key-map)}))

(defpage "/:app-name/generate/event/unread" {:keys [app-name event-name] :as key-map}
     (response/json
      {:key (key-model/build-key :unread-for-event key-map)})) 
```

奖金

我还将寻求一个简单的解决方案，即使用带有功能的地图来生成密钥，例如：

```
(def key-gen {"redis" redis-model/build-key
       "riak" riak/build-key})

(response/json
      {:key ((get key-gen app-name) :event key-map)}) 
```

如果您真的想动态查找 build-key 功能，您可以执行以下操作：

```
(defn build-key [app-name] 
   (let [the-ns (symbol (str app-name "-model"))] 
      (require the-ns) 
      (ns-resolve the-ns 'build-key))) 
```

# actionscript-3 - 如何在 ActionScript 3.0 中限制视频流接收端的带宽使用？

> ID：12629268
> 
> 赞同：0
> 
> 时间：2012-09-27T20:09:16.200
> 
> 标签：actionscript-3, streaming, bandwidth, rtmp, bandwidth-throttling

现在，我正在进行一个项目，该项目主要使用 ActionScript 3.0（在服务器端使用一点 2.0）在 RTMP 上移动视频流，并且我们已经具备了限制客户端上这些视频流的带​​宽使用的功能等级。然而，我们只是通过调用 Camera 类的 setQuality() 方法来做到这一点，这会影响该视频流的每个接收器。现在虽然我们确实需要一种方法来有效地设置各个接收器的带宽使用情况，但显然 VideoDisplay、NetStream 和 NetConnection 都几乎没有这种功能。在 AS3 中没有一些体面的方法可以做到这一点吗？如果有办法，怎么做？谢谢！

编辑：为清楚起见，假设视频流的发送者将其相机对象的质量设置为使用 1 兆带宽。我怎样才能让该流的接收者只使用半兆带宽来流式传输该视频而不会弄乱发送者的 1 兆设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T21:36:51.177

FMS 只是将从发布者收到的数据传递给订阅者集。它不会改变它（至少从数据的角度来看）。但是，您需要的是根据订阅者的需要对正在发布的视频流进行转码。简单的 RTMP 根本不这样做。我认为有一种方法可以使用 http 流功能为同一数据发布多个流。但是，在这种情况下，发布者实际上会向 FMS 发布多个媒体流。

# jquery - 访问所有 J Query 验证器错误

> ID：12629270
> 
> 赞同：1
> 
> 时间：2012-09-27T20:09:27.453
> 
> 标签：jquery, validation

我正在使用 JQuery 验证插件。我提供了一个自定义的 showError 函数，如下所示：

```
var errorHandler = function(errorMap, errorList) {
    console.log("count: " + this.errorList.length);

    var text = "";
    if (this.errorList.length > 0) {
      text = "Please correct the following errors: ";
      for (var i = 0; i < this.errorList.length; i++) {
        text += "* " + this.errorList[i].message.errorCode + "<br>";
      }
    }
    $('#oopDialogErrorContainer').html(text);
    this.defaultShowErrors();
} 
```

我的问题是我想访问表单中所有现有的错误。表单有许多字段，但是当调用 errorHandler（此函数作为 showError 选项传递给 validate()）时，errorList 仅包含上次验证的字段中的错误。在检查验证器对象时，没有任何地方存储所有当前错误。我需要自己管理吗？（看起来是这样，但我可能会遗漏一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:37:26.427

[http://docs.jquery.com/Plugins/Validation/validate#options](http://docs.jquery.com/Plugins/Validation/validate#options)

**`errorLabelContainer`**

> 验证时隐藏并显示此容器。
> 
> *“所有错误标签都显示在 ID 为“messageBox”的无序列表中，由作为 errorContainer 选项传递的选择器指定。所有错误元素都包含在 li 元素中，以创建消息列表。”*

```
$("#myform").validate({
   errorLabelContainer: "#messageBox",
   wrapper: "li",
   submitHandler: function() { alert("Submitted!") }
}) 
```

和...

**`errorContainer`**

> 验证时隐藏并显示此容器。
> 
> *“使用附加容器来存储错误消息。作为 errorContainer 给出的元素在发生错误时都会显示和隐藏。但是错误标签本身会添加到作为 errorLabelContainer 给出的元素中，这里是一个无序列表。因此错误标签也被包装到 li 元素中（包装器选项）。”*

```
$("#myform").validate({
   errorContainer: "#messageBox1, #messageBox2",
   errorLabelContainer: "#messageBox1 ul",
   wrapper: "li", debug:true,
   submitHandler: function() { alert("Submitted!") }
}) 
```

# ajax - ajaxifying复合组件的问题

> ID：12629274
> 
> 赞同：0
> 
> 时间：2012-09-27T20:09:40.297
> 
> 标签：ajax, jsf, jsf-2, composite-component, ajax4jsf

如果根据ajaxify复合组件读取了很多条目并且找不到我的错误，这导致没有发送ajax请求。也许其他人可以找到它。

声明的复合组件`component.xhtml`看起来像

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:composite="http://java.sun.com/jsf/composite"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets">

<composite:interface componentType="myComponentType">
    <composite:attribute name="ajaxListener" method-signature="void listener(javax.faces.event.AjaxBehaviorEvent)" required="false"/>
    <composite:clientBehavior name="update" event="click" targets="#{cc.clientId}:submit"/>
</composite:interface>

<composite:implementation>
    <h:form id="form" prependId="false">
        <h:panelGroup layout="block" id="#{cc.clientId}-body">
            <h:commandButton type="submit" id="submit" value="Send"/>
        </h:panelGroup>
    </h:form>
</composite:implementation>

</html> 
```

我通过以下方式使用这个组件

```
<h:panelGroup id="viewport" layout="block" binding="#{controller.viewport}">
    ... 
    <c:forEach items="#{controller.elements}" var="element">

        <my:component id="#{element.id}">
            <f:ajax event="update" listener="#{controller.update}" render="@form"/>
        </my:component>

        ... rendering some different components by element.type what requires JSTL c:forEach/c:if

    </c:forEach>
</h:panelGroup> 
```

`submit`我的具体问题是，当单击按钮但页面重新加载时，FireBug 没有捕获 ajax 请求。所以 ajax 事件没有正确绑定到提交按钮。

我第一次尝试`f:ajax`在复合组件中声明。因此我使用属性`ajaxListener`。这有效，但没有触发`update`带有签名的 - 方法。`void update(AjaxBehaviorEvent e)`

希望任何人都可以识别错误！

* * *

**更新**

我的问题是我`h:panelGroup`使用 JSTL 标记`c:forEach`和`c:if`. 如果我省略这些标签并插入一个静态复合组件，则`ajaxListener`可以触发 -attribute 中的侦听器方法并且正确发送 ajax 请求。上面描述的方法无论如何都不起作用。

**更新第 2 版**

也许任何人都可以解释为什么 ajax 监听器没有正确绑定？！

提前致谢！

# scala - 组合：改变参数顺序

> ID：12629275
> 
> 赞同：0
> 
> 时间：2012-09-27T20:10:18.940
> 
> 标签：scala, recursion

```
def comb(c: Int, r: Int): Int = {
      if(r == 1) c
      else if(r < c) comb(c-1, r-1) + comb(c-1, r)
      else 1
}
comb(20,10) //184,756 
```

我想做的就是将其称为`comb(10,20)`并获得相同的结果。我尝试在签名中替换`c`为`r`和`r`除`c`，但它不起作用。

```
 def comb(c: Int, r: Int): Int = {
  if(c == 1) r
  else if(c < r) comb(r-1, c-1) + comb(r-1, c)
  else 1
  } 
  comb(10,20) //2 -> not right 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:23:12.750

我要补充一点，不要害怕本地定义：

```
scala> def comb(c: Int, r: Int): Int = {
 |       if(r == 1) c
 |       else if(r < c) comb(c-1, r-1) + comb(c-1, r)
 |       else 1
 | }
comb: (c: Int, r: Int)Int

scala> comb(20,10) //184,756
res0: Int = 184756

scala> def cc(c: Int, r: Int): Int = {
     | def cc2(c: Int, r: Int): Int = {
     | if(r == 1) c
     | else if(r < c) comb(c-1, r-1) + comb(c-1, r)
     |  else 1
     | }
     | if (c < r) cc2(r,c) else cc2(c,r)
     | }
cc: (c: Int, r: Int)Int

scala> cc(20,10)
res1: Int = 184756

scala> cc(10,20)
res2: Int = 184756 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T20:12:55.427

您*还*需要更改子调用中的顺序：

```
def comb(c: Int, r: Int): Int = {
  if (c == 1) r
  else if (c < r) comb(c - 1, r - 1) + comb(c, r - 1)
  else 1
} 
```

这给出了预期的结果：

```
comb(10, 20)  // 184756 
```

# mysql - 没有索引的表的记录排序

> ID：12629277
> 
> 赞同：2
> 
> 时间：2012-09-27T20:10:21.037
> 
> 标签：mysql, sql

我很好奇 MySQL 如何在表上没有索引或约束的情况下进行内部记录排序。假设数据内容永远不会改变，相同的 SELECT 是否总是以相同的顺序返回记录，或者您可以期待打乱的顺序？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:17:51.527

如果您不创建索引，则“最后插入的将是最后显示的”如果您进行一些更新或删除并插入表中，则根本不正确。IE 如果您删除并插入一条记录，订单将开始混乱（如果您没有指定订单）。此外，索引不会始终为您提供完美的订单，使用 HUGE TABLES，有很多记录，您不能相信索引会自行保持订单（请记住索引也可能损坏），因此总是推荐使用`order by`从句

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T20:15:42.117

你可以期待订单洗牌。 `ORDER BY`很关键。

# sql - SQL 插入/更新/删除触发器效率

> ID：12629279
> 
> 赞同：2
> 
> 时间：2012-09-27T20:10:23.610
> 
> 标签：sql, sql-server, triggers

在我们的数据库级应用程序中，我在模式 Billing 和 Billing_History 中有一个名为 Installments 的表。

显示的触发器位于计费模式中的分期付款表上。

这样做是每次在计费模式中插入/更新记录时，它也会写入历史文件。

如果从计费表中删除记录，则将其写入历史表，并带有“已删除”指示符 = true。

我认为随着更多记录的添加，“如果不存在（从插入中选择 *）正在扼杀我的表现。

有没有更有效的方法是写这个触发器？

```
Create TRIGGER [Billing].[Installments_InsertDeleteUpdate_History]
ON [Billing].[Installments]
AFTER INSERT, DELETE, UPDATE
AS BEGIN
Insert Into Billing_History.Installments
    Select *, GetDate(), 0 From Inserted

If Not Exists (Select * From Inserted)
    Insert Into Billing_History.Installments
        Select *, GetDate(), 1 From Deleted

SET NOCOUNT ON;

-- Insert statements for trigger here 
```

结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:57:46.400

I would suggest that the trigger form you have is the best performing, given it's required tasks. There really aren't much better ways to achieve the same auditing result.

The answer here would agree [Creating audit triggers in SQL Server](https://stackoverflow.com/questions/1962398/creating-audit-triggers-in-sql-server) and here's a [long discussion](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=52356) about performance of audit solutions.

Your situation is slightly different, because you actually DON'T want the deleted (original) table in UPDATE situations, hence the IF.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:27:45.330

为 INSERT 和 UPDATE 创建一个触发器，为 DELETE 创建第二个触发器。然后，您不必使用 IF 语句和慢速查询来检查记录的位置。

From a design perspective, see if you can eliminate triggers. They're a mess.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T21:47:10.303

Well you could make this simple change:

```
Create TRIGGER [Billing].[Installments_InsertDeleteUpdate_History]
ON [Billing].[Installments]
AFTER INSERT, DELETE, UPDATE
AS BEGIN

If Not Exists (Select * From Inserted)
    Insert Into Billing_History.Installments
        Select *, GetDate(), 1 From Deleted
ELSE
    Insert Into Billing_History.Installments
        Select *, GetDate(), 0 From Inserted

SET NOCOUNT ON;

-- Insert statements for trigger here 
```

Which is *logically* more efficient, but whether it's *physically* more performant is an open question. If it is actually faster, it sure won't be by very much.

# wpf - WPF Datagrid - 添加和删除行和 MVVM

> ID：12629281
> 
> 赞同：3
> 
> 时间：2012-09-27T20:10:25.760
> 
> 标签：wpf, data-binding, mvvm, datagrid

如果 my`DataGrid`绑定到一个 MVVM 属性并且用户删除或添加一行到网格，它不应该自动添加或删除`ObservableCollection`绑定到它的数据吗？

我必须执行命令才能使其正常工作吗？它不仅适用于仅绑定到集合吗？

## XAML

```
<ExtendedGridControl:ExtendedDataGrid Grid.Row="5" Height="200" VerticalAlignment="Top" Grid.ColumnSpan="6"  Margin="5,4,5,0"  ItemsSource="{Binding InvoiceDetailsForSelectedJobInvoice, Mode=TwoWay}" AutoGenerateColumns="False">
    <DataGrid.Columns>
        <ExtendedColumn:ExtendedDataGridTextColumn Header="Description"  Width="200*" AllowAutoFilter="False"
                        Binding="{Binding Detail_Item_Description}" />
        <ExtendedColumn:ExtendedDataGridTextColumn Header="Unit" Width="50" AllowAutoFilter="False"
                        Binding="{Binding Detail_Item_Unit}" />
        <ExtendedColumn:ExtendedDataGridTextColumn Header="Unit Price" Width="70"
                        Binding="{Binding Detail_Item_Unit_Price}" AllowAutoFilter="False"/>
        <ExtendedColumn:ExtendedDataGridTextColumn Header="# of Units" Width="70"
                        Binding="{Binding Detail_Item_Number_Of_Units}"  AllowAutoFilter="False"/>
        <ExtendedColumn:ExtendedDataGridTextColumn Header="Discount %"
                        Binding="{Binding Detail_Item_Discount_Percentage}" Width="70" AllowAutoFilter="False"/>
        <ExtendedColumn:ExtendedDataGridTextColumn Header="Discount"
                        Binding="{Binding Detail_Item_Discount}" Width="70" AllowAutoFilter="False"/>
        <ExtendedColumn:ExtendedDataGridTextColumn Header="Total" Width="70"
                        Binding="{Binding Detail_Item_Total_Price}" AllowAutoFilter="False"/>
        <DataGridComboBoxColumn Header="Revenue Allocation"  Width="100*"
                                SelectedValueBinding="{Binding Service_That_Revenue_Is_Allocated_To}"
                                DisplayMemberPath="ServiceName" SelectedValuePath="ServiceID"
                                ItemsSource="{Binding Source={StaticResource source}}"/>
    </DataGrid.Columns>
</ExtendedGridControl:ExtendedDataGrid> 
```

## 查看模型

```
public class InvoiceViewModel: INotifyPropertyChanged
{
    public ObservableCollection<InvoiceDetail> InvoiceDetailsForSelectedJobInvoice
    {
        get
        {
            if (_selectedInvoice != null)
            {
                _invoiceDetails = new ObservableCollection<InvoiceDetail>(_selectedInvoice.InvoiceDetails);
                return _invoiceDetails;
            }
            return null;
        }
        set
        {
            _invoiceDetails = value;
            NotifyPropertyChanged("InvoiceDetailsForSelectedJobInvoice");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(String propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T02:27:08.743

`DataGrid`s 不会自动对可观察的集合执行此操作。删除保存在内存中，您必须挂钩`CollectionChanged`事件以检查插入和删除。

这一切都在这里说明：http: [//www.codeproject.com/Articles/30905/WPF-DataGrid-Practical-Examples#updates](http://www.codeproject.com/Articles/30905/WPF-DataGrid-Practical-Examples#updates)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-29T15:25:52.423

我继续在我的视图模型中使用 a`BindingList`而不是a `ObservableCollection`，它似乎可以满足我的需要。

# java - 无法将字符串转换为长字符串

> ID：12629282
> 
> 赞同：2
> 
> 时间：2012-09-27T20:10:32.210
> 
> 标签：java, jsf, jsf-2, converter, numberformatexception

每当调用 timeConverter 的 getAsString 函数时，我都会在行中收到数字格式异常，`long timeMillis=Long.parseLong(time);`我想将给定的字符串转换为长字符串。

1）这是我的 timeConverter 类

```
package com.converter;

import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.convert.Converter;
import javax.faces.convert.ConverterException;

public class TimeConverter implements Converter {

    @Override
    public Object getAsObject(FacesContext arg0, UIComponent arg1, String arg2) {
        return arg2;
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component,
            Object value) {
        System.out.println("inside getAsString");
        String time=value.toString();

        long timeMillis=Long.parseLong(time);
        long currentTime=System.currentTimeMillis();
        long eclapseTime=timeMillis-currentTime;
        long secs=eclapseTime/1000;
        long days=secs/(60*60*24);
        long hours=(secs%(60*60*24))/60*60;
        long mins=(secs%(60*60*24)%(60*60))/60;
        long secs2=(secs%(60*60*24)%(60*60)%(60));
        StringBuffer sb = new StringBuffer();
        sb.append(days).append("days").append(hours).append("hours").append(mins).append("mins").append(secs2).append("secs");
        String object = sb.toString();
        return object;

    }

} 
```

2）这是我得到的stackstrace。

```
WARNING: StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception
java.lang.NumberFormatException: For input string: "1348756490255"
    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
    at java.lang.Integer.parseInt(Integer.java:495)
    at java.lang.Integer.parseInt(Integer.java:527)
    at com.converter.TimeConverter.getAsString(TimeConverter.java:37)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.getFormattedValue(HtmlBasicRenderer.java:519)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.getFormattedValue(HtmlBasicRenderer.java:538)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.getCurrentValue(HtmlBasicRenderer.java:357)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeEnd(HtmlBasicRenderer.java:164)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1764)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T20:18:18.877

你得到这个例外：

```
java.lang.NumberFormatException: For input string: "1348756490255"
...
  java.lang.Integer.parseInt(Integer.java:495) 
```

这意味着它对于整数来说太长了。Integer 的最大值为 2 147 483 647，因此它在 134 875 649 025 上失败，这是有道理的。

但是，您声称您遇到了此代码的问题：

```
long timeMillis=Long.parseLong(time); 
```

根据堆栈跟踪，这显然不是真的。结论是您正在运行的代码与您认为正在运行的代码不同 - 只要解析字符串应该可以正常工作。Long 的最大值为 9 223 372 036 854 775 807，这比您需要的要多得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T20:23:26.270

堆栈跟踪说您正在使用`Integer.parseInt(...)`而不是`Long.parseLong(...)`. 错误消息中的数字`"1348756490255"`远大于`Integer.MAX_VALUE`( `2147483647`)。

它还说错误发生在第 37 行`TimeConverter.java`，而您提供的源代码甚至没有 37 行。您可能忘记了在编辑器中保存然后重新编译。

顺便说一句，不要使用`StringBuffer`s。Java 编译器将使用自动转换`String`连接在幕后`+`使用。`StringBuffer`

# java - HttpURLConnection 即使在 setDoOutput(true), setRequestMethod("POST") setRequestProperty("Content

> ID：12629283
> 
> 赞同：1
> 
> 时间：2012-09-27T20:10:41.517
> 
> 标签：java, android, post, http-post, httpurlconnection

这是代码：

```
String Surl = "http://mysite.com/somefile";
String charset = "UTF-8";
query = String.format("param1=%s&param2=%s",
URLEncoder.encode("param1", charset),
URLEncoder.encode("param2", charset));

HttpURLConnection urlConnection = (HttpURLConnection) new URL(Surl + "?" + query).openConnection();
urlConnection.setRequestMethod("POST");             
urlConnection.setDoOutput(true);
urlConnection.setUseCaches(false);
urlConnection.setAllowUserInteraction(false);
urlConnection.setRequestProperty("Accept-Charset", charset);
urlConnection.setRequestProperty("User-Agent","<em>Android</em>");
urlConnection.setRequestProperty("Content-Type","application/x-www-form-urlencoded;charset=" + charset);                
urlConnection.connect(); 
```

以上仍然是一个`GET`请求。我在服务器上使用 PHP，并且能够通过`$_GET`变量访问查询的“名称=值”参数，而不是 在 2.3.7（设备）上测试的`$_POST`变量。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T20:29:11.310

当您在 url 中发送参数时，它们被放入 GET 变量中。您应该在请求的 POST 正文中发布参数以实现您正在寻找的内容。您应该在 connect() 调用之前添加以下内容并删除“？” + 来自 url 的查询。

```
 urlConnection.setRequestProperty("Content-Length", String.valueOf(query.getBytes().length));            
    urlConnection.setFixedLengthStreamingMode(query.getBytes().length);

    OutputStream output = new BufferedOutputStream(urlConnection.getOutputStream());            
    output.write(query.getBytes());
    output.flush(); 
    output.close(); 
```

# python - 通过python在ubuntu与windows中的屏幕截图

> ID：12629286
> 
> 赞同：0
> 
> 时间：2012-09-27T20:11:04.370
> 
> 标签：python, linux, ubuntu

> **可能重复：**
> [通过 python 脚本截取屏幕截图。[Linux]](https://stackoverflow.com/questions/69645/take-a-screenshot-via-a-python-script-linux)

如何在linux（ubuntu）的windows中通过以下python代码实现捕获屏幕截图并保存在文件夹中？我还想在操作系统启动时运行它。

```
import os
import sys
import time
import Image
import ImageGrab
SaveDirectory=r'C:\Documents and Settings\gg\Desktop\office_docs' 
```

# -------------------------------------------------- --------

```
for i in range(10000):

img=ImageGrab.grab()
saveas=os.path.join(SaveDirectory,'ScreenShot_'+time.strftime('%Y_%m_%d_%H_%M_%S')+'.png')
img.save(saveas)
time.sleep(10) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:49:44.413

您应该做的第一件事是将 SaveDirectory 的路径替换为适用于两个操作系统的路径。

基于[如何在 Python 中获取主目录？](https://stackoverflow.com/questions/4028904/how-to-get-the-home-directory-in-python)，您可以使用[os.path.expanduser](http://docs.python.org/library/os.path.html?highlight=os.path#os.path.expanduser)将 ~ 替换为您的主目录。

一个可能的解决方案是：

```
from os.path import expanduser
import os.path.join

SaveDirectory = expanduser(os.path.join('Desktop', 'office_docs')) 
```

对于问题的第二部分，这取决于您是想通过 GUI 还是手动编辑配置文件。[在这里](https://help.ubuntu.com/community/AddingProgramToSessionStartup)您应该找到 GUI 的说明。[在这里](http://rednectar.net/2010/11/04/changing-ubuntu-gnome-startup-applications/)您可以找到配置文件方式的说明。

我应该注意，[python 样式指南](http://www.python.org/dev/peps/pep-0008/#method-names-and-instance-variables)建议使用小写名称，用下划线分隔的单词作为实例变量，因为它提高了可读性，但这只是一个建议。

我希望你觉得这个答案很有用，如果它不起作用，我深表歉意，因为我自己没有测试过。

# perl - 根据逗号分隔的字符向量列的值融合表（data.frame）

> ID：12629287
> 
> 赞同：3
> 
> 时间：2012-09-27T20:11:04.677
> 
> 标签：perl, r, data.table, plyr, reshape

我正在做一个实验，其中我有一些相关统计数据（实际上是许多其他统计数据和描述性列）的“区域”，以及位于这些区域中的以逗号分隔的基因列表。该列表的数量可变，并且可能不包含任何内容（“NA”）。

我怎样才能“融化”表a：

```
 region_id  statistic      genelist
          1        2.5       A, B, C
          2        0.5    B, C, D, E
          3        3.2          <NA>
          4        0.1          E, F 
```

为基因列表中的每个基因创建一个单独的条目的另一个表？IE

```
 region_id statistic gene
           1       2.5    A
           1       2.5    B
           1       2.5    C
           2       0.5    B
           2       0.5    C
           2       0.5    D
           2       0.5    E
           3       3.2 <NA>
           4       0.1    E
           4       0.1    F 
```

我猜有一种方法可以用 R/plyr 做到这一点，但我不确定如何。提前致谢。

编辑：

使用 R，您可以使用以下代码重新创建这些玩具向量：

```
a <- structure(list(region_id = 1:4, statistic = c(2.5, 0.5, 3.2, 
0.1), genelist = structure(c(1L, 2L, NA, 3L), .Label = c("A, B, C", 
"B, C, D, E", "E, F"), class = "factor")), .Names = c("region_id", 
"statistic", "genelist"), class = "data.frame", row.names = c(NA, 
-4L))

b <- structure(list(region_id = c(1L, 1L, 1L, 2L, 2L, 2L, 2L, 3L, 
4L, 4L), statistic = c(2.5, 2.5, 2.5, 0.5, 0.5, 0.5, 0.5, 3.2, 
0.1, 0.1), gene = structure(c(1L, 2L, 3L, 2L, 3L, 4L, 5L, NA, 
5L, 6L), .Label = c("A", "B", "C", "D", "E", "F"), class = "factor")), .Names = c("region_id", 
"statistic", "gene"), class = "data.frame", row.names = c(NA, 
-10L)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T23:29:34.913

`data.table`时间、内存和编码效率的解决方案

```
library(data.table)
DT <- data.table(a)
DT[, list(statistic, 
          gene = unlist(strsplit(as.character(genelist), ', ' ))),
   by = list(region_id)] 
```

或者您可以使用来自 data.table 版本 >= 1.8.2 的列表的*漂亮格式*

```
DTL <- DT[, list(statistic, 
         gene = strsplit(as.character(genelist), ', ' )),
    by = list(region_id)]

DTL
##    region_id statistic    gene
## 1:         1       2.5   A,B,C
## 2:         2       0.5 B,C,D,E
## 3:         3       3.2      NA
## 4:         4       0.1     E,F 
```

在这种情况下`gene`是列表列表

```
DTL[region_id == 1,unlist(gene)]
## [1] "A" "B" "C"
DTL[region_id == 2,unlist(gene)]
## [1] "B" "C" "D" "E"
# or if the following is of interest
DTL[statistic < 2,unlist(gene)]
## [1] "B" "C" "D" "E" "E" "F" 
```

ETC

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T20:28:11.103

只需拆分字段，然后拆分基因并打印每个基因一行。您可以通过替换输入文件并将其用作 perl 脚本的参数在脚本中进行尝试，`<DATA>`例如.`<>``perl script.pl input.txt`

```
use strict;
use warnings;

while (<DATA>) {
    chomp;                                   # remove newline
    my ($reg, $stat, $gene) = split /\t/;    # split fields
    my @genes = split /,\s*/, $gene;         # split genes
    for (@genes) {
        local $\ = "\n";                 # adds newline to print
        print join "\t", $reg, $stat, $_;
    }
}

__DATA__
region_id   statistic   genelist
1   2.5 A, B, C
2   0.5 B, C, D, E
3   3.2 <NA>
4   0.1 E, F 
```

**输出：**

```
region_id       statistic       genelist
1       2.5     A
1       2.5     B
1       2.5     C
2       0.5     B
2       0.5     C
2       0.5     D
2       0.5     E
3       3.2     <NA>
4       0.1     E
4       0.1     F 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T20:29:29.403

有几种方法可以做到这一点。这种方法有效，尽管可能有更好的方法......

```
library(stringr) # for str_split
join(subset(a, select=c("region_id", "statistic")), 
     ddply(a, .(region_id), summarise, gene=str_split(genelist, ",\\S*")[[1]])) 
```

需要加载 plyr 和 stringr。

哦，这是一个更好的方法：

```
ddply(a, .(region_id), 
      function(x) data.frame(gene=str_split(x$genelist, ",\\S*")[[1]], 
                             statistic=x$statistic)) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-28T00:49:03.813

这是一种无需任何库的方法：

```
data<-cbind(region_id=1:4, statistic=c(2.5, 0.5, 3.2, 0.1), genelist=c("A, B, C", "B, C, D, E", NA, "E, F"))

do.call(rbind, 
        apply(data, 1, 
              function(r) do.call(expand.grid, 
                                  c(unlist(r[-3]), 
                                    strsplit(r[3], ", "))))) 
```

输出：

```
 region_id statistic genelist
1          1       2.5        A
2          1       2.5        B
3          1       2.5        C
4          2       0.5        B
5          2       0.5        C
6          2       0.5        D
7          2       0.5        E
8          3       3.2     <NA>
9          4       0.1        E
10         4       0.1        F 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-28T14:47:17.247

Here is another one-liner using `plyr`

```
ddply(a, .(region_id), transform, gene = str_split(genelist, ',')[[1]]) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T20:32:41.960

Perl 解决方案：

```
#!/usr/bin/perl
<>;
print "region_id\tstatistic\tgene\n";
while(<>) {
  chomp;
  my ($reg, $stat, $genes) = split /\s+/, $_, 3;
  foreach my $gene (split /,\s*/, $genes) {
     print "$reg\t$stat\t$gene\n";
  }
} 
```

只需通过此脚本将原始文件通过管道传输到输出文件中。

目前，输出值是制表符分隔的，而不是右刷新的，但如果确实需要，您可以修复它。

# cucumber - 嵌套控制器的黄瓜步骤失败

> ID：12629288
> 
> 赞同：1
> 
> 时间：2012-09-27T20:11:17.910
> 
> 标签：cucumber, ruby-on-rails-3.2, minitest

我正在尝试使用 BDD 在我的 Rails 3 站点中实现一个功能：

```
Feature: Patents Administration

  Scenario: Patents index
    Given I am on the admin patents page
    Then I should see "Patents"
    And the title should be "Wavetronix - Patents" 
```

以下是相应的步骤：

```
Given /^I am on the (.*?) page$/ do |text|
  visit eval("#{text.downcase.gsub(/\s/, '_')}_path(locale: 'en')")
end

Then /^I should see "(.*?)"$/ do |text|
  page.must_have_selector('h1', text: text)
end

Then /^the title should be "(.*?)"$/ do |text|
  page.must_have_selector('title', text: text)
end 
```

第一步按预期失败：我需要实现 Admin::PatentsController：

```
module Admin
  class PatentsController < BaseController
    before_filter :find_patent

    def index

    end

  private

    def find_patent
      @patent = Patent.find(params[:id]) if params[:id]
    end
  end
end 
```

因为它继承自 Admin::BaseController——它有自己的索引操作和视图：

```
module Admin
  class BaseController < ApplicationController

    filter_access_to :index

    def index
    end

  end
end 
```

Admin::PatentsController 也继承了该操作和视图。当我通过为 PatentsController 显式定义索引操作和视图来覆盖 BaseController 实现时，我可以*看到*浏览器中的变化——它选择了新的索引操作和视图——但是 Cucumber 步骤失败了，因为它似乎仍在查找在 BaseController 索引操作和视图。

我[创建了一个](https://gist.github.com/3795013)包含更多代码的要点以供参考。

这是一个错误吗？有没有更好的方法来测试这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T20:23:35.937

Bonehead：我没有考虑现有的身份验证机制，因为测试请求没有经过身份验证，所以它正在重定向。

# build - 将 CxxTest 与 Travis-CI 一起使用

> ID：12629290
> 
> 赞同：2
> 
> 时间：2012-09-27T20:11:18.690
> 
> 标签：build, continuous-integration, apt, travis-ci, cxxtest

这是我`.travis.yml`处理 wxWidgets/CxxTest 项目的依赖项安装的部分：

```
install:
  - echo | sudo apt-add-repository ppa:dhart/ppa
  - sudo apt-get update -qq
  - sudo apt-get install -qq libwxgtk2.8 cxxtest
env: CXXTEST=/usr/include 
```

一切都安装得很好，项目也成功构建了，但是到了 call 的时候`cxxtestgen`，它就失败了。

```
cxxtestgen: Command not found 
```

如何在使`cxxtestgen`命令可访问的同时将 CxxTest 安装到 Travis-CI？

这是我的 github 项目：[https ://github.com/gbchaosmaster/nds-toolkit](https://github.com/gbchaosmaster/nds-toolkit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:24:30.047

```
$ sudo apt-get install -qq cxxtest
Unable to locate package cxxtest 
```

`cxxtest`不在 ubuntu 12.04（精确）中的受信任存档中，现在在 travis-ci 中使用（2012.11），它不能使用命令直接安装在那里`apt-get install`

见[https://launchpad.net/ubuntu/+source/cxxtest](https://launchpad.net/ubuntu/+source/cxxtest)

使用 Ubuntu PPA 或`cxxtest`自行安装（如从源代码构建）

除了答案之外，下面是一般调试的方法

```
# .travis-ci.yml
- sudo apt-get install -qq cxxtest
env: CXXTEST=/usr/include

# Test build success and unit test passing.
script:
  - dpkg -L cxxtest
  - echo $PATH
  - cxxtestgen 
```

# jquery - JQuery $(this) 和属性

> ID：12629294
> 
> 赞同：0
> 
> 时间：2012-09-27T20:11:56.580
> 
> 标签：jquery

不久前，我设置了以下内容，以便使用 jQuery 进行非常简单的图像交换。但是，现在该站点需要扩展，我无法确定 $(this) 选择器的实际值。我以为会是 $('.gallery li img') 但似乎并非如此。自从我查看这段代码以来已经有一段时间了，我完全迷失了。

```
$('.gallery li img').hover(function() {
    var $gallery = $('.gallery li img').parents('.gallery');
    var cur_img = $(this).attr('src').replace('thumb/', '');
    $('.main-img', $gallery).attr('src', cur_img);
});​ 
```

我不需要更好的方法来建立画廊，我的作品很好（尽管评论一如既往地受到赞赏）我只需要在给定的情况下弄清楚 $(this) 的价值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T20:14:44.117

**$(this)**是您正在谈论的当前上下文。

所以**img**即，它悬停在其上的当前图像..

尝试 console.log( $(this)) 仔细检查它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T20:15:49.603

jQuery 中的 (this) 不只是一个自我引用吗？基本上，意思是“当前选择或关注什么？” （对不起 - 不知道如何评论，否则我会这样做。）

查看您的代码，它看起来只是用前缀路径“thumb/”替换当前图像的源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T20:51:32.913

顺便说一句，$(this) 确实是当前引用的元素，但它是该元素的 jQuery 包装器，一个可以访问所有 jQuery 方法的包装器。您还有“this”，它指的是实际的 DOM 元素。

示例：选择图像时 $('img');

$(this) 是 $('img')

这是`<img src="example/" alt="example">`

您需要 $(this) 将其与 jQuery 的方法和 'this' （忽略单引号）一起使用以按原样获取 html 元素。

我希望这会有所帮助。要知道，在 JS/jQuery 中，理解这一点*至关重要*，否则，几乎不可能深入挖掘 JS 世界。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T20:14:27.987

`$(this)`在此代码中指的是悬停在上面的 img 标签。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T20:14:28.380

您可以添加`console.log('this', $(this));`，然后检查您的控制台以了解有关该值的更多信息:)

# jakarta-ee - 部署 NullPointer 后的 CDI 拦截器 Glassfish

> ID：12629295
> 
> 赞同：1
> 
> 时间：2012-09-27T20:11:58.070
> 
> 标签：jakarta-ee, deployment, glassfish-3, cdi, interceptor

我第一次玩 glassfish 3.1。

创建`META-INF\beans.xml`文件后，部署失败。

@WebServlet

```
@Override
@Audit
protected void service(HttpServletRequest req, HttpServletResponse res)
        throws IOException, ServletException {
    PrintWriter writer = res.getWriter();
    writer.write("Hello!");

} 
```

注释@Audit

```
@Inherited  
@InterceptorBinding  
@Retention(RetentionPolicy.RUNTIME)  
@Target({ElementType.METHOD, ElementType.TYPE}) 

public @interface Audit {
} 
```

审计实施

```
@Interceptor
@Audit
public class AuditImpl {
     @AroundInvoke  
     public Object auditting(InvocationContext context) throws Exception {  
     System.out.println("Log before method call...");  
     Object returnObject = context.proceed();  
            // to do some logging  
     System.out.println("Log after method call...");  
     return returnObject;  
     } 
} 
```

META-INF/beans.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://java.sun.com/xml/ns/javaee"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
  http://java.sun.com/xml/ns/javaee 
  http://java.sun.com/xml/ns/javaee/beans_1_0.xsd">
 <interceptors>
    <class>xyz.AuditImpl</class>
 </interceptors>
</beans> 
```

我不知道在哪里可以找到 Glassfish 中的错误详细信息。请帮忙。

部署错误：

```
[#|2012-09-27T21:43:31.010+0200|SEVERE|glassfish3.1|javax.enterprise.system.tools.admin.org.glassfish.deployment.admin|_ThreadID=55;_ThreadName=Thread-1;|Exception while invoking class org.glassfish.weld.WeldDeployer load method
java.lang.NullPointerException
    at org.glassfish.weld.BeanDeploymentArchiveImpl.handleEntry(BeanDeploymentArchiveImpl.java:489)
    at org.glassfish.weld.BeanDeploymentArchiveImpl.collectJarInfo(BeanDeploymentArchiveImpl.java:473)
    at org.glassfish.weld.BeanDeploymentArchiveImpl.populate(BeanDeploymentArchiveImpl.java:413)
    at org.glassfish.weld.BeanDeploymentArchiveImpl.<init>(BeanDeploymentArchiveImpl.java:148)
    at org.glassfish.weld.BeanDeploymentArchiveImpl.<init>(BeanDeploymentArchiveImpl.java:128)
    at org.glassfish.weld.DeploymentImpl.<init>(DeploymentImpl.java:120)
    at org.glassfish.weld.WeldDeployer.load(WeldDeployer.java:334)
    at org.glassfish.weld.WeldDeployer.load(WeldDeployer.java:99)
    at org.glassfish.internal.data.ModuleInfo.load(ModuleInfo.java:186)
    at org.glassfish.internal.data.ApplicationInfo.load(ApplicationInfo.java:249)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:460)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:370)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:360)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:370)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1067)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:96)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1247)
    at org.glassfish.deployment.autodeploy.AutoOperation.run(AutoOperation.java:145)
    at org.glassfish.deployment.autodeploy.AutoDeployer.deploy(AutoDeployer.java:577)
    at org.glassfish.deployment.autodeploy.AutoDeployer.deployAll(AutoDeployer.java:463)
    at org.glassfish.deployment.autodeploy.AutoDeployer.run(AutoDeployer.java:395)
    at org.glassfish.deployment.autodeploy.AutoDeployer.run(AutoDeployer.java:380)
    at org.glassfish.deployment.autodeploy.AutoDeployService$1.run(AutoDeployService.java:213)
    at java.util.TimerThread.mainLoop(Timer.java:512)
    at java.util.TimerThread.run(Timer.java:462)
|#]

[#|2012-09-27T21:43:31.010+0200|SEVERE|glassfish3.1|javax.enterprise.system.core.com.sun.enterprise.v3.server|_ThreadID=55;_ThreadName=Thread-1;|Exception while loading the app|#]

[#|2012-09-27T21:43:31.016+0200|SEVERE|glassfish3.1|javax.enterprise.system.tools.admin.org.glassfish.deployment.admin|_ThreadID=55;_ThreadName=Thread-1;|Exception while loading the app|#] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T15:30:21.347

我已经清除了 glassfish 服务器中所有出现的应用程序，并且在重新启动和新部署后，应用程序可以正常工作。

顺便说一句：我的@Audit 拦截器在与 EJB 方法一起使用时被调用，@WebServlet 方法是我的拦截器未被调用。我将发布新问题。

# cocos2d-iphone - 任何使用 cocos 2D 为动画生成精灵表的工具

> ID：12629299
> 
> 赞同：2
> 
> 时间：2012-09-27T20:12:14.247
> 
> 标签：cocos2d-iphone, sprite

cocos2D的新手。试一试，我发现了Blender，一个可以生成精灵表的工具。还有其他免费/开源的工具来生成/开发/创建精灵表吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T21:59:20.093

我不能没有[Texture Packer](http://texturepacker.com)！它几乎成为了 cocos2d 开发的标准。我相信有一个功能有限的免费版本，但是我强烈推荐付费版本。

关于它的使用有很多很棒的教程。这是一个可以帮助您入门的方法。

[http://www.raywenderlich.com/2361/how-to-create-and-optimize-sprite-sheets-in-cocos2d-with-texture-packer-and-pixel-formats](http://www.raywenderlich.com/2361/how-to-create-and-optimize-sprite-sheets-in-cocos2d-with-texture-packer-and-pixel-formats)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T10:37:04.910

啊，我一直在寻找那种工具，而不是我写的[https://github.com/hazardland/hazardland.java.sprite](https://github.com/hazardland/hazardland.java.sprite)

# sql - 如何在不重复的情况下加入第 6 个表和字段？

> ID：12629301
> 
> 赞同：0
> 
> 时间：2012-09-27T20:12:31.493
> 
> 标签：sql, oracle, crystal-reports, oracle10g

首先为“ ”道歉，它是水晶报表的一部分。

我有这个查询，它是由其他人编写的，我需要添加另一个表，但如果添加的表有更多数据行，我不希望值重复。

原始查询

```
select 
        "t1"."ID",
        "t4"."CURR",
        "t3"."TIME",
        "t4"."CASE",
        "t5"."CASE_TYPE"

from            
                "db"."t1" "t1"
full outer join "db"."t2" "t2" on "t1"."id"="t2"."id"
full outer join "db"."t3" "t3" on "t1"."id"="t3"."id"
full outer join "db"."t4" "t4" on "t1"."curr_name"="t4"."curr_id"
full outer join "db"."t5" "t5" on "t2"."cat"="t5"."cat" 
```

这是现在的样子
[![exp1](../Images/f74d9f9270feace356367b3d4cdf3166.png)](https://i.stack.imgur.com/w5zx5.jpg)

我需要加入另一个表`t6`，它是`id`= to `t1`。`id`, 并添加字段 new1, new2

但如果 t6.new1 和 new2 有更多数据，我希望 Current,Time,Case,Cause_Type 为空。
例子
[![img2](../Images/6a64634dc4e399e6e84d053a1542a3b8.png)](https://i.stack.imgur.com/9hJZZ.jpg)

如何在不重复红色和删除线值的情况下加入 t6？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T03:15:56.913

Mogli 试试这个：我猜 t6 字段是一个表，根据您上面显示的内容，它包含基于 1 个 id# 的多条记录。

在 CR 数据库中，添加表，然后添加新表，在链接下将 t6.id 连接到 t1.id，并在报告本身上使用左外连接（从 t1 到 t6）创建一个使用 t1.id 的组，然后添加第二组，其中包含您要从 t6 使用的字段。

如果您正在寻找 t6 上的特定记录，请查看表中是否有一行包含“当前”ID，并在表之间添加一个连接（您可以删除 t1.id 之间的连接初始连接& t6.id)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:31:03.873

```
SELECT "ID"
,"CURR"
,"TIME"
,"CASE"
,"CASE_TYPE"
,New1
,New2
FROM (
    SELECT "t1"."ID"
    ,"t4"."CURR"
    ,"t3"."TIME"
    ,"t4"."CASE"
    ,"t5"."CASE_TYPE"
    ,SUM("New1") OVER (
        PARTTION BY "t1"."ID" ORDER BY "t1"."ID"
        ) AS New1
    ,SUM("New2") OVER (
        PARTTION BY "t1"."ID" ORDER BY "t1"."ID"
        ) AS New2
    ,ROW_NUMBER() OVER (
        PARTTION BY "t1"."ID" ORDER BY "t1"."ID"
        ) AS RowNum
    FROM "db"."t1" "t1"
    FULL OUTER JOIN "db"."t2" "t2"
        ON "t1"."id" = "t2"."id"
    FULL OUTER JOIN "db"."t3" "t3"
        ON "t1"."id" = "t3"."id"
    FULL OUTER JOIN "db"."t4" "t4"
        ON "t1"."curr_name" = "t4"."curr_id"
    FULL OUTER JOIN "db"."t5" "t5"
        ON "t2"."cat" = "t5"."cat"
    FULL OUTER JOIN "db"."t6" "t6"
        ON "t6"."id" = "t1"."id"
    ) Tb1
WHERE RowNum = 1 
```

# javascript - Kendo UI 数字文本框设置最小值

> ID：12629302
> 
> 赞同：0
> 
> 时间：2012-09-27T20:12:37.393
> 
> 标签：javascript, kendo-ui

当我为 a 设置最小值时`KendoNumericTextBox`，它会自动更改为最小值，而不是显示需要最小值的错误。如何改变行为？

```
var numericBox = $("#numeric_" + attrObj.AttributeId).data("kendoNumericTextBox");
numericBox.min(5);
numericBox.validationMessage = "Please enter value 5 and above"; 
```

所以当我`3`在上面输入例如`numberBox`，但它应该给出一个错误的说法`"Please enter value 5 and above"`。相反，该框的值更改为，`5`并且没有显示错误。

有什么办法可以改变这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:07:47.180

这是“设计”行为。数字文本框本身不显示任何消息。这不是它的事。如果您不想显示消息，请使用验证。这是一个示例：[http ://demos.kendoui.c​​om/web/validator/index.html](http://demos.kendoui.com/web/validator/index.html)

# objective-c - Objective C中的无效浮点比较

> ID：12629303
> 
> 赞同：0
> 
> 时间：2012-09-27T20:12:48.533
> 
> 标签：objective-c, ios, math, comparison

我有一个奇怪的困境，我似乎无法解决这个问题，并且在试图解决这个问题时需要一些外部帮助。我有一个从文本框中读取的 NSString 值，并将其转换为 NSNumber。这很好用，我得到了我的价值。然后我取我的新数字，我想将它与一个由 4 个浮点数组成的数组进行比较。然而，当我尝试比较时，我从来没有得到正确的结果，这就是我把头发拉出来的地方。下面是一小段代码，解释了我的情况：

```
// THE FIRST IF STATEMENT IS WHAT GETS SELECTED
// newValue = 0.93
// colorRange = {0.10, 0.20, 0.80, 0.90 }
NSNumberFormatter *format = [[NSNumberFormatter alloc] init];
[format setNumberStyle:NSNumberFormatterDecimalStyle];
NSNumber *newValue = [format numberFromString:value];
[format release];

if (newValue < [colorRange objectAtIndex:0]) {
    // Red background
    selectedButton.backgroundColor = [UIColor redColor];
}
else if (newValue > [colorRange objectAtIndex:0] && newValue < [colorRange objectAtIndex:1]) {
    // White background
    selectedButton.backgroundColor = [UIColor whiteColor];
}
else if (newValue > [colorRange objectAtIndex:1] && newValue < [colorRange objectAtIndex:2]) {
    // Black background
    selectedButton.backgroundColor = [UIColor blackColor];
}
else if (newValue > [colorRange objectAtIndex:2] && newValue < [colorRange objectAtIndex:3]) {
    // Blue background
    selectedButton.backgroundColor = [UIColor blueColor];
}
else {
    // Green background
    selectedButton.backgroundColor = [UIColor greenColor];
} 
```

我想要做的是查看我的输入值在我的百分比范围内的位置，并根据该信息选择一种颜色。如果有更优化的方法，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T20:15:30.683

您不能像这样直接比较 NSNumber，因为您正在比较它们的指针的值。相反，使用`compare`NSNumber 的方法来比较它们，如下所示：

```
if ([newValue compare:[colorRange objectAtIndex:0]] == NSOrderedAscending) {
    // Red background
    selectedButton.backgroundColor = [UIColor redColor];
}  
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T20:19:30.967

我会以简单的方式做到这一点：

```
if ([newValue floatVaue] < [colorRange objectAtIndex:0] floatValue]) 
```

它是。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T20:20:26.933

这个（和其他人喜欢它）：

```
newValue < [colorRange objectAtIndex:1] 
```

将指针`newValue`与指针进行比较`[colorRange objectAtIndex:1]`。`newValue`因此，如果恰好在内存中较低，它将评估为非零。

至少有两张海报被打败了，我会花时间提出更紧凑的方法：

```
NSArray *backgroundColours = @[ [UIColor redColor], [UIColor whiteColor], ...];
NSUInteger index = 0;
for(NSNumber *colour in colorRange)
{
    if([newValue compare:colour] == NSOrderedAscending)
    {
        selectedButton.backgroundColor = [backgroundColours objectAtIndex:index];
        break;
    }
    index++;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-27T20:15:37.953

您不能使用or运算符比较`NSNumber*`对象：它比较指针，给您任意结果。请改用以下方法：`<``>``compare:`

```
if ([newValue compare:[colorRange objectAtIndex:0]] == NSOrderedAscending) ... 
```

*   `NSOrderedAscending`表示接收者小于参数
*   `NSOrderedDescending`表示接收者大于参数
*   `NSOrderedSame`表示接收者等于参数

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T20:21:48.740

正如其他人所说，你不能像那样比较指针，只能比较变量。你可以使用

```
if ([newValue floatValue]<[[color objectAtIndex:0] floatValue] 
```

# sql - SQL 中正则表达式的字符串附加 (Microsoft SQL Server 2008 R2)

> ID：12629304
> 
> 赞同：2
> 
> 时间：2012-09-27T20:12:50.493
> 
> 标签：sql, regex, string, replace, sql-server-2008-r2

我正在尝试在 SQL 中使用 REPLACE 函数，但在尝试将字符串附加到列的当前内容的末尾时遇到问题。

```
set ActualRegex = REPLACE(ActualRegex, ActualRegex, ActualRegex + '[\d\D]*') 
```

这些字符串将用于 C# 程序中的正则表达式检查，但这与问题并不特别相关。

当我尝试运行此查询时，我最终收到一条错误消息

```
Msg 8152, Level 16, State 14, Line 1
String or binary data would be truncated.
The statement has been terminated. 
```

我检查了字段大小，结果字符串的长度不会超过字段的大小（varchar（512））。除非发生了我不知道的奇怪事情，否则它们最多可能有 50 个字符长。

提前感谢您的帮助！

**编辑：**这是完整的查询

```
update [Registration].[dbo].[MigrationOfTagTypes] set ActualRegex = 
REPLACE(ActualRegex, ActualRegex, ActualRegex + '[\d\D]*') 
where Regex != '' and Regex like '%\%' escape '\' 
```

**编辑：**实际上，我想通了，结果发现我只是愚蠢而忽略了一些小事。显然，这些字段充满了附加到字符串末尾的大量空白，因此附加到这些字段会导致打破大小限制。 **感谢所有的帮助！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:40:39.493

```
Msg 8152, Level 16, State 14, Line 1
String or binary data would be truncated.
The statement has been terminated. 
```

有两个原因：

1.  您的 varchar 列不够大。将 7 个字符附加到现有的 10 个字符到 varchar(15) 列中不起作用
2.  您的列被定义为 char （为什么？！）。Char 列有隐含的尾随空格，因此如果将 'ABC' 添加到包含 'XYZ' 的 char(10) 字段，它实际上最终会成为比 char(10) 长的 'XYZ ABC' (13)。

在第二种情况下，即 char 列，使用 RTRIM

```
update [Registration].[dbo].[MigrationOfTagTypes] set ActualRegex = 
RTRIM(REPLACE(ActualRegex, ActualRegex, ActualRegex + '[\d\D]*')) 
where Regex != '' and Regex like '%\%' escape '\' 
```

注意：使用这样的替换允许`'ABCxxxABC'`成为`'ABC[\d\D]*xxxABC[\d\D]*'`

如果你只是想`append to the end of the column`，那么你会使用

```
update [Registration].[dbo].[MigrationOfTagTypes]
set ActualRegex = RTRIM(ActualRegex) + '[\d\D]*'
where Regex != '' and Regex like '%\%' escape '\' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:33:25.110

[concat](http://www.1keydata.com/sql/sql-concatenate.html)可能更有用吗？

就错误消息而言，我不知道为什么会生成它，但是自从我上次使用 MS SQL 以来已经有一段时间了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T20:40:47.233

我认为您的专栏可能会被递归聚合，无限循环。或至少广告 512 个字符。

如果是这种情况，您必须将当前表内容卸载到临时表中，然后使用该数据将更新执行回原始表。

我现在正在研究这是否可行。

# java - 使用子节点创建不可选择的 DefaultTreeModel 节点

> ID：12629309
> 
> 赞同：2
> 
> 时间：2012-09-27T20:13:13.413
> 
> 标签：java, swing, selection, jtree, treemodel

我有一个 DeafultTreeModel 树，其中包含三个级别的节点。我希望能够使根节点及其直接子节点不可选择。而第三级子节点应该是可选的。有人可以帮我解决这个问题。我是 Swing 的新手，希望有人能帮我解决这个问题，因为我无法在任何地方找到答案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T08:07:23.410

正如@MadProgrammer 所解释的，您需要提供自己的选择模型。一个基本策略是通过包装默认选择模型并将所有方法调用委托给它来实现选择模型，但是过滤您不想被选择的 TreePath。

这是一个小例子。它使用一种方法`canPathBeAdded`来过滤要选择的路径：

```
import java.beans.PropertyChangeListener;
import java.util.ArrayList;
import java.util.List;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTree;
import javax.swing.SwingUtilities;
import javax.swing.event.TreeSelectionListener;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeModel;
import javax.swing.tree.DefaultTreeSelectionModel;
import javax.swing.tree.RowMapper;
import javax.swing.tree.TreePath;
import javax.swing.tree.TreeSelectionModel;

public class TestTreeSelection {

    private class MyTreeSelectionModel implements TreeSelectionModel {

        TreeSelectionModel selectionModel = new DefaultTreeSelectionModel();

        private boolean canPathBeAdded(TreePath treePath) {
            return treePath.getPathCount() > 2;
        }

        private TreePath[] getFilteredPaths(TreePath[] paths) {
            List<TreePath> returnedPaths = new ArrayList<TreePath>(paths.length);
            for (TreePath treePath : paths) {
                if (canPathBeAdded(treePath)) {
                    returnedPaths.add(treePath);
                }
            }
            return returnedPaths.toArray(new TreePath[returnedPaths.size()]);
        }

        @Override
        public void setSelectionMode(int mode) {
            selectionModel.setSelectionMode(mode);
        }

        @Override
        public int getSelectionMode() {
            return selectionModel.getSelectionMode();
        }

        @Override
        public void setSelectionPath(TreePath path) {
            if (canPathBeAdded(path)) {
                selectionModel.setSelectionPath(path);
            }
        }

        @Override
        public void setSelectionPaths(TreePath[] paths) {
            paths = getFilteredPaths(paths);
            selectionModel.setSelectionPaths(paths);
        }

        @Override
        public void addSelectionPath(TreePath path) {
            if (canPathBeAdded(path)) {
                selectionModel.addSelectionPath(path);
            }
        }

        @Override
        public void addSelectionPaths(TreePath[] paths) {
            paths = getFilteredPaths(paths);
            selectionModel.addSelectionPaths(paths);
        }

        @Override
        public void removeSelectionPath(TreePath path) {
            selectionModel.removeSelectionPath(path);
        }

        @Override
        public void removeSelectionPaths(TreePath[] paths) {
            selectionModel.removeSelectionPaths(paths);
        }

        @Override
        public TreePath getSelectionPath() {
            return selectionModel.getSelectionPath();
        }

        @Override
        public TreePath[] getSelectionPaths() {
            return selectionModel.getSelectionPaths();
        }

        @Override
        public int getSelectionCount() {
            return selectionModel.getSelectionCount();
        }

        @Override
        public boolean isPathSelected(TreePath path) {
            return selectionModel.isPathSelected(path);
        }

        @Override
        public boolean isSelectionEmpty() {
            return selectionModel.isSelectionEmpty();
        }

        @Override
        public void clearSelection() {
            selectionModel.clearSelection();
        }

        @Override
        public void setRowMapper(RowMapper newMapper) {
            selectionModel.setRowMapper(newMapper);
        }

        @Override
        public RowMapper getRowMapper() {
            return selectionModel.getRowMapper();
        }

        @Override
        public int[] getSelectionRows() {
            return selectionModel.getSelectionRows();
        }

        @Override
        public int getMinSelectionRow() {
            return selectionModel.getMinSelectionRow();
        }

        @Override
        public int getMaxSelectionRow() {
            return selectionModel.getMaxSelectionRow();
        }

        @Override
        public boolean isRowSelected(int row) {
            return selectionModel.isRowSelected(row);
        }

        @Override
        public void resetRowSelection() {
            selectionModel.resetRowSelection();
        }

        @Override
        public int getLeadSelectionRow() {
            return selectionModel.getLeadSelectionRow();
        }

        @Override
        public TreePath getLeadSelectionPath() {
            return selectionModel.getLeadSelectionPath();
        }

        @Override
        public void addPropertyChangeListener(PropertyChangeListener listener) {
            selectionModel.addPropertyChangeListener(listener);
        }

        @Override
        public void removePropertyChangeListener(PropertyChangeListener listener) {
            selectionModel.removePropertyChangeListener(listener);
        }

        @Override
        public void addTreeSelectionListener(TreeSelectionListener x) {
            selectionModel.addTreeSelectionListener(x);
        }

        @Override
        public void removeTreeSelectionListener(TreeSelectionListener x) {
            selectionModel.removeTreeSelectionListener(x);
        }

    }

    protected void initUI() {
        final DefaultMutableTreeNode root = new DefaultMutableTreeNode("Root");
        fillTree(root, 5, "Some tree label");
        final DefaultTreeModel model = new DefaultTreeModel(root);
        JTree tree = new JTree(model);
        tree.setSelectionModel(new MyTreeSelectionModel());
        JFrame f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(new JScrollPane(tree));
        f.setSize(400, 600);
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    private void fillTree(DefaultMutableTreeNode parent, int level, String label) {
        for (int i = 0; i < 5; i++) {
            DefaultMutableTreeNode node = new DefaultMutableTreeNode(label + " " + i);
            parent.add(node);
            if (level > 0) {
                fillTree(node, level - 1, label);
            }
        }

    }

    public static void main(String[] args) {

        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTreeSelection().initUI();
            }
        });
    }

} 
```

# sql - 使用查询查找和计算表中列子集的所有重复项

> ID：12629312
> 
> 赞同：2
> 
> 时间：2012-09-27T20:13:16.930
> 
> 标签：sql, sql-server, sql-server-2008-r2

有人可以告诉我我在这里做错了什么以及如何使查询工作吗？

我正在尝试返回 {OrgID, IdentifierTypeID, IdentifierOrder, ValidFrom} 对于这 4 列与重复计数重复的所有记录。我只希望结果集中显示重复项，这就是我尝试 > 1 部分的原因。

```
select count(*) Number, OrgID, IdentifierTypeID, IdentifierOrder, ValidFrom
    from xdb.dbo.OrganizationIdentifier_IngestII
    where Number > 1
    group by OrgID, IdentifierTypeID, IdentifierOrder, ValidFrom 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:16:04.760

您使用 HAVING 子句来测试聚合函数的结果。此外，您不能在该测试中使用列别名 (Number)，因此您需要重复该功能。

```
SELECT COUNT(*) AS Number, OrgID, IdentifierTypeID, IdentifierOrder, ValidFrom
    FROM xdb.dbo.OrganizationIdentifier_IngestII
    GROUP BY OrgID, IdentifierTypeID, IdentifierOrder, ValidFrom
    HAVING COUNT(*) > 1; 
```

# c# - 如何修复 Unity 容器警告：“ContainerElement.Configure(Unity.IUnityContainer) 已过时”？

> ID：12629314
> 
> 赞同：1
> 
> 时间：2012-09-27T20:13:46.987
> 
> 标签：c#, .net, prism, unity-container

我刚刚在我的盒子上安装了 Prism4，并试图开始研究 Unity (UnityContainer) 的示例。

我正在使用 SL4、Prism4、.Net Framework4、VS 2010 Ultimate。

我`Program.cs`在网上的课堂上收到警告`configSection.Containers.Default.Configure(container);`

> Microsoft.Practices.Unity.Configuration.ContainerElement.Configure(Microsoft.Practices.Unity.IUnityContainer)' 已过时：'"改用 UnityConfigurationSection.Configure(container, name) 方法'

这是我写的代码：

```
var configurationSection = (UnityConfigurationSection)ConfigurationManager.GetSection("unity"); 
foreach (ContainerElement containerElement in configurationSection.Containers) 
{ 
    container =configurationSection.Configure(container, containerElement.Name); 
} 
```

我知道旧方法已被弃用，需要更换，但如何做到这一点？我在接缝上方尝试的代码无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T21:14:48.320

Unity 库中以前的方法 -`Microsoft.Practices.Unity.Configuration.ContainerElement.Configure(Microsoft.Practices.Unity.IUnityContainer)`现在已替换为新的实现`UnityConfigurationSection.Configure(container, name)`。

它告诉您原始方法已被新版本的 Unity 库替换，因此只需使用新方法即可。如果您想要旧版方法，则需要使用旧版本的 Unity 库。

# c# - 基于谷歌阅读器的 Rss 阅读器（聚合器）

> ID：12629318
> 
> 赞同：0
> 
> 时间：2012-09-27T20:14:06.453
> 
> 标签：c#, javascript, google-reader

我创建了一个 RSS 阅读器（网络应用程序），通常的东西以 xml 格式读取 rss 并将其显示给用户。每件事都运行良好。现在我希望“我的阅读器应用程序”使用 google-reader 帐户作为后端，我的工作流程是这样的

1.  要求用户登录谷歌帐户（通过弹出窗口）。
2.  谷歌询问用户 ID 密码，登录后显示“‘xyz’应用程序想要访问你的帐户‘允许’‘拒绝’”
3.  允许后，访问谷歌阅读器帐户并获取订阅列表
4.  如果用户阅读提要告诉谷歌阅读器（可能是通过网络 API），该项目已被阅读

我只是不知道如何完成这部分。我试过谷歌搜索并阅读了很多帖子/博客，但没有任何效果，我不知道从哪里开始。

请帮忙，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T22:47:57.043

正如您在[Martin Doms 的这篇博文](http://blog.martindoms.com/2009/08/15/using-the-google-reader-api-part-1/)中所读到的，您应该能够使用`HttpWebRequest`具有如下 URL 的对象获取会话令牌：

```
https://www.google.com/accounts/ClientLogin?service=reader&Email=me@gmail.com&Passwd=pass 
```

整个博客（文章由 3 个部分组成）值得一读，以全面了解该方法。

您还可以在[此站点](http://code.google.com/p/pyrfeed/wiki/GoogleReaderAPI)上阅读有关 Google Reader API 的信息。

# c# - 哪个更有效，循环通过 DataTable 或更多数据库调用？

> ID：12629319
> 
> 赞同：3
> 
> 时间：2012-09-27T20:14:09.020
> 
> 标签：c#, asp.net, performance, loops

基本上我有`DataTable`一行包含零件编号和几列包含这些零件的信息。

为了将这些信息与我们在数据库中的数据进行比较，我确定我有两个选项之一。

**选项 1** - 遍历每一行并选择数据

```
void CompareData(DataTable dt) {
    foreach (DataRow entry in dt.Rows) {
        //select that row
        DataRow dbEntry = ExecuteQuery("SELECT * FROM Parts WHERE partno='" + entry["partno"] + "'").Rows[0];
        if (dbEntry["info1"] == entry["info1"]) {
            //do something
        } else {
            //do something
        }
    }
} 
```

**选项 2** - 一次选择所有数据并通过循环进行比较

```
void CompareData(DataTable dt, string[] parts) {
    DataTable dbEntries = ExecuteQuery("SELECT * FROM Parts WHERE partno IN('" + String.Join(parts, "','") + "')");
    foreach (DataRow entry in dt.Rows) {
        foreach (DataRow dbEntry in dt.Rows) {
            if (dbEntry["partno"] == entry["partno"]) {
                if (dbEntry["info1"] == entry["info1"]) {
                    //do something
                } else {
                    //do something
                }
            }
        }
    }
} 
```

它们看起来都很低效，所以我不确定该怎么做。LINQ 会加快这个过程吗？我从来没有真正使用过它，但只是浏览它看起来会有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T20:19:30.770

尽可能少地调用数据库。你会在 99.9% 的时间里更有效率。（编码的一般规则）

# iptables - 使用 iptables 阻止网络机器人

> ID：12629321
> 
> 赞同：3
> 
> 时间：2012-09-27T20:14:24.310
> 
> 标签：iptables

我试图阻止在短时间内打开大量连接的网络机器人。我正在使用这种语法：

```
-A INPUT -p tcp --dport 80 -m state --state NEW -m recent --set
-A INPUT -p tcp --dport 80 -m state --state NEW -m recent --update --seconds 1 --hitcount 20 -j logdropconnection 
```

我的问题是，如果没有 iptables 抛出错误，我就无法放松这些参数。当我尝试将命中数增加到 20 以上时，出现错误。我不应该可以将它设置为我想要的任何东西吗？例如，将我的连接限制为 100/秒？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T21:52:30.200

由于您没有在问题中提及错误，因此我会大胆猜测`dmesg`显示此错误：

`xt_recent: hitcount (100) is larger than packets to be remembered (20)`

这是`xt_recent`（有时称为`ipt_recent`）内核模块的设置。

您可以通过更新（或创建）来增加限制`/etc/modprobe.d/options.conf`：

`options xt_recent ip_pkt_list_tot=100`

注意：这可能是在具有内核共享功能的 VPS 主机上实现的问题。

# mysql - 在 mysql 的 IF 中使用 LIKE

> ID：12629328
> 
> 赞同：1
> 
> 时间：2012-09-27T20:14:46.940
> 
> 标签：mysql, sql-like

我正在尝试在 mySQL 的 IF 子句中使用 LIKE 并收到错误。

```
SELECT nc.web_name AS company_name,
    IF((b.booth_number LIKE '%Cafe%', b.booth_number, substring(b.booth_number,4)) AS booth_number, 
    nc.site_url AS website, IF (nc.ismi_status = 1, 'Member','') AS member_status 
    FROM booth_sale bs JOIN {ismi.booth} b ON bs.booth_id = b.booth_id 
    JOIN ismi.new_people np ON bs.contact_id = np.id 
    JOIN ismi.new_company nc ON nc.id = np.company_id 
    WHERE b.show_event_id = 298 AND status IN(44,45) ORDER BY 3 
```

如果我这样做，查询工作正常：

```
IF((b.booth_number = 'Cafe', b.booth_number, substring(b.booth_number,4)) AS booth_number 
```

但我需要检查多种可能性 - 可能有 Cafe、Cafe1、Cafe2 等，我想返回`b.booth_number`该字段值包括 Cafe 的任何记录。

这是我得到的错误：

> PDOException: SQLSTATE[42000]: 语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便在第 2 行的 'AS stand_number, nc.site_url AS website, IF (nc.ismi_status = 1, 'Member','') ' 附近使用：SELECT nc. web_name AS company_name, IF((b.booth_number LIKE '%Cafe%', b.booth_number, substring(b.booth_number,4)) ASbooth_number, nc.site_url AS 网站, IF (nc.ismi_status = 1, 'Member' ,'') AS member_status FROM {ismi.booth_sale} bs JOIN {ismi.booth} b ON bs.booth_id = b.booth_id JOIN {ismi.new_people} np ON bs.contact_id = np.id JOIN {ismi.new_company} nc ON nc.id = np.company_id WHERE b.show_event_id = 298 AND status IN(44,45) ORDER BY 3

谁能告诉我我做错了什么，或者是否有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T20:17:04.720

您的`IF`陈述有一个太多的左括号。删除第一个，你应该会很好（当然，等待任何其他 SQL 错误）：

```
...
IF(b.booth_number LIKE '%Cafe%', b.booth_number, substring(b.booth_number,4)) AS booth_number, 
... 
```

# iphone - 目标 C：归档 NSDate 时遇到问题

> ID：12629329
> 
> 赞同：1
> 
> 时间：2012-09-27T20:14:49.437
> 
> 标签：iphone, objective-c, key, archive

我正在尝试将更改的 NSDate（开始日期的上午 8 点）保存在数据库中，以便在程序运行时随时检索。我正在使用对象归档。我以为我有正确的代码，但我似乎无法保存它。我没有收到任何错误，只是我在代码中输入的输出。我知道日期和时间是正确的，因为它们在 NSLog 中被视为输出。这是我的代码：

```
__dataArea = [NSMutableData data];
__unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:__dataArea];
__archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:__dataArea];

__iDates = [[BCimportantDates alloc] initWithCoder:[NSKeyedUnarchiver unarchiveObjectWithFile: @"firstDate.arch"]];

if ((__iDates.firstDate == nil)){ 

    NSDate *date = [NSDate date];
    NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier: NSGregorianCalendar];
    NSDateComponents *components = [gregorian components: NSUIntegerMax fromDate: date];
    NSLog(@"the date %@",date);
    [components setHour: 3];
    [components setMinute: 00];
    [components setSecond: 00];
    __newDate = [gregorian dateFromComponents: components];
    [__iDates setFirstDate: __newDate];
    NSLog(@"%@",__iDates.firstDate);
    [__iDates encodeWithCoder: __archiver];
    [__archiver finishEncoding];
    if ([__dataArea writeToFile:@"firstDate.arch" atomically:YES] == NO){
        NSLog(@"archiving failed. ");
    }
} 
```

这是 BCimportantDates.m 中编码器和解码器功能的实现：

```
- (void) encodeWithCoder:(NSCoder *)encoder{
    [encoder encodeObject: __firstDate forKey: kfirstDateKey];
}

- (id) initWithCoder: (NSCoder *) decoder{
    if (self = [super init]) {
    self.firstDate = [decoder decodeObjectForKey:kfirstDateKey];
    }
    return self;
} 
```

我尝试过使用断点，其中 __iDates 被编码，存档器在哪里完成，以及我在哪里检查它是否有效。调试并没有那么明显，但老实说，在发现这种错误时，我不确定要寻找什么。我还能做些什么来解决这个问题？有哪些可能的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:53:59.467

我认为这里的问题是您没有指定`writeToFile:`要写入的路径。

尝试这个：

```
NSString *path = [NSTemporaryDirectory() stringByAppendingPathComponent:@"firstDate.arch"];

if ([__dataArea writeToFile:path atomically:YES] == NO){
    NSLog(@"archiving failed. ");
} 
```

这会将您的文件写入临时目录，您可以简单地设置断点或记录路径变量以找出该位置的位置。NSTemporaryDirectory() 只是一个例子，因为这个文件夹只是临时的，可以随时被系统删除。[这是 NSFileManager 上的一个类别，](https://github.com/alexefish/AFCategories/tree/master/Categories/NSFileManager)它可能会为您提供更合适的路径。

# testing - 检查点是否在凸四边形中或上的最有效方法

> ID：12629335
> 
> 赞同：1
> 
> 时间：2012-09-27T20:15:07.830
> 
> 标签：testing, geometry, polygon

我试图找出最有效/快速的方法将大量凸四边形（四个给定的 x,y 点）添加到数组/列表中，然后检查这些四边形是否在边界内或边界上那些四边形。

我最初尝试使用光线投射，但认为这有点矫枉过正，因为我知道我所有的多边形都是四边形并且它们也是凸的。

目前，我将每个四边形分成两个共享一条边的三角形，然后使用它们的区域检查该点是否在这两个三角形的每一个上或之中。

例如三角形 ABC 和测试点 P。 if (areaPAB + areaPAC + areaPBC == areaABC) { return true; }

这似乎运行得有点慢，因为我需要计算 4 个不同三角形的面积来运行检查，如果四边形的第一个三角形返回 false，我必须再获得 4 个区域。（我在检查中包含了一点 epsilon 以弥补浮点错误）

我希望有一种更快的方法，它可能涉及对一个四边形的点进行单次检查，而不是将其分成两个三角形。

我试图通过将多边形放入数组 [,] 来减少检查次数。添加多边形时，它会检查最小和最大 x 和 y 值，然后使用这些值，将相同的多边形放置到正确的数组位置。根据可用多边形检查点时，它会从列表数组中检索正确的列表。

我一直在搜索类似的问题，我认为我现在使用的可能是确定一个点是否在三角形中的最快方法，但我希望有更好的方法来测试一个四边形总是凸的。我查找的每个多边形测试似乎都是针对具有许多边或不规则形状的多边形进行测试。

感谢您花时间阅读我冗长的问题，了解什么是一个简单的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T05:46:45.720

我相信最快的方法是：

1：通过叉积符号找到所有向量对的相互方向（DirectedEdge-CheckedPoint）。如果所有四个符号都相同，则点在里面

加法：对于每条边

```
EV[i] = V[i+1] - V[i], where V[] - vertices in order
PV[i] = P - V[i]
Cross[i] = CrossProduct(EV[i], PV[i]) = EV[i].X * PV[i].Y - EV[i].Y * PV[i].X 
```

如果点 P 相对于第 i 条边 (V[i] - V[i+1]) 在左半平面内，则 Cross[i] 值为正，否则为负。如果所有 Cross[] 值为正，则点 p 在四边形内，顶点按逆时针顺序排列。f 所有 Cross[] 值为负，则点 p 在四边形内，顶点按顺时针顺序排列。如果值有不同的符号，则点在四边形之外。

如果四元组对于许多点查询是相同的，那么*dmuir*建议为每条边预先计算均匀线方程。均匀线方程是 a * x + b * y + c = 0。 (a, b) 是边缘的法线向量。这个方程有一个重要的性质：表达式的符号 (a * Px + b * Y + c) 确定半平面，点 P 所在的位置（对于叉积）

2：将四边形拆分为 2 个三角形，并为每个三角形使用向量方法：用基向量表示 CheckedPoint 向量。

```
P = a*V1+b*V2 
```

当 a,b>=0 且它们的总和 <=1 时，点在内部

两种方法都需要大约 10-15 次加法、6-10 次乘法和 2-7 次比较（我不考虑浮点误差补偿）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T13:18:40.063

如果您有能力为每个四边形存储其每个边的方程，那么您可以在 MBo 的答案上节省一点时间。

例如，如果四边形的每个边都有一个向内指向的法线向量 N，并且有一个常数 d（对于边上的一个顶点 p 来说是 Np），那么当且仅当 Nx > = d 每条边。因此，每条边有 2 次乘法、1 次加法和 1 次比较，每个点最多需要执行 4 次测试。此技术适用于任何凸多边形。

# sql-server - sql server全文搜索：英文的默认分词器是什么？

> ID：12629347
> 
> 赞同：3
> 
> 时间：2012-09-27T20:15:52.640
> 
> 标签：sql-server, full-text-search, wordbreaker

在哪里可以找到 sql server 全文搜索中英语的默认分词器列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:44:44.163

可以通过运行以下查询来获得与分词器相关联的语言列表 -

```
SELECT * FROM sys.fulltext_languages; 
```

我不确定是否有存储过程或内部表显示与每种语言关联的 .dll 文件，但可以在以下注册表项下查找 -

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\{SQL Instance Name}\MSSearch\CLSID\ 
```

每个 CLSID 的语言映射存储在 MSSearch\Language 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T21:36:16.733

中性分词器（空格和标点符号）+ 特定于语言环境的值。因此，这取决于正在运行的英语语言环境。

请参阅[http://technet.microsoft.com/en-us/library/ms142509(v=sql.100).aspx](http://technet.microsoft.com/en-us/library/ms142509(v=sql.100).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-21T12:10:07.430

使用存储过程`sys.dm_fts_parser`，您可以针对分词器测试给定的字符串。以下查询测试从 char(32) 到 char(255) 的所有 ASCII 字符，并返回当前活动的断字字符列表。

```
declare @i integer
declare @cnt integer
set @i=32
while @i<255
begin
  set @cnt=0
  select @cnt=COUNT(1) FROM sys.dm_fts_parser ('"word1'+CHAR(@i)+'word2"', 1033, 0, 0)
  if @cnt>1
  begin
  print CONCAT('ASCII ', @i, ': ', char(@i))
  end
  set @i=@i+1
end 
```

结果：

```
ASCII 32:  
ASCII 33: !
ASCII 34: "
ASCII 35: #
ASCII 36: $
ASCII 37: %
ASCII 38: &
ASCII 40: (
ASCII 41: )
ASCII 42: *
ASCII 43: +
... and so on ... 
```

来源：[https ://stuart-moore.com/generating-a-list-of-full-text-word-breakers-for-sql-server/](https://stuart-moore.com/generating-a-list-of-full-text-word-breakers-for-sql-server/)

# ios - 在 iOS 的 phonegap 上从 javascript 读取捆绑的应用程序资源文件

> ID：12629353
> 
> 赞同：3
> 
> 时间：2012-09-27T20:16:04.867
> 
> 标签：ios, cordova, phonegap-plugins

我有一个混合 iOS 应用程序，它使用带有 phonegap 和本机代码的 webview。

我正在使用`application.plist`文件`Resources`夹中的文件来存储某些配置项，这些配置项在本机代码中使用。

有没有办法，我可以在 javascript 中读取相同的 plist 文件？

如果这是不可能的，那么以本机代码和 javascript 都可以访问的方式存储配置的首选方法是什么？

# xcode - 如何使用 Interface Builder 在 Cocoa 应用程序中管理多个窗口

> ID：12629356
> 
> 赞同：4
> 
> 时间：2012-09-27T20:16:08.427
> 
> 标签：xcode, cocoa, window, nswindow

我有这个应用程序有 3 个类：AppController、Profile、ProfileBuilder。我还需要 3 个窗口：每个班级一个。我尝试将所有 3 个作为 NSObject 的子类并将 initWithNibName 应用于 NSWindowController 类 WindowController 变量，但是当我尝试在每个窗口上输出一些值时它不起作用，并且窗口使用 NSLog 导致为空。我想知道管理多个窗口的最佳方法是什么，可能所有窗口都来自同一个类，如 AppWindowsController，在其他类中涉及尽可能少的特定代码，并尽可能将其他类保留为 NSObject 而不是 NSWindowController 的子类. 因此，如果有的话，也许有一种方法可以远程控制窗口的行为，在特定类中添加尽可能少的代码，只是为了让它们尽可能清晰并独特地专注于它们的内容。谢谢，希望我说清楚了，我实际上对 Cocoa 框架很陌生。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T04:04:25.250

您应该能够在不同类的 init 方法中使用 Windows 加载 nib 文件。例如，在 Profile 中，您可以执行以下操作：

```
-(id)init {
    if (self = [super init]) {
        NSArray *array;
        BOOL success = [[NSBundle mainBundle] loadNibNamed:@"ProfileWindow" owner: self topLevelObjects:&array];
        if (success) {
            for (id obj in array) {
                if ([obj isKindOfClass:[NSWindow class]]) {
                    self.profileWindow = obj;
                }
            }
            [self.profileWindow makeKeyAndOrderFront:self];
        }
    }
    return self;
} 
```

profileWindow 是一个属性（类型为 strong）。在 xib 文件中，我将 File's Owner 设置为 Profile。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T16:17:28.273

我只是想改进rdelmar的解决方案。

您无需遍历数组即可找到`NSWindow`该类。如果您将 profileWindow 定义为一个出口并在 IB 中连接它，则调用

```
[[NSBundle mainBundle] loadNibNamed:@"ProfileWindow" owner:self topLevelObjects:&array]; 
```

会将窗口对象分配给您的插座，不需要数组内容。这里的关键是充当接口的所有者对象。在 IB 中，您可以定义所有者的类类型，如果是，请查看其出口。

# oop - CodeIgniter 和模型-视图-控制器——你的经验/你的意思？

> ID：12629365
> 
> 赞同：0
> 
> 时间：2012-09-27T20:17:03.660
> 
> 标签：oop, model-view-controller, codeigniter, user-experience

我有一个关于 CodeIgniter MVC 原理的“简单”问题。如果我查看 CI (Models) 的手册，我会看到例如：

```
function insert_entry()
{
    $this->title   = $_POST['title']; // please read the below note
    $this->content = $_POST['content'];
    $this->date    = time();
    $this->db->insert('entries', $this);
} 
```

好吧，好吧——我知道以这种方式输入数据很糟糕 :) 但如果我们使用“$this->input->post()”……对我来说它看起来并不好。在我使用模型中的函数之前处理控制器中的数据不是更好吗？也许模型部分看起来是这样的：

```
function insert_entry($data)
{
    $this->db->insert('entries', $data);
} 
```

在这样的控制器中：

```
$this->load->model('Blog');
$data = array();
$data['title'] = $this->input->post('title');
$data['content'] = $this->input->post('content');
$this->Blog->insert_entry($data); 
```

但是我在哪里运行验证等......模型或控制器？也许有人明白我想知道什么。也许你有更多的经验、链接或其他什么。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T00:30:55.777

如果您尝试使用 CodeIgniter 实现正确的 MVC 或受 MVC 启发的设计模式，那么您已经失败了。CodeIgniter 不遵循 MVC 和相关模式的思想。它实际上只是克隆了 Rails 中使用的模式*（如果您想知道原因和方式，我可以在评论部分详细说明）*。

那就是说...

在控制器中使用的原因`$this->input->post()`是提供一些抽象并将您的代码与 PHP 的超全局变量分开。您所谓的“控制器”应该从用户的请求中收集数据并将其传递给模型层的结构。模型层应该完全不知道前端。创建发票的域业务逻辑不会因为您将`<input/>`发票编号从“innr”重命名为“number”而改变。

数据验证应该发生在模型层。如果处理得当，验证代码是[域对象](http://c2.com/cgi/wiki?DomainObject)的一部分，数据完整性检查将由存储抽象（例如，[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)）处理，但在 CodeIgniter 中，人们通常将域和存储逻辑混为一谈，并称之为：“模型”。当然这违反了[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)，但 CI 用户并不关心，甚至不知道这些原则。所以基本上，在为 CI 编写时，验证应该发生在“模型”中。

如果您想阅读有关整个主题的更多信息，您可能会发现[这篇文章](https://stackoverflow.com/a/5864000/727208)很相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T21:00:53.787

嗨，你会有类似的东西

```
class new_controller extends CI_Controller {

    function __construct()
    {
        parent::__construct();
    }

    function insert_db_entry() {
        $this->load->model('Blog');
        $data = array();
        if($this->input->post("submit")) {

            $this->load->library("form_validation");

            //create the form validation rules

            if($this->form_validation->run() === TRUE) {

                $data['title'] = $this->input->post('title');
                $data['content'] = $this->input->post('content');
                $this->Blog->insert_entry($data);
            }
            else {
                $errors = validation_errors();
            }
        }
    }

} 
```

当检测到表单提交时，您使用表单验证库来处理验证。

# php - Markdown 中的自动命名锚点

> ID：12629366
> 
> 赞同：3
> 
> 时间：2012-09-27T20:17:04.137
> 
> 标签：php, regex, markdown

我在 PHP 中使用 Markdown 并编写了一个正则表达式，如果有任何`<h1>-<h6>`带有命名锚（`<a name="Text">Text</a>`）的标签用于链接，则自动将文本包装在其中。

这是PHP：

```
$text = '<p>This is a</p>
   <h1>Test</h1>
   <p>to see if this works </p>';

$regex = '/\<h([0-6]{1})\>(.+)\<\/h[0-6]{1}\>/';

echo preg_replace($regex, '<h$1><a name="$2">$2</a></h$1>', $text); 
```

结果是：

```
<p>This is a</p>
<h1><a name="Test">Test</a></h1>
<p>to see if this works </p> 
```

这里重要的是，Markdown 重量轻且易于存储空间。手动添加命名锚点完全违背了使用 Markdown 的目的。

这种方法可以很好地用于测试目的，但我想知道（这里是问题）是否有更好、更***与语言无关***的方法来实现这一点。

**注意：**这是给客户的，想要这样，因为他们觉得即使是原生 Markdown 语法也可能疏远他们更多“计算机文盲”的用户：`# [Text](#Text)`. 他们只想输入：`# Text`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T20:21:06.257

既然您已经在使用 PHP，那么您真的应该看看[Markdown Extra](http://michelf.ca/projects/php-markdown/extra/#header-id)实现。来自 MDE 文档：

> 使用 PHP Markdown Extra，您可以将 id 属性设置为标题。您应该在行尾的标头之后的大括号内添加以哈希为前缀的 id，如下所示：
> 
> ```
> Header 1            {#header1}
> ========
> 
> ## Header 2 ##      {#header2} 
> ```
> 
> 然后，您可以创建指向同一文档不同部分的链接，如下所示：
> 
> ```
> [Link back to header 1](#header1) 
> ```

# asp.net - asp.net GridView RowDataBound 小代码

> ID：12629369
> 
> 赞同：0
> 
> 时间：2012-09-27T20:17:07.490
> 
> 标签：asp.net

我正在研究 asp.net 和 c#。

我有一个从 sql 数据库填充的 gridview。我有下拉列表和文本框控件。

在 RowDataBound 事件中，我为控件分配了值：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            Control ctrlgridEstacion = e.Row.FindControl("grid1");
            if (ctrlgridEstacion != null)
            {
                DropDownList dd = ctrlgridEstacion as DropDownList;
                SqlDataReader dr;
                SqlCommand cmd;
                cmd = new SqlCommand();
                cmd.Connection = sqlConn;
                cmd.CommandType = CommandType.StoredProcedure;
                cmd.CommandText = "sp_load";
                sqlConn.Open();
                dr = cmd.ExecuteReader();
                DataTable dt = new DataTable();
                dt.Load(dr);
                dd.DataSource = dt;
                dd.DataValueField = "code";
                dd.DataTextField = "code";
                dd.DataBind();
                DataRowView rowView = (DataRowView)e.Row.DataItem;
                string tempDate = rowView["code"].ToString();
                dd.SelectedIndex = dd.Items.IndexOf(dd.Items.FindByText(tempDate));
                sqlConn.Close();
            }

Control gridPrefijo = e.Row.FindControl("grid2");
            if (gridPrefijo != null)
            {
                TextBox dd = gridPrefijo as TextBox;
                DataTable dt = new DataTable();
                sqlConn.Open();
                SqlCommand cmd;
                cmd = new SqlCommand();
                cmd.Connection = sqlConn;
                cmd.CommandType = CommandType.StoredProcedure;
                cmd.CommandText = "sp_load";
                SqlDataAdapter sqlDa = new SqlDataAdapter(cmd);
                sqlDa.Fill(dt);
                int startIndex;

                if (c1 < 1)
                {
                    int RC = dt.Rows.Count;
                    int PS = GridView1.PageSize;
                    int PN = GridView1.PageIndex + 1;
                    startIndex = (PN - 1) * PS;
                    int endIndex = Math.Min(RC - 1, startIndex + PS - 1);
                    dri = startIndex;
                }

                if (dt.Rows.Count > 0)
                {
                    dd.Text = dt.Rows[dri ]["name"].ToString();
                    c1++;
                }
                sqlConn.Close();
            }
}

} 
```

问题是我有 15 个控件，因此将它们添加到 RowDatabound 事件是很多代码。如何使代码更小？

谢谢..

# opengl - glRotatef 和 glutBitmapCharacter 的替代品？

> ID：12629370
> 
> 赞同：2
> 
> 时间：2012-09-27T20:17:10.393
> 
> 标签：opengl, 2d, glut

这就是我目前的代码。但是，对于我的生活，我无法让文本旋转。我需要使用 glutBitmapCharacter 以外的东西吗？

澄清一下，这只是一个 2D 程序

主文件

```
#include "bookshelf.h"

void Initialize()
{
    glClearColor (1.0, 1.0, 1.0, 0.0 );
    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();
    glOrtho(0,799,799,0,0.0,1.0);
}
void main( int argc, char *argv[] )
{    
    glutInit( &argc, argv );
    glutInitDisplayMode( GLUT_SINGLE | GLUT_RGB );
    glutInitWindowSize( 800, 800 );
    glutInitWindowPosition( 200, 50 );
    glutCreateWindow("Bookshelf - Ankit Ahuja");
    Initialize();
    glutDisplayFunc(Bookshelf);
    glutMainLoop();
} 
```

书架.h

```
#include <GL/glut.h>

void Bookshelf()
{
    glMatrixMode(GL_MODELVIEW);
    glPushMatrix();
    glLoadIdentity();

    glColor3f( 0.0, 0.0, 0.0 );
    glRasterPos2f(170,90);
    glRotatef(0,0.0,0.0,0.0);
    char text1[50]="Apple Recipe Book";
    for(int i=0; i<50; i++) glutBitmapCharacter(GLUT_BITMAP_8_BY_13,text1[i]);
    glRasterPos2f(190,110);
    glRotatef(0,0.0,0.0,0.0);
    char text2[50]="Banana Recipe Book";
    for(int i=0; i<50; i++) glutBitmapCharacter(GLUT_BITMAP_8_BY_13,text2[i]);

    glMatrixMode(GL_MODELVIEW);
    glPopMatrix();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:26:04.020

试一试[`glutStrokeCharacter()`](http://www.opengl.org/resources/libraries/glut/spec3/node78.html#SECTION000113000000000000000)。

或者使用`glutBitmapCharacter()`和您选择的渲染到纹理方法。然后以你想要的任何方向用你的纹理渲染一个四边形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:23:02.183

是的。

glutBitmapCharacter() 只是要在屏幕上喷出一个字符（注意对 glRasterPos2f() 的调用）。

OpenGL 中没有对 3D 字体的内置支持，但有很多 3rd 方 API。有关摘要，请参见此链接：[OpenGL 字体](http://www.opengl.org/archives/resources/features/fontsurvey/)

我不喜欢只是粘贴链接，但我确实使用了列出的 FreeType2 库，而且我已经取得了很好的成功。

# sql - sql server select查询一列相同，另一列不同

> ID：12629371
> 
> 赞同：8
> 
> 时间：2012-09-27T20:17:11.187
> 
> 标签：sql, sql-server

我希望能够在表中找到一列相同但另一列不同的事件。

示例表：

```
id    team    week
1     1       1
1     2       1
2     2       1
2     1       2 
```

我想要一个查询，该查询将找到所有团队不同但周仍然相同的 ID，因此团队不等于团队，但周等于周。

基本上我想知道是否有任何 id 在同一周内更换了团队，我该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T20:19:11.500

```
SELECT 
    t1.id, 
    t1.week
FROM 
    YourTable t1
    JOIN YourTable t2 
        ON t1.ID = t2.ID
        AND t1.team < t2.team
        AND t1.week = t2.week 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:20:57.953

```
SELECT ID
, COUNT(DISTINCT TEAM) AS CNT_TEAM
, COUNT(DISTINCT WEEK) AS CNT_WEEK
FROM TABLENAME
GROUP BY ID
HAVING COUNT(DISTINCT TEAM) > 1
AND COUNT(DISTINCT WEEK) = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T20:23:16.253

像这样的东西？

```
SELECT distinct id
FROM TeamWeek
GROUP BY id, week
HAVING Count(team) > 1 
```

# java - 接收枚举作为函数中的值

> ID：12629372
> 
> 赞同：1
> 
> 时间：2012-09-27T20:17:16.597
> 
> 标签：java, enums

我需要跟踪的常量很少，每个常量都有多个值，所以我创建了几个枚举以避免记住每个 Id 所代表的内容，并像这样声明它们

SomeName 位于**包 com.aaa.bbb.ccc.dddd**

```
package com.aaa.bbb.ccc.dddd;

public enum SomeName{
    SKILL1(1, "value1-1", "value1-2"),
    SKILL2(2, "value2-1", "value2-2"),
    SKILL3(3, "value3-1", "value3-2");

    private final int skillId;
    private final String value1;
    private final String value2;

    private SomeName(int id, String value1, String value2){
        this.skillId = id;
        this.value1 = value1;
        this.value2 = value2;   
    }
} 
```

这个枚举不会有超过这三个定义的值。现在我需要像这样定义我的方法

此方法在**包 com.aaa.eee.fff中定义的类中声明**

```
package com.aaa.eee.fff;
import com.aaa.bbb.ccc.dddd.SomeName;

public class SomeClass {
    public SomeName function(SomeName param){
        //some work
    }
} 
```

但我总是得到一个错误`cannot find symbol class SomeName`

有没有办法做到这一点？

# algorithm - 记忆化在最长公共子序列递归求解中的优势

> ID：12629376
> 
> 赞同：2
> 
> 时间：2012-09-27T20:17:25.270
> 
> 标签：algorithm, recursion, dynamic-programming, memoization

我正在阅读一篇关于解决[geekforgeeks](http://www.geeksforgeeks.org/archives/12998)`Longest Common Subsequence`问题的文章，其中有两种解决方案，一种是递归的，另一种是通过二维数组通过 DP。DP解决方案及时完成，而递归解决方案及时完成。`O(NM)``O(2^N)`

递归解决方案的主要问题是出现子序列的重叠，正如那里给出的那样。但是，如果我将每一对存储在哈希中，以便下次函数递归需要该值时，它可以直接从哈希中获取值，而不是进一步递归。那么这个加法能提高多少效率呢？它会来`O(NM)`吗？

其次，递归解决方案如何产生`O(2^N)`时间？如何找出像这样的递归函数的复杂性，或者找到斐波那契数列的函数等等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T20:21:35.680

是的，使用哈希就可以了`O(NM)`。在这种情况下，该过程称为[记忆](http://en.wikipedia.org/wiki/Memoization)化（是的，没有`r`）。只要确保您不使用您选择的语言提供的实际 hashmap 容器，使其成为一个简单的矩阵：如果当前对的值为`-1`，则递归计算它，否则假设它已经计算并返回它。

至于你的第二个问题，你可以在数学上做它以获得最好的界限，或者像你的链接一样通过在纸上绘制它来获得“足够好”：

```
 f(n)
               /    \
         f(n-1)      f(n-2)
        /     \        
  f(n-2)       f(n-3)
          ... 
```

这应该足以归纳表明它将是`O(2^n)`：树具有高度`n`，并且在每个节点处，您有两个递归调用，可以将问题从大小减小`n`到大小`n - 1`（将是`O(2^(n - 1)`）。所以尺寸`n`原始问题将是`O(2^n)`.

请注意，说斐波那契是 并不正确`O(2^n)`，但您可以使用其他数学方法获得更紧密的界限。

# sql - 为什么 oracle 像日期“dd/mm/yyy”一样插入“hh24:mi:ss”

> ID：12629381
> 
> 赞同：0
> 
> 时间：2012-09-27T20:17:56.367
> 
> 标签：sql, oracle, sysdate

我需要运行这个 sql 语句：

```
INSERT INTO JSP_CONTROL (estado,hora_inicio,fecha,tipo) VALUES
('ACTUALIZANDO',to_char(sysdate, 'HH24:mi:SS'),sysdate,'uno'); 
```

这是表格：

```
CREATE TABLE "GCUENTAS"."JSP_CONTROL"
(
"ESTADO" VARCHAR2(20 BYTE),
"HORA_INICIO" TIMESTAMP (6),
"HORA_TERMINO" TIMESTAMP (6),
"FECHA" DATE,
"TIPO" VARCHAR2(20 BYTE) 
```

问题出在这里：to_char(sysdate, 'HH24:mi:SS')，它应该插入类似“16:01:35”的内容，但插入“16/01/35”（DD/MM/YY 格式） .

做一些测试，比如

从 DUAL 中选择 to_char(sysdate, 'HH24:mi:SS')

是成功的

这是消息错误：

```
Error que empieza en la línea 1 del comando:
INSERT INTO JSP_CONTROL (estado,hora_inicio,fecha,tipo) VALUES
  ('ACTUALIZANDO',to_char(sysdate, 'HH24:mi:SS'),sysdate,'uno')
Informe de error:
Error SQL: ORA-01843: mes no válido
01843\. 00000 -  "not a valid month"
*Cause:    
*Action:
Error que empieza en la línea 1 del comando:
INSERT INTO JSP_CONTROL (estado,hora_inicio,fecha,tipo) VALUES
  ('ACTUALIZANDO',to_char(sysdate, 'HH24:mi:SS'),sysdate,'uno')
Informe de error:
Error SQL: ORA-01843: mes no válido
01843\. 00000 -  "not a valid month"
*Cause:    
*Action: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:23:16.870

`hora_inicio``to_char()`是一个时间戳列，但由于调用，您在插入语句中将一个字符值传递给它。

在处理您提供的字符值时，Oracle 会尝试将其转换为时间戳（因为目标列*是*时间戳）。但是像这样的时间`23:56:12`绝对不是一个有效的日期。

如果您尝试**仅**将时间部分插入该列，那将不起作用。时间戳*总是*包含一个日期。Oracle 中没有数据类型只能保存时间。

# html - 是否曾经完全放弃过任何已弃用的元素或属性？

> ID：12629387
> 
> 赞同：1
> 
> 时间：2012-09-27T20:18:20.817
> 
> 标签：html, css, browser, web-standards

我知道标签的“对齐”属性`<div>`已经被弃用了一段时间，还有许多其他属性。但是您仍然可以在所有浏览器中使用它。是否有任何浏览器实际上不支持任何类型的已弃用元素？

我问的原因是因为我停止使用 div align 不仅因为它不受欢迎，而且因为我认为有一天它会被放弃和不受支持，而不是仅仅在我的 IDE 中抛出警告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:27:52.660

## `<basefont>`

在 Firefox 中删除。

[https://bugzilla.mozilla.org/show_bug.cgi?id=3875](https://bugzilla.mozilla.org/show_bug.cgi?id=3875)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T20:24:39.327

大多数折旧元素需要多次修改才能*“完全”*解决。这是因为为了向后兼容，新浏览器保留了处理这些元素的代码。大多数浏览器试图避免这种情况，以保持自己的市场份额。只要这些元素仍然普遍使用，那么很可能会对它们提供某种程度的支持，这样就不会失去那些想要访问使用它们的内容的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T20:21:48.430

不，没有证据表明任何已弃用的元素已从浏览器中删除。此外，您在问题文本中提出的问题是关于不推荐使用的属性，而不是元素。不过，答案是一样的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T20:45:41.390

我记得在`<layer>`Netscape 4 的日子里与元素作斗争。肯定有网页依赖于它，但它早已不复存在。

但`<layer>`从未标准化，而且我不知道 HTML5 完全放弃了 HTML 2.0、HTML 3.2 或 HTML 4.01 标准中的任何内容。但有时，实现需求的编写方式实际上并不要求浏览器执行您期望的操作或与其他浏览器的操作保持一致。`<blink>`就是这样一个元素。`<keygen>`是另一个。

请注意，HTML5 没有“弃用”的元素和属性，只有“过时”的元素和属性。这意味着期望浏览器将永远支持它们，但网络作者不应该使用它们，因为有更好的方法来做同样的事情，或者它们对作者或用户有害，将它们放在页面上.

# android - 如何自动设置提醒哪些数据来自数据库？

> ID：12629393
> 
> 赞同：4
> 
> 时间：2012-09-27T20:19:07.367
> 
> 标签：android, sqlite, reminders, notificationmanager

源代码：

```
 private void saveState() {

    DatabaseHelper myDbHelper = new DatabaseHelper(ReminderEditActivity.this);
    try {
        myDbHelper.createDataBase();
    } catch (IOException ioe) {
        throw new Error("Unable to create database");
    }
    try {
        myDbHelper.openDataBase();
    }catch(SQLException sqle){
        throw sqle;
    }
    c=myDbHelper.query("tblmain", null, null, null, null,null, null);
    if(c.moveToFirst())
    {
        do {
                    mRowId = c.getLong(0);
                    String datetime = c.getString(8);

                    SimpleDateFormat dateTimeFormat = new SimpleDateFormat(DATE_TIME_FORMAT);
                    Date date = null;
                    try {
                        date = dateTimeFormat.parse(datetime);
                        mCalendar.setTime(date); 
                    } catch (ParseException e) {
                        Log.e("ReminderEditActivity", e.getMessage(), e); 
                    } 
    mCalendar.setTime(date);

    new ReminderManager(this).setReminder(mRowId, mCalendar); 
        } while (c.moveToNext());
    }
} 
```

提醒管理器

```
public class ReminderManager {

private Context mContext; 
private AlarmManager mAlarmManager;

public ReminderManager(Context context) {
    mContext = context; 
    mAlarmManager = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
}

public void setReminder(Long taskId, Calendar when) {

    Intent i = new Intent(mContext, OnAlarmReceiver.class);
    i.putExtra(RemindersDbAdapter.KEY_eventid, (long)taskId); 

    PendingIntent pi = PendingIntent.getBroadcast(mContext, 0, i, PendingIntent.FLAG_ONE_SHOT); 

    mAlarmManager.set(AlarmManager.RTC_WAKEUP, when.getTimeInMillis(), pi);
}
} 
```

报警器

```
public class OnAlarmReceiver extends BroadcastReceiver {

private static final String TAG = ComponentInfo.class.getCanonicalName(); 

@Override   
public void onReceive(Context context, Intent intent) {
    Log.d(TAG, "Received wake up from alarm manager.");

    long rowid = intent.getExtras().getLong(RemindersDbAdapter.KEY_eventid);

    WakeReminderIntentService.acquireStaticLock(context);

    Intent i = new Intent(context, ReminderService.class); 
    i.putExtra(RemindersDbAdapter.KEY_eventid, rowid);  
    context.startService(i);

}
} 
```

提醒服务

```
public class ReminderService extends WakeReminderIntentService {

public ReminderService() {
    super("ReminderService");
        }

@Override
void doReminderWork(Intent intent) {
    Log.d("ReminderService", "Doing work.");
    Long rowId = intent.getExtras().getLong(RemindersDbAdapter.KEY_eventid);

    NotificationManager mgr = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);

    Intent notificationIntent = new Intent(this, ReminderEditActivity.class); 
    notificationIntent.putExtra(RemindersDbAdapter.KEY_eventid, rowId); 

    PendingIntent pi = PendingIntent.getActivity(this, 0, notificationIntent, PendingIntent.FLAG_ONE_SHOT); 

    Notification note=new Notification(android.R.drawable.stat_sys_warning, getString(R.string.notify_new_task_message), System.currentTimeMillis());
    note.setLatestEventInfo(this, getString(R.string.notify_new_task_title), getString(R.string.notify_new_task_message), pi);
    note.defaults |= Notification.DEFAULT_SOUND; 
    note.flags |= Notification.FLAG_AUTO_CANCEL; 

    // An issue could occur if user ever enters over 2,147,483,647 tasks. (Max int value). 
    // I highly doubt this will ever happen. But is good to note. 
    int id = (int)((long)rowId);
    mgr.notify(id, note); 
}
} 
```

我在这里有这段代码，它从资产文件夹中复制数据库，然后将数据设置为将用于添加通知的本地变量。我想自动设置数据来自数据库的提醒，但通知会继续读取单击按钮时的日期和时间，而不是数据库中的日期和时间，因此程序的结果是它触发通知和单击按钮后立即显示通知..请帮助我。

我想根据数据库中的日期和时间设置通知。请帮助我如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T22:49:31.830

您是否尝试过在这里设置断点

```
 String datetime = c.getString(8); 
```

并查看 datetime 变量中保存的时间？然后你可以查明时间出错的地方。您正在获取日期的毫秒时间，但我认为您需要从中减去当前时间才能获得提醒时间（时间 = when- System.currentTimeInMillis）。

# weblogic - WebLogic - 在“服务器启动”的“参数”中使用环境变量/双引号

> ID：12629395
> 
> 赞同：4
> 
> 时间：2012-09-27T20:19:11.963
> 
> 标签：weblogic, weblogic-10.x, weblogic11g, weblogic12c

我有一个管理服务器、NodeManager 和 1 个托管服务器，它们都在同一台机器上。我正在尝试在“服务器启动”选项卡中的参数字段中输入与此类似的内容：

```
-Dmy.property=%USERPROFILE%\someDir\someJar.jar 
```

但是当托管服务器启动时，它会抛出这个异常：

> **打开 zip 文件时出错或缺少 JAR 清单：%USERPROFILE%\someDir\someJar.jar**

似乎环境变量没有被转换成它的值。它只是作为纯文本传递给托管服务器。我尝试用双引号 (") 将路径括起来，但控制台验证输入并且不允许这样做：**“参数可能不包含 '"'"**

即使手动编辑 config.xml 文件也无法工作，因为在此之后管理服务器无法启动：

```
<Critical> <WebLogicServer> <BEA-000362> <Server failed. Reason: [Management:141266]Parsing failure in config.xml: java.lang
.IllegalArgumentException: Arguments may not contain '"'.> 
```

我也尝试使用 %20 无济于事，它只是作为 %20 传递。

我认为这可能与 `%USERPROFILE%`（即“C:\documents and settings..”）的值中的空格有关，但其他环境也会发生同样的事情。指向其他没有空格的目录的变量。

我的问题：

**是否有任何支持的方式：**

1.  使用双引号？如果我必须引用名称中带有空格的文件夹怎么办？

2.  引用环境变量？如果我必须依赖它的值用于我事先不知道变量值的分布式服务器怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T06:06:25.107

根据评论编辑：

**方法一：**

1.  打开 setDomainEnv.cmd 并`export SERVER_NAME`在 Linux 或`set SERVER_NAME`Windows 中搜索。跳到下一行（即跳过当前和下一行）
2.  在当前行，插入：

    ```
    customServerList="server1,server2" #this serverList should be taken as input
    isCurrServerCustom=$(echo ${customServerList} | tr ',' '\n' | grep ${SERVER_NAME} | wc -l)
    if [ $isCurrServerCustom -gt 0 ]; then
       # add customJavaArg
       JAVA_OPTIONS="-Dmy.property=${USERPROFILE}/someDir/someJar.jar"
    fi 
    ```

3.  保存 setDomainEnv.sh 文件并重新启动服务器

请注意，我只给出了 Linux 的逻辑，对于 Windows，可以使用类似的逻辑，但使用批处理脚本语法。

**方法二：**

假设 domain 已经安装并且用户提供了`-Dmy.property`需要添加 JVM 参数的服务器列表。Jython 脚本（使用 wlst.sh 执行）。[WLST 参考](http://docs.oracle.com/cd/E24329_01/web.1211/e24491/using_wlst.htm)。

用法：`wlst.sh script_name props_file_location`

```
import os
from java.io import File
from java.io import FileInputStream

# extract properties from properties file.
print 'Loading input properties...'

propsFile       = sys.argv[1]
propInputStream = FileInputStream(propsFile)
configProps     = Properties()
configProps.load(propInputStream)
domainDir       = configProps.get("domainDir")

# serverList in properties file should be comma seperated
serverList      = configProps.get("serverList")

# The current machine's logical name as mentioned while creating the domain has to be given. Basically the machine name on which NM for current host is configured on.
# This param may not be required as an input if the machine name is configured as same as the hostname , in which case , socket module can be imported and socket.getHostName can be used.
currMachineName = configProps.get("machineName")
jarDir          = os.environ("USERPROFILE")
argToAdd        = '-Dmy.property=' + jarDir + File.separator + 'someDir' + File.separator + 'someJar.jar'
readDomain(domainDir)
for srvr in serverList.split(",") :
    cd('/Server/' + srvr)
    listenAddr = get('ListenAddress')
    if listenAddr != currMachineName :
        # Only change current host's servers
        continue
    cd('/Server/' + srvr + '/ServerStart/' + srvr)
    argsOld = get('Arguments')
    if argsOld is not None :
        set('Arguments', argsOld + ' ' + argToAdd)
    else:
        set('Arguments', argToAdd)
updateDomain()
closeDomain()
# now restart all affected servers (i.e serverList)
# one way is to connect to adminserver and shutdown them and then start again 
```

必须从要部署托管服务器的所有主机运行脚本，以便在 JVM 参数中具有主机特定值“USERPROFILE”。

BTW, to answer your question in a line : looks like the JVM arguments have to be supplied with the literal text eventually. But looks like WLS doesn't translate the environment variables if provided as JVM arguments. It gives an impression that it is translating when its done from startWebLogic.cmd (ex: using %DOMAIN_HOME% etc.) but its the shell/cmd executor that translates and then starts the JVM.

# iphone - 潜在的泄漏问题

> ID：12629398
> 
> 赞同：1
> 
> 时间：2012-09-27T20:19:14.860
> 
> 标签：iphone, ios, memory-management

首先请告诉我什么是潜在的泄漏以及它为什么会出现。

潜在的泄漏即将到来......
这是我的代码

```
-(NSArray*)calculateRoutesFrom:(CLLocationCoordinate2D) f to: (CLLocationCoordinate2D) t
{
  //NSLog(@"maproute....5..");

    NSString* saddr = [NSString stringWithFormat:@"%f,%f", f.latitude, f.longitude];
    NSString* daddr = [NSString stringWithFormat:@"%f,%f", t.latitude, t.longitude];
    NSError* error;

  NSString* apiUrlStr = [NSString stringWithFormat:@"http://maps.google.com/maps?output=dragdir&saddr=%@&daddr=%@&dirflg=w", saddr, daddr];
    NSURL* apiUrl = [NSURL URLWithString:apiUrlStr];
    NSLog(@"api url: %@", apiUrl);

    NSString *apiResponse = [NSString stringWithContentsOfURL:apiUrl encoding:NSUTF8StringEncoding error:&error];
  NSLog(@"what is this");
    NSString* encodedPoints = [apiResponse stringByMatching:@"points:\\\"([^\\\"]*)\\\"" capture:1L];

  NSLog(@"maproute....4..");

    return [self decodePolyLine:[encodedPoints mutableCopy]]; // Here is The potential leak
} 
```

我试过这样做 return [self decodePolyLine:[encodedPoints mutableCopy]autorelease]; 但它会多次发送自动释放消息。

怎么办 请帮忙。

```
-(NSMutableArray *)decodePolyLine: (NSMutableString *)encoded {
    [encoded replaceOccurrencesOfString:@"\\\\" withString:@"\\"
                              options:NSLiteralSearch
                                range:NSMakeRange(0, [encoded length])];
    NSInteger len = [encoded length];
    NSInteger index = 0;
    NSMutableArray *array = [[[NSMutableArray alloc] init] autorelease];
    NSInteger lat=0;
    NSInteger lng=0;
    while (index < len) {
        NSInteger b;
        NSInteger shift = 0;
        NSInteger result = 0;
        do {
            b = [encoded characterAtIndex:index++] - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        NSInteger dlat = ((result & 1) ? ~(result >> 1) : (result >> 1));
        lat += dlat;
        shift = 0;
        result = 0;
        do {
            b = [encoded characterAtIndex:index++] - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        NSInteger dlng = ((result & 1) ? ~(result >> 1) : (result >> 1));
        lng += dlng;
        NSNumber *latitude = [[[NSNumber alloc] initWithFloat:lat * 1e-5] autorelease];
        NSNumber *longitude = [[[NSNumber alloc] initWithFloat:lng * 1e-5] autorelease];
        printf("[%f,", [latitude doubleValue]);
        printf("%f]", [longitude doubleValue]);
        CLLocation *loc = [[[CLLocation alloc] initWithLatitude:[latitude floatValue] longitude:[longitude floatValue]] autorelease];
        [array addObject:loc];
    }

    return array;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:44:22.593

您正确地诊断出问题，即您`mutableCopy`永远不会被释放。但是你说`[self decodePolyLine:[encodedPoints mutableCopy] autorelease]`没有用。但是，它不能，因为您在其中缺少一组括号。`autorelease`在字符串上执行的正确解决方案是：

```
 return [self decodePolyLine:[[encodedPoints mutableCopy] autorelease]]; 
```

`autorelease`但是，如果您通过以下方式对结果进行了操作，您将获得太多的版本`NSMutableArray`：

```
 return [[self decodePolyLine:[encodedPoints mutableCopy]] autorelease]; 
```

后一种使用`autorelease`是有问题的。但是，第一个提议的更改应该可以解决问题。

话虽如此，我建议进一步简化代码。我会警惕改变我传递给它们的可变参数的方法（除非出于某种原因需要这种行为，这里似乎不是这种情况）。我宁愿看到：

```
-(NSMutableArray *)decodePolyLine:(NSString *)encodedInput {
{
    NSString *encoded = [encodedInput stringByReplacingOccurrencesOfString:@"\\\\"
                                                                withString:@"\\"];

    NSInteger len = [encoded length];

    // the rest of your method here
} 
```

然后你可以简单地调用它：

```
 return [self decodePolyLine:encodedPoints]; 
```

这也具有完全消除有问题的陈述的巧合优点。

* * *

与您的问题无关，您可以简化说：

```
 NSNumber *latitude = [[[NSNumber alloc] initWithFloat:lat * 1e-5] autorelease];
    NSNumber *longitude = [[[NSNumber alloc] initWithFloat:lng * 1e-5] autorelease]; 
```

成为：

```
 NSNumber *latitude = [NSNumber numberWithFloat:lat * 1e-5];
    NSNumber *longitude = [NSNumber numberWithFloat:lng * 1e-5]; 
```

或者更好，也许`NSNumber`完全退休

```
 float latitude = lat * 1e-5;
    float longitude = lng * 1e-5;
    printf("[%f,", latitude);
    printf("%f]", longitude);
    CLLocation *loc = [[[CLLocation alloc] initWithLatitude:latitude 
                                                  longitude:longitude] autorelease]; 
```

# android - 我可以告诉 Eclipse 跳过对单行或代码块的验证吗

> ID：12629399
> 
> 赞同：1
> 
> 时间：2012-09-27T20:19:16.837
> 
> 标签：android, eclipse

我正在尝试合并 try/catch 以支持已弃用的方法。

如果我的 minSdkVersion 太低而无法支持我正在尝试的（较新的）方法，Eclipse 会看到一个错误，因为它（尚）不受支持。如何让 Eclipse 忽略这一行？

这是代码：

```
 Display display = getWindowManager().getDefaultDisplay();
    Point size = new Point();

    try { 
        display.getSize(size); 
        width = size.x; 
        height = size.y; 
    } catch (NoSuchMethodError e) {
        width = display.getWidth();
        height = display.getHeight(); 
    } 
```

对于 14 之前的 minsdkversion，eclipse 不喜欢 Display.getSize(size)。

或者，有没有更好的方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:30:25.907

这是反射有用的地方：尝试`getSize`从类中获取方法。如果你成功获得它，使用它，否则回退到旧样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T20:38:35.670

我相信这是相关[的：如何检索 android sdk 版本？](https://stackoverflow.com/questions/1882883/how-to-retrieve-the-android-sdk-version)

Build.VERSION.SDK_INT 是您需要的。简单的 if/else 替换 try/catch。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T20:30:06.820

如果您将构建目标提高到 Jelly Bean，则可以使用`@SuppressLint("NewApi")`忽略该错误。我认为没有其他方法可以忽略新 Android 工具的错误。

编辑：实际上，您不需要将构建目标提高到 Jelly Bean。我目前在 4.0.3 中使用 SuppressLint。您只需要 SDK 附带的 Android 注释 JAR。

# iphone - UITableViewCell 在查看区域外为空白，直到我向下滚动然后在我使用 OHAttributedLabel 时备份

> ID：12629404
> 
> 赞同：1
> 
> 时间：2012-09-27T20:19:28.090
> 
> 标签：iphone, objective-c, ios, ipad, uitableview

我在 UITableViewCells 中使用 OHAttributedLabel 部分以常规字体和部分斜体显示一些文本。我的 tableview 行的结构是在屏幕上显示 8 行。

当我向下滚动时，第 9 个单元格似乎是空的。只有当我向下滚动足够远以至于第九个单元格超出视图然后向上滚动时，才会显示第 9 个单元格中的文本。

我注意到当我使用 UITableViewCell 的 textLabel 属性时，我没有这个问题。有人可以深入了解为什么我会使用 OHAttributedLabel 看到这种行为以及如何解决它吗？

# sql - 如何将日期从 php 保存到 SQL 表？

> ID：12629407
> 
> 赞同：0
> 
> 时间：2012-09-27T20:19:56.930
> 
> 标签：sql, recursive-query

我有一个可以正常工作的 php 文件。该 php 在本地文件夹中进行递归搜索，并计算这些文件的最后修改日期。我的问题：每次打开该 php 文件时，我都希望将该日期存储在 SQL 表中。-i 创建了一个包含 2 列（ID、日期）的表，其中 ID=1，然后去更新日期字段。

但是我如何调用 FROM php 文件将日期保存到 sql 字段中？

**我的 php 文件：**

```
<?php
// LAST FILES UPDATE
function getAllFiles($directory, $recursive = true) {
     $result = array();
$handle =  opendir($directory);
     while ($datei = readdir($handle))
     {
          if (($datei != '.') && ($datei != '..'))
          {
               $file = $directory.$datei;
               if (is_dir($file)) {
                    if ($recursive) {
                         $result = array_merge($result, getAllFiles($file.'/'));
                    }
               } else {
                    $result[] = $file;
               }
          }
     }
     closedir($handle);
     return $result;
}

function getHighestFileTimestamp($directory, $recursive = true) {
     $allFiles = getAllFiles($directory, $recursive);
     $highestKnown = 0;
     foreach ($allFiles as $val) {
          $currentValue = filemtime($val);
          if ($currentValue > $highestKnown) $highestKnown = $currentValue;
     }
     return $highestKnown;
}

echo '<div align="center" style=" padding-top:5px; margin-top:5px; border-top:dotted #777; border-width:1px;">Last Update Date:<br>';

date_default_timezone_set('Europe/Athens');
setlocale(LC_ALL, array('el_GR.UTF-8','el_GR@euro','el_GR','greek'));
echo strftime('%d %b %Y, %H:%M:%S', getHighestFileTimestamp('../'));
echo '</div>';

$host="localhost"; // Host name
$username="..."; // Mysql username
$password="..."; // Mysql password
$db_name="..."; // Database name
$tbl_name="..."; // Table name

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

// update data in mysql database
$sql="UPDATE $tbl_name SET date='HUMMMM HERE HOW TO PULL THE VALUE?' WHERE id='1'";
$result=mysql_query($sql);

// if successfully updated.
if($result){
echo "Successful";
echo "<BR>";
}
else {
echo "ERROR";
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:26:03.557

尝试这样的事情：

```
// use the function to calculate highest timestamp
$highestdate = getHighestFileTimestamp("../");

// Insert the highest timestamp into the db
$sql= sprintf("UPDATE $tbl_name SET date='%s' WHERE id='1'",
$highestdate); 
```

--EDIT-- 与 Hiroto 的回答合并

您可以使用这些其他样式将字符串常量与变量连接起来

```
$sql = "UPDATE {$tbl_name} SET date='{$date}' WHERE id='{$id}';"; 
```

或者，您可以使用串联。

```
$sql = "UPDATE " . $tbl_name . " SET date='" . $date . "' WHERE id='1';"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:23:16.880

```
$sql = "UPDATE {$tbl_name} SET date='{$date}' WHERE id='{$id}';"; 
```

或者，您可以使用串联。

```
$sql = "UPDATE " . $tbl_name . " SET date='" . $date . "' WHERE id='1';"; 
```

# java - 从字段变量中读取值

> ID：12629408
> 
> 赞同：0
> 
> 时间：2012-09-27T20:20:08.603
> 
> 标签：java, multithreading, field

我正在用 Java 7 开发桌面应用程序。我有一个情况。在下面的方法

```
private synchronized void decryptMessage
    (CopyOnWriteArrayList<Integer> possibleKeys, ArrayList<Integer> cipherDigits)
{
    // apply opposite shift algorithm:
    ArrayList<Integer> textDigits = shiftCipher(possibleKeys, cipherDigits);

    // count CHI squared statistics:
    double chi = countCHIstatistics(textDigits);

    if(chi < edgeCHI) // if the value of IOC is greater or equal than that
    {
        System.err.println(chi + " " + possibleKeys + " +");
        key = possibleKeys; // store most suitable key
        edgeCHI = chi;
    }       
} 
```

我计算名为“chi”的值，并基于此，如果“chi”小于“edgeCHI”值，我将密钥保存在实例变量中。该方法被一些线程调用，所以我强制同步。

当所有线程完成时，程序通过将控制权传递给控制操作顺序的方法继续执行。然后这一行已在该方法中执行：

```
System.err.println(edgeCHI+" "+key+" -"); 
```

它打印了正确的“chi”值，就像在`decryptMessage`方法中打印了“chi”的最后一个值一样，但是键的值不同。'decryptMessage' 方法已被生成键值的线程调用。

我将键值存储为全局变量 `private volatile CopyOnWriteArrayList<Integer> key = null; // stores the most suitable key for decryption`。为什么我有两个不同的键值？价值观本身并不重要。问题是在最后一次调用“decryptMessage”方法（当 chi < edgeCHI 时）打印的密钥值必须与控制操作流程的方法打印的值匹配。这是您创建**线程**的方式：

```
for(int y = 0; y < mostOccuringL.length; y++){// iterate through the five most frequent letters
                for(int i = (y + 1); i < mostOccuringL.length; i++ ){//perform letter combinations
                    int [] combinations = new int[2];
                    combinations[0] = y;
                    combinations [1] = i;                   
                    new KeyMembers(""+y+":"+i ,combinations, keywords, intKeyIndex, cipherDigits).t.join();
                }
            } 
```

在 run 方法中，您调用*decryptMesssage*方法以识别最可行的解密密钥。这两天我一直在试图弄清楚问题是什么，但我不明白。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T21:37:31.457

依靠 syserr（或 sysout）打印来确定执行顺序是危险的——尤其是在多线程环境中。当打印实际发生或打印的消息是否有序时，绝对没有保证。也许您看到的其中一个线程的“最后一个”打印消息不是修改关键字段的“最后一个”线程。你不能只看 sterr 输出就这么说。

您可以做的是对关键字段使用同步设置器，每当修改字段时都会增加关联的访问计数器并打印新值以及修改计数。这样您就可以避免 syserr 打印问题并可靠地确定最后设置的值是多少。例如：

```
private long keyModCount = 0;

private synchronized long update(CopyOnWriteArrayList<Integer> possibilities, double dgeChi) {
   this.keys = possibilites;
   this.edgeChi = edgeChi;   // how is edgeChi declared? Also volatile?
   this.keyModCount++;
   return this.keyModCount;
} 
```

在decryptMessage里面：

```
if(chi < edgeCHI) // if the value of IOC is greater or equal than that
{
   long sequence = update(possibleKeys, chi); 
   System.err.println("["+ sequence +"]"+ chi + " " + possibleKeys + " +");
} 
```

为了提供答案，我们需要查看更多控制线程执行的（必要时简化的）代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:48:30.540

已找到解决方案。我只是在字段变量获得正确键的位置将**CopyOnWriteArrayList**数据类型更改为 ArrayList。它现在按预期工作。

# php - 如何使用 php 渲染远程图像？

> ID：12629410
> 
> 赞同：2
> 
> 时间：2012-09-27T20:20:14.073
> 
> 标签：php, image, header, http-headers

这是一个.jpg：`http://i.stack.imgur.com/PIFN0.jpg`

![stackoverflow 标志 jpg](../Images/80f12ad27eb9777ea78e3eb1be189a53.png)

假设我希望从`/img.php?file_name=PIFN0.jpg`

以下是我试图完成这项工作的方法：

**/sample.php**

```
<p>Here's my image:</p>
<img src="/img.php?file_name=PIFN0.jpg"> 
```

**/img.php**

```
<?php
    $url = 'http://i.stack.imgur.com/' . $_GET['file_name'];
    header('Content-type: image/jpeg');
    imagejpeg($url);
?> 
```

我希望`/sample.php`显示图像。但这不起作用。我得到的只是一个破碎的图像。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T20:25:12.103

使用`imagecreatefromjpeg`：

```
<?php
    $url = 'http://i.stack.imgur.com/' . $_GET['file_name'];
    header('Content-type: image/jpeg');
    imagejpeg(imagecreatefromjpeg($url));
?> 
```

**参考**： http: [//php.net/manual/en/function.imagecreatefromjpeg.php](http://php.net/manual/en/function.imagecreatefromjpeg.php)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-27T20:27:24.287

这是一个工作示例：

```
<?php
function img_create($filename, $mime_type) 
{  
  $content = file_get_contents($filename);
  $base64   = base64_encode($content); 
  return ('data:' . $mime_type . ';base64,' . $base64);
}
?>

<img src="<?php print img_create('http://tuxpaint.org/stamps/stamps/animals/birds/cartoon/tux.png','image/png'); ?>" alt="random logo" /> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-27T20:30:43.910

无需使用 GD 函数：

```
<?php
    $url = 'http://i.stack.imgur.com/' . $_GET['file_name'];
    header('Content-type: image/jpeg');
    readfile($url);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T20:25:58.387

```
<?php
header("Content-Type: image/jpeg");
$url = "http://i.stack.imgur.com/PIFN0.jpg";
$imgContents = file_get_contents($url);
$image = @imagecreatefromstring($imgContents);
imagejpeg($image);
?> 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-04-10T21:18:14.923

```
header('Content-type: image/jpeg');
readfile($_GET['id']); 
```

但是在新服务器中，只能读取本地图像，远程图像是错误的。

# c# - ObjectListView - 通过单击具有固定内容/文本的指定列删除一行

> ID：12629417
> 
> 赞同：5
> 
> 时间：2012-09-27T20:20:50.237
> 
> 标签：c#, objectlistview

我有一个简单的问题，我自己无法解决。

我有一个 ObjectListView 填充了我的一些对象。但除此之外，我还想要另一列，默认文本为“删除”。单击该列时，应删除选定的行。我怎么做？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-02T08:31:46.107

您可以通过使所需的行可编辑并使用 CellEditActivation 事件来实现此目的。初始化您的 OLV 和“删除列”，如下所示：

```
// fire cell edit event on single click
objectListView1.CellEditActivation = ObjectListView.CellEditActivateMode.SingleClick;
objectListView1.CellEditStarting += ObjectListView1OnCellEditStarting;

// enable cell edit and always set cell text to "Delete"
deleteColumn.IsEditable = true;
deleteColumn.AspectGetter = delegate {
    return "Delete";
}; 
```

然后，您可以在单击列后立即删除 CellEditStarting 处理程序中的行：

```
private void ObjectListView1OnCellEditStarting(object sender, CellEditEventArgs e) {
    // special cell edit handling for our delete-row
    if (e.Column == deleteColumn) {
        e.Cancel = true;        // we don't want to edit anything
        objectListView1.RemoveObject(e.RowObject); // remove object
    }
} 
```

为了改进这一点，除了文本之外，您还可以显示图像。

```
// assign an ImageList containing at least one image to SmallImageList
objectListView1.SmallImageList = imageList1;

// always display image from index 0 as default image for deleteColumn
deleteColumn.ImageGetter = delegate {
    return 0;
}; 
```

结果：

![在此处输入图像描述](../Images/6253f60ad65d0d4c9a6d69f36d4d0e03.png)

如果您不想在图像旁边显示任何文本，您可以使用

```
deleteColumn.AspectToStringConverter = delegate {
    return String.Empty;
}; 
```

您还可以将 Aspect 设置为空字符串，但将其视为“最佳实践”。通过仍然返回一个方面，排序和分组仍然有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T08:39:36.373

如果“删除”列不是 中的第一列`ObjectListView`，则必须设置

```
ShowImagesOnSubItems = true; 
```

另请参阅[ObjectListView 显示图标](https://stackoverflow.com/questions/15565899/objectlistview-show-icons)。

# php - 用于单击 ajax 调用链接的事件处理程序

> ID：12629423
> 
> 赞同：2
> 
> 时间：2012-09-27T20:21:21.833
> 
> 标签：php, jquery, mysql, ajax

我正在尝试添加一个链接以使用 jquery 和 ajax 从 mysql 数据库中删除一行。数据当前显示在表格中。由于某种原因，Click 事件没有触发。

这是我的 AJAX 调用：

```
<script>
$(document).ready(function() {
/* load table with page load*/
$("#sort tbody").load("inc/index_table.php");

/* row deletion */
$(".deletelink").click(function(){
   var id = $(this).attr("id");
   $.ajax({
        beforeSend: function (request) {
        var answer = confirm("Are you SURE you want to delete this?/nThis action is NOT reversible.")
        if (answer){ return(true); }
        else { return(false); }
        },
        type: "POST",
        url: location.href,
        data: "delete="+id,
        error: function() {
            console.log("Theres an error with AJAX deletion");
        },
        success: function(){ //a.td.tr.remove just that row rather than the whole table
            $this.parent().parent().remove();
            console.log("Deleted.");
        }
   });
}); 

});
</script> 
```

以及相关的 HTML：这是从我的数据库中打印表的 while 循环的一部分：

`<td><a class="deletelink" id="'.$row["id"].'"><img src="images/delete.png" alt="Delete"></a></td>';`

我的代码指定`<a class="deletelink">`但它没有注册`$(".deletelink").click(function(){ });`

有没有人看到这里可能出了什么问题或有其他方法可以建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T20:22:44.400

看起来您正在动态加载元素。您只能绑定到当前存在于 DOM 中的元素。要绑定到您要添加的元素，您必须将事件附加到静态元素，它越接近动态内容越好。

尝试将[**on()**](http://api.jquery.com/on)与委托一起使用。

```
$("#sort tbody").load("inc/index_table.php");

/* row deletion */
$("#sort tbody").on("click", ".deletelink", function(){
   //...rest of code the same
}); 
```

`on()`在 jQuery 1.7 中添加。如果您使用的是以前的版本，但高于 1.4.2，您可以使用[**delegate()**](http://api.jquery.com/delegate/)代替。

```
$("#sort tbody").load("inc/index_table.php");

$("#sort tbody").delegate(".deletelink", "click", function(){
   //...rest of code the same
}); 
```

如果`#sort`or `tbody`of`$("#sort tbody")`也是动态的，那么`$("document").on("click", "#sort tbody .deletelink", function(){...})`也可以工作，尽管任何更接近`document`的东西都比当然更好。

**编辑**
我只是再次查看您的代码，委托绑定应该可以工作，但是，使用[**load()**](http://api.jquery.com/load/)的成功回调也应该适用于您现有的代码。

回调被执行，加载已成功完成。我不是 100% 确定，但我假设当调用成功时元素已经加载到 DOM 中，因此正常绑定应该可以工作。

如果这不起作用，上面提到的动态绑定应该。

```
$("#sort tbody").load("inc/index_table.php", function(){
    /* row deletion */
    $(".deletelink").click(function(){
        // .. your code as before.
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T20:34:04.567

为了确保表格完全加载，尝试在`.load()`like的回调中声明click函数，

```
 $("#sort tbody").load("inc/index_table.php", function() {

      /* row deletion */
    $(".deletelink").click(function(){ ....
     });
   }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T20:24:06.197

尝试使用**.on()**将事件绑定到元素

```
$(".deletelink").on('click',function(e){

    e.preventDefault(); 
```

还要确保添加 preventDefault 以停止链接的默认功能

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T20:26:33.757

问题是您的删除链接在表格加载后出现。因此，当页面加载并构建 DOM 树时，它并不存在。所以你不能附加`click`到它。你可以试试`live()`。这可以用作

```
$(".deletelink").live('click',function(){
    // ajax call handling code here
}); 
```

此函数在元素被引入 DOM 后附加事件。但是，这个函数有点贪心，因为它会在任何 DOM 更改时不断扫描整个 DOM 树。所以谨慎使用

# java - Java/Scala 流时间序列数据

> ID：12629429
> 
> 赞同：2
> 
> 时间：2012-09-27T20:21:56.107
> 
> 标签：java, streaming, messaging, netty

我有基于 HBase (OpenTSDB) 的底层时间序列数据库，在它之上，我的应用程序以某种方式从 HBase 加载数据。我需要将此获取的时间序列流式传输到应用程序客户端。什么是最好的解决方案？如果客户端暂停处理已经收到的数据，服务器也应该暂停，如果客户端死了，服务器应该停止发送数据。

我想要一个纯 Java 解决方案。我知道 ZMq，但对它没有很好的体验。也许我应该看看Netty？

PS 数据量足够大。每个对服务器的请求数千兆字节和数十千兆字节。

# html - 浏览器窗口和 div 的高度

> ID：12629434
> 
> 赞同：3
> 
> 时间：2012-09-27T20:22:19.710
> 
> 标签：html, css

我目前正在尝试建立一个顶部固定高度（100px）横幅的网站，我希望其余的内容填满页面的其余部分。我有它，这样我的横幅就在一个 div 中，页面的其余部分在另一个 div 中，我希望页面的其余部分的高度小于 100 像素（100% - 100 像素）。显然，当涉及高度时，您不能混合使用 % 和 px 。但是，是否可以将变量定义为寡妇高度 (100%) 减去横幅高度 (100px)，然后使用它来定义我剩余 div 的高度。

我是css，html的新手，几乎不知道任何其他语言，所以请尽量保持简单，因为我是一个简单的人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:26:15.813

高度是动态的，因此当您将内容添加到“内容部分”时，持有它的容器的大小也会如此。

简短的回答是，不要为“内容部分”设置高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:29:35.170

您可以只使用 100% 作为内容 div 的高度 - 它会拉伸以占用从横幅到屏幕底部的空间。

一个重要的部分是将html和body的高度设置为100%：

**HTML**

```
<html>
    <head>
        <title>Foo</title>
    </head>

    <body>
        <div id="banner"></div>
        <div id="content"></div>
    </body>
</html> 
```

**CSS**

```
#banner {
    height: 100px;
    background-color: #ccc;
}

#content {
    height: 100%;
    background-color: #000;
}

body {
    height: 100%;
}

html {
    height: 100%;
} 
```

在此处查看演示：http: [//jsfiddle.net/yHFjh/](http://jsfiddle.net/yHFjh/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T20:25:31.137

```
<div style="height: 100px">
   Your banner
</div>
<div>
  Body
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T20:34:19.493

创建一个`height`100% 的 html 和正文。绝对定位横幅。在您的横幅下方添加一个内容 div 并将其设置`min-height`为 100%。此内容将在横幅后面，但至少为 100%。在内容中添加一个带有`padding-top`横幅高度的 div，以防止内容最终出现在横幅下方。

HTML：

```
<div id="banner"></div>
<div id="content">
    <div id="main">
        Lorem Ipsum is simply dummy text..
    </div>
</div>​ 
```

CSS：

```
html, body { height: 100%; }
#banner { position: absolute; height: 100px; width: 100%; background: green; }
#content { min-height: 100%; background: yellow; }
#main { padding-top: 100px; }​ 
```

[http://fiddle.jshell.net/pY6dc/](http://fiddle.jshell.net/pY6dc/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T20:35:24.893

使用`window.innerHeight / document.documentElement.clientHeight`属性

```
<div id="banner">banner</div>
<div id="content">content</div>

<script>
    if(navigator.userAgent.toLowerCase().indexOf("msie") > -1){
        document.getElementById("content").style.height = document.documentElement.clientHeight - document.getElementById("banner").offsetHeight + "px";
    } else {
        document.getElementById("content").style.height = window.innerHeight - document.getElementById("banner").offsetHeight + "px";
    }
</script> 
```

# javascript - 考虑垂直坡度

> ID：12629439
> 
> 赞同：0
> 
> 时间：2012-09-27T20:22:39.570
> 
> 标签：javascript, adobe-illustrator, extendscript

我主要不是程序员，所以这可能是一个简单的答案。

我正在 Illustrator 中编写一个脚本，您可以在其中选择三个点，然后它会做一些事情。首先它形成一个三角形。然后，它重新创建三角形中的两条线段并将它们旋转 90 度。然后，我找到这些点的交点，这样我就可以做一个外接圆。

我实际上进展得很好，但目前我不知道如何解决的唯一问题是组成三角形的两个点具有相同的 y 坐标。当我制作垂直线时，那条线是垂直的，因此没有斜率。它抛出一个错误。

如何使用 JavaScript 计算垂直斜率？我正在考虑类似“如果斜率为 NaN，则将斜率值设置为 9999999”或类似的东西，但这似乎有点粗略。有更好的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:25:28.343

您可以将范围内的渐变标准化`-1`为`1`. 任何大于`1`或 a 的东西`NaN`都被限制在`1`. 负数也是如此，但`-1`.

# xml - 在 Magento 中更改客户结帐路径

> ID：12629442
> 
> 赞同：0
> 
> 时间：2012-09-27T20:22:55.133
> 
> 标签：xml, magento, php

我对 magento 开发还很陌生，希望得到一些关于产品加售的建议。一旦将商品添加到他们的购物篮中，我需要通过向客户提供产品来更改结帐路径。

追加销售将基于是/否，如果客户单击“是”，则该项目将添加到他们的购物篮中，并且会向他们展示另一个追加销售。

如果他们点击“否”，他们还会在结账前展示物品。我知道 Magento 处理追加销售的方式与我刚才解释的非常不同，但有没有办法做到这一点？

我真的很想知道要编辑哪些文件等的起点……谢谢！

# r - OpenCPU 如何在 R/pub 中安装一个包？

> ID：12629465
> 
> 赞同：2
> 
> 时间：2012-09-27T20:24:11.403
> 
> 标签：r, opencpu

我不清楚如何在我自己的 openCPU 服务器上的 openCPU 中的 R/pub 下安装 R 包。openCPU 文档声明软件包安装由管理员处理，但没有给出任何关于软件包安装的说明（我可以找到）。

我确定我遗漏了一些明显的东西，但是对此的任何帮助将不胜感激。

FWIW，我正在尝试安装“markdown”包，由于某种原因在调用`opencpu-cran`.

* * *

**更新：** 我发现[这个链接](http://public.opencpu.org/userapps/jun9/opencpu.demo/admin/)到一个例子。它调用以下 URL ，但基于[此 SO 问题](https://stackoverflow.com/questions/11836966/opencpu-admin-opencpu-demo)`"/Radmin/call/opencpu.demo/install.opencpu/json"`，该方法似乎不起作用。那么，如果这不是通过 openCPU 安装软件包的方式，它是如何完成的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:51:14.300

端点包含系统上公共 R 库中的`/R/pub`所有包。要安装包，您可以通过 ssh 进入系统，以 root 身份启动 R `sudo -i R`，然后简单地使用`install.packages`将包安装到全局库。

`r-cran-*`或者，您可以安装通过 ubuntu 存储库或[cran2deb4ubuntu](https://launchpad.net/~marutter/+archive/c2d4u)启动板提供的众多软件包之一，例如：

```
sudo apt-get install r-cran-xml 
```

# r - agrep 的问题

> ID：12629467
> 
> 赞同：2
> 
> 时间：2012-09-27T20:24:20.700
> 
> 标签：r, agrep

尽管我将 max.distance 限制为零，但为什么 agrep 会找到匹配项？adist 确实正确地告诉我我需要两次插入...

```
> agrep("ab", "abcd", max = list(del = 0, ins = 0, sub = 0), value = T)
[1] "abcd"
> drop(attr(adist("ab", "abcd", counts = TRUE), "counts"))
ins del sub 
  2   0   0 

> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: x86_64-pc-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=German_Austria.1252  LC_CTYPE=German_Austria.1252   
[3] LC_MONETARY=German_Austria.1252 LC_NUMERIC=C                   
[5] LC_TIME=German_Austria.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] formatR_0.6   vegan_2.0-4   permute_0.7-0

loaded via a namespace (and not attached):
[1] grid_2.15.1    lattice_0.20-6 tools_2.15.1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T23:07:22.513

请注意，“ab”与“abcd”的前两个字符完美匹配（无需插入！）。这就是@joran 引用的注释部分告诉您的内容。

```
# Since ab matches the substring of abcd that is the first two characters
# we get a match
agrep("ab", "abcd", val = T)
#[1] "abcd"

# Since we only need 1 insertion to make ac into abc and we set max=1
# we get a match
agrep("ac", "abcd", max = 1, val = T)
#[1] "abcd"

# ac doesn't directly match any part of the substring and we set max=0
# so no match
agrep("ac", "abcd", max = 0, val = T)
#character(0) 
```

# python - python mechanize - 从触发文件下载的 aspnetForm submitControl 检索文件

> ID：12629470
> 
> 赞同：5
> 
> 时间：2012-09-27T20:24:25.507
> 
> 标签：python, file, download, mechanize

当我不知道文件 URL 或文件名时，如何使用 python mechanize 从触发 Excel 文件下载的 aspnetForm submitControl 检索文件？

带有 Excel 文件的站点 URL： [http ://www.ncysaclassic.com/TTSchedules.aspx?tid=NCFL&year=2012&stid=NCFL&syear=2012&div=U11M01](http://www.ncysaclassic.com/TTSchedules.aspx?tid=NCFL&year=2012&stid=NCFL&syear=2012&div=U11M01)

我正在尝试通过“打印 Excel”“按钮”下载文件。

到目前为止，我有：

```
r = br.open('http://www.ncysaclassic.com/TTSchedules.aspx?tid=NCFL&year=2012&stid=NCFL&syear=2012&div=U11M01')
html = r.read()

# Show the html title
print br.title()

# Show the available forms
for f in br.forms():
    print f

br.select_form('aspnetForm')
print '\n\nSubmitting...\n'
br.submit("ctl00$ContentPlaceHolder1$btnExtractSched")

print 'Response...\n'
print br.response().info()
print br.response().read

print 'still alive...\n'

for prop, value in vars(br.response()).iteritems():
    print 'Property:', prop, ', Value: ', value

print 'myfile...\n' 

myfile = br.response().read 
```

我得到这个输出：

```
 Submitting...

    Response...

Content-Type: application/vnd.ms-excel
Last-Modified: Thu, 27 Sep 2012 20:19:10 GMT
Accept-Ranges: bytes
ETag: W/"6e27615aed9ccd1:0"
Server: Microsoft-IIS/7.5
X-Powered-By: ASP.NET
Date: Thu, 27 Sep 2012 20:19:09 GMT
Connection: close
Content-Length: 691200

<bound method response_seek_wrapper.read of <response_seek_wrapper at 0x2db5248L whose wrapped object = <closeable_response at 0x2e811c8L whose fp = <socket._fileobject object at 0x0000000002D79930>>>>
still alive...

Property: _headers , Value:  Content-Type: application/vnd.ms-excel
Last-Modified: Thu, 27 Sep 2012 20:19:10 GMT
Accept-Ranges: bytes
ETag: W/"6e27615aed9ccd1:0"
Server: Microsoft-IIS/7.5
X-Powered-By: ASP.NET
Date: Thu, 27 Sep 2012 20:19:09 GMT
Connection: close
Content-Length: 691200

Property: _seek_wrapper__read_complete_state , Value:  [False]
Property: _seek_wrapper__have_readline , Value:  True
Property: _seek_wrapper__is_closed_state , Value:  [False]
Property: _seek_wrapper__pos , Value:  0
Property: wrapped , Value:  <closeable_response at 0x2e811c8L whose fp = <socket._fileobject object at 0x0000000002D79930>>
Property: _seek_wrapper__cache , Value:  <cStringIO.StringO object at 0x0000000002E8B0D8> 
```

似乎我很接近...注意内容类型：application/vnd.ms-excel

我只是不知道下一步该怎么做。我的文件在哪里，如何获得指向它的指针并将其保存在本地以供以后访问？

更新：

我使用 dir() 来获取 response() 的方法/属性列表，然后尝试了几种方法......

```
print '\ndir(br.response())\n'
for each in dir(br.response()):
    print each

print '\nresponse info...\n'
print br.response().info()

print '\nresponse geturl\n'
print br.response().geturl() 
```

我得到这个输出......

```
dir(br.response())

__copy__
__doc__
__getattr__
__init__
__iter__
__module__
__repr__
__setattr__
_headers
_seek_wrapper__cache
_seek_wrapper__have_readline
_seek_wrapper__is_closed_state
_seek_wrapper__pos
_seek_wrapper__read_complete_state
close
get_data
geturl
info
invariant
next
read
readline
readlines
seek
set_data
tell
wrapped
xreadlines

response info...

Date: Thu, 27 Sep 2012 20:55:02 GMT
ETag: W/"fa759b5df29ccd1:0"
Server: Microsoft-IIS/7.5
Connection: Close
Content-Type: application/vnd.ms-excel
X-Powered-By: ASP.NET
Accept-Ranges: bytes
Last-Modified: Thu, 27 Sep 2012 20:55:03 GMT
Content-Length: 691200

response geturl

http://www.ncysaclassic.com/photos/pdftemp/ScheduleExcel165502.xls 
```

我想我的 br.response 中已经有了这个文件。我只是不知道如何提取它！请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T22:37:53.627

```
# fill out the form
response = br.submit()
fileobj = open('filename', 'w+')
fileobj.write(response.read())
fileobj.close() 
```

# javascript - javascript从表单中获取动态隐藏元素

> ID：12629472
> 
> 赞同：1
> 
> 时间：2012-09-27T20:24:31.230
> 
> 标签：javascript

我有一个看起来像这样的表格

```
<FORM>
    <INPUT TYPE='hidden' NAME='search0' VALUE='a'> 
    <INPUT TYPE='hidden' NAME='search1' VALUE='b'>
    ... etc 
    <INPUT TYPE='hidden' NAME='search100' VALUE='abc'>
</FORM> 
```

在我的javascript中，我想做一些类似的事情：

```
 for (i=0;i<=100;i++) { 
     document.forms[0].search+i+.value = '';
 } 
```

显然这不是有效的语法，我只是不确定如何获取所有 100 个隐藏输入并将它们的所有值更改为空。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T20:29:40.403

请注意，`.0`这不是有效的语法 - 因此您可以使用`[0]`，因为您可以将任何表达式放在此类括号内（例如数字、字符串）。实际上，您也可以在`+`内部使用运算符，因为`+`可以应用于表达式。这解决了您的问题：

```
document.forms[0]["search" + i].value = ''; 
```

您也可以使用`["forms"]`代替`.forms`等。基本上，`.`符号只是符号的一个子集`[]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:34:24.067

jQuery“几乎但不是真的”等价物将是这样的：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script>
$(document).ready(function(){
  /* all input that has a name that starts with search */
  $("input[name^=search]").each(function (){
    /* set the value to empty */
    $(this).val('');
  }
}
</script> 
```

# android - 将进度条下载为 LinearLayout 背景

> ID：12629475
> 
> 赞同：1
> 
> 时间：2012-09-27T20:24:40.157
> 
> 标签：android

我有一个应用程序，我学校的学生可以下载教授上传的课程内容。一切都很好，除了我没有进度条对话框。我最近将应用程序切换到使用片段，所以我使用的旧对话框坏了。

无论如何，我在想，与其让对话框显示进度条，不如使用被点击的项目的背景作为进度条。

这是应用程序的屏幕截图：http: [//dl.dropbox.com/u/4439149/Screenshot_2012-09-27-15-06-43.png](http://dl.dropbox.com/u/4439149/Screenshot_2012-09-27-15-06-43.png)

这是我想象它如何工作的模型：http: [//dl.dropbox.com/u/4439149/42an8-CTWBJpw391zDSBs5MAiuIhibcsRWhZGwdvmTE%20copy.png](http://dl.dropbox.com/u/4439149/42an8-CTWBJpw391zDSBs5MAiuIhibcsRWhZGwdvmTE%20copy.png)

我一辈子都想不出应该怎么做。我希望有人能给我推动正确的方向。

谢谢，大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:07:30.990

您是否尝试过将您的布局更改`row.xml`为框架布局，并且只使用一个`ProgressBar`填充整个行的布局？然后，您可以将其放在您当前在 row.xml 中的布局后面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T21:51:58.003

查看[Clip Drawable](http://developer.android.com/guide/topics/resources/drawable-resource.html#Clip)。您可以将行的背景设置为包含颜色的 ClipDrawable 或要显示进度的其他可绘制对象，然后在下载时设置级别（进度）。

# c++ - MFC序列化

> ID：12629476
> 
> 赞同：1
> 
> 时间：2012-09-27T20:24:44.090
> 
> 标签：c++, serialization, mfc, clist

我必须序列化一个`CList`基类和派生类。我怎样才能做到这一点。

```
typedef CList<Student*, Student*> StVec;

class Student : public CObject
{
public:
    DECLARE_SERIAL(Student);

    Student();
    Student(Student& s);
    Student(CString _name, CString _last, int _age);
    virtual ~Student(void);

    virtual void cin();
    virtual void cout();

    virtual void Serialize(CArchive& ar);

    static Student* FromInput();

    inline const CString GetName(){return name;}
    inline const CString GetLastName(){return last_name;}
    inline const int GetAge(){return age;}

    virtual inline Student& operator=( const Student &s ) 
    { 
        name = s.name; 
        last_name = s.last_name;
        age = s.age;
        return *this; 
    }

protected:
    CString name;
    CString last_name;
    int age;
};

class Warden : public Student
{
protected:
    virtual void Serialize(CArchive& ar);
    UINT salary;
};

class Group : public CObject
{
public: 
    DECLARE_SERIAL(Group);

    enum FindType { First = 0, Last, All};
    typedef bool (*StudentsFindCallback) (Student* student, void* condition);

    Group(){ name = _T("Default Group"); }
    Group(CString _name);
    Group(Group& s);

    ~Group();

    void CreateUser();
    void ShowUsers();
    //StVecOfIt FindUser(StudentsFindCallback f, void* condition, FindType ft);
    inline Student* getStudent(POSITION pos) {return students->GetNext(pos); }
    inline void DeleteUser(POSITION it){ students->RemoveAt(it); }
    virtual void Serialize(CArchive& ar);
    void Clean();

    /*static bool FindbyName(Student* student, void* condition);
    static bool FindbyLastName(Student* student, void* condition);
    static bool FindbyAge(Student* student, void* condition);*/

    virtual inline Group& operator=( const Group &s ) 
    { 
        name = s.name; 
        students = s.students;
        return *this; 
    }

protected:
    CString name;
    StVec* students;
};

void Student::Serialize(CArchive& ar)
{
    CObject::Serialize( ar );

    if (ar.IsStoring())
    {   
        ar.SerializeClass(Student::GetRuntimeClass());      
        ar << name << last_name << age;
    }
    else 
    {
        ar.SerializeClass(Student::GetRuntimeClass());
        ar >> name >> last_name >> age;
    }   
}
void Group::Serialize(CArchive& ar)
{
    ar.SerializeClass(RUNTIME_CLASS(Group));

    if (ar.IsStoring())
    {
        ar << (int)students->GetCount();

        POSITION pos = students->GetHeadPosition();
        while(pos != NULL)
        {
            Student* student = students->GetNext(pos);

            student->Serialize(ar);
        }
    }
    else 
    {       
        Clean();
        int count = 0;
        ar >> count;

        for(INT_PTR i = 0; i < count; ++i)
        {
            Student* st = new Student();
            st->Serialize(ar);
            students->AddTail(st);
        }
    }
} 
```

我在[codeproject](http://www.codeproject.com/Articles/5330/MFC-Multiple-inheritance-and-serialization)上找到了一篇文章，但我根本无法理解。

当然，我可以添加一个指示类类型的标志。我也可以序列化到派生类，如果派生属性为空`static_cast`，则可以将其派生到基类。或者我正在考虑使用`CArchive::ReadObject`或`CArchive::ReadClass`加载类，但还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T17:02:20.730

我的 MFC 生锈了，但我相信这应该可以工作（未经测试！）。

此外，您的 Serialize() 方法永远不应为其自己的类调用 SerializeClass。由调用者决定调用它。例如，<< 和 >> 运算符这样做是为了识别归档中接下来出现的对象的类。

```
void Student::Serialize( CArchive& ar ) 
{ 
    CObject::Serialize( ar ); 

    if (ar.IsStoring()) 
    {    // No need for SerializeClass here.
        ar << name << last_name << age; 
    } 
    else  
    {    // No need for SerializeClass here.
        ar >> name >> last_name >> age; 
    }    
} 
void Group::Serialize(CArchive& ar) 
{ 
    if (ar.IsStoring()) 
    { 
        ar << (int)students->GetCount(); 

        POSITION pos = students->GetHeadPosition(); 
        while(pos != NULL) 
        { 
            Student* student = students->GetNext(pos); 
           ar << student; // << includes class info about the serialized object
        } 
    } 
    else  
    {        
        Clean(); 
        int count = 0; 
        ar >> count; 

        for(INT_PTR i = 0; i < count; ++i) 
        { 
            CObject *p;
            ar >> p; // Deserialize whatever kind of object comes next
            students->AddTail(p); 
        } 
    } 
} 
```

# iphone - 如何等待 NSURLConnection 的某个状态

> ID：12629478
> 
> 赞同：0
> 
> 时间：2012-09-27T20:24:46.570
> 
> 标签：iphone, objective-c, ios, nsurlconnection, nscondition

很抱歉打扰另一个 NSURLConnection 问题，在这里已经增加了一千多个。

场景如下。在使用动态加载的增强现实功能的 iPhone 应用程序中，会提示用户下载新的 AR 模型，因为这些模型可用。模型可能有几 MB 大，因此在决定下载之前，应向用户指示要下载的所有模型的总大小。

为了找出每个文件有多大，我想使用异步 NSURLConnection，但是一旦我得到响应（[NSURLResponse expectedContentLength]）就停止下载。我可以在委托的 connection:didReceiveResponse: 方法中执行此操作。

我的问题是，我怎样才能等到这种情况出现？如何设置 NSURLConnection，让它异步启动，然后等到 connection:didReceiveResponse: 方法被调用？我尝试使用 NSCondition，在设置 NSURLConnection 并在 connection:didReceiveResponse: 方法中发出条件信号后让它等待。但这所做的只是冻结了主线程。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T21:03:55.380

也许您可以发送 HEAD 请求而不是 GET。这可能取决于您的服务器设置，但这应该只为您提供标头，包括 Content-Length。您应该能够使用 NSMutableURLRequest 以便您可以更改请求方法，然后像往常一样读取响应中的 expectedContentLength。

# javascript - 如何使用javascript获取搜索关键字？

> ID：12629480
> 
> 赞同：3
> 
> 时间：2012-09-27T20:24:54.587
> 
> 标签：javascript, search, search-keywords

我想做的是跟踪访问者在搜索时使用的关键字以登陆我的页面。

例如，如果您搜索`stackoverflow`然后单击该链接，我必须能够识别使用`javascript`该用户搜索的内容`stackoverflow`

我尝试使用`document.referrer`. 问题是从`https://www.google.co.in/search?q=stackoverflow&oq=stackoverflow&sugexp=chrome,mod=1&sourceid=chrome&ie=UTF-8`

它重定向到`http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCEQFjAA&url=http%3A%2F%2Fstackoverflow.com%2F` 我无法访问关键字的表单。

有没有办法获取以前的网址？

# regex - 网址重写 - 查询字符串解析

> ID：12629485
> 
> 赞同：0
> 
> 时间：2012-09-27T20:25:20.003
> 
> 标签：regex, iis, url-rewriting, iis-6, helicontech

我是 URL 重写的新手，有点沮丧。我在服务器上使用 Helicon 并且已经正确地重写了大多数 URL。

（我必须删除“//”才能提交问题，但网址是标准的 http:// 版本）

我的最后一个任务是得到这些：

[http://example.com/Object/?page=1](http://example.com/Object/?page=1)

[http://example.com/Object/?page=1&pagesize=10](http://example.com/Object/?page=1&pagesize=10)

[http://example.com/Object/?page=1&pagesize=10&backcolor=red](http://example.com/Object/?page=1&pagesize=10&backcolor=red)

到

[http://example.com/default.aspx?resource=Object&page=1](http://example.com/default.aspx?resource=Object&page=1)

[http://example.com/default.aspx?resource=Object&page=1&pagesize=10](http://example.com/default.aspx?resource=Object&page=1&pagesize=10)

[http://example.com/default.aspx?resource=Object&page=1&pagesize=10@backcolor=red](http://example.com/default.aspx?resource=Object&page=1&pagesize=10@backcolor=red)

最好我想要一个规则来处理所有 3 种可能性，但是如果我需要制定 3 条规则，每条规则一条，并在最后添加一个 [L] 或其他东西也可以。我只是无法正确解析查询字符串。

这是我现有的一条规则，可以让您了解我一直在做什么：

```
RewriteRule ^/([a-zA-Z0-9]+)(/([a-zA-Z0-9]+)(/([a-zA-Z0-9]+))?)?/?($|\?) /default.aspx?resource=$1&id=$3&option=$5 [L] 
```

这是一个单独的示例，但语法显示了我在做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:00:16.533

这对你有用吗？

```
RewriteRule ^\/([^/]*)\/\?(.*)$ /default.aspx?resource=$1&$2 [L] 
```

[更新]

试试这个：

```
RewriteRule ^([^/]*(?=\/)|[^?]*(?=\?)|.*)($|[^\?]*\?(.*)) /default.aspx?resource=$1&$3 [L] 
```

# c# - 如何清除 Windows 中的所有事件日志？

> ID：12629489
> 
> 赞同：5
> 
> 时间：2012-09-27T20:25:42.577
> 
> 标签：c#, logging, windows-services

如何使用 C# 清除 Windows 中的所有事件日志？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T20:38:45.270

```
using System.Diagnostics;

using(var eventLog = new EventLog("Security", System.Environment.MachineName);
    eventLog.Clear(); 
```

删除安全事件日志。

全部删除：

```
foreach (var eventLog in EventLog.GetEventLogs())
{         
     eventLog.Clear();
     eventLog.Dispose();
} 
```

# apache - XAMPP Apache 站点根相关链接在本地工作，通过 LAN 上的远程计算机访问开发站点时失败

> ID：12629491
> 
> 赞同：0
> 
> 时间：2012-09-27T20:25:51.350
> 
> 标签：apache, remote-access, lan

我试图在一台服务器机器上设置多个站点开发区域，然后通过 LAN 处理来自其他计算机的内容。（请原谅我的问题的一般措辞，该网站一直阻止我输入示例 URL 等）

当我直接在服务器机器上工作时，输入

```
my-virtual-host-name:port# 
```

作为 URL，一切都很好。它正确地将所有链接、图像引用等解析为相对于站点根目录。

当我通过我们的局域网从另一台机器连接时，输入

```
server-ip-address:port# 
```

我会自动重定向到默认的 XAMPP 欢迎页面（所以我至少连接到服务器）

我想出了如何设置别名语句，例如

```
server-computer-ip-address:port#/alias-for-file-path 
```

让我进入我网站的主页。但随后当我点击链接时，例如

```
/products-services 
```

我想去

```
server-ip-address/alias-for-file-path/products-services 
```

它改为解决

```
server-ip-address/products-services 
```

## 运行 Apache 服务器的计算机上的相关设置

IP地址：192.168.22.12

在 Windows 主机文件中：127.0.0.1 localhost mySiteName

在 httpd-vhosts.conf 中：

```
NameVirtualHost *
  <VirtualHost *>
    DocumentRoot "C:\xampp\htdocs"
    ServerName localhost
  </VirtualHost>
  <VirtualHost *>
    DocumentRoot "D:\companysites\newproducts\mysite"
    ServerName mySiteName
  <Directory "D:\companysites\newproducts\mysite">
    Order allow,deny
    Allow from all
  </Directory>

</VirtualHost> 
```

在 httpd.conf 中（将备用端口分配给 Apache，因为 80 否则会使用）：

听3399

已经尝试了一堆这里没有详细介绍的东西，试图弄清楚如何正确定义服务器机器和远程机器虚拟主机定义和url设置的某种组合，以及到目前为止的大量网络搜索和零运气！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:05:19.893

我终于想通了！希望这对其他人有用且清楚！（我是新手，所以对其他人来说可能很明显 - 有一些我不明白的基本事情现在做了......）

在 httpd-vhosts.conf 文件中，您可以：

1.  创建任意数量的“Listen”语句，每个语句都有一个唯一的端口号。所以，例如。

    听 8885

    听 8886

    听 8887

2.  然后，您可以创建任意数量的 VirtualHost 定义部分，将上述端口之一与每个相关联，例如：

> ```
>  NameVirtualHost *
>  <VirtualHost 192.168.22.11:3399>
>    DocumentRoot "C:\xampp\htdocs"
>    ServerName localhost
>  </VirtualHost>
>  <VirtualHost 192.168.22.11:3388>
>    DocumentRoot "file-system/path"
>    ServerName mySiteName
>  <Directory "file-system/path">
>    Order allow,deny
>    Allow from all
>  </Directory>
> 
> </VirtualHost> 
> ```

1.  从远程计算机连接到服务器时，*不能*使用别名服务器名称和/或别名文件路径名的任何组合（至少，对我不起作用 - 如果有办法，我会有兴趣知道）。相反，始终输入 ip-address:port#，例如，输入作为服务器计算机上已定义子域之一的 URL：

    192.168.22.11:3399

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T21:35:31.503

目前你已经设置好了所有的虚拟主机都在监听同一个连接。所有端口的相同ip。*

# r - ggplot2 0.9.2 中的数学符号

> ID：12629492
> 
> 赞同：4
> 
> 时间：2012-09-27T20:25:55.833
> 
> 标签：r, ggplot2

当您想向您添加数学符号时，`facet_wrap`您曾经能够使用`grid`包[（示例取自此处）](https://stackoverflow.com/questions/11979017/changing-facet-label-to-math-formula-in-ggplot2)：

```
library(ggplot2); library(grid)
d <- ggplot(diamonds, aes(carat, price, fill = ..density..)) 
    xlim(0, 2) + stat_binhex(na.rm = TRUE) + opts(aspect.ratio = 1)
d <- d + facet_wrap(~ color, ncol = 4)
grob <- ggplotGrob(d)
strip_elem <- grid.ls(getGrob(grob, "strip.text.x", grep=TRUE, global=TRUE))$name
grob <- editGrob(grob, strip_elem[1], label=expression(Y[1]))
grid.draw(grob) 
```

这不再有效，因为它给出了这个错误：

```
>  strip_elem <- grid.ls(getGrob(grob, "strip.text.x", grep=TRUE, global=TRUE))$name
Error in getGrob(grob, "strip.text.x", grep = TRUE, global = TRUE) : 
  It is only valid to get a child from a 'gTree'
> grob <- editGrob(grob, strip_elem[1], label=expression(Y[1]))
Error in editGrob(grob, strip_elem[1], label = expression(Y[1])) : 
  object 'strip_elem' not found 
```

我们如何在 0.9.2 版本中添加数学符号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T07:39:28.457

**更新使用**[此处提供](https://stackoverflow.com/questions/11979017/changing-facet-label-to-math-formula-in-ggplot2) 的 facet_wrap_labeller 函数可能更容易。

```
library(ggplot2)
library(gtable)

d <- ggplot(diamonds, aes(carat, price, fill = ..density..)) +
    xlim(0, 2) + stat_binhex(na.rm = TRUE) + theme(aspect.ratio = 1)
(d <- d + facet_wrap(~color, ncol = 4))    

facet_wrap_labeller <- function(gg.plot, labels=NULL) {
  require(gridExtra)

  g <- ggplotGrob(gg.plot)
  gg <- g$grobs      
  strips <- grep("strip_t", names(gg))

  for(ii in seq_along(labels))  {
    modgrob <- getGrob(gg[[strips[ii]]], "strip.text", 
                       grep=TRUE, global=TRUE)
    gg[[strips[ii]]]$children[[modgrob$name]] <- editGrob(modgrob,label=labels[ii])
  }

  g$grobs <- gg
  class(g) = c("arrange", "ggplot",class(g)) 
  return(g)
}

# Some arbitrary strip texts
StripTexts = expression(Y[1], E, F, G, H, I, J)

# Apply the facet_wrap_labeller function
g = facet_wrap_labeller(d, StripTexts)

# Draw it
g 
```

**原始解决方案**稍作修改，使选择条形文本更容易一些。

这可行，但中间有点混乱。它使用和包中`ggplot2 0.9.2`的和功能。必须有一个更简单的方法，我希望你能从中得到一些东西来制定一个更简单的解决方案。`grid``gtable`

步骤是：

*   绘制原图；
*   找到需要更改的条形元素；
*   提取该条带元素；
*   将“D”更改为`expression(Y[1])`；
*   将修改后的条形元素重新插入到原始图中。

    ```
    library(ggplot2); library(grid); library(gtable)
    d <- ggplot(diamonds, aes(carat, price, fill = ..density..)) +
        xlim(0, 2) + stat_binhex(na.rm = TRUE) + theme(aspect.ratio = 1)
    (d <- d + facet_wrap(~color, ncol = 4))    
    # The aim is to change the strip text "D" to expression(Y[1])

    # Winston's accessor function:
    gt_getgrob <- function(gt, pattern) {
      idx <- grep(pattern, gt$layout$name)
      if (length(idx) > 1)
        stop("More than one match for pattern '", pattern, "'")
      gt$grobs[[idx]]
    }

    g = ggplotGrob(d)
    g$layout    # We want "strip_t-1"
    strip <- gt_getgrob(g, "t-1")        # Use the accessor function to extract it.
    str(strip)     # Locate the "D" label

    strip$children[[2]]$label = expression(Y[1])    # Change the label.
    grid.draw(strip)       # Yes, it's worked

    gt <- ggplot_gtable(ggplot_build(d))  
    gtable_show_layout(gt)       # Get the layout of the original plot.

    gt = gtable_add_grob(gt, strip, t=3, l=4, b=3, r=4)  # Insert the modified strip element into the plot.
    grid.newpage()
    grid.draw(gt) 
    ```

结果是：

![在此处输入图像描述](../Images/8c16b14735a56b376c736d32260ea142.png)

# windows-phone-7 - WP7 XNA ContentLoadException 仅适用于特定类型的模型

> ID：12629497
> 
> 赞同：0
> 
> 时间：2012-09-27T20:26:04.820
> 
> 标签：windows-phone-7, 3d, xna

最近，我将一个桌面 XNA 应用程序移植到 WP7。但是，在尝试加载特定类型的模型时，我得到了 ContentLoadExceptions。

我收到以下错误：

```
Cannot find type Microsoft.Xna.Framework.Content.Pipeline.Graphics.NodeContent, Microsoft.Xna.Framework.Content.Pipeline, Version=4.0.0.0, Culture=neutral, PublicKeyToken=842cf8be1de50553. 
```

即使我使用默认内容管道，它也会尝试加载仅在 XNA 桌面版本上可用的类。我有几种类型的模型：地形、建筑物和其他几种类型。由于此错误，建筑图块拒绝加载。我尝试了几种文件格式（Collada、FBX、X 和 OBJ 并且总是得到相同的错误）。

任何人都知道为什么会发生这种情况？

# php - php表单上单选按钮的javascript验证问题

> ID：12629504
> 
> 赞同：0
> 
> 时间：2012-09-27T20:26:47.773
> 
> 标签：php, javascript, mysql, validation

这是包含带有单选按钮的表单的 php 文件的代码：

```
<?php
    while($r7 = mysql_fetch_array($rt3)){
        $name=$r7["name"];  
        $s=$r7["question"]; 

        echo "
        <div>$s</div>

        <form name='Tester' method='post' onSubmit='return RegValidate(this);' action='quest.php' >
        <input type='radio' name='w1' value='1'>1<br>
        <input type='radio' name='w1' value='2'>2<br>
        <input type='radio' name='w1' value='3'>3<br>

        ";
        }
        echo" <input  name='Submit' value='Tester' type='submit' />
        </form>";

?> 
```

$name 和 $q 是使用 mysql 查询从数据库中派生的。这工作正常。到目前为止，我已经使用了以下 javascript 代码：

```
function RegValidate(Tester) 
 {

 if($('#w1').not(':checked'))
{
   alert('Radio not checked');
   return false;
}

} 
```

但是使用此代码，我继续收到错误消息，即使我选择了单选按钮，我也无法继续。

while 循环产生几组单选按钮，如 $q，从数据库中获取问题并将其与 3 个单选按钮一起发布到页面上。每个问题 $q 都有上面的 3 个单选按钮，这就是 $name 的原因。

如何使用 javascript 验证此表单。注意。该表单将仅包含单选按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:32:52.887

您有一个错误，您的输入没有 ID 或 CLASS，所以添加到所有输入单选`class='w1'`并尝试下一个代码：

```
 if ($(".w1 option:selected").length<1)
     alert ('nothing selected'); 
```

还可以看看这篇文章：[检查是否使用 jQuery 选择了选项，如果没有选择默认值](https://stackoverflow.com/questions/149573/check-if-option-is-selected-with-jquery-if-not-select-a-default)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:56:12.680

做这些事情：

```
 <input type='radio' class='w1' name='w1' value='1'>1<br>
      <input type='radio' class='w1' name='w1' value='2'>2<br>
      <input type='radio' class='w1' name='w1' value='3'>3<br> 
```

在js中：

最新编辑：

```
 if ( $(':radio[class=w1]').attr('checked') != 'checked' ) {
    alert('Radio not checked');

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T00:02:01.983

```
function RegValidate(Tester) {
    if ($(":radio[name=w1]:checked").toArray().length == 0) {
        alert('nothing selected');
        return false;
    }
}​ 
```

[小提琴](http://jsfiddle.net/barmar/MBBL5/1/)

# ios - 核心数据。如何组织两个资源之间的关系。（一个有另一个使用的图像的网址）

> ID：12629510
> 
> 赞同：0
> 
> 时间：2012-09-27T20:27:13.340
> 
> 标签：ios, core-data, relationship

我正在为 iOS 开发一个类似 Forthsquare 的应用程序。使用 Core Data 我正在为两种资源准备方案：地点和类别。每个地方都属于类别。每个类别都有 *image_url* 字段，其中包含指向图像（酒店、餐厅等）的链接，因此地图上显示的每个地点都使用其类别图像作为注释标记。

问题是选择什么方法以及如何组织这些资源之间的关系以缓存类别图像（通过 *image_url* 字段获取），因此它们可以被具有相同类别的所有地方重用而无需检索每次加载每个给定位置时的类别图像？

作为 iOS 和 Core Data 的新手，我想知道是否有任何好的做法可以完成此类任务。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:34:50.207

在类似情况下，我在我的应用程序中所做的是向类别添加一些属性（请注意，如果图像“小”，您可以将图像数据直接保存在核心数据中，或者将其保存在磁盘上，如果图像“大的”）：

*   bool fetchingImage

*   NSInteger 类别ID

*   url（从中获取）

*   imageData 或 filePath

创建类别并分配 url 后，您可以获取图像（在后台）并将 fetchinImage 标志设置为 yes。或者您可以等到第一个对象请求图像，在这种情况下您返回 nil 但启动获取。

当图像最终到达并在此实体中设置它时，您会在主线程上发送通知，说明 categorID 现在有图像。任何监听它的人都可以请求该图像并使其可见。

# jquery - jQuery在具有特定名称的输入后附加div？

> ID：12629512
> 
> 赞同：1
> 
> 时间：2012-09-27T20:27:22.507
> 
> 标签：jquery, append

我有以下 HTML

```
<input type="submit" name="cm-ajax-submit" value="Register"> 
```

我需要附加一个 div 标签，以便它具有这种格式

`<input type="submit" name="cm-ajax-submit" value="Register"><div id="cmprivacy"></div>`

有没有办法使用 jQuery append 或其他函数来查找名称为 cm-ajax-submit 的输入并附加该 div？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T20:29:32.773

创建元素并使用`.after`,

```
$('input[name=cm-ajax-submit]').after('<div id="cmprivacy"></div>'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-27T20:30:18.170

使用[`.after`](http://api.jquery.com/after/)函数，而不是`.append`.

html:

```
<input id="button" type="submit" name="cm-ajax-submit" value="Register">​ 
```

jQuery：

```
$('#button').click(function() {
    $(this).after('<div id="cmprivacy">Hey</div>');
});​ 
```

[http://jsfiddle.net/sfsWC/](http://jsfiddle.net/sfsWC/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T20:32:40.433

试试这个.. 使用 .after() 方法

```
$('input[name="cm-ajax-submit"]').after('<div id="cmprivacy"></div>') 
```

# .net - Perfmon、PerfMonitor 和 PerfView

> ID：12629514
> 
> 赞同：6
> 
> 时间：2012-09-27T20:27:24.693
> 
> 标签：.net, windows, performance, profiling, monitoring

有[几篇](http://msdn.microsoft.com/en-us/magazine/gg490356.aspx) [文章](http://brokenbitsslowbytes.blogspot.com/2011/12/perfmonitor-primer.html)讨论了 ETW 和“PerfMonitor.exe”。这些文章讨论了从命令提示符启动分析的能力。例如：

```
PerfMonitor.exe runAnalyze MySlowApplication.exe 
```

不知何故，我有或有过 PerfMon.exe 是同一个工具的印象。但是当我尝试使用命令行选项时，它不起作用。那么也许它们确实是两种不同的工具？还是其中一个是另一个的较新版本（删除或不删除命令行功能）？

然后是[PerfView](http://channel9.msdn.com/Series/PerfView-Tutorial)工具。我想知道它是否是 perfmonitor 或 perfmon 的较新版本？或者它只是一个自成一体的工具？最后，是否有这些工具提供的功能的细分？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-28T05:54:22.043

Windows Performance Monitor(ing) (PerfMon) 和 ETW (PerfMonitor, PerfView work with ETW) 是不同的。ETW 在内核级别工作并具有审计跟踪，而 PerfMon 在更高级别处理计数器对象。例如使用 ETW，即使在系统启动和关闭期间也可以分析服务/应用程序行为。ETW 实际上从 PerfMon 停止的地方起飞。

工具明智，

**PerfMonitor**为用户提供了一种机制，可以通过充当 ETW 控制器来控制 ETW 数据的收集。它基本上有助于收集托管代码的跟踪，而其他工具（例如 XPerf）则用于非托管代码

**PerfView**在另一方面工作，用于在各个方面分析 ETW 跟踪日志。

**PerfMon**被设计为一种水平筛选工具，可显示系统/服务或应用程序的内存/磁盘/CPU/网络性能的广泛视图。它基本上让我们可以执行以下操作：

*   同时查看来自多台计算机的数据。

*   查看您所做的更改如何影响计算机。

*   在查看时更改当前活动的图表。

*   将性能监视器数据导出到电子表格或数据库程序，或将其用作 C 程序的原始输入。

*   触发程序或过程，或在超过阈值时发送通知
    。

*   随着时间的推移，记录来自不同计算机的各种对象的数据。
    您可以使用这些日志文件来记录典型的资源使用情况、监控问题或帮助进行容量规划。

*   将多个日志文件的选定部分组合成一个长期
    存档。

*   报告当前活动或一段时间内的趋势。

*   保存计数器和选项设置的不同组合，以便快速启动和更改

查看[此](https://stackoverflow.com/questions/4112272/are-perfmon-performance-counters-based-on-the-same-thing-under-the-hood-as-the)以获取更多信息

# ruby - 哪个 shell ruby 用作它的子 shell？

> ID：12629519
> 
> 赞同：5
> 
> 时间：2012-09-27T20:27:54.287
> 
> 标签：ruby

如果我做

```
`echo $SHELL` 
```

，我明白了`/bin/bash`。

但是如果我尝试运行这个循环：

```
`for x in {1..20}; do echo $x; done` 
```

我得到`{1..20}`的不是预期的 20 个数字。

也许 ruby​​ 使用其他一些 shell 来运行这些命令？我该如何解决这个问题？

**编辑：**软件版本：

```
$ irb --version
irb 0.9.5(05/04/13)
$ ruby --version
ruby 1.8.7 (2010-06-23 patchlevel 299) [x86_64-linux]
$ bash --version
GNU bash, version 4.1.5(1)-release (x86_64-pc-linux-gnu) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T22:10:51.403

Ruby`sh`用作反引号和#system 的子shell。`$SHELL`是你的默认 shell，`$0`应该告诉你你当前的 shell。您可以通过专门调用它来获得所需的外壳

```
$ ruby -v
ruby 1.8.7 (2011-02-18 patchlevel 334) [x86_64-linux], MBARI 0x6770, Ruby Enterprise Edition 2011.03
$ irb --version
irb 0.9.5(05/04/13)
$ irb
irb(main):001:0> `echo $0 -- $SHELL`
=> "sh -- /bin/bash\n"
irb(main):002:0> `bash -c 'echo $0 -- $SHELL'`
=> "bash -- /bin/bash\n"
irb(main):003:0> ENV['SHELL']
=> "/bin/bash"
irb(main):004:0> system 'bash', '-c', 'echo $0 -- $SHELL'
bash -- /bin/bash
=> true
irb(main):005:0> system 'echo $0 -- $SHELL'
sh -- /bin/bash
=> true 
```

# html - 960gs 嵌套网格结合响应式

> ID：12629522
> 
> 赞同：1
> 
> 时间：2012-09-27T20:28:03.040
> 
> 标签：html

各位晚上好，

我有一个关于使用 960.gs 嵌套网格和响应式网页设计的问题。目前，我使用嵌套网格以及 Alpha 和 Omega 类，将左侧 (alpha) 和右侧 (omega) 边距重置为 0。现在这是硬编码的。我的网格结构如下：

```
<div class="grid_8">
  <ul class="recentbox">

       <li class="grid_4 projectbox alpha">
            <a href="#">

            <div class="thumbnails">
               <img src="images/portfolio/thumbnails/thumbnail-5.png" alt="Thumbnail">
            </div> <! - End. Thumbnails ->
            </a>

            <div class="description">
                 <h3> <a href="#"> Title Project </a> </h3>
                 <p> Lorem ipsum dolor sit amet, elit consectetur adipiscing. Phasellus ante quis eros.
                 </p>
            </div> <! - End. Description ->

            <div class="tags">
                Tags: Photoshop, Illustrator, Graphic Design
            </div> <! - End. Tags ->
        </li> <! - End li.grid_4 projectbox ->

       <li class="grid_4 projectbox">
            <a href="#">

            <div class="thumbnails">
               <img src="images/portfolio/thumbnails/thumbnail-5.png" alt="Thumbnail">
            </div> <! - End. Thumbnails ->
            </a>

            <div class="description">
                 <h3> <a href="#"> Title Project </a> </h3>
                 <p> Lorem ipsum dolor sit amet, elit consectetur adipiscing. Phasellus ante quis eros.
                 </p>
            </div> <! - End. Description ->

            <div class="tags">
                Tags: Photoshop, Illustrator, Graphic Design
            </div> <! - End. Tags ->
        </li> <! - End li.grid_4 projectbox ->

       <li class="grid_4 projectbox omega">
            <a href="#">

            <div class="thumbnails">
               <img src="images/portfolio/thumbnails/thumbnail-5.png" alt="Thumbnail">
            </div> <! - End. Thumbnails ->
            </a>

            <div class="description">
                 <h3> <a href="#"> Title Project </a> </h3>
                 <p> Lorem ipsum dolor sit amet, elit consectetur adipiscing. Phasellus ante quis eros.
                 </p>
            </div> <! - End. Description ->

            <div class="tags">
                Tags: Photoshop, Illustrator, Graphic Design
            </div> <! - End. Tags ->
        </li> <! - End li.grid_4 projectbox ->

   </ul> <! - End ul -> 
```

我的网站有 3 列布局。现在的问题是我想让我的网站响应。对于我的 iPad，我设计的不是 3 列，而是 2。当我使容器具有适当的宽度（对于 iPad）时，第一个 div 底部的最后一个 div（带有额外的类 omega）要站立，使这个 div 错误财产。完全 Sighted 类 alpha 和 omega 在代码中是硬编码的，更改不接受它们。上面示例中的中间 div 实际上必须获取 omega 类和最后一个 div（现在处于第一个条件下），应该获取 alpha 类。

我想要具有响应式媒体查询的站点，我的问题是，我该如何做才能使 alpha 和 omega 能够适应网格，或者我如何在没有课程的情况下做到这一点？

已经谢谢你了！

格雷茨，卡斯帕 B

PS：对不起我的英语不是我的母语。

# java - 如何从 JAX-WS @WebMethod 返回带有 List 元素的对象？

> ID：12629524
> 
> 赞同：1
> 
> 时间：2012-09-27T20:28:14.350
> 
> 标签：java, jboss, jax-ws

我有一个自定义 Java 对象，我试图将其作为对 JAX-WS @WebMethod 的响应返回。对象是：

```
public class SOAResponse {

    public String status;
    public String statusDescription;
    public List<String> responseList;

} 
```

我遇到了问题

> 公共列表响应列表；

元素。

我正在运行 JBoss 7.1 服务器。

# php - 通过 readfile() 保护/提供文件，强制下载？

> ID：12629526
> 
> 赞同：3
> 
> 时间：2012-09-27T20:28:24.197
> 
> 标签：php, wordpress, readfile, force-download

我正在尝试制作一个简单的脚本来做两件事：

1.  提供一个文件并隐藏它的目的地
2.  有下载计数器

现在，我在 wordpress 环境中执行此操作，但这个问题并不完全与 wordpress 相关，所以我想我会在这里问。

基本上，我目前设置它的方式是我有一个链接，当您单击它时会设置一个链接，`$_['GET']`然后检查它是否已设置。如果设置，则提供下载文件。

链接：`<a href="http://localhost:8888/fresh/?dl_id=01">Click here!</a>`'

`$_['GET']`代码： http : [//pastebin.com/93nD43gA](http://pastebin.com/93nD43gA)

代码中有一些 wordpress 行话，但基本上它是检查下载计数 user_meta，如果它 > 0，`serveFile()`则调用它。

我在这里遇到的主要问题是，如果我单击链接，`readfile()`会将实际文件内容加载到窗口中（乱码文本）。如果我添加一个`target=_blank`，`<a>`它会打开一个新的浏览器窗口并将内容加载到窗口中。

当我将它作为独立的 php 文件执行时，这种方法似乎工作得很好。我的主要问题是我需要保留 wordpress 空间，以便我可以调用与之关联的函数等。

我尝试`$_['GET']`在 self 页面、带有自定义模板的另一个页面（上面的 pastebin 中的代码）以及独立的 php 文件中使用 。前两个选项都将文件加载到窗口中。第三个不保留 wordpress 功能，即使我包含`blog-header.php`.

谁能指出我如何让​​文件强制下载而不加载到窗口的正确方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T20:31:25.387

无论文件类型是什么，您都需要设置适当的标题。例如，如果`readfile`始终提供 PDF，则应该这样做：

```
// disable browser caching -- the server may be doing this on its own
header("Pragma: public");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");

header('Content-Type: application/pdf');
//forces a download
header("Content-Type: application/force-download");
header('Content-Disposition: attachment; filename=filename.pdf');
readfile($file); 
```

请记住，`header`仅当您根本没有在请求中发送任何数据（包括空格）时才有效。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-27T20:34:59.190

“乱码”文本是您想要的，但除此之外您还必须设置一个 mime。这可以通过简单地设置一个标题来完成，例如`header("Content-Type: image/png");`

如果文件 mimes 会有所不同（例如 pdf、doc、png 等），您应该查看 finfo 扩展名。有了它，您可以获得文件的完整和正确的 mime

```
<?php
$finfo = new \finfo(FILEINFO_MIME);
$mime = $finfo->file('path/to/file', FILEINFO_MIME_TYPE);
header("Content-Type: $mime"); 
```

如前所述 - 只有在没有写入输出的情况下才能设置标头（没有回显、打印等。[输出缓冲](http://php.net/manual/en/book.outcontrol.php)可以在这里为您提供帮助）。

# asp.net - 如何针对异常需求自定义 ASP.NET Web API AuthorizeAttribute

> ID：12629530
> 
> 赞同：37
> 
> 时间：2012-09-27T20:28:43.683
> 
> 标签：asp.net, asp.net-mvc, security, asp.net-web-api

我从**System.Web.Http.AuthorizeAttribute**继承来创建自定义授权/身份验证例程，以满足使用 ASP.NET MVC 4 开发的 Web 应用程序的一些不寻常的要求。这增加了用于来自 Web 的 Ajax 调用的 Web API 的安全性客户。要求是：

1.  用户每次执行交易时都必须登录，以验证在某人登录并离开后其他人没有走到工作站。
2.  不能在程序时将角色分配给 Web 服务方法。必须在运行时分配它们，以便管理员可以配置它。此信息存储在系统数据库中。

Web 客户端是[单页应用程序 (SPA)](http://en.wikipedia.org/wiki/Single-page_application)，因此典型的表单身份验证不能很好地工作，但我正在尝试尽可能多地重用 ASP.NET 安全框架来满足要求。定制的**AuthorizeAttribute**非常适合要求 2 确定哪些角色与 Web 服务方法相关联。我接受三个参数，应用程序名称、资源名称和操作来确定哪些角色与方法相关联。

```
public class DoThisController : ApiController
{
    [Authorize(Application = "MyApp", Resource = "DoThis", Operation = "read")]
    public string GetData()
    {
        return "We did this.";
    }
} 
```

我重写**OnAuthorization**方法以获取角色并对用户进行身份验证。由于每个事务都必须对用户进行身份验证，因此我通过在同一步骤中执行身份验证和授权来减少来回的喋喋不休。我通过使用在 HTTP 标头中传递加密凭据的基本身份验证从 Web 客户端获取用户凭据。所以我的**OnAuthorization**方法如下所示：

```
public override void OnAuthorization(HttpActionContext actionContext)
{

     string username;
     string password;
     if (GetUserNameAndPassword(actionContext, out username, out password))
     {
         if (Membership.ValidateUser(username, password))
         {
             FormsAuthentication.SetAuthCookie(username, false);
             base.Roles = GetResourceOperationRoles();
         }
         else
         {
             FormsAuthentication.SignOut();
             base.Roles = "";
         }
     }
     else
     {
         FormsAuthentication.SignOut();
         base.Roles = "";
     }
     base.OnAuthorization(actionContext);
 } 
```

**GetUserNameAndPassword**从 HTTP 标头中检索凭据。然后我使用**Membership.ValidateUser**来验证凭据。我有一个自定义成员资格提供程序和角色提供程序插入以访问自定义数据库。如果用户已通过身份验证，我将检索资源和操作的角色。从那里我使用基础**OnAuthorization**来完成授权过程。这是它崩溃的地方。

如果用户通过身份验证，我使用标准表单身份验证方法将用户登录（FormsAuthentication.SetAuthCookie），如果他们失败，我将他们注销（FormsAuthentication.SignOut）。但问题似乎是基础**OnAuthorization**类无权访问已更新的**Principal**，因此**IsAuthenticated**设置为正确的值。它总是落后一步。我的猜测是，它正在使用一些缓存值，直到与 Web 客户端进行往返时才会更新。

所以所有这些都引出了我的具体问题，即是否有另一种方法可以在不使用 cookie的情况下将**IsAuthenticated**设置为当前**Principal的正确值？**在我看来，cookie 并不真正适用于我每次都必须进行身份验证的特定场景。我知道**IsAuthenticated**未设置为正确值的原因是我还将**HandleUnauthorizedRequest**方法重写为：

```
 protected override void HandleUnauthorizedRequest(HttpActionContext filterContext)
 {
     if (((System.Web.HttpContext.Current.User).Identity).IsAuthenticated)
     {
         filterContext.Response = new HttpResponseMessage(System.Net.HttpStatusCode.Forbidden);
     }
     else
     {
         base.HandleUnauthorizedRequest(filterContext);
     }
 } 
```

如果失败是由于授权而不是身份验证，这允许我向 Web 客户端返回 Forbidden 状态代码，并且它可以相应地响应。

那么在这种情况下，为当前**Principle设置****IsAuthenticated的正确方法是什么？**

 *** * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-28T20:18:16.010

我的方案的最佳解决方案似乎是完全绕过基本**OnAuthorization**。由于我每次都必须进行身份验证，因此 cookie 和缓存的原理并没有多大用处。所以这是我想出的解决方案：

```
public override void OnAuthorization(HttpActionContext actionContext)
{
    string username;
    string password;

    if (GetUserNameAndPassword(actionContext, out username, out password))
    {
        if (Membership.ValidateUser(username, password))
        {
            if (!isUserAuthorized(username))
                actionContext.Response = 
                    new HttpResponseMessage(System.Net.HttpStatusCode.Forbidden);
        }
        else
        {
            actionContext.Response = 
                new HttpResponseMessage(System.Net.HttpStatusCode.Unauthorized);
        }
    }
    else
    {
        actionContext.Response = 
            new HttpResponseMessage(System.Net.HttpStatusCode.BadRequest);
    }
} 
```

我开发了自己的方法来验证称为**isUserAuthorized**的角色，并且我不再使用基础**OnAuthorization**，因为它检查当前的**Principle**以查看它是否**isAuthenticated**。 **IsAuthenticated**只允许获取，所以我不确定如何设置它，而且我似乎不需要当前的**Principle**。对此进行了测试，它工作正常。

如果有人有更好的解决方案或者可以看到这个问题的任何问题，仍然感兴趣。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-11-17T19:59:12.197

要添加到已经接受的答案：检查当前源代码 (aspnetwebstack.codeplex.com) `System.Web.Http.AuthorizeAttribute`，看起来文档已过时。Base`OnAuthorization()`仅调用/检查私有静态`SkipAuthorization()`（仅检查是否`AllowAnonymousAttribute`在上下文中使用以绕过其余的身份验证检查）。然后，如果没有跳过，则`OnAuthorization()`调用 public `IsAuthorized()`，如果该调用失败，则调用 protected virtual `HandleUnauthorizedRequest()`。这就是它所做的一切......

```
public override void OnAuthorization(HttpActionContext actionContext)
{
    if (actionContext == null)
    {
        throw Error.ArgumentNull("actionContext");
    }

    if (SkipAuthorization(actionContext))
    {
        return;
    }

    if (!IsAuthorized(actionContext))
    {
        HandleUnauthorizedRequest(actionContext);
    }
} 
```

往里看`IsAuthorized()`，这就是针对角色和用户检查 Principle 的地方。`IsAuthorized()`所以，用你上面的东西而不是覆盖`OnAuthorization()`将是要走的路。话又说回来，您仍然可能需要覆盖其中一个`OnAuthorization()`或`HandleUnauthorizedRequest()`无论如何来决定何时返回 401 与 403 响应。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-06-02T10:52:29.600

为了补充 Kevin 的绝对正确答案，我想说我可能会稍微修改它以利用响应对象的现有 .NET 框架路径，以确保框架中的下游代码（或其他消费者）不会受到不利影响通过一些无法预测的奇怪特质。

具体来说，这意味着使用以下代码：

```
actionContext.Response = actionContext.ControllerContext.Request.CreateErrorResponse(HttpStatusCode.Unauthorized, REQUEST_NOT_AUTHORIZED); 
```

而不是：

```
actionContext.Response = new HttpResponseMessage(System.Net.HttpStatusCode.Unauthorized); 
```

在哪里`REQUEST_NOT_AUTHORIZED`：

```
private const string REQUEST_NOT_AUTHORIZED = "Authorization has been denied for this request."; 
```

我`string`从`SRResources.RequestNotAuthorized`.NET 框架的定义中提取了它。

很好的答案凯文！我以同样的方式实现了我的，因为`OnAuthorization`在基类中执行没有意义，因为我正在验证一个为我们的应用程序定制的 HTTP Header，并且实际上根本不想检查 Principal 因为没有一个。**

# eclipse - Firefox Tomcat7 Cookie IllegalArgumentException

> ID：12629532
> 
> 赞同：0
> 
> 时间：2012-09-27T20:28:54.620
> 
> 标签：eclipse, firefox, cookies, tomcat7

Tomcat 7.0.30 火狐 15.0.1 Eclipse 3.7 和 4.2

我最近安装了 Tomcat7.0.30，从那以后我遇到了 Firefox 的各种问题。（例如[这个](https://stackoverflow.com/questions/12552543/cant-access-tomcat-7-manager-app-when-running-from-eclipse)）

现在我遇到了一个`java.lang.IllegalArgumentException: Control character in cookie value or attribute.`例外。

我有一个普通的 html 文件：

```
<html>
  <head><title>Test</title></head>
  <body>Test htm</body>
</html> 
```

这是 Firebug 报告的内容：

```
"NetworkError: 500 Internal Server Error - http://localhost:8080/WSTest"

The character encoding of the plain text document was not declared.
The document will render with garbled text in some browser configurations
if the document contains characters from outside the US-ASCII range.
The character encoding of the file needs to be declared in the
transfer protocol or file needs to use a byte order mark as an encoding signature. 
```

困扰我的是chrome没有任何问题。该页面就像我期望的那样打开......

我试图用谷歌搜索这个，我发现的唯一建议是添加这个：

```
org.apache.tomcat.util.http.ServerCookie.ALLOW_EQUALS_IN_VALUE=true
org.apache.tomcat.util.http.ServerCookie.ALLOW_HTTP_SEPARATORS_IN_V0=true 
```

到 catalina.properties 文件，但这没有帮助。

我真的在这里失去理智。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T11:05:34.710

显然问题出在我的 Firefox 安装上。在用尽所有选项并使用 Chrome、Safari、Opera 甚至 IE 进行测试后，一切正常，我决定卸载 Firefox，删除所有配置文件设置，然后重新安装。**新的安装工作。**

*ps 提示：如果您要完全卸载 Firefox，请不要忘记备份您的书签和密码并保存您的附加组件列表；）书签可以直接从 Firefox 备份 密码可以使用名为 Password 的附加组件存储我用截图“保存”了出口商附加组件：D*

# json - 如何以 Map 作为其属性之一反序列化 json 对象

> ID：12629533
> 
> 赞同：0
> 
> 时间：2012-09-27T20:29:01.283
> 
> 标签：json, jackson, deserialization

我一直在使用 jackson 成功地反序列化 json 对象和数组，但这次我无法理解如何处理以下对象的反序列化。我如何使用 Jackson 或任何其他 json 解析库反序列化：

```
 [
    {
        "name": "x",
        "elements": {
            "key1": {
                "name": "a",
                "type": "b"
            },
            "key2": {
                "name": "a",
                "type": "b"
            }
        }
    },
    {
        "name": "y",
        "elements": {
            "key3": {
                "name": "a",
                "type": "b"
            }
        }
    }
 ] 
```

到一个列表中，`List<Test>`下面定义了 Test ？

```
public class Test {     
    public class Element {
        public String name;
        public String type;
        public String getName() {
            return name;
        }
        public void setName(String name) {
            this.name = name;
        }
        public String getType() {
            return type;
        }
        public void setType(String type) {
            this.type = type;
        }
    }
    public String name;
    public Map<String, Element> elements;
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public Map<String, Element> getElements() {
        return elements;
    }
    public void setElements(Map<String, Element> elements) {
        this.elements = elements;
    }  
} 
```

最后，我的反序列化代码：

```
 public List<Test> test(final InputStream inputStream) {
    List<Test> test = null;
    try {
      test = mapper.readValue(inputStream, new TypeReference<List<Test>>() { });
    }  catch (final IOException e) {
      log.error("Unable to deserialize json",e);
    }
    return test;
  } 
```

如果那不可能，我实际上可以将我的 json 反序列化为什么对象？我无法提前知道的一件事是键的名称（示例中为 key1、key2、key3）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T20:49:18.963

它看起来像这样：

```
ObjectMapper mapper = new ObjectMapper();
List<Test> tests = mapper.readValue(jsonInput, new TypeReference<List<Test>>() { }; 
```

会做的。唯一棘手的部分是`TypeReference`，它是传递泛型类型信息所必需的。其他库使用类似的方法（GSON 有`TypeToken`或类似的）。

# vb.net - Visual Studio 中的 Zip 函数

> ID：12629544
> 
> 赞同：0
> 
> 时间：2012-09-27T20:29:36.917
> 
> 标签：vb.net, visual-studio-2010, zip

我四处寻找使用 Visual Studio 的 zip 功能，但没有找到任何东西。

有功能吗？我问的原因是，我目前正在我的代码中创建一个进程来调用 7zip，但是该程序并未安装在所有用户计算机上，并且安装该程序是一个选项，只是不是一个理想的选项。

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:33:15.097

试试 C# 自带的 System.IO.Compression 库： [ZipFile Class](http://msdn.microsoft.com/en-us/library/system.io.compression.zipfile.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T20:32:37.483

我使用 dotnetzip.codeplex.com 取得了非常好的效果。肯定有一些编码和质量检查工作要做，以确保它正确处理您的数据。但是你说得对，部署到随机客户端机器比调用 7zip 更容易。

# actionscript-3 - 通过清除 LSO / applicationStorageDirectory / StageWebView Cookie 来调试 AIR 项目

> ID：12629548
> 
> 赞同：0
> 
> 时间：2012-09-27T20:29:48.887
> 
> 标签：actionscript-3, flash, cookies, air, flashdevelop

使用 FlashDevelop 为 AIR for mobile 构建和测试项目时，您只能在运行之间以编程方式按名称删除我手动命名的 LSO。

如何清除 StageWebView cookie 以测试不同的 Oauth2 重定向 uri 等内容？

另外，有没有办法清除applicationStorageDirectory？

我有一种感觉，我正在以一种 n00b 的方式来做这件事。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T22:00:04.103

也许有人会有更好的解决方案，但我倾向于`trace(File.applicationStorageDirectory.nativePath)`手动删除文件。

# twitter-bootstrap - Twitter Bootstrap Popover 在 Chrome/Webkit 中的位置不正确

> ID：12629549
> 
> 赞同：1
> 
> 时间：2012-09-27T20:29:49.747
> 
> 标签：twitter-bootstrap, popover

使用 bootstrap 2.1 我在模态窗口中有一个弹出窗口。当用户单击帮助图标时会触发弹出窗口。在 Firefox 中，它的位置正确：http: [//i49.tinypic.com/30ry3at.png](http://i49.tinypic.com/30ry3at.png)

但在 Chrome 中，它的位置似乎与模式的左边缘对齐：http: [//i48.tinypic.com/25us6dw.png](http://i48.tinypic.com/25us6dw.png)

我怎样才能让它正确显示？我在这里扯头发...

谢谢。

# vim - Vim：重新格式化和重新缩进注释的自动化方式？

> ID：12629551
> 
> 赞同：4
> 
> 时间：2012-09-27T20:29:54.070
> 
> 标签：vim, formatting

我有一些我想很好地格式化的代码文档：

```
# book_id - integer
# chapter_id - integer (Optional)
# relative_url - Text: the url of the screencast file on S3, relative to the book's url
# view_count - integer 
```

我安装了 Tabular.vim，它让我走到了这一步：

```
# book_id      - integer
# chapter_id   - integer (Optional)
# relative_url - Text: the url of the screencast file on S3, relative to the book's url
# view_count   - integer 
```

我想要一些自动化的方式来生成这样的代码。也就是说，包装为 79 个字符，如果从前一条评论继续一行，则缩进。我得到的是：

```
# book_id      - integer
# chapter_id   - integer (Optional)
# relative_url - Text: the url of the screencast file on S3, relative to the
# book's url
# view_count   - integer 
```

我正在寻找的是这个：

```
# book_id      - integer
# chapter_id   - integer (Optional)
# relative_url - Text: the url of the screencast file on S3, relative to the
#                book's url
# view_count   - integer 
```

是否可以在现有插件或热键序列中执行此操作？我知道`gq`，它会将文本重新格式化为 vim 中设置的字符宽度，但不会在注释等内容中添加缩进。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T02:33:47.410

您可以使用`formatlistpat`选项（`:set fo+=n`工作所需）：

### 1.删​​除`#`

```
:%s/^# // 
```

### 2.设置`flp`选项

```
:setl flp=^[^-]*-\\s 
```

### 3\. 格式化

`gggqG`

### 4.前置`#`

```
:%s/^/# / 
```

* * *

您还可以使用以下`indentexpr`选项：

### 2a。设置`inde`选项

```
:setl inde=15 
```

### 2b。插入空行

```
:g/^/pu_ 
```

### 5.删除空评论

```
:g/^# $/d 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:51:22.450

也许自动化此类任意任务的最简单方法是借助录音。通过录音，您可以记录您**第**一次修复文档时使用的任何命令，然后非常轻松地重复它们。

例如，假设您提到的文档位于文件的开头：

首先，`set textwidth=79`用来让 Vim 知道每行的最大字符数。然后：

1.  按下`qq`开始录制
2.  按下`gg`以转到文件的开头
3.  按`gq}`重新格式化文档块。
4.  按下`:Tabularize -`以使用您的插件
5.  按`:bnext`转到下一个缓冲区
6.  按`q`停止录制。

现在，如果您按下`1000@q`，将为所有在 vim 中打开的缓冲区重复录制。您也可以`@q`在想要对当前文件执行时按。查看`:help gq`并`:help q`了解更多信息。

# java - 从 JSF 访问 JPA 元组属性

> ID：12629552
> 
> 赞同：1
> 
> 时间：2012-09-27T20:29:55.580
> 
> 标签：java, hibernate, jsf, jpa, glassfish

我试图从 JSF 访问元组属性但没有成功：

```
<h:outputText value="#{messageBean.messageTuple.get('title')}"/> 
```

上面的代码生成以下异常：

```
[#|2012-09-27T17:00:59.263-0300|WARNING|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=90;_ThreadName=Thread-2;|StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception
javax.enterprise.event.ObserverException
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at java.lang.Class.newInstance0(Class.java:372)
    at java.lang.Class.newInstance(Class.java:325)
    at org.jboss.weld.util.reflection.SecureReflections$16.work(SecureReflections.java:344)
    at org.jboss.weld.util.reflection.SecureReflectionAccess.run(SecureReflectionAccess.java:52)
    at org.jboss.weld.util.reflection.SecureReflectionAccess.runAsInstantiation(SecureReflectionAccess.java:173)
    at org.jboss.weld.util.reflection.SecureReflections.newInstance(SecureReflections.java:341)
    at org.jboss.weld.injection.Exceptions.rethrowException(Exceptions.java:33)
    at org.jboss.weld.injection.Exceptions.rethrowException(Exceptions.java:73)
    at org.jboss.weld.injection.MethodInjectionPoint.invokeOnInstanceWithSpecialValue(MethodInjectionPoint.java:162)
    at org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:245)
    at org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:233)
    at org.jboss.weld.event.ObserverMethodImpl.notify(ObserverMethodImpl.java:213)
    at org.jboss.weld.manager.BeanManagerImpl.notifyObservers(BeanManagerImpl.java:590)
    at org.jboss.weld.manager.BeanManagerImpl.fireEvent(BeanManagerImpl.java:580)
    at org.jboss.weld.manager.BeanManagerImpl.fireEvent(BeanManagerImpl.java:575)
    at org.jboss.solder.servlet.exception.CatchExceptionFilter.doFilter(CatchExceptionFilter.java:74)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.jboss.solder.servlet.event.ServletEventBridgeFilter.doFilter(ServletEventBridgeFilter.java:74)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:183)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:125)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.access.channel.ChannelProcessingFilter.doFilter(ChannelProcessingFilter.java:144)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: javax.servlet.ServletException: For input string: "title"
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:606)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:145)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.jboss.solder.servlet.exception.CatchExceptionFilter.doFilter(CatchExceptionFilter.java:65)
    ... 62 more
Caused by: java.lang.NumberFormatException: For input string: "title"
    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
    at java.lang.Integer.parseInt(Integer.java:492)
    at java.lang.Integer.valueOf(Integer.java:582)
    at com.sun.el.lang.ELSupport.coerceToNumber(ELSupport.java:318)
    at com.sun.el.lang.ELSupport.coerceToNumber(ELSupport.java:294)
    at com.sun.el.lang.ELSupport.coerceToType(ELSupport.java:388)
    at com.sun.el.ExpressionFactoryImpl.coerceToType(ExpressionFactoryImpl.java:71)
    at javax.el.BeanELResolver.invokeMethod(BeanELResolver.java:773)
    at javax.el.BeanELResolver.invoke(BeanELResolver.java:528)
    at javax.el.CompositeELResolver.invoke(CompositeELResolver.java:257)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:134)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:183)
    at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:224)
    at org.jboss.weld.el.WeldValueExpression.getValue(WeldValueExpression.java:50)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
    at javax.faces.component.UIOutput.getValue(UIOutput.java:169)
    at com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer.getValue(HtmlBasicInputRenderer.java:205)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.getCurrentValue(HtmlBasicRenderer.java:355)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeEnd(HtmlBasicRenderer.java:164)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1764)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at com.ocpsoft.pretty.faces.application.PrettyViewHandler.renderView(PrettyViewHandler.java:163)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    ... 72 more
|#] 
```

使用 @Named 和 @ViewScoped（seam-faces）注释的 bean 注入一个服务 bean (@Inject)，它使用以下命令查询数据库：

```
CriteriaBuilder builder = getEm().getCriteriaBuilder()
CriteriaQuery<Tuple> query = builder.createTupleQuery();
Root<Message> message = query.from(Message.class);
Join<Message, Person> sender = message.join("sender");
query.multiselect(
    message.get("id").alias("id_message"),
    message.get("date").alias("date"),
    message.get("title").alias("title"),
    message.get("message").alias("message"),
    sender.get("id").alias("id_sender"),
    sender.get("name").alias("name_sender")
);
query.where(
    builder.and(
        builder.equal(message.get("id"), idMessage),
        builder.equal(sender.get("id"), idSender)
    )
);

return getEm().createQuery(query).getSingleResult(); 
```

上面的代码返回一个 Tuple 对象。它的 toString 返回：

```
org.hibernate.ejb.AbstractEntityManagerImpl$CriteriaQueryTransformer$TupleImpl@1c5acee9 
```

从 JSF 调用 tuple.getElements() 返回：

```
[org.hibernate.ejb.criteria.path.SingularAttributePath@430c3bdf, org.hibernate.ejb.criteria.path.SingularAttributePath@582ecfdc, org.hibernate.ejb.criteria.path.SingularAttributePath@6950a1be, org.hibernate.ejb.criteria.path.SingularAttributePath@2caaf6f6, org.hibernate.ejb.criteria.path.SingularAttributePath@c3ba763, org.hibernate.ejb.criteria.path.SingularAttributePath@206a5adb] 
```

我可以通过以下方式从元组中获取任何属性：tuple.get("attribute_name")。我还检查了所有别名，它们是正确的（使用 slf4j Logger debug()）。

这段代码有什么问题，为什么它会从 JSF 页面中生成 NumberFormatException？

我在 jdk 1.7.0_7 上使用 GlassFish 3.1.2.2、Hibernate 4.1.7、Seam Faces 3.1.0 和 PrimeFaces 3.4.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:40:47.307

`Tuple.get()`有多个重载，看起来[您无法指定应该在 JSF EL 中使用哪个重载](https://stackoverflow.com/questions/9763619/does-el-support-overloaded-methods)。

因此，您必须使用其他东西`Tuple`才能使其正常工作。例如，您可以将 a 包装`Tuple`到您自己的类中。

# html - 打开新窗口时保持原页面位置

> ID：12629556
> 
> 赞同：0
> 
> 时间：2012-09-27T20:30:09.000
> 
> 标签：html

我有我们办公室的热点地图。可以单击热点并弹出一个小窗口，但带有地图的较大页面会移回其原始位置。如何让较大的地图页面保持在浏览器中的相同位置？

```
<html>
<title>Office Map</title>

<div>
<img src="Office.jpg" width="2550" height="1650" usemap="#Map" class="mapper">
</div>

<map name="Map">
<!--MKTP51-->
<area shape="rect" title="MKTP51"   coords="1856,391,1874,420" alt="MKTP51" a href="#" onClick="window.open('PrinterPages/mktp51.html','mywindow','width=400,height=200,toolbar=no,location=no,directories=no,statu s=no,menubar=no,scrollbars=no,copyhistory=no,resizable=no')">
<!--MKTP40-->  
<area shape="rect" title="MKTP40"   coords="772,322,790,358"   alt="MKTP40" a href="#" onClick=    "window.open('PrinterPages/mktp40.html','mywindow','width=400,height=200,toolbar=no,location=no,directories=no,statu s=no,menubar=no,scrollbars=no,copyhistory=no,resizable=no')"> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:46:49.647

尝试放在属性`return false;`的末尾。`onclick`（注意，您需要`;`在当前语句的末尾添加一个）

那应该停止标准链接处理，并停止它进入页面的开头，因为`href="#"`

只是为了确认，`onclick`属性的结尾应该是......

```
... resizable=no'); return false;"> 
```

# java - 在 Tomcat 7 中是否需要将 context.xml 复制到 conf/Catalina/locahost 中才能生效

> ID：12629557
> 
> 赞同：9
> 
> 时间：2012-09-27T20:30:12.633
> 
> 标签：java, tomcat, tomcat7

刚刚从 Tomcat 6 迁移到 Tomcat 7，并注意到当您部署一个名为 widget 的 webapp 时，META-INF/context.xml 不再被复制到 conf/Catalina/localhost/widget.xml。

我不清楚是否需要，如果将 context.xml 中的设置留在 META-INF 中，是否会使用它们，或者它们仅在移动到 conf/Catalina/localhost/widget.xml 时才有效

我使用香草 tomcat 7 安装

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T20:36:04.080

请参阅[文档](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Defining_a_context)（我的重点）：

> 可以明确定义各个上下文元素：
> 
> *   在应用程序文件内部的单个文件中`/META-INF/context.xml`。可选地（**基于主机的`copyXML`属性**）这可以被复制并重`$CATALINA_BASE/conf/[enginename]/[hostname]/`命名为应用程序的基本文件名加上“.xml”扩展名。

[Host](http://tomcat.apache.org/tomcat-7.0-doc/config/host.html#Standard_Implementation)的文档有这样的说法`copyXML`：

> 如果您希望在部署应用程序时将嵌入在应用程序（位于`/META-INF/context.xml`）中的上下文 XML 描述符复制到 xmlBase，则设置为 true。**在随后的启动中，复制的上下文 XML 描述符将优先于嵌入在应用程序中的任何上下文 XML 描述符使用，即使嵌入在应用程序中的描述符是更新的。**该标志的值默认为 false。请注意，如果 deployXML 为 false，则此属性将无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-25T22:35:54.017

据我了解，除非元素 deployXML 设置为 ，否则使用 META-INF 中的 context.xml `false`。请注意[Tomcat 7 文档](http://tomcat.apache.org/tomcat-7.0-doc/config/host.html#Standard_Implementation "文档")`true`，除非启用了安全管理器，否则默认设置为！

但是，从文档中，我的印象是`copyXML`在 context.xml 本身中设置属性（不接触 server.xml）会导致文件被复制到 conf：

```
<Context antiJARLocking="true" path="/widget" copyXML="true" /> 
```

但是，使用 Tomcat 7，文件似乎不会被复制到 conf，除非按照 Frank 上面的回答将`copyXML`其设置为on。`true`

# java - 用户定义的验证耦合问题

> ID：12629558
> 
> 赞同：2
> 
> 时间：2012-09-27T20:30:17.773
> 
> 标签：java, validation, bean-validation

定义了客户端可以使用的 API。客户将通过多种方式连接。其中之一是java-to-java。在这种特定情况下，我遇到了问题。显然，API 应该尽可能地与实现分离。我还没有机会对此进行测试，但是用户定义的验证不会破坏这个模型吗？

我在 API 服务器端实现上通过 Spring @Validated 启用验证。不想将其放入 @Controller 类中，因为这不是进入服务 (API) 的唯一方法。

例如，如果我在接口中定义了这个方法：

```
SomeObject updateOperation( AnInputClass param) ... 
```

然后我可以使用 JSR-303 验证进行注释并且仍然可以解耦：@NonNull SomeObject updateOperation(@NonNull AnInputClass param) ...但是如果我想对输入“参数”的各个部分/部分进行自定义验证，我需要制作我自己的注释，**它有一个 @Constraint(validatedBy) 部分** 这部分将与验证实现相关联。它的缩写形式如下：

```
SomeObject updateOperation ( @CheckInput AnInputClass param)... 
...where the annotation is defined as
...
@Constraint(validatedBy = CheckInputValidator.class)   // this is the coupling issue
public @interface CheckInput { .... 
```

由于这一切都发生在服务器端，因此不需要让 Java 客户端拥有这个 CheckInputValidator 类；但是，我没有看到任何选择。首先，我*喜欢*在 API 中进行验证——它们告诉用户将要验证的内容。如果我可以打破依赖关系并将验证下移到看起来是可以接受的权衡的实现。然而，这会导致下面的异常，所以看起来我被卡住了。任何人都可以帮忙吗？

```
javax.validation.ConstraintDeclarationException: Only the root method of an 
overridden method in an inheritance hierarchy may be annotated with parameter 
constraints, but there are parameter constraints defined at all of the 
following overridden methods 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T21:33:46.623

我自己找到了答案，我应该早点意识到这一点！

我需要做的就是在接口/API 层中使用“@Valid”注解。然后，确保用户定义/自定义注释上的@Target 注释定义了“类型”，将@CheckInput 注释应用于所需的类，一切正常！

# java - 跨 Portlet 通信页面提交

> ID：12629562
> 
> 赞同：1
> 
> 时间：2012-09-27T20:30:30.403
> 
> 标签：java, portlet, liferay-6

我正在使用 java liferay 门户，其中有多个 portlet。我想创建一个带有表单的 portlet，当它被提交时，数据被检索，并且特定的结果显示在其他一些页面 portlet 中。但不幸的是，这些事情并没有阻碍。

我正在考虑使用会话，但出现了 2 个问题。

> 1.  将 javascript 值分配给 java 变量。
> 2.  如果将值传递到放置特定 portlet 的页面，则该 portlet 不会获得这些值。

然后我听到了 Inter Portlet Communication (IPC) 的概念，并从“liferay in action”中获得了一些帮助，但是如果两个 portlet 放在同一页面上，代码就可以工作，我的要求是首先放置一个 portlet页面，当提交表单时，它被重定向到第二个页面，第二个 portlet 以获取参数。我尝试了更多示例，但它不以我的方式工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:50:49.227

我找到了另一种方法，一种相对简单的方法，刚刚尝试了[liferay的那个 wiki](http://www.liferay.com/community/wiki/-/wiki/Main/URL+Parameters+in+Portlets)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T15:29:53.113

据我了解，您有一些 JavaScript 参数要传递到下一页。但是，您可以使用 PortletSession 的 APPLICATION_SCOPE 来执行此操作，并且可以通过将值放入输入中来解决将 JS 参数转换为 Java 的问题。如果这些输入变量不应该由用户编写并且您从其他地方获取它们，则可以隐藏输入：

在你的jsp中：

```
<form>
 <input type="hidden" id="myinput1" name="in1" value="">
 <input type="hidden" id="myinput1" name="in2" value="">
</form>

<script>
var a = "avalue";
var b = "bvalue";
document.getElementById("myinput1").value=a;
document.getElementById("myinput2").value=b;
</script> 
```

然后在需要时提交表格。接下来，您将能够在 portlet 的 ProcessAction 方法中这样做：

```
String a= request.getParameter("in1");
String b= request.getParameter("in2");

PortletSession session = request.getPortletSession();
session.setAttribute("a", a , PortletSession.APPLICATION_SCOPE);
session.setAttribute("b", b , PortletSession.APPLICATION_SCOPE); 
```

在另一个 portlet 中，您可以通过调用

```
session.getAttribute("a",PortletSession.APPLICATION_SCOPE); 
```

当然，如果您不能简单地将它们放在下一页的 url 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T09:13:43.530

据我所知，IPC 确实只在同一页面上的 portlet 之间起作用。此外，portlet 规范没有提供用于切换页面的通用机制，因此您只能使用门户供应商特定的方式来实现这一点。但是使用公共渲染参数和正确构造的 Liferay URL 到另一个页面，您应该能够获得您想要的结果：[http ://www.liferay.com/web/guest/community/forums/-/message_boards/message/1207858](http://www.liferay.com/web/guest/community/forums/-/message_boards/message/1207858)

# sql-server - 在客户端或服务器上处理自动完成/建议更好吗？

> ID：12629566
> 
> 赞同：2
> 
> 时间：2012-09-27T20:30:36.143
> 
> 标签：sql-server, json, autocomplete, wildcard

我正在构建一个 Web 应用程序，该应用程序将在最终用户输入信息时使用自动完成/建议。这将专门用于输入国家、省、市信息。

*在每次击键时对数据库进行通配符搜索：*

```
SELECT CityName 
FROM City
WHERE CityName LIKE '%@CityName%' 
```

*将给定省份的所有城市列表返回给客户端，并让客户端进行匹配：*

```
SELECT CityName 
FROM City
WHERE ProvinceID = @ProvinceID 
```

这些将通过对 Web 服务的 ajax 调用作为 JSON 字符串返回给客户端。我的想法是，javascript 能够通过 JSON 处理 100 多个条目的列表，速度比数据库能够进行通配符搜索要快，但我想要社区输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T20:40:07.180

在过去，我使用了这两种技术。如果您谈论的是 100 个左右的条目，并且假设每个条目非常小，那么在客户端执行自动完成过滤器可能会更快。这将为您提供更好的响应时间（尽管可能可以忽略不计）并减少服务器上的负载。

谷歌实际上是在用户打字的时候进行实时搜索，从用户的角度来看，它似乎反应灵敏。这是一个查询必须在服务器端执行的示例，因为数据集太大而无法传输到客户端。

您可能会做的一件事是等到用户键入两次击键后再从服务器获取列表，从而最初缩小结果范围。当然，这会增加复杂性——如果用户更改了前两次击键中的任何一个，您就需要刷新列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T21:43:45.677

我们已经使用 ajax 自动完成控件实现了相同的功能我们在从服务器获取列表之前等待用户键入三个键我们没有在客户端进行任何编码我们只是分配了 Web 服务方法，该方法将列表返回给 ajax 控件并开始工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T20:44:32.907

为了最终用户的利益，最好处理这个客户端。

Telerik Autocomplete 控制器允许两种方式。

当然在负载下客户端自动完成很可能使应用程序爬行。

# javascript - Javascript检查CSS类是否在没有Jquery的页面上

> ID：12629567
> 
> 赞同：0
> 
> 时间：2012-09-27T20:30:41.227
> 
> 标签：javascript, css

我正在寻找一种跨浏览器兼容且轻量级的方法来检查页面上是否存在 CSS 类的任何实例。

例如，如果我想检查“myclass”，或者在页面上的任何位置，那么它将返回 true，否则返回 false。

我试过这样的功能，但它不起作用：

```
function getElementsByClassName( clsName ) 
{ 
    var arr = new Array(); 
    var elems = document.getElementsByTagName("*");
    for ( var cls, i = 0; ( elem = elems[i] ); i++ )
    {
        if ( elem.className == clsName )
        {
            arr[arr.length] = elem;
        }
    }
    return arr;
} 
if ( getElementsByClassName('myclass').length >= 1) { 
    // yes, it's on the page
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T20:36:32.770

您可以像 jQuery 选择器一样使用[querySelector 方法](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T20:37:27.750

你可以尝试这样的事情：http: [//jsfiddle.net/sK2zd/](http://jsfiddle.net/sK2zd/)

我只是稍微更改了您的代码，但它正在做您期望的事情。

```
function getElementsByClassName(clsName) {
    var arr = [];
    var elems = document.getElementsByTagName("*");
    for (var i = 0; i < elems.length; i++) {
        if (elems[i].className == clsName) {
            arr.push(elems[i]);
        }
    }
    return arr;
}

window.onload = function () {
    var all_classes = getElementsByClassName('testing');
    if (all_classes.length > 0) {
        // yes, it's on the page
        alert("Found " + all_classes.length + " element(s) with class 'testing'");
    } else {
        alert("Found none");
    }
}; 
```

更新：

回顾这个答案，我意识到我从未建议过`elems[i].className == clsName`可能不正确，因为该`className`属性可能是由空格字符分隔的几个类。所以需要一种更好的方法来查看它是否有一个类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T20:36:11.820

在 HTML5 中，您可以将[document.querySelectorAll()](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)与[CSS3 选择器](http://www.w3.org/TR/selectors-api/)一起使用。

```
if (document.querySelectorAll('.the_class_name').length > 0) {
  doIt();
} 
```

# java - 无法访问名称中包含 unicode 字符的 keytool 别名

> ID：12629569
> 
> 赞同：0
> 
> 时间：2012-09-27T18:59:48.983
> 
> 标签：java, unicode, keytool

我想为 Google Maps API 获取一个带有 keytool 的 md5，但我遇到了一个错误。当我尝试运行时：

```
C:\Program Files\Java\jre7\bin>keytool -list -alias arabamı bulalım -keystore "c:\key.keystore" 
```

keytool 返回错误说明：

```
Illegal error: bulal2m 
```

我认为该错误是由我的别名中的 Unicode[无点 I](http://en.wikipedia.org/wiki/Dotted_and_dotless_I)`arabamı bulalım` （“ı”）字符引起的， . 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:37:32.880

`cmd.exe`您似乎用来调用`keytool`的不使用`utf-8`. 您正在输入另一种（特定于语言环境的）编码的字符。`chcp`您可以通过从命令行运行来检查它。

解决方案是：

*   运行 cygwin/bash（使用`utf-8`）
*   尝试编写一些 Java 代码（并将别名硬编码到`utf-8`编码`.java`文件中）
*   尝试将 cmd.exe 代码页更改为`utf-8`with `chcp 65001`（但它很少起作用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T15:24:09.357

好的 md5 我使用 jre6 并解决了:) C:\Program Files (x86)\Java\jre6\bin>keytool -list -alias "arabamı bulalım" -keystore "c:\key.keystore" 谢谢大家朋友

# java - Mahout：在一个 Recommender 中使用两个 DataModel

> ID：12629571
> 
> 赞同：0
> 
> 时间：2012-09-27T20:30:55.390
> 
> 标签：java, machine-learning, mahout

我正在尝试使用两组布尔偏好数据创建一个简单的推荐引擎。我想使用一个数据集来计算 UserSimilarity 和 UserNeighborhoods，然后使用这些邻域从第二组布尔偏好数据中提出建议。

我似乎有这个工作，但问题是当我去计算推荐时，如果用户有基于第一个数据集的邻居，但不存在于第二个数据集中（尽管他们的邻居是）它不会产生任何推荐.

这是 RecommendationBuilder 代码：

```
 recommenderBuilder = new RecommenderBuilder() {
      public Recommender buildRecommender(DataModel recommendationModel) throws TasteException {
          UserSimilarity similarity = new LogLikelihoodSimilarity(trainingModel);
          UserNeighborhood neighborhood = new NearestNUserNeighborhood(10, 0.7, similarity, recommendationModel);

          return new GenericBooleanPrefUserBasedRecommender(recommendationModel, neighborhood, similarity);
      }
  }; 
```

这是 trainingModel 文件的示例

```
1,111
2,222

2,111
2,222

3,111
3,222 
```

和推荐模型文件

```
1,91
1,92

2,91 
```

`NoSuchUserException`运行此建议为用户 2 提供 92，但当它到达用户 3 时会抛出一个。

Sol... 有没有办法根据在另一个数据集上计算的相似性从一个数据集生成推荐，而无需让所有用户都出现在第二个数据集中？

这是我现在正在使用的完整代码：

```
private DataModel trainingModel;
private DataModel recommendationModel;
private RecommenderEvaluator evaluator;
private RecommenderIRStatsEvaluator evaluator2;
private RecommenderBuilder recommenderBuilder;
private DataModelBuilder modelBuilder;

@Override
public void afterPropertiesSet() throws IOException, TasteException {

    trainingModel = new GenericBooleanPrefDataModel(
        GenericBooleanPrefDataModel.toDataMap(new FileDataModel(new File("/music.csv")))
    );

    recommendationModel = new GenericBooleanPrefDataModel(
            GenericBooleanPrefDataModel.toDataMap(new FileDataModel(new File("/movies.csv")))
    );

    evaluator = new AverageAbsoluteDifferenceRecommenderEvaluator();
    evaluator2 = new GenericRecommenderIRStatsEvaluator();

    recommenderBuilder = new RecommenderBuilder() {
        public Recommender buildRecommender(DataModel model) throws TasteException {
            UserSimilarity similarity = new LogLikelihoodSimilarity(trainingModel);
            UserNeighborhood neighborhood = new NearestNUserNeighborhood(10, 0.7, similarity, model);

            return new GenericBooleanPrefUserBasedRecommender(model, neighborhood, similarity);
        }
    };

    modelBuilder = new DataModelBuilder() {
        public DataModel buildDataModel( FastByIDMap<PreferenceArray> trainingData ) {
            return new GenericBooleanPrefDataModel( GenericBooleanPrefDataModel.toDataMap(trainingData) );
        }        
    };

} 
```

然后运行这个方法

```
 @Override
    public void testData() throws TasteException {

        double score = evaluator.evaluate(recommenderBuilder, modelBuilder, trainingModel, 0.9, 1.0);
        System.out.println("calculated score: " + score);

        try {
            IRStatistics stats = evaluator2.evaluate(
                    recommenderBuilder, modelBuilder, trainingModel, null, 2,
                    0.0,
                    1.0
            );
            System.out.println("recall: " + stats.getRecall());
            System.out.println("precision: " + stats.getPrecision());
        } catch (Throwable t) {
            System.out.println("throwing " + t);
        }

        List<RecommendedItem> recommendations = recommenderBuilder.buildRecommender(recommendationModel).recommend(1,2);
        System.out.println("user 1");
        for (RecommendedItem recommendation : recommendations) { System.out.println(recommendation);}

        recommendations = recommenderBuilder.buildRecommender(recommendationModel).recommend(2,2);
        System.out.println("user 2");
        for (RecommendedItem recommendation : recommendations) { System.out.println(recommendation);}

        try {
            recommendations = recommenderBuilder.buildRecommender(recommendationModel).recommend(3,2);
            System.out.println("user 3");
            for (RecommendedItem recommendation : recommendations) { System.out.println(recommendation);}
        } catch (Throwable t) {
            System.out.println("throwing " + t);
        }
} 
```

产生这个输出：

> 计算得分：0.7033357620239258 召回率：1.0 精度：1.0 用户 1 用户 2 推荐项目 [项目：9222，值：0.8516679] 抛出 org.apache.mahout.cf.taste.common.NoSuchUserException：3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:38:35.250

你可以做你描述的事情，以及你描述它的大致方式。支持用户相似度度量的数据集确实可能不同于进行推荐的数据集。用户相似度指标实际上可以基于您喜欢的任何内容。

然而，它确实需要能够为用于提出建议的数据集中的任何对生成用户-用户相似性。我建议您在`UserSimilarity`实现中简单地对此进行特殊处理，以在某个用户未知时返回 0 或其他内容。

# testing - 有没有办法从 SE37 导出测试参数？

> ID：12629573
> 
> 赞同：2
> 
> 时间：2012-09-27T20:30:56.313
> 
> 标签：testing, abap, function-module

有没有办法导出事务中可用的测试工具的测试变体，`SE37`然后将这些变体导入另一个系统？我无法在标准中找到任何内容。也许有一个自定义程序可以让我这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T21:31:04.423

也许桌子`EUFUNC`可以帮助你。

SE37中保存的测试数据见表[（测试数据目录）](http://scn.sap.com/thread/1315227) 还有一些代码示例。也许您可以使用它来构建自己的导出/导入功能。

# javascript - 如何使用javascript向用户输入字段添加文件扩展名

> ID：12629578
> 
> 赞同：0
> 
> 时间：2012-09-27T20:31:22.883
> 
> 标签：javascript, html

我正在尝试使用 ajax 请求从服务器检索 txt 文档。txt 文档的名称取决于 html 文档上的文本输入。基本上我想在 onclick 事件之后将 .txt 附加到输入字段的末尾

```
// JavaScript Document
function getData(){
    var xmlhttp;
    var user=document.getElementById("nameDetails").value;
    var userText = user + ".txt"; //**not the solution
       if (window.XMLHttpRequest)
       {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
       }
       else
       {// code for IE6, IE5
       xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
       }
       xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
      {
      document.getElementById("userSubmit").innerHTML=xmlhttp.responseText;
      }
    }
    xmlhttp.open("GET","userText",true);
    xmlhttp.send();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:33:20.603

如果你想附加`.txt`到输入字段本身，你可以试试这个：

```
document.getElementById("nameDetails").value = document.getElementById("nameDetails").value + ".txt"; 
```

或缩写形式：

```
document.getElementById("nameDetails").value += ".txt"; 
```

# c# - 带有状态/错误代码结果的活动目录身份验证

> ID：12629581
> 
> 赞同：4
> 
> 时间：2012-09-27T20:31:28.603
> 
> 标签：c#, .net, authentication, active-directory, asp.net-mvc-4

目前我们（我自己和我的公司）有一个 asp.net mvc4 页面。我们希望使用通过 AD 进行身份验证的登录页面。一个要求是在尝试不成功的情况下，我们将一些信息返回给用户。

我们希望获得的信息类似于：

1.  无效的用户/密码
2.  帐户被锁定
3.  密码已过期

这是一个陌生的领域，所以我不确定有哪些 .NET 库可用。到目前为止，我只遇到了[System.DirectoryServices](http://msdn.microsoft.com/en-us/library/9t2667d1.aspx)，但似乎我不会得到超出布尔值的结果。

这可能吗？任何参考、建议或示例将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T15:41:49.560

您可以使用[PrincipalContext.ValidateCredentials](http://msdn.microsoft.com/en-us/library/bb154889.aspx)首先验证您的凭据。如果`false`返回，请使用静态[UserPrincipal.FindByIdentity查找您的用户，如果找到，请查看该帐户是否使用](http://msdn.microsoft.com/en-us/library/bb359690.aspx)[IsAccountLockedOut()](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.authenticableprincipal.isaccountlockedout.aspx)锁定。

您可能需要自己扩展 UserPrincipal 以查看密码是否已过期，我没有看到直接的属性/方法。您可以扩展它以直接访问`userAccountControl`属性并检查是否`0x800000`设置了位，即 PasswordExpired。这是[有关 userAccountControl 值的更多信息](http://support.microsoft.com/kb/305144)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:41:42.633

假设你有这样的代码

```
try
{  
  SearchResult result = searcher.FindOne();
}
catch(Exception e)
{
// now what?
} 
```

现在在 Exception 中您可以处理 LDAP 异常类型，这里是所有 LDAP 错误的列表。

[http://msdn.microsoft.com/en-us/library/aa746530(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/aa746530(v=vs.85).aspx)

您可以根据**ADSI 错误值**识别您遇到的错误类型。

但根据我的说法，你应该给用户一个常见的错误，比如无效的凭据，因为 LDAP 错误很难处理。

干杯。！！

# ruby - Ruby 变量范围

> ID：12629582
> 
> 赞同：2
> 
> 时间：2012-09-27T20:31:45.173
> 
> 标签：ruby

```
# encoding: utf-8
class Person
  attr_reader :short_name
  def initialize(short_name)
    @short_name = short_name
  end

  def greeting_line
    short_name = short_name.downcase
    "Hello #{short_name}"
  end
end

person = Person.new("MS. LEE")

puts person.short_name  => "MS. LEE"
puts person.greeting_line => NoMethodError: undefined method `downcase' for nil:NilClass 
```

异常发生在“short_name = short_name.downcase”，因为 (short_name = short_name) 使 short_name 变为 nil。

为什么右侧的“short_name”没有从实例方法“short_name”获取值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T21:54:01.320

当你说

```
var = value 
```

它**总是**指局部变量`var`，即使你有方法`var`并`var=`定义了。（在你的情况下，你有`short_name`定义的方法`attr_reader`，但你没有`short_name=`定义。）

你有几种方法可以解决这个问题。您可以直接使用实例变量：

```
@var = value 
```

或者您可以将该`var=`方法与显式`self`接收器一起使用：

```
self.var = value 
```

仅当您`var=`明确定义了方法或使用`attr_accessor`or定义了方法时，第二种形式才有效`attr_writer`。

现在，当你做类似的事情时

```
foo = foo 
```

这**总是**`foo`在左侧引入一个局部变量。当 ruby`foo`​​ 在 的右侧看到时`=`，它解析为*局部变量* `foo`，因为`foo`现在在范围内。所以这总是设置`foo`回它的默认值，`nil`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T21:53:39.743

在您的情况下，`greeting_line`范围 short_name 指向局部变量而不是实例方法`short_name`，为了使这个示例正常工作，您应该使用`self.short_name`（这将告诉 ruby​​ 使用实例方法）

```
def greeting_line
 short_name = self.short_name.downcase
 "Hello #{short_name}"
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T20:40:18.213

您只是在引用 short_name 时忘记了 @

```
@short_name 
```

是一个实例变量

```
short_name 
```

是绑定到 greeting_line 函数范围的局部变量

试试这个：

```
def greeting_line
  short_name = @short_name.downcase
  "Hello #{short_name}"
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T20:41:19.547

你应该使用：

```
 attr_accessor :short_name 
```

而不是 attr_reader。

attr_reader 在您的类中生成以下方法：

```
def short_name
  @short_name
end 
```

attr_accessor 也将产生方法：

```
def short_name=(val)
  @short_name = val
end 
```

这将允许您自由设置 short_name，因为它是一个局部变量。

这是一篇[很好的博](http://www.rubyist.net/~slagell/ruby/accessors.html)文，演示了 ruby​​ 中的 attr_reader、attr_writer 和 attr_accessor 语句。

# jquery - 使用 Jquery 调用 HTTP Webservice 并返回 XML

> ID：12629583
> 
> 赞同：0
> 
> 时间：2012-09-27T20:31:53.687
> 
> 标签：jquery, asmx

我有一个我想用 jQuery 调用的网络服务。它应该返回一堆 XML 数据，但我似乎无法让它工作。

这是带有参数的 ws：

> [http://campaign.vialunatechnology.com/service/CampaignService.asmx/GetTargetDetails?urlName=richsangillo&campaignGuid=5475D3AB-313D-47C0-842D-D916B43658D1](http://campaign.vialunatechnology.com/service/CampaignService.asmx/GetTargetDetails?urlName=richsangillo&campaignGuid=5475D3AB-313D-47C0-842D-D916B43658D1)

这是我正在使用的 jQuery 代码。

```
var UrlName = "richsangillo";
var GUID = "5475D3AB-313D-47C0-842D-D916B43658D1";
var TID = "7006806";
var PageID = "53619";
var SID = "cd4p4y55q1i4vayzdw1fxsa0";

var arr= new Array();
var loopCounter = 0;

$.ajax({type: "GET",url:"http://campaign.vialunatechnology.com/service/CampaignService.asmx/GetTargetDetails?urlName=" + UrlName + "&campaignGuid=" + GUID,dataType: "xml",success: function(xml) {
                $(xml).find('xmlNode').each(
                function() 
                {
                    arr[loopCounter] = $(this).find('xmlNode').text();
                    loopCounter += 1;
                });
            }}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:37:49.643

当我在 JSFiddle 中运行它时，我收到以下错误：

> XMLHttpRequest 无法加载 [http://campaign.vialunatechnology.com/service/CampaignService.asmx/GetTargetDetails?urlName=richsangillo&campaignGuid=5475D3AB-313D-47C0-842D-D916B43658D1](http://campaign.vialunatechnology.com/service/CampaignService.asmx/GetTargetDetails?urlName=richsangillo&campaignGuid=5475D3AB-313D-47C0-842D-D916B43658D1)。Access-Control-Allow-Origin 不允许来源[http://fiddle.jshell.net 。](http://fiddle.jshell.net)

如果要启用跨源请求，请按照此页面上的说明进行操作：

[http://enable-cors.org/](http://enable-cors.org/)

# android - 默认情况下，如何选择由 Loader 填充的 ListView 的第一项？

> ID：12629584
> 
> 赞同：0
> 
> 时间：2012-09-27T20:31:59.600
> 
> 标签：android, android-listview

我有一个包含图像的 ListView，这些图像来自服务器，加载程序下载图像然后在`onLoadFinished`ListView`setAdapter`中。设置适配器后，我尝试选择 ListView 的第一项，但它没有效果。我怀疑 ListView 还没有准备好选择，所以我设法通过一种奇怪的方式来做到这一点，比如覆盖 setSelection 函数：

```
public void setSelection(final int position) {
    // TODO Auto-generated method stub

    mHandler.postDelayed(new Runnable() {
        @Override
        public void run() {
            Log.i(TAG, "thread runned.");
            boolean is_view_created = false;

            while (!is_view_created) {
                try {
                    Thread.sleep(100);
                    getListView();
                    if (getListView().getChildAt(position) != null)
                        is_view_created = true;
                    else {
                        Log.i(TAG, "Waiting for the list view to initialize.");
                    }
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IllegalStateException e) {
                    Log.i(TAG, "Waiting for the list view to initialize.");
                }
            }
            MiddleMenuListFragment.super.setSelection(position);
            View initial_selection_view = getListView().getChildAt(position);
            initial_selection_view.performClick();
            ((MiddleMenuListAdapter)getListAdapter()).light_me_up = position;
            getActivity().runOnUiThread(new Runnable(){
                @Override
                public void run() {
                    ((MiddleMenuListAdapter)getListAdapter()).notifyDataSetChanged();   
                }
            });

        }
    }, 400);
} 
```

但是这种方法并不是很安全。它有时会进入循环（无法`getListView().getChildAt(position != null)`实现）。你能建议更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T21:24:45.053

如果 ListAdapter 中有 1 个或多个项目，您难道不能只针对 ListAdapter[注册](https://developer.android.com/reference/android/widget/Adapter.html#registerDataSetObserver%28android.database.DataSetObserver%29)一个[DataSetObserver](https://developer.android.com/reference/android/database/DataSetObserver.html)来设置[onChange()事件的选择吗？](https://developer.android.com/reference/android/database/DataSetObserver.html#onChanged%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:11:42.380

如果你不使用标题，你可以听`ListView`层次结构变化`OnHierarchyChangeListener`

```
private boolean needSelection = true;

public void onChildViewAdded(View parent, View child) {
  if (needSelection && indexOfChild(child) == 0) {
    trySelectChild(child);
    needSelection = false;
  }
} 
```

# slickgrid - 为 Slick Grid 加载更多按钮

> ID：12629585
> 
> 赞同：0
> 
> 时间：2012-09-27T20:32:15.923
> 
> 标签：slickgrid

我需要在光滑的网格上创建一个添加更多按钮，但没有看到这个示例。所以我的用户可以选择“加载更多”，然后渲染更多行。

Slick Grid 中的最佳实践是什么？有没有我遗漏的例子？

谢谢！顺便说一句，伟大的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T22:12:34.137

做一些类似于 DataView 所做的事情。

编写您自己的数据提供程序，将“加载更多”作为一行呈现给网格，并使用网格 onClick 处理程序来触发加载更多数据。

# c# - 下载太快并锁定服务器 - 依靠 WebClient.DownloadFileCompleted 告诉我们 DownloadFileAsync 何时完成

> ID：12629586
> 
> 赞同：1
> 
> 时间：2012-09-27T20:32:21.203
> 
> 标签：c#, webclient, archive, downloadfileasync

**背景：**

每年我们都会运行并归档来自特定 ASP.Net 应用程序的所有报告。该档案提供了系统数据在一年中特定时间的“快照”。我们使用 .Net Forms 构建了一个 GUI，它使用 System.Net.WebClient 调用报表服务器并将报表下载到特定目录。这在过去运作良好。

今年我们将 Excel 文件包含在我们的档案中。Excel 文件由 .aspx 页面（Windows Sever 2003、IIS6、.Net 4.0）创建，该页面接受查询字符串，然后返回 Excel 文件。这适用于 100 个左右的 Excel 文件，但之后我们开始遇到问题。我们每年归档大约 300,000 个文件。

**力学：**

我们使用 WebClient.DownloadFileAsync 来拉取我们的文件，以免锁定 UI 线程。我们依靠 WebClient.DownloadFileCompleted 事件来告诉我们每个文件何时完成下载。当提出 DownloadFileCompleted 时，我们开始下载下一个文件。

**问题：**

我们正在锁定网络服务器。每个文件只需要几分之一秒的时间来下载，大约 167 个文件后，网络服务器锁定（页面超时），存档过程暂停几分钟。然后存档过程又下载了大约 100 个文件，并再次停止了几分钟。这会持续几个小时，直到归档过程开始每分钟左右抓取一个文件。

看来 IIS6 的线程已用完，但我们如何才能阻止这种情况发生呢？

以下是我们正在运行的代码的精简版本。我已经删除了与我们的问题无关的日志记录和其他项目。有没有人有任何提示？

```
public class DownloadExample
{
    private WebClient _WebClient = new WebClient();

    public string DownloadDirectory { get; set; }
    public List<Report> ReportList { get; set; }

    /// <summary>
    /// Constructor - sets all the attributes needed to access the report server, download, and archive the reports
    /// </summary>
    /// <param name="userName">Username</param>
    /// <param name="userPassword">Password for the user's domain username</param>
    /// <param name="userDomain">Domain of the username</param>
    /// <param name="downloadDirectory">Network path where the files will be archived</param>
    public DownloadExample(string userName, string userPassword, string userDomain, string downloadDirectory, List<Report> reportList)
    {
        DownloadDirectory = downloadDirectory;
        _WebClient.Credentials = new NetworkCredential(userName, userPassword, userDomain);
        _WebClient.DownloadFileCompleted += new System.ComponentModel.AsyncCompletedEventHandler(WebClient_DownloadFileCompleted);
        ReportList = reportList;
    }

    /// <summary>
    /// Kicks off the archive process
    /// </summary>
    public void StartDownloading()
    {
        if (ReportList.Count > 0)
        {
            Report rpt = ReportList[0];
            DoDownload(rpt.URL, CreateFileName(rpt), rpt.ReportTitle, rpt.ReportFormatType);
        }
    }

    /// <summary>
    /// Run the report and then download it to the archive directory
    /// </summary>
    /// <param name="url">URL of the Report</param>
    /// <param name="fileName">File name used to name the report file once it is downloaded</param>
    /// <param name="folderName">Name of the folder where the report will be downloaded to</param> 
    /// <param name="reportFormatType">Type of report being run, PDF or Excel</param>
    private bool DoDownload(string url, string fileName, string folderName, ReportFormatTypes reportFormatType)
    {
        bool isSuccess = false;

        string folderPath = DownloadDirectory + "\\" + folderName;
        DirectoryInfo dir = new DirectoryInfo(folderPath);
        if (!dir.Exists)
        {
            dir.Create();
            dir = null;
            dir = new DirectoryInfo(folderPath);
        }

        if (dir.Exists)
        {
            string path = folderPath + "\\" + fileName + ".xls";
            System.Uri uri = new Uri(url);
            try
            {
                _WebClient.DownloadFileAsync(uri, path);
            }
            catch (Exception exp)
            {
                //log error
            }
            FileInfo file = new FileInfo(path);
            isSuccess = file.Exists;
        }
        return isSuccess;
    }

    /// <summary>
    /// This event is fired after a file is downloaded
    /// After each file is downloaded, we remove the downloaded file from the list, 
    /// then download the next file.
    /// </summary>
    void WebClient_DownloadFileCompleted(object sender, System.ComponentModel.AsyncCompletedEventArgs e)
    {
        //Remove the report that was just run
        ReportList.RemoveAt(0);
        if (ReportList.Count > 0)
        {
            //Download the next report
            Report rpt = ReportList[0];
            DoDownload(rpt.URL, CreateFileName(rpt), rpt.ReportTitle, rpt.ReportFormatType);
        }
    }

    /// <summary>
    /// Does a bunch of stuff to create the file name...
    /// </summary>
    string CreateFileName(Report rpt)
    {
        return rpt.FileName;
    }
} 
```

# javascript - 绑定jQuery更改函数到提交函数

> ID：12629587
> 
> 赞同：1
> 
> 时间：2012-09-27T20:32:21.267
> 
> 标签：javascript, jquery, event-handling, jquery-validate, jquery-forms-plugin

更改输入后，我无法触发表单提交。我想我需要事件处理，但我从来没有真正了解过那是什么。

这是我的 HTML：

```
<form action="/upload">
  <input type="file" name="file">
</form> 
```

这是我的 JS：

```
$('input').change(function(e){
var closestForm=$(this).closest("form");
    closestForm.submit(function(e) {   
  closestForm.ajaxSubmit({   
              success: function(data){
                    console.log('form submitted successfully');
              }
      }); //ajaxSubmit
    return false;
  }); //submit 
}); //change 
```

请注意，我想使用 AJAX 进行提交，但这不是问题，因为我的代码库的其他部分可以使用[jQuery Form 插件](http://www.malsup.com/jquery/form/#ajaxSubmit) `ajaxSubmit()`没问题。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:36:33.253

由于您希望在输入更改时提交表单。您不需要在表单上提交事件

```
 $('input').change(function(e){
    var closestForm=$(this).closest("form"); 
      closestForm.ajaxSubmit({   
                  success: function(data){
                        console.log('form submitted successfully');
                  }
          }); //ajaxSubmit
        return false; 
    }); //change 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:40:08.453

您可以尝试“锁定”表单提交，直到填写该字段，如下所示：

```
var form_locked = true;

$("input").change(function(e){
    if($(this).val() == "") {
        form_locked = true;
    }else{
        form_locked = false;
    }
});

$("form").submit(function(e) {

    // prevent default form submit
    e.preventDefault();

    if(form_locked) {
        alert("Please fill in the field!");
    }else{
        // Do your form submission stuff here
    }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T20:50:55.983

在收到导致以下 SO Q&A 的错误消息后，我解决了自己的问题。[jQuery 表单插件 - 文件上传时未捕获的类型错误](https://stackoverflow.com/questions/6774231/jquery-form-plugin-uncaught-typeerror-on-file-upload)。

我的错误消息与此类似：

```
jquery.form.js:357 Uncaught TypeError: 
Object function (a,b){return new d.fn.init(a,b,g)} has no method 'handleError' 
```

基本上，只要我下载了最新的 jQuery Form 插件 js 文件，我就能够消除该`submit()`功能并`ajaxSubmit()`按照@Shusl 的建议使用。

特别感谢@Shusl 让我走上正轨。

# android - Android - 拍照和裁剪

> ID：12629591
> 
> 赞同：0
> 
> 时间：2012-09-27T20:32:31.367
> 
> 标签：android, sdk, camera, photo, image

我正在尝试遵循本教程：http: [//mobile.tutsplus.com/tutorials/android/capture-and-crop-an-image-with-the-device-camera/](http://mobile.tutsplus.com/tutorials/android/capture-and-crop-an-image-with-the-device-camera/)

但是，拍照后，当图片要被裁剪时，会出现“正在加载图像......”永远。

我试过敬酒“picUri = data.getData();” 它返回空值。我读过在某些设备中我们需要为要拍摄的照片指定文件名，所以我尝试了，但没有好的结果。

```
Intent captureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                captureIntent.putExtra(MediaStore.EXTRA_OUTPUT, "file:///tmp/android.jpg");
                startActivityForResult(captureIntent, CAMERA_CAPTURE); 
```

我正在 Galaxy Nexus 和 Galaxy 5 上测试它。

有人知道吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:44:25.373

我认为您提供给 EXTRA_OUTPUT 的文件路径是错误的。而是尝试使用这样的东西：

```
Intent captureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
String storagePath = Environment.getExternalStorageDirectory().getAbsolutePath() + "/tmp/android.jpg";
captureIntent.putExtra(MediaStore.EXTRA_OUTPUT, storagePath);
startActivityForResult(captureIntent, CAMERA_CAPTURE); 
```

# powershell - 如何使用 PowerShell 远程检查 Web 应用程序池的状态？

> ID：12629593
> 
> 赞同：16
> 
> 时间：2012-09-27T20:32:37.030
> 
> 标签：powershell, iis-7, application-pool

我在运行 IIS7 的 Web 服务器上看到很多用于回收应用程序池的脚本，但是有没有办法使用 PowerShell 检查 Web 应用程序池是运行还是停止？我似乎无法找到远程让 Get-WebAppPoolState 返回应用程序池状态的方法，而我的 Google-fu 也无法找到替代品。我可以远程让 gwmi 工作并回收或启动我的应用程序池，但理想情况下，我只想在应用程序池实际停止时运行它。

我是否需要使用 PSExec 解决这个问题，或者是否可以使用类似于 gwmi 的替代方法并使用一行命令来调用 IIS7 服务器上的应用程序池并提供状态？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-27T22:30:55.820

您可以使用 Invoke-Command 在远程计算机上调用 Get-WebAppPoolState cmdlet。

```
$appPoolStatus = Invoke-Command -ComputerName RemoteHostName {Import-Module WebAdministration; Get-WebAppPoolState DefaultAppPool}
$appPoolStatus.Value 
```

请注意，如果您要使用在调用机器上本地定义的变量，则必须根据规则处理它们。这个链接是一个很好的解释它们的帖子：

[http://blogs.msdn.com/b/powershell/archive/2009/12/29/arguments-for-remote-commands.aspx](http://blogs.msdn.com/b/powershell/archive/2009/12/29/arguments-for-remote-commands.aspx)

例子：

```
$appPoolName = "SomeAppPoolName"
$appPoolStatus = Invoke-Command -ComputerName RemoteHostName { param($apn) Import-Module WebAdministration; Get-WebAppPoolState $apn} -Args $appPoolName 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-25T13:19:52.267

如果你想要漂亮，你可以使用它：

```
Invoke-Command -ComputerName RemoteHostName -ScriptBlock { Get-WebAppPoolState | % {  return  @{($_.itemxpath -split ("'"))[1]="$($_.value)" } }} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-21T22:28:13.150

对于旧版本的 IIS（版本 8 之前）：

```
$items = get-wmiobject -namespace 'root\MicrosoftIISv2' -computername $server -class 'IIsApplicationPoolSetting' 
```

# java - 暂停和序列化正在运行的线程

> ID：12629597
> 
> 赞同：2
> 
> 时间：2012-09-27T20:32:48.483
> 
> 标签：java, c++, multithreading, pthreads

有人知道一种可以捕获正在运行的线程的状态并将其序列化以进一步恢复的机制吗？
JVM有什么可用的吗？
pthreads怎么样？
我的主要目标是能够将正在运行的线程迁移到远程机器。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T20:35:42.257

在该线程的配合下，您可以通过线程支持的任何机制来完成。没有那个线程的配合，是不可能的。如果该线程持有您的序列化代码所需的锁，会发生什么？

如果您迁移当前正在使用某些内核资源（例如管道）的正在运行的线程，会发生什么情况。您会迁移该资源吗？

您的问题的正确解决方案可能是让线程支持迁移机制。你如何做到这一点取决于该线程正在做什么。如果您准确地解释是什么，您将获得更有可能帮助您解决实际问题的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T20:50:45.597

这个问题的答案实际上取决于什么构成了正在运行的线程的状态。

如果状态是允许复制和保存线程状态然后插入回新线程的本地线程数据，那么该机制基本上只是用某种可序列化对象保存状态，然后用于创建具有已保存状态的新线程，然后开始运行。

但是，如果线程状态依赖于外部对象或实体，则问题会更加棘手。例如，如果您有一个使用 TCP 充当服务器的线程，并且您想保存其状态然后稍后重新启动它，则套接字将更改，并且正在访问服务器线程的客户端将知道服务器线程停止通信一阵子。

这意味着对于依赖于线程的任何外部实体，需要知道线程正在被保存和冻结，他们将需要有一些东西可以让他们要么跌倒到替代方案，要么保存和冻结自己，并且需要某种协议，以便重新启动的线程可以让其他实体知道它已恢复业务及其当前状态。

此外，如果线程依赖于某些外部实体，那么这些实体必须能够处理被冻结的线程。可能需要某种机制，以便线程可以释放各种资源，其状态已保存，然后在重新启动时能够回收这些资源或类似资源，然后将这些资源重置为已保存状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T21:07:12.790

我不知道您可以通过任何方式发送线程本身。但是，您可以使用诸如 memento 模式之类的模式来保存线程的状态。

在继续之前请参阅这些参考资料，以便了解术语：

*   [纪念品图案，oodesign.com](http://www.oodesign.com/memento-pattern.html)
*   [备忘录模式，维基百科](http://en.wikipedia.org/wiki/Memento_pattern)

基本上，你会得到这个：

1.  设计一个可以在任何开始状态下运行的作业（线程），包括执行中的状态。
2.  当它需要迁移时，获取该线程的状态。
    *   在 Java 中，您可以使用`ThreadLocal`变量来存储线程状态。
3.  将该状态序列化到另一台机器。
4.  使用该状态以您反序列化的状态启动一个新线程。

这是一种比实际迁移线程、其状态、堆栈等更好的方法，因为您可以选择绝对需要移动的内容，而不是无论如何都移动所有内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T20:48:17.007

如果您想将正在运行的 JVM 从一台机器移动到另一台机器，您很可能不会自己做，而是使用 VM 管理器的[实时迁移](http://en.wikipedia.org/wiki/Live_migration)功能。

VM 管理器会将整个虚拟机从一台物理机移动到另一台物理机，而无需停止虚拟机或进程，但它比序列化/反序列化线程要高得多。由于线程可能使用操作系统本地的资源，例如文件系统或套接字，因此整个操作系统需要跟随线程到达另一台物理机器。

# php - 使用 Javascript 安全地查询 Solr

> ID：12629598
> 
> 赞同：1
> 
> 时间：2012-09-27T20:32:51.743
> 
> 标签：php, javascript, web-services, security, solr

我有一个 Solr 服务器设置，工作得很好，并且坐在一个 Apache 代理服务器后面，它限制了对一系列 IP 的访问。

迄今为止，我们的应用程序（内置于 ZF/PHP）将使用 PHP 代理函数来查询 Solr 实例。（ZF 服务器的 IP 是允许的）但是，我一直在测试一个新接口，并注意到直接从 JS 查询 Solr 是比使用 PHP 代码代理事物快光年。

我正在测试的页面每个页面加载运行 25+ 个 solr 查询。使用纯 JS 加载很好，使用 PHP - 甚至不接近可用。

有没有办法使用 jQuery 或比 PHP 快得多的东西来代理客户端？

我已经搜索了好几天，阅读了各种类型的代理、反向代理、安全地查询 web 服务而不暴露密钥等。但是对于使用 JS 查询服务的最佳方法，我仍然有点迷茫。

任何教程或建议将不胜感激，干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:02:18.287

为什么不创建一个指定直接从 Internet 调用的 requestHandler 并使其可访问？（比较 solrconfig.xml）。

Apache-Proxy 可以配置为仅限制对这个 requestHandler（requestHandler 的 URL）的访问，并且 requestHandler 本身可以配置为添加一个隐式查询（应该可以使用不变的 fq 参数）。

如果您的 update-requestHandler 不可访问，应该没问题？！

# java - Java 7 URL 连接失败

> ID：12629601
> 
> 赞同：4
> 
> 时间：2012-09-27T20:32:59.043
> 
> 标签：java, url, ftp

以下代码在 Java 6（及更早版本）下可以正常工作，但在更新到 JRE 7（Java 7）后停止工作。

URL 是一个 FTP 文件：

> [ftp://ftp-private.ncbi.nlm.nih.gov/pubchem/.fetch/96/4133257873201306969.sdf.gz](ftp://ftp-private.ncbi.nlm.nih.gov/pubchem/.fetch/96/4133257873201306969.sdf.gz)

这是我得到的输出：

> 应用程序/八位字节流 -1 [Ljava.lang.StackTraceElement;@5419f97c

这是我的代码：

```
public static void store(URL url, File targetFile){
    try
    {
    System.out.println(url);
    URLConnection uc = url.openConnection();
    String contentType = uc.getContentType();
    System.out.println(contentType);
    int contentLength = uc.getContentLength();
    System.out.println(contentLength);
    Settings.setDownloadSize(contentLength);
    if (contentType.startsWith("text/") || contentLength == -1) {
        throw new IOException("This is not a binary file.");
    }
    InputStream raw = uc.getInputStream();
    InputStream in = new BufferedInputStream(raw);
    byte[] data = new byte[contentLength];
    int bytesRead = 0;
    StatusPanel.updateProgrssBar(bytesRead);
    int offset = 0;
    while (offset < contentLength) {
        bytesRead = in.read(data, offset, data.length - offset);
        if (bytesRead == -1) {
            break;
        }
        offset += bytesRead;
        StatusPanel.updateProgrssBar(offset);
    }
    in.close();

    if (offset != contentLength) {
        throw new IOException("Only read " + offset + " bytes; Expected " + contentLength + " bytes");
    }

    FileOutputStream out = new FileOutputStream(targetFile);
    out.write(data);
    out.flush();
    out.close();
    //StatusPanel.setStatus("File has been stored at " + targetFile.toString());
    //System.out.println("file has been stored at " + targetFile.toString());
} 
```

内容长度返回 -1：

```
Area: API: Networking
Synopsis: Server Connection Shuts Down when Attempting to Read Data When http Response Code is -1 
```

如何使此代码与 Java 7 兼容？

描述：由于 CR 6886436 的错误修复，HTTP 协议处理程序将关闭与发送响应但没有有效 HTTP 状态行的服务器的连接。发生这种情况时，任何尝试读取该连接上的数据都会导致 IOException。

例如，下面的代码是有问题的：

```
public static void test () throws Exception {

.....
HttpURLConnection urlc = (HttpURLConnection)url.openConnection();
....

System.out.println ("Response code: " + urlc.getResponseCode());

/** Following line throws java.io.IOException: Invalid Http response
 *  when Response Code returned was -1
 */
InputStream is = urlc.getInputStream();    // PROBLEMATIC CODE 
```

要解决此问题，请检查 getResponseCode 方法的返回值并适当处理 -1 值；也许通过打开一个新连接，或者在流上调用 getErrorStream。不兼容的性质：行为 RFE：7055058

问题肯定出在`getContentLength()`方法上。

对于 JRE6，此方法返回一个值，但对于 JRE7，我得到 -1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:58:48.130

基于[Java 7 的](http://docs.oracle.com/javase/7/docs/api/)[URLConnection](http://docs.oracle.com/javase/7/docs/api/java/net/URLConnection.html)的 Javadoc ，发生这种情况有两个可能的原因。

第一个可能的原因是内容长度大于 Integer.MAX_VALUE。要确定这是否是问题，我将使用[getContentLengthLong()](http://docs.oracle.com/javase/7/docs/api/java/net/URLConnection.html#getContentLengthLong%28%29)，因为这将返回 long 而不是 int，并且如果内容长度大于 Integer.MAX_VALUE [getContentLength()](http://docs.oracle.com/javase/7/docs/api/java/net/URLConnection.html#getContentLength%28%29)将返回 -1。此外，从 Java 7 开始，最好使用[getContentLengthLong()](http://docs.oracle.com/javase/7/docs/api/java/net/URLConnection.html#getContentLengthLong%28%29)而不是[getContentLength()](http://docs.oracle.com/javase/7/docs/api/java/net/URLConnection.html#getContentLength%28%29)，如[Java 7 的 URLConnection Javadoc中所述](http://docs.oracle.com/javase/7/docs/api/java/net/URLConnection.html), “它返回一个 long ，因此更便携。” 如果您希望同时使用 JRE 6 和 7，我将创建一个 Java 6 和 7 包装类来创建一组方法，您的应用程序使用这些方法与 URL 交互。比在应用程序的启动脚本中检查主机是否具有 JRE 6 或 7 并根据 JRE 版本加载正确的包装类。这通常是一个很好的设计，因为它可以防止您的应用程序依赖于一个特定的 JRE、第三方库或应用程序等。

第二种可能性是服务器不知道内容长度标头字段，因此[getContentLength()](http://docs.oracle.com/javase/7/docs/api/java/net/URLConnection.html#getContentLength%28%29)或[getContentLengthLong()](http://docs.oracle.com/javase/7/docs/api/java/net/URLConnection.html#getContentLengthLong%28%29)方法返回值 -1。这就是为什么我建议先尝试[getContentLengthLong()](http://docs.oracle.com/javase/7/docs/api/java/net/URLConnection.html#getContentLengthLong%28%29)的原因，因为它可能是最快的解决方法。如果两种方法都返回 -1，我建议使用 [Apache JMeter][11] 之类的应用程序来确定标头信息。一个快速的方法是让 JMeter “ [HTTP 代理服务器](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Proxy_Server)" 使用浏览器的代理设置运行，以使用 localhost 作为地址，并使用您为端口设置 HTTP 代理服务器的端口。记录的信息本身将显示为单独的元素，如果您展开它们，应该有一个 HTTP 标头管理器其中包含每个 Header 的名称及其旁边的值。

最后，您可能想对服务器本身进行分析，看看是否有任何问题。验证日志看起来正常，所有正确的进程都已启动，配置设置正确，文件仍然存在并且位于正确的位置等。也许服务器不再设置为响应内容长度请求。此外，验证您的代码是否可以在另一台主机上使用 JRE 7

我希望这些建议对您有价值，并且您能够解决您似乎遇到的这个问题。我还要注意，您确实应该考虑使用包装类并遵循您将来使用的每个第三方类版本的注释，以便您遵循更易于维护的更好实践，例如减少您拥有的外部依赖项的数量通过使用包装类。

# java - JSP 页面无法在 Eclipse 中打开

> ID：12629603
> 
> 赞同：0
> 
> 时间：2012-09-27T20:33:06.750
> 
> 标签：java, html, database, eclipse, jsp

好的，所以我有一个奇怪的情况。我基本上创建了这个以前工作的 JSP 页面，或者至少在我运行代码时 Eclipse 会打开一个新选项卡并显示该页面的意义上。但是今天，当我回去查看我创建的表单时，它基本上会闪烁新标签一秒钟然后自动关闭。我在控制台或 tomcat 日志中没有收到任何错误，所以我不确定发生了什么。我尝试在同一个项目中创建一个新的 JSP 文件（没有相同的代码）并正确加载。有没有人有过类似问题的经验？

下面是我的代码...

```
<%@page import="java.sql.*"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <html>
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
                <title>Code Selector</title>
        </head>
        <body> 
            <h1>Please select the applicable codes:</h1> 
            <select name='Code' onchange="showState(this.value)">  
            <option value="none">Select a code</option>  
            <%
                //Pulls the ids and decriptions from the codes table and stores them in the first drop down
                try
                {
                    Class.forName("driverName").newInstance();  
                    Connection con = DriverManager.getConnection("serverURL","username","password");  
                    Statement stmt = con.createStatement();  
                    ResultSet rs = stmt.executeQuery("select id, descr from codes");

                    while(rs.next())
                    {
                        %>
                            <option value="<%=rs.getString(1)%>"><%=rs.getString(1)%> <%=rs.getString(2)%></option>  
                        <%
                    }

                    //Closes the database connection
                    stmt.close();
                    con.close();
                }
                catch (ClassNotFoundException e)
                {
                    System.err.println("ClassNotFoundException: " + e.getMessage());
                } 
                catch (SQLException e)
                {
                    System.err.println("SQLException: " + e.getMessage());
                }
                catch (Exception e)
                {
                    System.err.println("Generic Exception: " + e.getMessage());
                }       
            %>
            </select>  
            <br>
            <br>
            <select name='Code2' onchange="showState(this.value)">  
            <option value="none">Select a code</option>  
            <%
                //Pulls the ids and decriptions from the codes table and stores them in the second drop down
                try
                {
                    Class.forName("driverName").newInstance();  
                    Connection con = DriverManager.getConnection("serverURL","username","password");  
                    Statement stmt = con.createStatement();  
                    ResultSet rs = stmt.executeQuery("select id, descr from codes");

                    while(rs.next())
                    {
                        %>
                            <option value="<%=rs.getString(1)%>"><%=rs.getString(1)%> <%=rs.getString(2)%></option>  
                        <%
                    }

                    //Closes the database connection
                    stmt.close();
                    con.close();
                }
                catch (ClassNotFoundException e)
                {
                    System.err.println("ClassNotFoundException: " + e.getMessage());
                } 
                catch (SQLException e)
                {
                    System.err.println("SQLException: " + e.getMessage());
                }
                catch (Exception e)
                {
                    System.err.println("Generic Exception: " + e.getMessage());
                }       
             %>
            </select>
            <br>
            <br>
            <select name='otherCode' onchange="showState(this.value)">  
            <option value="none">Select a other code</option>  
            <%

                //Pulls the ids and decriptions from the other codes table and stores them in the third drop down
                try
                {
                    Class.forName("driverName").newInstance();  
                    Connection con = DriverManager.getConnection("serverURL","username","password");  
                    Statement stmt = con.createStatement();
                    ResultSet rs2 = stmt.executeQuery("select id, descr from other_codes");

                    while(rs2.next())
                    {
                        %>
                            <option value="<%=rs2.getString(1)%>"><%=rs2.getString(1)%> <%=rs2.getString(2)%></option>  
                        <%
                    }

                    //Closes the database connection
                    stmt.close();
                    con.close();
                }
                catch (ClassNotFoundException e)
                {
                    System.err.println("ClassNotFoundException: " + e.getMessage());
                } 
                catch (SQLException e)
                {
                    System.err.println("SQLException: " + e.getMessage());
                }
                catch (Exception e)
                {
                    System.err.println("Generic Exception: " + e.getMessage());
                }       
            %>
      </select>
      <br> 
      <br>
      <form method = "post">
        <input type="submit" value="Submit">
        <%
            try
            {
                String Code = request.getParameter("Code");
                String Code2 = request.getParameter("Code2");
                String otherCode = request.getParameter("otherCode");

                Class.forName("driverName").newInstance();  
                Connection con = DriverManager.getConnection("serverURL","username","password");  
                Statement stmt = con.createStatement();
                //ResultSet rs3 = stmt.executeQuery();

                System.out.println("This is the first code: " + Code);
                System.out.println("This is the second code: " + Code2);
                System.out.println("This is the other code: " + otherCode);

                con.close();
                stmt.close();

            }
            catch (ClassNotFoundException e)
            {
                System.err.println("ClassNotFoundException: " + e.getMessage());
            } 
            catch (SQLException e)
            {
                System.err.println("SQLException: " + e.getMessage());
            }
            catch (Exception e)
            {
                System.err.println("Generic Exception: " + e.getMessage());
            } 
        %>
        <script>
            window.close();
        </script>
      </form>
      </body> 
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T22:05:45.640

好吧，这很愚蠢。所以我创建了另一个新的jsp文件，代码相同，除了标签中的`<script>`代码，一切正常。然后我重新添加了`<script>`标签，它第一次运行良好。然而，下次我去尝试时，原来的问题又出现了。然后当我再次去删除`<script>`标签时，问题仍然存在。因此，无论出于何种原因，似乎一旦添加`window.close()`，它就会永久保留在页面上？

# c++ - 类定义中的宏依赖访问说明符会导致未定义的行为吗？

> ID：12629611
> 
> 赞同：2
> 
> 时间：2012-09-27T20:33:46.743
> 
> 标签：c++, compiler-construction, undefined-behavior

假设我有以下两个类定义（只有访问说明符`bar()`不同，其他一切都相同）：

```
class MyClass {
public:
    void foo();
    void bar();   // bar() is public

private:
    int member;
}; 
```

和

```
class MyClass {
public:
    void foo();

private:
    void bar();   // bar() is private
    int member;
}; 
```

编译器是否认为这些类在编译器生成的代码方面是“不同的”？（或者换句话说：除了访问权限检查之外，编译器是否对它进行了不同的处理？）

这与以下问题相同：以下代码会导致诸如*未定义行为*之类的问题吗？（前提是它在不同的单元中编译，有或没有定义X，然后链接在一起。）

```
class MyClass {
public:
    void foo();

#ifdef X
private:
#endif
    void bar();

private:
    int member;
}; 
```

我对独立于编译器的答案以及特定于 GCC 的答案感兴趣（因为这是我的主要目标编译器）。

`package private`如果我们想通过在“包”中定义一个特定的宏来“模拟”诸如 C++ 中的 Java 世界之类的东西，这将变得很有趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T21:11:40.387

违反单一定义规则绝对是未定义的行为，该规则要求同一类类型的所有定义都相同。

请注意，类的内存布局仅*在每个访问级别*中指定，因此更改访问级别可以非常现实地导致类的不同内存布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T20:36:18.200

这似乎不是一个好主意：

> 更改对某些功能或数据成员的访问权限，例如从私有更改为公共。对于某些编译器，此信息可能是签名的一部分。如果您需要使私有函数受保护甚至公开，则必须添加一个调用私有函数的新函数。
> 
> ― [C++ 的策略/二进制兼容性问题](http://techbase.kde.org/Policies/Binary_Compatibility_Issues_With_C++)

但是，我认为这不应该导致未定义的行为，而是应该导致链接错误或符号加载错误。

**更新：**

在 GCC (4.6.1) 上进行测试，更改访问权限没有问题。

# apache - 如何避免使用 mod_rewrite 隐藏 .php 时出现 500 错误？

> ID：12629619
> 
> 赞同：0
> 
> 时间：2012-09-27T20:35:06.140
> 
> 标签：apache, .htaccess, mod-rewrite

我在我的 .htaccess 文件中有这个：

```
 ErrorDocument 403 /403.php
    ErrorDocument 404 /404.php
    Options -MultiViews
    RewriteEngine On
    RewriteBase /
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ $1.php [L] 
```

当我尝试访问不存在的页面或目录时，我收到“错误 500 - 内部服务器错误”。如果相关，我正在使用 GoDaddy。

# javascript - Backbone Boilerplate + Handlebars 视图不起作用

> ID：12629620
> 
> 赞同：0
> 
> 时间：2012-09-27T20:35:07.410
> 
> 标签：javascript, backbone.js, requirejs, handlebars.js, javascriptmvc

我正在尝试学习 Backbone，但我对如何使用 Handlebars 有疑问。

我想构建一个模块化应用程序，其中有用于视图和模板的单独文件。

这是我的 app.js：

```
define([
  // Application.
  "app",
  "views/home",
],
function(app, homeView){
    var Router = Backbone.Router.extend({
routes: {
  "": "index",
  "home": "home"
},

index: function() {
    console.log('hello');
},
home: function() {
    console.log('home');
    homeView.render();
}
});
return Router;
}); 
```

此时我正在控制台上“回家”。

这是views/home.js

```
define([
  'app',
  'text!templates/home.html'
], function(app, homeTxt) {
    var homeView = Backbone.View.extend({
    el: $('#main'),
        render: function(){
           console.log('render');
           var data  = { property : "1" };

           this.template = Handlebars.compile(homeTxt);

           this.el.append( this.template() );
        }
     });

   return new homeView;
}); 
```

现在我应该在控制台上得到“渲染”，但我没有得到它，并且“templates/home.html”处的模板没有被渲染。

我在控制台或 DOM 上也没有收到任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:23:49.710

我认为您需要在调用渲染之前实例化视图 -

```
home: function() {
    var viewInstance = new homeView();
    console.log('home');
    viewInstance.render();
} 
```

许多 Backbone 代码示例通过不使用大写字母来指示应该实例化的事物（即用“new”调用）来帮助这种混淆，反之亦然。

# css - 创建 tumblr 主题 - 音频帖子不会显示在博客上

> ID：12629622
> 
> 赞同：1
> 
> 时间：2012-09-27T20:35:15.470
> 
> 标签：css, audio, tumblr, posts

我正在创建一个新的 tumblr 主题（实际上我几乎完成了）。我遇到的唯一问题（我在上一个主题中遇到了同样的问题）是，无论我如何格式化音频帖子，它都不会出现在我的博客上。我的格式化音频会在仪表板上和自定义主题页面上发布。

我看到音频/视频帖子有时会出现无限滚动的问题，所以我删除了所有脚本。音频帖子仍然没有出现。

这是我的音频帖子的代码：

```
{block:Audio}

<div id="post">

{block:AudioPlayer}
<div id="audioplayer">
{AudioPlayerBlack}
</div>
{/block:AudioPlayer}

<div id="albumart">
{block:AlbumArt}
<img src="{AlbumArtURL}">
{/block:AlbumArt}
</div>

</div>         
{/block:Audio} 
```

这是那些 div 的 css（以防出现问题）

```
#post
{
float: left;
padding: 5px;
margin: 4px;
background-color: {color:Post Background};
width: 215px;
    -moz-border-radius: 7px;
    -webkit-border-radius: 7px;
    -khtml-border-radius: 7px;
    border-radius: 7px;
box-shadow: 2px 2px 4px {color:Post Shadow};
}

#albumart
{
margin: 3px;
margin-bottom: 2px;
width:207px;
height: 207px;
border: 1px solid {color:Border Color};
overflow: hidden;
}

#audioplayer
{
width:25px;
height:25px;
overflow:hidden;
position:absolute;
margin-top:100px;
margin-left:100px;
    -moz-border-radius: 18px;
    -webkit-border-radius: 18px;
    -khtml-border-radius: 18px;
    border-radius: 18px;
opacity:0.75;
border:5px solid black;
} 
```

你可以在这里看到它：smash-howard.tumblr.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T17:25:39.863

由于尚未更新答案并且我遇到了类似的问题，因此需要执行以下操作：

```
{block:Posts}
...

{block:Audio}
    {block:AudioEmbed}
    <div class="audio-embed">
        {AudioEmbed-400}
    </div>
    {/block:AudioEmbed}
    {block:AudioPlayer}
    <div class="audio-player">
        {AudioPlayerBlack}
    </div>
    {/block:AudioPlayer}
{/block:Audio}

...
{/block:Posts} 
```

这样，您就可以考虑两种可能的音频发布场景：音频嵌入和音频播放器。只考虑一个会导致另一个不显示，这就是在这种情况下发生的事情。

# java - 配置 WSDD 以匹配 AXIS 中的 WSDL

> ID：12629624
> 
> 赞同：6
> 
> 时间：2012-09-27T20:35:18.030
> 
> 标签：java, web-services, soap, axis, jax-rpc

我有 WSDL（我从外部提供商那里得到的）。有这样的行：

```
 <xsd:complexType name="SalesRequest">
                <xsd:all>
                    <xsd:element name="merchantid" type="xsd:int"/>
                    <xsd:element name="password" type="xsd:string"/>
                    ...
                </xsd:all>
  </xsd:complexType>

  ... 
  <message name="SalesResponse">
        <part name="request" type="tns:SalesResponse"/>
  </message>
  ..
  <portType name="InterfacePortType">
    <operation name="Sales">
        <documentation>some text</documentation>
        <input message="tns:SalesRequest"/>
        <output message="tns:SalesResponse"/>
  </operation> 
```

我已经基于这个 WSDL（使用 JAX-RPC）生成了 Java 类。

然后我创建了 Axis 服务（MyService 实现了 InterfacePortType）。

我准备了 XSDD 文件，将 MyService 部署到 Web 应用程序。

因此，然后我调用了 MyServive 的一种方法，并在服务器端响应序列化的那一刻得到了这个错误：

**意外元素名称：预期=请求，实际=SalesReturn**

这意味着我的 XSDL 和 XSDD 并没有太多其他功能。MyService 准备了这样的响应（但不算通过网络发送）：

```
<?xml version="1.0" encoding="utf-8"?><soapenv:Envelope 
...
<SalesReturn href="#id0"/></ns1:SalesResponse><multiRef xmlns:ns2=
...
</soapenv:Envelope> 
```

问题是：我应该如何处理 WSDD 以便在来自服务的响应 XML 中使用**“请求”**而不是**“SalesReturn” ？**

我不知道这个“**返回**”后缀是从哪里来的。

- 我已经做了一些步骤：

我用谷歌搜索，发现 WSDL 中应该有 'schema elementFormDefault="qualified"'。但是我不能更改 WSDL，因为它是外部的，它是由外部提供商提供给我的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:05:44.857

我找到了解决方案，我使用**axistools-maven-plugin**生成了 WSDD ，将 serverSide 参数设置为**true** - 然后它生成 WSDD 文件。

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
     <artifactId>axistools-maven-plugin</artifactId>
        <executions>
            <execution>
                <id>wsdl2java-job</id>
                 <phase>generate-sources</phase>
                    <goals>
                      <goal>wsdl2java</goal>
                    </goals>
                  <configuration>
                      <sourceDirectory>
                           src/main/config/wsdl2java/myfolder 
                       </sourceDirectory>
                        <outputDirectory>
                            ${generatedSourcesDirectory} 
                        </outputDirectory>
                        <testCases>false</testCases>
                        <serverSide>true</serverSide>
                        <subPackageByFileName> false 
                        </subPackageByFileName>
                        <packageSpace> my.api 
                        </packageSpace>
                        </configuration>
                   </execution>
     </plugin> 
```

顺便说一句，当我启动这个插件时，它最终会出现编译异常，但是，它可能会生成我的 WSDD。

然后，如果查看生成的 WSDD，我手动制作的 WSDD 中没有一些有趣的行：

```
<operation name="sales" qname="operNS:Sales" 
xmlns:operNS="urn:Interface" 
returnQName="request" 
returnType="rtns:SalesResponse" 
xmlns:rtns="urn:Interface" soapAction="urn:Interface#Sales" >
  <parameter qname="in" type="tns:SalesRequest" xmlns:tns="urn:Interface"/>
</operation> 
```

这部分：**returnQName="request"**

它还生成“typeMapping”标签（但我使用了 beanMapping）

所以，只要我把这些更改放到我的文件中，我就一切正常了。

实际上，最初为了生成我的初始源，我使用了另一个插件：maven-antrun-plugin

但是没有生成 WSDD 的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T00:55:56.700

错误告诉你的是请求应该看起来像

`<soapenv:Envelope> <request> <SalesRequest>...`

你正在发送

`<soapenv:Envelope> <SalesReturn>...`

获得这个数字的最佳方法是尝试使用 SOAP UI 之类的工具，并将它们发送的有效负载与您从工具生成的内容进行比较——一些工具可以选择在输入/输出消息中包装或解开部件名称。

希望这可以帮助

# javascript - 是否可以让 adapt.js 为一个范围加载多个样式表？

> ID：12629632
> 
> 赞同：2
> 
> 时间：2012-09-27T20:36:00.717
> 
> 标签：javascript, css

我第一次在一个项目中使用了 adapt.js。我的范围是 0 到 720，我想加载一个 mobile.css 文件以及第二个 css 文件，我们称之为 style.css。这可能吗？有解决办法吗？我尝试了这个，但它没有像预期的那样工作。

```
var ADAPT_CONFIG = {
    path: 'css/',

    dynamic: true,

    range: [
        '0px    to 720px  = style.css',
        '0px    to 720px  = mobile.css',
        '720px            = 720.css'
    ]
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:12:52.123

您可以使用

```
@import url('/css/mobile.css'); 
```

在*style.css*的开头。

然后配置（通过 ADAPT_CONFIG）adapter.js 以仅使用*style.css*用于该范围。

*反之亦然，您可以在 mobile.css 末尾导入 style.css 并仅使用 mobile.css*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T21:00:01.667

恐怕这是不可能的，但如果你有胆量，你可以修改 adapt.js 的源代码来做到这一点。[这是adapt.js](https://github.com/nathansmith/adapt/blob/master/assets/js/adapt.js)的关键部分：

```
// If it's a range, split left/right sides of "to",
// and then convert each one into numerical values.
// If it's not a range, turn maximum into a number.
val_1 = is_range ? parseInt(arr_0.split('to')[0], 10) : parseInt(arr_0, 10);
val_2 = is_range ? parseInt(arr_0.split('to')[1], 10) : undefined;

// Check for maxiumum or range.
if ((!val_2 && i === last && width > val_1) || (width > val_1 && width <= val_2)) {
    // Build full URL to CSS file.
    file && (url = path + file);

    // Exit the while loop. No need to continue
    // if we've already found a matching range.
    break;
} 
```

它位于检查您在 ADAPT_CONFIG 中指定的范围条件的 while 循环内。如您所见，一旦找到路径，就不再检查“范围”是否有任何其他匹配项。您可能可以更改代码以允许它 - 您可能必须将 while 循环之后的代码移动到上面的 if 语句中并删除 break（这是一个有根据的猜测，我没有尝试过）。

但是，根据您提供文件的方式，我强烈考虑使用资产管理器将“style.css”和“mobile.css”组合到一个文件中 - 预编译资产允许一些其他有趣的技巧，比如自动使 css 文件尽可能小。

编辑 - 如果您对资产管理器感兴趣，那么真的没有一种方法可以做到；这在很大程度上取决于您在工作中使用的环境。对于像 rails 这样的东西，这非常容易，因为合并文件已经很成熟了，而且 sprockets gem 有很多其他的资产管理功能（在其中合并文件非常快）。如果我是你，虽然我可能只是按照“将 css 文件与”结合起来的方式进行一些快速的谷歌搜索，但会有很多选择。如果您没有花哨的框架（[这是](http://code.google.com/p/minify/)一个很有前途的示例），那么用于此的 PHP 脚本到处都是，而 Google为这种炒锅 制作了一个[Apache 模块。](https://developers.google.com/speed/pagespeed/mod?hl=fr-FR)

如果您确实走这条路，我鼓励您在基本工作正常后尝试一下-您可以做一些漂亮的事情，例如在合并文件的同一位置生成 ADAPT_CONFIG 中的范围值，给您一个漂亮干净的单点，您可以在其中管理样式文件。

# python - PyQt4：将上下文菜单移动到位置

> ID：12629634
> 
> 赞同：1
> 
> 时间：2012-09-27T20:36:08.370
> 
> 标签：python, popup, pyqt, contextmenu, move

您将如何更改 pyqt4 中弹出菜单的位置？这段代码似乎没有这样做。

```
 self.popMenu.exec_(self.table.mapToGlobal(point))
    position = self.popMenu.pos()
    self.popMenu.move(position.x() + 100, position.y() + 100) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T01:17:59.307

您的版本不起作用，因为*同步*`exec_`打开菜单，即会阻塞/等待菜单关闭。所以你在菜单关闭后被处理。*`exec_``move`*

 *您可以使用`popup`而不是`exec_`. 那是异步的，所以下面的代码会在菜单打开的时候执行。

或者您可以在调用*之前*`exec_`计算出您想要的位置。*

# javascript - getJSON 内部事件在传入函数调用时遇到引用错误

> ID：12629637
> 
> 赞同：0
> 
> 时间：2012-09-27T20:36:11.993
> 
> 标签：javascript, jquery, asp.net-mvc-3, html, asynchronous

我有一个使用对 MVC 控制器的 JSON 调用来填充表的方法，如下所示：

```
pub.PopulateTable = function (args) {
    var page = 1,
        // ...variables snipped...
        OnRowClicked;

    // Unpack arguments...
    if (args != null) {
        // ...details snipped...

        OnRowClicked = args.OnRowClicked;
    }

    // Build path...
    path = path + controller + '/' + action + '/';
    if (actionId != null && actionId != '') {
        path = path + actionId + '/';
    }
    path = path + page;

    $.getJSON(path, function (data) {
        if (data.Values.length > 0) {
            // Clear table body, then inject list...
            $tableBody.html('');
            $.tmpl($template, data.Values).appendTo($tableBody);

            // ...snip various instructions, for brevity...

            // Add on-click returning...
            $('tr').click(function () {
                var $row = $(this),
                    rowData = {};

                rowData.SomeProperty = $row.children('#IdColumn').val();

                $modalDialog.modal('hide');
                OnRowClicked(rowData);  // Problem!!!
            });
        } else {
            $tableBody.html("<tr><td colspan=2>No entries...</td></tr>");
        }
    }); 
```

也许是因为 getJSON 是一个异步操作，但是通过方法参数对象传入的 OnRowClicked() 方法在尝试使用以下传递给它的（简单）方法时遇到了引用错误：

```
function textFieldRowClickHandler(rowData) {
    $myTextFieldHere.val(rowData.SomeProperty);
} 
```

当我打开对话框（导致 PopulateTable 运行并绑定其中的事件）并选择一条记录（从而触发 click 事件）时，我不断收到引用错误，因为 rowData.SomeProperty 未定义，即使回调将点击事件绑定到每个 tr 标签，当它被点击时，关闭对话框，获取值，构建一个对象，并将其传递给给定的方法。

如上所述 - 我知道 getJSON 是一个异步操作，这就是我认为我的问题出现的地方 - 我不熟悉异步范式。我到底做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T21:28:34.553

似乎 OnRowClicked 方法在调用时没有正确设置上下文。

您可以使用：

```
OnRowClicked = args.OnRowClicked.bind(args); 
```

或者

```
OnRowClicked = $.proxy(args.OnRowClicked,args); 
```

所以它应该看起来像：

```
pub.PopulateTable = function (args) {
var page = 1,
    // ...variables snipped...
    OnRowClicked;

// Unpack arguments...
if (args != null) {
    // ...details snipped...

    OnRowClicked = args.OnRowClicked.bind(args);
} 
```

# javascript - 为什么 JavaScript 的 setTimeout 不会减慢按键速度？

> ID：12629639
> 
> 赞同：3
> 
> 时间：2012-09-27T20:36:19.823
> 
> 标签：javascript, jquery

当我连续按下 keydown 事件（字母 k）时，为什么以下 keydown 事件不会减慢 3000 mil？如果我保持手指向下，计数会迅速增加，因为 mcount 上没有 setTimeout。这是为什么？每次计数之间应该有一个延迟，但我无法让它工作......

```
var mcount = 0;
function playershoot() {
if(!game.playerHit){ 
      $(document).keydown(function(e){ 
        switch(e.keyCode){
        case 75: 
        clearTimeout();
        setTimeout(console.log(mcount++), 3000);
        break;
        }
    });
}

}
playershoot(); 
```

任何建议将被认真考虑！

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T20:38:54.420

1.:[`setTimeout()`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)返回一个`timeoutId`可以用 清除的[`clearTimeout(timeoutId)`](https://developer.mozilla.org/en-US/docs/DOM/window.clearTimeout)。你没有这样做......所以，在你的 3 秒延迟之后，所有这些超时都被称为背靠背。

2.：你`console.log`的被立即执行，因为你没有将它包装在这样的函数中：

```
setTimeout(function() { console.log(mcount++) }, 3000); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T20:38:03.580

`setTimeout`不会导致延迟，它会启动一个计时器，在指定的时间后触发一个事件。

[你不能在 Javascript 中“睡觉”](https://stackoverflow.com/questions/951021/what-do-i-do-if-i-want-a-javascript-version-of-sleep)，你需要重构你的代码，以便它可以处理事件。对于您的代码，您似乎需要在第一次按键时设置一个标志。然后返回，并且只允许新的按键（即只响应），当标志被清除时。然后可以在一段时间后自动清除该标志`setTimeout`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-27T21:38:51.453

按照@Norguard 所说的，这里有一个实现：http: [//jsfiddle.net/apu3P/](http://jsfiddle.net/apu3P/)

```
this.fire = function(){
    var cFire = new Date();

    if ((cFire - lastFire) / 1000 > 1/me.fireRate){            
        // code to fire the projectile
        lastFire = cFire;
    }
}; 
```

我`fireRate`设置了一个整数，表示玩家每秒可以开火多少次。

在演示中，我设置了 3 个玩家，每个玩家都有不同的射速。如果您按住空格键，您可以看到这一点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-27T20:45:17.400

虽然这里的每个人都是对的，但他们缺少的是你需要延迟开火，而不是延迟被调用的事件......

在您的 keydown 事件中，设置一个时间戳，为该事件设置一个先前时间和一个当前时间。在函数内部，有一个 time_limit。

因此，当您按下该键（或它反复触发）时，请检查：

```
current_time - last_fired >= rate_limit; 
```

如果当前时间距离上一次射击超过 3000 毫秒，则将`last_fired`时间戳设置为当前时间，然后开火。

**编辑**

考虑这个简单的例子：

```
var Keyboard = {};

var player = (function () {
    var gun = {
            charging  : false,
            lastFired : 0,
            rateLimit : 3000
        },

        controls = { shoot : 75 },

        isHit = false,
        public_interface;

    function shoot () {
        var currentTime = Date.now();

        if (gun.rateLimit > currentTime - gun.lastFired) { return; }
        /* make bullet, et cetera */

        gun.lastFired = currentTime;
    }

    function update () {
        if (Keyboard[controls.shoot] || gun.charging) { this.shoot(); }
        // if key was released before this update, then the key is gone...
        // but if the gun was charging, that means that it's ready to be fired

        // do other updates
    }

    function draw (ctx) { /* draw player */ }

    public_interface = {
        shoot : shoot,
        damage : function (amt) { isHurt = true; /* rest of your logic */ }
        draw : draw,
        update : update
    };

    return public_interface;

}());

document.addEventListener("keydown", function (e) {
    // if key is already down, exit
    if (!!Keyboard[e.keyCode]) { return; }
    // else, set the key to the time the key was pressed
    // (think of "charging-up" guns, based on how long you've held the button down)
    Keyboard[e.keyCode] = e.timeStamp;
});

document.addEventListener("keyup", function (e) { delete Keyboard[e.keyCode]; }); 
```

在你的游戏循环中，你现在要做一些不同的事情：
你的玩家将自我更新。
在该更新中，它询问键盘是否按下了拍摄键。
如果是，那么它会调用 shoot 方法。

这仍然不是 100%*正确*，因为玩家不应该关心或知道键盘。
它应该通过某种服务来处理，而不是要求`window.Keyboard`. 不管...

您的控件现在被包裹在播放器内部——因此您可以定义这些控件是什么，而不是到处询问`keyCode`。

您的事件现在正在做他们应该做的事情：设置密钥并离开。
在您当前的迭代中，每次浏览器触发时，可能是***300x***`keydown` /sec，如果它愿意，该事件还必须调用您的所有播放器逻辑... 300x/sec...

 *在更大的游戏中，您可以更进一步，用 and 制作组件`Controls`，`Health`每个组件都具有完成自己工作所需的所有属性和方法，仅此而已。

以这种方式分解代码也会使拥有不同的枪支变得非常简单。
想象一个`Inventory`组件：
库存包含不同的`guns`.
每个`gun`人都有自己的`rateLimit`，有自己的`lastFired`，有自己的`bulletCount`，做自己的，自己`damage`开火`bulletType`。

所以你会打电话`player.shoot();`，在里面，它会打电话`inventory.equipped.shoot();`。
该内部函数将负责射击装备好的枪的所有逻辑（因为你会`inventory.add(Gun);`使用你的枪和`inventory.equip(id);`你想要的枪。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-27T20:39:59.320

您必须将 setTimeout 的返回值传递给 clearTimeout 。取消它。

```
var mcount = 0,timeout;
    function playershoot() {
    if(!game.playerHit){ 
          $(document).keydown(function(e){ 
            switch(e.keyCode){
            case 75: 
            clearTimeout(timeout );
            timeout = setTimeout(function(){
                       console.log(mcount++);
               }, 3000);
            break;
            }
        });
    }

    }
    playershoot(); 
```*

# c# - 如何代码重用apsx？

> ID：12629643
> 
> 赞同：4
> 
> 时间：2012-09-27T20:36:35.967
> 
> 标签：c#, asp.net, .net, design-patterns

我知道在 C# 中我可以创建工厂，但我不知道如何在 aspx 中重用代码。我的代码最初只用于 ARList，但现在有 IcnList。我想过做一个 switch 语句，但没有更好的代码吗？

**功能**

```
 protected void Page_Load(object sender, EventArgs e)
        {
            if (!Page.IsPostBack)
            {
                ARExtractionController arController = new ARExtractionController();
                Dictionary<int, string> ARDictionary = arController.GetTickets();
                List<int> sortedARList = new List<int>();
                foreach (KeyValuePair<int, string> kv in ARDictionary)
                {
                    sortedARList.Add(kv.Key);
                }
                sortedARList.Sort();
                sortedARList.Reverse();
                ARList.DataSource = sortedARList;
                ARList.DataBind();
                ARList.Items.Insert(0, " ");
                ARList.AutoPostBack = true;
            }
        } 
```

![在此处输入图像描述](../Images/0cde3a7bda28f61ad6144ef5f1047cc3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:45:15.903

如果您只是希望能够重用代码，请将一个类添加到您的项目中以获取实用程序方法并将其转储到其中以供两个页面使用。

如果您尝试使用相关 UI 重用代码，请查看允许您这样做的用户控件（ascx 文件）。

从问题中不清楚哪个适合您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T20:52:06.040

在 TicketExtractionWeb 中，创建一个 BasePage 类。

BasePage.cs：

```
public class BasePage : System.Web.UI.Page
{
    // Add methods that are used on all your pages in here.

    protected DateTime GetCurrentDate()
    {
        return DateTime.Now;
    }
} 
```

还有一个页面（我们称之为 MyPage）：

```
public class MyPage : BasePage
{
    protected Page_Load(object sender, EventArgs e)
    {
        var currentDate = this.GetCurrentDate();
    }
} 
```

因此，当您创建另一个 aspx 页面时，它将默认为：

```
public class MyNewPage : System.Web.UI.Page
{
    // ...
} 
```

只需更改`: System.Web.UI.Page`为`: BasePage`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T20:47:04.493

您应该能够从单个页面继承以重用代码。

aspx 文件的顶部：

```
<%@ Page Language="C#" AutoEventWireup="true" Inherits="MyNamespace.CommonCode" %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-05T19:43:17.353

如果要复用html，请使用用户控制文件（**.ascx**），可以多次复用。

[什么时候需要 .ascx 文件以及如何使用它们？](https://stackoverflow.com/questions/5217601/when-do-you-need-ascx-files-and-how-would-you-use-them)

# python - 使用 numpy 时出现“找不到合适的图像”错误

> ID：12629644
> 
> 赞同：1
> 
> 时间：2012-09-27T20:36:36.817
> 
> 标签：python, macos, numpy, osx-lion

我尝试在终端中使用 NumPy，但系统给了我这样的错误消息：

> 回溯（最后一次调用）：文件“”，第 1 行，在文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/init **.py** ”中，第 137 行，在导入 add_newdocs 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/add_newdocs.py”，第 9 行，从 numpy.lib 导入 add_newdoc 文件“/Library /Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/lib/init .py”，第 4 行，从 type_check 导入 * 文件“ **/Library/Frameworks/Python.framework/Versions** /2.7/lib/python2.7/site-packages/numpy/lib/type_check.py”，第 8 行，在 import numpy.core.numeric as _nx 文件中“/Library/Frameworks/Python.framework/Versions/2.7/lib /蟒蛇2。7/站点包/numpy/核心/**init** .py"，第 5 行，在导入多数组中
> 
> ImportError：dlopen（/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/core/multiarray.so，2）：找不到合适的图像。确实找到了：/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/core/multiarray.so：通用包装器中没有匹配的架构

我该如何解决？我从官方来源安装了 Python 2.7.3，我的机器运行的是 OSX 10.7.4。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T08:32:47.133

您的 NumPy 安装以某种方式出现问题：它检测到它的一些核心库（例如`multiarray.so`）是使用不同版本的编译器或针对不同架构编译的。

如果您在将 Python 更新到 2.7.3*之前安装了 NumPy，则必须重新安装它。*您可以找到[预编译的二进制文件](http://www.scipy.org/Download)，但由于您修改了原始 Python，它们可能不适合您。

同时，在 Mac OS X 上编译 NumPy 并不是特别困难。有一些环境变量需要预先设置，但除此之外，这是一个简单的过程。此[链接](http://www.scipy.org/Installing_SciPy/Mac_OS_X)应该为您提供宝贵的信息。

# r - 将 geom_path 和 geom_text 添加到同一个 ggplot 会在 r 中生成错误

> ID：12629647
> 
> 赞同：3
> 
> 时间：2012-09-27T20:36:46.923
> 
> 标签：r, ggplot2

我在同一个 ggplot 中绘制了一个 geom_path 对象和一个 geom_text 对象，但遇到了以下问题：

```
#load the data frames
df1 <- data.frame(x=c(32, 42, 52), y=c(15, 20, 25), grp=c(1, 2, 2), site=c("A", "B", "C"))
df1$grp = factor(df1$grp)
colnames(df1)[3] = "Group"

df2 <- data.frame(x=c(32, 42, 52), y=c(15, 20, 25))

#create basic plot with site name coloured by group 
p = ggplot(df1, aes(x=x, y=y, label=site))
p = p + geom_text(aes(colour=factor(Group)), size=4)
p = p + coord_fixed()

#I try adding a path
p = p + geom_path(data=df2, aes(x=x, y=y)) 
```

但是在 eval(expr, envir, enclos) 中得到错误 Error : object 'site' not found

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T20:52:08.490

主要 ggplot 调用中的每一种美学都预计在随后的每个 geom_ 中。解决方案是通过将其设置到那里来移动`label = site`或取消映射。`geom_path``NULL`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T20:52:26.080

```
ggplot(df1, aes(x, y)) + 
geom_text(aes(label = site, colour = factor(Group)), size = 4) +
coord_fixed() + geom_path(df2, aes(x, y)) 
```

# jquery - Jquery Datatable：无法根据 ajax 调用的结果添加新列 - 获取错误数据表请求未知参数

> ID：12629648
> 
> 赞同：2
> 
> 时间：2012-09-27T20:36:54.230
> 
> 标签：jquery, datatables, html-table

我是数据表的新手（http://datatables.net/）。我需要根据我的 ajax 调用结果的计算添加列。我尝试了以下方法，但得到错误“数据表请求来自行的数据源的未知参数”。这是这种要求的正确方法吗？我非常感谢您在这方面的帮助。这是表结构的外观：

```
<table id="result" class="show_hide">
    <thead>
        <tr>
            <th>Time1</th>
            <th>Time2</th>
            <th>Elapsed Time</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table> 
```

这是我的 ajax 调用的示例输出：

```
[{
    "time1": 12345,
    "time2": 56789
},  
{
        "time1": 2000,
        "time2": 3000
}] 
```

这就是我正在尝试使用数据表

```
$('#result').dataTable({
        "sAjaxSource": "http://" + hostname + ":" + port + api,
        "sAjaxDataProp": "",
        "iDisplayLength": 25,
        "bRetrieve": true,
        "sPaginationType": "full_numbers",
        "aoColumns": [{
            "mDataProp": "time1"
        },
        {
            "mDataProp": "time2"
        },
       {
            "mRender": function(data, type, row) {

                return (row.time2 - row.time1);
            },
            "mDataProp": null
       }
    ]
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T23:29:36.643

正如您在服务器[文档](http://datatables.net/usage/server-side)中看到的那样，您必须返回一个具有一些必需属性的对象。

所以你应该返回类似

```
{ iTotalRecords : 2, iTotalDisplayRecords: 2, aaData: [{
    "time1": 12345,
    "time2": 56789
},  
{
        "time1": 2000,
        "time2": 3000
}] 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T23:58:25.397

我认为我们在返回对象中不需要任何额外的属性……我发现了问题所在。我使用的是 jquery 数据表 1.9.0，但 mRender 的这个功能适用于 1.9.4。升级了 js，这段代码就像 1.9.4 的魅力一样。

# macos - 起初未调用 AudioQueueOutputCallback

> ID：12629649
> 
> 赞同：0
> 
> 时间：2012-09-27T20:36:56.297
> 
> 标签：macos, core-audio, audioqueueservices

我的问题可能与此类似：[为什么不能调用我的 AudioQueueOutputCallback？](https://stackoverflow.com/questions/7575670/why-might-my-audioqueueoutputcallback-not-be-called)

似乎该人能够通过在主线程上运行音频内容来修复。我不能这样做。

我将缓冲区排入主要音频 Q，然后启动音频 Q。一旦我启动队列，这些缓冲区不应该立即完成吗？

我正在正确设置数据大小。

作为一个黑客，我只是重复使用缓冲区而不等待 cabllback 将它们报告为已完成。如果我这样做，我会像这样运行几秒钟，然后缓冲区回调开始从它们开始工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T08:52:53.523

用核心音频破解你的方式绝对不是一个好主意。虽然这可能是一个快速修复，但从长远来看，它肯定会以模棱两可的方式伤害你。

您的问题与您发布的链接不同，他们的问题是在错误的线程上分配回调.. 在您的情况下，您的回调在正确的线程中，只是您最初提供的音频缓冲区是为空、太小或包含不适合音频播放的数据

请记住，回调的目的是在播放（即消耗）提供给音频队列的每个音频缓冲区后触发。事实上，在您启动队列后，回调没有被触发..这意味着音频缓冲区中没有任何内容可供其使用..或有意义的信息太少而无法使用..

当您手动执行此操作时，您会看到延迟 b/c 音频队列正在尝试处理您提供的空/错误缓冲区。然后您使用队列最终播放的有效数据重新提供相同的缓冲区，然后触发回调

解决方案：将您在启动队列之前放入缓冲区的数据与您手动提供的数据进行比较。我确定存在差异。如果这不起作用，请显示您的代码以进行进一步分析

# asp.net - ASP.NET 3.5 按钮控件事件处理程序

> ID：12629650
> 
> 赞同：1
> 
> 时间：2012-09-27T20:37:09.057
> 
> 标签：asp.net, .net, button

所以我有这个问题要求进行面试前筛选测试，我很确定列出的答案都不正确*。*我查了一下以确保我找不到它们中的任何一个。有人可以确认吗？

> 以下哪个事件处理程序属于 ASP.NET 按钮控件？
> 
> 1.  服务器点击
> 2.  服务器点击
> 3.  OnServerClick
> 4.  OnServer

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:39:16.280

[`ServerClick`](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlinputbutton.serverclick.aspx)是控件的事件，`HtmlInputButton`当您添加`runat=server`到 html 按钮时，您会得到该事件。

所以它是一个按钮，它是一个服务器控件。因此，它可能是正确的答案。

# php - 其他文件中定义的函数有问题

> ID：12629653
> 
> 赞同：0
> 
> 时间：2012-09-27T20:37:22.567
> 
> 标签：php, function

我的页面根本不会加载，浏览器说它以一种不加载的方式重定向。正如标题所暗示的，我认为问题在于我包含在 require_once() 中的一个 php 文件。让我告诉你：

缩略图.php：

```
<?php
if(!function_exists("makethumbnail"))
{
     //die("right before function definition");
     function makethumbnail($src,$new_name,$new_width,$new_height)
     {
          die("inside makethumbnail");
          $si = imagecreatefromjpeg($src);
          $w = imagesx($si);
          $h = imagesy($si);
          $vi = imagecreatetruecolor($new_width,$new_height);
          imagecopyresampled($vi,$si,0,0,0,0,$new_width,$new_height,$w,$h);
          imagejpeg($vi,$new_name);
     }
}
?> 
```

检查会话.php：

```
<?php
session_start();
$session_name = "forces";
$com=0;
if(!function_exists("logout"))
{
    function logout()
    {
            $_SESSION = array();
            session_destroy();
            header('Location:http://cs4.sunyocc.edu/~j.d.dancks/index.php');
    }
}
if(!isset($_SESSION['time']) || !isset($_SESSION['nick']))
{
    $com=2;
    logout();
}
else if($_SESSION['time'] < time())
{
    $com=3;
    logout();
}
//redirect back to main whatever ignore this line
?> 
```

索引.php：

```
<?php
require_once("shopsite/thumbnail.php");
require_once("shopsite/checksession.php");
die("made it past the require_once");
$con = mysql_connect('localhost','jddancks','csc255');
mysql_select_db('test',$con);
$q = mysql_query("select prod_name,image_name,type1,type2 from Product",$con) or die("its the mysql");
$row = mysql_fetch_assoc($q);
$totalRows_Recordset1 = mysql_num_rows($q);
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Welcome to the shopsite</title>
<script type="text/javascript" src="shopsite/lib/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="shopsite/lib/jquery.jcarousel.min.js"></script>
<link rel="stylesheet" type="text/css" href="shopsite/skins/ie7/skin.css" />
<script type="text/javascript">
     JQuery(document).ready(function() {
         JQuery('#mycarousel').jcarousel({
             itemLoadCallback:itemLoadCallbackFunction,
             start:1,
             auto:3,
             animation:"slow",
             wrap:"both"
         });
     });
</script>
</head>
<body>
<?php
session_start();
if(isset($_SESSION['nick']))
{
     echo "<p>Welcome, ".$_SESSION['nick']."</p>";
}
die("Made it past the first php");
?>
<h1>Welcome to the one-stop shop for your every need!</h1>
<div class="jcarousel-ie7">
<p>Browse Items:</p>
<div class="jcarousel-container">
<div class="jcarousel-clip">
<ul id="mycarousel" class="jcarousel-skin-ie7">
<?php
$cnt=1;
do
{
     $i=$row['image_name'];
     $name=preg_split("/.jpg/",$i);
     $name = "shopsite/thumb/".$name[0]."-index.jpg";
     if(!file_exists($name))
     {
          makethumbnail("shopsite/images/".$row['image_name'],$name,50,50);
     }
     echo " <li class=\"jcarousel-item-".$cnt."\"><img src=\"".$name."\" /></li>\n";
     $cnt=$cnt+1;
     if($cnt>12) die("cnt larger than 12");
}
while($row = mysql_fetch_assoc($q));
?>
</ul>
</div>
<div disabled="disabled" class="jcarousel-prev jcarousel-prev-disabled"></div>
<div class="jcarousel-next"></div>
</div>
</div>
</body>
</html>
<?php mysql_free_result($row);
mysql_close($con); ?> 
```

我想将图像插入到 jquery 轮播中，以便访问者可以浏览他们可能想要购买的项目。我从未使用过 jcarousel，所以我不知道我所拥有的是否有效，我很确定那不是问题。我想这只是你需要第二双眼睛的事情之一。thumbnail.php 中的 die 语句让我相信这是罪魁祸首，但它不会进入函数的第一行，这真的很令人困惑。我不知道 php preporcessor 是如何工作的，除了它的客户端。

# android - 实现能够接收推送通知并启动 Web 浏览器的应用程序

> ID：12629659
> 
> 赞同：0
> 
> 时间：2012-09-27T20:37:48.407
> 
> 标签：android, ios, windows-phone-7, blackberry, push-notification

实现一个简单的应用程序的最简单方法是什么，它做两件事：

*   接收推送通知（用户收件箱中的新消息），
*   在 webview 或 web 浏览器中打开我网站上的页面。

如果该解决方案可以在 iOS、Android 以及可能的其他移动系统（如 Windows Phone 和 BlackBerry 10）之间移植，那将是最好的，但如果这是唯一的方法，我对单独的解决方案感到满意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T21:02:14.600

我建议，为此任务检查[Parse apis。](https://www.parse.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T21:06:02.553

我建议使用 Phonegap (Cordova) 应用程序和 UrbanAirship 来接收通知。您可以使用它获得一个免费帐户。它也相对容易实现。

至于浏览器，我不确定你到底想要什么。你能详细说明一下，我会发表回应。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T21:06:58.983

有像[http://xtify.com/](http://xtify.com/)或[http://urbanairship.com/products/push-notifications/](http://urbanairship.com/products/push-notifications/)这样的解决方案，它们提供跨平台的一站式服务，但我不知道服务质量或哪一个会适合你，如果你选择这条路，你的一些研究是必要的。

或者您可以自己实现它，但它需要您自己的服务器。服务器将同时通知 Android 的 C2DM 和 Apple 推送服务。您必须在每个客户端上实现客户端。

对于 iPhone，这里有一个很好的设置教程[http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

对于 Android [http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html](http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html)

您在这两个服务中注册您的应用程序，然后将推送密钥发送到您的服务器。使用密钥，服务器可以通知两个平台各自的推送服务发送通知。

我无法真正帮助服务器设置，因为这不是我的专业领域，但这就是我们为我公司制作的应用程序实施推送通知的方式。

# apache - 简单的 mod_rewrite 规则不起作用

> ID：12629666
> 
> 赞同：2
> 
> 时间：2012-09-27T20:38:37.807
> 
> 标签：apache, mod-rewrite

在我的主要公共目录中，我有这个 .htaccess 文件，但是在访问时`/register`出现 404 错误。

```
Options +FollowSymlinks
RewriteEngine On
RewriteRule ^register$ register.php 
```

有了这个，我想让任何访问的人都`/register`可以使用`/register.php`. 我确定它`mod_rewrite`已启用并且`AllowOverride All`存在于我的虚拟主机文件中。

有谁知道我该如何解决这个问题？我得到的只是`The requested URL /register was not found on this server.`

虚拟主机：

```
<VirtualHost *:80>
        ServerAdmin my@email.com

        ServerName my.site.com
        DocumentRoot /home/mark/public
        <Directory />
                Options FollowSymLinks
                AllowOverride All
        </Directory>
        <Directory /home/mark/public>
                Options All MultiViews ExecCGI
                AllowOverride All
                Order allow,deny
                allow from all
        </Directory>

        ErrorLog /home/mark/logs/public_error.log
        # Possible values include: debug, info, notice, warn, error, crit,
        # alert, emerg.
        LogLevel warn
        CustomLog /home/mark/logs/public_access.log combined
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T21:08:38.047

```
 <Directory /home/mark/public>
            Options All MultiViews ExecCGI
            AllowOverride All
            Order allow,deny
            allow from all
    </Directory> 
```

您需要**关闭** [MultiViews](http://httpd.apache.org/docs/2.2/mod/mod_negotiation.html#multiviews)：

```
 Options All -MultiViews ExecCGI 
```

它搞乱了可选的内容协商。从 apache 文档：

> 如果服务器收到对 /some/dir/foo 的请求并且 /some/dir/foo 不存在，则服务器读取目录以查找所有名为 foo.* 的文件，并有效地伪造一个类型映射，其中命名所有这些文件，为它们分配相同的媒体类型和内容编码，如果客户端按名称要求其中之一。然后它选择最符合客户要求的匹配项，并返回该文档。

如果你要重写一个规则`/register`，`/register.php`你不希望 MutliViews 在它到达你的重写规则之前就搞砸了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:42:12.097

这对我有用：

> /etc/apache2/sites-enabled/000-default

```
<VirtualHost *:80>
        DocumentRoot /var/www
        <Directory />
                Options FollowSymLinks
                AllowOverride All
        </Directory>
        <Directory /var/www/>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride All
                Order allow,deny
                allow from all
        </Directory>
        ....
</VirtualHost> 
```

> /var/www/.htaccess

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_URI} ^/register$
RewriteRule ^(.*)$ register.php [NS,L] 
```

编辑：添加 DocumentRoot /var/www

# c# - 从文本框中删除特定文本

> ID：12629670
> 
> 赞同：1
> 
> 时间：2012-09-27T20:39:01.723
> 
> 标签：c#, .net

在我的应用程序中，我通过命令提示符窗口设置了一个 vpn 连接，输出将放在一个文本框中。它会自我刷新，因此当它从命令提示符获取新行时会添加一个新行。

输出将是这样的。

```
> Microsoft Windows [versie 6.1.7601] Copyright (c) 2009 Microsoft
> Corporation. Alle rechten voorbehouden.
> 
> C:\Users\...\Desktop>rasdial.exe VPN username password
> Verbinding maken met VPN...
> Gebruikersnaam en wachtwoord controleren...
> Uw computer wordt in het netwerk geregistreerd...
> Verbinding gemaakt met VPN Opdracht voltooid.
> 
> C:\Users\Helpdesk\Desktop>exit 
```

我怎样才能删除 Microsoft Windows 部分，所以我只有这个。

```
rasdial.exe VPN username password
Verbinding maken met VPN...
Gebruikersnaam en wachtwoord controleren...
Uw computer wordt in het netwerk geregistreerd...
Verbinding gemaakt met VPN Opdracht voltooid. 
```

这是我添加单独行的代码。

```
private void ConnectVPN()
    {
        CheckForIllegalCrossThreadCalls = false;
        Process CMDprocess = new Process();
        System.Diagnostics.ProcessStartInfo StartInfo = new System.Diagnostics.ProcessStartInfo();
        StartInfo.FileName = "cmd";
        StartInfo.CreateNoWindow = true;
        StartInfo.RedirectStandardInput = true;
        StartInfo.RedirectStandardOutput = true;
        StartInfo.UseShellExecute = false;
        CMDprocess.StartInfo = StartInfo;
        CMDprocess.Start();
        System.IO.StreamReader SR = CMDprocess.StandardOutput;
        System.IO.StreamWriter SW = CMDprocess.StandardInput;
        SW.WriteLine("rasdial.exe " + comboBox1.Text + " " + loginText.Text + " " + wachtwoordText.Text);
        SW.WriteLine("exit");
        string line = null;
        do
        {
            line = SR.ReadLine();
            if ((line != null))
            {
                VerbindingOutput.Text = VerbindingOutput.Text + line + Environment.NewLine;
            }
        } while (!(line == null));
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:54:59.493

直接启动 rasdial 进程，然后使用 Arguments 属性传递命令行参数：

```
StartInfo.Arguments = comboBox1.Text + " " + loginText.Text + " " + wachtwoordText.Text; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T20:55:54.850

不要将密码作为命令参数传递，因为它会引发安全问题。

您的示例中的这段代码添加了一个条件来确定一行是否不是`StartsWith`特定的字符串。

```
do
{
    line = SR.ReadLine();

    if ((line != null))
    {
        if(!line.StartsWith("Microsoft Windows", StringComparison.OrdinalIgnoreCase))
        {
            VerbindingOutput.Text = VerbindingOutput.Text + line + Environment.NewLine;
        }
    }
} while (line != null); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T21:09:11.777

为什么不像 PandaNL 所说的那样直接 shell rasdial.exe，然后将您的标准输出事件重定向到另一个函数？通过这种方式，您可以明确地观察线路上的每一行并相应地对其进行格式化，并将其附加到流编写器中。这是一些伪代码：

```
 string Executable = "C:\\*******";

            using (Process p = new Process())
            {
                // Redirect the output stream of the child process. 
                p.StartInfo.FileName = Executable;
                p.StartInfo.UseShellExecute = false;
                p.StartInfo.RedirectStandardOutput = true;  //must be true to grab event
                p.StartInfo.CreateNoWindow = true;  //false if you want to see the command window
                p.EnableRaisingEvents = true;   //must be true to grab event
                p.OutputDataReceived += p_WriteData;   //setup your output handler
                p.Start();
                p.BeginOutputReadLine();
            }

private void p_WriteData(object sender, DataReceivedEventArgs e)
    {
        if (e.Data != null)
        {
         string FixedOutput = MethodToFormatOutput(e.Data);  //do string manipulation here
          using(StreamWriter SW = new StreamWriter("C:\\output.txt",true)
            {
              SW.WriteLine(FixedOutput);
            }
        }
    } 
```

# ios - 如何在iOS中连接或断开wifi时收到通知？

> ID：12629671
> 
> 赞同：2
> 
> 时间：2012-09-27T20:39:02.550
> 
> 标签：ios, cocoa-touch, wifi, reachability

我试图让 iOS 在建立或断开 wifi 连接时通知我的应用程序。

我在 iOS 4.3.5 和 5.1 的 iPhone 和 iPad 中尝试了以下代码：

```
- (void)startWifiNotifier {
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(statusUpdated:) 
                                                 name:kReachabilityChangedNotification 
                                               object:nil];

    Reachability *wifi = [Reachability reachabilityForLocalWiFi];
    [wifi startNotifier];
    NSLog(@"Wifi status: %i", [wifi currentReachabilityStatus]);
    NSLog(@"Notifier started");
}

- (void)statusUpdated:(NSNotification *)notice {
    NetworkStatus s = [[notice object] currentReachabilityStatus];
    if(s == NotReachable) {
        NSLog(@"Wifi disconnected");
    } else {
        NSLog(@"Wifi connection established");
    }
} 
```

问题是我的回调“statusUpdated”永远不会被调用。我知道这应该按原样工作，但我尝试进出 wifi 范围（因此连接和断开连接）并打开和关闭 wifi 路由器以强制断开连接，我的回调从未被调用。

我也试过这个：

```
@private
    Reachability *wifi;
...

- (void) startTimerLog {
   wifi = [Reachability reachabilityForLocalWiFi];
   [self timerLog];
}

- (void) timerLog {
    NSLog(@"Reachability: %i", [wifi currentReachabilityStatus]);
    [self performSelector:@selector(timerLog) withObject:nil afterDelay:0.5];    
} 
```

并在相同的场景下对其进行了测试，并且效果很好。然而，这不是我需要的方法，我宁愿需要通知来调用我的回调。

我还需要做什么才能使通知程序正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-31T16:51:57.963

使用这个库[http://huytd.github.io/datatify/](http://huytd.github.io/datatify/)它非常易于使用和定制。setCallback 方法将帮助您检测连接何时更改

# python - 测试 Python 类文件对象中的未读字符

> ID：12629675
> 
> 赞同：1
> 
> 时间：2012-09-27T20:39:38.577
> 
> 标签：python

> **可能重复：**
> [在 python 中对 subprocess.PIPE 进行非阻塞读取](https://stackoverflow.com/questions/375427/non-blocking-read-on-a-subprocess-pipe-in-python)

是否可以测试 Python 类文件对象在当前读取位置之后是否有字符？

我试图保持`subprocess.PIPE`刷新到我的标准输出，所以我一直`read(1)`在上面运行。我只想阅读是否真的有什么东西可以让我得到（否则它会挂起直到出现某些东西）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T20:52:48.597

A`subprocess.PIPE`不仅仅是一个文件，它是一个实际的文件。因此，您可以[获取其文件描述符](http://docs.python.org/library/stdtypes.html#file.fileno)并将其传递给[`select.select()`](http://docs.python.org/library/select.html#select.select)或类似的函数。

# git - GitHub 和 Git 扩展 - 推送提交

> ID：12629676
> 
> 赞同：1
> 
> 时间：2012-09-27T20:39:44.470
> 
> 标签：git, visual-studio, github, git-extensions

我刚刚创建了一个 GitHub 帐户，安装了 Git Source Control Provider 和 GitExtensions 以使用 Visual Studio 工作。所有的设置都完成了，我设法将我的本地代码库推送到了 GitHub。

现在，我希望每次提交时，我的更改都会反映到我的 GitHub 帐户（基本上是推送提交）。如何配置这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-29T11:47:34.777

本身并不是一个真正的答案，但我建议不要使用这种方法，即使它在技术上是可行的。

将提交保持在本地的整个想法是，您可以使用您的代码，而不必在提交某些内容后立即将其发布到整个世界（就像 SVN 或其他集中式 VCS 一样），同时让您有机会保留代码可用状态的快照。

使用 git 并在本地提交的一个好处是您的行为将开始转变为经常提交。通过将提交和推动的行为结合在一起，您会经常因为“性能焦虑”而阻碍您的提交进度，您会知道每次提交时都会推动您的代码。

只有当你觉得你已经完成了你的工作时，你才应该将它推送到其他存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T06:00:31.503

我在 GitExtensions 中看不到这种自动推送的任何选项。
我更喜欢 git hook 方法：一个`.git/hooks/post-commit`可执行文件：

```
git push origin 
```

假设您的 git 远程是最新的，并且您当前的分支正在跟踪上游分支。

# drupal-7 - 发票的 Drupal 自定义文件类型

> ID：12629681
> 
> 赞同：0
> 
> 时间：2012-09-27T20:39:54.970
> 
> 标签：drupal-7, content-type, invoice

我有一个内容类型“发票”

我想添加一个字段`invoice_number`，例如：`ABC2012001`

*   ABC：前缀，

*   2012：每年都在变化，

*   001：发票编号（每年重置）

该字段是自动增量的。

我怎样才能做到这一点？是否可以不编程或者我必须使用钩子函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:31:31.677

您可以使用[node_presave](http://api.drupal.org/api/drupal/modules!node!node.api.php/function/hook_node_presave/7)钩子通过自定义模块执行此操作。用户只需在“invoice_number”字段中输入前缀值。在将节点保存到数据库之前，您的钩子会执行以下操作：

如果节点是“发票”类型并且尚未保存“nid == 0”

*   获取当前年份
*   获取今年的当前发票数量（来自存储变量或数据库查询）
*   更改字段值并附加年份/数字

所以类似这样的事情：

```
<?php

function mymodule_node_presave($node){
    if (($node->type == 'invoice') && ($node->nid == 0)) { //node has not been saved
        //get the current year
        $this_year = date('Y');

        if ($count = variable_get('invoice_count_'.$this_year,0)){
            //have the invoice number
        }else{
            //get the number of invoices created this year from DB
            $count_query = "SELECT COUNT(DISTINCT nid)) FROM {node} WHERE type = :type AND FROM_UNIXTIME(created,'%Y') = :year";
            $count = db_query($count_query,array(':type'=>'invoice',':year'=>$this_year))->fetchField();
        }

        $invoice_count = $count;
        //append number with 0's?
        $invoice_count = str_repeat('0',(3-strlen($invoice_count))).$invoice_count;
        //alter the field value and append the year.number
        $node->field_invoice_number['und'][0]['value'].=$this_year.$invoice_count;
        //save the increment
        variable_set('invoice_count_'.$this_year,($count+1));
    }

} 
```

# ios - 从照片库与 iPhone 相机裁剪 UIImage

> ID：12629683
> 
> 赞同：1
> 
> 时间：2012-09-27T20:40:01.133
> 
> 标签：ios, uiimage, core-graphics, image-manipulation, cgimage

我可以从 iPhone 的照片库中裁剪图像，这样没有问题：

```
CGRect topRect = CGRectMake(0, 0, image.size.width, image.size.height / 2);
CGImageRef topCroppedCGImageRef = CGImageCreateWithImageInRect(image.CGImage, 
                                                               topRect);
UIImage *croppedImage = [[UIImage alloc] initWithCGImage:topCroppedCGImageRef];
CGImageRelease(topCroppedCGImageRef); 
```

但是，当图像来自相机时，这不起作用。具体来说，裁剪后的图像被旋转，裁剪部分与预期不符。在阅读之后，听起来这个问题是比较普遍的。但是，我尝试了各种代码修复，但效果不佳（仍然存在旋转、意外裁剪甚至失真问题）。所以我想真正理解**为什么**上述裁剪不仅仅适用于来自相机的图像。

**为什么上述裁剪方法不适用于来自 iPhone 相机的图像？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:49:20.070

[正如这篇著名的帖子以正确的方式调整 UIImage 的大小](http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/)所指出的，这是因为您*遗漏了诸如 EXIF 方向支持之类的功能，这是处理 iPhone 相机拍摄的照片时的绝对必要条件*。

默认情况下（纵向拍摄的照片），图像的[EXIF 方向](http://www.impulseadventure.com/photo/exif-orientation.html)标志 = 6，这意味着图像逆时针旋转 90 度：

```
$ identify -format "%[EXIF:orientation]" myimage.jpg 
6 
```

# html - HTML 中的 div 标签相互重叠

> ID：12629687
> 
> 赞同：0
> 
> 时间：2012-09-27T20:40:20.150
> 
> 标签：html, css, web

我正在尝试创建我的个人 HTML 网站（我是网站开发的新手）。但是我遇到了两个最近的 div 标签相互重叠并且不明白为什么的问题。这是代码，您可以自己查看：

```
<!DOCTYPE html>
<html>
<head>
    <title>My site</title>
    <link rel="icon" type="image/png" href="favicon.png"  />
    <link rel="stylesheet" type="text/css" href="stylesheet.css" /> 
</head>
<body style="background-color: #759CE0;">
    <div id="wrapper">
        <div id="header">
            <div style="background-color: #708EE0; width: 100%; height: 30px; display: block;" />
            <div>
                <h1 id="segoeuilight">Welcome to my blog</h1>
                <h3 id="smalltip">News and thoughts</h3>
            </div>
        </div>
        <div id="container">
            <div id="left" />
            <div id="right" />
            <div id="center" />     
        </div>
        <div id="footer" /> 
    </div>
</body>
</html> 
```

和样式表：

```
@font-face
{
    font-family: 'Segoe UI Light';
    src: url('fonts/segoeuil.ttf');
}
@font-face
{
    font-family: 'Segoe UI';
    src: url('fonts/segoeui.ttf');
}
h1#segoeuilight
{
    font-family: 'Segoe UI Light';
    font-weight: normal;
    color: #FFFFFF;
    padding-left: 10px;
    height: 20px;
}
h3#smalltip
{
    font-family: 'Segoe UI';
    font-weight: normal;
    color: #FFFFFF;
    padding-left: 10px;
}
div#header 
{
    height: 20%;
}
div#container 
{
    min-width:800px;
}
div#center 
{
    margin:0px 200px 0px 200px;
}
div#left 
{
    float:left; 
    width:200px;
}
div#right 
{
    float:right; 
    width:200px;
}
div#footer 
{
    height:100px;
}
div#wrapper
{
    width: 800px; /* set to desired width in px or percent */
    text-align: left; /* optionally you could use "justified" */
    border: 0px; /* Changing this value will add lines around the centered area */
    padding: 0;  
    margin: 0 auto;
    background-color: #8D0087;
} 
```

这是我得到的结果： [http ://www.freeimagehosting.net/h11uc](http://www.freeimagehosting.net/h11uc)

“标题” div 中的 div 相互重叠。但我想先创建矩形，然后打印一些文本。我的代码有什么问题？顺便说一句，我使用 Chrome 浏览器，但 IE9 显示相同的结果。

对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T20:44:25.090

出于某种原因，您不能编写`<div>`像`<div />`. 改为使用`<div></div>`。看到这个小提琴：

[http://jsfiddle.net/MzUtA/](http://jsfiddle.net/MzUtA/)

# jquery - 如何向 jQuery 中的现有扩展函数添加方法？

> ID：12629689
> 
> 赞同：1
> 
> 时间：2012-09-27T20:40:31.177
> 
> 标签：jquery

如何在 jQuery 中扩展现有的对象方法？

例如，我正在使用[jqBarGraph](http://workshop.rs/jqbargraph/)。现在我想给`addGrid()`它添加一个函数。我在想我会这样做：

```
(function($) {
  $.fn.jqBarGraph.addGrid = function(){
    var o = this;
    // do something with 'o'
    return o;
  }
})(jQuery); 
```

...但是当我打电话时`$('#chart').jqBarGraph(options).addGrid();`——我得到了错误：

**`Uncaught TypeError: Cannot call method 'addGrid' of undefined`**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T20:46:09.333

您正在向函数添加一个属性，因此您实际上只能访问它，例如

```
$('#chart').jqBarGraph.addGrid(); 
```

这不是你想要的。调用时似乎`jqBarGraph`没有返回任何内容。您必须像这样自己修补函数：

```
(function(old) {
  $.fn.jqBarGraph = function() {
    old.apply(this, arguments);  // call the actual function

    // return something
    return {
      addGraph: function() { ... }
    };
  };

  $.fn.jqBarGraph.defaults = old.defaults;  // restore properties
})($.fn.jqBarGraph); 
```

# inheritance - Aspectj 项目在 Eclipse 中编译时不会在终端上编译

> ID：12629690
> 
> 赞同：0
> 
> 时间：2012-09-27T20:40:37.603
> 
> 标签：inheritance, command-line, compiler-errors, aspectj

我是使用 aspectj 的新手，如果这是一个非常简单的问题，我感到非常抱歉。但即使经过几天的互联网搜索，我也无法解决问题。我有一个使用 Eclipse 创建的 aspectj 项目。它在 Eclipse 中完美运行和编译。我还可以通过 Eclipse 创建一个有效的可运行 jar。
不幸的是，我无法在命令行上编译相同的项目。这是编译错误：

```
egeyar@paris:~/workspace/FirstAspectJProject/src/hello$ ajc World.aj HelloWorld.java 
/home/egeyar/workspace/FirstAspectJProject/src/hello/World.aj:75 [error] Type mismatch: cannot convert from int to Object  
objList[i]=list[i]; //copy to object list in order to use Arrays.deepToString
           ^^

/home/egeyar/workspace/FirstAspectJProject/src/hello/World.aj:85 [error] Type mismatch: cannot convert from char to Object  
objList[i]=list[i];//copy to object list in order to use Arrays.deepToString
           ^^

/home/egeyar/workspace/FirstAspectJProject/src/hello/World.aj:96 [error] Type mismatch: cannot convert from byte to Object  
objList[i]=list[i];//copy to object list in order to use Arrays.deepToString
           ^^

/home/egeyar/workspace/FirstAspectJProject/src/hello/World.aj:107 [error] Type mismatch: cannot convert from short to Object  
objList[i]=list[i];//copy to object list in order to use Arrays.deepToString
           ^^

/home/egeyar/workspace/FirstAspectJProject/src/hello/World.aj:118 [error] Type mismatch: cannot convert from long to Object  
objList[i]=list[i];//copy to object list in order to use Arrays.deepToString
           ^^

/home/egeyar/workspace/FirstAspectJProject/src/hello/World.aj:129 [error] Type mismatch: cannot convert from float to Object  
objList[i]=list[i];//copy to object list in order to use Arrays.deepToString
           ^^

/home/egeyar/workspace/FirstAspectJProject/src/hello/World.aj:140 [error] Type mismatch: cannot convert from double to Object  
objList[i]=list[i];//copy to object list in order to use Arrays.deepToString
           ^^

/home/egeyar/workspace/FirstAspectJProject/src/hello/World.aj:151 [error] Type mismatch: cannot convert from boolean to Object  
objList[i]=list[i];//copy to object list in order to use Arrays.deepToString
           ^^

8 errors 
```

如果有人能给我至少一个提示，我会很高兴。在 eclipse 中接受代码但在命令行中接受代码的原因可能是什么？它是一个类路径错误（我对此一无所知），还是因为一些编译器版本问题等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:59:11.153

您可能在 eclipse 和系统（bash）上使用不同的编译器。

编译错误还谈到类型不匹配，这意味着该方法接受了错误的对象类。

根据您的代码，有几种解决方案，但如果它在 eclipse 中编译，请使用它。

aspectJ 文档建议不要使用 .aj 如果您不需要，所以我也会尝试更改扩展名。

和这个 [错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=384398)

# mongodb - 查询 MongoDB 中的数组数组

> ID：12629692
> 
> 赞同：54
> 
> 时间：2012-09-27T20:40:41.340
> 
> 标签：mongodb, multidimensional-array

说，我有这样的文件..

```
"ID" : "fruit1",
"Keys" : [["apple", "carrot", "banana"]] 
```

如何查询 Keys =“carrot”。以下语法均无效。

```
db.myColl.results.find({ "Keys" : "carrot" });
db.myColl.results.find({ "Keys" : [["carrot"]] }); 
```

以下工作虽然有效，但没有帮助。

```
db.myColl.results.find({ "Keys" : [["apple", "carrot", "banana]]}); 
```

任何指向此查询的指针都会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-09-28T08:05:34.510

有趣的问题，这可以解决问题

```
 db.multiArr.find({'Keys':{$elemMatch:{$elemMatch:{$in:['carrot']}}}}) 
```

`$elemMatch`用于检查数组中的元素是否与指定的匹配表达式匹配。所以嵌套`$elemMatch`将深入嵌套数组

测试数据    

```
db.multiArr.insert({"ID" : "fruit1","Keys" : [["apple", "carrot", "banana"]]})
db.multiArr.insert({"ID" : "fruit2","Keys" : [["apple", "orange", "banana"]]})

db.multiArr.find({'Keys':{$elemMatch:{$elemMatch:{$in:['carrot']}}}})
{ "_id" : ObjectId("506555212aeb79b5f7374cbf"), "ID" : "fruit1", "Keys" : [ [ "apple", "carrot", "banana" ] ] }

db.multiArr.find({'Keys':{$elemMatch:{$elemMatch:{$in:['banana']}}}})

{ "_id" : ObjectId("506555212aeb79b5f7374cbf"), "ID" : "fruit1", "Keys" : [ [ "apple", "carrot", "banana" ] ] }
{ "_id" : ObjectId("5065587e2aeb79b5f7374cc0"), "ID" : "fruit2", "Keys" : [ [ "apple", "orange", "banana" ] ] } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-18T10:53:50.513

如果要查找第一个位置数据的数组，请使用 0 作为参考索引来获取嵌套数组中的数据。

```
db.getCollection('routes').find({"routeId" : 12,'routes._id':ObjectId("598da27a713f3e6acd72287f"),'routes.0.stops.0.orders.0._id':ObjectId("598da27a713f3e6acd722887")}) 
```

# javascript - 防止小书签生成多个事件侦听器

> ID：12629704
> 
> 赞同：1
> 
> 时间：2012-09-27T20:41:36.933
> 
> 标签：javascript, iframe, bookmarklet

我目前正在开发一个打开 iframe 并设置 postMessage 来回通信的书签。这一切都很好。但是，似乎因为小书签是作为匿名函数加载的，如果我在一个页面上多次运行小书签，听众就会成倍增加。

是否有某种方法可以跟踪这些 addEventListeners，以免它们加倍？

我需要在匿名函数之外定义 rp_receive_message 吗？

下面是代码示例：

```
var rp_receive_message = function (e) {
    var response = e.data;
    console.log("got message with "+ response);
  };

if (window.addEventListener) {
  window.addEventListener('message', rp_receive_message, false);
} else {
  window.attachEvent('onmessage', rp_receive_message);
}

var s1 = window.document.createElement('iframe');

s1.setAttribute('src', 'http://mydomain.com/iframe.html');
s1.setAttribute('id', 'testiframe');
s1.setAttribute('width', '700');
s1.setAttribute('height', '550');
s1.setAttribute('frameBorder', '0');
s1.setAttribute('onload', 'this.contentWindow.postMessage(window.location.href, "http://mydomain.com/iframe.html");');

document.getElementById('container').appendChild(s1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:22:59.537

可能这将解决问题：

```
window.onmessage = rp_receive_message; 
```

正如您所建议的，下面的代码本身可能就足够了。我不知道 addEventListener 和 attachEvent 是否会多次添加相同的函数，但如果它们会，我一点也不感到惊讶。我建议只是测试它。

```
window.rp_receive_message = function(){...} 
```

如果你不喜欢这两种解决方案，你必须设置一个全局变量，它看起来几乎没有什么不同或比上面的要好得多。全局可以是一个简单的布尔值，用于检查事件是否已附加，也可以是您自己更新的附加事件列表。AFAIK，我很确定，没有本地 JS 解决方案来获取事件监听器列表已附加到特定事件。jQuery 等库维护列表并让您阅读它们；并且可能有其他技术可以优雅地解决您的一般问题。

# c# - 在数据库中保存表格

> ID：12629705
> 
> 赞同：0
> 
> 时间：2012-09-27T20:41:45.630
> 
> 标签：c#, sql-server, winforms

我想知道如何从我刚刚保存的 SQL Server 紧凑型数据库中检索数据并将其插入到新创建表单的文本框中。源代码不完整，我只是想节省空间。连接很好，我可以在实际程序中将数据添加到数据库中。我只是想知道如何检索它并将其放入新创建的表单的文本框中。这是在 WinForms 中完成的。谢谢！

```
 public void b1_Click(object sender, EventArgs e)
    {
        SqlCeCommand command = new SqlCeCommand("INSERT INTO tbl1(Name) VALUES (@Name, @LastName)", conn);
        command.Parameters.AddWithValue("@Name", t1.Text);

        command.ExecuteNonQuery();
    }

     private void b2_Click(object sender, EventArgs e)
     {    
        Form form2 = new Form();        
        form2.Show();

       t3.Location = new System.Drawing.Point(0, 35);
       t3.Size = new System.Drawing.Size(85, 15);
       //access database and insert data into textbox
       t3.Text = ?
       form2.Controls.Add(t3);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:48:11.357

如有疑问，请从官方文档开始。在 msdn 上查看此示例：http: [//msdn.microsoft.com/en-us/library/aa226134 (v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa226134(v=sql.80).aspx)

他们在那里展示了几个 SQL 命令，如 SELECT、INSERT 和 UPDATE。您知道如何插入，因此您现在对 SELECT 部分感兴趣。看看他们如何使用数据阅读器并尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:49:41.357

这是一个示例： http: [//msdn.microsoft.com/en-us/library/aa983340](http://msdn.microsoft.com/en-us/library/aa983340(v=VS.80).aspx) (v=VS.80).aspx 请同时查看 codeplex.com 以获取其他示例/项目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T20:55:17.783

好吧，从数据库中获取值并不难，这样的事情应该适合您的需求：

```
SqlCeCommand command = new SqlCeCommand("SELECT * FROM tbl1(Name) WHERE name = @Name AND last_name = @LastName", conn);
command.Parameters.AddWithValue("@Name", "Hank");
command.Parameters.AddWithValue("@Name", "Hill");
SqlDataReader reader = command.ExecuteReader();

t1.Text = reader.GetString(0);
t2.Text = reader.GetString(1); 
```

# excel - Excel VBA - 我需要将一系列数据粘贴到行数据的末尾。

> ID：12629706
> 
> 赞同：0
> 
> 时间：2012-09-27T20:41:51.130
> 
> 标签：excel, vba

即：我在 E2:W2 中有数据，我想将其粘贴到 E:W，具体取决于 A 列中有多少行。每次运行宏时，行数都会不同。它可以是 3 或 2000 行

此外，可能是 1，因此不需要复制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:52:05.850

像这样的东西会一直复制 E2:W2 直到 A 列中没有填充的单元格

```
Sub CopyEW

if cells(rows.count,1).end(xlup).row>2 then _
    range("E2:W2").copy range("E2:W2").resize(cells(rows.count,1).end(xlup).row)

end if

end sub 
```

# ant - 使用命令行运行 sonar ant 任务 - ClassDefNotFoundError

> ID：12629709
> 
> 赞同：1
> 
> 时间：2012-09-27T20:41:57.800
> 
> 标签：ant, sonarqube, pmd

我正在尝试在 Sonar 中集成自定义 PMD 任务，我目前设法与 Sonar PMD 插件一起使用。

我当前的问题是使用命令行运行 sonar ant 任务。

在我的 Eclipse 工作区中，我在 Eclipse 中添加了额外的类路径条目以供 Ant 运行，它工作得很好。但是当我在命令行中运行它时，无论我如何为 ant 传递罐子，它似乎都没有在 ClassLoader 中使用它。

这对我的项目来说是一个大问题，一旦我无法将任务放在我的持续集成服务器中运行。

我目前正在传递包含使用属性 sonar.libraries 所需的所有类的 jar。

我得到的错误是：

```
build.xml:121: java.lang.NoClassDefFoundError: net/sourceforge/pmd/AbstractJavaRule
       at java.lang.ClassLoader.defineClass1(Native Method)
       at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
       at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
       at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
       at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
       at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
       at java.net.URLClassLoader$1.run(URLClassLoader.java:197) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T07:30:27.747

“sonar.libraries”仅引用应用程序的依赖项，而不是 Sonar 执行上下文的依赖项。

如果您想开发 Sonar 将使用的自定义 PMD 任务，请查看此示例插件：[https ://github.com/SonarSource/sonar-examples/tree/master/plugins/sonar-pmd-extension-插入](https://github.com/SonarSource/sonar-examples/tree/master/plugins/sonar-pmd-extension-plugin)

*   你只需要构建插件的 JAR
*   把它放在你的“/extensions/plugins”文件夹中
*   并重新启动声纳

# android - Android自动布局方法

> ID：12629714
> 
> 赞同：1
> 
> 时间：2012-09-27T20:42:19.063
> 
> 标签：android

我有一个相对布局

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/ivLogo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/ic_launcher" />

    <Button
        android:id="@+id/b2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="Button" />

    <Button
        android:id="@+id/b1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@+id/b2"
        android:text="Button" />

    <TextView
        android:id="@+id/tvName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginLeft="21dp"
        android:layout_toRightOf="@+id/ivLogo"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

其中包含一个 imageview、textview 和两个按钮，我想要的是制作一个要在此布局中自动填充的信息列表 .. 嗯，就像在 java 文件“Heart.png”中制作一样，心脏，www。 heart.com, 69552874 .. 然后当我启动应用程序时，我在 java 类中输入的信息进入活动 .. “heart.png”进入 ivLogo imageview，www.heart.com 进入 b1 按钮， 像这样 ..

我可以使用 xml 来实现我想要的，但这需要很长时间，而且速度会很慢，因为会有很多 imageviews .. 我想用他们的 logo 和 name 和 num 列出一个东西。和网站，就像java可以为每个信息制作一个新的相对布局..

就像我写

```
"Heart.png", heart1, www.heart.com, 69552874
"Heart.png", heart2, www.heart.com, 69552874
"Heart.png", heart3, www.heart.com, 69552874 
```

我在应用程序中看到每个心脏 1,2 和 3 的 3 个相对布局 .. 我想要一种方法来做到这一点，而不是为每个心脏使用 xml 来创建一个新的相对布局

没有像 makenewLayout 之类的东西......？

抱歉花了很长时间，两个字的提示对我来说会很好<3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:50:25.350

是的，您可以在代码中执行此操作。

```
RelativeLayout layout = new RelativeLayout(this);
ImageView iv = new ImageView(this);
iv.setId(ivid);
....
....
TextView tv = new TextView(this);
tv.setId(tvid);
tv.setText("My text");
...
layout.addView(iv);
layout.addView(tv);
setContentView(layout); 
```

将其放入一个函数中，并为各种图像、文本视图等调用该函数。

# actionscript-3 - 如何在 AS3 中从字符串数组中设置图像源？

> ID：12629716
> 
> 赞同：-1
> 
> 时间：2012-09-27T20:42:30.457
> 
> 标签：actionscript-3, actionscript

我只需要知道如何在它`newImage.source = "asset/%myArray%";`上面的数组中设置它的源。我确信有一个简单的解决方案。我只是不确定如何在谷歌上表达这个问题......

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" applicationComplete = "init()">
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>

<fx:Script>
    <![CDATA[

        //Gabe Dougherty
        //n221
        //9-27-12

        import mx.controls.Image;

        //array of movies
        public var myArray:Array = ["batman.jpg","cabin.jpg","christmasVaction.jpg","inception,jpg"];

        //init function
        public function init():void{

            //loops 4 times
            for(var i:Number = 0; i < myArray.length; i++){

                var arrayEntry:String = myArray[i];

                //makes new image
                var newImage:Image = new Image();

                //sets the image source for each image
                newImage.source = "asset/%myArray%";

                //adds the image to the stage
                grpMovies.addElement(newImage);
            }
        }

    ]]>
</fx:Script>
<s:HGroup id="grpMovies" x="430" y="61" width="200" height="200">
</s:HGroup>
</s:Application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T21:57:14.260

假设您的图像存在，请`asset/`尝试以下操作：

```
newImage.source = "asset/" + arrayEntry; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T21:57:37.423

将 for 循环中的代码修改为：

```
newImage.source = "asset\\" + myArray[i]; 
```

使用`Strings`包含路径时，您最好使用`\\`标志。

# ruby-on-rails - 给定一个对象，形成一个包含 100 个项目的查询。如何在无需重新查询数据库的情况下找到对象中的项目？

> ID：12629719
> 
> 赞同：1
> 
> 时间：2012-09-27T20:43:03.297
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activemodel

给定一个像联系人这样的对象：

```
Contact.rb (id, fname, lname, key_tag)
@contacts = Contacts.where(:user_id => @user.id) 
```

鉴于@contacts 在该数据库查询中返回了 1000 条记录。然后我如何获取/查看@contacts 中是否存在与给定'key_tag'匹配的对象。

我试过了：

```
@contacts.where(:key_tag => 'def12') 
```

但这需要数据库，这正是我想要避免的。想法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:59:24.753

你所拥有的是一个关系。因此，添加另一个 where 会更改关系并查询该数据。它应该被延迟加载。所以在你的代码中

```
Contact.rb (id, fname, lname, key_tag)
@contacts = Contacts.where(:user_id => @user.id) 
```

如果您不触摸@contacts，它甚至不应该击中数据库。但是，一旦您尝试从中获取数据，它将被执行并返回数据。如果要显示所有这些，可以使用#all 之类的方法将它们作为数组返回，然后使用 Array#select 进行搜索。根据系统和/或您的数据库的速度，数据库进行选择可能更有效。

```
@contacts = Contacts.where(:user_id => @user.id).all 
@contacts_with_key = @contacts.select { |c| c.key_tag == 'def12' } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:58:27.750

尝试[Enumerable#find_all](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-find_all)

```
@contacts.find_all {|a| a[:key_tag] == 'def12'} 
```

或者，如果您只想找到第一个（假设 key_tag 是唯一的）

```
@contacts.find {|a| a[:key_tag] == 'def12'} 
```

务必：

```
include Enumerable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T20:53:39.687

您可以使用[Enumerable find 方法](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-find)：

```
@contacts.find {|c| c.key_tag == 'def12'} 
```

# asp.net-mvc-4 - MVC 4 路由：由于 api\controller\action\id 和 api\controller\id 导致的多重匹配错误

> ID：12629720
> 
> 赞同：1
> 
> 时间：2012-09-27T20:43:15.513
> 
> 标签：asp.net-mvc-4, asp.net-mvc-routing

我正在尝试设置路由配置，但出现异常“找到与请求匹配的多个操作：”

当我转到 /api/Devices/{id} 时出现错误

我知道罪魁祸首方法——GetParts。为什么它仍然作为控制器/ID 的可能匹配项触发？如何让它停止，或者只应用 get 方法？

```
 public Devices Get(int id)
    {
        return Uow.Distribution.Devices.GetById(id);
    }

    [ActionName("GetParts")]
    public IEnumerable<DeviceParts> GetParts(int id)
    {
        return Uow.Distribution.Devices.GetParts(id);
    } 
```

我的路线

```
 routes.MapHttpRoute(
            name: ControllerOnly,
            routeTemplate: "api/{controller}"
            );

        routes.MapHttpRoute(
            name: ControllerAndId,
            routeTemplate: "api/{controller}/{id}",
            defaults: null,
            constraints: new { id = @"^\d+$" }
        );

        routes.MapHttpRoute(
            name: ControllerAction,
            routeTemplate: "api/{controller}/{action}"
        );

        routes.MapHttpRoute(
            name: ControllerActionAndId,
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional },
            constraints: new { id = @"^\d+$" }
        ); 
```

谢谢

# scala - scala中使用递归的硬币兑换算法

> ID：12629721
> 
> 赞同：18
> 
> 时间：2012-09-27T20:43:15.793
> 
> 标签：scala, scala-2.9

我正在尝试使用递归在 Scala 中编写硬币找零问题。我写的代码如下。

```
def countChange(money: Int, coins: List[Int]): Int = {
  def ways(change: List[Int], size: Int, capacity: Int): Int = {
    if(capacity == 0) 1
    if((capacity < 0) || (size <= 0)) 0

    //println and readLine to check and control each recursive call.

    println("calling ways(",change, change.length-1, capacity,") + ways(",change,   change.length, capacity - change(change.length - 1),")")
    readLine()
    //

    ways(change, change.length-1, capacity) + ways(change, change.length, capacity - change(change.length - 1))
  }
  ways(coins, coins.length, money)
} 
```

在运行代码时，它不会终止并继续调用第一个递归调用。我哪里错了？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2014-11-01T06:04:10.540

漂亮又简单

```
def countChange(money: Int, coins: List[Int]): Int = {
  if(money == 0)
    1
  else if(money > 0 && !coins.isEmpty)
    countChange(money - coins.head, coins) + countChange(money, coins.tail)
  else
    0
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-06-27T15:19:55.487

这是我的实现：我已经测试过了，它工作正常

```
def countChange(money: Int, coins: List[Int]): Int = {

  def count(capacity: Int, changes: List[Int]): Int = {
    if (capacity == 0)
      1
    else if (capacity < 0)
      0
    else if (changes.isEmpty && capacity >= 1)
      0
    else
      count(capacity, changes.tail) 
        + count(capacity - changes.head, changes)
  }

  count(money, coins.sortWith(_.compareTo(_) < 0))
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-11-06T04:25:36.797

只是另一种解决方案

```
def countChange(amount: Int, coins: List[Int]): Int = coins match {
  case _ if amount == 0 => 1
  case h :: t if amount > 0 => countChange(amount - h, h :: t) + countChange(amount, t)
  case _ => 0
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-09-27T20:50:12.607

简单地声明一个值不会让 Scala 返回它。您要么需要明确的退货，要么必须是最后一项。因此：

```
if (capacity == 0) return 1 
```

或者

```
if (capacity == 0) 1
else if (...)
else { ... } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-12-14T13:38:40.490

嘿，我只是认为不仅要查看数量还要查看它们的列表会更好，所以放在上面的示例之上，例如：

```
def moneyChanges(money: Int, coins: List[Int]) : Option[List[Seq[Int]]]= {
  var listOfChange=List[Seq[Int]]()
  def changeMoney(capacity: Int, changes: List[Int], listOfCoins: Option[Seq[Int]]): Int = {
    if (capacity == 0) {
      listOfChange = listOfCoins.get :: listOfChange
      1
    } else if (capacity < 0)
      0
    else if (changes.isEmpty && capacity >= 1)
      0
    else {
      changeMoney(capacity, changes.tail, listOfCoins) +
      changeMoney(capacity - changes.head, changes, 
      Some(changes.head +: listOfCoins.getOrElse(Seq())))
    }
  }

  changeMoney(money, coins.sortWith(_.compareTo(_) < 0), None)
  Some(listOfChange)
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-29T06:08:57.287

这是一种DP方法，可以减少递归方法中的大量重新计算

```
object DP {
  implicit val possibleCoins = List(1, 5, 10, 25, 100)
  import collection.mutable.Map

  def countChange(amount: Int)(implicit possibleCoins: List[Int]) = {
    val min = Map((1 to amount).map (_->Int.MaxValue): _*)
    min(0) = 0
    for {
      i <- 1 to amount
      coin <- possibleCoins
      if coin <= i && min(i - coin) + 1 < min(i)
    } min(i) = min(i-coin) + 1
    min(amount)
  }

  def main(args: Array[String]) = println(countChange(97))
} 
```

看[DP从新手到高级](https://www.topcoder.com/community/data-science/data-science-tutorials/dynamic-programming-from-novice-to-advanced/)算法

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-23T11:01:23.647

Below code is similar to one of the above example except I am using match case instead of if else

```
def countChange(money: Int, coins: List[Int]): Int = {
    def change(m: Int, coinList: List[Int], count: Int): Int =
      m match {
        case _ if m < 0 => count
        case _ if coinList.isEmpty => {
          m match {
            case 0 => count + 1
            case _ => count
          }
        }
        case _ => change(m, coinList.tail, count) + change(m - coinList.head, coinList, count)
      }
    change(money, coins, 0)
  } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-09T17:16:48.597

这是我的代码：它没有经过优化，但适用于所有测试用例。

这个想法是从 money 中减去列表中的第一个硬币，直到它变为 0。一旦变为 0，它将返回 1，这意味着一个解决方案是可能的。要添加来自不同递归的所有解决方案，我使用了`foldLeft`.

（使用 迭代列表`foldLeft`，所以首先进入 1，然后再次进入递归并迭代 (1, 2) 列表）

```
 [4, (1, 2)].  
             /(1 as cn)       \ (2 as cn)
            [3, (1, 2)].                 [2, (2)]
         /(-1)       \(-2)                \
      [2, (1, 2)].     [1, (2)].          [0, (2)]   
       /.(-1)    \(-2) 
     [1, (1, 2)].   [0, (2)]
      /. (-1)  \(-2)
    [0, (1, 2)].  [-1, (2)] 
```

```
def countChange(money: Int, coins: List[Int]): Int = coins.foldLeft(0)((accum, cn) =>
  (money, cn) match {
    case (money, _) if money < 0 => 0
    case (0, _) => 1
    case (curr_money, curr_coin) =>
      val (before_curr_coin, after_curr_coin) = coins.span(_ != curr_coin)
      accum + countChange(curr_money - curr_coin, after_curr_coin)
  }) 
```

# actionscript-3 - Flex 3：使用哪些组件来构建自定义视频栏（如 Youtube 播放器）？

> ID：12629723
> 
> 赞同：0
> 
> 时间：2012-09-27T20:43:41.720
> 
> 标签：actionscript-3, apache-flex, video, actionscript, flex3

我需要开发一个自定义的 FLV 视频播放器，它具有一些功能，例如 Youtube 的播放器：带有加载和播放信息的“双”进度条，以及单击它来浏览视频的能力。我应该使用哪些组件来完成此操作？也许2个进度条彼此重叠？如果是这样，那么我如何单击它来导航到视频的某个部分？

提前致谢！

# encryption - 加解密android扩展文件

> ID：12629724
> 
> 赞同：4
> 
> 时间：2012-09-27T20:43:44.337
> 
> 标签：encryption, apk, pack, expansion

我已在 Google Play 上成功上传并发布了我的 android app + apk 扩展文件（格式为 .obb 但实际上是 .zip）。我想为它设置一些保护。有没有办法在不使用 zip4j 等外部 jar 类的情况下实现这一目标？

在我的 obb 文件中，我有一些视频（.mp4），我需要使用我的媒体播放器来阅读它。我想这样做，以便只有我的媒体播放器可以读取 obb 文件。

谢谢。

# python - Python 中的 AI 工具入门

> ID：12629725
> 
> 赞同：1
> 
> 时间：2012-09-27T20:43:54.413
> 
> 标签：python, artificial-intelligence

我想开始在 Python 中使用 AI 工具。我查看了一些项目，但我发现他们的示例因我有限的经验等而令人生畏。例如，我想构建一种方法来比较两个 html 表并构建一些东西，使我能够确定这些表是否描述了相同的概念。现在我正在使用蛮力方法执行此操作，例如我有一组特定类型的已知表。我找到并提取所有行标签并创建一组独特的行标签。然后我取一个新表并将新表中的行标签与集合中的行标签进行比较，如果行标签的交集足够大，我将其声明为该特定类型的表。

虽然我的阅读表明我应该能够做一些不那么机械和更巧妙的事情，但我正在努力如何开始。

任何人都可以指出资源的方向，这些资源具有使用 AI 工具解决特定问题的可访问示例。例如，假设我在文档中遇到一个表格，我想查看该表格是否是我已经识别的几种表格之一。如何通过示例表和候选表进行检查。如何指定应考虑的表的属性？

当我查看 AI 资源的文档和示例时，我发现它们太笼统了，以至于我什至不知道如何开始。

我在阅读常见问题解答后添加了上述内容，我认为这是一个公平的问题。我不想让某人编写 pyBrain 代码来阅读我的示例表，我想找到其他人使用过它的案例或类似的东西，以便我可以研究他们的代码。

谢谢

关闭后我正在编辑它。Q 上的流量似乎是相关的。NLTK 是一个很好的起点。在发现这本书将成为一个很好的资源后，我从 iTunes 获得了该书的软拷贝。如果您需要在购买前扫描这本书，整本书都是在线的[NLTK Book](http://nltk.googlecode.com/svn/trunk/doc/book/book.html)但是如果您认为这本书有用，请购买。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T22:04:27.090

David Robinson 建议使用朴素贝叶斯分类器来解决您的问题。这是个好建议。查看[nltk.classify](http://nltk.org/api/nltk.classify.html#module-nltk.classify)模块以了解 NB 分类器等的实现。

# c++ - CFile::modeCreate 不像宣传的那样工作

> ID：12629732
> 
> 赞同：1
> 
> 时间：2012-09-27T20:44:25.777
> 
> 标签：c++, visual-studio-2010, mfc

```
CFile   file;

CFileException fe;

if (file.Open(strPath, CFile::modeCreate | CFile::modeReadWrite | CFile::typeBinary, &fe) )
{
} 
```

这行不通。strPath 提供的文件路径已经存在，但它不会打开此文件并返回错误代码 5。如果我删除了`CFile::modeCreate`标志，则文件打开正常。文档说如果文件已经存在，'CFile::modeCreate' 将附加到它并将其截断为零，但实际上它从来没有首先打开文件。我的电话有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T21:01:55.570

我解决了这个问题。问题是该文件设置了“仅就绪”属性。我在打开它之前将其更改为正常状态并修复了它。

```
SetFileAttributes(strPath, FILE_ATTRIBUTE_NORMAL); 
```

# perl - 删除文件夹中的所有 *.jpg

> ID：12629737
> 
> 赞同：2
> 
> 时间：2012-09-27T20:44:54.873
> 
> 标签：perl, cgi, cgi-bin

如何删除仅具有 .jpg 扩展名的临时文件夹中的文件。

这是我尝试过的；

```
unlink("../httpdocs/Temp/*.jpg); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-27T20:46:45.340

您需要将 glob 函数应用于模式，例如：

```
unlink glob "../httpdocs/Temp/*.jpg"; 
```

这在[unlink](http://perldoc.perl.org/functions/unlink.html)和[glob](http://perldoc.perl.org/functions/glob.html)文档中有介绍。Unlink 本身需要一个要处理的文件列表。glob 函数将引用文档：

> 在列表上下文中，返回一个（可能为空的）EXPR 值的文件名扩展列表，例如标准的 Unix shell /bin/csh 会做的事情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-27T20:58:03.977

马丁克莱顿给出了一个很好的答案。但是，为失败的文件删除提供适当的警告可能是一个好主意，在这种情况下，循环比使用列表形式更好`unlink`：

```
unlink or warn "$_: $!" for glob "../httpdocs/Temp/*.jpg" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T20:48:12.720

你可以试试这个..你需要`glob`用于删除文件..

```
chdir "../httpdocs/Temp"
unlink glob "*.jpg" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-30T04:51:14.407

我建议在 while 循环（标量上下文）中操作，因为在列表上下文中使用 glob 会增加内存消耗，具体取决于目录的数量。

```
while( my $dentry = <../httpdocs/Temp/*.jpg> ) {
    unlink $dentry or die( "Couldn't delete the $dentry file: $!" );
} 
```

# asp.net - 站点之间共享的 IIS 7.0 应用程序池 - 站点之间是否共享缓存？

> ID：12629739
> 
> 赞同：5
> 
> 时间：2012-09-27T20:44:59.100
> 
> 标签：asp.net, caching, iis

我有两个站点在它们的站点之间使用相同的数据，但其中一个站点是内容管理系统。在内容管理系统中，当保存项目时，它会使特定对象的缓存过期。

另一个站点，我想使用缓存，所以我不必一直往返于数据库。如果我在共享相同应用程序池的这些站点之间使用相同的缓存键/对象，在这种情况下不是 CMS 的站点是否会反映它的缓存已过期并检索新对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T20:49:18.203

这两个应用程序运行在同一个应用程序池中，但它们不在同一个内存空间中运行。您可以将这两个应用程序视为具有自己不同的一组内存指针，因此一个不会影响另一个。您无法访问另一个应用程序的变量，并且缓存生命周期没有任何影响，即使它们位于同一个数据存储中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-20T23:17:04.343

不，因为缓存将特定于 AppDomain，而不是 AppPool。请参阅此问题以在同一应用程序池的应用程序之间共享缓存。[同一个 AppPool 中的应用程序之间的共享变量？](https://stackoverflow.com/questions/46441605/shared-variable-across-applications-within-the-same-apppool)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T04:36:36.247

您的回答总结为 2 个字 - “应用程序缓存”。它适用于单个应用程序，并且不关心 AppPool，因此它无法按您的预期工作。也许您可以查看两个应用程序之间的会话共享。

# microsoft-metro - 监听 ListView 上的点击事件

> ID：12629741
> 
> 赞同：6
> 
> 时间：2012-09-27T20:45:06.323
> 
> 标签：microsoft-metro, winjs, windows-store

感觉好像我在这里遗漏了一些愚蠢的东西，但是在列表视图上收听点击事件的推荐方法是什么？

目前我有：

```
WinJS.Utilities.query(".menuHolder").listen("click", linkClickHandler, false); 
```

我的列表视图模板使用类“menuHolder”作为它的项目：

```
 <div id="menuTemplate"
            data-win-control="WinJS.Binding.Template">
            <div class="menuHolder">
                <!-- menu img -->
                <img src="#" data-win-bind="src : pic; alt : title" />

                <div class="menuText">
                    <!-- menu text -->
                    <h1 data-win-bind="innerText : title"></h1>
                    <!-- menu desc -->
                    <h4 data-win-bind="innerText : description"></h4>
                </div>
            </div>
        </div> 
```

我似乎没有在我的链接处理程序中击中我的断点，或者调用它的函数。有什么想法吗？

**编辑：**

作为后续问题（请记住项目调用事件），如果我说想要使用 WinJS.Navigator 类在应用程序中移动，是否有人知道在列表视图和 iteminvoked 事件之间传递数据的推荐方法？我猜我需要将其中的一部分`eventInfo`转换为合适的对象并检索信息，是哪一部分？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T01:36:12.397

假设您要“传递”的数据是绑定到被调用项的数据，您可以在传递给 iteminvoked 事件的事件参数中执行此操作。我的一个看起来像这样...

```
demosLV.oniteminvoked = function(e) {
    e.detail.itemPromise.then(function(item) {
        var location = format("/pages/{0}/{0}.html", item.data.key);
        WinJS.Navigation.navigate(location, item.data);
    });
}; 
```

所以 demosLV 就是 ListView。我正在将 oniteminvoked 设置为一个函数。该函数接收“e”作为事件参数。在函数中，我访问 e.detail.itemPromise 并挂起一个 .then 。然后我使用 item.data 访问 .then 中的实际数据。希望这就是你的意思。顺便说一句，格式功能是我的功能之一，以防您想知道为什么它不适合您。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T21:02:01.233

似乎我是一个香肠，我需要在父列表视图 ID 引用上监听“iteminvoked”事件，而不是子级别。

```
WinJS.Utilities.query("#menu").listen("iteminvoked", linkClickHandler, false); 
```

# macos - 来自 fortran 应用程序的输出未显示在 Matlab 中

> ID：12629742
> 
> 赞同：1
> 
> 时间：2012-09-27T20:45:07.867
> 
> 标签：macos, matlab, fortran, stdout, gfortran

我在从 Matlab 中执行的 fortran 应用程序的输出中遇到一些问题。我们使用 Matlab 调用许多 fortran 应用程序并显示输出和结果。

我在 OSX 上使用 gfortran 来构建其中一个程序，它会输出大量文件并输出少量到 stdout 以跟踪进度。stdout 输出主要通过 print * 语句完成，但我也尝试过 write( * , * )。该程序使用 OpenMP，但在 OpenMP 并行部分中没有执行任何 print * 或 write( * , * ) 语句。从终端执行程序时一切正常。但是，当从 matlab 中执行程序时，stdout 没有输出。文件输出工作正常。

此外，相同的代码在使用 Intel 的 ifort 编译时，在 matlab 中显示其输出没有问题。不幸的是，我无法定期访问英特尔编译器。

我很肯定输出将输出到标准输出（不是标准错误），我已经尝试从代码中刷新两者（调用flush（6）和调用flush（0）），但这似乎并没有区别。

我不确定是什么原因造成的。有什么想法吗？

一些相关信息：操作系统：OSX 10.6.8（64位模式）

Matlab：R2012b

gfortran：4.7.2（通过 fink 获得）

编译标志：-cpp -fopenmp -ffree-line-length-0 -fno-range-check -m64 -static-libgfortran -fconvert=little-endian -fstrict-aliasing

**编辑：**

我做了更多的测试，创建了一个简单的“hello”程序：

```
program printTest
write (*,*) 'hello'
end program 
```

编译...

```
gfortran test.f90 -o test 
```

表现出相同的行为。

我还尝试使用早期版本的 gfortran (4.2.1) 进行编译，这产生了一些有趣的结果。它在终端中执行良好，但在 matlab 中我得到以下信息：

> > !./test dyld：惰性符号绑定失败：找不到符号：__gfortran_set_std 引用自：/Users/sah/Desktop/./test 预期于：/Applications/MATLAB_R2012b.app/sys/os/maci64/libgfortran.2.dylib
> > 
> > dyld：找不到符号：__gfortran_set_std 引用自：/Users/sah/Desktop/./test 预期于：/Applications/MATLAB_R2012b.app/sys/os/maci64/libgfortran.2.dylib
> > 
> > ./test：跟踪/断点陷阱

这让我相信这是一个图书馆问题。在这种情况下，使用 -static-libgfortran 会产生相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T06:18:26.983

根据[系统功能文档](http://www.mathworks.se/help/matlab/ref/system.html)

> > [status, result] = system('command') 将完成状态返回给状态变量，并将命令的结果返回给结果变量。
> > 
> > [status,result] = system('command','-echo') 还强制输出到命令行窗口。

所以你应该在系统调用中使用'-echo'参数来直接在命令窗口中查看输出

```
system(['cd "',handles.indir,'";chmod u+x ./qp.exe',... ';./qp.exe'], '-echo') 
```

或者您可以将标准输出分配给一个变量：

```
[ret txt] = system(['cd "',handles.indir,'";chmod u+x ./qp.exe',... ';./qp.exe']) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T23:09:31.623

我相信 Matlab 是一个单线程应用程序。当您调用多线程执行程序时，我已经看到将输出通过管道传输回 Matlab 的各种问题。您是否考虑过重新编译成 Fortran mex 文件？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T01:00:53.350

我不确定 mex 文件是否会比独立的可执行文件更好地打印到标准输出。

还有其他选择。一种是将所有诊断信息写入（附加）到文件中，并在需要时查看文件。例如，Emacs 每秒自动“还原”文件的内容，或者任何您设置的时间间隔。另一种选择可能是将 fortran 源代码转换为 matlab 源代码（参见 f2matlab）并将其全部保存在 matlab 中。

bb

# unix - grep 怎么跑得这么快？

> ID：12629749
> 
> 赞同：124
> 
> 时间：2012-09-27T20:45:40.313
> 
> 标签：unix, grep

我对 GREP 在 shell 中的功能感到非常惊讶，之前我曾经在 java 中使用 substring 方法，但现在我使用 GREP 并且它在几秒钟内执行，它比我以前编写的 java 代码快得多。 （根据我的经验，我可能是错的）

话虽如此，我一直无法弄清楚它是如何发生的？网上也没有太多可用的。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2012-09-27T21:56:54.700

假设您的问题`GNU grep`具体涉及。这是作者 Mike Haertel 的注释：

> GNU grep 速度很快，因为它避免查看每个输入字节。
> 
> GNU grep 速度很快，因为它对每个字节执行非常少的 *指令*。
> 
> GNU grep 使用著名的 Boyer-Moore 算法，该算法首先查找目标字符串的最后一个字母，并使用查找表告诉它在找到不匹配字符时可以在输入中跳过多远。
> 
> GNU grep 还展开 Boyer-Moore 的内部循环，并设置 Boyer-Moore 增量表条目，使其不需要在每个展开的步骤中进行循环退出测试。这样做的结果是，在极限情况下，GNU grep 为它实际查看的每个输入字节平均执行少于 3 个 x86 指令（并且它完全跳过了许多字节）。
> 
> GNU grep 使用原始的 Unix 输入系统调用并避免在读取数据后复制数据。此外，GNU grep 避免将输入分成几行。寻找换行符会使 grep 减慢几倍，因为要找到换行符，它必须查看每个字节！
> 
> 因此，GNU grep 不是使用面向行的输入，而是将原始数据读入一个大缓冲区，使用 Boyer-Moore 搜索缓冲区，只有当它找到匹配项时，它才会去寻找边界换行符（某些命令行选项，如 - n 禁用此优化。）

这个答案是从[这里](http://lists.freebsd.org/pipermail/freebsd-current/2010-August/019310.html)获取的信息的一个子集。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2014-09-10T05:36:27.293

补充史蒂夫的出色答案。

它可能并不广为人知，但 grep 在 grep搜索***较长***的模式字符串时几乎总是比短模式字符串***更快***，因为在较长的模式中，*Boyer-Moore*可以以更长的步幅向前跳跃以实现更好的***亚线性***速度：

 ***例子：

```
# after running these twice to ensure apples-to-apples comparison
# (everything is in the buffer cache) 

$ time grep -c 'tg=f_c' 20140910.log
28
0.168u 0.068s 0:00.26

$ time grep -c ' /cc/merchant.json tg=f_c' 20140910.log
28
0.100u 0.056s 0:00.17 
```

较长的形式快 35%！

怎么来的？*Boyer-Moore*从模式字符串构造一个向前跳过的表，每当出现不匹配时，它会在将输入中的单个字符与跳过表中的字符进行比较之前选择可能的最长跳过（从最后一个字符到第一个字符）。

这是[一个解释 Boyer Moore 的视频](https://www.youtube.com/watch?v=4Xyhb72LCX4) （归功于 kommradHomer）

另一个常见的误解（对于 GNU grep）是`fgrep`比`grep`. `f`in`fgrep`不代表“快速”，它代表“固定”（参见手册页），并且由于两者都是同一个程序，并且都使用*Boyer-Moore*，因此在搜索固定时它们之间的速度没有差异-没有正则表达式特殊字符的字符串。我使用的唯一原因`fgrep`是当有一个正则表达式特殊字符（如`.`、`[]`或`*`）时，我不希望它被解释为这样。即便如此，更便携/标准的形式`grep -F`还是优于`fgrep`.***

# java - 使用 Spring MVC 支持映射的 JSON 关联数组

> ID：12629751
> 
> 赞同：0
> 
> 时间：2012-09-27T20:45:46.540
> 
> 标签：java, json, spring, spring-mvc

如果我有一个像这样的 JSON 数组：

```
{
"type": "anAction", 
"fired": "2011-09-16 20:00:00", 
"data[id]": "1234", 
"data[list_id]": "7890",
"data[email]": "abc@xxx.com",
"data[email][foo]": "blah"    
} 
```

有人知道我如何使用 Spring 的 jacksonMessageConverter 和自定义 ObjectMapper 将这些关联 JSON 数组转换为 Java 对象吗？

我正在使用 @RequestBody 注释来接收 JSON 字符串。

谢谢！

# tomcat - 以非管理员身份在 Win7 上运行 Tomcat 6

> ID：12629760
> 
> 赞同：0
> 
> 时间：2012-09-27T20:46:38.133
> 
> 标签：tomcat, windows-7, tomcat6

我试图在我不是管理员的 Win 7 平台上运行 Tomcat 6。

我得到以下信息：

```
Starting fm_tomcat_default
Asked (and given) winsock 1.1
OpenSCManager failed - Access is denied. (0x5) 
```

我可以要求管理员更改允许该应用程序运行的设置，只要它只是释放有限的配置项列表而不是一直是管理员。但为了做到这一点，我需要知道要求他们打开什么。任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:19:07.063

> 我需要知道要他们打开什么。任何想法？

让他们敞开**心扉**，授予您对系统的管理员访问权限。好的，这可能不是您要寻找的答案，也许我只是在这里表达一些过去的挫败感。

# solr - 使用 SolrCell 获取日期元数据

> ID：12629763
> 
> 赞同：3
> 
> 时间：2012-09-27T20:46:59.767
> 
> 标签：solr, metadata, apache-tika, solr-cell

我正在使用 Solr 3.6 来索引许多不同类型的文档。我有几个字段定义了所有文档的公共信息，其中一个是“日期”（理想情况下是最后修改日期，只是表明文档的最新程度。）

```
<field name="date" type="date" indexed="true" stored="true" required="true" /> 
```

尝试索引 .docx 和 .pdf 等富文本文档时出现了我的问题。我想使用从 ExtractingRequestHandler 获得的元数据来填写日期字段，但是存储我想要的日期信息的字段的名称对于每个文件都不同。有时我想要的字段是“日期”，有时是“last_modified”或“last_save_date”。我试图使用“last_modified”在处理程序中提供日期：

```
<str name="fmap.last_modified">date</str> 
```

..但这导致日期是多值的（因为有“日期”元数据）或未定义的问题（因为不存在“last_modified”）。我研究了使用条件 copyFields 来尝试从这些字段中的至少一个中提取数据，但这似乎很复杂（即扩展更新处理程序）并且还需要我知道可能包含此日期信息的每个可能字段的名称。

有什么方法可以可靠地从我处理的每个富文本文档中提取日期？

# java - 存储在应用程序会话中的集合变为空

> ID：12629767
> 
> 赞同：2
> 
> 时间：2012-09-27T20:47:19.640
> 
> 标签：java, android, google-app-engine, session

我构建了一个服务器-客户端 android 应用程序，其中用户注册到服务器，每个用户配置文件都保存在数据库和我保存在应用程序会话中的集合池中。

我在会话中保存所有现有用户的原因是用户经常更新其他用户。并从谷歌应用引擎数据存储中读取，这通常会花费我很多。

这在第一个月运行良好，但今天我的会话中有 1000 个配置文件，事情开始变得糟糕。突然间，配置文件的集合变为空，我不得不“重新启动”服务器以使配置文件再次加载到会话中。

我想我在会话中保存所有配置文件的设计是错误的。我对吗？或其他可能导致空集合？

有什么设计模式可以用来做正确的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:56:08.783

我不知道会话的内部结构以及如何在 GAE 中很好地处理它们，但我的第一个猜测是会话变得太大并且无法在请求之间正确序列化。

我的建议是使用 MemCache 来存储用户列表。一个典型的模式是将您需要的表存储在数据库中（这将包括您提到的每个用户的连接池）。然后，在第一次创建会话时或当您真正需要它时，将数据库中的数据加载到 MemCache 中。

缓存后，您可以直接使用它，而无需额外的数据库查询。如果做得对，这是非常强大的，也不应该给你带来性能问题。请记住，系统可以随机清除 MemCache，因此如果 MemCache 尚未初始化或重置，您需要确保从数据库加载它。

# iphone - NSUncaughtExceptionHandler 在 iOS 6 上没有被调用

> ID：12629769
> 
> 赞同：5
> 
> 时间：2012-09-27T20:47:25.883
> 
> 标签：iphone, ios, ios6

我曾经`NSSetUncaughtExceptionHandler`在我的应用程序委托`didFinishLaunching`...方法中设置处理程序，然后在我的应用程序代码中故意创建崩溃，但从`uncaughtExceptionHandler`未被调用：既不在模拟器上，也不在设备上。

它曾经在以前的 iOS 版本中使用相同的代码工作。但从 iOS 6 开始 - 不再。有人有同样的行为吗？我用谷歌搜索，但没有找到任何解释。感谢您的任何回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T09:31:39.690

应用程序范围内只能有一个`NSUncaughtExceptionHandler`。您的应用程序中的某些其他代码可能正在注册处理程序（在您注册之后），因此该代码捕获了异常而您没有。

# git - 在 git 中签出新分支时，起点如何工作？

> ID：12629771
> 
> 赞同：0
> 
> 时间：2012-09-27T20:47:32.883
> 
> 标签：git

阅读文档，看起来这个命令应该给我一个名为`cart`指向上游 master 的 HEAD 的分支：

`git checkout -b cart upstream/master`

但是，即使我在运行该命令之前*刚刚*完成了拉取操作，但`upstream master`在运行该命令之后，在新分支中，如果我运行，`git pull upstream master`我会收到大量提交。

所以，很明显我的出发点不是我想的那样。我哪里错了？

谢谢！汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:51:34.613

显式运行`git pull upstream master`不会更新任何远程跟踪分支。这使您的`upstream/master`分支保持独立并包含较旧的数据。如果您运行`git fetch origin`, 那么`git checkout -b cart upstream/master`，您应该会发现您的新分支是最新的。

# windows - 解析批处理文件中的字符串

> ID：12629775
> 
> 赞同：9
> 
> 时间：2012-09-27T20:47:45.183
> 
> 标签：windows, parsing, batch-file

我有以下字符串：

`MyProject/Architecture=32bit,BuildType=Debug,OS=winpc`

我希望能够获取 32bit、Debug 和 winpc 的值，并将它们存储在名为 Architecture、BuildType 和 OS 的变量中，以便稍后在批处理脚本中引用。我通常是一个 Unix 人，所以这对我来说是一个新领域。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-27T20:57:53.077

这应该这样做：

```
FOR /F "tokens=1-6 delims==," %%I IN ("MyProject/Architecture=32bit,BuildType=Debug,OS=winpc") DO (
    ECHO I %%I, J %%J, K %%K, L %%L, M %%M, N %%N
)
REM output is: I MyProject/Architecture, J 32bit, K BuildType, L Debug, M OS, N winpc 
```

批处理`FOR`循环是一个非常有趣的机器。输入`FOR /?`一个控制台来描述它可以做的一些疯狂的事情。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-27T22:17:11.297

这是一个有趣的解决方案，它不关心 name=value 对指定的数量或顺序。诀窍是用换行符替换每个逗号，以便 FOR /F 将迭代每个名称=值对。只要`/`字符串中只有一个，这应该可以工作。

```
@echo off
setlocal enableDelayedExpansion
set "str=MyProject/Architecture=32bit,BuildType=Debug,OS=winpc"

::Eliminate the leading project info
set "str=%str:*/=%"

::Define a variable containing a LineFeed character
set LF=^

::The above 2 empty lines are critical - do not remove

::Parse and set the values
for %%A in ("!LF!") do (
  for /f "eol== tokens=1* delims==" %%B in ("!str:,=%%~A!") do set "%%B=%%C"
)

::Display the values
echo Architecture=%Architecture%
echo BuildType=%BuildType%
echo OS=%OS% 
```

使用更多代码，它可以选择性地仅解析出我们感兴趣的名称=值对。它还将变量初始化为未定义，以防字符串中缺少变量。

```
@echo off
setlocal enableDelayedExpansion
set "str=MyProject/Architecture=32bit,BuildType=Debug,OS=winpc"

::Eliminate the leading project info
set "str=%str:*/=%"

::Define a variable containing a LineFeed character
set LF=^

::The above 2 empty lines are critical - do not remove

::Define the variables we are interested in
set "vars= Architecture BuildType OS "

::Clear any existing values
for %%A in (%vars%) do set "%%A="

::Parse and conditionally set the values
for %%A in ("!LF!") do (
  for /f "eol== tokens=1* delims==" %%B in ("!str:,=%%~A!") do (
    if !vars: %%B ! neq !vars! set "%%B=%%C"
  )
)

::Display the values
for %%A in (%vars%) do echo %%A=!%%A! 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T20:58:08.990

尝试以下操作：

```
@ECHO OFF

SET Var=MyProject/Architecture=32bit,BuildType=Debug,OS=winpc

FOR /F "tokens=1,2,3 delims=," %%A IN ("%Var%") DO (
    FOR /F "tokens=1,2 delims==" %%D IN ("%%A") DO (
        SET Architecture=%%E
    )
    FOR /F "tokens=1,2 delims==" %%D IN ("%%B") DO (
        SET BuildType=%%E
    )
    FOR /F "tokens=1,2 delims==" %%D IN ("%%C") DO (
        SET OS=%%E
    )
)

ECHO %Architecture%
ECHO %BuildType%
ECHO %OS%

PAUSE 
```

# vb.net - 我想在我的 Windows 移动应用程序中添加 Flash 文件。

> ID：12629778
> 
> 赞同：0
> 
> 时间：2012-09-27T20:47:53.230
> 
> 标签：vb.net, windows-mobile-6, windows-mobile-5.0

我正在 vb.net 中开发应用程序。请帮助我如何在我的应用程序中添加 Flash 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:01:52.773

在 Google 上搜索“windows .net flash control”找到了这个。我使用 Visual Studio 2010 查找文章中指定的 COM 参考，并且能够非常快速地将其添加到测试应用程序中。

[http://weblogs.asp.net/twalters/archive/2003/12/29/46265.aspx](http://weblogs.asp.net/twalters/archive/2003/12/29/46265.aspx)

# javascript - 使用 raphael js 创建一组路径并一起制作动画

> ID：12629780
> 
> 赞同：0
> 
> 时间：2012-09-27T20:48:06.520
> 
> 标签：javascript, jquery, html, raphael

我有一个仪表指针，我需要在最后添加一个箭头，我能够做到，唯一的问题不是一个集合，当指针旋转时，我的箭头没有跟随它的位置任何想法我知道这是一个新手问题。

这是脚本

```
 $(function(){
        var r = Raphael("gauge", 200, 200);
        var g = r.gauge(0, 180);

        g.bg(r.circle(100, 100, 100).attr({fill:'','stroke-width': '0'}), [100, 100]);

        g.pointer(r.rect(0, 0, 90, 8).attr({fill: '#fff', 'stroke-width': '0'}), [90, 4]);

        g.arrow(r.path('M 15,20 0,10 15,0 z').attr({fill: '#fff', 'stroke-width': '0'}).translate(0, 90), [0, 20]);

        setInterval(function(){
            var percent = Math.floor(Math.random()*100);
            g.move(percent);
        }, 3000);
    }); 
```

你可以在这里预览它[http://jsfiddle.net/creativestudio/VH3fR/10/](http://jsfiddle.net/creativestudio/VH3fR/10/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T09:13:43.780

请参阅工作小提琴（快速修复）：http: [//jsfiddle.net/VH3fR/13/](http://jsfiddle.net/VH3fR/13/)

我不知道这是否是最好的解决方案，我所做的不是创建路径并翻译它，而是直接在所需位置创建了路径。

该行为的原因是，如果您查看该`move`方法的源代码，它采用指针并应用 transform 方法在指针上进行旋转，这会覆盖您调用的 translate 方法。

### 替代解决方案

[http://jsfiddle.net/VH3fR/14/](http://jsfiddle.net/VH3fR/14/)

在这里，我删除了矩形并使用路径直接构建了一个箭头。

# jquery - 包含的 JQuery 验证正则表达式

> ID：12629785
> 
> 赞同：0
> 
> 时间：2012-09-27T20:48:17.117
> 
> 标签：jquery, regex, jquery-plugins, passwords, jquery-validate

我有一个用户名和密码输入字段，我正在使用 jquery 验证插件来验证我的表单。我知道如何创建自定义规则，但我只是想知道如何为它编写正则表达式。

我希望密码是：
1）最少 8 个字符（这在规则中由 minlength 处理）
2）包含一个符号（！@#$%^&*?~`'"）
3）包含一个数字（0 -9)

```
jQuery.validator.addMethod("password", function(value, element) { 
        return this.optional(element) || /.../i.test(value);
    }, jQuery.format("Enter correct password")); 
```

我只是不知道如何编写正则表达式来搜索输入并查看它是否包含至少 1 个符号和 1 个数字。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T20:58:48.643

开始了

```
^(?=.*?[@#$%^&*?~`])(?=.*?[0-9]).{8,}$ 
```

它告诉，从字符串的开头开始，任何长度 >=8 的字符串都可以

```
.{8,} 
```

您还需要从字符串的开头告诉您在任何位置都需要一个符号

```
^(?=.*?[@#$%^&*?~`]) 
```

和任何位置的数字

```
(?=.*?[0-9]) 
```

使用[积极的前瞻](http://www.regular-expressions.info/lookaround.html)

[一个工作示例](http://rubular.com/r/97mJwHektM)

# vhdl - 在 Spartan 3 中的进程之间移动数据

> ID：12629788
> 
> 赞同：2
> 
> 时间：2012-09-27T20:48:57.440
> 
> 标签：vhdl, xilinx

我有两个进程 A 和 B，每个进程都有自己的时钟输入。

时钟频率略有不同，因此不同步。

进程 A 从 IC 中采样数据，该数据需要传递给进程 B，然后进程 B 需要将该数据写入另一个 IC。

我当前的解决方案是在进程 A 和 B 之间使用一些简单的握手信号。内存已被声明为进程 A 内的分布式 RAM（128Bytes 作为 std_logic_vector(7 downto 0) 的数组）（不是块内存）。

我正在使用 Xilinx 的 Spartan 3AN 和 ISE Webpack。

但这是正确的方法吗？

我在某处读到 Spartan 3 具有支持两个时钟的双端口块存储器，那么这会更正确吗？

我问的原因是因为我的设计行为不可预测，在这种情况下，我只是讨厌魔法。:-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T21:06:47.593

除了非常特殊的例外情况，在两个独立时钟域之间移动数据的唯一正确方法是使用异步 FIFO（也更准确地称为多速率 FIFO）。

在几乎所有 FPGA（包括您正在使用的 Xilinx 部件）中，您都可以使用供应商创建的 FIFO——在 Xilinx 的案例中，您可以通过使用 CoreGen 工具自己生成一个 FIFO 来做到这一点。

您也可以使用双端口 RAM 和适当的握手逻辑自己构建这样的 FIFO，但与大多数事情一样，除非您有充分的理由这样做，否则您不应该自行重新发明。

您还可以考虑您的设计是否*真的*需要具有多个时钟域。有时这是绝对必要的，但这比大多数人刚开始相信的要*少*得多。例如，即使您需要以多种速率运行的逻辑，您通常也可以通过使用单个时钟和适当生成的同步时钟使能来处理这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T05:59:44.670

您正在体验的魔法很可能是因为您没有在综合中正确地约束您的设计，或者您没有正确地进行握手。你有两个选择：

1.  先进先出

使用 wjl 所述的多速率 FIFO，这是一种非常常见的解决方案，始终有效（如果操作正确）并且在资源方面是巨大的。该解决方案的最大优点是您不必关心实际的时钟域交叉问题，并且您将获得两个域之间的最大带宽。永远不要尝试在 VHDL 中建立异步 FIFO，因为那是行不通的；即使在 VHDL 中，也有一些您根本无法正确完成的事情；使用 Xilinx 的适当生成器，我认为那是 CoreGen

1.  握手

在两个域中为您的数据至少有两个寄存器并构建一个完整的请求/确认握手逻辑，如果您不包含它们，它将无法正常工作。通过为接收域中的握手信号添加至少两个寄存器来确保握手逻辑正确同步，否则您很可能会因为亚稳态问题而出现不可预知的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T11:05:37.437

为了获得跨时钟域的“有效/确认”标志集，您可能希望查看[Flancter](http://www.floobydust.com/flancter/Flancter_App_Note.pdf)，[这是它的一个应用程序](http://www.doulos.com/knowhow/fpga/fastcounter/)

但在一般情况下，使用双时钟 FIFO 是当务之急。编写自己的代码将是一个有趣的练习，但验证所有潜在的时钟计时案例是一场噩梦。这是我将实例化 Coregen 块的少数几个地方之一。

# php - 如何创建自定义弹出窗口？

> ID：12629791
> 
> 赞同：-1
> 
> 时间：2012-09-27T20:49:12.040
> 
> 标签：php, javascript, popup

如何制作自定义弹出窗口。最重要的是没有关闭按钮

这是一些代码

```
if (empty($username) || empty($password) || empty($email) || empty($phone_no) ||empty($curr_state) || empty($curr_loc)){</br>
echo("<script> alert('Fill in details')</script>");
}
else{
if(strlen($password)>40){
    echo("<script> alert('Password is too long')</script>");
}
else{ 
$insert = 'INSERT INTO user(username , password , email , phone_number , curr_state , curr_loc) VALUES ( "'.$username.'", "'.$password.'" , "'.$email.'" , "'.$phone_no.'" , "'.$curr_state.'" , "'.$curr_loc.'" )';
mysql_query($insert);
echo("<script> alert('Registration Successful')</script>"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:03:02.307

我建议您研究像[bootstrap](http://twitter.github.com/bootstrap/index.html)这样的 css/html 模板系统。他们提供了如何做弹出窗口和警报的非常好的示例。

另外，我建议先在 javascript 中验证您的表单数据，然后再将表单发送到您的服务器以进行进一步验证（例如唯一的用户名或电子邮件地址）。

这样，在您的 javascript 中，您可以开始调用模板，如 bootstrap。下面的代码不会编译我只是给你一个想法

示例：html

```
<form name="registration">
    <input type="text" name="username"/>
    <input type="submit" onclick="validateform()">register!</input>
</form>
<div class="modal" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button
        <h3 id="myModalLabel">Modal header</h3>
    </div>
    <div class="modal-body">
        <p>One fine body…&lt;/p>
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
        <button class="btn btn-primary">Save changes</button>
    </div>
</div> 
```

示例：js

```
function validateform() {
    var name = document.form.registration.username;
    //validate name...
    // if name is valid then submit with $.ajax
    // else call bootstrap modal like $('#myModal').modal('show')
} 
```

# javascript - 从 html 元素中检索 fontSize

> ID：12629794
> 
> 赞同：1
> 
> 时间：2012-09-27T20:49:19.210
> 
> 标签：javascript, html, css, font-size

我正在尝试为某些东西制作动画。

我在css的**html**元素中设置了**默认字体大小。**

 **我正在尝试获取我在 css 中设置的字体大小，然后在 javascript 中使用它。

我试过这个...

```
var somevariable = getElementById('HtmlId');
var anothervariable = somevariable.style.fontSize; 
```

但我得到了南。

我尝试解析变量，假设它返回一个字符串。

我想得到css

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:52:26.943

我推荐你使用 jQuery ：

```
var fontSize = parseInt(jQuery('#HtmlId').css('font-size'), 10); 
```

使用纯 JavaScript 可能不会返回所需的结果，就像您在控制台 (site:stackoverflow.com) 中单独运行以下行一样。结果不同。

```
document.body.style.fontSize // ''
jQuery('body').css('font-size') // 13px 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T20:53:38.500

它应该是 ：-

`var somevariable = document.getElementById('HtmlId');`

后面的线就好了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T20:55:57.820

这是一个非 jquery 解决方案...即使未在 CSS 中设置字体也可以工作。有点笨拙...

```
var myElem = document.getElementById("myElementId");
var fontSize = document.defaultView.getComputedStyle(myElem, null).fontSize; 
```

编辑-其他人看到了真正的错误可能是什么……错过了“文档”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T20:51:37.453

如果你使用 jquery，你可以这样做：

`var somevariable = $("#HtmlId").css("font-size");`**

# php - 从非线程安全的 php 迁移到线程安全的 php 服务器

> ID：12629795
> 
> 赞同：0
> 
> 时间：2012-09-27T20:49:21.887
> 
> 标签：php, apache, thread-safety

我有一个 Web 项目，我使用非线程安全版本的 php 来编译它，

但是我的客户在他的服务器上有一个线程安全版本的 php，并且在运行时

项目，每一页都有很多错误。问题是：如何在不更改服务器的情况下修复它？我们可以在线程安全服务器上运行非线程安全项目吗？我使用 ms iis，但我的客户使用最新版本的 xampp。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:13:20.717

仅仅因为它是“线程安全的”并不意味着启用了线程。XAMPP 使用 prefork MPM，它不使用多线程。您的错误可能是由于完全不同的原因造成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:17:47.467

我解决了这个问题，因为我的系统上的 php 错误报告已关闭，但在服务器上却没有，所以我从来没有看到一些这样的错误编程，我将其设置为打开并重新检查错误并修复它们，并使用部分代码我将其关闭在页面上所以它完成并修复

# php - 是什么让 PHP 函数 is_readable 不区分大小写？

> ID：12629796
> 
> 赞同：1
> 
> 时间：2012-09-27T20:49:30.873
> 
> 标签：php, macos, virtualbox

在给定以下两种情况`is_readable`的目录上，我得到了不同的结果：`folder`

案例 1：在 Debian 上运行的 PHP 版本 5.3.3-7+squeeze14（通过安装在 Mac 上的 VirtualBox）

*   is_readable('/home/.../ `folder`') : 1
*   is_readable('/home/.../ `Folder`') : 1

案例 2：在 Ubuntu 11.04 上运行的 PHP 版本 5.3.5-1ubuntu7 (GNU/Linux 2.6.38-8-server x86_64)

*   is_readable('/home/.../ `folder`') : 1
*   is_readable('/home/.../ `Folder`') ：

在第一种情况下，我想了解为什么 PHP 函数`is_readable`不区分大小写。我证明`Folder`在这两种情况下都不存在目录（注意大写 F）。

# redis - redigo，SMEMBERS，如何获取字符串

> ID：12629801
> 
> 赞同：8
> 
> 时间：2012-09-27T20:49:45.630
> 
> 标签：redis, go

我是[redigo](https://github.com/garyburd/redigo)从 Go 连接到 redis 数据库。**如何将类型转换`[]interface {}{[]byte{} []byte{}}`为一组字符串？**在这种情况下，我想获得两个字符串`Hello`和`World`.

```
package main

import (
    "fmt"
    "github.com/garyburd/redigo/redis"
)

func main() {
    c, err := redis.Dial("tcp", ":6379")
    defer c.Close()
    if err != nil {
        fmt.Println(err)
    }
    c.Send("SADD", "myset", "Hello")
    c.Send("SADD", "myset", "World")
    c.Flush()
    c.Receive()
    c.Receive()

    err = c.Send("SMEMBERS", "myset")
    if err != nil {
        fmt.Println(err)
    }
    c.Flush()
    // both give the same return value!?!?
    // reply, err := c.Receive()
    reply, err := redis.MultiBulk(c.Receive())
    if err != nil {
        fmt.Println(err)
    }
    fmt.Printf("%#v\n", reply)
    // $ go run main.go
    // []interface {}{[]byte{0x57, 0x6f, 0x72, 0x6c, 0x64}, []byte{0x48, 0x65, 0x6c, 0x6c, 0x6f}}
    // How do I get 'Hello' and 'World' from this data?
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T22:23:35.697

查看[模块源代码](https://github.com/garyburd/redigo/blob/master/redis/reply.go#L79)

```
// String is a helper that converts a Redis reply to a string. 
//
//  Reply type      Result
//  integer         format as decimal string
//  bulk            return reply as string
//  string          return as is
//  nil             return error ErrNil
//  other           return error
func String(v interface{}, err error) (string, error) { 
```

`redis.String`将转换`(v interface{}, err error)`为`(string, error)`

```
reply, err := redis.MultiBulk(c.Receive()) 
```

用。。。来代替

```
s, err := redis.String(redis.MultiBulk(c.Receive())) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T06:14:42.780

查看模块的源代码，您可以看到[从 Receive 返回的类型签名](https://github.com/garyburd/redigo/blob/master/redis/conn.go#L253)将是：

`func (c *conn) Receive() (reply interface{}, err error)`

在您的情况下，您正在使用[MultiBulk](https://github.com/garyburd/redigo/blob/master/redis/reply.go#L166)：

`func MultiBulk(v interface{}, err error) ([]interface{}, error)`

`interface{}`这给出了一个切片中多个 's 的回复：`[]interface{}`

在无类型之前，`interface{}`您必须像这样[断言其类型](http://golang.org/ref/spec#Type_assertions)：

x.(T)

类型在哪里`T`（例如`int`，`string`等）

在您的情况下，您有一片接口（类型：），`[]interface{}`因此，如果您想要一个`string`，您需要首先断言每个接口都具有 []bytes 类型，*然后*将它们转换为字符串，例如：

```
for _, x := range reply {
    var v, ok = x.([]byte)
    if ok {
        fmt.Println(string(v))
    }
} 
```

这是一个例子：[http ://play.golang.org/p/ZifbbZxEeJ](http://play.golang.org/p/ZifbbZxEeJ)

您还可以使用类型开关来检查您返回的数据类型：

[http://golang.org/ref/spec#Type_switches](http://golang.org/ref/spec#Type_switches)

```
for _, y := range reply {
    switch i := y.(type) {
    case nil:
        printString("x is nil")
    case int:
        printInt(i)  // i is an int
    etc...
    }
} 
```

或者，正如有人提到的，使用内置的`redis.String`etc. 方法将为您检查和转换它们。

我认为关键是，*每个都需要转换*，你不能把它们作为一个块来做（除非你写了一个方法来这样做！）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-24T07:59:58.713

由于`redis.MultiBulk()`now 已被弃用，它可能是使用`redis.Values()`并将结果转换为的好方法`String`：

```
import "github.com/gomodule/redigo/redis"

type RedisClient struct {
    Conn      redis.Conn
}

func (r *RedisClient) SMEMBERS(key string) interface{} {
    tmp, err := redis.Values(r.Conn.Do("smembers", key))
    if err != nil {
        fmt.Println(err)
        return nil
    }
    res := make([]string, 0)
    for _, v := range tmp {
        res = append(res, string(v.([]byte)))
    }
    return res
} 
```

# magento - Magento & soap2：如何使用 catalogCategoryInfo 函数获取自定义属性？

> ID：12629803
> 
> 赞同：0
> 
> 时间：2012-09-27T20:50:00.030
> 
> 标签：magento, soap

函数*catalogCategoryInfo*返回属性的固定大小计数。并非所有属性都可见。如何获取自定义类别属性？

我添加到 wsdl.xml（目录）：

```
<complexType name="catalogCategoryInfo">
    <all>
         <element name="new_attribue" type="xsd:int" minOccurs="0" />                      
    </all>
</complexType> 
```

对于 wsi.xml（目录）：

```
 <xsd:complexType name="catalogCategoryInfo">
      <xsd:sequence>
         <xsd:element name="new_attribue" type="xsd:int" minOccurs="0" />
      </xsd:sequence>
 </xsd:complexType> 
```

但这无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:23:17.997

是的！我懂了。

问题出在肥皂缓存中。Mage_Api_Model_Server_Adapter_Soap 类中的函数 _instantiateServer 具有不起作用的 `ini_set('soap.wsdl_cache_enabled', '0')` 选项。

php.ini 中soap 的缓存选项已开启。我只是把它关掉了。

```
soap.wsdl_cache_enabled=0 
```

现在它完美无缺！

# ember.js - Ember.js 处理 jQuery 位置变化

> ID：12629805
> 
> 赞同：0
> 
> 时间：2012-09-27T20:50:13.293
> 
> 标签：ember.js

快速提问。我发现使用 ember.js 处理站点导航（不是路由 aprt，只是一个简单的导航栏）有点复杂。所以我想我会用 jQuery 编写这个 aprt，将历史推送到位置 url，并希望 Ember.js 会检测到这个变化并且路由器会采取行动。

设想 ：

1) ember.js 将为 rootElement 使用 DIV，并且导航栏在正文中声明。

```
<body>
  <div id="nav">
    <ul><li><a>Item1</a></li></ul>
  </div> 
  <div id="rootEmberApp"></div>
</body> 
```

2）然后一个jQuery脚本将绑定到导航div的链接（item1）并将更改推送到URL，但在不停止传播的情况下阻止默认操作（我不想重新加载所有脚本）。就像是 ：

```
$(document).ready(function(){
    $("#navigation a").click(function(event){
    App.router.location.setURL('/ember/listItems');
    event.preventDefault();
}); 
```

3) 我希望 Ember.js 会在这个时候触发并采取行动。

我没有成功。傻吗？知道该怎么做吗？

非常感谢。

**更新1：**感谢您的回答。你是对的。我对我尝试或找到的有关导航栏的解决方案并不完全满意。我将再次查看 todoMVC 示例及其对 CollectionView 的使用。从初学者的角度来看，CollectionView 似乎是描述（声明）视图的好方法，同时它不容易阅读（当视图用纯 html 编写并且 js 绑定到它时更容易 ala jQuery ）。再次感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T02:15:35.117

这可能不是一个令人满意的答案，但是……这不是 Ember Way。Ember 路由的一个核心概念是，一旦应用程序加载，事实来源就在 Javascript 中。当您在 Ember 应用程序中移动时，路由器会从一个状态转换到另一个状态，并且 URL 会作为副作用进行更新。你正试图改变它的头脑。这不是不可能的——你绝对可以得到你想要做的工作。然而，我想让你知道这违背了设计师的初衷。

# c# - 在 JavaScript 中使用 razor C# 时遇到问题

> ID：12629806
> 
> 赞同：0
> 
> 时间：2012-09-27T20:50:13.117
> 
> 标签：c#, javascript, razor

我试图让 Razor (C#) 和 javascript 一起玩得很好，但我似乎做不到。我搜索了 StackOverflow 上的其他文章，但似乎没有一篇对我有用。

## 与其他帖子和我的一些显着差异包括以下内容：

我正在使用外部 JavaScript 文件（不是强制性的，但它就在那里）。

我正在为所有页面的标题布局使用一个 cshtml 文件（它将 head 标签放在与实际尝试调用该函数的文件不同的文件中。

## 我也使用 jQuery，如果这样更容易的话。

## 我要完成的工作：

## 我需要做的就是获取标签的内容（innerHTML 或 jQuery 中的 .html）（通过 id、class 等）并将该值分配给 "AppState["gEntryID"] 以供下一页使用。

## 我尝试过的一些事情：

```
function entryClickHandler()
{
    @AppState["gEntryID"] = document.getElementById("tester").innerHTML;
} 
```

和

```
function entryClickHandler()
{
    <text>
    @AppState["gEntryID"] = document.getElementById("tester").innerHTML;
    </text>
} 
```

我已经在外部文件和 HeaderLayout 文件中的 head 部分中尝试了这些（以及这些的一些其他变体）。

我知道 C# 在页面之前运行，而 JavaScript 主要在页面之后运行（至少对于这样的事件）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:56:30.977

它不是那样工作的。如果不使用表单发布或 ajax 提交，则无法使用 JavaScript 在 C#/Razor 端设置变量。

在 Razor 完成它的一部分并呈现并发送页面之前，Javascript 无法访问页面。

# c# - 是否有一种更简单的方法来检查一个枚举是否具有特定值而其他枚举是否具有其他一些值

> ID：12629808
> 
> 赞同：0
> 
> 时间：2012-09-27T20:50:15.083
> 
> 标签：c#

我系统中的用户可以拥有电子邮件、手机或电话，并且根据传递的值，我正在检查一些条件，然后为每个条件设置 ContactDataStatus（这是一个枚举）。然后我检查 ContactDataStatus 以确定提供的联系方式是否有效。

枚举具有以下定义

```
public enum ContactDataStatus
    {
        ExistsButUnverified = 1, 
        ExisitsAndVerified = 2, 
        IsValid = 3, 
        IsUninitialized = 4
    } 
```

我写了以下 if 条件来设置 isValid 变量

```
 isValid = false;
    if (emailStatus == ContactDataStatus.IsValid && 
       (mobileStatus == ContactDataStatus.IsValid || 
        mobileStatus == ContactDataStatus.IsUninitialized) 
        && (phoneStatus == ContactDataStatus.IsValid || 
        phoneStatus == ContactDataStatus.IsUninitialized))
    {
        isValid = true;
    }
    else if (mobileStatus == ContactDataStatus.IsValid && 
    (emailStatus == ContactDataStatus.IsValid || 
    emailStatus == ContactDataStatus.IsUninitialized) && 
    (phoneStatus == ContactDataStatus.IsValid || 
    phoneStatus == ContactDataStatus.IsUninitialized))
    {
       isValid = true;
    }
    else if (phoneStatus == ContactDataStatus.IsValid && 
    (emailStatus == ContactDataStatus.IsValid || 
    emailStatus == ContactDataStatus.IsUninitialized) && 
    (mobileStatus == ContactDataStatus.IsValid || 
    mobileStatus == ContactDataStatus.IsUninitialized))
    {
      isValid = true;
    } 
```

有没有更简单/更短的方法来写这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T20:55:52.760

如果您告诉我们枚举的值是什么，将会有所帮助。听起来您*至少希望其中一个*值有效，并且*所有*值都未初始化或有效。因此，一种表达方式是：

```
var statuses = new[] { emailStatus, mobileStatus, phoneStatus };
bool valid = statuses.Any(x => x == ContactDataStatus.IsValid) &&
             statuses.All(x => x == ContactDataStatus.IsValid ||
                               x == ContactDataStatus.IsUninitialized); 
```

或者如果状态枚举是 just `IsValid`, `IsUninitialized`and (say) `IsInvalid`，并且您知道这些值*实际上*会在该集合中，您可以编写：

```
var statuses = new[] { emailStatus, mobileStatus, phoneStatus };
bool valid = statuses.Any(x => x == ContactDataStatus.IsValid) &&
             statuses.All(x => x != ContactDataStatus.IsInvalid); 
```

另外，我建议您从每个枚举值中删除“is”前缀 - 它只是使代码更难阅读 IMO 的绒毛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:56:23.360

```
var statuses = new[] { emailStatus, mobileStatus, phoneStatus };
bool isValid = statuses
    .Any(s => s == ContactDataStatus.IsValid && statuses.Except(new[] { s }).All(o => o == ContactDataStatus.IsValid || o == ContactDataStatus.IsUninitialized)); 
```

# box-api - 文件覆盖返回 409

> ID：12629810
> 
> 赞同：0
> 
> 时间：2012-09-27T20:50:18.407
> 
> 标签：box-api

我正在更改 10 月 1 日所需的文件覆盖代码。但是，即使我添加了 is-match 标头并包含文件的哈希，它也会返回状态 409“正在使用的项目名称”。

也许我使用了错误的文件哈希。我应该提供更新文件的新哈希吗？因为那也行不通。我正在发送与文件当前具有的完全相同的哈希（etag）。

另外，我从来没有写过删除文件的方法，所以如果你不能让我参考那个有帮助的文档。我已经阅读了它，但仍然迷路了。

我发布的网址是[https://api.box.com/2.0/files/](https://api.box.com/2.0/files/) {file id}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T22:50:10.690

好问题。看起来我们的上传新版本的文档没有得到更新……只是在文档上发布了更新。

删除示例位于文档中：http: [//developers.box.com/docs/#files-delete-a-file](http://developers.box.com/docs/#files-delete-a-file)

本质上是一个电话，如：

```
curl https://api.box.com/2.0/files/FILE_ID \
-H "Authorization: BoxAuth api_key=API_KEY&auth_token=AUTH_TOKEN" \
-H "If-Match: a_unique_sha1" -X DELETE 
```

此处记录了上传文件的新版本：http: [//developers.box.com/docs/#files-upload-a-new-version-of-a-file](http://developers.box.com/docs/#files-upload-a-new-version-of-a-file)

在 curl 中看起来像这样：

```
curl https://api.box.com/2.0/files/FILE_ID/data \
-H "Authorization: BoxAuth api_key=API_KEY&auth_token=AUTH_TOKEN" \
-H "If-Match: ETAG_OF_ORIGINAL
-F filename=@FILE_NAME 
```

# php - 如何从数组中加载特定元素？

> ID：12629813
> 
> 赞同：-1
> 
> 时间：2012-09-27T20:50:31.327
> 
> 标签：php, arrays, filter

我们将一个 MySQL 表数据放在一个名为 $row1 的数组中。现在，我们只想从这个数组中回显一些行。例如 ：

```
While ($row1 = mysql_fetch_array($query)) {
   echo $row1['name'];
} 
```

（但其中 id 等于 5）

我们怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:57:51.293

在您的 SQL 语句中，将其添加到末尾：`WHERE id = 5`，如果您已经有一个`WHERE`子句，请添加`AND id = 5`

交替...

```
if ($row1['id'] == 5)
{
   echo $row1['name'];
} 
```

发布您的所有代码..我们可以让您的这种体验不那么痛苦。

# mysql - 如何按/group_concat 对每组结果进行分组？

> ID：12629815
> 
> 赞同：2
> 
> 时间：2012-09-27T20:50:47.047
> 
> 标签：mysql, sql, group-concat

图像我们有一个这样的表：

**表格1**

```
+----------+----------+--------+------------+
| position | epoc     | name   | value      |
+----------+----------+--------+------------+
|    1     |    1     |   A    |        v01 |
|    1     |    1     |   B    |        v02 |
|    1     |    1     |   C    |        v03 |
|    1     |    2     |   A    |        v04 |
|    1     |    2     |   B    |        v05 |
|    1     |    2     |   C    |        v06 |
|    1     |    3     |   A    |        v07 |
|    1     |    3     |   B    |        v08 |
|    1     |    3     |   C    |        v09 |
|    1     |    4     |   A    |        v10 |
|    1     |    4     |   B    |        v11 |
|    1     |    4     |   C    |        v12 |
|    2     |    5     |   A    |        v13 |
|    2     |    5     |   B    |        v14 |
|    2     |    5     |   C    |        v15 |
|    2     |    6     |   A    |        v16 |
|    2     |    6     |   B    |        v17 |
|    2     |    6     |   C    |        v18 |
|    2     |    7     |   A    |        v19 |
|    2     |    7     |   B    |        v20 |
|    2     |    7     |   C    |        v21 |
|    2     |    8     |   A    |        v22 |
|    2     |    8     |   B    |        v23 |
|    2     |    8     |   C    |        v24 |
+----------+----------+--------+------------+ 
```

我希望能够得到这张表：

**表2**

```
+----------+--------------------+
| position | value              |
+----------+--------------------+
|    1     |    v01,v02,v04,v05 |
|    2     |    v13,v14,v16,v17 | 
+----------+--------------------+ 
```

条件是：

*   只是具有“名称”A OR B 的行的“值”；
*   只是“位置”中前 2 个唯一结果的“epoc”（丢弃 epoc 3、4、7、8）
*   按 table1 位置分组（对于每个位置，我想要与先前条件匹配的值的连接）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T21:23:11.610

这可能是您正在寻找的：

```
select position, 
  group_concat(value order by overall_row_num) value
from
(
  select position,
      name,
      value,
      epoc,
       @num := if(@position = `position`, @num + 1, 1) as group_row_number,
       @position := `position` as dummy, 
      overall_row_num
  from
  (
    select position, name, 
      epoc, 
      value,
      @rn:=@rn+1 overall_row_num
    from t1, (SELECT @rn:=0) r
    where name in ('A', 'B')
    order by position, epoc
  ) x
  order by overall_row_num
) x1
where group_row_number <= 4
group by position 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/30a44/38)

# python - 如何让页面对主页上提供的信息做出反应？

> ID：12629818
> 
> 赞同：0
> 
> 时间：2012-09-27T20:50:59.497
> 
> 标签：python, google-app-engine, jinja2

我的主页包含一个带有下拉选项的表单，特别是城市名称（即纽约、洛杉矶、迈阿密等）。当用户选择一个城市时，他/她会被重定向到另一个页面，该页面应该显示交易结果（称之为交易页面）。

基本上，我想知道如何让交易页面根据主页上选择的城市显示信息？我正在使用查询来检索结果，但我希望查询根据选择的城市进行更改，以便交易页面的信息相关。

如果答案太详细，有人可以指出与此相关的特定主题，也许是提供答案的网站？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:52:42.387

您必须在选择中使用 onchange 事件。这是一个示例：[http](http://lab.artlung.com/dropdown/) ://lab.artlung.com/dropdown/ 顺便说一句：使用 onchange="window.open(url, '_self');" 就像重定向到一个 url。要从用户选择的选项中获取值，请使用： onchange="window.open(this.value, '_self');"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:54:28.860

对于下拉列表，添加一个重定向到不同 url 的 on Change 侦听器。网址可能类似于 process.php?city=Maine

添加 onchange 监听器

```
document.getElementById('citydropdown').addEventListener('change', myFunc, false); 
```

在 javascript 中重定向：

```
window.location = newUrl; 
```

# python - 如何在 python 中向远程进程发送信号？

> ID：12629830
> 
> 赞同：0
> 
> 时间：2012-09-27T20:51:41.540
> 
> 标签：python, signals

我看过信号模块，安装信号处理程序和设置警报似乎没问题，但是正在向另一个进程发送信号，例如

```
os.system('kill -s SIGUSR2 8269') 
```

如果进程在不同的主机上，那么有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T20:53:51.187

`os.kill()`对于本地进程，paramiko 和`kill`远程系统的命令。

# c++ - 使用 OpenGL (freeglut) 的 SDL 在调用 glutBitmapCharacter 时崩溃

> ID：12629832
> 
> 赞同：2
> 
> 时间：2012-09-27T20:51:53.570
> 
> 标签：c++, sdl, freeglut

我有一个通过 SDL 下的 freeglut 使用 OpenGL 的程序。SDL/OpenGL初始化如下：

```
// Initialize SDL
SDL_Init(SDL_INIT_VIDEO);

// Create the SDL window
SDL_SetVideoMode(SCREEN_W, SCREEN_H, SCREEN_DEPTH, SDL_OPENGL);

// Initialize OpenGL
glClearColor(BG_COLOR_R, BG_COLOR_G, BG_COLOR_B, 1.f);
glViewport(0, 0, SCREEN_W, SCREEN_H);

glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glOrtho(0.0f, SCREEN_W, SCREEN_H, 0.0f, -1.0f, 1.0f);

glEnable(GL_TEXTURE_2D);
glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

我一直在使用 glBegin() ... glEnd() 块来绘制图元没有任何麻烦。但是，在这个程序中，当我调用任何 glutBitmapX 函数时，程序会简单地退出而没有错误状态。我用来绘制文本的代码是：

```
glColor3f(1.f, 1.f, 1.f);
glRasterPos2f(x, y);
glutStrokeString(GLUT_BITMAP_8_BY_13, (const unsigned char*)"test string"); 
```

在以前的类似程序中，我使用了 glutBitmapCharacter 和 glutStrokeString 来绘制文本，它似乎可以工作。唯一的区别是我现在将 freeglut 与 SDL 一起使用，而不是像以前的程序中那样仅使用 GLUT。我的设置是否存在一些我没有看到的基本问题，或者是否有更好的方法来绘制文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T21:35:32.210

[第 2 节，初始化](http://www.opengl.org/resources/libraries/glut/spec3/node9.html)：

> 以 glutInit- 前缀开头的例程用于初始化 GLUT 状态。主要的初始化例程是 glutInit，它应该在 GLUT 程序中只被调用一次。**在 glutInit 之前不应调用非 glutInit 前缀的 GLUT 或 OpenGL 例程。**
> 
> 其他 glutInit 例程可以在 glutInit 之前调用。原因是这些例程可用于设置默认窗口初始化状态，该状态可能被 glutInit 中完成的命令处理修改。例如，可以在 glutInit 之前调用 glutInitWindowSize(400, 400) 以指示 400 x 400 是程序的默认窗口大小。在 glutInit 之前设置初始窗口大小或位置允许 GLUT 程序用户使用命令行参数指定初始大小或位置。

不要尝试混合匹配 GLUT 和 SDL。它将以眼泪和/或无效的事件循环结束。选择*一个*框架并坚持下去。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T19:30:59.260

您可能已经损坏了堆。

# c# - 构造函数参数 - IList

> ID：12629834
> 
> 赞同：0
> 
> 时间：2012-09-27T20:51:58.500
> 
> 标签：c#

我正在使用具有类的第三方 API。此类的构造函数接受`IList<CustomType>`. 这是根据其文档的构造函数

```
public LogicalOrFilter(
IList<ElementFilter> filters
) 
```

我尝试在`list<ElementFilter>`初始化此对象时传入 a 。但是它不起作用，它不会引发任何运行时错误。作为第三方 API，我不知道它的内部工作原理。这个类有另一个构造函数，它只接受一个`ElementFilter`. 当我使用它时，班级会做我想做的事。所以我确信我的其余代码没问题。谁能解释我可以将哪种标准数据结构传递给这个构造函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:54:39.743

它应该允许一个通用列表，但您始终可以下载 Reflector 以查看 API 内部以查看构造函数在做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:58:44.100

应该像你描述的那样工作。此代码有效：

```
public class Blah
{
    private IList<string> _strings;

    public int Count
    {
        get { return this._strings.Count; }
    }

    public Blah(IList<string> strings)
    {
        _strings = strings;
    }
} 
```

然后在其他地方：

```
List<string> someStrings = new List<string> { "a", "B", "c" };
var blah = new Blah(someStrings);
Console.WriteLine(blah.Count); 
```

打印出来`3`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T20:54:56.567

`List<ElementFilter>`实现`IList<ElementFilter>`，所以你可以用它来调用它。

如果不起作用，请与第三方项目的原作者交谈。这可能是他们的代码有问题，也可能是您对代码应该做什么的期望有问题。

# css - 为什么我的 DIV 高度不会增长？是因为我用的是花车吗？

> ID：12629841
> 
> 赞同：0
> 
> 时间：2012-09-27T20:52:17.397
> 
> 标签：css

请帮忙！我正在尝试创建一些 div 部分，其中一些 div 部分还有一些其他浮动的 div。所有这些我都清除了。但是这些部分并没有增长以适应其中的内容。以下是我的 HTML -

```
<div class="data">
    <div class="name">Data</div>
    <div class="first section">
        <div class="title">First Section</div>
        <div class="left settings">
            <div class="row">
                 <div class="field">First Name</div>
                 <div class="value">John</div>
            </div>
            <div class="row">
                  <div class="field">Last Name</div>
                  <div class="value">Smith</div>
            </div>
        </div>
        <div class="right settings">
            <div class="row">
                 <div class="field">ID</div>
                 <div class="value">321</div>
            </div>
            <div class="row">
                  <div class="field">Group</div>
                  <div class="value">Eng</div>
            </div>
        </div>
    </div>
    <div class="second section">
        <div class="title">Second Section</div>
    </div>
    <div class="third section">
        <div class="title">Third Section</div>
    </div>
</div> 
```

以下是我的 CSS -

```
div.data {
    position: relative;
    top: 1em;
    width: 100em;
}

div.data div.name {
    color: #0066FF;
    font-weight: bold;
}

div.data div.section div.title {
    color: green;
    font-weight: bold;
}

/** first section **/
div.data div.first div.settings {
    position: relative;
    width: 799px;
    border-top: 1px solid;
    float: left;
}

div.data div.first div.left {
    border-left: 1px solid;
}

div.data div.first div.settings div.row {
    border-bottom: 1px solid;
    clear: both;
    height: 2em;
}

div.data div.first div.settings div.row div {
    float: left;
    height: 22px;
    padding: 5px;
    border-right: 1px solid;
}

div.data div.first div.settings div.row div.field {
    width: 192px;
}

div.data div.first div.settings div.row div.value {
    width: 585px;
}

/** second section **/
div.data div.second {
    clear: both;
} 
```

对于第一部分，我有一个标题和一个由左右组成的表格。这两个都向左浮动并被清除。左右表的行有一个字段和值，它们也左右浮动并被清除。在这一点上，我预计“第一部分”会随着其中内容的增长而增长。但是高度却停留在 22px，与部分标题的高度相同！

到底是怎么回事？我为 div.section 尝试了 overflow:auto 并且有效。但是当我尝试在“第一部分”中为 div.settings 设置这种样式时：

```
div.data div.first div.settings {
     position: relative;
     top: 1em;
} 
```

我最终得到了这些滚动条，而不是增加高度以适应新的变化。一切都不正常了。我真的无计可施，试图弄清楚这一点。如果有人可以就我做错的事情给我任何建议，那将是一个很大的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T21:36:10.773

如果您希望一个元素随着其浮动内容的高度而增长，它要么需要自己浮动，要么在浮动内容之后应用清除。

一个常见的解决方案是 clearfix

```
 .clearfix:before,
    .clearfix:after {
        content: " "; /* 1 */
        display: table; /* 2 */
    }

    .clearfix:after {
        clear: both;
    }

    /*
     * For IE 6/7 only
     * Include this rule to trigger hasLayout and contain floats.
     */

    .clearfix {
        *zoom: 1;
    } 
```

我不太清楚你试图为你的具体情况实现的布局，但我认为你可以考虑将 clearfix 类应用于你的左右部分。

[https://github.com/h5bp/html5-boilerplate/blob/master/css/main.css](https://github.com/h5bp/html5-boilerplate/blob/master/css/main.css)

我试图重新创建问题 - [http://codepen.io/anon/pen/cIoGt](http://codepen.io/anon/pen/cIoGt)

如果您需要进一步的帮助，请尝试让它更清楚地显示问题

# html - 在 Outlook 中删除 html 电子邮件周围的空间

> ID：12629844
> 
> 赞同：1
> 
> 时间：2012-09-27T20:52:25.797
> 
> 标签：html, css, outlook

我在 Outlook 中的 html 电子邮件中有看起来像 20 像素的边距或填充，我无法摆脱它。苹果邮件客户端中也发生了同样的事情，只是在顶部而不是在左侧。我已将正文边距和填充设置为 0。任何人都有解决此问题的想法。

```
<body bgcolor="#ffffff" style="margin: 0; padding: 0">
<table border="0" cellpadding="0" cellspacing="0" height="489" width="638" align="left"></table>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:05:51.337

就像浏览器一样，电子邮件客户端具有某些元素的默认样式和默认结构。默认情况下，您可能会在`<p>`其中放置一个可能已`margin`预先应用的内容。尝试在您的上方添加一行 css`<body>`

```
p { margin: 0; } 
```

我没有对此进行测试，但似乎有可能。

另外，如果这不起作用，这是[相同的答案吗？在 SO](https://stackoverflow.com/a/5885885/1408356)上表明这是无法克服的。:\

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:55:52.120

表格本身是否有可能在其周围有边距和/或填充？

# mysql - 如何编写 SQL 语句，例如下面

> ID：12629860
> 
> 赞同：0
> 
> 时间：2012-09-27T20:53:33.380
> 
> 标签：mysql, sql

我在下面有 2 个数据库表：

问题表

```
QuestionId(Pk)  SessionId(PK)   Question
1               AAA             my name is
2               AAA             my age is
1               AAB             my DOB is 
```

Image_问题表

```
ImageQuestionId(Pk)  ImageId   SessionId   QuestionId
1                    1         AAB         1
2                    2         AAA         2 
3                    3         AAA         1 
```

我想要发生的是，如果用户从问题表中删除这一行：

```
1               AAB         my DOB is 
```

我希望它通过引用 SessionId 和 Question Id 来删除 Image_Question 表中的相应行。由于问题表中删除的行由 SessionId = AAB 和 QuestionId = 1 组成，它应该从包含 SessionId = AAB AND QuestionId = 1 的 Image_Question 表中删除相应的行，这意味着应该从中删除的唯一行图片问题如下：

```
1                    1         AAB         1 
```

这是因为 SessionId 和 QuestionId 都与问题表中已删除的行匹配。

有谁知道如何为此编写 SQL 代码？

更新：

下面是我试过的？

```
ALTER TABLE Image_Question ADD CONSTRAINT FK_SessionQuestion FOREIGN KEY (SessionId,QuestionId) REFERENCES Question (SessionId,QuestionId) ON DELETE CASCADE; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T21:42:08.777

你在你的约束下完全正确地做这件事。基本表定义一定有问题。也许你发表你的`CREATE TABLE`陈述。我的实验都成功了。看看我的日志：

我已经在以下[SQL Fiddle](http://sqlfiddle.com/#!2/c2cf7/1)的创建表中尝试过它并且它有效：

```
...
                            FOREIGN KEY (QuestionId,SessionId) 
                             REFERENCES Question(QuestionId,SessionId)
                             ON DELETE CASCADE
... 
```

但是你想要的是之后添加它。所以我制作了另一个[SQL Fiddle](http://sqlfiddle.com/#!2/06395/1)，当我稍后添加约束时它也可以工作：

```
ALTER TABLE Image_Question ADD CONSTRAINT
                           FOREIGN KEY (QuestionId,SessionId) 
                             REFERENCES Question(QuestionId,SessionId)
                             ON DELETE CASCADE; 
```

唯一的问题是，这似乎与您所做的完全相同：

```
ALTER TABLE Image_Question ADD CONSTRAINT FK_SessionQuestion 
                            FOREIGN KEY (SessionId,QuestionId) 
                            REFERENCES Question (SessionId,QuestionId) 
                            ON DELETE CASCADE; 
```

我尝试在此[SQL Fiddle](http://sqlfiddle.com/#!2/a44d6/1)中为约束命名。结果相同。

编辑：你的桌子`INDEX`上有一个`QUESTION`以便`FOREIGN KEY`正确引用吗？我意识到您`FOREIGN KEY`的顺序不同，`SessionID,QuestionID`而不是`QuestionId,SessionId`可以，只要您`INDEX`在`QUESTION`表格中的顺序也是如此。

编辑2：这里的全部内容：

```
CREATE TABLE Question (QuestionId INT      NOT NULL, 
                       SessionId  CHAR(3)  NOT NULL,
                       Question   CHAR(10) NOT NULL ) ENGINE=INNODB;

INSERT INTO Question VALUES (1,'AAA','my name is');
INSERT INTO Question VALUES (2,'AAA','my age is');
INSERT INTO Question VALUES (1,'AAB','my DOB is');

-- This is how to add a primary key afterwards
ALTER TABLE QUESTION ADD PRIMARY KEY(SessionId,QuestionId);

CREATE TABLE Image_Question (ImageQuestionId INT     NOT NULL, 
                             ImageId          INT     NOT NULL,
                             SessionId        CHAR(3) NOT NULL,
                             QuestionId       INT     NOT NULL,
                            PRIMARY KEY (ImageQuestionId)
                            ) ENGINE=INNODB;

INSERT INTO Image_Question VALUES (1,1,'AAB',1);
INSERT INTO Image_Question VALUES (2,2,'AAA',2);
INSERT INTO Image_Question VALUES (3,3,'AAA',1);

-- This is how to just add an index afterwards
CREATE INDEX par_ind on Image_Question (SessionId,QuestionId);

ALTER TABLE Image_Question ADD CONSTRAINT FK_CONSTRAINT_NAME
                           FOREIGN KEY (SessionId,QuestionId) 
                             REFERENCES Question(SessionId,QuestionId)
                             ON DELETE CASCADE;

delete from Question where QuestionId = 1 and SessionId = 'AAB'; 
```

而作为[SQL Fiddle](http://sqlfiddle.com/#!2/16839/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:57:16.940

```
DELETE FROM Image_Question 
WHERE QuestionID = 1 AND SessionId = AAB; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T21:17:35.643

使用外键约束，您必须有唯一的方法来识别两个表上的记录。由于`Questions`表上有一个复合主键 ( `QuestionId`& `SessionId(PK)`)，因此您需要创建一个引用复合键的约束。因此，您需要在`Image_Question`表上创建一个键复合键 ( `ImageQuestionId`& `SessionId`)。

# xpages - styleClass 属性在 InputField.EditBox 的主题中不起作用

> ID：12629870
> 
> 赞同：0
> 
> 时间：2012-09-27T20:54:36.360
> 
> 标签：xpages

我正在尝试通过主题设置编辑框的字体和大小。

如果我这样做：

```
<control>
    <name>InputField.EditBox</name>
    <property>
        <name>style</name>
        <value>
            font-family: Trebuchet MS, arial, verdana, ms sans serif;
            font-size: 50pt;            
        </value>
    </property>
</control> 
```

那么它工作得很好，但如果我尝试使用 styleClass 属性并引用一个 CSS 类，主题似乎被忽略了。我对 Column.View 和 InputField.TextArea 也有类似的问题，但是许多其他控件在 styleClass 和 css 上工作得很好。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T06:35:48.843

以下为所有编辑框添加一个 CSS 类：

```
<control>
    <name>InputField.EditBox</name>
    <property>
        <name>styleClass</name>
        <value>testClass</value>
    </property>
</control> 
```

`xp:this.resources`请记住使用标准选项或使用主题选项在 XPage 中包含相关样式表。在主题中，以下内容包括所有 XPage 上的样式表：

```
<resource>
    <content-type>text/css</content-type>
    <href>custom.css</href>
</resource> 
```

使用您的示例，样式表类看起来像这样：

```
.testClass {
    font-family: Trebuchet MS, arial, verdana, ms sans serif;
    font-size: 50pt;
} 
```

# css - 在窗口浏览器中拉伸一个 div

> ID：12629872
> 
> 赞同：2
> 
> 时间：2012-09-27T20:54:43.063
> 
> 标签：css, html

我有一个 div，我想拉伸整个屏幕。它具有 100% 的宽度，但是当浏览器大小发生变化时，它的大小缩小了，它只具有该大小的 100%。我将其更改为 1000 像素，但在我的桌面上它不会拉伸。

基本上我想要一个类似于谷歌主页顶部的 div。如果窗口缩小，它根本不会改变，并且在每个台式机/笔记本电脑分辨率上都被拉伸 100%

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T20:59:26.900

您应该使用为更大的屏幕`min-width`拉伸`<div>`而不是在较小的屏幕上低于 1000 像素：

```
div {
    min-width: 1000px;
    width: 100%;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T21:00:02.923

Google 在其标题中定义了最小宽度：

```
header {
    /* width: auto; possible to omit since it's the default value*/
    min-width: 1000px;
} 
```

示例：http: [//jsfiddle.net/E78WE/](http://jsfiddle.net/E78WE/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T20:58:30.553

你可以尝试这样的事情：

```
.thisStyle { min-width: 1000px; position:absolute; z-index: 9999; width:100%; height:20px; top: 0; left: 0; color: #ffffff;} 
```

并在正文中添加一个 div：

```
<div class="thisStyle">this is some content</div> 
```

并按照您希望的方式设置样式（背景颜色等）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T21:01:47.940

这就是谷歌的做法:)

最小宽度：980px；位置：绝对；宽度：1663px；

# c - 使用预处理器在 C 中使用类似语法的运算符重载

> ID：12629874
> 
> 赞同：3
> 
> 时间：2012-09-27T20:54:47.497
> 
> 标签：c, operator-overloading, c-preprocessor

在充满矢量计算的代码中使用以下预处理器技巧是一个好习惯吗？一方面，它使用通用标识符（mul，add，...）污染了命名空间，闻起来像一个肮脏的黑客，但另一方面，它可能使复杂的表达式更具可读性。还有其他优点/缺点吗？

```
typedef struct { double x,y; } vector;
vector vector_add(vector v0, vector v1);
double vector_mul(vector v0, vector v1);
...
#define _(a) opf(a)
#define mul ,mul,
#define add ,add,
...
#define opf(a,o,b) vector_##o((a),(b))

void example(void)
{
  vector a, b, c;
  double d;

  d = _( _(a add b) mul c);

  // equivalent without the macros:
  d = vector_mul(vector_add(a,b),c);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T22:33:28.147

不，这不是一个好主意（当然，在我看来）。

假设我相当了解 C 语言，如果我看到如下代码行：

```
d = vector_mul(vector_add(a,b),c); 
```

我很清楚它的作用。可以肯定的是，我需要查看 、 、 和 的类型`a`以及`b`函数`c`的`d`声明，但即使没有这些，我也可以放心地假设它正在执行向量加法和向量乘法。

另一方面，如果我看到：

```
d = _( _(a add b) mul c); 
```

在我首先追踪宏定义之前，我可能不知道它在做什么，然后要么研究它们直到我理解你的新语法，要么自己将它们扩展为我能理解的普通 C 代码。当然*你*知道你的语法是什么意思，如果你是唯一阅读代码的人，那很好，但其他人会想知道下划线是干什么用的。

这是假设我意识到您正在使用宏。宏名称通常以全大写形式书写。使用`ADD`and`MUL`将是一个改进，但恕我直言，不足以覆盖其他缺点。

个人轶事：很多年前，当我第一次学习 C 时，我认为是这样的：

```
#define EVER ;;

...

for (EVER) {
    /* ... */
} 
```

很聪明。我仍然认为它非常聪明；我只是不再认为这是一个好主意。

# java - 使用 db2 在 java 中的表调用中添加模式名称

> ID：12629879
> 
> 赞同：-1
> 
> 时间：2012-09-27T20:55:12.713
> 
> 标签：java, db2

我可能遇到了一个奇怪的问题。调用 DB2 数据库表中带有模式名称的表。

```
 ERROR [main] WorkflowMailer (processcycle:463) - DB2 SQL Error: SQLCODE=-204, 
   SQLSTATE=42704, SQLERRMC=etwrms.WFT_EMAIL_TMP, DRIVER=3.57.82 
```

我通过属性文件传递带有架构名称的 url。它在许多 SP 调用中运行良好，但在调用临时表时抛出错误。临时表存在于数据库中。根据我的观察，对表的调用与架构名称一起使用。表名（etwrms.WFT_EMAIL_TMP ，此处附加的模式名称）。请让我知道这个问题的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:49:29.637

[您收到](http://www.sqlerror.de/db2_sql_error_-204_sqlstate_42704.html)的错误表明该表不存在。

请注意，临时表并不是真正“存在于数据库中”；它们只存在于当前会话中。即使您同时打开两个连接到同一个用户名，那也是两个不同的会话；在一个连接中创建并继续存在的表将不会在另一个连接中看到。此错误很可能表明您已在一个会话中创建了临时表并试图在另一个会话中使用它。

如果您需要更具体的帮助，请显示创建表的语句（不同类型的临时表存在细微差别），尝试访问表的语句，并描述它们何时发生相关。

# javascript - d3 动画导致行为缓慢

> ID：12629882
> 
> 赞同：2
> 
> 时间：2012-09-27T20:55:20.047
> 
> 标签：javascript, animation, d3.js, transition

我正在使用 d3 显示热图。地板上的每个单元格在图中由一个矩形表示。右侧的复选框允许用户过滤掉一些矩形，这会导致大约 1 秒的不透明度变化过渡。

每隔一段时间（大约 25% 的时间），切换大量单元格的显示会导致浏览器（chrome）停止。页面冻结，CPU 风扇开始尖叫，10-20 秒后，细胞消失，一切恢复正常。

知道是什么原因造成的吗？绘图上有 7679 个单元格，具有不同的透明度和一些重叠。

![热图](../Images/74230f29b720718e94cd7f665fa0626f.png)

```
//-------------------------------------------------------------
//Create cells  
//-------------------------------------------------------------
var cells = svg.selectAll("rect").data(drawingData, function (d) { return d.id;});
cells.enter()
    .append("rect")
    .attr("x",              function(d) { return xScale(d.x); })
    .attr("y",              function(d) { return yScale(d.y); })
    .attr("width",          function(d) { return 4; })
    .attr("height",         function(d) { return 5; })
    .attr("fill",           function(d) { return channelcolors[d.channel]; })
    .attr("fill-opacity",   function(d) { return rssiScale(d.rssi_val); });

cells.exit()
    .transition()
    .duration(1000)
    .ease("linear")
    .style("opacity", 0)
    .remove(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T04:27:29.977

对，7679 个对象。太多的对象不能一次全部淡入/淡出。它在 javascript 方面陷入困境（必须一次执行如此多的更改）。然后，因为形状具有透明度，渲染器必须将它们全部合成，它也会被杀死。

显然，最简单、最省力的选择是根本不进行过渡。

但是，一个值得尝试的复杂选项（它可能有效也可能无效）是将所有必须淡入/淡出的矩形暂时转移到单个组中，然后将整个组淡化（即不是单个单元格） ）。

除此之外，您可以尝试错开过渡的开始时间。这意味着，每个单元格的转换都有一个 i 倍数的延迟（单元格的索引）。这样，在任何给定时刻，只有一定百分比的单元格正在转换。但是每个单元格动画的 1000 毫秒持续时间太长了。应该更像100ms。

# c++ - 从 Mac OS Roman 编码到 UTF8？

> ID：12629885
> 
> 赞同：0
> 
> 时间：2012-09-27T20:55:41.317
> 
> 标签：c++, c, winapi, character-encoding

我正在尝试将[Mac OS 罗马](http://en.wikipedia.org/wiki/Mac_OS_Romana)字符串转换为 UTF8 字符串：

`MacRoman: OneBW/1 Schwarzwei§:`

我正在使用这些调用：

```
nBufLen = MultiByteToWideChar(CP_MACCP, 0, macRomanString.c_str(), -1, NULL, 0);

MultiByteToWideChar(CP_MACCP, 0, macRomanString.c_str(), -1, tempWchar, nBufLen); 
```

在此刻：

`tempWhar = OneBW/1 Schwarzweiß:`

现在我打这个电话：

`WideCharToMultiByte(CP_UTF8, 0, tempWchar, -1, temp, nBufLen, NULL, NULL);`

我期望`temp`使用 UTF 8，但我得到了返回值`0`，这是不成功的翻译，一些字符串在`temp`. 我怎么知道 string in`temp`是 UTF 格式？

我是以正确的方式做的还是缺少了什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T21:48:11.693

`WideCharToMultiByte`将从输入中获取单个宽字符并将它们转换为输出中的多个字符。因此，在大多数情况下，输出将大于输入。您传递的缓冲区大小与从中获得的缓冲区大小相同，`MultiByteToWideChar`因此缓冲区自然太小了。

您可以使用与 相同的方式获取所需`MultiByteToWideChar`的缓冲区大小，为缓冲区大小传递 0 并使用返回的值。

当函数失败时，您在字符串末尾看到垃圾的原因是缓冲区没有空间容纳必要的终止空字符。打印字符串超出缓冲区的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T22:06:07.580

正如其他人所说，您的输出缓冲区太小。尝试这样的事情：

```
int nBufLen = MultiByteToWideChar(CP_MACCP, 0, macRomanString.c_str(), macRomanString.length(), NULL, 0); 
if (nBufLen != 0)
{ 
    std::vector<WCHAR> tempWchar(nBufLen, 0);
    MultiByteToWideChar(CP_MACCP, 0, macRomanString.c_str(), macRomanString.length(), &tempWchar[0], nBufLen); 

    nBufLen = WideCharToMultiByte(CP_UTF8, 0, &tempWchar[0], tempWchar.size(), NULL, 0, NULL, NULL);
    if (nBufLen != 0)
    {
        std::vector<CHAR> tempUchar(nBufLen, 0);
        WideCharToMultiByte(CP_UTF8, 0, &tempWchar[0], tempWchar.size(), &tempUchar[0], nBufLen, NULL, NULL);

        // use tempUChar as needed...
    }
} 
```

# java - Java 扫描器：出现“java.util.NoSuchElementException”错误，不知道为什么

> ID：12629895
> 
> 赞同：1
> 
> 时间：2012-09-27T20:56:13.087
> 
> 标签：java, arrays

我正在编写一个从文本文件中扫描的单词搜索程序。文本文件包含两个整数（拼图的尺寸，在本例中为 10x10），然后是拼图，然后是另一个整数（要查找的单词数量），最后是要查找的单词。我正在尝试编写代码，以便程序将执行一个 for 循环，该循环将扫描下一行，然后将字符串中的每个字符添加到 2D 数组中。然而，扫描仪似乎继续通过文件并最终在文件上“越界”，即使根据 for 循环，它应该运行不超过 10 次（拼图的尺寸为 10x10）

这是有问题的代码：

```
Scanner scan = new Scanner(new File("puzzle.txt"));
    int rows = scan.nextInt();
    int columns = scan.nextInt();   
    int [][] wordSearch = new int[rows][columns];

    for (int i = 0; i < rows; i++){
        for (int j = 0; j < columns; j++){
            String temp = scan.nextLine();
            for (int k = 0; k < temp.length(); k++){
                wordSearch[i][j] = temp.charAt(k);

              }
            }
        } 
```

这是拼图.txt：

*   10 10
*   垂直呼叫
*   ROOAFFLSAB
*   阿克里利亚托阿
*   NDODKONWDC
*   德克苏德克
*   OEEPZEGLIW
*   微华埃拉
*   ALRKRRIRER
*   KODIDEDRCD
*   赫尔斯劳特
*   10
*   星期
*   寻找
*   随机的
*   侦探
*   落后
*   垂直的
*   对角线
*   维基百科
*   水平的
*   词搜索

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T21:00:11.480

> 然而，扫描仪似乎继续通过文件并最终在文件上“越界”，即使根据 for 循环，它应该运行不超过 10 次（拼图的尺寸为 10x10）

不，看看你的循环：

```
for (int i = 0; i < rows; i++){
    for (int j = 0; j < columns; j++){
        String temp = scan.nextLine(); 
```

您正在为每一行*和*每一列运行它。我怀疑你实际上想要：

```
for (int i = 0; i < rows; i++) {
    String temp = scan.nextLine();
    for (int j = 0; j < columns; j++) {
        wordSearch[i][j] = temp.charAt(j);
    }
} 
```

当然，这假设您已将每行的长度正确设置为列数 - 您可能希望在阅读该行后验证这一点。

应该引起怀疑的一件事是这个内部循环：

```
for (int k = 0; k < temp.length(); k++) {
    wordSearch[i][j] = temp.charAt(k);
} 
```

这将为 中的`wordSearch[i][j]`每个字符覆盖相同的内容`temp`，使除最后一次迭代之外的所有迭代都毫无意义。

# database - 将现有工具与自定义数据库一起使用

> ID：12629899
> 
> 赞同：0
> 
> 时间：2012-09-27T20:56:32.137
> 
> 标签：database, entity-framework

我在本地磁盘上有大量数据。该数据由第 3 方程序每天更新。我知道数据文件的格式，并且我已经编写了代码来读取它们。为了利用这些数据，我发现自己编写了很多数据库类型代码。所以我开始研究使用现有的工具，如 LINQ、SQL、实体框架等。

这是一个大量的数据，每天都会更新，所以我不想复制它。是否可以设置实体框架或类似工具，以便它们以自定义格式读取数据？

# jquery - 带有“and”和“or”的jQuery选择器

> ID：12629905
> 
> 赞同：5
> 
> 时间：2012-09-27T20:57:02.147
> 
> 标签：jquery, jquery-selectors

有人可以帮我解决我在这里尝试做的语法吗？

```
jQuery('(div[data-positiontype="3"]) && (div[data-positiontitle*="test"] || div[data-positiondesc*='test'])') 
```

基本上，我需要能够选择所有具有特定“data-positiontype”属性和“data-positiontitle”属性或“data-positiondesc”属性中的标记的div。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T20:59:26.510

```
$('div[data-positiontype="3"]').filter('[data-positiontitle*="test"], [data-positiondesc*="test"]'). 
```

或直截了当：

```
$('div[data-positiontype="3"][data-positiontitle*="test"], div[data-positiontype="3"][data-positiondesc*="test"]'). 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T21:00:39.773

您将选择器堆叠在一起以查找匹配两者的元素，并`,`在选择器之间使用组合器：

```
jQuery('div[data-positiontype="3"][data-positiontitle*="test"],div[data-positiontype="3"][data-positiondesc*="test"]') 
```

# junit - JUnit、Spring 上下文和 Webflow

> ID：12629909
> 
> 赞同：1
> 
> 时间：2012-09-27T20:57:25.997
> 
> 标签：junit, spring-webflow

我正在尝试将 JUnit 配置为与 Spring 一起使用，但我不能。我的问题是它找不到 webflow 文件，因此执行失败。但是，这对我来说听起来很奇怪，因为我实际上并没有测试 webflow 的东西！我想从控制器开始到数据库。所以，这就是我正在做的

我以这种方式创建了一个测试类：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"classpath:/web-application-config.xml"})
public class MyControllerToTest {
        @Autowired
    private MyController ctr;

    @Test
    ....
} 
```

在类路径中，我插入了 web-application-config.xml 所在的 src/main/resources。这里是它的内容：

```
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context"
   xsi:schemaLocation="
       http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context-3.1.xsd">

<!-- Scans for application @Components to deploy -->
<context:component-scan base-package="com.infoone.mycontrollerpackage"/>

<!-- Imports the configurations of the different infrastructure systems of the application -->
<import resource="webflow-config.xml" />
<import resource="webmvc-config.xml" />
<import resource="data-access-config.xml" />
<import resource="repository-config.xml" />
<import resource="security-config.xml" /> 
```

当我作为 JUnit 运行 MyControllerToTest 类时，我得到以下信息：

```
ERROR: org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener
[org.springframework.test.context.support.DependencyInjectionTestExecutionListener@6419fa] to prepare test instance [com.infoone.myapp.MyControllerToTest@10036f2]
java.lang.IllegalStateException: Failed to load ApplicationContext
...
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flowExecutor': Cannot resolve reference to bean 'flowRegistry' while setting bean property 'flowDefinitionLocator'; nested exception is         org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flowRegistry': Invocation of init method failed; nested exception is java.lang.IllegalStateException: An I/O Exception occurred resolving the flow location pattern '/**/*-flow.xml'
...
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flowRegistry': Invocation of init method failed; nested exception is java.lang.IllegalStateException: An I/O Exception occurred resolving the flow location pattern '/**/*-flow.xml'
...
Caused by: java.lang.IllegalStateException: An I/O Exception occurred resolving the flow location pattern '/**/*-flow.xml'
...
Caused by: java.io.FileNotFoundException: class path resource [WEB-INF/flows/] cannot be resolved to URL because it does not exist[/code] 
```

也许，您还需要我的 web-flow-config 文件，该文件也位于 src/main/resources 中（而我的流位于 WEB-INF/flows/* */* .xml，但我也尝试将其移至 src/main/具有相同结果的资源）：

```
 <beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:webflow="http://www.springframework.org/schema/webflow-config"
   xmlns:faces="http://www.springframework.org/schema/faces"
   xsi:schemaLocation="
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
       http://www.springframework.org/schema/webflow-config http://www.springframework.org/schema/webflow-config/spring-webflow-config-2.3.xsd
       http://www.springframework.org/schema/faces http://www.springframework.org/schema/faces/spring-faces-2.2.xsd">

<!-- Executes flows: the central entry point into the Spring Web Flow system -->
<webflow:flow-executor id="flowExecutor">
    <webflow:flow-execution-listeners>
        <webflow:listener ref="facesContextListener"/>
        <webflow:listener ref="securityFlowExecutionListener" />
        <webflow:listener ref="icefacesFlowListener" />
        <webflow:listener ref="myFlowListener" />
        <webflow:listener ref="myExceptionListener" />
    </webflow:flow-execution-listeners>
</webflow:flow-executor>

<!-- The registry of executable flow definitions -->
<webflow:flow-registry id="flowRegistry" flow-builder-services="facesFlowBuilderServices" base-path="/WEB-INF/flows">
    <webflow:flow-location-pattern value="/**/*-flow.xml" />
</webflow:flow-registry>

<!-- Configures the Spring Web Flow JSF integration -->
<faces:flow-builder-services id="facesFlowBuilderServices" development="true" />

<!-- Installs a listener that creates and releases the FacesContext for each request. -->
<bean id="facesContextListener" class="org.springframework.faces.webflow.FlowFacesContextLifecycleListener"/>

<!-- Installs a listener to apply Spring Security authorities -->
<bean id="securityFlowExecutionListener" class="org.springframework.webflow.security.SecurityFlowExecutionListener" />

<bean id="icefacesFlowListener" class="com.icesoft.spring.security.WebflowListener" />

<bean id="myFlowListener" class="com.infoone.myapp.spring.webflow.AutowiringFlowExecutionListener" />

<bean id="myExceptionListener" class="com.infoone.myapp.exception.MyExceptionListener" /> 
```

请考虑我也在使用 JSF 和 Icefaces（目前我不想通过 JUnit 进行测试）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T06:28:08.093

您的 webflow 文件可能位于 webapp 源而不是 Java 源中，这就是为什么在您的 junit 测试中找不到它们的原因。

我建议让您的 Spring 配置文件更加模块化，然后更改您的测试以仅包含运行测试所需的那些 Spring 配置。

# c - 内存分配 C

> ID：12629912
> 
> 赞同：0
> 
> 时间：2012-09-27T20:57:43.610
> 
> 标签：c, memory, pointers, free

我有一个内存分配问题。如果我`char*`在一个`else`块中声明 a ，这意味着当块执行`char*`完毕时它被销毁。`else`该`else`块位于`while`循环中，因此它将迭代多次。但是，如果块中`char*`声明的`else`别名为`malloc'd`变量，如下例所示。我的问题是我如何收取这样的费用？我觉得如果我释放 temp`char*`变量，我会导致分段错误，因为我也会释放我想要保留的变量。如果是这样的话，我不知道该`free`声明的去向。

```
char* print_path = NULL; 
```

（剪断）

```
 (while)

 else{
        char* temp_path = print_path;
        int temp_size = strlen(temp_path)+strlen(file_name(child->fts_path))+1;
        print_path = (char*)malloc(temp_size);
        strcpy(print_path, temp_path);
        strncat(print_path, file_name(child->fts_path), strlen(file_name(child->fts_path)));
        printf("%s:\n\n", print_path);
        } 
```

（剪断）

我想指出，在我知道它不会再次执行之后，我在程序结束时执行了 free print_path。但是，我想释放的是循环的中间执行。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T21:00:57.883

看起来`free(temp_path)`是对的。它应该是这样的：

```
char * print_path = malloc(...);    // "NULL" is also possible

while (condition)
{
    if (...)
    {
         // ...
    }
    else
    {
        char * temp_path = print_path;

        print_path = malloc(...);

        free(temp_path);
    }
}

free(print_path); 
```

算法中的不变量是（或应该是）`print_path`始终指向动态分配的内存。请注意我们如何精确地`free`为每个`malloc`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T21:51:36.590

你有2个指针：

`print_paths`: 指向一个数组，比如`['h','e','l','l','o']`，这个指针包含数组第一个元素的地址，在这种情况下它指向`h`，可以说 this 的地址`h`是`1`，所以，`e`is的地址`2`等等......因此，`print_path`包含数字`1`。

`temp_path`: 这个指针不指向任何东西或指向内存中的随机位置。

当你调用时`malloc`，`malloc`请求一些内存并给你新分配的内存的地址，但是这个内存包含垃圾。

所以之后

```
print_path = (char*)malloc(temp_size); 
```

`print_path`包含新分配内存的地址，一个大小`temp_size`为垃圾的新数组，假设这个地址是 40，所以`print_path`值为`40`。

最后，当你打电话时：

```
strcpy(print_path, temp_path); 
```

`temp_path`您将数组( )的值复制`['h','e','l','l','o']`到 指向的数组`print_path`，换句话说，地址`40`而不是包含垃圾的地址现在包含`h`、`41`包含`e`等等。

重要的是要注意，即使 address (`1`和`40`) 都包含 value `h`，修改一个不会影响另一个。

最好的地方`free(temp_path)`是在结束之前`else`，只要检查`temp_path`分配的内存，如果你试图释放它没有获得的内存，你`malloc`会度过一段糟糕的时光。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T21:32:49.427

我相信，既然我想要做的事情是将内存重新分配给同一个变量，我应该研究 realloc 而不是 malloc。

# python - 使用另一个类调用一个类时出现 AttributeError

> ID：12629917
> 
> 赞同：-2
> 
> 时间：2012-09-27T20:57:57.510
> 
> 标签：python

我在无类函数中有这段代码：

```
 while room.getNumCleanedTiles() < min_coverage * room.getNumTiles():
            for index in range(0, len(roboList)):
                room.cleanTileAtPosition(positionList[index])
                roboList[index].updatePositionAndClean()
                positionList[index] = roboList[index].getRobotPosition
                count += 1 
```

*   `positionList`是类的职位列表`Position`。
*   该类`position`有两个方法，`getX`和`getY`。
*   `room`变量是类的一个房间，`Rectangular Room`它有一个称为 的方法`cleanTileAtPosition`，它以一个位置作为它的参数，并使用`getX()`和`getY()`方法进行一些操作。

代码太大，无法完整地附在此处，但问题似乎仅限于我所描述的方法和类。我收到一条错误消息：

```
"AttributeError: 'function' object has no attribute 'getX.'" 
```

但是，通过 print 语句可以清楚地看出这`positionList[index]`确实是 class 的位置`Position`；那`room`是一个`RectangularRoom`；当它们被独立`getX()`于.`getY()``cleanTileAtPosition`

这段代码有什么似乎会引发我得到的错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T21:02:43.337

`()`在 getRobotPosition 之后添加。

# entity-framework - Entity Framework 是否有 Intersystems Cache 的提供程序？

> ID：12629920
> 
> 赞同：2
> 
> 时间：2012-09-27T20:58:09.940
> 
> 标签：entity-framework, intersystems-cache

如果是这样，有什么缺点吗？有使用它的经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T15:45:28.623

现在不行。Microsoft 有一个可与 Entity Framework 一起使用[的第三方数据提供程序的列表，但 InterSystems Cache 目前不是其中之一。](http://msdn.microsoft.com/en-us/data/dd363565.aspx)

同时使用 EF 和 Cache 的开发人员数量可能相对较少，并且尚未保证 InterSystems 对其进行资源投资，但请随时让您的 InterSystems 支持代表知道您有兴趣让他们开发 .NET数据提供者。如果有足够多的人推动它，它可能会成为现实！

# html - 平滑 Div 滚动 | 浏览器调整大小后左/右热点失火

> ID：12629921
> 
> 赞同：1
> 
> 时间：2012-09-27T20:58:17.437
> 
> 标签：html, browser, resize, smooth-scrolling

smoothDivScroll 完美运行，直到用户调整浏览器窗口的大小。

用户调整浏览器窗口大小后，左右两侧的热点开始出现异常。

例如，有时左侧热点会一起停止工作，有时速度变化将不存在，它只会以超快或超慢速滚动。对于正确的热点也是如此。

其他一切似乎都很好。

可滚动内容的容器元素是固定比例的。

高度：404 像素宽度：780 像素

一探究竟：

[http://www.brendenmersey.com/dev/andreatiller/portfolio/index.html](http://www.brendenmersey.com/dev/andreatiller/portfolio/index.html)

我做错了什么？

*第一篇关于“溢出”的帖子，所以请多多包涵：D*

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:03:41.697

我检查了你的演示，一切似乎都是正确的。我认为这是 Smooth Div Scroll 中的一个错误，我必须看看。

感谢您在 Stackoverflow 上发布它！我已将其作为[新问题添加到 GitHub 页面上](https://github.com/tkahn/Smooth-Div-Scroll/issues/45)。

# javascript - 这个旋转木马的动态高度？

> ID：12629933
> 
> 赞同：0
> 
> 时间：2012-09-27T20:59:02.423
> 
> 标签：javascript, jquery, html, css, carousel

我有一个轮播，其中包含宽度相同但高度不同的图像。我不确定如何在不诉诸 JS 的情况下调整现有代码以适应此要求。我还想指出，我在这个旋转木马的各个方面都有内容。

目前，我已经`height:390px;`在 .slides 中进行了硬编码。我尝试将其更改为，`height:auto;`但它迫使轮播下方的所有内容向上移动〜375px（我给我的分页高度为15px）。

HTML：

```
<div id="carousel">
    <div class="slides">
        <div id="slide1" class="slide opaque">
            <img src="http://www.placehold.it/630x390">
            <div class="content">
                <div class="text">Slide01</div>
            </div>
        </div>
        <div id="slide2" class="slide">
            <img src="http://www.placehold.it/630x390">
            <div class="content">
                <div class="text">Slide01</div>
            </div>
        </div>
        <div id="slide3" class="slide">
            <img src="http://www.placehold.it/630x390">
            <div class="content">
                <div class="text">Slide01</div>
            </div>
        </div>
    </div>
    <ul class="pagination">
        <li id="pag-slide1" class="pag selected"></li>
        <li id="pag-slide2" class="pag"></li>
        <li id="pag-slide3" class="pag"></li>
    </ul>
</div> 
```

CSS/少：

```
#carousel {
    -moz-box-shadow: 0 2px 4px #777;
    -webkit-box-shadow: 0 2px 4px #777;
    box-shadow: 0 2px 4px #777;
    width: 630px;

    div.slides {
        position: relative; 
        float: left; 
        display: block; 
        width: 100%;
        height: 390px;
        margin: 0; 

        .slide {
            position: absolute; 
            left: 0; 
            -webkit-transition: opacity 1s ease-in-out;
            -moz-transition: opacity 1s ease-in-out; 
            -o-transition: opacity 1s ease-in-out; 
            -ms-transition: opacity 1s ease-in-out; 
            transition: opacity 1s ease-in-out; 
            opacity: 0; 
            -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)"; 
            filter: alpha(opacity=0); 

            img {
                border-top-left-radius:5px 5px;
                border-top-right-radius:5px 5px;
                border-bottom-left-radius:5px 5px;
                border-bottom-right-radius:5px 5px;
            }

            .content {
                color: white;
                font-weight: bold;
                z-index: 10;
                position: absolute;

                bottom: 40px;
                width: 100%;
                text-align: center;

                .text {
                    padding: 0 0 20px 0;
                }
            }
        }

        .slide.opaque, .slide.tempOpaque {
            opacity: 1; 
            -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=1)"; 
            filter: alpha(opacity=1);
        }   
    }

    ul.pagination { 
        padding: 0;
        margin: 0 auto;
        width: 200px;
        text-align: center;
        list-style-type: none; 
        position: relative; 
        top: -25px; 
        z-index: 9; 

        .pag {
            width: 15px; 
            height: 15px; 
            background: url(images/pagination.png) 0 0 no-repeat;
            position: relative; 
            display: inline-block; 
            margin: 0; 
            padding: 0;

            cursor: hand; cursor: pointer;
        }

        .pag.selected { 
            background:url(images/pagination.png) 0 -16px no-repeat;
        }
    }
} 
```

JS：

```
$(document).ready(function() {
    slidesArray = new Array();
    loadArray(slidesArray, 'slide', '#carousel .slides .slide');
    $("#carousel .pagination .pag").click(function() {
        var nextSlide = $(this).attr("id").replace("pag-slide", "");    
        animateTransition(nextSlide);
    });
    var slideTimer = setInterval(function() {
        fadeToNextSlide()
    }, 5000 );
});

function loadArray(array, prefix, path) {
    $(path).each(function(index) {
        array.push(prefix + (index + 1));
    });
}
function animateTransition(nextSlide) {
    $("#carousel .slides .opaque").addClass('tempOpaque');
    $("#carousel .slides .slide").removeClass("opaque");
    setTimeout(function(){
        $('#carousel .slides .slide.tempOpaque').removeClass('tempOpaque');
    },300);
    $("#carousel .slides #slide" + nextSlide).addClass("opaque");
    $("#carousel .pagination .pag").removeClass("selected");
    $('#carousel #pag-slide' + nextSlide).addClass("selected");   
}
function fadeToNextSlide() {
    var currentSlide = $('#carousel .slides .opaque').attr('id');
    var nextSlide = $.inArray(currentSlide, slidesArray) + 2;
    if (nextSlide > slidesArray.length) {
        nextSlide = 1;
    }
    animateTransition(nextSlide);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T21:14:28.003

通过更新您的`animateTransition`函数以首先检查图像高度（通过创建隐藏的图像元素并检查其高度），您可以确定和设置`.slides`div 的高度。只需将此位添加到该函数中：

```
$('body').append('<img style="position:absolute;top:0px;left:0px;visibility:hidden;" id="imgheight" src="'+$("#carousel .slides #slide" + nextSlide + ' img').attr('src')+'"/>');
var theheight=$('#imgheight').height();
$('#imgheight').remove();
$('.slides').height(theheight); 
```

JsFiddle 示例： http: [//jsfiddle.net/QvZLg/4/](http://jsfiddle.net/QvZLg/4/) （如果您检查元素，您会看到`.slides`每次图像更改时都会设置 div 的高度。）

快乐编码:)

# arrays - 如何更改坐标精度

> ID：12629934
> 
> 赞同：0
> 
> 时间：2012-09-27T20:59:02.243
> 
> 标签：arrays, google-maps-api-3

> 我将标记坐标存储在一个数组中，并希望将这些坐标与之前填充的 MVC 折线数组进行比较。对于此比较，我希望两个数组中的坐标最多为小数点后 3 位。我应该如何进行，因为 toUrlValue() 给出了字符串表示，我想实际比较值而不是字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:28:35.983

不确定为什么要使用 toUrlValue()，只需使用 .lat() 和 .lon()。然后可以使用 toFixed() 函数转换为 3dp。例如：

```
lat = myLatlng.lat().toFixed(3);
lon = myLatlng.lng().toFixed(3); 
```

# ios - OpenGLES 使用 glDrawArrays 对顶点进行排序以绘制正确的形状

> ID：12629948
> 
> 赞同：0
> 
> 时间：2012-09-27T21:00:01.987
> 
> 标签：ios, opengl-es, 3d, vertices

我正在阅读 OpenGLES 2.0 教程，作者在其中渲染了一个带有纹理的球体。球体看起来很好，是从 Wavefront OBJ 文件生成的。他使用的标头如下所示：

```
/*
created with obj2opengl.pl

source file    : sphere.obj
vertices       : 326
faces          : 648
normals        : 326
texture coords : 390

*/

unsigned int sphereNumVerts = 1944;

float sphereVerts [] = {
  // f 28/1/1 1/2/2 21/3/3
  7.6687116638888e-09, 0.466097, 0.115308018404908,
  -0.0265919923312883, 0.466097, 0.112200018404908,
  7.6687116638888e-09, 0.4795745, 1.84049079729628e-08,
  // f 21/4/3 1/2/2 2/5/4
  7.6687116638888e-09, 0.4795745, 1.84049079729628e-08,
  -0.0265919923312883, 0.466097, 0.112200018404908,
  -0.0517499923312883, 0.466097, 0.103043018404908,
  // f 21/6/3 2/5/4 3/7/5
  7.6687116638888e-09, 0.4795745, 1.84049079729628e-08,
  -0.0517499923312883, 0.466097, 0.103043018404908,
  -0.0741184923312883, 0.466097, 0.088331018404908,

 ... TRUNCATED ...

  // f 326/388/326 323/361/324 322/360/323
  7.6687116638888e-09, -0.5204255, 1.84049079729628e-08,
  0.0767490076687117, -0.490272, 0.152820018404908,
  0.109923007668712, -0.490272, 0.131001518404908,
  // f 326/389/326 324/362/325 323/361/324
  7.6687116638888e-09, -0.5204255, 1.84049079729628e-08,
  0.0394375076687117, -0.490272, 0.166400518404908,
  0.0767490076687117, -0.490272, 0.152820018404908,
  // f 326/390/326 325/363/299 324/362/325
  7.6687116638888e-09, -0.5204255, 1.84049079729628e-08,
  7.6687116638888e-09, -0.490272, 0.171010018404908,
  0.0394375076687117, -0.490272, 0.166400518404908,
};

float sphereNormals [] = {
  // f 28/1/1 1/2/2 21/3/3
  -0.00802618948953466, 0.967367838494132, 0.253248978930753,
  -0.0662268425664943, 0.967371914269316, 0.244551803932402,
  0, 1, -0,
  // f 21/4/3 1/2/2 2/5/4
  0, 1, -0,
  -0.0662268425664943, 0.967371914269316, 0.244551803932402,
  -0.120826192029109, 0.967370556337772, 0.222699883364347,
  // f 21/6/3 2/5/4 3/7/5
  0, 1, -0,
  -0.120826192029109, 0.967370556337772, 0.222699883364347,
  -0.168924852220773, 0.967372786949467, 0.18882342379009,
  // f 21/8/3 3/7/5 4/9/6

 ... TRUNCATED ...

  0, -1, -0,
  0.163004478217867, -0.939604578019474, 0.300953114364626,
  0.22801091084251, -0.939601478627697, 0.255264736885873,
  // f 326/389/326 324/362/325 323/361/324
  0, -1, -0,
  0.0891781381121659, -0.939606064036581, 0.330435627783284,
  0.163004478217867, -0.939604578019474, 0.300953114364626,
  // f 326/390/326 325/363/299 324/362/325
  0, -1, -0,
  0.0105903724426618, -0.939606044104724, 0.342094030777207,
  0.0891781381121659, -0.939606064036581, 0.330435627783284,
};

float sphereTexCoords [] = {
  // f 28/1/1 1/2/2 21/3/3
  0.000000, 0.925926,
  0.037037, 0.925926,
  0.000000, 1.000000,
  // f 21/4/3 1/2/2 2/5/4
  0.037037, 1.000000,
  0.037037, 0.925926,
  0.074074, 0.925926,
  // f 21/6/3 2/5/4 3/7/5
  0.074074, 1.000000,
  0.074074, 0.925926,
  0.111111, 0.925926,

 ... TRUNCATED ...

  // f 326/388/326 323/361/324 322/360/323
  0.888889, 0.037037,
  0.925926, 0.111111,
  0.888889, 0.111111,
  // f 326/389/326 324/362/325 323/361/324
  0.925926, 0.037037,
  0.962963, 0.111111,
  0.925926, 0.111111,
  // f 326/390/326 325/363/299 324/362/325
  0.962963, 0.037037,
  1.000000, 0.111111,
  0.962963, 0.111111,
}; 
```

我制作了自己的对象，然后使用 Cheetah3D 将其导出到头文件，它看起来像这样：

```
// Headerfile *.h (generated by Cheetah3D)
//
// There are the following name conventions:
//  NAME            =name of the object in Cheetah3D. Caution!! Avoid giving two objects the same name
//  NAME_vertex     =float array which contains the vertex,normal and uvcoord data 
//  NAME_index      =int array which contains the polygon index data
//  NAME_vertexcount    =number of vertices
//  NAME_polygoncount   =number of triangles
//
// The vertex data is saved in the following format:
//  u0,v0,normalx0,normaly0,normalz0,x0,y0,z0
//  u1,v1,normalx1,normaly1,normalz1,x1,y1,z1
//  u2,v2,normalx2,normaly2,normalz2,x2,y2,z2
//  ...
// You can draw the mesh the following way:
//  glEnableClientState(GL_INDEX_ARRAY);
//  glEnableClientState(GL_NORMAL_ARRAY);
//  glEnableClientState(GL_VERTEX_ARRAY);
//  glEnableClientState(GL_TEXTURE_COORD_ARRAY);
//  glInterleavedArrays(GL_T2F_N3F_V3F,0,NAME_vertex);
//  glDrawElements(GL_TRIANGLES,NAME_polygoncount*3,GL_UNSIGNED_INT,NAME_index);
//

#define Box_vertexcount     24
#define Box_polygoncount    12

float Box_vertex[Box_vertexcount][8]={
        {0.00000, 1.00000, 0.00000, 0.00000, 1.00000, -0.15000, -0.15000, 0.15000},
        {0.00000, 0.00000, 0.00000, 0.00000, 1.00000, -0.15000, 0.15000, 0.15000},
        {1.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.15000, 0.15000, 0.15000},
        {1.00000, 1.00000, 0.00000, 0.00000, 1.00000, 0.15000, -0.15000, 0.15000},
        {0.00000, 1.00000, 0.00000, 0.00000, -1.00000, 0.15000, -0.15000, -0.15000},
        {0.00000, 0.00000, 0.00000, 0.00000, -1.00000, 0.15000, 0.15000, -0.15000},
        {1.00000, 0.00000, 0.00000, 0.00000, -1.00000, -0.15000, 0.15000, -0.15000},
        {1.00000, 1.00000, 0.00000, 0.00000, -1.00000, -0.15000, -0.15000, -0.15000},
        {0.00000, 1.00000, -1.00000, 0.00000, 0.00000, -0.15000, -0.15000, -0.15000},
        {0.00000, 0.00000, -1.00000, 0.00000, 0.00000, -0.15000, 0.15000, -0.15000},
        {1.00000, 0.00000, -1.00000, 0.00000, 0.00000, -0.15000, 0.15000, 0.15000},
        {1.00000, 1.00000, -1.00000, 0.00000, 0.00000, -0.15000, -0.15000, 0.15000},
        {0.00000, 1.00000, 1.00000, 0.00000, 0.00000, 0.15000, -0.15000, 0.15000},
        {0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.15000, 0.15000, 0.15000},
        {1.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.15000, 0.15000, -0.15000},
        {1.00000, 1.00000, 1.00000, 0.00000, 0.00000, 0.15000, -0.15000, -0.15000},
        {0.00000, 1.00000, 0.00000, 1.00000, 0.00000, -0.15000, 0.15000, 0.15000},
        {0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -0.15000, 0.15000, -0.15000},
        {1.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.15000, 0.15000, -0.15000},
        {1.00000, 1.00000, 0.00000, 1.00000, 0.00000, 0.15000, 0.15000, 0.15000},
        {0.00000, 1.00000, 0.00000, -1.00000, 0.00000, -0.15000, -0.15000, -0.15000},
        {0.00000, 0.00000, 0.00000, -1.00000, 0.00000, -0.15000, -0.15000, 0.15000},
        {1.00000, 0.00000, 0.00000, -1.00000, 0.00000, 0.15000, -0.15000, 0.15000},
        {1.00000, 1.00000, 0.00000, -1.00000, 0.00000, 0.15000, -0.15000, -0.15000},
        };

int Box_index[Box_polygoncount][3]={
        {0, 1, 2},
        {2, 3, 0},
        {4, 5, 6},
        {6, 7, 4},
        {8, 9, 10},
        {10, 11, 8},
        {12, 13, 14},
        {14, 15, 12},
        {16, 17, 18},
        {18, 19, 16},
        {20, 21, 22},
        {22, 23, 20},
        }; 
```

我将它转换为与 OBJ 文件中的示例头文件相同的格式，所以它看起来像：

```
// sphere_3d.h Header File created from Cheetah 3d sphere File

unsigned int sphereNumVerts = 24;

float sphereTexCoords [] = {
       0.00000, 1.00000,
       0.00000, 0.00000,
       1.00000, 0.00000,
       1.00000, 1.00000,
       0.00000, 1.00000,
       0.00000, 0.00000,
       1.00000, 0.00000,
       1.00000, 1.00000,
       0.00000, 1.00000,
       0.00000, 0.00000,
       1.00000, 0.00000,
       1.00000, 1.00000,
       0.00000, 1.00000,
       0.00000, 0.00000,
       1.00000, 0.00000,
       1.00000, 1.00000,
       0.00000, 1.00000,
       0.00000, 0.00000,
       1.00000, 0.00000,
       1.00000, 1.00000,
       0.00000, 1.00000,
       0.00000, 0.00000,
       1.00000, 0.00000,
       1.00000, 1.00000,
};

float sphereNormals [] = {
       0.00000, 0.00000, 1.00000,
       0.00000, 0.00000, 1.00000,
       0.00000, 0.00000, 1.00000,
       0.00000, 0.00000, 1.00000,
       0.00000, 0.00000, -1.00000,
       0.00000, 0.00000, -1.00000,
       0.00000, 0.00000, -1.00000,
       0.00000, 0.00000, -1.00000,
       -1.00000, 0.00000, 0.00000,
       -1.00000, 0.00000, 0.00000,
       -1.00000, 0.00000, 0.00000,
       -1.00000, 0.00000, 0.00000,
       1.00000, 0.00000, 0.00000,
       1.00000, 0.00000, 0.00000,
       1.00000, 0.00000, 0.00000,
       1.00000, 0.00000, 0.00000,
       0.00000, 1.00000, 0.00000,
       0.00000, 1.00000, 0.00000,
       0.00000, 1.00000, 0.00000,
       0.00000, 1.00000, 0.00000,
       0.00000, -1.00000, 0.00000,
       0.00000, -1.00000, 0.00000,
       0.00000, -1.00000, 0.00000,
       0.00000, -1.00000, 0.00000,
};

float sphereVerts [] = {
       -0.15000, -0.15000, 0.15000,
       -0.15000, 0.15000, 0.15000,
       0.15000, 0.15000, 0.15000,
       0.15000, -0.15000, 0.15000,
       0.15000, -0.15000, -0.15000,
       0.15000, 0.15000, -0.15000,
       -0.15000, 0.15000, -0.15000,
       -0.15000, -0.15000, -0.15000,
       -0.15000, -0.15000, -0.15000,
       -0.15000, 0.15000, -0.15000,
       -0.15000, 0.15000, 0.15000,
       -0.15000, -0.15000, 0.15000,
       0.15000, -0.15000, 0.15000,
       0.15000, 0.15000, 0.15000,
       0.15000, 0.15000, -0.15000,
       0.15000, -0.15000, -0.15000,
       -0.15000, 0.15000, 0.15000,
       -0.15000, 0.15000, -0.15000,
       0.15000, 0.15000, -0.15000,
       0.15000, 0.15000, 0.15000,
       -0.15000, -0.15000, -0.15000,
       -0.15000, -0.15000, 0.15000,
       0.15000, -0.15000, 0.15000,
       0.15000, -0.15000, -0.15000,
}; 
```

我想使用 glDrawArrays 而不是 glDrawElements，这样我就不会使用索引数组。当我在我的程序中尝试替换我的自定义对象的头文件而不是示例程序中的示例时，形状通常（有点）看起来像我的替换对象，许多三角形都关闭并且没有连接到它们应该连接的位置是。

我知道我的顶点传递给 glDrawArrays 的顺序不正确，但我不知道为什么。我如何对它们进行排序，以便它们按照 glDrawArrays 要求的顺序排列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T00:13:50.947

有什么理由不想使用 glDrawElements 吗？如果您查看 Cheetah3D 头文件中的 Box_index 数组，您会看到一些顶点被多次使用，这意味着要使用 glDrawArrays 绘制同一个对象，您将不得不复制一些顶点（因此会使用更多内存）。使用 Box_index 数组，您可以使用 glDrawElements 绘制对象：

```
glDrawElements(GL_TRIANGLES, Box_polygoncount * 3, GL_UNSIGNED_INT, Box_index); 
```

（请注意，如果你有 0-256 个顶点，你应该使用字节作为索引，如果你有 257-65536 之间，则使用短裤）

# postgresql - 你如何告诉 Heroku 忽略开发组中的 SqlLite gem

> ID：12629950
> 
> 赞同：3
> 
> 时间：2012-09-27T21:00:03.927
> 
> 标签：postgresql, heroku, gem

我正在尝试在 Heroku 上部署一个带有注册表单的超级简单的 Sinatra 应用程序。

我收到错误

```
Process exited with status 1
2012-09-27T05:59:01+00:00 heroku[web.1]: State changed from starting to crashed 
```

进一步查看该事件中的日志，/app/vendor/bundle/ruby/1.9.1/gems/dm-core-1.2.0/lib/dm-core/adapters.rb:163:in `require': no such要加载的文件 -- dm-sqlite-adapter (LoadError)

我的 gem 文件如下所示：

```
group :development do
   gem 'dm-sqlite-adapter'
end
group :production do
  gem 'pg'
  gem 'dm-postgres-adapter'
end 
```

查看堆栈溢出，似乎 heroku 没有选择生产组或没有设置 postgres 数据库？（暗中野刺，请不要笑我）

但是运行这个

```
tonto:bpbl willbarker$ heroku addons 
=== serene-sea-9304 Configured Add-ons
heroku-postgresql:dev HEROKU_POSTGRESQL_COBALT 
```

显示配置了 postgres 数据库。那么，它是否出于某种原因在开发模式下运行？我如何让它忽略那条线？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T22:24:27.507

您可能需要在 Heroku 上设置`DATABASE_URL` [环境变量。](https://devcenter.heroku.com/articles/config-vars)

您收到的错误是`no such file to load -- dm-sqlite-adapter`，因此该文件*不可*用，并且`:development`您的 Gemfile 中的组尚未安装，正如您所希望的那样。

当您的应用程序设置 Datamapper 时，它使用以下行：

```
DataMapper::setup(:default, ENV['DATABASE_URL'] || "sqlite3://#{Dir.pwd}/campaign.db") 
```

所以它正在寻找一个名为`DATABASE_URL`但没有找到的环境变量，所以它正在寻找 Sqlite url。这会导致 Datamapper 尝试加载`dm-sqlite-adapter`并导致您遇到错误。

解决方案是确保`DATABASE_URL`已设置。尝试运行`heroku config`- 您可能不会看到`DATABASE_URL`. 您应该能够使用以下命令[提升您配置的数据库](https://devcenter.heroku.com/articles/heroku-postgresql#specifying-and-promoting-databases)：

```
$ heroku pg:promote HEROKU_POSTGRESQL_COBALT 
```

# xpages - 有没有办法在 xPages 中有一个标题单元格标签？

> ID：12629955
> 
> 赞同：0
> 
> 时间：2012-09-27T21:00:17.180
> 
> 标签：xpages

有没有办法在 xPages 中有一个标题单元格标签？我到处寻找这个，发现只有一个问题没有答案。

是否可以？我尝试使用 xp:th 但出现未知标签错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T04:32:28.840

也应该可以使用 Domino 8.5.3 中引入的 tagName 属性。

例如

```
<xp:panel tagName="th"></xp:panel> 
```

或者

```
<xp:text value="I am TH" tagName="th" /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T03:58:45.447

您必须使用通过 HTML

<th> </th>

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-29T05:26:43.057

我同意 stwissel 的观点。我使用“标准”html 构建表格并在表格中使用 XPages 控件。这样做，您还可以使用 XPage 中不可用的 HTML 元素，例如

```
 <table style="table-layout:fixed;" class="fixedTable">
        <colgroup>
            <col width="60" />
            <col width="190" />
        </colgroup> 
```

将 xp:tag 与 tagname 属性一起使用可能是一种更一致的方式，但会产生一些不必要的开销。

# javascript - 利用现有代码使选项卡处于活动状态

> ID：12629956
> 
> 赞同：1
> 
> 时间：2012-09-27T21:00:20.187
> 
> 标签：javascript, jquery, tabs

首先，如果我遗漏了您可能需要的任何东西以及一个模糊的问题，我会道歉。我陷入了困境，并且已经尽力了几个星期来找到解决方案。

我有以下代码，它是选项卡选择代码。我不太了解 jquery，只知道足够的 JavaScript 来掌握基础知识。我并不真正理解下面的所有代码，但我确实知道它控制了当您单击选项卡和页面初始加载时会发生什么。正确的？

目标是能够提供来自另一个站点的链接并使 Tab_2 或 Tab_3 处于活动状态。当前，第一个选项卡 (Tab_1) 在访问站点时始终是活动选项卡。我需要用户在页面加载时查看另一个选项卡中的内容，并且仍然能够单击每个选项卡进行更改。

我希望这对 jquery 大师有帮助。

这是处理选项卡的 jquery。

```
//Add to Global JS File
$(document).ready(function() {
    initTabbedHomeContent();
});

function initTabbedHomeContent() {
var tabsPanel = $('.home');

if (tabsPanel.length > 0) {
    var tabTitles = "";

    $.each($('.tab_container .tab'), function(i) {
        //var tabid = 'tab' + i
        //$(this).attr('id', 'tab' + i);

        var tabid = $(this).find('h2').eq(0).text()
        var tabid = tabid.replace(/\s+/g,'_')
        $(this).attr('id', tabid);
        $(this).addClass("tabsActive");

        //tabTitles += '<li><a href="#tab' + i + '"><span>' + $(this).find('h2').eq(0).text() + '</span></a></li>';
        tabTitles += '<li><a href="#' + tabid  + '"><span>' + $(this).find('h2').eq(0).text() + '</span></a></li>';
    });

    $('.tab_container').prepend('<ul class="tabs">' + tabTitles + '</ul>');
    $(".tab_container .tab, .tab_container .tab h2").hide();
    $("ul.tabs li:first").addClass("first");

    //This chooses the first item when nothing else is selected.
    $("ul.tabs li:first").addClass("active").show();
    $(".tab_container .tab:first").show();

    //ON Click Event
    $("ul.tabs li").unbind().click(function() {
        $("ul.tabs li").removeClass("active");
        $(this).addClass("active");
        $(".tab_container > .tab").hide();
        var activeTab = $(this).find("a").attr("hash");
        $(activeTab).show();
       return false;
    });

    $(document).ready(function() {
        var activeTab = location.href;
        var activeTabId = activeTab.substring(activeTab.lastIndexOf('#')+1);
        var activeTab = $(activeTabId).prev('li');
        //$(activeTab).addClass("active");

        //alert($(activeTabId));

        //alert($(activeTab).html());
        return false;
    });

} 
```

这是html片段。

```
<body class="home">
        <div class="heading">
            <br/><br/><br/><br/><br/><br/><br/>
            bla bla bla heading text goes here.
            <br/><br/><br/><br/><br/><br/><br/>
        </div>
        <div class="tab_container">
            <div class="tab">
                <div class="sp3column">
                <h2>Tab 1</h2>
                    bla bla bla Tab 1 text goes here.
                </div>
            </div>
            <div class="tab">
                <div class="sp3column">
                    <h2>Tab 2</h2>
                    bla bla bla Tab 2 text goes here.
                </div>
            </div>

            <div class="tab">
                <div class="sp3column">
                    <h2>Tab 3</h2> <!-- tab title -->
                    bla bla bla Tab 3 te xt goes here.
                </div>                                          
            </div>
        </div>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:53:29.390

首先，感谢您的阅读。我想只是打字给了我一些我没有想到的想法。有时退后一步会让事情变得更清楚。

添加

```
//To capture querystrings
var urlParams = {}; 
(function () {     
    var match,         
    pl     = /\+/g,  // Regex for replacing addition symbol with a space         
    search = /([^&=]+)=?([^&]*)/g,         
    decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },         
    query  = window.location.search.substring(1);      

while (match = search.exec(query))        
    urlParams[decode(match[1])] = decode(match[2]);
})(); 
```

在函数开头创建数组变量以支持检查 tabid 是否存在。

```
var tabArray = []; 
```

在“tabTitles”上方，我将“tabid”添加到新数组以支持检查 tabid 是否存在。

```
tabArray.push(tabid); 
```

修改定义“tabTitles”的行，将 li 类定义为 tabid

```
tabTitles += '<li class="'+ tabid +'"><a href="#' + tabid  + '"><span>' ... 
```

修改了“//当没有其他选择时选择第一项。” 区域。请注意，我测试 tabid 是否存在，如果不存在，它仍然会呈现第一个选项卡，没有人会更聪明。这将有助于防止奇怪的行为。

```
 //Checks to see if querystring for tabid
    if (urlParams["tabid"] !== undefined) {
         //check array to see if tabid exists
        if ($.inArray(urlParams["tabid"], tabArray) !== -1) {
            //Will use the identified tabid and make it the active tab
            $("ul.tabs ."+urlParams["tabid"]).addClass("active").show();
            var activeTab = $("ul.tabs ."+urlParams["tabid"]).find("a").attr("hash");
            $(activeTab).show();
        }else {
            //This chooses the first item when nothing else is selected.
            $("ul.tabs li:first").addClass("active").show();
            $(".tab_container .tab:first").show();   
        }   
    }else {
        //This chooses the first item when nothing else is selected.
        $("ul.tabs li:first").addClass("active").show();
        $(".tab_container .tab:first").show();      
    } 
```

现在我可以有一个链接，“bla.asp?tabid=Tab_2”，第二个选项卡将被选中。

# css - 名为 404 的 CSS 类或 ID

> ID：12629959
> 
> 赞同：-1
> 
> 时间：2012-09-27T21:00:41.553
> 
> 标签：css

我一直在开发一个网站，最近发现命名一个 css 类或 id '404' *（当然没有引号）*不会显示名为 404 的元素的任何样式。

直到我不得不创建一个 404 页面并相应地命名元素时，我才知道这一点。
*（我真的很惊讶我以前没有遇到过这个。）*

**这背后有什么具体原因吗？**
如果这是显而易见的事情，请原谅我的无知，已经进行了 48 小时的编码并且一开始因为我认为我的浏览器没有正确刷新我的 css 文件而崩溃！:P

无论如何，我只是简单地重命名了元素并且样式有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T21:03:22.243

`404`不是有效的标识符。您基本上必须以字母或下划线（或其他一些字符，例如`$`and `-`）开始标识符。

也请不要说它与 HTML4/5 没有任何关系 .. 这是一个 CSS 规则。CSS 标识符必须符合以下规则（包括在[CSS3](http://www.w3.org/TR/css3-selectors/#attribute-representation)中）：

> 在 CSS 中，标识符（包括选择器中的元素名称、类和 ID）只能包含字符 [a-zA-Z0-9] 和 ISO 10646 字符 U+00A0 及更高，加上连字符 (-) 和下划线 ( _); 它们不能以数字、两个连字符或一个连字符后跟一个数字开头。标识符还可以包含转义字符和任何 ISO 10646 字符作为数字代码（请参阅下一项）。例如，标识符“B&W？” 可以写成“B\&W\?” 或“B\26 W\3F”。请注意，Unicode 是逐个代码等效于 ISO 10646 的（参见 [UNICODE] 和 [ISO10646]）。
> 
> 在 CSS 2.1 中，反斜杠 () 字符可以指示三种类型的字符转义之一。在 CSS 注释中，反斜杠代表它自己，如果反斜杠紧跟在样式表的末尾，它也代表它自己（即 DELIM 标记）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T21:05:47.270

在 html 4 标准中，ids 和 classes 不能以数字开头。您可能需要仔细查看规范。然而，HTML 5 删除了大部分现有的限制。要使用它，您必须将您的文档类型更改为：

```
<!doctype html> 
```

我通常会建议使用这种 doctype，它可以保存使用，干净且面向未来。

CSS 也限制了选择器，但你可以用它的 Unicode 符号来转义它：

```
.\34 04{/*styles for your 404 class*/} 
```

**[例子](http://jsfiddle.net/poikl/an9Bw/)**

# actionscript-3 - 纯 as3 hgroup/vgroup 组件

> ID：12629966
> 
> 赞同：0
> 
> 时间：2012-09-27T21:01:09.303
> 
> 标签：actionscript-3, flash

想知道，也许有人知道类似于 Flex SDK HGroup/Vgroup 的组件可以在纯 as3 中使用，w/o Flex？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:46:52.563

有几个 as3 库具有这样的组件。

[Minimalcomps](http://www.minimalcomps.com)有一个 HBox 和一个 VBox，可以为您提供所需的内容。

如果您正在寻找使用 Stage3D 的东西，还有[Feathers](http://feathersui.com/)

# c# - 是否可以获得连接到您的 .NET Remoting 服务器的客户端的程序集信息？

> ID：12629971
> 
> 赞同：1
> 
> 时间：2012-09-27T21:01:29.700
> 
> 标签：c#, .net, remoting, .net-assembly, .net-remoting

是否可以获得连接到我们的.NET Remoting 服务的客户端的程序集信息（我真的只对获得连接程序集的版本感兴趣）？我能够获取客户端的 IPAddress，我也可以使用它通过网络获取机器名称，但我无法找到如何从客户端机器获取除这些信息之外的任何其他信息。不幸的是，涉及必须更新客户端的解决方案将不起作用，除非它只涉及修改 app.config 文件，在这种情况下，这将是一个可接受的解决方案。

此外，如果这可能与 WCF 而不是 .NET Remoting 相关，请告诉我，因为我可以利用它作为最终让我们远离 Remoting 的一些很好的杠杆。

提前感谢您对此的任何帮助！仅供参考，我们通常针对 .NET 4.0 构建，但也有运行 3.5 SP1 和 2.0 的旧包。

*编辑*忘了提一下，我们正在对客户端和服务器都可见的共享接口进行远程处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T00:10:28.997

不幸的是，我不相信这是可能的。您需要让客户端在方法调用中发送该信息。我明白为什么这会非常方便，但我不相信任何程序集版本信息是在 TCP/HTTP 标头中发送的。

# javascript - 在 NodeJS 中测试对象相等性

> ID：12629981
> 
> 赞同：23
> 
> 时间：2012-09-27T21:02:34.247
> 
> 标签：javascript, node.js, testing

我们正在为一个程序编写测试。我们想编写一个功能测试来验证程序的输出是否符合某些期望。返回的对象是一个复杂的 JS 对象（具有嵌套对象、许多属性......等）。

我们想测试这显然符合我们的需要。到目前为止，我们一直在“浏览”对象和预期结果，检查每个属性和每个嵌套对象。这非常麻烦，我们想知道是否有任何库可以“构建”所有测试，仅基于对象。例如像这样的东西。

```
var res = {
  a: {
    alpha: [1,2,3],
    beta: "Hello",
    gamma: "World"
    },
    },
    b: 123,
    c: "It depends"
  }
};
var expectation = {
  a: {
    alpha: [1,2,4],
    beta: "Hello",
    gamma: "World"
    },
    },
    b: 123,
    c: "It depends"
  }
};

assert(res, expectation) // -> Raises an error because res[a][b][2] is different from expectation[a][b][2]. 
```

[在示例中，我简化了我们对象的复杂性......]

**我应该坚持这样一个事实，即我们需要一段足够聪明的代码来告诉我们有什么不同，而不是仅仅告诉我们这两个对象是不同的。我们现在谈的是深度平等，但我们还没有发现任何能真正告诉我们差异的东西。**

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-27T21:20:36.353

Node 具有用于测试的内置[断言模块。](http://nodejs.org/api/assert.html)这有一个名为*deepEqual*的方法，用于深度相等检查。

函数签名是：

```
assert.deepEqual(actual, expected, [message]) 
```

用于测试 deepEquality 并返回 diff 的快速编写函数：

```
// Will test own properties only
function deepEqualWithDiff(a, e, names){
  var dif = {};
  var aKeys = Object.keys(a);
  var eKeys = Object.keys(e);

  var cKeys = aKeys;
  var dKeys = eKeys;
  var c = a;
  var d = e;
  var names = {
    c: names ? names['a'] : 'Actual',
    d: names ? names['e'] : 'Expected'
  }

  if(eKeys.length > aKeys.length){
    cKeys = eKeys;
    dKeys = aKeys;
    c = e;
    d = a;
    names = {
      d: names ? names['a'] : 'Actual',
      c: names ? names['e'] : 'Expected'
    }
  }

  for(var i = 0, co = cKeys.length; i < co; i++){
    var key = cKeys[i];
    if(typeof c[key] !== typeof d[key]){
      dif[key] = 'Type mismatch ' + names['c'] + ':' + typeof c[key] + '!==' + names['d'] + typeof d[key];
      continue;
    }
    if(typeof c[key] === 'function'){
      if(c[key].toString() !== d[key].toString()){
        dif[key] = 'Differing functions';
      }
      continue;
    }
    if(typeof c[key] === 'object'){
      if(c[key].length !== undefined){ // array
        var temp = c[key].slice(0);
        temp = temp.filter(function(el){
          return (d[key].indexOf(el) === -1);
        });
        var message = '';
        if(temp.length > 0){
          message += names['c'] + ' excess ' + JSON.stringify(temp);
        }

        temp = d[key].slice(0);
        temp = temp.filter(function(el){
          return (c[key].indexOf(el) === -1);
        });
        if(temp.length > 0){
          message += ' and ' + names['d'] + ' excess ' + JSON.stringify(temp);
        }
        if(message !== ''){
          dif[key] = message;
        }
        continue;
      }
      var diff = deepEqualWithDiff(c[key], d[key], {a:names['c'],e:names['d']});
      if(diff !== true && Object.keys(diff).length > 0){
        dif[key] = diff;
      }
      continue;
    }
    // Simple types left so
    if(c[key] !== d[key]){
      dif[key] = names['c'] + ':' + c[key] + ' !== ' + names['d'] + ':' + d[key]; 
    }
  }
  return Object.keys(dif).length > 0 ? dif : true;
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-27T21:07:23.397

JavaScript 不支持开箱即用的对象深度相等，我也不知道 NodeJS API 中内置了什么。

我的赌注可能是[Underscore](http://underscorejs.org/)和[isEqual](http://underscorejs.org/#isEqual)函数。

> npm 安装下划线

```
var _ = require('underscore');
var moe   = {name : 'moe', luckyNumbers : [13, 27, 34]};
var clone = {name : 'moe', luckyNumbers : [13, 27, 34]};
moe == clone;
=> false
_.isEqual(moe, clone);
=> true 
```

虽然大多数 Node 测试框架也应该包含一个对象深度相等断言，但你没有提到你使用的是哪一个。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-12-08T01:42:34.043

[deep-diff 可以满足](https://github.com/flitbit/diff)OP 的要求。它可以比较两个 javascript 对象/JSON 对象，并以您的代码可以访问的方式列出差异。

这是一个老问题，所以在提出问题时这个库可能不存在。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-06-21T09:36:52.443

请注意，`deepEqual()`自 Node.js v9.9.0 起，Node 已被弃用，请改用[deepStrictEqual()](https://nodejs.org/api/assert.html#assert_assert_deepstrictequal_actual_expected_message)：

```
const assert = require('assert');

const actual = {
  a: {
    name: 'some',
    b: {
      name: 'thing',
    },
  },
};

const expected = {
  a: {
    name: 'thing',
    b: {
      name: 'some',
    },
  },
};

assert.deepStrictEqual(actual, expected, 'Expect names to be equal.'); 
```

**专业提示：**如果您不在 中使用自定义消息`deepStrictEqual`，您将获得两个对象之间差异的漂亮彩色输出：

[![在此处输入图像描述](../Images/172812c9343d8ac783168417523ec0d1.png)](https://i.stack.imgur.com/5oisZ.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-28T15:39:56.937

虽然我认为已经涵盖了对象比较的基础知识（请参阅[此处](https://stackoverflow.com/questions/201183/how-do-you-determine-equality-for-two-javascript-objects)和其他内容），但如果您正在寻找一种快速而肮脏的方式来执行这些测试并查看两个不相等对象之间的差异，您可以运行您的在 Webstorm IDE 中使用 nodeunit 进行测试（[这里](http://www.jetbrains.com/webstorm/)）

Webstorm 与 nodeunit 集成得特别好，对于任何 test.equals() 或 test.deepEquals() 断言，它提供了一个带有突出显示的可见差异来显示你的差异。我强烈推荐 IDE，因为它将测试集成到我的 js 开发周期中。

现在，如果您需要在代码中访问该测试/差异的结果，这显然对您来说还不够，我建议您从我列出的第一个链接中复制几个 deepEquals 比较器。

祝你好运，

布赖恩

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-23T18:22:32.047

这是我使用 Lodash 编写的一个简单/灵活的深度差异函数：

```
_.merge(obj1, obj2, function (objectValue, sourceValue, key, object, source) {
    if ( !(_.isEqual(objectValue, sourceValue)) && (Object(objectValue) !== objectValue)) {
        console.log(key + "\n    Expected: " + sourceValue + "\n    Actual: " + objectValue);
    }
});
```

`console.log()`您可以用您需要的任何比较逻辑替换该语句。我的只是将差异打印到控制台。

# tsql - 在没有主键的情况下检查多条记录的差异

> ID：12629985
> 
> 赞同：0
> 
> 时间：2012-09-27T21:02:47.883
> 
> 标签：tsql, duplicates, primary-key, normalization

我的表结构大致如下（我省略了更多列）

```
WEAPON    MUNITION    RANGE 
```

我正在编写一个查询来检查一个表，其中包含许多具有不同范围的 WEAPON-MUNITION 配对。我需要找到武器弹药具有不同射程的每个实例。允许重复，因为此表中有多个数据集。是的，它违反了规范化，但我没有做到，我只需要查询它。

所以假设我有四个不同范围的武器弹药配对，我需要能够显示它们以便可以纠正它们。我尝试了一些复杂的 CTE 和非常复杂的自连接，但是当我认为我有结果时，我无法将它绑定回原始表，因为我认为是主键的列在数据集之间有重复！找到上述记录后，我需要显示整个记录。我最终得到的行数几乎是我开始时的 10 倍，但我不知道为什么。

没有要求 DBA 允许我为每条记录生成唯一的密钥，我不知道如何实现这一点。

***编辑*** 使用gregmac的例子我想出了这个查询（通用并省略了一些列和任何专有信息）

```
WITH range_cte AS 
( 
    SELECT 
        d1.WEAPON
       ,d1.MUNITION
       ,d1.WEAPON
       ,d1.RANGE
       ,d1.ID    --This is NOT a primary key! There are duplicates
    FROM data1 d1 INNER JOIN data2 d2
        ON  d1.WEAPON = d2.WEAPON
        AND d1.MUNITION = d2.MUNITION
        AND d1.RANGE <> d2.RANGE
    GROUP BY 
        d1.WEAPON
       ,d1.MUNITION
       ,d1.WEAPON
       ,d1.RANGE
       ,d1.ID
    ORDER BY 
        d1.WEAPON
       ,d1.MUNITION
)
--Self join the CTE on the original table using the ID (that's not a primary key)
SELECT * FROM range_cte r INNER JOIN data d
    ON r.ID = d.ID 
```

我的想法是为整个表插入一个自动生成的键，或者我应该在 CTE（如数据集）中包含更多列以形成某种自然键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T21:55:32.800

除非我理解错了，否则你需要简单地自我加入，并找到武器和弹药相同但射程不同的其他行。

我想出了这个：

```
SELECT d1.* 
FROM data d1
INNER JOIN data d2 
  ON d1.weapon = d2.weapon 
    AND d1.munition = d2.munition 
    AND d1.range <> d2.range
GROUP BY d1.weapon, d1.munition, d1.range -- eliminate duplicates which are caused by joining both ways 
         ,d1.other1 ,d1.other2
ORDER BY d1.weapon, d1.munition 
```

测试数据：

```
CREATE TABLE data
(
  WEAPON    varchar(20), 
  MUNITION  varchar(20), 
  RANGE     varchar(20),
  other1    varchar(20),
  other2    varchar(20)
);

INSERT INTO data VALUES ('a', 'x', '1', 'aaa','aaa');
INSERT INTO data VALUES ('a', 'x', '2', 'aaa','bbb');
INSERT INTO data VALUES ('a', 'y', '3', 'aaa','bbb');
INSERT INTO data VALUES ('a', 'z', '4', 'ccc','ddd');
INSERT INTO data VALUES ('b', 'x', '5', 'def','ghh');
INSERT INTO data VALUES ('b', 'z', '6', 'ccc','ddd');
INSERT INTO data VALUES ('b', 'z', '7', 'aaa','aaa');
INSERT INTO data VALUES ('b', 'z', '8', 'aaa','bbb');
INSERT INTO data VALUES ('b', 'z', '9', 'aaa','ccc'); 
```

和输出：

```
WEAPON  MUNITION  RANGE  other1  other2
a       x         1      aaa     aaa 
a       x         2      aaa     bbb 
b       z         6      ccc     ddd 
b       z         7      aaa     aaa 
b       z         8      aaa     bbb 
b       z         9      aaa     ccc 
```

Sqlfiddle：[http ://sqlfiddle.com/#!6/65590/3/0](http://sqlfiddle.com/#!6/65590/3/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T21:42:11.257

想法：创建一个包含所有武器弹药对和正确射程的新表。根据新表中的值更新原始表。

```
UPDATE o
SET o.range = n.range
FROM original AS o
JOIN new AS n ON o.weapon = n.weapon
    AND o.munition = n.munition 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T21:50:42.323

我不能从描述中确定，但也许你想要这样的东西（“mytable”cte 只是我为你的表生成测试数据的尝试，包括一个“othercolumn”，但可能还有更多）：

```
WITH mytable AS (
    SELECT * 
    FROM (
    VALUES('w1','m1',10, 'o1'), ('w1','m1',20, 'o2'), 
           ('w2','m2',10, 'o3'),
           ('w3','m3',10, 'o4'), ('w3','m3',20,'o5'), ('w3','m3',30,'o6')
    )x(weapon,munition,[range], othercolumn)
), MultiRange AS (
SELECT weapon, munition FROM mytable
GROUP BY weapon,munition
HAVING COUNT(DISTINCT [range])>1
)
SELECT t.*
FROM mytable t
JOIN MultiRange m ON m.weapon = t.weapon AND m.munition = t.munition
ORDER BY weapon, munition, [range] 
```

# asp.net - ASP.NET WebForms“长度不能小于 0 或超过输入长度。” 在应用程序启动时

> ID：12629991
> 
> 赞同：1
> 
> 时间：2012-09-27T21:03:33.240
> 
> 标签：asp.net, webforms, compiler-errors, visual-studio-2012

我正在选择一个旧的 ASP.NET WebForms 项目，我在启动时得到了这个：

> 长度不能小于 0 或超过输入长度。参数名称：长度

令人费解的是，*我的应用程序代码不在堆栈跟踪*中。这是显示的内容：

```
[ArgumentOutOfRangeException: Length cannot be less than 0 or exceed input length.
Parameter name: length]
   System.Text.RegularExpressions.Regex.Run(Boolean quick, Int32 prevlen, String input, Int32 beginning, Int32 length, Int32 startat) +6697802
   System.Text.RegularExpressions.Regex.Match(String input, Int32 beginning, Int32 length) +48
   Microsoft.VisualStudio.Web.PageInspector.Runtime.WebForms.LiteralWithCommentsHelper.FindComments(String source, Int32 sourceStart, Int32 sourceEnd) +89
   Microsoft.VisualStudio.Web.PageInspector.Runtime.WebForms.LiteralWithCommentsHelper..ctor(String source, Int32 sourceStart, Int32 sourceEnd) +27
   Microsoft.VisualStudio.Web.PageInspector.Runtime.WebForms.SelectionMappingParseRecorder.PostProcessBlockList() +311
   Microsoft.VisualStudio.Web.PageInspector.Runtime.WebForms.SelectionMappingParseRecorder.BuildBlockList(ControlBuilder root) +100
   Microsoft.VisualStudio.Web.PageInspector.Runtime.WebForms.SelectionMappingParseRecorder.ParseComplete(ControlBuilder root) +101
   System.Web.UI.ParseRecorderList.ParseComplete(ControlBuilder root) +71
   System.Web.UI.TemplateParser.HandlePostParse() +184
   System.Web.UI.TemplateControlParser.HandlePostParse() +13
   System.Web.UI.PageParser.HandlePostParse() +12
   System.Web.UI.TemplateParser.Parse() +154
   System.Web.Compilation.BaseTemplateBuildProvider.get_CodeCompilerType() +110
   System.Web.Compilation.BuildProvider.GetCompilerTypeFromBuildProvider(BuildProvider buildProvider) +59
   System.Web.Compilation.BuildProvidersCompiler.ProcessBuildProviders() +209
   System.Web.Compilation.BuildProvidersCompiler.PerformBuild() +15
   System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath) +9929933
   System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate) +299
   System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate) +103
   System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean throwIfNotFound) +165
   System.Web.Compilation.BuildManager.CreateInstanceFromVirtualPath(VirtualPath virtualPath, Type requiredBaseType, HttpContext context, Boolean allowCrossApp) +43
   System.Web.UI.PageHandlerFactory.GetHandlerHelper(HttpContext context, String requestType, VirtualPath virtualPath, String physicalPath) +31
   System.Web.UI.PageHandlerFactory.System.Web.IHttpHandlerFactory2.GetHandler(HttpContext context, String requestType, VirtualPath virtualPath, String physicalPath) +64
   System.Web.HttpApplication.MapHttpHandler(HttpContext context, String requestType, VirtualPath path, String pathTranslated, Boolean useAppConfig) +191
   System.Web.MapHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +145
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155 
```

我刚刚接手这个项目，所以我不确定发生了什么变化，但我知道它在过去的某个时候有效。:) 最近，我将项目文件从 VS 2010 升级到 VS 2012，但是没有引发任何警告，因此出现这种情况似乎很奇怪。这是一个用 VB.NET 编写的 .NET 4.0 项目。

关于在哪里寻找或如何进一步诊断的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:03:44.153

好的，通过大量的试验和错误，我想我已经弄清楚了。

罪魁祸首是aspx页面中的服务器端包含：

```
<!-- #include file="include/header.inc" --> 
```

当包含的文件包含代码块时，即

```
<% Response.Write("Im broken") %> 
```

出现上述异常。如果包含的文件仅包含纯文本/html，则它可以正常工作，仅当存在代码块时。

This worked prior to upgrading to Visual Studio 2012, so it seems to be a vs 2012 parser bug...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T09:34:59.107

So, this seems to be a bug in Microsoft Page Inspector. You can tell VS2012 to use Page Inspector instead of Chrome/IE/Firefox when debugging web sites. However, I do not understand why the Page Inspector is involved when I have chosen not to use it, but it is there. To me, it caused both the call stack above and it causes HTML documents to be clipped half way through.

The best solution I have found is to disable the Page Inspector by removing its assembly, in web.config:

```
<compilation defaultLanguage="c#" debug="true" targetFramework="4.0">
  <assemblies>
    <remove assembly="Microsoft.VisualStudio.Web.PageInspector.Loader, Version=1.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
  </assemblies>
</compilation> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T21:17:46.770

我最好的猜测——这只是一个猜测——是基于出现在你的堆栈跟踪中的模块。

我猜你的构建中发生了一些复杂的事情，或者你的页面上有格式错误的标签或某种编译器指令。

检查项目文件，看看是否有任何特殊的构建脚本、构建事件等。

您可以尝试将启动页面加载到设计器中并查看会发生什么。任何警告或信息消息？任何字形错误？红线？

# r - 来自包 tm 的 findAssocs 问题

> ID：12629993
> 
> 赞同：5
> 
> 时间：2012-09-27T20:26:39.287
> 
> 标签：r, text-mining

我正在尝试使用 tm 包在术语文档矩阵中查找与特定单词相关的单词。

我`findAssocs`用来做这个。的论据`findAssocs`是：

*   x：术语文档矩阵。
*   术语：持有术语的字符。
*   corlimit：相关下限的数字。

我一直得到`numeric(0)`我的结果

例子：

```
findAssocs(test.dtm, "investment", 0.90)
>numeric(0) 
```

有谁熟悉`findAssocs`并知道我做错了什么？或者有谁更广泛地知道`numeric(0)`结果可能意味着什么？

非常感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T05:33:01.707

该结果表明，在 0.90 个文档中没有与“投资”一词相关联的词。尝试一个较低的阈值，例如 0.05，然后逐步达到产生更少术语的阈值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T19:38:04.927

我也一样`numeric(0)`，我认为这是因为我的文档中只有一个文档`Corpus`，所以`document term matrix`只有一列。您可能想测试一下`TermDocumentMatrix()`，看看您是否有`multi-column matrix`. 也就是说，我如何在一个文档中找到关联？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-10T21:09:03.710

看来此功能仅在分析多个文本文档时才有效。我想出的唯一可行的解​​决方案是创建文本文档的副本，然后运行分析。但是，不确定这是否会以任何方式改变结果。任何额外的反馈将不胜感激。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-08T05:20:45.153

我认为这也与您的数据文件有关。一个文本文件应该可以工作，但如果它是一个只有一列的 .csv，你会得到 (0)

# android - Android自定义静态xmlfile

> ID：12629994
> 
> 赞同：0
> 
> 时间：2012-09-27T21:03:42.423
> 
> 标签：android, android-resources

好的，所以我想将自定义静态 xml 文件放入我的应用程序中，以便我可以轻松地从中提取数据。我面临的问题是，每次我尝试将 xml 文件添加到 res/values/ 时我得到无效的开始标签，我真的很想使用我自己的标签，而不是被迫使用`<resources>`和`<item>`. 如果我想使用这些自定义标签，是否必须将其存储在单独的位置，或者我只是被搞砸了。

```
<?xml version="1.0" encoding="utf-8"?>
<sports>
    <men>
        <sport>
            <name>Baseball</name>
            <code>baseball</code>
        </sport>
    </men>
    <women>
    </women>
</sports> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:10:44.533

对于像这样的静态 xml 文件，您需要将它们放在“res”目录下的“raw”或“xml”文件夹中。这样Android就不会尝试解析它。您可以在 Android 文档中阅读有关它的更多信息。[http://developer.android.com/guide/topics/resources/providing-resources.html](http://developer.android.com/guide/topics/resources/providing-resources.html)

# php - mysql 查询中的多个 if 语句没有正确响应

> ID：12629999
> 
> 赞同：0
> 
> 时间：2012-09-27T21:04:07.123
> 
> 标签：php, mysql, database

我在 mysql 数据库中有一个表，它有八列。品牌、类型、描述、尺寸、胎面、库存、价格、图片。我在下面使用的 if 语句效果很好。

```
if($brandname=="Any Brand" && $pickchecker=="Single" ){

    $query = "SELECT * FROM tirestock WHERE Size='$picked' AND Description='$pickcheck' AND Stock IN('1','3')"; 
```

当我向其中添加 elseif 语句时，第二条语句不起作用，即使有成对的库存，它也不返回任何库存记录。

```
if($brandname=="Any Brand" && $pickchecker=="Single" ){

    $query = "SELECT * FROM tirestock WHERE Size='$picked' AND Description='$pickcheck' AND Stock IN('1','3')";
}   
elseif ($brandname=="Any Brand" && $pickchecker=="Pair"){

    $query = "Select * FROM tirestock WHERE Brand='$brandname' AND Size='$picked' AND Description='$pickcheck' AND Stock='2'";
} 
```

我做错了什么，为什么这不起作用？这来自一个 php 脚本，用于在用户选择单选按钮 $pickchecker 单选或成对时查询数据库。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T21:12:20.757

我想你只是想`Brand='$brandname' AND`从第二个查询中删除。它没有出现在第一个，并且由于您正在搜索文字字符串“Any Brand”，我认为您不会得到任何结果。

*根据@andrewsi 的评论回答*