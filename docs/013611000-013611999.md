# StackOverflow 问答 13611000-13611999

# c# - Windows 8 中的动画

> ID：13611002
> 
> 赞同：1
> 
> 时间：2012-11-28T17:31:18.207
> 
> 标签：c#, xaml, animation, windows-8

> **可能重复：**
> [在 Metro 应用程序中显示动画 GIF](https://stackoverflow.com/questions/12756324/display-an-animated-gif-in-a-metro-app)

我正在创建一个 Windows 8 应用程序，我的客户要求我包含动画 gif，但由于它们不受支持，所以我有点卡住了。我读过只有一些设备支持闪存文件，所以这对我来说也不是一个选择。

Windows 8 还支持哪些其他动画类型？我猜 Silverlight 动画是受支持的，但这真的是我唯一的选择吗？如果是的话，那就太有限了。

# java - 运行时错误处理

> ID：13611006
> 
> 赞同：0
> 
> 时间：2012-11-28T17:31:33.300
> 
> 标签：java, exception, runtime-error

```
class A {
    B b = new B();
    b.myMethod();
}

class B {
    public void myMethod() {
        C c = new C();
        c.errMethod();
    }
}

class C {
    public int errMethod() {
        // Some runtime Error
    }
} 
```

中的一些运行时错误`errMethod()`。我的应用程序不应该关闭。我应该在这里做什么？

这是 Java 面试题之一，我们不应该使用任何异常处理技术。有没有其他方法来处理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:36:10.443

在 try/catch 块中编写 errMethod 中的代码。

```
public int errMethod(){

   try{
    //code goes here
   }
   catch(Exception e){
    // handle exception
   }
} 
```

# emgucv - 如何在 Emgu CV 中声明矩阵数组？

> ID：13611008
> 
> 赞同：1
> 
> 时间：2012-11-28T17:31:38.497
> 
> 标签：emgucv

我是 Emgu CV 的新手。我需要一个矩阵数组来存储灰度图像的像素值。是否可以声明一个矩阵数组。

我为矩阵数组编写了这样的代码但是给出了“错误”

```
public Matrix<Double>[] Myimgmatrix = new Matrix<Double>[5](100,80); 
```

错误：“方法名称预期”任何人请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T11:50:14.850

这样做：

```
private Matrix<Double>[] Myimgmatrix = new Matrix<Double>[5]; 
```

然后，在您的类构造函数中，分别初始化数组上的每个矩阵：

```
for(int i = 0; i < Myimgmatrix.Length; i++)
    Myimgmatrix[i] = new Matrix<Double>(100,80); 
```

据我所知，您不能同时实例化数组及其元素。

如果您不想灵活使用数组的大小，也可以创建一个矩阵列表：

```
private List<Matrix<Double>> matrixList = new List<Matrix<Double>>(); 
```

然后，当您需要一个新矩阵时，只需将其添加到您的列表中，在代码上：

```
matrixList.Add(new Matrix<Double>(100,80)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:13:31.303

实际上，您可以直接从 emgucv 中的图像数据中访问灰度像素值。您可以从此链接[使用矩阵检查 emgu cv 中的实现](https://stackoverflow.com/questions/7197153/work-with-matrix-in-emgu-cv)

# tree - 搜索一棵树，如果一个节点出现不止一次，则返回 true

> ID：13611010
> 
> 赞同：2
> 
> 时间：2012-11-28T17:31:48.200
> 
> 标签：tree, lisp

我有一个家庭作业，我需要做以下事情：

> 以树为参数并返回 nil/non-nil 值的函数，指示树是否仅包含唯一节点（即：树中没有重复节点）。

到目前为止，我已经编写了以下代码。我是一个 lisp 新手，我需要完成我的作业。这是我尝试实施的第一个解决方案。但是当我编译它时，它给了我以下错误：函数位置必须包含一个符号或 lambda 表达式：（第一棵树）。

```
 (defun in (tree)
    (cond ((null tree)
           t)
          ((eq (first tree) (second tree))
           nil)
          ((listp (first tree))
           (or ((first tree) in  (second tree))
               ((first tree) in  (rest tree))))
          (t
           ((first tree) in (rest tree))))) 
```

这是我的第二次尝试，它也不起作用：

```
(defun flatten (structure)
  (cond ((null structure) nil)
        ((atom structure) `(,structure))
        (t (mapcan #'flatten structure))))

(defun uniNodes (inList &optional (out t) (test 0))
  (cond ((null inList)
         out)
        ((zerop test)
         (uniNodes (flatten(cons (first inList) (rest inList))) out (+ test 1)))
        ((eq t (first out))
         (uniNodes (rest inList) (compare1 (first inList) (rest inList) (first out)) test))
        ((eq nil (first out))
         out)))

(defun compare1 (a list &optional (out t))
  (cond ((null list)
         out)
        ((equal a (first list))
         nil)
        (t
         (compare1 a (rest list) (first out))))) 
```

你能给我一些见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:30:02.510

我建议你递归遍历树，收集表中的节点。

```
(defun find-dupes (tree)
  (let ((table (make-hash-table)))
    (labels ((check-node (node)
               (when (consp node)
                 (when (gethash node table)
                   (return-from find-dupes node)) ; return the dupe
                 (setf (gethash node table) node) ; memorize the node
                 (check-node (car node))
                 (check-node (cdr node)))))
      (check-node tree)))) 
```

您将需要弄清楚如何更改上述代码以适应您的问题。

至于你的错误，

```
Function position must contain a symbol or lambda expression: (FIRST TREE) 
```

意味着您需要修复函数调用

```
(A in B) 
```

和

```
(in A B) 
```

您没有解释您的第二次尝试有什么问题，尽管它似乎是参数大小的二次方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:23:22.060

如果树不是很大，那么这种递归方法可以：

```
(defun tree-contains-duplicates-p (tree)
  (labels ((%tree-contains-duplicates-p (node table)
             (cond
               ((null node) t)
               ((consp node)
                ;; lists can't be same unless they have
                ;; same atoms, but having two `nil' lists
                ;; is a trivial case, which you want to ignore
                ;; probably
                (and (%tree-contains-duplicates-p (car node) table)
                     (%tree-contains-duplicates-p (cdr node) table)))
               (t (unless (gethash node table)
                    (setf (gethash node table) t))))))
    (not (%tree-contains-duplicates-p tree (make-hash-table))))) 
```

否则，您希望将其展开到一个循环中，在其中记录遍历树所采取的最后一个动作，并从那里击中叶子恢复。

看起来这应该工作：

```
(defun tree-contains-duplicates-p (tree)
  (loop with leaf = tree
     with stack = nil
     with table = (make-hash-table)
     while (or leaf stack)
     do (cond
          ((null leaf)
           (setq leaf (car stack) stack (cdr stack)))
          ((consp (car leaf))
           (when (cdr leaf)
             (setq stack (cons (cdr leaf) stack)))
           (setq leaf (car leaf)))
          (t (setq leaf (cdr leaf))))
       (when leaf
         (if (gethash (car leaf) table)
             (return t)
             (setf (gethash (car leaf) table) t))))) 
```

# javascript - 在我的 timerproject 中实现 onTouch 事件

> ID：13611013
> 
> 赞同：0
> 
> 时间：2012-11-28T17:32:00.447
> 
> 标签：javascript, android, touch-event, ontouchlistener, countdowntimer

我有一个计时器，我想在按住按钮时启动，并在我松开时重置计时器。onClick 是可能的，但我真的不知道如何在这个项目中使用 onTouch 事件。第一个代码片段有效，但如何实现触摸而不是点击？

```
 @Override

    public void onClick(View v)
        {
            if (!timerHasStarted)
                {
                    countDownTimer.start();
                    timerHasStarted = true;
                    startB.setText("Start");

                }
            else
                {

                    countDownTimer.cancel();
                    timerHasStarted = false;
                    startB.setText("RESET");
                }
        } 
```

* * *

```
 public boolean onTouch(View v, MotionEvent event) {

        final float mouseSensitivity = 0.5f;

        if(event.getAction()==MotionEvent.ACTION_DOWN){
            countDownTimer.start();
            timerHasStarted = true;
        } else if(event.getAction()==MotionEvent.ACTION_UP){
            countDownTimer.cancel();
            timerHasStarted = false;

        }
        return timerHasStarted; } } 
```

* * *

```
public void onTouch(View v, MotionEvent event) {

       // final float mouseSensitivity = 0.5f;

        if(event.getAction()==MotionEvent.ACTION_DOWN){
            countDownTimer.start();
            timerHasStarted = true;
        } else if(event.getAction()==MotionEvent.ACTION_UP){
            countDownTimer.cancel();
            timerHasStarted = false;

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:06:43.637

确保通过添加 @override 注释来覆盖 onTouch，第二个实现肯定不会，因为 onTouch 总是返回布尔值。

确保你接到了触摸电话，没有其他人。将视图的 onTouchListener 设置为您的对象，或者使用您自己的类扩展视图并实现 onTouchEvent

考虑是否需要检查视图是否确实是提到的按钮

还要处理 MotionEvent.CANCEL，因为这种情况时不时发生，然后您可能想要做一些事情。MotionEvent.MOVE 可以跳过，因为当这种情况发生时您不想做任何事情。

onTouch 应该返回它是否处理事件，而不是您的个人计时器的状态。

# jquery - .append() 运行多次而不是一次

> ID：13611014
> 
> 赞同：0
> 
> 时间：2012-11-28T17:32:01.307
> 
> 标签：jquery, jquery-animate

如果您查看您看到`alert('hey');`的这段脚本，则会在文档头部附加五次。它不会引起任何问题，但我想知道如何让它只发生一次。

```
$('#logo').fadeIn(2000, function() {
        $(this).animate({ top: "-=20px" },{
        duration: 1000, 
        specialEasing: {top: 'easeOutQuad', left: 'easeInQuad'},      
            complete: function () {
                $(this).animate({ top: "63px" },{
                duration: 1000, 
                specialEasing: {top: 'easeOutQuad', left: 'easeInQuad'},      
                    complete: function () {
                    }
                });
                $('.home,.about,.investments,.media,.contact').animate({ top: "+=106px" },{
                duration: 2000, 
                specialEasing: {top: 'easeOutQuad', left: 'easeOutQuad'},     
                    complete: function () {
                        $('#ballTarp').remove();
                        $("head").append( '<link href="css/hoverStates.css" rel="stylesheet" type="text/css">' );
                        alert('hey');
                        $('#ball').removeClass('home').addClass('activeHome');
                        $('.activeTitle').fadeIn("fast");
                        $('.dropShadow').fadeIn(7000);
                        $('footer').fadeIn("fast");
                        $('.title').fadeIn("slow");
                        $('.login').fadeIn(3000);
                    }
                });
            }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T17:36:51.767

它为您的每个选择器（.home、.about、.investments、.media、.contact）调用了完整的函数。

这就是为什么它附加5次。

这应该工作...

```
$('#logo').fadeIn(2000, function() {
    $(this).animate({ top: "-=20px" },{
    duration: 1000, 
    specialEasing: {top: 'easeOutQuad', left: 'easeInQuad'},      
        complete: function () {
            $(this).animate({ top: "63px" },{
            duration: 1000, 
            specialEasing: {top: 'easeOutQuad', left: 'easeInQuad'},      
                complete: function () {
                }
            });
            $('.home,.about,.investments,.media,.contact').animate({ top: "+=106px" },{
            duration: 2000, 
            specialEasing: {top: 'easeOutQuad', left: 'easeOutQuad'},     
                complete: function () {
                    $('#ballTarp').remove();
                    // not here...
                    $('#ball').removeClass('home').addClass('activeHome');
                    $('.activeTitle').fadeIn("fast");
                    $('.dropShadow').fadeIn(7000);
                    $('footer').fadeIn("fast");
                    $('.title').fadeIn("slow");
                    $('.login').fadeIn(3000);
                }
            }, function(){
                // but here...
                $("head").append( '<link href="css/hoverStates.css" rel="stylesheet" type="text/css">' );
                alert('hey');

            });
        }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:37:12.883

这是因为它运行了 5 次，选择器中的每个元素各运行一次。

```
$('.home,.about,.investments,.media,.contact') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T18:02:28.233

好的，谢谢@teewuane 和@epascarello 让我看到了显而易见的...... #brainFart 但这是我修复它的方法

```
$('#logo').fadeIn(2000, function() {
        $(this).animate({ top: "-=20px" },{
        duration: 1000, 
        specialEasing: {top: 'easeOutQuad', left: 'easeInQuad'},      
            complete: function () {
                $(this).animate({ top: "63px" },{
                duration: 1000, 
                specialEasing: {top: 'easeOutQuad', left: 'easeInQuad'},      
                    complete: function () {
                    }
                });
                $('.home,.about,.investments,.media,.contact').animate({ top: "+=106px" },{
                duration: 2000, 
                specialEasing: {top: 'easeOutQuad', left: 'easeOutQuad'},     
                    complete: function () {
                        $('#ballTarp').remove();
                        $('#ball').removeClass('home').addClass('activeHome');
                        $('.activeTitle').fadeIn("fast");
                        $('.dropShadow').fadeIn(7000);
                        $('footer').fadeIn("fast");
                        $('.title').fadeIn("slow");
                        $('.login').fadeIn(3000);
                    }
                });
                $("head").append( '<link href="css/hoverStates.css" rel="stylesheet" type="text/css">' );
            }
    }); 
```

# css - 使用 LESS CSS 在父元素中选择元素

> ID：13611021
> 
> 赞同：0
> 
> 时间：2012-11-28T17:32:11.703
> 
> 标签：css, html, less

我的 HTML 结构如下：

```
<div class="container">
  <label>Name:</label>
  <div class="controls">
    <input type="text" class="formatted-input"></input>
  </div>
</div> 
```

我只能访问“格式化输入”类。我需要一种从那个类到最外层父级的标签并对其应用格式的方法。这可能使用 LESS CSS 吗？

我想出了这样的事情：

```
.container .formatted-input
{
  & & > label {
    color: yellow;
  }
} 
```

但它不起作用。有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:38:36.793

LESS 只是带有语法糖釉的 CSS。

看起来您只想获得以下选择器：

*   `.container label`
*   `.container .formatted-input`

如果您希望它们聚集在一起，那么您需要围绕共性进行组织，`.container`在这种情况下是：

```
.container {
    label {...}
    .formatted-input {...}
} 
```

# javascript - jQuery 菜单不显示/隐藏

> ID：13611024
> 
> 赞同：1
> 
> 时间：2012-11-28T17:32:20.797
> 
> 标签：javascript, jquery

我对这个 jquery 代码有一个小问题：如果我直接调用 openMenu 函数，它可以工作，但在 if 内部却没有。

```
 $(document).ready(function() {

 function checkMenu() {

 if($(this).find('ul').css('display') == 'none') {
    openMenu();
 } else { 
    closeMenu();
 }
 }

 function openMenu() {  
    $(this).find('ul').css({display: "block"});
 }

function closeMenu() {
  $(this).find('ul').css({display: "none"});
 }

 $('ul li:has(ul)').click(checkMenu);
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T17:35:31.720

你可以让自己轻松并使用`toggle()`

```
$('ul li:has(ul)').click(function(){
    $(this).find('ul').toggle();
}); 
```

[http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T17:36:51.650

你为什么不使用 .toggle() ？如：

```
$(this).find('ul').toggle(); 
```

您还可以使用慢速、正常、快速设置切换速度：

```
$(this).find('ul').toggle('fast'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T17:44:13.497

openMenu 不知道“this”指的是什么。这应该工作...

```
$(document).ready(function() {

function checkMenu() {
    var me = $(this);
    if(me.find('ul').css('display') == 'none') {
        openMenu(me);
    } else {
        closeMenu(me);
    }
}

function openMenu(me) {

    //this isn't defined..
    me.find('ul').css({
        display: "block"
    });
}

function closeMenu(me) {
    me.find('ul').css({
        display: "none"
    });
}

$('ul li:has(ul)').click(checkMenu); 
```

});

但其他人是对的。切换功能非常适合这样的事情。

# php - PHP：弃用 EREG_REPLACE 到 PREG_REPLACE

> ID：13611025
> 
> 赞同：-1
> 
> 时间：2012-11-28T17:32:26.597
> 
> 标签：php, preg-replace, ereg-replace

> **可能重复：**
> [如何在 PHP 中将 ereg 表达式转换为 preg？](https://stackoverflow.com/questions/6270004/how-can-i-convert-ereg-expressions-to-preg-in-php)

PREG_REPLACE 中这个 EREG_REPLACE 函数的等价物是什么？

```
$html = ereg_replace("[^A-Za-z._0-9@ ]"," ",$html); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:37:50.247

```
$html = preg_replace("/[^A-Za-z._0-9@ ]/"," ",$html); 
```

最大的区别是末端的分隔符，尽管还有其他分隔符。[在这里](http://docstore.mik.ua/orelly/webprog/pcook/ch13_02.htm)阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:38:11.613

`$html = preg_replace("/[^A-Za-z._0-9@ ]/"," ",$html);`

[preg_replace](http://php.net/manual/en/function.preg-replace.php)

# c# - 更新模型后类不接受新字段。

> ID：13611027
> 
> 赞同：0
> 
> 时间：2012-11-28T17:32:27.327
> 
> 标签：c#, sql-server-2008, asp.net-mvc-4, entity

我正在使用 VS2012、SQL Server 2008 和 ASP NET MVC 进行开发

我有一个从 SQL 数据库创建的 ADO.NET 数据模型，每次我更改数据库时，我都知道我需要更新模型。使用 VS2012 我点击更新模型，我可以看到实体已更新。

问题是，如果我在更新模型后尝试使用上下文中的属性，我仍然无法使用新字段。

我不得不删除模型并重新创建它。

我不确定我遗漏了什么，或者这是正常程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:42:51.517

通常，您必须重新构建解决方案才能在 IntelliSense 中显示属性。

# c++ - Visual Studio 名称修饰“YAPEAV”和 Mysql 连接器

> ID：13611029
> 
> 赞同：4
> 
> 时间：2012-11-28T17:32:59.187
> 
> 标签：c++, visual-studio-2010, mysql-connector, name-mangling

将我的代码与 MySQL Connector C++ 1.1.0 链接时，出现未解决的外部符号错误。
这是错误消息：

```
6>database.lib(db_manager.obj) : error LNK2019: unresolved external symbol
"class sql::mysql::MySQL_Driver * __cdecl sql::mysql::get_driver_instance(void)" (?get_driver_instance@mysql@sql@@YAPAVMySQL_Driver@12@XZ)
referenced in function "class sql::mysql::MySQL_Driver * __cdecl sql::mysql::get_mysql_driver_instance(void)" (?get_mysql_driver_instance@mysql@sql@@YAPAVMySQL_Driver@12@XZ) 
```

我曾经`dumpbin`在 mysqlconn-static.lib 中获取符号列表，并发现了一个类似的符号：

```
COMDAT; sym= "class sql::mysql::MySQL_Driver * __cdecl sql::mysql::get_driver_instance(void)" (?get_driver_instance@mysql@sql@@YAPEAVMySQL_Driver@12@XZ) 
```

当这两行排成一行时，区别如下：

```
(?get_driver_instance@mysql@sql@@YAPEAVMySQL_Driver@12@XZ)  
(?get_driver_instance@mysql@sql@@YAPAVMySQL_Driver@12@XZ) 
```

`YAPEAV`AND之间的名称管理有什么区别`YAPAV`？

我有一个想法，我的问题与 MySQL 连接器库和我如何构建代码之间的不兼容有关。

我在网上搜索了一个针对 MySQL Connector 1.1.0 的错误，但它被更改为“不是错误”。

我正在使用 Visual Studio 2010 编译为使用 64 位平台的 32 位目标。
MySQL 连接器 C++ 版本为 1.1.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T18:09:49.210

MSVC 工具`undname`是您的朋友。使用它，你会发现

*   `?get_driver_instance@mysql@sql@@YAPEAVMySQL_Driver@12@XZ`对应于：

    ```
    class sql::mysql::MySQL_Driver * __ptr64 __cdecl sql::mysql::get_driver_instance(void) 
    ```

*   `?get_driver_instance@mysql@sql@@YAPAVMySQL_Driver@12@XZ`对应于：

    ```
    class sql::mysql::MySQL_Driver * __cdecl sql::mysql::get_driver_instance(void) 
    ```

区别在于`__ptr64`装饰。似乎您正在构建一个 32 位程序，但链接到一个为 64 位目标构建的库。

# java - 声明和调用构造函数

> ID：13611034
> 
> 赞同：1
> 
> 时间：2012-11-28T17:33:18.270
> 
> 标签：java, constructor

下面的代码在**第 4 行显示错误**

```
class MyClass{

    public MyClass(int a){ } //Line 2

    public static void main(String a[]){
        MyClass n = new MyClass(); //Line 4
        System.out.print("TRUE");
    }
} 
```

但是，一旦我删除**第 2 行**，它就会运行没有任何错误。虽然，我没有添加默认构造函数。为什么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T17:34:19.893

请记住，只有在您没有给出任何显式构造函数的情况下，才会`Compiler`为您的类提供 a 。`default constructor`一旦您声明了自己的构造函数，参数化或 0-arg，编译器就不会为您提供默认构造函数。

现在在您的代码中，您已经声明了一个参数化构造函数，编译器不会给出默认构造函数。因此，您实际上没有任何 0-arg 构造函数，因此您不能使用它。

> 一旦我删除第 2 行，它运行没有任何错误。虽然，我没有添加默认构造函数。为什么 ？

当然，如果您删除*第 2 行*，那么您还没有声明任何显式构造函数，在这种情况下，*编译器*会添加一个默认的 0-arg 构造函数，因此您的代码会成功。另请注意，*默认构造函数*是编译器提供的。当您声明*0-arg 构造函数*时，它不称为*默认*构造函数，而只是一个*0-arg 构造函数*。

因此，每当您声明参数化构造函数时，请确保您还`0-arg constructor`显式声明了一个，如果您当然正在使用它。

```
public MyClass() {
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T17:34:53.637

每个类都有一个不带参数的*隐式*默认构造函数。但是，当您使用 args 声明构造函数时，会省略默认构造函数。因此

```
MyClass n = new MyClass(); 
```

将无法编译。

请注意，一个类可以有*多个*构造函数，如果您有其他构造函数，则可以*显式*声明默认的无参数构造函数。例如

```
class MyClass{
    public MyClass(int a){ } 
    public MyClass(String a){ } 
    public MyClass(){ }  // no-arg declaration now required
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T17:35:09.767

那是因为一旦你声明了一个带参数的构造函数，没有参数的默认构造函数就不再可用了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T17:37:23.403

在您的类中缺少默认构造函数，它仅包含参数化构造函数。但是您正在使用默认构造函数进行初始化。所以你会在第 4 行得到错误。在你的代码中添加默认构造函数作为打击

作为您使用默认构造函数创建对象，`MyClass n = new MyClass();` 您的代码应该具有默认构造函数。

```
public MyClass(){ } 
```

现在它可以正常工作了。

如果您想使用参数化构造函数，请按如下方式创建对象。

```
MyClass n = new MyClass(pass parameter here); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T17:44:42.490

如果您没有在类中定义构造函数，则***只有***编译器会自动插入默认构造函数（无参数）
阅读[http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html的最后一段](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-28T17:47:31.367

当您创建参数化 cunstructor 时，默认构造函数将被删除，除非您创建自己的默认构造函数。

因此，您必须如下创建构造函数。

```
public MyClass(){} 
```

# jsf - 为什么JSF 2.0“渲染”在不刷新页面的情况下不起作用？

> ID：13611047
> 
> 赞同：0
> 
> 时间：2012-11-28T17:33:49.623
> 
> 标签：jsf, render

当我单击一个方法来呈现页面的一部分时，它不会更改任何内容，直到我手动刷新页面。

这是豆：

```
boolean showPage = true;

public boolean getShowPage(){
    return showPage;
} 
```

这是视图：

```
<h:form>
    <p:commandButton value="Click" action="#{bean.hideContents()}" />
</h:form>

<p:panel rendered="#{bean.showPage}">
    Contents 
</p:panel> 
```

当我手动刷新页面时面板会隐藏，否则不会。这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T18:26:53.537

您需要更新条件渲染组件的父组件。您可以通过在 的`update`属性中指定其客户端 ID 来做到这一点`<p:commandButton>`：

```
<h:form>
    <p:commandButton value="Click" action="#{bean.hideContents}" update=":panel" />
</h:form>

<h:panelGroup id="panel">
    <p:panel rendered="#{bean.showPage}">
        Contents 
    </p:panel>
</h:panelGroup> 
```

### 也可以看看：

*   [如何找出用于 ajax 更新/渲染的组件的客户端 ID？找不到从“bar”引用的表达式“foo”的组件](https://stackoverflow.com/questions/8634156/how-to-reference-components-in-jsf-ajax-cannot-find-component-with-identifier)
*   [当我想对它进行 ajax 更新时，为什么需要在另一个组件中嵌套一个带有 render="#{some}" 的组件？](https://stackoverflow.com/questions/9010734/why-do-i-need-to-nest-a-component-with-rendered-some-in-another-component-w)

# assembly - 在 BIOS 中编程

> ID：13611056
> 
> 赞同：1
> 
> 时间：2012-11-28T17:34:17.117
> 
> 标签：assembly, bios

我是一名 C# 开发人员，主要使用 Web。

这就是我想要的：我想创建一个直接在机器上运行的例程（独立于操作系统），这样如果我重新安装操作系统，那么我的例程仍然存在。

基本上我想创建一个防盗系统。该例程将获取笔记本电脑的 gps 位置并将其发送到特定的电子邮件。

我认为它只能在 BIOS 级编程中完成，但我没有找到第一步。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T17:46:57.923

传统的 PC BIOS 供应商不遗余力地对其资产保密。这使得 BIOS 级编程非常困难。它特定于 BIOS 供应商，特定于其运行的特定硬件的特定构建，您将修补二进制文件以注入您的代码。

具有两个（或更多）用于 BIOS 的 EEPROM 的主板使这样的工作成为可能，而无需太多现金支出——它确保如果你把事情搞砸了，你仍然有办法启动和重新刷新你损坏的映像。

[Coreboot](http://coreboot.org)是一种免费软件替代品，旨在将传统封闭的 BIOS 供应商排除在引导过程之外。它是可扩展的（非常少的 ASM）和开源，如果您想开发 BIOS 扩展，它是开始寻找的好地方。

较新硬件上的 EFI 也显着改变了情况。例如，您可以将您的软件显示为内部 USB 设备上的[EFI 扩展。](https://en.wikipedia.org/wiki/Unified_Extensible_Firmware_Interface#Extensions)

# c# - QuickGraph - 排名最短路径 - 路径缺失

> ID：13611060
> 
> 赞同：7
> 
> 时间：2012-11-28T17:34:19.597
> 
> 标签：c#, shortest-path, quickgraph

在这里有点长镜头，因为我没有在 QuickGraph 中找到太多文档 `HoffmanPavleyRankedShortestPathAlgorithm`，所以我猜没有很多人使用它，但是我在使用排名最短路径返回正确结果时遇到了一些问题算法，想知道是否有人发现了同样的问题。

我正在使用 1900 个顶点和 20000 个边填充双向图，并且我已将图设置为返回 150 条路径。它这样做了，但它并没有带回预期的几条路径，即应该在前 20 条最短路径中排名的路径。我对系统的期望是，如果我要求 150 条路径，它将按顺序返回 150 条最短路径。

现在，当我将其设置为返回 1000 多个路径时，就会出现预期的路径。以前有没有人遇到过这样的问题，并且可能有办法改进图表设置？我不能让系统返回 1000 条路径，因为处理时间太长。

以下是相关代码：图形设置：

```
BidirectionalGraph<string, TaggedEdge<string, int>> pathGraph = new BidirectionalGraph<string, TaggedEdge<string, int>>();

... add vertices and edges 
```

算法设置：

```
HoffmanPavleyRankedShortestPathAlgorithm<string, TaggedEdge<string, int>> hoffmanAlgorithm = new HoffmanPavleyRankedShortestPathAlgorithm<string, TaggedEdge<string, int>>(pathGraph, E => 1.0);
try
{
    hoffmanAlgorithm.ShortestPathCount = 150;
    hoffmanAlgorithm.SetRootVertex(startPoint.ToString());
    hoffmanAlgorithm.Compute(startPoint.ToString(), endPoint.ToString());

    foreach (IEnumerable<TaggedEdge<string, int>> path in hoffmanAlgorithm.ComputedShortestPaths)
    {
         //process results...
    }
} 
```

正如我所说，我并不太有信心在这里得到回应，但我想我还是会尝试的。CodePlex 上的 QuickGraph 讨论论坛似乎不再有人操作，否则我会在那里尝试。

非常感谢

# python - 在没有 shell 转义序列的 Python 中打印标准输出

> ID：13611061
> 
> 赞同：2
> 
> 时间：2012-11-28T17:34:24.780
> 
> 标签：python, shell, escaping, sh

我`sh`用来在 Python 脚本中运行 git 命令。

```
In [1]: from sh import git

In [2]: s = git("log", "-1", pretty="format:%h %s")

In [3]: print s
4f14a66 basic debug page 
```

这似乎按预期工作。但是，在 Django 模板中使用它会给出`[?1h= 4f14a66 basic debug page[m [K[?1l>`. 我尝试使用 来查看此字符串中的字符`repr()`，但无济于事：

```
In [4]: print repr(s)
4f14a66 basic debug page 
```

结果`sh`返回的命令 a`RunningCommand`具有一个`.stdout`属性：

```
In [5]: type(s)
Out[5]: sh.RunningCommand

In [7]: s.stdout
Out[7]: '\x1b[?1h\x1b=\r4f14a66 basic debug page\x1b[m\r\n\r\x1b[K\x1b[?1l\x1b>' 
```

我如何得到`"4f14a66 basic debug page"`没有转义的字符串？从 Bash 运行命令很好：

```
$ git log -1 --pretty="format:%h %s"
4f14a66 basic debug page 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-03-27T20:15:39.610

根据[this GitHub issue](https://github.com/amoffat/sh/issues/132#issuecomment-15312361)，该问题的正确解决方案是使用`_tty_out=False`：

```
>>> str(git('show', format='%cN', s=True))
'\x1b[?1h\x1b=\rHonza Javorek\x1b[m\r\n\r\x1b[K\x1b[?1l\x1b>'

>>> str(git('show', format='%cN', s=True, _tty_out=False))
'Honza Javorek\n' 
```

这也是我重复问题的解决方案：[使用 sh，git show 返回特殊字符 - 如何获得纯输出？](https://stackoverflow.com/questions/36247009/using-sh-git-show-returns-special-characters-how-to-get-plain-output)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:36:21.190

`s.stdout`在 REPL 中不会打印它，而是显示它的`repr()`. 用于`print s.stdout`获取您要查找的内容。

如果您不想要任何转义码，请考虑使用`subprocess.call()`- 执行它，而 stdout 不是 tty 大多数程序不输出任何转义序列。

# c - 此处不允许声明 C 中的错误

> ID：13611062
> 
> 赞同：4
> 
> 时间：2012-11-28T17:34:25.483
> 
> 标签：c

以下行有问题`int (*f)(int, int) = (argv[2][0] == 'd')`，在编译时说此处不允许声明。是否应该在开始时声明该行，有什么更好的方法可以做到这一点。任何建议将不胜感激？

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>

int encode(int ch, int key) { 
        if (islower(ch)) {
                ch = (ch-'a' + key) % 26 + 'a';
                ch += (ch < 'a') ? 26 : 0;
        }
        else if (isupper(ch)) {
                ch = (ch-'A' + key) % 26 + 'A';
                ch += (ch < 'A') ? 26 : 0;
        }
        return ch;
}

int decode(int ch, int key) { 
        return encode(ch, -key);
}

int main(int argc, char **argv) { 
        int ch;
        int key;

        if (argc < 2) {
                printf("USAGE: cipher <integer key> <encode | decode>\n");
                printf("Then, just type your text and it will automatically output the en/de crypted text! :)\n");
                return 1;
        }

        key = atoi(argv[1]);
        if (key < 1 || key > 25) {
                printf("Key is invalid, or out of range. Valid keys are integers 1 through 25.\n");
                return 1;
        }

        int (*f)(int, int) = (argv[2][0] == 'd') ? 
                decode : 
                encode;

        while (EOF != (ch=getchar()))
                putchar(f(ch, key));

        return 0;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-28T17:36:02.577

在 C（C99 之前）中，您必须在块的开头声明变量。

将您的代码编译为 C99，或更改代码以便`f`在块的开头声明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T17:38:21.550

在 c89/90 中，您必须在块的开头声明所有变量

但是在 c99 中，您可以`-std=c99`像这样编译代码：

`gcc -Wall -std=c99 test.c -o test.out`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T17:38:28.903

除了 NPE 指出的部分，您可以使用`typedef`创建函数类型。像这样：

`typedef void FunctionType (int, int);`然后使用它（作为单独的类型）来创建函数指针。

让阅读变得轻松。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-28T17:53:23.963

> 是否应该在开始时声明该行

在 C89 中，定义必须出现在块中的任何语句之前。如果确实移动它，则不必移动整行（当然，您不希望将整行移动到检查代码`argv[2]`有效之前）。只需移动 的定义`f`：

```
 int ch;
    int key;
    int (*f)(int,int);

    ...

    f = (argv[2][0] == 'd') ? decode : encode; 
```

> 任何更好的方法

在这种情况下不一定*更好*，但请注意，规则是​​块的开始，不一定是函数的开始。

所以，你可以写：

```
{
    int (*f)(int, int) = (argv[2][0] == 'd') ? 
            decode : 
            encode;

    while (EOF != (ch=getchar()))
            putchar(f(ch, key));
}
return 0; 
```

你可以很容易地陷入关于这种编码风格的争论。有些人认为每个函数*都应该*预先定义它的所有变量，并且仅仅为了定义一个变量而引入一个块是混乱和/或混乱的。有些人（尤其是那些使用 C++ 和 C 的人）认为您应该将每个变量的范围限制为尽可能窄的一段代码，因为在函数开头定义所有内容是混乱和/或混乱的。但即使是他们也可能认为裸块过多。

# continuous-integration - CassiniDev 64位持续集成

> ID：13611064
> 
> 赞同：1
> 
> 时间：2012-11-28T17:34:30.327
> 
> 标签：continuous-integration, 64-bit, cassini-dev

我最近开始使用 CassiniDev 在我们的 CI 服务器上运行我的 WatiN 测试。当我构建和测试我们的两台 32 位机器时，我运行测试没有问题。但是，当我在 64 位机器上构建和测试时，我收到以下错误：

```
Could not load file or assembly 'CassiniDev4-lib, Version=4.0.1.7, 
Culture=neutral, 
PublicKeyToken=f7f6e0b4240c7c27' or one of its dependencies. 
An attempt was made to load a program with an incorrect format. 
```

我发现这是由于与 64 位环境的冲突。在我的 64 位本地机器上，将平台目标设置为 x86 没有问题，我的测试运行得像梦一样。但是，如果我将发布配置更改为以 x86 为目标并部署到我们的 64 位机器，我仍然会收到相同的错误。有谁知道解决这个问题？我可以通过某种方式在 32 位和 64 位机器上构建和测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T19:54:30.683

我会继续回答这个问题，以防其他人遇到我遇到的同样问题。我最终做的是在 Visual Studio 中创建一个名为 WatiN 的新配置，因为我将所有项目都设置为 x86。在我的 CI 服务器上，我使用 WatiN 配置将我的 WatiN 测试与其他所有东西分开构建和运行。

# python - 将多个过滤器应用于 pandas DataFrame 或 Series 的有效方法

> ID：13611065
> 
> 赞同：207
> 
> 时间：2012-11-28T17:34:35.337
> 
> 标签：python, algorithm, pandas

我有一个场景，用户想要将多个过滤器应用于 Pandas DataFrame 或 Series 对象。本质上，我想有效地将​​用户在运行时指定的一堆过滤（比较操作）链接在一起。

过滤器应该是附加的（也就是每个应用都应该缩小结果）。

我目前正在使用`reindex()`，但这每次都会创建一个新对象并复制基础数据（如果我正确理解文档）。因此，在过滤大型 Series 或 DataFrame 时，这可能非常低效。

我认为使用`apply()`,`map()`或类似的东西可能会更好。尽管我对 Pandas 还是很陌生，但我仍然想把所有东西都包起来。

## TL;博士

我想采用以下形式的字典并将每个操作应用于给定的 Series 对象并返回一个“过滤”的 Series 对象。

```
relops = {'>=': [1], '<=': [1]} 
```

## 长示例

我将从一个我目前拥有的示例开始，并且只过滤一个 Series 对象。以下是我目前正在使用的功能：

```
 def apply_relops(series, relops):
        """
        Pass dictionary of relational operators to perform on given series object
        """
        for op, vals in relops.iteritems():
            op_func = ops[op]
            for val in vals:
                filtered = op_func(series, val)
                series = series.reindex(series[filtered])
        return series 
```

用户提供了一个字典，其中包含他们想要执行的操作：

```
>>> df = pandas.DataFrame({'col1': [0, 1, 2], 'col2': [10, 11, 12]})
>>> print df
>>> print df
   col1  col2
0     0    10
1     1    11
2     2    12

>>> from operator import le, ge
>>> ops ={'>=': ge, '<=': le}
>>> apply_relops(df['col1'], {'>=': [1]})
col1
1       1
2       2
Name: col1
>>> apply_relops(df['col1'], relops = {'>=': [1], '<=': [1]})
col1
1       1
Name: col1 
```

同样，我上述方法的“问题”是我认为中间步骤可能有很多不必要的数据复制。

另外，我想扩展它，以便传入的字典可以包含要操作的列，并根据输入字典过滤整个 DataFrame。但是，我假设适用于 Series 的任何东西都可以轻松扩展为 DataFrame。

* * *

## 回答 #1

> 赞同：320
> 
> 时间：2012-11-28T23:38:41.263

Pandas（和 numpy）允许[boolean indexing](http://pandas.pydata.org/pandas-docs/dev/indexing.html#boolean-indexing)，这将更有效率：

```
In [11]: df.loc[df['col1'] >= 1, 'col1']
Out[11]: 
1    1
2    2
Name: col1

In [12]: df[df['col1'] >= 1]
Out[12]: 
   col1  col2
1     1    11
2     2    12

In [13]: df[(df['col1'] >= 1) & (df['col1'] <=1 )]
Out[13]: 
   col1  col2
1     1    11 
```

如果您想为此编写辅助函数，请考虑以下内容：

```
In [14]: def b(x, col, op, n): 
             return op(x[col],n)

In [15]: def f(x, *b):
             return x[(np.logical_and(*b))]

In [16]: b1 = b(df, 'col1', ge, 1)

In [17]: b2 = b(df, 'col1', le, 1)

In [18]: f(df, b1, b2)
Out[18]: 
   col1  col2
1     1    11 
```

更新：[pandas 0.13](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.query.html)对这些用例有一个查询方法，假设列名是有效的标识符，以下工作（并且对于大帧可能更有效，因为它在幕后使用[numexpr ）：](https://github.com/pydata/numexpr)

```
In [21]: df.query('col1 <= 1 & 1 <= col1')
Out[21]:
   col1  col2
1     1    11 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2015-06-11T10:28:54.297

链接条件会产生长行，pep8 不鼓励这样做。使用 .query 方法会强制使用字符串，这很强大但不是 Python 的，而且不是很动态。

一旦每个过滤器就位，一种方法是

```
import numpy as np
import functools
def conjunction(*conditions):
    return functools.reduce(np.logical_and, conditions)

c_1 = data.col1 == True
c_2 = data.col2 < 64
c_3 = data.col3 != 4

data_filtered = data[conjunction(c1,c2,c3)] 
```

np.logical 运行速度很快，但不接受两个以上的参数，由 functools.reduce 处理。

请注意，这仍然有一些冗余：a）快捷方式不会在全局级别上发生 b）每个单独的条件都在整个初始数据上运行。不过，我希望这对于许多应用程序来说足够高效，并且非常易读。

您还可以通过使用来进行析取（其中只有一个条件需要为真）`np.logical_or`：

```
import numpy as np
import functools
def disjunction(*conditions):
    return functools.reduce(np.logical_or, conditions)

c_1 = data.col1 == True
c_2 = data.col2 < 64
c_3 = data.col3 != 4

data_filtered = data[disjunction(c_1,c_2,c_3)] 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2018-02-27T12:16:04.507

**最简单的解决方案：**

采用：

```
filtered_df = df[(df['col1'] >= 1) & (df['col1'] <= 5)] 
```

**另一个示例**，要过滤数据框以获取属于 2018 年 2 月的值，请使用以下代码

```
filtered_df = df[(df['year'] == 2018) & (df['month'] == 2)] 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2018-03-17T12:11:05.493

自[pandas 0.22 update](https://pandas.pydata.org/pandas-docs/stable/basics.html#flexible-comparisons)以来，可以使用以下比较选项：

*   gt（大于）
*   lt（小于）
*   eq（等于）
*   ne（不等于）
*   ge（大于或等于）

还有很多。这些函数返回布尔数组。让我们看看如何使用它们：

```
# sample data
df = pd.DataFrame({'col1': [0, 1, 2,3,4,5], 'col2': [10, 11, 12,13,14,15]})

# get values from col1 greater than or equals to 1
df.loc[df['col1'].ge(1),'col1']

1    1
2    2
3    3
4    4
5    5

# where co11 values is between 0 and 2
df.loc[df['col1'].between(0,2)]

 col1 col2
0   0   10
1   1   11
2   2   12

# where col1 > 1
df.loc[df['col1'].gt(1)]

 col1 col2
2   2   12
3   3   13
4   4   14
5   5   15 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-05-18T10:06:20.270

为什么不这样做？

```
def filt_spec(df, col, val, op):
    import operator
    ops = {'eq': operator.eq, 'neq': operator.ne, 'gt': operator.gt, 'ge': operator.ge, 'lt': operator.lt, 'le': operator.le}
    return df[ops[op](df[col], val)]
pandas.DataFrame.filt_spec = filt_spec 
```

演示：

```
df = pd.DataFrame({'a': [1,2,3,4,5], 'b':[5,4,3,2,1]})
df.filt_spec('a', 2, 'ge') 
```

结果：

```
 a  b
 1  2  4
 2  3  3
 3  4  2
 4  5  1 
```

您可以看到列 'a' 已被过滤，其中 a >=2。

这比操作符链接稍快（键入时间，而不是性能）。您当然可以将导入放在文件的顶部。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-03-05T08:34:26.180

e 还可以根据不在列表或任何可迭代的列的值选择行。我们将像以前一样创建布尔变量，但现在我们将通过将 ~ 放在前面来否定布尔变量。

例如

```
list = [1, 0]
df[df.col1.isin(list)] 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-10-30T11:53:25.923

如果要检查任何/所有多个列的值，可以执行以下操作：

```
df[(df[['HomeTeam', 'AwayTeam']] == 'Fulham').any(axis=1)] 
```

# algorithm - AS3动态文本算法

> ID：13611070
> 
> 赞同：0
> 
> 时间：2012-11-28T17:34:57.153
> 
> 标签：algorithm, actionscript-3, dynamic

下午，我有一个奇怪的算法。我想根据一些用户输入动态填充一串代码。

我有一个包含数据的多维数组和一个多行输入文本字段。

我想要的是让用户能够输入一些文本示例：00 01 - 02 - 03 评论：12

我的代码将识别数字并将其他所有内容视为文本。因此，如果我的数组是 data[x][#]，# 将对应于它们的条目。

我会得到

```
algorithm_string = data[x][0] + "\n" + data[x][1] + " - " + data[x][2] + " - " + data[x][3] + "\n" + "comments: " + data[x][12] 
```

所以算法将构建上述内容，然后我可以运行代码。

```
for(var x:int = 0; x < data.length; x++){
    some_object._display_text.text = algorithm_string;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:07:30.773

好的，所以我首先想说的是，依靠用户完全按照您想要的方式输入条目可能不是一个好主意。他们会犯错误，您的代码最终将无法按预期工作。我建议使用限制为数字输入的 5 个输入，并在每个字段中标记应该输入的数字。

但是，您可以像这样完成上面尝试做的事情：

```
var parts:Array = myInput.text.split(" ");

for (var i:int=0; i<parts.length, i++){
    if(!isNaN(parseInt(parts[i]))){
        // you have a number here.
        data[x].push(parts[i]);
    } else {
        //this was not a number so ignore it
    }
} 
```

再次让我声明，我认为您应该重构获取数字的方式，但是该代码会提取数字并将它们放入数据 [x] 的 0、1、2、3 和 4 索引中，但依赖于用户每次都完美地输入文本。

祝你好运！（重构）:)

# vim - Vim 语法：仅在区域开头突出显示匹配项

> ID：13611071
> 
> 赞同：5
> 
> 时间：2012-11-28T17:34:59.813
> 
> 标签：vim

我正在为 DSL 编写 vim 语法高亮，其中函数遵循以下格式：

```
# A function with no arguments
<function>

# A function with arguments
<function(arg1, arg2)>

# A function with text
<function block of normal text>

# A function with args and text
<function(arg1,arg2) text>

# Line breaks are allowed pretty much everywhere.
<function(
        arg1,
        arg2)
    a block of text>

# As is nesting
<function(<subfunc>) Some text with <another(subfunction) etc.>>

# Backslash escape
<function(single arg with a comma: "\,") contained bracket between quotes: "\>"> 
```

它是一种文本处理语言（想想类固醇降价），所以文本块必须是非限制性的。

我在为此编写 vim 语法文件时遇到了很多麻烦。

我可以

```
syn region myFunction start='<' end='>' skip='\\>'
syn region myArgs start='(' end=')' skip='\\)' 
```

但`myFunction`不能包含`myArgs`，因为在以下示例中错误地突出显示了括号：

```
<function(arg) some text (with parenthesis) that aren't arguments> 
```

具体来说，我希望函数名称和参数列表仅在该区域的开头突出显示。然而，我做不到

```
syn region myFunction start='<(regex to match name and arg list)' ... 
```

因为，即使`regex to match name and arg list`不可怕，这也破坏了我语法高亮嵌套函数的能力。

我想要的是类似于a 的`nextgroup`东西，但我找不到。`start``syntax region`

这可能吗？我如何在 vimscript 中执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T07:39:44.980

`<`为与区域的前导字符重叠的函数名称定义一个包含的语法匹配`myFunction`，然后用于`nextgroup`尝试`myArgs`仅在其后直接匹配，而不是随后出现的匹配。

```
:syn region myFunction start='<' end='>' contains=myFunctionName
:syn match myFunctionName '<\i\+' contained nextgroup=myArgs
:syn region myArgs start='(' end=')' contained 
```

编辑：这是`matchgroup`元素`<...>`的变体；`matchgroup`不能用于起始元素，因为这会阻止锚定`myFunctionName`：

```
:syn region myFunction start='<' matchgroup=myMarker end='>' contains=myFunctionName
:syn match myFunctionName '<\i\+' contained nextgroup=myArgs contains=myMarker
:syn match myMarker '<' contained
:syn region myArgs start='(' end=')' contained 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T08:07:58.897

也许您也可以尝试这些以更好地控制高光：

```
syn region myFunction start='<' end='[^\\]>' contains=myFunctionName
syn match myFunctionName '<\i\+'hs=s+1 contained nextgroup=myArgs
syn region myArgs start='('hs=s+1 end=')'he=s-1 contained contains=myFunction 
```

# testing - Play 2 框架测试模拟会话和POST？

> ID：13611073
> 
> 赞同：1
> 
> 时间：2012-11-28T17:35:08.740
> 
> 标签：testing, post, playframework, playframework-2.0

当运行这样的网络测试时

```
@Test
public void runInBrowser() {
    running(testServer(3333),  HtmlUnitDriver.class, new Callback<TestBrowser>() {
        public void invoke(TestBrowser browser) {
           browser.goTo("http://localhost:3333"); 
           assertThat(browser.$("#title").getTexts().get(0)).isEqualTo("Hello Guest");
           browser.$("a").click();
           assertThat(browser.url()).isEqualTo("http://localhost:3333/Coco");
           assertThat(browser.$("#title", 0).getText()).isEqualTo("Hello Coco");
        }
    });
} 
```

在使用这种测试时如何传递会话值以及如何模拟 POST？谢谢 ：-）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T07:03:53.017

这些是使用[FluentLenium](https://github.com/FluentLenium/FluentLenium)进行的 Selenium 测试。由于您使用浏览器进行测试，因此您必须使用带有 POST 方法的 HTML 表单来发出 POST 请求。

```
browser.goTo("http://localhost:3333" + routes.Login.login().url());//example for reverse route, alternatively use something like "http://localhost:3333/login"
browser.fill("#password").with("secret");
browser.fill("#username").with("aUsername");
browser.submit("#signin");//trigger submit button on the form
//after finished request: http://www.playframework.org/documentation/api/2.0.4/java/play/test/TestBrowser.html
browser.getCookies(); //read only cookies 
```

也许您不想使用浏览器进行测试，而是使用 HTTP 您可以使用[FakeRequests](http://www.playframework.org/documentation/api/2.0.4/java/play/test/FakeRequest.html)：

```
import static controllers.routes.ref.Application;
import static org.fest.assertions.Assertions.assertThat;
import static play.mvc.Http.Status.OK;
import static play.mvc.Http.Status.UNAUTHORIZED;
import static play.test.Helpers.*;

import play.libs.WS;
import java.util.HashMap;
import java.util.Map;
import org.junit.BeforeClass;
import org.junit.Test;
import play.mvc.Result;
import play.test.FakeRequest;

public class SoTest {
  @Test
  public void testInServer() {
    running(testServer(3333), new Runnable() {
        public void run() {
            Fixtures.loadAll();//you may have to fill your database you have to program this yourself
            Map<String, String> parameters = new HashMap<String, String>();
            parameters.put("userName", "aUsername");
            parameters.put("password", "secret");
            FakeRequest fakeRequest = new FakeRequest().withSession("key", "value").withCookies(name, value, maxAge, path, domain, secure, httpOnly).withFormUrlEncodedBody(parameters);
            Result result = callAction(Application.signIn(), fakeRequest);
            int responseCode = status(result);
            assertThat(responseCode).isEqualTo(OK);
        }
    });
  }
} 
```

另请查看此答案：[如何在 play2.0 中操作会话、请求和响应以进行测试](https://stackoverflow.com/questions/10381354/how-to-manipulate-session-request-and-response-for-test-in-play2-0)

# jdbc - 替代 JDBC 结果集中的下一个方法

> ID：13611075
> 
> 赞同：1
> 
> 时间：2012-11-28T17:35:09.517
> 
> 标签：jdbc, resultset, next

在 JDBC 中是否有一种方法可以一次提取多行？（类的）下一个方法`ResultSet`允许一次处理一行。

我的查询返回数千行（每行只有一列）。这些行非常精简，我几乎只想提取列值。循环下一个，一次一行对于这个用例来说非常慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:54:55.640

虽然 ResultSet 一次只返回一行，但 jdbc 驱动程序应该获取您使用 Statement.setFetchSize() 指定的行数

> 无效 setFetchSize（整数行）
> 
> 当此语句生成的 ResultSet 对象需要更多行时，向 JDBC 驱动程序提供有关应从数据库中获取的行数的提示。

我还建议在创建 Statement/PreparedStatement 时正确设置获取方向。

# installshield - InstallShield 可以在构建时在源文件路径的一部分中使用环境变量吗？

> ID：13611080
> 
> 赞同：0
> 
> 时间：2012-11-28T17:35:24.663
> 
> 标签：installshield

我们有一个构建脚本，可以构建三种类型的项目——C++、Java，最后是各自的 InstallShield 安装程序。

现在，安装程序构建脚本依赖于 C++ 项目始终构建在发布配置中这一事实。

但现在我希望允许在附加配置中构建它们，即 Profile。

我们正在使用 Jenkins CI 服务器，因此所需的配置是通过专用的 Jenkins 构建参数提供的`DRIVER_PROXY_CONFIG`，该参数作为具有相同名称的环境变量出现。

现在的问题。根据我们的 InstallShield 人员的说法，IS 不能在源文件路径的一部分中使用环境变量。我引用：

> 您可以使用“环境变量”或“通过 InstallShield 定义的用户定义的路径变量”作为文件路径。
> 
> 所以我们可以：
> 
> 1.  为每个组件创建“环境变量”（因为“DRIVER_PROXY_CONFIG”只是组件路径的一部分）——不可取。
> 2.  将“环境变量”作为组件“用户定义的路径变量”的一部分——不可能，我刚刚尝试过。

有没有人做过这样的事情？安装程序依赖于不同位置的多个源文件，其中位置路径的一部分是`DRIVER_PROXY_CONFIG`环境变量的值。请注意，这部分既不是路径前缀也不是后缀。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:57:01.900

迈克尔：

如果 'env' 既不是路径 ( `"SomeDir\<env>\SubDir"`) 的前缀也不是后缀怎么办？

我创建了系统环境`config=release`
我创建了引用环境“配置”的 IS 变量“MyConf”
我创建了 IS 标准路径`MyPath = "SomeDir\<MyConf>\SubDir"`

如果我从此路径添加文件 - IS 不会将“MyPath”建议为建议路径！！！

我发现的唯一方法是添加文件，然后直接访问 File 表以更新 ISBuildSourcePath。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T13:12:13.563

您绝对可以将其创建为路径的一部分。一些确切的行为确实取决于 InstallShield 的版本，但对于最后几个，您甚至可以使用相对父目录。只需转到 Path Variables 视图，添加一个新的环境路径变量（比如`Env`），然后设置它引用的环境变量。然后添加任意数量的`Stn`定义为 的标准路径变量（例如 ）`<Env>\Sub\Dir`，或者跳过此步骤并仅引用`ISBuildSourcePath`相关文件的那些。通常，从定义的路径变量下的路径添加文件将使用该路径变量作为其路径的一部分。

如果您已经添加了文件，则转换源路径向导可能会有所帮助，但您可能会发现直接访问文件表以更新`ISBuildSourcePath`

然而，至少有一个例外。如果您的环境变量具有值`Sub`并且您的完整目录名称是`SubDirectory`，则您不能总是引用`<Env>Directory`。通常，路径变量支持会将其变为`Sub\Directory`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T15:03:04.287

我添加了环境变量作为路径变量，ytou可以在这里设置环境变量类型（不是字符串类型！）

然后你可以在任何你使用路径变量的地方使用它——尽管我确实必须将它括在方括号中而不是通常的角括号中）。它应该在路径中间工作，就像我使用普通路径变量所做的那样。

# iphone - CAL层深度

> ID：13611083
> 
> 赞同：1
> 
> 时间：2012-11-28T17:35:30.627
> 
> 标签：iphone, ios, core-animation, cabasicanimation, quartz-core

所以，很容易我有 UIButton 并且我的 bytton 的标题是 - “title”;）

我只想用步骤为 UIButton 的 titleLabel 设置动画：

1) 通过 Y 为 M_PI/2 设置动画标签。（一种“翻转”动画，但一半）

2）用“NewTitle”替换按钮的“Title”

3) Y back 为标签设置动画。

![在此处输入图像描述](../Images/bec355b9b874b2829e86c204b499a059.png)

所以我有：

```
CABasicAnimation* flipAnimation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.y"];
flipAnimation.toValue = [NSNumber numberWithFloat: M_PI/2];
flipAnimation.duration = 3;
flipAnimation.delegate = self;
[self.testButton.titleLabel.layer addAnimation:flipAnimation forKey:@"flip"]; 
```

制作动画时，一半文本是不可见的。我理解它为什么会发生，但无法管理如何避免它。

谢谢你的帮助。

![在此处输入图像描述](../Images/9cb6b5ee46bd02497706d2031f1f69ce.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:40:13.370

尝试在开始动画之前将变换的 z 值设置为标签宽度的大约 1/2 的（负数？）值 这应该将标签提升到按钮上方，这样它的一半就不会在按钮后面消失围绕它的 Y 轴。

编辑：实际上，设置图层的 zPosition 属性可能会更好。这应该将图层移到其他图层之上，而不会影响其外观大小。

# ruby-on-rails-3 - 我应该在哪里放置“需要宝石”？我的 Rails 应用程序中应该放入什么文件？

> ID：13611086
> 
> 赞同：0
> 
> 时间：2012-11-28T17:35:35.430
> 
> 标签：ruby-on-rails-3, rubygems

我正在使用“fastimage”gem，但不确定在我的 Rails 应用程序中放置 require 'fastimage' 语句的位置。编写 require 语句的最佳实践是什么？我可以把它放在哪里，以便我可以在我的应用程序的任何地方使用 FastImage 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:54:36.730

您应该包含在您的 Gemfile 中。之后，运行`bundle install`. 您不需要输入`require`，因为它已经为您处理好了。请注意，您需要重新启动 rails 服务器才能让您的应用程序包含您的 gem。

# android - 发送 ajax 请求 phonegap

> ID：13611089
> 
> 赞同：2
> 
> 时间：2012-11-28T17:35:41.453
> 
> 标签：android, ajax, cordova

我想在网站上发送一个 ajax 请求，但结果很奇怪：

```
$.ajax({
    type: 'GET',
    url: 'http://mydomain.com/test.json',
    success: function(data){
        console.log(data);
        alert('Ok');
    },
    error: function(data){
        console.log(data.responseText);
        alert('FAIL !!!');
    }
}); 
```

test.json 是

```
{
    ttt: 1,
    ttt: 3,
    test:{
        aa: 1,
        bb: 2
    }
} 
```

所以我有警报失败，但我的 console.log 我有我的 json 文件的内容

为什么错误返回结果？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:25:29.633

试试这个示例：

```
$.ajax({
    type: 'GET',
    url: 'http://mydomain.com/test.json'}),
    success: function(data){
        console.log(data);
        alert('Ok');
    }),
    error: function(jqXHR, textStatus, errorThrown){
        console.log(textStatus);
        alert('FAIL !!!');
    },
}); 
```

# python - 在 Python (Django) 中更改字典顺序

> ID：13611097
> 
> 赞同：0
> 
> 时间：2012-11-28T17:36:06.597
> 
> 标签：python, database, django, dictionary

我有 Python 代码访问数据库中的数据（在 Django 中）：

```
for result in request.user.results.all():
    for word in result.word.all():
        data.append(dict(zip([str(word.type.type)], [str(word.word)]))) 
```

它显示“数据”，如下所示：

```
[{'color': 'blue'}, {'kind': 'pencil'}, {'rating': 'high'}, {'color': 'red'}, {'kind': 'truck'}, {'rating': 'low'} and so on.... 
```

我想重写python代码来显示这个：

```
[{'color': 'blue', 'kind': 'pencil', 'rating': 'high'}, {'color': 'red', 'kind': 'truck', 'rating': 'low'} and so on.... 
```

这两个是相同的还是'{'的位置重要？我写了上面的代码，但我不是如何（或者如果我需要）修改它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:43:03.143

在我看来，您将单项列表压缩在一起以制作单项字典。我认为你想要的是：

```
for result in request.user.results.all():
    data.append(dict([(word.type.type, word. word) for word in result.word.all()])) 
```

`zip`通常用于在您有两个预先存在的列表的情况下制作字典，而不是当您从对象从头开始构建字典时。

# sql - SQlite 使用不同的“on”语句将同一个表连接两次

> ID：13611099
> 
> 赞同：2
> 
> 时间：2012-11-28T17:36:13.700
> 
> 标签：sql, sqlite, join

我找不到我的问题的答案，我不知道我的查询是否正确，这可能是 SQLite 问题，请帮我解决问题。

我的数据库中有两个表：

```
processTable {id}
taskTable {id, processId, amount, done} 
```

存在多对一关系（一个进程可以分配多个任务）。“数量”和“完成”是提供任务进度信息的整数值。如果 "done" >= "amount"，则任务完成。我需要查询数据库以获得类似的东西：

```
+---------+-----------+------------+
| process | tasksDone | tasksCount |
+---------+-----------+------------+
| 1       | 1         | 3          |
+---------+-----------+------------+
| 2       | 2         | 5          |
+---------+-----------+------------+ 
```

根据我表中的数据：

```
processTable
+----+
| id |
+----+
| 1  |
+----+
| 2  |
+----+

tasksTable
+----+-----------+--------+------+
| id | processId | amount | done |
+----+-----------+--------+------+
| 1  | 1         | 10     | 10   | <- this task is done
+----+-----------+--------+------+
| 2  | 1         | 15     | 5    |
+----+-----------+--------+------+
| 3  | 1         | 80     | 5    |
+----+-----------+--------+------+
| 4  | 2         | 25     | 0    |
+----+-----------+--------+------+
| 5  | 2         | 60     | 60   | <- this task is done
+----+-----------+--------+------+
| 6  | 2         | 30     | 15   |
+----+-----------+--------+------+
| 7  | 2         | 40     | 40   | <- this task is done
+----+-----------+--------+------+
| 8  | 2         | 100    | 50   |
+----+-----------+--------+------+ 
```

所以，我写了这个查询：

```
SELECT processTable.id AS process, 
       COUNT(tasksTableDone.id) AS tasksDone, 
       COUNT(tasksTableAll.id) AS tasksCount 

FROM processTable

LEFT JOIN tasksTable AS tasksTableAll 
     ON   tasksTableAll.processId = processTable.id 

LEFT JOIN tasksTable AS tasksTableDone 
     ON   tasksTableDone.processId = processTable.id 
          AND
          tasksTableDone.done >= tasksTableDone.amount 
```

但我得到的是：

```
+---------+-----------+------------+
| process | tasksDone | tasksCount |
+---------+-----------+------------+
| 1       | 3         | 3          |
+---------+-----------+------------+
| 2       | 5         | 5          |
+---------+-----------+------------+ 
```

我尝试一次只使用一个连接运行查询，并且一切运行良好。

仅使用第一个连接进行查询：

```
SELECT processTable.id AS process,  
       COUNT(tasksTableAll.id) AS tasksCount 

FROM processTable

LEFT JOIN tasksTable AS tasksTableAll 
     ON   tasksTableAll.processId = processTable.id 

Result:
+---------+------------+
| process | tasksCount |
+---------+------------+
| 1       | 3          |
+---------+------------+
| 2       | 5          |
+---------+------------+ 
```

仅使用第二个连接查询：

```
SELECT processTable.id AS process,  
       COUNT(tasksTableDone.id) AS tasksDone 

FROM processTable

LEFT JOIN tasksTable AS tasksTableDone 
     ON   tasksTableDone.processId = processTable.id 
          AND
          tasksTableDone.done >= tasksTableDone.amount 

Result:
+---------+-----------+
| process | tasksDone |
+---------+-----------+
| 1       | 1         |
+---------+-----------+
| 2       | 2         |
+---------+-----------+ 
```

如何在一个查询中使用这两个连接来获得正确的结果？我知道我可以使用另一个 SELECT 而不是 JOIN，但我认为它在性能方面会更昂贵。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T17:50:54.913

您可以使用聚合实现`CASE`语句：

版本使用`SUM()`

```
SELECT p.id AS process,  
  sum(case when t.amount = t.done then 1 else 0 end) AS tasksDone,
  count(p.id) AS tasksCount
FROM processTable p
LEFT JOIN tasksTable t
  ON t.processId = p.id 
group by p.id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!7/88752/10)

版本使用`COUNT()`：

```
SELECT p.id AS process,  
  count(case when t.amount = t.done then 1 else null end) AS tasksDone,
  count(p.id) AS tasksCount
FROM processTable p
LEFT JOIN tasksTable t
  ON t.processId = p.id 
group by p.id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!7/88752/12)

编辑，在您发表评论后，您可以将其包装在一个选择中以获得`progress`：

```
select process,
  tasksDone,
  tasksCount,
  (tasksDone / tasksCount) progress
from
(
  SELECT p.id AS process,  
    count(case when t.amount = t.done then 1 else null end) AS tasksDone,
    count(p.id) AS tasksCount
  FROM processTable p
  LEFT JOIN tasksTable t
    ON t.processId = p.id 
  group by p.id
) src 
```

# go - 如何将目录[不仅仅是其中的文件]写入golang中的tar.gz文件

> ID：13611100
> 
> 赞同：10
> 
> 时间：2012-11-28T17:36:13.763
> 
> 标签：go, tar, gzip

我想在 Go 中编写一个 tar_gz 工具。输入就像linux命令：

```
$tar czvf targetFileName inputDirectoryPath 
```

假设我有一个 inputDirectory 结构如下：

```
test [dir]
-- 0.txt
    -- 1 [sub dir]
         -- 1.txt 
```

例如：使用命令：

```
$tar czvf test.tar.gz test/ 
```

我们可以 tar 和 gzip 整个测试目录。

我的问题是我可以编写一个 tar 和 gz 路由来递归迭代测试目录中的所有文件并将文件写入 test.tar.gz 文件。但是我不知道如何将目录写入test.tar.gz。运行我的程序后，test.tar.gz 文件中的结构是：

```
0.txt
1.txt 
```

谁能告诉我如何将目录递归地写入输出 tar.gz 文件。非常感谢。

```
 package main

    import (
      "fmt"
      "os"
      "io"
      "log"
      "strings"
      "archive/tar"
      "compress/gzip"
    )

    func handleError( _e error ) {
      if _e != nil {
        log.Fatal( _e )
      }
    }

    func TarGzWrite( _path string, tw *tar.Writer, fi os.FileInfo ) {
      fr, err := os.Open( _path )
      handleError( err )
      defer fr.Close()

      h := new( tar.Header )
      h.Name = fi.Name()
      h.Size = fi.Size()
      h.Mode = int64( fi.Mode() )
      h.ModTime = fi.ModTime()

      err = tw.WriteHeader( h )
      handleError( err )

      _, err = io.Copy( tw, fr )
      handleError( err )
    }

    func IterDirectory( dirPath string, tw *tar.Writer ) {
      dir, err := os.Open( dirPath )
      handleError( err )
      defer dir.Close()
      fis, err := dir.Readdir( 0 )
      handleError( err )
      for _, fi := range fis {
        curPath := dirPath + "/" + fi.Name()
        if fi.IsDir() {
          //TarGzWrite( curPath, tw, fi )
          IterDirectory( curPath, tw )
        } else {
          fmt.Printf( "adding... %s\n", curPath )
          TarGzWrite( curPath, tw, fi )
        }
      }
    }

    func TarGz( outFilePath string, inPath string ) {
      // file write
      fw, err := os.Create( outFilePath )
      handleError( err )
      defer fw.Close()

      // gzip write
      gw := gzip.NewWriter( fw )
      defer gw.Close()

      // tar write
      tw := tar.NewWriter( gw )
      defer tw.Close()

      IterDirectory( inPath, tw )

      fmt.Println( "tar.gz ok" )
    }

    func main() {
      targetFilePath := "test.tar.gz"
      inputDirPath := "test/"
      TarGz( targetFilePath, strings.TrimRight( inputDirPath, "/" ) )
      fmt.Println( "Hello, World" )
    } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-28T18:22:37.817

您只是将文件名添加到 tar，而不是整个路径。您需要保留 Tar 能够理解目录的整个路径。您只需要更改一行：

```
h.Name = fi.Name() 
```

应该：

```
h.Name = _path 
```

在 Linux 上，输出`tar -tvf test.tar.gz`：

```
-rw-rw-r-- 0/0               0 2012-11-28 11:17 test/0.txt
-rw-rw-r-- 0/0               0 2012-11-28 11:17 test/sub/1.txt 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-09T11:33:28.337

另一种方法是使用内置的 filepath.Walk 功能

```
// root_directory has been set further up

walkFn := func(path string, info os.FileInfo, err error) error {
    if info.Mode().IsDir() {
        return nil
    }
    // Because of scoping we can reference the external root_directory variable
    new_path := path[len(root_directory):]
    if len(new_path) == 0 {
        return nil
    }
    fr, err := os.Open(path)
    if err != nil {
        return err
    }
    defer fr.Close()

    if h, err := tar.FileInfoHeader(info, new_path); err != nil {
        log.Fatalln(err)
    } else {
        h.Name = new_path
        if err = tw.WriteHeader(h); err != nil {
            log.Fatalln(err)
        }
    }
    if length, err := io.Copy( tw, fr ); err != nil {
        log.Fatalln(err)
    } else {
        fmt.Println(length)
    }
    return nil
}

if err = filepath.Walk(root_directory, walkFn); err != nil {
    return err
} 
```

# c# - 在 C# 中使用 lambda 表达式查找泛型列表

> ID：13611107
> 
> 赞同：0
> 
> 时间：2012-11-28T17:36:47.273
> 
> 标签：c#, linq

我有这个代码：

```
List<Visibility> ListVisibility = new List<Visibility>();
    public class Visibility
    {
        public int ShpNo;
        public int QtyShp;
        public int NumPallets;
        public string ETA;            
    }

Visibility item = ListVisibility.Find(VisibItem => VisibItem.ETA == e.Day.Date.ToShortDateString()); 
```

但是，当有一个符合该条件的项目时，上面的 Find 不会返回任何项目。

这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T17:40:12.377

最有可能的字符串匹配找不到匹配项。更改代码以将日期作为[`Date`](http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx)一部分进行比较`DateTime`，它将有更好的工作机会。

```
item => DateTime.Parse(item.ETA).Date == e.Day.Date 
```

样本假设`e.Day`是`DateTime`. 此外，您可能需要处理“`item.ETA`日期无效/空”的情况（即使用`DateTime.TryParse`）以匹配原始行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T17:41:49.063

我想到了许多事情，但最有可能的是两件事：

1.  字符串是否`Visibility.ETA`修剪了前导和尾随空格？

2.  字符串的大小写是否`Visibility.ETA`匹配`DateTime.ToShortDateString()`？

如果您将条件更改为：

```
var date = e.Day.Date.ToShortDateString();
var vis = list.Find(
    v => String.Compare(v.ETA, date, StringComparison.OrdinalIgnoreCase) == 0); 
```

它是否找到您要查找的项目？如果不是，您应该考虑是否需要将 ETA 转换为`DateTime`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T17:51:36.973

奥卡姆剃刀：你假设有一个项目符合你的条件是不正确的。

您可以通过一个简单的测试（这使用 NUnit）来验证该方法是否有效。

```
[Test]
public void TestFind()
{
     var etaValue = DateTime.Now.Date.ToShortDateString();
     var visibilities = new List<Visibility> { new Visibility { ETA = etaValue } };
     var foundItem = visibilities.Find(x => x.ETA == etaValue);
     Assert.That(foundItem, Is.Not.Null);
} 
```

# java - Java夏令时的问题

> ID：13611108
> 
> 赞同：8
> 
> 时间：2012-11-28T17:36:47.960
> 
> 标签：java, timezone, dst

我有一个需要了解时区的 Java 应用程序。当我采用 Unix 纪元时间并尝试将其转换为用于 Oracle SQL 调用的时间戳时，它正在获取正确的时区，但时区“useDaylightTime”值不正确，即当前返回“true” ，当我们不在 DST 时（我在佛罗里达州的 TZ“America/New_York”）。

这是在 Red Hat Linux Enterprise 6 上运行的，据我所知，它*已*正确设置为时区，例如“日期”返回：Wed Nov 28 12:30:12 EST 2012

我还可以看到，使用“zdump”实用程序，“isdst”的当前值为 0。

我的 Java 版本是 1.6.0_31。

我已经用谷歌搜索了这个并看到了这导致的许多问题，但他们中的许多人只是说手动设置 TZ，但我的问题不是 TZ，而是默认 TZ 将“isDaylight”设置为“true”这一事实. 我相信这导致我的查询返回一个小时后的数据（我可以看到它是）。

这是我运行的一个简单的代码片段，试图以最简单的方式重现它：

```
public class TZdefault {

    public static void main(String[] args) throws IOException {

            long startTime = System.currentTimeMillis()/1000;

            Calendar start = Calendar.getInstance();
            start.setTimeInMillis(startTime);

            start.setTimeZone(TimeZone.getDefault());

            System.out.println("Start UTC: " + start + "ms: " + start.getTimeInMillis());
            System.out.println("use daylight: " + start.getTimeZone().useDaylightTime());

    } // end main

}  // end class 
```

最后一件事。如果在我的代码中我将 TZ 设置为“EST”，它当然*会*返回一个将“isDaylight”设置为 False 的 TZ。但这不是一个好的解决方案。

我想添加一些我一直希望隐藏的细节。

我在使用 TIMESTAMP 和 TIMEZONE 字段的 Oracle 11g 数据库中有记录。我只是在做 JDBC 查询，其中两个参数使用 BETWEEN 开始时间戳和结束时间戳。

当我查询此表时，我使用的是使用日历条目的准备好的语句，其唯一目的是尝试和操作时区。最重要的是，在应用“默认”时区后，我正在使用“getTimeInMillis”方法对开始和结束时间进行 pstmt.setTimestamp() 调用。日志输出显示，实际上它输入了正确的毫秒数，但返回的 SQL 结果显然相差一小时！

我仍在尝试验证数据插入方面是否也没有问题。

但是我有很多调试信息，看起来我在 JDBC 查询中要求正确的时间。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-28T18:10:08.377

> 时区`useDaylightTime`值不正确，即，当我们不在 DST 时，它当前返回“true”

我认为您`useDaylightTime`对`inDaylightTime`. 前者告诉您将来是否在日光时间和标准时间之间存在过渡，而不是您处于过渡的哪一边。例如，对于中国时区，它返回 false，因为中国不针对夏令时进行调整，但对于大多数美国时区，它返回 true，因为大多数美国州（[亚利桑那](http://en.wikipedia.org/wiki/Daylight_saving_time_in_the_United_States#Arizona)州除外）都遵守夏令时。

> # [`inDaylightTime`](http://docs.oracle.com/javase/7/docs/api/java/util/TimeZone.html#inDaylightTime%28%29)
> 
> ```
> public abstract boolean inDaylightTime(Date date) 
> ```
> 
> 查询给定日期是否在该时区的夏令时。

对比

> # [`useDaylightTime`](http://docs.oracle.com/javase/7/docs/api/java/util/TimeZone.html#useDaylightTime%28%29)
> 
> ```
> public abstract boolean useDaylightTime() 
> ```
> 
> 查询此 TimeZone 是否使用夏令时。如果底层 TimeZone 实现子类支持历史和未来的夏令时时间表更改，则此方法引用最后一个已知的夏令时规则，该规则可以是未来的预测，并且可能与当前规则不同。`observesDaylightTime()`如果还应考虑当前规则，请考虑调用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T18:04:13.800

如果要禁用夏令时计算，则必须将时区设置为 EST。否则时间将根据为 AMERICA/NEW_YORK 设置的默认时区计算

```
 TimeZone zoneEST = TimeZone.getTimeZone("EST"); 
       System.out.println(zoneEST.getDSTSavings());  //0 hour
       System.out.println(zoneEST.getRawOffset());  //5 hour
       TimeZone.setDefault(zoneEST);
       System.out.println("");

       TimeZone zoneNY = TimeZone.getTimeZone("America/New_York");
       System.out.println(zoneNY.getDSTSavings()); // 1 hour
       System.out.println(zoneNY.getRawOffset()); // 5 hour 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-24T23:25:33.980

我找到了一种方法来确保忽略夏令时

```
TimeZone tz = TimeZone.getTimeZone("GMT");
TimeZone.setDefault(tz);
GregorianCalendar calendar;
calendar = new GregorianCalendar(); 
```

在创建 GregorianCalendar 对象之前设置时区

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-15T10:39:01.617

```
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.TimeZone;

public class TimeZoneTest {
    public static void main(String[] argv) throws ParseException {

        SimpleDateFormat formatter = new SimpleDateFormat("dd-M-yyyy hh:mm:ss a");

        String dateInString = "22-01-2015 10:15:55 AM";
        Date date = formatter.parse(dateInString);
        TimeZone tz = TimeZone.getDefault();

        // From TimeZone Asia/Singapore
        System.out.println("TimeZone : " + tz.getID() + " - " + tz.getDisplayName());
        System.out.println("TimeZone : " + tz);
        System.out.println("Date : " + formatter.format(date));

        // To TimeZone America/New_York
        SimpleDateFormat sdfAmerica = new SimpleDateFormat("dd-M-yyyy hh:mm:ss a");
        TimeZone tzInAmerica = TimeZone.getTimeZone("America/New_York");
        sdfAmerica.setTimeZone(tzInAmerica);

        String sDateInAmerica = sdfAmerica.format(date); // Convert to String first
        Date dateInAmerica = formatter.parse(sDateInAmerica);

        System.out.println("\nTimeZone : " + tzInAmerica.getID() + 
                                      " - " + tzInAmerica.getDisplayName());
        System.out.println("TimeZone : " + tzInAmerica);
        System.out.println("Date (String) : " + sDateInAmerica);
        System.out.println("Date (Object) : " + formatter.format(dateInAmerica)); 
    }

} 
```

# ios - 通过浏览器从移动设备打印

> ID：13611112
> 
> 赞同：0
> 
> 时间：2012-11-28T17:36:52.430
> 
> 标签：ios, mobile, printing

我们正在创建一个具有打印功能的 Web 应用程序，并希望能够在尽可能多的设备上支持此功能。我们的用户专门使用 iPad，但我们最终会希望支持其他设备。我已经看到 iOS 现在使用 AirPrint，但是不支持此功能的打印机呢？从网络应用程序的角度来看，有什么方法可以解决这个问题，还是需要采取其他措施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:32:43.393

查看此应用程序：[https](https://itunes.apple.com/de/app/printer-pro/id393313223?mt=8) ://itunes.apple.com/de/app/printer-pro/id393313223?mt= 8 如果可以选择使用它，或者自己想出一些东西，但这是可能的.

# wpf - 如何将 ListBoxItem.IsSelected 绑定到布尔数据属性

> ID：13611113
> 
> 赞同：5
> 
> 时间：2012-11-28T17:36:52.187
> 
> 标签：wpf, silverlight

我在扩展选择模式中有一个 WPF 列表框。

我需要做的是将 ListBox 绑定到数据项类的可观察集合，这很容易，但本质上是将`IsSelected`每个 ListBoxItem 的状态绑定到相应数据项中的布尔属性。

而且，我需要它是双向的，这样我就可以使用 ViewModel 中选定和未选定的项目填充 ListBox。

我查看了许多实现，但没有一个对我有用。它们包括：

*   将 DataTrigger 添加到 ListBoxItem 的样式并调用状态操作更改

我意识到这可以通过事件处理程序在代码隐藏中完成，但考虑到域的复杂性，它会非常混乱。我宁愿坚持使用 ViewModel 进行双向绑定。

谢谢。标记

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-28T18:02:41.540

在 WPF 中，您可以轻松地将 ListBox 绑定到具有 IsSelected 状态的布尔属性的项目集合。如果您的问题是关于 Silverlight 的，恐怕它不会那么简单。

```
public class Item : INotifyPropertyChanged
{
    // INotifyPropertyChanged stuff not shown here for brevity
    public string ItemText { get; set; }
    public bool IsItemSelected { get; set; }
}

public class ViewModel : INotifyPropertyChanged
{
    public ViewModel()
    {
        Items = new ObservableCollection<Item>();
    }

    // INotifyPropertyChanged stuff not shown here for brevity
    public ObservableCollection<Item> Items { get; set; }
} 
```

* * *

```
<ListBox ItemsSource="{Binding Items, Source={StaticResource ViewModel}}"
         SelectionMode="Extended">
    <ListBox.ItemContainerStyle>
        <Style TargetType="ListBoxItem">
            <Setter Property="IsSelected" Value="{Binding IsItemSelected}"/>
        </Style>
    </ListBox.ItemContainerStyle>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding ItemText}"/>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

# java - Java反射：从接口名称调用方法

> ID：13611125
> 
> 赞同：3
> 
> 时间：2012-11-28T17:37:59.773
> 
> 标签：java, class, reflection, methods, interface

我有一个接口的名称，我想调用一个由其具体实现的类定义的方法。所以我求助于Java Reflection。

界面：

```
package tsb.learning.reflection;

public interface IAnyThing {

    void doSomething();
} 
```

它的实现类：

```
package tsb.learning.reflection;

public class AnyThing implements IAnyThing {

    public void doSomething() {
        System.out.println("JYM");
    }
} 
```

的实施`InvocationHandler`：

```
package tsb.learning.reflection;

import java.lang.reflect.InvocationHandler;
import java.lang.reflect.Method;

public class AnyInvocationHandler implements InvocationHandler {

    @Override
    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
        return method.invoke(proxy, args);
    }
} 
```

和控制器：

```
package tsb.learning.reflection;

import java.lang.reflect.InvocationHandler;
import java.lang.reflect.Proxy;

public class Controller {

    /**
     * @param args
     * @throws ClassNotFoundException
     */
    public static void main(String[] args) throws ClassNotFoundException {
        String interfaceName = "tsb.learning.reflection.IAnyThing";
        ClassLoader classLoader = Class.forName(interfaceName).getClassLoader();
        Class<?>[] interfaces = new Class<?>[] { Class.forName(interfaceName) };
        InvocationHandler handler = new AnyInvocationHandler();
        IAnyThing anyThing = (IAnyThing) Proxy.newProxyInstance(classLoader, interfaces, handler);
        anyThing.doSomething();
    }
} 
```

但它不起作用，我收到以下异常：

```
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at tsb.learning.reflection.AnyInvocationHandler.invoke(AnyInvocationHandler.java:10)
    at $Proxy0.doSomething(Unknown Source)
    at sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at tsb.learning.reflection.AnyInvocationHandler.invoke(AnyInvocationHandler.java:10)
    at $Proxy0.doSomething(Unknown Source)
    at sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at tsb.learning.reflection.AnyInvocationHandler.invoke(AnyInvocationHandler.java:10)
    at $Proxy0.doSomething(Unknown Source)
    at sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at tsb.learning.reflection.AnyInvocationHandler.invoke(AnyInvocationHandler.java:10) 
```

例外是在控制台中循环打印，我需要停止程序。

任何信息都会对我很有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T17:41:23.080

> 引起：java.lang.reflect.InvocationTargetException

这意味着您调用的方法引发了异常。您需要查看出现在它之后的异常并导致此异常。它与您如何调用该方法无关。

我怀疑你得到了 StackOverflowError

```
// calls the same method on the same proxy which will recurse until you get an error.
return method.invoke(proxy, args); 
```

* * *

而是尝试在真实对象上调用方法来做某事。

```
public class AnyInvocationHandler implements InvocationHandler {
    final IAnyThing iat;

    public AnyInvocationHandler(IAnyThing iat) {
        this.iat = iat;
    }

    @Override
    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
        // call the same method on a real object.
        return method.invoke(iat, args);
    }
} 
```

顺便说一句你可以写

```
Class interfaceClass = tsb.learning.reflection.IAnyThing.class;
ClassLoader classLoader = interfaceClass.getClassLoader();
Class<?>[] interfaces = new Class<?>[] { interfaceClass }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:47:21.843

在您的内部`AnyInvocationHandler`，您可以将调用委托给您的实例`AnyThing`：

```
public class AnyInvocationHandler implements InvocationHandler {

    private AnyThing delegate = new AnyThing();

    @Override
    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {

        // to something useful here
        [...]
        // finally, invoke the method on implementation class.
        return method.invoke(delegate, args);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T18:07:16.913

中唯一的方法`IAnyThing`是`doSomething()`，所以我猜`InvocationHandler`你知道方法是什么。把你的实现放在那里。此外，`doSomething()`您还应该处理继承自的三个方法`java.lang.Object`：

```
public static class AnyInvocationHandler implements InvocationHandler {

    private static final Method doSomething;

    static {
        try {
            doSomething = IAnyThing.class.getMethod("doSomething");
        } catch (NoSuchMethodException e) {
            throw new ExceptionInInitializerError(e);
        }
    }

    @Override
    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
        if (method.getDeclaringClass() == Object.class)
            return handleObjectMethod(proxy, method, args);

        if (doSomething.equals(method)) {
            doSomethingImpl();
            return null;
        }

        throw new AbstractMethodError(method.toString());
    }

    private Object handleObjectMethod(Object proxy, Method method, Object[] args) {
        switch (method.getName()) {
            case "equals":
                return proxy == args[0];
            case "hashCode":
                return System.identityHashCode(proxy);
            case "toString":
                return proxy.getClass().getName() + "@" + Integer.toHexString(System.identityHashCode(proxy));
            default:
                throw new AssertionError();
        }
    }

    private void doSomethingImpl() {
        // implement....
    }

} 
```

# python - 使用 opencv_traincascade 创建一个 haar 分类器

> ID：13611126
> 
> 赞同：1
> 
> 时间：2012-11-28T17:38:01.940
> 
> 标签：python, opencv, machine-learning, computer-vision, object-detection

我在创建 haar 分类器时遇到了一些麻烦。我需要建立一个分类器来检测汽车。目前我在python中编写了一个读取图像的程序，我在对象所在的区域周围绘制了一个矩形，一旦绘制了矩形，它就会输出图像名称，矩形的左上角和右下角坐标。我不确定从这里去哪里以及如何实际构建分类器。谁能给我任何帮助？

编辑*

我正在寻求有关如何使用 opencv_traincascade 的帮助。我查看了文档，但我不太清楚如何使用它来创建要在检测程序中使用的 xml 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:53:00.190

看起来您需要首先确定要训练分类器的功能，因为使用 haar 分类器可以从这些额外功能中受益。从那里你需要`train`分类器，这需要你获得很多有汽车和没有汽车的图像，然后运行它并让它调整它正在拍摄的平均值以便分类尽其所能与您选择的功能。

为了获得更好的分类器，您必须弄清楚特征的顺序以及将它们放在一起的最佳顺序，以进一步深入研究对象并确定它是否真的是您正在寻找的东西。同样，对于您的特定功能和整个问题，这将需要大量示例。

# objective-c - 如何比较和查找可可中两个 XML 文件之间的差异？

> ID：13611129
> 
> 赞同：0
> 
> 时间：2012-11-28T17:38:18.107
> 
> 标签：objective-c, xml, cocoa, xml-parsing, compare

这是一个由两部分组成的问题，用于处理 40mb xml 文件。

• 对于在后台连续运行的程序，存储在内存中的合理大小是多少？
• 如何查找 XML 文件中的更改内容。

所以在第一次读取时，XML 被加载到 NSData，然后上传到服务器。

现在，与其每次更改时都上传 40mb 的 XML，我更愿意上传仅包含已更改内容的“delta”文件。该程序将监视文件的更改，并在修改时激活。从我所见，我需要解析旧版本的 xml 文件并解析修改后的 xml 文件，然后比较它们？每次修改文件时都这样在内存中存储80mb是不合理的吗？现在我假设这必须使用 DOM 解析器来完成，因为我看不出如何将这样的两个文件与 SAX 解析器进行比较，因为它只存储了部分文件？

我是这方面的新手，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T05:26:16.260

比较两个文件：

有很多方法可以做，（由于要考虑文件，我可能不正确）：

`sdiff file1.xml file2.xml`一个 unix 命令 您可以将此命令与苹果脚本一起使用。

`-[NSFileManager contentsEqualAtPath:andPath:]` 此方法检查给定路径下的两个文件是否为同一个文件，然后比较它们的大小，最后比较它们的内容。

对于其他部分：

后台进程考虑什么大小，我不这么认为，对于应用程序来说很重要。您可以将这些保存到临时文件中。甚至 safari 也使用 130+ MB，因为您可以通过活动监视器轻松检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:50:06.687

NSXMLParser 最终成为最有用的

# javascript - 如何在不丢失上下文的情况下在另一个原型函数中调用原型函数

> ID：13611135
> 
> 赞同：0
> 
> 时间：2012-11-28T17:38:36.353
> 
> 标签：javascript

我有这个[代码](http://jsfiddle.net/ZBhf6/2/)：

```
var MyObj = (function() {
    //Constructor
    var MyObj= function(){
        this.myArray = [1,2,3];
    }

    MyObj.prototype = {
        myFunc: function(){
            alert(this.myArray.toString());                
        },
        myFuncCaller: function(){            
            MyObj.prototype.myFunc();                
        }
    };
    return MyObj;      
})();

var myObj = new MyObj();
myObj.myFunc();

//This line will throw an exception because this.myArray is undefined
myObj.myFuncCaller(); 
```

​ 为什么是`this.myArray`未定义的？我知道我做错了什么，正确的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T17:39:49.083

只需使用`this`：

```
this.myFunc(); 
```

当您在 Javascript 中调用函数时，`this`设置为您调用它的表达式。
例如，在您的代码中，`this`in `myFunc()`is `MyObj.prototype`。

# php - php socket 向多个客户端发送消息的快速方法？

> ID：13611138
> 
> 赞同：0
> 
> 时间：2012-11-28T17:38:45.267
> 
> 标签：php, performance, sockets

我正在运行基于 Raymond Fain 在 kirupa 上的教程提供的 php 服务器：

[http://www.kirupa.com/developer/flash8/php5sockets_flash8_3.htm](http://www.kirupa.com/developer/flash8/php5sockets_flash8_3.htm)

在某种程度上，它工作得很好。问题是，当它接收到某些消息时，它会对该消息执行一些操作，然后将其发送给所有连接的客户端。这里的问题是，一旦客户端数量达到大约 12 个大气高度，向所有客户端发送消息的循环可能需要一段时间（比如 4 秒），并且在这 4 秒期间发送的任何后续消息都会排队最终我们得到超时。

这是向所有客户端发送消息的循环：

```
function send_Message($allclient, $socket, $buf)
{
    $now = microtime(true);
    echo 'sending message to '.count($allclient).' clients ';

    $msg = "<mbFeed>$buf</mbFeed>\n\0";
    foreach($allclient as $client)
    {
        socket_write($client, $msg, strlen($msg));
    }

    $end = microtime(true);
    echo 'time was '.($end - $now);
} 
```

你会注意到我一直在通过比较微时间来呼应它所花费的时间。问题是 echo 声称整个过程需要很短的时间，比如 0.003 秒，这是我所期望的，但是当我在终端中运行这个脚本时，我看到小旋转图标指向四秒钟，在此期间一切都没有反应。

我的问题如下：有人知道这段时间脚本在做什么吗？我能做些什么来阻止它这样做吗？有没有更有效的方法向所有连接的套接字发送消息？

这是整个套接字文件的代码，如果你需要的话，但我希望这对某些人来说可能很熟悉......

```
#!/usr/bin/php -q
<?php
/*
Raymond Fain
Used for PHP5 Sockets with Flash 8 Tutorial for Kirupa.com
For any questions or concerns, email me at ray@obi-graphics.com
or simply visit the site, www.php.net, to see if you can find an answer.
*/

//ini_set('display_errors',1);
ini_set('display_startup_errors',1);
error_reporting(E_ALL);
//ini_set('error_log', 'socket_errors.log');
ini_set('log_errors', 'On');
ini_set('display_errors', '1');

error_log('testing');

stream_set_timeout(1,0);

set_time_limit(0);

ob_implicit_flush();

$address = 'xxx.xxx.x.xxx';
$port = xxxx;

function send_Message($allclient, $socket, $buf)
{
    $now = microtime(true);
    echo 'sending message to '.count($allclient).' clients ';

    $msg = "<mbFeed>$buf</mbFeed>\n\0";
    foreach($allclient as $client)
    {
        socket_write($client, $msg, strlen($msg));
    }

    $end = microtime(true);
    echo 'time was '.($end - $now);
}

echo "connecting...
";
//---- Start Socket creation for PHP 5 Socket Server -------------------------------------

if (($master = socket_create(AF_INET, SOCK_STREAM, SOL_TCP)) < 0)
{
    echo "socket_create() failed, reason: " . socket_strerror($master) . "\n";
}

socket_set_option($master, SOL_SOCKET,SO_REUSEADDR, 1);
socket_set_nonblock($master);

if (($ret = socket_bind($master, $address, $port)) < 0)
{
    echo "socket_bind() failed, reason: " . socket_strerror($ret) . "\n";
}

echo 'socket bind successfull.
';

if (($ret = socket_listen($master, 5)) < 0)
{
    echo "socket_listen() failed, reason: " . socket_strerror($ret) . "\n";
}

$read_sockets = array($master);

echo "connected.";

//---- Create Persistent Loop to continuously handle incoming socket messages ---------------------
while (true)
{ 
    $changed_sockets = $read_sockets;
    $num_changed_sockets = socket_select($changed_sockets, $write = NULL, $except = NULL, NULL);

    echo 'changed sockets length: '.(count($changed_sockets));

    foreach($changed_sockets as $key => $socket)
    {
        if ($socket == $master)
        {
            if (($client = socket_accept($master)) < 0)
            {
                echo "socket_accept() failed: reason: " . socket_strerror($msgsock) . "\n";
                continue;
            } 
            else
            {
                socket_set_nonblock($client);
                array_push($read_sockets, $client);
            }
        }
        else
        {
            $bytes = socket_recv($socket, $buffer, 8192, 0);

            if ($bytes == 0)
            {
                unset($read_sockets[$key]);
                unset($changed_sockets[$key]);
                socket_close($socket);
            }
            else
            {
                if (substr($buffer, 0, 3) == "<->")
                {
                    unset($read_sockets[$key]);
                    unset($changed_sockets[$key]);
                    socket_close($socket);

                    $buffer = substr($buffer, 3);
                }

                $allclients = $read_sockets;
                array_shift($allclients);
                if (substr($buffer, 0, 3) == ":::") handleSpecial(substr($buffer, 3));
                else
                {
                    echo 'allclients length: '.(count($allclients));
                    send_Message($allclients, $socket, str_replace("\0","",$buffer));
                }
            }
        }
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:56:56.010

我想推荐你看看[ZeroMQ](http://www.zeromq.org)它就像类固醇上的套接字

**ØMQ 百字汇**

> ØMQ（也称为 ZeroMQ、0MQ、zmq）看起来像一个可嵌入的网络库，但它的行为就像一个并发框架。它为您提供跨各种传输（如进程内、进程间、TCP 和多播）传输原子消息的套接字。您可以使用扇出、发布-订阅、任务分发和请求-回复等模式连接 N 对 N 套接字。它的速度足以成为集群产品的结构。它的异步 I/O 模型为您提供可扩展的多核应用程序，构建为异步消息处理任务。它有许多语言 API，可以在大多数操作系统上运行。ØMQ 来自 iMatix，是 LGPLv3 开源的。

使用`ZMQ::SOCKET_PUB`和`ZMQ::SOCKET_PULL`同一个聊天服务器可以很简单

```
$ctx = new ZMQContext();
$pub = $ctx->getSocket(ZMQ::SOCKET_PUB);
$pub->bind('tcp://*:5566');
$pull = $ctx->getSocket(ZMQ::SOCKET_PULL);
$pull->bind('tcp://*:5567');

echo "Chat Server Start ", PHP_EOL;

while(true) {
    $message = $pull->recv();
    echo "Got ", $message, PHP_EOL;
    $pub->send($message);
} 
```

这可以`10,000`在一个简单的系统上轻松处理每分钟的推送请求，这与您当前的服务器实现相反。

使用[ZmqSocket](http://www.zeromq.org/bindings%3ajavascript)，您可以从 JavaScript 代码与 zmq 套接字通信。您可以连接、发送和接收字符串消息。由于 JavaScript 不支持原始 TCP 连接，它使用 Flash 作为桥梁

[简单的 JavaScript 桥接示例](http://code.google.com/p/zmqsocket-js/source/browse/Test.html) ，您还可以查看[zmqsocket-as](http://code.google.com/p/zmqsocket-as/)，它允许您从 ActionScript 代码与 zmq-sockets 对话。

# .net - 如何获取IP和MAC地址

> ID：13611142
> 
> 赞同：0
> 
> 时间：2012-11-28T17:39:07.603
> 
> 标签：.net, vb.net, xaml

> **可能重复：**
> [如何在 C# 中获取我自己的 IP 地址？](https://stackoverflow.com/questions/1069103/how-to-get-my-own-ip-address-in-c)

我的问题看起来很简单。我想找到 IP 地址和 MAC 地址，然后在文本框中简单地显示它们。我能够获取主机名，但我不知道如何从中获取 IP 地址。我在 Visual Studio 2012 (.Net Framework 4.5) 中使用 VB.NET。问题是 .NET 中的某些命名空间已在 Visual Studio 2012 中更改或移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:42:15.640

尝试这个：-

```
 public string GetLocalIP()
 {
string _IP = null; 
System.Net.IPHostEntry _IPHostEntry = System.Net.Dns.GetHostEntry(System.Net.Dns.GetHostName());

foreach (System.Net.IPAddress _IPAddress in _IPHostEntry.AddressList)
{
    if (_IPAddress.AddressFamily.ToString() == "InterNetwork")
    {
        _IP = _IPAddress.ToString();
    }
}
return _IP;
} 
```

或者

```
Try
        Dim IpCollection As New Collection

        Dim i As Integer

        Dim ipE As Net.IPHostEntry = System.Net.Dns.GetHostEntry(-HOSTNAME-)
        Dim IpA() As Net.IPAddress = ipE.AddressList

        For i = 0 To IpA.GetUpperBound(0)
            IpCollection.Add(IpA(i).ToString)
        Next

        Dim Ipaddress As String

        Ipaddress = IpCollection.GetValue(-Num-)

    Catch ex As Exception
        MsgBox("An error has occured")
    End Try 
```

获取 MAC 地址：-

```
 Using mc As New ManagementClass("Win32_NetworkAdapterConfiguration")
For Each mo As ManagementObject In mc.GetInstances()
    Console.WriteLine(mo("MacAddress").ToString())
Next
   End Using 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:43:20.250

获取主机名，然后从主机地址列表中获取 IP：

```
Dim host = Dns.GetHostEntry(Dns.GetHostName())
Dim ip = host.AddressList.FirstOrDefault(Function(x as IPAddress) _
    x.AddressFamily = System.Net.Sockets.AddressFamily.Internetwork) 
```

同样，您可以获取机器中一个或多个网络适配器的 MAC 地址（示例代码演示如何查找第一个可用的网络适配器）：

```
Dim networkInterface = System.Net.NetworkInformation.NetworkInterface.GetAllNetworkInterfaces()
Dim firstNetwork = networkInterface.FirstOrDefault(Function(x as System.Net.NetworkInformation.NetworkInterface) _
    x.OperationalStatus = System.Net.NetworkInformation.OperationalStatus.Up)
Dim firstMacAddressOfWorkingNetworkAdapter = firstNetwork.GetPhysicalAddress() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T17:48:57.893

首先，创建一个可以包含您要返回的所有信息的类：

```
Public Class NetworkInterfaceInfo
    Public Sub New(ByVal ipAddress As IPAddress, ByVal physicalAddress As PhysicalAddress)
        _ipAddress = ipAddress
        _physicalAddress = physicalAddress
    End Sub

    Public ReadOnly Property IpAddress() As IPAddress
        Get
            Return _ipAddress
        End Get
    End Property
    Private _ipAddress As IPAddress

    Public ReadOnly Property PhysicalAddress() As PhysicalAddress
        Get
            Return _physicalAddress
        End Get
    End Property
    Private _physicalAddress As PhysicalAddress
End Class 
```

然后，创建一个循环遍历所有网络接口并找到满足您条件的方法。然后，遍历这些接口的所有 IP 地址，直到找到符合条件的 IP 地址。找到匹配项后，返回信息：

```
Public Function GetNetworkInterfaceInfo() As NetworkInterfaceInfo
    For Each networkInterface As NetworkInterface In networkInterface.GetAllNetworkInterfaces()
        If networkInterface.OperationalStatus = OperationalStatus.Up Then
            For Each address As IPAddress In networkInterface.GetIPProperties().DnsAddresses()
                If address.AddressFamily = AddressFamily.InterNetwork Then
                    Return New NetworkInterfaceInfo(address, networkInterface.GetPhysicalAddress())
                End If
            Next
        End If
    Next
    Return Nothing
End Function 
```

# starteam - Borland StarTeam ToolBar 将其配置数据保存在哪里？

> ID：13611143
> 
> 赞同：0
> 
> 时间：2012-11-28T17:39:16.390
> 
> 标签：starteam

出于某种奇怪的原因，Borland StarTeam Toolbar 实用程序不保存其数据（因此不缓存/记忆上次使用的 ST 服务器，基本上完全没用）。因此，我每次访问 ST 时都必须手动登录，这是一场噩梦。

我们的 IT 人员不知道，为什么在我的系统上它没有按预期保存数据。他们声称，这是第一个也是唯一一个显示这种异常的系统......

任何想法，这个工具栏将数据保存到哪里？它是否需要设置一些环境变量才能正确执行此操作或类似的东西？任何指针将不胜感激。

我在 Windows 7（x64 Ultimate）系统上使用它，ST 是 v2009（内部版本 11.0.0-68），ST 工具栏是 v11.0.0.38。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:50:35.430

您正在运行 2009 StarTeam Client 的中档版本。我建议升级到最新的 2009 客户端，

[http://supportline.microfocus.com/websync/STarTeam2009E.aspx](http://supportline.microfocus.com/websync/STarTeam2009E.aspx)

当前最新版本是 11.0.0.91，Windows 7 仅被严格列为支持 11.0.0.72 以后的版本。

也许你的问题的根源。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:03:13.410

它似乎在**HKEY_CURRENT_USER\Software\Borland\StarTeam Toolbar**下存储了一些选项。但是登录信息似乎存储在其他地方。

这是一个愚蠢的问题，但是您确定在登录时选中了“保存为此服务器的默认凭据”吗？

# git - 如何在没有合并冲突的情况下将一长串 git 合并转换为单个变基？

> ID：13611144
> 
> 赞同：3
> 
> 时间：2012-11-28T17:39:21.897
> 
> 标签：git, version-control

所以我有一个 master 分支，我们称之为 foo，我已经使用了一段时间，在大约 50 次提交之后，我得到了一个相当复杂的合并历史，因为 foo 有自己的一些子分支。这里的历史对我来说并不重要，所以我决定通过重新设置每个分支并将所有提交压缩为一个来清理事情，这样我就只有一个提交代表 master 和那个分支之间的差异。

起初我以为我可以这样做：

```
git checkout foo
git rebase master 
```

但这对我不起作用。该分支有超过 50 次提交，每次都涉及许多文件，并且每次提交都会遇到一堆冲突。

相反，我最终做的是：

```
git checkout foo
<copy all files to another folder>
git checkout master
git branch -D foo
git checkout -b foo
<overwrite all files with the copy I made earlier, and create a new commit> 
```

这满足了我将合并的悠久历史转变为单个压扁的变基的需要，而无需处理沿途的所有冲突，但我只是想知道是否有一种更“git-friendly”的方式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T17:44:38.160

在 git 中执行此操作的更友好的方法是创建第三个集成分支。当你开发 foo 时，合并 master 和 foo 。这将向 git 展示您如何处理同时更改的代码库。在您的配置中启用 rerere（重用记录的分辨率）非常重要。

现在，当您终于准备好将 foo 合并到 master 中时，git 将知道如何解决冲突，就像您一直告诉它如何做那样。

或者，在准备好后将该集成分支合并到 master 中。你应该没有冲突。这取决于您是否可以容忍历史记录中的所有这些测试合并。

这与我在 Branch per Feature 上的帖子有些相关：http: [//dymitruk.com/blog/2012/02/05/branch-per-feature/](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)

我不建议压缩提交，因为您会丢失有关文件如何处于它们所处状态的信息。git 必须处理的信息越多越好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:44:53.300

你有没有尝试过：

```
git merge --squash 
```

这样做的目的是获取所有更改并将它们放入准备提交的索引中。您仍然会遇到合并冲突，但它们将在一个地方，您可以在提交一大块所述内容之前修复它们。

有关更详细的解释和图表，请查看[此](http://365git.tumblr.com/post/4364212086/git-merge-squash)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-23T17:58:21.223

Git 的瓷器无法真正处理将所有合并步骤真正压缩为一个章鱼合并提交所需的扭曲。幸运的是，Git 公开了所需的管道，因此您可以使用一个命令完成此操作。请参阅[我对章鱼合并的问题的答案](https://stackoverflow.com/a/29209881/34799)。

# ssrs-2008 - 如何在 SSRS 中指定可用的值参数？

> ID：13611150
> 
> 赞同：2
> 
> 时间：2012-11-28T17:39:38.320
> 
> 标签：ssrs-2008, reporting-services

在 SSRS 中，我正在尝试使用此参数屏幕构建报告。其中一个参数取 5 个值，如下所示：

![在此处输入图像描述](../Images/4b920bdfd9d58d3d6b73c28277284df6.png)

[源](https://i.imgur.com/TvkcB.png)

但是，它不起作用..我不知道为什么。我也不明白“可用值”和“默认值”有什么区别？任何提示表示赞赏，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T00:39:03.323

可用值是您允许该参数具有的值。它们可以从下拉列表中选择。您可以像以前那样手动指定它们，也可以从数据集中填充可用值。

默认值保存参数将设置为的初始值。这将是可用值之一。在您的示例中，您可以将默认值设置为 0 以表示默认为“No repsonse to survey”。如果所有参数都具有默认值，则报告将自动运行。

现在您说它不起作用，但您没有定义不起作用的含义。请编辑您的问题以定义正在发生的事情以及您真正想要发生的事情。

我会快速猜测返回的值没有被您的参数选择过滤？如果是这样，您必须在查询中使用您的参数或数据集的过滤器表达式。

例如，如果您的参数被调用，`Response`那么数据集查询应该类似于

```
SELECT *
FROM Responses
WHERE ResponseValue = @Response 
```

# jquery - 使用 jquery 获取第一个 div 内容

> ID：13611151
> 
> 赞同：0
> 
> 时间：2012-11-28T17:39:40.227
> 
> 标签：jquery

我正在使用以下代码来获取行列：

```
$.each( items, function(i, item){
     columns = $(item).children();
     //columns[5]
     //columns[7]
}); 
```

现在每一列都有一个div。我想获取 div 的内部内容。我尝试使用`columns[5]`它，它给了这样的 div

```
<div style= "" > 123 </div> 
```

我只需要123

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:42:23.843

你会想要[`.text()`](http://api.jquery.com/text/)这个。

```
$.each( items, function(i, item){
     columns = $(item).children();
     alert($(columns[5].text())); // create jQuery object and get text from that
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:45:55.280

```
columns.eq(5).find("div:first").text(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T17:46:07.483

Seeing`columns`是一个 jQuery 集合，您可以使用[**eq()**](http://api.jquery.com/eq/)来获取引用指定索引中的 DOM 元素的 jQuery 对象。因为它是一个 jQuery 对象，`eq()`您可以在其上调用 jQuery 的[**text()**](http://api.jquery.com/text/)方法。

```
$.each( items, function(i, item){
    columns = $(item).children();
    columns.eq(5).text();
}); 
```

或者，您可以从指定索引处的 jQuery 集合中获取实际的 DOM 元素并直接调用[**innerHtml**](https://developer.mozilla.org/en-US/docs/DOM/element.innerHTML)：

```
$.each( items, function(i, item){
    columns = $(item).children();
    columns[5].innerHtml;
}); 
```

# forms-authentication - 针对不同用户的不同超时时间的 FormsAuthentication

> ID：13611152
> 
> 赞同：1
> 
> 时间：2012-11-28T17:39:44.753
> 
> 标签：forms-authentication

在 ASP.NET MVC 4 中，是否可以为不同的用户类型设置不同的超时时间？

我有一个应用程序，用户和客户都将登录。客户往往是相当短暂的，并且在网站上停留的时间很短，而用户需要保持登录数小时。

有没有办法做到这一点？

我应该指出我没有使用 MembershipServices。我正在手动处理用户身份验证。

希望你能帮忙，

西蒙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T01:01:29.883

简短的回答是的。

但是您没有使用标准的会员资格提供程序，因此您必须根据您所做的工作自己设计此功能。

标准提供程序允许您设置身份验证令牌的到期日期（请参阅[http://msdn.microsoft.com/en-us/library/system.web.security.formsauthenticationticket.expiration.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthenticationticket.expiration.aspx)）。然后，令牌会在具有相同到期日期的 cookie 中写入用户浏览器。到期日期包含在令牌本身中，否则令牌将永远有效，因为只有浏览器知道 cookie 的到期日期。

当令牌过期时，用户必须重新登录。

# sql - Groovy SQL 连接未关闭

> ID：13611153
> 
> 赞同：0
> 
> 时间：2012-11-28T17:39:47.417
> 
> 标签：sql, groovy, connection, datasource

我正在运行一些单元测试，但我看到一些奇怪的行为，即使用后连接未释放到池中（当测试数量达到池大小时，这不可避免地导致单元测试挂起）

为了演示，我创建了一个非常简单的单元测试：

```
@Before void setUp(){
    sql = new Sql(getDataSource())
    println getDataSource().getNumActive()
}

@After void tearDown(){
    sql.close()
}

@Test void test1(){
    println sql.rows("select 1")
}
@Test void test2(){
    println sql.rows("select 1")
}
@Test void test3(){
    println sql.rows("select 1")
}
@Test void test4(){
    println sql.rows("select 1")
} 
```

在我的 setup 方法中，我的 getDataSource() 方法只返回一个静态的、初始化的 BasicDataSource（所以每次都是同一个数据源）。

我还在拆解方法中明确调用了我的 Sql 对象的 close 方法，尽管 Groovy 在其[文档](http://groovy.codehaus.org/api/groovy/sql/Sql.html#Sql%28javax.sql.DataSource%29)中说在使用 DataSource 构造 Sql 对象时不必这样做

```
public Sql(javax.sql.DataSource dataSource)
Constructs an SQL instance using the given DataSource. Each operation will use a Connection from the DataSource pool and close it when the operation is completed putting it back into the pool. 
```

但是，当我运行测试时，活动连接的数量继续增加，如果我将最大池大小设置为 2，那么它将在第二次测试后无限期挂起。

谁能告诉为什么连接没有被返回？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:07:48.580

好吧，这是一个愚蠢的问题..

我没有注意到 testclass 正在扩展另一个类，其中包含重复的 @Before 设置方法，因此显然是在对池做一些有趣的事情。删除它已经解决了问题。

# python - 将 <> 运算符转换为 python3

> ID：13611156
> 
> 赞同：5
> 
> 时间：2012-11-28T17:40:06.010
> 
> 标签：python, python-2.7, python-3.x, operators

我正在尝试将此[feedparser.py](https://github.com/Unode/python-feedparser/blob/master/feedparser/feedparser.py)（在 github 上）转换为 python3。我无法理解这条线在做什么，现在它会引发语法错误：

```
[line 640]   if tag.find(':') <> -1: 
```

什么是运营商`<>`。是否有 Python3 等价物？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T17:41:13.500

它是不等式运算符 的同义词`!=`，如 BASIC 中所示。

顺便说一句，您要问的那一行将更惯用地写为：

```
if ":" in tag: 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-28T17:41:25.893

这是不等式比较的旧拼写。[改为使用`!=`。](http://docs.python.org/3/whatsnew/3.0.html#removed-syntax)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-28T17:41:26.447

`<>`读“不等于” `!=`会做同样的事情

# c++ - 如何在 C++ 中处理通信缓冲区？

> ID：13611161
> 
> 赞同：0
> 
> 时间：2012-11-28T17:40:14.683
> 
> 标签：c++

我有一个通信缓冲区，它在 Listner 类中实现为 char commBuffer[BUFFER_SIZE]

创建由所有类共享的通信缓冲区的最佳方法是什么，而不是每个类都具有这种结构，而是将其仅传递一个指向缓冲区的指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:28:22.603

像这样的东西，如果它是线程的，则使用互斥锁来控制访问。

```
class Listener {
    static char commBuffer[BUFFER_SIZE];
    static boost::mutex mutex;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:48:16.663

最*简单*的方法是声明`commBuffer[BUFFER_SIZE];`全局。我不太确定`best`路。但如果`best`在你的情况下意味着`easiest`我会坚持全球声明。如果您真的想保持纯粹的面向对象，请将其`char commBuffer[BUFFER_SIZE]`放入一个`Singleton`类中并向其中读取/写入数据。

# ios - ios - 我有一个 2 按钮 UIAlertView，我怎么知道按下了哪个按钮？

> ID：13611164
> 
> 赞同：0
> 
> 时间：2012-11-28T17:40:39.387
> 
> 标签：ios, ios5, uialertview

我有这个 2 按钮警报视图：

```
UIAlertView* message = [[UIAlertView alloc]
                           initWithTitle: @"Delete?" message: @"This business will be deleted permenently." delegate: nil
                           cancelButtonTitle: @"Cancel" otherButtonTitles: @"Delete", nil];

[message show]; 
```

我也有这个方法：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];
    if([title isEqualToString:@"Delete"])
    {
        NSLog(@"Button DELETE was selected.");
    }
    else if([title isEqualToString:@"Cancel"])
    {
        NSLog(@"Button CANCEL was selected.");
    }
} 
```

我将其添加到 .h 文件中：

```
<UIAlertViewDelegate> 
```

现在，当按下任一按钮时，它只会关闭对话框。可以取消，但我怎么知道何时按下删除按钮？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T17:42:36.460

您必须实现`– alertView:clickedButtonAtIndex:`UIAlertViewDelegate 的方法。您还必须在初始化警报视图时设置委托。

例如

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {

   if (buttonIndex == 0) {
        //Do something
   } else if (buttonIndex == 1) {
       //Do something else
   }
} 
```

取消按钮的索引为 0。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T17:57:47.197

创建警报视图时，您将传递`nil`给参数。`delegate`你需要通过`self`。正如您现在所拥有的，该`clickedButtonAtIndex:`方法永远不会被调用。

```
UIAlertView* message = [[UIAlertView alloc]
    initWithTitle: @"Delete?" 
    message: @"This business will be deleted permenently." 
    delegate: self
    cancelButtonTitle: @"Cancel" 
    otherButtonTitles: @"Delete", nil];

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
    if (buttonIndex == alertView.cancelButtonIndex) {
        // Cancel was tapped
    } else if (buttonIndex == alertView.firstOtherButtonIndex) {
        // The other button was tapped
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T17:46:04.280

```
message.delegate = self;
...

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
     NSLog(@"Button %d was clicked", buttonIndex);
} 
```

并且必须声明该类以满足`UIAlertViewDelegate`协议。

# maven - 如何使 maven 模块的生成传递取决于另一个的编译

> ID：13611168
> 
> 赞同：0
> 
> 时间：2012-11-28T17:40:53.767
> 
> 标签：maven, dependencies, code-generation

我有一个当前包含代码生成器的 java 模块。我计划将生成器拆分为一个单独的模块。即使我只是运行“mvn generate-sources”，如何使依赖模块使用编译/测试生成器的结果？我必须将生成器制作成插件吗？我必须将生成器安装到 .m2/repository 中吗？我是否必须改变它的版本号才能强制依赖模块重新生成它的代码？它如何知道重新生成生成的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:00:59.670

不确定我是否完全关注你。如果您为原始模块构建（生成源），现在将生成器作为子模块，您将获得原始模块和子模块（生成器）的整体成功/失败。

如果您还想*在 generate-sources*阶段对生成的模块运行测试，则必须将 surefire 插件绑定到代码生成器的 pom 文件中的 generate-sources 阶段。

# javascript - “window.location.replace”究竟做了什么/如何在机械化中复制它？

> ID：13611169
> 
> 赞同：0
> 
> 时间：2012-11-28T17:40:59.513
> 
> 标签：javascript, forms, http, post, mechanize

我正在与一个使用客户端 JavaScript 实现延迟页面加载的站点进行交互。基本上，表单是在 上提交的`PageA.asp`，而不是数据转到`PageB.asp`，而是转到`PageC.asp`。`PageC.asp`由“请稍候”消息和以下 JavaScript 组成：

```
function OnTimer() {
    window.location.replace("PageB.asp");
    return;
}
setTimeout('OnTimer()', 10000); 
```

这里有趣的是，当`PageB.asp`加载时，它以某种方式拥有从`PageA.asp`. 然而，每当我查询您是否可以将 POST 数据与 一起传递时`window.location.replace`，答案都是“不”。

那么即使是从 加载`PageB.asp`的数据又是如何得到的呢？是否使用相同的 POST 数据加载新页面？我将如何最好地在 mechanize 中重新实现这一点：记住 POST 数据并提交表单，动作是而不是？`PageA.asp``PageC.asp``window.location.replace``PageA.asp``PageB.asp``PageC.asp`

# html - 如何阻止一层越过另一层

> ID：13611185
> 
> 赞同：-3
> 
> 时间：2012-11-28T17:41:47.040
> 
> 标签：html, css

我有一个图层问题，该图层 content-3f 显示在它下面的所有其他图层上：

```
<div id="content-3f">
            <div id="content-3-1f"><a href="aboutus.aspx"></a></div>
            <div id="content-3-2f"><a href="experiences.aspx"></a></div>
            <div id="content-3-3f"></div>
        </div>

        <div class="line"><hr class="top" /></div> 
```

CSS：

```
 #content-3f {
        float: left;
        width: 880px;
        height: auto;
        padding: 10px 0px 10px 26px;
        height: 103px;
        clear:both;
    }

    #content-3-1f 
    {
        float: left;
        width: 269px;
        height: 202px;
        margin:0px 20px 0px 0px;
        padding: 0px;
        background: url('../images/Guided-tour-logo.png') no-repeat left top;
    }

    #content-3-1f a
    {
        width: 269px;
        height: 202px;
        display:block;
    }

    #content-3-2f 
    {
        float: left;
        width: 269px;
        height: 202px;
        margin:0px 20px 0px 0px;
        padding: 0px;
        background: url('../images/Taste-chinatown-logo.png') no-repeat left top;
    }

    #content-3-2f a
    {
        width: 269px;
        height: 202px;
        display:block;
    }

#content-3-3f 
{
    float: left;
    width: 269px;
    height: 202px;
    margin:0px 0px 0px 0px;
    padding: 0px;
    background: url('../images/Taste-chinatown-logo.png') no-repeat left top;
} 
```

截屏：

![在此处输入图像描述](../Images/6c5d6e94a012c43d48445909637925ff.png)

如您所见，它越过了`<hr>`

怎么修？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:01:36.563

问题是由于您的#content-3f 上的“float:left”。需要清除浮动才能使其正常工作。这是您的解决方案::

HTML

```
 <div id="content-3f">
        <div id="content-3-1f"><a href="aboutus.aspx"></a></div>
        <div id="content-3-2f"><a href="experiences.aspx"></a></div>
        <div id="content-3-3f"></div>
    </div>
    <div class="clear"></div>

      <div class="line"><hr class="top" /></div>  ​ 
```

请注意带有“clear”类的附加 div，它用于清除元素中的浮动。

现在的 CSS

```
#content-3f {
width: 880px;
height: auto;
padding: 10px 0px 10px 26px;
height: 103px;
}
.clear {
clear:both;
} 
```

css 的其余部分保持不变。希望这可以帮助。

是的，我同意gapple。我想我没有正确研究你的CSS。它是造成问题的“高度：103px”。删除它，它就可以正常工作。

但我想指出，尽管如此，清除浮动总是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:57:57.510

将以下内容添加到您的 CSS 中应该可以得到您正在寻找的答案。

```
#content-3-1f, 
#content-3-2f, 
#content-3-3f {
    position:relative;
    z-index: 1;
} 
```

基本上`z-index`告诉事情要住在哪个“层”上。默认层是`z-index: 0;`

您还需要指定相对或绝对位置以使其生效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T18:06:18.763

更优雅的解决方案是使用`display:inline-block`而不是`float:left`在您的盒子上。

[http://www.vanseodesign.com/css/inline-blocks/](http://www.vanseodesign.com/css/inline-blocks/)

# python - Vim neocomplcache：禁用使用提示

> ID：13611198
> 
> 赞同：2
> 
> 时间：2012-11-28T17:42:23.983
> 
> 标签：python, vim, vim-plugin, neocomplcache

我正在使用带有 neocomplcache 插件的 Vim，它在完成时提示使用的功能让我非常困惑。

它的行为是这样的：我`<C-X><C-U>`在光标位于末尾时键入`os.path.`，然后不仅完成候选列在行下，而且包含第一个候选的文档字符串的水平拆分出现在顶部。我的问题是：如何摆脱这个功能，以便我只在没有使用提示的情况下完成代码？

![在此处输入图像描述](../Images/50f0841cd8fd2afd324b03864f772b19.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T18:39:08.133

这都是因为`preview`默认`completeopt`情况下，你可以通过 type 命令看到它的值，`:set completeopt`结果应该是`completeopt=menu,preview`.

我们需要的只是`menu`，所以剪掉`preview`，在你的 vimrc 中添加这一行：

```
set completeopt-=preview 
```

vim 帮助参考：

```
 *'completeopt'* *'cot'*
'completeopt' 'cot' string  (default: "menu,preview")
            global
            {not available when compiled without the
            |+insert_expand| feature}
            {not in Vi}
    A comma separated list of options for Insert mode completion
    |ins-completion|.  The supported values are:

       menu     Use a popup menu to show the possible completions.  The
            menu is only shown when there is more than one match and
            sufficient colors are available.  |ins-completion-menu|

       menuone  Use the popup menu also when there is only one match.
            Useful when there is additional information about the
            match, e.g., what file it comes from.

       longest  Only insert the longest common text of the matches.  If
            the menu is displayed you can use CTRL-L to add more
            characters.  Whether case is ignored depends on the kind
            of completion.  For buffer text the 'ignorecase' option is
            used.

       preview  Show extra information about the currently selected
            completion in the preview window.  Only works in
            combination with "menu" or "menuone". 
```

# c# - 从列表写入文本文件 C#

> ID：13611202
> 
> 赞同：0
> 
> 时间：2012-11-28T17:42:45.523
> 
> 标签：c#, winforms

如何将整个列表编码到文本文件中，并在每个数据位之间使用逗号？目前它正在创建文件 newData，但它没有放入列表中的变量。这是我到目前为止所拥有的。

```
public partial class Form1 : Form {
  List<string> newData = new List<string>();
} 
```

以上是我创建列表的地方。下面是我阅读它的地方。

```
private void saveToolStripMenuItem_Click(object sender, EventArgs e) {
  TextWriter tw = new StreamWriter("NewData.txt");
  tw.WriteLine(newData);
  buttonSave.Enabled = true;
  textBoxLatitude.Enabled = false;
  textBoxLongtitude.Enabled = false;
  textBoxElevation.Enabled = false;
} 
```

下面是变量的来源。

```
private void buttonSave_Click(object sender, EventArgs e) {
  newData.Add (textBoxLatitude.Text);
  newData.Add (textBoxLongtitude.Text);
  newData.Add (textBoxElevation.Text);
  textBoxLatitude.Text = null;
  textBoxLongtitude.Text = null;
  textBoxElevation.Text = null;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T17:46:01.967

```
 private void saveToolStripMenuItem_Click(object sender, EventArgs e)
    {

        TextWriter tw = new StreamWriter("NewData.txt");                       
        tw.WriteLine(String.Join(", ", newData));

        // Add appropriate error detection
    } 
```

为了回应两个主要答案线程中的讨论，这是我的旧代码中处理 CSV 输出的更强大方法的示例：

上面没有检查语法，但关键概念是`String.Join`.

```
 public const string Quote = "\"";

 public static void EmitCsvLine(TextWriter report, IList<string> values)
    {
        List<string> csv = new List<string>(values.Count);

        for (var z = 0; z < values.Count; z += 1)
        {
            csv.Add(Quote + values[z].Replace(Quote, Quote + Quote) + Quote);
        }

        string line = String.Join(",", csv);

        report.WriteLine(line);
    } 
```

这可以稍微更通用一点，`IEnumerable<object>`但在我采用这种形式的代码中，我不需要这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T17:53:34.067

虽然您可以`String.Join`像其他人提到的那样使用它们，但他们忽略了三件重要的事情：

*   事实上，你真正想做的是写一个[逗号分隔的值](http://en.wikipedia.org/wiki/Comma-separated_values)文件
*   您收到的输入以及其中是否包含逗号
*   如果你清理你的输入，当你把它写到文件中时，线程上的当前文化是什么

你想写一个逗号分隔的文件。对此没有标准化格式，但您必须小心字符串内容，尤其是在*您*获取用户输入的情况下。考虑以下输入：

```
latitude = "39,41"
longitude = "41,20" 
```

有[许多国家/地区使用逗号作为小数分隔符](http://en.wikipedia.org/wiki/Decimal_mark#Countries_using_Arabic_numerals_with_decimal_comma)，因此这种输入非常有可能，具体取决于您的应用程序的分布情况（如果这是一个网站，我个人会更加担心）。

在获得海拔高度时，在大多数其他使用逗号作为千位分隔符的地方绝对有可能：

```
elevation = 20,000 
```

在所有其他答案中，文件中该行的输出将是：

```
39,41,41,20,20,000 
```

解析时（假设它将被解析，您正在创建机器可读格式）将失败。

您要做的是首先将内容*解析*为十进制然后输出。

假设您像这样清理您的输入：

```
decimal latitude = Decimal.Parse(textBoxLatitude.Text);
decimal longitude = Decimal.Parse(textBoxLongitude.Text);
decimal elevation = Decimal.Parse(textBoxElevation.Text); 
```

然后，您将格式化这些值，以便没有逗号（如果需要）。

为此，我真的建议您使用专用的 CSV 编写器/解析器（如果您愿意，可以尝试[在 NuGet](http://nuget.org/packages/ServiceStack.Text)或[其他](http://nuget.org/packages?q=csv)上使用 ServiceStack 的序列化程序），它会在您希望用逗号分隔的内容中解释逗号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T17:46:56.517

```
You cannot output the list just by calling tw.WriteLine(newData); 
```

但是这样的事情将实现：

```
tw.WriteLine(string.Join(", ", newData)); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-28T17:49:10.700

你可以：

```
StringBuilder b = new StringBuilder();
foreach (string s in yourList)
{
    b.Append(s);
            b.Append(", ");
}

string dir = "c:\mypath";
File.WriteAllText(dir, b.ToString()); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-28T17:49:58.017

您必须按照其他用户的建议迭代列表（未测试）或使用 string.Join（然后您需要将列表转换为数组）

```
private void saveToolStripMenuItem_Click(object sender, EventArgs e)
    {
        TextWriter tw = new StreamWriter("NewData.txt");
        for (int i = 0; i < newData.Count; i++) 
        {                   
           tw.Write(newData[i]);
           if(i < newData.Count-1)
           { 
              tw.Write(",");
           }
        }
        tw.close();
        buttonSave.Enabled = true;
        textBoxLatitude.Enabled = false;
        textBoxLongtitude.Enabled = false;
        textBoxElevation.Enabled = false;

    } 
```

# jquery - jQuery.html() 方法在 IE7 和 IE8 上无法正常工作

> ID：13611205
> 
> 赞同：3
> 
> 时间：2012-11-28T17:42:57.180
> 
> 标签：jquery, html, internet-explorer

我一直在使用 jQuery，但最近在使用 jQuery 的**.html()**方法时遇到了 IE7 和 IE8 的问题。如果我收到来自 AJAX 调用的 XML 响应，并尝试获取该响应的特定片段的 innerHTML，我得到一个未定义的。

现在这可以在 Firefox、Chrome 和 IE 9 上完美运行。

请看下面的片段：

```
 var data = 
     "<reponse_data>" + 
     "  <chart_data>" + 
     "      <chart caption='' yAxisName='Unidades' alternateVGridColor='AFD8F8' toolTipBorderColor='114B78' toolTipBgColor='E7EFF6' plotBorderDashed='0' plotBorderDashLen='2' plotBorderDashGap='2'  useRoundEdges='1' showBorder='1' bgColor='FFFFFF,FFFFFF' formatNumberScale='0' paletteColors='B9E1FF,FEC618,94C20A,CD7239,0A9797'>" + 
     "          <set label='Inventario' value='1203' />" + 
     "          <set label='Recibidas' value='3423' />" + 
     "          <set label='Subastadas' value='3661' />" + 
     "          <set label='Entregadas' value='3648'  />" + 
     "          <set label='Balance' value='978'  />" + 
     "      </chart>" + 
     "  </chart_data>" + 
     "  <misc>" + 
     "      <initialInvCell>1,203</initialInvCell>" + 
     "      <receivedUnitsCell>3,423</receivedUnitsCell>" + 
     "      <auctionedUnitsCell>3,661</auctionedUnitsCell>" + 
     "      <deliveredUnitsCell>3,648</deliveredUnitsCell>" + 
     "      <finalInventoryCell>978</finalInventoryCell>" + 
     "  </misc>" + 
     "</reponse_data>";

 console.log('ChartData: ' + $(data).find('chart_data').html()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T17:50:15.800

`$(data)`还不是 HTML。它是一个字符串，因此它没有任何 jQuery 使用的与之关联的 DOM。在尝试将其与 jQuery 一起使用之前，您需要将其转储到 DOM 中。

由于您从某个地方将其作为字符串获取，因此最好的办法（性能和内存方面）可能是解析字符串并获取您想要的值。您可以使用正则表达式，也可以查找左括号和右括号的索引并获取两者之间的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:55:43.533

**编辑：**我已经更新了我的答案。请参阅此[jsfiddle](http://jsfiddle.net/xrqS7/1/)以查看它的工作...

注意这是使用 jquery 1.8.2

html:

```
<div id="maincontent">
    hello world
</div>​ 
```

js：

```
var data = 
 "<reponse_data>" + 
 "  <chart_data>" + 
 "      <chart caption='' yAxisName='Unidades' alternateVGridColor='AFD8F8' toolTipBorderColor='114B78' toolTipBgColor='E7EFF6' plotBorderDashed='0' plotBorderDashLen='2' plotBorderDashGap='2'  useRoundEdges='1' showBorder='1' bgColor='FFFFFF,FFFFFF' formatNumberScale='0' paletteColors='B9E1FF,FEC618,94C20A,CD7239,0A9797'>" + 
 "          <set label='Inventario' value='1203' />" + 
 "          <set label='Recibidas' value='3423' />" + 
 "          <set label='Subastadas' value='3661' />" + 
 "          <set label='Entregadas' value='3648'  />" + 
 "          <set label='Balance' value='978'  />" + 
 "      </chart>" + 
 "  </chart_data>" + 
 "  <misc>" + 
 "      <initialInvCell>1,203</initialInvCell>" + 
 "      <receivedUnitsCell>3,423</receivedUnitsCell>" + 
 "      <auctionedUnitsCell>3,661</auctionedUnitsCell>" + 
 "      <deliveredUnitsCell>3,648</deliveredUnitsCell>" + 
 "      <finalInventoryCell>978</finalInventoryCell>" + 
 "  </misc>" + 
"</reponse_data>";

var a = $("<div/>",{
    html: data,
    id: "darth",
    style: "display:none;"
}).appendTo($("#maincontent"));

var b = a.find("chart_data").html();

alert(b); 
```

老答案：

我认为这不会起作用，因为那时它并不是真正的 html。它是一串文本，直到它被注入到dom中......

如果您想使用 .html() 之类的方法，我建议先将其转储到 dom 中。

就像是...

```
var data = "data" + "more data..." + "more data"...

var a = $("<div/>",{html: data, display: "none"}).appendTo($("body")); 
```

然后...

```
var b = a.find("chart_data").html(); 
```

它不是很漂亮，但它应该可以工作......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T20:25:25.357

嗨@teewuane 和@joshua，

谢谢你的帮助。通过执行以下操作，我能够成功实现我的目标：

[http://jsfiddle.net/CcWfj/3/](http://jsfiddle.net/CcWfj/3/)

```
<head>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script type="text/javascript">
       function ieParse () {
            //var xmlText = "<root><fruit color='red'></fruit></root>";
            var xmlText = "<reponse_data>" + 
                          "   <chart_data>" + 
                          "       <chart caption='' yAxisName='Unidades' alternateVGridColor='AFD8F8' toolTipBorderColor='114B78'     toolTipBgColor='E7EFF6' plotBorderDashed='0' plotBorderDashLen='2' plotBorderDashGap='2'  useRoundEdges='1' showBorder='1'     bgColor='FFFFFF,FFFFFF' formatNumberScale='0' paletteColors='B9E1FF,FEC618,94C20A,CD7239,0A9797'>" + 
                          "           <set label='Inventario' value='1203' />" + 
                          "           <set label='Recibidas' value='3423' />" + 
                          "           <set label='Subastadas' value='3661' />" + 
                          "           <set label='Entregadas' value='3648'  />" + 
                          "           <set label='Balance' value='978'  />" + 
                          "       </chart>" + 
                          "   </chart_data>" + 
                          "   <misc>" + 
                          "       <initialInvCell>1,203</initialInvCell>" + 
                          "       <receivedUnitsCell>3,423</receivedUnitsCell>" + 
                          "       <auctionedUnitsCell>3,661</auctionedUnitsCell>" + 
                          "       <deliveredUnitsCell>3,648</deliveredUnitsCell>" + 
                          "       <finalInventoryCell>978</finalInventoryCell>" + 
                          "   </misc>" + 
                          "</reponse_data>";

            var xmlDocument = XMLFromString(xmlText);
            var chartData = XMLToString(xmlDocument.childNodes[0].childNodes[0].childNodes[0]);
            var elementsData = XMLToString(xmlDocument.childNodes[0].childNodes[1]);

            alert(chartData);
            alert(elementsData);

        }

        function XMLToString(oXML) {
          if (window.ActiveXObject) {
            return oXML.xml;
          } else {
            return (new XMLSerializer()).serializeToString(oXML);
          }
        }

        function XMLFromString(sXML) {
          if (window.ActiveXObject) {
            var oXML = new ActiveXObject("Microsoft.XMLDOM");
            oXML.loadXML(sXML);
            return oXML;
          } else {
            return (new DOMParser()).parseFromString(sXML, "text/xml");
          }
        }

    </script>
</head>
<body>
    <button onclick="ieParse ()">IE Parse</button>
</body> 
```

因此，对于 IE7 和 IE8，我基本上不得不放弃使用 jQuery 的 .find() 和 .html() 函数。

约书亚，我会把你的意见变成建议。

我使用了以下参考：http: [//joncom.be/code/javascript-xml-conversion/](http://joncom.be/code/javascript-xml-conversion/)

再次感谢，

# c# - 转换 Objects.ObjectResult 反对

> ID：13611206
> 
> 赞同：1
> 
> 时间：2012-11-28T17:42:57.567
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework

我在 asp.net MVC 中有一个存储库

我调用存储过程来获取对象的存储库，但是我得到了`Objects.ObjecResult<result>`并且我不知道如何将它变成生产者对象

```
 Entities enteties = new Entities();
 Product contact = (Product)enteties.uspGetProduct(productId); 
```

我收到以下错误无法将类型“System.Data.Objects.ObjectResult”转换为“Models.Product”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-02-25T21:11:13.177

我会这样做的方式是：

如果您的存储过程返回一个 Product 类型的元素

```
Entities enteties = new Entities();
var data = enteties.uspGetProduct(productId).GetEnumerator();
if(data.MoveNext())
    Product contact = enteties.uspGetProduct(productId).GetEnumerator().Current; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-27T15:38:23.280

在实体框架中使用存储过程时，它会返回`ObjecResult<result>`，因此您需要将其转换为所需的类型。您可以使用 Select 运算符进行转换，如下所示：

```
return query.Select(x=> new Product {
// Assign properties here 
Id = x.Id
}).ToList() 
```

# ruby - Ruby - 不会将文件加载到数组中

> ID：13611211
> 
> 赞同：0
> 
> 时间：2012-11-28T17:43:09.923
> 
> 标签：ruby, arrays

我对 ruby​​ 有疑问，它不会将我拥有的文件加载到指定的数组中。

```
class Dancer
  def Initialize (couplenumber, score1, score2, score3, score4, score5, score6, score7)
    @couplenumber = couplenumber
    @score1 = score1
    @score2 = score2
    @score3 = score3
    @score4 = score4
    @score5 = score5
    @score6 = score6
    @score7 = score7
  end

  def show()
    return "Couple Number: #{@couplenumber}. Scores: #{@score1}, #{@score2}, #{@score3}, #{@score4}, #{@score5}, #{@score6}, #{@score7}."
  end
end

results = File.open("danceresult.txt", "r+")
dancescores = []

# Splitting dance scores with "," and putting into arrays.
for dancers in results
  a = dancers.split(",")
  couplenumber = a[0]
  score1 = a[1]
  score2 = a[2]
  score3 = a[3]
  score4 = a[4]
  score5 = a[5]
  score6 = a[6]
  score7 = a[7]
  dancescores << Dancer.new
end

dancescores.each do |dance|
  puts dance.show
end 
```

我的问题是Ruby只通过了这个：

```
Couple Number: . Scores: , , , , , , .
Couple Number: . Scores: , , , , , , .
Couple Number: . Scores: , , , , , , .
Couple Number: . Scores: , , , , , , .
Couple Number: . Scores: , , , , , , .
Couple Number: . Scores: , , , , , , . 
```

我不太擅长编码，但仍在努力学习:-) 在此先感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T17:49:39.593

你错过了将论据传递给`Dancer`

我还建议将您的代码重构为如下所示：

```
class Dancer
  def initialize( couplenumber, *scores )
    @couplenumber, @scores = couplenumber, scores
  end

  def show
    return "Couple Number: #{@couplenumber}. Scores: #{@scores.join(', ')}"
  end
end

file = "danceresult.txt"
dancescores = File.readlines(file).map do |line|
  Dancer.new *line.split(",")
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T17:50:15.350

您的第一个问题是一个错字：该方法应该命名为`initialize`，而不是`Initialize`。

我还建议您查看[Ruby 的 CSV 库](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/index.html)，它可以更可靠地解析 CSV 数据（并且更惯用）。

我的最后一个建议是不要定义`show`，而是使用`to_s`. 然后你可以简单地`puts dance`和对象本身知道如何转换为字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T17:49:33.510

当你初始化你的 Dancer 对象时，你并没有传入一对数和分数。

线

`dancescores << Dancer.new`

应该

```
dancescores << Dancer.new(couplenumber, score1, score2, score3, score4, score5, score6, score7) 
```

请注意您存储的值是如何传递给 Dancer 的初始化的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T17:51:14.413

这里有几个问题：

1.  该方法被称为`initialize`，而不是`Initialize`- 大写很重要。

2.  你在不同的地方有一堆同名的变量，你似乎认为这些是同一个变量，但事实并非如此。例如，`score1`in your `initialize`method 与 line 中的不一样`score1 = a[1]`。以此类推`couplenumber`。

3.  由于前面的几点，您要插入到数组中的是一个空的 Dancer 对象，其实例变量均未设置为任何值。

这是代码的更正版本：

```
class Dancer
  def initialize(couplenumber, score1, score2, score3, score4, score5, score6, score7)
    @couplenumber = couplenumber
    @score1 = score1
    @score2 = score2
    @score3 = score3
    @score4 = score4
    @score5 = score5
    @score6 = score6
    @score7 = score7
  end

  def show()
    return "Couple Number: #{@couplenumber}. Scores: #{@score1}, #{@score2}, #{@score3}, #{@score4}, #{@score5}, #{@score6}, #{@score7}."
  end
end

results = File.open("danceresult.txt", "r+")

# Splitting dance scores with "," and putting into arrays.
# Note that we're using map, which handles collecting the results into an array for us

dancescores = results.map |dancers|
  a = dancers.split(",")
  Dancer.new(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7])

  # You could more simply write the previous line as
  # Dancer.new(*a[0..7]), but that's
  # essentially just syntactic sugar for the above
end 
```

# nhibernate - 使用 nhibernate hbm 映射继承的类

> ID：13611216
> 
> 赞同：1
> 
> 时间：2012-11-28T17:43:30.360
> 
> 标签：nhibernate, mapping, subclass, hbm

我有同一张桌子的两个班级。

一个类“Entity”包含来自表 ENTITY 和派生类的属性 x、y、z，“ExtendedEntity”包含更多属性（集合 - 与其他表的关系）。

我想映射它们，但我找不到不使用鉴别​​器来映射子类的方法（我不需要鉴别器，有时我想选择实体对象，有时是扩展实体）。有人知道吗？（我试图通过复制实体映射并添加新属性来映射扩展实体，但现在当我想要获取实体对象时，它给我带来了扩展实体）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T07:56:05.830

考虑到你问题的第一句话：

> 我有同一张桌子的两个班级。

这意味着只有一张表*("ENTITY")*。**如果这是真的，那么如果不存在鉴别**器，则不必，甚至不应该有任何继承。如果两个实体都与所有行相关，那么（而不是继承）我们需要惰性。只有一个`Entity`受益于原生 NHibernate 行为：具有惰性属性。更重要的是，为了优化一些查询 -可以使用*Projections 。*

但同样，只有当我正确理解您的场景时，我的建议才可能是正确的：**引入这两个实体只是为了减少工作量；但两者都针对一个表中的所有行**。

唯一类的映射

```
<class name="Entity" table="ENTITY" lazy="true">
<id name="ID" column="Entityd">
  <generator class="native"></generator>
</id>

<!-- standard default always loaded  properties --> 
<property name="Code" />
<property name="Name" />

<!-- only if accessed, lazily loaded properties --> 
<many-to-one  lazy="proxy" name="Currency" column="CurrencyId" cascade="none" />
<property     lazy="true"  name="Image" column="ImageBinary"  />
... 
```

有了这个映射，我们可以得到前 5 个实体

```
var list = session.CreateCriteria<Entity>()
 .SetMaxResults(5)
 .List<Entity>(); 
```

生成的 SQL 语句将是：

```
SELECT TOP 5  this_.EntityId as EntityId3_1_
, this_.Code as Code3_1_
, this_.Name as Name3_1_
FROM ENTITY this_ 
```

我们甚至可以通过预测来减少它

```
var propertyList = NHibernate.Criterion.Projections.ProjectionList();
// projection properties
propertyList.Add(NHibernate.Criterion.Projections.Property("ID"));
propertyList.Add(NHibernate.Criterion.Projections.Property("Code"));

var projected = session.CreateCriteria<Entity>()
.SetMaxResults(5)
.SetProjection(propertyList)
.SetResultTransformer(new NHibernate.Transform
                      .AliasToBeanResultTransformer(typeof(Entity)))
.List<Entity>(); 
```

在这种情况下，SQL Select 就更小了。如果`ID`and`Code`就足够了..

```
SELECT TOP 5 this_.Code as y0_
, this_.EntityId as y1_ 
FROM ENTITY this_ 
```

因此，如果我正确阅读了您的问题，在您的方案中，解决方案将不是继承，而是 NHibernate 本机懒惰

*注意：即使在这种情况下，也可能有从 Entity 派生的 ExtendedEntity。但不是用于通过 NHibernate 映射继承，而是用于 Projections Transformation。可以通过这种方式投影来自多对一属性的某些属性...*

# sql - SQL Server 存储过程自动重新编译？

> ID：13611222
> 
> 赞同：0
> 
> 时间：2012-11-28T17:43:45.390
> 
> 标签：sql, sql-server-2005, stored-procedures

如果我使用 Web 应用程序 Web Data Administrator 并编辑存储过程 SQL 查询，它会自行重新编译吗？（SQL Server 和数据库开发方面的新手）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:17:49.210

MSSQL Server 确实维护了[查询计划](https://en.wikipedia.org/wiki/Query_plan)的缓存，但这与编译后的代码不同。

SQL Server 管理这个缓存，如果它缓存了一个非最佳计划，它可能会成为一些痛苦的根源。虽然这在 15 年内发生在我身上不到 5 次（这似乎是特定服务器的问题），***但最好让 SQL Server 处理它而不是碰它***。

[您可以通过提供WITH RECOMPILE](http://www.techrepublic.com/article/understanding-sql-servers-with-recompile-option/5662581)选项来强制 SQLServer 重新编译。同样的警告也适用，***除非你有充分的理由，不要***。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:12:59.880

SQL 是一种脚本语言，这意味着您编写的代码不会被编译。相反，它存储在服务器上以供以后使用。

编辑存储过程时，可以执行 ALTER 脚本或 DROP then CREATE 脚本。这会将 Web 数据管理（或 SSMS）窗口中的文本发送到服务器，发出一个命令，告诉服务器将此新查询存储为一个过程以供以后使用。

所以，简而言之，是的，如果你执行一个 ALTER 脚本。

# php - 使用 PHP 进行安全 SSL/HTTPS API 调用

> ID：13611225
> 
> 赞同：0
> 
> 时间：2012-11-28T17:44:03.223
> 
> 标签：php, ssl, curl, https, protocols

参考上一个问题： [通过 HTTPS 而不是 HTTP 连接](https://stackoverflow.com/questions/13606509/connect-through-https-instead-of-http)

这是使用 进行安全 API 调用的好方法`HTTPS`吗？

```
public function demo(){
    $Username = 'username';
    $Password = 'xxxxxxxxx';
    $url = 'http://api.text-connect.co.uk/api/api.php?Username='.$Username.'&Password='.$Password.'&Action=checkcredits';

    $ch = curl_init($url);

    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST,  2);

    $result = curl_exec($ch);
    curl_close($ch);

    echo $result;
} 
```

我应该使用而`https`不是变量吗？`http``$url`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:51:17.250

除非您使用`https://...`URL，否则不会建立 HTTPS 安全连接。

`_SSL_`您设置的选项仅指定*建立 HTTPS 连接时*的行为。他们不会将 HTTP URL 转换为 HTTPS URL。

# visual-studio-2010 - 使用 OpenCV 从命令提示符运行 MSBuild

> ID：13611226
> 
> 赞同：0
> 
> 时间：2012-11-28T17:44:04.970
> 
> 标签：visual-studio-2010, opencv, build, msbuild, cmd

我想创建一个构建多个 Visual Studio 2010 项目的批处理文件。我的项目属性表设置为使用 opencv，并且从 Visual Studio 构建工作正常，但是当我从 cmd 运行 MSBuild 命令时，它找不到 OpenCV 头文件。我收到以下许多消息：

`c:\proj\libproj\cvtrack.cpp(26): fatal error C1083: Cannot open include file: 'cv.h': No such file or directory [C:\proj\libproj\libproj.vcxproj]`

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:06:59.673

我通过将以下参数添加到 MSBuild 命令 /p:Configuration=Release 来解决此问题，然后更改项目的 Release 属性。

# c# - Enumerable.Range(starts, count) 的奇怪行为

> ID：13611227
> 
> 赞同：0
> 
> 时间：2012-11-28T17:44:09.380
> 
> 标签：c#, .net, range, enumerable

看我的代码。为什么 Enumerable.Range() 无论起始值为 0 时的行为都不同。

```
class Program
{
    static void Main(string[] args)
    {
        var range1 = Enumerable.Range(0, 7);
        PrintRange(range1);
        var range2 = Enumerable.Range(1, 8);
        PrintRange(range2);
        Console.ReadKey(true);
    }

    private static void PrintRange(IEnumerable<int> myRange)
    {
        foreach (int i in myRange)
        {
            Console.WriteLine("Linha {0}\n", i);
        }
        Console.WriteLine("\n========================================\n");
    }
} 
```

范围本身是相同的。但是，当它从 1 开始时，我得到一个更大的。:(这是结果：

林哈 0

林哈 1

林哈 2

林哈 3

林哈 4

林哈 5

林哈 6

=========================================

林哈 1

林哈 2

林哈 3

林哈 4

林哈 5

林哈 6

林哈 7

林哈 8

=========================================

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T17:45:36.057

第二个论点`count`不是`end`。

您的第一个电话相当于*我想要 7 个以 0 开头的连续整数，*而第二个电话是*我想要 8 个以 1 开头的连续整数。*

[MSDN Enumerable.Range](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.range.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T17:46:00.050

```
public static IEnumerable<int> Range(
    int start,
    int count
) 
```

第二个参数 ( `count`) 表示：要生成多少个值。它不像开始值和结束值，而是开始数和值数，所以：

```
// generate 7 integers starting from 0
Enumerable.Range(0, 7)
// generate 8 integers starting from 1
Enumerable.Range(1, 8) 
```

# c# - COM 包装器：它们是托管资源还是非托管资源？

> ID：13611229
> 
> 赞同：0
> 
> 时间：2012-11-28T17:44:16.633
> 
> 标签：c#

我有一个带有 VB 6.0 或 VC 6.0 的文本编辑器控件，现在我们在参考中有一个 AxInterop，我已经把它放在一个 .NET 自定义控件中并一直在使用它。所以现在我想知道这是否被视为 Maanged 资源或非托管资源？问这个问题的原因是我正在运行一个内存分析器工具并查看它的图表，我看到分配给非托管资源的 60MB 内存..所以想知道这是否是罪魁祸首？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:48:17.317

COM 包装器是“运行时可调用包装器”并且是托管资源。分配给“非托管资源”的 60MB 内存不是包装器本身，但很可能是底层 COM 对象的结果，其生命周期通常与 RCW 的生命周期相关联。

请参阅[MSDN 上的运行时可调用包装器](http://msdn.microsoft.com/en-us/library/8bwh56xe.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:32:22.363

**长话短说**：任何包装器都是托管资源和 COM 包装器。本身没有长篇大论。

.NET 中托管资源和非托管资源之间存在简单的分离。非托管资源是 CLR 不知道的，例如`IntPtr`从非托管世界获得的原始句柄和其他低级“句柄”。

```
// handle is a native resource
IntPtr handle = ObtainResourceFromNativeWorld();

// ... using handle

// Releasing resource
ReleaseResourceToNativeWorld(handler); 
```

但是当你将它包装`IntPtr`到实现`IDisposable`接口的类中时`Finalizer`，这个类本身就是一个托管资源。

```
// NativeWrapper is a managed resource
class NativeWrapper : IDispoable
{
  // _handle is a native resource
  private readonly IntPtr _handle;

  public NativeWrapper()
  {
    _handle = ObtainResourceFromNativeWorld();
  }

  public void Dispose()
  {
    Dispose(true);
  }

  ~NativeWraper()
  {
    Dispose(false);
  }

  private void Dispose(bool disposing)
  {
    // because we're dealing with native resources
    // we should release them from both: Dispose method and Finalizer
    ReleaseResourceToNativeWorld(_handle);
  }
} 
```

结论：原始句柄是本机资源，但将本机资源包装在类中的类是托管资源。（严格来说，托管资源是一个包装原生或托管资源的类。也就是说，任何包含我们包装器的类也都是托管资源）。

# c# - 包含组合框窗口窗体的 Comboboxitems

> ID：13611233
> 
> 赞同：2
> 
> 时间：2012-11-28T17:44:40.820
> 
> 标签：c#, winforms, combobox

我正在创建一个 Windows 窗体应用程序，我需要一个包含项目的组合框，每个组合框都会打开另一个组合框，用户可以专门选择。

一个例子：我的组合框中有 2 个项目。丹麦语单词 英语单词

当用户选择英文单词时，它会打开另一个组合框，用户可以在其中选择一个英文单词。

如何创建这种组合框？

**编辑：它不必组合框，只需达到相同结果的东西

问题的图像：![组合框问题](../Images/0009193a43be90fd0fbec9ee81816c3c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:27:16.077

试试这段代码：我创建了两个组合框，一个名为 language_CmbBx，一个名为 words_CmbBx。我设置`words_CmbBx.Visible = false;`

```
 private void language_CmbBx_SelectedIndexChanged(object sender, EventArgs e)
        {
            this.Cursor = new Cursor(Cursor.Current.Handle);
            words_CmbBx.Location = new Point(language_CmbBx.Location.X + language_CmbBx.Width, GetLocalMousePos().Y);
            words_CmbBx.Visible = true;

        } 
```

此方法是获取您的鼠标位置或您想要的 selectedItem 的位置：

```
 public Point GetLocalMousePos()
    {
        Point screenPos = Cursor.Position;
        return this.PointToClient(screenPos);
    } 
```

唯一的问题是 ComboBox 不会保持打开状态，我还没有找到让它保持打开状态的方法。

正如我已经提到的，使用 ComboBoxes 很难实现你想要的，尝试使用 ListBox 代替：

```
 private void languages_LstBx_SelectedIndexChanged(object sender, EventArgs e)
    {
        this.Cursor = new Cursor(Cursor.Current.Handle);
        words_LstBx.Location = new Point(language_LstBx.Location.X + language_LstBx.Width, GetLocalMousePos().Y);
        words_LstBx.Visible = true;
    } 
```

相同的代码，更好的结果！

你可以在这里下载我的 VS2010 项目：[http ://www.abouchleih.de/projects/twocomboboxes.zip](http://www.abouchleih.de/projects/twocomboboxes.zip)

# mysql - MySQL TIMESTAMP 的约束

> ID：13611235
> 
> 赞同：2
> 
> 时间：2012-11-28T17:44:51.500
> 
> 标签：mysql, timestamp, constraints

mysql中是否可以有一个必须来自系统的时间戳约束，并且不能在插入或更新查询中提供？

是否可以使用约束来防止表被更新？我了解如何防止 mysql 用户使用 GRANT 更新表，但在我的情况下，可能首选约束，因为我的目标是保证记录的时间戳，而不管用户包括 root。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:47:37.147

试试这个： MYSQL 有一个约束，表中的单个字段具有默认的 CURRENT_TIMESTAMP 对于插入查询，这将起作用

```
Create table foo
(

logged_date  TIMESTAMP DEFAULT CURRENT_TIMESTAMP
); 
```

但是对于更新，您需要通过`triggers`或在您的应用程序代码中以不同的方式处理它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:53:09.870

您可以做的是覆盖`INSERT`并`UPDATE`使用[触发器的值](http://dev.mysql.com/doc/refman/5.5/en/create-trigger.html)

因此，无论查询设置什么，您所需的时间戳字段的值将始终是系统时间。

```
DELIMITER ;;

CREATE TRIGGER before_yourtable_insert 
BEFORE INSERT ON yourtable
FOR EACH ROW
BEGIN
    SET NEW.datefield := CURRENT_TIMESTAMP;
END;;

CREATE TRIGGER before_yourtable_update 
BEFORE UPDATE ON yourtable
FOR EACH ROW
BEGIN
    SET NEW.datefield := CURRENT_TIMESTAMP;
END;;

DELIMITER ; 
```

**编辑 1：** 刚刚意识到您实际上想要防止曾经设置的系统时间可以在以后更新。稍微修改您的 UPDATE 触发器以完成此工作。

`SET NEW.datefield := OLD.datefield`每次更新时将值重置为旧值

```
CREATE TRIGGER before_yourtable_update 
BEFORE UPDATE ON yourtable
FOR EACH ROW
BEGIN
    SET NEW.datefield := OLD.datefield;
END;; 
```

# javascript - 使用 easyXDM 调整 IFrame 大小

> ID：13611237
> 
> 赞同：2
> 
> 时间：2012-11-28T17:44:53.903
> 
> 标签：javascript, iframe, easyxdm

我将 iFrame 代码提供给客户，以便他们可以显示来自我网站的动态内容。我希望他们页面上的 iFrame 可以调整大小以适合我的内容。我按照easyXDM网站的说明进行操作，但也许我遗漏了一些东西。

我没有收到任何错误，但 iFrame 保持默认高度（150 像素）。我给我的客户网站的代码是：

```
<script src="http://test.pronetis.net/SNM.CMS/js/easyXDM/easyXDM.debug.js" type="text/javascript"></script>
<script type="text/javascript">
  var transport = new easyXDM.Socket({
    remote: "http://www.lipsum.com/",
    container: "container",
    onMessage: function (message, origin) {
      this.container.getElementsByTagName("iframe")[0].style.height = message + "px";
    }
  });
</script>
<div id="container"></div> 
```

这是我要嵌入的文档中的代码：

```
<script src="http://test.pronetis.net/SNM.CMS/js/easyXDM/easyXDM.debug.js" type="text/javascript"></script>
<script type="text/javascript">
  var socket = new easyXDM.Socket({
    onReady: function () { socket.postMessage(document.body.scrollHeight) }
  });
</script> 
```

我希望有一些简单的事情我做错了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-08T03:58:21.953

这很晚，但您还没有添加任何备份传输方法。将**name.html**文件和**easyxdm.swf**文件放在你网站的根目录下，然后使用下面的修改代码

**客户网站**

添加**remoteHelper**属性以指向您的**name.html**，并添加**swf**属性以指向您的**easyxdm.swf**文件。

```
<div id="container"></div>
<script src="http://test.pronetis.net/SNM.CMS/js/easyXDM/easyXDM.debug.js" type="text/javascript"></script>
<script type="text/javascript">
  var transport = new easyXDM.Socket({
    remote: "http://www.lipsum.com/",
    remoteHelper: "http://www.lipsum.com/name.html",
    swf: "http://www.lipsum.com/easyxdm.swf",
    container: "container",
    onMessage: function (message, origin) {
      this.container.getElementsByTagName("iframe")[0].style.height = message + "px";
    }
  });
</script> 
```

**你的网页**

添加属性**local**以指向根目录中的 name.html。

```
<script type="text/javascript">
    var socket = new easyXDM.Socket({
        local: "name.html",
        onReady: function () {
            socket.postMessage(document.body.scrollHeight);
        }
    });
</script> 
```

您还应该确保您网站上的代码段位于页面所有内容的下方，因此最好将其放在`</body>`标签之前。

您可以从[这里](https://github.com/oyvindkinsey/easyXDM/releases/download/2.4.18/easyXDM-2.4.18.25.zip)下载包含**name.html**和**easyxdm.swf**的 easyxdm 最新版本。

# java - 带有字符串Java的双链表

> ID：13611239
> 
> 赞同：2
> 
> 时间：2012-11-28T17:45:21.533
> 
> 标签：java

我写了以下程序：

```
public class DLinkedList<T extends Comparable<T>> {

    private class DNode<T> {
        private DNode<T> prev, next;
        private T nodeValue;
        public DNode() {
            nodeValue = null;
            next = prev = this;
            }

        public DNode(T val) {
            nodeValue = val;
            next = prev = this;
            }
        }

    private DNode<T> header;

    private int size;

    public DLinkedList() {
        header = new DNode<T>();
        size = 0;
    }

    public Boolean empty() {
        return size == 0;
    }

    public int size() {
        return size;
    }

    public void addOrder(T val) {
        DNode<T> newNode = new DNode<T>(val);
        DNode<T> curr = header.next;
        int count = 0;

        while (curr != header &&
            curr.nodeValue.compareTo(newNode.nodeValue) < 0 ) {

            curr = curr.next;
            newNode.prev = curr;
            newNode.next = curr.next;
            newNode.next.prev = curr;
            count++;
        }

        if (count == 1) {
            newNode.prev = curr;
            newNode.next = curr.prev;
            curr.prev.next.next = newNode;

        } else {
            newNode.prev = curr.prev;
            newNode.next = curr;
            curr.prev.next = newNode;
            count++;
        }
    }

    public String toString() {
        String str = "";
        DNode<T> curr = header.next;
        while (curr != header) {
            str += curr.nodeValue + ", ";
            curr = curr.next;
        }
        if (str.length() > 0) {
            return str.substring(0, str.lastIndexOf(", "));
        } else {
            return str;
        }
    }

    public static void main(String[] args) {
            DLinkedList<String> d = new DLinkedList<String>();
            d.addOrder("t");
            d.addOrder("y");
            d.addOrder("e");
            d.addOrder("b");
            d.addOrder("p");
            System.out.println("List 1: t, y, e, b, p" + "\nList 1 added and sort : " +d);
    }
} 
```

我对如何解决我的问题感到困惑/迷失。我想创建一个包含字符串值的节点的双链表，当我将这些字符串值添加到列表中时，列表会通过插入排序的方式对其进行自动排序。

我从一个具有空值的节点调用标头开始。然后，当我使用该方法将字符串“t，y，e，b，p”添加到列表中时，`addOrder(T val)`一切似乎都有效。它将按“b、e、p、t、y”的排序顺序打印出来。

如果我决定最后不打印“p”而是执行“t，y，e，b，c”，则会出现问题，我得到的打印结果是“b，c”而不是“b，c，e” , t, y”。如果我在列表末尾添加“a”而不是“p”或“c”，则所有内容似乎都可以很好地打印“a、b、e、t、y”。所以它似乎适用于所有不是“c，d，e”的东西。似乎我需要编写一个方法来添加一个新节点，该新节点将在它们之间传递，我现在不知道该怎么做。

如果我决定添加字符串“t、y、e、v、p”，则会出现另一个问题。看起来这只是打印“e，p”。看起来它添加了“t，y，e，v”但是当“p”进来时，它删除了“t，y，v”并留下了“e，p”。

似乎我无法在“ft”之间添加任何内容，但在此之前或之后的任何内容都可以。我感觉它与我的索引“curr”有关，它可能与我的节点标头卡住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:26:57.523

我同意代码有点混乱，您应该从 while 循环中删除分配，但修复似乎很简单。

在循环之后的部分中，您需要在不进行计数检查的情况下切换分配：

```
newNode.prev = curr.prev;
newNode.next = curr;
curr.prev.next = newNode;
curr.prev = newNode; 
```

在插入“p”时使用“t, y, e, v, p”的示例中，当前光标位于字母“t”上。此时，您希望“p”指向“t”，而前一个是“t”，在本例中为“e”。

我还没有测试你的其他场景，但这看起来像你所缺少的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:10:09.453

您的某些代码似乎有些混乱。在找到插入点之前，您看起来像是一个循环，用于跳过列表，但它同时更改了新节点的指针和现有的指针。我只会`curr = curr.next`在那个循环中，并且在你找到插入位置之前对新节点的指针或现有列表不做任何更改，然后记住你总共需要更改四个指针：下一个和上一个新节点，其前任中的下一个指针，以及其后继中的前一个指针。

```
 while (curr != header &&
                    curr.nodeValue.compareTo(newNode.nodeValue) < 0 ) {

                    curr = curr.next;
                    newNode.prev = curr;
                    newNode.next = curr.next;
                    newNode.next.prev = curr;
                    count++;
            } 
```

[我有一个关于如何调试](http://www.patriciashanahan.com/debug/)的网页，您可能会觉得有帮助。

# git - 禁用 git pull 的密码提示，但不禁用 push

> ID：13611241
> 
> 赞同：2
> 
> 时间：2012-11-28T17:45:35.820
> 
> 标签：git, authentication, github, push, pull

运行时是否可以提示输入密码：

`git push -u origin master`

但不是在运行时：

`git pull origin master`

? 我希望我的开发人员能够使开发站点保持最新，而不允许他们将更改推送到源。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T18:52:45.397

你可以[在 GitHub 上 fork 你的 repo](https://stackoverflow.com/questions/7717671/how-do-i-merge-locally-a-master-and-a-fork-in-git/13469783#13469783)并将你的开发者添加为 fork 上的协作者，如果他们想为原始 GitHub repo 做出贡献，请询问他们拉取请求。

不过，他们仍然可以从该原始存储库中获取（只读访问不需要密码）。

![叉](../Images/4793c60a5ade38ed3db9c64630c71857.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T20:40:41.413

如果您的存储库托管在封闭网络中，您可以设置匿名 git-daemon 或 HTTP 访问它以及您当前使用的任何机制。然后，将`fetch url`远程设置为指向未经过身份验证的服务，而远程的主（推送）URL 仍然经过身份验证。

# c++ - 从文本文件/XML 文件创建 C++ 类

> ID：13611254
> 
> 赞同：0
> 
> 时间：2012-11-28T17:46:00.037
> 
> 标签：c++, class, parsing, struct, text-files

我基本上想为我想要制作的一些数据类型创建一个内部结构。这些数据类型将保存我程序中的大部分信息（基本上是一个大型数据库，但我想避免设置一个使用的麻烦）并将被序列化/反序列化。

但我想从文本文件/ml 文件的布局中动态创建这些类/结构。例如：

```
container Music
field string name
field largenumber filesize
end container 
```

这是一个非常基本的例子：在上面，'container' 将是数据类型（类或结构），'field' 表示变量（字符串是.. stl 字符串，大数是无符号整数或是的，我意识到我想要一个检查正确语法的 C++ 解析器（作为编译器）之类的东西。

我基本上希望我的程序的用户创建自己的数据类型（添加字段/删除字段/创建自己的结构），然后将其永久保留在我的程序中。

（我已经弄清楚了如何在执行此操作时进行序列化/反序列化 - 我所要做的就是确保我还将最后创建的类/结构文本文件与序列化数据一起保存，这样我就可以在反序列化时重新创建数据类型）。

有人知道如何去做，或者建议更好地实现我的设计吗？

PS 显然这些信息需要在运行时创建，而不是编译时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:08:43.750

正如你所建议的，我会通过编写一个 XML 解析器来做到这一点，并且数据类型定义将在文件中。这样，解析变得非常容易（使用任何 XML 读取库）。您在运行时创建数据类型，您所需要的只是：一个类**Container**和一个类**Field**，您可以在其中存储名称、类型等。

你预处理你的 XML 文件，生成一个函数来填充你的一些数据结构，通常看起来像：

```
Field newfield1 (name, type, whatever);
Field newfield2 (name2, type2, whatever2);
...
Container newContainer;
newContainer.addField(newfield1);
newContainer.addField(newfield2);
... 
```

当然，您可以比这更好地组织您的代码，但这只是为了给出想法。首先将您的数据类型写为 XML，预处理您的 XML 并生成“运行时”.cpp 文件以创建您的动态类型，将其包含在您的项目中，然后您可以根据需要使用您的类型。

要创建不同类型的字段（事先不知道），您可以使用 boost::variant（也可以从 XML 生成类型列表）。您甚至可以为每个字段生成一个 typedef，以确保稍后在使用 boost:get<> 时使用正确的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:00:46.970

对于 XML 到对象的转换，您实际看到的是 SOAP 的一部分。我更喜欢 RapidXML，但您可以尝试使用其他 XML 解析器来创建/读取您的对象。

对于文本文件，您可能必须编写自己的解析器来正确处理文本文件并期望正确的类型和定义，然后相应地生成对象。

我同意，除非存在通用接口，否则动态创建对象并用值填充它并非易事。

作为旁注，既然您说您希望您的用户动态地“创建”类型，为什么不研究一种简单的脚本语言（或自己制作一个 DSL？）

# c++ - CUDA 中的性能

> ID：13611261
> 
> 赞同：2
> 
> 时间：2012-11-28T17:46:12.647
> 
> 标签：c++, performance, cuda

我似乎无法弄清楚影响内核性能的潜在因素。我实现了两个简单的内核，一个加载两个图像并逐个像素地添加它们，另一个加载两个图像并对*它们*进行按位运算。现在，我对它们进行了模板化，以便内核可以获取 8 位和 32 位图像，以及 1、3 和 4 通道图像。

所以，最初我让两个内核都将全局内存加载为`uchar3`和`float3`，以及`uchar4`等等。但是，由于合并，我不太确定使用三元组，所以我想我会给它一个分析运行。我想，由于操作与通道数无关，我可以像读取图像一样读取图像，就好像它是`uchar`宽度为三倍的 1 通道图像，而不是`uchar3`真正的图像。

事实上，`uchar3`全局负载比负载慢*得多*`uchar`。我的努力得到了证明。但是，唉，这只发生在算术内核上。按位与运算显示完全相反的结果！

现在，我知道我可以将图像数据加载为`uint`s 而不是`uchar`s，用于按位运算，这应该可以完美地处理合并。但是让我们假设我只是想学习和理解正在发生的事情。

让我们忘记`float3`s 和`float4`s 等。我的问题在于`uchar`内核的版本。那么，简而言之，为什么`uchar`负载有时比负载快`uchar3`，有时又不是呢？

我使用的是 GTX 470，计算能力 2.0。

PS。根据 CUDA 编程指南，逻辑运算和加法运算具有相同的吞吐量。（我的内核实际上必须首先将`uchar`s 转换为`uint`s，但这应该在两个内核中都发生。）因此，根据我的收集，执行长度应该大致相同。

算术添加内核（`uchar`版本）：

```
__global__ void add_8uc1(uchar* inputOne, uchar* inputTwo, uchar* output, unsigned int width, unsigned int height, unsigned int widthStep)
{
    const int xCoordinateBase = blockIdx.x * IMAGE_X * IMAGE_MULTIPLIER + threadIdx.x;
    const int yCoordinate = blockIdx.y * IMAGE_Y + threadIdx.y;

    if (yCoordinate >= height)
        return;

#pragma unroll IMAGE_MULTIPLIER
    for (int i = 0; i < IMAGE_MULTIPLIER && xCoordinateBase + i * IMAGE_X < width; ++i)
    {
        //  Load memory.
        uchar* inputElementOne = (inputOne + yCoordinate * widthStep + (xCoordinateBase + i * IMAGE_X + threadIdx.x));
        uchar* inputElementTwo = (inputTwo + yCoordinate * widthStep + (xCoordinateBase + i * IMAGE_X + threadIdx.x));

        //  Write output.
        *(output + yCoordinate * widthStep + (xCoordinateBase + i * IMAGE_X + threadIdx.x)) = inputElementOne[0] + inputElementTwo[0];
    }
} 
```

按位与内核：

```
__global__ void and_8uc1(uchar* inputOne, uchar* inputTwo, uchar* output, unsigned int width, unsigned int height, unsigned int widthStep)
{
    const int xCoordinateBase = blockIdx.x * IMAGE_X * IMAGE_MULTIPLIER + threadIdx.x;
    const int yCoordinate = blockIdx.y * IMAGE_Y + threadIdx.y;

    if (yCoordinate >= height)
        return;

#pragma unroll IMAGE_MULTIPLIER
    for (int i = 0; i < IMAGE_MULTIPLIER && xCoordinateBase + i * IMAGE_X < width; ++i)
    {
        //  Load memory.
        uchar* inputElementOne = (inputOne + yCoordinate * widthStep + (xCoordinateBase + i * IMAGE_X + threadIdx.x));
        uchar* inputElementTwo = (inputTwo + yCoordinate * widthStep + (xCoordinateBase + i * IMAGE_X + threadIdx.x));

        //  Write output.
        *(output + yCoordinate * widthStep + (xCoordinateBase + i * IMAGE_X + threadIdx.x)) = inputElementOne[0] & inputElementTwo[0];
    }
} 
```

版本相同，`uchar3`只是加载/存储行现在如下：

```
 //  Load memory.
    uchar3 inputElementOne = *reinterpret_cast<uchar3*>(inputOne + yCoordinate * widthStep + (xCoordinateBase + i * IMAGE_X + threadIdx.x) * 3);
    uchar3 inputElementTwo = *reinterpret_cast<uchar3*>(inputTwo + yCoordinate * widthStep + (xCoordinateBase + i * IMAGE_X + threadIdx.x) * 3);

    //  Write output.
    *reinterpret_cast<uchar3*>(output + yCoordinate * widthStep + (xCoordinateBase + i * IMAGE_X + threadIdx.x) * 3) 
        = make_uchar3(inputElementOne.x + inputElementTwo.x, inputElementOne.y + inputElementTwo.y, inputElementOne.z + inputElementTwo.z); 
```

对于 AND 内核也是如此。（老实说，我不确定我是否记得确切的内核......我会在明天确认）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:59:37.040

`uchar3`由于 SM 指令集中没有 24 位加载，编译器会将加载拆分为单独的加载。因此，它们永远不会合并。在一定程度上，缓存会缓解这种情况。

但是，根据确切的执行配置，每个线程可能只有大约 10.7 字节的缓存（您的示例可能会接近该值，因为内核很简单，因此许多线程可以在一个 SM 上同时运行）。由于缓存不是完全关联的，因此在发生抖动之前每个线程的可用字节数可能要小得多。何时发生这种情况取决于许多因素，包括指令的确切调度，即使对于具有相同记录吞吐量的指令，这也可能不同。

您可以比较两个版本的`cuobjdump -sass`*可执行文件*的输出，以查看编译器的静态调度是否相同。然而，运行时的动态调度如何工作基本上是不可观察的。

正如您所注意到的，图像的所有通道都以相同的方式处理，因此您如何在线程之间分配它们并不重要。您拥有的最佳选择是使用`uchar4`or `uchar3`，`uchar`它（假设图像的适当对齐）将为您提供独立于缓存的合并访问。这应该会导致更短和更一致的执行时间。

# php - 如何替换动态php字符串的一部分

> ID：13611264
> 
> 赞同：0
> 
> 时间：2012-11-28T17:46:17.850
> 
> 标签：php, mysql, echo, str-replace

我有一个页面通过主 ID 从 MySQL 调用动态 URL 内容。该信息被调用并回显为

```
"../images/icons/filename.jpg" 
```

通过这个命令：

```
<php echo $row_getimages['icon']; ?> 
```

我想将“../images/icons/filename.jpg”更改为：

```
"http://www.mysite.com/images/icons/filename.jpg" 
```

有谁知道这是否可以通过 str_replace 或其他命令实现？我已经尝试过那个特定的，但我无法找出正确的语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:48:40.103

尝试

```
<?php echo str_replace('../','http://www.mysite.com/',$row_getimages['icon']); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:48:54.050

是的，您可以使用[str_replace()](http://php.net/manual/en/function.str-replace.php)：

```
<?php echo str_replace("../","http://www.mysite.com/",$row_getimages['icon']); ?> 
```

只需确保您的参数顺序正确：

# ruby-on-rails - Rails：:source => ?? 之间的区别 和 :class_name => ?? 在模型中

> ID：13611265
> 
> 赞同：32
> 
> 时间：2012-11-28T17:46:20.923
> 
> 标签：ruby-on-rails

嗨，我在概念化何时使用`:source`以及何时使用`:class`更复杂的模型时遇到了麻烦。

这里我有一个有朋友的用户的例子。

```
class User < ActiveRecord::Base
  ...
  has_many :friendships, :dependent => :destroy
  has_many :friends, :through => :friendships, :conditions => "status = 'accepted'"
  has_many :requested_friends, :through => :friendships, :source => :friend, :conditions => "status = 'requested'", :order => :created_at
  has_many :pending_friends, :through => :friendships, :source => :friend, :conditions => "status = 'pending'", :order => :created_at
end

class Friendship < ActiveRecord::Base
  attr_accessible :friend_id, :user_id, :status

  belongs_to :user
  belongs_to :friend, :class_name => "User", :foreign_key => 'friend_id'
end 
```

有人可以解释为什么友谊是`:class_name`而不是`:source`吗？这是因为这只是配对（has_many + :source ，belongs_to + :class_name）吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-28T18:01:32.913

它们在概念上是相同的，只是不同用途需要不同。

`:source`用于（可选）在您使用时定义关联的模型名称`has_many through`；`:class_name`在简单的`has many`关系中使用（可选）。仅当 Rails 无法自行确定类名时才需要两者。请参阅[此处 API 中的 has_many 文档](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-10T03:54:52.670

以下是 :source 和 :class_name 的用法示例。

`has_many :subscribers, through: :subscriptions, source: :user`

`has_many :people, class_name: "Person"`

正如您所看到的，当您使用直通表时，您最终会使用`source`else you use `class_name`。

查看此链接中的选项示例：http: [//api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many)

# c# - WP8 HTML5 游戏运行不正确

> ID：13611266
> 
> 赞同：0
> 
> 时间：2012-11-28T17:46:23.933
> 
> 标签：c#, windows-phone-8

我正在将我的游戏放入 Visual Studio 2012 中的 HTML5 应用程序中，但它似乎没有运行。背景更改为正确的背景颜色，但应用程序不会继续过去。虽然没有错误或任何东西，当我在 IE10 的手机上通过网络测试游戏时，它运行完美，没有错误。

关于如何使它工作的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:04:01.223

看看[这篇文章](http://jessefreeman.com/articles/html5-on-windows-phone-8/)可能会解决您的问题。看起来 VS WP8 HTML5 项目模板中存在一个错误，其中默认情况下在`WebBrowser`控件上未启用脚本。启用 Javascript 后，您的应用程序应该开始按预期执行。

# neo4j - 如何使用蓝图获取 neo4j DB 中的所有关系类型？

> ID：13611267
> 
> 赞同：0
> 
> 时间：2012-11-28T17:46:26.657
> 
> 标签：neo4j, cypher, graph-databases

我正在使用带有 neo4j 数据库的蓝图 API。蓝图中有没有办法检索数据库中节点之间存在的所有关系类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:07:12.453

当前的蓝图 API(1.2) 没有任何公开的方法来提供边缘上的所有标签，但 Neo4j[有](http://api.neo4j.org/1.8/org/neo4j/tooling/GlobalGraphOperations.html)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-05T18:18:10.050

```
//start n = node( * )
//match n-[ * ]-relatedTo_Bidirectional
//return n,relatedTo_Bidirectional

start n = node( * )
match n-[ * ]->relatedTo_Unidirectional
return n,relatedTo_Unidirectional 
```

第一个将返回所有关系，无论方向如何

然而，第二个只会返回从源节点指向特定节点的关系

# java - 如何以 \t 作为分隔符编写 csv 文件？直截了当的方法行不通

> ID：13611268
> 
> 赞同：0
> 
> 时间：2012-11-28T17:46:27.543
> 
> 标签：java, csv, encoding

我使用以下代码编写一个 csv 文件：

```
public static void main(String[] args) throws IOException {
    String str = "aa\tbb\tcc\tdd";
    Writer writer = new OutputStreamWriter(new FileOutputStream(new File("c:\\test\\test.csv")), "UTF-16LE");
    writer.append(str);
    writer.flush();
    writer.close();
} 
```

当我在 excel 中打开文件时，列没有分开。它们都在一列中。我在记事本++ 中打开文件，看到它用“UCS-2 LE w/o BOM”编码。如果我保存用“UCS-2 Little endian”编码的文件并在 excel 中打开它，则列是分开的。

如何以这种编码在 java 中编写文件，以便它在 excel 中显示单独的列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:50:12.290

使用逗号而不是制表符，例如

```
String str = "aa,bb,cc,dd"; 
```

我不相信 Excel 默认情况下会分隔以制表符分隔的数据列。你可以这样做，但它需要一个额外的步骤。

# module - ExpressionEngine 文章视图仅显示最新文章

> ID：13611272
> 
> 赞同：1
> 
> 时间：2012-11-28T17:46:50.190
> 
> 标签：module, expressionengine, channel

我有一个列出文章的博客，当单击链接以显示完整文章时，它会返回同一篇文章，恰好是最新的。我已确保所有 3 篇文章均已打开。这是我的文章模板条目标签：

`{exp:channel:entries channel="news" limit="1" dynamic="no" disable="categories|member_data|pagination" }`

我也尝试过动态打开它，但这也不起作用。万一你认为我碰巧链接到同一篇文章，这里是我的列表模板：

```
{exp:channel:entries channel="news" dynamic="off" status="Open|Featured"}

<div class="entry">
  <p class="title"><a href="{path='news/{title}'}">{title}</a></h2>
  <p class="date meta">{entry_date format="%M %j, %Y"}</p>
  <div class="entry-content">
     {news_summary}
  </div>
</div>  

{/exp:channel:entries} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:41:39.770

我假设你想要完整的文章在`/news/the-title-of-the-post`

对于完整的文章模板，您不需要`dynamic="no"`. 将其关闭或明确设置`dynamic="yes"`。

在您的列表模板中，对于您的`href`try [`{url_title_path}`](http://ellislab.com/expressionengine/user-guide/modules/channel/channel_entries.html#url-title-path)，它将 URL 标题附加到您选择的模板/组中：

```
<p class="title"><a href="{url_title_path='news'}">{title}</a></h2> 
```

发生的事情是您正在加载`/news/The%20Title%20of%20The%20Post`，这与 URL 标题*不匹配。*然后，因为 EE 找不到任何匹配的 URL 标题**，而**您有`dynamic="no"`，它会显示最新文章，而不管 URL 是什么。

# iphone - 当用户触摸滚动视图上的任何位置时隐藏表格

> ID：13611273
> 
> 赞同：-1
> 
> 时间：2012-11-28T17:46:53.213
> 
> 标签：iphone, ios, ios5

我在`UIScrollView`里面放了一个`UIView`，我在里面放了一个按钮`UIScrollView`，我的要求是当我点击那个按钮时，我正在生成一个`UITableView`。

当用户触摸滚动视图上的任何位置时，我想隐藏该表，但该`- touchesBegan:withEvent:`方法不起作用。我也尝试过`UITapGuestureRecogniser`，但是当我在表视图中选择任何行时会产生问题，因为在该`tableView:didSelectRowAtIndexPath:`方法中我将数据从表中提取到文本字段中。

请告诉我是否有任何替代方案`UITableView`或任何其他解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:22:44.917

您可以在 tableview 后面添加一个覆盖视图并将其设置`UITapGuestureRecogniser`为该视图。将其背景颜色保持为清晰的颜色，以便用户不会看到它。您可以在添加表格时添加此视图，并在用户与表格一起点击此视图时将其删除。

# jquery - 如何从类元素中获取值？

> ID：13611276
> 
> 赞同：1
> 
> 时间：2012-11-28T17:46:57.000
> 
> 标签：jquery

我正在尝试获取选定的课程文本。

我有

```
for (var i=0; i<$('.toys').length; i++){

       if($('.toys')[i].text()=='lego'){
         alert('got it');
         return false;
      }
    } 
```

html

```
<div class='toys'> toya  </div>
<div class='toys'> lego  </div>
<div class='toys'> toyb  </div>
<div class='toys'> toyc  </div> 
```

我收到一条错误消息，说 Object # has no method 'text'

我该如何解决？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:54:54.633

首先，您应该缓存您的结果以避免重复查询 DOM。

您的代码的问题是 using`[]`返回原始 DOM 元素（*不是 jquery 对象*），并且 DOM 元素没有该`.text()`方法。您应该使用[`.eq(i)`](http://api.jquery.com/eq)而不是`[i]`.

但是，正如其他人所提到的，更合适的方法是使用[`.each()`](http://api.jquery.com/each)或替代使用[`.filter()`](http://api.jquery.com/filter)

```
var wanted = $(".toys").filter(function() {
    return $.trim($(this).text()) === 'lego';
});
if (wanted.length){
  alert('got it'); // or do whatever you want with the wanted element..
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:49:54.053

您可以（并且应该）使用 jQuery[`$.each()`](http://api.jquery.com/jQuery.each/)循环来迭代集合，如下所示：

```
$(".toys").each(function() {
    if($(this).text() == "lego") {
        alert("got it!");
        return false;
    }
}); 
```

# c# - 如何删除字符串中的 \r \n 和其他转义序列

> ID：13611278
> 
> 赞同：2
> 
> 时间：2012-11-28T17:46:58.250
> 
> 标签：c#, wpf, string

我有一个字符串变量，我定义为

```
String keyRight = new TextRange(rtb_KeyRight.Document.ContentStart, rtb_KeyRight.Document.ContentEnd).Text; 
```

其中 rtb_KeyRight 是一个 wpf 富文本框

但是当我调试我的代码时，转义序列 \r\n 被添加到我的字符串中。

这样做不起作用：

```
keyRight.Replace("\r\n", ""); 
```

有任何想法吗？

基本上我只是提取richtextbox 的内容并将其放入一个字符串中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T17:52:09.753

尝试：

```
keyRight = keyRight.Replace("\r\n", ""); 
```

# javascript - 将自定义项添加到 extjs 中的单选按钮

> ID：13611280
> 
> 赞同：0
> 
> 时间：2012-11-28T17:47:13.257
> 
> 标签：javascript, jquery, html, extjs, extjs4

我在 extjs 中有这个单选按钮组

```
{
    xtype: 'radiogroup',
    flex: 8,
    vertical: true,
    columns: 1,
    labelWidth: 50,
    id: 'radio_group_id',
    fieldLabel: 'Group Label',
    items: [{
        boxLabel: 'option 1',
        name: 'rb-auto',
        inputValue: 1,
        checked: true
    }, {
        boxLabel: 'option 2',
        name: 'rb-auto',
        inputValue: 2
    }, {
        boxLabel: 'option 3',
        name: 'rb-auto',
        inputValue: 3,
        // is this somehow possible
        items:[{
            xtype:'numberfield',
            // number field settings
        }]
    }, {
        boxLabel: 'option 4',
        name: 'rb-auto',
        inputValue: 4
    }, {
        boxLabel: 'option 5',
        name: 'rb-auto',
        inputValue: 5
    }]
}, 
```

是否可以在选项 3 旁边添加数字字段，以便在我选择单选按钮 3 时启用它？

或者我必须使用单独的容器将单独的数字字段与选项 3 对齐？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T21:40:21.187

例如，您可以渲染`NumberField`成`boxLabelEl`单选按钮。另一种方法是创建两列布局，并在第二列中放置标签和数字字段。

第一种方法的示例：http: [//jsfiddle.net/NsbyD/2/](http://jsfiddle.net/NsbyD/2/)

# php - php.ini 中断会话变量

> ID：13611281
> 
> 赞同：0
> 
> 时间：2012-11-28T17:47:15.423
> 
> 标签：php

我联系了我的主机以增加我们的 upload_max_filesize，并被告知使用脚本目录中的 php.ini 文件。

然而，仅仅存在 php.ini 文件（无论是空的还是带有指令的）都会删除所有会话变量。

这是我想要的 php.ini 文件：

```
max_input_time = 1500
memory_limit = 100M
post_max_size = 75M
upload_max_filesize = 75M 
```

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:49:27.067

您是否尝试过将其放在 webroot 中以便设置可以全局应用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:49:41.650

没关系，这个问题解决了我的问题。请关闭子文件夹中自定义 php.ini 文件的完全副本，[导致 $_SESSIONS 变量出现问题](https://stackoverflow.com/questions/5561540/custom-php-ini-file-in-subfolder-causing-issues-with-sessions-variables?rq=1)

# asp.net-mvc - 使用 MVC 4 创建移动应用和网站

> ID：13611284
> 
> 赞同：1
> 
> 时间：2012-11-28T17:47:22.053
> 
> 标签：asp.net-mvc, mobile, asp.net-mvc-4, kendo-ui

我正在创建一个具有以下目标的网站/移动应用程序：

1.  需要在移动浏览器（android、iOS）上渲染
2.  需要在平板电脑上的浏览器（iPad 等）上渲染
3.  需要在桌面浏览器上渲染
4.  需要创建一个绑定PhoneGap的移动应用

我在客户端使用 KendoUI 和 ASP.NET MVC 4。

我需要确保尽可能多地重用代码。

这是我的计划：

1.  对于移动应用，创建纯 HTML（因为 CSHTML 不能与 PhoneGap 捆绑使用）、JS 和 Kendo 移动小部件
2.  对于移动浏览器渲染，我将创建一个单独的解决方案并创建特定于浏览器的视图（我假设我需要 3 个？一个用于移动浏览器，一个用于平板电脑，一个用于桌面浏览器）。我将使用 Kendo Web 小部件
3.  我需要尽可能重用服务器端代码（控制器、数据访问 EF 层等）。我需要为此使用 Web API 吗？

这行得通吗？有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T07:51:21.390

坦率地说，判断它是否有效的唯一方法是实际尝试。

ASP.NET MVC 4 具有根据访问网站的设备呈现不同视图的出色功能。这将帮助您为台式机、平板电脑和手机创建视图。

我强烈建议将您的业务逻辑公开为返回 JSON 的服务。然后，您可以使用来自任何平台和任何技术的数据。在 .NET 中创建 JSON 服务有多种方法 - WCF、ASP.NET MVC 操作方法、WebApi 等。

# matlab - 计算椭球坐标

> ID：13611286
> 
> 赞同：1
> 
> 时间：2012-11-28T17:47:25.017
> 
> 标签：matlab, rotation, plot, octave

我想绘制一个椭球体，但我希望它的中心和旋转点位于椭球体的末端而不是中心。如何获取端点坐标并将它们转换为中心点坐标。另外我希望它围绕一个端点而不是它的中心旋转，Rotate() 只使用绘图中心。请记住，椭圆体的长度会有所不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:19:43.460

看[这里](http://www.mathworks.com/help/matlab/ref/rotate.html)，它说：

> rotate(...,origin) 将旋转轴的原点指定为三元素向量 [x0,y0,z0]。

你试过用你的终点作为起点吗？这将覆盖默认原点，即：

> 旋转轴的默认原点是绘图框的中心。该点不一定是轴的原点。

# javascript - 3 个字符后执行 Ajax 搜索

> ID：13611288
> 
> 赞同：0
> 
> 时间：2012-11-28T17:47:29.003
> 
> 标签：javascript, ajax, search

在用户输入 3 个字符后，我如何进行 Ajax 搜索？我不是 javascript 方面的专家，但到目前为止，这是我的 HTML 文件：

```
<form>
<input type="text" id="searchField" name="searchField" placeholder="...">
</form>

<script>
    $('#searchField').searchbox({
    url: 'components/search_ajax.php',
    param: 'q',
    dom_id: '#searchResult',
    delay: 0,
    loading_css: '#spinner'
    });
</script> 
```

目前，仅在按下退格按钮时才调用搜索（然后表示我的所有数据库条目，因为存在没有字符的匹配搜索）。

提前致谢！问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:57:08.913

首先，您需要让我们知道您使用的是哪个插件，我感觉是[这个](https://github.com/rpheath/searchbox/blob/master/searchbox.js)，如果是，请更改：

```
process: function(terms) { 
```

至

```
process: function(terms) {
  if(terms.length < 3) return; 
```

但是你也应该在你的服务器端限制这个，否则我可以直接去你的脚本查看所有条目。您可以在`php`文件顶部执行此操作：

```
if(strlen(trim($_GET['q'])) < 3) return; // only basic, would need more checks 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:50:36.597

做这个：

```
$('#searchField').change(function() {
 var value = $(this).val();
 if(value.length>= 3){
    ajax_search();
 }

});

function ajax_search(){
  $('#searchField').searchbox({
  url: 'components/search_ajax.php',
  param: 'q',
  dom_id: '#searchResult',
  delay: 0,
  loading_css: '#spinner'
  });
} 
```

# python - 在python中读取选项卡式文件

> ID：13611291
> 
> 赞同：2
> 
> 时间：2012-11-28T17:47:32.230
> 
> 标签：python, file-io

我在 .txt 文件中有如下整数数据。

```
600  17  3488541
601  21  6523232
602  18  6565444
603  23  6655656 
```

就这样继续下去。该文件非常庞大。在一个特定的程序中，我需要将一行中的每个值放入一个整数变量中并使用它，然后使用下一行中的值，依此类推。

我已经阅读了很多教程，但没有任何内容可以解释如何实现我的目的。

具体来说，这正是我所需要的。我有三个变量，`a`比如说`b`和`c`。所有这 3 个变量都在`while`-loop 中初始化。在 while 循环的第一次执行中，值必须是：

```
a=600
b=17
c=3488541 
```

在第二次执行中，它必须是：

```
a=601
b=21
c=6523232 
```

...等等。我该怎么做？我是 Python 的初学者。工作平台是Linux。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T17:50:30.860

```
with open('file.txt') as f:
   for line in f:
      a, b, c = map(int, line.split())
      ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T17:54:05.153

具有制表符分隔值的文件只是经典[逗号分隔值 (CSV)](http://en.wikipedia.org/wiki/Comma-separated_values)文件的一种方言，其中分隔符是制表符 ( `\t`)。

令人高兴的是，Python 附带了一个可以理解[dialect](http://docs.python.org/2/library/csv.html#csv.Dialect)的。[**`csv.reader`**](http://docs.python.org/2/library/csv.html#csv.reader) `class`

您应该使用它（并为您的值提供比 更合适的名称`a, b, c`）。

## 例子：

```
% cat ./integers.py 
#!/usr/bin/env python

import csv
csv.register_dialect('tsv', delimiter='\t', quoting=csv.QUOTE_NONE)
with open('integers.txt', 'r') as integers:
    reader = csv.reader(integers, 'tsv')
    for row in reader:
        paper, student, score = (int(column) for column in row)
        print paper, student, score 
```

跑步：

```
% ./integers.py   
600 17 3488541
601 21 6523232
602 18 6565444
603 23 6655656 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T17:53:23.087

```
with open("filename.txt") as input_file:
    for line in input_file:
        a, b, c = map(int, line.split())
        # do something with a, b, c here 
```

但是，您可能会发现将项目留在列表中更容易。例如，如果您将它们相加或其他什么，它`sum(list)`比更容易做`a + b + c`，并且如果您需要它用于具有三个以上字段的文件，则可以更好地扩展。对于这种事情，只需执行以下操作：

```
with open("filename.txt") as input_file:
    for line in input_file:
        numbers = map(int, line.split())
        print sum(numbers)   # or whatever 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T17:55:22.323

另一种解决方案。

```
lines = open('data.txt').read().splitlines()
lines = [map(int, i.split()) for i in lines]
for a,b,c in lines:
    print a,b,c 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T19:11:33.700

您可以使用 csv 模块：

```
import csv
fcont = csv.reader(open("file_path"), delimiter="\t") #tab separated
for (row, (a, b, c)) in enumerate(fcont): #a b c are strings. you can map(int, (a, b, c))
    do_something(a, b, c) 
```

没有 csv 模块：

```
f = open("file_path")
fcont = f.read().splitlines(); f.close()
for (row, rcont) in fcont:
    (a, b, c) = rcont.split("\t") #tab separated #you can map(int, (a, b, c))
    do_something(a, b, c) 
```

# java - 如何从文本文件加载和执行 java 命令

> ID：13611292
> 
> 赞同：2
> 
> 时间：2012-11-28T17:47:32.123
> 
> 标签：java, command-line, java.util.scanner, java-io, file-io

我是 Java 编码新手，需要一些建议。

我正在编写一个小程序，该程序根据用户控制台输入的指定在图形面板中绘制形状。（使用扫描仪类）

例如，用户可以键入`move 100 100`以将图形“笔”移动到 x、y 点，或者可以键入`line 100 200`以在两个坐标之间绘制一条线，或者可以键入“圆 50”以绘制一个半径为 50px 的圆

我的下一个目标是包含命令“load example.txt”来加载一个文本文件（example.txt），其中包含一些命令，然后这些命令将在图形面板上执行。

有人告诉我最好的方法是使用

```
processCommandLine(String commandLine); 
```

我已经浏览互联网很长时间了，现在正在寻找一些有用的信息，但到目前为止，我能找到的只是如何从文本文件中读取，很多是这样的：

```
 Scanner reader = new Scanner(new FileInputStream("example.txt"); 
```

我知道我需要使用 Scanner 类来读取文件内容，然后（我认为使用 processCommandLine 方法）在图形面板上执行它们

到目前为止我的代码：（我已经调用了保存在单独文件中的所有必要的类和方法）

```
import java.util.Scanner;

public class Assign1 {

   public final static void main(String[] args) {
      System.out.println("Let's draw something on the screen!");

      GraphicsScreen graphics = new GraphicsScreen();

      Scanner input = new Scanner(System.in); // used to read the keyboard

      String next; // stores the next line input
      String[] one;

      do {
         System.out.print("Enter a command (\"stop\") to finish : ");
         System.out.print("Type 'help' for a list of commands ");
         next = input.nextLine();
         one = next.split(" ");

         String command = one[0];

         if (next.contains("help")) {
            System.out
                  .println("Type 'move' followed by an X and Y co-ordinate to move the graphical pointer.");
            System.out
                  .println("Type 'circle' followed by a radius value to output a circle.");
            System.out
                  .println("Type 'line' followed by an X and Y co-ordinate to draw a line.");
            System.out.println("Type 'clear' to reset the graphical canvas.");
         }

         else if (next.contains("move")) {
            int x = 0;
            int y = 0;

            x = Integer.parseInt(one[1]);
            y = Integer.parseInt(one[2]);

            graphics.moveTo(x, y);
         }

         else if (command.equalsIgnoreCase("circle")) {
            int radius = 0;
            radius = Integer.parseInt(one[1]);
            graphics.circle(radius);

         }

         else if (command.equalsIgnoreCase("line")) {
            int x = 0;
            int y = 0;

            x = Integer.parseInt(one[1]);
            y = Integer.parseInt(one[2]);

            graphics.lineTo(x, y);

         }

         else if (next.contains("clear")) {
            graphics.clear();
         }

         else {
            System.out.println("error message");
         }

      } while (next.equalsIgnoreCase("stop") == false);

      System.out
            .println("You have decided to stop entering commands. Program terminated!");

      graphics.close();
   }
} 
```

我需要包含文本文件，例如：

```
移动 100 100
50圈
第 100 200 行

```

当我调用操作“加载 example.txt”时，应用程序将读取此文本文件，并通过在图形画布上绘制指定的形状来执行其中的命令。

任何帮助或指导将不胜感激，我从事 Java 编程不到一年，并且一直在努力改进，因此欢迎任何建设性的批评。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T20:30:12.763

所以，这是一个不错的项目，因为它向您介绍了代码重用和基本 MVC（模型-视图-控制器）编程的概念。基本上，如果您认为图形上下文是您的视图，并且您正在使用一组命令*控制*对该视图的访问，那么您的模型显然就是命令本身。您现在要做的是使从其他来源提供模型成为可能，同时保持程序中的所有其他内容完好无损。

因此，您的第一个任务是创建这个可重用的“控制器”代码，它知道如何获取模型（命令），并使用它来影响视图（您的图形上下文）。您已经拥有所有必要的逻辑，您只需将其移动到您想要的功能中：

```
public static void processCommandLine(String[] commandArgs, GraphicsScreen graphics) {
   if (commandArgs == null || commandArgs.length = 0 || commandArgs[0] == null) {
      System.out.println("Null command!");
   }

   String command = commandArgs[0];

   if (command.trim().equalsIgnoreCase("move")) {
      int x = 0;
      int y = 0;

      x = Integer.parseInt(commandArgs[1]);
      y = Integer.parseInt(commandArgs[2]);

      graphics.moveTo(x, y);
   }

   else if (command.trim().equalsIgnoreCase("circle")) {
      int radius = Integer.parseInt(one[1]);
      graphics.circle(radius);

   }

   else if (command.trim().equalsIgnoreCase("line")) {
      int x = 0;
      int y = 0;

      x = Integer.parseInt(commandArgs[1]);
      y = Integer.parseInt(comamndArgs[2]);

      graphics.lineTo(x, y);
   }

   else if (command.trim().equalsIgnoreCase("clear")) {
      graphics.clear();
   }
   else {
      System.out.println("Invalid Command!");
   }
} 
```

有了这个，您可以将命令和图形屏幕传递给单个函数，它将“渲染”命令。现在，您想要提供访问该函数的不同*方式*。您的第一种访问方法是通过控制台向用户查询命令，然后执行它。但是您还希望能够从一个文件加载多个命令并一次运行它们。所以定义一个从文件中读取一堆命令的方法：

```
public static List<String> getCommands(String fileName) {
   if(fileName == null) return new ArrayList<String>(0);

   File file = new File(fileName);
   if(! (file.exists() && file.canRead()) {
      System.err.println("Cannot access file! Non-existent or read access restricted");
      return new ArrayList<String>(0);
   }

   List<String> commandLines = new ArrayList<String>(32);
   Scanner scanner = new Scanner(file);
   while(scanner.hasNextLine()) {
      commandLines.add(scanner.nextLine());
   }

   scanner.close();

   return commandLines;
} 
```

现在，您只需要根据命令源是控制台还是文件来更改将命令传递给渲染函数的方式：

```
public final static void main(String[] args) {
   System.out.println("Let's draw something on the screen!");

   GraphicsScreen graphics = new GraphicsScreen();

   Scanner input = new Scanner(System.in); // used to read the keyboard

   String next; // stores the next line input
   String[] one;

   do {
      System.out.print("Enter a command (\"stop\") to finish : ");
      System.out.print("Type 'help' for a list of commands ");
      next = input.nextLine();
      one = next.split(" ");

      String command = one[0];

      if (command.trim().equalsIgnoreCase("help")) {
         System.out
               .println("Type 'move' followed by an X and Y co-ordinate to move the graphical pointer.");
         System.out
               .println("Type 'circle' followed by a radius value to output a circle.");
         System.out
               .println("Type 'line' followed by an X and Y co-ordinate to draw a line.");
         System.out.println("Type 'clear' to reset the graphical canvas.");
      }

      else if (command.trim().equalsIgnoreCase("load")) {
         List<String> commandLines = getCommands(one[1]);
         for (String commandLine : commandLines) {
            String[] commandArgs = commandLine.split(" ");
            processCommandLine(commandArgs, graphics);
         }
      }

      else if (command.trim().equalsIgnoreCase("stop")) {
         break;
      }

      else {
         processCommandLine(one, graphics);
      }
   } while (true);

   System.out
         .println("You have decided to stop entering commands. Program terminated!");
   graphics.close();
} 
```

通过这些（微小的）更改，您现在可以从多个不同的源获取命令，并将这些命令呈现到您的视图中。

# twitter-bootstrap - jasny fileupload 元素，无法将其用于编辑操作

> ID：13611297
> 
> 赞同：3
> 
> 时间：2012-11-28T17:47:47.957
> 
> 标签：twitter-bootstrap, file-upload, jasny-bootstrap

我正在尝试使用来自 jasny-bootstrap 的文件上传进行编辑操作。某些页面使用已登录，他/她已经上传了图像，我希望能够呈现它们以便用户更改或删除。

我正在使用以下

[http://jasny.github.com/bootstrap/javascript.html#fileupload](http://jasny.github.com/bootstrap/javascript.html#fileupload)

带有以下代码段

```
<div class="fileupload fileupload-new" data-provides="fileupload">
  <div class="fileupload-new thumbnail" style="width: 200px; height: 150px;"><img src="http://www.placehold.it/200x150/EFEFEF/AAAAAA&text=no+image" /></div>
  <div class="fileupload-preview fileupload-exists thumbnail" style="max-width: 200px; max-height: 150px; line-height: 20px;"></div>
  <div>
    <span class="btn btn-file"><span class="fileupload-new">Select image</span><span class="fileupload-exists">Change</span><input type="file" /></span>
    <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
  </div>
</div> 
```

它适用于新图像，但我如何渲染现有图像？在手册中它说我必须使用 fileupload-exists 类而不是 fileupload-new，我试过了，它在编辑模式下显示表单。但不显示源图片，请指教

问候，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T22:27:43.050

将图像添加为预览（在 中`.fileupload-preview`）并将顶级类更改为`.fileupload-exists`.

```
<div class="fileupload fileupload-exists" data-provides="fileupload">
  <div class="fileupload-new thumbnail" style="width: 200px; height: 150px;">
    <img src="http://www.placehold.it/200x150/EFEFEF/AAAAAA&text=no+image" />
  </div>
  <div class="fileupload-preview fileupload-exists thumbnail" style="max-width: 200px; max-height: 150px; line-height: 20px;">
     <img src="http://jasny.github.com/bootstrap/assets/img/extended-by-jasny.png">
  </div>
  <div>
    <span class="btn btn-file"><span class="fileupload-new">Select image</span><span class="fileupload-exists">Change</span><input type="file" /></span>
    <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
  </div>
</div>​ 
```

还要检查这个小提琴：http: [//jsfiddle.net/GR2Lt/](http://jsfiddle.net/GR2Lt/)

*PS您目前必须单击“删除”两次。这将在下一个版本中修复。*

# groovy - Groovy - GPars - 活动对象 - 返回值的活动方法

> ID：13611302
> 
> 赞同：0
> 
> 时间：2012-11-28T17:48:02.973
> 
> 标签：groovy, gpars

在 Groovy 中，我需要实现一个名为 ActiveObject 的实例`MyCounter`，以便通过以下代码：

```
final MyCounter counter = new MyCounter()
counter.incrementBy 10
counter.incrementBy 20
counter.update 'Hello'
assert 35 == counter.value 
```

我提供了下面列出的两种实现方式——它们都不起作用。

1.

```
@ActiveObject
class MyCounter
{
    private int counter = 0

    @ActiveMethod
    def incrementBy(int value)
    {
        println "incrementBy $value"
        counter += value;
    }

    @ActiveMethod
    def update(String value)
    {
        println "update $value"
        counter += value.size();
    }

    int getValue()
    {
        println "getValue"
        return counter;
    }
} 
```

我想这不起作用，因为调用`incrementBy`不会阻塞，例如 value 属性，因此实际上在 incrementBy 操作完成之前访问了 counter 变量。

2.

```
@ActiveObject
class MyCounter
{
    private int counter = 0

    @ActiveMethod
    def incrementBy(int value)
    {
        println "incrementBy $value"
        counter += value;
    }

    @ActiveMethod
    def update(String value)
    {
        println "update $value"
        counter += value.size();
    }

    @ActiveMethod
    int value()
    {
        println "getValue"
        return counter;
    }
} 
```

编译器告诉我：

> 非阻塞方法不能返回特定类型，使用 def 或 void 代替

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:07:32.730

好的，基于这是 GPars 的假设，您应该能够通过以下代码使用您的第一个实现：

```
final MyCounter counter = new MyCounter()
def x1 = counter.incrementBy 10
def x2 = counter.incrementBy 20
def x3 = counter.update 'Hello'
x1.get() //block
x2.get() //block
x3.get() //block
assert 35 == counter.value 
```

您可能需要提供更多信息，说明您打算在执行流程方面发生什么，以获得更好的信息。

您还可以更改注释以指示阻止：

```
@ActiveMethod(blocking=true) 
```

有关上述任何内容的信息，请参阅相关[文档](http://www.gpars.org/guide/guide/5.%20Actors.html#5.4%20Active%20Objects)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T07:07:28.367

第一个例子有一个竞争条件，因为 getValue() 直接触及对象的未受保护的内部状态，而 incrementBy() 和 update() 都使用活动对象的内部参与者来修改对象的状态。

在第二个示例中，由于非阻塞方法返回 Promise 的实例，因此您不能提供特定的返回类型，例如 int。

根据 Brian 的建议，只需使用 注释 getValue() 方法`@ActiveMethod(blocking=true)`，这将允许您提供特定的返回类型。

```
@ActiveMethod(blocking=true)
int getValue() {...} 
```

# vim - Vim 数学语法高亮

> ID：13611303
> 
> 赞同：5
> 
> 时间：2012-11-28T17:48:07.467
> 
> 标签：vim, markdown, vim-syntax-highlighting, multimarkdown

我正在尝试改进 markdown 文档中数学的语法突出显示。

Multimarkdown 使用括号`\\[ .. \\]`和`\\( .. \\)`分别表示显示和内联数学。我想用 TeX 突出这些内容。

这是我到目前为止所得到的：

```
syntax include @tex syntax/tex.vim
syn region displaymaths matchgroup=mkdMaths start = "\\\\\[" end="\\\\\]" contains=@tex
syn region inlinemaths matchgroup=mkdMaths start = "\\\\(" end="\\\\)" contains=@tex
hi def link mkdMaths SpecialComment 
```

问题是括号内的内容没有被 tex.vim 当作数学运算，因为它没有包含在`$ .. $`. 有没有办法解决这个问题？我认为我想在这里使用的是 syntax/tex.vim 中的 texMath 组。

有什么方法可以强制将括号的内容解释为 Tex 数学？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:13:08.987

`:syntax include @tex syntax/tex.vim`为您提供了一个语法`@tex`集群，可在包含 Tex 的区域中使用，但您实际上想要引用 tex.vim 中存在的特定集群`@texMathZoneGroup`。

由于没有嵌套语法簇，你可以直接通过`contains=@texMathZoneGroup`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:53:30.760

```
syntax include syntax/tex.vim
syn region displaymaths matchgroup=mkdMaths start = "\\\\\[" end="\\\\\]" contains=@texMathZoneGroup
syn region inlinemaths matchgroup=mkdMaths start = "\\\\(" end="\\\\)" contains=@texMathZoneGroup
hi def link mkdMaths SpecialComment 
```

vim 文档 ( `:help syn-include`) 实际上非常清楚地说明了这一点（尽管也许可以举个例子）：

> 如果包含语法文件中的顶级语法项要包含在包含语法的区域中，可以使用 ":syntax include" 命令：

```
n:sy[ntax] include [@{grouplist-name}] {file-name} 
```

如果要从包含的语法文件中包含特定的顶级语法项“foo”，则需要`contains=@foo`在`syn region`命令中包含。

> 包含文件中声明的所有语法项都将添加“包含”标志。此外，如果指定了组列表，则包含文件中的所有顶级语法项都将添加到该列表中。

所以`@tex`我的问题中的 grouplist-name 不需要指定。但是，如果我的文档中有较大的 TeX 区域，则需要指定它，因为它可以访问包含的语法文件的命名空间，这样`contains=@tex`将根据包含的语法文件的所有规则突出显示整个区域。

# android - 不同 Android 设备的大小问题

> ID：13611305
> 
> 赞同：0
> 
> 时间：2012-11-28T17:48:15.097
> 
> 标签：android, xml, android-layout

我目前正在制作一个适用于两个独立设备的应用程序：Lenovo ideapad A1 (7") 和 Samsung GALAXY Player 5.0 (5")。

我最初是在ideapad 上开始的，并且一直将我所有的XML 文件放入我的`/layout`文件夹中。在ideapad上一切都显示得很好，但是当我切换到5英寸设备时，视图变得太大了。

我一直在使用这个网站来尝试学习如何做：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

我的问题是，从他们在这里显示的内容来看，我的两个屏幕都属于`/layout-large/`，但 Galaxy 5 也会属于`/layout`.

现在我只有 XML 文件`/layout`，那么为什么它在ideapad 上看起来不错，而不是在 Galaxy 5 上呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:05:03.177

如果您在 hdpi 文件夹中使用图像，那么您必须为 mdpi 文件夹提供图像以及布局正常的 xml 以获得更好的 UI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:19:03.700

当您针对一个屏幕进行优化时，您可以将布局放在任何文件夹中。多个布局文件夹的全部智慧在于框架将选择正确的一个。在您的特定情况下，三星 Galaxy Player 的分辨率为 800x480 像素，而联想 Ideapad 的分辨率为 1024x600 像素。

如[http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts)中所述，您可以将 7" 布局放入`res/layout-sw600dp`，并将 Galaxy Player XML 保留在`res/layout`或`res/layout-480dp`中。请注意，此处的**dp**后缀补偿像素密度，因此 5 英寸设备（如 1280x800、285 ppi 的 Galaxy Note）也属于`res/layout-480dp`此类。

# jquery - 在没有特定类的孩子的情况下单击动态 tr 上的事件处理程序

> ID：13611308
> 
> 赞同：0
> 
> 时间：2012-11-28T17:48:22.543
> 
> 标签：jquery, event-handling

我有一个表，当空/过滤无结果时，会抛出一个带有“dataTables_empty”类的 td 的 tr。它有一条消息和一个按钮，将尝试清除过滤器。我有一个看起来像这样的 jquery 处理程序，

```
$('#accountUsersTable tbody').on("click", 'tr', function (e) {
  //moves tr to another table and other magic.
} 
```

显然，我不想将这个信息丰富的 tr 移动到另一个表，所以我尝试向处理程序添加一个 :not() 但无法弄清楚如何不使用类 dataTables_empty 的子 td。

```
$('#accountUsersTable tbody').on("click", $('tr').filter('td').prop('class') != 'dataTables_empty', function (e) {
  //moves tr to another table and other magic.
} 
```

或者其他的东西 ：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:03:44.880

```
$('#accountUsersTable tbody').on("click", 'tr', function (e) {

   if(!$(this).find('td.dataTables_empty').length)){
      // Your logic here
   }
} 
```

# wordpress - WordPress 搜索功能

> ID：13611310
> 
> 赞同：1
> 
> 时间：2012-11-28T17:48:29.557
> 
> 标签：wordpress, search

我们在其中一个网站上有搜索功能 - [http://www.artisansofdevizes.com/products](http://www.artisansofdevizes.com/products)

目前勾选框过滤器等工作正常。

但是免费搜索框只有在使用特定搜索关键字（产品名称）时才会返回一个值。

有没有办法实现更自由流动的搜索能力，基于搜索条件的最佳匹配将返回准确的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T06:06:04.443

互联网上有许多免费的自动完成/搜索服务。其中之一是rockitsearch.com。所以基本上你可以在服务中创建一个索引并在你的网站上免费使用这个索引。

# javascript - Javascript sdk 脸书

> ID：13611311
> 
> 赞同：0
> 
> 时间：2012-11-28T17:48:36.983
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我必须为一个大学项目做一个 facebook API。我正在尝试从 Facebook 获取这些值。

> 当前用户名和 id。朋友的地理位置、朋友的 ID 和姓名、共同的朋友。

我一生中从未见过 Javascript SDK，所以我尝试研究网络中的一些示例。

我懂了：

```
 //facebook app id
var mis_amigos_id = new Array();
var mis_amigos_name = new Array();
appid='512456102098788';
channelurl='www.astrophilia.com.ar/facebook-load-friends/includes/channel.html';

//function to get current userid
function getUser()
{
    FB.init({
        appId      : '512456102098788', // App ID
        channelUrl : 'www.astrophilia.com.ar/facebook-load-friends/includes/channel.html', // Channel File
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
    });
    //check current user login status
    FB.getLoginStatus(function(response) {
        if (response.status === 'connected') {
            loadFriends();
        } else {
            //user is not connected.
            FB.login(function(response) {
                if (response.authResponse) {
                    loadFriends();
                } else {
                    alert('User cancelled login or did not fully authorize.');
                }
            });
        }
    });
}

//funcion que carga amigos, this function load the friends
function loadFriends()
{
    //i think this is a json objet with all the data
    FB.api('/me/friends', function(response) {
        console.log(response);
        var divContainer=$('.facebook-friends');
        //this for sees all friends
        for(i=0;i<response.data.length;i++)
            {
                mis_amigos_id[i] = response.data[i].id;
                mis_amigos_name[i] = response.data[i].name;
                document.write(mis_amigos_name[i]+" tiene el id "+mis_amigos_id[i]+"</ br>");

                // original code: creates a img element: response.data.id is the id of the current friend
                                                                                                                                                                                 //$(document.createElement("img")).attr({ src: 'https://graph.facebook.com/'+response.data[i].id+'/picture', title: response.data[i].name ,onClick:'alert("You poked "+this.title);'})
                                                                                                                                                                                 //apend to div container. osea que imprime la imagen en el div.
               // .appendTo(divContainer);       
            }
    });
}

//start from here
$(document).ready(function(){
    $('.load-button').click(function(){
        getUser();
    });
}); 
```

document.write 有问题。而且我不确定保存 id 和 name 的两个数组是否正常工作。我不知道如何获得共同的朋友和地理位置

这是在线版本：[www.astrophilia.com.ar](http://www.astrophilia.com.ar)

# javascript - navigator.geolocation.watchPosition 只是不工作

> ID：13611316
> 
> 赞同：10
> 
> 时间：2012-11-28T17:48:56.957
> 
> 标签：javascript, geolocation, w3c-geolocation

好的，我的代码在下面，所以我将解释我在做什么以及我得到的结果。

我正在尝试使用 navigator.geolocation.watchPosition 获取用户位置。我已经指定了成功和错误回调。我第一次获得位置时通常非常不准确，因此我使用 watchPosition 继续获得位置，直到尝试 4 次或获得精确到 500 米以内的位置。

我遇到的问题：

*   它永远不会进入 android 的错误回调（在 HTC Sensation 和三星 Galaxy S3 上测试）。然而，在 iPhone 上，它似乎有超过 50% 的时间进入错误回调。

*   它也永远不会超时。它只是继续搜索，直到收到位置。

*   检索位置需要 0-60 秒之间的任何时间。有时它在页面加载完成之前就有它，有时它需要一分钟的大部分时间。也没有可辨别的模式来解释为什么它有时会很快，而为什么其他时候不能。

我搜索了许多论坛帖子和许多 stackoverflow 问题以及地理位置规范和任何其他文档。关于它的信息并不多，更不用说这些问题了。有什么我做错了吗？或者这只是与位置合作的本质？

```
if(navigator.geolocation){
        var geo_count = 0;

        var wpid = navigator.geolocation.watchPosition(success, error, {
            enableHighAccuracy: true, 
            maximumAge: 0, 
            timeout: 10000
        });

        function success(position){
            alert(position.coords.accuracy)

            geo_count = geo_count + 1;

            if(position.coords.latitude && position.coords.longitude && position.coords.accuracy < 500){
                navigator.geolocation.clearWatch(wpid); 

                alert('position obtained!');    
            }
            else if(geo_count > 4){
                navigator.geolocation.clearWatch(wpid);

                alert('inaccurate position obtained');
            }
        }

        function error(error){
            switch(error.code){
                case 1:
                    alert('permission denied');
                    break;
                case 2:
                    alert('position unavailable');
                    break;
                case 3:
                    alert('timeout');
                    break;
                default:
                    alert('unknown error');
                    break;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-27T21:51:45.163

我建议检查使用：

```
if (typeof navigator.geolocation === 'object' && typeof navigator.geolocation.watchPosition === 'function') {
    ...
} 
```

“Geolocation.watchPosition() 方法用于注册一个处理函数，该处理函数将在每次**设备位置发生变化**时自动调用。您还可以选择指定一个错误处理回调函数。”

也许它不会触发，因为位置仍然相同？^^

尝试使用带有 Interval 或 Webworker 的 Geolocation.getCurrentPosition() 对其进行调试：[https ://developer.mozilla.org/en-US/docs/Web/API/Geolocation](https://developer.mozilla.org/en-US/docs/Web/API/Geolocation)

祝你好运

# ruby - 将数组数值映射到 Ruby 中的特定间隔

> ID：13611318
> 
> 赞同：-1
> 
> 时间：2012-11-28T17:48:58.920
> 
> 标签：ruby, multidimensional-array

我想将多维数组的数字元素映射到特定间隔，我将展示一个示例：

原始数组：

```
arr = [[-30,2,-1],[0,3,-20],[1,20,7],[40,60,50]] 
```

我想将数组的值映射`arr`到 0 到 255 之间的间隔

结果数组：

```
arr_result = [[0, 18, 10], [5, 20, 2], [200, 255, 220]] 
```

我的原始数组的最小值`arr[0][0] = -30`现在是`0`，我的最大值`arr[3][1] = 60`现在是`255`，然后其他值切换到我的最小值和最大值之间的数字`0 and 255`

有小费吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T18:45:18.797

```
xss = [[-30, 2, -1], [0, 3, -20], [1, 20, 7], [40, 60, 50]]
min, max = xss.flatten(1).minmax
factor = 255.0 / (max - min)
yss = xss.map { |xs| xs.map { |x| (factor * (x - min)).round } }
#=> => [[0, 91, 82], [85, 94, 28], [88, 142, 105], [198, 255, 227]] 
```

# c# - Windows 手机直播背景

> ID：13611322
> 
> 赞同：1
> 
> 时间：2012-11-28T17:49:13.647
> 
> 标签：c#, windows-phone-8

我想要做的是我的tic tac toe主菜单的实时背景，它应该将Xs和Os随机放在任何按钮中发生的情况是程序只是冻结并且当我尝试跟踪它时，调度程序内的代码永远不会被执行

```
public partial class MainPage : PhoneApplicationPage
{
    Random random;
    private Button[] bts;
    private int counter;

    public MainPage()
    {
        InitializeComponent();
        counter = 0;
        bts = new[] { _1, _2, _3, _4, _5, _6, _7, _8, _9 };
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        NavigationService.Navigate(new Uri("/Page1.xaml", UriKind.Relative));
    }

    private void Button_Click_2(object sender, RoutedEventArgs e)
    {
        NavigationService.Navigate(new Uri("/Page3.xaml", UriKind.Relative));
    }

    private void About_Click(object sender, RoutedEventArgs e)
    {
        NavigationService.Navigate(new Uri("/Page4.xaml", UriKind.Relative));
    }

    private void form_Loaded(object sender, RoutedEventArgs e)
    {
        random = new Random();
        while (true)
        {
            Dispatcher.BeginInvoke(()=>
            {    
                bts[random.Next() % 9].Content = (counter % 2 == 0) ? "O" : "X";
                counter++;
            });
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:51:55.490

```
while (true) Dispatcher.BeginInvoke(...); 
```

这是一个无限循环；它会永远冻结你的程序。（实际上，直到它在调度程序队列中耗尽内存）

不要那样做。

# python - Python Tk 画布项目事件绑定：在多个项目上迭代绑定

> ID：13611323
> 
> 赞同：1
> 
> 时间：2012-11-28T17:49:17.843
> 
> 标签：python, event-handling, tkinter, tk, python-2.x

我正在尝试使用 Python 对象作为 Tk 画布项目的包装器。例如：

```
class PlayingCard:
    def __init__(self, item):
        self.item = item

aceOfSpades = PlayingCard(canvas.create_image((coordinates), image = PhotoImage(aceofspades.gif)))
print aceOfSpades.item
>>> <canvas item id> 
```

这样，如果我需要操作一个画布项，我可以通过一个对象来引用它：

```
aceOfSpades.item.move(dx, dy) 
```

所以，问题是我有很多对象（实际上是 52 个），每个对象都有自己的 self.item 引用画布图像项，我想遍历对象并为其画布项创建事件绑定如果对象满足一定条件。这是我的解决方案（伪 pycode）：

```
def event_handler(card):
    card.attribute = updated_value

for card in [list of card objects]:
    if card.attribute == test_condition:
        canvas.tag_bind(
            card.item, #this is the item id stored in the PlayingCard.item variable
            <Event Sequence>,
            lambda x: event_handler(card)
            ) 
```

问题是，在迭代完成后，所有事件绑定都将相同的参数传递给事件处理程序。

换句话说，我想将卡片对象作为参数传递给事件处理程序，这样当卡片的 object.item 画布项对应的事件发生时，事件处理程序就可以访问卡片对象。但是，此代码所做的是将相同的参数（即卡片对象）传递给事件处理程序，而不管画布项如何。在代码中，这意味着如果事件序列是单击，则单击任何卡片画布项都会调用该函数`event_handler(<last card object in iteration>)`，而我希望单击画布项来调用`event_handler(<corresponding card object>)`.

我说得有道理吗？我不明白为什么这种方法不能产生我想要的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:07:49.733

在函数中使用具有默认值的可选关键字参数`lambda`。默认值在定义 lambda 时绑定到 lambda，因此在`lambda`,`card`中是一个局部变量，每个 lambda 将具有不同的默认值`card`。

如果没有默认值，则在`lambda`调用函数时，将`card`使用[LEGB 规则](https://stackoverflow.com/questions/291978/short-description-of-python-scoping-rules)查找 的值——在本地范围内查找，然后是扩展范围，然后是全局范围，然后是内置范围。由于它没有在本地范围内定义，它会在扩展范围（包含 的范围`for card in [list of cards]`）中找到它。在那里，`card`引用最后一张卡片`list of cards`。这就是为什么所有点击事件都会影响相同的`card`.

```
for card in [list of card objects]:
    if card.attribute == test_condition:
        canvas.tag_bind(
            card.item, #this is the item id stored in the PlayingCard.item variable
            <Event Sequence>,
            lambda x, card = card: event_handler(card)
            ) 
```

# jquery - 将图像动态加载到 Vegas 全屏背景图像插件中

> ID：13611324
> 
> 赞同：0
> 
> 时间：2012-11-28T17:49:21.967
> 
> 标签：jquery, image, wordpress, background

我正在尝试动态加载图像 ::: 在 WordPress 中有以下代码 :::

这就是我计划获取图像数据的方式:::

```
//For Demo I'm simulating some data
$url = 'http://localhost/lolo-wp/wp-content/uploads/2012/10/image_02.jpg,http://localhost/mocha/wp-content/uploads/2012/11/image_02.jpg';

$urls = explode(',', $url);

    if( is_array($urls) ) {

      // $vega_bg ='';
      foreach( $urls as $url ) {
         $vega_bg[] = "{ src:'{$url}' }";
      }
    } 
```

本地化我想发送到维加斯的所有属性 :::

```
// Localization 
wp_localize_script( 'vegas_init', 'vegassettings', array(
  'delay' => 5000,
  'fade'  => 1000,
  'backgrounds' => $vega_bg
)); 
```

我的维加斯初始化 :::

```
vega_delay = parseInt(vegassettings.delay);
vega_fade = parseInt(vegassettings.fade);
vega_bg = vegassettings.backgrounds;

vega_att = {
    fade:vega_fade,
    delay:vega_delay,
    backgrounds:[ vega_bg ]
};

jQuery(document).ready(function($){

          jQuery.vegas('slideshow', 
            vega_att
          )
          ('overlay');

        function preloadImg(imgPath) {
          preloadImg = new Image();
          preloadImg.src = imgPath;
        } 

}); //Doc load 
```

这不起作用 ::: 但是，如果我 alert(vega_bg) 我得到以下**vega_bg = { src:'http://localhost/mocha/wp-content/uploads/2012/11/image_01.jpg' },{ src :'http://localhost/lolo-wp/wp-content/uploads/2012/10/image_02.jpg' },**

如果我`vega_att`用上面复制的字符串替换一切正常 ::: 任何帮助将不胜感激 :::

这是我的 HTML ::: 中的初始化输出

```
/* <![CDATA[ */
var vegassettings = {"delay":"5000","fade":"1000","backgrounds":["{ src:'http:\/\/localhost\/lolo-wp\/wp-content\/uploads\/2012\/10\/slider-02.jpg' }","{ src:'http:\/\/localhost\/mocha\/wp-content\/uploads\/2012\/11\/hdr-076.jpg' }"]};
/* ]]> */ 
```

我怀疑我的问题与反斜杠有关:::

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:08:11.960

我无法让我的实现工作::: 但是我找到了另一个具有合理解决方法的帖子，我继续实施了这个帖子选项，它运行得非常好 [Stackoverflow Post](https://stackoverflow.com/questions/11342823/image-gallery-fullscreen-images-vegas-slideshow)

# sorting - 批处理文件移动取决于文件名

> ID：13611325
> 
> 赞同：0
> 
> 时间：2012-11-28T17:49:26.423
> 
> 标签：sorting, batch-file

我在 .txt 文件中收集了 35k 歌词。它们都在一个文件夹中。有没有办法将它们全部排序在单独的文件夹中（例如按艺术家姓名）

这是一个屏幕截图，它看起来如何。

[http://my.jetscreenshot.com/201/20121128-mrwo-76kb](http://my.jetscreenshot.com/201/20121128-mrwo-76kb)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:00:24.533

你不能没有错误地做到这一点，当你分割文件名时，你认为系统如何知道艺术家或标题名称是什么？

例如 **A-HA - 我的歌曲** 有 3 个**-**然后“ **A** ”成为艺术家，**HA-我的歌曲**成为歌曲标题。

所以不可能100%准确，需要人工维修。

PS：对不起我的英语。

试试这个：

```
@Echo OFF

:: By Elektro H@cker

FOR %%@ IN (*) DO (
    Set "Filename=%%@"
    Call :Split "%FILENAME%"
    CMD /C "If not "%%Last_artist%%" EQU "%%artist_name%%" (ECHO Processing: "%%artist_name%%")"
    Call MKDIR "%%artist_name%%" 2>NUL
    Call COPY /Y "%%artist_name%%*" "%%artist_name%%\" >NUL
    Call Set "Last_artist=%%artist_name%%"
)
Pause&exit

:SPLIT
SET "title_name=%FILENAME:*-=%"
CALL SET "artist_name=%%Filename:%title_name%=%%"
CALL SET "artist_name=%%artist_name:~0,-1%%"
IF "%artist_name:~-1%" EQU " " (CALL SET "artist_name=%%artist_name:~0,-1%%")
GOTO:EOF 
```

示例输出：

```
Processing: "Flyleaf"
Processing: "Flyleaf Vs. The Legion Of Doom"
Processing: "Folk Implosion"
Processing: "Foo Fighters"
Processing: "For All Those Sleeping"
Processing: "Foster The People"
Processing: "Four Year Strong"
Processing: "Franco & Oscarcito"
Processing: "From First To Last"
Processing: "Fuel"
Processing: "Full Blown Rose"
Processing: "Funeral For A Friend"
Processing: "Further Seems Forever"
Processing: "Garbage"
Processing: "Gemini"
Processing: "Georgina"
Processing: "Get Scared" 
```

# primefaces - 表单的 Rendered 属性导致 Ajax 问题

> ID：13611331
> 
> 赞同：1
> 
> 时间：2012-11-28T17:49:47.737
> 
> 标签：primefaces

我有一个奇怪的问题。我正在尝试将多个表单放在模态对话框上，并且基于标志一次只能看到一个表单，并根据用户操作动态地从一个表单切换到另一个表单。问题是通过向表单添加渲染属性会导致 Ajax 事件无法调用支持 bean 中的服务器端方法。

以下表单和支持 bean 是简化的副本，但它演示了问题。基本上，如果从 h:form id="form2" 中删除了 render="#{requestScope.shouldRender}" 并且当您在文本字段中输入时，一切都会按预期工作，并且文本将显示在控制台上。如果将 render="#{requestScope.shouldRender}" 添加到 h:form id="form2" 组件，则根本不会调用该方法。

环境为：Primefaces 3.3 Spring 3.0 Websphere server 7

这是一个带有渲染属性的示例表单（删除以使其正常工作）：

```
 <h:body>
        <h:form id="form1">
              <p:commandButton id="showButton" value="Show" update=":panel1">
                    <f:setPropertyActionListener value="#{true}"
                          target="#{requestScope.shouldRender}" />
              </p:commandButton>
        </h:form>

        <p:outputPanel id="panel1">
              <h:form id="form2" rendered="#{requestScope.shouldRender}">
                    <p:inputText id="fn" value="#{testBean.fn}">
                          <p:ajax event="keyup" listener="#{testBean.valueChangeListener}" />
                    </p:inputText>
              </h:form>
        </p:outputPanel>
  </h:body> 
```

这是一个小支持豆：

```
 @Component
    @Scope("request")
    public class TestBean {
  private String fn;

  public void setFn(String fn) {
        this.fn = fn;
  }

  public String getFn() {
        return fn;
  }

  public void valueChangeListener() {
        System.out.println(fn);
  } 
```

}

# c - 用 char 缓冲区播种随机数

> ID：13611335
> 
> 赞同：1
> 
> 时间：2012-11-28T17:49:59.903
> 
> 标签：c, hash, random

我需要从字符串的散列生成种子。这个种子将用于生成随机数，我可能会使用 srandom()，但是这个函数不将 char 缓冲区作为参数，它需要一个整数。有什么方法可以使用 char 缓冲区播种 srandom，或者有任何其他方法可以从哈希键生成 int 种子。希望你能帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:57:22.033

将字符串解析为您要查找的数字吗？如果是这样，试试这个：

```
char buf[] = "12345678";
int number = strtol(buf, NULL, 10);
srand(number); 
```

编辑：根据您的评论：

> 我正在使用 MD5 对其进行哈希处理

你想取回你散列的值吗？那么你就错过了散列的基本概念。您无法从散列中取回散列值，这就是重点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:00:35.220

由于您到目前为止没有发布任何代码，因此我在这里做一些假设。

```
char *strHash = "ABCD1234"; // could be anything, i.e. "HelloWorld!"

int intNumberFromHash = 0;
for(int intCurrentCharacter = 0; strHash[intCurrentCharacter] != '\0'; intCurrentCharacter++){
    intNumberFromHash <<= 8; // effectively multiply by 256
    intNumberFromHash += strHash[intCurrentCharacter];
}

srandom(intNumberFromHash); 
```

此代码将从“字符串”生成“数字”。然而，它不是很聪明（即它会经常溢出，最后只有最后四个字符真正做任何事情）。如果哈希是十六进制值，您可能想要做这样的事情。

```
sscanf(theHash,"%x",number);
srandom(number); 
```

该`%x`修饰符会将十六进制值转换为小写值（即“abcd1234”）。`%X`将做大写十六进制（“ABCD1234”）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T18:30:49.917

```
char *hashKey = "helloWorld!"; /* your Hash pointer */

int intHash = 0;
int hashCarry = 0;
for(int i = 0; hashKey[i] != '\0'; i++){

    intHash ^= hashKey[i];  // XORing with current character

    hashCarry = intHash & 0xF0000000; /* getting 4 bits - MSBs */

    intHash <<= 4; // Multiplying it by 16 

    intHash += hashCarry >> 28; /* e.g 0xF0000000 becomes 0x0000000F */
}

srandom(intHash); 
```

希望这可以帮助...

上面的代码不会破坏您的任何 HashKey 位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T21:27:20.857

您可以使用 initstate(3)，还是我错过了什么？

# c++ - 错误：从“const char*”到“char”的无效转换

> ID：13611336
> 
> 赞同：-8
> 
> 时间：2012-11-28T17:50:01.167
> 
> 标签：c++

这是在linux上顺便说一句...

我从我的代码中收到此错误

```
m-server.cpp: In function âvoid* SocketHandler(void*)â:
m-server.cpp:187: error: invalid conversion from âcharâ to âconst void*â
m-server.cpp:187: error:   initializing argument 2 of âssize_t send(int, const void*, size_t, int)â 
```

给出错误的部分：

```
char welcomemsg;

cout << "Set the welcome message: ";
cin >> welcomemsg;

//send initial welcome data || msg & src
send(*csock, welcomemsg, sizeof(welcomemsg), 0); //this is line 187 
```

* * *

**更新**

我改变了主意，而不是 cIN 然后 msg，我只想像下面的代码一样设置它。

我从我的代码中收到此错误

```
m-server.cpp: In function âvoid* SocketHandler(void*)â:
m-server.cpp:181: error: invalid conversion from âconst char*â to âcharâ
m-server.cpp:230: error: jump to label âFINISHâ
m-server.cpp:177: error:   from here
m-server.cpp:181: error:   crosses initialization of âchar welcomemsgâ
m-server.cpp:230: error: jump to label âFINISHâ
m-server.cpp:161: error:   from here
m-server.cpp:181: error:   crosses initialization of âchar welcomemsgâ
m-server.cpp:230: error: jump to label âFINISHâ
m-server.cpp:149: error:   from here
m-server.cpp:181: error:   crosses initialization of âchar welcomemsgâ 
```

给出错误的部分：

```
char welcomemsg = "@hello_! bro?"; //can allow symbols? 

//send initial welcome data || msg & src
send(*csock, (void *)&welcomemsg, sizeof(welcomemsg), 0); 
```

我是 C++ 新手，这里有什么问题？怎么修？其背后的原因是什么？

* * *

**更新**

我将其更改为此服务器后，服务器没有任何错误。

```
char *welcomemsg = "hello";

//send initial welcome data || msg & src
send(*csock, welcomemsg, sizeof(welcomemsg), 0); 
```

但是现在客户端在收到欢迎消息时崩溃了。为什么？
这是我与服务器一起使用的代码，客户端正在阅读欢迎消息。

```
send(*csock, "Hello_Word", 10, 0); //was a working code 
```

* * *

**更新**

我已经检查并且客户端在 recv() 上崩溃了
此代码与所有建议有什么区别？为什么这段代码在没有崩溃客户端的情况下运行良好？

```
send(*csock, "Temporarily Offline_Server will open sockets on Jan. 14, 2013", 61, 0); //was a working code 
```

* * *

**更新**

我的 recv() 代码：

```
response = "";
resp_leng= BUFFERSIZE;
while (resp_leng == BUFFERSIZE)
{
    resp_leng= recv(sock, (char*)&buffer, BUFFERSIZE, 0);
    if (resp_leng>0)
        response+= string(buffer).substr(0,resp_leng);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:57:49.830

尽管在其他答案中有所说明，但`[const] void *`完全没有必要显式转换为类型。但是，`welcomemsg`确实需要获取对象的地址

```
send(*csock, &welcomemsg, sizeof welcomemsg, 0); 
```

以上将修复编译器错误。

但是，我猜这个问题实际上具有不同的性质。您是否打算让您的“欢迎信息”仅包含一个字符？您的`welcomemsg`变量被声明为单个字符。如果您希望它比一个字符更长，那么您应该将它声明为一个数组

```
char welcomemsg[100]; // for example 
```

在这种情况下，这`&`将变得不必要

```
send(*csock, welcomemsg, sizeof welcomemsg, 0); 
```

但是，在这种情况下（如果您要发送一个字符串），您必须确定您要发送的确切内容。您可以发送整个数组对象，即`sizeof welcomemsg`如上例中的字节。或者您可以只发送字符串的重要字符，即`strlen(welcomemsg)`字节（或`strlen(welcomemsg) + 1`字节），如

```
send(*csock, welcomemsg, strlen(welcomemsg), 0); 
```

如果消息表示为

```
const char *welcomemsg = "some message"; 
```

您将不得不使用后一种变体。

但是当你发送这样的字符串时，具有运行时长度，接收该字符串的问题变得更加复杂。接收代码如何知道要接收多少字节？通常，人们会先发送长度，然后再发送实际的字符串数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:08:28.903

让我解决我看到的一些错误。

```
char *welcomemsg = "hello";
send(*csock, welcomemsg, sizeof(welcomemsg), 0); 
```

`sizeof(welcomemsg)`将返回指针的大小。我相信您实际上想要发送字符串，而不是指向它的指针（这在接收方没有意义）。您可能希望将其设置为`strlen(welcomemsg)+1`. 请注意，发送字符串结尾字符需要 +1！

```
send(*csock, "Hello_Word", 10, 0); //was a working code 
```

如果它奏效了，你很幸运。您要发送`{'H','e','l','l','o','_','W','o','r','d','\0'}`的内容由 11 个字节组成，而不是 10 个字节。如果接收器后面已经有 0，它可以正常工作，但其他任何事情很可能会导致接收器端崩溃。

为了减轻计算不同字符串（文字或非文字）的痛苦，您可以实现一个简单的包装函数：

```
void sendString(int socket_descriptor, const char* str) {
    send(socket_descriptor, str, strlen(str)+1, 0);
} 
```

只要`str`是正确的以空字符结尾的 C 字符串，这应该可以工作。

* * *

我强烈建议您在尝试通过网络发送它们之前，稍微玩一下 C 字符串，了解它们的功能，如何在函数之间传递它们等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T17:52:23.560

`send`期望一个 void 指针作为它的第二个参数：`send(int, const void*, size_t, int)`

将您的代码更改为：

```
send(*csock, (void *)&welcomemsg, sizeof(welcomemsg), 0); 
```

表示法`&`获得 的地址`welcomemsg`。该`(void *)`部分不是必需的，但它将地址从指向 char 的指针转换为 void 指针。

* * *

**更新的问题：**如果你想使用：

```
char welcomemsg = "hello";

//send initial welcome data || msg & src
send(*csock, (void *)&welcomemsg, sizeof(char) * 6, 0); 
```

然后您需要将其更改为：

```
char *welcomemsg = "hello";

//send initial welcome data || msg & src
send(*csock, welcomemsg, strlen(welcomemsg), 0); 
```

由于`welcomemsg`现在是指向字符数组“hello”开头的指针，因此已经有一个地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T17:52:32.880

那应该是`send(*csock, (void *)&welcomemsg, sizeof(welcomemsg), 0);`

# haskell - 从类型类 Num 的值构造 Double 变量

> ID：13611340
> 
> 赞同：0
> 
> 时间：2012-11-28T17:50:16.133
> 
> 标签：haskell

我想知道是否可以返回包含使用 Num 类型的变量构造的 Double 变量的结果。举个例子：

```
dist :: (Graph g n e, Ord n, Num e) => g -> n -> n -> [Double]
dist graph n1 n2 = loop (nodes graph) where
    loop []            = []
    loop nodes = [n'] ++ loop (tail nodes) where
        n' = if (getDist (head nodes)) == 0) then 1/0 else (getDist (head nodes)) + 1  --1/0 = infinity 
```

我正在考虑一个类似于 toFractional 的函数，以始终从 if 语句中提供双精度

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T18:05:43.190

该类`Num`包含许多无法合理转换为 的内容`Double`，例如复数和其他内容。如果您将其缩小到`Real`班级，则可以使用[`realToFrac`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:realToFrac).

# debugging - 如何将 cuda-gdb 与使用 nvcc 编译的静态库的 g++ 链接程序一起使用？

> ID：13611342
> 
> 赞同：0
> 
> 时间：2012-11-28T17:50:27.720
> 
> 标签：debugging, cuda, g++, nvcc, cuda-gdb

我正在为 g++ 链接项目开发一个 nvcc 编译的静态库。如何在最终的可执行文件上使用 cuda-gdb？我得到的只是“程序正常退出”，没有任何 printf 输出或任何东西。

在编译静态库时，肯定会为 nvcc 提供 -g -G 参数。

这是我的命令行缓冲区：

```
cuda-gdb /home/sean/cuda-workspace/cudasplat/Debug/cudasplat 
NVIDIA (R) CUDA Debugger
5.0 release
Portions Copyright (C) 2007-2012 NVIDIA Corporation
GNU gdb (GDB) 7.2
Copyright (C) 2010 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-unknown-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from /home/sean/cuda-workspace/cudasplat/Debug/cudasplat...done.
(cuda-gdb) set args -t a1-31 a2-31 a3-31 a4-31 -L 30 -o tx_coverage -d /var/www/userman/plot-temp/ -db -85 -ngs -dbm -R 20
(cuda-gdb) run
Starting program: /home/sean/cuda-workspace/cudasplat/Debug/cudasplat -t a1-31 a2-31 a3-31 a4-31 -L 30 -o tx_coverage -d /var/www/userman/plot-temp/ -db -85 -ngs -dbm -R 20
[Thread debugging using libthread_db enabled]
Exiting...

Program exited normally.
(cuda-gdb) 
```

这是在没有调试的情况下通常会发生的情况：

```
/home/sean/cuda-workspace/cudasplat/Debug/cudasplat -t  a1-31 a2-31 a3-31 a4-31 -L 30 -o tx_coverage -d /var/www/userman/plot-temp/ -db -85 -ngs -dbm -R 20
            --==[ Welcome To CUDASPLAT! HD v1.4.0a ]==--

Loading "51:52:113:114-hd.sdf" into page 1... Done!
Loading "50:51:113:114-hd.sdf" into page 2... Done!
Loading "50:51:114:115-hd.sdf" into page 3... Done!
Loading "51:52:114:115-hd.sdf" into page 4... Done!
copying 444 mb into device memory (3878 mb free)
finished copy
min_north 50, max_north 52, min_west 113, max_west 115
allocated antenna memory
invalid argument in ../cudapath.cu at line 551 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:08:36.057

1.  您应该在发出运行命令之前设置断点。
2.  您的应用程序是否执行正确的错误检查？请注意，cuda-gdb 可能会“隐藏”用于渲染操作系统图形界面的 GPU。例如，如果您有一个 GPU 系统并在窗口环境（例如 GTK 或 KDE）中从 cuda-gdb 运行 CUDA 应用程序，您的应用程序可能会失败，因为不会检测到 GPU。

# javascript - 绝对 div 元素的 Javascript 和 CSS 比例

> ID：13611345
> 
> 赞同：2
> 
> 时间：2012-11-28T17:50:30.950
> 
> 标签：javascript, css, transform, scale

使用变换比例时，我在定位绝对 div 相对于另一个绝对 div 时遇到了一些问题。

首先，我有一个位于屏幕底部的页脚（window.innerHeight - footer_height），然后我在页脚上方有另一个更大的 div，我想将其定位在页脚的边缘。((window.innerHeight - footer_height)-largediv_height)

这工作正常，直到我尝试设置较大 div 的变换比例。div 的原点在中间，因此顶部和底部的大小增加相同。这样 div 将被页脚部分隐藏。

如何补偿 y 轴上增加的比例？

我创建了一个小提琴作为示例。调整窗口的高度并查看结果。我想做的是使缩放的 div 的底部与页脚的顶部保持一致。有什么建议么？

[http://jsfiddle.net/pdjrz/30/](http://jsfiddle.net/pdjrz/30/)

Javascript

```
function init()
{
    scalediv = document.getElementById("scalediv");
    footer = document.getElementById("footer");
    window.addEventListener("resize", onRezise, false);
}

var onRezise = function()
{
    scale = (window.innerHeight - 33) / 251;
    w = window.innerWidth;
    h = window.innerHeight;

    footer.style.width = w+'px';
    footer.style.top = (h-33)+'px';

    scalediv.style['MozTransform'] = 'scale('+scale+','+scale+')';

    scalediv.style.top = ((h-33)-(400))+ 'px';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:28:14.840

如果您希望页脚位于 scalediv 下方，请将其放在 scalediv 内并将其放置在 scalediv 的底部。并在具有页脚高度的 scalediv 上制作填充底部。

[http://jsfiddle.net/pdjrz/32/](http://jsfiddle.net/pdjrz/32/)

```
#scalediv{padding:0 33px 0 0;}
#footer{bottom:0;}
<div id="scalediv">
    <div id="footer"></div>
</div> 
```

# ruby-on-rails - 如何在工厂内部传递值？

> ID：13611348
> 
> 赞同：0
> 
> 时间：2012-11-28T17:50:35.677
> 
> 标签：ruby-on-rails, factory-bot

对于每个`User`工厂，我需要创建一个`Photo`从磁盘加载图像的嵌套。我想知道如何通过简单地将文件名声明为用户工厂的属性来简化此代码。

这段代码也有问题，将 :women 工厂文件名保存为`avatar1.jpg`而不是`avatar2.jpg`，可能是因为第一个用户之后。

```
FactoryGirl.define do
  factory :user do
    email 'john@site.com'
    country 'US'

    after(:create) do |user, evaluator|
      photo_file = 'avatar1.jpg'
      photo_object = File.new(File.join(::Rails.root.to_s, "/factories/images", photo_file), 'rb')
      user.photos << FactoryGirl.build(:photo, photo: photo_object, user: user)
      user.avatar_id = user.photos.first.id
      user.save
    end

    factory :woman do
      email 'annie@site'
      after(:create) do |user, evaluator|
        photo_file = 'avatar2.jpg'
        photo_object = File.new(File.join(::Rails.root.to_s, "/factories/images", photo_file), 'rb')
        user.photos << FactoryGirl.build(:photo, photo: photo_object, user: user)
        user.avatar_id = user.photos.first.id
        user.save
      end
    end

  end
end 
```

这是模型关系

```
# user.rb
has_many :photos, dependent: :destroy

# photo.rb
belongs_to :user 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:39:43.660

作为关于如何更好地组织代码的建议，您应该将文件读取逻辑移至`Photo`模型本身。例如：

```
class Photo < ActiveRecord::Base
  attr_accessor :filename

  after_initialize do |p|
    if filename
      p.photo = File.new(File.join(::Rails.root.to_s, filename), 'rb')
    end
  end
end 
```

然后你可以使用[特征](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#traits)来创建男性和女性用户，使用`create(:user, :male)`和`create(:user, :female)`如下：

```
FactoryGirl.define do
  factory :user do
    country 'US'

    ignore { photo_count 1 }    # ignored attribute - number of photos to build per user

    trait :male do
      email 'john@site.com'

      after(:create) do |user, evaluator|
        create_list(:photo, evaluator.photo_count, :male, user: user)
      end
    end

    trait :female do
      email 'annie@site.com'

      after(:create) do |user, evaluator|
        create_list(:photo, evaluator.photo_count, :female, user: user)
      end
    end
  end

  factory :photo do
    trait :male do
      filename '/factories/images/avatar1.jpg'
    end

    trait :female do
      filename '/factories/images/avatar2.jpg'
    end

    user # the user to be associated with the photo
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:01:00.980

不完全是一个优雅的解决方案，但可以快速解决

```
user.avatar_id = user.photos.last.id 
```

# ruby-on-rails - ThinkingSphinx & Rails 3 - 如何在模型中创建虚拟属性以进行跨模型搜索？

> ID：13611349
> 
> 赞同：1
> 
> 时间：2012-11-28T17:50:42.483
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sphinx, thinking-sphinx

我有大约 9 个模型（更多即将推出），目前每个模型都具有共同和独特的 sphinx 属性 - 这些属性用作过滤器并且不需要可搜索。

这是我的一些模型的示例，它说明了这个问题：

```
class Ad
  belongs_to :categories

  define_index('ad') do
    has categories.name, :as => :category_name_tags, :facet => true, :type => :string
  end
end

class User
  belongs_to :region
  define_index('ad') do
    #psudocode below 
    has "(SELECT name from categories)", :as => :category_name_tags, :facet => true, :type => :string
  end
end 
```

这样我就可以这样搜索：

```
results = ThinkingSphinx.search "red car", :with => { :category_name_tags => "autos" }, :classes => [Ad, User] 
```

我所有的非广告模型都需要定义一个“category_name_tags”属性，该属性将匹配用户在搜索时指定的任何“category_name_tags”过滤器——换句话说，这些是应该始终匹配所有特定过滤器的虚拟属性——它们对大多数人来说是被动的模型，我想这样做是因为如果我的模型中不存在这些属性，则不会返回该模型的结果。

注意：我无法修改客户端使用的数据模型。

# richfaces - Richfaces 防止在表格上选择行

> ID：13611351
> 
> 赞同：1
> 
> 时间：2012-11-28T17:50:55.300
> 
> 标签：richfaces

我是富面孔的初学者，我有一个带有多行选择的扩展数据表。我需要在限制为 5 个选择之后停止用户选择行。哪种方法最干净？谢谢！

# mysql - 使用来自 Xampp 的 mysql 进行 java jdbc 程序

> ID：13611352
> 
> 赞同：3
> 
> 时间：2012-11-28T17:50:59.313
> 
> 标签：mysql, netbeans, jdbc, connectivity, xampp

我在我的电脑上安装了带有 mysql 数据库的 Xampp。现在我希望将这个 mysql 数据库用于我的 java JDBC 程序。为此，我编写了以下程序。

```
package mysqltype4driverdemo;

import java.sql.*;
import java.util.*;

public class MysqlType4DriverDemo {

    public static void main(String[] args)throws SQLException {
        String url="jdbc:mysql://localhost:3306/mysql";
        Properties prop=new Properties();
        prop.setProperty("user","root");
        prop.setProperty("password","");
        Driver d=new com.mysql.jdbc.Driver();
        Connection con = d.connect(url,prop);
        if(con==null)   {
            System.out.println("connection failed");
            return;
        }
        DatabaseMetaData dm =con.getMetaData();
        String dbversion=dm.getDatabaseProductVersion();
        String dbname=dm.getDatabaseProductName();
        System.out.println("name:"+dbname);
        System.out.println("version:"+dbversion);

    }
} 
```

但它说“包com.mysql.jdbc”不存在。PS：我在 windows XP 平台上使用 netbeans 7.2.x IDE

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T20:20:28.530

看来您可能已经尝试将库放在全局 CLASSPATH 上。对于 Netbeans 项目，这并不完全正确。您需要使用 Netbeans 的库工具将适当的库添加到项目中。

1.  ***在Projects*选项卡中**右键单击**项目的根节点。**
***   在弹出的上下文菜单中，单击*属性*（在菜单底部）。*   单击***类别***下的*库*： 。您应该看到以下屏幕： *![Netbeans 项目属性对话框：库](../Images/419a80c2a0e33904ba3da2ac7c142c2a.png)***   单击*添加库...*按钮。*   在*Global Libraries*下单击*MySQL JDBC Driver*，然后单击*Add Library*按钮。*   单击*确定*。***

 ***你应该很高兴。

如果您需要特定版本的驱动程序，您可以下载它，然后单击*Add Library...*后，您可以单击*Create...*将下载的版本添加到您的库存储库中。然后，您将从项目中删除默认的 JDBC 驱动程序，并添加包含特定版本的库。

我使用您的代码和一个新创建的项目自己尝试了这一点。不需要额外的导入，并且 Netbeans 发行版中包含的默认驱动程序应该足够好，除非您的项目需要特定版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T20:15:45.477

您需要从[这里](http://www.mysql.com/downloads/connector/j/)下载 mysql 的 JDBC 驱动程序。

下载后，将 jar 添加到您的类路径中，您应该一切顺利。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-31T02:41:31.380

或者，一旦您下载了驱动程序，您可以将它粘贴到您的 java 安装中 ...jre\lib\ext\

然后它将可用于您的所有具有默认 JRE 系统库的项目，您可以在创建新项目时对其进行验证。***

# php - 以不会让用户发疯的方式在数据库中存储长度或高度

> ID：13611353
> 
> 赞同：4
> 
> 时间：2012-11-28T17:51:00.390
> 
> 标签：php, database, wordpress

我们试图在数据库中存储诸如高度或长度之类的东西，例如英尺英寸。我无法找出存储干净数据的最佳方法，但管理界面用户也很容易使用。

### 例子

```
5' 7" 
```

我预计稍后我需要将其作为搜索结果功能的一部分进行排序，但以这种方式存储，它是一个字符串。

对我来说最合乎逻辑的是将值作为英寸（数字）存储在数据库中，但是对于将使用这个内容管理系统的人来说，计算转换为单个数值的工作量太大了。

还有人担心用户可能会通过以下几种方式输入它：

```
5' 7"

5'7"

5' 7''

5’ 7”

5‘ 7“ 
```

不要问为什么……我们都知道人们会做愚蠢的事情。

我们在[WordPress](http://wordpress.org/)之上使用[高级自定义字段](http://www.advancedcustomfields.com/)，所以我可以构建一个“长度”或“高度”字段类型以在这种情况下使用，它可以处理用户所需的任何计算，但我可能需要一个好的计划在尝试构建附加组件之前攻击解决方案。

绞尽脑汁想弄清楚如何最好地归档这些数据。任何解决方案表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T17:55:51.470

以英寸为单位存储。您可以允许用户单独输入（一个输入英尺，另一个输入英寸），这允许验证并消除数据输入问题，允许轻松正确排序（74“总是大于64”），并且可以轻松通过除法和模运算转换为英尺/英寸。（当存储为英寸时，您还可以更轻松地对它们进行数学运算 - 计算 60 和 74" 之间的差异比计算 5'0" 和 6'2" 之间的差异更容易。）

至于用户无法进行转换，不要要求他们这样做。您这样做 - 在存储在数据库中的过程中将英尺/英寸转换为英寸，然后将其转换回显示或允许编辑。

正如我所说，排序也容易得多。对数字进行排序始终使它们保持正确的顺序，而对字符值进行排序可能会导致问题。例如，数字排序总是正确地放在`10`之后`9`，而字符排序则放在`10`之后`1`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T18:06:39.567

让我们把它分成2块。第一个是关于用户如何输入数据，第二个是你将如何存储它。

**1 - 用户输入**
您可以提供单个字段并允许用户在预览时输入日期（使用不同的字符来识别英尺/英寸或英尺和英寸的不同字段，这将只接受数值。

**2 - 数据存储**
如果您只提供一个字段，我建议您解析和验证输入并将其保存为数值，以便您轻松订购，但每次您都需要将其从数字转换为英尺/英寸'将使用这些值。我的另一个建议是在您的表格中使用 2 个字段，以便您可以将提要存储在一个中，而将英寸存储在另一个中。这将允许您订购结果集，并且在需要使用它们时不会浪费处理器时间来转换值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-11T04:54:22.217

以最合乎逻辑的格式存储 - 厘米。英尺和英寸？！真的！

如果您的用户需要在前端查看英尺和英寸输入，请在存储到数据库之前转换为 cm。

所以使用这样的函数在前端显示

```
/**
 * Converts a height value given in cm to feet and inches
 *
 * @param int $cm
 * @return array
 */
public function convert_to_inches($cm) {
    $inches = round($cm * 0.393701);
    $result = [
        'ft' => intval($inches / 12),
        'in' => $inches % 12,
    ];

    return $result;
} 
```

然后在存储到数据库之前转换为 cm。

```
/**
 * Converts a height value given in feet/inches to cm
 *
 * @param int $feet
 * @param int $inches
 * @return int
 */
public function convert_to_cm($feet, $inches) {
    $inches = ($feet * 12) + $inches;
    return (int) round($inches / 0.393701);
} 
```

这样做的好处是您可以创建一个同时提供公制和英制的前端 UI - 因为，您知道，世界上大多数地方都使用公制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T17:56:42.733

您应该将该值规范化为数据库的标准格式。我建议使用厘米或毫米，因为它们比英制单位更适合算术，但这取决于你。

您应该构建一个函数，将（某种程度上）任意用户输入转换为这种标准化格式。比如说，一个将`5'7''`、或转换为厘米的函数。该功能应该接受合理数量的合理格式，无论您喜欢支持多少，并拒绝它无法识别的其他值。`5'7"``5' 7''``5' 7"`

然后将此标准化值存储在您的数据库中，并根据需要在输出时将其格式化为英尺/英寸。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T18:06:28.510

最合乎逻辑的做法是将值以毫米的形式存储在数据库中，一个字段用于宽度，另一个字段用于高度。

然后为 CMS 构建一个插件，它将输入数据（作为字符串）转换为 mms 中的相关浮点值以用于数据库插入......奇怪的是，我最近做了一些类似于一个小的 JavaScript“程序”来放置一个网站上的公制/英制计算器。

基本上，JS 获取用户输入字符串并使用正则表达式将它们分开，以将它们转换为“单位块”，然后将其转换为毫米。

正则表达式看起来像：

```
//regexps
  var reImperialLengths = /[0-9\,\.\/\s]+\s*(?:yd|yds|yard|yards|\'|ft|foot|feet|\"|in|ins|inch|inches)/i;
  var reImperialLengthsFormat = /^[^0-9]*(?:([0-9]+\.?[0-9]*)\s*(?:yd|yds|yard|yards))?\s*(?:([0-9]+\.?[0-9]*)\s*(?:\'|ft|foot|feet))?\s*(?:([0-9]+)\s*(?:([0-9]+)\/([0-9]+))?\s*(?:\"|in|ins|inch|inches))?\s*$/i;

  var reMetricLengths = /[0-9\,\.\s]+\s*(?:m|cm|mm)/i;
  var reMetricLengthsFormat = /^[^0-9]*(?:([0-9]+\.?[0-9]*)\s*(?:m|metres))?\s*(?:([0-9]+\.?[0-9]*)\s*(?:cm|cms|centimetres?))?\s*(?:([0-9]+)\s*(?:mm|mms|millimetres))?\s*$/i; 
```

这为您在用户输入数据的方式上提供了更大的灵活性，并允许您非常轻松地进行您可能需要的任何计算，因为程序本身将使用数字。

只需将数字转换回您希望在前端显示的方式即可。你也可以在那里美化它，以便它输出`1'`任何`304.8mms`东西。

用户仍然可以填充输入字符串，但它使他们“弄错”的方法更少。

# html - Bootstrap - 复选框的按钮组不切换

> ID：13611354
> 
> 赞同：1
> 
> 时间：2012-11-28T17:51:04.913
> 
> 标签：html, twitter-bootstrap, responsive-design

我可以将 Bootstrap 的数据切换应用到一组复选框吗？

我有一些看起来像这样的 HTML：

```
<div class="btn-group" data-toggle="buttons-radio">
<div id="Answer76" class="Answer FirstAnswer">       
    <label class="checkbox">
        <input class="btn" type="checkbox">A
    </label>
</div>
<div id="Answer77" class="Answer">        
    <label class="checkbox">
        <input class="btn active" type="checkbox">B
    </label>
</div>
<div id="Answer78" class="HwSxAnswer ">        
    <label class="checkbox">
        <input class="btn" type="checkbox">C
    </label>
</div> 
```

如果我将元素更改为按钮，我可以获得切换效果。我需要使用复选框。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:20:59.357

我不这么认为。即使有可能，复选框也不能在大多数浏览器上自由设置样式，因此它们看起来不像按钮。这个[GitHub 问题](https://github.com/twitter/bootstrap/issues/1161)可能会对您有所帮助。

# c# - 在类和接口之间进行选择

> ID：13611355
> 
> 赞同：1
> 
> 时间：2012-11-28T17:51:04.973
> 
> 标签：c#, asp.net, asp.net-mvc, oop, c#-4.0

> **可能的重复：**
> [接口与抽象类（一般 OO）](https://stackoverflow.com/questions/761194/interface-vs-abstract-class-general-oo)

在**MSDN**文章之一中提到了以下行

> 接口不能在以后的版本中指定新成员，而抽象类可以根据需要添加成员以支持附加功能。

我从**[这里](http://msdn.microsoft.com/en-us/library/ms229013.aspx)**挑选了这句话。您可以阅读第 3 段中的相同句子。

我有一个困惑，提前抱歉，以防我遗漏了什么。

一旦声明了抽象类或接口，然后任何派生类都继承了这些方法，在任何一种情况下，所有方法都应该被覆盖。否则会出现编译错误。

你的评论？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T17:52:18.193

> 一旦声明了抽象类或接口，然后任何派生类都继承了这些方法，在任何一种情况下，所有方法都应该被覆盖。否则会出现编译错误。

不，对于抽象类，只需要重写*抽象方法。*您可以添加没有错误*的非抽象*方法。

例如，版本 1：

```
public abstract class FooBase
{
    public abstract void Bar();    
}

public class FooImpl : FooBase
{
    public override void Bar() {}
} 
```

现在在版本 2中引入一个新的*非抽象*方法：`FooBase`

```
public abstract class FooBase
{
    public abstract void Bar();   

    public void NewMethod() {}
} 
```

……没有问题。

请注意，对于*公司内部*代码，将同时重建所有将使用 API 的代码，这通常根本不是问题，无论是接口还是抽象类。如果您想向接口添加方法，您可以这样做，因为您可以同时升级所有实现。

确实，当您*无法*控制整个代码库时，您需要小心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:54:43.570

实现接口的类必须实现接口中定义的所有方法和属性。

从抽象类继承时，您必须实现/覆盖所有抽象成员，但任何非抽象成员都将被继承，就像从具体类继承时一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T18:17:58.693

从接口继承时，必须实现该接口的所有成员。但是您可以根据需要扩展界面。您还可以继承多个接口。有效示例：

```
public interface IPerson
{
    string FullName { get; set; }
    string SSN { get; set; }
}

public interface IPersonDBContext
{
    void Save(IPerson person);
}

public class PersonData : IPerson, IPersonDBContext
{
    // Implements IPerson FullName
    public string FullName { get; set; }

    // Implements IPerson SSN
    public string SSN { get; set; }

    // Implements IPersonDBContext Save()
    public void Save(IPerson person)
    {
        // Code to save the IPerson instance to the DB...
    }

    // Added method, not included in any interface...
    public void Validate(IPerson person)
    {
        // Code to validate the IPerson instance...
    }
} 
```

现在，对于抽象类，您可以包含可以继承的具体方法，也可以指定一些必须重写的方法。但是，请注意，您不能拥有多个基类（并且抽象类仍然是一个类......）所以您不能像接口那样混合两个抽象类。例子：

```
public abstract class Person
{
    public string FullName { get; set; }
    public string SSN { get; set; }

    public abstract void Save();
}

public class PersonData : Person
{
    // Implements Abstract Person Save() Method
    public override void Save()
    {
        // Save logic here...
    }

    // Non-inherited member...
    public void Validate()
    {
        // Access properties of the base class (Abstract Person)
        this.FullName.ToString();
        this.SSN.ToString();
    }
} 
```

最后，也是最强大的，您可以将单个抽象基类与任意数量的接口混合在一起......所以，如果我保留示例 2 中的抽象类 Person 和示例 1 中的接口 IPersonDBContext，我可以这样做：

```
public class PersonData : Person, IPersonDBContext
{
    // Implements Abstract Person Save() Method
    public override void Validate()
    {
        // Access properties of the base class (Abstract Person)
        this.FullName.ToString();
        this.SSN.ToString();
    }

    // Inplmenets IPersonDBContext Save()
    public void Save(Person person)
    {
        // Save logic here...
    }

    // Non-inhereted method
    public void Clone(Person person)
    {
        // Logic to make a member-wise clone.
    }
} 
```

希望有帮助...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T18:08:21.597

实现一个接口会迫使你重写它的方法——然而继承一个类会给你一个选择。只有抽象方法需要被覆盖。MSDN 摘录指出，当所有实现者都需要实现添加的方法时，严格接口契约的价格可能会在以后证明是昂贵的。使用带有虚拟方法的父类可以让您稍后决定是否需要专门化。

# php - 防止输入字段上的xss？

> ID：13611361
> 
> 赞同：1
> 
> 时间：2012-11-28T17:51:21.563
> 
> 标签：php, escaping, preg-replace, htmlpurifier

1-我有一个表格，其中包含姓名家庭电子邮件生日（这是一个选择）和性别，这是两个不同的单选按钮，一个是男性，另一个显然是女性。现在请有人能解释一下如何防止对php中这个字段的xss攻击吗？我的表单数据是这样的

```
<form action="register.php" method="post">
    <div>
        <table>
        <tr><td><?php echo $lang['5']; ?> :</td><td> <input type="text" name="name" maxlength="254" class="required" /></td></tr>
        <tr><td><?php echo $lang['6']; ?> :</td><td> <input type="text" name="family" maxlength="254" class="required" /></td></tr>
        <tr><td><?php echo $lang['59']; ?> :</td><td> <input type="text" name="email" maxlength="254" class="required" /></td></tr>
        <tr><td><?php echo $lang['74']; ?> :</td><td> <input type="text" name="repeat" maxlength="254" class="required" /></td></tr>
        <tr><td><?php echo $lang['60']; ?> :</td><td><input type="password" name="password"/></td></tr>
        <tr>
        <td><?php echo $lang['8'] ?> :</td>
        <td>
        <select name="day">
        <option><?php echo $lang['9'] ?></option>
        <?php 
        for($i=1;$i<=31;$i++){
        echo "<option value=\"{$i}\">{$i}</option>\n"; 
        }
        ?>
        </select>
        <select name="month">
        <?php 
        for($i=0;$i<=12;$i++){
        $i = str_pad($i,2,"0",STR_PAD_LEFT);
        echo "<option value=\"{$i}\">";T(1,$i);echo "</option>\n"; 
        }
        ?>
        </select>
        <select name="year">
        <option><?php echo $lang['11'] ?></option>
        <?php 
        for($i=1300;$i<=1373;$i++){
        if($i == $birthdate['0']){
        echo "<option value=\"{$i}\" selected=\"selected\">{$i}</option>\n"; 
        }else{
        echo "<option value=\"{$i}\">{$i}</option>\n"; 
        }
        }
        ?>
        </select>
        </td>
        </tr>
        </table>
        male : <input type="radio" name="gender[]"  />female : <input type="radio" name="gender[]"  /><br />
        <input type="submit" name="submit" value="<?php echo $lang['63'];  ?>" onclick="formhash(this.form, this.form.password);"/>
    </div>
</form> 
```

对于姓名和家人，我做了这样的事情来获取具有这种模式的 html 实体

```
$name = preg_replace("/[^a-zA-Z0-9_\-]+/", "", $name);
$family = preg_replace("/[^a-zA-Z0-9_\-]+/", "", $family); 
```

对于电子邮件，我这样做了：

```
 $email = preg_replace("^[_a-zA-Z0-9-]+(\.[_a-zA-Z0-9-]+)*@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*(\.[a-zA-Z]{2,3})$^", "", $email); 
```

这个 preg_replace 是否足够安全，或者我可能需要使用 htmlentity 或 htmlspecailchars？

2-对于第二个问题，是否有必要转义来自单选按钮或选择选项的已发布数据，如果有必要，我应该如何转义它们？

3-我刚刚阅读了有关 htmlpurifier 的信息。现在如果我有状态字段，我可以更新哪个用户，我应该使用 html 净化器来获取人员状态和这个注册表单吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:35:07.900

*   最好转义所有提交的值
*   [HTMLPurifier](http://htmlpurifier.org)是一个非常好的并且足以防止 XSS 攻击的工具，这里是你可以如何使用它。

    ```
    # In register.php page:

    require_once 'path/to/HTMLPurifier/library/HTMLPurifier.auto.php';

    $config = HTMLPurifier_Config::createDefault();
    $config->set('HTML.Doctype', 'HTML 4.01 Transitional');
    $config->set("HTML.Allowed", ""); // this will NOT allow any html tags
    $purifier = new HTMLPurifier($config);

    # hash the provided password (don't apply HTMLPurifier on the password)
    $hash_password = sha1($_POST["password"]);

    $data = array();

    # apply HTMLPurify on all submitted data
    foreach ($_POST as $key => $value) {
        $data["$key"] = mysql_real_escape_string($purifier->purify($value));
    }

    # get birthday
    $data["birthday"] = $data["year"] . "-" . $data["month"] . "-" . $data["day"];

    # insert submitted data into your database
    $result = mysql_query("
        INSERT INTO table_name (name, family, email, password, birthday, gender)
        VALUES ('{$data["name"]}', '{$data["family"]}', '{$data["email"]}', '$hash_password', '{$data["birthday"]}', '{$data["gender"]}')
    ");

    ?> 
    ```

注意：使用`male`and`female`作为`name`2 个无线电输入标签的属性值，而不是`gender[]`数组

# java - java中的多个链接组合框

> ID：13611365
> 
> 赞同：0
> 
> 时间：2012-11-28T17:51:36.820
> 
> 标签：java, combobox

> **可能重复：**
> [动态 JComboBoxes](https://stackoverflow.com/questions/3191837/dynamic-jcomboboxes)

我是java程序的新手。我的程序有这个关于组合框的问题。我有 3 个组合框（cbxType、cbxItem 和 cbxColor）。我希望第二个组合框（cbxItem）中的项目列表根据第一个（类型）进行更改，然后第三个组合框的（cbxColor）项目列表根据第二个（cbxItem）中的选定项目进行更改。我一直在尝试用我自己的代码解决这个问题，当第一个组合框改变时，第二个组合框工作正常，但是在我改变后第三个组合框不会显示任何项目。这是我的代码。谢谢你们的帮助，对不起我的英语不好..

```
 private void viewCbxType(){
    String sql;

try {
    sql ="Select distinct productItem from Product ";
    if(cbxType.getSelectedItem() != "<<Product Type>>"){

        String prType = cbxType.getSelectedItem().toString();

        sql ="Select distinct productItem from Product WHERE productType='" +prType+"'";

            cbxItem.removeAllItem();
            cbxItem.setSelectedIndex(0);
        }
    }

    PreparedStatement st = conn.prepareStatement(sql);
    ResultSet rs =st.executeQuery();

    while (rs.next()) {
        String prItem = rs.getString("productItem");

        cbxItem.addItem(prItem);

    }
}catch (SQLException se) {}
} 
```

我在 actionPerformed 中为我的第一个组合框调用该方法，并与第二个组合框类似

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:02:46.690

您可以在组合框上实现一个动作监听器：

```
public class ComboBoxDemo ... implements ActionListener {
    . . .
        petList.addActionListener(this) {
    . . .
    public void actionPerformed(ActionEvent e) {
        JComboBox cb = (JComboBox)e.getSource();
        String petName = (String)cb.getSelectedItem();
        updateLabel(petName);
    }
    . . .
} 
```

此动作侦听器从组合框中获取新选择的项目，使用它来计算图像文件的名称，并更新标签以显示图像。当用户从组合框的菜单中选择一个项目时，组合框会触发一个动作事件。有关实现动作监听器的一般信息，请参阅如何编写动作监听器：

[http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)

这也可以帮助你

[http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)

# jquery - 为什么 datepicker 不能在 IE 7 中接受我的日期字符串

> ID：13611378
> 
> 赞同：0
> 
> 时间：2012-11-28T17:52:36.563
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我的代码在 Chrome 和 Firefox 中运行良好。我无法让它在 IE 兼容模式下工作。如果我把`maxDate: new Date(2012 AUG 28)`它放在 IE 中，但如果我提供 newDateString，更改月份将被禁用。[jsfiddle](http://jsfiddle.net/kxXA5/7/)

```
endDate = "2012-09-11";
var m_names = new Array("JAN", "FEB", "MAR", 
                            "APR", "MAY", "JUN", "JUL", "AUG", "SEP", 
                            "OCT", "NOV", "DEC");

var toDate = Date.parse(endDate) - 2592000000; 
var newToDate = new Date(toDate);

newDateString = newToDate.getFullYear() + " " + m_names[newToDate.getMonth()] + " " + newToDate.getDate();

$('#datepicker').datepicker({
     showOn: "both",
     maxDate: new Date(newDateString ),
     showAnim: "slide", 
     buttonImageOnly: true,
     dateFormat: "yy-mm-dd",
     onSelect: function(dateTxt, inst) {
         $('#<DateForm').submit(); 
     },
     buttonText: ""
 });

$('#datepicker').datepicker("setDate", startDate); 
```

**更新**：

我已经修改了要使用的代码`$.datepicker.parseDate`。我在 IE 中遇到错误。它在 chrome 和 firefox 中运行良好

```
newDateString = newToDate.getFullYear() + " " + m_names[newToDate.getMonth()] + " " + newToDate.getDate();  

alert($.datepicker.parseDate('yy-mm-dd', newDateString)); 
```

> 消息：抛出异常但未捕获行：192 字符：21310 代码：0
> 
> 本地主机：80/jquery-ui-1.8.18.custom.min.js

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:03:05.473

识别的日期格式`Date.parse`因实现而异。相反，使用`$.datepicker.parseDate`.

有关文档，请参阅[http://docs.jquery.com/UI/Datepicker/parseDate](http://docs.jquery.com/UI/Datepicker/parseDate)。

以下是如何使用它从日期中减去 30 天：

```
var toDate = $.datepicker.parseDate('yy-mm-dd', endDate);
toDate.setDate(toDate.getDate()-30); /* Subtract 30 days */ 
```

# javascript - 向 dom 添加内容时 GIF 动画卡住

> ID：13611379
> 
> 赞同：0
> 
> 时间：2012-11-28T17:52:43.887
> 
> 标签：javascript, jquery, animated-gif

向 dom 添加大量内容（使用 jquery .html）时，加载 gif 动画会卡住。

这是[示例](http://jsfiddle.net/zYDYU/1/)。单击按钮时，在附加内容之前，动画卡住了。有什么解决办法吗？谢谢！！

javascript:

```
$('#spinner').html('<img src="ajax-loader.gif" />');
$("input").click(function(){
    var html = '';
    for(var i = 1; i <= 100000; i++){

        html += "this is " + i + "-----------";
    }
    $("#content").html(html);
    $("#spinner").hide();
}); 
```

HTML：

```
<div id="spinner" class="spinner">
</div>
<input type="button" value="clike me" />
<div id="content"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:13:51.437

您可能会突破您的机器计算处理能力的界限，因此您的浏览器会降低GIF 动画的*优先级*，以便处理附加的新 DOM 数据。

尝试找到一种不同的方式来包含所需的数据......也许只是将它放在 JSON 对象中。

# powershell - 安全使用 Update-FormatData？

> ID：13611380
> 
> 赞同：2
> 
> 时间：2012-11-28T10:51:06.743
> 
> 标签：powershell

在自定义 PowerShell 模块中，我在模块定义的顶部有以下代码：

```
Update-FormatData -AppendPath (Join-Path $psscriptroot "*.ps1xml") 
```

这工作正常，因为所有`.ps1xml`文件都已加载。

但是，有时会使用加载模块`Import-Module MyModule -Force`（实际上，这是在模块的安装脚本中）。

在这种情况下，调用`Update-FormatData`失败并出现以下错误：

```
Update-FormatData : There were errors in loading the format data file:
Microsoft.PowerShell, c:\pathto\myfile.Types.ext.ps1xml : File skipped because it was already present from "Microsoft.PowerShell".
At line:1 char:18
+ Update-FormatData <<<<  -AppendPath "c:\pathto\myfile.Types.ext.ps1xml"
    + CategoryInfo          : InvalidOperation: (:) [Update-FormatData], RuntimeException
    + FullyQualifiedErrorId : FormatXmlUpateException,Microsoft.PowerShell.Commands.UpdateFormatDataCommand 
```

有没有办法安全地调用这个命令？

我知道我可以`Update-FormatData`不带参数调用，它会更新任何已知`.ps1xml`文件，但这只有在文件已经加载时才有效。

我可以在某处列出加载的格式数据文件吗？

这里有一点背景：

我正在构建一个使用脚本安装的自定义模块。安装脚本如下所示：

```
[CmdletBinding(SupportsShouldProcess=$true,ConfirmImpact="High")]
param()
process {
    $target = Join-Path $PSHOME "Modules\MyModule"
    if ($pscmdlet.ShouldProcess("$target","Deploying MyModule module"))
    {
        if(!(Test-Path $target)) { new-Item -ItemType Directory -Path $target | Out-Null }
        get-ChildItem -Path (Split-Path ((Get-Variable MyInvocation -Scope 0).Value).MyCommand.Path) | copy-Item -Destination $target -Force

        Write-Host -ForegroundColorWhite @"

The module has been installed. You can import it using :

    Import-Module MyModule

Or you can add it in your profile ($profile)
"@

        Write-Warning "To refresh any open PowerShell session, you should run ""Import-Module MyModule -Force"" to reload the module"

        Import-Module MyModule -Force

        Write-Warning "This session has been refreshed."
    }
} 
```

MyModule 将这一行定义为第一条语句：

```
Update-FormatData -AppendPath (Join-Path $psscriptroot "*.ps1xml") 
```

当我更新我`$profile`以始终加载此模块时，`Update-Path`当我运行安装脚本时已调用该命令。在安装脚本中，我强制导入模块，再次触发模块，然后`Update-Path`调用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:38:26.230

一种简单的方法是使用`-erroraction`(alias `-ea`) 参数：

```
Update-FormatData -AppendPath (Join-Path $psscriptroot "*.ps1xml") -force -ea SilentlyContinue 
```

不会显示错误。

# javascript - Javascript parseInt() 在包含数字的字符串文字上返回 NaN

> ID：13611381
> 
> 赞同：0
> 
> 时间：2012-11-28T17:52:46.563
> 
> 标签：javascript, parsing

```
["57300","730","17300","17330","17340","70","220","320","380","420","340","130","50","280","360","550","43110","44340","400","620","440","20","72850"] 
```

是一个字符串数组被传递回一个javascript函数，该函数继续对其进行工作以将其分解为一个字符串数组（使用带有“，”作为分隔符的拆分函数）。

这里的问题是，我需要将之后的每一个都转换为整数。听起来很容易。

所以我继续做一个：

```
$.each(data, function(i, item) 
```

在上面。如果我控制台记录该项目，我可以看到它是“57300”、“730”等。这很好。但如果我尝试这样做：

```
var number = parseInt(item, 10); 
```

控制台记录什么数字是......它的NaN（不应该是57300、730等没有引号吗？）。是一些隐藏的字符惹恼了我导致 parseInt 中断吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:54:37.490

根据您的帖子，您将字符串拆分为逗号，这意味着您将在数字周围留下引号。这意味着您正在执行相当于 parseInt("\"573007\"") 的操作。您需要在调用 parseInt 之前去掉引号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T18:12:21.437

我认为您的初始字符串如下所示，

```
var result = '"57300","730","17300","17330"'; 
```

由于您使用`,`分隔符进行拆分，因此您最终会得到如下所示，

```
data = ["\"57300\"","\"730\"","\"17300\"","\"17330\""]; 
```

基本上是一个带引号的字符串。当你使用解析时`parseInt`

```
parseInt("\"57300\"", 10); //throws NaN 
```

**解决方案：**

`[]`相反，您可以使用而不是`split`使用`parseJSON`函数来包装该数据。见下文，

```
var result = '"57300","730","17300","17330"';

result = '[' + result + ']';

var data = $.parseJSON(result);

$.each(data, function (i, item) {
    var number = parseInt(item, 10);
    alert(number);
}); 
```

**演示：http:** [//jsfiddle.net/mYysX/](http://jsfiddle.net/mYysX/)

# javascript - 我可以在没有工具栏的情况下使用 CKEditor 吗？

> ID：13611386
> 
> 赞同：26
> 
> 时间：2012-11-28T17:52:56.483
> 
> 标签：javascript, ckeditor

（可能重复：[CKEditor - 无工具栏](https://stackoverflow.com/questions/8344567/ckeditor-no-toolbars)）

我想创建一个没有工具栏的 CKEditor 实例。我尝试定义一个空工具栏以在实例的配置中使用

```
oConfigName.toolbar = 'Custom';
oConfigName.toolbar_Custom = []; 
```

但是我的实例有一个小的空工具栏，而不是没有工具栏。

我正在使用CKEditor4进行[内联编辑。](http://docs.ckeditor.com/#!/guide/dev_inline)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-28T19:07:28.080

哇 :) 这是我们在实现工具栏时没有想到的。但是我刚刚检查过您可以删除工具栏插件，因为任何其他插件都不需要它。

因此，无需工具栏或使用配置即可[构建您自己的](http://ckeditor.com/builder)CKEditor 包`removePlugins`- 例如：

```
var editor = CKEDITOR.inline( 'editable', {
    removePlugins: 'toolbar'
} ); 
```

**更新：**在 CKEditor 4.1 中引入了[高级内容过滤器](http://docs.ckeditor.com/#!/guide/dev_advanced_content_filter)。在其[自动模式下](http://docs.ckeditor.com/#!/guide/dev_advanced_content_filter-section-2)，它由加载到工具栏的按钮配置。没有`toolbar`插件 ACF 没有配置，所以需要自己做：

```
var editor = CKEDITOR.inline( 'editable', {
    removePlugins: 'toolbar',
    allowedContent: 'p h1 h2 strong em; a[!href]; img[!src,width,height];'
} ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-09T10:56:26.790

在 CKEditor 4.9.2 中：

当您实例化编辑器时，设置工具栏选项：

```
CKEDITOR.replace( 'editor1', {
    ...
    toolbar: []
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-28T12:09:22.117

我已经关闭了除斜体、粗体和下划线之外的所有配置：

```
CKEDITOR.editorConfig = function( config ) {
    config.autoParagraph = false;
    config.toolbarGroups = [
        { name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ] },
    ];

    config.removeButtons = 'Strike,Subscript,Superscript,RemoveFormat';
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-20T19:19:45.557

我见过两种方式：

**1）使用该`removePlugins`选项，只需删除工具栏：**

```
CKEDITOR.inline( 'textarea', {
    removePlugins: 'toolbar',
    allowedContent: 'p h1 h2 strong em; a[!href]; img[!src,width,height];'
} ); 
```

**2）使用 CSS - 不是标准方法：（*有点棘手*）**

只需让 css 显示：none 工具栏，例如

```
.cke_inner {
    display: none;
} 
```

在 4.13 版本中，您可以隐藏包含工具栏的整个顶部栏：

```
.cke_inner .cke_top {
    display: none;
} 
```

或仅隐藏工具栏但在顶部保留一条颜色：

```
.cke_inner .cke_top .cke_toolbox {
    display: none;
} 
```

希望它会帮助某人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-24T05:11:27.537

将此行添加到***config.js***文件中

```
config.removePlugins= 'toolbar' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-05T01:58:40.713

我在我的项目中添加了用于隐藏/显示工具栏的新功能。

```
function onClickToolbarButton() {
    var bar = document.getElementById("cke_1_top");
    if(bar.style.display == "none"){
        bar.style.display = "block";
    }else{
        bar.style.display = "none";
    }

    //resize web page
    //onresize();
}
```

如果您想隐藏/显示工具栏，请每次调用此函数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-17T14:50:52.087

在 CKEditor 5 中，不更改配置或编辑器行为的最简单方法是使用 CSS 隐藏工具栏：

```
.ck.ck-editor__top {
  display: none;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-30T11:39:26.093

尝试`display: none`将 CSS 与他们的 id 或他们的类一起使用：

例子：

```
#cke_19, #cke_18, #cke_22, #cke_46, #cke_45 {
    display:none;
} 
```

`#cke_45`用于链接和`#cke_46`取消链接

将它们一一关闭

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-07T11:08:42.027

我在ckeditor5中这样做：

```
ClassicEditor
    .create( document.querySelector( '.editor' ), {
        licenseKey: '',
        toolbar: [],

    } )
    .then( editor => {
        window.editor = editor;
        editor.isReadOnly = true;

    } )
    .catch( error => {
        console.error( 'Oops, something went wrong!' );
        console.error( 'Please, report the following error on https://github.com/ckeditor/ckeditor5/issues with the build id and the error stack trace:' );
        console.warn( 'Build id: efxy8wt6qchd-qhxgzg9ulnyo' );
        console.error( error );
    } ); 
```

如果要删除 ckeditor 5 周围的边框，请执行以下操作：

```
 <style>
        .ck{
            border:0px !important;
        }

    </style> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-01T10:34:11.777

CKEditor 5 中更正确的方法：

```
editor.ui.view.panel.element.setAttribute('style', 'display:none'); 
```

# ruby-on-rails - 在 Ruby on Rails 中，当我创建一个新的“咨询动机”时，我需要像“Inactivo”一样自动定义这个字段“estado”

> ID：13611388
> 
> 赞同：0
> 
> 时间：2012-11-28T17:53:00.607
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

```
# in the controller
def create
  @motivo_consulta = MotivoConsulta.new(params[:motivo_consulta])
  respond_to do |format|
  if @motivo_consulta.save
    format.html { redirect_to @motivo_consulta, notice: 'Motivo de consulta fue creado exitosamente.' }
    format.json { render json: @motivo_consulta, status: :created, location: @motivo_consulta }
  else
    format.html { render action: "new" }
    format.json { render json: @motivo_consulta.errors, status: :unprocessable_entity }
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T21:37:11.887

If you only need to set a default value for the field "estado" in "MotivoConsulta" model, try setting that value in one migration.

```
rails g migration SetDefaultValueToEstadoInMotivoConsulta 
```

And in this migration set the default value of the *estado* field, as below:

```
class SetDefaultValueToEstadoInMotivoConsulta < ActiveRecord::Migration
  def up
    change_table :motivo_consulta do |t|
      t.string :estado, default: "Inactivo"
    end
  end
  def down
    change_table :motivo_de_mudanca do |t|
      t.string :estado
    end
  end
end 
```

Also, you should proctect the attribute *estado* from mass-assignment in MotivoConsulta class:

```
class MotivoConsulta < ActiveRecord::Base
  #...
  attr_protected :estado
  #...
end 
```

A different approach can be used by setting the default value in MotivoConsulta class, as described [here](https://stackoverflow.com/questions/328525/what-is-the-best-way-to-set-default-values-in-activerecord).

There is something else that you might be interested in it's called the [State Pattern](http://en.wikipedia.org/wiki/State_pattern) and there are many [*gems* available to help you with it](https://www.ruby-toolbox.com/categories/state_machines.html).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T17:56:56.783

你可以使用这样的东西：

```
@motivo_consulta = MotivoConsulta.new(params[:motivo_consulta].merge({:estado => 'inactivo'})) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T18:32:00.157

首先，您应该重新考虑您的代码。你可以做这样的事情

```
respond_to :html, :json

def create
  @motivo_consulta = MotivoConsulta.new(params[:motivo_consulta].merge({:estado => 'inactivo'}))

  if @motivo_consulta.save
    respond_with(@motivo_consulta, notice: 'Motivo de consulta fue creado exitosamente.')
  else
    respond_with(@motivo_consulta.errors, status: unprocessable_entity)
  end
end 
```

希望它能回答你的问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T18:02:27.843

我强烈建议您重构您的控制器，并将响应逻辑放入自定义响应器中。=p

关于您的问题，有一个可以帮助您的宝石：[state_machine](https://github.com/pluginaweek/state_machine) 这样您就可以在模型中使用您的业务逻辑，这是它应该在的地方。

# javascript - Limesurvey (2.0) 中的复选框数组和输入文本字段

> ID：13611389
> 
> 赞同：2
> 
> 时间：2012-11-28T17:53:04.520
> 
> 标签：javascript, limesurvey

我想创建一个由复选框和短文本输入字段组成的数组问题。插图：

```
 Fruits      bitter    sweet    salty      other                
 orange       cBox     cBox     cBox     inputText
 mango        cBox     cBox     cBox     inputText
   .           .        .        .           .
   .           .        .        .           .
   .           .        .        .           .
inputText     cBox     cBox     cBox     inputText 
```

到目前为止，我可以在 Checkbox 变体中创建一个“数组（Multi Flexi）（数字）”，但不能使用所需的文本输入字段。关于示例，用户应该能够输入一种新水果并用自己的口味对其进行描述。

似乎没有办法在 Limesurvey 2.0 中创建新的问题类型。[但是我发现了一种基于 JavaScript 的解决方法，可以在一行](http://docs.limesurvey.org/Workarounds%3A+Question+design%2C+layout+and+templating#Multiple_question_types_in_array)中安排几个单独的问题。当试图调整这个脚本时，我发现它不支持我需要的数组问题类型（前面提到过）。

有什么想法或不同的方法来解决这个啊，挑战？非常感谢您提供帮助我解决此问题的任何帮助或技巧！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-12T09:40:01.870

选择 ：

1.  使用“文本”数组（LimeSurvey 中的现有问题类型）
2.  更新需要的“输入：文本”：在同一单元格中添加一个“输入：复选框”（jquery 在这里）
3.  为每个复选框添加一个系统：选中此复选框时：将 input:text 设置为 Y，否则将 input:text 设置为空值

    ```
    <script>
    $(document).on('click',"#question{QID} :checkbox",function(){
        copiedid=$(this).data('copy');
        if($(this).is(':checked')){
            $("#"+copiedid).val('Y');
        }else{
            $("#"+copiedid).val('');
        }
    });
    $(document).ready(function(){
        $('#question{QID}  tbody tr td:not(:last-child)').each(function(){
            var textinputid=$(this).find('input:text').attr('id');
            $(this).find('input:text').hide();
            $(this).append("<input type='checkbox' data-copy='"+textinputid+"' />");
        });
    });
    </script> 
    ```

# date - 批处理文件如果修改日期 = 昨天日期（运行命令）

> ID：13611391
> 
> 赞同：2
> 
> 时间：2012-11-28T17:53:09.683
> 
> 标签：date, batch-file, compare, dos

好的，我正在使用 Rob Van der Woude 昨天.bat 代码以及我在此处其他帖子的帮助下整理的一些代码。

我有一个文件，我首先想看看它是否存在于昨天的日期，如果是真的，那么我会做一些其他的事情。我坚持的问题是将文件日期与“昨天的”日期进行比较。当我将它们回显到屏幕时，它们看起来完全一样，但我的批处理文件说它们不是。代码的第一部分来自昨天.bat，用于显示我插入代码的位置。非常感谢任何指导。

```
Display the results
ECHO Format:     YYYYMMDD  (%LocalFormat%)
ECHO.==================================
CALL ECHO Yesterday:  %SortYest%  %yLocal%
ECHO Today:      %SortDate%  %Today%

:: Check if file gams1bu from yesterday exists
SET filename="B:\data\backup\gams1bu" 
IF NOT EXIST %filename% GOTO log 
FOR %%f IN (%filename%) DO SET filedatetime=%%~tf 

::This displays the results of the two variables
CALL ECHO %yLocal%
CALL ECHO %filedatetime:~0,-10%

IF %filedatetime:~0,-10% == %yLocal% goto same

goto notsame

:same
echo Dates the same, do some code here

goto next

:notsame
echo Dates NOT the same, do some code here 
```

即使我运行它时日期看起来相同，批处理文件也会转到 :notsame ????

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:57:13.547

这

```
SET filename="B:\data\backup\gams1bu" 
IF NOT EXIST %filename% GOTO log 
FOR %%f IN (%filename%) DO SET filedatetime=%%~tf 
```

似乎没有在我的提示下设置 filedatetime (cmd.exe)

这将为您提供格式为 YYYYMMDD 20121128 的当前日期：

```
for /F "tokens=2-4 delims=/ " %i in ('date /t') do SET datestamp=%k%i%j
SET datestamp=20121128

C:\>echo %datestamp%
20121128 
```

（原始命令来自：）

[http://www.sprint.net.au/~terbut/usefulbox/msdoscmds.htm](http://www.sprint.net.au/~terbut/usefulbox/msdoscmds.htm)

你好

如果您需要以 YYYYMMDD 格式获取文件的日期，您可以这样做：

假设文件名是 FILE_YOU_NEED.txt

```
for %a in (FILE_YOU_NEED.txt) do set FileDate=%~ta
for /F "tokens=1-3 delims=/ " %i in ('echo %FileDate%') do SET datestamp=%k%i%j 
```

* * *

如果您的 filedatetime 变量同时具有日期和时间，您可以尝试比较一个只有日期但没有时间的变量：

```
set FILEDATETIME=12/02/2012 13:45

echo %FILEDATETIME%
12/02/2012 13:45

set FILEDATEONLY=%FILEDATETIME:~0,10%

echo %FILEDATEONLY%
12/02/2012 
```

# c# - 使用静态方法防止 Stackoverflow 异常

> ID：13611396
> 
> 赞同：-1
> 
> 时间：2012-11-28T17:53:24.573
> 
> 标签：c#, stack-overflow

我正在编写一个递归实例化自身的类，以便将 XSD 解析为另一种类型的 XSD。它从 Internet 下载它并遍历每个元素，如果其中一个元素具有`complexType`位于另一个元素中的 a，`URI`那么它只需通过创建一个自身的实例来做同样的事情。

但是当XSD这么大而且有很多外部链接时，今天我的班级因为`Stackoverflow`异常而崩溃了。

我决定将一些实例方法`Helper.cs`作为静态成员放到另一个类 ( ) 中，现在从解析器类中调用它们。

但是我想知道这是否是一个很好的解决方案并且可以解决`Stackoverflow`异常？我知道实例方法是如何放入堆栈帧的，但是静态方法会以同样的方式处理吗？它会导致任何`Stackoverflow`异常吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T17:54:57.367

实例方法和静态方法的唯一区别是实例方法带有一个额外的隐藏`this`参数。（实际上，实例方法也可以是`virtual`，但这在这里没有任何区别）

它们都同样容易受到堆栈溢出的影响。

如果要避免大型输入的堆栈溢出，请不要使用递归。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:00:02.007

静态与实例与这个问题无关。堆栈深度根据调用上升和下降，而不是在包含函数的实际内存上，无论是在堆栈上还是在堆上。

寻找任何没有可靠退出条件的递归、计数到无穷大的循环或太大的数据源。您的项目是否在网络服务器上运行？IIS 对堆栈大小（编译成 w3wp.exe）有一个内置限制，比桌面应用程序更严格。

# list - 我如何找到一个列表有多少个不同的元素？在口齿不清

> ID：13611397
> 
> 赞同：-1
> 
> 时间：2012-11-28T17:53:26.120
> 
> 标签：list, lisp

在 Lisp 中，我如何找到一个列表有多少个不同的元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:02:15.003

```
(length (remove-duplicates <your list>)) 
```

最短的方法，但也可以一次性完成，如下所示：

```
(defun count-distinct (list)
  (let ((table (make-hash-table)))
    (dolist (i list (hash-table-count table))
      (setf (gethash i table) t)))) 
```

# ruby - RSpec 规范伪造类常量的最佳实践或解决方法

> ID：13611400
> 
> 赞同：7
> 
> 时间：2012-11-28T17:53:36.770
> 
> 标签：ruby, unit-testing, testing, rspec

假设我有汽车和机械师课程。车有“跑”的方法。机械师出于某种原因需要汽车。然后我编写 RSpec 规范。在 mechanic 我定义了一个这样的假类：

```
class Car; end 
```

然后存根机械师在其上使用的方法。如果我单独运行测试，一切正常。但是当我同时运行两个测试时（rspec spec/directory/），我的 Mechanic 规格使用真正的 Car 类。

所以。我想这是因为 ruby​​ 类是“开放的”，并且我已经为 Car 规格加载了一次该类。但是有没有更好的方法来做到这一点？这种情况的最佳做法是什么？这是否意味着我的代码需要一些改进，因为它可能是紧密耦合的？

我在 github 上做了一个快速演示：[https ://github.com/depy/RspecTest](https://github.com/depy/RspecTest)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:49:47.707

我认为您需要的是两层测试：

*   单元规格：单独测试每个类
*   集成规范：整体测试

给定代码如下：

```
class Car
end

class Mechanic
  def fix(car)
    # do something here
  end
end 
```

对于单元规格，我会存根依赖项，例如：

```
describe Mechanic do
  let(:mechanic) { described_class.new }
  let(:car)      { stub(stubbed_method_on_car: 14) } # Or just OpenStruct.new(stubbed_method_on_car: 14)

  it 'does some stuff' do
    mechanic.fix(car).should eq true
  end
end 
```

对于集成规范，我会这样做：

```
describe Mechanic do
  let(:mechanic) { FactoryGirl.create(:mechanic) }
  let(:car)      { FactoryGirl.create(:car) }

  it 'does some stuff' do
    mechanic.fix(car).should eq true
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T17:59:37.377

由于 Ruby 类是开放的，因此这个假类将无法工作。

您可以使用的一种方法是使用[let](https://www.relishapp.com/rspec/rspec-core/v/2-11/docs/helper-methods/let-and-let)以您想要的方式初始化对象，并在需要时使用 before 块上的关系。在 before 块中也欢迎存根。=p

希望这对你有帮助！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-16T12:30:48.040

Rspec 内置了对[存根常量](https://www.relishapp.com/rspec/rspec-mocks/v/2-11/docs/stubbing-constants/stub-defined-constant)的支持。

# java - 在图像查看器中的每个图像下添加文本描述

> ID：13611409
> 
> 赞同：3
> 
> 时间：2012-11-28T17:54:15.273
> 
> 标签：java, android, android-viewpager, layout-inflater

由于厨房类已弃用，所以我尝试用 viewpager 类替换它，我已经创建了我的**图像 viewpager**并且工作得很好。

现在我试图**在每张图片下添加文本描述**，我在谷歌上搜索了很多没有结果，我尝试使用带有**自定义布局的****LayoutInflater**但没有任何结果，它不显示文本。

 ****注意：**这是第一次使用 viewpager 并尝试自定义它，所以我下面的代码试图膨胀布局并使用 viewpager 自定义它，可能是错误的或需要更多调整，因为没有经验。

任何建议将不胜感激，谢谢。

我的代码：

**图像页面：**

```
 public class ImagePager extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ImagePagerAdapter adapter = new ImagePagerAdapter(this, imageArra);
    ViewPager myPager = (ViewPager) findViewById(R.id.myimagepager);
    myPager.setAdapter(adapter);
    myPager.setCurrentItem(0);}

      private int imageArra[] = { R.drawable.a, R.drawable.b, R.drawable.c,
                       R.drawable.d, R.drawable.e, R.drawable.f,
                                 R.drawable.g, R.drawable.h, R.drawable.i, 
                                 R.drawable.j, R.drawable.k};} 
```

**图像页面适配器：**

```
 public class ImagePagerAdapter extends PagerAdapter {

Activity activity;
int imageArray[];

public ImagePagerAdapter(Activity act, int[] imgArra) {
    imageArray = imgArra;
    activity = act;   }

public int getCount() {
    return imageArray.length;   }

public Object instantiateItem(View collection, int position) {
LayoutInflater inflater = (LayoutInflater)collection.getContext().
          getSystemService (Context.LAYOUT_INFLATER_SERVICE);
    View layout = inflater.inflate(R.layout.custom_pager, null);

    layout.findViewById(R.id.caption);

 ImageView view = new ImageView(activity);                      
    view.setPadding(5, 25, 5, 5);
    view.setScaleType(ScaleType.FIT_START);
    view.setBackgroundColor(Color.RED);
    ((ViewPager) collection).addView(view, 0);
    return view;   }

@Override
public void destroyItem(View arg0, int arg1, Object arg2) {
    ((ViewPager) arg0).removeView((View) arg2);   }

@Override
public boolean isViewFromObject(View arg0, Object arg1) {
    return arg0 == ((View) arg1);   }

@Override
public Parcelable saveState() {
    return null;   }
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:07:51.240

这里

```
public Object instantiateItem(View collection, int position) {
LayoutInflater inflater = (LayoutInflater)collection.getContext().getSystemService
             (Context.LAYOUT_INFLATER_SERVICE);
    View layout = inflater.inflate(R.layout.custom_pager, null);

    layout.findViewById(R.id.caption);

 ImageView view = new ImageView(activity);                      
    view.setPadding(5, 25, 5, 5);
    view.setScaleType(ScaleType.FIT_START);
    view.setBackgroundColor(Color.RED);
    ((ViewPager) collection).addView(view, 0);
    return view;   } 
```

`cutome_pager`像这样设计你的视图。

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<ImageView
    android:id="@+id/gallery_imageView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />

<TextView
    android:id="@+id/gallery_imageView_dsc"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:text="Hello...." /> 
```

和

```
public Object instantiateItem(View collection, int position) {
LayoutInflater inflater = (LayoutInflater)collection.getContext().getSystemService
             (Context.LAYOUT_INFLATER_SERVICE);
    View layout = inflater.inflate(R.layout.custom_pager, null);

                    ImageView im=(ImageView) layout.findViewById(R.id.gallery_imageView);
                    im.setBackgroundColor(Color.RED);
                    TextView dsc=(TextView) layout.findViewById(R.id.gallery_imageView_dsc);
                    ((ViewPager) collection).addView(layout, 0);
                    return layout;   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:07:29.317

在`instantiateItem()`方法中，您创建一个`ImageView`并将其添加到查看寻呼机并返回它。在此方法中，创建一个`LinearLayout`垂直方向，然后为描述创建一个`ImageView`和一个`TextView`，然后添加`ImageView`和`TextView`到`LineaLayout`和添加`LinearLayout`到视图寻呼机并返回`LinearLayout`..**

# android - android phonegap手柄后退按钮不起作用

> ID：13611412
> 
> 赞同：0
> 
> 时间：2012-11-28T17:54:26.467
> 
> 标签：android, cordova, back

```
<!DOCTYPE html>
<html>
  <head>
    <title>PhoneGap Back Button Example</title>

    <script type="text/javascript" charset="utf-8" src="cordova-2.2.0.js"></script>
    <script type="text/javascript" charset="utf-8">

    // Call onDeviceReady when PhoneGap is loaded.
    //
    // At this point, the document has loaded but phonegap-1.2.0.js has not.
    // When PhoneGap is loaded and talking with the native device,
    // it will call the event `deviceready`.
    //
    function onLoad() {
        document.addEventListener("deviceready", onDeviceReady, false);
    }

    // PhoneGap is loaded and it is now safe to call PhoneGap methods
    //
    function onDeviceReady() {
        // Register the event listener
        document.addEventListener("backbutton", onBackKeyDown, false);
    }

    // Handle the back button
    //
    function onBackKeyDown() {alert("back button pressed");
    }

    </script>
  </head>
  <body onload="onLoad()">
  </body>
</html> 
```

我想问用户是否想退出我的应用程序，当它点击后退按钮时。

[我从http://docs.phonegap.com/en/1.2.0/phonegap_events_events.md.html#backbutton](http://docs.phonegap.com/en/1.2.0/phonegap_events_events.md.html#backbutton)阅读了这个例子， 但它不起作用......

我该怎么做呢？

我在 ONDEVICEREADY 功能中设置了一些警报，并且我看到它从未触发此方法....所以 EVENTLISTENERE DEVICEREADY 从未触发...为什么？？？？？？？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:58:04.697

如果 onDeviceReady() 未触发意味着 PhoneGap 尚未加载。请确保您的 cordova-2.2.0.js 文件位于正确的位置。根据您的示例“.html”和“cordova-2.2.0.js”文件应该在同一个文件夹中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:18:58.977

看起来您绝对应该根据您的代码和链接看到警报。但是本教程适用于 1.2 版，而您使用的是 2.2 版。您可能需要检查使用相同版本的教程。如果不存在，则该功能可能已被删除，或者您需要与 Cordova 开发人员讨论此问题。

# mysql - 用两个条件查询内连接？

> ID：13611413
> 
> 赞同：0
> 
> 时间：2012-11-28T17:54:33.033
> 
> 标签：mysql, sql

我有这个 sql 查询，它通过电影名称选择它在表中找到的重复项：

SQL：

```
SELECT movies.movie_name, movies.year FROM movies
INNER JOIN (SELECT movie_name FROM movies
GROUP BY movie_name HAVING count(movie_id) > 1) dup ON movies.movie_name = dup.movie_name
// want also to test for same year, not just movie_name i.e movies.year = dup.year 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:05:50.653

```
SELECT movies.movie_name, movies.year FROM movies
INNER JOIN (SELECT movie_name, year FROM movies
GROUP BY movie_name,year HAVING count(movie_id) > 1) dup ON movies.movie_name = dup.movie_name
and movies.year = dup.year 
```

似乎是一个合理的开始......

通过删除一个我假设你的意思是保留一个，不要忘记你可以有多个重复

假设我们将保留第一个摆脱其余的，并且具有最早 movie_id 的那个是第一个

所以

```
Select Min(Movie_id), Movie_Name, Year From Movies Group By Movie_Name, Year 
```

会给你所有可以保留的

```
Select Movie_id,Movie_Name,Year From Movies m 
Left Join 
(Select Min(Movie_id), Movie_Name, Year From Movies Group By Movie_Name, Year) keep
On keep.movieid = m.movieid Where keep.Movie_Id is null 
```

以上是电影中的所有记录，但不在我们想要保留的所有查询中。

所以这给了我们所有你想要摆脱的东西。看在克苏鲁的份上，不要相信我或你自己！删除前先备份！

```
Delete m From Movies m 
Left Join 
(Select Min(Movie_id), Movie_Name, Year From Movies Group By Movie_Name, Year) keep
On keep.movieid = m.movieid Where keep.Movie_Id is null 
```

So now we've took the query we proved (you did prove it didn't you! ) and instead of selecting the offending records we are deleting them.

Don't forget the back up!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T23:16:36.920

I really like Tony's idea to use `MIN`. However, whole query can be simplier:

```
DELETE FROM movies WHERE movie_id NOT IN 
(SELECT MIN(movie_id) FROM movies GROUP BY movie_name, year); 
```

# java - Fileoutputstream 创建不继承 Win ACL 的文件

> ID：13611415
> 
> 赞同：1
> 
> 时间：2012-11-28T17:54:36.137
> 
> 标签：java, windows, acl

我注意到一个奇怪的行为如下：

1.  我创建一个文件夹 c:\ProgramData\MyApp
2.  所有人都可以完全访问的 ACL：icacls.exe c:\ProgramData\MyApp /grant:r "*S-1-1-0":(OI)(CI)F
3.  将文件 something.txt 复制到 c:\ProgramData\MyApp => 文件继承 ACL（每个人都有完全访问权限）
4.  我做了一个 new FileWriter(new File(something.txt)), null) 或 new Fileoutputstream(...) 之后，该文件不再具有此 ACL。

系统：Windows 7 64 位

有任何想法吗？提前谢谢了！彼得

# javascript - 专门为页面上的所有数字设置字体

> ID：13611420
> 
> 赞同：11
> 
> 时间：2012-11-28T17:54:43.970
> 
> 标签：javascript, css, regex, numbers, font-family

对于我的网页，我选择了一种适用于所有字母的字体。但是，对于所有数字，我想使用不同的字体。

有没有办法可以设置 CSS 规则来定位页面上的所有数字？

如果我不能严格使用 CSS，我的第一个想法是使用正则表达式将所有数字与“数字”类的范围包围起来，并为该类应用字体。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-28T18:14:54.357

您可以通过遍历文档在 JavaScript 中相对简单地做到这一点，以便将任何数字序列包装在具有属性的`span`元素中并在 CSS 中声明它。`class``font-family`

原则上在纯 CSS 中也是可能的，尽管目前只有 WebKit 浏览器支持这一点：

```
@font-face {
  font-family: myArial;
  src: local("Courier New");
  unicode-range: U+30-39;
}
@font-face {
  font-family: myArial;
  src: local("Arial");
  unicode-range: U+0-2f, U+40-10FFFF;
}
body { font-family: myArial; } 
```

最后，也是最重要的，不要这样做。如果您对字体中的数字不满意，请不要使用该字体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:36:41.350

`<span class="number">`用一个听起来不错的、语义上合理的方法包围你的数字。

事实上，CSS3 没有提供替代方案，而且我看不到[CSS4](http://www.w3.org/TR/2012/WD-selectors4-20120823/)会出现什么。如果您查看[最新的 CSS3 推荐](http://www.w3.org/TR/css3-selectors/#content-selectors)，它没有指定任何内容选择器，但旧的[2001 候选推荐](http://www.w3.org/TR/2001/CR-css3-selectors-20011113/#content-selectors)是提供`:contains()`伪类的最后一个版本。

这将让您匹配包含数字的元素：

```
/* Deprecated CSS3 */
p:contains(0), p:contains("1"), p:contains("2") {
    background-color: red;
} 
```

即使这实际上是可用的，它也匹配`p`，而不是数字，所以整体`p`将被样式化......不是你想要的。CSSWG 正在围绕[这些想法](http://wiki.csswg.org/ideas/content-formatting)来格式化数字内容......仍然不是你想要的。

要将 CSS 应用于数字，不可避免地需要一些额外的标记。

# c# - WPF Image 控制内存泄漏

> ID：13611421
> 
> 赞同：5
> 
> 时间：2012-11-28T17:54:48.130
> 
> 标签：c#, wpf, memory-leaks

我的程序有*很多*小图像（图像控件很小，不是图像本身），说很多我的意思是超过 500 个。这些图像是异步生成的，然后分配给`Image`之前初始化的控件。
基本上我的代码执行以下操作：

```
 filename = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, string.Format("{0}.JPG", Guid.NewGuid().GetHashCode().ToString("x2")));
            converter.ConvertPdfPageToImage(filename, i);
            //Fire the ThumbnailCreated event
            onThumbnailCreated(filename, (i - 1)); 
```

创建图像的代码中没有内存泄漏，我有以下代码：

```
 string[] files = Directory.GetFiles("C:\\Users\\Daniel\\Pictures", "*.jpg");
            for(int i=0; i<files.Length; i++){
                onThumbnailCreated(files[i], i);
            } 
```

问题仍然存在。这发生在事件处理程序方法中：

```
 void Thumbnails_ThumbnailCreated(ThumbnailCreatedEventArgs e, object sender)
    {
        //Since we generate the images async, we need to use Invoke
        this.parent.Dispatcher.Invoke(new SetImageDelegate(SetImage), e.Filename, e.PageNumber);
    }

    private void SetImage(string filename, int pageNumber)
    {
        BitmapImage bitmap = new BitmapImage();
        bitmap.BeginInit();
        //I am trying to make the Image control use as less memory as possible
        //so I prevent caching
        bitmap.CacheOption = BitmapCacheOption.None;
        bitmap.UriSource = new Uri(filename);
        bitmap.EndInit();
        //We set the bitmap as the source for the Image control
        //and show it to the user
        this.images[pageNumber].Source = bitmap;
    } 
```

对于 468 张图像，该程序使用了大约 1Gb 的内存，然后就用完了。我的任务是否甚至可以使用 WPF 来实现，或者图像数量是否过多？也许我的代码有问题？
提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T17:59:21.920

如果可能，您应该[冻结这些图像](http://blogs.msdn.com/b/jgoldb/archive/2008/05/04/memory-leaks-in-wpf-based-applications-blog-update.aspx)并将它们的[宽度（或高度）](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.decodepixelwidth.aspx)设置为将在应用程序中实际使用的值：

```
// ...
bitmap.DecodePixelWidth = 64; // "displayed" width, this improves memory usage
bitmap.EndInit();

bitmap.Freeze();
this.images[pageNumber].Source = bitmap; 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-11-28T18:15:01.347

可能是导致内存泄漏的事件处理程序。

看到这个问题：

[为什么以及如何避免事件处理程序内存泄漏？](https://stackoverflow.com/questions/4526829/why-and-how-to-avoid-event-handler-memory-leaks)

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-11-28T17:58:25.157

尝试这个：

```
private void SetImage(string filename, int pageNumber)
{
    using (BitmapImage bitmap = new BitmapImage())
    {
        bitmap.BeginInit();
        //I am trying to make the Image control use as less memory as possible
        //so I prevent caching
        bitmap.CacheOption = BitmapCacheOption.None;
        bitmap.UriSource = new Uri(filename);
        bitmap.EndInit();
        this.images[pageNumber].Source = bitmap;
    }
} 
```

当你完成它们时，这将处理你的位图。

# jquery - Jquery在div标签后追加ajax加载

> ID：13611422
> 
> 赞同：0
> 
> 时间：2012-11-28T17:54:52.993
> 
> 标签：jquery, ajax

我试图在 div 标签之后插入一个 ajax 加载的内容

```
$('#optionheader').after($.load('calendar', {'requestType':'loadMenu'})); 
```

谁能告诉我错误在哪里？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:58:10.663

您可以为此使用 $.get ：

```
$.get('/calendar', {'requestType':'loadMenu'},function(data) {
    $("#optionheader").after(data);
}); 
```

如果你想按照自己的方式使用.load，你可以这样做

```
$("#optionheader").after($('<div />').load('/calendar',{'requestType':'loadMenu'}); 
```

这应该将一个 div 添加到 #optionheader 标记并使用 /calendar 的结果加载它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:02:00.570

尝试

```
 var div = $("<div />");
     div.load('calendar', {'requestType':'loadMenu'});
     $("#optionheader").after(div); 
```

# mysql - 语法错误或访问冲突：1701 无法截断外键约束中引用的表

> ID：13611424
> 
> 赞同：2
> 
> 时间：2012-11-28T17:54:56.653
> 
> 标签：mysql, magento, magento-1.4

刷新magento的缓存存储时出现此错误

```
 SQLSTATE[42000]: Syntax error or access violation: 1701 Cannot truncate a table referenced in a foreign key constraint (`mysite`.`core_cache_tag`, CONSTRAINT `FK_CORE_CACHE_TAG` FOREIGN KEY (`cache_id`) REFERENCES `mysite`.`core_cache` (`id`))

I tried to 

SET FOREIGN_KEY_CHECKS=0;
TRUNCATE core_cache_tag;
TRUNCATE core_cache;
SET FOREIGN_KEY_CHECKS=1;

but no luck when i flushed again. 
```

# android - API 16 中的 Android 选项卡 ico

> ID：13611426
> 
> 赞同：1
> 
> 时间：2012-11-28T17:54:57.737
> 
> 标签：android, api

我有一个应用程序，其中包含 4 个选项卡和每个选项卡的图标图像。我正在使用 TabActivity 和 TabHost。

setIndicator ("示例", getResources().getDrawable(R.drawable.tabicon));

该应用程序适用于 API 8，当我在清单文件中有以下内容时：

但是当我明确地将 targetSdkVersion="16" 放在清单中时，选项卡图标没有显示。

如何在不更改一堆代码的情况下保留选项卡图标？API 16 是否有我可以遵循的选项卡图标代码示例？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:01:31.897

`TabActivity`并`TabHost`在 API 11 中被弃用。

而是使用[`ActionBar`](http://developer.android.com/guide/topics/ui/actionbar.html#Tabs)with Tabs（[此处为示例](https://github.com/Leandros/ActionBar-with-Tabs)），为了与低于 11 的 API 版本兼容，请使用[ActionBarSherlock](http://actionbarsherlock.com)。

**不要再使用旧的 API！**

# java - Java：对象在路径上移动，忽略某些坐标。怎么修？

> ID：13611430
> 
> 赞同：2
> 
> 时间：2012-11-28T17:55:11.770
> 
> 标签：java

我有一个从 A 点移动到随机点 B 的圆圈。当对象靠近 B 点时，会选择一个新的随机目标位置。如果圆平行于 X 轴或 Y 轴移动，则对象将穿过所有的像素并留下实心轨迹。但是如果圆对角移动，它会跳过像素并轻微晃动，使动画不流畅并留下未绘制像素的痕迹。

我的算法是：

1.  计算 X 和 Y 距离
2.  检查圆圈是否在附近
3.  如果是，请选择新目的地
4.  如果 2\. 为真，则使用毕达哥拉斯定理找到真实距离
5.  如果2.为真，计算X和Y速度（坐标的变化）
6.  设置新坐标（无论 2\. 是否为真）

这是代码：

```
 public void move ()//движение
  {
      //finds the X and Y distance to the destination
      int triangleX = nextLocationX - coorX;
      int triangleY = nextLocationY - coorY;
      //if too near the coordinates of the destination changes
      if (Math.abs(triangleX) <= Math.abs(speedX) || Math.abs(triangleY) <= Math.abs(speedY))//setting the new target
      {
          //setting the new destinatio
          int randInt;
          for (;;)//I don't want the the new destination to be that same spot
          {
              randInt= randGen.nextInt(appletX);
              if (randInt != nextLocationX)
              {
                  nextLocationX = randInt + radius;
                  break;
              }
          }
          for (;;)
          {
              randInt = randGen.nextInt(appletY);
              if (randInt != nextLocationY)
              {
                  nextLocationY = randInt + radius;
                  break;
              }
          }
          //calculating the change of the circle's X and Y coordinates
          triangleX = nextLocationX - coorX;
          triangleY = nextLocationY - coorY;
          speedX = ((double)(speed * triangleX) / (Math.sqrt (Math.pow(triangleX, 2) + Math.pow(triangleY, 2))));
          speedY = ((double)(speed * triangleY) / (Math.sqrt (Math.pow(triangleX, 2) + Math.pow(triangleY, 2))));
      }
      //the realCoor variables are from type double
      //they are the exact coordinates of the circle
      //If I only use integers, the circle almost
      //never reaches it's destination
      //unless the change of the coordinates gets calculated
      //after every time they change
      realCoorX = realCoorX + speedX;
      realCoorY = realCoorY + speedY;
      coorX = (int)Math.round(realCoorX);
      coorY = (int)Math.round(realCoorY);
  } 
```

我怀疑问题出在坐标变化的计算上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T19:58:06.657

对我来说，这听起来像是一个混叠问题。如果您绘制（！）一条与坐标轴不对齐的线，您将遇到同样的问题。如您所知，即对角线需要“半填充”像素才能看起来平滑。

您的解决方案是（取决于渲染技术）使用浮点位置计算。

# android - Android应用程序崩溃？

> ID：13611434
> 
> 赞同：1
> 
> 时间：2012-11-28T17:55:25.153
> 
> 标签：android, crash, android-activity, restart

我创建了一个应用程序，单击按钮说 [next] 。我正在调用一个方法，该方法的工作是生成 5 个随机数并将它们随机设置为 5 个按钮，单击每个按钮时，它将随机选择一个小（2 秒）音频文件并播放它。如果我单击按钮 [next] 超过 8 次，我的整个应用程序将重新启动。

logcat 没有显示任何错误...

```
TextView addNo1, addNo2;
Button option1, option2, option3, option4, next;
Random randomGenerator;
Integer randomInt1, randomInt2;
int flag = 0, setans;
MediaPlayer wa1,wa2,wa3,wa4,wa5,wa6,wa7;
MediaPlayerHelper m;
MediaPlayer mp1, mp2, mp3, mp4, mp5, mp6, mp7, mp8, mp9, mp10, mp11, mp12,
        mp13, mp14, mp15, mp16, mp17, mp18, mp19, mp20;
int correctmusiclist[] = { R.raw.correct1, R.raw.correct2, R.raw.correct3,
        R.raw.correct4, R.raw.correct5, R.raw.correct6, R.raw.correct7,
        R.raw.correct8, R.raw.correct9, R.raw.correct10, R.raw.correct11,
        R.raw.correct12, R.raw.correct13, R.raw.correct14, R.raw.correct15 };
int wrongmusiclist[] = {R.raw.wrong1,R.raw.wrong2,R.raw.wrong3,R.raw.wrong4,R.raw.wrong5,R.raw.wrong6,
        R.raw.wrong7}; 
Context context = Addition.this;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.additionactivity);
    addNo1 = (TextView) findViewById(R.id.textView1);
    addNo2 = (TextView) findViewById(R.id.textView2);
    option1 = (Button) findViewById(R.id.addoption1);
    option2 = (Button) findViewById(R.id.addoption2);
    option3 = (Button) findViewById(R.id.addoption3);
    option4 = (Button) findViewById(R.id.addoption4);
    next = (Button) findViewById(R.id.button1);
    next.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            nextChangeAdd();
        }
    });
    m = new MediaPlayerHelper(Addition.this);
    randomGenerator = new Random();
    Typeface tf = Typeface.createFromAsset(getAssets(),
            "fonts/StefanieDots.ttf");
    addNo1.setTypeface(tf);
    nextChangeAdd();

}

public void nextChangeAdd() {
    randomInt1 = randomGenerator.nextInt(10);
    randomInt2 = randomGenerator.nextInt(10);
    setans = randomGenerator.nextInt(5);
    if (setans == 0) {
        setans++;
    }
    int ans = randomInt1 + randomInt2;
    String addans = Integer.toString(ans);
    addNo1.setText(randomInt1.toString());
    addNo2.setText(randomInt2.toString());
    List<Integer> generated = new ArrayList<Integer>();
    for (int i = 0; i < 3; i++) {
        while (true) {
            Integer next = randomGenerator.nextInt(19) + 1;
            if (!generated.contains(ans)) {
                generated.add(next);
                break;
            }
        }
    }

    switch (setans) {
    case 1:
        flag = 1;
        option1.setText(addans);
        option1.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                getAudio();
            }
        });

        break;
    case 2:
        flag = 2;
        option2.setText(addans);
        option2.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                getAudio();
            }
        });

        break;
    case 3:
        flag = 3;
        option3.setText(addans);
        option3.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                getAudio();
            }
        });
        break;
    case 4:
        flag = 4;
        option4.setText(addans);
        option4.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                getAudio();
            }
        });
                    break;
    }
    String a2 = generated.get(0).toString();
    String a3 = generated.get(1).toString();
    String a4 = generated.get(2).toString();

    if (flag == 1) {
        option2.setText(a2);
        option2.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                wrongAns();
            }
        });
        option3.setText(a3);
        option3.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                wrongAns();
            }
        });
        option4.setText(a4);
        option4.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                wrongAns();
            }
        });
    }
    if (flag == 2) {
        option1.setText(a2);
        option2.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                wrongAns();
            }
        });
        option3.setText(a3);
        option3.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                wrongAns();
            }
        });
        option4.setText(a4);
        option4.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                wrongAns();
            }
        });
    }
    if (flag == 3) {
        option2.setText(a2);
        option2.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                wrongAns();
            }
        });
        option1.setText(a3);
        option1.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                wrongAns();
            }
        });
        option4.setText(a4);
        option4.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                wrongAns();
            }
        });
    }

    if (flag == 4) {
        option2.setText(a2);
        option2.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                wrongAns();
            }
        });
        option3.setText(a3);
        option3.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                wrongAns();
            }
        });
        option1.setText(a4);
        option1.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                wrongAns();
            }
        });
    }
}

public void getAudio() {
    Random randomGenerator = new Random();
    int i = randomGenerator.nextInt(10);
    mp1 = MediaPlayer.create(context, correctmusiclist[0]);
    mp2 = MediaPlayer.create(context, correctmusiclist[1]);
    mp3 = MediaPlayer.create(context, correctmusiclist[2]);
    mp4 = MediaPlayer.create(context, correctmusiclist[3]);
    mp5 = MediaPlayer.create(context, correctmusiclist[4]);
    mp6 = MediaPlayer.create(context, correctmusiclist[5]);
    mp7 = MediaPlayer.create(context, correctmusiclist[6]);
    mp8 = MediaPlayer.create(context, correctmusiclist[7]);
    mp9 = MediaPlayer.create(context, correctmusiclist[8]);
    mp10 = MediaPlayer.create(context, correctmusiclist[9]);
    mp11 = MediaPlayer.create(context, correctmusiclist[10]);
    mp12 = MediaPlayer.create(context, correctmusiclist[11]);
    mp13 = MediaPlayer.create(context, correctmusiclist[12]);
    mp14 = MediaPlayer.create(context, correctmusiclist[13]);
    mp15 = MediaPlayer.create(context, correctmusiclist[14]);
    switch (i) {
    case 1:
        mp1.start();
        break;
    case 2:
        mp2.start();
        break;
    case 3:
        mp3.start();
        break;
    case 4:
        mp4.start();
        break;
    case 5:
        mp5.start();
        break;
    case 6:
        mp6.start();
        break;
    case 7:
        mp7.start();
        break;
    case 8:
        mp8.start();
        break;
    case 9:
        mp9.start();
        break;
    case 10:
        mp10.start();
        break;
    case 11:
        mp11.start();
        break;
    case 12:
        mp12.start();
        break;
    case 13:
        mp13.start();
        break;
    case 14:
        mp14.start();
        break;
    case 15:
        mp15.start();
        break;
    default:
        mp10.start();
    }

}

public void wrongAns()
{
    Random randomGenerator = new Random();
    int i = randomGenerator.nextInt(10);
    wa1 = MediaPlayer.create(context, wrongmusiclist[0]);
    wa2 = MediaPlayer.create(context, wrongmusiclist[1]);
    wa3 = MediaPlayer.create(context, wrongmusiclist[2]);
    wa4 = MediaPlayer.create(context, wrongmusiclist[3]);
    wa5 = MediaPlayer.create(context, wrongmusiclist[4]);
    wa6 = MediaPlayer.create(context, wrongmusiclist[5]);
    wa7 = MediaPlayer.create(context, wrongmusiclist[6]);
    switch (i) {
    case 1:
        wa1.start();
        break;
    case 2:
        wa2.start();
        break;
    case 3:
        wa3.start();
        break;
    case 4:
        wa4.start();
        break;
    case 5:
        wa5.start();
        break;
    case 6:
        wa6.start();
        break;
    case 7:
        wa7.start();
        break;
    default:
        wa7.start();
} 
```

} }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:52:39.470

首先，用于播放随机音频的 getAudio() 和 wrongAns() 是完全错误的，因为您通过创建这么多 MediaPlayer 对象完全搞砸了它。您需要在此处仅在生成随机数时创建一个 MediaPlayer 对象并在 switch case 中播放声音。像这样的东西

```
 Random randomGenerator = new Random();
 int i = randomGenerator.nextInt(10);

switch (i) {
case 1:
    wa1 = MediaPlayer.create(context, wrongmusiclist[1]);
    wa1.start();
    break;
case 2: 
    wa1 = MediaPlayer.create(context, wrongmusiclist[2]);
    wa1.start();
    break; 
```

并将 wa1 作为类级别变量。

**更新** 使用此功能播放音频

```
public void playBeep() {
try {

    if (m.isPlaying()) {
        m.stop();
        m.release();
        m = new MediaPlayer();
    }
    AssetFileDescriptor descriptor = getAssets().openFd("beepbeep.mp3");
    m.setDataSource(descriptor.getFileDescriptor(), descriptor.getStartOffset(), descriptor.getLength());
    descriptor.close();

    m.prepare();
    m.setVolume(1f, 1f);
    m.setLooping(true);
    m.start();
} catch (Exception e) {
}
} 
```

并将文件路径存储在字符串数组中。并将随机数传递给此函数并从数组中选择随机索引到不同的文件路径。

# iphone - UITableViewCell 按钮在单元格中展开文本 - 怎么做？

> ID：13611435
> 
> 赞同：-1
> 
> 时间：2012-11-28T17:55:41.047
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有一个`UITableView`包含 10 个部分的列表，每个部分包含一个`textLabel`.

我将每个单元格中的文本数量限制为 10 行，并放置一个按钮以允许用户扩展单元格中的文本。

问题是，当在“显示更多”（如果单元格未展开）和“显示更少”（如果单元格已展开）之间单击按钮时，我想更改按钮上的文本。我怎样才能做到这一点？

现在我在`cellForRowAtIndexPath`. 它似乎无法正常工作，有时当仅显示 10 行时按钮显示“显示较少”。

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"ButtonCell"];

if (!cell) {

  UIButton *readmoreButton = [UIButton buttonWithType:UIButtonTypeCustom];

    [readmoreButton setTitle:@"Read More" forState:UIControlStateNormal];
  [cell addSubview:readmoreButton];

}
else {

  NSEnumerator *e = [cell.subviews objectEnumerator];
  id object;
  while (object = [e nextObject]) {
    if ([object class]==UIButton.class && [((UIButton*)object).titleLabel.text isEqualToString:@"Read Less"])
      ((UIButton*)object).titleLabel.text = @"Read More";
    }
} 
```

当用户单击按钮时，将调用以下方法。`NSMutableArray` `ProposalInfo`跟踪哪个单元格是/未扩展的。

```
- (void)toggleFullProposal:(id) sender {

// get cell
NSIndexPath *index = [self.tableView indexPathForCell:(UITableViewCell *)[sender superview]];

ProposalInfo *proposalInfo = [self.proposalInfoArray objectAtIndex:index.section];

if ([proposalInfo expanded]==YES) {

    [proposalInfo setExpanded:NO];

    [(UIButton *)sender setTitle:@"Read More" forState:UIControlStateNormal];

}  else {

    [proposalInfo setExpanded:YES];

    [(UIButton *)sender setTitle:@"Read Less" forState:UIControlStateNormal];

}

// create index paths to reload
NSMutableArray *indexPathsToReload = [[NSMutableArray alloc] init];
[indexPathsToReload addObject:[NSIndexPath indexPathForRow:0 inSection:index.section]];

// refresh
[self.tableView reloadRowsAtIndexPaths:indexPathsToReload withRowAnimation:UITableViewRowAnimationNone];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:17:56.870

单击按钮时，请确保现在将全文设置为单元格。然后只重新加载单元格并注意您需要修复标签的高度，`layoutSubviews:`然后返回适当的高度`heightForRowAtIndexPath:`。

`((MyCell*)[tableview cellForRowAtIndexPath:buttonClickedindexPath]).fullText = myModel.fullText;`

并在`layoutSubviews`自定义类单元格的 : 方法中扩展标签的框架以适合里面的文本，然后返回适当的高度，`heightForRowAtIndexPath:`这应该可以解决问题。

# javascript - 无法使用 Sigma.js 显示任何图表

> ID：13611443
> 
> 赞同：7
> 
> 时间：2012-11-28T17:56:06.353
> 
> 标签：javascript, graph, sigma.js

我想在 Web 界面上可视化一个大型网络图。经过几天的搜索，我决定使用 Sigma.js，因为它看起来很简单并且兼容 HTML5。

问题是我无法显示来自 Sigma.js 网页的任何图形示例，即使我使用作者在 Sigma.js 主页上拥有的最少代码也是如此。我什至用右键单击查看代码复制粘贴了整个网页，但徒劳无功（[像这样](http://sigmajs.org/examples/gexf_example.html)）。我已将所有必要的文件粘贴到简单 .html 文件所在的同一文件夹中（css 文件、js 文件，甚至示例所需的 .gexf 文件），但我只得到一个带有黑色矩形的页面，仅此而已。图表不显示。我究竟做错了什么？

我是否需要首先构建 sigma.js 文件，正如作者在 GitHub 库的代码存储库中提到的那样？我需要这个工具来可视化图表（我将动态地为图表提供数据）但我什至无法尝试一些简单的代码！我什至按照[那个“指南”](http://noduslabs.com/radar/sigma-js-online-graph-visualization-tool/)做了每一步，但我什么都做不了。

Webstudio：Microsoft Expression Web 4 和操作系统：Windows 8 Pro（我尝试在 IE10、FF17 和 Chrome 23 中打开网页）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T15:40:24.697

必须定位您想要拥有图表的 div `absolute`。我认为这是一个画布问题。

所以html

```
<!DOCTYPE html>
<html>
  <head>
    <script src="http://sigmajs.org/js/sigma.min.js"></script>
    <script src="/js/sigmatest.js"></script>
    <link rel="stylesheet" href="/css/sigma.css">
  </head>
  <body>
    <div id="sigma-parent">
      <div id="sigma-example">
      </div>
    </div>
  </body>
</html> 
```

的CSS

```
#sigma-parent {
  width: 500px;
  height: 500px;
  position: relative;
}    

#sigma-example {
  position: absolute;
  width: 100%;
  height: 100%;
} 
```

里面的js`sigmatest.js`

```
function init() {
  var sigRoot = document.getElementById('sigma-example');
  var sigInst = sigma.init(sigRoot);
  sigInst.addNode('hello',{
    label: 'Hello',
    x: 10,
    y: 10,
    size: 5,
    color: '#ff0000'
  }).addNode('world',{
    label: 'World !',
    x: 20,
    y: 20,
    size: 3,
    color: '#00ff00'
  }).addEdge('hello_world','hello','world').draw();
}

if (document.addEventListener) {
  document.addEventListener('DOMContentLoaded', init, false);
} else {
  window.onload = init;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-20T10:51:30.047

这可能不会帮助很多人，但在我的情况下，只是我没有为每个节点指定`x`或`y`属性。我试图使用该`forceAtlas2`算法自动“放置”我的节点，但没有意识到必须先将它们绘制在某个位置才能应用布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-08T10:08:45.187

Sigma js 存在浏览器兼容性问题。尝试更新 bowser 或使用其他浏览器。

我使用 Firefox，它运行良好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T06:54:50.913

确保您已下载此文件[http://sigmajs.org/data/arctic.gexf](http://sigmajs.org/data/arctic.gexf) 并在代码中正确引用了路径

# ios - TabBarController 内的 NavigationController，反之亦然？

> ID：13611451
> 
> 赞同：1
> 
> 时间：2012-11-28T17:56:39.297
> 
> 标签：ios

如果这很简单或在其他地方得到回答，我深表歉意，但我似乎找不到它。

我正在构建一个选项卡式应用程序，其中一些（但不是全部）选项卡视图需要导航。我是不是该：

1）使用`UITabBarController`导航子视图本身就是`UINavigationController`实例的根控制器。

2）使用`UINavigationController`包含`TabBar`实例的根控制器，并在不需要导航服务的选项卡上隐藏栏导航。

3) 完全不同的架构。

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:14:50.317

如果我理解你的选择，你想做#1。连接到选项卡的视图控制器可以是导航控制器。在情节提要中，您可以从选项卡式应用程序模板开始，删除默认提供给您的视图控制器，拖入 UINavigationController，然后使用关系 segue 将其重新连接到 tabBarController。

# java - Java 属性图打印问题

> ID：13611455
> 
> 赞同：1
> 
> 时间：2012-11-28T17:56:54.327
> 
> 标签：java, loops, printing, properties

我想创建一个使用例如`-dMyProps=123`（而不是参数（args））接收属性的应用程序。我了解这些属性在地图中。所以我会使用它。

```
public void getProperties() {

map myMap = System.getProperties();    
myMap.get();
... 
```

如果有多个属性，我如何阅读它们并全部打印出来？

`System.out.println(whatever needs to printed here);`

如果有人可以帮助我，我认为必须在 for 循环或增强 for 循环中完成，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:41:04.970

假设`map myMap = System.getProperties();`, `map`is`java.util.Map`这实际上是不正确的。 `System.getProperties();`将返回一个`Properties`类对象；可以根据您的要求进行处理。例如：

`Properties prop = System.getProperties();`

`Set<Object> set= prop.keySet();` `//Returns a Set view of the keys contained in this map.`

# javascript - jquery拖放pep：我怎样才能找到我的对象坐标

> ID：13611457
> 
> 赞同：0
> 
> 时间：2012-11-28T17:56:54.763
> 
> 标签：javascript, jquery, jquery-plugins

**你好！**

我使用 Jquery pep 进行拖放。

我可以让它可拖动，但我不知道如何获取对象的当前位置..

**这是我的代码：**

```
var options = {
            cssEaseDuration: 1000
           start:          function(ev,obj){ $('#title').text('Start!'); },
           drag:           function(ev,obj){ 
           console.log("we're dragging!");
          // **I have to know here the coordinates**
           },
           rest:           function(ev,obj){ 
console.log("stopped!"); 

 }
            };

       rectangle.pep(options); 
```

**这是演示页面： http:** [//pep.briangonzalez.org/demo](http://pep.briangonzalez.org/demo)

（您可以在此页面中看到，在调试模式下，您可以看到坐标 - 右下角 - 但我无法使用它）

**完整信息：** [http ://www.wwvalue.com/web-design/jquery/kinetic-drag-with-jquery-css3-and-html5.html](http://www.wwvalue.com/web-design/jquery/kinetic-drag-with-jquery-css3-and-html5.html)

**非常感谢您的帮助！！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:19:09.747

```
jQuery(document).ready(function(){
   $(document).mousemove(function(e){
      console.log(e.pageX +', '+ e.pageY);
   }); 
}) 
```

此处的完整文档：http://docs.jquery.com/Tutorials: [Mouse_Position](http://docs.jquery.com/Tutorials:Mouse_Position)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:10:46.073

好的，我找到了解决方案，非常简单：

```
var Drag1 = sym.$("Drag1");
var drag = $(Drag1).position();
console.log('x: ' + drag.left + 'y: ' + drag.top); 
```

不管怎么说，还是要谢谢你 ：）

# php - 格式化 PHP 结果

> ID：13611459
> 
> 赞同：-2
> 
> 时间：2012-11-28T17:57:01.770
> 
> 标签：php, html, sql

我希望在 SQL 中获取单行的内容以及标题并将它们格式化，如下所示：

```
Name: lastname, firstname
address: 123 pine st
zip: 12345 
```

而不是它们被拉出并以类似表格的格式显示在 PHP 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:03:04.113

行。试一试：

```
$result = mysql_query("SELECT * FROM your_table");
while($row = mysql_fetch_array($result)){
    printf('Name: %s, %s<br/>', $row['fist_name'], $row['last_name']);
    printf('address: %s<br/>', $row['address']);
    printf('zip: %s', $row['zip']);
} 
```

由于您没有列出您的 SQL 模式，我无法更准确地定义一些 printf 参数。所以看看PHP手册中的printf方法。

[http://php.net/manual/en/function.printf.php](http://php.net/manual/en/function.printf.php)

# java - 地理编码服务：可以与 JAVA Web 应用程序一起使用，因为它是可靠的

> ID：13611461
> 
> 赞同：1
> 
> 时间：2012-11-28T17:57:08.667
> 
> 标签：java, geocoding, yahoo-api, cloudmade, mapquest

因为这是一个非常古老的话题，需要问一个问题。但是因为我对最能证明什么地理编码服务有同样的困惑。

我正在开发基于 Java 的 Web 应用程序，我需要在其中实现以下功能

*   对地址进行地理编码
*   执行反向地理编码
*   在地图上显示路线
*   计算两个纬度/经度之间的距离和时间
*   如果可能，还提供建议路线的选项，以便用户可以决定最快或最短的路线

最初我从 cloudemade API 开始，它适用于上述所有功能，但在少数情况下，在反向地理编码和地理编码地址中，它不会给出任何纬度/经度结果

接下来我也尝试使用 MapQuest，但在少数情况下它无法对特定地址进行地理编码

现在我用雅虎搜索，但根据我的搜索，雅虎没有自己的地图来显示，也没有路由功能，我需要在这里手动计算距离

任何人都可以建议我哪些服务可以更可靠和准确，并包含上述功能

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:39:41.777

免责声明：我为 MapQuest 工作。

我不能说哪种地理编码服务更可靠、更准确，仅仅是因为地理编码的性质；有很多变量会影响结果——街道名称是否拼写错误，是否有额外的“第 2 行”地址信息（即“公寓 #5，2 楼”），地址是否正确以及官方地址（即，美国邮政局、加拿大邮政等官方认可的地址）？反向地理编码也是如此 - 您传递的坐标是否与街道足够接近以进行反向地理编码，或者坐标是在森林中间​​还是在水体中？我认为很难找到绝对完美的服务，但这些是可能影响结果的一些问题。而且当然，

无论哪种方式——如果你想再看一遍，MapQuest 提供了一个[地理编码 API](http://developer.mapquest.com/web/products/dev-services/geocoding-ws)（许可/商业数据 - 每日交易限制）和一个[开放地理编码 API](http://developer.mapquest.com/web/products/open/geocoding-service)（基于 OpenStreetMap 数据 - 完全免费使用，没有限制），并且MapQuest 提供的其他 API 也可以满足您列出的其他要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T19:16:08.537

如果您想比较 Google API、MapQuest 和 Cloud Made，您可以查看这个小实用程序，它会向您显示确切位置并显示有助于调试应用程序的 json。该实用程序可在以下网址访问：

[http://ankit-zalani.appspot.com/GeoCode/index.jsp](http://ankit-zalani.appspot.com/GeoCode/index.jsp)

# javascript - 为什么 bower 安装包两次？

> ID：13611463
> 
> 赞同：12
> 
> 时间：2012-11-28T17:57:12.283
> 
> 标签：javascript, node.js, npm, yeoman, bower

当我使用 Yeoman（在幕后使用 Bower）安装软件包时，我看到 bower 将每个软件包安装了两次。

*   项目根目录下的第一个`components`文件夹
*   另一个内部`app/components`文件夹

例如，当我运行命令时`yeoman install jquery`

我的项目目录将如下所示

```
 root-directory
 |- app
 .  |- components
 .  .  |- jquery        // <<-- jquery  
 .  .  ... rest of the components
 |- components
 .  |- jquery           // <<-- jquery ... again
 .  ... same other components 
```

*   为什么我对每个组件都有一个副本，我应该使用哪一个？
*   我想最好的做法是从我的应用程序中引用这些组件，并且永远不要更改它们，以便我可以轻松更新它们，对吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T02:19:58.160

这是作为临时 hack 完成的，因为 /app 文件夹中需要有组件，因为 Bower 没有指定组件目录的方法。现在可以了，而且很快就会解决。

您可以在此处关注错误：[https ://github.com/yeoman/yeoman/issues/622](https://github.com/yeoman/yeoman/issues/622)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T11:09:43.703

这已在 Yeoman 的 1.0 Beta 中得到修复。[http://yeoman.io/road.html](http://yeoman.io/road.html)

团队决定 yeoman 应该只进行项目的*设置*，而将依赖项的实际构建和安装分别留给 grunt 和 bower。

这意味着您现在可以：

```
$ yo init
... setup
$ npm install
... get node modules
$ bower install
... get bower components
$ grunt server
... run the server 
```

# django - Dotcloud，Postgres Django上的数据库错误

> ID：13611466
> 
> 赞同：0
> 
> 时间：2012-11-28T17:57:13.173
> 
> 标签：django, postgresql, dotcloud

我正在使用 Dotcloud 部署我的 django 应用程序。我使用 Postgres 作为数据库。

我的应用程序有一个新模型，我想刷新和同步数据库。当我这样做时，一切正常。我的新模型，名为“竞争”出现在我的管理员中。

问题是另一个模型 Match 与模型 Competition 有一个 ForeignKey。当我在管理员中转到“匹配”时，出现此错误：

```
 DatabaseError at /admin/myproject/match/
     column myproject_match.competition_id does not exist
     LINE 1: ...team_challenger_id", "sportdub_match"."sport_id", "sportdub_... 
```

关于为什么syncdb没有让它工作的任何想法？

谢谢您的帮助。

编辑：我的两个模型

```
 class Competition(models.Model):
       name = models.CharField(max_length=256)
       comp_pic = models.ImageField(upload_to="comp_pics/")

       def __unicode__(self):
           return self.name

     class Match(models.Model):
        team_host = models.ForeignKey(Team, related_name='host_matches')
        team_challenger = models.ForeignKey(Team, related_name= 'challenger_matches')
        sport = models.ForeignKey(Sport)
        competition = models.ForeignKey(Competition) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:09:34.233

`manage.py syncdb`只会创建*丢失*的表。如果表已经存在，但定义无效，则不会更新。这很可能是您遇到的问题。

至少有三种方法可以解决这个问题。

1.  最简单的方法：用于`manage.py reset`有效地删除+重新创建所有表。很简单，但是您当然会丢失数据。
2.  懒惰的方式：安装`django_extensions`和使用`manage.py sqldiff`. 它将向您展示数据库的当前结构与预期结构之间的差异。`sqldiff`将很好地向您展示可以更新现有数据库以符合您的模型的 SQL 语句。然后，您可以在 SQL shell 中执行这些语句。
3.  干净的方法：使用迁移框架`south`来处理数据库模式更新。当然，如果您处于开发的早期阶段，这是大材小用的（您不想在进行本地开发时每次添加/更改/删除字段时都编写数据库迁移！）但是如果您的项目需要更长的时间寿命，我绝对建议检查一下`south`。

# sql-server-2008 - 从 Visual Studio 数据库项目部署执行 SSIS 包？

> ID：13611474
> 
> 赞同：1
> 
> 时间：2012-11-28T17:57:47.973
> 
> 标签：sql-server-2008, ssis

我们有一个夜间流程来创建数据库的清理副本，以便我们的开发人员可以在他们的开发环境中使用它们。他们还原数据库，然后从 Visual Studio 2010 中的数据库项目运行数据库部署以获取更新的架构。

我正在开发一个 SSIS 包，它将数据从主数据库复制到临时表中，然后复制到存档中以进行报告。完成后，我希望数据库部署启动 SSIS 包，以便它更新存档数据库，有没有办法做到这一点？

源数据库和目标数据库都将在解决方案中。我认为源数据库部署将保持不变，不依赖于目标，反之亦然。目标数据库项目上的部署是在部署后立即调用包执行的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:06:24.553

除非我遗漏了什么，否则请在您的夜间流程中添加一个步骤来启动 SSIS 包。[SQL 代理有一个明确的工作步骤来启动 SSIS 包，但如果你的过程不是那样，只需对DTEXEC](http://msdn.microsoft.com/en-us/library/ms162810%28v=sql.105%29.aspx)进行操作系统调用

```
dtexec.exe /file C:\RepliScrubberPackage.dtsx 
```

# asp.net-mvc - 如何在 AJAX 帖子上刷新我的剃刀视图

> ID：13611485
> 
> 赞同：2
> 
> 时间：2012-11-28T17:58:27.380
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery, razor, asp.net-mvc-4

大家好，

我可以使用 ajax.post 发布到控制器，但是成功后如何使用新数据刷新我的视图。

我需要使用 @Html.BeginForm 来执行此操作吗？

这是我的看法。

```
<div>
    <p>Order lines allocates to <b>@Model.Name (@Model.Code) </b>
</div>

@if (Model.OrderLineAllocations.Any())
{

    @grid.GetHtml(
             columns: grid.Columns(
                 grid.Column(header: "Dispatched", style: "row-selector", format: @<text><input name="chkSelected" class="myCheckbox" onclick="expandableEvent(this)" type="checkbox" value="@item.IdAllocation" /></text>),
                 grid.Column(header: "Order Ref", format: item => item.OrderLineItem.OrderLine.Order.OrderRef)
                 ),
             tableStyle: "expandable-table",
             rowStyle: "expandable-master-row",
             htmlAttributes: new { id = "gridLineAllocations" })
    <br />
    <input type="hidden" id="hidUnselectedValues" name="hidUnselectedValues" />

    <input type="submit" name="action" value="Dispacth" id="btnDispacth" />
    <input type="submit" name="action" value="Revert" id="btnRevert" />

}
else
{
    @Html.Raw("No records found....");
} 
```

这是我的ajax帖子

```
$(document).ready(function() {
    unSelected = [];
    $("#btnDispacth").click(dipatchAllocations);
    $("#btnRevert").click(revertAllocations);
});

function dipatchAllocations() {
    var objInputEmail = $("#hidUnselectedValues");

    if (objInputEmail != null) {
        var id = objInputEmail.val();
        if ((id != null) && (id != "")) {
            $.ajax({
                type: 'POST',
                url: '/Batch/GetData',
                data: '{ "allocationId" : "' + id + '","batchId" : "' + @Model.Id + '" }',
                contentType: "application/json; charset=utf-8",
                //contentType:"application/x-www-form-urlencoded",
                traditional: true,
                success: subscribed,
                error: errorInSubscribing
            });
        } else {
            alert('Please enter a valid email address in order to subscribe.');
        }
    }
}; 
```

这是我的控制器动作

```
[HttpPost]
public ActionResult GetData(long[] allocationId,long batchId)
{
    var model = context.GetData(batchId)
    model.Name = "asdaksdjaksdj";
    return View("Finalize", model);
} 
```

我有一些想法，我必须在成功回电时这样做。但我不确定如何将更新的模型绑定到客户端的视图。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T18:25:21.417

mvc里面没有简单的“rebind”方法，最后还是html、css和js。
我看到了 2 个选项来实现所需的行为。

### 选项 1\. 使用 POST 的结果覆盖呈现的内容

在这种情况下，您的视图将类似于：

```
<div id="content">
  <div>
    <p>Order lines allocates to <b>@Model.Name (@Model.Code) </b>
  </div>
  ...
  else
  {
    @Html.Raw("No records found....");
  }
</div> 
```

在 JavaScript 上：

```
$.ajax({
    type: 'POST',
    url: '/Batch/GetData',
    dataType: "html",
    success: function(data, textStatus, jqXHR){
        $('#content').html(data);
    }
}); 
```

### 选项 2\. 在每次加载时从 javascript 填充呈现的 html

这将需要将 Razor 逻辑移动到 javascript。您的视图将如下所示：

```
<div>
    <p>Order lines allocates to <b id="NameAndCode"></b>
</div> 
```

而javascript将填补空白：

```
$(function(){
  var model = {
    NameAndCode: "@Model.Name (@Model.Code)"
  }

  fillView(model);

})

var fillView = function(data){
  $('#NameAndCode').html(data.NameAndCode)
}

$.ajax({
    type: 'POST',
    url: '/Batch/GetData',
    dataType: "json",
    success: function(data, textStatus, jqXHR){
        fillView(data);
    }
}); 
```

这只是一小部分，只是为了展示这个想法。

这取决于选择哪个选项。

# javascript - 设置输入字段的值时，它只会出现片刻。

> ID：13611488
> 
> 赞同：-1
> 
> 时间：2012-11-28T17:58:48.633
> 
> 标签：javascript, input

我确定我在这里遗漏了一些基本部分，但请看一下我非常简单的代码：

```
<html>
<head>
<script>
function showscore(){

var score = document.createTextNode("test");
var placeholder = document.getElementById("field");
placeholder.value = score.nodeValue;

}
</script>
</head>
<body>
<form>
<input type="text" id="field"/>
<input type="submit" value="Show score" onclick="javascript:showscore()" />
</form>
</body>
</html> 
```

当我运行它时，结果（目前，“测试”一词）在输入字段中出现了很短的时间，然后消失了。

我错过了什么非常简单和容易的事情？:-)

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:07:30.440

这是因为你的按钮是一个`<input type="submit />`，所以在你的 Javascript 执行后，浏览器会提交表单。

如果您不想提交表单，则可以使用 an`<input type="button" />`代替。

或者，您可以在通话后将其保留为 a`submit`和。这将阻止表单提交。`return false;``showscore()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:07:32.640

那是因为页面正在提交表单。只需更改`type="submit"`或`type="button"`阻止表单提交即可。

# ios - UIWebView 在横向模式下不覆盖整个视图

> ID：13611489
> 
> 赞同：3
> 
> 时间：2012-11-28T17:58:49.097
> 
> 标签：ios, ipad, uiwebview, landscape

我正在开发一个 iPad 应用程序，当用户通过登录表单进行身份验证时，它将以模态方式在 UIWebView 中加载网页。这很好用，但是当我将设备旋转到横向模式时，webview 只覆盖了 75% 的屏幕：

![显示问题的屏幕截图](../Images/3976b3e78b8b944a9a1a4f4e0570fa07.png)

这是我的登录视图控制器中的代码：

```
 // Load storyboard for easy instatiation of the login view controller
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPad" bundle:nil];
    WebViewController *webController =
    (WebViewController *)[storyboard instantiateViewControllerWithIdentifier:@"WebView"];

    // Present the embedded browser in fullscreen.
    [webController setModalPresentationStyle:UIModalPresentationFullScreen];
    [self presentViewController:webController animated:YES completion: nil]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T19:22:50.963

您是否使用约束或自动调整大小的蒙版？如果没有，您可能想要使用它们并确保 Web 视图覆盖整个视图的框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:10:23.897

你所要做的就是`UIWebView`在`-shouldAutorotateToInterfaceOrientation`你的`WebViewController`.

它是这样的，

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {

 if(toInterfaceOrientation == UIInterfaceOrientationPortrait)
 {
     webView.frame = CGRectMake (0, 0 768, 1024);
 }
 else 
 {
     webView.frame = CGRectMake (0, 0 1024, 768);
 }
 return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-15T08:05:19.297

1.  使用 webView 委托 2.Include 这个方法
    *   (void)webViewDidFinishLoad:(UIWebView *)webView { [self.webView setFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)]; }
        }
2.  也包括这个

    *   (void)willAnimateRotationToInterfaceOrientation: (UIInterfaceOrientation)toInterfaceOrientation 持续时间:(NSTimeInterval)duration { [self.webView setFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)]; }

# asp.net - Visual Studio 2010 和 IIS

> ID：13611490
> 
> 赞同：-1
> 
> 时间：2012-11-28T17:58:49.263
> 
> 标签：asp.net, visual-studio-2010, iis

IIS 是否包含在 Visual Studio 2010 Ultimate Edition 中，还是我必须单独下载？此外，是否需要 IIS，以便我可以运行本地服务器来测试 asp.net 中的网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:02:24.317

[Visual Studio 2010 Service Pack 1](http://support.microsoft.com/kb/983509)包括从 VS2010 内部使用[IIS Express的选项](http://www.microsoft.com/en-us/download/details.aspx?id=1038)

# javascript - 通过 javascript 更改 html 元素属性不会改变外观

> ID：13611491
> 
> 赞同：0
> 
> 时间：2012-11-28T17:58:49.797
> 
> 标签：javascript, html, css

我有一个带有导航栏的 html 页面。理想情况下，一旦用户选择一个选项，该选项的背景图像就会改变。但是，我无法通过使用 javascript 动态更改列表属性来实现这一点。

的HTML：

```
<html>
<head>
<link href="includes/css/content.css" rel="stylesheet" type="text/css">
<script>
function select(id)
{
    alert(id);
    var list = document.getElementsByTagName('li');
    for(var i=0;i<list.length;i++)
    {
        list[i].class='random';
    }
    document.getElementById(id).class='selected';
}
</script>
</head>
<body>
<div id="mainContent">
            <div class = 'nav'>
                <ul>
                    <li class='selected' id='home' onClick="select(this.id)"><a href="#" ><span  style='color:gray'>Home</span></a></li>
                    <li id='system' onClick="select(this.id)"><a href="#" ><span  style='color:gray'>Systems</span></a></li>
                    <li id='temp' onClick="select(this.id)" ><a href="#"><span  style='color:gray'>Notification Template</span></a></li>

                </ul>
        </div>
</body>
</html> 
```

css 文件如下所示：

```
.nav .selected a{
background-size:cover;
background: url(../images/nav.gif) no-repeat top;
color:white;
} 
```

我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:04:21.180

`class`HTMLElement 不存在该属性。用于`className`设置 css 类。

有关属性的完整列表 - 请参阅[http://www.w3schools.com/jsref/dom_obj_all.asp](http://www.w3schools.com/jsref/dom_obj_all.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:04:13.853

如果您以这种方式设置类，则需要使用`.className`[ [https://developer.mozilla.org/en-US/docs/DOM/element.className](https://developer.mozilla.org/en-US/docs/DOM/element.className) ]

# excel - 编译错误：找不到项目或库

> ID：13611496
> 
> 赞同：0
> 
> 时间：2012-11-28T17:59:09.107
> 
> 标签：excel, vba, dll, reference, compatibility

我从某人那里获得了一个 excel 文档，该文档是几年前由另一个人使用 excel 2003 创建的。我尝试打开并运行他的代码，但出现错误：编译错误：找不到项目或库。

我查看了参考，这是写的：缺少：12 授权控制 1.0 类型库。

我尝试过的事情：

*   所以我下载了dll并将其添加到路径中，但这并没有解决问题。

*   我已经从选项中取消选中这个缺失的引用，这次代码确实运行了。

但它没有按预期工作。生成按钮应该在书签处的 word 文档中生成一个表格（也在 .c 文件中）。**单击生成按钮时确实**修改了word文档，但是工作表中添加的行`io_list`并没有添加到word文件中。

这个问题的原因是缺少dll吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:12:13.903

我是一个缺失的参考。

选中此框`Microsoft office 14 authorizaiton Controle 1.0 ...`

相反，它会起作用。

# java - JDB 和附加选项

> ID：13611497
> 
> 赞同：0
> 
> 时间：2012-11-28T17:59:09.713
> 
> 标签：java, debugging, jdb

我在一次测试中被问到这个问题，但我不确定答案是什么，而且我在这里和网上的其他任何地方都找不到它。所以我希望这里的人能给我一个快速的答案和一个快速的解释：

> 使用以下命令调试 Java 程序：
> 
> jdb - 附加 2121
> 
> 根据上述情况，调试会话期间不可用的命令是：
> 
> 打印。b) 线程。c) 运行。D) 倾倒。e) 续。

我知道 attach 与 jdb 一起使用，以将调试器连接到特定的进程和 VM。但我不知道哪个进程不可用。我很确定您可以在虚拟机中使用多个线程，因此可以享受折扣 b 和 c。我不知道为什么你不能使用 print 或 cont——那是 a 和 e。最后是转储，但我仍然不确定。

任何人都知道。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:12:35.267

答案是：c) 运行。因为“此命令仅在 jdb 启动已调试的应用程序时可用（而不是附加到现有 VM）”。有关详细信息，请参阅[jdb](http://docs.oracle.com/javase/1.3/docs/tooldocs/solaris/jdb.html)手册页。

# bash - C64 代码艺术的 Bash 版本：10 PRINT CHR$(205.5+RND(1))；: 转到 10

> ID：13611501
> 
> 赞同：23
> 
> 时间：2012-11-28T17:59:23.680
> 
> 标签：bash, c64

我拿起一本书**10 PRINT CHR$(205.5+RND(1)); : 转到 10**

*   [http://www.amazon.com/10-PRINT-CHR-205-5-RND/dp/0262018462](https://rads.stackoverflow.com/amzn/click/com/0262018462)

本书讨论了 Commodore 64 BASIC 单行所产生的艺术：

```
10 PRINT CHR$(205.5+RND(1)); : GOTO 10 
```

* * *

这只是从 PETSCII 集合中重复地将字符 205 或 206 随机打印到屏幕上：

*   [http://en.wikipedia.org/wiki/PETSCII](http://en.wikipedia.org/wiki/PETSCII)
*   [https://vimeo.com/26472518](https://vimeo.com/26472518)

我不确定为什么原版使用字符 205 和 206 而不是相同的 109 和 110。另外，我更喜欢在开头添加一个 clear。这是我通常在 C64 中输入的内容：

```
1?CHR$(147)
2?CHR$(109.5+RND(1));:GOTO2
RUN 
```

您可以在模拟器中自己尝试这一切，例如使用 Flash 或 JavaScript 的模拟器：

*   [http://codeazur.com.br/stuff/fc64_final/](http://codeazur.com.br/stuff/fc64_final/)
*   [http://www.kingsquare.nl/jsc64](http://www.kingsquare.nl/jsc64)

    将上述代码输入到列出的模拟器中时，您需要意识到

    *   （ 是 *
    *   ） 是 （
    *   + 是 ]

* * *

我决定写一个 bash 行来做类似的事情会很有趣。

我目前有：

```
clear; while :; do [ $(($RANDOM%2)) -eq 0 ] && (printf "\\") || (printf "/"); done; 
```

两个问题：

1.  有什么建议可以让这个更简洁吗？
2.  对更好的输出字符有什么建议吗？正斜杠和反斜杠几乎没有那么漂亮，因为它们的点不对齐。PETSCII 中使用的字符是特殊字符，而不是斜线。我没有在 ASCII 中看到任何可以正常工作的东西，但也许你可以建议一种从 UTF-8 或其他东西中提取字符的方法？

* * *

**迄今为止最好的答案**

bash 最短（40 个字符）：

```
yes 'c=(╱ ╲);printf ${c[RANDOM%2]}'|bash 
```

这是一个简短的 zsh（53 个字符）：

```
c=(╱ ╲);clear;while :;do printf ${c[RANDOM%2+1]};done 
```

这是我喜欢在 .bashrc 或 .profile 中添加的别名

```
alias art='c=(╱ ╲);while :;do printf "%s" ${c[RANDOM%2]};done' 
```

有趣的是，将此与我可以为 C64 BASIC（23 个字符）做的最短比较：

```
1?C_(109.5+R_(1));:G_1 
```

下划线分别为 shift+H、shift+N 和 shift+O。我无法在此处粘贴字符，因为它们是 PETSCII 特有的。此外，C64 输出看起来更漂亮；）

您可以在此处阅读有关 C64 BASIC 缩写的信息：

*   [http://www.commodore.ca/manuals/c64_programmers_reference/c64-programmers_reference_guide-02-basic_language_vocabulary.pdf](http://www.commodore.ca/manuals/c64_programmers_reference/c64-programmers_reference_guide-02-basic_language_vocabulary.pdf)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T18:31:43.493

在看了一些 UTF 的东西之后：

```
2571 BOX DRAWINGS LIGHT DIAGONAL UPPER RIGHT TO LOWER LEFT
2572 BOX DRAWINGS LIGHT DIAGONAL UPPER LEFT TO LOWER RIGHT 
```

（╱和╲）似乎最好。

```
f="╱╲";while :;do print -n ${f[(RANDOM % 2) + 1]};done 
```

也可以在 zsh 中工作（感谢 OFTC 的 Clint 给了我一些信息）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-28T18:51:25.073

这个怎么样？

```
# The characters you want to use
chars=( $'\xe2\x95\xb1' $'\xe2\x95\xb2' )
# Precompute the size of the array chars
nchars=${#chars[@]}
# clear screen
clear
# The loop that prints it:
while :; do
    printf -- "${chars[RANDOM%nchars]}"
done 
```

作为具有较短变量名称的单行代码以使其更简洁：

```
c=($'\xe2\x95\xb1' $'\xe2\x95\xb2'); n=${#c[@]}; clear; while :; do printf -- "${c[RANDOM%n]}"; done 
```

如果您事先知道要打印多少个字符，则可以摆脱循环（此处为 80*24=1920）

```
c=($'\xe2\x95\xb1' $'\xe2\x95\xb2'); n=${#c[@]}; clear; printf "%s" "${c[RANDOM%n]"{1..1920}"}" 
```

或者，如果您想直接包含字符而不是它们的代码：

```
c=(╱‬ ╲); n=${#c[@]}; clear; while :; do printf "${c[RANDOM%n]}"; done 
```

最后，`c`预先计算数组的大小并删除不必要的空格和引号（我不能比这更短）：

```
c=(╱‬ ╲);clear;while :;do printf ${c[RANDOM%2]};done 
```

此行使用的字节数：

```
$ wc -c <<< 'c=(╱‬ ╲);clear;while :;do printf ${c[RANDOM%2]};done'
59 
```

**编辑。**使用命令的一种有趣方式`yes`：

```
clear;yes 'c=(╱ ╲);printf ${c[RANDOM%2]}'|bash 
```

它使用 50 个字节：

```
$ wc -c <<< "clear;yes 'c=(╱ ╲);printf \${c[RANDOM%2]}'|bash"
51 
```

或 46 个字符：

```
$ wc -m <<< "clear;yes 'c=(╱ ╲);printf \${c[RANDOM%2]}'|bash"
47 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-02T14:03:42.817

这是我刚刚发布到[@climagic](http://www.twitter.com/climagic)的 39 个字符的命令行解决方案：

```
grep -ao "[/\\]" /dev/urandom|tr -d \\n 
```

在 bash 中，您可以删除 [/\] 匹配表达式周围的双引号，使其比 C64 解决方案更短，但我将它们包括在内是为了获得良好的度量和跨 shell 兼容性。如果 grep 有 1 个字符的选项来使 grep 修剪换行符，那么您可以使这 27 个字符。

我知道这不使用 Unicode 字符，所以可能不算数。可以在 /dev/urandom 中对 Unicode 字符进行 grep，但这将花费很长时间，因为该序列出现的频率较低，并且如果您通过管道传输它，命令管道可能会“粘住”很长一段时间，然后再产生任何到期的东西行缓冲。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-02T14:07:49.337

Bash 现在支持 Unicode，所以我们不需要使用 UTF-8 字符序列，例如 $'\xe2\x95\xb1'。

这是我*最正确的*版本：它像其他人一样根据随机数循环、打印 / 或 \。

```
for((;;x=RANDOM%2+2571)){ printf "\U$x";}
41 
```

我以前最好的是：

```
while :;do printf "\U257"$((RANDOM%2+1));done
45 
```

而这个使用嵌入式 Unicode 的“作弊”（我认为出于显而易见性、可维护性和简单性，这是我的最爱）。

```
Z=╱╲;for((;;)){ printf ${Z:RANDOM&1:1};}
40 
```

我以前最好的是：

```
while Z=╱╲;do printf ${Z:RANDOM&1:1};done
41 
```

还有更多。

```
while :;do ((RANDOM&1))&&printf "\U2571"||printf "\U2572";done
while printf -v X "\\\U%d" $((2571+RANDOM%2));do printf $X;done
while :;do printf -v X "\\\U%d" $((2571+RANDOM%2));printf $X;done
while printf -v X '\\U%d' $((2571+RANDOM%2));do printf $X;done
c=('\U2571' '\U2572');while :;do printf ${c[RANDOM&1]};done
X="\U257";while :;do printf $X$((RANDOM%2+1));done 
```

现在，这个运行直到我们得到一个堆栈溢出（不是另一个！），因为 bash 似乎还不支持尾调用消除。

```
f(){ printf "\U257"$((RANDOM%2+1));f;};f
40 
```

这是我尝试实现一种粗略的尾部过程消除形式。但是当你受够了并按下 ctrl-c 后，你的终端就会消失。

```
f(){ printf "\U257"$((RANDOM%2+1));exec bash -c f;};export -f f;f 
```

更新：

还有一些。

```
X=(╱ ╲);echo -e "\b${X[RANDOM&1]"{1..1000}"}" 46
X=("\U2571" "\U2572");echo -e "\b${X[RANDOM&1]"{1..1000}"}" 60
X=(╱ ╲);while :;do echo -n ${X[RANDOM&1]};done 46
Z=╱╲;while :;do echo -n ${Z:RANDOM&1:1};done 44 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-03T22:31:09.943

抱歉，发布了 38 个字符的 bash 版本。

```
yes 'printf \\u$[2571+RANDOM%2]'|bash 
```

使用`for`而不是将其`yes`膨胀到 40 个字符：

```
for((;;)){ printf \\u$[2571+RANDOM%2];} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-03-13T18:38:37.660

Python 3 为 109 chr，这是我能得到的最小的。

```
#!/usr/bin/python3
import random
while True:
    if random.randrange(2)==1:print('\u2572',end='') 
    else:print('\u2571',end='') 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-01-19T09:13:41.990

```
#!/usr/bin/python3
import random
import sys

while True:
    if random.randrange(2)==1:sys.stdout.write("\u2571")
    else:sys.stdout.write("\u2572")
    sys.stdout.flush() 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-08-09T21:07:51.003

这是适合 127 个字符的 Batch 版本：

```
cmd /v:on /c "for /l %a in (0,0,0) do @set /a "a=!random!%2" >nul & if "!a!"=="0" (set /p ".=/" <nul) else (set /p ".=\" <nul)" 
```

# javascript - What's the difference between using (document).ready and jQuery(function ($)?

> ID：13611502
> 
> 赞同：2
> 
> 时间：2012-11-28T17:59:29.527
> 
> 标签：javascript, jquery, html

> **Possible Duplicate:**
> [What is the difference between these jQuery ready functions?](https://stackoverflow.com/questions/2662778/what-is-the-difference-between-these-jquery-ready-functions)

I have always used:

```
$(document).ready(function (){
    //Code goes here
}); 
```

And inserted my jQuery/JavaScript code therein (so that it waits on the html page to be fully loaded before running any code).

Lately, I have seen this:

```
jQuery(function($){
    //Code goes here
}); 
```

I have searched for what the difference is here (mainly what the 'jQuery' part is all about).

My questions:

*   What does the `jQuery` part of the latter code block do, if anything?
*   What is the '($)' argument doing for that function?
*   Is there even a difference (other than making the page wait to be loaded) between my two code block examples?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T18:02:12.083

The main difference is the closure around the `$` variable. The first snippet assumes that the `$` variable has not been released (by using [.noConflict()](http://api.jquery.com/jQuery.noConflict/) or if another library you are using also makes use of `$` but not as the jQuery variable).

The second implementation is safer because it doesn't make any assumptions but allows your internal code to safely use the `$` variable by making it a parameter.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T18:01:12.117

It is the same thing:

Using `jQuery(function(){})` is just a shorthand for `$(document).ready(function (){});`

**Note:** you can use `$` or `jQuery`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T18:04:17.753

They're the same. [**From the documentation**](http://api.jquery.com/jQuery/):

```
JQuery Call back (jQuery( callback )) 
```

> "This function behaves just like $(document).ready(), in that it should be used to wrap other $() operations on your page that depend on the DOM being ready. While this function is, technically, chainable, there really isn't much use for chaining against it."

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T18:02:13.067

They are nearly the same.

In the second function you are passing in `jQuery` i.e. `$` into the function. `$` is shorthand for the `jQuery`.

Straight from the jQuery library code for when you call `$()`

```
// tests to see if you passed in a function
} else if (jQuery.isFunction(selector)) { 
    // adds the function to be called when jQuery fires the ready event
    return rootjQuery.ready(selector); 
} 
```

Comments are mine.

# cpu - 解释不同 NUMA 节点上的 perf 工具结果

> ID：13611506
> 
> 赞同：1
> 
> 时间：2012-11-28T17:59:59.453
> 
> 标签：cpu, scheduler, numa, perf

我想使用 perf 工具解释我的程序的一个有趣行为。

**一些背景资料**

我的机器有 4 个 NUMA 节点，我的主要应用程序正在机器上运行。使用 cpusets 我对机器进行分区，为应用程序提供 3 个节点，为系统提供 1 个节点。在同一台机器上运行单元测试（用于记录改进）时，我得到了我正在尝试使用 perf 工具进行调查的意外行为。

**出乎意料的行为**是，在应用程序正在运行的 NUMA 节点上（比如说 node2），我在 unittest 上获得了更好的时间，大约是 unittest 在具有系统的 NUMA 节点上运行时的两倍（比如说节点 3)。看起来像在 node2 的 CPU 上运行（一个不做自旋锁的 cpu）我得到比在另一个 numa 上运行更好的结果。

我正在尝试改进我的日志记录系统，因此测试正在进行的工作也由应用程序完成，将一些日志消息写入队列以便稍后转储到磁盘（不同的线程）。对队列的争用由自旋锁 (CAS) 控制。unitest 是一个具有 2 个循环的写入器线程：100 次，将 1000 条日志写入队列，RDTSC（我的选择）用于测量每个内部循环，然后打印统计信息。队列足够大，我得到一个标准偏差，内存操作减少到最低限度（没有 memcpy）。阅读器正在转储到另一个线程上的磁盘。

我尝试停止我的应用程序并再次运行测试。在这种情况下，我看到无论选择哪个 NUMA 节点来运行我的测试，我都会得到与在 node3 上运行类似的结果（慢），这意味着如果我在同一个 numa 上运行我的测试，正在运行的应用程序正在加速我的测试应用程序运行的节点。对我来说非常不直观。

**使用以下 perf 工具命令获取一些数据**

```
rm /tmp/a; rm /tmp/ats; for f in $(perf list | tr -s ' ' | cut -d' ' -f 2 ); do perf stat -o /tmp/ats --append -e $f taskset -c $(cat /sys/devices/system/node/node2/cpulist) ./bin/testCore >> /tmp/a 2>&1;perf stat -o /tmp/ats --append -e $f taskset -c $(cat /sys/devices/system/node/node3/cpulist) ./bin/testCore >> /tmp/a 2>&1;done 
```

并使用命令进行分析

```
cat /tmp/ats | grep -v "#" | grep -v "^ *$" | grep -v "seconds time elapsed\|Performance\|supported" | grep -v " 0 " | tr -s ' ' | tr -d ',' | awk '{if(knownEvent[$2]){if(((knownEvent[$2]/$1)<0.95) || ((knownEvent[$2]/$1)>1.05)){printf "diff:%s %.2f(%d/%d)\n",$2,(knownEvent[$2]/$1),knownEvent[$2],$1}}else{knownEvent[$2]=$1}}'| more
diff:branch-misses 1.08(470184/435284)
diff:bus-cycles 0.70(25570333/36774093)
diff:cpu-clock 0.69(191/276)
diff:L1-dcache-prefetch-misses 1.05(624172/593780)
diff:LLC-loads 0.92(665199/720197)
diff:LLC-load-misses 1.16(217684/187823)
diff:LLC-prefetches 0.87(193398/222148)
diff:LLC-prefetch-misses 0.85(98653/115483)
diff:dTLB-load-misses 1.09(195668/180291)
diff:dTLB-store-misses 1.11(39755/35910)
diff:scsi:scsi_dispatch_cmd_start 1.38(11/8)
diff:block:block_rq_insert 0.58(36/62)
diff:block:block_rq_issue 1.50(12/8)
diff:block:block_bio_backmerge 1.05(683/650)
diff:block:block_getrq 0.57(36/63)
diff:block:block_plug 0.52(26/50)
diff:kmem:mm_pagevec_free 1.06(16853/15838)
diff:kmem:mm_kernel_pagefault 0.88(7/8)
diff:timer:timer_start 0.36(21/59)
diff:timer:timer_expire_entry 3.00(3/1)
diff:timer:timer_expire_exit 2.00(2/1)
diff:timer:timer_cancel 1.60(8/5)
diff:timer:hrtimer_start 0.93(1275/1368)
diff:timer:hrtimer_expire_entry 0.72(186/259)
diff:timer:hrtimer_expire_exit 0.69(182/264)
diff:timer:hrtimer_cancel 0.74(192/259)
diff:irq:softirq_entry 0.64(374/585)
diff:irq:softirq_exit 0.74(394/536)
diff:irq:softirq_raise 0.73(390/531)
diff:sched:sched_wakeup 0.75(3/4)
diff:sched:sched_stat_wait 0.50(1/2)
diff:sched:sched_stat_sleep 2.00(2/1)
diff:sched:sched_stat_runtime 0.93(1284/1379) 
```

我提取了我看到的包含一些差异的内容。 **不确定我是否应该怀疑 sched-、LLC-、branch-、TLB，因为我不知道相对差异是否解释了我看到的行为。**

有什么更好的调查方法的建议吗？

# php - 有没有更简单的方法可以从 mysqli 结果集中设置数组

> ID：13611513
> 
> 赞同：-4
> 
> 时间：2012-11-28T18:00:17.903
> 
> 标签：php, mysqli

有没有人知道从 mysqli 的结果集中设置此联系人数组的更简单方法？如果 sql 查询中有语法错误，是否有人有任何好的 mysqli insert php 函数（程序）很容易调试？

```
$result = mysqli_query($link, 'SELECT id, name, contactNo, email, address, county, country, sourceOfContact, type FROM contacts');

while ($row = mysqli_fetch_array($result))
{
$contacts[] = array('id' => $row['id'],
                    'name' => $row['name'],
                    'contactNo' => $row['contactNo'],
                    'email' => $row['email'],
                    'address' => $row['address'],
                    'county' => $row['county'],
                    'country' => $row['country'],
                    'sourceOfContact' => $row['sourceOfContact'],
                    'type' => $row['type']

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T18:03:27.047

只需阅读相应的 PHP 手册页并

```
$result = mysqli_query($link, 'SELECT id, name, contactNo, email, address, county, country, sourceOfContact, type FROM contacts');

while ($row = mysqli_fetch_array($result, MYSQLI_ASSOC))
{
    $contacts[] = $row;
} 
```

....如果您看的话，您可以在手册中看到令人惊奇的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:06:29.350

```
$result = mysqli_query($link, 'SELECT id, name, contactNo, email, address, county, country, sourceOfContact, type FROM contacts');

while ($row = mysqli_fetch_array($result))
{ 
$contacts[] = $row;
} 
```

好多了，你得到相同的结果。

此外，关于您的问题，只需创建一个包装函数并始终使用诸如 db_mysqli_query(...) 之类的函数，它会自动执行您希望的查询错误处理。当您要进行查询时，请记住调用您的查询函数而不是内置的 mysql 查询函数。

PS你的问题有点难以理解，而且问题太宽泛了。但我还是尽力回答了。

# asp.net - 如何在 PDF 文件中强制横向打印

> ID：13611514
> 
> 赞同：0
> 
> 时间：2012-11-28T18:00:18.700
> 
> 标签：asp.net, pdf, pdf-generation

与 C#.net 网站有关...我想生成一个 pdf 文件服务器端，让它在客户端打开，并自动横向打印。这可能吗？非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:06:03.303

您可以将 PDF 定向为横向，但不能将打印机设置为以横向模式自动打印。这是您无法从浏览器访问的设置。

# delphi - Indy ping 是否需要 UAC 提升？

> ID：13611525
> 
> 赞同：5
> 
> 时间：2012-11-28T18:01:00.417
> 
> 标签：delphi, ping, indy

Indy ICMP 组件是否需要管理员权限才能 ping？

如果我在打开 UAC 但没有提升权限的情况下运行，我会收到“拒绝访问”错误消息。
看看[这个问题](https://stackoverflow.com/questions/7687401/why-does-ping-work-without-administrator-privileges)，听起来 Indy ICMP 使用 RAW 套接字，因此需要提升权限？

我正在使用 Delphi 2007 & Indy 10.x 进行开发并在 Windows 7 Pro 下进行测试。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T18:18:23.653

我的同事发现[这篇文章](http://embarcadero.newsgroups.archived.at/public.delphi.internet.winsock/200812/081213768.html)指出 Indy ICMP 组件使用 RAW Windows 套接字，在 Vista 或更高版本下需要提升权限才能在 UAC 下运行。

我调整了程序以请求 UAC 提升，现在它可以正常工作了。

另一种方法是直接调用 ICMPSendEcho() 及其相关函数。

# wpf - 使用telerik radgrid在一行中只选择一个单选按钮

> ID：13611528
> 
> 赞同：0
> 
> 时间：2012-11-28T18:01:08.187
> 
> 标签：wpf, telerik, radio-button, radgrid

我在 Telerik radgridview 中有 2 个单选按钮列，我想连续选择一个单选按钮 怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:51:01.377

正如user1834059所说，使用该`GroupName`属性。每行`GroupName`应该是唯一的，因此请使用您的 DataKey 或任何其他对每行唯一的 dataItem 值（某些 id）。

```
<telerik:RadGrid ID="RadGrid1" runat="server" >
        <MasterTableView 
                        DataKeyNames="myDataKey">
            <Columns>

                ...Your columns...

                <telerik:GridTemplateColumn>
                    <ItemTemplate>
                        <asp:RadioButton ID="radioButton1" runat="server"
                                        Text="Your text"
                                        GroupName='{Binding myDataKey}' />
                    </ItemTemplate>
                </telerik:GridTemplateColumn>
                <telerik:GridTemplateColumn>
                    <ItemTemplate>
                        <asp:RadioButton ID="radioButton2" runat="server"
                                        Text="Your text"
                                        GroupName='{Binding myDataKey}' />
                    </ItemTemplate>
                </telerik:GridTemplateColumn>
            </Columns>
        </MasterTableView>
    </telerik:RadGrid> 
```

# javascript - Google Charts API Line Chart - 悬停时如何显示多个值？

> ID：13611532
> 
> 赞同：3
> 
> 时间：2012-11-28T18:01:13.053
> 
> 标签：javascript, charts, google-visualization, linechart

使用谷歌的折线图时，如果您将鼠标悬停在某个点上，它会为您提供有关该点的信息。例如，如果一个点位于`x:3, y:50`且 y 轴称为英寸，则将鼠标悬停在这些点上会如下所示：

```
.----------.
|3         |
|Inches: 50|
`----------` 
```

当我获取数据时，每个点也存储一个额外的值。所以我的数组看起来像：`[[3, 50, 20], [4, 52, 22], [5, 54, 24]]`当我悬停时，我希望它看起来像这样：

```
.----------.
|Time: 3   |
|Inches: 50|
|Extra: 20 |
`----------` 
```

所以我有两个问题是：

1.  **如何在我的 x 值之前添加“时间：”标签？**
2.  **如何添加要显示的第三个值？**

这是我拥有的代码。这样做是创建第二行而不是将数据添加在一起。[**你可以看看这里**](http://jsfiddle.net/pQsDZ/1/)明白我的意思。你也可以将鼠标悬停在这些点上，看看我在说什么。我确信有一种简单的方法可以做到这一点，我只是错过了一些东西。

```
function drawVisualization() {
    // Create and populate the data table.
    var data = google.visualization.arrayToDataTable([
      ['Time', 'Inches', 'Extra'],
      [  3   ,    50   ,    20  ],
      [  4   ,    52   ,    22  ],
      [  5   ,    54   ,    24  ]
    ]);

    // Create and draw the visualization.
    new google.visualization.LineChart(document.getElementById('visualization')).
        draw(data, {curveType: "function",
                    width: 500, height: 400,
                    vAxis: {title: 'Inches', maxValue: 10},
                    hAxis: {title: 'Time'}}
        );
}

google.setOnLoadCallback(drawVisualization); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-03T14:12:50.600

我解决了这个在选项中添加“focusTarget：'category'”的问题：

```
draw(data,{..., focusTarget: 'category'} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:54:47.900

我找到了解决方案。这不是我最喜欢的，因为重复数据不是最有效的方式，但无论如何，它是一种解决方案，所以我会在这里发布。

第一个问题来自我创建数据表的方式。`arrayToDataTable`是有用的，但它是有限的。所以我离开了。这允许我添加自己的列，并在创建这些列时更具描述性。例如，关键是分配一个`role`. 因此，我创建了用于绘制图表的前 2 列，然后添加了第三列，其中包含 的类型`string`和角色`tooltip`。

当我现在将数据添加到我的图表时，对于第三列，当我将鼠标悬停在一个点上时，我准确地传递了我想要显示的内容。这就是重复数据的来源。这没什么大不了的，但我认为可能有更好/更直接的方法。无论如何，[**这是我的新图表的链接**](http://jsfiddle.net/pQsDZ/4/)，这是我的代码：

```
function drawVisualization() {
    // Create and populate the data table.
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Time');
    data.addColumn('number', 'Inches');
    data.addColumn({type: 'string', role: 'tooltip'});

    data.addRow(['3', 50, 'Time: 3\n Inches: 50\n Extra: 20']);
    data.addRow(['4', 52, 'Time: 4\n Inches: 52\n Extra: 22']);
    data.addRow(['5', 54, 'Time: 5\n Inches: 54\n Extra: 24']);

    // Create and draw the visualization.
    new google.visualization.LineChart(document.getElementById('visualization')).
        draw(data, {curveType: "function",
                    width: 500, height: 400,
                    vAxis: {title: 'Inches', maxValue: 10},
                    hAxis: {title: 'Time'}}
        );
}

google.setOnLoadCallback(drawVisualization); 
```

# c# - C# - 'Double' 是一个模棱两可的引用

> ID：13611534
> 
> 赞同：2
> 
> 时间：2012-11-28T18:01:20.523
> 
> 标签：c#, case-sensitive, disambiguation

我的代码库中有以下文件：

**StandardUnits.Numbers.Double**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace StandardUnits.Numbers
{
    public class Double : Number<double>
    {
        public Double(double value) : base(value) { }
        public static implicit operator Double(double value) { return new Double(value); }
        public static implicit operator double(Double value) { return value._value; }
    }
} 
```

和

**标准单元测试程序**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using StandardUnits;
using StandardUnits.Numbers;

namespace StandardUnitsTest
{
    class Program
    {
        static void Main(string[] args)
        {
            Equatable<string> str = "Hello! This is my number: ";
            Number<float> n = 4;
            Double o = 5.5;
            Float p = n + o;

            Console.WriteLine(str + p.ToString());
            Console.Read();
        }
    }
} 
```

出于某种原因，使用“Double”会产生以下错误：

```
Error 1 'Double' is an ambiguous reference between 'double' and 'StandardUnits.Numbers.Double' 16 13 
```

但是“Float”不会产生这样的错误，它的制作方式与“Double”相同（但显然用“float”而不是“double”）。为什么编译器能够区分`StandardUnits.Numbers.Float`and `float`，但不能区分`StandardUnits.Numbers.Double`and `double`？为什么区分大小写不能阻止这种情况？

如果需要，我也可以提供 Number 和 Float 的代码片段。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-28T18:03:30.540

[与System.Double](http://msdn.microsoft.com/en-us/library/system.double.aspx)存在冲突。

没有 System.Float （`float`由[System.Single](http://msdn.microsoft.com/en-us/library/system.single.aspx)代替），因此没有冲突。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-28T18:03:50.900

的 CLR 类型`double`是[`System.Double`](http://msdn.microsoft.com/en-us/library/system.double.aspx). 这就是歧义。

的 CLR 类型`float`是[`System.Single`](http://msdn.microsoft.com/en-us/library/system.single.aspx). 这与您的类型没有歧义`Float`......尽管它确实建议您的类型应该`Single`改为命名，以与框架保持一致。理想情况下，更改名称以便它们*不会*与命​​名空间中的类型冲突`System`……假设您*确实*需要这些类型。（他们增加了什么好处？）

这实际上与 C#中的and别名和区分大小写*无关。*这些只是 和 的硬连线别名，永远不会模棱两可。这是你的使用是模棱两可的。`float``double``System.Single``System.Double``Double`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T18:03:34.220

System.Double 已经存在（它内置在语言中。）我很好奇您为什么要创建自己的版本。

[http://msdn.microsoft.com/en-us/library/system.double.aspx](http://msdn.microsoft.com/en-us/library/system.double.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-28T18:04:14.910

这是因为有一个[`System.Double`](http://msdn.microsoft.com/en-us/library/system.double.aspx)类型（它的别名是`double`）但没有`System.Float`：它被称为[`System.Single`](http://msdn.microsoft.com/en-us/library/system.single.aspx)- 它的别名是`float`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T18:04:15.630

命名空间中已经有一个`Double`类`System`（`double`是它的别名），所以如果你使用`Double`，编译器不知道你指的是哪一个。

但是，`float`是 的别名`System.Single`。没有`System.Float`，所以没有冲突。

请参阅[“内置类型”](http://msdn.microsoft.com/en-us/library/ya5y69ds%28v=vs.80%29.aspx)。

# javascript - 将变量插入 onClick 事件 Google Analytics 虚拟综合浏览量

> ID：13611552
> 
> 赞同：0
> 
> 时间：2012-11-28T18:02:19.447
> 
> 标签：javascript, onclick, google-analytics

由于 AJAX 对页面的更新，我正在使用 js 获取当前页面的 URL，其中包含哈希标记

```
var hash = location.href; 
```

一个 URL 看起来像`http://www.example.com/#project1`

我需要的是这个谷歌虚拟网页浏览代码，只在它说的地方显示哈希变量路径`hash here`

`onClick="_gaq.push(['_trackPageview', 'hash here']);"`

看起来像`onClick="_gaq.push(['_trackPageview', '/#project1']);"`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:37:48.403

我想你正在寻找`location.hash`...

```
function track() {
  _gaq.push(['_trackPageview', location.hash]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:08:07.597

做这个：

```
onClick="pushGA();"

function pushGA() {
     _gaq.push(['_trackPageview', (window.location.path + window.location.hash)]);
} 
```

或者：

```
onClick="pushGA();"

function pushGA(path) {
     _gaq.push(['_trackPageview', ('/#'+window.location.hash)]);
} 
```

或者：

```
onClick="pushGA('/#project');"

function pushGA(path) {
     _gaq.push(['_trackPageview', path]);
} 
```

# quickfix - quickfix 消息存储的目的是什么？

> ID：13611556
> 
> 赞同：4
> 
> 时间：2012-11-28T18:02:37.327
> 
> 标签：quickfix

quickfix 中消息存储结构的目的是什么？我知道您可以通过消息存储接口记录所有传入和传出的修复消息，并且 quickfix 提供了多种实现，例如文件存储等。

我的问题是，除了记录您的修复消息以供记录之外，您为什么还要关心消息存储？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T22:10:00.990

您混淆了 MessageStore 和 Log，这是两个不同的东西。

**MessageStore**供内部引擎使用。它跟踪当前传入和传出的消息序列号、会话开始时间和其他内容。如果您的应用程序由于某种原因出现故障，当它重新启动时，它会使用 MessageStore 从中断的地方恢复序列号以及是否重置会话。

但是，**Log**只是一个日志。引擎并不关心它。这是给开发者的。

# jboss - JBoss 5.1 在 AIX 上无法启动（只是挂起，没有错误消息）

> ID：13611559
> 
> 赞同：0
> 
> 时间：2012-11-28T18:02:44.053
> 
> 标签：jboss, jboss5.x

这是消息并在启动调度程序后挂起。没有错误信息。有什么建议可以找出问题吗？昨天还好好的，今天早上才重新开始。已部署的应用程序没有更改。但是我们有大约一百万条 jms 消息，全部从 JBoss 管理控制台中删除。

```
12:30:40,233 INFO  [ProfileServiceBootstrap] Loading profile: ProfileKey@11c611c6[domain=default, server=default, name=default]
[2012-11-28 12:33:51,325] [main] [WARN ] org.jboss.jms.server.jbosssx.JBossASSecurityMetadataStore: WARNING! POTENTIAL SECURITY RISK. It has been detected that the MessageSucker component which sucks messages from one node to another has not had its password changed from the installation default. Please see the JBoss Messaging user guide for instructions on how to do this.
[2012-11-28 12:33:51,606] [main] [WARN ] org.jboss.annotation.factory.AnnotationCreator: No ClassLoader provided, using TCCL: org.jboss.managed.api.annotation.ManagementComponent
[2012-11-28 12:33:51,964] [main] [WARN ] org.jboss.annotation.factory.AnnotationCreator: No ClassLoader provided, using TCCL: org.jboss.managed.api.annotation.ManagementComponent
[2012-11-28 12:33:52,153] [main] [INFO ] com.arjuna.ats.jbossatx.jta.TransactionManagerService: JBossTS Transaction Service (JTA version - tag:JBOSSTS_4_6_1_GA) - JBoss Inc.
[2012-11-28 12:33:52,153] [main] [INFO ] com.arjuna.ats.jbossatx.jta.TransactionManagerService: Setting up property manager MBean and JMX layer
[2012-11-28 12:33:52,606] [main] [INFO ] com.arjuna.ats.jbossatx.jta.TransactionManagerService: Initializing recovery manager
[2012-11-28 12:33:52,933] [main] [INFO ] com.arjuna.ats.jbossatx.jta.TransactionManagerService: Recovery manager configured
[2012-11-28 12:33:52,933] [main] [INFO ] com.arjuna.ats.jbossatx.jta.TransactionManagerService: Binding TransactionManager JNDI Reference
[2012-11-28 12:33:53,006] [main] [INFO ] com.arjuna.ats.jbossatx.jta.TransactionManagerService: Starting transaction recovery manager
[2012-11-28 12:33:54,434] [main] [INFO ] org.apache.catalina.core.AprLifecycleListener: The Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: {my path displayed here}
[2012-11-28 12:33:55,335] [main] [INFO ] org.apache.coyote.http11.Http11Protocol: Initializing Coyote HTTP/1.1 on http-0.0.0.0-8080
[2012-11-28 12:33:55,424] [main] [INFO ] org.apache.coyote.ajp.AjpProtocol: Initializing Coyote AJP/1.3 on ajp-0.0.0.0-8009
[2012-11-28 12:33:55,463] [main] [INFO ] org.apache.catalina.core.StandardService: Starting service jboss.web
[2012-11-28 12:33:55,465] [main] [INFO ] org.apache.catalina.core.StandardEngine: Starting Servlet Engine: JBoss Web/2.1.3.GA
[2012-11-28 12:33:55,594] [main] [INFO ] org.apache.catalina.startup.Catalina: Server startup in 170 ms
[2012-11-28 12:34:01,723] [main] [INFO ] org.quartz.simpl.SimpleThreadPool: Job execution threads will use class loader of thread: main
[2012-11-28 12:34:01,765] [main] [INFO ] org.quartz.core.QuartzScheduler: Quartz Scheduler v.1.5.2 created.
[2012-11-28 12:34:01,773] [main] [INFO ] org.quartz.simpl.RAMJobStore: RAMJobStore initialized.
[2012-11-28 12:34:01,773] [main] [INFO ] org.quartz.impl.StdSchedulerFactory: Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
[2012-11-28 12:34:01,773] [main] [INFO ] org.quartz.impl.StdSchedulerFactory: Quartz scheduler version: 1.5.2
[2012-11-28 12:34:01,773] [main] [INFO ] org.quartz.core.QuartzScheduler: Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:19:23.667

我通过删除数据/超音速文件夹并重新启动解决了这个问题。它有很大的 .script 文件（JBoss 在此处保留 JMS 消息），这可能是导致问题的原因。

# java - 从容器外的 shell 脚本调用基于 Spring 的应用程序

> ID：13611564
> 
> 赞同：2
> 
> 时间：2012-11-28T18:03:07.873
> 
> 标签：java, spring, shell, applicationcontext

我在 Tomcat 中部署了一个使用 Hibernate 的基于 Spring 的应用程序。当在容器中执行或调用驻留在 Tomcat 中的 servlet 时，这非常有效。它读取所有配置文件，例如`applicationContext.xml`和其他休眠文件。但我必须从 Tomcat 环境之外的 shell 脚本执行 Java 主方法。因此，我在 WAR 文件中创建了一个调用相应方法的主方法。`applicationContext`但是当它通过脚本调用时，我得到它是空的。

```
ApplicationContext appCtx = ApplicationContextProvider.getApplicationContext(); 
```

shell脚本如下

```
WAR_PATH="/usr/apache-tomcat-6.0.36/webapps/AdminTool/WEB-INF"
CLASSPATH=$WAR_PATH/classes
java -classpath $CLASSPATH:$WAR_PATH/lib/*: com.mycompany.controller.BatchController "$1" 
```

如何通过脚本调用 Spring 上下文工作？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:10:43.047

您必须告诉您的应用程序如何初始化`beanfactory`使用 ApplicationContext。取决于您使用的 Spring 版本。如果您使用的是版本 2，请参阅[文档](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/context/ApplicationContext.html)

* * *

[在 Spring 3文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-factory-instantiation)中实例化一个 spring 容器

```
ApplicationContext context =
new ClassPathXmlApplicationContext(new String[] {"services.xml", "daos.xml"}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-06T01:44:53.777

假设你有一个名为 Main 的类，它有一个 main 方法。用以下方式标记班级：

```
@org.springframework.context.annotation.Configuration
@ComponentScan(basePackages = {"com.your_base_package"})
@Component 
```

在 main 方法中，首先：

```
 ApplicationContext ctx = new AnnotationConfigApplicationContext(Controller.class);
    ctx.getBean(Controller.class).invokeTransformationService(pipelineId); 
```

@Configuration 注解将处理所有注解。需要 @ComponentScan 来告诉 Spring 容器将在哪里搜索组件的基本包。@Component 使这个类成为一个组件，以便可以从 ApplicationContext 中检索它。Spring 容器将使用这些注解查找所有 @Components，创建一个单例（默认为单例）并将其注册到 ApplicationContext。

# sql - 获取在特定时间访问 SQL Server 的用户列表

> ID：13611565
> 
> 赞同：1
> 
> 时间：2012-11-28T18:03:08.483
> 
> 标签：sql, sql-server, sql-server-2012

我需要获取在特定时间范围内访问 SQL Server (2012) 的用户 LanId 列表。我怎样才能得到这些信息？提前感谢您的任何指点。

# asp.net - 从网页打印…

> ID：13611567
> 
> 赞同：0
> 
> 时间：2012-11-28T18:03:14.803
> 
> 标签：asp.net

该应用程序是 .net 4.5 上的 ASP.Net Web 表单

我有一个数据输入表单，上面有几个按钮（保存、创建下一条记录等……）

我无法使用打印的buitin 功能（右键单击打印或浏览器打印菜单），因为它会打印屏幕上显示的所有内容，并且屏幕显示分辨率/设置不适合打印。

一种方法是使用我要打印的数据创建一个新网页，用户可以从那里打印。

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T18:04:58.690

使用内置的 JavaScript`print`函数和一个只打印的样式表：

*   在您现有的样式表中：`@media print`，或
*   在 HTML 中：

    ```
    <link rel="stylesheet" type="text/css" media="print" href="print.css" /> 
    ```

更多的：

*   [http://www.alistapart.com/articles/goingtoprint](http://www.alistapart.com/articles/goingtoprint)
*   [http://coding.smashingmagazine.com/2011/11/24/how-to-set-up-a-print-style-sheet](http://coding.smashingmagazine.com/2011/11/24/how-to-set-up-a-print-style-sheet)

# php - 从 PHP 中传递的值动态创建 SQL 语句

> ID：13611584
> 
> 赞同：0
> 
> 时间：2012-11-28T18:04:27.900
> 
> 标签：php, sql, where

我将一些值传递给一个函数，然后想创建一个 SQL 查询来在数据库中搜索这些值。

输入是下拉框，这意味着输入可以是我想创建为通配符的 ALL 或 *。

问题是你不能这样做：

```
$result = mysql_query("SELECT * FROM table WHERE something1='$something1' AND something2='*'") or die(mysql_error()); 
```

我已经开始，但无法弄清楚使其工作的逻辑循环。这是我到目前为止所拥有的：

```
public function search($something1, $something2, $something3, $something4, $something5) {

    //create query
    $query = "SELECT * FROM users";

    if ($something1== null and $something2== null and $something3== null and $something4== null and $something5== null) {
        //search all users
        break 
    } else  {

        //append where
         $query = $query . " WHERE "; 

                if ($something1!= null) {
                    $query = $query . "something1='$something1'"
                }
                if ($something2!= null) {
                    $query = $query . "something2='$something2'"
                }
                if ($something3!= null) {
                    $query = $query . "something3='$something3'"
                }
                if ($something4!= null) {
                    $query = $query . "something4='$something4'"
                }
                if ($something5!= null) {
                    $query = $query . "something5='$something5'"
                }

    $uuid = uniqid('', true);

    $result = mysql_query($query) or die(mysql_error());
} 
```

这样做的问题是它只能按顺序工作。如果有人首先输入例如 something3，那么它不会在正确的位置添加 AND。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:14:59.457

这是一个动态构建 WHERE 子句的示例。我还展示了使用 PDO 和查询参数。您应该停止使用已弃用的`mysql`API 并开始使用 PDO。

```
public function search($something1, $something2, $something3, $something4, $something5)
{
    $terms = array();
    $values = array();

    if (isset($something1)) {
       $terms[] = "something1 = ?";
       $values[] = $something1;
    }

    if (isset($something2)) {
       $terms[] = "something2 = ?";
       $values[] = $something2;
    }

    if (isset($something3)) {
       $terms[] = "something3 = ?";
       $values[] = $something3;
    }

    if (isset($something4)) {
       $terms[] = "something4 = ?";
       $values[] = $something4;
    }

    if (isset($something5)) {
       $terms[] = "something5 = ?";
       $values[] = $something5;
    }

    $query = "SELECT * FROM users ";

    if ($terms) {
        $query .= " WHERE " . join(" AND ", $terms);
    }

    if (defined('DEBUG') && DEBUG==1) {
      print $query . "\n";
      print_r($values);
      exit();
    }

    $stmt = $pdo->prepare($query);
    if ($stmt === false) { die(print_r($pdo->errorInfo(), true)); }

    $status = $stmt->execute($values);
    if ($status === false) { die(print_r($stmt->errorInfo(), true)); }
} 
```

我已经测试了上述内容，并且可以正常工作。如果我为五个函数参数中的任何一个传递任何非空值，它就会为非空项创建一个 WHERE 子句。

测试：

```
define('DEBUG', 1);
search('one', 'two', null, null, 'five'); 
```

该测试的输出是：

```
SELECT * FROM users  WHERE something1 = ? AND something2 = ? AND something5 = ?
Array
(
    [0] => one
    [1] => two
    [2] => five
) 
```

如果您需要它更加动态，请将数组而不是单个参数传递给函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:10:01.910

我会做这样的事情

```
criteria = null
if ($something1!= null) {
      if($criteria != null)
      {
          $criteria = $criteria . " AND something1='$something1'"
      }
      else
      {
           $criteria = $criteria . " something1='$something1'"
      }
}
   ... other criteria

$query = $query . $criteria 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T18:20:36.233

尝试使用数组。

```
 function search($somethings){

     $query = "SELECT * FROM users";           
     $filters = '';
     if(is_array($somethings)){

        $i = 0;
        foreach($somethings as $key => $value){
           $filters .= ($i > 0) ? " AND $key = '$value' " : " $key = '$value'";
           $i++;
        }
     }
     $uuid = uniqid('', true);
     $query .= $filters;
     $result = mysql_query($query) or die(mysql_error());
 }

 // demo
 $som = array(
      "something1" => "value1",
      "something2" => "value2"
 ); 

 search( $som ); 
```

# wordpress - wordpress：域映射和站点 URL 显示

> ID：13611585
> 
> 赞同：2
> 
> 时间：2012-11-28T18:04:34.477
> 
> 标签：wordpress, redirect, rewrite, base-url, domain-mapping

我是 wordpress 新手，对他们的设置没有太多经验。基本上，我最近为我接管的现有 wordpress 站点设置了域映射，我不得不移动到另一个主机，因此域映射似乎是将旧 URL 指向新主机的简单选择。我已将域映射设置为从以下位置指向新站点：

[http://www.myOldExample.com](http://www.myOldExample.com) 到新的： [http ://www.myNewWebsite.com/foldername](http://www.myNewWebsite.com/foldername)

到目前为止，内容迁移在 wordpress 中工作。问题是，当我在浏览器中输入旧 URL 时，它会重定向旧页面并按预期显示主主页部分的新站点，但对于所有后续链接，例如关于、联系人、产品等，它会显示带有子文件夹路径的新 URL，而我希望他们将旧 URL 显示为基本 URL，所以我不确定是否需要更改域映射站点上的任何内容，或者是否需要在 wordpress 上完成边？wordpress 是否提供类似基本 URL 重写的功能？我只能在常规设置中找到站点 URL 和 Wordpress URL，但我不确定将这些值更改为指向旧 URL 是否会破坏站点。

非常感谢您的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-15T16:15:20.517

我认为，这是网址问题。当您将 wordpress 站点从一台服务器迁移到另一台服务器或同一台服务器但不同的文件夹时，它创建 url 问题，如 http://theoldserver 到例如 http://thenewserver.com 是有问题的。[所以从这个站点](http://interconnectit.com/products/search-and-replace-for-wordpress-databases/)下载文件并将这个文件放在服务器上放置博客文件的地方。[然后执行在此url](http://interconnectit.com/products/search-and-replace-for-wordpress-databases/)上定义的步骤。

这是一个非常方便的工具 [Search and Replace for WordPress Databases Script”工具，非常方便](http://interconnectit.com/products/search-and-replace-for-wordpress-databases/)（确保阅读说明并在使用之前备份数据库）。

# wordpress - 子帖子数量的 Wordpress Walker 菜单

> ID：13611586
> 
> 赞同：2
> 
> 时间：2012-11-28T18:04:35.377
> 
> 标签：wordpress, wordpress-theming

我希望在 wordpress 菜单中显示分层父帖子的子帖子数量。所以，我会将父帖子添加到菜单中。显然，我将不得不使用定制的 Walker，但我不确定从哪里开始。

IE：

```
Menu Item (8)
Menu Item (15)
Menu Item (7) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T18:31:45.553

WordPress 通过名为`_menu_item_menu_item_parent`. 因此，您可以通过以下方式查询子菜单项：

```
class add_child_numbers_walker extends Walker_Nav_Menu {
    function start_el( &$output, $item, $depth = 0, $args = array(), $id = 0 ) {
        global $wp_query;
        $indent = ( $depth ) ? str_repeat( "\t", $depth ) : '';

        $class_names = '';

        $classes = empty( $item->classes ) ? array() : (array) $item->classes;
        $classes[] = 'menu-item-' . $item->ID;

        $class_names = join( ' ', apply_filters( 'nav_menu_css_class', array_filter( $classes ), $item, $args ) );
        $class_names = $class_names ? ' class="' . esc_attr( $class_names ) . '"' : '';

        $id = apply_filters( 'nav_menu_item_id', 'menu-item-'. $item->ID, $item, $args );
        $id = $id ? ' id="' . esc_attr( $id ) . '"' : '';

        $output .= $indent . '<li' . $id . $class_names .'>';

        $attributes  = ! empty( $item->attr_title ) ? ' title="'  . esc_attr( $item->attr_title ) .'"' : '';
        $attributes .= ! empty( $item->target )     ? ' target="' . esc_attr( $item->target     ) .'"' : '';
        $attributes .= ! empty( $item->xfn )        ? ' rel="'    . esc_attr( $item->xfn        ) .'"' : '';
        $attributes .= ! empty( $item->url )        ? ' href="'   . esc_attr( $item->url        ) .'"' : '';

        $submenus = $depth == 0 ? get_posts( array( 'post_type' => 'nav_menu_item', 'numberposts' => -1, 'orderby' => 'menu_order', 'order' => 'ASC', 'meta_query' => array( array( 'key' => '_menu_item_menu_item_parent', 'value' => $item->ID ) ) ) ) : false;

        $item_output = $args->before;
        $item_output .= '<a'. $attributes .'>';
        $item_output .= $args->link_before . apply_filters( 'the_title', $item->title, $item->ID ) . $args->link_after;
        $item_output .= '</a>';
        $item_output .= $submenus ? ' <span class="submenus-count">(' . count( $submenus ) . ')</span>' : '';
        $item_output .= $args->after;

        $output .= apply_filters( 'walker_nav_menu_start_el', $item_output, $item, $depth, $args );
    }
} 
```

此walker 将`<span class="submenus-count">(X)</span>`在所有顶级链接之后添加。

你可以这样调用菜单： `wp_nav_menu(array('theme_location' => 'theme-location', 'container' => '', 'walker' => new add_child_numbers_walker()));`

* * *

既然你说你想做一个自定义功能来显示你的菜单，这里有一个简单的解决方案：

```
function my_custom_nav( $post_type = 'page' ) {
    $current = is_singular() ? get_the_ID() : false;

    $posts = get_posts( array( 'post_type' => $post_type, 'numberposts' => -1, 'orderby' => 'menu_order', 'order' => 'ASC', 'child_of' => 0, 'post_parent' => 0 ) );
    if ( $posts ) {
        echo '<ul class="custom-nav ' . esc_attr( $post_type ) . '-nav">';
        foreach ($posts as $p) {
            $child_posts = get_posts( array( 'post_type' => $post_type, 'numberposts' => -1, 'orderby' => 'menu_order', 'order' => 'ASC', 'child_of' => $p->ID, 'post_parent' => $p->ID, 'fields' => 'ids' ) );
            $child = $child_posts ? ' <span class="submenus-count">(' . count( $child_posts ) . ')</span>' : '';
            $class = '';
            if ( $p->ID == $current ) {
                $class = 'current_page_item';
            } elseif ( $current && in_array( $current, $child_posts ) ) {
                $class = 'current_page_ancestor';
            }
            $class = '' != $class ? ' class="' . $class . '"' : '';
            echo '<li' . $class . '><a href="' . get_permalink( $p->ID ) . '">' . get_the_title( $p->ID ) . '</a>' . $child . '</li>';
        }
        echo '</ul>';
    }

} 
```

然后，您可以像这样显示您的菜单：

```
<?php my_custom_nav( 'custom_post_type' ); ?> 
```

# python - 从 Python 迁移到 Racket（正则表达式库和“Racket 方式”）

> ID：13611591
> 
> 赞同：7
> 
> 时间：2012-11-28T18:04:54.830
> 
> 标签：python, regex, racket, porting

我正在尝试学习 Racket，并在此过程中尝试重写 Python 过滤器。我的代码中有以下一对函数：

```
def dlv(text):
    """
    Returns True if the given text corresponds to the output of DLV
    and False otherwise.
    """
    return text.startswith("DLV") or \
           text.startswith("{") or \
           text.startswith("Best model")

def answer_sets(text):
    """
    Returns a list comprised of all of the answer sets in the given text.
    """
    if dlv(text):
        # In the case where we are processing the output of DLV, each
        # answer set is a comma-delimited sequence of literals enclosed
        # in {}
        regex = re.compile(r'\{(.*?)\}', re.MULTILINE)
    else:
        # Otherwise we assume that the answer sets were generated by
        # one of the Potassco solvers. In this case, each answer set
        # is presented as a comma-delimited sequence of literals,
        # terminated by a period, and prefixed by a string of the form
        # "Answer: #" where "#" denotes the number of the answer set.
        regex = re.compile(r'Answer: \d+\n(.*)', re.MULTILINE)
    return regex.findall(text) 
```

据我所知，Racket 中第一个函数的实现大致如下：

```
(define (dlv-input? text)
    (regexp-match? #rx"^DLV|^{|^Best model" text)) 
```

这似乎工作正常。在实现第二个功能时，我目前提出了以下（开始）：

```
(define (answer-sets text)
    (cond
        [(dlv-input? text) (regexp-match* #rx"{(.*?)}" text)])) 
```

这是不正确的，因为`regexp-match*`给出了与正则表达式匹配的字符串列表，包括花括号。有谁知道如何获得与 Python 实现相同的行为？此外，任何关于如何使正则表达式“更好”的建议都将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T18:12:03.410

你很亲密。您只需要添加`#:match-select cadr`到您的`regexp-match`通话中：

```
(regexp-match* #rx"{(.*?)}" text #:match-select cadr) 
```

默认情况下，`#:match-select`它的值为`car`，它返回整个匹配的字符串。`cadr`选择第一组，`caddr`选择第二组等。有关详细信息，请参阅[`regexp-match*`文档。](http://docs.racket-lang.org/reference/regexp.html#%28def._%28%28lib._racket/private/base..rkt%29._regexp-match%2a%29%29)

# azure - 根据服务总线队列长度自动缩放 Azure 角色

> ID：13611598
> 
> 赞同：6
> 
> 时间：2012-11-28T18:05:33.110
> 
> 标签：azure, servicebus, autoscaling, wasabi

Microsoft Enterprise Library (WASABi) 中的 Autoscaling Application Block 是一款不错的软件，它允许根据存储帐户队列的长度更改角色实例的数量。

我可以使用服务总线队列而不是存储帐户队列吗？在这种情况下如何定义规则 xml？

# php - MongoDB PHP 驱动和 MongoDB 兼容性检查

> ID：13611603
> 
> 赞同：1
> 
> 时间：2012-11-28T18:05:51.987
> 
> 标签：php, mongodb

在 PHP 中如何检查是否为相应的 mongodb 安装了正确的 mongodb PHP 驱动程序。

下面的链接告诉如何检查是否安装了 mongodb PHP 驱动程序，但没有说明该驱动程序是否与相应的 mongodb 正确/兼容。

http://stackoverflow.com/questions/11134959/check-if-mongodb-php-driver-is-installed

例如，如果我有 PHP 版本 5.3.10 并有 mongodb 2.2.2，则命令

`echo extension_loaded("mongo") ? "loaded\n" : "not loaded\n";`

会说已加载，但是，mongodb 无法正常工作，因为对于 mongodb 2.2.2，您需要最新的 PHP 而不是 5.3.10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T07:16:08.317

我认为，您在谈论驱动程序，而不是 PHP 本身。`\Mongo*`在您编译和加载特殊扩展之前，PHP 没有内置支持来访问类。

由于您谈论的是最新版本的 MongoDB，我认为您无法使用它的某些部分功能，因为您有一些旧驱动程序（例如 1.2.12）。当您升级 PHP 时，您可能也将驱动程序更新到了最新的 (1.3.0) 稳定版本。该版本的驱动程序是几天前提交的，它支持 MongoDB 提供的所有最新功能。

无论如何，如果您想检查您拥有的驱动程序版本，您可以`phpinfo(8)`从您的 PHP 调用并查看显示驱动程序版本的**mongo**部分的输出。

# c# - WinRT 网页解析 / DocumentNode.InnerHtml = "URI" 而不是页面 html

> ID：13611606
> 
> 赞同：1
> 
> 时间：2012-11-28T18:05:53.717
> 
> 标签：c#, .net, microsoft-metro, html-agility-pack, winrt-xaml

我正在尝试为我的大学创建一个包含课程表的地铁应用程序。我使用 HAP+Fizzler 解析页面并获取数据。

计划链接给我@Too many automatic redirections@ 错误。我发现 CookieContainer 可以帮助我，但不知道如何实现它。

```
 CookieContainer cc = new CookieContainer();
        request.CookieContainer = cc; 
```

我的代码：

```
 public static HttpWebRequest request;
    public string Url = "http://cist.kture.kharkov.ua/ias/app/tt/f?p=778:201:9421608126858:::201:P201_FIRST_DATE,P201_LAST_DATE,P201_GROUP,P201_POTOK:01.09.2012,31.01.2013,2423447,0:";
    public SampleDataSource()
    {

        HtmlDocument html = new HtmlDocument();
        request = (HttpWebRequest)WebRequest.Create(Url);
        request.Proxy = null;
        request.UseDefaultCredentials = true;
        CookieContainer cc = new CookieContainer();
        request.CookieContainer = cc;
        html.LoadHtml(request.RequestUri.ToString());
        var page = html.DocumentNode;

String ITEM_CONTENT = null;
foreach (var item in page.QuerySelectorAll(".MainTT")) 
{
    ITEM_CONTENT = item.InnerHtml;
}
      } 
```

使用 CookieContainer 我没有收到错误，但 DocumentNode.InnerHtml 出于某种原因获取了我的 URI 的值，而不是页面 html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:12:21.373

你只需要改变一行。

代替

```
 html.LoadHtml(request.RequestUri.ToString()); 
```

和

```
 html.LoadHtml(new StreamReader(request.GetResponse().GetResponseStream()).ReadToEnd()); 
```

**编辑**

首先将您的方法标记为`async`

```
request.CookieContainer = cc;
var resp = await request.GetResponseAsync();
html.LoadHtml(new StreamReader(resp.GetResponseStream()).ReadToEnd()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T16:24:17.560

如果您想下载网页代码，请尝试使用此方法（通过使用[HttpClient](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx)）：

```
public async Task<string> DownloadHtmlCode(string url)
    {
        HttpClientHandler handler = new HttpClientHandler { UseDefaultCredentials = true, AllowAutoRedirect = true };
        HttpClient client = new HttpClient(handler);
        HttpResponseMessage response = await client.GetAsync(url);                  
        response.EnsureSuccessStatusCode();
        string responseBody = await response.Content.ReadAsStringAsync();
        return responseBody;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-24T17:07:19.557

如果要解析下载的 htmlcode，可以使用 Regex 或 LINQ。我有一些使用 LINQ 解析 html 代码的示例，但在您应该使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)库将代码加载到 HtmlDocument 之前。然后你可以通过这种方式加载：`html.LoadHtml(temphtml);` 当你这样做时，你可以解析你的 HtmlDocument：

```
//This is for img links parse-example:
IEnumerable<HtmlNode> imghrefNodes = html.DocumentNode.Descendants().Where(n => n.Name == "img");
foreach (HtmlNode img in imghrefNodes)
{
   HtmlAttribute att = img.Attributes["src"];
   //in att.Value you can find your img url
   //Here you can do everything what you want with all img links by editing att.Value
} 
```

# java - 用泛型定义抽象方法

> ID：13611608
> 
> 赞同：3
> 
> 时间：2012-11-28T18:05:57.927
> 
> 标签：java, class, generics

我已经阅读了很多关于泛型的内容，但在 Java 中实现简单的层次结构时仍然存在一些基本问题。目标是定义一个抽象方法来比较同一类的两个对象，如果对象来自不同的类，它应该返回 false。例子：

我们定义抽象类 Sound

```
abstract class Sound{
    public boolean check(Sound d){return false;};
} 
```

一些扩展 Sound 的类和从它扩展的另一个抽象类，例如 Alarm

```
abstract class Alarm extends Sound{
    @Override
    public boolean check(Alarm d){//Do something and return boolean};
} 
```

还有一些从它延伸出来的类。

简单的解决方案是将方法定义为如图所示，它会起作用，但我觉得有更好的方法来强制执行层次结构，因此 Sound 类定义该方法只能与同一类的参数一起使用。

我对泛型的尝试：

```
abstract class Sound{
    public <T extends Sound> boolean check(T d){return false;};
}

abstract class Alarm extends Sound{
    @Override
    public <T extends Alarm> boolean check(T d){//Do something and return boolean};
} 
```

或者

```
abstract class Alarm extends Sound{
    @Override
    public boolean check(Alarm d){//check and return boolean};
} 
```

Java 抱怨是因为对编译器我没有覆盖 Alarm 中的 check 方法。关于可能缺少什么的任何线索？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T18:08:25.053

你的想法本质上是错误的。
泛型方法的要点是*调用者*可以指定任何满足约束的类型。
换句话说，调用者可以写

```
sound.<NonAlarm> check(...); 
```

`NonAlarm`继承的任何类在哪里`Sound`。

由于`Alarm`继承`Sound`，其`check()`方法**必须**具有相同的约束。

相反，您可以使用[CRTP](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)：

```
public abstract class Sound<T extends Sound<T>> {
    public abstract boolean check(T d);
}

public class Alarm extends Sound<Alarm> {
    @Override
    public boolean check(Alarm d) { ... }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:10:53.090

怎么样：

```
interface ISound<T> {
    public boolean check(T d);
}

abstract class Alarm implements ISound<Alarm> {
    @Override
    public boolean check(Alarm d) { return true; };
} 
```

（我希望我正确理解了你的问题！）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-28T18:08:40.827

你没有扩展任何课程！

```
abstract class Alarm extends Sound {
} 
```

这是正确的方法...

# ssis - SSIS 数据类型不匹配

> ID：13611612
> 
> 赞同：0
> 
> 时间：2012-11-28T18:06:09.970
> 
> 标签：ssis

我正在尝试从 oracle 源导入，我在源和目标上都有一个日期字段。它的抛出错误**“输入 OLE DB 目标上的输入列有错误，在处理输入时发生错误代码 oxco209029A”OLE DB目标输入（3554）”。** 我正在尝试将它转换为Oracle查询中的字符并将其更改回最新版本..在使用数据转换的SSIS中，它也不起作用，可能是我做错了什么,你们能看看这个吗？我真的很感激..谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T19:20:09.913

这是我之前关于这个主题的三个答案。

[https://stackoverflow.com/a/11585853/236348](https://stackoverflow.com/a/11585853/236348)

[https://stackoverflow.com/a/2231164/236348](https://stackoverflow.com/a/2231164/236348)

[https://stackoverflow.com/a/11229159/236348](https://stackoverflow.com/a/11229159/236348)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T18:13:08.973

Oracle 和 SQL Server 日期类型是已知的不兼容。

*   [Oracle 到 SQL Server 日期转换](https://stackoverflow.com/questions/9034530/oracle-to-sql-server-date-conversion)
*   [Oracle 到 SQL Server：日期转换和格式](https://stackoverflow.com/questions/11004577/oracle-to-sql-server-date-conversion-format)
*   [http://sql-troubles.blogspot.com/2010/02/oracle-vs-sql-server-date-conversion.html](http://sql-troubles.blogspot.com/2010/02/oracle-vs-sql-server-date-conversion.html)
*   [http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=98943](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=98943)

等等

您已将 Oracle 类型转换为等效的字符串，并且 SQL Server 不接受 (date, datetime, datetime2?) 数据类型的输入。通常，您的选择是将您的演员清理为可识别的日期格式或添加派生列转换以将输入字符串列更改为 SSIS 等效项。确切的类型取决于您的目标表定义的内容。

# javascript - 使用ajax提交表单

> ID：13611614
> 
> 赞同：28
> 
> 时间：2012-11-28T18:06:12.843
> 
> 标签：javascript, jquery, html, ajax, forms

我正在开发一个应用程序（我的大学的一种社交网络）。我需要添加评论（在特定数据库中插入一行）。为此，我的 html 页面中有一个包含各种字段的 HTML 表单。在提交时，我不使用表单的操作，但我使用自定义 javascript 函数在提交表单之前详细说明一些数据。

```
function sendMyComment() {

    var oForm = document.forms['addComment'];
    var input_video_id = document.createElement("input");
    var input_video_time = document.createElement("input");

    input_video_id.setAttribute("type", "hidden");
    input_video_id.setAttribute("name", "video_id");
    input_video_id.setAttribute("id", "video_id");
    input_video_id.setAttribute("value", document.getElementById('video_id').innerHTML);

    input_video_time.setAttribute("type", "hidden");
    input_video_time.setAttribute("name", "video_time");
    input_video_time.setAttribute("id", "video_time");
    input_video_time.setAttribute("value", document.getElementById('time').innerHTML);

    oForm.appendChild(input_video_id);
    oForm.appendChild(input_video_time);

    document.forms['addComment'].submit();
} 
```

最后一行将表单提交到正确的页面。它工作正常。但我想使用 ajax 提交表单，但我不知道如何执行此操作，因为我不知道如何捕获表单输入值。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2016-11-23T07:39:13.330

实际上没有人给出一个纯粹的`javascript`答案（按照OP的要求），所以这里是：

```
function postAsync(url2get, sendstr)    {
    var req;
    if (window.XMLHttpRequest) {
        req = new XMLHttpRequest();
        } else if (window.ActiveXObject) {
        req = new ActiveXObject("Microsoft.XMLHTTP");
        }
    if (req != undefined) {
        // req.overrideMimeType("application/json"); // if request result is JSON
        try {
            req.open("POST", url2get, false); // 3rd param is whether "async"
            }
        catch(err) {
            alert("couldnt complete request. Is JS enabled for that domain?\\n\\n" + err.message);
            return false;
            }
        req.send(sendstr); // param string only used for POST

        if (req.readyState == 4) { // only if req is "loaded"
            if (req.status == 200)  // only if "OK"
                { return req.responseText ; }
            else    { return "XHR error: " + req.status +" "+req.statusText; }
            }
        }
    alert("req for getAsync is undefined");
}

var var_str = "var1=" + var1  + "&var2=" + var2;
var ret = postAsync(url, var_str) ;
    // hint: encodeURIComponent()

if (ret.match(/^XHR error/)) {
    console.log(ret);
    return;
    } 
```

在你的情况下：

```
var var_str = "video_time=" + document.getElementById('video_time').value 
     + "&video_id=" + document.getElementById('video_id').value; 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-11-28T19:40:45.480

关于什么

```
$.ajax({
  type: 'POST',
  url: $("form").attr("action"),
  data: $("form").serialize(), 
  //or your custom data either as object {foo: "bar", ...} or foo=bar&...
  success: function(response) { ... },
}); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2020-01-21T18:36:10.750

您可以使用 FormData 捕获表单输入值并通过 fetch 发送它们

```
fetch(form.action,{method:'post', body: new FormData(form)}); 
```

```
function send(e,form) {
  fetch(form.action,{method:'post', body: new FormData(form)});

  console.log('We send post asynchronously (AJAX)');
  e.preventDefault();
}
```

```
<form method="POST" action="myapi/send" onsubmit="send(event,this)">
    <input hidden name="crsfToken" value="a1e24s1">
    <input name="email" value="a@b.com">
    <input name="phone" value="123-456-789">
    <input type="submit">    
</form>

Look on chrome console>network before 'submit'
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-03-21T20:43:24.200

您可以将 onclick 函数添加到提交按钮，但您将无法通过按 Enter 提交函数。就我而言，我使用这个：

```
<form action="" method="post" onsubmit="your_ajax_function(); return false;">
    Your Name <br/>
    <input type="text" name="name" id="name" />
    <br/>
    <input type="submit" id="submit" value="Submit" />
</form> 
```

希望能帮助到你。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-05-23T02:15:07.783

这是一个通用的解决方案，它遍历表单中的每个字段并自动创建请求字符串。它正在使用新的 fetch API。自动读取表单属性：`method`并`action`抓取表单内的所有字段。支持一维数组字段，如`emails[]`. 可以作为通用解决方案来轻松管理具有单一事实来源的许多（可能是动态的）表单 - html。

```
document.querySelector('.ajax-form').addEventListener('submit', function(e) {
    e.preventDefault();
    let formData = new FormData(this);
    let parsedData = {};
    for(let name of formData) {
      if (typeof(parsedData[name[0]]) == "undefined") {
        let tempdata = formData.getAll(name[0]);
        if (tempdata.length > 1) {
          parsedData[name[0]] = tempdata;
        } else {
          parsedData[name[0]] = tempdata[0];
        }
      }
    }

    let options = {};
    switch (this.method.toLowerCase()) {
      case 'post':
        options.body = JSON.stringify(parsedData);
      case 'get':
        options.method = this.method;
        options.headers = {'Content-Type': 'application/json'};
      break;
    }

    fetch(this.action, options).then(r => r.json()).then(data => {
      console.log(data);
    });
});

<form method="POST" action="some/url">
    <input name="emails[]">
    <input name="emails[]">
    <input name="emails[]">
    <input name="name">
    <input name="phone">
</form> 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-11-28T20:41:08.383

[只使用jQuery](http://jquery.com/)会容易得多，因为这只是大学的任务，您不需要保存代码。

因此，您的代码将如下所示：

```
function sendMyComment() {
    $('#addComment').append('<input type="hidden" name="video_id" id="video_id" value="' + $('#video_id').text() + '"/><input type="hidden" name="video_time" id="video_time" value="' + $('#time').text() +'"/>');
    $.ajax({
        type: 'POST',
        url: $('#addComment').attr('action'),
        data: $('form').serialize(), 
        success: function(response) { ... },
    });

} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-11-28T20:55:29.527

我建议将 jquery 用于这种类型的需求。试试这个

```
<div id="commentList"></div>
<div id="addCommentContainer">
    <p>Add a Comment</p> <br/> <br/>
    <form id="addCommentForm" method="post" action="">
        <div>
            Your Name <br/>
            <input type="text" name="name" id="name" />

            <br/> <br/>
            Comment Body <br/>
            <textarea name="body" id="body" cols="20" rows="5"></textarea>

            <input type="submit" id="submit" value="Submit" />
        </div>
    </form>
</div>​

$(document).ready(function(){
    /* The following code is executed once the DOM is loaded */

    /* This flag will prevent multiple comment submits: */
    var working = false;
    $("#submit").click(function(){
    $.ajax({
         type: 'POST',
         url: "mysubmitpage.php",
         data: $('#addCommentForm').serialize(), 
         success: function(response) {
            alert("Submitted comment"); 
             $("#commentList").append("Name:" + $("#name").val() + "<br/>comment:" + $("#body").val());
         },
        error: function() {
             //$("#commentList").append($("#name").val() + "<br/>" + $("#body").val());
            alert("There was an error submitting comment");
        }
     });
});
});​ 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-10-16T19:17:57.957

我想通过使用API添加一种新的纯粹`javascript`方式来做到这一点，在我看来这更清洁。`fetch()`这是一种实现网络请求的现代方式。在您的情况下，由于您已经有一个`form element`我们可以简单地使用它来构建我们的请求。

```
const formInputs = oForm.getElementsByTagName("input");
let formData = new FormData();
for (let input of formInputs) {
    formData.append(input.name, input.value);
}

fetch(oForm.action,
    {
        method: oForm.method,
        body: formData
    })
    .then(response => response.json())
    .then(data => console.log(data))
    .catch(error => console.log(error.message))
    .finally(() => console.log("Done")); 
```

如您所见，它非常干净，使用起来也比`XMLHttpRequest`.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-26T20:47:06.877

如今，使用普通的 'ol JS 来实现这一点要容易得多。

```
const form = document.querySelector('#your-form'),
      data = new URLSearchParams();
for (const pair of new FormData(form)) {
    data.append(pair[0], pair[1]);
}

fetch(form.action, {
    method: form.method || 'POST',
    body: data,
}).then(response => response.json())  //  or .text()
.then(data => {
    console.log('SUBMITTED', data);
}); 
```

# c - 随机数生成器目标 c

> ID：13611620
> 
> 赞同：1
> 
> 时间：2012-11-28T18:06:38.943
> 
> 标签：c, random, floating-point, arc4random

> **可能重复：**
> [如何生成 0 和 1 之间的随机浮点数？](https://stackoverflow.com/questions/5172421/how-to-generate-a-random-float-between-0-and-1)

我想生成一个介于 0 和 1 之间的随机数（均匀分布），我使用：

```
float x = arc4random_uniform(1); 
```

但是，这只会产生 0.00000

我用了

```
float y = arc4random() %11 * 0.1; 
```

它在间隔中返回一个随机数，但我不确定它是否是均匀分布。

为什么第一个功能没有按预期工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T18:11:27.250

> 我用：

```
float x = arc4random_uniform(1); 
```

> 但是，这只会产生 0.00000

当然可以。`arc4random_uniform()`返回一个 32 位无符号整数。它**不**返回`float`. 你正在寻找的是类似的东西

```
#define RAND_PRECISION 1024

float x = arc4random_uniform(RAND_PRECISION) / (float)RAND_PRECISION; 
```

还，

> 我不确定它是否是均匀分布。

既然不是。使用模 ( `%`) 运算符会导致分布不均匀。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T18:10:09.470

根据文档， arc4random_uniform 返回一个整数，因此使用上限为 1 不会产生您想要的结果。

这是 arc4random 函数的页面： [http ://www.unix.com/man-page/FreeBSD/3/arc4random_uniform/](http://www.unix.com/man-page/FreeBSD/3/arc4random_uniform/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T18:15:28.007

arc4random_uniform 返回一个不超过您提供的上限的数字（例如 arc4random_uniform(10) 将返回一个介于 0 和 9 之间的数字）。由于 arc4random_uniform(1) 应该总是返回 0 （这就是你所看到的）。如果你想要一个随机浮动，你应该看到这个答案：

[生成 0 到 1 之间的随机浮点数](https://stackoverflow.com/questions/5172421/how-to-generate-a-random-float-between-0-and-1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T18:12:00.267

```
#define ARC4RANDOM_MAX      0x100000000
...
double val = ((double)arc4random() / ARC4RANDOM_MAX); 
```

# inno-setup - 在 Inno Setup 卸载中调用 exe

> ID：13611622
> 
> 赞同：2
> 
> 时间：2012-11-28T18:06:42.127
> 
> 标签：inno-setup, uninstallation, pascal

我对 Inno Setup 卸载程序有疑问。我有一个要执行以跟踪安装和卸载的 exe 文件。exe 非常简单，向服务器发送消息。

```
[Files]
Source: "Tracker\LocalSandboxInstallTracker.exe"; DestDir: "{app}/Tracker";
Source: "Tracker\LocalSandboxInstallTracker.exe.config"; DestDir: "{app}/Tracker";
Source: "Tracker\Tracker.Client.dll"; DestDir: "{app}/Tracker";

[Run]
Filename: "{app}\Tracker\LocalSandboxInstallTracker.exe"; Parameters: " {#MyAppVersion} install"; Flags: runhidden; StatusMsg: "Sending tracking data..."

[Code]
procedure InitializeUninstallProgressForm();
var
  ResultCode: Integer;
begin
  Exec ('{app}\Tracker\LocalSandboxInstallTracker.exe',' {#MyAppVersion} uninstall','',SW_SHOW, ewWaitUntilTerminated, ResultCode);
end; 
```

安装时的调用运行良好，但在卸载时却不行。我在我的 Exec 命令上放置了一个断点，它确实通过了那里，但似乎没有调用 exe。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T18:31:54.057

您必须先扩展`{app}`常量，然后再将其传递给`Exec`脚本函数。[`ExpandConstant`](http://jrsoftware.org/ishelp/topic_isxfunc_expandconstant.htm)每当您需要获取常量的值时使用。以这种方式修改您的脚本：

```
Exec(ExpandConstant('{app}\Tracker\LocalSandboxInstallTracker.exe'), 
  '{#MyAppVersion} uninstall', '', SW_SHOW, 
  ewWaitUntilTerminated, ResultCode); 
```

此外，您应该检查函数结果和输出结果代码，以便在`Exec`函数失败时做出反应。您将获得的错误代码`ResultCode`可以检查[`System Error Codes`](https://docs.microsoft.com/en-us/windows/win32/debug/system-error-codes)参考或用于`SysErrorMessage(ResultCode)`从脚本中获取错误描述。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T18:34:50.887

如果要`{app}`在 Exec 调用中使用常量，则必须调用 ExpandConstant 函数：

```
[Code]
procedure InitializeUninstallProgressForm();
var
  ResultCode: Integer;
begin
  Exec (ExpandConstant('{app}\Tracker\LocalSandboxInstallTracker.exe')
    ,' {#MyAppVersion} uninstall','',SW_SHOW, ewWaitUntilTerminated, ResultCode);
end; 
```

否则，您将无法找到该 exe。

# extjs - ExtJS 4.1.3 过滤器组合框

> ID：13611625
> 
> 赞同：0
> 
> 时间：2012-11-28T18:06:55.760
> 
> 标签：extjs, drop-down-menu, combobox, filter, visibility

这是一个两部分的问题：

主要问题：假设我有一个从商店拉出的组合框（下面的代码）。假设我有一个要过滤数据的数组，以便只有某些值实际显示在下拉列表中。我似乎找不到可以做到这一点的参数......有没有一种简单的方法可以做到这一点？

第二个问题：我还需要能够在创建下拉列表后根据用户的操作禁用和重新启用下拉列表中的项目。是否有一个功能可以在下拉菜单中重新启用/禁用项目？

注意：禁用我的意思是“不存在”，也就是在 dom 中删除，但仍然存在于未过滤的商店中。

```
{
  xtype: 'combobox',
  anchor: '100%',
  name: 'Permission_id',
  fieldLabel: 'Permissions',
  hideLabel: false,
  displayField: 'Name',
  forceSelection: true,
  store: 'PermissionStore',
  typeAhead: true,
  valueField: 'id',
  valueNotFoundText: 'Add Permission'
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T03:24:02.613

我认为您所需要的只是使用过滤器。如果您只想在下拉列表中显示某些值，您唯一需要做的就是过滤存储，如果您拥有的是一个数组，您可以使用 ArrayStore。

关于您的第二个问题，如果您过滤商店，原始值不会丢失，它们会在内部保存为快照，然后当您清除过滤器时，旧值会再次显示在 dropdonlist 中。

请看一下这个工作示例：http: [//jsfiddle.net/lontivero/Mz6S4/1/](http://jsfiddle.net/lontivero/Mz6S4/1/)

**第一个答案**：方法是。**过滤器**（）。例如：

```
var store = Ext.create('Ext.data.ArrayStore', {
    fields: ['Id', 'Name'],    
    data: [
        [ 1, 'Lucas' ],
        [ 2, 'Pablo' ],
        [ 3, 'Francisco' ]
    ]
});

Ext.create('Ext.form.field.ComboBox', {
    fieldLabel: 'Permissions',
    displayField: 'Name',
    store: store,
    valueField: 'Id',
    renderTo: Ext.getBody()
});

//Hide Pablo in the dropdownlist
store.filter([
    {filterFn: function(record) { return record.get('Name') !== 'Pablo'; }}
]);

// uncomment this to reenable hidden records (to display Pablo again)
//store.clearFilter(); 
```

**第二个答案**：清除商店的过滤器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T23:26:16.503

正如 lontivero 所说，过滤器可以解决您的问题：

**primary**：数组可以包含数据，但过滤器会将其从下拉列表中隐藏

**次要**：过滤器可以更改为隐藏和显示在下拉列表中

那么，您剩下的问题是如何从非 Ext 代码更改过滤器。在这里，您可以使用 Ext 只是 javascript 并且可以从与 Ext 无关的任何其他 javascript 调用的事实。

所以：

1.  在 HTML DOM 可访问的位置/范围中添加一些应用过滤器以添加和删除的功能
2.  将它们添加到`onclick`（纯 HTML）按钮的处理程序中

诀窍实际上是通过使用 Ext 的 id 查找来访问商店。

因此，如果以下代码（在 lontivero 的 jsfiddle 上扩展）直接在 js 文件中（或在脚本标签中），它会满足您的要求：

（jsfiddle：http: [//jsfiddle.net/mCv6A/](http://jsfiddle.net/mCv6A/)）

```
// functions that do the filtering
var noPablo = function(record) { return record.get('Name') !== 'Pablo' }
var noJames = function(record) { return record.get('Name') !== 'James' }

// the combination of functions we'll use
var withoutJamesFilter = [{ filterFn: noPablo }, { filterFn: noJames }]
var withJamesFilter = [{ filterFn: noPablo }]

function addJames()
{
    var store = Ext.getStore('people')
    store.clearFilter()
    store.filter(withJamesFilter)
}

function delJames()
{
    var store = Ext.getStore('people')
    store.clearFilter()
    store.filter(withoutJamesFilter)
}

Ext.onReady(function()
{
    var store = Ext.create('Ext.data.ArrayStore', {
        id: 'people',
        fields: ['Id', 'Name'],    
        data: [
            [ 1, 'Lucas' ],
            [ 2, 'Pablo' ],
            [ 3, 'Francisco' ],
            [ 4 , 'James' ]
        ]
    })

    Ext.create('Ext.form.field.ComboBox', {
        fieldLabel: 'Permissions',
        displayField: 'Name',
        store: store,
        valueField: 'Id',
        renderTo: Ext.getBody()
    })

    // start without james in list
    store.filter(withoutJamesFilter)
}) 
```

实际使用时需要考虑的事项（而不是在简化示例中）：

*   wrapping `addJames`，`delJames`以及它们在对象或立即函数中使用的变量（`noPablo`等`noJames`），因此变量不会弄乱全局（窗口）范围
*   重写过滤器变量以更好地共享实现（类似于获取名称列表并生成过滤器数组或过滤器函数来过滤掉这些名称的函数是明智的）

# neo4j - 在相同的数据库模式上运行相同的密码查询获得不同（和不正确）的结果

> ID：13611629
> 
> 赞同：0
> 
> 时间：2012-11-28T18:07:12.230
> 
> 标签：neo4j, graph-databases, cypher

我在两个相同的 neo4j 数据库模式上运行以下密码查询：

```
START dave = node(7)
// dave's friend who lives and attends an event in the same city
MATCH dave-[:FRIEND]-friend-[:LIVES]->city-[:HOSTS]->event<-[:ATTENDS]-friend
RETURN dave.name, friend.name, city.name, event.name; 
```

当我在本地服务器上的数据库模式上运行上述查询时，我得到了正确的结果——一条路径：

```
+----------------------------------------------------+ 
| dave.name | friend.name | city.name | event.name   |  
+----------------------------------------------------+ 
| "dave"    | "adam"      | "london"  | "exhibition" | 
+----------------------------------------------------+ 
```

事实上，对于 4 个人节点（4、5、6、7）中的每一个，adam=node(4) 是唯一一个在同一个城市生活和参加活动的人。

[但是，当我在这里](http://console.neo4j.org/?id=rkqzww)运行相同的查询（在与本地服务器上完全相同的数据库架构上）时，我得到以下不正确的结果：

```
+----------------------------------------------------+ 
| dave.name | friend.name | city.name | event.name   |  
+----------------------------------------------------+ 
| "dave"    | "adam"      | "london"  | "exhibition" | 
| "dave"    | "adam"      | "london"  | "exhibition" | 
| "dave"    | "bill"      | "paris"   | "seminar"    | // bill doesn't attend seminar
+----------------------------------------------------+ 
```

对于其他人而不是 dave=node(7)，[这里](http://console.neo4j.org/?id=rkqzww)的结果也是不正确的（不存在的额外路径）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:28:07.237

尝试将匹配阶段分成 2 个，我从未在一个匹配模式中使用一个参数名称 2 次：

除了

```
MATCH dave-[:FRIEND]-friend-[:LIVES]->city-[:HOSTS]->event<-[:ATTENDS]-friend 
```

利用

```
MATCH dave-[:FRIEND]-friend-[:LIVES]->city-[:HOSTS]->event, event<-[:ATTENDS]-friend 
```

# html - 为什么当被滑块控制时图形会消失？

> ID：13611632
> 
> 赞同：1
> 
> 时间：2012-11-28T18:07:19.190
> 
> 标签：html, three.js

我的想法是使用three.js，通过移动滑块控件来改变立方体的旋转速度。一旦我定义了场景、相机和立方体，JavaScript 部分中的相关代码是这样的：

```
var speed = 0.01;

function selectSpeed() {
    speed = document.getElementById("speedSelector").value;
}

function render() {
    requestAnimationFrame(render);
    cube.rotation.x += speed;
    renderer.render(scene, camera);
}

render(); 
```

而 HTML 部分中的相关代码是这样的：

```
<input id="speedSelector" type="range" min="0" max="0.1" step="0.005" value="0.01" onchange="selectSpeed()" /> 
```

打开网页可以看到立方体旋转正常和滑块控件，但是当你移动滑块控件改变旋转速度时，立方体永远消失了，你再也看不到了。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:24:12.460

您的速度变量可能正在转换为字符串，试试这个：

```
speed = document.getElementById("speedSelector").value * 1.0; 
```

# java - C++11（本机代码）与 Java（字节码）

> ID：13611634
> 
> 赞同：2
> 
> 时间：2012-11-28T18:07:24.983
> 
> 标签：java, c++, c++11, bytecode

最近我一直在思考原生和字节码的区别。我做了一些研究，我读到的所有信息都是关于编译成本机代码的 C++ 代码与编译成字节码的 Java 代码（在利用多核处理器的 JVM 上运行）。结论是用 Java 编写的应用程序运行得更快。

C++11 会改变这个吗？用 C++11（因为添加了线程）编写的应用程序是否比 Java 运行得更快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T18:13:52.343

> 结论是用 Java 编写的应用程序运行得更快。

这是一个很大的飞跃。影响系统性能的因素太多了，很难说一种方法*总是*比另一种更好甚至更快。

C++ 一直能够使用线程，只是没有关于如何使用线程的详细信息。我不相信 C++11 是关于性能的，而是标准化内存模型之类的东西。

恕我直言，考虑到任何时间和专家开发人员，C++ 程序总是比 Java 程序快。但是，鉴于时间有限且开发人员具有混合能力，您更有可能在 Java 中得到一些工作和表现良好的东西。您的里程会有所不同。;)

* * *

让我的答案更清楚...

> C++11 会改变这个吗？

不，我不同意这种情况，也不会改变它。

> 用 C++11（因为添加了线程）编写的应用程序是否比 Java 运行得更快

是的，但并非总是如此，就像早期版本一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T18:25:21.780

C++ 和 Java 都不会自动将您的程序拆分为多个线程。现代语言中最接近自动并行化的方法是使用并行集合。在 C++ 中有一些库可以做到这一点，但在功能更强大的语言中对这类东西有更好的支持，例如 Haskell、Scala、Clojure。获得自动并行化的另一种方法是使用演员库并使用演员编写整个程序。Erlang 是第一个完全支持它的语言，但用于 Scala/Java 的 Akka 框架也非常好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T18:21:27.330

我只想说`All Your Java Bases Are Belong To C++.`。JVM 本身是用 C/C++ 编写的。C/C++ 在机器的裸机上以本机速度运行，而字节码由 C/C++ 代码（在金属上运行）解释。一个字节码指令可以转换为大约 5-10 个 asm 指令（或更多）。因此，C/C++ 的执行速度被认为比 Java 更快。当然，如果 Java 的运行时被抛到脑后，并且我们以机器速度解释字节码，那么这将是一个公平的比较。

也就是说，请参阅名为“Programming Pearls”一书中的一个示例，作者在 Radioshack 个人计算机上运行解释的 BASIC 程序，该程序经过充分优化，比在超级计算机上运行得更快。这意味着，程序的执行速度取决于您的算法和编码/优化实践。

# android - 地图只显示图块

> ID：13611635
> 
> 赞同：0
> 
> 时间：2012-11-28T18:07:28.343
> 
> 标签：android, google-maps

我读过很多这样的问题，也尝试了解决方案，但它仍然显示灰色瓷砖，我检查了清单，看起来还不错。我正在我的设备上测试它。这是我的清单文件。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.dr.droid.lee"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="9"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

    <application
        android:icon="@drawable/ic_drdroid"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Light.NoTitleBar.Fullscreen" >

        <activity
            android:name=".Main"
            android:label="@string/title_activity_main"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <uses-library android:name = "com.google.android.maps" />
        <activity android:name=".FirstAid" >
        </activity>
        <activity android:name=".Health" >
        </activity>
        <activity android:name=".DrugGuide" >
        </activity>
        <activity android:name=".Symptom" >
        </activity>
        <activity android:name=".FResult" >
        </activity>
        <activity android:name=".HospResult" >
        </activity>

    </application>

</manifest> 
```

这是我的带有 API 密钥的地图视图的 xml。

```
 <com.google.android.maps.MapView
        android:id="@+id/mv1"
        android:layout_width="300dp"
        android:layout_height="280dp"
        android:layout_below="@+id/tvCity"
        android:layout_centerHorizontal="true"
        android:apiKey="my_api_key"
        android:clickable="true" >
    </com.google.android.maps.MapView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:13:39.440

您用于构建应用程序的密钥很可能与您用于生成 google maps api 密钥的密钥不匹配。

仔细检查默认的密钥库配置。

如果您使用的是 Eclipse + ADT，请访问：

> 窗口 > 首选项 > Android > 构建 > 默认调试密钥库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:03:55.067

“调试”的 API 密钥仅适用于模拟器。如果您使用 Eclise 以“调试模式”将软件加载到手机中，您将得到图块，而不是地图。如果您使用“release”API 密钥更新 mapview，然后使用 Eclipse“EXPORT”创建一个 apk 文件，将其复制到手机上的 sd 卡，然后使用安装程序应用程序（从 Google Play 免费下载）安装它在通电话！！！

# android - 何在android上使用XOM，解析问题

> ID：13611646
> 
> 赞同：0
> 
> 时间：2012-11-28T18:07:55.573
> 
> 标签：android, xml, sax

我使用 XOM 在 android 上创建 XML，它可以工作，但是当我尝试使用 XOM 的 Builder 解析一些 xml 时出现错误：

```
11-28 22:00:11.290: I/dalvikvm(26548): Could not find method org.apache.xerces.impl.Version.getVersion, referenced from method nu.xom.Builder.<clinit>
11-28 22:00:11.290: W/dalvikvm(26548): VFY: unable to resolve static method 5819: Lorg/apache/xerces/impl/Version;.getVersion ()Ljava/lang/String;
11-28 22:00:11.290: D/dalvikvm(26548): VFY: replacing opcode 0x71 at 0x000f
11-28 22:00:11.295: W/dalvikvm(26548): Unable to resolve superclass of Lnu/xom/XML1_0Parser; (921)
11-28 22:00:11.295: W/dalvikvm(26548): Link of class 'Lnu/xom/XML1_0Parser;' failed
11-28 22:00:11.295: E/dalvikvm(26548): Could not find class 'nu.xom.XML1_0Parser', referenced from method nu.xom.Builder.findParser
11-28 22:00:11.295: W/dalvikvm(26548): VFY: unable to resolve new-instance 699 (Lnu/xom/XML1_0Parser;) in Lnu/xom/Builder;
11-28 22:00:11.295: D/dalvikvm(26548): VFY: replacing opcode 0x22 at 0x0000
11-28 22:00:11.300: W/dalvikvm(26548): Unable to resolve superclass of Lnu/xom/XML1_0Parser; (921)
11-28 22:00:11.300: W/dalvikvm(26548): Link of class 'Lnu/xom/XML1_0Parser;' failed
11-28 22:00:11.300: D/dalvikvm(26548): DexOpt: unable to opt direct call 0x1160 at 0x02 in Lnu/xom/Builder;.findParser
11-28 22:00:11.300: W/dalvikvm(26548): Unable to resolve superclass of Lnu/xom/JDK15XML1_0Parser; (461)
11-28 22:00:11.300: W/dalvikvm(26548): Link of class 'Lnu/xom/JDK15XML1_0Parser;' failed
11-28 22:00:11.325: D/dalvikvm(26548): GC_CONCURRENT freed 377K, 4% free 11719K/12167K, paused 2ms+4ms
11-28 22:00:11.325: W/System.err(26548): nu.xom.XMLException: Could not find a suitable SAX2 parser
11-28 22:00:11.325: W/System.err(26548):    at nu.xom.Builder.findParser(Unknown Source)
11-28 22:00:11.325: W/System.err(26548):    at nu.xom.Builder.<init>(Unknown Source)
11-28 22:00:11.325: W/System.err(26548):    at nu.xom.Builder.<init>(Unknown Source)
11-28 22:00:11.325: W/System.err(26548):    at com.rkovalev.first.app.MainActivity$UpdateTask.onProgressUpdate(MainActivity.java:294)
11-28 22:00:11.325: W/System.err(26548):    at com.rkovalev.first.app.MainActivity$UpdateTask.onProgressUpdate(MainActivity.java:1)
11-28 22:00:11.325: W/System.err(26548):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:618)
11-28 22:00:11.325: W/System.err(26548):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-28 22:00:11.325: W/System.err(26548):    at android.os.Looper.loop(Looper.java:137)
11-28 22:00:11.325: W/System.err(26548):    at android.app.ActivityThread.main(ActivityThread.java:4511)
11-28 22:00:11.325: W/System.err(26548):    at java.lang.reflect.Method.invokeNative(Native Method)
11-28 22:00:11.325: W/System.err(26548):    at java.lang.reflect.Method.invoke(Method.java:511)
11-28 22:00:11.325: W/System.err(26548):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
11-28 22:00:11.325: W/System.err(26548):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
11-28 22:00:11.325: W/System.err(26548):    at dalvik.system.NativeStart.main(Native Method)
11-28 22:00:11.325: W/System.err(26548): Caused by: org.xml.sax.SAXException: Can't create default XMLReader; is system property org.xml.sax.driver set?
11-28 22:00:11.325: W/System.err(26548):    at org.xml.sax.helpers.XMLReaderFactory.createXMLReader(XMLReaderFactory.java:156)
11-28 22:00:11.325: W/System.err(26548):    ... 14 more 
```

使用代码进行实验：

```
Builder parser = new Builder();
nu.xom.Document doc = parser.build("<greeting>Hello World!</greeting>", "http://www.example.org/"); 
```

因此，我在 org.xml.sax 命名空间中找不到驱动程序属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:36:32.077

这行错误日志是相关的

11-28 22:00:11.325：W/System.err(26548)：由：org.xml.sax.SAXException：无法创建默认 XMLReader；是否设置了系统属性 org.xml.sax.driver？

这个答案在这里

[移植到 Android：为什么我得到“无法创建默认 XMLReader；系统属性 org.xml.sax.driver 设置了吗？”？](https://stackoverflow.com/questions/10165477/porting-to-android-why-am-i-getting-cant-create-default-xmlreader-is-system)

# moodle - 是否可以在 Moodle 中找到登录用户的组 ID 或名称？

> ID：13611647
> 
> 赞同：0
> 
> 时间：2012-11-28T18:07:55.413
> 
> 标签：moodle

是否可以在 Moodle 1.9 中找到登录用户的组/分组 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:23:24.537

在我的 Moodle 课程中，有三个不同的组。我需要能够根据用户组注册密钥动态更改网页资源上链接的 a href。这就是我所做的：

* * *

```
<div class="enrolment-key" style="display:none;">
<?php
    // Grab current User's group from Database By ID
    $sqlGROUPMEMBERS = "SELECT * FROM mdl_groups_members WHERE userid='$USER->id'";

    // Put Query in new Varible
    $resultGROUPMEMBERS = mysql_query($sqlGROUPMEMBERS);

    // While $row = group id of user
    while($row = mysql_fetch_array($resultGROUPMEMBERS)){
        $groupID = $row["groupid"];
    }

    // Grab Enrolment Key by the Group ID
    $sqlGROUP = "SELECT * FROM mdl_groups WHERE id=$groupID";

    // Put Query in new Varible
    $resultENROLMENTKEY = mysql_query($sqlGROUP);

    // While $row = group enrolment key for that user
    while($row = mysql_fetch_array($resultENROLMENTKEY)){
        echo $row["enrolmentkey"];
    }
?>
</div>
<script>
$(document).ready(function(){
var baseURL = "https://www.surveymonkey.com/s/";
var endURL = $('.enrolment-key').html();

$(".survey-link").attr("href", baseURL + endURL);
 });
 </script>
<a class="survey-link">Link</a> 
```

可能有更好的方法可以做到这一点，但对于像我这样的菜鸟来说很好。

# javascript - 在预填表单上显示/隐藏

> ID：13611651
> 
> 赞同：2
> 
> 时间：2012-11-28T18:08:16.730
> 
> 标签：javascript, jquery

我有一个带有问题的表格。如果回答是，则会出现一组复选框；如果回答 no 没有任何反应。

```
<tr>
  <td>Question?</td>
  <td>
    <label><input name="selector" type="radio" value="yes" />Yes</label>
    <label><input name="selector" type="radio" value="no" />No</label>
    <br />
    <div id="subset">
      <label class="disabled"><input name="select1" type="checkbox" value="select1" />option1</label><br />
      <label class="disabled"><input name="select2" type="checkbox" value="select2" />option2</label><br />
      <label class="disabled"><input name="select3" type="checkbox" value="select3" />option3</label><br />
      <label class="disabled"><input name="select4" type="checkbox" value="select4" />option4</label>
    </div>
  </td>
</tr>

<script>
  $(document).ready(function(){
    $('input[name=selector]').click(function(){
      var selector = $(this).val();

      if (selector == 'no') {
        $('#subset label').addClass('disabled');
        $('#subset input').attr('disabled', 'disabled');
        $('#subset input').attr('checked', false);
      } else {
        $('#subset label').removeClass('disabled');
        $('#subset input').removeAttr('disabled');
      }
    });
  });
</script> 
```

此代码工作正常，但可以预先填写表格。如果是这样，它必须以相同的方式工作：如果选择是，则 sset 应该是可见的。

我知道我可以在单独的代码块中再次使用 jQuery 轻松地做到这一点（见下文），但我希望我可以通过稍微改变现有代码来做到这一点。

```
var selector = $('input[name=selector]:checked').val();
if (selector == 'no') {
  $('#subset label').addClass('disabled');
  $('#subset input').attr('disabled', 'disabled');
  $('#subset input').attr('checked', false);
} else {
  $('#subset label').removeClass('disabled');
  $('#subset input').removeAttr('disabled');
} 
```

预填充是用 smarty 完成的，看起来像下面的代码，我把它放在所有的单选和复选框标签中。

```
{{if $array.ELEMENT.answer=='VALUE'}} checked{{/if}} 
```

所以问题是，如何在不添加大量代码的情况下获得额外的功能？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:25:44.240

只需在**DOM**就绪事件中**触发**click 事件..

 **```
$(function(){
   $('input[name=selector]').click(function(){
      var selector = $(this).val();

      if (selector == 'no') {
        $('#subset label').addClass('disabled');
        $('#subset input').attr('disabled', 'disabled');
        $('#subset input').attr('checked', false);
      } else {
        $('#subset label').removeClass('disabled');
        $('#subset input').removeAttr('disabled');
      }
    });
    $('input[name=selector]:checked')​.click();​
   // Will trigger the click event on page load
}); 
```

因此，根据预先填写的表格，将为选中的项目触发此事件。

**[检查小提琴](http://jsfiddle.net/sushanth009/spbph/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:13:27.353

您能否将您的点击处理程序重构为一个函数并在点击和页面加载时调用该代码？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T18:13:28.023

试试 jQuery 的`toggleClass`. 它使用每个备用调用添加/删除类。有关更多详细信息，请参阅[http://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T18:23:54.877

只需将您的功能隔离在一个单独的块中：

```
function processForm(){
  var selector = $('input[name=selector]:checked').val();

  if (selector == 'no') {
    $('#subset label').addClass('disabled');
    $('#subset input').attr('disabled', 'disabled');
    $('#subset input').attr('checked', false);
  } else {
    $('#subset label').removeClass('disabled');
    $('#subset input').removeAttr('disabled');
  }
} 
```

然后，您可以直接调用它或单击它。**

# python - 用鼻子重复单次或多次测试

> ID：13611658
> 
> 赞同：11
> 
> 时间：2012-11-28T18:08:38.657
> 
> 标签：python, nose

与[此问题](https://stackoverflow.com/questions/4088354/is-it-possible-to-use-nose-to-run-one-test-multiple-times-concurrently)类似，我想让 Nose 运行一次测试（或所有测试）`n`次——但*不是*并行运行。

我在一个项目中有几百个测试；有些是一些简单的单元测试。其他的是具有某种程度的并发性的集成测试。经常在调试测试时，我想更努力地“打”一个测试；一个 bash 循环可以工作，但会产生很多杂乱的输出——不再是漂亮的单个“。” 每次通过测试。有能力在选定的测试中击败一些试验似乎是要求 Nose 做的一件自然的事情，但我在文档中的任何地方都没有找到它。

让 Nose 执行此操作的最简单方法是什么（除了 bash 循环）？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-28T18:18:40.390

您可以[将鼻子测试编写为生成器](https://nose.readthedocs.org/en/latest/writing_tests.html#test-generators)，然后鼻子将运行产生的每个函数：

```
def check_something(arg):
    # some test ...

def test_something():
    for arg in some_sequence:
        yield (check_something, arg) 
```

使用[nose-testconfig](http://pypi.python.org/pypi/nose-testconfig/)，您可以将测试运行次数设为命令行参数：

```
from testconfig import config

# ...

def test_something():
    for n in range(int(config.get("runs", 1))):
        yield (check_something, arg) 
```

你会从命令行调用它，例如

```
$ nosetests --tc=runs:5 
```

...不止一次运行。

或者（但也使用nose-testconfig），您可以编写一个装饰器：

```
from functools import wraps
from testconfig import config

def multi(fn):
    @wraps(fn)
    def wrapper():
        for n in range(int(config.get("runs", 1))):
            fn()
    return wrapper

@multi
def test_something():
    # some test ... 
```

然后，如果您想将测试分成不同的组，每个组都有自己的运行次数命令行参数：

```
from functools import wraps
from testconfig import config

def multi(cmd_line_arg):
    def wrap(fn):
        @wraps(fn)
        def wrapper():
            for n in range(int(config.get(cmd_line_arg, 1))):
                fn()
        return wrapper
    return wrap

@multi("foo")
def test_something():
    # some test ...

@multi("bar")
def test_something_else():
    # some test ... 
```

你可以这样称呼它：

```
$ nosetests --tc=foo:3 --tc=bar:7 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-30T00:25:24.733

您必须编写一个脚本来执行此操作，但您可以在命令行上重复测试名称 X 次。

```
nosetests testname testname testname testname testname testname testname 
```

等等

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-18T11:47:50.380

我最终使用的解决方案是创建 sh 脚本 run_test.sh：

```
var=0
while $1; do
    ((var++))
    echo "*** RETRY $var"
done 
```

用法：

```
./run_test.sh "nosetests TestName" 
```

它无限运行测试，但在第一个错误时停止。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-28T18:19:16.377

一种方法是在测试本身：

改变这个：

```
class MyTest(unittest.TestCase):

  def test_once(self):
      ... 
```

对此：

```
class MyTest(unittest.TestCase):

  def assert_once(self):
      ...

  def test_many(self):
      for _ in range(5):
          self.assert_once() 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-28T18:20:57.267

永远不应该有理由多次运行测试。重要的是您的测试是确定性的（即给定代码库的相同状态，它们总是产生相同的结果。）如果不是这种情况，那么您应该重新设计测试和/或，而不是多次运行测试代码，这样他们就可以了。

例如，测试间歇性失败的一个原因是测试和被测代码 (CUT) 之间的竞争条件。在这种情况下，一个天真的反应是在测试中添加一个大的“巫毒睡眠”，以“确保”在测试开始断言之前完成 CUT。

但是，这很容易出错，因为如果您的 CUT 由于任何原因（硬件功率不足、加载的盒子、繁忙的数据库等）很慢，那么它会偶尔失败。在这种情况下，更好的解决方案是让您的测试等待*事件*，而不是休眠。

该事件可以是您选择的任何内容。有时，已经生成了您可以使用的事件（例如，Javascript DOM 事件，Selenium 测试可以使用的“pageRendered”类型的事件。）其他时候，您可能适合向 CUT 添加代码，这会引发完成后的事件（也许您的架构涉及对此类事件感兴趣的其他组件。）

但是，您通常需要重新编写测试，以便它尝试检测您的 CUT 是否已完成执行（例如，输出文件是否存在？），如果不存在，则休眠 50 毫秒，然后重试。最终它会超时并失败，但只有在很长一段时间后才会这样做（例如，你的 CUT 的预期执行时间的 100 倍）

另一种方法是使用'onion/hexagonal/ports'n'adaptors'原则设计你的CUT，它坚持你的业务逻辑应该没有所有外部依赖。这意味着您的业务逻辑可以使用普通的亚毫秒单元测试进行测试，它永远不会触及网络或文件系统。完成此操作后，您需要的端到端系统测试要少得多，因为它们现在就像集成测试一样，不需要尝试通过 UI 处理业务逻辑的每个细节和边缘案例. 这种方法还将在其他领域产生巨大的好处，例如改进的 CUT 设计（减少组件之间的依赖关系），测试更容易编写，运行整个测试套件的时间大大减少。

使用上述方法可以完全消除测试不可靠的问题，我建议这样做，不仅可以改善您的测试，还可以改善您的代码库和设计能力。

# java - 泽西 JSON 和日期

> ID：13611665
> 
> 赞同：6
> 
> 时间：2012-11-28T18:09:14.040
> 
> 标签：java, json, rest, jersey

我在将 JSON 解析为 Date 对象时遇到问题。

我使用 Jersey 1.14，Tomcat 7。

我的资源类：

```
 @Path("/user")
    @Produces(MediaType.APPLICATION_JSON)
    public class UserResource {
        @Path("/~/update")
        @POST
        @Consumes(MediaType.APPLICATION_JSON)
        public Response updateUser(User user) {
            // There are update in DB
            // but Date field always null
            return Response.ok().build();
        }
        @Path("/~/get")
        @GET
        public User getUser() {
            // There are I fetch User from DB
            // Works fine, User instance returns in correct JSON
            return user;
        }

    } 
```

我的模型：

```
 @XmlAccessorType(XmlAccessType.NONE)
    @XmlRootElement(name = "user")
    public class User {
        @XmlElement(name = "name")
        private String name;
        @XmlElement(name = "myDate")
        @XmlJavaTypeAdapter(DateAdapter.class)
        private Date myDate;
        // Getters and Setters
        public String getName() {
            return name;
        }
        public void setName(String name) {
            this.name = name;
        }
        public Date getMyDate() {
            return myDate;
        }
        public void setMyDate(Date myDate) {
            this.myDate = myDate;
        }
    } 
```

我的日期类 XmlAdapter：

```
 public class DateAdapter extends XmlAdapter<String, Date> {

        private static final SimpleDateFormat dateFormat = new SimpleDateFormat(
        "yyyy-MM-dd");

        @Override
        public String marshal(Date v) {
            return dateFormat.format(v);
        }

        @Override
        public Date unmarshal(String v) {
            try {
                return dateFormat.parse(v);
            } catch (ParseException e) {
                throw new WebApplicationException();
            }
        }
    } 
```

为什么在我的 POST 方法中始终为空 Date 字段？我试图发送的这个 JSON：

```
{"name":"Peter","myDate":"1988-05-31"} 
```

PS对不起我的英语不好。

**UPD。** 我的客户代码：

```
 public class Tester {

        public static void main(String... args) throws FileNotFoundException, JSONException {

            Client c = Client.create();
            WebResource r = c.resource("http://localhost:8080/myapp/user/~/get");
            ClientResponse resp = r.get(ClientResponse.class);
            JSONObject entity = resp.getEntity(JSONObject.class);
            entity.remove("myDate");
            entity.put("myDate", "1988-05-31");
            r = c.resource("http://localhost:8080/myapp/user/~/update");
            resp = r.entity(entity, MediaType.APPLICATION_JSON).post(ClientResponse.class);
            entity = resp.getEntity(JSONObject.class);
            System.out.println(entity);
        }
    } 
```

**UPD 2。**

我在我的应用程序中发现了一个非常愚蠢的错误。相反*java.util.Date*我在我的模型类中使用了*java.sql.Date* :(
这就是为什么 Date 字段总是为空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T07:55:00.230

您的服务器代码是正确的。错误在您的客户端代码中：

```
resp = r.entity(entity, MediaType.APPLICATION_JSON).post(ClientResponse.class); 
```

应该：

```
resp = r.type(MediaType.APPLICATION_JSON).post(ClientResponse.class,entity); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-28T18:26:17.767

您必须序列化/反序列化日期，或者您必须制作日期字符串。

```
private String myDate; 
```

# c# - 查询结果不能枚举多次

> ID：13611666
> 
> 赞同：2
> 
> 时间：2012-11-28T18:09:13.360
> 
> 标签：c#, exception, linq-to-sql

考虑以下方法。在转发器绑定时，我遇到了异常。

绑定中继器：

```
private void BindRepeater()
{
    var idx = ListingPager.CurrentIndex;
    int itemCount;
    var keyword = Keywords.Text.Trim();
    var location = Area.Text.Trim();
    var list = _listing.GetBusinessListings(location, keyword, idx, out itemCount);
    ListingPager.ItemCount = itemCount;
    BusinessListingsRepeater.DataSource = list.ToList(); // exception here
    BusinessListingsRepeater.DataBind();
} 
```

获取业务列表：

```
public IEnumerable<Listing> GetBusinessListings(string location, string keyword, int index, out int itemcount)
{
    var skip = GetItemsToSkip(index);
    var result = CompiledQueries.GetActiveListings(Context);
    if (!string.IsNullOrEmpty(location))
    {
      result= result.Where(c => c.Address.Contains(location));
    }
    if (!string.IsNullOrEmpty(keyword))
    {
        result = result.Where(c => c.RelatedKeywords.Contains(keyword) || c.Description.Contains(keyword));
    }
    var list = result;

    itemcount = list.Count();
    return result.Skip(skip).Take(10);

} 
```

获取活动列表：

```
/// <summary>
///   Returns user specific listing
/// </summary>
public static readonly Func<DataContext, IQueryable<Listing>> GetActiveListings =
    CompiledQuery.Compile((DataContext db)
                          => from l in db.GetTable<Listing>()
                             where l.IsActive 
                             select l); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T18:19:48.513

当您分配时，`itemcount`您是第一次执行查询。你为什么需要这个？我的建议是不要在那里检索项目计数，而只是

```
return result.Skip(skip).Take(10).ToList(); 
```

基本上你不能同时拥有两者，只获取你需要的结果并在一个查询中检索总计数。不过，您可以使用两个单独的查询。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T18:15:35.653

您可能希望将结果保存为一个集合，而不是一个`IQueryable`.

```
var list = result.ToArray();

itemcount = list.Length;
return list.Skip(skip).Take(10); 
```

上面的代码可能不适合分页。您可能必须运行两次查询。

# java - 度分秒 (DMS) 正则表达式

> ID：13611668
> 
> 赞同：6
> 
> 时间：2012-11-28T18:09:48.680
> 
> 标签：java, regex, latitude-longitude

我有一个正则表达式，我想以各种方式匹配纬度/经度对，例如

```
123 34 42
-123* 34' 42"
123* 34' 42"
+123* 34' 42"
45* 12' 22"N
45 12' 22"S
90:00:00.0N 
```

我希望能够成对匹配这些，这样

`90:00:00.0N 180:00:00.0E`是一个纬度/经度对。

或者

`45* 12' 22"N 46* 12' 22"E`是一个纬度/经度对（1 度 x 1 度单元格）。

或者

`123* 34' 42" 124* 34' 42"`是一个纬度/经度对

ETC

使用下面的正则表达式，当我输入 123 时，它匹配。我想这是真的，因为 123 00 00 是一个有效的坐标。但是，我想使用这个正则表达式来匹配上面相同格式的对

```
 "([-|\\+]?\\d{1,3}[d|D|\u00B0|\\s](\\s*\\d{1,2}['|\u2019|\\s])?"
 + "(\\s*\\d{1,2}[\"|\u201d|\\s])?\\s*([N|n|S|s|E|e|W|w])?\\s?)" 
```

我正在使用 Java。

*****表示学位。

我在正则表达式中做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T23:03:45.580

好吧，一方面，你正在用一堆不必要的管道字符填充你的字符集 - 交替隐含在一`[]`对中。额外的清理：`+`不需要在字符类中转义。您的正则表达式似乎解决了比您给我们的更大的问题陈述 - 您没有提及`d`或`D`作为可匹配字符。而且您已经将 RegEx 的整个后半部分设置为可选。我认为您最初的问题陈述是，我构建了以下正则表达式：

```
^\s*([+-]?\d{1,3}\*?\s+\d{1,2}'?\s+\d{1,2}"?[NSEW]?|\d{1,3}(:\d{2}){2}\.\d[NSEW]\s*){1,2}$ 
```

这有点笨拙，但我会为您或将来发生这种情况的任何人分解它（您好，未来！）。

```
^ 
```

字符串开头，简单。

```
\s* 
```

任何数量的空格 - 甚至没有。

```
( 
```

表示一个组的开始——我们会回到那个。

```
[-+]? 
```

可选标志

```
\d{1,3} 
```

1 到 3 位数

```
\*? 
```

一个可选的星号 - 这里的转义是星号的关键，但如果你想用 unicode 代码点替换它以获得实际学位，你将不需要它。

```
\s+ 
```

至少一个空格字符

```
\d{1,2} 
```

1 或 2 位数。

```
'? 
```

可选撇号

```
\s+\d{1,2}+ 
```

你以前见过这些，但是有一个新的曲线球——`{1,2}`量词后面有一个加号！这使它成为一个*所有格量词*，这意味着匹配器不会放弃它与该组的匹配以使另一个成为可能。这几乎完全是为了防止`1 1 11 1 1`匹配，但可用于在您 100% 确定不需要回溯的任何地方提高速度。

```
"? 
```

可选的双引号。你必须在 Java 中逃避它。

```
[NSEW]? 
```

可选的基本方向，由字母指定

```
| 
```

或 - 您可以匹配此之前组中的所有内容，或之后匹配组中的所有内容。

```
\d{1,3} 
```

旧闻。

```
(:\d{2}) 
```

一个冒号，后跟两个字符...

```
{2} 
```

两次！

```
\.\d 
```

小数点，后跟一个数字。

```
[NSEW] 
```

和以前一样，但这次是强制性的。

```
\s*) 
```

一些空间，终于结束了小组。现在，第一组匹配了整个经度/纬度表示，最后有任意数量的空间。紧随其后的是：

```
{1,2} 
```

这样做一次或两次 - 匹配一个或一对，然后最后：

```
$ 
```

字符串的结尾。

这并不完美，但非常接近，我认为它回答了最初的问题陈述。另外，我觉得我的解释已经足够揭开它的神秘面纱，您可以对其进行编辑以进一步满足您的需求。它不会（也不会）做的一件事是强制第一个坐标与样式中的第二个坐标匹配。这对正则表达式来说太过分了。

怀疑者： [这是在行动](http://regexr.com?32vj8)。请享受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:23:17.123

一般来说，我不认为这是一个好方法。在您的界面中尝试使用一种特定格式的 DMS 坐标。
用户应在 3 个单独的文本字段中输入。

此外，这个正则表达式不是很容易维护。

标注 DMS 坐标的可能性要多得多，您甚至无法想象。人类是有创造力的。

例如：

将 N,S 放在前面
或：北，157 度 50 分 55.796 秒
或：来自 wiki：NGS 现在在 1993 年说该点是 21-18-02.54891 N 157-50-45.90280 W

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T18:35:54.990

我不是 RE 向导，但对于您的格式，如果您从单个文本框进行解析，您需要有某种约定，首先是哪一对（可能是纬度）。

从那里，您有六个数字字段（度、分、秒，每个字段可能带有小数点）、两个符号（每个 + 或 -）和最多两个半球（每个一个）。

据我所知，如果您只要求首先是纬度，其次是经度，那么每次从您的输入中解析这 8-10 个字段都会以相同的顺序发生。其余符号（保存小数点）基本上可以视为分隔符。

这会让事情变得更容易吗？

# android - 如何以及在哪里创建一个功能来注销 Android 中的所有活动都可以访问？

> ID：13611677
> 
> 赞同：0
> 
> 时间：2012-11-28T18:10:13.000
> 
> 标签：android, events, android-activity

我的 android 应用程序中有很多活动，其中大多数都有退出按钮，我只想创建可以通过 android 中的多个活动访问的功能。我必须在应用程序类中添加一个函数吗？

下面的图片将帮助您了解场景

[http://cubixshade.com/images/1.jpg](http://cubixshade.com/images/1.jpg)

[http://cubixshade.com/images/2.jpg](http://cubixshade.com/images/2.jpg)

[http://cubixshade.com/images/3.jpg](http://cubixshade.com/images/3.jpg)

退出按钮和功能在所有活动中都是相同的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T18:19:08.273

创建一个抽象活动子类。

```
public abstract YourActivityWithSignOut extends Activity 
```

在此类中仅实现所需的功能和 UI，然后让所有其他活动扩展 YouActivityWithSignOut 而不是 android.app.Activity。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T18:13:17.997

使用[Application 类](http://developer.android.com/reference/android/app/Application.html)创建要在应用程序的所有组件之间共享的字段或方法。
如果您在 Application 类中创建注销方法，那么您将在所有活动中访问它

您可以查看本教程，了解我们如何使用 Application 类在活动之间共享通用方法或字段

[http://www.devahead.com/blog/2011/06/extending-the-android-application-class-and-dealing-with-singleton/](http://www.devahead.com/blog/2011/06/extending-the-android-application-class-and-dealing-with-singleton/)

# xquery - 如何使用 SOAP UI Xquery Matches 获取某些预期值

> ID：13611683
> 
> 赞同：2
> 
> 时间：2012-11-28T18:10:42.133
> 
> 标签：xquery, assert, soapui

我有一个返回某些值的 webService。我知道这些价值观是什么。我想从 XML 中挑选它们，如果这些值是真的，我希望断言通过。想象一下，如果我得到这个结果，我的测试就通过了……我怎么能断言是这样呢？

```
 <BasicPersons>
           <id>4</id>
           <firstName>Patricia</firstName>
           <middleName>A</middleName>
           <lastName>Cluss</lastName>
        </BasicPersons>
        <BasicPersons>
           <id>5</id>
           <firstName>Benjamin</firstName>
           <middleName>L</middleName>
           <lastName>Handen</lastName>
        </BasicPersons>
        <BasicPersons>
           <id>6</id>
           <firstName>Ellen</firstName>
           <lastName>Frank</lastName>
        </BasicPersons>
        <BasicPersons> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T08:30:49.270

SoapUI 为从响应中提取 XML 元素并将其与预期数据进行比较的测试步骤提供 XPath 断言。

让我们以 XML 片段为例（我添加了根元素以使其格式正确）。首先在 SoapUI 中创建新`Test Request`步骤并用请求 XML 填充它。然后让我们检查响应是否包含 id=4 的 BasicPersons 元素和所有其他指定字段。`XPath Match`从`Property Content`组中添加新断言。然后输入检查的表达式。这是我得到的：

```
boolean(/root/BasicPersons[id=4 and firstName="Patricia" and middleName="A" and lastName="Cluss"]) 
```

`Expected Result``true`如果 XPath 匹配 XML 响应，则应为。否则断言失败。

您可以创建多个断言以从您的响应中测试几个人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T20:31:42.807

一个 xpath 表达式，如...

```
((//*:BasicPersons[1]/*:middleName)='A' and (//*:BasicPersons[1]/*:firstName)='Patricia') and so on for other fields) 
```

当所有条件都与响应匹配时，这将返回 TRUE。

# php - htaccess，将所有请求重定向到 splash.php

> ID：13611692
> 
> 赞同：-2
> 
> 时间：2012-11-28T18:11:13.147
> 
> 标签：php, apache, .htaccess, redirect

我需要为网站重新启动设置一个启动页面。所有请求都需要重定向到`splash.php`... 但此文件需要访问`/splash`包含启动页面中使用的图像的目录。

我不确定确切的规则需要在什么范围内`htaccess`......另外，如果所有请求都被路由到`/splash`并且实际的启动页面是索引会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:26:48.467

我在 SO 上找到了一个很棒的脚本：

```
Options +FollowSymlinks
RewriteEngine on
RewriteCond %{REMOTE_ADDR} !=123.45.67.89
RewriteRule index.php$ /splash.php [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:28:42.340

类似的东西

```
RewriteEngine On
RewriteCond %{REQUEST_URI}  !(image\.png)$
RewriteRule (.*)  /splash.html [QSA] 
```

至少应该给你一个起点......

# javascript - 从玩！Scalatra，模板头痛，目录结构

> ID：13611693
> 
> 赞同：3
> 
> 时间：2012-11-28T18:11:13.100
> 
> 标签：javascript, scala, playframework, underscore.js, scalatra

我正在尝试转换 Play！2.0[应用程序](https://github.com/franklovecchio/playback)转换为 Scalatra[应用程序](https://github.com/franklovecchio/scalatraback)。我取得了一些成功，但还剩下 3 个问题，其中 1 个有自己的[票](https://stackoverflow.com/questions/13595453/declaring-a-different-compile-path-for-coffeescript)。

1) 我理解这一点`src/main/webapp/WEB-INF/views`并将`src/main/webapp/WEB-INF/layouts`布局包含在标准目录结构中。但是，我无法让它在不同的层次结构中工作，例如，如果我有**2 个 servlet**并且想要为它们提供不同的视图：

```
- WEB-INF
 - servlet1
   - views
   - layouts
 - servlet2
   - views
   - layouts 
```

在我提供的示例中，我无法充分引用不直接位于`WEB-INF/views`or下的任何内容`WEB-INF/layouts`。大概是因为我没有`web.xml`正确声明一些东西？

```
// works
get("/") {
  contentType = "text/html"
  templateEngine.layout("/WEB-INF/views/app.jade")
}

// no worky
get("/") {
  contentType = "text/html"
  templateEngine.layout("/WEB-INF/servlet1/views/app.jade") // where servlet1/layouts/default.jade exists
} 
```

2）模板是怎么回事？为了使这种转换生效，我需要能够将 Underscore 模板与 Scalatra 提供的任何东西（Jade、Mustache 等）结合使用。我选择 Jade 是因为所有默认示例都使用它。

我在这里真的遇到了两个子问题。

1) 我似乎无法在 Jade 中使用 Underscore 模板，即使我在[这张票](https://stackoverflow.com/questions/8528885/using-jade-templates-in-backbone-js)中包含了 javascripts 。也许这行得通，也许行不通。这大概是因为......

2）我的`include`陈述看起来像标签，而不是实际上包括部分，所以很难测试第一个子问题。

```
<!-- / Nav -->
<include>nav</include>
<!-- / Action1 -->
<include>action1</include>
<include>action2</include>
<!-- / Wireframe -->
<div id="default-region">
  <script id="template-layout" type="text/template">
    <div id="region-nav"></div>
    <div id="region-content"></div>
  </script>
</div>
<!-- / CSS and JavaScripts relative to Backbone app -->
<include>assets</include> 
```

等效`app.jade`文件的样子：

```
// Nav
include nav

// Action1
include action1
include action2

// Wireframe
div#default-region
  script#template-layout(type="text/template")
    div#region-nav
    div#region-content

// CSS and JavaScripts relative to Backbone app
include assets 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:54:54.230

您可以以不同的方式构建视图，或者您必须为视图提供不同的文件系统配置。您可以通过[覆盖 getRenderContext](https://github.com/scalatra/oauth2-server/blob/master/src/main/scala/org/scalatra/oauth2/OAuth2ServerBaseApp.scala#L158-L175)来配置它。

您不需要调用 templateEngine.layout，而是使用我们的辅助方法。对于翡翠的布局变成`jade("my_view", "layout" -> "/WEB-INF/layouts/authenticated.jade")`

至于包括那些标签等，也许你的意思是[这个](https://github.com/scalatra/oauth2-server/blob/master/src/main/webapp/WEB-INF/views/angular.jade)？

# wcf - 工厂被废弃，不能再使用。NHibernate设施

> ID：13611697
> 
> 赞同：6
> 
> 时间：2012-11-28T18:11:21.547
> 
> 标签：wcf, nhibernate, castle-windsor, isession

三天来，我一直在尝试用 Castle 和 wcf 来解决这个 NHibernatefacility 问题，这真的令人沮丧。

在解决了十几个错误之后，我来到了这个看起来很明显但我无法解决的错误。

这是我 global.asax 的 Application_Start

```
 container.AddFacility<AutoTxFacility>();
        container.Register(Component.For<INHibernateInstaller>().ImplementedBy<NHibernateInstaller>());
        container.AddFacility<NHibernateFacility>();
        container.AddFacility<WcfFacility>();

        container.Register(
            Component.For<IAuthService>().ImplementedBy<AuthService>().LifestylePerWcfOperation(),
            Component.For<IUserRepository>().ImplementedBy<UserRepository>().LifestylePerWcfOperation(),
            Component.For<IActionWebService>().ImplementedBy<ActionWebService>().Named("ActionWebService").LifestylePerWcfOperation(),
            Component.For<ISession>().LifeStyle.PerWcfOperation().UsingFactoryMethod(x => container.Resolve<ISessionManager>().OpenSession())); 
```

这适用于第一个请求。之后，它出现了这个错误。

**工厂被废弃，不能再使用。对象名称：“这个”。**

错误发生在我的用户存储库中的这一行

```
[Transaction]
        public virtual User GetUserByCredentials(string email, string password)
        {
            using (var tx = session())
            {
                return tx.QueryOver<User>().Where(x => x.Email == email && x.Password == password).SingleOrDefault();
            }
        } 
```

我感觉这与生活方式有关。我尝试了多种组合但不成功。我现在不知道该怎么办。我带着所有的设施（应该让生活更轻松）进入了这座城堡，由于缺乏文档，这真的很复杂。我还没有找到一个下降指南来一起实现所有这些，更不用说那些不到 4 岁的东西了。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:32:30.693

很抱歉之前没有找到这个问题。

您收到此错误消息的最可能原因是您正在重新注册 ISession。该设施的重点是为您提供支持。

我还在您的评论中读到您已将 ISession 设置为单例。永远不应该这样做，因为它上面的任何单个故障都会崩溃并烧毁，并且您必须丢弃整个容器（通常是应用程序的组合根，因此您必须重新启动应用程序） .

该工具的重点是为您提供基于 AOP 的事务，然后您需要让您的事务尽可能接近 GUI 或命令层。子操作（例如读取）不应包含在单个事务中，`[Transaction]`因为它们不表示您的操作的事务边界。

相反，请查看您的表面 API，看看您在哪里调用了应该使用 ACID 运行的方法；这是您放置属性的地方。

* * *

在您的情况下，您的事务边界似乎围绕 WCF 调用。您需要做的是替换 ISession 注册的生活方式。

如果您查看 NHibernateFacility 的 c'tor，您会发现通过短暂的生活方式的选项；如果**依赖于 ISession 的所有组件都是瞬态的**，那么您最好在 ISession 上使用瞬态生活方式，因为它保证只在从组合根/容器中取出的对象存在时才存在。

“真正的”修复是从我的 github 扩展设施，在 c'tor 中使用一个枚举来获取 PerWCFOperation 值，并让设施注册 ISessionManager 和 Func ，类似于它对三种现有生活方式的处理方式。

# javascript - 使用jQuery属性选择器选择所有ID并运行一个函数

> ID：13611698
> 
> 赞同：1
> 
> 时间：2012-11-28T18:11:22.783
> 
> 标签：javascript, jquery

我想获取所有以 blblblb_ 开头的 ID 并运行我制作的单独 JS 函数。这是我所拥有的，它只获得第一个 ID：

```
$(window).scroll(function() {
  var test = $('div[id^="blblblb_"]').attr('id');
  foo(test);
}); 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T18:12:17.607

问题是[attr](http://api.jquery.com/attr/)为您提供集合中第一个元素的 id 并且您只调用`foo`一次。

使用[each](http://api.jquery.com/each/)为 jquery 集合的所有元素执行一个函数：

```
$(window).scroll(function() {
    $('div[id^="blblblb_"]').each(function(){
        foo(this.id);
    });
}); 
```

* * *

根据您的评论，如果您有越来越多的具有这种 id 的对象集合并希望确保 foo 只为每个 id 调用一次，您可以这样做：

```
var done = {};
$(window).scroll(function() {
    $('div[id^="blblblb_"]').each(function(){
         if (!done[id]) {
             foo(this.id);
             done[id] = 1;
         }
    });
}); 
```

但我对用例持怀疑态度......

# .net - WPF 从对象的 DataTable 绑定到 DataGrid

> ID：13611703
> 
> 赞同：4
> 
> 时间：2012-11-28T18:11:40.437
> 
> 标签：.net, wpf, data-binding, datagrid, datatable

我还是数据绑定的新手，并且已经阅读和研究了这个问题几个小时，我希望有人至少可以为我指出正确的方向。

我拥有的是一个填充有以下对象的 DataTable：

```
public class SimpleObject
{

    public string DisplayValue { get; set; }
    public bool Match { get; set; }
    public string BackGroundColor
    {
        get { if (Match) return "Green"; else return "White"; }
        set { //do nothing }
    }

} 
```

我已经为数据表的列设置了标题，如下所示：

```
DataTable MyDataTable = new DataTable()
List headers = new List<string>() {"Header1", "Header2", "Header3", "Header4"}
foreach (string key in headers)
{         
    MyDataTable.Columns.Add(new DataColumn(key, typeof(SimpleObject)));
} 
```

并通过添加类似于以下内容的行来填充我的 DataTable 行：

```
SimpleObject[] rowList = new SimpleObject[4]
DataRow dataRow = MyDataTable.NewRow();
for(int i = 0; i < 4; i++)
{
    //Not really how I determine values, but this will do for a basic example
    rowList[i].DisplayValue = i.ToString();
    rowList[i].Match = i % 2 == 0;
}
dataRow.ItemArray = rowList;
MyDataTable.Rows.Add(dataRow);

SimpleDataGrid.DataContext = MyDataTable; 
```

现在，**我想做的**是将 MyDataTable 绑定到 DataGrid ，这样：

*   SimpleObject.DisplayValue 显示在单元格的值中
*   单元格的背景颜色由 SimpleObject.BackGroundColor 确定

如果有人可以就如何做到这一点给我建议，我将不胜感激！到目前为止，我已经尝试做类似的事情：

```
 <DataGrid Name="SimpleDataGrid" 
                      AutoGenerateColumns="False"
                      ItemsSource="{Binding}">
                <DataGrid.Columns>
                    <DataGridTemplateColumn Header="Header1" Width="100">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=Header1.DisplayValue}"
                                           BackGround="{Binding Path=Header1.BackGroundColor}"
                                   />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>

 </DataGrid> 
```

但没有运气。我什至无法让 DisplayValue 绑定到文本（即使没有尝试绑定 BackGroundColor）。任何帮助或方向将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:11:16.080

我已经尝试复制您的问题，但它似乎对我来说很好。

我在 中添加了 2 列`DataGrid`，并且`DataTable`添加了 1 项，因此将创建 1 行。

正确绑定了`TextBlocks`和属性。`Text``Background`

这是我使用的源代码。看看它是否适合你。

XAML：

```
<DataGrid Name="SimpleDataGrid" 
                  AutoGenerateColumns="False"
                  ItemsSource="{Binding}">
    <DataGrid.Columns>
        <DataGridTemplateColumn Header="Header1" Width="100">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Path=Header1.DisplayValue}"
                               Background="{Binding Path=Header1.BackGroundColor}" />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
        <DataGridTemplateColumn Header="Header2" Width="100">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Path=Header2.DisplayValue}"
                               Background="{Binding Path=Header2.BackGroundColor}" />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

代码隐藏：

```
public partial class Window1 : Window
{
    public Window1()
    {
        InitializeComponent();

        DataTable MyDataTable = new DataTable();
        List<string> headers = new List<string>() { "Header1", "Header2", "Header3", "Header4" };

        foreach (string key in headers)
        {         
            MyDataTable.Columns.Add(new DataColumn(key, typeof(SimpleObject)));
        }

        SimpleObject[] rowList = new SimpleObject[4];
        DataRow dataRow = MyDataTable.NewRow();

        for (int i = 0; i < 4; i++)
        {
            //Not really how I determine values, but this will do for a basic example
            rowList[i] = new SimpleObject();
            rowList[i].DisplayValue = i.ToString();
            rowList[i].Match = i % 2 == 0;
        }
        dataRow.ItemArray = rowList;
        MyDataTable.Rows.Add(dataRow);

        SimpleDataGrid.DataContext = MyDataTable;
    }        
}

public class SimpleObject
{
    public string DisplayValue { get; set; }
    public bool Match { get; set; }
    public string BackGroundColor
    {
        get 
        { 
            if (Match) 
                return "Green"; 
            else return "Blue"; 
        }
    }
} 
```

# cocoa - 使用 ZipKit 列出 ZIP 文件的内容

> ID：13611704
> 
> 赞同：0
> 
> 时间：2012-11-28T18:11:40.100
> 
> 标签：cocoa, zip, nstableview

我需要使用 ZipKit 框架获取 ZIP 文件的列表内容。我想在 NSTableView 中呈现的内容。所以，理想情况下我需要得到 NS(Mutable)Array。有没有一种简单的方法可以做到这一点？

非常感谢，彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:47:10.267

老实说，我认为您应该使用[Zipzap](https://github.com/pixelglow/zipzap)来处理 zip 文件。这是一个非常好的图书馆。我已经使用了它，我没有什么不好说的。
看看 github 页面，这里有一些示例片段供您测试。

# c# - XmlAttributeOverrides 将属性附加到元素

> ID：13611706
> 
> 赞同：0
> 
> 时间：2012-11-28T18:11:48.150
> 
> 标签：c#, xml, xml-serialization

我有以下代码引发错误...

错误...

> 对于非数组类型，您可以使用以下属性：XmlAttribute、XmlText、XmlElement 或 XmlAnyElement。

代码（Go 方法的最后一行是抛出异常）...

```
 public void Go(Type typeToSerialize, object itemToSerialize)
    {
        Dictionary<string, bool> processedList = new Dictionary<string, bool>();
        XmlAttributeOverrides overrides = new XmlAttributeOverrides();

        AttachXmlTransforms(overrides, itemToSerialize.GetType(), processedList);

        s = new XmlSerializer(typeToSerialize, overrides);
    }

    private static void AttachXmlTransforms(XmlAttributeOverrides overrides, Type root,
        Dictionary<string, bool> processedList)
    {
        foreach (PropertyInfo pi in root.GetProperties())
        {
            string keyName = pi.DeclaringType + "-" + pi.Name;

            if ((pi.PropertyType == typeof(DateTime) || pi.PropertyType == typeof(DateTime?))
                && !processedList.ContainsKey(keyName))
            {
                XmlAttributes attributes = new XmlAttributes();

                attributes.XmlElements.Add(new XmlElementAttribute(pi.Name));
                //attributes.XmlAnyAttribute = new XmlAnyAttributeAttribute();
                attributes.XmlAttribute = new XmlAttributeAttribute("dval");

                //attributes.XmlIgnore = true;

                processedList.Add(keyName, true);

                overrides.Add(pi.DeclaringType, pi.Name, attributes);
            }

            if (pi.MemberType == MemberTypes.Property && !pi.PropertyType.IsPrimitive
                && pi.PropertyType.IsPublic && pi.PropertyType.IsClass
                && pi.PropertyType != typeof(DateTime))
            {
                AttachXmlTransforms(overrides, pi.PropertyType, processedList);
            }
        }
    } 
```

我正在尝试将属性（dval）添加到仅 DateTime 元素（这是外部要求）...

由此...

```
 <CreatedDate>01/01/2012</CreatedDate> 
```

对此...

```
 <CreatedDate dval="01/01/2012">01/01/2012</CreatedDate> 
```

有没有办法将属性添加到普通的非数组类型元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:19:13.310

我想你的线路有问题

```
attributes.XmlElements.Add(new XmlElementAttribute(pi.Name)) 
```

首先，从命名约定来看，我猜这`XmlElements`不是 Xml 元素，而是元素的**集合**。

此外，根据您的错误消息判断，该`XmlElements` `Add`方法不会将您`XmlElementAttribute`作为参数，而是需要`XmlAttribute, XmlText, XmlElement, or XmlAnyElement.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:02:16.433

我最终以不同的方式接近了这个......

1) 将对象转换为 XML

2）运行以下...

```
 using (MemoryStream memStm = new MemoryStream())
        {
            // Serialize the object using the standard DC serializer.
            s.WriteObject(memStm, graph);

            // Fix the memstream location.
            memStm.Seek(0, SeekOrigin.Begin);

            // Load the serialized document.
            XDocument document = XDocument.Load(memStm);

            foreach (KeyValuePair<string, ItemToAmend> kvp in _processedDateTimes)
            {
                // Locate the datetime objects.
                IEnumerable<XElement> t = from el in document.Descendants(XName.Get(kvp.Value.ProperyName, kvp.Value.PropertyNamespace))
                                          select el;

                // Add the attribute to each element.
                foreach (XElement e in t)
                {
                    string convertedDate = string.Empty;

                    if (!string.IsNullOrEmpty(e.Value))
                    {
                        DateTime converted = DateTime.Parse(e.Value);

                        convertedDate = string.Format(new MyBtecDateTimeFormatter(), "{0}", converted);
                    }

                    e.Add(new XAttribute(XName.Get("dval"), convertedDate));
                }
            }

            // Write the document to the steam.
            document.Save(writer);
        } 
```

# python - 将循环值与列表进行比较

> ID：13611708
> 
> 赞同：-2
> 
> 时间：2012-11-28T18:12:00.640
> 
> 标签：python, list, if-statement

我正在使用以下语句将从搜索光标中提取的值与列表进行比较：

```
 if value in longlist: 
```

我需要它返回长列表中的哪个索引匹配。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:17:07.383

在 python 中，最简单的方法可能是：

```
a_list = [ 'foo', 'bar' , 'foo']
a_list.index('foo') 
```

或者，如果有可能在 中多次找到该元素，则`longlist`可以使用`map`：

```
map(lambda x:x=='foo',a_list) 
```

在这种情况下将返回：

```
[True, False, True] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:14:26.757

假设这是 Python，您正在寻找`longlist.index(value)`：

```
In [13]: [1, 2, 3].index(2)
Out[13]: 1 
```

请注意，`ValueError`如果项目不在列表中，则会引发 a。

# java - JUnit 4 和异常挂起

> ID：13611711
> 
> 赞同：9
> 
> 时间：2012-11-28T18:12:07.700
> 
> 标签：java, debugging, reflection, exception-handling, junit

当我的代码中抛出未捕获的异常时，我习惯于让调试器在抛出语句处停止，以便在抛出异常时检查局部变量和所有涉及的对象的成员。使用**IntelliJ Idea**，这可以通过转到*Run*、*View Breakpoints*、选择*Exception Breakpoints*选项卡、选中*Any exception*并确保未选中*Caught exception*复选框，同时选中*Uncaught exception*复选框来完成。对于**Eclipse**和**Visual Studio**（用于 C#），情况有所不同，但思路相同。

让调试器以这种方式运行的能力非常有用；实际上非常有用，以至于我相应地构建了程序的主循环：在发布版本上，主循环当然嵌入在 try-catch-all 中；但是在调试版本中，主循环中没有 try-catch 块，因此任何在我的程序中任何地方都没有被捕获的异常都将保持未被捕获，这样调试器就会在它们被抛出的那一刻暂停我的程序。

但是，在使用 JUnit 测试我的 Java 类时，我遇到了一个问题：调试器不会因任何异常而停止。相反，发生的事情不仅是预期的异常，而且意外的异常也会自动捕获，并且我会得到一个事后异常堆栈跟踪，以尝试理解。这不是很酷。

我曾经认为发生这种情况是因为JUnit使用，`java.lang.reflect.Method.invoke()`它捕获所有异常并将它们转换为. 这意味着问题出在核心 JUnit 内部。`TargetInvocationExceptions``Method.invoke()`

那么，其他人有同样的问题吗？有谁知道一个解决方案，以便我们可以让调试器在使用 JUnit 进行测试时暂停程序执行意外异常？

相关（未回答）问题：[在 Eclipse Junit 测试运行程序中暂停未捕获的运行时异常](https://stackoverflow.com/questions/1507694/suspend-on-uncaught-runtime-exceptions-in-eclipse-junit-test-runner)

相关（未回答）问题：[如何在 jUnit 测试用例中闯入调试器？](https://stackoverflow.com/questions/12596235/how-to-break-into-debugger-within-a-junit-test-case)

相关（部分回答）问题：[Break on Exception in Eclipse using jUnit](https://stackoverflow.com/questions/1125687/break-on-exception-in-eclipse-using-junit)（接受的答案说“如果您在 jUnit 中调试单个方法，则断点开始工作。如果在 jUnit 中调试整个类或包，则调试器不会不行。”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-11T14:28:44.597

我希望我能正确理解这个问题，如果我错了，请纠正我，但是：

*   你有一个测试，它抛出了一个你自己没有发现的异常（所以从这个意义上说，它是未被捕获的）
*   当您使用 JUnit4 测试运行程序调试此测试时，JUnit 会向您显示测试失败（它引发了异常）
*   但是线程没有挂起，这是你想要实现的
*   即使您`preferences | java | debug | suspend execution on uncaught exceptions`启用了

在这种情况下，我相信这是预期的行为，JUnit 会捕获并吞下您的异常，因此就 eclipse 而言，它并非未被捕获，如此处所述[https://bugs.eclipse.org/bugs/show_bug.cgi?编号=414133](https://bugs.eclipse.org/bugs/show_bug.cgi?id=414133)

您可以通过设置自己的规则来暂停捕获的异常，从而以任何方式暂停 Eclipse。`Debug perspective | breakpoint view | J! icon | check suspend on caught exception`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:34:10.797

As a workaround for use when investigating a test failure, you could create an instance of the offending test class in main method and call its test method by hand with your exception breakpoints method (which is very cool by the way, thanks for the question). That way, the method isn't being called reflectively.

# firefox - Videojs currentTime（）函数在Firefox中不起作用

> ID：13611713
> 
> 赞同：2
> 
> 时间：2012-11-28T18:12:18.450
> 
> 标签：firefox, video.js

我正在使用 videojs currentTime() 函数跳转到视频中的特定时间。我让它在 Chrome 中工作，但 Firefox (16) 似乎没有响应（其他 api 功能，如播放/暂停在 FF 中工作）。

Videojs api 文档：[https ://github.com/zencoder/video-js/blob/master/docs/api.md#currenttimeseconds--type-in​​teger-or-float](https://github.com/zencoder/video-js/blob/master/docs/api.md#currenttimeseconds--type-integer-or-float)

```
_V_("video").ready(function(){
    var vidplayer = this;       
});

$(function() {
    $('#time').click(function() {
        seconds = $(this).text();
        vidplayer.currentTime(seconds);
        vidplayer.play();
    });
}); 
```

# php - MySQL查询有问题

> ID：13611718
> 
> 赞同：0
> 
> 时间：2012-11-28T18:12:27.830
> 
> 标签：php, mysql, sql

我正在使用 PHP/MySQL，我必须从现有的表中创建一个新表。这是有问题的：

*表 1*：

```
photo_id   email          name_to   creation_date    link
1          foo1@bar.com   paul      2012-11-21       link1.com
2          foo2@bar.com   mark      2012-11-22       link2.com
3          foo1@bar.com   alex      2012-11-23       link3.com
4          foo1@bar.com   saul      2012-11-25       link4.com
5          foo1@bar.com   john      2012-11-26       link5.com
6          foo2@bar.com   math      2012-11-27       link6.com
7          foo3@bar.com   fred      2012-11-28       link7.com 
```

在*表*1中，电子邮件不是唯一的，可以重复多次。每个链接都是不同的。有了这些数据，我必须创建一个新表，如果一封电子邮件有更多条目，则该电子邮件是唯一的，其中最多有 3 个链接（如果是这样，我需要 3 个最新条目的数据）。

因此，在这种情况下，*Table2*将类似于：

```
email           link1        creation_date1    name_to1    link2        creation_date2    name_to2    link3        creation_date3    name_to3
foo1@bar.com    link5.com    2012-11-26        john        link4.com    2012-11-25        saul        link3.com    2012-11-23        alex
foo2@bar.com    link6.com    2012-11-27        math        link2.com    2012-11-22        mark
foo3@bar.com    link7.com    2012-11-28        fred 
```

我知道 GROUP_CONCAT 功能，但这并不是我真正需要的，因为链接都在同一列中。做一个 SELECT * FROM table1 并将结果处理成 PHP 数组，然后创建*Table2*或唯一的 MySQL 查询会更好吗？或者创建多个 MySQL 表？

*Table1*有超过 1000 万行。

任何建议将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:26:12.750

1）选择所有独特的电子邮件。

2) 对于每封电子邮件，取前 3 行，该电子邮件按 creation_date 降序排列。

3）使用该数据插入新表。

怎么想？

# vim - 如何在 Vim 中使用 Taburalize 实现这种对齐？

> ID：13611721
> 
> 赞同：1
> 
> 时间：2012-11-28T18:12:41.063
> 
> 标签：vim, tabular

所以我有这样的代码：

```
func "abc","def"
func "a little long",     {a: "string"}
func "hello", ["a", "b", "c"] 
```

我希望这对齐为：

```
func           "abc", "def"
func "a little long", {a: "string"}
func         "hello", ["a", "b", "c"] 
```

我一直在尝试`:Tabularize /",\zs/`, appending `r0`,`r1`等的变体，但我不知道我在做什么。

有任何想法吗？

如果这可以通过一些干净的 vimscript/宏来完成，那也很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T06:39:29.127

```
func |          "abc", |"def"
func |"a little long", |{a: "string"}
func |        "hello", |["a", "b", "c"] 
```

我们只想选择`"foo",`每行的第一行。

```
:Tab /^func \zs"[^"]*",/l1r1 
```

# mysql - MySQL查询忽略NOT参数

> ID：13611722
> 
> 赞同：0
> 
> 时间：2012-11-28T18:12:55.180
> 
> 标签：mysql

我正在尝试运行从结果中过滤某些数据，包括确保没有任何记录具有“A_null_choice”作为其模块名称的值。

```
$sql = "SELECT am.moduleID, m.moduleName, am.type, s.regNum, s.award
FROM tbl_awardModules am
LEFT OUTER JOIN tbl_module m ON am.moduleID = m.moduleID
INNER JOIN tbl_awardLevels al ON am.awardLevelID = al.awardLevelID
INNER JOIN tbl_award a ON al.awardID = a.awardID
INNER JOIN tbl_student s ON a.awardID = s.award
WHERE am.type <> 'C' AND regNum = '$student_id' AND m.moduleName NOT LIKE 'A_null_Choice'"; 
```

查询的其余部分运行良好，没有错误等，它只是不断显示具有该值的记录。

任何见解将不胜感激，谢谢

# android - 如何在同一个选项卡中的片段之间切换？

> ID：13611733
> 
> 赞同：3
> 
> 时间：2012-11-28T18:13:28.273
> 
> 标签：android, android-fragments, android-tabs

我的小应用程序具有以下基本结构（tabhost 中的 2 个选项卡）：

Main（扩展 FragmentActivity） HomeFragment（扩展 Fragment） ConfigFragment（扩展 Fragment）

有时（当用户单击菜单时）我需要显示其他片段（GraphicFragment）而不是 HomeFragment。将是当我在 GraphicFragment 中并使用后退按钮（或菜单项 Home）时，选项卡会再次显示片段 HomeFragment。

这个怎么做？

main.xml（布局）：

```
<TabHost
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

        <TabWidget
            android:id="@android:id/tabs"
            android:orientation="horizontal"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0" />

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_weight="0" />

        <android.support.v4.view.ViewPager
            android:id="@+id/viewpager"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1" />

    </LinearLayout>

</TabHost> 
```

主.java：

公共类 Main 扩展 FragmentActivity{

```
private TabHost mTabHost;
private ViewPager mViewPager;
private HashMap<String, TabInfo> mapTabInfo = new HashMap<String, Main.TabInfo>();
private PagerAdapter mPagerAdapter;
private Config config;

private class TabInfo {

    private String tag;
    @SuppressWarnings("unused")
    private Class<?> clss;
    @SuppressWarnings("unused")
    private Bundle args;

    TabInfo(String tag, Class<?> clazz, Bundle args) {
        this.tag = tag;
        this.clss = clazz;
        this.args = args;
    }

}

private class TabFactory implements TabContentFactory {

    private final Context mContext;

    public TabFactory(Context context) {
        mContext = context;
    }

    public View createTabContent(String tag) {
        View v = new View(mContext);
        v.setMinimumWidth(0);
        v.setMinimumHeight(0);
        return v;
    }

}   

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);      

    initializeTabHost(savedInstanceState);
    if (savedInstanceState != null) {
        mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab"));
    }

    intializeViewPager();

    config = Config.GetInstance();
    config.setContext(getApplicationContext());     
}

private void initializeTabHost(Bundle args){
    mTabHost = (TabHost)findViewById(android.R.id.tabhost);
    mTabHost.setup();

    TabInfo tabInfo = null;

    Main.addTab(
        this,
        mTabHost,
        mTabHost.newTabSpec("Home").setIndicator("Home"),
        (tabInfo = new TabInfo("Home", HomeFragment.class, args)));
    mapTabInfo.put(tabInfo.tag, tabInfo);

    Main.addTab(
        this,
        mTabHost,
        mTabHost.newTabSpec("Config").setIndicator("Config"),
        (tabInfo = new TabInfo("Config", ConfigFragment.class, args)));
    mapTabInfo.put(tabInfo.tag, tabInfo);        

    mTabHost.setOnTabChangedListener(tabChangeListener);
}

protected void onSaveInstanceState(Bundle outState) {
    outState.putString("tab", mTabHost.getCurrentTabTag());
    outState.putString("tab", "Home");
    super.onSaveInstanceState(outState);
}

private void intializeViewPager() {

    List<Fragment> fragments = new Vector<Fragment>();
    fragments.add(Fragment.instantiate(this, HomeFragment.class.getName()));
    fragments.add(Fragment.instantiate(this, ConfigFragment.class.getName()));
    fragments.add(Fragment.instantiate(this, GraphicFragment.class.getName()));

    mPagerAdapter  = new PagerAdapter(super.getSupportFragmentManager(), fragments);

    mViewPager = (ViewPager)super.findViewById(R.id.viewpager);
    mViewPager.setAdapter(mPagerAdapter);
    mViewPager.setOffscreenPageLimit(4);
    mViewPager.setOnPageChangeListener(pageChangeListener);
}

private static void addTab(Main activity, TabHost tabHost, TabHost.TabSpec tabSpec, TabInfo tabInfo) {
    tabSpec.setContent(activity.new TabFactory(activity));
    tabHost.addTab(tabSpec);
}

private final TabHost.OnTabChangeListener tabChangeListener = new TabHost.OnTabChangeListener(){

    public void onTabChanged(String tabId) {
        int pos = mTabHost.getCurrentTab();
        mViewPager.setCurrentItem(pos);
    }
};  

private final ViewPager.OnPageChangeListener pageChangeListener = new ViewPager.OnPageChangeListener(){
    public void onPageScrollStateChanged(int state) {}

    public void onPageScrolled(int arg0, float arg1, int arg2) {}

    public void onPageSelected(int position) {
        mTabHost.setCurrentTab(position);
    }
}; 
```

}

片段：

公共类 HomeFragment 扩展片段 {

```
@SuppressWarnings("unused")
private Config config = Config.GetInstance();

private View view;

@SuppressWarnings("unused")
private Context context;    

public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setHasOptionsMenu(true);
}

public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){

    if(container == null){
        return null;
    }

    view = (LinearLayout)inflater.inflate(R.layout.tab_graphic, container, false);
    context = view.getContext();

    return view;

}

public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.tab_graphic, menu);
}

public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {
        case R.id.menu_home:
            loadGraphicFragment();
    }

    return false;
}

public void loadGraphicFragment(){

    Fragment fragment = new GraphicFragment();

    FragmentManager fm = getActivity().getSupportFragmentManager();
    FragmentTransaction transaction = fm.beginTransaction();
    transaction.replace(R.id.viewpager, fragment);
    transaction.commit();       
} 
```

}

时间执行错误：

```
11-28 18:09:13.673: E/AndroidRuntime(468): Uncaught handler: thread main exiting due to uncaught exception
11-28 18:09:13.695: E/AndroidRuntime(468): java.lang.NullPointerException
11-28 18:09:13.695: E/AndroidRuntime(468):  at android.support.v4.app.Fragment.setUserVisibleHint(Fragment.java:801)
11-28 18:09:13.695: E/AndroidRuntime(468):  at android.support.v4.app.FragmentPagerAdapter.setPrimaryItem(FragmentPagerAdapter.java:130)
11-28 18:09:13.695: E/AndroidRuntime(468):  at android.support.v4.view.ViewPager.populate(ViewPager.java:1010)
11-28 18:09:13.695: E/AndroidRuntime(468):  at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:523)
11-28 18:09:13.695: E/AndroidRuntime(468):  at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:495)
11-28 18:09:13.695: E/AndroidRuntime(468):  at android.support.v4.view.ViewPager.setCurrentItem(ViewPager.java:476)
11-28 18:09:13.695: E/AndroidRuntime(468):  at br.com.censanet.connectionmonitor.Main$1.onTabChanged(Main.java:125)
11-28 18:09:13.695: E/AndroidRuntime(468):  at android.widget.TabHost.invokeOnTabChangeListener(TabHost.java:353)
11-28 18:09:13.695: E/AndroidRuntime(468):  at android.widget.TabHost.setCurrentTab(TabHost.java:338)
11-28 18:09:13.695: E/AndroidRuntime(468):  at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:129)
11-28 18:09:13.695: E/AndroidRuntime(468):  at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:379)
11-28 18:09:13.695: E/AndroidRuntime(468):  at android.view.View.performClick(View.java:2364)
11-28 18:09:13.695: E/AndroidRuntime(468):  at android.view.View.onTouchEvent(View.java:4179)
11-28 18:09:13.695: E/AndroidRuntime(468):  at android.view.View.dispatchTouchEvent(View.java:3709)
11-28 18:09:13.695: E/AndroidRuntime(468):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:852)
11-28 18:09:13.695: E/AndroidRuntime(468):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
11-28 18:09:13.695: E/AndroidRuntime(468):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
11-28 18:09:13.695: E/AndroidRuntime(468):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
11-28 18:09:13.695: E/AndroidRuntime(468):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
11-28 18:09:13.695: E/AndroidRuntime(468):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
11-28 18:09:13.695: E/AndroidRuntime(468):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
11-28 18:09:13.695: E/AndroidRuntime(468):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
11-28 18:09:13.695: E/AndroidRuntime(468):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
11-28 18:09:13.695: E/AndroidRuntime(468):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
11-28 18:09:13.695: E/AndroidRuntime(468):  at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
11-28 18:09:13.695: E/AndroidRuntime(468):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
11-28 18:09:13.695: E/AndroidRuntime(468):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
11-28 18:09:13.695: E/AndroidRuntime(468):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-28 18:09:13.695: E/AndroidRuntime(468):  at android.os.Looper.loop(Looper.java:123)
11-28 18:09:13.695: E/AndroidRuntime(468):  at android.app.ActivityThread.main(ActivityThread.java:4363)
11-28 18:09:13.695: E/AndroidRuntime(468):  at java.lang.reflect.Method.invokeNative(Native Method)
11-28 18:09:13.695: E/AndroidRuntime(468):  at java.lang.reflect.Method.invoke(Method.java:521)
11-28 18:09:13.695: E/AndroidRuntime(468):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
11-28 18:09:13.695: E/AndroidRuntime(468):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618) 
```

请帮我！（对不起英语！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:17:10.570

您可以从此处下载对选项卡类型项目非常有用的示例代码。

[https://github.com/JakeWharton/Android-ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)

**在此处更新** 您可以找到有关片段的更多信息。

[改变片段](https://stackoverflow.com/questions/5658675/replacing-a-fragment-with-another-fragment-inside-activity-group)

# macos - qt mac osx 10.8 dyld：库未加载...找不到图像

> ID：13611740
> 
> 赞同：9
> 
> 时间：2012-11-28T18:14:07.647
> 
> 标签：macos, qt, dyld

我有一个应用程序，我正在使用 Qt 4.7.4 在 osx 雪豹下构建和运行良好，但是那个 macbook 死了。我现在正在设置运行山狮（10.8.2）和Qt 4.8.3的新macbook。我可以构建我的应用程序，但是当我尝试从 Qt Creator 2.6.0 中运行它时，我得到了这个运行时错误：

```
dyld: Library not loaded: ../lib/libicudata.46.1.dylib
  Referenced from: /Users/david/dev/svn/map_creator/karte-build-Desktop-Debug/debug/MapCreator.app/Contents/MacOS/MapCreator
  Reason: image not found
The program has unexpectedly finished. 
```

我从 Finder 运行它时遇到类似的错误。

otool 给了我：

```
Davids-MacBook-Pro:map_creator david$ otool -L karte-build-Desktop-Debug/debug/MapCreator.app/Contents/MacOS/MapCreator 
karte-build-Desktop-Debug/debug/MapCreator.app/Contents/MacOS/MapCreator:
    ../lib/libicudata.46.1.dylib (compatibility version 46.0.0, current version 46.1.0)
    libicui18n.46.dylib (compatibility version 46.0.0, current version 46.1.0)
    libicuuc.46.dylib (compatibility version 46.0.0, current version 46.1.0)
    /System/Library/Frameworks/Foundation.framework/Versions/C/Foundation (compatibility version 300.0.0, current version 945.11.0)
    /System/Library/Frameworks/Security.framework/Versions/A/Security (compatibility version 1.0.0, current version 55179.1.0)
    /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit (compatibility version 45.0.0, current version 1187.34.0)
    /Users/david/dev/qt483/lib/QtSvg_fmosoft.framework/Versions/4/QtSvg_fmosoft (compatibility version 4.8.0, current version 4.8.3)
    /Users/david/dev/qt483/lib/QtGui_fmosoft.framework/Versions/4/QtGui_fmosoft (compatibility version 4.8.0, current version 4.8.3)
    /Users/david/dev/qt483/lib/QtCore_fmosoft.framework/Versions/4/QtCore_fmosoft (compatibility version 4.8.0, current version 4.8.3)
    /Users/david/dev/qt483/lib/QtXmlPatterns_fmosoft.framework/Versions/4/QtXmlPatterns_fmosoft (compatibility version 4.8.0, current version 4.8.3)
    /Users/david/dev/qt483/lib/QtNetwork_fmosoft.framework/Versions/4/QtNetwork_fmosoft (compatibility version 4.8.0, current version 4.8.3)
    /usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 56.0.0)
    /usr/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1669.0.0)
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 169.3.0)
    /usr/lib/libobjc.A.dylib (compatibility version 1.0.0, current version 228.0.0)
    /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 744.12.0) 
```

从雪豹到山狮，或者从 Qt 4.7.4 到 4.8.3，是否有什么变化导致了这个问题？或者我错过了在我的新 Macbook 上设置所有内容的步骤？我还在学习——真的只是 Qt 和 Mac 上的新手，试图在主要开发人员离开后维护这个项目。

谢谢，大卫

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-28T22:29:14.100

在您的 Qt 项目设置中，在运行时设置下，您必须将路径添加到您编译的 ICU 库。有一个网格，您可以在其中设置环境变量等。您想要的是`DYLD_LIBRARY_PATH`，并设置（或附加）ICU 库的路径。

这将使 Qt 能够解析`../lib/libicudata.46.1.dylib`为实际的库文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-07T23:12:57.147

Qt 5.2.0 离线安装程序中存在一个错误，导致可执行文件在根路径而不是安装位置搜索 Qt 库。

示例错误：

```
dyld: Library not loaded: /usr/local/Qt-5.2.0/lib/QtGui.framework/Versions/5/QtGui
Referenced from: /Users/JRP/Dropbox/STANFORD/CS106B/HW1/build-Life-Desktop_Qt_5_2_0_clang_64bit-Debug/Life.app/Contents/MacOS/Life
Reason: image not found
The program has unexpectedly finished. 
```

使固定：

给定 Qt 安装路径，您应该运行：

```
sudo ln -s /Users/$USER/Qt5.2.0/5.2.0/clang_64/ /usr/local/Qt-5.2.0 
```

或者

```
sudo ln -s /Users/ito/Qt/5.2.0/clang_64/ /usr/local/Qt-5.2.0 
```

你明白我的想法。它只是创建一个从 qt 安装位置到它正在寻找的位置的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-27T12:08:48.753

在 Qt 上`5.11.3`，我**重新启动**了 QtCreator，问题得到了解决！

# python - Django 表 - 列过滤

> ID：13611741
> 
> 赞同：16
> 
> 时间：2012-11-28T18:14:15.620
> 
> 标签：python, django, django-tables2

我开始使用[django-tables2](https://github.com/bradleyayers/django-tables2)（我可以从第一印象强烈推荐），我问自己如何实现列过滤。我没有找到合适的文档，但我确信它在某个地方。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-28T06:48:45.027

答案有点晚，但无论如何......我也找不到任何合适的列过滤文档。有很多方法可以做到：

**A. 手动**：我添加了一个包含我想过滤的字段的表单，然后在我的视图中执行类似的操作：

```
  数据 = 模型.MyClass.all()
  form = forms.MyFilterForm(request.GET)
  如果 request.GET.get('field1'):
    数据 = data.filter(field1=request.GET.get('field1') )
  如果 request.GET.get('field2'):
    数据 = data.filter(field2=request.GET.get('field2') )   
  ...
  表 = 表。我的表（数据）

```

这很好用，但它不是那么干燥，因为它在视图中是硬编码的。

**B. 使用 SingleTableView**：另一种方法是添加包含表单的 SingleTableView：

```
从 django_tables2 导入 SingleTableView
类FilteredSingleTableView（SingleTableView）：
  def get_table_data(self):
    数据=模型.MyClass.objects.all
    如果 self.request.GET.get('field1'):
      数据 = data.filter(field1=self.request.GET.get('field1') )
    如果 self.request.GET.get('field1'):
      数据 = data.filter(field1=self.request.GET.get('field1') )
    返回数据

    def get_context_data(self, **kwargs):
      context = super(FilteredSingleTableView, self).get_context_data(**kwargs)
      上下文['form'] = forms.MyFilterForm(self.request.user, self.request.GET)
      返回上下文

```

这更干:)

**C. 使用 SingleTableView 和 django_filters**：这可能是最干燥的方式 :) 以下是如何做到的：

首先定义一个过滤器：

```
MyFilter 类（django_filters.FilterSet）：
  field1 = django_filters.CharFilter()
  field2 = django_filters.CharFilter()
...

```

（或者您可以在 Meta 中添加模型过滤器（模型 = MyModel）

现在，像这样创建一个 SingleTableView

```
类FilteredSingleTableView（SingleTableView）：
  def get_table_data(self):
    f = filters.MyFilter(self.request.GET, queryset =models.MyClass.objects.all(), request=self.request)
    返回 f

  def get_context_data(self, **kwargs):
    context = super(FilteredSingleTableView, self).get_context_data(**kwargs)
    f = filters.MyFilter(self.request.GET, queryset =models.MyClass.objects.all(), request=self.request)
    上下文['form'] = f.form
    返回上下文

```

（可能 f =... 行有问题，但否则我无法使其工作。

最后，您可以像这样从 urls.py 调用 SingleTableView

```
url(r'^$', views.FilteredSingleTableView.as_view(
    table_class = tables.MyTable,
    模型=模型.MyClass，
    template_name ='mytemplate.html',
    table_pagination={ "per_page":50 } )) ,
    name='filtered_single_table_view'
),

```

**D. 使用泛型类：**这是一种更加 DRY 和 django-generic-class-views 的方式！**这实际上是C**的下一步：只需像这样声明您的 FilteredSingleTableView ：

```
类 FilteredSingleTableView(django_tables2.SingleTableView):
  filter_class = 无

  def get_table_data(self):
    self.filter = self.filter_class(self.request.GET, queryset =super(FilteredSingleTableView, self).get_table_data() )
    返回 self.filter.qs

  def get_context_data(self, **kwargs):
    context = super(FilteredSingleTableView, self).get_context_data(**kwargs)
    上下文['filter'] = self.filter
    返回上下文

```

现在 FilteredSingleTableView 有一个过滤器类的参数，因此您可以在 urls.py 中将其传递给其他参数：

```
    url(r'^$', ship.views.FilteredSingleTableView.as_view(
        模型=模型.MyModel，
        table_class=tables.MyTable,
        template_name='mytemplate.html' ,
        filter_class = filters.MyFilter,
    ) , name='myview'),

```

因此，您无需修改​​即可使用 FilteredSingleTableView 来过滤您的任何模型！

另请注意，我现在已将过滤器保存为实例变量并删除了`f=filters.MyFilter(...)`我在**C**中的重复代码（get_table_data 在 get_context_data 之前调用 - 如果情况并非总是如此，那么我们可以添加一个`get_filter`实例方法来解决问题) !

**2016 年 4 月 23 日更新**：根据大众的需求，我创建了一个简单的 Django 项目，该项目使用通用的 FilteredSingleTableView 类过滤书籍表。您可以在以下位置找到它：[https ://github.com/spapas/django_table_filtering](https://github.com/spapas/django_table_filtering)

**更新 2016**年 5 月 7 日：请注意，您应该使用**D**`return self.filter.qs`中的`get_table_data`返回（我已经用这个更新了答案），否则视图将花费太长时间来呈现大表 - 更多信息可以在[https://github.com/spapas/django_table_filtering/issues/1](https://github.com/spapas/django_table_filtering/issues/1)

 *** * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-13T10:38:17.570

There is an easier and DRYer way to build a generic view do this:

```
from django_filters.views import FilterView
from django_tables2 import SingleTableView

class FilterTableView(FilterView, SingleTableView):   
    def get_table_data(self):
        return self.object_list 
```

So you can do this:

```
class MyTableView(FilterTableView):
    model = MyModel
    table_class = MyTable
    filterset_class = MyFilter 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-23T08:33:05.887

这是我使用 Django 2、Crispy Forms 和 Bootstrap 4 编写的应用程序的完整工作示例：

**urls.py**：

```
from django.urls import path
from .views import ASTodasView

urlpatterns = [
    path("asignatura/todas", ASTodasView.as_view(), name="as-todas"),
] 
```

**视图.py**：

```
from .filters import AsignaturaListFilter
from .forms import AsignaturaFilterFormHelper
from .models import Asignatura, Calendario
from .tables import AsignaturasTable
from .utils import PagedFilteredTableView

class ASTodasView(PagedFilteredTableView):
    filter_class = AsignaturaListFilter
    model = Asignatura
    table_class = AsignaturasTable
    template_name = "asignatura/todas.html"
    formhelper_class = AsignaturaFilterFormHelper

    def get_queryset(self):
        anyo_academico = Calendario.get_anyo_academico_actual()
        return Asignatura.objects.filter(anyo_academico=anyo_academico) 
```

**过滤器.py**：

```
import django_filters
from .models import Asignatura

class AsignaturaListFilter(django_filters.FilterSet):
    class Meta:
        model = Asignatura
        fields = {
            "nombre_estudio": ["icontains"],
            "nombre_centro": ["icontains"],
            "asignatura_id": ["exact"],
            "nombre_asignatura": ["icontains"],
            "cod_grupo_asignatura": ["exact"],
        }
        order_by = ["asignatura_id"] 
```

**表格.py**：

```
from django import forms
from django.utils.translation import gettext_lazy as _

from crispy_forms.bootstrap import FormActions, InlineField
from crispy_forms.helper import FormHelper
from crispy_forms.layout import Div, Fieldset, Layout, Submit

class AsignaturaFilterFormHelper(FormHelper):
    # See https://django-crispy-forms.readthedocs.io/en/latest/form_helper.html

    form_class = "form form-inline"
    form_id = "asignatura-search-form"
    form_method = "GET"
    form_tag = True
    html5_required = True
    layout = Layout(
        Div(
            Fieldset(
                "<span class='fa fa-search'></span> " + str(_("Buscar asignatura")),
                Div(
                    InlineField("nombre_estudio__icontains", wrapper_class="col-4"),
                    InlineField("nombre_centro__icontains", wrapper_class="col-4"),
                    InlineField("asignatura_id", wrapper_class="col-4"),
                    InlineField("nombre_asignatura__icontains", wrapper_class="col-4"),
                    InlineField("cod_grupo_asignatura", wrapper_class="col-4"),
                    css_class="row",
                ),
                css_class="col-10 border p-3",
            ),
            FormActions(
                Submit("submit", _("Filtrar")),
                css_class="col-2 text-right align-self-center",
            ),
            css_class="row",
        )
    ) 
```

**表.py**：

```
import django_tables2 as tables
from django.utils.translation import gettext_lazy as _

from .models import Asignatura

class AsignaturasTable(tables.Table):
    class Meta:
        attrs = {"class": "table table-striped table-hover cabecera-azul"}
        model = Asignatura
        fields = (
            "nombre_estudio",
            "nombre_centro",
            "asignatura_id",
            "nombre_asignatura",
            "cod_grupo_asignatura",
        )
        empty_text = _(
            "No hay ninguna asignatura que satisfaga los criterios de búsqueda."
        )
        template_name = "django_tables2/bootstrap4.html"
        per_page = 20 
```

**实用程序.py**：

```
from django_tables2 import SingleTableView

class PagedFilteredTableView(SingleTableView):
    filter_class = None
    formhelper_class = None
    context_filter_name = "filter"

    def get_table_data(self):
        self.filter = self.filter_class(
            self.request.GET, queryset=super().get_table_data()
        )
        self.filter.form.helper = self.formhelper_class()
        return self.filter.qs

    def get_context_data(self, **kwargs):
        context = super(PagedFilteredTableView, self).get_context_data(**kwargs)
        context[self.context_filter_name] = self.filter
        return context 
```

**todas.html**：

```
{% extends 'base.html' %}
{% load crispy_forms_tags i18n %}
{% load render_table from django_tables2 %}

{% block title %}{% trans "Todas las asignaturas" %}{% endblock title %}

{% block content %}
<div class="container-blanco">
  <h1>{% trans "Todas las asignaturas" %}</h1>
  <hr />
  <br />

  {% crispy filter.form filter.form.helper %}
  <br />
  {% render_table table %}
</div>
{% endblock content %} 
```

希望能帮助到你。欢迎改进。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-29T13:35:17.190

如果您更喜欢[`django_tables2.views.SingleTableMixin`](https://django-tables2.readthedocs.io/en/latest/pages/api-reference.html#django_tables2.views.SingleTableMixin)与 Django`ListView`或其子类（而不是`SingleTableView`）一起使用，我建议如下：

```
class FilteredListViewMixin(object):
    """ Uses django-filter to filter a ListView. """

    filter_class = None

    def get_queryset(self):
        qs = super(FilteredListViewMixin, self).get_queryset()

        self.filter = self.filter_class(self.request.GET,
                                        queryset=qs)
        return self.filter.qs

    def get_context_data(self, **kwargs):
        context = super(FilteredListViewMixin, self).get_context_data(**kwargs)
        context['filter'] = self.filter
        return context 
```

它具有不耦合到`django-tables2`(DRY FTW) 的额外好处，这意味着它也可以与泛型一起使用`ListViews`。**

# jquery - 在 jQuery 和 Django 之间的某个地方，我的 JSON 数据得到一个额外的 [] 并且表单验证失败

> ID：13611745
> 
> 赞同：1
> 
> 时间：2012-11-28T18:14:29.070
> 
> 标签：jquery, ajax, django, post

我有一个 Django 模型，其中包含一个`ManyToMany`名为 的字段`images`，以及该模型的一个简单字段`ModelForm`。

我正在尝试使用 jQuery 和一个非常基本的`UpdateView`.

## 模型领域

```
images = models.ManyToManyField(
    RawImage,
    null = True,
) 
```

## 表格

```
class PublicDataPoolForm(forms.ModelForm):
    error_css_class = 'error'

    class Meta:
        model = PublicDataPool 
```

## 更新视图

```
class PublicDataPoolAddDataView(AjaxableResponseMixin, UpdateView):
    model = PublicDataPool
    form_class = PublicDataPool_ImagesForm

    @method_decorator(user_passes_test(lambda u: user_has_active_subscription(u)))
    def dispatch(self, *args, **kwargs):
        return super(PublicDataPoolAddDataView, self).dispatch(*args, **kwargs) 
```

## jQuery发布数据

```
$.ajax({
    type: 'post',
    dataType: 'json',
    url: '/rawdata/publicdatapools/' + pk + '/add-data/',
    data: {images: [1, 2]}
}); 
```

我得到一个`ValidationError`，因为该字段`images`是必需的。`request.POST`如果我在 my 中打印 my `UpdateView`，我会得到：

```
<QueryDict: {u'images[]': [u'1', u'2']}> 
```

我相信问题出在那些`[]`，因为我已经检查了另一种以更传统方式发布的表单，并且字段名称`request.POST`中没有这些`[]`。

知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:40:32.940

您需要`jQuery.ajaxSettings.traditional = true;`在页面加载时进行设置，以便 jquery 不会将 附加`[]`到键。

来源：http: [//forum.jquery.com/topic/jquery-post-1-4-1-is-appending-to-vars-when-posting-from-array-within-array#14737000000691277](http://forum.jquery.com/topic/jquery-post-1-4-1-is-appending-to-vars-when-posting-from-array-within-array#14737000000691277)

# android - 仅限 Android 应用横向

> ID：13611747
> 
> 赞同：4
> 
> 时间：2012-11-28T18:14:53.530
> 
> 标签：android, orientation, screen-orientation

我只想制作我的应用程序横向，所以我使用此处提供的方法：[我只想在 android 的横向中制作我的应用程序](https://stackoverflow.com/questions/4561527/i-want-to-make-my-application-only-in-landscape-in-android)

简而言之，我正在添加`android:screenOrientation="landscape"`到我的清单文件中。

它部分工作，但问题是它只允许用户在两​​个横向方向之一中使用该应用程序。我如何告诉应用程序允许使用任一横向方向？

（在 Nexus 7 4.2 上测试）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T18:23:46.170

使用`android:screenOrientation="sensorLandscape"`，但仅当您在 Android 2.3 或更高版本上构建项目时才有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:22:30.570

`android:screenOrientation`有几个选项可以在[文档中找到](http://developer.android.com/guide/topics/manifest/activity-element.html)

你可能想要的是

*   `"sensorLandscape"`
    横向，但可以是基于设备传感器的正常或反向横向。在 API 级别 9 中添加。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-28T07:11:30.603

还有“userLandscape” - 根据文档

横向方向，但根据设备传感器和用户的传感器偏好，可以是正常或反向横向。如果用户已锁定基于传感器的旋转，则其行为与景观相同，否则其行为与 sensorLandscape 相同。在 API 级别 18 中添加。

# javascript - JavaScript 模块模式与构造函数中定义的方法

> ID：13611752
> 
> 赞同：11
> 
> 时间：2012-11-28T18:15:02.810
> 
> 标签：javascript, constructor, module-pattern

从单实例和多实例的角度来看，我为什么要按照模块模式编写所有这些额外的代码行，而不是仅使用标准构造函数以及在构造函数主体中定义的方法和属性？

**模块模式示例：http: [//jsfiddle.net/T3ZJE/1/](http://jsfiddle.net/T3ZJE/1/)**

```
var module = (function () {
    // private variables and functions
    var foo = 'bar';

    // constructor
    var module = function () {
    };

    // prototype
    module.prototype = {
        constructor: module,
        something: function () {
        }
    };

    // return module
    return module;
})();

var my_module = new module();

console.log(my_module) 
```

**构造函数示例：http: [//jsfiddle.net/EuvaS/2/](http://jsfiddle.net/EuvaS/2/)**

```
function Module(){

    // private variables and functions
    var foo = 'bar';

    //public methods
    this.something = function () {

    }        
}

var my_module = new Module();

console.log(my_module); 
```

对我来说，最终的结果几乎是一样的。两者都可以具有公共属性和方法，都可以具有可以被公共方法访问的“私有”变量和方法。

两者都将为单例定义一次公共/原型方法，都将为对象的多个实例/克隆定义多次。

我错过了什么吗？有什么不同？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-28T18:48:13.620

在第一个示例中， foo 将是 module() 的所有实例共有的静态变量。意思是，所有实例都将引用相同的变量。

在第二个示例中，每个 Module() 实例的 foo 都不同。

除此之外，我看不出有什么不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:03:28.180

没什么特别的区别。但我不确定这个例子中模块模式的意义是什么。您不需要在模块中包含构造函数。构造函数应该像第二种样式一样使用。但是最好在其原型对象中定义方法，除非您需要为每个实例都拥有它。

再次就目的而言，我认为这里的模块模式不是正确的方法。

# javascript - 我无法在 javascript 中获取 div 的宽度

> ID：13611762
> 
> 赞同：0
> 
> 时间：2012-11-28T18:15:48.663
> 
> 标签：javascript

我的代码将一个 div 定位在我的鼠标当时所在的位置，如果它太靠近页面的右侧，则应该将 div 向左移动与其宽度相同的量。但我似乎无法获得 div 的宽度。这是我的代码：

```
function position(e) {
  document.getElementById(tt).style.visibility = "visible";
  if (document.body && document.body.offsetWidth) {
    var winW = document.body.offsetWidth;
    var winH = document.body.offsetHeight;
  }
  if (e.pageX || e.pageY) {
    l = e.pageX;
    u = e.pageY;
  } else if (e.clientX || e.clientY) {
    l = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;
    u = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;
  }
  var divL = document.getElementById(tt).style.width;
  if ((winW - l) <= 320) {
    l = l - divL;
  }
  document.getElementById(tt).style.top = (u + 10) + 'px';
  document.getElementById(tt).style.left = (l + 10) + 'px';

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:25:58.890

```
var width = document.getElementById(tt).offsetWidth; 
```

# iphone - 打开应用时推送通知

> ID：13611763
> 
> 赞同：1
> 
> 时间：2012-11-28T18:15:57.197
> 
> 标签：iphone, objective-c, ios

我的应用程序中有推送通知，如果应用程序关闭或应用程序在后台，一切正常，但如果应用程序运行（活动）推送通知不显示，但调用方法`application:didReceiveRemoteNotification:`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T18:30:35.607

您可以使用以下代码在 didReceiveRemoteNotification 中判断您的应用程序是否刚刚被带到前台：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{
    if ( application.applicationState == UIApplicationStateActive )
        // app was already in the foreground
    else
        // app was just brought from background to foreground
    ...
} 
```

您无法在交付时选择使用何种呈现方法来呈现推送通知，即在通知本身中编码（可选警报、徽章编号、声音）。但是由于您可能同时控制了应用程序和推送通知的有效负载，您可以在有效负载中指定是否已经向用户显示了警报视图和消息。只有在应用程序已经在前台运行的情况下，您才知道用户不只是通过警报或定期从主屏幕启动您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:26:47.843

看看这个答案[https://stackoverflow.com/a/7965961/869455](https://stackoverflow.com/a/7965961/869455)

当应用程序打开时，应用程序有责任在 application:didReceiveRemoteNotification: 中适当地处理通知，并向应用程序内的用户显示消息。

# codeigniter - Codeigniter 数组为 POST 变量捕获多行

> ID：13611764
> 
> 赞同：2
> 
> 时间：2012-11-28T18:16:02.267
> 
> 标签：codeigniter

我是 codeigniter 的新手，我试图从一个表单中捕获多个值来更新我的数据库。

这是控制器：

```
 public function update_tb_table_test(){

        $tb_items = $_POST;
    } 
```

和观点：

```
 <thead>
                <tr>
                    <th>Payment ID</th>
                    <th>Customer ID</th>
                    <th>Date</th>
        </thead>
            <tbody>
                <tr>
                    <td><input type="text" name="update" id="comment_plog" /></td>
                    <td><input type="text" name="update2" id="ar_id" /></td>
                    <td><input type="text" name="update3" id="date" /></td>
                </tr>
                <tr>
                    <td><input type="text" name="update" id="comment_plog" /></td>
                    <td><input type="text" name="update2" id="ar_id" /></td>
                    <td><input type="text" name="update3" id="date" /></td>
                </tr>
                <tr>
                    <td><input type="text" name="update" id="comment_plog" /></td>
                    <td><input type="text" name="update2" id="ar_id" /></td>
                    <td><input type="text" name="update3" id="date" /></td>
                </tr>
            </tbody> 
```

print_r 的结果是

```
 Array ( [update] => 3 [update2] => 4 [update3] => 5 ) 
```

这是我输入框中的最后三个值，仅来自最后一行。我知道我需要遍历每一行，但我不确定如何设置。我也尝试过`$tb_items = $this->input->post(NULL, TRUE);`，它只返回最后一个值 5。

我没有包含模型，因为我希望 print_r 在继续之前返回正确的值。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:42:51.917

你应该使用

```
<input type="text" name="update[]" id="comment_plog" />
<input type="text" name="update2[]" id="ar_id" />
<input type="text" name="update3[]" id="date" /> 
```

注意`[]`名称。所以你会得到类似的东西

```
Array ( [update] => Array( [0] => 3 [1] => 4 [2] => 5 ) [update2] => Array( [0] => 7 [1] => 8 [2] => 9 ) [update3] => Array( [0] => 10 [1] => 11 [2] => 12 ) ) 
```

并且可以遍历每个字段，例如

```
foreach($_POST['update'] as $upd1)
{
    //...
} 
```

和

```
foreach($_POST['update2'] as $upd2)
{
    //...
} 
```

等等。

# c++ - 检查学生是否超过 18 岁

> ID：13611766
> 
> 赞同：2
> 
> 时间：2012-11-28T18:16:07.820
> 
> 标签：c++, class

我正在做一项要求我检查学生是否超过 18 岁的作业。我的功能是：

```
bool Student::isOverEighteen() {
  int date[3]; // D/M/Y
  char *pdata;

  pdata = strtok(Anagrafica::birth, "/"); // Anagrafica is the base class

  for (short i = 0; pdata != NULL; i++) {
    data[i] = pdata;
    pdata = strtok(NULL, "/");
  }

  time_t t    = time(NULL);
  tm *locale  = localtime(&t);

  if (data[0] < locale->tm_mday &&
     (data[1] < locale->tm_mon + 1  || data[1] == locale->tm_mon + 1) &&
     (locale->tm_year + 1900 - data[3] > 18))
  {
    return true;
  } else {
    return false;
  }
} 
```

但是，当我显示出生日期时，它会显示日期和学生的教室。例如：25/06/19944A（4A 是教室的名称）

我用来注册学生信息的功能：

```
Student::Student() {
  std::cout << "Name: ";
  std::cin.getline(Anagrafica::name, 101);
  std::cout << "Surname: ";
  std::cin.getline(Anagrafica::surname, 101);
  std::cout << "Birth (XX/XX/XXXX): ";
  std::cin.getline(Anagrafica::birth, 11);
  std::cout << "Classroom: ";
  std::cin.getline(Anagrafica::classroom, 101);
} 
```

显示它们的功能：

```
void Anagrafica::Show() {
  std::cout << "\nName:" << this->name;
  std::cout << "\nSurname:" << this->surname;
  std::cout << "\nBirth:" << this->birth;
  std::cout << "\nClassroom: " << this->classroom;
  std::cout << std::endl;
} 
```

他们被宣布：

```
char name[100];
char surname[100];
char birth[10];
char classroom[100]; 
```

有什么解决方案可以让它工作吗？

编辑（对于 Nik Bougalis）：

这是我现在使用的那个。字符串问题开始是因为我使用的是 c_str；而不是 c_str();

```
bool Entry::IsOverEighteen() {
  int date[3];

  date[0] = std::atoi(this->birth.substr(0, 2).c_str());  // Day
  date[1] = std::atoi(this->birth.substr(4, 2).c_str());  // Month
  date[2] = std::atoi(this->birth.substr(6, 4).c_str());  // Year

  time_t t  = time(NULL);
  tm *local = localtime(&t);

  // Perche' sia maggiorenne occorre che:
  //  Il giorno attuale sia maggiore di quello di nascita
  //  Il mese attuale sia maggiore o uguale a quello di nascita
  //  L' anno attuale - l' anno di nascita sia maggiore o uguale 18
  if (local->tm_mday > date[0] && 
     (local->tm_mon + 1 > date[1] || local->tm_mon + 1 == date[1]) && 
     (local->tm_year + 1900 - date[2] > 18 || local->tm_year + 1900 - date[2] == 18))
  {
    return true;
  } else {
    return false;
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T18:36:51.677

问题是您的长度与字符串**25/06/1994**`char birth[10]` （即 10 个字节）完全一样长，没有为 NULL 终止符留出空间，因此当打印出字符串时， cout 开始读取，继续从结尾到.**`birth``birth``classroom`**

 **另请注意，您始终使用比实际缓冲区*大一号*`cin.getline`的缓冲区大小进行调用。您实质上是在告诉：“这是一个 10 字节的缓冲区……向其中读取 11 个字节！” *这真的*是你的意思吗？*`getline`*

 **当然，如果您使用`std::string`而不是`char[]`. 你为什么不呢？

现在，就目前`isOverEighteen`而言：该功能已*完全*损坏，实际上，您在此处显示的版本甚至都无法编译。让我们看看我们是否可以修复它。

当然，我的第一个问题是，为什么不直接将生日输入作为 3 个整数*而*不是将其作为字符串接受呢？但是让我们假设你不能完成你的任务。尝试改用这个：

```
bool isOverEighteen(const string &s) 
{ // s is in the form DD/MM/YYYY - if it's not, things blow up.  
  int birthday[3], bidx = 0; 

  birthday[0] = 0;
  birthday[1] = 0;
  birthday[2] = 0;

  for(int i = 0; i != s.length(); i++)
  {
    if(s[i] == '/')
    {
      bidx++;
      continue;
    }

    birthday[bidx] = (birthday[bidx] * 10) + (s[i] - '0');
  }

  // now birthday[0] is the day of birth as an integer, 
  // birthday[1] is the month of birth as an integer and
  // birthday[2] is the year of birth as an integer. You 
  // can use them.

  ...
} 
```

有更优雅的方法可以做到这一点，它不是很“C++”，但它可以工作，这是一种改进。****

# android - 覆盖项是否有任何触摸事件？

> ID：13611768
> 
> 赞同：0
> 
> 时间：2012-11-28T18:16:36.527
> 
> 标签：android, overlay

我使用 onTap 事件，但是当我从屏幕上获得手指时会发生 onTap。我想为overlayitem 进行一些触摸事件。有人明白我想要什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:29:23.087

查看[Mapview Overlay Manager 项目](http://code.google.com/p/mapview-overlay-manager/)，它使用 a`GestureListener`提供以下触摸事件：

*   onSingleTap（MotionEvent、ManagedOverlay、GeoPoint、OverlayItem）
*   onDoubleTap(MotionEvent, ManagedOverlay, GeoPoint, OverlayItem)
*   onLongPress（MotionEvent、ManagedOverlay、GeoPoint、OverlayItem）
*   onZoom(ZoomEvent, ManagedOverlay)
*   onScrolled(...)

由您决定是采用整个库还是仅将其用作您自己实现的指南。`onTouchevent`我想如果以上五种方法都不适合您的需求，那么想出一个通用方法应该不会太难。

# xml - 检查存储在 CLOB 中的 XML 标记

> ID：13611772
> 
> 赞同：0
> 
> 时间：2012-11-28T18:16:49.727
> 
> 标签：xml, oracle, oracle11g

我需要检查 XML 存储为 CLOB 的 XML 标记是否存在。

我试过`existsNode`了，但似乎遇到了麻烦。

只需提供我感兴趣的 XML 的 jist（这是一个很大的）：

```
<main requestType="create">
  <CATEGORY_ID>5</CATEGORY_ID>
  <NAME>Position Adhoc</NAME>
   <VIEW_CONFIG>
    <ViewConfig>
      <localization value="true"></localization>
      <DataSource dataFormat="XML" hasTotalRow="false" nodeDataFieldWidth="200" treeNodeDataField="0"></DataSource>
      <Ribbon>
        <Funds container="com.ssc.cfi.ribbon.fundbrowser.FundBrowser" enabled="true" entity="Portfolio" exclusiveGroup="" label="Portfolios" visible="true">
          **<List** enabled="true" fundFilterState="ACCT" label="Portfolio" maxSelectionAllowed="1000" showActiveCloseFunds="false" showManager="false"></List>
          <AllFunds enabled="true" entityName="AllFunds" showActiveCloseFunds="false"></AllFunds> 
```

我需要查找 XML 标记“列表”是否存在于 XML 中的任何位置。XML 数据作为 Clob 存储在 COL_A 列中的 TAB_A 中。

试过这个，但没有用，即使我们可以看到标签存在，它也给了我 0 的计数：

```
select count(1) 
from tab_a
where existsNode(extract(xmltype(col_a),'//main'),'//List') = 1 
```

使用 existsNode 或 xmlexists 有什么想法吗？

# html - 我怎样才能使这个标题完全对齐？

> ID：13611774
> 
> 赞同：0
> 
> 时间：2012-11-28T18:16:53.527
> 
> 标签：html, css, header

我正在使用以下标题设计，它应该水平 100% 占据页面的顶部，但在右侧的某些浏览器中它不会覆盖它。

我怎样才能解决这个问题？

HTML：

```
 <header id="loop">
 <img src="/images/logo.png" height="50px" />
 </header> 
```

CSS：

```
 background-color: #990000;
 height: 85px;
 margin-left: -8px;
 margin-top: -8px;
 position: relative;
 width: 101.3%; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:20:29.700

没有可靠的例子很难说。

确保正文/标题边距值：

```
body { margin: 0; } 
```

此外，删除您在 css 中输入的宽度值并重置您的边距。你的 CSS 应该是：

```
background-color: #990000;
height: 85px;
position: relative;
width: 100%; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:22:33.247

问题是您的负边距为 8px，宽度为 101.3%。只有当屏幕宽度超过 615 像素时才会填充整个宽度。

最好的选择是去掉边距并使用 100% 的宽度。

# magento - 按 ID 加载客户地址，Magento

> ID：13611775
> 
> 赞同：4
> 
> 时间：2012-11-28T18:16:55.963
> 
> 标签：magento

有没有办法通过 ID 加载客户的地址？

就像客户通过用户名加载的方式一样：

```
 $customer->loadByEmail($customerEmail); 
```

我需要它，因为我想知道地址是否已经存在，所以我可以决定创建一个新地址或更新现有地址

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-28T18:22:27.753

我使用这个，因为他们可以在 Mage 中设置多个地址......

```
$customer = Mage::getModel('customer/customer')
    ->load($customer_id); // insert customer ID

foreach ($customer->getAddresses() as $address)
{
    $data = $address->toArray();
    var_dump($data);
} 
```

当然，这`var_dump`将显示所有数组数据.. 此时由您来操作和提取您要查找的地址。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-28T18:24:42.743

假设“ID”指的是地址 ID（而不是客户 ID），那么

```
$id = 5;
Mage::getModel('customer/address')->load($id); 
```

（通过 id 加载时进行安全检查总是明智的）

请参阅 app/code/core/Mage/Customer/controllers/AddressController.php 中的 deleteAction()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-18T18:34:07.340

尝试以下操作：

```
#customer id here
$customerId = 1;
#load customer object
$customer = Mage::getModel('customer/customer')->load($customerId);     //insert     cust ID
  #create customer address array
  $customerAddress = array();
#loop to create the array
foreach ($customer->getAddresses() as $address)
{
   $customerAddress[] = $address->toArray();
}
#displaying the array
echo '<pre/>';print_r($customerAddress );exit; 
```

# sql-server - SSRS数据源查看函数中的参数

> ID：13611784
> 
> 赞同：0
> 
> 时间：2012-11-28T18:17:29.803
> 
> 标签：sql-server, function, reporting-services, ssrs-2008, datasourceview

在 SSRS（SQL Server 2008 标准）中，我有一个带有一个输入参数的表值函数。在尝试在数据源视图中创建一个新的命名查询时，我输入了：

```
 SELECT        Family, Steet, userName
    FROM            dbo.F_Family(@userName) AS F_Family 
```

我可以运行 SQL 并提示输入变量。但是，当尝试保存命名查询时，出现错误：必须声明标量变量@userName

我正在尝试的甚至可能吗？如果是这样，我在哪里声明变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:22:31.460

从...开始：

```
DECLARE @username varchar(200)
SET @username = 'username'

SELECT Family, Steet, userName
    FROM            dbo.F_Family(@userName) AS F_Family 
```

这应该够了吧

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:22:52.537

尝试将代码包装在存储过程中，然后从 SSRS 调用它。

# php - 我创建了一个数组，当我单击一个按钮并显示其中一个数组时，它需要随机化。我为此使用了 PHP 和 HTML

> ID：13611786
> 
> 赞同：0
> 
> 时间：2012-11-28T18:17:44.510
> 
> 标签：php, html, arrays, submit

我是 PHP/HTML 新手，我希望在单击按钮时显示一组卡片中的随机卡片。

到目前为止我有这段代码，但是我真的不知道我做错了什么。我能得到一些帮助吗？谢谢。

```
<form action="cards.php" method="get">
<input type=submit value="submit" name=draw>
</form>
<?php
$s=$_GET["draw"];
if ($s=="true")
{

    $cards[0]="1C";
    $cards[1]="2C";
    $cards[2]="3C";
    $cards[3]="4C";
    $cards[4]="5C";
    $cards[5]="6C";
    $cards[6]="7C";
    $cards[7]="8C";
    $cards[8]="9C";
    $cards[9]="10C";
    $cards[10]="AC";
    $cards[11]="KC";
    $cards[12]="QC";
    $cards[13]="JC";
    $cards[14]="1D";
    $cards[15]="2D";
    $cards[16]="3D";
    $cards[17]="4D";
    $cards[18]="5D";
    $cards[19]="6D";
    $cards[20]="7D";
    $cards[21]="8D";
    $cards[22]="9D";
    $cards[23]="10D";
    $cards[24]="AD";
    $cards[25]="KD";
    $cards[26]="QD";
    $cards[27]="JD";
    $cards[28]="1H";
    $cards[28]="2H";
    $cards[29]="3H";
    $cards[30]="4H";
    $cards[31]="5H";
    $cards[32]="6H";
    $cards[33]="7H";
    $cards[34]="8H";
    $cards[35]="9H";
    $cards[36]="10H";
    $cards[37]="AH";
    $cards[38]="KH";
    $cards[39]="QH";
    $cards[40]="JH";
    $cards[41]="1S";
    $cards[42]="2S";
    $cards[43]="3S";
    $cards[44]="4S";
    $cards[45]="5S";
    $cards[46]="6S";
    $cards[47]="7S";
    $cards[48]="8S";
    $cards[49]="9S";
    $cards[50]="10S";
    $cards[51]="AS";
    $cards[52]="KS";
    $cards[53]="QS";
    $cards[54]="JS";

    srand($cards);

    echo (rand (0-54));

}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:21:23.773

在您的 php 中，只需执行

```
shuffle($cards);
echo $cards[0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:21:42.543

您应该使用以下`array_rand`功能：

```
$values = array_rand($input, 1); 
```

笔记：

您可以像这样更快、更干净地创建一个数组：

```
$array = array(
     "a",
     "b",
     "c",
     "d",
); 
```

# javascript - 如何匹配数组的任何元素？

> ID：13611799
> 
> 赞同：0
> 
> 时间：2012-11-28T18:18:07.397
> 
> 标签：javascript, arrays

如何检查变量是否等于数组的任何元素？

```
var myButton = document.getElementById("myButton");
var myVar; //myVar value is set to "One", "Two" or "Three" sometime later

myArray = ["One","Two","Three"];

myButton.onclick = function () {
    if (myVar === myArray) {
        alert ("it's a match!");
    } else {
                alert ("it's not a match!");
        }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:19:42.293

您必须遍历`myArray`并检查每个元素。

但是，[`indexOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)如果您不关心 IE 8 或更早版本，则可以使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:25:32.027

这应该这样做

```
myButton.onclick = function () {
    var i = myArray.length;
    while( i-- ) {
        if( myVar === myArray[i] ) {
            alert("it's a match");
            return;
        }
    }
    alert("it's not a match");
} 
```

# c++ - unordered_set c++

> ID：13611800
> 
> 赞同：0
> 
> 时间：2012-11-28T18:18:08.837
> 
> 标签：c++, memory, unordered-set

我注意到，当我使用无序集`unordered_set<int> theSet;`来保存大量整数时，即使调用 clear() 或 rehash(0)，它也不会释放内存。即使我在函数中本地定义了集合，并且函数执行完毕，集合保留的大部分内存仍然保留。有任何想法吗？

下面是一个示例代码，当 tester 函数返回并且我们在 main 中时，tester 使用的内存没有被释放

谢谢

```
using namespace std;
using std::tr1::unordered_set;

void tester() {
    mySet.rehash(x);
    for (int i = 0; i < 10000000; i++)
        mySet.insert(i);

    mySet.clear();
}

int main() {
    tester();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:23:21.330

你可以[`swap`](http://en.cppreference.com/w/cpp/container/unordered_set/swap)用一个临时设置。

```
std::unordered_set<MyType> mySet;

// do stuff with mySet

std::unordered_set<MyType>().swap( mySet ); 
```

但是你的第二个说法没有任何意义。如果你声明了一个函数的局部集合，那么当函数退出时，该集合使用的所有内存都将被释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:35:22.177

> 我在 unix 上使用 top

可能发生的情况是内存确实被释放到堆中。但是，堆没有缩小，内存也没有释放回操作系统。因此`top`没有显示内存消耗的任何减少。

如果您在销毁第一个后重新创建`unordered_set`，您可能不会看到内存消耗的增加，如`top`.

当进程终止时，它的所有资源都将被回收。

# javascript - 锚滚动jQuery

> ID：13611809
> 
> 赞同：0
> 
> 时间：2012-11-28T18:18:53.017
> 
> 标签：javascript, jquery, scroll

我找到[了这个例子](http://www.sycha.com/jquery-smooth-scrolling-internal-anchor-links)。虽然代码很旧，但它似乎可以满足我的要求：

```
jQuery(document).ready(function($) {
  $(".scroll").click(function(event){
    event.preventDefault();
    $('html,body').animate({scrollTop:$(this.hash).offset().top}, 500);
  });
}); 
```

其次，是否可以让名为“导航”的 div 之间的所有锚点都具有此功能，而不是为每个锚点添加“滚动”类？

例子：

```
<div id="section1">Scroll to me :P</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:41:45.177

对于您的第二个问题，听起来您想将点击处理程序附加到所选元素的所有子元素。使用[`.on`](http://api.jquery.com/on/)：

```
$("#navigation").on("click", "a", function(event) {
    event.preventDefault();
    $('html,body').animate({scrollTop:$(this.hash).offset().top}, 500);
}); 
```

`"#navigation"`你想要的父元素的选择器在哪里，是子元素`"a"`的选择器。

# javascript - 从 addEventListener() 调用函数

> ID：13611812
> 
> 赞同：0
> 
> 时间：2012-11-28T18:18:56.507
> 
> 标签：javascript, function, audio, addeventlistener

我有下一个代码，但我无法调用 ShowMedalMessage() 函数

```
var totalsounds = 3;
var currentsound = 1;
var audioElement = document.createElement('audio');
audioElement.setAttribute('src', 'notify.wav');
audioElement.setAttribute('autoplay', 'autoplay');
audioElement.addEventListener('ended', function() {
    if (currentsound < totalsounds) {
        this.currentTime = 0;
        this.play();
        currentsound = currentsound + 1;
    }
    ShowMedalMessage(1);
}, false);​ 
```

如果对函数的调用在 audioElement.addEventListener 之前，它会正确调用，但如果 ShowMedalMessage(1); 行 在里面，它不起作用:(

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:53:58.173

这在 chrome 和 Firefox 中对我有用。

Hese是活生生的[例子](http://plnkr.co/edit/q06iei?p=preview)

```
function showMessage() {
  document.write("Sound played");
}

var totalsounds = 3;
var currentsound = 1;
var audioElement = document.createElement('audio');
audioElement.setAttribute('src', 'http://www.wav-sounds.com/cartoon/bugsbunny1.wav');
audioElement.setAttribute('autoplay', 'autoplay');
audioElement.addEventListener('ended', function() {
    if (currentsound < totalsounds) {
        this.currentTime = 0;
        this.play();
        currentsound = currentsound + 1;
    }
    showMessage();
}, false);

document.body.appendChild(audioElement); 
```

# c# - 子文件夹应用程序会使用主站点超时设置吗？

> ID：13611819
> 
> 赞同：0
> 
> 时间：2012-11-28T18:19:19.357
> 
> 标签：c#, asp.net, .net, c#-4.0

我计划在子文件夹中添加另一个 Web 应用程序。它将作为 www.site.com/subapp 访问。用户将始终从主 Web 应用程序 (www.site.com) 访问它。一旦用户登陆子网络应用程序，超时如何工作？我不希望他们回到主应用程序却发现它已经超时。当用户在子应用上时，主应用不应超时。

# html - 通过更改屏幕分辨率来更改布局奇怪的 CSS 问题

> ID：13611820
> 
> 赞同：0
> 
> 时间：2012-11-28T18:19:21.877
> 
> 标签：html, css, css-float

讨论中的网站：http: [//staging.vansanws.in/albrown/](http://staging.vansanws.in/alibrown/)

当我更改此页面 (http://staging.vansanws.in/albrown/)的分辨率（**使用 'ctrl' + '+' 缩放页面）时****，菜单布局会发生变化**。它的大小以某种方式增加，并且在某些分辨率下出现在下一行。

在其他网站上工作之前，我也遇到了这个问题。但是每次我只是减小元素的大小以避免重大的布局更改。**但这次我想为这种奇怪的行为**找出真正的原因

 ****这发生在所有浏览器（IE、Chrome、Firefox）中**

**通过更改分辨率，我的意思是使用“Ctrl”+“+”放大窗口****

# android - admob/adsense 以外的广告网络具有良好的填充率？

> ID：13611823
> 
> 赞同：2
> 
> 时间：2012-11-28T18:19:32.160
> 
> 标签：android, admob

我正在为安卓开发。

除了按时付款的 admob/adsemse 之外，我需要您对广告网络的意见。

你的经验有什么建议吗？

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:32:13.783

我个人只使用过 ad mob，但是当我选择一个广告网络时，我发现了下面的网站，它提供了大多数大型广告公司的昵称摘要。它列出的唯一一个我会小心的是 FoxMob，它似乎在其他地方得到了不好的评价

*   [http://www.mobyaffiliates.com/blog/the-best-mobile-advertising-networks-2012/](http://www.mobyaffiliates.com/blog/the-best-mobile-advertising-networks-2012/)

# java - 为什么 javac 连简单的代码都不优化？

> ID：13611829
> 
> 赞同：8
> 
> 时间：2012-11-28T18:19:43.407
> 
> 标签：java, optimization, javac

给定以下代码：

```
public class MainClass {
    public static int f(){
        int i=0;
        i++;
        return i;
    }
} 
```

编译器 javac 生成以下代码：

```
Compiled from "MainClass.java"
public class latte_jvm.MainClass {

  public static int f();
    Code:
       0: iconst_0
       1: istore_0
       2: iinc          0, 1
       5: iload_0
       6: ireturn
} 
```

函数 f 做了非常简单的事情——它只返回 1。它的翻译如此直接，以至于我很难相信 java 编译器会进行任何优化。为什么 java 编译器的创建者决定在编译阶段不做这样的优化？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-28T18:21:23.870

> 翻译得如此直接，以至于我很难相信 java 编译器会进行任何优化。

确实。大多数 Java 优化都是在 JIT 时间执行的。Java 维护人员很久以前就发现，在许多情况下，在*编译时*执行的优化实际上阻碍了在 JIT 时进行的更重要的优化。

几年来，`-O`命令行参数什么也没做——而且是故意的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-28T20:17:29.030

此外，通过将优化转移到 JVM，所有基于 JVM 的语言都可以受益。编译器（不仅仅是 javac）的工作相对容易一些；语言发明者不必是优化专家。

# cordova - PhoneGap 2.2.0 navigation.globalization.getLocaleName 和 jQuery i18n 插件导致应用程序在 iOS 上的微调器处停止

> ID：13611831
> 
> 赞同：1
> 
> 时间：2012-11-28T18:19:47.483
> 
> 标签：cordova, jquery-plugins, localization

我正在使用 PhoneGap 2.2.0 中新的内置全球化支持，使用 navigator.globalization.getLocaleName 来确定设备区域设置是什么。然而，该应用程序只是停止并且微调器（由 jQuery Mobile 增强）只是无限期地旋转。我在 iOS 和 Android 上都进行了测试，结果相同。这是我的代码：

```
$('#home').live('pageinit', function()
{
var app_language = localValue('app_language');

//console.log('app_language variable holds: '+app_language);
if ( app_language === '' )
{
    var successCB = function(locale)
    {
        alert('success');
        //console.log('locale is: '+locale.value);
        window.localStorage.setItem('app_language', locale.value);
    };

    var failureCB = function(error)
    {
        if (error = Globalization.UNKNOWN_ERROR)
        {
            console.log('error getting locale');
        }
    };

    navigator.globalization.getLocaleName(successCB, failureCB);

}
else
{
    console.log('got this far');
    switch (app_language)
    {
    case 'en_CA':
        //console.log('using English dictionary');
        $.i18n.setDictionary(lang_english);
        break;
    case 'en_US':
        //console.log('using English dictionary');
        $.i18n.setDictionary(lang_english);
        break;
    case 'fr_CA':
        //console.log('using Canadian French dictionary');
        $.i18n.setDictionary(lang_french);
        break;
    default:
        //console.log('default to English dictionary');
        $.i18n.setDictionary(lang_english);
    }
}

$('#hit_to_begin').text($.i18n._('helper_text'));

}); 
```

如果我注释掉对 navigator.globalization.getLocaleName 的调用，它可以正常工作。iOS 和 Android 4.0+ 上的行为相同。我真的走到了尽头。

# java - Snake AI 怪异动作（错误动作）

> ID：13611833
> 
> 赞同：-1
> 
> 时间：2012-11-28T18:20:24.043
> 
> 标签：java, game-ai

所以，我用人工智能创建了我自己的蛇游戏，但现在我有非常非常奇怪的蛇动作。

[视频](http://www.youtube.com/watch?v=paJs5LAkUcM)

所以，我的算法是：

1.  获取地图：1 - 路径清晰，0 - 没有路径（墙壁，蛇）
2.  获取水果位置
3.  获取 SnakeAI 头部位置
4.  将其发送到 A* 算法（正常工作）
5.  获取路径（点阵；end为水果位置，start为snakeAi头部）
6.  设置snakeAI的方向

[Pastebin 上的代码](http://pastebin.com/ZBM1jsFu)

```
private void AI() {

        Point s = new Point();
        //SnakeAI head
        Point n = new Point();
        //Food
        n.x = food.x / 13;
        n.y = food.y / 13;
        s.x = snakeAI.getBody().get(0).x / 13;
        s.y = snakeAI.getBody().get(0).y / 13;

        int px;
        int py;

        //Path
        g = f.findPath(map, n, s);

        if (g.size() > 0) {
        //Next snake positin
            px = g.get(g.size() - 1).x;
            py = g.get(g.size() - 1).y;
        } else {
           return;
            }

            if (s.x == px) {  
                //Move UP
                if (s.y > py) {
                    snakeAI.setDirection(Snake.DIR_UP);
                }
                //Move DOWN
                if (s.y < py) {
                    snakeAI.setDirection(Snake.DIR_DOWN);
                }
            }
            if (s.y == py) {
                //Move LEFT    
                if (s.x > px) {
                    snakeAI.setDirection(Snake.DIR_LEFT);
                }
                //Move RIGHT
                if (s.x < px) {
                    snakeAI.setDirection(Snake.DIR_RIGHT);
                }
            }
        } 
```

所以，我在一周左右与那个错误的动作作斗争，我真的不知道错误在哪里。尤达大师，帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:58:28.860

我知道问题是什么！

在 Snake 中，你不能翻身。换句话说，如果你向左移动，你不能向右移动，你必须先向上移动。但是，您的代码命令蛇不正确地移动，而不考虑它以前的方向。它不应该能够上升然后下降等。

解决这个问题，你可能会解决整个问题。确保 A* 算法中的转身是非法方向。

这是正确的伪代码：

1.  看看我们是否朝着正确的方向前进
    *   如果是，继续
    *   如果不是，判断 A* 是想让我们左转还是右转
2.  移动一格
3.  重复步骤 1

逻辑应该是这样的：

```
switch (snakeAI.getDirection()) {
  case Snake.DIR_LEFT:
    if (s.x >= px) { // don't go left anymore
      if (s.y > py) {
        snakeAI.setDirection(Snake.DIR_UP);
      } else if (s.y < py) {
        snakeAI.setDirection(Snake.DIR_DOWN);
      } else {
        // You should probably change this
        snakeAI.setDircetion(Snake.DIR_DOWN);
      }
    }
    break;
  case Snake.DIR_RIGHT: 
```

# image-processing - 如何在 org-mode 中为不同的导出使用不同的图像格式？

> ID：13611837
> 
> 赞同：4
> 
> 时间：2012-11-28T18:20:26.627
> 
> 标签：image-processing, org-mode

我想在我的 org-mode 文档中包含内联图像，但我确实需要一个用于 HTML 导出的 png 和一个用于 LaTeX 导出的 pdf 以使其看起来不错。有没有办法表达这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T01:47:34.517

我在 irc 中得到了一个对我很有效的答案。

```
#+ATTR_LaTeX: width=0.38\textwidth wrap placement={r}{0.4\textwidth}
#+ATTR_HTML: alt="old index mech" title="Old index mech" align="right"
#+begin_src emacs-lisp :exports results :results value raw
(case (and (boundp 'backend) backend)
  (nil "")
  (latex "[[file:img/indexing-old.pdf]]")
  (html "[[file:img/indexing-old.png]]"))
#+end_src 
```

这会在导出时根据后端选择链接，同时仍然给我 HTML 和 LaTeX 属性。看起来很简单。

# redirect - 在已经工作的 web.config 中将非 www 与 www 集成为 404

> ID：13611839
> 
> 赞同：1
> 
> 时间：2012-11-28T18:20:31.890
> 
> 标签：redirect, web, web-config, http-status-code-404, no-www

在寻找了几个小时的答案后，我需要问。假设我有这个`web.config`文件可以在我的 Windows 2008 服务器上成功重定向我的 404 错误页面：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <defaultDocument enabled="true">
            <files>
                <clear />
                <add value="index.aspx" />
                <add value="index.asp" />
                <add value="index.htm" />
                <add value="index.html" />
                <add value="home.aspx" />
                <add value="home.asp" />
                <add value="home.htm" />
                <add value="home.html" />
                <add value="default.aspx" />
                <add value="default.asp" />
                <add value="default.htm" />
                <add value="default.html" />
            </files>
        </defaultDocument>
        <security>
            <authentication>
                <basicAuthentication enabled="true" />
            </authentication>
        </security>
        <httpErrors errorMode="Custom">
            <remove statusCode="404" subStatusCode="-1" />
            <error statusCode="404" prefixLanguageFilePath="" path="/404.html" responseMode="ExecuteURL" />
        </httpErrors>
    </system.webServer>
</configuration> 
```

我想将不以以下xml`www`开头的路径更改为开头。`www`我在集成它时遇到问题，因为它给了我一个 500 错误（请注意，我不是一个非常强大的开发人员）。

```
<rewrite>
    <rules>
        <rule name="Redirect domain.com to www" patternSyntax="ECMAScript" stopProcessing="true">
            <match url=".*" />
            <conditions>
                <add input="{HTTP_HOST}" pattern="^domain.com$" />
            </conditions>
            <action type="Redirect" url="http://www.domain.com/{R:0}" />
        </rule>
    </rules>
</rewrite> 
```

任何帮助将不胜感激！我花了几个小时寻找答案，但没有成功。

# facebook - 无法从 facebook graph API 获取喜欢

> ID：13611842
> 
> 赞同：1
> 
> 时间：2012-11-28T18:20:45.613
> 
> 标签：facebook, facebook-graph-api

我需要你的帮助，因为我认为我已经达到了我的技能极限。我正在开发一个代码来使用图形 API 从 Facebook 获取用户数据并将其存储到 MYSQL 数据库中。到目前为止，我已经能够检索和存储我想要的所有东西，除了喜欢。

这是代码：

```
function getUserData() {
        $fb_cookie = $this->getCookie();
        if($fb_cookie) {
            $url = 'https://graph.facebook.com/me?access_token='.$this->getAccessToken();
            $data = json_decode($this->getDataFromUrl($url));
            $fb['id'] = $data->id;
            $fb['first_name'] = $data->first_name;
            $fb['last_name'] = $data->last_name;
            $fb['email'] = $data->email;
            $fb['likes'] = $data->likes;
            $fb['hometown'] = $data->hometown->name;
            //tokens
            $fb['token'] = $fb_cookie['access_token'];
            $fb['token_expires'] = $fb_cookie['expires'];
            return $fb;
        }
    } 
```

尽管我在令牌中拥有“user_likes”权限。仍然无法存储或检索数据以将其保存到 MYSQL 中。

```
function update_members($criteria=array()) {
    $fb_user_id = $criteria['fb_user_id'];
        $fb_first_name = $criteria['fb_first_name'];
    $fb_last_name = $criteria['fb_last_name'];
    $fb_email = $criteria['fb_email'];
    $fb_likes = $criteria['fb_likes'];
    $fb_hometown = $criteria['fb_hometown'];

        }

            $sql = "INSERT INTO ".$GLOBALS['db_table']['members']." 
            (fb_user_id, first_name, last_name, fb_email, fb_likes, hometown) 
            VALUES ('$fb_user_id', '$fb_first_name', '$fb_last_name', '$fb_email', '$fb_likes', '$fb_hometown')";
            $u1 = new MySqlTable();
            $u1->executeQuery($sql); 
```

到目前为止，我已经能够存储除喜欢之外的所有数据。在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:05:44.110

该`/me`电话不包含喜欢。

您将调用`/me/likes`它返回如下内容：

```
 { "data": [
      {
         "name": "Hunger Games",
         "category": "Book",
         "id": "114531238562971",
         "created_time": "2012-11-28T03:55:27+0000"
      },
      {
         "name": "CivicRush",
         "category": "Software",
         "id": "160319707426901",
         "created_time": "2012-11-27T01:53:40+0000"
      },
      ...
      ]
  } 
```

请记住，表中的单个列不会包含所有喜欢，除非您想用逗号分隔它们或将它们存储在 json 中。您将需要另一个名为 , , 等的表格`member_likes`，`user_id`他们喜欢的每一页都是该表格中的`page_id`一行`name`

# ruby - 无法在 Mountain Lion 10.8.2 上安装 Ruby

> ID：13611844
> 
> 赞同：1
> 
> 时间：2012-11-28T18:20:52.197
> 
> 标签：ruby, xcode, macos

我在我的 Mac 和 Xcode 4.5.2 上运行 Mountain Lion v. 10.8.2

我运行的 ruby​​ 版本是默认版本 1.8.7。我想升级到 1.9.3 但它不起作用。

我安装了 gcc 编译器：

```
$ gcc --version 

i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)
Copyright (C) 2007 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

$ git --version
git version 1.7.8

$ rvm --version
rvm 1.17.0 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/] 
```

然后我尝试使用以下命令行安装 Ruby 1.9.3：

```
$ rvm install 1.9.3 
```

输出是这样的：

```
No binary rubies available for: downloads/ruby-1.9.3-p327.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
Installing Ruby from source to: /Users/eduardo/.rvm/rubies/ruby-1.9.3-p327, this may take a while depending on your cpu(s)...

ruby-1.9.3-p327 - #downloading ruby-1.9.3-p327, this may take a while depending on your connection...

ruby-1.9.3-p327 - #extracted to /Users/eduardo/.rvm/src/ruby-1.9.3-p327 (already extracted)

ruby-1.9.3-p327 - #configuring

ruby-1.9.3-p327 - #compiling

Error running 'make', please read /Users/eduardo/.rvm/log/ruby-1.9.3-p327/make.log
There has been an error while running make. Halting the installation. 
```

我的 make.log 在最后几行看起来像这样：

```
collect2: ld returned 1 exit status
make[2]: *** [../../.ext/x86_64-darwin12.2.0/tcltklib.bundle] Error 1
make[1]: *** [ext/tk/all] Error 2
make: *** [build-ext] Error 2 
```

请问有什么帮助吗？我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:52:46.757

我今天拿到了我的 macbook pro，并使用本教程像魅力一样安装了 ruby​​：[https ://gist.github.com/3237860](https://gist.github.com/3237860)

# header - 如何在 CMake 中检查需要两个头文件的符号？

> ID：13611847
> 
> 赞同：3
> 
> 时间：2012-11-28T18:21:01.770
> 
> 标签：header, cmake, symbols

要定义符号 getifaddrs，您必须同时包含 sys/types.h 和 ifaddrs.h。在检查符号是否存在时，我尝试了以下方法：

```
set (CMAKE_EXTRA_INCLUDE_FILES sys/types.h)
check_symbol_exists (getifaddrs ifaddrs.h SP_HAVE_IFADDRS)
set (CMAKE_EXTRA_INCLUDE_FILES) 
```

但是，测试程序仍然只包含 ifaddrs.h，因此无法检测到该符号。

如何强制它也包含 sys/types.h ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T08:08:04.763

这有效：

check_symbol_exists (getifaddrs "sys/types.h;ifaddrs.h" SP_HAVE_IFADDRS)

# javascript - 循环遍历对象

> ID：13611850
> 
> 赞同：0
> 
> 时间：2012-11-28T18:21:12.447
> 
> 标签：javascript, highcharts

我需要一些帮助来遍历我从 API 作为 JSON 接收的对象，并为图表库组装另一个对象。

这是对象的示例：

```
var channel_data = [
  {
    "27th Oct 12": {
      "xaxis": "27th Oct 12",
      "channels": {
        "Create and Craft": {
          "views": 13064,
          "bandwidth": 623136899214,
          "name": "Create and Craft"
        },
        "5 USA": {
          "views": 394,
          "bandwidth": 17889861768,
          "name": "5 USA"
        }
      },
      "totalViews": 25470,
      "totalBandwidth": 923866774348
    },
    "28th Oct 12": {
      "xaxis": "28th Oct 12",
      "channels": {
        "Create and Craft": {
          "views": 15298,
          "bandwidth": 860108829822,
          "name": "Create and Craft"
        },
        "5 USA": {
          "views": 500,
          "bandwidth": 28770314737,
          "name": "5 USA"
        }
      },
      "totalViews": 29377,
      "totalBandwidth": 1248778079465
    }
  }
] 
```

我需要遍历这些数据并构建以下对象数组以用于 Highcharts 渲染。类别将是日期，数据是每个频道的每个日期的视图。

```
categories: ['27th Oct 12", "28th Oct 12"]

series: [{
  name: 'Create and Craft',
  data: [13064, 15298]
}, {
  name: '5 USA',
  data: [394, 500]
}, {
}] 
```

我尝试了以下但最终得到了错误的结构；

```
 var dates = [], channels=[], views = [];

 for (var gdata in channel_data) {
     dates.push(channel_data[gdata].xaxis);
     for (var channel in channel_data[gdata].channels){
         channel_name = channel_data[gdata].channels[channel].name;
         channel_views = channel_data[gdata].channels[channel].views;
         channel_data = {"name" :channel_name,"views" : channel_views}
         channels.push(channel_data);
     }
     views.push(model.attributes[gdata].channels.name.views);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:26:42.803

你可以用这个

```
var categories = [];
var series = [];
for(var i in channel_data) {
    categories.push(channel_data[i].xaxis); //your categories

    //same logic to loop through channels to populate series array
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:22:17.690

在 AlanH 使用下划线的想法的帮助下，最终使用的解决方案。

```
 var channels = {};
            _.each(channel_data, function( date, i ) {
                _.each(date.channels, function( channel, i ) {
                    if ( channels[channel.name] === undefined ) {
                        channels[channel.name] = {
                            name : channel.name,
                            views : [],
                            bandwidth : []
                        };
                    }
                        channels[channel.name].views.push(channel.views);
                    channels[channel.name].bandwidth.push(channel.bandwidth);
                });
            }); 
```

我希望这可以帮助任何需要类似解决方案的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T18:35:32.973

您正在尝试将数据结构简化为另一种形式。

这可以通过 _js（下划线 js）之类的辅助工具来实现

[http://underscorejs.org/#reduce](http://underscorejs.org/#reduce)

示例取自他们的网站

```
var list = [[0, 1], [2, 3], [4, 5]];
var flat = _.reduceRight(list, function(a, b) { return a.concat(b); }, []);
=> [4, 5, 2, 3, 0, 1] 
```

# python - 在 Python 中将字符串转换为“单元”对象

> ID：13611851
> 
> 赞同：1
> 
> 时间：2012-11-28T18:21:17.387
> 
> 标签：python, string, casting, units-of-measurement

*在这个问题中，“单位”是指物理量中使用的“计量单位”。*

我想安全地解析包含物理量（例如'23 kg'）的不受信任的用户输入字符串。我想使用 Python 可用的包之一（如*Unum*或*Quantities*），因为它们负责单位之间的转换、数学表达式中包含的单位的简化、基本单位的缩减，但我找不到一种方法将字符串转换为（上述包的）对象，而不是 using `eval()`，这似乎不安全。

例如，假设`kg`and`cm`绑定到*Unum*包对象并引用千克和厘米单位，我需要一个能够从字符串返回*Unum包对象的函数，例如：*

`cast_to_unit("100 kg/cm")`

或者

`"100 kg/cm".asUnit()`

1.  有没有办法从提到的包中获得这样的功能？如果不，
2.  有没有安全使用的方法 `eval()`？如果不，
3.  是否有任何其他包（甚至不是在 Python 中）具有这样的功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T18:40:07.793

快速浏览一下`Unum`'s[文档](http://home.scarlet.be/be052320/docs.html)，您似乎应该能够通过以下方式执行以下操作[`eval`](http://docs.python.org/2/library/functions.html#eval)：

```
from unum.units import * # Load a number of common units.
distance = 100*m
time = eval('9.683*s')
speed = distance / time
print(speed) 
```

但是，如果您这样做，请确保您阅读文档`eval`以及如何传递本地和全局映射以限制命名空间访问以使其更安全——特别是如果您计划将此代码发布到外部世界。您可能还想检查下划线 ( `_`) 的字符串，并且不允许将它们传递给`eval`.

* * *

正如kindall所指出的，导入`*`通常不是很好的风格。这是一个更安全的替代方案，可以避免从以下位置导入`*`：

```
import unum.units
safe_dict = dict((x,y) for x,y in unum.units.__dict__.items() if '__' not in x)
safe_dict['__builtins__'] = None

def convert(s):
    if '__' in s:
       raise ValueError("Won't do this with underscores...it's unsafe")
    return eval(s,safe_dict) 
```

请注意，我删除了这篇[文章](http://nedbatchelder.com/blog/201206/eval_really_is_dangerous.html)`__`中提倡的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:46:02.777

> **注意**：这不是一个确定的答案。请将其视为如何构建与您所要求的类似的东西的示例。使用`Unum`模块确实是一个更好的主意，除非它不符合您的需要。

您可以自己编写一些东西，像这样重载运算符：

```
>>> class Unit(object):
    def __init__(self, unit_name):
        self.unit_name = unit_name
        self.unit_qty = 1
    def __div__(self, other):
        result = self.__class__(self.unit_name)
        result.unit_qty = self.unit_qty / other
        return result
    def __rdiv__(self, other):
        result = self.__class__(self.unit_name)
        result.unit_qty = other / self.unit_qty
        return result
    def __mul__(self, other):
        result = self.__class__(self.unit_name)
        result.unit_qty = self.unit_qty * other
        return result
    def __rmul__(self, other):
        return self.__mul__(other)
    def __repr__(self):
        return '%s %s' % (self.unit_qty, self.unit_name)

>>> kg = Unit('kg')
>>> 100 * kg
100 kg
>>> 100 * 10 * kg
1000 kg
>>> (10 * 20 * kg) / 2
100 kg 
```

然后你可以用它`eval()`来评估表达式（如“ `100*kg`”），但要小心。可能这应该可以帮助您摆脱一些问题：

```
eval('100*kg', {'__builtins__': {}, 'kg': Unit('kg')}) 
```

# php - 在另一个操作中从 URL 获取 ID

> ID：13611852
> 
> 赞同：0
> 
> 时间：2012-11-28T18:21:18.333
> 
> 标签：php, cakephp

我有三个模型

1.  用户
2.  团体
3.  订阅

在订阅表中，我有三个字段

1.  ID
2.  用户身份
3.  group_id

我想要的是，我想在这里显示每个组的所有订阅者的列表（ /groups/viewcourse/id ）

**组控制器：**

```
public function viewcourse($id=NULL)
{
    $this->set('viewcourse', $this->Group->read(NULL,$id));
    $this->set('course', $this->Group->find('all', array('conditions'=>array('Group.id'=>$id))));

     $this->set('allnotes', $this->Group->Note->find('all', array(
    'conditions'=>array('Note.group_id' => $id),'order' => array('Note.created DESC'))))
} 
```

**用户控制器：**

```
public function subscribers()
{
$subscribers = $this->User->Subscription->find('all',array(
  'conditions'=>array(
  'Subscription.group_id'=>26)
  )
 );
} 
```

现在在 UsersController 中，我想以某种方式从 URL 检索组 ID 以放置它而不是 26，以便我可以显示订阅该特定组或组 26 的用户列表。

我想到的唯一方法是从 URL 中获取 id。

我尝试的是添加 $this->params['pass'][0] 到 UsersController （订阅者操作​​），但它再次没有从 viewcourse 中获取 id，因为它只会从订阅者操作​​中传递 id，它是 Null 并且没有利用。我想要来自 /groups/viewcourse/id 的 id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:34:16.060

Just pass another param along with your link helper to the controller. in the view:

```
<?php echo $this->Html->link('Subscribers', array('controller'=>'users', 'action'=>'subscribers', 'group'=>$viewcourse['Group']['id'])); ?> 
```

and retrieve the params in your subscribers function with

```
 $group_id = $this->params['named']['group']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:02:07.857

您应该将检索数据库信息的函数放在模型中，而不是控制器中——然后您可以从任何控制器访问它们的逻辑和数据。

**示例代码：**

```
//GroupsController
public function viewcourse($id=NULL)
{
    //...
    $this->loadModel('Subscription');
    $subscribers = $this->Subscription->getAllByGroupId($id);
    //...
}

//Subscription model
public function getAllByGroupId($groupId = null) {
    if(empty($groupId)) return false;
    return $this->findAllByGroupId($groupId);
} 
```

# python - Python：将环形扇区或楔形添加到极坐标图中

> ID：13611853
> 
> 赞同：7
> 
> 时间：2012-11-28T18:21:23.307
> 
> 标签：python, matplotlib, polar-coordinates

我有一个带有特定部分的极坐标图，我想完全用红色着色（它是两条红线之间标记的部分。是否有可以为该部分着色的函数？或者是否可以获得实心环形扇区使用补丁集合？

![在此处输入图像描述](../Images/04125bfa0490094d871f92e0ea3cc369.png)

这是我的脚本：

```
from pylab import *
import matplotlib.pyplot as plt
import numpy as np
import pylab
from matplotlib.projections import PolarAxes

###############################################################################
###############################################################################

fig = figure()
ax = fig.add_subplot(111, projection = 'polar')

subplot(111,projection='polar')
theta = arange(1000)*2*pi/1000.

plot(theta,0.25*ones(1000),'m') #A to B Circle
plot(theta, 0.65*ones(1000), 'm') # B to C Circle
plot([0, 0],[0.25,0.65],'m') # A to B 0 degrees line  
plot([pi/4.,pi/4.],[0.25, 0.65], 'm') # A to B 45 degrees line
plot([pi/2, pi/2.],[0.25, 0.65], 'm') # A to B 90 degrees line
plot([3*pi/4.,3*pi/4],[0.25, 0.65], 'm') # A to B 135 degrees line

plot([pi,pi],[0.25,0.65],'m') # A to B 180 degrees line
plot([5*pi/4,5*pi/4],[0.25, 0.65], 'm') # A to B 225 degrees line
plot([3*pi/2,3*pi/2],[0.25, 0.65], 'm') # A to B 270 degrees line
plot([7*pi/4,7*pi/4],[0.25, 0.65], 'm') # A to B 315 degrees line

plot([2*pi,2*pi],[0.25,0.65],'m') # A to B 360 degrees line

plot([0, 0],[0.65,1],'m') # B to C 0 degrees line
plot([pi/6,pi/6],[0.65, 1], 'm') # B to C 30 degrees line
plot([pi/3,pi/3.],[0.65,1], 'm') # B to C 60 degrees line
plot([pi/2,pi/2],[0.65,1], 'm') # B to C 90 degrees line

plot([2*pi/3,2*pi/3],[0.65,1],'m') # B to C 120 degrees line
plot([5*pi/6,5*pi/6],[0.65,1], 'm') # B to C 150 degrees line
plot([pi,pi],[0.65,1], 'm') # B to C 180 degrees line
plot([7*pi/6,7*pi/6],[0.65,1], 'm') # B to C 210 degrees line

plot([4*pi/3,4*pi/3],[0.65,1],'r', linewidth = 5) # B to C 240 degrees line
plot([3*pi/2,3*pi/2],[0.65,1], 'r', linewidth = 5) # B to C 270 degrees line
plot([5*pi/3,5*pi/3],[0.65, 1], 'm') # B to C 300 degrees line
plot([11*pi/6,11*pi/6],[0.65,1], 'm') # B to C 330 degrees line

plot([2*pi,2*pi],[0.65,1],'m') # B to C 360 degrees line

#patches = [Wedge((0,0), 1, 4*pi/3, 3*pi/2)]
#p = PatchCollection(patches)
#ax.add_collection(p)

rgrids((1,1),('',''))

ax.set_theta_zero_location("N")
ax.set_theta_direction('clockwise')         

show() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T09:30:41.550

楔形似乎是要走的路，但默认情况下它也会转换为极坐标。你可以给楔形轴变换，这在视觉上会起作用，但是如果你想根据数据绘制楔形，那就很难了。

它可以这样做：

```
ax.add_artist(Wedge((.5,.5), 0.53, 180, 215, width=0.2, transform=ax.transAxes, color='red')) 
```

![在此处输入图像描述](../Images/3379f0e60d9fd19ae891cf23b0a76101.png)

# java - NoClassDefFoundError：无法初始化 org.hibernate.tool.version

> ID：13611857
> 
> 赞同：1
> 
> 时间：2012-11-28T18:21:39.913
> 
> 标签：java, hibernate, hibernate-tools

我正在尝试使用 Hibernate 工具对我的 Oracle 数据库进行逆向工程。但是，当我尝试这样做时，我收到以下错误：

```
Received a NoClassDefFoundError, propably the console configuration classpath is
incomplete or contains conflicting versions of the same class.
java.lang.NoClassDefFoundError: Could not initialize org.hibernate.tool.version 
```

我读到由于 Hibernate Tools Jar 和常规 Hibernate Jars 之间的冲突，可能会发生这种情况。我删除了我的 Maven-Import 并手动添加了 Hibernate-Jar（只有解决方案中描述的 core-jar）。
我正在使用`Development Milestone 4.0.0 of Hibernate Tools`，我将工具配置中的 Hibernate 版本设置为 4.0，并使用当前的 Hibernate 4.1.7。我也尝试了 Hibernate 4.0.0-Core-Jar，但每次组合我都得到了同样的错误。
哦，我使用的是 STS 3.1.0（但不要认为是那样）。

任何提示/建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:28:58.840

好的，发现错误：我尝试了各种版本，最后 hibernate-annotations-3.5.6 工作。一定是一些奇怪的组合产生了错误。无论如何，感谢您的回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:37:33.347

当针对具有较新版本 WSDL 的 Web 服务使用 cxf 生成的 java 存根时，我看到了相同的错误，但在完全不同的上下文中，当发生这种情况时，SOAP 响应可能包含 CXF（或其他东西）会尝试的 xml 元素序列化为 java 类/对象，当找不到与 SOAP 响应中的新元素对应的 java 类时，可能会抛出此错误。

故事的寓意，请确保您使用的 Java 客户端（包含存根的 jar 集）的版本与服务提供者兼容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T18:36:16.843

这是删除一些显然与 hibernate-tools 插件自己的 jar 冲突的 hibernate 3.6 jar 的问题。

以下是成功对数据库表进行逆向工程而不会出现我遇到的错误所需做的事情：

您必须在项目构建路径中仅包含 hibernate3.jar 和 jdbc 驱动程序（postgresql-9.0-blabla.jar），其他（antlr、dom4j、slf4j、jta 等）应删除；我没有尝试在 JPA 模式下进行逆向工程，但我认为您必须将 hinernate-jpa-2.0-api-blabla.jar 保留在项目的构建路径中。

完成使用 hibernate-tools 插件后，您必须包含其他 jar，否则休眠代码将无法工作（我想，我还没有测试过，但如果 3.6 的文档这么说......）

# java - WebView：防止内容在屏幕上半开/半开？

> ID：13611859
> 
> 赞同：1
> 
> 时间：2012-11-28T18:21:50.593
> 
> 标签：java, javascript, android, web

我有一个几乎全屏的 WebView，由于当前的滚动位置，通常一行文本或图像会在屏幕上显示一半，一半关闭。有没有办法将线条和图像捕捉到屏幕上？我觉得解决方案可能是使用JS并解析文档并在每个屏幕周围插入包装器div，并一次隐藏/显示这些包装器div。

所以我的问题是，如果这听起来像是最好的计划，我如何检测一段文本是否被换成了 x 行，以及换行发生在哪里？虽然我可以更轻松地检测是否会剪切整个段落并在下一页显示该段落，如果段落不适合在一个屏幕上，则可能会导致问题。

这是显示问题的图像。看到上面的图片只显示了一部分，底部的文字也部分显示了。

！![在此处输入图像描述](../Images/29b64df47b42aba6f9e4e5cd24555d1f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:38:56.577

非常hacky且完全未经测试，但可能会有所帮助

```
var baseOfScreenPosition = $.scrollTop() + $(window).height();

$(".book_paragraph).each( function(i) { 
var topOfParagraph = $(this).offset().height;
    var bottomOfParagraph = topOfParagraph + $(this).height();

    if( baseOfScreenPosition > topOfParaGraph && baseOfScreenPosition < bottomOfParagraph)
    {
    // do something
    }
}); 
```

# javascript - 从 OpenCpu 服务器动态获取下拉菜单列表

> ID：13611861
> 
> 赞同：0
> 
> 时间：2012-11-28T18:21:58.390
> 
> 标签：javascript, html, rapache, opencpu

我需要在我的 HTML 页面中实现一个下拉菜单，它有 2000 多个公司名称。在 html 页面中嵌入如此庞大的列表会使其巨大且加载缓慢。所以想知道 OpenCPU 中是否有交互机制/RApache 以交互方式获取相同内容。就像用户键入 A 一样，它应该显示所有以字母“A”开头的公司名称......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T15:38:55.270

我在我开发的 R 支持的 Web 应用程序中遇到了类似的问题。我需要为用户提供一个基于 12,000 个基因符号的选择列表，我想让他们输入部分符号。我最终使用了基于 JQuery 的[Select2 。](http://ivaynberg.github.io/select2/)您最终会使用从网页返回到 R 函数的 ajax 调用。就我而言，我在服务器端有一个函数，它在用户键入时接收字符并生成一个部分列表（在 JSON 中）以返回。我要求用户输入至少两个字符以使列表更小。它适用于我的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:31:36.457

在 HTML 页面中，在不重新加载页面的情况下以交互方式从服务器获取数据的唯一方法是使用[AJAX](http://w3schools.com/ajax/default.asp)。并且您可以创建一个包含所有已获取值的数组，这样您就不必重新获取已检索到的名称。

在服务器上，您需要创建一个页面，该页面根据某些条件（例如用户键入的字母）返回企业名称列表。

**更新**

另外，您是否实际测试过一个包含 2000 个下拉菜单项的页面？你知道它会很慢吗？如果每个项目有 40 个字符长，那将是 80K 的文本。浏览器可以在几毫秒内处理 80K。我认为这个问题不是加载时间的问题，而是迫使您的用户滚动浏览包含 2000 个条目的列表。

**更新 2**

我刚刚打开了谷歌搜索“如何使用 php 创建 ajax 下拉菜单”。[这是一个与您的示例](http://www.jeremymorgan.com/tutorials/php-tutorials/how-to-create-an-ajax-drop-down-menu-with-php-and-mysql/)类似的示例。涵盖了主要概念。尽管您会根据`onkeyup`文本框上的事件触发 AJAX 调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T19:54:23.630

你需要的是一个使用 jquery 的自动完成小部件：

[http://jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)

如果你想在没有任何 javascript 的情况下做到这一点，你当然可以使用 html5 来做到这一点，但有兼容性的限制。

[http://css-tricks.com/relevant-dropdowns-polyfill-for-datalist/](http://css-tricks.com/relevant-dropdowns-polyfill-for-datalist/)

# android - 当一个布局不可见而另一个布局可见时的点击问题

> ID：13611865
> 
> 赞同：0
> 
> 时间：2012-11-28T18:22:13.283
> 
> 标签：android, android-layout, android-widget

我在布局 xml 中有以下两个 LinearLayout。

我在布局项目 layout_edit 和 layout_create 上都添加了 onClickListener

```
<LinearLayout
            android:id="@+id/layout_edit"
            android:layout_width="wrap_content"
            android:layout_height="50dp"
            android:background="@color/white"
            android:gravity="center"
            android:paddingLeft="15dp"
            android:paddingRight="15dp"
            android:visibility="visible" >

            <ImageView
                android:id="@+id/imgView_edit"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/ic_edit" >
            </ImageView>
</LinearLayout>

<LinearLayout
            android:id="@+id/layout_create"
            android:layout_width="wrap_content"
            android:layout_height="50dp"
            android:layout_toLeftOf="@id/layout_edit"
            android:background="@color/white"
            android:gravity="center"
            android:paddingLeft="15dp"
            android:paddingRight="15dp"
            android:visibility="visible" >

            <ImageView
                android:id="@+id/imgView_create"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/ic_create" >
            </ImageView>
</LinearLayout> 
```

我添加了以下代码：

```
LinearLayout linearLayoutEdit = (LinearLayout) getActivity().findViewById(R.id.layout_edit);
mLinearLayoutEdit.setOnClickListener(this);

LinearLayout linearLayoutCreate = (LinearLayout) getActivity().findViewById(R.id.layout_create);
linearLayoutCreate.setOnClickListener(this); 
```

在特定场景下，添加以下代码：

linearLayoutEdit.setVisibility(View.INVISIBLE);

现在，linearLayoutCreate 仍然可见，但 linearLayoutCreate onClick 不起作用。

当 linearLayoutEdit 和 linearLayoutCreate 都是 VISIBLE 时，它们的 onClick 都可以正常工作。

似乎由于linearLayoutCreate位于linearLayoutEdit的左侧，并且使用代码使linearLayoutEdit变得不可见，因此linearLayoutCreate的可点击操作虽然可见，但不起作用。

当 linearLayoutEdit 不可见时如何使 linearLayoutCreate 可点击的任何提示。

我发现的一种解决方案是使用具有已经可用 id 的代码再次重新创建布局，但是还有其他可用的解决方案吗？

```
@Override
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.layout_edit:
            break;
        case R.id.layout_create:
                // not navigating within this condition only when layout_edit is INVISIBLE, but //navigating when both layout_edit & layout_create are VISIBLE
            break;
        default:
            break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:30:20.987

> 现在，linearLayoutCreate 仍然可见，但 linearLayoutCreate onClick 不起作用。

听起来您已经设置*了两种*布局以在单击时隐藏*一个*布局`linearLayoutEdit`，更改您的`onClick()`方法以隐藏被单击的布局：

```
@Override
public void onClick(View v) {
    v.setVisibility(View.INVISIBLE);
} 
```

# mysql - Nest Query - MYSQL - 查找销售额最多的日期

> ID：13611867
> 
> 赞同：0
> 
> 时间：2012-11-28T18:22:20.890
> 
> 标签：mysql, database, subquery

我必须在需要列出哪些 CD 在特定日期销售最多的地方编写查询。为此，我只有有关所有 CD 及其购买日期的信息。我的查询只列出了 CD_NO 和它们的所有日期。我需要结果表来告诉我哪几天的销售量最大，并根据特定 CD 按最繁忙的日期对它们进行排序。我收集我需要做一个子查询，但是这些让我很困惑。

到目前为止我的查询：

```
SELECT CD_NO, purchase_date
FROM Artist
GROUP BY CD_NO, purchase_date
ORDER BY CD_NO 
```

任何建议，因为我有点困惑:(

查询的具体规范是：

对于每张 CD，找出哪一天的销量最高。结果表需要列出 CD 编号和日期。请注意，如果有几天的最大销售额相同，则一张 CD 可能会在结果表中出现多次。

期望的输出：

```
CD_NO        purchase_date
1             2011-12-30 
2             2012-03-22
3             2012-04-24
3             2012-04-22 
```

与 CD_NO 2 的所有其他购买日期相比，CD_NO 1 在特定日期 2011 年 12 月 30 日的销售额最高，CD_NO 2 在 2012 年 3 月 22 日的销售额最高，CD_NO 3 的总销售额在 2012 年 3 月 22 日两个日期，因此列出了两个日期。此结果表源自以下输入：

```
CD_NO         purchase_date
1              2011-12-30
1              2011-12-30
1              2011-12-29
1              2011-12-28
2              2012-03-22
2              2012-03-22
2              2012-03-21
3              2012-04-24
3              2012-04-24
3              2012-04-22
3              2012-04-22              
3              2012-04-21 
```

我不确定这是否重要，但输入不一定按 CD_NO 排序，并且购买日期的最早日期并不总是最后。IE，输入的顺序可以是随机的，但输出应该由CD_NO排序。

# android - 引起：java.lang.InstantiationException，但我不知道如何修复，为什么

> ID：13611874
> 
> 赞同：-1
> 
> 时间：2012-11-28T18:22:40.183
> 
> 标签：android, sqlite, graph

我已经编辑了源代码，但是我有错误，我不明白在哪里以及为什么会发生错误，这是源代码类 LineGraph.java

公共类 LineGraph 扩展 Activity {

```
public static final String ROW_ID = "id";
public static final String ROW_NAMA = "nama";
public static final String ROW_BERAT = "berat";

public static final String DATABASE_NAME = "tes.sqlite";
public static final String DATABASE_TABLE = "tis";
public static final int DATABASE_VERSION = 1;

public SQLiteDatabase database;
public DBHelper dbhelper;
public final Context kontext;

public static class DBHelper extends SQLiteOpenHelper {

    public DBHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + ROW_ID
                + " INTEGER PRIMARY KEY AUTOINCREMENT, " + ROW_NAMA
                + " TEXT NOT NULL, " + ROW_BERAT + " TEXT NOT NULL );");
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
        onCreate(db);
    }

}

public LineGraph(Context c) {
    kontext = c;
}

public LineGraph open() {
    dbhelper = new DBHelper(kontext);
    database = dbhelper.getWritableDatabase();
    return this;
}

public void close() {
    dbhelper.close();
}

public long createEntry(String data, String date) {
    // , String date
    // TODO Auto-generated method stub
    ContentValues cv = new ContentValues();
    cv.put(ROW_NAMA, data);
    cv.put(ROW_BERAT, date);
    return database.insert(DATABASE_TABLE, null, cv);
}

public String getBMIID() {
    // TODO Auto-generated method stub
    String[] column = new String[] { ROW_ID };
    Cursor c = database.query(DATABASE_TABLE, column, null, null, null,
            null, null);

    String result = "";
    int iID = c.getColumnIndex(ROW_ID);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        result = result + c.getString(iID);
    }

    return result;
}

public String getBMIDataData() {

    String[] column = new String[] { ROW_NAMA };
    Cursor c = database.query(DATABASE_TABLE, column, null, null, null,
            null, null);

    String result = "";
    int iData = c.getColumnIndex(ROW_NAMA);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        result = result + c.getString(iData);
    }

    return result;
}

public String getBMIDateData() {
    String[] column = new String[] { ROW_BERAT };
    Cursor c = database.query(DATABASE_TABLE, column, null, null, null,
            null, null);

    String result = "";
    int iDate = c.getColumnIndex(ROW_BERAT);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        result = result + c.getString(iDate);
    }

    return result;
}

public void updateEntry(long lId, String mData, String mDate) {
    // TODO Auto-generated method stub
    ContentValues cvUpdate = new ContentValues();

    cvUpdate.put(ROW_NAMA, mData);
    cvUpdate.put(ROW_BERAT, mDate);
    database.update(DATABASE_TABLE, cvUpdate, ROW_ID + " = lId", null);
}

public String getData(long l) {
    // TODO Auto-generated method stub
    return null;
}

public String getDate(long l) {
    // TODO Auto-generated method stub
    return null;
}

public XYMultipleSeriesDataset getDemoDataset(String title) {

    String[] column = new String[] { ROW_NAMA };
    Cursor c = dbhelper.getWritableDatabase().query(DATABASE_TABLE,
            column, null, null, null, null, null);

    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();

    TimeSeries series = new TimeSeries("Line1");
    TimeSeries series2 = new TimeSeries(title);

    getBMIDataData();

    while (!c.isAfterLast()) {
        int date = c.getInt((Integer) c.getColumnIndexOrThrow("bmi_date"));
        int weight = c
                .getInt((Integer) c.getColumnIndexOrThrow("bmi_data"));
        series2.add(weight, date);
        c.moveToNext();
    }

    c.close();

    dataset.addSeries(series);
    dataset.addSeries(series2);

    return dataset;
}

public Intent getIntent(Context context) {

    // Lager TimeSeries for den første linja
    XYMultipleSeriesDataset dataset = getDemoDataset("Line1");

    // Kode for render
    XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer();

    // Optimalisering linje1
    XYSeriesRenderer renderer = new XYSeriesRenderer();
    renderer.setColor(Color.YELLOW);
    renderer.setPointStyle(PointStyle.CIRCLE);
    renderer.setFillPoints(true);

    // Optimalisering linje2 husk rekke følgen
    XYSeriesRenderer renderer2 = new XYSeriesRenderer();
    renderer2.setColor(Color.BLUE);
    renderer2.setPointStyle(PointStyle.SQUARE);
    renderer2.setFillPoints(true);

    // Legger til render seriene
    mRenderer.addSeriesRenderer(renderer);

    // Optimalisering grafen
    mRenderer.setChartTitle("Test");
    mRenderer.setZoomEnabled(true);
    mRenderer.setZoomButtonsVisible(true);
    mRenderer.setBackgroundColor(Color.BLACK);
    mRenderer.setApplyBackgroundColor(true);
    mRenderer.setXTitle("Dager");
    mRenderer.setShowGrid(true);

    mRenderer.addSeriesRenderer(renderer2);

    Intent intent = ChartFactory.getLineChartIntent(context, dataset,
            mRenderer, "Line Graph Title");

    return intent;

} 
```

}

这是logcat

```
java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{android.graph/android.graph.LineGraph}: java.lang.InstantiationException: android.graph.LineGraph

Caused by: java.lang.InstantiationException: android.graph.LineGraph 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:37:02.373

不要替换`Activity`. Every`Activity`由系统实例化，它需要有一个`public`无参数的构造函数。

一旦你告诉系统你想启动`LineGraph` `Activity`它就会尝试做`new LineGraph()`。之后，系统`Context`会为您的`Activity`. 一旦完成，它将调用该`onCreate`方法。

你可以这样做

```
public class LineGraph extends Activity {
    public LineGraph() {
        super();
        // you could do init here, but you better don't
    }
} 
```

但我建议不要这样做，因为那时你还没有`Context`，而且还没有任何`Activity`作品。

在`onCreate`.

附带说明：将像您这样的类`DBHelper`放在自己的文件中通常比将它们包含在大型代码段中更好。如果您不创建它也是一个好主意`LineGraph`，`Activity`因为它已经处理了数据库访问（或将数据库访问部分提取到它自己的类文件中）。尽量让每个对象承担一项责任。

# c# - XML 解析为属性返回 null

> ID：13611876
> 
> 赞同：1
> 
> 时间：2012-11-28T18:22:49.877
> 
> 标签：c#, xml, linq-to-xml

我有一个如下所示的 XML 文件：

```
<?xml version="1.0" standalone="yes"?>
<NewDataSet>
  <DT100>
   <company_id>online00020120523888</company_id>
   <template_type>100</template_type>
   <import_seq>1</import_seq>
   <field_name>cust_acct_no</field_name>
   <display_name>Account No</display_name>
   <data_type>0</data_type>
   <internal_num>0</internal_num>
   <internal_info>{}</internal_info>
  </DT100>
   .
   .
   . 
```

对于每个 DT100，我正在尝试将 import_seq 和 field_name 读入字典。但是，当我单步调试调试器时，import_seq 和 field_name 为空。这是我的代码，我不确定自己做错了什么，我正在使用我编写的一些早期代码来解析 XML，所以我认为它*应该*可以工作，但事实并非如此。

```
XDocument doc = XDocument.Load("foo.xtp");
String feed = doc.ToString();

string import_seq = "";
string field_name = "";
XmlReader r = XmlReader.Create(new StringReader(feed));

Dictionary<string, string> custXML = new Dictionary<string, string>();
r.ReadToFollowing("NewDataSet");

if(r.ReadToDescendant("DT100"))
{
   do
    {
      import_seq = r.GetAttribute("import_seq");
      field_name = r.GetAttribute("field_name");
      custXML.Add(import_seq, field_name);

     }
    while (r.ReadToNextSibling("DT100"));
} 
```

非常感谢，

阿曼达

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T18:27:46.830

您可以使用这个简单的 Linq to Xml 查询创建字典：

```
Dictionary<int, string> custXML = 
            doc.Descendants("DT100")
               .ToDictionary(d => (int)d.Element("import_seq"),
                             d => (string)d.Element("field_name")); 
```

是的，如您所见，您要提取的值是元素，而不是属性。[在此处](http://www.w3schools.com/dtd/dtd_el_vs_attr.asp)阅读差异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T18:28:18.600

问题在于`import_seq`and的值`field_name`不是*attributes*，它们是*元素*（元素的子`<DT100>`元素）。您可以继续从阅读器读取元素（不太容易），或者您可以使用 LINQ-to-XML 或序列化之类的东西来检索数据。

# magento - 更改 Magento 默认数量，但不是最小数量

> ID：13611879
> 
> 赞同：0
> 
> 时间：2012-11-28T18:22:59.463
> 
> 标签：magento, e-commerce

在添加产品时，我需要默认设置，在这种情况下，轮胎默认数量为 4。但同时我不希望最小值为 4——因为如果我这样做，那么如果你只想要一个轮胎然后你得到一个错误。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:46:07.617

您可以在页面加载时使用 Javascript 将 qty 字段设置为 4。为了使其对管理员更友好，您可以创建一个新的产品属性来存储您想要更改默认值的产品的默认数量和新产品属性集，并且仅在两者都为真时才更新数量。

> $("数量").value = 4

（当客户在产品页面上编辑订单时，您必须添加额外的逻辑）

或者您可以修改添加到购物车模板，请参阅[http://www.magentocommerce.com/boards/viewthread/6117/](http://www.magentocommerce.com/boards/viewthread/6117/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:36:35.123

我有你完全相同的问题。您需要将“数量”参数添加到“添加到购物车”按钮创建的 url。所以从：

```
http://your.site.com/checkout/cart/add/product/51/ 
```

至

```
http://your.site.com/checkout/cart/add/product/51/qty/4 
```

换句话说，在你的

```
app/design/frontend/default/[youthemefoldername]/template/catalog/product/list.phtml 
```

文件，您需要替换：

```
<button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setLocation('<?php echo $this->getAddToCartUrl($_product) ?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button> 
```

和：

```
<button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setLocation('<?php echo $this->getAddToCartUrl($_product) ?>qty/4')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button> 
```

编辑：查看这里[http://www.magentocommerce.com/boards/viewthread/22185/](http://www.magentocommerce.com/boards/viewthread/22185/)了解更多信息。

# security - LogicException：容器扩展“安全”未注册

> ID：13611881
> 
> 赞同：1
> 
> 时间：2012-11-28T18:23:05.510
> 
> 标签：security, symfony, containers

嗨，我只是尝试安装 symfony 2.1.3，但是当我尝试进入配置时。我收到错误“LogicException：容器扩展“安全”未注册”。我没有在脚本中移动任何内容，并使用作曲家进行了安装。有人有想法吗？是symfony的bug吗？非常感谢

# jquery - iOS 6 上的 HighchartsJS 点击事件

> ID：13611882
> 
> 赞同：0
> 
> 时间：2012-11-28T18:23:10.867
> 
> 标签：jquery, highcharts, ios6, jquery-events

在 iOS6 发布后，我们网站中一直使用的 Highchart 条形图停止响应 iOS 设备上的点击事件。尽管图形正确呈现，但单击函数在单击其中的数据点时根本不会触发。

奇怪的是，我发现如果该函数附加到 mouseOut 事件，则在 iOS 中单击时会触发该函数。IE 如果我定义`events: { mouseOut: function(){ //dosomething } }`然后单击图表中的数据点，iOS 设备将执行该功能。（iOS 设备 mouseOut 可能总是这种情况，因为没有类似的触摸事件；但是，关键是在这种情况下会触发一些事件。）

我在一个平面 HTML 页面中创建了一组非常基本的图表，以测试 iOS 6 中 Highcharts 的基本功能，并且对于附加到数据点的点击事件似乎可以正常工作。

我很高兴发布带有图形数据细节的代码（或 Fiddle 链接），但我更想知道是否有其他人在 iOS 6 中使用 Highcharts JS 看到过这样的问题。

非常感谢您提供的任何见解。（正如我所说，我使用我们网站生成的对象和数据创建的基本图表似乎可以在平面 HTML 页面上正常工作，所以我认为代码在回答问题方面不会非常有帮助。但是，我愿意如果有人认为这会帮助他们得出结论，请发布该代码。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:21:54.313

万一其他人遇到这个问题，我发现它与触摸事件的 JQuery 插件扩展 (jquery.ui.touch-punch) 发生冲突，这是我们用来使 JQ UI 滑块工作的东西。

我还在 Highcharts 系列设置中明确启用了允许点击事件，以前没有指定（尽管在所有其他浏览器中没有它的情况下点击事件按预期工作）。

移除触摸事件 JQ 和添加显式点击设置的组合解决了该问题。

我不太确定为什么这个特定实例会导致点击处理程序出现问题（我们在其他地方的许多元素上使用了许多点击事件），尽管我确实在 Highcharts 源代码本身中看到了一些处理触摸事件的尝试。

希望这对其他人有帮助。

# c# - 启用子表单按钮

> ID：13611883
> 
> 赞同：-3
> 
> 时间：2012-11-28T18:23:11.053
> 
> 标签：c#, winforms, parent-child

我有父表单（FORM1），我添加了这段代码

```
FORM2 form = new FORM2();
form.Show(); 
```

我想要的是在从父级调用（打开）我的子表单时启用一个特定按钮（默认情况下禁用）。你能给我举个例子吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:12:09.943

您需要将这样的属性添加到您的子表单中：

```
public bool MyButtonEnabled //TODO give better name
{
    get
    {
        //TODO change this to the button that you're using
        return button1.Enabled;
    }
    set
    {
        //TODO change this to the button that you're using
        button1.Enabled = value;
    }
} 
```

然后，您可以使用父表单中的该属性来更改按钮的可见性。

从设计的角度来看，使用这样的属性比公开显示按钮要好得多，因为您限制了外部实体只做他们需要做的事情而不给他们更多的访问权限。

# saas - 管理员 URL 的 SaaS 位置

> ID：13611884
> 
> 赞同：4
> 
> 时间：2012-11-28T18:23:13.333
> 
> 标签：saas, subdomain

## 背景

我在一家 SaaS 公司工作，您在注册时会获得一个网站。

如果公司的 url 是 saas.com，这可能是客户列表：

```
abc.saas.com
mysite.saas.com
so.saas.com 
```

目前，我们的每个客户都必须去 /admin 才能进入他的管理面板。

```
abc.saas.com/admin
mysite.saas.com/admin
so.saas.com/admin 
```

问题是像 Clicktale 这样通过记录用户来跟踪用户的服务，限制了您可以跟踪的子域的数量。如果您想要更多子域，则必须支付更多费用。

因此，我们正在分析迁移到`admin.saas.com`所有管理面板的单个子域的可能性。

**拥有多个 /admin 子域 VS 单个管理子域的优缺点是什么？**

## 注意事项 

*   SSL 已经解决，我们有一个通配符证书
*   我们可以保留从 /admin 到 admin.saas.com 的 301 重定向

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:35:12.250

拥有单个域 (admin.saas.com) 的优点：

*   拥有更多订阅的用户可以更轻松地管理子域（他们不必导航到不同的 URL）
*   使用特定地址，您的文档和视频将更容易理解。与 {yourdomain}.saas.com/admin 等占位符的链接让客户思考。
*   可以在复杂架构中更轻松地设置防火墙规则

几个月前，我们在开发 SaaS/PaaS 产品时必须做出同样的决定，我们对这种实施感到满意。根据您的情况，我看不到任何缺点。

# android - 如何获取操作项的视图？

> ID：13611890
> 
> 赞同：1
> 
> 时间：2012-11-28T18:23:19.573
> 
> 标签：android, android-actionbar, actionbarsherlock, android-view

我想要做的是查看我的操作栏项目，这样我就可以在确切的位置显示我的 QuickActionDialog。我试过这个，但我的快速操作对话框出现在操作栏上方的屏幕左上角（以及我的项目/按钮上方）。

```
getSherlockActivity().getSupportActionBar().setCustomView(createCustomItemView(R.drawable.ic_add));         
questionPup.show(getSherlockActivity().getSupportActionBar().getCustomView());

public View createCustomItemView(int resId) {
    Drawable icon = getResources().getDrawable(resId);
    ImageView iconView = new ImageView(getSherlockActivity());
    iconView.setImageDrawable(icon);
    return iconView;
} 
```

我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:39:09.167

在您的活动中保留对 iconView 的引用；

```
 ImageView iconView = null;

    public View createCustomItemView(int resId) {
        if (this.iconView == null) {
            Drawable icon = getResources().getDrawable(resId);
            this.iconView= new ImageView(getSherlockActivity());
            this.iconView.setImageDrawable(icon);
        }
        return this.iconView;
    } 
```

然后你应该可以打电话：

```
mActionBarQuickAction.show(iconView); 
```

无论何时，iconView 将充当锚点（mActionBarQuickAction 是您对之前创建的快速操作的引用。

# jquery - 从小部件动态嵌入谷歌分析

> ID：13611892
> 
> 赞同：0
> 
> 时间：2012-11-28T18:23:31.227
> 
> 标签：jquery, google-analytics

```
var script2 = document.createElement( 'script' );
script2.value = "var _gaq = _gaq || [];_gaq.push(['_setAccount', 'UA-xxxxxx-1']);_gaq.push(['_setDomainName', 'http://www.widget.devserver2012.com']);_gaq.push(['_setAllowLinker', true]); _gaq.push(['_trackPageview']);(function() {var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})()";

$('head').prepend(script2); 
```

我正在使用此代码将 Google Analytics 从 javascript 小部件嵌入到文档头中，用户将嵌入到他们的页面上。但是谷歌分析没有接收数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:55:28.313

使用`script2.text = "..."`or`script2.innerHTML = "..."`代替`script2.value = "..."`.

这是一个 jsfiddle，它使用以下代码测试所有三个分配：http: [//jsfiddle.net/7nsGp/](http://jsfiddle.net/7nsGp/)

```
var script2 = document.createElement( 'script' );
script2.value = 'alert("assign value worked");';
$('head').prepend(script2);

var script1 = document.createElement( 'script' );
script1.text = 'alert("assign text worked");';
$('head').prepend(script1); 

var script0 = document.createElement( 'script' );
script0.innerHTML = 'alert("assign innerHTML worked");';
$('head').prepend(script0); 
```

在 Chrome 和 Firefox 上，分配了`.text`或`.innerHTML`，但没有分配`.value`.

`alert('script ran')`建议：在测试期间通过在脚本文本的末尾附加一个来验证您的脚本片段是否正在执行。

```
script2.value = "var _gaq = _gaq || []; ... ; alert('script ran');"; 
```

# sql - TSQL 按日期排序数据

> ID：13611893
> 
> 赞同：0
> 
> 时间：2012-11-28T18:23:32.647
> 
> 标签：sql, database, tsql

您好，感谢您提前回复。我是 TSQL 新手，目前正在实习。我正在使用 VB 创建一个网页，我可以毫无问题地向用户显示下面第一个表格中的内容。

```
----------Name--------------------Date----------------Points

1--------Mike---------------------10/01/2012----------4

2--------Mike---------------------10/05/2012----------2

3--------Mike---------------------10/03/2012----------1

4--------Mike---------------------10/17/2012----------4

5--------Mike---------------------10/24/2012----------4

6--------Simon---------------------11/05/2012--------1

7--------Simon---------------------11/11/2012--------3

8--------Simon---------------------11/20/2012--------4

9--------Simon---------------------11/22/2012--------2

10  Simon   11/27/2012  3 
```

但是，我有一个包含日期和星期的下拉列表，它按一天到一天或一周到一周的时间间隔对上面第一个表中的数据进行排序。

当用户选择从表中的每个名称开始以每周间隔显示数据时的输出`MIN(Date)`应该 `MAX(Date)`是这样的。我用

```
SELECT  Name, MIN(Date) AS StartDate, DATEADD(DD, 7, MIN(Date)) AS EndDate, SUM(Points) 
```

而且我知道我不应该将 EndDate 设置为这样的固定点，因为接下来 7 天的数据将不会显示。

```
-----Name-------StartDate-------EndDate---------Points

1----Mike-------10/01/2012------10/05/2012----------7

2----Mike-------10/17/2012------10/24/2012----------8

3----Simon-----11/05/2012-----11/11/2012----------4

4----Simon-----11/20/2012-----11/27/2012----------9 
```

任何帮助都感激不尽。我希望我的问题很清楚。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:32:41.170

我希望我能清楚你的问题。

要根据日期范围获取 sql 记录，您可以使用[BETWEEN](http://www.techonthenet.com/sql/between.php)运算符

像这样：

```
SELECT Name, MIN(Date) AS StartDate, MAX(Date) AS EndDate, SUM(Points)
FROM people
WHERE Date between to_date ('2003/01/01', 'yyyy/mm/dd')
AND to_date ('2003/12/31', 'yyyy/mm/dd') 
GROUP BY name
ORDER BY Points; 
```

我希望这可以帮到你。

# c# - 2 个向量与旋转的差异

> ID：13611896
> 
> 赞同：4
> 
> 时间：2012-11-28T18:23:46.047
> 
> 标签：c#, parent-child, unity3d

一段时间以来，我一直在这个问题上徘徊，但我一直没有弄清楚这一点。

问题：

目前试图做一个假的“摇摆”时刻。我让玩家对象成为您可以在按键期间锁定的对象的子对象。

考虑到这一点，我需要在 grappleobject 上获得正确的旋转，使玩家的速度成为 grappleobject 上的正确旋转。

这不是 2D，而是 3D。这导致了这种头痛。

[http://img843.imageshack.us/img843/7434/rotations.jpg](http://img843.imageshack.us/img843/7434/rotations.jpg)

我想如果我能得到位置向量和玩家前进方向的向量，比如角色马达的速度，得到一个唯一的向量，这个向量信息应该能够旋转 grappleobject正确。

然而，这就是我认为很容易的事情，但我已经研究了好几个小时，以获得向量差来进行旋转，因为它被认为是。

tl：博士

2 个向量，这两个向量的差为一个向量，这个向量控制 grappleobject 的旋转以“假”一个具有适当速度的摆动运动。

如果有答案，请提前感谢您。

添加信息：

目前的测试是这些。

///

Parent Orb 是根据触发事件更新其变换的抓斗对象。
CurDirection 是玩家在世界矢量中前进的方向。
CurPos 是玩家在世界中那个时间点的位置。

```
 CurDirection = (transform.position-ParentOrb.position);
 CurDirection.Normalize();

 motor.movement.velocity = (CurDirection);
 CurPos = transform.position; 
```

////

还尝试获取从抓斗对象到玩家的角度。

///

otherDirection = 空间中的速度方向。
OtherDirectionPre = 当前空间位置。

```
 Vector3 targetDir = otherDirection;
 Vector3 forward = otherDirectionPre;

 angle = Vector3.Angle(targetDir, forward); 
```

/// 我认为这些可能没有帮助，但更好地展示我到目前为止的进展情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:07:26.367

我想你知道命中点和中心之间的半径，我们称之为 r。玩家的速度 v 和玩家应该连接到的轴的角速度 ω (=omega) 有向量方程：

v = ω × r

假设所有 3 个向量都相互垂直，则有 ω = v / r。

**编辑：**您从中心位置和碰撞接触点获得半径 r：

```
Vector3 r = collision.contacts[0].point - center;
float radius = r.magnitude;
float angularSpeed = rigidbody.veloctiy.magnitude / radius; 
```

# java - 如何在 JPA 查询中包含大于日期？

> ID：13611901
> 
> 赞同：0
> 
> 时间：2012-11-28T18:24:05.330
> 
> 标签：java, jpa, jpql

我有一个基于 JPA 的项目，如下所示：

```
@Entity
@Table(name="events")
public class Event implements Serializable {
  @Id
  @GeneratedValue(strategy=GenerationType.AUTO)
  private Long id;
  private String data;
  @Temporal(TemporalType.TIMESTAMP)
  private java.util.Date eventDate;

/* ... getters & setters */
} 
```

在我的 DAO 中，我这样做：

```
public void checkForEvents(String text, java.util.Date myDate) {

  String query = "SELECT e FROM Event e WHERE e.data LIKE '%?1%' AND e.eventDate > ?2";
  Query q = getEntityManager().createQuery(query);
  q.setParameter(1, text);
  q.setParameter(2, myDate);
  q.getSingleResult() /* and so on ... */

} 
```

当我运行 DAO 代码时，我收到此错误：

`The parameter "0" is of type "java.lang.String", but the declaration in the query is for type "java.util.Date".`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:29:48.077

该消息看起来很奇怪，但错误在第一个参数中。您只能将值作为参数传递，因此您应该在 Java 代码中替换`e.data LIKE '%?1%'`为`e.data LIKE ?1`，并用 包围您的文本。`%`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:29:15.270

`'%?1%'`我认为这与您不能在文字（即）中使用参数这一事实有关。

请尝试以下查询：

```
SELECT e FROM Event e WHERE e.data LIKE CONCAT('%', ?1, '%') AND e.eventDate > ?2 
```

# firefox - 标签标签上的 Contenteditable 在 Firefox 中不起作用

> ID：13611904
> 
> 赞同：3
> 
> 时间：2012-11-28T18:24:22.740
> 
> 标签：firefox, label, contenteditable

除了将标签放在跨度中之外，还有什么方法可以使标签的文本在 Firefox 中可编辑？

```
 <h1>Content Editable Test</h1>

    <p contenteditable="true">Can edit this</p>

    <p><label><span contenteditable="true">and this</span></label></p>

    <p><label contenteditable="true">but not this in Firefox</label></p> 
```

# php - 卷曲脚本返回 False

> ID：13611906
> 
> 赞同：0
> 
> 时间：2012-11-28T18:24:39.230
> 
> 标签：php, curl

`bool(false)`当我`var_dump $information`可以通过浏览器而不是通过下面的代码访问 API时，我得到了为什么？

```
 $json = file_get_contents('API URL');

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_URL, $json);  
    curl_setopt($ch, CURLOPT_USERPWD, "user:pw");
    curl_error($ch);
    $result = curl_exec($ch);
    curl_close($ch);

    $information = json_decode($result, true);

    var_dump($result); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T18:29:32.793

这条线

```
$json = file_get_contents('API URL'); 
```

应该

```
 $json = 'API_URL'; 
```

# jquery - jquery - 不能在变量中发送“@”

> ID：13611908
> 
> 赞同：1
> 
> 时间：2012-11-28T18:24:39.840
> 
> 标签：jquery, ajax

我是 jquery 的菜鸟，但学得很快。

我一直在使用 $.post 将值从 html 表单发送到 php 文件。每个人都在工作，直到输入的电子邮件地址包含“@”符号（他们当然都这样做），然后它就坏了！

我对我的 jquery 进行了很多实验。我试图做的是不使用 html 中的表单标签。

嗯，看代码。你会明白我的意思。我正在删除所有验证和错误报告，所以这不是史诗般的 tl:dr 阅读......

```
<table id='contactform'>
    <tr>
        <td>
            <label for='name'>Name</label>
            <input id='name' type='text'>
        </td>
        <td>
            <label for='phone'>Phone</label>
            <input id='phone' type='tel'>
        </td>       
    </tr>
    <tr>
        <td colspan='2'>
            <label for='email'>Email</label>
            <input id='email' type='email'>
        </td>
    </tr>
    <tr>
        <td colspan='2'>
            <label for='message'>Message</label>
            <textarea id='message'></textarea>
        </td>
    </tr>
    <tr>
        <th colspan='2'>
            <button id='sendmessage'>SEND MESSAGE</button>
        </th>
    </tr>
</table> 
```

js，减去验证检查......

```
$(document).ready(function() {
$("input#name").focus();
$("button#sendmessage").click(function() {
    $("table#contactform").hide();
    $("div#popin").show();
    $("div#popin").html("<img src='images/loader.gif'>");
    sendmessage();
});
});

function sendmessage() {
$.post(
    "sendmessage.php",
    {nameval:$("input#name").val(), phoneval:$("input#phone").val(),  emailval:$("input#email").val(), messageval:$("textarea#message").val()},
    function(data) {
        if (data == true) {
            $("div#popin").html("<p>We have received your message and will reply asap</p>");
        }
        else {
            $("div#popin").html("<p>Something went wrong! Please contact webmaster@******</p>");
        }
    }
);
} 
```

所以，一切都很好地发送到 php 文件。它读取帖子值，将它们通过电子邮件发送给我，将数据“true”返回给 js……直到电子邮件中出现“@”！！！

我知道我可以使用 serialize_data() 或其他任何东西，但我希望不要使用表单。哦，是的，这有效...

```
var emailval = $("input#email").val().replace("@", "(at)");
$.post(
    "funcs/contact.php",
    {nameval:$("input#name").val(), phoneval:$("input#phone").val(), emailval:emailval, messageval:$("textarea#message").val()}, 
```

但是无论我用什么替换“@”，当我在 php 文件中使用 str_replace 时，它​​都会再次中断。

有谁知道我要去哪里错了？

这是php...

```
<?php
$name = $_POST["nameval"];
$phone = $_POST["phoneval"];
$email = $_POST["emailval"];
$message = $_POST["messageval"];
$emailbody = "Name - $name\nPhone - $phone\nEmail - $email\n\n$message";
$recipient = "webmaster@*****";
$subject = "contact form";
$result = mail($recipient, $subject, $emailbody, "From:$email");
if ($result) {
    echo true;
}
else {
    echo false;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:33:16.730

您可以查看 encodeURIComponent() javascript方法，无需在服务器端对其进行解码：

```
emailval:encodeURIComponent($("input#email").val()) 
```

# java - ClassNotFoundexception：net.sourceforge.jtds.jdbc.Driver

> ID：13611910
> 
> 赞同：6
> 
> 时间：2012-11-28T18:25:01.913
> 
> 标签：java, tomcat, jdbc, jar, classpath

我遇到了`java.lang.ClassNotFoundException: net.sourceforge.jtds.jdbc.Driver`

我可以通过将 jtds.jar 文件放在`CATALINA_HOME/lib`目录中来解决该错误，但这不是一个理想的解决方案，因为应用程序应该足够模块化，可以部署在任何服务器上。

我有一个`jtds.jar`文件`[tomcat_dir]/webapps/myapp/WEB-INF/lib`，我希望从中找到它。

我知道有很多类似的问题，所以如果这是重复的，我很抱歉，但我还没有找到有帮助的帖子。

为什么我的应用程序找不到`jtds.jar`我包含在应用程序包中的正确文件？为了让应用程序识别该 jar 文件，我需要做什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T18:27:12.977

Tomcat 6 和更高版本*要求*JDBC 驱动程序 JAR 出现在服务器 /lib 中，特别是如果您有 JNDI 数据源。

它可能并不理想，但你必须克服它。您多久更换一次应用服务器？

# c++ - 按值返回指针不会移动对象

> ID：13611911
> 
> 赞同：3
> 
> 时间：2012-11-28T18:25:01.907
> 
> 标签：c++, c++11, move-semantics, rvalue

我用 vs2011 编译了这段代码。它打印第一个*构造函数*然后*复制构造函数*。但是，如果我将函数更改为返回*a*而不是*ap*，它将移动对象。这是一个错误还是为什么会这样？*ap 不是右值吗？

```
struct A
{
  A() { cout << "constructor" << endl;}
  A(const A&) { cout << "copy constructor " << endl;}
  void operator=(const A&) { cout << "assignment operator" << endl; }
  A( A&&) { cout << "move copy constructor" << endl;}
  void operator=(A&&) { cout << "move assignment operator" << endl;}
};

A func() { A a; A *ap = &a; return *ap; }

int main()
{
    A a = func();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T18:38:54.317

`*ap`是一个左值（§ 5.3.1.1，n3290），对于自动发生的移动通常是不安全的。局部变量`return a;`是[另一种情况](https://stackoverflow.com/questions/9963974/are-returned-locals-automatically-xvalues)。编译器不需要证明在这种特定情况下它是安全的。这是在您并不真正需要指针语义的情况下不使用指针的另一个很好的理由。

将其更改为：

```
return std::move(*ap); 
```

但是会导致它被显式移动。

# c# - 在 linq 中将对象转换为 System.Type

> ID：13611912
> 
> 赞同：-3
> 
> 时间：2012-11-28T18:25:15.037
> 
> 标签：c#, .net, linq, .net-4.0

我需要将对象转换为`System.Type`对象。

我读过 C# 是静态类型的，所以这是不可能的。

这是真的？

如果是，我该如何做到这一点？

```
Assembly myDll = Assembly.LoadFrom(dllData.Path);
Type manyAttribute = myDll.GetExportedTypes().FirstOrDefault(...);
Type multiplicityAttribute = myDll.GetExportedTypes().FirstOrDefault(..);

//Here is the problem
propertiesOnOtherFile = propertiesOnOtherFile.Where(t =>
    t.GetCustomAttributes(false).Any(ca => 
    !string.IsNullOrEmpty(((multiplicityAttribute)ca).PropertyName))); 
```

这是行：

```
((multiplicityAttribute)ca).PropertyName) 
```

有没有其他方法可以做到这一点？

编辑：

由于许多问题，这是我的范围：

```
public class PocoClass
{
    [ManyAttribute]
    public ObjectX MyProp;
}

ManyAttribute declaration
{
    public string PropertyName;
} 
```

ManyAttribute 在动态加载的 DLL 中。然后，就像我上面的示例一样，我需要将 customAttribute (ManyAttribute) 转换为 ManyAttribute，以便检查 PropertyName 的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:52:11.220

我仍然不明白......但这应该可以。

```
 IEnumerable<Type> propertiesOnOtherFile = new List<Type>(); //from somewhere?

        //Here is the problem
        propertiesOnOtherFile = propertiesOnOtherFile.Where(t =>
            t.GetCustomAttributes(false).Any<dynamic>(ca => 
            !string.IsNullOrEmpty(ca.PropertyName))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:41:22.830

只有两种方法可以在编译时不知道其类型的情况下访问某物的属性/方法。你肯定处于这种情况：

*   **反射**——很快就变得相当麻烦，即使是基本的事情，但可以让你做几乎任何你想做的事情。
*   **动态**的——使 C# 的行为类似于动态类型语言，但不允许您执行诸如访问名称也是动态的属性之类的事情。

由于在您的情况下，属性名称也是动态的，所以我会说答案是**否定**的，没有更好的方法来操作在编译时不知道的对象和属性。

您最好以这样一种方式设计您的体系结构，以避免以非常动态的方式访问对象，但是由于上下文太少而无法推荐特定的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T18:48:14.977

你试图做的事情没有意义。

*   此行：`Type multiplicityAttribute = myDll.GetExportedTypes().FirstOrDefault(..);`动态获取您尝试绑定的类型。
*   然后你试图反对它：`(multiplicityAttribute)ca)`

投完之后你会怎么做？

你是：

*   试图获取属性名称？
*   试图获取具有某些属性的对象类型列表？
*   试图获取某个静态属性的值？
*   试图获取某个实例属性的值，但您不知道定义该实例的类的名称？

看起来您正在尝试做的是创建一种可通用的方法来检查实际上非常具体的事物。使用反射时，通常更容易转向另一个方向：首先解决特定情况，然后重构为更通用的方法。

# linux - 使用浏览器和 Linux O/S 访问 apache2 虚拟主机

> ID：13611913
> 
> 赞同：0
> 
> 时间：2012-11-28T18:25:18.063
> 
> 标签：linux, apache2

我正在我的 apache 服务器上开发多个网站并设置 apache2 虚拟服务器：

```
/var/www/site1
/var/www/site2
/var/www/site3 
```

主机操作系统是 Linux，没有窗口管理器。我想从远程机器浏览器连接并访问site1、site2 和site3。我没有购买任何域名，现在也不想购买。如何访问站点 1、站点 2 或站点 3？

在 apache2 下，我将默认启用站点设置为 site1，因此当我在浏览器 URL 栏上输入 IP 或我的 /etc/host 等效名称 (site1) 时，我得到 site1。我在 URL 栏中尝试了 site2.site1 并且只获得了 site1？如何浏览到 site2 和 site3？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:27:12.857

当您在 apache 上定义 3 个虚拟主机并将它们命名为 site1、site2 和 site3，然后使用 /etc/hosts 并提供多个条目，这些名称指向相同的 IP 时，您的设置应该可以工作。当您输入 site1.domain 或 site2.domain 时，您应该获得所需的站点。您可以查看 apache error.log 或 access.log。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:26:30.487

好的，我可以做到这一点的方法是使用端口。在 /etc/apache2/ports.conf 文件中，我可以设置另一个端口：

```
NameVirtualHost *:591
NameVirtualHost *:80
Listen 80
Listen 591 
```

然后在 apache2 虚拟服务器站点文件中将 :80 端口更改为 :591

重启apache2，瞧。

然后我可以发送给我的朋友：

```
http://192.168.0.10:591 
```

并将其定向到 site3 和默认值

```
http://192.168.0.10 
```

将加载site1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T18:31:27.520

您必须设置虚拟主机。检查 Apache[文档](http://httpd.apache.org/docs/2.2/vhosts/examples.html)

如果您必须配置`alias`检查 apache[文档](http://httpd.apache.org/docs/2.2/mod/mod_alias.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T18:35:40.273

我需要做的就是将我的站点域名添加到我的 /etc/hosts 文件中。假设我的 apache2 服务器在 192.168.0.10 然后在 /etc/hosts 添加：

192.168.0.10 站点 1 站点 2 站点 3

然后，当客户端浏览器获取 site1 URL 时，它将重定向到我的 apache2 服务器，然后将其定向到正确的虚拟服务器。

# mysql - 5到5.1 SQL升级后500内部服务器错误

> ID：13611914
> 
> 赞同：1
> 
> 时间：2012-11-28T18:25:19.433
> 
> 标签：mysql, sql, .htaccess

它在一个使用符号链接的网站上 - 不确定这是否是罪魁祸首。

我从 SQL 5 升级到 5.1。

由于 htaccess 说 php 而不是 php5 导致几个站点失败，但这很容易修复，一个站点被证明更困难，我似乎找不到答案。

index.php 页面实际上是静态 html，所以我认为它一定是 .htaccess 的错误，因为它显示了 500 内部服务器错误。

.htaccess 文件如下所示：

```
Options -Indexes +FollowSymlinks

RewriteEngine on
RewriteBase /

RewriteRule ^(\.cache|images|cgi-bin|ads|css|vids|theme)  -  [L]
RewriteRule SteelExternalAll\.swf$ /theme/skin-SteelExternal.swf [L]

RewriteCond %{REQUEST_FILENAME}  !-f
RewriteCond %{REQUEST_FILENAME}  !-d
RewriteCond %{REQUEST_URI} !^/[^/]+/(play-|index\.)
RewriteRule ^(games|videos|animations)/([^/]+)/?   /$1/play-$2/   [NS,R=permanent,L]

ErrorDocument 404 /index.php 
```

# jquery - 如何将日期呈现为 jQuery datepicker 的链接？

> ID：13611917
> 
> 赞同：2
> 
> 时间：2012-11-28T18:25:25.410
> 
> 标签：jquery, jquery-ui, datepicker

我想把日期选择器中的日子变成链接。我怎样才能做到这一点？我知道它有`onSelect`，但是当用户将鼠标悬停在天上时，这并没有给用户提供视觉线索。

我尝试了以下方法，但它似乎确实执行了回调函数。使用 jQuery UI v1.9.2 和 jQuery v1.8.1。

```
$(document).ready(function () {
    $("#datepicker").datepicker({
        renderCallback: function ($td, thisDate, month, year) {
            alert('hi');
        }
    });
}); 
```

**更新**

即使变通办法也很容易实现，我决定采用 Kevin B 的方法。这是整个事情。

```
var old_generateHTML = $.datepicker._generateHTML;
$.datepicker._generateHTML = function () {
    function getMonth(s) {
        var months = {
            'January': '01', 'February': '02', 'March': '03', 'April': '04', 'May': '05', 'June': '06',
            'July': '07', 'August': '08', 'September': '09', 'October': '10', 'November': '11', 'December': '12'
        }
        return months[s];
    }
    var ret = old_generateHTML.apply(this, arguments);
    var month = ret.replace(/^.*month">([a-z]+)<\/span.*$/i, "$1");
    var year = ret.replace(/^.*year">([0-9]{4})<\/span.*$/i, "$1");
    ret = ret.replace(/href="#">([0-9]{1,2})<\/a>/g, "href=\"process.php?date=" + getMonth(month) + "/$1/" + year + "\">$1</a>");
    return ret;
};

$(document).ready(function () {
    $("#datepicker").datepicker();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:08:21.700

我建议扩展该`generateHTML`方法，以便每次生成日期选择器的 html 时，都会创建您的链接。

演示：http: [//jsfiddle.net/C4jWz/1/](http://jsfiddle.net/C4jWz/1/)

```
var old_generateHTML = $.datepicker._generateHTML;

$.datepicker._generateHTML = function() {
    var ret = old_generateHTML.apply(this,arguments);
    ret = ret.replace(/href="#">([0-9]{1,2})<\/a>/g, "href=\"process.php?day=$1\">$1</a>");
    return ret;    
};

//<a class="ui-state-default ui-state-hover" href="#">13</a>

$( "#datepicker" ).datepicker(); 
```

特别是这个只得到日，月/年可以以同样的方式获得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:55:43.790

如果我明白您的意思，那么您只需将以下内容添加到您的 CSS 中：

```
.ui-datepicker td a {
    text-decoration: underline !important;
    color: #1122CC !important; /* For a more traditional Blue use '#0000FF' */
} 
```

您可以使用以下内容轻松更改所有日期的链接：

```
$("#datepicker").datepicker().on("click", function(e) { //  must be done on input click as the div is recreated everytime
    $(".ui-datepicker td a").each(function(i) { //  filters through each date
        //  the following grabs the href property and replaces the # tag with the text (aka. the date)
        $(this).prop("href", $(this).prop("href").replace("#", $(this).text()))
        //  I think this could easily be shortened to:
        //  $(this).prop("href", $(this).text()) 
    })
}) 
```

# [**jsFiddle**](http://jsfiddle.net/SpYk3/Ur6Fj/)

 [# **此版本中的另一个示例[我为每个示例添加了一个 Title 属性]**](http://jsfiddle.net/SpYk3/Ur6Fj/10/) 

*   *注意*：我发现你唯一不能真正编辑的是文本。文本用于确定日期。

> ***更新***

这有点 hackish，因为我必须使用一个小计时器（真的不应该是一个问题），但我找到了一种方法来处理继续单击以更改月份和/或年份的更改。定时器的原因很简单，渲染。“新”的日子直到事件发生后的一瞬间才会呈现，这就是计时器的原因。

> *新*脚本_

```
function updateDates() {
    $(".ui-datepicker td a").each(function(i) {
        $(this).prop("href", $(this).prop("href").replace("#", $(this).text()))
    });
}

$( "#datepicker" ).datepicker({
    onChangeMonthYear: function (year, month, inst) {
        setTimeout(function() { updateDates(); }, 500);
    }
}).on("click", function(e) {
    $(".ui-datepicker td a").each(function(i) {
        updateDates();
    })
}); 
```

# [**新**例子_](http://jsfiddle.net/SpYk3/Ur6Fj/29/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T19:03:24.103

我想你需要做这样的事情（未经测试，主要是逻辑）：

```
$('#datepicker .ui-state-default').each( function() { // i think only the days 
//have this class, you can try and use 'ui-state-default a' 
// or something like that
var thisText = $(this).text();
var href = checkWhichLinksIsThis(thisText);
$(this).attr('href', href);
}); 
```

我在这里所做的基本上是遍历所有天链接，通过文本检查哪个是`checkWhichLinkIsThis`方法并相应地更改href。

希望这能让你朝着大方向前进。

# c# - basicHttpBinding 和 webHttpBinding 一起

> ID：13611928
> 
> 赞同：6
> 
> 时间：2012-11-28T18:26:24.623
> 
> 标签：c#, wcf, rest, soap, wcf-binding

我正在使用 C# 和 .NET Framework 4.0 开发 WCF 服务。

我正在`webHttpBinding`这样做：

```
[OperationContract]
[WebInvoke(Method = "POST",
    ResponseFormat = WebMessageFormat.Json,
    BodyStyle = WebMessageBodyStyle.Bare,
    UriTemplate = "filteredOrders/")]
OrderContract[] GetOrders(IdsMessage msg);

[OperationContract]
[WebInvoke(Method = "POST",
    ResponseFormat = WebMessageFormat.Json,
    BodyStyle = WebMessageBodyStyle.Bare,
    UriTemplate = "completeFilteredOrders/")]
OrderContract[] LoadCompleteFilteredOrders(IdsMessage msg); 
```

但是现在我需要使用流式传输将图像发送到该 Web 服务，并且我需要添加`basicHttpBinding`来执行此操作。

**我怎样才能`[OperationContract]`对这个使用的 WCF Web 服务进行新的操作`basicHttpBinding`？**

抱歉，我对 WCF 开发非常陌生。

顺便说一句，这是我的**Web.config**：

```
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="EReportService.RestServiceImpl" behaviorConfiguration="ServiceBehaviour">
        <endpoint address="" binding="webHttpBinding" contract="EReportService.IRestServiceImpl" behaviorConfiguration="web">
        </endpoint>
      </service>
    </services>
    <bindings>
      <webHttpBinding>
        <binding maxReceivedMessageSize="2097152" maxBufferSize="2097152" transferMode="Streamed"/>
      </webHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehaviour">
          <serviceMetadata httpGetEnabled="true"/>       
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
  <connectionStrings>

  </connectionStrings>
</configuration> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T18:38:50.523

只需使用不同的地址创建另一个端点（*两个端点不能共享相同的地址*） - 您可以修改现有的`OperationContract`以创建非 RESTful 方法。

```
 <system.serviceModel>
    <services>
      <service name="EReportService.RestServiceImpl" behaviorConfiguration="ServiceBehaviour">
        <endpoint address="" binding="webHttpBinding" contract="EReportService.IRestServiceImpl" behaviorConfiguration="web">
        </endpoint>
        <endpoint address="soap" binding="basicHttpBinding" contract="EReportService.IRestServiceImpl" >
        </endpoint>
      </service>
    </services>
 </system.serviceModel> 
```

# c - Cuda中的算法

> ID：13611939
> 
> 赞同：0
> 
> 时间：2012-11-28T18:27:04.510
> 
> 标签：c, cuda

我在 C 中创建了一个程序并试图将其更改为 CUDA。

程序输出带有数字的图形文件。

使用 CUDA 我可以让程序输出文件，但计算尚未完成

这里是带有算法的代码

```
__device__ void nextState(int i, darray oldv, darray newv, darray w, int t){

double dv;

   dv = -8*oldv[i]*(oldv[i]-0.1)*(oldv[i]-1) - oldv[i]*w[i];

/* Stimulate in leftmost region */
   if ((t >=10) && (t<=15) && (i < 4))
     dv += 2;

/* diffusion */
  newv[i] = oldv[i] + 0.1 *dv +
            0.1 *1.0*(oldv[i-1]-2*oldv[i]+oldv[i+1])/(1.0*1.0);

  w[i] = w[i] + 0.1 *eps(oldv[i],w[i])
                        *(-w[i]-8*oldv[i]*(oldv[i]-0.1-1));

}

__device__ double eps(double u, double v)
{
    return (0.002 + (0.2*v)/(u+0.3));
}

__global__ void run_state(darray* oldv, darray* newv, darray* w, int* t)
{
int i = threadIdx.x;

nextState(i, *oldv, *newv, *w, *t);

} 
```

同样`#define N 256;`，`run_state<<< 1, N>>>(d_oldv, d_newv, d_w, d_t);` 它应该输出 256 个值。它确实做到了，但都在 0.000 ......

所以如果我在任何这些功能中犯了错误，我就会徘徊。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-30T01:43:02.103

如果您正在尝试检查您的功能是否正常工作，请尝试使用`__host__`指令，以便在主机上也可以使用相同的功能，然后您可以在本地测试和调试它。如果它在主机上工作而在设备上不起作用，则在将信息从主机复制到设备并返回时，您可能做错了。

像这样声明你的函数：

```
__host__ __device__ void nextState(int i, darray oldv, darray newv, darray w, int t) 
```

# r - 在R中的同一图上绘制不连续的xts时间序列？

> ID：13611942
> 
> 赞同：5
> 
> 时间：2012-11-28T18:27:25.613
> 
> 标签：r, merge, plot, xts

我希望能够在 R 的同一屏幕上绘制几个不连续时间序列的线图，并且无法同时显示所有数据：

```
require(xts)
require(xtsExtra)
df1=data.frame(a=1:30,b=3*1:30)
df1$b[2*1:15]=NA
df1A_xts=xts(df1,ISOdate(1900+1:30,1,1))
df1B_xts=xts(df1,ISOdate(1900+2*1:30,2,1))
df1_xts_merge=merge.xts(df1A_xts,df1B_xts) 
```

当然，当我绘制为点图时，一切正常：

```
plot.xts(df1_xts_merge,screens=1,type="p",auto.legend=TRUE) 
```

但是当我尝试将一个或多个系列绘制为线条时，不连续性会引起麻烦，例如：

```
plot.xts(df1_xts_merge,screens=1,auto.legend=TRUE) 
```

如何将这些系列中的每一个绘制为同一组轴上的连续线？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T02:29:37.027

xts 和 zoo 的行为与默认绘图方法一致：

```
matplot(df1_xts_merge,type="l") 
```

![通过 matplot 默认绘图](../Images/267ebe92bd67168f70dd63f0e18f7ed1.png)

您似乎想要通过 xts 对象中的点插值的线图，在这种情况下`na.approx`or`na.spline`会有所帮助：

```
plot(na.approx(df1_xts_merge),screens=1,auto.legend=TRUE) 
```

![xtsExtra::plot.xts 与 na.approx](../Images/4e76189d903e1430e6ce02e9fd981fb2.png)

# c++ - 是否可以推断 std::insert_iterator 的包含类型？

> ID：13611943
> 
> 赞同：4
> 
> 时间：2012-11-28T18:27:26.363
> 
> 标签：c++, iterator, sfinae

我有一个需要模板化迭代器类型的函数。

它当前取消引用迭代器以检查被迭代的类型。

```
template < typename Iterator >
void func( Iterator i )
{
  // Inspect the size of the objects being iterated
  const size_t type_size = sizeof( *i );

  ...
} 
```

我最近发现了几种标准迭代器类型，例如简单地`std::insert_iterator`定义`*i`为`i`.

即，`sizeof(*i)`是迭代器本身的大小；相同`sizeof(i)`或`sizeof(***i)`

是否有一种通用方法（支持 C++ 03）来确定任何标准迭代器正在迭代的对象的大小或类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T18:28:48.913

这就是[`iterator_traits`](http://en.cppreference.com/w/cpp/iterator/iterator_traits)它们的用途。

```
typedef typename std::iterator_traits<Iterator>::value_type type;
const std::size_t type_size = sizeof(type); 
```

编辑：这不适用于所有输出迭代器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T19:28:07.363

我不确定你为什么想要`value_type`一个 OutputIterator，因为没有办法从 Output Iterator 中提取一个值。但是，三个插入迭代器适配器都定义`value_type`为 be`void`并提供一个类型成员，因此如果of变成了`container_type`，您可以回退到`value_type`of 。`T::container_type``value_type``T``void`

（通过“`value_type`的”我真的是指`std::iterator_traits<T::container_type>::value_type`和`std::iterator_traits<T>::value_type`。）

或者你不能尝试使用输出迭代器，就好像它们有值一样:)

*编辑：SFINAE 不是必需的：（*即使没有 C++11 的优点）

```
template<typename U, typename T> struct helper {typedef U type;};

// ostream*_iterator handling courtesy Drew Dormann
template <typename T, typename charT, typename traits>
struct helper<void, std::ostream_iterator<T, charT, traits> > {typedef T type;};

template <typename charT, typename traits>
struct helper<void, std::ostreambuf_iterator<charT, traits> > {typedef charT type;};

// std::raw_storage_iterator still needs an override
// as well as any non-standard output iterators which don't define a container_type.

template<typename T> struct helper<void, T>
{typedef typename std::iterator_traits<typename T::container_type>::value_type type;};

typedef<typename It> struct my_value_type
  : public helper<typename std::iterator_traits<It>::value_type, It> {}; 
```

# java - 使用 scribe 进行 facebook 身份验证时如何实例化验证程序

> ID：13611953
> 
> 赞同：0
> 
> 时间：2012-11-28T18:28:35.557
> 
> 标签：java, facebook, scribe

我正在测试 scribe 以进行 facebook 身份验证。在对 facebook 进行身份验证时，我没有收到 oauth_verifier - 如果这是不正确的行为，请告诉我。对于 facebook auth，我应该如何创建验证器以创建 OAuthRequest。

```
 redirect_uri=http%3A%2F%2Flocalhost%2Foauth%2Ffacebook 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T19:58:14.213

登录Servlet：

```
public void doGet(HttpServletRequest req, HttpServletResponse res) {
    OAuthService service = new ServiceBuilder().provider(FacebookApi.class).apiKey(FACEBBOK_APP_KEY)
.apiSecret(FACEBOOK_APP_SECRET).callback(FACEBOOK_CALLBACK);
    String authenticationUrl = service.getAuthorizationUrl(null);
    res.sendRedirect(authenticationUrl);
} 
```

回调Servlet：

```
public void doGet(HttpServletRequest req, HttpServletResponse res) {
    String code = "";
    Enumeration paramEnum = req.getParameterNames();
    while (paramEnum.hasMoreElements()) {
    String name = (String) paramEnum.nextElement();
    if (name.equals("code")) {
        code = req.getParameter(name);
    }

    OAuthService service = new ServiceBuilder().provider(FacebookApi.class).apiKey(FACEBBOK_APP_KEY)
.apiSecret(FACEBOOK_APP_SECRET).callback(FACEBOOK_CALLBACK);
    Verifier verifier = new Verifier(code);
    //....
} 
```

# mysql - MAMP - #2006 - MySQL 服务器已消失

> ID：13611960
> 
> 赞同：1
> 
> 时间：2012-11-28T18:28:55.123
> 
> 标签：mysql, mamp

我试图用 MAMP 导入一个 8MB 的数据库（我不能让它更小），但我不断收到下面的错误。

我读过我需要更改我的 max_allowed_pa​​cket 但我认为我已经这样做了，但它仍然不起作用。有没有办法可以找出 max_allowed_pa​​cket （以及任何其他相关设置）的设置？

或者有没有人有任何其他的解决方案可以尝试？谢谢

错误 SQL 查询：

插入`cache_menu`( `cid`, `data`, `expire`, `created`,`serialized`) VALUES ('links:management:tree-data:en:ec99d3452fef1ede622e66c68ba908b1dad455aa71f5e68648aeec6488b89c88',[...]]]

MySQL 说：

# 2006 - MySQL 服务器已经消失

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T19:43:58.820

将 my-large.cnf 复制到 MAMP/Library 并将其重命名为 my.cnf（并重新启动 MAMP）修复了此问题。

# c# - 列表框中的控件

> ID：13611967
> 
> 赞同：1
> 
> 时间：2012-11-28T18:29:24.583
> 
> 标签：c#, windows-phone-7

我很有趣，我可以将一些控件（图像，2-3 个文本框）分组到一个元素中，然后将这些元素的组推送到列表框中吗？我正在尝试将俄罗斯社交网络 Vkontakte 的新闻阅读器变成 Windwos Phone 7。

每条新闻都有图像、文本和其他一些元数据。所以我想将所有这些信息分组到一个控件中并在列表框中使用它。我试图将一个网格（它有一个图像和两个文本框）推送到列表框中，但它会抛出 XamlParseException。另外，我需要从代码中获取这些文本框和图像的内容。在网格中我可以使用

```
<Grid.Resources>
    <src:Customers x:Key="customers"/>
</Grid.Resources> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:56:43.790

这是您需要的：

*   模型的集合（`ObservableCollection<T>`推荐）（`News`在您的情况下）。
*   一种`ListBox`
*   一种`DataTemplate`

例子：

XAML：

```
<ListBox Name="ListBox1">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Grid>
                ...
                <Image Source="{Binding ImagePropertyInModel}" ... />
                <TextBlock Text="{Binding TextPropertyInModel}" ... />
                ...
            </Grid>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

后面的代码：

```
ListBox1.ItemsSource = <collection of models>; 
```

您可以使用( ) 或您可能已经拥有的 a 来代替`<Grid>`in 。`<DataTemplate>``Custom Control``Templated Control``User Control`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:56:01.667

您可以使用要使用的控件创建 UserControl。使用您的 ListBox，您可以执行以下操作：

```
<ListBox ItemsSource="{Binding Path=YourItemsSource}">
    <ListBox.ItemTemplate>
      <DataTemplate>
        <my:MyUserControl DataContext="{Binding}"/>
      </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

作为 ListBox 的 ItemsSource，您可以使用新闻的 ObservableCollection，并通过`DataContext="{Binding}"`您可以绑定到 UserControl 中的新闻属性，例如：

```
<UserControl...>
    <Image Source="{Binding Path=photoAttachment}"/>
</UserControl> 
```

# javascript - 键位未触发

> ID：13611970
> 
> 赞同：0
> 
> 时间：2012-11-28T18:29:36.100
> 
> 标签：javascript, jquery, keyup

我一直在使用 jQuery 的 Keyup 方法，但它似乎对我不起作用。我在 Jfiddle 上创建了这个，果然它在那里工作。但是，当将其上传到网站或在本地运行时，它不起作用。我在这里做错了什么？

```
<html>
  <head>
    <title>Untitled Document</title>
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    <script>
      $('#TAcomments').keyup(function() {
        var textCount = $(this).val().length;
        if(textCount <= 10) {
          $('#TAcomments').stop().animate({ fontSize : '22px' });
        }
        if(textCount > 10) {
          $('#TAcomments').stop().animate({ fontSize : '16px' });
        }
        if(textCount > 20) {
          $('#TAcomments').stop().animate({ fontSize : '14px' });
        }
        if(textCount > 30) {
          $('#TAcomments').stop().animate({ fontSize : '10px' });
        }
      });
    </script>
  </head>
  <body>
    <textarea id="TAcomments" style="width: 400px; height: 300px; font-size: 22px;"></textarea>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:33:16.113

您需要等到文件准备好。

```
$(document).ready(function(){
    $('#TAcomments').keyup(function() {
        var textCount = $(this).val().length;
        if(textCount <= 10) {
            $('#TAcomments').stop().animate({ fontSize : '22px' }); 
        }
        if(textCount > 10) {
           $('#TAcomments').stop().animate({ fontSize : '16px' });               
        }
        if(textCount > 20) {
           $('#TAcomments').stop().animate({ fontSize : '14px' });   
        }
        if(textCount > 30) {
           $('#TAcomments').stop().animate({ fontSize : '10px' });   
        }
    });
}); 
```

jsfiddle 默认在 onload 事件之后运行代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:33:28.277

您需要将代码包装在脚本中`$(function () { /* ... */ });` 您可以看到代码在运行时在[这里](http://jsfiddle.net/vRrjH/1)`onDomReady`工作。

# regex - 如何grep文件中的URL？

> ID：13611973
> 
> 赞同：9
> 
> 时间：2012-11-28T18:29:49.107
> 
> 标签：regex, grep

例如，我有一个包含 img URL 的巨大 HTML 文件：http: [//ex.example.com/hIh39j+ud9wr4/Uusfh.jpeg](http://ex.example.com/hIh39j+ud9wr4/Uusfh.jpeg)

我想获取这个 URL，假设它是整个文件中*唯一的 url。*

```
cat file.html | grep -o 'http://ex[a-zA-Z.-]*/[a-zA-Z.-]*/[a-zA-Z.,-]*' 
```

**仅**当 URL 没有加号时才有效。

我如何也为 + 符号工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T18:38:36.060

你错过了字符类`0-9` *（也无用的猫）*：

```
grep -o 'http://ex[a-zA-Z.-]*/[a-zA-Z0-9+-]*/[a-zA-Z0-9.,-+]*' file.html 
```

略有改进，`-i`用于不区分大小写，仅匹配图像`.jpg`或`.jpeg`.

```
grep -io 'http://ex[a-z.-]*/[a-z0-9+-]*/[a-z0-9.,-+]*[.jpe?g]' file.html 
```

或者只是：

```
grep -io 'http://ex.example.*[.jpe?g]' file.html 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T18:48:59.033

以下修复***了此特定情况***[的正则表达式](https://stackoverflow.com/tags/regex/info) （包括数字和加号）：

 *```
http://ex[a-zA-Z.-]*/[a-zA-Z0-9.+-]*/[a-zA-Z0-9.+-]* 
```

## 示范：

```
echo "For example, I have a huge HTML file that contains img URL: http://ex.example.com/hIh39j+ud9wr4/Uusfh.jpeg" 
```

我想获取这个 URL，假设它是整个文件中唯一的 url。

```
cat file.html | grep -o 'http://ex[a-zA-Z.-]*/[a-zA-Z.-]*/[a-zA-Z.,-]*' 
```

仅当 URL 没有加号时才有效。我如何也为 + 符号工作？

```
cat file.html| grep -o 'http://ex[a-zA-Z.-]*/[a-zA-Z0-9.+-]*/[a-zA-Z0-9.+-]*' 
```

输出：

```
http://ex.example.com/hIh39j+ud9wr4/Uusfh.jpeg 
```

这**不会**提取所有有效的 URL。这个网站上有*很多*关于 URL 匹配的其他答案。*

# java - JSwing 使用 net bens 使表单更漂亮

> ID：13611975
> 
> 赞同：0
> 
> 时间：2012-11-28T18:29:51.390
> 
> 标签：java, jtable, jframe

如何使表格看起来更漂亮，例如左侧的颜色是黑色但渐变回来..如何使 jpanel 渐变黑色的颜色..这是一个图像（在 jpanel 后面选择）？..同样如果我选择一个表如何像这样使该表的行颜色变黑..

![在此处输入图像描述](../Images/9173a183df2d66a54b6aad43e996a072.png)

其次，我怎样才能使应用程序的顶部栏看起来像这样......使用 jFrame..？

![在此处输入图像描述](../Images/5ecde92b8722a95ac33d20c29d002507.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:44:03.600

“让它更漂亮”真的很模糊，你不会得到一个好的答案。您需要向我们展示您的代码以帮助我们帮助您。如果你只是想改变你的 GUI 的外观，你可以改变外观。只需将其添加到您的代码中：

```
UIManager.setLookAndFeel("<name of the look and feel>"); 
```

只需使用谷歌找到你喜欢的东西。[这](http://geeknizer.com/best-java-swing-look-and-feel-themes-professional-casual-top-10/;)是此类外观和感觉的一小部分。有关详细信息，请参阅 Java 文档等。

# ios - 为 iPhone 构建 FFTW 3.3.3

> ID：13611976
> 
> 赞同：1
> 
> 时间：2012-11-28T18:29:58.063
> 
> 标签：ios, xcode, fftw

我想为 iPhone 构建 FFTW 库并使用这个脚本：

```
#!/bin/bash

export SDKVER="6.0"
export DEVROOT="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer"
export SDKROOT="$DEVROOT/SDKs/iPhoneOS$SDKVER.sdk"

export CFLAGS="$CPPFLAGS -isysroot $SDKROOT"
export LDFLAGS="$CFLAGS -Wl,-syslibroot $SDKROOT"

export CC=$DEVROOT/usr/bin/arm-apple-darwin10-llvm-gcc-4.2
export LD=$DEVROOT/usr/bin/ld

export PREFIX="$HOME/Desktop/mylib"

./configure --prefix="$PREFIX" --enable-single --host=arm-apple-darwin
make
make install 
```

然后我在我的项目的 Xcode 中导入 libfftw3f.a 和 fftw3.h，在 Build Phases 中链接这个库。

当我尝试编译时，Xcode 给了我这个警告：

```
ld: warning: ignoring file /Users/Adem/Desktop/mylib/lib/libfftw3f.a, file was built for archive which is not the architecture being linked (armv7s): /Users/Adem/Desktop/mylib/lib/libfftw3f.a 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-04T22:44:27.967

尝试添加`-arch armv7`到您的 CFLAGS（因此也添加到您的 LDFLAGS）

# java - Android / eclipse：布局内容可以缩放到屏幕大小吗？

> ID：13611983
> 
> 赞同：0
> 
> 时间：2012-11-28T18:30:20.387
> 
> 标签：java, android, eclipse

我正在发现 android 编程，我创建了一个简单的层，我正在绘制一些这样的精灵：

```
Matrix matrix = new Matrix();
matrix.setTranslate(xPos, yPos);
canvas.drawBitmap(mysprite, matrix, null); 
```

但是根据屏幕大小，一切都不会像它那样缩放。我必须使用屏幕尺寸来缩放自己，还是有一个参数可以自动进行。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:41:02.060

据我所知，没有办法自动缩放你的精灵，你能得到的最接近的是`dp`，首先我不知道是否可以`dp`在游戏引擎中使用它来调整大小，其次这不是最好的方法（因为我发现它根本没有足够的变化）来支持多种屏幕尺寸。

然而，这将是一个很好的起点，因为它涵盖了支持多种屏幕尺寸的不同简单（ish）方法 - [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# javascript - installLibrary，将所有函数移动到全局命名空间

> ID：13611985
> 
> 赞同：0
> 
> 时间：2012-11-28T18:30:33.413
> 
> 标签：javascript

我正在编写一个库，我使用“lib.someFunction();”调用所有函数 或“lib.someVariable;”。我知道我不应该污染全局命名空间，但我想给我图书馆的用户这个选项。我听说有些库有一个“选项”，比如“installLibrary();” 将类中的所有函数和变量移动到全局命名空间。

这样，只有用户更喜欢这样才能调用“someVariable”；或“someFunction();” 直接地。

不过，我的问题是如何编写这样的函数。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:06:41.790

除了不使用库污染全局空间的明显原因之外，我相信您可以执行以下操作。

**注意：**我写这个是为了看看我们是否在浏览器或节点中。您应该能够在浏览器中引用“window”，在节点中为全局命名空间引用“global”。

```
var scope = (typeof window !== 'undefined' ? window : global);
scope.someVariable = true;
scope.someFunction = function() { };

// Essentially, this is the same as:
window.someFunction = function() { };
// or
global.someFunction = function() { }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T20:06:12.183

您可以执行以下操作：

```
function Library() { 
    this.var = 5; 
    this.otherVar = 4; 
    this.cool = function(x) {
        return x + this.otherVar;
    }
} 
var library = new Library();

(function (lib, context) {
    for (var prop in lib) {
        if (lib.hasOwnProperty(prop) && prop) {
            if (typeof lib[prop] == "function") {
                context[prop] = function() {
                    return lib[prop].apply(lib, arguments);
                }
            } else {
               context[prop] = lib[prop]; 
            }
        }
    }
}(library, this)); 
```

但要注意在这里使用除函数以外的任何东西。如果您这样做并尝试调整全局/窗口命名空间上的参数，它们将不会被带回您的库函数，并且可能无法获得您想要的行为。例如：

```
library.cool(3);  // 7
cool(3);          // 7
otherVar = 10;
library.cool(3);  // 7
cool(3);          // 7  Still?
library.otherVar = 10;
library.cool(3);  // 13
cool(3);          // 13  Finally! 
```

没有此限制的替代方法是将您的库构造函数应用于全局/窗口对象：

```
Library.call(this); 
```

这样做的问题在于，您不仅会使用公共 API 污染全局范围，而且还会使用沿途存储在本地闭包中的任何内容。这让我觉得太重了。

如果您的库使用类似显示模块模式并且只公开函数，那么我认为第一个非常简单。但正如其他人所说，这可能并不明智。最多，我会为用户提供这个选项，但要警告不要这样做。

# javascript - Internet Explorer 10 画布剪辑意外行为

> ID：13611987
> 
> 赞同：5
> 
> 时间：2012-11-28T18:30:45.997
> 
> 标签：javascript, html, canvas, clipping

在一个 html5 画布应用程序中，我使用剪辑来重绘画布的损坏部分，如下所示：

```
ctx.beginPath();
ctx.rect(30, 30, 100, 100);
ctx.rect(100, 100, 100, 100);
ctx.clip();
ctx.clearRect(0, 0, 600, 400); 
```

我还创建了一个说明问题的[小提琴。](http://jsfiddle.net/22NYb/)在除 IE10 之外的所有支持浏览器上，它都会显示两个黑色重叠矩形。

现在的问题是这是一个 IE10 错误，还是因为它更紧密地遵守标准，它实际上是预期的行为，只是运气好，它可以在所有其他浏览器中工作。如果是这样，这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:12:36.393

这个明显的 IE10 错误的一种可能的规避方法是逐个清除矩形。一个优点：它更快，因为它不需要设置剪辑

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T21:01:45.710

你需要调用 ctx.fill(); 在最后

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T06:21:22.983

这是 IE10 中的一个错误。我在这里发布了一个类似的问题：

[https://connect.microsoft.com/IE/feedback/details/782736/canvas-clearrect-fails-with-non-rectangular-yet-simple-clipping-paths](https://connect.microsoft.com/IE/feedback/details/782736/canvas-clearrect-fails-with-non-rectangular-yet-simple-clipping-paths)

MS 说：“是的，它是一个错误。等待几年我们来修复它。” 对 MS 来说太糟糕了，所有其他浏览器现在都可以工作。

# jquery - 铬零中的jQuery高度

> ID：13611988
> 
> 赞同：2
> 
> 时间：2012-11-28T18:30:46.500
> 
> 标签：jquery

我将 capty 附加到图像上，我愿意

```
$(document).ready(function(){
$('.shop_banner img').capty({height:150});
}); 
```

在 chrome 中，当我调试 capty 代码时`alert($this.height())`为零，所以包装器隐藏图像。我知道某些浏览器希望图像完全加载，但如果我使用`ready`并不意味着它在页面完全加载后执行？我能做些什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T18:32:14.087

不，[加载](http://api.jquery.com/load-event/)和准备不是一回事。

你可以做

```
$(window).load(function(){
    $('.shop_banner img').capty({height:150});
}); 
```

[ready](http://api.jquery.com/ready/)会在 DOM 准备好后立即调用您的函数，这并不意味着图像已加载。

从文档中：

> 虽然 JavaScript 在页面呈现时提供了用于执行代码的加载事件，但在完全接收到所有资产（例如图像）之前，不会触发此事件。在大多数情况下，只要完全构建了 DOM 层次结构，就可以运行脚本。传递给 .ready() 的处理程序保证在 DOM 准备好后执行，因此这通常是附加所有其他事件处理程序和运行其他 jQuery 代码的最佳位置。当使用依赖 CSS 样式属性值的脚本时，在引用脚本之前引用外部样式表或嵌入样式元素很重要。
> 
> 如果代码依赖于加载的资源（例如，如果需要图像的尺寸），则应将代码放置在加载事件的处理程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:36:13.950

在对图像进行任何特殊处理之前，我通常会在图像上使用加载功能。

```
$(function() {
    $('.shop_banner img').load(function() {
        $(this).capty({height:150});
    });
}); 
```

# validation - 选择字段上带有消息的验证引擎

> ID：13611989
> 
> 赞同：-1
> 
> 时间：2012-11-28T18:30:49.727
> 
> 标签：validation, requiredfieldvalidator, jquery-validation-engine

我在这里有一个使用验证引擎的表单，我想拥有它，这样如果有人点击“没有经验”，就会出现一条消息，说“你必须至少有 1 年的经验”并且他们不能继续如果他们有 1 年，请提交表格。

[https://web.archive.org/web/20121129085036/http://www.barr-nunn.com/careers/form.php](https://web.archive.org/web/20121129085036/http://www.barr-nunn.com/careers/form.php)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T09:33:35.447

通过使用 Jquery 验证引擎：

```
 <select  id="experience" class="validate[required]">
                <option >No Experience</option>
                <option >Below 1 yr</option>
                <option >1 yr</option>
                <option >Above 1 yr</option>
       </select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T09:42:47.957

您可以通过使用 on change 功能来实现这一点，

前任 ：

```
$("#Selectbox").change(function(){
   var selecVal = $(this).val();
    if( selecVal == 'No Experience') {
         $('#Selectbox').attr("class","validate[required]");
     } 
```

});

如果你想传递自定义消息，你也这样做，参考这个

> [http://posabsolute.github.io/jQuery-Validation-Engine/](http://posabsolute.github.io/jQuery-Validation-Engine/)

# iphone - Phonegap Facebook 登录没有返回到我的 iPhone 应用程序

> ID：13611992
> 
> 赞同：2
> 
> 时间：2012-11-28T18:30:50.977
> 
> 标签：iphone, facebook, cordova

我正在尝试将 FacebookSDK-3.1.1 集成到我的 iPhone 应用程序中（使用 Phonegap 2.1.0）。登录后我无法返回我的应用程序。

我的目标是使用 iPhone 应用程序在 Facebook 上分享。

下面我提供了我的**[PROJECTNAME]-Info.plist**文件和**Cordova.plist**文件。

任何帮助将不胜感激。

谢谢

**[项目名称]-Info.plist**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>CFBundleDevelopmentRegion</key>
    <string>English</string>
    <key>CFBundleDisplayName</key>
    <string>${PRODUCT_NAME}</string>
    <key>CFBundleExecutable</key>
    <string>${EXECUTABLE_NAME}</string>
    <key>CFBundleIconFile</key>
    <string>icon.png</string>
    <key>CFBundleIcons</key>
    <dict>
        <key>CFBundlePrimaryIcon</key>
        <dict>
            <key>CFBundleIconFiles</key>
            <array>
                <string>icon.png</string>
                <string>icon@2x.png</string>
                <string>icon-72.png</string>
                <string>icon-72@2x.png</string>
            </array>
            <key>UIPrerenderedIcon</key>
            <false/>
        </dict>
    </dict>
    <key>CFBundleIdentifier</key>
    <string>com.Kwazzi.phonegap</string>
    <key>CFBundleInfoDictionaryVersion</key>
    <string>6.0</string>
    <key>CFBundleName</key>
    <string>${PRODUCT_NAME}</string>
    <key>CFBundlePackageType</key>
    <string>APPL</string>
    <key>CFBundleShortVersionString</key>
    <string>1.0</string>
    <key>CFBundleSignature</key>
    <string>????</string>
    <key>CFBundleVersion</key>
    <string>1.0</string>
    <key>LSRequiresIPhoneOS</key>
    <true/>
    <key>NSMainNibFile</key>
    <string></string>
    <key>NSMainNibFile~ipad</key>
    <string></string>
    <key>UISupportedInterfaceOrientations</key>
    <array>
        <string>UIInterfaceOrientationPortrait</string>
    </array>
    <key>UISupportedInterfaceOrientations~ipad</key>
    <array>
        <string>UIInterfaceOrientationPortrait</string>
        <string>UIInterfaceOrientationLandscapeLeft</string>
        <string>UIInterfaceOrientationPortraitUpsideDown</string>
        <string>UIInterfaceOrientationLandscapeRight</string>
    </array>
    <key>FacebookAppID</key>
    <string>xxxxxxxxxxxxxxx</string>
    <key>CFBundleURLTypes</key>
    <array>
        <dict>
            <key>CFBundleURLSchemes</key>
            <array>
                <string>fbxxxxxxxxxxxxxxx</string>
            </array>
        </dict>
    </array>
</dict>
</plist> 
```

**Cordova.plist**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>UIWebViewBounce</key>
    <true/>
    <key>TopActivityIndicator</key>
    <string>gray</string>
    <key>EnableLocation</key>
    <false/>
    <key>EnableViewportScale</key>
    <false/>
    <key>AutoHideSplashScreen</key>
    <true/>
    <key>ShowSplashScreenSpinner</key>
    <true/>
    <key>MediaPlaybackRequiresUserAction</key>
    <false/>
    <key>AllowInlineMediaPlayback</key>
    <false/>
    <key>OpenAllWhitelistURLsInWebView</key>
    <false/>
    <key>BackupWebStorage</key>
    <true/>
    <key>ExternalHosts</key>
    <array>
        <string>*</string>
    </array>
    <key>Plugins</key>
    <dict>
        <key>org.apache.cordova.facebook.Connect</key>
        <string>FacebookConnectPlugin</string>
        <key>Device</key>
        <string>CDVDevice</string>
        <key>Logger</key>
        <string>CDVLogger</string>
        <key>Compass</key>
        <string>CDVLocation</string>
        <key>Accelerometer</key>
        <string>CDVAccelerometer</string>
        <key>Camera</key>
        <string>CDVCamera</string>
        <key>NetworkStatus</key>
        <string>CDVConnection</string>
        <key>Contacts</key>
        <string>CDVContacts</string>
        <key>Debug Console</key>
        <string>CDVDebugConsole</string>
        <key>Echo</key>
        <string>CDVEcho</string>
        <key>File</key>
        <string>CDVFile</string>
        <key>FileTransfer</key>
        <string>CDVFileTransfer</string>
        <key>Geolocation</key>
        <string>CDVLocation</string>
        <key>Notification</key>
        <string>CDVNotification</string>
        <key>Media</key>
        <string>CDVSound</string>
        <key>Capture</key>
        <string>CDVCapture</string>
        <key>SplashScreen</key>
        <string>CDVSplashScreen</string>
        <key>Battery</key>
        <string>CDVBattery</string>
    </dict>
</dict>
</plist> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T08:47:12.917

您的`[PROJECTNAME]-Info.plist`. 你错过了“ **CFBundleURLName** ”。试试下面的代码，它会对你有所帮助。

```
<key>CFBundleURLTypes</key>
    <array>
        <dict>
            <key>CFBundleURLName</key>
            <string>com.facebook.phonegap.myscheme</string>
            <key>CFBundleURLSchemes</key>
            <array>
                <string>fbxxxxxxxxxxxxxxx</string>
            </array>
        </dict>
    </array> 
```

# php - 当我在我的 php 表单上单击提交时，登录页面显示为空白，并且没有向数据库提交日期

> ID：13611994
> 
> 赞同：1
> 
> 时间：2012-11-28T18:30:58.560
> 
> 标签：php, sql

正如标题中提到的，当我在我的 php 表单上单击提交时，登录页面是空白的，并且它没有向数据库提交日期。它以前有效（我一定做错了什么）并且实际上偶尔（极少）有效，尽管我不知道为什么。以下是表单的登录页面。下面是表格本身。我对此很陌生，因此感谢任何帮助/评论。

**表单登陆页面**

```
 <?php
    session_start();
    if(isset($_SESSION['myusername']))
    if ($_POST['title'] == '' or $_POST['story'] == '' or $_POST['city'] == '' or $_POST['province'] == '' ) {
    $_SESSION['error1'] = "All fields required!";
    header("Location: debate.php");
    print "issue";
    }
    else {
    include 'config.php';
    if (get_magic_quotes_gpc())
    {
    function stripslashes_deep($value)
    {
    $value = is_array($value)?
    array_map('stripslashes_deep',$value):
    stripslashes($value);
    return $value;
    }

    $_POST = array_map('stripslashes_deep',$_POST);
    $_GET = array_map('stripslashes_deep',$_GET);
    $_COOKIE = array_map('stripslashes_deep',$_COOKIE);
    $_REQUEST = array_map('stripslashes_deep',$_REQUEST);
    }
    $name = mysql_real_escape_string($_POST['title']);
    $content = mysql_real_escape_string($_POST['story']);
    $city = mysql_real_escape_string($_POST['city']);
    $province = mysql_real_escape_string($_POST['province']);
    $query = "INSERT INTO comments(commentusername, commentcontent, status, debateid, city, province) VALUES ('.$name.','.$content.','0','1','.$city.','.$province.')";
    $result=mysql_query($query,$conn);
    $_SESSION['error1'] = "Thank you for your submission!";
    header("Location: debate.php");
    print "issue";
    mysql_close();
    }?> 
```

**提交表格**

提交表单编码。

```
<!-- comment form -->
<div style="position:absolute;left:600px;top:750px;border-style:solid;border-color:#970033;background-color:black;border-width:4px;">
<div align="center"><strong><font color="white"><b>Join the debate</b></font></strong></div>
<form action="cposting.php" method="post">
    <TABLE WIDTH="60%">
     <tr>
      <td>Name:<input type="text" name="title" SIZE="35"> </td>
 <tr>
      <td>City:<br><input type="text" name="city" SIZE="35"> </td>
     </tr>
<tr>
      <td>Province:<input type="text" name="province" SIZE="35"> </td>
     </tr>
     <tr><td>Comment<br></td></tr>
       <tr width="80%">

      <td><TEXTAREA NAME="story" ROWS="5" COLS="30"></TEXTAREA></td>
     </tr>
 <td><input type="submit" value="Post"></td></tr>
</table>
</form> 
```

我真的很感谢你的帮助。谢谢！

下面的代码用于管理员审批页面。这是我第一次发布评论的地方（如果我让浏览器保持打开状态，还有后续的帖子），但不要在此之后发布。

```
<?php
session_start();
if(isset($_SESSION['myusername'])) 
if($_SESSION['myusername'] == "Bobert") {
?>
<html>
<title>Discourse Magazine</title>
<head>
</head>
<body background="" style="background: url() no-repeat;  background-size: 100%;">

<?php
include 'config.php';

print '<h4>'.'Welcome back:'.'&nbsp'.$_SESSION['myusername'].'</h4>';
?>
<div style="float:left;border-style:solid;border-width:2px;"><img style="z-index:1;height:200px;" src="/favicon.png" alt="" /></div><br><br><br><br><br><br><br><br><br><br><br><br><br>
Approving Comments (listed oldest to newest)
<?php
if (get_magic_quotes_gpc()) {
    $process = array(&$_GET, &$_POST, &$_COOKIE, &$_REQUEST);
    while (list($key, $val) = each($process)) {
        foreach ($val as $k => $v) {
            unset($process[$key][$k]);
            if (is_array($v)) {
                $process[$key][stripslashes($k)] = $v;
                $process[] = &$process[$key][stripslashes($k)];
            } else {
                $process[$key][stripslashes($k)] = stripslashes($v);
            }
        }
    }
    unset($process);
}

if ($conn) {

$SQL = "SELECT * FROM comments where status = '0' ORDER BY commentid";
$result = mysql_query($SQL,$conn) OR die(mysql_error());
while ($row = mysql_fetch_array($result)) {

$rows=mysql_num_rows($result);
$capproveidid = $row['commentid'];
$cdeleteid = $row['commentid'];
print '&nbsp';
print '<div style="background: url() no-repeat;overflow:auto;padding-top:3px;border-style:solid;border-width:5px;width:800px;">';
print '<p style="padding-left:5px;">'.'<u>'.'<strong>'. $row['commentusername'].'</strong>'.'</u>' .'<br>'. $row['commentcontent'] .'<br>'.'<br>'.'</p>';
?>

<form action="approve.php" method="post">
<input type="hidden" name="capproveidid" value="<?php echo $capproveidid;?>"/>
<input type="submit" value="Approve">
</form>
<form action="cdelete.php" method="post">
<input type="hidden" name="cdeleteid" value="<?php echo $cdeleteid;?>"/>
<input type="submit" value="Delete">
</form>

<?php
print '</div>';

}
}
else {
print "Database NOT Found ";
}
}
else{
header('Location: debate.php');
}
ob_end_flush();
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:36:07.217

您很可能没有正确格式化您的`INSERT`查询。通过在整个查询中使用双引号，您实际上是在发送`...'.something.'...`.

您可以这样做：

```
$query = "INSERT INTO comments(commentusername, commentcontent, status, debateid, city, province) VALUES ('$name','$content','0','1','$city','$province')"; 
```

或这个：

```
$query = "INSERT INTO comments(commentusername, commentcontent, status, debateid, city, province) VALUES ('" . $name . "','" . $content . "','0','1','" . $city . "','" . $province . "')"; 
```

无论哪种方式，您都可以通过`... or die(mysql_error());`在`mysql_query`. 此外，您可以只`echo $query;`查看正在发送的内容。

最后，您应该停止使用`mysql_`函数，因为它们已[被弃用](http://www.deprecatedphp.com/mysql)和使用`mysqli_`，或者`PDO`允许准备好的语句并防止 SQL 注入。

# qt - qt组合框滚动条行为

> ID：13611998
> 
> 赞同：1
> 
> 时间：2012-11-28T18:31:12.873
> 
> 标签：qt, scrollbar, qcombobox

有什么办法可以改变 qcombobox 内滚动条的行为吗？行为是：滚动条的位置对应于数据集中记录的指针位置。在更改滚动条的位置时，会在组合框中添加和删除记录。因此可以浏览数据集（约 1000000 条记录），但无需将所有记录添加到组合框中（1000 条记录后速度非常慢）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:50:01.753

执行此操作的标准 Qt 方法是使用[QAbstractItemModel](http://doc.qt.digia.com/qt/qabstractitemmodel.html)填充可见的视图部分。

也就是说，我不确定您是否从用户界面的角度充分考虑了包含 100 万个项目的组合框的含义。这么多项目和您的用户将很难找到他们正在寻找的东西。为了使它可用，您可能需要一种我认为 QComboBox 不提供的方式对条目进行排序或分类。一定会有更好的办法。不过，这个问题可能更适合[http://ux.stackexchange.com](http://ux.stackexchange.com)上的人。