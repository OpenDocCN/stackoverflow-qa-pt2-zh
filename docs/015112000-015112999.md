# StackOverflow 问答 15112000-15112999

# mysql - 在 mysql 数据库中查找行和时间戳之间的交集

> ID：15112004
> 
> 赞同：6
> 
> 时间：2013-02-27T12:19:56.737
> 
> 标签：mysql, sql, sqlite, postgresql, timestamp

我有一张表，其中列出了某些对象的事件。

有两个事件：“移动”和“加载”。它们可以开始和结束，并且这些事件会在它们发生时用时间戳列出。

现在我想计算以下三个数字：

*   发生移动的时间总和（小提琴中的值：700）
*   负载发生时的时间总和（小提琴中的值：630）
*   发生移动和负载的时间总和（小提琴中的值：611）

我在这里为这个问题创建了一个 sqlfiddle：

[http://sqlfiddle.com/#!2/be512](http://sqlfiddle.com/#!2/be512)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:09:10.740

试试这个

对于负载答案将是 630 而不是 690

对于第一种和第二种情况

```
SELect max(timestamp) - min(timestamp), LEFT(event, LOCATE(' ', event)) 
FROM table1 
group by id, LEFT(event, LOCATE(' ', event)); 
```

第三种情况

```
SELect max(timestamp) - min(timestamp), id
FROM table1 
group by id; 
```

[小提琴](http://sqlfiddle.com/#!2/b9146/67)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:11:26.867

`end`前两列计算对应/`start`事件之间的差异。（求和是可交换的，所以我们不需要实际匹配对应的事件。）

第三列搜索`movement start`前一个`load`事件是事件的`load start`事件，以及`movement end`后`load`一个事件是事件的`load end`事件。

```
SELECT (SELECT SUM(timestamp)
        FROM Table1
        WHERE event = 'movement end') -
       (SELECT SUM(timestamp)
        FROM Table1
        WHERE event = 'movement start') AS all_movement,

       (SELECT SUM(timestamp)
        FROM Table1
        WHERE event = 'load end') -
       (SELECT SUM(timestamp)
        FROM Table1
        WHERE event = 'load start') AS all_load,

       (SELECT SUM(timestamp)
        FROM Table1 a
        WHERE event = 'movement end' AND
              (SELECT event
               FROM Table1 b
               WHERE timestamp = (SELECT min(timestamp)
                                  FROM Table1 c
                                  WHERE c.timestamp >= a.timestamp
                                    AND c.event LIKE 'load %')
              ) = 'load end') -
       (SELECT SUM(timestamp)
        FROM Table1 a
        WHERE event = 'movement start' AND
              (SELECT event
               FROM Table1 b
               WHERE timestamp = (SELECT max(timestamp)
                                  FROM Table1 c
                                  WHERE c.timestamp <= a.timestamp
                                    AND c.event LIKE 'load %')
              ) = 'load start') AS load_movement; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T13:15:14.210

这是获取开始和结束之间时间的查询：

```
select sum(a.timestamp-b.timestamp) from Table1 a join Table1 b on a.rowid-b.rowid=1 and a.rowid%2=0 and a.event='movement end'; 
```

同样，在结束和开始之间：

```
select sum(a.timestamp-b.timestamp) from Table1 a join Table1 b on a.rowid-b.rowid=1 and a.rowid%2=1 and a.event='movement start'; 
```

# validation - Wicket：条件验证器

> ID：15112022
> 
> 赞同：1
> 
> 时间：2013-02-27T12:21:02.610
> 
> 标签：validation, wicket

我有一个表单，在某些组合中需要输入，并且还取决于单击了哪个提交按钮。

例如字段 A、B 和 C，以及提交按钮 M、N。有效组合为 M：A + B N：A + B + C N：A N：C

所以不需要任何输入。

目前我使用 if( ... ) in 解决它`onSubmit()`，但我想知道：我可以将这些检查移动到带有回调的每个组件验证器，该回调将（拒绝）批准某些组合？

*更新：*

```
_______________________

  User name:  ______
  Password:   ______

  [ Log in button ]

  Email:      ______

  [ Register / reset password button ]
_______________________ 
```

登录需要用户名和密码。注册需要所有，在这种情况下它会注册，或者只是邮件，或者只是用户名，在这种情况下它会发送一个通过重置挑战邮件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T11:46:06.123

查看[https://cwiki.apache.org/WICKET/conditional-validation.html](https://cwiki.apache.org/WICKET/conditional-validation.html)上的示例，它应该可以解决您的问题：

```
Button submit = new Button("submit") {
    public void onSubmit() {
        // handle form submission
    }
}
form.add(submit);

TextField foo = new TextField("foo") {
    public boolean isRequired() {
        Form form = (Form) findParent(Form.class);
        return form.getRootForm().findSubmittingButton() == button;
    }
}
form.add(foo); 
```

如果您需要任何进一步的帮助或者它不起作用，请告诉我。干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:50:04.837

我建议您将 AjaxFormComponentUpdatingBehaviors 添加到您的组件中，然后通过

```
formComponent.setEnabled(false);
target.add(formComponent); 
```

在验证中将不考虑禁用的组件。另一个好处是，用户总是可以立即获得有关允许组合的反馈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T00:24:28.923

假设表单如下所示：

```
TextField user = new TextField();
user.setRequired(true);
TextField pass = new TextField();
TextField email = new TextField();
Button login = new Button();
Button register = new Button(); 
```

我会尝试像这样创建一个 FormValidator 类：

```
public class MyValidator extends AbstractFormValidator
{
   private FormComponent[3] fields;

   public MyValidtor(TextField field1, TextField, field2, Button button)
   {
      fields = {field1, field2, button };
   }

   //getDependentFormComponents returns fields;

   public void validate(Form form)
   {
      if ( form.getRootForm().findSubmittingButton() == button)
      {
         //do field1 & field2 required checks here
      } 
   }
} 
```

然后只需添加`MyValidator`到您的表单

```
form.add(new MyValidator(user, pass,  login));
form.add(new MyValidator(user, email, register)); 
```

# java - 如何在java中转换默认文件路径？

> ID：15112023
> 
> 赞同：0
> 
> 时间：2013-02-27T12:21:03.083
> 
> 标签：java, file

我正在尝试从文件中获取文件路径并将文件路径保存在文件中并回调它，以作为邮件附件发送。

```
File file = fc.getSelectedFile();
String source = file.getAbsolutePath();
println(source); 
```

但输出将是这样的

```
C:\Documents and Settings\TheFile.txt 
```

但我正在寻找一种方法来获取来源

```
C:\\Documents and Settings\\TheFile.txt 
```

有什么方法可以转换吗？感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:25:21.313

试试这个：

```
File f = [your file]
String filename = f.getAbsolutePath().replaceAll("\\", "\\\\"); 
```

将“文件名”写回文件，您将用双斜杠替换单斜杠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:25:10.557

这是一种方法：

```
String source = file.getAbsolutePath();
String sourceConverted = source.replaceAll("\\", "\\\\"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T12:25:13.503

更简单的方法应该是编写一个函数

```
String getPath(){
File file = fc.getSelectedFile();
String source = file.getAbsolutePath();
source .replace("\\","\\\\"); 
return source;
} 
```

# jquery - 表单字段的jQuery验证

> ID：15112027
> 
> 赞同：0
> 
> 时间：2013-02-27T12:21:14.797
> 
> 标签：jquery, forms, jquery-validate

有时我只是希望我不是网络开发人员。这是那些时刻之一。我有一个表格.. 我需要验证这个字段，例如邮政编码、电话号码等数字字段。

现在。这是网址 [http://bit.ly/YXjsdb](http://bit.ly/YXjsdb)

脚步：

> *   转到网址[http://bit.ly/YXjsdb](http://bit.ly/YXjsdb)
> *   将任何产品添加到购物篮
> *   去篮子
> *   在客人结帐字段中输入任何地址
> *   尝试通过单击添加地址字段来添加地址
> *   应该会弹出一个弹出式地址簿

. 我需要字段**“邮政编码”和“电话号码”**只是数字字段。那里输入的任何其他内容都应直接向“formError”位置发送错误消息。

请提供任何帮助。我真的很困惑如何做到这一点。它似乎正在使用 jQuery 验证。但我只是困惑。也许我明天醒来，头脑清醒地看着这个，马上找到解决办法。任何人的帮助？

```
var ValidatingForm = new Class({
    Implements:[EventProxy, Options],
    options: {
        submit: 'defaultSubmit'
    },
    setupForm: function(selector, options) {

        this.options.submit = $.proxy(this, 'defaultSubmit');
        if (options) {
            this.setOptions(options);
        }
        this.form = jQuery(selector);
        this.el = selector;
        this.form.on('submit', function(event) {
            event.preventDefault();
        });

        this.form.find('.formError').val(' ');
        $(this.el + ' input').addClass('text ui-widget-content');
        $(this.el + ' select').addClass('ui-widget-content');
        $(this.el + ' button').addClass('ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only');
        $(this.el + ' input:checkbox').addClass('ui-widget-content');

        var self = this;
        this.form.validate({
            submitHandler: this.options.submit,
            showErrors: function(errorMap, errorList) {
                if (this.errorList.length) {
                    self.showFormError('Fields marked * are required');
                }
                for ( var i = 0; this.errorList[i]; i++ ) {
                    var error = this.errorList[i];
                    $(error.element).addClass("ui-state-highlight");
                }
                if (this.settings.unhighlight) {
                    for ( var i = 0, elements = this.validElements(); elements[i]; i++ ) {
                        this.settings.unhighlight.call( this, elements[i], this.settings.errorClass, this.settings.validClass );
                    }
                }
            },
            highlight: function(element, errorClass) {
                $(element).addClass("ui-state-highlight");
            },
            unhighlight: function(input) {
                $(input).removeClass("ui-state-highlight");
            }
        });
    },
    resetForm: function() {
        this.form.find('.formError').empty();
        this.form.find('.formError').append('&nbsp;');
        this.form.validate().resetForm();
        $(this.el + ' input').removeClass('ui-state-highlight');
        $(this.el + ' select').removeClass('ui-state-highlight');
    },
    showFormError: function(errorMessage) {
        this.form.find('.formError').empty();
        this.form.find('.formError').append(errorMessage);
    },
    defaultSubmit: function(form) {
        form.submit();
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:23:38.477

使用以下代码怎么样：只需将代码用作**validator.validateNumbers(number1)**

> var 验证器 = 新函数 () {
> 
> ```
> this.validatePassowrds = function (pwd, cpwd) {
>     if (pwd == cpwd) {
>         return true;
>     } else {
>         return false;
>     }
> };
> 
> this.validateNumbers = function (num) {
>     var pattern = /^[0-9]+$/g;
>     if (num == num.match(pattern))
>         return true;
>     else
>         return false;
> };
> 
> this.validateAlphabets = function (alp) {
>     var pattern = /^[a-zA-Z]+$/g;
>     if (alp == alp.match(pattern))
>         return true;
>     else
>         return false;
> };
> 
> this.validateEmail = function (email) {
>     var pattern = /^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/;
>     if (email.match(pattern) != null && email.match(pattern) != "") {
>         return true;
>     } else {
>         return false;
>     }
> };
> 
> this.validateNonEmpty = function (field) {
>     if (field.length > 0)
>         return true;
>     else
>         return false;
> }; 
> ```
> 
> }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:23:57.653

添加`pattern="^[0-9]+$"`到您的表单字段。请记住，如果您有国际客户，他们的邮政编码中有字母（例如荷兰语是 0000 AA 格式）

可以使用荷兰语验证邮政编码`^[0-9]{4}[ ][A-Z]{2}$`

当国家/地区选择字段更改时，我有这个 javascript：

`<select onchange="if(this.selectedIndex != 0){$('#postcode').attr('pattern','^.+$');}else{$('#postcode').attr('pattern','^[0-9]{4}[ ][A-Z]{2}$');}">`

在您的标题字段中，您`<input type="text" pattern="^[0-9]+$" name="postcode" id="postcode" title="The postal code may only contain numbers">`可以放置​​他们得到的错误消息，以查看他们是否尝试提交并且该条目是“非法的”

# batch-file - 这个批处理脚本有什么问题？我只得到一个无穷无尽的清单

> ID：15112028
> 
> 赞同：1
> 
> 时间：2013-02-27T12:21:15.157
> 
> 标签：batch-file

以下情况：我有一个包含 140 个协议文件的文件夹，格式如下（我审查了其中一些）

```
 LÖSCHPROTOKOLL

HDShredder 3.2
licenses for
%Corporation%
%address%
%address%

Drive: %numbers and letters%
Controller: IDE #0
Kanal: Primary 
Gerät: Master   
LUN: N/A
serial number: %numbers and letters% 
Größe: 78165360 Sektoren (38166 MB)   

HDShredder gestartet am 2.01.2012 um 14:48:46
Verwendete Löschmethode: %deletion methode% (Standard)

Durchlauf 1 von 3 gestartet um 14:48:46
Lösche
Muster: FFFFFFFF
Durchlauf 2 von 3 gestartet um 15:02:34
Lösche
Muster: 00000000
Durchlauf 3 von 3 gestartet um 15:16:23
Lösche
Muster: 55555555
Beendet am 2.01.2012 um 15:30:12

END OF FILE 
```

然而，这些文件被命名为`SHRED001.LOG` `SHRED002.LOG`etc，我喜欢用序列号重命名它们。

这是我到目前为止尝试过的

```
@echo off
SETLOCAL ENABLEDELAYEDEXPANSION

echo test

for %%d in (C:\Protokolle\protokolle\SHRED*) do (
    for /F "skip=13 eol=; delims=?" %%i in (%%d) do (
      echo %%i >> C:\Protokolle\protokolle\liste.txt    
      echo %%i
    )
) 
```

完成后，它应该如上所述重命名文件（尚未实现）并收集外部文件中的所有数字`liste.txt`

但是当我开始批处理时，我得到的只是一个无穷无尽的文本文件，以一个序列号开头，所有文本文件的内容组合在一起。

希望有人有想法。问候 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T13:14:48.733

您的内部 for 循环`for /F "skip=13 eol=; delims=?" %%i in (%%d) do (`将遍历给出的文件中的*所有行*`%%d`，省略前 13 行（[参考](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/for.mspx?mfr=true)）。这就是为什么输出看起来像你描述的那样。如果我理解正确，您只想解析以字符串开头的行`serial number:`- 您可以通过使用`FINDSTR`( [reference](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/findstr.mspx?mfr=true) ) 来实现。我尝试编写脚本，包括重命名您：

```
@ECHO OFF
SETLOCAL ENABLEDELAYEDEXPANSION

FOR %%d IN ("C:\Protokolle\protokolle\SHRED*") do (
    FOR /F "tokens=2 delims=:" %%i IN ('FINDSTR /c:"serial number" "%%d"') DO (
       ECHO %%i
       :: copy string for string manipulation
       SET tmp=%%i
       :: get rid of leading space
       SET serial=!tmp: =!
       :: log serial to list file
       ECHO !serial! >> "C:\Protokolle\protokolle\liste.txt"
       :: rename file
       MOVE "%%d" "C:\Protokolle\protokolle\SHRED!serial!.log"
    )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:16:40.653

这是完成的工作脚本，感谢您的帮助:)

```
@ECHO OFF
SETLOCAL ENABLEDELAYEDEXPANSION

SET /A files=0
SET /A todo=0

::  Checking wheather a log-file exists
::  If not: Error message and exit.
IF NOT EXIST .\SHRED* (
    ECHO No matching logfile found.
    ECHO Exit!
    ECHO.
    PAUSE
    EXIT
)

::for the "loading Screen"
@FOR %%e in (".\SHRED*") do set /A files=files+1
ECHO !files! Files found!
:: waiting... this way we avoid the need of pressing a button
PING 127.0.0.1 -n 3 > NUL

FOR %%d IN (".\SHRED*") do (
    ::  Checking for a "Seriennummer"-String and copying everything after it
    FOR /F "tokens=2 delims=:" %%i IN ('FINDSTR /c:"serial number" "%%d"') DO (
        CLS
        ::    for the "loading Screen"
        SET  /A todo=todo+1
        ::   copy string for string manipulation
        SET  tmp=%%i
        ::   get rid of leading space
        SET  serial=!tmp: =!
        ::   delete the last character of the string
        SET  serial=!serial:~0,-1!
        ::   ECHOing of the serial and the "loading screen"
        ECHO !serial! !todo! von !files!
        ::   log serial to list file
        ECHO !serial!>> ".\1Uebersicht.txt"
        ::   rename file
        MOVE "%%d" ".\!serial!.log"
    )
)

::  checking if there is still a log-file left
IF EXIST ".\SHRED*" (
    ECHO An error occoured.
    ECHO Not all log-files were renamed
    ECHO.
    PAUSE
    EXIT
)

CLS
ECHO !files! files renamed.
ECHO overview list created.
ECHO please refresh the directory
ECHO.
PAUSE 
```

# inheritance - 从 Derived 到 Base，模棱两可

> ID：15112037
> 
> 赞同：0
> 
> 时间：2013-02-27T12:21:38.263
> 
> 标签：inheritance, multiple-inheritance, dynamic-cast

假设我们有

```
class Base
{
public:
    virtual void foo(){}
};

class Derived: public virtual Base
{};

class Derived_Left: public Derived
{};

class Derived_Right: public Derived
{};

class Bottom: public Derived_Left, public Derived_Right
{}; 
```

//让我们讨论案例

//情况1：

```
void foo()
{
    Base *bptr = new Bottom;
    Derived *dPtr = dynamic_cast<Derived*>(bptr);//dptr == 0
} 
```

//案例2：

```
void goo()
{
    Bottom *bptr = new Bottom;
    Derived *ddtr = dynamic_cast<Derived*>(bptr); // ERROR
} 
```

//main.cpp: 在函数'void goo()'中：

//main.cpp:36:49: 错误：'Derived' 是 'Bottom' 的模糊基数</p>

```
int main()
{
} 
```

那么，为什么要编译代码以防万一

```
Base* bptr = new Bottom; 
```

而不是在

```
Bottom* bptr = new Bottom; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-08-20T09:05:04.873

你已经问过同样的问题。所以我会简短地回答：这是钻石问题。在这种情况下，您将 Type Base 的指针转换为派生的，Base 类只知道在这种情况下唯一的子类。但是从底部类型的对象的角度来看，它是模棱两可的，您希望使用派生类，它是 Derived_left 或 Derived_Right 的父类。

# pdf - PDF 低级：模糊滤镜

> ID：15112039
> 
> 赞同：0
> 
> 时间：2013-02-27T12:21:44.110
> 
> 标签：pdf, blur

是否可以在 PDF 页面上应用模糊过滤器来模糊页面上的所有内容？如果是这样，这是如何从页面对象完成的？

我问的是如何以低级 PDF 格式执行此操作，而不是如何使用任何库来执行此操作。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:00:50.897

您可以尝试在现有页面内容的顶部添加半透明的“覆盖”。

“覆盖”可能是图片、XForm 对象、可选内容组，也可能是其他东西。

或者，您可以设置一种预定义的混合模式并用一种颜色填充整个页面。它可能不会给你完全模糊的效果，但可能会以类似的方式扭曲内容。

这些 PDF 文件说明了预定义混合模式的效果：

*   [混合模式（实心画笔）](https://drive.google.com/file/d/1yghN6WYluqrSKlkhc4QGLrcbHW3wLCEm/view?usp=sharing)
*   [混合模式（图像）](https://drive.google.com/file/d/1WRuF9MT3cmM5jA8o3EJQfnhI52Ik6NDl/view?usp=sharing)

# usb - Lion 32bit kext 无法加载纯虚函数，但 64bit 可以工作

> ID：15112042
> 
> 赞同：1
> 
> 时间：2013-02-27T12:21:56.670
> 
> 标签：usb, osx-lion, 32-bit, kernel-extension

我构建了一个虚拟 USB 总线（通过网络与 linux 盒通信）作为 OSX 的 kext。主类派生自 IOUSBControllerV3。

它在 10.6 32Bit、10.7.5 64bit、10.8 64bit 下工作，但由于（a？）纯虚函数而无法在 10.7.5 32bit 下加载。kextutil 告诉我这个。

我已经在同一系统下编译（Xcode 4.6）kext，尝试了很多针对目标系统或SDK版本的变体，但问题仍然存在？

我知道基类的标头中存在一些#ifdef **LP64差异，尤其是在纯虚函数的上下文中。**

但是经过两天的比较和比较纯虚函数的重载，我不知道为什么只有32位会出问题？

相同的代码在其他系统下工作，但 Lion 32 位不能。

非常感谢您的每一个提示，

关于马库斯

=========== 终端输出：

```
MacProTest:Developer ms$ sudo kextutil -t -v 2   MaCute.kext
Password:
Notice: MaCute.kext has debug properties set.
MaCute.kext appears to be loadable (not including linkage for on-disk libraries).
Loading MaCute.kext.
Reading load info for 13 kexts.
Created mkext for architecture i386 containing 1 kexts.
Loading MaCute.kext.
(kernel) Received request from user space to load kext de.seh.utn.MaCute.
(kernel) Loading kext de.seh.utn.MaCute.
(kernel) Allocated link buffer for kext de.seh.utn.MaCute at 0x1507000 (200704 bytes).
(kernel) kxld[de.seh.utn.MaCute]: This kext calls a pure virtual function. Make sure your kext's OSObject-derived classes implement all pure virtual functions.
(kernel) Can't load kext de.seh.utn.MaCute - link failed.
(kernel) Failed to load executable for kext de.seh.utn.MaCute.
(kernel) Kext de.seh.utn.MaCute failed to load (0xdc008016).
(kernel) Failed to load kext de.seh.utn.MaCute (error 0xdc008016).
Failed to load MaCute.kext - (libkern/kext) link error.
Failed to load MaCute.kext - (libkern/kext) link error.
Check library declarations for your kext with kextlibs(8). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:13:20.523

由于我在头文件中找不到任何明显的罪魁祸首`IOUSBControllerV3.h`，我决定谷歌搜索错误信息，试图找到相关的源代码。我已经将其追溯到[kxld_reloc.c](http://www.opensource.apple.com/source/xnu/xnu-1699.32.7/libkern/kxld/kxld_reloc.c)`check_for_direct_pure_virtual_call()`中的函数：

```
 entry = kxld_vtable_get_entry_for_offset(relocator->current_vtable, 
        offset, relocator->is_32_bit);
    require_action(!entry || !entry->patched.name ||
        !kxld_sym_name_is_pure_virtual(entry->patched.name),
        finish, rval=KERN_FAILURE;
        kxld_log(kKxldLogLinking, kKxldLogErr, 
            kKxldLogDirectPureVirtualCall)); 
```

`kKxldLogDirectPureVirtualCall`是`#define`d 作为那个错误。

如果我是你，我会下载那个 osx 版本 (1699.32.7) 的 xnu 源代码包，并使用[这个站点上](http://shantonu.blogspot.com/)的说明构建你自己的内核二进制文件。然后，修改上面的函数，`entry->patched.name`如果断言条件失败则输出，所以在该`require_action()`行之前插入：

```
if (entry && entry->patched.name && kxld_sym_name_is_pure_virtual(entry->patched.name))
printf("pure virtual function called by kext: %s\n", entry->patched.name); 
```

然后重建并启动新内核。我认为这应该将函数的（损坏的）名称打印到内核日志中。这是相当多的努力，但我认为它会让你到达那里！

**更新：**

从评论中可以清楚地看出我们还没有完成。在 i386 上，`check_for_direct_pure_virtual_call()`从 调用`generic_process_reloc()`，如果纯虚拟检查失败，它将报告失败：

```
rval = check_for_direct_pure_virtual_call(relocator, instr_data);
require_noerr(rval, finish); 
```

这个函数对我们没有什么太大的帮助，但它又是从两个函数调用的：`kxld_relocator_process_sect_reloc()`和`kxld_relocator_process_table_reloc()`. 我不知道在这种情况下哪个适用，但是两者的代码看起来非常相似，因此我们可以使用调试输出以相同的方式修改它们：

```
rval = relocator->process_reloc(relocator, instruction, reloc->length, 
    reloc->pcrel, base_pc, link_pc, link_disp, reloc->reloc_type, target, 
    pair_target, relocator->swap);
require_noerr(rval, finish); 
```

我们想在这两个语句之间插入代码：第一个是失败的重定位调用，第二个是退出函数。我们想捕捉故障并为它们生成一些调试输出。所以，像这样：

```
rval = relocator->process_reloc(relocator, instruction, reloc->length, 
    reloc->pcrel, base_pc, link_pc, link_disp, reloc->reloc_type, target, 
    pair_target, relocator->swap);

if (rval)
{
  // try to find the symbol corresponding to this relocation entry
  KXLDSym* sym = kxld_reloc_get_symbol(relocator, reloc, NULL);
  const char* symname = (sym && sym->name) ? sym->name : "[NULL]";
  const char* symalias = (sym && sym->alias) ? sym->alias : "[NULL]";
  printf("Relocation failed for relocation %p, symbol %p: name = '%s', alias = '%s'\n",
    reloc, sym, symname, symalias);
}

require_noerr(rval, finish); 
```

修改这两个函数，构建内核，启动它，然后尝试加载你的 kext。我希望这能让你有所收获。让我们知道您的身体情况如何！

请注意，我没有测试上面的代码，因为我目前无法重现该问题。

# django - HTTP POST 请求使用 Django/flup 失败超过 128k

> ID：15112046
> 
> 赞同：0
> 
> 时间：2013-02-27T12:22:06.767
> 
> 标签：django, post, fastcgi, mod-fcgid, flup

所以我有一个表格拍摄一张图片并上传它。当图像超过 128k 时，这会产生错误，否则它可以正常工作。

我没有错误消息，因为它试图渲染 500.shtml，我在 Django 中没有模板，所以 Django 认为它是 404（如图）。注意 .shtml，这不是 Django 的常规 500 错误，它是服务器。我在共享主机上。

使用 Django 1.4.5、Flup 1.0.3、Python 2.6.6

我在 .htaccess 中尝试过 LimitRequestBody 指令，但没有效果

其他详细信息：这发生在 django 管理界面和我制作的自定义表单/视图中。视图不会被执行。我尝试了不同的文件存储方法（plain/filesystem 和 django-storages(s3boto)。只要文件小于 128 KB，一切都很好

**更新**- 没有解决方案：与我的托管公司进行了详细交谈。检查其他设置等。在本地测试环境中部署时无法重现。最终在实时站点上使用了解决方法（使用现有 URL 而不是实时上传）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T20:04:16.597

托管公司联系：

> 我们刚刚收到了另一张票，并且能够纠正这个问题。修复概述如下。
> 
> 我们将 apache 配置中的值调整为 FcgidMaxRequestLen 1000000000，如下所述 > [http://forums.cpanel.net/f5/config-mod_fcgid-related-maxrequestlen-timeout-214031.html#post1008351](http://forums.cpanel.net/f5/config-mod_fcgid-related-maxrequestlen-timeout-214031.html#post1008351)
> 
> 如果有人仍然遇到此问题，请通过票证告诉我们，我们也很乐意调整您所在服务器的价值。
> 
> 谢谢
> 
> 该主题可以在这里找到： http: [//forums.asmallorange.com/topic/16354-django-and-media-uploads/?view=getnewpost](http://forums.asmallorange.com/topic/16354-django-and-media-uploads/?view=getnewpost)

只是如果将来有人会查看这个问题。很高兴知道这不是我的错，至少。可惜花了这么长时间才解决。

# android - 如何使用 qemu 在 android 上执行应用程序？

> ID：15112047
> 
> 赞同：1
> 
> 时间：2013-02-27T12:22:07.250
> 
> 标签：android, qemu

如何在不启动和加载 qemu（用户模式仿真）上的所有 android 系统的情况下执行应用程序？PS：Java 应用程序，而不是 C 应用程序。

# java - YAJSW Java初学者示例

> ID：15112048
> 
> 赞同：3
> 
> 时间：2013-02-27T12:22:07.073
> 
> 标签：java, yajsw

任何人都可以帮助我为我提供一些正确的方向，使用 java 语言使用 yajsw 来使用 java 应用程序作为服务，或者只是为我提供一些我可以作为服务运行的 hello world 应用程序的基本代码。我用谷歌搜索但找不到任何有用的东西。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-04T00:36:05.787

YAJSW 的文档在这里提供了您需要的一切。[http://yajsw.sourceforge.net/](http://yajsw.sourceforge.net/)

最简单的运行方法是使用您自己的启动脚本执行您的 jar。然后你需要弄清楚java进程运行的PID是什么。一旦你有了 pid，你需要做的就是运行 ./yajsw/yajsw##someversion##/bat/genConfig.bat 或者如果你在 linux 中运行 ./yajsw/yajsw##someversion##/bin/genConfig .sh 。

如果成功，这将创建一个针对您的可执行 jar 的 wrapper.conf。这足以让你离开地面。之后，您可以针对自己的自定义进行调整。

（genConfig.bat 或 genConfig.sh）的参数是 PID。所以运行 genConfig.bat #PID# ！

PS：配置生成器将添加每个 jar 的类路径 .. 当只添加一个类路径作为 wrapper.java.classpath.1 = .\lib\* 更容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T20:17:15.210

好的，您可以从下载 JBoss 5.x 开始，并使用[我编写的这个包装脚本](https://gist.github.com/djangofan/4366912)让它运行。这只是给你一个例子。您必须对其进行编辑才能运行您的应用程序。

[我还为 JBoss 7 服务器](https://gist.github.com/djangofan/5639409)编写了一个脚本。

# c - 这是使用 goto 的可接受方式吗？

> ID：15112052
> 
> 赞同：1
> 
> 时间：2013-02-27T12:22:23.037
> 
> 标签：c, goto

假设我想写一个游戏（用 C 语言），询问用户他是否想在游戏结束后再次玩。

我看到了两种明显的写法。

第一的：

```
int main(void)
{
    /* variable declarations and initializations */

    do { /* optionally multiple games */

        /* game code here */
        ........

        /* prompt user wheter he wants to play again */
        bool playagain = playagain();

    } while(playagain);

    .....
} 
```

第二：

```
int main(void)
{
    /* variable declarations and initializations */

game_start: /* optionally multiple games */

    /* game code here */
    ........

    /* prompt user wheter he wants to play again */
    bool playagain = playagain();

    if (playagain)
        goto game_start;

    .....
} 
```

我知道通常使用 goto 语句是一个坏主意，但我认为这里它使代码更清晰，并使我们免于额外的缩进级别。

所以我的问题是，这个特定的例子是否被认为是使用 goto 语句的正确方法，还是我应该避免它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T12:26:26.703

这不是更好的例子，在 K&R 你可以找到一个很好的例子：

> C 提供了可无限滥用的 goto 语句和分支到的标签。形式上，goto 语句从来都不是必需的，实际上，没有它几乎总是很容易编写代码。在本书中我们没有使用 goto。然而，在某些情况下 goto 可能会找到一席之地。最常见的是放弃一些深度嵌套结构中的处理，例如一次跳出两个或多个循环。break 语句不能直接使用，因为它只从最内层循环退出。因此：
> 
> ```
>  for ( ... )
>               for ( ... ) {
>                   ...
>                   if (disaster)
>                        goto error;
>               }
>          ...
>    error:
>          /* clean up the mess */ 
> ```
> 
> 如果错误处理代码很重要，并且如果错误可能在多个地方发生，则这种组织很方便。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T12:25:52.437

通常，使用 C 的人讨厌 goto，因为他们认为“摆脱对 goto 的需求”是开始使用 C 的原因之一。

一旦您决定要使用 goto，请继续使用它们。但是一般来说，它会导致令人困惑的代码，您将很难询问有关堆栈溢出的问题。

我会完全避免 gotos 。

事实上，我使用 goto 的唯一原因是，当我想在编写需要用汇编编写的赋值程序之前用 C 编写程序时（使用 goto 更容易可视化）。

在任何情况下，如果您觉得使用 goto 对“正常”控制语句有好处，请继续使用它们。但请注意，有龙。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-27T12:28:15.230

在您的第二个示例中，您基本上是在编写一个循环，但不是使用现有的众所周知的循环结构之一，而是使用 if+goto。

我想说第一个更清楚易懂。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-27T12:31:40.683

我宁愿使用第一个。使用`goto`并不坏，如果它是最好的解决方案。例如，如果我有两个嵌套开关，并且想从第一个开关中中断第二个开关，我会使用`goto`而不是额外的变量和条件。你可以使用任何你喜欢的编码风格，但一般来说，我们避免使用它们，因为它们很容易弄乱我们的代码。但它仍然是你的选择。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-27T12:39:49.423

经过 40 多年对 goto 的争论，世界上所有的程序员仍然没有达成共识。

最常见的观点 (?) 是 goto 在极少数情况下很好，在这种情况下，它应该只用于向下跳转。一个这样的例子是打破多个经过测试的循环或语句。另一个例子是错误处理，你跳到函数末尾的标签，“穷人的异常处理”。

有些人认为 goto 被[认为是有害](http://en.wikipedia.org/wiki/Considered_harmful)的，在任何情况下都不应使用，因为 goto 关键字总是可以被其他语言机制替换。

就个人而言，我更喜欢从不使用 goto，主要是为了避免争论，但我使用了一个非常相似的结构，具有以下功能：

```
int main()
{
  while (play_a_game())
    ;
}

bool play_a_game (void)
{
  game();      

  return play_again();
} 
```

同样，您可以使用函数的 return 语句而不是 goto 来跳出多个循环。具有讽刺意味的是，C 程序员很少遇到函数返回或中断语句的问题，但只要 goto 出现，他们就会看到红色，即使生成的机器代码很可能是相同的。

根据经验：每当您担心多层缩进使代码不可读时，函数始终是解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T12:34:25.603

我很少使用它作为“最终确定”的一种方式。

```
fun () {
  d = getDatabaseConnection(...);
  if (d) {
    f = fopen(...);
    if (f) {
       ...do things...
       if (error(...)) {
         goto finalize;
       }
       ...do more things...
    }
  }

  finalize:
    if (f) fclose(f);
    if (d) closeDatabaseConnection(d);
} 
```

# javascript - 使用 Url.action() 传递动态 javascript 值

> ID：15112055
> 
> 赞同：71
> 
> 时间：2013-02-27T12:22:28.200
> 
> 标签：javascript, c#, asp.net, asp.net-mvc, asp.net-core

谁能告诉如何使用 Url.action() 传递动态值。

就像是，

```
var firstname="abc";
var username = "abcd";
location.href = '@Html.Raw(@Url.Action("Display", "Customer", new { uname = firstname ,name = username}))'; 
```

名字，用户名没有在 Url.action() 方法中得到引用。

如何使用 Url.action() 传递这些动态值？

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2013-02-27T12:32:27.050

该`@Url.Action()`方法是 proccess 上的`server-side`，因此您不能将`client-side`值作为参数传递给此函数。您可以将`client-side`变量与`server-side`此方法生成的 url 连接起来，该 url 是输出中的字符串。尝试这样的事情：

```
var firstname = "abc";
var username = "abcd";
location.href = '@Url.Action("Display", "Customer")?uname=' + firstname + '&name=' + username; 
```

在`@Url.Action("Display", "Customer")`上处理 ，在 上`server-side`处理字符串的其余部分，将方法`client-side`的结果与 连接起来。`server-side``client-side`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-04-24T08:42:45.137

这个答案可能与问题不是 100% 相关。但它确实解决了这个问题。我找到了实现这一要求的简单方法。代码如下：

```
<a href="@Url.Action("Display", "Customer")?custId={{cust.Id}}"></a> 
```

在上面的例子中**{{cust.Id}}**是一个 AngularJS 变量。但是，可以将其替换为 JavaScript 变量。

我没有尝试使用这种方法传递多个变量，但我希望如果需要也可以附加到 Url。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-14T09:59:19.353

最简单的方法是：

```
 onClick= 'location.href="/controller/action/"+paramterValue' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-21T18:00:44.580

就我而言，只需执行以下操作就可以很好地工作：

## 控制器：

```
[HttpPost]
public ActionResult DoSomething(int custNum)
{
    // Some magic code here...
} 
```

## 无需操作即可创建表单：

```
<form id="frmSomething" method="post">
    <div>
        <!-- Some magic html here... -->
    </div>
    <button id="btnSubmit" type="submit">Submit</button>
</form> 
```

## 将操作添加到表单后，设置按钮单击事件以触发提交：

```
var frmSomething= $("#frmSomething");
var btnSubmit= $("#btnSubmit");
var custNum = 100;

btnSubmit.click(function()
    {
        frmSomething.attr("action", "/Home/DoSomething?custNum=" + custNum);

        btnSubmit.submit();
    }); 
```

希望这有助于vatos！

# android - Android In App Billing v3：获取价格不适用于非托管项目

> ID：15112056
> 
> 赞同：0
> 
> 时间：2013-02-27T12:22:33.567
> 
> 标签：android, billing, in-app-purchase

我正在使用标准的 Android IAB v3 代码在启动时检测商品的价格。

但是，它不会为我的非托管项目返回任何 SkuDetails，仅针对托管项目。

有任何想法吗？

```
static IabHelper.QueryInventoryFinishedListener mGotInventoryListener = new IabHelper.QueryInventoryFinishedListener()
{
    public void onQueryInventoryFinished(IabResult result,
            Inventory inventory)
    {
        if (result.isFailure())
        {
            return;
        }

        for (String sku : new String[]
        { "unmanaged_item1", "managed_item1" })
        {
            if (inventory.hasDetails(sku))
            {
                SkuDetails details = inventory.getSkuDetails(sku);
                Log.d(TAG, sku + ": " + details.getTitle() + "," + details.getPrice());
            }
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:24:28.793

> 在第 3 版中，所有应用内商品均受管理

[http://developer.android.com/google/play/billing/api.html#consume](http://developer.android.com/google/play/billing/api.html#consume)

# magento - 为自定义类别属性启用所见即所得编辑器

> ID：15112057
> 
> 赞同：3
> 
> 时间：2013-02-27T12:22:33.693
> 
> 标签：magento, magento-1.6

我为类别创建了一个自定义属性。我以为我用“'wysiwyg_enabled' => true”启用了所见即所得编辑器，但所见即所得没有出现。

```
$installer->addAttribute(Mage_Catalog_Model_Category::ENTITY, 'shortdescription', array(
    'type'              => 'text',
    'backend'           => '',
    'frontend'          => '',
    'label'             => 'Short description',
    'input'             => 'textarea',
    'class'             => '',
    'source'            => '',
    'global'            => '0',
    'visible'           => true,
    'required'          => false,
    'user_defined'      => true,
    'default'           => '',
    'searchable'        => false,
    'filterable'        => false,
    'comparable'        => false,
    'visible_on_front'  => true,
    'used_in_product_listing' => false,
    'unique'            => false,
    'wysiwyg_enabled'   => true,
    'apply_to'          => '',
    'is_configurable'   => true
)); 
```

任何帮助，将不胜感激。我使用magento 1.6.2。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T14:15:55.627

尝试（没有所有其他选项）

```
 <?php
 $this->startSetup();
 $this->addAttribute('catalog_category', 'custom_attribute', array(
     'group'         => 'General',
     'input'         => 'textarea',
     'type'          => 'text',
     'label'         => 'Custom attribute',
     'backend'       => '',
     'visible'       => true,
     'required'      => false,
     'wysiwyg_enabled' => true,
     'visible_on_front' => true,
     'is_html_allowed_on_front' => true,
     'global'        => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL,
 ));

 $this->endSetup(); 
```

假设在您的设置`$this->startSetup()`中是瞬间`Mage_Catalog_Model_Resource_Eav_Mysql4_Setup`

```
<global>
    <resources>
        <add_category_attribute>
            <setup>
                <module>...</module>
                <class>Mage_Catalog_Model_Resource_Eav_Mysql4_Setup</class>
            </setup> 
```

你也可以做

```
$setup = new Mage_Eav_Model_Entity_Setup('core_setup');

$setup->addAttribute('catalog_category' ... 
```

请参阅[http://www.atwix.com/magento/add-category-attribute/](http://www.atwix.com/magento/add-category-attribute/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:42:02.067

如果您是从 magento 管理员而不是通过编码创建的属性，则以下可能会有所帮助：

```
转到管理面板>目录>管理属性>
选择您的属性（例如简短描述）>属性信息>
属性>前端属性...
现在从“启用所见即所得”下拉列表中选择“是”。
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-24T10:30:20.983

创建一个 sql 更新

为了`is_wysiwyg_enabled`

```
$installer->updateAttribute('catalog_category', 'certifications', 'is_wysiwyg_enabled', 1); 
```

为了`is_html_allowed_on_front`

```
$installer->updateAttribute('catalog_category', 'certifications', 'is_html_allowed_on_front', 1); 
```

# hibernate - HTTP 状态 500 - createCriteria 在没有活动事务的情况下无效

> ID：15112061
> 
> 赞同：0
> 
> 时间：2013-02-27T12:22:46.360
> 
> 标签：hibernate, hibernate-criteria

晚上好，请你帮我解决这些异常我正在使用休眠 3.5 从数据库生成 DAO 和实体

休眠.cfg.xml

```
<hibernate-configuration>
<session-factory name="SessionFactory">
    <property name="hibernate.bytecode.use_reflection_optimizer">false</property>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.password">root</property>
    <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/automobiles</property>
    <property name="hibernate.connection.username">root</property>
    <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="hibernate.search.autoregister_listeners">false</property>
    <property name="hibernate.current_session_context_class">thread</property>
    <mapping resource="entity/User.hbm.xml" />
    <mapping resource="entity/Model.hbm.xml" />
    <mapping resource="entity/Manufucturer.hbm.xml" />
    <mapping resource="entity/UserOrderCar.hbm.xml" />
    <mapping resource="entity/CarPhotos.hbm.xml" />
    <mapping resource="entity/Car.hbm.xml" />
</session-factory> 
```

道类

```
public List extractAdminAttributes() {
    log.debug("extractAdminAttributes");
    try {
        Session session=sessionFactory.getCurrentSession();
        List productList = sessionFactory
                .getCurrentSession()
                .createCriteria("entity.Car")
                .setProjection(
                        Projections.projectionList()
                                .add(Projections.property("carDesc"))
                                .add(Projections.property("quantity"))
                                .add(Projections.property("price"))).list();
        return productList;

    } catch (RuntimeException re) {
        log.error("extractAdminAttributes failed", re);
        throw re;

    }

} 
```

这是异常的堆栈跟踪：

```
org.hibernate.HibernateException: createCriteria is not valid without active transaction
at org.hibernate.context.ThreadLocalSessionContext$TransactionProtectionWrapper.invoke(ThreadLocalSessionContext.java:340)
at $Proxy6.createCriteria(Unknown Source)
at entity.CarHome.extractAdminAttributes(CarHome.java:138)
at servlets.AdminServlet2.populateAdminView(AdminServlet2.java:65)
at servlets.AdminServlet2.doGet(AdminServlet2.java:48)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-04T16:56:38.397

Spring 为我们管理事务，所以请从 spring 配置中删除以下行

```
<property name="hibernate.current_session_context_class">thread</property> 
```

那应该使它起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:18:48.910

如果您还没有事务，则需要在执行查询之前启动事务。尝试这样的事情：

```
public List extractAdminAttributes() {
    log.debug("extractAdminAttributes");
    try {
        Session session = sessionFactory.getCurrentSession();
        Transaction tx = session.beginTransaction();
        List productList = session
                .createCriteria("entity.Car")
                .setProjection(
                        Projections.projectionList()
                                .add(Projections.property("carDesc"))
                                .add(Projections.property("quantity"))
                                .add(Projections.property("price"))).list();

        tx.commit();  
        return productList;

    } catch (RuntimeException re) {
        tx.rollback();
        log.error("extractAdminAttributes failed", re);
        throw re;
    }
} 
```

# c# - 将数据传递到现有表单

> ID：15112066
> 
> 赞同：2
> 
> 时间：2013-02-27T12:23:14.817
> 
> 标签：c#, forms

我有一个程序需要来自另一个表单的数据，我需要在不创建第一个表单的新实例的情况下传递它。我怎样才能做到这一点？

前任。

```
Form2 f2 = new Form2();

f2.showdialog(); 
```

当 f2 显示时，它们是一个带有项目的列表视图，当我单击一个项目时，我希望将项目发送回第一个表单而不关闭 form2 并且不实例化一个新的 Form1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:25:38.747

> 我需要在不创建第一个表单的新实例的情况下传递它。

这意味着您在后台打开了您的第一个表单。您可以使用[`Application.OpenForms`](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.openforms.aspx)属性来获取已经打开的表单，然后从那里获取数据。就像是：

```
Form2 f2 = Application.OpenForms["Form2"] as Form2;
if(f2 != null)
   string data = f2.SomeProperty; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:26:10.127

您正在寻找某种事件。

```
public event EventHandler MyButtonClicked; 
```

在你使用 ShowDialog();

```
Form2 f2 = new Form2();
f2.MyButtonClicked += f2_MyButtonClicked;
f2.showdialog(); 
```

以及处理事件的地方

```
void f2_MyButtonClicked(object sender, EventArgs e)
{
    //Here you want to grab your list. You can get f2 from sender.
    Form2 f2 = (Form2)sender;

    throw new NotImplementedException();
} 
```

当您在 Form2 中单击引发事件的按钮时。

```
void myButtonClicked(object sender, EventArgs e)
{
    if (MyButtonClicked != null)
    {
        MyButtonClicked(this, new EventArgs()); 
    }
} 
```

如果您想了解更多有关事件的信息，请查看。

[http://msdn.microsoft.com/en-us/library/aa645739%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa645739%28v=vs.71%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T12:25:44.990

也许在 form1 中创建一个 mutator(set) 方法。当您希望将数据传回 form1 时，请调用 mutator 方法来更新表单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T12:32:55.567

可能最简单的方法是拥有一个可公开访问的方法，`Form1`该方法知道如何处理新项目。然后在`Form2`有一个`Form2`对象的引用。要么`Form2`有一个属性，要么你设置`Form1`为父级`Form2 f2 = new Form2(f1)`（或者`this`如果你从 f1 调用它）。

现在您有了对该`Form1`对象的引用，您可以调用它的方法来处理该项目。

# javascript - jQuery.on() 是如何工作的？

> ID：15112067
> 
> 赞同：11
> 
> 时间：2013-02-27T12:23:27.703
> 
> 标签：javascript, jquery, dom-events, event-delegation, jquery-on

我还没有看到这个函数的来源，但我想知道，它是这样工作的：

1.  通过它们的选择器选择元素
2.  将提供的事件处理程序委托给他们
3.  在该选择器上运行 a`setInterval`并不断取消委托，然后重新委托同一事件

或者对此有纯 JavaScript DOM 解释？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-27T12:41:42.430

[我假设](http://api.jquery.com/on/#direct-and-delegated-events)您的问题是关于`.on`.

在 JavaScript 中，大多数事件在 DOM 层次结构中[冒泡。](http://www.quirksmode.org/js/events_order.html)这意味着，当一个可以冒泡的事件触发一个元素时，它会冒泡到 DOM 直到`document`级别。

考虑这个基本标记：

```
<div>
   <span>1</span>
   <span>2</span>
</div> 
```

现在我们应用事件委托：

```
$('div').on('click', 'span', fn); 
```

事件处理程序仅附加到`div`元素。由于在`span`内，`div`跨度中的任何点击都会冒泡到`div`，触发`div`的点击处理程序。在那一刻，剩下的就是检查[`event.target`](http://api.jquery.com/event.target/)（或目标和之间的任何元素[`delegateTarget`](http://api.jquery.com/event.delegateTarget/)）是否与委托目标选择器匹配。

* * *

让我们稍微复杂一点：

```
<div id="parent">
    <span>1</span>
    <span>2 <b>another nested element inside span</b></span>
    <p>paragraph won't fire delegated handler</p>
</div> 
```

基本逻辑如下：

```
//attach handler to an ancestor
document.getElementById('parent').addEventListener('click', function(e) {
    //filter out the event target
    if (e.target.tagName.toLowerCase() === 'span') {
        console.log('span inside parent clicked');
    }
}); 
```

`event.target`虽然当嵌套在您的过滤器中时，上述内容不匹配。我们需要一些迭代逻辑：

```
document.getElementById('parent').addEventListener('click', function(e) {
    var failsFilter = true,
        el = e.target;
    while (el !== this && (failsFilter = el.tagName.toLowerCase() !== 'span') && (el = el.parentNode));
    if (!failsFilter) {
        console.log('span inside parent clicked');
    }
}); 
```

[**小提琴**](http://jsfiddle.net/38bKp/4/)

编辑：更新代码以仅匹配 jQuery 的后代元素`.on`。

**注意：**这些片段仅用于说明目的，不能在现实世界中使用。当然，除非你不打算支持旧的 IE。对于旧 IE，您需要针对`addEventListener`/`attachEvent`和进行功能测试`event.target || event.srcElement`，可能还需要一些其他怪癖，例如检查事件对象是否传递给处理函数或在全局范围内可用。值得庆幸的是，jQuery 为我们在幕后无缝地完成了所有这些工作。`=]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-02-12T11:14:55.617

Necromancing：
以防万一有人需要用 Vanilla-JavaScript 替换 JQuery：

打字稿：

```
/// attach an event handler, now or in the future, 
/// for all elements which match childselector,
/// within the child tree of the element maching parentSelector.
export function subscribeEvent(parentSelector: string | Element
    , eventName: string
    , childSelector: string
    , eventCallback)
{
    if (parentSelector == null)
        throw new ReferenceError("Parameter parentSelector is NULL");

    if (childSelector == null)
        throw new ReferenceError("Parameter childSelector is NULL");

    // nodeToObserve: the node that will be observed for mutations
    let nodeToObserve: Element = <Element>parentSelector;
    if (typeof (parentSelector) === 'string')
        nodeToObserve = document.querySelector(<string>parentSelector);

    let eligibleChildren: NodeListOf<Element> = nodeToObserve.querySelectorAll(childSelector);

    for (let i = 0; i < eligibleChildren.length; ++i)
    {
        eligibleChildren[i].addEventListener(eventName, eventCallback, false);
    } // Next i 

    // https://stackoverflow.com/questions/2712136/how-do-i-make-this-loop-all-children-recursively
    function allDescendants(node: Node)
    {
        if (node == null)
            return;

        for (let i = 0; i < node.childNodes.length; i++)
        {
            let child = node.childNodes[i];
            allDescendants(child);
        } // Next i 

        // IE 11 Polyfill 
        if (!Element.prototype.matches) Element.prototype.matches = Element.prototype.msMatchesSelector;

        if ((<Element>node).matches)
        {
            if ((<Element>node).matches(childSelector))
            {
                // console.log("match");
                node.addEventListener(eventName, eventCallback, false);
            } // End if ((<Element>node).matches(childSelector))
            // else console.log("no match");

        } // End if ((<Element>node).matches) 
        // else console.log("no matchfunction");

    } // End Function allDescendants 

    // Callback function to execute when mutations are observed
    let callback:MutationCallback = function (mutationsList: MutationRecord[], observer: MutationObserver)
    {
        for (let mutation of mutationsList)
        {
            // console.log("mutation.type", mutation.type);
            // console.log("mutation", mutation);

            if (mutation.type == 'childList')
            {
                for (let i = 0; i < mutation.addedNodes.length; ++i)
                {
                    let thisNode: Node = mutation.addedNodes[i];
                    allDescendants(thisNode);
                } // Next i 

            } // End if (mutation.type == 'childList') 
            // else if (mutation.type == 'attributes') { console.log('The ' + mutation.attributeName + ' attribute was modified.');

        } // Next mutation 

    }; // End Function callback 

    // Options for the observer (which mutations to observe)
    let config = { attributes: false, childList: true, subtree: true };

    // Create an observer instance linked to the callback function
    let observer = new MutationObserver(callback);

    // Start observing the target node for configured mutations
    observer.observe(nodeToObserve, config);
} // End Function subscribeEvent 
```

JavaScript：

```
 /// attach an event handler, now or in the future, 
    /// for all elements which match childselector,
    /// within the child tree of the element maching parentSelector.
    function subscribeEvent(parentSelector, eventName, childSelector, eventCallback) {
        if (parentSelector == null)
            throw new ReferenceError("Parameter parentSelector is NULL");
        if (childSelector == null)
            throw new ReferenceError("Parameter childSelector is NULL");
        // nodeToObserve: the node that will be observed for mutations
        var nodeToObserve = parentSelector;
        if (typeof (parentSelector) === 'string')
            nodeToObserve = document.querySelector(parentSelector);
        var eligibleChildren = nodeToObserve.querySelectorAll(childSelector);
        for (var i = 0; i < eligibleChildren.length; ++i) {
            eligibleChildren[i].addEventListener(eventName, eventCallback, false);
        } // Next i 
        // https://stackoverflow.com/questions/2712136/how-do-i-make-this-loop-all-children-recursively
        function allDescendants(node) {
            if (node == null)
                return;
            for (var i = 0; i < node.childNodes.length; i++) {
                var child = node.childNodes[i];
                allDescendants(child);
            } // Next i 
            // IE 11 Polyfill 
            if (!Element.prototype.matches)
                Element.prototype.matches = Element.prototype.msMatchesSelector;
            if (node.matches) {
                if (node.matches(childSelector)) {
                    // console.log("match");
                    node.addEventListener(eventName, eventCallback, false);
                } // End if ((<Element>node).matches(childSelector))
                // else console.log("no match");
            } // End if ((<Element>node).matches) 
            // else console.log("no matchfunction");
        } // End Function allDescendants 
        // Callback function to execute when mutations are observed
        var callback = function (mutationsList, observer) {
            for (var _i = 0, mutationsList_1 = mutationsList; _i < mutationsList_1.length; _i++) {
                var mutation = mutationsList_1[_i];
                // console.log("mutation.type", mutation.type);
                // console.log("mutation", mutation);
                if (mutation.type == 'childList') {
                    for (var i = 0; i < mutation.addedNodes.length; ++i) {
                        var thisNode = mutation.addedNodes[i];
                        allDescendants(thisNode);
                    } // Next i 
                } // End if (mutation.type == 'childList') 
                // else if (mutation.type == 'attributes') { console.log('The ' + mutation.attributeName + ' attribute was modified.');
            } // Next mutation 
        }; // End Function callback 
        // Options for the observer (which mutations to observe)
        var config = { attributes: false, childList: true, subtree: true };
        // Create an observer instance linked to the callback function
        var observer = new MutationObserver(callback);
        // Start observing the target node for configured mutations
        observer.observe(nodeToObserve, config);
    } // End Function subscribeEvent 
```

# android - android webViewClient onReceivedError() 总是被调用，即使没有错误

> ID：15112071
> 
> 赞同：0
> 
> 时间：2013-02-27T12:23:42.553
> 
> 标签：android, webview, webviewclient

我在 a 中加载一个 url `WebView`，但即使页面加载成功，该`WebViewClient`方法也总是被调用。`OnReceivedError()`有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:38:22.260

应该`onReceivedError()`在 WebViewClient 中尝试过监控方法

如果页面在 webview 中加载正常，则调用 onReceivedError() 的原因是 HTML/JS 脚本中的警告，您可以忽略它，或者通过监视错误来修复。

# wpf - WPF 工具包评级控制

> ID：15112075
> 
> 赞同：0
> 
> 时间：2013-02-27T12:23:57.497
> 
> 标签：wpf, wpf-controls, wpftoolkit

我正在使用 WPF 工具包“评级”控件。在那，我怎样才能减小星号？如果我减小宽度和高度，那么星星就不会完全可见。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:17:53.107

看看这个话题。这个问题已经在里面解决了

[wpf 工具包评级大小](https://stackoverflow.com/questions/9312934/wpf-toolkit-rating-size?rq=1)

# php - ZF2 DI 扩展接口错误“NULL”类型的实例化器无效

> ID：15112077
> 
> 赞同：1
> 
> 时间：2013-02-27T12:24:00.230
> 
> 标签：php, dependency-injection, zend-framework2

我正在尝试`Zend\EventManager\EventManager`从 Di

```
$di     = new Di();
$di->configure(new Config(array(/*etc*/));
$events = $di->get('Zend\EventManager\EventManager'); 
```

但是我收到此错误

**致命错误：**未捕获的异常 'Zend\Di\Exception\RuntimeException' 带有消息“Zend\EventManager\SharedEventManagerInterface”的“NULL”类型的无效实例化器。

我相信这是因为 EventManagerInterface 扩展了 SharedEventManagerInterface？

我试过了

```
'preferences'   => array(
    'Zend\EventManager\SharedEventManagerInterface' 
        => 'Zend\EventManager\EventManager',
), 
```

并且还定义了一个实例化器

```
'Zend\EventManager\SharedEventManagerInterface' => array(
    'instantiator' => 'Zend\EventManager\EventManager::__construct'
), 
```

克服这个错误的配置应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:10:10.300

`Zend\EventManager\EventManager`不是有效的`Zend\EventManager\SharedEventManagerInterface`：使用 a`Zend\EventManager\SharedEventManager`代替。

如果要注入共享事件管理器，请使用以下配置：

```
'di' => array( 
    'instance' => array(
        'preference' => array(
            'Zend\EventManager\SharedEventManagerInterface' 
                => 'Zend\EventManager\SharedEventManager',
        ),
    ),
), 
```

这基本上会告诉每次请求泛型时`Zend\Di`使用 a 。`Zend\EventManager\SharedEventManager``Zend\EventManager\SharedEventManagerInterface`

我在[这篇博文](http://ocramius.github.com/blog/zend-framework-2-controllers-and-dependency-injection-with-zend-di/)中有一个工作示例。

# javascript - 两个独立函数的 Javascript 回调并在同一个地方输出

> ID：15112083
> 
> 赞同：0
> 
> 时间：2013-02-27T12:24:16.743
> 
> 标签：javascript, function, callback

我有以下代码：

```
 displayOrders: function(){
    function getRetailerName(retailerID, callback){
        var retailerName;
        db.transaction(function(qry){
            qry.executeSql("SELECT retailerName FROM retailers WHERE token = '"+retailerID+"' ", [], function(tx, results1){
                var len1 = results1.rows.length;
                var retailerName;
                for (var i1=0; i1<len1; i1++){
                    retailerName = results1.rows.item(i1).retailerName;
                    callback(retailerName);
                }
            });
        });
    }
    db.transaction(function(qry){
        qry.executeSql("SELECT * FROM orders", [], function(tx, results){
            //query was a success
            var len = results.rows.length;
            for (var i=0; i<len; i++){
                var orderTime = results.rows.item(i).orderTime;

                var retailerName;
                getRetailerName(results.rows.item(i).retailerID,function(name) { //this uses a callback function... need to because request to DB is a
                    retailerName = name ;
                    $('#orderHistoryCollapsible').append('<div data-role="collapsible" data-collapsed="false"><h3>'+retailerName+' - '+orderTime+'</h3><p>Im the collapsible set content for section 1.</p></div>');
                    $(".orderHistoryCollapsible").collapsibleset();
                    $(".orderHistoryCollapsible").collapsibleset('refresh');            
                });
            }
        });

    }); 
```

所以基本上代码运行两个单独的数据库查询并检索要放入列表视图的数据。getRetailerName 函数提供了一个回调，该回调在下面的查询中使用，它将两组数据添加到“orderHistoryCollapsible”div。

我的问题是，也意味着插入 DOM 的 orderTime 值每次都返回循环中的最后一个值。好像这两个查询都需要作为回调提供？但是我不确定如何将数据附加到正确的位置..

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:39:30.880

该变量`orderTime`在函数范围 ( `function(tx, results)`) 中，而不是在循环范围中。这意味着，当它在 的闭包中被捕获时`function(name)`，只有一个实例。当循环完成时，它将具有最后一次调用的值。

如果将循环体包含在匿名函数中，则可以解决此问题

```
for (var i=0; i<len; i++){
    function() {
        var orderTime = results.rows.item(i).orderTime;

        var retailerName;
        getRetailerName(results.rows.item(i).retailerID,function(name) { //this uses a callback function... need to because request to DB is a
            retailerName = name ;
            $('#orderHistoryCollapsible').append('<div data-role="collapsible" data-collapsed="false"><h3>'+retailerName+' - '+orderTime+'</h3><p>Im the collapsible set content for section 1.</p></div>');
            $(".orderHistoryCollapsible").collapsibleset();
            $(".orderHistoryCollapsible").collapsibleset('refresh');            
        });
    }
} 
```

然后，每次运行主体时都有一个新范围，因此有一个新的`orderTime`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:44:51.257

`var orderTime`在您的代码中可能会产生误导，因为在 javascript 中，局部变量的范围不限于它们的封闭块（如在 Java 中），而是限于它们的封闭函数。更具体地说，你`orderTime`被初始化一次，然后在每次循环迭代中被覆盖（即每次都是相同的变量）。

回调函数引用该变量（称为闭包，这意味着该变量将在定义它的函数退出后存在 - 因为回调函数具有对它的引用）。当回调被调用时，循环已经完成了它的执行，所以它`orderTime`有它的最后一个值。

以下应该有效：

```
displayOrders: function(){
    function getRetailerName(retailerID, callback){
        var retailerName;
        db.transaction(function(qry){
            qry.executeSql("SELECT retailerName FROM retailers WHERE token = '"+retailerID+"' ", [], function(tx, results1){
                var len1 = results1.rows.length;
                var retailerName;
                for (var i1=0; i1<len1; i1++){
                    retailerName = results1.rows.item(i1).retailerName;
                    callback(retailerName);
                }
            });
        });
    }

    function callbackFn(orderTime) {
        return function(name) {
                $('#orderHistoryCollapsible').append('<div data-role="collapsible" data-collapsed="false"><h3>'+name+' - '+orderTime+'</h3><p>Im the collapsible set content for section 1.</p></div>');
                $(".orderHistoryCollapsible").collapsibleset();
                $(".orderHistoryCollapsible").collapsibleset('refresh');    
        };
    }

    db.transaction(function(qry){
        qry.executeSql("SELECT * FROM orders", [], function(tx, results){
            //query was a success
            var len = results.rows.length;
            for (var i=0; i<len; i++){
                var orderTime = results.rows.item(i).orderTime;
                getRetailerName(results.rows.item(i).retailerID, callbackFn(orderTime));
            }
        });

    }); 
```

# ef-code-first - 带有代码迁移的双表

> ID：15112084
> 
> 赞同：0
> 
> 时间：2013-02-27T12:24:18.183
> 
> 标签：ef-code-first, entity-framework-migrations, code-migration, entity-framework-6

我有一个大数据库，它由两部分组成：后台和前端部分。后台部分永远不会因项目而改变，因此他们有自己的业务和数据组件。

数据层有它自己的代码迁移，它自己`DbContext`称为`BackofficeContext`. 架构是`Backoffice`

前端具有相同的结构，也有自己的数据层、自己的代码迁移和`DbContext`调用的`FrontendContext`. 这有不同的架构`Frontend`。

在数据库中，我将看到 Backoffice 和 Frontend 相关表的清晰分离，这正是我想要的。

只有一个问题。中的一个表`FrontendContext`包含一个字段`BackofficeContext`：

```
public class UserChoise
{
    [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid UserChoiseId { get; set; }

    [Required]
    public Guid UserId { get; set; }

    [ForeignKey("UserId")]
    public User User { get; set; }

    ....
} 
```

用户表在 中`BackofficeContext`，`UserChoises`表在 中`FrontendContext`。

当我为 运行代码迁移时，`BackofficeContext`它将为`Users`. 当我为它运行代码迁移时，`FrontendContext`它会创建`UserChoises`表，但也会再次创建`Users`表。

我可以从迁移文件中手动删除此表，但每次进行新迁移时它都会返回。

有没有办法让人们`FrontendContext`意识到`BackofficeContext`？

# asp-classic - ServerXMLHTTP 连接问题

> ID：15112088
> 
> 赞同：0
> 
> 时间：2013-02-27T12:24:31.383
> 
> 标签：asp-classic, https, serverxmlhttp

我正在尝试在经典 ASP 中构建一个网页来检查一系列 URL 的状态。

我的代码如下：

```
Function TestSite(sURL)

  UserAgent = "Mozilla/4.0+(compatible;+MSIE+7.0;+Windows+NT+5.1)"

  Set poster = Server.CreateObject("MSXML2.ServerXMLHTTP.6.0")
  poster.open "GET", sURL, false
  poster.setRequestHeader "User-Agent",UserAgent
  poster.send

  If poster.status = 200 Then
    TestSite = poster.responseText
  Else
    ' ## ERROR ## '
    TestSite = ""
  End If
  Set poster = Nothing
End Function 
```

URL 都是 HTTPS，包含非标准端口号（例如[https://somedomain.com:4433/restofurl](https://somedomain.com:4433/restofurl)）

当我在网络浏览器中运行 url 时，它们加载得很好，但是当我通过上述函数将它们放入时，我得到：

```
A connection with the server could not be established 
```

我已经使用以下替代方法检查了我的功能：1) 非安全 URL - 这工作正常 2) 没有指定端口的安全 URL - 这工作正常 3) 指定端口 443 的安全 URL - 这工作正常 4) 安全URL 在目标服务器上指定端口 443 - 这工作正常

在此基础上，我确信我的代码是正确的。有人对进一步的故障排除有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:13:56.277

问题被证明与我们的服务器太旧（仍在运行 Win2003）有关，并且它们的设置比端口号建议的更不标准！

最终的解决方案是将代码托管在某个单独的主机上（在运行更新版本 Windows 的服务器上）。不理想，但至少我们已经让它工作了。（我们未来也会升级服务器——这有望成为最终的解决方案。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:03:46.997

这可能意味着运行您的代码的服务器与您发送请求的服务器没有相同的证书。虽然您使用的浏览器确实有它们。

您可以通过添加此代码（在您发送请求之前，当然）让您的服务器忽略特定的证书问题来检查这一点，并尝试一些值：

```
Const SXH_SERVER_CERT_IGNORE_UNKNOWN_CA = 256
Const SXH_SERVER_CERT_IGNORE_WRONG_USAGE = 512
Const SXH_SERVER_CERT_IGNORE_CERT_CN_INVALID = 4096
Const SXH_SERVER_CERT_IGNORE_CERT_DATE_INVALID = 8192
Const SXH_SERVER_CERT_IGNORE_ALL_SERVER_ERRORS = 13056
poster.setOption 2, poster.getOption(2) - SXH_SERVER_CERT_IGNORE_CERT_DATE_INVALID 
```

# c# - 如何在 asp.net mvc 3 中验证多个模型？

> ID：15112094
> 
> 赞同：0
> 
> 时间：2013-02-27T12:24:46.547
> 
> 标签：c#, asp.net-mvc-3, model-validation

我有一个简单的模型，例如：

```
public class AppointmentModel
   {
      private static List<SampleModel> _list;

      public string ClientName {
         get;
         set;
      }

      [DataType( DataType.Date )]
      public DateTime Date {
         get;
         set;
      }

      public bool TermsAccepted {
         get;
         set;
      }

      public List<SampleModel> SampleModelList {
         get;
         set;
      }

      public static List<SampleModel> GetSampleList() {
         if ( _list == null ) {

            _list = new List<SampleModel>( 0 );

            _list.Add( new SampleModel {
               Id = 1,
               Name = "Test",
               IsChecked = false
            } );

            _list.Add( new SampleModel {
               Id = 2,
               Name = "Another test",
               IsChecked = true
            } );

            _list.Add( new SampleModel {
               Id = 3,
               Name = "All test",
               IsChecked = false
            } );
         }

         return _list;
      }
   } 
```

`SampleModel`看起来像（它是为了模拟复选框输入而创建的）：

```
public class SampleModel
   {
      public int Id {
         get;
         set;
      }

      public string Name {
         get;
         set;
      }

      public bool IsChecked {
         get;
         set;
      }
   } 
```

在我看来，我实现了：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<SimpleAppWithModelBinding.Models.AppointmentModel>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Page
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

<h2>Page</h2>

   <% using ( Html.BeginForm(FormMethod.Post) ) { %>
         <%:Html.ValidationSummary()%>

      <p>Name: <%: Html.EditorFor( model => model.ClientName )%></p>
      <p>Date: <%: Html.EditorFor( model => model.Date )%></p>
      <p><%: Html.EditorFor( model => model.TermsAccepted )%> Accept terms</p>

      <%-- here I put the checkbox list using editor template --%>
      <%: Html.Action( "RenderPartialSample" ) %>

      <input type="submit" value="Test" />
   <%} %>

</asp:Content> 
```

和控制器端，`HomeController`：

```
 public ActionResult Page() {

         return View();
      }

      // explicit validate model
      [HttpPost]
      public ActionResult Page( AppointmentModel model ) {

        // do some verification here

         if ( model.SampleModelList == null || ( model.SampleModelList != null && model.SampleModelList.Count == 0 ) ) {
            ModelState.AddModelError( "SampleModelList", "Please check something !" );
         }

         if ( ModelState.IsValid ) {
            //do something here
            return View( "Completed", model );
         } else {
            return View( "Page", model );
         }
      }

      public PartialViewResult RenderPartialSample() {
         List<SampleModel> model = new List<SampleModel> {
            new SampleModel{
               Id = 1,
               IsChecked = true,
               Name = "Test"
            },

            new SampleModel{
               Id = 2,
               IsChecked = false,
               Name = "Test1"
            },

            new SampleModel{
               Id = 3,
               IsChecked = false,
               Name = "Test2"
            }
         };

         AppointmentModel a = new AppointmentModel();
         a.SampleModelList = model;

         return PartialView( "SamplePartialView", a.SampleModelList );
      } 
```

**问题：**

当我按下提交时，`public ActionResult Page( AppointmentModel model )`给了我一个模型，他有`SampleModelList`null，总是为 null。我想从模型中获得该列表中的已检查输入，但可能由于部分视图而无法正常工作。

在我的情况下如何验证两个模型？或者在我的情况下最好的方法是什么，也许我的方法不好。

请帮忙 ：）

**更新：**

`SamplePartialView`包含：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<List<SimpleAppWithModelBinding.Models.SampleModel>>" %>

<%: Html.EditorForModel() %> 
```

和模板：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<SimpleAppWithModelBinding.Models.SampleModel>" %>

<%: Html.HiddenFor( x => x.Id ) %>
<%: Html.CheckBoxFor( x => x.IsChecked, new {
      value = Model.Id
   } )%>
<%: Html.LabelFor( x => x.IsChecked, Model.Name ) %>

<br /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:29:23.577

您没有显示`SamplePartialView`部分内容，但我怀疑您内部没有遵守输入字段的命名约定。`SampleModelList`为了尊重[`naming convention`](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)默认模型绑定器，它们没有前缀。

在此部分中，您应该具有如下所示的输入字段：

```
<input type="text" name="SampleModelList[0].Id" value="1" />
<input type="text" name="SampleModelList[0].Name" value="name 1" />

<input type="text" name="SampleModelList[1].Id" value="1" />
<input type="text" name="SampleModelList[1].Name" value="name 1" />

... 
```

查看为您的表单呈现的标记，并确保您已遵守此约定。

为了遵守此命名约定，您可以设置模板前缀，或者在子控制器操作中呈现您的部分：

```
ViewData.TemplateInfo.HtmlFieldPrefix = "SampleModelList";
return PartialView("SamplePartialView", a.SampleModelList); 
```

或者如果您愿意，可以在局部内部：

```
<%@ Control 
    Language="C#" 
    Inherits="System.Web.Mvc.ViewUserControl<List<SimpleAppWithModelBinding.Models.SampleModel>>" 
%>
<% ViewData.TemplateInfo.HtmlFieldPrefix = "SampleModelList"; %>
<%= Html.EditorForModel() %> 
```

# php - 使用 php 代码以 XML 格式输出 itemid

> ID：15112103
> 
> 赞同：0
> 
> 时间：2013-02-27T12:25:13.593
> 
> 标签：php, php, xml

我试图让我的[php](/questions/tagged/php "显示标记为“php”的问题")代码以 XML 格式输出代码，但是我不确定如何让它正常工作。到目前为止，它以 php/html 格式输出代码。

这是我的 XML：

```
 <bookcollection>
 <items>
 <item id="483">
 <title>Database systems management and design/</title>
 <isbn>0877091153</isbn>
 <url>http://library.hud.ac.uk/catlink/bib/483</url>
 <borrowedcount>28</borrowedcount>
 <courses>
 <course>CC140</course>
 </courses>
 </item>
 </items>
 </bookcollection> 
```

和 PHP：

```
<?php

$xmlassignDoc = new DOMDocument();
$xmlassignDoc->load("books.xml");

 $books = $xmlassignDoc->getElementsByTagName("item");

foreach($books as $list)
{
    $bookID = $list->getAttribute("id");

    //HERE is where the GET function will be
    if ($bookID == '483')
    {
        $id = $list->getAttribute("id");
        echo "<b>Book ID: </b> $id <br>";

         $title = $list->getElementsByTagName("title");
         $title = $title->item(0)->nodeValue;
         echo "<b>Title: </b> $title <br>";

         $isbn = $list->getElementsByTagName("isbn");
         $isbn = $isbn->item(0)->nodeValue;
         echo "<b>ISBN: </b> $isbn <br>";

         $borrowed = $list->getElementsByTagName("borrowedcount");
         $borrowed = $borrowed->item(0)->nodeValue;
         echo "<b>Borrowed Count: </b> $borrowed <br>";
         echo "<br>";

    } 
}

?> 
```

任何想法都会对我有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:52:22.657

据我了解，您想提取一个 xml 元素并将其另存为另一个 xml 文件

如果是这样使用这个

```
$xmlassignDoc = new DOMDocument();
$xmlassignDoc->load("book.xml");

$books = $xmlassignDoc->getElementsByTagName("item");

$singleBook = new DOMDocument('1.0', 'utf-8');
$singleBook->formatOutput = true;

foreach($books as $book) {
    $bookID = $book->getAttribute("id");

    //HERE is where the GET function will be
    if ($bookID == '483') {
        $singleBook->loadXML("<book></book>");
        $node = $singleBook->importNode($book, true);
        $singleBook->documentElement->appendChild($node);
        echo $singleBook->saveXML(); //do we need to save?!?!
    } 
} 
```

结果：

```
<?xml version="1.0"?>
<book>
    <item id="483">
        <title>Database systems management and design 1</title>
        <isbn>0877091153</isbn>
        <url>http://library.hud.ac.uk/catlink/bib/483</url>
        <borrowedcount>28</borrowedcount>
        <courses>
            <course>CC140</course>
        </courses>
    </item>
</book> 
```

或者如果你只想要 id 作为结果

```
if ($bookID == '483') {
    $singleBook->loadXML("<book></book>");
    $node = $singleBook->createElement("id", $bookID); //<--- ID only
    $singleBook->documentElement->appendChild($node);
    echo $singleBook->saveXML();
} 
```

结果

```
<?xml version="1.0"?>
<book>
    <id>483</id>
</book> 
```

在您的情况下，您希望输出为

```
<results>
    <book id="1234" title="Interaction Design" isbn="968347337" borrowedcount="15"/>
</results> 
```

用这个

```
$xmlassignDoc = new DOMDocument();
$xmlassignDoc->load("books.xml");

$books = $xmlassignDoc->getElementsByTagName("item");

$singleBook = new DOMDocument('1.0', 'utf-8');
$singleBook->formatOutput = true;

foreach($books as $book)
{
    $bookID = $book->getAttribute("id");

    //HERE is where the GET function will be
    if ($bookID == '483') {
        $singleBook->loadXML("<results></results>");
        $element = $singleBook->createElement("book");

        //id attribute
        $attrId = $singleBook->createAttribute('id');
        $attrId->value = $bookID;

        //title attribute
        $title = $book->getElementsByTagName("title");
        $title = $title->item(0)->nodeValue;
        $attrTitle = $singleBook->createAttribute('title');
        $attrTitle->value = $title;

        //the rest of the attributes

        //add the attributes to the element
        $element->appendChild($attrId);
        $element->appendChild($attrTitle);

        //add the element to the dox
        $singleBook->documentElement->appendChild($element);

        //output the result (don't forget to save if needed :) )
        echo $singleBook->saveXML();
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:41:29.817

尝试这个 ：

```
$xml = '<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <bookcollection>
 <items>
 <item id="483">
 <title>Database systems management and design/</title>
 <isbn>0877091153</isbn>
 <url>http://library.hud.ac.uk/catlink/bib/483</url>
 <borrowedcount>28</borrowedcount>
 <courses>
 <course>CC140</course>
 </courses>
 </item>
 </items>
 </bookcollection>';

$array = json_decode(json_encode((array)simplexml_load_string($xml)),1);

echo "<pre>";
print_r($array); 
```

获取 id ：

`echo $id = $array['items']['item']['@attributes']['id'];`

您将获得作为数组的输出，从该数组中获取值：

```
Array
(
    [items] => Array
        (
            [item] => Array
                (
                    [@attributes] => Array
                        (
                            [id] => 483
                        )

                    [title] => Database systems management and design/
                    [isbn] => 0877091153
                    [url] => http://library.hud.ac.uk/catlink/bib/483
                    [borrowedcount] => 28
                    [courses] => Array
                        (
                            [course] => CC140
                        )

                )

        )

) 
```

# asp.net - 动态压缩时如何修复err_content_decoding_failed？

> ID：15112104
> 
> 赞同：6
> 
> 时间：2013-02-27T12:25:14.907
> 
> 标签：asp.net, iis-7, compression

我正在开发一个 ASP.Net 网站，目前正在对其进行优化。我正在尝试对其启用动态内容压缩，但它不起作用。

我明白了

> 错误 330 (net::ERR_CONTENT_DECODEDING_FAILED)：未知错误。

*   在我的开发环境中，它运行良好。

    *   我已经在发布模式下构建了项目我已经添加了动态内容压缩模块，启用了动态内容压缩并检查了这是我收到的。
*   我有一个安装了 IIS 的 AWS EC2 服务器 windows 2008 R2。

    *   我已经在发布模式下构建了项目，并将其发布到一个文件夹，我将其部署到服务器。
    *   我已经尝试使用与开发人员机器上相同的 web.config 文件，但没有运气

将此添加到 web.config：

```
<httpCompression
    directory="%SystemDrive%\inetpub\temp\IIS Temporary Compressed Files"
    dynamicCompressionDisableCpuUsage="90"
    dynamicCompressionEnableCpuUsage="80"
    maxDiskSpaceUsage="100" minFileSizeForComp="2700"
    noCompressionForRange="true"
    sendCacheHeaders="false"
    staticCompressionDisableCpuUsage="100"
    staticCompressionEnableCpuUsage="80"
    >
    <scheme name="gzip"
        dll="%Windir%\system32\inetsrv\gzip.dll" />
    <dynamicTypes>
        <add mimeType="text/*" enabled="true" />
        <add mimeType="message/*" enabled="true" />
        <add mimeType="application/javascript" enabled="true" />
        <add mimeType="application/json" enabled="true" />
        <add mimeType="application/xml" enabled="true" />
        <add mimeType="*/*" enabled="false" />
    </dynamicTypes>
    <staticTypes>
        <add mimeType="text/*" enabled="true" />
        <add mimeType="message/*" enabled="true" />
        <add mimeType="application/javascript" enabled="true" />
        <add mimeType="application/json" enabled="true" />
        <add mimeType="application/atom+xml" enabled="true" />
        <add mimeType="application/rss+xml" enabled="true" />
        <add mimeType="application/xaml+xml" enabled="true" />
        <add mimeType="application/xml" enabled="true" />
        <add mimeType="image/svg+xml" enabled="true" />
        <add mimeType="*/*" enabled="false" />
    </staticTypes>
</httpCompression>
<urlCompression doDynamicCompression="true" /> 
```

有人知道可能出了什么问题吗？

提前致谢。

**编辑：** 尝试通过提琴手运行请求并得到响应：“内容无法解压缩。

GZip 标头中的幻数不正确。确保您传递的是 GZip 流。”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-08-18T10:02:04.913

我们遇到了这个问题，导致 IIS 临时压缩文件由于磁盘空间不足而损坏/截断：

1.  跑`inetmgr`
2.  转到机器，**压缩**功能
3.  删除**Cache目录的内容**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-02T19:47:07.197

我的一个同事也有同样的问题。

他正在使用非标准应用程序池身份运行他的应用程序。为了这个解决方案，我称之为 identity `SomeOtherApplicationPoolIdentity`。

问题是它缺少对他缓存目录中的子文件夹的权限（要查看 IIS 使用的缓存目录，请转到 IIS 管理器，单击顶级树节点，单击压缩；默认情况下是`%SystemDrive%\inetpub\temp\IIS Temporary Compressed Files`）：

[![在此处输入图像描述](../Images/daab26d74d61fa987ac2dcc2604bcbf7.png)](https://i.stack.imgur.com/2IBDB.png)

在 内部`%SystemDrive%\inetpub\temp\IIS Temporary Compressed Files`，他缺少一个名为 的子文件夹的权限，该子文件夹`SomeOtherApplicationPoolIdentity`根据他的应用程序池标识上下文命名，所以他只是从该子文件夹继承父文件夹的权限并且它起作用了，因为父文件夹通常授予权限、`IIS_IUSRS`、`SYSTEM`和`Administrators`本地管理用户帐户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-12T22:53:19.257

尝试指定 dynamicCompressionBeforeCache="false"

我试图使用 dynamicCompressionBeforeCache="true" 因为我认为它会导致我的缓存对象被压缩保存 - 这样它们就可以作为较小的文件提供，但得到了同样的错误......

```
<!--http://www.iis.net/configreference/system.webserver/urlcompression-->
<urlCompression doStaticCompression="true" doDynamicCompression="true" dynamicCompressionBeforeCache="false" />
<httpCompression 
  directory="%SystemDrive%\inetpub\temp\IIS Temporary Compressed Files"
  dynamicCompressionDisableCpuUsage="90"
  dynamicCompressionEnableCpuUsage="80"
  maxDiskSpaceUsage="100"
  minFileSizeForComp="2700"
  noCompressionForRange="true"
  sendCacheHeaders="false"
  staticCompressionDisableCpuUsage="100"
  staticCompressionEnableCpuUsage="80">
    <scheme name="gzip" dll="%Windir%\system32\inetsrv\gzip.dll" />
    <dynamicTypes>
      <add mimeType="text/*" enabled="true" />
      <add mimeType="message/*" enabled="true" />
      <add mimeType="application/javascript" enabled="true" />
      <add mimeType="application/json" enabled="true" />
      <add mimeType="application/xml" enabled="true" />
      <add mimeType="*/*" enabled="false" />
    </dynamicTypes>
    <staticTypes>
      <add mimeType="text/*" enabled="true" />
      <add mimeType="message/*" enabled="true" />
      <add mimeType="application/javascript" enabled="true" />
      <add mimeType="application/json" enabled="true" />
      <add mimeType="application/atom+xml" enabled="true" />
      <add mimeType="application/rss+xml" enabled="true" />
      <add mimeType="application/xaml+xml" enabled="true" />
      <add mimeType="application/xml" enabled="true" />
      <add mimeType="image/svg+xml" enabled="true" />
      <add mimeType="*/*" enabled="false" />
    </staticTypes>
</httpCompression> 
```

> [http://www.iis.net/configreference/system.webserver/urlcompression](http://www.iis.net/configreference/system.webserver/urlcompression)
> 
> dynamicCompressionBeforeCache 属性指定 IIS 是否将动态压缩尚未缓存的内容。当 dynamicCompressionBeforeCache 属性为 true 时，IIS 会在第一次发出请求时动态压缩响应并将内容排队等待压缩。后续请求将被动态处理，直到压缩响应被添加到缓存目录。一旦将压缩响应添加到缓存目录中，缓存的响应就会发送到客户端以供后续请求。当 dynamicCompressionBeforeCache 为 false 时，IIS 返回未压缩的响应，直到已将压缩的响应添加到缓存目录。
> 
> 注意：如果在输出缓存响应被刷新时dynamicCompressionBeforeCache属性为真，则在响应被放入输出缓存之前不会执行动态压缩。但是，如果 doDynamicCompression 属性为 true，则在输出缓存被响应填充后仍会发生动态压缩。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T12:50:06.757

我的想法是检查应用程序池用户（如果您有任何特定用户）是否对目录“%SystemDrive%\inetpub\temp\IIS Temporary Compressed Files”拥有完全权限

# android - HttpResponseCache 不缓存文件

> ID：15112105
> 
> 赞同：3
> 
> 时间：2013-02-27T12:25:16.510
> 
> 标签：android, caching, httpresponsecache

我正在尝试使用 HttpResponseCache 缓存此文件：[http](http://media.admob.com/sdk-core-v40.js) : //media.admob.com/sdk-core-v40.js。基本上我调用 getFileFromUrl 函数两次，以便第一次从 Internet 获取资源，第二次从缓存中获取资源。

但是，对于这两种方法，它都会出现此错误：“资源未缓存！java.io.FileNotFoundException： http: [//media.admob.com/sdk-core-v40.js](http://media.admob.com/sdk-core-v40.js) ”。这是否意味着该文件未缓存并且无法访问？代码有什么问题？

```
enableHttpCaching();

getFileFromURL(url);
getFileFromURL(url);

public static void getFileFromURL(String src) {
     try {
            URL url = new URL(src);
            HttpURLConnection connection=(HttpURLConnection)url.openConnection();
            connection.setUseCaches(true);
            connection.addRequestProperty("Cache-Control", "only-if-cached" );        
            InputStream input = connection.getInputStream();
            System.out.println("The resource was cached!");
        }catch (FileNotFoundException e) {
            System.out.println("The resource was not cached!" + e);
        }catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:02:17.323

从它的外观来看，这不是缓存，因为响应文件有

```
Cache-Control:max-age=0 
```

# c# - Objective-c 中的 Enum.ToString("g")

> ID：15112107
> 
> 赞同：0
> 
> 时间：2013-02-27T12:25:20.977
> 
> 标签：c#, objective-c, enums

在 c# 中，您声明一个枚举，并可以通过使用`enumVariable.ToString("g")` Objective-c 中的命令执行此操作来打印它的字面量

例如在 c# 中，我可以编写以下内容：

```
class Sample 
{
    enum Colors {Red, Green, Blue, Yellow = 12};

    public static void Main() 
    {
       Colors myColor = Colors.Yellow;
       Console.WriteLine("myColor.ToString(\"d\") = {0}", myColor.ToString("d"));         
       Console.WriteLine("myColor.ToString(\"g\") = {0}", myColor.ToString("g"));
   }
}

// This example produces the following results:
// myColor.ToString("d") = 12
// myColor.ToString("g") = Yellow 
```

我知道我可以创建一个字符串数组来保存值或使用 switch case 编写一个函数，但这似乎是一个适合 1970 年编写的 ac 语言的解决方案:)

如果您知道一个优雅的解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:26:29.163

当开发人员想要从枚举值接收字符串时，最常见的情况是使用它（字符串）作为复杂对象（XML、JSON、URL 等）的值/键。

并非总是希望枚举值中的字符串完全相同。在 Objective-C 中，您应该使用映射。使用枚举中的键（包装在 NSNumber 中）和 NSString 类型的值创建 NSDictionary。

```
// your enum
enum
{
    kAPXStateOpened,
    kAPXStateClosed,
    kAPXStateUnknown
};
...

// static map
static NSDictionary *theStateMap = nil;
static dispatch_once_t theStateMapDispatch = 0;
dispatch_once(&theStateMapDispatch,
^{
    theStateMap = [NSDictionary dictionaryWithObjectsAndKeys:
                @"opened", [NSNumber numberWithInteger:kAPXStateOpened],
                @"closed", [NSNumber numberWithInteger:kAPXStateClosed],
                @"broken", [NSNumber numberWithInteger:kAPXStateUnknown],
                nil];
});

self.currentState = kAPXStateOpened;
NSString *theStringValueFromState = [theStateMap objectForKey:[NSNumber numberWithInteger:self.currentState]];
NSLog(theStringValueFromState); // "opened" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:15:17.823

ObjC 中的枚举是具有一组已定义值的整数而不是对象。因此，它们有方法。可能有一些 C 函数可以处理枚举，但我不熟悉它们。（如果其他人知道他们会很感兴趣）。

因为枚举是整数，所以也可以将未定义的值放入使用枚举类型的变量中。

这是一个例子：

```
typedef enum {
    enumValueA,
    enumValueB
} EnumName;

// Useful when you want to define specific values.
typedef enum {
    enumX = 1, 
    enumY = 100
} AnotherEnum; 
```

并在代码中：

```
EnumName x = enumValueA; 
```

然而，这些也是有效的：

```
EnumName x = 0; // = enumValueA
EnumName x = 3; // Not defined in the enum. 
```

所以枚举基本上是一种为一组特定的整数值使用类似英语的名称的方法。

要从中获取字符串以包含在 UI 和日志记录中，您需要手动将枚举值映射到字符串。枚举值提供索引的字符串数组相对容易放置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T13:44:56.957

```
int someInt = [NString stringWithFormat:@"%d",yourEnumVariable]; 
```

# java - 有没有一种抽象的方法来获取java中实体的所有属性？

> ID：15112111
> 
> 赞同：1
> 
> 时间：2013-02-27T12:25:26.040
> 
> 标签：java, properties, entity

我在 Windows 7 上使用 Netbeans 7.2.1。

我正在尝试获取实体的所有属性并将它们存储在字符串数组中。我想以我能想到的最一般的方式来做到这一点，所以像 jCSV 中的方法：

```
public void writeAll(List<E> data) throws IOException {
    for (E e : data) {
        write(e);
    }
} 
```

你可以在这里找到那个包：[https ://code.google.com/p/jcsv/](https://code.google.com/p/jcsv/)

```
public String[] getProperties( E e ){

    String [] properties = new String[ e.numberOfProperties ];
    int i = -1;

    for ( P p : e ) {

        i += 1;
        properties[i] = p.toString(); // OR properties[i] = e.getProperty[i].toString();

    }

    return properties;
} 
```

我觉得应该有某种方法可以使用[Properties 类](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)来做到这一点，但我想不出一种方法来使用它*从*实体中获取属性。我认为这只是一些简单的事情，但我看不出在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:48:38.000

正如@Ian Roberts 提到的，在[这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/beans/Introspector.html)查看 java Introspector 类。仅当您使用标准 Java bean 命名约定来访问实体的属性时，该类才有用。

您要做的是使用方法获取`BeanInfo`类的 ，`Introspector#getBeanInfo(Class beanClass)`然后使用 的`getMethodDescriptors()`方法`BeanInfo`检索 bean 的所有“getter”方法。从那里您可以遍历它们并获取实体的属性并调用`toString()`它们。

与仅使用普通的旧反射相比，使用此类的优点之一是，它会`BeanInfo`在对其进行自省后缓存该类，从而提高性能。您也不必对反射代码之类的`get`或`set`在反射代码中的任何内容进行硬编码。

`getProperties`这是使用内省器的方法的示例：

```
public <T> String[] getProperties(T entity){
    String[] properties = null;
    try {
        BeanInfo entityInfo = Introspector.getBeanInfo(entity.getClass());
        PropertyDescriptor[] propertyDescriptors = entityInfo.getPropertyDescriptors();
        properties = new String[propertyDescriptors.length];
        for(int i = 0 ; i < propertyDescriptors.length ; i++){
            Object propertyValue = propertyDescriptors[i].getReadMethod().invoke(entity);
            if(propertyValue != null){
                properties[i] = propertyValue.toString();
            } else {
                properties[i] = null;
            }
        }
    } catch (Exception e){
        //Handle your exception here.
    }
    return properties;
} 
```

此示例编译并运行。

请记住，Apache Commons 也有一个库[BeanUtils](http://commons.apache.org/proper/commons-beanutils//)，它对这类事情也很有帮助（Javadoc [here](http://commons.apache.org/proper/commons-beanutils//api/)）。

# javascript - 使用节点时输入参数未定义

> ID：15112115
> 
> 赞同：0
> 
> 时间：2013-02-27T12:25:46.200
> 
> 标签：javascript, node.js, buster.js

我刚开始用 javascript 进行开发，但在分离概念（js、node、buster...）方面仍然存在一些问题，所以如果问题不在正确的范围内，请原谅我。

我正在尝试开发一个 js 应用程序，并希望有一个测试驱动的方法。

这是我在 js 文件夹中定义的一个简单对象：

```
var Friend = (function(name, email){
    console.log(name)
    if (typeof(name) != "string") throw "Expected a string for name"

    this.name = name;
    this.email = email;
}());
module.exports = Friend(name, email); 
```

在我的测试文件夹中，我想使用friend_test.js 对其进行测试

```
var buster = require("buster");
var Friend = require('/../js/friend');

buster.testCase("A normal Friend", {
    "should have a name and a mail": function(){
    var my_friend = new Friend("Georges", "georges@hotmail.com");
    assert.equals(my_friend.name, "Georges");
    assert.equals(my_friend.email, "georges@hotmail.com");
    }
}); 
```

我在这里担心的是，如果我运行测试，朋友中不知道姓名和电子邮件，就像没有传递输入参数一样：

```
$ node test/friend-test.js
undefined
undefined

friend.js:4
    if (typeof(name) != "string") throw "Expected a string for name"
                                  ^
Expected a string for name 
```

我做错了什么？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:46:01.417

嗯，似乎我试图让事情变得比需要的更复杂。

通过将朋友定义为函数：

```
var Friend = function(name, email){
    if (typeof(name) != "string") throw "Expected a string for name"

    //TODO: Check email is valid here

    this.name = name;
    this.email = email;
};

module.exports = Friend; 
```

问题似乎解决了

$ node test/friend-test.js 一个普通的朋友：. 1个测试用例，1个测试，2个断言，0个失败，0个错误，0个超时完成在0.003s内

# c# - 带有 QueryString 值的 asp 链接

> ID：15112118
> 
> 赞同：1
> 
> 时间：2013-02-27T12:25:53.670
> 
> 标签：c#, asp.net, query-string

我有一个包含在这样的 LinkBut​​ton 中的名称列表

```
<asp:LinkButton CssClass="link_nombre_paciente_espera" runat="server" PostBackUrl="Default.aspx?id=<%#Eval('id')%>" Text=' <%#Eval("name") %>' ID="name" /> 
```

但它不起作用。当我在 url 中单击它时：

```
Default.aspx?id=<%#Eval('id')%> 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:28:41.420

```
<asp:LinkButton PostBackUrl="Default.aspx?id=<%#Eval('id')%>" Text='<%#Eval("name")%>' /> 
```

有错字。这只是 PostBackUr。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:35:56.747

尝试像文本一样交换双引号

```
'Default.aspx?id=<%#Eval("id")%>' 
```

代替

```
"Default.aspx?id=<%#Eval('id')%>" 
```

# socialengine - 如何在社交引擎上获取发布时间戳

> ID：15112121
> 
> 赞同：1
> 
> 时间：2013-02-27T12:26:09.033
> 
> 标签：socialengine

您好我正在尝试以“上次更新：十分钟前”或“上次更新：1 小时前”或“上次更新：昨天”或“上次更新：三天前”等格式获取用户时间戳。

我希望能够呼出时间戳。请在下面找到我已经拥有的：

```
$currentUserID=Engine_Api::_()->user()->getViewer()->getIdentity();
$sSqlInviter="select creation_date  from engine4_core_status where resource_id=".$currentUserID;
$dbInviterSqli=Zend_Db_Table_Abstract::getDefaultAdapter();
$stmtInviter=$dbInviterSqli->query($sSqlInviter);
$rowInviter=$stmtInviter->fetch();
$post_time_count=$rowInviter['creation_date'];
echo $this->timestamp($post_time_count); 
```

但它从我刷新页面开始计数。

提前致谢

这个我也解决了。。

```
$sSqlInviter="select creation_date  from engine4_core_status where resource_id=".$currentUserID." order by creation_date desc limit 1"; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:22:51.967

看起来你已经从你的数据库中获得了时间，但问题是如何在考虑时区的情况下正确使用它。您可以尝试使用此代码的一部分：

```
$oldTz = date_default_timezone_get();               // get old timezone
date_default_timezone_set($viewer->timezone);       // temporarily set user's timezone as default
$start = strtotime($starttime);                     // do something you need
date_default_timezone_set($oldTz);                  // set default timezone back for the rest part of controller
$starttime = date('Y-m-d H:i:s', $start);           // use existing data 
```

希望这可以帮助。

# button - Corona SDK - 带有 LetterBox 问题的“ShowOverlay”

> ID：15112123
> 
> 赞同：3
> 
> 时间：2013-02-27T12:26:21.470
> 
> 标签：button, lua, storyboard, overlay, coronasdk

我有一个按钮，按下时调用以下函数

```
local function showHudPressed()
    local options =
    {
        effect = "slideLeft",
        time = 400,
        isModal = true,
        params = { global = Global }
    }
    storyboard.showOverlay( "PopOver", options)
end 
```

并且覆盖在屏幕上带有动画等，没问题！isModal 也可以工作，我可以重新点击按钮，并且不会调用该方法......正如我所期望的那样。

但是同一个按钮，如果我在左边 30px 内移动，按钮就可以工作。更奇怪的是……如果我将它移动到 35 px，右侧不会起作用，但左侧不会。移回 40px 没有问题！

我在屏幕上尝试了 2 个按钮，只有在靠近屏幕边缘时才会出现问题。

这是一个错误吗---

PS发生在设备和模拟器上

感谢您的任何想法

* * *

好的，所以 zoomEven 可以防止这个问题....但是在 iPhone 5 上时 pos. 画面乱七八糟。所以信箱保持屏幕上的位置正确，但是信箱缩放区域中的触摸基本上会弄乱弹出框的模式......最好是没有缩放......但是你可以使用@2x......那又怎样你要吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:30:00.403

在信箱模式下，您的东西可能会在信箱区域“流血”，而模式区域阻止程序仅阻止内容区域。

因此，所有处于负面位置的东西，或者大于`display.contentWidth`并且`display.contentHeight`可能不会被阻止的位置。

# php - 验证来自 cURL 的请求

> ID：15112124
> 
> 赞同：0
> 
> 时间：2013-02-27T12:26:22.030
> 
> 标签：php, function, curl, verification

我让我的脚本使用 cURL 将一些数据发布到新站点（服务器），但我想要一种方法让我的第二个脚本（服务器）验证发布数据的服务器。就像是：

```
 If (in_array('sending_server', $array)) {
     /* continue the script */
 } else {
     die()
 } 
```

例如，我有这个函数检查请求是否使用 AJAX

```
 function is_ajax() {

     // BOOLEAN return if AJAX
     return isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest';

 } 
```

但我不知道如何编写检查服务器的函数。有人知道如何写它或知道我在哪里可以找到有用和类似的东西吗？

# python - 如何针对单个值测试多个变量是否相等？

> ID：15112125
> 
> 赞同：777
> 
> 时间：2013-02-27T12:26:23.243
> 
> 标签：python, if-statement, comparison, match, boolean-logic

我正在尝试制作一个将多个变量与整数进行比较并输出三个字母的字符串的函数。我想知道是否有办法将其翻译成 Python。所以说：

```
x = 0
y = 1
z = 3
mylist = []

if x or y or z == 0 :
    mylist.append("c")
if x or y or z == 1 :
    mylist.append("d")
if x or y or z == 2 :
    mylist.append("e")
if x or y or z == 3 : 
    mylist.append("f") 
```

这将返回一个列表：

```
["c", "d", "f"] 
```

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：1039
> 
> 时间：2013-02-27T12:27:40.217

您误解了布尔表达式的工作原理；它们不像英语句子那样工作，并猜测您在这里谈论的是所有名称的相同比较。您正在寻找：

```
if x == 1 or y == 1 or z == 1: 
```

`x`并且`y`以其他方式自行评估（`False`如果`0`，`True`否则）。

您可以使用针对[tuple](https://docs.python.org/3/tutorial/datastructures.html#tuples-and-sequences)的包含测试来缩短它：

```
if 1 in (x, y, z): 
```

或者更好：

```
if 1 in {x, y, z}: 
```

使用[a`set`](https://docs.python.org/3/tutorial/datastructures.html#sets)来利用恒定成本成员资格测试（即`in`，无论左侧操作数是什么，都需要固定的时间）。

### 解释

当您使用 时`or`，python 将运算符的每一侧视为*单独*的表达式。该表达式`x or y == 1`首先被视为对 的布尔测试`x`，然后如果为 False，`y == 1`则测试该表达式。

这是由于[运算符优先级](http://docs.python.org/3/reference/expressions.html#operator-precedence)。运算符的`or`优先级低于`==`测试，因此*首先*评估后者。

但是，即使*不是*这种情况，并且表达式`x or y or z == 1`实际上被解释为`(x or y or z) == 1`，这仍然不会像您期望的那样做。

`x or y or z`将评估为“真实”的第一个参数，例如 not `False`，数字 0 或空（有关 Python 在布尔上下文中认为 false 的详细信息，请参见[布尔表达式）。](http://docs.python.org/3/reference/expressions.html#boolean-operations)

所以对于 values `x = 2; y = 1; z = 0`，`x or y or z`将解析为`2`，因为这是参数中第一个类似 true 的值。然后`2 == 1`会`False`，即使`y == 1`会`True`。

反过来也一样；针对单个变量测试多个值；`x == 1 or 2 or 3`会因为同样的原因而失败。使用`x == 1 or x == 2 or x == 3`或`x in {1, 2, 3}`。

* * *

## 回答 #2

> 赞同：113
> 
> 时间：2013-07-11T21:56:54.860

使用以下字典结构可以更轻松地解决您的问题：

```
x = 0
y = 1
z = 3
d = {0: 'c', 1:'d', 2:'e', 3:'f'}
mylist = [d[k] for k in [x, y, z]] 
```

* * *

## 回答 #3

> 赞同：75
> 
> 时间：2015-08-19T02:34:58.547

正如 Martijn Pieters 所说，正确且最快的格式是：

```
if 1 in {x, y, z}: 
```

使用他的建议，您现在将拥有单独的 if 语句，以便 Python 将读取每个语句，无论前者是`True`还是`False`. 如：

```
if 0 in {x, y, z}:
    mylist.append("c")
if 1 in {x, y, z}:
    mylist.append("d")
if 2 in {x, y, z}:
    mylist.append("e")
... 
```

这将起作用，但是*如果*您习惯使用字典（请参阅我在那里所做的），您可以通过制作一个将数字映射到您想要的字母的初始字典来清理它，然后只需使用 for 循环：

```
num_to_letters = {0: "c", 1: "d", 2: "e", 3: "f"}
for number in num_to_letters:
    if number in {x, y, z}:
        mylist.append(num_to_letters[number]) 
```

* * *

## 回答 #4

> 赞同：52
> 
> 时间：2013-07-11T21:16:33.583

直接写法`x or y or z == 0`是

```
if any(map((lambda value: value == 0), (x,y,z))):
    pass # write your logic. 
```

但我不认为，你喜欢它。:) 这种方式很丑陋。

另一种方式（更好）是：

```
0 in (x, y, z) 
```

顺便说一句，很多`if`s 可以写成这样

```
my_cases = {
    0: Mylist.append("c"),
    1: Mylist.append("d")
    # ..
}

for key in my_cases:
    if key in (x,y,z):
        my_cases[key]()
        break 
```

* * *

## 回答 #5

> 赞同：35
> 
> 时间：2015-05-25T03:53:36.050

如果您非常懒惰，可以将值放入数组中。如

```
list = []
list.append(x)
list.append(y)
list.append(z)
nums = [add numbers here]
letters = [add corresponding letters here]
for index in range(len(nums)):
    for obj in list:
        if obj == num[index]:
            MyList.append(letters[index])
            break 
```

您也可以将数字和字母放入字典并执行此操作，但这可能比简单的 if 语句要复杂得多。这就是你试图变得更加懒惰的结果:)

还有一件事，你的

```
if x or y or z == 0: 
```

将编译，但不会以您想要的方式编译。当您简单地将变量放在 if 语句中时（示例）

```
if b 
```

程序将检查变量是否不为空。编写上述语句的另一种方法（更有意义）是

```
if bool(b) 
```

Bool 是 python 中的一个内置函数，它基本上执行验证布尔语句的命令（如果您不知道那是什么，这就是您现在要在 if 语句中创建的 :)）

我发现的另一种懒惰方式是：

```
if any([x==0, y==0, z==0]) 
```

* * *

## 回答 #6

> 赞同：33
> 
> 时间：2014-06-04T17:09:22.123

要检查一个值是否包含在一组变量中，您可以使用内置模块 `itertools`和`operator`.

例如：

进口：

```
from itertools import repeat
from operator import contains 
```

声明变量：

```
x = 0
y = 1
z = 3 
```

创建值的映射（按照您要检查的顺序）：

```
check_values = (0, 1, 3) 
```

用于`itertools`允许重复变量：

```
check_vars = repeat((x, y, z)) 
```

最后，使用该`map`函数创建一个迭代器：

```
checker = map(contains, check_vars, check_values) 
```

然后，在检查值时（按原始顺序），使用`next()`：

```
if next(checker)  # Checks for 0
    # Do something
    pass
elif next(checker)  # Checks for 1
    # Do something
    pass 
```

ETC...

这有一个优势，`lambda x: x in (variables)`因为`operator`它是一个内置模块，并且比使用`lambda`它必须创建自定义就地函数更快、更高效。

检查列表中是否存在非零（或 False）值的另一个选项：

```
not (x and y and z) 
```

相等的：

```
not all((x, y, z)) 
```

* * *

## 回答 #7

> 赞同：31
> 
> 时间：2015-06-09T20:46:34.917

Set is the good approach here, because it orders the variables, what seems to be your goal here. `{z,y,x}` is `{0,1,3}` whatever the order of the parameters.

```
>>> ["cdef"[i] for i in {z,x,y}]
['c', 'd', 'f'] 
```

This way, the whole solution is O(n).

* * *

## 回答 #8

> 赞同：30
> 
> 时间：2015-01-13T12:10:25.557

我认为这会更好地处理它：

```
my_dict = {0: "c", 1: "d", 2: "e", 3: "f"}

def validate(x, y, z):
    for ele in [x, y, z]:
        if ele in my_dict.keys():
            return my_dict[ele] 
```

输出：

```
print validate(0, 8, 9)
c
print validate(9, 8, 9)
None
print validate(9, 8, 2)
e 
```

* * *

## 回答 #9

> 赞同：30
> 
> 时间：2015-04-10T03:29:39.387

如果你想使用 if，下面的 else 语句是另一种解决方案：

```
myList = []
aList = [0, 1, 3]

for l in aList:
    if l==0: myList.append('c')
    elif l==1: myList.append('d')
    elif l==2: myList.append('e')
    elif l==3: myList.append('f')

print(myList) 
```

* * *

## 回答 #10

> 赞同：30
> 
> 时间：2016-09-10T15:44:32.407

这里提供的所有优秀答案都集中在原始海报的具体要求上，并集中在`if 1 in {x,y,z}`Martijn Pieters 提出的解决方案上。
他们忽略的是这个问题的更广泛含义：
**如何针对多个值测试一个变量？**
例如，如果使用字符串，则提供的解决方案不适用于部分命中：
测试字符串“Wild”是否在多个值中

```
>>> x = "Wild things"
>>> y = "throttle it back"
>>> z = "in the beginning"
>>> if "Wild" in {x, y, z}: print (True)
... 
```

或者

```
>>> x = "Wild things"
>>> y = "throttle it back"
>>> z = "in the beginning"
>>> if "Wild" in [x, y, z]: print (True)
... 
```

对于这种情况，最容易转换为字符串

```
>>> [x, y, z]
['Wild things', 'throttle it back', 'in the beginning']
>>> {x, y, z}
{'in the beginning', 'throttle it back', 'Wild things'}
>>> 

>>> if "Wild" in str([x, y, z]): print (True)
... 
True
>>> if "Wild" in str({x, y, z}): print (True)
... 
True 
```

然而，应该注意的是，如前所述`@codeforester`，这种方法会丢失单词边界，如下所示：

```
>>> x=['Wild things', 'throttle it back', 'in the beginning']
>>> if "rot" in str(x): print(True)
... 
True 
```

这 3 个字母`rot`确实在列表中组合存在，但不是作为单个单词。测试“ rot ”会失败，但如果列表项之一是“rot in hell”，那也会失败。
结果是，如果使用此方法，请注意您的搜索条件，并注意它确实有此限制。

* * *

## 回答 #11

> 赞同：26
> 
> 时间：2015-02-27T01:31:00.527

```
d = {0:'c', 1:'d', 2:'e', 3: 'f'}
x, y, z = (0, 1, 3)
print [v for (k,v) in d.items() if x==k or y==k or z==k] 
```

* * *

## 回答 #12

> 赞同：26
> 
> 时间：2015-06-29T07:03:58.413

此代码可能会有所帮助

```
L ={x, y, z}
T= ((0,"c"),(1,"d"),(2,"e"),(3,"f"),)
List2=[]
for t in T :
if t[0] in L :
    List2.append(t[1])
    break; 
```

* * *

## 回答 #13

> 赞同：13
> 
> 时间：2018-12-03T05:13:18.373

您可以尝试如下所示的方法。在这种方法中，您可以自由指定/输入您希望输入的变量数量。

```
mydict = {0:"c", 1:"d", 2:"e", 3:"f"}
mylist= []

num_var = int(raw_input("How many variables? ")) #Enter 3 when asked for input.

for i in range(num_var): 
    ''' Enter 0 as first input, 1 as second input and 3 as third input.'''
    globals()['var'+str('i').zfill(3)] = int(raw_input("Enter an integer between 0 and 3 "))
    mylist += mydict[globals()['var'+str('i').zfill(3)]]

print mylist
>>> ['c', 'd', 'f'] 
```

* * *

## 回答 #14

> 赞同：10
> 
> 时间：2017-06-05T06:50:28.773

一线解决方案：

```
mylist = [{0: 'c', 1: 'd', 2: 'e', 3: 'f'}[i] for i in [0, 1, 2, 3] if i in (x, y, z)] 
```

或者：

```
mylist = ['cdef'[i] for i in range(4) if i in (x, y, z)] 
```

* * *

## 回答 #15

> 赞同：9
> 
> 时间：2018-08-06T06:26:34.530

在 Python 中表示伪代码的最 Pythonic 方式是：

```
x = 0
y = 1
z = 3
mylist = []

if any(v == 0 for v in (x, y, z)):
    mylist.append("c")
if any(v == 1 for v in (x, y, z)):
    mylist.append("d")
if any(v == 2 for v in (x, y, z)):
    mylist.append("e")
if any(v == 3 for v in (x, y, z)):
    mylist.append("f") 
```

* * *

## 回答 #16

> 赞同：9
> 
> 时间：2019-02-17T17:55:26.153

也许您需要直接设置输出位的公式。

```
x=0 or y=0 or z=0   is equivalent to x*y*z = 0

x=1 or y=1 or z=1   is equivalent to (x-1)*(y-1)*(z-1)=0

x=2 or y=2 or z=2   is equivalent to (x-2)*(y-2)*(z-2)=0 
```

让我们映射到位：`'c':1 'd':0xb10 'e':0xb100 'f':0xb1000`

isc 的关系（是'c'）：

```
if xyz=0 then isc=1 else isc=0 
```

如果公式[https://youtu.be/KAdKCgBGK0k?list=PLnI9xbPdZUAmUL8htSl6vToPQRRN3hhFp&t=315使用数学](https://youtu.be/KAdKCgBGK0k?list=PLnI9xbPdZUAmUL8htSl6vToPQRRN3hhFp&t=315)

[C]：`(xyz=0 and isc=1) or (((xyz=0 and isc=1) or (isc=0)) and (isc=0))`

[d]：`((x-1)(y-1)(z-1)=0 and isc=2) or (((xyz=0 and isd=2) or (isc=0)) and (isc=0))`

...

通过以下逻辑连接这些公式：

*   逻辑`and`是方程的平方和
*   逻辑`or`是方程的乘积

你会有一个总方程表达总和，你有总和的总公式

那么 sum&1 是 c，sum&2 是 d，sum&4 是 e，sum&5 是 f

在此之后，您可以形成预定义的数组，其中字符串元素的索引将对应于准备好的字符串。

`array[sum]`给你字符串。

* * *

## 回答 #17

> 赞同：7
> 
> 时间：2018-11-06T14:26:24.817

它可以很容易地完成

```
for value in [var1,var2,var3]:
     li.append("targetValue") 
```

* * *

## 回答 #18

> 赞同：5
> 
> 时间：2018-09-20T02:18:55.697

用一个值测试多个变量：`if 1 in {a,b,c}:`

用一个变量测试多个值：`if a in {1, 2, 3}:`

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2018-08-27T09:45:00.790

看起来你正在构建某种凯撒密码。

一个更通用的方法是：

```
input_values = (0, 1, 3)
origo = ord('c')
[chr(val + origo) for val in inputs] 
```

输出

```
['c', 'd', 'f'] 
```

不确定这是否是您的代码所期望的副作用，但您的输出顺序将始终进行排序。

如果这是您想要的，最后一行可以更改为：

```
sorted([chr(val + origo) for val in inputs]) 
```

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2018-07-31T16:54:00.637

您可以使用字典：

```
x = 0
y = 1
z = 3
list=[]
dict = {0: 'c', 1: 'd', 2: 'e', 3: 'f'}
if x in dict:
    list.append(dict[x])
else:
    pass

if y in dict:
    list.append(dict[y])
else:
    pass
if z in dict:
    list.append(dict[z])
else:
    pass

print list 
```

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2019-10-11T12:17:15.273

没有dict，试试这个解决方案：

```
x, y, z = 0, 1, 3    
offset = ord('c')
[chr(i + offset) for i in (x,y,z)] 
```

并给出：

```
['c', 'd', 'f'] 
```

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2021-04-11T19:30:17.260

[正如this answer所解释的](https://stackoverflow.com/a/20002504/918959)那样`or`，它不能那样工作。

虽然通用答案将被使用

```
if 0 in (x, y, z):
    ... 
```

这不是针对*特定*问题的最佳方法。在您的情况下，您正在*重复测试*，因此值得组成一*组*这些变量：

```
values = {x, y, z}

if 0 in values:
    mylist.append("c")

if 1 in values:
    mylist.append("d") 
```

我们可以使用字典来简化这一点——这将产生相同的值：

```
mappings = {0: "c", 1: "d", ...}
for k in mappings:
    if k in values:
        mylist.append(mappings[k]) 
```

或者，如果 的顺序`mylist`是任意的，您可以遍历这些*值*并将它们与映射匹配：

```
mappings = {0: "c", 1: "d", ...}
for v in (x, y, z):
    if v in mappings:
        mylist.append(mappings[v]) 
```

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2019-09-09T18:23:24.270

你可以联合这个

```
x = 0
y = 1
z = 3 
```

在一个变量中。

```
In [1]: xyz = (0,1,3,) 
In [2]: mylist = [] 
```

将我们的条件更改为：

```
In [3]: if 0 in xyz: 
    ...:     mylist.append("c") 
    ...: if 1 in xyz: 
    ...:     mylist.append("d") 
    ...: if 2 in xyz: 
    ...:     mylist.append("e") 
    ...: if 3 in xyz:  
    ...:     mylist.append("f") 
```

输出：

```
In [21]: mylist                                                                                
Out[21]: ['c', 'd', 'f'] 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2019-04-05T22:03:52.720

这将对您有所帮助。

```
def test_fun(val):
    x = 0
    y = 1
    z = 2
    myList = []
    if val in (x, y, z) and val == 0:
        myList.append("C")
    if val in (x, y, z) and val == 1:
        myList.append("D")
    if val in (x, y, z) and val == 2:
        myList.append("E")

test_fun(2); 
```

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2020-09-09T12:01:06.013

你可以通过两种方式开发它

```
 def compareVariables(x,y,z):
        mylist = []
        if x==0 or y==0 or z==0:
            mylist.append('c')
        if  x==1 or y==1 or z==1:
            mylist.append('d')
        if  x==2 or y==2 or z==2:
            mylist.append('e')
        if  x==3 or y==3 or z==3:
            mylist.append('f')
        else:
            print("wrong input value!")
        print('first:',mylist)

        compareVariables(1, 3, 2) 
```

或者

```
 def compareVariables(x,y,z):
        mylist = []
        if 0 in (x,y,z):
             mylist.append('c')
        if 1 in (x,y,z):
             mylist.append('d')
        if 2 in (x,y,z):
             mylist.append('e')
        if 3 in (x,y,z):
             mylist.append('f')
        else:
             print("wrong input value!")
        print('second:',mylist)

        compareVariables(1, 3, 2) 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2022-01-22T19:40:34.227

**没有 if 的用法示例：**

```
x,y,z = 0,1,3
values = {0:"c",1:"d",2:"e",3:"f"} # => as if usage
my_list = [values[i] for i in (x,y,z)]

print(my_list) 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2019-11-06T11:11:52.207

### 问题

而用于测试多个值的模式

```
>>> 2 in {1, 2, 3}
True
>>> 5 in {1, 2, 3}
False 
```

可读性很强，可以在很多情况下工作，但有一个陷阱：

```
>>> 0 in {True, False}
True 
```

但我们想拥有

```
>>> (0 is True) or (0 is False)
False 
```

### 解决方案

前一个表达式的一个概括是基于[ytpillai](https://stackoverflow.com/a/30430962/5599281)的答案：

```
>>> any([0 is True, 0 is False])
False 
```

可以写成

```
>>> any(0 is item for item in (True, False))
False 
```

虽然这个表达式返回正确的结果，但它不像第一个表达式那样可读:-(

* * *

## 回答 #28

> 赞同：-1
> 
> 时间：2021-02-27T12:35:01.273

这是另一种方法：

```
x = 0
y = 1
z = 3
mylist = []

if any(i in [0] for i in[x,y,z]):
    mylist.append("c")
if any(i in [1] for i in[x,y,z]):
    mylist.append("d")
if any(i in [2] for i in[x,y,z]):
    mylist.append("e")
if any(i in [3] for i in[x,y,z]):
    mylist.append("f") 
```

它是**列表理解**和**任何**关键字的组合。

# r - 当您期望约会时收到 40182 或 15368 之类的数字时该怎么办？

> ID：15112133
> 
> 赞同：0
> 
> 时间：2013-02-27T12:27:00.283
> 
> 标签：r, excel, date

在某些情况下，您正在处理日期，当您突然得到看起来像 40182 或 15368 的数字时。例如，当您从 Excel 导入数据时会发生这种情况，但也可能发生在您使用 R 中的操作遇到的值内。这些值如下所示：

```
date1 <- 40182
date2 <- 15368 
```

但是，在数据的上下文中，我们会期望日期值（例如`2011-12-16`）。为什么日期会这样显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:27:00.283

这是有效的日期值，但来源可能不清楚。在上述情况下，您将日期转换如下：

```
# the value comes from Excel
as.Date(40182,origin="1899-12-30")

# the value comes from R but put in number format
as.Date(15368,origin="1970-01-01") 
```

# c - 如何使用 video4linux api 获取网络摄像头设备支持的帧大小和帧间隔列表？

> ID：15112134
> 
> 赞同：2
> 
> 时间：2013-02-27T12:27:02.553
> 
> 标签：c, v4l2, video4linux

我正在尝试使用 V4L2 api 枚举网络摄像头设备支持的帧大小和帧速率。我尝试使用以下代码进行操作但没有成功。ioctl 函数总是返回-1。

```
#include <stdio.h>
#include <fcntl.h>
#include "linux/videodev2.h"
int main(int argc, char **argv) {
    int fd = open("/dev/video0", O_RDWR);
    struct v4l2_frmivalenum frmsize;
    memset(&frmsize, 0, sizeof (struct v4l2_frmsizeenum));
    ioctl(fd, VIDIOC_ENUM_FRAMEINTERVALS , &frmsize);
    printf("%u \n", frmsize.he);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-05T21:20:12.887

您应该在[ioctl VIDIOC_ENUM_FRAMESIZES](http://linuxtv.org/downloads/v4l-dvb-apis/vidioc-enum-framesizes.html)之前设置 in 参数以获取帧大小：

```
Table A.34\. struct v4l2_frmivalenum
__u32   index               IN: Index of the given frame interval in the enumeration.
__u32   pixel_format        IN: Pixel format for which the frame intervals are enumerated.
__u32   width               IN: Frame width for which the frame intervals are enumerated.
__u32   height              IN: Frame height for which the frame intervals are enumerated. 
```

和[ioctl VIDIOC_ENUM_FRAMEINTERVALS](http://linuxtv.org/downloads/v4l-dvb-apis/vidioc-enum-frameintervals.html)获取帧间隔：

```
Table A.31\. struct v4l2_frmsizeenum
__u32   index               IN: Index of the given frame size in the enumeration.
__u32   pixel_format        IN: Pixel format for which the frame sizes are enumerated. 
```

那么枚举帧大小和帧间隔的实现可能是：

```
#include <stdio.h>
#include <string.h>
#include <fcntl.h>
#include "linux/videodev2.h"
void printFrameInterval(int fd, unsigned int fmt, unsigned int width, unsigned int height)
{
    struct v4l2_frmivalenum frmival;
    memset(&frmival,0,sizeof(frmival));
    frmival.pixel_format = fmt;
    frmival.width = width;
    frmival.height = height;
    while (ioctl(fd, VIDIOC_ENUM_FRAMEINTERVALS, &frmival) == 0) 
    {
        if (frmival.type == V4L2_FRMIVAL_TYPE_DISCRETE) 
            printf("[%dx%d] %f fps\n", width, height, 1.0*frmival.discrete.denominator/frmival.discrete.numerator);
        else
            printf("[%dx%d] [%f,%f] fps\n", width, height, 1.0*frmival.stepwise.max.denominator/frmival.stepwise.max.numerator, 1.0*frmival.stepwise.min.denominator/frmival.stepwise.min.numerator);
        frmival.index++;    
    }
}

int main(int argc, char **argv) {
    unsigned int width=0, height=0;;
    int fd = open("/dev/video0", O_RDWR);
    struct v4l2_frmsizeenum frmsize;
    memset(&frmsize,0,sizeof(frmsize));
    frmsize.pixel_format = V4L2_PIX_FMT_JPEG;
    while (ioctl(fd, VIDIOC_ENUM_FRAMESIZES, &frmsize) == 0)
    {
        if (frmsize.type == V4L2_FRMSIZE_TYPE_DISCRETE) 
        {
            printFrameInterval(fd, frmsize.pixel_format, frmsize.discrete.width, frmsize.discrete.height);
        }
        else
        {
            for (width=frmsize.stepwise.min_width; width< frmsize.stepwise.max_width; width+=frmsize.stepwise.step_width)
                for (height=frmsize.stepwise.min_height; height< frmsize.stepwise.max_height; height+=frmsize.stepwise.step_height)
                    printFrameInterval(fd, frmsize.pixel_format, width, height);

        }
        frmsize.index++;
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-10T20:35:05.677

我认为您使用的驱动程序没有实现`vidioc_enum_frameintervals`.

请注意，每个视频驱动程序都会注册`v4l2_ioctl_ops`.

例如，在内核 3.7 中，`drivers/media/usb/s2255/s2255drv.c`实现了它。`drivers/staging/media/go7007/go7007-v4l2.c` 也实现它。

但是，虚拟视频驱动程序`drivers/media/platform/vivi.c`没有实现它。

# azure - MP4 文件在 Windows azure 媒体服务上播放不流畅

> ID：15112136
> 
> 赞同：0
> 
> 时间：2013-02-27T12:27:10.283
> 
> 标签：azure

我有 3 个月的试用订阅，我计划使用 azure 媒体服务来托管我的视频内容。对于测试，这就是我正在做的

1) 从长尾视频网站，我下载了一个 MP4 视频 url，它在长尾网站上播放得很好。

这是播放器链接，您可以在其中查看使用该播放器在浏览器中的播放效果。

www.longtailvideo.com/jw-player/wizard/

我下载视频的视频网址是

[http://content.bitsontherun.com/videos/3XnJSIm4-kNspJqnJ.mp4](http://content.bitsontherun.com/videos/3XnJSIm4-kNspJqnJ.mp4)

2）下载后，我重命名这个视频并使用Portal的上传功能将其上传到媒体服务。然后我将其编码为 HTML5 视频，然后发布。发布后，我得到了这个网址

[https://quanqamedia.blob.core.windows.net/asset-b58375e6-15d2-46f4-b40f-8163d6d27797/longtail.mp4?st=2013-02-27T12%3A00%3A45Z&se=2015-02-27T12%3A00% 3A45Z&sr=c&si=d84c6326-9cdf-43dc-9d4c-20ca02893719&sig=YbpxZdLsMiLakLc22GbJqDqpk4i7Hen7AQIRZy5xvQg%3D](https://quanqamedia.blob.core.windows.net/asset-b58375e6-15d2-46f4-b40f-8163d6d27797/longtail.mp4?st=2013-02-27T12%3A00%3A45Z&se=2015-02-27T12%3A00%3A45Z&sr=c&si=d84c6326-9cdf-43dc-9d4c-20ca02893719&sig=YbpxZdLsMiLakLc22GbJqDqpk4i7Hen7AQIRZy5xvQg%3D)

但是当我将此网址用于某些播放器或直接在chrome中打开时，它的播放速度很慢而且很奇怪。

任何人都可以指导我正确的方向吗？我在这里做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:57:02.997

You're new to the SO-Community, so I can't post this as a comment:

I accessed both videos with Chrome and VLC. The one hosted in WAMS is neither slow nor strange. The quality is slightly better on the original video - but this is due to the re-encoding...

# ios - ios/objective c中的内存泄漏问题

> ID：15112138
> 
> 赞同：0
> 
> 时间：2013-02-27T12:27:11.797
> 
> 标签：ios, objective-c, memory-management, memory-leaks, clang-static-analyzer

我正在开发 ios 应用程序，现在想测试它是否存在内存泄漏，我使用了

> clang 静态分析器

它给了我这个错误报告

```
-(void)pass
{
printf("reading plist info");   
// Path to the plist (in the application bundle)
NSString *path = [[NSBundle mainBundle] pathForResource:
                  @"sortednames" ofType:@"plist"];

// Build the array from the plist  
NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfFile:path];

for (id key in dict) {
    NSLog(@"bundle: key=%@, value=%@", key, [dict objectForKey:key]);
    string_values=[dict objectForKey:key];
    //NSLog(@"bundle data: key=%@, value=%@", key, [string_values objectAtIndex:0]);
}
//[dict release];
} 
```

分析器提供的信息是 ![我现在做什么？？？](../Images/805e1d94019a6d01d98feb1897fb64b3.png)

还有一件事对于我的应用程序的内存管理是否足够？？？？
或者我必须做更多的任务？？？
感谢您的回复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:45:07.800

```
string_values = [[dict objectForKey:key] **retain**]; 
```

您应该合成一个强/保留属性并通过 self.string_values 分配您的 ivar。然后您可以释放您的字典，并且 string_value 仍然有效。

```
...
@property(nonatomic, retain)NSString* string_value;
...
@synthetyse string_value;
... 
```

然后

```
self.string_values = [dict objectForKey:key]; 
```

不，静态分析器不是内存泄漏的防弹工具。它可以在算法上找到计算时间的泄漏，但不能找到运行时的泄漏。这就是为什么它被称为**静态**分析器。但顺便说一句，它真的很有帮助！

然后，您可以分析您的应用程序并使用泄漏工具来检查其他泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:45:17.893

你可以直接使用 NSDictionary 的对象。无需分配。你可以像这样使用。

```
NSString *path = [[NSBundle mainBundle] pathForResource:
                  @"sortednames" ofType:@"plist"];

dict = [NSDictionary dictionaryWithContentsOfFile: 
                         path]; 
```

希望它会帮助你。

# opengl - 由于缩放而取消翻译

> ID：15112140
> 
> 赞同：0
> 
> 时间：2013-02-27T12:27:15.873
> 
> 标签：opengl, graphics, 3d, directx-9

在其中一个渲染场景中，我将相机聚焦在箭头的尖端。我缩放箭头并改变相机焦点。我应该如何计算箭头所需的平移值以抵消由于缩放而发生的平移并保持相机焦点不变？（我无法更改相机变量） ![在此处输入图像描述](../Images/d1c7cb2e6100a460b4a404427c079018.png) 假设红色圆圈是相机焦点。第二帧显示了所需的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:37:00.307

如果您将相机平移到原点，对其进行缩放，然后将其平移回来（按缩放量平移），这应该将您的相机放置在正确的位置。当不在原点时缩放事物往往会使它们远离原点，因为它们的位置和其他所有东西一样被缩放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:35:41.017

什么叫“相机对焦”？那是你创造的东西吗？或者OpenGL里面的东西？

我将从该特定点应用转换。我的意思是，规模的中心。这样你就可以保住这个职位。

# android - Android - 最佳实践登录应用程序

> ID：15112151
> 
> 赞同：1
> 
> 时间：2013-02-27T12:27:46.030
> 
> 标签：android, login

我想用注册/登录模块构建一个应用程序，我想知道如何处理与 Android 的登录会话。我有一个 Django API 服务器端。用户可能会登录以执行某些特定操作（例如查看他们的个人资料）。

做这样的事情的最好方法是什么？（我知道如何使用 Android 进行开发，但我想知道如何设计这些功能）

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:33:38.453

其中一些可能有多种方式：

一世。GoogleAuthUtil API 是一种允许用户使用用户已注册其手机的 Gmail 用户帐户（即 Google Play 帐户）进行身份验证的 API。这将省略创建登录屏幕和身份验证的要求。

欲了解更多信息，请查看：

[http://android-developers.blogspot.co.uk/2013/01/verifying-back-end-calls-from-android.html](http://android-developers.blogspot.co.uk/2013/01/verifying-back-end-calls-from-android.html)

ii. 制作您自己的登录屏幕并验证用户名和密码并将其存储在内部文件系统中。一旦您想与服务器通信，就从该文件中检索此信息并将其发送到服务器。

第一个将取决于使用 google Services API。在这种情况下，您不必担心注册用户......忘记了您的密码以及您需要在登录屏幕上构建的所有类型的东西。

而第二种方法将是独立的并且仅针对您的应用程序。优点是您将拥有完全的控制权，但您必须自己管理所有的小细节。

# xml - as3从xml文件加载图片

> ID：15112152
> 
> 赞同：-4
> 
> 时间：2013-02-27T12:27:47.427
> 
> 标签：xml, actionscript-3, flash

请有人可以帮助我！我正在从带有 的文件中加载数据`xml`，`FLASH`除了显示来自文件中链接的图片外，一切正常`xml`。该`xml`文件有`whitespaces`. `whitespaces`我已经解决了文本的问题，但由于xml 文件中的原因，图片仍未显示。

请问谁能帮帮我？/??`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:32:31.120

查看`ignoreWhitespace`物业。`URL`反正你为什么会有空格？

[Adobe 帮助 - 忽略空白](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/XML.html#ignoreWhitespace)

还有一些代码和xml会有所帮助

# silverlight - Visual Studio 2012 中的 Silverlight 5 单元测试

> ID：15112154
> 
> 赞同：6
> 
> 时间：2013-02-27T12:28:00.220
> 
> 标签：silverlight, visual-studio-2012

Visual Studio 2012 中缺少“Silverlight 单元测试应用程序”项目类型。我可以在 VS 2010 中看到它，但在 VS2012 中看不到。我已经从 codeplex 安装并重新安装了 Silverlight 5 工具包。在 VS2010 中创建和运行 Silverlight 单元测试项目是可行的，但是在 VS2012 中通过 R# 运行测试时，我得到“不确定：未运行测试”

任何帮助/建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-12T13:09:59.683

这个链接有对我有用的答案：

[http://social.msdn.microsoft.com/Forums/vstudio/en-US/5e991b0d-8061-4c4e-a17d-82b4abd58d6c/vs-2012-silverlight-unittest](http://social.msdn.microsoft.com/Forums/vstudio/en-US/5e991b0d-8061-4c4e-a17d-82b4abd58d6c/vs-2012-silverlight-unittest)

> 我建议开始一个新的 Silverlight 项目并安装 SilverlightToolkit-Testing NuGet 包。在您的测试文件中，为 Microsoft.Silverlight.Testing 和 Microsoft.VisualStudio.TestTools.UnitTesting 输入 usings 并使用常规的 [TestClass] 和 [TestMethod] 属性。要运行它们，您可以通过放入`RootVisual = UnitTestSystem.CreateTestPage();`App.Application_Startup() 来使用 Toolkit 测试运行器，使用 Silverlight 单元测试适配器（当前版本为 v0.0.1，并不能真正工作），或者（迄今为止最好的方法）安装 ReSharper 和 AgUnit 插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T12:05:44.963

可以从普通的 .NET 库中引用 Silverlight 库。因此，如果您打算只对视图模型进行单元测试，您可以将它们移至单独的项目，创建一个普通的（不是 Silverlight 特定的）单元测试项目并添加对视图模型项目的引用。

# jquery - 选择具有一个属性或另一个属性的元素

> ID：15112159
> 
> 赞同：1
> 
> 时间：2013-02-27T12:28:20.547
> 
> 标签：jquery

我希望能够选择具有属性列表之一的所有元素。例如，我想选择具有`mandatory`属性`validate='true'`或两者兼有的所有元素。

我试过这个：

```
$('[mandatory="true",validate]').each(... 
```

但我得到一个错误。

我在网上找不到任何替代品。有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T12:28:56.270

要选择*“所有具有强制属性或 validate='true' 或两者兼有的元素”*，请使用

```
$('[mandatory],[validate="true"]') 
```

如果您真正想要的是至少有一个值为“true”的属性，请使用

```
$('[mandatory="true"],[validate="true"]') 
```

关于您的评论：如果您想选择具有*这两个*属性的元素，您只需删除逗号。

# android - 为android C#在imageview mono上设置标签

> ID：15112165
> 
> 赞同：1
> 
> 时间：2013-02-27T12:28:45.667
> 
> 标签：android, tags, imageview, xamarin.android

出于比较原因，我正在尝试将标签添加到图像视图中。但不幸的是，我得到了一个非法参数异常。尝试添加标签时，我的代码发生异常。这是我的做法。

```
mainImage.SetTag(1, "circle"); 
```

我做错了吗？看起来很简单，一个键和一个对象值。我想过使用内容描述值，但单声道似乎不支持获取内容描述。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:44:43.820

为避免冲突，您必须为标签使用已知的资源 ID - 您不能只选择自己的值。

尝试在 Resources/Values 中添加一个带有内容的 AndroidResource XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
  <item type="id" name="MyUniqueTag"/>
</resources> 
```

那么你应该可以使用

```
 mainImage.SetTag(Resource.Id.MyUniqueTag, "circle"); 
```

# python - xmpppy 自动重连

> ID：15112166
> 
> 赞同：2
> 
> 时间：2013-02-27T12:28:47.107
> 
> 标签：python, xmpppy

我想使用 xmpppy 和一个名为[pygtalkrobot](http://code.google.com/p/pygtalkrobot/)的库来运行一个小聊天机器人。但是我有一个非常糟糕/旧的路由器，所以经常断开连接。我希望脚本能够以某种方式检测连接问题，或者每 5 分钟定期检测一次，或者使用某些事件，如果出现问题则重新连接。

但是我不知道如何检查或使用什么事件（如果有的话）。在我看来，xmpppy API 文档也很不清楚。

# c# - Enum ToString 显示为数字

> ID：15112167
> 
> 赞同：11
> 
> 时间：2013-02-27T12:28:51.330
> 
> 标签：c#, enums, tostring

我有一个枚举

```
private enum TimeUnit
{      
  Day,
  Month,
  Year
} 
```

我正在用以下内容填充描述：

```
return string.Concat(unit, "(s)"); 
```

其中 unit 是 TimeUnit。大多数情况下，这工作正常并显示“Days(s)”，但在特定服务器上显示为“1(s)”

什么会导致这个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T12:32:15.553

尝试使用[Enum.GetName()](http://msdn.microsoft.com/en-us/library/system.enum.getname.aspx)

它还具有[更安全](https://stackoverflow.com/a/483910/1821057)的优点，因为它需要：

*   您传入的值不为空。
*   您传入的值是枚举实际上可以用作其基础类型的类型，或者是枚举本身的类型。它在值上使用 GetType 来检查这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T12:31:10.197

您应该使用适当的格式`ToString`：

```
return string.Concat(unit.ToString("F"), "(s)"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T12:30:57.660

因为`Enum`数字枚举选项是用字符串表示的（认为它们是别名）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T12:41:38.397

[MSDN](http://msdn.microsoft.com/en-us/library/16c1xs4z%28v=vs.85%29.aspx)说：

> 此方法就像指定了通用格式字符“G”一样工作。也就是说，如果 FlagsAttribute 未应用于此枚举类型，并且有一个与此实例的值相等的命名常量，则返回值是一个包含常量名称的字符串。如果应用了 FlagsAttribute 并且有一个或多个命名常量的组合等于此实例的值，则返回值是一个字符串，其中包含一个以定界符分隔的常量名称列表。否则，返回值是此实例的数值的字符串表示形式。

因此，理想情况下，它应该可以正常工作（考虑到未应用 FlagsAttribute*并且有一个命名常量等于此实例的值*）。你能说说盒子之间的区别吗？

另外，尝试给出明确的数字。

```
private enum TimeUnit
{      
  Day = 1,
  Month = 2,
  Year = 3
} 
```

# java - 尝试使用 DAO 查找用户时出现 NullPointerException

> ID：15112178
> 
> 赞同：2
> 
> 时间：2013-02-27T12:29:24.557
> 
> 标签：java, nullpointerexception, actionlistener, dao

尝试使用 method 查找用户时遇到问题`findUser`。我创建了一个窗口“登录”以在我的应用程序中进行连接，当我单击“连接”按钮时，会显示以下错误：

```
 Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at com.alstom.ems2.application.login.connectionActionPerformed(login.java:127)
    at com.alstom.ems2.application.login.access$100(login.java:16)
    at com.alstom.ems2.application.login$2.actionPerformed(login.java:61)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:729)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:688)
    at java.awt.EventQueue$3.run(EventQueue.java:686)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:702)
    at java.awt.EventQueue$4.run(EventQueue.java:700)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:699)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:91) 
```

我正在使用 NetBeans 创建应用程序。

应用程序的代码是自动创建的，直到按钮部分：

```
private void initComponents() {

        login = new javax.swing.JTextField();
        jLabel2 = new javax.swing.JLabel();
        jLabel1 = new javax.swing.JLabel();
        connection = new javax.swing.JButton();
        password = new javax.swing.JPasswordField();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setIconImage(getIconImage());

        login.setPreferredSize(new java.awt.Dimension(150, 30));
        login.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                loginActionPerformed(evt);
            }
        });

        jLabel2.setText("Password");

        jLabel1.setText("User");

        connection.setText("Connect");
        connection.setPreferredSize(new java.awt.Dimension(80, 25));
        connection.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                connectionActionPerformed(evt);
            }
        }); 
```

按钮操作的 connectionActionPerformed。

```
private void connectionActionPerformed(java.awt.event.ActionEvent evt) {                                           
    // TODO add your handling code here:

    UserDAO u = null;
    User ut = null;

    ut = u.findUser(login.getText()); //error (login.java:127)

} 
```

UserDAO 的 findUser 方法

```
public User findUser(String login) {
    try{
        return  (User) em.createQuery("FROM User u WHERE u.login = '" +login+ "'").getSingleResult();
    }catch(NoResultException n){
        return null;
    }
    } 
```

最后一个，在数据库中创建用户。

```
public class App {
public static void main(String[] args) {
   EntityManager em = Data.createEntityManager();

    try {
       UserDAO u = new UserDAO (em);
       User us = new User();

       us.setLogin("lol");
       us.setPassword("test");

       u.create(us);  
    }
    catch (Exception e) {
        em.getTransaction().rollback();
        e.printStackTrace();
    }
    finally{
        em.close();
    }        
 }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T12:31:12.800

```
UserDAO u = null;
User ut = null;

ut = u.findUser(login.getText()); //error 
```

您的 UserDAO 对象 u 设置为 null。您将收到空指针错误，因为尚不存在 u 的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:33:31.230

那行不通

```
UserDAO u = null;
User ut = null;

ut = u.findUser(login.getText()); //error 
```

您将 u 声明为 null，然后调用 findUser。您必须启动 UserDAO：

```
UserDAO u = new UserDAO();
User ut = null;
ut = u.findUser(login.getText()); //error 
```

顺便说一句...您绝对确定这会起作用吗？

```
(User) em.createQuery("FROM User u WHERE u.login = '" +login+ "'").getSingleResult(); 
```

不需要“SELECT u FROM”吗？

```
(User) em.createQuery("Select u FROM User u WHERE u.login = '" +login+ "'").getSingleResult(); 
```

# java - cvFlip() 闪烁或返回 null

> ID：15112181
> 
> 赞同：0
> 
> 时间：2013-02-27T12:29:35.057
> 
> 标签：java, opencv, camera, javacv, iplimage

我正在做一个项目，其中涉及拍摄实时摄像头并将其显示在用户的窗口上。

由于默认情况下相机图像是错误的，所以我使用 cvFlip 翻转它（因此计算机屏幕就像一面镜子），如下所示：

```
while (true) 
{   
    IplImage currentImage = grabber.grab();
    cvFlip(currentImage,currentImage, 1);

    // Image then displayed here on the window. 
} 
```

这在大多数情况下都可以正常工作。然而，对于很多用户（主要是在速度更快的 PC 上）来说，摄像头画面会剧烈闪烁。基本上显示的是未翻转的图像，然后是翻转的图像，然后是未翻转的图像，一遍又一遍。

所以我然后改变了一些事情来检测问题......

```
while (true) 
{   
    IplImage currentImage = grabber.grab();
    IplImage flippedImage = null;
    cvFlip(currentImage,flippedImage, 1); // l-r = 90_degrees_steps_anti_clockwise
    if(flippedImage == null)
    {
        System.out.println("The flipped image is null");
        continue;
    }
    else
    {
        System.out.println("The flipped image isn't null");
        continue;
    }
} 
```

翻转的图像似乎总是返回 null。为什么？我究竟做错了什么？这真让我抓狂。

如果这是 cvFlip() 的问题，还有哪些其他方法可以翻转 IplImage？

感谢任何帮助的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:06:57.950

您需要使用空图像而不是 NULL 来初始化翻转图像，然后才能将结果存储在其中。此外，您应该只创建一次图像，然后重新使用内存以提高效率。因此，更好的方法如下（未经测试）：

```
IplImage current = null;
IplImage flipped = null;

while (true) {
  current = grabber.grab();

  // Initialise the flipped image once the source image information
  // becomes available for the first time.
  if (flipped == null) {
    flipped = cvCreateImage(
      current.cvSize(), current.depth(), current.nChannels()
    );
  }

  cvFlip(current, flipped, 1);
} 
```

# python - Django重定向传递一个（或多个）对象作为参数

> ID：15112183
> 
> 赞同：2
> 
> 时间：2013-02-27T12:29:38.120
> 
> 标签：python, django, url, redirect

上下文：我有 3 个应用程序 A、B 和 C

每个都有views.py 和urls.py 文件

视图.py

A 有 do_Ax(request, xpto), do_Ay(request, xpto), do_Az(request, xpto)

B 有 do_Bx(request)、do_By(request)、do_Bz(request)

C 有 do_Cx(request, xpto), do_Cy(request, xpto), do_Cz(request, xpto)

urls.py 一个

```
urlpatterns = patterns('',
                       url(r'^A_x/$', views.do_Ax, name='A_x'),
                       url(r'^A_y/$', views.do_Ay, name='A_y'),
                       url(r'^A_z/$', views.do_Az, name='A_z'), 
```

乙

```
urlpatterns = patterns('',
                       url(r'^B_x/$', views.do_Bx, name='B_x'),
                       url(r'^B_y/$', views.do_By, name='B_y'),
                       url(r'^B_z/$', views.do_Bz, name='B_z'), 
```

C

```
urlpatterns = patterns('',
                       url(r'^C_x/$', views.do_Cx, name='C_x'),
                       url(r'^C_y/$', views.do_Cy, name='C_y'),
                       url(r'^C_z/$', views.do_Cz, name='C_z'), 
```

我的全局应用程序的入口点是通过 B。在那里，我检查了一些东西并希望使用新参数**重定向**到 A 或 C 视图的正确方法......有没有办法可以做到这一点？

我尝试了一种 n00b 方法，但我得到一个 SuspiciousOperation 异常（“Unsafe redirect to URL with scheme ...”）

重要提示：我还有一个名为**top**的“父”应用程序，它具有以下 urls.py：

```
urlpatterns = patterns('',
    url(r'^A/', include('apps.top.A.urls', namespace="A")),
    url(r'^B/', include('apps.top.B.urls', namespace="B")),
    url(r'^C/', include('apps.top.C.urls', namespace="C")),
) 
```

请注意 >>>>> **XPTO**是一个对象！！！！不是文本值！<<<<<<<

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:42:20.097

```
from django.core.urlresolvers import reverse
from django import shortcuts

def do_Bx(request):
    # do some tests here and whatever
    xpto = whatever
    url = reverse("A_x", args=[xpto])
    return shortcuts.redirect(url) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:20:36.283

我认为您可能需要在 reverse() 调用中指定命名空间，因为您的父应用程序的 urls.py 定义了它们：

[如此处](https://stackoverflow.com/q/3578922/147072)所示：

```
url = reverse('A:A_x', args=[xpto]) 
```

# ios - 用 CGPath 画一条多色线

> ID：15112185
> 
> 赞同：4
> 
> 时间：2013-02-27T12:29:48.090
> 
> 标签：ios, objective-c, macos, core-graphics, cgpath

在下面，您会看到每次调用 drawMulticolorLine 时都会绘制一条多色线的代码。

```
 void drawMulticolorLine
    {
        CGContextBeginPath(secondaryContext);
        CGContextMoveToPoint(secondaryContext, h, v);
        for( int i = 1; i < lineWidth; ++ )
        {
            SetStrokeColor(i);
            CGContextAddLineToPoint(secondaryContext, h+i, v);
            CGContextDrawPath(secondaryContext, kCGPathFillStroke);
            CGContextMoveToPoint(secondaryContext, h+i, v);
        }
    }

    //a function that sets a different color for each i
    void SetStrokeColor(int i)
    {
        CGContextSetRGBStrokeColor(secondaryContext,…
    } 
```

上面的代码有效，但如果我在现实生活中使用它，它就是性能杀手。所以我尝试使用下面的代码来提高绘图性能。

```
 void drawMulticolorLine
    {
        CGContextBeginPath(secondaryContext);
        CGContextMoveToPoint(secondaryContext, h, v);
        for( int i = 1; i < lineWidth; ++ )
        {
            SetStrokeColor(i);
            CGContextAddLineToPoint(secondaryContext, h+i, v);
        }
        CGContextDrawPath(secondaryContext, kCGPathFillStroke);
    }

    //a function that sets a different color for each i
    void SetStrokeColor(int i)
    {
        CGContextSetRGBStrokeColor(secondaryContext,…
    } 
```

如果线条颜色始终相同，则此代码具有良好的性能。

我现在的问题是，一旦调用 CGContextDrawPath，整条线就会以最后一个 CGContextSetRGBStrokeColor 的颜色绘制。

有没有办法让路径保持添加的每个线段的颜色？

任何帮助是极大的赞赏。

干杯，bzt

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-15T18:05:49.750

最近在操场上玩，所以分享源代码。

```
extension CGFloat {
    static func random() -> CGFloat {
        return CGFloat(arc4random()) / CGFloat(UInt32.max)
    }
}

extension UIColor {
    static func random() -> UIColor {
        return UIColor(red:   .random(),
                       green: .random(),
                       blue:  .random(),
                       alpha: 1.0)
    }
}
let copy: CGPath = ...
let image = UIGraphicsImageRenderer(size: copy.boundingBoxOfPath.size).image { context in

    context.cgContext.setLineWidth(2)

    copy.applyWithBlock { element in
        switch element.pointee.type {
        case .moveToPoint:
            context.cgContext.move(to: element.pointee.points[0])
        case .addLineToPoint:
            context.cgContext.addLine(to: element.pointee.points[0])
            context.cgContext.setStrokeColor(UIColor.random().cgColor)
            context.cgContext.strokePath()
            context.cgContext.move(to: element.pointee.points[0])
        case .addQuadCurveToPoint:
            let controlPoint = element.pointee.points[0]
            let point = element.pointee.points[1]
            context.cgContext.addCurve(to: point, control1: controlPoint, control2: controlPoint)
            context.cgContext.setStrokeColor(UIColor.random().cgColor)
            context.cgContext.strokePath()
            context.cgContext.move(to: point)
        case .addCurveToPoint:
            let controlPoint1 = element.pointee.points[0]
            let controlPoint2 = element.pointee.points[1]
            let point = element.pointee.points[2]
            context.cgContext.addCurve(to: point, control1: controlPoint1, control2: controlPoint2)
            context.cgContext.setStrokeColor(UIColor.random().cgColor)
            context.cgContext.strokePath()
            context.cgContext.move(to: point)
        case .closeSubpath:
            context.cgContext.setStrokeColor(UIColor.random().cgColor)
            context.cgContext.strokePath()
        }
    }
} 
```

# windows-store-apps - Windows 应用商店拒绝提交的应用

> ID：15112190
> 
> 赞同：1
> 
> 时间：2013-02-27T12:30:07.410
> 
> 标签：windows-store-apps

我们今天通过 Windows 应用商店提交了我们的应用程序。

现在，我们发现了一个变化，那么无论如何要拒绝以前的构建并提交新的构建吗？它仅在今天早上提交，因此可能不在测试周期中。因此，如果可能，我们希望应用此更改。

我们必须等待应用提交状态吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:26:36.503

是的，在开发中心门户中，您可以在前一个申请仍在审核期间重新提交您的申请。您还可以在门户中查看您的应用的当前审核状态

不过，认证过程从头开始。

您可以在此处管理您的应用提交：[https ://appdev.microsoft.com/StorePortals/en-US/Home/Index](https://appdev.microsoft.com/StorePortals/en-US/Home/Index)

# vb.net - 压缩 JSON

> ID：15112192
> 
> 赞同：0
> 
> 时间：2013-02-27T12:30:11.013
> 
> 标签：vb.net, json

我将长 Json 字符串保存到 DB 中，从 Db 中获取字符串，然后将其序列化以进行其他操作，这使其速度变慢。

有什么好的解决方案可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:48:10.850

如前所述，您可能需要使用面向文档的 DB，例如[MongoDB](http://www.mongodb.org/)。

如果你不能做到这一点，请考虑组合数据存储：你可以存储在 RDBMS 中的一些东西，一些东西 - 在 MongoDB 中。

如果由于某些原因不可能，请查看 JSON 的二进制格式：[Smile](http://wiki.fasterxml.com/SmileFormat)或[BSON](http://bsonspec.org/)，这两种格式都被各种框架支持，例如 JSON.Net（供参考的文章[http://james.newtonking.com/archive /2009/12/26/json-net-3-5-release-6-binary-json-bson-support.aspx](http://james.newtonking.com/archive/2009/12/26/json-net-3-5-release-6-binary-json-bson-support.aspx) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:41:13.277

最好的方法是使用支持 json 存储的面向文档的数据库。这样您就可以查询或更新长 json 的一部分，而无需获取或序列化它。

# ajax - 服务器端的 MsgBox

> ID：15112194
> 
> 赞同：0
> 
> 时间：2013-02-27T12:30:18.233
> 
> 标签：ajax, vb.net, postback, ajaxcontroltoolkit

我正在尝试在我的网络应用程序上显示弹出消息。当我在本地电脑上正常运行我的应用程序时，会出现弹出消息框。但是，当我发布应用程序时，他们不会。

它的工作原理如下：按下按钮，它将从目录中提取文件，然后检查另一个目录以查看文件是否存在...如果文件存在，则需要弹出一个通知“文件已存在。要继续吗？如果用户单击“是”，则继续执行该代码，如果单击“否”，则该过程结束。

有人知道怎么做吗？

到目前为止我的代码：

```
If System.IO.File.Exists(acceptedExistsuNKNOWN) And System.IO.File.Exists(rejectedExistsUNKNOWN) Then
          'IF BOTH EXIST
            If MsgBox(acceptedExistsuNKNOWN & " & " & rejectedExistsUNKNOWN & "files already exists, do you want to rerun the process?", MsgBoxStyle.YesNo, "Files Exists") = MsgBoxResult.Yes Then
(continur
else
System.Diagnostics.Process.GetCurrentProcess.Kill()... 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:38:22.387

您的想法的问题是有人需要登录到服务器才能与模式弹出框进行交互；也就是说，如果这是可能的，因为它需要是*服务器上的那个人在*页面*上*执行*操作*才能成为弹出窗口的接收者，所以它不像其他用户可以向*他*发出弹出窗口。

 ***您在服务器端执行的操作在服务器端执行。

我认为您确实希望 ti在客户端*显示*，但希望逻辑使其在服务器端发生。这种方式行不通。相反，您可能会在响应中输出一些内容，*表明*应显示客户端弹出窗口。例如，您可以在页面上设置一个隐藏字段并设置一个值，然后*在*该值符合您的条件时使用 JavaScript 显示警报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:44:16.197

想想你在问什么。如果在服务器端弹出一个对话框，用户将无法看到它（它们在客户端）。此外，代码将处于停滞状态，直到有人关闭该用户无法看到的对话框。只有有权访问服务器的个人才能看到这一点。您是否打算让某人 24/7 全天候监视服务器？相反，您可能想要提醒用户。这可以通过将服务器代码的响应返回到客户端代码来显示对话框来完成。最简单的方法是抛出错误并将用户重定向到新页面以显示错误。如果您想要更流畅的东西，您可以使用更新的面板和 AjaxControlToolkit 的模态弹出扩展器。另一种方法是使用 ClientScript，如下所示：

```
try
{
    //check for files here
}
catch (Exception ex)
{
    string script = "<script>alert('" + ex.Message + "');</script>";
    if (!Page.IsStartupScriptRegistered("myErrorScript"))
    {
         Page.ClientScript.RegisterStartupScript("myErrorScript", script);
    }
} 
```***

# angularjs - AngularJS $http.post(..) - 错误：$http 未定义

> ID：15112198
> 
> 赞同：12
> 
> 时间：2013-02-27T12:30:36.157
> 
> 标签：angularjs

我是第一次尝试 AngularJS。使用该`$http.post("url", data)`功能时，我收到一条`Error: $http is not defined`控制台消息。

在我的 HTML 页面顶部，我在所有其他 JS 导入之后包含了 AngularJS。

由于小部件依赖等原因，我还包含了其他 JavaScript 库。我的脚本导入部分如下所示：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js" type="text/javascript"></script>
<script src="http://www.trirand.com/blog/jqgrid/js/i18n/grid.locale-en.js" type="text/javascript"></script>
<script src="http://www.trirand.com/blog/jqgrid/js/jquery.jqGrid.min.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/jquery-ui.min.js"></script>

<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.5/angular.min.js"></script> 
```

我有一个控制器用来向服务器发送一些数据：

```
function FormCtrl($scope) {
  $scope.sendData = function(){
        var data = "firstName=" + $scope.firstName + "&" +
            "lastName=" + $scope.lastName + "&" +
            "address=" + $scope.address + "&" +
            "postcode=" + $scope.postcode;

        $http.post("/data/person/put", data);
     };
} 
```

该`sendData`功能附加到一个按钮。一切正常，直到调用`$http.post(...)`控制台输出错误为止。

完整的错误列表是：

```
Error: $http is not defined
$scope.sendData@http://localhost:8080/angularjs/:96
Mc/x/<@https://ajax.googleapis.com/ajax/libs/angularjs/1.0.5/angular.min.js:71
ec[c]</</</<@https://ajax.googleapis.com/ajax/libs/angularjs/1.0.5/angular.min.js:142
e.prototype.$eval@https://ajax.googleapis.com/ajax/libs/angularjs/1.0.5/angular.min.js:87
e.prototype.$apply@https://ajax.googleapis.com/ajax/libs/angularjs/1.0.5/angular.min.js:87
ec[c]</</<@https://ajax.googleapis.com/ajax/libs/angularjs/1.0.5/angular.min.js:142
c.event.handle@http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js:63
c.event.add/o@http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js:57

https://ajax.googleapis.com/ajax/libs/angularjs/1.0.5/angular.min.js
Line 61 
```

我是否必须做其他事情来配置 AngularJS 才能使用该`$http.post`功能？

我直接从文档的 AngularJS **Shortcut Methods**部分提升了用法：http: [//docs.angularjs.org/api/ng.$http](http://docs.angularjs.org/api/ng.$http)

任何人都可以帮忙吗？

谢谢亚当

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-27T12:34:44.130

`function FormCtrl($scope) {`应该是`function FormCtrl($scope, $http) {`。

您需要注入控制器所需的所有服务，在这种情况下您正在使用`$scope`和`$http`服务，但您注入的只是`$scope`导致错误的原因。

前任：

```
function FormCtrl($scope, $http) {
    ....
}
FormCtrl.$inject = ['$scope', '$http']; 
```

[您可以在此处](http://docs.angularjs.org/tutorial/step_05)阅读有关缩小注射并发症的说明，请阅读`A Note on Minification`

# mysql - Linq 实体框架更新查询

> ID：15112201
> 
> 赞同：1
> 
> 时间：2013-02-27T12:30:47.493
> 
> 标签：mysql, entity-framework, ado.net, linq-to-entities

我想将 SQL 查询转换为 ADO.NET Entity Framework LINQ 查询。我正在使用 MySQL。

SQL：

```
Update Not As n 
Inner Join user As a 
On a.UserId = n.Not_UserId  
Set Not_Checked='0' 
Where n.Not_Checked='1' 
And n.Not_UserId='" + Not_UserId + "' 
```

林克：

```
var n5 = from u in db.user
         join n in db.not
         on u.UserId equals n.Not_UserId
         where n.Not_Checked==1 && n.Not_UserId==4
         select new
         {
               u,
               n
         }; 
```

我想更新`n`. 我试过`n5.n`了，但没有用。如何`n`使用 LINQ EF 进行更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:23:33.177

我想你正在寻找这样的东西：

```
foreach (var x in n5.ToList())
{
    x.n.Not_Checked = 0;
}
db.SaveChanges(); 
```

请注意，这`n5`是一个`IQueryable`，因此您必须循环才能到达元素，或者执行`FirstOrDefault()`才能获得第一个元素。

# asp.net-mvc - MVC4 表单输入验证 - 自定义错误范围

> ID：15112202
> 
> 赞同：4
> 
> 时间：2013-02-27T12:30:47.570
> 
> 标签：asp.net-mvc, validation, asp.net-mvc-4

我有一个带有多个输入的表单，`Html.TextBoxFor`每个输入都有一个从属性`ValidationMessageFor`中获取错误消息的表单。`ViewModel`对于这个例子，我们假设只有一个输入：

```
@Html.TextBoxFor(x => x.Code)
@Html.ValidationMessageFor(x => x.Code) 
```

当出现模型错误时，验证器会在几个跨度内显示它的错误消息，如下所示：

```
<input type="text" value="" name="Code" id="Code" data-val-required="Personalised code is required" data-val="true" class="input-validation-error">
<span data-valmsg-replace="true" data-valmsg-for="Code" class="field-validation-error">
    <span for="Code" generated="true" class="">Personalised code is required</span>
</span> 
```

如何自定义此错误消息？

例如将外部跨度更改为 div 并同时提供 div 和 span 类？

```
<div class="myOuterSpan" data-valmsg-replace="true" data-valmsg-for="Code" class="field-validation-error">
    <span class="myInnerSpan" for="Code" generated="true" class="">Personalised code is required</span>
</div> 
```

还是只有一个跨度？

```
<span class="errorWrapper" for="Code" generated="true">Code is required</span> 
```

还是将全部包裹在一个div中？

```
<div class="myOuterDiv">
    <span data-valmsg-replace="true" data-valmsg-for="Code" class="field-validation-error">
        <span for="Code" generated="true" class="">Personalised code is required</span>
    </span>
</div> 
```

你明白了……

**解决方案**

我的解决方案基于 Darin 的回答并创建了一个 CustomValidationMessage，而不是我最初打算创建的 customValidationMessageFOR。

控制器

```
ModelState.AddModelError("Code", "Invalid Code"); 
```

看法

```
@Html.CustomValidationMessage("Code") 
```

扩大

```
public static class Extensions
{
    public static MvcHtmlString CustomValidationMessage(this HtmlHelper htmlHelper, string modelName)
    {
        var modelState = htmlHelper.ViewData.ModelState[modelName];
        var modelErrors = modelState == null ? null : modelState.Errors;
        var modelError = ((modelErrors == null) || (modelErrors.Count == 0))
            ? null
            : modelErrors.FirstOrDefault(e => !string.IsNullOrEmpty(e.ErrorMessage)) ?? modelErrors[0];

        if (modelError != null)
        {
            return MvcHtmlString.Create("<span class='validation_wrapper customValidation'><span>" + modelError.ErrorMessage +"</span></span>");
        }

        return new MvcHtmlString(string.Empty);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T14:20:57.843

无法修改`ValidationMessageFor`助手生成的标记。如果你想这样做，你将不得不编写一个自定义助手。下面是这个助手的签名可能是这样的：

```
public static MvcHtmlString CustomValidationMessageFor<TModel, TProperty>(
    this HtmlHelper<TModel> htmlHelper, 
    Expression<Func<TModel, TProperty>> expression
)
{
    ...
} 
```

您也可以签出一个[`similar post`](https://stackoverflow.com/a/5412346/29407).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-16T14:53:33.807

真的不需要自定义扩展。例如：

控制器：

```
ModelState.AddModelError("InvalidLogin", "Your credentials are invalid.") 
```

看法：

```
@Html.ValidationMessageFor
(
  model => model.InvalidLogin, 
  "", 
  htmlAttributes: new { @class = "text-error" }, 
  tag: "div"
) 
```

# java - Java 接口对什么有用以及如何处理跨类方法？

> ID：15112205
> 
> 赞同：0
> 
> 时间：2013-02-27T12:31:00.277
> 
> 标签：java, methods, interface, code-injection

我知道 Java 接口用于声明将在更多类中使用的方法，因为这些类实现了它们。例如：

```
public interface MyInterface{

   void myVoidMethod();  
   Bool myBoolMethod(int x);  
   String myStringMethod(String a,String b);

} 
```

因此，据我了解，它主要用于确保在类中声明某些方法，并且这些方法通常是更通用的方法，并且可能会应用于更多类。但是那些应该已经包含一些代码并且应该应用于更多类的方法呢？
例如，如果我有很多需要`myBoolMethod`定义为的类怎么办

`Bool myBoolMethod(int x){
return x?0:1;}`
（我只是举了一个简单的例子，但显然我需要使用更复杂的方法）。我听说过“代码注入”并且我很确定它与它有关，但我不知道如何走得更远，我也不知道该怎么做才能在不同的地方重写相同的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:35:11.477

您正在寻找抽象类和继承。有关继承和在`super`此处使用关键字的更多信息：http: [//docs.oracle.com/javase/tutorial/java/IandI/super.html](http://docs.oracle.com/javase/tutorial/java/IandI/super.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:35:51.980

不必要。它也用于测试。如果您没有接口，则无法为测试目的提供自定义实现。另一个问题可能是“接口代码而不是实现”范式。让我举例说明：

假设你有一个`ArrayList`字符串：

```
ArrayList<String> list = new ArrayList<String>(); 
```

您在代码中使用它，但后来您发现您需要 a`LinkedList`因为它对您的问题更有效。

现在会发生什么？你必须在很多地方重构你的代码。但是，如果您`List`首先使用了该接口，则可以在不关心其实现的情况下将其传递出去，因此，如果您后来发现需要 a`LinkedList`而不是 an `ArrayList`，则只需在一个地方进行修改：

```
List<String> list = new LinkedList<String>(); 
```

如果您需要跨类方法，您可以创建一个`abstract`类并为您的`interface`. 如果您不覆盖它，它将在您的所有实现类中共享。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T12:33:57.920

使用 java 7，您必须使用抽象类来为方法提供默认实现。无法在接口中定义对象的某些行为。

使用 java 8，您将能够为接口中的方法提供默认实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T12:34:13.930

如果您希望确保类具有已经实现的某些方法，那么您希望使用[Abstract Class](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)。

接口只是一个契约，它规定当一个类同意实现该接口时，它必须为这些方法提供一个实现。当您希望通过让对象通过接口而不是通过对象的直接方法引用您的类来鼓励代码中的松散耦合时，这很有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-27T12:45:38.923

一个界面很有用（从实践经验来看），您想指定某个变量/参数应该符合其他一些海报提到的**合同**，而不是额外的。例如，你有一个被注入的资源（比如一个数据源），但你不想指定它是否应该是一个连接到一个 MySQL DB、一个 SQL Server DB 或一个你将要访问的虚拟数据源仅用于测试而不影响实时数据。因此，您将类型指定为接口类型，并在运行时注入适当实现类型的实例。如果您有兴趣，可以在 Google 上搜索一些注入 (CDI) 教程。

在其他情况下，您宁愿使用超类（抽象与否）。正确答案是：视情况而定，最好阅读（然后复习）有关 Java 语言基础的理论和书籍，以便能够针对您的特定情况做出最佳选择。

# asp.net-mvc-4 - 将 MVC 4 SimpleMembership 与现有的数据库优先 EF 模型一起使用

> ID：15112214
> 
> 赞同：16
> 
> 时间：2013-02-27T12:31:47.330
> 
> 标签：asp.net-mvc-4, entity-framework-5, sql-server-2012, simplemembership, ef-database-first

我第一次尝试在我的 MVC 4 中使用 SimpleMembership，我已经有一个现有的数据库和基于它创建的 EF5 模型！我搜索了很多，但我找不到如何在我的情况下使用它，也找不到在我自己的模型下的所有东西。

如果有人能给我一个如何做到这一点的想法，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-05T21:04:12.683

纯粹作为参考，为 ASP.NET MVC 4 Web 应用程序项目创建一个新的 Internet 应用程序模板（即通过文件 > 新项目）可能是一个好主意。

如果您查看`AccountController`，正如@zms6445 所说，它是用`InitializeSimpleMembership`属性装饰的。您可以在根目录的 Filters 文件夹中的 InitializeSimpleMembershipAttribute.cs 文件中找到此属性的实现。

在这里，这是难题的缺失部分 - 您需要连接现有数据库，以便`SimpleMembershipProvider`. 这是您需要的代码：

```
private class SimpleMembershipInitializer
{
    public SimpleMembershipInitializer()
    {
        try
        {
            if (!WebSecurity.Initialized)
            {
                WebSecurity.InitializeDatabaseConnection("CONNECTION_STRING_NAME", "USER_TABLE", "USER_ID_FIELD", "USER_NAME_FIELD", autoCreateTables: true);
            }
        }
        catch (Exception ex)
        {
            throw new InvalidOperationException("Something is wrong", ex);
        }
    }
} 
```

需要注意的一些事项：

1.  `CONNECTION_STRING_NAME`是您的 web.config ConnectionStrings 中的一个条目 - 您不能在此处使用模型连接字符串 -`SimpleMembershipProvider`无法识别该格式！您需要指定一个`System.Data.SqlClient`连接字符串，例如

    <add name="CONNECTION_STRING_NAME" connectionString="data source=SERVER;initial catalog=DATABASE;user id=USER;password=PASSWORD;" providerName="System.Data.SqlClient" />

2.  `USER_TABLE`是数据库中保存额外用户信息的表，例如名字、姓氏等。它通过 USER_ID_FIELD 链接到自动生成的表。

3.  `USER_ID_FIELD`通常是用户表的主键。它必须是类型`int`。

4.  `USER_ID_NAME`是用户的唯一名称，可以是电子邮件地址。

5.  `autoCreateTables`设置为`true`确保创建 SimpleMembership 工作所需的表（如果它们尚不存在）。

当然，这个代码只有在你通过 访问页面时才会被触发`AccountController`，因为它已经被属性修饰了。您可以在其中放置一个断点并查看它的运行情况。

这应该可以帮助您入门 - 如果您遇到困难，Internet 应用程序模板是一个很好的模板。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T15:34:40.217

在 appSettings 标记的 web.config 中，添加该行

```
<add key="enableSimpleMembership" value="true"/> 
```

SimpleMembership 是内置的，所以从这里你只需要编写

```
[InitializeSimpleMembership] 
```

在您的公共类 AccountController 之上：控制器

当您想强制用户登录您在页面控制器中编写的某个页面时

```
[Authorize] 
```

该表将在您的数据库中自动生成。如果您想向这些表中添加更多字段，您只需用谷歌搜索即可。

这是更多信息的链接[http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5- web-forms-and-asp-net-mvc-4-templates.aspx](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)

# eclipse - 未找到 RAD 项目参考/类

> ID：15112216
> 
> 赞同：1
> 
> 时间：2013-02-27T12:32:03.937
> 
> 标签：eclipse, reference, websphere, project, dependency-management

我有三个项目，我们在 RAD (Eclipse) 中称它们为 A、B 和 C。A 是一个简单的 java 项目，其中包含 B 和 C 都将使用的支持代码。B 和 C 都是将在 WebSphere 上运行的 webapp。

我写了 B，其中包含 A 作为构建路径中的项目引用，并将其包含在部署程序集中以作为 jar 放置在 web-inf/lib 中。这或多或少完美地工作。

C 是其他人编写的预先存在的项目，我必须对其应用相同的代码。我尝试了同样的技巧（我想），虽然它在编译时找到了 A，但当我发布到测试环境类时没有找到。当我导出耳朵时，我发现 C 有代表 A 的罐子，并且在类似的位置。但是，C 在 jar 的根目录中有一个 lib 目录（与战争相邻）。A.jar 在其中一场战争的 lib 中。

我从未在其他部署中看到过这个额外的 lib 文件夹，并且一直在搜索设置并且不知道它来自哪里。

所以我的问题是：1）有谁知道是什么产生了那个根 lib 文件夹，但更重要的是...... 2）知道为什么找不到我的类......我认为这个额外的 lib 以某种方式把它搞砸了，但是A.jar 位于 C.war 的 web-inf/lib 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:25:35.913

解决了。这就是发生的事情。我不知道的是，一位同事实际上在耳朵项目中创建了一个二级 lib 目录，因为他计划在那个耳朵下部署第二次战争，并想要一个共享库的地方。

我仍然不明白下一部分。出于某种原因，这个 lib 目录不只是添加到类路径中，而且似乎取代了 A.jar 所在的 web-inf/lib。由于他的项目（最终）也需要 A.jar，我很乐意将 A.jar 生成到该文件夹​​中。但我确实想了解为什么在创建此替代库时 web-inf/lib 停止工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:54:04.780

这被称为`library-directory`EAR 并包含可供所有模块访问的实用程序 jar。它默认为“lib”，但可以更改。

您应该使用 zip 工具编辑 ear 文件 -

*   如果两个 WAR 都需要 A.jar，请在 lib 文件夹中尝试。它不应包含 WAR 中所需的任何代码
*   否则，编辑 ear 文件并将其从 lib 文件夹中取出

# android - 在android中使用包含布局时，布局重叠在另一个之上

> ID：15112217
> 
> 赞同：5
> 
> 时间：2013-02-27T12:32:11.307
> 
> 标签：android, layout, include

我有 3 个布局，main.xml、layout1.xml、layout2.xml。

layout1.xml 有大约 10 个文本字段，layout2.xml 有 4 个按钮

在 main.xml 中，我将其他 2 个布局称为

```
<include layout="@layout/data_layout"/>     
<include layout="@layout/button_layout"
     android:layout_alignBottom="@layout/data_layout" /> 
```

现在我的问题是 layout1.xml 和 layout2.xml 都重叠在另一个之上。但我需要 layout2.xml 必须从 layout1.xml 的底部开始

关于这个有什么想法吗？

Main_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
 xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:orientation="vertical">

<TextView
     android:id="@+id/nieTxtState"
     android:layout_width="100dp"
     android:layout_height="wrap_content"
     android:padding="@dimen/padding_medium"
     android:text="@string/state"
     android:textSize="14dp" />

 <TextView
     android:id="@+id/nieTxtTNState"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:layout_toRightOf="@id/nieTxtState"
     android:padding="@dimen/padding_medium"
     android:text="@string/tnState"
     android:textSize="14dp" />

 <include 
     layout="@layout/data_layout"/>     
 <include 
     layout="@layout/button_layout"
     android:layout_alignBottom="@layout/data_layout" />

</RelativeLayout> 
```

数据布局.xml

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<RelativeLayout
    android:id="@+id/relativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@color/light_blue"
    android:orientation="vertical"
    android:scrollbars="vertical" >

    <TextView
        android:id="@+id/nieTxtState"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:padding="@dimen/padding_medium"
        android:text="@string/state"
        android:textSize="14dp" />

    <TextView
        android:id="@+id/nieTxtTNState"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@id/nieTxtState"
        android:padding="@dimen/padding_medium"
        android:text="@string/tnState"
        android:textSize="14dp" />

    <TextView
        android:id="@+id/txtViewDistrict"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/nieTxtTNState"
        android:layout_marginLeft="5dp"
        android:text="@string/district"
        android:textColor="@color/black" />

    <Spinner
        android:id="@+id/spnDistrict"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/txtViewDistrict"
        android:layout_marginLeft="2dp" />

    <TextView
        android:id="@+id/txtViewHSS"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/spnDistrict"
        android:layout_marginLeft="5dp"
        android:text="@string/hssSite"
        android:textColor="@color/black" />

    <Spinner
        android:id="@+id/spnHSS"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/txtViewHSS"
        android:layout_marginLeft="2dp" />

    <TextView
        android:id="@+id/txtViewAge"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/spnHSS"
        android:layout_marginLeft="5dp"
        android:text="@string/age"
        android:textColor="@color/black" />

    <EditText
        android:id="@+id/edtTxtAge"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/txtViewAge"
        android:layout_marginLeft="2dp"
        android:hint="@string/hintAge"
        android:inputType="number"
        android:maxLength="2"
        android:textSize="14dp" />

    <TextView
        android:id="@+id/txtViewLiteracy"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/edtTxtAge"
        android:layout_marginLeft="5dp"
        android:text="@string/literacyStatus"
        android:textColor="@color/black" />

    <Spinner
        android:id="@+id/spnLiteracy"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/txtViewLiteracy"
        android:layout_marginLeft="2dp" />

    <TextView
        android:id="@+id/txtViewPregnancy"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/spnLiteracy"
        android:layout_marginLeft="5dp"
        android:text="@string/currentPregnancy"
        android:textColor="@color/black" />

    <Spinner
        android:id="@+id/spnPregnancy"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/txtViewPregnancy"
        android:layout_marginLeft="2dp" />

    <TextView
        android:id="@+id/txtViewReferralSource"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/spnPregnancy"
        android:layout_marginLeft="5dp"
        android:text="@string/referralSource"
        android:textColor="@color/black" />

    <Spinner
        android:id="@+id/spnReferralSource"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/txtViewReferralSource"
        android:layout_marginLeft="2dp" />

    <TextView
        android:id="@+id/txtViewResidence"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/spnReferralSource"
        android:layout_marginLeft="5dp"
        android:text="@string/residecnePlace"
        android:textColor="@color/black" />

    <Spinner
        android:id="@+id/spnResidence"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/txtViewResidence"
        android:layout_marginLeft="2dp" />

    <TextView
        android:id="@+id/txtViewDurationOfStay"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/spnResidence"
        android:layout_marginLeft="5dp"
        android:text="@string/DurationOfStay"
        android:textColor="@color/black" />

    <EditText
        android:id="@+id/edtTxtDurationOfYear"
        android:layout_width="100dp"
        android:layout_height="40dp"
        android:layout_below="@id/txtViewDurationOfStay"
        android:layout_marginLeft="2dp"
        android:layout_marginRight="20dp"
        android:hint="@string/hintYear"
        android:inputType="number"
        android:maxLength="4"
        android:textSize="14dp" />

    <EditText
        android:id="@+id/edtTxtDurationOfMonth"
        android:layout_width="100dp"
        android:layout_height="40dp"
        android:layout_below="@id/txtViewDurationOfStay"
        android:layout_toRightOf="@id/edtTxtDurationOfYear"
        android:hint="@string/hintMonth"
        android:inputType="number"
        android:maxLength="2"
        android:textSize="14dp" />

    <TextView
        android:id="@+id/txtViewRespOccupation"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/edtTxtDurationOfYear"
        android:layout_marginLeft="5dp"
        android:text="@string/respondentOccupation"
        android:textColor="@color/black" />

    <Spinner
        android:id="@+id/spnRespOccupation"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/txtViewRespOccupation"
        android:layout_marginLeft="2dp" />

    <TextView
        android:id="@+id/txtViewSpouseOccupation"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/spnRespOccupation"
        android:layout_marginLeft="5dp"
        android:text="@string/spouseOccupation"
        android:textColor="@color/black" />

    <Spinner
        android:id="@+id/spnSpouseOccupation"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/txtViewSpouseOccupation"
        android:layout_marginLeft="2dp" />

    <TextView
        android:id="@+id/txtViewSpouseResidesAwayFromWife"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/spnSpouseOccupation"
        android:layout_marginLeft="5dp"
        android:text="@string/spouseResidesAwayFromWife"
        android:textColor="@color/black" />

    <Spinner
        android:id="@+id/spnSpouseResidesAwayFromWife"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/txtViewSpouseResidesAwayFromWife"
        android:layout_marginLeft="2dp" />
</RelativeLayout> 
```

button_layout.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/relativeLayout2"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical"
android:layout_gravity="bottom">

<Button
    android:id="@+id/ancSaveBtn"
    android:layout_width="80dp"
    android:layout_height="35dp"
    android:layout_alignParentLeft="true"
    android:layout_marginTop="15dp"
    android:text="@string/upload"
    android:textSize="14dp" />

<Button
    android:id="@+id/ancAddNewBtn"
    android:layout_width="80dp"
    android:layout_height="35dp"
    android:layout_marginTop="15dp"
    android:layout_toRightOf="@id/ancSaveBtn"
    android:text="@string/addNew"
    android:textSize="14dp" />

<Button
    android:id="@+id/ancClearBtn"
    android:layout_width="80dp"
    android:layout_height="35dp"
    android:layout_marginTop="15dp"
    android:layout_toRightOf="@id/ancAddNewBtn"
    android:text="@string/clear"
    android:textSize="14dp" />

<Button
    android:id="@+id/ancExitBtn"
    android:layout_width="80dp"
    android:layout_height="35dp"
    android:layout_marginTop="15dp"
    android:layout_toRightOf="@id/ancClearBtn"
    android:text="@string/exit"
    android:textSize="14dp" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:38:26.857

我必须四处走走才能获得正确的布局。如果这不是您想要的，请随时在此处发布您想要存档的屏幕截图

主要的.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <include
        android:id="@+id/layout_content_1"
        android:layout_alignParentTop="true"
        android:layout_below="@+id/layout_content_2"
        layout="@layout/top_layout" />

    <include
        android:id="@+id/layout_content_2"
        android:layout_above="@+id/layout_content_1"
        layout="@layout/data_layout" />

    <include
        android:id="@+id/layout_content_3"
        layout="@layout/button_layout" />

</RelativeLayout> 
```

button_layout.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/ancSaveBtn"
            android:layout_width="80dp"
            android:layout_height="35dp"
            android:layout_marginTop="15dp"
            android:text="upload"
            android:textSize="14dp" />

        <Button
            android:id="@+id/ancAddNewBtn"
            android:layout_width="80dp"
            android:layout_height="35dp"
            android:layout_marginTop="15dp"
            android:text="new"
            android:textSize="14dp" />

        <Button
            android:id="@+id/ancClearBtn"
            android:layout_width="80dp"
            android:layout_height="35dp"
            android:layout_marginTop="15dp"
            android:text="clear"
            android:textSize="14dp" />

        <Button
            android:id="@+id/ancExitBtn"
            android:layout_width="80dp"
            android:layout_height="35dp"
            android:layout_marginTop="15dp"
            android:text="edit"
            android:textSize="14dp" />
    </LinearLayout>

</RelativeLayout> 
```

数据布局.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="36dp"
    android:layout_marginTop="36dp"
    android:scrollbars="vertical" >

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <RelativeLayout
            android:id="@+id/relativeLayout1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@color/white"
            android:orientation="vertical"
            android:scrollbars="vertical" >

            <TextView
                android:id="@+id/nieTxtState"
                android:layout_width="100dp"
                android:layout_height="wrap_content"
                android:padding="@dimen/padding_medium"
                android:text="state"
                android:textSize="14dp" />

            <TextView
                android:id="@+id/nieTxtTNState"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@id/nieTxtState"
                android:padding="@dimen/padding_medium"
                android:text="tnState"
                android:textSize="14dp" />

            <TextView
                android:id="@+id/txtViewDistrict"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@id/nieTxtTNState"
                android:layout_marginLeft="5dp"
                android:text="district"
                android:textColor="@color/black" />

            <Spinner
                android:id="@+id/spnDistrict"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/txtViewDistrict"
                android:layout_marginLeft="2dp" />

            <TextView
                android:id="@+id/txtViewHSS"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@id/spnDistrict"
                android:layout_marginLeft="5dp"
                android:text="hssSite"
                android:textColor="@color/black" />

            <Spinner
                android:id="@+id/spnHSS"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/txtViewHSS"
                android:layout_marginLeft="2dp" />

            <TextView
                android:id="@+id/txtViewAge"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@id/spnHSS"
                android:layout_marginLeft="5dp"
                android:text="age"
                android:textColor="@color/black" />

            <EditText
                android:id="@+id/edtTxtAge"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/txtViewAge"
                android:layout_marginLeft="2dp"
                android:hint="hintAge"
                android:inputType="number"
                android:maxLength="2"
                android:textSize="14dp" />

            <TextView
                android:id="@+id/txtViewLiteracy"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@id/edtTxtAge"
                android:layout_marginLeft="5dp"
                android:text="literacyStatus"
                android:textColor="@color/black" />

            <Spinner
                android:id="@+id/spnLiteracy"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/txtViewLiteracy"
                android:layout_marginLeft="2dp" />

            <TextView
                android:id="@+id/txtViewPregnancy"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@id/spnLiteracy"
                android:layout_marginLeft="5dp"
                android:text="currentPregnancy"
                android:textColor="@color/black" />

            <Spinner
                android:id="@+id/spnPregnancy"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/txtViewPregnancy"
                android:layout_marginLeft="2dp" />

            <TextView
                android:id="@+id/txtViewReferralSource"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@id/spnPregnancy"
                android:layout_marginLeft="5dp"
                android:text="referralSource"
                android:textColor="@color/black" />

            <Spinner
                android:id="@+id/spnReferralSource"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/txtViewReferralSource"
                android:layout_marginLeft="2dp" />

            <TextView
                android:id="@+id/txtViewResidence"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@id/spnReferralSource"
                android:layout_marginLeft="5dp"
                android:text="residecnePlace"
                android:textColor="@color/black" />

            <Spinner
                android:id="@+id/spnResidence"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/txtViewResidence"
                android:layout_marginLeft="2dp" />

            <TextView
                android:id="@+id/txtViewDurationOfStay"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@id/spnResidence"
                android:layout_marginLeft="5dp"
                android:text="DurationOfStay"
                android:textColor="@color/black" />

            <EditText
                android:id="@+id/edtTxtDurationOfYear"
                android:layout_width="100dp"
                android:layout_height="40dp"
                android:layout_below="@id/txtViewDurationOfStay"
                android:layout_marginLeft="2dp"
                android:layout_marginRight="20dp"
                android:hint="hintYear"
                android:inputType="number"
                android:maxLength="4"
                android:textSize="14dp" />

            <EditText
                android:id="@+id/edtTxtDurationOfMonth"
                android:layout_width="100dp"
                android:layout_height="40dp"
                android:layout_below="@id/txtViewDurationOfStay"
                android:layout_toRightOf="@id/edtTxtDurationOfYear"
                android:hint="hintMonth"
                android:inputType="number"
                android:maxLength="2"
                android:textSize="14dp" />

            <TextView
                android:id="@+id/txtViewRespOccupation"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@id/edtTxtDurationOfYear"
                android:layout_marginLeft="5dp"
                android:text="respondentOccupation"
                android:textColor="@color/black" />

            <Spinner
                android:id="@+id/spnRespOccupation"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/txtViewRespOccupation"
                android:layout_marginLeft="2dp" />

            <TextView
                android:id="@+id/txtViewSpouseOccupation"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@id/spnRespOccupation"
                android:layout_marginLeft="5dp"
                android:text="spouseOccupation"
                android:textColor="@color/black" />

            <Spinner
                android:id="@+id/spnSpouseOccupation"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/txtViewSpouseOccupation"
                android:layout_marginLeft="2dp" />

            <TextView
                android:id="@+id/txtViewSpouseResidesAwayFromWife"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@id/spnSpouseOccupation"
                android:layout_marginLeft="5dp"
                android:text="spouseResidesAwayFromWife"
                android:textColor="@color/black" />

            <Spinner
                android:id="@+id/spnSpouseResidesAwayFromWife"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/txtViewSpouseResidesAwayFromWife"
                android:layout_marginLeft="2dp" />
        </RelativeLayout>
    </ScrollView>

</RelativeLayout> 
```

top_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_gravity="top"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/nieTxtState"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="@dimen/padding_medium"
        android:text="123434343434"
        android:textSize="14dp" />

    <TextView
        android:id="@+id/nieTxtTNState"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@id/nieTxtState"
        android:padding="@dimen/padding_medium"
        android:text="1233434343"
        android:textSize="14dp" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:40:45.347

试试这个：

```
<include layout="@layout/data_layout"/>     
<include layout="@layout/button_layout"         
     android:layout_below="@+id/your_data_layout_id" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T15:33:30.123

这是您的主要布局。复制替换。看看变化！请看我已经删除了一些不在我工作地点的东西。因此，请查看我从您的代码中删除的内容，例如“字符串”并将它们添加回来。

```
 EDIT----------------------------- 
```

如果它是您所寻求的，请不要忘记接受答案:)。这是编辑的部分

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
 xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
>
<include
    android:layout_above="@+id/frame"
    layout="@layout/data_layout" />

<FrameLayout android:layout_height="50dp"
    android:layout_width="match_parent"
    android:layout_gravity="bottom"
    android:layout_alignParentBottom="true"
    android:id="@+id/frame">
    <include layout="@layout/button_layout"/>
</FrameLayout>
<TextView
     android:id="@+id/nieTxtState"
     android:layout_width="100dp"
     android:layout_height="wrap_content"
     android:textSize="14dp"
     android:text="JOOOO" />

 <TextView
     android:id="@+id/nieTxtTNState"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:layout_toRightOf="@id/nieTxtState"
     android:textSize="14dp"
     android:text="JOOOO" />
</RelativeLayout> 
```

![在此处输入图像描述](../Images/d9bd79a8bb7d7254b03b7335da8904d7.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T12:40:29.487

```
<include 
android:id="@+id/first"
layout="@layout/data_layout"
/>     
<include layout="@layout/button_layout"
android:layout_below="@+id/first"
/> 
```

我希望，这会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-09T16:44:33.877

您必须包含布局高度和宽度才能使用“layout_below”，否则将忽略以下请求。

```
<include layout="@layout/data_layout"/>     
<include layout="@layout/button_layout"
     android:layout_alignBottom="@layout/data_layout"
     android:layout_height="240dp" (Use @dimen as best practise)
     android:layout_width="wrap_content" /> 
```

# c++ - 保证在销毁之前调用某个函数

> ID：15112219
> 
> 赞同：0
> 
> 时间：2013-02-27T12:32:19.837
> 
> 标签：c++, exception, destructor

在编写一些 C++ 代码时，我到达了一个点，即某个结构需要一个`end()`函数调用，以保证破坏不会引发任何异常。

`Foo a(x,y)`

`~a` -> 在某些非常糟糕的情况下可能会抛出

`Foo a(x,y)`

`a.end()`-> 可能会抛出

`~a`保证不抛出异常

我想知道编译器是否有一种优雅的方法来强制这个约束（必须在解构之前调用结束），或者至少打印出一个警告？

问候和感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T12:39:43.707

如果您需要某些东西作为破坏的先决条件，那么您应该通过从析构函数中调用它来强制执行。

但是您**必须**捕获任何异常，并且[不要让它们从析构函数中泄漏](https://stackoverflow.com/questions/130117/throwing-exceptions-out-of-a-destructor)。

# android - 如何在谷歌地图 V2 android 中使用 MapView？

> ID：15112225
> 
> 赞同：0
> 
> 时间：2013-02-27T12:32:34.007
> 
> 标签：android, google-maps

我想使用 onTouch 事件（处理地图上对象的旋转手势）。我无法通过在 mainActivity 中扩展 Activity 并使用片段来做到这一点。所以我想我应该使用 MapView 类。如何在新版本的 google maps android (V2) 中做到这一点？这不会显示任何内容。仅在手机上出现空白屏幕。

主要活动：

```
public class MainActivity extends Activity {

 // MapView mapV;
 // GoogleMap map;

 @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mapV = ((MapView) findViewById(R.id.map));
    map = mapV.getMap();
  }

  @Override
  public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
  }

} 
```

activity_main.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

   <com.google.android.gms.maps.MapView
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T07:11:18.120

在您的活动中，您必须实现所有生命周期方法（onPause 等）并在其中将其转发到您的地图上，例如

```
@Override
public void onPause() {
    map.onPause();
    super.onPause();
} 
```

# vbscript - Outlook 中收件人邮箱中的邮件格式发生变化

> ID：15112229
> 
> 赞同：0
> 
> 时间：2013-02-27T12:32:52.747
> 
> 标签：vbscript, outlook, format

我在 vbscript 中编写了一些代码来使用 Outlook 自动向收件人发送邮件，一切正常，但我只有一个问题，我为邮件正文选择的格式在收件人的邮箱中发生了变化。我使用了`font color- blue and font face -calibri but it got changed into Times new roman without any color`.

有什么解决办法吗？

```
Set MyApp = CreateObject("Outlook.Application")
    Set MyItem = MyApp.CreateItem(0) 'olMailItem
    With MyItem
            .To = "abc@com"
            .Subject = ""
            .ReadReceiptRequested = False

            .HTMLBody = "<font size='3' face='Calibri' color='#151B54'>Hi,Whatever written here got changed into plain text.<font>"

            .Attachments.Add "C:\Excels\"& objFso.GetFileName(objFile.path)
    End With
    MyItem.Display
    End if 
```

或者我必须在已发送邮件的 Outlook 中更改任何设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:52:35.600

这对我来说非常好：

```
MailItem sendMail = Globals.ThisAddIn.Application.CreateItem(OlItemType.olMailItem);
        sendMail.Subject = "test";
        sendMail.To = SenderName; //or email
        sendMail.HTMLBody = "<font size='50' face='Verdana' color='#ff0000'>Hi,Whatever written here got changed into plain text.<font>";
        sendMail.Send(); 
```

当我将此发送给自己时，我会收到一条红色的大红色文字

请注意，这是 c#，所以我不确定它是否会对您有所帮助

编辑：

还有一件事： font size='3' 也不适用于我。因为它太小而不能体面地展示

# c++ - Present() 中奇怪的 Direct3D 内存行为

> ID：15112233
> 
> 赞同：2
> 
> 时间：2013-02-27T12:33:18.857
> 
> 标签：c++, memory, directx, direct3d

所以我在自己的渲染引擎上工作，遇到了一些奇怪的内存行为。

每当我打电话

```
IDXGISwapChain::Present(0, 0) 
```

它通过我渲染该帧的顶点的大小来增加我的程序内存使用量。

我使用以下代码创建了一个顶点缓冲区：

```
ID3D10Buffer        *pVertexBuffer;
D3D10_BUFFER_DESC   desc;
desc.Usage          = D3D10_USAGE_DYNAMIC;
desc.ByteWidth      = stride * nNumVertices;
desc.BindFlags      = D3D10_BIND_VERTEX_BUFFER;
desc.CPUAccessFlags = D3D10_CPU_ACCESS_WRITE;
desc.MiscFlags      = 0;
D3D10_SUBRESOURCE_DATA vData;
vData.pSysMem       = Vertices;

HRESULT hr = m_pDevice->CreateBuffer(&desc, &vData, &pVertexBuffer); 
```

使用它绘制它

```
m_pDevice->IASetPrimitiveTopology(D3D10_PRIMITIVE_TOPOLOGY_TRIANGLELIST);
m_pDevice->IASetVertexBuffers(0, 1, &pVertexBuffer, &stride, &offset);

m_pDevice->Draw(nNumVertices, 0); 
```

然后释放它

```
pVertexBuffer->Release(); 
```

这会引发错误

```
D3D10 INFO: ID3D10Device::IASetVertexBuffers: A currently bound VertexBuffer is being deleted; so naturally, will no longer be bound. [ STATE_SETTING INFO #31: IASETVERTEXBUFFERS_UNBINDDELETINGOBJECT] 
```

但根据 MSDN 和其他问题，这应该不是问题。

以前有没有其他人经历过这种情况，或者可以帮帮我吗？

编辑1：

在停止使用更多内存之后，这种情况会发生一定次数，大约 500 次。如果我然后卸载我的网格并重新加载它（所以它有一个不同的指针），present() 开始分配更多的内存，我的网格的大小，大约 500 次。这种情况一直持续到我的程序内存不足。

要补充一点，我第一次调用 Present() 时，它会根据我绑定的任何纹理的大小增加已用内存，这包括后台缓冲区！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:46:03.610

经过大量的实验，我发现这里发生了什么。每次`ID3D10Buffer`使用 创建a 时`CreateBuffer()`，`IDXGISwapChain::Present()`将分配 4 千字节。对我来说，每个相同的缓冲区会发生 64 次，然后它要么停止，要么释放先前分配的内存。

我希望这可以帮助其他人使用这个未记录的“功能”

# python - 如何将 pandas DataFrame 的列转换为列表列表？

> ID：15112234
> 
> 赞同：36
> 
> 时间：2013-02-27T12:33:19.430
> 
> 标签：python, dataframe, pandas

我有一个带有多列的 pandas DataFrame。

```
2u    2s    4r     4n     4m   7h   7v
0     1     1      0      0     0    1
0     1     0      1      0     0    1
1     0     0      1      0     1    0
1     0     0      0      1     1    0
1     0     1      0      0     1    0
0     1     1      0      0     0    1 
```

我想要做的是将其转换[`pandas.DataFrame`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.html)为如下列表

```
X = [
     [0, 0, 1, 1, 1, 0],
     [1, 1, 0, 0, 0, 1],
     [1, 0, 0, 0, 1, 1],
     [0, 1, 1, 0, 0, 0],
     [0, 0, 0, 1, 0, 0],
     [0, 0, 1, 1, 1, 0],
     [1, 1, 0, 0, 0, 1]
    ] 
```

2u 2s 4r 4n 4m 7h 7v 是列标题。它会在不同的情况下改变，所以不要在意。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-02-27T12:34:42.583

它看起来像一个转置矩阵：

```
df.values.T.tolist() 
```

* * *

```
[list(l) for l in zip(*df.values)] 
```

```
[[0, 0, 1, 1, 1, 0],
 [1, 1, 0, 0, 0, 1],
 [1, 0, 0, 0, 1, 1],
 [0, 1, 1, 0, 0, 0],
 [0, 0, 0, 1, 0, 0],
 [0, 0, 1, 1, 1, 0],
 [1, 1, 0, 0, 0, 1]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-02-15T17:32:09.853

要将 Dataframe 更改为列表，请使用 tolist() 函数进行转换假设我有 Dataframe df

要更改为列表，您可以简单地使用 tolist() 函数

```
df.values.tolist() 
```

您还可以使用以下方法将特定列更改为列表

```
df['column name'].values.tolist() 
```

# nhibernate - NHibernate - 是否可以将列映射到集合复合对象

> ID：15112243
> 
> 赞同：0
> 
> 时间：2013-02-27T12:33:46.107
> 
> 标签：nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

使用 NHibernate 可以将表中的列映射到对象集合。

例如，如果我有一个设计非常糟糕的数据库表，其列如下： ClientID ClientName First_AmountPaid Second_AmountPaid Third_AmountPaid Fourth_AmountPaid

是否可以将其映射到以下类结构，其中 First_AmountPaid 到 Fourth_AmountPaid 都有自己的类实现？

```
public class Client
{
    public int ClientId { get; set; }
    public string ClientName { get; set; }

    public IList<AmountPaid> Amounts { get; set; }
}

public class AmountPaid
{
    public decimal Amount { get; set; }
}

public class FirstAmountPaid : AmountPaid{ }
public class SecondAmountPaid : AmountPaid{ }
public class ThirdAmountPaid : AmountPaid{ }
public class FourthAmountPaid : AmountPaid{ } 
```

因此给出了更有意义的代码结构。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:09:46.590

当列表位置已经定义了金额的顺序时，我不确定为什么会有子类

```
Map(x => x.Amounts)
    .Columns.Add("First_AmountPaid", "Second_AmountPaid", "Third_AmountPaid", "Fourth_AmountPaid")
    .CustomType<AmountPaidType>();

class AmountPaid : IUserType
{
    public object Assemble(object cached, object owner)
    {
        return cached;
    }

    public object DeepCopy(object value)
    {
        return ((IList<AmountPaid>)x).Select(a => a.Clone()).ToList();
    }

    public object Disassemble(object value)
    {
        return value;
    }

    bool IUserType.Equals(object x, object y)
    {
        // assuming AmountPaid implements Equals
        return ((IList<AmountPaid>)x).SequenceEquals((IList<AmountPaid>)y);
    }

    public int GetHashCode(object x)
    {
        return x.GetHashCode();
    }

    public bool IsMutable
    {
        get { return true; }
    }

    public void NullSafeSet(cmd, value, index)
    {
        var list = (IList<AmountPaid>)value;
        NHibernateUtil.Double.NullSafeSet(cmd, list[0].Amount, index);
        NHibernateUtil.Double.NullSafeSet(cmd, list[1].Amount, index + 1);
        NHibernateUtil.Double.NullSafeSet(cmd, list[2].Amount, index + 2);
        NHibernateUtil.Double.NullSafeSet(cmd, list[3].Amount, index + 3);
    }

    public object NullSafeGet(rs, names, owner)
    {
        var list = new List<AmountPaid>();
        foreach (var name in names)
        {
            list.Add(new AmountPaid((double)NHibernateUtil.Double.Get(rs, name)));
        }
        return list;
    }

    public object Replace(object original, object target, object owner)
    {
        return original;
    }

    public Type ReturnedType
    {
        get { return typeof(IList<AmountPaid>); }
    }

    public SqlType[] SqlTypes
    {
        get { return new[] { SqlTypeFactory.Double, SqlTypeFactory.Double, SqlTypeFactory.Double, SqlTypeFactory.Double }; }
    }
} 
```

# android - 单击通知时保留返回活动

> ID：15112257
> 
> 赞同：0
> 
> 时间：2013-02-27T12:34:24.493
> 
> 标签：android, eclipse, notifications

我的问题是这样的：当我按下收到的通知时，一些活动是打开的，比如说活动编号 3。但是当我按下后退按钮时，我通过 android 导航到菜单。我想要做的是保持用户正确的导航体验，当我按下后退按钮时，它将带我到活动编号 2，当我按下后退按钮时，它会带我到活动编号 1，依此类推。
我遇到的另一个问题是，当我打开 2 号活动时，我需要在意图中设置一些额外的数据，但我不知道如何设置。
我的问题总结：保留用户的正确导航并为将通过单击后退按钮打开的活动设置一些额外内容。

这是我的通知代码：

```
NotificationCompat.Builder mBuilder =
                new NotificationCompat.Builder(this)
                .setSmallIcon(R.drawable.ic_launcher)
                .setContentTitle("New Question")
                .setContentText("" + CurrentQuestion.getAuthor().getUserName() + ": " + CurrentQuestion.getQuestion() + "");

        Intent openHomePageActivity = new Intent("com.example.ihelp.HOMEPAGEACTIVITY");
        TaskStackBuilder stackBuilder = TaskStackBuilder.create(this);
        stackBuilder.addNextIntent(openHomePageActivity);
        PendingIntent resultPendingIntent =
                stackBuilder.getPendingIntent(
                    0,
                    PendingIntent.FLAG_UPDATE_CURRENT
                );
        mBuilder.setContentIntent(resultPendingIntent);
        NotificationManager mNotificationManager =
            (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
        mNotificationManager.notify(0, mBuilder.build()); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-31T12:05:41.623

看起来你想合成一个后台堆栈： http: [//developer.android.com/training/implementing-navigation/temporal.html#SynthesizeBackStack](http://developer.android.com/training/implementing-navigation/temporal.html#SynthesizeBackStack)（请参阅“启动活动时创建后台堆栈”）

以及[http://developer.android.com/guide/topics/ui/notifiers/notifications.html#NotificationResponse](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#NotificationResponse)（“启动活动时保留导航”作为“常规活动”）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-22T08:00:16.920

同一场景中的任何人都可以使用我在我的应用程序中使用的这个解决方案。覆盖 onBackPressed （在您从通知路由的活动中）并检查您的应用程序是否在堆栈中。如果没有，那么开始你的根活动。用户始终可以从您的根活动导航。这就是我在我的应用程序中所做的

```
@Override
public void onBackPressed() {
    if (isTaskRoot()) {
        Intent intent = new Intent(this,YourMainActivity.class);
        startActivity(intent);
        super.onBackPressed();
    }else {
        super.onBackPressed();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T13:18:13.493

将您需要的参数保存在 onSaveInstanceState 中并在 onRestoreInstanceState 中取回它们。这样，您的活动是否也被任何其他通知暂停都没关系。

# java - 每个语言环境的 JSF 2 中的不同 facelets（用于模板中）

> ID：15112259
> 
> 赞同：7
> 
> 时间：2013-02-27T12:34:26.087
> 
> 标签：java, jsf, jsf-2, internationalization, facelets

我在某个地方有一个模板`<ui:insert name="help_contents" />`和一个定义 的页面，`<ui:define name="help_contents><!-- actual contents --></ui:define>`其中定义中的内容应该是基于 JSF 的（不仅仅是普通的 html/xhtml），由 faces servlet 处理并根据语言环境而有所不同。但我不想对资源包执行此操作，因为这将需要每个属性的大量文本，并且必须为散布在文本中的每个组件分解它。换句话说，我想要每个区域设置一个 facelet，然后根据活动区域设置包含正确的 facelet。

基本上就是这个问题。下面的上下文是为了其他正在搜索的人，如果您已经理解我的意思，请跳过。

在很大程度上，JSF 2 中的国际化非常容易。您制作一个或多个资源包，在 faces-config.xml 中声明它们，然后就可以使用这些属性了。但我觉得这样的属性文件只适用于短标签文本、列标题、可能带有几个参数的小消息……当涉及到大部分文本时，它们看起来很笨拙。特别是如果文本应该散布有 XHTML 标记或 JSF 组件，在这种情况下，您需要将其分解得太多。

目前我正在开发一些使用 JSF 2 的 Web 应用程序，PrimeFaces 作为组件包，它在常规意义上使用 i18n 的资源包。但是各种视图需要一个帮助页面。我也想在这些帮助页面中使用 JSF/PrimeFaces 组件，以便填充表或对话框的示例看起来与视图本身相同。

但是，包含基于语言环境的合成内容似乎没有我想象的那么简单。我希望 XHTML 页面（facelets）带有像 _en 或 _fr 这样的语言环境后缀，并根据活动的语言环境选择正确的页面。如果不存在这样的页面，它应该默认为 _en 页面（或没有后缀的仅包含英文内容的页面）。从 facescontext 获取语言环境字符串不是问题，但检测页面是否存在似乎更难。有什么方法可以在 JSF 中或通过 EL 执行此操作，还是应该通过托管 bean 完成？也许为此编写一个自定义标签会很有用，但我不确定这需要做多少工作。

我确实找到[了这个相关的问题](https://stackoverflow.com/questions/6497886/correct-way-to-do-internationalization-in-jsf-for-full-html-pages)，但这似乎只有在我不想注入纯 HTML 内容时才有用。我想包含带有 JSF 内容的页面，以便它们实际上由 JSF servlet 处理和呈现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T19:54:00.300

以下是我对您的问题的解决方案。它体积庞大，但已完成，内容丰富，据我所知，完整。有了它，您将能够根据当前语言从一组以语言为后缀的视图中包含必要的视图。

**我对您的设置的假设**

1.  您正在处理描述语言的语言环境，即`Locale.ENGLISH`格式；
2.  您选择的语言存储在会话范围的 bean 中；
3.  您将国际化页面保存为以下格式：`page.xhtml`、、、`page_en.xhtml`等`page_fr.xhtml`；
4.  默认语言为英语；
5.  您`FacesServlet`的映射到`*.xhtml`.

## 我的解决方案的标准设置

会话范围的 bean，包含可用的语言和用户选择：

```
@ManagedBean
@SessionScoped
public class LanguageBean implements Serializable {

    private List<Locale> languages;//getter
    private Locale selectedLanguage;//getter + setter

    public LanguageBean() {
        languages = new ArrayList<Locale>();
        languages.add(Locale.ENGLISH);
        languages.add(Locale.FRENCH);
        languages.add(Locale.GERMAN);
        selectedLanguage = Locale.ENGLISH;
    }

    public Locale findLocale(String value) {
        for(Locale locale : languages) {
            if(locale.getLanguage().equals(new Locale(value).getLanguage())) {
                return locale;
            }
        }
        return null;
    }

    public void languageChanged(ValueChangeEvent e){
        FacesContext.getCurrentInstance().getViewRoot().setLocale(selectedLanguage);
    }

} 
```

语言环境的转换器：

```
@ManagedBean
@RequestScoped
public class LocaleConverter implements Converter {

    @ManagedProperty("#{languageBean}")
    private LanguageBean languageBean;//setter

    public LocaleConverter() {   }

    public Object getAsObject(FacesContext context, UIComponent component, String value) {
        if(value == null || value.equals("")) {
            return null;
        }
        Locale locale = languageBean.findLocale(value);
        if(locale == null) {
            throw new ConverterException(new FacesMessage("Locale not supported: " + value));
        }
        return locale;
    }

    public String getAsString(FacesContext context, UIComponent component, Object value) {
        if (!(value instanceof Locale) || (value == null)) {
            return null;
        }
        return ((Locale)value).getLanguage();
    }

} 
```

主视图 ( `main.xhtml`) 带有指向国际化页面的链接，并且能够通过下拉框更改当前语言：

```
<f:view locale="#{languageBean.selectedLanguage}">
    <h:head>
        <title>Links to internationalized pages</title>
    </h:head>
    <h:body>
        <h:form>
            <h:selectOneMenu converter="#{localeConverter}" value="#{languageBean.selectedLanguage}" valueChangeListener="#{languageBean.languageChanged}" onchange="submit()">
                <f:selectItems value="#{languageBean.languages}"/>
            </h:selectOneMenu>
        </h:form>
        <br/>
        <h:link value="Show me internationalized page (single)" outcome="/international/page-single"/>
        <br/>
        <h:link value="Show me internationalized page (multiple)" outcome="/international/page-multiple"/>
    </h:body>
</f:view> 
```

## 基于多个页面的解决方案 - 每种语言一个

`page-multiple.xhtml`通过添加 _lang 后缀 ( )国际化的基页

```
<f:metadata>
    <f:event type="preRenderView" listener="#{pageLoader.loadPage}"/>
</f:metadata> 
```

国际化页面：

对于英语 ( `page-multiple_en.xhtml`)：

```
<h:head>
    <title>Hello - English</title>
</h:head>
<h:body>
    Internationalized page - English
</h:body> 
```

对于法语 ( `page-multiple_fr.xhtml`)：

```
<h:head>
    <title>Hello - Français</title>
</h:head>
<h:body>
    Page internationalisé - Français
</h:body> 
```

德语（无视图，模拟丢失文件）。

执行重定向的托管 bean：

```
@ManagedBean
@RequestScoped
public class PageLoader {

    @ManagedProperty("#{languageBean}")
    private LanguageBean languageBean;//setter

    public PageLoader() {   }

    public void loadPage() throws IOException {
        Locale locale = languageBean.getSelectedLanguage();
        FacesContext context = FacesContext.getCurrentInstance();
        ExternalContext external = context.getExternalContext();
        String currentPath = context.getViewRoot().getViewId();
        String resource = currentPath.replace(".xhtml", "_" + locale.toString() + ".xhtml");
        if(external.getResource(resource) == null) {
            resource = currentPath.replace(".xhtml", "_en.xhtml");
        }
        String redirectedResource = external.getRequestContextPath() + resource.replace(".xhtml", ".jsf");
        external.redirect(redirectedResource);
    }

} 
```

每次`page-multiple.xhtml`请求视图时，它都会重定向到以语言为后缀的视图，或者如果找不到目标语言的视图，则重定向到英语视图。当前语言取自会话范围的 bean，所有视图必须位于服务器上的同一文件夹中。当然，这可以重做，而是基于视图参数中定义的语言。目标页面可以使用合成。默认数据可以在非后缀视图中提供，`preRenderView`侦听器不执行重定向。

作为备注，我的（三个）视图存储在`international/`网页文件夹中。

## 基于所有语言的单一页面的解决方案

尽管您的问题应该由以前的设置解决，但我想到了另一个想法，我将在下面描述。

有时，不创建与支持的语言一样多的视图（+1 用于重定向）可能更容易，而是创建一个单一的视图，根据当前选择的语言有条件地呈现其输出。

视图（`page-single.xhtml`也位于服务器上的同一文件夹中）可能如下所示：

```
<ui:param name="lang" value="#{languageBean.selectedLanguage}"/>
<ui:fragment rendered="#{lang == 'en'}">
    <h:head>
        <title>Hello - English</title>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF8" />
    </h:head>
    <h:body>
        Internationalized page - English
    </h:body>
</ui:fragment>
<ui:fragment rendered="#{lang == 'fr'}">
    <h:head>
        <title>Hello - Français</title>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF8" />
    </h:head>
    <h:body>
        Page internationalisé - Français
    </h:body>
</ui:fragment>
<ui:fragment rendered="#{(lang ne 'en') and (lang ne 'fr')}">
    <h:head>
        <title>Hello - Default</title>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF8" />
    </h:head>
    <h:body>
        Internationalized page - Default
    </h:body>
</ui:fragment> 
```

使用此视图，您可以指定内部的所有数据，有条件地仅呈现所需语言所需的数据或默认数据。

## 提供自定义资源解析器

资源解析器将根据视图的当前语言环境包含所需的文件。

资源解析器：

```
public class InternalizationResourceResolver extends ResourceResolver {

    private String baseLanguage;
    private String delimiter;
    private ResourceResolver parent;

    public InternalizationResourceResolver(ResourceResolver parent) {
        this.parent = parent;
        this.baseLanguage = "en";
        this.delimiter = "_";
    }

    @Override
    public URL resolveUrl(String path) {
        URL url = parent.resolveUrl(path);
        if(url == null) {
            if(path.startsWith("//ml")) {
                path = path.substring(4);
                Locale locale = FacesContext.getCurrentInstance().getViewRoot().getLocale();
                URL urlInt = parent.resolveUrl(path.replace(".xhtml", delimiter + locale.toString() + ".xhtml"));
                if(urlInt == null) {
                    URL urlBaseInt = parent.resolveUrl(path.replace(".xhtml", delimiter + baseLanguage + ".xhtml"));
                    if(urlBaseInt != null) {
                        url = urlBaseInt;
                    }
                } else {
                    url = urlInt;
                }
            }
        }
        return url;
    }

} 
```

启用解析器`web.xml`：

```
<context-param>
    <param-name>javax.faces.FACELETS_RESOURCE_RESOLVER</param-name>
    <param-value>i18n.InternalizationResourceResolver</param-value>
</context-param> 
```

使用此设置，可以呈现以下视图：

查看哪些使用`<ui:include>`，其中国际化包含将使用创建的`//ml/`前缀定义：

```
<f:view locale="#{languageBean.selectedLanguage}">
    <h:head>
    </h:head>
    <h:body>
        <ui:include src="//ml/international/page-include.xhtml" />
    </h:body>
</f:view> 
```

不会有`page-include.xhtml`，但会有每种语言的视图，例如：

`page-include_en.xhtml`：

```
<h:outputText value="Welcome" /> 
```

`page-include_fr.xhtml`：

```
<h:outputText value="Bienvenue" /> 
```

这样，解析器将根据当前语言环境选择正确的国际化包含视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T12:52:11.737

例如，您可以定义复合组件，它将只是标准的外观`ui:include`。

资源/myComponents/localeInclude.xhtml：

```
<cc:interface>
  <cc:attribute name="src" required="true" type="java.lang.String"/>
</cc:interface>

<cc:implementation>
  <ui:include src="#{myResolver.resolve(cc.attrs.src)}">
    <cc:insertChildren/>
  </ui:inclue>
</cc:implementation> 
```

创建托管bean，命名`myResolver`它可以`@ApplicationScoped`是完全无状态的`resolve()`方法：

```
public String resolve(String src) {
  String srcWithoutExt = src.replace(".xhtml", "");
  FacesContext facesContext = FacesContext.getCurrentInstance();
  ServletContext servletContext = (ServletContext) facesContext.getExternalContext().getContext();
  Locale locale = facesContext.getViewRoot().getLocale();
  String localizedSrc = srcWithoutExt + "_" + locale.getLanguage();
  URL url = null;
  if (src.startsWith("/")) {
    url = facesContext.getExternalContext().getResource(localizedSrc + ".xhtml");
  } else {
    try {
      url = new URL((HttpServletRequest) request).getRequestURL(), localizedSrc + ".xhtml");
    } catch (Exception e) { /* Doesn't exist */ }
  }
  if (url != null) {
    return localizedSrc + ".xhtml";
  } else {
    return src;
  }
} 
```

在这种情况下，只需放入`src`没有区域设置扩展的页面并让方法解决此问题：

```
<my:localeInclude src="myPage.xhtml/> 
```

因为我包括儿童，你可以传递`ui:param`给你包括喜欢的原创。

此外，对于那些不习惯根据语言环境（不仅仅是部分）解析整个页面的人来说，使用`Filter`. 在`doFilter()`方法中，您可以检查该资源是否存在，如果不将请求转发到另一个页面：

```
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws java.io.IOException, ServletException {

  if (request.getServletContext().getResource(request.getRequestURI()) == null) {
    // Here your page doesn't exist so forward user somewhere else...
  }
} 
```

`Filter`根据您的需要为此配置映射。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T12:58:21.447

从此[链接@ SO](https://stackoverflow.com/questions/3682789/ways-to-include-a-dynamically-generated-facelet)，您可以动态包含内容（检查选中的答案）。在支持文件中，如果您有一个可以适当设置文件名的钩子，我认为这可以解决问题。

不确定这一点，您可以检查，如果您可以将参数（即部分路径）传递给 EL 中的方法，其余的可以在方法内部处理，如构造完整路径、附加当前语言环境和检查文件是否存在。

希望这可以帮助。

**更新（回答评论）：**

是的。您可以查看链接[JSF 2 fu，第 2 部分：模板和复合组件](http://www.ibm.com/developerworks/library/j-jsf2fu2/index.html)

# linq - Linq To SQL where 条件与 IEnumerable

> ID：15112267
> 
> 赞同：0
> 
> 时间：2013-02-27T12:34:47.727
> 
> 标签：linq, sql-server-2008

我有以下查询，我想在其中过滤掉某些代码以进行删除。它适用于工资单程序，根据运行它的用户，它应该只允许删除用户列表下的员工：

```
IEnumerable<int> employeeIdList;    <----contains employee Ids under a certain user

var processDataTemps = tempProcessDataService.GetAllProcessDataTemps(); 
```

上述查询的示例结果

```
Code  Name  U_Employee_ID  U_month  U_PD_code   U_Amount    U_Balance  U_taxyear    
0     0     1              2        SYS037    24308.500000  0.000000    2013
1     1     1              2        SYS014    50470.000000  0.000000    2013
10    10    8              2        SYS024    7541.000000   0.000000    2013
13    13    7              2        SYS037    7541.000000   0.000000    2013
17    17    7              2        SYS024    7541.000000   0.000000    2013 
```

我的问题是如何修改 processDataTemps 查询以`Code`仅返回 IEnumerable employeeIdList 中包含的员工 ID 的代码（列）？

IE。这样，如果employeeIdList 仅包含1 和7，则修改后的processDataTemps 查询应返回`Code`值0、1、13 和17。（使用SQL Server 2008）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:57:43.210

假设您使用的是 C#：

```
var processDataTemps = tempProcessDataService.GetAllProcessDataTemps()
                                             .Where(d => employeeIdList.Contains(d.U_Employee_ID))
                                             .Select(d => d.Code); 
```

# jquery - .Append 不工作

> ID：15112269
> 
> 赞同：0
> 
> 时间：2013-02-27T12:34:53.670
> 
> 标签：jquery

**我想要做的****是在标签关闭之前的 * `</span>`****test123****之后附加表格及其内容，但它不起作用，不确定这段代码有什么问题？***

 ***查询代码**

```
$('span[itemprop="description"]').append($('C1')); 
```

**代码**

```
 <span itemprop='description'>test123</span>
        this is outside of span tag<br>

     <table width="200" border="1" class="C1">
  <tr>
    <td>1</td>
    <td>2</td>
    <td>3</td>
  </tr>

</table> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T12:37:09.177

你忘了一个`.`：

```
$('span[itemprop="description"]').append($('.C1')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:36:02.363

`itemprop`不是有效的 HTML 属性。我不确定jQuery是否会首先允许它工作。你会想`data-itemprop`改用。

`$('C1')`建议您有一个（再次无效的）`<C1>`元素。您需要使用`$('.C1')`选择类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T12:37:04.720

C1 不是有效的选择器。你需要使用

```
$('span[itemprop="description"]').append($('.C1')) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T12:36:10.727

```
$('span[itemprop="description"]').append($('.C1').clone()); 
```

您错过了`class`在选择器添加中定义`.`。此外，您将 Object 附加到不是 html 的范围内，所以我使用`.clone`它并且它对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T12:36:58.457

您应该附加 html，而不是对象。你可以这样做：

```
$('span[itemprop=description]').append($('.C1').html()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T12:41:09.613

将 jQuery 代码更改为：

```
$('span[itemprop="description"]').append($('.C1')); 
```*

# iphone - 获取缩略图时 ALAssetsLibrary 太慢

> ID：15112276
> 
> 赞同：1
> 
> 时间：2013-02-27T12:35:05.680
> 
> 标签：iphone, objective-c

使用 ALAssetsLibrary 加载缩略图需要时间。是否有任何解决方案可以更快地加载图像。这些图像是照片中的 900 多张图像。代码：

```
[ALAssetsGroupObj enumerateAssetsUsingBlock:^(ALAsset *asset, NSUInteger i, BOOL *load)
{         
  if(asset == nil) 
  {
     asset;
  }
  UIImage* thumbImage = [UIImage imageWithCGImage:[asset thumbnail]
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T12:42:30.483

不，没有办法让它更快。但是有几个技巧：

1.  将它们缓存到静态 NSDictionary。下次您需要在应用程序中绘制它们时，它会比从库中拉出它们要快得多。我已经尝试了超过 900 个缩略图。
2.  您的屏幕无法容纳 900 个拇指。当用户滚动时，您可以按块填充图像并每次加载 16-32 个左右。这有点棘手，因为绘制缩略图的操作和滚动都需要在主线程上运行。

# git - 当前分支上的 Git 别名

> ID：15112280
> 
> 赞同：35
> 
> 时间：2013-02-27T12:35:13.920
> 
> 标签：git

我想改进我当前的别名，他们中的大多数都在一个分支上工作。有没有办法在 git 别名中引用当前分支，所以我不需要每次都传递它？

像这个：

```
git config alias.po "push origin" 
```

是这样使用它：

```
git po foo_branch 
```

我只想运行`git po`它以将当前分支作为参数。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-09-13T09:06:19.187

```
[alias]
  po = "!git push --set-upstream origin \"$(git rev-parse --abbrev-ref HEAD)\"" 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-27T12:44:44.997

`git symbolic-ref --short HEAD`打印当前分支，因此您可以定义一个简单的 shell 别名：

```
alias gpo='git push origin "$(git symbolic-ref --short HEAD)"' 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-27T12:40:59.527

*此答案将从 Git 2.0 开始有效，默认推送行为将是`simple`*

除非`push.default`设置设置为`matching`，否则`git push`不指定参数将始终推送当前分支，因此在这种情况下您不需要指定它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T12:42:25.110

您的问题不是 100% 清楚您需要这两个别名中的哪一个。

这将推送当前签出的分支：

```
git config alias.po !f() { export tmp_branch=`git branch | grep '* ' | tr -d '* '` && git push origin $tmp_branch; unset $tmp_branch; }; f 
```

这将推送给定的分支名称 ( `git po branchName`)：

```
git config alias.po !f() { git push origin $1; }; f 
```

# controller - ZF2 - 控制器中的访问数据库适配器

> ID：15112281
> 
> 赞同：2
> 
> 时间：2013-02-27T12:35:14.760
> 
> 标签：controller, zend-framework2, adapter, validation

使用 Zend Framework 2，我正在尝试将 DBRecordExists 验证器添加到控制器中的表单。但是，我不断收到说“没有数据库适配器存在”的异常。我尝试了[这个问题](https://stackoverflow.com/questions/10254574/how-to-get-zend-db-adapter-instance-from-within-a-model-zf2 "这个问题")的答案，但它似乎没有用。有谁知道我做错了什么？

*AuthController.php*

```
use Zend\Db\Adapter\Adapter;
use Zend\Db\Adapter\AdapterAwareInterface;

class AuthController extends AbstractActionController implements AdapterAwareInterface
{
    /**
     * @var Zend\Db\Adapter\Adapter
     */
    protected $adapter;

    /**
     * Input email address to retrieve a lost password.
     */
    public function lostpasswordAction()
    {
        // Create form
        $form = new UserForm();

        // Perform validation
        $request = $this->getRequest();
        if ($request->isPost()) {
            $user = new User();
            $form->setInputFilter($user->getInputFilter());
            $form->setData($request->getPost());
            $recordValidator = new RecordExists(
                array(
                    'table' => 'users',
                    'field' => 'email'
            ));
            $form->getInputFilter()->get('email')->getValidatorChain()->addValidator($recordValidator);

            //code    
        }
    }

    public function setDbAdapter(Adapter $adapter)
    {
        $this->adapter = $adapter;
    }
} 
```

*local.config.php*

```
<?php
return array(
    'di' => array(
        'instance' => array(
        'Zend\Db\Adapter\Adapter' => array(
                'parameters' => array(
                    'driver' => 'Zend\Db\Adapter\Driver\Pdo\Pdo',
                ),
            ),
            'Zend\Db\Adapter\Driver\Pdo\Pdo' => array(
                'parameters' => array(
                    'connection' => 'Zend\Db\Adapter\Driver\Pdo\Connection',
                ),
            ),
            'Zend\Db\Adapter\Driver\Pdo\Connection' => array(
                'parameters' => array(
                    'connectionInfo' => array(
                        'dsn'            => "mysql:dbname=owp;host=localhost",
                        'username'       => 'redacted',
                        'password'       => 'redacted',
                        'driver_options' => array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''),
                    ),
                ),
            ),
        ),
    ),
); 
```

*模块.config.php*

```
<?php
return array(
    //other config code

    'di' => array(
            'Graduate\Controller\AuthController' => array(
                'parameters' => array(
                    'adapter'  => 'Zend\Db\Adapter\Adapter',
                ),
            ),
    ),
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-30T08:53:52.063

Try this line to get current DB adapter in controller:

```
 $this->getServiceLocator()->get('Zend\Db\Adapter\Adapter'); 
```

or

Refer this link,

[https://stackoverflow.com/a/17942232/2190889](https://stackoverflow.com/a/17942232/2190889)

With the help of this link you can set the DB Adapter in a Application/Module.php and you can use anywhere in your system.

I hope this help.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:18:52.410

问题是您的 RecordExists 验证器需要访问数据库适配器。

控制器：

```
$recordValidator = new RecordExists(array(
    'table' => 'users',
    'field' => 'email'
));
// Need to pass to the validator..
$recordValidator->setAdapter($this->adapter); 
```

显然，最好使用 DI 实例化您的 RecrodExists 验证器，并自动注入 DB Adapter

DI配置：

```
'Zend\Validator\Db\RecordExists' => array(
     'parameters' => array(
          'adapter'  => 'Zend\Db\Adapter\Adapter',
      ),
 ), 
```

# sql - ASP 经典 - Microsoft SQL 和 UPDATE 上的多个 where 子句

> ID：15112284
> 
> 赞同：0
> 
> 时间：2013-02-27T12:35:20.723
> 
> 标签：sql, asp-classic, where

我有以下字符串，但似乎不喜欢它：

```
"UPDATE 
   table 
      SET a = '', b = '34' 
   WHERE id = '1000001'; 
      SET a = '1111', b = '11' 
   WHERE id = '100210'; 
      SET a = '', b = '2' 
   WHERE id = '8002059';" 
```

在我的 asp 经典代码中，该字符串位于一行中。这是执行多个更新/where 语句的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:40:39.433

它会更喜欢这个（3 个语句）。

```
UPDATE table SET a = '', b = '34' WHERE id = '1000001'; 

UPDATE table SET a = '1111', b = '11' WHERE id = '100210'; 

UPDATE table SET a = '', b = '2' WHERE id = '8002059'; 
```

或者，您可以在 SET 中使用两个 CASE 语句。它不会那么可读，但是如果这是一个 1-off 的情况，您经常需要执行 3 个条件更新（不太可能），那么它会运行得稍微快一点，而不是 3 个数据库往返。

```
UPDATE table SET 

a = CASE id WHEN '1000001' THEN '' WHEN '100210' THEN '1111' WHEN '8002059' THEN '' ELSE a END, 

b = CASE id WHEN '1000001' THEN '34' WHEN '100210' THEN '11' WHEN '8002059' THEN '2' ELSE b END

WHERE id IN ('1000001', '100210', '8002059'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:45:56.917

不，它会给你一个错误。

```
Msg 156, Level 15, State 1, Line 2
Incorrect syntax near the keyword 'table'. 
```

而且您不能在[UPDATE](http://msdn.microsoft.com/en-us/library/ms177523.aspx)语句中使用多个 where 。

试试这个：

```
UPDATE 
   [table]
   set a =
   ( case when id IN ( '1000001', '8002059') then  '' 
          when id = '100210' then '1111'
     end    
   ),
   b =  
   ( case when id = '1000001' then '34' 
          when id = '100210' then '11'
          when id = '8002059' then '2'
     end    
   )
   where id in ('1000001', '100210', '8002059'); 
```

# html - 使用 Kineticjs 在 Canvas 上添加多个图像

> ID：15112286
> 
> 赞同：1
> 
> 时间：2013-02-27T12:35:22.513
> 
> 标签：html, canvas, html5-canvas, kineticjs

我正在通过 HTML5 Canvas Kinteticjs[教程](http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-image-tutorial/)添加图像。我想添加多个图像并将它们分层。
下面的示例有两个图像，但两者都是相同的。

问题：如何加载 2 个不同的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:24:53.827

您将不得不创建两个图像对象而不是一个，并且在加载这两个对象时，您可以将两个图像都放在画布上。

```
var imgObj1 = new Image();
var imgObj2 = new Image();
var loadCount = 0;

imgObj1.onload = function() {
   loadCount++;
   if(loadCount==2) putOnCanvas();
};

imgObj2.onload = function() {
   loadCount++;
   if(loadCount==2) putOnCanvas();
};

imgObj1.src = ".....";
imgObj2.src = ".....";

function putOnCanvas() {
    var yoda = new Kinetic.Image({
      x: 140,
      y: stage.getHeight() / 2 - 59,
      image: imageObj1,
      width: 106,
      height: 118
    });

    var filteredYoda = new Kinetic.Image({
      x: 320,
      y: stage.getHeight() / 2 - 59,
      image: imageObj2,
      width: 106,
      height: 118
    });

    // add the shape to the layer
    layer.add(yoda);
    layer.add(filteredYoda);

    // add the layer to the stage
    stage.add(layer);

    // apply grayscale filter to second image
    filteredYoda.applyFilter(Kinetic.Filters.Grayscale, null, function() {
      layer.draw();
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:50:29.727

您可能已经知道，Image 不是 KineticJS 对象，但 Kinetic.Image 是。

因此，只要您在 Image 和 Kinetic.Image 之间建立一对一的连接，就可以了。

html5canvastutorials.com 上的示例使用 Image.onload 函数创建 Kinetic.Image。这让很多人感到困惑。但是，如果您预加载图像，则不需要这样做。

在加载 Image 时创建 Kinetic.Image 的目的不是在画布上出现无效（损坏）的图像。因此，如果您通过预加载这些图像使所有图像都有效，那么您根本不需要使用 image.onload，这会让您感到困惑。

要预加载图片，

1.  您可以简单地将图像添加到文档中并使其隐藏
2.  或者，使用 ajax 调用来调用图像 url。

# php - Facebook 开发者标签 Heroku 和其他

> ID：15112287
> 
> 赞同：0
> 
> 时间：2013-02-27T12:35:23.473
> 
> 标签：php, git, heroku, hyperlink

我想知道你是否可以帮助我。我目前正在运行 Windows 8。带有 .php 插件的 Vs2012。我已经按照 facebook 的开发者应用页面上的所有步骤，然后是使用 git 命令行界面的 heroku。而且我似乎不断收到各种错误。有人知道如何创建、编辑和上传 Facebook 应用程序的最新体面教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T08:42:57.743

你可以在这个链接上看到视频

[https://www.youtube.com/watch?feature=player_embedded&v=HgiONvm5JB0](https://www.youtube.com/watch?feature=player_embedded&v=HgiONvm5JB0)

它将教您如何拉取和编辑 Facebook 应用程序

视频可能会过时，所以这是另一个链接

[https://devcenter.heroku.com/articles/facebook#create-an-app](https://devcenter.heroku.com/articles/facebook#create-an-app)

# bash - 在 bash 中编写带有替换的通用文件

> ID：15112289
> 
> 赞同：0
> 
> 时间：2013-02-27T12:35:25.963
> 
> 标签：bash, ubuntu, file-io, filesystems

我正在编写一个脚本来在我的计算机上设置新项目，

我想做的一件事是让它自动为我设置虚拟主机。

文件本身很简单

该文件应该被调用`<project>.testfox.dev.conf`并且应该包含

```
<VirtualHost *:80>
DocumentRoot "/var/www/work/<project>"
ServerName <project>.testfox.dev
<Directory "/var/www/work/<project>">
allow from all
Options +Indexes
</Directory>
ErrorLog /var/log/apache2/<project>.error.log
LogLevel error
TransferLog /var/log/apache2/<project>.access.log
</VirtualHost> 
```

我想知道的是，我应该在我的脚本中包含该代码并将其逐行写入文件，还是应该在我复制的站点可用文件夹中有一个虚拟文件，然后搜索替换占位符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T13:04:19.207

最灵活的方法是将其作为模板（作为单独的文件或 HEREDOC），逐行编写会使以后很难修改。

HEREDOC 方法更容易实现，因为您可以使用变量插值：

```
cat >$PROJECT.testfox.dev.conf <<EOF

<VirtualHost *:80>
DocumentRoot "/var/www/work/$PROJECT"
ServerName $PROJECT.testfox.dev
<Directory "/var/www/work/$PROJECT">
allow from all
Options +Indexes
</Directory>
ErrorLog /var/log/apache2/$PROJECT.error.log
LogLevel error
TransferLog /var/log/apache2/$PROJECT.access.log
</VirtualHost>
EOF 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:59:50.700

两者都是可行的方法。

如果您想修改它，使用它作为模板可以使其更容易和更易读。但是将其保存在 bash 脚本中作为[此处的文档](http://www.gnu.org/software/bash/manual/bashref.html#Here-Documents)也可以。

最后，这取决于您的喜好。

# asp.net - 从后面的代码在新选项卡中打开页面

> ID：15112290
> 
> 赞同：0
> 
> 时间：2013-02-27T12:35:29.003
> 
> 标签：asp.net

是否可以从后面的代码在新选项卡中打开页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:36:39.730

你可以试试这个

```
 Response.Write '<script type="text/javascript"> window.open(url); 
```

或者看看[**jems的回答**](https://stackoverflow.com/questions/5530274/asp-net-open-new-tab-in-browser-from-codebehind)

或者你可以使用[**window.open 命令**](https://stackoverflow.com/questions/1215505/how-can-i-programatically-open-a-new-page-in-a-new-tab-from-my-codebind-file-in)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:38:50.943

如果您使用超链接，您可以添加`target="blank"`属性。

# c# - 如何验证 PasswordBox WPF

> ID：15112292
> 
> 赞同：14
> 
> 时间：2013-02-27T12:35:30.063
> 
> 标签：c#, wpf, validation

我正在尝试对`PasswordBox`. 为了进行验证，我遵循了这个[链接](http://www.codeproject.com/Articles/15239/Validation-in-Windows-Presentation-Foundation)，它显示了如何验证`TextBox`。

问题随之而来`PasswordBoxes`。因为`Password`出于安全原因它不可绑定，所以我尝试在[此链接](http://blog.functionalfun.net/2008/06/wpf-passwordbox-and-data-binding.html)之后进行绑定（也在[这里](http://www.codeproject.com/Articles/37167/Binding-Passwords)解释，对于 CodeProject 用户）。

所以，显然，太棒了！我可以绑定我`PasswordBox`的`Password`属性，然后我可以绑定我的验证。但它无视我...

这是`TextBox`我使用并且工作正常的常规：

```
<local:ErrorProvider Grid.Column="1" Grid.Row="2" >
    <TextBox Width="160" 
          HorizontalAlignment="Left" 
           Name="textBoxUserPass" 
           Text="{Binding Path=Password, UpdateSourceTrigger=Explicit}" />
 </local:ErrorProvider> 
```

这是`PasswordBox`我试图模拟的：

```
<local:ErrorProvider Grid.Column="1" Grid.Row="2" >
      <PasswordBox Width="160"
          HorizontalAlignment="Left"
          Name="textBoxUserPass"
          local:PasswordBoxAssistant.BindPassword="True"
          local:PasswordBoxAssistant.BoundPassword="{Binding Path=Password, UpdateSourceTrigger=Explicit}" />
 </local:ErrorProvider> 
```

这就是我获得`BindingExpression`for each的方式`TextBox`：

```
BindingExpression beUserName = textBoxUserName.GetBindingExpression(TextBox.TextProperty);
if (beUserName != null) beUserName.UpdateSource(); 
```

这就是我得到它的方式`PasswordBox`：

```
BindingExpression bePassword = textBoxUserPass.GetBindingExpression(PasswordBoxAssistant.BoundPassword);
if (bePassword != null) bePassword.UpdateSource(); 
```

如果我们犯了任何错误（在我的 Validation 类中定义），当我这样做时：

```
if (!beUserName.HasError && !bePassword.HasError) 
```

根据错误验证，每个人都`BindingExpression`应该说**真**或**假。**但是因为我`PasswordBox`从来没有得到过价值......有什么想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T14:50:17.303

尝试设置`ValidatesOnDataErrors=True`和`ValidatesOnExceptions=True`绑定：

```
<PasswordBox ...
   local:PasswordBoxAssistant.BoundPassword="{Binding Path=Password,
      UpdateSourceTrigger=Explicit, 
      ValidatesOnDataErrors=True, 
      ValidatesOnExceptions=True}"
/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-03T19:36:26.143

在绑定上设置 Mode=TwoWay

```
local:PasswordBoxAssistant.BoundPassword="{Binding Path=Password,Mode=TwoWay,
UpdateSourceTrigger=Explicit}" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T13:49:10.637

据我记得，在 PasswordBox 上添加验证的唯一方法是在 SecurePassword 的绑定属性的设置器中抛出一个新的 ValidationException。PasswordBoxAssistant 不会帮助您。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-15T17:01:31.723

另一种解决方案，在中间不使用任何“不安全”字符串，是调整 Window 代码，如下所示：

假设我有一个这样的 MVVM 对象，使用 WPF 验证[IDataErrorInfo](http://msdn.microsoft.com/en-us/library/system.componentmodel.idataerrorinfo.aspx)：

```
public class MyObject : INotifyPropertyChanged, IDataErrorInfo
{
    ...
    public SecureString SecurePassword
    {
        get
        { ... }
        set
        {
            ...
            OnPropertyChanged("SecurePassword");
        }
    }

    ...

    string IDataErrorInfo.Error { get { return Validate(null); } }
    string IDataErrorInfo.this[string columnName] { get { return Validate(columnName); } }

    private string Validate(string memberName)
    {
        string error = null;
        ...
        if (memberName == "SecurePassword" || memberName == null)
        {
            // this is where I code my custom business rule
            if (SecurePassword == null || SecurePassword.Length == 0)
            {
                error = "Password must be specified.";
            }
        }
        ...
        return error;
    }

} 
```

还有一个带有 PasswordBox 的 Window Xaml，如下所示：

```
<PasswordBox Name="MyPassword" PasswordChanged="MyPassword_Changed" ... /> 
```

然后，像这样对应的 Window 代码会触发 PasswordBox 绑定：

```
// add a custom DependencyProperty
public static readonly DependencyProperty SecurePasswordProperty =
    DependencyProperty.RegisterAttached("SecurePassword", typeof(SecureString), typeof(MyWindow));

public MyWindow()
{
    InitializeComponent();

    DataContext = myObject; // created somewhere

    // create a binding by code
    Binding passwordBinding = new Binding(SecurePasswordProperty.Name);
    passwordBinding.Source = myObject;
    passwordBinding.ValidatesOnDataErrors = true;
    // you can configure other binding stuff here
    MyPassword.SetBinding(SecurePasswordProperty, passwordBinding);
}

private void MyPassword_Changed(object sender, RoutedEventArgs e)
{
    // this should trigger binding and therefore validation
    ((MyObject)DataContext).SecurePassword = MyPassword.SecurePassword;
} 
```

# android - 一些匈牙利字符在 android 中无法正确显示

> ID：15112294
> 
> 赞同：1
> 
> 时间：2013-02-27T12:35:36.353
> 
> 标签：android

我的 XML 响应是

> `<name> DPD futár </name>`

**我的 XML 解析代码**

```
 SAXParserFactory _saxFactory = SAXParserFactory.newInstance();
        SAXParser _saxParser = _saxFactory.newSAXParser();
        XMLReader _xmlReader = _saxParser.getXMLReader();
        _shippingMethodList = new ArrayList<ShippingMethodItem>();
        ShippingMethodParser _cartLoginParser = new ShippingMethodParser(
                _shippingMethodList);
        _xmlReader.setContentHandler(_cartLoginParser);
        InputSource is = new InputSource();
        is.setEncoding("ISO-8859-1");
        is.setCharacterStream(new StringReader(response));
        _xmlReader.parse(is); 
```

但是我在我的名字变量中得到了以下字符串。

> DPD 未来

我也尝试

```
is.setEncoding("UTF-8"); 
```

但没有获得成功。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:14:14.530

试试这个

```
InputSource in = new InputSource(new InputStreamReader(url.openStream(),"ISO-8859-1")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:47:51.793

您不应该对匈牙利数据使用 ISO-8859-1（拉丁 1）编码，因为它不包含`ő`. 例如，该字母`á`也是葡萄牙语和西班牙语字母表的一部分，两者都受 latin 1 支持，但在匈牙利语的情况下，只有 latin 2 (ISO-8859-2) 可以使用。但是，您应该始终尽可能使用 unicode 编码。

首先，我会检查接收到的数据是否正确编码，因为当您将字符串编码为 un​​icode 时也可能发生错误。您提供的示例是典型的编码错误。也许您正在尝试将 UTF-8 编码为错误的 UTF-8。

# java - 字符串解析机制以获取值

> ID：15112306
> 
> 赞同：0
> 
> 时间：2013-02-27T12:36:05.080
> 
> 标签：java, regex, string, parsing, expression

我遇到了以下问题，希望有人能告诉我是否使用了最糟糕的机制来实现我想要做的事情：

这是我需要解析的字符串：

```
(s(j1) | f(j2) | d(f3) | t(f4) | e(f5) = 5) & v(g) = "0" 
```

我需要能够将 j1、j2、f3、f4、f5 和 g 以及括号内的其他任何内容作为单独的元素

这就是我正在做的事情，但它没有按照我想要的方式工作......

```
String parsedString="";
String delimiter = "[()s(f(d(t(n(v(&|]+");
String[] tokens = parseString.split(delimiterString);
List<String> listOfValues = new ArrayList<String>(Arrays.asList(tokens));
for (int i=0;i<listOfValues.size();i++)
{
    System.out.println("Value of "+i+"is "+listOfValues.get(i));
    if(listOfValues.get(i).equals("\r") || listOfValues.get(i).equals("")|| listOfValues.get(i).equals(" "))
    {
         listOfValues.remove(i);
     }
} 
```

我也在尝试删除空格和回车，但是如果有更好的方法来做到这一点（显然我的方法不起作用），请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:41:58.413

这应该有助于：

```
String input = "(s(j1) | f(j2) | d(f3) | t(f4) | e(f5) = 5) & v(g) = \"0\"";
String regex = "\\(([^(]+?)\\)";
Matcher matcher = Pattern.compile(regex).matcher(input);
while (matcher.find()) {
    System.out.println(matcher.group(1));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:44:11.367

你可以试试这个：

```
Pattern p = Pattern.compile("[a-z]\\(([a-z0-9]+)\\)");
Matcher m = p.matcher(input);
while (m.find()) {
    System.out.println(m.group(1));
} 
```

与您的输入一起使用时会返回：

```
j1
j2
f3
f4
f5
g 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T12:53:22.677

只要不涉及严重的递归，正则表达式就是一种简单的方法。

```
String s =  "(s(j1) | f(j2) | d(f3) | t(f4) | e(f5) = 5) & v(g) = \"0\"";

Pattern p = Pattern.compile("\\A.*?\\(([^\\(\\)][^\\(\\)]?)\\)(.*)\\z", Pattern.DOTALL);
List<String> listOfValues = new ArrayList<String>();

Matcher m = p.matcher(s);
while (m.matches())
{
    String toAdd = m.group(1);
    System.out.println("adding = " + toAdd);
    listOfValues.add(toAdd);
    s = m.group(2);
    m = p.matcher(s);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T12:55:46.530

```
 Pattern p = Pattern.compile("(?<=\\()[^ ()]+(?=\\))");
    Matcher m = p.matcher("(s(j1) | f(j2) | d(f3) | t(f4) | e(f5) = 5) & v(g) = \"0\"");
    while (m.find()) {
        System.out.println(m.group(0));
    } 
```

# uinavigationbar - 当我单击“编辑”按钮时，UIBarButtonItem 不会将其状态从“编辑”更改为“完成”

> ID：15112311
> 
> 赞同：2
> 
> 时间：2013-02-27T12:36:14.790
> 
> 标签：uinavigationbar, xcode4.3, uibarbuttonitem

我正在实施`commitEditingStyle:`。当我点击导航栏上的编辑按钮时，滑动删除按钮将到达，一切正常。问题是，当我单击“编辑”时，我想将该按钮更改为“完成”，当我单击“完成”时，表格视图单元格上的那些删除按钮应该消失，我该怎么做，我是新手，请指导我在哪里做错了。

代码片段如下所示：-

```
- (void)viewDidLoad
{       
     UIToolbar* tools = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 133, 44.01)];
     NSMutableArray* buttons = [[NSMutableArray alloc] initWithCapacity:3];

     UIBarButtonItem* bi = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCompose target:self action:@selector(ComposeBtn)];
     bi.style = UIBarButtonItemStyleBordered;
     [buttons addObject:bi];
     [bi release];

     bi = [[UIBarButtonItem alloc]
          initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace target:nil action:nil];
     [buttons addObject:bi];
     [bi release];

     bi = [[UIBarButtonItem alloc]
          initWithBarButtonSystemItem:UIBarButtonSystemItemEdit target:self action:@selector(setEditing:)];
     bi.style = UIBarButtonItemStyleBordered;
     [buttons addObject:bi];
     [bi release];

     [tools setItems:buttons animated:NO];
     [buttons release];

     self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:tools];
     [tools release];
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
   // Return NO if you do not want the specified item to be editable.
    return YES;
}

- (void)setEditing:(BOOL)editing animated:(BOOL)animated
{
    [super setEditing:editing animated:animated];
    [self.listOfFilesTblView setEditing:editing animated:animated];
}

- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    return UITableViewCellEditingStyleDelete;
} 
```

如果我使用下面的代码行，一切都可以正常工作。

```
self.navigationItem.rightBarButtonItem=self.editButtonItem; 
```

但我想要导航栏上的 2 个按钮，1）编辑 2）撰写。请指导我在这里缺少什么。在此先感谢。

# cron - crontab -e 在哪里保存数据？

> ID：15112312
> 
> 赞同：0
> 
> 时间：2013-02-27T12:36:16.103
> 
> 标签：cron

执行后保存用户和 root 的 cron 文件的位置

```
crontab -e 
```

并保存数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T12:50:02.777

/var/spool/cron/username
用于`su`访问文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:59:30.333

每个用户都可以拥有自己的 crontab，这些文件位于 /var 中。

# html - 具有相同 CSS 样式但尺寸不同的 HTML 锚点和输入按钮

> ID：15112318
> 
> 赞同：12
> 
> 时间：2013-02-27T12:36:46.790
> 
> 标签：html, css, button

所以我有一个基本的按钮类，它将相同的样式应用于站点上的各种按钮。

我最终不得不将一个表单输入和一个锚标记放在一起，它们的高度和宽度是不同的。我在每个按钮上都设置了相同的内部按钮文本，只是为了显示类似的差异（显然我不需要两个相邻的“添加”按钮：P）

我不想在 CSS 中指定宽度或高度，因为内容会改变。甚至字体看起来大小也略有不同，从盒子模型来看，填充看起来还不错。

[http://jsfiddle.net/aeD4Z/2/](http://jsfiddle.net/aeD4Z/2/)

标记

```
<form id="" method="POST" action="">
<input class="button" type="submit" name="submit" value="Add">
</form>

<a class="button" href="">Add</a> 
```

CSS

```
.button {
    font-family: Arial;
    background: linear-gradient(to bottom, #FCB97E 0%, #F07605 100%) repeat scroll 0 0 transparent;
    border: 1px solid #F07605;
    border-radius: 0.5em 0.5em 0.5em 0.5em;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
    color: #FFFFFF;
    cursor: pointer;
    display: inline-block;
    font-size: 13px;
    font-weight: bold;
    line-height: 13px;
    outline: medium none;
    padding: 5px 8px !important;
    text-align: center;
    text-decoration: none;
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.3);
    vertical-align: baseline;
} 
```

***编辑：****正如您在下面看到的，它不是填充，因为萤火虫中的盒子模型显示每个填充都是相同的，所以它与实际元素本身有关*

![输入和锚点的盒子模型](../Images/6d12ef7309c0e2533a683e9369d3bc54.png)

如何从上面的 js fiddle 中的单个 CSS 类中获得相同的尺寸？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-02-21T17:59:21.780

为了完全均衡“button-ish”`<a>`锚点，`input`最近`button`，同步它们的 box-sizing 是个好主意：

`input`并且`button`由于历史原因仍处于怪癖模式（分别处于现代模式[`box-sizing: border-box`](https://www.w3schools.com/cssref/css3_pr_box-sizing.asp)）其余处于[`box-sizing: content-box`](https://www.w3schools.com/cssref/css3_pr_box-sizing.asp)模式...（无论哪种方式：必须置于相同的模式或通过区分填充来补偿相等的高度）

[![在此处输入图像描述](../Images/950c96742df2d8944e450fdf011e51ae.png)](https://www.w3schools.com/cssref/css3_pr_box-sizing.asp)

**这是我开始为网站设计样式时的标准“测试”：**

```
__AA__
<button id='button'>plain Button</button>
<a class='button' href='#'>plain Anchor</a>
<a class='button'>linkless Anchor</a>
<input class='button' type='submit' value='Input Button' />
__BB__ 
```

**这个 CSS（以[手写笔](http://stylus-lang.com/)表示）是一个很好的样板：**

```
button, a.button, input.button
    display inline-block
    font-size 12px
    font-weight bold

    color white
    font-family sans-serif
    text-decoration none
    background #24B345
    cursor pointer // also linkless (i.e. js) anchors/buttons should have that

    // important to equalize input/button vs. anchor:
    box-sizing content-box
    border 4px solid green
    padding 8px 10px
    margin 5px 4px 10px 0

    // some of this is default, 
    // but since input often gets styled elsewhere...
    vertical-align middle // a bit subject to taste 
    min-height 0 

    &:hover, &:focus // slight hover effect, resp. keyboard use (:focus)
         background: #44D365 
```

[生活在 Codefork 上](https://codepen.io/fnocke/pen/rjXZGB?editors=1100)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:04:21.830

填充对按钮和锚点的应用不同。我不知道这是事实，但我的猜测是一个按钮在它的值周围保留了更多的空间，看起来更像是一个链接呈现为文本的按钮。

你可以试试这个：

```
a {
   padding-top:5px !important;
   padding-bottom:5px !important;
   padding-left:0px !important;
   padding-right:0px !important;
} 
```

这不会是完全相同的大小，但非常接近。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-26T09:43:51.657

好吧，我总是在按钮类中添加 line-height 属性，如下所示：

```
/* HTML */
<a href="" class="button"> Go somewhere </a>

<button class="button"> Click here </button>

<input type="submit" class="button" value="Submit"> 
```

```
/* CSS */
.button {
    box-sizing: border-box;
    display: inline-block;
    cursor: pointer;
    line-height: inherit;   // this property does magic
   // rest of the styling
} 
```

这总是对我有用..

# google-app-engine - appengine-maven-plugin 1.7.5 似乎对 java7 的支持不完整，因为 deps 滞后

> ID：15112319
> 
> 赞同：2
> 
> 时间：2013-02-27T12:36:50.023
> 
> 标签：google-app-engine, maven

我正在尝试在 Maven 中为 GAE 使用新的 Google 插件。

与旧插件不同，一切运行顺利。

除了部署之外的所有内容。

第一个令人担忧的事情是，从一个空的开始`.m2`（我删除它以确保没有旧版本对我造成影响）和在初始下载阶段`mvn appengine:update`，maven 说

```
Downloaded: http://repo.maven.apache.org/maven2/com/google/appengine/appengine-tools-sdk/1.7.4/appengine-tools-sdk-1.7.4.jar (16762 KB at 788.5 KB/sec) 
```

然后，如果我运行`mvn appengine:update`，它会说

```
[INFO] Updating Google App Engine Application
********************************************************
There is a new version of the SDK available.
-----------
Latest SDK:
Release: 1.7.5
Timestamp: Fri Jan 11 00:56:53 CET 2013
API versions: [1.0]

-----------
Your SDK:
Release: 1.7.4
Timestamp: Tue Dec 11 12:41:31 CET 2012
API versions: [1.0]

----------- 
```

当我检查我的 .m2 文件夹时，我得到了

```
mog@becca:~/.m2/repository/com/google$ tree -L 2 appengine/
appengine/
├── appengine
│   ├── 1.7.4
│   └── 1.7.5
├── appengine-api-1.0-sdk
│   └── 1.7.5
├── appengine-api-stubs
│   └── 1.7.5
├── appengine-java-sdk
│   └── 1.7.5
├── appengine-maven-plugin
│   └── 1.7.5
├── appengine-testing
│   └── 1.7.5
└── appengine-tools-sdk
    └── 1.7.4 
```

这似乎表明 1.7.5 插件的依赖项是不完整的：在 1.7.4 中有些滞后。恼人的部分是它似乎阻止了我使用 1.7.5 插件的自动 java 7 检测功能，如下图所示：

当我使用`mvn appengine:update`时，我收到警告：

```
warning: [options] bootstrap class path not set in conjunction with -source 1.6
1 warning 
```

此警告，以及当我访问我的网站时收到错误 500 的事实，以下日志对此进行了解释：

```
Failed startup of context com.google.apphosting.utils.jetty.RuntimeAppEngineWebAppContext@15a4523{/,/base/data/home/apps/s~trashnao/1.365599992371450729}
org.mortbay.util.MultiException[java.lang.UnsupportedClassVersionError: fr/univnantes/atal/web/trashnao/Controller : Unsupported major.minor version 51.0, java.lang.UnsupportedClassVersionError: fr/univnantes/atal/web/trashnao/Controller : Unsupported major.minor version 51.0]
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:656) 
```

让我认为 used`appengine-tools-sdk-1.7.4`还不支持通过`pom.xml`文件自动检测 java 7。

正如开发人员自己在[此视频](https://developers.google.com/events/48092530/)中所说，自动检测 java 7 目标的这一功能在 1.7.5 插件中可用。

尝试在[那个问题](https://stackoverflow.com/questions/14675058/using-java-7-with-official-google-appengine-maven-plugin/14677222#14677222)中给出的解决方案，我收到了这条消息，而不是关于 boostrap 类的消息：

```
warning: Supported source version 'RELEASE_6' from annotation processor 'com.google.appengine.tools.compilation.DatastoreCallbacksProcessor' less than -source '1.7' 
```

我想就如何解决这个问题提出任何建议。即，如何使`mvn appengine:update`目标`--java_7`在调用 appcfg 时使用该选项（[相关文档](https://developers.google.com/appengine/docs/java/java7)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T23:20:58.470

我可以解决这个问题，如果您想提交问题并查看进度，请随时在此处进行：[https](https://code.google.com/p/appengine-maven-plugin/issues/list) ://code.google.com/p/appengine-maven-plugin/issues/list我会保持更新。

编辑：在 1.7.6 中修复并使用强制插件确保它不会再次发生。

# django - 在 Django 模板中格式化 TimeField 不显示任何内容

> ID：15112323
> 
> 赞同：1
> 
> 时间：2013-02-27T12:36:59.127
> 
> 标签：django, django-templates, django-filters

我有一个包含 TimeField 对象的模型。我还有一个 django 模板，它以 JSON 格式列出时间字段，例如

```
...
   "time":"{{ mymodel.mytime }}",
... 
```

在不指定任何格式/过滤器等的情况下，这会导致以下结果，例如

```
....
    "time":"5 p.m.",
.... 
```

但是，当我将时间过滤器应用于我的模板时，即

```
...
   "time":"{{ mymodel.mytime|time:"H:i" }}",
... 
```

我得到以下结果：

```
...
    "time":"",
... 
```

即我的时间价值被抹去。我不确定发生了什么事？我在同一模型中也有一个日期字段，并且我应用的过滤器（在同一个 django 模板中）按定义工作。

我正在使用 Django 1.4.2

我错过了什么或做得不对？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-14T15:43:33.540

您也将时间格式放在双引号中。尝试：

```
"time":"{{ mymodel.mytime|time:'H:i' }}", 
```

或者

```
"time":'{{ mymodel.mytime|time:"H:i" }}', 
```

或者

```
"time":"{{ mymodel.mytime|time:\"H:i\" }}", 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:20:26.587

由于一些奇怪的原因，不确定是什么..它已经开始工作了！一定是一个错字或过滤器格式的东西？！真的很奇怪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-15T10:40:00.200

时间

根据给定的格式格式化时间。

给定格式可以是预定义的 TIME_FORMAT，也可以是自定义格式，与日期过滤器相同。请注意，预定义格式取决于区域设置。

例如：

{{ 值|时间:"H:i" }}

# c# - 获取过程参数的数据类型

> ID：15112324
> 
> 赞同：1
> 
> 时间：2013-02-27T12:37:00.130
> 
> 标签：c#, oracle, select, plsql

我有一个列表，其中包含我在 C# 中的数据库中的所有程序。我需要获取每个参数的数据类型。例如，我有一个名为 insertmd 的过程，其参数为：name、age。如何从只显示的 all_tab_columns 中进行选择，例如参数名称，只是：varchar2？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T12:42:51.327

`all_tab_columns`用于桌子。如果您想查看过程的参数，请执行以下操作：

```
select * 
  from all_arguments 
 where data_type = 'VARCHAR2' 
   and object_name ='INSERTMD'
   and owner = 'YOURSCHEMA'; 
```

假设 INSERTMD 是一个独立的过程/功能。如果它在一个包中，那么也过滤`package_name`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T14:48:12.717

我想它可以澄清你的观点！

```
select ua.argument_name,ua.data_type,ua.object_name 
  from user_arguments ua; 
```

只需使用这个来查找所有增强。如果有任何澄清，请告诉我

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T12:42:37.520

您需要的所有信息都应该在 INFORMATION_SCHEMA.PARAMETERS 视图中。

# maps - 嗨，我正在使用 jvectormap，我正在寻找一种检测当前缩放步长的方法。任何人的想法？

> ID：15112326
> 
> 赞同：2
> 
> 时间：2013-02-27T12:37:03.357
> 
> 标签：maps, jvectormap

嗨，我正在使用 jvectormap，我正在寻找一种方法来获取当前的缩放步长（在捏/缩放之后）。任何人的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:45:48.283

如果使用1.2.2版本可以监听onViewportChange事件，该事件接收两个参数(event,number)，数字为缩放级别。

如果您使用 1.1.1 版本，您需要在 js 中进行更改检查我的更改： http: [//pastebin.com/s5GwcEMy](http://pastebin.com/s5GwcEMy)

我将 onViewportChange 事件添加到 api。

另一种方法是获取地图参考：

```
map = $("#world-map-gdp").vectorMap('get', 'mapObject'); 
```

并获得规模：

```
var scale = map.scale; 
```

# c# - 使用视觉状态在静态宽度和自动宽度之间切换

> ID：15112330
> 
> 赞同：0
> 
> 时间：2013-02-27T12:37:10.140
> 
> 标签：c#, xaml, windows-8, visualstatemanager

我当前的应用程序有一个小问题，处理视觉状态和自动/静态宽度。

根据视觉状态，a`StackPanel`要么具有宽度 =“自动”，要么具有宽度 =“400”。Blend 告诉我我不能在这两个值之间进行动画处理（而且我在这里并不是真正的动画，只是在全屏视频和复合视图之间切换）。现在，当我更改我的视觉状态（通过`VisualStateManager`-framework）时，我必须进行显式测试并更改宽度。有什么方法可以在 XAML 中（通过情节提要）而不是在代码隐藏中做到这一点？

我今天正在做的一些代码示例：

```
private void Trailer_OnFullScreenToggled(object sender, EventArgs e)
{
    var state = (Trailer.IsFullScreen() ? "Windowed" : "Fullscreen");

    // HACK: Done to get past the auto / px issue
    VisualsGrid.Width = Trailer.IsFullScreen() ? 400.0 : Double.NaN;

    VisualStateManager.GoToState(this, state, true);
} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:02:05.237

宽度的“Auto”值别名为 Double.NaN。这就是动画失败的原因——它不能对该值进行插值或从该值进行插值。

您是否尝试过使用带有离散关键帧的关键帧动画？使用离散关键帧动画应该可以解决动画系统无法插值到 Double.NaN 或从 Double.NaN 插值的问题，因为不会发生插值。

我目前不在开发环境面前，所以我不确定您是否需要使用具有 DiscreteDoubleKeyFrame 和 Double.NaN 值的 DoubleAnimationUsingKeyFrames 或具有 DiscreteStringKeyFrame 和 Auto 值的 StringAnimationUsingKeyFrames。

当然，这不会从固定宽度到自动调整大小的平滑动画，而是会在两者之间弹出。

# css - 多个 CSS 背景图像？怎么摆放？

> ID：15112335
> 
> 赞同：-1
> 
> 时间：2013-02-27T12:37:31.723
> 
> 标签：css, image, background, tumblr

总新手在这里。

*[http://makimaki45.tumblr.com/](http://makimaki45.tumblr.com/)*

有谁知道如何在描述的右侧和第一个帖子列的左侧放置另一个背景图像？如何把它准确地放在某个地方？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:04:34.907

一个风格与此类似的新 div 怎么样：

```
 <style>
    .mydiv {
      position:absolute; 
      left:0px;
      top:0px;
      background-color:#fff; /*obviously insert your background here */
      height:400px;
      width:200px;
    }
  </style> 
```

# html - 使用从右到左文本的搜索输入元素的 webkit 样式

> ID：15112336
> 
> 赞同：0
> 
> 时间：2013-02-27T12:37:33.953
> 
> 标签：html, css, webkit, right-to-left

我在我的标记中使用搜索输入，如下所示：

```
<input type="search" placeholder="search" /> 
```

Webkit 以多种方式为类型为“搜索”的输入元素设置样式。

一个特点是，当您开始输入输入时 - 您会在输入元素的右侧看到一个取消 ('x') 按钮。

但是，如果您使用的是从右到左的语言，例如希伯来语或阿拉伯语 - webkit 取消按钮仍然出现在右侧（而不是 lhs）。

这是一个证明这一点[的小提琴。](http://jsfiddle.net/danield770/5cgkQ/1/)

1.  这是一个 webkit 错误吗？

2.  如果它是一个错误 - 是否有一种解决方法我仍然可以`type="search"`在我的标记中使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:03:25.910

这不是严格意义上的错误，因为取消按钮上没有公共规范。这是一个（错误）功能，或不完整的本地化。它已在 2010 年的 WebKit Bugzilla 上被报告为[错误 51499](https://bugs.webkit.org/show_bug.cgi?id=51499)，看起来它不会被修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:03:27.787

为了完整起见，我刚刚在[这篇文章中找到了](http://css-tricks.com/webkit-html5-search-inputs/)**解决**此问题的方法

以下代码将使您能够根据需要设置“x”按钮的样式和位置。

```
input[type="search"]::-webkit-search-cancel-button {

   /* Remove default */
    -webkit-appearance: none;

    /* Now your own custom styles */
    ...
    ...
} 
```

看这个的[现场演示](http://jsfiddle.net/danield770/5cgkQ/3/)。

同样，您可以像这样完全删除 webkit 取消按钮：

```
input[type="search"]::-webkit-search-cancel-button
{
  display: none;
} 
```

# python - 定义类后如何设置多态标识？

> ID：15112340
> 
> 赞同：0
> 
> 时间：2013-02-27T12:37:45.777
> 
> 标签：python, python-2.7, sqlalchemy

我有一个使用 Mapper 参数定义表的类：`polymorphic_on: column`

我有一些其他类继承了这个类，它们都需要 set `__mapper_args__ 'polymorphic_identity'`，我想在定义一个类之后做，而不是在类定义中设置它。

定义类后如何设置 polymorphic_identity Mapper 参数？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T00:29:47.883

这不是完全公开的 API，但应该可以工作：

```
from sqlalchemy.orm import class_mapper
mapper = class_mapper(MySubClass)
mapper.polymorphic_identity = "some_identity"
mapper.polymorphic_map["some_identity"] = mapper
# in 0.8, might try to fix this for 0.9
mapper._identity_class = mapper.inherits._identity_class 
```

这是可以作为功能支持的东西，因此请随意[添加功能请求](http://www.sqlalchemy.org/trac/newticket)。

编辑：这是使用声明性的测试：

```
from sqlalchemy import *
from sqlalchemy.orm import *
from sqlalchemy.ext.declarative import declarative_base

from sqlalchemy.orm import class_mapper

Base= declarative_base()

class A(Base):
    __tablename__ = "a"

    id = Column(Integer, primary_key=True)
    type = Column(String)
    __mapper_args__ = {"polymorphic_on": type, "polymorphic_identity": "a"}

class B(A):
    pass

mapper = class_mapper(B)
mapper.polymorphic_identity = "b"
mapper.polymorphic_map["b"] = mapper

e = create_engine("sqlite://", echo=True)

Base.metadata.create_all(e)

s = Session(e)

s.add_all([A(), B(), B(), A(), A()])
s.commit()

s.close()

assert [obj.type for obj in s.query(B).order_by(A.id)] \
            == ['b', 'b']

assert [type(obj) for obj in s.query(B).order_by(A.id)] \
            == [B, B]

assert [obj.type for obj in s.query(A).order_by(A.id)] \
            == ['a', 'b', 'b', 'a', 'a'] 
```

# authentication - Capybara 中的身份验证问题

> ID：15112341
> 
> 赞同：0
> 
> 时间：2013-02-27T12:37:48.870
> 
> 标签：authentication, cucumber, capybara, capybara-webkit

我正在登台服务器上测试一项功能，该功能需要基本身份验证才能访问该站点。我使用以下命令运行它：

```
Capybara.app_host = "http://user:password@this.isanexample.com" 
```

在场景中的某个时刻，我访问了一个使用 https 而不是 http 的页面，并要求我再次输入用户名和密码才能继续。如果我再次使用访问会很容易，但我实际上想点击一个链接......

我怎样才能克服这个？我疯狂地用谷歌搜索，但找不到真正有效的解决方案。

我发现了这个：[http](http://theadmin.org/articles/test-http-basic-authentication-in-rails/) ://theadmin.org/articles/test-http-basic-authentication-in-rails/ ，但我不知道如何实现它。我对这一切都很陌生，所以我可能会错过显而易见的事情。

有人可以指出我正确的方向吗？

这是我的代码：

**环境.rb**

```
require 'capybara/cucumber'

Capybara.app_host = "https://user:password@this.isanexample.com"
Capybara.default_driver = :selenium
Capybara.default_wait_time = 5
Capybara.ignore_hidden_elements = true
Capybara.current_session.driver.browser.manage.window.resize_to(1024, 1000) 
```

**checkout_steps.rb（删节）**

```
Given /^I am on the main page$/ do
  visit('/')
end

When /^I navigate to the page with the available boxes$/ do
    page.find(:xpath, "//a[contains(@href,'how-it-works')]").click
    page.find(:xpath, "//a[contains(@class,'join')]").click
end

When /^I choose a monthly subscription$/ do
    page.find(:xpath, "//span[contains(@class,'title') and .[contains(., 'Unbefristetes Abo')]]").click
    page.find_button("Jetzt Bestellen").click
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T11:38:24.837

我通过摆脱网站本身的身份验证解决了这个问题。如果测试是在公司网络内运行的，验证弹出窗口将不再出现。事实证明，这在很多方面都是更好的解决方案。

# javascript - 画布中的 Onclick 侦听器

> ID：15112343
> 
> 赞同：1
> 
> 时间：2013-02-27T12:37:53.347
> 
> 标签：javascript, html

我在 javascript 的画布中添加基本的 onclick 侦听器时遇到问题，我想为其检索 (x, y) 坐标，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T13:06:21.427

试试这个..

```
document.getElementById('canvasId').addEventListener('click',function(evt){
alert(evt.clientX + ',' + evt.clientY);
},false); 
```

# sql-server - 使用用户定义的数据类型在 SQL 列中存储本地语言字符串

> ID：15112344
> 
> 赞同：2
> 
> 时间：2013-02-27T12:37:57.753
> 
> 标签：sql-server, database, sql-server-2008, type-conversion

我的表名称是`property_pair_master`. 其中一列是

`prop_value`（它`datatype`是`varchar(max)`）；

我`userdefined` `datatype`使用以下查询创建了我的

```
EXEC sp_addtype 'tinyUTF8','varbinary(8000)','NULL' 
```

现在我将其更改`datatype`为我的 tinyUTF8（我定义的`datatype`）。

问题是当我尝试使用以下查询更新其中的值时

```
update property_pair_master set prop_value =
CONVERT('મારું માહિતી પરીક્ષણ' AS tinyUTF8) where id=1 
```

将错误消息作为

```
Incorrect syntax near 'મારું માહિતી પરીક્ષણ'. 
```

如何将字符串更新为`Database`？有没有其他方法可以做到这一点。有什么建议么 ？

注意：我`SQL SERVER 2008.` 提前使用Thanks。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:41:05.403

哈哈哈……

我找到了`solution`并摆脱了`cast and convert`

将数据类型`nvarchar(MAX)`更新为。我将查询更新为

```
update property_pair_master set prop_value = N'વ્યાવહારિક' where id=1 
```

# performance - 任何找到断开链接的离线工具都可以通过登录页面吗？

> ID：15112348
> 
> 赞同：0
> 
> 时间：2013-02-27T12:38:18.540
> 
> 标签：performance, web-applications, performance-testing, broken-links, xenu

我们的团队已经完成了 Web 应用程序的开发阶段
我想检查整个页面是否有损坏的链接
我尝试使用很多工具，例如**Xenu**工具和**LinkChecker**工具
但
它*无法*在登录下导航页面page
并且只检查主页
因为需要 **身份验证**

如果有办法将身份验证参数（“用户名”和“密码”）传递给工具
，使其能够在登录页面下导航页面并检查它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:44:49.303

编辑您的登录模块，以便您可以在 url 中传递用户名和密码。然后从以下内容启动该工具：`http://yourwebsite.com/login?username=...&password=...`. 然后，您可以将工作留给工具和您的 web 应用程序，假设您的工具正确管理 cookie（Xenu 有一个选项。）

在阅读了 Xenu 常见问题解答中的 cookie 部分后，我意识到它可以访问 IE 的 cookie，所以...您可以尝试登录 IE，然后（在浏览器仍在运行时）运行 Xenu，启用其 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-22T20:41:12.760

到目前为止，我发现的唯一企业级解决方案是 IBM Rational Policy tester。它不仅仅检查损坏的链接，而且做得很好（拼写检查、语法、正则表达式、搜索引擎优化、508 可访问性……）。该工具的配置很痛苦，UI 也令人难以置信的过时......话虽如此，身份验证不是问题，一旦配置，它就像老板一样工作。 [https://www.ibm.com/support/knowledgecenter/en/SSAUB3_8.5.0/com.ibm.pt.help.doc/helpindex_pt.html](https://www.ibm.com/support/knowledgecenter/en/SSAUB3_8.5.0/com.ibm.pt.help.doc/helpindex_pt.html)

# xml - 谷歌应用脚 本正则表达式

> ID：15112349
> 
> 赞同：0
> 
> 时间：2013-02-27T12:38:20.887
> 
> 标签：xml, regex, google-apps-script

我在 Google 应用脚本中使用以下代码来提取数字。

```
function getBTC_ZAR_ExchangeRate() {
  var response = UrlFetchApp.fetch("http://coinmill.com/rss/BTC_ZAR.xml")
  var xmlText = response.getContentText();
  //var funded = Xml.parse(htmlText, true);
  var rate = xmlText.match(/BTC =\s(.*?)\sZAR<br/);    
  return rate[1];
} 
```

结果，我得到了一个包含两个项目的数组。只有数组中的第二项是正确的。

```
result = {"BTC = 27.45 ZAR<br", "27.45"} 
```

我做错了什么，因为这不可能是它应该工作的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:32:04.093

这是预期的行为。[请参阅 MDN 上的第一个示例](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)。从 match 返回的值是 1\. 您匹配的模式（您告诉它匹配整个事物，所以它做到了；2\. 后跟该模式匹配的值（在您的情况下为 27.45）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-13T04:46:40.110

正如 Phil Bozak 回答的那样，这就是 match 的工作原理。但这是一个 JavaScript 函数，与 Google Apps Script 没有任何关系。

# c++ - 算术和赋值运算符重载 - 返回值、范围、组合表达式

> ID：15112350
> 
> 赞同：0
> 
> 时间：2013-02-27T12:38:21.897
> 
> 标签：c++, class, operator-overloading

我到目前为止的代码：

```
#include <iostream>
#include <vector>

using namespace std;

class Dictionary
{
private:
    string dictName;
    struct wordCard
    {
        string word;
        string translation;
    };
    vector<wordCard> Dict;
    bool foundit = false;
public:
    // My attemtp at swap function for copy-and-swap:
    void swap(Dictionary& dict1, Dictionary& dict2)
    {
        Dictionary dict3("tmp");
        dict3.dictName = dict1.dictName;
        dict3.Dict = dict1.Dict;
        dict1.dictName = dict2.dictName;
        dict1.Dict = dict2.Dict;
        dict2.dictName = dict3.dictName;
        dict2.Dict = dict3.Dict;
    }
    // Very basic constructor (setting the dictionary name while creating an object was part of the assignment):
    Dictionary(string name)
    {
        setDictName(name);
    }

    /* various functions that work fine */

    // Overloading "+" operator:
    // The result is supposed to be a new dictionary (without changing the source) where all words from the
    // original dictionaries are present without doubles.
    Dictionary& operator+ (const Dictionary& dict)
    {
        bool doubleword = false;
        string plusname;
        plusname = "Augmenting " + this->dictName + " & " + dict.dictName;
        Dictionary plusDict(plusname);
        plusDict.Dict = this->Dict;
        for (int i = 0; i < dict.Dict.size(); i++)
        {
            doubleword = false;
            for (int i2 = 0; i2 < plusDict.Dict.size(); i2++)
            {
                if (plusDict.Dict[i2].word == dict.Dict[i].word)
                {
                    doubleword = true;
                }
            }
            if (!doubleword)
            {
                plusDict.Dict.push_back(dict.Dict[i]);
            }
        }
        return *this;
    }

    /* 2 other overloads that are very similar */

    // Overloading "=" operator (using copy-and-swap):
    // Not part of the assignment, but I couldn't think of another way to make the other operators work.
    Dictionary& operator=(Dictionary dict)
    {
        swap(*this, dict);
        return *this;
    }
}; 
```

我遇到的问题是：

理想情况下，它应该像这样工作：

```
Obj1 = result of operation Obj2 + Obj3; 
```

我现在得到的是：

```
Obj1 = Obj2 (ignores Obj3) 
```

我有一个模糊的想法为什么会发生（或者，实际上，有两个想法）。首先，`operator+`返回`*this`，而不是实际结果。但是当我试图将它更改为临时类对象时，编译器开始对我尖叫。其次，我知道我使用的是局部变量（临时类对象），但我不知道如何将其公开，以便以后使用。当我尝试将类对象添加到`public:`部分（或`private:`）时，编译器将其视为函数声明，而不是类对象。

那么，我怎样才能让我的临时类对象公开，或者返回结果`a+b`而不是`*this`，或者`operator=`捕获结果或者`operator+`而不是它返回的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:40:34.867

`operator +`应该按值返回一个新对象并且是 const - 即类似于

```
Dictionary operator+ (const Dictionary& dict) const
{
    Dictionary ret;
    //modify ret
    return ret;
} 
```

# c++ - c++ 对象模型的缺点。解决办法是什么？

> ID：15112357
> 
> 赞同：-1
> 
> 时间：2013-02-27T12:38:41.397
> 
> 标签：c++

我在 C++ 的学习阶段。在阅读 c++ 对象模型时，我了解了不同的对象模型。

1) 简单对象模型。

2) 表驱动对象模型。

3) c++ 对象模型。

**问题：**

"*它的主要缺点是需要重新编译未修改的代码，这些代码利用已添加、删除或修改非静态类数据成员的类的对象。* "

我理解了上面的说法。类定义中发生的任何更改，都需要重新编译使用相同类的源代码。

这意味着，有一些为什么在不重新编译的情况下也能达到同样的效果。怎么做？如果有人提供示例代码，那就太好了。我在 Linux/Ubuntu 中使用 g++。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T12:42:02.170

在修改类时防止重新编译的典型习惯用法是 PImpl。

[http://en.wikipedia.org/wiki/Opaque_pointer#C.2B.2B](http://en.wikipedia.org/wiki/Opaque_pointer#C.2B.2B)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:54:48.833

在其他语言/对象模型中可能有实现相同的方法，但在 C++ 中没有。否则，这不会是 C++ 对象模型的缺点。

然而，可以减轻后果，例如，通过 (1) 从库中仅导出接口，也就是纯抽象类，以及 (2) 从不更改已发布的接口。如果必须添加新的 API，请通过新接口将其导出（即使它引用旧的/修改的实现类）。

我不确定代码示例会有多大帮助。这不是一种编码技术。如果您知道什么是纯抽象类，那么您就大功告成了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T14:17:12.577

请注意，在标头中公开实现细节可能有好处，也有在细节更改时强制重新编译的缺点；函数可以更容易地内联，这可以提高运行时性能。您将需要决定在何时何地进行这种权衡是值得的。

通过引入额外的间接级别，可以将所有私有实现细节隐藏在源文件中。一种常见的方法是指向私有实现（或“pimpl”）的指针，例如：

```
// Header file
class Thing {
public:
    Thing(...);
    ~Thing();

    // Public interface

private:
    struct Impl;
    std::unique_ptr<Impl> impl;
};

// Source file
struct Thing::Impl {
    // private details
};

Thing(...) : impl(new Impl(...)) {}
~Thing() {}

// Implementation of public interface 
```

另一种可能性是定义一个抽象接口，使用一个或多个工厂来创建包含实现的具体实例，例如：

```
// Header file
class Thing {
public:
    virtual ~Thing() {}

    static std::unique_ptr<Thing> make(...);

    // Pure virtual public interface
};

// Source file
class ThingImpl : public Thing {
    // Implementation of public interface

    // Private implementation details
};

std::unique_ptr<Thing> Thing::make(...) {
    return std::unique_ptr<Thing>(new ThingImpl(...));
} 
```

这两种方法都将所有实现细节放在一个源文件中，因此当细节发生变化时，这是唯一需要重新编译的东西。但是两者都引入了额外的指针间接和/或间接函数调用，这可能会影响运行时性能。

# vb.net - 处理来自大型按钮网格的点击事件？

> ID：15112359
> 
> 赞同：0
> 
> 时间：2013-02-27T12:38:47.073
> 
> 标签：vb.net

好的，所以我在一个表单上有多个按钮，我希望一个标签根据单击的按钮显示一个特定的数字。例如，如果单击第一行中的任何按钮，则标签将显示 10。如果单击第二行中的任何按钮，则标签将显示 17，等等。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:45:30.607

您可以使用`Handles`关键字来处理来自多个对象的多个事件，使用一种`Sub`方法，例如：

```
Private Sub Row1ButtonHandler(ByRef obj As Object, ByRef ea As EventArgs) _
    Handles Button1.Click, Button2.Click, Button3.Click
    Label1.Text = "1"
End Sub

Private Sub Row2ButtonHandler(ByRef obj As Object, ByRef ea As EventArgs) _
    Handles Button4.Click, Button5.Click, Button6.Click
    Label1.Text = "17"
End Sub 
```

如您所见，现在，只要单击其行中的任何按钮，就会调用每个处理程序方法。

`AddHandler`但是，使用和`RemoveHandler`函数以编程方式设置事件处理程序可能更容易：

```
For c As Int32 = 0 to 10
    Dim btn As Control = Page.FindControl("Button" & c)
    AddHandler btn.Click, AddressOf MyEventHandler
Next c 
```

请注意，我在`Control`这里使用了泛型并假设您正在查看网页，但您可以通过使用 LinkBut​​ton 控件来更具体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:50:46.587

您可以对所有按钮使用句柄并获取发送者值中的按钮，然后添加您的逻辑。可能对你有帮助...

# javascript - Javascript 滑块在本地不起作用？

> ID：15112361
> 
> 赞同：0
> 
> 时间：2013-02-27T12:38:52.723
> 
> 标签：javascript, html

好吧，我在 stackoverflow 上找到了一小段代码，用于使用 javascript 的幻灯片。但由于某种原因，它在我的电脑上不起作用。这是原始帖子： [寻找全角滑块](https://stackoverflow.com/questions/8803823/looking-for-a-fullwidth-slider)

它在那里工作，但由于某种原因它对我不起作用！

我究竟做错了什么？

这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style type="text/css">
<!--
.clear { clear:both; }
.wrapper { width:980px; margin:0 auto; }
.slider { margin:20px 0; height:100px; position:relative;  }
.slider .slide { display:none; background:red; position:absolute; height:100px; width:100%; text-align:center; color:#fff; font-size:24pt; }
.header { background:#eee; font-size:18pt; }
.content { }
.footer { background:#eee; text-align:center; }

.slider-nav { margin: 0 auto; width:100px; clear:both; } 
.slider-nav li { float:left; margin:0 5px; }
-->
</style>
<script type="text/javascript">
$('.slider .slide:first').addClass('active').fadeIn(200);

function rotate(index) {
     $('.slider .slide.active').removeClass('active').fadeOut(200, function() { 
         $('.slider .slide:eq(' + index + ')').addClass('active').fadeIn(200);
     });   
}

$('.slider-nav li a').click(function() {    
    var index = $(this).parent().index('li');
    rotate(index);
    return false;
});

setInterval(function() {
    var $next = $('.slider .slide.active').next();

    if ($next.length == 0)
        $next = $('.slider .slide:first');

    rotate($next.index());
}, 2000);
</script>
</head>

<body>
<div class="header wrapper">
    <h1>Site header</h1>
</div>
<div class="slider">
    <div class="slide">1</div>
    <div class="slide">2</div>
    <div class="slide">3</div>
    <div class="slide">4</div>
</div>
<ul class="slider-nav">
    <li><a href="#" >1</a></li>
    <li><a href="#" >2</a></li>
    <li><a href="#" >3</a></li>
    <li><a href="#" >4</a></li>
</ul>
<div class="clear"></div>
<div class="content">
    <div class="wrapper">
        <p>Some site content will be here</p>
        <p>Some site content will be here</p>
        <p>Some site content will be here</p>
        <p>Some site content will be here</p>
        <p>Some site content will be here</p>
    </div>
</div>
<div class="footer">
    <div class="wrapper">&copy; www.mysite.com    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:43:39.033

您似乎在代码中引用了一个 javascript 库（可能是 jquery），但没有包含库的痕迹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:15:39.040

您正在使用 jQuery 代码，但您对 jQuery 库的引用在哪里？

# android - 改变方向时如何避免强制关闭

> ID：15112366
> 
> 赞同：0
> 
> 时间：2013-02-27T12:39:11.210
> 
> 标签：android, networking, screen-orientation, operation

我的应用需要从服务器获取数据。因此，我在方法中显示**ProgressDialog**`onPreExecute()` ，并在该`doInBackground()`方法中从服务器加载数据。

此时如果我改变方向，应用程序强制关闭。因为当前活动已被销毁，并且`doInBackground()`可能仍会引用旧活动。所以，我参考了[这篇](https://stackoverflow.com/questions/1111980/how-to-handle-screen-orientation-change-when-progress-dialog-and-background-thre/2418763#2418763)讨论同样问题的帖子。但我不想使用`android:configchanges`，因为它不是首选。[androiddevelopersite](http://developer.android.com/guide/topics/resources/runtime-changes.html#HandlingTheChange)说这应该是最后的手段，而不是大多数应用程序的首选。

那么，有人可以就如何以我的应用程序不会强制关闭的方式处理这种情况提出必要的代码片段吗？

**Eidt：我的代码**

```
 public class DataListActivity extends BaseActivity {

        private ArrayList<String> valueslist;

        public void onCreate(Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.listlayout);
                     new LoadAsync().execute();

        }

         class LoadAsync extends AsyncTask<String, String, String> {

                /**
                 * Before starting background thread Show Progress Dialog
                 * */
                @Override
                protected void onPreExecute() {
                    super.onPreExecute();
                    progressDialog = new ProgressDialog(DataListActivity.this);
                    progressDialog.setMessage("Loading...");
                    progressDialog.setIndeterminate(false);
                    progressDialog.setCancelable(false);
                    progressDialog.show();
                }

                /**
                 * getting All datafrom url
                 * */
                protected String doInBackground(String... args) {

                    //Here I am doing httppost request.
                           try{ 
                            // looping through All data that I got from the server
                            for (int i = 0; i < subCategoriesJson.length(); i++) {
                                JSONObject jsonobj = subCategoriesJson.getJSONObject(i);

                                // Storing each json item in variable
                                String item = jsonobj.getString("data");

                                valueslist.add(item);

                            }
                            return "1";
                        }                    
                        else {

                            return null;
                        }
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }   
                    return null;
                }

   protected void onPostExecute(String msg) {

                    if( msg != null && msg.equals("1"))
                    {

                     progressDialog.dismiss();

                     runOnUiThread(new Runnable() {

                         public void run() {
                             //Updating parsed json data to Listview

                            ListView listView = (ListView)findViewById(R.id.list1);

            ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(getApplicationContext(),R.layout.list_item, valueslist);
                                listView.setAdapter(arrayAdapter); 

          listView.setOnItemClickListener(new OnItemClickListener() {

            @Override
                            public void onItemClick(AdapterView<?> parent, View view,
                                            int position, long id) {

                                 String selectedthing = valueslist.get(position);

                                    }
                                }); 

                         }
                     });
                }else 
                {
                          //There is no data.
                }

                }

         }

    } 
```

**注意：**我正在提供此信息，尽管此问题不是必需的。我的活动有两个布局文件。一个用于**纵向**，另一个用于文件夹中的**横向**模式。`layout-land`

**下面是 logcat 窗口：**

```
02-27 19:54:40.294: E/WindowManager(11710): Activity com.example.DataList has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40555388 that was originally added here
02-27 19:54:40.294: E/WindowManager(11710): android.view.WindowLeaked: Activity com.example.prog.DataList has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40555388 that was originally added here
02-27 19:54:40.294: E/WindowManager(11710):     at android.view.ViewRoot.<init>(ViewRoot.java:277)
02-27 19:54:40.294: E/WindowManager(11710):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
02-27 19:54:40.294: E/WindowManager(11710):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
02-27 19:54:40.294: E/WindowManager(11710):     at android.view.Window$LocalWindowManager.addView(Window.java:433)
02-27 19:54:40.294: E/WindowManager(11710):     at android.app.Dialog.show(Dialog.java:265)
02-27 19:54:40.294: E/WindowManager(11710):     at com.example.prog.DataList$LoadAsync.onPreExecute(DataList.java:77)
02-27 19:54:40.294: E/WindowManager(11710):     at android.os.AsyncTask.execute(AsyncTask.java:391)
02-27 19:54:40.294: E/WindowManager(11710):     at com.example.prog.DataList.onCreate(DataList.java:52)
02-27 19:54:40.294: E/WindowManager(11710):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
02-27 19:54:40.294: E/WindowManager(11710):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1794)
02-27 19:54:40.294: E/WindowManager(11710):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1851)
02-27 19:54:40.294: E/WindowManager(11710):     at android.app.ActivityThread.access$1500(ActivityThread.java:132)
02-27 19:54:40.294: E/WindowManager(11710):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
02-27 19:54:40.294: E/WindowManager(11710):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-27 19:54:40.294: E/WindowManager(11710):     at android.os.Looper.loop(Looper.java:150)
02-27 19:54:40.294: E/WindowManager(11710):     at android.app.ActivityThread.main(ActivityThread.java:4277)
02-27 19:54:40.294: E/WindowManager(11710):     at java.lang.reflect.Method.invokeNative(Native Method)
02-27 19:54:40.294: E/WindowManager(11710):     at java.lang.reflect.Method.invoke(Method.java:507)
02-27 19:54:40.294: E/WindowManager(11710):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-27 19:54:40.294: E/WindowManager(11710):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-27 19:54:40.294: E/WindowManager(11710):     at dalvik.system.NativeStart.main(Native Method)
02-27 19:54:40.294: E/ResourceType(11710): Style contains key with bad entry: 0x010102f3
02-27 19:54:40.294: E/ResourceType(11710): Style contains key with bad entry: 0x01010300
02-27 19:54:40.294: E/ResourceType(11710): Style contains key with bad entry: 0x0101039c 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:11:32.743

您必须在 中关闭您的对话框`onPause()`，如果需要，在 中再次显示它`onResume()`。

您可能希望保留有关 Activity 实例之间的对话的一些状态，`onRetainNonConfigurationInstance()`并从传递给 的 Bundle 中检索它`onCreate()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:54:07.757

您可以在等待来自服务器的数据时禁用方向更改。您可以暂时设置您的方向肖像：

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

有关更多、清晰的解释，请访问：[如何在 Android 上禁用方向更改？](https://stackoverflow.com/questions/1512045/how-to-disable-orientation-change-in-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-10T09:16:25.977

这与西蒙给你的答案相同，但有一个代码示例。必须检查进度是否完成，否则进度条会显示卡在 100%。

```
@Override
public void onPause() {
    super.onPause();  // Always call the superclass method first

    proDialog.dismiss();
}

@Override
public void onResume(){
    super.onResume();

    proDialog.show();
} 
```

# php - 如何从 XML 读取所有产品

> ID：15112367
> 
> 赞同：0
> 
> 时间：2013-02-27T12:39:14.077
> 
> 标签：php, mysql, xml

我的 XML 文件中有很多类别。我如何阅读其中的所有产品？

它只读取第一类。我包括了 xml 文件供您查看。这是我正在使用的 PHP 代码：

```
 //get products from xml file
  foreach($xml->CREATED->CATEGORY as $product){

  $atts = $product->PRODUCT->attributes();
  $productitemid = $atts['ITEM'];

  $title   = $product->MODEL;
  $rrp   = $product->RRP;
  $productsdescription   = $product->DESCRIPTION;
  $prodname   = $product->NAME;
   echo  $productitemid.' - ' ;
  // echo $product->id.' - ';
  mysql_query("INSERT INTO products (products_id,products_model,products_price,products_status) VALUES ('$productitemid','$title','$rrp','1')");
  mysql_query("INSERT INTO products_description (products_id,products_name,products_description) VALUES ('$productitemid','$prodname','$productsdescription')");
} 
```

这是 XML 结构：

```
 <?xml version="1.0" encoding="iso-8859-1"?>
 <STOREITEMS>
 <CREATED value="Fri Feb 22 1:01:02 GMT 2013">
  <CATEGORY id="441" name=" > test1">
  <PRODUCT ITEM="12796">
   <NAME>test1</NAME>
   <MODEL>bb2018</MODEL>
  <PRICE>2.28</PRICE>
   <RRP>3.99</RRP>
   <THUMB>bb2018s.jpg</THUMB>
    <IMAGE>bb2018.jpg</IMAGE>
     <DESCRIPTION>
       test1
      </DESCRIPTION>
      <POWER/>
      <SIZE/>
      <ATTRIBUTES NAME="Size" ATTRIBUTEID="2">
        <ATTRIBUTEVALUES VALUE="16" TITLE="Small" PRICEADJUST="0.00"/>
         <ATTRIBUTEVALUES VALUE="17" TITLE="Medium" PRICEADJUST="0.00"/>
          <ATTRIBUTEVALUES VALUE="18" TITLE="Large" PRICEADJUST="0.00"/>
          </ATTRIBUTES>
         </PRODUCT>
    <CATEGORY id="442" name=" > test2">
     <PRODUCT ITEM="12805">
    <NAME>test2</NAME>
     <MODEL>bb2034</MODEL>
     <PRICE>0.58</PRICE>
     <RRP>1.50</RRP>
      <THUMB>bb2034s.jpg</THUMB>
      <IMAGE>bb2034.jpg</IMAGE>
      <DESCRIPTION>
        test2
       </DESCRIPTION>
       <POWER/>
      <SIZE/>
        </PRODUCT>
        <CATEGORY id="4423" name=" > test3">
        <PRODUCT ITEM="13719">
         <NAME>test3?</NAME>
         <MODEL>BCPG02</MODEL>
         <PRICE>2.83</PRICE>
         <RRP>4.95</RRP>
       <THUMB>bcg02s.jpg</THUMB>
   <IMAGE>bcpg02.jpg</IMAGE>
     <DESCRIPTION>
     test3
    </DESCRIPTION>
    </PRODUCT>
     </CATEGORY>
     </CREATED>
     </STOREITEMS> 
```

我已经这样做了，它可以工作。我如何从类别中获取产品然后转到下一个类别并获取数据库需要的下一个产品序列

```
 //i have done it like this it works

 $doc = new DOMDocument();
 $var = $doc->load('shop.xml');

 $root = $doc->documentElement;   //root node
  $items = $doc->getElementsByTagName('PRODUCT');
  $cat = $doc->getElementsByTagName('CATEGORY');

  foreach ($cat as $cats){
  foreach ($items as $bar)

    if ($categoriesid == $b)

$productsid = $bar->getAttribute('ITEM');
$modelcode = $bar->getElementsByTagName('MODEL')->item(0)->nodeValue;
      $rrp = $bar->getElementsByTagName('RRP')->item(0)->nodeValue;
      $productsdescription = $bar->getElementsByTagName('DESCRIPTION')->item(0)->nodeValue;
      $prodname = $bar->getElementsByTagName('NAME')->item(0)->nodeValue;

     $categoriesid = $cats->getAttribute('id');
      $categoriesname = $cats->getAttribute('name');

      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:21:38.213

您可以尝试像这样使用 DOMDocument：

```
$doc = new DOMDocument();
$var = $doc->load('yourxml.xml');

$root = $doc->documentElement;   //root node
$items = $doc->getElementsByTagName('product');

foreach ($items as $bar)
{
    $name = $bar->getElementsByTagName('name')->item(0)->nodeValue;
    $model = $bar->getElementsByTagName('model')->item(0)->nodeValue;
    $price = ....
    //do something with the values
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:07:05.153

请查看下面的示例代码，希望对您有所帮助。

```
<?php
  $xmlString= '<xml Version="1.0">
  <created>
 <category>
   <product id="a"/>
 </category>
 <category>
   <product id="b"/>
 </category>
 <category>
   <product id="c"/>
 </category>
 <category>
   <product id="d"/>
 </category>
 </created>
 </xml>';

$xml = new SimpleXMLElement($xmlString);

foreach ($xml->created->category as $element)
{
  foreach($element as $val)
  {
        echo " product : ".$val->attributes();
  }
}

?> 
```

此代码的输出将读取所有产品属性

```
product : a product : b product : c product : d 
```

# asp.net-mvc-4 - jqGrid 寻呼机只返回第一页

> ID：15112374
> 
> 赞同：2
> 
> 时间：2013-02-27T12:39:41.600
> 
> 标签：asp.net-mvc-4, jqgrid

我想要客户端分页。

但是由于某种原因，我似乎只回到了第一页？即使我知道我有两页的数据（即……我单步执行我的代码，而且我肯定有两个……）……更令人困惑的是，我浏览页面的链接似乎从来没有是正确的...例如，我希望以下屏幕显示 1 of 2...

![分页问题](../Images/21303ef60a8a2d2754ff31d6429c8298.png)

另外我希望右下角会说 View 1-15 of 21？我的感觉是我在我的数据层中做错了给这个寻呼机它的信息。所以它只返回第一页。

```
 public static string JsonifyEnc(IEnumerable<TemplateModel> model, int popId, int page, int rows) {
        TemplateModel variable = model.ToArray()[0];
        ArrayList al = new ArrayList();
        //foreach (PatientACOModel patMod in variable.Template) {
        int i = 1;
        int rowstart = (page * rows + 1) - rows;
        int rowend = page * rows;
        //Here is where I create the rows... nothing special here
        var griddata = new {
            total = variable.Template.Count % rows > 0 ? (variable.Template.Count / rows) + 1 : (variable.Template.Count / rows),
            page = page,
            records = al.Count,
            rows = al.ToArray()
        }; 
```

当我快速计算总变量时，它说两个？这将是我返回的 json 字符串的第一部分......

```
{"total":2,"page":1,"records":15,"rows": 
```

所以它就在那里。此外，这就是我构建 jqGrid 的方式......

```
 $(document).ready(function () {
        jQuery("#frTable").jqGrid ({
            cmTemplate: { sortable: false },
            caption: '@TempData["POPNAME"]' + ' Population',
            datatype: 'json',
            mtype: 'GET',
            url: '/Encounters/GetAjaxPagedGridData/', //'Url.Action("GetAjaxPagedGridData", "Encounters", new { popId = TempData["POPULATIONID"] })',//  
            postData: { popId: '@TempData["POPULATIONID"]'},
            pager: '#pager',
            jsonReader: {repeatitems: false},
            loadonce: true,
            height: 'auto',
            gridview: true,
            viewrecords: true,
            rowNum: 15,
            shrinkToFit: false,
            autowidth: true, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T12:49:49.557

如果您`loadonce: true`在客户端使用，您应该更改服务器代码，以便它忽略`page`和 `rows`选项并返回**所有数据**。您应该只对数据对应`sidx`和`sord`参数进行排序（参见jqGrid 中的`sortname`和）。`sortorder`您不需要在响应中填写`total`,`page`和部分。`records`

如果您使用`loadonce: true`jqGrid 加载数据并将其保存在内部`data`和`_index`参数中。之后 jqGrid 将 jqGrid`datatype`的选项更改为`"local"`. 因此，以后所有的数据排序、过滤（搜索）和分页都将在本地完成。

# c++ - 在 C++ 中读取文件名的一部分

> ID：15112376
> 
> 赞同：-1
> 
> 时间：2013-02-27T12:39:45.080
> 
> 标签：c++, file, filenames

我们可以在 C++ 中读取 FileName 的一部分吗？例如，我有两个名为 howdoyoudo1.cpp 和 howdoyoudo2.cpp 的文件，我需要一个 C++ 代码先读取文件名 xxxxxxxxdo1.cpp，然后再读取 xxxxxxxxdo2.cpp，即使它们显示在基于 DateTime 或名称修改的 dir 中或无论如何。程序执行时首先必须读取文件 xxxxxxxxdo1.cpp，然后读取 xxxxxxxxdo2.cpp 等等，如果有 xxxxxxxxdoNth.cpp 的......

指导一下，先谢谢了...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:49:46.837

1.  您需要枚举目标目录上的所有文件，并在此过程中执行以下操作：
2.  将文件名复制到某个缓冲区中，比如 BuffSrc。
3.  在 BuffSrc 中搜索字符串“do”。

如果你也想搜索 num，你必须编写一个 for 循环并将“do%d.cpp”保存到某个缓冲区，然后再搜索文件名缓冲区中的字符串，即 BuffSrc。

当 do1.cpp 找到时，增加计数器并再次将 search_string 保存到缓冲区，直到您枚举目录上的所有文件。

# c# - 如何防止 WP8 Panorama Control 暂时滑动？

> ID：15112379
> 
> 赞同：2
> 
> 时间：2013-02-27T12:40:09.197
> 
> 标签：c#, slider, windows-phone-8, panorama-control

使用 WP7 SDK 可以使用 BlocksPan 来防止 Panorama 控件滑动，例如，如果您在其上使用水平 Slider 控件。这不再适用于 WP8 sdk。微软在指南中说：只是不要在全景图上使用滑块。但是我们的应用程序（以前为 wp7 设计）确实需要它。

有没有其他方法可以防止全景滑动？如果我们不顾指导方针去做，我们的应用程序会不会通过商店验证？

请帮忙 ;）

最好的问候，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:49:38.613

其实很简单你应该订阅`ManipulationStarted`全景控件的事件

```
 m_Panorama.ManipulationStarted += m_Panorama_ManipulationStarted;

    void m_Panorama_ManipulationStarted(object sender, System.Windows.Input.ManipulationStartedEventArgs e)
    {
        m_Panorama.IsHitTestVisible = false;           
    } 
```

也许你需要一个布尔变量

# perl - 如何在 Perl 中使用系统调用而不打印结果/输出文本？

> ID：15112382
> 
> 赞同：0
> 
> 时间：2013-02-27T12:40:23.110
> 
> 标签：perl, system

我在 Windows XP 上使用 Cygwin Perl。

我有这段代码可以运行第三方程序。

```
sub main {
    print("Start Running\n");
    @return = run_exe($execApp, $parm1, $parm2);
    my $returncode = pop @return;
    if ($returncode == 0) {
        print("Success\n");
    }
    else {
        print("Error\n");
    }
}

sub run_exe {
    my ($exe, @parm) = @_;
    my (@output, @return_output);

    @output = system($exe, @parm);

    foreach (@output) {
        next if !/\S/;       # white space line
        s/^(\s*)//g;         # trim from the front for $_
        s/(\s*)$//g;         # trim from the end for $_
        push (@return_output, $_);
    }

    push (@return_output, $?>>8);
    @output = ();

    return (@return_output);
} 
```

如果成功，这将打印：

```
Start Running
Return Code: 0
Success 
```

我想要的不是打印运行 run_exe 子例程的输出（即返回代码：0）：

```
Start Running
Success 
```

我怎么能做到这一点？请帮帮我，我在 Google 中搜索过，但我一无所获。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T12:51:57.150

你`system`在你的程序中使用过，它让你正在运行的程序打印到 STDOUT 并返回程序的退出状态（一个数字）。

因此，您目前拥有的内容毫无意义，因为`@output`它只包含一个数字，您无法将其解析为您正在运行的程序的输出。

你可能需要的是反引号

```
`$exe @parm` 
```

或者，更清楚地说，

```
qx{$exe @parm} 
```

正如您所期望的那样，它将*返回程序的输出，并避免将其打印到 STDOUT。*

请注意，您可能需要注意 and 的内容`$exe`，`@parm`因为生成的字符串必须在命令行中有效，并且字段可能需要适当地引用或转义。

**更新**

再次查看您的代码，似乎您*可能*期望`system`. 但是把它变成一个数组，遍历数组，提取非空白元素是*非常*复杂的！`$?`结果与您添加到返回数组中的值相同。

要转移程序的输出，您需要从命令外壳而不是直接运行它，因此要将输出发送到 Windows nul 设备，您的代码看起来像

```
system('cmd /C', $exe, @parm, '>nul');
return $? >> 8; 
```

实际上，您不妨放弃子程序并更改行

```
@return = run_exe($execApp,$parm1,$parm2);
my $returncode = pop @return; 
```

至

```
system('cmd /C', $execApp, $parm1, $parm2, '>nul');
my $returncode = $? >> 8; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-24T02:14:18.563

我今天刚刚遇到了同样的问题，并记得我在很多很多脑细胞之前就找到了解决方案（大约 4 年前的脑细胞价值）。在搜索了我的旧代码之后，我找到了解决方案。这里是。只需将您的系统调用放在反引号内，并附加“2>&1”。这是一个例子。

我的 $results= `nslookup -type=ns stackoverflow.com 2>&1`;

系统调用的结果分配给 $results，而不是打印出来。我不记得确切的原因或方式，但确实如此。

这对我很重要，因为我经常在我的 PERL 编辑器中运行脚本，如果我允许大量打印（即，如果上述命令重复数千次），它将使用大量系统内存，并且最终所有的系统内存。

我知道这是一个老话题，但希望它对下一个像今晚一样疯狂地在谷歌上搜索问题的解决方案的可怜、不幸的灵魂很有价值。

# jsf - 如何将验证器传递给 JSF 2 中嵌套（！）复合组件中的输入文本

> ID：15112386
> 
> 赞同：1
> 
> 时间：2013-02-27T12:40:28.273
> 
> 标签：jsf, nested, validation, custom-component

我在嵌套复合组件和将验证器传递给嵌套组件中的 inputtext 时遇到以下问题：

包装器自定义组件（**wrapper.xhtml**）：

```
<cc:interface>
    <cc:attribute name="value" required="false" />
</cc:interface>

<cc:implementation>
    <h:panelGroup>
        <h:outputLabel value="TEST:"/>
        <temptest:input value="#{cc.attrs.value}">
            <cc:insertChildren/>
        </temptest:input>
    </h:panelGroup>
</cc:implementation> 
```

嵌套的自定义组件（**input.xhtml**）：

```
<cc:interface>
    <cc:attribute name="value" required="false" />
    <cc:editableValueHolder name="input" targets="input" />
</cc:interface>

<cc:implementation>
    <h:inputText value="#{cc.attrs.value}" id="input" >
        <cc:insertChildren/>
    </h:inputText>
</cc:implementation> 
```

将验证器传递给嵌套自定义组件（**pageXYZ.xhtml**）的试验：

```
<h:form>
...
    <temptest:wrapper value="#{bean.value}">
        <f:validateRequired for="input"/>
    </temptest:wrapper>
    <!-- this works:
    <temptest:input value="#{bean.value}"> 
        <f:validateRequired for="input"/>
    </temptest:input> -->
    <h:message for="input"/>
...
</h:form> 
```

有没有办法将（一个或多个）验证器传递给嵌套的自定义组件？

# c# - 无法分配 ByteArray (400-500kb) - OutOfMemoryException

> ID：15112387
> 
> 赞同：0
> 
> 时间：2013-02-27T12:40:28.713
> 
> 标签：c#, memory, out-of-memory

我有一个 C# 应用程序，它在尝试分配 ByteArray（不是很大，通常是 ~400-500kb）时偶尔会抛出 OutOfMemoryException。与多个 WCF 服务通信，但是我不确定这是否会导致问题。我们边走边打印内存使用情况，但没有什么明显的错误。该应用程序资源繁重，其内存使用率很高，但没有高到我们得到 OOE 的程度。

CLR 有问题是否存在限制？你知道为什么我们会看到这个异常吗？可能是由于 WCF 配置造成的吗？（例如 maxBuffer 属性等）

```
2013-02-27 12:01:38,489 [54] INFO  - Counters: CPU: 215, Gen0: 6291456, Gen1: 482488, Gen2: 8.201334E+08, LOH: 4.410252E+08, .Net: Private Bytes: 1423708160, Paged: 1424003072,
2013-02-27 12:01:43,504 [34] INFO  - Counters: CPU: 291.2773, Gen0: 4194300, Gen1: 1232084, Gen2: 8.494915E+08, LOH: 4.579806E+08, .Net: Private Bytes: 1469743104, Paged: 1470038016,
2013-02-27 12:01:48,520 [55] INFO  - Counters: CPU: 285.6698, Gen0: 6291456, Gen1: 662016, Gen2: 8.767135E+08, LOH: 4.999192E+08, .Net: Private Bytes: 1538347008, Paged: 1538641920, 
2013-02-27 12:01:53,536 [55] INFO  - Counters: CPU: 218.3801, Gen0: 6020000, Gen1: 296772, Gen2: 8.874388E+08, LOH: 5.055583E+08, .Net: Private Bytes: 1556791296, Paged: 1557082112, 
System.InsufficientMemoryException: Failed to allocate a managed memory buffer of 459955 bytes. The amount of available memory may be low. ---> System.OutOfMemoryException: Exception of type 'System.OutOfMemoryException' was thrown.
   at System.ServiceModel.Diagnostics.Utility.AllocateByteArray(Int32 size)
   --- End of inner exception stack trace --- 
```

# csv - Tshark - 将数据包信息从 pcap 导出到 cvs

> ID：15112389
> 
> 赞同：2
> 
> 时间：2013-02-27T12:40:32.933
> 
> 标签：csv, wireshark, pcap, tshark

我正在尝试通过使用以编程方式捕获数据包流`Tshark`。我正在使用的简化终端命令是：

```
tshark -i 2 -w output.pcap 
```

这非常简单，但是我需要获取一个`.csv`文件以便轻松分析捕获的信息。通过`.pcap`在 Wireshark 中打开文件并将其导出为 .csv，我得到的是一个结构如下的文件：

```
"No.","Time","Source","Destination","Protocol","Length","Info" 
```

但是，再次，我需要以自动方式执行此操作。所以我尝试使用命令：

```
tshark -r output.pcap -T fields -e frame.number -e ip.src -e ip.dst -e frame.len -e frame.time -e frame.time_relative -E header=y -E separator=, > output.csv 
```

但我无法`"Info"`在手动导出.csv 时获得的字段名称的任何地方找到。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T20:10:05.347

是的，如果您使用最新的开发版本，则可以。
请参阅[Wireshark 错误 2892](https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=2892)。
下载[开发版本 1.9.0](http://www.wireshark.org/download.html)。

使用以下命令：
$ tshark -i 2 -T fields -e frame.time -e col.Info

Output
Feb 28, 2013 20:58:24.604635000 谁有 10.10.128.203？告诉 10.10.128.1
2013 年 2 月 28 日 20:58:24.678963000 谁有 10.10.128.163？告诉 10.10.128.1

注意
-e col.Info，
使用大写 I

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-19T18:18:49.240

如何直接将数据包导出到 csv 文件。

> `sudo tshark > fileName.csv`

# javascript - 三.js如何应用纹理作为材质

> ID：15112392
> 
> 赞同：0
> 
> 时间：2013-02-27T12:40:41.787
> 
> 标签：javascript, html, canvas, three.js

我只是偶然发现了 Three.js，我非常喜欢它。我是 JavaScript 新手，但我想了解更多关于动画等的知识。

**//更新** 我目前有这个代码，但它什么也没做。如果我尝试在没有自定义纹理的情况下执行此操作，那么它会呈现一个立方体。因此，除了纹理之外，目前一切都有效。

```
var camera, scene, renderer;
var mouseX = 0, mouseY = 0;

var windowHalfX = window.innerWidth / 2;
var windowHalfY = window.innerHeight / 2;

init();
animate();

function init() {
    camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 10000 );
    camera.position.z = 500;

    scene = new THREE.Scene();

    container = document.createElement( 'div' );
    document.body.appendChild( container );

    var cubeTexture = new THREE.texture();
    var loader = new THREE.ImageLoader();

    loader.addEventListener("load", function(event) {
        cubeTexture.image = event.content;
        cubeTexture.needsUpdate = true;
    });

    loader.load("crate.gif");

    var geometry = new THREE.CubeGeometry(300, 300, 300);
    var material = new THREE.MeshBasicMaterial({ map: cubeTexture, overdraw: true });

    renderer = new THREE.CanvasRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);

    var cube = new THREE.Mesh(geometry, material);
    scene.add(cube);
    container.appendChild( renderer.domElement );

    document.addEventListener( 'mousemove', onDocumentMouseMove, false );

}

function onDocumentMouseMove( event ) {

    mouseX = ( event.clientX - windowHalfX );
    mouseY = ( event.clientY - windowHalfY );

}

function animate() {

    requestAnimationFrame( animate );

    render();

}

function render() {
    camera.position.x += ( mouseX - camera.position.x ) * 0.05;
    camera.position.y += ( - mouseY - camera.position.y ) * 0.05;
    camera.lookAt( scene.position );

    renderer.render( scene, camera );
} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T01:16:01.157

您应该已经在控制台中看到了您的错误。

```
 var cubeTexture = new THREE.Texture(); 
```

免费提示：这样做

```
 var geometry = new THREE.CubeGeometry( 300, 300, 300, 4, 4, 4 ); 
```

否则，使用 CanvasRenderer 你会得到很多失真。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:02:56.077

因此，如果我理解正确，您希望图像随着鼠标拉伸和移动？为什么不为此使用javascript？您可以轻松读出鼠标的 y 和 x 位置，然后动态更改图像的位置。如果我错了，请纠正我，但如果这是你想要的，我建议使用 javascript。

此致，哈门·布林克曼。

# javascript - 如何在谷歌地图 api V3 中移动带有标记的折线

> ID：15112393
> 
> 赞同：0
> 
> 时间：2013-02-27T12:40:44.400
> 
> 标签：javascript, google-maps-api-3

您好，我想在 Google maps javascript API V3 中编写程序，我想知道如何移动标记并同时移动折线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:59:34.143

最简单的方法是在折线上创建一个[**符号，**](https://developers.google.com/maps/documentation/javascript/overlays#PolylineSymbols)并另外将折线的`draggable`-option 设置为`true`

# asp.net-mvc - ASP.NET MVC 使用 WebGrid 显示 SearchResults

> ID：15112396
> 
> 赞同：0
> 
> 时间：2013-02-27T12:40:46.237
> 
> 标签：asp.net-mvc, asp.net-mvc-3, webgrid

我有一个 Search.cshtml 视图，看起来像这样：

```
@model IEnumerable<MVC.Models.Books>

@using (Html.BeginForm())
{
    @Html.DropDownList("Categorie", ViewBag.Categorie as SelectList); 
    @Html.TextBox("Query");
    <input type="submit" value="Search" />
}

@if (this.Model.Any())
{
    var grid = new WebGrid(Model, rowsPerPage:20);

    @grid.GetHtml(mode: WebGridPagerModes.All,
    columns: grid.Columns(
        grid.Column(columnName: "Number"),
        grid.Column(columnName: "Title"),
        grid.Column(format: (item) => Html.ActionLink("Edit", "Edit", new { id = item.Nummer })),
        grid.Column(format: (item) => Html.ActionLink("Details", "Details", new { id = item.Nummer })),
        grid.Column(format: (item) => Html.ActionLink("Delete", "Delete", new { id = item.Nummer }))
        )
    )
} 
```

我的控制器有以下方法：

```
 public ActionResult Search()
        {
            ViewBag.Categorie= new SelectList(new[] { "Number", "Title"});
            IEnumerable<Books> model = new List<Books>();
            return View(model);
        }

        [HttpPost]
        public ActionResult Search(string categorie, string query)
        {
            ViewBag.Categorie= new SelectList(new[] { "Number", "Title"});    
            IEnumerable<Books> model;

            switch (categorie)
            {
                case "Number":
                    int qnumber = Convert.ToInt32(query);
                    model = _db.Books.Where(b => b.Number == qnumber)
                                    .OrderBy(b => b.Number).ToList();
                    break;
                default:
                    model = _db.Books.Where(b => b.Title.Contains(query))
                                    .OrderBy(b => b.Title).ToList();
                    break;
            }
            return View(model);
        } 
```

一切正常。但是列和分页链接的排序不起作用。如果单击其中一个，视图将重新加载，而网格中没有数据。

有没有办法让 WebGrid 在这个搜索视图中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:10:25.357

在您的代码中：

```
@if (this.Model.Any())
{
   <div id="grid" class="ajaxGrid">
   @{
       var grid = new WebGrid(Model, rowsPerPage: 8, canPage: true, canSort: true, ajaxUpdateContainerId: "grid");
   }

   @grid.GetHtml(mode: WebGridPagerModes.All,
   columns: grid.Columns(
   grid.Column(columnName: "Number"),
   grid.Column(columnName: "Title"),
   grid.Column(format: (item) => Html.ActionLink("Edit", "Edit", new { id = item.Nummer })),
   grid.Column(format: (item) => Html.ActionLink("Details", "Details", new { id = item.Nummer })),
   grid.Column(format: (item) => Html.ActionLink("Delete", "Delete", new { id = item.Nummer }))))
</div>
} 
```

- 编辑 -

```
 public ActionResult Fetch(string sort, string sortDir)
    {
        //sorting logic here
        return View();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:38:16.533

如果没有 Ajax，我就无法正常工作。所以现在我的解决方案如下所示：

“搜索.cshtml：”

```
<h2>Search</h2>

@using (Ajax.BeginForm("Update", "Book", new AjaxOptions
{
    HttpMethod = "GET",
    InsertionMode = InsertionMode.Replace,
    UpdateTargetId = "searchResults"
}))
{
    @Html.DropDownList("categorie", new SelectList(new[] { "Number", "Writer", 
                "Title"}) as SelectList)
    @Html.TextBox("query")
    <input type="submit" value="Search" />
}
<br /><br />

<table id="searchResults">
</table> 
```

部分视图“_BookResults.cshtml”：

```
@model IEnumerable<MVC.Models.Books>

@{
    var grid = new WebGrid(Model, defaultSort: "Number", rowsPerPage: 20, ajaxUpdateContainerId: "searchResults");
    @grid.GetHtml(mode: WebGridPagerModes.All,
    htmlAttributes: new { id = "searchResults" },
    columns: grid.Columns(
        grid.Column(columnName: "Number"),
        grid.Column(columnName: "Title"),
        grid.Column(format: (item) => Html.ActionLink("Edit", "Edit", new { id = item.Nummer })),
        grid.Column(format: (item) => Html.ActionLink("Details", "Details", new { id = item.Nummer })),
        grid.Column(format: (item) => Html.ActionLink("Delete", "Delete", new { id = item.Nummer }))
    ));
} 
```

Controller 现在有以下方法：

```
public ActionResult Search()
{
    return View();
}

public PartialViewResult Update(string categorie, string query)
{
    var books = new List<Books>();

    switch (categorie)
    {
        case "Number":
            int qnumber = Convert.ToInt32(query);
            books = _db.Books
                .Where(b => b.Number== qnumber).ToList();
            break;
        case "Writer":
            books = _db.Books
                .Where(b => b.Writer.Name.Contains(query))
                .OrderBy(b => b.Writer.Name).ToList();
            break;
        case "Title":
            books = _db.Books
                .Where(b => b.Title.Contains(query))
                .OrderBy(b => b.Title).ToList();
            break;
    }

    return PartialView("_BookResults", books);
} 
```

我希望这个解决方案能帮助遇到类似问题的每个人。

# jquery - 如何绑定附加元素？

> ID：15112398
> 
> 赞同：0
> 
> 时间：2013-02-27T12:40:47.333
> 
> 标签：jquery, html, plupload

我正在使用 Plupload 上传文件。出于特定原因，我必须将`FilesAdded`“内部”放在`init`下面，如下所示。

问题是我无法`jQuery.remove()`在附加了 jQuery 的元素上使用。

我通常通过使用解决了这个问题`.on()`，但是由于没有诸如`click`等之类的操作。我不确定如何绑定附加元素。

非常感谢任何指导:)

```
// Custom example logic
var uploader = new plupload.Uploader({
    runtimes : 'gears,html5,flash,silverlight,browserplus',
    browse_button : 'btn-file-browse',
    container : 'drag-drop-container',
    drop_element : 'drag-drop-container',
    max_file_size : sim_gal_data['max_file_size'],
    url : sim_gal_data['upload_url'],
    multi_selection : true,     
    init : {
      FilesAdded: function(up, files) {

            // Create list of files being uploaded
            jQuery.each(files, function(i, file) {
                jQuery('#filelist').append(
                    '<div id="' + file.id + '" class="file_upload">' +
                    '<div class="file_name">' + file.name + ' (' + plupload.formatSize(file.size) + ')' +
                    '</div> <label class="file_progress"><b></b></label>'
                );
            });

            // Ready set go!
            up.refresh();
            up.start(); 
    }
}); 
```

**更新**

这会触发remve：

```
uploader.bind('UploadComplete', function(up, files) {
    jQuery('#filelist .file_name').remove();

    // I'm able to run this - so maybe .file_name is appended?
    jQuery('#filelist .file_name).append('TEST');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:20:28.533

您是否尝试在 UploadComplete 上进行清理？如果是这样，它应该如下所示。

如果您尝试清理上传的每个文件，则应在[FileUploaded 事件处理程序中处理它](http://www.plupload.com/plupload/docs/api/index.html#class_plupload.Uploader.html-FileUploaded)

```
init : {
  UploadComplete: function(uploader, files){
     alert('upload complete');
     jQuery('#filelist').html('');
  },
  FilesAdded: function(up, files) {

        // Create list of files being uploaded
        jQuery.each(files, function(i, file) {
            jQuery('#filelist').append(
                '<div id="' + file.id + '" class="file_upload">' +
                '<div class="file_name">' + file.name + ' (' + plupload.formatSize(file.size) + ')' +
                '</div> <label class="file_progress"><b></b></label>'
            );
        });

        // Ready set go!
        up.refresh();
        up.start(); 
} 
```

# xml - 使用 XSLT 合并两个 XML 文件

> ID：15112399
> 
> 赞同：1
> 
> 时间：2013-02-27T12:40:51.020
> 
> 标签：xml, xslt, xpath

我需要合并两个 XML 文件。

我尝试根据[Merge 2 XML files based on attribute values using XSLT? 中的答案编写 XSLT 样式表？](https://stackoverflow.com/questions/14702554/merge-2-xml-files-based-on-attribute-values-using-xslt?rq=1)，但我没有成功。

### _a1.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<ExtData>
  <table bName="B SERs" id="BSER">
    <Col bName="Bus" id="BUS">
      <CoreCol coreEName="SER" coreHref="../_a2.xml" corebName="Bus" coreId="BUS"/>
    </Col>
    <Col bName="Ser" id="NAME">
      <CoreCol coreEName="SER" coreHref="../_a2.xml" corebName="Ser" coreId="NAME"/>
    </Col>
    <Col bName="ID" id="ID">
      <CoreCol coreEName="SER" coreHref="../_a2.xml" corebName="SerId" coreId="UCMDB_ID"/>
    </Col>
  </table>
</ExtData> 
```

### _a2.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<ExtData>
  <table bName="B SERs" id="BSER">
    <Col EName="SER" bName="Bus" Id="BUS"/>
    <Col EName="SER" bName="Ser" Id="NAME"/>
    <Col EName="SER" bName="SerId" Id="DB_ID"/>
    <Col EName="SER" bName="SerDate" Id="date"/>
    <Col EName="SER" bName="Person" Id="Manager"/>
    <Col EName="SER" bName="desc" Id="desc"/>
  </table>
</ExtData> 
```

并且输出需要是：

```
<?xml version="1.0" encoding="UTF-8"?>
<ExtData>
  <table bName="B SERs" id="BSER">
    <Col bName="Bus" id="BUS">
      <CoreCol coreEName="SER" coreHref="../_a2.xml" corebName="Bus" coreId="BUS"/>
    </Col>
    <Col bName="Ser" id="NAME">
      <CoreCol coreEName="SER" coreHref="../_a2.xml" corebName="Ser" coreId="NAME"/>
    </Col>
    <Col bName="ID" id="ID">
      <CoreCol coreEName="SER" coreHref="../_a2.xml" corebName="SerId" coreId="UCMDB_ID"/>
    </Col>
    <Col bName="" id="">
      <CoreCol coreEName="SER" coreHref="../_a2.xml" corebName="SerDate" coreId="date"/>
    </Col>
    <Col bName="" id="">
      <CoreCol coreEName="SER" coreHref="../_a2.xml" corebName="Person" coreId="Manager"/>
    </Col>
    <Col bName="" id="">
      <CoreCol coreEName="SER" coreHref="../_a2.xml" corebName="desc" coreId="desc"/>
    </Col>
  </table>
</ExtData> 
```

是否可以用 XSLT 做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:55:17.363

我确信有更好的方法，但这是我想出的第一个 XSLT 1.0 兼容选项：

### 样式表

```
<?xml version="1.0" encoding="UTF-8"?>

<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

  <xsl:output method="xml" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <!-- Identity transform -->
  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="table">
    <xsl:copy>
      <xsl:apply-templates select="@* | Col"/>
      <!--
      Apply <Col> elements in _a2.xml that have a @bName attribute that DOESN'T
      have a <CoreCol> element under the current <table> element with a
      corresponding @corebName attribute.
      -->
      <xsl:apply-templates
        select="document('_a2.xml')/ExtData/table[@id = current()/@id]
         /Col[not(current()/Col/CoreCol/@corebName = @bName)]" mode="merge"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="table/@bName">
    <xsl:copy/>
  </xsl:template>

  <!-- Match the elements applied in the template above. -->
  <xsl:template match="Col" mode="merge">
    <Col bName="" id="">
      <CoreCol>
        <xsl:apply-templates select="@EName"/>
        <xsl:attribute name="coreHref">../_a2.xml</xsl:attribute>
        <xsl:apply-templates select="@bName" mode="merge"/>
        <xsl:apply-templates select="@Id"/>
      </CoreCol>
    </Col>
  </xsl:template>

  <!-- Transform attribute names -->
  <xsl:template match="@EName">
    <xsl:attribute name="coreEName">
      <xsl:value-of select="."/>
    </xsl:attribute>
  </xsl:template>

  <!--
  The @bName attributes in <Col> elements in _a2.xml need to be transformed
  into @coreBname elements in the output file. We'll use the "merge" mode so
  the @bName attributes in <Col> elements in _a1.xml aren't affected.
  -->
  <xsl:template match="@bName" mode="merge">
    <xsl:attribute name="corebName">
      <xsl:value-of select="."/>
    </xsl:attribute>
  </xsl:template>

  <xsl:template match="@Id">
    <xsl:attribute name="coreId">
      <xsl:value-of select="."/>
    </xsl:attribute>
  </xsl:template>

</xsl:stylesheet> 
```

# php - php MySQL更新html表单

> ID：15112403
> 
> 赞同：1
> 
> 时间：2013-02-27T12:40:59.800
> 
> 标签：php, html, mysql, forms

这里有张桌子：

```
|id name surname email    |
|1  john surjohn @mail.com|
|2  peter pet    @mail.com|                   
|.........................| 
```

**PHP：**

```
<?php
if(isset($_POST['update']))
{
...
$conn = mysql_connect($dbhost, $dbuser, $dbpass);
if(! $conn )
{
  die('Could not connect: ' . mysql_error());

}

$id = $_POST['id'];
$name = $_POST['name'];
$surname = $_POST['surname'];
$mail = $_POST['mail'];

$sql = "UPDATE emps ".
       "SET name= '$name', surname'$surname', email='$mail' ".
       "WHERE Id = $id" ;
mysql_select_db('dbase');
$retval = mysql_query( $sql, $conn );
if(! $retval )
{
  die('Could not update data: ' . mysql_error());
}
echo "blablablabla ! \n";
mysql_close($conn);
}
else

{
?>
<form method="post" action="<?php $_PHP_SELF ?>">
    <fieldset style="width: 350px" >
<table width="400" border="0" cellspacing="1" cellpadding="2">
<tr>
<td width="100">Id </td>
<td><input name="id" type="text" id="id" value=""></td>
</tr>
<tr>
<td width="100">name</td>
<td><input type="text" maxlength="15" name="name" value="" ></td>
</tr>
<tr>
<td width="100">surname</td>
<td><input type="text" maxlength="40" name="surname" value="" ></td>
</tr>
<tr>

<td width="100"> </td>
<td>
<input name="update" type="submit" id="update" value="update">
</td>
</tr>
</table>
        </fieldset>
</form>
<?php
}
?>
   } 
```

在这种形式中，我需要更新所有字段，否则，更新的表可以有空值。例如，我想要更新姓名字段，但保留姓氏，通过电子邮件发送现有值。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:09:17.643

Karl's idea is the way to go, but it can be refactored this way:

```
$id = $_POST['id'];

$sql = "UPDATE emps SET";
$fieldValuePairs = array();

foreach($_POST as $key => value)
    if($key != 'id')
       $fieldValuePairs[] = "'$key' = '$value'";

$sql .= " ". implode(',', $fieldValuePairs)." WHERE id = $id"; 
```

Note: this works only if you use input names (in the form) equal the column names (in the database).

Have a great day.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:49:47.903

可以尝试这样的事情：

```
$id = $_POST['id'];
$name = $_POST['name'];
$surname = $_POST['surname'];
$mail = $_POST['mail'];

$sql = "UPDATE emps SET";
$moresql = '';

if(isset($name) && !empty($name)) {
    $moresql .= " name = '$name'";  
}

if(isset($surname) && !empty($surname)) {
    if ($moresql) $moresql .= ',';
    $moresql .= " surname = '$surname'";    
}

if(isset($mail) && !empty($mail)) {
    if ($moresql) $moresql .= ',';
    $moresql .= " mail = '$mail'";  
}

$sql .= $moresql;
$sql .= " WHERE Id = '$id'"; 
```

虽然这是未经测试的。

# jquery - 为什么我的简单交叉淡入淡出不重复？

> ID：15112407
> 
> 赞同：2
> 
> 时间：2013-02-27T12:41:11.457
> 
> 标签：jquery, css, slider, fade

我有一个简单的背景图像交叉推子：http: [//jsfiddle.net/jRDkm/2/](http://jsfiddle.net/jRDkm/2/)此代码的基础取自这里：[http ://snook.ca/archives/javascript/simplest-jquery-slideshow](http://snook.ca/archives/javascript/simplest-jquery-slideshow)

出于某种原因，尽管它只重复了一次，然后就变成了白色。如何调整我的代码以使其不断重复自己？

JS：

```
function slideshow() {
$('#fullscreen-slider li:gt(0)').hide();
setInterval(function(){
    $('#fullscreen-slider :first-child').fadeOut()
    .next('li').fadeIn()
    .end().appendTo('#fullscreen-slider');
}, 3000);
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:47:46.910

你的选择器是错误的。尝试

```
$('#fullscreen-slider li:first').fadeOut()
        .next('li').fadeIn()
        .end().appendTo('#fullscreen-slider'); 
```

演示：http: [//jsfiddle.net/jRDkm/5/](http://jsfiddle.net/jRDkm/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:48:23.337

`**[LIVE DEMO](http://jsfiddle.net/jRDkm/6/)**`

```
/* located within plugins.js */
function fitElements() {
    $('ul#fullscreen-slider li').height( $(window).height() ).width( $(window).width() );
}

function slideshow() {
    var n = 0;
    var $LI =  $('#fullscreen-slider li');
    $LI.hide().eq(n).show();
    setInterval(function(){
        $LI.eq(n++%$LI.length).fadeTo(600,1).siblings().fadeTo(600,0);
    }, 3000);
}

$(document).ready(function() {
    fitElements();
    slideshow();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T12:48:44.827

试试这个：http: [//jsfiddle.net/jRDkm/4/](http://jsfiddle.net/jRDkm/4/)

```
function slideshow() {
    $('#fullscreen-slider li:gt(0)').hide();
    setInterval(function(){
        $('#fullscreen-slider li:eq(0)').fadeOut()
        .next('li').fadeIn()
        .end().appendTo('#fullscreen-slider');
    }, 3000);
}; 
```

# google-apps-script - 如何将 GUI Builder 创建的 UI 嵌入到电子邮件中？

> ID：15112409
> 
> 赞同：0
> 
> 时间：2013-02-27T12:41:17.650
> 
> 标签：google-apps-script

我想将由 GUI 构建器创建的 UI 嵌入到电子邮件中，以获取信息。

我无法使用谷歌表格，因为我想将部分填写的表格发送给某人以供审核和完成。

你有什么想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:00:10.847

您可以使用 Google 表单[预填充表单答案](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)。

更符合您的问题，您将无法在电子邮件中使用 GUI 构建器。但是，您可以创建一个[HTML 模板文件](https://developers.google.com/apps-script/html_service#TemplatedHTML)，并在 HTML 中编写表单。您将能够使用模板轻松填写答案。然后，您可以使用此模板并调用`.evaluate().getContent()`它来评估模板中的变量，然后返回最终的 HTML，您可以使用`{htmlBody: contentOfTemplate};`.

伪类代码：

```
var template = HtmlService.createTemplateFromFile("Your_file_name");
template.variable1 = "My_string";
...
var content = template.evaluate().getContent();
MailApp("Your@email.com", "Theres HTML in this email", "", {htmlBody:content}); 
```

# jsf - 使用 jsf primefaces 按钮根据 oncomplete 事件的布尔值关闭对话框

> ID：15112410
> 
> 赞同：1
> 
> 时间：2013-02-27T12:41:23.793
> 
> 标签：jsf, primefaces, dialog

我有个问题。我有一个 JSF Primefaces 环境，我想设置密码。在 bean 中有一个方法，它可以抛出异常或将 doneChange 布尔值设置为 true。

我想要以下运行：
如果 doneChange 布尔值为真，只需关闭按钮所在的对话框，然后打开另一个。
这是按钮的代码：

```
 <p:commandButton id="changeButtonId" 
                             type="submit" 
                             value="#{msg.changePassword}" 
                             ajax="true" 
                             action="#{changePasswordController.changePassword}" 
                             update=":changePasswordFormId :actionSuccessDialogId" 
                             oncomplete="if(#{changePasswordController.doneChange}){actionSuccessDialogVar.show()}; if(#{changePasswordController.doneChange}){changePWDialog.hide();}">
                                <f:setPropertyActionListener target="#{functionSuccessBean.actionName}" value="#{msg.changePassword}"/>
                                <f:setPropertyActionListener target="#{functionSuccessBean.description}" value="#{msg['actionSuccess']}"/>
            </p:commandButton> 
```

问题是：我在单击此按钮时进行了调试，在 oncomplete 调用 doneChange 设置为 true 之前。我只有一个怀疑：当按钮被渲染时，oncomplete 事件就确定了。因为当我再次打开此对话框时，doneChange 仍然是正确的并且可以按我的意愿工作。我想不出如何让它发挥作用。
如何让它实时响应 doneChange 布尔值？它是否适用于某些绑定？我尝试了 primefaces 家庭教程，但没有成功。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T13:08:17.010

I found a solution by a help of a non-stackoverflow friend. It appears I used it wrong way, and needed to add a callbackparam.

I needed to add in the Bean:

```
RequestContext.getCurrentInstance().addCallbackParam(
  "doneChangeParam", 
  doneChange
); 
```

And oncomplete changed to:

```
oncomplete="if(
  args &amp;&amp; args.doneChangeParam)
  {
    actionSuccessDialogVar.show(); changePWDialog.hide();
  }" 
```

# asp-classic - 不要在磁盘中生成文件，而是在内存中发送带有数据的邮件

> ID：15112412
> 
> 赞同：0
> 
> 时间：2013-02-27T12:41:24.573
> 
> 标签：asp-classic

我有一段有效的代码：

读取数据库，读取模板 (template.htm)，将数据放入基于模板 (evento.htm) 的新文件中，读取该文件并发送包含生成文件内容的电子邮件。下面的代码（我剪切了数据库部分）：

```
<%
    NomeDoTemplate= "template.htm"
    CaminhoDoTemplate= Server.MapPath(NomeDoTemplate)
    CaminhoDoTemplateAjustado= Mid(CaminhoDoTemplate,1,InStrRev(CaminhoDoTemplate,"\"))
    NomeDoArquivo= "evento.htm"
    CaminhoDoArquivo= Server.MapPath(NomeDoArquivo)

    Set ManipulacaoDeArquivo= Server.CreateObject("Scripting.FileSystemObject")
    Set ObjetoArquivo= ManipulacaoDeArquivo.OpenTextFile(CaminhoDoTemplate, 1)
    DadosDoObjetoArquivo= ObjetoArquivo.ReadAll
    ObjetoArquivo.Close

    DadosDoObjetoArquivo= Replace(DadosDoObjetoArquivo, "[Cliente]", Um)

    Set ObjetoArquivo= ManipulacaoDeArquivo.CreateTextFile(CaminhoDoTemplateAjustado & NomeDoArquivo)
    ObjetoArquivo.Write(DadosDoObjetoArquivo)

    Set ObjetoArquivo= ManipulacaoDeArquivo.OpenTextFile(CaminhoDoTemplateAjustado & NomeDoArquivo, 1)
    DadosDoObjetoArquivo= ObjetoArquivo.ReadAll

    Dim objCDOSYSMail
    Dim objCDOSYSCon

    Set objCDOSYSMail = Server.CreateObject("CDO.Message")
    Set objCDOSYSCon = Server.CreateObject ("CDO.Configuration")

    objCDOSYSCon.Fields("http://schemas.microsoft.com/cdo/configuration/smtpserver") = "smtp.server.com"
    objCDOSYSCon.Fields("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25
    objCDOSYSCon.Fields("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2
    objCDOSYSCon.Fields("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate") = 1
    objCDOSYSCon.Fields("http://schemas.microsoft.com/cdo/configuration/sendusername") = "user_id"
    objCDOSYSCon.Fields("http://schemas.microsoft.com/cdo/configuration/sendpassword") = "password"
    objCDOSYSCon.Fields("http://schemas.microsoft.com/cdo/configuration/smtpconnectiontimeout") = 30
    objCDOSYSCon.Fields.update

    Set objCDOSYSMail.Configuration = objCDOSYSCon
    objCDOSYSMail.From = "ABC <abc@server.com>"
    objCDOSYSMail.To = "sender@gmail.com"
    objCDOSYSMail.Subject = "Contato"
    objCDOSYSMail.HTMLBody= DadosDoObjetoArquivo
    objCDOSYSMail.Send

    Set objCDOSYSMail = Nothing
    Set objCDOSYSCon = Nothing
%> 
```

我想让这个简单，跳过在磁盘中生成文件的步骤。我想：

读取数据库，读取模板，将数据放入内存，发送带有内存中数据的邮件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:16:48.633

如果我没看错，你所要做的就是跳过保存文件的部分并重新阅读它……我已经重构了你的代码，给变量一些英文名称，这样我就可以看到发生了什么，并发表评论去掉你不需要的行：

```
<%
    Dim TemplateName     : TemplateName = "template.htm"
    Dim TemplateFullPath : TemplateFullPath = Server.MapPath(TemplateName)
    Dim TemplatePath     : TemplatePath = Mid(TemplateFullPath,1,InStrRev(TemplateFullPath,"\"))

    Dim ArchiveName      : ArchiveName = "evento.htm"
    Dim ArchiveFullPath  : ArchiveFullPath = Server.MapPath(ArchiveName)

    Dim FSO, TemplateFile, TemplateText
    Set FSO = Server.CreateObject("Scripting.FileSystemObject")
        Set TemplateFile = FSO.OpenTextFile(TemplateFullPath, 1)
            TemplateText = TemplateFile.ReadAll()
            TemplateText = Replace(TemplateText, "[Cliente]", Um)
            TemplateFile.Close()

'   Really simple - to do this in-memory, simply don't save and re-read the file....

'        Set TemplateFile = FSO.CreateTextFile(TemplatePath & ArchiveName)
'            TemplateFile.Write(TemplateText)

'        Set TemplateFile = FSO.OpenTextFile(TemplatePath & ArchiveName, 1)
'            TemplateText = TemplateFile.ReadAll

        Set TemplateFile = Nothing
    Set FSO = Nothing

    Dim objCDOSYSMail, objCDOSYSCon
    Set objCDOSYSMail = Server.CreateObject("CDO.Message")
        Set objCDOSYSCon = Server.CreateObject ("CDO.Configuration")
            objCDOSYSCon.Fields("http://schemas.microsoft.com/cdo/configuration/smtpserver") = "smtp.server.com"
            objCDOSYSCon.Fields("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25
            objCDOSYSCon.Fields("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2
            objCDOSYSCon.Fields("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate") = 1
            objCDOSYSCon.Fields("http://schemas.microsoft.com/cdo/configuration/sendusername") = "user_id"
            objCDOSYSCon.Fields("http://schemas.microsoft.com/cdo/configuration/sendpassword") = "password"
            objCDOSYSCon.Fields("http://schemas.microsoft.com/cdo/configuration/smtpconnectiontimeout") = 30
            objCDOSYSCon.Fields.update

            Set objCDOSYSMail.Configuration = objCDOSYSCon
                objCDOSYSMail.From = "ABC <abc@server.com>"
                objCDOSYSMail.To = "sender@gmail.com"
                objCDOSYSMail.Subject = "Contato"
                objCDOSYSMail.HTMLBody= TemplateText
                objCDOSYSMail.Send
            Set objCDOSYSMail.Configuration =  Nothing
        Set objCDOSYSMail = Nothing
    Set objCDOSYSCon = Nothing
%> 
```

希望这可以帮助，

埃里克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:17:09.180

你可以使用几种技术：

*   编写自己的 stringbuilder 类
*   使用 .net system.io.stringwriter 类（是的，你可以从经典的 asp 中使用它）
*   使用 adodb.stream 对象

**示例字符串编写器：**

```
set sw = server.createObject("system.io.stringwriter")
sw.write_12( DadosDoObjetoArquivo )

objCDOSYSMail.HTMLBody = sw.getStringBuilder().toString() 
```

**示例（adodb.stream）：**

```
set stream = server.createobject("ADODB.Stream")
with stream 
    .Open
    .WriteText DadosDoObjetoArquivo
end with

objCDOSYSMail.HTMLBody = stream.ReadText
stream.Close 
```

# perl - 如何在 Perl 中处理 Crypt::Blowfish 的非 ANSI 字符？

> ID：15112417
> 
> 赞同：1
> 
> 时间：2013-02-27T12:41:32.233
> 
> 标签：perl, utf-8, ansi, blowfish

如何在 Perl 中处理 Crypt::Blowfish 的非 ANSI 字符？

以下脚本是用字符集 UTF-8 编写的，仅在`§`或上失败`ö`。

```
#!/usr/bin/env perl
use strict;
use warnings FATAL => 'all';
use utf8;
use Crypt::Blowfish;
my $cipher = Crypt::Blowfish->new( pack 'H16', '12345678' );
my @chars = ( 'a', '§', 'ö', '9' );
printf( "%s: %s",
    $_, ( eval { $cipher->encrypt( $_ x 8 ) } ) ? "ok\n" : "fail: $@" )
    for ( @chars ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T12:48:49.063

密码适用于流或*字节*块，但您没有为它提供字节。您正在为其提供 Unicode 应对点。

您需要先将要加密的任何文本序列化为字节，然后才能对其进行加密，也就是说，您需要对文本进行编码。

```
use Encode qw( encode_utf8 );
my $bytes = encode_utf8($char x 8); 
```

此外，您不应该直接使用[Crypt::Blowfish](http://search.cpan.org/perldoc?Crypt%3a%3aBlowfish)。这将产生弱加密。您想通过[Crypt::CBC](http://search.cpan.org/perldoc?Crypt%3a%3aCBC)访问它。这提供了盐渍、链接和填充。

```
use Crypt::CBC qw( );
use Encode     qw( encode_utf8 decode_utf8 );

my $cipher = Crypt::CBC->new(
   -key    => '... key phrase ...',
   -cipher => 'Blowfish',
);

my $cipher_bytes = $cipher->encrypt(encode_utf8($plain_text));
my $plain_text = decode_utf8($cipher->decrypt($cipher_bytes)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T12:48:18.277

许多 Crypt::* 模块都是块加密算法。因此，它们只能使用固定长度的块。由于 '§' 是一个 UTF8 字符，它实际上包含超过 1 个字节，这就是你的代码失败的原因。另一个问题是您使用了`use utf8`编译指示，这意味着将使用“utf8 标志”创建 utf8 常量字符串。这可能会导致二进制算法发生重大变化，例如加密。

我建议你使用`Crypt::CBC`模块（在 CPAN 上检查）；并且，在加密之前删除 utf8 标志：`utf8::encode($_);`

# assembly - Mips 程序集，.data 部分

> ID：15112420
> 
> 赞同：0
> 
> 时间：2013-02-27T12:41:39.340
> 
> 标签：assembly, mips

我想获取在.data 中声明的全局值的地址。la 指令无法识别？还有什么方法可以执行

```
.data
word1:  .word 0
word2:  .word 0
.text
    .globl __start
    __start:
    la $v0,word1 --> here I receive a syntax error. 
```

我想在 word1 中存储一个字节，在 word2 中存储另一个字节

我无法获取地址

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T02:48:09.163

`la`不是真正的 MIPS 指令，它是一个方便的汇编宏。它通常被分解为`lui`and`ori`或`addi`。在链接比静态链接时已知的平面布局更复杂的系统上，您的汇编程序可能无法实现它。要访问您的数据段，您可能需要取消引用全局指针 (GP) 或执行间接加载。

# php - 如何在 AMAZON EC2 中编辑 httpd.conf 文件

> ID：15112424
> 
> 赞同：32
> 
> 时间：2013-02-27T12:41:51.703
> 
> 标签：php, amazon-web-services, amazon-ec2, httpd.conf

我是 AMAZON EC2 服务器的新手，最近我安装了 PHP 和 MySQL，现在我想更新文件`/etc/httpd/conf/httpd.conf`

但问题是，当我要更新它时，它会显示类似 - 的错误`Permission denied`。更新它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-04-21T08:55:36.267

您必须以 root 用户身份更改文件。做这个：

```
sudo nano /etc/httpd/conf/httpd.conf 
```

进行更改并使用`ctrl`+ `O`,保存`Enter`。完毕。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-27T13:09:45.083

我找到了解决方案及其工作...

`$ sudo nano /etc/httpd/conf/httpd.conf`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-01T11:02:08.750

它会提示您一个警报，您可以复制它。所以

*   所以复制它，将它存储在同名的桌面上
*   编辑它以供您使用（删除评论“#”）
*   保存
*   现在用这个替换原始文件
*   它会提示您输入密码，请提供

现在您所做的所有更新都保存在*httpd.conf* 中

# c# - 在 c# 中使用二进制格式化程序反序列化对象

> ID：15112425
> 
> 赞同：0
> 
> 时间：2013-02-27T12:41:53.753
> 
> 标签：c#, android, serialization, deserialization, binaryformatter

我已从 ( `Java/android`) 序列化文本文件。我需要使用二进制格式化程序`deserialize`将此文本文件。`c#`但我遇到一个错误，告诉我输入流不在`binary format`. 请注意此文件的存储和恢复`amazonS3`

# css - 在引导下拉切换和下拉菜单之间添加空间

> ID：15112432
> 
> 赞同：-1
> 
> 时间：2013-02-27T12:42:07.303
> 
> 标签：css, drop-down-menu, twitter-bootstrap

我创建了一个下拉菜单并让它在悬停时下降，但问题是我需要在切换和下拉菜单之间留出一个空格：

```
<http://jsfiddle.net/yabasha/nbbjm/1/> 
```

悬停时它会显示下拉菜单，但是当我想选择菜单时它会消失。

请指教，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:24:25.770

您的问题是 li 和二级菜单之间存在间隙，因此当您悬停时，当您尝试移动到子菜单时，您不再位于 li 上，这会导致它关闭。

您要么需要向上移动子菜单，要么在悬停时扩展 li 的高度以覆盖 li 和子菜单之间的空间

将以下样式添加到您的小提琴似乎可以解决问题：

```
.dropdown:hover {padding-bottom:20px;}
.dropdown-menu {top:auto;} 
```

[http://jsfiddle.net/nbbjm/8/](http://jsfiddle.net/nbbjm/8/)

# java - 带有 Errai-UI 的选项卡

> ID：15112433
> 
> 赞同：0
> 
> 时间：2013-02-27T12:42:14.203
> 
> 标签：java, gwt, errai

我试图弄清楚如何用 Errai-UI 做“标签”。

例如，如果选择的选项卡`#home`是`Home`显示模板或`#about`显示`AboutUs`模板。

我有这个入口点类：

```
@Templated("#home")
@EntryPoint
public class App extends Composite {
       @PostConstruct
       public void setup()
       {
           RootPanel.get().clear();
           RootPanel.get("rootPanel").add(this);
       }
} 
```

关于我们模板

```
@Templated("#about") 
public class AboutUs extends Composite {  
       @PostConstruct
       public void setup() { 
           RootPanel.get("rootPanel").clear();
           RootPanel.get("rootPanel").add(this);
       }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:47:09.733

要打开导航，您应该在入口点初始化 Navigation 组件。每个页面都应该有注释`@Page(path = "pageName")`。只需通过 url 附加 #pageName 或使用特殊组件（见下文），就可以在选项卡之间切换。

看一个例子：

继承导航模块

```
<inherits name="org.jboss.errai.ui.nav.Navigation"/> 
```

实施入口点

```
@EntryPoint
public class Bootstrap
{

    @Inject
    Navigation navigation;

    @PostConstruct
    public void buildUI()
    {
        navigation.getContentPanel().setWidth("100%");
        navigation.getContentPanel().setHeight("100%");
        RootPanel.get().add(navigation.getContentPanel());
    }

} 
```

实现一个页面

```
@Templated
@Page(path = "myPage", startingPage = true)
public class MyPage extends Composite
{
   ...
} 
```

要在另一个组件中添加“链接”，您可以使用以下注入：

```
 @Inject
 private TransitionTo<MyPage> myPageTransition;

 ...
 myPageTransition.go(); // load MyPage
 ... 
```

# java - LWJGL glTranslate 做奇怪的事情

> ID：15112439
> 
> 赞同：1
> 
> 时间：2013-02-27T12:42:38.177
> 
> 标签：java, opengl, draw, lwjgl, tile

这是我一直遇到的一个大问题。

我正在尝试使用 glTranslate 渲染多个图块，但是当我使用 x、y 坐标调用我的绘制函数时，图块的间距很奇怪（我不想要空格）。

这就是发生的事情。

![绘制多个瓷砖但有问题](../Images/6cd28d9f57d3f7aacdee75df0eb9c0cb.png)

这是我的代码：

画：

```
public void draw(float Xa, float Ya) {

    GL11.glTranslatef(Xa, Ya, 0);

    if(hasTexture) {
    Texture.bind();

    GL11.glBegin(GL11.GL_QUADS);
        GL11.glColor3f(0.5f, 0.5f, 1);
        GL11.glTexCoord2f(0, 0);
        GL11.glVertex2f(0, 0);
        GL11.glTexCoord2f(0, 1);
        GL11.glVertex2f(0, S);
        GL11.glTexCoord2f(1, 1);
        GL11.glVertex2f(S, S);
        GL11.glTexCoord2f(1, 0);
        GL11.glVertex2f(S, 0);

        GL11.glEnd();
    } 
```

和我的渲染代码：

```
public void a() throws IOException {
    GL11.glTranslatef(0, 0, -10);
    int x = 0;
    while (x < World.BLOCKS_WIDTH - 1) {
        int y = 0;
        while (y < World.BLOCKS_HEIGHT - 1) {
            blocks.b[data.blocks[x][y]].draw(x, y);
            y++;
        }
        x++;
} 
```

没有错误（除了可见的错误）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T12:48:20.663

您似乎没有初始化或推送/弹出当前转换。所以翻译会累积，产生你看到的效果，随着你翻译越来越大的值，它们之间的距离会越来越远。

假设您的街区相隔 10 个单位。第一个是用 (0, 0) 的平移绘制的，然后是 (0, 10)，然后是 (0, 20)，(0, 30) 等。

然而，随着平移在视图矩阵中累积，您实际得到的是 (0,0)、(0,10)、(0,30)、(0,60) 等的平移。

这很重要，因为它允许您从一系列简单的离散步骤构建复杂的变换。但是，当您要渲染多个对象时，每个对象都有自己的变换，您需要在每个对象之间进行某种形式的重置。

您可以重新初始化整个矩阵，但这有点不整洁，并且需要知道之前已经完成了哪些其他变换（例如相机等）。

相反，您可以将当前矩阵“推”到堆栈上，执行您想做的任何本地转换，渲染内容，然后“弹出”矩阵，以便您回到开始的位置，准备渲染下一个目的。

我应该指出，所有这些功能在 GL 的更高版本中都已弃用。使用更现代的 API，您可以使用着色器，并且可以提供您想要计算的任何变换。

# r - 如何使用线条符号在 colorbrewer 调色板中回收颜色

> ID：15112440
> 
> 赞同：8
> 
> 时间：2013-02-27T12:42:46.040
> 
> 标签：r, ggplot2, colorbrewer

我正在使用 ggplot2 创建很多`facet_wrap`ped`geom_line`图。

虽然每个情节最多只有八行，但如果放在一起，则图例上要显示的类别多于二十个。

与此类似： [为 13 个或更多类别推荐比例颜色，](https://stackoverflow.com/questions/13616515/recommend-a-scale-colour-for-13-or-more-categories) 并且： [在 R 中，如何更改 ggplot2 的 scale_fill_brewer 中仅一个值的颜色值？](https://stackoverflow.com/questions/6075140/in-r-how-do-i-change-the-color-value-of-just-one-value-in-ggplot2s-scale-fill-b/6076605#6076605)我想人为地增加使用 colorbrewer 的高对比度颜色集可以显示的颜色数量。

一个明显的方法似乎是“回收”调色板中的颜色，每次使用不同的线条符号。因此，带有“x”的鲜红色可能与带有“o”等的鲜红色不同。

谁能想到我该怎么做？

谢谢！

## 编辑

这里有一些（经过清理的）数据可供使用，以及我用来制作情节的 R 代码。

数据： http: [//orca.casa.ucl.ac.uk/~rob/Stack%20Overflow%20question/stack%20overflow%20colours%20question%20data.csv](http://orca.casa.ucl.ac.uk/~rob/Stack%20Overflow%20question/stack%20overflow%20colours%20question%20data.csv)

代码：

```
csvData <- read.csv("stack overflow colours question data.csv")
p <- ggplot(csvData, 
  aes(year, percentage_of_output, colour=category, group=category)) 
p + 
  geom_line(size=1.2)  + 
  labs(title = "Can I recycle the palette colours?", y = "% of output") +
  scale_colour_brewer(palette = "Set1") + 
  theme(plot.title = element_text(size = rel(1.5))) +
  facet_wrap("country_iso3", scales="free_y") 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-27T13:27:08.883

制作包含 20 个级别（如字母）的数据框。

```
df<-data.frame(group=rep(c(LETTERS[1:20]),each=5),x=rep(1:5,times=20),y=1:100) 
```

您可以使用`scale_colour_manual()`为线条设置颜色 - 在示例中，我使用了五个`SET1`并重复了四个`times`（总数为 20）。然后设置添加的形状`geom_point()`和`scale_shape_manual()`五个不同的形状并重复`each`它们四次（总数再次为 20）。

```
library(RColorBrewer)
ggplot(df,aes(x,y,colour=group))+geom_line()+geom_point(aes(shape=group),size=5)+
  scale_colour_manual(values=rep(brewer.pal(5,"Set1"),times=4))+
  scale_shape_manual(values=rep(c(15,16,17,18,19),each=5)) 
```

![在此处输入图像描述](../Images/5e3551f6481bf323f61de22e9047fbfb.png)

# iphone - 无法在 ios 上打开 sqlite db

> ID：15112441
> 
> 赞同：1
> 
> 时间：2013-02-27T12:42:49.687
> 
> 标签：iphone, ios, xcode, sqlite

您好我正在尝试在 ios 中创建一个 sqlite 数据库。我使用带有所需参数的 sqlite3_open 方法，但我总是收到错误 14（SQLITE_CANTOPEN 14 /* 无法打开数据库文件 */）。

即使使用最简单的声明它也不起作用

```
NSFileManager *fileMgr = [NSFileManager defaultManager];
NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"data.sqlite3"];

BOOL success = [fileMgr fileExistsAtPath:dbPath];

sqlite3 *db;

if(!success)
{
    NSLog(@"Cannot locate database file '%@'.", dbPath);
}

if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK))
{
    NSLog(@"An error has occured.");
}
else{
    NSLog(@"Ok");
} 
```

任何想法发生了什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T17:37:34.683

您无法在应用程序包中获得对 sqlite 数据库的写入权限。相反，将包中的数据库复制到“文件”系统中的适当位置（考虑到 iCloud 问题），然后在那里打开它。让您的应用程序首先在文件系统中查找数据库，如果不存在则仅复制它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-06T18:06:59.770

使用文档目录来存储数据库文件，然后创建 sqlite.... 它的工作原理

# javascript - 为什么这个简单的 javascript 语句不能检查变量是否存在？

> ID：15112443
> 
> 赞同：2
> 
> 时间：2013-02-27T12:42:54.373
> 
> 标签：javascript

我正在处理一些返回的 JSON 数据。

有时 JSON 会返回一些我可以通过

```
 var new_insert_id = data['internal']['new_insert_id']; 
```

但有时这部分json数组数据根本不会返回，所以我需要跳过这个变量的设置。

因此，在尝试设置变量之前，我编写了一个简单的检查以确保此数据存在：

```
 if(typeof data['internal']['new_insert_id'] != 'undefined')
 {
     // if data['internal']['new_insert_id'] is defined, then..
     var new_insert_id = data['internal']['new_insert_id'];
 } 
```

但是当 JSON 返回并且没有 new_insert_id 时，我收到以下错误：

```
Uncaught TypeError: Cannot read property 'new_insert_id' of undefined 
```

它指向的代码行是罪魁祸首是我的*if*语句行。

我错过了什么？我认为我的 if 语句会检查它是否存在，或者在使用数组时我需要做其他事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T12:44:42.420

除了可以先检查是否存在`data['internal']`，也可以使用*pythonic*的方式，即apply`try/catch`块：

```
try {
    var new_insert_id = data['internal']['new_insert_id'];
} catch (e) {} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T12:45:35.493

您编写的语句检查`new_insert_id`属性是否存在于“内部”中，但它不检查“内部”是否存在于`data`变量中。这应该会更好：

```
if(typeof data['internal'] != 'undefined' && typeof data['internal']['new_insert_id'] != 'undefined')
{
     var new_insert_id = data['internal']['new_insert_id'];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T12:45:36.553

错误消息说，这`data['internal']`已经是未定义的。你需要先检查一下：

```
if(typeof(data['internal']) != 'undefined' && typeof data['internal']['new_insert_id'] != 'undefined') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-27T12:45:38.973

你需要先检查`data['internal'] !== undefined`:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-27T12:46:12.560

在您的测试中，您正在测试的属性是否未定义`['new_insert_id']`，`data['internal']`那么您无法访问它，因为`data['internal']`未定义因此您得到的错误。

您必须首先检查是否`data['internal']`未定义。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-27T12:46:18.913

我认为这是因为`data['internal']`未定义。

所以你需要先检查`data['internal']`。

```
if(data['internal'] && data['internal']['new_insert_id'])
 {
     // if data['internal']['new_insert_id'] is defined, then..
     var new_insert_id = data['internal']['new_insert_id'];
 } 
```

# class - 我想从列表菜单创建对象（图像或图片框），然后在面板上定位或移动它们......（如绘画）

> ID：15112444
> 
> 赞同：0
> 
> 时间：2013-02-27T12:42:58.630
> 
> 标签：class, draw, picturebox

我尝试创建一类对象（图片框），然后将其称为我的主代码以从不同图片框的菜单中创建其他图片框。我想将它们固定在面板上以绘制 shcema 或组织图。

谢谢

类 _createpicture { public int p; 公共 int p_2;

```
 PictureBox pictureBox2 = new PictureBox();
        Panel panel1 = new Panel();
        Color color = new Color();

        Pen pen = new Pen(Color.Black, 1);
        Bitmap flag = new Bitmap(40, 30);
        ContextMenu cm = new ContextMenu();
        public int x;
        public int y;

       public _createpicture () {

           pictureBox2.Size = new Size(40, 30);
           pictureBox2.MouseClick += new MouseEventHandler(pic_mouseclick);
           pictureBox2.MouseMove += new MouseEventHandler(pic_mouseMouve);

           MenuItem item_1 = cm.MenuItems.Add("Définir");
           MenuItem item_2 = cm.MenuItems.Add("Supprimer");
           item_1.Click += new EventHandler(item_1_Click);
           item_2.Click += new EventHandler(item_2_Click);

    }

       private void item_1_Click(object sender, EventArgs e)
       {
           var myForm = new Form2();
           myForm.Show();

       }

       private void item_2_Click(object sender, EventArgs e)
       {
           pictureBox2.Dispose();
       }

        public void _create_picture(PictureBox pictureBox2, int p, int p_2, Color color)
        {

        }

        public void _add(Panel panel1, int p, int p_2, Color color)
        {

            panel1.Controls.Add(pictureBox2);
            pictureBox2.BackColor = color;
            Graphics flagGraphics = Graphics.FromImage(flag);
            flagGraphics.DrawRectangle(pen, p, p_2, 20, 10);
            flagGraphics.FillRectangle(Brushes.Red, p, p_2, 40, 30);
            pictureBox2.Image = flag;
            panel1.Controls.Add(pictureBox2);

        }

        public void pic_mouseclick(object sender, MouseEventArgs e) 
        {

            if (e.Button == MouseButtons.Right)
            {
                pictureBox2.ContextMenu = cm;

            }
            if (e.Button == MouseButtons.Left)
            {

                x = e.X;
                y = e.Y;

            }

        }

        public void pic_mouseMouve(object sender, MouseEventArgs e)
        {

          if (e.Button == MouseButtons.Left)
            {

                pictureBox2.Left += (e.X - x);
                pictureBox2.Top += (e.Y - y);

            }

}} 
```

公共部分类 Form1 : Form { _createpicture _createpicture10 = new _createpicture(); . . . .

```
 if (radioButton2.Checked) {
                _createpicture10._create_picture(picturebox10, e.X, e.Y, Color.Red); _createpicture10._add(this.panel1, e.X, e.Y, Color.Red);
            }

} 
```

# java - 我可以通过在 java 中添加数组来获得的数字

> ID：15112446
> 
> 赞同：0
> 
> 时间：2013-02-27T12:43:10.157
> 
> 标签：java, arrays, logic, addition

我需要通过添加不同数量的数组来获得一个我无法获得的最小数量。基本上如果我有这些数字：1,1,1,5; 我可以得到 1,2,3,5,6... 但我不能得到 4 所以这就是我要找的数字。现在这是我的代码：

```
import java.util.Scanner;
public class Broj_6 {

public static void main(String[] args) {
    Scanner unos = new Scanner(System.in);
    int k;
    int n = unos.nextInt();
    int niz []= new int [n];
    for(int i = 0;i<n;i++){
        niz[i]=unos.nextInt();
    }
    BubbleSort(niz);
    for(int i = 0;i<n;i++){
        System.out.print(niz[i] + " ");
    }
    for(int br = 1;br<=10000;br++){ 
        for(k = 1;k<n;k++){
            if(niz[k]>br){
                break;
            }
        }
        int podniz [] = new int [k];
        for(int i=0;i<podniz.length;i++){
            niz[i] = podniz[i];
        }
        //This is where I will need my logic to go
    }
}

static void BubbleSort (int [] niz){
    int pom;
    for(int i = 0;i<niz.length-1;i++){
        for(int j = 0;j<niz.length-1-i;j++){
            if(niz[j]>niz[j+1]){
                pom = niz[j];
                niz[j] = niz[j+1];
                niz[j+1] = pom;
            }
        }
    }
}
} 
```

因此，代码通过单独测试从 1 到 100000 的每个数字，并创建一个包含小于数字本身的所有数字的子数组。现在这是问题所在，我不知道如何混合和匹配子数组中的数字，以便它可以获取（或不获取）所需的数字。当每个组合都被测试并且没有想要的数字时，我会打破；循环并打印 i。澄清一下，我只能用加法，每个数字只能进一次

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:50:19.937

您可以按如下方式实现：使用两个嵌套循环，如下所示来计算不同数字的总和：

```
List<Integer> additionList = new ArrayList<Integer>();
int []inputNumbers = .... // Logic to read inputs
for(int _firstIndex = 0; _firstIndex < totalInputs; _firstIndex++){
    for(int _secondIndex = _firstIndex + 1; _secondIndex < totalInputs; _secondIndex++){
        additionList.add(inputNumbers[_firstIndex]); // only because you have 1 in the sample output
        additionList.add(inputNumbers[_firstIndex] + inputNumbers[_secondIndex ]);
    }
} 
```

然后排序`additionList`并查找任何丢失的条目。第一个缺失的条目将是您的答案，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:16:45.707

对整个数组进行排序，然后找到所有子数组的总和确实可以解决问题，但代价高昂：O(2n^2) ~ O(n^2)。

解决这个问题的更有效方法是 Kadane 的算法：[http ://en.wikipedia.org/wiki/Maximum_subarray_problem](http://en.wikipedia.org/wiki/Maximum_subarray_problem)

算法的作用：从第一个元素开始并增加数组大小（子数组），直到达到您想要的总和。

```
my_num = 1;
while(true){
  if(sum_subarray) > my_num){
    current position = new subarray;
} 
```

而这个子数组的概念是通过 Kadane 的方法计算出来的：

```
def sum_subarray(A):
sum_ending_here = sum_so_far = 0
for x in A:
    sum_ending_here = max(0, max_ending_here + x)
    sum_so_far = max(sum_so_far, sum_ending_here)
return sum_so_far 
```

我无法完全解决问题。这里提到的 'my_num' 需要从 1 开始递增，并在`my_num > max_sum`. 我希望有人可以添加它并使其可编译。

**笔记：**

如果数组中存在负元素，这也会引起注意。

# java - Java MappedByteBuffer.isLoaded()

> ID：15112448
> 
> 赞同：6
> 
> 时间：2013-02-27T12:43:30.080
> 
> 标签：java, nio, bytebuffer

在我看来，[MappedByteBuffer.isLoaded()](http://docs.oracle.com/javase/7/docs/api/java/nio/MappedByteBuffer.html#isLoaded%28%29 "sdffff")始终`false`在 Windows 上返回。当我在 BSD Unix 上进行测试时，我`true`使用了相同的测试数据。

我应该担心吗？`isLoaded()`无论我使用什么大小的数据，我基本上都无法在 Windows 上返回 true。

这是我的测试代码供参考：

```
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.RandomAccessFile;
import java.nio.MappedByteBuffer;
import java.nio.channels.FileChannel;
import java.util.logging.Level;
import java.util.logging.Logger;

public class MemMapTest {

    private static final String FILENAME = "mydata.dat";
    private static final int MB_1 = 1048576;  // one Mbyte
    private static final byte[] testData = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9};  // len = 10 bytes

    public static void main(String[] args) throws FileNotFoundException, IOException {

        // Create a 10 Mb dummy file and fill it with dummy data
        RandomAccessFile testFile = new RandomAccessFile(FILENAME, "rw");
        for (int i = 0; i < MB_1; i++) {
            testFile.write(testData);
        }

        MappedByteBuffer mapbuf = testFile.getChannel().map(FileChannel.MapMode.READ_WRITE, 0, MB_1 * 20).load();
        testFile.close();

        if (mapbuf.isLoaded()) {
            System.out.println("File is loaded in memory");
        } else {
            System.out.println("File is NOT loaded in memory");
        }
    }
} 
```

我知道这`load()`只是一个提示，但我在这里使用的尺寸如此之小，我希望`isLoaded()`在某个时候返回 true。如前所述，这似乎与 Windows 操作系统有关。这基本上意味着`isLoaded()`绝对没有用。

也许我应该补充一点，`MappedByteBuffer`即使`isLoaded()`总是返回 false，我在 Windows 上的工作也绝对正常且性能出色。所以当它说它没有加载时，我真的不相信它。

使用 Oracle Java 7 update 9 在 Windows 7 上测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T16:01:32.210

不，你不应该担心。

根据[http://docs.oracle.com/javase/7/docs/api/java/nio/MappedByteBuffer.html](http://docs.oracle.com/javase/7/docs/api/java/nio/MappedByteBuffer.html)，行为依赖于“底层操作系统”的实现。

“返回值 false 并不一定意味着缓冲区的内容不驻留在物理内存中。”

# java - Java 小程序警报

> ID：15112449
> 
> 赞同：1
> 
> 时间：2013-02-27T12:43:31.803
> 
> 标签：java, security, active-directory, applet

我们在环境中面临着一个奇怪的问题。我们环境中的用户正在尝试访问需要 Java 小程序才能连接到某个网站的网站。

当我们尝试从未添加到我们的 Active Directory 域的 PC 中打开相同的内容时，一切正常，但是当我们尝试从域 PC 中打开相同的内容时，它要求连接并给出以下消息。用户必须多次单击允许，然后它才能工作。我们尝试了一些活动，但没有任何帮助。

*   检查了所有域策略，但没有发现任何与 IE 或 Java 相关的内容
*   在 AD 中创建单独的 OU 并阻止所有策略应用
*   比较工作正常的 PC 和出错的 PC 之间的 IE 设置和 Java 设置，发现都一样。

我无法理解问题的原因。

## 错误详情：

```
APPLET ALERT
The applet is attempting to connect to Web site
Allow | Disallow | Stop Applet 
```

# java - 调整 JPanel 以正确大小

> ID：15112450
> 
> 赞同：0
> 
> 时间：2013-02-27T12:43:33.217
> 
> 标签：java, swing, jtable, jpanel, preferredsize

我有这种格式的代码，但是 jpanels 没有听我设置的大小。当我运行代码时，所有三个面板的大小都相同。有没有办法调整它们？

```
JPanel mainpanel = new JPanel(mainPanel,BoxLayout.Y_AXIS);
JPanel tablepanel1 = new JPanel();
tablepanel1.setSize(900,400);
JPanel selectionpanel = new JPanel(new GridBagLayout());
selectionpanel.setSize(900,100);
JPanel tablepanel2 = new JPanel();
tablepanel2.setSize(900,400);

mainpanel.add(tablepanel1);
mainpanel.add(selectionpanel);
mainpanel.add(tablepanel2);

frame.add(mainpanel);
frame.setSize(900,900); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:55:00.993

您的意思是`BoxLayout`用于`mainpanel`？：

```
JPanel mainpanel = new JPanel();
mainpanel.setLayout(new BoxLayout(mainpanel, BoxLayout.Y_AXIS)); 
```

这个布局管理器只监听*首选尺寸*而不是组件尺寸。最好的方法是覆盖`getPreferredSize`：

```
JPanel selectionpanel = new JPanel() {
    @Override
    public Dimension getPreferredSize() {
        return new Dimension(900, 400);
    }
}; 
```

也更好地使用`JFrame#pack`而不是设置框架的尺寸。

# sql-server - 限制 SSIS 中的输出平面文件大小

> ID：15112453
> 
> 赞同：1
> 
> 时间：2013-02-27T12:43:44.307
> 
> 标签：sql-server, ssis

我正在使用平面文件目标将我的数据导出到文本文件。我需要将输出文件大小限制为 1 MB。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:58:59.300

在 SSIS 中没有任何开箱即用的东西可以做到这一点。但是，编写一个可以充当数据流目标并限制其输出文件大小的脚本转换相对简单。**根据需要添加一些代码来创建多个**文件（每个文件都小于指定的大小）来存储所有结果数据并不难。

例如，假设您的源查询是

```
SELECT 
    TABLE_CATALOG,
    TABLE_SCHEMA,
    TABLE_NAME,
    COLUMN_NAME,
    ORDINAL_POSITION,
    COLUMN_DEFAULT,
    IS_NULLABLE,
    DATA_TYPE,
    CHARACTER_MAXIMUM_LENGTH 
FROM INFORMATION_SCHEMA.COLUMNS 
```

并且您正在尝试将其写入一个或多个 CSV 文件，而不超过每个文件的特定大小。

定义三个包级变量如下：

*   User::TargetFolder（`String`包含您要写入的文件夹名称）
*   User::TargetFileNamePattern（`String`带有输出文件的命名模式；例如`SampleOutput{0}.csv`）
*   User::MaxFileLength（`Int32`包含每个文件的最大字符数）

像这样创建数据流：

![数据流截图](../Images/fd903c277fd4f5c52103a057157e4e17.png)

并因此对脚本转换进行编码：

```
/* Microsoft SQL Server Integration Services Script Component
*  Write scripts using Microsoft Visual C# 2008.
*  ScriptMain is the entry point class of the script.*/

using System;
using System.Data;
using System.IO;
using System.Text;
using Microsoft.SqlServer.Dts.Pipeline.Wrapper;
using Microsoft.SqlServer.Dts.Runtime.Wrapper;

[Microsoft.SqlServer.Dts.Pipeline.SSISScriptComponentEntryPointAttribute]
public class ScriptMain : UserComponent
{
    private int _fileCounter;
    private int _bytesWritten;
    private TextWriter _tw;

    private TextWriter CurrentWriter
    {
        get
        {
            if (_tw == null)
            {
                string fileName = String.Format(this.Variables.TargetFileNamePattern, _fileCounter);
                string filePath = Path.Combine(this.Variables.TargetFolder, fileName);
                _tw = File.CreateText(filePath);
            }
            return _tw;
        }
    }

    public override void PreExecute()
    {
        base.PreExecute();
        _fileCounter = 1;
        _bytesWritten = 0;
        _tw = null;
    }

    public override void PostExecute()
    {
        base.PostExecute();
        if (_tw != null)
        {
            _tw.Flush();
            _tw.Close();
        }
    }

    public override void Input0_ProcessInputRow(Input0Buffer Row)
    {
        string thisLine = String.Format(
                "{0},{1},{2},{3},{4},{5},{6},{7},{8}",
                Row.TABLECATALOG,
                Row.TABLESCHEMA,
                Row.TABLENAME,
                Row.COLUMNNAME,
                Row.ORDINALPOSITION,
                Row.COLUMNDEFAULT_IsNull ? "NULL" : Row.COLUMNDEFAULT,
                Row.ISNULLABLE,
                Row.DATATYPE,
                Row.CHARACTERMAXIMUMLENGTH_IsNull ? "NULL" : Row.CHARACTERMAXIMUMLENGTH.ToString());
        if (_bytesWritten + thisLine.Length > this.Variables.MaxFileLength) 
        {
            _tw.Flush();
            _tw.Close();
            _tw = null;
            _fileCounter += 1;
            _bytesWritten = 0;
        }
        this.CurrentWriter.WriteLine(thisLine);
        _bytesWritten += thisLine.Length;
    }
} 
```

对于源查询中的每一行，这将构建要写入的字符串，然后检查将该字符串添加到当前`TextWriter`是否会导致文件太大。如果是这种情况，则将当前文件刷新到磁盘并关闭；下一次调用将按顺序为下一个文件`this.CurrentWriter`创建一个新对象。`TextWriter`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:18:26.433

如果数据将超过文件大小，您必须决定要省略哪些数据。这是只有您或您的客户才能决定的事情。

然后编写查询以仅返回所需的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T16:48:40.953

一些想法：

使用脚本转换，您将生成具有逻辑“获取下一行”方法的生成类 - 在该类上添加一个计数器，并在每一行上计算出该行数据的大小并添加它到柜台。如果计数器的行数超过 1mb，则不要将该行放入输出缓冲区。

在控制流上使用脚本组件，调用 .Net IO 方法来读取文件的 1mb 并只写回（这确实意味着您正在创建一个大文件然后缩小它）。

真的，SSIS 不会做好这两件事。如果是我，我会采用“SELECT TOP X”方法。

# shell - Bash：在字符串中搜索特定的特殊字符

> ID：15112454
> 
> 赞同：3
> 
> 时间：2013-02-27T12:43:48.353
> 
> 标签：shell

我想检查特殊字符 * 是否存在于我的字符串中。例如，我已经看过但都提到过`[^[A..za..z0..9]]..`，但这会给你字符串中的所有特殊字符，但不完全是你正在寻找的字符。因此，如果我的字符串包含`* or [:space:]*`或后面的任何字符，`* (and not /* or */)`则结果应该为真，否则为假。

```
Ex: 
Uint_8* A
Uint_16 * A
ABC * C    /*blablabla*/
ABC* C .. Should return true  
but 
Uint_8 A       /*blabla*/ ..... should return false 
```

你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:01:00.110

您需要的正则表达式是`[^/]\*[^/]`：

例如，如果您的字符串存储在变量中：

```
$ var='Uint_8 A       /*blabla*/'
$ [[ $var =~ [^/]\*[^/] ]] && echo true || echo false
false 
```

从`grep`文件匹配：

```
$ grep "[^/]\*[^/]" file
Uint_8* A
Uint_16 * A
ABC * C    /*blablabla*/
ABC* C .. Should return true 
```

# c# - 后台工作人员正在更新 UI 线程中的模型而没有问题

> ID：15112455
> 
> 赞同：0
> 
> 时间：2013-02-27T12:43:48.307
> 
> 标签：c#, .net, wpf, multithreading, backgroundworker

我正在使用 BackgroundWorker 并且我实现了 ProgressChanged 方法，该方法使我可以将 e.UserState 传递给我的 UI，它可以正常工作。

作为一个实验，我更改了我的 DoWork 方法以在绑定到 UI ListView 的同一模型上工作（这是一个可观察的集合）

当我这样做时 UI 会更新，我想知道为什么它在经过多次测试后能够完美地做到这一点？

我回到使用 e.UserState 对象，但我想知道这是否是正常行为以及潜在的问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:55:16.440

您当然可以毫无问题地从后台线程更改*模型的属性；*绑定引擎将确定需要对 UI 元素进行哪些更改，并在调度程序线程中调用这些更改¹。这是正常的，不会导致问题。

您不能（也永远不能）做的是直接从同一个后台线程更改 UI 元素的属性。

* * *

¹这一直是可能的，事实上它不可能是任何其他方式。考虑某些代码（例如模型）需要更改另一个模型的属性。此代码肯定无法知道该属性已绑定到任何控件，更不用说绑定到哪个控件了。因此，每次将属性更改编组到适当的 UI 线程不仅不方便，而且非常困难。

# c# - C# NullReferenceException 未处理 - 对象引用未设置为对象的实例

> ID：15112456
> 
> 赞同：1
> 
> 时间：2013-02-27T12:43:48.543
> 
> 标签：c#, exception, reference, null, unhandled

我正在尝试使用 C# 中的 Windows 窗体创建应用程序，但是我不断收到错误消息：

> NullReferenceException 未处理 - 对象引用未设置为对象的实例

它指向包含此代码的行：

```
carBootSaleList.AddCarBootSale(newCarBootSale); 
```

我在表单界面上的方法：

```
 CarBootSaleList carBootSaleList;

  public void AddCarBootSale()
    {
        AddNewCarBootSale addForm = new AddNewCarBootSale();
        if (addForm.ShowDialog() == DialogResult.OK)
        {
            CarBootSale newCarBootSale = addForm.GetCarBootSaleData();

            carBootSaleList.AddCarBootSale(newCarBootSale);

            txtCarBootSale.Clear();
            txtCarBootSale.Text = newCarBootSale.Display();
        }
    } 
```

CarBootSaleList 类：

```
public class CarBootSaleList : IDisplay
{

    private List<CarBootSale> carbootsales;

    public CarBootSaleList()
    {
        carbootsales = new List<CarBootSale>();
    }

    public bool AddCarBootSale(CarBootSale carbootsale)
    {
        bool success = true;
        foreach (CarBootSale cbs in carbootsales)
        {
            if (cbs.ID == carbootsale.ID)
            {
                success = false;
            }
        }
        if (success)
        {
            carbootsales.Add(carbootsale);
        }
        return success;
    }

    public int GetListSize()
    {
        return carbootsales.Count();
    }

    //public CarBootSale FindCarBootSale(string cbsID)
    //{
    //    CarBootSale carbootsale = null;
    //    foreach (CarBootSale cbs in carbootsale)
    //    {
    //        if (cbs.ID == cbsID)
    //        {
    //            carbootsale = cbs;
    //        }
    //    }
    //    return carbootsale;
    //}

    public List<CarBootSale> ReturnList()
    {
        return carbootsales;
    }

    public string Display()
    {
        string msg = "";

        foreach (CarBootSale cbs in carbootsales)
        {
            msg += String.Format("{0}  {1}", cbs.ID, cbs.Location, cbs.Date);
            msg += Environment.NewLine;
        }
        return msg;
    }
} 
```

CarBootSale 类：

```
public class CarBootSale : IDisplay
{

    public string ID { get; set; }
    public string Date { get; set; }
    public string Location { get; set; }
    public double PitchCost { get; set; }
    public int Capacity { get; set; }
    public string Charity { get; set; }
    public string CharityName { get; set; }
    public string Catering { get; set; }

    public CarBootSale(string id, string date, string location, double pitchcost, int capacity, string charity, string charityname, string catering)
    {
        ID = id;
        Date = date;
        Location = location;
        PitchCost = pitchcost;
        Capacity = capacity;
        Charity = charity;
        CharityName = charityname;
        Catering = catering;
    }

    public CarBootSale() { }

    public override string ToString()
    {
        return String.Format("{0}  {1}", ID, Date, Location);
    }

    public string Display()
    {
        string msg;
        string CR = Environment.NewLine;

        msg = String.Format("ID: {0} {1}", ID, CR);
        msg += String.Format(" Date: {0} {1}", Date, CR);
        msg += String.Format(" Location: {0} {1}", Location, CR);
        msg += String.Format(" Pitch Cost: {0} {1}", PitchCost, CR);
        msg += String.Format(" Capacity: {0} {1}", Capacity, CR);
        msg += String.Format(" Charity: {0} {1}", Charity, CR);
        msg += String.Format(" CharityName: {0} {1}", CharityName, CR);
        msg += String.Format(" Catering: {0} {1}", Catering, CR);

        return msg;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T12:46:01.867

您尚未`carBootSaleList`在任何地方的代码中进行初始化。

您可以在方法中或使用声明来实例化它。

```
CarBootSaleList carBootSaleList = new CarBootSaleList(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T12:46:17.623

该变量`carBootSaleList`未初始化，因此为`null`.

尝试更换

```
CarBootSaleList carBootSaleList; 
```

和

```
CarBootSaleList carBootSaleList = new CarBootSaleList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T12:46:42.310

您尚未初始化 carBootSaleList。

```
CarBootSaleList carBootSaleList = new carBootSaleList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T12:46:10.563

carBootSaleList 为空。

在某处，输入：

```
 carBootSaleList = new CarBootSaleList(); 
```

# flash - 将看起来只有一帧的 Flash 影片转换为 AVI

> ID：15112458
> 
> 赞同：0
> 
> 时间：2013-02-27T12:44:10.847
> 
> 标签：flash, avi, flash-cs6

我以前从未使用过 Flash，但收到了一个 FLA 文件，我想将其转换为 AVI 文件并上传到 Youtube。

在 Adob​​e Flash CS6 中打开文件时，时间轴中仅出现 1 帧。

我发现时间轴上的其中一个图层是影片剪辑。

如果我转到右侧窗格中的库，然后双击此项目，它会在时间轴中打开 360 帧长并由许多图层和文件夹组成。

有没有办法可以将它导出为 AVI 文件？

我尝试右键单击它并选择“转换为编译剪辑”，但这似乎没有提供任何 AVI 选项。

我也试过去文件>导出>导出电影并选择AVI，但是导出的电影只有1帧/秒长。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:48:53.340

ctrl+enter 在 cs6 中会给你一个输出 .swf。您可以使用格式工厂（视频转换软件）将 .swf 转换为 avi

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:39:04.440

在主时间线中，第一帧显示为带点的灰色框。选择第一帧并查看在主窗口中选择的区域。如果只有 1 个带有边界框的对象（很好），请在主窗口中用鼠标选择它们，然后在属性面板中将对象类型从 MovieClip 更改为 Graphics。然后将光标指向 360 帧并按 F5。现在尝试使用 File->Export->Export Movie 导出电影。

但是，如果该 MovieClip（现在是 Graphics）包含另一部电影，它们将只显示它们的第一帧。

[您也可以使用http://swftoaviconverter.org/](http://swftoaviconverter.org/)或任何屏幕录制软件从 SWF 编写 AVI （谷歌会提供帮助）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T02:33:18.500

我通常使用格式工厂来转换视频。你可以试试：[http ://betdownload.com/format-factory-8-download](http://betdownload.com/format-factory-8-download)

# java-me - 在 NetBeans 中为 J2ME 项目添加 Zxing Lib

> ID：15112459
> 
> 赞同：1
> 
> 时间：2013-02-27T12:44:11.407
> 
> 标签：java-me, zxing

我已经下载了 Zxing-1.7（已弃用，但想用它为 J2ME 项目开发）

谁能告诉我，如何将这个 Zxing-1.7 lib 添加到 J2ME 项目中。我正在使用 NetBeans IDE。

帮我。我对 J2ME 非常陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:06:13.497

据我在查看[http://code.google.com/p/zxing/](http://code.google.com/p/zxing/)时所见，没有可用的 lib 的 JavaME 版本。您不能期望 JavaSE 版本在 JavaME 项目中工作。因此，您必须先编辑源代码并创建 lib 的 JavaME 端口。

由于无论如何您都会这样做，因此您可能只想将源代码直接包含到您自己的项目中。但是，如果您坚持将其编译为库并将该库包含在您的项目中，请转到

项目属性 -> 库和资源

并单击“添加 Jar/Zip”。

# c# - 从文件中获取字符串转储

> ID：15112462
> 
> 赞同：1
> 
> 时间：2013-02-27T12:44:12.723
> 
> 标签：c#

很久以前，我记得使用一个实用程序从可执行文件中转储所有（ASCII/UTF8）字符串。我现在想知道如何在 C# 中实现它。

目前，我使用一个将字符串转储到文件的外部实用程序，然后从我的应用程序中读取该文件。我现在想用 C# 中的某种解析器替换外部实用程序。

转储字符串实用程序如何检测文件中的 UTF8 字符串，以及如何在 C# 中实现它？

# c++ - 通过创建局部变量来减少堆栈指针

> ID：15112466
> 
> 赞同：3
> 
> 时间：2013-02-27T12:44:28.660
> 
> 标签：c++, pointers, gdb, stack, disassembly

为了更好地理解二进制文件，我准备了一个小的 c++ 示例并使用 gdb 反汇编并查找机器代码。

函数调用`main()`函数：`func()`

```
int func(void)
{
    int a;
    int b;
    int c;
    int d;
    d = 4;
    c = 3;
    b = 2;
    a = 1;
    return 0;
} 
```

该项目使用 g++ 编译，保留调试信息。接下来使用gdb对源码进行反汇编。我得到的`func()`看起来像：

```
0x00000000004004cc <+0>:    push   %rbp
0x00000000004004cd <+1>:    mov    %rsp,%rbp
0x00000000004004d0 <+4>:    movl   $0x4,-0x10(%rbp)
0x00000000004004d7 <+11>:   movl   $0x3,-0xc(%rbp)
0x00000000004004de <+18>:   movl   $0x2,-0x8(%rbp)
0x00000000004004e5 <+25>:   movl   $0x1,-0x4(%rbp)
0x00000000004004ec <+32>:   mov    $0x0,%eax
0x00000000004004f1 <+37>:   pop    %rbp
0x00000000004004f2 <+38>:   retq 
```

现在我的问题是我希望堆栈指针应该移动 16 个字节到相对于基指针的较低地址，因为每个整数值需要 4 个字节。但看起来这些值是在不移动堆栈指针的情况下放入堆栈的。

我没有正确理解什么？这是编译器的问题还是汇编器省略了一些行？

最好的问候，
没有

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T12:46:49.880

你的编译器绝对没有问题。编译器可以自由选择如何编译你的代码，并且它选择不修改堆栈指针。它没有必要这样做，因为您的函数不调用任何其他函数。如果它确实调用了另一个函数，那么它需要创建另一个堆栈帧，以便被调用者不会踩到调用者的堆栈帧。

作为一般规则，您应该避免尝试对编译器将如何编译您的代码做出任何假设。例如，你的编译器可以完全自由地优化掉你的函数体。

# hibernate - 如何从 doWork() 方法获得回报

> ID：15112470
> 
> 赞同：6
> 
> 时间：2013-02-27T12:44:42.000
> 
> 标签：hibernate

这是我在下面给出的 dowork() 代码我无法获得返回计数有没有办法从这个方法中获得返回并且 doreturnwork() 对此不起作用请帮助我尝试它但是没有像 doreturnwork 这样的方法请帮忙

```
sessionFactory.getCurrentSession().doWork(  

            new Work()
            {   
                public void execute(Connection connection) throws SQLException   
                {
                    String contactQueryCounts = "";
                    String contactQueryIds = "";
                    int index = 1;
                    StringBuilder builder = new StringBuilder();
                    CustomerUser user = (CustomerUser) userService.getLoggedInUser();
                    String inClause = "";
                    for (Long id :ids ) {
                        builder.append("?,");
                    }
                    if(builder.length()>0){
                        inClause = builder.substring(0, builder.length()-1);
                    }

                    if(inClause.length()>0){
                        contactQueryCounts= "select count(id) from ( select *,@num := if(@company_id = company_id, @num + 1, 1) as row_number," +
                        "@company_id := company_id as dummy from salebuild_ctl.company_contact where id in ("+inClause+") " +
                        " order by company_id,  date_created asc  ) as x where x.row_number <= ?";

                        contactQueryIds= "select id from ( select *,@num := if(@company_id = company_id, @num + 1, 1) as row_number," +
                        "@company_id := company_id as dummy from salebuild_ctl.company_contact where id in ("+inClause+") " +
                        " order by company_id,  date_created asc  ) as x where x.row_number <= ?";
                    }else{
                        contactQueryCounts= "select count(id) from ( select *,@num := if(@company_id = company_id, @num + 1, 1) as row_number," +
                        "@company_id := company_id as dummy from salebuild_ctl.company_contact  " +
                        " order by company_id,  date_created asc  ) as x where x.row_number <= ?";

                        contactQueryIds= "select id from ( select *,@num := if(@company_id = company_id, @num + 1, 1) as row_number," +
                        "@company_id := company_id as dummy from salebuild_ctl.company_contact  " +
                        " order by company_id,  date_created asc  ) as x where x.row_number <= ?";
                    }

                    java.sql.PreparedStatement sCount;
                    java.sql.PreparedStatement sIds;
                    try {
                        sCount = connection.prepareStatement(contactQueryCounts);
                        sIds = connection.prepareStatement(contactQueryIds);
                        for(Long id : ids){
                            sCount.setLong(index, id);
                            sIds.setLong(index, id);
                            index=index+1;
                        }
                        sCount.setInt(index,user.getAccount().getCurrentSubscription().getNumberofcontactspercompany());
                        sIds.setInt(index,user.getAccount().getCurrentSubscription().getNumberofcontactspercompany());
                        ResultSet rs  =  sCount.executeQuery();
                        int c = rs.getInt(1);

                        String contactLevelCountsQuery="select c.name,count(a.id) from company_contact a left join  " +
                        "title b on a.corporate_title_id=b.id left join title_level c on b.title_level_id=c.id where a.id  in" +
                        " ("+sIds.toString()+") and c.name is not null group by c.name";

                        java.sql.Statement s = connection.createStatement();
                        ResultSet rsIds = s.executeQuery(contactLevelCountsQuery);

                        SearchService.levelToContactCount.clear();

                        while (rsIds.next()) {
                            if(rsIds.getString(1) == null){
                                SearchService.levelToContactCount.put("No Level",rsIds.getInt(2));
                            }else{
                                SearchService.levelToContactCount.put(rsIds.getString(1),rsIds.getInt(2));
                            }
                        }
                    } catch (SQLException e) {
                        e.printStackTrace();
                    }
                    catch (Exception e) {
                        e.printStackTrace();
                    }
                }    
            }
    ); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-25T10:29:21.180

从 Hibernate4，您还可以使用 session.doReturningWork(ReturningWork work) 如下，

```
ReturningWork<Long> maxReturningWork = new ReturningWork<Long>() {

                @Override
                public Long execute(Connection connection) throws SQLException {
                    PreparedStatement preparedStatement = null;
                    ResultSet resultSet = null;
                    try {
                        preparedStatement = connection.prepareStatement("select max(salary) from employee");
                        resultSet = preparedStatement.executeQuery();
                        resultSet.next();
                        return resultSet.getLong(1);
                    }catch (SQLException e) {
                        throw e;
                    } finally {
                        if(preparedStatement != null) {
                            preparedStatement.close();
                        }
                        if(resultSet != null) {
                            resultSet.close();
                        }
                    }

                }
            };
            Long maxRecord = getSession().doReturningWork(maxReturningWork); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T12:56:09.897

初始化一个空的集合或持有者对象，并在`Work`实例中填充这个集合或持有者：

```
public List<Foo> searchFoos() {
    final List<Foo> result = new ArrayList<Foo>();
    sessionFactory.getCurrentSession().doWork(new Work() {
        public void execute(Connection connection) throws SQLException {
            // do some work
            result.add(foo1);
            // do some work
            result.add(foo2);
        }
    });
    return result;
} 
```

甚至更简洁，创建一个命名的 Work 子类：

```
private static class FooWork implements Work {
    private Foo result;

    public void execute(Connection connection) throws SQLException {
        // do some work
        result = new Foo(...);
    }

    public Foo getResult() {
        return result;
    }
}

public Foo searchFoo() {
    FooWork fooWork = new FooWork();        
    sessionFactory.getCurrentSession().doWork(fooWork);
    return fooWork.getResult();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T08:22:03.470

可能您想在 Hibernate中使用另一种称为[doReturningWork的方法。](https://docs.jboss.org/hibernate/orm/4.0/javadocs/org/hibernate/Session.html#doReturningWork(org.hibernate.jdbc.ReturningWork))也许你可以看看[这个博客](http://keyurj.blogspot.com/2012/12/dowork-in-hibernate.html)

# php - PHP MYSQL 查询验证

> ID：15112474
> 
> 赞同：-6
> 
> 时间：2013-02-27T12:44:52.483
> 
> 标签：php, validation

我的程序有什么问题？我似乎无法使用“找不到单词”？：/

```
echo "<form action='#' method='post'>";
echo "Search word here: <input type='text' name='search'>";
echo "<input type='submit' name='searchword' value='Search'>";
echo "</form>";
if(isset($_POST['searchword'])){
    $word = $_POST['search'];
    $result = mysql_query("SELECT * FROM positivethesaurus where word like '%$word%'");
    while($row = mysql_fetch_array($result)){   
    echo $row['word']."<br>";
    }
    if($row = mysql_fetch_array(!$result)){
        echo "word not found";
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T12:48:50.343

我认为您将值分配给`$word`错误的字段名

```
$word = $_POST['search']; 
```

它应该是

```
$word = $_POST['searchword']; 
```

我只是在猜测，因为您正在检查它是否设置了此字段名称。

我希望它对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:47:55.100

您的发布值是错误的。改成，

```
$word = $_POST['searchword']; 
```

从，

```
$word = $_POST['search']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T12:47:38.470

word 可能是保留词，试试这个

```
"SELECT * FROM positivethesaurus where `word` like '%$word%'" 
```

# android - Android：如何永久修改 ListView 的子项（视图）-滚动后颜色丢失

> ID：15112475
> 
> 赞同：1
> 
> 时间：2013-02-27T12:45:00.040
> 
> 标签：android, listview, scroll, adapter

```
list.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {

        View v = parent.getChildAt(position);
        TextView fileName = (TextView) v.findViewById(R.id.file_name);
        fileName.setTextColor(Color.BLUE);

    }
}); 
```

OnItemClick()，我将项目元素的文本颜色设置为蓝色（文件名）。

滚动此列表视图后，新颜色（蓝色）丢失（重置为其默认颜色）

为什么？我是否必须以某种方式更改与 ListView 关联的适配器？

编辑：FileListAdapter（用于填充 ListView）

```
package com.landa.adapter;
import java.io.File;

public class FileListAdapter extends BaseAdapter {
    private final Context context;
private final File[] data; 

public FileListAdapter(Context context, File[] values) {
    this.context = context;
    this.data = values;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View rowView = inflater.inflate(R.layout.list_row, parent, false);

    File f = data[position];

    TextView textView = (TextView) rowView.findViewById(R.id.file_name);
    TextView fullPath = (TextView) rowView.findViewById(R.id.full_path);
    ImageView imageView = (ImageView) rowView.findViewById(R.id.file_image);

    textView.setText(f.getName());
    fullPath.setText(f.getAbsolutePath());
    imageView.setImageResource(
            BrowseHandler.getFileIconResourceId(f.getAbsolutePath()));

    return rowView;

}

public int getCount() {
    return data.length;
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:54:07.270

是的，您需要更换适配器；准确地说，您必须通过扩展 ArrayAdapter 创建一个自定义的。

特别是您必须覆盖`getView(int position, View convertView, ViewGroup parent)`以将已单击的项目显示为蓝色。

相当简单，[本教程可能会有所帮助](http://devtut.wordpress.com/2011/06/09/custom-arrayadapter-for-a-listview-android/)，否则请询问。

**编辑 编辑 编辑**

试试这种方式，如果它是你想要的：

```
public int flag=-1;//CREATE A FLAG TO STORE THE POSITION OF THE ITEM CLICKED

//Other stuff...
//...

list.setOnItemClickListener(new OnItemClickListener() {
public void onItemClick(AdapterView<?> parent, View view,
        int position, long id) {

    View v = parent.getChildAt(position);
    TextView fileName = (TextView) v.findViewById(R.id.file_name);
    fileName.setTextColor(Color.BLUE);
    flag=position;//WHIT THIS YOU KEEP TRACK OF THE ITEM THAT WAS CLICKED

}
}); 

//Other stuff...
//...

 @Override
 public View getView(int position, View convertView, ViewGroup parent) {

LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

View rowView = inflater.inflate(R.layout.list_row, parent, false);

File f = data[position];

TextView textView = (TextView) rowView.findViewById(R.id.file_name);
TextView fullPath = (TextView) rowView.findViewById(R.id.full_path);
ImageView imageView = (ImageView) rowView.findViewById(R.id.file_image);

//NOW YOU CHECK IF THAT POSTION WAS THE ONE CLICKED, IT SETS THE COLOR BLUE
if(position==flag) textView.setTextColor(Color.BLUE);

textView.setText(f.getName());
fullPath.setText(f.getAbsolutePath());
imageView.setImageResource(
        BrowseHandler.getFileIconResourceId(f.getAbsolutePath()));

return rowView;

} 
```

所以基本上你使用：

`public int flag=-1;`

`flag=position;`

`if(position==flag) textView.setTextColor(Color.BLUE);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:48:35.537

您不应该更改其中的文本颜色-您应该将适配器中的该项目标记为已单击-您如何做到这一点取决于您`TextView`。`onClick`

将项目标记为已单击后，您可以通知`ListView`数据已更改并且它将刷新列表 - 在此期间您`Adapter`可以检查新的单击状态并`ListView`适当更改颜色。

# c++ - 如果这个函数放在一个通用库中会导致什么错误？

> ID：15112477
> 
> 赞同：-4
> 
> 时间：2013-02-27T12:45:10.423
> 
> 标签：c++, c, data-structures

```
int foo(char *p)
{
static int i = 0; 
if (*p == '\0') return i;
i++;
return foo(p+1);
} 
```

如果将此函数放在通用库中会出现什么问题。如何修改代码来回避问题？如果将此代码放在通用库中，它将返回正确的字符串长度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:47:44.667

一个问题是状态在调用之间持续存在：

```
foo("hello");
foo("world"); 
```

第二次调用将返回不正确的结果，因为`i`未重置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T12:48:24.620

如果您连续两次调用它，`i`将不会是您所期望的。这是因为它是在启动时初始化的，并在调用中保留其先前的值。

此外，它不适用于线程，递归的想法最好在“搜索空间”快速减少时使用，例如在每个递归级别将空间减半的二进制搜索。

使用递归逐个字符处理字符串是一个愚蠢的想法，因为您一次只能将搜索空间减少一个字符。

# oauth - Oauth 1：在获得请求令牌之前，我应该为 HMAC-SHA1 方法中的令牌秘密使用什么值？

> ID：15112479
> 
> 赞同：0
> 
> 时间：2013-02-27T12:45:26.883
> 
> 标签：oauth

HMAC-SHA1 签名方法需要一个由客户端共享密钥“&”和令牌共享密钥连接形成的密钥。

我想知道当客户端仍然没有请求或访问令牌时，我应该为令牌共享密钥使用哪个值：客户端再次共享密钥或将其留空。

从规范：

> 3.4.2\. HMAC-SHA1
> 
> “HMAC-SHA1”签名方法使用 [RFC2104] 中定义的 HMAC-SHA1 签名算法：
> 
> ```
>  digest = HMAC-SHA1 (key, text) 
> ```
> 
> HMAC-SHA1 函数变量的使用方式如下：
> 
> text 设置为第 3.4.1.1 节中的签名基本字符串的值。
> 
> key 设置为以下的连接值：
> 
> ```
>  1\.  The client shared-secret, after being encoded
>           (Section 3.6).
>       2\.  An "&" character (ASCII code 38), which MUST be included
>           even when either secret is empty.
>       3\.  The token shared-secret, after being encoded
>           (Section 3.6). 
> ```
> 
> 摘要用于设置“oauth_signature”协议参数的值，根据 [RFC2045] 第 6.8 节的结果八位字节字符串进行 base64 编码。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:45:34.700

当令牌共享密钥不可用时，密钥应设置为客户端共享密钥加上“&”字符。

# iphone - 横向/纵向大小不同 iOS

> ID：15112487
> 
> 赞同：0
> 
> 时间：2013-02-27T12:45:47.920
> 
> 标签：iphone, ios, landscape, landscape-portrait

我有五个`UIButton`，我需要将框架设置为`UIButton` 适合不同尺寸的框架。但是从下面的代码中，它的加载很好，但问题是加载堆栈后，当我移动到to 或 to时，它应该根据我设置的大小进行更改..但这没有发生......它已经重叠之前的按钮已经创建..我需要进行哪些更改，以便在更改视图时..按钮应该正确..不应该重叠。`Landscape``portrait``viewDidLoad``Landscape``portrait``portrait``Landscape``viewdidload`

```
-(void)viewDidLoad{
 int Height = 200;
    int Yposition = 20;
    for (int k=0; k<5; k++)
    {
 if ([UIApplication sharedApplication].statusBarOrientation== UIInterfaceOrientationLandscapeLeft || [UIApplication sharedApplication].statusBarOrientation  == UIInterfaceOrientationLandscapeRight) {

        UIButton *loPlayButton=[UIButton buttonWithType:UIButtonTypeCustom];
        [loPlayButton addTarget:self action:@selector(PlayButtonAction:) forControlEvents:UIControlEventTouchUpInside];
            //   loPlayButton.tag  = 100+k;
        NSLog(@"tag is %i",loPlayButton.tag);
        loPlayButton.alpha = 1.0;

        UIImage *image=[UIImage imageNamed:@"vid.png"];
        [loPlayButton setBackgroundImage:image forState:UIControlStateNormal];
        loPlayButton.frame=CGRectMake(520, Yposition +(k*Height +170), image.size.width, 30);
        // loPlayButton.tag=3;

        [mScrollView_por addSubview:loPlayButton];
        [mPlayButtonsArray addObject:loPlayButton];
             }

        if ([UIDevice currentDevice].orientation==UIInterfaceOrientationPortrait || [UIDevice currentDevice].orientation == UIInterfaceOrientationPortraitUpsideDown) {

            UIButton *loPlayButton=[UIButton buttonWithType:UIButtonTypeCustom];
            [loPlayButton addTarget:self action:@selector(PlayButtonAction:) forControlEvents:UIControlEventTouchUpInside];
                //   loPlayButton.tag  = 100+k;
            NSLog(@"tag is %i",loPlayButton.tag);
            loPlayButton.alpha = 1.0;

            UIImage *image=[UIImage imageNamed:@"vid.png"];
            [loPlayButton setBackgroundImage:image forState:UIControlStateNormal];
            loPlayButton.frame=CGRectMake(440, Yposition +(k*Height +170), image.size.width, 30);
                // loPlayButton.tag=3;

            [mScrollView_por addSubview:loPlayButton];
            [mPlayButtonsArray addObject:loPlayButton];

        }}}

- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {

 [self viewDidLoad];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:54:59.770

Mate 在单独的方法中添加您的旋转代码，并从 viewDidLoad 调用它，并在它改变方向时调用它。就像下面的代码：

```
-(void)viewDidLoad{
    [self rotateTheView];
}

- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation     duration:(NSTimeInterval)duration {

     [self rotateTheView];
}

- (void) rotateTheView{
    int Height = 200;
    int Yposition = 20;
    for (int k=0; k<5; k++)
    {
      if ([UIApplication sharedApplication].statusBarOrientation== UIInterfaceOrientationLandscapeLeft || [UIApplication sharedApplication].statusBarOrientation  == UIInterfaceOrientationLandscapeRight) {

          UIButton *loPlayButton=[UIButton buttonWithType:UIButtonTypeCustom];
          [loPlayButton addTarget:self action:@selector(PlayButtonAction:)        forControlEvents:UIControlEventTouchUpInside];
          //   loPlayButton.tag  = 100+k;
          NSLog(@"tag is %i",loPlayButton.tag);
          loPlayButton.alpha = 1.0;

         UIImage *image=[UIImage imageNamed:@"vid.png"];
        [loPlayButton setBackgroundImage:image forState:UIControlStateNormal];
         loPlayButton.frame=CGRectMake(520, Yposition +(k*Height +170), image.size.width, 30);
        // loPlayButton.tag=3;

        [mScrollView_por addSubview:loPlayButton];
        [mPlayButtonsArray addObject:loPlayButton];
    }

    if ([UIDevice currentDevice].orientation==UIInterfaceOrientationPortrait || [UIDevice currentDevice].orientation == UIInterfaceOrientationPortraitUpsideDown) {

        UIButton *loPlayButton=[UIButton buttonWithType:UIButtonTypeCustom];
        [loPlayButton addTarget:self action:@selector(PlayButtonAction:) forControlEvents:UIControlEventTouchUpInside];
            //   loPlayButton.tag  = 100+k;
        NSLog(@"tag is %i",loPlayButton.tag);
        loPlayButton.alpha = 1.0;

        UIImage *image=[UIImage imageNamed:@"vid.png"];
        [loPlayButton setBackgroundImage:image forState:UIControlStateNormal];
        loPlayButton.frame=CGRectMake(440, Yposition +(k*Height +170), image.size.width, 30);
            // loPlayButton.tag=3;

        [mScrollView_por addSubview:loPlayButton];
        [mPlayButtonsArray addObject:loPlayButton];

    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:56:44.493

```
- (void)viewWillAppear:(BOOL)animated
{
    UIInterfaceOrientation statusBarOrientation = [[UIApplication sharedApplication] statusBarOrientation];
    if(UIInterfaceOrientationIsPortrait(statusBarOrientation))
    {
        [self ArrangeControllsFor_Protrate];
    }
    else
    {
        [self ArrangeControllsFor_LandScape];
    }
}
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations

    switch (interfaceOrientation) {

        case UIInterfaceOrientationPortrait:
        case UIInterfaceOrientationPortraitUpsideDown:
            //[self ArrangeControllsFor_Protrate];
            [self performSelector:@selector(ArrangeControllsFor_Protrate) withObject:Nil afterDelay:0.005f];
            return YES;
            break;
        case UIInterfaceOrientationLandscapeLeft:
        case UIInterfaceOrientationLandscapeRight:
            [self performSelector:@selector(ArrangeControllsFor_LandScape) withObject:Nil afterDelay:0.005f];
            return YES;
            break;
    }
}
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration{
    //switch ([UIApplication sharedApplication].statusBarOrientation) {
    switch (toInterfaceOrientation) {

        case UIInterfaceOrientationPortrait:
        case UIInterfaceOrientationPortraitUpsideDown:
            //[self ArrangeControllsFor_Protrate];
            [self performSelector:@selector(ArrangeControllsFor_Protrate) withObject:Nil afterDelay:0.005f];
            break;
        case UIInterfaceOrientationLandscapeLeft:
        case UIInterfaceOrientationLandscapeRight:
            [self performSelector:@selector(ArrangeControllsFor_LandScape) withObject:Nil afterDelay:0.005f];
            break;
    }
}
-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
}
-(BOOL)shouldAutorotate
{
    return YES;
}
-(void)ArrangeControllsFor_Protrate
{set frames here.
}
-(void)ArrangeControllsFor_LandScape
{set frames here.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T12:55:36.243

您不应该手动调用**viewDidLoad 。**不要那样做。

```
 -(void)viewWillAppear:(BOOL)animated
 {

  [self resetFrame:[[UIApplication sharedApplication]statusBarOrientation]]; 

}

  - (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
 {
  [self resetFrame:toInterfaceOrientation];
 }

- (void) resetFrame: (UIInterfaceOrientation)orientation
{

if (UIInterfaceOrientationIsPortrait(orientation))
{
   // For portrait

}
else
{

    // for landscape

}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T13:03:00.487

首先，您需要在从滚动中添加新的 5 UIButton 之前删除所有 UIButton。

```
for (UIView *button in mScrollView_por.subviews) {
    if([button isKindOfClass:[UIButton class]]) {
        [button removeFromSuperview];
    }
} 
```

# c# - 从单独进程中的插件获取 WPF 应用程序中的 TextBox 焦点

> ID：15112495
> 
> 赞同：2
> 
> 时间：2013-02-27T12:46:14.200
> 
> 标签：c#, wpf, c#-4.0, system.addin

我们正在使用 System.AddIn 结构来创建用于托管应用程序的应用程序。我们想要的是连接到 TextBox 在这些单独的应用程序中获得焦点的事件。

我们怎么能做到这一点？

我知道这些流程，所以我可以访问这些流程，也许可以收听消息泵？但是怎么做？要侦听哪些消息以及如何确定获得焦点的控件是否实际上是 TextBox（WPF 类型）？

希望得到您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:02:31.297

我认为你不能以“开箱即用”的方式做到这一点。

一个解决方案可以是创建一个由所有 wpf 进程公开的双工 WCF 服务。

然后客户端可以连接到服务并使用 Register 方法来监听事件。

然后，服务实现会将事件分派给注册的客户端。这需要一些时间，但我认为这是唯一的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:05:19.593

目前，我们正在研究使用 EventManager.RegisterClassHandler 方法在单独的 appdomain 中注册并为每个开发人员处理适配器中的实现的可能性。

# xml - XSLT 用于对值进行分组和求和

> ID：15112496
> 
> 赞同：2
> 
> 时间：2013-02-27T12:46:15.773
> 
> 标签：xml, xslt, xslt-2.0

我是 XSLT 的新手，在完成结果时遇到了麻烦，我来到这里以防有人可以帮助我。

我有以下 XML：

```
<funds>
    <bags>
        <bag name="BAG_USD_MAIN" value="10.0" type="USD">
            <pockets>
                <pocket name="bank" value="7.5">
                <pocket name="award" value="2.5">
            </pockets>
         </bag>
        <bag name="BAG_USD_SAVINGS" value="290.75" type="USD">
            <pockets>
                <pocket name="bank" value="290.75">
            </pockets>
         </bag>
        <bag name="BAG_EUR_EXTRA" value="890.0" type="EUR">
            <pockets>
                <pocket name="bank" value="753.0">
                <pocket name="bank_eng" value="137.0">
            </pockets>
         </bag>
    </bags>
 </funds> 
```

我希望能够以这种方式对其进行改造：

```
<result>
    <total type="USD">375.0</total>
    <total type="EUR">890.0</total>
</result> 
```

XSLT 可以吗？

谢谢， 问候 TS

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T13:08:08.877

Because you are using **XSLT 2.0** you can use the <xsl:for-each-group> element to group elements by @type and then use sum() to sum the elements in the group.

The following stylesheet solves what you are trying to do:

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
    <xsl:output method="xml" encoding="UTF-8" indent="yes"/>

    <!-- Match the bags element  -->
    <xsl:template match="bags">
        <result>
            <!-- Group each bag element by its type -->
            <xsl:for-each-group select="bag" group-by="@type">
                <!-- Use the current key to display the type attribute -->
                <total type="{current-grouping-key()}">
                    <!-- Sum all the elements from the current group -->
                    <xsl:value-of select="sum(current-group()/@value)" />
                </total>
            </xsl:for-each-group>
        </result>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

Just for completeness an **XSLT 1.0** solution would be based on Muenchian Grouping.

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="xml" encoding="UTF-8" indent="yes"/>

    <!-- Index all bag elements withing bags element using their
         type attribute by using a key -->
    <xsl:key name="currency-key"
             match="/funds/bags/bag"
             use="@type" />

    <!-- Match bags element -->
    <xsl:template match="bags">
        <result>
            <!-- Match the first bag element for a specific group -->
            <xsl:apply-templates select="bag[generate-id() = generate-id(key('currency-key', @type)[1])]" />
        </result>
    </xsl:template>

    <xsl:template match="bag">
        <total type="{@type}">
            <!-- Sum all the elements from the @type group -->
            <xsl:value-of select="sum(key('currency-key', @type)/@value)" />
        </total>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:05:04.797

是的。我手边没有 XSLT 处理器，但可以尝试以下方法：

```
<result>
  <xsl:for-each select="distinct-values(//bag/@type)">
    <total type="."><xsl:value-of select="sum(//bag[@type = .])"/></total>
  </xsl:for-each>
</result> 
```

对于大量数据，您应该考虑[`<xsl:for-each-group>`](http://www.w3.org/TR/xslt20/#xsl-for-each-group)改用。

# facebook-graph-api - 查询 Venue 中的 city 字段

> ID：15112503
> 
> 赞同：0
> 
> 时间：2013-02-27T12:46:31.660
> 
> 标签：facebook-graph-api, facebook-fql

我写了这个查询来检索米兰的所有公共事件：

```
search?fields=name,venue&type=event&q=milan 
```

但我需要在 Venue 中查询 city 字段。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:43:22.733

$fql_query = ' [https://graph.facebook.com/search?q=milan&type=event&](https://graph.facebook.com/search?q=milan&type=event&) '.$access_token;

此 fql 查询将搜索所有包含单词“milan”的事件

# file-io - 如何从pdf文件中逐行读取txt

> ID：15112506
> 
> 赞同：0
> 
> 时间：2013-02-27T12:46:38.433
> 
> 标签：file-io, python-2.7

```
import pyPdf 
f= open('jayabal_appt.pdf','rb')
pdfl = pyPdf.PdfFileReader(f)
output = pyPdf.PdfFileWriter()
content=""
for i in range(0,1):
    content += pdfl.getPage(i).extractText() + "\n"
outpu = open('b.txt','wb')
outpu.write(content)
f.close()
outpu.close() 
```

这不是将 pdf 的内容写入 txt 文件……我该怎么做？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:54:11.533

遍历每个页面并`extractText()`像这样调用：

```
content = ""
for i in range(0, num_pages):
    content += pdfl.getPage(i).extractText() + "\n" 
```

获得完整内容后，您可以通过 '\n' 分隔符轻松拆分行。

编辑：在 for 循环之后检查变量是否`contents`包含任何文本。并非所有 PDF 文件都包含文本信息。

# c# - 保存动态创建的文本框的值

> ID：15112507
> 
> 赞同：1
> 
> 时间：2013-02-27T12:46:40.473
> 
> 标签：c#, asp.net

伙计们，每次单击按钮时，我都会创建动态文本框。但是一旦我有尽可能多的文本框..我想保存这些值数据库表..请指导如何将其保存到数据库中

```
public void addmoreCustom_Click(object sender, EventArgs e)
{
    if (ViewState["addmoreEdu"] != null)
    {
        myCount = (int)ViewState["addmoreEdu"];
    }
    myCount++;
    ViewState["addmoreEdu"] = myCount;
    //dynamicTextBoxes = new TextBox[myCount];

    for (int i = 0; i < myCount; i++)
    {
        TextBox txtboxcustom = new TextBox();
        Literal newlit = new Literal();
        newlit.Text = "<br /><br />";
        txtboxcustom.ID = "txtBoxcustom" + i.ToString();
        myPlaceHolder.Controls.Add(txtboxcustom);
        myPlaceHolder.Controls.Add(newlit);
        dynamicTextBoxes = new TextBox[i];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:57:18.650

`Page_Load`您必须最迟重新创建动态控件，否则`ViewState`无法正确加载。但是，您可以在事件处理程序中添加新的动态控件（在页面生命周期中的 page_load 之后发生）。

因此`addmoreCustom_Click`，重新创建所有已创建的控件为时已晚，但添加新控件或读取`Text`.

所以这样的事情应该有效（未经测试）：

```
public void Page_Load(object sender, EventArgs e)
{
    if (ViewState["addmoreEdu"] != null)
    {
        myCount = (int)ViewState["addmoreEdu"];
    }

    addControls(myCount);
}

public void addmoreCustom_Click(object sender, EventArgs e)
{
    if (ViewState["addmoreEdu"] != null)
    {
        myCount = (int)ViewState["addmoreEdu"];
    }
    myCount++;
    ViewState["addmoreEdu"] = myCount;

    addControls(1);
}

private void addControls(int count)
{
    int txtCount = myPlaceHolder.Controls.OfType<TextBox>().Count();
    for (int i = 0; i < count; i++)
    {
        TextBox txtboxcustom = new TextBox();
        Literal newlit = new Literal();
        newlit.Text = "<br /><br />";
        txtboxcustom.ID = "txtBoxcustom" + txtCount.ToString();
        myPlaceHolder.Controls.Add(txtboxcustom);
        myPlaceHolder.Controls.Add(newlit);
    }
} 
```

只需枚举`PlaceHolder`-Controls 即可找到您的`TextBoxes`或使用 Linq：

```
private void saveData()
{
    foreach (TextBox txt in myPlaceHolder.Controls.OfType<TextBox>())
    {
        string text = txt.Text;
        // ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:14:18.217

快速而肮脏的方法是迭代 Form 集合以寻找正确的值：

```
if (Page.IsPostBack)
{
    string name = "txtBoxcustom";
    foreach (string key in Request.Form.Keys)
    {
        int index = key.IndexOf(name);
        if (index >= 0)
        {
            int num = Int32.Parse(key.Substring(index + name.Length));
            string value = Request.Form[key];
            //store value of txtBoxcustom with that number to database...
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-17T06:02:51.723

要在回发时获取动态创建的控件的值，您需要在 Page_Init 事件上重新创建这些控件然后将加载这些控件的视图状态，您将获得控件和那里的值。

```
public void Page_Init(object sender, EventArgs e)
{
addControls(myCount);
} 
```

我希望这能解决你的问题快乐编码

# facebook - 点赞按钮在全新应用上变为“确认”

> ID：15112514
> 
> 赞同：2
> 
> 时间：2013-02-27T12:47:04.680
> 
> 标签：facebook, facebook-like, confirm

我最近为客户创建了一个应用程序，他们希望每个产品旁边都有单独的类似按钮。类似按钮是 iframe 变体，并使用应用程序的唯一 URL 来分隔产品。

点赞按钮需要“确认”操作，并且从一开始就这样做了，客户（不出所料）对此并不满意。我做了什么让类似按钮以这种方式做出反应（iframe 内的 iframe、通过快速喜欢/不喜欢 URL 进行测试、看起来很恶作剧的 CSS 样式等），我能做些什么来解决它？

我尝试通过 URL 调试器（[示例](http://developers.facebook.com/tools/debug/og/object?q=https://smash-products.like.st/products/products/products/view/512c8a2d-1010-4efd-be52-3ecdb0095222)）运行 URL，但它不能解决问题或显示任何错误/警告。

有问题的应用程序：[https ://www.facebook.com/Smash.sjokolade/app_567454876598963](https://www.facebook.com/Smash.sjokolade/app_567454876598963)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T13:12:47.957

点赞按钮上的“确认”是 Facebook 为防止点赞/点击劫持和让用户点赞垃圾邮件/恶意软件站点而实施的一项安全功能。您可能偶尔会在新域/应用程序上看到它。

但是，没有办法将其关闭。在域/应用程序上进行了一些合法的喜欢后，它就会消失。在那之前，你只需要等待它。

# .net - vb.net http post cookie 错误

> ID：15112515
> 
> 赞同：1
> 
> 时间：2013-02-27T12:47:08.787
> 
> 标签：.net, vb.net, http, post, cookies

我知道以前有人问过这个问题，我一直在寻找答案，但我是 Post 的新手，我不知道出了什么问题，在某些网站上它工作正常，但是当我用它访问大学的内部网时，我不断得到：

> 需要使用 HTTP cookie 来验证授权信息

请告诉我哪里做错了，这是我的代码：

```
 Dim cookies = New  CookieContainer()  
        ServicePointManager.Expect100Continue = False
        Dim request As HttpWebRequest = DirectCast(WebRequest.Create("http://banapp01*******/PROD/twbkwbis.P_ValLogin"), HttpWebRequest)
        request.CookieContainer = cookies
        'Dim response As HttpWebResponse = DirectCast(request.GetResponse(), HttpWebResponse)
        'Dim cookieCount As Integer = cookies.Count
        request.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:19.0) Gecko/20100101 Firefox/19.0"
        request.Method = "POST"
        request.Referer = "http://banapp01.*******/PROD/twbkwbis.P_WWWLogin"
        request.ContentType = "application/x-www-form-urlencoded"
        Using requestStream = request.GetRequestStream()
            Using writer = New StreamWriter(requestStream)
                writer.Write("sid=" & TextBox1.Text & "&PIN=" & TextBox2.Text)
            End Using
        End Using

        Using responseStream = request.GetResponse().GetResponseStream()
            Using reader = New StreamReader(responseStream)
                Dim result = reader.ReadToEnd()
                RichTextBox1.Text = result
            End Using
        End Using 
```

谁能告诉我怎么了？或者我需要如何正确工作？我已经研究 Post and Get 5 天了，但仍然失败！我只是希望我的项目是完美的：S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:49:54.760

我猜你还没有发出一个请求来返回一个 cookie 来存储在 CookieContainer 中。

是否需要先调用某种登录 url 才能分配身份验证 cookie？

# android - 从项目清单启动图书馆活动

> ID：15112516
> 
> 赞同：1
> 
> 时间：2013-02-27T12:47:11.670
> 
> 标签：android, android-manifest

嗨，我在我的库中定义了一个活动，就像这样......

```
<activity
            android:name="com.company.application.corelibrary.recording.DesiredActivity"
            android:label="@string/title_activity_tracking"
            android:screenOrientation="portrait" 
            android:exported="true">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

然后我想使用这个库在另一个我正在这样做的应用程序中启动......

```
<activity
        android:name="com.company.application.corelibrary.recording.DesiredActivity"
        android:label="@string/title_activity_tracking"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

但是，当我要构建它时，它会返回...

```
[2013-02-27 12:41:33 - TestApplication] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.company.application/.corelibrary.recording.DesiredActivity }
[2013-02-27 12:41:33 - TestApplication] ActivityManager: Error type 3
[2013-02-27 12:41:33 - TestApplication] ActivityManager: Error: Activity class {com.company.application/com.company.application.corelibrary.recording.DesiredActivity} does not exist. 
```

`com.company.application`是我的项目包。

`com.company.application.corelibrary`是我的图书馆包。

我已将库包含在我的项目中。

我究竟做错了什么？

**添加**

我刚刚将我的库项目的包名称重命名为与我的项目不同的名称，因为我认为可能因为它们相似，所以项目可能会在它自己的类源中查找，但这也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:48:28.467

在我的应用程序中，我在清单中编写了活动，例如：

```
 <activity android:name="MainActivity"
             android:label="@string/app_name"
             android:windowSoftInputMode="adjustResize">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity> 
```

我还在清单中声明了另一个活动（该活动属于我的库）：

```
<activity android:name="com.facebook.LoginActivity"
      android:label="@string/app_name" /> 
```

希望这会帮助你。

**注意：**

你不应该使用

```
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.LAUNCHER" /> 
```

对于清单中的两个活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:09:04.317

我想我会回答我自己的问题。其他答案可能是有效的，但这就是解决我的问题。

在新项目清单中的活动声明之前，我遇到了以下问题。

```
<uses-library
   android:name="com.corecoders.st.corelibrary"
   android:required="true" /> 
```

我删除了它，清理并重建了项目，它启动得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-07T15:12:22.620

我通过在他们的库中实现解决方案 io.card 解决了这个问题。通过使用应用程序标记将活动包装到您的库清单中。

```
<application>
    <activity
        android:name="com.eckoh.eckohroute.ActionConsumingActivity"
        android:configChanges="orientation|keyboardHidden|screenSize"
        android:theme="@style/Theme.Dialog.ActionActivity" />

 </application> 
```

# ios - 约束 UIScrollView 平移？

> ID：15112517
> 
> 赞同：2
> 
> 时间：2013-02-27T12:47:13.893
> 
> 标签：ios, uiscrollview

UIScrollView 有一个内置的行为“directionLockEnabled”。

启用后，平移将尝试锁定到水平或垂直方向。但是当用户积极尝试对角滚动时 - 它仍然允许对角滚动。

我想删除对角滚动的能力。

提前谢谢了。

编辑：

我尝试将 UIScrollView 放在另一个内部（每个都有尺寸以限制运动），但平移识别器似乎发生冲突 - 只有一个有效。

我查看了 TTScrollView 以查看它是否可以针对这项工作进行修改 - 但它似乎开箱即用并不能正常工作（在第一个手势后冻结。）

我尝试向 UIScrollView.panGestureRecognizer 添加第二个操作（侦听器）以调用具有约束值的 setTranslation:inView。这导致了不稳定的跳跃。

其他几种途径可能不值得一提。

编辑2：

Odrakir 的解决方案有效。代码如下：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    UIImage* image = [UIImage imageNamed:@"Sofia"];
    UIImageView* imageView = [[UIImageView alloc] initWithImage:image];
    imageView.frame = CGRectMake(0, 0, 1024 * 2, 768 * 2);

    UIScrollView* scrollView1 = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 1024*2, 768)];
    scrollView1.contentSize = CGSizeMake(1024*2, 768*2);
    [scrollView1 addSubview:imageView];

    UIScrollView* scrollView2 = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 1024, 768)];
    scrollView2.contentSize = CGSizeMake(1024*2, 768);
    [scrollView2 addSubview:scrollView1];

    [self.view addSubview:scrollView2];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:01:12.157

我从未尝试过，但我有一个具有水平 ScrollView 的应用程序，其中有多个视图，每个视图都有自己的垂直 ScrollView。

它有点像一本杂志，有不同的文章，每篇文章都有很多页。

两个 ScrollView 都可以工作，并且用户不能对角滚动。你可以试试。

显示层次为Horizo​​ntal ScrollView->View->Vertical ScrollView

# ios - 调用 willTransitionToState 时的 UITableViewCellStateMask 值未知

> ID：15112519
> 
> 赞同：4
> 
> 时间：2013-02-27T12:47:27.150
> 
> 标签：ios, uitableview

在 API 文档中，单元状态掩码文档定义为

```
enum {
   UITableViewCellStateDefaultMask                     = 0,
   UITableViewCellStateShowingEditControlMask          = 1 << 0,
   UITableViewCellStateShowingDeleteConfirmationMask   = 1 << 1
}; 
```

但是，当我在 UITableView 处于编辑模式时按下减号按钮时，参数`willTransitionToState`为 3

```
- (void)willTransitionToState:(UITableViewCellStateMask)state{
    [super willTransitionToState:state];
    if(state == 3){
        //When minus button is pushed, value of state is 3
    }
} 
```

我在哪里可以找到定义？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T22:33:07.023

这是预期的行为。

( `UITableViewCellStateShowingEditControlMask`A) 设置为真。这是合乎逻辑的，因为您仍然可以看到编辑控件。`UITableViewCellStateShowingDeleteConfirmationMask`(B) 也设置为 true，因为您刚刚按下减号按钮。

因此，

```
(A) = 1 << 0 = 1   00000001
(B) = 1 << 1 = 2   00000010
----------------------------
(A) + (B)    = 3   00000011 
```

# mysql - 是否可以使用包含查询表本身的另一个嵌套查询来更新带有结果的表？

> ID：15112520
> 
> 赞同：2
> 
> 时间：2013-02-27T12:47:27.613
> 
> 标签：mysql, sql, sql-update

我有两张桌子。首先有 id (AI) 字段和 old_id (Int) 字段。第二个表有一个来自第一个表 old_id 的引用字段 p_id 作为关系点。

我想将 p_id 更新为 firstTable.id 值。是否可以使用 firstTable.id 返回的值更新 secondTable.p_id ？

这是我的测试sql：

```
UPDATE secondTable sT 
SET sT.p_id = (
    SELECT fT.id 
    FROM firstTable fT 
    WHERE fT.old_id = secondTable.p_id
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:48:51.887

您可以`JOIN`这样更新：

```
UPDATE secondTable sT 
INNER JOIN firstTable fT ON fT.old_id=secondTable.p_id
SET sT.p_id = fT.id; 
```

# android - 将自定义属性的值从父视图级联到子视图？

> ID：15112522
> 
> 赞同：14
> 
> 时间：2013-02-27T12:47:39.473
> 
> 标签：android, android-custom-view

如何将自定义属性的值从父视图“级联”到其子视图？

使用示例最容易解释：

```
<com.example.CustomLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    app:percent="35" >

    <com.example.CustomView
        android:id="@+id/customView1"
        app:percent="how-to-get-app:percent-value-here???"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</com.example.CustomLayout> 
```

在这里，`CustomLayout`扩展`LinearLayout`。我在`attrs.xml`使用`<declare-styleable>`元素时定义了一个自定义属性“百分比”。如您所见，我在 .xml 的 XML 中将 percent 设置为 35 `CustomLayout`。

我现在想将相同的值传递给`CustomView`(which extends `View`) 并且我将包含在`CustomLayout`. 我无法找到在 XML 中执行此操作的方法（尽管在代码中很容易执行此操作）。

我尝试了以下方法：

`app:percent="@attr/percent"`

`app:percent="?attr/percent"`

这两个（预期）都失败了`NumberFormatException`at `TypedArray#getInt()`。

那么，关于如何让它发挥作用的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-09-23T02:39:00.540

虽然想法来的有点晚，方法也不是直截了当，但我觉得还是值得分享的。我们可以将自定义属性放入主题中，这样可以将属性从使用主题的父视图传递给所有子视图（即属性存在于视图组中）。

示例如下：

```
<integer name="percentage">35</integer>

<style name="CustomTheme" parent="suitable theme for your case">
    <item name="percent">@integer/percentage</item>
</style>

<com.example.CustomLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:theme="@style/CustomTheme" >

    <com.example.CustomView
        android:id="@+id/customView1"
        app:percent="?attr/percent" <!--Note: that's how it refers to the value,
        however, re-assign the attribute value here is meaningless as attribute percent
        should exist in all child views now. You can retrieve its value via
        Theme.obtainStyledAttributes(R.style.CustomTheme, new int[] {R.attr.percent})
        in every child view-->
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
</com.example.CustomLayout> 
```

# recursion - Erazor 递归助手

> ID：15112523
> 
> 赞同：1
> 
> 时间：2013-02-27T12:47:40.857
> 
> 标签：recursion, haxe, erazor

我在这里发布我的问题是因为 haxe 邮件列表非常忙于 haxe3 rc relase。我想从其他人那里获得一些关于如何为与 haxe 一起使用的 razor 模板引擎构建递归帮助器的专业知识。

我有一个嵌套的树节点（ polygonal.ds.Treenode ）以模拟 html 层次结构。现在我想将我的 treeNode 导出到带有嵌套 div 的字符串。我可以在我的应用程序逻辑部分的递归函数中做到这一点，但我真的希望能够在模板系统上使用它。

有没有人能够使用这样的递归助手？谢谢

# android - 使用共享首选项启动时应用程序崩溃

> ID：15112524
> 
> 赞同：0
> 
> 时间：2013-02-27T12:47:42.480
> 
> 标签：android

由于某种未知原因，我的应用程序在启动时立即崩溃。如果我一开始就删除了 SharedPreferences..... 部分，那就没关系了，所以问题一定是关于 SharedPreferences 的！？当我第一次使用这个时，如果之前没有文件是不是创建的？

有什么问题？

```
String filename = "taggedImages";
SharedPreferences tagInfo = getSharedPreferences(filename, 0);

public void tagImage(String imagePath, String contactId){
    //Toast.makeText(Activity_1.this, "" + imagePath + " " + contactId, Toast.LENGTH_LONG).show();

    // Write to file
    SharedPreferences.Editor editor = tagInfo.edit();
    editor.putString(imagePath, contactId);
    editor.commit();

    // Disable the menu item "Tagged in this image"
    showMenuItem1 = false;
} 
```

日志猫：

```
02-27 13:37:48.156: D/AndroidRuntime(27311): Shutting down VM
02-27 13:37:48.156: W/dalvikvm(27311): threadid=1: thread exiting with uncaught exception (group=0x40018578)
02-27 13:37:48.164: E/AndroidRuntime(27311): FATAL EXCEPTION: main
02-27 13:37:48.164: E/AndroidRuntime(27311): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{se.com.test.assignment.two/se.com.test.assignment.two.Activity_1}: java.lang.NullPointerException
02-27 13:37:48.164: E/AndroidRuntime(27311):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1573)
02-27 13:37:48.164: E/AndroidRuntime(27311):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
02-27 13:37:48.164: E/AndroidRuntime(27311):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-27 13:37:48.164: E/AndroidRuntime(27311):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
02-27 13:37:48.164: E/AndroidRuntime(27311):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-27 13:37:48.164: E/AndroidRuntime(27311):    at android.os.Looper.loop(Looper.java:130)
02-27 13:37:48.164: E/AndroidRuntime(27311):    at android.app.ActivityThread.main(ActivityThread.java:3687)
02-27 13:37:48.164: E/AndroidRuntime(27311):    at java.lang.reflect.Method.invokeNative(Native Method)
02-27 13:37:48.164: E/AndroidRuntime(27311):    at java.lang.reflect.Method.invoke(Method.java:507)
02-27 13:37:48.164: E/AndroidRuntime(27311):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
02-27 13:37:48.164: E/AndroidRuntime(27311):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
02-27 13:37:48.164: E/AndroidRuntime(27311):    at dalvik.system.NativeStart.main(Native Method)
02-27 13:37:48.164: E/AndroidRuntime(27311): Caused by: java.lang.NullPointerException
02-27 13:37:48.164: E/AndroidRuntime(27311):    at android.content.ContextWrapper.getSharedPreferences(ContextWrapper.java:146)
02-27 13:37:48.164: E/AndroidRuntime(27311):    at se.com.test.assignment.two.Activity_1.<init>(Activity_1.java:27)
02-27 13:37:48.164: E/AndroidRuntime(27311):    at java.lang.Class.newInstanceImpl(Native Method)
02-27 13:37:48.164: E/AndroidRuntime(27311):    at java.lang.Class.newInstance(Class.java:1409)
02-27 13:37:48.164: E/AndroidRuntime(27311):    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
02-27 13:37:48.164: E/AndroidRuntime(27311):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1565)
02-27 13:37:48.164: E/AndroidRuntime(27311):    ... 11 more
02-27 13:40:19.492: I/ApplicationPackageManager(27449): cscCountry is not German : NEE
02-27 13:40:21.679: I/ApplicationPackageManager(27449): cscCountry is not German : NEE
02-27 13:40:21.984: D/dalvikvm(27449): GC_EXTERNAL_ALLOC freed 64K, 48% free 2843K/5379K, external 514K/517K, paused 40ms
02-27 13:40:22.125: D/dalvikvm(27449): GC_EXTERNAL_ALLOC freed 166K, 48% free 2846K/5447K, external 1100K/1144K, paused 38ms
02-27 13:46:45.820: D/AndroidRuntime(27748): Shutting down VM
02-27 13:46:45.820: W/dalvikvm(27748): threadid=1: thread exiting with uncaught exception (group=0x40018578)
02-27 13:46:45.843: E/AndroidRuntime(27748): FATAL EXCEPTION: main
02-27 13:46:45.843: E/AndroidRuntime(27748): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{se.com.test.assignment.two/se.com.test.assignment.two.Activity_1}: java.lang.NullPointerException
02-27 13:46:45.843: E/AndroidRuntime(27748):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1573)
02-27 13:46:45.843: E/AndroidRuntime(27748):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
02-27 13:46:45.843: E/AndroidRuntime(27748):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-27 13:46:45.843: E/AndroidRuntime(27748):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
02-27 13:46:45.843: E/AndroidRuntime(27748):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-27 13:46:45.843: E/AndroidRuntime(27748):    at android.os.Looper.loop(Looper.java:130)
02-27 13:46:45.843: E/AndroidRuntime(27748):    at android.app.ActivityThread.main(ActivityThread.java:3687)
02-27 13:46:45.843: E/AndroidRuntime(27748):    at java.lang.reflect.Method.invokeNative(Native Method)
02-27 13:46:45.843: E/AndroidRuntime(27748):    at java.lang.reflect.Method.invoke(Method.java:507)
02-27 13:46:45.843: E/AndroidRuntime(27748):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
02-27 13:46:45.843: E/AndroidRuntime(27748):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
02-27 13:46:45.843: E/AndroidRuntime(27748):    at dalvik.system.NativeStart.main(Native Method)
02-27 13:46:45.843: E/AndroidRuntime(27748): Caused by: java.lang.NullPointerException
02-27 13:46:45.843: E/AndroidRuntime(27748):    at android.content.ContextWrapper.getSharedPreferences(ContextWrapper.java:146)
02-27 13:46:45.843: E/AndroidRuntime(27748):    at se.com.test.assignment.two.Activity_1.<init>(Activity_1.java:27)
02-27 13:46:45.843: E/AndroidRuntime(27748):    at java.lang.Class.newInstanceImpl(Native Method)
02-27 13:46:45.843: E/AndroidRuntime(27748):    at java.lang.Class.newInstance(Class.java:1409)
02-27 13:46:45.843: E/AndroidRuntime(27748):    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
02-27 13:46:45.843: E/AndroidRuntime(27748):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1565)
02-27 13:46:45.843: E/AndroidRuntime(27748):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:52:34.993

我假设你在打电话

```
SharedPreferences tagInfo = getSharedPreferences(filename, 0); 
```

太早了。在你的类中声明 tagInfo 并在`onCreate` 你的活动中初始化它：

```
SharedPreferences tagInfo; //declaration in your class
...
@Override
onCreate(...){
  ...
  tagInfo = getSharedPreferences(filename, 0);
} 
```

# youtube-api - YouTube API v3：不喜欢 android 中的视频

> ID：15112525
> 
> 赞同：0
> 
> 时间：2013-02-27T12:47:43.087
> 
> 标签：youtube-api

根据当前文档，喜欢视频可以通过将视频添加到喜欢的播放列表中来完成。有什么方法可以不喜欢带有 Youtube data api v3.0 的视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:40:03.113

目前没有办法不喜欢使用 YouTube 数据 API v3（相当于观看页面上的“不喜欢”用户界面选项）。

# c# - sql server 授予，撤销对用户的权限

> ID：15112533
> 
> 赞同：1
> 
> 时间：2013-02-27T12:48:06.260
> 
> 标签：c#, .net, sql-server, winforms

我编写了一个简单的 c# 代码，连接到 sql-server 数据库并执行查询：

```
 cmd = new SqlCommand(txtQuery.Text.ToString().Trim(), con);
        cmd.ExecuteNonQuery(); 
```

*   在我的数据库中，我有一个名为 myTB 的表。我也有两个用户：user1（所有者），user2（新用户创建）

*   我使用**user2**的用户名和密码**登录**（连接到数据库） ！

***   我可以使用下面的查询访问由 user1 创建的表：

    **“从 user1.myTB 中选择 *”**

    （我不知道为什么这个查询会出错：“select * from myTB”，现在算了吧！）

    *   现在我想**撤销 user2**的“选择”权限。我的意思是我不希望 user2 对由 user1 创建的 myTB 表执行**选择查询。**

    *   我该怎么办是我被困在上面的问题！我使用了这个查询，但没有任何改变！** 

 **Q1：“从 user2 撤消对 user1.myTB 的选择”

再次 user2 可以从 user1.myTB 中选择 * ！！！为什么 ！？

请帮我解决一下这个。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:07:58.970

You cannot REVOKE something you did not GRANT. Looks like you want to:

1.  investigate and understand *why* `user2` has permission to SELECT
2.  possibly DENY permission to SELECT to `user2`

The permission work like following:

*   initialy an user has the poermissions derived from his group mebership (including public roles)
*   GRANT explictly grants a privilege
*   REVOKE takes back a *previously granted* priviledge, reverting to the user having the privileges implictily inherited from group(s) memberhip
*   DENY denies a privilege

The rules of precedence are that any DENY take precedence over any GRANT or inherited privilege. One can get access through a number of GRANTs but one single DENY will revoke the privilege. You cannot GRANT/REVOKE/DENY permissions to the securable owner (members of `db_owner` own *everything* and members of `sysadmin` own *everything* on the entire server).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:05:37.650

user2 可能是从角色成员中获得它的权限。

跑：

```
use [<YourDatabase>]
GO

exec sp_helpuser 
```

在第一列中找到用户，然后查看第二列。用户是`db_datareader`or的成员`db_owner`吗？

如果是这样，您可以通过执行以下操作撤销成员资格，例如 db_datareader：

```
exec sp_droprolemember 'db_datareader', 'user2'
GO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T10:44:50.690

谢谢朋友，我已经解决了，并使用 DENY 而不是 REVOKE ：

**DENY**选择 ON user1.myTB TO user2**

# plone - 默认情况下如何从 Plone 导航树中排除图像

> ID：15112545
> 
> 赞同：7
> 
> 时间：2013-02-27T12:48:33.077
> 
> 标签：plone

我注意到，如果我创建一个页面并添加和上传要包含在其中的图像，默认情况下它会包含在站点导航中。我怎样才能阻止这种情况自动发生？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T13:12:34.660

**选项1**

有一个 Plone 设置，它告诉导航中包含哪些类型。转到 ZMI > portal_propeties > navtree_properties > metaTypesNotToList 并在那里添加*Image*。

**选项 2**

对于每个图像，在图像的设置选项卡上切换复选框“在导航中排除”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T17:07:20.610

如果您需要基于容器执行此操作，则可以使用[sc.contentrules.metadata](https://pypi.python.org/pypi/sc.contentrules.metadata)中包含的内容规则。

只需将其添加到您的 buidout 并手动配置它以将**ExcludeFromNav**字段设置为**True**。

另一种方法是在项目配置文件中包含一个**contentrules.xml ，如下所示：**

```
<?xml version="1.0"?>
<contentrules purge="True">
 <rule name="exclude-on-add" title="Images are excluded from navigation when added"
    description="" enabled="True"
    event="zope.lifecycleevent.interfaces.IObjectAddedEvent"
    stop-after="False">
  <conditions>
   <condition type="plone.conditions.PortalType">
    <property name="check_types">
     <element>Image</element>
    </property>
   </condition>
  </conditions>
  <actions>
   <action type="sc.contentrules.actions.ExcludeFromNav">
    <property name="exclude">True</property>
   </action>
  </actions>
 </rule>
 <assignment name="exclude-on-add" bubbles="True" enabled="True" location="/your-container"/>
</contentrules> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-17T06:26:54.637

您可以`Navigation`在`Site Setup`菜单中选择。删除显示内容类型的图像上的勾号，并且图像不再显示在站点导航和站点地图上。

# php - Magento 销售订单网格定制

> ID：15112558
> 
> 赞同：1
> 
> 时间：2013-02-27T12:49:07.347
> 
> 标签：php, magento

我想自定义 magento 订单网格。我需要在表格中再添加一列`sales_flat_order_address`。`sales_flat_order_grid`主表的链接即`parent_id`.

需要这样一种方式加入`sales_flat_order_address.entity_id = sales_flat_order_grid.parent_id`。

但是当我尝试这样做时，我收到一个错误“**完整性约束违规：组语句中的 1052 列 'entity_id' 不明确**”。

```
$collection = Mage::getResourceModel($this->_getCollectionClass());
    $collection->getSelect()
joinLeft(array('table_alias2'=>$collection->getTable('deliveryinfo/saleslocation')),'main_table.entity_id = table_alias2.parent_id',array('table_alias2.entity_id')); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:21:00.573

在这里您可以找到将列添加到订单网格的不错教程：http: [//www.ecomdev.org/2010/07/27/adding-order-attribute-to-orders-grid-in-magento-1-4-1 .html](http://www.ecomdev.org/2010/07/27/adding-order-attribute-to-orders-grid-in-magento-1-4-1.html)

UPD：页面现在被阻止，这是来自 archive.org 的副本

[https://web.archive.org/web/20160120164619/http://www.ecomdev.org/2010/07/27/adding-order-attribute-to-orders-grid-in-magento-1-4- 1.html](https://web.archive.org/web/20160120164619/http://www.ecomdev.org/2010/07/27/adding-order-attribute-to-orders-grid-in-magento-1-4-1.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T12:56:45.210

复制并粘贴 app\code\core\Mage\Adminhtml\Block\Sales\Order\Grid.php

http://opensource.org/licenses/osl-3.0.php * 如果您没有收到许可证副本并且无法 * 通过万维网获得它，请发送电子邮件 * 至 license@magentocommerce .com，因此我们可以立即向您发送一份副本。* * 免责声明 * * 如果您希望将来将 Magento 升级到更新的 * 版本，请不要编辑或添加到此文件。如果您希望根据您的*需求自定义 Magento，请参阅[http://www.magentocommerce.com](http://www.magentocommerce.com)了解更多信息。* * @category Mage * @package Mage_Adminhtml * @copyright 版权所有 (c) 2013 Magento Inc. ( [http://www.magentocommerce.com](http://www.magentocommerce.com) ) * @license [http://opensource.org/licenses/osl-3.0.php](http://opensource.org/licenses/osl-3.0.php) 开放软件许可证 (OSL 3.0) */

```
/**
 * Adminhtml sales orders grid
 *
 * @category   Mage
 * @package    Mage_Adminhtml
 * @author      Magento Core Team <core@magentocommerce.com>
 */
class Mage_Adminhtml_Block_Sales_Order_Grid extends Mage_Adminhtml_Block_Widget_Grid
{

    public function __construct()
    {
        parent::__construct();
        $this->setId('sales_order_grid');
        $this->setUseAjax(true);
        $this->setDefaultSort('created_at');
        $this->setDefaultDir('DESC');
        $this->setSaveParametersInSession(true);
    }

    /**
     * Retrieve collection class
     *
     * @return string
     */
    protected function _getCollectionClass()
    {
        return 'sales/order_grid_collection';
    }

    protected function _prepareCollection()
    {
        $collection = Mage::getResourceModel($this->_getCollectionClass());
        $collection->getSelect()->joinLeft('sales_flat_order', 'main_table.entity_id = sales_flat_order.entity_id',array('total_qty_ordered'));
        $collection->getSelect()->joinLeft(array('billing'=>'sales_flat_order_address'),
        'main_table.entity_id = billing.parent_id AND billing.address_type="billing"',array('billing.postcode AS bp', 'billing.city AS bc', 'billing.email AS be', 'billing.telephone AS bt',));
        $collection->getSelect()->joinLeft('sales_flat_order_payment', 'main_table.entity_id = sales_flat_order_payment.parent_id',array('method'));
        $this->setCollection($collection);
        return parent::_prepareCollection();
    }

    protected function _prepareColumns()
    {

       $this->addColumn('real_order_id', array(
        'header'=> Mage::helper('sales')->__('Order Id'), //Order #=order id
        'width' => '30px',
        'type'=> 'text',
        'index' => 'increment_id',
        'filter_index' => 'main_table.increment_id',
        ));

        if (!Mage::app()->isSingleStoreMode()) {
            $this->addColumn('store_id', array(
                'header'    => Mage::helper('sales')->__('Purchased'),
                'index'     => 'store_id',
                'filter_index' => 'main_table.store_id',
                'type'      => 'store',
                'width'      => '30',
                'store_view'=> true,
                'display_deleted' => true,
            ));
        }

        $this->addColumn('created_at', array(
            'header' => Mage::helper('sales')->__('Purchased On'),
            'index' => 'created_at',
            'filter_index' => 'main_table.created_at',
            'type' => 'datetime',
            'width' => '100px',
        ));

        /*$this->addColumn('billing_name', array(
            'header' => Mage::helper('sales')->__('Bill to Name'),
            'index' => 'billing_name',
            'filter_index' => 'main_table.billing_name',
        ));*/

        $this->addColumn('shipping_name', array(
            'header' => Mage::helper('sales')->__('Ship to Name'),
            'index' => 'shipping_name',
            'filter_index' => 'main_table.shipping_name',
        ));

        $this->addColumn('base_grand_total', array(
            'header' => Mage::helper('sales')->__('G.T. (Base)'),
            'index' => 'base_grand_total',
            'filter_index' => 'main_table.base_grand_total',
            'type'  => 'currency',
            'currency' => 'base_currency_code',
        ));

        /*$this->addColumn('grand_total', array(
            'header' => Mage::helper('sales')->__('G.T. (Purchased)'),
            'index' => 'grand_total',
            'filter_index' => 'main_table.grand_total',
            'type'  => 'currency',
            'currency' => 'order_currency_code',
        ));*/

        $this->addColumn('total_qty_ordered', array(
        'header' => Mage::helper('sales')->__('Qty'),
        'index' => 'total_qty_ordered',
        'filter_index' => 'sales_flat_order.total_qty_ordered',
        ));
        $this->addColumn('bp', array(
        'header' => Mage::helper('sales')->__('Pincode'),
        'index' => 'bp',
        'width' => '60px',
        'filter_index'  => 'billing.postcode'
        ));
        $this->addColumn('bc', array(
        'header' => Mage::helper('sales')->__('City'),
        'index' => 'bc',
        'width' => '60px',
        'filter_index'  => 'billing.city'
        ));
        /*$this->addColumn('be', array(
        'header' => Mage::helper('sales')->__('E-mail'),
        'index' => 'be',
        'width' => '60px',
        'filter_index'  => 'billing.email'
        ));*/
        $this->addColumn('bt', array(
        'header' => Mage::helper('sales')->__('Mobile'),
        'index' => 'bt',
        'width' => '60px',
        'filter_index'  => 'billing.telephone'
        ));
        $this->addColumn('method', array(
        'header' => Mage::helper('sales')->__('Method'),
        'index' => 'method',
        'filter_index' => 'sales_flat_order_payment.method',
        ));
        $this->addColumn('status', array(
            'header' => Mage::helper('sales')->__('Status'),
            'index' => 'status',
            'filter_index' => 'main_table.status',
            'type'  => 'options',
            'width' => '70px',
            'options' => Mage::getSingleton('sales/order_config')->getStatuses(),
        ));

        if (Mage::getSingleton('admin/session')->isAllowed('sales/order/actions/view')) {
            $this->addColumn('action',
                array(
                    'header'    => Mage::helper('sales')->__('Action'),
                    'width'     => '50px',
                    'type'      => 'action',
                    'getter'     => 'getId',
                    'actions'   => array(
                        array(
                            'caption' => Mage::helper('sales')->__('View'),
                            'url'     => array('base'=>'*/sales_order/view'),
                            'field'   => 'order_id'
                        )
                    ),
                    'filter'    => false,
                    'sortable'  => false,
                    'index'     => 'stores',
                    'is_system' => true,
            ));
        }
        $this->addRssList('rss/order/new', Mage::helper('sales')->__('New Order RSS'));

        $this->addExportType('*/*/exportCsv', Mage::helper('sales')->__('CSV'));
        $this->addExportType('*/*/exportExcel', Mage::helper('sales')->__('Excel XML'));

        return parent::_prepareColumns();
    }

    protected function _prepareMassaction()
    {
        $this->setMassactionIdField('entity_id');
        $this->getMassactionBlock()->setFormFieldName('order_ids');
        $this->getMassactionBlock()->setUseSelectAll(false);

        if (Mage::getSingleton('admin/session')->isAllowed('sales/order/actions/cancel')) {
            $this->getMassactionBlock()->addItem('cancel_order', array(
                 'label'=> Mage::helper('sales')->__('Cancel'),
                 'url'  => $this->getUrl('*/sales_order/massCancel'),
            ));
        }

        if (Mage::getSingleton('admin/session')->isAllowed('sales/order/actions/hold')) {
            $this->getMassactionBlock()->addItem('hold_order', array(
                 'label'=> Mage::helper('sales')->__('Hold'),
                 'url'  => $this->getUrl('*/sales_order/massHold'),
            ));
        }

        if (Mage::getSingleton('admin/session')->isAllowed('sales/order/actions/unhold')) {
            $this->getMassactionBlock()->addItem('unhold_order', array(
                 'label'=> Mage::helper('sales')->__('Unhold'),
                 'url'  => $this->getUrl('*/sales_order/massUnhold'),
            ));
        }

        $this->getMassactionBlock()->addItem('pdfinvoices_order', array(
             'label'=> Mage::helper('sales')->__('Print Invoices'),
             'url'  => $this->getUrl('*/sales_order/pdfinvoices'),
        ));

        $this->getMassactionBlock()->addItem('pdfshipments_order', array(
             'label'=> Mage::helper('sales')->__('Print Packingslips'),
             'url'  => $this->getUrl('*/sales_order/pdfshipments'),
        ));

        $this->getMassactionBlock()->addItem('pdfcreditmemos_order', array(
             'label'=> Mage::helper('sales')->__('Print Credit Memos'),
             'url'  => $this->getUrl('*/sales_order/pdfcreditmemos'),
        ));

        $this->getMassactionBlock()->addItem('pdfdocs_order', array(
             'label'=> Mage::helper('sales')->__('Print All'),
             'url'  => $this->getUrl('*/sales_order/pdfdocs'),
        ));

        $this->getMassactionBlock()->addItem('print_shipping_label', array(
             'label'=> Mage::helper('sales')->__('Print Shipping Labels'),
             'url'  => $this->getUrl('*/sales_order_shipment/massPrintShippingLabel'),
        ));

        return $this;
    }

    public function getRowUrl($row)
    {
        if (Mage::getSingleton('admin/session')->isAllowed('sales/order/actions/view')) {
            return $this->getUrl('*/sales_order/view', array('order_id' => $row->getId()));
        }
        return false;
    }

    public function getGridUrl()
    {
        return $this->getUrl('*/*/grid', array('_current'=>true));
    }

} 
```

# java - HttpURLConnection 上的哪个方法向给定的 URL 发出请求

> ID：15112559
> 
> 赞同：1
> 
> 时间：2013-02-27T12:49:09.563
> 
> 标签：java, httpurlconnection

我有下面的代码来使用独立的 Java 程序进行 HTTP 调用，有人可以告诉我哪一行/方法实际上对 URL 进行了 HTTP 调用。

根据下面的代码，我了解我正在获取一个连接对象并将请求方法类型提供为“GET”，并为其提供授权详细信息。

```
HttpURLConnection connection = (HttpURLConnection) new URL("<Some URL String>").openConnection();

connection.setRequestMethod("GET");

BASE64Encoder enc = new BASE64Encoder();
StringBuffer userpassword = new StringBuffer().append(username).append(":").append(password);
String encodedAuthorization = enc.encode(userpassword.toString().getBytes());
connection.setRequestProperty("Authorization", "Basic " + encodedAuthorization);

BufferedReader serverResponse = new BufferedReader(new InputStreamReader(connection.getInputStream()));
// Read the response
String line;
StringBuffer response = new StringBuffer();
while ((line = serverResponse.readLine()) != null) {
response.append(line);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:52:09.647

```
BufferedReader serverResponse = new BufferedReader(new InputStreamReader(connection.getInputStream())); 
```

该方法负责发出 HTTP 请求。
很明显，我们在这行代码上得到了响应，我们正在调用 InputStreamReader 从它得到响应的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:52:00.777

它的线

```
connection.getInputStream() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T12:54:29.863

[`connection.getInputStream()`](http://docs.oracle.com/javase/7/docs/api/java/net/URLConnection.html#getInputStream%28%29)返回一个从这个 open 读取的输入流`connection`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-27T12:52:25.340

您实际上可以调用[`.connect()`](http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html#connect%28%29)“打开[s] 通信链接”。

# android - 视图与父级 RelativeLayout 的高度不同

> ID：15112562
> 
> 赞同：0
> 
> 时间：2013-02-27T12:49:15.043
> 
> 标签：android, android-layout

我正在尝试实现下图右侧的布局。我目前得到的是在左边。

![截屏](../Images/de91d256a29c7114b4af20ab4bc29077.png)

这是我的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    >

    <ImageView
        android:id="@+id/garment_grid_item_image"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:background="@drawable/gridview_image_placeholder"
        android:contentDescription="@string/blank"
        android:scaleType="centerCrop"
        />

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/garment_grid_item_on_loan"
        android:src="@drawable/icon_borrowed"
        android:contentDescription="@string/blank"
        android:layout_alignParentTop="true"
        android:layout_alignParentRight="true"
        android:visibility="gone"
        />

    <View
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:background="@drawable/item_border"
        />

</RelativeLayout> 
```

`@drawable/item_border`（石灰绿色只是为了突出透明区域）：

![9 补丁可绘制](../Images/9e413e28d011bebe043ebbb2cb3d5c68.png)

`RelativeLayout`用作 的项目模板`GridView`。`garment_grid_item_image`正在填充代码。`garment_grid_item_on_loan`是右上角的紫色三角形，其可见性由代码控制。

底部的`View`使用 9 补丁，这是我遇到问题的补丁。我希望它和父母一样高，`RelativeLayout`但既不工作`match_parent`也不`fill_parent`工作。我该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:23:42.897

我刚刚使用一些类似的图像尝试了您的布局，并且在将其设置为 Activity 中的根元素时效果很好。

这可能与您的以 wrap_content 作为其大小的 RelativeLayout 有关，而子视图未指定要包装的大小。尝试指定一个固定大小，看看问题是否消失，然后从那里开始。

# asp.net - 以编程方式为每个手风琴窗格中的链接按钮创建单击事件

> ID：15112565
> 
> 赞同：0
> 
> 时间：2013-02-27T12:49:23.663
> 
> 标签：asp.net, accordion

我已经动态创建了一个 Accordion 并通过后端添加了 AccordionPanes 以及相应的控件和数据单击[此处](https://stackoverflow.com/questions/15085993/using-ajax-accordion-with-repeater)查看我的问题以及我如何解决它。我在每个 AccordionPane 中添加了一个链接按钮，但现在我想添加一个单击事件，以便我可以访问该特定窗格中的数据，并且我需要使用函数来填充数据。

我在 page_init 事件中创建我的控件。

我该怎么做呢？

我遇到了一个与我想要做的几乎相同的[解决方案。](https://stackoverflow.com/questions/4867441/add-an-onclick-event-to-a-dynamically-created-linkbutton)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:08:27.050

One way to achieve this is by adding the event handlers with Javascript Like this:

```
function pageLoad()
{
    var accordionControl = $find('Accordion1_AccordionExtender');
    accordionControl.add_selectedIndexChanging(PaneChanging);
    accordionControl.add_selectedIndexChanged(PaneChanged);
}

function PaneChanged(sender, args)
{
    alert('In Changed handler.');
}

function PaneChanging(sender, args)
{
    alert('In Changing hanlder.');
} 
```

A similar question has been posted [here](http://forums.asp.net/p/1259392/2349722.aspx)

The specific control you would be looking for is:

```
$addHandler(header, "click", acc._headerClickHandler); 
```

# javascript - 包含 chrome 的条件后，自动化服务器无法在 IE8 中创建对象

> ID：15112567
> 
> 赞同：1
> 
> 时间：2013-02-27T12:49:30.283
> 
> 标签：javascript, google-chrome, internet-explorer-8, applet, activexobject

以前我在做

```
 <script>
    function fun1(){
       var sh=new ActiveXObject("Wscript.Shell");
       sh.run("\\\\ntbot\\my.exe");
    }
    fun();
    </script> 
```

这段代码没有问题。它愉快地从 IE 在客户端机器上执行 exe，从我编写的小程序的 chrome 中运行相同的程序，然后我正在运行 exe。所以我所做的代码更改是

```
<scipt>
    function testCSS(prop) {
        return prop in document.documentElement.style;
    }
     var isChrome = !!(window.chrome && chrome.webstore && chrome.webstore.install);
     var isIE = /*@cc_on!@*/false || testCSS('msTransform'); 

        function fun2(isIE,isChrome)
        {
            if(isIE){
                var sh=new ActiveXObject("Wscript.Shell");
                sh.Run("\\\\ntbot\\my.exe");
                }if(isChrome){
                appletsource="<APPLET archive='CalciApplet.jar' codebase='/kiss' CODE='AppletGchrome.CalculateApplet.class' WIDTH='0' HEIGHT='0'></APPLET>"
                document.getElementById("appletplace").innerHTML=appletsource;
            }
        }

        fun2(isIE,isChrome);
</script> 
```

不是它在 Chrome 上工作，但不是在 IE 中的 IE 我得到**自动化服务器无法创建对象。**错误

请帮助我。谢谢。

问候，swapnil P.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:40:58.950

ActiveX is IE ***Only!*** It will never work on Chrome.

*Automation Server can't create object* means the security settings for activeX are set at the wrong level. Add your page to trusted sites.

# php - WHM 安装后重新编译 eAccelerator

> ID：15112568
> 
> 赞同：0
> 
> 时间：2013-02-27T12:49:31.107
> 
> 标签：php, cpanel, whm, recompile, eaccelerator

关于堆栈溢出的第一个问题，请原谅我的任何愚蠢行为。

我的网络服务器目前有问题。它有*WHM / cPanel*，我已经多次使用 WHM 来调整设置并通过 easyApache 添加/删除包。

在 easyApache 中有安装/删除 eAccelerator 的选项，但没有配置选项。eAccelerator 已安装并正在执行其工作，但我需要使用以下标志重新编译它而不破坏它。

```
--with-eaccelerator-doc-comment-inclusion 
```

我在谷歌搜索过程中遇到了以下说明，但它们似乎不完整，至少对于我的需要而言。请有人提供一组包含上述标志的指令，以便我可以重新编译 eAccelerator，但不会丢失由 easyApache 安装的 eAccelerator 的任何内容。

```
make clean # IMPORTANT!!!
phpize
make
make install 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:06:27.300

调用**phpize**后需要重新配置

> ./configure --with-eaccelerator-doc-comment-inclusion

# c - 如何控制静态库中公开的 API 集？

> ID：15112571
> 
> 赞同：2
> 
> 时间：2013-02-27T12:49:46.430
> 
> 标签：c, build, static-libraries

我有一个静态库，它公开了 100 个 API（即 100 个 API 列在我与库一起提供的各种头文件中）。

比方说，许多不同的应用程序尝试使用这个库，每个应用程序只使用这 100 个 API 的一个子集。例如：Application-1 使用 10 个 API，Application-2 使用 20 个 API，等等

在这种情况下，我希望只有 10 个 API 向 Application-1 公开，只有 20 个 API 向 Application-2 公开，即我不希望所有 API 向所有人公开顾客们。

一种解决方案是，我添加一个基于应用程序名称的宏，然后在代码中自定义它。

还有哪些其他可用的解决方案？在共享库的情况下，我可以控制使用映射文件公开的 API 集。任何此类解决方案都可以应用于静态库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:53:19.657

大多数编译器都有控制符号可见性的方法（即符号是否暴露给链接器）。这是一篇关于如何在 GCC 中执行此操作的文章：

[http://gcc.gnu.org/wiki/Visibility](http://gcc.gnu.org/wiki/Visibility)

您应该能够轻松找到其他编译器的相应文档。

在可移植代码中，这通常使用每个编译器宏来处理。

# java - 如何将提取的轮廓保存为单独的数据类型

> ID：15112574
> 
> 赞同：1
> 
> 时间：2013-02-27T12:49:48.557
> 
> 标签：java, android, opencv, contour

我是新手`openCV`，因此我有一些问题。

到目前为止，我的代码如下所示：

```
List<MatOfPoint> contours = mDetector.getContours();
Imgproc.drawContours(mRgba, contours, -1, CONTOUR_COLOR); 
```

此代码绘制提取的轮廓。我想保存在`array`. 我的图像大小是`480*800`.

# java - 可以构造泛型类型的泛型方法

> ID：15112576
> 
> 赞同：2
> 
> 时间：2013-02-27T12:49:50.497
> 
> 标签：java, generics

我将测试用例添加到测试套件中，如下所示：

```
for(String methodName : getPublicDeclaredMethods(TestA.class))
{
    this.addTest((new TestA(methodName)));
}

for(String methodName : getPublicDeclaredMethods(TestB.class))
{
    this.addTest((new TestB(methodName)));
} 
```

这相当于这样做：

```
this.addTest((new TestA("TEST_METHOD_1")));
this.addTest((new TestA("TEST_METHOD_2")));
this.addTest((new TestB("TEST_METHOD_1")));
this.addTest((new TestB("TEST_METHOD_3")));  // woops I forgot TEST_METHOD_2 
```

我坚持使用这个奇怪的测试框架，其中方法名称通过构造作为字符串提供。

我上面的代码保证我添加了特定类中定义的所有测试用例。但是，我想要一个看起来像这样的方法：

```
void <T> addTestCasesFromClass()
{
    for(String methodName : getPublicDeclaredMethods(T.class))
    {
        this.addTest((new T(methodName)));
    }
} 
```

但我不确定这是如何在 Java 中完成的。甚至可能吗？TestA 和 TestB 派生自 Test 类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:02:15.387

泛型在这里没用，因为你不能做类似`new T`. 但是你可以通过更多的反思来做到这一点。鉴于您传递给此方法的所有类都有一个构造函数，该构造函数只接受一个 String 参数。

```
void addTestCasesFromClass(Class<?> clz)
{
     for(String methodName : getPublicDeclaredMethods(clz))
     { 
         this.addTest(clz.getConstructor(String.class).newInstance(methodName));
     }
} 
```

然后一个电话看起来像这样

```
addTestCasesFromClass(TestA.class); 
addTestCasesFromClass(TestB.class); 
```

如果您的`addTest`方法只接受某个基类的对象（让它成为`TestBase`），那么将泛型参数更改`clz`为`Class<? extends TestBase> clz`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:02:36.383

当您只有对 Generic 类型的引用时，您无法实例化。泛型仅在编译时可用，因此您不能在运行时使用它们。这意味着您将需要对实际类 Class 的引用并通过反射将其实例化。

```
Class<?> clazz = ...
Object instance = clazz.newInstance(); 
```

*不过，鼓励使用 getConstructor 。*

一个很好的例子是 java 中的 List.toArray 方法，它要求您传递数组的一个实例，以便它能够实际引用该类，因为泛型在运行时不可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T13:03:16.057

您可以使用反射来查找您传递的接受字符串参数的类的构造函数。然后使用您检索的方法名称实例化您的类。

```
public <T> void addTestClassesFromClass(T item){
    try {
        Constructor<?> constructor = item.getClass().getConstructor(String.class);
        for(String methodName : getPublicDeclaredMethods(item.getClass())){
            this.addTest((constructor.newInstance(methodName)));
        }
    } catch (Exception e) {
        System.out.println("Oh crap!");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T13:06:20.047

这是我的尝试：

```
public void addTestCasesFromClass(Class<? extends Test> c) throws IllegalArgumentException, SecurityException, InstantiationException, IllegalAccessException, InvocationTargetException, NoSuchMethodException
{
    for(String methodName : getPublicDeclaredMethods(c))
    {
        this.addTest((c.getDeclaredConstructor(String.class).newInstance(methodName)));
    }
} 
```

# web-services - 自定义 JBoss CXF WSDL

> ID：15112579
> 
> 赞同：0
> 
> 时间：2013-02-27T12:49:52.863
> 
> 标签：web-services, jboss, cxf

我刚刚为 JBoss 5.2 而不是本机堆栈安装了 CXF。

1°/ 因此，当我们使用本机堆栈时，新生成的 wsdl 以 'wsdl:definitions' 而不是 'definitions' 开头。

有人知道在哪里删除这个前缀吗？

2°/ 当我们向 WS 发送 Soap 查询时，响应开始于：

```
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope"> 
```

代替：

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"> 
```

有人知道在哪里更改此前缀吗？

**注意**：我们无法访问 java 代码，这应该在 JBoss 配置文件或类似的东西中配置。

谢谢，

# angularjs - 如何在 AngularJS 中使用 $scope.$watch 和 $scope.$apply？

> ID：15112584
> 
> 赞同：1116
> 
> 时间：2013-02-27T12:50:07.783
> 
> 标签：angularjs, angularjs-scope

我不明白如何使用`$scope.$watch`和`$scope.$apply`。官方文档没有帮助。

我不明白的具体内容：

*   它们是否连接到 DOM？
*   如何更新模型的 DOM 更改？
*   它们之间的连接点是什么？

我试过[这个教程](http://css.dzone.com/articles/drag-and-drop-angularjs-using)，但它需要理解`$watch`和`$apply`理所当然。

做什么`$apply`和`$watch`做什么，以及如何正确使用它们？

* * *

## 回答 #1

> 赞同：1776
> 
> 时间：2013-02-27T13:14:33.173

您需要了解 AngularJS 的工作原理才能理解它。

## 摘要循环和 $scope

首先，AngularJS 定义了一个所谓的**摘要循环**的概念。这个循环可以被认为是一个循环，在这个循环中，AngularJS 会检查所有s**观察**到的所有变量是否有任何变化`$scope`。因此，如果您已`$scope.myVar`在控制器中定义并且此变量被**标记为被监视**，那么您就隐含地告诉 AngularJS 监视`myVar`循环的每次迭代中的更改。

一个自然的后续问题是：一切都与`$scope`被监视有关吗？幸运的是，没有。如果您要注意`$scope`. 这就是为什么 AngularJS 团队给了我们两种方法来声明某个`$scope`变量被监视（阅读下文）。

## $watch 有助于监听 $scope 的变化

有两种方法可以将`$scope`变量声明为被监视。

1.  通过表达式在模板中使用它`<span>{{myVar}}</span>`
2.  通过`$watch`服务手动添加

广告 1) 这是最常见的场景，我相信你以前见过，但你不知道这在后台创建了一个手表。是的，它有！使用 AngularJS 指令（例如`ng-repeat`）也可以创建隐式监视。

广告 2) 这就是您创建自己的**手表**的方式。当附加到的某些值发生更改`$watch`时，服务可以帮助您运行一些代码。`$scope`它很少使用，但有时很有帮助。例如，如果您想在每次“myVar”更改时运行一些代码，您可以执行以下操作：

```
function MyController($scope) {

    $scope.myVar = 1;

    $scope.$watch('myVar', function() {
        alert('hey, myVar has changed!');
    });

    $scope.buttonClicked = function() {
        $scope.myVar = 2; // This will trigger $watch expression to kick in
    };
} 
```

## $apply 可以将更改与摘要循环集成

您可以将该**`$apply`功能视为一种集成机制**。你看，每次你改变一些直接**附加到`$scope`**对象的被监视变量时，AngularJS 都会知道改变已经发生。这是因为 AngularJS 已经知道要监视这些更改。因此，如果它发生在框架管理的代码中，摘要循环将继续进行。

但是，有时您想**更改 AngularJS 世界之外的某些值**并查看更改正常传播。考虑这一点 - 你有一个`$scope.myVar`将在 jQuery 的`$.ajax()`处理程序中修改的值。这将在未来的某个时候发生。AngularJS 不能等待这种情况发生，因为它没有被指示等待 jQuery。

为了解决这个问题，`$apply`已经推出。它使您可以明确地启动消化周期。但是，您应该只使用此方法将一些数据迁移到 AngularJS（与其他框架集成），而不要将此方法与常规 AngularJS 代码结合使用，因为 AngularJS 会抛出错误。

## 所有这些与 DOM 有什么关系？

好吧，既然您已经了解了这一切，那么您真的应该再次按照本教程进行操作。摘要循环将通过评估附加到所有 s 的每个观察者来确保 UI 和 JavaScript 代码保持同步，`$scope`只要没有任何变化。如果摘要循环中不再发生更改，则认为它已完成。

您可以在控制器中显式地将对象附加到对象，也可以直接在视图`$scope`中以表单形式声明它们。`{{expression}}`

进一步阅读：

*   *[制作你自己的 AngularJS，第 1 部分：范围和摘要](http://teropa.info/blog/2013/11/03/make-your-own-angular-part-1-scopes-and-digest.html)*

* * *

## 回答 #2

> 赞同：162
> 
> 时间：2013-02-28T00:48:42.743

在 AngularJS 中，我们更新我们的模型，我们的视图/模板“自动”更新 DOM（通过内置或自定义指令）。

$apply 和 $watch 都是 Scope 方法，与 DOM 无关。

[概念](http://docs.angularjs.org/guide/concepts)页面（ “运行时”部分）对 $digest 循环、$apply、$evalAsync 队列和 $watch 列表有很好的解释。这是文本随附的图片：

![$digest 循环](../Images/a8e8374effc6bc888c4958263605cd2f.png)

任何可以访问范围的代码——通常是控制器和指令（它们的链接函数和/或它们的控制器）——都可以设置一个“ [watchExpression](http://docs.angularjs.org/api/ng.$rootScope.Scope#$watch) ”，AngularJS 将针对该范围进行评估。每当 AngularJS 进入它的 $digest 循环（特别是“$watch list”循环）时，就会发生这种评估。你可以观察单个作用域属性，你可以定义一个函数来同时观察两个属性，你可以观察一个数组的长度，等等。

当事情发生在“AngularJS 内部”时——例如，你输入一个启用了 AngularJS 双向数据绑定的文本框（即，使用 ng-model），触发一个 $http 回调等等——$apply 已经被调用了，所以我们'在上图中的“AngularJS”矩形内。所有 watchExpressions 都将被评估（可能不止一次——直到没有检测到进一步的变化）。

当事情发生在“AngularJS 之外”时——例如，你在指令中使用了 bind()，然后该事件触发，导致你的回调被调用，或者一些 jQuery 注册的回调被触发——我们仍然在“Native”矩形中。如果回调代码修改了任何 $watch 正在观察的东西，调用 $apply 进入 AngularJS 矩形，导致 $digest 循环运行，因此 AngularJS 会注意到变化并发挥它的魔力。

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2016-04-22T13:06:59.507

AngularJS 扩展了这个*事件循环*，创建了一个名为`AngularJS context`.

**$手表()**

每次在 UI 中绑定某些内容时，都会*`$watch`在`$watch`list*中插入一个。

```
User: <input type="text" ng-model="user" />
Password: <input type="password" ng-model="pass" /> 
```

这里我们有`$scope.user`，它绑定到第一个输入，我们有`$scope.pass`，它绑定到第二个输入。这样做我们将两个*`$watch`es 添加到`$watch`列表中*。

当我们的*模板*被加载时，也就是链接阶段，编译器将查找每个指令并创建所有`$watch`需要的 es。

AngularJS 提供`$watch`,`$watchcollection`和`$watch(true)`. 下面是一个简洁的图表，详细解释了从[观察者](http://teropa.info/blog/2014/01/26/the-three-watch-depths-of-angularjs.html)那里获取的所有三个。

[![在此处输入图像描述](../Images/4208b688af6d8358e26d65423871db61.png)](https://i.stack.imgur.com/7AaPl.png)

```
angular.module('MY_APP', []).controller('MyCtrl', MyCtrl)
function MyCtrl($scope,$timeout) {
  $scope.users = [{"name": "vinoth"},{"name":"yusuf"},{"name":"rajini"}];

  $scope.$watch("users", function() {
    console.log("**** reference checkers $watch ****")
  });

  $scope.$watchCollection("users", function() {
    console.log("**** Collection  checkers $watchCollection ****")
  });

  $scope.$watch("users", function() {
    console.log("**** equality checkers with $watch(true) ****")
  }, true);

  $timeout(function(){
     console.log("Triggers All ")
     $scope.users = [];
     $scope.$digest();

     console.log("Triggers $watchCollection and $watch(true)")
     $scope.users.push({ name: 'Thalaivar'});
     $scope.$digest();

     console.log("Triggers $watch(true)")
     $scope.users[0].name = 'Superstar';
     $scope.$digest();
  });
} 
```

[http://jsfiddle.net/2Lyn0Lkb/](http://jsfiddle.net/2Lyn0Lkb/)

### `$digest`环形

当浏览器接收到可以由 AngularJS 上下文管理的事件时，`$digest`将触发循环。这个循环由两个较小的循环组成。一个处理`$evalAsync`队列，另一个处理`$watch list`. 将`$digest`遍历`$watch`我们拥有的列表

```
app.controller('MainCtrl', function() {
  $scope.name = "vinoth";

  $scope.changeFoo = function() {
      $scope.name = "Thalaivar";
  }
});

{{ name }}
<button ng-click="changeFoo()">Change the name</button> 
```

这里我们只有一个`$watch`，因为 ng-click 不会创建任何手表。

我们按下按钮。

1.  浏览器接收到一个将进入 AngularJS 上下文的事件
2.  循环将`$digest`运行并询问每个 $watch 是否有更改。
3.  由于`$watch`正在监视 $scope.name 更改的 which 报告了更改，因此它将强制执行另一个`$digest`循环。
4.  新循环不报告任何内容。
5.  浏览器取回控制权并更新 DOM，反映 $scope.name 的新值
6.  这里重要的是每个进入 AngularJS 上下文的事件都会运行一个`$digest`循环。这意味着每次我们在输入中写一个字母时，循环都会运行检查`$watch`此页面中的每个字母。

### $申请（）

如果您`$apply`在触发事件时调用，它将通过角度上下文，但如果您不调用它，它将在它之外运行。就是这么简单。*`$apply`将在内部调用`$digest()`*循环，并遍历所有手表以确保 DOM 使用新更新的值进行更新。

该`$apply()`方法将触发整个`$scope`链上的观察者，而该`$digest()`方法只会触发当前`$scope`及其`children`. *当没有更高级别的`$scope`对象需要知道本地更改时，您可以使用`$digest()`.*

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2016-11-20T16:28:37.220

`$watch`我在以下位置找到了涵盖、`$apply`和`$digest`摘要 周期的非常深入的视频：

*   *[AngularJS - 了解 Watcher、$watch、$watchGroup、$watchCollection、ng-change](https://www.youtube.com/watch?v=VS6vDlsqW7o&list=PLvZkOAgBYrsS_ugyamsNpCgLSmtIXZGiz&index=14)*

*   *[AngularJS - 了解摘要循环（摘要阶段或摘要过程或摘要循环）](https://www.youtube.com/watch?v=SYuc1oSjhgY&list=PLvZkOAgBYrsS_ugyamsNpCgLSmtIXZGiz&index=15)*

*   *[AngularJS 教程 - 理解 $apply 和 $digest（深入）](https://www.youtube.com/watch?v=3m41zdbWboE&list=PLvZkOAgBYrsS_ugyamsNpCgLSmtIXZGiz&index=16)*

以下是这些视频中用于解释概念的几张幻灯片（以防万一，如果上述链接被删除/不起作用）。

[![在此处输入图像描述](../Images/872f47f1a5be9a2402e541a0cfb4f40e.png)](https://i.stack.imgur.com/XAR8i.png)

在上图中，“$scope.c”没有被监视，因为它没有用于任何数据绑定（在标记中）。其他两个 (`$scope.a`和`$scope.b`) 将被观看。

[![在此处输入图像描述](../Images/884fb3276f03c8e36449c29fb9881ec1.png)](https://i.stack.imgur.com/ioG04.png)

从上图中：AngularJS 根据各自的浏览器事件捕获事件，执行摘要循环（遍历所有监视以进行更改），执行监视函数并更新 DOM。如果不是浏览器事件，可以使用`$apply`或手动触发摘要循环`$digest`。

更多关于`$apply`和`$digest`：

[![在此处输入图像描述](../Images/bfcae227ffc991963cbbfe322e2faf19.png)](https://i.stack.imgur.com/LuBhi.png)

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2015-03-18T10:50:18.770

有`$watchGroup`，`$watchCollection`也有。具体来说，`$watchGroup`如果你想调用一个函数来更新一个在不是 dom 对象的视图中具有多个属性的对象，例如画布、**WebGL**或服务器请求中的另一个视图，这真的很有帮助。

在这里，文档[链接](https://docs.angularjs.org/api/ng/type/$rootScope.Scope)。

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2017-02-07T01:20:51.990

读完以上所有内容，无聊而困倦（对不起，但这是真的）。非常技术性，深入，详细和干燥。我为什么要写作？因为 AngularJS 非常庞大，许多相互关联的概念会让任何人发疯。我经常问自己，我不够聪明，无法理解他们吗？不！这是因为很少有人能用一种没有所有术语**的傻瓜语言来解释这项技术！**好吧，让我试试：

**1）它们都是事件驱动的东西。**（我听到笑声，但请继续阅读）

如果您不知道什么是事件驱动然后认为您在页面上放置了一个按钮，使用“点击”将其与一个功能挂钩，等待用户点击它以触发您在页面中植入的操作功能。或者想想 SQL Server / Oracle 的“触发器”。

**2） $watch 是“点击”。**

有什么特别之处在于它需要 2 个函数作为参数，第一个给出事件的值，第二个考虑值...

**3) $digest 是一个不知疲倦地到处检查的老板**，bla-bla-bla 但是一个好老板。

**4) $apply 为您提供手动操作的方式**，例如防故障（如果单击不启动，则强制它运行。）

> **现在，让我们让它可视化。想象一下，这样更容易抓住这个想法：**

**在一家餐馆，**

**- 服务员**

应该接受客户的订单，这是

```
$watch(
  function(){return orders;},
  function(){Kitchen make it;}
); 
```

**- 经理**跑来跑去确保所有服务员都醒着，对客户的任何变化迹象做出反应。这是`$digest()`

**- OWNER**拥有根据要求驾驶每个人的终极权力，这是`$apply()`

# android - java.lang.NullPointerException 使用 context.getExternalCacheDir();

> ID：15112585
> 
> 赞同：1
> 
> 时间：2013-02-27T12:50:08.593
> 
> 标签：android, nullpointerexception, android-file

目前在我的应用程序中，当我使用 context.getExternalCacheDir() 时，我报告了 NullPointerExceptions，NullPointerException 发生在 !cacheDir.exists() 中，cacheDir 为 null，此时抛出 NullPointerException；

奇怪的是，之前我检查是否安装了外部存储。这是代码：

```
public FileCache(Context context){
    if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
        cacheDir= context.getExternalCacheDir();
    // sometimes return null even the external storage mounted
    else
        cacheDir=context.getCacheDir();
    if(!cacheDir.exists()) // if cacheDir is null throws NullPointerException
        cacheDir.mkdirs();
} 
```

请注意，在我的 androidManifest.xml 中，我有权写入外部存储：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

# mysql - 修复错误mysql服务器已经消失

> ID：15112588
> 
> 赞同：4
> 
> 时间：2013-02-27T12:50:24.630
> 
> 标签：mysql

我的 VPS 经常无法*“MySQL 服务器已消失（错误 2006）”*并失去连接。我在 my.cnf 中增加了变量的值，但情况没有改善。这是我的.cnf：

```
[mysqld]
port            = 3306
socket          = /var/lib/mysql/mysql.sock
default-storage-engine=myisam
datadir=/var/lib/mysql
old_passwords=1
skip-bdb
skip-innodb
max_allowed_packet = 256M
table_cache= 512M
wait_timeout = 180
max_connections = 2000
net_read_timeout= 180
query_cache_size = 512M
query_cache_limit = 512M
max_user_connections=300

[client] 
socket=/var/lib/mysql/mysql.sock
max_allowed_packet = 128M
[mysqld_safe]
log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T14:00:59.643

如果有一些查询需要更长的时间或者如果您获得的结果集非常大，请将您的`wait_timeout`和增加到大于 180 秒（3 分钟）的时间，例如 3600 秒。如果您的结果集非常大，`net_read_timeout`您可能还希望增加到大于 256M 的值。`max_allowed_packet`

# iphone - 获取对象是否也获取核心数据中的关系对象

> ID：15112589
> 
> 赞同：7
> 
> 时间：2013-02-27T12:50:28.713
> 
> 标签：iphone, ios

我在核心数据中有一对多的关系 b/w 对象。Like A==>>B(many objects) 所以 A 与 B 对象具有一对多的关系。我的问题是，当我获取 A 对象时，B 对象是否也被加载到内存中？如果否，那么它们何时加载？当我访问关系？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T12:58:16.720

在大多数情况下，它不会。这是一种在核心数据中称为[故障的机制。](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdFaultingUniquing.html)当您请求尚未实现的对象（即加载到内存中）时，该框架会在后台处理实现错误。

> 故障处理是透明的——您不必执行获取来实现故障。如果在某个阶段访问了故障对象的持久属性，那么 Core Data 会自动检索该对象的数据并初始化该对象（请参阅 NSManagedObject 类参考以获取不会导致故障触发的方法列表）。这个过程通常被称为触发故障。如果你向 Department 对象发送一条消息来获取它的名称，那么就会触发错误——在这种情况下，Core Data 会执行一次获取来检索所有对象的属性。

因此，在您的示例中，如果您加载 A，Core Data 将使 B 实例出错（即不将它们加载到内存中），当您实际尝试访问 B 时，它会意识到错误（即加载到内存中）。

相反，有时您已经在内存中加载了对象并且您想“卸载”它们。这被称为将对象变成故障。

> 您可以使用 refreshObject:mergeChanges: 方法将已实现的对象变为故障。如果您将 NO 作为 mergeChanges 参数传递，则必须确保该对象的关系没有更改。如果有，然后您保存上下文，您将向持久存储引入参照完整性问题。

# java - 获取类实例变量并使用反射打印它们的值

> ID：15112590
> 
> 赞同：17
> 
> 时间：2013-02-27T12:50:41.450
> 
> 标签：java, reflection

我有 2 个带有 getter 和 setter 的 POJO 类，现在我正在尝试获取该类的所有类实例变量。

我知道我们可以使用反射怎么做呢？

这是我的 POJO 类，它将扩展我的反射类。

```
class Details{

private int age;
private String name;

} 
```

反射类是这样的：

```
class Reflection{

public String toString(){

return all the fields of that class
} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-27T12:58:19.427

你可以这样做：

```
public void printFields(Object obj) throws Exception {
    Class<?> objClass = obj.getClass();

    Field[] fields = objClass.getFields();
    for(Field field : fields) {
        String name = field.getName();
        Object value = field.get(obj);

        System.out.println(name + ": " + value.toString());
    }
} 
```

*这只会打印公共字段，以递归方式打印私有字段使用 class.getDeclaredFields。*

或者，如果您要扩展该类：

```
public String toString() {
    try {
        StringBuffer sb = new StringBuffer();
        Class<?> objClass = this.getClass();

        Field[] fields = objClass.getFields();
        for(Field field : fields) {
            String name = field.getName();
            Object value = field.get(this);

            sb.append(name + ": " + value.toString() + "\n");
        }

        return sb.toString();
    } catch(Exception e) {
        e.printStackTrace();
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-08T20:09:25.620

```
 ClassLoader classLoader = Main.class.getClassLoader();
    try {
        Class cls = classLoader.loadClass("com.example.Example");
        Object clsObject = cls.newInstance();

        Field[] fields = cls.getFields();
        for (Field field : fields) {
            String name = field.getName();
            Object value = field.get(clsObject);

            System.out.println("Name : "+name+" Value : "+value);

        }
        System.out.println(cls.getName());

    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InstantiationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-15T09:40:45.100

在上面的代码中再添加一行。如果您想访问该类的私有属性，请使用以下行

field.setAccessible(true);

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-27T04:10:13.183

上面提到的解决代码或答案有一个问题。要访问私有变量的值，其访问类型必须设置为 true

```
Field[] fields = objClass.getDeclaredFields();
for (Field field : fields) {
    NotNull notNull = field.getAnnotation(NotNull.class);
    field.setAccessible(true);
} 
```

否则它会抛出`java.lang.IllegalAccessException`. 类反射不能访问带有修饰符“private”的类详细信息的成员

# c# - OnItemDataBound 不会在嵌套的中继器上触发？

> ID：15112593
> 
> 赞同：2
> 
> 时间：2013-02-27T12:50:52.720
> 
> 标签：c#, asp.net

我在另一个中继器的 ItemTemplate 中有一个嵌套中继器。我向转发器添加了一个 OnItemDataBound 函数，但代码不执行

aspx

```
<asp:Repeater ID="rptComponents" runat="server" OnItemDataBound="rptComponents_ItemDataBound">
            <HeaderTemplate>
            </HeaderTemplate>
            <ItemTemplate>
                <div class="row-fluid">
                    <div class="span2">
                        <asp:Repeater ID="rptComponentsImages" runat="server" OnItemDataBound="rptComponentsImages_ItemDataBound">
                            <HeaderTemplate>
                                <ul class="bxslider">
                            </HeaderTemplate>
                            <ItemTemplate>
                                <li>
                                    <img src="<%# Eval("CKCI_File")%>" /></li>
                            </ItemTemplate>
                            <FooterTemplate>
                                <li runat="server" id="liNoData" visible="false">
                                    <img src="http://placehold.it/132&text=No image" alt=""></li>
                                </ul>
                            </FooterTemplate>
                        </asp:Repeater>
                    </div>
                    <div class="">
                        <%# Eval("CKC_Title") %>
                    </div>

                </div>
            </ItemTemplate>
            <FooterTemplate>
            </FooterTemplate>
        </asp:Repeater> 
```

编码

```
protected void rptComponents_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {
        if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
        {

            ClutchKitComponent rd = (ClutchKitComponent)e.Item.DataItem;

            List<ClutchComponentImage> kitComponentImages = (List<ClutchComponentImage>)rd.images;

            Repeater rt = (Repeater)e.Item.FindControl("rptComponentsImages");
            rt.DataSource = kitComponentImages;
            rt.DataBind();

        }
    }

    protected void rptComponentsImages_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {
        Repeater rt = (Repeater)sender;
        if (rt.Items.Count < 1)
        {
            if (e.Item.ItemType == ListItemType.Footer)
            {
                e.Item.FindControl("liNoData").Visible = true;
            }
        }
    } 
```

第二个功能不执行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:36:08.063

我在其中一个列表上有一个空值，所以它抛出了一个我没有抓住的前任。即使没有数据，也会触发 OnItemDataBound。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:17:18.427

你有里面的中继器的 ItemDataBound 事件吗？您是否尝试在 ItemCreated 或第一个 ItemDataBound 事件中添加该事件？

```
rt.ItemDataBound += new RepeaterItemEventHandler(rt_ItemDataBound); 
```

检查此链接以获取嵌套中继器。[http://www.codeproject.com/Articles/20230/Nesting-Data-bound-Repeater-Controls-in-ASP-Net](http://www.codeproject.com/Articles/20230/Nesting-Data-bound-Repeater-Controls-in-ASP-Net)

# dart - Dart + Web-UI 和动态客户端模板

> ID：15112594
> 
> 赞同：0
> 
> 时间：2013-02-27T12:51:01.117
> 
> 标签：dart, dart-webui

有没有什么好的方法来构建带有 Web-UI 的 Dart 应用程序并通过网络动态加载新的 HTML 模板（客户端模板）？

看起来 Web UI 模板总是与生成的 *.js 文件一起加载：

```
 <head>
    <!-- this will be transformed by WebUI compiler to *_generated.js code -->
    <link rel="components" href="common_templates.html"> 
  </head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:03:11.773

目前无法使用 WebUI 动态加载和处理模板。WebUI 需要提前处理模板。我认为来自其他答案/评论的@ChrisBuckett 建议将是一个很好的方法：在可用时使用延迟加载。

另一个疯狂的想法是将 web-ui 编译器与您的应用程序一起提供并在浏览器中处理模板。注意，这在今天甚至是不可能的，因为 web-ui 目前不能用 dart2js 编译（它对 dart:io 有一些依赖）。假设，如果可能的话，它可能会比运送额外的模板要大得多。因此，如果您的目标是减少初始下载量，那么这个想法是行不通的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:56:05.923

现在可以执行 Dart 代码的延迟加载。如果你的客户端模板被实现为 Dart 源，你可以使用[DeferredLibrary](http://api.dartlang.org/docs/bleeding_edge/dart_async/DeferredLibrary.html)类。

Dart 网站的[文章部分](http://www.dartlang.org/articles/)可能很快会出现更详细的文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T02:50:45.103

我正在开发一个单页应用程序，该应用程序根据左侧选择的菜单将新内容动态加载到页面的内容部分。内容部分是从 WebUi 组件中填充的，但它确实是动态发生的，并且确实发生在客户端。在菜单上，我有类似的东西；

```
 <li> <a href="#/active">Active</a> </li>
        <li> <a href="#/completed">Completed</a> </li> 
```

当单击菜单项时，我让应用程序响应哈希更改。他们在 ToDo 应用程序的 WebUi 实现中做了类似的事情。

该内容具有一个条件模板，该模板根据所选菜单加载 WebUi 组件。

这可能不是你的想法。如果我在这里偏离轨道，请提供更多详细信息。

# nginx - nginx 504 网关超时

> ID：15112596
> 
> 赞同：3
> 
> 时间：2013-02-27T12:51:14.840
> 
> 标签：nginx, gateway

我尝试了以下建议：

[如何在 Nginx 上使用 FastCGI 防止网关超时](https://stackoverflow.com/questions/561946/how-do-i-prevent-a-gateway-timeout-with-nginx)

nginx.conf（在 http 部分 {} 内）

```
#prevent gateway timeout
client_header_timeout 1000000;
client_body_timeout 1000000;
send_timeout 1000000;
fastcgi_read_timeout 1000000; 
```

但大约 60 秒后，我收到错误 504 网关超时。我们在 apache 前面有 nginxx，所以我不确定 apache 是否导致错误，但我们得到一个 504 网关超时，这显然来自 nginx

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T13:28:01.743

[504 HTTP响应代码](https://en.wikipedia.org/wiki/List_of_HTTP_status_codes#5xx_Server_Error)的定义是：“服务器充当网关或代理，没有收到来自上游服务器的及时响应。” 因此，首先处理后端服务器的问题是有意义的。

您应该检查直接向后端服务器发出请求会发生什么。需要多长时间才能回复？

请注意，使用 Apache，您可以配置日志以包含处理请求所花费的时间。请参阅[mod_log_config](https://httpd.apache.org/docs/2.2/mod/mod_log_config.html)`%t`的和`%T`选项。

如果 Nginx 可以访问后端服务器，那么您也可以从命令行访问。这是执行请求和计时请求的示例语法：

```
time -p GET -H 'Host: publicname.com'  http://127.0.0.1:8080/path/to/request 
```

“GET”工具是`libwww-perl`类似 Ubuntu 的 Linux 发行版上可用的软件包的一部分。通过发送“Host:”标头，您正在生成一个请求，就像 Nginx 一样。

# javascript - 元素在页面上的位置不正确，直到窗口调整大小

> ID：15112597
> 
> 赞同：2
> 
> 时间：2013-02-27T12:51:17.540
> 
> 标签：javascript, css, xhtml

我有一个网页，其中包含几个包含单个“页面”的 Div。我定义了以下 CSS 样式：

```
@charset "utf-8";
/* CSS Document */

.hideDiv{
    display:none;
}

.showDiv{
    display: inline;
} 
```

一切正常，很长一段时间以来，我们在 Mac 上的 Safari 或 IE6（我们的客户使用）中查看我们的页面都没有问题。

然后我们从 4.0.5 更新了 Safari，我们突然发现页面元素最初出现的位置不正确。第一页还可以，但是当您单击“下一步”时，位于布局右侧的图像最初会明显向右偏移，大部分位于其包含的 Div 剪裁大部分图像之外。但是，一旦我调整窗口大小，图像就会跳到正确的位置。如果您从第 2 页单击到第 3 页，然后再次单击返回到第 2 页，则图像已被缓存，它可以正确显示。

我们在一些 Mac 上痛苦地降级了 Safari，并与其他人一起努力，希望更新能够修复它。奇怪的是，在我运行 Safari 6 的新 Mac Pro 上一切正常。页面在 IE6 中始终显示良好。我运行 Safari 5.1.7 的 MacBook Pro 总是偏移图像。

我不认为这是浏览器问题，而是我的代码区域不是很健壮，并且某些浏览器不会像我们想要的那样解释代码。

我创建了与多 div 页面相同但仅包含一个“页面”的新 html 文件。每次我在 Safari 5.1.7 中显示时，布局都是固定的，所以我认为不是我的 html/CSS 定义了元素的位置。这是一个包含单个“页面”的典型 Div：

```
<!-- Page 1 -->
<div class="showDiv clear" id="page1">

    <div id="bgPic-components">

        <!-- Sub-Heading -->
        <h1>Sub-Heading</span></h1>

        <!-- Page Content Area -->
        <div class="contentTextArea fullWidth">

            <div style="position:absolute; width:280px; z-index:2;">
                <p>Some body text here.</p>
            </div>

            <table style="position:absolute; right:40px; bottom:40px; z-index:0;">
                <tr><td>
                    <img src="../../medialibrary/3DI/3DI0315.02.01.jpg" style="display:block; position:relative; height:440px;"/>
                    <p class="padCaption">Annotation</p>
                </td></tr>
            </table>

            <table style="position:absolute; bottom:24px; z-index:0;">
            <tr><td>
                <img src="../../medialibrary/photographs/P0825.01.01.jpg" alt="" style="display:block; position:relative; height:300px"/>
                <p class="padCaption">Annotation</p>
            </td></tr>
        </table>

        </div>

    </div>

</div> 
```

如果有任何建议可以帮助我缩小范围并找到问题，我将不胜感激。

问候

克里斯

# jquery - 删除销售价格：从字体标签

> ID：15112598
> 
> 赞同：0
> 
> 时间：2013-02-27T12:51:25.407
> 
> 标签：jquery

有以下 HTML，使用 JQuery 我想删除**销售价格：**我如何删除它，我尝试使用以下 Jquery 但它不起作用

**查询代码：**

```
$('Sale Price:').detach(); 
```

**HTML 代码：**

```
 <b class="cartvalB">
    <font class="pricecolor colors_productprice">
    Sale Price:
    <span class="cartvalB_span" itemprop="price">$175.00</span>
    </font>
    </b> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:58:49.117

这可以通过稍微更改您的标记并使用 javascript 来完成。我相信你也可以使用 jQuery 来做到这一点，但我并不那么熟悉。首先，你需要把你的文本放在一个可以被 javascript 访问的元素中。

```
<div id="myDiv" class="cartvalB">
   Sale Price:
</div> 
```

如果您在 ASP.Net 中执行此操作，您可以只使用标签控件。

现在，您想在 javascript 中访问 div：

```
function myScript(){
   var myDiv = document.getElementById('myDiv')
    myDiv.innerText =''
} 
```

这会更改 div 的内部文本。您还可以更改可见性、样式等。Div 就像所有 html 元素一样，具有可以通过 DOM 访问的一整套属性。在这里查看它们：http: [//msdn.microsoft.com/en-us/library/ie/ms535240%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ie/ms535240%28v=vs.85%29.aspx)

我只是随意放手，所以它没有经过测试，但应该稍微轻推一下。如果没有，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:02:48.147

你不能这样查询文本。您必须改为选择父元素，循环内容，然后查找（并删除）您需要的文本节点。参考 [如何使用 jQuery 选择文本节点？](https://stackoverflow.com/questions/298750/how-do-i-select-text-nodes-with-jquery)并[使用 jQuery 删除文本](https://stackoverflow.com/questions/1571076/remove-text-with-jquery)

例子：

```
var textContent = 'textContent' in document.body ? 'textContent' : 'innerText';

$('.colors_productprice').contents().filter(function()
{
  if(this.nodeType == 3)
  {
    var content = this[textContent];

    if(content == 'Sale Price:') return true; // found just this text node... now remove it
  }

  return false;
}).remove(); 
```

或者，您可以操作内部 HTML，例如：

```
var html = $('.colors_productprice').html();
html = html.replace('Sale Price:', '');
$('.colors_productprice').html(html); 
```

如果您将任何事件绑定到任何子元素，这可能会产生影响，`colors_productprice`但如果没有，那么这应该是一个安全且简单的解决方案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-27T12:58:41.410

```
var span = $('.cartvalB .cartvalB_span');
$('.cartvalB font').empty().append(span); 
```

应该做的伎俩

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-27T12:57:13.843

```
<script>
alert("HI...");
$(document).ready(function(){
alert($('span')[0].innerHTML);
$('span')[0].innerHTML = "";
alert($('span')[0].innerHTML);
});
</script>

</head>

<body>
<b class="cartvalB">
    <font class="pricecolor colors_productprice">
    <span>Sale Price:</span>
    <span class="cartvalB_span" itemprop="price">$175.00</span>
    </font>
    </b>
</body> 
```

# python - 如何检查 GQL 对象是否为空

> ID：15112602
> 
> 赞同：1
> 
> 时间：2013-02-27T12:51:35.223
> 
> 标签：python, google-app-engine, gql

我正在尝试检查 GQL 对象是否为空（在使用 Python 的 Google App Engine 中），我应该怎么做？我试过了，但没有用：

```
comments = db.GqlQuery("SELECT * "
                                "FROM Comment "
                                "where ANCESTOR IS :1 "
                                "order by date DESC", 
                                movie_data) 
        if comments:
            ratingsum = 0
            i=0
            for comment in comments:
                ratingsum=ratingsum + comment.rating
                i+=1
            average = ratingsum/i
        else:
            average = "no ratings" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:55:46.217

Gql 查询为您提供查询对象，但不提供结果（实体）。要获得结果，您必须获取结果：使用 fetch、count、get 或迭代结果集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:00:51.787

[根据@NickJohnson 的说法](https://stackoverflow.com/a/1943938/190597)，调用`count`需要执行两次相同的查询。因此，为了避免这种情况，并且由于您将不得不遍历评论，您还可以通过观察副作用来“检测”评论何时为空——`i`如果为空，则为零`comments`：

```
comments = db.GqlQuery("SELECT * "
                                "FROM Comment "
                                "where ANCESTOR IS :1 "
                                "order by date DESC", 
                                movie_data) 
ratingsum = 0
i = 0
for comment in comments:
    ratingsum += comment.rating
    i += 1
if i:    
    average = ratingsum/i
else:    
    average = "no ratings" 
```

# scala - 优化 Scala 代码时首先看哪里？

> ID：15112604
> 
> 赞同：21
> 
> 时间：2013-02-27T12:51:39.023
> 
> 标签：scala, optimization

我目前需要优化一个太慢的算法的 Scala 实现。它以函数方式实现，仅使用值 ( `val`) 和不可变数据结构。我已经记住了重要的函数（所以我的代码中有一些可变映射），这使我的代码速度提高了一倍，我想知道下一步该做什么。

所以，我不是在寻找关于软件优化的通用建议（例如，首先优化你的算法，使用分析器，做基准测试......），而是寻找特定于*Scala 或特定于 JVM 的优化建议*。

因此，我的问题是*在尝试优化 Scala 代码时首先要看哪里*？通常会导致速度变慢的***常见****语言结构或模式是*什么？

特别是，我正在就以下几点寻求建议：

*   我读到构造很慢，因为*每次*执行循环体时都会`for(...)`生成一个匿名类。是真的吗？还有其他地方可以生成匿名类吗？（例如，与匿名函数一起使用时）*`map()`*
**   在一般情况下，不可变集合是否比可变集合慢*得多*（尤其是在映射结构方面）？*   Scala 2.8、2.9 和 2.10 之间是否存在*显着的性能差异？**

 ** * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-27T16:03:47.607

过去我还必须优化很多 Scala 代码。以下内容并非完整列表，只是一些可能对您有所帮助的实际观察：

*   是的，用 a 替换`for`循环`while`更快，即使使用 Scala 2.10。有关详细信息，请参阅[评论中的链接谈话](https://docs.google.com/presentation/d/13SAn0Ru9g77T1EInCZ-7HVbEcqIMVQstVgjZFiBB4bA/present#slide=id.i0)。另外，请注意，使用“过滤”（您正在迭代的集合之后的条件）将导致您的条件被装箱/拆箱，这可能会对性能产生很大影响（[有关详细信息，请参阅此帖子](https://stackoverflow.com/a/15137509/1804173)）。

*   不可变与可变的问题可以简单地通过您必须执行的更新次数来回答，并且（对我而言）很难在这里给出一般性的答案。

*   到目前为止，我没有观察到 2.8、2.9 和 2.10 之间的显着性能差异。但显然这取决于手头的问题。例如，如果您的算法大量使用 Range.sum，您将观察到很大的差异（因为这在 2.10 中现在是 O(1)）。

*   我注意到使用相应的 Java 集合而不是 Scala 版本也可以显着提高速度（正如我所说的大约 5-10% 的粗略数字）。例如，对于一个非常具体的问题，我在微基准测试中得到了以下结果（显示的是运行时）（注意：不要从中概括；运行你自己的）。

    ```
    ColtBitVector          min:      0.042    avg:      0.245    max:     40.120
    JavaBitSet             min:      0.043    avg:      0.165    max:      4.306
    JavaHashSet            min:      0.191    avg:      0.716    max:     12.624
    JavaTreeSet            min:      0.313    avg:      1.428    max:     64.504
    ScalaBitSetImmutable   min:      0.380    avg:      1.675    max:     13.838
    ScalaBitSetMutable     min:      0.423    avg:      3.693    max:    457.146
    ScalaSetImmutable      min:      0.458    avg:      2.305    max:      9.998
    ScalaSetMutable        min:      0.340    avg:      1.332    max:     10.974 
    ```

    手头的问题是计算整数集的简单交集（具有非常具体的大小和集数）。我想证明的是：选择正确/错误的收藏会产生重大影响！同样，我认为很难给出一个一般性的建议来选择这些数据类型中的哪一种，因为这只告诉我们在这个特殊的交集问题中的性能（但我确实`HashSet`在一些情况下选择了 Java，而不是替代方案）。另外，请注意，此交集问题不需要可变数据类型。尽管如此，即使在不可变的功能中也可能存在性能差异（虽然关于`Set`它是可变集合明显更快，但它是不可变的集合`BitSet`）。因此，根据具体情况，您可能希望选择可变集合而不是不可变集合以获得最佳性能（小心使用！）。

*   有人告诉我，声明变量会`private[this] var foo = ...`阻止创建 getter/setter 函数并且应该更快（免责声明：我从未在微基准测试中确认过）。

*   在处理泛型类型时，`@specialized`为特定类型定义版本应该会加快速度。

*   尽管我尽量避免一概而论，但我可以接受以下几点：尝试使用本机数组。在我的许多基准测试中，我最终都使用了数组，考虑到它们在 JVM 中的实现，这是有道理的。

*   我想到了一个小点：我观察到通过`origCollection.toSomeCollectionName`手动构造和使用伴随对象（即`SomeCollectionName(origCollection :_*)`）构造集合的差异。在许多情况下，后者明显更快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T13:02:03.883

您的代码在运行时是否会实例化大量对象？`case`例如，Scala类或`map`/`flatMap`的链可能会导致创建大量“不必要的”对象。这可能会减慢代码的速度，并对垃圾收集器施加更多的工作。*

# php - 我的更新表格不会更新以前的数据

> ID：15112606
> 
> 赞同：0
> 
> 时间：2013-02-27T12:51:42.813
> 
> 标签：php, mysql, sql-update, prepared-statement

我想有一种更清洁的方法，但我试图归档我可以在更新表单中编辑数据。问题是更新查询不起作用。谁能指出所犯的错误。不管怎么说，还是要谢谢你。

```
public function editData()
{
    if (isset($_GET['pid']))
    {
        $target = $_GET['pid'];
        if($edit = $this->db->prepare("SELECT id, title, price, description, address, includ, duration FROM trips WHERE id=?"))
        {
            $edit->bind_param('i', $target);
            $edit->execute();
            $edit->store_result();
            $edit->bind_result($id, $name, $price, $description, $address, $includ, $duration);
            $edit->fetch();
            $this->editForm($id, $name, $price, $description, $address, $includ, $duration);
        }
        else
        {
            echo "something went wrong";
        }
    }
} 
```

```
public function editForm($id, $name, $price, $description, $address, $includ, $duration)
{
    $add .= '<form name="invent" method="post"  action="index.php?res=resources&adm=admin&page=inventory.php&pid=$id" class="ínvent" enctype="multipart/form-data">';
    $add .= '<fieldset>';
    $add .= '<legend>Add products</legend>';
    $add .= "<label for='name'></label>";
    $add .= "<input type='text' name='user' value='".$name."' />";
    $add .= '</br>';
    $add .= "<label for='price'>price</label>";
    $add .= "<input type='number' name='price' value='".$price."'  />";
    $add .= '</br>';
    $add .= "<label for='description'>description</label>";
    $add .= "<textarea name='description' rows='10' cols= '80'>'".$description."' </textarea>";
    $add .= '</br>';
    $add .= "<label for='address'>address</label>";
    $add .= "<input name='address'  type='text' value='".$address."'>";
    $add .= '</br>';
    $add .= "<label for='include'>Including</label>";
    $add .= "<input name='include'  type='text' value='".$includ."'>";
    $add .= '</br>';
    $add .= "<label for='duration'>duration</label>";
    $add .= "<input name='duration'  type='text' value='".$duration."'>";
    $add .= '</br>';
    $add .= "<label for='img'>img</label>";
    $add .= "<input name='image'  type='file'>";
    $add .= '</br>';
    $add .="<input type='submit' name='update'/>";
    $add .= '</fieldset>';
    $add .= '</form>';
    echo $add;

    if(isset($_POST['update']))
    {   
        $update_name = $_POST['user'];
        $update_price = $_POST['price'];
        $update_description = $_POST['description'];
        $update_address = $_POST['address'];
        $update_includ = $_POST['include'];
        $update_duration = $_POST['duration'];

        if ($update = $this->db->prepare("UPDATE trips SET title = ?, price = ? , description = ?, address = ?, includ = ?, duration = ?  WHERE id=?"))
        {
            $update->bind_param("ssssssi", $update_name, $update_price, $update_description, $update_address, $update_includ, $update_duration, $id);
            $update->execute();
        }
        else
        {
            echo "couldnt update";
        }
        header("Location: index.php?res=resources&adm=admin&page=inventory.php");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:07:58.533

one issue i see is that you issue an "echo" before calling "header(...)" in your update check routine so the page will not redirect as intended

Quote "Remember that header() must be called before any actual output is sent, either by normal HTML tags, blank lines in a file, or from PHP." [see PHP header manual](http://php.net/manual/en/function.header.php)

# c - 为用户给定的长度生成给定字符（A，B，C）的所有可能排列，以在 C 中创建字符串

> ID：15112619
> 
> 赞同：-2
> 
> 时间：2013-02-27T12:52:15.810
> 
> 标签：c, permutation

我必须使用给定字符 ABC 为用户给出的长度生成一个字符串。假设如果用户给出 4 作为长度，那么代码应该显示如下：

```
AAAA  
AAAB  
AAAC  
AABA    
.  
.  
.  
CCCC. 
```

我可以生成字符串 ABC 的排列。但我的问题是，如果用户输入 4、5 或 6，而不是我如何生成仅包含 A、B、C 的 4、5 或 6 个字符的排列，请帮忙。能否请您提供代码或如何编码的步骤。

任何提示、想法或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:55:26.527

将排列表示为数字系统中以 4 为基数的数字。将 A 映射到 0，将 B 映射到 1 C 到 2 和 D 到 3。遍历从 1 到 4 ⁴ (256) 的所有数字，以 4 为基数表示每个数字并替换数字用字母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:00:10.007

你可以尝试这种类型的递归......这适用于任何字符出现一次的字符串......所以一点点就可以了，你不必交换那些相同的元素......假设你没有'不必将“A”与“A”或“B”与“B”交换。

```
void permute(char *a, int i, int n) 
{
    int j; 
    if (i == n)
    printf("%s\n", a);
    else
    {
         for (j = i; j <= n; j++)
         {
             swap((a+i), (a+j));
             permute(a, i+1, n);
             swap((a+i), (a+j)); //backtrack
         }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T13:04:04.870

这是一个已知的递归问题。

```
void f (char *dst, const char *src, int depth, int current) {
  int i;

  if (current >= depth) {
    dst[depth] = '\0';
    puts(dst);
  } else {
    for (i = 0; src[i] != '\0'; i++) {
      dst[current] = src[i];
      f (dst, src, depth, current + 1);
    }
  }
} 
```

# java - 如果我将数据类型 long 分配给数据类型 float，为什么会出现舍入错误？

> ID：15112623
> 
> 赞同：0
> 
> 时间：2013-02-27T12:52:26.333
> 
> 标签：java, types, rounding, precision

我老师的问题是：写下可能但可能出现舍入错误的作业。这是在 Java 中。

```
float f;
long l;
double d;

f = l;
d = l; 
```

这就是答案，但为什么呢？float 的值和最大值较高，float 是一个浮点数。相比之下，long 只是完整的数字，那么为什么会有舍入错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T12:55:06.323

随着浮点数变大，浮点数的绝对值变得不那么准确。超过某个点，最接近的两个可精确表示的浮点数之间的差值大于 1。

或者反过来看，看最接近的`float`表示`Long.MAX_VALUE`。现在看看`float`最接近`Long.MAX_VALUE - 1`...

除了其他任何事情之外，您应该能够计算出并非每个都`long`可以`float`仅通过数据类型的大小来表示：有 2 ^(32 个)可能的位模式`float`（并非所有这些都是正常数字）和 2 ^(64 个)可能的位模式为`long`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T12:56:55.250

原因：浮点32位，长在java中是64位

# java - JOSSO SSO JAVA ASP.NET

> ID：15112624
> 
> 赞同：0
> 
> 时间：2013-02-27T12:52:28.587
> 
> 标签：java, single-sign-on, josso

我有 2 个应用程序。第一个应用程序使用 ASP.net 其他用途 java 框架。我应该为这些应用程序实现单点登录 josso。我不启动这个项目。我应该先做什么？我可以为这些应用程序使用一台服务器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:44:41.423

我搜索了相同的主题，发现 JA-SIG CAS 可能适合您的需求

[JA-SIG CAS 中央认证服务](http://www.slideshare.net/craigsdickson/fast-and-free-sso-a-survey-of-open-source-solutions-to-single-sign-on)

1.  一个开放且有据可查的协议
2.  用于 Java 技术、.NET、PHP、Perl、Apache、uPortal 等的客户端库

# svn - 删除存储库是否也会删除文件？

> ID：15112632
> 
> 赞同：0
> 
> 时间：2013-02-27T12:53:16.870
> 
> 标签：svn, repository, redhat

我在我们的一台网络服务器上设置了 svn 存储库？该存储库当前包含网站文件。如果我从命令行使用适当的 svn delete 命令删除 repo，所有文件也会被删除吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:21:21.297

如果您从存储库中删除一个文件，它将在*下次更新工作副本时*从该存储库签出的任何工作副本中删除。除非对该文件进行了本地修改——在这种情况下，该文件将被取消版本化，但不会从磁盘中删除。

在 Subversion 中没有真正删除任何内容，它只是从`HEAD`修订版中删除。你总是可以拿回来的。

# highcharts - 范围选择器 - 缺少天数的最小和最大日期

> ID：15112635
> 
> 赞同：0
> 
> 时间：2013-02-27T12:53:22.453
> 
> 标签：highcharts

我对范围选择器和 1 年范围有一些问题（例如）。

当 today() - 1 年没有值时，Highstocks 似乎会自动选择下一个“较新”的值。（例如 today() - 1 年 + 1 天）。

但是我们需要先选择值。

例子：

Highstocks - 行为：（1Y from 2012-02-26） Mo (2012-02-27) - Mo (2013-02-26)

行为 - 需要：Fr (2012-02-24) - Mo (2013-02-26)

有没有可能实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:03:18.203

您可以使用 setExtremes() 来定义自己的范围。

[http://api.highcharts.com/highcharts#Axis.setExtremes()](http://api.highcharts.com/highcharts#Axis.setExtremes())

# jquery - 表单提交在 iPad 上无法正常工作

> ID：15112638
> 
> 赞同：1
> 
> 时间：2013-02-27T12:53:24.420
> 
> 标签：jquery, forms, ipad

我有一个表格：

```
 <form id="pay_form"  action='@ConfigurationManager.AppSettings["LogonUrl"]' method="POST">
                <input type="hidden" name="Signed" value="">
                <input type="hidden" name="email" size="50" maxlength="50" value="">
                <input type="hidden" name="Language" value="en">
                <input id="pay_confirm_order" type="button" class="btn btn-large btn-primary pull-right" value="Submit"/>
     </form> 
```

这是处理表单提交的js代码：

```
 $(document).on('click', '#pay_confirm_order', function () {
        fillEpayForm();
    }); 
```

当用户单击`Sumbit`按钮时，我发出 ajax 请求：

```
function fillEpayForm() {
        var url = getCultureUrl('/pay/FillEpayForm?' + Math.random());

        $.ajax({
            type: "GET",
            url: url,
            cache: false,
            dataType: "json",
            success: function (data) {
                $('#pay_form').find('input[name="Signed"]').val(data.signedString);
                $('#pay_form').find('input[name="email"]').val(data.email);
                $('#pay_form').submit();
            },
            async: false
        });
    } 
```

该`action`属性包含外部 URL（这是接收 post 请求的银行服务）。提交表格后，打开银行网站。在桌面浏览器和 android 上一切正常。但在 iPad3 上，地址栏发生了变化，但页面没有变化。如何解决这个问题？这只是 iOS6 上的问题，在 5.1 版本上一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:02:06.400

尝试这个：

```
function fillEpayForm() {
    var url = getCultureUrl('/pay/FillEpayForm?' + Math.random());

    $.ajax({
        type: "GET",
        url: url,
        cache: false,
        dataType: "json",
        success: function (data) {
            $('#pay_form').find('input[name="Signed"]').val(data.signedString);
            $('#pay_form').find('input[name="email"]').val(data.email);
            $('#pay_form').submit();
        },
        async: false
    });
    return false;
}
$(document).on('click', '#pay_confirm_order', function () {
    return fillEpayForm();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:06:48.447

我对 ipad 有一些严重的问题，因为它缓存了孔视图。我通过使用解决了我的问题

```
[OutputCache(Location = System.Web.UI.OutputCacheLocation.None, NoStore = true, Duration = 0, VaryByParam = "*")] 
```

作为我的基本控制器的属性，它可能会对您有所帮助。

# c# - 如何处理调用方法中的错误

> ID：15112640
> 
> 赞同：0
> 
> 时间：2013-02-27T12:53:33.763
> 
> 标签：c#, oop, error-handling

我没有太多好的编程经验，`OO`但我想学习，今天发生了一种情况，我认为如果我的观察正确，我可以提高我的错误处理技能。

我有一个事件，其代码在逻辑上分为两部分：

```
private void btnSave_Click(object sender, EventArgs e)
{
    IList<AppConfig> AppConfigs = AppConfigService.All().Where(a => (a.IsActive == true) && (a.ConfigProperty == "MaterialImages")).ToList();
    string ImageNameFilter = txtCode.Text;

    if (!ucFileExplorer.IsSavedImage(AppConfigs, ImageNameFilter))
    {
        MessageBox.Show("Error");
        return;
    }

    if (Save())
    {
        LoadForm<Materials>();
    }
} 
```

第二部分只是调用`Save()`方法，但我的问题是关于第一部分。在那里我调用了一个方法，该方法应该复制用 a 选择的图像`OpenFileDialog`，整个逻辑都在我为文件浏览而制作的用户控件中，因为我以多种形式使用它。实际应对的方法是这样的：

```
public bool IsSavedImage(IList<AppConfig> AppConfigs, string ImageNameFilter)
{
    bool IsCopied = false;
    try
    {
        string imgPath = AppConfigs[0].ConfigValue.ToString();
        File.Copy(selectedFile, imgPath + "\\" + ImageNameFilter + slectedFileName + ".jpeg");
        IsCopied = true;
    }
    catch (IOException copyError)
    {
        MessageBox.Show("Error saving image!", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
        return false;
    }
    return IsCopied;
} 
```

这里开始我的问题。我想我需要`try-catch`这里的子句，因为这是实际执行发生的地方，并且更容易返回正确的状态（真或假）。但我认为实际`copyError`应该在调用方法中处理（在这种情况下是我的 btn Click 事件）。所以我有两个问题，处理这个异常的正确方法是什么，如果我想将它传递到调用方法的地方我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T13:02:32.677

不要在保存功能中显示错误消息对话框。将其重命名为具有 void 返回类型的“SaveImage”并引发异常。调用者中没有“if”，而是一个 try-catch 块，在发生异常时显示错误消息对话框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T13:03:49.830

> 处理此异常的正确方法是什么

这真的取决于您的应用程序；通常，您在需要（或可以！）处理的地方处理异常。例如，在您可以收集更多信息和/或对错误做出反应的地方（显示错误消息、日志、重试...）

> 如果我想将它传递到调用该方法的地方，我该怎么做？

您只需在更高级别处理异常：异常很方便，因为它们会传播给调用者，直到有人捕获它们。只需在调用函数中插入`try... catch`块（小心考虑所有执行路径，否则找不到任何处理它们的函数的异常将未被捕获，终止程序）。

一般来说，我记得在应用程序中处理错误的四种主要方法：返回值（错误代码或布尔值）、异常、`GetLastError`-style（在某处存储错误代码，让程序员调用函数来检索它）、回调（提供发生错误时调用的函数）。

有一段时间，异常被称为处理错误的 OO 方式。但是您现在在精心设计的框架中也有事件处理程序（毕竟是回调的一种特殊情况）。

一般来说，一个好的设计应该选择一个并坚持下去，最终将一种错误类型“转换”为另一种错误类型（例如，从第三方代码中捕获异常并将它们变成回调，如 Umar Farooq Khawaja 的回答）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T13:06:40.920

我同意 dutzu 的观点，即实际的错误检查应该在业务层进行。除此之外，我建议您的 UI 组件或表单应该公开一个 ErrorHandler 事件，只要出现错误情况就应该引发该事件。

这样，如果错误事件处理程序附加了一个错误处理程序，则会调用该错误处理程序，并且该错误处理程序可以在需要时采取适当的操作。

您可以定义一个`ErrorEventHandler`委托，例如：

```
public void ErrorEventHandler(object sender, ErrorEventArgs e); 
```

还有一个`ErrorEventArgs`类，例如：

```
public class ErrorEventArgs : EventArgs
{
    // error info exposed via readonly properties
} 
```

您可以像这样在 UI 组件/表单中创建错误事件：

```
public class UIForm
{
    public event ErrorEventHandler ErrorOccurred;

    protected void RaiseErrorEvent(ErrorEventArgs e)
    {
        ErrorEventHandler eh = ErrorOccurred;

        if (eh != null)
        {
            eh.Invoke(this, e);
        }
    }

    private void btnSave_Click(object sender, EventArgs e)
    {
        IList<AppConfig> AppConfigs = AppConfigService.All().Where(a => (a.IsActive == true) && (a.ConfigProperty == "MaterialImages")).ToList();
        string ImageNameFilter = txtCode.Text;

        try
        {
            if (!ucFileExplorer.IsSavedImage(AppConfigs, ImageNameFilter))
            {
                RaiseErrorEvent(new ErrorEventArgs());
                return;
            }

            if (Save())
            {
                LoadForm<Materials>();
            }
        }
        catch (Exception exception)
        {
            // convert exception to an ErrorEventArgs e here
            RaiseErrorEvent(e);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-27T12:59:50.403

您可以在用户控件中定义一个事件并在遇到异常时触发它
，然后从主父级订阅此异常事件并相应地处理它。

像这样的东西。

```
public Action<Exception> OnExceptionInUserControl;
public bool IsSavedImage(IList<AppConfig> AppConfigs, string ImageNameFilter)
{
    bool IsCopied = false;
    try
    {
        string imgPath = AppConfigs[0].ConfigValue.ToString();
        File.Copy(selectedFile, imgPath + "\\" + ImageNameFilter + slectedFileName + ".jpeg");
        IsCopied = true;
    }
    catch (IOException copyError)
    {
        OnExceptionInUserControl(copyError);
        return false;
    }
    return IsCopied;
} 
```

在主窗口中

```
userControl.OnExceptionInUserControl += new Action<Exception>(ExceptionEventHandler); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-27T13:12:18.977

我不会以这种方式捕获异常，因为这目前不一致：您的方法仅捕获`IOException`异常，因此它可能会抛出永远不会被捕获的其他异常（未捕获`IsSavedImage`或调用方法），`UnauthorizedAccessException`例如.

我看到的另一个问题是，如果出现`IOException`异常，您总是会显示一个消息框。我将删除这部分，因为有一天您可能希望以不同的方式处理异常，并且您不想更改其当前在核心/业务功能中的处理方式。

例如：

```
public bool SaveImage(IList<AppConfig> AppConfigs, string ImageNameFilter)
{
    string imgPath = AppConfigs[0].ConfigValue.ToString();
    File.Copy(selectedFile, imgPath + "\\" + ImageNameFilter + slectedFileName + ".jpeg");
}

...

try
{
    xxx.SaveImage(....);
}
catch (UnauthorizedAccessException)
{
    // Message to user that the access is denied?
    ...
}
catch (any exception you can handle properly)
{

}
catch
{
    // Couln't be handled properly, so displays generic error message
    ...
} 
```

# c - 使用一个线程生成结构并使用选择器在不同线程中接收

> ID：15112643
> 
> 赞同：1
> 
> 时间：2013-02-27T12:53:52.117
> 
> 标签：c, multithreading, selector

我在一个线程中生成“事件”结构，并以几秒的间隔将它们发送回主线程。自然是不行的。我有两个问题：

1.  为什么在我的选择循环中收到大量事件接收消息？我是否需要从管道中读取，以便文件描述符不再说那里有东西？
2.  如何从管道中提取对结构的引用？

期望的输出：

```
$ ...
Writing event 1 to pipe
Received event on pipe
Writing event 2 to pipe
Received event on pipe 
```

实际输出：

```
$ ...
Received event on pipe
Received event on pipe
Received event on pipe
Received event on pipe
Received event on pipe
Received event on pipe
Received event on pipe
Received event on pipe
Received event on pipe
Received event on pipe
Received event on pipe
Received event o^C 
```

GCC 命令：

```
gcc -o test test.c 
```

测试.c：

```
/* Simple example with two threads and a pipe. One thread writes structs to a 
   pipe every few seconds; the other reads the structs, prints out their info
   and then frees the structs
 */

#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <pthread.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/select.h>

void mywait(int timeInSec);

// The events
typedef struct event {
    int id;
    int data;
} event_t;

int id = 0;
int pipefd[2];

void* pump(void *arg) { // Generates events

    for (;;)
    {
        mywait(1); // sleep thread

        printf("writing event #%i to pipe\n", id);

        // generate event
        event_t *event;
        event = malloc(sizeof(*event));
        memset(event, 0, sizeof(*event));
        event->id = id++;

        // write event to pipe
        write(pipefd[1], &event, sizeof(event));

        // NOTE: Free event in other thread
    }
}

int main (int argc, char **argv)
{
    printf("Starting pipe_test.c\n");

    // 1\. Create a pipe
    pipe(pipefd);

    // 2\. Create thread to pump events into pipe
    pthread_t tid;
    if (pthread_create( &tid, NULL, pump, NULL) != 0) {
        perror("pthread_create:pump");
        exit(-1);
    }

    // 3\. Set up selector in main thread to read events off pipe
    int z;
    fd_set readfds; //readable file descriptor
    int selectmax;
    selectmax = pipefd[0] + 1;
    for (;;)
    {
        // Initialize selector
        FD_ZERO( &readfds );
        FD_SET( pipefd[0], &readfds );
        z = select( selectmax, &readfds, NULL, NULL, NULL );

        if( z < 0 ) {
            printf( "select() failed\n");
            // close( pipefd ); //???
            return 1;
        } else {
            if( FD_ISSET( pipefd[0], &readfds ) ) {
                printf("Received event on pipe\n"); // I get a shitton of these

                // Get the pointer to the event struct from the pipe
                // TODO: GOOD WAY TO DO THIS?

                // Free the struct
                // TODO
            }
        }
    }

    return 0;
}

// From http://somethingswhichidintknow.blogspot.com/2009/09/sleep-in-pthread.html
pthread_mutex_t fakeMutex = PTHREAD_MUTEX_INITIALIZER;
pthread_cond_t fakeCond = PTHREAD_COND_INITIALIZER;

void mywait(int timeInSec)
{
    struct timespec timeToWait;
    struct timeval now;
    int rt;
    gettimeofday(&now,NULL);

    timeToWait.tv_sec = now.tv_sec + timeInSec;
    timeToWait.tv_nsec = now.tv_usec*1000;

    pthread_mutex_lock(&fakeMutex);
    rt = pthread_cond_timedwait(&fakeCond, &fakeMutex, &timeToWait);
    pthread_mutex_unlock(&fakeMutex);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:59:10.990

1.  是的，您必须从管道中读取，否则它将永远保持可读性。
2.  用于`read`读入结构，就像使用 write 一样。

还有其他几点：首先实际上是发送指针的地址，而不是实际的指针。其次，您不必动态分配结构，只需在堆栈上分配并发送结构即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:42:33.467

正如其他人指出的那样，您需要实际读取数据。另请注意，您需要为整个结构分配内存，而不仅仅是指针（即`event = malloc(sizeof(event_t));`）。

```
/* Simple example with two threads and a pipe. One thread writes structs to a 
   pipe every few seconds; the other reads the structs, prints out their info
   and then frees the structs
 */

#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <pthread.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/time.h>
#include <sys/select.h>

void mywait(int timeInSec);

// The events
typedef struct event {
    int id;
    int data;
} event_t;

int id = 0;
int pipefd[2];

void* pump(void *arg) { // Generates events

    for (;;)
    {
        printf("writing event #%i to pipe\n", id);

        // generate event
        event_t *event;
        event = malloc(sizeof(event_t));
        memset(event, 0, sizeof(event_t));
        event->id = id++;

        // write event to pipe
        int nbytes = write(pipefd[1], &event, sizeof(event_t*));
        //printf("written %d bytes.\n", nbytes);

        // NOTE: Free event in other thread
        mywait(1); // sleep thread
    }
}

int main (int argc, char **argv)
{
    printf("Starting pipe_test.c\n");

    // 1\. Create a pipe
    pipe(pipefd);

    // 2\. Create thread to pump events into pipe
    pthread_t tid;
    if (pthread_create( &tid, NULL, pump, NULL) != 0) {
        perror("pthread_create:pump");
        exit(-1);
    }

    // 3\. Set up selector in main thread to read events off pipe
    int z;
    fd_set readfds; //readable file descriptor
    int selectmax;
    selectmax = pipefd[0] + 1;
    for (;;)
    {
        // Initialize selector
        FD_ZERO( &readfds );
        FD_SET( pipefd[0], &readfds );
        z = select( selectmax, &readfds, NULL, NULL, NULL );

        if( z < 0 ) {
            printf( "select() failed\n");
            // close( pipefd ); //???
            return 1;
        } else {
            if( FD_ISSET( pipefd[0], &readfds ) ) {
                printf("Received event on pipe\n"); // I get a shitton of these

                // Get the pointer to the event struct from the pipe
                event_t* received_event = NULL;
                int nbytes = read(pipefd[0], &received_event, sizeof(event_t*));
                printf("read %d bytes\n", nbytes);
                if (nbytes > 0)
                    printf("Event id: %d\n", received_event->id);

                // Free the struct
                free(received_event);
            }
        }

        mywait(1); // sleep thread
    }

    return 0;
}

// From http://somethingswhichidintknow.blogspot.com/
// 2009/09/sleep-in-pthread.html
pthread_mutex_t fakeMutex = PTHREAD_MUTEX_INITIALIZER;
pthread_cond_t fakeCond = PTHREAD_COND_INITIALIZER;

void mywait(int timeInSec)
{
    struct timespec timeToWait;
    struct timeval now;
    int rt;
    gettimeofday(&now,NULL);

    timeToWait.tv_sec = now.tv_sec + timeInSec;
    timeToWait.tv_nsec = now.tv_usec*1000;

    pthread_mutex_lock(&fakeMutex);
    rt = pthread_cond_timedwait(&fakeCond, &fakeMutex, &timeToWait);
    pthread_mutex_unlock(&fakeMutex);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T12:58:44.287

`select`只告诉你有可用的数据。您必须`read`将数据从描述符中取出。我还建议您在调试中添加一些信息（至少一个时间戳），以便您可以看到数据创建的广度:)

# sql-server - SQL Server 备份设备文件大小

> ID：15112646
> 
> 赞同：0
> 
> 时间：2013-02-27T12:54:01.650
> 
> 标签：sql-server, backup, sql-server-2012, restore

[在阅读了 Pinal Dave 关于恢复数据库](http://blog.sqlauthority.com/2009/07/14/sql-server-backup-timeline-and-understanding-of-database-restore-process-in-full-recovery-model/)的有用文章后，我计划使用以下设置...

1.  我的 400mb 数据库位于 D:\databases\
2.  恢复模式已满
3.  在 C:\dbbackups 中创建备份设备
4.  每天将在数据库上运行完整备份到 C 上的备份文件：
5.  每 4 小时将在数据库上运行一次事务日志备份到 C 上的备份文件：
6.  服务器主机每 24 小时对 C: 和 D: 进行一次差异文件备份，我希望它会完整地复制 SQL 数据库和备份设备文件
7.  服务器主机每 24 小时对数据库文件进行一次 SQL 备份
8.  每周我都会将备份设备文件下载到我们的异地办公室

我知道我可能会改进这一点（欢迎指点！）但成本始终是因素，所以我试图尽可能地限制风险。除了以上几点...

*   考虑到上面的步骤 1-5，这是否意味着备份文件将随着新备份的执行而不断增长和增长？
*   我是否认为我只需要一个完整备份加上以下日志备份才能恢复到最近的 4 小时备份？
*   如果是这样，是否可以在三周的保留期内覆盖备份？如果没有，其他 DBA 如何限制这些文件大小？

拼命地试图避免成为下一个灾难故事...... :-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:17:04.007

如果您不确定备份脚本中使用的选项，您可能想要研究的一种工具是[Ola Hallengren 的维护脚本](http://ola.hallengren.com/sql-server-backup.html)。即使它是一套工具，如果您愿意，您也可以只查看（和使用）备份部分。我推荐它是因为它考虑了您对空间不足和其他最佳实践的许多担忧。

对于第 3 点到第 5 点，我要说明一点，如果可能，请*不要*直接备份到 C: 驱动器。请记住：它托管 Windows。如果空间不足，您的服务器将崩溃。如果您唯一的驱动器选项是 C: 和 D:，则备份到 D: 驱动器。更好的解决方案是添加另一个磁盘。出于同样的原因，我们也不希望将数据库文件托管在 C: 驱动器上。

您可能要考虑的另一件事是将备份移动到网络存储（完成后），同时等待将它们移出现场。如果您的服务器崩溃，您仍然可以从网络存储访问它们，并且您可能不需要从异地调用一周前的备份。我确实建议继续在异地发送副本。

至于备份的轮换方案，它应该基于您与您支持的用户设置的任何 SLA（服务级别协议），并由您可用的资源来平衡。没有任何“正确”的答案需要找到适合您的情况并且您和您的用户都感到满意的答案。也就是说，在将它们添加到您的长期轮换之前，请务必恢复您的备份并对其进行测试。

至于您关于完整/日志备份的问题，这是正确的。每个日志备份都以完整备份为基础。所以在 F1 --> L1 --> L2 --> L3 --> L4 --> F2 --> L5 --> L6 --> L7 --> L8 的情况下...如果你愿意要恢复到 L3，您需要按顺序备份 F1、L1、L2 和 L3。如果您想恢复到您的第二个完整备份，您只需要 F2。

最后，如果您需要更多帮助，绝对可以使用 Google for SQL Server 备份。博主提供了大量的资源。当然，还有这个站点和[dba.stackexchange.com](http://dba.stackexchange.com)可以解决特定于 DBA 的问题。

# php - 获取多维数组的结束值

> ID：15112655
> 
> 赞同：6
> 
> 时间：2013-02-27T12:54:47.573
> 
> 标签：php, multidimensional-array

我有一个未定义长度的多维数组，看起来像

```
Array
(
    [0] => Array
        (
            [price] => 75
        )

    [1] => Array
        (
            [price] => 90
        )

    [2] => Array
        (
            [price] => 95
        )

    [3] => Array
        (
            [price] => 130
        )

) 
```

如何获取数组中最后一个元素的价格值？

干杯

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-27T12:56:56.537

试试这个：`$array`是你的输入数组

```
$arr   = end($array);
echo $arr['price']; 
```

编辑：使用 PHP 5.4 或更新版本：`end($array)['price']`- fab **（由 fab 评论）**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T12:56:42.020

只需使用此代码`$arr`就是您的数组。

```
echo $arr[count($arr) - 1]['price']; 
```

# wpf - 如何在 WPF 中将属性绑定到仅获取器的 CLR 属性？

> ID：15112663
> 
> 赞同：2
> 
> 时间：2013-02-27T12:55:05.293
> 
> 标签：wpf, c#-4.0, dependency-properties

出于某种目的，我想在`LineCount`多行文本框更改 时引发一个事件，我认为如果我将依赖属性绑定到以下是代码示例
，我可以实现 `TextBox.LineCount`

**XAML**

```
<local:MyTextBox Margin="5,65,5,5" x:Name="txtBox" 
       AcceptsReturn="True" AcceptsTab="False" 
       MyProperty="{Binding LineCount, RelativeSource={RelativeSource Self}}" /> 
```

**代码隐藏**

```
public class MyTextBox : TextBox
{
    public MyTextBox()
    {
        DataContext = this;
    }

    public int MyProperty
    {
        get
        {
            return (int)this.GetValue(LineCountProperty);
        }
        set
        {
            this.SetValue(LineCountProperty, value);
        }
    }

    public static readonly DependencyProperty LineCountProperty =
        DependencyProperty.Register(
        "MyProperty",
        typeof(int),
        typeof(TextBox),
        new FrameworkPropertyMetadata(
            new PropertyChangedCallback(
             (dp, args) => { MessageBox.Show(args.NewValue.ToString()); })
        ));
} 
```

消息框仅在加载表单时显示，而不是在行数更改后显示。 但是，如果我将TextBox 的
Binding 更改为PropertyChangedEvent ，则会在每次文本更改时触发。 我确信我可以从 TextChanged 事件处理程序中触发一些自定义的 LineCount 更改事件，但我想通过这样做，因为我相信它会更有效。`MyProperty``LineCount``Text`
`DepedencyProperties`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:58:21.690

问题在于它`LineCount`不是依赖属性，请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.linecount.aspx)。出于这个原因，它不支持绑定并且不会提供更改通知。

考虑到您正在制作自定义控件，您真的需要使用绑定吗？为什么不只在`TextChanged`内部处理事件并手动检测行数何时更改。

# django - 名称为 'content' 的 Django 'block' 标签多次出现

> ID：15112666
> 
> 赞同：10
> 
> 时间：2013-02-27T12:55:09.210
> 
> 标签：django

我在制作应用程序时遇到此错误，我认为问题位于我的 login.html 中，因为它指向错误表。是因为我有 2 个 {% block content %} 冲突吗？感谢你们对我的帮助

```
TemplateSyntaxError at /login/

'block' tag with name 'content' appears more than once

Request Method:     GET
Request URL:    http://127.0.0.1:8000/login/
Django Version:     1.4.3
Exception Type:     TemplateSyntaxError
Exception Value:    

'block' tag with name 'content' appears more than once

Error during template rendering

In template C:\djcode\mysite\drinker\templates\login.html, error at line 21
'block' tag with name 'content' appears more than once
11  <div class="register_div">
12  {% if form.password.errors %}<p class="error">{{ form.password.errors }}</p>{%     endif %}
13  <p><label for="password"{% if form.password.errors %} class="error"{% endif %}>Password:</label></p>
14  <p>{{ form.password }}</p>
15  </div>
16  <p><input type="submit" alt="register" /></p>
17  </form>
18  <p>Forgot your password? <a href="/resetpassword/">Reset it!</a></p>
19  {% endblock %}
20  {% extends "base.html" %}
21  {% block content %} 
```

我的 login.html

```
 {% extends "base.html" %}
 {% block content %}
 <form action="" method="post">
 {% csrf_token %}
 {% if form.errors %}<p>Please correct the following fields:</p>{% endif %}
 <div class="register_div">
         {% if form.username.errors %}<p class="error">{{ form.username.errors }}</p>{% endif %}
         <p><label for="username"{% if form.username.errors %} class="error"{% endif %}>Username:</label></p>
         <p>{{ form.username }}</p>
 </div>
 <div class="register_div">
         {% if form.password.errors %}<p class="error">{{ form.password.errors }}</p>{% endif %}
         <p><label for="password"{% if form.password.errors %} class="error"{% endif %}>Password:</label></p>
         <p>{{ form.password }}</p>
 </div>
 <p><input type="submit" alt="register" /></p>
 </form>
 <p>Forgot your password? <a href="/resetpassword/">Reset it!</a></p>
 {% endblock %} 
```

我也有一个回溯链接到我的views.py

```
 Traceback Switch to copy-and-paste view

    C:\Python26\Lib\site-packages\django\core\handlers\base.py in get_response

                            response = callback(request, *callback_args, **callback_kwargs)

    ...
    ▶ Local vars
    C:\djcode\mysite\drinker\views.py in LoginRequest

                        return render_to_response('login.html', context,     context_instance=RequestContext(request))

    ...
    ▶ Local vars 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T12:58:52.437

是的，错误很明显：您有两个名为“内容”的块。

老实说，我无法理解您在做什么，因为第二个块似乎与第一个块完全相同。你也不能有两个`extends`标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-06T18:43:08.607

您可以在后端做您想做的事情，即：- Python。例如，您可以执行以下操作：-

```
# views.py::
if something is True(any condition for that matter)
msg = "something"

else:
msg = "Something else"

# template, it is here -- index.html::
{% block title %}{{msg}}{% endblock title %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-26T01:15:57.627

如果有任何变量要多次渲染。
只需在渲染文件时作为输入传递。
像这样：

 ****```
from django.shortcuts import render

def products_list(request):
    return render(request, "products/list.html",
        {
            "title":"Products List"
        }) 
```** 

在 HTML 文件中：

 ****```
<html>

<head>
    <title>{{ title }} | My  Website</title>
</head>

<body>
    <h1>{{ title }}:</h1>
</body> 
```** 

这将呈现如下：

 **```
<html>

<head>
    <title>Products List | My  Website</title>
</head>

<body>
    <h1>Products List:</h1>
</body> 
```** 

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-03T09:15:26.207

我认为有时错误代码可能有点直截了当，“我认为”。无论如何，我通过删除额外的行标签（在本例中为`{% block content %}`行标签）解决了这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-16T18:11:37.507

就我而言，它是通过更改块内容的名称来解决的。

我遇到此错误的情况是：我网站的某些页面对公众开放。我网站的某些页面可供网站用户免费查看。

因为我的用户注册是在用户身份验证步骤中输入的，所以我正在检查该站点。如果它是匿名的，它必须先注册，所以我有两个选择来检查。第一种情况（如果匿名） Ligen 页面、主页、规则和.. Redomination 模式（如果站点用户）页面、配置文件和应用程序我更改了内容块以解决名称。在 base.html 文件中： 这个基础论坛：

```
 {% block content1%}
user.is_anonymous
          {% endblock content1%}

           block% block content2%}
is_authenticated
          end% endblock content2%} 
```****

# mod-rewrite - 在 mod_rewrtie 中将 QUERY_STRING 附加到 REQUEST_URI

> ID：15112668
> 
> 赞同：0
> 
> 时间：2013-02-27T12:55:14.097
> 
> 标签：mod-rewrite, rewrite

我正在缓存完整的 HTML 页面。每个缓存文件都被命名为 PHP 的 REQUEST_URI。PHP 的 REQUEST_URL != mod_rewrite REQUEST_URI。PHP 将文件保存为我希望它们为“/foo/bar/file?var1=a&varb=2”。我的重写规则

```
RewriteCond %{REQUEST_METHOD} GET
RewriteCond %{DOCUMENT_ROOT}/cached/%{REQUEST_URI}\.html -f
RewriteRule .* cached/%{REQUEST_URI}\.html [L] 
```

显然会失败，因为未附加 QUERY_STRING。修改我的规则以检查真实文件名的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:01:46.967

我猜 CSA（查询字符串追加）标志不适用，但如果我正确理解您的问题，您可以匹配 RewriteCond 中的查询字符串并将其附加到 RewriteRule

```
RewriteCond %{QUERY_STRING} ^([.*)$ 
```

然后可以在 RewriteRule 中作为 %n 访问。

# python - 查找和删除具有由第三个唯一特征标识的两个相同特征的重复数据条目

> ID：15112677
> 
> 赞同：2
> 
> 时间：2013-02-27T12:55:38.567
> 
> 标签：python, pandas

因此，我使用此代码在主序列中打印子序列的开始和停止位置，表示为 SOURCE。主序列由 GENE 识别。GENE 中的某些序列具有 DIRECTION 两个组成部分，+ 和 -，它们被视为唯一序列。但是，我没有意识到的是，在首先生成数据集时（通过将许多 SOURCE 序列的文件与 GENE 序列进行比对），我有多个实例，其中存在多个 SOURCE 序列的“有效”比对针对基因序列。我需要一种方法来从 SOURCE 序列中删除在 GENE 序列中出现次数最少的条目，或者在 SOURCE 序列数量相等的情况下，从 POS1 到最终 POS2 的最小范围。我在下面有一个示例输出，其中包含一个清晰的示例。

这是我的 Python 代码：

```
import pandas
import pandas as pd
import sys
import csv

##sys.stdout = open("Sampletest2d.txt", "w")
##data = pd.read_csv('Sampletest2.txt', sep='\t')
sys.stdout = open("ExonFileTry1Part3.txt", "w")
data = pd.read_csv('ExonFileTry1.txt', sep='\t')
groups = data.groupby(['GENE', 'DIRECTION'])

fixedgroups = []

for (gene_id, strand), group in groups:
    #print gene_id, strand
    if strand == '+':
        group['POS-1'] = group.POS1
        group['POS-2'] = group.POS2
    else:
        group['POS-1'] = group.POS2
        group['POS-2'] = group.POS1
    #print group
    fixedgroups.append(group)
print fixedgroups 
```

数据集（制表符分隔）

```
GENE    DIRECTION   POS1    POS2    SOURCE
TT-1    +   1   16  A1
TT-1    +   130 289 A1
TT-1    +   353 438 A1
TT-1    +   519 580 A1
TT-1    +   665 742 A1
TT-1    +   813 864 A1
TT-1    +   931 975 A1
TT-1    +   1053    1166    A1
TT-1    +   1   16  B2
TT-1    +   130 289 B2
TT-1    +   353 438 B2
TT-1    +   519 580 B2
TT-1    +   665 742 B2
TT-1    +   813 864 B2
TT-1    +   931 975 B2
TT-1    +   1053    1161    B2
BB-2    +   3   659 C3
BB-2    +   3   640 D4
BB-2    -   1093    426 E5
BB-2    -   1093    508 F6
EE-3    +   1   95  G7
EE-3    +   155 377 G7
EE-3    +   439 513 G7
EE-3    +   577 840 G7
EE-3    +   1   95  H8
EE-3    +   155 377 H8
EE-3    +   439 513 H8
EE-3    -   840 577 I9
EE-3    -   513 439 I9
EE-3    -   377 155 I9
EE-3    -   840 577 J10
EE-3    -   513 458 J10 
```

有时一个 GENE 有多个 SOURCE 序列，并且来自一个 SOURCE 的序列比另一个多。但是，有时来自两个不同 SOURCE 的序列数量相同，在这种情况下，我需要保留该 SOURCE 的第一个 POS1 和最后一个 POS2 之间值范围最大的 SOURCE。

例如，在 + DIRECTION 的 GENE TT-1 中，有两个 SOURCE 集 A1 和 B2，它们都有 8 个条目。但是，SOURCE A1 的最终 POS2 为 1166，而 B2 的最终 POS2 为 1161，因此 B2 的范围较小，应删除。

我花了令人难以置信的时间来理解如何做我已经做过的事情，而且那是基于类似的代码开始的。我觉得我知道我想在这里做什么，但我只是不知道语法，因为我的计算机科学知识非常有限。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:04:32.417

我不是 100% 确定我理解你写的所有内容，但我跳过了你的数据和'例如'段落，它说“源 A1 的最终 POS2 为 1166，而 B2 的最终 POS2 为 1161，并且所以 B2 的范围较小，应该删除”。我将“TT-1 +”和“TT-1 -”视为不同的实体，并且我正在对每一行的范围求和。我想这就是你想要的。

将 RANGE 列添加到 DataFrame

```
df['RANGE'] = abs(df['POS2']-df['POS1']) 
```

现在为每个序列、源组合累积每个源。

```
df['SUMRANGE'] = df.groupby(["GENE", "DIRECTION", "SOURCE"])['RANGE'].cumsum() 
```

提取每个序列具有最大“SUMRANGE”的行的索引。

```
dfm = pandas.DataFrame(df.ix[df.groupby(["GENE", "DIRECTION"]).agg(lambda df: df.idxmax())['SUMRANGE']]) 
```

`join`设置要在接下来的函数中使用的索引。

```
dfm.index = pandas.MultiIndex.from_arrays([dfm['GENE'], dfm['DIRECTION']]) 
```

加入 df 和 dfm。

```
dfj = df.join(other=dfm['SOURCE'], on=['GENE', 'DIRECTION'], rsuffix='.r') 
```

现在根据“SOURCE”是否与“SOURCE.r”相同来过滤 dfj。

```
dfj[dfj.apply(lambda x: x['SOURCE'] == x['SOURCE.r'], axis=1)]

    GENE DIRECTION  POS1  POS2 SOURCE  RANGE  SUMRANGE SOURCE.r
0   TT-1         +     1    16     A1     15        15       A1
1   TT-1         +   130   289     A1    159       174       A1
2   TT-1         +   353   438     A1     85       259       A1
3   TT-1         +   519   580     A1     61       320       A1
4   TT-1         +   665   742     A1     77       397       A1
5   TT-1         +   813   864     A1     51       448       A1
6   TT-1         +   931   975     A1     44       492       A1
7   TT-1         +  1053  1166     A1    113       605       A1
16  BB-2         +     3   659     C3    656       656       C3
18  BB-2         -  1093   426     E5    667       667       E5
20  EE-3         +     1    95     G7     94        94       G7
21  EE-3         +   155   377     G7    222       316       G7
22  EE-3         +   439   513     G7     74       390       G7
23  EE-3         +   577   840     G7    263       653       G7
27  EE-3         -   840   577     I9    263       263       I9
28  EE-3         -   513   439     I9     74       337       I9
29  EE-3         -   377   155     I9    222       559       I9 
```

当然，您可以根据需要删除不需要的列`dfj`。作为参考，这是我开始使用的 DataFrame。

```
In [2]: df
Out[2]: 
    GENE DIRECTION  POS1  POS2 SOURCE
0   TT-1         +     1    16     A1
1   TT-1         +   130   289     A1
2   TT-1         +   353   438     A1
3   TT-1         +   519   580     A1
4   TT-1         +   665   742     A1
5   TT-1         +   813   864     A1
6   TT-1         +   931   975     A1
7   TT-1         +  1053  1166     A1
8   TT-1         +     1    16     B2
9   TT-1         +   130   289     B2
10  TT-1         +   353   438     B2
11  TT-1         +   519   580     B2
12  TT-1         +   665   742     B2
13  TT-1         +   813   864     B2
14  TT-1         +   931   975     B2
15  TT-1         +  1053  1161     B2
16  BB-2         +     3   659     C3
17  BB-2         +     3   640     D4
18  BB-2         -  1093   426     E5
19  BB-2         -  1093   508     F6
20  EE-3         +     1    95     G7
21  EE-3         +   155   377     G7
22  EE-3         +   439   513     G7
23  EE-3         +   577   840     G7
24  EE-3         +     1    95     H8
25  EE-3         +   155   377     H8
26  EE-3         +   439   513     H8
27  EE-3         -   840   577     I9
28  EE-3         -   513   439     I9
29  EE-3         -   377   155     I9
30  EE-3         -   840   577    J10
31  EE-3         -   513   458    J10 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T22:51:24.820

这是@DA答案的变体：

首先，一些样板设置：

```
import pandas as pd
import io

data = '''\
GENE    DIRECTION   POS1    POS2    SOURCE
TT-1    +   1   16  A1
TT-1    +   130 289 A1
TT-1    +   353 438 A1
TT-1    +   519 580 A1
TT-1    +   665 742 A1
TT-1    +   813 864 A1
TT-1    +   931 975 A1
TT-1    +   1053    1166    A1
TT-1    +   1   16  B2
TT-1    +   130 289 B2
TT-1    +   353 438 B2
TT-1    +   519 580 B2
TT-1    +   665 742 B2
TT-1    +   813 864 B2
TT-1    +   931 975 B2
TT-1    +   1053    1161    B2
BB-2    +   3   659 C3
BB-2    +   3   640 D4
BB-2    -   1093    426 E5
BB-2    -   1093    508 F6
EE-3    +   1   95  G7
EE-3    +   155 377 G7
EE-3    +   439 513 G7
EE-3    +   577 840 G7
EE-3    +   1   95  H8
EE-3    +   155 377 H8
EE-3    +   439 513 H8
EE-3    -   840 577 I9
EE-3    -   513 439 I9
EE-3    -   377 155 I9
EE-3    -   840 577 J10
EE-3    -   513 458 J10'''

df = pd.read_table(io.BytesIO(data), sep='\t') 
```

现在我们添加`RANGE`和`SUMRANGE`列，就像@DA 所做的那样：

```
df['RANGE'] = abs(df['POS2']-df['POS1'])
df['SUMRANGE'] = df.groupby(["GENE", "DIRECTION", "SOURCE"])['RANGE'].cumsum()
print(df)
#     GENE DIRECTION  POS1  POS2 SOURCE  RANGE  SUMRANGE
# 0   TT-1         +     1    16     A1     15        15
# 1   TT-1         +   130   289     A1    159       174
# 2   TT-1         +   353   438     A1     85       259
# 3   TT-1         +   519   580     A1     61       320
# 4   TT-1         +   665   742     A1     77       397
# 5   TT-1         +   813   864     A1     51       448
# 6   TT-1         +   931   975     A1     44       492
# 7   TT-1         +  1053  1166     A1    113       605
# 8   TT-1         +     1    16     B2     15        15
# 9   TT-1         +   130   289     B2    159       174
# 10  TT-1         +   353   438     B2     85       259
# 11  TT-1         +   519   580     B2     61       320
# 12  TT-1         +   665   742     B2     77       397
# 13  TT-1         +   813   864     B2     51       448
# 14  TT-1         +   931   975     B2     44       492
# 15  TT-1         +  1053  1161     B2    108       600
# 16  BB-2         +     3   659     C3    656       656
# 17  BB-2         +     3   640     D4    637       637
# 18  BB-2         -  1093   426     E5    667       667
# 19  BB-2         -  1093   508     F6    585       585
# 20  EE-3         +     1    95     G7     94        94
# 21  EE-3         +   155   377     G7    222       316
# 22  EE-3         +   439   513     G7     74       390
# 23  EE-3         +   577   840     G7    263       653
# 24  EE-3         +     1    95     H8     94        94
# 25  EE-3         +   155   377     H8    222       316
# 26  EE-3         +   439   513     H8     74       390
# 27  EE-3         -   840   577     I9    263       263
# 28  EE-3         -   513   439     I9     74       337
# 29  EE-3         -   377   155     I9    222       559
# 30  EE-3         -   840   577    J10    263       263
# 31  EE-3         -   513   458    J10     55       318 
```

对于具有共同 GENE 和 DIRECTION 的每个组，记录具有最大 SUMRANGE 的行的索引：

```
idx = df.groupby(["GENE", "DIRECTION"])['SUMRANGE'].agg(lambda col: col.idxmax())
print(idx)
# GENE  DIRECTION
# BB-2  +            16
#       -            18
# EE-3  +            23
#       -            29
# TT-1  +             7
# Name: SUMRANGE 
```

`df`选择具有 GENE、DIRECTION 和 SOURCE 列的子 DataFrame，行由 给出`idx`：

```
dfm = df.ix[idx, ['GENE','DIRECTION','SOURCE']]
print(dfm)
#     GENE DIRECTION SOURCE
# 16  BB-2         +     C3
# 18  BB-2         -     E5
# 23  EE-3         +     G7
# 29  EE-3         -     I9
# 7   TT-1         +     A1 
```

`df`在和上进行内部合并`dfm`。键是 和 的公共列的交集，`df`即`dfm`GENE、DIRECTION 和 SOURCE。“内部”合并仅保留两者`df`共享`dfm`相同键的行。所以在合并的 DataFrame 中，`df`'s GENE、DIRECTION 和 SOURCE 必须匹配`dfm`' GENE、DIRECTION 和 SOURCE。因此，所有带有错误 SOURCE 的行都将被删除：

```
result = pd.merge(df, dfm, how = 'inner')
print(result)
#     GENE DIRECTION  POS1  POS2 SOURCE  RANGE  SUMRANGE
# 0   TT-1         +     1    16     A1     15        15
# 1   TT-1         +   130   289     A1    159       174
# 2   TT-1         +   353   438     A1     85       259
# 3   TT-1         +   519   580     A1     61       320
# 4   TT-1         +   665   742     A1     77       397
# 5   TT-1         +   813   864     A1     51       448
# 6   TT-1         +   931   975     A1     44       492
# 7   TT-1         +  1053  1166     A1    113       605
# 8   BB-2         +     3   659     C3    656       656
# 9   BB-2         -  1093   426     E5    667       667
# 10  EE-3         +     1    95     G7     94        94
# 11  EE-3         +   155   377     G7    222       316
# 12  EE-3         +   439   513     G7     74       390
# 13  EE-3         +   577   840     G7    263       653
# 14  EE-3         -   840   577     I9    263       263
# 15  EE-3         -   513   439     I9     74       337
# 16  EE-3         -   377   155     I9    222       559 
```

# teamcity-7.0 - 团队城市（建造亚军要求）

> ID：15112681
> 
> 赞同：8
> 
> 时间：2013-02-27T12:56:10.127
> 
> 标签：teamcity-7.0

我最近安装了**TeamCity**以进行持续集成，并且我正处于 SVN 中提交的任何内容进入**TeamCity**队列之前的时刻。

研究了一下，我发现我需要一个`Agent`来构建。现在我已经创建了一个代理，但是`Warning: No enabled compatible agents for this build configuration. Please register a build agent or tweak build configuration requirements.`当我尝试构建我的项目时仍然出现错误。

我进入了我的代理页面，我新创建的代理仍在`incompatible agents`列表下`Unmet requirements: DotNetFramework4.0_x86 exists`（我认为这意味着我需要在我的服务器上安装这个 DOtNetFramework）并且我无法删除这个要求，所以我想考虑到我的服务器需要添加这个是`Windows Server 2008 R2`。

我已经尝试安装`Microsoft .NET Framework 4`，但没有帮助。

任何人都可以请帮助解决此要求错误。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T07:13:54.057

在您的 TeamCity 构建代理列表中，选择您的构建代理之一，打开**“代理参数**”选项卡，然后单击“配置参数”的子选项卡。

检查以下配置是否具有以下相同的值（假设您已在驱动器 C：中安装了 .NET 4.0：在您的 TeamCity 构建代理中）：

```
DotNetFramework4.0_x86 - 4.0.30319
DotNetFramework4.0_x86_Path - C:\Windows\Microsoft.NET\Framework\v4.0.30319 
```

如果相似或相同，则打开您已设置的 TeamCity 构建配置，并在编辑“**代理要求**”部分中打开“设置”选项卡。请检查您是否为配置参数的值设置了条件`DotNetFramework4.0_x86`，`DotNetFramework4.0_x86_Path`如果存在，请确保这些条件与上面发布的值匹配。

一旦这些值匹配，则不会再弹出此兼容性问题。

# sql - PLSQL 读取输入

> ID：15112682
> 
> 赞同：0
> 
> 时间：2013-02-27T12:56:13.190
> 
> 标签：sql

为什么这不起作用？：

```
Declare
type tablica is table of varchar2(30)
index by binary_integer;
tab tablica;
i integer :=0;
n integer :=0;
inp integer:='&inp';
one varchar(20);

Begin
While n<3 Loop

n:=n+1;
tab(n):='&one';

End Loop;

(....) 
```

它应该从键盘读取 3 次输入并将其放入 char 表中 - 它只读取 1 次：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:21:57.387

为什么要在 PL/SQL 中使用 &？替换用于 SQL。这将起作用：

```
Declare
  type tablica is table of varchar2(30) index by binary_integer;
  tab tablica;
  i integer :=0;
  n integer :=0;
 --inp integer:='&inp';
 one varchar(20);
Begin
 While n<3 Loop
  n:=n+1;

  If n = 1 Then
     tab(n):='one';
  elsif
    n = 2 Then
     tab(n):='two';
  Else
     tab(n):='three';
  End if;

   dbms_output.put_line(n||chr(9)||tab(n));
 End Loop;
End;
/ 
```

这是您可能想要的一些很好的例子： [http ://www.dba-oracle.com/concepts/pl_sql_while_loop.htm](http://www.dba-oracle.com/concepts/pl_sql_while_loop.htm)

# android - Bluetooth_content_share.html 在Phonegap 共享插件中未发送错误

> ID：15112684
> 
> 赞同：2
> 
> 时间：2013-02-27T12:56:14.697
> 
> 标签：android, cordova, bluetooth, phonegap-plugins

我正在使用 Android 版 Phonegap 的共享插件，我创建了一个项目并集成了该插件。通过蓝牙共享时，打开 BT 后，内容没有被共享，我收到一条吐司消息“bluetooth_content_share.html not sent”。可能有什么问题？以下是我使用的代码。

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <title>Phonegap Calender plugin</title>
    </head>
    <body>
        <div class="app">
            <h1>Apache Cordova</h1>
            <div id="deviceready" class="blink">
                <p class="event listening">Connecting to Device</p>
                <p class="event received">Device is Ready</p>
            </div>
        </div>
        <script type="text/javascript" src="cordova-2.0.0.js"></script>
        <script type="text/javascript" src="share.js"></script>
        <script type="text/javascript">
        document.addEventListener("deviceready", onDeviceReady, false);
    function onDeviceReady() {
    alert('onDeviceReady');
        window.plugins.share.show({
            subject: 'I like turtles',
            text: 'http://www.mndaily.com'},
            function() {alert('success');}, // Success function
            function() {alert('Share failed')} // Failure function
        );
    }

        </script>
    </body>
</html> 
```

# servlets - spring mvc中的文件上传

> ID：15112687
> 
> 赞同：0
> 
> 时间：2013-02-27T12:56:23.847
> 
> 标签：servlets, spring-mvc, file-upload

我的模块中有一个文件上传，`true`即使没有选择文件，如果总是给我。

下面是我的代码：

```
System.out.println("File Request : "+ServletFileUpload.isMultipartContent(request));
        // Check that we have a file upload request
        if(ServletFileUpload.isMultipartContent(request)) {
            FilesInRequest.SaveFiles(request, request.getRealPath(""));
        } 
```

有什么问题？

请帮我找到并解决这个问题。

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:01:10.550

这是因为`ServletFileUpload.isMultipartContent(request)`仅检查请求内容类型，如果它以 multipart 开头，则`ServletFileUpload.isMultipartContent(request)`返回 true。

我过去使用的解决方案之一是检查请求是否属于类型`MultipartHttpServletRequest`并获取`fileMap`文件是否存在。

```
Map<String, MultipartFile> fileMap = new HashMap<String, MultipartFile>();
if (request instanceof MultipartHttpServletRequest) {
    MultipartHttpServletRequest multiRequest = (MultipartHttpServletRequest) request;
    fileMap = multiRequest.getFileMap();
}
if(fileMap.size() > 0 ) {
} 
```

我不知道这是多么理想。

# android - ArrayAdapter 蓝牙聊天

> ID：15112688
> 
> 赞同：0
> 
> 时间：2013-02-27T12:56:26.090
> 
> 标签：android, android-arrayadapter

我需要在我的应用程序中进行蓝牙传输。因此，我使用了 android SDK 的 BluetoothChat 项目的一部分。我已经可以连接到其他设备并发送数据。现在我已经去获取另一台设备上的数据了。如果我是对的，数据存储在 mConversationArrayAdapter 中，它是 ArrayAdapter 的一个对象。但是如何从 Arraydapter 中获取数据？我必须使用什么方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:09:58.253

You can use getItem(position), doing it getCount() times. Or you can write own adapter, that extends, for example, BaseAdapter.

# css - 在可变高度中制作 div td height:100% 可以跨浏览器工作

> ID：15112689
> 
> 赞同：1
> 
> 时间：2013-02-27T12:56:29.853
> 
> 标签：css, cross-browser

在有人开始尖叫“不要使用表格进行布局”之前，我无法创建适合我情况的非表格布局。

由于显而易见的原因，直接设置`height: 100%`不起作用（也许不是那么明显，但我理解它为什么不起作用）：

```
<td>
    <div style='height:100%'></div>
</td> 
```

* * *

尝试使用绝对定位：

```
<td style='position:relative'>
    <div style='position:absolute; top:0px; bottom:0px;'></div>
</td> 
```

FF 中断，因为它无法识别 td 上的定位。还神秘地在 IE9 中中断。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:06:54.560

为了使百分比值适用于身高，必须确定父母的身高！

这意味着`td`元素需要`height`定义：

```
<table>
    <tr>
        <td style='height:100px'>
           <div style='height:100%'>hi</div>
       </td>
    </tr>
</table> 
```

# c - 如何对两个数字进行按位与？

> ID：15112691
> 
> 赞同：1
> 
> 时间：2013-02-27T12:56:40.923
> 
> 标签：c, function, bit-manipulation

例如，假设我想按位计算 124 到 100 之间的 AND 函数，我应该怎么做呢？请简要说明。谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-27T12:58:24.623

`int number = 124 & 100`

* * *

解释：

假设 32 位整数，将 124 转换为按位格式。=

`0000 0000 0000 0000 0000 0000 0111 1100`

假设 32 位整数，将 100 转换为按位格式。=

`0000 0000 0000 0000 0000 0000 0110 0100`

按位与运算：

```
0000 0000 0000 0000 0000 0000 0111 1100
0000 0000 0000 0000 0000 0000 0110 0100
----------------------------------------
0000 0000 0000 0000 0000 0000 0110 0100
--------------------------------------- 
```

这是`100`十进制！这将包含在`number`上面的代码中！

与门真值表是：

```
+-------+---------+
| A | B | A AND B |
+-------+---------+
|0  | 0 |    0    |
|0  | 1 |    0    |
|1  | 0 |    0    |
|1  | 1 |    1    |
+-------+---------+ 
```

* * *

```
#include <stdio.h>

#define IS_SET(a,b) ((((a & (1 << b)) >> b) > 0?1:0))
#define SET(a,b) ((a |= (1 << b)))
#define CLEAR(a,b) ((a &= ~(1 << b)))

int AND(int a, int b)
{
    int i;
    int c = 0;
    for(i = 0; i < sizeof(int); i++){
      if(IS_SET(a,i) && IS_SET(b,i)){
        SET(c,i);
      }else{
        CLEAR(c,i);
      }
    }
    return c;
}

int main(int argc,char *Argv[])
{
   int a = 10;
   int b = 30;
   //Basic UNIT test!
   if((a & b) == AND(a,b)){
      printf("Test pass!");
   }else{
      printf("Test fail!");
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:59:51.503

在 C 中使用按位和运算符，`&`如`124 & 100`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T12:58:20.760

只需使用`&`运算符：

```
int a = 124, b = 100;
int c = a & b; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T12:58:36.620

只需使用`result = a & b` ...

# javascript - Primefaces 组件无法正确渲染

> ID：15112699
> 
> 赞同：1
> 
> 时间：2013-02-27T12:56:59.397
> 
> 标签：javascript, jsf, autocomplete, primefaces, rendering

我正在开发 Spring3/JSF2/Primefaces3.5 应用程序。

我面临的问题是某些 Primefaces 组件**（p:autocomplete、p:calendar 和 p:selectOneMenu）**无法在浏览器中正确呈现。该问题在许多页面中随机出现。如果我重新加载页面（例如通过 F5 键），问题就会得到纠正，并且组件会按应有的方式呈现。

.xhtml 文件：

```
<ui:composition  
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://java.sun.com/jstl/core"
    xmlns:p="http://primefaces.org/ui">

    <h:form id="mainForm">

    ....

    <f:validateBean>
        <table class="listing form" cellpadding="0" cellspacing="0">
                ...
                (some p:inputText elements)
                ...

            <tr class="bg">
                <td class="first"><strong>Marque :</strong></td>
                <td class="last">
                    <p:autoComplete
                        label="Marque"
                        value="#{montureBean.marque}"
                        completeMethod="#{montureBean.autocompleteMarque}"
                        var="item"
                        itemLabel="#{item.intitule}"
                        itemValue="#{item}"
                        converter="#{montureBean.marqueConverter}"
                        dropdown="true"/>

                    <p:commandLink onclick="dlgMarque.show()"  immediate="true">
                        <img src="/images-main/add-icon.gif" border="0" alt="Ajouter Marque" class="img-action"/>
                    </p:commandLink>
                </td>
            </tr>                                    
            <tr class="bg">
                <td class="first"><strong>Matière :</strong></td>
                <td class="last">
                    <p:autoComplete
                        label="Matière"
                        value="#{montureBean.matiere}"
                        completeMethod="#{montureBean.autocompleteMatiere}"
                        var="item"
                        itemLabel="#{item.intitule}"
                        itemValue="#{item}"
                        converter="#{montureBean.matiereConverter}"
                        dropdown="true"/>

                    <p:commandLink onclick="dlgMatiere.show()"  immediate="true">
                        <img src="/images-main/add-icon.gif" border="0" alt="Ajouter Matière" class="img-action"/>
                    </p:commandLink>
                </td>
            </tr>                                    

        </table>
    </f:validateBean>

    </h:form>
</ui:composition> 
```

以下是为 p:autocomplete 生成的代码示例：

错误的渲染：

```
 <span aria-multiline="false" aria-disabled="false" role="textbox" id="mainForm:j_id_q_1i" class="ui-autocomplete">
        <input id="mainForm:j_id_q_1i_input" name="mainForm:j_id_q_1i_input" class="ui-autocomplete-input ui-inputfield ui-widget ui-state-default ui-corner-left" autocomplete="off" value="" type="text">
        <input id="mainForm:j_id_q_1i_hinput" name="mainForm:j_id_q_1i_hinput" autocomplete="off" value="0" type="hidden">
        <button class="ui-button ui-widget ui-state-default ui-corner-right ui-button-icon-only" type="button">
            <span class="ui-button-icon-primary ui-icon ui-icon-triangle-1-s"></span>
            <span class="ui-button-text">&nbsp;</span>
        </button>
        <div id="mainForm:j_id_q_1i_panel" class="ui-autocomplete-panel ui-widget-content ui-corner-all ui-helper-hidden ui-shadow"></div>
    </span> 
```

正确渲染：

```
 <span id="mainForm:j_id_q_1i" class="ui-autocomplete">
            <input id="mainForm:j_id_q_1i_input" name="mainForm:j_id_q_1i_input" type="text" class="ui-autocomplete-input ui-inputfield ui-widget ui-state-default ui-corner-left" autocomplete="off" value="" />
            <input id="mainForm:j_id_q_1i_hinput" name="mainForm:j_id_q_1i_hinput" type="hidden" autocomplete="off" value="0" />
            <button class="ui-button ui-widget ui-state-default ui-corner-right ui-button-icon-only" type="button">
                <span class="ui-button-icon-primary ui-icon ui-icon-triangle-1-s"></span>
                <span class="ui-button-text">&nbsp;</span>
            </button>
            <div id="mainForm:j_id_q_1i_panel" class="ui-autocomplete-panel ui-widget-content ui-corner-all ui-helper-hidden ui-shadow"></div>
        </span>
        <script id="mainForm:j_id_q_1i_s" type="text/javascript"><!--
            $(function(){PrimeFaces.cw('AutoComplete','widget_mainForm_j_id_q_1i',{id:'mainForm:j_id_q_1i'});});
        //--></script> 
```

我注意到：

*   许多属性被分配给第一个跨度而不是输入，
*   两个输入元素没有在错误的渲染中关闭**>**代替**/>**
*   有一个**javascript函数**出现在正确的渲染中，我们在错误的情况下看不到。

这是一个错误还是我做错了什么。注意：我使用 p:layout 进行页面组织，使用 f:validation 验证输入元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:56:26.857

终于解决了！

真的很难找出我的项目出了什么问题，因为它是随机发生的并影响了许多页面。

问题是我正在使用使用“ui:include”的 src 属性更新的“p:panel”，如下所示：

```
<p:panel id="mainPanel">
    <ui:include src="#{menuBean.mainContentPage}.xhtml" />
</p:panel> 
```

菜单元素只是使用内容文件的名称（例如 addClient.xhtml、addStore.xhtml ）设置“mainContentPage”的值，以通过 ajax 更新显示和更新“mainPanel”。

每个 .xhtml 内容文件都有自己的表单和组件。

我犯的错误是不同文件中的所有表单都具有相同的 id。

```
 <h:form id="mainForm">
          ….commandlinks and components….
  </h:form> 
```

我认为为每个表单指定不同的名称并不是很重要，因为面板会使用新内容进行更新。不幸的是，系统将表单名称保存在某处，并且组件的呈现受到影响。

我更改了 .xhtml 文件中所有表单的 ID，一切正常。

给大家的大建议：**在 JSF PROJET 中为每个表单使用不同的 ID**。

# android - 是否可以使用 SSL 证书作为中间 CA 证书？

> ID：15112704
> 
> 赞同：1
> 
> 时间：2013-02-27T12:57:19.273
> 
> 标签：android, ssl-certificate, man-in-the-middle

我正在 Android 上设置 MITM 测试环境，我需要伪造假证书，然后将其呈现给应用程序。为了实现这一点，我需要我的 CA 是 Android 的受信任的，这意味着我必须手动安装我的 CA 证书。

我想避免这个特定的步骤。

我正在考虑获得由 GoDaddy 或 GeoTrust 颁发的正确（= 购买）证书，它们都受 Android 信任。但是我必须使用这个证书作为伪造的中间 CA。

是否可以？有没有我没有考虑到的逻辑/实际限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:33:00.787

这取决于证书中设置的扩展名以及软件是否正确检查它们。例如，证书密钥使用扩展指定密钥是否可用于签署其他证书。证书基本约束扩展指定主题是否可以充当证书颁发机构，以及证书可以低于多少级别。

普通 SSL 证书不应具有充当 CA 证书所需的扩展。这意味着您的方法很可能行不通。

# wordpress - 任何网页的最后修改日期

> ID：15112709
> 
> 赞同：0
> 
> 时间：2013-02-27T12:57:39.420
> 
> 标签：wordpress

我需要检查通过 Wordpress CMS 开发的联系人网页的最后修改日期，有什么办法可以解决吗？

这个技巧不会运行 "javascript:alert("Last Modified " + document.lastModified)" 因为网页是由 Wordpress 开发的。

请告诉我。

# html - HTML / CSS 图像缩略图翻转

> ID：15112712
> 
> 赞同：0
> 
> 时间：2013-02-27T12:57:53.033
> 
> 标签：html, css, rollover

我昨天在这里问了这个解决方案的问题，并认为我已经解决了它并将答案标记为正确，但现在我意识到它不太正确。

我一直在玩小提琴，基本上我想要这个..

![滚下](../Images/d0c9747a0fb449c1c91317b0287e332c.png)

左边是非悬停状态，然后是悬停状态，我想要蓝色叠加层和文本“查看项目”。

这是我正在玩的小提琴，我唯一无法展示的是文字。

[jsFiddle](http://jsfiddle.net/7Db9n/11/)

```
<div class="cont">

<div class="work-thumb"><img src="http://www.menshealth.co.uk/cm/menshealthuk/images/qQ/mh-face-off-winner-MED-07032011.jpg" /><a class="roll-text">View</a></div> 
```

需要注意的几件事......`<img>`必须响应。所以“查看项目”也必须是响应式的（不能使用固定的像素宽度）。

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T13:01:56.357

悬停在元素上时需要激活文本`div`，而不是锚本身：

```
.work-thumb:hover a.roll-text {
    display: inline-block;
    position: absolute;
    top: 20px;
    left: 10px;
    text-align: center;
    color: #fff;
} 
```

请参阅[**更新的 jsFiddle**](http://jsfiddle.net/7Db9n/12/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:04:41.007

您还可以使用同级选择器`+`来显示文本，因为它是隐藏的。

`[**Demo**](http://jsfiddle.net/7Db9n/13/)`

```
.work-thumb img:hover + .roll-text {
    display:block;
} 
```

# asp.net-mvc-3 - 具有类 ZipFile 的命名空间 System.IO.Compression

> ID：15112714
> 
> 赞同：0
> 
> 时间：2013-02-27T12:58:02.407
> 
> 标签：asp.net-mvc-3, unzip

我错过了什么？我声明了命名空间，然后在我的控制器中有这一行：

```
 [HttpPost]
public ActionResult Upload(ScormUploadViewModel model)
{
  if (ModelState.IsValid)
  {
    if (model.ScormPackageFile != null)
    {
      string destinationDirectoryName = "c:\\TSFPreview\\Zinc\\Web\\Project\\ScormPackages";
      ZipFile.ExtractToDirectory(model.ScormPackageFile, destinationDirectoryName);
    }
  }
  return View(model);
} 
```

我得到“ZipFile 在当前上下文中不存在”？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:28:09.933

您需要配置 IIS 应用程序池以运行 .NET 4.5，因为该类之前不可用。

这是一个说明：[http ://technet.microsoft.com/en-us/library/cc754523(v=WS.10).aspx](http://technet.microsoft.com/en-us/library/cc754523(v=WS.10).aspx)

该`<compilation`指令仅在调试时有用：http: [//msdn.microsoft.com/en-us/library/ff400235 (v=VS.100).aspx](http://msdn.microsoft.com/en-us/library/ff400235(v=VS.100).aspx)

# fiddler - Fiddler 在 CONNECT 到 HTTPS 服务后失败

> ID：15112716
> 
> 赞同：14
> 
> 时间：2013-02-27T12:58:06.667
> 
> 标签：fiddler

Fiddler 无法连接到我的 https 服务器，并且在 CONNECT 阶段本身失败。Firefox 可以很好地打开该站点。这里 [1] 是请求的屏幕截图。我尝试使用 Charles，它能够列出请求，但未能解密请求 [2]。

请注意，其他 HTTPS 服务似乎与提琴手一起工作正常

1：http: [//imgur.com/Zzu8lKS](https://imgur.com/Zzu8lKS)

2：http: [//imgur.com/dAbz6AK](https://imgur.com/dAbz6AK)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2019-03-30T14:38:11.333

工具/选项/HTTPS ...将 TLS1.0 更改为 TLS1.2 对我有用...

[![在此处输入图像描述](../Images/32848f380d3b7d77cba96de634f17e53.png)](https://i.stack.imgur.com/8qXk0.jpg)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-02-15T05:37:45.500

我确实在 IE 和 Firefox 中添加了 Fiddler 根证书。我仍然得到这个..... System.Security.Authentication.AuthenticationException 对 SSPI 的调用失败 请求的函数不支持提琴手

我通过在 Tools--> Fiddler Options --> HTTPS (Tab) --> Enabled Protocols 下添加 tls1.2 & tls1.2 解决了这个问题，Fiddler 开始从浏览器捕获 https 流量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-11T08:11:08.657

我对所有 SSL 站点都有类似的问题。当以下文件夹 C:\Users\<username>\AppData\Roaming\Microsoft\SystemCertificates\My\Certificates 中有很多证书时，似乎会发生这种情况

停止提琴手，清空文件夹并再次启动它为我解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-21T16:38:04.560

什么对我有用：

工具 -> Fiddler 选项 -> HTTPS -> 重置所有证书

然后我被提示创建一个新的 Fiddler 证书并通过 Windows 信任它。

# c - tcp 套接字读取调用如何永远不会返回

> ID：15112717
> 
> 赞同：1
> 
> 时间：2013-02-27T12:58:07.667
> 
> 标签：c, sockets, tcp, client-server, buffer

客户报告了一个我无法理解的错误。基于 TCP 的客户端连接到从其接收数据的服务器，很少发送任何内容。通常一切都很好，但是一旦在蓝月亮上，就会发生这样的情况：

*   服务器发送一些数据
*   客户端接收数据
*   客户端正在处理数据
*   ...同时服务器发送更多数据
*   客户端完成处理
*   客户端尝试从套接字读取数据
*   客户端在处理后永远挂在第一个 read() 语句上
*   服务器关闭连接
*   客户端仍然挂起

这是建立 tcp 连接的方式（剥离所有日志、返回检查等）

```
ret = inet_pton(AF_INET, conn->address, &addr.sin_addr);
addr.sin_port        = htons(conn->port); /* Server port */
addr.sin_family      = AF_INET;
sock = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP);
connect(sock, (struct sockaddr *) &addr, sizeof(addr)); 
```

这是读取包装器：

```
int32_t _readn ( int fd, uint8_t *vptr, int32_t n )
{
  int32_t  nleft;
  int32_t  nread;
  uint8_t*     ptr;

  ptr = vptr;
  nleft = n;
  while (nleft > 0) {
    if ((nread = read (fd, ptr, nleft)) < 0) {
      if (errno == EINTR) {
        nread = 0;
      } else {
        return E_NETWORK_ERROR;
      }
    } else if ( nread == 0 ) {
      break;
    }
    nleft -= nread;
    ptr   += nread;
  }
  return  (n-nleft);
} 
```

即使在连接关闭之后，读取调用是否有可能永远阻塞？

我的包装器中是否有某种我没有注意到的棘手错误可能导致这种情况？我应该在连接时为套接字设置一些标志吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T14:28:55.487

问题的根源是如果没有数据要读取，读取就会阻塞。例如，如果写入的字节数少于预期的 n 个字节。这称为阻塞读取。

要发现是否有数据，使用`select`Jite说的。

最后，您可能有防火墙断开实时连接。一些防火墙被配置为切断打开时间超过给定时间（例如 30 分钟）的连接。然而，这可能不是你所拥有的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T14:21:21.230

我最终使用了一个基于选择的函数来检查数据是否可用。

虽然神秘数据丢失背后的原因仍然未知（没有确认服务器错误），但这似乎可以解决问题：

```
int32_t isReadDataAvailableOnSocket ( int sock, uint32_t waitTimeUs )
{
  fd_set fds;
  int16_t ret = 0;
  struct timeval timeout;
  struct timeval* timeoutPtr = NULL;

  if (waitTimeUs>0) {
    timeout.tv_sec = waitTimeUs / 1000000;
    timeout.tv_usec = waitTimeUs % 1000000;
    timeoutPtr = &timeout;
  }

  FD_ZERO ( &fds );
  FD_SET ( sock, &fds );

  ret = select ( sock+1, &fds, NULL, NULL, timeoutPtr );
  if (ret == -1) {
    WARN("select failed for udp socket=[%d]", sock);
    return E_NETWORK_ERROR;
  }
  if ( ! FD_ISSET(sock, &fds) )
  {
    return E_NO_DATA;
  }
  else
  {
    return 0;
  }
} 
```

# file - 一次更改多个文件中的html代码

> ID：15112721
> 
> 赞同：2
> 
> 时间：2013-02-27T12:58:18.367
> 
> 标签：file

有谁知道 Sublime Text 2（或其他编辑程序）中是否有一个选项，我可以一次更改多个文件中的内容？

假设我想在每一页的页脚中更改我的电话号码，我必须打开所有文件，然后自己在每一页上复制过去。我知道 Wordpress 或本地服务器是一种解决方案，但没有它可以做到吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:03:57.523

试试**Sublime Text 2** `Find` >`Find in Files...`菜单命令。

您可以在多个文档中查找和替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:03:40.503

大多数编辑都有这种能力。使用 Notepad++（免费文本编辑器）执行此操作的步骤：

*   打开要替换的文件
*   搜索菜单 > 替换
*   输入要查找的文本，然后输入要替换的文本
*   点击【在所有打开的文件中替换】

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-27T13:01:04.170

Visual Studio 无疑是可以做到这一点的程序之一。您可以在所有打开的文档中查找和替换文本

编辑：

一个可以做到这一点的简单文本编辑器是 textpad。我几乎将它用于任何事情。

# css - ie 9 中的 HelveticaNeueLite 字体错误

> ID：15112732
> 
> 赞同：0
> 
> 时间：2013-02-27T12:58:42.307
> 
> 标签：css, html, font-face, embedded-fonts

我正在一个需要我使用`HelveticaNeueLite`字体系列的网站上工作。我为 ie 和其他浏览器提供了单独的 css 文件。我的 ie 的 css 代码如下

```
@font-face {
font-family: HelveticaNeueLite;
src: url("/system/fonts/HelveticaNeueLTStd-UltLt_0.eot?#iefix") format('embedded-opentype');
} 
```

![在此处输入图像描述](../Images/f7858062d8b18af8b26390ece225d96d.png)

但我在 ie-9 中不断收到上述错误。我不知道出了什么问题。`.otf`我的css 文件中没有任何字体的参考。我曾使用`HelveticaNeueLTStd-UltLt_0.otf`文件`HelveticaNeueLTStd-UltLt_0.ttf`通过[http://www.freefontconverter.com/](http://www.freefontconverter.com/)生成，并用于通过[http://www.kirsle.net/wizards/ttf2eot.cgi](http://www.kirsle.net/wizards/ttf2eot.cgi)`HelveticaNeueLTStd-UltLt_0.ttf`生成`HelveticaNeueLTStd-UltLt_0.eot`

* * *

而不是`.eot`我使用`.woff`字体，它在 IE-9 中工作。

```
@font-face {
font-family: HelveticaNeueLite;
src: url('/system/fonts/HelveticaNeueLTStd-UltLt_0.woff') format("woff");
} 
```

但我仍然收到以下错误：

![在此处输入图像描述](../Images/f7858062d8b18af8b26390ece225d96d.png)

# c - 使用 strncpy 的 C 语言简单计算器

> ID：15112741
> 
> 赞同：-2
> 
> 时间：2013-02-27T12:58:58.773
> 
> 标签：c, math, strncpy

看一下脚本。它计算 telop 并打印出答案。如您所见，它现在只能计算加号（+）。我从来没有做过任何 C 编码，所以我不知道如何让它计算乘法（X 或 *）、减法（-）和除法（: 或 /）。

所以基本上我希望有人能告诉我如何包括乘法、减法和除法。

```
#include <stdio.h>
#include <stdlib.h>

int total = 0;
void telop(char*s) {
char sum[1024];

if (s[0]==0) return;
if (s[0]=='+')

{
      strncpy(sum, &s[1],1);
      total += atoi(sum);
}
    telop(&s[2]);
}

int main()

{
    telop("+1+2+3");
    printf("%d", total);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:18:46.637

如果您更改“-”中的“+”然后它会计算，您也可以将其与“/”或“*”一起使用

```
void telop (char*s){
    char som[1024];
    if(s[0]==0) return;

    if(s[0]=='+')
    {   strncpy (som, &s[1],1);
        total += atoi(som); }
    if(s[0]=='-')
    {   strncpy (som, &s[1],1);
        total -= atoi(som); }
    if(s[0]=='/')
    {   strncpy (som, &s[1],1);
        total /= atoi(som); }
    if(s[0]=='*')
    {   strncpy (som, &s[1],1);
        total *= atoi(som); }

    telop(&s[2]);
} 
```

# android - 如何设置 ImageView[] 数组？

> ID：15112742
> 
> 赞同：4
> 
> 时间：2013-02-27T12:59:01.663
> 
> 标签：android, arrays, imageview

为了设置 ImageView 动态我采用 ImageView[] 数组。如果我尝试从我的数组中处理 ImageView，则活动会崩溃。我的错误在哪里？

活动主.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<TableRow
    android:id="@+id/tableRow1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true" >

    <ImageView
        android:id="@+id/iv1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:scaleType="fitStart" />

    <ImageView
        android:id="@+id/iv2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:scaleType="fitStart" />

    <ImageView
        android:id="@+id/iv3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:scaleType="fitStart" />
</TableRow>

</RelativeLayout> 
```

MainActivity.java：

```
 package com.example.test;

    import android.app.Activity;
    import android.os.Bundle;
    import android.widget.ImageView;

    public class MainActivity extends Activity {

    private ImageView iv1, iv2, iv3;
    private ImageView[] IMGS = { iv1, iv3, iv3 };

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    iv1 = (ImageView) findViewById(R.id.iv1);
    iv2 = (ImageView) findViewById(R.id.iv2);
    iv3 = (ImageView) findViewById(R.id.iv3);

    setImages();
}

private void setImages() {

    // A) this works
    iv1.setImageResource(R.drawable.ic_launcher);
    iv2.setImageResource(R.drawable.ic_launcher);
    iv3.setImageResource(R.drawable.ic_launcher);

    // B) at the beginning i need to set all images in a row
    for (ImageView img : IMGS) {
        img.setImageResource(R.drawable.ic_launcher);
    }

    // C) later on i need to set an particular image
    IMGS[1].setImageResource(R.drawable.ic_launcher);
}

    } 
```

看看 setImages()。A 工作，B 和 C 使我的活动崩溃。我的错误在哪里？

TIA托拜厄斯

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T13:12:15.433

您`ImageView[] IMGS = { iv1, iv2, iv3 };`在循环时只包含 3 个空元素

尝试通过执行在您的 IMGS 中添加值

```
IMGS[0] = iv1;
IMGS[1] = iv2;
IMGS[2] = iv3; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-27T13:11:54.410

```
protected void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.activity_main);

     iv1 = (ImageView) findViewById(R.id.iv1);
     iv2 = (ImageView) findViewById(R.id.iv2);
     iv3 = (ImageView) findViewById(R.id.iv3);

     IMGS[0] = iv1;
     IMGS[1] = iv2;
     IMGS[2] = iv3;

     setImages();
} 
```

您永远不会将 iv1、iv2 和 iv3 分配给数组

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-06-12T05:15:08.690

使用以下代码，这对我有用

```
ImageView[] IMGS= new ImageView[3];

IMGS[0]=findViewById(R.id.iv1);
IMGS[1]=findViewById(R.id.iv2);
IMGS[2]=findViewById(R.id.iv3); 
```

# asp.net - 如何将列数据绑定到数据源？

> ID：15112748
> 
> 赞同：0
> 
> 时间：2013-02-27T12:59:18.060
> 
> 标签：asp.net, data-binding, datasource

我有 1 行和 3 列（日期、时间、内容）的表，我想要数据源中的 3 列中的 2 列（时间、内容）我该怎么做？

```
var table = (from r in socialEvents.AsEnumerable()
                         where r.Field<DateTime>("Date") >= Calendar1.SelectedDate.Date &&
                               r.Field<DateTime>("Date") <= Calendar1.SelectedDate.AddDays(1)
                         select r).CopyToDataTable();    

    if (table.Rows.Count > 0)
                {
                    DataGrid1.Visible = true;
                    DataGrid1.DataSource = table;
                    DataGrid1.DataBind();
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:09:13.653

我假设datagrid是一个GridView？那么你应该做这样的事情

```
<asp:GridView runat="server" AutoGenerateColumns="false"  >
<Columns>
    <asp:BoundField DataField="what" HeaderText="what" />
    <asp:BoundField DataField="time" HeaderText="time"  />        
</Columns>

</asp:GridView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:29:15.543

您可以在选择中指定列

```
var table = (from r in socialEvents.AsEnumerable()
                         where r.Field<DateTime>("Date") >= Calendar1.SelectedDate.Date &&
                               r.Field<DateTime>("Date") <= Calendar1.SelectedDate.AddDays(1)
                         select new {time = r.Field<DateTime>("Date"), what = r.Field<data_type>("what") }); 
```

# jquery - jquery自动补全国家标志怎么做？

> ID：15112750
> 
> 赞同：0
> 
> 时间：2013-02-27T12:59:23.593
> 
> 标签：jquery, jquery-ui-autocomplete

我需要创建一个自动完成`jQuery`脚本，该脚本将过滤来自 .csv（或 xml 等）文件的信息，选择后结果将显示所有信息。
据我了解，我将不得不使用我整天都在学习的 jquery 自动完成脚本，我希望有一个解决方案。
我有基本的编码知识，我需要它来过滤文本文件中的结果。
文本文件 .csv 的示例是：

```
"UK", "info1", "info2", "info2", "info3"
"ITALY", "info1", "info2", "info2", "info3"
"etc", "info1", "info2", "info2", "info3" 
```

因此，当用户键入 UK 时，也会出现标志，单击 UK 后会显示 info1、2、3。
我知道我需要处理这样的事情，但是如何用我自己的 xml、csv 等文件替换 geo xml？
[http://jqueryui.com/autocomplete/#remote-jsonp](http://jqueryui.com/autocomplete/#remote-jsonp)
还有如何加载标志？

在此示例代码中，它将从具有 2 个值的 txt 文件中过滤。 `"12": "Italy",` 我怎样才能添加更多？
示例：`"12": "125": "54": "Italy",`将不起作用
如何添加标志图像来加载？
这是完整的js：

```
$(function () {
    'use strict';

    // Load countries then initialize plugin:
    $.ajax({
        url: 'content/countries.txt',
        dataType: 'json'
    }).done(function (source) {

        var countriesArray = $.map(source, function (value, key) { return { value: value, data: key }; }),
        countries = $.map(source, function (value) { return value; });

        // Setup jQuery ajax mock:
        $.mockjax({
            url: '*',
            responseTime:  200,
            response: function (settings) {
                var query = settings.data.query,
                queryLowerCase = query.toLowerCase(),
                suggestions = $.grep(countries, function(country) {
                    return country.toLowerCase().indexOf(queryLowerCase) !== -1;
                }),
                response = {
                    query: query,
                    suggestions: suggestions
                };

                this.responseText = JSON.stringify(response);
            }
        });

        // Initialize ajax autocomplete:
        $('#autocomplete-ajax').autocomplete({
            serviceUrl: '/autosuggest/service/url',
            onSelect: function(suggestion) {
                $('#selction-ajax').html('You selected: ' + suggestion.value + ', ' + suggestion.data);
            }
        });

        // Initialize autocomplete with local lookup:
        $('#autocomplete').autocomplete({
            lookup: countriesArray,
            onSelect: function (suggestion) {
                $('#selection').html('You selected: ' + suggestion.value + ', ' + suggestion.data);
            }
        });

        // Initialize autocomplete with custom appendTo:
        $('#autocomplete-custom-append').autocomplete({
            lookup: countriesArray,
            appendTo: '#suggestions-container'
        });

    });

}); 
```

这是html：

```
 <h2>Ajax Lookup</h2>
    <p>Type country name in english:</p>
    <div>
        <input type="text" name="country" id="autocomplete-ajax"/>
    </div>
    <div id="selction-ajax"></div>

    <h2>Local Lookup</h2>
    <p>Type country name in english:</p>
    <div>
        <input type="text" name="country" id="autocomplete"/>
    </div>
    <div id="selection"></div>

    <h2>Custom Lookup Container</h2>
    <p>Type country name in english:</p>
    <div>
        <input type="text" name="country" id="autocomplete-custom-append" style="float: left;"/>
        <div id="suggestions-container" style="position: relative; float: left; width: 400px; margin: 10px;"></div>
    </div>
</div>

<script type="text/javascript" src="scripts/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="scripts/jquery.mockjax.js"></script>
<script type="text/javascript" src="src/jquery.autocomplete.js"></script>
<script type="text/javascript" src="scripts/demo.js"></script> 
```

# mongodb - 带有复合索引的mongodb批量删除

> ID：15112753
> 
> 赞同：0
> 
> 时间：2013-02-27T12:59:33.953
> 
> 标签：mongodb

鉴于我有一个包含以下形式的 1 个 mio 文档的集合

`{ a: "foo", b: "bar", c: "stuff", d: "other" }`

并且有一个复合索引`{a:1, b:1}`

我想删除其中的 600.000 个文档，并且对于要删除的 600.000 个文档中的每一个，我都有 [a,b] 值。我发现一个一个删除它们比发出一个要快得多

`db.collection.remove({$or: [{a:"1", b:"1"}, {a:"3",b:"3"},...]})`

这是预期的吗？难道我做错了什么？感觉有点不对劲，一个接一个的删除比我交给数据库的批量删除快 10 倍......

# sap-ase - 批量复制[复制到] 如何替换或更改 monet db/sybase 中一列的数据类型（在批量复制期间）？

> ID：15112756
> 
> 赞同：1
> 
> 时间：2013-02-27T12:59:48.890
> 
> 标签：sap-ase, monetdb

我正在尝试将我的数据从 sybase 迁移到 monetdb。（或相反）为此我从 sybase 使用 bcp 并复制到 monetdb 中。

问题是某些数据类型在 monetdb 中不可用，例如 datatime。为了解决这个问题，我可以在 monetdb 中定义一个函数，它将日期时间格式转换为 monetdb 特定格式。

但是当我尝试批量复制命令时如何在特定列上调用此函数

```
使用分隔符从文件中复制到表中；
```

sybase 中 bcp 的情况相同

编辑 2：（我想我解决了我的问题，虽然原始问题仍然存在）我想从 monetdb 和 sybase 中的 csv 文件批量复制数据。csv 文件有一列带有 unix 时间戳（从 1970 年开始的秒数）。由于与人类可读的日期时间（YYYY-MM-DD HH:MM:SS）格式相比，使用 unix 时间戳进行查询比较困难，因此我想将该时间戳列转换为日期时间格式）。

我无法在批量复制时更改数据类型，但定义（使用）函数将时间戳转换为人类可读格式。

```
-- 对于 Sybase 使用的 dateadd 函数：
select * from gaurav.table where dateadd(ss,t_stamp,'1/1/1970') '2013-02-27 (小于号) 10:17:29.463114';

```

```
--Monetdb 定义了一个函数：
create function "epoch"(sec INT) 返回 TIMESTAMP 外部名称 timestamp."epoch";
select * from gaurav.table where epoch(t_stamp) (小于号) '2013-02-27 10:17:29.463114';

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:21:26.240

我不确定 monetdb，但在 Sybase ASE 中，您可以为表定义视图，将 Sybase 日期时间转换为您需要的格式。创建视图后，您可以直接从视图中进行 BCP，并且您的数据应该已准备好导入。

您也许可以将 BCP 转换为表视图，并完成同样的事情。

有关视图的更多信息，请参见 Sybase 的[*Transact-SQL 用户指南*](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.sqlug/html/sqlug/sqlug479.htm)

# bash - 使用标准 Bash 实用程序发现数据稳定的点

> ID：15112761
> 
> 赞同：1
> 
> 时间：2013-02-27T13:00:03.297
> 
> 标签：bash, graph, detect, stability

我有一组数据（两列 CSV 数字）最初变化很大，然后稳定在某个数字附近。我正在尝试使用标准 Bash 实用程序以自动方式发现图表首先似乎稳定的点。在 ASCII 图中，数据可能如下所示：

```
y
^                                     ___ stabilised
| .                                  |
|  .                                 |
|    .    .                          |
|     .  . .    .       .            ▾
|      .    .  . .   . . .  . . . . . . . . . . . . . . . .
|             .   . .              .
------------------------------------------------------------> x 
```

请注意，数据不会达到恒定值，而是在稳定值附近略有波动。有没有什么方法可以让我发现使用标准 Bash 实用程序的图表似乎变得稳定的第一个点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:20:30.647

你想要的是检测*统计平稳性*，这是一个非常棘手的问题，研究论文[[1]](http://arxiv.org/abs/gr-qc/9910027)、[[2]](http://arxiv.org/abs/1001.1831)、[[3]](http://www.sciencedirect.com/science/article/pii/S0378375801000817)都是关于它的。首先，在您开始考虑如何使用任何编程语言（无论是 Unix 实用程序、带有 numpy/scipy 的 Python 或任何您选择的任何语言）实现它之前，您都需要确定实际上能够检测平稳性的算法。也许一本关于时间序列分析的好书会在这方面对您有所帮助。

# android - 如何在 AndEngine 中处理特定的矩形部分碰撞

> ID：15112762
> 
> 赞同：1
> 
> 时间：2013-02-27T13:00:04.937
> 
> 标签：android, collision-detection, andengine, collision

我正在使用 AndEngine 开发拳击游戏。我有两个动画精灵 A 和 B，它们代表两个拳击手。我想区分他们的健康状况。如果精灵 A 用手击中 B，则 B 的生命值会降低。如何区分两个精灵之间的这种碰撞？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T01:01:05.727

我想你要问的是，当一个拳击手精灵与另一个拳击手精灵发生碰撞时，你如何确定哪个拳击手应该受到伤害。基本答案是您需要收集和利用更多信息，而不仅仅是是否发生碰撞。我的建议是，您不要将出拳视为整个精灵之间的碰撞，而是计算出代表拳头的形状，并在出拳期间的关键时刻检查它是否与其他拳击手发生碰撞。例如：

![冲床](../Images/0a150fcf21d1feaf42a800c33d753375.png)

当拳击手出拳时，您想要确定动画中接触“很重要”的关键时间段（大概是在出拳的完全延伸时，并且在出拳之前和之后都有一点延伸。）在这段时间时间，将拳击手上的一些布尔值设置为 true，而在其他时候，将其设置为 false。如果它是真的，在你的拳击手更新中，你应该计算一个代表“拳头”的形状。您不必渲染此形状（尽管这样做可能有助于调试和测试），您只需计算其位置，以便检查“拳头”是否与其他拳击手发生碰撞。拳头撞击区域在概念上应该与拳击手进行出拳相关联，因此您无需检查拳击手和他自己的拳头之间的碰撞。您可能希望将影响形状作为拳击手实体中的一个字段。因此，如果拳头在此期间与另一个实体（即另一个拳击手）发生碰撞，则会对另一个拳击手施加一些健康伤害。

您在下面的评论中询问了一些额外的实施细节。以下代码不是完整的实现，但应该可以帮助您入门。

```
public class BoxerSprite extends AnimatedSprite {

    boolean     isPunching  = false;
    Rectangle   fist;

    public BoxerSprite(float pX, float pY, float pWidth, float pHeight, ITiledTextureRegion pTiledTextureRegion,
            ITiledSpriteVertexBufferObject pTiledSpriteVertexBufferObject) {
        super(pX, pY, pWidth, pHeight, pTiledTextureRegion, pTiledSpriteVertexBufferObject);

        //Create a "fist" object within your boxer sprite
        fist = new Rectangle(fistX, fistY, fistWidth, fistHeight, vertexBufferObjectManager);

        //Use setPosition to move the fist to the appropriate location during the animation.
        fist.setPosition(pX, pY);
    }

} 
```

# blackberry - 如何在黑莓手机中设置方向？

> ID：15112764
> 
> 赞同：3
> 
> 时间：2013-02-27T13:00:07.153
> 
> 标签：blackberry, cordova, blackberry-webworks

我正在开发一个 BlackBerry Phonegap 应用程序，我想将应用程序的方向设置为纵向。为此，我添加 `<preference name="orientation" value="portrait" />`了 config.xml 文件，但它不起作用。

我正在使用 Phonegap 2.4.0 版。任何人都可以帮我设置方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T09:01:25.973

来自[BlackBerry 支持论坛](http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/support-landscape-or-portrait-mode-in-blackberry/m-p/1886551#M28346)：

```
<rim:orientation mode="portrait" /> 
```

在您的 config.xml 中。 [需要 WebWorks SDK 2.3 或更高版本](https://developer.blackberry.com/html5/documentation/rim_orientation_element_1594186_11.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T14:54:50.900

您需要在 config.xml 文件中像这样锁定方向

```
<feature id="blackberry.app">
    <param name="orientation" value="portrait" />
</feature> 
```

config.xml 的文档可在此处获得 - [http://developer.blackberry.com/html5/documentation/param_element.html](http://developer.blackberry.com/html5/documentation/param_element.html)

# drupal - 为什么drupal总是显示/（root）的内容？

> ID：15112770
> 
> 赞同：1
> 
> 时间：2013-02-27T13:00:42.137
> 
> 标签：drupal, ubuntu, vps

将 Drupal 站点从一个 VPS 移动到另一个 VPS 后，站点加载首页没有问题，即`http://www.example.com/`

但是，无论我点击哪个链接，例如：

```
 http://www.example.com/user
 http://www.example.com/node/2 
```

内容相同`http://www.example.com/`。浏览器地址栏中的 URL 已更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:22:00.383

确保该`.htaccess`文件已进入新站点。它应该与 index.php 位于同一目录中。有时程序会忽略它，因为它以点开头，并且无法移动。

如果确实存在，则需要启用 mod rewrite，如果 web 服务器是 apache...或者如果是 Nginx，则站点配置需要支持重写请求字符串。

# .net - 在 IE >5.0、Chrome、Firefox 中将 highcharts 导出为 png。

> ID：15112775
> 
> 赞同：0
> 
> 时间：2013-02-27T13:01:06.843
> 
> 标签：.net, highcharts

如何在 IE >6.0、Chrome、Firefox 中以“png”格式导出 Highchart。由于安全问题，我不想在 Highchart 服务器上发送请求以将其转换为“png”或任何其他格式。

谢谢阿布舍克·辛格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:24:45.343

您可以创建自己的导出服务器，HighCharts 团队[在此处](http://www.highcharts.com/component/content/article/2-news/52-serverside-generated-charts)记录或使用众多包装器之一来满足您[在此处](http://www.highcharts.com/download)列出的代码风格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:33:29.487

我也建议熟悉这些文章[http://docs.highcharts.com/#faq](http://docs.highcharts.com/#faq)

# php - 在查询中传递字符串而不使用引号 ''

> ID：15112779
> 
> 赞同：4
> 
> 时间：2013-02-27T13:01:36.373
> 
> 标签：php, mysql, cakephp, cakephp-1.2

我有这个查询代码：

```
$conditions[]=array('codiceBiblio IN (?)'=> $tot); 
```

其中 $tot 是一个字符串（例如：2345,5657,4565,5678）。
在这种情况下，查询将是：

```
SELECT [...] WHERE codiceBiblio IN ('2345,5657,4565,5678') 
```

但它只会返回第一条记录。

所以它应该是：

```
SELECT [...] WHERE codiceBiblio IN (2345,5657,4565,5678) 
```

我该怎么做？

**如何构建查询**

我有这个查询代码：

```
// General Query
$conditions = array(
    'editore LIKE' => "%$e%",
    'titolo LIKE' => "%$t%"
); 
```

我用用户的选择填充 $conditions，例如：

```
if ($anno&&$anno2)
    $conditions[] = array('anno BETWEEN ? AND ?' => array($anno,$anno2));

if (isset($menu)&&$menu!='')
    $conditions[]=array('classe LIKE' => "%$menu%"); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T13:13:50.470

只需使用数组并省略`IN()`子句。手册（[复杂查找条件](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#complex-find-conditions)）提供了这个例子：

```
array('Company.status' => array('inactive', 'suspended')) 
```

...产生以下SQL：

```
`Company`.`status` IN ('inactive', 'suspended') 
```

如果`$tot`是一个字符串，`2345,5657,4565,5678`你需要先[explode()](http://php.net/explode)它。

**免责声明：**这适用于 Cake 2，不确定 1.2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T14:53:05.570

Álvaro G. Vicario 的建议是正确的，但您也可以这样做：

```
$conditions[]=array('codiceBiblio IN (' . $tot . ')'); 
```

# cordova - App Store 是否批准 Phonegap 应用程序

> ID：15112781
> 
> 赞同：4
> 
> 时间：2013-02-27T13:01:40.377
> 
> 标签：cordova, app-store

我正在使用 PhoneGap 开发一个简单的待办事项列表应用程序。我的应用程序离线工作，在本地存储所有数据并使用 iOS 通知。它可以通过网络浏览器在 PC 上使用，所以我用 HTML5 构建了它。

Apple 是否批准 PhoneGap HTML5 应用程序在 App Store 中使用，例如我的应用程序？我应该使用Objective-C吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T13:18:40.477

App Store 上有很多 Phonegap 应用程序。关于您的问题：

1.  我想知道苹果是否会像我的应用一样为 appstore 批准 phonegap html5 应用？：是的，Apple 批准了 phone gap html5 应用程序。在发布应用程序之前，应用程序将通过苹果所做的所有常规检查。所以不要担心，继续。
2.  我应该使用目标c吗？：如果您的应用程序要求适合手机间隙，那么您可以继续在手机间隙中创建应用程序。目标 C 不是强制性的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:05:31.550

应用商店和目录中已有数以千计的应用。见[http://phonegap.com/about/faq/#q_what_phonegap_apps_are_already_in_app_stores](http://phonegap.com/about/faq/#q_what_phonegap_apps_are_already_in_app_stores)

# c# - 改变 PictureBox 的位置

> ID：15112783
> 
> 赞同：3
> 
> 时间：2013-02-27T13:01:49.443
> 
> 标签：c#, winforms, visual-studio

我在 flowLayout 面板上有 2 个图片框，需要将图片框 1 移动到图片框 2 的位置，将图片框 2 移动到图片框 1 的位置

编辑：

我已经尝试过，但图片框不移动...我使用 MessageBox 检查位置..位置是正确的，但它们不交换位置（位置没有改变......）

```
 MessageBox.Show("PixBoxMover x " + picBoxMover.Location.X + "y " + picBoxMover.Location.Y);
        MessageBox.Show("picBoxMovendo x " + picBox.Location.X + "y " + picBox.Location.Y);

        Point temp = picBox.Location;

        picBox.Location = picBoxMover.Location;
        picBoxMover.Location = temp;

        MessageBox.Show("PixBoxMover x " + picBoxMover.Location.X + "y " + picBoxMover.Location.Y);
        MessageBox.Show("picBoxMovendo x " + picBox.Location.X + "y " + picBox.Location.Y); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T13:13:49.300

`pictureBox`您可以通过在容器控件 ( )中设置子控件 ( ) 的索引来更改排序`flowLayoutPanel`：

```
var index1 = flowLayoutPanel1.Controls.IndexOf(pictureBox1);
var index2 = flowLayoutPanel1.Controls.IndexOf(pictureBox2);

flowLayoutPanel1.Controls.SetChildIndex(pictureBox1, index2);
flowLayoutPanel1.Controls.SetChildIndex(pictureBox2, index1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-06T13:44:55.913

对于使用单选按钮等特殊情况，请按以下步骤操作：

```
 using System.Drawing;

 private void rbtPruef_CheckedChanged(object sender, EventArgs e)
    {
        if (rbtDePruef.Checked)
        {
            pictureBox2.Location = new Point(112, 80);
            pictureBox1.Location = new Point(242, 80);
        }
        else
        {
            pictureBox2.Location = new Point(242, 80);
            pictureBox1.Location = new Point(112, 80);
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T13:11:12.247

你可以创建一个函数

```
public void SwapLocations(ref Point p1, ref Point p2)
{
    Point temp = p1;
    p1 = p2;
    p2 = temp;
} 
```

然后调用它

```
SwapLocations(pictureBox1.Location, pictureBox2.Location); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T13:05:52.903

```
Point loc1 = pictureBox1.Location;
Point loc2 = pictureBox2.Location;

pictureBox1.Location = loc2;
pictureBox2.Location = loc1; 
```

编辑：单点分配：

```
Point temp = pictureBox1.Location;

pictureBox1.Location = pictureBox2.Location;
pictureBox2.Location = temp; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T13:12:01.540

如果你想交换他们的位置，只需交换他们的`Location`属性：

```
int tmp_X = p1.Location.X;
int tmp_Y = p1.Location.Y;

p1.Location.X = p2.Location.X;
p1.Location.Y = p2.Location.Y;

p2.Location.X = tmp_X;
p2.Location.Y = tmp_Y; 
```

要强制视觉重定位，请调用以下命令：

```
p1.Invalidate();
p2.Invalidate(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-23T11:32:16.110

由于我在**某个区间内****移动 PictureBox时也遇到了****很大的问题**，因此我决定编写一个有用的函数。该函数在计时器的每个滴答声中被调用。该函数的**意义**是***将图片框从 (0 + Offset) 开始移动到 (end_point_of_movement + Offset)***。也许该功能对你们中的某些人有用：

 *****```
 private void timer_analytics_Tick(object sender, EventArgs e)
    {

        //This function is used to move a PictureBox in a certain Interval inclusive Offset 

         int interval, intervalOffset, xCoo, yCoo, xCooNew;
         interval = 303 - 247;                              //Max min location picture
         intervalOffset = 247;                              //Starting Point of PictureBox
         xCoo = pictureBox_GreenArrow.Location.X;           //get xCoordinate of PictureBox
         xCoo -= intervalOffset;                            //Substract Offset in order to calculate next Point
         yCoo = pictureBox_GreenArrow.Location.Y;           //get yCoordinate of PictureBox
         xCooNew = ((xCoo + 1) % (interval));               //calculate new xCoordinate of PictureBox
                                                            //the inverval runs automatically from 0 to (303-247)

        //set new Point of PictureBox which goes from (0 + intervalOffset) until (interval + intervalOffset)
        pictureBox_GreenArrow.Location = new Point((xCooNew + intervalOffset), yCoo);

    } 
```

一旦 PictureBox*达到*它的**限制**（interval_value + intervalOffset_value），PictureBox**又从头开始！**

变量：

*   *间隔*
*   *间隔偏移*

可以修改以将其用于您的应用程序！

问候，里卡多*****

# asp.net - 如何以给定的自定义样式排列 Telerik 网格中的列

> ID：15112789
> 
> 赞同：0
> 
> 时间：2013-02-27T13:02:02.843
> 
> 标签：asp.net, telerik-grid, legend

当我单击 Telerik Grid 中的 ADD New 按钮时，我必须显示 Grid 的列，如下图所示，面板内带有框。

请建议我如何进行

![在此处输入图像描述](../Images/fa61b273c9afa527e52666d9ca7a66fb.png)

这些也称为传奇风格

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:52:16.333

假设 asp.net web 表单和 Telerik ASP.NET AJAX。[这个 Telerik 演示](http://demos.telerik.com/aspnet-ajax/grid/examples/dataediting/templateformupdate/defaultcs.aspx)中演示了您想要做的事情。您可以设置：

```
<EditFormSettings EditFormType="Template">
                <FormTemplate> 
```

并提供您自己的模板以根据需要布置 UI。您还可以使用[用户控件](http://demos.telerik.com/aspnet-ajax/grid/examples/dataediting/usercontroleditform/defaultcs.aspx)。

# c++ - 想要在 opencv 中平滑 cv::Mat

> ID：15112794
> 
> 赞同：2
> 
> 时间：2013-02-27T13:02:14.717
> 
> 标签：c++, opencv

我正在使用 OpenCV 2.3.1。

我有一个 cv::Mat 图像，我想应用一个平滑过滤器。不幸的是，我发现的所有代码都是

```
void cvSmooth(const CvArr* src, CvArr* dst, int smoothtype=CV_GAUSSIAN, int size1=3, int size2=0, double sigma1=0, double sigma2=0 ); 
```

它使用 CvArr 而不是 cv::Mat。我找不到关于如何在 cv::Mat 和 CvArr 之间转换的解释。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T13:18:59.493

如[文档中所述](http://docs.opencv.org/modules/imgproc/doc/filtering.html#smooth)：

> 注意：该功能现已过时。使用[GaussianBlur()](http://docs.opencv.org/modules/imgproc/doc/filtering.html#gaussianblur)、[blur()](http://docs.opencv.org/modules/imgproc/doc/filtering.html#blur)、[medianBlur()](http://docs.opencv.org/modules/imgproc/doc/filtering.html#medianblur)或lateralFilter( [)](http://docs.opencv.org/modules/imgproc/doc/filtering.html#bilateralfilter)。

对于所有这些函数，都存在 C++ 接口，例如：

```
void GaussianBlur(InputArray src, OutputArray dst, Size ksize, double sigmaX, double sigmaY=0, int borderType=BORDER_DEFAULT ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T14:15:19.683

首先，您根据需要加载图像，对我来说，我使用了：

```
image = cvLoadImage("6mtEy.jpg"); 
```

据我所知，如果您想使用此功能，您需要将 Mat 转换为 cvArr（我的代码中为 IplImage）：

```
IplImage tmp = image; 
```

然后创建与第一张图片大小相同的目标图片：

```
IplImage *dst;
dst = cvCreateImage(cvSize(tmp.width, tmp.height), tmp.depth, tmp.nChannels); 
```

然后你使用你的功能：

```
cvSmooth(&tmp, dst, CV_GAUSSIAN, 1); 
```

最后，您将结果放回垫子中：

```
image = dst; 
```

之后不要忘记销毁您创建的 IplImages。

# java - 来自命令行的 Java 堆空间错误

> ID：15112796
> 
> 赞同：1
> 
> 时间：2013-02-27T13:02:18.543
> 
> 标签：java, apache-poi, out-of-memory, heap-memory

我试图创建一个读取 excel 并发送电子邮件的小实用程序。我正在为此使用 ApachePOI 库。当我从 eclipse 执行代码时，最初我得到了`java.lang.OutOfMemoryError: GC overhead limit exceeded`错误。然后我添加`-Xms1024m`了eclipse的VM Arguments，程序在eclipse中运行良好。

然后我将这组 java 程序和库导出到 RunnableJar 并捆绑了依赖库。

现在在我执行命令时从命令行

```
java -Xms1024m -jar AutomateProcesses.jar 
```

我仍然遇到同样的错误。我无法弄清楚这个问题。有人可以在这方面提供帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:05:05.697

要设置最大堆大小并允许 Java VM 分配更多内存，您必须使用命令`-Xmx1024M`（或`-Xmx1G`）。

-Xms 分别设置初始堆大小的最小值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:05:27.597

你可以试试

```
java -Xms512m -Xmx2048 -jar AutomateProcesses.jar 
```

如果这只是我所期望的这个虚拟机中发生的事情。如果 java 进程中的库随后生成一个单独的进程，则该库可能需要一些其他选项来配置它。

* * *

编辑：

对[这个问题](https://stackoverflow.com/questions/10901808/what-is-the-difference-in-java-lang-outofmemory-gc-overhead-limit-exceeded-vs)的回答指出，这个错误是因为 GC 花费了太多时间来尝试恢复内存而没有得到它。我对 Appache POI 不是很熟悉，但如果它是从 java 与 Excel 对话，那么它可能是使用 COM 调用到 Excel DLL 中。可能是库或您使用它的方式存在错误，导致对象被锁定在垃圾收集之外，因此 GC 工作非常努力，进展甚微。

你能试着把有这个问题的代码隔离到一个更小的测试用例中吗？

这篇[文章](http://comments.gmane.org/gmane.comp.jakarta.poi.user/17976)有一个类似的问题，以至于他们重写了他们在 Excel 中处理单元格的方式，以避免创建大量的 cellStyle 对象。

同样，[这个人](https://stackoverflow.com/questions/7152950/heap-error-while-writing-xls-file-with-apache-poi?rq=1)放弃了并将他们的数据写入 CSV 格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-26T11:14:06.953

java.lang.OutOfMemoryError:[超过 GC 开销限制](http://javaeesupportpatterns.blogspot.com/2011/08/gc-overhead-limit-exceeded-problem-and.html)是 JVM 垃圾收集问题的症状（在 GC 上花费的时间过多）。该错误实际上阻止了整个 JVM 进入挂起状态，因此您可以收集一些额外的统计信息。

读取 Excel 表可能会占用大量内存，具体取决于文件的大小，这会给 GC 进程增加压力点。

Enabling and analyzing verbose:gc will definitely help. You could also generate a [JVM Heap Dump](http://javaeesupportpatterns.blogspot.com/2012/11/java-heap-dump-are-you-up-to-task.html) and determine where that memory is retained in your Java utility program. You will have to either adjust the Java heap size and / or resolve any faulty memory retention.

# perl - Perl 中 >nul 2>&1 的等价物？

> ID：15112797
> 
> 赞同：2
> 
> 时间：2013-02-27T13:02:30.347
> 
> 标签：perl, batch-file, cygwin, io-redirection

我在 Windows XP 上使用 Cygwin Perl。

`>nul 2>&1`Perl 中是否有相当于Batch 的功能？

请参考[这里](https://stackoverflow.com/questions/15112382)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T13:07:39.407

如果你有一个 shell 命令：

```
system("$cmd >nul 2>&1");
die $! if $? < 0;
die "Child killed by signal ".($? & 0x7F)."\n" if $? & 0x7F;
die "Child exited with error ".($? >> 8)."\n" if $? >> 8; 
```

如果你有一个程序和参数：

```
use IPC::Open3 qw( open3 );

open(local *CHILD_STDIN,  '<', 'nul') or die $!;
open(local *CHILD_STDOUT, '>', 'nul') or die $!;
my $pid = open3(
   '<&CHILD_STDIN',
   '>&CHILD_STDOUT',
   undef,  # 2>&1
   $prog, @args,
);
waitpid($pid, 0);
die $! if $? < 0;
die "Child killed by signal ".($? & 0x7F)."\n" if $? & 0x7F;
die "Child exited with error ".($? >> 8)."\n" if $? >> 8; 
```

注意：如果启动孩子时出错，则会死亡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:36:53.053

Cygwin 像 Unix 一样工作，其中 null 设备被命名`/dev/null`而不是`nul`. 运行外部命令并压制所有输出是

```
system("mycommand arg1 arg2 >/dev/null 2>&1") == 0
    or warn "$0: mycommand exited $?"; 
```

要绕过 shell 解析，您是否还必须自己执行重定向。

```
use POSIX '_exit';  # if not available, fall back to plain exit with caveats

my $pid = fork;
die "$0: fork: $!" unless defined $pid;

if ($pid) {
    if (waitpid $pid, 0 >= 0) {
        my $status = $? >> 8;
        if ($status == 13) {
            warn "$0: error starting mycommand";
        }
        else {
            warn "$0: mycommand exited $status";
        }
    }
    else {
        warn "$0: waitpid: $!";
    }
}
else {
    open STDOUT, ">",  "/dev/null"   or warn("$0: open: $!"), _exit 13;
    open STDERR, ">&", \*STDOUT      or                       _exit 13;
    exec "mycommand", "arg1", "arg2" or                       _exit 13;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T13:43:52.797

正如我在回答您[上一个问题](https://stackoverflow.com/questions/15112382)时所写的，您想要的是

```
system('cmd /C', $exe, @parm, '1>nul', '2>nul'); 
```

# javascript - 使用浏览器宽度而不是屏幕宽度重定向到移动设备

> ID：15112801
> 
> 赞同：1
> 
> 时间：2013-02-27T13:02:44.777
> 
> 标签：javascript, mobile

我希望通过检测浏览器宽度来将我的网站重定向到移动版本`screen.width`，这可能吗？这是我要更改的代码...

```
<script type="text/javascript">

<!--
if (screen.width <= 767) {
    window.location = "http://m.mysite.com";
}
//-->
</script> 
```

`screen.width`似乎没有给出可靠的响应，因为手机上的分辨率如此之高（我认为这是问题所在）。因此，当我将数字设置得更高时，它开始在 Ipad 或小型桌面浏览器上加载移动网站。

由于我不想每次发布新手机时都检查每个站点，因此我宁愿不走用户代理路线。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:49:45.393

我对这个问题不是很熟悉，但是为了帮助你，我在谷歌上搜索了一下，我发现了一些可能对你有用的文章，它们包括 PHP、Javascript 和一些关于如何和为什么的文档。

也许你会发现它很有用。

1：

[http://twoninewebdesign.com/2012/01/Admin/mobile-device-redirect-for-your-website/](http://twoninewebdesign.com/2012/01/Admin/mobile-device-redirect-for-your-website/)

2：

[http://mobithinking.com/guide-device-detection](http://mobithinking.com/guide-device-detection)

3：

[http://www.webhostinghub.com/support/website/how-to/mobile-redirect](http://www.webhostinghub.com/support/website/how-to/mobile-redirect)

此致，哈门·布林克曼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:35:03.670

我决定结合用户代理、屏幕宽度和窗口宽度。这应该使其尽可能准确。

我使用了这里的 PHP 代码... [http://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/) 并稍微编辑了我的 javascript..

```
<script type="text/javascript">

windowWidth = window.innerWidth;
<!--

if (screen.width <= 767 || windowWidth <= 767) {
    window.location = "http://m.mysite.com";
}
//-->
</script>
<?php //CODE FROM LINK ABOVE ?> 
```

# java - 在运行时创建具有泛型类型的类

> ID：15112807
> 
> 赞同：2
> 
> 时间：2013-02-27T13:03:14.047
> 
> 标签：java, generics

我定义了以下接口：

```
public interface AllImplementMe<X, Y> {
    public Y doSomething(X param);
} 
```

现在我想定义一个工厂方法，它需要在运行时为上述构造子类。

```
public static <X,Y> AllImplementMe<X, Y> createInstance(String xClassName, String yClassName) { ... } 
```

我如何实际编码上述方法？我一直在研究反射 API，但无法弄清楚？假设所有子类都有一个默认构造函数。

**编辑1**

我只想对上述代码的意图进行一些说明。以上只是通用系统的一部分，它将允许在运行时添加新的实现子类并根据外部定义的配置执行。所以实际上工厂方法将基于此配置被调用并构造适当的子对象，然后将被要求执行它们的方法。这在概念上类似于 Adnroid 的 AsyncTask [http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)，但问题是我需要以通用方式构造实现子类对象。在大多数情况下，调用这些子代的核心代码并不关心它们的参数类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:13:35.100

请改用以下工厂方法：

```
public static <X, Y> AllImplementMe<X, Y> createInstance(Class<X> xClass, Class<Y> yClass) 
```

然后，您可以使用诸如`xClass.newInstance()`创建`X`. （我没有写确切的代码，因为我不知道你想用`X`and做什么`Y`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:19:57.773

一切都简单得多。你甚至不需要这些参数`String xClassName, String yClassName`。

考虑你的接口的一些实现：

```
public class SomeImplementation<A,B> implements AllImplementMe<A,B> {
   @Override
   public B doSomething(A param) {
       //      ... blablabla ...
   }
} 
```

那么你的静态工厂方法将是：

```
public static <A, B> AllImplementMe<A, B> createInstance() {
    return new SomeImplementation<A,B>();
} 
```

# jquery - 如何在 .net mvc4 中使用 jquery 排列文本框？

> ID：15112808
> 
> 赞同：1
> 
> 时间：2013-02-27T13:03:14.903
> 
> 标签：jquery, html, .net, jquery-plugins, asp.net-mvc-4

我的任务是安排页面中的文本框。这是我的html代码。此代码是自动生成的。我想通过创建来默认安排文本框的位置。

```
@model Resume.Models.Resume

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Resume</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.FirstName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.FirstName)
            @Html.ValidationMessageFor(model => model.FirstName)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.LastName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.LastName)
            @Html.ValidationMessageFor(model => model.LastName)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Gender)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Gender)
            @Html.ValidationMessageFor(model => model.Gender)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Address)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Address)
            @Html.ValidationMessageFor(model => model.Address)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Phone)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Phone)
            @Html.ValidationMessageFor(model => model.Phone)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Email)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Email)
            @Html.ValidationMessageFor(model => model.Email)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.DateOfBirth)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.DateOfBirth)
            @Html.ValidationMessageFor(model => model.DateOfBirth)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Age)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Age)
            @Html.ValidationMessageFor(model => model.Age)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.City)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.City)
            @Html.ValidationMessageFor(model => model.City)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Country)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Country)
            @Html.ValidationMessageFor(model => model.Country)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.HighSchool)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.HighSchool)
            @Html.ValidationMessageFor(model => model.HighSchool)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.CollegePer)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.CollegePer)
            @Html.ValidationMessageFor(model => model.CollegePer)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Qualification)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Qualification)
            @Html.ValidationMessageFor(model => model.Qualification)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.DegreeYearOfPassout)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.DegreeYearOfPassout)
            @Html.ValidationMessageFor(model => model.DegreeYearOfPassout)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.PreviousCompanyName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.PreviousCompanyName)
            @Html.ValidationMessageFor(model => model.PreviousCompanyName)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

我怎样才能做到这一点？是否有任何 jquery 插件或任何 jquery 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:33:26.817

如果你正在使用它`@Html.EditorFor(model => model.Age)`，那么页面上元素的 id 将是 #age ..

```
<style>
#age {
ur css here 
}
</style>
use this style to arrange for each once .. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:13:11.813

如果您将 ID 添加到您的元素，您可以在 CSS 中完成。通过指定 ID

就像是 ：

```
#ID_ELEMENT
{
 attribute : ...;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T13:31:50.787

如果您想避免编写 javascript，则这些元素中的每一个都有类，因此您可以很容易地在 css 中定位它们。如果您需要为特定的标记做任何事情，但是您需要将 ID 添加到生成的标记中，或者使用一些更高级的 css 选择器技术，但是随着代码的生成使其更加健壮，我建议您使用 ID，因为您不能授予元素的顺序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T13:07:52.877

使用 jquery，您可以通过 id 获取元素（您必须设置它们的 id），并操作它们的 css 属性。

我说的是 id，以防您需要将它们定位在不同的位置。如果您需要移动同一类的所有对象，您可以按类获取它们（将 # 选择器更改为 .）。

jquery代码如下：

```
$('#ID').css({ 'ATRIBUTE NAME': 'VALUE' }); 
```

所以，让我们看一个例子......

如果您想更改 id=myElement 的元素的显示，您可以...

```
$('#myElement').css({ 'display': 'none' }); 
```

[您可以在此处](http://api.jquery.com/id-selector/)或[此处](http://api.jquery.com/class-selector/)找到适当的文档

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T14:00:34.223

定义 CSS 类

```
div.editor-field input[type=text]
{
 margin: 0 0 0 0; //just a sample position
 padding: 0 0 0 0;
 ....
} 
```

然后每次你掉

```
 <div class="editor-field">
            @Html.EditorFor(model => model.CollegePer)

        </div> 
```

它会自动排列

# c# - 如何以编程方式在 Windows 8 中获取当前正在运行的应用程序？

> ID：15112812
> 
> 赞同：0
> 
> 时间：2013-02-27T13:03:23.783
> 
> 标签：c#, windows-8

我想使用 vsExpress 2012 (Windows store C#) 创建一个应用程序以列出当前在 Windows 8 中运行的应用程序

我试图开始使用`System.Diagnostics.Process`，但在 Windows 8 中它不支持“进程”类，

如果有人知道，分享一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:06:31.830

进程适用于 Windows 8，但不适用于 Windows RT。您是否正在开发商店应用程序 (Windows RT)？如果是这样，就无法获得您想要的信息（安全！）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:02:09.983

有没有办法通过使用 System.Threading.task （或）任何其他方式来获取 Windows 8 中当前正在运行的应用程序列表（Windows 商店应用程序）

# python - 在 matplotlib 中将多个面板上的绘图标签排列在一行中

> ID：15112814
> 
> 赞同：4
> 
> 时间：2013-02-27T13:03:40.770
> 
> 标签：python, matplotlib, label, axis-labels

我目前正在用几个子图绘制（使用 Python-x,y 2.7.2.1），并且我希望将所有 y 标签放在一行中。目前它们不是，因为刻度标签有不同的大小。作为演示，我添加了这个脚本：

```
 import pylab as P
    import numpy as N

    x = N.linspace(0,2*N.pi,10000)
    y1 = N.sin(x)
    y2 = N.cos(x)*10000

    P.figure()
    ax1 = P.subplot(211)
    P.plot(x,y1,"k-")
    y1 = P.ylabel("$\\sin{(x)}$")
    P.xlim((0,2*N.pi))
    ax2 = P.subplot(212)
    P.plot(x,y2,"k--")
    y2 = P.ylabel("$\\cos{(x)}\\cdot{}10^4$")
    P.xlim((0,2*N.pi))
    P.show() 
```

结果看起来像这样，请注意相对于彼此移动的标签：

![两个相对于彼此具有移位标签的图](../Images/3dc1f53867cc49dfc1df1f3921b322f3.png)

我试图通过使用设置标签位置

```
 (x,y) = y2.get_position()
    ax1.yaxis.set_label_coords(x,y) 
```

但显然他们使用不同的坐标，因为 set_label_coords 需要相对坐标，而 get_position() 似乎会产生像素或其他东西。绝望尝试使用

```
 y1.set_x(x); y1.set_y(y) 
```

没有任何效果。所以我对自己说：请教专家——我来了。谁能告诉我如何移动标签，使它们彼此对齐并且看起来像预期的那样棒？

我期待着你的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:10:19.393

You can pad the position of the labels with

```
P.ylabel("$\\sin{(x)}$", labelpad=20) 
```

and

```
P.ylabel("$\\cos{(x)}\cdot{}10^4$", labelpad=20) 
```

with some adjustment, this should achieve what you desire. You can even set it after the plot with

```
ax.yaxis.labelpad = 20 
```

The `y` label isn't correctly aligned as the length of the numbers on the `y` axis changes, and shifts the label position. You can fix the size of the number on the `y` axis with

```
from matplotlib.ticker import FuncFormatter

def thousands(x, pos):
    'The two args are the value and tick position'
    return '%4.1f' % (x*1e-3)

formatter = FuncFormatter(thousands)

ax = fig.add_subplot(211)
ax.yaxis.set_major_formatter(formatter) 
```

This will guarantee that the length of the numbers on the `y` axis is always 4 characters, and so you can fix the offset of the `y` label for all values. Change the returned string in the `thousands()` function of this doesn't please you!

## Edit

Yet another way to achieve this could be to hard code the position of your labels using [set_label_coords](http://matplotlib.org/api/axis_api.html#matplotlib.axis.Axis.set_label_coords)

```
ax.yaxis.set_label_coords(0.5, 0.5) 
```

I just spotted that method, and it might be of some use to you .. ! (0,0) is (left, bottom), (0.5, 0.5) is (middle, middle) etc.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:50:12.597

正如 danodonovan 所说， set_label_coords 是一种可能的方法。我可能会补充一点，这个设置对我来说效果很好。

```
ax7.yaxis.set_label_coords(-0.2, 0.5) 
```

“诀窍”是使用负数将标签移到绘图之外。

# java - 如何在可观察的通知中避免 if/else？

> ID：15112816
> 
> 赞同：2
> 
> 时间：2013-02-27T13:03:48.600
> 
> 标签：java, oop, design-patterns

我有一个已注册的侦听器列表的可观察（来自观察者/可观察模式）。
当事件发生时，通知代码会：

```
if(event == TYPE_A){  
  for(Listener l:listeners){  
       l.fireEventA();  
  }  
else if(event == TYPE_B){  
  for(Listener l:listeners){  
       l.fireEventB();  
  }  
if(event == TYPE_C){  
  for(Listener l:listeners){  
       l.fireEventC();  
  } 
```

我想知道这是我能做的最好的还是我应该避免`if-else`在通知中？我该如何改进呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T13:07:14.607

您可以准备一个 Map，其中键作为事件类型，值作为侦听器列表，例如 thisL

```
Map<EventType,List<Listener>> eventListenerMap; 
```

然后使用事件类型键查找侦听器列表并触发相应的侦听器

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T13:15:30.537

如何重构您的解决方案，以便您将是否触发的责任推给侦听器：

类监听器 { 私有 EventType eventType;

```
 public Listener(EventType eventType) {
       this.eventType = eventType;
   }

   public void fireEvent(EventType eventType) {
       if(this.eventType == eventType) {
          ...do stuff
       }
   } 
```

然后客户端代码如下所示：

```
..setup...
listeners.add(new Listener(TYPE_A);
listeners.add(new Listener(TYPE_B);
..and so on 
```

然后当你需要触发一个事件时：

```
for(Listener l:listeners){  
   l.fireEvent(event);  
} 
```

这是您的选择吗？

# html - 包含文本的 CSS 三角形

> ID：15112819
> 
> 赞同：11
> 
> 时间：2013-02-27T13:03:56.773
> 
> 标签：html, css, text, geometry

我手头有一个奇怪的问题，我正在努力寻找解决方案。

我`<div>`只使用 CSS 创建了一个三角形“容器”，但我现在想要在容器中插入一些文本。
我的目标解决方案必须在三角形边界内包含文本，无论我在创建缩略图时插入了多少文本。
可以在[此处](http://jsfiddle.net/itsrron/HJBxG/)找到一个示例[注意; 这个例子是非常基本的，只展示了我选择创建三角形的方式]

再推一点，我想创建一个朝上的三角形和一个朝下的三角形，并且文本必须位于每个三角形的底部，因此对于第一个三角形，文本将位于底部，第二个三角形位于顶部, 计划 B 只是将三角形内的文本垂直和水平居中。

**CSS：**

```
.up {
    text-align:right;
    width: 0px;
    height: 0px;
    border-style: inset;
    border-width: 0 100px 173.2px 100px;
    border-color: transparent transparent #007bff transparent;
    float: left;
    transform:rotate(360deg);
    -ms-transform:rotate(360deg);
    -moz-transform:rotate(360deg);
    -webkit-transform:rotate(360deg);
    -o-transform:rotate(360deg);
} 
```

**HTML：**

```
<div class="up">
    <p>some information text goes here<p>
</div> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-27T13:47:29.880

对于您的计划 B（*将文本在三角形内垂直和水平居中*），我更喜欢作为解决方案，您可以添加以下 css 规则：

```
.up p {
    text-align: center;
    top: 80px;
    left: -47px;
    position: relative;
    width: 93px;
    height: 93px;
    margin: 0px;
} 
```

在这里试试：

```
.up {
  width: 0px;
  height: 0px;
  border-style: inset;
  border-width: 0 100px 173.2px 100px;
  border-color: transparent transparent #007bff transparent;
  float: left;
  transform: rotate(360deg);
  -ms-transform: rotate(360deg);
  -moz-transform: rotate(360deg);
  -webkit-transform: rotate(360deg);
  -o-transform: rotate(360deg);
}

.up p {
  text-align: center;
  top: 80px;
  left: -47px;
  position: relative;
  width: 93px;
  height: 93px;
  margin: 0px;
}
```

```
<div class="up">
  <p>some information text goes here
    <p>
</div>
```

[在 JSFiddle 上查看](http://jsfiddle.net/markus85/TRuQc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-29T08:51:25.173

无论有多少文本，如何在三角形内放置文本？据我所知，仅靠 CSS 是不可能的。无法放入的文本会溢出，您需要使用 Javascript 相应地调整字体大小以适合所有字体。

但是假设您希望将合理数量的文本放入直角三角形内（底部在左侧，指向右侧），这是一种方法：

*   创建一个具有固定宽度和高度的容器来保存文本和形状。
*   在容器内，创建两个向右浮动的 div。每个都有宽度 100% 和高度 50%，形状轮廓和剪辑路径作为多边形。
*   给这些 div 的背景颜色类似于渲染页面的背景。

这个想法是这两个 div 之外的部分将采用我们正在寻找的三角形的形状。

在 CSS 中，元素是矩形，不管你是否意识到。这不是画一个三角形。这是关于创建建议三角形的相邻元素。希望这是有道理的。

```
.main {
  width: 400px;
  height: 200px;
  position: relative;
  background: peachpuff;
}
.top, .bottom {
  width: 100%;
  height: 50%;
  background: white;
}
.top {
  -webkit-shape-outside: polygon(0% 0, 100% 0%, 100% 100%);
  shape-outside: polygon(0% 0, 100% 0%, 100% 100%);
  float: right;
  -webkit-clip-path: polygon(0% 0, 100% 0%, 100% 100%);
  clip-path: polygon(0% 0, 100% 0%, 100% 100%);
}
.bottom {
  height: 50%;
  float: right;
  bottom: 0;
  clip-path: polygon(0% 100%, 100% 100%, 100% 0%);
  shape-outside: polygon(0% 100%, 100% 100%, 100% 0%);
}
```

```
<div class="main">
  <div class="top"></div>
  <div class="bottom"></div>
  <p>
    When should one use CSS versus SVG? Use CSS for simple shapes. HTML elements are rectangles, so all you are doing is creating an illusion of shapes. Sometimes this can become a deep rabbit hole. Instead, use SVG for complex shapes.
   </p>
</div>
```

# html - 播放视频时停止播放的背景音乐

> ID：15112823
> 
> 赞同：0
> 
> 时间：2013-02-27T13:04:06.853
> 
> 标签：html, html5-audio

ツ嗨，我想知道如何将背景音乐添加到网页中，当我播放嵌入的视频^(（尤其是 Youtube）时，它会)~~逐渐消失~~，然后在视频结束时重新开始。

我用来嵌入音频的代码是：

> `<embed src="example.mid" autostart="true" loop="true">`

我也知道 HTML5 有一个音频标签，但是可以以某种方式产生我需要的效果（播放视频时音乐停止）？

^(别担心，我想在基于 html 的演示文稿而不是实际网页上使用它。编辑：我已经编辑了这个问题，以便更清楚一点。)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:19:02.780

使用`<audio>`标签，您可以通过 Javascript 以编程方式控制音量。

具体来说，如何淡出音量的问题在这里有一个基于 jQuery 的示例：

[HTML5 <audio> 播放淡入淡出](https://stackoverflow.com/q/7451508/315168)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:18:42.393

我不太擅长 HTML5，但你可以在 javascript 中使用 eventlistners。onload 事件加载将播放音乐的函数和视频上的 onclick 事件以在播放视频时删除音频。

# java - A* 搜索算法在不存在路径时确定循环变量

> ID：15112826
> 
> 赞同：0
> 
> 时间：2013-02-27T13:04:15.380
> 
> 标签：java, algorithm, search

我正在尝试在 Java 中实现**A* 搜索算法**，我有一个问题：

我需要运行多少次 A* 循环，直到显然没有现有路径？

例如：如果我有一个 for 循环；“我”应该增加多久？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:08:01.857

当您探索了 A* 可以到达的所有节点时，没有找到您的目标，那么您可以假设没有路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:08:48.653

我认为您以错误的方式思考A *。您运行它，直到没有更多要搜索的节点。如果你还没有达到你的目标，那么就没有路径。

伪：

```
//Our list of still open nodes
List<Node> nodesToSearch = new List<Node>(); 
while (nodesToSearch.Count > 0)
{
   //SearchNode, if its our target we are done

   //Add reachable neighbours to the list of nodes to search. So next iteration we will continue on searching those
   //Remove current node.. since its searched
}
//If we end up here without a target there is no path. 
//That means we have searched all nodes and their neighbours etc etc etc. Without reaching the target. 
```

# javascript - 奇怪的javascript函数参数值

> ID：15112827
> 
> 赞同：1
> 
> 时间：2013-02-27T13:04:17.943
> 
> 标签：javascript

我有以下 JavaScript 函数：

```
function changeSelectedCustomerNumber(CustNumber){
    var field = document.getElementById('SelectedNumber');
    field.value = '00'+CustNumber;
} 
```

通过按以下选项调用：

```
<select style="width:100px;" name="bySubj">
    <option onclick="changeSelectedCustomerNumber(00510443);">blatest</option>
</select> 
```

我有几个这样的复选框。他们应该做的是将传递的数字放在单独的输入字段中。

我的问题是，在调试 JS 函数时，单击选项后， `custnumber`包含`166263`.

我假设强制转换为 num 会删除前导零，但是如何像这样转换参数。

JavaScript 有什么理由做这样的事情吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T13:06:06.987

由于前导零，您的数字被解析为八进制。

如果前导零很重要，您应该将变量作为字符串传递（即用单引号括起来）

# php - PHP向Mysql插入数据

> ID：15112829
> 
> 赞同：0
> 
> 时间：2013-02-27T13:04:19.367
> 
> 标签：php, mysql, html

我正在试验 PHP 和 Mysql。我使用 xampp 在 mu localhost 创建了一个数据库和表。我还创建了一个文件，假设通过执行查询来填充我的表，但奇怪的是我没有收到错误，但同时没有数据插入到我的数据库中：

代码：

注册.php：

```
<?php

session_start();

if(isset($_POST['submitted'])){

    include('connectDB.php');

    $UserN = $_POST['username'];
    $Upass = $_POST['password'];
    $Ufn = $_POST['first_name'];
    $Uln = $_POST['last_name'];
    $Uemail = $_POST['email'];

    $NewAccountQuery = "INSERT INTO users (user_id,username, password, first_name, last_name, emial) VALUES ('$UserN','$Upass', '$Ufn', '$Uln', '$Uemail')";

    if(!mysql_query($NewAccountQuery)){

        die(mysql_error());

    }//end of nested if statment

    $newrecord = "1 record added to the database";

}//end of if statment

?>

<html>
<head>

<title>Home Page</title>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>

    <div id="wrapper">
        <header><h1>E-Shop</h1></header>

        <article>
        <h1>Welcome</h1>

            <h1>Create Account</h1>

        <div id="login">

                <ul id="login">

                <form method="post" action="register.php"  >
                    <fieldset>  
                        <legend>Fill in the form</legend>

                        <label>Select Username : <input type="text" name="username" /></label>
                        <label>Password : <input type="password" name="password" /></label>
                        <label>Enter First Name : <input type="text" name="first_name" /></label>
                        <label>Enter Last Name : <input type="text" name="last_name" /></label>
                        <label>Enter E-mail Address: <input type="text" name="email" /></label>
                    </fieldset>
                        <br />

                        <input type="submit" submit="submit" value="Create Account" class="button">

                </form>

                </div>
            <form action="index.php" method="post">
            <div id="login">
                <ul id="login">
                    <li>
                        <input type="submit" value="Cancel" onclick="index.php" class="button"> 
                    </li>
                </ul>
            </div>      

        </article>
<aside>
</aside>

<div id="footer">This is my site i Made coppyrights 2013 Tomazi</div>
</div>

</body>
</html> 
```

我还有一个包含文件，它是 connectDB：

```
 <?php

    session_start();

        $con = mysql_connect("127.0.0.1", "root", "");
        if(!$con)
            die('Could not connect: ' . mysql_error());

        mysql_select_db("eshop", $con) or die("Cannot select DB");

?> 
```

数据库结构：

数据库名称：eshop；DB中只有一个表：用户；

用户表包括：

```
user_id: A_I , PK
username
password
first_name
last_name
email 
```

我花了很多时间来解决这个问题并进行了研究并查看了一些教程，但没有运气

谁能发现我的问题的根源是什么......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:06:37.817

这是因为`if(isset($_POST['submitted'])){`

您没有带有名称的输入字段，`submitted`将提交按钮名称指定给`submitted`

`<input name="submitted" type="submit" submit="submit" value="Create Account" class="button">`

检查您的插入查询，您的字段多于您的值

改变 ：

`$NewAccountQuery = "INSERT INTO users (user_id,username, password, first_name, last_name, email) VALUES ('$UserN','$Upass', '$Ufn', '$Uln', '$Uemail')";`

到 ：

`$NewAccountQuery = "INSERT INTO users (user_id,username, password, first_name, last_name, email) VALUES ('','$UserN','$Upass', '$Ufn', '$Uln', '$Uemail')";`

考虑`user_id`是自动增量字段。

您`email`的 in 查询被错误地写为`emial`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:09:57.137

错误报告是否打开？将其放在屏幕顶部：

```
error_reporting(E_ALL);
ini_set('display_errors', '1'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T13:55:53.997

上面有一些很好的答案，但我也建议您使用更新的 MySQLi / PDO 而不是过时的 2002 MySQL API。

一些示例：（我将使用 mysqli，因为您使用程序代码编写了原始示例）

连接数据库.php

```
<?php
$db = mysqli_connect('host', 'user', 'password', 'database');

if (mysqli_connect_errno())
     die(mysqli_connect_error());
?> 
```

register.php——我只写一个示例 php 部分，让你做剩下的

```
<?php
//i'll always check if session was already started, if it was then 
//there is no need to start it again
if (!isset($_SESSION)) {
  session_start();
}

//no need to include again if it was already included before
include_once('connectDB.php'); 

//get all posted values
$username = $_POST['username'];
$userpass = $_POST['password'];
$usermail = $_POST['usermail'];
//and some more

//run checks here for if fields are empty etc?
//example check if username was empty
if($username == NULL) {
  echo 'No username entered, try <a href="register.php">again</a>';
  mysqli_close($db);
  exit();
} else {
  //if username field is filled we will insert values into $db
  //build query
  $sql_query_string = "INSERT INTO _tablename_(username,userpassword,useremail) VALUES('$username','$userpass','$usermail')";
  if(mysqli_query($db,$sql_query_string)) {
    echo 'Record was entered into DB successfully';
    mysqli_close($db);
  } else {
    echo 'Ooops - something went wrong.';
    mysqli_close($db);
  }
}
?> 
```

这应该可以很好地工作，您需要添加的是正确的发布值并构建表单以发布它，仅此而已。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-13T15:08:46.407

```
<?php
$db = mysqli_connect('host', 'user', 'password', 'database');

if (mysqli_connect_errno())
     die(mysqli_connect_error());
?>
register.php -- i'll just write out an example php part and let you do the rest

<?php
//i'll always check if session was already started, if it was then 
//there is no need to start it again
if (!isset($_SESSION)) {
  session_start();
}

//no need to include again if it was already included before
include_once('connectDB.php'); 

//get all posted values
$username = $_POST['username'];
$userpass = $_POST['password'];
$usermail = $_POST['usermail'];
//and some more

//run checks here for if fields are empty etc?
//example check if username was empty
if($username == NULL) {
  echo 'No username entered, try <a href="register.php">again</a>';
  mysqli_close($db);
  exit();
} else {
  //if username field is filled we will insert values into $db
  //build query
  $sql_query_string = "INSERT INTO _tablename_(username,userpassword,useremail) VALUES('$username','$userpass','$usermail')";
  if(mysqli_query($db,$sql_query_string)) {
    echo 'Record was entered into DB successfully';
    mysqli_close($db);`enter code here`
  } else {
    echo 'Ooops - something went wrong.';
    mysqli_close($db);
  }
}
?> 
```

# java - Java程序占用太多内存

> ID：15112831
> 
> 赞同：0
> 
> 时间：2013-02-27T13:04:25.510
> 
> 标签：java, performance, algorithm, heap-memory

这是我制作程序的问题

> 阿里巴巴对四十个小偷做了一个恶作剧，把他们困在一个大山洞里，那里是野狼的家。盗贼没有任何武器，只有盗贼的首领有刀。没有武器他们将无法与狼作战，因此他们决定自杀而不是被活活吃掉。
> 
> 他们都决定站成一圈，每三个人就自杀，但盗贼首领不喜欢这个想法，也没有自杀的打算。他计算他应该站在哪里，以便他是最后一个离开的人。
> 
> HackerMan 想根据这个故事构建一个游戏，但他没有杀死他，而是决定让参与者离开游戏，而不是每个第 3 个位置，而是每个第 2 个位置。当然，这场比赛的参与者人数将远远超过 40 人。
> 
> 输入
> 
> 输入的第一行是一个整数 N (1 <= N <= 1000)，它指定了测试用例的数量。之后，每一行都包含一个整数 X (5 <= X <= 100000000)，它是游戏参与者的数量。
> 
> 输出
> 
> 对于每个测试用例，生成一条包含幸存参与者位置的行。假设参与者的序号从 1 到 n，并且从第 1 个人开始计数，即第一个离开的人是第 2 个人。
> 
> 样本输入
> 
> 3 5 11 45
> 
> 样本输出
> 
> 3 7 27

这是我的解决方案

```
class SurvivalStrategy {

    public int next;
    public int value;
    public boolean alive;

    SurvivalStrategy(int n, int v)
    {
        this.next = n;
        this.value = v;
        this.alive = true;
    }

    public int getNext(){
        return this.next;
    }
    public void kill(){
        this.alive = false;
    }

    public void changeNext(int n){
        this.next = n;
    }

    public static void main(String[] args) throws IOException {

        System.out.println("Enter the number of cases");
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        String line = br.readLine();
        int N = Integer.parseInt(line);
        int[] array = new int[N];
        for(int a = 0; a < N; a++)
        {
            System.out.println("Enter No. of theives in case " + (a + 1));
            array[a] = Integer.parseInt(br.readLine());
        }
        for(int b = 0; b < N; b++)
        {
            try{

                int theives = 0;
                theives = array[b];
                SurvivalStrategy[] people = new SurvivalStrategy[theives];
                int i = 0;
                int nextctr = 2;
                for(i = 0; i < people.length; i++)
                {
                    people[i] = new SurvivalStrategy(nextctr, i + 1);

                    if(nextctr > people.length)
                    {
                        people[i] = new SurvivalStrategy(1, i + 1);
                    }
                    nextctr++;
                }

                int k = 0;
                int nextguy = 0;
                int survivers = people.length;
                boolean CarryOnJatta = true;
                int lastSurviver = 0;
                while(CarryOnJatta)
                {
                    if(k >= people.length)
                    {
                        k = 0;
                        k = k + 2;
                    }
                    if(people[k].alive)
                    {
                        //System.out.println(people[k].value + " is Alive");
                        nextguy = people[k].getNext();
                        if(people[nextguy - 1].alive)
                        {
                            people[nextguy - 1].kill();

                            people[k].changeNext(people[nextguy - 1].next);
                            lastSurviver = people[k].value;
                            survivers--;
                        }else{
                            k = k + 2;
                        }
                        k = k + 2;
                    }else{
                        k = k + 2;
                    }

                    if (survivers == 1)
                    {
                        CarryOnJatta = false;
                        System.out.println("" + lastSurviver);

                    }
                }

            } catch(Exception e)
            {
                e.printStackTrace();
            }
        }
    }
} 
```

我的程序为小值提供输出，但不为大值提供输出。如果我用输入（23987443）尝试它，我会得到java堆大小超出错误。有什么办法可以改善这个程序的空间和时间复杂度。如果它们正在生成所需的输出，我也对其他算法持开放态度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T13:17:51.587

您在堆上分配了至少 23987443 * sizeof(SurvivalStrategy) 内存 - 每个案例大约 300MB，并且仅在这行代码之前：

```
SurvivalStrategy[] people = new SurvivalStrategy[theives]; 
```

我猜这个挑战旨在教你高效内存处理的优点 - 所以不是一次分配整个内存，你需要一个接一个地处理你的项目，这样你一次只分配几个项目，让GC 收集不再需要的那些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:09:22.190

You could try to assign more memory to the JVM, there's a recent post about this: [Java Heap Space error from command line](https://stackoverflow.com/questions/15112796/java-heap-space-error-from-command-line)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T17:20:37.083

您可以使用循环 LinkedList。将您的节点添加到列表中，并使用计数算法遍历列表。每次有人输了，只需对该人调用 remove ，这将标记它有资格进行垃圾收集（假设列表包含您节点的唯一引用）。

更好的是，无需在列表的第一个循环中一次性添加所有人。如果某人是 V 次迭代的倍数，则您可以简单地不添加某人。这应该会大大减少您的内存使用量。

这将节省您的堆空间，因为您保持最大大小为 N，但将有更多的分配/释放开销。尽管如此，linkedList.remove 提供了 O(1) 复杂度。我认为它会清理您的代码并使其更易于理解

# internet-explorer - Windows 8 IE 上的网站不兼容 - 网站无法正常工作

> ID：15112834
> 
> 赞同：1
> 
> 时间：2013-02-27T13:04:39.210
> 
> 标签：internet-explorer, windows-8, crash, incompatibility

我遇到了一个无法自行解决的问题。

我在虚拟机上运行了这个网站（ASP.NET）。该网站还可以......直到我弄清楚一件事......

这些应用程序在 Windows 8 的 IE 上不起作用，我不知道为什么。

这是错误的描述：

“此应用程序不支持无 cookie 表单身份验证”

系统确实使用 cookie 来保存用户数据。web.config 文件是这样设置的：

```
<sessionState cookieless="UseCookies" mode="StateServer"
              sqlConnectionString="SessionState" timeout="45" /> 
```

角色管理器（系统也会在 cookie 上保留角色）：

```
<roleManager enabled="true" defaultProvider="SCAProvider" 
             cookieRequireSSL="false" cacheRolesInCookie="true" 
             cookieTimeout="45" cookieProtection="All"> 
```

验证：

```
<authentication mode="Forms">
    <forms name="AutenticacaoNFo" protection="All" requireSSL="false"
                 slidingExpiration="true" loginUrl="login.aspx" path="/" 
                 timeout="45" />
</authentication> 
```

这是发生问题的代码部分......根据stackTrace：

* * *

```
public void FormsAuthentication_OnAuthenticate(object sender,
FormsAuthenticationEventArgs  args){

  if (FormsAuthentication.CookiesSupported)
  {

    if (Request.Cookies[FormsAuthentication.FormsCookieName] != null)
    {
      try
      {
        FormsAuthenticationTicket ticket = FormsAuthentication.Decrypt(
          Request.Cookies[FormsAuthentication.FormsCookieName].Value);

        args.User = new System.Security.Principal.GenericPrincipal(
          new Samples.AspNet.Security.MyFormsIdentity(ticket),
          new string[0]);
      }
      catch (Exception e)
      {
        // Decrypt method failed.
      }
    }
  }
  else
  {

    throw new HttpException("Cookieless Forms Authentication is not " +
                            "supported for this application.");
  }
} 
```

* * *

这可能是我错过的一件简单的事情......但我真的看不到错误......谢谢你的时间。

PS.：网站仍然可以在任何浏览器上正常运行，Windows 8 IE 除外。

# java - 如何正确扩展 FutureTask

> ID：15112836
> 
> 赞同：0
> 
> 时间：2013-02-27T13:04:44.510
> 
> 标签：java, executorservice, swingworker, futuretask

在编写计算量大的应用程序时，我尝试使用 SwingWorker 类将负载分散到多个 CPU 内核。然而，这个类的行为被证明有些奇怪：似乎只使用了一个核心。

在搜索互联网时，我在这个网络上找到了一个很好的答案（参见[Swingworker instances not running concurrently](https://stackoverflow.com/questions/7548253/swingworker-instances-not-running-concurrently/7548506#7548506)，user268396 的回答）——除了问题的原因——还提到了一个可能的解决方案：

> 为了解决这个问题，你可以做的是使用 ExecutorService 并在其上发布 FutureTasks。这些将提供 99% 的 SwingWorker API（SwingWorker 是 FutureTask 的衍生产品），您所要做的就是正确设置您的 Executor。

作为一名 Java 初学者，我不完全确定如何正确执行此操作。我不仅需要将一些初始数据传递给 FutureTask 对象，还需要像使用 SwingWorker 一样返回结果。因此，任何示例代码都将不胜感激。

nvx

==================== 编辑====================

在实现了[FutureTask 中提到的实现 Callable](https://stackoverflow.com/questions/1468598/futuretask-that-implements-callable)的简单而优雅的解决方案之后，又出现了另一个问题。如果我使用 an`ExecutorService`创建单个线程，如何在线程完成运行后执行特定代码？

我试图覆盖`FutureTask`对象的 done()（参见下面的代码），但我猜想“显示结果”位（或任何与 GUI 相关的东西）应该在应用程序的事件调度线程 (EDT) 中完成。因此：如何将 runnable 提交给 EDT？

```
package multicoretest;

import java.util.concurrent.*;

public class MultiCoreTest {

    static int coresToBeUsed = 4;
    static Future[] futures = new Future[coresToBeUsed];

    public static void main(String[] args) {
        ExecutorService execSvc = Executors.newFixedThreadPool(coresToBeUsed);
        for (int i = 0; i < coresToBeUsed; i++) {
            futures[i] = execSvc.submit(new Worker(i));
        }
        execSvc.shutdown();

        // I do not want to block the thread (so that users can
        // e.g. terminate the computation via GUI)
        //execSvc.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS);

    }

    static class Worker implements Callable<String> {

        private final FutureTask<String> futureTask;
        private final int workerIdx;

        public Worker(int idx) {
            workerIdx = idx;
            futureTask = new FutureTask<String>(this) {
                @Override
                protected void done() {
                    Runnable r = new Runnable() {
                        @Override
                        public void run() {
                            showResults(workerIdx);
                        }
                    };

                    r.run(); // Does not work => how do I submit the runnable
                             // to the application's event dispatch thread?

                }
            };
        }

        @Override
        public String call() throws Exception {
            String s = "";
            for (int i = 0; i < 2e4; i++) {
                s += String.valueOf(i) + " ";
            }
            return s;
        }

        final String get() throws InterruptedException, ExecutionException {
            return futureTask.get();
        }

        void showResults(int idx) {
            try {
                System.out.println("Worker " + idx + ":" +
                        (String)futures[idx].get());
            } catch (Exception e) {
                System.err.println(e.getMessage());
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:10:22.560

> I tried to make use of the SwingWorker class to spread the load to multiple CPU cores. However, behaviour of this class proved to be somewhat strange: only one core seemed to be utilized.

*   no idea without posting an [SSCCE](http://sscce.org/), short, runnable, compilable,

*   [SSCCE could be based on](https://stackoverflow.com/a/6174462/714968)

*   `SwingWorker` is designated creating `Workers Thread` for Swing GUI, [more in this thread](https://stackoverflow.com/questions/14900697/why-does-swingworker-stop-unexpectedly)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T13:35:14.883

几点：

*   您很少需要直接使用 FutureTask，只需实现 Callable 或 Runnable 并将实例提交给 Executor
*   为了在完成后更新 gui，作为`run()`/`call()`方法的最后一步，使用`SwingUtilities.invokeLater()`代码更新 ui。

请注意，您仍然*可以*使用`SwingWorker`, 而不是调用`execute()`，而是将 SwingWorker 提交给您的 Executor。

如果您需要在更新 gui 之前完成所有线程后一起处理所有结果，那么我建议：

*   让每个工作人员将其结果存储到一个线程安全的共享列表中
*   *最后一个*将结果添加到列表中的工作人员应该进行后处理工作
*   然后，进行后处理工作的工作人员应调用`SwingUtilities.invokeLater()`最终结果

# c# - DataGridView 验证 - 删除错误指示器

> ID：15112844
> 
> 赞同：4
> 
> 时间：2013-02-27T13:05:20.733
> 
> 标签：c#, winforms, validation, datagridview

我正在使用以下代码验证 DataGridView ...

```
void centreDataGridView_CellValidating(object sender, 
    DataGridViewCellValidatingEventArgs e)
{
    if (centreDataGridView.Columns[e.ColumnIndex].Name == "code")
    {
        Regex codeRegex = new Regex("^[0-9]{5}[0-9A-Z]$");
        if (!codeRegex.IsMatch(e.FormattedValue.ToString()))
        {
            centreDataGridView.Rows[e.RowIndex].ErrorText = "error text here";
        }
    }
}

void centreDataGridView_CellEndEdit(object sender, 
    DataGridViewCellEventArgs e)
{
    centreDataGridView.Rows[e.RowIndex].ErrorText = string.Empty;
} 
```

这有效，除非我输入新行然后再次离开而不输入任何数据，错误警告图标在新行选择器中仍然可见。我怎样才能清除它？

根据目前收到的建议，我将上面的代码修改如下...

```
void centreDataGridView_CellValidating(object sender, 
    DataGridViewCellValidatingEventArgs e)
{
    if (centreDataGridView.Columns[e.ColumnIndex].Name == "code")
    {
        if (!(centreDataGridView.Rows[e.RowIndex].IsNewRow) || 
            (e.FormattedValue.ToString() != string.Empty))
        {
            Regex codeRegex = new Regex("^[0-9]{5}[0-9A-Z]$");
            if (!codeRegex.IsMatch(e.FormattedValue.ToString()))
            {
                centreDataGridView.Rows[e.RowIndex].ErrorText = "error text here";
            }
        }
    }
} 
```

这确实解决了当没有输入数据时在新行旁边显示错误指示器的问题。但是，当我输入无效数据时，在输入无效数据后第一次移出该行时，在任何行中都不会显示错误指示符。如果我移出包含无效数据的行，然后移回该行，然后再次移出，则会显示错误指示器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T09:46:39.223

好的，我相信我现在明白了。我在 CellValidating 事件处理程序的开头而不是在 CellEndEdit 事件处理程序中将 ErrorText 设置为空字符串，如下所示。这基本上是收到的所有建议的组合，所以谢谢大家，这一切都很有帮助。

```
void centreDataGridView_CellValidating(object sender, 
    DataGridViewCellValidatingEventArgs e)
{
    centreDataGridView.Rows[e.RowIndex].ErrorText = string.Empty;
    if (centreDataGridView.Columns[e.ColumnIndex].Name == "code")
    {
        if (!(centreDataGridView.Rows[e.RowIndex].IsNewRow) || 
            (e.FormattedValue.ToString() != string.Empty))
        {
            Regex codeRegex = new Regex("^[0-9]{5}[0-9A-Z]$");
            if (!codeRegex.IsMatch(e.FormattedValue.ToString()))
            {
                centreDataGridView.Rows[e.RowIndex].ErrorText = "blah blah blah";
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:13:40.353

添加检查验证的行是否为 a[`NewRow`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewrow.isnewrow.aspx)并返回如果是。

```
void centreDataGridView_CellValidating(object sender, DataGridViewCellValidatingEventArgs e)
{
    if (centreDataGridView.Rows[e.RowIndex].IsNewRow)
    {
        return; // do not validate row that has no values
    }
    if (centreDataGridView.Columns[e.ColumnIndex].Name == "code")
    {
        Regex codeRegex = new Regex("^[0-9]{5}[0-9A-Z]$");
        if (!codeRegex.IsMatch(e.FormattedValue.ToString()))
        {
            centreDataGridView.Rows[e.RowIndex].ErrorText = "error text here";
        }
    }
} 
```

# symfony - 如何翻译 SecurityContext:AUTHENTICATION_ERROR？

> ID：15112846
> 
> 赞同：0
> 
> 时间：2013-02-27T13:05:25.460
> 
> 标签：symfony, symfony-2.1, fosuserbundle

我将 FosUserBundle 与 Symfony2.1 一起使用，当我尝试连接未启用的用户时，我的表单上显示以下错误：`User account is disabled`，这很好，但它是一个法语网站，我想将此消息翻译成法语。

我已经在翻译文件夹中翻译了会话消息和验证器：并且`messages.fr.yml`我无法获得由 SecurityContext 创建的那些。`validators.fr.yml``MyUserBundle.fr.yml`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T15:12:44.913

来自 FOSUserBundle 的所有消息都使用“FOSUserBundle”作为消息域。所以你必须把你的翻译成`./app/Resources/translations/FOSUserBundle.fr.yml`.

如果您基于[FOSUserBundle](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_controllers.md)派生了自己的包，则该文件将进入`./src/YourUserBundle/Resources/translations/FOSUserBundle.fr.yml`.

# sql-server - 从作业执行的 sp_send_dbmail 失败，查询结果作为文件附加

> ID：15112849
> 
> 赞同：19
> 
> 时间：2013-02-27T13:05:33.067
> 
> 标签：sql-server, sql-server-2008, attachment, sp-send-dbmail

我遇到了以下问题：当尝试发送带有查询结果作为文件附加的电子邮件时，通过执行普通查询使用**sp_send_dbmail**一切似乎工作正常。

但是如果将相同的代码添加到 JobStep 并运行作业，它会失败。

工作经历中的错误说

> *错误格式化查询，可能是无效参数 [SQLSTATE 42000]（错误 22050）。步骤失败。*

但是当我注释掉引用文件附加的参数时，它又开始正常工作了。

```
exec msdb.dbo.sp_send_dbmail 
    @profile_name = 'profile_name', 
    @recipients  = 'some@mail.com',
    @body = 'body',
    @subject = 'subj',
    --Parameters that refers to attached file
    @attach_query_result_as_file = 1, 
    @query_result_header = 0,
    @query_result_no_padding = 1,
    @query = 'select 1',
    @query_attachment_filename = 'test.csv' 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-28T13:02:47.357

我已经解决了这个问题。不知道为什么它会起作用，但永远不会少。:) 这绝对是关于安全性。

我调查过 SQL 代理代表域用户运行，比如**DOMAIN\User**。它具有服务器上的全套管理员权限（“sysadmin”服务器角色等）。SQL Server 本身在同一用户下运行。

包含调用**sp_send_dbmail**的作业步骤在相同的**DOMAIN\User**下运行。

我还发现，在运行**sp_send_dbmail**的查询部分时，它会尝试执行 **exec xp_logininfo 'DOMAIN\User'**来检查 Active Directory 是否该用户正常。惊喜：有些事情肯定不行。该检查以：

```
Msg 15404, Level 16, State 19, Server SQLC002INS02\SQLC002INS02, Line 1
Could not obtain information about Windows NT group/user 'DOMAIN\User.', error code 0x2. 
```

这很可能意味着该用户的密码已过期或用户被锁定或该人的任何其他不愉快的事情。

我认为更改代理的用户是有风险的。所以我想代表“sa”发送邮件，该“sa”具有相同的“sysadmin”服务器角色，但 SQL 授权并省略了这个 AD 检查步骤。

看起来像一位冒充管理员的用户要求真正的管理员为他运行危险代码:)

所以这项工作的最终代码是第一步也是唯一的一步，如下所示：

```
execute as login = 'sa'
exec msdb.dbo.sp_send_dbmail 
    @profile_name = 'profile_name', 
    @recipients  = 'some@mail.com',
    @body = 'body',
    @subject = 'subj',
    --Parameters that refers to attached file
    @attach_query_result_as_file = 1, 
    @query_result_header = 0,
    @query_result_no_padding = 1,
    @query = 'select 1',
    @query_attachment_filename = 'test.csv'
revert 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-10T17:33:05.890

我有这个问题。我正在使用 SQL Server 2008 R2。通过添加选项，我收到了包含有关错误的更多信息的电子邮件：

```
@append_query_error = 1, 
```

我收到了关于权限而不是我的查询的错误的电子邮件：

```
 Msg 916, Level 14, State 1, Server SERVER\INST01, 
Procedure GetSalesReport, Line 62
The server principal "CONTROLLEDNETWO\sql.service" is not able 
to access the database "MYDB01" under the current security co
ntext. 
```

我的查询试图访问一些 SQL 代理没有权限的表（实际上在我的情况下它甚至没有访问权限）。

**我通过 SQLSMS 通过将新用户“CONTROLLEDNETWO\sql.service”添加到数据库“MYDB01”并授予“选择”权限来修复它。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-18T16:12:35.060

这一切都很有帮助，谢谢。想分享我尝试使用将结果放在列中的 excel(xls) 附件所做的事情。通过添加 query_result_no_padding = 1 和 query_result_separator= ' , ' 这对我有用。（即Tab，Tab中的勾号）

```
@query_result_header= 1,
@attach_query_result_as_file = 1,
@query_result_no_padding = 1,
@query_attachment_filename = 'TestPriceFlingerReport.xls',
@query_result_separator= '  ,   ',
@profile_name = 'Test Exchange Server' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-22T21:02:25.813

```
EXEC msdb.dbo.sp_send_dbmail
    @profile_name = 'Main Profile',
    @recipients = 'me@vwp.com',
    @subject = 'Test',
    @body = 'this is a test',
    @execute_query_database = 'myTargetDatabase_mscrm',
    @query = N'SELECT * from myTargetDatabase_mscrm.dbo.SystemUserBase',
    @attach_query_result_as_file = 1,
    @query_attachment_filename = 'Test.txt' 
```

作为参考，此失败反复显示为以域管理员身份调用，但以 local\sqladmin 身份运行。在关闭变量并尝试授予权限后，我在作业脚本中看到它仍在使用主数据库。我发现这个场景正盯着我看。它在 Step 的配置中。我将其更改为 msdb 并且它有效。请记住，我根据一些帖子将 select from myTable 更改为 select from myDatabase.dbo.myTable 。这可能有助于解决问题，也可能没有。我还使用了@execute_query_database 来确保它从正确的位置运行查询。同样，这可能没有必要。

不管最后是什么让它开心，都跟它有没有依恋没有关系。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-24T18:29:50.383

在我的情况下，它无法识别属于数据库的表。一旦将 database.dbo.table 添加到查询中，它就可以工作了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T13:17:32.227

当您手动执行查询时，将使用您的凭据。当 SQL 代理执行相同的查询时，将使用 SQL 代理服务帐户的凭据。默认情况下，SQL Server 代理将使用 LocalSystem 帐户凭据。解决此问题的一种方法是使用有权访问 csv 目录\文件的用户更改运行 SQL Server 代理服务的用户。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-30T22:32:44.183

我相信这个问题是由于在 SQL 2008 中实现的更改以及后来关于锁定 sp_send_dbmail 的安全性。仅当您将 qry 传递给 send_dbmail 以执行并通过电子邮件返回结果时才会发生这种情况。问题是错误消息具有误导性且不合适。一个好的解决方案是创建一个具有执行该查询所需的最低权限的 SQL 用户。例如，db_reader 或 db_writer 以及 db_owner（如果绝对必要）。并使该用户成为所有者。您还可以创建 SQL 凭据并将该 sql 作业配置为在该 SQL 凭据下运行。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-24T16:49:23.697

我也有这个问题，并使用这里的大部分建议分两部分解决。

1）右键单击，作业上的“查看历史记录”显示失败详细信息，失败通知给出了作业运行下的用户名，因此我授予该用户对我的数据库的只读访问权限。

2) 我忘记指定**DBName.dbo** .MyTableName 并且只使用了 MyTableName。

顺便说一句，这些电子邮件都进入了我的垃圾邮件文件夹。

# iphone - 直接从应用程序将 mp3 文件附加到电子邮件？

> ID：15112852
> 
> 赞同：0
> 
> 时间：2013-02-27T13:05:35.210
> 
> 标签：iphone, ios, ipad

我正在开发一个应用程序，如果用户选择一种声音，他们可以从应用程序通过电子邮件将其发送给自己。

附件部分“似乎”可以工作，但是，当我发送电子邮件时，收件人没有附件？

在 iPad/iPhone 本身上，它看起来像是在撰写时附加了它，但它不起作用？：/

这是我正在使用的代码；

```
- (void)onSend:(id)sender{

    int nIndex;

    UIButton    *btnSender = (UIButton *)sender;
    NSLog( @"%d", btnSender.tag );

    for ( int i = 0; i < [ m_aryFileName count ]; i++ ) {

        if( i == ( btnSender.tag - 100 ) ){
            nIndex = i;
        }

    }

    NSString *strFileName = [ m_aryFileName objectAtIndex:nIndex ];
    strFileName = [ strFileName stringByAppendingString:@".mp3" ];
    NSData*     nData = [ NSData dataWithContentsOfFile:strFileName ];

    MFMailComposeViewController *pickerMail = [[MFMailComposeViewController alloc] init];
    pickerMail.mailComposeDelegate = self;

    [pickerMail setSubject:@"myMail Attachment"];

    // Attach an image to the email
    [pickerMail addAttachmentData:nData mimeType:@"audio/mp3" fileName:strFileName ];

    // Fill out the email body text
    NSString *emailBody = @"Here is your attachment";

    [pickerMail setMessageBody:emailBody isHTML:YES];

    [self presentModalViewController:pickerMail animated:YES];
    [pickerMail release];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:27:41.847

试试这个代码伙伴，

```
NSString *strFileName = [m_aryFileName objectAtIndex:nIndex];
strFileName = [strFileName stringByAppendingString:@".mp3"];
NSURL    *fileURL = [[NSURL alloc] initFileURLWithPath:strFileName];
NSData *nData = [[NSData alloc] initWithContentsOfURL:fileURL];

MFMailComposeViewController *pickerMail = [[MFMailComposeViewController alloc] init];
pickerMail.mailComposeDelegate = self;
[pickerMail setSubject:@"myMail Attachment"];
[pickerMail addAttachmentData:nData mimeType:@"audio/mpeg" fileName:strFileName ];
NSString *emailBody = @"Here is your attachment";
[pickerMail setMessageBody:emailBody isHTML:YES];
[self presentModalViewController:pickerMail animated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:47:39.063

下面的代码可能对您有用：

NSData *videoData = [NSData dataWithContentsOfURL:mediaUrl];

[mailcomposer addAttachmentData:videoData mimeType:@"video/mp4" fileName:@"Video"]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:31:00.233

```
if ([MFMailComposeViewController canSendMail] && m_pDataArray != nil) 
{
    NSString * pSongPath = [[NSBundle mainBundle] pathForResource:@"song" ofType"@"mp3"]; ;//get the file
    MFMailComposeViewController * pMailComposer = [[MFMailComposeViewController alloc] init];
    pMailComposer.mailComposeDelegate = self;
    [pMailComposer setMessageBody:@"msg body" isHTML:NO];
    NSURL * pFileUrl = [[[NSURL alloc] initFileURLWithPath:pSongPath] autorelease];
    NSData * pData = [[[NSData alloc] initWithContentsOfURL:pFileUrl] autorelease];
     [pMailComposer addAttachmentData:pData mimeType:@"audio/mpeg" fileName:@"song.mp3" ]];
     [self presentModalViewController:pMailComposer animated:YES];
     [pMailComposer release];
}
else
{
    UIAlertView *pAlert = [[UIAlertView alloc] initWithTitle:@"Failure" message:@"Your device doesn't support the composer sheet"                                                       delegate:nil  cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [pAlert show];
    [pAlert release];
    pAlert = nil;
} 
```

确保该文件应具有有效的扩展名，如 .mp3 ，在这种情况下它将正常工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T12:06:44.650

尝试改用 mime 类型`audio/mpeg`。您可以通过运行以下代码来获取此值：

```
#import <MobileCoreServices/MobileCoreServices.h>

CFStringRef uti = UTTypeCreatePreferredIdentifierForTag(kUTTagClassFilenameExtension,
                                                        (__bridge CFStringRef)@"mp3",
                                                        NULL);
CFStringRef mimeTags = UTTypeCopyPreferredTagWithClass(uti, kUTTagClassMIMEType);
CFRelease(uti);
NSString *mediaType = [NSString stringWithString:(__bridge NSString *)mimeTags];
CFRelease(mimeTags); 
```

这是如何运作的？

# java - 根据单一职责原则的重构方法

> ID：15112857
> 
> 赞同：1
> 
> 时间：2013-02-27T13:05:57.523
> 
> 标签：java, refactoring, single-responsibility-principle

我需要测试合同义务程序。
我没有看到任何直接的方法来测试这种方法。它违反了[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)，并且干了太多事情。
我会知道，如何安全地将以下职责提取到新方法或类中：

```
public void askUserPathAndWord() {

        BufferedReader bufferedReader = new BufferedReader(
                new InputStreamReader(System.in));
        String path;
        String whatFind;
        BlockingQueue<File> queue = new LinkedBlockingQueue<File>();

        try {
            System.out.println("Please, enter a Path and Word"
                    + "(which you want to find):");
            System.out.println("Please enter a Path:");
            path = bufferedReader.readLine();
            System.out.println("Please enter a Word:");
            whatFind = bufferedReader.readLine();

            if (path != null && whatFind != null) {

                File endOfWorkFile = new File("GameOver.tmp");
                CountDownLatch latch = new CountDownLatch(2);

                FolderScan folderScan = new FolderScan(path, queue, latch,
                        endOfWorkFile);
                FileScan fileScan = new FileScan(whatFind, queue, latch,
                        endOfWorkFile);

                Executor executor = Executors.newCachedThreadPool();
                executor.execute(folderScan);
                executor.execute(fileScan);

                latch.await();
                System.out.println("Thank you!");
            } else {
                System.out.println("You did not enter anything");
            }

        } catch (IOException | RuntimeException e) {
            System.out.println("Wrong input!");
            e.printStackTrace();
        } catch (InterruptedException e) {
            System.out.println("Interrupted.");
            e.printStackTrace();
        }
    } 
```

**问题：**
我们如何能够安全地执行后续步骤：

*   向用户询问单词和路径；
*   给定一个词，创建一个具有正确参数的 FileScan（工厂）；
*   给定一个路径，创建一个具有正确参数的 FolderScan（一个工厂）；
*   给定两个runnables和一个latch，创建一个ExecutorService，将它们排队，然后等待latch。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T13:09:29.783

As with most refactorings a safe first step is to test the method as it currently stands. Then refactor the code into logical groups that have the necessary responsibilities - throughout this process your previously written tests should not break. Then you can abandon your original test which tests too many things in favour of tests that solely make assertions about the new code that you have written

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:30:32.787

这就是我将重构该方法的方式，主要使用 IDE 的提取方法功能和常识。最好为该方法编写一个测试，以确保重构没有破坏任何东西。

```
class PathAndWord {
    final String path;
    final String whatFind;

    PathAndWord(String path, String whatFind) {
        this.path = path;
        this.whatFind = whatFind;
    }

    boolean isProperlyInitialized() {
        return path != null && whatFind != null;
    }
}

public void askUserPathAndWord() {
    try {
        tryToAskUserPathAndWord();
    } catch (IOException | RuntimeException e) {
        System.out.println("Wrong input!");
        e.printStackTrace();
    } catch (InterruptedException e) {
        System.out.println("Interrupted.");
        e.printStackTrace();
    }
}

private void tryToAskUserPathAndWord() throws IOException, InterruptedException {
    PathAndWord pathAndWord = readPathAndWord();

    if (pathAndWord.isProperlyInitialized()) {
        performScan(pathAndWord, "GameOver.tmp");
        System.out.println("Thank you!");
    } else {
        System.out.println("You did not enter anything");
    }
}

private PathAndWord readPathAndWord() throws IOException {
    System.out.println("Please, enter a Path and Word (which you want to find):");

    BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(System.in));

    String path = readPath(bufferedReader);
    String whatFind = readWord(bufferedReader);
    return new PathAndWord(path, whatFind);
}

private String readPath(BufferedReader bufferedReader) throws IOException {
    System.out.println("Please enter a Path:");
    return bufferedReader.readLine();
}

private String readWord(BufferedReader bufferedReader) throws IOException {
    System.out.println("Please enter a Word:");
    return bufferedReader.readLine();
}

private void performScan(PathAndWord pathAndWord, String endOfWorkFileName) throws InterruptedException {
    BlockingQueue<File> queue = new LinkedBlockingQueue<File>();

    File endOfWorkFile = new File(endOfWorkFileName);
    CountDownLatch latch = new CountDownLatch(2);

    FolderScan folderScan = new FolderScan(pathAndWord.path, queue, latch,
            endOfWorkFile);
    FileScan fileScan = new FileScan(pathAndWord.whatFind, queue, latch,
            endOfWorkFile);

    Executor executor = Executors.newCachedThreadPool();
    executor.execute(folderScan);
    executor.execute(fileScan);

    latch.await();
} 
```

# git - 如何复制 git-svn 克隆的存储库，以便 git svn dcommit 仍然有效

> ID：15112859
> 
> 赞同：3
> 
> 时间：2013-02-27T08:34:22.523
> 
> 标签：git

我有一个相当大的 svn 集中式存储库，我们与我的团队一起使用。现在我想在本地使用 git(-svn)，所以我做了一个 git-svn 克隆。这工作正常，但 git-svn 克隆需要很长时间才能完成。相比之下，一个 git clone 通常不需要那么长时间。

**同事如何复制我的 svn 克隆，这样他就不需要再次检查和转换整个 svn 历史记录？**即不与svn交互。

当然，我们希望同事能够使用他自己的凭据执行 fetch 和 dcommit 到中央 svn 存储库。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T09:18:58.643

总之，这个过程很脆弱，*不推荐*。请参阅[git svn 手册页](https://www.kernel.org/pub/software/scm/git/docs/git-svn.html#_caveats)，注意事项部分：

> 为了简单和与 Subversion 互操作，建议所有 git svn 用户直接从 SVN 服务器 clone、fetch 和 dcommit，并避免 git 存储库和分支之间的所有 git clone/pull/merge/push 操作。在 git 分支和用户之间交换代码的推荐方法是 git format-patch 和 git am，或者只是“dcommit”到 SVN 存储库。

所以想要使用的每个人都`git svn`应该从 SVN 服务器克隆他/她自己的副本。

另一个解决方案是使用[SubGit](http://subgit.com/)，它将为您提供一个到存储库的 git 桥，您可以与 SVN 互换使用：

> SubGit 是一个平滑、无压力的 Svn 到 Git 迁移的工具。在服务器端安装一次，然后根据需要同时使用 Subversion 和 Git。
> 
> ![SubGit 操作概述](../Images/ed494c0fb75a6d32e2220bb2ed7c1573.png)
> 
> SubGit 允许设置双向 Subversion 到 Git 复制（可写镜像）。访问文档页面以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T09:06:19.130

根据添加到问题和其他答案的评论：

**可以只（物理地）复制 git 存储库**（或 tar/zip 副本，或者如文档中所说的 rsync）。

我测试了这个解决方案，事实上，在另一台机器上，与 svn 的连接是使用该机器的 svn 凭据执行的，而整个历史记录只是在几秒钟内被复制。

# node.js - 什么样的对象是 node-postgres 错误？为什么 node 的 console.log 和 JSON.stringify 处理方式不同？

> ID：15112862
> 
> 赞同：7
> 
> 时间：2013-02-27T13:06:13.727
> 
> 标签：node.js, node-postgres

console.log 像这样输出它，

```
{ [error: syntax error at or near "step"]
  length: 86,
  name: 'error',
  severity: 'ERROR',
  code: '42601',
  detail: undefined,
  hint: undefined,
  position: '62',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  file: 'scan.l',
  line: '1001',
  routine: 'scanner_yyerror' } 
```

但 JSON.stringify 没有看到错误的叙述部分，

{"length":86,"name":"error","severity":"ERROR","code":"42601","position":"62","file":"scan.l","行":"1001","例程":"scanner_yyerror"}

我不知道如何在阅读维基（[https://github.com/brianc/node-postgres/wiki/Error-handling，http://nodejs](https://github.com/brianc/node-postgres/wiki/Error-handling) [. ru/doc/v0.4.x/stdio.html#console.log](http://nodejs.ru/doc/v0.4.x/stdio.html#console.log)）

代码是这样的，

```
 client.query(selstring, function(err, result) {
   if(err){
     res.send(JSON.stringify(err));
     console.log(err);
   }else{ 
```

谢谢

更新：`err.toString()`显示`error: syntax error at or near "step"`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-05-18T05:50:36.100

因为 pg 错误是标准 Js Error() obj 的子类，因此可以通过 err.message 访问基本错误“描述”...

```
console.log(new Error("hello world"));
[Error: hello world]
console.log(new Error("hello world").message);
hello world 
```

您可以通过附加 Error.prototype 为您自己的错误对象子类化标准错误对象

请参阅 Kevin 的帖子[如何在 JavaScript 中创建自定义错误？](https://stackoverflow.com/questions/783818/how-do-i-create-a-custom-error-in-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-18T23:31:16.353

很长一段时间以来，我一直在努力理解同样的事情。

查看 的输出`JSON.stringify(err)`，该对象似乎具有一个数组作为未命名属性。怎么可能创建一个具有匿名属性的对象？我曾经搞砸了很长一段时间，但找不到任何方法来构造任何可以从`JSON.stringify`.

我发现 err.message 实际上可以访问字符串，但我真的不明白为什么，因为“消息”在字符串化版本中没有作为属性出现。如果 'message' 是 err 的一个属性，为什么它不出现在 stringify 的输出中？如果不是，那么它来自哪里？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-07-29T20:44:22.973

简单的解决方法是将端口参数添加到您的连接中，即使它是默认端口。我有完全相同的问题。[我从这个github issue](https://github.com/brianc/node-postgres/issues/364)中找到了解决方案。

```
var pg_conn_conf = {
  username: 'user',
  pass: 'pass',
  port: 5432,
  host: 'localhost',
  db: 'mydb'
}; 
```

还有另一个[stackoverflow 答案](https://stackoverflow.com/questions/18391212/is-it-not-possible-to-stringify-an-error-using-json-stringify)建议扩展 Error.prototype，幸运的是，在这种情况下您不必处理它。但这是一个很好的技巧。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-08-20T12:42:45.770

第一步把控制台像

**控制台.log（查询.文本）；**

另请参阅链接可能使用

[http://dailyjs.com/2011/09/26/heroku/](http://dailyjs.com/2011/09/26/heroku/)

# postgresql - flyway 使用现有数据库

> ID：15112863
> 
> 赞同：1
> 
> 时间：2013-02-27T13:06:14.437
> 
> 标签：postgresql, flyway

我开始在我的项目中使用 flyway，我配置为在我的数据库上应用新的更改，但我想知道我是否可以使用 2 个参数`init-method="init, migrate"`，因为每次我想在新计算机上启动时，我都需要恢复一些数据库备份从 pgadim 将 ini-method 更改为 init，因此他将创建表来控制更新。所以我需要更改我的初始化方法以迁移以应用未来的更改。

我想知道是否有更好的方法来做到这一点。

对不起我的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T18:12:55.540

Flyway 2.1 将附带一个 initOnMigrate 设置，可以完全满足您的需求。在那之前，您始终可以使用包含您需要的逻辑的类来包装 Flyway 类。

# angularjs - AngularJs ng-repeat 改变循环增量

> ID：15112871
> 
> 赞同：1
> 
> 时间：2013-02-27T13:06:35.477
> 
> 标签：angularjs

我是 AngularJs 的新手。我想使用 ng-repeat 作为 for(i=0; i < ele.length; i+=2)

我有一个有 4 列的表，我将在其中使用 ng-repeat

```
<table>
<tr ng-repeat="i in elements">
   <th>{{i.T}}</th>
   <td>{{i.V}}</td>
   <th>{{elements[($index+1)].T}}</th> <!-- This should be next element of the elements array -->
   <td>{{elements[($index+1)].V}}</td> <!-- This should be next element of the elements array -->
</tr>
</table> 
```

我需要在一次迭代中访问 2 个元素，迭代增量应该是 2

我希望这是有道理的。请帮我。

请检查这个 html 视图[Plunker](http://plnkr.co/edit/PSwPWqKwqp0vzFJTO8eh?p=preview)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T16:28:58.240

您可以创建一个过滤器来创建数组的偶数副本：

```
.filter("myFilter", function(){
    return function(input, test){
        var newArray = [];
        for(var x = 0; x < input.length; x+=2){
             newArray.push(input[x]);   
        }
        return newArray;
    }
}); 
```

JsFiddle：http: [//jsfiddle.net/gwfPh/15/](http://jsfiddle.net/gwfPh/15/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T14:28:55.487

因此，如果我理解正确，您想要遍历您的列表并在迭代时交替使用 th 和 td。如果是这样，您可以使用 ng-switch：

```
<table>
  <tr ng-repeat="i in elements" ng-switch on="$index % 2">
    <th ng-switch-when="0">{{i.T}}</th> 
    <td ng-switch-when="1">{{i.V}}</td>    
  </tr>
</table> 
```

[在此处查看 Plunker](http://plnkr.co/edit/38aNNcHaaO2B9hv1Nvty)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:28:32.497

我能想到的一种解决方案是改变数据模型

模板

```
<table ng-app="test-app" ng-controller="TestCtrl">
<tr ng-repeat="i in items">

   <th>{{i.T1}}</th>
   <td>{{i.V1}}</td>
   <th>{{i.T2}}</th>
   <td>{{i.V2}}</td>
</tr>
</table> 
```

控制器

```
testApp.controller('TestCtrl', ['$scope', function($scope) {
    var elements=[]; //This is the dynamic values loaded from server
    for (var i = 0; i < 5; i++) {
        elements.push({
            T : i,
            V : 'v' + i
        });
    }

    //A converter which convert the data elements to a format we can use
    var items = [];
    var x = Math.ceil(elements.length / 2);
    for (var i = 0; i < x; i++) {
        var index = i * 2;
        var obj = {
            T1 : elements[index].T,
            V1 : elements[index].V
        }
        if (elements[index + 1]) {
            obj.T2 = elements[index + 1].T;
            obj.V2 = elements[index + 1].V
        }
        items.push(obj)
    }

    $scope.items = items;

}]); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/dfN2G/2/)

可以在[此处](http://jsfiddle.net/arunpjohny/dfN2G/3/)找到另一种略有不同的方法。

# snmp - SNMP v3 似乎不起作用

> ID：15112873
> 
> 赞同：0
> 
> 时间：2013-02-27T13:06:38.007
> 
> 标签：snmp, snmptrapd

我有一个 PHP 应用程序（在 ubuntu 上运行），它根据收到的一些陷阱执行一些命令。我有一个 Windows 测试客户端来发送陷阱，它适用于 snmp v2。我检查了 snmptrapd 日志中的所有内容。不幸的是，客户端不支持 v3，我必须使用真实设备。当我使用仅发送 v3 陷阱的 NoBreak 时，snmptrapd 什么也不做。事实上，我可以在我的 windows 客户端上看到这些陷阱，因此 linux 中的一些设置似乎丢失了。我一直在互联网上阅读 net-snmp 页面和教程，但我不太确定该怎么做，因为我没有在 windows 中配置任何安全方面，它只是工作。如果你去net-snmp docs，据说我们需要创建一个用户并设置一个密码，但是nobreak似乎发送一种广播。我也没有 t 接收设置说明（我并不是说我不需要这样做）。第一个问题是：如何侦听端口以检查陷阱接收？也许它已经到达但没有被处理。

第二个问题：如何配置 snmptrapd 接收所有 v3 陷阱？那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:39:14.477

Net-SNMP`snmptrapd`非常适合处理 SNMPv3 陷阱。 **但是**，它只有在您配置好之后才会这样做。事实上，除非您对其进行配置，否则它不会收到任何协议版本的任何陷阱。这是出于安全考虑，因为它能够在收到陷阱时运行应用程序等。想象一下得到一个假陷阱，告诉您整个城镇的机器有问题？你会一路开车到那里，只是为了发现有人给你发送了一个错误陷阱，因为你接受并相信任何传来的信息。

要为 设置 SNMPv3 `snmptrapd`，您可以特别从本教程开始：[SNMPv3 Traps](http://www.net-snmp.org/wiki/index.php/TUT:snmptrap_SNMPv3)

# java - 随机访问 Zip 文件而不将其写入磁盘

> ID：15112874
> 
> 赞同：7
> 
> 时间：2013-02-27T13:06:38.690
> 
> 标签：java, zip

我有一个 1-2GB 的 zip 文件，其中包含 500-1000k 个条目。我需要在几分之一秒内按名称获取文件，而无需完全解包。如果文件存储在 HDD 上，则可以正常工作：

```
public class ZipMapper {
    private HashMap<String,ZipEntry> map;
    private ZipFile zf;

    public ZipMapper(File file) throws IOException {
        map = new HashMap<>();
        zf = new ZipFile(file);

        Enumeration<? extends ZipEntry> en = zf.entries();
        while(en.hasMoreElements()) {
            ZipEntry ze = en.nextElement();
            map.put(ze.getName(), ze);
        }
    }

    public Node getNode(String key) throws IOException {
        return Node.loadFromStream(zf.getInputStream(map.get(key)));
    }
} 
```

但是，如果程序从 Amazon S3 下载了 zip 文件并具有其 InputStream（或字节数组），我该怎么办？虽然下载 1GB 需要大约 1 秒，但将其写入 HDD 可能需要一些时间，而且处理多个文件稍微困难一些，因为我们没有 HDD 垃圾收集器。

ZipInputStream 不允许随机访问条目。

通过字节数组在内存中创建一个虚拟文件会很好，但我找不到办法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:28:10.713

您可以标记要在退出时删除的文件。

如果你想采用内存中的方法：看看新的 NIO.2 File API。Oracle 为 zip/jar 提供文件系统提供程序，AFAIK [ShrinkWrap](http://exitcondition.alrubinger.com/2012/08/17/shrinkwrap-nio2/)提供内存文件系统。你可以试试两者的结合。

我编写了一些实用方法来使用 NIO.2 File API（该库是开源的）将目录和文件复制到/从 Zip 文件中：

马文：

```
<dependency>  
    <groupId>org.softsmithy.lib</groupId>  
    <artifactId>softsmithy-lib-core</artifactId>  
    <version>0.3</version>  
</dependency> 
```

教程：

[http://softsmithy.sourceforge.net/lib/current/docs/tutorial/nio-file/index.html](http://softsmithy.sourceforge.net/lib/current/docs/tutorial/nio-file/index.html)

API：[CopyFileVisitor.copy](http://softsmithy.sourceforge.net/lib/current/docs/api/softsmithy-lib-core/org/softsmithy/lib/nio/file/CopyFileVisitor.html#copy%28java.nio.file.Path,%20java.nio.file.Path%29)

特别是[PathUtils.resolve](http://softsmithy.sourceforge.net/lib/current/docs/api/softsmithy-lib-core/org/softsmithy/lib/nio/file/PathUtils.html#resolve%28java.nio.file.Path,%20java.nio.file.Path%29)有助于解决跨文件系统的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:31:26.763

您可以使用 SecureBlackbox 库，它允许对任何可搜索的流进行 ZIP 操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T22:28:17.390

Blackbox 库只有 Extract(String name, String outputPath) 方法。似乎它确实可以随机访问可搜索 zip 流中的任何文件，但它不能将结果写入字节数组或返回流。

我找不到 ShrinkWrap 的文档。我找不到 FileSystem/FileSystemProvider 等的任何合适的实现。

然而，事实证明，我正在运行的 Amazon EC2 实例（大）以某种方式在大约 1 秒内将 1gb 文件写入磁盘。所以我只是将文件写入磁盘并使用 ZipFile。

如果 HDD 会很慢，我认为 RAM 磁盘将是最简单的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T13:29:51.933

我认为您应该考虑使用您的操作系统来创建“内存中”文件系统（即 RAM 驱动器）。
另外，看看[FileSystem](http://docs.oracle.com/javase/7/docs/api/java/nio/file/FileSystems.html)的 API。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T14:36:09.180

一种完全不同的方法：如果服务器在磁盘上有文件（并且可能已经缓存在 RAM 中）：让它直接给你文件。换句话说，提交您需要的文件，然后小心提取并在服务器上交付这些文件。

# types - 弹性搜索多种类型搜索

> ID：15112877
> 
> 赞同：2
> 
> 时间：2013-02-27T13:06:41.853
> 
> 标签：types, elasticsearch

我不知道弹性搜索的文档是否很差，或者我只是在错误的地方搜索。我想要做的事情是我想搜索一个特定的索引，但不同类型的不同查询但返回一个结果。例如：

我`beta`在索引 test1 和 test2 中有一个名为的索引和两种类型，我想用一个查询来查询这两种类型：

类型测试1

```
 {
        "query": {
            "fuzzy_like_this": {
                "fields": ["LastEditorID"],
                "like_text": "Test1",
                "min_similarity": 0.1,
                "max_query_terms": 5
            }
        }
    } 
```

类型测试2

```
{
    "query": {
        "fuzzy_like_this": {
            "fields": ["LastEditorID"],
            "like_text": "Test2",
            "min_similarity": 0.1,
            "max_query_terms": 5
        }
    }
    } 
```

并以一种和平的方式获得结果我的意思是一个对象。我也更喜欢在 GET 请求中指定查询中的类型

我是弹性搜索的新手，所以请再问。

更新：我需要的是这样的东西，但这不起作用

```
[{
    "query": {
        "fuzzy_like_this": {
            "fields": ["user"],
            "like_text": "Haider",
            "min_similarity": 0.1,
            "max_query_terms": 5
        }
    },
    "filter": {
        "type": {
            "value": "typetest"         
        }
    }
},
{
    "query": {
        "fuzzy_like_this": {
            "fields": ["user"],
            "like_text": "Haider",
            "min_similarity": 0.1,
            "max_query_terms": 5
        }
    },
    "filter": {
        "type": {
            "value": "typetest"         
        }
    }
}

] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:49:25.633

您可以在查询中添加过滤器并在`_type`字段上进行过滤。

它有帮助吗？

# c# - 设计可从 F# 良好使用的 C# 库的指南

> ID：15112880
> 
> 赞同：12
> 
> 时间：2013-02-27T13:06:44.007
> 
> 标签：c#, f#

我只想指出，这个问题不是相反的

[设计用于 F# 和 C# 的 F# 库的最佳方法](https://stackoverflow.com/questions/10110174/best-approach-for-designing-f-libraries-for-use-from-both-f-and-c-sharp)

在这里，我不是在问如何设计一个用 C# 编写的函数库，以便在两个世界中使用。

我想知道关于**设计选择包含或避免什么的****良好实践**，以获得合理的折衷以使这个库**可以从 F#**中使用。

 ****像（例如）这样的做法：

*   保持对象层次结构尽可能简单

*   避免改变对象的状态，但返回新的

*   ETC...

有做过的人，可以分享一下经验吗？

**边注**

有趣的是，这个 OSS 项目[IronJS](https://github.com/fholm/IronJS)。是的，它是用 F# 编写的，但是作者公开了两个专门的主机`IronJS.Hosting.FSharp`和`IronJS.Hosting.CSharp`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T14:55:19.247

与现有 .NET 库的互操作是 F# 的主要设计目标，因此对要使用的库没有任何限制。

也就是说，由于 F# 的类型更严格，有些模式会导致代码略显笨拙。建造者模式就是其中之一。

```
var bldr = new StringBuilder();
bldr.Append("abc"); //ignoring return value 
```

对比

```
bldr.Append("abc") |> ignore //must be explicitly ignored 
```

但这很容易使用扩展方法或 let-bound 函数解决。底线：互操作是 F# 的优势和最大成就之一。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T17:46:36.217

想象有一天，您想用 F# 重写您的 C# 库以获得更好的可用性。以下是您可能采取的路径：

![在此处输入图像描述](../Images/e6f68a0a80a7765c45058bc3b2876cb0.png)

我专注于路径“命令式 C# --> 函数式 C# --> 函数式 F# --> 惯用 F#”。*您的 C# 库功能越多，您的库在 F# 中的可用性就越高*。函数式风格有助于提高可组合性，并且更接近惯用的 F# 代码。沿着这些思路，您可以：

*   *默认*原则下接受不变性。如果您不知道以后是否需要更新字段/属性，请先标记它`readonly`。
*   遵循基于表达式和声明式的编程风格。LINQ 操作就是很好的例子。
*   以不可变的方式使用不可变集合或可变集合。随着[C# 不可变集合的引入](http://blogs.msdn.com/b/bclteam/archive/2012/12/18/preview-of-immutable-collections-released-on-nuget.aspx)，它应该比以往任何时候都容易。

上图取自[F# 出于好玩和利益](http://fsharpforfunandprofit.com/)从 C# 到 F# 系列的[移植](http://fsharpforfunandprofit.com/posts/porting-to-csharp-intro/)。他们非常有帮助；了解 C# 概念在 F# 中的表达方式将提高库的可用性。

很难避免 C# 的面向对象特性。请记住，F# 类型推断不适用于这些功能。为了保持对象层次结构简单，您应该减少成员重载的数量。大量的成员重载很容易混淆 F# 类型检查器。*此外，在 C# 库中分发一个精简的 F# 包装器*也没有什么坏处。您需要做的某些事情是将一些方法转换为模块函数并创建[活动模式](http://msdn.microsoft.com/en-us/library/dd233248.aspx)来分解对象层次结构。****

# bash - 如何在 bash 脚本中将管道输入包装到标准输出？

> ID：15112882
> 
> 赞同：1
> 
> 时间：2013-02-27T13:06:47.910
> 
> 标签：bash, stdout, pipe, stdin

我想编写一个`bash`脚本，`piped`用一些文本包装输入。

基于谷歌搜索并尝试从示例中挑选。这是我到目前为止所拥有的，但不起作用：

```
#!/bin/sh

if readlink /proc/$$/fd/0 | grep -q "^pipe:"; then
    echo "{ "template":{"name":"contact sheet template","root":"root","parameters": ["pages"]},"pages":"
    cat
    echo "}"
fi 
```

我从另一个程序接收一个 JSON 列表作为`piped`输入，我想在将结果输出到下一个程序之前和之后使用上述文本输出`pipe`。

```
program_1 | wrapper.sh | program_2 > outputfile 
```

但它不输出任何东西。

**有更多`bash`专业知识的人可以为我指明正确的方向吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:15:22.810

您的意思是您的脚本正在从管道读取标准输入，例如

```
$ other-process | my-script 
```

?

然后脚本中的命令将简单地从管道继承标准输入

```
#!/bin/sh

# Output preamble
cat <<EOF
{ "template":{"name":"contact sheet template","root":"root","parameters": ["pages"]},"pages":
EOF

cat   # This reads from standard input inherited from your script

# Output the closing
cat <<EOF
}
EOF 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T13:12:05.610

我个人会以这种方式搜索：

**脚本文件**

```
echo 'BEFORE' $(cat) 'AFTER' 
```

# c++ - 使用 multimap 进行多线程

> ID：15112883
> 
> 赞同：1
> 
> 时间：2013-02-27T13:06:47.570
> 
> 标签：c++, multithreading, winapi, producer-consumer

环境：Windows 7.0，C++，多线程

我创建了一个新的工作线程来接收套接字上的数据并将其添加到静态`multimap`实例中。

代码片段：

```
//remember mymultimap is static data type
static std::multimap<string,string> mymultimap;
EnterCriticalSection(&m_criticalsection);
mymultimap.insert ( "aaa", "bbb") );
LeaveCriticalSection(&m_criticalsection); 
```

同时我的主线程正在读取相同的静态多图：代码快照：

```
EnterCriticalSection(&m_criticalsection);
std::multimap<string,string>::iterator it = mymultimap.begin();
for( ; it != mymultimap.end(); it++)
{
std::string firstName = (*it).first;
std::string secondName = (*it).second;
}
LeaveCriticalSection(&m_criticalsection); 
```

由于主线程和工作线程不断地进行读写，它妨碍了我的应用程序性能。该实例还`multimap`包含大量数据（超过 10,000 条记录）。

如何在 multimap 中使线程锁定的时间最短？

```
EnterCriticalSection(&m_criticalsection);
///minimal lock time for Map ???
LeaveCriticalSection(&m_criticalsection); 
```

请帮助我提高我的应用程序性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:18:16.260

就目前而言，您的问题留下了太多讨论的空间：我们不知道存储在您的多重映射中的值是如何实际使用的。

如果：

*   该数据结构中强制执行的顺序很重要，
*   即使在读取它们之后，您也需要将值保留在多图中，
*   每次阅读时都需要浏览所有条目，

那么您对于我们如何优化该结构的使用非常困惑。

另一方面，如果你能以某种方式放宽其中一个要求，那么你可能会稍微优化一下，例如通过使用消息队列而不是直接映射来在两个线程之间进行通信。

消息队列是实现线程之间高效通信的标准方式，对于一对一的设置，甚至还有无锁解决方案。

**更新**：考虑一下，跨线程共享这种类型的结构不是一个好主意，无论您如何使用它。最好在一个线程中重新组合对多映射的所有访问，从而将其他线程生成的项目通过队列传递给管理它的线程。这将生成项目的工作与其存储和使用完全分离。在您的情况下，生产者线程将花费更少的时间来存储数据，从而留出更多时间来处理套接字流。

因此，对于该解决方案，您需要一个`queue<std::pair<key,value> >`，比如说`std::queue`，在初始化时处理给两个线程，或者像一个静态实例一样`multimap`。然后简单地将`multimap::insert`第一个线程中的 a替换`queue::push_back`为 a `make_pair(key, value)`，并在消费者线程中对称地，`pop_front`首先在队列中拥有所有未决对中的 a ，同时将它们插入映射中，然后实现对映射的处理，不管是什么。

笔记：

请注意，如果您使用的是多重映射，您可能最终会得到同一个键的多个值：调用`find`将返回一个迭代器，您可能必须检查多重映射的下一个条目以确保您得到所有具有相同键的值。

# java - 如何获取系统中的网络浏览器列表

> ID：15112885
> 
> 赞同：7
> 
> 时间：2013-02-27T13:06:50.247
> 
> 标签：java, android

如何以编程方式获取系统中的网络浏览器列表？

更新：我知道该应用程序的清单文件必须具有属性`android:scheme="http"`或`android:scheme="https"`. 我知道如何获取系统中所有应用程序的列表 throw `getPackageManager().getInstalledPackages( 0);`。我不知道如何获得这个属性？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-27T13:16:21.763

例如，您可以检查`Activities`系统中的哪些内容可以处理特定的`Intent`，如下所示：

```
 PackageManager packageManager = context.getPackageManager();
    Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.setData(Uri.parse("http://www.google.com"));
    List<ResolveInfo> list = packageManager.queryIntentActivities(intent,
            PackageManager.MATCH_DEFAULT_ONLY);
            for (ResolveInfo info : list) {
                String name = info.name;
            } 
```

希望这对你有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-25T13:52:19.557

您可以使用包管理器以及打开浏览器的意图来获取设备中所有浏览器的列表。要获取应用程序的包名称，您可以使用`it.activityInfo.packageName`，其中`it`是列表项。

```
val browserIntent = Intent(Intent.ACTION_VIEW, Uri.parse("http://www.aurl.com"))
val browsersList = packageManager.queryIntentActivities(browserIntent, 
                   PackageManager.MATCH_ALL)
browsersList.forEach {
    val packageName = it.activityInfo.packageName
} 
```

# actionscript-3 - 离开和重新访问一个场景，使任何用户输入保持不变。可以做到吗？

> ID：15112887
> 
> 赞同：2
> 
> 时间：2013-02-27T13:06:55.133
> 
> 标签：actionscript-3, flash, memory, input

![在此处输入图像描述](../Images/ac6c829d3ed33dfd917c8124a31e6aaf.png)嗨，我对 Flash 开发相对较新，我有一个关于保存用户输入的快速问题。我有一个迷宫场景，用户在其中导航一个角色，直到遇到另一个对象，当角色击中该对象时，会打开一个新场景，提示用户选择问题的解决方案。一旦用户点击正确的答案，就会出现一个框，说返回迷宫，但是当点击并返回迷宫时，角色会从原来的位置开始，我希望场景从中断的地方继续，即角色是在它与物体相撞的地方，物体已经消失，角色可以恢复到相同的路线上。感谢您阅读本文，我希望它有意义，并且有人为我提供了解决方案。

编辑：首先，我要感谢各位明星的代表点，其次，我知道在 flash 中使用场景是严重的 cr*p 练习和过时的，但它是我多年前学习的方式，并且被视为 Flash 本身将过时很快我并不是真的想学习使用精灵或框架的另一种方法，我只是想要一种修复这种方式，如果 poss 谢谢你的回答！

编辑：一旦黑色方块与它碰撞，希望红色矩形从场景中移除。这样做时，它还会将您带到下一帧。这是我的代码。

```
 addEventListener(Event.ENTER_FRAME, fl_EnterFrameHandler);
 function fl_EnterFrameHandler (event:Event):void
    {
        if (player.hitTestObject(Risk))
        {
            removeEventListener(Event.ENTER_FRAME, fl_EnterFrameHandler);
            removeChild(Risk);
            nextFrame();                
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:21:58.147

我建议你忘记`Scenes`！它们很旧，有缺陷，会带来大量代码问题，而且通常是一种糟糕的做法！！所以如果你只是在学习`AS3`，不要学习`Scenes`！！使用`MovieClips`或`Sprites`代替。只需根据需要添加和删除它们！

编辑：您的编辑；）

> 并且认为Flash本身很快就会过时

那只是纯粹的错误和广泛的错误信息。它只是有一个新的目的，比如 MultiPlattform 游戏开发。但那是一个完全不同的讨论。

您可以通过保存 x,y 坐标然后恢复它们来解决这个问题。但我向你保证，随着你的发展，你会遇到更多的问题/错误！

就像保存的积分和时间一样。当您将玩家放在对象上（最后一个位置）时，您会再次触发问题场景吗？保存答案，等等...更改为 DisplayObjects 最终会节省您的时间。只是说;）

编辑2：

您在评论中的代码应如下所示：

```
function fl_EnterFrameHandler (event:Event):void
        {
            if (player.hitTestObject(Risk))
            {
                removeEventListener(Event.ENTER_FRAME, fl_EnterFrameHandler);//remove to prevent errors if it fires again and there is no Object to hitTest
                removeChild(Risk);// do what needs to be done on this frame
                nextFrame();// and then move to the next                
            }
        } 
```

并遵循正确的约定，让每个人的生活更轻松阅读这篇文章，它看起来像这样！

```
function fl_EnterFrameHandler (event:Event):void
        {
            if (player.hitTestObject(risk))
            {
                removeEventListener(Event.ENTER_FRAME, fl_EnterFrameHandler);//remove to prevent errors if it fires again and there is no Onject to hitTest
                removeChild (risk);
                nextFrame ();

            }
        } 
```

我现在可能让你感到困惑，只需使用最上面的一个；）

**EDIT3：** 好的，我刚刚有一个屠夫。现在都在一个框架上。我会更喜欢课程，但这会让你感到困惑。

要添加新问题，您只需复制库中的问题影片剪辑并更改文本，保持实例名称相同，然后代码将按原样工作！ [下载](https://dl.dropbox.com/u/43532071/files/TheWorkEscapebeta.fla)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:40:17.030

这当然是可能的。您可以将字符属性（例如当前位置）存储在一个变量中。然后在返回游戏时，您将使用此变量来设置角色的起始位置。

我同意场景不是您应该采取的理想路线。从长远来看，阅读一本好的 AS3 书籍可能会为您节省数小时/数天/数周。

# tridion - 关键字在自定义元中的值不正确

> ID：15112888
> 
> 赞同：2
> 
> 时间：2013-02-27T13:06:57.213
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我有一个关键字类别，在他们的术语中有元数据模式。该模式由两个字段组成，每个字段都是类别。非常简单的结构，但在发布过程中，它将那些元数据关键字字段解析为错误的 tcm uris 而不是关键字的标题，如下所示：![在此处输入图像描述](../Images/550bd15c13b2e6f4d0e7302c0a5a5dd2.png)

2）部署程序包的内容

```
 <tcmc:Topic rdf:about="tcm:10-11325-1024">
      <rdfs:label>Analytics and optimization</rdfs:label>
      <rdfs:comment>Analytics and optimization</rdfs:comment>
      <tcmt:key>Analytics and optimization</tcmt:key>
      <tcmt:isAbstract>false</tcmt:isAbstract>
      <tcmt:isRoot>true</tcmt:isRoot>
      <tcmt:metadata rdf:parseType="Literal">
      <Metadata xmlns="uuid:a30b06d3-b6c5-4c2e-a53b-2b88771370ed"> 
        <Divisions xlink:title="cma" xmlns:xlink="http://www.w3.org/1999/xlink"         xlink:href="tcm:0-17737-1024">cma</Divisions>
        <InterestProfile xlink:title="CMAAnalytics" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="tcm:0-11175-1024">CMAAnalytics</InterestProfile> 
      </Metadata>
    </tcmt:metadata>
   </tcmc:Topic> 
```

3) 在我查询 Tridion 的代码中，它返回这些 uri：

```
 TaxonomyFactory taxonomyFactory = new TaxonomyFactory();
    TKeyword taxonomy = taxonomyFactory.GetTaxonomyKeywords(“tcm_of_the_category”);
    if (taxonomy != null && taxonomy.KeywordChildren != null)
    {
        foreach (var item in taxonomy.KeywordChildren) //keyword metadata contains tcm uri with zero instead of title
        {
           Keyword keywordChildren = item as Keyword;
           if (keywordChildren != null)
           {
               . . . 
           }
        }
    } 
```

有没有人有任何想法可能导致这样的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T13:58:10.357

乍一看，我的猜测是用于转换类别的内部模板是直接从数据库中读取元数据字段数据（或在 BL 层中足够接近），而不是对其应用任何蓝图规则（可能是为了性能）。

如果你看内容中的TCM Uris，当它们存储在数据库中时，它们都`0`用作它们的发布ID，并且这个ID在“读取”时被修改。

您的电话：您可以将此称为缺陷，请 Tridion 修复它，它会降低发布类别的性能，或者您可以在交付端处理它 - 您知道发布 Uri 为 0，并且您知道您如果您打算将其用于任何目的，则需要将其替换为当前的发布 ID。

**编辑**

所以我回去做了一些快速的黑客攻击。实际上，您无法加载关键字的内容，因为根据 Tridion 的说法，“Divisions”字段的“Value”是关键字 URI。没办法。

快速解决此问题：加载有问题的关键字：

```
TaxonomyFactory tf = new TaxonomyFactory();
Keyword taxonomy = tf.GetTaxonomyKeywords("tcm:5-369-512");
if(taxonomy != null && taxonomy.KeywordChildren != null)
{
    foreach (Keyword item in taxonomy.KeywordChildren)
    {
        NameValuePair key = (NameValuePair) item.KeywordMeta.NameValues["Field1"];
        string correctUri = key.Value.ToString().Replace("tcm:0-", "tcm:5-");
        Keyword theOtherKeyword = tf.GetTaxonomyKeyword(correctUri);
        string title = theOtherKeyword.KeywordName;
    }
} 
```

现在......你可能想在创意出版物 ID 重写上比我聪明一点:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T18:31:23.747

您可以将该字段视为组件链接，链接到特定的关键字项（对象）。因此，您主要获取 URI，我认为它不会自动解析为 Value 属性。

所以下一步是使用 URI 获取 Keyword 对象，并可能构造 URI 以包含正确的发布上下文。

# jenkins - 詹金斯不执行作业（待定 - 等待下一个执行者）

> ID：15112890
> 
> 赞同：89
> 
> 时间：2013-02-27T13:07:09.677
> 
> 标签：jenkins

詹金斯不会执行任何工作。查看[此问题](https://stackoverflow.com/questions/8499764/jenkins-job-is-waiting-for-next-available-executor)后，我已禁用所有从属节点，但一个简单的作业甚至无法在主节点上运行。

怎么了？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-02-27T13:10:12.357

即使主节点离线，Jenkins 管理控制台也可以运行。当 Jenkins 磁盘空间不足时，可能会发生这种情况。

要确认，请执行以下操作（感谢 geekride - jenkins-pending-waiting-for-next-available-executor）：

*   转到 Jenkins -> 管理 Jenkins -> 管理节点
*   检查“主”节点以查看它是否处于脱机状态。它可能报告主节点磁盘空间不足。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2016-05-14T14:53:28.337

*   转到 Jenkins -> 管理 Jenkins -> 管理节点
*   检查“主”节点。（单击配置图标）

在我的情况下，执行者的数量设置为 0。增加它并解决问题。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2016-08-16T14:34:34.900

就我而言，我的 JenkinsFile 中有以下设置

`node('node'){ ... }`

没有称为“节点”的节点，只有主节点（在遵循一些基本教程后，该值已留在其中）。将值更改为“master”使构建工作。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-04-07T21:13:56.817

我遇到了类似的问题，因为我的主人被设置为“让这台机器只做捆绑工作”。所以，即使我禁用了奴隶，詹金斯继续绕过主人，寻找别的东西。

转到 Jenkins --> Manage Jenkins --> Manage Nodes，然后单击主节点的配置按钮（看起来像螺丝刀和扳手）。检查Usage并确保它在“Utilize this slave as much as possible”上。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-10-05T12:53:46.863

在我的情况下，这是由**执行者数量**（我有 1 个）和从管道运行 Jenkins 作业（项目）引起的（我的管道脚本在 Jenkins 中启动了其他作业）。它导致了**死锁**- 我的管道持有执行者并正在等待它的工作，但该工作正在等待免费的执行者。

解决方案可能会增加`# of executors`in `Jenkins -> Manage Jenkins -> Manage Nodes -> Configure (icon on required node)`。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-11-27T00:58:40.433

我玩游戏有点晚了，但这可能对其他人有所帮助。

在我的例子中，我的 jenkins master 有一个共享的外部资源，它由[external-resource-dispatcher-plugin](https://wiki.jenkins-ci.org/display/JENKINS/External+Resource+Dispatcher)分配给 jenkins 作业。由于插件中的错误[JENKINS-19439](https://issues.jenkins-ci.org/browse/JENKINS-19439)（处于测试阶段），我发现我的资源已被之前的作业锁定，但在取消之前的作业时没有解锁。

要查看资源当前是否处于锁定状态，请导航到受影响的 jenkins 节点，Jenkins -> Manage Jenkins -> Manage Nodes -> master

您应该看到任何外部资源的当前状态。如果有任何意外锁定，这可能是作业等待执行者的原因。

我找不到有关如何手动解决此问题的任何详细信息。
重新启动詹金斯并没有解决问题。
最后我采用了残酷的方法：

*   移除外部资源
    （参见 Jenkins -> Manage Jenkins -> Manage Nodes -> master -> configure）
*   重启詹金斯
*   重新创建外部资源

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-04-04T18:50:08.410

就我而言，当盒子内存不足（RAM）时，我注意到了这种行为，我去了 Jenkins -> Manage Jenkins -> Manage Nodes，发现内存不足异常。我刚刚释放了机器上的一些内存，工作开始进入执行程序。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-12-16T17:55:39.307

就我而言，我刚刚安装了“授权项目”插件，并错误地将“管理 Jenkins -> 配置全局安全性 -> 构建访问控制”中的策略设置为“以匿名方式运行”。所以“匿名者”无权执行这项工作。

将第一个策略设置为“以触发构建的用户身份运行”解锁了排队的作业。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-11-01T13:11:46.833

简短的回答：杀死所有在主服务器上运行的作业。

在我的情况下，有 3 个作业挂在主人身上超过 10 天，没有被注意到。我们通常不会直接在 master 上运行任何作业，一切都在 slave 上运行。我杀死了这三个被挂起的工作，奴隶上的执行者自动开始接受工作。

需要注意的是，即使我们有 8 个从站，也只有 1 个从站处于这种受影响的状态。

[编辑] 我们找到了为什么只有一个奴隶处于这种受影响状态的答案。当 Jenkins slave 宕机时，所有挂起的作业都会自动转移到 master。我杀死的所有 3 个挂起的作业都来自这个从站，所以它可能是主站和这个特定从站之间的连接问题。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-08-16T08:00:47.890

对我来说，以下解决方案有效。

Jenkins --> Manage Jenkins --> Manage Nodes --> master -> configure --> Node properties --> **Restrict Jobs execution at node** - 已启用并授予特定用户访问权限。我自己授予了访问权限，然后工作开始运行。

如果启用**了在节点上限制作业执行，**则计划任务将无法运行。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-06-20T18:08:20.640

就我而言，它类似于@Michael Easter：由于磁盘空间不足，我在工作中遇到了问题。我清理了一些空间，重新启动了 Jenkins，但问题仍然存在。

解决方案是转到 Jenkins -> Manage Jenkins -> Manage Nodes，然后单击按钮更新状态。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-04-23T03:57:40.133

我刚刚添加了一个带有 docker 代理的阶段。由于我只有一个节点 master，我必须告诉容器重用早期阶段的节点：

```
 agent {
    docker {
        image 'bitnami/mongodb:latest'
        reuseNode true
    }
  } 
```

您可以[投票](https://issues.jenkins.io/browse/JENKINS-60701)将其作为代理的默认行为并防止这种锁定。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-06-09T12:30:05.327

如果您安装了*[参数化触发器](https://plugins.jenkins.io/parameterized-trigger/)*插件，则在构建队列中等待的作业可能是已知问题[JENKINS-47792](https://issues.jenkins.io/browse/JENKINS-47792)。

解决方法是将*参数化触发器*插件降级到版本 2.35.1。请注意，您可能还需要降级依赖项，例如*[git](https://plugins.jenkins.io/git/)*插件。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-06-29T15:52:29.290

什么对我有用：我终于注意到 Jenkins 主仪表板左侧的 Build Executor Status 窗口。我在本地系统上使用 2 个执行程序运行一个开发/测试实例。两者目前都忙于未运行的构建。在取消这些工作后，我的第三个（待定）工作能够运行。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-10-14T18:42:27.413

对我来说，我必须手动重新启动执行程序。单击“Build Executor Status”下的“Dead”，然后按下重新启动按钮。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-05-04T08:18:00.230

我遇到了类似的问题，因为我的 master 设置为“# of executor（Jenkins 可以在此代理上执行的最大并发构建数）。

转到 Jenkins --> Manage Jenkins --> Manage Nodes，然后单击主节点的配置按钮（增加执行器的数量以一次运行多个作业）。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-11-27T05:25:41.703

就我而言，我必须`Execute concurrent builds if necessary`在工作的常规设置中进行设置。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-04-04T14:36:41.920

您可能设置了里程碑，并且您的工作在前一个工作完成之前不会运行。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-11-17T13:42:19.747

在我的环境中（图像 jenkins:lts-jdk11、jnlp-agent-maven e jnlp-agent-maven:jdk11），为更新 jenkins 图像执行拉取操作，报告代理没有连接问题。但是所有工作都被消息阻止：

`pending—Waiting for next available executor on`

因此，对我来说，解决方案是停止并拉入两个代理图像：

```
docker pull jenkins/jnlp-agent-maven (jdk8)
docker pull jenkins/jnlp-agent-maven:jdk11 
```

# asp.net-mvc - 带有自己的数据库的 ASP MVC4 Razor [Authorize] 标签？

> ID：15112894
> 
> 赞同：0
> 
> 时间：2013-02-27T13:07:21.870
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

我创建了一个 ASP MVC 4 RAZOR Web 应用程序，并创建了我自己的数据库，用于存储用户名和密码。我使用 FormAuthentification 我设置了一个带有用户名的 Cookie。

```
FormsAuthentication.SetAuthCookie(acc.Username, false); 
```

当我使用自己的数据库时，[Authorize] 和 [AllowAnonymous] 标签不起作用。我可以在我的数据库中使用这个标签吗？或者我怎么能说登录的用户 X 只能访问控制器 A 操作 B ？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:14:43.013

您可以使用自定义成员资格提供程序。这是关于它的精彩文章[http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5- web-forms-and-asp-net-mvc-4-templates.aspx](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)

# image - Joomla：一些显示多个随机图像的模块

> ID：15112895
> 
> 赞同：0
> 
> 时间：2013-02-27T13:07:23.150
> 
> 标签：image, joomla, random, module

您知道 Joomla 中的某些模块，它显示多个（例如 4 个）随机图像吗？就像在页面[http://www.fightnews.sk/](http://www.fightnews.sk/)上一样。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:12:17.597

[您可以尝试使用 JED 上Image Rotators](http://extensions.joomla.org/extensions/photos-a-images/rotators/images-rotators)类别的扩展。也许像这样的东西可能适合您的需求：

[http://extensions.joomla.org/extensions/photos-a-images/rotators/images-rotators/18753](http://extensions.joomla.org/extensions/photos-a-images/rotators/images-rotators/18753)

# windows - 如何使用tapi更改松下pbx扩展的服务等级

> ID：15112898
> 
> 赞同：1
> 
> 时间：2013-02-27T13:07:26.370
> 
> 标签：windows, telephony, tapi, pbx

我做了一个简单的电话应用程序，我在其中检索 PBX 的所有分机线。现在，根据我的需要，我必须选择特定的分机线并更改该线的服务等级 (COS)。我正在使用 TAPI3Lib。 dll和松下TSP。任何帮助将不胜感激..

提前致谢

# ios - 从 iPad 缩小和放大的问题？

> ID：15112899
> 
> 赞同：1
> 
> 时间：2013-02-27T13:07:30.420
> 
> 标签：ios, ipad, pinchzoom, uipinchgesturerecognizer, cgaffinetransformscale

我必须在iPad上尝试缩小和放大功能，它工作正常，但缩放清晰度不好，我不知道，那么如何制作呢？请帮我。

提前致谢

```
// This method will handle the PINCH / ZOOM gesture 
- (void)pinchZoom:(UIPinchGestureRecognizer *)gestureRecognizer
{
    if ([gestureRecognizer state] == UIGestureRecognizerStateBegan || [gestureRecognizer state] == UIGestureRecognizerStateChanged) {

        if (!zoomActive) {
            zoomActive = YES;

            UIPanGestureRecognizer *panGesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(panMove:)];
            [panGesture setMaximumNumberOfTouches:2];
            [panGesture setDelegate:self];
            [self addGestureRecognizer:panGesture];
            [panGesture release];

        }

        [gestureRecognizer view].transform = CGAffineTransformScale([[gestureRecognizer view] transform], [gestureRecognizer scale], [gestureRecognizer scale]);

        [delegate leavesView:self zoomingCurrentView:[gestureRecognizer scale]];            

        [gestureRecognizer setScale:1];

    }
} 
```

# r - 使用元数据组织数据

> ID：15112900
> 
> 赞同：0
> 
> 时间：2013-02-27T13:07:33.233
> 
> 标签：r, dataframe, metadata, organization

我有一个包含两列 X 数据和 Y 数据的数据框。这代表了一些实验数据。

现在我有很多额外的信息，我想与这些数据相关联，例如温度、流速等记录样本的位置。我在第二个数据框中有这个元数据。

数据和元数据应该始终保持在一起，但我也希望能够用数据进行计算

由于我有许多数据-元数据对 (>100)，我想知道人们认为什么是组织数据的有效方法？

目前，我在一个列表中有两个数据框，但我发现访问单个值或数据列很乏味（= 需要编写大量代码和括号）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:18:32.023

您可以使用`attr`ibut：

```
dfr <- data.frame(x=1:3,y=rnorm(3))
meta <- list(temp="30C",date=as.Date("2013-02-27"))
attr(dfr,"meta") <- meta

dfr
  x          y
1 1 -1.3580532
2 2 -0.9873850
3 3  0.3809447

attr(dfr,"meta")
$temp
[1] "30C"

$date
[1] "2013-02-27"

str(dfr)
'data.frame':   3 obs. of  2 variables:
 $ x: int  1 2 3
 $ y: num  -1.358 -0.987 0.381
 - attr(*, "meta")=List of 2
  ..$ temp: chr "30C"
  ..$ date: Date, format: "2013-02-27" 
```

# c# - 编译时 CSE.exe 程序集搜索

> ID：15112904
> 
> 赞同：1
> 
> 时间：2013-02-27T13:07:50.147
> 
> 标签：c#

我正在使用带有以下命令的批处理文件来成功编译 C# 代码，运行生成的 exe 并删除 exe。

```
start /wait C:\WINDOWS\Microsoft.NET\Framework\v3.5\csc.exe /out:PostillionOutgoing.exe PostillionOutgoing.cs  /reference:AlexPilotti.FTPS.Client.dll
call  SetupCI.bat
start /wait PostillionOutgoing.exe
del PostillionOutgoing.exe 
```

它完全按照我想要的方式工作。文件`AlexPilotti.FTPS.Client.dll`与 .cs 文件位于同一文件夹中。

`AlexPilotti.FTPS.Client.dll`许多其他类似的应用程序也需要该组件。我的问题是，是否有任何集中的地方可以保存此 DLL，以便上述所有批处理脚本都能找到它？通过这种方式，我不必在所有单独的文件夹中保留此 DLL 的副本。

我不想将 DLL 放在 GAC 中。我也在 system32 文件夹中尝试过，但它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:16:22.577

根据[文档](http://msdn.microsoft.com/en-us/library/aa720659.aspx)，运行时在探测程序集时没有使用固定位置（即，当它查看目录时，因为它已经无法找到程序集）。

但是，如果您的程序集是强命名的，那么您可以在您的程序中使用[`<codeBase>`](http://msdn.microsoft.com/en-us/library/efs781xb.aspx)配置元素`app.config`将运行时定向到您选择的任何路径。

如果您的程序集没有强命名并且您不想使用`app.config`那么不幸的是您没有选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:17:36.747

您可以使用 /lib 命令行来指定参考的搜索文件夹

在此处查看 msdn 文档[http://msdn.microsoft.com/en-us/library/vstudio/s5bac5fx.aspx](http://msdn.microsoft.com/en-us/library/vstudio/s5bac5fx.aspx)

# java - 整数数组列表中最常见的组合

> ID：15112907
> 
> 赞同：-2
> 
> 时间：2013-02-27T13:07:54.880
> 
> 标签：java, performance, algorithm, combinations

我有一个整数数组列表，其中每个数组都有一些排序的数字。在这里，我想根据所有数组找到最常见的整数序列组合。例如，如果数组列表如下

```
A1 - 1 2 3 5 7 8
A2 - 2 3 5 6 7
A3 - 3 5 7 9
A4 - 1 2 3 7 9
A5 - 3 5 7 10 
```

这里

```
{3,5,7} - {A1,A3,A5}
{2,3}   - {A1,A2,A4} 
```

以上是一组输入和期望的输出。我怎样才能在 Java 中最有效地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:35:42.330

创建新的二维数组（有两行）。在第一行写入其他数组中的所有值，例如 A1 和 A2 = {1 2 3 5 6 7 8}。然后去数组，计算遇到的元素之和，并将这个和放入数组的对应元素中。此后只需分析一个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:16:42.053

我想我没有正确理解你的问题。如果您需要输入 3 5 7 并获得 A1、A2、A3，我认为您需要使用列表。例如：

```
ArrayList<Integer> test = new ArrayList<Integer>();
test.add(1);
test.add(2);
ArrayList<Integer> tesdt2 = new ArrayList<Integer>();
tesdt2.add(1);
tesdt2.add(2);
boolean a = test.containsAll(tesdt2); //true
test.add(3); 
```

如果您需要使用标准数组 (Integer []myArray = new Integer[n];)，您需要编写适用于所有数组并找到所需元素的函数。像这样的东西：

```
boolean search(Integer []A1,Integer []array2){
int tmp = -1;
for(int i=0;i<A1.length;i++){
for(int j=0;j<array2.length;j++){
if(A1[j] == array2[i]){
tmp++;

}
            }
            if(tmp!=i){
                return false;
            }
        }
        return true;
    } 
```

# c# - Calendar in Time sheet application using asp.net mvc 3

> ID：15112914
> 
> 赞同：1
> 
> 时间：2013-02-27T13:08:08.490
> 
> 标签：c#, asp.net, asp.net-mvc-3

I'm trying to make Time Sheet application using asp.net mvc3. Time Sheet should have as input parameters Employee ID and Date, and after that employee will insert project that he was working on and hours spent. I don't know how to design a calendar in time sheet class, so that one can insert his activities for that day into time sheet and look for previous time sheets, change them. it should look similar to this: [http://i.imgur.com/Agf7KCxl.png](http://i.imgur.com/Agf7KCxl.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:11:42.023

您可以根据需要为您的时间表创建一个局部视图 ( [http://i.imgur.com/Agf7KCxl.png](http://i.imgur.com/Agf7KCxl.png) )。您必须使用 CSS 和 jquery API 来插入、更新、删除条目。您的部分视图将采用参数员工 ID、日期，以及他是关联的项目的唯一列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-11T04:10:29.723

我也在使用 asp.net webform 工作时间表应用程序。我正在使用现有的 jQuery/javascript 日历插件之一来获取取件日期。

# math - 除以 2 和上限直到剩下 1

> ID：15112919
> 
> 赞同：1
> 
> 时间：2013-02-27T13:08:24.443
> 
> 标签：math, complexity-theory, logarithm

仅对自然数具有以下算法：rounds(n)={1, if n=1; 1+rounds(ceil(n/2)), else} 所以用编程语言编写这将是

```
int rounds(int n){
    if(n==1)
        return 1;
    return 1+rounds(ceil(n/2));
} 
```

我认为这具有时间复杂度 O(log n)

有更好的复杂性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:57:09.777

如果您认为算法是迭代的，而数字是二进制的，那么这个函数会移出最低位，如果移出的是 1，则将数字加 1。因此，除了增量之外，它计算数字中的位数（即最高1的位置）。增量最终会将结果加一，除非数字的形式为 1000...。因此，您将获得位数加一，或者如果数字是 2 的幂，则获得位数。根据您的机器型号，这可能比 O(log n) 计算得更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T17:18:52.740

首先列出从 1 开始的结果，

```
rounds(1) = 1
rounds(2) = 1 + rounds(2/2) = 1 + 1 = 2 
```

接下来，当`ceil(n/2)`是 2 时，`rounds(n)`将是 3。那是`n = 3`和`n = 4`。

```
rounds(3) = rounds(4) = 3 
```

那么，当`ceil(n/2)`是 3 或 4 时，结果将是 4。`3 <= ceil(n/2) <= 4`当且仅当 时发生`2*3-1 <= n <= 2*4`，所以

```
round(5) = ... = rounds(8) = 4 
```

继续，你可以看到

```
rounds(n) = k+2 if 2^k < n <= 2^(k+1) 
```

通过感应。

您可以将其重写为

```
rounds(n) = 2 + floor(log_2(n-1)) if n > 1 [and rounds(1) = 1] 
```

并且在数学上，您还可以`n = 1`通过将其重写为

```
rounds(n) = 1 + floor(log_2(2*n-1)) 
```

但是，如果您使用固定宽度类型，最后一个公式可能会溢出。

所以问题是

*   你能多快将一个数字与 1 进行比较，
*   你能多快从一个数中减去 1，
*   你能以多快的速度计算正整数的以 2 为底的对数的（下限）？

对于固定宽度类型，即有界范围，所有这些当然都是 O(1) 操作，但是您可能仍然有兴趣使其尽可能高效，即使计算复杂度没有进入游戏。

对于本机机器类型 -通常是 - 比较`int`和`long`减去整数是非常快的机器指令，因此唯一可能有问题的是以 2 为底的对数。

许多处理器都有一条机器指令来计算机器类型值的前导 0 位，如果编译器可以访问它，您将获得以 2 为底的对数的非常快速的实现。如果没有，您可以获得比使用[经典 bit-hacks 之一的](http://graphics.stanford.edu/~seander/bithacks.html#IntegerLog)递归更快的版本。

例如，足够新的 gcc 和 clang 版本有一个`__builtin_clz`（分别`__builtin_clzl`用于 64 位类型），`bsr*`如果处理器上存在该指令，则映射到该指令，并且如果没有提供，则可能是使用一些位旋转的良好实现由处理器。

版本

```
unsigned rounds(unsigned long n) {
    if (n <= 1) return n;
    return sizeof n * CHAR_BIT + 1 - __builtin_clzl(n-1);
} 
```

使用该`bsrq`指令需要（在我的盒子上）0.165 秒来计算`rounds`1 到 100,000,000，bit-hack

```
unsigned rounds(unsigned n) {
    if (n <= 1) return n;
    --n;
    n |= n >> 1;
    n |= n >> 2;
    n |= n >> 4;
    n |= n >> 8;
    n |= n >> 16;
    n -= (n >> 1) & 0x55555555;
    n = (n & 0x33333333) + ((n >> 2) & 0x33333333);
    n = (n & 0x0F0F0F0F) + ((n >> 4) & 0x0F0F0F0F);
    return ((n * 0x01010101) >> 24)+1;
} 
```

耗时 0.626 秒，而天真的循环

```
unsigned rounds(unsigned n) {
    unsigned r = 1;
    while(n > 1) {
        ++r;
        n = (n+1)/2;
    }
    return r;
} 
```

需要 1.865 秒。

如果您不使用固定宽度类型，而是使用任意精度整数，那么情况会发生一些变化。天真的循环（或递归）仍然使用`Θ(log n)`步骤，但这些步骤`Θ(log n)`平均需要时间（或更糟），所以总的来说你有一个`Θ(log² n)`算法（或更糟）。那么使用上面的公式不仅可以提供具有较低常数因子的实现，而且可以提供具有较低算法复杂度的实现。

*   对于合适的表示，可以在恒定时间内与 1 进行比较，`O(log n)`这是合理表示的最坏情况。
*   从一个正整数中减去 1 可以获得`O(log n)`合理的表示。
*   对于某些表示和其他合理的表示，可以在恒定时间内完成以 2 为底的对数的（下限）计算`O(log n)`[如果他们使用 2 次方基数，我对所有任意精度库都很熟悉与做; 如果他们使用 10 次方基数，那将是不同的]。

# salesforce - How to insert data into 3 custom objects using apex code

> ID：15112922
> 
> 赞同：-2
> 
> 时间：2013-02-27T13:08:41.220
> 
> 标签：salesforce, apex-code

I have 3 custom objects, Object1, Object2, Object3. Object2 is the child of Object1. Object3 is the child of Object2.

So I want to insert multiple records into Object1, Object2, Object3.???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:15:56.600

那么，你真的尝试过什么吗？

最简单的操作（不使用诸如外部 id 等高级技巧`upsert`）是以正确的顺序进行。成功插入后，记录的 ID 将返回给对象，您可以在查找中使用它来建立关系。

```
Account a = new Account(Name = 'test acc');
insert a;

Contact c = new Contact(LastName = 'Test', AccountId = a.Id);
insert c;

AccountContactRole acr = new AccountContactRole(Role = 'President', AccountId = a.Id, ContactId = c.Id);
insert acr; 
```

另一种方法是按照您想要的任何顺序执行此操作，然后使用适当的引用更新子记录...

# string - 更改日期后 SELECT 命令出错

> ID：15112932
> 
> 赞同：0
> 
> 时间：2013-02-27T13:09:04.903
> 
> 标签：string, sql-server-2008, selectcommand

先生，我正在使用以下脚本（完整的 aspx 页面）从 2012 年 12 月的 SQL 服务器 2008 数据库中删除 3 个数据透视表

```
 <%@ Page Language="C#" %>

  <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

 <script runat="server">

 </script>

 <html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
<style type="text/css">
    .style1
    {
        color: #800000;
        font-size: medium;
        font-family: "Comic Sans MS";
    }
    .style2
    {
        text-align: center;
        color: #0000CC;
        font-family: "Comic Sans MS";
        font-size: small;
    }
    .style3
    {
        font-size: large;
    }
    .style4
    {
        text-align: center;
        color: #800000;
        font-family: "Comic Sans MS";
        font-size: small;
    }
    .style5
    {
        font-size: small;
    }
</style>

<script runat="server" visible="True">
int TotalTTL1;
int GetTTL1(int Train)
{
    TotalTTL1 += Train;
    return Train;
}
int GetTotalTTL1()
{
    return TotalTTL1;
}

</script>

</head>
<body>
<form id="form1" runat="server">
<div style="text-align: center">

<p class="style4">
    <strong>Three Phase Locomotive</strong></p>
<asp:GridView ID="GridView2" runat="server" AllowSorting="True" 
    AutoGenerateColumns="False" BorderColor="#CC0000" BorderStyle="Solid" 
    BorderWidth="2px" DataSourceID="SqlDataSource2" HorizontalAlign="Center" 
    ShowFooter="True" style="margin-top: 0px">
    <Columns>
        <asp:TemplateField HeaderText="Equipment" SortExpression="Equipt" 
            FooterText="Grand Total">
            <EditItemTemplate>
                <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Equipt") %>'></asp:TextBox>
            </EditItemTemplate>
            <ItemTemplate>
                <asp:Label ID="Label1" runat="server" Text='<%# Bind("Equipt") %>'></asp:Label>
            </ItemTemplate> 
            <FooterStyle Font-Bold="True" />
           <ItemStyle HorizontalAlign="Left" VerticalAlign="Middle" />
        </asp:TemplateField>
        <asp:BoundField DataField="BSL" HeaderText="BSL" ReadOnly="True" 
            SortExpression="BSL" />
        <asp:BoundField DataField="AQ" HeaderText="AQ" ReadOnly="True" 
            SortExpression="AQ" />
        <asp:BoundField DataField="KYN" HeaderText="KYN" ReadOnly="True" 
            SortExpression="KYN" />
        <asp:BoundField DataField="ASN" HeaderText="ASN" ReadOnly="True" 
            SortExpression="ASN" />
        <asp:BoundField DataField="HWH" HeaderText="HWH" ReadOnly="True" 
            SortExpression="HWH" />
        <asp:BoundField DataField="MGS" HeaderText="MGS" ReadOnly="True" 
            SortExpression="MGS" />
        <asp:BoundField DataField="GMO" HeaderText="GMO" ReadOnly="True" 
            SortExpression="GMO" />
        <asp:BoundField DataField="WAT" HeaderText="WAT" ReadOnly="True" 
            SortExpression="WAT" />
        <asp:BoundField DataField="ANGL" HeaderText="ANGL" ReadOnly="True" 
            SortExpression="ANGL" />
        <asp:BoundField DataField="GZB" HeaderText="GZB" ReadOnly="True" 
            SortExpression="GZB" />
        <asp:BoundField DataField="LDH" HeaderText="LDH" ReadOnly="True" 
            SortExpression="LDH" />
        <asp:BoundField DataField="JHS" HeaderText="JHS" ReadOnly="True" 
            SortExpression="JHS" />
        <asp:BoundField DataField="CNB" HeaderText="CNB" ReadOnly="True" 
            SortExpression="CNB" />
        <asp:BoundField DataField="AJJ" HeaderText="AJJ" ReadOnly="True" 
            SortExpression="AJJ" />
        <asp:BoundField DataField="ED" HeaderText="ED" ReadOnly="True" 
            SortExpression="ED" />
        <asp:BoundField DataField="RPM" HeaderText="RPM" ReadOnly="True" 
            SortExpression="RPM" />
        <asp:BoundField DataField="BZA" HeaderText="BZA" ReadOnly="True" 
            SortExpression="BZA" />
        <asp:BoundField DataField="LGD" HeaderText="LGD" ReadOnly="True" 
            SortExpression="LGD" />
        <asp:BoundField DataField="KZJ" HeaderText="KZJ" ReadOnly="True" 
            SortExpression="KZJ" />
        <asp:BoundField DataField="TATA" HeaderText="TATA" ReadOnly="True" 
            SortExpression="TATA" />
        <asp:BoundField DataField="BNDM" HeaderText="BNDM" ReadOnly="True" 
            SortExpression="BNDM" />
        <asp:BoundField DataField="BKSC" HeaderText="BKSC" ReadOnly="True" 
            SortExpression="BKSC" />
        <asp:BoundField DataField="SRC" HeaderText="SRC" ReadOnly="True" 
            SortExpression="SRC" />
        <asp:BoundField DataField="BIA" HeaderText="BIA" ReadOnly="True" 
            SortExpression="BIA" />
        <asp:BoundField DataField="BRC" HeaderText="BRC" ReadOnly="True" 
            SortExpression="BRC" />
        <asp:BoundField DataField="BL" HeaderText="BL" ReadOnly="True" 
            SortExpression="BL" />
        <asp:BoundField DataField="TKD" HeaderText="TKD" ReadOnly="True" 
            SortExpression="TKD" />
        <asp:BoundField DataField="ET" HeaderText="ET" ReadOnly="True" 
            SortExpression="ET" />
        <asp:BoundField DataField="NKJ" HeaderText="NKJ" ReadOnly="True" 
            SortExpression="NKJ" />
        <asp:TemplateField HeaderText="Total" SortExpression="TTL">
             <ItemTemplate>
                    <%# GetTTL1(int.Parse(Eval("TTL").ToString())).ToString()%>
                </ItemTemplate>
                <FooterTemplate>
                    <%# GetTotalTTL1().ToString()%>
                </FooterTemplate>
             <FooterStyle Font-Bold="True" />
        </asp:TemplateField>
    </Columns>
    <FooterStyle Font-Names="Tahoma" Font-Size="Small" ForeColor="Black" 
        HorizontalAlign="Center" VerticalAlign="Middle" />
    <HeaderStyle Font-Names="Tahoma" Font-Size="Small" ForeColor="Black" 
        HorizontalAlign="Center" VerticalAlign="Middle" />
    <RowStyle Font-Names="Tahoma" Font-Size="Small" HorizontalAlign="Center" 
        VerticalAlign="Middle" />
</asp:GridView>
<asp:SqlDataSource ID="SqlDataSource2" runat="server" 
    ConnectionString="<%$ ConnectionStrings:EquipfailuresERConnectionString %>" 
    SelectCommand="SELECT  Equipt, NULLIF([BSL],0) AS BSL, NULLIF([AQ],0) AS AQ, NULLIF([KYN],0) AS KYN,  NULLIF([ASN],0) AS ASN, NULLIF([HWH],0) AS HWH, NULLIF([MGS],0) AS MGS, NULLIF([GMO],0) AS GMO, NULLIF([WAT],0) AS WAT, NULLIF([ANGL],0) AS ANGL, NULLIF([GZB],0) AS GZB, NULLIF([LDH],0) AS LDH, NULLIF([JHS],0) AS JHS, NULLIF([CNB],0) AS CNB, NULLIF([AJJ],0) AS AJJ, NULLIF([ED],0) AS ED, NULLIF([RPM],0) AS RPM, NULLIF([BZA],0) AS BZA, NULLIF([LGD],0) AS LGD, NULLIF([KZJ],0) AS KZJ, NULLIF([TATA],0) AS TATA, NULLIF([BNDM],0) AS BNDM, NULLIF([BKSC],0) AS BKSC, NULLIF([SRC],0) AS SRC, NULLIF([BIA],0) AS BIA, NULLIF([BRC],0) AS BRC, NULLIF([BL],0) AS BL, NULLIF([TKD],0) AS TKD, NULLIF([ET],0) AS ET, NULLIF([NKJ],0) AS NKJ, NULLIF(([BSL] + [AQ] + [KYN] + [ASN] + [HWH] + [MGS] + [GMO] + [WAT] + [ANGL] + [GZB] + [LDH] + [JHS] + [CNB] + [AJJ] + [ED] + [RPM] + [BZA] + [LGD] + [KZJ] + [TATA] + [BNDM] + [BKSC] + [SRC] + [BIA] + [BRC] + [BL] + [TKD] + [ET] + [NKJ] ),0) AS TTL 
 FROM 
( 
SELECT Equipt, Shed 
FROM ERfailures WHERE Date &gt;= '12/01/2012' AND Date &lt;= '12/31/2012' AND loco_type = '3-Phase' AND classification = 'Loco'  
) x
PIVOT 
( 
COUNT(Shed) 
FOR Shed IN ([BSL],  [AQ],  [KYN],  [ASN],  [HWH],  [MGS],  [GMO],  [WAT],  [ANGL],  [GZB],  [LDH],  [JHS],  [CNB],  [AJJ],  [ED],  [RPM],  [BZA],  [LGD],  [KZJ],  [TATA],  [BNDM],  [BKSC],  [SRC],  [BIA],  [BRC],  [BL],  [TKD],  [ET],  [NKJ] ))  p">
</asp:SqlDataSource>

</form>
<p class="style5" style="text-align: center">
    <a href="mainpage.aspx">Back</a></p>
 </body>
 </html> 
```

现在我想将 2013 年 1 月的线路更改为

```
 FROM ERfailures WHERE Date &gt;= '01/01/2013' AND Date &lt;= '01/31/2013' AND loco_type = '3-Phase' AND classification = 'Loco' 
```

它给出了一个错误

```
 Input string was not in a correct format."
  Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.
 Exception Details: System.FormatException: Input string was not in a correct format.
 Stack Trace: 

[FormatException: Input string was not in a correct format.]
System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal) +9591147
System.Number.ParseInt32(String s, NumberStyles style, NumberFormatInfo info) +119
ASP.erequipfailurejanuary_aspx.__DataBind__control43(Object sender, EventArgs e) +106
System.Web.UI.Control.OnDataBinding(EventArgs e) +91
System.Web.UI.Control.DataBind(Boolean raiseOnDataBinding) +92
System.Web.UI.Control.DataBind() +15
System.Web.UI.Control.DataBindChildren() +201
System.Web.UI.Control.DataBind(Boolean raiseOnDataBinding) +101
System.Web.UI.Control.DataBind() +15
System.Web.UI.Control.DataBindChildren() +201
System.Web.UI.Control.DataBind(Boolean raiseOnDataBinding) +101
System.Web.UI.Control.DataBind() +15
System.Web.UI.WebControls.GridView.CreateRow(Int32 rowIndex, Int32 dataSourceIndex, DataControlRowType rowType, DataControlRowState rowState, Boolean dataBind, Object dataItem, DataControlField[] fields, TableRowCollection rows, PagedDataSource pagedDataSource) +166
System.Web.UI.WebControls.GridView.CreateChildControls(IEnumerable dataSource, Boolean dataBinding) +3896
System.Web.UI.WebControls.CompositeDataBoundControl.PerformDataBinding(IEnumerable data) +66
System.Web.UI.WebControls.GridView.PerformDataBinding(IEnumerable data) +14
System.Web.UI.WebControls.DataBoundControl.OnDataSourceViewSelectCallback(IEnumerable data) +128
System.Web.UI.DataSourceView.Select(DataSourceSelectArguments arguments, DataSourceViewSelectCallback callback) +33
System.Web.UI.WebControls.DataBoundControl.PerformSelect() +143
System.Web.UI.WebControls.BaseDataBoundControl.DataBind() +74
System.Web.UI.WebControls.GridView.DataBind() +4
System.Web.UI.WebControls.BaseDataBoundControl.EnsureDataBound() +66
System.Web.UI.WebControls.CompositeDataBoundControl.CreateChildControls() +75
System.Web.UI.Control.EnsureChildControls() +102
System.Web.UI.Control.PreRenderRecursiveInternal() +42
System.Web.UI.Control.PreRenderRecursiveInternal() +175
System.Web.UI.Control.PreRenderRecursiveInternal() +175
System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2496" 
```

如何解决这个问题？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:38:15.873

问题不在于您的查询。这是您要返回的值之一。看起来您的绑定目标中有一个列，该列需要一个数字，但正在获得一个非数字值。

基于：

> [FormatException: 输入字符串格式不正确。] System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal) +9591147 System.Number.ParseInt32(String s, NumberStyles style, NumberFormatInfo info ) +119 ASP.erequipfailurejanuary_aspx._ *DataBind* _control43(Object sender, EventArgs e)

# solr - 如何为每个过滤器查询复制 Solr 索引？

> ID：15112933
> 
> 赞同：1
> 
> 时间：2013-02-27T13:09:09.420
> 
> 标签：solr

我需要复制或复制 Solr 索引的子集。如何定义过滤器查询并仅复制或复制过滤器查询匹配的那些文档？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:00:43.240

我建议使用[SolrEntityProcessor](http://wiki.apache.org/solr/DataImportHandler#SolrEntityProcessor)，它是整个 Solr [DataImportHandler](http://wiki.apache.org/solr/DataImportHandler)过程的一部分，以提取所需的子集。SolrEntityProcessor 将允许您指定要执行的查询以选择文档，并允许您根据需要进行过滤。您将需要使用 Solr 3.6 或更高版本来利用 SolrEntityProcessor。

# android - KSOAP2-ANDROID - calling webservice method in a thread

> ID：15112935
> 
> 赞同：0
> 
> 时间：2013-02-27T13:09:10.817
> 
> 标签：android, android-ksoap2

I am implementing a web service call from within a thread in android, the first call goes successfully but every subsequent call returns this error every time.

```
 02-27 13:00:04.735: W/System.err(2681): java.net.ConnectException: 192.168.9.79/192.168.9.79:8080 - Network is unreachable 
```

Please what am I supposed to do?

# yii - Gii 模块生成器不生成某些文件

> ID：15112940
> 
> 赞同：1
> 
> 时间：2013-02-27T13:09:22.820
> 
> 标签：yii, gii

我希望 Gii 模块生成器为 'admin' 生成如下：

```
modules/admin/AdminModule.php
modules/admin/components
modules/admin/controllers/DefaultController.php
modules/admin/messages
modules/admin/models
modules/admin/views/default/index.php
modules/admin/views/layouts 
```

但它只是在下面生成列表：

```
modules\admin\AdminModule.php
modules\admin\controllers\DefaultController.php
modules\admin\views\default\index.php 
```

为什么？我怎样才能让它产生其余的？我的第一个期望是根据“Jeffrey Winesett 用 Yii 和 PHP 开发 Web 应用程序”一书。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T05:18:42.980

那本书是不久前出版的（可能是 v1.0），所以从那以后情况会发生变化。你遇到的可能就是一个很好的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T21:12:12.860

IT 似乎丢失的项目是没有任何内容的文件夹。我可能错了，但这是有道理的。

最良好的祝愿。

# java - javax.swing.tree.TreePath 选择到 XPath 查询字符串

> ID：15112943
> 
> 赞同：1
> 
> 时间：2013-02-27T13:09:24.787
> 
> 标签：java, swing, xpath, jtree, tree-nodes

如何从选定的 TreePath 中获取相应的 XPath 查询字符串？

```
a
|-b
  +-c
|-b
  +-d 
```

如果我选择“d”，我想得到类似 /a/b[2]/d

编辑：现在我想循环遍历 tree.getSelectionPath().toString().split(",") 但你会得到的信息是 /a/b/d - 你不知道 b 应该是 b [2]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:49:18.743

终于我明白了-也许其他人对解决方案感兴趣

```
 DefaultMutableTreeNode selected = (DefaultMutableTreeNode) tree.getSelectionPath().getLastPathComponent();

    String xpath = "";
    while (selected.getParent() != null) {
        int index = 1;
        String tag = selected.toString();
        DefaultMutableTreeNode selected2 = selected;
        while ((selected2 = selected2.getPreviousSibling()) != null) {
            if (tag.equals(selected2.toString())) index++;
        }

        xpath = "/" + tag + "[" + index + "]" + xpath;
        if (selected.getParent() == null) {
            selected = null;
        } else {
            selected = (DefaultMutableTreeNode) selected.getParent();
        }
    }

    LOG.info(xpath); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:02:34.270

如果您使用 getIndex(TreeNode) ，则不必一遍又一遍地遍历所有兄弟姐妹。请记住，树使用基于 0 的索引，因此您必须添加 +1 才能获得 xpath 索引。

此外，不需要 if(selected.getParent == null) 并且如果再次循环，则仅将服务器发送到潜在的 NullPointerException 。因此，您可以开始将代码缩小到此，以获得稍小的片段。

```
 String xpath = "";
    while (selected.getParent() != null) {                       
        TreeNode parent = selected.getParent();

        int index = parent.getIndex(selected) + 1;

        xpath = "/" + selected.toString() + "[" + index + "]" + xpath;

        selected = (DefaultMutableTreeNode) selected.getParent();
    } 
```

# css - Font-Awesome 重叠图标

> ID：15112949
> 
> 赞同：2
> 
> 时间：2013-02-27T13:09:48.350
> 
> 标签：css, twitter-bootstrap, font-awesome

我需要为我的排名应用程序使用图标。

我想从使用 icon-star-empty 的 5 个空星图标开始。

然后将它们与 icon-star 重叠以根据等级填充它们。

font-awesome 只有一半的空星，缺少一半的星。

有谁知道我是否可以重叠图标来实现我的目标？

编辑：这是 5 个完整的空星形图标的代码：

```
<i class="icon-star-empty icon-large"><i class="icon-star-empty icon-large"><i class="icon-star-empty icon-large"><i class="icon-star-empty icon-large"><i class="icon-star-empty icon-large"></i></i></i></i></i> 
```

我想把它和这个重叠：`<i class="icon-star-half icon-large"></i>` 10x

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T13:46:32.867

如果我理解正确，这就是您要执行的操作：

```
<div id="empty">
<img class="stars empty" src="http://cdn1.iconfinder.com/data/icons/icojoy/noshadow/standart/gif/24x24/001_17.gif">
</div>

<div id="half">
<img class="stars empty" src="http://cdn1.iconfinder.com/data/icons/icojoy/noshadow/standart/gif/24x24/001_17.gif">
<img class="stars half" src="http://cdn1.iconfinder.com/data/icons/icojoy/noshadow/standart/gif/24x24/001_16.gif">
</div>

<div id="full">
<img class="stars empty" src="http://cdn1.iconfinder.com/data/icons/icojoy/noshadow/standart/gif/24x24/001_17.gif">
<img class="stars half" src="http://cdn1.iconfinder.com/data/icons/icojoy/noshadow/standart/gif/24x24/001_16.gif">
<img class="stars starfull" src="http://cdn1.iconfinder.com/data/icons/icojoy/shadow/standart/png/24x24/001_15.png">
</div> 
```

我将每个案例都包含在一个 div 中。要以您尝试的方式覆盖图像，您需要分配一个绝对位置。这是一个快速的 CSS，它说明了它将如何为您工作：

```
div {
    position:relative;
    height:2em;
}
.stars {
    position:absolute;
    top:0;
    left:0;
} 
```

希望这是你想要做的。您可以将其应用于任何类型的 html 标记元素，并且可以多次应用，10 次，100 次 =)

**编辑：** 我再次阅读了您的问题和所有评论......我认为您可以通过更改背景和/或使用重叠背景而不是重叠 html 元素来更轻松地做到这一点。我从上面使用了您的代码并说明了我在小提琴上的意思：http: [//jsfiddle.net/38vHj/](http://jsfiddle.net/38vHj/)

无论如何，在javascript（或php或您想要处理信息的任何地方）中交换类要容易得多......然后使用特定的css类选择器。

**最终解决方案：** 所以是的……您可以重叠任何 html 标签元素！现在经过很多来回，我给你写了你想要的并将它发布在小提琴上：[jsfiddle.net/ddXDp/2](http://jsfiddle.net/ddXDp/2)

So the end result is an additional empty star element under the half star element. Now you just have to arrange and style the elements the way you wanted =)

# java - 如何在java中调用常量？

> ID：15112961
> 
> 赞同：3
> 
> 时间：2013-02-27T13:10:33.193
> 
> 标签：java, android, android-alertdialog

这个问题可能听起来有点奇怪，但是，我如何在 java 中调用常量？问题是我正在玩 AlertDialog android 类。由于此类具有受保护的构造函数，因此我无法在创建对话框的活动类中调用它们。因此，我创建了一个子 AlertDialog 类并将其构造函数公开，如下所示：

```
public class TestAlert extends AlertDialog {

public TestAlert(Context context) {
    super(context); 
}   

public TestAlert(Context context, int theme) {
    super(context, theme);      
}
} 
```

然后我创建了这样的对话框：

```
TestAlert ta = new TestAlert(con, AlertDialog.THEME_DEVICE_DEFAULT_DARK);
    ta.setMessage("Hello");     
    ta.show(); 
```

这里奇怪的是这段代码是错误的：`AlertDialog.THEME_DEVICE_DEFAULT_DARK` 我不知道为什么。

从有关 AlertDialog 类的[Android 开发人员](http://developer.android.com/reference/android/app/AlertDialog.html#THEME_DEVICE_DEFAULT_DARK)页面中，我们可以清楚地看到这些主题是常量。（公共，静态，最终）。因为它们是静态的，所以应该用类名调用它们，后跟一个点。他们也是公开的，所以应该没有问题。但奇怪的是我不能那样做。但是如果我传递数字而不是常量名称，它的工作原理是这样的：

```
new TestAlert(con, 2); 
```

ps：我知道我应该用它`AlertDialog.Builder`来建立对话。但是让我们称我在“探索”。

帮助了解。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T13:13:47.137

您不会“调用”常量，而是引用它们。您引用它们的方式对于`public static`像这样的常量很好，并且您的`TestAlert`构造函数正确地接受第二个参数作为`int`，所以这很好。

这些主题常量是在 API 级别 14 中添加的。如果您正在针对/针对较早的 API 进行编译，它们将不存在。

# internet-explorer - Mouseleave in jCarousel don't work in Opera and IE

> ID：15112962
> 
> 赞同：2
> 
> 时间：2013-02-27T13:10:34.470
> 
> 标签：internet-explorer, opera, jcarousel, mouseenter, mouseleave

I'm using [jCarousel](https://sorgalla.com/jcarousel/) plugin. When I hover an item in jCarousel I need a popup open over this item. I can't use simple hover, because the popup is bigger than jCarousel's height (and overflow hidden doesn't let me do this). So I clone this hidden popup (which is placed inside jCarousel's item) and append it to the body. Everything works great except in Opera and IE. The popup appears, but it doesn't leave on mouse leave. It leaves only when I hover other items in jCarousel and it appears again only when I twice hover the item. Well, weird behaviour. Can someone help me to sort it out?

HTML:

```
<ul id="logo_scroll" class="jcarousel-skin-tango">
    <li>
        <a href="">
            <img src="/i/delete/logo_1.png" width="111" height="58" alt="" />
            <span>Description 1</span>
        </a>
        <a href="" class="logo_zoom">
            <img src="/i/delete/logo_2_zoom.png" alt="">
            <span>Description 1</span>
        </a>
    </li>
    <li>
        <a href="">
            <img src="/i/delete/logo_2.png" width="111" height="58" alt="" />
            <span>Description 2</span>
        </a>
        <a href="" class="logo_zoom">
            <img src="/i/delete/logo_2_zoom.png" alt="">
            <span>Description 2</span>
        </a>
    </li>
    <li>
        <a href="">
            <img src="/i/delete/logo_3.png" width="111" height="58" alt="" />
            <span>Description 3</span>
        </a>
        <a href="" class="logo_zoom">
            <img src="/i/delete/logo_2_zoom.png" alt="">
            <span>Description 3</span>
        </a>
    </li>
</ul> 
```

jQuery:

```
$('.jcarousel-item').mouseenter(function(){
        var find_zoom = $(this).find('.logo_zoom')
            logo_pos = $(this).offset(),
            logo_zoom = find_zoom.clone().addClass('zoom_hovered').css('left', logo_pos.left - 10);
        $('body').append(logo_zoom);
        if($('.zoom_hovered').length > 1) {
            $('.zoom_hovered').remove();
        }
        else {
            $('.zoom_hovered').mouseenter(function(){
                $('body').append(logo_zoom);
            });
            $('.zoom_hovered').mouseleave(function(){
                $(this).remove();
            });
        }
    }); 
```

CSS for popup:

```
.logo_zoom {
display: none;
position: absolute;
bottom: 46px;
height: 119px;
width: 136px;
padding: 26px 18px 31px;
z-index: 3;
text-align: center;
line-height: 1.23em;
text-decoration: none;
background: transparent url('/i/bg_zoom.png') no-repeat 0 0;
color: #e3e5c3;
img {
    width: 116px;
    max-height: 75px;
    padding-bottom: 7px;
}
&.zoom_hovered {
    display: block;
} 
```

And if it matters it looks like this: [http://i17.photobucket.com/albums/b97/fiona_adam/Untitled-1-2.png](http://i17.photobucket.com/albums/b97/fiona_adam/Untitled-1-2.png)

# python - 数字化模拟信号

> ID：15112964
> 
> 赞同：10
> 
> 时间：2013-02-27T13:11:02.470
> 
> 标签：python, numpy, signal-processing

我有一组代表数字输出的 CSV 值。它是使用模拟示波器收集的，因此它不是完美的数字信号。我试图过滤掉数据以获得完美的数字信号来计算周期（可能会有所不同）。我还想定义我从这个过滤中得到的最大误差。

像这样的东西：

![在此处输入图像描述](../Images/c43ef13f69977b7da02311f7557072d6.png)

**主意**

应用数据的阈值。这是一个伪代码：

```
for data_point_raw in data_array:
    if data_point_raw < 0.8: data_point_perfect = LOW
    if data_point_raw > 2  : data_point_perfect = HIGH

else:
    #area between thresholds
    if previous_data_point_perfect == Low : data_point_perfect = LOW
    if previous_data_point_perfect == HIGH: data_point_perfect = HIGH 
```

有两个问题困扰着我。

1.  这似乎是数字信号处理中的一个常见问题，但是我还没有找到它的预定义标准函数。这是执行过滤的好方法吗？
2.  我将如何获得最大错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T14:46:44.897

这里有一些代码可能会有所帮助。

```
from __future__ import division

import numpy as np

def find_transition_times(t, y, threshold):
    """
    Given the input signal `y` with samples at times `t`,
    find the times where `y` increases through the value `threshold`.

    `t` and `y` must be 1-D numpy arrays.

    Linear interpolation is used to estimate the time `t` between
    samples at which the transitions occur.
    """
    # Find where y crosses the threshold (increasing).
    lower = y < threshold
    higher = y >= threshold
    transition_indices = np.where(lower[:-1] & higher[1:])[0]

    # Linearly interpolate the time values where the transition occurs.
    t0 = t[transition_indices]
    t1 = t[transition_indices + 1]
    y0 = y[transition_indices]
    y1 = y[transition_indices + 1]
    slope = (y1 - y0) / (t1 - t0)
    transition_times = t0 + (threshold - y0) / slope

    return transition_times

def periods(t, y, threshold):
    """
    Given the input signal `y` with samples at times `t`,
    find the time periods between the times at which the
    signal `y` increases through the value `threshold`.

    `t` and `y` must be 1-D numpy arrays.
    """
    transition_times = find_transition_times(t, y, threshold)
    deltas = np.diff(transition_times)
    return deltas

if __name__ == "__main__":
    import matplotlib.pyplot as plt

    # Time samples
    t = np.linspace(0, 50, 501)
    # Use a noisy time to generate a noisy y.
    tn = t + 0.05 * np.random.rand(t.size)
    y = 0.6 * ( 1 + np.sin(tn) + (1./3) * np.sin(3*tn) + (1./5) * np.sin(5*tn) +
               (1./7) * np.sin(7*tn) + (1./9) * np.sin(9*tn))

    threshold = 0.5
    deltas = periods(t, y, threshold)
    print("Measured periods at threshold %g:" % threshold)
    print(deltas)
    print("Min:  %.5g" % deltas.min())
    print("Max:  %.5g" % deltas.max())
    print("Mean: %.5g" % deltas.mean())
    print("Std dev: %.5g" % deltas.std())

    trans_times = find_transition_times(t, y, threshold)

    plt.plot(t, y)
    plt.plot(trans_times, threshold * np.ones_like(trans_times), 'ro-')
    plt.show() 
```

输出：

```
Measured periods at threshold 0.5:
[ 6.29283207  6.29118893  6.27425846  6.29580066  6.28310224  6.30335003]
Min:  6.2743
Max:  6.3034
Mean: 6.2901
Std dev: 0.0092793 
```

![阴谋](../Images/4c0e9ba268bb20ef01b164320d98443b.png)

您可以使用`numpy.histogram`和/或`matplotlib.pyplot.hist`进一步分析`periods(t, y, threshold)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T14:36:47.293

这不是您问题的答案，只是可能有帮助的建议。我在这里写它是因为我无法将图像放在评论中。

**我认为您应该在进行任何处理之前以某种方式规范化数据。**

标准化到 0...1 的范围后，您应该应用您的过滤器。

![在此处输入图像描述](../Images/888c68eb7b1f7bb0d8066ccecc9a2338.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T13:17:41.450

如果你真的只对周期感兴趣，你可以绘制傅里叶变换，你会在信号频率出现的地方有一个峰值（所以你有周期）。傅里叶域中的峰值越宽，周期测量的误差就越大

```
import numpy as np

data = np.asarray(my_data)

np.fft.fft(data) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T14:23:21.343

您的过滤很好，它与施密特触发器基本相同，但您可能遇到的主要问题是速度。使用 Numpy 的好处是它可以和 C 一样快，而您必须在每个元素上迭代一次。

您可以使用 SciPy 的中值滤波器实现类似的效果。以下应该达到类似的结果（并且不依赖于任何幅度）：

```
filtered = scipy.signal.medfilt(raw)
filtered = numpy.where(filtered > numpy.mean(filtered), 1, 0) 
```

您可以使用 调整中值过滤的强度`medfilt(raw, n_samples)`，`n_samples`默认为 3。

至于错误，那将是非常主观的。一种方法是在不过滤的情况下对信号进行离散化，然后比较差异。例如：

```
discrete = numpy.where(raw > numpy.mean(raw), 1, 0)
errors = np.count_nonzero(filtered != discrete)
error_rate = errors / len(discrete) 
```

# postgresql - 从 PostgreSQL 导出“创建聚合”函数

> ID：15112971
> 
> 赞同：2
> 
> 时间：2013-02-27T13:11:24.730
> 
> 标签：postgresql, aggregate-functions, pgadmin

我创建了一些用户定义的聚合函数。但是，我看不到在 pgAdmin 中导出它们的方法。或者任何其他方式。

我可以看到底层功能，但看不到`CREATE AGGREGATE`定义。

SquirrelSQL 也没有显示任何有用的东西！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T18:13:19.830

很可能您需要在选项中启用聚合的显示：
*文件 -> 选项 -> 浏览器 -> 显示*

刷新视图后，您会`Aggregates`在对象浏览器中获得一个单独的节点：

![对象浏览器中的聚合节点](../Images/772b07bda9b2d4d07cfb211fa712e220.png)

所选聚合的逆向工程`CREATE`脚本显示在 SQL 窗格的右侧。

# php - 验证后 Codeigniter 在编辑表单中保留 id

> ID：15112975
> 
> 赞同：0
> 
> 时间：2013-02-27T13:11:43.677
> 
> 标签：php, html, codeigniter, validation

我在视图中使用相同的表单在 codeigniter 视图中编辑和添加记录。在添加新记录方面，一切都很好。

问题出在编辑方面。下面是我的视图文件。

主要问题是保留我正在编辑的记录的 ID。当表单验证失败时，ID 也会丢失。ID丢失时，控制器不知道要编辑哪个记录？

有人有更好的方法来解决这个问题。

```
if (isset($add_faq) || isset($edit_faq)) {
$question = isset($faq->question) ? $faq->question : "";
$answer = isset($faq->answer) ? $faq->answer : "";
if (isset($add_faq)) {
    echo "<h4>Add new FAQ</h4>";
    echo form_open('admin/faq/saveNewFaq', 'id="login"');
} else {
    $faqId = isset($faq->id) ? $faq->id : "";
    echo "<h4>Edit FAQ</h4>";
    echo form_open('admin/faq/saveEditFaq', 'id="login"');
    echo '<ul><li>';
    echo form_input('faqId', set_value('faqId', $faqId), 'disabled');
    echo '</li>';
}
echo '<li>';
echo form_label('Question', 'question');
echo form_input('question', set_value('question', $question), 'placeholder="Faq Question"');
echo form_error('question', '<div class="error">', '</div>');
echo '</li>';

echo '<li>';
echo form_label('Answer', 'answer');
echo form_textarea('answer', set_value('answer', $answer), 'placeholder="Faq Answer"');
echo form_error('answer', '<div class="error">', '</div>');
echo '</li>';

echo '<li>';
echo form_submit('submit', 'Add New', 'id = "submit_reg"');
echo '</li></ul>';
echo form_close(); 
```

# android - Android 位置和 Google 设置

> ID：15112976
> 
> 赞同：0
> 
> 时间：2013-02-27T13:11:48.643
> 
> 标签：android, google-maps, android-maps, google-maps-android-api-2

所以我已经使用自己的手持设备开发了这个应用程序几个星期了，今天我试图让谷歌地图以我的应用程序中的当前用户位置为中心

```
map.setMyLocationEnabled(true); //Locate the current position of the user 
```

上面的 setLocationEnabled(true) 通常应该在地图上显示用户的位置，当按下 GPS 按钮时，它会放大它。但是，在我添加以下代码后，它不再起作用，它不再显示用户的位置，而且我还注意到“Google 设置”已安装到我的设备上，环顾四周后，它是 Google 的更新，所以它可能不会成为代码本身。但我不知道谷歌设置是否是造成这种情况的原因。

```
LocationManager service = (LocationManager) getSystemService(LOCATION_SERVICE);
    Criteria criteria = new Criteria();
    String provider = service.getBestProvider(criteria, false);
    Location location = service.getLastKnownLocation(provider);
    LatLng userLocation = new LatLng(location.getLatitude(),location.getLongitude());
    map.moveCamera(CameraUpdateFactory.newLatLngZoom(userLocation, 15)); 
```

即使在注释掉这段代码之后，问题仍然存在。我不知道如何解决这个问题，我希望有人可以帮助我。我不确定这是否与代码本身或仅与我的设备有关，即使它在过去几周内一直在工作并且它没有给出任何错误或警告，它也根本无法获取用户的位置即使按下我地图上的 GPS 按钮也不会出现任何错误或警告。

编辑：我尝试为这个应用程序使用我的代码的旧工作版本，但它仍然无法让用户位置出现在地图上。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:18:24.380

为什么你不使用：

`map.animateCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(map.getMyLocation().getLatitude(),map.getMyLocation().getLongitude()), 15));`

地图存储您的实际位置，因此您不需要`LocationManager`上课。

# php - 您如何确定数据库资源类型？

> ID：15112984
> 
> 赞同：1
> 
> 时间：2013-02-27T13:12:15.657
> 
> 标签：php, mysql, postgresql, resources

我有一个 db 资源的链接，但在某些情况下，我得到一个 mysql 链接，而在其他一些情况下，函数得到一个 postgresql 资源类型。

根据连接类型，我需要做不同的事情。如何测试连接的类型？

在某些情况下我需要使用`$res = pg_query($link, $sqlcmd)` ，而在其他一些情况下我需要使用类似`mysql_query`.

有什么建议么？

我已经试过`get_class`了`get_type`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T13:18:30.837

你可能想看看[`get_resource_type()`](http://www.php.net/manual/en/function.get-resource-type.php)。它返回[资源类型](http://php.net/manual/en/resource.php)。

例如：

```
$res = mysql_query($query);
if(get_resource_type($res) == 'mysql result') {
    // mysql result
} elseif(get_resource_type($res) == 'pgsql result') {
    // pgsql result
} 
```

# json - 对 Jboss7.1.1.Final 进行配置以通过 Http Post 发送大尺寸 JSON 数据

> ID：15112985
> 
> 赞同：0
> 
> 时间：2013-02-27T13:12:17.347
> 
> 标签：json, http-post, jboss7.x, server.xml

我的 json 大小很大，当它超过 5kb 时，它会抛出异常

```
java.net.SocketException: Connection reset at java.net.SocketInputStream.read(SocketInputStream.java:168) at
    org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:149) at
    org.apache.http.impl.io.SocketInputBuffer.fillBuffer(SocketInputBuffer.java:110) at 
```

[http://geekswithblogs.net/frankw/archive/2008/08/05/how-to-configure-maxjsonlength-in-asp.net-ajax-applications.aspx](http://geekswithblogs.net/frankw/archive/2008/08/05/how-to-configure-maxjsonlength-in-asp.net-ajax-applications.aspx)

根据上面的链接，有以下格式

```
<system.web.extensions>
    <scripting>
      <webServices>
    <jsonSerialization maxJsonLength="500000">
    </jsonSerialization>
      </webServices>
    </scripting>
</system.web.extensions> 
```

我们可以设置 maxJsonLength 以同样的方式在 Jboss7.1.1.Final 中是否需要做任何配置以最大化 json 的大小以接受大 json？如果是，请提供语法。此外，我浏览了一些有关 maxpostsize 的链接，这会有所帮助吗？主要问题是当客户端通过 HttpPost 发送大尺寸的 json 数据时，它会在使用 Jboss7.1.1.Final 时抛出上述异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:44:56.590

在 Jboss7.1.1.Final 中，我们需要在standalone.xml 中添加以下条目

```
<system-properties>
     <property name="org.apache.coyote.http11.Http11Protocol.MAX_HEADER_SIZE" value="1000"/>
</system-properties> 
```

# jquery - Select2 初始化选择

> ID：15112988
> 
> 赞同：4
> 
> 时间：2013-02-27T13:12:23.440
> 
> 标签：jquery, jquery-select2

我在使用 ajax 调用设置方法 initSelection 时遇到问题，我返回“未定义”。我检查并ajax调用返回正确的结果..我不明白如何设置回调方法以确保您选择'预设值。

```
 function mediaFormatResult(media) {
        var markup = "<div class='media-title'>" + media.name + ", " + media.prov + " (" + media.region + ")</div>";

        return markup;
    }

    function mediaFormatSelection(media) {
        return media.name +", " + media.prov + " (" + media.region + ")";
    }
    $field = $('#comune');
    $($field).select2({
        placeholder: "Seleziona il tuo comune",
        minimumInputLength: 3,
        initSelection: function(element, callback) {

        return $.ajax({
            type: "POST",
            url: "myurl",
            dataType: 'json',
            data: { id: (element.val())},
            success: function(data){
                //results: data.results;
            }
        }).done(function(data) { 
            //console.log(data);
            callback(data);
        });

        },
        ajax: { 
            quietMillis: 100,
            url: "myurl",
            dataType: 'json',
            type: 'POST',
            data: function (term, page) {
                return {
                    q: term,
                    page_limit: 10
                };
            },
            results: function (data, page) {
                return {results: data.results};
            }
        },
        formatResult: mediaFormatResult, 
        formatSelection: mediaFormatSelection, 
        formatNoMatches: function () { return "Nessun risultato trovato!";},
        formatSearching: function () { return "Ricerco.."; },
        formatInputTooShort: function(input, min) {return "Inserire "+ (min - input.length) + " caratteri.";},
        dropdownCssClass: "bigdrop",
    }); 
```

有什么不对吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-02-10T09:16:10.060

注意，你发送给回调函数的数据，需要是一个对象，有**id**和**text**属性。

这对我有用：

```
initSelection: function(element, callback) {
    var id;
    id = $(element).val();
    if (id !== "") {
      return $.ajax({
        url: url,
        type: "POST",
        dataType: "json",
        data: {
          id: id
        }
      }).done(function(data) {
        var results;
        results = [];
        results.push({
          id: data.id,
          text: data.name
        });
        callback(results[0]);
      });
    }
  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T20:39:26.823

这里的解决方法：

```
initSelection: function(element, callback) {

        return $.ajax({
            type: "POST",
            url: path,
            dataType: 'json',
            data: { id: (element.val())},
            success: function(data){

            }
        }) 
```

必须注意数组是在控制器中创建的，它应该是这样的：

```
foreach ($entities as $member) {
        $json['id'] = $member->getId();
        $json['name'] = $member->getComune();
        $json['region'] = $member->getRegione()->getRegione();
        $json['prov'] = $member->getProvincia()->getSigla();
}

        $result = $json;
        return json_encode($result); 
```

# asp.net - 如何在gridview中插入记录

> ID：15112994
> 
> 赞同：0
> 
> 时间：2013-02-27T13:12:43.200
> 
> 标签：asp.net, vb.net

任何人都可以帮助我如何在 asp 中的 gridview 中添加新记录，这是我的代码：

```
Partial Class _Default
    Inherits System.Web.UI.Page
    Dim drow As DataRow
    Dim dt As New DataTable
    Dim x As Integer

    Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
        drow = dt.NewRow
        drow("fname") = TextBox1.Text
        drow("mname") = TextBox2.Text
        drow("lname") = TextBox3.Text
        dt.Rows.Add(drow)

        GridView1.DataSource = dt
        GridView1.DataBind()
    End Sub

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        If Page.IsPostBack = False Then
            binds()
        End If
    End Sub
    Protected Sub binds()

        dt.Columns.Add("fname")
        dt.Columns.Add("mname")
        dt.Columns.Add("lname")
        drow = dt.NewRow
        drow("fname") = TextBox1.Text
        drow("mname") = TextBox2.Text
        drow("lname") = TextBox3.Text
        dt.Rows.Add(drow)

        GridView1.DataSource = dt
        GridView1.DataBind()
    End Sub
End Class 
```

当我单击按钮时，错误表明 fname 不属于该表。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:18:47.400

原因是所有对象都在页面生命周期结束时被释放，包括 your`DataTable`和`DataRow`ineteger。它们将在每次回发时使用其默认值进行初始化。

但是你有这个初始化代码`Page_Load`：

```
If Page.IsPostBack = False
    binds() ' which creates the table and adds the columns '
End If 
```

解决方案不是使用字段，而是使用局部变量。

```
Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
    binds()
End Sub

Private Sub binds()
    Dim drow As DataRow
    Dim dt As New DataTable
    dt.Columns.Add("fname")
    dt.Columns.Add("mname")
    dt.Columns.Add("lname")
    drow = dt.NewRow
    drow("fname") = TextBox1.Text
    drow("mname") = TextBox2.Text
    drow("lname") = TextBox3.Text
    dt.Rows.Add(drow)

    GridView1.DataSource = dt
    GridView1.DataBind()
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:09:29.820

这是我的代码。

部分类 _Default

```
Inherits System.Web.UI.Page
Dim dcl As DataRowCollection
Dim drow As DataRow
Dim dt As New DataTable

Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
    binds()

End Sub

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Page.IsPostBack = False Then
        addcolumns()
        GridView1.DataSource = dt
        GridView1.DataBind()
    End If
End Sub

Private Sub addcolumns()

    dt.Columns.Add("fname")
    dt.Columns.Add("mname")
    dt.Columns.Add("lname")
    Session("dtInSession") = dt

End Sub
Protected Sub binds()

    If Session("dtInSession") IsNot Nothing Then
        dt = Session("dtInSession")
    End If

    drow = dt.NewRow
    drow("fname") = TextBox1.Text
    drow("mname") = TextBox2.Text
    drow("lname") = TextBox3.Text
    dt.Rows.Add(drow)

    Session("dtInSession") = dt
    GridView1.DataSource = dt
    GridView1.DataBind()

End Sub 
```

结束类

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-03-25T16:40:43.003

```
## Heading ##
    public DataTable SearchStudents(string studFirstname)
    {
        logOBj.conn.Close();
        logOBj.conn.Open();

       logOBj.DA = new SqlDataAdapter("Select * From STUDENT where studFirstname LIKE '%" + studFirstname + "%'", logOBj.conn);

       logOBj.DT = new DataTable();
       logOBj.DA.Fill(logOBj.DT);//data adapter fills the datatable

       return logOBj.DT;
    } 
```

# json - 如何在 jqgrid 上加载完整的动态数组（包括表头）

> ID：15112995
> 
> 赞同：0
> 
> 时间：2013-02-27T13:12:46.460
> 
> 标签：json, symfony, twig, jqgrid-php, jqgrid

我可以成功地将数据加载到表中。但我需要将此数据加载到 Jqgrid 中。这所有数据都来自动态数组（包括表头）。我尝试了它，但我仍然无法做到这一点。任何人都可以帮忙吗？

我使用了 Jqgrid 4.0

这是我的数据加载到表的代码 ///////////////////////////////

```
<table id="jqTable" border="1" style="margin-top: 10px;">
    <thead>
        <tr>
            <th style="min-width: 50px;"></th>
            {% for keys,values in tableHead %}

                <th style="min-width: 50px;"><a href="#" onclick="loadResourceSummary({{projectIds[values['unit_code']]}},null,null)">{{values['unit_code']}}</a></th>

            {% endfor %}
            <th style="min-width: 60px;">{{'Total'}}</th>
        </tr>
    </thead>

    {% for keys,values in matrix %}
        <tr>
            <td><a href="#" onclick="viewSummary({{userIds[keys]}})">{{full_names[keys]}}</a></td>
            {% for key,value in values %}
                {% if value=="-"%}
                    <td style="text-align: right;">{{value}}</td>
                {% else%}
                    <td style="text-align: right;"><a href="#" onclick="loadRRFSummary({{projectIds[key]}},{{userIds[keys]}});"> {{value ~" %"}} </a></td>
                {%endif%}
            {% endfor %}
            <td bgcolor="#dcdcdc" style="text-align: right; font-weight: bold;">{{(totalAllocationOfTheUser[keys]) ~" %"}}</td>
        </tr>
    {% endfor %}
    <tr>
        <td><strong>{{'Total'}}</strong></td>
        {% for keys,values in totalAllocationOfTheProject %}
            <td bgcolor="#dcdcdc" style="text-align: right; font-weight: bold;">
                {{values}}

            </td>
        {% endfor %}
        <td style="text-align: right; font-weight: bold;"><span style="color: #a52a2a;">{{grandTotal}}</span></td>
    </tr>
</table> 
```

/////////////////////////////这是树枝文件的返回数组 /////// ///////////////////////

```
$tableHead=$userDAO->getSelectedProjectsForMatrix($selectedProjects);
        return $this->render('AdminBundle:User:ProjectsMatrix.html.twig', array(
            'matrix'=>$matrix['matrix'], 'tableHead'=>$tableHead,'full_names'=>$matrix['userWithFullName'],
            'totalAllocationOfTheUser'=> $matrix['totalAllocationOfTheUser'],'totalAllocationOfTheProject'=>$matrix['totalAllocationOfTheProject'],
            'form' => $form->createView(),'date'=>$date,'userIds'=>$matrix['userIds'],'projectIds'=>$matrix['projectIds'],'grandTotal'=>$matrix['grandTotal']
        )); 
```

# css - 为什么在这种情况下，子元素跨越其父“块格式化上下文”的边界？

> ID：15112997
> 
> 赞同：0
> 
> 时间：2013-02-27T13:12:49.877
> 
> 标签：css

在 CSS Block Formatting Context 如何工作的答案中[*？*](https://stackoverflow.com/questions/6196725/how-does-the-css-block-formatting-context-work)作者提到：

> 在块格式化上下文中，每个框的左外边缘接触包含块的左边缘（对于从右到左的格式化，右边缘接触）
> 
> ### 上面一行的意思是：
> 
> 因为一个盒子只能是矩形而不是不规则形状，这意味着两个浮动（甚至一个旁边）之间的新块格式化上下文不会环绕相邻的侧浮动。**内部的子框只能延伸到接触其父母的左（或 RTL 中的右）边缘**。

我想验证这一点，所以我创建了[这个 JS Bin 测试用例](http://jsbin.com/ufekuc/1)：

## HTML

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
  <div class="table-cell">
    <div class="negative-margin">
    </div>
  </div>
</body>
</html> 
```

## CSS

```
body {
  padding: 50px;  
}

.table-cell {
  display: table-cell;
  border: 1px solid black;
  width: 200px;
  height: 200px;  
}

.negative-margin {
  border: 1px solid blue;
  width: 100px;
  height: 100px;
  background: #666;
  margin-left: -20px;
} 
```

但是可以看出，包含的元素正在穿过其容器的左边缘：

![测试用例](../Images/2c6706b87d5bae2a30870adc26b5d0d2.png)

有人可以解释一下我在这里缺少什么吗？

# 更新 1

有人提到这是因为负边距而发生的。通过对上述问题的回答，我期望负边距不会将包含的元素移到其容器之外。参考：

> 浮动、绝对定位的元素、**不是块框的块容器（例如内联块、表格单元格和表格标题）**，以及具有“溢出”而不是“可见”的块框（除非该值已被传播到视口）为其内容建立新的块格式化上下文。

并且`.table-cell`元素满足这个定义。那么为什么`.negative-margin`越过它的父母的边界呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:26:28.843

您的 margin-left 导致内部 div 跨越边界......

```
margin-left: -20px; 
```

# javascript - 我将如何制作具有重叠区域的堆叠面积图？

> ID：15112998
> 
> 赞同：0
> 
> 时间：2013-02-27T13:12:53.323
> 
> 标签：javascript, charts, d3.js, stacked-area-chart

我想制作一个像这样的面积图： ![](../Images/32190a7ff1c4734f8cd9c74f6a0f6f4f.png) 使用[d3.js](http://www.d3js.org) javascript 库。这可能吗？

我知道使用 Google Visualization API 可以做到这一点，请参阅[这个已回答的问题](https://stackoverflow.com/q/10984981/903186)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:21:08.970

是的，这是可能的。您只需要一个定义每个块的路径元素，并指定[填充不透明度](http://www.w3.org/TR/SVG/painting.html#FillOpacityProperty)