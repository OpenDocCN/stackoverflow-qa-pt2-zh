# StackOverflow 问答 12572000-12572999

# susy-compass - 关于 Susy 的基本问题和奇怪的行为 span-columns()

> ID：12572003
> 
> 赞同：0
> 
> 时间：2012-09-24T19:57:47.777
> 
> 标签：susy-compass

在让 Susy 在 Codekit 中运行之后，我终于能够更彻底地尝试了。我对整个网格和 Susy 的事情一开始就是正确的。因此，我尝试将 Susy 网格应用于我为锻炼目的而尝试构建的最近网站的设计。但是，关于 Susys 行为以及在一些边缘案例中的最佳实践出现了很多问题，这些案例在 Susy 主页上的场景中没有涵盖。我的标记看起来像这样：

```
<div class="wrapper">

    <header role="banner">
        <div class="finish"></div>

        <a href"/"><a>
        <nav role="navigation">
            <ul>
                <li><a href="#kunden"></a>Kunden</li>
                <li><a href="#projekte"></a>Projekte</li>
                <li><a href="#leistungen"></a>Leistungen</li>
                <li><a href="#agentur"></a>Agentur</li>
                <li><a href="#kontakt"></a>Kontakt</li>
            </ul>
        </nav>
    </header>

    <aside class="intro testcol">
        <h3>Headline 3</h3>
        <p>Ferferiandus ma plibus voluptas assi dis peria conectati dus que mi, sundae seque maximod ipsunt ut opta eture sus dit, nos iligentiis rentin res quam dendi officiae quas esequam, volup- tibea sit, simpore pedis eum explani magnatu mquias dolorio cus aut modolectur sequis nullescid ut veni doluptaturem dolorupit estorpo raectatus.</p>
    </aside>

    <section name="projekte" class="test" role="main">
        <hgroup>
        <h1>Unsere Projekte</h1>
            <h2>Subtitle</h2>
        </hgroup>

        <ul class="moodlegrid">
            <li><a href=""></a><img class="projekteimage" title="Projekte" src="img/projekte.jpg" alt="Projekte" width="275" height="178" /></li>
            <li><a href=""></a><img class="projekteimage" title="Projekte" src="img/projekte.jpg" alt="Projekte" width="275" height="178" /></li>
            <li><a href=""></a><img class="projekteimage" title="Projekte" src="img/projekte.jpg" alt="Projekte" width="275" height="178" /></li>
            <li><a href=""></a><img class="projekteimage" title="Projekte" src="img/projekte.jpg" alt="Projekte" width="275" height="178" /></li>
            <li><a href=""></a><img class="projekteimage" title="Projekte" src="img/projekte.jpg" alt="Projekte" width="275" height="178" /></li>
            <li><a href=""></a><img class="projekteimage" title="Projekte" src="img/projekte.jpg" alt="Projekte" width="275" height="178" /></li>
            <li><a href=""></a><img class="projekteimage" title="Projekte" src="img/projekte.jpg" alt="Projekte" width="275" height="178" /></li>
            <li><a href=""></a><img class="projekteimage" title="Projekte" src="img/projekte.jpg" alt="Projekte" width="275" height="178" /></li>
            <li><a href=""></a><img class="projekteimage" title="Projekte" src="img/projekte.jpg" alt="Projekte" width="275" height="178" /></li>           
        </ul>
    </section>
</div> 
```

这导致（对不起，由于我的状态，我还不允许发布图片 - 但在这种情况下，它们是必不可少的，所以我放置了一个直接链接）：

[https://dl.dropbox.com/u/8578/sample.png](https://dl.dropbox.com/u/8578/sample.png)

所以一个 div 正在包装页面的内容。标题带有徽标（未在下面的屏幕截图中显示）和导航。然后是那个浮动的灰色盒子的旁白元素。在几个部分（如登记卡）下方放置。我在屏幕截图中只包含了一部分。每张登记卡都应覆盖整个屏幕的宽度。在每张登记卡之间，背景图像可以透过。背景图片使用@include background-size(cover) 放置。作为旁注在每张登记卡中应该有一个左右各约eg10%的出血，所以内容只包含在中心的80%中。每个部分的内容区域包含 li 矩阵（如上面的 html 代码中）或 1 到 3 个放置内容 div 的列。到目前为止我使用的 css 的几个部分：

```
$base-font-size: 17px;
$base-line-height: $base-font-size * 1.5;

$total-columns: 20;
$column-width: 4em;
$gutter-width: 1em;
$grid-padding: $gutter-width;

@mixin bleed($padding: $grid-padding, $sides: left right) {
    @if $sides == 'all' {
        margin: - $padding;
        padding: $padding;
    } 
    @else {
        @each $side in $sides {
            margin-#{$side}: - $padding;
                padding-#{$side}: $padding;
            }
        }
}

* { 
    @include box-sizing(border-box);
}

body {
background: url('../img/body-bg.jpg') no-repeat center center fixed;
@include background-size(cover);
color:#333;
padding:0;
margin:0;
width: 100%;
font-size: $base-font-size;
font-family: "Signika", Georgia, serif;
@include establish-baseline;
}

.wrapper {
    width:100%;
    @include container;
    @include susy-grid-background;
    @include bleed;
} 
```

在末尾的包装器中，旁边和部分都驻留。基本问题如下：

a) 首先是关于最佳实践的一般性问题。在所描述的示例中，将一个容器放置在包装器 div 中是否就足够了，还是创建多个容器更好，并且如果放置在整个文档中，这些容器是否会相互对齐？是指一个容器用于全部或一个容器用于标题，一个用于旁边元素，一个用于每个部分？

b) 为 side 元素创建一个容器是否考虑周到。意思是左边一栏内容区域一出血，右边一出血？或者在那种情况下使用容器会不会很不利？

c）查看这些部分基本上可以让一个部分填满屏幕的整个宽度，在每一侧都有一个 x 列的流血（用 pad() 放置？）并在中间居中“内容”区域分成 x 列（带有跨度列）。

d) 如屏幕截图所示；在每个部分的顶部有两个相互指向的箭头。每个箭头由一个包含文本的内容框以及一个包含三角形和矩形的前后伪类组成。后者应拉伸到每一侧的屏幕一侧。通过将每个元素放在一列中是否有意义并且可以获得仅响应式 css 的解决方案：

col1 col2 col3 col4 col5 矩形内容三角形内容矩形左右

通过分配 100% 的宽度，每个元素都应该填满它所在的列的整个宽度，同时也具有响应性。如果这个想法可行，是否有必要为每个部分创建两个容器（一个用于箭头，一个用于下方有出血的内容）或者一个就足够了？

e) 最后一个问题是关于申请的。如果我使用：

```
.moodlegrid li{
    @include column-count(3);
    @include column-gap(1em);
    @include inline-list;
    } 
```

它看起来像一开始的屏幕截图。如果我使用 Susy mixins，我会得到以下信息：

```
.moodlegrid li{
    @include span-columns(4,12);
    @include span-columns(4,12);
    @include span-columns(4 omega,12);
    @include inline-list;
    } 
```

结果如下所示：

[https://dl.dropbox.com/u/8578/result2.png](https://dl.dropbox.com/u/8578/result2.png)

好吧，这就是现在。我仍然有点困惑和不确定最佳实践，以及到目前为止我是否做得很好。;) 任何提示和建议将不胜感激。提前感谢拉尔夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T06:28:38.143

a) 我尽可能使用一个容器，但在某些情况下，多个容器可能有用（并且会对齐）。

b) 我不明白这个问题。我会简单地使用`squish()`在左侧和右侧添加空间。

c) 我不知道你在问什么。是的，您可以让元素跨越整个屏幕。您可以通过在结构元素中使用多个容器*（*而不是一个包装所有容器）来完成此操作，或者使用非常大的`bleed`. 你是这个意思吗？

d) 我会简单地在一个的左侧和另一个的右侧添加一个大出血。然后为三角形使用生成的内容。你不需要你的出血来响应屏幕的边缘——你可以简单地溢出那个边缘并`overflow-x: hidden;`在需要的地方添加以防止滚动条出现。

e) 这段代码没有任何意义。也许你想要这个？

```
.moodlegrid li {
  @include span-columns(4,12);
  @include nth-omega(3n);
} 
```

即便如此，看起来您可能会遇到浮动清算或保证金崩溃或其他不相关的问题。

如果您单独询问每个问题并为每个问题创建特定的代码示例，而不是将它们与一个大而复杂的示例混为一谈，这将有助于将来。这也将帮助您自己调试问题。简化问题，使其易于管理，然后尝试您的不同想法。

# php - 并行运行 PHP/CURL

> ID：12572005
> 
> 赞同：0
> 
> 时间：2012-09-24T19:57:48.733
> 
> 标签：php, curl

我有一个包含对 CURL 的调用的函数。该函数完成运行大约需要10秒，通过点击包含该函数的页面调用运行。

现在，如果我有另一个函数`wget`每秒调用一次上述函数（通过点击/页面），后续调用是否会与仍在进行 10 秒处理和卷曲的先前调用同时运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:59:04.637

如果您使用的是 Apache，这将取决于您准备好的 prefork 进程的数量。您的 Web 服务器控制允许打开多少 HTTP 连接。

# java - 尝试从 Java Applet 保存网络摄像头图像时出现 NullPointerException

> ID：12572006
> 
> 赞同：2
> 
> 时间：2012-09-24T19:58:16.147
> 
> 标签：java

> **可能重复：**
> [尝试从网络摄像头捕获图像时出现 NullPointerException](https://stackoverflow.com/questions/12571290/nullpointerexception-when-try-to-capture-imagem-from-webcam)

我看到了这个不错的[网络摄像头小程序](http://webcamapplet.sourceforge.net/how.html)，但我是 java 的初学者，我正在尝试放另一个`JButton`调用`Capture`，它将通过网络摄像头拍照并保存在特定路径中。

**我的捕获按钮的代码**

```
startC.addActionListener(new ActionListener()
        {           
            @Override
            public void actionPerformed(ActionEvent e)
            {               
                  // Grab a frame                 
                 FrameGrabbingControl fgc = new FrameGrabbingControl() {

                        @Override
                        public Component getControlComponent() {
                            // TODO Auto-generated method stub
                            return null;
                        }

                        @Override
                        public Buffer grabFrame() {
                            // TODO Auto-generated method stub
                            return null;
                        }
                    };  
                  player.getControl("javax.media.control.FrameGrabbingControl");    
                  buf = fgc.grabFrame();                  

                  // Convert it to an image               
                  BufferToImage btoi = new BufferToImage((VideoFormat)buf.getFormat());
                  img = btoi.createImage(buf);       

                  // show the image 
                  //imgpanel.setImage(img);       

                  // save image 
                  try {
                    saveJPG(img,"c:\\test.jpg");
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
            }
        }); 
```

**保存 JPG 方法**

```
 public static void saveJPG(Image img, String s) throws IOException    
      {       
        BufferedImage bi = new BufferedImage(img.getWidth(null), img.getHeight(null), BufferedImage.TYPE_INT_RGB);      
        File outputfile = new File("C:\\saved.jpg");
        ImageIO.write(bi, "png", outputfile);
} 
```

**错误**

```
Exception in thread "AWT-EventQueue-1" java.lang.NullPointerException
    at com.colorfulwolf.webcamapplet.WebcamApplet$6.actionPerformed(WebcamApplet.java:524)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

在我的第 524 行中，我有代码

```
BufferToImage btoi = new BufferToImage((VideoFormat)buf.getFormat()); 
```

**FGC声明**

```
FrameGrabbingControl fgc = new FrameGrabbingControl() {                     
                        @Override
                        public Component getControlComponent() {
                            // TODO Auto-generated method stub
                            return null;
                        }

                        @Override
                        public Buffer grabFrame() {
                            // TODO Auto-generated method stub
                            return null;
                        }
                    }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:27:58.170

您的应用程序抛出 NullPointerException，因为您尝试调用空对象的方法，`buf`.

即使您声明`buf = fgc.grabFrame();`，您的`buf`对象也是 null，因为`fgc.grabFrame()`它返回 null。

```
@Override
public Buffer grabFrame() {
    // TODO Auto-generated method stub
    return null;
} 
```

要解决此问题，您可以返回`new Buffer()`而不是`null`在您的`fgc.grabFrame()`实现中。

# java - 从arraylist调用方法

> ID：12572013
> 
> 赞同：0
> 
> 时间：2012-09-24T19:58:52.183
> 
> 标签：java

假设我有一个`performActions`值为“openURL”和“closeBrowser”的数组列表。这些值（openURL 和 closeBrowsers）和方法都在不同的类中。

如何通过从`performActions`arraylist 获取值来调用这些方法？

具体来说：如果我这样做`performAction.get(0)`，应该执行“openURL”方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:06:21.330

不，没有*简单*的方法来做你描述的事情（你可以使用反射，但我建议不要这样做）。但是，您可以存储一组整数，然后将这些整数用作执行各种功能的“代码”。这有点类似于存储方法本身。

```
public void runMethod(int n) {
    switch (n) {
        case 1:
            // do something (e.g. run a certain method)
            break;
        case 2:
            // do something else (e.g. run another method)
            break;
        ...
    }
} 
```

所以在你的情况下，`openURL`也许可以用和`1`表示（你当然可以使用任何两个整数）。然后，您将这些值存储在一个 中，之后您将遍历您的列表并在每个值上调用类似的方法，从而执行您想要的方法。`closeBrowser``2``ArrayList<Integer>``runMethod`

**编辑**：如果您的方法需要一个参数，您总是可以使用类似的概念，使用`Map`s 而不是`ArrayList`s，将整数（表示方法）映射到其参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T20:10:32.730

我会保持简单并使用字符串比较来执行您的方法：

```
List<String> items; // from Excel

for (String item : items) {
    // for example, item might be: openURL("www.google.com")

    if (item.startsWith("openURL(")) {
        // parse out the actual url
        String url = item.replaceAll(".*\"(.*)\".*", "$1");
        openURL(url);
    } else if (item.startsWith("closeURL(")) {
        // etc
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T20:06:10.263

使用反射。

例如：方法方法 = getClass().getMethod(yourarraylist.get(0)); 方法.invoke(this);

这类似于我们在加载 jdbc 驱动程序时所做的事情 class.forName();

我建议阅读有关反思的内容。Hipe 这有帮助:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T20:17:55.817

假设`ArrayList`包含[Method](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Method.html)，并且该方法是静态的，您可以使用[Method.invoke(null, null)](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Method.html)

如果方法引用不是静态的，那么您需要提供一些上下文才能执行它。

我会将要在包装类中执行的 and 包装起来，并提供一个调用/执行方法`Method`...`Object`

```
public class ProxyMethod {
    private Method method;
    priavte Object instance;

    public ProxyMethod(Object instance, Method method) {
        this.instance = instance;
        this.method = method;
    }

    public void invoke() {
        method.invoke(this, null);
    }
} 
```

现在您还可以提供参数，如果您需要...

```
public class ProxyMethod {
    // Previous decelerations...

    private Object[] parameters;

    public ProxyMethod(Object instance, Method method, Object... parameters) {
        this(instance, methd);
        this.parameters = parameters;
    }

    public void invokeWith() {
        method.invoke(this, parameters);
    }

    public void invokeWith(Object... parameters) {
        method.invoke(this, parameters);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T20:18:05.680

我会使用脚本语言：

*   您在 Java 6 中内置了 JavaScript Rhino
*   你可以调用 Groovy 代码
*   您可以使用简单的表达式语言解释器，例如 MVEL
*   如果只有 2 个函数，您可以自己解析符号

# mysql - mysql，一个用户删除，另一个更新，谁会赢？

> ID：12572019
> 
> 赞同：1
> 
> 时间：2012-09-24T19:59:15.187
> 
> 标签：mysql

问题是关于 mysql 事务。

```
create table tbl1(
    id integer,
    val integer,
    primary key (id)
);
insert into tbl1 (id, val) values (1,2); 
```

我创建了两个同时工作的用户。

```
USER1                                         USER2
start transaction;

update tbl1 set val = 3 where id = 1;

                                      delete from tbl2 where id = 1 and val = 3;

commit; 
```

因此，该行不会被删除。如何解决？我希望该行将被删除，因为删除查询晚于第一个用户的事务开始。

编辑：实际上行将被删除，所以没有解释为什么会这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:08:25.927

@capoluca - 你有一个[比赛条件](http://www.celticwolf.com/blog/2010/04/27/what-is-a-race-condition/)。没有简单的、万能的答案可以解决它。

*   在您当前的代码中：

    a) 如果在更新*之前*发生，则不会删除

    b) 如果在事务*期间*发生删除，则删除将被“撤消”

    c)如果在“更新”事务完成*后*发生删除，*则将进行删除*

**   一种解决方案是锁定表。

    这不一定适用于所有数据库，并且可能对性能产生毁灭性影响。

    *   另一个解决方案是简单地“不用担心”。这实际上可能是一个合理的选择，具体取决于您的业务需求。如果“删除”是批处理作业的一部分，它可能会工作得很好——在这种情况下，有问题的记录肯定迟早会被删除。

    *   另一种解决方案是将更新*和删除**都*放在它们自己的单独事务中* 

 **请查看我上面引用的链接，看看什么对您的情况最有意义。**

# c# - 带有嵌套操作的 MVC、带有 EF5 的 WCF 数据服务和 DataServiceQuery<>.Expand()

> ID：12572020
> 
> 赞同：1
> 
> 时间：2012-09-24T19:59:18.780
> 
> 标签：c#, asp.net-mvc, entity-framework, wcf-data-services

考虑这段代码：

```
var svc = new ProductDesignerEntities(AppSettings.ProductDesignerServiceLocation);

var scenariox = svc.Scenarios
    .Where(o => o.ID == id)
    .FirstOrDefault();

var scenario = svc.Scenarios
    .Expand(o => o.SomeNavigationProperty)
    .Where(o => o.ID == id)
    .FirstOrDefault(); 
```

当此代码运行时，`scenario.SomeNavigationProperty`将不填充。注释掉填充的代码可以`scenariox`修复它。为什么是这样？是否可以通过配置服务上下文或数据服务来解决这个问题，或者我是否必须以某种方式更改我的代码设计？

我能想到的替代方案在某些能力上都逊色：

*   每个操作创建一个`ProductDesignerEntities`实例。这几乎完全杀死了请求内缓存。
*   每个控制器创建一个`ProductDesignerEntities`实例。基本控制器类不那么烦人，但这会杀死控制器之间的缓存，并且如果同一控制器中的不同操作需要来自同一个表的不同导航属性集，则不会解决问题。
*   如果该属性为空，则手动填充该属性。难以始终如一地实施这样的手动解决方案；必然成为bug的来源。
*   始终手动填充属性。有点违背导航属性的目的。
*   确保请求中对表的所有使用都具有相同的 .Expand() 列表。非常烦人和乞求难以修复的错误。

我开始倾向于第一种选择。尽管每个实例都有新连接的额外开销，但它似乎问题最少：/

**编辑：**我设法让服务查询通过 Fiddler 运行，它们看起来是正确的。但是`scenario`除非我注释掉`scenariox`代码，否则导航属性仍然​​是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:48:36.510

在进行进一步研究之后，您似乎应该`ProductDesignerEntities`在每个使用上下文中创建一个新实例，所以这就是我将采用的解决方案。但是，我无法正确解决问题，这让我很烦恼！

我将把它写成一个非常奇怪的配置问题，或者 WCF 数据服务中的一个错误，因为根据 Fiddler 的说法，它确实执行了对附加数据的请求；它只是没有出现在返回的对象中。

# php - 仅显示列表中的第一个结果

> ID：12572030
> 
> 赞同：0
> 
> 时间：2012-09-24T20:00:03.630
> 
> 标签：php, menu, hide

我正在使用 Zen Cart，目前正在为电子商务网站构建菜单。我已经设法弄清楚如何调用所有类别，但客户只希望显示前 4 个类别。现在有 20 多个类别，我只需要前 4 个即可显示在列表中。我不确定做到这一点的最佳和最简单的方法。

有没有办法调用列表

例子：

```
<ul>
   <li>Menu One</li>
   <li>Menu Two
      <ul>
         <li>Submenu One</li>
         <li>Submenu Two</li>
         <li>Submenu Three</li>
      </ul>
   </li>
   <li>Menu Three</li>
   <li>Menu Four</li>
   <li>Menu Five</li>
   <li>ect...</li>
</ul> 
```

然后只显示

```
<ul>
   <li>Menu One</li>
   <li>Menu Two
      <ul>
         <li>Submenu One</li>
         <li>Submenu Two</li>
         <li>Submenu Three</li>
      </ul>
   </li>
   <li>Menu Three</li>
   <li>Menu Four</li>
</ul> 
```

我希望这是一个简单的解决方案！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:04:52.653

根据您的回复，您的查询应该是：

```
// Categories
$lid = (int) $_SESSION['languages_id']; 
$sql = "SELECT c.categories_id, cd.categories_name, c.parent_id "
     . "FROM " . TABLE_CATEGORIES . " c, " 
     . TABLE_CATEGORIES_DESCRIPTION . " cd "
     . "WHERE c.categories_id = cd.categories_id and c.categories_status = 1 " 
     . "AND cd.language_id = '{$lid}' "
     . "ORDER BY c.parent_id, c.sort_order, cd.categories_name "
     . "LIMIT 4"; 
$categories = $db->Execute($sql);

// Subcategories of the above
$lid = (int) $_SESSION['languages_id']; 
$sql = "SELECT c.categories_id, cd.categories_name, c.parent_id "
     . "FROM " . TABLE_CATEGORIES . " c, " 
     . TABLE_CATEGORIES_DESCRIPTION . " cd "
     . "WHERE c.categories_id IN ("
     .     "SELECT c.categories_id "
     .     "FROM " . TABLE_CATEGORIES . " c, " 
     .     TABLE_CATEGORIES_DESCRIPTION . " cd "
     .     "WHERE c.categories_id = cd.categories_id and c.categories_status = 1 " 
     .     "AND cd.language_id = '{$lid}' "
     .     "ORDER BY c.parent_id, c.sort_order, cd.categories_name "
     .     "LIMIT 4" 
     . "); 
$subcategories = $db->Execute($sql); 
```

我不知道你的数据库的结构，但你可以使用上面的方法来做一个两步的方法。第一个是获得前 4 个类别。第二个查询是获取这 4 个类别的子类别。

我不太赞成子查询——我尽可能避免使用它们，所以在我看来这不是一个非常有效的解决方案。您可以有效地遍历第一个查询并从那里获取 id，如下所示：

```
// Categories
$lid = (int) $_SESSION['languages_id']; 
$sql = "SELECT c.categories_id, cd.categories_name, c.parent_id "
     . "FROM " . TABLE_CATEGORIES . " c, " 
     . TABLE_CATEGORIES_DESCRIPTION . " cd "
     . "WHERE c.categories_id = cd.categories_id and c.categories_status = 1 " 
     . "AND cd.language_id = '{$lid}' "
     . "ORDER BY c.parent_id, c.sort_order, cd.categories_name "
     . "LIMIT 4"; 
$categories = $db->Execute($sql);

// Loop through the $categories and get the ids
$category_ids = array();
foreach ($categories as $category)
{
    $category_ids[] = $caregory->categories_id;
}
// Subcategories of the above
$lid = (int) $_SESSION['languages_id']; 
$sql = "SELECT c.categories_id, cd.categories_name, c.parent_id "
     . "FROM " . TABLE_CATEGORIES . " c, " 
     . TABLE_CATEGORIES_DESCRIPTION . " cd "
     . "WHERE c.categories_id IN (" . implode(",", $category_ids) . ")";
$subcategories = $db->Execute($sql); 
```

在我看来，上述内容比子查询要好得多。

高温高压

[狮子](https://stackoverflow.com/users/1037210/lion)的学分

# r - 在 R 中使用 qplot 将回归线添加到 facet_grid

> ID：12572035
> 
> 赞同：1
> 
> 时间：2012-09-24T20:00:13.410
> 
> 标签：r, ggplot2

我正在尝试向这个 facet_grid 添加一条回归线，但我似乎遇到了问题。

```
 qplot(date, data=ua, geom="bar", 
                      weight=count, 
                      ylab="New User Count", 
                      xlab='Date', 
                      main='New Users by Type Last 3 Months',
                      colour=I('lightgreen'),
                      fill=I('grey')) + 
    facet_grid(un_region~role, scales='free', space='free_y') + 
    opts(axis.text.x =theme_text(angle=45, size=5)) 
```

这是我正在使用的数据样本，请注意计数需要相加，这就是我使用 weight=count 的原因，不确定是否有更好的方法。

```
 date         role                   name un_region              un_subregion us_state count
1 2012-06-21 ENTREPRENEUR              Australia   Oceania Australia and New Zealand              2
2 2012-06-21 ENTREPRENEUR                Belgium    Europe            Western Europe              1 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T21:02:34.730

我不确定你在画什么斜率，因为你似乎在使用条形图。你可以通过三种方式做到这一点，我将举例说明两种。如果您有实际的 xy 数据并且您想按方面拟合各个回归线，只需使用`stat_smooth(method="lm")`. 这是一些代码：

```
library(ggplot2)
x <- rnorm(100)
y <-  + .7*x + rnorm(100)
f1 <- as.factor(c(rep("A",50),rep("B",50)))
f2 <- as.factor(rep(c(rep("C",25),rep("D",25)),2))
df <- data.frame(cbind(x,y))
df$f1 <- f1
df$f2 <- f2

ggplot(df,aes(x=x,y=y))+geom_point()+facet_grid(f1~f2)+stat_smooth(method="lm",se=FALSE) 
```

这产生：

![在此处输入图像描述](../Images/5fb4869a8c50009e67e142be503ebdbd.png)

或者您可以使用该`geom_abline()`命令设置您自己的截距和斜率。这是一个使用叠加在条形图上的菱形数据集的示例，这可能是您正在寻找的。

![在此处输入图像描述](../Images/e3b9fa3e727a535ba561dc4831a52579.png)

您可以使用此代码段查看仅包含散点图的示例 `ggplot(df,aes(x=x,y=y))+geom_point()+facet_grid(f1~f2)+geom_abline(intercept = 0, slope = 1 )`

# android - 如何使用联系人事件

> ID：12572036
> 
> 赞同：1
> 
> 时间：2012-09-24T20:00:13.613
> 
> 标签：android, android-emulator, android-contacts, android-event

在我的 HTC Desire 手机上，我在联系人级别有“事件”字段。它允许添加一些信息来联系，例如生日等。我有两个问题：

1.  我在 Android 模拟器上找不到这样的字段？它存在吗？如果是，如何开启？
2.  HTC“事件”与Android标准（来自SDK）“事件”相同还是HTC特定功能？

提前致谢！

# maven - 清除 Maven 本地存储库并保持最新？

> ID：12572037
> 
> 赞同：13
> 
> 时间：2012-09-24T20:00:15.460
> 
> 标签：maven, plugins, repository

如何轻松地从本地存储库中删除所有过时的快照？

我的 repo 中的许多文件导致性能不佳，并且获取工件的时间很长。我想将回购精简到最新的快照。

我看到[dependency:purge-local-repository](https://maven.apache.org/plugins/maven-dependency-plugin/purge-local-repository-mojo.html)可以清除本地存储库，但我想保持最新。我可以轻松地创建一个脚本来完成这项工作（并将其包装在一个插件中），但如果已经有一个工具可以清除到最新版本，我不想重新发明轮子。

是否有插件可以清除我对最新快照或最后 X 快照的依赖项？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-12T18:06:38.173

这类似于[how-do-you-deal-with-maven-3-timestamped-snapshots-efficiently](https://stackoverflow.com/questions/4275466/how-do-you-deal-with-maven-3-timestamped-snapshots-efficiently)

我添加了以下内容，每个构建的包都清除了旧的快照，以保持我的本地存储库修剪并确保在 Windows 上更快地构建存在大量存储库的问题

```
 <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>build-helper-maven-plugin</artifactId>
        <version>1.7</version>
        <executions>           
            <execution>             
                <id>remove-old-artifacts</id>             
                <phase>package</phase>             
                <goals>               
                    <goal>remove-project-artifact</goal>             
                </goals>            
                <configuration>  
                    <removeAll>true</removeAll><!-- remove all versions of built artifacts including all versions.  Install phase will regenerate -->             
                </configuration>          
                </execution>         
        </executions>             
    </plugin> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-05-07T13:04:17.350

使用 Peter 的解决方案，当前工件（或一组工件，如果应用在父 pom 中）的所有旧版本都将被删除，包括版本和所有快照。

如果任何其他项目需要以前的发布版本，则必须从您的非本地存储库（例如 Nexus）再次下载，并且一旦您创建此快照的“包”，将再次删除。

我已经看到了这个问题的另一种选择：[http ://maven.apache.org/plugins/maven-dependency-plugin/purge-local-repository-mojo.html](http://maven.apache.org/plugins/maven-dependency-plugin/purge-local-repository-mojo.html)

可以选择定义“ **snapshotsOnly** ”，并且只会删除快照，而不是以前的稳定版本。

# python - 怎么了，为什么 python manage.py runserver 失败了？

> ID：12572038
> 
> 赞同：0
> 
> 时间：2012-09-24T20:00:16.533
> 
> 标签：python, django, sqlite, python-2.7, django-manage.py

由于缺少 sqlite 无法运行 django？实际上 sqlite 已经安装在我的系统中。

```
(py1)[mirror@home ci]$ python manage.py runserver
Validating models...

Unhandled exception in thread started by <bound method Command.inner_run of <django.contrib.staticfiles.management.commands.runserver.Command object at 0x9ea3d8c>>
Traceback (most recent call last):
  File "/home/mirror/build/py1/lib/python2.7/site-packages/django/core/management/commands/runserver.py", line 91, in inner_run
    self.validate(display_num_errors=True)
  File "/home/mirror/build/py1/lib/python2.7/site-packages/django/core/management/base.py", line 266, in validate
    num_errors = get_validation_errors(s, app)
  File "/home/mirror/build/py1/lib/python2.7/site-packages/django/core/management/validation.py", line 23, in get_validation_errors
    from django.db import models, connection
  File "/home/mirror/build/py1/lib/python2.7/site-packages/django/db/__init__.py", line 40, in <module>
    backend = load_backend(connection.settings_dict['ENGINE'])
  File "/home/mirror/build/py1/lib/python2.7/site-packages/django/db/__init__.py", line 34, in __getattr__
    return getattr(connections[DEFAULT_DB_ALIAS], item)
  File "/home/mirror/build/py1/lib/python2.7/site-packages/django/db/utils.py", line 92, in __getitem__
    backend = load_backend(db['ENGINE'])
  File "/home/mirror/build/py1/lib/python2.7/site-packages/django/db/utils.py", line 24, in load_backend
    return import_module('.base', backend_name)
  File "/home/mirror/build/py1/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/home/mirror/build/py1/lib/python2.7/site-packages/django/db/backends/sqlite3/base.py", line 31, in <module>
    raise ImproperlyConfigured("Error loading either pysqlite2 or sqlite3 modules (tried in that order): %s" % exc)
django.core.exceptions.ImproperlyConfigured: **Error loading either pysqlite2 or sqlite3 modules** (tried in that order): No module named _sqlite3 
```

重点是：加载 pysqlite2 或 sqlite3 模块时出错

**证明已经安装了 sqlite 的证据**：

```
(py1)[mirror@home ci]$ rpm -qa | grep sqlite
python-sqlite-1.1.7-1.2.1
sqlite-devel-3.3.6-5
sqlite-3.3.6-5
(py1)[mirror@home ci]$ python -V
Python 2.7.3
(py1)[mirror@home ci]$ python manage.py runserver 
```

那么，为什么 python manage.py runserver 失败了？

**编辑 1**：

现在我知道我还没有构建 sqlite 模块：

```
(py1)[mirror@home Python-2.7.3]$ python
Python 2.7.3 (default, Sep 23 2012, 21:42:51)
[GCC 4.1.2 20080704 (Red Hat 4.1.2-52)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import sqlite3
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/home/mirror/insp/lib/python2.7/sqlite3/__init__.py", line 24, in <module>
    from dbapi2 import *
  File "/home/mirror/insp/lib/python2.7/sqlite3/dbapi2.py", line 27, in <module>
    from _sqlite3 import *
ImportError: No module named _sqlite3 
```

**我发现sqlite代码包含在python源代码中，但是如何构建它？**

```
[mirror@home Python-2.7.3]$ ls Modules/_s
_sqlite/   _sre.c     _sre.o     _ssl.c     _struct.c
(py1)[mirror@home Python-2.7.3]$ ls Modules/_sqlite/
cache.c       connection.h  microprotocols.c  module.h            row.c           statement.c  util.h
cache.h       cursor.c      microprotocols.h  prepare_protocol.c  row.h           statement.h
connection.c  cursor.h      module.c          prepare_protocol.h  sqlitecompat.h  util.c 
```

./configure --help | grep sqlite 什么都不返回....

```
(py1)[mirror@home Python-2.7.3]$ ./configure --help | grep sqlite
(py1)[mirror@home Python-2.7.3]$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:24:11.063

您需要 apt-get install libsqlite3-dev （在 debian - sqlite-devel 可能在其他地方）并重新编译 python。

# c# - 剃刀中的for循环以创建输入标签列表

> ID：12572039
> 
> 赞同：2
> 
> 时间：2012-09-24T20:00:23.103
> 
> 标签：c#, asp.net-mvc-3, razor, for-loop

我是 MVC3 和 Web 开发的新手。

我正在尝试使用以下代码在剃刀视图中列出输入标签：

```
 @{
        for (Int32 i = 1; i < 10; i++)
        {
            <div class="upload-box" id="upload-box-@i" style="display:block">
                <div class="preview-box">
                    <img alt="Field for image cutting" id="preview-@i" src="@Url.Content("~/Content/empty.png")" />
                </div>
                <div id="filename-box-@i"></div>
                <div>
                    <label for="File[i]">Filename:</label>
                    <input type="file" name="Files" id="File@i" />
                </div>
            </div>
        }
    } 
```

我的问题与

```
<label for="File[i]">Filename:</label> 
```

和

```
<input type="file" name="Files" id="File@i" /> 
```

我在这里尝试两个版本来生成 File1、File2 等的 id。它们都不起作用。

我不确定这是否可以做到？我尝试了各种替代方法并搜索了谷歌 - 这让我相信我的问题的答案是否定的。但我想我还是会检查一下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T20:03:16.037

Razor 没有`File@i`正确解析。

您可以通过将其括在括号中来使其明确。

```
<input type="file" name="Files" id="File@(i)" /> 
```

此外，标签没有`@`标志。

将其更改为

```
<label for="File[@i]">Filename:</label> 
```

这个括号不是必需的，但无论如何您都可以添加它。

# python - 使用带有一组不规则点 X、Y、Z 的 Python 来创建一个规则网格，其中每个像素都是该点的最小值

> ID：12572040
> 
> 赞同：2
> 
> 时间：2012-09-24T20:00:23.717
> 
> 标签：python, grid, ascii, tiff, mesh

我有一组具有 X、Y 和 Z 值的不规则点。我希望创建一个分辨率为 0.5 x 0.5 且扩展等于我的数据集边界框的常规方形网格（以`TIFF`格式或格式导出）`ASCII``[X_Min,Y_Min],[X_Max,Y_Min],[X_Max,Y_Max],[X_Min,Y_Max],[X_Min,Y_Min]`

存在点的每个像素的值需要是像素中点的低值。

抱歉，如果我不能发布任何 Python 代码。

在此先感谢您提供的所有帮助、建议和解决此问题的链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T18:34:31.623

我假设您的点在这样的数组中可用：

```
points = [(x1,y1,z1), (x2,y2,z2), ...] 
```

要提取 x 和 y 值，您可以使用 zip 技巧：

```
points_zipped = zip(*points)  
xvals = points_zipped[0]  
yvals = points_zipped[1] 
```

获取边界框就很简单了：

```
xmin, ymin = min(xvals), min(yvals)
xmax, ymax = max(xvals), max(yvals) 
```

为了获得最低分数，我想不出比使用集合模块中的 defaultdicts 更鼓舞人心的东西：

```
from collections import defaultdict
minpoints = defaultdict(lambda: defaultdict(lambda : 0.))  # 0\. or another suitable min value  
for p in points:  
    minpoints[p[0]][p[1]] = min(p[2], minpoints[p[0]][p[1]]) 
```

从那里你可以使用 scipy 插值。有一个用于不规则间隔数据的二维插值的专用配方：[http ://www.scipy.org/Cookbook/Matplotlib/Gridding_irregularly_spaced_data](http://www.scipy.org/Cookbook/Matplotlib/Gridding_irregularly_spaced_data)

# c# - 使用嵌套 if/else 语句查找最多 3 个数字

> ID：12572044
> 
> 赞同：2
> 
> 时间：2012-09-24T20:00:41.233
> 
> 标签：c#, nested

所以我在上大学，我正在使用 C# 编写一个程序，除了这个按钮之外几乎完成了。我不想要答案，因为我永远不会那样学习，但我正在使用 Heron 的方法编写一个程序，用户必须输入 3 个数字来确定这些数字是否可以用作三角形的边。我感到困惑的一个按钮是 Find the Maximum 按钮，它希望程序显示输入的数字是最高的。教授希望使用嵌套的 if/else 语句编写此代码。我在网上搜索过，这门课程的书很糟糕。有人可以帮助我提供一个可能的网站来提供帮助或者一个例子吗？那将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:10:12.593

也许您可以使用两级嵌套的 Math.Max(v1, v2) 请求来编写它。然后将其翻译成必要的 If/else 子句。[如果您下载ILSpy](http://ilspy.net/)并检查 System.Math.Max 以了解 .Net 在幕后使用了什么，也许您可​​以获得奖励积分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:17:01.887

我记得大学里的这些问题。分解解决方案，以便一次比较两个数字。一旦你从第一对中获得最大值，将其与第三对进行比较。就像是：

```
int a, b, c;

if (a > b)
{
    if (a > c)
        return a;
    else
        return c;
}
else
{
    /* similar for b/c pair */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T20:17:09.347

如果您需要，我可以编写整个程序。但是要在这里获得最多三个数字是伪代码。

```
`var n1 = GetInputFromUser` >> General methods in C# console is Console.Readline() and in case of forms its good ole TextBoxes.
var n2 = GetInputFromUser
var n3 = GetInputFromUser

var result

if (n1 > n2)
        {
            result = n1;

            if (n1 > n3)
                result = n1;
            else
                result = n3;
        }
        else
        {
            result = n2;
            if(n2 > n3)
                result = n2;
            else
                result = n3;
        } 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-24T20:09:29.737

如果您必须使用嵌套的 if 语句，我会考虑使用临时变量。就像是：

```
var temp
var input1
var input2
var input3

if input1> input2 then
     temp = input1
else
    temp = input2 
```

与此类似的东西就足够了。我没有深入研究整个事情，因为只要求了一个例子，并且 OP 明确表示他们不想要答案。

# drupal - Drupal 7 Views 暴露过滤器“任何”，选择有限

> ID：12572047
> 
> 赞同：1
> 
> 时间：2012-09-24T20:00:47.420
> 
> 标签：drupal, drupal-7, filtering, drupal-views

我`-Any-`在暴露的过滤器中遇到了 Drupal 7 选项的问题。我有一个大约 8 个分类术语的列表，我希望我的用户能够在其中 6 个之间进行过滤。其他 2 个术语在网站上的另一个地方使用，但所有 8 个都是同一个词汇表的一部分。

我的分类术语是（例如）：

```
Eggs
Ham
Cheese
Bacon
Sausage
Juice
Fruit
Toast 
```

在我暴露的过滤器中，我选择了其中 6 个术语作为可用选项进行过滤。现在过滤器看起来像这样：

```
-Any-
Eggs
Ham
Cheese
Bacon
Sausage
Juice 
```

问题是当您选择它时，`-Any-`它包括`Toast`和`Fruit`条款。我`-Any-`只想成为我在视图中选择的 6 个术语中的任何一个。

一种解决方法是选中该`Required`框以要求进行选择。这会关闭该`-Any-`选项，但我想保留它，以便在您进入页面时默认选择显示所有 6 个项目。

我如何限制`-Any-`只包括我对暴露过滤器的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:56:39.853

您还可以为相同的分类词汇添加另一个过滤器。不要公开它，将运算符设置为“没有”并选择您不想搜索的术语（水果，吐司）。

这样，即使您的用户从公开的过滤器中选择“任何”，未公开的过滤器也会删除任何不需要的术语。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T23:26:36.547

使用[hook_views_query_alter](http://api.drupal.org/api/views/views.api.php/function/hook_views_query_alter/7)并添加另一个 where 子句将其限制在列表中。

# javascript - 在返回 false 之前，在有确认（）框的地方抑制 keydown；

> ID：12572049
> 
> 赞同：0
> 
> 时间：2012-09-24T20:01:10.133
> 
> 标签：javascript, google-chrome, dom-events, keydown, onkeydown

我有一个巨大的 Javascript 文件，它在应用程序的各个屏幕上捕获各种按键。我总是用它`return false();`来防止发生默认的按键操作，效果很好。

但是，在这个特定的按键下，`confirm()`在`return false;`. 如果我点击`C`，`confirm()`对话就会出现。如果我把它移开，在它下面，`c`已经写入文本框了。

我怎样才能成功压制`keydown`？这只需要在 Chrome 中工作。

```
document.onkeydown = keyDown;

function keyDown()
{
    switch(window.event.keyCode)
    {
        case(67):
            if(confirm('You have unsaved data! Press OK to Save or Cancel to Discard')) {
                alert('Do something...');
            }
            else {
                return false;
            }
            window.location = '/invoice-12345';
            return false;
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:14:02.103

您可以使用 延迟确认`setTimeout`。

```
document.onkeydown = keyDown;

function keyDown()
{
    switch(window.event.keyCode)
    {
        case(67):
            setTimeout(function() {
                if(confirm('You have unsaved data! Press OK to Save or Cancel to Discard')) {
                    alert('Do something...');
                }
                else {
                    return false;
                }
                window.location = '/invoice-12345';
            }, 0);
            return false;
        break;
    }
} 
```

[jsFiddle](http://jsfiddle.net/q4gqU/)

# c - 创建一个大整数

> ID：12572051
> 
> 赞同：-1
> 
> 时间：2012-09-24T20:01:21.553
> 
> 标签：c

我试图实现到 bigints 的位移。BigInt 由字节数组表示，字节数组应解释为二进制补码中的单个整数 N 位。所以我想做一些类似的东西：

示例数组 bigint：{0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF} 将表示整数 0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFE (-2) N = 128 位.

typedef 无符号字符 *BigInt;

当我尝试创建我的 bigint 时，我遇到了错误

```
#include <stdlib.h>

    void bi_init (int nbits)
    {
        nbytes = (nbits/8);
    }

    BigInt bi_new (int val)
    {
        BigInt new = (BigInt)malloc(nbytes*sizeof(unsigned char));

        new=val --> problem, can someone give me a hint on how can i implement this array?

        return novo;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:13:06.010

```
typedef unsigned char *BigInt;

BigInt *new = (BigInt)malloc(nbytes*sizeof(unsigned char)); 
```

您声明`new`为`unsigned char**`，这是一级指针太多（并且您不应该`malloc`在 C 中转换结果）。

假设`novo`和`new`是同一个变量，并且帖子只翻译了一次，

新=val

用传入的 覆盖刚刚分配的地址`val`。

要用 的字节填充分配的缓冲区`val`，

```
int i = 0;
// make it unsigned, so that right-shifting works correctly
unsigned int u_val = val;
while(u_val) {
    new[i++] = u_val&0xFF;
    u_val >>= 8;
} 
```

那么问题依然存在

```
nbytes = (nbits/8); 
```

`nbits`如果不是 8 的倍数，那么您分配的内存太少，请这样做

```
nbytes = (nbits+7)/8; 
```

# html - 应用程序的云同步服务

> ID：12572052
> 
> 赞同：4
> 
> 时间：2012-09-24T20:01:22.630
> 
> 标签：html, cloud, jsonp, sync

您好我有一个具有用户登录的 HTML5 应用程序。该应用程序有一个笔记选项。我正在寻找可以帮助我同步该用户帐户的笔记的服务。因此，同一用户可以登录不同的设备并在其设备中查看注释。我不能使用 iCloud，因为 Android 不支持它。

我们尝试使用 jsonp 将注释存储在用户数据库中，但仍然存在一些问题。

有人提到了 Pusher.com，但对于像我们这样的初学者来说，这项服务似乎很昂贵。有没有更可靠、更便宜的选择？W

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:41:11.903

[Parse](http://www.parse.com)可能更符合您的要求。Pusher 提供了发送推送通知的服务，但您提到需要将数据存储在云中。Parse 可以做到这一点，并且确实有一个免费的基本计划可供您开始使用。

# c# - 简单的控制台应用程序测试

> ID：12572053
> 
> 赞同：0
> 
> 时间：2012-09-24T20:01:24.983
> 
> 标签：c#, .net, unit-testing, testing, console-application

我目前正在做一些实习工作并寻求一些建议。

我已经完成了一项非常简单的任务，即用 C# 为服务应用程序编写一些单元测试。该服务主要有各种查询和查找的方法和SQL数据库。我被要求为大多数这些方法和其他事情编写单元测试，比如简单地检查连接和东西。我被告知要保持简单，可能只是在控制台应用程序中编写测试。我想知道最好的方法是什么？

简单地从带有硬编码输入的控制台应用程序调用方法是否合适？然后只需检查输出是什么并在控制台中写入是否通过？还是这太简单和讨厌了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:08:34.427

您可以从命令行同时运行 MSTest 和 NUnit 测试，在我看来，这比从头开始编写自己的测试运行器要好得多。专注于编写质量测试，而不是执行它们和交付结果所需的脚手架。

我建议“正确”地做它就像制作自己的解决方案一样简单。

请注意，连接到数据库的测试是集成测试，而不是单元测试。

# android - 如何安全地验证用户对 Android 应用的订阅？

> ID：12572055
> 
> 赞同：0
> 
> 时间：2012-09-24T20:01:29.890
> 
> 标签：android, security, google-api, google-play, subscription

我对安全或服务器知之甚少，但我正在制作一个允许用户购买应用内订阅的 Android 应用。[按照建议](http://developer.android.com/guide/google/play/billing/billing_subscriptions.html#play-dev-api)，我想使用 Google Play Developer API 并将必要的数据存储在我自己的服务器上。但是，如果我的代码中没有一行，我想不出一种方法来做到这一点

```
if(userIsSubscribed){
    //give access to purchased data
} 
```

黑客显然可以进入并将其翻转为`if(true)`. 我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T02:23:49.037

至少混淆您的应用程序代码。在发送内容之前，还要在服务器上进行订阅检查。这就是他们拥有 Web API 的原因之一。

基本上，用户（和潜在的破解者）有权访问的任何东西（即您的应用程序）都不能被信任。他们无法直接访问的东西（即您的内容服务器）可以得到更多信任，并且在可能的情况下将所有敏感操作和/或数据移到那里是个好主意。

# php - SoapClient：找不到包装“https”

> ID：12572059
> 
> 赞同：0
> 
> 时间：2012-09-24T20:01:54.523
> 
> 标签：php, soap

我在尝试将此 url 加载到我的代码中时遇到了严重的问题。当我转到浏览器中的实际页面时，它加载得很好，但是当我解析它时，它基本上给出了 404，我已经使用肥皂客户端尝试过这个，并且 curl 认为好吧，也许我做错了什么。

这是我的代码，你可以看到它的基本知识。

```
$customerId = 'xxxx';
$authenticationId = 'xxxx';
$url = 'https://test.api.800loanmart.com/LoanmartService.svc?wsdl';
$config = array('trace' => 1, 'exceptions' => 0);

$service = new SoapClient($url,$config);
$result = $service->GetTermsAndConditions($customerId, $authenticationId);
var_dump($service); 
```

这就是它向我扔回的东西......

```
Warning: SoapClient::SoapClient() [soapclient.soapclient]: Unable to find the wrapper "https" - did you forget to enable it when you configured PHP? in C:\xampp\htdocs\loanmart\index.php on line 6

Warning: SoapClient::SoapClient() [soapclient.soapclient]: I/O warning : failed to load external entity "https://test.api.800loanmart.com/LoanmartService.svc?wsdl" in C:\xampp\htdocs\loanmart\index.php on line 6

Fatal error: SOAP-ERROR: Parsing WSDL: Couldn't load from 'https://test.api.800loanmart.com/LoanmartService.svc?wsdl' : failed to load external entity "https://test.api.800loanmart.com/LoanmartService.svc?wsdl" in C:\xampp\htdocs\loanmart\index.php on line 6 
```

我已经检查过我是否有 openssl 并且它在我的 php.ini 文件中打开了，我只是很困惑该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-23T09:00:46.850

让我头疼的简单问题！在 apache 服务器目录中打开 php.ini 文件并取消注释（启用）该行`extension=php_openssl.dll`。

这解决了我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T22:42:16.847

即使您确实检查过，这也不过是一个 openssl 配置问题（在 SoapClient 中使用，但仍然如此）

尝试`file_get_contents($wsdl_url);`

此外，检查您当前加载的 php.ini 和支持的流（php.ini 可能从 CLI 到 Web SAPI 不同）

```
php -r "phpinfo();" > file.txt 
```

我的：注册的 PHP 流 => php、文件、glob、数据、http、ftp、zip、compress.zlib、compress.bzip2、https、ftps、phar
注册的流套接字传输 => tcp、udp、ssl、sslv3、sslv2、 tls（您的代码示例适用于我的计算机：p）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-30T11:49:18.723

在 php.ini 中激活 extension=php_openssl.dll。重启服务器。

# types - mysql int 被传递给 python

> ID：12572060
> 
> 赞同：0
> 
> 时间：2012-09-24T20:01:56.247
> 
> 标签：types, mysql-python

我有一个mysql数据库，我在其中定义了一个表：

```
CREATE TABLE IF NOT EXISTS tblModel (
model_id int NOT NULL AUTO_INCREMENT,
model_file varchar(50) NOT NULL,
model_name varchar(50) NOT NULL,
model_descrip varchar(200) NOT NULL,
target_index char(6) NOT NULL,
training_days int NOT NULL,
trading_days int NOT NULL,      
PRIMARY KEY(model_id)); 
```

奇怪的是，我注意到虽然 mysql 文档说 int 确实是 int(4)，但我看到 int 字段实际上是作为 int(11) 创建的。根据文档，这有点令人不安，因为似乎没有遵循我的指示。

当我使用 mysqldb.database_connection.cursor 将此表查询到 python 中时，我看到 int 正在通过 longs - 这并不奇怪。

因此，我的问题是三重的（按照对我来说越来越重要的顺序）：

1) 知道为什么 int 被创建为 int(11) 吗？

2) 此表中的 int 字段将包含序列号和天数 - 分配给 long 的空间几乎没有必要。我应该关心浪费的空间吗？

3）假设我坚持使用 int(11)s （其他表有外键，打破和重新创建所有这些有点痛苦），有没有比对 int 进行显式转换更好的解决方案cur.fetchall() 或 cur.fetchone() 返回？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:11:56.390

1.  这是默认显示宽度，因为 int 可以在 -2147483648 到 2147483647 的范围内，因此最大显示宽度是 10 个整数和一个符号。一个 int 的存储大小是 4 个字节，不管它的值是多少。不要将“显示宽度”与存储大小混淆，因为仅当数字具有“zerofill”选项时才会显示宽度，因此 int(4) zerofill 将显示 0004，而 int(6) zerofill 将显示 000004；这是最小显示宽度，因此使用 123456 的 int(4) zerofill 仍将产生 123456 而不是 1234。查看[http://dev.mysql.com/doc/refman/5.5/en/numeric-type-attributes.html](http://dev.mysql.com/doc/refman/5.5/en/numeric-type-attributes.html)

2.  空间可能会或可能不会被浪费，具体取决于架构和操作系统。在 C 中，int 必须至少为 16 位，long 至少为 32 位，但可能更大。在 64 位系统上，long 实际上可能是 long long 并且是 64 位。除非您在严重受限的系统上运行，否则可能不值得担心。这仅在内存中，因为无论 Python 对它们做什么，MySQL 都会将这些整数存储为 4 个字节。

3.  如前所述， () 中的数字只是一个显示宽度，不会影响该列中数字的基础范围，尽管如果您使用外键和 int( 6）zerofill 在另一个上，连接可能会很奇怪，但我还没有测试过。将“zerofill”添加到 MySQL 数字会使该列自动无符号。从 MySQL 中读取这些内容时，您无需进行任何转换；int 适合 long 并且 Python 将两者都存储为 C long 无论如何。

# django - Django - 获取子对象的子对象？

> ID：12572066
> 
> 赞同：1
> 
> 时间：2012-09-24T20:02:18.640
> 
> 标签：django, foreign-keys, django-queryset

如果我有一个具有**一级**子对象的结构，我可以轻松地通过它们`parent.child_set.all()`但是我想从数据库中获取子对象作为对象**。**我必须真正修补递归还是有一些更简单的 django queryset 方法来获取所有与子相关的对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:32:52.570

“其他方向”的东西应该起作用，所以它是例如：

```
SecondChild.objects.filter(first_child__parent=some_parent) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T04:55:10.100

您始终可以使用`filter`而不是使用`child_set`. 尝试使用该`foreign key`属性过滤模型。

# php - codeigniter 修改 Common.php 函数

> ID：12572068
> 
> 赞同：1
> 
> 时间：2012-09-24T20:02:31.490
> 
> 标签：php, class, codeigniter, logging

我正在尝试自定义 codeigniter 的日志记录功能。我找到了这个论坛帖子，它准确地描述了我需要什么： [http](http://codeigniter.com/forums/viewthread/139997/) ://codeigniter.com/forums/viewthread/139997/ 但我想在不改变核心文件/类的情况下做到这一点。

我正在尝试更改 log_message 函数。我已经扩展了 CI_Log 类并且运行良好，但现在我正在尝试更改驻留在 system/core/Common.php 中的 log_message()。它不是实际上是一个类，所以我无法扩展它，它似乎只是一个有用函数的集合。我尝试重新声明 log_message() 并将其放在 application/core/Common.php 中，但这似乎不起作用。任何想法我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:46:14.260

我相信你真正想要改变的功能是`write_log()`，如果我错了，请纠正我。您可以通过在`application\libraries\MY_Log.php`.

我的 MY_Log.php 中有以下脚本，每当出现错误时都会通过电子邮件发送给我：

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

/* Extends the logging class to send an email when an error is triggered */

class MY_Log extends CI_Log {

    function __construct()
    {
        parent::__construct();
    }

    function write_log($level = 'error', $msg, $php_error = FALSE, $additional, $additional2)

    {   
        if ($this->_enabled === FALSE)
        {
        return FALSE;
        }

         $level = strtoupper($level);

        if ( ! isset($this->_levels[$level]) OR ($this->_levels[$level] > $this->_threshold))
        {
        return FALSE;
        }

        $filepath = $this->_log_path.'log-'.date('Y-m-d').'.php';
        $message  = '';

        if ( ! file_exists($filepath))
        {
        $message .= "<"."?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed'); ?".">\n\n";
        }

        if ( ! $fp = @fopen($filepath, FOPEN_WRITE_CREATE))
        {
        return FALSE;
        }

        $message .= $level.' '.(($level == 'INFO') ? ' -' : '-').' '.date($this->_date_fmt). ' --> '.$msg."\n";

        flock($fp, LOCK_EX);
        fwrite($fp, $message);
        flock($fp, LOCK_UN);
        fclose($fp);

        @chmod($filepath, FILE_WRITE_MODE);
        return TRUE;
    }

} 
```

如果您不想扩展写入功能，则需要扩展其他日志功能之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-27T02:23:11.947

辅助功能可以在这里工作。您必须使用它而不是 log_message()。

这是我所做的：

在应用程序/帮助程序中，我创建了“new_log_helper.php”（帮助程序必须以 _helper.php 结尾）我希望它可以将日志条目添加到数据库中并按进程进行跟踪（这样我就知道在哪里查看代码）。

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');
/**
 * Custom Logging Interface
 *
 * Add log entries to a log table on the db and track process name
 *
 * @access  public
 * @return  void
 */
if ( ! function_exists('new_log')) {
    function new_log($level = 'error', $message, $process, $php_error = FALSE)
    {
        if (config_item('log_threshold') == 0) {
            return;
        }

        $CI =& get_instance();
        $CI->load->model('new_log','logger', TRUE);
        $CI->logger->add_event($process, $level, $message);

        log_message($level, $process.': '.$message, $php_error);
    }
} 
```

然后当你需要它时，像这样使用它：

```
$this->load->helper('new_log');
...
new_log('debug','Something happened','Stack overflow answer'); 
```

无论如何，我知道你的问题是几年前的，但我一直在寻找，所以也许其他人也是。

# google-maps - 总计算未显示

> ID：12572071
> 
> 赞同：0
> 
> 时间：2012-09-24T20:02:46.800
> 
> 标签：google-maps, google-maps-api-3, maps, distance

我试图编译谷歌的示例代码并找出总距离，我相信脚本没有错..如果是的话。谷歌地图不会显示...有一些东西丢失了..任何人都可以请帮助..

```
 <script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script>
      var directionDisplay;
      var directionsService = new google.maps.DirectionsService();

      function initialize() {
        directionsDisplay = new google.maps.DirectionsRenderer();
        var mapOptions = {
          zoom: 7,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          center: new google.maps.LatLng(41.850033, -87.6500523)
        };
        var map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);
        directionsDisplay.setMap(map);
        directionsDisplay.setPanel(document.getElementById('directions-panel'));

        var control = document.getElementById('control');
        control.style.display = 'block';
        map.controls[google.maps.ControlPosition.TOP].push(control);
      }

      function calcRoute() {
        var start = document.getElementById('start').value;
        var end = document.getElementById('end').value;
        var request = {
          origin: start,
          destination: end,
          travelMode: google.maps.DirectionsTravelMode.DRIVING
        };
        directionsService.route(request, function(response, status) {
          if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);
          }
        });
      }
      function computeTotalDistance(result) {
      var total = 0;
      var myroute = result.routes[0];
      for (i = 0; i < myroute.legs.length; i++) {
        total += myroute.legs[i].distance.value;
      }
      total = total / 1000.
      document.getElementById("total").innerHTML = total + " km";
      }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div id="control">
      <strong>Start:</strong>
      <select id="start" onchange="calcRoute();">
       <option value="san bernardino, ca">San Bernardino</option>
        <option value="los angeles, ca">Los Angeles</option>
      </select>
      <strong>End:</strong>
      <select id="end" onchange="calcRoute();">
        <option value="san bernardino, ca">San Bernardino</option>
        <option value="los angeles, ca">Los Angeles</option>
      </select>

    </div>
    <div id="total"></div>
    <div id="directions-panel"></div>
    <div id="map_canvas"></div>
  </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:32:38.343

尝试

```
computeTotalDistance(response) 
```

代替

```
computeTotalDistance(result)` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:45:38.207

你永远不会调用你的 computeTotalDistance 函数。您需要在 DirectionsService.route 回调函数中调用它。

```
 directionsService.route(request, function(response, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
        computeTotalDistance(response);
      } 
```

[工作示例](http://www.geocodezip.com/v3_directions_totalDist.html)

# django - Django：每个分页页面显示相同的结果

> ID：12572076
> 
> 赞同：1
> 
> 时间：2012-09-24T20:03:01.080
> 
> 标签：django, pagination, django-urls

所以我试图使用分页来显示某一天可用的所有匹配类，但是按照分页文档，每个页面只返回相同的 10 个结果。我错过了什么/我应该在 urlconf 中有什么？此外，如果我尝试使用分页来显示搜索结果，当我尝试选择下一页时，我会收到错误“视图 search.views.search_classes 没有返回 HttpResponse 对象”。将不胜感激对任何一个或两个示例的任何输入。

```
#views.py
def upcoming_class_list(request, day):
    try:
        day = int(day)
    except ValueError:
        raise Http404()
    today = datetime.date.today()
    day_x = datetime.date.today() + datetime.timedelta(days=day)
    day_x_classes = UpcomingClasses.objects.filter(class_date=day_x)
    all_matches = day_x_classes
    paginator = Paginator(all_matches, 10)
    page = request.GET.get('page')
    try:
        matches = paginator.page(page)
    except PageNotAnInteger:
        matches = paginator.page(1)
    except EmptyPage:
        matches = paginator.page(paginator.num_pages)
    return render_to_response('preview.html', {'today': today, 'tomorrow': tomorrow,
            'past_classes': past_classes, 'day_x': day_x, 'day': day,
            'day_x_classes': day_x_classes, 'yesterday': yesterday, 'matches': matches,
            'page': page}, context_instance = RequestContext(request))

#urls.py
(r'^upcoming_class_list/plus/(\d{1,2})/$', upcoming_class_list),

#preview.html
<h3>Classes for {{ day_x }}</h3>
{% if matches %}
    <div class="pagination">
        <span class="step-links">
            {% if matches.has_previous %}
            <a href="?page={{ matches.previous_page_number }}">&laquo; previous </a>
            {% endif %}

            <span class="current">
            Page {{ matches.number }} of {{ matches.paginator.num_pages }} 
            </span>

            {% if matches.has_next %}
            <a href="?page={{ matches.next_page_number }}"> next &raquo;</a>
            {% endif %}
        </span>
    </div>

    {% if day_x_classes %}
        <ul type=none>
        {% for class in day_x_classes %}
            <li>
                <ul type=none>
                    <li><strong>{{ class.type }}</strong></li>
                    <li>Teacher: <a href="/profiles/{{ class.teacher }}">{{ class.teacher }}</a></li>
                    <li>Class Description: {{ class.description }}</li>
                    ...
                </ul>
            </li><br />
        {% endfor %}
        </ul>
    {% endif %}
{% else %}
<p>There are currently no scheduled upcoming classes for {{ day_x }}.</p>
{% endif %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:11:13.373

来自 GET 或 POST 的任何内容都将是一个字符串，因此您总是会遇到第一个异常。尝试：

```
try:
    matches = paginator.page(int(page))
except (PageNotAnInteger, ValueError):
    matches = paginator.page(1) 
```

如果没有看到您的其他观点，很难猜测问题的其余部分。查看视图中的其他位，您不需要检查 day 是否为 int ，因为您已经确保在您的 urls.py 文件中使用正则表达式，但您[不调用 Http404 对象](https://docs.djangoproject.com/en/dev/topics/http/views/#the-http404-exception)，它只是`raise Http404`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:12:46.060

好的，所以我想出了我两个问题的答案。第一部分是因为我在模板中犯了一个愚蠢的错误。视图 urlconf 是正确的，但在我的模板中，我的 for 循环声明：

```
{% for class in day_x_classes %} 
```

当我应该使用

```
{% for class in matches %} 
```

因为比赛是分页的，而不是 day_x_classes。至于对我的搜索结果进行分页，我只需要编辑“上一个”和“下一个”按钮

```
<a href="?q={{ query }}&page={{ matches.previous_page_number }}">&laquo; previous </a> 
```

从

```
<a href="?page={{ matches.previous_page_number }}">&laquo; previous</a> 
```

考虑 q（搜索词）。

我希望我的错误能够帮助陷入类似情况的人。

# c# - WinForms RichTextBox 中的 OutOfMemory 异常

> ID：12572078
> 
> 赞同：0
> 
> 时间：2012-09-24T20:03:12.067
> 
> 标签：c#, winforms, richtextbox, out-of-memory

我`RichTextBox`在几种方法中使用实例，这些方法正在更改字体、颜色、将图像转换为 Rtf 格式。

```
public static string ColorText(string text)
{
    System.Windows.Forms.RichTextBox rtb = new System.Windows.Forms.RichTextBox();

    rtb.Text = conversation;

    // find predefined keywords in text, select them and color them

    return rtb.Rtf;
} 
```

过了一会儿，我得到了`OutOfMemory`异常。我应该打电话`rtb.Dispose();`吗？或`GC.Collect`或使用`using`或什么是正确的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T22:30:10.717

从调试器中可以看出，获取 Rtf 属性值后，rtb.IsHandleCreated 属性将为*true 。*这是一个问题，窗口句柄使它们的包装控件保持活动状态。您*必须*再次处理控件以销毁句柄：

```
public static string ColorText(string text) {
    using (var rtb = new System.Windows.Forms.RichTextBox()) {
        rtb.Text = text;
        return rtb.Rtf;
    }
} 
```

或者将“rtb”存储在静态变量中，这样您就只能使用一个实例。

# ruby-on-rails-3 - 如何从 Ruby on Rails 3 的 json 输出中删除“=>”？

> ID：12572081
> 
> 赞同：1
> 
> 时间：2012-09-24T20:03:25.357
> 
> 标签：ruby-on-rails-3, json

我被我认为是一个简单的问题所困扰。我正在创建 json 并且需要具有以下格式：

```
[{ "source" : "google / organic", "visits" : 20 }] 
```

这就是我得到的：

```
[{"source"=>"google / organic", "visits"=>20}] 
```

这是模型（campaign_results.rb）

```
 def as_json(options = {})
      {   "source" => source,
          "visits" => visits, 
      }
  end 
```

在控制器中：

```
def show
    @campaign_summary = CampaignResults.all
end 
```

在视图中：

```
<%= raw @campaign_summary.as_json %> 
```

关于我应该如何用“：”替换“=>”的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:31:38.010

尝试调用`#to_json`：

```
<%= raw @campaign_summary.as_json.to_json %> 
```

# silverlight - 使用 TCP/IP 的 C# dll 和 Silverlight 通信

> ID：12572083
> 
> 赞同：0
> 
> 时间：2012-09-24T20:03:30.710
> 
> 标签：silverlight

我可以使用 TCP/IP 在用 C# 编写的 dll 和 Silverlight 5 应用程序之间进行通信，它们都运行在同一台 Windows 7 机器上吗？是否有任何我应该注意的安全问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:30:40.667

开始的 DLL 必须是 Silverlight DLL，否则它将无法工作。Silverlight 无法访问来自非 Silverlight 项目的 dll。

如果它是 Silverlight dll，您可以在项目中设置对它的引用，它将在 XAP 文件中分发。

这个问题的 TCP/IP 部分并没有真正意义，因为它是您将使用（明确）调用 WCF 服务的协议，并且与问题无关。

编辑此外，如果 DLL 已在启用 COM 互操作的情况下编译，您可以使用后期绑定来调用它。

# file-upload - 使用自托管 Nancy 上传大文件示例

> ID：12572085
> 
> 赞同：7
> 
> 时间：2012-09-24T20:03:33.127
> 
> 标签：file-upload, large-files, self-hosting, nancy

有人可以发布一个示例，说明如何使用在自托管模式下运行的 NancyFx 上传大文件（例如 50MB）。该文件应从网页发送（method=post；enctype=multipart/form-data）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T14:37:49.083

我发现很难找到有关如何在 Nancy 中上传文件的文档，但这篇[文章](https://groups.google.com/forum/#!searchin/nancy-web-framework/file$20upload/nancy-web-framework/GS4X4diu8ZQ/YQqkPYnTEyYJ)指向了[这个 owin 托管示例](https://github.com/grumpydev/Nancy/blob/bc031972767ece944df63b14d32319129737a740/src/Nancy.Demo.Hosting.Owin/MainModule.cs#L33)，我发现它为我提供了所需的信息。

这与自托管中的大文件无关，但我认为这些信息可能对某人有用。

# sql - 包含序列的重复 postgresql 模式

> ID：12572088
> 
> 赞同：8
> 
> 时间：2012-09-24T20:03:43.393
> 
> 标签：sql, postgresql, database-schema, multi-tenant

我的数据库布局需要为每个新客户创建新模式。目前我使用的是我在网上找到的内部函数并稍作修改。

```
CREATE FUNCTION copy_schema(
    source_schema character varying, 
    target_schema character varying, 
    copy_data boolean)
RETURNS integer AS
$BODY$
DECLARE
    t_ex integer := 0;
    s_ex integer := 0;
    src_table character varying;
    trg_table character varying;
BEGIN
    if (select 1 from pg_namespace where nspname = source_schema) THEN
        -- we have defined target schema
        s_ex := 1;
    END IF;

    IF (s_ex = 0) THEN
        -- no source schema exist
        RETURN 0;
    END IF;

    if (select 1 from pg_namespace where nspname = target_schema) THEN
        -- we have defined target schema need to sync all table layout
        t_ex := 1;
    ELSE
        EXECUTE 'CREATE SCHEMA '||target_schema||' AUTHORIZATION user';
    END IF;

    FOR src_table IN 
       SELECT table_name 
       FROM information_schema.TABLES 
       WHERE table_schema = source_schema
    LOOP
        trg_table := target_schema||'.'||src_table;
        EXECUTE 
            'CREATE TABLE ' || trg_table || ' (LIKE ' || source_schema || '.' || src_table || ' INCLUDING ALL)';
        IF (copy_data = true) THEN
            EXECUTE 'INSERT INTO ' || trg_table || '(SELECT * FROM ' || source_schema || '.' || src_table || ')';
        END IF;
    END LOOP;

    return t_ex;
END;
$BODY$
LANGUAGE plpgsql VOLATILE
COST 100; 
```

这个脚本的问题是新模式中的表继续使用源模式的序列。有没有办法使用 sql 语句（或其他可靠的方式）为新创建的表获取序列的新副本（或者甚至是复制整个架构的另一种可靠方式）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T20:27:11.323

### 问题的根源

与旧序列的连接来自所涉及列的普通默认值。我在这里引用[手册](http://www.postgresql.org/docs/current/interactive/sql-createtable.html)：

> `INCLUDING DEFAULTS`仅当指定时才会复制复制的列定义的默认表达式。默认行为是排除默认表达式，导致新表中复制的列具有空默认值。

由于您使用

```
INCLUDING ALL 
```

和：

> `INCLUDING ALL`是 的缩写形式`INCLUDING DEFAULTS INCLUDING CONSTRAINTS INCLUDING INDEXES INCLUDING STORAGE INCLUDING COMMENTS`。

..你得到相同的默认值。您可以`nextval()`在创建新表后排除默认值或显式更改默认值，包括新表。我不认为有任何中间立场。

* * *

### 使用转储/破解转储/恢复更简单

> 甚至是复制整个架构的另一种可靠方法

您可以使用以下方式转储架构的架构（相同的词，不同的含义）`pg_dump`：

```
pg_dump $DB -p $PORT -n $SCHEMA -sf /var/lib/postgresql/your_name.pgsql 
```

破解转储（意思是：在其上使用文本编辑器，或对其编写脚本）：交换转储顶部的模式名称，以及所有其他出现在序列中的`SET search_path`和作为模式限定的序列，可能还有更多。如果您为模式选择了一个*唯一的名称*`sed`，那么用您最喜欢的工具（或`vim`或...）进行一次全局搜索和替换应该可以完成这项工作。

`psql`然后针对相同或任何其他数据库运行 SQL 脚本：

```
psql $DB -p $PORT -f /var/lib/postgresql/your_name.pgsql > /dev/null 
```

与我第一次发布的相反，串行列仍然在转储中拆分（至少在 PostgreSQL 9.1.5 中）。SQL 脚本分别创建序列，将它们附加到序列列：

```
ALTER SEQUENCE seq OWNED BY tbl.col; 
```

并单独设置默认值。

顺便说一句：当满足所有要求时，DDL 脚本中的 pgAdmin 逆向工程`serial`列的当前版本。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-24T22:15:52.607

因此，经过一番思考，我继续更新我第一篇文章中提到的 sql 函数，所以现在它看起来像这样：

```
CREATE FUNCTION copy_schema(
    source_schema character varying, 
    target_schema character varying, 
    copy_data boolean)
RETURNS integer AS
$BODY$
DECLARE
    t_ex integer := 0;
    s_ex integer := 0;
    src_table character varying;
    trg_table character varying;
BEGIN
    if (select 1 from pg_namespace where nspname = source_schema) THEN
        -- we have defined target schema
        s_ex := 1;
    END IF;

    IF (s_ex = 0) THEN
        -- no source schema exist
        RETURN 0;
    END IF;

    if (select 1 from pg_namespace where nspname = target_schema) THEN
        -- we have defined target schema need to sync all table layout
        t_ex := 1;
    ELSE
        EXECUTE 'CREATE SCHEMA '||target_schema||' AUTHORIZATION user';
    END IF;

    FOR src_table IN 
        SELECT table_name 
        FROM information_schema.TABLES 
        WHERE table_schema = source_schema
    LOOP
        trg_table := target_schema||'.'||src_table;
        EXECUTE 'CREATE TABLE ' || trg_table || ' (LIKE ' || source_schema || '.' || src_table || ' INCLUDING ALL)';
        EXECUTE 'CREATE SEQUENCE ' || trg_table || '_id_seq OWNED BY '||trg_table || '.id';
        EXECUTE 'ALTER TABLE ' || trg_table || ' ALTER COLUMN id SET DEFAULT nextval('''|| trg_table || '_id_seq''::regclass)';
        IF (copy_data = true) THEN
            EXECUTE 'INSERT INTO ' || trg_table || '(SELECT * FROM ' || source_schema || '.' || src_table || ')';
        END IF;
    END LOOP;
    return t_ex;
END;
$BODY$
LANGUAGE plpgsql VOLATILE
COST 100; 
```

这对每个人来说都不是很通用的解决方案，但由于我在模式中的所有表都有名为 id 的串行字段，所以它适合我。

@erwin-brandstetter 建议的带有转储/破解转储文件/恢复转储文件的版本在论坛上通常被视为要走的路。

在专用服务器的情况下它可以工作，在共享主机的情况下（或需要较少依赖外部脚本），内部功能的方式似乎更好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-12-07T17:49:38.453

您可以简单地备份模式，然后在数据库中重命名它，然后恢复备份的文件。

# c# - 通过遍历文件夹在 asp.net 中创建画廊

> ID：12572089
> 
> 赞同：-1
> 
> 时间：2012-09-24T20:03:45.833
> 
> 标签：c#, asp.net, webforms

我想在 asp.net 中创建一个画廊，它的工作方式如下：

*   遍历图库文件夹
*   选择所有文件夹并将它们显示为专辑，封面图片为该文件夹中的 thumbnail.jpg
*   单击相册时，它应该显示文件夹的内容（图像）。

我创建它的方法是遍历文件夹并根据专辑创建视图和链接按钮，并使用转发器控件在该视图中将专辑的内容显示为图像，但这并没有成功，因为它有很多错误在实施时。由于动态视图，我不得不在 on_init() 函数中编写整个内容。我可以实现 html 和 js 部分（如灯箱和其他视觉材料）。请通过一些代码示例提出一些更好的方法。请使用 c# 。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:46:22.053

我不能只给你写所有的代码......但我会给你一个启动代码：

```
int scanLVL = 4;//or however deep you need to go...
public  void GetImageFromDir(string sourceDir, int startLVL)
{
    if (startLVL <= scanLVL)
    {
        // Here you can process files found in the directory.
        string[] fileEntries = Directory.GetFiles(sourceDir);
        Label_showdata.Text +="<br />Dir:" +  Path.GetFileName(sourceDir) ;
        foreach (string fileName in fileEntries)
        {
            // do something with fileName
            String tree = "";
            for (int i = 0; i < startLVL; i++)
                tree += "&nbsp;&nbsp;&nbsp;";
            Label_showdata.Text += "<br />" + tree + Path.GetFileName(fileName);               
        }

        // Going in subdirectories of this directory.
        string[] subdirEntries = Directory.GetDirectories(sourceDir);
        foreach (string subdir in subdirEntries)

            if ((File.GetAttributes(subdir) &  FileAttributes.ReparsePoint) !=    FileAttributes.ReparsePoint)

                GetImageFromDir(subdir, startLVL + 1);
    }
} 
```

这将在您的网页上（实际上在那个 Label_showdata 中）打印所有文件和它们所在的目录。基本上从这里开始，您需要将这些数据包装到一个表格中，并将其绑定到您觉得舒服的任何控件中......实际上并不难......但是编写所有代码需要更多时间（时间不幸的是我现在没有……）

# c# - 只获取字符串的一部分

> ID：12572090
> 
> 赞同：-1
> 
> 时间：2012-09-24T20:03:50.140
> 
> 标签：c#, .net, html

这次我需要一些 C# 方面的帮助。

我有一个 html ：

```
<ul class="ui_sug_list"></ul></div></div></div></form>
</div></div><div class="cnt_listas"><ol id="listagem1" 
class="cols_2"><li><a href="/laura-pausini/73280/">16/5/74
</a></li><li><a href="/laura-pausini/73280/traducao.html">
16/5/74 (tradução)</a></li><li><a href="/laura-pausini/1566533/">16/5/74
(Spanish Version)</a></li><li><a href="/laura-pausini/1566533/traducao.html">
16/5/74 (Spanish Version) (tradução)</a></li><li><a href="/laura-pausini/1991556/">
A Simple Vista</a></li><li><a href="/laura-pausini/1991556/traducao.html">
A Simple Vista (tradução)</a></li> 
```

我下载了一个这样的html，它没有来自网络的表格。我只需要打印歌曲的名称和指向歌曲的链接。我不知道如何从文件中获取这些信息。

这是我下载文件的方式：

```
 // Realiza Download do arquivo
        WebClient webClient = new WebClient();
        webClient.DownloadFile(
        "http://letras.mus.br/" + termo_busca + "/", @"C:\Temp\letras.html"); 
```

你能帮我个忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:13:19.513

您绝对应该使用[HTML Agility Pack](http://html-agility-pack.net)。

您可以像这样获取链接和链接值：

```
 var doc = new HtmlAgilityPack.HtmlDocument();
 doc.LoadHtml(Html);
 foreach(HtmlNode link in doc.DocumentElement.SelectNodes("//a[@href"])
 {
    var value = link.Attributes["href"].Value; //gives you the link
    var text = link.InnerText; //gives you the text of the link
 } 
```

你也可以使用这个也使用 html 敏捷包的类：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Net;
using System.Text;
using System.Threading.Tasks;
using HtmlAgilityPack;

namespace Foo.Client
{
    public class Website
    {
        public string Html { get; private set; }

        private Website(string html)
        {
            Html = html;
        }

        public static Website Load(Uri uri)
        {
            validate(uri);
            return new Website(getPageContentFor(uri));
        }

        public List<string> GetHyperLinks()
        {
            var doc = new HtmlAgilityPack.HtmlDocument();
            doc.LoadHtml(Html);
            return extractLinksFrom(doc.DocumentNode.SelectNodes("//a[@href]"));
        }

        private static string getPageContentFor(Uri uri)
        {
            try
            {
                var request = (HttpWebRequest)WebRequest.Create(uri);
                var response = (HttpWebResponse)request.GetResponse();
                using (StreamReader reader = new StreamReader(response.GetResponseStream()))
                    return reader.ReadToEnd();
            }
            catch (WebException)
            {
                return String.Empty;
            }
        }

        private List<string> extractLinksFrom(HtmlNodeCollection nodes)
        {
            var result = new List<string>();
            if (nodes == null) return result;
            foreach (var link in nodes)
                    result.Add(link.Attributes["href"].Value);
            return result;
        }

        private static void validate(Uri uri)
        {
            if (!uri.IsAbsoluteUri)
                throw new ArgumentException("invalid uri format");
        }
    }
} 
```

# php - 如何使用 jQuery 从 php 数组中显示随机图像？

> ID：12572092
> 
> 赞同：0
> 
> 时间：2012-09-24T20:03:55.233
> 
> 标签：php, jquery, arrays, image

我一直在尝试以老虎机滚轮的风格创建一个随机图片显示动画。用户点击“旋转”，就会出现一个 gif 图像，呈现出老虎轮旋转的效果。当轮子停止时，旋转效果 gif 图像被随机成员的图片替换。但是，随机成员的照片没有出现。在萤火虫中，我可以看到数组被正确填充，并且成员图片（带有正确的 url）都存在。问题似乎是 jQuery 脚本没有将标签添加到图像要出现的位置，我不知道为什么。用于收集数组信息的 PHP 在这里：

```
$q = "SELECT id, username FROM members WHERE my_sex =:req_sex";
$stmt = $dbo->prepare($q);
$stmt->execute(array(":req_sex" => $req_sex));
while($r = $stmt->fetch()) {
$m_id = $r['id'];
$m_name = $r['username'];
$m_pic .= '"members/'.$m_id.'/minis/resized_image_'.$m_id.'_0.jpg", ';
}
$m_pic = rtrim($m_pic, ', '); 
```

我确定在某处不正确的 jQuery 在这里：

```
 $(document).ready(function(){ 
 images = new Array(<?php echo $m_pic; ?>);
 var length = images.length; 
 var which = Math.round(Math.random()*(length-1)); 
$('<img src="'+images[which]+'" alt="" class="randomMember"/>').prependTo('div#wheel');
}; 
```

我一直在玩这个并尝试了各种方法，并使用 firebug 进行调查，我设法实现的最好的方法是在 html 中显示以下行。

```
<img class="randomMember" alt="" src="" /> 
```

我不记得我是怎么做到的，但我认为它使用的是 document.write 而不是将它包装在一个函数中。我只使用 javascript 和 jQuery 一个星期左右，尽管进行了大量的谷歌搜索和阅读，但我不明白为什么这不起作用。提前致谢！

编辑：html如下：

```
 <div class="hidden_sidebox">
  <div id="chat_view">
  <div id="wheel">
  <img src="members/0/default_pic.jpg" alt="" class="preSpin" />
  <img src="images/randomChatWheel.gif" alt="" class="spinAnimation" style="top: -220px;" />   
 </div>

//here is where the problem jQuery script is...I think this is the correct place for it, as it will prependTo the previous div element (which I have explicitly specified anyway, just in case)

 <div id="btnPanel">
 <div id="chatButton">CHAT</div>
 <div id="spinButton">SPIN</div>
 </div>
 <div id="chatSplash"></div>
 </div>
 </div> 
```

车轮旋转的功能（除了最终图像无法显示之外，它完全可以工作）在这里：

```
$(document).ready(function() { 

$("div#chatSplash").click(function () { 
    $("div#chatSplash").slideUp("fast");
    $('img.randomMember').hide();
    $('img.spinAnimation').hide();
    $('div#spinButton').removeClass('ButtonDisabled');
    $('div#chatButton').removeClass('ButtonDisabled');
 });    

 $("div#spinButton").click(function () {
    $("img.preSpin").hide();
    $("img.spinAnimation").show();
    $('div#spinButton').addClass('ButtonDisabled');
    $('div#chatButton').addClass('ButtonDisabled');
    setTimeout(function(){$("img.spinAnimation").hide();
    $('img.randomMember').show();
    $('div#spinButton').removeClass('ButtonDisabled');
    $('div#chatButton').removeClass('ButtonDisabled');
    }, 2500);

        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:19:11.140

这里有一个简单的错误，你没有关闭括号。你有：

```
$(document).ready(function(){ . . .}; 
```

应该是哪个

```
$(document).ready(function(){ . . .}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:20:20.587

在 PHP 中试试这个：

```
$pictures = array();
while($r = $stmt->fetch()) {
    $pictures[] = sprintf('members/%d/minis/resized_image_%d_0.jpg', $r['id'], $r['id']);
} 
```

然后在 JS 中：

```
images = <?php json_encode($pictures); ?>; 
```

# html - 当存在左浮动图像时，使用悬挂缩进格式化段落

> ID：12572093
> 
> 赞同：1
> 
> 时间：2012-09-24T20:04:05.827
> 
> 标签：html, css, typo3

我有以下由 TYPO3 生成的 HTML（简化版）：

```
<div class="image">
    <img src="some-image.jpg"/>
</div>
<div class="text">
<p>
    <b>foo</b> Some text of varying length, sometimes multiple lines, sometimes not. sit amet enim ultrices a tempus nulla lobortis.
</p>
<p>
    <b>bar</b> Short text.
</p>
<p>
    <b>baz</b> Another paragraph. sit amet enim ultrices a tempus nulla lobortis. Cum ociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nullam sed felis mauris, in rhoncus nisl.
</p>

</div> 
```

图像 div 向左浮动，段落格式应为列表（悬挂缩进），`<b>`-tags 中的部分为项目符号。所以结果应该是这样的：

```
-------------------- foo Some text of varying length, sometimes
|                  |     multiple lines, sometimes not. sit amet enim
|                  |     ultrices a tempus nulla lobortis.
|      Image       | 
|                  | bar Short text.
--------------------
baz Another paragraph. sit amet enim ultrices a tempus nulla lobortis.
    Cum ociis natoque penatibus et magnis dis parturient montes, nascetur
    ridiculus mus. Nullam sed felis mauris, in rhoncus nisl. 
```

我如何实现这种行为？

我的尝试是用 . 缩进整个段落，`p {padding-left: 50px;}`用 . 缩进粗体标签`p b:first-child {margin-left: -50px;}`。如果没有图像或图像向右浮动，则效果很好，但是当图像向左浮动时，“项目符号”（`<b>`-tags）会呈现在图像顶部。我也尝试过其他方法（使用文本缩进等），但问题基本保持不变。

该解决方案*不需要*(:-)) 在 IE6 上运行，如果它在其他浏览器中不起作用，那可能是可以接受的。

**编辑：**好的，我有一个使用 TYPO3 工具的解决方案：将内容元素的图像外观类型从“文本左侧”更改为“除了文本，左侧”。`div`然后 TYPO3 为with 类添加了足够大的左边距`text`，一切正常。如果列表比图像长，则必须将内容元素一分为二，以使图像下方的段落再次向左显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:32:05.777

```
<div class="contain">
<div class="image">
<img src="some-image.jpg"/>
</div>
<div class="text">
<p style="margin-bottom:20px;text-indent:-20px;">
<b>foo</b> Some text of varying length, sometimes multiple lines, sometimes not. sit amet enim ultrices a tempus nulla lobortis.
</p>
<p style="text-indent:-20px;" >
<b>bar</b> Short text.
</p>
<p style="clear:both;text-indent:-20px;margin-left:20px;">
<b>baz</b> Another paragraph. sit amet enim ultrices a tempus nulla lobortis. Cum ociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nullam sed felis mauris, in rhoncus nisl.
</p>
</div>
</div>​ 
```

CSS：

```
.contain{
  width:400px;
 }
.image{
 margin-top:15px;
 margin-right:30px;
 float:left;
 width:120px;
 height:80px;
 border:thin red solid;
 }​ 
```

[演示](http://jsfiddle.net/afshinprofe/3f4cC/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T20:13:09.473

我不太确定这是您要找的东西，但是`clear: both;`当我想从浮动对象中“逃脱”时，我会在我的 CSS 中使用。

```
.clearfloat
{
    clear:both;
} 
```

例如：

```
<img class="float"> ... </>
<h1 class="clearfloat"> Hello </h1> 
```

# vba - 有效循环检查 VBA

> ID：12572094
> 
> 赞同：0
> 
> 时间：2012-09-24T20:04:08.993
> 
> 标签：vba, excel, excel-2007

**摘要：**我的公司有两个不同的电子表格，每个电子表格都有许多政策。他们希望我通过策略 ID 匹配策略，并将所有旧笔记从旧电子表格转移到新电子表格。

**推理：**我的问题不是不了解如何做到这一点，而是做到这一点的最佳方法。自从加入 StackOverflow 以来，我一直被告知我应该做和不应该做的事情。我曾多次被告知最好使用`For Each`循环而不是简单的`Do`循环。另外，有人告诉我我不应该`.Select`大量使用（但我确实这样做了）。

**我通常会怎么做：**我通常只使用`Do`循环并浏览数据，只是选择使用`.Find`和使用的数据`ActiveCell`，当我想与当前行中的其他列交互时，我只会使用`ActiveCell.Offset()`. 我倾向于一直喜欢`.Select`并使用它，但是在这个项目中，我试图让自己跳出框框，也许会改变一些不好的编码习惯并开始使用可能更好的东西。

**问题：**`ActiveCell.Offset()`当我使用`For Each`循环时，我将如何去做相当于 an 的事情？

**到目前为止我的代码：** **欢迎提出问题/批评

```
Sub NoteTransfer()

    transferNotes

End Sub
Function transferNotes()

    Dim theColumn As Range
    Dim fromSheet As Worksheet
    Dim toSheet As Worksheet
    Dim cell As Range
    Dim lastRow As Integer

    Set fromSheet = Sheets("NotesFrom")
    Set toSheet = Sheets("NotesTo")

    With fromSheet                      'FINDING LAST ROW
        lastRow = .Range("B" & .Rows.Count).End(xlUp).Row
    End With

    Set theColumn = fromSheet.Range("B5:B" & lastRow)

    For Each cell In theColumn          'CODE FOR EACH CELL IN COLUMN

        If cell.Text = "" Then

            'do nothing

        Else

            With toSheet         'WANT TO FIND DATA ON THE toSheet

                Cells.find(What:=cell.Text, After:=ActiveCell, LookIn:=xlFormulas, _
                LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                MatchCase:=False, SearchFormat:=False).Activate

            End With

        End If

    Next cell

End Function 
```

例子

![示例图片仅供参考](../Images/ebac735fe5b3bbaa0a5f1ffd2760d684.png)

工作表底部

![工作表的底部。](../Images/a2a8edc526092da6fc4a73137567a920.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:36:47.067

首先，你的问题：

`Question: How would I go about doing the equivalent of an ActiveCell.Offset() when I'm using a For Each loop?`

考虑到您发布的代码，这没有多大意义。这是一个非常笼统的问题，需要一些上下文才能更好地理解。这真的取决于你的循环。如果您从 ActiveCell 循环连续范围的单元格，那么您可以说...

```
For each cel in Range
    myValue = ActiveCell.Offset(,i)
    i = i + 1
Next 
```

获取循环中每个单元格旁边的列。但总的来说，我不会称之为*伟大的*编程。就像我说的，上下文很重要。

就您的代码而言，看看这是否有意义。我已经编辑和评论来帮助你一点。哦，是的，干得好，不使用`Select`！

```
Sub transferNotes() '-> first no need for a function, because you are not returning anything...
                       'and no need to use a sub to call a sub here as you don't pass variables,
                       'and you don't have a process you are trying to run

    Dim theColumn As Range, cell As Range '-> just a little cleaner, INMHO
    Dim fromSheet As Worksheet, toSheet As Worksheet '-> just a little cleaner, INMHO
    Dim lastRow As Integer

    Set fromSheet = Sheets("NotesFrom")
    Set toSheet = Sheets("NotesTo")

    With fromSheet ' -> put everything you do in the "fromSheet" in your With block

        lastRow = .Range("B" & .Rows.Count).End(xlUp).Row 'FINDING LAST ROW
        Set theColumn = .Range("B5:B" & lastRow)

        theColumn.AutoFilter 1, "<>"

        Set theColumn = theColumn.SpecialCells(xlCellTypeVisible) '-> now you are only looping through the cells are that are not blank, so it's more efficient

        For Each cell In theColumn

            '-> use of ActiveCell.Offset(), it's not ActiveCell.Offset(), but it uses Offset
            Dim myValue
            myValue = cell.Offset(, 1) '-> gets the cell value in the column to the right of the code

            'WANT TO FIND DATA ON THE toSheet
            toSheet.Cells.Find(What:=cell.Text, After:=ActiveCell, LookIn:=xlFormulas, _
                LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                MatchCase:=False, SearchFormat:=False).Activate

        Next cell

    End With

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T20:43:56.947

这是我目前的建议。

```
Function transferNotes()

    Dim SourceColumn As Range
    Dim fromSheet As Worksheet
    Dim toSheet As Worksheet
    Dim cell As Range
    Dim lastRow As Long '<--changed to Long

    Set fromSheet = Sheets("NotesFrom")
    Set toSheet = Sheets("NotesTo")

    With fromSheet                      'FINDING LAST ROW
        lastRow = .Range("B" & .Rows.Count).End(xlUp).Row
    End With

    Set SourceColumn = fromSheet.Range("B5:B" & lastRow)

    For Each cell In SourceColumn          'CODE FOR EACH CELL IN COLUMN
        If cell.Value = "" Then 'the .Text property can
                                'make for some confusing errors.
                                'Try to avoid it.
            'nothng to search for
        Else
            With toSheet         'WANT TO FIND DATA ON THE toSheet
                Dim destRng As Range

                Set destRng = .Range("A:A").Find(What:=cell.Value)
                If Not destRng Is Nothing Then
                    .Cells(destRng.Row, <your mapped column destination>)
                        = fromSheet.Cells(cell.Row,<your mapped column source>)
    ' you can either repeat the above line for all of your non-contiguous
    'sections of data you want to move from sheet to sheet
    '(i.e. if the two sheets are not arranged the same)
    'if the two sheets are aranged the same then change
    'the .cells call to call a range and include
    'the full width of columns
                Else
                    'nothing was found
                End If

            End With
        End If
    Next cell

End Function 
```

# delphi - Indy SMTP 在 Connect 方法上挂起或冻结

> ID：12572096
> 
> 赞同：1
> 
> 时间：2012-09-24T20:04:11.567
> 
> 标签：delphi, smtp, c++builder, indy

我有一个客户端试图连接 SMTP 服务器。我将 OnStatus 事件链接到 smtp 客户端并查看

Resolving / Connecting / Connected 状态。但有时在尝试连接时会挂断/应用程序冻结。不过，我看到 OnStatus 引发了 Connected 状态。可能是什么问题。我排除了 smtp 上的 Resolving DNS ans et both ConnectTimeout 和 Readtimeout 设置，如下所示：

```
 smtp.OnStatus := SMTPStatus;
  smtp.ConnectTimeout := 10000;
  smtp.ReadTimeout := 10000;
  smtp.Connect;
  // SOMETIMES MY LOG DOES NOT GET HERE Log('AfterConnect');
  if smtp.Connected then
  begin
    smtp.Send(Mess);
    smtp.Disconnect;
  end 
```

在大约 600KB 的附件上，它似乎卡在对附件部分进行编码并且永远不会完成，目前编码类型是默认类型。

```
10/3/2012 10:21:43 AM  Status: Resolving hostname XXXXXXXXXX.com.
10/3/2012 10:21:43 AM  Status: Connecting to 10.5.2.171.
10/3/2012 10:21:44 AM  Status: Connected.
10/3/2012 10:21:45 AM  Status: Encoding text
10/3/2012 10:21:45 AM  Status: Encoding attachment 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:20:34.777

如果`OnStatus`事件正在报告`hsConnected`，那么您已物理连接到服务器。如果`Connect()`之后没有退出，那么它可能会阻塞等待来自服务器的未到达的数据，例如服务器的初始问候语。不过，`ReadTimeout`应该处理这种可能性（除非您`OnConnected`分配的事件处理程序正在陷入僵局，也就是说）。使用数据包嗅探器（例如 Wireshark）来确保您实际连接到您期望的服务器，并且它正在发送正确类型的`TIdSMTP`期望问候数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:08:27.200

许多 SMTP 服务器被配置为将初始问候消息延迟 30 秒左右以尝试阻止垃圾邮件，而且大多数服务器可以配置为拒绝来自相同 IP 地址的连接，如果它在指定的时间段内尝试多次连接（通常为 1 分钟）。这可能是导致您出现问题的原因。

# ruby-on-rails - Rails 搜索数组数组

> ID：12572097
> 
> 赞同：1
> 
> 时间：2012-09-24T20:04:14.850
> 
> 标签：ruby-on-rails, arrays, include, conditional

我有一个这样的数组数组：`[[1, "dog"], [2, "cat"], [2, "bird"], [3, "monkey"]]`. 我想检查较大的数组是否包含给定数量的数组，而不考虑数组的动物元素。我也*不想*遍历数组，因为这会变得计算量很大。

所以类似于`@boolean = bigArray.include?([2, *])`，除了实际有效的东西......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T20:06:18.943

您有两种可能的解决方案。检测数组中的元素或将数组转换为`Hash`

**1.**使用[Enumerable#detect](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-detect)，一旦找到匹配就会停止并返回，`nil`否则。

```
> a = [[1, "dog"], [2, "cat"], [2, "bird"], [3, "monkey"]]
 => [[1, "dog"], [2, "cat"], [2, "bird"], [3, "monkey"]] 
> a.detect{ |(n, _)| n == 2 }
 => [2, "cat"]
> a.detect{ |(n, _)| n == 10 }
 => nil 
```

如果您想像示例一样将其添加到`Array`类中，并强制它返回布尔值，请执行以下操作：

```
class Array
  def custom_include?(num)
    !!detect{ |(n, _)| num == n }
  end
end 
```

例子：

```
> a.custom_include?(2)
 => true 
> a.custom_include?(10)
 => false 
```

**2.**如果你不关心碰撞键，你可以将数组转换为a `Hash`，看看键是否存在。

```
> a = [[1, "dog"], [2, "cat"], [2, "bird"], [3, "monkey"]]
 => [[1, "dog"], [2, "cat"], [2, "bird"], [3, "monkey"]] 
> Hash[a][2]
 => "bird"
> Hash[a][10]
 => nil 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:23:52.650

一种不涉及循环的非常简单的方法是将结构转换为哈希。您的数组恰好是为此的理想格式：

```
values = [[1, "dog"], [2, "cat"], [2, "bird"], [3, "monkey"]]

Hash[values][2] # "bird" 
```

您将丢失每个键的第一个值，但它将用于显示键是否存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-19T09:31:18.733

我们可以使用这个：

```
arr = [[1, "dog"], [2, "cat"], [2, "bird"], [3, "monkey"]]
arr.assoc(2) 
```

它将返回 [2, cat]

如果元素不存在，则在数组中

```
arr.assoc(10) 
```

返回零

# sql - SQL Server 2005 使用查找表更新查询

> ID：12572100
> 
> 赞同：2
> 
> 时间：2012-09-24T20:04:32.633
> 
> 标签：sql, sql-server, sql-server-2005

我有两张桌子；

技术查询表

```
OSID  OSValue  

1     UNIX             
2     ORACLE            
3     .NET 
4     SQL    
5     SAP  

------------------ 
```

员工技术

```
empID   OSID

34      1
37      2
45      2
34      4
45      6 
```

员工 ID NO 37 不再使用 ORACLE。他转向了 SAP。即 OSID 应该在第二个表中从 2 更新为 5。

我有一个临时表，其中包含技术和员工 ID 的值

请帮助我 - 编写一个连接以上两个表的查询 - 查找 SAP 技术的 ID，并使用该 ID 更新第二个表。

```
Update emp
Set emp.OSID = (Select OSID from technologylookup where OSValue = tmptbl.technologyname)
FROM employee_tech emp INNER JOIN #Temptbl tmptbl ON emp.emp_id = tmptbl.emp_id 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:22:41.653

将您的查找表加入临时表，然后使用该表中的 ID 更新 employee_tech 表

```
Update emp
   Set emp.OSID = tl.OSID
FROM employee_tech emp 
INNER JOIN #Temptbl tmptbl 
   ON emp.emp_id = tmptbl.emp_id
INNER JOIN technologylookup tl
   ON tl.OSValue COLLATE DATABASE_DEFAULT = tmptbl.technologyname 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:23:14.667

在我的脑海中，未经测试：

```
update employee_tech
set osid = t.osid
from #Temptbl tmp
inner join employee_tech e on e.emp_id = tmp.emp_id
inner join technologylookup t on t.osvalue = tmp.technologyname 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T20:23:24.733

如果临时表中的“技术”等于 ID，则可以这样更新。

```
UPDATE employee_tech
SET OSID = (SELECT technology FROM #Temptbl AS T INNER JOIN employee_tech AS E ON T.empID = E.empID) 
```

# ruby-on-rails - Rails 从脚手架生成错误的属性名称

> ID：12572103
> 
> 赞同：1
> 
> 时间：2012-09-24T20:04:43.383
> 
> 标签：ruby-on-rails

我正在编写一个关于视频游戏系统的 Rails 应用程序。我使用脚手架生成包含字段的模型

```
:owns_ps_vita
:owns_nintendo_wii_u 
```

但我明白了：

```
 undefined method `owns_ps_vita' 
```

在 /app/views/mymodel/_form.html.erb 页面上。

我打开了rails控制台并做了

```
 MyModel.new 
```

并在结果中看到：

```
 owns_playstation_3: nil, owns: nil, ps_vita: nil,
  owns_nintendo_wii: nil, owns_nintendo_wii_ 
```

有一个额外的“拥有”应该附加到 ps_vita，并且 u 从任天堂 wii u 中删除。

我检查了 app/models/MyModel.rb 文件，它看起来是正确的。

```
 owns_nintendo_wii, :owns_nintendo_wii_u, :owns_playstation, :owns_playstation_2, :owns_playstation_3, :owns_ps_vita, 
```

我在终端中向上滚动并验证我的脚手架在那个位置周围没有错字，它看起来很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:12:36.293

如果您还没有`schema.rb`文件，请运行`rake db:migrate`以创建数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T21:40:54.297

我看到你做了什么。当你创建迁移时，你做了这样的事情吗？

```
rails g migration add_stuff owns_nintendo_wii_u:string owns ps_vita:string
                                                           ^
                                                          (space) 
```

看起来您的迁移运行并创建了 2 列： `owns`和`ps_vita`. 您可以通过直接查看`schema.rb`或检查数据库来验证这一点。

如果您使用的是 sqlite，那么您可以这样做：

```
$ sqlite3 db/development.sqlite3

> .schema
  (spits out schema)
> .exit 
```

# algorithm - 最优座位安排算法

> ID：12572112
> 
> 赞同：2
> 
> 时间：2012-09-24T20:05:32.813
> 
> 标签：algorithm

一排有二十五个吧台凳。进入酒吧的顾客遵循以下两条规则：

1.  顾客总是坐在离任何其他顾客最远的座位上。
2.  一个客户永远不会坐在另一个客户旁边。

使用这两个规则，您应该将第一个顾客放在哪里，以便最大数量的顾客可以坐在吧台上？

我可以在 25 次大便的情况下解决它。但我想不出 n 个凳子的通用算法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T20:13:57.317

听起来，这几乎与兰德尔·门罗 (Randall Munroe) 撰写的出色分析的[国际小便池选择协议(ICUP) 完全相同，包括封闭式方程和最佳小便池计数图。](http://blog.xkcd.com/2009/09/02/urinal-protocol-vulnerability/)在阅读此答案的其余部分之前，您应该阅读他的文章。

* * *

兰德尔在帖子中提到：

> [我]如果你进入一间浴室，一排空置的小便池数量令人尴尬，而不是选择一个末端的小便池，你可以走三分之一的路。这会将尴尬的行分成两个最佳行，将最坏的情况变成最好的情况。

虽然他没有比这更详细，但它暗示了我们正在尝试做的事情。如果我们的小便池（或凳子，在我们的例子中）的数量令人尴尬，我们可以尝试让第一个人坐在座位上，这样他们就成为两个不同的最佳子组的末尾。

对于 7 个席位，基本的选择行为可以解决这个问题：

```
1 _ _ 3 _ _ 2 
```

留下四个空位。但是，如果我们将第一个人安置在位置 3，我们将获得最佳的 3 和 5 子组，从而将我们的可能乘员增加一个。

```
3 _ 1 _ 4 _ 2 
```

对于 25，基本行为同样是次优的，导致 9/25 的入住率在*尴尬*之前：

```
1 _ _ 6 _ _ 4 _ _ 7 _ _ 3 _ _ 8 _ _ 5 _ _ 9 _ _ 2 
```

但是我们可以让某人坐在第 9 位，创建最佳的 9 17 个子组，如下所示：

```
3 _ 8 _ 5 _ 9 _ 1 _ 10 _ 6 _ 11 _ 4 _ 12 _ 7 _ 13 _ 2 
```

导致最佳的 13/25 入住率。

更一般地说，我相信找到小于座位数的最大最佳数量，并让第一个人坐在那里（在 25 人的情况下，即 17 人，相当于从另一个方向算起的第 9 人）将始终最大化可占用椅子的数量。在最坏的情况下，比如 25，这相当于`ceil(n/3)`Randall 提到的。

在平均情况下（使用基本座位行为既不是最好的也不是最差的），我们不能总是通过只安排第一个人就座来达到 50% 的占用率，因为我们只能创建一个最佳子组，而将另一个子组留在不太理想的位置。因此，我们采用最大的最优子组以最小化次优座位的数量。例如，对于 20 个座位，我们取 17 个并创建一个 17 4 组，这样可以优化尽可能多的座位，只留下两个连续空的座位：

```
2 _ 7 _ 4 _ 8 _ 3 _ 9 _ 5 _ 10 _ 1 _ _ 6 
```

这四组实际上在技术上既是最好的情况也是最坏的情况，但希望你能看到这种模式将如何扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-12T22:10:50.327

当你实际画图的时候，你会发现答案会很简单。例如，在以下情况下，您可以轻松地从左侧或右侧或中间选择座位。

Eg1 OOO---XOX--1

eg2 OOOOO--XOOOX--XOXOX--从3分解为1

Eg3 OOOOOOOOO--XOOOOOOOX--XOOOXOOOX--XOXOXOXOX--从7分解到3到1。

从这些例子中，我们可以做出如下陈述： 假设我们在两个选定的座位之间有一个空闲座位范围，当这些空闲座位的数量 N = 2^n-1 时，我们可以得到最大的座位选择范围。

证明：

1.  基本情况：当n=1时，N=1，即XOX满足要求。
2.  假设当 n <= k(with k>1) 时为真，这意味着当 2 个选定座位之间的空闲座位数为 N = 2^k-1 时，我们可以达到最大选择。对于 k+1 的情况，我们将有 N=2^(k+1)-1。然后我们可以在这个范围内选择中间的座位，把空闲的座位分成2段，每段的个数N' = (N-1)/2 = (2^(k+1)-1-1)/2 =2^k-1，从我们的假设来看是正确的。

所以这个问题的算法是：

给定座位数N，求2^n-1 < N-3的最大个数，然后测试N-1-(2^n-1)-1-1是否是2^m-1的形式.

在N=25的情况下，我们可以发现15是25以下的最大数，形式为2^4-1。由于 25-1-15-1-1 = 7 女巫是 2^3-1 的形式。所以25个座位可以达到最大选择。根据我们的分析，我们可以在 17 点或 9 点选择第一个座位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T03:02:09.090

以下是我的分析。

为了争论起见，假设第一个人坐在中间的某个地方，不要太靠近两端。这将给我们一个像这样的模式，其中 x 表示占用座位，_ 表示空闲座位：

```
_ _ _ ... _ x _ ... _ _ _ 
```

第一个坐在这个人左边的顾客将坐在最左边。同样，第一个坐在此人右侧的顾客将坐在最右端。这给我们留下了这样的模式，其中 -m- 表示 m 个连续的空闲座位：

```
x _ -m- _ x _ -n- _ x 
```

将此称为“基本配置”，座位总数为 s = m + n + 7。

好的，现在我们的问题被分成大小为 m 和 n 的两个子问题，每个子问题都将由坐在尽可能靠近每个区域中间的客户来填充。

对于最大的最终入住率，我们希望 m 和 n 是“理想”数字，定义如下：

```
a is ideal if a = 2b + 3 and b is ideal  (i.e., we will get -b- _ x _ -b-). 
```

这里的想法是，理想数量的座位可以通过（1）占据 a 的中间座位和（2）递归求解大小为 b 的两个子问题来最大程度地占据。

最不理想的数是 1。

由此，我们可以建立前几个理想数字：

```
1, 5, 13, 29, ... 
```

现在，对于 s = 25，我们的基本配置是 25 = m + n + 7，我们希望 m 和 n 是理想的。嗯，25 - 7 = 18 和 18 = 5 + 13，这是理想的！

因此，对于 25 个座位​​，我们将第一个人坐在 4 + 5 = 9 或 4 + 13 = 17 的座位上，并且我们保证以最大占用率结束。

在我们结束之前要检查的最后一件事：如果第一位顾客坐在凳子上怎么办？然后，在第二个客户坐下后，我们将

```
x _ -m- _ x 
```

其中 m 必须是一个理想的数字。对于 25 个座位​​，这给出了 25 - 4 = m = 21，这并不理想。因此，第一位顾客不能坐在任何一端，最多可容纳 25 个座位​​。

呸呸呸呸！

# ios - ios如何在Xcode中创建简单的相机覆盖？

> ID：12572113
> 
> 赞同：9
> 
> 时间：2012-09-24T20:05:32.743
> 
> 标签：ios, xcode, camera

正如标题所说，我需要在使用`UIImagePickerController`. 我想`.png`在相机上添加非常简单的文件（如空框），但我不知道该怎么做。

我已经检查了这个网页上的大部分教程，但大部分都不懂。对我来说似乎很难，将一个简单`.png`的文件添加到相机覆盖应该比这更容易。

```
(IBAction) getPhoto:(id) sender {
    UIImagePickerController * picker = [[UIImagePickerController alloc] init];
    picker.delegate = self;

    if((UIButton *) sender == choosePhotoBtn) {
        picker.sourceType = UIImagePickerControllerSourceTypeCamera;
    } else {

    }

    label1.text =@"PHOTO ACTION";

    [self presentModalViewController:picker animated:YES];
}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    [picker dismissModalViewControllerAnimated:YES];
    imageView.image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
} 
```

我应该在哪里实现我的覆盖代码？我应该使用哪些课程，我该怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-24T20:27:12.103

有一个`UIImagePickerController`叫做的属性`cameraOverlayView`。它是`UIView*`一个`picker`.

好的，这是代码（我没有测试过）

```
(IBAction) getPhoto:(id) sender 
{
    UIImagePickerController * picker = [[UIImagePickerController alloc] init];
    picker.delegate = self;

    // creating overlayView
    UIView* overlayView = [[UIView alloc] initWithFrame:picker.view.frame];
    // letting png transparency be
    overlayView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"yourimagename.png"]];
    [overlayView.layer setOpaque:NO];
    overlayView.opaque = NO;

    picker.showsCameraControls = NO;
    picker.cameraOverlayView = overlayView;

    if((UIButton *) sender == choosePhotoBtn) 
    {
         if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
         {
             [picker setSourceType:UIImagePickerControllerSourceTypeCamera];
         } else {
             //do something if the device has no camera or if the camera is disabled in settings (it cannot be assumed that the camera is available/not broken)
         }
    } else {

    }

    label1.text =@"PHOTO ACTION";

    [self presentModalViewController:picker animated:YES];
} 
```

当然，您可以使用一些自定义`UIView*`子类而不是创建标准`UIView* overlayView`，但其他一切都将保持不变。

# jquery - ie 8 上的 event.target

> ID：12572115
> 
> 赞同：0
> 
> 时间：2012-09-24T20:05:43.260
> 
> 标签：jquery

jquery新手在这里。

在ie8中使用**event.target**有问题吗？

它似乎在 ie9 和我的 android 上工作。

这是我的代码：

```
 <script type="text/javascript">
   $(function() {
       $('#myMenu')[0].onclick = function(event) {
       var selected = event.target.innerHTML;
       var url = 'RedirectMenu.aspx?val=' + selected;
       location.href = url;
       }
   });
 </script> 
```

html是

```
 <ul id="myMenu">
 <li><a href="#">Generic Clinical Tasks</a></li> 

 <li><a href="#">Facility</a>   
    <ul class="level2">
     <li><a href="#">Change Facility or Unit  </a></li> 
     <li><a href="#">Edit Facility nformation</a></li>  
     <li><a href="#">Doctors</a></li>
     <li><a href="#">Nurses</a></li> 
    </ul>
</li>

 <li><a href="#">Patient</a>   
    <ul class="level2">
etc... 
```

澄清一下-正如我所说，我是新手。这就是我能够选择项目的方式，而不仅仅是单击菜单项之一。

我应该如何使用 jquery 来做到这一点？

现在，'selected' 的值

var selected = event.target.innerHTML;

是医生，当单击医生菜单项时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:08:17.120

由于您使用的是 jQuery。您可以像下面这样绑定**[点击](http://api.jquery.com/click/)**事件，

```
 $(function() {

       $('li', $('#MyMenu').click(function(event) {
          var selected = $(this).text(); // event.target.innerHTML;
          var url = 'RedirectMenu.aspx?val=' + selected;
          location.href = url;
       });
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:21:36.617

您可以使用 jQuery 进行点击处理。显示您的 html 将有助于更好地回答您的问题。

```
$("#myMenu").click(function() {
  var url = 'RedirectMenu.aspx?val=' + $(this).html();
  location.href = url;
}); 
```

# php - mac osx 上的 php_posix

> ID：12572121
> 
> 赞同：1
> 
> 时间：2012-09-24T20:06:00.513
> 
> 标签：php, macos, posix

我正在尝试在 Mac OsX 10.6 上启用对 php 5.3.6 的 php_posix 函数支持。

虽然 php doc 说 posix 函数默认启用，（[http://php.net/manual/en/posix.installation.php](http://php.net/manual/en/posix.installation.php)）

如果我使用 posix_isatty() 函数运行 php 脚本，我会收到一个错误：致命错误：调用未定义的函数 posix_isatty()

??

按照 php 文档的建议，我的 safe_mode 设置为 Off。我用macport安装php，好像他们没有使用--disable-posix。

这是证明它的我的 phpinfo() 的一部分：

> 配置命令 './configure' '--prefix=/opt/local' '--mandir=/opt/local/share/man' '--infodir=/opt/local/share/info' '--with- config-file-path=/opt/local/etc/php5' '--with-config-file-scan-dir=/opt/local/var/db/php5' '--disable-all' '--enable -bcmath' '--enable-ctype' '--enable-dom' '--enable-fileinfo' '--enable-filter' '--enable-hash' '--enable-json' '--enable- libxml''--enable-pdo''--enable-phar''--enable-session''--enable-simplexml''--enable-tokenizer''--enable-xml''--enable-xmlreader ' '--enable-xmlwriter' '--with-bz2=/opt/local' '--with-mhash=/opt/local' '--with-pcre-regex=/opt/local' '--with -readline=/opt/local''--with-libxml-dir=/opt/local' '--with-zlib=/opt/local' '--without-pear' '--disable-cgi' '--with-apxs2=/opt/local /apache2/bin/apxs'

如果我运行`php -m`， php_posix 不会出现在模块列表中。

所以我在这一点上的结论是：它没有安装。

我该如何安装它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-27T16:46:29.807

Mac Ports 有一个 PHP Posix 模块的包：

```
sudo port install php55-posix 
```

将 55 替换为您安装的 php 版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T21:07:50.040

我认为问题在于，您正在使用开关“--disable-all”，据我所知，它会停用*所有*扩展，包括 posix。如果您确实需要停用某些扩展，我建议您在不使用“--disable-all”的情况下构建 PHP，并使用特定于扩展的“--disable...”开关。

# sql - SQL中的缓存SQL ZDATETIME函数？

> ID：12572130
> 
> 赞同：1
> 
> 时间：2012-09-24T20:06:46.277
> 
> 标签：sql, intersystems-cache

我可以在 Cache SQL 中使用什么函数（类似于 ObjectScript 中的 ZDATETIME()）将纪元时间戳的秒数转换为 UTC 时间戳？我查看了文档，只能找到有关在对象脚本中执行此操作的信息...您可以在 SQL 中使用什么函数？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:48:02.300

我认为您正在寻找这样的东西；

```
DECLARE @epoch INT
SET @epoch = 1348519792
SELECT DATEADD(MINUTE, DATEDIFF(MINUTE, GETUTCDATE(), GETDATE()), DATEADD(s, @epoch, '19700101 00:00:00:000')) 
```

* * *

**[SQL小提琴](http://sqlfiddle.com/#!3/d41d8/4640)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T20:40:03.837

想通了，我不得不手动转换它。我花了很长时间试图找到一个预先存在的功能，但我是这样做的：

```
select 
    TO_CHAR(substr(audit.stamp,1,5),'YYYY-MM-DD') AS Date,
    CASE LEN(CAST(substr(audit.stamp,7)/3600 AS INT))
    WHEN 2 THEN CAST(substr(audit.stamp,7)/3600 AS INT)
    ELSE '0' || CAST(substr(audit.stamp,7)/3600 AS INT)
    END || ':' ||
    CASE LEN(CAST((substr(audit.stamp,7)/60)#60 AS INT))
    WHEN 2 THEN CAST((substr(audit.stamp,7)/60)#60 AS INT)
    ELSE '0' || CAST((substr(audit.stamp,7)/60)#60 AS INT)
    END || ':' ||
    CASE LEN(CAST(substr(audit.stamp,7)#60 AS INT))
    WHEN 2 THEN CAST(substr(audit.stamp,7)#60 AS INT)
    ELSE '0' || CAST(substr(audit.stamp,7)#60 AS INT)
    END AS Time
from utility.audit 
```

取自缓存 SQL 参考手册：

```
CLOCKTIME    
  NEW
  SET Time=$PIECE($HOROLOG,",",2)
  SET Sec=Time#60
  SET Totmin=Time\60
  SET Min=Totmin#60
  SET Milhour=Totmin\60
  IF Milhour=12 { SET Hour=12,Meridian=" pm" }
  ELSEIF Milhour>12 { SET Hour=Milhour-12,Meridian=" pm" }
  ELSE { SET Hour=Milhour,Meridian=" am" }
  WRITE !,Hour,":",Min,":",Sec,Meridian
  QUITCLOCKTIME    
  NEW
  SET Time=$PIECE($HOROLOG,",",2)
  SET Sec=Time#60
  SET Totmin=Time\60
  SET Min=Totmin#60
  SET Milhour=Totmin\60
  IF Milhour=12 { SET Hour=12,Meridian=" pm" }
  ELSEIF Milhour>12 { SET Hour=Milhour-12,Meridian=" pm" }
  ELSE { SET Hour=Milhour,Meridian=" am" }
  WRITE !,Hour,":",Min,":",Sec,Meridian
  QUIT 
```

谢谢！

# php - 禁用 cookie 的 PHP 会话，它有效吗？

> ID：12572134
> 
> 赞同：51
> 
> 时间：2012-09-24T20:07:23.687
> 
> 标签：php, session, cookies

今天我在 Skype 上面试了一份 PHP 开发人员的工作，其中一个问题是关于 Cookies 和 PHP Sessions。

问题是，如果在用户浏览器中禁用了 Cookie，是否可以设置和读取、使用 PHP 会话？

我告诉他们不要，因为默认情况下 PHP 会话依赖于设置会话 cookie。当 PHP 会话开始时，新会话 Cookie 设置为默认名称 PHPSESSID，并且该 cookie 保存该会话 id 的值，例如： ftu63d8al491s5gatuobj39gk7 然后在 tmp 文件夹文件 sess_ftu63d8al491s5gatuobj39gk7 的 apache 服务器上创建并保存该会话的内容，例如: test1|s:12:"SessionTest1";test2|s:12:"SessionTest2";

他们告诉我这不是真的，即使用户在其浏览器中禁用 cookie，您也可以使用 PHP 会话。

然后我告诉他们你可以这样做，但是会话 ID 将作为 GET 变量通过 URL 传递。这并不安全，您必须在 php.ini 中进行设置。

他们在谈论即使在浏览器中禁用了 Cookie 也如何使用 PHP 会话。如果我们正在建立网上商店，而一些奶奶使用我们的网上商店并禁用了 cookie 而她却不在乎。而且 PHP 会话很棒，因为即使用户禁用了 Cookie，您也可以使用它们。我就像wtf，wtf wtf？！？！

我用两个文件进行了测试， index.php 启动会话并设置会话变量。然后 session.php 尝试读取该会话变量。

这是它的外观：

索引.php

```
<p>This is where I start and set php sessions.</p>

<?php

    session_start();
    $_SESSION['test1'] = "SessionTest1";
    $_SESSION['test2'] = "SessionTest2";

?>

<p>This is a link, that starts new HTTP Request, and tries to read session set on this page:</p>
<p><a href="session.php">Read Session</a></p> 
```

会话.php

```
<?php

    session_start();
    var_export($_SESSION);

?>

<p><a href="index.php">Back</a></p> 
```

现在，如果您在浏览器中启用 cookie，访问 index.php，然后访问 session.php，会话将被打印出来。

但是，如果您清除浏览器历史记录和 cookie，然后访问 index.php，然后访问 session.php，您会看到空数组对吗？

所以基本上我的问题是，我是对的吗？如果您在浏览器中禁用 cookie，您可以使用 PHP 会话吗？而PHP Session 机制是否默认，取决于设置一个会话COOKIE？

更新：我对此很生气，所以我给正在和我说话的人打了电话。并问他，默认情况下 PHP 会话可以在没有 cookie 的情况下工作吗？那家伙说“是的”。然后我告诉他他错了，他说：“是的，是的，如果你这么说……”然后开始大笑。然后我告诉他，如果 PHP 会话可以在不设置 cookie 的情况下工作，那么服务器如何知道当前用户/浏览器会话 id，如果它没有存储在会话 cookie 中？（我想看看他是否知道会话 id 可以作为 GET 变量传递）他至少安静了 20 秒，并告诉我他是系统管理员，我应该问那个开发人员。他今年 43 岁，拥有 13 年的丰富经验（他从 30 岁开始？wtf？），但他相信我这一点。

所以基本上，这家伙对 PHP 和 PHP 会话一无所知，是的，他是那个问我会话的人，告诉我 PHP 会话可以在没有 cookie 的情况下工作，即使我告诉他不能这样做，而且有一种方法可以在没有 cookie 的情况下使用 PHP 会话，但默认情况下它不会工作。他就像，不，不，不……最后他告诉我，他认为会话可以在没有 cookie 的情况下工作，因为他作为服务器上的系统管理员，永远看不到 tmp 文件夹中的会话？！？！？

不管怎样，那些家伙在 PHP 上很烂，我不可能接受他们的工作机会，毕竟我认为他们不会给我提供工作......

感谢所有的评论！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-24T20:14:01.630

> “访问您的网站的访问者被分配了一个唯一的 id，即所谓的会话 id。这要么存储在用户端的 cookie 中，要么在 URL 中传播。”

[会议：介绍](http://php.net/manual/en/intro.session.php)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-25T05:13:54.227

如果 session.use_cookies = 1（启用 Cookie。）

如果 session.use_cookies = 0（禁用 Cookie。）

如果 session.use_cookies = 1 则 session 将 sessionId 存储到 cookie 中。调用 session_id() 从 cookie 中获取存储的 sessionId 并在所有页面上找到保存到会话数组中的数据。如果 session.use_cookies = 0 在这种情况下 session 不会将 sessionId 存储到 cookie 中，并且每次使用 session_id() 都会获得一个新的 sessionId，并且在其他页面上存储到 session 中的数据将不会在其他页面上找到。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-24T20:14:08.910

> 所以基本上我的问题是，我是对的吗？

大多。在现实世界中：**是**的。

> 如果您在浏览器中禁用 cookie，您可以使用 PHP 会话吗？

您可以使用不带 cookie 的 PHP 会话，**只要以某种方式获得浏览器身份并产生唯一值**（并且该值被传递给 PHP 会话层）：

*   GET 中的会话 ID（如果不允许使用 cookie，这是“标准”PHP 方式，以及您描述的“其他”方式）。然后这个值由 PHP 自动传播，例如添加到所有 A HREF 等等。如果由于自动魔术链接识别失败而没有传播（例如，在 Javascript 中构建的复杂 URL），您有责任提供相应的内容。

或者——我们已经不在堪萨斯了：

*   使用 Auth Digest 在随机数之间传递*（这是一个肮脏的技巧，当然要求整个站点都在 Auth-Digest 访问身份验证方案的后面。并且您不能再使用“虚拟身份验证”（即[http://welcome :guest@www.example.com](http://welcome:guest@www.example.com)）因为某些浏览器，例如 Internet Explorer，出于安全原因不再支持它们）*
*   以其他方式识别浏览器（“指纹”）（*这通常是（1）自杀*）
*   如果还没有随机 UUID，则使用 LSO（本地共享对象）生成一个随机 UUID，并将其存储起来，以便在后续访问时检索它。
*   其他方式（见[http://en.wikipedia.org/wiki/Evercookie](http://en.wikipedia.org/wiki/Evercookie)）

(1) 如果您在可以信任 IP 的 LAN 中，则可以将“会话”与用户 IP 相关联。您可能会在一家小公司中强制执行严格的“无 cookie”政策，并且仍然拥有用户会话，而无需借助 _GET/_POST 获取会话 ID。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-09-04T14:18:23.470

是的，当 cookie 被禁用时，会话将起作用。但首先 apache 检查 php 配置设置。喜欢：

```
 --enable-trans-sid
and
   --enable-track-vars 
```

如果这些值设置为 true，会话将通过 POST 自动传递。

如果“--enable-trans-sid”和“--enable-track-vars”值设置为 FALSE，我们需要使用 SID 常量传递会话 ID。

```
< a href="index.php?<?= SID ?>" >Navigate from here< /a > 
```

需要设置php.ini

```
ini_set("session.use_cookies", 0);
ini_set("session.use_trans_sid", 1); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-08-14T18:26:57.267

你是对的，没有 cookie，Session 就无法工作。为了说明这一点，请尝试执行以下操作。

1.  登录到 Gmail。
2.  登录后禁用cookies。
3.  刷新页面。

由于服务器无法识别会话，您将再次被重定向到登录页面。

1.  现在再次启用 cookie。
2.  刷新页面。（注意：不要点击登录按钮）。
3.  您将被自动重定向到 Gmail 收件箱。

因此，我们可以说没有 cookie 会话将无法工作。

此外，如果您尝试使用禁用的 cookie 登录 gmail（例如，您可以使用任何网站），那么它将显示“**您的浏览器已禁用 cookie。确保您的 cookie 已启用并重试。** ”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-28T10:56:06.107

如果是我，我会说“是”

因为您可以将会话存储在表单/ url 的某个地方以传递到下一页（非常糟糕的主意）。因此，基于他的问题“如果在用户浏览器中禁用 Cookie，是否可以设置和读取、使用 PHP 会话？”

那么，应该是的。它可以阅读和使用。

但是，如果用户关闭浏览器，那么它就消失了，仅此而已。（因为那家伙没有问这部分）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-19T07:13:49.710

是的.. 它会工作
1.PHP 将在 URL 中传递一个名为 PHPSESSID 的 GET 参数，但它可以在 php.ini 文件中更改 session.name。
2.在同名表单中添加一个隐藏输入。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-17T15:04:39.950

您需要将会话 ID 放在 URL 中。您需要对 php.ini 文件进行更改，因此如果您在共享主机上，则需要联系他们以了解他们将为您做什么。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-16T15:42:12.720

// 告诉 PHP 我们要使用会话中的 cookie

```
 ini_set('session.use_cookies', '0');
 ini_set('session.use_only_cookies', '0');
 ini_set('session.use_trans_sid','1');
 session_start(); 
```

// 然后在 URL 中传递会话 ID（检查，导航网络刷新页面，您将在会话 ID 的标题中看到）

# html - 如何在html表格上制作对角线标题

> ID：12572137
> 
> 赞同：5
> 
> 时间：2012-09-24T20:07:39.070
> 
> 标签：html, css, html-table

我正在尝试创建一个带有列标题的 HTML 表格，但每个列标题都有一个很长的标题。我想以对角线角度为每列制作标题。我想知道是否有 css（或 java、jquery 等）来实现这种适用于所有浏览器（firefox、IE7 &8 等）的效果以及如何实现它。

这是我想要创建的视觉示例。[带有对角标题的表格](https://i.stack.imgur.com/cbw2l.png)

我在 stackexchange 上找到了这个，但我不知道如何充分利用它，或者确定它是否适用于我想做的事情。

[https://tex.stackexchange.com/questions/14288/how-combine-make-diagonal-column-heads-in-table-with-multicolumn-headers](https://tex.stackexchange.com/questions/14288/how-combine-make-diagonal-column-heads-in-table-with-multicolumn-headers)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:09:56.973

将您想要对角线的文本包裹在另一个元素中，例如 a`<div>`然后`transform`在该元素上执行 CSS；见[**MDN**](https://developer.mozilla.org/en-US/docs/CSS/transform#rotate)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:18:36.380

在现代浏览器中使用 CSS 3：

```
-moz-transform:rotate(70deg);
-webkit-transform:rotate(70deg);
-o-transform:rotate(70deg);
-ms-transform:rotate(70deg);
transform(70deg); 
```

并过滤 IE（不幸的是，我不确定它是否与 IE6 兼容以及它是如何工作的）：

```
filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1.5); 
```

MSDN 来源： http: [//msdn.microsoft.com/en-us/library/ms532918 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms532918(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T20:16:56.193

尝试

```
 .vertical
    {
    writing-mode:tb-lr;
    -webkit-transform:rotate(-45deg);
    -moz-transform:rotate(90deg);
    -o-transform: rotate(90deg);
    white-space:nowrap;
    display:block;
    bottom:0;
    width:90px;
    height:120px;   
    position:relative;
    left:90px;
    top:80px;
} 
```

看[`Working DEMO`](http://jsfiddle.net/tNU73/)

[参考](http://geebart.com/blog/text-rotation-css3)

# objective-c - 自定义 URL 方案的自定义操作 Mac Objective-c

> ID：12572140
> 
> 赞同：0
> 
> 时间：2012-09-24T20:07:49.990
> 
> 标签：objective-c, macos, url-scheme

我怎样才能做到这一点，如果 URL 是 myapp://foo 它将执行一个动作，如果它是 myapp://bar 它将执行一个不同的动作。我在[这里](https://stackoverflow.com/questions/12567028/custom-url-types-on-mac-objective-c)的其他问题已经走到了这一步， 非常感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:11:46.870

在应用程序中注册 URL 方案后，您应该能够捕获用于打开应用程序的 URL，如下所示

```
- (void)handleURLEvent:(NSAppleEventDescriptor*)event withReplyEvent:(NSAppleEventDescriptor*)replyEvent {
    NSString *calledURL = [[event paramDescriptorForKeyword:keyDirectObject] stringValue];
    NSLog(@"%@", calledURL);
    // Split and do something with calledURL
} 
```

获得该 URL 后，您应该可以轻松地对其进行拆分并确定要执行的操作。

关于这一点还有[另一个问题](https://stackoverflow.com/questions/1991072/how-to-handle-with-a-default-url-scheme)。

# joomla2.5 - 是否有可能将所有表格行加载到 Joomla 2.5 的 JTable 中的数组中？

> ID：12572143
> 
> 赞同：1
> 
> 时间：2012-09-24T20:07:58.413
> 
> 标签：joomla2.5

我使用 Joomla 2.5 框架。
我有简单的表格，例如：

```
int id
string itemid 
```

现在我只想使用 JTable 将所有 'itemid' 加载到数组中。这里有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:42:10.253

JTable 类的所有内容都只处理一行，一旦涉及到多行，您有两种选择：

1）使用您提供的解决方案。

2) 覆盖 Table 类中的 load() 函数。这可以如下完成：

将以下 load() 函数放入您的 Table 类中：

```
 function load($key = null)
    {

            $db = $this->getDBO();
            $query = $db->getQuery(true);
            $query->select($key);
            $query->from($this->getTableName());
            $db->setQuery($query);
            $row = $db->loadRowList();

             if ($db->getErrorNum()) 
             {
                $this->setError($db->getErrorMsg());
                return false;
             }

            // Check that we have a result.

            if (empty($row)) 
            {
                    return false;
            }

            //Return the array
            return $row;

    } 
```

现在使用单个参数“itemid”调用 load() 函数，并获取所需的数组。

这对我有用，希望它对你也有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:25:39.730

我决定使用的解决方案是从 JModelList 继承模型类：

```
class modelModelcomponent extends JModelList
{
        protected function getListQuery()
        {
            // Create a new query object.           
            $db = JFactory::getDBO();
            $query = $db->getQuery(true);

            // Select some fields
            $query->select('itemid');

            // From the hello table
            $query->from('#__table');

            return $query;
        }
} 
```

# python - Libsvm python 绑定：mach-o，但架构错误

> ID：12572149
> 
> 赞同：0
> 
> 时间：2012-09-24T20:08:22.850
> 
> 标签：python, macos, svm, libsvm, mach-o

我正在尝试在我的 mac (OS-X 10.6.8) 上安装 libsvm。Libsvm 可以很好地为 C++ 安装（我可以很好地使用 svm-train、svm-predict 二进制文件）。按照说明，我在 libsvm-3.12/python/ 文件夹中输入 make 并得到以下输出

```
<i>
make -C .. lib
if [ "Darwin" = "Darwin" ]; then \
        SHARED_LIB_FLAG="-dynamiclib -W1,-install_name,libsvm.so.2"; \
    else \
        SHARED_LIB_FLAG="-shared -W1,-soname,libsvm.so.2"; \
    fi; \
    g++ ${SHARED_LIB_FLAG} svm.o -o libsvm.so.2
</i> 
```

但是当我尝试通过“import svmutil”在 python 中使用它时，我收到以下错误

```
<i> 
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "svmutil.py", line 3, in <module>
    from svm import *
  File "svm.py", line 19, in <module>
    '../libsvm.so.2'))
  File "/Library/Frameworks/Python.framework/Versions/7.1/lib/python2.7/ctypes/__init__.py", line 353, in __init__
    self._handle = _dlopen(self._name, mode)
OSError: dlopen(../libsvm.so.2, 6): no suitable image found.  Did find:
    ../libsvm.so.2: mach-o, but wrong architecture
</i> 
```

我不知道如何解决这个错误。我也尝试使用 g++ 的 -m64 和 -arch x86_64 标志进行编译（在 libsvm 的“制作”过程中），但我继续收到此错误。有人可以告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:42:11.753

尝试构建`libsvm`为通用二进制文件：

```
make CFLAGS='-arch i386 -arch x86_64' CXXFLAGS='-arch i386 -arch x86_64' LDFLAGS='-arch i386 -arch x86_64' 
```

或者，确保您正在运行合适的 Python 版本（检查 Python 解释器的横幅）。

# erlang - ejabberd 和自定义名册

> ID：12572151
> 
> 赞同：3
> 
> 时间：2012-09-24T20:08:30.997
> 
> 标签：erlang, xmpp, ejabberd, rostering

我已经有一个非常简单的网站，拥有相当多的流量。

所以我决定添加一个网络聊天，让我的用户在他们的友谊中聊天。我决定使用[ejabberd](http://www.ejabberd.im/)来完成这个任务。问题是：我已经有 2 个表（用户 [uid，昵称，pass] 和关系 [rid，uid，uid2]。我如何告诉 ejabber 使用这些表中的数据？我可以找到任何模块，像 auth 的一样，编辑和适应我的目的？

**编辑**

如果我不想使用 rosterusers 表，而是直接使用我的 elationships[rid, uid, uid2]，你对我应该改变什么有什么建议吗？

1）首先，在odbc_queries里面，函数get_roster里面的查询

```
"select uid, uid2 from relationships "
       "where uid ='", Username, "'"]). 
```

2) mod_roster_dbc 中的“元组列检查器”函数 get_roster

3）然后函数 raw_to_record 类似于

```
raw_to_record(LServer, {Uid,Uid2}) ->
case  jlib:make_jid(Uid2, LServer, "") of
error ->
    error;
JID ->
    LJID = jlib:jid_tolower(JID),
    Subscription = both,
    Ask = both,

      end,
    #roster{usj = {Uid, LServer, LJID},
        us = {Uid, LServer},
        jid = LJID,
        name = "",
        subscription = Subscription,
        ask = Ask,
        askmessage = ""}
end. 
```

然后？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T02:00:41.410

对于联系人列表，您需要定义自己的名册模块。

您可以使用 mod_roster 或 mod_roster_odbc 作为起点。请注意，这些模块相当复杂，并提供对名册、订阅等的读/写访问。在您的情况下，您可能只需要读访问（因为朋友关系由您的网站管理），因此实现会简单得多（对于例如，您将需要处理“获取”IQ 请求，但无需处理“设置”IQ 请求）。

如果您需要对连接的用户立即可见的关系更改（而不是在下次登录时），您将需要在 ejabberd 端提供一个 API，以便在每次更改时从您的 webapp 调用，以便能够“推送”更新的名册信息给连接的用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T00:42:58.347

查看 ejabberd_auth_odbc。它在 ejabberd_auth 后面工作，因此如果您的表不完全符合 xmpp 规范，那么编写自定义身份验证模块将很容易。

# python - 在同一台机器上运行 Python 3.2 和 2.7

> ID：12572156
> 
> 赞同：1
> 
> 时间：2012-09-24T20:08:39.190
> 
> 标签：python, macos, python-2.7

有没有一种简单的方法可以在 OS X 机器上同时运行 Python 2.7 和 3.2？我一直在将 IDLE 与 Python 3.2 一起使用，并且有许多使用 Python 3 编写的程序，所以我真的不想卸载 3。但是，我正在处理一个使用 2.7 的任务，它的很多基本代码都使用了，所以我'希望能够运行2.7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:13:03.200

OS X 10.7 和 10.8 预装了 Python 2.7；`/usr/bin/python`：

```
$ /usr/bin/python2.7
Python 2.7.1 (r271:86832, Jun 16 2011, 16:59:05) 
[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> 
```

但是，不禁止安装其他版本的 python。[Python for Mac 2.7.3](http://www.python.org/getit/)安装程序不会干扰系统安装*或*Python 3 安装。

# java - 在 READ_WRITE 模式下使用大量 MappedByteBuffer 会减慢 Windows 7 的速度

> ID：12572157
> 
> 赞同：2
> 
> 时间：2012-09-24T20:08:44.730
> 
> 标签：java, windows-7, memory-mapped-files

我正在尝试在 READ_WRITE 模式下使用 Java MappedByteBuffers 来映射一个大文件（数十 GB）或一组大量小文件（~128MB）。这是为了实现高性能的 B 树。

我的问题是，在我的具有 8GB RAM 和 JDK 7 的 Windows 7 笔记本电脑上，一切正常，直到物理内存已满并且操作系统开始实际将数据写入文件。此时，Windows 会慢下来。I/O 似乎完全饿死了任何其他活动。鼠标指针几乎不能移动，我通常最终不得不强制重启机器。

以下代码演示了该问题：

```
public static void testMap() throws Exception
{
    MappedByteBuffer[] mbbs = new MappedByteBuffer[512];
    for (int i = 0; i < 512; i++)
    {
        System.out.printf("i=%d%n", i);
        RandomAccessFile raf = new RandomAccessFile(String.format("D:/testMap.%d.bin", i), "rw");
        mbbs[i] = raf.getChannel().map(FileChannel.MapMode.READ_WRITE, 0, 128*1024*1024);
        for (int j = 0; j < 128*1024; j++) {
            mbbs[i].put(j*1024, (byte)(i*j));
        }
    }
} 
```

我不介意 I/O 是否需要一些时间。过了一会儿，操作系统实际上必须开始将字节写入文件。但是，在这里，该过程实际上使整个操作系统处于饥饿状态。我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T01:11:58.197

您正在映射 512x128x1024x1024 字节或 64 GB，而您有 8 GB。所以你实际上是过度使用了 8 倍的内存。这对于阅读来说是可以的，因为操作系统可以将你的页面错误到一个充满空值的页面，所有这些页面甚至可能是同一个页面。但是当你写的时候，页面必须虚拟存在。所以你在折腾。您需要 8 倍的主内存或小于 1/8 的映射字节缓冲区数量。

# xcode - 为什么 Xcode 4.5 无法刷新配置文件？也不会将设备添加到门户

> ID：12572160
> 
> 赞同：9
> 
> 时间：2012-09-24T20:08:50.700
> 
> 标签：xcode, osx-mountain-lion, provisioning-profile, iphone-developer-program

我在 Mountain Lion 上运行 Xcode 4.5。每次我尝试刷新我的配置文件时，都会收到一条错误消息，指出“无法读取数据，因为它已损坏。” 尝试将新设备添加到开发人员门户时，我得到了相同的响应。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-12T17:53:47.730

这不是一个真正的答案，而是一种解决方法。（我有同样的错误，而且全新安装的 Mountain Lion 也无济于事）

*   前往 developer.apple.com/membercenter/
*   选择“iOS ProvisioningPortal”

*   在“证书”下，您可以创建、下载并将开发者证书安装到“钥匙串访问”

*   在“供应”下，您可以下载并安装您需要的所有文件到您的 xcode“供应配置文件”

-> 所以你应该得到与“刷新”相同的结果

# c# - MEF 导出中的 ExpandoObject

> ID：12572162
> 
> 赞同：1
> 
> 时间：2012-09-24T20:08:54.817
> 
> 标签：c#, dynamic, mvvm, mef

**编辑：** `ExpandoObject`适用于 MEF。我只是有一个语法错误。傻我。

* * *

我目前正在使用`ExpandoObjects`为`DelegateCommand`我的`ViewModels`.

```
private dynamic _commands = new ExpandoObject();
public dynamic Commands
{
    get
    {
        return _commands;
    }
}

private void initializeCommands()
{
    _commands.TestSql(new DelegateCommand(() => testSqlConnection()));
} 
```

这个命令在我的`View`.

```
<Button Content="Test Connection" Command={Binding Commands.TestSql}/> 
```

我现在正在更新代码以使用 MEF，它适用于大多数模块。但是，当它`ViewModel`被组合时，我得到以下异常：

> 合成产生了一个单一的合成错误。下面提供了根本原因。查看 CompositionException.Errors 属性以获取更多详细信息。
> 
> 1)“System.Dynamic.ExpandoObject”不包含“TestSql”的定义

此错误是有道理的，因为`ExpandoObject`没有具有此名称的属性。它应该是动态创建的。有人`ExpandoObjects`在MEF处理过吗？如果必须，我总是可以摆脱这种`ExpandoObject`情况，但我想知道是否有一个简单的解决方法可以让这种情况发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:38:15.843

你试过这个吗？：

```
private void initializeCommands()
{
    _commands.TestSql = new DelegateCommand( () => testSqlConnection());
} 
```

# regex - 多行正则表达式匹配配置块

> ID：12572164
> 
> 赞同：32
> 
> 时间：2012-09-24T20:09:01.417
> 
> 标签：regex, powershell

我在尝试匹配文件中的某个配置块（多个）时遇到了一些问题。下面是我试图从配置文件中提取的块：

```
ap71xx 00-01-23-45-67-89
 use profile PROFILE
 use rf-domain DOMAIN
 hostname ACCESSPOINT
 area inside
! 
```

像这样的有多个，每个都有不同的 MAC 地址。如何跨多行匹配配置块？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-09-24T21:48:35.190

您可能遇到的第一个问题是，为了跨多行匹配，您需要将文件的内容作为单个字符串而不是单独的行来处理。例如，如果您使用 Get-Content 来读取文件的内容，那么默认情况下它将为您提供一个字符串数组 - 每行一个元素。要跨行匹配，您希望文件包含在单个字符串中（并希望文件不会太大）。你可以这样做：

```
$fileContent = [io.file]::ReadAllText("C:\file.txt") 
```

或者在 PowerShell 3.0 中，您可以将 Get-Content 与`-Raw`参数一起使用：

```
$fileContent = Get-Content c:\file.txt -Raw 
```

然后你需要指定一个正则表达式选项来匹配跨行终止符，即

*   SingleLine 模式（`.`匹配任何字符，*包括*换行），以及
*   多行模式（`^`并`$`匹配嵌入式行终止符），例如
*   `(?smi)`- 注意“i”是忽略大小写

例如：

```
C:\> $fileContent | Select-String '(?smi)([0-9a-f]{2}(-|\s*$)){6}.*?!' -AllMatches |
        Foreach {$_.Matches} | Foreach {$_.Value}

00-01-23-45-67-89
 use profile PROFILE
 use rf-domain DOMAIN
 hostname ACCESSPOINT
 area inside
!
00-01-23-45-67-89
 use profile PROFILE
 use rf-domain DOMAIN
 hostname ACCESSPOINT
 area inside
! 
```

使用`Select-String`cmdlet 进行搜索，因为您可以指定`-AllMatches`并且它将输出所有匹配项，而`-match`运算符在第一个匹配项后停止。有意义，因为它是一个布尔运算符，只需要确定是否存在*匹配*项。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-05-11T02:52:01.743

如果这对某人仍然有价值并且根据实际要求，基思答案中的正则表达式不需要那么复杂。如果用户只是想输出每个块，则以下内容就足够了：

```
$fileContent = [io.file]::ReadAllText("c:\file.txt")
$fileContent |
    Select-String '(?smi)ap71xx[^!]+!' -AllMatches |
    %{ $_.Matches } |
    %{ $_.Value } 
```

正则表达式的`ap71xx[^!]*!`性能会更好，`.*`不建议在正则表达式中使用，因为它会产生意想不到的结果。该模式`[^!]+!`将匹配除感叹号外的任何字符，后跟感叹号。

如果输出中不需要块的开头，则更新后的脚本为：

```
$fileContent |
    Select-String '(?smi)ap71xx([^!]+!)' -AllMatches |
    %{ $_.Matches } |
    %{ $_.Groups[1] } |
    %{ $_.Value } 
```

`Groups[0]`包含整个匹配的字符串，`Groups[1]`将在正则表达式的括号内包含字符串匹配。

如果`$fileContent`不需要任何进一步的处理，则可以消除该变量：

```
[io.file]::ReadAllText("c:\file.txt") |
    Select-String '(?smi)ap71xx([^!]+!)' -AllMatches |
    %{ $_.Matches } |
    %{ $_.Groups[1] } |
    %{ $_.Value } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T22:02:08.083

此正则表达式将搜索`ap`后跟任意数量的字符和以 a 结尾的新行的文本`!`：

```
(?si)(a).+?\!{1} 
```

所以我有点无聊。我编写了一个脚本，它将按照您的描述分解文本文件（只要它只包含您显示的行）。它可以与其他随机行一起使用，只要它们不包含关键字：ap、profile、domain、hostname 或 area。它将导入它们，并逐行检查每个属性（MAC、配置文件、域、主机名、区域），并将它们放入以后可以使用的对象中。我知道这不是您要求的，但是由于我花时间研究它，希望它可以用于一些好处。如果有人感兴趣，这是脚本。它需要根据您的特定需求进行调整：

```
$Lines = Get-Content "c:\test\test.txt"
$varObjs = @()
for ($num = 0; $num -lt $lines.Count; $num =$varLast ) {
    #Checks to make sure the line isn't blank or a !. If it is, it skips to next line
    if ($Lines[$num] -match "!") {
        $varLast++
        continue
    }
    if (([regex]::Match($Lines[$num],"^\s.*$")).success) {
        $varLast++
        continue
    }
    $Index = [array]::IndexOf($lines, $lines[$num])
    $b=0
    $varObj = New-Object System.Object
    while ($Lines[$num + $b] -notmatch "!" ) {
        #Checks line by line to see what it matches, adds to the $varObj when it finds what it wants.
        if ($Lines[$num + $b] -match "ap") { $varObj | Add-Member -MemberType NoteProperty -Name Mac -Value $([regex]::Split($lines[$num + $b],"\s"))[1] }
        if ($lines[$num + $b] -match "profile") { $varObj | Add-Member -MemberType NoteProperty -Name Profile -Value $([regex]::Split($lines[$num + $b],"\s"))[3] }
        if ($Lines[$num + $b] -match "domain") { $varObj | Add-Member -MemberType NoteProperty -Name rf-domain -Value $([regex]::Split($lines[$num + $b],"\s"))[3] }
        if ($Lines[$num + $b] -match "hostname") { $varObj | Add-Member -MemberType NoteProperty -Name hostname -Value $([regex]::Split($lines[$num + $b],"\s"))[2] }
        if ($Lines[$num + $b] -match "area") { $varObj | Add-Member -MemberType NoteProperty -Name area -Value $([regex]::Split($lines[$num + $b],"\s"))[2] }
        $b ++
    } #end While
    #Adds the $varObj to $varObjs for future use
    $varObjs += $varObj
    $varLast = ($b + $Index) + 2
}#End for ($num = 0; $num -lt $lines.Count; $num = $varLast)
#displays the $varObjs
$varObjs 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-04T15:17:45.963

这是我的看法。如果不需要正则表达式，可以使用 -like 或 .contains()。这个问题从来没有说搜索模式是什么。这是一个带有 Windows 文本文件的示例。

```
$file = (get-content -raw file.txt) -replace "`r"  # avoid the line ending issue

$pattern = 'two
three
f.*' -replace "`r"

# just showing what they really are
$file -replace "`r",'\r' -replace "`n",'\n'
$pattern -replace "`r",'\r' -replace "`n",'\n'

$file -match $pattern

$file | select-string $pattern -quiet 
```

# iphone - 如何将自定义分隔线图像添加到 UITabBar？

> ID：12572165
> 
> 赞同：11
> 
> 时间：2012-09-24T20:09:00.800
> 
> 标签：iphone, ios, uitabbarcontroller, divider

我有一个 UITabBar，我正在尝试按照新的 iOS 6 App Store 外观设计样式。我有一些非常好看的渐变，但我想知道如何设置分隔线图像。

除了手动将线条添加到每个图像之外，我还能做些什么来重现分隔线的外观吗？

![在此处输入图像描述](../Images/5e0bed35a437f3d684d8286f2158e340.png)

![在此处输入图像描述](../Images/5b3a484c7e9d26ac0ffb34b424ca53c1.png)

![在此处输入图像描述](../Images/1ca12065877eecf833a03ba02ba3d0bd.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:22:11.193

您可以为每个项目添加图像，用于选定和未选定状态。像这样：

```
 UIImage *selectedImage0     = [UIImage imageNamed:@"image1.png"];
    UIImage *unselectedImage0   = [UIImage imageNamed:@"image1_unselected.png"];

    UIImage *selectedImage1     = [UIImage imageNamed:@"image2.png"];
    UIImage *unselectedImage1   = [UIImage imageNamed:@"image2_unselected.png"];

    UIImage *selectedImage2     = [UIImage imageNamed:@"image3.png"];
    UIImage *unselectedImage2   = [UIImage imageNamed:@"image3_unselected.png"];

    UIImage *selectedImage3     = [UIImage imageNamed:@"image4.png"];
    UIImage *unselectedImage3   = [UIImage imageNamed:@"image4_unselected.png"];

    UIImage *selectedImage4     = [UIImage imageNamed:@"image5.png"];
    UIImage *unselectedImage4   = [UIImage imageNamed:@"image5_unselected.png"];

    UITabBar     *tabBar = self.tabBarController.tabBar;
    UITabBarItem *item0  = [tabBar.items objectAtIndex:0];
    UITabBarItem *item1  = [tabBar.items objectAtIndex:1];
    UITabBarItem *item2  = [tabBar.items objectAtIndex:2];
    UITabBarItem *item3  = [tabBar.items objectAtIndex:3];
    UITabBarItem *item4  = [tabBar.items objectAtIndex:4];

    [item0 setFinishedSelectedImage:selectedImage0 withFinishedUnselectedImage:unselectedImage0];
    [item1 setFinishedSelectedImage:selectedImage1 withFinishedUnselectedImage:unselectedImage1];
    [item2 setFinishedSelectedImage:selectedImage2 withFinishedUnselectedImage:unselectedImage2];
    [item3 setFinishedSelectedImage:selectedImage3 withFinishedUnselectedImage:unselectedImage3];
    [item4 setFinishedSelectedImage:selectedImage4 withFinishedUnselectedImage:unselectedImage4]; 
```

您可以将此代码放在`viewDidLoad`任何控制器的方法中。希望这可以帮助。

干杯!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T09:18:24.847

我把我的标签栏图片像： -

![我的标签栏图片](../Images/eeaf6cddd6974bf41e7a12a5f54b23b9.png)

我将它设置在点击栏上，例如：-

```
 CGRect frame = CGRectMake(0.0, 0.0, 320, 48);
        NSLog(@"%f",frame.size.width);
        UIView *v = [[UIView alloc] initWithFrame:frame];
        // [v setBackgroundColor:DARK_BACKGROUNDTabBar];
        UIImageView *imgView =[[UIImageView alloc]initWithFrame:frame];
        UIImage *img1 = [UIImage imageNamed:@"tabbar.png"];
        [imgView setImage:img1];
        [v addSubview:imgView];

        [v setAlpha:1];
        [[self.tabBarController tabBar] insertSubview:v atIndex:1];
        [v release]; 
```

希望它对你有用

您可以使用 4 或 5 个选项卡创建自己的图像并像上面那样设置

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T07:27:22.633

如果您只想为选项卡提供“选定”和“正常”背景图像（包括左右分隔线的一半），您可以将 UITabBarController 子类化，并在 viewDidLoad 期间将 UITabBar 替换为 UIButtons。这很简单。图像被设置为按钮的背景。它们在左侧和右侧包含 4px 的分隔线。

我将它与情节提要一起使用，因此在调用**viewDidLoad**时已经填充了**self.tabBar.items**数组。

 **```
@interface MyTabBarController()
@property (nonatomic,strong) UIImage *selectedImage;
@property (nonatomic,strong) UIImage *normalImage;
@end

@implementation MyTabBarController
@synthesize selectedImage, normalImage;

- (void) viewDidLoad
{
    [super viewDidLoad];

    // set whichever view you want to start with
    self.selectedIndex = 1;

    self.tabBar.hidden=YES;

    // those are the images used for the selected and not selected tabs
    self.selectedImage = [[UIImage imageNamed:@"tabBarBackground_down.png"] stretchableImageWithLeftCapWidth:4 topCapHeight:0];
    self.normalImage = [[UIImage imageNamed:@"tabBarBackground.png"] stretchableImageWithLeftCapWidth:4 topCapHeight:0];

    CGFloat width = self.view.frame.size.width/[self.tabBar.items count];
    for( int itemIndex=0; itemIndex<[self.tabBar.items count]; itemIndex++ )
    {
        UITabBarItem *item = [self.tabBar.items objectAtIndex:itemIndex];

        // create a button
        UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
        button.autoresizingMask = UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin;

        // configure the button to act as a tab
        button.adjustsImageWhenHighlighted = NO;
        [button setImage:item.image forState:UIControlStateNormal];
        [button setBackgroundImage:self.selectedIndex==itemIndex?self.selectedImage:self.normalImage forState:UIControlStateNormal];

        // this is used later to set the selectedIndex of the UITabBarController
        button.tag = itemIndex;

        // position the button in place of tab
        CGFloat nextXStart = itemIndex+1==[self.tabBar.items count]?self.view.frame.size.width:rint(width*(itemIndex+1));
        button.frame = CGRectMake(rint(width*itemIndex), self.view.frame.size.height-49, nextXStart-rint(width*itemIndex) , 49);

        [self.view addSubview:button];

        // add event to the button
        [button addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchDown];
    }
}

- (void) buttonClicked:(id)sender
{
    UIButton *button = sender;
    if( self.selectedIndex!=button.tag )
    {
        // select the tab and change the visible viewcontroller
        self.selectedIndex = button.tag;

        // reset all but the active buttons to have the normal image
        for( UIView *subview in self.view.subviews )
        {
            if( subview!=sender && [subview isKindOfClass:[UIButton class]])
                [((UIButton *)subview) setBackgroundImage:self.normalImage  forState:UIControlStateNormal];
        }

        // set the selectedImage as background of the clicked button
        [button setBackgroundImage:self.selectedImage  forState:UIControlStateNormal];
    }
}
@end 
```**

# c# - 对象不支持属性或方法“lazyload”

> ID：12572168
> 
> 赞同：0
> 
> 时间：2012-09-24T20:09:13.040
> 
> 标签：c#, jquery, lazy-loading

所以我一直在尝试实现 jQuery 的延迟加载插件，以帮助提高我尝试加载的数千张图像的效率。

LazyLoad 可以在这里找到：http: [//www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)

但是，当我尝试在我的 VS 中自己运行他们的示例时，我不断收到 Javascript 错误...

***Microsoft JScript 运行时错误：对象不支持属性或方法“lazyload”***

Javascript 文件：

```
$(function() {
      $("img").lazyload({
          effect : "fadeIn"
          /*
          ,appear : function(elements_left, settings) {
              console.log("appear");
              console.log(elements_left);
              //console.log(this, elements_left, settings);
          },
          load : function(elements_left, settings) {
              console.log("load");
              console.log(elements_left);
              //console.log(this, elements_left, settings);
          }
          */
      });
  }); 
```

HTML 文件：

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script src="https://raw.github.com/tuupola/jquery_lazyload/master/jquery.lazyload.js" type="text/javascript"></script>

               <div id="container" style="width: 765px; overflow: scroll;">
                    <img border="0" alt="Update/Edit Photo" data-original="/Images/editUptdatePhoto.png" src="/Images/editUptdatePhoto.png" width="100%" />
                    <img border="0" alt="Update/Edit Photo" data-original="/Images/editUptdatePhoto.png" src="/Images/editUptdatePhoto.png" width="100%" />
                    <img border="0" alt="Update/Edit Photo" data-original="/Images/editUptdatePhoto.png" src="/Images/editUptdatePhoto.png" width="100%" />
                    <img border="0" alt="Update/Edit Photo" data-original="/Images/editUptdatePhoto.png" src="/Images/editUptdatePhoto.png" width="100%" />
                    <img border="0" alt="Update/Edit Photo" data-original="/Images/editUptdatePhoto.png" src="/Images/editUptdatePhoto.png" width="100%" />
                    <img border="0" alt="Update/Edit Photo" data-original="/Images/editUptdatePhoto.png" src="/Images/editUptdatePhoto.png" width="100%" />
                    <img border="0" alt="Update/Edit Photo" data-original="/Images/editUptdatePhoto.png" src="/Images/editUptdatePhoto.png" width="100%" />
                    <img border="0" alt="Update/Edit Photo" data-original="/Images/editUptdatePhoto.png" src="/Images/editUptdatePhoto.png" width="100%" />
                    <img border="0" alt="Update/Edit Photo" data-original="/Images/editUptdatePhoto.png" src="/Images/editUptdatePhoto.png" width="100%" />
                    <img border="0" alt="Update/Edit Photo" data-original="/Images/editUptdatePhoto.png" src="/Images/editUptdatePhoto.png" width="100%" />
                    <img border="0" alt="Update/Edit Photo" data-original="/Images/editUptdatePhoto.png" src="/Images/editUptdatePhoto.png" width="100%" />
                    <img border="0" alt="Update/Edit Photo" data-original="/Images/editUptdatePhoto.png" src="/Images/editUptdatePhoto.png" width="100%" />
               </div> 
```

所以我的大问题是为什么我不断收到这个奇怪的错误？我已经搜索并浏览了整个互联网以寻找解决方案。我发现的一个答案是不再支持延迟加载，但是当 jQuery 自己不​​断更新他们的延迟加载插件时，这怎么可能。2012 年，他们将其更新到 v1.8。他们的示例网站在这里工作：http: [//www.appelsiini.net/projects/lazyload/enabled_fadein.html](http://www.appelsiini.net/projects/lazyload/enabled_fadein.html) .... 但是在我自己的计算机上运行时它不起作用。我在 Internet Explorer 中运行（Internet 说lazyload 在 IE 上工作）。

希望有高手能尽快解答。提前致谢！

更深入的上下文代码...

HTML：

```
 window.onload = function () {//I tried putting lazyload here same error occurs};

$(document).ready(function () {
    //I tried putting lazyload here same error occurs
});

$(function() {
      $("img").lazyload({
          effect : "fadeIn"
          /*
          ,appear : function(elements_left, settings) {
              console.log("appear");
              console.log(elements_left);
              //console.log(this, elements_left, settings);
          },
          load : function(elements_left, settings) {
              console.log("load");
              console.log(elements_left);
              //console.log(this, elements_left, settings);
          }
          */
      });
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:34:02.767

我认为执行不正确。我刚刚实现了它，这很有吸引力。让我一步一步告诉你我做了什么。

1.  我在 VS 2010 中创建了一个新网站。
2.  然后我添加了您提到的 DIV 部分。
3.  在目录中添加了三张图片。
4.  在 MasterFile 的顶部添加了 CDN——即头部。
5.  然后添加脚本

    $(function() { $("img").lazyload({ effect : "fadeIn" /* ,appear : function(elements_left, settings) { console.log("appear"); console.log(elements_left); / /console.log(this, elements_left, settings); }, load : function(elements_left, settings) { console.log("load"); console.log(elements_left); //console.log(this, elements_left, settings ); } */ }); });

请再次检查并告诉我..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T21:31:13.467

github 的 CDN 有一些令人作呕的错误。链接完美运行，但尝试 CDN 访问它不会为您带来任何好处。相反，您必须右键单击 lick 并另存为... 以获取lazyLoader javascript 文件。

# jquery - 需要反向效果来隐藏 div

> ID：12572173
> 
> 赞同：2
> 
> 时间：2012-09-24T20:09:27.170
> 
> 标签：jquery

我的完整脚本正在运行，但是当我点击 div 时，div 会以相反的效果隐藏

这是我的代码

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
<style type="text/css">
.lnkcss 
{
    margin-left:350px;
}

.BusyStyles
    {
        background-image: url('http://www.bba-reman.com/images/ajax-loader.gif');
        background-repeat: no-repeat; background-position: center center; 
    }

 #transition {

display:none;
position:absolute; top:50%; left:50%; z-index:50;
border:1px solid #666;
width:100px; height:100px;
filter:alpha(opacity=0.2);
-moz-opacity:0.2;
-khtml-opacity: 0.2;
opacity: 0.2;
}

</style>
<script src="Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>
$(document).ready(function () {
        $('#lnk').click(function (e) {
            $('body').append('<div id="transition"></div>').show();

            var $t = $('#transition'),
            to = $(this).offset(),
            td = $(document);

            $t.css({
                top: to.top + 50,
                left: to.left + 50,
                display: 'block'
            }).animate({
                opacity: 1,
                top: td.height() / 2,
                left: td.width() / 2
            }, 600, function () {
                $(this).animate({
                    top: '-=75',
                    left: '-=50'
                }, 600);

                $('#transition').addClass("BusyStyles");
                setTimeout(function () {
                    $('#transition').animate({
                        top: (td.height() / 2) - 200/2,
                        left: (td.width() / 2) - 250/2,
                        width: 250,
                        height: 200
                    }, 600, function () {
                        //alert('pp');
                        // to do things   
                        $('#transition').removeClass("BusyStyles");
                        $('#transition').html('<b>Welcome...</b>');
                    });
                }, 3000);
            });

            $t.click(function (e) {
                //alert('pp');
                $(this).fadeOut('slow').remove();
            });
            return false;
        });

    });
</head>
<body>
<form id="form1" runat="server">
<a href="#" id='lnk' class="lnkcss">FeedBack</a>
</form>
</body>
</html> 
```

我需要添加什么代码才能获得相反的效果。当我单击过渡 div 时，过渡 div 逐渐透明并缩小尺寸并移向反馈链接，最后隐藏。如果可能，请指导我。

这是我的代码链接。 [http://jsfiddle.net/tridip/kPZrZ/2/](http://jsfiddle.net/tridip/kPZrZ/2/)

谢谢

# sql-server-2008 - 查找声明语句 SQL Profiler

> ID：12572174
> 
> 赞同：0
> 
> 时间：2012-09-24T20:09:27.457
> 
> 标签：sql-server-2008

我正在运行多个 EXEC 语句，但找不到 DECLARE。下面是我所看到的。我看到了成千上万的这些。

```
RPC:Completed | exec sp_execute 14,69 | TDS0X00000000030000001400730070005F0065007800650063007500740065001400000003000600380069006E0074000E0000001400000003000600380069006E 
```

我确实看到了其他存储过程的声明语句，但不是少数，它们是我真正需要分析的。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:11:31.870

除了`RPC completed`（或可能代替），您可能应该捕获：

```
SP:Starting
SP:Completed 
```

如果您想查看这些过程或周围批次中的单个语句：

```
SP:StmtCompleted
SQL:StmtCompleted
SQL:BatchCompleted 
```

也就是说，根据调用和传入语句的方式，您可能并不总是能够捕获每个单独的语句。

# drupal-7 - 管理员添加用户时，根据所选角色隐藏或显示用户字段注册

> ID：12572194
> 
> 赞同：1
> 
> 时间：2012-09-24T20:11:14.243
> 
> 标签：drupal-7, field, user-roles

是否有任何模块可以让我像管理员一样添加不同角色的用户，并在添加时动态显示或隐藏与这些角色对应的字段？

例如，我有两个角色（父亲和儿子），并且在用户注册表单（工作和学校）中有用户自定义字段，如果我要添加具有父亲角色的用户，学校字段应立即隐藏并标记为 not必需的。如果我要添加具有儿子角色的用户，则工作字段应隐藏并标记为不需要，学校字段应显示并标记为必需。如果我标记两个角色，则应显示两个字段并且都是必需的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-27T13:02:38.890

你看过[https://drupal.org/project/conditional_fields](https://drupal.org/project/conditional_fields)吗？我以前在自定义内容类型上使用过它，但从未尝试在用户角色上使用它。

# c# - 单击链接标签 5 秒后保存图片

> ID：12572195
> 
> 赞同：0
> 
> 时间：2012-09-24T20:11:21.247
> 
> 标签：c#, .net

这有点难解决..：D首先你应该解决我的英语：D：D我想保存一个像这个位置一样的网络浏览器快照//首先：用户单击链接标签//之后：程序导航我的浏览器//最后: 5 秒后程序将拍摄 webbrowser 的快照。我有这个代码。但是..

```
private void linkLabel1_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
{
    ((WebKitBrowser)tabControl1.SelectedTab.Controls[0]).Navigate(linkLabel1.Text);

    ///how can i set after 5 seconds take snapshot
    ((WebKitBrowser)tabControl1.SelectedTab.Controls[0]).PageScreenshot.Save("thumb1.png", ImageFormat.Png);
} 
```

抱歉英语不好:(我无法解释更详细。编辑：我会尝试更详细地解释...这是我的网络浏览器的新标签功能，我想截取收藏夹。当用户打开新标签后，用户会看到带有小照片的收藏夹...所以，如果收藏夹没有任何图片，那将是第一次。当用户单击链接时，它将导航到收藏夹，然后当文档完成时，它将截屏..仅此而已 ![新标签](../Images/811ca2a141bbcd494cb9fa302b7ce9f1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:01:07.253

从您的帖子和评论中我可以理解的是，您有六个[`LinkLabel`](http://msdn.microsoft.com/en-us/library/system.windows.forms.linklabel.aspx)s（命名`linkLabel1`为`linkLabel6`）。当用户单击任何链接时，您的[`WebKitBrowser`](http://webkitdotnet.sourceforge.net/)控件必须导航到 URL（这是链接标签的文本），并且在加载文档时，它必须自动截取屏幕截图。

现在，由于您想对不同的链接标签做同样的事情，您应该只创建一个事件处理程序来处理不同链接标签的点击。您可以将 _LinkClicked() 事件附加到任何链接标签。您还必须在您的类中定义一些私有字段，该字段将包含上次单击的 LinkLabel。

```
private LinkLabel _lastClickedLinkLabel = null;

private void linkLabelX_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
{
    // Cast the sender to a LinkLabel object as you want to know which LinkLabel
    // was clicked on
    var senderLinkLabel = sender as LinkLabel;
    if (senderLinkLabel != null)
    {
        ((WebKitBrowser)tabControl1.SelectedTab.Controls[0]).Navigate(senderLinkLabel.Text);
        _lastClickedLinkLabel = senderLinkLabel;
    }
} 
```

现在，当您想在页面加载后截取屏幕截图时，您必须创建[`DocumentCompleted`](http://webkitdotnet.sourceforge.net/docs/html/E_WebKit_WebKitBrowser_DocumentCompleted.htm)事件。（不要忘记将它附加到您的 tabControl！）

```
private void tabControl1_DocumentCompleted(Object sender, WebBrowserDocumentCompletedEventArgs e)
{
    // Save the screenshot
    // you might want to determine the filename dynamically, otherwise the file will be overwritten
    ((WebKitBrowser)tabControl1.SelectedTab.Controls[0]).PageScreenshot.Save("thumb1.png", ImageFormat.Png);

    if (_lastClickedLinkLabel != null)
    {
        // Do something here based upon the _lastClickedLinkLabel
    }
} 
```

请注意，我没有这种精确控制的实际经验，我只是使用搜索引擎来查找所有信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:17:10.150

我在下面做了这个，我解决了我的问题但是，最后一件事我不能在我的应用程序工作时更改图片..当文件完成时，........

```
 void Form1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {

        if (_lastClickedLinkLabel.Text == linkLabel1.Text)
        {
            ((WebKitBrowser)tabControl1.SelectedTab.Controls[0]).PageScreenshot.Dispose();
            ((WebKitBrowser)tabControl1.SelectedTab.Controls[0]).PageScreenshot.Save("thumb1.png", ImageFormat.Png);
            // Do something here based upon the _lastClickedLinkLabel
        }
        if (_lastClickedLinkLabel.Text == linkLabel2.Text)
        {
            ((WebKitBrowser)tabControl1.SelectedTab.Controls[0]).PageScreenshot.Save("thumb2.png", ImageFormat.Png);
            // Do something here based upon the _lastClickedLinkLabel
        }
        if (_lastClickedLinkLabel.Text == linkLabel3.Text)
        {
            ((WebKitBrowser)tabControl1.SelectedTab.Controls[0]).PageScreenshot.Save("thumb3.png", ImageFormat.Png);
            // Do something here based upon the _lastClickedLinkLabel
        }
        if (_lastClickedLinkLabel.Text == linkLabel4.Text)
        {
            ((WebKitBrowser)tabControl1.SelectedTab.Controls[0]).PageScreenshot.Save("thumb4.png", ImageFormat.Png);
            // Do something here based upon the _lastClickedLinkLabel
        }
        if (_lastClickedLinkLabel.Text == linkLabel5.Text)
        {
            ((WebKitBrowser)tabControl1.SelectedTab.Controls[0]).PageScreenshot.Save("thumb5.png", ImageFormat.Png);
            // Do something here based upon the _lastClickedLinkLabel
        }
        if (_lastClickedLinkLabel.Text == linkLabel6.Text)
        {
            ((WebKitBrowser)tabControl1.SelectedTab.Controls[0]).PageScreenshot.Save("thumb6.png", ImageFormat.Png);
            // Do something here based upon the _lastClickedLinkLabel
        }

    } 
```

当点击链接时，......

```
private LinkLabel _lastClickedLinkLabel = null;

        private void linkLabel1_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
        {
            var senderLinkLabel = sender as LinkLabel;           
            if (senderLinkLabel != null)
            {
                ((WebKitBrowser)tabControl1.SelectedTab.Controls[0]).Navigate(senderLinkLabel.Text);
                _lastClickedLinkLabel = senderLinkLabel;

            }

        }

        private void linkLabel2_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
        {
            var senderLinkLabel = sender as LinkLabel;
            if (senderLinkLabel != null)
            {
                ((WebKitBrowser)tabControl1.SelectedTab.Controls[0]).Navigate(senderLinkLabel.Text);
                _lastClickedLinkLabel = senderLinkLabel;

            }
        }

        private void linkLabel3_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
        {
            var senderLinkLabel = sender as LinkLabel;
            if (senderLinkLabel != null)
            {
                ((WebKitBrowser)tabControl1.SelectedTab.Controls[0]).Navigate(senderLinkLabel.Text);
                _lastClickedLinkLabel = senderLinkLabel;

            }
        }

        private void linkLabel4_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
        {
            var senderLinkLabel = sender as LinkLabel;
            if (senderLinkLabel != null)
            {
                ((WebKitBrowser)tabControl1.SelectedTab.Controls[0]).Navigate(senderLinkLabel.Text);
                _lastClickedLinkLabel = senderLinkLabel;

            }
        }

        private void linkLabel5_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
        {
            var senderLinkLabel = sender as LinkLabel;
            if (senderLinkLabel != null)
            {
                ((WebKitBrowser)tabControl1.SelectedTab.Controls[0]).Navigate(senderLinkLabel.Text);
                _lastClickedLinkLabel = senderLinkLabel;

            }
        }

        private void linkLabel6_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
        {
            var senderLinkLabel = sender as LinkLabel;
            if (senderLinkLabel != null)
            {
                ((WebKitBrowser)tabControl1.SelectedTab.Controls[0]).Navigate(senderLinkLabel.Text);
                _lastClickedLinkLabel = senderLinkLabel;

            }
        } 
```

# telerik - 如何从 RadScheduleView 获取当前约会

> ID：12572196
> 
> 赞同：1
> 
> 时间：2012-09-24T20:11:25.753
> 
> 标签：telerik, radscheduleview

我在 Silverlight 应用程序中有一个 Telerik:RadScheduleView 控件。当用户将鼠标移到约会项目上时，我想捕获该约会并调用传递该约会的事件。

如何捕获用户鼠标悬停的约会？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:12:52.447

使用 RadScheduleView 的 AppointmentSelectionBehavior 属性。有关更多详细信息... [http://www.telerik.com/help/silverlight/radscheduleview-features-appointment-selection-behavior.html](http://www.telerik.com/help/silverlight/radscheduleview-features-appointment-selection-behavior.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-20T10:36:33.207

您可以使用 ScheduleVw.CurrentAppointment.This 保存用户正在处理的当前约会。ScheduleVw 是您的 Radscheduleview

# jquery - 使用 jQuery AJAX 更改锚的 href，但 HTML 显示 href="undefined"

> ID：12572197
> 
> 赞同：1
> 
> 时间：2012-09-24T20:11:30.753
> 
> 标签：jquery, undefined, href

我有一个带有`id="popup"`. 当页面加载时，它有`href="path/to/image.jpg"`.

我使用 AJAX 来获取我想要更改`href`此锚点的值。

当我收到 AJAX 响应时，我会：

```
alert(jQuery("#popup").attr("href"));//alert 1
jQuery("#popup").attr("href", xhRequest.responseText);
alert(jQuery("#popup").attr("href"));//alert 2 
```

（`xhRequest.responseText`包含正确的值，但即使我只使用字符串文字也会遇到同样的问题）。

问题是，在我这样做之后，页面中生成的 HTML 会显示`href="undefined"`在锚元素中。

*   警报 1 正确显示了 href 属性的初始值
*   警报 2 正确地将新值显示为 href
*   页面本身显示`href="undefined"`

所以 href 以某种方式受到影响，但没有正确添加值。

**更新**
由于某种原因，正在返回正确的数据，但只是这样：

```
error: function(xhRequest, ErrorText, thrownError) {
    alert(xhRequest.status + ' ----' + xhRequest.responseText + '---');
    if ((xhRequest.responseText != '') && (document.getElementById("popup"))) {
        alert(jQuery("#popup").attr("href"));
        jQuery("#popup").attr("href", xhRequest.responseText);
        alert(jQuery("#popup").attr("href"));
    }
}​ 
```

is的值和`xhRequest.status`is`200`的值，正如预期的那样，没有空格。`xhRequest.responseText``images/linked/ColorBeige.jpg`

# extjs - if Is_Pend=true and Is_Hold=true 如果为 true 那么这些项目应该显示在最后

> ID：12572199
> 
> 赞同：0
> 
> 时间：2012-09-24T20:11:32.433
> 
> 标签：extjs

我有一个问题。我正在获取包含创建数据、is_pend、Is_Hold、名称、地址等的存储。如果（Is_Pend=true 和 Is_Hold=true）@ 存储底部，我无法推送符合条件的行。即如果为真，那么这些项目应显示在商店的末尾。
我尝试但没有解决这样的例子............ store= Title DirectorReleased Is_Pend Is_held Troop Chandra 27/12/2052 FALSE TRUE Office Mike 9/8/2011 TRUE TRUE Office Mike 19/02 /2009 TRUE FALSE Sur Jay 8/12/2002 FALSE TRUE Supers Jekhar 8/6/2002 FALSE FALSE Super Jay 15/02/2002 FALSE FALSE Supers Jay 27/01/2002 TRUE TRUE Super Jay 28/12/1992 FALSE FALSE 是存储然后这将像.................................................. ..标题 Director已发布 Is_Pend Is_held Troopers Chan 27/12/2052 FALSE TRUE Sur Jay 8/12/2002 TRUE FALSE Supers Jekhar 8/6/2002 FALSE FALSE Super Jay 15/02/2002 FALSE FALSE Super Jay 28/12/1992 FALSE FALSE Office Mike 19/02/2009 TRUE TRUE Office Mike 9/8/2011 TRUE TRUE Supers Jay 27/01/2002 TRUE TRUE 推完上述商店的行后

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:27:29.757

可以提供自定义排序功能，见：[http ://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.Field-cfg-sortType](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.Field-cfg-sortType)

# android - 无法将我的图像加载到 android 中的位图类中

> ID：12572200
> 
> 赞同：0
> 
> 时间：2012-09-24T20:11:32.420
> 
> 标签：android

嗨，我对位于此处的位图和图片有疑问：

```
file:///mnt/sdcard/Android/data/com.dev.app/files/Pictures/20120924-092226.jpg 
```

所以我有一个带有这个网址的字符串（文件存在！）

现在我需要一个位图，所以我这样做：

```
String str = "file:///mnt/sdcard/Android/data/com.dev.app/files/Pictures/20120924-092226.jpg";
Bitmap b = BitmapFactory.decodeFile(str); 
```

**但 b 始终为空。我不知道为什么。**

**编辑**：我之前用这样的代码创建了文件：

```
String filename = DateFormat.format("yyyyMMdd-hhmmss",Calendar.getInstance().getTime()) + ".jpg";

Uri imageUri = helper.createImageDestinationUri(null, filename);

Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);
startActivityForResult(intent, requestCode); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:35:04.657

有两种可能

1.  该文件的格式不正确，即虽然扩展名为 .jpg，但它不是 jpeg 文件。
2.  无法加载文件。

您可以仔细查看 adb 日志以了解发生了什么……如果没有帮助，请尝试以下操作。

将文件添加到您的可绘制文件夹中，并在某些测试屏幕中使用它。如果显示文件，则文件格式正确，因此 android 无法加载文件。检查您的权限，并实际尝试首先使用 FileInputStream 或其他方式读取文件。

如果文件仍然没有显示，那么你可以确定格式是错误的。在这种情况下，只需尝试使用不同的图像文件。

希望能帮助到你...

# wpf - ClickOnce 应用程序：应用程序重新启动后版本和设置丢失

> ID：12572201
> 
> 赞同：0
> 
> 时间：2012-09-24T20:11:38.237
> 
> 标签：wpf, clickonce

我有一个使用 ClickOnce 进行部署的 C#/WPF 应用程序。有一种应用需要重启的场景（用户更改了数据库）。我这样做：

```
System.Diagnostics.Process.Start(System.Windows.Application.ResourceAssembly.Location);
System.Windows.Application.Current.Shutdown(); 
```

重启后，app好像有问题：

1.  版本变为 1.0.0.0。
2.  当前数据库设置设置为默认值（位于应用程序的 Properties.Settings 中）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T14:21:38.633

我不知道我是否完全理解这个问题，但我知道如果它是 ClickOnce 应用程序，您用于重新启动应用程序的方法存在问题。当您以这种方式重新启动应用程序时，`ApplicationDeployment.IsNetworkDeployed`将`false`. 有关完整说明，请参阅此帖子：http: [//bit.ly/RKoVBz](http://bit.ly/RKoVBz)。

我还没有验证重新启动应用程序的正确方法，但我会尽快更新。

# amazon-s3 - 文件选择器将图像保存回 s3 存储桶

> ID：12572205
> 
> 赞同：0
> 
> 时间：2012-09-24T20:11:58.040
> 
> 标签：amazon-s3, filepicker.io

我在我的网站中使用了[图像编辑器演示](https://www.filepicker.io/demos/)，效果很好。

我遇到的问题是在储蓄方面。我想在没有任何用户输入（不使用功能）的情况下将其保存回文件选择器，`filepicker.saveas`但它不起作用。我尝试了文档中指定的 curl 调用

```
curl -X POST -d @filename.txt --header "Content-Type:text/plain" https://www.filepicker.io/api/file/gNw4qZUbRaKIhpy-f-b9 
```

但只是从系统中得到一个通用错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T22:38:30.510

让它工作我把 url= 留在了源图像中

# jsp - 如何将我的 Web 应用程序外部的 HTML 文件包含到我的应用程序内部的 JSP 中

> ID：12572214
> 
> 赞同：0
> 
> 时间：2012-09-24T20:12:30.250
> 
> 标签：jsp, jspinclude, page-directives

我在 Web Publisher 有一个 HTML 页面，我想将其内容加载到我的 Web 应用程序中的 JSP 中。我尝试过**JSP:Include**动作和**Include 指令**，但它们似乎都只采用相对路径。我不能拥有该 html 文件的本地副本，因为将来可能会发生变化，我需要动态地包含它。如何使用绝对路径包含文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:50:11.200

JSTL c:import taglib 允许您从任何 url、http:// 或 file:// 导入文件。请参阅[http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/import.html](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/import.html)

# eclipse - 从eclipse制作像STS这样的独立IDE工具

> ID：12572215
> 
> 赞同：0
> 
> 时间：2012-09-24T20:12:33.837
> 
> 标签：eclipse, ide

我需要创建一些独立的编程编辑器/工具，我发现[STS](http://www.springsource.org/spring-tool-suite-download)适合我的需要。STS 喜欢一些`eclipse + plugins + default setup`.

如何用 Eclipse 制作像 STS 这样的工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:37:12.610

如果您需要创建带有品牌等的自定义 Eclipse 发行版，您应该创建一个“产品”。[这篇文章](http://wiki.eclipse.org/FAQ_How_do_I_create_an_Eclipse_product%3F)应该是一个很好的起点。

您可以在产品文件中列出要包含在您的发行版中的“功能”（插件集合）。我还建议您开始阅读有关 Tycho 的内容。

# javascript - D3 物理重力

> ID：12572219
> 
> 赞同：7
> 
> 时间：2012-09-24T20:13:04.823
> 
> 标签：javascript, d3.js, physics, gravity, force-layout

我正在尝试使用 D3 库设计物理重力模拟，但我运气不佳。“[布局”API 参考](https://github.com/mbostock/d3/wiki/Force-Layout#wiki-gravity)声明物理重力可以通过正“电荷”参数实现，但我不确定这将如何工作。

我目前正在尝试实现的是一个单一的 SVG 元素，它包含多个以不同速度上升的可变权重和大小的矩形，最终离开视口——它们的权重将定义它们上升的速度。（基本上，我只是试图从视口顶部之外实现全局引力。）

有没有可行的办法按照D3的兵力布局来做到这一点？我只是在寻找概念性的解决方案，但示例和代码片段也很受欢迎。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T10:26:10.523

这里有几个想法：

1.  您可以在刻度事件处理程序中直接修改节点的垂直位置：

    ```
    force.on("tick", function(e) {
        nodes.forEach(function(o, i) {
            o.y -= o.weight / 30;
         });

         node.attr("cx", function(d) { return d.x; })
             .attr("cy", function(d) { return d.y; });
    }); 
    ```

    您需要为此方法设置 force.gavity(0) 。

2.  或者您可以使用 force.gravity：它将节点拉向布局中心，您可以指定 svg 转换以将布局中心移动到视口上方

# python - Python 多词索引

> ID：12572225
> 
> 赞同：2
> 
> 时间：2012-09-24T20:13:23.527
> 
> 标签：python, list, dictionary

```
index = {'Michael': [['mj.com',1], ['Nine.com',9],['i.com', 34]], / 
         'Jackson': [['One.com',4],['mj.com', 2],['Nine.com', 10], ['i.com', 45]], /
         'Thriller' : [['Seven.com', 7], ['Ten.com',10], ['One.com', 5], ['mj.com',3]}

# In this dictionary (index), for eg: 'KEYWORD': 
# [['THE LINK in which KEYWORD is present,'POSITION
# of KEYWORD in the page specified by link']] 
```

> 例如：Michael 出现在 MJ.com、NINE.com 和 i.com 的各个页面的第 1、9、34 位。

`index`请帮助我使用一个以和`KEYWORDS`作为输入的python程序。

当我进入`'MICHAEL'`. 结果应该是：

```
>>['mj.com', 'nine.com', 'i.com'] 
```

当我输入`'MICHAEL JACKSON'.`结果应该是：

`>>['mj.com', 'Nine.com']`

因为 '`Michael'`和 '`Jackson'`分别出现在位置 (1,2)`'mj.com'`和`'nine.com'`(9,10) 处。结果不应该显示`'i.com'`，即使它包含两个关键字但它们不是连续放置的。

当我输入`'MICHAEL JACKSON THRILLER',`结果应该是

`['mj.com']`

因为这 3 个单词`'MICHAEL', 'JACKSON', 'THRILLER'`分别连续放置在`'mj.com'`ie 位置 (1, 2, 3)。

如果我输入`'THRILLER JACKSON'`或`'THRILLER FEDERER',`结果应该是`NONE`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:38:26.353

使用集合和交集：

```
def func(key,dic):
    keys=key.split()
    values=[set(y if i==0 else y if dic[x][y]-dic[keys[i-1]].get(y,-10000)==1 \
                else None for y in dic[x]) for i,x in enumerate(keys)]
    sett=values[0]
    for y in values[1:]:
        sett &= y
    print(sett)

index = {'Michael': {'mj.com':1,'Nine.com':9,'i.com':34},
         'Jackson':{'One.com':4,'mj.com':2,'Nine.com':10,'i.com':45},
         'Thriller' : {'Seven.com':7,'Ten.com':10,'One.com':5,'mj.com':3}} 
```

**输出：**

```
>>> func("Michael",index)
{'Nine.com', 'mj.com', 'i.com'}
>>> func("Michael Jackson",index)
{'Nine.com', 'mj.com'}
>>> func("Michael Jackson Thriller",index)
{'mj.com'} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T21:31:12.107

作为旁注，Udacity Intro to CS 正好涵盖了这个问题。这对正确的输入做出了许多假设（基本上它永远不会遇到任何不正确的输入）。

```
def lookup(index,KEYWORDS):
    kw = KEYWORDS.split()
    if len(kw) == 1:
        return [site[0] for site in index[kw[0]]]
    else:
        positions = {}
        result = []
        kw = KEYWORDS.split()
        for kword in kw:
            for site in index[kword]:
                positions[(kword,site[0])]=site[1]
        for i in range(0,len(kw)-1):
            cur_urls = [site[0] for site in index[kw[i]]]
            next_urls = [site[0] for site in index[kw[i+1]]]
            if i == 0:
                result = cur_urls
            for url in cur_urls:
                if url in next_urls:
                    if not (positions[kw[i+1],url]-positions[kw[i],url]) == 1:
                        result.remove(url)
                else:
                    if url in result:
                        result.remove(url)
        return result 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T21:35:24.310

首先，由于您的搜索似乎忽略了大小写，您应该大写（或小写）您的索引。

```
index = dict((key.upper(), val) for (key, val) in index.iteritems()) 
```

现在这是一种递归方法。一、接口功能：

```
def search(query):
    return [site for (site, pos) in search2(query.split())] 
```

下一个函数执行实际工作。如果只给出一个词，则返回该词在索引中的条目；否则过滤位置匹配的那些索引。

```
def search2(words):
    if len(words) == 1:
        return index[words[0]]
    else:
        return [(site1, pos1) for (site1, pos1) in index[words[0]]
                              for (site2, pos2) in search2(words[1:])
                              if (site1 == site2 and pos1 == pos2-1)] 
```

当然，如果`pos`实际上可以是每个站点的职位*列表，事情会变得有点复杂......*

# android - FLAG_ACTIVITY_CLEAR_TOP 调用 onCreate() 而不是 onResume()

> ID：12572227
> 
> 赞同：9
> 
> 时间：2012-09-24T20:13:43.933
> 
> 标签：android

所以我有一个通过整个应用程序扩展的抽象类，它覆盖后退键以将 Activity A 重新排序到前面（带有标志）。

所以，它会是：

A > B > 任何地方，后退键*应该*带我回到 A

我正在使用 FLAG_ACTIVITY_CLEAR_TOP，但由于某种原因它完全刷新了 A，我不希望这样。

所以：Flag_activity_clear_top 正在重新加载 onCreate() 而不是 onResume()。是什么赋予了？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-24T20:19:11.233

如果您希望 Activity 在不重新启动的情况下被带到顶部，则在清单中将 Activity 的 launchMode 设置为[singleTop](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)。当活动被带到顶部时，您将收到对[onNewIntent的调用。](http://developer.android.com/reference/android/app/Activity.html#onNewIntent%28android.content.Intent%29)onNewIntent 在 onResume 之前调用。如果您只希望特定意图的此行为，您可以使用[addFlags](http://developer.android.com/reference/android/content/Intent.html#addFlags%28int%29)调用而不是清单将[FLAG_ACTIVITY_SINGLE_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_SINGLE_TOP)（除了 FLAG_ACTIVITY_CLEAR_TOP）添加到意图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-31T10:31:30.013

```
Intent intent = new Intent(CurrentActivity.this, ActivityNeedOnTop.class);
                    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
                    startActivity(intent);
                    CurrentActivity.this.finish(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T17:43:08.540

[来自FLAG_ACTIVITY_CLEAR_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)的 API 文档

```
For example, consider a task consisting of the activities:
A, B, C, D. If D calls startActivity() with an Intent that
resolves to the component of activity B, then C and D 
will be finished and B receive the given Intent,
resulting in the stack now being: A, B.

**The currently running instance of activity B in the above example
will either receive the new intent you are starting here in its
onNewIntent() method, or be itself finished and restarted with the new intent.** 
```

所以我认为你的活动本身已经完成并重新启动。

# elasticsearch - 每个用户的 ElasticSearch 单独索引

> ID：12572234
> 
> 赞同：2
> 
> 时间：2012-09-24T20:14:02.037
> 
> 标签：elasticsearch, indexing

我想知道拥有数千个不同的索引是否是个坏主意？

我正在基于 ElasticSearch 向我的网络应用程序添加一个搜索页面。搜索页面允许用户通过过滤许多不同的索引标准（姓名、位置、性别等）来搜索网站上的其他用户。这是相当直接的，并且只需要一个索引，其中包含每个站点用户的文档。

但是，我还想创建一个页面，用户可以在其中查看他们关注的所有其他用户的列表。我希望此页面具有与搜索页面相同的过滤选项。我想知道解决这个问题的好方法是否是为每个用户创建一个单独的索引，其中包含他们关注的每个用户的文档？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T16:37:34.940

虽然您当然可以在 elasticsearch 中创建数以千计的索引，但我并不认为在您的用例中需要它。我认为您可以使用一个索引。只需为主用户记录创建一个额外的[子类型](http://www.elasticsearch.org/guide/reference/mapping/parent-field.html) `followers`。每次用户`A`关注用户`B`时，创建一个`B`具有以下内容的子记录：`{"followed_by" : "A"}`. 要获取当前用户关注的用户列表，您可以简单地将[Has Child Filter](http://www.elasticsearch.org/guide/reference/query-dsl/has-child-filter.html)添加到您的查询中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T09:43:27.197

我想补充一下 Igor 的回答，即在一个小集群（一个或两个节点）上创建数千个索引可能会导致一些缺点。索引的每个分片都是一个完整的 Lucene 实例。也就是说，如果您有一个节点（或一个小集群 - 就节点而言），您将有许多打开的文件（可能打开的文件太多）。

这是我不会定义太多索引的主要原因之一......

另请参阅[安装指南上的文件描述符](http://www.elasticsearch.org/guide/reference/setup/installation.html)

# .htaccess - URL 重写但索引为查询字符串

> ID：12572238
> 
> 赞同：1
> 
> 时间：2012-09-24T20:14:10.360
> 
> 标签：.htaccess, url-rewriting, seo

我试着用谷歌搜索，但它给我的只是关于如何重写的教程，所以我想我会在这里试一试。

问题是我们有一个 htaccess 文件，它将 url 重写为查询字符串：

```
RewriteEngine On

RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^\/]+\/*[^\/]*\/*.*)$ index.php?app_route=$1 [QSA,L] 
```

这有效，似乎谷歌正在接受它，但是当你点击谷歌中的链接时，它会显示它被重写的查询字符串。我们只链接到“不错”的网址，所以我们不知道谷歌在哪里找到了这个。谷歌`site:sorellehaarmode.nl`自己看看。

有没有人有这个问题的经验或解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T22:30:22.427

尝试添加这些规则（在您当前的 htaccess 文件中的任何位置，低于您已有的规则都可以）：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.php\?app_route=([^&\ ]+)&?([^\ ]*)
RewriteRule ^/?index\.php$ /%1?%2 [L,R=301] 
```

这应该将带有查询字符串的 URL 永久指向没有的 URL。

# android - android mapview - 附加到“onZoom”之类的东西

> ID：12572243
> 
> 赞同：1
> 
> 时间：2012-09-24T20:14:30.187
> 
> 标签：android, zooming, android-mapview

我想为每个缩放级别更新我在地图视图上绘制的多边形。放大或缩小地图视图时如何获得通知？

BR

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:32:26.017

不幸的是，没有通知您缩放级别更改的本机回调。您可以做的是扩展本机地图视图并在`onDraw`方法内查找缩放级别更改：

```
public final class CustomMapView extends MapView
{
    private int lastZoomLevel = -1;

    @Override
    public void draw(Canvas canvas) 
    {
        if (isZoomChange()) 
        {
            lastZoomLevel = this.getZoomLevel();
            onZoomLevelChange(lastZoomLevel); //this would be your notification function
        }
        super.draw(canvas);
    }

    private boolean isZoomChange() 
    {
        return (getZoomLevel() != lastZoomLevel);
    }
} 
```

# javascript - 为什么手动触发事件时回调中未定义事件e？

> ID：12572244
> 
> 赞同：3
> 
> 时间：2012-09-24T20:14:31.340
> 
> 标签：javascript, mootools, mootools-events

我正在使用**Mootools**并向链接添加点击事件。我已经向一个事件添加了一个函数：

```
$('addCallRoute').addEvent('click', addCallRoute); // Add button 
```

该函数包含以下内容：

```
function addCallRoute(e) {
    console.log(e);
} 
```

触发事件的函数（没有实际点击）

```
$('addCallRoute').fireEvent('click'); 
```

***问题：*** 当我物理上单击链接时，`e`已定义。但是当我以编程*方式触发事件*时，`e`是`undefined`。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T20:23:38.890

因为您实际上并没有在物理上触发一个动作，而是远程触发它。这就是它的工作原理。

`event`通常包含有关触发操作的元素的所有类型的信息。

`event`在尝试对其使用任何方法之前，请始终检查是否已定义。或者这样做：

```
link.fireEvent('click', {
    stop: function(){}
}); 
```

# php - 我在这个 PHP/Mysql 代码中哪里出错了？

> ID：12572245
> 
> 赞同：0
> 
> 时间：2012-09-24T20:14:32.887
> 
> 标签：php, mysql

以下代码仅适用于第一个值（puzzle_level==4），它应该做的是打印出puzzle_level==4、5、6和7 :(

```
 $result = mysql_query("
    SELECT puzzle_level, max(final_score) as highest_final_score
        FROM sleuth_game
        WHERE playerID='$_SESSION[customerID]' and final_score > 1
        GROUP BY puzzle_level
        ORDER BY puzzle_level");  //Load in a the highest scores
    while($row = mysql_fetch_array($result)) {
        echo "<p>".$row['highest_final_score']."</p>";
    } 
```

编辑：在数据库中，所有游戏都是puzzle_level 4、5、6或7。我希望的输出是玩家在每个puzzle_level中获得的最高分，但我编写的代码只显示puzzle_level=的最高分=4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:38:42.990

您究竟想在 SQL 查询的 WHERE 语句中使用 'final_score>1' 实现什么？

```
SELECT puzzle_level, max(final_score) as highest_final_score
FROM sleuth_game
WHERE playerID='$_SESSION[customerID]' and final_score > 1
GROUP BY puzzle_level
ORDER BY puzzle_level 
```

也许 HAVING 子句是您想要实现的解决方案：

```
SELECT puzzle_level,MAX(final_score) AS highest_final_score
FROM sleuth_game
WHERE playerID='$_SESSION[customerID]'
GROUP BY puzzle_level
HAVING MAX(final_score)>1
ORDER BY puzzle_level 
```

# android - 在 android 中导出 sqlite db 架构

> ID：12572251
> 
> 赞同：1
> 
> 时间：2012-09-24T20:14:48.797
> 
> 标签：android, database, sqlite

我在 android 中玩 sqlite db。我的问题是，如何为项目的数据库导出模式？

也许一个类的`SchemaExporter`工作方式如下：`exporter.export("test.db")`. 只需创建对象并将项目的数据库名称作为输入。然后它将输出整个数据库的模式，可以立即用于在另一个 sqlite 环境中创建相同的数据库。

注意我想导出**架构**，而不是数据库本身。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T22:23:50.777

SQLite 本身没有这样的功能。

命令行[`sqlite`工具](http://www.sqlite.org/sqlite.html)有`.schema`命令。您可以在 Android 下运行它，或者查看其源代码并将逻辑复制到您的程序中。

# iphone - iphone上的位置数据

> ID：12572252
> 
> 赞同：0
> 
> 时间：2012-09-24T20:15:00.220
> 
> 标签：iphone, objective-c, ios, geolocation

我试图在我的应用程序中获取 iphone 的位置数据，但由于某种原因，我一直`kclAuthorizationStatusNotDetermined`在我的`switch`块中。

我知道在模拟器上启用了位置服务，并且我`CLLocationManager`在我的头文件中声明了一个事实，所以我知道它存在。

我的代码如下：

```
if ([CLLocationManager locationServicesEnabled])
{
    //check if this app is allowed to access geolocation
    switch ([CLLocationManager authorizationStatus])
    {
        case kCLAuthorizationStatusNotDetermined:
            // do something
            NSLog(@"Status not determined");
            break;

        case kCLAuthorizationStatusDenied:
            //do something
            NSLog(@"Status denied");
            break;

        case kCLAuthorizationStatusRestricted:
            //do something
            NSLog(@"Status restricted");
            break;

        case kCLAuthorizationStatusAuthorized:
            [manager startUpdatingLocation];
            CLLocation *currentCoords = [manager location];
            NSString *location = [currentCoords description];
            UIAlertView *gps = [[UIAlertView alloc]
                                initWithTitle:@"Current Location" message:location delegate:nil cancelButtonTitle:@"Cancel" otherButtonTitles:@"OK", nil];
            [gps show];
            //getHails or getDetails();
            break;
    }
} 
```

我错过了什么吗？提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:01:51.790

根据[Apple 的 Doc](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)，`kCLAuthorizationStatusNotDetermined`意味着“用户尚未选择此应用程序是否可以使用位置服务。” 我已经看到其他消息来源声称当位置服务存在其他障碍时可能会发生这种情况，例如为应用程序启用了位置服务但未在设备上打开。

如果位置服务已关闭或尚未为应用启用，iOS 通常会提示用户。此外，如果用户之前拒绝了应用程序的定位服务，但无论如何您以编程方式启动定位服务，我认为用户会被提示打开它们。您是否看到这种行为或不同的东西？

为了清楚起见，当您说位置服务已打开时，您检查了位置服务是否已在全球范围内打开，并且它们已为您的特定应用启用，对吗？

在模拟器中运行应用程序时，在重新安装之前从模拟器中完全删除应用程序可能会有所帮助，这样设置包就会被删除。这应该重新初始化您的应用程序位置服务的应用程序级授权的任何已保存状态。

编辑：

如果您没有看到提示您启用位置服务的弹出窗口，那么听起来您确实没有在拨打`[<your location manager instance> startUpdatingLocation]`. 你确定这会被调用吗？

# html - 移动菜单未显示在 Twiitter Bootstrap 网页中

> ID：12572262
> 
> 赞同：0
> 
> 时间：2012-09-24T20:16:04.823
> 
> 标签：html, twitter-bootstrap, responsive-design

我有这个代码：

```
<!DOCTYPE html>
<html>
<head>
  <title>Webpage</title>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
  <![endif]-->

    <!-- CSS
  ================================================== -->
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/bootstrap-responsive.css">
    <script type="text/javascript" src="js/bootstrap.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
</head>
<body>
  <div class="navbar navbar-fixed-top navbar-inverse">
    <div class="navbar-inner">
      <div class="container">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
        <a class="brand" href="#">La Estación Argentina</a>
        <div class="nav-collapse">
          <ul class="nav">
            <li><a href="index.html">Home</a></li>
                        <li><a href="index.html">Nosotros</a></li>
                        <li><a href="index.html">Menú</a></li>
                        <li><a href="index.html">Galería</a></li>
                        <li><a href="index.html">Ubicación</a></li>
                        <li><a href="index.html">Promociones</a></li>
                        <li><a href="index.html">Contacto</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="row">
      <div class="span9"></div>
      <div class="span3">
      </div>
    </div>
  </div>
</body>
</html> 
```

并且应用了 CSS 的代码在“缩小”页面时为我们提供了这个结果（响应性完美无缺）：

![样品图像](../Images/835e8a7f40d53d642b3090a05f71293b.png)

但是当点击按钮在移动设备上显示菜单元素时，它什么也没有显示，（但全角页面确实有菜单元素）为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:23:08.043

问题是操作菜单的功能依赖于jQuery库。

查看这个 JSBin 示例，其中包含该库并且工作正常，[http://jsbin.com/itutin/1/](http://jsbin.com/itutin/1/)

# c++ - 编译错误 C++ 模板化函数，迭代器作为参数

> ID：12572264
> 
> 赞同：0
> 
> 时间：2012-09-24T20:16:12.480
> 
> 标签：c++, templates

我以为我开始掌握 C++ 的窍门......

然后我写了我认为我们是非常简单的模板化函数，突然之间似乎没有什么意义了。编译器似乎甚至不喜欢我定义了一个模板化函数的事实，这似乎有点疯狂。它是单一的编译单元，所以我不确定它会抱怨什么。

```
#include <vector>
#include <iostream>

typedef std::vector<int> int_vec_type;

template <typename Type>
bool print_vec(Type::const_iterator itr, const Type::const_iterator end)
{
    for (; itr != end; ++itr) {
        std::cout << *itr << std::endl;
    }

    return true;
}

int
main()
{
    int_vec_type ivec;

    ivec.push_back(0);
    ivec.push_back(1);
    ivec.push_back(2);

    print_vec(ivec.begin(), ivec.end());

    return 0;
} 
```

这些是编译错误：

tia.cc:7:22: 错误：'bool print_vec' 的模板声明</p>

tia.cc:7:37: 错误：在 'itr' 之前需要 ')'</p>

tia.cc:7:42: 错误: 'const' 之前的预期主表达式</p>

tia.cc：在函数“int main()”中：

tia.cc:25:39：错误：“print_vec”未在此范围内声明

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T20:18:08.033

容器的类型不能从迭代器的类型推导出来。您可以简单地将模板转换为：

```
template <typename Iterator>
bool print_vec(Iterator itr, const Iterator end)
{
    for (; itr != end; ++itr) {
        std::cout << *itr << std::endl;
    }

    return true;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T20:19:13.410

第一个问题：你没有用过`typename`. 无论类型依赖于模板参数，您都必须在该类型前面加上`typename`.

其次，编译器无法推断`type`. 它只能看到的类型`ivec.begin()`并且不知道可能将其作为 typedef 的任何其他类型。无论如何，你只能`const_iterator`直接接受 - 你不能接受`T::const_iterator`- 没有`T`明确通过。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T20:18:57.583

最好的解决方案是根据迭代器类型进行模板化，因为不能从函数参数中推断出容器的类型：

```
template <typename Iterator>
bool print_vec(Iterator itr, Iterator end) { .... } 
```

# objective-c - 使用多个键订购 NSMutableDictionary

> ID：12572269
> 
> 赞同：1
> 
> 时间：2012-09-24T20:16:48.593
> 
> 标签：objective-c, ios, xcode, arrays, nsmutabledictionary

我有一个`NSMutableDictionary`带两把钥匙的。一种用于标题（例如“测试”），另一种用于距离（例如“200”英里）。

如何按最近或最远距离对这些值进行排序。订购时，我需要同时更改标题和距离值索引。

所以这将是常规版本`NSMutableDictionary`：

```
Titles: (
    "Test1"
    "Test2"
    "Test3"
)

Distances: (
    "240"
    "43"
    "482"
) 
```

和订购的版本（最近的距离）：

```
Titles: (
    "Test2"
    "Test1"
    "Test3"
)

Distances: (
    "43"
    "240"
    "482"
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:27:00.573

我不禁觉得您想要的是 NSDictionaries 的 NSArray 或自定义对象的 NSArray。这种设计感觉真的很尴尬，并产生了额外的工作——因为如果你以这种方式构建数据，唯一真正的答案是“围绕整个事物创建一个自定义 API，非常小心地管理这个不变量，然后只通过那个接口改变这个数据结构。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T20:55:58.967

正如@Chuck 所说，如果对这两个数组进行排序或保持它们的排序是关键操作，那么对数组是显而易见的结构。但是，如果这是一种罕见的操作，并且有充分的理由将其保留为 2 数组字典，那么您可以通过以下方式实现您的目标：

1.  创建一个新数组（NSArray 或普通 C 数组），其元素数量*n与您的数组相同。*
2.  *用整数 0 到 ( n* - 1)填充这个数组
3.  自定义排序该数组基于在相同索引处查找数组中的值`Distances`并比较它们来排序两个值。
4.  完成后，您有一个索引数组作为您希望应用于两个数组的排列。
5.  置换两个数组。

但是一组对会更容易......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T20:57:50.647

我会这样做：

```
NSDictionary *dic1 = [NSDictionary dictionaryWithObjectsAndKeys:@"TEST1", @"TITLE", [NSNumber numberWithInt:240], @"DISTANCE", nil];
NSDictionary *dic2 = [NSDictionary dictionaryWithObjectsAndKeys:@"TEST2", @"TITLE", [NSNumber numberWithInt:43], @"DISTANCE", nil];
NSDictionary *dic3 = [NSDictionary dictionaryWithObjectsAndKeys:@"TEST3", @"TITLE", [NSNumber numberWithInt:482], @"DISTANCE", nil];

NSSortDescriptor *distanceSort = [NSSortDescriptor sortDescriptorWithKey:@"DISTANCE" ascending:YES]; //Set 'NO' to order from biggest to lowest

NSArray *sortedArrayOfDic = [[NSArray arrayWithObjects:dic1, dic2, dic3, nil] sortedArrayUsingDescriptors:[NSArray arrayWithObjects:distanceSort, nil]];

NSLog(@"%@", sortedArrayOfDict); 
```

输出将是一个按距离排序的字典数组，例如：

```
"43", "TEST2"
"240", "TEST1"
"482", "TEST3" 
```

# php - PHP将pdf添加到电子邮件

> ID：12572280
> 
> 赞同：0
> 
> 时间：2012-09-24T20:18:09.673
> 
> 标签：php, email, pdf, encode

我已成功在网站上创建了一个 pdf 文件。我想做的是将该pdf作为电子邮件的附件发送。到目前为止，我似乎已经成功地附加了文件，但是在尝试打开附件时，acrobat reader 给了我这个错误消息：

```
Acrobat could not open 'example2.pdf' because it is either not a supported type or because the file has been damaged (for example, it was sent as an email attachment and wasn't correctly decoded) 
```

我认为这个错误消息已经击中了头，下面是我的代码有人知道需要更改什么吗？谢谢提前:)

```
$to = "me@domain"; 
$from = "me@domain.com"; 
$subject = "send email with pdf attachment"; 
$message = "<p>Please see the attachment.</p>";
// a random hash will be necessary to send mixed content
$separator = md5(time());
// carriage return type (we use a PHP end of line constant)
$eol = PHP_EOL;
// attachment name
$filename = "example.pdf";
// encode data (puts attachment in proper format)
$attachment = chunk_split(base64_encode("/include/pdf.php?reportid=849980"));
// main header (multipart mandatory)
$headers  = "From: ".$from.$eol;
$headers .= "MIME-Version: 1.0".$eol; 
$headers .= "Content-Type: multipart/mixed; boundary=\"".$separator."\"".$eol.$eol; 
$headers .= "Content-Transfer-Encoding: 7bit".$eol;
$headers .= "This is a MIME encoded message.".$eol.$eol;
// message
$headers .= "--".$separator.$eol;
$headers .= "Content-Type: text/html; charset=\"iso-8859-1\"".$eol;
$headers .= "Content-Transfer-Encoding: 8bit".$eol.$eol;
$headers .= $message.$eol.$eol;
// attachment
$headers .= "--".$separator.$eol;
$headers .= "Content-Type: application/octet-stream; name=\"".$filename."\"".$eol; 
$headers .= "Content-Transfer-Encoding: base64".$eol;
$headers .= "Content-Disposition: attachment".$eol.$eol;
$headers .= $attachment.$eol.$eol;
$headers .= "--".$separator."--";
// send message
mail($to, $subject, "", $headers); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:02:45.543

```
$filename = "example.pdf";
// encode data (puts attachment in proper format)
$attachment = chunk_split(base64_encode("/include/pdf.php?reportid=849980")); 
```

看起来是你的问题。您的附件确实似乎是 pdf，而是一个 php 页面......您还需要二进制（rb）读入 pdf 的文件内容，例如：

```
$filename = 'example.pdf';  
$fileloc = '/path/to/pdf/'.$filename;   

$filehandle = fopen($fileloc, 'rb');
$data = fread($filehandle, filesize($fileloc));
fclose($filehandle);                

$attachment = chunk_split(base64_encode($data)); 
```

# html - 带有不透明文本的透明背景

> ID：12572297
> 
> 赞同：1
> 
> 时间：2012-09-24T20:19:07.643
> 
> 标签：html, wordpress, css, transparency

在我的网站上，您可以[看到](http://fusion.fusionconstruction.co.uk/)我正在尝试在缩略图上显示标题，橙色背景是半透明的，但标题也继承了 CSS 的 opacity 属性。

问题是我不能使一个元素不透明而另一个元素半透明。

有什么办法可以为帖子的标题分配不同的类？

我在 index.php 中使用以下 php 代码来显示这些帖子，如下所示：

```
get_header(); ?>

    <div id="primary">
        <div id="content" role="main">

        <div id="welcome">
        <h1>HELLO</h1>
        <p>Fusion Media offer a range of media services within the sport of cycling.</p><p>Wherever you look, more and more people are finding cycling an inclusive platform to reach the new breed of health-conscious, weekend-adventurers.</p> <p><strong>Whatever you need to achieve resonance with that group,</p><p>Fusion Media has you covered.</strong></p>
        </br>
        <p><h1>LATEST NEWS</h1></p>
        </br>
        </div>
        <?php if ( have_posts() ) : ?>

            <?php twentyeleven_content_nav( 'nav-above' ); ?>

            <?php query_posts('cat=4&showposts='.get_option('posts_per_page')); ?>

            <?php /* Start the Loop */ ?>
            <?php while ( have_posts() ) : the_post(); ?>
            <div class="post-thumb-title">
            <a href="<?php the_permalink() ?>"><?php the_post_thumbnail(array(632,305));?></a>
            <p class="thumb-title"><?php the_title(); ?></p>
            </div>                  

            <?php endwhile; ?>

            <?php twentyeleven_content_nav( 'nav-below' ); ?>

        <?php else : ?>

            <article id="post-0" class="post no-results not-found">
                <header class="entry-header">
                    <h1 class="entry-title"><?php _e( 'Nothing Found', 'twentyeleven' ); ?></h1>
                </header><!-- .entry-header -->

                <div class="entry-content">
                    <p><?php _e( 'Apologies, but no results were found for the requested archive. Perhaps searching will help find a related post.', 'twentyeleven' ); ?></p>
                    <?php get_search_form(); ?>
                </div><!-- .entry-content -->
            </article><!-- #post-0 -->

        <?php endif; ?>
        <div id="welcome">
        <p><h1><a href="/latest-news/">MORE NEWS...</a></h1></p>
        </br>
        </div>
        </div><!-- #content -->
    </div><!-- #primary -->

<?php get_sidebar(); ?>
<?php get_footer(); ?> 
```

这是 div 的 CSS：

```
div.post-thumb-title p.thumb-title {
margin: 0;
height: 2em;
line-height: 2;
position: relative;
top: -2.5em;
max-width: 100%;
text-align: center;
color: #000;
background: #DF7106;
font-family: 'dinregular';
font-size: 22px;
left: -65px;
opacity:0.7 !important;
filter:alpha(opacity=40);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:43:07.353

您应该使用`rgba`或 png 来实现此效果。`opacity`很烦人，因为它也会影响所有子元素以及该元素中的任何内容，并且不能被子元素覆盖。

使用 rgba 会产生这样的结果（我已经删除了其中一个上的图像以显示文本**不透明**）。

![RGBA 示例](../Images/aed8bffe94438787bde44e70e728c6b4.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-24T20:26:21.603

为什么不设置：

```
div.post-thumb-title{
    margin: 0;
    height: 2em;
    line-height: 2;
    position: relative;
    top: -2.5em;
    max-width: 100%;
    text-align: center;
    color: #000;
    background: #DF7106;
    font-family: 'dinregular';
    font-size: 22px;
    left: -65px;
    opacity:0.7 !important;
    filter:alpha(opacity=40);
}
p.thumb-title{
    color:#000;
    opacity: 1;        
} 
```

如果它`p`与 thumb-title 类的样式分组，它将获得相同的不透明度。

# url - 如何在 KnpPaginatorBundle 中使用友好的 URL

> ID：12572301
> 
> 赞同：4
> 
> 时间：2012-09-24T20:19:20.963
> 
> 标签：url, symfony, pagination

我在 Symfony 2.1 项目中安装了 KnpPaginatorBundle 并配置了 Paginator。

通过分页，我的 URL 看起来像：

```
http://dev.localhost/app_dev.php/news/development?page=3 
```

是否可以将 URL 更改为这样的（或类似的 - 没有？和 = 字符）？

```
http://dev.localhost/app_dev.php/news/development/page/3 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-11-25T10:02:15.367

我找到了解决方案，要解决您的问题，请按照下列步骤操作：

1）创建新路由或更改旧路由，因此在 routing.yml 中添加：

```
news_development_route:
    pattern: /news/development/{page}
    defaults: {_controller: AcmeMainBundle:Article:list, page: 1 } 
```

2）在您的类控制器中，像这样更改您的方法：

```
// Acme\MainBundle\Controller\ArticleController.php

public function listAction($page)/*add the $page param*/
{
    $em    = $this->get('doctrine.orm.entity_manager');
    $dql   = "SELECT a FROM AcmeMainBundle:Article a";
    $query = $em->createQuery($dql);

    $paginator  = $this->get('knp_paginator');
    $pagination = $paginator->paginate(
        $query,
        $this->get('request')->query->get('page', $page)/*change the number 1 by the $page parameter*/,
        10/*limit per page*/
    );
    $pagination->setUsedRoute('news_development_route'); /*define the pagination route*/

    // parameters to template
    return $this->render('AcmeMainBundle:Article:list.html.twig', array('pagination' => $pagination));
} 
```

就是这样

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T22:51:32.413

在你的控制器中，你需要改变这个：

```
/**
 * @Route("/list/", name="_user_list")
 * @Template()
 */
public function listAction()
{
    $em = $this->get('doctrine.orm.entity_manager');
    $dql = "SELECT a FROM HPPTarjetaBundle:User a";
    $query = $em->createQuery($dql);

    $paginator = $this->get('knp_paginator');
    $pagination = $paginator->paginate(
        $query,
        $this->get('request')->query->get('page', 1)/*page number*/,
        10/*limit per page*/
    );
    return compact('pagination');
} 
```

...对此（参见“页面”参数）：

```
/**
 * @Route("/list/{page}", name="_user_list")
 * @Template()
 */
public function listAction($page)
{
    $em = $this->get('doctrine.orm.entity_manager');
    $dql = "SELECT a FROM HPPTarjetaBundle:User a";
    $query = $em->createQuery($dql);

    $paginator = $this->get('knp_paginator');
    $pagination = $paginator->paginate(
        $query,
        $page/*page number*/,
        10/*limit per page*/
    );
    return compact('pagination');
} 
```

# php - 在面向对象的 PHP 项目中组织文件和文件夹的最佳方式是什么？

> ID：12572302
> 
> 赞同：-1
> 
> 时间：2012-09-24T20:19:28.500
> 
> 标签：php, oop, security

面向对象的 PHP 项目的最佳目录结构是什么？在其他因素中考虑安全性。我通常使用这些技术来构建网站：OOP PHP/MySql、html、css、javascript/jQuery、ajax 和 smarty。而且我现在不想使用框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:45:02.430

只需使用带有[自动加载器的](http://php.net/manual/en/language.oop5.autoload.php)[命名空间](http://php.net/manual/en/language.namespaces.php)。

这样你就可以这样组织你的文件夹：

```
/
  src
    Model
      User.php
    View
      index.php
    Controller
     HomeController.php
  assets
    img
    js
    css 
```

您的`User`课程将如下所示：

```
namespace Model;

class User{ ... } 
```

你可以这样引用它：

```
$user = new \Model\User; 
```

或者：

```
<?php

use \Model\User;

...
// later in your code
$user = new User; 
```

魔法在哪里？当你请求一个类时，**自动加载器**需要它[如果出现任何问题，就会抛出异常]。

一个基本的自动加载器将如下所示：

```
spl_autoload_register(function ($class) {
    include 'src' . str_replace('\\', DIRECTORY_SEPARATOR, $class) . '.php';
}); 
```

它将`src`根据类名从文件夹中搜索类，在本例中为`Model\User`.

* * *

这些是基础知识，您可以对其进行一些调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:24:03.670

最好的方法是目录结构和文件组织反映应用程序，以便开发和操作可访问。

# ruby-on-rails-3 - link_to :controller, :action in view not working ruby on rails

> ID：12572303
> 
> 赞同：0
> 
> 时间：2012-09-24T20:19:30.907
> 
> 标签：ruby-on-rails-3, model-view-controller, routes, link-to

尝试使用 link_to 将信息发送到我的控制器中的操作。

链接如下所示：

```
<%= link_to "Buy", {:controller => :policies, :action => :policy_option_price_calc, :option => "policy_option_a_cost" }, {:method => :post}  %> 
```

我有一个策略控制器，在我的操作内部看起来像这样：

```
def policy_option_price_calc(params)
   #logic stuff

   render :partial => "/policies/swipe_protect/price_total"
end 
```

在我的路线中，我有：

```
resources :policies
    member do
        post 'policy_option_price_calc'
    end
end 
```

我不知道为什么，但是在单击 link_to 链接时我得到了这个 url：

```
http://localhost:3000/?action=policy_option_price_calc&controller=policies&option=policy_option_a_cost 
```

哪个当然不存在，但它甚至没有给我一个错误，它只是由我的处理`HomeControll#index`

我看过：

[表单标签助手](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-button_tag)

[rubyguild 路由](http://guides.rubyonrails.org/routing.html)

[堆栈溢出问题](https://stackoverflow.com/questions/7558601/rails-3-link-or-button-that-executes-action-in-controller)

再加上更多。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:52:12.367

您是否尝试过使用命名路由格式？

```
<%= link_to 'Buy', policy_option_price_calc_policy_url(:option => 'policy_option_a_cost'), :method => :post %> 
```

您可能需要调整路线的名称，但这就是我要做的。您尝试这样做的方式是使用字符串而不是符号：

```
<%= link_to 'Buy', { :controller => 'policies', :action => 'policy_option_price_calc', :option => 'policy_option_a_cost' }, { :method => :post } %> 
```

有关详细信息，请参阅[http://guides.rubyonrails.org/routing.html#the-query-string](http://guides.rubyonrails.org/routing.html#the-query-string)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:57:14.193

如果您删除

```
{ :method => post } 
```

哈希我认为将创建预期的网址。目前，您的请求被路由到 HomeController，因为这是您的 URL 正在调用的内容。

```
http://localhost:3000/policies/?action=policy_option_price_calc&controller=policies&option=policy_option_a_cost 
```

是您正在考虑的路线，但缺少**政策/**部分。

但是，这**不是您问题的解决方案。**对于 POST 请求，您应该使用 button_to 或表单助手而不是 link_to。

# jquery - 使用jQuery在设定时间后更改文本颜色，并无限重复

> ID：12572305
> 
> 赞同：2
> 
> 时间：2012-09-24T20:19:35.547
> 
> 标签：jquery

我找到了这个答案：

[如何在使用 jQuery 之后更改文本？](https://stackoverflow.com/questions/8630722/how-can-i-change-text-after-time-using-jquery)

这基本上可以满足我的需要。但不是让它在最后重定向到另一个页面，我希望它只是不断地循环浏览短信。显然，我删除了 IF 部分以停止重定向，但是如何让它反复循环浏览短信？

```
function nextMsg() {
    if (messages.length == 0) {
        // once there is no more message, do whatever you want
        alert("redirecting");
    } else {
        // change content of message, fade in, wait, fade out and
        // continue with next message
        $('#message').html(messages.pop()).fadeIn(500).delay(1000)
                                          .fadeOut(500, nextMsg);
    }
};

// list of messages to display var messages = [
//   "Hello!",
//   "This is a website!",
//   "You are now going to be redirected.",
//   "Are you ready?",
//   "You're now being redirected..."
// ].reverse();

// initially hide the message $('#message').hide();

// start animation nextMsg(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T20:25:26.823

只需对基本代码进行一些小改动：

```
function nextMsg(i) {
    if (messages.length == i) {
        i = 0;
    }

    $('#message').html(messages[i])
                 .fadeIn(500)
                 .delay(1000)
                 .fadeOut(500, function() {
                     nextMsg(i + 1);
                 });
};

nextMsg(0);​ 
```

**演示：http:** [//jsfiddle.net/8wqv2/](http://jsfiddle.net/8wqv2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:28:44.770

像[这样](http://jsfiddle.net/aq5wx/)的东西会起作用吗？

# css - 如果内容超过 html div 的固定宽度，我如何将文本放入下一行

> ID：12572306
> 
> 赞同：1
> 
> 时间：2012-09-24T20:19:36.443
> 
> 标签：css, html, layout

我有一个 div，它由应用于文本段的不同样式的单词组成。

我正在尝试实现一个布局，如果文本超过 div 的宽度，它应该转到下一行。基本上：没有分词 另外，这里的关键是确保一个词永远不会断，如果整个词不能水平地放入 div 中，它应该移到下一行。

我们可以假设宽度至少大于最长单词的宽度。

[http://jsfiddle.net/cH5tN/15/](http://jsfiddle.net/cH5tN/15/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:33:37.203

你应该做两件事。使用 css 属性`'white-space: no wrap'`并将程式化的字母嵌套在一个跨度内。这是更新的小提琴[http://jsfiddle.net/cH5tN/44/](http://jsfiddle.net/cH5tN/44/)

编辑：

此外，您应该避免使用不间断空格，只使用空格，除非有特定原因您不希望文本在特定空间上中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T20:35:24.460

我会将“单词”单独包装起来，`div`并且只是样式。由于您可能已经在服务器端将单词拆分为（不同大小的）字符，因此在“单词”周围放置一个小的 div 包装器应该很容易？

这些方面的东西：（[http://jsfiddle.net/SS8rV/](http://jsfiddle.net/SS8rV/)）：

```
<style type="text/css">
.word
{
    float: left;
    height: 64px;
}
#box
{
    width:390px;
    height:390px;
    border:1px solid #F00;
    position:absolute;
    top:0px;
    left:0px;
}
</style>

<div id='box'>
    <div class='word'>
        <span style="font-size:64px;">L</span>
        <span style="font-size:16px;">ONGESTWOR</span>
        <span style="font-size:42px;">D</span>
    </div>
    <div class='word'>
        <span style="font-size:36px;">&nbsp;</span>
    </div>
    <div class='word'>
        <span style="font-size:24px;">regular&nbsp;</span>
    </div>
    <div class='word'>
        <span style="font-size:48px;">w</span>
        <span style="font-size:96px;">id</span>
        <span style="font-size:72px;">est</span>
    </div>
</div> 
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T20:28:11.217

如果单词不适合 div，单词会自动转到下一行，但是由于您已将单词分解为单个字母，这就是字母不会作为单词粘在一起的原因。如果你想让字母粘在一起，我会使用 a`<br />`如果它不在同一行。这很草率，但你还是把这些字母打散了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T20:31:24.350

你说的“词”是什么意思？正如 KRyan 所说，这是具有指定宽度的 div 的默认行为。html 不知道，当然，你在 word 下理解的词汇方面，这很愚蠢。只需将构成单词的跨度集合（由您决定）包装到另一个 div（或跨度）中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-06T07:11:17.253

这可能会帮助您：

```
 .message{
         white-space: -moz-pre-wrap !important;
         white-space: -pre-wrap;
         white-space: -o-pre-wrap;
         white-space: pre-wrap;
         word-wrap: break-word;
         word-break: break-all;
         white-space: normal;
    } 
```

# sql - 如何显示 Oracle 搜索结果？

> ID：12572307
> 
> 赞同：0
> 
> 时间：2012-09-24T20:19:41.103
> 
> 标签：sql, oracle

我正在练习 Oracle 中的一些示例，因为我是新手。我想在下表的开头显示与第一个 WHERE 子句匹配的行，并在下表的最后显示最后匹配的 WHERE 子句行。

```
 CREATE table demo(id int, name varchar(50), city varchar(20), zip varchar(20));
    insert into demo values(1,'oliver71','munich','85716');

    insert into demo values(2,'markus71','munich','85716');
    insert into demo values(3,'oliver81','stuttgart','70024');
    insert into demo values(4,'peter82','hale','81978');
    insert into demo values(5,'chinnarose71','rosenheim','80324');
    insert into demo values(6,'guru11','berlin','81982');
    insert into demo values(7,'sachin51','frankfurt','00712');

    select name, city, zip from demo where zip like '%7%' OR city LIKE '%7%' 
     OR name LIKE '%7%'; 
```

我怎样才能在 Oracle 中做到这一点。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:23:20.997

您的查询中没有“WHEN”子句。我假设您的意思是 WHERE 子句的部分。

为此，您需要一种对结果进行排序的方法。这是使用子查询的一种方法，我认为这可能是最清楚的：

```
select name, city, zip
from (select name, city, zip,
             (case when zip like '%7%' then 1
                   when city LIKE '%7%' then 2
                   when name LIKE '%7%' then 3
                   else 0
              end) as matchitem
      from demo
     ) d
where matchitem > 0
order by matchitem 
```

# php - json_decode 双引号和逗号返回 NULL

> ID：12572308
> 
> 赞同：3
> 
> 时间：2012-09-24T20:19:42.333
> 
> 标签：php, json

我正在尝试使用 json_decode 来解码一个 json，其中包含一个带逗号的单词和一个带双引号的单词：

```
{"wordsFont":"Times New Roman","nameList":["Overflow ,","Stack ""]} 
```

json_decode 失败，所以我尝试格式化字符串以使用以下函数转义引号：

```
function fixDoubleQuotedJSON($broken_json)
{
   return str_replace('""','\""',$broken_json);
} 
```

但这只是逗号和双引号位于单词末尾的情况。结果：

```
{"wordsFont":"Times New Roman","nameList":["Overflow \,","Stack \""]} 
```

正确解码，但我需要找到一种方法来处理双引号和逗号的任何位置。有什么建议么？

编辑：这是数据库中的初始值：

```
{\"wordsFont\":\"Times New Roman\",\"nameList\":[\"Overflow ,\",\"Stack \\\"\"]} 
```

而且我无法将生成它的代码更改为数据库

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:34:23.990

通过用 urldecode() 替换 stripslashes() 解决了我的问题。发生这种情况是因为之前有人使用了 urlencode()。

```
$jsonFix = urldecode($json);
$json = json_decode($jsonFix, true); 
```

# android - Android - 在 ImageView 周围设置边框

> ID：12572312
> 
> 赞同：31
> 
> 时间：2012-09-24T20:20:03.383
> 
> 标签：android, android-layout, android-emulator, android-widget, android-imageview

我有一个固定宽度和高度的单元格，让它为 100x100px。在该单元格内，我想显示一个`ImageView`带有边框的。
我的第一个想法是在 中放一个背景资源`ImageView`，并添加 1dp 的填充以创建边框效果：

```
<LinearLayout
        android:layout_width="100dp"
        android:layout_height="100dp" >

    <ImageView
        android:id="@+id/imageView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/image_border"
        android:padding="1dp"
        android:src="@drawable/test_image" />

</LinearLayout> 
```

显然这应该有效，但它没有，或者至少不像预期的那样。
问题是 ImageView 背景填充了整个 100x100px 单元格的空间，因此，如果图像的宽度小于 100px，则顶部和底部边框会显得更大。

注意黄色边框，我需要它在 ImageView 周围正好 1px：

![在此处输入图像描述](../Images/786d7c99b272b54aa9d22ce8a44c5615.png)

任何帮助，想法，任何形式的建议都非常非常感谢。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-24T20:23:31.890

如果你把 padding=1 和背景颜色放在 LinearLayout 中，你会有一个 1px 的黄色边框。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2015-05-19T22:24:46.630

这对我有用...

```
<!-- @drawable/image_border -->
<shape xmlns:android="http://schemas.android.com/apk/res/android">
  <solid android:color="@color/colorPrimary"/>
  <stroke android:width="1dp" android:color="#000000"/>
  <padding android:left="1dp" android:top="1dp" android:right="1dp" android:bottom="1dp"/>
</shape>

<ImageView
  android:layout_width="300dp"
  android:layout_height="300dp"
  android:layout_gravity="center"
  android:padding="1dp"
  android:cropToPadding="true"
  android:scaleType="centerCrop"
  android:background="@drawable/image_border"/> 
```

这是我使用带有边框的 viewpager 和 imageview 得到的结果。

![带有边框 1dp 黑色的示例图像视图。](../Images/1b7f07d3564cb699acab15546e637927.png)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-24T20:35:05.440

如果图像大小可变，那么您将始终获得该效果。我想你需要为 ImageView 设置一个固定的大小并给它一个设置的背景颜色 - 从你的示例的外观来看黑色是有道理的。将 imageview 包装在 FrameLayout 或仅具有黄色背景和 1px 填充的视图中。

编辑

* * *

我想了想，我的答案感觉不对，所以......

如果您将每个 ImageView 设置为固定大小、填充和边距。然后根据需要设置背景颜色就可以得到你想要的效果。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:background="#52D017"
            android:padding="1dp"
            android:layout_margin="5dp"
            android:src="@drawable/test1"
            tools:ignore="ContentDescription" />

        <ImageView
            android:id="@+id/imageView2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_margin="5dp"
            android:background="#52D017"
            android:padding="1dp"
            android:src="@drawable/test2"
            tools:ignore="ContentDescription" />

</LinearLayout> 
```

在屏幕截图中，两个显示的图像的宽度和高度都小于 100 像素。

![例子](../Images/e421f3d5cf236ea384a6afbe1a6021b5.png)

这不处理具有透明背景的图像，因为（在这种情况下）黄绿色显示出来。您可以通过将每个 ImageView 包装在 FrameLayout 中来解决此问题。使 ImageView 背景变黑并使用所需的填充将 FrameLayout 设置为 WrapContent（我认为）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-03-12T09:01:01.567

你可以使用自定义的imageview，从那里你可以得到边框，这里是代码。您还可以根据需要更改填充宽度和笔划宽度。它在第一行代码下方指定，谢谢

```
public class FreeCollage extends ImageView {

    private static final int PADDING = 8;
    private static final float STROKE_WIDTH = 5.0f;

    private Paint mBorderPaint;

    public FreeCollage(Context context) {
        this(context, null);
    }

    public FreeCollage(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
        setPadding(PADDING, PADDING, PADDING, PADDING);
    }

    public FreeCollage(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        initBorderPaint();
    }

    private void initBorderPaint() {
        mBorderPaint = new Paint();
        mBorderPaint.setAntiAlias(true);
        mBorderPaint.setStyle(Paint.Style.STROKE);
        mBorderPaint.setColor(Color.WHITE);
        mBorderPaint.setStrokeWidth(STROKE_WIDTH);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        canvas.drawRect(PADDING, PADDING, getWidth() - PADDING, getHeight() - PADDING, mBorderPaint);
    }
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-05-20T12:16:57.070

这对我有用：

```
 <ImageView
        android:id="@+id/dialpad_phone_country_flag"
        android:layout_width="22dp"
        android:layout_height="15dp"
        android:scaleType="fitXY"
        android:background="@color/gen_black"
        android:padding="1px"/> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-10-17T15:20:09.340

只需将属性 adjustViewBounds 添加到 ImageView。

```
<ImageView
        android:id="@+id/imageView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/image_border"
        android:padding="1dp"
        android:adjustViewBounds="true"
        android:src="@drawable/test_image" /> 
```

请注意，`android:adjustViewBounds="true"`仅适用于`android:layout_width`并`android:layout_height`设置为“wrap_content”。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-08-12T09:50:13.427

只需在 ImageView 布局中添加波纹管

如果 imageview 的 layout_width 和 layout_height 不是 match_parent 而不是使用，

```
android:adjustViewBounds = "true" 
```

或者

```
android:adjustViewBounds = "true"
android:scaleType="fitXY" 
```

或者

```
android:adjustViewBounds = "true"
android:scaleType="centerCrop" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-06-19T06:46:15.907

以下是我在最简单的解决方案中使用的代码片段。

```
<FrameLayout
    android:layout_width="112dp"
    android:layout_height="112dp"
    android:layout_marginLeft="16dp" <!-- May vary according to your needs -->
    android:layout_marginRight="16dp" <!-- May vary according to your needs -->
    android:layout_centerVertical="true">
    <!-- following imageView acts as the boarder which sitting in the background of our main container ImageView -->
    <ImageView
        android:layout_width="112dp"
        android:layout_height="112dp"
        android:background="#000"/>
    <!-- following imageView holds the image as the container to our image -->
    <!-- layout_margin defines the width of our boarder, here it's 1dp -->
    <ImageView
        android:layout_width="110dp"
        android:layout_height="110dp"
        android:layout_margin="1dp"
        android:id="@+id/itemImageThumbnailImgVw"
        android:src="@drawable/banana"
        android:background="#FFF"/>
</FrameLayout> 
```

如果您需要进一步的解释，请查看以下[链接](https://stackoverflow.com/a/30931583/1752988)，我已经充分解释了它。

希望这可能对你有帮助！

干杯!

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-18T10:25:20.027

您必须在您的图像视图中添加比例样式。之后，您的图像将适合。

android:scaleType="fitXY"

# javascript - 通过从文本文件中检索信息来替换 select->option

> ID：12572313
> 
> 赞同：0
> 
> 时间：2012-09-24T20:20:05.593
> 
> 标签：javascript, html

我正在尝试摆脱选项值并从文本文件中检索信息。因此，当我稍后想添加 SP4 时，我可以转到文本文件并添加 SP4，如下所示。这样我就不必通过代码来更新我想要添加的任何内容。

服务包信息.txt SP1 SP2 SP3 SP4

```
<select name="servicePack">
   <option value="SP1">SP1</option>
   <option value="SP2">SP2</option>
   <option value="SP3">SP3</option> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:44:13.847

尝试这个。请记住，如果您只是复制并粘贴此示例，则文件 servicePackinfo.txt 必须位于同一目录中。

```
<select name="servicePack" id="servicePack"></select>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script>

$(document).ready(function() {
    $.get('servicePackinfo.txt', function(data) {
        var options = data.split(' ');
        for (var i=0;i<options.length;i++)
        {
           $('<option value="' + options[i] + '">' + options[i] + '</option>').appendTo('#servicePack');        
        }
    });
});

</script> 
```

# java - java.util.date 显示错误的日期（前一天）

> ID：12572314
> 
> 赞同：0
> 
> 时间：2012-09-24T20:20:10.573
> 
> 标签：java, date, java.util.date

当我更新一条记录时，有一个属于该类的字段`(birth date)`。该字段是日期对象（如果我使用 C#，则为日期时间数据类型）。当我将此类记录保存在数据库中时，记录会成功更新，但是，当我在数据库中查找此记录时`(MySQL)`，此字段显示的日期值错误。月份和年份值是正确的，但日期值显示的是我输入的前一天。

我需要配置一些参数才能使用`java.util.date`class 吗？在我的数据库表中，我用我在课堂上使用的相同类型定义了这个字段。我正在使用`eclipse`和`JSF`使用 Java sdk 1.6.18。

当我在我的代码中设置断点进行调试时，我注意到该`Date`对象正在使用`Gregorian Calendar`，但不幸的是它已经带有错误的日期值。我检查了我的日期时间设置，它们设置正确。我在用`UTC -03:00 (Brazil)`

# c# - 如何在 C# 中使用带有 RSA 算法的私钥对消息进行签名

> ID：12572315
> 
> 赞同：0
> 
> 时间：2012-09-24T20:20:16.660
> 
> 标签：c#, visual-studio-2008, cryptography, rsa, windows-mobile-6

**背景：**我已经获得了一个私钥（XXX.key）和它的密码。另外，我有一个为使用 windows mobile 6 (.NET Compact Edition 3.5) 的 PocketPC 开发的应用程序。 **场景：**我需要使用以下步骤对消息进行签名： 1\. 使用 SHA1 算法对消息进行加密。2\. 使用提供的私钥，使用 RSA 算法对摘要进行签名。3\. 将结果转换为其等效的以 64 位数字编码的字符串表示。我可以通过以下几行来实现第一步：

```
// Step 1
string message = "this message will be encrypted";
byte[] messageBytes = Encoding.UTF8.GetBytes(message);
SHA1 sha1 = SHA1.Create();
byte[] digestion = sha1.ComputeHash(messageBytes, 0, messageBytes.Length);

// Step 2 Here I need to sign with the private key.
RSACryptoServiceProvider rsa = new RSACryptoServiceProvider();

// Step 3
string signedMessage = Convert.ToBase64String(); 
```

值得一提的是，这些步骤必须在无法访问互联网的 Pocket 的应用程序中实现。我的问题是我不知道如何将私钥放入 RSA 算法中。另外，我不是安全方面的专家。请不要告诉我为什么我需要这样做；我不是这样设计的。有谁知道实施第二步？提前致谢。

# git - git维护两个版本

> ID：12572319
> 
> 赞同：0
> 
> 时间：2012-09-24T20:20:26.717
> 
> 标签：git

我有一个签入所有文件的 GIT 存储库，现在我想将应用程序的几个文件发布到它自己的存储库中，供特定开发人员处理该特定部分，而不是查看其余不相关的代码。我应该如何设置它以保持完整回购和部分回购之间的某种同步？

# c# - 模型中的列表集合不回发到控制器

> ID：12572324
> 
> 赞同：0
> 
> 时间：2012-09-24T20:21:04.970
> 
> 标签：c#, asp.net-mvc-3, razor

在过去的 24 小时里，我一无所知。我有一个模型，其中填充了一个集合对象并将其渲染到视图中。一切渲染和回发都很好，当我将表单回发到控制器时，列表 TestExceptionDisplay 为空/null。请帮忙，这让我发疯了，我尝试了几种不同的方法，但现在一无所知。

基本上在视图的末尾有一个 foreach 循环，我在其中呈现 TestExceptionDisplay 属性，我确实为表单集合维护一个索引，以便在发布时将其取回，但无济于事，它总是空的。它渲染得很好，每个项目都使用正确的索引正确显示。

```
public class RunLogEntryTestExceptionDisplay
{
        public string Exception { get; set; }

}

@model RunLog.Domain.Entities.RunLogEntry
@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";

}
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/errorCode.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/testexception.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/runLogEntry.js")" type="text/javascript"></script>
<script type="text/javascript">
    var runlogListErrorsUrl = '@Url.Action("ListErrorCodes", "RunLogEntry")';
    var runlogTestExceptionUrl = '@Url.Action("ListTestExceptions", "RunLogEntry")';

</script>
<fieldset>
    <legend>Enter a new Run Log Entry</legend>
    @using (Html.BeginForm("Create", "RunLogEntry", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
        @Html.ValidationSummary(true)
        <div class="exception">@(ViewBag.ErrorMessage)</div>
        <div class="bodyContent">
            <span class="leftContent">Load List File (Select): </span><span class="rightContent">
                <input type="file" name="file" id="file1" style="width: 500px" />
            </span>
        </div>
                           if (Model.LoadListStoredFileName != null)
                           {
        <div class="bodyContent">
            <span class="leftContent">Attached Load List: </span><span class="rightContent">
                @Html.ActionLink(Model.LoadListFileName, "Download", new { @file = Model.LoadListStoredFileName })
            </span>
        </div>
                           }
        <div class="bodyContent">
            <span class="leftContent">Output File (Select): </span><span class="rightContent">
                <input type="file" name="file" id="file2" style="width: 500px" />
            </span>
        </div>
                           if (Model.OutputStoredFileName != null)
                           {
        <div class="bodyContent">
            <span class="leftContent">Attached Output: </span><span class="rightContent">
                @Html.ActionLink(Model.OutputFileName, "Download", new { @file = Model.OutputStoredFileName })
            </span>
        </div>
                           }
        <div class="bodyContent">
            <span class="leftContent">Import Files: </span>
            <button name="submit" class="art-button" type="submit" value="Upload" style="width: 100px">
                Upload</button>
            <button name="submit" class="art-button" type="submit" value="Remove" style="width: 100px">
                Remove</button>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Operator")
            </span><span class="rightContent">
                @Html.DropDownList("OperatorID", String.Empty)
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Run ID")
            </span><span class="rightContent">[Generated] </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Run Start Date / Time")
            </span><span class="rightContent">
                @Html.EditorFor(model => model.RunDate)
                &nbsp;
                @Html.DropDownList("Hour", ListHelpers.HourList())
                :
                @Html.DropDownList("Minute", ListHelpers.Minute15List())
                &nbsp;
                @Html.DropDownList("AMPM", ListHelpers.AMPMList())
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("System")
            </span><span class="rightContent">
                @Html.DropDownList("SystemID", String.Empty)
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Run Type")
            </span><span class="rightContent">
                @Html.DropDownList("RunTypeID", String.Empty)
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Run Description")
            </span><span class="rightContent">
                @Html.TextAreaFor(model => model.RunDescription, new { style = "width: 600px; height=30px" })
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Assay Performance Issues")
            </span><span class="rightContent">
                @Html.DropDownList("AssayPerformanceIssues1", ListHelpers.YesNoList())
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Tests/Cycles Requested")
            </span><span class="rightContent">
                @Html.EditorFor(model => model.SPTestsRequested)
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Tests/Cycles Completed")
            </span><span class="rightContent">
                @Html.EditorFor(model => model.SPTestsCompleted)
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Run Status")
            </span><span class="rightContent">
                @Html.DropDownList("RunStatusID", String.Empty)
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Assay")
            </span><span class="rightContent">
                @Html.ListBoxFor(model => model.SelectedAssayIDs, new MultiSelectList(RunLog.Domain.Lists.GlobalList.AssayListItems(), "ID", "Name", Model.SelectedAssayIDs))
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Error Code")
            </span><span class="rightContent"><span id="ChildDialogLink" class="treeViewLink">Click
                here to Select Error Codes</span>
                <br />
                <span id="ErrorCodeDisplay" style="cursor: pointer; text-decoration: underline;">@(Model.ErrorDescription)</span>
                @Html.HiddenFor(model => model.ErrorDescription)
            </span>
        </div>

        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Test Exceptions")
            </span><span class="rightContent"><span id="TestExceptionChildDialogLink" class="treeViewLink">
                Click here to View Test Exceptions</span>
                <br />
                <span id="TestExceptionDisplay"></span></span>
        </div>

        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Service Entry Request")
            </span><span class="rightContent">
                @Html.DropDownList("ServiceRequest", ListHelpers.YesNoList())
            </span>
        </div>
        <div class="bodyContent">
            <span class="leftContent">
                @Html.Label("Problem Description")
            </span><span class="rightContent">
                @Html.TextArea("ProblemDescription", new { style = "width: 600px; height: 30px" })
            </span>
        </div>
        <p>
            <input id="LogType" type="hidden" value="Run" />
            <input id="ID" type="hidden" value="0" />
            @if (Model.ExitCode == "1")
            {
                @Html.Hidden("ExitCode", Model.ExitCode)
            }
            else
            {
                <input id="ExitCode" type="hidden" value='0' />
            }
        </p>

        <div id="testExceptiontreeview" title="Dialog Title" style="font-size: 10px; font-weight: normal;
            overflow: scroll; width: 800px; height: 450px;">
            <div id="testExceptions">
            </div>
            <div id="inputTestExceptions">
                <table class="grid" style="width: 450px; margin: 3px 3px 3px 3px;">
                    <thead>
                        <tr>
                            <th>
                                Exception String
                            </th>
                            <th>
                                Comment
                            </th>
                        </tr>
                    </thead>
                    @{var index = 0;}
                    @if (Model.TestExceptionDisplay != null)
                    {
                        foreach (var p in Model.TestExceptionDisplay)
                        {
                        <tr>
                            <td>
                                @Model.TestExceptionDisplay[index].Exception
                                @Html.HiddenFor(model => model.TestExceptionDisplay[index].Exception)
                            </td>
                        </tr>
                           index++;
                        }
                    }
                </table>
            </div>
        </div>

        @Html.HiddenFor(model => model.MaxReplicateId)
        @Html.HiddenFor(model => model.MinReplicateId)
        @Html.HiddenFor(model => model.OutputFileName)
        @Html.HiddenFor(model => model.OutputStoredFileName)
        @Html.HiddenFor(model => model.LoadListFileName)
        @Html.HiddenFor(model => model.LoadListStoredFileName)
        @Html.HiddenFor(model => model.MinTestCompletionDate)
        @Html.HiddenFor(model => model.MaxTestCompletionDate)
@*  @Html.HiddenFor(model => model.RunLogEntryTestExceptionDisplay)*@

        <div class="bodyContent">
            <span class="leftContent"></span><span class="rightContent">
                <button name="submit" class="art-button" type="submit" value="Create">
                    Create</button></span>
        </div>
    }
</fieldset>
<script src="@Url.Content("~/Scripts/exitCode.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/exitCode.js")" type="text/javascript"></script>
<div id="treeview" title="Dialog Title" style="font-size: 10px; font-weight: normal;
    overflow: scroll; width: 800px; height: 450px;">
    <div id="errorCodes">
        @Html.RenderTree(CacheHelper.ErrorCodes(), ec => ec.Name, ec => ec.Children.ToList(), ec => (ec.ID).ToString(), null, "e")
    </div>
    <div id="inputReps" style="display: none;">
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:45:16.530

我相信您最好让 MVC 进行实际迭代并使用索引命名（根据需要），以便稍后绑定已发布的元素。

为此，我建议创建一个编辑器模板，并使用`@Html.EditorFor(m => m.TestExceptionDisplay)`.

与此处所做的类似：[MVC 3 - List<> Model 的编辑器模板](https://stackoverflow.com/q/6880328/1373170)

并让您的编辑器模板只呈现单个项目（意思是，它的模型将是`TestExceptionDisplay`类型，而不是整体`IEnumerable`）。MVC 将为您处理迭代，并为每个项目正确编号。

# ruby-on-rails-3 - Rspec current_path 不显示 current_path 而是显示重定向前的前一个

> ID：12572325
> 
> 赞同：0
> 
> 时间：2012-09-24T20:21:09.540
> 
> 标签：ruby-on-rails-3, selenium, rspec, integration-testing, capybara

我正在使用 capybara 访问我的规范中的一个页面，`visit`然后单击另一个将其重定向到另一个页面的按钮。在我打印的第三行上`current_path`，它仍然显示旧的（第一个 url）而不是第二个。我正在为 chrome 使用 selenium-webdriver。知道为什么会这样吗？

编辑：

Selenium 在第 2 行打开另一个浏览器，而不是重定向。因此，它显示的是前一个浏览器的 url，而不是当前新打开的浏览器。

`Rails 3.2.6` `ruby 1.9.3`

在 and 的定义中`current_path`，`current_url`它表示当前页面的路径和 url。是否`current page`意味着上次打开的浏览器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:15:45.343

您必须明确切换到新窗口。

要使用新窗口，您可以执行以下操作：

```
new_window = page.driver.browser.window_handles.last 
page.within_window new_window do
  #actions performed in new window
end 
```

# sql - 如何在 SQL 中为字段创建条件

> ID：12572330
> 
> 赞同：1
> 
> 时间：2012-09-24T20:21:37.840
> 
> 标签：sql, date, criteria, conditional-statements, restriction

如何限制为 SQL 中的字段输入的值

```
Appointment ( Appointment_ID, Appointment_Date, Appointment_Time ) 
```

我必须限制输入的值应该是

```
Appointment_Date (Monday – Friday) 
Appointment_Time (08:00- 17:00) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:29:21.173

您可以为此使用检查约束。从日期中提取日期并使用 between 子句检查时间。

你用的是什么数据库？

# c# - 将 CSS 选择器转换为 XPATH

> ID：12572331
> 
> 赞同：5
> 
> 时间：2012-09-24T20:21:53.093
> 
> 标签：c#, .net, css, xpath, css-selectors

我在网上看到一篇关于[如何将 CSS 选择器映射到 XPATH 查询](http://plasmasturm.org/log/444/)的文章，所以我想弄清楚是否有任何 .NET 库可以进行映射/转换。如果您对如何执行映射有任何参考或任何想法（如果库不可用），请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T15:11:05.473

您可以尝试在此处找到的 Css2Xpath 库： [https ://bitbucket.org/MostThingsWeb/css2xpath/wiki/Home](https://bitbucket.org/MostThingsWeb/css2xpath/wiki/Home)

我从未使用过它，但也许您可以与我们分享您的经验。

这是一个小的使用示例：

```
String css = "div#test .note span:first-child";
String xpath = css2xpath.Transform(css); 
```

# java - 如何在 SWT 应用程序中进行拼写检查

> ID：12572337
> 
> 赞同：2
> 
> 时间：2012-09-24T20:22:33.493
> 
> 标签：java, eclipse, swt, eclipse-rcp, spell-checking

我有一个 Eclipse 插件 RCP 应用程序，我想在 SWT 浏览器小部件上使用拼写检查器。只是检查是否有人知道如何实现这一点，或者是否有内置的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-27T11:56:11.943

@tm.sauron 这是很久以前的事了，所以我不得不浏览一个旧项目。如果我没记错的话，我最终创建了自己的。我创建了一个对话框，当我在富文本编辑器中单击拼写检查图标时会打开该对话框。我会将代码粘贴到对话框和实际的拼写检查器类中。希望你能看到我在做什么并弄清楚。

```
import java.io.IOException;
import java.net.URISyntaxException;
import java.util.ArrayList;
import java.util.Collection;
import java.util.HashMap;
import java.util.LinkedList;
import java.util.Queue;
import java.util.regex.Pattern;

import org.eclipse.epf.richtext.IRichText;
import org.eclipse.jface.dialogs.MessageDialog;
import org.eclipse.swt.SWT;
import org.eclipse.swt.events.FocusAdapter;
import org.eclipse.swt.events.FocusEvent;
import org.eclipse.swt.events.KeyAdapter;
import org.eclipse.swt.events.KeyEvent;
import org.eclipse.swt.events.SelectionAdapter;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.graphics.Point;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Control;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Label;
import org.eclipse.swt.widgets.List;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.Text;

public class SpellCheckerDialog extends BaseDialog {

    private SpellChecker spellChecker;
    private Queue<String> misspelledWords = new LinkedList<String>();
    private Text wrongWord;
    private List suggestedWords;
    private Button ignoreButton;
    private Button changeButton;
    private IgnoreButtonListener ignoreButtonListener = new IgnoreButtonListener();
    private ChangeButtonListener changeButtonListener = new ChangeButtonListener();
    private ModifiedChangeButtonListener modifiedChangeButtonListener = new ModifiedChangeButtonListener();
    private ModifiedIgnoreButtonListener modifiedIgnoreButtonListener = new ModifiedIgnoreButtonListener();
    private String oldWrongWord;
    private int currentWord = 1;
    private int totalWords;
    private IRichText richText;
    private String noHTMLString;

    public SpellCheckerDialog(Shell parent, IRichText richText) {
        super(parent);
        setShellStyle(SWT.DIALOG_TRIM | SWT.MODELESS | getDefaultOrientation());

        this.richText = richText;

        if (richText != null) {
            /* Instantiate spell checker */
            try {
                spellChecker = new SpellChecker();
                findMisspelledWords();
            } catch (URISyntaxException e) {
                MessageDialog.openInformation(Display.getDefault().getActiveShell(), "Dictionary file for rich text editor not found", e.getMessage());
                e.printStackTrace();
            } catch (IOException e) {
                MessageDialog.openInformation(Display.getDefault().getActiveShell(), "Dictionary file for rich text editor not found", e.getMessage());
                e.printStackTrace();
            }
        }
    }

    @Override
    protected Control createDialogArea(Composite parent) {
        Composite composite = (Composite) super.createDialogArea(parent);
        composite.setLayout(new GridLayout(2, false));
        composite.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));

        /* Not in dictionary label */
        new Label(composite, SWT.NONE).setText("Not in Dictionary:");
        new Label(composite, SWT.NONE);

        /* Current Misspelled Word */
        wrongWord = new Text(composite, SWT.MULTI | SWT.BORDER | SWT.WRAP | SWT.V_SCROLL);
        GridData gd = new GridData(SWT.FILL, SWT.FILL, true, true);
        gd.heightHint = 75;
        gd.minimumHeight = 75;
        wrongWord.setLayoutData(gd);
        wrongWord.addKeyListener(new WrongWordKeyListener());
        wrongWord.addFocusListener(new WrongWordFocusListener());

        /* Ignore Button Actions */
        GridData buttonCompositeGridData = new GridData(SWT.FILL, SWT.FILL, false, true);
        buttonCompositeGridData.widthHint = 125;
        Composite topButtonActionsComposite = new Composite(composite, SWT.NONE);
        topButtonActionsComposite.setLayout(new GridLayout());
        topButtonActionsComposite.setLayoutData(buttonCompositeGridData);
        ignoreButton = new Button(topButtonActionsComposite, SWT.PUSH);
        ignoreButton.setText("Ignore");
        ignoreButton.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, false));
        ignoreButton.addSelectionListener(ignoreButtonListener);

        /* Suggestions label */
        new Label(composite, SWT.NONE).setText("Suggestions:");
        new Label(composite, SWT.NONE);

        /* Suggested Words */
        suggestedWords = new List(composite, SWT.BORDER | SWT.V_SCROLL | SWT.SINGLE);
        suggestedWords.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));

        /* Change Button Actions */
        Composite bottomButtonActionsComposite = new Composite(composite, SWT.NONE);
        bottomButtonActionsComposite.setLayout(new GridLayout());
        bottomButtonActionsComposite.setLayoutData(buttonCompositeGridData);
        changeButton = new Button(bottomButtonActionsComposite, SWT.PUSH);
        changeButton.setText("Change");
        changeButton.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, false));
        changeButton.addSelectionListener(changeButtonListener);

        startSpellChecking();
        return composite;
    }

    private void startSpellChecking() {
        if (!misspelledWords.isEmpty()) {
            super.getShell().setText("Spell Checker (" + currentWord + "/" + totalWords + ")");
            String firstWord = misspelledWords.poll();
            HashMap<Integer, String> suggestions = spellChecker.suggestions(firstWord);

            /* get order of suggestions */
            java.util.List<Integer> sortedKeys = asSortedList(suggestions.keySet());

            wrongWord.setText(firstWord);

            suggestedWords.removeAll();
            for (Integer i : sortedKeys) {
                suggestedWords.add(suggestions.get(i));
            }

            /* if there are no suggestions */
            if (suggestions.size() == 0) {
                suggestedWords.add("No Suggestions");
                changeButton.setEnabled(false);
            } else {
                changeButton.setEnabled(true);
            }

            suggestedWords.select(0);
            currentWord++;
        } else {
            MessageDialog.openInformation(Display.getDefault().getActiveShell(), "No Misspellings", "There were no more misspelled words found.");
            super.close();
        }
    }

    private void findMisspelledWords() {
        misspelledWords.clear();

        /* Get all words in textfield */
        String[] cleanWords = cleanText(richText.getText());
        for(String w:cleanWords){
            System.out.println(w);
        }

        for (String word : cleanWords) {
            if (!word.equals(" ") && !word.isEmpty()) {
                if (!spellChecker.isInDictionary(word)) {
                    misspelledWords.add(word);
                }
            }
        }
        totalWords = misspelledWords.size();
    }

    /**
     * removes html content, new line characters, white spaces at the beginning
     * or end of words, punctuation or non-letters, makes lowercase because that
     * is what the dictionary works with
     * 
     * @param text
     * @return
     */
    private String[] cleanText(String text) {
        /* Remove html */
        noHTMLString = text.replaceAll("\\<.*?>", "");
        noHTMLString = noHTMLString.replaceAll("&.*?;", "");
        if (noHTMLString.contains("<")) {
            int length = 0;
            while (noHTMLString.length() != length) {
                length = htmlTagRemoval(noHTMLString);
            }
            System.out.println("after manual removal noHTMLString: " + noHTMLString);
        }

        /* Remove New Lines */
        noHTMLString = noHTMLString.replaceAll("[\\t\\n\\r]", " ");

        String[] allWords = noHTMLString.split(" ");
        java.util.List<String> cleanedAllWords = new ArrayList<String>();

        for (String word : allWords) {
            /* remove white spaces */
            word = word.trim();
            /* remove non letters */
            if (!containsOnlyLetters(word)) {
                word = removeNonLetters(word);
            }
            cleanedAllWords.add(word);
        }

        /* Make all lowercase */
        for (int i = 0; i < cleanedAllWords.size(); i++) {
            cleanedAllWords.set(i, cleanedAllWords.get(i).toLowerCase());
        }

        return cleanedAllWords.toArray(new String[cleanedAllWords.size()]);
    }

    private int htmlTagRemoval(String string) {
        int i = 0;
        Integer start = null, end = null;
        for (i = 0; i < string.length(); i++) {
            if (string.toCharArray()[i] == '<') {
                start = i;
            }
            if (start != null && string.toCharArray()[i] == '>') {
                end = i;
                noHTMLString = string.replace(string.subSequence(start, end + 1), "");
                break;
            }
        }
        return i;
    }

    private boolean containsOnlyLetters(String s) {
        if (Pattern.matches("[a-zA-Z]+", s)) {
            return true;
        } else {
            return false;
        }
    }

    private String removeNonLetters(String s) {
        StringBuffer sb = new StringBuffer();

        for (int i = 0; i < s.length(); i++) {
            if (Character.isLetter(s.charAt(i)) || s.charAt(i) == '\'') {
                sb = sb.append(s.charAt(i));
            }
        }
        return sb.toString();
    }

    private class WrongWordKeyListener extends KeyAdapter {
        @Override
        public void keyReleased(KeyEvent e) {

            /*
             * Disable suggested words and change ignore button to undo button
             * and the change button listener
             */
            suggestedWords.setEnabled(false);

            ignoreButton.setEnabled(true);
            ignoreButton.setText("Undo Edit");
            ignoreButton.removeSelectionListener(ignoreButtonListener);
            ignoreButton.addSelectionListener(modifiedIgnoreButtonListener);

            changeButton.setEnabled(true);
            changeButton.removeSelectionListener(changeButtonListener);
            changeButton.addSelectionListener(modifiedChangeButtonListener);

            wrongWord.removeKeyListener(this);

        }
    }

    /**
     * This stors the old word incase the user wants to undo the edit later.
     * 
     * @author Will
     * 
     */
    private class WrongWordFocusListener extends FocusAdapter {
        @Override
        public void focusGained(FocusEvent e) {
            oldWrongWord = wrongWord.getText();
            super.focusGained(e);
        }
    }

    private class IgnoreButtonListener extends SelectionAdapter {
        @Override
        public void widgetSelected(SelectionEvent e) {
            // go to next word
            startSpellChecking();
        }
    }

    private class ChangeButtonListener extends SelectionAdapter {
        @Override
        public void widgetSelected(SelectionEvent e) {
            String newWord = suggestedWords.getSelection()[0];

            // change old word
            String correctedChanges = richText.getText().replace(wrongWord.getText(), newWord);
            richText.setText(correctedChanges);

            // next word
            startSpellChecking();

        }
    }

    /**
     * This is used when the user manually edits the misspelled word and changes
     * it
     * 
     * @author Will
     * 
     */
    private class ModifiedChangeButtonListener extends SelectionAdapter {
        @Override
        public void widgetSelected(SelectionEvent e) {
            String newWord = wrongWord.getText();

            // change old word
            String correctedChanges = richText.getText().replace(oldWrongWord, newWord);
            richText.setText(correctedChanges);

            ignoreButton.setText("Ignore");
            ignoreButton.removeSelectionListener(modifiedIgnoreButtonListener);
            ignoreButton.addSelectionListener(ignoreButtonListener);

            changeButton.removeSelectionListener(modifiedChangeButtonListener);
            changeButton.addSelectionListener(changeButtonListener);

            suggestedWords.setEnabled(true);

            wrongWord.addKeyListener(new WrongWordKeyListener());

            // next word
            startSpellChecking();

        }
    }

    /**
     * This is used when the user manually edits the misspelled word and wants
     * to undo changes
     * 
     * @author Will
     * 
     */
    private class ModifiedIgnoreButtonListener extends SelectionAdapter {
        @Override
        public void widgetSelected(SelectionEvent e) {
            /*
             * rename ignore button, fix listeners on both buttons, enable
             * suggested words, undo edit, add modify listener back
             */
            ignoreButton.setText("Ignore");
            ignoreButton.removeSelectionListener(modifiedIgnoreButtonListener);
            ignoreButton.addSelectionListener(ignoreButtonListener);

            changeButton.removeSelectionListener(modifiedChangeButtonListener);
            changeButton.addSelectionListener(changeButtonListener);

            suggestedWords.setEnabled(true);

            wrongWord.setText(oldWrongWord);
            wrongWord.addKeyListener(new WrongWordKeyListener());

            if (suggestedWords.getItem(0).equals("No Suggestions")) {
                changeButton.setEnabled(false);
            }

        }
    }

    private static <T extends Comparable<? super T>> java.util.List<T> asSortedList(Collection<T> c) {
        java.util.List<T> list = new ArrayList<T>(c);
        java.util.Collections.sort(list);
        java.util.Collections.reverse(list);
        return list;
    }

    @Override
    protected Control createButtonBar(Composite parent) {
        return null;
    }

    @Override
    protected Point getInitialSize() {
        Point size = super.getInitialSize();
        size.x = 500;
        size.y = 350;
        return size;
    }
} 
```

这是拼写检查类：

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.net.URISyntaxException;
import java.net.URL;
import java.util.ArrayList;
import java.util.Collections;
import java.util.HashMap;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import org.eclipse.core.runtime.FileLocator;
import org.eclipse.epf.richtext.RichTextPlugin;
import org.osgi.framework.Bundle;

class SpellChecker {

    private final HashMap<String, Integer> nWords = new HashMap<String, Integer>();

    public SpellChecker() throws URISyntaxException, IOException {
        Bundle bundle = RichTextPlugin.getDefault().getBundle();
        URL fileURL = bundle.getEntry("files/dictionary.txt");
        File file = null;
        file = new File(FileLocator.resolve(fileURL).toURI());

        BufferedReader in = new BufferedReader(new FileReader(file));
        Pattern p = Pattern.compile("\\w+");
        for (String temp = ""; temp != null; temp = in.readLine()) {
            Matcher m = p.matcher(temp.toLowerCase());
            while (m.find())
                nWords.put((temp = m.group()), nWords.containsKey(temp) ? nWords.get(temp) + 1 : 1);
        }
        in.close();
    }

    public boolean isInDictionary(String word){
        return nWords.containsKey(word) ? true : false;
    }

    private final ArrayList<String> edits(String word) {
        ArrayList<String> result = new ArrayList<String>();
        for (int i = 0; i < word.length(); ++i)
            result.add(word.substring(0, i) + word.substring(i + 1));
        for (int i = 0; i < word.length() - 1; ++i)
            result.add(word.substring(0, i) + word.substring(i + 1, i + 2) + word.substring(i, i + 1) + word.substring(i + 2));
        for (int i = 0; i < word.length(); ++i)
            for (char c = 'a'; c <= 'z'; ++c)
                result.add(word.substring(0, i) + String.valueOf(c) + word.substring(i + 1));
        for (int i = 0; i <= word.length(); ++i)
            for (char c = 'a'; c <= 'z'; ++c)
                result.add(word.substring(0, i) + String.valueOf(c) + word.substring(i));
        return result;
    }

    public final String correct(String word) {
        if (nWords.containsKey(word))
            return word;
        ArrayList<String> list = edits(word);
        HashMap<Integer, String> candidates = new HashMap<Integer, String>();
        for (String s : list)
            if (nWords.containsKey(s))
                candidates.put(nWords.get(s), s);
        if (candidates.size() > 0)
            return candidates.get(Collections.max(candidates.keySet()));
        for (String s : list)
            for (String w : edits(s))
                if (nWords.containsKey(w))
                    candidates.put(nWords.get(w), w);
        return candidates.size() > 0 ? candidates.get(Collections.max(candidates.keySet())) : word;
    }

    public final HashMap<Integer, String> suggestions(String word) {
        if (nWords.containsKey(word)) {
            HashMap<Integer, String> wordMap = new HashMap<Integer, String>();
            wordMap.put(1, word);
            return wordMap;
        }
        ArrayList<String> list = edits(word);
        HashMap<Integer, String> candidates = new HashMap<Integer, String>();
        for (String s : list)
            if (nWords.containsKey(s))
                candidates.put(nWords.get(s), s);
        if (candidates.size() > 0)
            return candidates;
        for (String s : list)
            for (String w : edits(s))
                if (nWords.containsKey(w))
                    candidates.put(nWords.get(w), w);
        return candidates;
    }

} 
```

# r - 当只有一个地块有轴标签时，如何创建多个地块，每个地块都具有相同的地块面积？

> ID：12572341
> 
> 赞同：8
> 
> 时间：2012-09-24T20:22:54.590
> 
> 标签：r, layout, graphics, plot

我想在 1x3 布局中绘制三个图表。只有第一张图需要有垂直轴标签，但我希望所有三个绘图区域的大小完全相同。如果没有或所有图表都有轴标签，这将没有问题。但是，当一个有轴标签而另外两个没有轴标签时，如何使所有三个图形的大小相同？我正在尝试在基本图形中执行此操作，因为这是我最了解的，但如果它们提供更好的方法来解决我的问题，我会很乐意使用 grid 或 ggplot2。

这是一些假数据、我的绘图代码和绘图本身：

```
# Fake Data
data = structure(list(y1 = 1:5, y2 = c(1.2, 2.4, 3.6, 4.8, 6), y3 = c(1.44, 
2.88, 4.32, 5.76, 7.2)), .Names = c("y1", "y2", "y3"), 
row.names = c("I needed 12 units for financial aid", 
              "I couldn't find any other open classes",
              "I might be adding a major or minor", 
              "The class seemed interesting", "The class fit into my schedule"
), class = "data.frame")

# Plotting code
par(mar=c(5,15,4,1))
par(mfrow=c(1,3))
barplot(data$y1,names.arg=row.names(data), horiz=TRUE,las=1, +
        xlim=c(0,8), main="Group 1")
par(mar=c(5,1,4,1))
barplot(data$y2,names.arg=row.names(data), horiz=TRUE,las=1, +
        axisnames=FALSE, xlim=c(0,8), main="Group 2")
barplot(data$y3,names.arg=row.names(data), horiz=TRUE,las=1, +
        axisnames=FALSE, xlim=c(0,8), main="Group 3")

# Reset plot options back to defaults
par(mfrow=c(1,1)
par(mar=c(5,4,4,2)+0.1) 
```

[**更新：**我选择了最直接回答我的问题的答案，它是在基本图形中，但我建议也查看其他解决方案，因为它们显示了如何在`lattice`和中做同样的事情`ggplot2`。]

![在此处输入图像描述](../Images/7dd9b257a8fad5063a1714cdcaf5ba87.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T21:13:24.783

对于基本图形，您希望使用外边距而不是常规边距。只需将第一个调用`par(mar=c(5,15,4,1))`替换为`par(oma=c(0,15,0,0))`并删除第二个调用，`par`绘图将占用相等的空间（轴标签将粘贴在左侧的外边距中）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-24T20:38:52.877

使用基本图形最简单的方法可能是让它们都没有 y 轴标签，然后在所有三个左侧的附加面板中分别添加标签。

`lattice`但是像这样的任务是发明（并且`ggplot`，就此而言）的原因之一。您也可以考虑使用点图，尤其是如果您是威廉克利夫兰的粉丝。

```
library(reshape2)
d2 <- data
d2$q <- rownames(d2)
d2 <- melt(d2, measure.vars=1:3, id.vars=4)
d2$q <- factor(d2$q, levels=rownames(data))

library(lattice)
barchart(q ~ value|variable, data=d2)
dotplot(q ~ value|variable, data=d2) 
```

![在此处输入图像描述](../Images/2860eb5906272129c9d2e6b8343b8d8a.png) ![在此处输入图像描述](../Images/962016f2ff3c925e05f187afa68bba4f.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-24T20:33:45.627

我可能可以使用 拼凑一些东西`layout`，但使用**ggplot2**的 faceting 功能更快：

```
data$grp <- rownames(data)
datam <- melt(data,id.vars = "grp")
ggplot(datam,aes(x = grp,y = value)) + 
    facet_wrap(~variable,nrow = 1) + 
    geom_bar(stat = "identity") + 
    coord_flip() 
```

![在此处输入图像描述](../Images/d56f910d852026b133b995b2ae1c7e70.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-24T23:28:31.383

扩展 Greg Snow 的答案（根据您的后续问题），这里是您的代码的最小编辑，它使用基本图形进行：

```
op <- par(oma=c(0,15,0,0), mfrow=c(1,3), mar=c(5,1,4,1))
barplot(data$y1,names.arg=row.names(data), horiz=TRUE,las=1, xlim=c(0,8), main="Group 1")
barplot(data$y2,names.arg=row.names(data), horiz=TRUE,las=1, axisnames=FALSE, xlim=c(0,8), main="Group 2")
barplot(data$y3,names.arg=row.names(data), horiz=TRUE,las=1, axisnames=FALSE, xlim=c(0,8), main="Group 3")
par(op) 
```

避免您提到的“重置”的关键是在一次调用 par() 时分配所有参数

# python - manage.py syncdb 在 Windows 7 上失败

> ID：12572342
> 
> 赞同：0
> 
> 时间：2012-09-24T20:23:02.370
> 
> 标签：python, django, postgresql, psycopg

我正在尝试构建我的第一个 Django 应用程序，但在最初的尝试中我无法让数据库正确同步。

我收到以下错误：

```
c:\mysite>manage.py syncdb
Traceback (most recent call last):
  File "C:\mysite\manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 261, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 69, in load_command_class
    module = import_module('%s.management.commands.%s' % (app_name, name))
  File "C:\Python27\lib\site-packages\django\utils\importlib.py", line 35, in import_module
    __import__(name)
  File "C:\Python27\lib\site-packages\django\core\management\commands\syncdb.py", line 8, in <module>
    from django.core.management.sql import custom_sql_for_model, emit_post_sync_signal
  File "C:\Python27\lib\site-packages\django\core\management\sql.py", line 6, in <module>
    from django.db import models
  File "C:\Python27\lib\site-packages\django\db\__init__.py", line 40, in <module>
    backend = load_backend(connection.settings_dict['ENGINE'])
  File "C:\Python27\lib\site-packages\django\db\__init__.py", line 34, in __getattr__
    return getattr(connections[DEFAULT_DB_ALIAS], item)
  File "C:\Python27\lib\site-packages\django\db\utils.py", line 92, in __getitem__
    backend = load_backend(db['ENGINE'])
  File "C:\Python27\lib\site-packages\django\db\utils.py", line 24, in load_backend
    return import_module('.base', backend_name)
  File "C:\Python27\lib\site-packages\django\utils\importlib.py", line 35, in import_module
    __import__(name)
  File "C:\Python27\lib\site-packages\django\db\backends\postgresql_psycopg2\base.py", line 13, in <module>
    from django.db.backends.postgresql_psycopg2.creation import DatabaseCreation
  File "C:\Python27\lib\site-packages\django\db\backends\postgresql_psycopg2\creation.py", line 1, in <module>
    import psycopg2.extensions
  File "C:\Python27\lib\site-packages\psycopg2\__init__.py", line 67, in <module>
    from psycopg2._psycopg import BINARY, NUMBER, STRING, DATETIME, ROWID
ImportError: DLL load failed: %1 is not a valid Win32 application. 
```

我究竟做错了什么？

我已经安装了 Python 2.7、Postgres 9.1.3.1、psycopg 2.4.5（匹配 2.7 和 9.1.3）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:34:19.593

```
ImportError: DLL load failed: %1 is not a valid Win32 application. 
```

看起来你的机器和 Python/Postgres/psycopg 的架构不匹配。例如，如果您使用的是 32 位架构，但尝试安装 64 位代码。

检查[这篇文章](https://stackoverflow.com/questions/4676433/solving-dll-load-failed-1-is-not-a-valid-win32-application-for-pygame)作为另一个有同样问题的人的例子。这似乎实际上可能是python版本问题。尝试使用您正在使用的其他版本安装 python。

# html - 用css控制滚动条高度

> ID：12572346
> 
> 赞同：0
> 
> 时间：2012-09-24T20:23:20.410
> 
> 标签：html, css, scrollbar

我正在编写一个网站，目前遇到的问题是垂直滚动条比网页内容滚动得更多。例如，如果我有 300 像素的内容（高度），滚动条可能会一直向下滚动到 600 像素。所以当我向下滚动到底部时，我有 300 像素的空白白色。如何调整页面高度或滚动条，使其只允许用户滚动到页面内容的末尾？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:35:03.520

不要给内容一个高度。文本将自动创建内容的高度。

示例：http: [//jsfiddle.net/mSVnx/1/](http://jsfiddle.net/mSVnx/1/)

# c# - 将 32 位 bmp 转换为 24 位

> ID：12572352
> 
> 赞同：6
> 
> 时间：2012-09-24T20:23:47.417
> 
> 标签：c#, .net, image, bmp

我有一个 System.Drawing.Image 屏幕截图文件。我将它转换为 bmp，但问题是它制作的是 32 位 bmp，而我需要一个 24 位的 bmp。如何将其转换为 24？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-24T20:29:52.773

试试这个代码：

```
public static Bitmap ConvertTo24bpp(Image img) {
  var bmp = new Bitmap(img.Width, img.Height, System.Drawing.Imaging.PixelFormat.Format24bppRgb);
  using (var gr = Graphics.FromImage(bmp))
    gr.DrawImage(img, new Rectangle(0, 0, img.Width, img.Height));
  return bmp;
} 
```

# regex - 任意长度字符串和空格正则表达式

> ID：12572353
> 
> 赞同：3
> 
> 时间：2012-09-24T20:23:48.407
> 
> 标签：regex

我试图弄清楚如何编写正则表达式来查找以下字符串：

“10R”、“CRE”

它将需要查找一个**双引号**后跟**一些字符串（各种长度）**，然后是一个**双引号**，然后是一个**逗号**，然后是**一个或多个空格**，然后是一个**双引号**，然后是**一些字符串（各种长度）**，后跟**双引号**；

我多年来一直是一名开发人员，但 RegEx 让我觉得很愚蠢:(

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T20:26:10.497

`"\w*",\s+"[\w\s]*"`

这应该符合您的要求，[请在此处查看正则表达式](http://regexr.com?328p7)。

注意：如果您的语言将正则表达式放在引号内，您可能需要转义双引号 ( `"`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T20:26:29.303

就像是

```
\"\w+\",\s+\"\w\" 
```

根据上下文，转义可能是可选的。

此外，并非所有正则表达式引擎都知道什么`\w`和`\s`类是什么，因此您可能需要以其他方式定义它们。

# javascript - ExtJS 4，不同的行字段

> ID：12572354
> 
> 赞同：1
> 
> 时间：2012-09-24T20:23:50.573
> 
> 标签：javascript, gridview, extjs4.1

可以在网格中定义“逐行”列吗？

例如，我需要这样的网格：

```
 id  |   name    |      options
======================================
int  |  string   |  combobox(1,2,3)
int  |  string   |  combobox(1,2,3,4,5)
int  |  string   |  combobox(1,2,3)
int  |  string   |  combobox(5,6,7) 
```

组合框的可能值是在初始化中为该列定义的……有没有办法定义每行的值，或者在渲染后定义一些方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T23:13:33.793

您在这里有几个选择。但首先要确定为什么首先需要在网格中使用组合框。你需要

1) 一个标准的单元格编辑器插件，当您在单元格内单击时会被激活，或者

2）您是否需要在每一行中始终激活组合框来呈现您的单元格？

如果您的答案是 1)，那么您需要做 2 件事： a) 覆盖默认的 CellEditing 插件以允许在每一行上使用不同的组合框。默认实现每列缓存一次编辑器配置。b) 提供一个在为您的单元格调用 getEditor() 时返回编辑器配置的函数。

我将在下面提供这些代码。

如果您对原始问题回答 2)，那么您需要一个自定义组件，该组件将在您的单元格中呈现一个组合框。这样的野兽有两种实现，我使用的一种是 Skirtles [http://skirtlesden.com/ux/component-column](http://skirtlesden.com/ux/component-column)，另一种称为它的列组件 [http://www.sencha.com/forum/showthread.php ?174504-Its.grid.column.Component](http://www.sencha.com/forum/showthread.php?174504-Its.grid.column.Component)

* * *

附录：

选项 1) 的代码

列配置 -

```
{  text: 'My Combo Column',
   datIndex: 'someStoreField',
   getEditor:function(record){
       console.log('in get editor');
       return myFunctionToDetermineEditorConfig(record);
   }
} 
```

单元格编辑器覆盖。'this' 是对 Grid 的引用

```
this.plugins = [
        Ext.create('Ext.grid.plugin.CellEditing', {
            clicksToEdit:1,
            //override original to allow for multiple editors in a column
            getEditor:function (record, column) {
                    var editor = column.getEditor(record);
                    if (!editor) {
                        return false;
                    }
                    if (!(editor instanceof Ext.grid.CellEditor)) {
                        editor = new Ext.grid.CellEditor({
                            //editorId:editorId,
                            field:editor,
                            ownerCt:this.grid
                        });
                    } else {
                        editor.ownerCt = this.grid;
                    }
                    editor.editingPlugin = this;
                    editor.isForTree = this.grid.isTree;
                    editor.on({
                        scope:this,
                        specialkey:this.onSpecialKey,
                        complete:this.onEditComplete,
                        canceledit:this.cancelEdit
                    });
                    return editor;
                }
        })
    ]; 
```

# r - R中的精度、召回率和f-measure

> ID：12572357
> 
> 赞同：9
> 
> 时间：2012-09-24T20:23:57.227
> 
> 标签：r, precision-recall

我有一段时间没有使用 R，所以也许我只是不习惯它，但是..我在 R 中有一个表，有两个列，第一个有预测值（一个值可以是 0 或 1 )，第二个具有实际值（也是 0 或 1）。我需要找到召回率、精度和 f 度量，但在 R 中找不到合适的函数。（我也读过 ROCR，但我所能做的就是创建一些图，但我真的不需要图，我需要数字）。

有没有什么好的函数可以在 R 中找到精度、召回率和 f 度量？有什么不同的方法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-24T22:40:21.267

首先我创建一个数据集

```
> predict <- sample(c(0, 1), 20, replace=T)
> true <- sample(c(0, 1), 20, replace=T) 
```

我想预测值中的那些 1 是检索到的。检索到的总数为

```
> retrieved <- sum(predict) 
```

精度是检索到的相关实例的比例，是

```
> precision <- sum(predict & true) / retrieved 
```

召回率是检索到的相关实例的一部分，是

```
> recall <- sum(predict & true) / sum(true) 
```

F-measure 是 2 * 精度 * 召回率 /（精度 + 召回率）是

```
> Fmeasure <- 2 * precision * recall / (precision + recall) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-02-14T15:14:47.730

只是将帕特里克的好答案整齐地包装成一个函数......

```
measurePrecisionRecall <- function(predict, actual_labels){
  precision <- sum(predict & actual_labels) / sum(predict)
  recall <- sum(predict & actual_labels) / sum(actual_labels)
  fmeasure <- 2 * precision * recall / (precision + recall)

  cat('precision:  ')
  cat(precision * 100)
  cat('%')
  cat('\n')

  cat('recall:     ')
  cat(recall * 100)
  cat('%')
  cat('\n')

  cat('f-measure:  ')
  cat(fmeasure * 100)
  cat('%')
  cat('\n')
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-10-18T21:12:33.870

`confusionMatrix()`您可以使用包中的函数获取所有这些指标`caret`。

```
# Create a sample
predicted <- as.factor(sample(c(0, 1), 100, replace=T))
realized  <- as.factor(sample(c(0, 1), 100, replace=T))

# Compute the confusion matrix and all the statistics
result <- confusionMatrix(predicted, realized, mode="prec_recall")

result
result$byClass["Precision"]
result$byClass["Recall"]
result$byClass["F1"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-23T03:57:57.193

```
measurePrecisionRecall <- function(actual_labels, predict){
  conMatrix = table(actual_labels, predict)
  precision <- conMatrix['0','0'] / ifelse(sum(conMatrix[,'0'])== 0, 1, sum(conMatrix[,'0']))
  recall <- conMatrix['0','0'] / ifelse(sum(conMatrix['0',])== 0, 1, sum(conMatrix['0',]))
  fmeasure <- 2 * precision * recall / ifelse(precision + recall == 0, 1, precision + recall)

  cat('precision:  ')
  cat(precision * 100)
  cat('%')
  cat('\n')

  cat('recall:     ')
  cat(recall * 100)
  cat('%')
  cat('\n')

  cat('f-measure:  ')
  cat(fmeasure * 100)
  cat('%')
  cat('\n')
} 
```

# objective-c - 将数据从 UITableView 传递到 UIViewController (Detailview)

> ID：12572361
> 
> 赞同：1
> 
> 时间：2012-09-24T20:24:22.627
> 
> 标签：objective-c, uitableview, cocoa

我正在尝试将数据从表视图（集成在普通视图控制器中）传递到详细视图。我已经这样做了好几次了，但总是依赖于`TableViewController`. 现在这是我第一次`UITableView`在正常范围内使用 a `UIViewController`。不知何故，我无法设法让`prepareforseque`方法执行。

这是我的代码的一部分：

```
-(void)preparForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if ([segue.identifier isEqualToString:@"ShowDetails"]) {
         NSIndexPath *indexPath = [self.GTableView indexPathForSelectedRow];
         GDetails *destViewController = segue.destinationViewController;
         destViewController.GName = [[JSONGRListe objectAtIndex:indexPath.row]    
                 objectForKey:@"gname"]}} 
```

到目前为止我检查过的内容：

1.  我有一个名为“ShowDetails”的推送序列。并且动画出现了。但是没有数据被传递。
2.  我想将数据推送到的详细视图的类在 IB 中被选为 GDetails。
3.  JSON 数据是可访问的。我已经用 NSLog 对其进行了测试。
4.  在 GDetails.h 我已经声明

    ```
    @property (nonatomic, strong) NSString *GDetails; 
    ```

    NSString 在 GDetails.m 中合成

5.  我已经使用 UITableView 在我的视图中导入了 GDetails.h

6.  我已经创建了 GTableView

    ```
    IBOutlet UITableView *GTableView; 
    ```

    并在我的视图中使用 UITableView 相应地合成它。

所以我在哪里搞砸了。任何帮助深表感谢！

编辑：我发现我的错误：DI 拼写错误并错过了“e”

# python - 如何在特定子字符串之后获取字符串？

> ID：12572362
> 
> 赞同：314
> 
> 时间：2012-09-24T20:24:26.900
> 
> 标签：python, string, substring

如何在特定子字符串之后获取字符串？

例如，我想获取 in 之后的`"world"`字符串

```
my_string="hello python world, I'm a beginner" 
```

...在这种情况下是`", I'm a beginner"`：）

* * *

## 回答 #1

> 赞同：525
> 
> 时间：2012-09-24T20:27:07.063

最简单的方法可能只是分割你的目标词

```
my_string="hello python world , i'm a beginner "
print my_string.split("world",1)[1] 
```

split 接受要拆分的单词（或字符），并且可以选择限制拆分的数量。

在此示例中，在“世界”上拆分并将其限制为仅一次拆分。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2012-09-24T20:27:31.080

```
s1 = "hello python world , i'm a beginner "
s2 = "world"

print s1[s1.index(s2) + len(s2):] 
```

如果你想处理不存在的情况`s2`，那么使用而*不是*. 如果该调用的返回值为 ，则不在。`s1``s1.find(s2)``index``-1``s2``s1`

* * *

## 回答 #3

> 赞同：71
> 
> 时间：2013-05-23T11:35:10.177

我很惊讶没有人提到`partition`。

```
def substring_after(s, delim):
    return s.partition(delim)[2] 
```

恕我直言，这个解决方案比@arshajii 的更具可读性。除此之外，我认为@arshajii 是最快的——它不会创建任何不必要的副本/子字符串。

* * *

## 回答 #4

> 赞同：42
> 
> 时间：2019-07-16T19:24:29.967

你想使用[`str.partition()`](https://docs.python.org/3/library/stdtypes.html#str.partition)：

```
>>> my_string.partition("world")[2]
" , i'm a beginner " 
```

因为这个选项**比其他选项更快**。

请注意，如果缺少分隔符，这会产生一个空字符串：

```
>>> my_string.partition("Monty")[2]  # delimiter missing
'' 
```

如果您想要原始字符串，请测试从返回的*第二个*值`str.partition()`是否为非空：

```
prefix, success, result = my_string.partition(delimiter)
if not success: result = prefix 
```

您还可以使用[`str.split()`](https://docs.python.org/3/library/stdtypes.html#str.split)1 的限制：

```
>>> my_string.split("world", 1)[-1]
" , i'm a beginner "
>>> my_string.split("Monty", 1)[-1]  # delimiter missing
"hello python world , i'm a beginner " 
```

但是，此选项**较慢**。在最佳情况下，与以下相比，`str.partition()`它很容易*快 15% 左右*`str.split()`：

```
 missing        first         lower         upper          last
      str.partition(...)[2]:  [3.745 usec]  [0.434 usec]  [1.533 usec]  <3.543 usec>  [4.075 usec]
str.partition(...) and test:   3.793 usec    0.445 usec    1.597 usec    3.208 usec    4.170 usec
      str.split(..., 1)[-1]:  <3.817 usec>  <0.518 usec>  <1.632 usec>  [3.191 usec]  <4.173 usec>
            % best vs worst:         1.9%         16.2%          6.1%          9.9%          2.3% 
```

这显示了*每次执行*的时间，此处的输入分隔符要么丢失（最坏情况），要么放在第一位（最好的情况），要么位于下半部分、上半部分或最后一个位置。最快的时间用标记`[...]`和`<...>`最差的标记。

上表是通过对所有三个选项的综合计时试验产生的，如下所示。我在具有 2.9 GHz Intel Core i7 和 16 GB ram 的 2017 型号 15" Macbook Pro 上运行了 Python 3.7.4 测试。

这个脚本生成随机句子，有和没有随机选择的分隔符，如果存在，在生成的句子的不同位置，以随机顺序重复运行测试（产生最公平的结果，说明测试期间发生的随机操作系统事件），然后打印结果表：

```
import random
from itertools import product
from operator import itemgetter
from pathlib import Path
from timeit import Timer

setup = "from __main__ import sentence as s, delimiter as d"
tests = {
    "str.partition(...)[2]": "r = s.partition(d)[2]",
    "str.partition(...) and test": (
        "prefix, success, result = s.partition(d)\n"
        "if not success: result = prefix"
    ),
    "str.split(..., 1)[-1]": "r = s.split(d, 1)[-1]",
}

placement = "missing first lower upper last".split()
delimiter_count = 3

wordfile = Path("/usr/dict/words")  # Linux
if not wordfile.exists():
    # macos
    wordfile = Path("/usr/share/dict/words")
words = [w.strip() for w in wordfile.open()]

def gen_sentence(delimiter, where="missing", l=1000):
    """Generate a random sentence of length l

    The delimiter is incorporated according to the value of where:

    "missing": no delimiter
    "first":   delimiter is the first word
    "lower":   delimiter is present in the first half
    "upper":   delimiter is present in the second half
    "last":    delimiter is the last word

    """
    possible = [w for w in words if delimiter not in w]
    sentence = random.choices(possible, k=l)
    half = l // 2
    if where == "first":
        # best case, at the start
        sentence[0] = delimiter
    elif where == "lower":
        # lower half
        sentence[random.randrange(1, half)] = delimiter
    elif where == "upper":
        sentence[random.randrange(half, l)] = delimiter
    elif where == "last":
        sentence[-1] = delimiter
    # else: worst case, no delimiter

    return " ".join(sentence)

delimiters = random.choices(words, k=delimiter_count)
timings = {}
sentences = [
    # where, delimiter, sentence
    (w, d, gen_sentence(d, w)) for d, w in product(delimiters, placement)
]
test_mix = [
    # label, test, where, delimiter sentence
    (*t, *s) for t, s in product(tests.items(), sentences)
]
random.shuffle(test_mix)

for i, (label, test, where, delimiter, sentence) in enumerate(test_mix, 1):
    print(f"\rRunning timed tests, {i:2d}/{len(test_mix)}", end="")
    t = Timer(test, setup)
    number, _ = t.autorange()
    results = t.repeat(5, number)
    # best time for this specific random sentence and placement
    timings.setdefault(
        label, {}
    ).setdefault(
        where, []
    ).append(min(dt / number for dt in results))

print()

scales = [(1.0, 'sec'), (0.001, 'msec'), (1e-06, 'usec'), (1e-09, 'nsec')]
width = max(map(len, timings))
rows = []
bestrow = dict.fromkeys(placement, (float("inf"), None))
worstrow = dict.fromkeys(placement, (float("-inf"), None))

for row, label in enumerate(tests):
    columns = []
    worst = float("-inf")
    for p in placement:
        timing = min(timings[label][p])
        if timing < bestrow[p][0]:
            bestrow[p] = (timing, row)
        if timing > worstrow[p][0]:
            worstrow[p] = (timing, row)
        worst = max(timing, worst)
        columns.append(timing)

    scale, unit = next((s, u) for s, u in scales if worst >= s)
    rows.append(
        [f"{label:>{width}}:", *(f" {c / scale:.3f} {unit} " for c in columns)]
    )

colwidth = max(len(c) for r in rows for c in r[1:])
print(' ' * (width + 1), *(p.center(colwidth) for p in placement), sep="  ")
for r, row in enumerate(rows):
    for c, p in enumerate(placement, 1):
        if bestrow[p][1] == r:
            row[c] = f"[{row[c][1:-1]}]"
        elif worstrow[p][1] == r:
            row[c] = f"<{row[c][1:-1]}>"
    print(*row, sep="  ")

percentages = []
for p in placement:
    best, worst = bestrow[p][0], worstrow[p][0]
    ratio = ((worst - best) / worst)
    percentages.append(f"{ratio:{colwidth - 1}.1%} ")

print("% best vs worst:".rjust(width + 1), *percentages, sep="  ") 
```

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2012-09-24T20:31:20.497

如果你想使用正则表达式来做到这一点，你可以简单地使用一个[非捕获组](http://www.regular-expressions.info/brackets.html)，得到“世界”这个词，然后抓住一切，就像这样

```
(?:world).* 
```

示例字符串在[此处进行测试](http://rubular.com/r/u1k4Mkqbvp)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2020-06-10T15:21:25.327

在 Python 3.9 中，`removeprefix`添加了一个新方法：

```
>>> 'TestHook'.removeprefix('Test')
'Hook'
>>> 'BaseTestCase'.removeprefix('Test')
'BaseTestCase' 
```

*   文档：[https ://docs.python.org/3.9/library/stdtypes.html#str.removeprefix](https://docs.python.org/3.9/library/stdtypes.html#str.removeprefix)
*   公告：[https ://docs.python.org/3.9/whatsnew/3.9.html](https://docs.python.org/3.9/whatsnew/3.9.html)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2017-01-13T03:15:16.877

这是一个老问题，但我遇到了一个非常相同的情况，我需要使用“低”这个词作为分隔符来分割一个字符串，对我来说，问题是我在同一个字符串中有下面和更低的词。

我以这种方式使用 re 模块解决了它

```
import re

string = '...below...as higher prices mean lower demand to be expected. Generally, a high reading is seen as negative (or bearish), while a low reading is seen as positive (or bullish) for the Korean Won.' 
```

使用 re.split 和正则表达式来匹配确切的单词

```
stringafterword = re.split('\\blow\\b',string)[-1]
print(stringafterword)
' reading is seen as positive (or bullish) for the Korean Won.' 
```

通用代码是：

```
re.split('\\bTHE_WORD_YOU_WANT\\b',string)[-1] 
```

希望这可以帮助某人！

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2018-06-26T04:11:07.253

您可以使用名为`substring`. 只需使用命令安装`pip install substring`。您只需提及开始和结束字符/索引即可获取子字符串。

例如：

```
import substring
s = substring.substringByChar("abcdefghijklmnop", startChar="d", endChar="n")
print(s) 
```

**输出：**

```
# s = defghijklmn 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2020-02-27T23:36:56.370

试试这种通用方法：

```
import re
my_string="hello python world , i'm a beginner "
p = re.compile("world(.*)")
print (p.findall(my_string))

#[" , i'm a beginner "] 
```

# php - 在 PHP 中获取主机和别名

> ID：12572363
> 
> 赞同：2
> 
> 时间：2012-09-24T20:24:29.117
> 
> 标签：php, apache

在 PHP 中，如果我使用**$_SERVER['HTTP_HOST']**我会得到正确的*host.com* 但是，我将 apache 配置为使用别名，但 HTTP_POST 不返回该别名。**host.com/alias/index.php**我可以在 PHP 中使用什么来获取别名？

**编辑**

`http://localhost/myapp redirects`在 apache 中，您可以为特定目录指定别名， 例如`C:/myapp`

现在在我的 php 应用程序中，我需要一种方法来获取我的应用程序的完整路径，这样我就可以在我的应用程序中生成一个文件的绝对 url。`$_SERVER['HTTP_HOST']`仅提供域**(localhost)**而不是作为 url 一部分的别名**(myapp) 。**

# ruby - 在任何来源中都找不到 libv8

> ID：12572367
> 
> 赞同：0
> 
> 时间：2012-09-24T20:24:57.127
> 
> 标签：ruby, ruby-on-rails-3, bundler, therubyracer

捆绑安装效果很好。在我的 gemfile.lock 我有

```
therubyracer (0.10.2)
  libv8 (~> 3.3.10) 
```

但尝试启动服务器返回：

```
/Users/toptierlabs/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/spec_set.rb:90:in `materialize': 
Could not find libv8-3.3.10.4 in any of the sources (Bundler::GemNotFound) 
```

gem已正确安装：

```
gem list libv8 

*** LOCAL GEMS ***

libv8 (3.3.10.4 ruby x86_64-darwin-10) 
```

请帮忙！我不知道该怎么办，我一直被这个问题困扰。我正在使用红宝石 1.9.3。

```
gem which 
/Users/toptierlabs/.rvm/gems/ruby-1.9.3-p194/gems/libv8-3.3.10.4-x86_64-darwin-10/lib/libv8.rb 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T21:51:10.737

我做了 rvm 重新安装 1.9.3 和捆绑更新。它安装了 libv8-3.3.10.4-x86_64-darwin-12 而不是 libv8-3.3.10.4-x86_64-darwin-10 并且可以正常工作。

# mongodb - 在 MongoVUE 中刷新树视图

> ID：12572371
> 
> 赞同：0
> 
> 时间：2012-09-24T20:25:19.690
> 
> 标签：mongodb, mongovue

在 SQL Server 和 MySQL 中，您可以在左侧窗格中刷新数据库的层次结构视图。你能用 MongoVUE 做同样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:49:54.973

您需要在左侧面板中选择要刷新的树节点，然后单击面板右上角的`Refresh`按钮。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-24T20:27:50.020

是的，只需右键单击要刷新的节点，然后从弹出菜单中选择它。

# c# - ASP.NET MVC ModelBinder 自定义字段映射

> ID：12572381
> 
> 赞同：2
> 
> 时间：2012-09-24T20:26:15.183
> 
> 标签：c#, asp.net-mvc, json, instagram

我有一个正在使用的 api，它将对我的一个服务器端方法执行一些 JSON 的 POST。

我正在创建一些映射到该 JSON 结构的 C# 类。我的问题是发布给我的字段之一被命名为“对象”，它是一个字符串。

这是发送给我的 JSON 示例....

```
[
{
    "subscription_id": "1",
    "object": "user",
    "object_id": "1234",
    "changed_aspect": "media",
    "time": 1297286541
},
{
    "subscription_id": "2",
    "object": "tag",
    "object_id": "nofilter",
    "changed_aspect": "media",
    "time": 1297286541
},] 
```

这是我的问题。我如何告诉模型绑定器获取 json“对象”属性并在我的 C# 类中将其映射为不同的名称，因为对象是保留字？

```
 public class InstagramUpdate
{
    public string subscription_id { get; set; }
    public string object_id { get; set; }
    public string object { get; set; } //<-- what should I do here??
    public string changed_aspect { get; set; }
    public int time { get; set; }
} 
```

希望这有意义吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T20:38:30.333

只是在这里也有答案：

如果要将其设置为变量/属性名称，请尝试在您的 c# 保留关键字前面加上“@”。

IE：

```
public class InstagramUpdate
{
    public string subscription_id { get; set; }
    public string object_id { get; set; }
    public string @object { get; set; } //object will be here the prop name
    public string changed_aspect { get; set; }
    public int time { get; set; }
} 
```

# c# - 如何防止我的 DataGridView 行向上移动？

> ID：12572386
> 
> 赞同：1
> 
> 时间：2012-09-24T20:26:41.680
> 
> 标签：c#, winforms, datagridview

当我在 DataGridView 的最后一行输入值时，它向上移动，露出柔软的灰色下腹部。我不希望行移动，我不知道他们为什么这样做。

要查看网格最初的样子，以及将数据输入底行时的样子，请参阅[http://warbler.posterous.com/the-slippery-row](http://warbler.posterous.com/the-slippery-row)

DataGridView 后面有一个面板，但它不是灰色的；它的背景色是“Moccasin”，所以它不是所看到的面板（DataGridView 的背景颜色是 Gainsboro，但我填充它的单元格是白色的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:13:27.053

Passant的想法/代码有效：

1）创建一个新类，将他的代码从这里复制并粘贴到其中：

[在c#中删除datagrid中的空白灰色空间](https://stackoverflow.com/questions/2122985/removing-the-empty-gray-space-in-datagrid-in-c-sharp)

2) 通过 F6 构建项目

3) 将自定义 DGV 拖到您的表单中，瞧！问题解决了

# vba - Excel VBA：使用案例语句进行错误处理

> ID：12572387
> 
> 赞同：1
> 
> 时间：2012-09-24T20:26:43.087
> 
> 标签：vba, excel

我正在尝试使用以下代码验证用户上传的文件。错误处理程序检查上传文件的顶行是否有三个特定的列名。如果一个或多个列名不存在，程序应向用户返回提示，通知他们上传的文件中缺少哪些列，然后关闭文件。

我正在寻求帮助的当前 VBA 代码存在几个问题：

1.  提示未指定用户缺少哪些列。
2.  即使上传的文件中存在所有必需的列，也会触发错误处理程序。

代码：

```
Sub getworkbook()
' Get workbook...
    Dim ws As Worksheet
    Dim filter As String
    Dim targetWorkbook As Workbook, wb As Workbook
    Dim Ret As Variant

    Set targetWorkbook = Application.ActiveWorkbook

    ' get the customer workbook
    filter = ".xlsx,.xls"
    caption = "Please select an input file "
    Ret = Application.GetOpenFilename(filter, , caption)

    If Ret = False Then Exit Sub

    Set wb = Workbooks.Open(Ret)

On Error GoTo ErrorLine:

'Check for columns
var1 = ActiveSheet.Range("1:1").Find("variable1", LookIn:=xlValues, LookAt:=xlWhole, MatchCase:=True).Column
var2 = ActiveSheet.Range("1:1").Find("variable2", LookIn:=xlValues, LookAt:=xlWhole, MatchCase:=True).Column
var3 = ActiveSheet.Range("1:1").Find("variable3", LookIn:=xlValues, LookAt:=xlWhole, MatchCase:=True).Column

ErrorLine: MsgBox ("The selected file is missing a key data column, please upload a correctly formated file.")
If Error = True Then ActiveWorkSheet.Close

wb.Sheets(1).Move Before:=targetWorkbook.Sheets("Worksheet2")
    ActiveSheet.Name = "DATA"

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:45:09.730

这个AME怎么样。应该做你想做的一切，并提醒用户哪些数据列丢失了。此外，不需要`GoTo`声明。只是一个简单的`If Then Else`

```
Sub getworkbook()
' Get workbook...
    Dim ws As Worksheet
    Dim filter As String
    Dim targetWorkbook As Workbook, wb As Workbook
    Dim Ret As Variant

    Set targetWorkbook = Application.ActiveWorkbook

    ' get the customer workbook
    filter = ".xlsx,.xls"
    Caption = "Please select an input file "
    Ret = Application.GetOpenFilename(filter, , Caption)

    If Ret = False Then Exit Sub

    Set wb = Workbooks.Open(Ret)

    'Check for columns
    Dim var1 As Range, var2 As Range, var3 As Range
    Set var1 = ActiveSheet.Range("1:1").Find("variable1", LookIn:=xlValues, LookAt:=xlWhole, MatchCase:=True).Column
    Set var2 = ActiveSheet.Range("1:1").Find("variable2", LookIn:=xlValues, LookAt:=xlWhole, MatchCase:=True).Column
    Set var3 = ActiveSheet.Range("1:1").Find("variable3", LookIn:=xlValues, LookAt:=xlWhole, MatchCase:=True).Column

    If Not var1 Is Nothing Or Not var2 Is Nothing Or Not var3 Is Nothing Then

        wb.Sheets(1).Move Before:=targetWorkbook.Sheets("Worksheet2")
        ActiveSheet.Name = "DATA"

    Else

       MsgBox "The selected file is missing the following key data column(s): " & _
        vbNewLine & _
        vbNewLine & _
        IIf(var1 Is Nothing, "variable1", "") & _
        IIf(var2 Is Nothing, "variable2", "") & _
        IIf(var3 Is Nothing, "variable3", "") & _
        vbNewLine & _
        "Please upload a correctly formated file."

        ActiveWorkbook.Close False

    End If

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T00:52:45.993

看看这是不是你想要的

```
Sub getworkbook()
    ' Get workbook...
    Dim ws As Worksheet
    Dim filter As String
    Dim targetWorkbook As Workbook, wb As Workbook
    Dim Ret As Variant

    Set targetWorkbook = Application.ActiveWorkbook

    ' get the customer workbook
    filter = ".xlsx,.xls"
    Caption = "Please select an input file "
    Ret = Application.GetOpenFilename(filter, , Caption)

    If Ret = False Then Exit Sub

    Set wb = Workbooks.Open(Ret)

'Check the headers in first row
Dim width As Long
Dim var1 As Long, var2 As Long, var3 As Long
With ActiveSheet
    width = .Cells(1, .Columns.Count).End(xlToLeft).Column ' getting the non-empty columns from right to left scanning
    ' var1,2,3 will store the column number contains variable1,2,3
    var1 = -1
    var2 = -1
    var3 = -1
    For j = 1 To width
        If .Cells(1, j).Value = "variable1" Then
            var1 = j
        ElseIf .Cells(1, j).Value = "variable2" Then
            var2 = j
        ElseIf .Cells(1, j).Value = "variable3" Then
            var3 = j
        End If
    Next j

    If var1 = -1 Then
        MsgBox "variable1 not found"
    End If
    If var2 = -1 Then
        MsgBox "variable2 not found"
    End If
    If var3 = -1 Then
        MsgBox "variable3 not found"
    End If
End With

wb.Sheets(1).Move Before:=targetWorkbook.Sheets("Worksheet2")
    ActiveSheet.Name = "DATA"

End Sub 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-24T20:32:05.823

如果没有发生错误，您必须明确结束 Sub 处理，在块声明`Exit Sub`之前放置一条语句。`ErrorLine`它应该解决不希望的触发问题。

# entity-framework - 在我的 repo findbyid 中使用 .include

> ID：12572388
> 
> 赞同：0
> 
> 时间：2012-09-24T20:26:53.967
> 
> 标签：entity-framework, c#-4.0, entity-framework-4

我的通用存储库中有以下功能可以正常工作：

```
public IQueryable<T> FindWhere(System.Linq.Expressions.Expression<Func<T, bool>> predicate, params string[] includes)
{
        IQueryable<T> query = _dbSet;

        foreach (var child in includes)
        {
            query = query.Include(child);
        }

        return query.Where(predicate);            
} 
```

然后我也有这个找到一个项目：

```
public T FindById(int id)
{
        return _dbSet.Find(id);
} 
```

我需要的是一个覆盖，`FindById`它允许我传入`params string[]`包含，以便我急切地加载找到的单个项目的属性。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:49:03.300

您可以使用实体条目来加载相关实体，但是您需要了解关系多重性：

```
entity = _dbSet.Find(id);

// Use this for a reference property
context.Entry(entity).Reference(propertyName).Load();

// Use this instead for a collection property
context.Entry(entity).Collection(propertyName).Load(); 
```

# orchardcms - 1.5.1 下缺少的查询

> ID：12572402
> 
> 赞同：1
> 
> 时间：2012-09-24T20:27:48.927
> 
> 标签：orchardcms

与[Projection 类似，Orchard 1.4.2 中缺少查询，](https://stackoverflow.com/questions/10877904/projection-queries-missing-in-orchard-1-4-2)除了 Projections 显示在仪表板上。但查询没有。

一个故障排除步骤是禁用/重新启用自动路由。没有喜悦。我最初安装了高级菜单 - 我已经禁用它，但没有找到有关更深入卸载的说明。是在哪里发的吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:17:23.463

我关闭了所有非本地模块，重新启动了站点（通过 IIS），删除了 _backup 文件夹（只保留了高级菜单模块）。这些操作中的一些或组合恢复了“查询”。

# javascript - attachEvent 不能使用这个 javascript

> ID：12572404
> 
> 赞同：1
> 
> 时间：2012-09-24T20:27:50.147
> 
> 标签：javascript, this, getelementsbytagname, attachevent

我需要跨兼容性 IE7 向上对于事件侦听器。由于我使用的系统，我只能使用外部 js 文件来创建侦听器。我希望为所有 textarea 框创建一个规则，使它们在包装文本时增加高度，这意味着您永远不必滚动（它们需要打印所有显示的文本）。使用 addEventListener 可以正常工作，但是因为我不能使用 THIS，所以我无法使用 attachEvent 使其正常工作。

```
<html>
<style>
input[type="text"], textarea{ width:10%;}
</style>
<script>
function gettext(){
var x=document.getElementsByTagName("textarea");
var ent; 
for(i = 0; i < x.length; i++){
if (x.item(i).addEventListener) {
    x.item(i).addEventListener("keyup", function () {ChangeDepth(this)}, false)
    x.item(i).addEventListener("mouseup", function () {ChangeDepth(this)}, false)
    x.item(i).addEventListener("change", function () {ChangeDepth(this)}, false)
 }            
 else {
   ent = document.getElementById(x.item(i).id)
   x.item(i).attachEvent ("onkeyup", function () {ChangeDepth(ent)});
   x.item(i).attachEvent ("onmouseup", function () {ChangeDepth(ent)});
   x.item(i).attachEvent ("onchange", function () {ChangeDepth(ent)});

  }
}
}

function ChangeDepth(e){
var t = e.scrollHeight +'px';
if ((e.clientHeight < e.scrollHeight)||(e.clientHeight > e.scrollHeight)){e.style.height = t ;}
}
</script>
<body onload="gettext()">
<p>(Type in the textarea box when the text wraps it will increase the height of the box)<br />
<textarea name="c" cols="" rows="1" id="c"  ></textarea>
<br />
<textarea name="f" cols="" rows="1" id="f"  ></textarea></p>
</body>
</html> 
```

这仅适用于 IE 8 中的最后一个 textarea 字段。我假设这是因为它只有最后一个对象的值。不知道下一步该做什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:44:25.493

[http://jsfiddle.net/KAy9a/](http://jsfiddle.net/KAy9a/)

```
function wireUp() {
    console.log('wiring');
    var x = document.getElementsByTagName("textarea");
    var ent;
    for (i = 0; i < x.length; i++) {
        if (x.item(i).addEventListener) {
            x.item(i).addEventListener("keyup", ChangeDepth, false)
            x.item(i).addEventListener("mouseup", ChangeDepth, false)
            x.item(i).addEventListener("change", ChangeDepth, false)
        }
        else {
            x.item(i).attachEvent("onkeyup", ChangeDepth);
            x.item(i).attachEvent("onmouseup", ChangeDepth);
            x.item(i).attachEvent("onchange", ChangeDepth);

        }
    }
}

function ChangeDepth(e) {
    // instead of passing in the element, we get the Event object
    // we can then get the event target (or srcElement) to know where the event came from    
    e = e || event;
    e = e.target || e.srcElement;

    // the code below is the same you had before:
    var t = e.scrollHeight + 'px';
    if ((e.clientHeight < e.scrollHeight) || (e.clientHeight > e.scrollHeight)) {
        e.style.height = t;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T23:42:31.180

对于使用旧 IE 事件模型（包括 IE 8 的 quirks 模式）的浏览器，您可以使用跨浏览器`addEvent`函数设置侦听器中的元素。`this`例如

```
function addEvent(el, evt, fn) {

  if (el.addEventListener) {
    el.addEventListener(evt, fn, false);

  } else if (el.attachEvent) {
    el.attachEvent('on' + evt, function() {fn.call(el);});
  }
} 
```

现在在您的代码中，您可以执行以下操作：

```
function gettext() {
  var x = document.getElementsByTagName("textarea");
  var ent; 
```

声明一个额外的变量来存储对当前元素的引用。

```
 var el;

  for (var i = 0; i < x.length; i++) { 
```

注意`i`应该声明，否则执行上面的时候会变成全局变量，可能会和其他代码混淆。

```
 el = x[i]; 
```

由于[`getElementsByTagName`](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-A6C9094)返回一个[NodeList](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-536297177)，因此您可以按索引访问成员，这样可以减少键入。存储引用（不知不觉地）更快，以后键入的更少。

```
 addEvent(el, 'keyup', ChangeDepth);
    addEvent(el, 'mouseup', ChangeDepth);
    addEvent(el, 'change', ChangeDepth);
 } 
```

您不再需要传递对元素的引用，因为在侦听器中它将是`this`. 请注意，`addEventListener`用于附加侦听器的位置，传递的第一个参数将是事件对象。但是在哪里`attachEvent`使用，它不会被传递，所以使用`window.event`.

```
function ChangeDepth(e) {

  // Get a reference to the related event object
  var e = e || window.event;

  // Get a reference to the element that called the listener
  var elementThatCalledListener  = this;

  ...

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T22:38:51.433

这似乎有效 - JavaScript：

```
function load() {
    'use strict';

    function changeHeight(){
        var elem = document.activeElement;

        var heightStr = elem.scrollHeight +'px';
        if ((elem.clientHeight < elem.scrollHeight) || (elem.clientHeight > elem.scrollHeight))
        {elem.style.height = heightStr ;}
    }

    var x = document.getElementsByTagName("textarea");
    var i;

    for (i = 0; i < x.length; i++) {
        if (x[i].addEventListener) {
            x[i].addEventListener("keyup", changeHeight)
            x[i].addEventListener("mouseup", changeHeight)
            x[i].addEventListener("change", changeHeight)
        }
        else {
            x[i].attachEvent("onkeyup", changeHeight);
            x[i].attachEvent("onmouseup", changeHeight);
            x[i].attachEvent("onchange", changeHeight);
        }
    }
}

if (window.addEventListener) {
    window.addEventListener('load', load);
} else if (window.attachEvent) {
    window.attachEvent('onload', load);
} 
```

HTML：

```
<!DOCTYPE html>
<style>
    input[type="text"], textarea {
        width: 10%;
    }
</style>
<p>(Type in the textarea box when the text wraps it will increase the height of the box)<br/>
    <textarea rows='1'></textarea>
    <br/>
    <textarea rows='1'></textarea>
</p>
<script type="text/javascript" src="legacyEventIE.js"></script>
</body>
</html> 
```

这是工作代码的链接：

[http://www.quirkscode.com/flat/forumPosts/legacyEventIE/legacyEventIE.html](http://www.quirkscode.com/flat/forumPosts/legacyEventIE/legacyEventIE.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T20:48:30.277

您应该避免在循环内创建函数。这会导致问题，因为使用的变量是封装函数的闭包范围，因此对于所有“新”函数都是通用的。

换句话说：

```
var i, fns = [];
for(i = 0; i < 10; i++) {
    fns.push(function () { return i; });
} 
```

将创建 10 个全部返回的函数`10`（或任何`i`结果）：

```
fn[0](); //is 10
fn[5](); //is 10
i = 5;
fn[5](); //is 5 
```

有几种方法可以解决这个问题。第一种是使用函数包装器并将动态变量作为参数传入。像这样：

```
ent = document.getElementById(x.item(i).id)
(function (my_ent, my_i) {
    x.item(my_i).attachEvent ("onkeyup", function () {ChangeDepth(my_ent)});
    x.item(my_i).attachEvent ("onmouseup", function () {ChangeDepth(my_ent)});
    x.item(my_i).attachEvent ("onchange", function () {ChangeDepth(my_ent)});
}(ent, i)); 
```

另一个可以说是更好的解决方案（至少一个不会导致 JSLint 对你大喊大叫的解决方案）是创建一个生成器函数：

```
var attachEvents = function (item, ent) {
    item.attachEvent ("onkeyup", function () {ChangeDepth(ent)});
    item.attachEvent ("onmouseup", function () {ChangeDepth(ent)});
    item.attachEvent ("onchange", function () {ChangeDepth(ent)});
};

//... Inside the for loop:
    else {
        ent = document.getElementById(x.item(i).id)
        attachEvents(x.item(i), ent);
    } 
```

这更好，因为它不是“重”，并且更容易确定哪些数据与事件处理程序的创建相关（例如，更容易维护）。

但它确实需要更多的改变。所以这取决于你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-20T10:26:10.713

```
var add_event_column_rubrics = function(){
    var id_current_event;
    var secect_class_column_rubrics = document.querySelector('.rubric_click');

    if(secect_class_column_rubrics.addEventListener)//other
        secect_class_column_rubrics.addEventListener('click',function(e){f_secect_class_column_rubrics(e)},false);
    else{if(secect_class_column_rubrics.attachEvent)//IE
        secect_class_column_rubrics.addEventListener('onclick',f_secect_class_column_rubrics);
}

    var f_secect_class_column_rubrics = function(e){
        e=e||window.event;
        e=e.target||e.srcElement;`enter code here`
        // console.log(e);//debug
        id_current_event = e.id;
        alert(id_current_event);
    };
}; 
```

# python - 反斜杠序列不匹配

> ID：12572406
> 
> 赞同：1
> 
> 时间：2012-09-24T20:27:52.657
> 
> 标签：python, regex, negative-lookahead

我想在负前瞻中有一个单词边界。但是，正如您在下面的示例中所见，这似乎不适用于 Python。这是不受支持的吗？如果是这样，有没有办法解决？

陈述我试图解决的全部问题：我有一个我正在使用的正则表达式`re.sub`，并且有几个特定的​​词（如“455”）我想特别不匹配。

```
In [8]: print re.match('(?!455)455', '455')
None

In [9]: print re.match('(?!455\b)455', '455')
<_sre.SRE_Match object at 0x1108fb440> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:36:13.930

`\b`是一个转义序列，因此它将匹配反斜杠字符 ASCII `0x08`。您需要转义反斜杠或使用[原始字符串文字](http://docs.python.org/reference/lexical_analysis.html#string-literals)：

```
>>> print(re.match(r'(?!455\b)455', '455'))
None 
```

# php - mysql的声纳配置失败

> ID：12572414
> 
> 赞同：2
> 
> 时间：2012-09-24T20:28:24.940
> 
> 标签：php, mysql, continuous-integration, jenkins, sonarqube

我正在尝试第一次针对我们的 repo 运行 sonar-runner ...

我有：

1.  安装 Sonar 3.2 并安装在 /opt/sonar
2.  在 /opt/sonar-runner-2.0/ 中安装并配置了 sonar-runner
3.  安装PHP扩展插件并放入/opt/sonar/extensions/plugins/sonar-php-plugin-1.1.jar

我的 sonar.properties 文件具有以下属性：

```
 sonar.jdbc.username:                       sonar
   sonar.jdbc.password:                       sonar
   sonar.jdbc.url:                            jdbc:mysql://localhost:3306/sonar?useUnicode=true&characterEncoding=utf8&rewriteBatchedStatements=true
   sonar.jdbc.driverClassName:                com.mysql.jdbc.Driver 
```

尽管用户/密码设置为 sonar/sonar，但 sonar-runner 仍在尝试以 root@localhost 身份连接...请参见下面的跟踪：

```
Caused by: java.lang.IllegalStateException: Fail to connect to database
    at org.sonar.core.persistence.DefaultDatabase.start(DefaultDatabase.java:66)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.picocontainer.lifecycle.ReflectionLifecycleStrategy.invokeMethod(ReflectionLifecycleStrategy.java:110)
    ... 20 more
Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Access denied for user 'root'@'localhost' (using password: YES))
    at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549)
    at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388)
    at org.apache.commons.dbcp.BasicDataSource.getLogWriter(BasicDataSource.java:1098)
    at org.apache.commons.dbcp.BasicDataSourceFactory.createDataSource(BasicDataSourceFactory.java:350)
    at org.sonar.core.persistence.DefaultDatabase.initDatasource(DefaultDatabase.java:117)
    at org.sonar.core.persistence.DefaultDatabase.start(DefaultDatabase.java:62)
    ... 25 more
Caused by: java.sql.SQLException: Access denied for user 'root'@'localhost' (using password: YES)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1073)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3609)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3541)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:943)
    at com.mysql.jdbc.MysqlIO.secureAuth411(MysqlIO.java:4113)
    at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1308)
    at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2336)
    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2369)
    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2153)
    at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:792)
    at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:381)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:305)
    at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38)
    at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582)
    at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556)
    at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545)
    ... 30 more 
```

更改配置后，我重新启动了声纳服务器...

是否可以使用空/空白密码？如果我注释掉`sonar.jdbc.password`，声纳 GUI 将抛出 500 状态码。如果我`sonar.jdbc.password`留空/空白，那么它仍然会尝试使用密码进行连接：`'root'@'localhost' (using password: YES)`!!

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T22:02:27.397

堆栈跟踪详细说明了错误：

```
Caused by: java.sql.SQLException: Access denied for user 'root'@'localhost' (using password: YES) 
```

看起来配置与您的错误不匹配。您是否尝试将 Sonar 配置为使用 root 用户？

我怀疑您的问题与 mySQL 用户访问有关。您是否尝试以“声纳”用户身份连接到数据库？

# 更新

[Sonar runner](http://docs.codehaus.org/display/SONAR/Installing+and+Configuring+Sonar+Runner)不使用与 Sonar 服务器相同的配置文件。在以下位置查找文件：

```
$SONAR_RUNNER_HOME/conf/sonar-runner.properties 
```

# java - java.util.日期从

> ID：12572416
> 
> 赞同：6
> 
> 时间：2012-09-24T20:28:24.853
> 
> 标签：java, html, spring, date, jstl

我正在将 JSTL 与 Spring 一起使用，并且我得到了代码：

```
<form:input type="datetime-local" path="startDate" /> 
```

其中 startDate 是 java.util.Date

如何从输入中获取日期和时间？是否有正确的方法或者我应该从输入中获取字符串并编写代码将其转换为 java.util.Date？

提前致谢。

这是我的 nuevaTarea.jsp：

```
<%@ include file="/WEB-INF/jsp/include.jsp" %>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Nueva tarea</title>
    <link rel="stylesheet" type="text/css" href="resources/css/style.css" media="screen" />
</head>
<body>
    <h1>Nueva tarea</h1>       
    <form:form action="nuevatarea.htm" method="POST" commandName="tareaForm"> 
        <label>Fecha de inicio:</label><form:input type="datetime-local" path="fechaInicio" /><br />
        <label>Fecha de fin:</label><form:input type="datetime-local" path="fechaFin" /><br />

        <input type="submit" value="Crear tarea" />
    </form:form>
</body>
</html> 
```

这是我的 TareaForm.java，它是命令类：

包web.controller；

导入 java.util.Date；

公共类 TareaForm {

```
private Date fechaInicio;
private Date fechaFin;

public Date getFechaFin() {
    return fechaFin;
}

public Date getFechaInicio() {
    return fechaInicio;
}

public void setFechaFin(Date fechaFin) {
    this.fechaFin = fechaFin;
}

public void setFechaInicio(Date fechaInicio) {
    this.fechaInicio = fechaInicio;
} 
```

}

而且，这是我的控制器 nuevaTareaController.java：

包web.controller；

```
import javax.servlet.http.HttpServletRequest;
import org.springframework.validation.BindException;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.SimpleFormController;

public class nuevaTareaController extends SimpleFormController {

public nuevaTareaController() {
    setCommandClass(TareaForm.class);
    setCommandName("tareaForm");
}

    @Override
    protected Object formBackingObject(HttpServletRequest request) throws Exception {
    return (TareaForm)super.formBackingObject(request);
}   

   @Override
   protected ModelAndView onSubmit(Object command, BindException bindException)
    throws Exception {

    // Do something with (TareaForm)command
    return new ModelAndView(getSuccessView());
  }

} 
```

这是我的 dispatcher-servlet 中控制器的配置：

```
<bean class="web.controller.nuevaTareaController">
    <property name="formView" value="nuevaTarea" />
    <property name="successView" value="tareaCreada" />
    <property name="gestorTareas" ref="tareas" />
</bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:30:37.337

我会使用 PropertyEditor 从字符串转换为日期。Spring[已经为您解决了这个](http://blog.springsource.org/2009/11/17/spring-3-type-conversion-and-validation/)问题。最终结果应该是 java.util.Date。

# javascript - 全日历周日期格式为：2012 年 9 月 23 日至 29 日，而不是：2012 年 9 月 23 日至 29 日

> ID：12572427
> 
> 赞同：1
> 
> 时间：2012-09-24T20:29:27.523
> 
> 标签：javascript, jquery, fullcalendar

使用`titleFormat`我有：

```
$calendar.fullCalendar({
    titleFormat: {
        month: 'MMMM yyyy',                            // September 2009
        week: "MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}", // Sep 7 - 13 2009
        day: 'dddd, MMM d, yyyy'                       // Tuesday, Sep 8, 2009
    } 
```

文档：[http](http://arshaw.com/fullcalendar/docs/text/titleFormat) ://arshaw.com/fullcalendar/docs/text/titleFormat我不明白`[`and是什么`{`意思。

当我尝试时：`d '&#8212;' d MMM [ yyyy]{[ MMM] yyyy}`它显示：**2012 年 9 月 23 日至 23 日**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:41:35.110

试试这个：

```
titleFormat: {
  month: 'MMMM yyyy',
  week: "d[ MMM][ yyyy]{ '&#8212;' d MMM yyyy}",
  day: 'dddd, MMM d, yyyy'
} 
```

# python - Calculate ordering of dendrogram leaves

> ID：12572436
> 
> 赞同：3
> 
> 时间：2012-09-24T20:30:08.523
> 
> 标签：python, data-mining, cluster-analysis, dendrogram

I have five points and I need to create dendrogram from these. The function 'dendrogram' can be used to find the ordering of these points as shown below. However, I do not want to use dendrogram as it is slow and result in error for large number of points (I asked this question here [Python alternate way to find dendrogram](https://stackoverflow.com/questions/12567813/python-alternate-way-to-find-dendrogram)). Can someone points me how to convert the 'linkage' output (Z) to the "dendrogram(Z)['ivl']" value.

```
>>> from hcluster import pdist, linkage, dendrogram
>>> import numpy
>>> from numpy.random import rand
>>> x = rand(5,3)
>>> Y = pdist(x)
>>> Z = linkage(Y)
>>> Z
array([[ 1\.        ,  3\.        ,  0.11443378,  2\.        ],
       [ 0\.        ,  4\.        ,  0.47941843,  2\.        ],
       [ 5\.        ,  6\.        ,  0.67596472,  4\.        ],
       [ 2\.        ,  7\.        ,  0.79993986,  5\.        ]])
>>> 

>>> dendrogram(Z)['ivl']
['2', '1', '3', '0', '4']
>>> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-05-26T21:44:07.763

There is a dedicated function for calculating linearized leaf orders in scipy. Here it is. [scipy.cluster.hierarchy.leaves_list](https://docs.scipy.org/doc/scipy/reference/generated/scipy.cluster.hierarchy.leaves_list.html).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T06:18:55.107

Why is it slow? Sure, the naive way of computing linkage clustering is `O(n^3)` but for `n=5` this is as cheap as it gets...

For the format of the scipy linkage matrix, see this question: [scipy linkage format](https://stackoverflow.com/questions/9838861/scipy-linkage-format)

Note that you may still need to sort the data optimally. The linkage matrix encoding above gives

*   Element 1 and Cluster 3 join at height 0.1144 (into a 2 element cluster, #5)
*   Element 0 and Cluster 4 join at height 0.7999 (into a 2 element cluster, #6)
*   Cluster 5 and Cluster 6 join at height 0.6759 (into a 4 element cluster, #7)
*   Element 2 and Cluster 7 join at height 0.7999 (into a 5 element cluster, #8)

but it might be ordered by linking distance, and not in a 1d ordering for visualization (because not everbody using linkage clustering will want to run dendrogram viusalization afterwards). But in any way, computing the dendrogram should be on the order of `O(n log n)` if you do need to sort, fairly cheap compared to the actual clustering.

Something along these lines should do the trick:

```
n = len(Z) + 1
cache = dict()
for k in range(len(Z)):
  c1, c2 = int(Z[k][0]), int(Z[k][1])
  c1 = [c1] if c1 < n else cache.pop(c1)
  c2 = [c2] if c2 < n else cache.pop(c2)
  cache[n+k] = c1 + c2
print cache[2*len(Z)] 
```

This may appear to be linear, but the expected size of the arrays is `log n`, so depending on your list types it may still be `O(n log n)`, while with linked lists it should indeed be doable in `O(n)`.

But in the end, you might want to **avoid hierarchical clustering**. It is a popular introductory example to cluster analysis, because it is really easy to understand conceptually. There are some quite tricky algorithms (SLINK) to get it down to `O(n^2)` complexity. But there are more modern and powerful clustering algorithms that have lower complexity. Actually, [OPTICS (Wikipedia)](https://en.wikipedia.org/wiki/OPTICS_algorithm) computes something quite similar (when you set minPts=2), and when you have a good index structure it will run in `O(n log n)`. Plus you can increase minPts to get more meaningful clusters. (But do not use OPTICS in Weka, or that python version that is floating around - afaict they are both incomplete or buggy!)

# ruby-on-rails - 将 SLIM 转换为 HAML 或 ERB

> ID：12572438
> 
> 赞同：6
> 
> 时间：2012-09-24T20:30:22.887
> 
> 标签：ruby-on-rails, haml

有什么方法可以将[SLIM](http://slim-lang.com/)文件转换为[HAML](http://haml.info/)或 ERB？我搜索了任何可以进行此转换的现有网站（如 html2haml.heroku.com/ 或 css2sass.heroku.com），但仍然没有运气。谢谢。

苗条的：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:08:08.637

我不知道，但 Texmate 允许您将 slim 转换为 html ([链接](https://gist.github.com/865475))

也许你可以使用它而不是 html2haml ？

希望这仍然可以为您节省一点时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-19T21:51:48.693

看看[Slim 文档](http://rdoc.info/gems/slim/frames)是怎么说的：

**Slim 可以使用 slimrb 转换为 ERB，或者`Slim::ERBConverter`两者都包含在 Slim gem 中**

*   Haml2Slim 转换器
*   ERB2Slim、HTML2Slim 转换器

需要注意的是，ERB 转换相当草率。事实上，我正在开发一个 Slim fork 以在将 Slim 模板转换为 ERB 时改进输出，但它还[没有完全准备好](https://github.com/SteveBenner/slim)。

# c# - 为什么 ReadXmlSchema 创建额外的“ID”列

> ID：12572439
> 
> 赞同：4
> 
> 时间：2012-09-24T20:30:34.757
> 
> 标签：c#, xml, xsd, dataset

给定一个 XSD 文件，如下代码会在返回的 DataSet 的两个 DataTable 中生成一个额外的（和不需要的）列。

```
ds.ReadXmlSchema(s); 
```

两个数据表都有一个 Order_Id 列；其他列与 XSD 完全匹配。

有没有其他人见过这个？

XSD 文件如下：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
  <xs:element name="Order">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="Item" minOccurs="0" maxOccurs="unbounded">
          <xs:complexType msdata:AutoIncrement="false">
            <xs:attribute name="itemId" type="xs:unsignedInt" />
            <xs:attribute name="stockCode" type="xs:string" />
            <xs:attribute name="stockCodeType" type="xs:string" />
            <xs:attribute name="Quantity" type="xs:unsignedLong" />
            <xs:attribute name="ProductIdX" type="xs:unsignedInt" />
            <xs:attribute name="legalEntity" type="xs:string" />
            <xs:attribute name="countryOfIssue" type="xs:string" />
            <xs:attribute name="branchSystem" type="xs:string" />
            <xs:attribute name="accountId" type="xs:string" />
            <xs:attribute name="settlementDate" type="xs:string" />
            <xs:attribute name="tradeDate" type="xs:string" />
            <xs:attribute name="partyCode" type="xs:string" />
            <xs:attribute name="userId" type="xs:string" />
          </xs:complexType>
        </xs:element>
      </xs:sequence>
      <xs:attribute name="OrderId" type="xs:unsignedInt" />
      <xs:attribute name="StrategyId" type="xs:string" />
      <xs:attribute name="ActivityId" type="xs:string" />
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T21:02:22.310

您应该看看[**Deriving DataSet Relational Structure from XML Schema (XSD)**](http://msdn.microsoft.com/de-de/library/bfdchewb.aspx)。这篇文章指出

> 通常，对于架构元素的 每个**complexType 子元素**，都会在 DataSet**中生成一个表。**表结构由复杂类型的定义决定。
> 
> ...
> 
> **但是，只有当complexType 元素嵌套在另一个 complexType**元素中时，才会为顶级 complexType 元素创建表 ，在这种情况下，**嵌套的 complexType 元素将映射**到 DataSet 中的 **DataTable**。

所以基本上在这种情况下`ReadXML(...)` *会创建两个表*

1.  命令
2.  物品

由于**Item complexType****嵌套在 Order complexType**中，因此也会*生成*这两个表之间的*关系*。为了能够创建此关系，**将包含一个新列 Order_id**。

 *****编辑**

进一步了解[**为 XSD 生成数据集关系**](http://msdn.microsoft.com/en-us/library/yk6y3s8y.aspx)。在本文中，您会发现：

> msdata **:Relationship 批注**允许您显式指定架构中未嵌套的元素之间的父子关系。以下示例显示了关系元素的结构。

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
  <xs:element name="Order">
     ... your definition goes here!
 </xs:element>
 <xs:annotation>
   <xs:appinfo>
     <msdata:Relationship name="OrderItemRelation"
      msdata:parent="Order"
      msdata:child="Item" 
      msdata:parentkey="OrderID"
      msdata:childkey="ANY_COLUMN_IN_NESTED_COMPLEX_TYPE"/>
   </xs:appinfo>
  </xs:annotation>
</xs:schema> 
```

因此，您可以**修改将用于**引用内部到外部 complexType 的列，但您**不能阻止此功能**！***

# c# - SendMessage/SC_MONITORPOWER 在运行 Windows 8 时不会打开监视器

> ID：12572441
> 
> 赞同：18
> 
> 时间：2012-09-24T20:30:37.097
> 
> 标签：c#, windows-8, screen

我使用以下代码打开和关闭显示器：

```
[DllImport("user32.dll")]
static extern IntPtr SendMessage(IntPtr hWnd, int Msg, IntPtr wParam, IntPtr lParam);

private const int WM_SYSCOMMAND = 0x0112;
private const int SC_MONITORPOWER = 0xF170;
private const int MonitorTurnOn = -1;
private const int MonitorShutoff = 2;

//Turn them off
SendMessage(f.Handle, WM_SYSCOMMAND, (IntPtr)SC_MONITORPOWER, (IntPtr)MonitorShutoff);

//Turn them on
SendMessage(f.Handle, WM_SYSCOMMAND, (IntPtr)SC_MONITORPOWER, (IntPtr)MonitorTurnOn); 
```

这曾经按预期工作，但是在安装 Windows 8 之后（[我认为这是原因，因为我看到其他人也有同样的问题](http://www.experts-exchange.com/OS/Microsoft_Operating_Systems/Q_27853262.html)）打开屏幕将不起作用。我仍然可以将其关闭，但无论我使用 MonitorTurnOn 运行 SendMessage() 多少次，我仍然必须移动鼠标或按下某个键才能重新打开监视器。

关于如何在 Windows 8 上进行这项工作的任何建议？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-28T10:39:08.640

我有同样的问题，我找到的解决方案是移动鼠标：

```
mouse_event(MOUSEEVENTF_MOVE, 0, 1, 0, NULL);
Sleep(40);
mouse_event(MOUSEEVENTF_MOVE, 0, -1, 0, NULL); 
```

它将唤醒显示器。早珠

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-05T12:23:53.237

这是 Earlypearl 所需的答案，包括：

```
[DllImport("user32.dll")]
static extern void mouse_event(Int32 dwFlags, Int32 dx, Int32 dy, Int32 dwData, UIntPtr dwExtraInfo);

private const int MOUSEEVENTF_MOVE = 0x0001;

private void Wake(){
    mouse_event(MOUSEEVENTF_MOVE, 0, 1, 0, UIntPtr.Zero);
    Sleep(40);
    mouse_event(MOUSEEVENTF_MOVE, 0, -1, 0, UIntPtr.Zero);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-14T05:33:40.867

我对这个问题有同样的想法只是稍微改变了亲爱的 earlypearl 的解决方案，并在 Windows XP、7、8、Server 2008 上对其进行了测试，并且一切正常。

```
mouse_event(MOUSEEVENTF_MOVE, 0, 1, 0, UIntPtr.Zero); 
```

它不需要被调用两次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-18T08:05:04.180

我发现这个技巧可以在 Windows 8.1 上工作

关闭它们

```
SendMessage(f.Handle, WM_SYSCOMMAND, (IntPtr)SC_MONITORPOWER, (IntPtr)MonitorShutoff); 
```

打开它们

```
SendMessage(f.Handle, WM_SYSCOMMAND, (IntPtr)SC_MONITORPOWER, (IntPtr)1); 
```

根据 MSN 的说法，“1”是将显示器切换到“低功耗”，但它可以解决问题。屏幕将不再关闭。

# android - Monodroid 从内存中截取屏幕截图

> ID：12572445
> 
> 赞同：0
> 
> 时间：2012-09-24T20:30:47.577
> 
> 标签：android, bitmap, xamarin.android, screenshot

因此，我正在尝试创建一个函数，该函数实际上将截取当前应用程序活动的屏幕截图并在共享之前将其显示在屏幕上，但是当它到达我用来显示屏幕截图的屏幕时，它会耗尽内存到分享的地步。

```
// image naming and path  to include sd card  appending name you choose for file
Java.IO.File dir = new Java.IO.File(Android.OS.Environment.GetExternalStoragePublicDirectory(Android.OS.Environment.DirectoryPictures), "ScreenShots");

if (!dir.Exists())
    dir.Mkdirs();

// create bitmap screen capture
Bitmap bitmap;
View v1 = act.RootView;
v1.DrawingCacheEnabled = true;
bitmap = Bitmap.CreateBitmap(v1.DrawingCache);
v1.DrawingCacheEnabled = false;

string date = DateTime.Now.ToString();

date = date.Replace('/', '-');

Java.IO.File _file = new Java.IO.File(dir, from + date + ".png");
try
{
    using (var stream = System.IO.File.Create(_file.AbsolutePath))
    {
        bitmap.Compress(Android.Graphics.Bitmap.CompressFormat.Png, 100, stream);
        stream.Flush();
        stream.Close();
    }
    bitmap.Dispose();
    v1.Dispose();
}
catch (Java.IO.FileNotFoundException e)
{
    // TODO Auto-generated catch block
    e.PrintStackTrace();
}
catch (Java.IO.IOException e)
{
    // TODO Auto-generated catch block
    e.PrintStackTrace();
} 
```

我试图找到一种在不牺牲太多质量的情况下做到这一点的好方法。任何帮助不胜感激=]

更新：我尝试这样做与上述相反，也没有运气。

```
View v1 = act.RootView;
v1.DrawingCacheQuality = DrawingCacheQuality.Low;
v1.DrawingCacheEnabled = true;
Bitmap bitmap = Bitmap.CreateScaledBitmap(v1.GetDrawingCache(true),720,1280,false);
v1.DrawingCacheEnabled = false;
v1.DestroyDrawingCache();
v1.Dispose(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:09:03.960

我最终使用：

```
// create bitmap screen capture
View v1 = act.RootView;
Bitmap bitmap = Bitmap.CreateBitmap(720,1280,Bitmap.Config.Argb8888);
Canvas can = new Canvas(bitmap);
v1.Draw(can); 
```

而不是我更新的代码。这有助于获得我需要的屏幕截图并降低内存使用量。

# c# - C# 嵌套 - 访问外部类型的成员

> ID：12572446
> 
> 赞同：2
> 
> 时间：2012-09-24T20:31:08.250
> 
> 标签：c#, class, nested

> **可能重复：**
> [嵌套类型问题](https://stackoverflow.com/questions/5393432/nested-type-problem)

假设我有这个代码：

```
public class Tree
{
    private readonly int nodeCapacity;
    public int NodeCapacity { get { return nodeCapacity; } }

    public Tree(int nodeCapacity)
    {
        this.nodeCapacity = nodeCapacity;
    }

    private class Node
    {
        object[] objects;
        Node()
        {
            objects = new object[nodeCapacity];
        }
    }
} 
```

这不会编译并给出此错误：

> 无法访问外部类型的非静态成员...

有没有办法在不通过构造函数参数传递变量或使用“静态”关键字的情况下访问外部类型的非静态成员（来自嵌套类）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T20:39:42.143

> 我想问一下是否有一种方法可以访问外部类型的非静态成员（来自嵌套类），而无需通过构造函数参数传递变量或使用“静态”关键字。

不，没有办法从嵌套类中访问外部类的实例变量。

在 C# 中，嵌套类是完全独立的实例，与外部类实例没有直接关系。您需要将特定实例传递给`Tree`构造`Node`函数。

```
Node(Tree parent)
{
    objects = new object[parent.nodeCapacity];
} 
```

这样，当`Tree`创建它的节点时，它可以传递`this`给构造函数，它将被正确读取。不过，这里没有真正的缺点。由于`Node`具有私有可访问性，因此只有`Tree`实例才能在任何情况下构造实例。

# ruby-on-rails - 带有 Jammit 和 Rails 2.3 的车把

> ID：12572453
> 
> 赞同：0
> 
> 时间：2012-09-24T20:31:26.563
> 
> 标签：ruby-on-rails, handlebars.js, jammit

我正在尝试让 Handlebars 与 Jammit 和 Rails 2.3 一起工作……我正在苦苦挣扎。我阅读了有关如何使其工作的不同评论。例如这里： [https](https://gist.github.com/1118201) ://gist.github.com/1118201 最后一条评论似乎暗示只需添加
`template_function: Handlebars.template`
您的 assets.yml 就可以了，但它不适合我。当我这样做时： `JST[template_id](params)` 我收到一个 javascript 错误：
`TypeError: Object function anonymous(Handlebars,depth0,helpers,partials,data) { helpers = helpers || Handlebars.helpers; return "div class='timeline_container'\n/div \n"; } has no method 'match'`

任何想法？

非常感谢！PJ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T12:04:32.473

回答我自己的问题......希望它会帮助别人。

它确实适用于 Handlebars 中包含的“编译”方法。您只需要在 assets.yml 文件的顶部添加：template_function: Handlebars.compile。不需要额外的脚本（Handlebars 1.0 rc.1）。

# java - 在 Java 程序的主线程中调用 System.exit(0) 和 Thread.currentThread().interrupt() 有什么区别？

> ID：12572456
> 
> 赞同：24
> 
> 时间：2012-09-24T20:31:42.923
> 
> 标签：java, multithreading, interrupt

两者都会导致程序停止执行。不过，很明显，这种情况的发生方式肯定存在一些差异。这些是什么？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-24T20:35:36.683

### 概括

1.  `thread.interrupt()`不停止线程。它用于多线程程序中的协调。除非您确切知道自己在做什么，否则不要使用它。
2.  抛出`RuntimeException`将（通常）终止线程但不一定终止程序。
3.  `System.exit(int)` *几乎*总是终止程序并返回状态码。
4.  在不寻常的情况下，`System.exit(int)`可能不会真正停止程序。`Runtime.getRuntime().halt(int)`另一方面，总是如此。

### 线程中断

恐怕你的第一句话是错误的。`Thread.currentThread().interrupt()`不会停止线程或程序。

中断线程是表示它*应该*停止的一种方式，但这是一种合作努力：线程中的代码应该不时检查中断状态并且（在大多数情况下 - 但即使这只是可选的）应该如果被中断则停止。如果它不这样做，什么都不会发生。

具体来说，中断一个线程（任何线程，包括当前正在执行的线程）只会设置*中断*标志。标准库中的某些方法会抛出 InterruptedException，但这也只是表示线程已被中断的一种方式。在这种情况下应该做什么取决于该线程中运行的代码。

以下是Brian Goetz的*Java Concurrency in Practice一书中的相关部分：*

> Thread提供了中断线程的方法，用于查询线程是否被中断。每个线程都有一个布尔属性，表示其中断状态；中断线程设置此状态。
> 
> 中断是一种合作机制。一个线程不能强迫另一个线程停止它正在做的事情并做其他事情；当线程 A 中断线程 B 时，A 只是请求 B 在它到达一个方便的停止点时停止它正在做的事情，如果它感觉喜欢的话。虽然 API 或语言规范中没有任何内容需要任何特定的应用程序级语义中断，中断最明智的用途是取消活动。响应中断的阻塞方法可以更容易地及时取消长时间运行的活动。

### 异常和 System.exit(int)

[Javadoc`System.exit(int)`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#exit%28int%29)说：

> **终止当前运行的 Java 虚拟机。**该参数用作状态码；按照惯例，非零状态码表示异常终止。

所以调用`exit()`（几乎）肯定会停止你的程序。与抛出 a `RuntimeException`（或 an `Error`）相比，这不能在调用堆栈的某个地方被捕获，它也不取决于是否有其他线程在运行。另一方面，未捕获的异常会终止引发它的线程，但如果有任何其他（非守护程序）线程，程序将继续运行。

抛出异常的另一个区别是它`exit()`不会向控制台打印任何内容（就像未捕获的异常一样），而是使程序返回特定的状态代码。状态码有时用于 shell 或批处理脚本，但除此之外，它们不是很有用。

### 运行时.halt(int)

最后（为了完整起见），我想指出退出 Java 程序的第三种可能性。当`System.exit(int)`被调用（或程序以某种其他方式结束）时，运行时会在 Java 虚拟机停止之前进行一些清理工作。这在[Runtime.exit(int)](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#exit%28int%29)的 Javadoc 中进行了描述（由以下方式调用`System.exit(int)`：

> 虚拟机的关闭顺序包括两个阶段。在第一阶段，所有已注册的关闭挂钩（如果有）都以某种未指定的顺序启动，并允许同时运行直到它们完成。在第二阶段，如果 finalization-on-exit 已启用，则所有未调用的终结器都会运行。完成此操作后，虚拟机将停止。

如果任何关闭挂钩或终结器无法完成，例如由于[死锁](http://en.wikipedia.org/wiki/Deadlock)，程序可能永远不会真正退出。保证 JVM 停止的唯一方法是[Runtime.halt(int)](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#halt%28int%29)：

> 使用此方法时应格外小心。与 exit 方法不同，如果 finalization-on-exit 已启用，此方法不会导致关闭挂钩启动并且不会运行未调用的终结器。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-24T20:32:54.410

如果有其他（非守护程序）线程在运行，则如果您停止主线程，JVM 将不会退出。System.exit() 杀死所有其他线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T20:35:10.293

在多线程应用程序中，有多个线程在执行。`Thread.currentThread().interrupt()`只会中断你当前正在执行的线程，但剩余的线程会运行，即使你的主线程被中断了..

然而，`System.exit(0)`结果你的系统被结束了..所有线程都被杀死了..

# tags - word文件是如何格式化的？

> ID：12572457
> 
> 赞同：0
> 
> 时间：2012-09-24T20:31:44.163
> 
> 标签：tags, formatting, ms-word

word 文件的格式是否像 HTML - 也就是说，在显示的表格、表单等后面是否有基于标记的表单？如果没有，它是如何完成的，例如，我怎样才能创建一个代码来在剪贴板上插入一个文字格式的表格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:39:01.227

任何 .docx word 文档都可以转换为 XML。只需对文档执行另存为并选择 XML word 文档。它将保存为一个文件，您可以在记事本中打开并查看 XML 标记，然后您只需要花时间对其进行哈希处理以获得正确的 XML 格式（尝试使用 XML 阅读器）。

# php - Python urllib2 未获得完整响应 (PDF)

> ID：12572458
> 
> 赞同：0
> 
> 时间：2012-09-24T20:31:52.540
> 
> 标签：php, python, pdf, urllib2, x-sendfile

我正在尝试通过点击 URL 来下载 PDF。假设我的 URL 如下所示：http: [//foo.bar/this/downloads/pdf](http://foo.bar/this/downloads/pdf)

如果我直接点击 URL，浏览器会下载 PDF，没有问题。但是，如果我尝试使用`urllib2.urlopen`我获取 PDF，我会得到一个不完整的文件。

```
url = "http://foo.bar/this/downloads/pdf"
sock = urllib2.urlopen(url)
content = sock.read()
with open('/tmp/test.pdf', 'w') as f:
    f.write(content) 
```

/tmp/test.pdf 的最后 3 行看起来像这样（在变量中看起来像这样`content`）：

```
0000778731 00000 n 
0000778751 00000 n 
000 
```

但我从浏览器下载的实际文件如下所示：

```
0000778731 00000 n 
0000778751 00000 n 
0000778772 00000 n 
...
%%EOF 
```

每一个 PDF，无论大小，似乎都在这个最终的数字组合中的某个地方被切断了。

我尝试了以下解决方案，但都不起作用。`urllib2`我认为原因与读取数据的方式无关，而是根本没有得到完整的响应这一事实。

[python，没有得到完整的响应](https://stackoverflow.com/questions/10102696/python-not-getting-full-response)

[urllib2 未检索整个 HTTP 响应](https://stackoverflow.com/questions/1824069/urllib2-not-retrieving-entire-http-response)

可能是一个因素的另一件事（尽管我不确定）是 PDF 发送到浏览器的方式。据我所知，PDF 是使用 PHP x-sendfile 发送的。我只是对为什么部分下载 PDF 感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:32:59.917

您必须打开文件以二进制模式写入（注意`wb`）：

```
with open('/tmp/test.pdf', 'wb') as f:
    f.write(content) 
```

编辑：哦，您还必须继续阅读，直到`.read()`什么也没返回：

```
url = "http://foo.bar/this/downloads/pdf"
sock = urllib2.urlopen(url)
with open('/tmp/test.pdf', 'wb') as f:
    while True:
        content = sock.read()
        if not content: break
        f.write(content) 
```

从[`urllib`文档](http://docs.python.org/library/urllib.html)中：

> 一个警告：read() 方法，如果 size 参数被省略或为负，可能直到数据流结束才读取；在一般情况下，没有很好的方法来确定来自套接字的整个流是否已被读取。

这个警告没有出现在 的文档中`urllib2`，但同样的概念也适用。

# ios - 使用 NSRange 使用手机键盘中的字符搜索 tableview

> ID：12572459
> 
> 赞同：0
> 
> 时间：2012-09-24T20:31:57.920
> 
> 标签：ios, uitableview, search, nsrange

我正在尝试使用电话板（从数字到字符的旧式哑电话短信样式映射）过滤联系人（姓名和电话号码）的表格视图，其中搜索“3862”可能会产生 3862，哑， duna，fvoc ......等等。我已经使用 NSRange 很好地实现了数字搜索，但是我将如何进行字符搜索？

为了澄清，映射是：

```
2 -> (abc),
3 -> (def), 
4 -> (ghi),
...
9 -> (wxyz). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:40:19.483

您可能希望将相关字符串编码为数值。从那里，您可以将电话号码和单词一视同仁。如果您打算自己滚动，您可能需要查看 Trie 数据结构 ( [http://en.wikipedia.org/wiki/Trie](http://en.wikipedia.org/wiki/Trie) )。或者，您可以使用 SQLite 或 Core Data 之类的东西来存储编码值并使用“like”语句进行检索。

# .net - 如何使用局部变量用两个 UserControl 之一填充 MainWindow

> ID：12572466
> 
> 赞同：1
> 
> 时间：2012-09-24T20:32:09.310
> 
> 标签：.net, wpf, mvvm

我对 WPF 或 C# 并不陌生，但我对 MVVM 和 ViewModel 情况并不陌生。

我一直在通过 MVVM 和绑定基础知识来完成我需要完成的工作，但我仍然被 xaml 细节所困扰。

我的最终目标是创建一个空白 MainWindow.xaml 视图，其中填充了两个 UserControl.xaml 视图之一。

我有 2 个简单的 UserControl 视图：MainView.xaml 和 OptionalView.xaml。

```
<UserControl x:Class="TestViewSwap.MainView"
         ...>
<Grid>
    <TextBlock Text="Main View" />
</Grid> 
```

```
<UserControl x:Class="TestViewSwap.OptionalView"
         ...>
<Grid>
    <TextBlock Text="Optional View" />
</Grid> 
```

还有一个 MainWindow.xaml

```
<Window x:Class="TestViewSwap.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">

    <ContentControl Content="{Binding CurrentView}" />
</Window> 
```

我知道 CurrentView 需要在代码后面设置为 OptionalView 或 MainView 取决于我选择的任何内容，但我不知道的是...... CurrentView 需要是什么类型或它需要在文件后面的代码?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:44:37.093

CurrentView 应该是您的 MainWindowViewModel 的一个属性，或者是您在 Window.xaml 上的 Datacontext 的任何类。为每个视图定义一个数据模板。数据模板可以包含视图或指向用户控件。将 CurrentView 分配给视图模型以切换视图。这是一些代码：

**主窗口视图模型**

```
public class MainWindowViewModel : ViewModel
{
  object currentView;

  public MainWindowViewModel()
  {
    CurrentView = new OptionalView();
    SwitchViewCommand = new RelayCommand(SwitchView);
  }

  public object CurrentView
  {
    get { return this.currentView; }
    set 
    { 
      this.currentView = value;
      NotifyPropertyChanged("CurrentView");
    }
  }

  public RelayCommand SwitchViewCommand { get; set; }

  void SwitchView()
  {
    if (CurrentView is OptionalView)
      CurrentView = new SettingsView();
    else
      CurrentView = new OptionalView();
  }
}

public class OptionalView { }

public partial class SettingsView { } 
```

**主窗口**

```
<Window x:Class="WpfLab.Views.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:views="clr-namespace:WpfLab.Views"
    xmlns:vm="clr-namespace:WpfLab.ViewModels"
    Title="MainWindow"
    Width="525"
    Height="350">
<Window.Resources>
    <DataTemplate DataType="{x:Type vm:OptionalView}">
        <Border Background="Red" />
    </DataTemplate>

    <DataTemplate DataType="{x:Type vm:SettingsView}">
        <views:SettingsView />
    </DataTemplate>
</Window.Resources>
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>
    <ContentControl Content="{Binding CurrentView}" />
    <Button Grid.Row="1"
            Command="{Binding SwitchViewCommand}"
            Content="SwitchView" />
</Grid> 
```

**设置视图**

```
<UserControl x:Class="WpfLab.Views.SettingsView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
         d:DesignHeight="300"
         d:DesignWidth="300"
         mc:Ignorable="d">
<Border Background="Green" /> 
```

# f# - F# 过于激进的类型推断？

> ID：12572471
> 
> 赞同：4
> 
> 时间：2012-09-24T20:32:37.810
> 
> 标签：f#, pattern-matching, type-inference

所以在做一些[Project Euler](https://projecteuler.net)问题时，我希望能够取整数值（int、long、bigint 等）的平方根，但 Sqrt 只为浮点值定义。所以我一直在编写自己的小牛顿-拉夫森算法，它对我的​​需要非常准确。但是，我希望能够在浮点值上调用内置的 sqrt 函数。所以我写了这样的东西：

```
let inline dsqrt x =
    match box x with
    | :? float -> sqrt x
    | :? float32 -> sqrt x
    | _ -> p_dsqrt x 
```

显然，我的函数被命名为“p_dsqrt”。然而，这个函数要求输入定义了一个 Sqrt 方法，这有点违背了整个目的。我错过了一些类型约束，还是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T21:11:35.800

如果要使用匹配，则不需要 inline 关键字，但如果要使用内联函数和“帽子类型”，请使用重载而不是匹配：

```
type Sqrt = Sqrt with
    // Dummy overload in order to get the right types inferred (will never reach here)
    static member inline ($) (Sqrt, _:^t when ^t:null and ^t: struct) = id

    // Existing sqrt
    static member inline ($) (Sqrt, x:'a) :'a = sqrt x 

    // Your Newton-Raphson based sqrt's
    static member        ($) (Sqrt, x:int   ) = sqrtForInt    x
    static member        ($) (Sqrt, x:bigint) = sqrtForBigInt x 

let inline sqrt (x:'t) :'t = Sqrt $ x 
```

返回类型将始终与输入类型相同，并且选择的 sqrt 的实现将取决于该类型。此选择将在编译时发生，这是与在运行时解析的 match 方法的主要区别。

如果我取出虚拟重载，它将与您的代码有相同的问题：它将需要 sqrt 约束。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T20:54:36.750

我想你可能想要这个，而不是：

```
let dsqrt x =
    match box x with
    | :? float as f -> sqrt f |> box :?> 'a
    | :? float32 as f -> sqrt f |> box :?> 'a
    | _ -> p_dsqrt x 
```

您的代码的问题是您直接调用`sqrt x`，这限制了`x`. 在我修改后的代码中，我将一个新标识符绑定到成功强制转换为`float`or的结果`float32`，因此这不会对`x`.

# javascript - 在 Javascript/jQuery 中克隆事件对象

> ID：12572474
> 
> 赞同：3
> 
> 时间：2012-09-24T20:32:42.363
> 
> 标签：javascript, jquery, jquery-events

如何创建一个完全独立的新事件对象，其中包含与给定事件对象完全相同的所有属性`e`。到目前为止，我已经尝试了以下但没有运气：

```
function myHandler(e) {
   // ...

   e = e.originalEvent;

   // method 1
   var e2 = jQuery.extend(true, {}, e);

   // method 2
   var e2 = JSON.parse(JSON.stringify(e));

   // ...
} 
```

编辑：我将添加更多细节以帮助澄清。与我正在尝试做的这个[问题](https://stackoverflow.com/questions/12176724/)非常相似： `div.dispatchEvent(e.originalEvent)`，但这样做会导致：

> DISPATCH_REQUEST_ERR：DISPATCH_REQUEST_ERR：DOM 事件异常 1

所以为了避免这种情况，我需要复制事件对象。但是，此事件对象不是特定的（即，有时`e`是 a `touchstart`、`touchmove`或`touchend`），因此如果我可以获得通用的克隆功能而不是硬编码特定属性会更容易。我所说的“不走运”的意思是，通过尝试上述方法并通过调度函数发送它，我得到了错误。希望这有助于澄清一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T20:39:58.577

我对这段代码“好运”：

```
$.extend($.Event(event.type /* click, mousedown, touchstart, ect. ect. */), {
    which: 1,
    clientX: event.clientX,
    clientY: event.clientY,
    pageX: event.pageX,
    pageY: event.pageY,
    screenX: event.screenX,
    screenY: event.screenY
}); 
```

显然，这就是一切；但是您可以在另一个对象中添加您实际需要的内容。我在这里创建一个新事件，因为我实际上是在将一个事件转发给另一个元素。

* * *

**更新**：

我使用[jQuery Touch Punch 插件](http://touchpunch.furf.com/)，它基本上将点击/鼠标事件映射到相关的触摸事件：touchstart、touchesmoved、touchend。因此，如果您将此事件作为鼠标事件转发：

```
var newEvent = $.extend($.Event(event.type), {
    which: 1,
    clientX: event.clientX,
    clientY: event.clientY,
    pageX: event.pageX,
    pageY: event.pageY,
    screenX: event.screenX,
    screenY: event.screenY
});

// touch punch will convert to a touch event if needed
$('.some-other-element').trigger(newEvent); 
```

您只需要在页面上包含触摸打孔脚本。这也将允许 jQuery UI 元素在触摸设备上运行。

参考：

*   [jQuery 事件构造函数](http://api.jquery.com/category/events/event-object/)
*   [jQuery 触发器](http://api.jquery.com/trigger/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-31T23:58:52.807

此处的答案标记为“[只需传入本机事件参数](https://stackoverflow.com/a/29154837)”

```
function (e) {
    var $event = $.Event(e.type, e);
} 
```

如果您想更改事件类型将不起作用：jQuery 会将您指定的事件类型参数替换为您传递的事件对象中的事件类型。所以这种方法只能作为一种精确克隆事件对象的方法。这样做时，我建议使用*null*代替事件类型参数，作为严格克隆事件的语义提示：

```
function (e) {
    var event = $.Event(null, e); // clone event
} 
```

当然，您总是可以在克隆后更改事件的类型值：

```
function (kind, e) {
    var event = $.Event(null, e); // clone event
    event.eventType = kind;

    return event;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-19T20:55:48.823

## 只需传入本机事件参数

```
function (e) {
    var $event = $.Event(e.type, e);
} 
```

因为您可以手动设置的所有属性都已存在于原生事件参数中，并且因为`$.Event()`构造函数将对象作为其第二个参数，所以您可以简单地将原生事件参数传递给它。

注意：您必须单独传入事件类型作为第一个参数，否则 jQuery 只会将您的事件对象存储在`$event.originalEvent`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T20:51:51.500

```
var eDemo = jQuery.Event("eventhandler", {
    target: e.currentTarget,
    relatedTarget: e.relatedTarget,
    pageX: e.pageX,
    pageY: e.pageY,
    which: e.which,    
});

var newObject = jQuery.extend(true, {}, eDemo);// deep copy 
```

签出 Jquery 事件构造 -> [http://api.jquery.com/category/events/event-object/](http://api.jquery.com/category/events/event-object/)

# php - php mongodb在集合中找到第n个条目

> ID：12572485
> 
> 赞同：2
> 
> 时间：2012-09-24T20:33:23.460
> 
> 标签：php, mongodb

我正在尝试检索我的收藏中的第 n 个条目。
这似乎可以使用`find()`，但我认为有一个更清洁的解决方案使用`findOne()`，也许`sort()`？
任何人都可以帮忙写一个更好的方法吗？

```
$mongo = new Mongo();
$db = $mongo->mydb;
$collection = $db->user;

$cursor = $collection->find();
$i=0;
foreach ($cursor as $obj){
    if ($i==3)
        echo $obj["_id"];//echo's the 3rd entry id
    $i++;
} 
```

这里提供的[解决方案](https://stackoverflow.com/questions/7223273/get-n-th-element-of-an-array-in-mongo)不适用于我的问题，这就是我问这个问题的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T07:34:42.003

Skip() 没有有效地使用索引，因此在集合中的任何字段上放置索引都是没有意义的。

由于您希望`skip()`第 n 个文档，如果 的值`skip()`较低（取决于您的系统，但在完整的集合扫描中通常低于 100K 行），那么它可能没问题。问题是通常情况下并非如此。Mongo，即使有索引，也需要扫描整个结果集，然后才能跳过它，这将导致无论查询中的什么内容都进行完整的集合扫描。

如果您要经常以随机方式执行此操作，最好使用递增 ID 结合另一个集合`findAndModify`来生成准确的文档编号（[http://www.mongodb.org/display/DOCS/How+to+Make +an+自动+递增+字段](http://www.mongodb.org/display/DOCS/How+to+Make+an+Auto+Incrementing+Field)）。

然而，这会引发问题，您必须保留此 ID，尤其是在发生删除时。解决此问题的一种方法是将文档标记为已删除，而不是实际删除它们。当您查询您省略删除的确切文档时，`limit()`通过一个允许您获取下一个最接近该位置的文档，如下所示：

```
$cur = $db->collection->find(array('ai_id' => array('$gt' => 403454), 'deleted' => 0))->limit(1);
$cursor->next();
$doc = $cursor->current(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T20:52:31.360

从上面的代码中使用 (n-1) 的跳过：

```
$cursor = $collection->find();
$cursor->skip(3);
$cursor->next();
$doc = $cursor->current(); 
```

但我认为最好的方法可能是在文档中保留一个可以用作索引的计数器。

# file - 将文件放入应用程序包（库文件夹）

> ID：12572493
> 
> 赞同：0
> 
> 时间：2012-09-24T20:34:01.100
> 
> 标签：file, bundle, sandbox

我创建了一个应用程序并在模拟器上对其进行了测试。它通常会访问一些数据的 .plist 文件，这些数据存储在我的 mac 上的适当位置。

我想在 iPhone 上测试我的应用程序时访问此文件（我的支持文件夹中有该文件），但我无法找到执行此操作的方法。如何在此目录中获取我的文件，以便我的应用程序可以访问它。

/var/mobile/Applications/......./Library/freq.plist

看到我在谷歌上没有找到任何东西，答案一定非常明显！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T01:02:32.543

从这个问题中不太清楚您是否想要 a) 访问仅由应用程序访问的 .plist 文件，或者 b) 使用应用程序和您的 MAC 访问它而不使用应用程序。

如果您想要 a) 只需将其包含在应用程序的捆绑包中，并在代码中通过其名称引用它而不提供其路径。要将其包含在捆绑包中，将其“添加”到项目导航器中显示的文件中（Xcode 中的左侧面板，顶部的第一个选项卡被选中）。要添加它，首先在 Project Navigator 面板中突出显示（单击）其中一个文件夹图标以指示您希望 .plist 文件出现的位置，键入 command-option-A，在打开的窗口中找到 MAC 上的文件，请确保选中“将项目复制到目标组的文件夹（如果需要）”，然后单击“添加”。它现在出现在左侧面板中，您可以通过其非限定名称以编程方式访问它。如果您忘记选中“将项目复制到目标组的文件夹（如果需要）”，您将遇到难以理解的问题。要将其从包中删除，请右键单击 Project Navigator 面板中的图标，然后选择“删除”。您将可以选择是否也将文件丢弃。

如果您要问 b)，那会更复杂，更容易出现问题，甚至可能不是一件好事。

# php - $产品->保存（）；导致错误 - 更改产品数量时

> ID：12572496
> 
> 赞同：5
> 
> 时间：2012-09-24T20:34:03.707
> 
> 标签：php, magento

我正在创建一个自定义模块。

我正在测试更新产品数量的能力。

我创建了一个简单的 magento 模块并开始使用 indexController.php 中的代码进行测试，这是我的代码：

```
public function indexAction() {

    //Just grabbing sku# 62701 for testing...
    $tempProduct = Mage::getModel('catalog/product')->loadByAttribute('sku', 62701 );

    $stockData['qty'] = 300;
    $tempProduct->setStockData($stockData);

    $tempProduct->save(); 

} 
```

通过那里的最后一行，我得到了错误。

从错误日志中：

a:5:{i:0;s:46:"方法无效 Varien_Object::save(Array ( )

其次是堆栈跟踪...

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-04-29T08:39:46.027

我不得不研究这个问题并发现了问题。整个库存数据/项目界面有点棘手。

## 问题

`Mage_Catalog_Model_Abstract->loadByAttribute`在集合上使用集合加载，`catalog/product_collection`限制为 1。

该集合中产品的库存项目通过`Mage_CatalogInventory_Model_Observer->addStockStatusToCollection`监听事件的事件观察器加载`catalog_product_collection_load_after`。仅当设置`addStockStatusToCollection`了标志时才加载产品的库存项目。`require_stock_items``true`

如果`Mage_Catalog_Model_Abstract->loadByAttribute`没有设置这个标志，那么我们最终`$product->_data['stock_item']`会成为类型`Varien_Object`（参见`Mage_CatalogInventory_Model_Stock_Status`第 488-491 行）。

这会导致错误

> 无效的方法 Varien_Object::save...

上`$product->save`。

如果您仍然保存产品并希望在同一交易中进行库存更新，我推荐解决方案 1。解决方案 2 仅设置 stock 数据，因此它避免调用昂贵的`$product->save`.

## 解决方案 1

在产品上使用额外的负载：这会`$product->_data['stock_item']`正确加载。

```
Mage::getModel('catalog/product')->loadByAttribute('sku', 62701 );
$tempProduct->load($tempProduct->getId()); 
```

这是数据库上的附加读取事务，它会减慢速度。

## 解决方案 2

正如在其他答案中建议的那样，直接使用该类`Mage_CatalogInventory_Model_Stock_Item`。但是您已经通过调用正确地引用了产品，`setProduct`以便为新的和现有的库存项目提供工作代码。

```
$stockItem = Mage::getModel('cataloginventory/stock_item')->loadByProduct($product->getId());
$stockItem->setProduct($product)
    ->setData('stock_id', Mage_CatalogInventory_Model_Stock::DEFAULT_STOCK_ID)
    ->setData('qty', 1)
    ->setData('is_in_stock', 1)
    ->setData('manage_stock', 1)
    ->setData('use_config_manage_stock', 0)
    ->setData('use_config_backorders', 0)
    ->setData('backorders', 0)
    ->setData('use_config_max_sale_qty', 0)
    ->setData('max_sale_qty', 1)                
    ->save(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T21:22:16.913

我在这里找到了一种方法来保存似乎在我的场景中有效的数据（不知道为什么有效）： [https ://stackoverflow.com/a/7608195/1110880](https://stackoverflow.com/a/7608195/1110880)

使其工作的代码如下：

```
 $productId = $tempProduct->getId();
    $stockItem = Mage::getModel('cataloginventory/stock_item')->loadByProduct($productId);
    $stockItem->setData('qty', $qty);

    $stockItem->save(); 
```

我希望这可以帮助别人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T20:46:33.240

我可以看到两个潜在的问题。

1.  你确定`loadByAttribute('sku', 62701 )`只能*退货*一件吗？（当人们试图一次更新不止一件东西时，就会出现这个错误。[）](http://www.magentocommerce.com/boards/viewthread/202163/)
2.  `$stockData`没有定义。至少定义它会更安全。

看起来你缺少这样的东西：

```
$stockData = $tempProduct->getStockData(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-12T09:44:18.353

我可能做错了什么，但我遇到了同样的问题，这有帮助：

```
$stockItem = Mage::getModel('cataloginventory/stock_item')->loadByProduct($product->getId());
$stockItem->setProductId($product->getId());
$stockItem->setStockId(Mage_CatalogInventory_Model_Stock::DEFAULT_STOCK_ID); 
```

# ruby - 等待 Ruby 子 pid 退出

> ID：12572500
> 
> 赞同：8
> 
> 时间：2012-09-24T20:34:21.093
> 
> 标签：ruby, fork

我正在尝试分叉一个子进程，等待它完成，如果它在一定时间内没有完成，就杀死它。

这是我到目前为止所拥有的：

```
servers.each do |server|
    pid = fork do
        puts "Forking #{server}."
        output = "doing stuff here"
        puts output
    end

    Process.wait
    puts "#{server} child exited, pid = #{pid}"
end 
```

在 Process.wait 之后/周围的某个地方，我希望某种实用程序等待 20 秒，如果该进程仍然存在，我想杀死它并将输出标记为“错误”。

我是 fork/exec 的新手。我的代码实际上分叉有效，但我只是不知道如何处理它的等待/杀死方面。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-24T20:37:20.320

使用[`Timeout`模块](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/timeout/rdoc/Timeout.html)：（来自[http://www.whatastruggle.com/timeout-a-subprocess-in-ruby](http://www.whatastruggle.com/timeout-a-subprocess-in-ruby)的代码）

```
require 'timeout'

servers.each do |server|
    pid = fork do
        puts "Forking #{server}."
        output = "doing stuff here"
        puts output
    end

    begin
        Timeout.timeout(20) do
            Process.wait
        end
    rescue Timeout::Error
        Process.kill 9, pid
        # collect status so it doesn't stick around as zombie process
        Process.wait pid
    end
    puts "#{server} child exited, pid = #{pid}"
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:40:02.083

给[subexec](https://github.com/nulayer/subexec)一个机会。从自述文件：

> Subexec 是一个简单的库，它生成带有可选超时参数的外部命令。它依赖于 Ruby 1.9 的 Process.spawn 方法。此外，它适用于同步和异步代码。
> 
> 对于作为 CLI 的 Ruby 包装器的库很有用。例如，使用 ImageMagick 的 mogrify 命令调整图像大小有时会停止并且永远不会将控制权返回给原始进程。输入子执行程序。

# php - Symfony2、树枝和 JavaScript

> ID：12572506
> 
> 赞同：13
> 
> 时间：2012-09-24T20:34:46.157
> 
> 标签：php, symfony, twig

我需要做什么才能让 twig 处理 JavaScript 文件？我有一个使用 JavaScript 树枝的 html.twig。像这样的东西：

```
{% extends 'BaseBundle::layout.html.twig' %}

{% block javascripts %}
    {{ parent() }}
    {% javascripts
        '@BaseBundle/Resources/js/main.js.twig'
    %}
    {% endjavascripts %}
{% endblock %}

< more template omitted > 
```

以及 main.js.twig 的部分内容：

```
function testFunction()
{
    alert('{{VariableFromPHP}}');
} 
```

和控制器：

```
/**
 * @Route("/",name="home")
 * @Template("MyBundle:Default:index.html.twig")
 */
public function indexAction()
{
   return array( 'VariableFromPHP' => 'Hello World');
} 
```

我希望 JavaScript 在运行时看起来像这样：

```
alert('Hello World'); 
```

但是，代码不变。任何想法我做错了什么？

谢谢，斯科特

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-07-04T09:14:18.100

我建议使用全局变量：

```
{% javascripts '@AcmeBundle/Resources/public/js/*' output='js/compiled/main.js'%}
        <script>
            var TWIG = {};
            TWIG.variableOne   = "{{ path('rote_to_nowhere') }}";
            TWIG.variableTwo   = "{{ helloworldVar }}";
            TWIG.variableThree = "{{ "something"|trans }}";
        </script>
        <script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %} 
```

然后你可以在你的`js`文件中使用它：

```
alert(TWIG.variableTwo); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-25T17:28:05.613

Assetic 不包括树枝模板；您应该为 javascript 文件创建一个单独的控制器。尽管我认为这在性能方面是不好的做法，因为您将不得不以这种方式处理两个请求。

```
/**
 * @Route("/main.js")
 */
public function mainJsAction() {
    $params = array( 'test' => 'ok' );
    $rendered = $this->renderView( 'MyBundle:Default:main.js.twig', $params );
    $response = new \Symfony\Component\HttpFoundation\Response( $rendered );
    $response->headers->set( 'Content-Type', 'text/javascript' );
    return $response;
} 
```

```
{% extends 'BaseBundle::layout.html.twig' %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript" src="{{ path('my_default_mainjs') }}"></script>
{% endblock %} 
```

另一种方法是在 html 中转储动态变量，并且只使用静态 javascript 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T20:49:43.617

相反，我在 main.js 中所做的是：

```
function doGetStringFromSubClass()
{
    if (typeof getStringFromSubClass == 'function')
    {
        return getStringFromSubClass();
    }
    else
    {
        alert('getStringFromSubClass() needs to be defined.')
    }
}

function testFunction()
{
    alert(doGetStringFromSubClass());
} 
```

并且，在子类 twigs 中，我们有这个 main.js：

```
function getStringFromSubClass(){
    return "baseClassString";
    } 
```

还有这个树枝：

```
{% extends 'BaseBundle:Default:index.html.twig' %}

{% block javascripts %}
    {{ parent() }}

    {% javascripts
        '@SomeSubclassBundle/Resources/js/main.js'
    %}

    <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %} 
```

有点傻，但是，它有效。

斯科特

# java - 我可以在安卓应用程序中使用谷歌地图以外的地图服务器吗？

> ID：12572507
> 
> 赞同：0
> 
> 时间：2012-09-24T20:34:51.947
> 
> 标签：java, android, map, wms

假设我有一个自定义地图服务器，如 Web 地图服务 (WMS) 托管的某个地方。我可以在我的 android 应用程序中使用它作为地图吗？还是使用谷歌地图是唯一的选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:36:10.337

您可以使用任何您想要的地图。已经有几个应用程序使用了[Open Street Maps](http://wiki.openstreetmap.org/wiki/Android)。

# mysql - 如何加入表格

> ID：12572508
> 
> 赞同：-1
> 
> 时间：2012-09-24T20:34:54.050
> 
> 标签：mysql, database, join, left-join, relationship

我有以下 3 个表：

-- 用户 -- id firstname lastname

-- 产品 -- id 名称 价格

-- 购买 -- user_id product_id

我如何显示（选择）id = 1 的用户购买了哪些产品？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T20:39:33.333

您可以使用以下内容：

```
select u.firstname, u.lastname, p.name 
from users u
inner join purchases pc
   on u.id = pc.user_id
inner join products p
   on pc.product_id = p.id
where u.id = 1 
```

这使用您的链接表将所有 3 个表连接在一起`purchases`。

如果您不熟悉`JOIN`语法，那么这是一个有用的链接：

[SQL 连接的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T20:50:24.273

如果您只需要用户 1（而不是用户名）购买的产品，那么产品和购买之间的连接就足够了：

```
Select prod.name, prod.price 
from products prod 
inner join purchases pur on prod.id = pur.product_id 
where pur.user_id = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T20:38:33.740

这应该这样做：

```
select * from products
where id in (select product_id from purchases where user_id = 1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T20:39:06.260

```
select *  
from users 
join purchases 
  on users.id = purchases.user_id
join products 
  on products.id = purchases.product_id 
where users.id = 1 
```

如果你真的想要一份产品清单

```
select distinct(products.name)
from users 
join purchases 
  on users.id = purchases.user_id
join products 
  on products.id = purchases.product_id 
where users.id = 1
order by products.name 
```

# python - RegEx 基于模式或分隔符替换字符实例

> ID：12572518
> 
> 赞同：1
> 
> 时间：2012-09-24T20:35:40.443
> 
> 标签：python, regex, tuples, os.walk

我最近才在学习和利用正则表达式的力量，我有一个从 返回的文件的元组列表`os.walk()`，如下所示：

```
files = ('s8_00.tif', 's9_00.tif', 's10_000.tif', 's11_00.tif') 
```

我试图让它看起来像这样：

```
files = ('s8_##.tif', 's9_##.tif', 's10_###.tif', 's11_##.tif') 
```

我试过用这个。

```
pad2 = re.compile(r'_00?')

for root, dirs, files in seqDirs:
  pad = files[0]  
  p = pad2.sub("#", pad)
  print p 
```

这将返回：

```
p = ('s8#.tif', 's9#.tif', 's10#0.tif', 's11#.tif') 
```

所以我将表达式改为：

```
pad2 = re.compile('(_)0+') 
```

给我：

```
p = ('s8#.tif', 's9#.tif', 's10#.tif', 's11#.tif') 
```

我的`p = pad2.sub`功能有问题吗？还是我编译的表达式中存在问题？还是`"_"`表达中的存在搞砸了？

我什至尝试在函数内部传递一些表达式`pad2.sub`来测试它，当然这并没有真正起作用。我知道我在这里遗漏了一些东西，我有点卡住了。

任何和所有的帮助将不胜感激以及对逻辑的解释。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T21:00:23.610

我们将使用函数进行替换，而不是字符串。

```
def replacer(data):
    return re.sub(r'(?<=_)(0+)', lambda m: m.group(0).replace('0', '#'), data)

files = ('s8_000.tif', 's9_00.tif', 's10_000.tif', 's11_00.tif')
map(replacer, files)
print(files) 
```

`?<=`是一个*积极的后向断言*。[您可以在正则表达式语法](http://docs.python.org/library/re.html#regular-expression-syntax)的文档中找到解释。

`0+`捕获所有随后的零

lambda 函数将 every 替换`0`为`#`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T20:41:57.757

如果你想在可能有任何数字的地方做，让你的正则表达式成为

`pattern = re.compile("_(\d+)")`

并通过

`pattern.sub("_"+len("\g<1>")*"#", filename)`

在任何正则表达式中，您都可以访问使用“\g<1>”作为第一个值的括号捕获的内容，“\g<2>”作为下一组括号等等。"\d+" 将获得表达式中的任何数字字符。如果您特别想查找零，可以将其替换为“_(0+)”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T20:54:57.970

您最好找到匹配项，计算它们的长度，然后用该数量的`#`s 替换它们。

# forms - 空面板，后来被控件填充，无法检测到 keydown 并且也滚动

> ID：12572519
> 
> 赞同：0
> 
> 时间：2012-09-24T20:35:47.480
> 
> 标签：forms, focus, panel

我有一个空面板，我将控件动态加载到其中，但遇到了问题。

事情是; 我希望能够使用鼠标滚轮滚动，我通过使用 panel.Focus(); 解决了这个问题；用控件加载它之后。

但是，现在，我还希望能够检测到 keydown，以便能够使用 F5 键刷新整个内容，不幸的是，由于面板已聚焦，我的表单无法检测到我的 Keydown 事件，并且该面板似乎没有自己的 keydown 事件。

有什么建议么？

# c - 为什么 TI-Basic 这么慢？

> ID：12572520
> 
> 赞同：6
> 
> 时间：2012-09-24T20:35:59.260
> 
> 标签：c, pseudocode, performance, greatest-common-divisor, ti-basic

我决定实现一个程序，可以在 TI-Basic 中找到任意两个数字（包括非整数）的 GCD。我已经在 J​​ava 中很好地使用了它，所以我知道它可以工作。它在 TI-Basic 中运行良好，但与内置`gcd(`功能相比，它非常缓慢；该`gcd(`函数似乎在毫秒内得到结果，而我的可能需要几秒钟。**为什么 TI-Basic 比预定义的计算器功能慢这么多？**

## 编码

* * *

以下是 TI-Basic 中的程序代码，供您查看：

```
PROGRAM:GCD

:ClrHome
:Disp "Greatest Common","    Divisor","      ---"
:Input "First number? ",X
:Input "Second number? ",Y
:
:X→I
:Y→J
:
:If (I≠int(I) or J≠int(J))
:Then
:ClrHome
:Disp "Non-integer","inputs may be","innacurate!",""
:End
:If (I=1 or J=1)
:Then
:1→I
:1→J
:Goto Z
:End
:For(C,0,2^8)
:If I=J
:Goto Z
:
:If I>J
:I-J→I
:
:If J>I
:J-I→J
:
:End
:
:Disp "This is a hard","one! Thinking","harder..."
:
:For(C,0,2^15)
:If (I=J)
:Goto Z
:While (I>J)
:I-J→I
:C+1→C
:End
:While (J>I)
:J-I→J
:C+1→C
:End
:End
:
:Disp "TIMED OUT!","Either:",J,"or"
:Pause
:
:Lbl Z
:ClrHome
:Disp "GCD of",X,"and",Y,"is",I 
```

**免责声明：**这是我查看我的 TI-84 并在此处输入的结果。可能有一些错别字，尽管我尽力保持不变

对于那些可能不知道这意味着什么的人，下面提供了伪代码：

```
program gcd()
{
Console.clear();
Console.writeln("Greatest Common");
Console.writeln("    Divisor");
Console.writeln("      ---");

float X = Console.readFloat("First Number? ");
float Y = Console.readFloat("Second number? ");

float I = X;
float J = Y;

if (I != (int)I || J != (int)J)
{
  Console.clear();
  Console.writeln("Non-integer");
  Console.writeln("inputs may be");
  Console.writeln("inaccurate!");
  Console.writeln("");
}
if (I == 1 or J == 1)
{
  I = 1;
  J = 1;
  goto Z;
}

for(int C = 0, limit = Math.pow(2,8); C < limit; C++)
{
  if (I == J)
    goto Z;

  if (I > J)
    I = I - J;

  if (J > I)
    J = J - I;
}

Console.writeln("This is a hard");
Console.writeln("one! Thinking");
Console.writeln("harder...");

for(int C = 0, limit = Math.pow(2,15); C < limit; C++)
{
  if (I == J)
    goto z;
  while (I > J)
  {
    I = I - J;
    C++;
  }
  while (J>I)
  {
    J = J-I;
    C++;
  }
}

Console.writeln("TIMED OUT!");
Console.writeln("Either:");
Console.writeln(J);
Console.writeln("or");
Console.pause();

Z:
Console.clear();
Console.writeln("GCD of");
Console.writeln(X);
Console.writeln("and");
Console.writeln(Y);
Console.writeln("is");
Console.writeln(I);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T20:38:04.190

它很慢，因为它是一种解释语言——解释语言的[缺点。](http://en.wikipedia.org/wiki/Interpreted_language#Disadvantages_of_interpreted_languages)

基本上，这会影响抓取用户输入以及在屏幕上显示图形。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-03T15:35:28.810

您可以修复很多代码，例如不使用 Goto、将括号放在行尾、不使用 ClrHome 等。更多信息： [https ://en.wikibooks.org/wiki/TI-Basic_Z80_Programming/Tips,_Tricks_and_Optimizations](https://en.wikibooks.org/wiki/TI-Basic_Z80_Programming/Tips,_Tricks_and_Optimizations)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-14T01:44:29.540

速度慢的另一个原因是`clrHome`，我在使用它们时意识到，`clr-home`需要一点时间才能完成，可能是半秒，至少在 Ti-83 plus 上，通常不需要太多，也不`disp`是`input`两个输入，你也可以使用`prompt fist number','second number'`

# css - 第一次使用表格/html 电子邮件 - 文本填充问题

> ID：12572524
> 
> 赞同：0
> 
> 时间：2012-09-24T20:36:26.560
> 
> 标签：css, html-table, html-email, padding

这是我第一次尝试 HTML 电子邮件，也使用表格。我通过 Mailchimp 找到了一个不错的模板集合，我已经对其进行了编辑，使其相对接近我的需要。我确实有一个问题：文本的开头被推到了右边。我该如何解决？

```
<tr>
<td valign="top">
<div mc:edit="std_content00">
<img src="http://lorempixel.com/405/325" style="max-width:405px;" />
<img src="http://lorempixel.com/218/30" width="218" height="30" style="padding:30px 0px 30px 0px;" />
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris vehicula aliquet nisl vulputate tincidunt. Nulla.  </div>                                                       </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:39:26.227

尝试添加一个段落：

```
<tr>
<td valign="top">
<div mc:edit="std_content00">
<img src="http://lorempixel.com/405/325" style="max-width:405px;" />
<img src="http://lorempixel.com/218/30" width="218" height="30" style="padding:30px 0px 30px 0px;" />
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris vehicula aliquet nisl 
vulputate tincidunt. Nulla.</p>  </div>                                                       </td> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T20:41:30.837

试试这样的[http://jsfiddle.net/fVKbr/](http://jsfiddle.net/fVKbr/)

样式=“填充：30像素0像素0像素0像素；”

演示：http: [//jsfiddle.net/fVKbr/](http://jsfiddle.net/fVKbr/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T20:39:46.153

```
style="padding:30px 0px 30px 0px;" /> 
```

至

```
style="padding:30px 0px 0px 0px;" /> 
```

或任何适合你的东西。

填充值分别用于上、右、下、左。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T20:39:46.903

您的图像中有填充，这隐藏了它与文本位于同一表格行中的事实。

使用以下方法使文本对齐：

```
<tr>
<td valign="top">
<div mc:edit="std_content00">
<img src="http://lorempixel.com/405/325" style="max-width:405px;" />
<img src="http://lorempixel.com/218/30" width="218" height="30" style="padding:30px 0px 0px 0px;" /><br />
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris vehicula aliquet nisl vulputate tincidunt. Nulla.  </div>                                                       </td>
</tr> 
```

# regex - 带有替换和选项的正则表达式

> ID：12572525
> 
> 赞同：0
> 
> 时间：2012-09-24T20:36:27.780
> 
> 标签：regex

我正在尝试编写一个正则表达式来修改电话号码。如果它是国际号码（非美国），我希望`+`保留该符号（`%2B`在 URL 编码之后）。如果是国内号码，`%2B`应该去掉，改成`1`前面加a的11位格式。

4 个用例是：

*   `%2B2125551000` 变为`0112125551000`（这应该被视为一个国际号码，因为它以`+[2-9]`- 替换`+`为开头`011`）
*   `%2B12125551000`变成`12125551000`（既然是`+1`，那就是国内号码，去掉`+`）
*   `2125551000`变成`12125551000`（国内号码因为没有`+`）
*   `12125551000`变成`12125551000`（国内号码因为没有`+`）

我一直在尝试在 Linux 上使用*sed对此进行测试：*

进行匹配的表达式是：

```
((%2B)|)?((1)|)?([0-9]{10}) 
```

但是，我不一定总是需要所有 5 个参数。如果字符串是 ，我只需要`%2B`保留`%2B[2-9]`。

```
$ for line in %2B2125551000 %2B12125551000 12125551000 2125551000;do echo $line | sed -r 's/^((%2B|))?((1)|)?([0-9]{10})/one:\1   two:\2   three:\3   four:\4   five:\5/';done
one:%2B   two:%2B   three:   four:   five:2125551000
one:%2B   two:%2B   three:1   four:1   five:2125551000
one:   two:   three:1   four:1   five:2125551000
one:   two:   three:   four:   five:2125551000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:07:14.587

好的，让我们看看，你想要什么：

```
s/^%2B(?=[2-9])/011/ || # this will do first rule and change %2B to 011  
s/^%2B(?=1)// ||        # this will do second rule and strip off %2B  
s/^(?:[2-9])/1$&/ ;     # this will do third rule and add 1 to the beginning of the number  

# Perl code 
my @all = <DATA>;

for (@all){
    s/^%2B(?=[2-9])/011/ or 
    s/^%2B(?=1)// or
    s/^(?:[2-9])/1$&/ ; 
    print "line is $_ \n";  
}

__DATA__
%2B2125551000
%2B1125551000
225551000
125551000 
```

# apache - 使用重写强制浏览器刷新而不进一步更改 URL？

> ID：12572529
> 
> 赞同：0
> 
> 时间：2012-09-24T20:36:53.943
> 
> 标签：apache, .htaccess, rewrite

我刚刚重做了我的网站，并正在尝试进行一些重写以将 URL 更改为新结构。我大部分时间都在那里，多亏了一些友好的支持人员，但我知道他们不应该处理这些问题，所以我希望我能在这里找到最后一块拼图。

我想做四件事。

1.  将空格转换为下划线。
2.  通过将“(2003)”等内容更改为“- 2003”来去掉括号。
3.  更改 html 调用的结构。
4.  强制重定向，以便搜索引擎获得新地址。

现在，这就是我所拥有的：

```
RewriteEngine On
Rewritecond %{HTTP_HOST} ^(desktopscenes.com|www.desktopscenes.com)$ [nc]
RewriteRule ^(.*)\s(.*)$ $1_$2 [N]
RewriteRule ^(.*)\((.*)$ $1-_$2
RewriteRule ^(.*)\)(.*)$ $1$2
RewriteRule ^(.*)slides/(.*)\.html$ /$1index.htm#$2.jpg [NE,R=301] 
```

一切正常，除了指向 jpg 文件的链接，它们在内部正确重定向，但我找不到在地址栏上显示正确新地址的方法。

例如，这个旧网址：

```
http://www.desktopscenes.com/Scenes from Big Sky Country (2003)/slides/First Montana Sunset.jpg 
```

在以下位置正确显示图像：

```
http://www.desktopscenes.com/Scenes_from_Big_Sky_Country_-_2003/slides/First_Montana_Sunset.jpg 
```

但是浏览器栏没有显示新地址，我相信这也意味着搜索引擎没有收到新地址的通知。

我尝试使用“R = 301”“重定向到同一地址”，但失败了，可能是因为循环。我不确定还有什么可以尝试的，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T02:06:58.180

前 3 条规则的迭代过程似乎存在一些问题，请尝试向`[L]`它们添加标志。

第二个问题是您在最后一条规则中的正则表达式（带有“幻灯片”）与**html**匹配，但您给它的是**jpg**。

第三个问题是你`RewriteCond`只适用于第一条规则。`RewriteCond`s 仅适用于紧随其后的`RewriteRule`. 它们不会在全球范围内应用。

因此，请尝试将您的规则更改为如下所示：

```
RewriteEngine On

# if the host isn't "desktopscenes.com", pass through and do nothing
Rewritecond %{HTTP_HOST} ^(desktopscenes.com|www.desktopscenes.com)$ [nc]
RewriteRule ^ - [L]

RewriteRule ^(.*)\s(.*)$ /$1_$2 [L]
RewriteRule ^(.*)\((.*)$ /$1-_$2 [L]
RewriteRule ^(.*)\)(.*)$ /$1$2 [L]

RewriteRule ^(.*)slides/(.*)\.(jpe?g|gif|png|bmp) /$1index.htm\#$2.$3 [NE,R=301,L] 
```

# git - 我可以只合并 Git 中不冲突的更改吗？

> ID：12572530
> 
> 赞同：5
> 
> 时间：2012-09-24T20:36:59.743
> 
> 标签：git, git-merge, merge-conflict-resolution

我怎样才能简单地（例如在一个命令中？）在 Git 中合并，保持当前分支中冲突文件的状态，而不像他们/我们的选项中那样单独指定每个文件？

```
git checkout master
git merge stable --some-option-to-keep-files-? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T20:46:57.070

合并策略有一个“我们的”选项，这是您想要的

```
git merge -s recursive -X ours remote/branch 
```

正如手册页所强调的那样，这不是 git merge -s ours。

# php - 自定义产品选项 - 修改基于百分比的定价逻辑：Magento

> ID：12572531
> 
> 赞同：2
> 
> 时间：2012-09-24T20:37:08.110
> 
> 标签：php, javascript, magento, options

我对包含“**百分比**”价格类型的**自定义选项有一个真正的问题。**

 **在 Simple 产品上，基于百分比的自定义选项按预期工作，但在 Configurable 或 Bundled 上，最终价格由基本价格确定，而不是基本价格 + 附加选项（这是 biz 要求规定的）：

```
Config/Bundle Product

base price = $1000
option 1 + $100 
option 2 + 5%
_____________________________
= $1150 (instead of $1155); 
```

我还没有找到很多东西来处理这个原本很大的问题。

我确实找到并实施[了这个 Answer](https://stackoverflow.com/a/6000803/653929)，但`$finalPrice`返回的`Mage_Catalog_Model_Product_Type_Price -> _applyOptionsPrice`没有正确评估自定义选项的 baseprice + upcharge。此外，在前端， `Products.Options`解决方案中也没有将基准价格纳入计算中。我假设修复是针对以前版本的 magento（我在 v1.11 上）。

我怀疑修复的策略是正确的，但它是一个非常复杂的交换，我并不完全清楚需要改变什么来处理这个问题。

任何想法都会受到欢迎。

干杯

* * *

**更新**

我在前端取得了一些成功（让 javascript 更新选项值和正确定价）。但是这些更改并没有写入价格模型。例如，当购物车渲染时，最终价格不是包含满载价格，而是包含父产品的百分比：

这是我在后端的内容（这不会改变任何行为。我会注意到我刚刚将它们复制到应用程序/本地目录 atm 中，但是一旦我得到这个逻辑，我会正确覆盖它们.

**Mage_Catalog_Model_Product_Type_Price**

```
 public function getFinalPrice($qty=null, $product)
    {
        //... aggregate tier and special pricing, then apply custom options

        $finalPrice = $product->getData('final_price');
        $finalPrice = $this->_applyOptionsPrice($product, $qty, $finalPrice);

        return max(0, $finalPrice);
    }

    protected function _applyOptionsPrice($product, $qty, $finalPrice)
    {
        if ($optionIds = $product->getCustomOption('option_ids')) {
            $basePrice = $finalPrice;
            foreach (explode(',', $optionIds->getValue()) as $optionId) {
                if ($option = $product->getOptionById($optionId)) {

                    $confItemOption = $product->getCustomOption('option_'.$option->getId());
                    $group = $option->groupFactory($option->getType())
                        ->setOption($option)
                        ->setConfigurationItemOption($confItemOption);
                    // grab option value based on finalprice 
                    $finalPrice += $group->getOptionPrice($confItemOption->getValue(), $finalPrice);
                }
            };
        }

        Mage::log('base price :'.$basePrice.'  final price :'.$finalPrice); 

        return $finalPrice;
    } 
```

据我所知，在**Mage_Catalog_Model_Product_Type_Configurable_Price**和 **Mage_Catalog_Model_Product_Type_Grouped_Price**中，没有什么可以覆盖的，因为它们每个都调用`Parent::getFinalPrice`来确定每一步的值......

**问题仍然存在 - 我如何修改定价模型以适应基于百分比的自定义选项？**

50分给可以帮助我解决这个问题的人。...

任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T22:54:35.557

如果我说对了，您需要配置和分组产品，每次下一个期权价格修改都应应用于该值，根据先前计算（在应用之前的期权价格修改之后）。在这种情况下，您应该以下一种方式覆盖`_applyOptionsPrice()`和`Mage_Catalog_Model_Product_Type_Configurable_Price`类`Mage_Catalog_Model_Product_Type_Grouped_Price`中的方法：

```
protected function _applyOptionsPrice($product, $qty, $finalPrice)
{
    if ($optionIds = $product->getCustomOption('option_ids')) {
        foreach (explode(',', $optionIds->getValue()) as $optionId) {
            if ($option = $product->getOptionById($optionId)) {
                $confItemOption = $product->getCustomOption('option_'.$option->getId());

                $group = $option->groupFactory($option->getType())
                    ->setOption($option)
                    ->setConfigurationItemOption($confItemOption);
                $finalPrice += $group->getOptionPrice($confItemOption->getValue(), $finalPrice);
            }
        }
    }

    return $finalPrice;
} 
```**

# c# - Type.IsAssignableFrom 不适用于 Predicate<>

> ID：12572533
> 
> 赞同：1
> 
> 时间：2012-09-24T20:37:12.503
> 
> 标签：c#, generics

我认为以下代码段应该可以工作但失败了。我也尝试过 IsInstanceOfType 。

```
Assert.IsTrue(typeof(Predicate<>).IsAssignableFrom(typeof(Predicate<int>)), "No predicate match!"); 
```

我的断言错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:40:31.803

不，那是行不通的——你永远不可能有 open 类型的值，所以这行不通。

听起来您可能想要[`Type.GetGenericTypeDefinition`](http://msdn.microsoft.com/en-us/library/system.type.getgenerictypedefinition.aspx)：

```
if (type.IsGenericType &&
    type.GetGenericTypeDefinition() == typeof(Predicate<>))
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:54:51.243

我不认为这种方法应该是这样工作的。

`A`对于type和type in的关系`B`：

`A.IsAssignableFrom(B) == true`,`A`是 的基类`B`, 或者`A`是 的接口`B`

有一些像：

```
public class Animal { }
public class Dog : Animal { } 
```

以便：

```
typeof(Animal).IsAssignableFrom(typeof(Dog)) == true;

// you can do
Dog spot = new Dog();
Animal a = spot;        // assigned an Animal from a Dog

// but not
Animal b = new Animal();
Dog spike = b;          // compiler complains 
```

# android - ICS 上的 GCM PHONE_REGISTRATION_ERROR

> ID：12572536
> 
> 赞同：1
> 
> 时间：2012-09-24T20:37:20.450
> 
> 标签：android, registration, google-cloud-messaging

我已迁移我的应用程序以使用新的 GCM 推送系统。它适用于数千名用户，但今天我有一个用户使用带有 ICS 的三星 Galaxy S3，每次他尝试注册时都会收到 PHONE_REGISTRATION_ERROR。

我可以看到其他人在 AVD 上存在这个问题，但在真实设备上这意味着什么？

如何进一步调试/找出注册过程中出了什么问题？

PS 是的，我确实读过[http://developer.android.com/guide/google/gcm/gcm.html](http://developer.android.com/guide/google/gcm/gcm.html)，上面写着 PHONE_REGISTRATION_ERROR 向 Google 注册的电话不正确。此手机目前不支持 GCM。但这显然是不正确的，因为 GCM 适用于许多其他 S3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T00:09:46.913

这个用户的手机是否有可能已经植根并运行了一个由于某种原因 GCM 无法工作的 ROM？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T07:08:46.503

我遇到了同样的问题，在互联网上搜索了很多天后，我在谷歌群组（[https://groups.google.com/forum/#!topic/cerberus-support-forum/eJxOsYqkTxo](https://groups.google.com/forum/#!topic/cerberus-support-forum/eJxOsYqkTxo)）中注意到了这一点并尝试了它并它对我来说完美无缺。

您的 Google 帐户有问题。请试试这个：

*   转到设置 -> 应用程序 -> 管理应用程序 -> 全部

或者

转到设置-> 应用程序-> 全部（在较新版本上）

*   为“Google Play 服务”和“Google 服务框架”选择“清除数据”
*   重启手机

然后从您的应用中检查 GCM id。

如果它仍然不起作用，请从手机中删除所有谷歌帐户并重新启动手机并再次添加该帐户。

它对我有用（在实施了我通过搜索互联网获得的许多解决方案之后。）

希望能帮助到你！！

# c++ - C++ 委托构造函数

> ID：12572540
> 
> 赞同：2
> 
> 时间：2012-09-24T20:37:50.323
> 
> 标签：c++, c++11

我正在尝试使用委托构造函数，并尝试遵循在[这个问题](https://stackoverflow.com/questions/308276/c-call-constructor-from-constructor)和[这个问题](https://stackoverflow.com/questions/12190051/member-initialization-while-using-delegated-constructor)中找到的格式，但是，我仍然遇到问题。

我的`player.h`文件是这样的：

```
#ifndef PLAYER_H_
#define PLAYER_H_

#include <string>

class Player
{
public:
   Player(void);
   Player(std::string name, int score);
   ~Player();
protected:
   std::string name_;
   int score_;
};

#endif 
```

我的`player.cpp`文件是这样的：

```
#include "player.h"
Player::Player(std::string name, int score)
{
   score_ = score;
   name_ = name;
}

Player::Player(void) : Player(NULL,0)
{

} 
```

但是，当我尝试编译时，出现以下错误：

```
1>a:\projects\test\src\player.cpp(5): error C2614: 'Player' : illegal member initialization: 'Player' is not a base or member 
```

我究竟做错了什么？如果相关，我使用的是 VS2012。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-24T20:39:47.913

> 如果相关，我使用的是 VS2012。

是的，因为 Visual Studio*没有实现*这个 C++11 特性。对不起。有很多[C++11 特性没有实现](http://cpprocks.com/a-comparison-of-c11-language-support-in-vs2012-g-4-7-and-clang-3-1/)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-24T20:49:32.963

这不是您问题的答案，但即使您的编译器不支持委托构造函数，我也想解决您的代码可能会遇到的一些单独问题：

1.  使用初始化列表，而不是赋值。

2.  构造重物时，传值，移动。

3.  您不能`std::string`从空指针初始化 a。如果您想要一个空字符串，请传递一个空字符串。

4.  您应该只在极少数情况下和在非常特殊的情况下使用析构函数。

综上所述，我们得到以下代码：

```
class Player
{
public:
   Player(std::string name, int score)
   : name_(std::move(name))
   , score_(score)
   { }

   Player()
   : Player("", 0)
   { }

protected:
   std::string name_;
   int         score_;
}; 
```

# c# - 如何过滤掉动态创建的 DGV 单元格中的不适当条目？

> ID：12572547
> 
> 赞同：0
> 
> 时间：2012-09-24T20:38:22.023
> 
> 标签：c#, winforms, datagridview, formatting, datagridviewtextboxcell

我创建 DataGridViewTextBoxCells 并将它们添加到我的 DGV。

我想禁止所有第 0 列单元格中除 0..9 之外的任何条目，以及除 0..9 和“。”之外的任何条目。在所有其他人中。

我应该使用哪个事件来执行此操作：CurrentCellChanged？单元格格式化？其他活动？...或其他方式？

# android - 如何在 Webview 中显示 Youtube 网站/视频？

> ID：12572549
> 
> 赞同：1
> 
> 时间：2012-09-24T20:38:23.547
> 
> 标签：android, webview, youtube

我是 android 的菜鸟，我想浏览 youtube.com 并在 webview 内显示来自该网站的视频。目前，当我尝试执行此操作时，会出现设备的浏览器并让我使用设备浏览器浏览网站。如果 webview 不具备这种功能，我如何将设备的默认浏览器放置在我的布局中，就像 webview 一样，以便可以在应用程序中查看站点。任何帮助是极大的赞赏。

到目前为止我的代码：

```
 huffingtonpost = (WebView)findViewById(R.id.webView1);
    huffingtonpost.getSettings().setJavaScriptEnabled(true);
    huffingtonpost.getSettings().setUseWideViewPort(true);
    huffingtonpost.getSettings().setLoadWithOverviewMode(true);
    try{
    huffingtonpost.loadUrl("http://www.youtube.com/KitcoNews");
    }catch (Exception e){
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:54:35.960

查看[处理页面导航](http://developer.android.com/guide/webapps/webview.html#HandlingNavigation)，它解释了如何防止 Android 打开默认/库存浏览器。下面引用...

> 当用户从 WebView 中的网页单击链接时，默认行为是 Android 启动处理 URL 的应用程序。通常，默认 Web 浏览器会打开并加载目标 URL。但是，您可以为您的 WebView 覆盖此行为，以便在您的 WebView 中打开链接。

# java - 如何使用 apache poi 和 java 对象填充 excel 行

> ID：12572551
> 
> 赞同：2
> 
> 时间：2012-09-24T20:38:28.150
> 
> 标签：java, apache, apache-poi

我有一个对象列表，需要使用其属性填充 excel。每个单元格都有一个 java 对象的属性。现在我想知道是否有通用的方法。java 对象的属性是 String 和 double ，大约有 30 个这样的属性。我是否必须使用 getter 分别获取每个属性，然后填充单元格，或者是否有更优雅的方法（在循环中，使用反射等）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:29:49.133

是的，你可以通过反射来做到这一点。您首先获取类的所有声明字段的列表，然后检查其类型并再次使用反射从列表中的每个实例中获取该字段的值。请注意，返回的字段不能保证按任何特定顺序排列，尽管从 java 6 开始，它们实际上是按声明顺序返回的。

```
 for (Field field : Test.class.getDeclaredFields()) {
                if (field.getType() == String.class) {
                    System.out.println(field.get(yourInstance));
                }
            } 
```

# facebook - 使用 Facebook API，是否可以找到具有一定“喜欢”范围的页面？

> ID：12572554
> 
> 赞同：1
> 
> 时间：2012-09-24T20:38:33.460
> 
> 标签：facebook, api

例如，我想查找点赞数在 500 到 1000 之间的 Facebook 页面。任何超过 1000 或少于 500 的东西，我都不想要。

此外，按地理区域（城市）过滤这些页面是理想的，但我想这比原始问题更容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:47:06.017

乍一看，这看起来并不容易。FQL 没有计数功能。尝试此操作的一种非常耗费资源的方法可能是遍历页面，获取喜欢的列表，然后在代码中对其进行计数。

# c# - 调用多播委托是否分配内存？

> ID：12572560
> 
> 赞同：3
> 
> 时间：2012-09-24T20:39:20.710
> 
> 标签：c#, .net, system.reactive

我们正在考虑重新设计我们的一些接口以使用 IObservable、Subject 和 Observer（后两个在 Reactive 扩展中）而不是标准的 .NET 事件。查看实现后，我们发现 Subject 将锁定它需要回调的 IObserver 列表，然后创建一个新数组，将 IObserver 引用复制到该新数组中，然后调用它们。

当我们查看 MulticastDelegate 的实现时，我们可以看到 MulticastDelegate.GetInvocationList 的实现还创建了一个新数组，将要调用的委托复制到该数组中，然后调用它们。不清楚的是，当您调用多播委托 GetInvocationList 时，是否会调用它，或者是否在框架内以不分配内存的方式对其进行处理。调用多播委托是否会分配一个新数组？或者框架是否处理事情，因此在引发事件时不分配新数组？

我们的应用程序对内存分配和延迟非常敏感，因此我们试图通过迁移到新接口来确保不会在事件调用上分配更多内存。我们还将在内部运行一些测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:50:50.373

> 不清楚的是，当您调用多播委托 GetInvocationList 时，是否会调用它，或者是否在框架内以不分配内存的方式对其进行处理。

当您调用委托时，它不会调用`GetInvocationList`. 这是用于处理和检查委托的代码，而不是用于执行委托的实际代码。运行时本身实际上在内部执行调用，因为它实际上不在 IL 中。这记录在 8.9.3 下的 CLI 规范中：

> 虽然在大多数情况下，委托似乎只是另一种用户定义的类，但它们受到严格控制。方法的实现由 VES* 提供，而不是用户代码。

基本上，实际调用由运行时在内部处理。

 * VES == CLI 规范中的“虚拟执行系统”，这是用于执行运行时本身的代码的术语。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:29:24.133

似乎您正在查看 Rx v1.0 实现。主题实现在 Rx v2.0 中进行了彻底检查，以避免分配和调用路径中的重度锁定。同样，Rx 查询管道已根据相同的标准进行了修订。

有关 Rx v2.0 性能改进的更多信息，请参阅[http://blogs.msdn.com/b/rxteam/archive/2012/03/12/reactive-extensions-v2-0-beta-available-now.aspx](http://blogs.msdn.com/b/rxteam/archive/2012/03/12/reactive-extensions-v2-0-beta-available-now.aspx)。（虽然这篇文章是从测试版开始的，但大多数信息都适用于 RTM 构建。为了更好，一些事情已经被改进了。）

特别是对于主题，如果您有 2 个或更多的观察者附加，它们通常优于多播代表。在没有附加观察者的情况下，调用观察者的虚拟方法的成本超过了用于事件的空检查和调用模式。通过一个观察者，我们避免了通过调用列表（~ 没有多播部分的委托），但虚拟调用的成本仍然出现。随着更多观察者的连接，我们的虚拟方法的 foreach 循环往往比多播委托背后的机制更快。

这是直接来自 Rx 测试的基准代码的稍微简化的摘录（使一些参数保持不变并删除对内部类型的引用）：

```
var e = default(Action<int>);
var a = new Action<int>(_ => { });

var s = new Subject<int>();
var n = new NopObserver<int>();

var N = 20;
var M = 10000000;

var sw = new Stopwatch();

for (int i = 0; i < N; i++)
{
    sw.Restart();
    for (int j = 0; j < M; j++)
    {
        var f = e;
        if (f != null)
            f(42);
    }
    sw.Stop();
    var t = sw.Elapsed;
    Console.WriteLine("E({0}) = {1}", i, t);

    sw.Restart();
    for (int j = 0; j < M; j++)
    {
        s.OnNext(42);
    }
    sw.Stop();
    var u = sw.Elapsed;
    Console.WriteLine("O({0}) = {1}", i, u);

    var d = u.TotalMilliseconds / t.TotalMilliseconds;
    Console.ForegroundColor = d <= 1 ? ConsoleColor.Green : ConsoleColor.Red;
    Console.WriteLine(d + " - " + GC.CollectionCount(0));
    Console.ResetColor();

    Console.WriteLine();

    e += a;
    s.Subscribe(n);
} 
```

在这台机器上，前两次迭代变红；随后的迭代（处理程序计数 >= 2）显示 20%-35% 的加速。但是，所有关于此类基准的常见警告都适用 :-)。

另外，请记住，随着 Rx 中的管道变长，观察者包装的开销（为了安全保证）会下降。这是因为 Rx v2.0 在受信任的运营商之间进行内部握手，避免了额外的包装。只有最终用户订阅才会在 Rx 和用户提供的观察者代码之间进行另一层虚拟调用，以确保正确的异常传播等。在 Rx v1.0 中，为每个操作员提供了一个安全网，添加对于流经每个运营商的每条消息，需要进行 2 到 4 次额外的虚拟呼叫。

简而言之：如果您决定进行任何类型的测试，请选择 Rx v2.0。性能是此版本的第一大功能:-)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T21:26:40.957

好的，在玩过下面的测试应用程序之后，我确信调用 MulticastDelegate 不会分配托管内存。如果有人知道不同，请告诉我。

* * *

```
using System;
using System.Diagnostics;

internal class Program
{
    private static event Action A;

    private static void Method1() {}
    private static void Method2() {}
    private static void Method3() {}

    private static void Main()
    {
        A += Method1;
        A += Method2;
        A += Method3;

        var totalMemory = GC.GetTotalMemory(true);

        while(true)
        {
            A();

            // Uncommenting the line below will cause the Debug.Assert to be hit.
            // var a = new int[] {};

            if (totalMemory != GC.GetTotalMemory(false))
            {
                // Does not get hit unless line above allocating an array is
                // uncommented.
                Debug.Assert(false);
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T10:21:25.477

关于 Rx 和分配；Rx v2.0 付出了很多努力来减少执行的分配和锁定的数量。V1 是一款出色的产品，但已被证明是在 API 的公共表面上获得 2 年行业反馈的地方。一旦清楚了行业需要什么，Rx 团队就离开并开始研究内部结构。据我所见，Bart DeSmet 能够在使用 Rx 的 64 路系统上获得超过 90-95% 的 CPU 利用率。这表明它受 CPU 限制，而不是上下文切换、锁定或 IO 限制（但我一辈子都找不到显示它的帖子）。即系统在处理不处理其他管道的 Rx 查询时处于充分利用状态。

根据我使用 Rx 的经验，还有很多其他的东西可以让你明白，分配通常不是其中之一。虽然我理解对低延迟系统的要求，并且分配会导致 GC 抖动，但我假设您将构建一个单线程管道。如果不是这样，我预计多线程应用程序的上下文切换将远远超过 GC 的成本。在这种单线程管道的情况下，您将获得的主要好处是能够组合 Rx 运算符来构建应该比处理事件更具可读性的查询。

最后，我会避免在您的代码中使用主题或 Observer 类。这样做表明存在设计缺陷。[如果您发现您确实开始使用它们，我建议您在此处分享您的问题空间（或者在官方 Rx 论坛http://social.msdn.microsoft.com/Forums/en-US/rx/threads](http://social.msdn.microsoft.com/Forums/en-US/rx/threads)上更好）和社区可以提供更好的指导。

# java - “Object oldData[] = elementData;”行的目的是什么 在ArrayList 的ensureCapacity 方法中？

> ID：12572561
> 
> 赞同：3
> 
> 时间：2012-09-24T20:39:24.523
> 
> 标签：java, arraylist

我刚刚偶然发现了 Java 6 中的一行代码，我不清楚它的功能。

它是ArrayList 方法中`Object oldData[] = elementData;`的一行。只是看起来是一个局部变量，在方法体的范围内没有任何用途。我在作业中错过了一些隐藏的魔法吗？`ensureCapacity(int minCapacity)``oldData`

```
/**
* Increases the capacity of this <tt>ArrayList</tt> instance, if
* necessary, to ensure that it can hold at least the number of elements
* specified by the minimum capacity argument.
*
* @param   minCapacity   the desired minimum capacity
*/
public void ensureCapacity(int minCapacity) {
  modCount++;
  int oldCapacity = elementData.length;
  if (minCapacity > oldCapacity) {
      Object oldData[] = elementData;
      int newCapacity = (oldCapacity * 3)/2 + 1;
      if (newCapacity < minCapacity)
          newCapacity = minCapacity;
      // minCapacity is usually close to size, so this is a win:
      elementData = Arrays.copyOf(elementData, newCapacity);
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T20:46:25.447

没有目的，它是不断发展的代码和马虎程序员的产物。

`Arrays.copyOf()`在 JDK 6 中引入。在此之前，代码必须使用`System.arrayCopy()`，这需要对旧数组的引用（我没有手边的 JDK 1.5 安装，但愿意打赌）。

# java - Java 帮助使用模式操作锚点

> ID：12572563
> 
> 赞同：0
> 
> 时间：2012-09-24T20:39:26.357
> 
> 标签：java, regex

我在用我的程序完成一些事情时遇到了麻烦，我希望有人能够提供帮助。

我有一个包含 HTML 页面源代码的字符串。

我想做的是提取以下 HTML 的所有实例并将其放在一个数组中：

```
<img src="http://*" alt="*" style="max-width:460px;"> 
```

所以我会有一个 X 大小的数组，其中包含与上面类似的值，显然更新了 src 和 alt 属性。

这可能吗？我知道有 XML 解析器，但格式总是一样的。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:00:46.087

我建议使用`ArrayList`而不是静态数组，因为看起来您不知道要匹配多少个匹配项。

对于 HTML 使用 REGEX 也不是一个好主意，但如果您确定标签始终使用相同的格式，那么我会推荐：

```
Pattern pattern = Pattern.compile(".*<img src=\"http://(.*)\" alt=\"(.*)\"\\s+sty.*>", Pattern.MULTILINE); 
```

这是一个例子：

```
public static void main(String[] args) throws Exception {
        String web;
        String result = "";
        for (int i = 0; i < 10; i++) {
            web = "<img src=\"http://image" + i +".jpg\" alt=\"Title of Image " + i + "\" style=\"max-width:460px;\">";
            result += web + "\n";
        }
        System.out.println(result);
        Pattern pattern = Pattern.compile(".*<img src=\"http://(.*)\" alt=\"(.*)\"\\s+sty.*>", Pattern.MULTILINE);

        List<String> imageSources = new ArrayList<String>();
        List<String> imageTitles = new ArrayList<String>();

        Matcher matcher = pattern.matcher(result);
        while (matcher.find()) {
            String imageSource = matcher.group(1);
            String imageTitle = matcher.group(2);
            imageSources.add(imageSource);
            imageTitles.add(imageTitle);

        }

        for(int i = 0; i < imageSources.size(); i++) {
            System.out.println("url: " + imageSources.get(i));
            System.out.println("title: " + imageTitles.get(i));

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T20:53:32.537

当您获得`ArrayIndexOutOfBoundsException`时，很可能该`String`数组`imageTitles`不足以容纳在正则表达式搜索中找到的所有 ALT 实例。在这种情况下，它很可能是一个大小为零的数组。

# java - Java中的二维数组

> ID：12572565
> 
> 赞同：0
> 
> 时间：2012-09-24T20:39:37.097
> 
> 标签：java, performance, benchmarking

以下哪项在 Java 中更快？有没有比这些方法更快的方法？

```
int[][] matrix = new int[50][50];

for (int k=0;k<10;k++){
// some calculations here before resetting the array to zero
      for (int i = 0; i <50; i++) {
            for (int j = 0; j <50; j++) {
                matrix[i][j]=0;
            }              
        }
} 
```

或这个：

```
int[][] matrix = new int[50][50];

    for (int k=0;k<10;k++){
// some calculations here before resetting the array to zero 
          matrix = new int[50][50];
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:56:48.577

执行使变量“矩阵”在运行结束时处于等效状态的动作的最快方法是`int[][] matrix = new int[50][50];`

但是，这些解决方案在操作数量或内存抖动方面都不是等效的。我提供的声明就是你要找的。

**更新：**随着您更新的问题，您在哪里操作矩阵，然后重置它。

您的第二个示例在每次迭代中可能会更快。想法是分配内存比迭代和设置变量 50^2 次要快。虽然这是一个探查器的问题。一般来说，将内存归零是 JVM 比您的应用程序更好地优化的东西。

话虽如此，重要的是要记住，在极端情况下，内存分配并非没有警告。如果您过于频繁地分配和丢弃内存，您可能会遇到次优的 GC 体验。

# php - 使用 PHP Includes 时的淡入淡出过渡

> ID：12572569
> 
> 赞同：2
> 
> 时间：2012-09-24T20:39:46.810
> 
> 标签：php, jquery, include, fade, transition

我正在尝试在 DIV 中包含的 php 页面上使用 jQuery 或 CSS（或其他方式！）创建淡入淡出或滑动过渡。我四处搜索并发现了大量的淡入淡出转换示例，这些淡化过渡使 div 彼此淡化或淡入隐藏内容，但这种情况略有不同。

我有一个 DIV，其内容由导航栏控制。选择时，每个页面都使用 PHP 成功包含在 div 中，但我想让内容淡入淡出。

关于如何在页面更改之间进行漂亮的过渡的任何想法？

非常感谢

代码：

```
<?php
    if (isset($_GET['page']))
    $page = $_GET['page'];

    else {
            $_GET['page'] = 1;
            $page = $_GET['page'];
}
?> 
```

然后页面被包含在一个 div 中，如下所示：

```
<div id="content">
      <?php switch($page)
    {       
            case "about":
            include('includes/about.php');
            break;

            case "portfolio":
            include('includes/portfolio.php');
            break;

            case "contact":
            include('includes/contact.php');
            break;

            default:
                include('includes/home.php');
            }
?>
    </div> 
```

内容是从导航栏中选择的：

```
<ul>
  <li><a href="m_index.php?page=home"><img src="" width="32" height="32" alt="Home"/></a></li>
  <li><a href="m_index.php?page=about"><img src="" width="32" height="32" alt="About" /></a></li>
  <li><a href="m_index.php?page=portfolio"><img src="" width="32" height="32" alt="Portfolio" /></a></li>
  <li><a href="m_index.php?page=contact"><img src="" width="32" height="32" alt="Contact Us" /></a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T21:07:12.393

就像人们在评论中所说的那样，您每次都在重新加载整个页面。

您可以使用`jQuery.load`API 来加载内容，而不是将它们包含在 php.ini 中。

PHP：

```
<div id="content">
    <?php
    // load home by default - the rest will be loaded via AJAX
    include("includes/home.php");  ?>
</div>​ 
```

导航栏的 HTML：

```
<ul id="links">
    <li><a href="m_index.php?page=home"><img src="" width="32" height="32" alt="Home"/></a></li>
    <li><a href="includes/about.php"><img src="" width="32" height="32" alt="About" /></a></li>
    <li><a href="includes/portfolio.php"><img src="" width="32" height="32" alt="Portfolio" /></a></li>
    <li><a href="includes/contact.php"><img src="" width="32" height="32" alt="Contact Us" /></a></li>
</ul>
​
​ 
```

使用 jQuery，您可以执行以下操作：

```
$(document).ready(function() {
    $('#links a').click(function(e) {
        e.preventDefault(); // we'll get the pages via ajax.

        var url = $(this).attr('href'); // use href as url to loag

        $.ajax({
            url: url,
            success: function(data) {

                // when ajax is done, fade old content out
                $('#content').fadeOut(function() {

                    $(this).html(data); // replace contents

                    // fade new content in
                    $(this).fadeIn();
                });
            }
        });
    });
});​​​​ 
```

我还没有测试过 jQuery 代码，但它应该可以工作（或者给你一些想法）。如果一切顺利，您可能还想清理 php 代码。

# c++ - 我可以调用带有错误签名的 dlsym() 导入的函数，为什么？

> ID：12572575
> 
> 赞同：1
> 
> 时间：2012-09-24T20:40:14.733
> 
> 标签：c++, casting, shared-libraries, void-pointers, dlsym

host.cpp 有：

```
int main (void)
{
    void * th = dlopen("./p1.so", RTLD_LAZY);
    void * fu = dlsym(th, "fu");

    ((void(*)(int, const char*)) fu)(2, "rofl");

    return 0;
} 
```

p1.cpp 有：

```
#include <iostream>

extern "C" bool fu (float * lol)
{
    std::cout << "fuuuuuuuu!!!\n";
    return true;
} 
```

（我故意留下错误检查）

执行主机时，“fuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuu” 打印正确，即使我使用完全不同的函数签名将 void 指针类型转换为符号。

为什么会发生这种情况？不同编译器之间的这种行为是否一致？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T20:43:27.040

发生这种情况是因为 UB，并且这种行为与任何事情都不一致，根本，永远，出于任何原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T20:42:01.040

因为 void 指针中没有关于函数签名的信息。或地址以外的任何信息。如果您开始使用参数，您可能会遇到麻烦。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T20:43:36.017

这实际上不是创建将失败的案例的一个很好的例子，因为：

1.  您永远不会使用函数中的参数`fu`。
2.  您的函数`fu`的参数（或激活框架本身的内存占用量较小）比您要转换的函数指针类型少，因此您永远不会遇到`fu`尝试访问外部内存的情况调用者设置的激活记录。

最后，你所做的仍然是未定义的行为，但你没有做任何事情来创建可能导致问题的违规行为，因此它最终成为一个静默错误。

> 这种行为在不同的编译器之间是否一致？

不。如果您的平台/编译器使用了要求被调用者清理堆栈的调用约定，那么糟糕，如果被调用者和调用者之间的激活记录大小不匹配，那么您很可能会被淹没期望......在被调用者返回时，堆栈指针将被移动到错误的位置，可能会破坏堆栈，并完全弄乱任何堆栈指针的相对寻址。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T20:45:42.430

刚刚发生了，那

*   `C`使用`cdecl`调用转换（所以调用者清除堆栈）
*   您的函数不使用给定的参数参数

所以你的电话*似乎*工作正常。

但实际上行为是未定义的。更改签名或使用参数将导致您的程序崩溃：

# 添加：

例如，考虑`stdcall`调用转换，其中*被调用者*清除堆栈。在这种情况下，即使你为调用者和被调用者都声明了正确的调用转换，你的程序仍然会崩溃，因为你的堆栈将被破坏，因为被调用者会根据它的签名清除它，但调用者会根据另一个签名填充：

```
#include <iostream>
#include <string>

extern "C" __attribute__((stdcall)) __attribute__((noinline)) bool fu (float * lol) 
{
    std::cout << "fuuuuuuuu!!!\n";
    return true;
}

void x()
{
    (( __attribute__((stdcall)) void(*)(int, const char*)) fu)(2, "rofl");
}

int main (void)
{
    void * th = reinterpret_cast<void*>(&fu);

    std::string s = "hello";

    x();

    std::cout << s;

    return 0;
} 
```

# jquery - 如何避免.live jquery上的乘法

> ID：12572581
> 
> 赞同：0
> 
> 时间：2012-09-24T20:40:54.717
> 
> 标签：jquery, twitter-bootstrap, html-editor

我有一个事件，选择时会向我的引导 html 编辑器添加正确的文本值。问题是每次选择时都会添加 html 工具栏，所以我有很多工具栏。我想在创造之前毁灭，但我真的不知道怎么做。代码如下所示

```
$('a.open_dialog').click(function(e) {
        e.preventDefault();
        var tabsDiv=$('<div />').appendTo('body').load($(this).attr('href'),function(){
        $('#tabs').tabs();
        $('select#state').live('change',function() {

            $('.textarea').empty().wysihtml5().data("wysihtml5").editor.setValue(getCustomText($('select#state').val()));

        });

        $( "#datepicker" ).datepicker();        
        })
        .dialog({

            title: $(this).attr('title'),
            modal: true,
            draggable: false,
            width: 800,
            position: 'top',
            buttons: {
                "Speichern": function() {
                    open: { $(this).addClass('b') }
                    $.ajax({
                           type: "POST",
                           url: 'action.php',
                           data: $("#edit_form").serialize(), // serializes the form's elements.
                           success: function(data)
                           {
                               alert('Der Datensatz wurde gespeichert!'); // show response from the php script.
                           },
                            error:function(){

                               alert('Es gibt ein Fehler bei Daten übetragung!');

                            }
                         });

                },
                "Email schicken": function() {

                    $.ajax({
                           type: "POST",
                           url: 'mailer.php',
                           data: $("#contactform").serialize(), // serializes the form's elements.
                           success: function(data)
                           {
                               alert('Das Email wurde geschickt!'); // show response from the php script.
                           },
                           error:function(){

                               alert('Es gibt ein Fehler bei Daten übetragung!');

                            }
                         });
                },

                "Rechnung herunterladen":function() {

                    $.ajax({
                           type: "POST",
                           url: 'docsx.php',
                           data: $("#edit_form").serialize(), // serializes the form's elements.
                           success: function(data)
                           {

                               window.location.href ='rechnung.docx'; // show response from the php script.
                           },
                           error:function(){

                               alert('Es gibt ein Fehler bei Daten übetragung!');

                            }
                         });

                    }

            },
            close: function() {
                tabsDiv.remove() // so I can reload again
                location.reload(true);
//              allFields.val( "" ).removeClass( "ui-state-error" );

            },
        });

        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:42:37.150

试试这个

在文档中查看是否有删除工具栏的销毁方法。您还可以采取另一种方法，完全删除内容并再次添加内容并重新分配工具栏。

**更新**

为什么将更改事件嵌套在单击事件中。如果这样做，则每次打开对话框时都会与之关联一个新的更改事件。尝试将其移出单击事件。同时确保委派使用 .on() 的事件

尝试取消绑定并分配事件..我们不应该一遍又一遍地取消绑定和绑定，因为它是一种反模式..但是请检查这是否有效

```
$('select#state').unbind().live('change', function() {
          $('.textarea').empty().wysihtml5().data("wysihtml5").editor
            .setValue(getCustomText($('select#state').val()));
        }); 
```

# git - git checkout 会自动先获取吗？

> ID：12572583
> 
> 赞同：3
> 
> 时间：2012-09-24T20:41:16.590
> 
> 标签：git, git-checkout, git-fetch

假设我有一个如下所示的命令：

`git checkout -b my-branch origin/dev`

假设我已经从`origin`之前获取，所以我知道它有一个`dev`分支，我**是否需要**`git fetch`在之前运行`git checkout`，或者`checkout`总是会获取到远程分支中的最新提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:47:41.530

`git checkout -b branch origin/branch`将从远程存储库中签出而不获取存储库。签出的分支将是远程仓库上的分支的样子。

注意：您的本地存储库将不具有远程存储库的更新知识，因此`git branch -a`可能不会显示您正在签出的远程分支，或者它可能会显示对它的较旧引用。

# android - 无法使用 db 操纵器将数据插入到第二个表中

> ID：12572585
> 
> 赞同：0
> 
> 时间：2012-09-24T20:41:26.200
> 
> 标签：android, sqlite

我是 Android 的初学者，这个数据操纵器允许我将数据插入到第一个表（“人”）中，但是我无法使用第二种方法，第二个字符串将数据添加到第二个表（“约会”）中“插入 2”。但是数据被插入到第一个表而不是第二个表中。关于我做错了什么的任何想法？提前谢谢！

```
package com.example.citas.medicas;

import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteStatement;
import android.widget.Toast;
import java.util.ArrayList;
import java.util.List;

public class DataManipulator
{
private static final  String DATABASE_NAME = "mydatabase.db";
private static final int DATABASE_VERSION = 1;
static final String TABLE_NAME = "Personas";
static final String TABLE_NAME2 = "Citas";
private static Context context;
private static Context context2;
static SQLiteDatabase db;
private SQLiteStatement insertStmt;
private static final String INSERT = "insert into " + TABLE_NAME + " (nombre,cedula,fechanacimiento,telefonocasa,telefonomovil,tipo) values (?,?,?,?,?,?)";
private static final String INSERT2 = "insert into " + TABLE_NAME2 + " (nombrepaciente,fechacita,horacita,nombredoctor) values (?,?,?,?)";

public DataManipulator(Context context) {
    DataManipulator.context = context;
    OpenHelper openHelper = new OpenHelper(DataManipulator.context);
    DataManipulator.db = openHelper.getWritableDatabase();
    this.insertStmt = DataManipulator.db.compileStatement(INSERT);
}

public  void DataManipulator(Context context2) {
    DataManipulator.context2 = context2;
    OpenHelper openHelper = new OpenHelper(DataManipulator.context2);
    DataManipulator.db = openHelper.getWritableDatabase();
    this.insertStmt = DataManipulator.db.compileStatement(INSERT2);
}

public long insert(String nombre,String cedula,String fechanacimiento,String telefonocasa,String telefonomovil,String tipo) {
    this.insertStmt.bindString(1, nombre);
    this.insertStmt.bindString(2, cedula);
    this.insertStmt.bindString(3, fechanacimiento);
    this.insertStmt.bindString(4, telefonocasa);
    this.insertStmt.bindString(5, telefonomovil);
    this.insertStmt.bindString(6, tipo);
    return this.insertStmt.executeInsert();      
}

public long insert2(String nombrepaciente,String fechacita,String horacita,String nombredoctor) {
    this.insertStmt.bindString(1, nombrepaciente);
    this.insertStmt.bindString(2, fechacita);
    this.insertStmt.bindString(3, horacita);
    this.insertStmt.bindString(4, nombredoctor);
    //this.insertStmt.bindString(5, telefonomovil);
    //this.insertStmt.bindString(6, tipo);
    return this.insertStmt.executeInsert();
}

public void deleteAll() {
    db.delete(TABLE_NAME, null, null);
}

public void delete(int rowId) {
    db.delete(TABLE_NAME, null, null); 
}

private static class OpenHelper extends SQLiteOpenHelper {
    OpenHelper(Context context) {
         super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }
    @Override
    public void onCreate(SQLiteDatabase db) {
         db.execSQL("CREATE TABLE " + TABLE_NAME + " (id INTEGER PRIMARY KEY, nombre TEXT, cedula TEXT, fechanacimiento TEXT, telefonocasa TEXT, telefonomovil TEXT, tipo TEXT)");
         //B) FINAL NO QUITAR
         db.execSQL("CREATE TABLE " + TABLE_NAME2 + " (id INTEGER PRIMARY KEY, nombrepaciente TEXT, fechacita TEXT, horacita TEXT, nombredoctor TEXT)");
    }
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
    {
         db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
         onCreate(db);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:48:55.210

您不能有两个采用相同参数的方法：

```
public DataManipulator(Context context) {
    DataManipulator.context = context;
    OpenHelper openHelper = new OpenHelper(DataManipulator.context);
    DataManipulator.db = openHelper.getWritableDatabase();
    this.insertStmt = DataManipulator.db.compileStatement(INSERT);
}

public  void DataManipulator(Context context2) {
    DataManipulator.context2 = context2;
    OpenHelper openHelper = new OpenHelper(DataManipulator.context2);
    DataManipulator.db = openHelper.getWritableDatabase();
    this.insertStmt = DataManipulator.db.compileStatement(INSERT2);
} 
```

尝试传递一个标志：

```
public DataManipulator(Context context, boolean first) {
    DataManipulator.context = context;
    OpenHelper openHelper = new OpenHelper(DataManipulator.context);
    DataManipulator.db = openHelper.getWritableDatabase();

    if(first)
        this.insertStmt = DataManipulator.db.compileStatement(INSERT);
    else
        this.insertStmt = DataManipulator.db.compileStatement(INSERT2);
} 
```

* * *

或者，您应该考虑创建两个不同的处理程序类，每个表一个。

# java - java中的arraylist到json

> ID：12572590
> 
> 赞同：0
> 
> 时间：2012-09-24T20:41:40.167
> 
> 标签：java, arrays, json, multidimensional-array, arraylist

我有 3 个包含特定字符串的字符串数组，如下所示：

```
String jsonA[] = new String[list.size()];
    String jsonA2[] = new String[list2.size()];
    String jsonA3[] = new String[list3.size()];
    for(int i=0;i<str.length;i++){
        jsonA[i]="title:"+str[i]+"url:"+str2[i]+"banner:"+str3[i];
        //System.out.println(jsonA[i]);
        Gson gson = new Gson();
        String json = gson.toJson(jsonA[i]);
        System.out.println(json);
    } 
```

让我这样解释：

```
jsonA[] has: str1,str2,str3
                          jsonA2[] has: str4,str5,str6
                          jsonA3[] has: str7,str8,str9 
```

我想制作一个 3D 数组，如下所示：

```
json3D[i][i][i]       = str1,str4,str7;
json3D[i+1][i+1][i+1] = str2,str5,str8;
json3D[i+2][i+2][i+2] = str3,str6,str9; 
```

最后将它们转换为json。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T22:03:22.447

您对 3D 数组的表示：

```
json3D[i][i][i]       = str1,str4,str7;
json3D[i+1][i+1][i+1] = str2,str5,str8;
json3D[i+2][i+2][i+2] = str3,str6,str9; 
```

这是举行：

```
jsonA[] has: str1,str2,str3
jsonA2[] has: str4,str5,str6
jsonA3[] has: str7,str8,str9 
```

似乎不对。上面名为 json3D 的结构看起来像一个 2D 数组，而不是 3D 数组。同样在 3D 数组中，`array[i]`将指向 2D 数组，`array[i][j]`将指向 1D 数组`array[i][j][k]`并将指向单个项目。

如果 jsonA、jsonA2、jsonA3 是 3 个单维数组，那么要将它们全部存储在一起，您需要一个 3X3 大小的 2D 数组，其中包含 9 个项目（如您在问题中所示）。

如果您已被分配仅使用 3d 数组，那么您将需要更多数据来填充它。因为 3X3X3 数组将包含 27 个项目，而不是这里的 9 个。

That being said, whatever array you need to use - 2D or 3D - you can simply iterate over your 3 1D arrays to populate it and then a simple `new Gson().toJson(array)` will return the appropriate JSON string.

# android - 无法在 Eclipse 中创建新的 Android 项目

> ID：12572592
> 
> 赞同：0
> 
> 时间：2012-09-24T20:41:49.620
> 
> 标签：android, eclipse, sdk, project

使用 3.6.2。当我选择创建一个新的 Android 项目时，我输入了一个名称“FirstProject”，但“完成”按钮仍然是空的，我无法通过创建项目。

我做了一点谷歌研究，发现一个常见的原因是 SDK 的 extras 文件夹中存在的支持文件夹需要被复制，并且复制品命名为兼容性。我现在已经这样做了，并重新启动了 Eclipse，但这仍然没有解决问题。

我还读到 Juno 会导致这个问题，但我没有使用 Juno。

有没有人遇到过这个问题？非常渴望启动一个Android应用程序！！

编辑：错误屏幕：

![在此处输入图像描述](../Images/81fca15448056726dbeb8a53187dba55.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:01:45.213

您需要选择一个构建 SDK。如果该下拉菜单中没有任何内容，请访问 SDK 管理器（窗口 > Android SDK 管理器）并下载一个或多个 SDK 平台和相关的模拟器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T03:29:48.893

确保您在 Eclipse 中添加了 SDK，否则您将下载它们并为它们为什么不工作而挠头。如果您从 SDK 文件夹而不是从 Eclipse 启动 SDK 管理器，它似乎没有在 Eclipse 中注册您已下载这些文件。花了我几个小时才应该只需要一个左右的事情。

# ruby-on-rails - 按域改变 memcached 动作缓存

> ID：12572610
> 
> 赞同：0
> 
> 时间：2012-09-24T20:43:23.060
> 
> 标签：ruby-on-rails, caching, memcached

我在 Rails 3 应用程序中使用 Memcached（实际上是 Heroku 上的 Memcachier）进行动作缓存，如下所示：

```
caches_action :index, :expires_in => 14.days 
```

问题是我的应用程序是从许多不同的域访问的，并且内容需要有所不同。目前，所有域的缓存都相同。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T21:15:37.373

Rails[`caches_action`](http://api.rubyonrails.org/classes/ActionController/Caching/Actions.html)文档说：

> 动作缓存在内部使用片段缓存和一个环绕过滤器来完成这项工作。片段缓存根据请求的主机和路径命名。[在http://david.example.com/lists/show/1](http://david.example.com/lists/show/1)访问的页面 将生成一个名为 david.example.com/lists/show/1 的片段。这允许缓存器区分 david.example.com/lists/ 和 jamis.example.com/lists/ - 这是帮助子域作为帐户键模式的有用方法。

所以生成的密钥对于不同的域应该是不同的。

为了检查它，我什至创建了一个应用程序，并以详细模式 ( )`:mem_cache_store`启动了一个 memcached 服务器。`-vv`

请求/响应如下所示`http://localhost:3000/`：

```
<21 get views/localhost:3000/index
>21 END
<21 set views/localhost:3000/index 0 0 7123
>21 STORED 
```

使用不同的域`http://foobar:3000/`：

```
<21 get views/foobar:3000/index
>21 END
<21 set views/foobar:3000/index 0 0 7123
>21 STORED 
```

### 更新

如果您想根据请求创建不同的缓存键，而默认值对您来说不够用，那么您可以[`:cache_path`](http://api.rubyonrails.org/classes/ActionController/Caching/Actions.html)使用`caches_action`.

[您可以在这个 SO question](https://stackoverflow.com/questions/1483847/how-can-caches-action-be-configured-to-work-for-multiple-formats)中找到示例。

# .htaccess - Htaccess 重写规则

> ID：12572613
> 
> 赞同：1
> 
> 时间：2012-09-24T20:43:30.177
> 
> 标签：.htaccess, mod-rewrite, map, switch-statement

在提出这个问题后，[Htaccess URLRewrite to another map](https://stackoverflow.com/questions/12442962/htaccess-urlrewrite-to-another-map/12443000#12443000) 效果很好，但现在我想添加一个额外的“地图”，但这不起作用。

我现在的 .htaccess 文件：

```
ErrorDocument 404 /v2/404.php
ErrorDocument 404 /v2/505.php

RewriteEngine on

RewriteRule ^error/([^/]+)/?$ error.php?id=$1 [L,QSA,NC]

RewriteRule ^email/([^/]+)/?$ email.php?id=$1 [L,QSA,NC]

RewriteRule ^activate/([^/]+)/?$ activate.php?code=$1 [L,QSA,NC]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^werknemer/([^/]+)/?$ werknemer/$1.php [L,QSA,NC]

RewriteRule ^klanten/([^/]+)/?$ klanten/$1.php [L,QSA,NC]

RewriteCond %{REQUEST_FILENAME}.php -f

RewriteRule ^(.*)$ $1.php [L] 
```

总是最后一个不起作用，现在 RewriteRule ^klanten/ 不起作用，当我在 RewriteRule ^klanten/ 之后执行 RewriteRule ^werknemer/ 时，RewriteRule ^klanten/ 起作用，但 RewriteRule ^werknemer/ 不起作用。

如何解决这个问题？

谢谢！沃特0100

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:56:46.987

您需要再次复制 2 个条件。`RewriteCond`'s 仅适用于紧随其后的`RewriteRule`，因此如果要将它们应用于多个规则，则需要复制条件：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^werknemer/([^/]+)/?$ werknemer/$1.php [L,QSA,NC]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^klanten/([^/]+)/?$ klanten/$1.php [L,QSA,NC] 
```

也许您的最后一条规则也需要它：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^/(.*?)/?$
RewriteCond %{DOCUMENT_ROOT}/%1.php -f
RewriteRule ^ /%1.php [L] 
```

这将检查是否存在尾部斜杠，并在查看是否将其添加`php`到末尾产生现有文件之前将其删除。

# c++ - 为什么 a = i + i++ 未定义而不是未指定的行为

> ID：12572618
> 
> 赞同：12
> 
> 时间：2012-09-24T20:43:50.487
> 
> 标签：c++

我通读了几个关于未定义行为和序列点（例如[未定义行为和序列点](https://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points)）的非常好的答案，我明白了，

```
 int i = 1;
   a = i + i++; //this is undefined behaviour 
```

根据 C++ 标准，是未定义的代码。但是，未定义行为背后的更深层原因是什么？使它成为未指定的行为还不够吗？通常的论点是，通过很少的序列点，C++ 编译器可以针对不同的体系结构进行更好的优化，但是不指定它是否也允许这些优化？在

```
 a = foo(bar(1), bar(2)); //this is unspecified behaviour 
```

编译器也可以优化，它不是未定义的行为。在第一个示例中，a 是 2 或 3 似乎很清楚，所以语义对我来说似乎很清楚。我希望有一个推理，为什么有些事情是未指定的，而另一些是未定义的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T20:47:47.427

并非*所有*这些优化。例如，Itanium 可以并行执行加法和增量，并且它可能会因为尝试执行此类操作而产生硬件异常。

但这是一个完全的微优化，编写编译器来利用这一点非常困难，而且这是一个极其罕见的架构可以做到这一点（当时不存在，IIRC，这主要是假设的）。所以现实是，截至 2012 年，没有理由不明确定义行为，事实上，C++11 对这些情况进行了明确定义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T21:53:45.573

从 C++ 的角度来看，我认为答案非常简单：它是未定义的行为，因为 C 很久以前就将其变成了未定义的行为，而改变它基本上没有潜在的收益。

这指向了我猜测的更多预期问题：为什么 C 会做出这种未定义的行为？

我认为这没有那么简单的答案。一种可能性是简单的谨慎——知道在编写 C 标准时，C 已经在许多机器上实现、部署和使用。当时相当多的机器看起来像是很多我仍然看到的代码：最初只是作为个人实验设计的东西，它运行得很好，最终被指定为“生产”，甚至没有象征性地尝试修复任何东西。最严重的问题。因此，即使没有人知道这会破坏硬件，也没有人能真正确定这样的硬件也不存在，所以最安全的做法是称它为 UB 并完成它。

另一种可能性是它有点超出了简单的谨慎。尽管我们可以对现代硬件感到相当安全，但当时可能已经存在人们真正知道会在这方面存在重大问题的硬件，并且（特别是如果与该硬件相关的供应商在委员会中有代表）允许 C 运行硬件被认为很重要。

还有一种可能性是，即使没有人知道（甚至担心可能）某些现有实现可能会破坏，但他们预见到它会破坏某些东西的未来可能性，因此未定义的行为被视为未来证明的一种方式语言至少在一定程度上是有限的。

最后一种可能性是，编写该部分标准的人在提出一套似乎可以接受的规则后立即转向其他事情*，*即使他们本可以提出至少一些人可能喜欢的其他规则更好的。

如果我不得不猜测，我会说这可能是我给出的第三种和第四种可能性的组合——委员会意识到并行计算的发展，但不知道它最终会如何运作，所以无论是谁写这篇文章时，最大化实施部分的自由度似乎是获得共识的最简单/最简单的途径，这样他们就可以完成它并继续做更大更好的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T20:59:46.177

未定义行为和未指定行为之间存在巨大差异。未指定的行为是格式良好的（即合法的），但该标准给编译器供应商留下了一些实现的自由度。未定义的行为是一种看起来在语法上正确的暴行。将行为视为“未定义”而不是完全非法（编译器必须拒绝）的主要原因是有时这种未定义的行为可能很难诊断。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T20:58:47.253

```
a = foo(bar(1), bar(2)); // this is unspecified behaviour 
```

这两个函数调用可以按任何顺序进行，但它们仍然是两个不同的函数调用。即使调用是内联的，机器指令也不允许重叠。实际上，它们确实有很多重叠，但是优化器被限制为生成严格地表现得好像函数调用是分开的代码。

```
a = i + i++; // this is undefined behaviour 
```

使用标量 i，不需要分离：从 i 获取、添加和后增量的 cpu 指令可以自由混合，并且允许优化器假装它不知道左侧的 i 和右侧的 i权利是一样的。当违反此前提条件时，不知道它会产生什么样的损坏组件。因此，未定义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T08:44:45.137

MIPS 1 是一个带有加载延迟槽的合理实现。执行加载不会是即时的。结果仅在下一条指令开始后可见。对于编译器来说，这没什么大不了的。只需将不相关的指令放在下一个插槽中即可。

当然，编译器必须知道“无关”是什么。由于 C 规则禁止同时修改单个变量，编译器在查找必须不相关的指令方面有更多选择。如果两个操作出现在一个语句中，它们必须对不同的变量进行操作，因此是不相关的。

# javascript - 从没有数组的JS中的文件夹中随机选择文件

> ID：12572619
> 
> 赞同：0
> 
> 时间：2012-09-24T20:43:51.850
> 
> 标签：javascript, jquery

我有这段代码可以从文件夹路径中随机抓取一个文件，并通过 jQuery 加载它：

```
var path = '/path-to-files/',
files = ['1.php', '2.php', '3.php', '4.php', '5.php', '6.php'],
i = Math.floor(Math.random()*files.length);
var url = (path+files[i]);
$("#my-div").load(url); 
```

太好了，效果很好。但我更喜欢一种在`path`不构建数组的情况下随机抓取文件的方法。那可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T20:44:56.993

```
var i = Math.floor(Math.random() * 6) + 1;
$("#my-div").load('/path-to-files/' + i + '.php'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T20:49:21.297

您不能仅使用 JavaScript（jQuery 是 JavaScript）从目录中获取文件列表，它必须从服务器处理。您可以请求一个服务器文件，然后从目录中返回随机文件的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T20:49:29.580

您需要发出服务器请求以获取可能文件的数组。这是在不遵守命名约定或一组文件列表的情况下执行此操作的唯一方法。

# c# - 7 秒的 EF 启动时间，即使对于微小的 DbContext

> ID：12572623
> 
> 赞同：11
> 
> 时间：2012-09-24T20:43:58.740
> 
> 标签：c#, performance, linq, entity-framework, linq-to-entities

我正在尝试减少基于 EF 的应用程序的启动时间，但我发现即使对于单实体上下文，我也无法将初始读取所需的时间减少到 7 秒以下。特别奇怪的是，这一次不是特定于上下文类型的。

谁能解释导致这些缓慢时间的原因和/或我如何让事情运行得更快？

这是完整的示例代码：

在我的数据库中，我有一个名为 se_stores 的表，其中包含一个主键列 AptId：

```
 // a sample entity class
public class Apartment
{
    public int AptId { get; set; }
}

    // two identical DbContexts        

public class MyDbContext1 : DbContext
{
    public MyDbContext1(string connectionString) : base(connectionString)
    {           
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        Database.SetInitializer<MyDbContext1>(null);

        var config = new EntityTypeConfiguration<Apartment>();
        config.HasKey(a => a.AptId).ToTable("se_stores");
        modelBuilder.Configurations.Add(config);

        base.OnModelCreating(modelBuilder);
    }
}

public class MyDbContext2 : DbContext
{
    public MyDbContext2(string connectionString)
        : base(connectionString)
    {
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        Database.SetInitializer<MyDbContext2>(null);

        var config = new EntityTypeConfiguration<Apartment>();
        config.HasKey(a => a.AptId).ToTable("apartments");
        modelBuilder.Configurations.Add(config);

        base.OnModelCreating(modelBuilder);
    }
}

    // finally, I run this code using NUnit:

var start = DateTime.Now;
var apt1 = new MyDbContext1(connectionString).Set<Apartment>().FirstOrDefault();
var t1 = DateTime.Now - start;
start = DateTime.Now;
var apt2 = new MyDbContext2(connectionString).Set<Apartment>().FirstOrDefault();
var t2 = DateTime.Now - start;
Console.WriteLine(t1.TotalSeconds + ", " + t2.TotalSeconds); 
```

它可靠地打印如下内容：7.5277527, 0.060006。当我将测试切换为首先使用 MyDbContext2 时，我得到了相同的结果（因此无论哪个 DbContext 先初始化都会发生这种情况）。我还尝试使用 EF 电动工具预生成视图。这将第一个上下文的时间减少到大约 6.8 秒，因此只是一个小小的胜利。

我知道 DateTime.Now 是一种糟糕的分析方法，但是在使用 dotTrace 时这些结果仍然存在。我也知道第一次运行一些代码会调用 JITing 成本，但是 7 秒似乎太高了，不能归因于此。

我在 VS 2010 中使用 EF 4.3.1 和 .NET 4。

在此先感谢您的帮助！

编辑：有人建议打开 SQL 连接可能会导致问题。

1.  我首先尝试使用原始 SqlConnection 运行随机查询并使用相同的连接字符串创建命令。这需要 1 秒，并且不影响 DbContext 初始化的时间。
2.  然后，我尝试使用连接字符串创建一个 SqlConnection 并将其传递给 DbContext 的接受连接的构造函数。我通过了 contextOwnsConnection=false。这对 DbContext 初始化时间也没有影响。
3.  最后，我尝试使用相同的凭据和连接字符串选项通过管理工作室进行连接。这几乎是瞬间的。
4.  在 dotTrace 配置文件中，它测量 SqlConnectionFactory.CreateConnection(connectionString) 耗时 0.7 秒，这与原始 SQL 时间一致。

编辑：我想知道延迟是每次连接还是一次。因此，我尝试让 MyDbContext1 和 MyDbContext2 连接到不同服务器上完全不同的数据库。无论首先连接到哪个数据库，这都没有区别：第一个 DbContext 的使用大约需要 7 秒，而第二个上下文的使用速度非常快。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T14:12:29.100

将您编写的代码放入自己的项目中后，我发现项目的平台目标对 EF 框架的启动时间有很大影响。

在针对 x64 平台时，我收到了与您类似的结果（第一个 DbContext 旋转 7 秒，第二个旋转 <1 秒）。以 x86 为目标时，第一个 DbContext 的启动时间减少了大约 4 秒，降至 3.34633 秒，而第二个 DbContext 所需的时间与 x64 情况相似。

我不确定为什么会发生这种情况，但它必须与实体框架如何在不同环境中初始化自身有关。[我在这里](https://stackoverflow.com/questions/12584628/entity-framework-spinup-much-slower-on-x64-vs-x86)发布了一个单独的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T22:36:26.507

根据一些评论，第二个运行如此之快的原因是连接管理器缓存了连接。这使我相信获得初始连接是问题所在。

要尝试的事情：

1.  更改连接字符串以使用数据库服务器的 IP 地址而不是其名称。

2.  使用完全相同的凭据和机制使用 SQL Management Studio 连接到数据库服务器。从需要 7 秒的机器上执行此操作。假设这需要一段时间，请调查以查看正在使用的协议并确保您想要的协议是列表中的第一个。

3.  在你的机器上安装一个网络分析仪，观察它的作用。

# angularjs - AngularJS 不断调用 $http

> ID：12572629
> 
> 赞同：1
> 
> 时间：2012-09-24T20:44:17.297
> 
> 标签：angularjs

我对 AngularJS 非常陌生（4 小时新），我正在尝试让 http 调用正常工作，但是看起来它正在发生的事情是 Angular 一遍又一遍地调用 http get 请求。我确定这是因为我的方法是错误的。这就是我想要做的。

我的控制器文件的片段**网络服务工作正常。我在 node.js 应用程序中运行它**

```
 function peopleController($scope,$http){
  $scope.getPeople = function(){
    $scope.revar = {};
    $http.get('/location/-79.18925/43.77596').
    success(function(data){
      console.log(data);
      $scope.revar = data;
    });
  }
} 
```

我的 list.html 文件

```
 <div ng-controller="busController">
        <div class="blueitem">{{getPeople()}}</div>
   </div> 
```

**我知道我不会看到结果，因为我没有在我的 getPeople 方法中返回任何内容，** 但我想查看我在 chrome 中看到的结果的日志输出，但是由于 angular 不断调用该 url 方法，所以我看到了一百万次并且还在计数再次。相反，它一直在打击。

如何获得角度以仅返回一次响应？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T21:03:53.653

您遇到的问题与 AngularJS 的工作方式以及 - 更准确地说 - 它如何决定模板需要刷新有关。基本上，AngularJS 会根据模型的脏检查来刷新模板。不想在这里讨论太多细节，因为有一篇很好的文章解释了它（[数据绑定在 AngularJS 中如何工作？](https://stackoverflow.com/questions/9682092/databinding-in-angularjs)），但简而言之，它会随着模型的变化而不断变化，直到它稳定（模型中没有更多的变化可以被观察）。`getPeople()`在您的情况下，模型永远不会稳定，因为每次调用该方法都会获得新对象。

解决这个问题的正确方法是（在可能的解决方案中）：

```
function peopleController($scope,$http){
    $http.get('/location/-79.18925/43.77596').
    success(function(data){
      $scope.people = data;
    });      
} 
```

然后，在您的模板中：

```
 <div ng-controller="busController">
        <div class="blueitem">{{people}}</div>
   </div> 
```

提到的模板将在数据到达时自动刷新。

再一次，这只是一种可能的解决方案，所以我建议遵循 AngularJS 教程来更好地了解可能的情况：http: [//docs.angularjs.org/tutorial/](http://docs.angularjs.org/tutorial/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T21:08:26.330

几件事。欢迎使用 angularjs，它是一个很棒的框架。您可能不应该从网页调用 getPeople。反而，

```
 function peopleController($scope,$http){
  var getPeople = function(){
    $scope.revar = {};
    $http.get('/location/-79.18925/43.77596').
    success(function(data){
      console.log(data);
      $scope.revar = data;
    });
  }
  getPeople();
} 
```

然后在 html

```
<div ng-controller="busController">
        <div class="blueitem">{{revar|json}}</div>
</div> 
```

另外，我建议您查看 ngResource，特别是如果您正在执行 CRUD 类型的应用程序。

希望这可以帮助

- 担

# php - 使用新行作为分隔符解析 CSV

> ID：12572630
> 
> 赞同：0
> 
> 时间：2012-09-24T20:44:19.840
> 
> 标签：php, arrays, excel, parsing, csv

我在从 Excel 导出的 CSV 文件中有以下内容

```
Lol,Man,11
Hello,World,11
My,Name,12
Is,Epic,11 
```

我将如何使用 PHP 将其解析为数组？

目前我正在使用

```
$line = file_get_contents("Day1.CSV");

$parsed = str_getcsv(
    $line, # Input line
    ',',   # Delimiter
    '"',   # Enclosure
    '//'   # Escape char
); 
```

但这行不通。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:56:55.267

您可以使用[fgetcsv](http://php.net/manual/en/function.fgetcsv.php)（手册页中的示例）

```
if (($handle = fopen("Day1.CSV", "r")) !== FALSE) 
{
    while (($data = fgetcsv($handle, 1000, ",", "//")) !== FALSE) 
    {
        // do something with the data here
        echo $data[0] . " - ". $data[1] . " - ". $data[2] . "</br>" ;
    }
    fclose($handle);
} 
```

或者，在您的实施中，您可以这样做：

```
$contents = file_get_contents("Day1.CSV");

$data = str_getcsv("\n");

foreach ($data as $row)
{
    $output = str_getcsv($row, ',', '"', '//');

    // do something with the data here
    echo $output[0] . " - " $output[1] . " - " $output[2] . "\n";
} 
```

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:56:32.453

```
<?php
$str="Lol,Man,11";

$out=str_getcsv($str,",",'','');

print_r($out); //Array ( [0] => Lol [1] => Man [2] => 11 ) 
```

或者

```
$out=explode(",",$str); 
```

# debugging - 通过 gdb 用户定义的命令返回一个值

> ID：12572631
> 
> 赞同：6
> 
> 时间：2012-09-24T20:44:20.363
> 
> 标签：debugging, gdb, core-file

我正在使用核心文件进行调试，所以我没有运行任何东西的活动进程。

我正在使用 gdb 用户定义的命令来检查核心文件中的一堆数据，并尝试使用用户定义的命令来简化该过程。

但是，我找不到使用户定义的命令返回可用于其他命令的值的方法。

例如：（
*注意“return”行的注释）*

```
define dump_linked_list
    set $node = global_list->head
    set $count = 1
    while $node != 0
        printf "%p -->", $node
        set $node = $node->next
        set $count = $count + 1
    end
    return $count  ## GDB doesn't understand this return
end 
```

理想情况下，我的 dump_linked_list 命令将返回在列表中找到的节点数，以便可以在另一个定义的命令中使用它：

```
define higher_function
    set $total_nodes = dump_linked_list
    printf "Total Nodes is %d\n", $total_nodes
end 
```

**在 gdb 命令中是否可能发生这样的事情？**

我觉得一定是这样，但我一直在搜索文档，但找不到提及它或任何示例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T10:04:57.140

我发现 gdb 似乎是按名称传递的，它可以用来传回一个返回值。比仅使用单个全局变量更灵活。

```
(gdb) define foo
Type commands for definition of "foo".
End with a line saying just "end".
>set $arg0 = 1
>end
(gdb) set $retval = 0
(gdb) p $retval
$3 = 0
(gdb) foo $retval
(gdb) p $retval
$4 = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T20:56:40.147

据我所知，GDB 没有这样的功能。您可以设置一个您知道的名称的变量并将其用作“返回”值。例如，总是像这样设置变量**retval**：

```
set $retval = <whatever value> 
```

然后，您所有新定义的函数都可以将其用作先前调用函数的返回值。我知道这只是解决方法，但它相对简单并且有效。

# java - 尽管满足条件，循环仍继续

> ID：12572634
> 
> 赞同：2
> 
> 时间：2012-09-24T20:44:31.057
> 
> 标签：java, loops, while-loop

大家好，所以我一直在尝试为我的 CS 课编写一个非常简单的计数程序，但由于某种原因，它不断吐出“请输入一个数字（0 停止）：”提示并且似乎完全忽略while循环。如果满足while循环内部的条件，为什么即使输入0，while循环也不会停止？我过去做过 C#，但我对 Java 的警告不是很熟悉，所以如果 Java 不喜欢我做任何奇怪的事情，请告诉我。对于程序更详细的描述，它应该从用户那里读取负数和正数，分别输出负数和正数的总和，然后取平均值。（显然，下面只是有问题的一段代码。）

```
 Scanner scanner = new Scanner(System.in);
    double average;
    double numPositive=0.0;
    double numNegative=0.0;
    double input = 0.0;
    do 
    {
        System.out.print("Please enter a number (0 to stop): ");
            input = scanner.nextDouble();   
        if (input < 0.0)
        {
            numNegative += scanner.nextDouble();

        }
        else if (input > 0.0)
        {
            numPositive += scanner.nextDouble();

        }

    } while (Math.abs(input) > 1.0e-6);  // make the tolerance whatever you want. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T20:45:55.080

`input`在最初的分配之后你永远不会改变；循环将永远持续下去。我想你又忘记打电话`scanner.nextDouble()`了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T20:46:00.370

`input`最初检索它后，您不会接受。

您`scanner.nextDouble()`分配给`numNegative`和`numPositive`-`while`循环都不会检查这两者。

```
while (input != 0.0)
    {
        System.out.print("Please enter a number (0 to stop): ");
        input = scanner.nextDouble();

        if (input < 0.0)
        {
            numNegative += input;

        }
        else if (input > 0.0)
        {
            numPositive += input;

        }

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T20:48:12.553

您没有为`input`循环内的任何地方分配值。所以，初始值仍然存在，循环不会退出。

# cygwin - 强制 rsync 以源文件参数中列出的顺序传输文件

> ID：12572643
> 
> 赞同：5
> 
> 时间：2012-09-24T20:45:25.383
> 
> 标签：cygwin, rsync

假设您有一个文件列表`filelist.txt`并像这样调用 rynsc：

```
$rsync --files-from=filelist.txt /path/to/source /path/to/destination 
```

Rsync`filelist.txt`在处理文件之前对文件进行排序。根据`man`页面，这是为了让传输更有效率。

我该如何关闭它？我有一个案例，我希望以非常特定的顺序传输文件，我不在乎它是否会降低传输效率。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-01T11:34:41.187

```
cat filelist.txt | xargs -n1 -I{} rsync --progress "/path-from/{}" "/path-to/{}" 
```

这应该一次通过 xargs 将每个文件传递给 rsync 一行。

你可以更换

```
cat xxx.txt 
```

和

```
ls -t | xargs .... 
```

若你宁可。

确实 rsync 烦人地不使用您在列表中指定的顺序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-07T19:58:08.080

看起来有两个选择：

*   一次做一个。
*   修补`rsync`

希望有更好的答案。它会仔细查看源代码以准确揭示它在做什么，但它看起来是按字母顺序排列的。

# javascript - 区分 click 与 mousedown/mouseup

> ID：12572644
> 
> 赞同：27
> 
> 时间：2012-09-24T20:45:36.837
> 
> 标签：javascript, jquery

我已经阅读了与这种情况有关的几个关于 stackoverflow 的答案，但没有一个解决方案有效。

我正在尝试根据用户是单击一个元素还是使用 jQuery 将鼠标按住该元素来做不同的事情。

有可能做到这一点吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-24T20:48:18.700

onMouseDown 将在按下左或右（或中间）时触发。同样，onMouseUp 将在任何按钮被释放时触发。onMouseDown 即使在鼠标单击对象然后移开它时也会触发，而 onMouseUp 将在您单击并按住其他位置的按钮然后在对象上方释放时触发。

仅当在同一对象上按下并释放鼠标左键时才会触发 onClick。如果您关心顺序，如果同一个对象设置了所有 3 个事件，它是 onMouseDown、onMouseUp 和 onClick。每个偶数应该只触发一次。

细节：

*   [http://api.jquery.com/click/](http://api.jquery.com/click/)
*   [http://api.jquery.com/mouseup/](http://api.jquery.com/mouseup/)
*   [http://api.jquery.com/mousedown/](http://api.jquery.com/mousedown/)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-10-17T16:04:42.513

这是一种方法

1.  将变量设置为 true
2.  创建一个函数，在调用时将其设置为 false
3.  有一个计时器 ( `setTimeout()`) 在 mousedown() 上开始倒计时
4.  在 mouseup 上，清除超时，并检查变量是 true 还是 false
5.  如果它是假的，调用你想在点击时发生的函数
6.  在任何情况下，将变量设置回 true

这将做你想要的。这是一个 jsfiddle，展示了它是如何工作的：http: [//jsfiddle.net/zRr4s/3/](http://jsfiddle.net/zRr4s/3/)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-02-11T20:44:42.517

这是一个同时支持点击和保持的解决方案：

```
// Timeout, started on mousedown, triggers the beginning of a hold
var holdStarter = null;
// Milliseconds to wait before recognizing a hold
var holdDelay = 500;
// Indicates the user is currently holding the mouse down
var holdActive = false;
// MouseDown
function onMouseDown(){
    // Do not take any immediate action - just set the holdStarter
    //  to wait for the predetermined delay, and then begin a hold
    holdStarter = setTimeout(function() {
        holdStarter = null;
        holdActive = true;
        // begin hold-only operation here, if desired
    }, holdDelay);
}
// MouseUp
function onMouseUp(){
    // If the mouse is released immediately (i.e., a click), before the
    //  holdStarter runs, then cancel the holdStarter and do the click
    if (holdStarter) {
        clearTimeout(holdStarter);
        // run click-only operation here
    }
    // Otherwise, if the mouse was being held, end the hold
    else if (holdActive) {
        holdActive = false;
        // end hold-only operation here, if desired
    }
}
// Optional add-on: if mouse moves out, then release hold
function onMouseOut(){
    onMouseUp();
} 
```

这是一个演示：http: [//jsfiddle.net/M7hT8/1/](http://jsfiddle.net/M7hT8/1/)

最初基于 daveyfaherty 的解决方案。我知道这个问题来自不久前，但我正在为通过搜索找到这个问题的任何人分享我的解决方案。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-09-16T15:25:16.723

```
//last mouse coordinate
var mouseX = 0;
//epsilon interval
var mouseEps = 10;

function mouseDownHandler(e) {
    e.preventDefault();
    mouseX = e.clientX;
};

function mouseUpHandler(e) {
    e.preventDefault();
    if (Math.abs((mouseX - e.clientX)) < mouseEps) {
        clickHandler(e);
    }
};

function clickHandler(e) {
}; 
```

# iphone - 如何在不关闭键盘的情况下隐藏 inputAccessoryView

> ID：12572649
> 
> 赞同：12
> 
> 时间：2012-09-24T20:45:54.807
> 
> 标签：iphone, ios, uitoolbar, uikeyboard

我在 textView 的 inputAccessoryView 属性中使用工具栏。当键盘显示时，它会按预期显示工具栏。当设备旋转时，我想删除工具栏。我试过了：

```
 myTextView.inputAccessoryView.hidden = !layoutIsPortrait; 
```

这确实隐藏了工具栏，但留下了较高键盘的轮廓。键盘的大小显然仍然适合工具栏。它看起来很糟糕，并且会干扰底层响应者的触摸事件。

```
 myTextView.inputAccessoryView = nil; 
```

仅当我辞职FirstResponder，然后再次成为FirstResponder 时才有效。这是不可接受的。我失去了 textView 的光标位置和内容，键盘闪烁并返回。

```
[myTextView.inputAccessoryView removefromSuperview]; 
```

什么都不做。我在 iVar 中保存了对工具栏的引用并解决了这个问题，

```
[myIvarReference removeFromSuperview]; 
```

这行得通，但键盘的较高轮廓再次隐约可见。这一次它不干涉其他观点的接触。所以现在这是一个可行的解决方案，但在视觉上是不可接受的。我还能尝试随意显示和隐藏 inputAccessoryView 吗？

屏幕截图 - 键盘上方的微弱线条是已删除工具栏的残余

![移除了工具栏的旋转键盘](../Images/936d91f676e75317ba2bf0763b365121.png)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-30T01:18:52.093

```
myTextView.inputAccessoryView = nil;
[myTextView reloadInputViews]; 
```

这将从视图中删除工具栏并重新加载视图。这样你就不需要调用 resignFirstResponder 和 becomeFirstResponder。此外，这仍将保留您的光标位置和内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-29T23:39:27.953

上面的答案都不适合我，reloadInputViews 导致了奇怪的问题。最终，我通过以下方式让它显示和隐藏并通过以下方式进行触摸：

把它藏起来：

```
[textview.inputAccessoryView setHidden:YES];
[textview.inputAccessoryView setUserInteractionEnabled:NO]; 
```

展示下：

```
[textview.inputAccessoryView setHidden:NO];
[textview.inputAccessoryView setUserInteractionEnabled:YES]; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-03T21:17:40.670

对我来说，Eric 的解决方案从未真正重置框架或触摸区域。大概这是苹果处理事情的一个错误。但是，我找到了一种解决方法，可以为我解决问题。当我设置一个没有框架的新 inputAccessoryView 时，reloadInputViews 工作正常：

```
myTextView.inputAccessoryView = [[UIView alloc] initWithFrame: CGRectZero];
[myTextView reloadInputViews]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-16T15:50:28.053

Xamarin 代码是

```
Control.InputAccessoryView = new UIView(CGRect.Empty);
Control.ReloadInputViews(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-05T10:37:29.580

从来没有找到改变键盘框架的方法。最终决定放弃 inputAccessoryView，将我的工具栏作为子视图直接添加到视图中，并直接与键盘一起为其设置动画。这使两者保持独立，因此不再排队。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-05T17:30:16.627

奇怪的是，这些方法都不适用于我的情况。

我有一个搜索控制器，如果选择了特定的搜索范围，它会弹出一个标准的 Apple iOS 键盘，如果选择了其他范围，我有一个带有集合视图的自定义键盘视图作为输入字段。在这两种情况下，当显示输入视图时，屏幕上都会绘制一个不需要的附件视图。

所以，

```
self.mySearch.searchbar.inputAccessoryView = nil // did not work

[self.mySearch.searhbar.inputAccessoryView setHidden:YES] // did not work

self.mySearch.inputAccessoryView = nil  // did not work

self.mySearch.searchbar.inputAccessoryView.frame = CGRectZero //did not work

[self.mySearch reloadInputViews] 
```

及其各种组合等。

起作用的是从附件视图中删除单个附件项目：

```
 // insert after assignments of mySearch delegates
UITextInputAssistantItem *junk = [self.mySearch inputAssistantItem];
junk.leadingBarButtonGroups = @[];
junk.trailingBarButtonGroups = @[]; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-12-29T14:29:18.523

```
mTextView.inputAccessoryView = [[UIView alloc] initWithFrame:CGRectZero];
[mTextView reloadInputViews]; 
```

对我有用，设置`inputAccessoryView`为`nil`不起作用，我只是不知道为什么。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-27T05:24:20.957

根据 Eric Appel 的回答：

```
myTextView.inputAccessoryView = nil;
[myTextView reloadInputViews];
hideInputAccessoryView = YES; 
```

进一步修改：

```
- (BOOL)canBecomeFirstResponder
{
    BOOL showInputAccessoryView = YES;

    if (hideInputAccessoryView)
        showInputAccessoryView = NO;

    return showInputAccessoryView;
} 
```

这应该隐藏 InputAccessoryView 即使在键盘被退出时也是如此。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-10T07:58:32.463

**斯威夫特 5**

我用这个：

```
view.autocorrectionType = .no 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-08-31T04:27:26.500

Xcode 11.6 和 iOS 13.6

当键盘出现时，我试图添加两个工具栏。

首先，我添加了`viewDidLoad`

`self.textView.inputAccessoryView = self.addDefaultToolbar()`

当键盘出现时，我`text`在 UItextView 中选择了一个并尝试添加第二个工具栏选项

这是未`Toolbar`在选择的`text`.

```
func textViewDidChangeSelection(_ textView: UITextView) {
    if let selectedRange = textView.selectedTextRange{
        let selectedText = textView.text(in: selectedRange)
        if selectedText != nil && selectedText!.count > 0{
            print("selectedText - \(selectedText!)")

            if self.defaultToolBar != nil{
                self.defaultToolBar?.removeFromSuperview()
                self.defaultToolBar = nil
            }

            self.textView.inputAccessoryView = self.addSelectionToolbar()
        }
        else{
            print("not selectedText - \(selectedText!)")

            if self.selectionToolBar != nil{
                self.selectionToolBar?.removeFromSuperview()
                self.selectionToolBar = nil
            }

            self.textView.inputAccessoryView = self.addDefaultToolbar()

        }
    }
} 
```

添加后`self.textView.reloadInputViews()`，我可以看到更改第二个工具栏，反之亦然。

工作代码。

```
func textViewDidChangeSelection(_ textView: UITextView) {
    if let selectedRange = textView.selectedTextRange{
        let selectedText = textView.text(in: selectedRange)
        if selectedText != nil && selectedText!.count > 0{
            print("selectedText - \(selectedText!)")

            if self.defaultToolBar != nil{
                self.defaultToolBar?.removeFromSuperview()
                self.defaultToolBar = nil
            }

            self.textView.inputAccessoryView = self.addSelectionToolbar()
            self.textView.reloadInputViews()
        }
        else{
            print("not selectedText - \(selectedText!)")

            if self.selectionToolBar != nil{
                self.selectionToolBar?.removeFromSuperview()
                self.selectionToolBar = nil
            }

            self.textView.inputAccessoryView = self.addDefaultToolbar()
            self.textView.reloadInputViews()

        }
    }
} 
```

# html - 页脚中的 3 列 - 右侧对齐错误

> ID：12572652
> 
> 赞同：0
> 
> 时间：2012-09-24T20:46:04.410
> 
> 标签：html, css

为了将我的页脚分成 3 列，我必须在第三列上使用负边距。
我相信还有另一种不需要强制此列到位的方法。

**HTML：**

```
<footer>
    <div class="fLeft">
        <p>Link</p>
        <p>Link</p>
        <p>Link</p>
        <p>Link</p>
    </div>
    <div class="fCenter">
        <p>Link</p>
        <p>Link</p>
        <p>Link</p>
        <p>Link</p>
    </div>
    <div class="fRight">
        <p>Link</p>
        <p>Link</p>
        <p>Link</p>
        <p>Link</p>
    </div>
</footer> 
```

**CSS：**

```
footer{
    background:#2c2c2c;
    height:200px;
    border-radius: 25px 25px 0 0;
    margin:40px 20px 0 20px;
    color:#FFFFFF;
}

.fLeft{
    margin:10px 0 0 10px;
    float:left;
    width: 33.3%;
    text-align:center;
}

.fCenter{
    margin:10px 0 0 0;
    float:left;
    width: 33.3%;
    text-align:center;
}

.fRight{
    margin:-160px 10px 0 0;
    float:right;
    width: 33.3%;
    text-align:center;
} 
```

**现场演示：[jsFiddle](http://jsfiddle.net/EbvJV/1/)**

你可以看到我得到的错误，但`-160px`对我来说是一个修复，并且`-80px`是小提琴上的修复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:59:22.177

这是因为您将右列推到下一行。每列的宽度为 33.3%，但您也有 10px 的左边距`.fLeft`和右边距`.fRight`，导致所有宽度加在一起超过您想要容纳所有内容的 100%。如果删除这两个边距您将看到列正确排列。如果你想保持这些边距，你将不得不改变你的宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T20:59:32.267

这是你想要的：

[http://jsfiddle.net/t5Xhj/](http://jsfiddle.net/t5Xhj/)

你不应该使用边距

```
footer{
background:#2c2c2c;
height:200px;
border-radius: 25px 25px 0 0;
margin:40px 20px 0 20px;
color:#FFFFFF;
}

.fLeft{
float:left;
width: 33.3%;
text-align:center;
}

.fCenter{
float:left;
width: 33.3%;
text-align:center;
}

.fRight{
 float:right;
 width: 33.3%;
 text-align:center;
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:38:27.323

您可以将 CSS 修改为更像以下内容以获得您想要的效果。

**[jsFiddle 示例](http://jsfiddle.net/j08691/EbvJV/2/)**

**CSS**

```
footer{
background:#2c2c2c;
height:200px;
border-radius: 25px 25px 0 0;
margin:40px 20px 0 20px;
color:#FFFFFF;
}

.fLeft{
float:left;
width: 33%;
text-align:center;
}

.fCenter{
width: 33%;
text-align:center;
    float:left;
}

.fRight{
float:right;
width: 33%;
text-align:center;
}​ 
```

# three.js - Three.js 鼠标悬停网格与射线相交，无反应

> ID：12572653
> 
> 赞同：1
> 
> 时间：2012-09-24T20:46:08.933
> 
> 标签：three.js, mesh, plane, line-intersection

我正在尝试建立一个在单个 WebGL 元素中运行的网站。我试图让它告诉鼠标何时悬停在一个物体上。我正在使用几个带有透明纹理的平面作为链接，但它根本不会在任何交叉点上拾取。它完全没有任何作用。我什至添加了一个立方体并使用了与交互式立方体示例 (http://mrdoob.github.com/three.js/examples/webgl_interactive_cubes.html) 相同的代码，但它完全没有任何作用。没有改变颜色，绝对没有。我已经在网上浏览并尝试了大约 8 个与此相关的不同示例，但没有一个对我有用。

这是我的代码：

```
 <meta charset="utf-8">

    <style type="text/css">
        body {
            margin: 0px;
            overflow: hidden;
            background: #000000;
        }
        div {
            margin: 0px;
        }
    </style>

    </head>
    <div>
        <script src="http://www.html5canvastutorials.com/libraries/Three.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
        <script type="text/javascript">

            //Variable Declarations
            var camera, scene, renderer, aspect, projector;
            var INTERSECTED;
            var mouseX = 0, mouseY = 0;

            init();

            //Method Declarations
            function init() {
                aspect = window.innerWidth / window.innerHeight;
                //aspect = 1.25;
                //Sets the camera variable to a new Perspective Camera with a field of view of 45 degrees, an aspect ratio
                //of the window width divided by the window height, the near culling distance of 1 and the far culling distance of 2000
                camera = new THREE.PerspectiveCamera(45, aspect, 1, 2000);

                //Sets the height of the camera to 400
                camera.position.z = 700;

                //Sets a variable "lookat" to a new 3d vector with a position of 0, 0, 0, 
                //or the center of the scene/center of the menu plane
                var lookat = new THREE.Vector3(0, 0, 0);

                //Uses a function built in to every camera object to make it look at a given coordinate
                camera.lookAt(lookat);

                //Makes a new scene object to add everything to
                scene = new THREE.Scene();

                //Adds the camera object to the scene
                scene.add(camera);

                //Sets the renderer varialbe to a new WebGL renderer object
                //Change "WebGLRenderer" to "CanvasRenderer" to use canvas renderer instead
                renderer = new THREE.WebGLRenderer({antialias:true});
                //renderer.sortObjects = false;

                //Sets the size of the renderer object to the size of the browser's window
                //renderer.setSize(window.innerWidth, window.innerHeight);
                renderer.setSize(window.innerWidth, window.innerHeight);

                //Adds an event listener to the webpage that "listens" for mouse movements and when the mouse does move, it runs the 
                //"onMouseMove" function
                document.addEventListener('mousemove', onMouseMove, false);

                //Force canvas to stay proportional to window size
                window.addEventListener('resize', onWindowResize, false);

                document.addEventListener('mousedown', onDocumentMouseDown, false);

                //Sets the update frequency of the webpage in milliseconds
                setInterval(update, 1000/60);

                //Makes a variable "texture" and sets it to the returned value of the method "loadTexture" 
                //supplied by the THREE.js library
                var texture = THREE.ImageUtils.loadTexture('imgs/backgrounds.png');

                //Makes a variable "geometry" and sets it to a "PlaneGeometry" object with a width of 645 and a height of 300
                var geometry = new THREE.PlaneGeometry(645, 300);

                //Makes a variable "material" and sets it to a "MeshBasicMaterial" object with it's map set to
                //the "texture" object, it also makes it transparent
                var material = new THREE.MeshBasicMaterial({map: texture, transparent: true});

                //Makes a variable "plane" and sets it to a "Mesh" object with its geometry set to the "geometry" object
                //and it's material set to the "material" object
                var plane = new THREE.Mesh(geometry, material);

                //Background Texture
                var backgroundTexture = THREE.ImageUtils.loadTexture('imgs/gears.png');
                var backgroundGeo = new THREE.PlaneGeometry(3500, 2500);
                var backgroundMat = new THREE.MeshBasicMaterial({map: backgroundTexture});
                var backgroundPlane = new THREE.Mesh(backgroundGeo, backgroundMat);
                backgroundPlane.position.z = -1000;
                backgroundPlane.overdraw = true;

                //Home Button
                //Makes a "homeTexture" variable and sets it to the returned value of the makeTextTexture function when 
                //the text passed in is set to "Home", the width is set to 300, height of 150, font set to 80pt Arial, 
                //fillStyle set to white, textAlign set to center, textBaseLine set to middle, and the color of the 
                //background set to red = 0, green = 0, blue = 0 and alpha = 0
                var homeTexture = makeTextTexture("Home", 300, 150, '80pt Arial', 'white', "center", "middle", "rgba(0,0,0,0)");
                var homeGeom = new THREE.PlaneGeometry(50, 25);
                var homeMaterial = new THREE.MeshBasicMaterial({map: homeTexture, transparent: true});
                var homeTest = new THREE.Mesh(homeGeom, homeMaterial);
                homeTest.position.x -= 270;
                homeTest.position.y += 120;
                homeTest.position.z = 40;
                homeTest.castShadow = true;

                //Gallery Button
                var galleryTexture = makeTextTexture("Gallery", 340, 150, '80pt Arial', 'white', "center", "middle", "rgba(0,0,0,0)");
                var galleryGeom = new THREE.PlaneGeometry(50, 25);
                var galleryMaterial = new THREE.MeshBasicMaterial({map: galleryTexture, transparent: true});
                var galleryTest = new THREE.Mesh(galleryGeom, galleryMaterial);
                galleryTest.position.x -= 270; 
                galleryTest.position.y += 90;
                galleryTest.position.z = 40;
                galleryTest.castShadow = true;

                //The Team Button
                var theTeamTexture = makeTextTexture("Company", 510, 150, '80pt Arial', 'white', "center", "middle", "rgba(0,0,0,0)");
                var theTeamGeom = new THREE.PlaneGeometry(80, 25);
                var theTeamMaterial = new THREE.MeshBasicMaterial({map: theTeamTexture, transparent: true});
                var theTeamTest = new THREE.Mesh(theTeamGeom, theTeamMaterial);
                theTeamTest.position.x -= 260; 
                theTeamTest.position.y += 60;
                theTeamTest.position.z = 40;
                theTeamTest.castShadow = true;

                projector = new THREE.Projector();

                var cubeGeom = new THREE.CubeGeometry(20, 20, 20);
                var cubeMat = new THREE.MeshBasicMaterial( { color: 0xff0000 } );
                var cubeMesh = new THREE.Mesh(cubeGeom, cubeMat);
                cubeMesh.position.z = 15;

                //scene.add(cubeMesh);

                //Adds all of the previously created objects to the scene
                scene.add(plane);
                scene.add(backgroundPlane);
                scene.add(homeTest);
                scene.add(theTeamTest);
                scene.add(galleryTest);

                //Adds the renderer to the webpage
                document.body.appendChild(renderer.domElement);
            }

            function update() {
                camera.position.x = (mouseX - (window.innerWidth / 2)) * 0.1;

                camera.position.y = -((mouseY - (window.innerHeight / 2)) * 0.15);
                camera.lookAt(new THREE.Vector3(0, 0, 0));

                render();
            }

            function render() {
                renderer.render(scene, camera);
            }

            function onMouseMove(event) {
                mouseX = event.clientX;
                mouseY = event.clientY;
            }

            function onDocumentMouseDown(event) {
                event.preventDefault();

                var vector = new THREE.Vector3(
                    ( event.clientX / window.innerWidth ) * 2 - 1,
                  - ( event.clientY / window.innerHeight ) * 2 + 1,
                    0.5
                );
                projector.unprojectVector( vector, camera );

                var ray = new THREE.Ray( camera.position, 
                                         vector.subSelf( camera.position ).normalize() );

                var intersects = ray.intersectObjects( objects );

                if ( intersects.length > 0 ) {

                    intersects[ 0 ].object.materials[ 0 ].color.setHex( Math.random() * 0xffffff );
                }

            }

            function onWindowResize() {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            }

            function makeTextTexture(text, width, height, font, fillStyle, textAlign, textBaseline, backgroundColor)
            {
                //Makes a new canvas element
                var bitmap = document.createElement('canvas');

                //Gets its 2d css element
                var g = bitmap.getContext('2d');

                //Sets it's width and height
                bitmap.width = width;
                bitmap.height = height;

                //Takes "g", it's 2d css context and set's all of the following
                g.font = font;

                g.fillStyle = backgroundColor;
                g.fillRect(0, 0, width, height);

                g.textAlign = "center";
                g.textBaseline = "middle";
                g.fillStyle = fillStyle;
                g.fillText(text, width / 2, height / 2);

                //Rendered the contents of the canvas to a texture and then returns it
                var texture = new THREE.Texture(bitmap);
                texture.needsUpdate = true;

                return texture;
            }

        </script>
    </div>
</html> 
```

感谢任何可以提供帮助的人。我希望我能弄清楚自己发生了什么，似乎我使用 StackOverflow 来回答我的问题太多了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T21:22:34.543

您尚未声明变量`objects`。做这个：

```
var objects = []; 
```

然后填充它：

```
objects.push( plane );
objects.push( backgroundPlane ); 
```

现在，这条线将起作用：

```
var intersects = ray.intersectObjects( objects ); 
```

# exception - 位图问题 - 参数无效且内存不足

> ID：12572654
> 
> 赞同：-2
> 
> 时间：2012-09-24T20:46:13.753
> 
> 标签：exception, graphics, parameters, bitmap, out-of-memory

我有一个 vb.net 程序，它试图拍摄一堆图像并将分辨率更改为更小的尺寸。我的程序尝试使用下面的代码遍历所有图像以完成此操作。我已经发布了函数和调用它的按钮单击。它将通过 27 个图像正常，但在 28 日将出现“参数无效”错误。

```
 Friend Shared Function SetResolution(ByVal sourceImage As Image, ByVal resolution As Integer, ByVal strFullPath As String) As Image
    Try
        Dim reduction As Double = resolution / CInt(sourceImage.HorizontalResolution)
        Using newImage As New Bitmap(sourceImage.Width, sourceImage.Height, sourceImage.PixelFormat)
            newImage.SetResolution(resolution, resolution)
            Dim outImage As New Bitmap(sourceImage, CInt(sourceImage.Width * reduction), CInt(sourceImage.Height * reduction))
            Using g As Graphics = Graphics.FromImage(newImage)
                g.InterpolationMode = Drawing2D.InterpolationMode.HighQualityBicubic
                g.DrawImage(outImage, 0, 0)
                g.Dispose()

            End Using

            newImage.Dispose()

            Return outImage
        End Using
    Catch ex As Exception
        MsgBox("An error occurred with the SetResolution function - " & ex.Message)

    End Try

End Function

 Private Sub btnSaveImages_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSaveImages.Click

    Dim S As String
    Dim Box As MsgBoxResult = MsgBox("Any previous images saved to this location will be overwritten.  Are you sure you want to save these images?", MsgBoxStyle.YesNo)
    Dim strFolderPath As String = ""
    Dim strFolderReportPath As String = txtBrowse.Text & "\Report"

    'Try

    'the Report folder may not exist.  Create it if needed.
    If Not Directory.Exists(strFolderReportPath) Then
        Directory.CreateDirectory(strFolderReportPath)

    Else
        'if it does exist then we need to either delete the folder or clean out all the files.
        Dim downloadedMessageInfo As System.IO.DirectoryInfo = New DirectoryInfo(strFolderReportPath)

        For Each file As FileInfo In downloadedMessageInfo.GetFiles()
            file.Delete()
        Next
        For Each dir As DirectoryInfo In downloadedMessageInfo.GetDirectories()
            dir.Delete(True)
        Next

    End If

    If Box = MsgBoxResult.Yes Then

        If lstSelectedImages.Items.Count <> 0 Then
            For Each S In lstSelectedImages.Items
                'MessageBox.Show(S)

                Dim image1 As Image = Image.FromFile(S)
                Dim strFilePath As String = Path.GetDirectoryName(S)
                strFolderPath = Path.GetDirectoryName(S)
                Dim strFileName As String = Path.GetFileName(S)
                Dim strNewFolder As String = strFilePath & "\Report\"

                strFileName = strFileName.Replace(".", "-Report.")

                Dim strFullPath As String = strFilePath & "\Report\" & strFileName

                image1 = SetResolution(image1, 50, strFilePath & "\" & Path.GetFileName(S))

                'the Report folder may not exist.  Create it if needed
                If Not Directory.Exists(strNewFolder) Then
                    Directory.CreateDirectory(strNewFolder)
                End If

                image1.Save(strFullPath, System.Drawing.Imaging.ImageFormat.Jpeg)
                image1.Dispose()
                image1 = Nothing

            Next

            Dim di As New DirectoryInfo(strFolderReportPath)

            'PopulateReportViewer(lstSelectedImages)
            PopulateReportViewerByDir(di)

            lblImageFolderLocation.Text = "Image Location: " & strFolderReportPath

            MsgBox("Images saved to " & strFolderReportPath)

        Else

            MsgBox("Please select images to be saved into the Selected Images list box", MsgBoxStyle.Information)

        End If

    Else

    End If

    tbSelectCompressImages.TabPages.Add(TabPage2)

    tbSelectCompressImages.SelectedIndex = 1

    'Catch ex As Exception
    '    MsgBox("An error occurred with the Save Images button - " & ex.Message)
    'End Try

End Sub 
```

所以，我对此感到非常困惑，并决定对位图的创建方式进行一些小改动。我能够再次保存 28 张图像，但这次收到 Graphics.FromImage 行的内存不足错误。

```
 Dim newimage As Bitmap = DirectCast(Image.FromFile(strPath), Bitmap) 
```

有谁知道为什么会发生这种情况，看看我的代码。或者，是否有代码可以让我设置图像的分辨率，从而使内存标记更小？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:37:15.993

> 但是我们看不到你用 sourceImage 和 outImage 做了什么。

```
 image1 = SetResolution(image1, 50, strFilePath & "\" & Path.GetFileName(S)) 
```

您正在使用此语句**重新分配**image1 变量。问题是，您从未处理过原始 image1。这也是您传递路径名的主要猜测，该方法根本不使用它。因此，不会忘记处理的更理智的代码应该如下所示：

```
 Dim newImage = SetResolution(image1, 50)
   image1.Dispose()
   image1 = newImage 
```

# jquery - 插入内容为空的标签 jQuery中的标签

> ID：12572661
> 
> 赞同：3
> 
> 时间：2012-09-24T20:46:45.227
> 
> 标签：jquery

原始 HTML：

```
<div class = "a">
  <div class="firstNumber">
     <span class="spanClass">4</span>
  </div>

  <div class="secondNumber"> </div>
</div>

<div class = "b">
     ..."firstNumber" div tag repeats here...
     ..."secondNumber" div tag repeats here too but might contain content...

</div> 
```

我使用以下代码检查“secondNumber” div 标签是否为空。如果是，那么我想在“secondNumber”div 标签内添加用具有相同“spanClass”名称的 span 标签包裹的“0”。但它不工作...

```
<script>
    jQuery(function ($) {
        if ($.trim($('.secondNumber').text()).length==0){
             $(".secondNumber").wrapInner("<span class="spanClass">0</span>"); 

        };
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:56:02.347

尝试这个：

```
$('.secondNumber').each(function(i, el) {

   if($(this).find('.spanClass').length == 0) {

        $(this).html('<span class="spanClass">0</span>');

   }

}); 
```

**编辑**

```
$(function() {
    $('.secondNumber').each(function(i, el) {

       if($(this).find('.spanClass').length == 0) {

            $(this).html('<span class="spanClass">0</span>');

       }

    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T20:49:35.393

当您知道内容为空时，为什么要使用 wrapInner？为什么不：

```
$(".secondNumber").html('<span class="spanClass">0</span>'); 
```

编辑：

此外，看起来你的问题真的不是 wrapInner （虽然我仍然认为 .html() 更好），而是你的引用妨碍了你。看看我的例子。我在外面有单引号。如果您不转义内部引号，您有两组双引号将相互争用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T20:52:27.547

您的代码中存在语法错误，您应该对类属性使用单引号。

```
jQuery(function () {
    var $second = $('.secondNumber'); // caching the object
    if ( $.trim($second.text()).length == 0 ){
        $second.wrapInner("<span class='spanClass'>0</span>"); // or $second.append("...")
                              //  -----^
    };
}); 
```

[http://jsfiddle.net/MKE4T/](http://jsfiddle.net/MKE4T/)

# javascript - 手动更新时如何刷新数据表jquery

> ID：12572662
> 
> 赞同：1
> 
> 时间：2012-09-24T20:46:44.853
> 
> 标签：javascript, jquery, jquery-plugins

当您使用 jquery.tablesorter 并手动更新`table`html 时，例如，将`tr`元素附加到正文

```
$("table tbody").append("<tr><td class='center'>value1</td><td>value2</td></tr>"); 
```

你可以打电话

```
$('table').trigger("update"); 
```

一切正常，现在，我被要求使用 jquery.datatables，我正在尝试做同样的事情但没有结果，我正在考虑使用该`fnAddData`函数，但是，如果需要一个 css 类怎么办在`td`上面示例中的样式中？？，存在`DataTables`类似更新的东西`tablesorter`？？

在这里需要一些帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T23:10:47.613

经过大量测试，这是我尝试做的最终解决方案，首先，将 html 附加到表中，然后再次`tbody`调用，这正是我想要的`fnDestroy``dataTable`

```
var a = $("table").dataTable();
$("table tbody").append("<tr><td class='center'>value1</td><td>value2</td></tr>");
a.fnDestroy();
a.dataTable(); 
```

希望它在未来帮助别人

# c# - 包含 guid 的结构上的 Marshal.SizeOf 会提供额外的字节

> ID：12572666
> 
> 赞同：11
> 
> 时间：2012-09-24T20:47:03.323
> 
> 标签：c#, struct, size, marshalling, guid

我有几个具有顺序布局的结构：

```
struct S1
{
  Guid id;
}

struct S2 
{
  Guid id;
  short s;
}

struct S3 
{
  Guid id;
  short s;
  short t;
} 
```

调用`Marshal.SizeOf`上述结构类型，我得到：

```
Size:
S1 = 16, as expected.
S2 = 20, copied an instance to a byte array, it only occupies first 18 bytes.
S3 = 20. 
```

我的问题是为什么 S2 的大小是 20 而不是 18。这个问题只有`Guid`在结构中才会出现。

抱歉，无法从 msdn 找到任何有用的信息。我知道`Marshal.SizeOf`给出了该类型将在内存中占用的空间大小，但我想知道为什么它需要 2 个额外的字节来使大小成为 4 的倍数。

我怎样才能避免这个“问题”？

非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T21:24:57.170

这是因为隐含的 [StructLayout] 附加到结构，**Pack**字段是重要的。它规定了结构成员在编组后如何对齐。Pack 的默认值为 8。这表示任何小于或等于 8 字节大小的成员都是对齐的。换句话说，short 将与 2 的倍数、int 与 4、long 或 double 与 8 的偏移量对齐。

关键是在创建结构数组时对齐应该仍然有效。用一个更简单的例子更容易演示：

```
using System;
using System.Runtime.InteropServices;

class Program {
    static void Main(string[] args) {
        Console.WriteLine(Marshal.SizeOf(typeof(Example)));
        Console.ReadLine();
    }
}
struct Example {
    public int a;
    public short b;
} 
```

输出：8

该`a`成员强制增加大小，将两个额外的填充字节添加到结构中，以确保当在数组中使用结构时，int 仍然与 4 的倍数对齐。您可以通过应用属性来更改结果：

```
[StructLayout(LayoutKind.Sequential, Pack = 2)]
struct Example {
    public int a;
    public short b;
} 
```

输出：6

现在`a`，当在数组中使用结构时，成员将不对齐。

回到 Guid，您无法从声明中看到它，但它在内部由许多成员组成。第一个是命名的私有字段`_a`，它是一个 int。因此，Guid 需要 4 字节对齐。因此，当在数组中使用结构时，需要 2 个额外的填充字节才能正确对齐。您需要在 S2 上使用 Pack=1 或 Pack=2 才能获得 18 个字节。

[更多关于结构的背景知识以及在此答案](https://stackoverflow.com/a/3362736/17034)中在 .NET 中处理它们的特殊方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T21:24:16.177

我相信这是因为某些项目必须在内存中对齐到 4 字节（或 8 字节）边界。因此，该结构是这个大小的倍数，以便结构的数组都将正确对齐。在包含字符串的 64 位机器上，强制它是 8 个字节的倍数；即使在 64 位上，GUID 似乎也只需要 4 个字节的倍数。如果包含 GUID 的结构的大小不是 4 字节的倍数，则某些 GUID 将不在这些结构数组中的 4 字节边界上。我认为您无法避免“问题”-为什么会出现问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T21:10:44.150

我没有看到您[`StructLayoutAttribute`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.structlayoutattribute.aspx)在结构定义上使用 a 。因此，您将不知道它们是如何“布局”的。你怎么知道他们有顺序布局？

一些来源：[sizeof() 结构未知。为什么？](https://stackoverflow.com/questions/8048540/)什么[时候应该明确指定一个 StructLayout？](https://stackoverflow.com/questions/393943/)

# mysql - lucene/solr vs mySQL 5.6 LIKE（包含）搜索——转向 solr 会提高速度吗？

> ID：12572670
> 
> 赞同：2
> 
> 时间：2012-09-24T20:47:09.407
> 
> 标签：mysql, solr, lucene

我们有一个约 3M 行的 mySQL 数据库，需要一直进行 LIKE（包含）搜索。意思是，如果我们搜索“ppl”，我们需要将“apple”作为返回的结果之一。目前，我们能做的最好的事情是使用 mySQL 进行每个 LIKE 查询大约 2 秒。

我的问题是：将搜索功能移动到 solr（或 lucene）会加快 mySQL LIKE 查询上的 LIKE（包含）类型查询吗？

谢谢！

附言。我已经知道 FULLTEXT 搜索做得更好，但那些不是“包含”搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:34:43.920

是的，它会加快查询速度。您需要决定如何运行这些查询，是否使用通配符：*ppl* * 或更好地使用 NGrams 进行标记化，然后仅使用 ppl 发出查询。

但它肯定会更快，因为这是 lucene/solr 的主要功能。

# sql - 在预期条件的上下文中指定的非布尔类型的表达式，靠近... TABLE

> ID：12572674
> 
> 赞同：-3
> 
> 时间：2012-09-24T20:47:24.347
> 
> 标签：sql, sql-server, sql-server-2008

我要做的是基于具有相应数据库名称（@db_name）的company_id（@company_id），尝试根据这些变量提取数据。我有 30 多个表，需要根据选择的 company_id 来查看数据。

即 EXEC journal_entries_by_dbase;1'1'

```
 ALTER PROC esh_journal_entries_by_dbase
(@company_id varchar(2))
AS
-------------------------------------------------------
BEGIN
CREATE TABLE ##journal_dbase            
(company_id varchar(8)
, journal_description varchar(255)      
, journal_type varchar(8)
, date_entered varchar(10)
, date_applied varchar(10)
, date_posted varchar(10)
, hold_flag varchar(8)
, reversing_flag varchar(9)
, intercompany_flag varchar(8)
, domain_username varchar(255)
, posted_flag varchar(8)
, multi_currency_flag varchar(8)
, home_credit decimal(20,2)
, home_debit decimal(20,2))
;
-------------------------------------------------------
DECLARE --@company_id varchar(8)
        @db_name varchar(32)
        , @sql varchar(8000)
        , @drop_table varchar(200)
        ;
-------------------------------------------------------
SET @db_name = 'select db_name from contrl.dbo.company where company_id = 1' --@company_id';

-------------------------------------------------------
SET @sql =
'INSERT INTO ##journal_dbase
   SELECT '+@company_id+'  
   , trx.journal_description as [Description]
   , trx.journal_type as [Journal Code]
   , convert(varchar(12),dateadd(dd,(trx.date_entered - 639906),''1/1/1753''),101) as [Entry Date]
   , convert(varchar(12),dateadd(dd,(trx.date_applied - 639906),''1/1/1753''),101) as [Apply Date]
   , convert(varchar(12),dateadd(dd,(trx.date_posted - 639906),''1/1/1753''),101) as [Post Date]
   --, trx.date_entered as [Entry Date]
   --, trx.date_applied as [Apply Date]
   --, trx.date_posted as [Post Date]
   , [Hold] = CASE trx.hold_flag  
        WHEN 0 THEN ''No''  
        WHEN 1 THEN ''Yes'' 
        END --as hold
   , [Trans Flag] = CASE trx.reversing_flag  
        WHEN 0 THEN ''Standard'' 
        WHEN 1 THEN ''Reversing'' 
        END --as trans_flag
   , [InterCo] = CASE trx.intercompany_flag  
        WHEN 0 THEN ''No''  
        WHEN 1 THEN ''Yes''  
        END 
   , CASE WHEN e.domain_username NOT LIKE ''%\%''
        THEN e.domain_username
        ELSE SUBSTRING(e.domain_username,5,20)  --SELECT DISTINCT domain_username FROM ECTRL..smusers
        END AS [User Name]
   , [Posted Flag] = CASE trx.posted_flag  
        WHEN 0 THEN ''No''  
        WHEN 1 THEN ''Yes''  
        END 
   , trx.source_company_code as [Org]
   --, SUM(bal.home_credit) as [Total Home Credit] 
   --, SUM(bal.home_debit) as [Total Home Debit]    
   , bal.home_credit as [Total Home Credit]
   , bal.home_debit as [Total Home Debit]
FROM '+@db_name+'.dbo.trx trx                       
LEFT OUTER JOIN '+@db_name+'.dbo.trxdet trxdet
    ON trx.journal_ctrl_num = trxdet.journal_ctrl_num
LEFT OUTER JOIN '+@db_name+'.dbo.bal bal
    ON trxdet.account_code = bal.account_code
--LEFT OUTER JOIN con.dbo.users e
--  ON trx.user_id = e.user_id
--WHERE trx.date_posted > 0
--  AND trx.date_applied >= ''734503''
--  AND trx.date_applied <= ''734710'''
    ;
-------------------------------------------------------
SET @company_id = 'select company_id from ewcomp' --where db_name in (@db_name)
-------------------------------------------------------
EXEC (@sql);
-------------------------------------------------------
SELECT * FROM ##journal_dbase; 
```

这正在返回在预期条件的上下文中指定的非布尔类型的表达式，靠近 bal、trx 和 trxdet。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:42:32.650

我的问题是我试图在内部引用 company 表`db_name`来`JOIN`获取`sys.databases`. 我删除了`SET @company_id` ，只是将以下内容用于`@db_name`. 有用。

```
SELECT @db_name = name 
FROM sys.databases 
    JOIN contrl.dbo.company 
    ON sys.databases.name = contrl.dbo.company.db_name 
WHERE contrl.dbo.company.company_id in (@company_id) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-24T21:03:32.513

您将 SQL 查询放入公司和数据库名称的变量中。我认为您想查询表中的值：

```
SET @company = (SELECT company FROM contrl.dbo.company)
SET @db_name = (SELECT db_name FROM contrl.dbo.company WHERE company = @company) 
```

或者简单地说：

```
SELECT @company = company FROM contrl.dbo.company
SELECT @db_name = db_name FROM contrl.dbo.company WHERE company = @company 
```

* * *

### 编辑：

使用您更新的代码；改变这个：

```
SET @db_name = 'select db_name from contrl.dbo.company where company_id = 1' 
```

至

```
SELECT @db_name = db_name from contrl.dbo.company where company_id = 1 
```

或使用 @CompnayId 变量：

```
SELECT @db_name = db_name from contrl.dbo.company where company_id = cast(@CompanyId as int) 
```

# objective-c - 在不拆分最后一个单词的情况下切割 NSString 的长度

> ID：12572679
> 
> 赞同：1
> 
> 时间：2012-09-24T20:47:51.530
> 
> 标签：objective-c, ios, cocoa-touch

我正在尝试减少 NSString 的长度而不用这种方法拆分最后一个单词：

```
// cut a string by words
- (NSString* )stringCutByWords:(NSString *)string toLength:(int)length;
{
// search backwards in the string for the beginning of the last word
while ([string characterAtIndex:length] != ' ' && length > 0) {
    length--;
}

// if the last word was the first word of the string search for the end of the word
if (length <= 0){
    while ([string characterAtIndex:length] != ' ' && length > string.length-1) {
        length++;
    }
}

// define the range you're interested in
NSRange stringRange = {0, length};

// adjust the range to include dependent chars
stringRange = [string rangeOfComposedCharacterSequencesForRange:stringRange];

// Now you can create the short string
string = [string substringWithRange:stringRange];

return [NSString stringWithFormat:@"%@...",string];
} 
```

现在我的问题是：objective-c 或 cocoa-touch 中是否有我没有看到的内置方式，或者是否有“更好”的方式来做到这一点，因为我对这个解决方案不太满意。

问候和感谢 C4rmel 的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T21:25:30.453

我对 Category 方法的建议

```
@interface NSString (Cut)
-(NSString *)stringByCuttingExceptLastWordWithLength:(NSUInteger)length;
@end

@implementation NSString (Cut)

-(NSString *)stringByCuttingExceptLastWordWithLength:(NSUInteger)length
{
    __block NSMutableString *newString = [NSMutableString string];
    NSArray *components = [self componentsSeparatedByString:@" "];
    if ([components count] > 0) {
        NSString *lastWord = [components objectAtIndex:[components count]-1];

        [components enumerateObjectsUsingBlock:^(NSString *obj, NSUInteger idx, BOOL *stop) {
            if (([obj length]+[newString length] + [lastWord length] + 2) < length) {
                [newString appendFormat:@" %@", obj];
            } else {
                [newString appendString:@"…"];
                [newString appendFormat:@" %@", lastWord];
                *stop = YES;
            }
        }];

    }
    return newString;
} 
```

用法：

```
NSString *string = @"Hello World! I am standing over here! Can you see me?";
NSLog(@"%@", [string stringByCuttingExceptLastWordWithLength:25]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T21:07:42.193

建议：

1.  使其成为类别方法；
2.  使用`NSCharacterSet`和内置的搜索方法，而不是滚动你自己的。

所以：

```
/* somewhere public */
@interface NSString (CutByWords)
- (NSString *)stringCutByWordsToMaxLength:(int)length
@end

/* in an implementation file, somewhere */

@implementation NSString (CutByWords)

// cut a string by words
- (NSString *)stringCutByWordsToMaxLength:(int)length
{
     NSCharacterSet *whitespaceCharacterSet =
                      [NSCharacterSet whitespaceCharacterSet];

     // to consider: a range check on length here?
     NSRange relevantRange = NSMakeRange(0, length);

     // find beginning of last word
     NSRange lastWordRange =
           [self rangeOfCharacterFromSet:whitespaceCharacterSet
                  options:NSBackwardsSearch
                  range:relevantRange];

     // if the last word was the first word of the string,
     // consume the whole string; this looks to be the same
     // effect as the original scan forward given that the
     // assumption is already made in the scan backwards that
     // the string doesn't end on a whitespace; if I'm wrong
     // then get [whitespaceCharacterSet invertedSet] and do
     // a search forwards
     if(lastWordRange.location == NSNotFound)
     {
          lastWordRange = relevantRange;
     }

    // adjust the range to include dependent chars
    stringRange = [self rangeOfComposedCharacterSequencesForRange:stringRange];

    // Now you can create the short string
    NSString *string = [self substringWithRange:stringRange];

    return [NSString stringWithFormat:@"%@...",string];
}

@end

/* subsequently */

NSString *string = ...whatever...;
NSString *cutString = [string stringCutByWordsToMaxLength:100]; 
```

# php - 检查facebook用户是否已经投票

> ID：12572686
> 
> 赞同：0
> 
> 时间：2012-09-24T20:48:45.937
> 
> 标签：php, facebook, vote

我已经建立了一个 Facebook 应用程序。它是一个竞赛应用程序，我允许他们推荐不同的非营利组织进行投票。但他们必须先喜欢我的粉丝页面才允许我的应用程序。

我的问题是如何检查用户是否已经投票。我不能设置cookie，所以我必须以某种方式检查。我想要做的是在我的数据库中存储该用户独有的一些数据，以便我可以检查页面何时加载以查看他们是否已经投票。我在 Facebook 应用程序中使用 php。

我在想这样的事情。

要求'facebook/facebook.php'；

```
 // Create our Application instance (replace this with your appId and secret).
            $facebook = new Facebook(array(
              'appId' => 'APP_ID',
              'secret' => 'APP_SECRET',
            ));

            $user = $facebook->getUser();

            if ($user) {

             // Add to database
            }

            // rest of code here 
```

# mysql - 关于带有空字符串的mysql where子句

> ID：12572690
> 
> 赞同：1
> 
> 时间：2012-09-24T20:48:57.387
> 
> 标签：mysql, sql, where, sql-like

我的查询

```
SELECT order_id, order_item_id, product_id, date_due, ship_via 
    FROM order_shipment 
    WHERE (product_id LIKE 'PP80403396-502%%' AND ship_via != ''); 
```

或者

```
SELECT order_id, order_item_id, product_id, date_due, ship_via 
    FROM order_shipment 
    WHERE (product_id LIKE 'PP80403396-502%%' AND trim(ship_via) != ''); 
```

没有给我任何结果。

我的期望是显示 ship_via 字段为 NULL 或不为空的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:50:55.593

`NULL`不是空字符串，也不是非空字符串。并且比较的结果既不是真的，也不是假的，它是`NULL`。您应该使用`COALESCE`来测试`NULL`或为空。或`OR`。

# java - 如何检查文档是否在 MongoDB 中更新或插入

> ID：12572696
> 
> 赞同：1
> 
> 时间：2012-09-24T20:49:16.630
> 
> 标签：java, mongodb, upsert, mongodb-java

我只是想知道在 Java 中的 upsert 操作之后是否有办法检查给定的文档是否在 MongoDB 中更新或插入：

```
DBCollection col = getCollection();
// either this
col.findAndModify(query, null, null, false, contact, false, true);
// or this
WriteResult wr = col.update(query, contact, true, false); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:55:37.190

通常，`WriteResult`将保存有关它是否成功的信息；如果成功，该文件将在那里。

您也可以做一个简单`col.count(new BasicDBObject("_id",{id of your document}))`的检查值是否为 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T22:23:28.103

1-> 步骤：在文档目标上设置使用[探查器。](http://www.mongodb.org/display/DOCS/Database+Profiler) 2-> 运行此查询`> db.setProfilingLevel(2);`

```
db.system.profile.find({},{ts:1, op:1, ns:1}).sort({ts: -1}).forEach(printjson); 
```

`op`如果给定的文档被更新或插入并且`ns`是文档名称，它将在属性中显示。`ts`查询运行时。

# sql - SSRS 报告级联参数

> ID：12572698
> 
> 赞同：0
> 
> 时间：2012-09-24T20:49:23.587
> 
> 标签：sql, reporting-services

我在 SSRS 报告中有 3 个参数。两个（参数 1 和参数 3）是可以从查询中选择的值的下拉列表，（参数 2）是真/假单选按钮参数。我要做的是设置它，以便如果选择了参数 2 - true，则必须为参数 3 选择一个值，如果选择了参数 2 -false，则不必选择参数 3。

将始终选择参数 1，我在处理我尝试设置级联参数但没有成功时没有任何困难。我有一个包含所有参数的主数据集，然后它们都有单独的数据集来查找可用值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:28:23.970

级联参数虽然可以影响后续参数的可能取值，但不能使参数成为必需或不必需。

我建议你创建一个值比如`"<No Value>"`for param 3，默认可以选择。在您的查询中测试这个特殊值并在适当时忽略它。

# java - 在 Java 中，为什么在某些集合实现中允许 null 而在其他集合实现中不允许？

> ID：12572700
> 
> 赞同：2
> 
> 时间：2012-09-24T20:49:25.033
> 
> 标签：java, collections

在 Java 中，一般来说，有些集合实现允许空元素，有些则不允许。它与垃圾收集有关吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T21:04:39.643

从广义上讲，我认为基本上取决于实现来决定是否`null`可以成为集合**的有效元素**（“逻辑上”）。我真的怀疑还有更多，尽管我可能被证明是错误的。

[文档](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html)中的相关位：

> 一些集合实现对它们可能包含的元素有限制。例如，一些实现禁止空元素，而一些实现对其元素的类型有限制。尝试添加不合格的元素会引发未经检查的异常，通常是 NullPointerException 或 ClassCastException。尝试查询不合格元素的存在可能会引发异常，或者它可能只是返回 false；一些实现会表现出前一种行为，而另一些会表现出后者。更一般地，尝试对不合格元素执行操作，该不合格元素的完成不会导致将不合格元素插入集合中，这可能会引发异常，也可能会成功，这取决于实现的选择。此类例外被标记为“可选”

# php - 允许任何人在 Wordpress 中查看特定帖子类型（事件）的未来帖子

> ID：12572703
> 
> 赞同：1
> 
> 时间：2012-09-24T20:49:33.363
> 
> 标签：php, wordpress, permissions

我在 Wordpress 上有一个系统，其中事件是预定的帖子和循环中的单词。

但是我只是注意到，当单击一个事件并转到它的页面时，它会给出 404。我可以在登录时预览它，但是，即使它当前已安排，我也需要它对任何人可见。

有没有办法更改权限，以便任何人都可以查看特定的预定帖子类型？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T23:42:38.137

编辑：

尝试将此函数添加到您的 functions.php 文件中：

```
/* Show future posts */
function show_future_posts($posts)
{
   global $wp_query, $wpdb;
   if(is_single() && $wp_query->post_count == 0)
   {
      $posts = $wpdb->get_results($wp_query->request);
   }
   return $posts;
}
add_filter('the_posts', 'show_future_posts'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T03:09:50.113

未来的帖子有点像 Catch-22：您可以在任何好的老式 Wordpress 循环中查询它们，但直接导航到它们*是不可能的*......至少在标准的 Wordpress 范围内：

```
<?php
$q = new WP_Query(array('post_status'=>'future'));
if($q->have_posts()) : while($q->have_posts()) : $q->the_post;
    echo '<a href="'.get_permalink().'">'.get_the_title().'</a>'; //404 when clicked
endwhile;endif;
?> 
```

这样做的原因不是因为权限。这是因为这就是它在 Wordpress 核心中的构建方式。未来的帖子在特定日期之前不会被查看。试图让未来的帖子可供查看是对“未来”状态的滥用，并且违背了其整个目的，即安排帖子或页面在到达指定日期时自动切换到“已发布”状态。

但是，如果您仍然想让 Future Posts 像普通帖子一样可用，那么[这个讨论](http://wordpress.org/support/topic/display-future-posts-solutions)可能会阐明各种方法和插件，以使一切按照您想要的方式发生。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T07:41:18.070

I tried several plugins and suggestions for this problem, but none worked to show a single custom post type template page to non-logged in users. Eventually I found my answer:

[https://wordpress.stackexchange.com/questions/44202/how-to-set-a-custom-post-type-to-have-viewable-future-posts/70155#70155](https://wordpress.stackexchange.com/questions/44202/how-to-set-a-custom-post-type-to-have-viewable-future-posts/70155#70155)

# jquery - 为什么我不能将 jquery css 与 jquery 事件结合起来？

> ID：12572706
> 
> 赞同：0
> 
> 时间：2012-09-24T20:49:41.600
> 
> 标签：jquery, css

我试图使侧边栏永久隐藏，直到带有淡入事件的 .click 事件处理程序，直到该事件被触发，并且该栏的文本应该向下滑动（速度为 500）。不幸的是，我尝试了很多这些功能/事件处理程序？但无法弄清楚如何使这项工作如愿以偿。id #about 是侧边栏，id #about_me 是应该触发事件的列表项，id#about_profile 是侧边栏的内容。现在回到主要内容，这里是代码：

```
//second js code .css('visibility','hidden')
$('#about').css('visibility','hidden')
$("#about_me").click(function(){
    $("#about").fadeIn(500);
    $('#about_profile').slideDown(200)({

        });
    }); 
```

我的第二个问题是，为什么这个事件没有发生？以下代码：

```
 $('#about').css('visibility','hidden',function(){
    $("#about_me").click(function(){
        $("#about").fadeIn(500);
        $('#about_profile').slideDown(200)({
    });
}); 
```

谢谢你的帮助亲切的问候

ps：我什至搜索了stackoverflows AQL（提问库）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:52:01.543

jQuery`.css`方法不接受回调，并且它是同步的，这意味着它实际上不需要回调参数。您的第一个片段是执行此操作的正确方法。

```
$('#about').css('visibility','hidden');
$("#about_me").click(function(){
    $("#about").fadeIn(500);
    $('#about_profile').slideDown(200);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T20:52:15.180

```
$('#about').css('visibility','hidden');

$("#about_me").click(function(){
     $("#about").fadeIn(500);
     $('#about_profile').slideDown(200);
}); 
```

那应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T20:51:25.267

尝试`$('#about').hide();`代替`$('#about').css('visibility','hidden');`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T20:58:55.270

我相信淡入淡出将显示属性设置为阻止并且不会更改可见性属性...您最好使用 css('display', 'none') 或更好的 .hide() 正如有人已经建议的那样。文档在这里：[http](http://api.jquery.com/fadeIn/) ://api.jquery.com/fadeIn/并且在评论中提到了“显示：无”问题。

# email - 链接到电子邮件模板中的 Magento Admin 部分

> ID：12572707
> 
> 赞同：1
> 
> 时间：2012-09-24T20:49:43.210
> 
> 标签：email, magento, admin

每次客户下新订单时，我都需要向管理员发送一封电子邮件，其中包含指向 ADMIN 订单详细信息部分的链接，以便直接访问。例如：

[http://www.mydomain.com.ar/index.php/admin/sales_order/view/order_id/19/key/72977b31f74180d25ba185a1cfe86d5a/](http://www.mydomain.com.ar/index.php/admin/sales_order/view/order_id/19/key/72977b31f74180d25ba185a1cfe86d5a/)

我怎样才能做到这一点？非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:56:01.217

在系统 > 配置 > 销售电子邮件 > 订单等中的管理员电子邮件中密件抄送

# javascript - 使用 dataurl 的图像掩码

> ID：12572714
> 
> 赞同：0
> 
> 时间：2012-09-24T20:50:29.823
> 
> 标签：javascript, jquery, html

我想拍摄通过更改像素数据创建的图像并将其用作蒙版。我想最大的问题是如何将 dataUrl 转换为图像，以便我可以使用它来询问蒙版。在我看来，dataurl 是一个 base64 图像。我需要从base64获取真实图像。

我目前正在尝试使用[Ben Barnett Canvas Utility](https://github.com/benbarnett/Canvas-Mask)进行遮罩。如果它可以使用dataUrl，我愿意使用其他东西来掩盖它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:56:58.600

如果我理解正确，您拥有图像的 base64 数据，并且您需要一个 Image 对象。您需要做的就是：

```
var img = new Image();
img.src = dataurl; 
```

# cmd - 如何每1秒使用Windows批处理脚本更改cmd的文本颜色

> ID：12572718
> 
> 赞同：43
> 
> 时间：2012-09-24T20:50:53.460
> 
> 标签：cmd, batch-file

color 命令与更改 windows 命令提示背景/文本的颜色有关

color 0A - 其中 0 是背景颜色，A 是文本颜色

我想在 Windows 批处理脚本中每 1 秒更改这些文本颜色，使用 1,2,3,4,5,6,7,8,9,A,B,C,D,E,F 的数组颜色代码。

```
0 = Black       8 = Gray
1 = Blue        9 = Light Blue
2 = Green       A = Light Green
3 = Aqua        B = Light Aqua
4 = Red         C = Light Red
5 = Purple      D = Light Purple
6 = Yellow      E = Light Yellow
7 = White       F = Bright White 
```

该命令应该像这样每秒执行一次

```
color 01
color 02
color 03
....
color 0E
color 0F 
```

对于这些，我找到了一些小脚本，但我不知道如何让它每 1 秒改变一次颜色！

```
for /L %%i in (1,1,%n%) do echo !array[%%i]! 
```

或这个

```
@echo off CLS
for /l %%a in (15,-1,1) do (
color 0A
cls
)
pause 
```

或这个

```
SET COUNTDOWN=15
:COUNTDOWNLOOP
IF %COUNTDOWN%==0 GOTO END
color 0A && %R1%
CLS
SET /A COUNTDOWN -=1
GOTO COUNTDOWNLOOP
:END 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-26T20:59:42.393

这应该符合要求。听起来像是一件非常烦人的事情，但是你有它：

```
@echo off
set NUM=0 1 2 3 4 5 6 7 8 9 A B C D E F
for %%x in (%NUM%) do ( 
    for %%y in (%NUM%) do (
        color %%x%%y
        timeout 1 >nul
    )
) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-02T12:18:57.810

试试这个脚本。这可以在屏幕的任何位置写入任何文本，并且不使用临时文件或“.com、.exe”可执行文件。只需确保您在 windows\system 或 windows\system32 文件夹中有“debug.exe”可执行文件。

[http://pastebin.com/bzYhfLGc](http://pastebin.com/bzYhfLGc)

```
@echo off
setlocal enabledelayedexpansion
set /a _er=0
set /a _n=0
set _ln=%~4
goto init

:howuse ---------------------------------------------------------------

    echo ------------------
    echo ECOL.BAT - ver 1.0
    echo ------------------
    echo Print colored text in batch script
    echo Written by BrendanLS - http://640kbworld.forum.st
    echo.
    echo Syntax:
    echo ECOL.BAT [COLOR] [X] [Y] "Insert your text"
    echo COLOR value must be a hexadecimal number
    echo.
    echo Example:
    echo ECOL.BAT F0 20 30 "The 640KB World Forum"
    echo.
    echo Enjoy ;^)
    goto quit

:error ----------------------------------------------------------------

    set /a "_er=_er | (%~1)"
    goto quit

:geth -----------------------------------------------------------------

        set return=
        set bts=%~1

:hshift ---------------------------------------------------------------

        set /a "nn = bts & 0xff"
        set return=!h%nn%!%return%
        set /a "bts = bts >> 0x8"
        if %bts% gtr 0 goto hshift
        goto quit

:init -----------------------------------------------------------------

    if "%~4"=="" call :error 0xff

    (
        set /a _cl=0x%1
        call :error !errorlevel!
        set _cl=%1
        call :error "0x!_cl! ^>^> 8"
        set /a _px=%2
        call :error !errorlevel!
        set /a _py=%3
        call :error !errorlevel!
    ) 2>nul 1>&2

    if !_er! neq 0 (
        echo.
        echo ERROR: value exception "!_er!" occurred.
        echo.
        goto howuse
    )

    set nsys=0123456789abcdef
    set /a _val=-1

        for /l %%a in (0,1,15) do (
                for /l %%b in (0,1,15) do (
                        set /a "_val += 1"
                        set byte=!nsys:~%%a,1!!nsys:~%%b,1!
                        set h!_val!=!byte!
                )
        )

    set /a cnb=0
    set /a cnl=0

:parse ----------------------------------------------------------------

    set _ch=!_ln:~%_n%,1!
    if "%_ch%"=="" goto perform

    set /a "cnb += 1"
    if %cnb% gtr 7 (
        set /a cnb=0
        set /a "cnl += 1"
    )

    set bln%cnl%=!bln%cnl%! "!_ch!" %_cl%
    set /a "_n += 1"
    goto parse

:perform --------------------------------------------------------------

    set /a "in = ((_py * 160) + (_px * 2)) & 0xffff"
    call :geth %in%
    set ntr=!return!
    set /a jmp=0xe

    @for /l %%x in (0,1,%cnl%) do (
        set bl8086%%x=eb800:!ntr! !bln%%x!
        set /a "in=!jmp! + 0x!ntr!"
        call :geth !in!
        set ntr=!return!
        set /a jmp=0x10
    )

    (
    echo.%bl80860%&echo.%bl80861%&echo.%bl80862%&echo.%bl80863%&echo.%bl80864%
    echo.q
    )|debug >nul 2>&1

:quit 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-14T13:09:02.970

我正在做一些非常相似的事情。我刚刚开始编码，所以这可能不是最有效的方法，但我就是这样做的：

```
@ECHO OFF
ECHO HELLO
ping localhost -n 1 >nul
cls
color 01
ECHO HELLO
ping localhost -n 1 >nul
cls
color 02
ECHO HELLO 
```

等等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-31T20:18:01.270

我已经创建了一种简单的方法，并使其尽可能简单。最后的“暂停”是您继续代码的地方。 [执行代码的图片](https://i.stack.imgur.com/gqewe.png)

```
# [CODE]        [DESCRIPTION]
#
# echo. &       starts a new line
# echo.         skips a line
# PainText 08       08 is color code for gray   Type "color ?" for color codes
# " Red"        The space befor text gives space between the word befor it

@echo off
cls && color 08

for /F "tokens=1,2 delims=#" %%a in ('"prompt #$H#$E# & echo on & for %%b in (1) do rem"') do (set "DEL=%%a")

<nul set /p=""
call :PainText 08 "Gray"
call :PainText 04 " Red"
call :PainText 02 " Green"
call :PainText 08 " Gray"
echo. &
call :PainText 02 "Line 2 Green No space"
echo. &
echo.
call :PainText 01 "H"
call :PainText 02 "E"
call :PainText 03 "L"
call :PainText 03 "L"
call :PainText 05 "O"
echo.

goto :end

:PainText
<nul set /p "=%DEL%" > "%~2"
findstr /v /a:%1 /R "+" "%~2" nul
del "%~2" > nul
goto :eof

:end
echo.

pause 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-02T18:52:45.097

```
echo off & cls
set NUM=0 1 2 3 4 5 6 7 8 9 A B C D E F
for %%y in (%NUM%) do ( 
    for %%x in (%NUM%) do (
        color %%y%%x & for /l %%A in (1,1,200) do (dir /s)
        timeout 1 >nul
    )
)
pause 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-01-15T15:10:54.453

```
echo off & cls
title   never buy these they're so easy to make... hmu for source code             

    -%pinging:IP%-
color 0D

echo =================================================================
echo i flex on my unhittable ovh, you flex on an easy to hit trash ovh
echo =================================================================
set /p IP=Enter IP:
:top
title :: this skid's boutta get slammed FeelsGoodMan ::    -%pinging:IP%-
PING -n 1 %IP% | FIND "TTL="
IF ERRORLEVEL (echo stop flexing on ovh's i down them with ease, mine on the other hand is unhittable.):
set /a num=(%Random%%%9)+1
color %num%IP   ping -t 2 0 10 127.0.0.1 >nul
GoTo top 
```

这是一个 ip ping，它具有自定义超时消息，用于如果网站或服务器关闭，也可以用于引导人们离线，我可以制作一个工具，根据您的输入打开文件和单个 pinger，并且内置的地理位置工具。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-06-07T19:46:04.543

为了获得丰富多彩的用户体验，我使用了这个脚本来执行整套命令。我希望它有所帮助。

```
@echo off
color 01
timeout /t 2
color 02
timeout /t 2
color 03
timeout /t 2
color 04
timeout /t 2
color 05
timeout /t 2 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2020-05-28T16:46:20.447

试试这个命令：

```
@echo off
cls
:loop
echo RAINBOW
color 0
echo RAINBOW
color 1
echo RAINBOW
color 2
echo RAINBOW
color 3
echo RAINBOW
color 4
echo RAINBOW
color 5
echo RAINBOW
color 6
echo RAINBOW
color 8
echo RAINBOW
color 9
echo RAINBOW
color A
echo RAINBOW
color B
echo RAINBOW
color C
echo RAINBOW
color D
echo RAINBOW
color E
echo RAINBOW
goto loop 
```

这应该会循环创建颜色变化的文本。
编辑：您可以将彩虹一词更改为您想要的任何内容。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2020-09-12T15:13:41.833

```
@echo off
set NUM=0 1 2 3 4 5 6 7 8 9 A B C D E F 31 32 33 34 35 36 37 41 42 43 44 45 46 90 91 92 93 94 95 96 97 100 101 102 103 104 105 106 107 
for %%x in (%NUM%) do ( 
    for %%y in (%NUM%) do (
        color %%x%%y
cls
echo Himel Sarkar
        timeout 1 >nul
    )
)

pause 
```

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2013-12-05T11:43:04.760

通过在 cmd 窗口属性中编辑颜色值，可以将特定计算机上的颜色代码分配给不同的 RGB 颜色。轻松单击调色板上的颜色并更改其 rgb 值。

# vim - 如何使用程序为 VIM 做全能补全

> ID：12572720
> 
> 赞同：2
> 
> 时间：2012-09-24T20:50:57.887
> 
> 标签：vim

我正在寻找为 VIM 创建一个自定义的全向补全，并且我想做实际的工作来查找要在另一个程序中完成的可能匹配项。解决此问题的最佳方法是什么？

到目前为止，我的想法是创建一个 vimscript，将整个缓冲区和光标位置发送到外部脚本。但是，我找不到比使用更有效的方法来获取缓冲区`join(getline(0, line('$')), '\n')`，这在大文件上非常慢。如果你有兴趣，我到目前为止：

自动完成 vimscript：

```
fun! MyComplete(findstart, base)
    let line = getline('.')
    let start = col('.') - 1
    while start > 0 && line[start - 1] =~ '\a'
        let start -= 1
    endwhile
    if a:findstart
        return start
    else
        let result = system('java AutoComplete '.shellescape(expand('%')).' '.line('.').' '.start, 'File sourcecode here')
        let res = []
        for m in split(result)
            if m =~ '^' . a:base
                call add(res, m)
            endif
        endfor
        return res
    endif
endfun
set completefunc=MyComplete 
```

自动完成.java：

```
class AutoComplete {
    public static void main(String[] argv) {
        // To be expanded into an amazing program...
        System.out.print("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T05:53:54.493

最好创建一个临时文件并将其名称传递给外部命令。例如，这是来自 clang_complete 插件：

```
let l:buf = getline(1, '$')
let l:tempfile = expand('%:p:h') . '/' . localtime() . expand('%:t')
try
    call writefile(l:buf, l:tempfile)
catch /^Vim\%((\a\+)\)\=:E482/
    " TODO: handle exception
endtry

" TODO: call external program here

call delete(l:tempfile) 
```

另请参阅对您有用的[QueryCommandComplete插件。](http://www.vim.org/scripts/script.php?script_id=4132)

# ruby-on-rails - Rails Google Client API - 无法用刷新令牌交换访问令牌

> ID：12572723
> 
> 赞同：15
> 
> 时间：2012-09-24T20:51:06.470
> 
> 标签：ruby-on-rails, oauth-2.0, omniauth, access-token, google-api-client

在我的机器上遇到了一些[SSL 问题](https://stackoverflow.com/questions/12520314/ssl-error-in-rails-3-2-3-while-using-google-oauth2-client-to-access-api)后，我仍在尝试通过 Google Ruby Client API 访问用户的 Blogger 帐户。我正在使用以下内容：

*   导轨 3.2.3
*   红宝石 1.9.3
*   oauth2 (0.8.0)
*   全域认证 (1.1.1)
*   omn​​iauth-google-oauth2 (0.1.13)
*   谷歌 api 客户端 (0.4.6)

我可以在验证时通过 Google API 成功验证用户并访问他们的博客。当用户登录时，我存储`access_token`并`refresh_token`从 Google 收到。一切都很好，直到`access_token`到期。我正在尝试构建将 替换`refresh_token`为新的功能`access_token`，但不断遇到墙壁。以[客户端文档](https://code.google.com/p/google-api-ruby-client/wiki/OAuth2)为例，这是我正在使用的代码：

```
 client = Google::APIClient.new
  token_pair = auth.oauth_token   # access_token and refresh_token received during authentication

  # Load the access token if it's available
  if token_pair  
    client.authorization.update_token!(token_pair.to_hash)
  end            

  # Update access token if expired
  if client.authorization.refresh_token && client.authorization.expired?
    client.authorization.fetch_access_token!
  end

  blogger = client.discovered_api('blogger', 'v3')
  result = client.execute(
      api_method: blogger.blogs.list_by_user,
      parameters: {'userId' => "self", 'fields' => 'items(description,id,name,url)'},
      headers: {'Content-Type' => 'application/json'}) 
```

此代码在`access_token`有效时完美运行。但是，一旦到期，我就会看到两个问题：

1.  即使我知道令牌已过期（我已经检查`expires_at`了数据库中的值），`client.authorization.expired?`返回`false`- 除了使用数据库中的值之外，还有其他方法可以检查令牌的过期吗？
2.  当我强制执行时，`client.authorization.fetch_access_token!`我得到一个`invalid_request`错误。

有人可以告诉我如何使用客户端 API`refresh_token`换新的吗？`access_token`即使你知道如何用另一种语言来做，那也会有很大的帮助，因为我可以尝试 Rubyfy 它。谢谢！！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-24T23:37:56.513

您可能已经找到了这个，但您可以在 google 上阅读整个过程：[https ://developers.google.com/accounts/docs/OAuth2WebServer](https://developers.google.com/accounts/docs/OAuth2WebServer)

omn​​iauth-google-oauth2 策略已经负责设置 access_type 和approval_prompt 因此获取刷新令牌只需使用grant_type=request_token发布到[https://accounts.google.com/o/oauth2/token](https://accounts.google.com/o/oauth2/token)

这里*大致*是我使用的代码：

```
def refresh_token
  data = {
    :client_id => GOOGLE_KEY,
    :client_secret => GOOGLE_SECRET,
    :refresh_token => REFRESH_TOKEN,
    :grant_type => "refresh_token"
  }
  @response = ActiveSupport::JSON.decode(RestClient.post "https://accounts.google.com/o/oauth2/token", data)
  if @response["access_token"].present?
    # Save your token
  else
    # No Token
  end
rescue RestClient::BadRequest => e
  # Bad request
rescue
  # Something else bad happened
end 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-11-19T08:08:05.273

既然您使用的是 Ruby Google API 客户端，为什么不使用它来交换刷新令牌呢？Ruby API 在内部做了几乎相同的事情，@brimil01 在他的回答中说过。

这就是我使用 Ruby API 将刷新令牌交换为新访问令牌的方式。

```
def self.exchange_refresh_token( refresh_token )
  client = Google::APIClient.new
  client.authorization.client_id = CLIENT_ID
  client.authorization.client_secret = CLIENT_SECRET
  client.authorization.grant_type = 'refresh_token'
  client.authorization.refresh_token = refresh_token

  client.authorization.fetch_access_token!
  client.authorization
end 
```

并且根据[这里的这个问题](https://github.com/google/google-api-ruby-client/issues/4)，建议不要使用该`expired?`方法来检查访问令牌是否已过期。

> 基本上，不叫过期了？方法。基本上有零个场景，这是一个好主意。它根本不会为您提供可靠的到期信息。这更像是一个提示，而不是真正的过期时间戳，并且令牌服务器可能会决定在某些理论上但重要的情况下无论如何都要兑现过期的令牌。如果您确实收到无效授权错误，请始终刷新您的访问令牌并重试一次。如果您仍然收到错误，请提出错误。

这就是我所做的。

```
# Retrieved stored credentials for the provided user email address.
#
# @param [String] email_address
#   User's email address.
# @return [Signet::OAuth2::Client]
#  Stored OAuth 2.0 credentials if found, nil otherwise.
def self.get_stored_credentials(email_address)
  hash = Thread.current['google_access_token']
  return nil if hash.blank?

  hash[email_address]
end

##
# Store OAuth 2.0 credentials in the application's database.
#
# @param [String] user_id
#   User's ID.
# @param [Signet::OAuth2::Client] credentials
#   OAuth 2.0 credentials to store.
def self.store_credentials(email_address, credentials)
  Thread.current['google_access_token'] ||= {}
  Thread.current['google_access_token'][email_address] = credentials
end

def self.credentials_expired?( credentials )
  client = Google::APIClient.new
  client.authorization = credentials
  oauth2 = client.discovered_api('oauth2', 'v2')
  result = client.execute!(:api_method => oauth2.userinfo.get)

  (result.status != 200)
end

# @return [Signet::OAuth2::Client]
#  OAuth 2.0 credentials containing an access and refresh token.
def self.get_credentials
  email_address = ''

  # Check if a valid access_token is already available.
  credentials = get_stored_credentials( email_address )
  # If not available, exchange the refresh_token to obtain a new access_token.

  if credentials.blank?
    credentials = exchange_refresh_token(REFRESH_TOKEN)
    store_credentials(email_address, credentials)
  else
    are_credentials_expired = credentials_expired?(credentials)

    if are_credentials_expired
      credentials = exchange_refresh_token(REFRESH_TOKEN)
      store_credentials(email_address, credentials)
    end
  end

  credentials
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-12T08:50:46.187

我用下面的简单代码修复了它。

```
 def refesh_auth_tooken(refresh_token) 
       client = Google::APIClient.new 
       puts "REFESH TOOKEN"
       client.authorization = client_secrets
       client.authorization.refresh_token = refresh_token

       #puts YAML::dump(client.authorization)

       client.authorization.fetch_access_token!
       return client.authorization

     end 
```

# javascript - 上传 - onComplete || onAllComplete 不起作用

> ID：12572726
> 
> 赞同：0
> 
> 时间：2012-09-24T20:51:30.817
> 
> 标签：javascript, jquery, uploadify

我知道这个问题已经有一些线索，但没有一个对我有帮助。

我有一个图像管理器，我想用“onComplete”事件重新加载页面，但这对我不起作用。

你可以看到一个例子： http: [//graficnova.com/uploadifytest/imgLoader.php](http://graficnova.com/uploadifytest/imgLoader.php)

一切正常！！，但你需要按 f5 键来刷新它:(。

谢谢，对不起我的英语！

代码：

头：

```
<script type="text/javascript">
        $(function() {
            $("#fileInput").uploadify({
                width : 100,
                swf           : 'swf/uploadify.swf',
                uploader      : 'php/uploadify.php',                    
                queueID : 'imgloadList',
                oncomplete : function() {
                    alert('hello world?'); //<- THIS NOT WORK
                }
            });             
        });                 
    </script> 
```

php: 上传.php

```
if (!empty($_FILES)) {
$tempFile = $_FILES['Filedata']['tmp_name'];

//$targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;

$targetPath = 'xxxxx/xxxx/xxxx/xxxx';

$targetFile = rtrim($targetPath,'/') . '/' . $_FILES['Filedata']['name'];

// Validate the file type
$fileTypes = array('jpg','jpeg','gif','png'); // File extensions
$fileParts = pathinfo($_FILES['Filedata']['name']);

if (in_array($fileParts['extension'],$fileTypes)) {     
    move_uploaded_file($tempFile,$targetFile);
    echo '1'; //<- return response
} else {
    echo 'Invalid file type.'; //<- return response
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:57:16.503

根据 Uploadify 文档，没有`onComplete`事件，但有一个[“onUploadComplete”](http://www.uploadify.com/documentation/uploadify/onuploadcomplete/)事件：

> 上传完成时每个文件触发一次，无论是成功还是返回错误。如果您想知道上传是否成功，最好使用 onUploadSuccess 事件或 onUploadError 事件。

可能想试一试。或退房[`onQueueComplete`](http://www.uploadify.com/documentation/uploadify/onqueuecomplete/)。

# css - Xperia S 响应式设计

> ID：12572729
> 
> 赞同：0
> 
> 时间：2012-09-24T20:51:40.893
> 
> 标签：css, mobile, responsive-design, viewport, sony

我无法在 Xperia S 上制作响应式网站。

因为命令行：

> 元名称=“视口”内容=“宽度=设备宽度，最大比例=1.0，最小比例=1.0”

一切都被放大并向左移动，在其他手机上看起来不错。截屏 ：

[http://www.domweselnysenden.pl/screenshot.png](http://www.domweselnysenden.pl/screenshot.png)

我正在测试的网站。

[http://domweselnysenden.pl](http://domweselnysenden.pl)

# arguments - 使用 Python 3 将字节作为参数提供给 exe

> ID：12572733
> 
> 赞同：0
> 
> 时间：2012-09-24T20:51:47.660
> 
> 标签：arguments, byte, python-3.2

我有一个需要使用 Python 3.2.3 打开的 exe。我还需要将字节形式的参数传递给 exe。我尝试做类似的事情：

```
argument = '\x50'*260
subprocess.call([command, argument]) 
```

这很好用，但是当我尝试将不可打印的字符作为“\x86”之类的参数时，它会转换为“\x3f”。打印参数会出现以下错误：

```
UnicodeEncodeError: 'charmap' codec can't encode character '\x86' in position 262: character maps to <undefined> 
```

所以我尝试使用 os.system 来做：

```
command = "C:\myfile.exe "+b"\x50"*260
os.system(command) 
```

但显然，这会导致类型错误。有没有人有任何建议来完成这件事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T17:17:01.790

这是不可能的。问题是子进程所做的就是假装在命令提示符中输入命令。您可以访问 myfile.exe 的源代码吗？您可以轻松地将字节表示为字符串或数字。

# python - 在python中导入麻烦

> ID：12572734
> 
> 赞同：4
> 
> 时间：2012-09-24T20:51:48.563
> 
> 标签：python, python-3.x

想象一下下面的项目结构

```
app/
    foo/
        __init__.py
        a.py
        b.py 
```

在*a.py 中*，我的**A**类使用*b.py*文件中的B**类**，而*b.py中的***B**类使用**A**类形式*a.py*

 *******如果我写：

```
from foo.b import B 
```

在*a.py*和

```
from foo.a import A 
```

在*b.py*中，递归发生

如何正确导入，而不将**A**和**B**合并到单个文件中

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T20:54:44.453

Python 不支持循环导入，部分原因是它们通常是设计缺陷的征兆。

您可以做的是制作`A`和`B`自包含并从第三个文件中引用它们，或者，将共享结构提取到第三个文件中并从您的两个模块中引用它。这在很大程度上取决于什么`A`和`B`是什么以及为什么你认为他们应该相互了解。

例如，您可以`A`只通过其构造函数引用一个实例`B`，这样您就不需要导入：

```
class A(object):
    def __init__(self, b):
        self.b = b
    # .. some methods that reference self.b 
```

如果涉及继承，它会变得有点复杂。在这种情况下，您可能不希望超类知道子类，因为这会违反[替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)。*******

# orchardcms - 具有多个主机名的果园多租户

> ID：12572738
> 
> 赞同：1
> 
> 时间：2012-09-24T20:52:06.660
> 
> 标签：orchardcms, multi-tenant

是否可以有多个主机名指向同一个租户。例如，我希望 my-website.nl 和 mywebsite.nl 指向同一个实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:26:17.190

这对搜索引擎优化不利。您应该选择一个并让其他人永久重定向到它。

更新：要重定向，您可以通过编辑 web.config 使用 IIS url 重写，或者您可以使用 Orchard 的 Rewrite 模块：http: [//gallery.orchardproject.net/List/Modules/Orchard.Module.Contrib.RewriteRules](http://gallery.orchardproject.net/List/Modules/Orchard.Module.Contrib.RewriteRules)

虽然我不推荐它，但您也可以在租户配置中指定以逗号分隔的主机名列表，并获得您最初想要的结果（我应该在编写该代码时记住这一点）。

# django - 从数据库 Django 中获取单条记录

> ID：12572741
> 
> 赞同：0
> 
> 时间：2012-09-24T20:52:14.507
> 
> 标签：django, django-models, django-views

我是 Django 新手，正在尝试制作一个基本网站，但在获取页面的相关记录时遇到了一些困难。

模型.py

```
import datetime
from django.db import models
from django.conf import settings
from ckeditor.fields import RichTextField
from markdown import markdown

class LiveEntryManager(models.Manager):
      def get_query_set(self):
      return super(LiveEntryManager,self).get_query_set().filter(status=self.model.LIVE_STATUS)

class Page(models.Model):
      LIVE_STATUS = 1
      HIDDEN_STATUS = 2
      STATUS_CHOICES = (
            (LIVE_STATUS, 'Live'),
            (HIDDEN_STATUS, 'Hidden'),
       )
      title = models.CharField(max_length=250, help_text='Max 250 characters.')
      slug = models.SlugField(unique=True, help_text='Suggested automatically generated from the title. Must be unique') 
      description = RichTextField()
      description_html = models.TextField(editable=False, blank=True) 
      status = models.IntegerField(choices=STATUS_CHOICES, default=LIVE_STATUS, 
                           help_text="Only pages with live status will be publicly displayed")

      def save(self, force_insert=False, force_update=False):
          self.description_html = markdown(self.description)
          super(Page, self).save(force_insert, force_update)

      def get_record(self):
          return self.objects.get()

      #Managers
      live = LiveEntryManager()
      objects = models.Manager()

      class Meta:
            ordering = ['title']
            verbose_name_plural = "Pages"

      def __unicode__(self):
          return self.title

      def get_absolute_url(self):
          return "/%s/" % self.slug

class Image(models.Model):
      page = models.ForeignKey(Page)
      name = models.CharField(max_length=250)
      image = models.ImageField(upload_to='gallery')

      class Meta:
            ordering = ['name']

      def __unicode__(self):
          return self.name 
```

和 Views.py

```
from django.shortcuts import get_object_or_404, render_to_response
from django.views.generic.list_detail import object_list
from mainsite.models import Page, Image

def home(request):
    return render_to_response('templates/home.html')

def page(request, slug):
    one_page = get_object_or_404(Page, slug=slug)
    return render_to_response('templates/page/page.html',
                          { 'object_list': one_page.get_record() }) 
```

和 Urls.py

```
urlpatterns = patterns('',
   # Examples:
   url(r'^$', 'mainsite.views.home', name='home'),
   # url(r'^disability/', include('disability.foo.urls')),
   url(r'^page/(?P<slug>[-\w]+)/$', 'mainsite.views.page'),
   # Uncomment the admin/doc line below to enable admin documentation:
   # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),
   url(r'^grappelli/', include('grappelli.urls')),
   # Uncomment the next line to enable the admin:
   url(r'^admin/', include(admin.site.urls)), 
```

)

我想要做的是能够说 /page/test 并仅获取该对象的标题、描述和图像。我知道如何获取所有对象并将它们显示在模板中，但不知道如何获取单个记录，并且会感谢一些帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-31T14:47:36.513

如果您想在数据库中查询单个 Page 模型，您可以使用

```
views.py

from django.core.exceptions import ObjectDoesNotExist
from django.http import HttpResponse 
from models import Pages

def page(request, slug):
    try:
        page = Pages.objects.get(slug=slug)
    except ObjectDoesNotExist:
        return HttpResponse(status=404)
    return render(request, 'templates/page/page.html', {'page': page}) 
```

然后只需使用

```
{{page.title}} 
```

或模板中的类似内容。

此外，如果您想查询并返回一个可迭代的列表，您可以使用

```
Pages.objects.filter() 
```

代替

```
Pages.objects.get() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T21:07:43.167

你从哪里来`get_record()`的？的返回值`get_object_or_404`是一个模型实例。没有什么可以“获取”的，只需将实例传递给您的上下文即可。并且，不要`object_list`用作上下文名称。这不仅是一个实例，*而不是*列表或查询集，而且该名称最常与分页一起使用，如果您实际上没有对任何内容进行分页，您只会在代码中造成混乱。

```
return render_to_response('templates/page/page.html', {
    'one_page': one_page,
}) 
```

然后在您的模板中：

```
<h1>{{ one_page.title }}</h1>
<img src="{{ one_page.image.url }}" alt="">
<p>{{ one_page.description }}</p> 
```

# entity-framework - EF：是否有任何“财产变更”事件？

> ID：12572742
> 
> 赞同：0
> 
> 时间：2012-09-24T20:52:14.967
> 
> 标签：entity-framework, events, properties, handler

我想在我的实体（类）更改其 ID 后立即做某事：

```
[Key]
public int MyId { get; set; } 
```

可能吗？我会将该处理程序代码放在“set”（`set { ...handler code... }`）中，但是 EF 不会将 MyId 映射为列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T22:07:19.400

您可以设置任何您需要的处理代码或触发您的自定义事件。EF 只是看到您的属性具有 getter 和 setter，这就是它现在需要（并且可以）关于您的实体的全部内容。

# php - PHP 安全截屏视频

> ID：12572746
> 
> 赞同：0
> 
> 时间：2012-09-24T20:52:24.433
> 
> 标签：php, video

谁能指出我正确的方向来获取 php 安全视频教程/截屏视频。我查看了 lynda.com 之类的网站，但什么也没看到。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:56:13.383

不是视频教程，而是一些来自快速谷歌搜索的 PHP 安全演示幻灯片

[www.slideshare.net/csixty4/intro-to-php-security](http://www.slideshare.net/csixty4/intro-to-php-security)

[www.slideshare.net/kschroeder/php-security-common-2011](http://www.slideshare.net/kschroeder/php-security-common-2011)

[www.slideshare.net/dseguy/php-security-audits](http://www.slideshare.net/dseguy/php-security-audits)

[www.slideshare.net/ctankersley/php-security-tips](http://www.slideshare.net/ctankersley/php-security-tips)

# firefox - Firefox 和 CSS3 动画 - 为什么我的文本会抖动？

> ID：12572749
> 
> 赞同：1
> 
> 时间：2012-09-24T20:52:31.350
> 
> 标签：firefox, css, css-animations

示例链接：http: [//jsfiddle.net/kArnq/1/](http://jsfiddle.net/kArnq/1/)

在 Webkit 中，文本动画完美。没有问题。

然而，在 Firefox 中，字符在滚动时会稍微晃动。也就是说，字符之间的空间在滚动时会稍微移动。

我的猜测是每个字符的计算位置是一个舍入问题，但我希望有办法解决它。

有什么想法吗？

/edit：这是正在发生的事情的动画 gif（当文本移动时会发生这种情况。我只是截取了两个屏幕截图并将它们覆盖，所以你可以看到我所看到的）。

[http://i.imgur.com/bij8A.gif](http://i.imgur.com/bij8A.gif)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-02T22:23:01.650

我尝试使用变换，对我来说效果更好：

```
#foo b{
    -moz-animation-iteration-count: infinite;
    -moz-animation-timing-function: linear;
    -moz-animation-duration:10s;
    -moz-animation-name: scroll;
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-timing-function: linear;
    -webkit-animation-duration:10s;
    -webkit-animation-name: scroll;
    white-space: nowrap;
    font-size: 6em;
    display:block;
    -moz-transform:  translateX(0px);
}

@-moz-keyframes scroll {
    0% {-moz-transform: translateX(0px);}
    100% {-moz-transform: translateX(-620px);}
} 
```

看看这个问题 [改善 CSS3 过渡性能](https://stackoverflow.com/questions/12643240/improving-css3-transition-performance)

# mysql - 如何在 perl dbi 中为 mysql 连接设置 CLIENT_MULTI_RESULTS 标志

> ID：12572750
> 
> 赞同：1
> 
> 时间：2012-09-24T20:52:43.380
> 
> 标签：mysql, perl, stored-procedures

如何在 perl dbi 中为 mysql 连接设置 CLIENT_MULTI_RESULTS 标志？我必须在最后使用带有选择查询的存储过程。我了解到要使用这种程序，我必须设置 CLIENT_MULTI_RESULTS 标志。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:57:36.650

从版本 3.0002_5 开始，驱动程序 ( [DBD::mysql](http://search.cpan.org/perldoc?DBD%3a%3amysql) ) 支持多个结果集，因此会自动设置选项。（最新版本是 4.022，所以人们会认为它是一个稳定的功能。）

有关显示如何获取所有结果集的示例，请参阅相关[文档。](http://search.cpan.org/perldoc?DBD%3a%3amysql#MULTIPLE_RESULT_SETS)

# maven - 当集成测试执行时，“mvn install”是否应该失败？

> ID：12572751
> 
> 赞同：3
> 
> 时间：2012-09-24T20:52:47.190
> 
> 标签：maven, maven-3, maven-failsafe-plugin

我有一个 Maven 项目，它有一个名为“BlahITCase”的集成测试。此测试当前失败，进而导致“mvn install”失败。这是预期的行为吗？我的理解是单元测试（surefire）失败会导致构建失败，但集成测试（使用故障保护）失败不会。

我的 pom 的构建插件部分有以下内容：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-failsafe-plugin</artifactId>
            <version>2.12.3</version>
            <executions>
                <execution>
                    <goals>
                        <goal>integration-test</goal>
                        <goal>verify</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

注释掉验证目标似乎给了我想要的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:35:17.387

failsafe:integration-test 目标将在 verify 生命周期开始时运行，然后 failsafe:verify 使构建失败。failsafe:verify 绑定默认验证生命周期，这将导致失败并停止继续安装

[http://maven.apache.org/plugins/maven-failsafe-plugin/verify-mojo.html](http://maven.apache.org/plugins/maven-failsafe-plugin/verify-mojo.html)

如果绝对需要，您可以尝试告诉故障安全插件忽略失败的测试，但应该将失败的测试用例视为意味着包尚未准备好部署。

[http://maven.apache.org/plugins/maven-failsafe-plugin/verify-mojo.html#testFailureIgnore](http://maven.apache.org/plugins/maven-failsafe-plugin/verify-mojo.html#testFailureIgnore)

# java - 使用 ExecutorService 并行处理作业

> ID：12572752
> 
> 赞同：4
> 
> 时间：2012-09-24T20:53:05.627
> 
> 标签：java, web-crawler, executorservice, threadpoolexecutor

我正在编写一个需要处理大量 URL 的 java 程序。
每个 URL 将按顺序运行以下作业：下载、分析、压缩

我希望每个作业都有固定数量的线程，而不是让一个线程在每个 URL 上一次完成所有作业，以便所有作业在任何给定时间都有线程同时运行。

例如，下载作业将有多个线程来获取和下载 URL，一旦下载了其中一个 URL，它就会将其传递给分析作业中的线程，一旦完成，它就会传递给压缩作业中的线程等。

我正在考虑在 java 中使用 CompletionService，因为它会在完成后立即返回结果，但我不确定它是如何工作的，到目前为止我的代码如下所示：

```
ExecutorService executor = Executors.newFixedThreadPool(3);
CompletionService<DownloadedItem> completionService = new ExecutorCompletionService<DownloadedItem>(executor);

//while list has URL do {
   executor.submit(new DownloadJob(list.getNextURL());//submit to queue for download
//}

//while there is URL left do {
   Future<DownloadedItem> downloadedItem = executor.take();//take the result as soon as it finish
   //what to do here??
//} 
```

我的问题是如何将下载的项目移动到分析作业并在那里完成工作而无需等待所有下载作业完成？我正在考虑为每个工作创建一个 CompletionService，这是一种可行的方法吗？如果没有，是否有更好的替代方法来解决这个问题？请提供例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T21:00:56.923

一旦你提到`IN ORDER`任何尝试为那些按顺序任务使用单独的线程只会使你的系统设计复杂化。

在我看来，最好的办法是让单独的线程同时处理单个 URL。要执行这 3 个步骤，您可以引入另一个抽象（例如使用 3 个可调用对象），但您仍然希望在一个线程中按顺序执行它们。并且不需要完成服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T20:59:53.380

你很接近。首先将您的任务提交给`CompletionService`：

```
completionService.submit(new DownloadJob(list.getNextURL()); 
```

现在抓住`Future`并等待它：

```
DownloadedItem> downloadedItem = executor.take().get(); 
```

调用`get()`可能会阻塞。重复上述行的次数与您提交的项目数一样多。

* * *

如果您需要更大、更大的吞吐量（在您的情况下，一次最多下载三个 URL），请考虑[`async-http-client`](https://github.com/sonatype/async-http-client#readme)允许您同时从数以千计的 URL 下载。它使用 NIO 并且是事件驱动的，不涉及线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T21:22:04.733

您所描述的称为[Pipeline](http://en.wikipedia.org/wiki/Pipeline_%28software%29)。基本上下载任务的输出是分析任务的输入。分析的输出是压缩的输入。似乎有两种选择可以做到这一点：

1）让下载任务知道输出的管道，以便它可以自己提交结果。

```
class DownloadTask implement Runnable {
    Executor analyzePipeline;
    public void run() {
        //Do download stuff
        analyzePipeline.submit(new AnalyzeTask(downloaded content));
    }
} 
```

2) 允许另一个线程将下载任务的结果移动到分析任务的管道中。

```
ExecutorService executor = Executors.newFixedThreadPool(3);
ExecutorService analyzeExecutor = Executors.newFixedThreadPool(3);
CompletionService<DownloadedItem> completionService = new ExecutorCompletionService<DownloadedItem>(executor);

while list has URL do {
   executor.submit(new DownloadJob(list.getNextURL());//submit to queue for download
}

new Thread() {
    public void run() {
        while there is URL left do {
            Future<DownloadedItem> downloadedItem = executor.take();//take the result as soon as it finish
            analyzeExecutor.submit(new AnalyzeJob(downloadedItem.get());
        }
    }
};    
//...and so on 
```

# iphone - 加载设置 iPhone

> ID：12572754
> 
> 赞同：0
> 
> 时间：2012-09-24T20:53:08.777
> 
> 标签：iphone, objective-c, settings, nsuserdefaults

我在标签栏控制器中嵌入了三个 UIViewController。在第二个视图中，有一个 UITextView 和一个 UISwitch，它们的值存储在 NSUserDefault 中。在第三个视图中有一个 UItableView，它的 NSArray 存储在 NSUserDefault 中。现在在第一个视图中我有一个按钮，当我按下这个按钮时，我需要获取 UISwitch、UITextView 和 UITableView 数组的值。问题是，当我打开我的应用程序时，第二个和第三个视图的“viewDidLoad”方法没有被执行，因此 UISwitch、UITextView 和 UITableView 的值不会从它们的 NSUserDefaults 中加载。这个按钮的方法是：

```
- (IBAction)send:(id)sender
{
    if ([MFMessageComposeViewController canSendText]) {
        MFMessageComposeViewController *sms = [[MFMessageComposeViewController alloc] init];

        NSString *textToShow = [self.delegate textToShow];

        if ([self.delegate showCoordinates] == TRUE) {
            NSLog(@"YES, I want Coordinates");
        }

        sms.messageComposeDelegate = self;
        sms.body = textToShow;
        sms.recipients = [self.numberSource giveMeNumbers];
        [self presentModalViewController:sms animated:YES];

    }
    else
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Houston, We have a problem" message:@"You can't send SMS with this device" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert show];
    }
} 
```

问题是

```
NSString *textToShow = [self.delegate textToShow];
NSString *textToShow = [self.delegate textToShow];
sms.recipients = [self.numberSource giveMeNumbers]; 
```

返回“nil”，因为第二个和第三个“viedDidLoad”方法还没有被调用。如果我点击选项卡栏控制器中的第二个和第三个视图，则会调用“viewDidLoad”方法，它们从 NSUserDefaults 获取值，当我按下第一个视图上的按钮时，它会起作用！

我该如何解决？

PS：对不起我的英语不好！:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:55:27.513

首先尝试使用方法加载您的 ViewController `init..`。它会调用他们的`viewDidLoad`.

# ios - 搜索栏中按钮的功能名称

> ID：12572757
> 
> 赞同：0
> 
> 时间：2012-09-24T20:53:28.050
> 
> 标签：ios, ios5, ios4, applescript

![ios搜索栏选项](../Images/c8d3b8554321a8e806ce94fd76714d0e.png)

大家好，有谁知道iOS中搜索栏内的[a...]按钮功能是什么？

我正在寻找有关如何执行此类功能的教程，但已经很难命名函数本身来查找它。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T22:36:26.947

这似乎是一个自定义搜索 UI。

我将其称为通配符搜索。对于所示示例，也可以称为“beginsWith”，对于不同类型的搜索，也可以称为“endsWith”。

对于搜索逻辑： http: [//www.cocoanetics.com/2010/03/filtering-fun-with-predicates/](http://www.cocoanetics.com/2010/03/filtering-fun-with-predicates/)

对于用户界面：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UISearchBar_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISearchBar_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T17:29:20.400

不幸的是，iOS SDK 不包含执行此操作的预构建方式，因此您必须构建自定义控件。使用 UITextField 作为基础并将您的按钮添加为 leftView。

看看这个问题：[向 UITextField leftView 属性添加子视图](https://stackoverflow.com/questions/2830112/adding-subviews-to-uitextfield-leftview-property)

我希望这有帮助。

# python - pip、distribute 和 setuptools 的问题

> ID：12572759
> 
> 赞同：1
> 
> 时间：2012-09-24T20:53:47.500
> 
> 标签：python, setuptools, distribute

我有一个包用来`distribute_setup.py`代替`distribute`-`setuptools`所以我有：

```
from distribute_setup import use_setuptools
use_setuptools() 
```

在包`setup.py`文件的顶部。为了演示这个问题，我创建了一个简单的`setup.py`文件：

```
from distribute_setup import use_setuptools
use_setuptools()

import setuptools
print "PATH TO SETUPTOOLS", setuptools.__file__ 
```

如果我现在创建一个虚拟环境`virtualenv`，并尝试从虚拟环境运行`python setup.py`，`python`我得到：

```
PATH TO SETUPTOOLS /Users/tom/tmp/debug/distribute-0.6.28-py2.7.egg/setuptools/__init__.pyc 
```

这是我所期望的——即实际上是这样`distribute`。但是，如果我现在尝试从虚拟环境中使用 pip 安装“包”：

```
pip install -e git://github.com/astrofrog/test_pip_distribute.git#egg=test_pip_distribute 
```

我得到：

```
PATH TO SETUPTOOLS /Users/tom/tmp/testenv/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg/setuptools/__init__.py 
```

这是“香草”设置工具。为什么会这样？`distribute_setup.py`玩得不好吗`pip`？

可以在此处找到测试“包”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T22:00:49.113

Virtualenv 默认安装 setuptools，默认忽略全局包。

我没有测试任何东西，但尝试做：1）virtualenv testenv --distribute 2）virtualenv testenv --global-site-packages 3）在 virtualenv 中安装分发 4）从 setuptools import setup

设置（... install_requires=['distribute'] ）

# javascript - jQuery幻灯片的优化

> ID：12572760
> 
> 赞同：2
> 
> 时间：2012-09-24T20:54:04.810
> 
> 标签：javascript, jquery, optimization, jquery-selectors

我在下面有以下代码用于幻灯片放映。我想优化此代码，并希望与 SO 联系以尝试获得一些帮助。我知道我正在使用的这些选择器正在工作，但我很好奇是否有更有效的方式来编写我的画廊。我经常写这些相同的情况，并想知道其他人是否觉得我做得对。

我只是在寻找有关格式的总体建议，以及我的 JS 性能优化以及 DRY 代码方法。看看其他人如何编写类似的代码有助于我磨练自己的技能。

**标记**

```
 <a id="next">next</a><a id="prev">prev</a>
    <ul id="thumbnails">
      <li><a href="/path/to/src"><img src="50x50.jpg"></a></li>
      <li><a href="/path/to/src"><img src="50x50.jpg"></a></li>
      <li><a href="/path/to/src"><img src="50x50.jpg"></a></li>
    </ul>
   <img id="main-image" src="path/to/src"> 
```

**JS**

```
$("#thumbnails a").click(function(e){      
  e.preventDefault();

  var $this = $(this),
      thesrc  = $this.attr('href'),
      desc = $this.attr('alt');    

  $this.addClass('current');
  $this.parent().siblings().children('a').removeClass('current');

  $("#main-image").fadeOut(400, function(){
    $('<img/>').attr('src', thesrc).load(function(){
      $("#main-image").attr('src', this.src).fadeIn(400);
      $("#caption").text(desc);
    });
  });                            
});

$("#next").click(function(e){
   e.preventDefault();     
   $('.current').parent().next().children('a').trigger('click');
});                                                                          

$("#prev").click(function(e){
  e.preventDefault();       
  $('.current').parent().prev().children('a').trigger('click');      
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T22:08:38.910

## *[jsBin 演示](http://jsbin.com/alapew/4/edit)*

HTML：

```
 <p>
     <a id="prev">prev</a>
     <a id="next">next</a>    
  </p>

   <div id="thumbnails">
      <img src="1.jpg">
      <img src="2.jpg">
      <img src="3.jpg">
   </div>

  <div id="main-img-container">
       <div id="main-img"></div>
  </div> 
```

基本的 CSS：

```
#thumbnails img{
  height:30px;
}
div#main-img-container{
  height:200px;
  background: #eee url(loading_transparent.gif) no-repeat center center;  
}
div#main-img{
  width:100%;
  height:100%;
  background: transparent no-repeat center center;
  background-size:cover; 
}
#next, #prev{
  cursor:pointer;
  background:#eee;
  padding:4px 10px;
  -webkit-border-radius:5px;
          border-radius:5px;
} 
```

jQuery：

```
var $imgs = $('#thumbnails img');
var imgsN = $imgs.length;
var $main = $('#main-img');
var c = 0; // a 'current' counter

function loadImage(){
  c= c===-1? c=imgsN-1 : c%imgsN; 
  var getSrc = $imgs.eq(c).attr('src');  
  $main.stop().fadeTo(200, 0.7, function(){ // just to make loading a bit visible :)
     $('<img>').attr('src', getSrc).load(function(){
       $main.css({backgroundImage: 'url('+ this.src +')'}).fadeTo(300,1);        
     });
  });  
}
loadImage(); // first kick! :)

$imgs.click(function(){  
  c = $(this).index(); 
  loadImage();  
});

$('#prev, #next').click(function(){
  var myID = this.id=='next' ? c++ : c--;
  loadImage();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:58:35.997

优化和美化：

```
e.preventDefault()
var $this = $(this),
    thesrc = $this.attr('href'),
    desc = $this.attr('alt')
    $this.addClass('current')
    $this.parent()
        .siblings()
        .children('a')
        .removeClass('current')
    $("#main-image").fadeOut(400, function () {
        $('<img/>').attr('src', thesrc)
            .load(function () {
            $("#main-image").attr('src', this.src)
                .fadeIn(400)
            $("#caption").text(desc)
        })
    })
    })
    $("#next").click(function (e) {
        e.preventDefault()
        $('.current').parent()
            .next()
            .children('a')
            .trigger('click')
    })
    $("#prev").click(function (e) {
        e.preventDefault()
        $('.current').parent()
            .prev()
            .children('a')
            .trigger('click')
    }) 
```

# asp.net - 表有外键时如何编写实体框架

> ID：12572761
> 
> 赞同：0
> 
> 时间：2012-09-24T20:54:25.703
> 
> 标签：asp.net, linq, entity-framework

表`t1 {id, name, addr_id}`和`t2 {addr_id, addr}`

当您为`t1`类似创建实体时

```
dim db = new t1entity()
dim tt = from t in db.t1s where t.addr_id 
```

在这里，我不能使用`addr_id`对应的 t

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T22:13:38.087

如果您正确设置了导航属性，则可以使用 where `t.t2.addr_id`。如果您使用的是 .NET 4.0 或更高版本，您可以告诉 EF 直接在实体[中生成`addr_id`属性。](http://blogs.msdn.com/b/adonet/archive/2009/11/06/foreign-key-relationships-in-the-entity-framework.aspx)`t1`这将使用[FK 关联而不是](https://stackoverflow.com/questions/5281974/code-first-independent-associations-vs-foreign-key-associations/5282275#5282275)您目前使用的独立关联。

# ios - 状态栏中时间的显示格式

> ID：12572762
> 
> 赞同：1
> 
> 时间：2012-09-24T20:54:32.370
> 
> 标签：ios, uistatusbar

一位客户向我发送了一封电子邮件，内容是关于我正在尝试找出的一个应用程序中的错误。该错误与时间有关，我无法重新创建它。（此外，我的应用程序已经发布了好几个月，我还没有收到任何其他关于此错误的报告）。我注意到客户在他的状态栏中发送的屏幕截图中，时间显示如下：

下午 3 点 34 分

而不是这样：

下午 3 点 34 分

我的问题是如何让我的状态栏像第一种情况一样显示时间，所以我可以看看这是否与我的错误有关。我的客户在 iPhone 3GS 上使用 iOS 5.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T01:37:58.860

通常这些类型的问题是由它们之间的语言环境和时间格式的差异引起的。让您的客户截取设置应用程序的屏幕截图，特别是 General->International 和 General->Date & Time，然后在您自己的设备上模拟这些设置，看看是否有帮助。

# php - PHP 根据在浏览器中输入的 URL 重定向到不同的 URL

> ID：12572766
> 
> 赞同：-1
> 
> 时间：2012-09-24T20:54:43.507
> 
> 标签：php, url, redirect, browser

我在同一个主机帐户中有 2 个域，它们共享相同的 IP 地址。我想根据用户在浏览器中键入的域重定向到不同的 URL。我想使用 PHP。

例子：

```
<?php
If browser URL is www.example.com or example.com
REDIRECT to www.example.com

ELSE if;

browser URL is www.example.org or example.org
REDIRECT to www.example.org
?> 
```

谢谢我是新手，所以请详细说明，它应该适用于所有浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:24:49.907

有什么理由*必须*在 PHP 中执行此操作吗？它可以完成，但需要重建 URL；就像是

```
<?php
if (preg_match('/^www\./', $_SERVER['HTTP_HOST']) == 0) {
  $url = "http://www." . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'];
  header( "HTTP/1.1 301 Moved Permanently" ); 
  header( "Location: $url" ); 
  exit();
}    
?> 
```

（为什么要使用 301，请参阅[这个问题](https://stackoverflow.com/questions/16298/how-to-redirect-sitea-to-siteb-with-a-or-cname-records)）

请注意，这不处理 HTTPS 或端口 80 以外的端口上的请求。如果您使用的是 Apache，则可以使用 mod_rewrite 引擎来完成；[HTML 5 Boilerplate](http://html5boilerplate.com/)`.htaccess`提供的文件包含一个示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T21:04:05.920

从您的问题来看，尚不清楚您到底想要什么。如果您有两个域（DNS）指向同一个 IP 地址，那么当您在浏览器中插入每个地址时，您将转到该 IP 地址（到该机器/服务器）。该服务器可以（如果已配置）根据地址名称区分这些请求并将这些请求重定向到例如不同的子文件夹 - 这称为**虚拟主机**。尝试搜索词“虚拟主机”并找出您真正需要的内容。

# extjs - 如何在 Spket 中为 Ext UX 组件设置自定义代码完成？

> ID：12572773
> 
> 赞同：2
> 
> 时间：2012-09-24T20:55:05.983
> 
> 标签：extjs, aptana, spket

我最近用 Spket 设置了 Aptana Studio 3，为 Ext JS 提供语法高亮和（更重要的是）代码完成。

这似乎适用于标准的 Ext 组件。是否也可以获得自定义`ext.ux`组件的代码完成？我已经尝试将 .js 文件添加到 javascript 配置文件中（就像我`ext.jsb`为核心 Ext 添加的一样），但这似乎没有任何作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:13:45.157

要获得自动建议`Ext.ux components`，

编辑 ext.jsb2 文件并找到`User Extension JS Pack` 在 fileIncludes 数组中添加 Ext.ux 组件 js 文件路径的下方。喜欢

```
 {
   "name"    : "User Extension JS Pack",
   "file"    : "examples/ux/ux-all.js",
   "isDebug" : true,
   "fileIncludes" : [{
      "text" : "SuperBoxSelect.js",
      "path" : "examples/ux/"
      }]
 } 
```

保存文件并重新启动编辑器。检查添加的组件自动建议。

# javascript - jqGrid 的 addRowData 挂起大量记录

> ID：12572780
> 
> 赞同：0
> 
> 时间：2012-09-24T20:55:58.610
> 
> 标签：javascript, jquery, jquery-plugins, jqgrid, grid

jqGrid`addRowData(idColumnName, array, direction, position)`采用一组行并将它们插入到网格的当前页面中，忽略任何分页设置。因此，如果一个数组包含 3,000 行，则所有 3,000 行都将插入到当前页面中。

这会在大多数浏览器中引发“无响应脚本”错误。

可以使用哪些“技巧”将大量行（即 3,000）插入到 jqGrid 的特定位置并使其尊重分页设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T06:28:55.257

使用`addRowData`更新（或添加）大量页面是错误的方法。jqGrid 使用 internal`data`和`_index`options 来保存本地数据（例如，请参见[此处](https://stackoverflow.com/a/9145342/315935)、[此处](https://stackoverflow.com/a/8026210/315935)和[此处](https://stackoverflow.com/a/12373813/315935)）。因此，您可以获得对内部参数*的引用*。然后你可以以任何方式更新数组。您应该另外将新添加的行的索引放入或调用[refreshIndex](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.base.js#L1080-1095)（参见[此处](https://stackoverflow.com/a/3348688/315935)的代码示例），它会重建. 在最后一种情况下，您还必须拥有包含属性的完整数据源 ( )。毕竟你应该重新加载网格（见`data``getGridParam``_index``_index``data``id`[这里](https://stackoverflow.com/a/3808014/315935)关于`reloadGrid`) 的参数来显示更新的网格。

# ruby - 算法：字符串相似度

> ID：12572786
> 
> 赞同：0
> 
> 时间：2012-09-24T20:56:10.633
> 
> 标签：ruby, algorithm, string-algorithm

我正在尝试在 InterviewStreet 上解决这个挑战：[https ://www.interviewstreet.com/challenges/dashboard/#problem/4edb8abd7cacd](https://www.interviewstreet.com/challenges/dashboard/#problem/4edb8abd7cacd)

我已经有了一个可行的算法，但我会提高它的性能。你有什么建议吗？

```
# Enter your code here. Read input from STDIN. Print output to STDOUT
N = gets.to_i
words = []

while words.length < N do
  words << gets.sub(/\\n$/, '').strip
end 

words.each do |word|
  count = 0
  (word.length).times do |i|
    sub = word[i..-1]
    j=0
    while j < sub.length && sub[j] == word[j] do
      count += 1 
      j+=1
    end
  end
  puts count
end 
```

谢谢，格雷格

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T21:29:57.063

您的算法在最坏的情况下是二次的。对于大多数正常的单词，没有二次行为，并且它运行得很好（由于它的简单性，它可​​能比更复杂的算法运行得更快，并且具有更好的最坏情况行为）。

一种具有线性最坏情况行为的算法是 Z 算法。ruby我不会说太多，所以暂且，Python版就得做：

```
def zarray(str):
    Z = [0]*len(str)
    Z[0] = len(str)
    left, right, i = 0, 0, 1
    while i < len(str):
        if i > right:
            j, k = 0, i
            while k < len(str) and str[j] == str[k]:
                j += 1
                k += 1
            Z[i] = j
            if j > 0:
                left, right = i, i+j-1
        else:
            z = Z[i-left]
            s = right-i+1
            if z < s:
                Z[i] = z
            else:
                j, k = s, s+i
                while k < len(str) and str[j] == str[k]:
                    j += 1
                    k += 1
                Z[i] = j
                left, right = i, i+j-1
        i += 1
    return Z

def similarity(s):
    return sum(zarray(s)) 
```

### 算法说明：

这个想法很简单（但是，像大多数好想法一样，不容易拥有）。让我们将一个（非空）子字符串称为前缀子字符串，它也是字符串的前缀。为了避免重新计算，该算法使用前缀子字符串的窗口，该窗口在当前考虑的索引之前开始，向右延伸最远（最初，该窗口是空的）。

使用的变量和算法的不变量：

*   `i`，所考虑的索引，从 1 开始（对于基于 0 的索引；不考虑整个字符串）并递增到`length - 1`
*   `left`和`right`，前缀子字符串窗口的第一个和最后一个索引；不变量：
    1.  `left < i`, `left <= right < length(S)`,`left > 0`或者`right < 1`,
    2.  如果`left > 0`, 那么`S[left .. right]`是 and 的最大公共`S`前缀`S[left .. ]`,
    3.  如果`1 <= j < i`和`S[j .. k]`是 的前缀`S`，则`k <= right`
*   一个数组`Z`，不变量： for `1 <= k < i`，包含and`Z[k]`的最长公共前缀的长度。`S[k .. ]``S`

算法：

1.  设置`i = 1`, `left = right = 0`（`left <= right < 1`允许任何值），并`Z[j] = 0`为所有索引设置`1 <= j < length(S)`。
2.  如果`i == length(S)`，停止。
3.  如果`i > right`，求和`l`的最长公共前缀的长度`S`，`S[i .. ]`将其存储在 中`Z[i]`。如果`l > 0`我们发现一个窗口比前一个窗口延伸得更远，则设置`left = i`and `right = i+l-1`，否则保持不变。递增`i`并转到 2。
4.  在这里`left < i <= right`，子串`S[i .. right]`是已知的——因为它`S[left .. right]`是 的前缀`S`，所以它等于`S[i-left .. right-left]`。

    `S`现在考虑从 index 开始的子字符串的最长公共前缀`i - left`。它的长度是`Z[i-left]`，因此`S[k] = S[i-left + k]`对于`0 <= k < Z[i-left]`和
    `S[Z[i-left]] ≠ S[i-left+Z[i-left]]`。现在，如果`Z[i-left] <= right-i`，则`i + Z[i-left]`在已知窗口内，因此

    ```
    S[i + Z[i-left]] = S[i-left + Z[i-left]] ≠ S[Z[i-left]]
    S[i + k]         = S[i-left + k]         = S[k]   for 0 <= k < Z[i-left] 
    ```

    我们看到 和 的最长公共前缀的`S`长度`S[i .. ]`有 length `Z[i-left]`。然后设置`Z[i] = Z[i-left]`，递增`i`，然后转到 2。

    否则，`S[i .. right]`是 的前缀，`S`我们检查它的扩展范围，开始比较索引处的字符`right+1`和`right+1 - i`。设长度为`l`。设置`Z[i] = l`, `left = i`, `right = i + l - 1`, increment `i`，然后转到 2。

由于窗口从不向左移动，并且比较总是在窗口结束后开始，因此字符串中的每个字符最多与字符串中较早的字符比较一次成功，并且对于每个起始索引，最多有一个不成功的比较，因此该算法是线性的。

# javascript - 在弹出窗口中打开 Twitter 共享页面

> ID：12572795
> 
> 赞同：0
> 
> 时间：2012-09-24T20:56:39.787
> 
> 标签：javascript, jquery

我试图让一个外部 url 在弹出窗口中打开，所以我找到了这段代码，我试图让它工作。

这就是我所拥有的：

JS：

```
$(document).ready(function() {

  $.get('http://www.mydomain.com/',function(data) {
    $(this).simpledialog({
        'mode' : 'blank',
        'prompt': false,
        'forceInput': false,
        'useModal':true,
        'fullHTML' : data
    });  
  });

}); 
```

链接：

```
<a id="mylink" href="http://www.twitter.com/share?url=http://www.mydomain.com/somepage.html"> 
```

我的问题是它没有在弹出窗口中打开所以我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T00:50:49.953

问题是您正在运行`simpledialog`，`this`在您的 JS 中是 AJAX 对象。将其更改为以下内容：

```
$("#mylink").simpledialog({ ... }); 
```

# heroku - Heroku在家？

> ID：12572801
> 
> 赞同：2
> 
> 时间：2012-09-24T20:56:55.700
> 
> 标签：heroku

[Heroku buildpacks](https://devcenter.heroku.com/articles/buildpacks)（与[mason](https://github.com/ddollar/mason)一起）让我在自己的计算机上从我的应用程序创建 slug，有没有办法（VirtualBox？Vagrant？）在我自己的盒子上运行 slug，这样我就可以创建类似迷你 Heroku 的东西？

**编辑**

我对梅森的了解越多，似乎就越能解决这个问题。但是文档很薄，`Malformed version number string sh`当我尝试构建时遇到错误，或者`no such file to load -- foreman/engine (LoadError)`如果我尝试在 lucid64 虚拟机上运行构建。对于这些问题的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T15:51:29.683

我现在很难让它工作，但如果你遇到同样的问题，看看@peterkeen 的[dokuen](https://github.com/peterkeen/dokuen)，它管理着一个 locl heroku 类型的环境！

# sql - 没有创建表？

> ID：12572804
> 
> 赞同：1
> 
> 时间：2012-09-24T20:57:08.827
> 
> 标签：sql, postgresql

我创建了一些 SQL 代码来创建基于 ERD 的 7 个表。

它似乎非常接近工作，除了它说

> 外键约束中引用的列“inv_no”不存在

但是，创建了 inv_no 所在的表 invoice，并且具有 inv_no 列，所以我很困惑如何创建需要 inv_no 作为外键的其他表 invoiceLine 是不存在的。

这是我的代码：

```
CREATE TABLE invoice(

        inv_no          INTEGER         NOT NULL,
        cust_id         INTEGER         NOT NULL,
        inv_date        DATE            NOT NULL,
CONSTRAINT PK_invoice_inv_no PRIMARY KEY(inv_no),
CONSTRAINT FK_customer_cust_id FOREIGN KEY(cust_id) REFERENCES customer(cust_id)
);

CREATE TABLE invoiceLine(

        inv_line_no     INTEGER         NOT NULL,
        inv_line_qty    INTEGER         NOT NULL,
CONSTRAINT PK_invoiceLine_inv_line_no PRIMARY KEY(inv_line_no),
CONSTRAINT FK_invoice_inv_no FOREIGN KEY(inv_no) REFERENCES invoice(inv_no)
); 
```

同样，有问题的表是 invoiceLine，它似乎依赖于 invoice 表中的 inv_no。

如果有人能发现我的错误，那就太好了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T21:04:12.553

错误消息是正确的，发票行中没有列`inv_no`。您还需要声明该列：

```
CREATE TABLE invoiceLine(
        ***inv_no INTEGER NOT NULL,***
       inv_line_no INTEGER NOT NULL,
       inv_line_qty INTEGER NOT NULL,
约束 PK_invoiceLine_inv_line_no 主键（inv_line_no），
约束 FK_invoice_inv_no 外键（inv_no）参考发票（inv_no）
);

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T21:04:21.953

您的发票行表不应该阅读吗？

```
CREATE TABLE invoiceLine(

        inv_line_no     INTEGER         NOT NULL,
        inv_line_qty    INTEGER         NOT NULL,
CONSTRAINT PK_invoiceLine_inv_line_no PRIMARY KEY(inv_line_no),
CONSTRAINT FK_invoice_inv_no FOREIGN KEY(inv_line_no) REFERENCES invoice(inv_no)
); 
```

**`inv_line_no`代替`inv_no`**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T21:13:48.667

您可能希望在添加外键约束之前将 inv_no 列添加到 invoiceLine 表。

```
CREATE TABLE invoiceLine(

    inv_line_no     INTEGER         NOT NULL,
    inv_line_qty    INTEGER         NOT NULL,
    inv_no          Integer         Not Null,
CONSTRAINT PK_invoiceLine_inv_line_no PRIMARY KEY(inv_line_no),
CONSTRAINT FK_invoice_inv_no FOREIGN KEY(inv_no) REFERENCES invoice(inv_no)
); 
```

# c++ - 二进制表达式中的 GCC 常量临时

> ID：12572809
> 
> 赞同：0
> 
> 时间：2012-09-24T20:57:28.853
> 
> 标签：c++, gcc

考虑以下代码：

```
struct A {
    A& add( int i ) { return *this; }
};

A& operator+=( A& a, int i ) { return a; }

void f() {
    A a1 = A().add( 1 ); // expr 1
    A a2 = A() += 1;     // expr 2
} 
```

VC 接受表达式 1 和 2。表达式 2 被 GCC 拒绝，并显示“没有可行的重载 '+='”。但是，对于引用常量对象的运算符，可以接受这样的表达式：

```
const A& operator+=( const A& a, int i ) { return a; } 
```

为什么GCC在不在方法调用上下文中时强制这个临时在操作符上下文中保持不变，这是正确的行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:59:35.400

```
A(); 
```

创建临时。

```
A& operator+=( A& a, int i ) { return a; } 
```

临时不能绑定到`reference`. MSVC 接受这一点，因为它是非标准扩展。查看[右值到左值的转换 Visual Studio](https://stackoverflow.com/questions/11508607/rvalue-to-lvalue-conversion-visual-studio)

# php - 以文本数据类型将php数据导出到excel中

> ID：12572811
> 
> 赞同：3
> 
> 时间：2012-09-24T20:57:34.177
> 
> 标签：php, phpexcel

我想将我的 php 网页导出到 excel。

为此，我发现以下代码有效，但存在问题。

列中的值以 php 中的“00003421”之类的开头，但是当它在 excel 中导出时，它在单元格中仅显示“3421”。它忽略零值。此外，我希望它们采用文本数据类型。

如何按原样（包括零）以纯文本格式导出数据？

```
header("Content-type: application/vnd.ms-excel");
header("Content-Disposition: attachment; filename=export.xls");
header("Content-Transfer-Encoding: BINARY"); 
```

它是具有 4 列和大约 20,000 行的表格数据。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T08:55:24.943

一种可能的解决方案是创建一个新的值 Binder 方法来覆盖 PHPExcel 方法。（PHPExcel 试图猜测我们在单元格中插入的数据类型。所以，按照 markBaker 的建议，我创建了这个类来覆盖这个方法：

```
class PHPExcel_Cell_MyValueBinder extends PHPExcel_Cell_DefaultValueBinder
implements PHPExcel_Cell_IValueBinder 
{ 
    public function bindValue(PHPExcel_Cell $cell, $value = null) { 
        // sanitize UTF-8 strings 
        if (is_string($value)) { 
            $value = PHPExcel_Shared_String::SanitizeUTF8($value); 
        } 

        // if it is a string and starts with 0, the value will be converted into string 
        if (is_string($value) && $value[0] == '0') { 
            $cell->setValueExplicit($value, PHPExcel_Cell_DataType::TYPE_STRING); 
            return true; 
        } 
        return parent::bindValue($cell, $value); 
    } 
} 
```

这是 markbaker 在这个[问题](https://stackoverflow.com/questions/12457610/reading-numbers-as-text-format-with-phpexcel)中向我推荐的提示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T08:54:20.507

如果您的`0`单元格的数据类型不是，则只是隐藏`text`，选择excel中的所有单元格，然后将数据类型设置为`text`。

或者尝试为php中的每个值添加单引号，如果数字`'00003421'`以单引号开头`'\'00003421'`，excel将知道这是数据类型。`text`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-01T15:01:37.473

我已经通过以下方式解决了这个问题。

你可以试试这个

```
<?php
$number='00003421';
echo "<td>=\"$number\"</td>";
?> 
```

# ios - xcode 4.5、iOS 6.0 SDK 编译错误 - base.h

> ID：12572814
> 
> 赞同：2
> 
> 时间：2012-09-24T20:57:46.080
> 
> 标签：ios, xcode4.5, llvm-gcc, ios6

我从 xcode 4.4.3 升级到 4.5，无法再构建我们的应用程序。我在 iOS 6.0 SDK base.h 中收到以下编译错误：

/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/usr/include/dispatch/base.h:103:44：错误：令牌之前缺少二进制运算符“（ "

我立即尝试恢复到 iOS 5.1.1 SDK，但发现我做不到。我去了 Xcode->preferences->downloads 但没有以前的 SDK 版本可供安装.. 只有模拟器和命令行工具。

我们的一位开发人员发现从 LLVM GCC 4.2 恢复到 Apple LLVM 编译器 4.1 解决了编译问题。

但似乎我必须下载以前版本的 xcode 4.4.3 才能获得 iOS 5.1.1 SDK。

有人在 xcode 4.5 下安装了 iOS 5.1.1 sdk 吗？

有没有人遇到过 iOS 6.0 SDK 构建问题？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:12:29.157

我在使用 LLVM GCC 4.2 时遇到了同样的错误。

base.h 包含在 dispatch/dispatch.h 中，我需要更改包含 . 我发现源文件应该是Objective C（或C++）文件。不是 C（或 C++）文件。

两种解决方案。1\. 将文件扩展名从 cpp 更改为 m 或 mm。2\. 将 XCode 的 Identity and Type of Utility 区域的 File Type 更改为“Objective C”或“Objective C++”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T21:33:27.420

我遇到了从 4.3.2 IOS5.1 到 4.5 IOS6.0 的各种问题。恶梦。

见我的帖子：

[IOS 6.0 xcode 4.5 编译错误#import 代码保存在类外的文件中](https://stackoverflow.com/questions/12609963/ios-6-0-xcode-4-5-compilation-errors-import-code-held-in-files-outside-of-the-c#comment16999364_12609963)

当我明天开始工作时，我将删除所有框架，重新添加它们。

此外，检查 Github 以查看我的某些第三方对象是否有针对 IOS6 的构建更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T13:43:02.510

我体验到，当我在 SDK 6.0 上构建应用程序时，我的一些视图控制器只显示了屏幕的一半。设备是否安装了 iOS 5 或 6 并不重要。似乎该问题是由用于构建的 SDK 引起的。

# css - 在 CSS 中混合简单的颜色

> ID：12572817
> 
> 赞同：0
> 
> 时间：2012-09-24T20:58:04.380
> 
> 标签：css, svg, less

我有几个 SVG，它们会根据某些参数改变填充颜色。当两个参数在同一个 SVG 特征上时，我想混合两种对应的颜色，这样用户就可以知道在这个 SVG 中有这两种不同的“东西”。

例如，这是混合 BlueViolet (8A2BE2) 和 Aquamarine (7FFFD4) 后应用的结果颜色。Javascript中有一些公式吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:01:24.740

分别添加每个 R/G/B 组件并除以 2，例如

```
(8A + 7F) / 2 = 84
(2B + FF) / 2 = 95
(E2 + D4) / 2 = DB

mixed color = #8495DB 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T21:03:10.263

有一个出色的 jQuery 插件，叫做[xcolor](http://www.xarg.org/project/jquery-color-plugin-xcolor/)，它在处理颜色时很有帮助。您正在寻找的可能是[颜色混合](http://www.xarg.org/project/jquery-color-plugin-xcolor/#meth_combine)方法。

# iphone - 将 .xib 文件添加到情节提要中的 ViewController

> ID：12572818
> 
> 赞同：2
> 
> 时间：2012-09-24T20:58:05.177
> 
> 标签：iphone, objective-c, ios, xcode

我在 iPhone 开发方面是个新手。

我有一个包含 ViewController 的故事板。在 ViewController 内部，我有一个 UIScrollView。

我想在我的滚动视图中添加两个图像和其他控件。我阅读[了这个链接](https://stackoverflow.com/questions/10773584/how-to-add-multiple-uiimageviews-to-paging-uiscrollview)，并决定实施描述为答案的想法，但不是他以编程方式执行的方式。

我创建一个新`.xib`文件，然后向其中添加一个 UIView 并在其中添加我的 UIImages 和 Labels。

现在，我想将此 UIView 添加到情节提要中的 UIScrollView 中。这是我的代码：

```
OfferUIView *newPageView = [[OfferUIView alloc] init];
self.newPageView.contentMode = UIViewContentModeScaleAspectFill;
newPageView.frame = frame;
[self.scrollView addSubview:newPageView];
[self.pageViews replaceObjectAtIndex:page withObject:newPageView]; 
```

它不适用于我的 UIView 这是一个 .xib 文件，但如果我添加例如一个 UIImageView 像：

```
UIImageView *newPageView = [[UIImageView alloc] initWithImage:image];
self.newPageView.contentMode = UIViewContentModeScaleAspectFill;
newPageView.frame = frame;
[self.scrollView addSubview:newPageView];
[self.pageViews replaceObjectAtIndex:page withObject:newPageView]; 
```

然后它完美地工作。那么如何修复我的代码以添加 .xib 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T23:11:51.227

卡洛斯给出的答案可能应该与 1 调整一起使用。在我看来，您的 .xib 文件可能只包含 UIView 而不是 UIViewController。如果是这种情况，您将需要做更多类似的事情：

```
NSArray *views = [[NSBundle mainBundle] loadNibNamed:@"NameOfXIB" owner:self options:nil];
UIView *view = [views objectAtIndex:0]; 
```

要么，要么您需要更改 .xib 文件以包含 UIViewController，但这听起来不像您所追求的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T21:09:06.143

您可以尝试：

```
UIViewController *temporaryController = [[UIViewController alloc] 
                                          initWithNibName:@"NameOfXIB" 
                                                   bundle:nil]; 
```

进而：

```
[self.scrollView addSubview:[temporaryController view]]; 
```

# asp.net-mvc - 使用 SimpleMembership 获取用户信息

> ID：12572819
> 
> 赞同：4
> 
> 时间：2012-09-24T20:58:06.940
> 
> 标签：asp.net-mvc, login, viewdata, user-data, simplemembership

仍在尝试使用 MVC4 掌握新的 SimpleMembership。我将模型更改为包含 Forename 和 Surname，效果很好。

我想更改登录时显示的信息，而不是在视图中使用 User.Identity.Name 我想做类似 User.Identity.Forename 的操作，实现此目的的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T22:02:46.587

Yon 可以利用`@Html.RenderAction()`ASP.NET MVC 中可用的功能来显示此类信息。

**_Layout.cshtml 查看**

```
@{Html.RenderAction("UserInfo", "Account");} 
```

**查看模型**

```
public class UserInfo
{
    public bool IsAuthenticated {get;set;}
    public string ForeName {get;set;}
} 
```

**帐户控制器**

```
public PartialViewResult UserInfo()
{
   var model = new UserInfo();

   model.IsAutenticated = httpContext.User.Identity.IsAuthenticated;

   if(model.IsAuthenticated)
   {
       // Hit the database and retrieve the Forename
       model.ForeName = Database.Users.Single(u => u.UserName == httpContext.User.Identity.UserName).ForeName;

       //Return populated ViewModel
       return this.PartialView(model);
   }

   //return the model with IsAuthenticated only
   return this.PartialView(model);
} 
```

**用户信息视图**

```
@model UserInfo

@if(Model.IsAuthenticated)
{
    <text>Hello, <strong>@Model.ForeName</strong>!
    [ @Html.ActionLink("Log Off", "LogOff", "Account") ]
    </text>
}
else
{
    @:[ @Html.ActionLink("Log On", "LogOn", "Account") ]
} 
```

这做了一些事情并带来了一些选项：

1.  使您的视图不必在 HttpContext 周围嗅探。让控制器来处理它。
2.  您现在可以将它与[[OutputCache]](http://msdn.microsoft.com/en-us/library/system.web.mvc.outputcacheattribute%28v=vs.108%29.aspx)属性结合使用，这样您就不必在每个页面中都呈现它。
3.  如果您需要向 UserInfo 屏幕添加更多内容，只需更新 ViewModel 并填充数据即可。没有魔法，没有 ViewBag 等。

# safari - 如何使用 applescript 启动 Safari 和重置 Safari？

> ID：12572820
> 
> 赞同：-1
> 
> 时间：2012-09-24T20:58:08.950
> 
> 标签：safari, applescript, reset, launch, automator

我是 Applescript 的新手，我摆弄着 Automator，但我发现它是有限的。我想进入自动化的编码方面。我不知道这是否可能，我想用 Applescript 做的是：

1.  启动 Safari，然后
2.  点击一个链接，然后
3.  重置 Safari
4.  点击一个链接
5.  重置 Safari

如果我举个例子：

1.  我从 Dock 启动 Safari - 这将打开 www.apple.com 2 我单击“支持”链接
2.  我进入 Safari 菜单并从那里重置 safari，它会打开一个重置 safari 窗口，然后单击重置（然后 safari 会返回主页 www.apple.com）
3.  我点击“支持”
4.  我进入 Safari 菜单并从那里重置 safari，它会打开一个重置 safari 窗口，然后单击重置（然后 safari 会返回主页 www.apple.com）

我怎样才能用 Applescript 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T01:41:38.520

下次请提供您的代码。即使是一次尝试也会让其他用户更愿意回答你的问题。我不明白您为什么不直接转到第二个 URL，除非您当然是在尝试模拟网站的流量。话虽如此，这应该为您指明正确的方向：

```
repeat 2 times
    tell application "Safari"
        activate
        set URL of document 1 to "http://www.apple.com/"
        delay 3
        do JavaScript "document.getElementById('gn-support').childNodes[0].click()" in document 1
        delay 3
    end tell

    tell application "System Events"
        tell process "Safari"
            click menu item "Reset Safari…" of menu 1 of menu bar item "Safari" of menu bar 1
            delay 1
            click button "Reset" of window "Reset Safari"
            delay 1
        end tell
    end tell
end repeat 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T00:53:47.260

我会进入 Safari AppleScript 字典。许多应用程序都有自己的一套措辞，您可以通过“告诉”该应用程序做某事来直接使用这些措辞。

打开字典的一种方法是使用脚本编辑器的文件菜单中的打开字典项。当您使用此项目时，您将获得具有字典的可用应用程序的列表。选择一个并单击打开按钮或使用浏览按钮导航到未列出的应用程序。

首先，您可以使用*激活*来打开一个应用程序并将其带到您的窗口前面。

```
Tell application "Safari" to activate 
```

您也可以创建一个新窗口：

```
tell application "Safari" to activate
    make new document
end tell 
```

我首先建议查看[https://developer.apple.com/library/mac/ipad/#documentation/AppleScript/Conceptual/AppleScriptX/AppleScriptX.html](https://developer.apple.com/library/mac/ipad/#documentation/AppleScript/Conceptual/AppleScriptX/AppleScriptX.html)看看这是否能回答任何直接的问题。

快乐的苹果脚本！

# jquery - Jquery 插件收银机问题

> ID：12572827
> 
> 赞同：1
> 
> 时间：2012-09-24T20:58:54.450
> 
> 标签：jquery, jquery-plugins, plugins

有人建议我尝试这个简单的[jQuery 插件](https://github.com/alonzzzo/cashRegister/blob/master/jquery.cashRegister.js)来给数字一个收银机效果

首先，我想在[jsfiiddle](http://jsfiddle.net/XT7rr/1/)中进行测试，看看它是如何工作的，但是出现了问题，因为我没有得到任何效果。我对插件所做的唯一修改如下：

```
 easing: 'swing',
duration: 1700, 
```

并不是

```
 easing: 'linear',
        duration: 700, 
```

我不明白我做错了什么，或者插件中有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:41:15.110

它根本不适合你，因为你没有正确使用函数参数。

但即使你做对了——这个插件很糟糕。效果很差。

试试这个：

[http://code.google.com/p/jquery-formatcurrency/](http://code.google.com/p/jquery-formatcurrency/)

工作示例（我对其进行了测试，效果很好）

[http://www.bendewey.com/code/formatcurrency/demo/](http://www.bendewey.com/code/formatcurrency/demo/)

资源：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>JQuery FormatCurrency Sample</title>
        <script type="text/javascript" src="jquery-1.8.2.min.js"></script>
        <script type="text/javascript" src="jquery.formatCurrency-1.4.0.min.js"></script>
        <style type="text/css">
            body, div  { margin:0px auto; padding:0px; }

            .main { margin:40px; }

            .sample { float:left; margin:10px; padding:4px; border:1px solid #888; width:350px; }

            .sample h3 { margin:-4px; margin-bottom:10px; padding:4px; background:#555; color:#eee; }

            .currencyLabel { display:block; }        
        </style>
        <script type="text/javascript">
            // Sample 1
            $(document).ready(function()
            {
                $('#currencyButton').click(function()
                {
                    $('#currencyField').formatCurrency();
                    $('#currencyField').formatCurrency('.currencyLabel');
                });
            });

            // Sample 2
            $(document).ready(function()
            {
                $('.currency').blur(function()
                {
                    $('.currency').formatCurrency();
                });
            });
        </script>
    </head>
<body>
    <div class="main">
        <div class="formPage">
            <h1>Format Currency Sample</h1>

            <div class="sample">
                <h3>Formatting Using Button Click</h3>
                <input type="textbox" id="currencyField" value="$1,220.00" />
                <input type="button" id="currencyButton" value="Convert" />

                <div>
                    Formatting Currency to an Html Span tag.
                    <span class="currencyLabel">$1,220.00</span>
                </div>
            </div>

            <div class="sample">
                <h3>Formatting Using Blur (Lost Focus)</h3>

                <input type="textbox" id="currencyField" class='currency' value="$1,220.00" />
            </div>

        </div>
    </div>
</body>
</html> 
```

# email - 我想在我们的客户注册我们的网站时向他们发送一张独特的折扣券。我该怎么做呢？

> ID：12572830
> 
> 赞同：0
> 
> 时间：2012-09-24T20:59:08.980
> 
> 标签：email, coupon

首先，感谢您阅读本文并提供一些帮助。我经营一个在线网站，我想向所有注册并为我们网站创建帐户的人发送优惠券。此优惠券必须对每个注册的客户都是唯一的（即，没有两个客户在注册时可以拥有相同的优惠券）。我将如何编码？在 admin 下，我们有一个 coupon_add 文件、Coupon_edit、Coupon_overview 和 Coupon_delete。我们还有一个 customer_overview 文件，其中包含电子邮件，以及他们在那里创建帐户的日期和时间。我将如何解决这个问题？谢谢你们的时间，我真的很感激。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:16:19.023

1.  用户注册时创建随机的数字和/或字符序列（*折扣代码*）。计算碰撞的概率是多少（生成相同的序列两次）。例如，使用 10 个字母数字字符几乎是不可能的。

2.  将此序列存储在数据库中并将其与用户相关联。设置唯一约束以防万一。高级：使用散列来避免以纯文本形式存储折扣代码

3.  当用户输入折扣码时，找到为该用户生成的折扣码并进行比较。高级：散列用户输入的内容并与存储的散列进行比较。

您的问题非常广泛，因此请不要询问有关数据库、散列、随机化等的详细信息。这是一个通用配方，应该适用于每种语言和技术堆栈。

# php - DomPDF Codeigniter 字符集未正确呈现

> ID：12572831
> 
> 赞同：0
> 
> 时间：2012-09-24T20:59:14.450
> 
> 标签：php, codeigniter, dompdf, fgetcsv

我对 DomPDF 有一个很好的问题，它确实会消除重音字符。我做了 Phil Sturgeon 在[Phil Sturgeon 关于 UTF-8 对 Codeigniter 的支持上](http://philsturgeon.co.uk/blog/2009/08/UTF-8-support-for-CodeIgniter)建议的所有事情， 但唯一的结果是 PDF 的第一页还可以，但其余部分是错误的。

任何人有任何建议或解决方案吗？

顺便说一句，我通过带有 PHP fgetcsv() 的 csv 文件导入，我的 php-array 看起来不错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:59:53.593

终于解决了：

首先，我采取了 Phil Sturgeon 建议的所有步骤，但后来我发现我需要删除 META 设置。

在将 HTML 发布到 DomPDF 之前，我做了一个 PHP

```
$html = utf8_decode($html); 
```

但在此之前，您需要从 HTML 中删除 META 字符集。并确保在您的文档中添加正确的页尾，我使用了带有一些 CSS 的 div

```
<div style="page-break-before:always"></div> 
```

在每一章的结尾。

# jquery - 将滚动条添加到浮动表单

> ID：12572833
> 
> 赞同：0
> 
> 时间：2012-09-24T20:59:21.350
> 
> 标签：jquery, html, forms, jquery-plugins, scrollbar

我有一个注册表单，它只是首页上的一个浮动容器。我想向它添加一个滚动条，但由于某种原因它不起作用。我正在使用这个滚动条[插件](http://manos.malihu.gr/jquery-custom-content-scroller)。这是我的代码：[小提琴](http://jsfiddle.net/Q6ak6/)

有人可以告诉我我做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T22:45:07.963

您还需要在要应用滚动条的元素上设置高度，并确保溢出：自动；已设置。

可以找到一个工作示例：[http](http://pastebin.com/VsDHRZtd) ://pastebin.com/VsDHRZtd （jsfiddle 不起作用，我只在 localhost 上使用此代码），确保文件也按照文件位于其相关位置。

享受 ：）

# python - 如何在python源码中配置pylint

> ID：12572835
> 
> 赞同：8
> 
> 时间：2012-09-24T20:59:26.973
> 
> 标签：python, suppress-warnings, pylint

是否可以在 python 源代码本身中禁用某些 pylint 错误/警告？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-24T21:30:23.350

```
def foo():
    print "000000000000000000000000000000000000000000000000000000000000000000000000000"
print "111111111111111111111111111111111111111111111111111111111111111111111111111" 
```

pylint 输出：

```
C:  2: Line too long (87/80)
C:  3: Line too long (83/80)
C:  1: Missing docstring
C:  1:foo: Black listed name "foo"
C:  1:foo: Missing docstring 
```

添加注释“# pylint: disable=CODE”，“行太长”消息的代码 - C0301：

```
def foo():
    # pylint: disable=C0301
    print "000000000000000000000000000000000000000000000000000000000000000000000000000"
print "111111111111111111111111111111111111111111111111111111111111111111111111111" 
```

pylint 输出：

```
I:  2: Locally disabling C0301
C:  4: Line too long (83/80)
C:  1: Missing docstring
C:  1:foo: Black listed name "foo"
C:  1:foo: Missing docstring 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-25T07:02:12.060

@kalgasnik 提到的 #pylint: disable 语法是正确的。[您可以在Pylint 常见问题解答](http://docs.pylint.org/message-control)中找到更多相关信息（您的问题是`meth2`）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-24T21:22:27.743

在 Eclipse IDE 中，使用 pydev，您可以在代码行之后添加注释，格式为`# IGNORE:_ID_`. 我不知道这是否也适用于其他程序。例如：

```
import something  # IGNORE:W0611 
```

# iphone - 在哪里放置常见的 UIAlertView 代码

> ID：12572841
> 
> 赞同：2
> 
> 时间：2012-09-24T20:59:53.923
> 
> 标签：iphone

我有一个我们要求用户输入的密码 UIAlertView。我需要根据场景在不同的视图上询问它，从 downloadViewController（在用户下载他们的数据之后），当他们切换到他们的数据（如果用户有多个帐户，每个帐户都有一个密码），以及当应用从睡眠中醒来（来自应用程序委托）。

我有常见的 UIAlertView 代码，基本上检查数据库的密码和内容。有没有放置这个通用代码的好地方？我觉得我正在复制并粘贴警报的显示和此警报的委托方法。在某些视图控制器中，也会有其他警报，我必须通过该特定 ViewController 中的 UIAlertViewDelegate 来响应这些警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:24:33.187

您可以像这样创建一个类别，然后重用代码：

*.h 文件

```
@interface UIViewController(Transitions)

- (void) showAlertWithDelegate: (id) delegate;

@end 
```

*.m 文件

```
-(void) showAlertWithDelegate:(id)delegate {

    id _delegate = ( delegate == nil) ? self : delegate;
    UIAlertView *alert = [[UIAlertView alloc]
                          initWithTitle: NSLocalizedString(@"Alert Text",@"Alert Text")
                          message: NSLocalizedString( @"Msg Alert",@"Msg Alert")
                          delegate:_delegate 
                          cancelButtonTitle:nil
                          otherButtonTitles: NSLocalizedString(@"OK",@"OK"),nil];
    [alert setTag:0]; //so we know in the callback of the alert where we come from - in case we have multiple different alerts
    [alert show];
}

//the local callback for the alert - this handles the case when we call the alert with delegate nil
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex {
    D_DBG(@"%i %i",[alertView tag],buttonIndex);
} 
```

在需要警报的 UIViewController 类中导入 *.h 文件。

现在，如果您这样调用：

```
 [self showAlertWithDelegate:nil]; 
```

它将显示您的警报，并且代表将被实施

```
 - (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex 
```

当你这样称呼它时，在界面中：

```
 [self showAlertWithDelegate:self]; 
```

您需要提供回调

```
 - (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex 
```

在您调用它的类中，因此您可以处理用户按下的任何内容 - 与界面中实现的内容不同。

# c++ - 简单的 AI 运动算法无法正常工作

> ID：12572842
> 
> 赞同：1
> 
> 时间：2012-09-24T20:59:56.510
> 
> 标签：c++, algorithm, directx, directx-9

我正在研究应该是一个非常简单的运动算法，它接收一个`D3DXVECTOR3`s 的向量并将 AI 移动到每个点。问题是，如果我通过了不止一个点，AI 似乎会卡在等于点平均值的点上。

这些点是 (x, z):
10, 10
10, 20
30, 30
60, 20

maxSpeed 为 10 仅用于测试。

```
void Obj::MoveToLocation(D3DXVECTOR3 newLocation, float deltaTime)
{
    D3DXVECTOR3 directionToTarget = newLocation - location;
    D3DXVec3Normalize(&directionToTarget, &directionToTarget);

    location += maxSpeed * directionToTarget * deltaTime;   
}

void Obj::Patrol(std::vector<D3DXVECTOR3> locations, float deltaTime)
{
    hasArrived = false;

    for (int i = 0; i < locations.size(); ++i)
    {
        if (!hasArrived)
            MoveToLocation(locations[i], deltaTime);

        if ((location.x <= locations[i].x + radius.x) && (location.x >= locations[i].x - radius.x) &&
            (location.z <= locations[i].z + radius.z) && (location.z >= locations[i].z - radius.z))
        {
            hasArrived = true;
        }
    }
} 
```

我只是在寻找一些关于如何使它工作的提示。尽管这似乎是一个非常简单的问题，但我现在不知所措。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T22:38:52.413

```
void Obj::MoveToLocation(D3DXVECTOR3 newLocation, float deltaTime)
{
    D3DXVECTOR3 directionToTarget = newLocation - location;

    if (D3DXVec3Length(&directionToTarget) <= maxSpeed * deltaTime)
    {
        // If this step would take us past the destination, just stop there
        // instead.
        location = newLocation;
    }
    else
    {
        D3DXVec3Normalize(&directionToTarget, &directionToTarget);

        location += maxSpeed * directionToTarget * deltaTime;   
    }
}

// Call this once to set the patrol route
void Obj::Patrol(std::vector<D3DXVECTOR3> locations)
{
    patrolRoute = locations;
    patrolIndex = 0; // Maybe pick the closest point instead?
}

// Call this each time the object should move (once per frame/turn)
void Obj::UpdatePatrol(float deltaTime)
{
    if (patrolRoute == NULL || patrolRoute.empty())
    {
        return;
    }

    if (patrolIndex >= patrolRoute.size())
    {
        // Start again from the beginning
        patrolIndex -= patrolRoute.size();
    }

    // Move towards the next location
    D3DXVECTOR3 nextLocation = patrolRoute[patrolIndex];
    MoveToLocation(nextLocation, deltaTime);

    float dx = location.x - nextLocation.x;
    float dz = location.z - nextLocation.z;

    if ((dx <= radius.x) && (dx >= -radius.x) &&
        (dz <= radius.z) && (dz >= -radius.z))
    {
        // We have reached it. Select the next destionation.
        patrolIndex++;
    }
} 
```

# javascript - 是否可以在新窗口中提交多个表单？

> ID：12572843
> 
> 赞同：2
> 
> 时间：2012-09-24T21:00:00.200
> 
> 标签：javascript, jquery, forms

所以我为负载测试创建了大约 150 个测试用户。我需要能够快速删除这 150 个用户。当前删除用户的唯一方法是一次一个。删除用户的方法是单击删除按钮，该按钮更改表单的值，然后提交它。然后将您带到另一个页面，要求您确认。

```
<a class="enable-delete-link" onclick="deleteUser(23367)">Delete</a>

function deleteUser(userID) {
            $j('#deleteForm > input').val(userID);
            $j('#deleteForm').submit();
          }

<form action="user-delete.jsp" id="deleteForm" method="post">
<input type="hidden" name="user" value="" />
</form> 
```

是否可以在多个新窗口中多次提交表单，并且可以通过并手动点击确认按钮。

我试过了

```
for(people = 23245; people < 23391; people++){  
$j('#deleteForm > input').val(people);
$j('#deleteForm').attr('target', '_blank');
$j('#deleteForm').submit();
} 
```

但它只会打开一个页面。

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:05:06.723

您不必使用弹出窗口来制作表单帖子，您可以使用 ajax 帖子。

```
for(var people = 23245; people < 23391; people++){
    $.post('user-delete.jsp', {user: people});
} 
```

话虽这么说，最好在服务器上进行批量删除，您可以向该操作提交一系列值。大多数浏览器对并发 ajax 请求都有限制，您必须使用这种方法来解决这些限制。

您还可以执行以下操作来依次发出每个后续请求：

```
var range = [];
for(var people = 23245; people < 23391; people++){
    range.push(people);
}

var deleteOne = function(){
    if(range.length > 0){
        // success calls deleteOne again
        $.post('user-delete.jsp', { user: range.pop() }, deleteOne);
    }
};

// kick it off
deleteOne(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T21:04:39.300

如果您可以重写文件 user-delete.jsp，那么您可以将其更改为接收 POST 数组而不是单个用户 ID。然后您可以将表单更改为可以选择多个用户、组或类似的位置...

# javascript - 使用 xslt 通过 onclick 函数对 XML 进行排序

> ID：12572847
> 
> 赞同：2
> 
> 时间：2012-09-24T21:00:12.480
> 
> 标签：javascript, xml, xslt, dom-events

我想知道通过单击相关按钮对 xml/xslt 表进行排序的最简单方法。我对 xslt 非常熟悉，但对 Javascript 很陌生，所以请放轻松。

我在互联网上查看了许多示例，但似乎没有什么真正适合我正在尝试做的事情，或者我的编码技能可能达不到标准。

我可能会走得很远，但我在想一些事情……

xslt：

```
<button onclick="title()">sort by title</button>
<!--some xsl code-->
<xsl:for each select="record">
<xsl:sort id="title" select="dates/year"/>
<!--more xsl code--> 
```

Javascript：

```
function title() {
document.getElementById(title).select="titles/title";
} 
```

我也不清楚将 Javascript 代码放在哪里。我已经有一个 .js 文件，它将我的 xml 和 xsl 文件显示为 html。我可以把这段代码放在那里吗？还是我的 xsl 文件需要内联脚本？我见过很多将 Javascript 附加到 xsl 文件的方法，但我不确定哪种方法最适合我的目的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:08:14.857

如果您对 XSLT 感到满意，但对 Javascript 不满意，那么您可能想看看 Saxon-CE，它在浏览器中提供了 XSLT 2.0，并带有处理用户交互事件的扩展。有一个简单的示例演示了如何对表进行排序以响应鼠标点击：

[http://www.saxonica.com/ce/doc/samples/booklist.xml](http://www.saxonica.com/ce/doc/samples/booklist.xml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:47:01.017

这就是我最终做的，而且效果很好！

HTML：xml 文档加载有一个 div

```
<button type="button" id="sorttitle" onclick="sorttitle()">sort by title</button>
<button type="button" id="sortauthor" onclick="sortauthor()">sort by author</button>
<button type="button" id="sortyear" onclick="sortyear()">sort by year</button>
<button type="button" id="sortpublisher" onclick="sortpublisher()">sort by publisher</button> 
```

JAVASCRIPT

```
function sorttitle(){
document.getElementById("sortauthor").style.backgroundColor="#000";
document.getElementById("sortyear").style.backgroundColor="#000";
document.getElementById("sortpublisher").style.backgroundColor="#000";
document.getElementById("sorttitle").style.backgroundColor="#666";
xsl=loadXMLDoc("sorttitle.xsl");
if (window.ActiveXObject)
  {
  sortedDocument=xml.transformNode(xsl);
  document.getElementById('content').innerHTML=sortedDocument;
}
else {
  xsltProcessor=new XSLTProcessor();
  xsltProcessor.importStylesheet(xsl);
  sortedDocument = xsltProcessor.transformToFragment(xml,document);
  document.body.replaceChild(sortedDocument,document.getElementById('content'));
}}

function sortauthor(){
document.getElementById("sorttitle").style.backgroundColor="#000";
document.getElementById("sortyear").style.backgroundColor="#000";
document.getElementById("sortpublisher").style.backgroundColor="#000";
document.getElementById("sortauthor").style.backgroundColor="#666";
xsl=loadXMLDoc("sortauthor.xsl");
if (window.ActiveXObject)
  {
  sortedDocument=xml.transformNode(xsl);
  document.getElementById('content').innerHTML=sortedDocument;
}
else {
  xsltProcessor=new XSLTProcessor();
  xsltProcessor.importStylesheet(xsl);
  sortedDocument = xsltProcessor.transformToFragment(xml,document);
  document.body.replaceChild(sortedDocument,document.getElementById('content'));
}}

function sortyear(){
document.getElementById("sorttitle").style.backgroundColor="#000";
document.getElementById("sortauthor").style.backgroundColor="#000";
document.getElementById("sortpublisher").style.backgroundColor="#000";
document.getElementById("sortyear").style.backgroundColor="#666";
xsl=loadXMLDoc("sortyear.xsl");
if (window.ActiveXObject)
  {
  sortedDocument=xml.transformNode(xsl);
  document.getElementById('content').innerHTML=sortedDocument;
}
else {
  xsltProcessor=new XSLTProcessor();
  xsltProcessor.importStylesheet(xsl);
  sortedDocument = xsltProcessor.transformToFragment(xml,document);
  document.body.replaceChild(sortedDocument,document.getElementById('content'));
}}

function sortpublisher(){
document.getElementById("sorttitle").style.backgroundColor="#000";
document.getElementById("sortauthor").style.backgroundColor="#000";
document.getElementById("sortyear").style.backgroundColor="#000";
document.getElementById("sortpublisher").style.backgroundColor="#666";
xsl=loadXMLDoc("sortpublisher.xsl");
if (window.ActiveXObject)
  {
  sortedDocument=xml.transformNode(xsl);
  document.getElementById('content').innerHTML=sortedDocument;
}
else {
  xsltProcessor=new XSLTProcessor();
  xsltProcessor.importStylesheet(xsl);
  sortedDocument = xsltProcessor.transformToFragment(xml,document);
  document.body.replaceChild(sortedDocument,document.getElementById('content'));
}} 
```

XML：然后我有多个 xsl 文件，其中指定了某种类型。每个函数调用一个不同的样式表。

# c# - 删除前导零和连字符之前的字符串

> ID：12572848
> 
> 赞同：1
> 
> 时间：2012-09-24T21:00:13.857
> 
> 标签：c#

如何对字符串执行多种格式化？

例如，按照以下方式做是行不通的。

```
var Id = (from p in db.vwIds.Where(p => p.OperationalNumber.Substring(p.OperationalNumber.IndexOf("-") + 1).TrimStart('0')  == id)
                              group p by p.ID into g
                              select g.Key).ToList(); 
```

我不能对一个字符串执行多个操作吗？

不起作用我的意思是它没有从“vwIds”中提取 ID。当我将 id 的值硬编码为“001”并删除“.TrimStart('0') ”时，它会拉入 Id，而不是其他情况。

基本上，我传递的 id 是一个没有前导零的数字，例如“1”、“2”、“112”等，而 vwIds 中的 ID 格式为：“JEE - 001”、“Dee - 002”等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:14:31.207

> 当我将 id 的值硬编码为“001”时

如果您硬编码`id`为“001”，则它永远不会等于任何`.TrimStart('0')`调用它的 ID。让我们暂时假设`p.OperationalNumber.IndexOf("-") + 1)`计算结果为“001”。在它上面调用“trimstart”会将它变成“1”。“1”不等于“001”，所以不包括在内。

我的猜测是您还需要调用`.TrimStart('0')`ID，或者更好的是，将两个字符串解析为数字，然后比较它们的数值，而不是它们的字符串值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T22:25:40.820

你可以使用多个 where 子句得到你想要的，我已经试过了，它工作得很好

```
 var id = db.vwIds.Where(p => p.OperationalNumber.Contains('-'))
            .Where(p => p.OperationalNumber.Replace(" ", "").Split('-')[1].TrimStart('0') == "23")
            .GroupBy(p => p.ID).Select(g => g.Key); 
```

`.Contains('-')`验证您的格式是否正确 'xxx - yyyy'

`Replace(" ", "")`删除空格

另一件事，最好解析您的 id 而不是将其与字符串进行比较，如果您确定所有 OperationalNumbers 都包含不需要修剪或替换的 int (" ","")

```
 var id = vwIds.Where(p => p.OperationalNumber.Contains('-'))
            .Where(p =>int.Parse(p.OperationalNumber.Split('-')[1]) == 23)
            .GroupBy(p => p.ID).Select(g => g.Key); 
```

# javascript - 当 javascript location.href="home.aspx" 时，IE 中的 HTTP 403 被禁止

> ID：12572850
> 
> 赞同：0
> 
> 时间：2012-09-24T21:00:18.037
> 
> 标签：javascript, asp.net, internet-explorer

我有一个奇怪的事情。我的应用程序中有一个取消按钮，它有 onclick javascript 事件，它只做 1 件事：location.href = "home.aspx"。

**在 Firefox 中运行良好。**

**在 IE 中不起作用。**

IE 导航到根目录并显示“HTTP 403 Forbidden”

![在此处输入图像描述](../Images/64e1fd630f060ea7b17ec5b8c0a49f2b.png)

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:26:03.250

更改`location.href = "home.aspx"`为`window.location.href = "/home.aspx"`以确保它重定向到您的网络服务器的根目录。

如果失败，请尝试：

`window.location = "http://www.yourdomainhere.com/home.aspx"`

如果绝对链接没问题。

# c# - jQuery post 数组 - ASP.Net MVC 4

> ID：12572856
> 
> 赞同：16
> 
> 时间：2012-09-24T21:00:54.733
> 
> 标签：c#, jquery, asp.net, asp.net-mvc

我今天花了 8 个小时左右试图解决这个问题。我查看了很多解决方案，但无法获得相同的结果。我有一种预感，这与对 ASP.Net 相对较新有关。

这是我尝试模仿但没有运气的最新问题。 [https://stackoverflow.com/questions/10007722/post-array-as-json-to-mvc-controller# *=*](https://stackoverflow.com/questions/10007722/post-array-as-json-to-mvc-controller#_=_)

[如何使用 JSON、jQuery 将一组复杂对象发布到 ASP.NET MVC 控制器？](https://stackoverflow.com/questions/320291/how-to-post-an-array-of-complex-objects-with-json-jquery-to-asp-net-mvc-control)

问题的基本概要：我有一个 json 对象数组，我想传递给我的控制器。当我传递它显示的数据时，可以说例如 3 个项目，但它们的值没有传递，或者它只是显示什么都没有传递。Firebug 显示它通过了它，所以我假设某些东西设置不正确，并且它不允许它在 C# 端正确设置该变量。

我已经尝试了一些事情并在下面列出它们： 设置 1：我尝试模拟我在第二个链接中看到的内容：

```
$.ajax({
        type: 'Post',
        cache: false,
        url: '/Workflow/Home/UpdateStepPositions',
        data: { 'steps': ['1','2','3'] },
        async: false,
        success: function (data) {
            console.debug(data);
        },
        error: function (data) {
            console.debug(data);
        }
    });

 Controller
 [HttpPost]
    public ActionResult UpdateStepPositions(string[] steps){

        var bresults = new {
            Success = false,
            Message = "Unable to update step positions."
        };

        return Json(bresults);
    } 
```

我什至无法让那个简单的设置工作..它到达了函数并显示没有任何通过....

设置 2：

```
 list = new Array();
    list.push({ "step": 1, "position": 1 });
    list.push({ "step": 2, "position": 2 });
    list.push({ "step": 3, "position": 3 });

    $.ajax({
        type: 'Post',
        cache: false,
        url: '/Workflow/Home/UpdateStepPositions',
        data: JSON.stringify({ 'steps': list }),
        async: false,
        success: function (data) {
            console.debug(data);
        },
        error: function (data) {
            console.debug(data);
        }
    });

    Controller
   [HttpPost]
    public ActionResult UpdateStepPositions(List<UpdatedSteps> steps){
        var bresults = new {
            Success = false,
            Message = "Unable to update step positions."
        };

        return Json(bresults);
    }

   Class
   public class UpdatedSteps {
    public string Step { get; set; }
    public string Position { get; set; }
} 
```

任何人都可以照亮我所缺少的东西或指出我正确的方向吗？希望它是简单的，只是一个新手错误！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-24T21:04:41.077

MVC 通过 contentType 检测它接收到的数据类型。这是工作示例：

```
$(function () {
    $.ajax({
        type: 'Post',
        dataType: 'json',
        url: '/Workflow/Home/UpdateStepPositions',
        data: JSON.stringify({ steps: ['1', '2', '3'] }),
        contentType: 'application/json; charset=utf-8',
        async: false,
        success: function (data) {
            console.debug(data);
        },
        error: function (data) {
            console.debug(data);
        }
    });
}); 
```

现在一切正常，请求：

```
Content-Type:        application/json; charset=utf-8
X-Requested-With:    XMLHttpRequest 
```

和回应：

```
Content-Type:        application/json; charset=utf-8 
```

# c# - 试图从触摸屏缩放原始输入，但 touchcollection 是只读的

> ID：12572860
> 
> 赞同：1
> 
> 时间：2012-09-24T21:01:07.683
> 
> 标签：c#, android, xna, touch, monogame

所以我正在使用下面列出的文章来实现代码来处理不同分辨率的手机。在文章中，他展示了如何轻松缩放手势，以便输入和图形在任何分辨率下都能正常工作。问题是我使用原始输入，当我去修改读取触摸集合的位置时，它告诉我它是只读的，所以我可以读入并修改输入，但我不能把它放回列表中。关于解决此问题的简单方法有什么想法吗？

我在鬼混的代码如下

```
 TouchState = TouchPanel.GetState();

        foreach (TouchLocation location in TouchState)
        {
            Vector2 NewPosition = Vector2.Transform(location.Position - ScreenManager.InputTranslate, ScreenManager.InputScale);
            TouchLocation NewTL = new TouchLocation(location.Id, location.State, NewPosition);
            TouchState.Remove(location); //errors on this line as well as the add below
            TouchState.Add(NewTL);

        } 
```

[http://infinitespace-studios.co.uk/2012/08/06/handling-multiple-screen-resolutions-in-monogame-for-android-part-2/#comment-69](http://infinitespace-studios.co.uk/2012/08/06/handling-multiple-screen-resolutions-in-monogame-for-android-part-2/#comment-69)

# netfilter - 如何使用 Netfilter 捕获通过指定以太网端口（例如 eth0）的传出数据包？

> ID：12572867
> 
> 赞同：0
> 
> 时间：2012-09-24T21:01:39.393
> 
> 标签：netfilter

我想知道如何使用 Netfilter 捕获通过指定以太网端口（例如 eth0）的数据包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T22:48:14.157

您需要将规则添加到具有 ULOG 目标的 OUTPUT 链中，例如：

```
iptables -A OUTPUT -o eth0 -p TCP --dport 25 -j ULOG 
```

ULOG 目标不是终止目标，即链遍历从下一条规则继续。

[然后，您可以使用ulogd](http://netfilter.org/projects/ulogd/index.html)守护程序以不同的方式记录捕获的数据包，或者查看它的源代码以实现您自己的处理。

# c# - 如何在 TEXTFILE 中拆分字符串（IP 地址）？

> ID：12572870
> 
> 赞同：-2
> 
> 时间：2012-09-24T21:01:41.033
> 
> 标签：c#, vb.net

我有这样的 ip 地址内容的文本文件

```
10.1.11.88
10.1.11.52
10.1.11.35
10.1.11.95
10.1.11.127
10.1.11.91 
```

如何`SPLIT`从文件中获取IP地址？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T21:07:26.653

```
var ips = File.ReadLines("path")
            .Select(line => IPAddress.Parse(line))
            .ToList(); 
```

您可以使用`ips[i].GetAddressBytes()`拆分地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T21:03:25.853

```
var ipAddresses = File.ReadAllLines(@"C:\path.txt"); 
```

这将为文本文件的每一行创建一个带有单独字符串的数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T21:06:08.760

我还将验证使用 ipaddress.tryparse 读取的字符串 - [http://msdn.microsoft.com/en-us/library/system.net.ipaddress.tryparse.aspx](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.tryparse.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T21:09:02.643

如果您希望将单个 IP 地址拆分为其四 (4) 个组件，请使用`string.Split(char[])`，这将为您提供`string[]`包含每个部分的内容。

例如：

```
string[] addressSplit = "10.1.11.88".Split('.');
// gives { "10", "1", "11", "88" } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T01:10:37.887

这应该适合你。这是鱼：

```
using System;
using System.IO;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {

            System.IO.StreamReader myFileStream;
            string strFileLine;
            String[] arrAddressString;

            myFileStream = new System.IO.StreamReader("c:\\myTextFile.txt");
            // where "c:\\myTextFile.txt" is the file path and file name.

            while ((strFileLine = myFileStream.ReadLine()) != null)
            {

                arrAddressString = strFileLine.Split('.');

            /*
               Now we have a 0-based string arracy
               p.q.r.s: such that arrAddressString[0] = p, arrAddressString[1] = q,
               arrAddressString[2] = r, arrAddressString[3] = s
            */

            /* here you do whatever you want with the values in the array. */

                // Here, i'm just outputting the elements...

                for (int i = 0; i < arrAddressString.Length; i++)
                {
                    System.Console.WriteLine(arrAddressString[i]);
                }

                System.Console.ReadKey();
             }
        }
    }
} 
```

# javascript - img onclick 需要禁用

> ID：12572872
> 
> 赞同：0
> 
> 时间：2012-09-24T21:01:47.823
> 
> 标签：javascript, disabled-control

在我的页面中，有一个标签，我根据它的内容做出决定，例如隐藏和禁用一组控件。

有个

```
<img src="images/Delete.png" alt="delete" 
   style="height: 18px; width: 24px; cursor:pointer" 
   onclick="deleteRow('<%=row["tId"] %>');" id="imgBut_dltRow" /> 
```

我想了解如何禁用点击事件*或 img/button 响应，如：

```
if(document.getElementById("LBL_isManager").value != "")
disable click event / or totaly disable this "imgBut_dltRow" 
```

我不能从后面的代码中禁用它，因为它有 <% %> c# 标签，所以我也不能让它 runat="server" 。唯一的选择是询问标签值，如果它不为空（“”）然后阻止该事件。

多谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:08:38.623

试试这个 -[**演示**](http://jsfiddle.net/Nk4Y3/)

```
document.getElementById("imgBut_dltRow").addEventListener("click", function(e) {
    if ( document.getElementById("LBL_isManager").value != "" ) {
        e.stopImmediatePropagation();
    }
}, false); 
```

# vb.net - 有没有办法将额外的数据传递给 MyApplication_UnhandledException 事件处理程序？

> ID：12572874
> 
> 赞同：1
> 
> 时间：2012-09-24T21:01:57.540
> 
> 标签：vb.net, design-patterns, .net-3.5

我正在为非开发人员创建一个设计模式，并且我正在将一个捕获所有错误处理程序与 UnhandledException 事件结合起来。我想将错误写入日志文件，但日志文件名中有一个时间戳，因此每次运行都会更改。有没有办法我的处理程序可以接收或访问日志文件名字符串？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T21:11:58.420

通常 UnhandledException 事件处理程序位于包含您的启动代码的类中。因此，没有什么可以阻止您在此类中定义一个包含日志文件名称的共享公共变量。您可以在启动时从配置文件中读取它的值。然后在事件内部可以使用该变量打开您的日志文件并写入您的信息

编辑：在你的场景中你可以试试这个伪代码

```
Partial Friend Class MyApplication

    ' the name for the log file
    Public logName As String

    Private Sub MyApplication_UnhandledException(sender As Object, e As Microsoft.VisualBasic.ApplicationServices.UnhandledExceptionEventArgs) Handles Me.UnhandledException
        Dim ex As Exception = e.Exception
        If Not ex Is Nothing Then
            MessageBox.Show(ex.Message)
            Using sw = new StreamWriter(My.MyApplication.logName)
               .....
            End Using
        End If
    End Sub
End Class 
```

并在您的初始表单中添加此调用以定义 logName

```
Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    My.Application.logName = "C:\temp\text.txt"
    ' as test
    Throw New Exception("This is an unhandled exception")
End Sub
    End Sub 
```

# c# - Regex.Replace 创建超链接 C#

> ID：12572885
> 
> 赞同：0
> 
> 时间：2012-09-24T21:02:53.200
> 
> 标签：c#, regex

我正在尝试使用 Regex.Replace 创建超链接。我想这样做，以便用户可以点击我创建的按钮并创建产品链接。这样，如果 url 由于某种原因发生更改，我将不必更改数据输入端的逻辑。用户将提交一段文本，我将有如下格式的内容：

```
"[!product:123456:Click Me!]" 
```

其中 p 代表产品。Click Me 是链接上显示的文本。123456 是标识符。该链接应如下所示：

```
<a href="www.mywebsite.com/product/123456">Click Me</a> 
```

到目前为止，我有这个：

```
var output = Regex.Replace(model.Body, @"\[!([^!]*)\!]", "<a href='http://www.mywebsite.com/$1'> link </a>"); 
```

返回：

```
 http://www.mywebsite.com/p:165411:Click Me 
```

有什么办法可以做一个正则表达式，让我在 [! 和！]分离出由“：”分隔的数据？

这是我的想法：

```
var output = Regex.Replace(model.Body, SOME REGEX HERE, "<a href='http://www.mywebsite.com/$1/$2'> $3 </a>"); 
```

希望这是关于我正在尝试做的足够的信息。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T21:08:38.093

这个正则表达式怎么样？

```
\[!(.*):(.*):(.*)!\] 
```

在c#中

```
using System;
using System.Text.RegularExpressions;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            var text = "[!product:123456:Click Me!]";
            var regex = new Regex("\\[!(.*):(.*):(.*)!\\]", RegexOptions.IgnoreCase);

            var result = regex.Replace(text, "<a href='http://www.mywebsite.com/$1/$2'> $3 </a>");
            Console.WriteLine(result);
            Console.ReadKey();
        }
    }
} 
```

# linq - 使用 linq 和实体框架按值范围分组

> ID：12572886
> 
> 赞同：4
> 
> 时间：2012-09-24T21:03:00.797
> 
> 标签：linq, entity-framework, linq-to-entities

我需要一些按年龄范围汇总的数据，例如：

```
 Age    |   Members
 ------------------
 0-13   |   150
 14-19  |   250
 20-30  |   400 
```

在我的 linq 查询中，我使用[EntityFunctions.DiffYears](http://msdn.microsoft.com/en-us/library/system.data.objects.entityfunctions.diffyears.aspx)根据出生日期获取年龄：

```
let age = EntityFunctions.DiffYears(contact.Birthday, today) 
```

但是，如果我按年龄字段分组，我将得到 19、20、21 ......而不是范围。使用 linq 和实体框架完成此操作的推荐方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T22:09:00.407

有两种方法可以做到这一点：

**在客户端处理分组**

首先按照您的描述按年龄对它们进行分组，然后使用 linq to object 结果将年龄映射到一个年龄范围，然后按年龄范围分组。请参阅[使用 Linq 按变量整数范围分组](https://stackoverflow.com/questions/1375997/group-by-variable-integer-range-using-linq)

**在服务器上处理分组**

定义一个将年龄映射到年龄范围的存储过程（例如，返回 0 表示 0 到 13 岁之间的年龄，1 表示 14 到 19 岁等等），然后在查询中使用这个存储过程。

# android - 从活动回来后如何刷新片段？

> ID：12572894
> 
> 赞同：3
> 
> 时间：2012-09-24T21:03:36.560
> 
> 标签：android, actionbarsherlock

我有一个启动新活动的菜单按钮，完成后用户按下按钮并将数据写入 SQLite DB 并完成活动。但是它返回的 Fragment 显示了该信息，并且在活动完成时它不会刷新。当我回到片段时，如何确保数据被刷新？

我正在使用 startActivityForResult() 并使用下面的代码捕获结果，但我仍然没有刷新片段

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if ((requestCode == MainActivity.MYACTIVITY_REQUEST_CODE) && (resultCode == Activity.RESULT_OK))
        adapter.notifyDataSetChanged();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T00:05:38.913

您可以使用 `onStart()` 在片段可见或焦点时调用的此方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-27T10:13:35.640

解决这个问题的另一种方法

```
 public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {
View view = inflater.inflate(R.layout.fragment_message, container, false);} 
```

只是膨胀视图和适配器或什么不做任何事情和

```
 @Override
public void onResume() {
    super.onResume();
    logiMessages.clear();//clear array
    mAdapter.notifyDataSetChanged(); // notify adapter 
    getData(mParam1, mParam2); // getdatas from service 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T21:23:06.713

解决此问题的一种方法是使用[startActivityForResult(intent, MyStatusCode)](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)，然后使用以下方法捕获返回：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
  if (requestCode == MyStatusCode) {
     //Refresh the fragment here
  }
} 
```

# regex - 在 Dreamweaver 中自动执行多个正则表达式搜索/替换查询

> ID：12572895
> 
> 赞同：2
> 
> 时间：2012-09-24T21:03:39.207
> 
> 标签：regex, dreamweaver, replace

我使用 Dreamweaver 为我的公司发布 Web 文章。目前，我有大约 10 个相当复杂的 reg-ex 搜索/替换查询，我必须在每篇文章上运行这些查询，以清理过程中纠缠在一起的各种代码错误（我无法控制）。我一次在多个文件上运行它们以加快来回速度，但我仍然必须单独运行每个文件。

有没有办法在 Dreamweaver 中批量运行多个查询？

或者

您可以将查询与不同的替换术语组合在一起同时运行吗？（例如：如果 X = query1 则替换为 Y，但如果 X = query 2 则替换为 Z）

或者

我宁愿在 Dreamweaver 中执行此操作，但是否有插件或单独的程序可以执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:53:02.613

我为此使用记事本++。`Ctrl`++`Shift`命令完成了这项`F`工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T02:02:53.850

嗨，我在希望在 Sharepoint Designer 中做类似的事情时从 Google 遇到了这个问题。

如果得到一些建议还为时不晚，我会看看在 Dreamweaver 中创建自定义命令。一年前，我确实有一位承包商为我写信来应对特定场景。基本上它是一个按顺序运行多个 RegEx 的清理脚本，您可以选择针对当前打开的文件、选定的文档或站点运行命令。

这真的很方便。

# xcode - 如何在 XCode 中使用不同的 GDB？

> ID：12572897
> 
> 赞同：2
> 
> 时间：2012-09-24T21:03:48.440
> 
> 标签：xcode, gdb, fink

类似的问题是：

[如何指定我可以在 MacOS 上的 XCode 中使用哪个 GDB](https://stackoverflow.com/questions/668069/how-to-specify-which-gdb-i-can-use-in-xcode-on-macos)

和

[我可以在 XCode 上切换 gdb 客户端吗？](https://stackoverflow.com/questions/905669/can-i-switch-gdb-client-on-xcode?rq=1)

前者指的是一个过时的文档，似乎不适用于 XCode 3.2.6，而后一个问题从未真正得到回答。

那么有谁知道我如何使用不同版本的 GDB，即使用 fink 获得的版本，fsf-gdb（GDB 7.4.1）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:59:39.127

不，它不会起作用。gdb 和 Xcode 使用“mi”基于文本的协议进行通信，Apple 多年来以多种方式扩展了 mi 接口，以使 Xcode 受益。这些更改中的大多数从未返回到主线 FSF gdb 的上游——或者那些做过的更改是以不同的方式实现的。让 Xcode 运行不同的 gdb 并不是什么难点——难点是它们不能一起工作。

我还没有测试过现代 gdb 和 Xcode，但我真的认为它不会起作用。

如果您最近没有尝试过 lldb 调试器，请试一试。Xcode 4.5 中的版本非常可靠。Apple 现在正在积极支持和开发这个调试器，如果你在 Mac OS X 上工作，如果你可以将 lldb 用于你的工作流程，你会更开心。[在http://lldb.llvm.org/lldb-gdb.html](http://lldb.llvm.org/lldb-gdb.html)有一个 gdb/lldb 命令备忘单，它将显示各种 gdb 命令的等效 lldb 命令。

# mysql - SQL按阈值获取离线网站

> ID：12572899
> 
> 赞同：0
> 
> 时间：2012-09-24T21:03:57.613
> 
> 标签：mysql, sql

我有两张桌子（实际上我还有很多，但这没关系）：

```
sourcewebsite:
id - int (PK)
name - varchar
offlinethreshold - int

sourcewebsite_updatelog:
id - int (PK)
sourcewebsiteid - int (FK)
datetime_start - datetime
episodestotal - int 
```

sourcewebsite 表包含几个 sourcewebsites，带有一个表示允许网站离线的小时数的离线阈值。

sourcewebsite_updatelog 表是一个记录表，每次检查 sourcewebsite 时都会填充一个新条目。如果 'episodestotal' 等于 0，则表示检查发生时网站处于离线状态。

我现在想要的是：我想要一个所有超出其离线阈值的网站的列表。因此，假设我们有一个 ID 为 1 的源网站，并且离线阈值为 6 小时。假设在过去 6 小时内对该网站进行了 5 次检查，但每次检查时，“episodestotal”为 0。这意味着该网站超过了阈值，因此可以认为是离线的。

我想出了一个小 SQL 查询来确定过去 6 小时内离线的所有源网站，但问题是这些“6 小时”是硬编码的。我想为每个源网站使用“offlinethreshold”列中的值。

这是我到目前为止提出的查询：

```
SELECT `sourcewebsiteid`, `name`
FROM `sourcewebsite_updatelog`
JOIN `sourcewebsite`
ON `sourcewebsite_updatelog`.`sourcewebsiteid` = `sourcewebsite`.`id`
WHERE `datetime_start` > DATE_SUB(NOW(), INTERVAL 6 HOUR)
GROUP BY `sourcewebsiteid`
HAVING MAX(`episodestotal`) = 0 
```

以下是一些示例数据：

```
sourcewebsite:
1 - channel 1 - 5
2 - channel 2 - 3
3 - channel 3 - 10

sourcewebsite_updatelog:
1 - 1 - 2012-09-27 12:03:05 - 1
2 - 2 - 2012-09-27 12:50:20 - 0
3 - 3 - 2012-09-27 12:51:11 - 1
4 - 1 - 2012-09-27 13:25:56 - 0
5 - 2 - 2012-09-27 13:48:34 - 0
6 - 3 - 2012-09-27 13:59:01 - 0
7 - 1 - 2012-09-27 14:23:53 - 1
8 - 1 - 2012-09-27 14:54:28 - 0
9 - 2 - 2012-09-27 15:11:40 - 0 
```

假设我们在2012-09-27 15:30查看数据。通道 1 的阈值为 5 小时。在过去 5 小时内（12:03 和 14:23）已在线 2 次，因此不会被标记为“离线”。

频道 2 在过去 3 小时内每次都处于离线状态，因此必须将其标记为离线。

频道 3 在过去 10 小时内已在线 1 次，所以没关系。不需要标志。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:40:37.683

不确定我是否完全理解你，但 TimeDiff 可能是要走的路，比如

```
SELECT `sourcewebsiteid`, `name`
FROM `sourcewebsite_updatelog`
JOIN `sourcewebsite`
ON `sourcewebsite_updatelog`.`sourcewebsiteid` = `sourcewebsite`.`id`
WHERE  (Time_to_sec(TimeDiff(Now(), `datetime_start`)) / 3600) >= `sourcewebsite`.`offlinethreshold`
GROUP BY `sourcewebsiteid` 
```

没有 mysql 来测试它，很多人需要转换 x / 3600 甚至舍入它。

我不知道 episodes_total 是什么，但试试

```
SELECT `sourcewebsiteid`, `name`,
TimeDiff(Now(), `datetime_start`) as difftime,
Time_to_sec(TimeDiff(Now(), `datetime_start`)) as difftimesecs,
(Time_to_sec(TimeDiff(Now(), `datetime_start`)) / 3600) as difftimehours,
`oflinethreshold`,
max(`episodes_total`) as totalepisodes
FROM `sourcewebsite_updatelog`
JOIN `sourcewebsite`
ON `sourcewebsite_updatelog`.`sourcewebsiteid` = `sourcewebsite`.`id`
GROUP BY `sourcewebsiteid` 
```

所以你可以看到我的回答中的哪一点没有按照我的想法做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T21:19:11.390

是的，看来我终于得到了正确的查询。这就是我想出的：

```
SELECT `sourcewebsiteid`, `name`
FROM `sourcewebsite_updatelog`
JOIN `sourcewebsite`
ON `sourcewebsite_updatelog`.`sourcewebsiteid` = `sourcewebsite`.`id`
WHERE HOUR(TIMEDIFF(NOW(), `sourcewebsite_updatelog`.`datetime_start`)) < `sourcewebsite`.`offlinethreshold`
GROUP BY `sourcewebsiteid`
HAVING MAX(`episodestotal`) = 0 
```

不太难，我只需要使用另一个函数进行日期减法。

# security - Symfony2 安全 - 奇怪的行为（具有挑战性的问题）

> ID：12572904
> 
> 赞同：2
> 
> 时间：2012-09-24T21:04:15.313
> 
> 标签：security, symfony, oauth-2.0, fosuserbundle, symfony-2.0

使用 FOSOauthServerBundle、FOSUserBundle 和 Symfony2.0，我遵循[了这个文档](http://blog.logicexception.com/2012/04/securing-syfmony2-rest-service-wiith.html)（[http://blog.logicexception.com/2012/04/securing-syfmony2-rest-service-wiith.html](http://blog.logicexception.com/2012/04/securing-syfmony2-rest-service-wiith.html)）关于在实现 OAuth2 时创建自己的 auth_login 表单使用 FOSOAuthServerBundle。好帖子，顺便说一句，从我谦虚的角度来看。

我必须说我几乎完成了。但是有一种奇怪的行为使它不起作用。任何人都可以看看我的问题并尝试给我一个关于可能解决方案的线索吗？

以前的考虑

在开发此页面上的说明之前，我已经很好地配置了 FOSOAuthServerBundle。我完成了该过程，并正确获取了令牌，验证了用户凭据并创建了会话。唯一的问题是我没有与我网站上的主要登录表单不同的特定登录表单。所以尝试获取授权码时出现的页面就是正常的登录页面。我想要的是，如手册中所述，显示一个不同的登录表单，更小更具体，使其对移动设备友好。

问题

准确开发此页面上描述的内容，我得到了这种行为：

1.  我用正确的参数调用“^/oauth/v2/auth”
2.  正如所料，我被重定向到 /auth_login 页面
3.  我输入了用户的凭据（正确的登录名和密码）
4.  在登录过程之后，Symfony 正确地尝试使用正确的参数再次重定向到“^/oauth/v2/auth”，但是，惊喜！！，一些拦截器或其他东西正在捕获该请求，我再次被重定向到 /auth_login。

    *   有趣的是会话已创建（我的意思是，如果在那一刻我在 url 栏中的站点中键入任何现有页面，它通常会重定向到创建所有会话和内容的请求页面）。** 所以问题只是模式“^/oauth/v2/auth”。无论我是否创建了会话，它总是会被拦截并重定向到 /auth_login （并且，因此，我没有让工作流以最终获得令牌的方式正确运行。

唯一的区别

在我所拥有的和手册中描述的之间只是我使用树枝页面来显示 auth_login 表单。我不认为这可能是一个问题，但无论如何，我接下来发布它：

```
<form action="{{ path("acme_oauth_server_auth_login_check") }}" method="post">
    <input type="hidden" name="_csrf_token" value="{{ csrf_token }}" />

    <label for="username">{{ 'security.login.username'|trans({}, 'FOSUserBundle') }}</label>
    <input type="text" id="username" name="_username" value="{{ last_username }}" />

    <label for="password">{{ 'security.login.password'|trans({}, 'FOSUserBundle') }}</label>
    <input type="password" id="password" name="_password" />

    <input type="checkbox" id="remember_me" name="_remember_me" value="on" />
    <label for="remember_me">{{ 'security.login.remember_me'|trans({}, 'FOSUserBundle') }}</label>

    <input type="submit" id="_submit" name="_submit" value="{{ 'security.login.submit'|trans({}, 'FOSUserBundle') }}" />
</form> 
```

还有一件事

虽然它也不起作用，但我正在考虑一个技巧（或解决方法），包括将以下内容放在表单的操作字段中：

```
{{ path("fos_user_security_check") }} 
```

这意味着使 /auth_login 表单将数据发送到 FOSUserBundle 使用的相同 login_check 而不是 FOSOAuthServerBundle 的。

这种情况下的效果如下：

1.  我用正确的参数调用“^/oauth/v2/auth”
2.  正如所料，我被重定向到 /auth_login 页面
3.  我输入了用户的凭据（正确的登录名和密码）
4.  在登录过程之后，^/oauth/v2/auth 的重定向很好，我得到了授权码
5.  由于 ^/oauth/v2/token URL，我完成了获取 access_token 的整个过程
6.  惊喜！！尽管一切都做得很好，但在这种情况下，没有创建会话，这对于以后调用 API 来说太糟糕了（API 只是没有得到任何东西，因为没有创建会话）。想象一下，例如，我想从 API 获取属于输入其凭据的用户的某些项目的完整列表。显然，由于没有创建会话，我得到的只是重定向到主页（这就是我在 symfony2 上配置防火墙的方式）。

所以……一切都那么奇怪。

如果有人能帮助我解决这一切，我将不胜感激。

非常感谢

佩德罗

# internet-explorer - 使用 GetElementsByID 为 ComboBox 赋值 - 不起作用？

> ID：12572905
> 
> 赞同：0
> 
> 时间：2012-09-24T21:04:20.547
> 
> 标签：internet-explorer, vba, xhtml, vbscript

```
 .getElementById("ComboBox1").setAttribute "value", "value1" 
```

我正在自动化 Excel 和 IE。我从网页中提取数据，但我需要从组合框中选择一个值（下拉列表，我知道我需要的值），这似乎不起作用，但我没有得到调试。否则如何设置组合框的值？发生了一个 onchange 但我不确定它是否会影响我的选择？我认为这是做到这一点的方法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:10:43.090

怎么样`.getElementById("ComboBox1").value = "value1"`？

# java - Android - 将自定义 XML 文件格式解析为字符串

> ID：12572911
> 
> 赞同：1
> 
> 时间：2012-09-24T21:04:40.407
> 
> 标签：java, android, xml, xml-parsing

我有一个自定义格式的 xml 文件，我试图将其存储在字符串中。我仍然是 java 的初学者并且已经搜索了论坛，但是提出的 xml 问题似乎已经与标准 xml 格式的 xml 格式有关。

我必须使用的 xml 格式如下：

```
<playList baseUrl= "Webaddress"
<file name="xxxxxxx.xxx" showTime="YYYY-MM-DD HH:MM" />
<file name="xxxxxxx.xxx" showTime="YYYY-MM-DD HH:MM" />
.......
</playList> 
```

我一直在尝试 XML 解析的示例代码，但这是专门设置的。我已经尝试了几个小时来克服这个问题，但我什至试图将字符串拉入我的代码中。

我一直在看这里的教程[http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/](http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/)但我仍然坚持导入 xml 文件。我相信它与哈希图代码有关，因为我的 xml 格式与标准标签 <> <> 不匹配。

这是我目前拥有的代码：

```
static final String KEY_ITEM ="playlist";
static final String KEY_NAME = "name";
static final String KEY_DESC = "showTime";

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_ITEM);

    // looping through all item nodes <item>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        map.put(KEY_COST, getString(e))
        // adding each child node to HashMap key => value
        map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
        map.put(KEY_DESC, parser.getValue(e, KEY_DESC));

        // adding HashList to ArrayList
        menuItems.add(map); 
```

任何帮助或帮助将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:19:23.523

如果我理解得很好，您希望得到以下输出：

xxxxxxx.xx1

YYYY-MM-DD HH:MM

ETC....

我通过在以下操作中获取 NamedNodeMap 来完成此操作：

**要获取第一行的属性属性：**

xxxxxxx.xx1

```
doc.getElementsByTagName("file").item(1).getAttributes().item(0).getTextContent(); 
```

YYYY-MM-DD HH:MM

```
doc.getElementsByTagName("file").item(0).getAttributes().item(1).getTextContent(); 
```

**第二行：**

xxxxxx.xx2

```
doc.getElementsByTagName("file").item(1).getAttributes().item(0).getTextContent(); 
```

YYYY-MM-DD HH:MM

```
doc.getElementsByTagName("file").item(1).getAttributes().item(1).getTextContent(); 
```

如果您只想在引号之间添加文本，只需添加**.getTextContent()**。如果没有，您将得到以下输出 -> name="xxxxxxx.xx2" 。
然后您可以将这些值设置为您的 HashMap。

您还应该查看您的 xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<playList baseUrl= "Webaddress">
<file name="xxxxxxx.xx1" showTime="YYYY-MM-DD HH:MM" />
<file name="xxxxxxx.xx2" showTime="YYYY-MM-DD HH:MM" />
</playList> 
```

为我工作

希望对您有所帮助；）

# android - Android 异步任务 - 未找到处理意图的活动

> ID：12572922
> 
> 赞同：0
> 
> 时间：2012-09-24T21:05:10.110
> 
> 标签：android, android-intent, android-asynctask

我正在使用异步任务来创建加载屏幕，但是当我想将意图传递给主要活动时，应用程序崩溃......这里有一些代码：

```
 public class StartActivity extends Activity {
     protected boolean _active = true;
     protected int _splashTime = 5000;

     @Override
     public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.loading_screen);

    Thread splashThread = new Thread() {
        @Override
        public void run(){
            try {
                int waited = 0;
                while(_active && (waited <_splashTime)) {
                    sleep(100);
                    if(_active) {
                        waited +=100;
                    }
                }
            } catch(InterruptedException e) { 
            } finally {

                startActivity(new Intent("HNappActivity"));
                finish();

            }
        }
    };
    splashThread.start();
    } 
```

这是清单：

```
 <activity
        android:name=".StartActivity"
        android:label="@string/title_activity_hnapp" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="HNappActivity"></activity> 
```

日志猫：

```
 09-24 20:47:06.841: E/AndroidRuntime(556): FATAL EXCEPTION: Thread-10
  09-24 20:47:06.841: E/AndroidRuntime(556): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=HNappActivity }
  09-24 20:47:06.841: E/AndroidRuntime(556):    at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1409)
  09-24 20:47:06.841: E/AndroidRuntime(556):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
  09-24 20:47:06.841: E/AndroidRuntime(556):    at android.app.Activity.startActivityForResult(Activity.java:2827)
  09-24 20:47:06.841: E/AndroidRuntime(556):    at android.app.Activity.startActivity(Activity.java:2933)
  09-24 20:47:06.841: E/AndroidRuntime(556):    at sk.ecopress.hn.android.StartActivity$1.run(StartActivity.java:37) 
```

StartActivity 类首先启动，它显示加载屏幕，然后它应该将意图传递给主要活动，但它崩溃了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:07:45.240

你需要改变：

```
 startActivity(new Intent("HNappActivity")); 
```

到：

```
 startActivity(new Intent(StartActivity.this, HNappActivity.class)); 
```

此外，我假设它确实存在于您的项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T00:07:11.927

改变

```
<activity android:name="HNappActivity"></activity> 
```

到

```
 <activity android:name=".HNappActivity"></activity> 
```

类名前的点很重要。

正如他们所说，您必须使用

```
 startActivity(new Intent(StartActivity.this, HNappActivity.class)); 
```

# facebook-graph-api - 在粉丝页面照片上标记用户

> ID：12572923
> 
> 赞同：2
> 
> 时间：2012-09-24T21:05:10.513
> 
> 标签：facebook-graph-api, tags, photos, facebook-page

使用 GRAPH API，我如何在粉丝专页照片（允许任何人标记的页面）上标记自己？

文档说你只需要：

*   Publish_stream 权限
*   发布到 /photo_id/tags/my_user_id

我试过了，但 facebook 用 500 响应：Oauth Exception, An unknown error has occurred。

在用户照片中标记自己或朋友可以正常工作，但在页面照片上标记会导致错误。

[https://developers.facebook.com/docs/reference/api/photo/](https://developers.facebook.com/docs/reference/api/photo/)

相关错误，由我填写： [https ://developers.facebook.com/bugs/261936030593730](https://developers.facebook.com/bugs/261936030593730)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:36:55.907

您是否检查过该页面是否有选项

```
Tagging Ability: [X] People can tag photos posted by {page} 
```

*在“管理权限*...”下的设置中设置？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:03:35.160

当您通过粉丝页面发布照片并想在其中标记朋友时，您需要页面access_token而不是用户access_token。您正在使用用户的 access_token 所以错误

> 500：Oauth 异常，发生未知错误。

[从这里](http://developers.facebook.com/docs/reference/api/page/#page_access_tokens)引用 fb 文档

> 要以 Page 而非当前用户的身份执行以下操作，您必须使用 Page 的访问令牌，而不是通常用于读取 Graph API 对象的用户访问令牌。可以通过向具有 manage_pages 权限的 /USER_ID/accounts 发出 HTTP GET 来检索此访问令牌。这将返回用户具有管理权限的页面列表（包括应用程序配置页面），以及这些页面的 access_tokens。或者，您可以通过向具有 manage_pages 权限的 /PAGE_ID?fields=access_token 发出 HTTP GET 来获取单个特定页面的页面访问令牌，如上所述。除非另有说明，否则发布到页面还需要 publish_stream 权限。

# mysql - 告诉 MySQL where 条件为 false 的限制

> ID：12572926
> 
> 赞同：0
> 
> 时间：2012-09-24T21:05:46.240
> 
> 标签：mysql

如果我有一个声明：

select .. from .. where 条件；

而且我事先知道条件可能为假的最大次数。我如何告诉 MySQL 这个数字**来提高性能**？因此，在条件多次为假之后（在选择记录时），MYSQL 将假设其余记录的条件为真。

**编辑：**

我不知道我的问题中缺少什么。我将填补空白：

select * from t where c3 > c2;

在这里，我事先知道，在 50 条记录中，只有 5 条记录的条件“c3 > c2”为假。我可以并且应该告诉 MySQL 这个数字“5”来提高这个 select 语句的性能吗？这样在执行这个 select 语句时，在这个条件 (c3 > c2) 被错误了 5 次之后，MySQL 将忽略这个条件来处理其余的记录，并从那时起选择所有的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:14:24.153

简单的答案是你不能。

但是，在追求性能的过程中，您可以做的就是智能数据库设计和放置良好的索引。

MySQL“预格式化”索引列，以便它可以非常快速地检查您对这些列的位置约束。

MySQL 网站 ( [http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html) ) 列出了您应该使用索引的几个原因，下面列出了前两个索引，但您应该阅读通过所有该页面：

*   快速找到匹配 WHERE 子句的行。

*   从考虑中消除行。如果在多个索引之间进行选择，MySQL 通常使用找到最少行数的索引

还有一个关于如何构建更智能表的简单示例可能是，您可以将其存储在两列中，而不是将名称“John Doe”存储在两列中，这样您就可以搜索姓氏为“Doe”的任何人，而无需拆分或执行 LIKE搜索。

您应该尽量避免诸如 LIKE 之类的条件，因为无论您如何编写它们，它们都是缓慢而乏味的。

执行逻辑的最快列是整数列和浮点列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T21:21:04.947

如果没有对手头的问题进行更详细的描述，我认为不可能说的比您对数据库工作原理的理解还不够多。

为简单起见，想象一个二叉搜索树。现在使用您的谓词（您的 where 条件）并考虑一种构建二叉搜索树的方法，它可以帮助您获取查询结果。作为一个简单的示例 - 考虑以下查询：

```
SELECT * FROM myTable WHERE some_value = 10 
```

“some_value”上的简单二叉搜索树（即 - 二叉搜索树 - 对于树中的每个节点，“some_value”低于当前行的其他行将移至左侧，而具有更高 - 或等于的行- 值向右） - 在这种情况下可以提供帮助。利用这种二叉搜索树，现在可以简单地从树的根开始，根据当前节点的值沿着树的左或右路径向下 - 直到达到值“10” - 然后继续遵循正确的路径，直到找到更高的值。

您可以想象这将如何用于查询，例如

```
SELECT * FROM myTable WHERE some_value BETWEEN 10 AND 20 
```

同样，同样的简单二叉搜索树可以轻松回答此查询。当然，人们可以很容易地陷入更复杂的例子——但此时我猜你在想：这很好，但是我如何创建这个二叉搜索树呢？

答案是索引——在这种情况下：

```
CREATE INDEX idx_myTable__some_value ON myTable(some_value); 
```

这将告诉 MySQL 在表“myTable”上在列（按指定顺序）“some_value”上创建索引 - 并且该索引将命名为“idx_myTable__some_value”。

I think this is about as far into this topic as I can go in a simple answer like this. Let me however state that the above is an oversimplification - there's *alot* more to be said about this - to start off with, the actual index type being used is typically not even a binary search tree, but a B-tree (or, more likely, a B+-tree). Wikipedia has some decent articles about this, and the actual manual for MySQL should cover this quite well as well.

# ruby-on-rails - 通过两个关系识别模型实例

> ID：12572929
> 
> 赞同：2
> 
> 时间：2012-09-24T21:05:57.567
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, associations, models

我试图通过它与它所属的其他两个模型（“Cut”和“Animal”）的关系来挑选一个模型（“Package”）的实例。虽然有很多带有 :cut_id 3 的包和很多带有 :animal_id 4 的包，但应该只有一个带有这两者，我想挑选一个并在表格中显示它的内容。

我已经尝试过以下 DIY 混乱，但它并没有真正起作用。（cutfind 是我创建的一种方法，我知道它可以调用与给定动物相关的所有切割。）

```
<% @animal.cutfind.each do |cut| %>
  <tr>
    <td><%= cut.name %></td>
    <td><%= number_to_currency(cut.price) %></td>
    <td><%= cut.package_weight %> lb</td>
        <% @a = Package.where(:animal_id => @animal.id) %>
        <% @pset = @a.where(:cut_id => cut.id) %>
    <% @pset.each do |p| %>
        <td><%= p.original %></td>
        <td><%= p.left %></td>
    <% end %>
  </tr>
<%end%> 
```

知道如何做到这一点[更好]？谢谢。

更新：我尝试了其他 DIY 混乱并且遇到了同样的问题（甚至没有创建单元格，这让我相信 @pset 是空的）。

这是在我的动物模型中：

```
def packagefind
    Package.where(:animal_id => self.id)
end 
```

然后我像这样更改了上面的内容：

```
<td><%= cut.package_weight %> lb</td>
        <% @pset = @animal.packagefind.where(:cut_id => cut.id) %>
    <% @pset.each do |p| %>
        <td><%= p.original %></td>
        <td><%= p.left %></td>
    <% end %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T21:59:14.657

如果您定义以下关系，Rails 将自动生成方法来帮助您查找关联的记录：

```
class Animal
  has_many :cuts
  has_many :packages, :through => :cuts
end

class Cut
  belongs_to :animal
  belongs_to :package
end

class Package
  has_many :cuts
  has_many :animals, :through => :cuts
end 
```

在您的控制器中，以下行将[急切加载](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations)您在视图中需要的所有记录：

```
@animal = Animal.includes(:cuts => :package) 
```

然后您的视图可以缩短为：

```
<% @animal.cuts.each do |cut| %>
  <tr>
    <td><%= cut.name %></td>
    <td><%= number_to_currency(cut.price) %></td>
    <td><%= cut.package_weight %> lb</td>
    <td><%= cut.package.original %></td>
    <td><%= cut.package.left %></td>
  </tr>
<%end%> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T21:15:54.200

由于我无法对您的帖子发表评论，因此我猜测：您具有以下架构：

剪切 -> 包装 <- 动物

其中，“->”和“<-”是一对多的关系，所以

```
class Package < ActiveRecord::Base
  has_many :cuts
  has_many :animals
end 
```

所以，你想要“那个”包，它有 id 3 和 Animal id 4 的 Cut。你试过了吗：

```
x = Product.select { |product| product.cuts.include?(Cut.find(3)) }.select{ |product| product.animals.include?(Animal.find(4)) } 
```

?

编辑：我首先建议你使用

```
Product.find_by_product_id_and_animal_id() 
```

这没有用，但向 OP 展示了这样做的方法

# rbenv - 如何让 rbenv 自动安装某些 gem？

> ID：12572932
> 
> 赞同：1
> 
> 时间：2012-09-24T21:06:05.133
> 
> 标签：rbenv

我一直希望`bundler`并`gem-ctags`安装在我安装的任何 Ruby 中。有没有办法让 rbenv / ruby​​-build 自动安装它们？

RVM 有`@global`gemsets；rbenv中是否有等价物？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T18:13:16.133

### 使用 rbenv 插件

默认情况下，rbenv 不使用 gemsets。喜欢 rbenv 的人可能只是在他们想要不同的 gem 时破解他们的 GEM_PATH 和 GEM_HOME，但也有一些插件可以自动执行一些这种行为。我知道的两个是：

*   Sam Stephenson（rbenv 的作者）的[rbenv-vars](https://github.com/sstephenson/rbenv-vars#rbenv-vars)
*   Jamis Buck 的[rbenv-gemset](https://github.com/jamis/rbenv-gemset#rbenv-gemset)

### 使用捆绑者的`--path`旗帜

当然，您也可以只使用带有 --path 标志的 bundler 将捆绑的 gem 安装到唯一的目录，而不是使用 gemset。bundle-install ( [1) 文档](http://gembundler.com/man/bundle-install.1.html)说：

> --path=<路径>
> 
> 将捆绑包中的 gem 安装到的位置。这默认为 gem home，这是 gem install 安装 gem 的位置。这意味着，默认情况下，没有 --path 设置的 gem 将显示在 gem 列表中。此设置是一个记住的选项。

### 考虑使用“包含电池”的 RVM

rbenv 的论点是比 RVM 更简单，并且在底层做的更少。我认为，如果您需要添加[ruby](https://github.com/sstephenson/ruby-build) ​​-build 、 rbenv-gemset 和其他插件来获得所需的功能，那么您不妨首先使用[RVM](https://rvm.io/)。

这不是对 rbenv 的批评，也不是对 RVM 的赞扬。我只是指出，如果您想要一个能够为您提供 RVM 大部分功能的工具，那么您最好只使用能够“开箱即用”的工具，而不是在*post facto*上固定功能。

你当然可以用 rbenv 做你需要做的事情，一种或另一种方式。我只是建议您不要将自己置于必须与工具作斗争才能完成工作的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T19:17:02.710

我编写了一个小 shell 脚本，告诉 Gem 将特定的 gem 添加到当前设置的任何 Ruby 中。这样，无论我是使用 rbenv、RVM 还是在我手动从源代码安装 Ruby 的机器上，它都可以工作。

# wpf - XamlReader 解析后恢复绑定

> ID：12572936
> 
> 赞同：1
> 
> 时间：2012-09-24T21:06:11.933
> 
> 标签：wpf, xaml, data-binding, binding, xamlreader

我的问题如下：在我的程序中，我让用户在画布上放置形状（类 DrawingShape）。Drawing Shape 封装了一个堆叠的路径和标签：

```
<UserControl x:Class="HandballTrainerFluent.Graphics.DrawingShape"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d"
             d:DesignHeight="60"
             d:DesignWidth="60"
             DataContext="{Binding RelativeSource={RelativeSource Self}}">
    <Grid x:Name="container" Width="Auto" Height="Auto">
        <Grid.RowDefinitions>
            <RowDefinition Height="38"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Canvas x:Name="geometryCanvas" HorizontalAlignment="Center" Grid.Row="0" Width="38" Height="38">
            <Path x:Name="Path"
                  Width="35.8774"
                  Height="31.2047"
                  Canvas.Left="1.0613"
                  Canvas.Top="3.29528"
                  Stretch="Fill"
                  StrokeLineJoin="Round"
                  Stroke="{Binding OutlineBrush,Mode=OneWay}"
                  StrokeThickness="{Binding OutlineWidth,Mode=OneWay}"
                  StrokeDashArray="{Binding OutlinePattern,Mode=OneWay}"
                  Fill="{Binding FillBrush,Mode=OneWay}"
                  Data="F1 M 19,3.79528L 1.5613,34L 36.4387,34L 19,3.79528 Z "/>
        </Canvas>
        <TextBlock x:Name="TextBox" HorizontalAlignment="Center" Grid.Row="1" Text="{Binding LabelText,Mode=OneWay}"></TextBlock>
    </Grid>
</UserControl> 
```

所以一些视觉设置和标签文本绑定到代码隐藏文件的属性。

使用这些绘图形状反序列化 Canvas 后，我需要恢复 XAML 和代码隐藏文件之间的绑定。我试过这个，但它似乎不起作用：

```
private void RepairBindingsAfterLoading()
{
    foreach (UIElement element in this.drawingCanvas.Children)
    {
        if (element.GetType() == typeof(DrawingShape))
        {
            DrawingShape shape = (DrawingShape)element;
            BindingOperations.ClearAllBindings(shape.Path);
            BindingOperations.ClearAllBindings(shape.TextBox);
            BindingOperations.ClearAllBindings(shape);

            shape.BeginInit();
            Binding dataContextBinding = new Binding();
            dataContextBinding.RelativeSource = RelativeSource.Self;
            shape.SetBinding(DrawingShape.DataContextProperty, dataContextBinding);

            Binding fillBinding = new Binding("FillBrush");
            shape.Path.SetBinding(Path.FillProperty, fillBinding);
            Binding outlineBinding = new Binding("OutlineBrush");
            shape.Path.SetBinding(Path.StrokeProperty, outlineBinding);
            Binding widthBinding = new Binding("OutlineWidth");
            shape.Path.SetBinding(Path.StrokeThicknessProperty, widthBinding);
            Binding patternBinding = new Binding("OutlinePattern");
            shape.Path.SetBinding(Path.StrokeDashArrayProperty, patternBinding);

            Binding labelTextBinding = new Binding("LabelText");
            shape.TextBox.SetBinding(TextBlock.TextProperty, labelTextBinding);
            shape.EndInit();
            shape.UpdateLayout();
        }
    }
} 
```

无论我对代码隐藏属性做什么（例如更改 FillBrush），所显示的 DrawingShape 的视觉效果都不会更新。我在这里错过了重要的一步吗？

我在看到这个问题后添加了：`shape.BeginUpdate()`Bindings [not applied to dynamic-loaded xaml](https://stackoverflow.com/questions/7515360/bindings-not-applied-to-dynamically-loaded-xaml)`shape.EndUpdate()`

非常感谢您的任何见解

**编辑 2012-09-25**

查看另一段不依赖于任何绑定的代码让我想知道，我是否可以在反序列化后通过它们的 x:Name 实际引用 Xaml-Definition 中的任何元素。以下回调不对形状执行任何操作：

```
private void rotateClockwiseMenuItem_Click(object sender, RoutedEventArgs e)
{
    if(this.drawingCanvas.SelectedItem.GetType() == typeof(DrawingShape))
    {
        DrawingShape shape = (DrawingShape)this.drawingCanvas.SelectedItem;
        TransformGroup transformStack = new TransformGroup();
        transformStack.Children.Add(shape.geometryCanvas.LayoutTransform);
        transformStack.Children.Add(new RotateTransform(90));
        shape.geometryCanvas.LayoutTransform = transformStack;
    }
} 
```

调试告诉我，内容`shape`似乎刚刚好。当我执行一次命令时，`shape.geometryCanvas.LayoutTransform`是单位矩阵。第二次执行时，`shape.geometryCanvas.LayoutTransform`是`TransformGroup`两个元素中的一个。

不知何故，看起来`geometryCanvas`（在 Xaml 中声明的）的参考不是屏幕上使用的参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:20:50.113

知道了！

我不知道您无法在反序列化后从代码隐藏文件外部成功引用 x:Name'd XAML 元素（至少这似乎是手头的问题）。

一个解决方案是`FindName()`在 UserControl 上使用，例如：

```
TextBlock textBox = shape.FindName("TextBox") as TextBlock; 
```

完整正确的`RepairBindingsAfterLoading()`样子是这样的：

```
private void RepairBindingsAfterLoading()
{
    foreach (UIElement element in this.drawingCanvas.Children)
    {
        if (element.GetType() == typeof(DrawingShape))
        {
            DrawingShape shape = (DrawingShape)element;
            shape.DataContext = shape;

            Path path = shape.FindName("Path") as Path;
            Binding fillBinding = new Binding("FillBrush");
            path.SetBinding(Path.FillProperty, fillBinding);
            Binding outlineBinding = new Binding("OutlineBrush");
            path.SetBinding(Path.StrokeProperty, outlineBinding);
            Binding widthBinding = new Binding("OutlineWidth");
            path.SetBinding(Path.StrokeThicknessProperty, widthBinding);
            Binding patternBinding = new Binding("OutlinePattern");
            path.SetBinding(Path.StrokeDashArrayProperty, patternBinding);

            TextBlock textBox = shape.FindName("TextBox") as TextBlock;
            Binding labelTextBinding = new Binding("LabelText");
            textBox.SetBinding(TextBlock.TextProperty, labelTextBinding);
        }
    }
} 
```

只是为了记录，我的笨拙

```
BindingOperations.ClearAllBindings(shape.Path);
BindingOperations.ClearAllBindings(shape.TextBox);
BindingOperations.ClearAllBindings(shape); 
```

就像 dbaseman 建议的更简单和优雅的解决方案一样工作：

```
shape.DataContext = this; 
```

希望这可以帮助其他人避免我的错误:-)

# java - 读取没有 OBDC 驱动程序的 MS Access 数据库

> ID：12572938
> 
> 赞同：2
> 
> 时间：2012-09-24T21:06:31.233
> 
> 标签：java, database, ms-access, 64-bit

我在尝试更新一些代码时遇到了一个非常烦人的问题。有问题的代码从本地 MS 访问文件 (*.mdb) 中读取一些（实际上很多）信息，然后对这些数据执行几个操作（只是简单的东西）。请记住，我只需要阅读数据库，仅此而已。

问题是我正在尝试将该程序部署到 x64 操作系统（主要是 win7）中，但我无法访问 32 位 ODBC 驱动程序。

这是访问数据库的代码部分，变量“路径”是一个字符串，其中包含 mdb 文件的绝对路径，正如我所说，这个文件是本地的。

```
public void openConection()
{
    try
    {
        Properties props = new Properties();
        props.put ("charSet", "ISO-8859-1");
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
        String dbURL = "jdbc:odbc:Driver={Microsoft AccessDriver (*.mdb)};DBQ=";
        dbURL += this.path + ";DriverID=22;READONLY=false)";
        this.connection = DriverManager.getConnection("jdbc:odbc:Driver={Microsoft AccessDriver (*.mdb)};DBQ=" + this.path, props);
        this.statement = this.connection.createStatement();
        System.out.println("Success");
    }catch(Exception e)
    {
            System.out.println("Error :" + e);
    }
} 
```

这会引发以下错误：

> [Microsoft][ODBC Driver Manager] 未找到数据源名称且未指定默认驱动程序

问题（据我所知）出在这段代码中：

```
("jdbc:odbc:Driver={Microsoft AccessDriver (*.mdb)};DBQ=" + this.path, props 
```

如果我是正确的，这会尝试将 java jdbc 桥接到 MS Access ODBC，这是一个 32 位驱动程序，因此程序无法访问。我尝试用谷歌搜索我的问题，但没有找到任何帮助，我确实找到了 64 位 MS Access 驱动程序，但它需要卸载 32 位版本的 Office。

另外，我想避免为此创建一个 DSN，因为该程序必须提供给许多不知道如何执行此操作的人。

谢谢。

泽皮

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T21:12:42.393

您可以尝试使用 Java API 直接从文件中读取。那里有几个图书馆。

你可以试试[Jackcess](http://jackcess.sourceforge.net/)。免费。

# javascript - 如何使用 javascript 创建字体，它的便携性如何？

> ID：12572948
> 
> 赞同：-1
> 
> 时间：2012-09-24T21:07:29.703
> 
> 标签：javascript, css, fonts

我读到[Adob​​e 发布了一些免费的网络字体](http://html.adobe.com/edge/webfonts/)

说明说您需要导入这样的脚本：

```
<script src="http://use.edgefonts.net/FOO.js"></script> 
```

那么你将能够像这样编写 CSS：

```
#foo {font-family: FOO, serif;} 
```

这是什么新资源？！？

这个技巧叫什么，浏览器支持是什么样的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:17:06.197

让我向您介绍一些 CSS：

```
@font-face {
    font-family: 'Foo';
    font-weight: normal;
    font-style: normal;
    src: url("foo.eot");
    src: url("foo.woff") format("woff"), url("foo.ttf") format("truetype"), url("foo.svg#foo") format("svg");
}

p {
    font-family: Foo, sans-serif;
} 
```

`@font-face`定义一种网络字体并根据您使用的浏览器为其提供一些尝试的资源。该`font-family`属性会告诉它您以后要如何称呼它。

这是[MDN 文档`@font-face`](https://developer.mozilla.org/en-US/docs/CSS/@font-face)

# maven - 如何正确配置 Selenium Maven 插件以与 Xvfb 一起运行以无头运行

> ID：12572955
> 
> 赞同：10
> 
> 时间：2012-09-24T21:07:53.643
> 
> 标签：maven, selenium, selenium-webdriver, xvfb, headless-browser

***背景：***
我将 selenium-server-2.25.0 与 J-Unit 4 结合使用，为我的 GWT 应用程序运行少数 UI 测试场景。在我的 IDE (Netbeans 7.2) 中，我可以右键单击我的项目，选择“测试”，然后看到 Firefox 窗口到处弹出（它们应该如此），Selenium 测试按预期运行。从命令行，我也可以运行`mvn integration-test`并查看相同的内容。

***目标：***
我试图让这些测试在 Xvfb 显示器中无头运行，但我似乎无法让它与 Maven 一起使用。我可以事先手动运行`export display=:2`（：2 是我的 Xvfb 显示器），然后测试在隐形显示器中成功运行。

***问题：***当我在 pom.xml 中[包含此处](http://mojo.codehaus.org/selenium-maven-plugin/examples/headless-with-xvfb.html)的完整条目
似乎什么**都**没有改变。我仍然看到 Windows 到处弹出，并且测试**不在**Xvfb 显示中运行。如果我把它拿出来再次运行，同样的结果。但是，当我将阶段从更改为时，Maven**确实**抱怨生命周期阶段无效 - 所以我知道它并没有完全忽略它，我正在编辑适当的 pom.xml。`<plugin>``mvn integration-test`**`pre-integration-test``qwertyasdf`**

 ****谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T21:45:56.310

事实证明，'start-server' 和 'stop-server' 目标是用于启动/停止 SeleniumRC 服务器。这*不是*我想要的，因为我所有的测试都使用 WebDriver API。

显然，pom 中的“xvfb”目标确实在指定的生命周期阶段启动了一个 Xvfb 会话——我想我之前只是没有看到它。在它的配置中，你可以指定在哪里编写一个 props 文件，详细说明 Xvfb 正在运行的显示器。在 Java 代码中，可以读取此文件并将值传递给创建 WebDriver 时使用的 FirefoxBinary。

相关的 pom.xml 位如下：

```
<properties>
    <displayProps>target/selenium/display.properties</displayProps>
</properties>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <configuration>
                <systemPropertyVariables>
                    <display.props>${displayProps}</display.props>
                </systemPropertyVariables>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>selenium-maven-plugin</artifactId>
            <version>2.3</version>
            <executions>
                <execution>
                    <id>xvfb</id>
                    <phase>test-compile</phase>
                    <goals>
                        <goal>xvfb</goal>
                    </goals>
                    <configuration>
                        <displayPropertiesFile>${displayProps}</displayPropertiesFile>
                    </configuration>
                </execution> 
            </executions>  
        </plugin>
    </plugins>
</build> 
```

这会在第一个空闲显示（：20 或更高）上启动 Xvfb，并将值写入我稍后在 Java 代码中读取和使用的 props 文件。

```
String xvfbPropsFile = System.getProperty("display.props");

FirefoxBinary ffox = new FirefoxBinary();
ffox.setEnvironmentProperty("DISPLAY", /*read value from xvfbPropsFile*/);
WebDriver driver = new FirefoxDriver(ffox); 
```

现在驱动程序将控制在适当显示中旋转的 Firefox 实例。瞧！****

# sitebricks - 使用 Sitebricks 反序列化 post/get 参数

> ID：12572958
> 
> 赞同：0
> 
> 时间：2012-09-24T21:08:29.407
> 
> 标签：sitebricks

在 sitebricks 中，我可以在 Sitebricks`@Service`方法中轻松地从 json 格式的参数中反序列化一个类，如下所示：

```
request.read(Person.class).as(Json.class); 
```

但是如何从 get/post 参数反序列化一个类？

我知道该`Request`对象可以访问参数 ( `request.params()`)，但它需要更多的努力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:16:55.690

在您的模块中声明您的处理程序类：

```
at("/test").serve(TestPage.class); 
```

然后用成员声明您的 TestPage 并关联与您的 get/post 参数相对应的 getter/setter

```
public class TestPage {

    private String param;

    @Get
    public Reply<?> get() {
        // request get param "param" is already mapped in param
    }

    @Post
    public Reply<?> post() {
        // request post param "param" is already mapped in param
    }

    public void setParam(String param) {
        this.param = param;         
    }

    public String getParam() {
        return this.param;
    }        

} 
```

然后使用 get 或 post 参数“param”调用您的 url /test。

查看[http://sitebricks.org/#requestandreply](http://sitebricks.org/#requestandreply)

希望有帮助。

Rgds

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T01:12:10.493

如果我想要反序列化的对象不是服务本身，那么我将不得不注入 Json 来进行反序列化。

```
public class TestPage {
   @Inject Json json;

   @Post
   public void post(Request request) {
     String data = request.param("data");
     Person p = json.in(new ByteArrayInputStream(data.getBytes()), Person.class);

     ...
   }
} 
```

# c++ - 与返回的局部变量关联的堆栈内存地址 (C++)

> ID：12572959
> 
> 赞同：-2
> 
> 时间：2012-09-24T21:08:31.880
> 
> 标签：c++

Mac OSX，我正在尝试使用 tchar.h，但显然这是特定于 Windows 的。我猜这是这段代码对我不起作用的原因：

```
//toString

char *Node::toString(){

    char hilera[100];
    strcpy(hilera, dato->toString());
    strcat(hilera, "\n");
    return hilera;

} 
```

所以你有什么建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T21:10:43.087

退出函数作用域`hilera`后将被销毁，将返回悬空指针。使用`std::string`，或在堆中分配内存。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T21:10:34.087

代码不起作用的原因是它返回了局部变量的地址，这是未定义的行为。您需要动态分配一个缓冲区并返回它的地址。或者因为这是 C++，所以返回 a `std::string`。

# c# - 在 C# 中转换为字节

> ID：12572962
> 
> 赞同：11
> 
> 时间：2012-09-24T21:08:42.400
> 
> 标签：c#, casting, byte

> **可能重复：**
> [当您在 C# 中从 short 转换为 byte 时会发生什么？](https://stackoverflow.com/questions/7575643/what-happens-when-you-cast-from-short-to-byte-in-c)

有人可以解释将值转换为字节时发生的情况，如果它超出了最小/最大字节的范围吗？它似乎是取整数值并将其与 255 取模。我试图理解为什么这不会引发异常的原因。

```
int i = 5000;
byte b = (byte)i;

Console.WriteLine(b);  // outputs 136 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T21:20:37.187

5000 表示为 4 个字节（int）（十六进制）

## |00|00|13|88|

现在，当您将其转换为字节时，它只需要最后 1 个字节。

*原因：在 IL 级别，将使用[conv.u1](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.conv_u1.aspx)运算符，如果在将 int 转换为 byte 时发生溢出，它将截断高位。（参见[conv.u1](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.conv_u1.aspx)文档中的备注部分）。*

## |88|

十进制表示为 136

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T21:12:23.190

正在发生的事情是系统正在丢弃最高有效字节以使其适合。查看[这个 StackOverFlow 答案](https://stackoverflow.com/questions/7575643/what-happens-when-you-cast-from-short-to-byte-in-c)，了解正在发生的事情的一个很好的解释。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T21:17:24.357

> 我试图了解为什么这不会引发异常的原因。

因为溢出检查的默认设置是*off*。

试试这个，它会抛出：

```
checked
{
    int i = 5000;
    byte b = (byte)i;

    Console.WriteLine(b);
} 
```

简短的形式是：

```
int i = 5000;
byte b = checked ( (byte)i );    
Console.WriteLine(b); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T21:12:40.787

你得到`5000%256 = 136`，像往常一样充满。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T21:16:27.413

MSDN 中也对此进行了说明。如果发生溢出，使用**checked()**抛出异常。另请阅读： [MSDN：第 5 章：关于变量的更多信息](http://msdn.microsoft.com/pl-pl/library/hh127989%28VS.88%29.aspx#Type)

# html - 相对调整child div的位置

> ID：12572963
> 
> 赞同：0
> 
> 时间：2012-09-24T21:08:45.193
> 
> 标签：html, css

我有一个 HTML，其中显示了一些带有背景图像的窗口。每行都包含一些这样的窗口。现在，我想要它们的一个小变化，我想将第一行第二窗口（以及该行中的所有窗口）定位到第二行第二窗口的右侧。简而言之，窗口应该只是移动到第二行第二个窗口的右侧。我不知道该怎么做。这是用 HTML 和 CSS 编写的代码

HTML代码-

```
 <div class="container">
        <div class="flower chunk1">
        <div><img src="http://assets.freeprintable.com/images/item/thumb/lotus-flower.jpg"/></div></div>

        <div class="flower chunk15">
        <div><img src="http://assets.freeprintable.com/images/item/thumb/lotus-flower.jpg"/></div></div>

        <div class="flower chunk2">
        <div><img src="http://assets.freeprintable.com/images/item/thumb/lotus-flower.jpg"/></div></div>

        <div class="flower chunk3">
        <div><img src="http://assets.freeprintable.com/images/item/thumb/lotus-flower.jpg"/></div></div>

        <div class="flower chunk4">
        <div><img src="http://assets.freeprintable.com/images/item/thumb/lotus-flower.jpg"/></div></div>
    </div>

    <div class="container">
        <div class="flower chunk5">
        <div><img src="http://assets.freeprintable.com/images/item/thumb/lotus-flower.jpg"/></div></div>

        <div class="flower chunk6">
        <div><img src="http://assets.freeprintable.com/images/item/thumb/lotus-flower.jpg"/></div></div>

        <div class="flower chunk7">
        <div><img src="http://assets.freeprintable.com/images/item/thumb/lotus-flower.jpg"/></div></div>

        <div class="flower chunk8">
        <div><img src="http://assets.freeprintable.com/images/item/thumb/lotus-flower.jpg"/></div></div>
    </div>

    <div class="container">
        <div class="flower chunk9">
        <div><img src="http://assets.freeprintable.com/images/item/thumb/lotus-flower.jpg"/></div></div>

        <div class="flower chunk10">
        <div><img src="http://assets.freeprintable.com/images/item/thumb/lotus-flower.jpg"/></div></div>

        <div class="flower chunk11">
        <div><img src="http://assets.freeprintable.com/images/item/thumb/lotus-flower.jpg"/></div></div>

        <div class="flower chunk12">
        <div><img src="http://assets.freeprintable.com/images/item/thumb/lotus-flower.jpg"/></div></div>
    </div> 
```

CSS代码-

```
 .container {
        float: left;
        white-space: nowrap;

    }
    .flower {
        display: inline;
        float: left;
        margin: 10px;
        width: 100px;
        height: 100px;
        overflow: hidden;
        border: 1px solid red;
    }
    .flower img {
        width: 100%;
        height: 100%;
    }
    .flower div {
        width: 200px;
        height: 200px;
        position: relative;
    }

    .chunk2 div {
        left: -100px;
    }
    .chunk3 div {
        top: -100px;
    }
    .chunk4 div {
        top: -100px;
        left: -100px;
    } 
```

这是 jsFiddle 链接[http://jsfiddle.net/VSd6Y/16/](http://jsfiddle.net/VSd6Y/16/) 请让我知道我应该怎么做才能在同一行移动窗口。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:41:54.067

我相信这就是你要找的。如果是，请告诉我，我将更新我的答案以解释我改变了什么以及为什么。

[http://jsfiddle.net/VSd6Y/17/](http://jsfiddle.net/VSd6Y/17/)

# php - Google Drive后台登录（PHP应用）

> ID：12572969
> 
> 赞同：3
> 
> 时间：2012-09-24T21:09:19.737
> 
> 标签：php, authentication, google-drive-api

我也一直在 Google 文档和 stackoverflow 上寻找答案，但我没有找到答案。我计划创建使用谷歌帐户（例如admin@domain.com）来存储文档模板的应用程序（PHP）。当有人使用他自己的凭据（例如 user@domain.com）登录到应用程序时，他可以填写一些表单，然后 PHP 应用程序登录到自己的 Google 帐户并将其与用户提供的数据一起存储在具有模板外观的新文档中。

我不想将用户重定向到谷歌并使用一些令牌返回应用程序。我希望应用程序在“静默模式”下进行一些登录过程 - 用户不可见，没有重定向。

简单的方案：

用户填写表单--（向应用程序发送数据）--> 应用程序登录到自己的谷歌帐户（admin@domain.com）--> 获取模板文档--> 填写表单中的用户数据--> 在 Google 上另存为副本驾驶

有人可以告诉我是否可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:26:28.267

您应该查看[Google Drive SDK](https://developers.google.com/drive/)。

您将需要依赖令牌（这就是 OAuth 的工作方式，Google Drive 使用 OAuth 2.0 进行身份验证）。但是，您可以通过执行以下操作来解决“自动登录”问题：

*   对于新用户，请他们在弹出窗口中提供授权（[更多详情请点击此处](https://stackoverflow.com/questions/7947038/how-to-authenticate-with-google-via-oauth-2-0-in-a-popup)）。这是必不可少的，因为他们需要在您授权之前批准权限等。
*   成功登录后，将返回一个长期存在的令牌。将此令牌保存在与用户关联的数据库中。
*   对于所有后续登录和请求，您可以请求新的访问令牌，而无需请求用户许可。

一旦用户已经通过初始授权阶段，[此链接将更多地讨论如何请求新的访问令牌。](https://developers.google.com/drive/about-auth#authorizing_with_stored_credentials)

此外，[此链接](https://developers.google.com/accounts/docs/OAuth2#scenarios)有几个登录场景示例（客户端应用程序、服务器端应用程序等），它们将帮助您朝着正确的方向前进。

# xmpp - 通过 gtalk 连接私人 XMPP 帐户

> ID：12572973
> 
> 赞同：2
> 
> 时间：2012-09-24T21:09:44.833
> 
> 标签：xmpp, openfire, google-talk

最近在一家拥有以下基础设施的新小公司开始工作：

*   托管 @chat..com 的私有 XMPP Openfire 服务器
*   使用 @.com 帐户的 Google Apps 电子邮件、聊天、文档等

该公司大量使用私人/内部聊天服务器进行通信。然而，这需要我在我的机器上安装和运行一个客户端，比如 Adium/Psi，然后将聊天记录存储在本地等。

由于让整个公司远离他们心爱的内部聊天服务器并使用谷歌应用程序内置的 gtalk 不是一种选择，因此希望通过 gtalk 注册@chat..com 帐户，然后通过gtalk 类似于人们对 AIM、Facebook 和其他传输工具所做的事情。好处如下：

*   所有聊天记录都存储在 gtalk 端的服务器端并且可搜索
*   公司其他人不需要改变行为
*   已经与 Google 服务同步的 Android 手机将无法利用聊天功能，而无需安装另一个 XMPP 客户端。
*   无需在台式机/笔记本电脑上安装胖客户端

我研究了 XMPP 传输并尝试注册，但它们似乎没有涵盖我的情况。到目前为止，我已经调查了两条路线，但没有运气：

*   Openfire 的传输插件
*   [在http://jabberd.eu](http://jabberd.eu)使用公共交通工具

已完成此任务的人的指导和/或经验将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:20:32.607

我使用 Spectrum（v1 和 v2）将 Openfire 连接到 Gmail 和 Facebook。它在用户的客户端中显示为可发现的服务。它要求将远程花名册插件添加到 Openfire，并且 Spectrum 需要在与 Openfire 相同的机器上运行。

简而言之，它的行为类似于 Web 代理。您的用户不必更改他们在您系统上的帐户，但对于 Gtalk 用户，您的用户似乎是其他 Gtalk 用户。您访问 Gtalk 的任何用户都将使用他们自己的 Gtalk 身份验证，因此您无需维护任何额外的身份验证方案。

看看它在[http://spectrum.im](http://spectrum.im)。Openfire 的远程花名册插件附在[http://community.igniterealtime.org/thread/46580](http://community.igniterealtime.org/thread/46580)中第一条消息的底部（它的文件名是“gojara.jar”）。

# c++ - 使用 boost 1.51 错误使用 intel compiler 12 for windows 编译

> ID：12572975
> 
> 赞同：2
> 
> 时间：2012-09-24T21:10:11.520
> 
> 标签：c++, windows, boost, intel

我喜欢检查英特尔编译器与 VS2008 相比的性能。所以我安装了 intel composer xe 12 并为我的项目使用了 intel 编译器。我还使用英特尔编译器构建了所有 boost 库：

```
call "C:\Program Files (x86)\Intel\Composer XE\bin\compilervars.bat" ia32 vs2008
call bootstrap.bat
call bjam --toolset="intel" --build-dir="libs"  --stagedir="win32" --build-type=complete stage  threading=multi link=static runtime-link=static 
```

问题：在项目中设置时

c/c++ - 语言 - 启用运行时类型信息 = 否

我得到一个编译器错误

```
boost/exception/diagnostic_information.hpp(153) 
```

设置时

c/c++ - 语言 - 启用运行时类型信息 = 是

我编译并链接了我的应用程序，但现在出现运行时错误

升压/线程/win32/thread_primitives.hpp

```
Run-Time Check Failure #3 - The variable 'ret' is being used without being initialized. 
```

任何人都可以帮助解决这个问题？

# php - 在哪里放置限制条款？

> ID：12572977
> 
> 赞同：1
> 
> 时间：2012-09-24T21:10:18.030
> 
> 标签：php, sql, sql-limit

我试图在数据库查询上放置一个限制子句，只显示前 4 个结果。

我正在使用的当前代码是

```
 $categories_query = "select c.categories_id, cd.categories_name, c.parent_id
                      from " . TABLE_CATEGORIES . " c, " . TABLE_CATEGORIES_DESCRIPTION . " cd 
                       where c.categories_id = cd.categories_id
                       and c.categories_status=1 " .
//                             "and c.categories_id = ptc.category_id " .
//                             "and ptc.category_id = cd.categories_id " .
//                             "and ptc.product_type_id not in  " . $this->document_types_list . "
                       " and cd.language_id = '" . (int)$_SESSION['languages_id'] . "'
                         order by c.parent_id, c.sort_order, cd.categories_name";
         $categories = $db->Execute($categories_query);
         while (!$categories->EOF) {
           $this->data[$categories->fields['parent_id']][$categories->fields['categories_id']] = array('name' => $categories->fields['categories_name'], 'count' => 0);
           $categories->MoveNext();
         } 
```

我遇到的问题是我找到了一种通过`LIMIT 4`在订单查询之后放置仅限制 4 个结果的方法，它显示了前 4 个父类别，但它也从列表中删除了子类别。

所以我想拿这个

```
<ul>
   <li>Menu One</li>
   <li>Menu Two
      <ul>
         <li>Submenu One</li>
         <li>Submenu Two</li>
         <li>Submenu Three</li>
      </ul>
   </li>
   <li>Menu Three</li>
   <li>Menu Four</li>
   <li>Menu Five</li>
   <li>ect...</li>
</ul> 
```

看到这个

```
<ul>
   <li>Menu One</li>
   <li>Menu Two
      <ul>
         <li>Submenu One</li>
         <li>Submenu Two</li>
         <li>Submenu Three</li>
      </ul>
   </li>
   <li>Menu Three</li>
   <li>Menu Four</li>
</ul> 
```

并且在查询中放置“LIMIT 4”时，它只显示这个

```
<ul>
   <li>Menu One</li>
   <li>Menu Two</li>
   <li>Menu Three</li>
   <li>Menu Four</li>
</ul> 
```

如何将子类别与父类别保持一致？Aparently 仅调用前 4 个不会调用其下的类别

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:22:38.837

该查询完全按照您的要求执行 - “LIMIT”表示您仅返回 4 条记录，按 categoryID 排序。

为了得到你想要的，你必须改写查询 - 我没有在这台笔记本电脑上安装 SQL，所以很难测试，但是像这样：

```
$categories_query = "select c.categories_id, cd.categories_name, c.parent_id
                      from " . TABLE_CATEGORIES . " c, " . TABLE_CATEGORIES_DESCRIPTION . " cd 
                       where c.categories_id = cd.categories_id
                       and c.categories_status=1 " .
                       " and cd.language_id = '" . (int)$_SESSION['languages_id'] . "'
                       " and c.parent_id in " .
                       " ( select parent_id from " . TABLE_CATEGORIES . " limit 4) " .
                       "  order by c.parent_id, c.sort_order, cd.categories_name";
         $categories = $db->Execute($categories_query);
         while (!$categories->EOF) {
           $this->data[$categories->fields['parent_id']][$categories->fields['categories_id']] = array('name' => $categories->fields['categories_name'], 'count' => 0);
           $categories->MoveNext();
         } 
```

# mysql - MySQL表中的所有数据也应该存储在solr中吗？

> ID：12572978
> 
> 赞同：1
> 
> 时间：2012-09-24T21:10:17.907
> 
> 标签：mysql, sql, solr, lucene, dih

嗨，我有一个 MySQL 表，我想主要进行范围搜索，我希望它快。所有新数据首先存储在 MySQL 中，然后每分钟使用 DIH 增量导入 Solr。每天大约生成 20,000 行。

**MySQL 架构**

MySQL 表包含 6 列，我想对其进行范围搜索（其中 2 列是`TIMESTAMP`s，并且有一对地理空间坐标），12 列`TINYINT`包含`0`或`1`。还有 30 列不需要搜索，其中 1 列是主键`id`。

**问题：**是否建议将所有 48 列存储在 solr 中并仅在 solr 中进行搜索？或者我应该只将我想要搜索的列存储在 solr 中，然后只`id`从 solr 检索搜索结果，然后`SELECT`从 MySQL 表中检索我想要使用的行？

所有帮助表示赞赏！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T23:15:22.650

在您的情况下，我建议仅存储您需要在 Solr 中搜索的属性（因为它们很少，因此索引所有列将是不必要的开销）。

以前有关于这个主题的问题：
[Solr 和 MySQL，如何保持更新的索引，以及，如果数据库很简单，是否还需要数据库？](https://stackoverflow.com/questions/5650989/solr-and-mysql-how-to-keep-an-updated-index-and-is-a-db-even-needed-if-its-s)
[Solr / rdbms，在哪里存储附加数据](https://stackoverflow.com/questions/9004901/solr-rdbms-where-to-store-additonal-data)
[Solr 最佳实践：Solr 中的所有数据或定期复制到 Solr？](https://stackoverflow.com/questions/10884187/solr-best-practice-all-data-in-solr-or-periodically-copy-to-solr)

# java - 如何在 Java 中比较时间？

> ID：12572983
> 
> 赞同：1
> 
> 时间：2012-09-24T21:10:42.783
> 
> 标签：java, android

> **可能重复：**
> [如何在java中计算时间差？](https://stackoverflow.com/questions/4927856/how-to-calculate-time-difference-in-java)

我有两个字符串“10:00:00”和“14:00:00”。我已将它们转换为日期格式。现在我想要两个比较一下时间。谁能建议我该怎么做....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T21:12:51.870

使用比较（）。

```
date1.compareTo(date2); 
```

来自[java 文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Date.html#equals%28java.lang.Object%29)：

> 返回： 如果参数 Date 等于此 Date，则值为 0；如果此 Date 在 Date 参数之前，则值小于 0；如果此 Date 在 Date 参数之后，则值大于 0。

[其他例子](http://www.mkyong.com/java/how-to-compare-dates-in-java/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T21:12:41.427

检查[`Date#equals`](http://java.sun.com/j2se/1.5.0/docs/api/java/util/Date.html#equals%28java.lang.Object%29), [`Date#after`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Date.html#after%28java.util.Date%29), [`Date#before`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Date.html#before%28java.util.Date%29)

我更喜欢将`Calendar`类用于与日期相关的任务。在某些情况下使用它们是相当不错的。您可以在[此](http://www.vogella.com/articles/JavaDateTimeAPI/article.html)链接中找到更多有用的示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T21:16:36.033

在进行比较之前，由于时间戳仍然是字符串格式，您需要将它们转换为 java.util.Date，最简单的方法是将任意日期部分分配给两个时间字符串（例如将两个时间字符串连接到 " 1/1/1970")，然后使用 SimpleDateFormat 将它们转换为日期，然后以毫秒为单位获取时间并进行比较。

# html - display:table-cell 在 Firefox 和 Chrome 中的行为不同

> ID：12572984
> 
> 赞同：3
> 
> 时间：2012-09-24T21:10:57.463
> 
> 标签：html, css, cross-browser

我在 Chrome 中构建了一个图表，如下所示： ![在此处输入图像描述](../Images/ae92f110cd8dac6c00e7142edab1ff14.png)

但在 Firefox 中，它看起来像这样： ![在此处输入图像描述](../Images/6a2ac3b82a33edaf171485bea0a0bf7f.png)

我很确定这种差异是`display:table-cell`两种浏览器处理方式不同的结果。但我不知道如何解决它。[我在这里](http://streetofwalls.com/graph-dev/)上传了一个现场演示，所以你可以检查代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T21:43:01.153

为了修复它：

1.  适用`display: table-row`于`.graph`
2.  使用`inline-block`而不是`table-cell`打开`.series`
3.  避免使用疯狂的浮点数百分比（例如*14.2857%*），因为浏览器的数学引擎几乎总是以不同的方式进行舍入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T21:41:47.260

问题在于 Firefox 中的相对定位。更改 .series 的位置并进行更多更改，它就可以工作了。在 Firefox 中，%width 实际上是计算外除的百分比，因为是相对定位。

# php - 使用 PHP 进行加密和解密

> ID：12572986
> 
> 赞同：2
> 
> 时间：2012-09-24T21:11:02.680
> 
> 标签：php, encryption

我正在尝试在 PHP 中实现加密和解密功能，但它不仅工作正常。这是算法：

*   加密密钥是主密码：`1234567890`.
*   加密字母是`a-z, A-Z, 0-9, =`
*   对属于加密字母表的签名后的每个符号进行加密。跳过其他。
*   符号通过加密字母表中的移位（向右）进行加密。移位量由加密密钥的当前数字给出。每次使用后，加密密钥的当前数字向右移动，并从结尾循环到开头。

这是我当前的代码：

```
 function tnsencrypt($master_code,$text) { //the text to be encrypted $plain_text= $text;

//letters of alphabet array $alphabet=array('0','1','2','3','4','5','6','7','8','9','=','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z');

//$alphabet_len = count($alphabet); //$signature_len = 17; // signature=TnpMsgE //$master_code_len = 10; $mcursor = 0;

//positions of the letters in alphabet : The array_flip() function returns an array with all the original keys as values, and all original values as keys. $flip=array_flip($alphabet); //plaintext array $plain_text=str_split($plain_text); $master_code=str_split($master_code);

$n=count($plain_text); $encrypted_text=''; for ($i=0; $i }

}

//echo $encrypted_text; return $encrypted_text; }

function tnsdecrypt($master_code,$text) { //the text to be decrypted $encrypted_text= $text;

//letters of alphabet array $alphabet=array('0','1','2','3','4','5','6','7','8','9','=','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'); //positions of the letters in alphabet : The array_flip() function returns an array with all the original keys as values, and all original values as keys. $flip=array_flip($alphabet);

//plaintext array $encrypted_text=str_split($encrypted_text); $master_code=str_split($master_code);

$n=count($encrypted_text); $decrypted_text=''; for ($i=0; $i

} else {
    $decrypted_text.= $encrypted_text[$i];  
}
//move mcursor
$mcursor = ($mcursor+1)%10;
}

//echo $encrypted_text; return $decrypted_text;

}

if(isset($_POST["text"])) { $text = $_POST["text"]; $shifttext = $_POST["shifttext"]; echo "
Encrypted Text: ".tnsencrypt($shifttext,$text); echo "
Decrypted Text: ".tnsdecrypt($shifttext,tnsencrypt($shifttext,$text));

}

?> 
```

这是我的结果：

原文：`val1=1234567 val2=abcdef val3=ABCDEF`

加密文本：`vjt8F666666F 3hr7Dddddnn 2gq7CCCCMMM`

加密文本：`vjt8F666666F hr7Dddddnn gq7CCCCMMM`

解密文本：`val1=1234567 al2=abcdef al3=ABCDEF`

如您所见，加密中缺少几个字符，这也影响了解密。缺少的是第 2 行的 v 和第 3 行的 v

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:22:29.997

你为什么做这个？如果这是为了实际使用而不仅仅是学术练习，您可以使用几种单向和双向加密解决方案：

**单向**：**双向**：[`crypt()`](http://php.net/manual/en/function.crypt.php)
**[`mcrypt`](http://www.php.net/manual/en/book.mcrypt.php)**

 **加密几乎是一个已解决的问题。**

# javascript - jquery 事件绑定的奇怪行为

> ID：12572987
> 
> 赞同：0
> 
> 时间：2012-09-24T21:11:09.010
> 
> 标签：javascript, jquery

这是 jquery 大师的一个：

这有效：

```
$(function (){
    $("#<?= $gridArr['event_id'] ?> .gallery-add").each(function() {
        var $dialog = $("<div></div>");
        var $link = $(this).one("click", function() {
            $dialog
                .load($link.attr("href"))
                .dialog({
                    modal: true,
                    width: 520,
                    height: 180,
                    title: $link.attr("title")
                });
            $link.click(function() {
                $dialog.dialog("open");                                    
                return false;
            });        
            alert('clicked');           
            $(document).bind('uploadDone', function(e) {
               // alert("dialogCloser triggered in dialog function");
                $dialog.dialog("close"); 
                $("#<?= $gridArr['uniq'] ?>-event-path-form-submit").trigger('click');   
            });                         
            return false; 
        });

    });
}); 
```

这不会：

```
$(function (){
    $("#<?= $gridArr['event_id'] ?> .gallery-add").each(function() {
        var $dialog = $("<div></div>");
        var $link = $(this).one("click", function() {
            $dialog
                .load($link.attr("href"))
                .dialog({
                    modal: true,
                    width: 520,
                    height: 180,
                    title: $link.attr("title")
                });
            $link.click(function() {
                $dialog.dialog("open");                                    
                return false;
            });        
            // alert('clicked');           
            $(document).bind('uploadDone', function(e) {
               // alert("dialogCloser triggered in dialog function");
                $dialog.dialog("close"); 
                $("#<?= $gridArr['uniq'] ?>-event-path-form-submit").trigger('click');   
            });                         
            return false; 
        });

    });
}); 
```

唯一的区别是警报声明。基本上我在这里所做的是将一堆点击事件处理程序附加到图像，这会在对话框中显示 ajax 上传表单。上传表单将图像转储到 iframe。然后 iframe 触发一个绑定到 $(document) 的 uploadDone 处理程序，并触发另一个单击事件。

唯一的区别是警报语句的存在。我把那条线拿出来，对话框无法关闭。

请告诉我我只是错过了一个分号或一些愚蠢的东西......否则我正在考虑使用延迟（）。

谢谢。

* * *

解决方案：

经过一个晚上的闲逛，我终于到达了这里。我无法肯定地确定警报语句发生了什么，或者如何管理异步执行，但这解决了它。

```
var $dialog = $("<div></div>");
$(function (){    
    $("#event_22 .gallery-add").each(function() {
        var $link = $(this).one("click", function() {
            $dialog
                .load($link.attr("href"))
                .dialog({
                    modal: true,
                    width: 520,
                    height: 180,
                    title: $link.attr("title")
                }).bind('uploadDone', function() {
                 // alert("uploadDone triggered in dialog function");
                 $("#myForm-submit").trigger('click');
            });
            $link.click(function() {
                $dialog.dialog("open");                                    
                return false;
            });
            return false; 
        });       
    });
}); 
```

在成功的 iframe 中，

```
parent.$dialog.dialog("close");
parent.$dialog.trigger( 'uploadDone' ); 
```

非常感谢大家的帮助。以下是我为使其正常工作所做的更改：

*   在全局范围内的函数之外声明 $dialog
*   在创建 $link.click() 之前将 uploadDone 事件侦听器绑定到 $dialog
*   将 id="22" 更改为 id="event_22" 因为在 html < 5 中，ID 必须以 alpha 字符开头。

我不确定谁会接受，但我当然感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T21:17:03.953

alert 语句很可能会导致一个块，在执行下面的代码之前给上面的代码时间来完成。我的猜测是，如果没有警报，它会在完成上传之前一直返回 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T21:22:15.167

我的猜测是在绑定 uploadDone 事件之前加载对话框。是否有理由将它绑定在 click 事件处理程序中，而不是在创建它时？

```
$(function (){
  $("#<?= $gridArr['event_id'] ?> .gallery-add").each(function() {
    var $dialog = $("<div></div>");
    var $link = $(this).one("click", function() {
        $dialog
            .load($link.attr("href"))
            .dialog({
                modal: true,
                width: 520,
                height: 180,
                title: $link.attr("title")
            });
        $link.click(function() {
            $dialog.dialog("open");                                    
            return false;
        });           
        return false; 
    });
    $(document).bind('uploadDone', function(e) {
        // alert("dialogCloser triggered in dialog function");
        $dialog.dialog("close"); 
        $("#<?= $gridArr['uniq'] ?>-event-path-form-submit").trigger('click');   
    }); 

  });
}); 
```

如果您总是希望在广播 uploadDone 时关闭所有对话框，这似乎应该可以工作。但是，就像大卫在你的问题评论中所说的那样......一些背景会有所帮助

# c# - Windows Phone：如何在不使用 Contacts.SearchAsync 任务的情况下获取联系人？

> ID：12572988
> 
> 赞同：1
> 
> 时间：2012-09-24T21:11:12.443
> 
> 标签：c#, windows-phone-7, contact

是否可以在不使用类 Contacts 和他的 SearchAsync 方法的情况下获得联系人？我继续解释我的问题。

我有一个 ObservableCollection

```
private ObservableCollection<ContactPictureItemModel> _ContactPictures; 
```

像这样的 ContactPictureItemModel

```
public class ContactPictureItemModel
{
    private string _Email;
    private byte[] _Picture;
    private string _DisplayName;

    public ContactPictureItemModel(string email, byte[] picture, string displayName)
    {
        this._Email = email;
        this._Picture = picture;
        this._DisplayName = displayName;
    }

    public string Email
    {
        get { return _Email; }
        set { _Email = value; }
    }

    public byte[] Picture
    {
        get { return _Picture; }
        set { _Picture = value; }
    }

    public string DisplayName
    {
        get { return _DisplayName; }
        set { _DisplayName = value; }
    }
} 
```

此 ObservableCollection 中的每个对象都表示每次用户从 EmailAddressChooserTask 中选择联系人时应用程序“缓存”的联系人图片。

调用此方法时需要

```
public ContactPictureItemModel GetContactPictureItem(string email, string displayName)
{
    ContactPictureItemModel contactPictureResult;

    foreach (ContactPictureItemModel contact in ContactPictures)
    {
        if (email.Equals(contact.Key))
        {
            contactPictureResult = contact;
            break;
        }
    }

    if (contactPictureResult == null)
    {
        //Retrieve contact using "email" parameter
    }

    return contactPictureResult;
} 
```

并且在 ObservableCollection 中找不到联系人，以便能够在不使用任何异步任务的情况下使用参数“email”和“displayName”获取联系人。我需要该函数检索 ContactPictureItemModel 对象。

那可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:27:25.193

同步访问联系人是不可能的，因为它没有 API。

您可以在“加载”状态下创建视图模型，然后在异步方法完成时“填充”它。只要确保模型类实现`INotifyPropertyChanged`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:58:42.727

感谢 Richard Szalay，我找到了解决方案。我将解释它以帮助像我一样陷入这些问题的每个人（对不起Java符号，这样代码更短）

这些是具有代表联系人及其图片的对象的私有字段

```
public class ParticipantItemModel {
    private string _Email;
    private string _DisplayName;
    private bool _Paid;
    [XmlIgnore]
    private BitmapImage _ContactPicture;

    [...]
} 
```

每个私有字段都有自己的属性来获取和设置他的值。像这个

```
 public string Email {
        get { return _Email; }
        set { _Email = value; }
    } 
```

在处理 _ContactPicture 时，它​​的属性有点特别。为了获取它的值，如果 _ContactPicture 为 null 并且图片未缓存到 ObservableCollection 中，我使用 Contacts.SearchAsync 任务搜索联系人并返回“空图像”。当找到联系人时（尽管视图已经加载），我使用正确的图像设置属性 ContactPicture，引发 PropertyChangedEventArgs 事件（如您在其 setter 属性中所见）

```
 [XmlIgnore]
    public BitmapImage ContactPicture
    {
        get {
            if (_ContactPicture != null) {
                return _ContactPicture;
            } else {
                BitmapImage contactPictureSource = App.ContactPictures.GetContactPicture(Email, DisplayName);

                if (contactPictureSource != null) {
                    return contactPictureSource;
                } else {
                    Contacts contacts = new Contacts();
                    contacts.SearchCompleted += new EventHandler<ContactsSearchEventArgs>(contacts_SearchCompleted);
                    contacts.SearchAsync(DisplayName, FilterKind.DisplayName, Email);

                    return new BitmapImage();
                }
            }
        }

        set {
            _ContactPicture = value;
            //When _ContactPicture is setted, an event is raised by calling to NotifyPropertyChanged()
            NotifyPropertyChanged("ContactPicture");
        }
    }

    void contacts_SearchCompleted(object sender, ContactsSearchEventArgs e) {
        Contact contact = null;

        foreach (var result in e.Results) {
            foreach (ContactEmailAddress contactEmail in result.EmailAddresses) {
                if (Email.Equals(contactEmail.EmailAddress)) {
                    contact = result;
                    this.ContactPicture = GetSourceImageFromContactPicture(contact.GetPicture());
                    break;
                }
            }
        }
    }        
} 
```

此外，必须实现 INotifyPropertyChanged 接口才能引发事件 PropertyChangedEventArgs。此事件将使应用程序知道元素（联系人的图片）已更改，并将使用绑定的数据进行刷新

```
public class ParticipantItemModel : INotifyPropertyChanged {

    [...]

    // Declare the PropertyChanged event
    public event PropertyChangedEventHandler PropertyChanged;

    // NotifyPropertyChanged will raise the PropertyChanged event passing the
    // source property that is being updated.
    public void NotifyPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    } 
```

结果，显示的联系人没有图片，但几乎自动加载了图片。

我希望它有所帮助

# java - JAXB unmarshal 对于嵌套对象始终具有空值

> ID：12572998
> 
> 赞同：3
> 
> 时间：2012-09-24T21:12:11.443
> 
> 标签：java, xml, web-services, jaxb, unmarshalling

我有一个 web 服务，通过编写它的 WSDL 和底层 XSD 来定义，并且 java 服务器代码类/java 绑定是使用 JAXB/xjc 生成的。

一切看起来都很好服务正在正常运行......但是对于每个请求（在查看日志输出时接收后看起来格式正确），嵌套元素在通过我的 java 代码访问时似乎总是为空。

有人能弄清楚为什么 customerId.getCustomer() 总是返回 null 吗？

## 我的 XSD（部分）：

```
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns:tip="http://example.org/tip" xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="http://example.org/tip/pro">

<complexType name="id">
  <attribute name="id" type="int" use="required"/>
  <attribute name="name" type="string" use="optional"/>
</complexType>

<complexType name="customer_id">
  <sequence>
    <element name="customer" type="tip:id" minOccurs="0"/>
  </sequence>
</complexType>

<element name="get_customer_request" type="tip:customer_id"/>

</schema> 
```

## 生成的类CustomerId：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "customer_id", propOrder = {"customer"})
public class CustomerId {
  protected Id customer;

  public Id getCustomer() {
    return customer;
  }

  public void setCustomer(Id value) {
    this.customer = value;
  }
} 
```

为 Id 生成的类看起来很相似，我认为没有什么特别之处。在我的请求处理程序中，我得到了以下摘录：

## 处理程序：

```
JAXBElement<?> request = requestHandler.unmarshallRequest(inputStream);
Object jaxbClass = request.getDeclaredType();
expectedClass = CustomerId.class;
// next line does not throw exception with given XML
if (jaxbClass != expectedClass) throw new IllegalArgumentException();

CustomerId customerId = (CustomerId)request.getValue();
if (customerId == null) {
  logInfo("customerId: null");
} else if (customerId.getCustomer() == null) {
  // this is the part that always will be executed... why?
  logInfo("customerId.customer: null");
} else {
  logInfo("customer id: " + customerId.getCustomer().getId());
  // return mbean.getCustomer(customerId);
} 
```

## 最后是一个示例请求 XML：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<m:get_customer_request xmlns:m="http://example.org/tip/pro">
  <customer id="0" name="help"/>
</m:get_customer_request> 
```

我去掉了 SOAP 信封和正文标签，因为这不会造成任何问题。谁能看到，我做错了什么？（我很确定，我确实......）感谢您的努力！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T16:03:45.577

**第1部分**

> 当我创建一个新 ID 并使用它设置 customerId.customer 时，完整的输出是

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<get_customer_request xmlns="example.com/tip/pro">
    <customer name="xy" id="1"/>
</get_customer_request> 
```

根据此信息，您的 JAXB 映射似乎希望该`customer`元素位于`example.com/tip/pro`命名空间中，并且您的请求文档应该是：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<m:get_customer_request xmlns:m="http://example.org/tip/pro">
  <m:customer id="0" name="help"/>
</m:get_customer_request> 
```

* * *

**第2部分**

> 在我的请求中将 m: 前缀添加到 customer 元素时，解析器抱怨他找到了 m:customer 和预期的客户。

这意味着您的 XML 模式与您的映射不匹配。如果您希望`customer`元素位于命名空间中，您可以将 XML 模式更改为以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<schema 
    xmlns:tip="http://example.org/tip" 
    xmlns="http://www.w3.org/2001/XMLSchema" 
    targetNamespace="http://example.org/tip/pro"
    elementFormDefault="qualified">

    ...

</schema> 
```

有关 JAXB 和命名空间的更多信息，请参阅：

*   [http://blog.bdoughan.com/2010/08/jaxb-namespaces.html](http://blog.bdoughan.com/2010/08/jaxb-namespaces.html)

# objective-c - -copyWithZone: 中的 -> 运算符在做什么？

> ID：12572999
> 
> 赞同：1
> 
> 时间：2012-09-24T21:12:21.553
> 
> 标签：objective-c, ios

> **可能重复：**
> [箭头运算符 (->) 在 C 中的使用](https://stackoverflow.com/questions/2575048/arrow-operator-usage-in-c)
> [点 (“.”) 运算符和箭头 (“->”) 运算符在 C 与 Objective-C 中的使用](https://stackoverflow.com/questions/9072688/dot-operator-and-arrow-operator-use-in-c-vs-objective-c)

我是一个新手，正在查看最后一次更新于 2008 年的免费软件/开源程序，但我无法识别`->`以下符号中的内容：

```
- (id)copyWithZone:(NSZone *)zone
{
  GFIPGeniusItem * newItem = [[[self class] allocWithZone:zone] init];
  newItem->_stringValue = [_stringValue copy];
  newItem->_imageURL = [_imageURL copy];
  newItem->_webResourceURL = [_webResourceURL copy];
  newItem->_speakableStringValue = [_speakableStringValue copy];
  newItem->_soundURL = [_soundURL copy];
  return newItem;
} 
```

我假设它允许某种捷径，但我很想具体说明它的作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T21:20:58.277

这是一种从对象外部直接访问 ObjC 对象内的实例变量的方法。（语法 and`->`是从 C 结构中借用的，表现得好像引用是一个指向结构的指针）。

这种访问机制在这一点上几乎是退化的，并且在现代 ObjC 代码中非常罕见，因为良好的封装需要使用访问器和属性，而不是直接接触实例变量。但是，在一些非常特殊的情况下它是合法的，这就是其中之一：

复制对象时，您希望获得与当前状态完全匹配的结果副本`self`。`init`实现这一点的最简洁方法通常是显式设置副本的 ivars，以防止重载或访问器可能导致的任何副作用。它是“安全的”，因为执行它的代码仍然位于有问题的类中，因此如果您需要更改或添加 ivars，您也可以使用可能需要的任何其他知识来更新此代码。

Doing this from outside the class in question is bad form, and there's no good reason to do it.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T21:16:24.223

那是一个指针间接运算符。与（其中是结构成员访问运算符，而不是 Objective-C 的属性点语法）的`a->b`含义相同。`(*a).b``.`

当你说：

```
newItem->_stringValue 
```

您正在直接访问`_stringValue`newItem 指向的对象的实例变量。

运算符在 C++中`->`很常见，但在 Objective-C 中并不常见。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T21:17:52.613

在 Objective C 中，就像在 C++ 中一样，p->m 表示法等价于 (*p).m，即解引用指向基类型的指针，然后调用相应的方法或属性。

因此，在您的情况下，使用另一种表示法，它看起来像这样：

```
(*newItem)._stringValue = [_stringValue copy]; 
```

（使用 -> 运算符更常见）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-24T21:19:08.147

在 Objective-C 中，您有某种两种变量类型的访问器。每个人都应该知道的是那个`"."`（例如Class.variable）。此类型调用适当的 getter 或 setter。

现在，另一种类型 - 您要求的类型 - 用于课堂使用。显然，当 getter 或 setter 使用`"."`符号自动调用时，您需要一种在没有 setter 的情况下设置变量的方法（在 setter 本身中调用 setter 会导致无限循环）。因此，`"->"`使用此表示法 -> 简单地说，它是直接访问模式。

通常，Objective-C 两种表示法的变量名是相同的，但有些人更喜欢类内表示法变量名以 . 开头`"_"`。这是通过将`@synthesize variable`行编辑为 来实现的`@synthesize variable = _variable`。