# StackOverflow 问答 16053000-16053999

# actionbarsherlock - 带有选项菜单的夏洛克操作栏中的空指针异常

> ID：16053008
> 
> 赞同：0
> 
> 时间：2013-04-17T06:24:50.870
> 
> 标签：actionbarsherlock, searchview

我想要带有默认夏洛克搜索小部件的夏洛克动作栏。搜索图标显示在夏洛克动作栏上，但点击它的强制关闭。我的 Logcat 如下所示

04-17 11:44:48.877：E/AndroidRuntime(530)：致命异常：主要 04-17 11:44:48.877：E/AndroidRuntime(530)：java.lang.NullPointerException 04-17 11:44:48.877： E/AndroidRuntime(530): 在 com.android.internal.view.menu.MenuItemImpl.toString(MenuItemImpl.java:490) 04-17 11:44:48.877: E/AndroidRuntime(530): 在 java.lang.StringBuilder .append(StringBuilder.java:202) 04-17 11:44:48.877: E/AndroidRuntime(530): 在 com.actionbarsherlock.app.SherlockFragmentActivity.onMenuItemSelected(SherlockFragmentActivity.java:201) 04-17 11:44:48.877 : E/AndroidRuntime(530): at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:950) 04-17 11:44:48.877: E/AndroidRuntime(530): at com.android。 internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735) 04-17 11:44:48.877: E/AndroidRuntime(530): at com.android.internal.view。menu.MenuItemImpl.invoke(MenuItemImpl.java:149) 04-17 11:44:48.877: E/AndroidRuntime(530): 在 com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874) 04 -17 11:44:48.877: E/AndroidRuntime(530): 在 com.android.internal.view.menu.ActionMenuView.invokeItem(ActionMenuView.java:490) 04-17 11:44:48.877: E/AndroidRuntime(530 ): 在 com.android.internal.view.menu.ActionMenuItemView.onClick(ActionMenuItemView.java:108) 04-17 11:44:48.877: E/AndroidRuntime(530): 在 android.view.View.performClick(View. java:3511) 04-17 11:44:48.877: E/AndroidRuntime(530): 在 android.view.View$PerformClick.run(View.java:14105) 04-17 11:44:48.877: E/AndroidRuntime( 530): 在 android.os.Handler.handleCallback(Handler.java:605) 04-17 11:44:48.877: E/AndroidRuntime(530): 在 android.os.Handler.dispatchMessage(Handler.java:92) 04 -17 11:44:48.877:E/AndroidRuntime(530): 在 android.os.Looper.loop(Looper.java:137) 04-17 11:44:48.877: E/AndroidRuntime(530): 在 android.app.ActivityThread.main(ActivityThread.java :4424) 04-17 11:44:48.877: E/AndroidRuntime(530): 在 java.lang.reflect.Method.invokeNative(Native Method) 04-17 11:44:48.877: E/AndroidRuntime(530): 在java.lang.reflect.Method.invoke(Method.java:511) 04-17 11:44:48.877: E/AndroidRuntime(530): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java :784) 04-17 11:44:48.877: E/AndroidRuntime(530): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 04-17 11:44:48.877: E/AndroidRuntime （530）：在 dalvik.system.NativeStart.main（本机方法）4424) 04-17 11:44:48.877: E/AndroidRuntime(530): 在 java.lang.reflect.Method.invokeNative(Native Method) 04-17 11:44:48.877: E/AndroidRuntime(530): 在 java .lang.reflect.Method.invoke(Method.java:511) 04-17 11:44:48.877: E/AndroidRuntime(530): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java: 784) 04-17 11:44:48.877: E/AndroidRuntime(530): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 04-17 11:44:48.877: E/AndroidRuntime( 530）：在 dalvik.system.NativeStart.main（本机方法）4424) 04-17 11:44:48.877: E/AndroidRuntime(530): 在 java.lang.reflect.Method.invokeNative(Native Method) 04-17 11:44:48.877: E/AndroidRuntime(530): 在 java .lang.reflect.Method.invoke(Method.java:511) 04-17 11:44:48.877: E/AndroidRuntime(530): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java: 784) 04-17 11:44:48.877: E/AndroidRuntime(530): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 04-17 11:44:48.877: E/AndroidRuntime( 530）：在 dalvik.system.NativeStart.main（本机方法）784) 04-17 11:44:48.877: E/AndroidRuntime(530): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 04-17 11:44:48.877: E/AndroidRuntime( 530）：在 dalvik.system.NativeStart.main（本机方法）784) 04-17 11:44:48.877: E/AndroidRuntime(530): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 04-17 11:44:48.877: E/AndroidRuntime( 530）：在 dalvik.system.NativeStart.main（本机方法）

菜单.xml

```
 <?xml version="1.0" encoding="utf-8"?>
  <menu xmlns:android="http://schemas.android.com/apk/res/android" >

  <item android:id="@+id/menu_search"
  android:actionViewClass="com.actionbarsherlock.widget.SearchView"
  android:icon="@android:drawable/ic_menu_search"
  android:showAsAction="always|collapseActionView"
   />
  </menu> 
```

夏洛克活动中的代码

```
 @Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    MenuInflater inflater = getSupportMenuInflater();
            inflater.inflate(R.menu.tvguide_menu, menu);
     }
  public boolean onOptionsItemSelected(MenuItem item) 
{
      Log.e("", "itemselected" +item.getItemId());
       switch(item.getItemId()) 
        {
            case R.id.menu_search:
                Toast.makeText(TVBuddyMainActivity.this,"search selected", Toast.LENGTH_LONG).show();
                Intent intent = new Intent(TVBuddyMainActivity.this,CustomSearch.class);
                startActivity(intent);
                break;
        }
     return true;
} 
```

请帮我处理这个 logcat....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:57:39.553

这是ActionBarSherlock 4.3.0版本中的一个bug，我是这样修复的：

```
--- a/actionbarsherlock/src/com/actionbarsherlock/app/SherlockFragmentActivity.java
+++ b/actionbarsherlock/src/com/actionbarsherlock/app/SherlockFragmentActivity.java
@@ -198,7 +198,7 @@ public class SherlockFragmentActivity extends Watson implements OnActionModeStar

     @Override
     public final boolean onMenuItemSelected(int featureId, android.view.MenuItem item) {
-        if (BuildConfig.DEBUG) Log.d(TAG, "[onMenuItemSelected] featureId: " + featureId + ", item: " + item);
+       // if (BuildConfig.DEBUG) Log.d(TAG, "[onMenuItemSelected] featureId: " + featureId + ", item: " + item);

         if (featureId == Window.FEATURE_OPTIONS_PANEL && !mIgnoreNativeSelected) {
             mIgnoreNativeSelected = true; 
```

# javascript - 向调用者返回一个承诺

> ID：16053010
> 
> 赞同：0
> 
> 时间：2013-04-17T06:25:02.570
> 
> 标签：javascript, jquery, promise

我有一个函数`HelloWorld`，没有向调用者返回任何承诺。我想知道是否可以调整此功能以返回承诺。

例如：

```
function HelloWorld() {
    // Do something here
    return;
} 
```

在我的应用程序的另一个功能中，我想做：

```
...
return HelloWorld()
        .then( ... do something else here ... ); 
```

如何继续让这个函数返回一个承诺？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:27:48.993

在`HelloWorld`：

```
 var dfr = $.Deferred();
  //some work with it
  return dfr.promise(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:28:03.630

```
function HelloWorld() {
  var deferred = $.Deferred();

  // demo
  setTimeout(deferred.resolve, 1000);

  // this is what you return:
  return deferred.promise();
} 
```

# postgresql - Heroku postgresql db在2个应用程序之间共享错误

> ID：16053012
> 
> 赞同：0
> 
> 时间：2013-04-17T06:25:11.140
> 
> 标签：postgresql, heroku, heroku-toolbelt

我无法在两个**heroku**`PostgreSQL`应用程序之间共享两个heroku 数据库。

 **## 不工作

到目前为止我尝试过的（我正在使用 Heroku CLI）：

```
$ heroku config:set DATABASE_URL=`heroku config:get DATABASE_URL -a my-heroku-app-original`
Setting config vars and restarting my-heroku-app... done, v20
DATABASE_URL: postgres://...correct url...

$ heroku config
=== msite-poniai Config Vars
DATABASE_URL:                 postgres://...correct url... 
```

当我尝试访问`psql`时，取决于我是否添加了新数据库，我得到了这两个答案（我在这两种情况下 heroku 都没有看到`DATABASE_URL`我刚刚提供的。

```
$ heroku pg:psql
 !    Your app has no databases.
$ heroku pg:psql
 !    Unknown database. Valid options are: HEROKU_POSTGRESQL_NEWLYADDED_URL 
```

## 作品

如果我向 psql 提供 db 的确切位置（在本例中是具有 db 作为附加组件的原始应用程序），它确实可以连接。

```
$ heroku pg:psql HEROKU_POSTGRESQL_ORIGINAL_URL --app my-heroku-app-original
psql (9.1.9) 
```

## 我读了

我密切关注在 Heroku和[heroku-postgresql#create-new-db 的](https://devcenter.heroku.com/articles/heroku-postgresql#create-new-db)[2 个应用程序之间共享数据库中](https://stackoverflow.com/questions/5981508/share-database-between-2-apps-in-heroku)给出的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:41:44.210

简单地将配置变量从一个应用程序复制到另一个应用程序不会将引用的数据库附加到应用程序。如果第一个更改主机或密码，您的第二个应用程序将被破坏。有一个**高度 alpha**插件，您可以尝试[https://github.com/heroku/heroku-attachable-resources](https://github.com/heroku/heroku-attachable-resources)但它会做一些奇怪的事情，例如不再为数据库提供默认名称，如果您不传入，则会覆盖 DATABASE_URL - -config 有时不允许您删除数据库。**

# php - 如何使用 php 将移动收件箱消息从移动设备获取到数据库？

> ID：16053014
> 
> 赞同：12
> 
> 时间：2013-04-17T06:25:17.000
> 
> 标签：php, mysql, mobile, sms

我想从移动收件箱中获取消息并存储在数据库中，以便在站点中进一步访问。[为此，我从诺基亚论坛](https://www.developer.nokia.com/Reso...nectivity_API/)进行了一些研发。

但它需要手机连接到电脑进行加载，并且需要通过电脑套件访问。

我不想通过电脑套件访问。因为不同的手机有不同的电脑套件，所以它不应该依赖于电脑套件。`PHP`没有PC套装连接有什么办法吗？

我知道AT命令可能有可能，我也经历了AT命令在网络中的用法。但我没有太多想法。所以我想在 PHP 的帮助下开发它。让我知道是否有任何解决方案可以做到这一点。并提出一些想法或参考，以便我可以参考以了解更多以关注这一点。

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-03T05:12:50.327

我很高兴看到这个问题，因为我对我的一个项目有类似的要求。我找到了一个解决方案，并且在过去一年半的时间里仍然可以完美运行。

我为此设计了一个架构图。

![架构图](https://i.stack.imgur.com/TdHbk.png)

这种架构需要一个移动应用程序以及一个 Web 应用程序。

您希望以这样一种方式开发您的移动应用程序，即当出现传入消息事件时，您的应用程序将向您的 Web 应用程序 API（一个 PHP 页面）生成一个 HTTP 请求。

您的应用程序生成的 HTTP 请求将是这样的

[http://www.myownhost.com/API/apipage.php?senderNumber=9876543210&&message=recievedMessage&&applicationID=1234](http://www.myownhost.com/API/apipage.php?senderNumber=9876543210&&message=recievedMessage&&applicationID=1234)

您的 API 代码将是这样的

**apipage.php**（此页面充当您的解决方案 API）

```
<?php
if ( isset( $_GET['senderNumber'] ) && isset( $_GET['recievedMessage'] ) && isset( $_GET['applicationID'] ) ) 
{
   $senderNumber = $_GET['senderNumber'];
   $message      = $_GET['recievedMessage'];
   $appId        = $_GET['applicationID'];

   /*

        Write your code to insert values in database.

   */

}

?> 
```

从移动设备生成 HTTP 请求是一项简单的任务，因为 HTTP 库/类已经在 J​​AVA 中可用。

我在 Android 中做了我的移动应用程序，但该应用程序仍然运行良好。

这种架构的优点是

1.  我们能够为不同的移动设备使用相同的 Web API，因为我们通过 HTTP 发送数据
2.  您将能够控制来自 API 的设备请求（阻止/允许/转发）
3.  易于实施

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-18T08:31:41.840

也许像硬件短信网关这样的设备会是你的解决方案。这是您购买的设备，放入移动运营商的 SIM 卡中，将其连接到 LAN。您可以使用 HTTP API（这是您的场景）或直接在设备的 Web 界面上发送和接收短信。

硬件短信网关是一种类似于带有内置 GSM 调制解调器的小型计算机的设备。它们通常在 Linux 上运行，具有内置数据库和 Web 服务器。

*   **优点：**可靠性（短信存储在设备的数据库中，通常有 GSM 调制解调器的故障转移机制）、可扩展性、集成的痛苦少。

*   **缺点：**钱。您必须一次性投资这种设备。

这种硬件短信网关的一个例子是[SMSEagle](http://www.smseagle.eu)。看看这是否适合你

*免责声明：我为 SMSEagle 工作*

# javascript - Underscore.string 与 RequireJS

> ID：16053016
> 
> 赞同：5
> 
> 时间：2013-04-17T06:25:32.010
> 
> 标签：javascript, requirejs, underscore.js

我正在尝试将[Underscore](http://underscorejs.org/)和[Underscore.string](https://github.com/epeli/underscore.string)与[RequireJS](http://requirejs.org/)一起使用。

内容`main.js`：

```
require.config({
    paths: {
        'underscore': '//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min',
        'underscore-string': '//cdnjs.cloudflare.com/ajax/libs/underscore.string/2.3.0/underscore.string.min',
    },
    shim: {
        'underscore': {
            exports: '_'
        },
        'underscore-string': {
            deps: ['underscore'],
            exports: '_s'
        },
    }
});

var modules = ['underscore-string'];

require(modules, function() {
    // --
}); 
```

浏览器看到`_`，但没有看到`_s`- 它是未定义的。

理想情况下，我希望 Underscore under`_`和 Underscore.string under `_.str`，但`_`也`_s`很好。我怎样才能做到这一点？

**版本：** RequireJS 2.1.5、Underscore 1.4.4、Underscore.string 2.3.0

**注意：**感谢[@jgillich](https://stackoverflow.com/users/941764/jgillich)，确保路径有两个斜杠（`//cdnjs.cloudfare.com/...`），否则浏览器会认为 URL 是相对于服务器的，Firebug 会抛出：

```
Error: Script error
http://requirejs.org/docs/errors.html#scripterror 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-18T13:29:08.387

我发现了错误。出于某种原因，RequireJS 不适用于 cdnjs.com 的[Underscore.string](http://cdnjs.com)版本，所以我将其替换为[Github 版本](https://github.com/epeli/underscore.string)。我想这与[提交 9df4736 有关](https://github.com/epeli/underscore.string/commit/9df4736b455c2462cfd2e444cbf08c3d08bc4c07)。

目前我的代码如下所示：

```
require.config({
    paths: {
        'underscore': '//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min',
        'underscore-string': '//raw.github.com/epeli/underscore.string/master/dist/underscore.string.min',
    },
    shim: {
        'underscore': {
            exports: '_'
        },
        'underscore-string': {
            deps: ['underscore'],
        },
    }
});

var modules = ['underscore', 'underscore-string'];

require(modules, function(_) {
    // --
}); 
```

Underscore.string 位于`_.str`.

**编辑：**截至 2013 年 7 月 16 日，CDNJS 版本已[更新为上游](https://github.com/cdnjs/cdnjs/pull/1521).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-25T06:57:54.327

在我明白我做错了什么之前与这个斗争了几个小时

这就是我做错的

您不应该重命名 main.js 中的文件 underscore.string

即使在我的库中我确实将路径中的文件重命名为“underscore.string”

这就是你的**main.js**应该是什么样子

```
require.config({
paths: {
    underscore: 'lib/underscore', 
    'underscore.string' : 'lib/_string' ,
},
shim: { 
    underscore: {
        exports: '_', 
        deps: [ 'jquery', 'jqueryui' ]
    }, 
    'underscore.string': { 
        deps: [ 'underscore' ]
    },
} 
.... 
```

然后你可以像我为我的 mixin 文件所做的那样在你的 shim中添加它作为**依赖项**

```
shim: { 
    mixin : {
        deps: [ 'jquery',  'underscore', 'underscore.string' , 'bootstrap'  ] 
    }, 
```

或者只是在您的不同页面中**定义它，例如**

```
/*global define */
define([    
    'underscore.string'
], function ( ) { 
```

它现在可以工作了，您可以通过 _.str 或 _.string 访问它

这就是**为什么**您应该这样做，而不是尝试将其命名为其他名称

在 underscore.string.js 的第 663 行

```
 // Register as a named module with AMD.
  if (typeof define === 'function' && define.amd)
    define('underscore.string', [], function(){ return _s; }); 
```

这意味着如果您定义“underscore.string”，它只会向 AMD 要求 JS 注册它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-18T19:46:09.943

这是一个使用 Requirejs“订单”插件的工作代码，还包括 Jquery，并且所有内容都加载而没有任何冲突：

```
requirejs.config({
    baseUrl: "assets",
    paths: {
        order: '//requirejs.org/docs/release/1.0.5/minified/order',
        jquery: 'http://code.jquery.com/jquery-2.1.0.min',
        underscore: '//underscorejs.org/underscore-min',
        underscorestring: '//raw.githubusercontent.com/epeli/underscore.string/master/dist/underscore.string.min',
        underscoremixed: 'js/underscore.mixed' // Create separate file 
    },
    shim: {
        underscore: { exports: '_' },
        underscorestring: { deps: ['underscore'] }
    }
});
require(['order!jquery','order!underscoremixed'], function($,_) {
    // test
    console.log( _.capitalize('capitalized text') );
}); 
```

在**js/underscore.mixed.js**中放入以下内容...

```
define(['underscore','underscorestring'], function() {
    _.mixin(_.str.exports());
    return _;
}); 
```

干杯! :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-10T01:43:37.873

仅当我`"underscore.string"`在 shim 中使用确切的模块名称时才适用于我。似乎与 underscore.string 本身中的硬编码名称有关

免除 underscore.string 源代码（使用 require 时执行此分支）：

```
 // Register as a named module with AMD.
  if (typeof define === 'function' && define.amd)
    define('underscore.string', [], function(){ return _s; }); 
```

所以对我来说，唯一的工作配置是：

```
require.config({
    paths: {
        'underscore': '//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min',
        'underscore.string': '//raw.github.com/epeli/underscore.string/master/dist/underscore.string.min',
    },
    shim: {
        'underscore': {
            exports: '_'
        },
        'underscore.string': {
            deps: ['underscore'],
        },
    }
});

var modules = ['underscore', 'underscore.string'];

require(modules, function(_) {
    // --
}); 
```

# android - 为 MultiUserChat 添加监听器 (aSmack)

> ID：16053019
> 
> 赞同：2
> 
> 时间：2013-04-17T06:25:38.720
> 
> 标签：android, xmpp, asmack, multiuserchat

我们如何初始化 MultiuserChat，这些是细节，要创建 MultiuserChat 类的对象，我们需要连接和房间名称作为参数 // 这是 MultiUserChat 的构造函数

```
 public MultiUserChat(Connection connection, String room) {
    this.connection = connection;
    this.room = room.toLowerCase();
    init();
} 
```

它仅适用于我们有房间的情况。如果我们在一个房间里。我的问题是，如果我们不在房间内，或者我们没有加入/创建任何房间，我们如何初始化 MultiUserChat 类。因为要添加诸如邀请拒绝和 addinvitationListener 之类的侦听器，我们需要 MultiUserChat 的对象。

```
eg. muc.addInvitationRejectionListener(new InvitationRejectionListener() {

            @Override
            public void invitationDeclined(String invitee, String reason) {
                Log.e("CHECK", "Invitation rejected, Inv- "+invitee+": Reas- "+reason);
                Toast.makeText(getApplicationContext()  , "Invtn REJECTED, invitee- "+invitee+" :reason-"+reason, 
                        Toast.LENGTH_LONG).show();

            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-06T07:46:10.997

你的假设是错误的。创建 MultiUserChat 实例不会使客户端自动加入或创建此 MUC。

所以只需创建实例并添加侦听器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-11-06T05:48:32.833

您不需要`MultiUserChat`获取邀请的对象。您可以使用以下代码。

```
MultiUserChat.addInvitationListener(conn3, new InvitationListener() {
public void invitationReceived(XMPPConnection conn, String room, String inviter,
String reason, String password) {

    // Reject the invitation

    MultiUserChat.decline(conn, room, inviter, "I'm busy right now");

    //Accept the invitation

    MultiUserChat muc=new MultiUserChat(conn,room);

    muc.join(testNickName,password);

} 
```

}

对于邀请拒绝侦听器，您需要一个`MultiUserChat`对象。

# memory - Appfog 实例与内存

> ID：16053026
> 
> 赞同：3
> 
> 时间：2013-04-17T06:26:01.210
> 
> 标签：memory, hardware, instances, appfog

我正在 Appfog 上开发一个 API，并且想知道要关注什么（一个实例的更多内存或更多内存较低的实例）。

如果每个实例获得 128 MB RAM，Appfog 会为您提供 2GB 的免费 RAM 和最多 16 个实例。

我的应用程序使用 PHP、MySql 和 Memcachier。我想尽快启动它，并想知道哪种配置最适合我的服务器。

更多 RAM 或实例有什么好处？

感谢您的帮助:)

最好的问候，约翰尼

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T17:26:28.630

您希望在不耗尽内存的情况下运行尽可能多的应用程序实例 :)。更多实例意味着更好的性能和正常运行时间。**但是**，如果一个实例内存不足，它将被关闭，让您的应用程序以更少的实例运行，直到它们全部崩溃。`af apps`您可以使用and`af logs <appname> --all`命令诊断此问题。如果应用程序定期以 < 100% 的速度运行，则实例内存预算可能太低。当有宕机实例时，logs 命令可能会显示达到内存限制错误。

**内存建议**

以下是一些内存建议： 安装了多个插件的 Wordpress 需要 > 512mb 才能稳定。对于精益定制 PHP 应用程序，128mb 通常就足够了，但应该注意。如果应用程序正在使用框架，请尝试 2​​56mb。这些内存限制可能看起来很高，但实际上是峰值内存使用量而不是平均使用量。

**负载测试**

[使用Seige](http://blog.remarkablelabs.com/2012/11/benchmarking-and-load-testing-with-siege)进行负载测试可以帮助找到内存/实例平衡。它通过确定您的应用程序是否超出内存限制达到峰值来做到这一点。将应用程序缩小到 1 个实例，并使用 5、10 和 15 个并发连接数逐渐增加 5，直到应用程序崩溃。如果应用程序确实停止了，请增加内存并重试。

# c - c程序交换值打印错误结果

> ID：16053036
> 
> 赞同：0
> 
> 时间：2013-04-17T06:26:42.213
> 
> 标签：c, function, integer, parameter-passing

嗨，我编写了 ac 程序，它读取 2 个值，然后交换它们并打印新值，但第二个值一直显示 0。例如，您输入 10 表示“a”，输入 8 表示“b”，那么 a 将为 8，但b 将为 0。有人知道解决此问题的解决方案吗？这是代码：

```
#include <stdio.h>

int getData()
{
    int a, b;

    printf("Enter first number: ");
    scanf("%d", &a);

    printf("Enter second number: ");
    scanf("%d", &b);

    return(a, b);
}

void swapValues(int a, int b)
{

    printf("The value of a is: %d", b);
    printf("\nThe value of b is: %d", a);

    return;
}

int main()
{

    int a, b = getData();
    swapValues(a, b);

    return(0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:43:08.563

```
return (a, b); 
```

没有做你认为它做的事情，这是对[逗号运算符](http://en.wikipedia.org/wiki/Comma_operator)的误用。

该表达式`op1, op2`同时计算两者`op1`，`op2`但为您提供 的值`op2`。所以它不会传回几个值（尽管像 Python 这样的一些语言可以做这种事情）。

相似地，

```
int a, b = getData(); 
```

不会获取从`getData()`. 相反，它将设置`a`为一个不确定的值，并`b`根据函数返回的单个值进行设置。

我会看这样的东西：

```
#include <stdio.h>

int getData (char *which) {
    int val;

    printf ("Enter value for %s: ", which);
    scanf("%d", &val);

    return val;
}

void swapValues (int a, int b) {
    printf("The swapped value of a is: %d\n", b);
    printf("The swapped value of b is: %d\n", a);
}

int main (void) {
    int a = getData ("a");
    int b = getData ("b");
    swapValues(a, b);

    return 0;
} 
```

您还应该记住，如果您*真的*想交换变量`a`并将`b`其反映回来`main`（而不是像它们已被交换一样打印它们），您需要将指针传递给它们并操作它们通过指针。

C 是一种按值传递的语言，这意味着对函数参数的更改通常不会反映给调用者。那会是这样的：

```
void swapValues (int *pa, int *pb) {
    int tmp = *pa;
    *pa = *pb;
    *pb = tmp;
}
:
swapValues (&a, &b);
// a and b are now swapped. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:37:42.463

您不能从 C 函数返回多个值。我什至不确定为什么该语句会`return(a, b)`编译。

如果您想从函数返回多个值，则应将它们放入数组或结构中。我将使用一个结构来演示一种正确执行此操作的方法。有很多方法可以做到这一点，但这种方法对您的代码的修改最少。

```
struct TwoNums{
    int a;
    int b;
};

TwoNums getData()
{
    /* This creates a new struct of type struct TwoNums */
    struct TwoNums nums;

    printf("Enter first number: ");
    scanf("%d", &(nums.a));

    printf("Enter second number: ");
    scanf("%d", &(nums.b));

    return(a, b);
}

void swapValues(int a, int b)
{

    printf("The value of a is: %d", b);
    printf("\nThe value of b is: %d", a);

    return;
}

int main()
{
    /* Get the whole structure in one call */
    struct TwoNums nums = getData();

    /* Call the swap function using fields of the structure */
    swapValues(nums.a, nums.b);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:39:30.907

首先，您不能在 C 中返回多个值。解决方法是返回一个结构或传递值地址。

```
void getData(int *a,int* b)
{
   //int a, b;

   printf("Enter first number: ");
   scanf("%d", a); // look here you passed the address of a to scanf
                    // by doing that scanf can write to a 

   printf("Enter second number: ");
   scanf("%d", b);

   //return(a, b);
  } 
```

老主线：

```
 int main()
  {

    int a, b = getData(); // b gets the return value from getData()
                          // but a is still uninitialized
    //to call the new function you have to do the following
    int a,b;
    getData(&a,&b);
    swapValues(a, b);

    return(0);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T06:40:18.647

不使用临时变量。所以试试这段代码

```
#include <stdio.h>

int swape()
   {
  int a,b;
  printf("Enter first number: ");
  scanf("%d", &a);

printf("Enter second number: ");
scanf("%d", &b);
a=a+b;
b=a-b;
a=a-b;

printf("The value of a is: %d", a);
printf("\nThe value of b is: %d", b);

}

int main()
{

swape();

return(0);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T06:48:47.070

你把整个事情不必要地复杂化了。一方面，像 return(a,b) 这样的东西在 C 中是荒谬的。此外，如果你打算交换，你为什么要传递 b 作为 printf() 的参数来打印'a'并将 a 传递给 'b' 的 printf() 吗？无论如何，这里有一个修改后的代码，可以保持简单并完成工作。

```
#include <stdio.h>

void swapValues()
{
    int a, b,tem;

    printf("Enter first number: ");
    scanf("%d", &a);

    printf("\nEnter second number: ");
    scanf("%d", &b);

    tem=a;
    a=b;
    b=tem;

    printf("\nThe value of a is: %d", a);
    printf("\nThe value of b is: %d", b);

        }

int main()
{

    swapValues();

    return(0);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-17T06:52:11.790

首先：

`getData()`函数写错了。C 中的函数不能返回**一个以上的参数。因此，您****可以**分开读取数据，或使用指针，如下所示：

 **```
void getData(int* a, int* b) {

    printf("Enter first number: ");
    scanf("%d", a);

    printf("Enter second number: ");
    scanf("%d", b);
} 
```

在`main()`

```
int a, b;
getData(&a, &b); 
```

第二：

`swapValues(int a, int b)` **不交换数据**。

更正确：

```
void swapValues(int* a, int* b) {
    int tmp = *a;
    *a = *b;
    *b = tmp;
} 
```**

# cuda - 在 Ubuntu 12.04 上使用 Qmake 的 CUDA

> ID：16053038
> 
> 赞同：1
> 
> 时间：2013-04-17T06:26:45.047
> 
> 标签：cuda, qmake

我正在尝试让 CUDA 代码在 Ubuntu 12.04 上与 Qt 一起使用

我的 cuda_interface.cu

```
// CUDA-C includes
#include <cuda.h>

extern "C"
void runCudaPart();

// Main cuda function

void runCudaPart() {

// all your cuda code here *smile*

} 
```

我的 main.cpp #include

```
extern "C"
void runCudaPart();

int main(int argc, char *argv[])
{
    runCudaPart();
} 
```

我的简历

```
#-------------------------------------------------
#
# Project created by QtCreator 2013-04-17T10:50:37
#
#-------------------------------------------------

QT       += core

QT       -= gui

TARGET = QtCuda
CONFIG   += console
CONFIG   -= app_bundle

TEMPLATE = app

SOURCES += main.cpp

# This makes the .cu files appear in your project
OTHER_FILES +=  ./cuda_interface.cu

# CUDA settings <-- may change depending on your system
CUDA_SOURCES += ./cuda_interface.cu
CUDA_SDK = "/usr/local/cuda-5.0/"   # Path to cuda SDK install
CUDA_DIR = "/usr/local/cuda-5.0/"            # Path to cuda toolkit install
SYSTEM_NAME = unix         # Depending on your system either 'Win32', 'x64', or 'Win64'
SYSTEM_TYPE = 32            # '32' or '64', depending on your system
CUDA_ARCH = sm_21           # Type of CUDA architecture, for example 'compute_10', 'compute_11', 'sm_10'
NVCC_OPTIONS = --use_fast_math

# include paths
INCLUDEPATH += $$CUDA_DIR/include

# library directories
QMAKE_LIBDIR += $$CUDA_DIR/lib/

CUDA_OBJECTS_DIR = ./

# The following library conflicts with something in Cuda
#QMAKE_LFLAGS_RELEASE = /NODEFAULTLIB:msvcrt.lib
#QMAKE_LFLAGS_DEBUG   = /NODEFAULTLIB:msvcrtd.lib

# Add the necessary libraries
CUDA_LIBS = libcuda libcudart
# The following makes sure all path names (which often include spaces) are put between quotation marks
CUDA_INC = $$join(INCLUDEPATH,'" -I"','-I"','"')
NVCC_LIBS = $$join(CUDA_LIBS,' -l','-l', '')
LIBS += $$join(CUDA_LIBS,'.so ', '', '.so')

# Configuration of the Cuda compiler
CONFIG(debug, debug|release) {
    # Debug mode
    cuda_d.input = CUDA_SOURCES
    cuda_d.output = $$CUDA_OBJECTS_DIR/${QMAKE_FILE_BASE}_cuda.o
    cuda_d.commands = $$CUDA_DIR/bin/nvcc -D_DEBUG $$NVCC_OPTIONS $$CUDA_INC $$NVCC_LIBS --machine $$SYSTEM_TYPE -arch=$$CUDA_ARCH -c -o ${QMAKE_FILE_OUT} ${QMAKE_FILE_NAME}
    cuda_d.dependency_type = TYPE_C
    QMAKE_EXTRA_COMPILERS += cuda_d
}
else {
    # Release mode
    cuda.input = CUDA_SOURCES
    cuda.output = $$CUDA_OBJECTS_DIR/${QMAKE_FILE_BASE}_cuda.o
    cuda.commands = $$CUDA_DIR/bin/nvcc $$NVCC_OPTIONS $$CUDA_INC $$NVCC_LIBS --machine $$SYSTEM_TYPE -arch=$$CUDA_ARCH -c -o ${QMAKE_FILE_OUT} ${QMAKE_FILE_NAME}
    cuda.dependency_type = TYPE_C
    QMAKE_EXTRA_COMPILERS += cuda
} 
```

我正在尝试从[Compiling Cuda code in Qt Creator on Windows](https://stackoverflow.com/questions/12266264/compiling-cuda-code-in-qt-creator-on-windows)中采用这个 .pro 文件， 这是一个类似的问题，但正在寻求 Windows 的解决方案。

目前编译器显示以下错误：

```
make: Entering directory `/home/swaroop/Work/ai-junkies/cuda/uc_davis/opencv2.x/QtCuda'
g++ -Wl,-O1 -o QtCuda cuda_interface_cuda.o main.o    -L/usr/local/cuda-5.0//lib/ -L/usr/lib/i386-linux-gnu libcuda.so libcudart.so -lQtCore -lpthread 
g++: error: libcuda.so: No such file or directory
g++: error: libcudart.so: No such file or directory
make: *** [QtCuda] Error 1 
```

请帮我解决这些问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T11:37:58.950

我终于可以在 Ubuntu 12.04 上使用 Qt Creator 运行 CUDA 代码了。我假设您可以在系统上独立运行 cuda。这是在 ubuntu 12.04 上设置 cuda 的绝佳指南 [http://sn0v.wordpress.com/2012/05/11/installing-cuda-on-ubuntu-12-04/](http://sn0v.wordpress.com/2012/05/11/installing-cuda-on-ubuntu-12-04/)

我从 Qt-Creator 开始了一个 Qt 控制台应用程序。这是我的 main.cpp

```
#include <QtCore/QCoreApplication>

extern "C"
void runCudaPart();

int main(int argc, char *argv[])
{
    runCudaPart();
} 
```

这是 cuda_interface.cu

```
// CUDA-C includes
#include <cuda.h>

#include <cuda_runtime.h>

    #include <stdio.h>

    extern "C"
//Adds two arrays
    void runCudaPart();

    __global__ void addAry( int * ary1, int * ary2 )
    {
    int indx = threadIdx.x;
    ary1[ indx ] += ary2[ indx ];
}

// Main cuda function

void runCudaPart() {

    int ary1[32];
    int ary2[32];
    int res[32];

    for( int i=0 ; i<32 ; i++ )
    {
        ary1[i] = i;
        ary2[i] = 2*i;
        res[i]=0;
    }

    int * d_ary1, *d_ary2;
    cudaMalloc((void**)&d_ary1, 32*sizeof(int));
    cudaMalloc((void**)&d_ary2, 32*sizeof(int));

    cudaMemcpy((void*)d_ary1, (void*)ary1, 32*sizeof(int), cudaMemcpyHostToDevice);
    cudaMemcpy((void*)d_ary2, (void*)ary2, 32*sizeof(int), cudaMemcpyHostToDevice);

    addAry<<<1,32>>>(d_ary1,d_ary2);

    cudaMemcpy((void*)res, (void*)d_ary1, 32*sizeof(int), cudaMemcpyDeviceToHost);
    for( int i=0 ; i<32 ; i++ )
        printf( "result[%d] = %d\n", i, res[i]);

    cudaFree(d_ary1);
    cudaFree(d_ary2);
} 
```

这是我的 .pro 文件。

```
#-------------------------------------------------
#
# Project created by QtCreator 2013-04-17T16:30:33
#
#-------------------------------------------------

QT       += core

QT       -= gui

TARGET = QtCuda
CONFIG   += console
CONFIG   -= app_bundle

TEMPLATE = app

SOURCES += main.cpp

# This makes the .cu files appear in your project
OTHER_FILES +=  ./cuda_interface.cu

# CUDA settings <-- may change depending on your system
CUDA_SOURCES += ./cuda_interface.cu
CUDA_SDK = "/usr/local/cuda-5.0/"   # Path to cuda SDK install
CUDA_DIR = "/usr/local/cuda-5.0/"            # Path to cuda toolkit install

# DO NOT EDIT BEYOND THIS UNLESS YOU KNOW WHAT YOU ARE DOING....

SYSTEM_NAME = unix         # Depending on your system either 'Win32', 'x64', or 'Win64'
SYSTEM_TYPE = 32            # '32' or '64', depending on your system
CUDA_ARCH = sm_21           # Type of CUDA architecture, for example 'compute_10', 'compute_11', 'sm_10'
NVCC_OPTIONS = --use_fast_math

# include paths
INCLUDEPATH += $$CUDA_DIR/include

# library directories
QMAKE_LIBDIR += $$CUDA_DIR/lib/

CUDA_OBJECTS_DIR = ./

# Add the necessary libraries
CUDA_LIBS = -lcuda -lcudart

# The following makes sure all path names (which often include spaces) are put between quotation marks
CUDA_INC = $$join(INCLUDEPATH,'" -I"','-I"','"')
#LIBS += $$join(CUDA_LIBS,'.so ', '', '.so')
LIBS += $$CUDA_LIBS

# Configuration of the Cuda compiler
CONFIG(debug, debug|release) {
    # Debug mode
    cuda_d.input = CUDA_SOURCES
    cuda_d.output = $$CUDA_OBJECTS_DIR/${QMAKE_FILE_BASE}_cuda.o
    cuda_d.commands = $$CUDA_DIR/bin/nvcc -D_DEBUG $$NVCC_OPTIONS $$CUDA_INC $$NVCC_LIBS --machine $$SYSTEM_TYPE -arch=$$CUDA_ARCH -c -o ${QMAKE_FILE_OUT} ${QMAKE_FILE_NAME}
    cuda_d.dependency_type = TYPE_C
    QMAKE_EXTRA_COMPILERS += cuda_d
}
else {
    # Release mode
    cuda.input = CUDA_SOURCES
    cuda.output = $$CUDA_OBJECTS_DIR/${QMAKE_FILE_BASE}_cuda.o
    cuda.commands = $$CUDA_DIR/bin/nvcc $$NVCC_OPTIONS $$CUDA_INC $$NVCC_LIBS --machine $$SYSTEM_TYPE -arch=$$CUDA_ARCH -c -o ${QMAKE_FILE_OUT} ${QMAKE_FILE_NAME}
    cuda.dependency_type = TYPE_C
    QMAKE_EXTRA_COMPILERS += cuda
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T08:12:03.783

`libcuda.so`并且在通话`libcudart.so`中错过了`-l`他们面前的旗帜。`g++`您有一个适当的连接命令来为 添加它们`NVCC`，因此对 使用相同的逻辑`g++`：

```
CUDA_LIBS = $$join(CUDA_LIBS,' -l','-l', '') 
LIBS += $$join(CUDA_LIBS,'.so ', '', '.so') 
```

或者只是更改为：

```
CUDA_LIBS = -llibcuda -llibcudart 
```

并摆脱`NVCC_LIBS`变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-07T00:46:24.770

我无法对 mkuse 的回答发表评论，但我想补充一点……

我不得不将 -L/usr/local/cuda-6.5/lib64 添加到 CUDA_LIBS：

```
# Add the necessary libraries
CUDA_LIBS = -lcuda -lcudart -L/usr/local/cuda-6.5/lib64 
```

否则，即使我可以独立运行 cuda，我也会收到错误“找不到 -lcudart”。以防万一。

编辑：我意识到这不是必需的，我只需要检查 QMAKE_LIBDIR 的路径，因为我有一个 64 位系统。

# ios - 在图像地图上书写或绘制文本

> ID：16053042
> 
> 赞同：0
> 
> 时间：2013-04-17T06:26:54.917
> 
> 标签：ios, objective-c, uiimage, imagemap

我创建了一个图像映射，其中包含 scrollview 内的 imageview ，如果在我的 imageview 中触摸特定部分，那么我想在该特定部分上绘制文本。

有没有图书馆？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:55:58.813

您可以通过首先获得触摸点来自己执行此操作，如下所示：

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *aTouch = [touches anyObject];
    CGPoint point = [aTouch locationInView:self];
    CGFloat xPos = point.x;
    CGFloat yPos = point.y;
} 
```

然后使用此信息并制作一个将 x 和 y 作为参数的方法。并以编程方式创建一个 UITextField。

```
UITextField * textFieldRounded = [[UITextField alloc] initWithFrame:CGRectMake(inParameterX, inParameterY, 300, 50)];
textFieldRounded.textColor = [UIColor blackColor];
textFieldRounded.font = [UIFont systemFontOfSize:17.0];
textFieldRounded.backgroundColor = [UIColor clearColor];
textFieldRounded.autocorrectionType = UITextAutocorrectionTypeNo;
textFieldRounded.keyboardType = UIKeyboardTypeDefault;
textFieldRounded.returnKeyType = UIReturnKeyDone;
textFieldRounded.clearButtonMode = UITextFieldViewModeWhileEditing; 
```

然后将其添加到您的视图中：

```
[self.view addSubview:textFieldRounded]; 
```

根据您要对文本字段执行的操作，您可以创建一个对象。并可能将其保存到数组中。好吧，你明白了。

# php - 在 PHP 中为嵌套的 n 级创建一个 json 查看器

> ID：16053043
> 
> 赞同：0
> 
> 时间：2013-04-17T06:26:59.627
> 
> 标签：php, json, api, viewer

我想为将 json 转换为表列表的 api 创建一个 json 查看器，有人可以指出我是如何完成的吗？我知道它可能，但我不知道该怎么做。

例如

```
{"name":diana,
"age":12,
"gender":"male"}

to:

<table>
  <tr>
   <td>name:</td><td>diana</td>
  </tr>
  <tr>
   <td>age:</td><td>12</td>
  </tr>
  <tr>
   <td>gender:</td><td>male</td>
  </tr>
</table> 
```

如果有不清楚的地方请告诉我:) 我忘了提到我将为嵌套的 json 工作。毫米

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T06:29:47.583

用于[`json_decode`](http://php.net/json_decode)解析 json，然后遍历结果...

```
echo "<table>\n";
$data = json_decode($json, true);
foreach($data as $key=>$value) echo "<tr><td>{$key}:</td><td>{$value}</td></tr>\n";
echo "</table>\n"; 
```

请注意，这仅适用于您在示例中给出的“简单” json 对象......如果有多层嵌套，这还不够。您将必须检查类型`$value`并决定如何在任何嵌套级别打印它...

另请注意，该 json 字符串也可以根本不是对象。它也可以是原始类型。

最终，您要么拥有一个多维数组，要么拥有一个对象（如果您从`json_decode`调用中省略第二个参数）。从那时起，“目标”从**pretty-print a json object**变为**pretty-print a php variable**。有很多解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T06:30:05.180

试试这个代码

```
 $arr = json_decode($jsonstring);

<table>
<?php foreach($arr as $key=>$val){ ?>
  <tr>
   <td><?php echo $key?>:</td><td><?php echo $val;?></td>
  </tr>
<?php }?>

<table> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T06:29:34.437

这是非常简单的方法。

```
$str = '{"name":"diana",
"age":12,
"gender":"male"}';
$str = json_decode($str, TRUE);

echo '
<table>
  <tr>
   <td>name:</td><td>'.$str['name'].'</td>
  </tr>
  <tr>
   <td>age:</td><td>'.$str['age'].'</td>
  </tr>
  <tr>
   <td>gender:</td><td>'.$str['gender'].'</td>
  </tr>
<table>'; 
```

[Json_decode](http://php.net/manual/en/function.json-decode.php)将您的 JSON 数组转换为 php 数组，并将第二个参数设置为 TRUE 它的关联。大批。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T06:32:03.217

看看[这个](https://github.com/afshinm/Json-to-HTML-Table)。希望它会有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T06:43:10.493

试试这个...

```
$str = '{ "name": "diana",
"age": 12,
"gender": "male"}';
$dstr = json_decode($str);

echo '
<table>
  <tr>
   <td>name:</td><td>'.$dstr->name.'</td>
  </tr>
  <tr>
   <td>age:</td><td>'.$dstr->age.'</td>
  </tr>
  <tr>
   <td>gender:</td><td>'.$dstr->gender.'</td>
  </tr>
<table>'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T04:34:19.553

这是我的完整代码（工作）——感谢@poncha

```
<style type="text/css">
    table{border-collapse: collapse;}
    td{border:1px solid #aaa;}
    .array{border-right:0px;}
</style>

<?php
$json_raw = '{
    "glossary": {
        "title": "example glossary",
        "GlossDiv": {
            "title": "S",
            "GlossList": {
                "GlossEntry": {
                    "ID": "SGML",
                    "SortAs": "SGML",
                    "GlossTerm": "Standard Generalized Markup Language",
                    "Acronym": "SGML",
                    "Abbrev": "ISO 8879:1986",
                    "GlossDef": {
                        "para": "A meta-markup language, used to create markup languages such as DocBook.",
                        "GlossSeeAlso": ["GML", "XML"]
                    },
                    "GlossSee": "markup"
                }
            }
        }
    }
}';

function JSON_to_HTML($json){
    echo "<table>";
    foreach($json as $key=>$value){
        if($value):
            if(is_array($value)):
                echo "<tr><td class='array'>{$key}:</td><td>";
                JSON_to_HTML($value);
                echo "</td></tr>";
            else:
                if(preg_match('/.png|.gif|.jpg.|jpeg/', $value)):
                    echo "<tr><td>{$key}:</td><td class='italic'>{$value}</td></tr>";   
                else:
                    echo "<tr><td>{$key}:</td><td>{$value}</td></tr>";  
                endif;
            endif;  
        else:
            echo "<tr><td class='field-grey'>{$key}:</td><td class='field-empty'><span class='null'>null</span></td></tr>";
        endif;
    }
    echo "</table>";
}

echo "<table class='outer'>";
$data = json_decode($json_raw, true);
foreach($data as $key=>$value){
    if($value):
        if(is_array($value)):
            echo "<tr><td class='array'>{$key}:</td><td>";
            JSON_to_HTML($value);
            echo "</td></tr>";
        else: echo "<tr><td>{$key}:</td><td>{$value}</td></tr>";        
        endif;
    else: echo "<tr><td>{$key}:</td><td class='field-empty'><span class='null'>null</span></td></tr>"; endif;
} 
echo "</table>";
?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-06T15:15:09.523

```
$s = '{"access": {"token": {"issued_at": "2008-08-16T14:10:31.309353", "expires": "2008-08-17T14:10:31Z", "id": "MIICQgYJKoZIhvcNAQcCoIICMzCC"}, "serviceCatalog": [], "user": {"username": "ajay", "roles_links": [], "id": "96d10efe549", "roles": [], "name": "ajay"}}}';

$crl = 0;
$ss = false;
echo "<pre>";
for($c=0; $c<strlen($s); $c++)
{
    if ( $s[$c] == '}' || $s[$c] == ']' )
    {
        $crl--;
        echo "\n";
        echo str_repeat(' ', ($crl*2));
    }
    if ( $s[$c] == '"' && ($s[$c-1] == ',' || $s[$c-2] == ',') )
    {
        echo "\n";
        echo str_repeat(' ', ($crl*2));
    }
    if ( $s[$c] == '"' && !$ss )
    {
        if ( $s[$c-1] == ':' || $s[$c-2] == ':' )
            echo '<span style="color:#0000ff;">';
        else
            echo '<span style="color:#ff0000;">';
    }
    echo $s[$c];
    if ( $s[$c] == '"' && $ss )
        echo '</span>';
    if ( $s[$c] == '"' )
          $ss = !$ss;
    if ( $s[$c] == '{' || $s[$c] == '[' )
    {
        $crl++;
        echo "\n";
        echo str_repeat(' ', ($crl*2));
    }
}
echo $s[$c]; 
```

# quickbooks - 如何使用 qbXML 将其他数据添加到 Quickbook

> ID：16053044
> 
> 赞同：3
> 
> 时间：2013-04-17T06:27:02.650
> 
> 标签：quickbooks, qbxml

我试试这段代码，它可以工作。（现在，我可以添加名称：TestCustomer3）并且我想将其他数据添加到 Quickbook。你能帮我了解一下 qbXML 语言吗？

示例：我想添加“公司名称”、“全名”、“收款方”

***示例代码***

```
string input =   @"<?xml version=""1.0"" encoding=""utf-8""?>
                      <?qbxml version=""2.0""?>
                    <QBXML>
                    <QBXMLMsgsRq onError=""stopOnError"">
                    <CustomerAddRq requestID=""15"">
                    <CustomerAdd>
                    <Name>TestCustomer3</Name> <!-- required -->
                    </CustomerAdd>
                    </CustomerAddRq>
                    </QBXMLMsgsRq>
                    </QBXML>"; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T21:27:15.677

在 QuickBooks OSR 中找到此信息的适当位置：

*   [https://developer-static.intuit.com/qbSDK-current/Common/newOSR/index.html](https://developer-static.intuit.com/qbSDK-current/Common/newOSR/index.html)

要使用 un - *Intuit* -ive QuickBooks OSR（双关语），您应该：

*   使用屏幕顶部的“选择消息”下拉框选择命令/请求类型
*   单击“XML Ops”选项卡以查看 XML 请求和响应

请注意，XML 请求/响应会有些混乱，因此请务必仔细查看 XML 以确定请求在哪里结束，以及响应从哪里开始。

我们的 QuickBooks 集成 wiki 上还有一些其他[QuickBooks qbXML 示例。](http://www.consolibyte.com/docs/index.php/Example_qbXML_Requests)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T14:00:27.753

可以通过查看 QBXML 的屏幕参考来找到该信息
[https://developer-static.intuit.com/qbSDK-current/Common/newOSR/index.html](https://developer-static.intuit.com/qbSDK-current/Common/newOSR/index.html)

谢谢

# c# - SplistItem.Delete() 方法在删除时停止

> ID：16053045
> 
> 赞同：0
> 
> 时间：2013-04-17T06:27:10.737
> 
> 标签：c#, sharepoint, sharepoint-2007, duplicate-removal, splistitem

我创建了一个用于删除重复 SPListItem 的应用程序。该列表有数千条重复记录。删除项目时（例如，大约在删除 1000 条记录后）。应用程序完成删除过程并显示成功完成的消息。我正在附加我的代码片段以删除项目。

```
spFormIDCollection = spHistoryList.GetItems(query);
                            if (spFormIDCollection != null && spFormIDCollection.Count > 0)
                                for (int i = 0; i < spFormIDCollection.Count - 1; i++)
                                {
                                    SPListItem listItem = spFormIDCollection[i];
                                    if (listItem != null)
                                        if (Convert.ToString(listItem[Common.NotificationDate]).Equals(Convert.ToString(spFormIDCollection[i + 1][Common.NotificationDate])))
                                            listItem.Delete();

                                } 
```

我不知道我的代码出了什么问题。能否请您解释一下，如果有任何不正确的代码。提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T09:43:32.203

你应该改变你的for循环

```
for (int i = spFormIDCollection.Count - 1; i > -1; i--) 
```

删除项目时，collection.Count 减少，您的循环将提前完成。

# perl - 在 bash 中运行脚本

> ID：16053046
> 
> 赞同：0
> 
> 时间：2013-04-17T06:27:28.653
> 
> 标签：perl, bash, shell

我的一个应用程序文件夹中有一个脚本。通常我只是`cd`进入 Unix 框中的那个位置并运行脚本，例如

`UNIX> cd My\Folder\`

`My\Folder> MyScript`

这将打印所需的结果。

我不确定如何在 Bash 脚本中执行此操作。我已完成以下操作

```
#!/bin/bash
mydir=My\Folder\
cd $mydir
echo $(pwd) 
```

这基本上使我在正确的文件夹中运行所需的脚本。但我不确定如何在代码中运行脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:33:40.503

如果您可以调用`MyScript`（而不是`./MyScript`），显然当前目录（“.”）是您的 PATH 的一部分。（顺便说一句，这不是一个好主意。）

这意味着您可以`MyScript`像这样调用脚本：

```
#!/bin/bash
mydir=My/Folder/
cd $mydir
echo $(pwd)
MyScript 
```

正如我所说，`./MyScript`会更好（不是模棱两可）。请参阅 Michael Wild 关于目录分隔符的评论。

一般来说，Bash 将无法解析为内置关键字（如 、 等）的所有内容`if`视为`while`对`do`位于 PATH 中某处的可执行文件或脚本 (*) 的调用。它将依次检查 PATH 中的每个目录以查找所谓的可执行文件/脚本，并执行它找到的第一个（可能是也可能不是`MyScript`您打算运行的）。这就是为什么指定您的意思是此目录中的非常`MyScript`( **)**是`./`更好的选择。

(*)：当然，除非定义了该名称的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T06:44:03.513

```
#!/bin/bash
mydir=My/Folder/
cd $mydir
echo $(pwd)
MyScript 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T06:38:51.790

你的昵称说明了一切;-)

当在提示符处输入不包含 a 的命令时`/`，Bash 首先检查它是别名还是函数。然后它检查它是否是一个内置命令，然后才开始在`PATH`. 这是一个 shell 变量，其中包含用于搜索命令的目录列表。`.`在您的情况下（即当前目录）似乎在中`PATH`，这通常被认为是一个非常糟糕的主意。

如果命令包含 a `/`，则不执行在 中的查找`PATH`。相反，需要完全匹配。如果以 a 开头，`/`则为绝对路径，并且该文件必须存在。否则它是一个相对路径，并且该文件必须相对于当前工作目录存在。

因此，您有两个可接受的选择：

1.  将您的脚本放在您的`PATH`. 或者，将包含脚本的目录添加到`PATH`变量中。

2.  使用绝对或相对路径来调用您的脚本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T06:37:06.070

我宁愿把名字放在引号里。这使得阅读和保存以防止错误更容易。

```
#!/bin/bash
mydir="My Folder"
cd "$mydir"
echo $(pwd)
./MyScript 
```

# mysql - 如何进行选择直到找到1个结果然后存在于mysql中

> ID：16053049
> 
> 赞同：0
> 
> 时间：2013-04-17T06:27:39.240
> 
> 标签：mysql, sql

有没有办法进行选择查询，在表格中搜索给定的单词，如果找到，则退出查询并且不继续计数？

例如我有一个表（t1）有值：

```
id         tag   tagdate
1         my     1-1-2012
2         name   1-1-2012
3         you    1-1-2012
4         foo    1-1-2012
5         make   1-1-2012
6         ir     1-1-2013
7         too    1-1-2013
..        ..     ........
..        ..     ........
..        ..     ........
100000    foo    1-1-2013 
```

例如，我将进行查询以确保 'foo' 单词是否存在，如果存在则返回 1 并停止继续查询。

我现在进行的查询是一个计数，以确保该单词是否存在于表中：

```
select count(tag) from t1 where tag = 'foo' 
```

但是该 Sql 语句在所有表中搜索单词 'foo' 并返回其在表中的计数，如果表中有 100,000 条记录，则查询将在所有 100,000 条记录中搜索 'foo' 单词。当我们只想知道'foo'是否存在于桌子上时，这会浪费时间。

那么是否有任何语句可以在表格中搜索单词并找到单词然后停止读取表格并返回 1 或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:55:18.663

我会这样做：

```
SELECT EXISTS(SELECT NULL FROM t1 WHERE tag = 'foo') 
```

如果标签 foo 不存在，这将返回 0 (FALSE)，否则返回 1 (TRUE)。在列上使用索引`tag`将避免全表扫描：

```
CREATE INDEX idx_tag ON t1 (tag); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:42:39.453

您可以尝试索引以避免全表扫描。

[http://dev.mysql.com/doc/refman/5.5/en/optimization-indexes.html](http://dev.mysql.com/doc/refman/5.5/en/optimization-indexes.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:29:29.270

也许是这样的：

```
SELECT IFNULL(SIGN(id), 0) FROM t1 WHERE tag = 'foo'
LIMIT 1 
```

# objective-c - 此代码中如何使用位运算符？

> ID：16053052
> 
> 赞同：0
> 
> 时间：2013-04-17T06:27:42.953
> 
> 标签：objective-c, bitwise-operators

我正在查看[PSPDFkit](http://pspdfkit.com/)示例代码并看到了这个：

```
NSDictionary *options = @{kPSPDFProcessorAnnotationTypes :
                               @(PSPDFAnnotationTypeNone & ~PSPDFAnnotationTypeLink)
                         }; 
```

常量`PSPDFAnnotationTypeNone`和`PSPDFAnnotationTypeLink`定义如下：

```
// Available keys for options. kPSPDFProcessorAnnotationDict in
// form of pageIndex -> annotations.
// ..
extern NSString *const kPSPDFProcessorAnnotationTypes;

// Annotations defined after the PDF standard.
typedef NS_OPTIONS(NSUInteger, PSPDFAnnotationType) {
    PSPDFAnnotationTypeNone      = 0,
    PSPDFAnnotationTypeLink      = 1 << 1,  // Links and multimedia extensions
    PSPDFAnnotationTypeHighlight = 1 << 2,  // (Highlight, Underline, StrikeOut) - 
    PSPDFAnnotationTypeText      = 1 << 3,  // FreeText
    PSPDFAnnotationTypeInk       = 1 << 4,
    PSPDFAnnotationTypeShape     = 1 << 5,  // Square, Circle
    PSPDFAnnotationTypeLine      = 1 << 6,
    PSPDFAnnotationTypeNote      = 1 << 7,
    PSPDFAnnotationTypeStamp     = 1 << 8,
    PSPDFAnnotationTypeRichMedia = 1 << 10, // Embedded PDF videos
    PSPDFAnnotationTypeScreen    = 1 << 11, // Embedded PDF videos
    PSPDFAnnotationTypeUndefined = 1 << 31, // any annotation whose type not recognized
    PSPDFAnnotationTypeAll       = UINT_MAX
}; 
```

我知道这`~`是按位非运算符和`&`按位与运算符，但是它们在此代码中的应用目的是什么？

```
NSDictionary *options = @{kPSPDFProcessorAnnotationTypes :
                               @(PSPDFAnnotationTypeNone & ~PSPDFAnnotationTypeLink)
                         }; 
```

根据下面的评论，上面可以简单地写成

```
NSDictionary *options = @{kPSPDFProcessorAnnotationTypes :@(PSPDFAnnotationTypeNone)}; 
```

既然是一样的`(0 & ~2) => 0`。添加`& ~PSPDFAnnotationTypeLink`零件有什么意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:30:05.517

"~" 是按位**非**运算符。

作为“&”按位**和**。

这些通常用于位掩码（如您的示例中）或其他二进制操作（顾名思义）。[有关wiki - C 和 C++ 中的运算符的](http://en.wikipedia.org/wiki/Operators_in_C_and_C++#Bitwise_operators)更多信息。

它们与文字没有关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:32:09.367

首先，我不知道 obj-c，只知道 C，但我猜 '&' 是 'bitwise AND' 而 '~' 是 bitwise NOT。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:32:31.663

它是按位 NOT 运算符（与许多基于 C 的语言相同），它将基础值中的所有位反转。

因此，例如，八位值`0x57`（二进制`0101 0111`）变为`1010 1000`or `0xa8`。

有关各种位运算符的更完整描述，请参见[此处。](https://stackoverflow.com/questions/1746613/bitwise-operation-and-usage/1746642#1746642)

# opencv - Opencv：SIFT实现中的运行时错误

> ID：16053056
> 
> 赞同：2
> 
> 时间：2013-04-17T06:27:54.023
> 
> 标签：opencv, implementation, sift

我是 Opencv2.3 的入门级程序员，我在玩互联网上可用的代码和各种有用的资源。[Stack User User:Froyo](https://stackoverflow.com/users/891373/froyo)在他的网站[上](http://jayrambhia.wordpress.com/2012/09/24/sift-based-tracker/)有一段代码。当我尝试执行代码时，只要我在感兴趣的区域周围拖动并绘制一个边界框，程序就会退出。运行时错误是

```
Unhandled exception at 0x7509c41f (KernelBase.dll) in SIFT_Track.exe: Microsoft C++ exception: cv::Exception at memory location 0x0036f144..
Bad argument: <img is empty or has an incorrect type) in unknown function , file c:\Users\vp\work\ocv\opencv\modules\features2d\src\sift.cpp line 1681
Opencv Error: Assertion failed <0< =roi.x && <roi.width && roi.x+roi.width etc...c:\Users\vp\work\ocv\opencv\modules\core\src\matrix.cpp line 303 
```

源代码可在[github](https://github.com/jayrambhia/Vision/blob/master/OpenCV/C++/sift_tracker.cpp)下载。有人可以帮助解决什么是错误，以便程序可以在我结束时运行。我不知道似乎是什么问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:33:31.127

鼠标按钮向上后是否出现错误？

您可以仅通过输出point1和point2的位置来检查是否正确选择了ROI？

```
std::cout << "point1" << point1 << std::endl; 
```

只是在 main() 函数中吼叫鼠标回调函数？

我目前无法测试代码。为了理解原理和使用 OpenCV 进行跟踪功能，我建议你从 2D 图像开始。请参考[Features2D + Homography 找到已知对象](http://docs.opencv.org/doc/tutorials/features2d/feature_homography/feature_homography.html#feature-homography)

我测试了代码。问题是：当 ROI 的值大于网络摄像头的分辨率时，新位置的 ROI 可能会导致错误。所以我修改了 newPoint() 函数如下，它可以正常工作

```
void newPoints(vector<double> diff, Point cen, double rad)
{
printf("rad = %lf\tcen=(%d, %d)\n",rad, cen.x, cen.y);
printf("%f %f %f %f\n",diff[0], diff[1], diff[2], diff[3]);
point1.x = cen.x - rad - diff[0] >= 0 ? cen.x - rad - diff[0]:0;
point1.x = cen.x - rad - diff[0] <= img.cols ? cen.x - rad - diff[0]:img.cols;

point1.y = cen.y - rad - diff[1] >= 0 ? cen.y - rad - diff[1]:0;
point1.y = cen.y - rad - diff[1] <= img.rows ? cen.y - rad - diff[1]:img.rows;

point2.x = cen.x + rad + diff[2] >= 0 ? cen.x + rad + diff[2]:0;
point2.x = cen.x + rad + diff[2] <= img.cols ? cen.x + rad + diff[2]:img.cols;

point2.y = cen.y + rad + diff[3] >= 0 ? cen.y + rad + diff[3]:0;
point2.y = cen.y + rad + diff[3] <= img.rows ? cen.y + rad + diff[3]:img.rows;

printf("(%d, %d), (%d, %d)\n", point1.x, point1.y, point2.x, point2.y);
} 
```

# powershell - Powershell监控磁盘使用情况——脚本查询的性能

> ID：16053059
> 
> 赞同：0
> 
> 时间：2013-04-17T06:28:06.390
> 
> 标签：powershell, size, disk

我正在开发以下 powershell 来报告我的磁盘使用情况，并让我知道哪些文件夹的大小正在发生变化等。

```
Get-ChildItem -Path "C:\" | 
Select-Object Name,
    @{ 
        Name="Size";
        Expression=
            { 
                [Math]::Round(
                    ((($_ | Get-ChildItem -Recurse | Measure-Object -Sum Length).Sum + 0) / 1GB)
                    , 2)
            }
    } 
```

这个脚本真的很慢......为什么？

Measure-object 每次查看文件夹时都会评估大小吗？

有什么更好的方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:35:30.717

You are listing each file system object on C drive and measuring its size, that can take very long time to complete. Two alternatives (there are more):

```
(Get-PSDrive c).Used/1gb

- and -

$cDrive = (New-Object -ComObject Scripting.FileSystemObject).GetDrive('C')
$used = ($cDrive.TotalSize-$cDrive.FreeSpace)/1gb
$used.ToString('N2') 
```

# event-handling - 在jQuery中设置点击事件的事件处理程序的执行顺序？

> ID：16053067
> 
> 赞同：1
> 
> 时间：2013-04-17T06:28:43.540
> 
> 标签：event-handling, handler, jquery

我正在使用 jQuery 1.9.1。

假设我有一个 id="clickMe" 的按钮，我的 jQuery 代码是：

```
$('#clickMe').click(function(event)
{
    eventHandler1();//do something
    eventHandler2();//use output from eventHandler1() and do something
} 
```

现在，我希望最后执行“eventHandler2”，以便我可以使用“eventHandler1”的输出。有什么方法可以手动执行此操作，而不仅仅是我将处理程序放入 click 事件中的方式？还有一件事，“eventHandler1()”和“eventHandler2()”存在于不同的.js文件中，因此需要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T06:39:07.610

### [`jQuery.when()`](http://api.jquery.com/jQuery.when/)提供了一种基于一个或多个对象（通常是表示异步事件的延迟对象）执行回调函数的方法。

例如，当 Deferred 是`jQuery.ajax()`请求时，参数将是请求的参数`jqXHR objects`，按照它们在参数列表中给出的顺序。

```
$.when(eventHandler1).then(eventHandler2).done(function(){
 alert('done.');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T06:31:46.830

所以甚至可以使用`GLOBAL`变量来存储`eventHandler1`输出并在里面访问它`eventHandler2`

**例子**

```
var someVar;

function eventHandler1()
{
   // process
   someVar = some value from process
   return someVar;
}

function eventHandler2()
{
   alert(someVar);
} 
```

**对 OP 评论的回应**

正如您询问队列中的执行处理程序一样，您可以使用`Jai`答案。

你可以使用`.when` `.then`和`.done`如下。

```
$.when(eventHandler1).then(eventHandler2).done(function(){
  //process code
}); 
```

# php - php包含来自查询字符串的变量文件

> ID：16053068
> 
> 赞同：0
> 
> 时间：2013-04-17T06:28:46.473
> 
> 标签：php, file, variables, include

包含从查询字符串中获取文件夹和文件名的文件的最佳方法是什么？

在**myServer.com/data**中有数百个文件夹，每个文件夹中有几个文件。这些是纯 html 文件。

在**myServer.com/code**中是一个 php **targetPage.php**

我可以像这样构建一个 URL：

```
http://www.myServer.com/code/targetPage.php?folder=folder132&name=file23 
```

读取源文件夹中的源文件并将源“div”的内容包含为目标页面中“targetDiv”的 innerHTML 的 php 是什么？

```
<body><div id="targetDiv">This is the place holde div</div> 
```

我对php相当陌生，因此提出了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:34:36.637

这基本上是对潜在黑客的邀请，他们无疑会感谢您让他们能够轻松地指定在您的 PHP 页面中包含（并因此执行）哪些文件。

乍一看，这至少与导致 SQL 注入攻击的问题有相似之处。您确定要从查询字符串中获取包含文件的路径吗？查询字符串向最终用户公开。我看到的一个问题是，这往往会将您网站的内部结构暴露给访问者。另一个问题是，作为访问者，我将能够尝试不同的包含文件，直到我大概找到一个以某种方式（最好）或（最坏）损害您的安全并为我提供更大访问权限的站点到您的服务器或数据库，然后让我深入研究您的系统，直到我完全破坏它，或者能够删除或更新您不希望我删除的数据库中的内容。通过“我”和“我”，

我会探索寻找一种不同的（服务器端，不暴露给访问者）方法来确定要包含的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T06:37:04.383

首先，**绝对确保**包含的文件是允许的，最好使用[白名单](http://en.wikipedia.org/wiki/Whitelist)。

然后，您可以使用类似的函数[`file_get_contents()`](http://www.php.net/manual/en/function.file-get-contents.php)将文件读入字符串并使用`echo`.

总结（这是一种方法，存在其他方法）：

```
$file = $_GET['folder']."/".$_GET['file'];

if (in_array($file, $whitelist)) {
    $contents = file_get_contents($file);
} else {
    $contents = "Not allowed";
}

echo "<body><div id='targetDiv'>$contents</div>" 
```

例如，您可以通过扫描您希望能够显示的目录来生成白名单。（这超出了这个答案的范围;-)）。

另一种解决方案可能是检查规范的结果路径[`realpath()`](http://www.php.net/manual/en/function.realpath.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T07:06:47.723

如果文件夹应该只是一个没有目录分隔符的名称，您可以使用[`basename()`](http://php.net/basename)从文件夹和名称中剥离分隔符。该文件夹需要特殊处理，因为`..`在技术上是有效的，但您不希望允许超出基本目录。

```
if (isset($_GET['folder'], $_GET['name'])) {
    $folder = trim(basename($_GET['folder']), '.') ?: '.';
    $name = basename($_GET['name']);

    $file = BASE_DIR . "/$folder/$name";
    if (is_file($file) && is_readable($file)) {
        echo file_get_contents($file);
    }
} 
```

*`BASE_DIR`将是一个常量，包含从中加载文件的基本目录。*

# android - 未找到属性 textIsSelectable 的资源标识符重复发生

> ID：16053070
> 
> 赞同：3
> 
> 时间：2013-04-17T06:28:49.010
> 
> 标签：android, eclipse

我使用带有最新 Android SDK 的 Eclipse 4.3.0。我有一个看起来像这样的文本视图：

```
<TextView
    android:id="@+id/list_title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:onClick="onSave"
    android:textIsSelectable="false"
    android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

我手动添加了**android:textIsSelectable="false"**行，因为 lint 给了我一个警告，我讨厌有警告。警告消失。但是，一旦我在布局中编辑某些内容，就会出现一条错误消息：

**错误：在包“android”中找不到属性“textIsSelectable”的资源标识符**

我必须转到文件，删除该行，错误消失并返回警告。然后我再次重新插入该行，错误和警告消失了，直到下次我必须编辑一些东西。

这个属性也没有出现在编辑器屏幕的任何地方，所以也许这就是原因，但是，我怎样才能永久摆脱这个错误循环呢？或者这是 SDK 环境中的错误？

# java - 从集合中移除元素

> ID：16053075
> 
> 赞同：1
> 
> 时间：2013-04-17T06:29:05.720
> 
> 标签：java, collections

我想要做的是删除集合中小于指定对象的所有元素。这就是我所拥有的：

```
static void removeAllLessThan(Collection c, Object x) {
    for(Object a : c) if(a.compareTo(x) < 0) c.remove(a);
} 
```

这不起作用，因为 Object 没有 compareTo 方法。我想知道的是我应该如何比较对象？还有什么是自然比较器？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T06:48:18.513

使用`Collection<Comparable>`而不是`Collection`, 并实施`Comparable`到集合中的所有项目。并更改您的方法，例如：

```
static void removeAllLessThan(Collection<Comparable> c, Comparable x) {
    for (Iterator<Comparable> it = c.iterator(); it.hasNext();)
        if (it.next().compareTo(x) < 0)
            it.remove();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:49:24.383

从使用泛型开始，让调用者声明他想要过滤的对象类型：

```
static <T> void removeAllLessThan(Collection<T> collection, T t) {...} 
```

然而，这还不够。您需要使用 a`Comparator<T>`来提供订购。

```
static <T> void removeAllLessThan(Collection<T> collection,
                                  Comparator<T> comparator, T t) {...} 
```

然后，在使用继承时允许用户有一些灵活性。他必须做 的等价物`t1 < t2`，但比较器可以是 T 的任何超类型，并且集合可以是扩展 T 的任何东西：

```
static <T> void removeAllLessThan(Collection<? extends T> collection,
                                  Comparator<? super T> comparator, T t) {...} 
```

然后，删除过程出现错误。唯一可以在迭代集合时从集合中删除的机制是`Iterator`. 其他任何事情都有风险`ConcurrentModificationException`。

```
static <T> void removeAllLessThan(Iterable<? extends T> iterable,
                                  Comparator<? super T> comparator, T t) {
    for (Iterator<? extends T> it = iterable.iterator(); it.hasNext();) {
        if (comparator.compare(it.next(), t) < 0) {
            it.remove();
        }
    }
} 
```

注意签名更改。

最后，这是一个非常具体的方法。您将需要编写许多几乎相同的方法，例如 removeIfGreaterThan、removeIfEqualIgnoringCase 等。编写`removeIf`带有签名的泛型方法

```
public <T> removeIf(Iterable<? extends T> iterable,
                    Predicate<? super T> predicate){...} 
```

`Predicate`是许多库提供的接口，只有一个布尔`eval`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:52:06.500

有两种方法可以解决这个问题。

首先，可以使用`Comparable`Interface，也就是说方法要改成：

```
static void removeAllLessThan(Collection<Comparable> c, Comparable x) {
    for(Comparable a : c) if(a.compareTo(x) < 0) c.remove(a);
} 
```

一个对象应该具有一个名为 的方法`comparedTo`。

其次，您可以执行 a`Comparator`来判断哪个更大。如果您不希望对象具有可比性，这意味着您不想更改现有代码以使其实现`Comparable`，这是一种更好的方法。但代码将更改为：

```
static void removeAllLessThan(Collection c, Object x, Comparator comp) {
    for(Object a : c) if(comp(a, x) < 0) c.remove(a);
} 
```

这是[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)和[Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)的javadoc 。

# html - 菜单下拉菜单在 Internet Explorer 上不起作用

> ID：16053076
> 
> 赞同：1
> 
> 时间：2013-04-17T06:29:09.767
> 
> 标签：html, css, drop-down-menu

我有一个菜单下拉菜单，在 Mozilla 和 Chrome 上运行良好，但在 Internet Explorer 上却不行。当下拉菜单向下滚动并且我将鼠标放在其上方时，它会隐藏。

```
<ul>
    <li class="t-item t-state-default" style="float:right;"><a class="t-link" href="#"><img alt="image" class="t-image" src="/Newsletter/Content/Images/icon_logout.png" /> </a></li>
    <li class="t-item myAccount t-state-default"><a class="t-link" href="#Nav-7">Contul meu<span class="t-icon t-arrow-down"></span></a>
        <ul class="t-group">
            <li class="t-item">
                <div class="t-content" id="Nav-7">
                    <table>
                        <tr>
                            <td> Salut </td>
                            <td><em>Username</em></td>
                        </tr>
                        <tr>
                            <td> Cont </td>
                            <td><select id="ddlConturi" name="ddlConturi">
                                    <option selected="selected" value="0">Toate</option>
                                    <option value="1">Cont 1</option>
                                    <option value="2">Cont 2</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2"><a href="mylink">Do stuff</a></td>
                        </tr>
                    </table>
                </div>
            </li>
        </ul>
    </li>
</ul> 
```

我尝试使用 jquery 解决此问题，但没有成功。

```
$(".myAccount table *, .myAccount table *:focus,.myAccount table *:active").hover(function () {

            $(".myAccount ul.t-group").css("display", "block");
        }, function () {
            $(".myAccount ul.t-group").css("display", "block");
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:40:23.040

如果您可以绑定到`mouseenter`and`mouseleave`事件而不是`hover`. 因为当您将鼠标移动到另一个元素时，事件会冒泡，最终下拉隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:33:56.790

在您的标签之间添加此元标签：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" > 
```

这对我来说可以。它将强制关闭兼容性视图。公平的警告，这是一种黑客行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:43:25.990

IE 不支持此 CSS 选择器 >（大于字符）。你不能在锚标签以外的任何东西上使用 :hover 伪元素，否则 IE 不会读取它。

请参阅链接：

[http://msdn.microsoft.com/en-us/library/jj676915%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/jj676915%28v=vs.85%29.aspx)

[http://www.quirksmode.org/css/contents.html](http://www.quirksmode.org/css/contents.html)

# sass - Foundation 4 仅在小屏幕上居中对齐

> ID：16053078
> 
> 赞同：0
> 
> 时间：2013-04-17T06:29:20.067
> 
> 标签：sass, zurb-foundation, css-frameworks

刚开始使用 Zurb Foundation 并从版本 4 开始，我无法找到一种方法让网格仅在小屏幕上与中心对齐，然后在大屏幕上恢复为默认网格。Foundation 4 提供的本地类是否可以做到这一点？

我在[http://foundation.zurb.com/docs/components/grid.html](http://foundation.zurb.com/docs/components/grid.html)上查看了他们的文档，其中演示了“small-centered”和“large-centered”类，它们按预期工作，但有一句话说

> 如果没有被大版本覆盖，小版本将执行所有断点。

对我来说，这听起来像是我需要创建一个类来覆盖大型显示器上“小中心”类的中心对齐，或者存在一个类 - 我找不到。

这是我正在测试的一些示例代码：

```
<div class="row">
    <div class="large-2 columns">
        <span>text</span>
    </div>
    <div class="large-6 columns">
        <span>text</span>
    </div>
    <div class="large-4 columns">
        <span>text</span>
    </div>
</div> 
```

网格系统按预期和预期运行，但我希望所有三列仅在小屏幕上居中对齐。

如果我确实需要创建自己的类和样式，是否有人知道社区可以使用的 SCSS 已经解决了这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:48:14.533

事实证明，这是不支持开箱即用的。不过有一个简单的解决方法，那就是按照我在评论中的建议添加覆盖。

```
@media only screen and (min-width: 48em) {
    .column.large-left,
    .columns.large-left { 
        float: left !important; 
    }        
} 
```

请注意，使用`em`它是基金会标准的做事方式。那应该解决这个`smal-centered`问题。然后，您只需将该类添加到`small-centered`您不希望居中的任何元素。您可以[在这里看到它的实际效果](http://jsfiddle.net/UR6fe/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T14:15:12.853

你不能用 Foundation 非语义类来做到这一点。

您必须手动并且（希望）在语义上执行此操作：

```
@media only screen and (max-width: 767px) {
  .some-container { text-align: center; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:38:53.110

您需要检查 CSS 文件并搜索仅适用于小屏幕的媒体查询，然后为该特定列添加属性。

# c# - CallerMemberNameAttribute 是否使用反射

> ID：16053079
> 
> 赞同：12
> 
> 时间：2013-04-17T06:29:28.527
> 
> 标签：c#, .net, reflection, mvvm, inotifypropertychanged

在实现 INotifyPropertyChanged 接口时，您可以使用[CallerMemberName](http://msdn.microsoft.com/en-us/library/hh551816.aspx)属性来避免将成员名称指定为被调用方法的 String 参数。

问题是它在幕后使用反射吗？硬编码属性名称是否会对性能造成影响？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-17T06:40:21.930

不; 编译器在编译期间直接对成员名称进行硬编码。就 IL 而言，这是`ldstr`. 例如，如果我们编译：

```
static void Implicit()
{
    Log();
}
static void Explicit()
{
    Log("Explicit");
}
static void Log([CallerMemberNameAttribute] string name = null)
{} 
```

我们得到：

```
.method private hidebysig static void Implicit() cil managed
{
    .maxstack 8
    L_0000: ldstr "Implicit"
    L_0005: call void Program::Log(string)
    L_000a: ret 
}
.method private hidebysig static void Explicit() cil managed
{
    .maxstack 8
    L_0000: ldstr "Explicit"
    L_0005: call void Program::Log(string)
    L_000a: ret 
} 
```

如您所见 - IL 的名称直接与我们手动输入字符串***完全相同。***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T06:34:46.057

我试过反编译它，里面什么都没有。所以它看起来不像属性本身使用反射。另一方面，它的放置`System.Runtime.CompilerServices`表明属性本身由编译器以某种特殊方式处理，因此不应该有任何性能损失。

# jquery - jquery cookie 不工作是一个错误吗？

> ID：16053083
> 
> 赞同：0
> 
> 时间：2013-04-17T06:29:52.687
> 
> 标签：jquery, cookies

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js" language="javascript">        </script>
<script src="jquery.cookie.js" language="javascript"></script>

<script language="javascript">
  $(function() {
    alert("loaded");
    $.cookie('setdate', $.now());
alert( $.cookie('setdate') );
  });

</script> 
```

jquery.cookie.js 是从[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)下载的 这个简单的代码不起作用。我得到..加载然后未定义。 `Suggestions?`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:18:11.380

代码是正确的，可以在[这里](http://dystroy.org/stackoverflow/cookie.html)测试。

问题是 OP 浏览器中的设置之一。重置所有设置修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:37:26.747

试试这个，看看它是否有效，它可能只是一个竞争条件，这会给它时间来设置它：

```
$(function() {
    alert("loaded");
    $.cookie('setdate', $.now());
     setTimeout(function() { alert( $.cookie('setdate') }, 2500 );
 }); 
```

# android - 扩展视图不滚动

> ID：16053086
> 
> 赞同：1
> 
> 时间：2013-04-17T06:30:04.403
> 
> 标签：android, view, scroll

我正在尝试构建一个钢琴应用程序，我已经通过[这个链接](https://stackoverflow.com/questions/15091218/how-to-create-layout-for-piano)

我能够创建绘制一系列黑白键的视图。我不知道如何水平滚动，因为我没有为视图使用任何 xml 文件。

**这是我的 MainActivity 的代码：**

```
public class MainActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(new MyTouch(this));
//setContentView(R.layout.activity_main);
}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
getMenuInflater().inflate(R.menu.activity_main, menu);
return true;
}
} 
```

**这是 MyTouch 的代码：** *与上述链接中指定的代码相同。*

```
public class MyTouch extends View {
public MyTouch(Context context) {
    super(context);
}
Bitmap whiteKey, blackKey;
Paint paint = new Paint();

public void draw(Canvas canvas) {
    if (whiteKey == null) {
        whiteKey = BitmapFactory.decodeResource(getResources(), R.drawable.white);
    }
    if (blackKey == null) {
        blackKey = BitmapFactory.decodeResource(getResources(), R.drawable.black);
    }

    int keys = 5;

    // draw white keys
    for (int i = 0; i < keys; i++) {
        canvas.drawBitmap(whiteKey, i * whiteKey.getWidth(), 0, paint);
    }
    // draw black keys
    for (int i = 0; i < keys; i++) {
        if (i != 3 && i != 7) {
            canvas.drawBitmap(blackKey, i * blackKey.getWidth()+blackKey.getWidth()*0.5f, 0, paint);
        }
    }
}

}; 
```

我搜索了谷歌，并尝试了很多例子，但没有一个对我有用。这个视图的更多内容包含一个绘制的画布，我对这个画布和绘图很陌生！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:46:26.893

```
class MyScrollView extends View
{
    int mTouchSlop;
    public MyScrollView(Context context) {
        super(context);
        final ViewConfiguration configuration = ViewConfiguration.get(getContext());
        mTouchSlop                            = configuration.getScaledTouchSlop();
        // TODO Auto-generated constructor stub
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
    }

    float mLastMotionY;
    boolean mIsScrolling;
    @Override
    public boolean onTouchEvent(MotionEvent ev) {

        final int action = ev.getAction();
        final float y = ev.getY();
        switch (action) {
        case MotionEvent.ACTION_DOWN: 
        {
            mLastMotionY = y;
            mIsScrolling = false;
            break;
        }

        case MotionEvent.ACTION_MOVE: 
        {
            final int deltaY = (int) (mLastMotionY - y);
            mIsScrolling = (!mIsScrolling) ? (Math.abs(deltaY) > mTouchSlop)
                    : mIsScrolling;

            if ( mIsScrolling ) 
            {
                scrollBy(0, deltaY);
                mLastMotionY = y;
            }
            break;
        }

        case MotionEvent.ACTION_UP: 
        {
            mIsScrolling = false;
            break;
        }
        case MotionEvent.ACTION_CANCEL: {
            break;
        }
        }
        invalidate();
        return true;
    }

    @Override
    public void scrollBy(int x, int y) {
        // TODO Auto-generated method stub
        super.scrollBy(x, y);//You can validate the scroll set the minimum and maximum scroll.
    }
} 
```

This will allow you to scroll in vertically. If you want to scroll horizontally consider the `touchX` values changes.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:11:38.000

这是水平滚动的最终视图..

```
class MyTouch extends View
{
int mTouchSlop;
public MyTouch(Context context) {
   super(context);
   final ViewConfiguration configuration = ViewConfiguration.get(getContext());
   mTouchSlop                            = configuration.getScaledTouchSlop();
}

@Override
protected void onDraw(Canvas canvas) {
   super.onDraw(canvas);
}

Bitmap whiteKey, blackKey;
Paint paint = new Paint();
public void draw(Canvas canvas) {
   if (whiteKey == null) {
       whiteKey = BitmapFactory.decodeResource(getResources(), R.drawable.white);
   }
   if (blackKey == null) {
       blackKey = BitmapFactory.decodeResource(getResources(), R.drawable.black);
   }

   int keys = 10;

   // draw white keys
   for (int i = 0; i < keys; i++) {
       canvas.drawBitmap(whiteKey, i * whiteKey.getWidth(), 0, paint);
   }
   // draw black keys
   for (int i = 0; i < keys; i++) {
       if (i != 3 && i != 7) {
           canvas.drawBitmap(blackKey, i * blackKey.getWidth()+blackKey.getWidth()*0.5f, 0, paint);
       }
   }
 }

 float mLastMotionX;
 boolean mIsScrolling;
 @Override
 public boolean onTouchEvent(MotionEvent ev) {

   final int action = ev.getAction();
   final float x = ev.getX();
   switch (action) {
   case MotionEvent.ACTION_DOWN: 
   {
       mLastMotionX = x;
       mIsScrolling = false;
       break;
   }

   case MotionEvent.ACTION_MOVE: 
   {
       final int deltaX = (int) (mLastMotionX - x);
       mIsScrolling = (!mIsScrolling) ? (Math.abs(deltaX) > mTouchSlop)
               : mIsScrolling;

       if ( mIsScrolling ) 
       {
           scrollBy(deltaX,0);
           mLastMotionX = x;
       }
       break;
   }

   case MotionEvent.ACTION_UP: 
   {
       mIsScrolling = false;
       break;
   }
   case MotionEvent.ACTION_CANCEL: {
       break;
   }
   }
   invalidate();
   return true;
 }

@Override
public void scrollBy(int x, int y) {
   super.scrollBy(x, y);
}
} 
```

感谢[Rajesh](https://stackoverflow.com/users/1107317/rajesh-cp)的回复。我希望这对某人有用....

# ruby - 来自 Ruby 驱动的数学模型的“零碎”AJAX 响应？

> ID：16053091
> 
> 赞同：0
> 
> 时间：2013-04-17T06:30:25.243
> 
> 标签：ruby, ajax, long-polling

我是一个有点新的网页设计师和开发人员，致力于一个公共卫生项目，以估计不同国家人口中艾滋病毒/艾滋病的进程。我们的测试版本在这里： http: [//globalhealthdecisions.com/test/tool/](http://globalhealthdecisions.com/test/tool/)

我们用 Ruby 构建了这个流行病模型。该模型计算了每年各组之间性互动和疾病传播的不同概率。目前，它运行了大约 40 年，最后将最终结果输出为 JSON 对象。该脚本需要大约 8 秒才能在 CLI 中完成运行。我已经为模型实现了一个前端，并且使用 AJAX 请求，最多可能需要 30 秒才能收到来自服务器的响应。

我的问题：有没有办法让我在计算模型时从服务器接收更新？即，我可以计算一年，输出那一年，将其发送到客户端，同时仍在运行 Ruby 脚本的当前执行吗？如果是这样，以这种“推送”方式，我可以在每年收到它时加载，从而显着减少等待时间。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:52:40.330

假设您可以从脚本中获取所需的数据块，我认为您可能正在寻找某种轮询，也许是长轮询。这是一篇关于该主题的好文章：

[http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery)

这是上面文章中使用 jquery 的要点：

```
(function poll(){
    $.ajax({ url: "server", success: function(data){
        //Update your dashboard gauge
        salesGauge.setValue(data.value);

    }, dataType: "json", complete: poll, timeout: 30000 });
})(); 
```

本质上，它只是一个 ajax 请求循环，每次服务器完成请求时调用成功函数，完全超时，在这种情况下，在 30000 毫秒之后。

希望有帮助。

# paypal - CreateRecurringPaymentsProfile 给出错误 11502：无效的令牌

> ID：16053092
> 
> 赞同：6
> 
> 时间：2013-04-17T06:30:25.800
> 
> 标签：paypal, recurring-billing

当我调用 CreateRecurringPaymentsProfile NVP API 时，我不断收到 Invalid Token Error。

请在下面找到我的 API 调用顺序：

**SetExpressCheckout**

```
METHOD = SetExpressCheckout
VERSION = 98
PWD = <pwd>
USER = <user>
SIGNATURE = <signature>
ReturnUrl = http://google.com
CANCELURL = http://google.com
PAYMENTREQUEST_0_PAYMENTACTION = Authorization
PAYMENTREQUEST_0_AMT = 100.00
PAYMENTREQUEST_0_CURRENCYCODE = USD
L_PAYMENTREQUEST_0_NAME0 = Item1
L_PAYMENTREQUEST_0_QTY0 = 1
L_PAYMENTREQUEST_0_AMT0 = 100.00
PAYMENTREQUEST_0_SELLERPAYPALACCOUNTID = rahul.katikineni@sap.com
LOCALECODE = US
L_BILLINGTYPE0 = RecurringPayments
L_BILLINGAGREEMENTDESCRIPTION0 = SameEveryTime 
```

**我用ACK** =* *Success* * 作为响应返回一个令牌。**[然后，我使用 URL [ https://www.sandbox.paypal.com/webscr&cmd=_express-checkout&token=](https://www.sandbox.paypal.com/webscr&cmd=_express-checkout&token=) *token*** ]导航到贝宝网站，并使用贝宝帐户登录，然后单击“同意并继续”。

同意并成功重定向到重定向 URL 后，我使用以下参数进行**GetExpressCheckoutDetails API 调用**

```
METHOD = GetExpressCheckoutDetails
VERSION = 98
PWD = <pwd>
USER = <user>
SIGNATURE = <signature>
TOKEN = <token from the SetExpressCheckout response> 
```

成功获取付款人详细信息作为响应后，我进行了**DoExpressCheckoutPayment** API 调用

```
METHOD = DoExpressCheckoutPayment
VERSION = 98
PWD = <pwd>
USER = <user>
SIGNATURE = <signature>
TOKEN = <token from the SetExpressCheckout response>
PAYERID = <payer ID from the GetExpressCheckoutDetails response>
PAYMENTREQUEST_0_AMT = 100
PAYMENTREQUEST_0_PAYMENTACTION = Sale
PAYMENTREQUEST_0_CURRENCYCODE = USD
L_PAYMENTREQUEST_0_NAME0 = Item1
L_PAYMENTREQUEST_0_QTY0 = 1
L_PAYMENTREQUEST_0_AMT0 = 100.00
PAYMENTREQUEST_0_SELLERPAYPALACCOUNTID = rahul.katikineni@sap.com 
```

我现在进行**CreateRecurringPaymentsProfile** API 调用

```
METHOD = CreateRecurringPaymentsProfile
VERSION = 98
PWD = <pwd>
USER = <user>
SIGNATURE = <signature>
TOKEN = <token from the SetExpressCheckout response>
PAYERID = <payer ID from the GetExpressCheckoutDetails response>
DESC = SameEveryTime
BILLINGPERIOD = Month
BILLINGFREQUENCY = 1
PROFILESTARTDATE = 2013-05-16T00:00:00Z
MAXFAILEDPAYMENTS = 1
AMT = 100.00
CURRENCYCODE = USD
L_PAYMENTREQUEST_0_NAME0 = Item1
L_PAYMENTREQUEST_0_QTY0 = 1
L_PAYMENTREQUEST_0_AMT0 = 100.00
AUTOBILLAMT = AddToNextBilling 
```

我不断收到以下回复

```
TIMESTAMP = 2013-04-17T05:31:24Z
CORRELATIONID = d2c1d30c1d31
ACK = Failure
VERSION = 98
BUILD = 5650305
L_ERRORCODE0 = 11502
L_SHORTMESSAGE0 = Invalid Token
L_LONGMESSAGE0 = The token is invalid
L_SEVERITYCODE0 = Error 
```

我曾尝试在许多论坛中寻找解决方案，但无法弄清楚我是否遗漏了任何参数。

谁可以帮我这个事？

在此先感谢，拉胡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-03T18:11:59.333

Paypal 返回的这个错误是模糊的。此错误的最常见原因是 SetExpressCheckout 调用中的 BillingDescription 值与 CreateRecurringprofile 调用中的 ScheduleDEtails.Description 之间的差异。确保这两个完全相同才能正常工作。

例如：

```
public CreateRecurringPaymentsProfileResponseType createRecurringProfile(string tokenin){
        var scheduleDetails = new ScheduleDetailsType();
        scheduleDetails.PaymentPeriod = paymentPeriod;
        scheduleDetails.Description = "RecurringBilling"; 
}
public  SetExpressCheckoutResponseType setExpressCheckout()
{
 ....
 var billingAgreement = new BillingAgreementDetailsType();

            billingAgreement.BillingAgreementDescription = "RecurringBilling";
            billingAgreement.BillingType = BillingCodeType.RECURRINGPAYMENTS;
            billingAgreement.PaymentType = MerchantPullPaymentCodeType.ANY;

            ecDetails.BillingAgreementDetails.Add(billingAgreement);
 ...
 } 
```

# php - 使用php在json中编码重音字符

> ID：16053094
> 
> 赞同：1
> 
> 时间：2013-04-17T06:30:35.430
> 
> 标签：php, utf-8, json

我有一个包含一些强调字符的查询结果，例如：

```
CollectionTitle => Afleuréss 
```

但是当我写一个`json`文件`json_encode($Result_Array)`并检索它显示的结果时：

```
CollectionTitle => NULL 
```

然后我用`array_map()`：

```
$res[] = array_map('utf8_encode', $row); 
```

但结果是我：

`CollectionTitle => AfleurÃ©ss`代替 `CollectionTitle => Afleuréss`

请建议我更好的方法来解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:33:10.163

第二个实际上是正确的。问题是您的浏览器无法检测到编码并且默认为默认值（可能是 ISO-8859-1）。切换您的浏览器编码，您将看到正确的字符出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:59:49.157

## Add to your HTML head:

```
<meta http-equiv="content-type" content="text/html;charset=utf-8" /> 
```

Note that you should have a proper HTML doctype because browsers default to non utf8\. You can do a simple test, like I did, this works:

```
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<?php
$title = "Jérôme";
echo $title."<br>"; 
```

But the place for the meta tag is in the head tag. The HTML document should look like this:

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>An XHTML 1.0 Strict standard template</title>
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
</head>

<body>

<?php
$title = "Jérôme";
echo $title."<br>";
?> 
```

That is standard.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T06:40:38.950

`json_encode`仅支持 UTF-8，但您的应用程序的其余部分使用的是 Windows-1252。我不建议使用`utf8_encode`从 ISO-8859-1 转换为 UTF-8 的方法。这只适用于您 95% 的时间，因为您使用的是 Windows-1252，而不是 ISO-8859-1*。

我不知道您是否可以，但如果可以，您应该切换到 UTF-8，这样您就不需要在任何地方使用这种脆弱的转换代码。

*这可能令人困惑。浏览器[实际上不允许您使用 ISO-8859-1](http://encoding.spec.whatwg.org/#legacy-single-byte-encodings)，而是将其视为 Windows-1252。与 MySQL 相同，Latin1 表示 Windows-1252。两者都是默认值。`utf8_encode/decode`当然使用实际`ISO-8859-1`，所以它在 0x80-0x9F 范围内不兼容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T07:32:38.763

在您的第二个示例/步骤中：

```
$res[] = array_map('utf8_encode', $row); 
```

看起来您正在尝试**编码**`UTF-8`不是. **`ISO-8859-1`**

 **您应该检测/知道来自数据库的编码是什么，并将其正确转码`UTF-8`为[`iconv`](http://php.net/manual/en/function.iconv.php)例如。

作为替代方案，您应该知道：

*   数据库中的编码是什么？
*   PHP文件的编码是什么？
*   HTML页面中的编码是什么？`<meta charset="utf-8">`

如果可能的话，请将以上所有内容移至`UTF-8`...**

# angularjs - 我应该把 AngularJS 范围 $watchers 放在哪里？

> ID：16053101
> 
> 赞同：1
> 
> 时间：2013-04-17T06:31:43.923
> 
> 标签：angularjs, angularjs-scope

我正在尝试更改 AngularJS 范围以触发模型中的操作。为此，我`$scope.$watch()`在我的项目控制器中使用，并将这些控制器插入指令中。我遇到的问题是，当一个项目在页面上出现多次时，我会为同一条数据获得多个观察者。

例如：

```
angular.module("MyApp", [])
.factory('ItemsModel', function() {
    var item1 = { triggers: 0, catches: 0 };
    var item2 = { triggers: 0, catches: 0 };

    return {
        getItems: function() { 
            return [item1, item2, item1];
        }
    };
})
.controller('AppCtrl', function($scope, ItemsModel) {
    $scope.items = ItemsModel.getItems();    
})
.controller('ItemCtrl', function($scope) {
    $scope.trigger = function() {
        $scope.item.triggers++;
    };    
    $scope.$watch('item.triggers', function(newValue, oldValue) {
        if(newValue != oldValue)
            $scope.item.catches++;
    });
})
.directive('item', function() {
    return {
        scope: {
            item: "="
        },
        controller: 'ItemCtrl'
    };
}); 
```

这里`item1`在数组中出现了两次`items`，所以我最终得到了两个控制器查看同一条数据。如果`triggers`对属性进行了更改，并将`catches`其保存回服务器，那么我会将每个更改保存到 item1 两次。如果一个项目出现 3 次，它会节省 3 次。

我觉得更改侦听器应该进入模型，但模型无权访问范围。迭代每个项目并在 AppCtrl 中添加行为对我来说没有多大意义。那么观察者去哪儿了呢？

我也把它放在了这里：http: [//jsfiddle.net/nicholasstephan/p56MT/3/](http://jsfiddle.net/nicholasstephan/p56MT/3/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T03:56:46.460

我没有像你在这里使用指令中指定的控制器，但另一种方法是在 item 的指令中设置一个监视。这样，手表只会因指令中的项目更改而跳闸一次。

# loops - BizTalk：2 个级别的条件循环

> ID：16053103
> 
> 赞同：0
> 
> 时间：2013-04-17T06:31:55.383
> 
> 标签：loops, map, conditional, biztalk

我需要在 BizTalk 映射中的两个级别上使用条件循环，但我用于创建父数据的条件禁止创建子数据。

关于如何在 BizTalk 映射器中映射以下内容的任何想法：

## 输入

注释：<Group> 和 <Row> 元素处于同一级别。

> ```
>  <Line>
>       <Name>Group</Name>
>       <RowNo>1</RowNo>
>  </Line>
>  <Line>
>       <Name>Row</Name>
>       <RowNo>1</RowNo>
>  </Line>
>  <Line>
>       <Name>Row</Name>
>       <RowNo>2</RowNo>
>  </Line>
>  <Line>
>       <Name>Group</Name>
>       <RowNo>2</RowNo>
>  </Line>
>  <Line>
>       <Name>Row</Name>
>       <RowNo>1</RowNo>
>  </Line>
>  <Line>
>       <Name>Row</Name>
>       <RowNo>2</RowNo>
>  </Line> 
> ```

## 输出

注释： <Row> 元素应该在 <Group> 元素之下。

> ```
>  <Group>
>       <Name>Group</Name>
>       <RowNo>1</RowNo>
>       <Row>
>            <Name>Row</Name>
>            <RowNo>1</RowNo>
>       </Row>
>       <Row>
>            <Name>Row</Name>
>            <RowNo>2</RowNo>
>       </Row>
>  </Group>
>  <Group>
>       <Name>Group</Name>
>       <RowNo>2</RowNo>
>       <Row>
>            <Name>Row</Name>
>            <RowNo>1</RowNo>
>       </Row>
>       <Row>
>            <Name>Row</Name>
>            <RowNo>2</RowNo>
>       </Row>
>  </Group> 
> ```

在输出中创建子元素 <Row> 非常简单，我使用一个条件来检查输入是否为 <Line/Name>="Row"，然后将输入元素 <Line> 中的内容映射到输出元素 <Row>。

问题是当我使用相同的逻辑来创建输出父元素 <Group> 时。如果我检查是否输入 <Line/Name>="Group" 这将正确创建输出元素 <Group>，但是当此条件未完全满足时（即 Name=Row），这也将禁止创建子元素 <Row> ，因此产生以下输出：

> ```
>  <Group>
>       <Row />
>       <Name>Group</Name>
>       <RowNo>1</RowNo>
>  </Group>
>  <Group>
>       <Row />
>       <Name>Group</Name>
>       <RowNo>2</RowNo>
>  </Group> 
> ```

谁能指出我正确的方向？还是这种情况会迫使我进入 XSLT 丛林？

我可以通过使用编排来解决这个问题，但我希望我在接收端口上将它作为一个映射运行，所以我非常想在一个映射中解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:56:30.920

xslt 没*那么*难。有很多情况下你会需要它。这是其中之一。帮自己一个忙，试试看。真的！

*   右键单击变换
*   在右键菜单中点击验证转换
*   保存它生成的两个文件
*   打开变换。左键单击背景网格。
*   在属性窗口中输入两个文件的名称作为外部 xslt 和 xml。
*   更新你的 xslt 以获得你需要的东西
*   debug xslt（从右键菜单中）是你的朋友

# highcharts - Highcharts箱线图的奇怪行为

> ID：16053109
> 
> 赞同：1
> 
> 时间：2013-04-17T06:32:25.667
> 
> 标签：highcharts, rendering, boxplot

我正在测试由 Highcharts 团队创建的新箱线图，位于： [http ://www.highcharts.com/demo/box-plot](http://www.highcharts.com/demo/box-plot)

所以渲染得非常好。

所以我决定在观察数据的最后一个数组中添加更多值（更多观察值）：

```
series: [{
            name: 'Observations',
            data: [
                [760, 801, 848, 895, 965],
                [733, 853, 939, 980, 1080],
                [714, 762, 817, 870, 918],
                [724, 802, 806, 871, 950],
                [834, 836, 864, 882, 910, 888, 888, 888]
            ],
            tooltip: {
                headerFormat: '<em>Experiment No {point.key}</em><br/>'
            }
        }, { 
```

然后更新的箱线图非常难看。所以我想知道这是否是正常行为？

实际上，观察值的数量可能因实验而异，而且箱线图 highcharts 似乎无法显示这种情况？

或者有什么办法可以解决这个问题。

在此先感谢您的帮助。

弗雷德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:13:29.780

箱线图参数的最大数量为 5。

# codenameone - 使表格适合屏幕 - 代号

> ID：16053113
> 
> 赞同：0
> 
> 时间：2013-04-17T06:32:35.020
> 
> 标签：codenameone, lwuit

我在我的一个代号申请表中使用了表格。

我的列宽有问题。在某些设备中，表格显示为水平滚动，但在某些设备中不是。我想让表格适合设备屏幕宽度或更改一些列宽度。我正在寻找这个功能，但我没有找到合适的东西。

它的表现如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:31:16.607

您可以使用宽度属性，它以可用空间的百分比表示，其中 -1 是一种特殊情况（仅在一列上使用），它占用剩余的可用空间。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-17T06:35:40.347

我的建议是查看 jquerymobile 的解决方案 [在此处输入链接描述][1]

[1]： http: [//jquerymobile.com/demos/1.3.0-beta.1/docs/tables/table-reflow.html](http://jquerymobile.com/demos/1.3.0-beta.1/docs/tables/table-reflow.html) jquerymobile 回流表

# qt - 即时更改小部件类型的最佳方法是什么？

> ID：16053115
> 
> 赞同：0
> 
> 时间：2013-04-17T06:32:44.490
> 
> 标签：qt, pyqt, pyside

我需要根据用户的操作在同一个地方显示不同的信息。

例如，如果按下一个按钮，我需要显示 QTableWidget，如果按下另一个按钮，我需要在同一位置显示 QListWidget。

做那件事的简单而好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T07:53:57.833

你需要的是[QStackedWidget](http://qt-project.org/doc/qt-4.8/qstackedwidget.html)。用必要的小部件填充它并使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:22:24.143

您可以删除现有小部件，创建新小部件，然后将其添加到同一位置的布局中。或者创建两个小部件，但只创建`show()`一个和`hide()`另一个。

# openldap - OpenLDAP 配置

> ID：16053121
> 
> 赞同：-1
> 
> 时间：2013-04-17T06:33:02.940
> 
> 标签：openldap, centos6

我尝试在 Centos 6 中安装 OpenLDAP。安装成功。但是每次我尝试在命令下添加用户使用时，LDAP 都会要求我输入密码。

> ldapadd -x -D "cn=Manager,dc=adminmart,dc=com" -W -f /etc/openldap/root.ldif

我在哪里可以得到密码？在安装步骤中，它不要求为 LDAP 设置任何密码。

> 输入 LDAP 密码：ldap_bind：凭据无效 (49)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T09:41:18.280

您需要使用以下命令生成密码

```
 slappasswd 
```

在重新启动 ldap 后复制 slapd.conf 中的输入后，在控制台上运行上述命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T10:03:45.287

管理员密码应在 slapd.conf 或 slapd.d 中定义。而且您无论如何都不应该使用该帐户。这是给slapd的，不是给你的。

# django - 控制 Django auth 用户对特定对象实例的访问

> ID：16053122
> 
> 赞同：2
> 
> 时间：2013-04-17T06:33:02.903
> 
> 标签：django, django-authentication

在我的 Django 项目中，我有由 Django 的内置身份验证系统创建的各种用户。每个用户都可以创建自己的`App`模型实例。我想限制用户访问对象，以便用户只能查看他们创建的实例。为此，我创建了这个视图：

```
@login_required
def appDetail(request, app_id):
    try:
        app = App.objects.get(pk=app_id)

        # Testing if the currently logged in user is 
        # the same as the user that created the 'app':

        if request.user.id == app.user.user.id:
            if request.method == 'POST':
                form = AppForm(request.POST, instance=app)
                if form.is_valid():
                    edited_app = form.save()
                    return HttpResponseRedirect('/thanks/')
            else:
                form = AppForm(instance=app)

        # If 'app' does not belong to logged in user, redirect to 'accessdenied' page:

        else:
            return HttpResponseRedirect('/accessdenied/')
    except LeaveApp.DoesNotExist:
        raise Http404
    return render(request, 'AppDetail.html', {'form':form}) 
```

它有效，但我想知道是否有更普遍接受和/或安全的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:45:15.833

This is called row-level permissions and it's a very common problem. See [here](https://www.djangopackages.com/grids/g/perms/) for all the apps that solve it.

If that particular test is all you need to do, go for a custom solution like yours (though, since it's boilerplate, it's preferable to move it to a decorator). Otherwise, just use an existing app.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T10:38:17.690

我会将表单提交放在不同的视图中并编写自定义装饰器，您也可以将其用于类似问题。我也会返回 404 而不是拒绝访问。您可能不想向用户表明您正在保护某些东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-15T14:30:14.423

有一个名为 user_passes_test 的装饰器，它根据用户是否通过某个检查来限制对视图的访问

```
from django.contrib.auth.decorators import login_required, user_passes_test

@login_required
@user_passes_test(lambda user: user.username == app.user.user.id)
MyView(request):
    ... 
```

您还可以添加一个可选参数，以便在检查失败时重定向到的 url。

从管理页面尝试这样做也很容易，但需要一些额外的步骤。

[文档在这里](https://docs.djangoproject.com/en/1.5/topics/auth/default/#django.contrib.auth.decorators.user_passes_test)

# java - 如何在rest webservice中接收编码的字节数组并将其解码并保存为java中的图像

> ID：16053126
> 
> 赞同：0
> 
> 时间：2013-04-17T06:33:41.883
> 
> 标签：java, ajax, jakarta-ee, resteasy

我正在尝试将图像的编码字节转换为base64格式并发送到rest webservice。在服务内部，我想对其进行解码并将其转换回图像并希望将图像保存在我的本地路径中。它在解码过程中失败。我不知道逻辑是否正确。需要一些指导

```
 @POST
    @Path("/imageupload")
    @Produces("text/html")
    @Consumes(MediaType.MULTIPART_FORM_DATA)
     public String execute(@FormDataParam("image") String inputfile) throws Exception
    {

            System.out.println("entered into service");
        BASE64Decoder decoder = new BASE64Decoder();
        ByteBuffer img=decoder.decodeBufferToByteBuffer(inputfile); 
        System.out.println();
            File outputfile = new File("D:\\TEST\\test.png");
                ImageIO.write(img, "png", outputfile); 
```

逻辑是：

```
Step 1: get the byte array as string inside the service.
Step 2: decode it 
Step 3: write the byte into file with png format 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:14:08.713

如果您获得正确编码的图像并且您确定它是 png，我会这样做。

```
BASE64Decoder decoder = new BASE64Decoder();
byte[] decodedImageBytes = decoder.decodeBuffer(inputfile); 
final FileOutputStream out = new FileOutputStream(new File("D:\\TEST\\test.png"));
out.write(decodedImageBytes);
out.close(); 
```

PS 确保您收到图像作为编码字符串。

# c++ - 跟踪对象时如何绘制运动？

> ID：16053127
> 
> 赞同：2
> 
> 时间：2013-04-17T06:33:47.957
> 
> 标签：c++, physics

我使用网络摄像头并使用 openCV 检索每个帧并跟踪对象的位置。

所以基本上，我在每一帧中都得到了一个点。但是我怎样才能实时绘制运动画面呢？

我需要一个计时器来记录特定时间的几个点并画线吗？

和在while循环中一样，我只检索一帧，我不认为如果我在当前帧上画一条线，我仍然可以在下一帧中保持这条线。那么我应该如何显示运动呢？

```
while( true )
    {
        //Read the video stream
        capture = cvCaptureFromCAM(1);
        frame = cvQueryFrame( capture );

        //Apply the classifier to the frame
        detectAndDisplay(frame); // I got a point from this function

        // waitkey enter
        int c = waitKey(10);
        if( (char)c == 27 ) { exit(0); } 

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:53:37.610

使用向量来保持位置，然后在每一帧上绘制它们。请注意，您的函数需要返回检测到的点。我已经更改了它的名称，因为它当时没有绘制。你可以稍后修复它。

> ```
> vector<CvPoint> trajectory;
> Vec3b mycolor(100,0,0);
> 
> while( true )
> {
>     //Read the video stream
>     capture = cvCaptureFromCAM(1);
>     frame = cvQueryFrame( capture );
> 
>     //Apply the classifier to the frame
>     CvPoint cur_pnt=detect(frame); // I got a point from this function
>     trajectory.push_back(cur_point);
> 
>     //Draw points.
>     for (int i=0;i<trajectory.size();i++)
>         frame.at<Vec3b>(trajectory[i].x,trajectory[i].y)=mycolor;
> 
>     // waitkey enter
>     int c = waitKey(10);
>     if( (char)c == 27 ) { exit(0); } 
> 
> } 
> ```

# javascript - ckeditor 复制到剪贴板在 chrome 和 firefox 中的行为不同

> ID：16053140
> 
> 赞同：2
> 
> 时间：2013-04-17T06:35:01.833
> 
> 标签：javascript, html, ckeditor

我正在从 Ckeditor 复制文本。我有一些自定义标签显示在 CKEditor 中。当我从 ckeditor 复制 firefox 内容时，复制为 html 格式（在编辑器中粘贴时粘贴 html 格式的文本），我的自定义标签不会被复制。但是在 chrome 和 IE 中，我的自定义标签被复制，当我在编辑器中粘贴时，自定义标签也被粘贴。

任何人都可以解释为什么会发生这种情况以及如何为 Firefox 解决这个问题。

# android - 如何访问android库项目中的资源

> ID：16053141
> 
> 赞同：16
> 
> 时间：2013-04-17T06:35:05.680
> 
> 标签：android, resources

我正在构建一个内部需要一些静态资源（图像/xml 等）的 android 库项目。

然后我想知道我可以将这些资源放在哪里以及如何访问它们？

由于我将资源放在`assets`文件夹中。我使用 AssetManager 访问资源：

```
public class DataProvider {
    byte[] getDrawableData(int num) {
        AssetManager am = Resources.getSystem().getAssets();
        InputStream is = null;
        try {
            is = am.open("t.jpg");
        } catch (IOException e) {
            return "".getBytes();
        }
        if (is != null) {
            Drawable dw = Drawable.createFromStream(is, null);
            Bitmap bm = ((BitmapDrawable) dw).getBitmap();
            ByteArrayOutputStream stream = new ByteArrayOutputStream();
            bm.compress(Bitmap.CompressFormat.JPEG, 100, stream);
            return stream.toByteArray();
        }

        return "".getBytes();
    }
} 
```

但是我得到了错误：`W/System.err(19583): java.io.FileNotFoundException: t.jpg`

问题是什么？

* * *

如前所述`Sankar V`，图书馆项目不支持原始资产。然后看来我必须把resurces放在`res`文件夹下。

但是我尝试使用`Resources.getSystem().getResources()....`无法得到我想要的方法。而且有人说这种方法只能获取系统级资源，不能获取应用级资源。

如果这是事实。这是否意味着我必须在`Context`想要获取任何资源的任何地方保存对象的引用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T06:57:47.483

**然后我想知道我可以将这些资源放在哪里以及如何访问它们？**

来自 Android 文档

**图书馆项目不能包含原始资产**

这些工具不支持在库项目中使用原始资产文件（保存在 assets/ 目录中）。应用程序使用的任何资产资源都必须存储在应用程序项目本身的 assets/ 目录中。但是，**支持保存在 res/ 目录中的资源文件**。

**文档参考链接：** [LibraryProjects](http://developer.android.com/tools/projects/index.html#LibraryProjects)

**解决方案：** [如何从应用程序项目中访问库项目的 res/ 目录中保存的资源文件](https://stackoverflow.com/a/9421473/1329126)

**注意：**如果您想从 Library Project 本身访问资源，请将资源添加到`res/ directory`not in 中`assets`。因为 assets 中的文件不会与 .jar 文件捆绑在一起。您可以使用文件中生成的引用照常访问它`R.java`。

**例如：**从可绘制使用访问图像

```
R.drawable.image_name 
```

**这是否意味着我必须在任何我想获取任何资源的地方保存 Context 对象的引用？**

确实，您应该保留对上下文的引用以访问资源

**更新：**

现在，Android 库项目可以生成为 aar（Android 存档）文件，它允许您捆绑库项目所需的资源文件，而不是只允许您捆绑 Java 类的旧 jar（Java 存档）文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-29T23:44:14.937

或者您可以在 Eclipse 中使用链接文件夹，并将您的资产文件夹链接到您的新项目。

# database - 在 Wordpress 中创建用户登录站点

> ID：16053143
> 
> 赞同：1
> 
> 时间：2013-04-17T06:35:14.117
> 
> 标签：database, wordpress, client-side, server-side

我想在 Wordpress 中创建一个用户可以登录的站点，并且通过登录，我并不是说登录到 wordpress 管理面板。登录到会员区只是网站的一部分。我该怎么办？

是否有此插件，或者我需要在 wordpress 中使用自定义 php（和 MySQL）手动执行此操作？

我问是因为必须有一种简单的方法来解决这个问题，而无需了解 php ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:19:46.257

Word Press 有几个会员区插件，包括免费和付费版本。您可以尝试[http://wordpress.org/extend/plugins/member-access/](http://wordpress.org/extend/plugins/member-access/)这是一个非常简单且免费的解决方案。您还可以尝试 BuddyPress 以获得完整的社交社区覆盖。此处审查了其他一些替代方案[http://www.mytechopinion.com/2009/07/5-ways-add-membership-wordpress.html](http://www.mytechopinion.com/2009/07/5-ways-add-membership-wordpress.html)

# vim - Vim：动态语法高亮

> ID：16053144
> 
> 赞同：2
> 
> 时间：2013-04-17T06:35:20.003
> 
> 标签：vim, syntax-highlighting, vim-syntax-highlighting

我想动态地（即，取决于当前文件的内容）调整语法高亮。虽然这通常可能有用，但我的具体设置如下：

我考虑的文件类型可能包含（任意多个）形式的块`(VAR ...)`，其中此类“VAR-blocks”包含应视为变量的以空格分隔的标识符列表（而不在 VAR-block 中的标识符是被认为是固定的功能符号或常数）。此外，已经有一个文件`trs.vim`可以处理此类文件的语法突出显示。在`trs.vim`语法组`trsKeyword`中声明。现在我的目标是使用该组突出显示所有变量。

考虑以下示例（让我们称之为`add.trs`）：

```
(VAR x y)(RULES
  add(z, y) -> y  
  add(s(x), y) -> s(add(x, y))
) 
```

`add.trs`在*vim*中打开时，我想要它`x`并`y`打印为关键字（例如`z`，不是，尽管没有参数）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:38:22.483

我已经达到了预期的结果（但想在 SO 上分享）。所以就在这里（以下片段应该组合在一个文件中`vars.vim`）。

首先，我定义了一个可以识别 VAR 块的模式：

```
" pattern that matches VAR-blocks of *.trs files
let varblock = '(VAR\s*\(.*\))' 
```

然后我检查 VAR 块的当前文件（也许有比使用`%`它更好的方法？）并忽略未找到匹配项的情况。

```
" create list of variables from all VAR-blocks 
try
  silent exe "vimgrep /" . varblock . "/j %"
catch /^Vim\%((\a\+)\)\=:E480/ " no match
  " do nothing
endtry 
```

找到的匹配是由`getqfilst()`我复制的。然后我用匹配模式的第一个子组替换这个列表中的每个元素`varblock`（这将是一个包含空格分隔标识符的字符串）。我将所有此类字符串合并为一个字符串，然后将其拆分为空格以获取标识符列表：

```
let vars = split(join(map(copy(getqflist()), 'matchlist(v:val.text, varblock)[1]'))) 
```

最后，我创建了一个匹配这些标识符的模式并将其注册到`trsKeyword`组中：

```
" activate syntax highlighting for variables
exe "syn match trsKeyword \"\\<\\(" . join(vars, '\|') . "\\)\\>\""
" echo "variables: " . join(vars, ", ") 
```

为了使它与我一起工作，`trs.vim`我创建了目录`~/.vim/syntax/trs`并将其放在`trs.vim`里面`vars.vim`。然后在我的`~/.vimrc`我添加

```
" TRS files
au BufNewFile,BufRead,BufWrite *.trs setf trs 
```

它为以结尾的文件激活语法突出显示`.trs`（并且在保存缓冲区时更新变量列表）。

# php - 多个设备的 ios 推送通知

> ID：16053146
> 
> 赞同：0
> 
> 时间：2013-04-17T06:35:22.633
> 
> 标签：php, iphone, push-notification, apple-push-notifications

我有以下用于 ios 推送通知的 php 代码。这里我使用 fwrite() 部分中的循环为 2 个设备编写代码。当前代码工作正常。我的疑问是，我可以在不使用 for 循环的情况下直接传递设备令牌数组吗？

```
<?php
// Put your device token here (without spaces):
$deviceToken[0] = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx';

$deviceToken[1] = 'yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy';

// Put your private key's passphrase here:
$passphrase = '123456';

// Put your alert message here:
$message = 'multiple device push notification...!';

////////////////////////////////////////////////////////////////////////////////

$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', 'abc.pem');
stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);

// Open a connection to the APNS server
$fp = stream_socket_client(
'ssl://gateway.sandbox.push.apple.com:2195', $err,
$errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);

if (!$fp)
exit("Failed to connect: $err $errstr" . PHP_EOL);

echo 'Connected to APNS' . PHP_EOL;

// Create the payload body
$body['aps'] = array(
'alert' => $message,
'sound' => 'default',
'badge' => '+1'
);

// Encode the payload as JSON
$payload = json_encode($body);
for($i=0;$i<2;$i++)
{
// Build the binary notification
$msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken[$i]) . pack('n', strlen($payload)) .     $payload;

// Send it to the server
$result = fwrite($fp, $msg, strlen($msg));
echo "msg may be delivered";
}

if (!$result)
echo 'Message not delivered' . PHP_EOL;
else
echo 'Message successfully delivered' . PHP_EOL;

// Close the connection to the server
fclose($fp); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T07:48:43.490

它`design by default`，但没有传递设备令牌数组的选项。您必须遍历循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-10T13:37:23.773

这种方法的替代方法是使用第三方，如[亚马逊 SNS 服务](http://docs.aws.amazon.com/sns/latest/dg/welcome.html)。在这里您可以发布到主题（一个请求），所有订阅该主题的设备都会收到通知。

# c - 没有链接的类型用于声明有链接的函数

> ID：16053148
> 
> 赞同：0
> 
> 时间：2013-04-17T06:35:29.970
> 
> 标签：c

我正在尝试编写一个函数，该函数将指向我创建的类型的指针作为参数`typedef`调用`NodeType`。我隐约明白`typedef`名字没有联系。我不确定为什么当类型的两个实例`NodeType`似乎都在同一个翻译单元中时会出现以下错误。

这是代码：

```
#include <stdio.h>

int main(){

    typedef struct NodeTag{
            char* Airport;
            NodeTag * Link;                
            } NodeType;

    //Declare print function
    void printList(NodeType *);

    void printList(NodeType * L){
        //set N to point to the first element of L
        NodeType * N = L;         

        //if the list is empty we want it to print ()
        printf("( ");
        //while we are not at the Link member of the last NodeType
        while(N != NULL){
        //get the Airport value printed
            printf("%s", N->Airport);
            //advance N
            N= N->Link;
            if(N != NULL){
            printf(", ");
            }
            else{
             //do nothing
            }
         }

        printf(")");   
    }

return 0;
} 
```

这是我遇到的错误：

```
linkedlists.c: In function 'int main()':
linkedlists.c: error: type 'NodeType {aka main()::NodeTag} with no linkage used
to declare function 'void printList(NodeType*) with linkage [-fpermissive] 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:40:05.083

您的`printList`函数是在 的主体中定义的`main`，这会使编译器感到困惑。移出`printList`身体是`main`这样的：

```
#include <stdio.h>

typedef struct NodeTag{
        char* Airport;
        NodeTag * Link;                
        } NodeType;

//Declare print function
void printList(NodeType *);

int main(){

    return 0;
}

void printList(NodeType * L){
    //set N to point to the first element of L
    NodeType * N = L;         

    //if the list is empty we want it to print ()
    printf("( ");
    //while we are not at the Link member of the last NodeType
    while(N != NULL){
    //get the Airport value printed
        printf("%s", N->Airport);
        //advance N
        N= N->Link;
        if(N != NULL){
        printf(", ");
        }
        else{
         //do nothing
        }
     }

    printf(")");   
} 
```

完成此操作并对其进行编译后，您需要弄清楚`printList`从内部调用的方式和位置`main`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:51:39.753

你不能在主函数中声明你的函数。将函数原型和声明放在主循环之外。函数原型 ( `void printList(NodeType *);`) 应在函数实际使用之前声明。还要在 main 之外和函数之前声明您的结构。

您的 typedef 也有错误

```
 typedef struct NodeTag{
        char* Airport;
        NodeTag * Link; <-- missing struct prefix              
        } NodeType; 
```

# java - 在黑莓中读/写文件

> ID：16053154
> 
> 赞同：0
> 
> 时间：2013-04-17T06:35:43.893
> 
> 标签：java, file, blackberry

我正在使用此代码写入文件。

```
 protected void writeFile(String text) {
            DataOutputStream os = null;
            FileConnection fconn = null;
                try {
                    fconn = (FileConnection) Connector.open("file:///store/home/user/documents/file.txt", Connector.READ_WRITE);
                    if (!fconn.exists())
                        fconn.create();
                    os = fconn.openDataOutputStream();
                    os.write(text.getBytes());
                } catch (IOException e) {
                    System.out.println(e.getMessage());
                } finally {
                    try {
                        if (null != os)
                            os.close();
                        if (null != fconn)
                            fconn.close();
                    } catch (IOException e) {
                        System.out.println(e.getMessage());
                    }
            }} 
```

代码工作正常。

我的问题是，如果我第一次写“Banglore”，当我读到它时，我会得到“Banglore”。但是，当我第二次写“印度”时，当我读到它时，我得到了“Indialore”。所以，基本上它的内容不会根据文字而改变，我正在给。请告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T06:42:45.347

写入文件不会删除内容，而只是替换内容，因此在 'Bangalore' 上写入 'india' 会将 'Banga' 替换为 'India'，其余部分保持不变。如果您想用较新的内容完全删除旧内容，则需要[truncate()](http://www.blackberry.com/developers/docs/6.0.0api/javax/microedition/io/file/FileConnection.html#truncate%28long%29) 新数据结束处的文件。`truncate(text.getBytes().length)`

# matlab - 在函数的函数中绘制函数

> ID：16053156
> 
> 赞同：11
> 
> 时间：2013-04-17T06:35:49.683
> 
> 标签：matlab, plot

我不知道我是否能够完全解释我需要什么。但我会试试的。

我有弯曲的框架，在这个框架上，我必须绘制力/力矩/应力图。帧有 9 个间隔。现在我拉伸框架并在拉伸的零线上绘制图表。

但是如果我想在真实的框架上绘制它应该怎么做呢？

**几个例子：**

*   我尝试做这样的事情： ![在此处输入图像描述](https://i.stack.imgur.com/xNEV5.png)

*   这是真实的框架： ![在此处输入图像描述](https://i.stack.imgur.com/PN0YB.png)

具有影响框架的相应力。

如果我拉伸最终的力/力矩/应力图，它看起来像这样：![在此处输入图像描述](https://i.stack.imgur.com/8bjiK.png)

我需要这样的： ![在此处输入图像描述](https://i.stack.imgur.com/t8Y5w.png)

我希望你知道我的意思 :-) 我不是 Photoshop 的人 :-)

编辑：在我看来，如果你画了任何图，你是在*零线*的函数中画的，但是如果你把零线改成不同的函数怎么办。

这就像绘制两条线并填充它们之间的区域，但只有底线是正常*零线*的函数，第二行是第一行的函数。

*   我认为我们可以从一个点出发： ![在此处输入图像描述](https://i.stack.imgur.com/b8R7d.png) 这样第二个函数将与第一个函数函数相对应地绘制。:-)

欢迎任何想法:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:31:54.227

这种情节的总体思路如下：

让曲线从您的顶部绘图描述为 y = f(x)。在 matlab 中，您收到一组点：

```
x = x0:dx:xf;
y = f(x); 
```

f 应该是外部函数或公式。

比你有零线函数 y2 = g(x2)。第一个问题需要将此函数转换为参数形式，如 y2=gy(t), x2=gx(t)。如果您将有这样的参数表示，您可以收到放置在零线曲线上等距离的两个点集：

```
t=x0:dx:xf;  % same as x above
x2=gx(t);
y2=gy(t); 
```

第二个问题是您需要接收零曲线每个点的法线向量。

如果您有直接公式 y2 = g(x2)，则可以使用等式：

> nx - x2(k) + g'(x2(k))*(ny-y2(k)) = 0
> 
> nx^2 + ny^2 = 1

g'表示g的导数；x2(k), y2(k) - 零线曲线的点；nx, ny 是每个点的法向量分量。

让您为上面定义的每个 t 接收两组 nx 和 ny。

最后，您将拥有一组力曲线所需的点：

```
x=x2+nx;
y=y2+ny; 
```

# windows - 如何通过 Web GUI 在 Windows 服务器上修改 .txt 文件

> ID：16053161
> 
> 赞同：1
> 
> 时间：2013-04-17T06:36:06.910
> 
> 标签：windows, user-interface, web

我需要能够读取、显示、修改和保存位于 Windows 服务器上的现有 .txt 文件的内容。我已经可以进行“读取”和“显示”位，但不能修改和保存文件。

例如 ：

文本文件位于此处：www.myserver.com/files/textfile.txt 文件内容为：one_whole_line_like_this

我当然可以通过 FTP 客户端来完成，但我需要对最终用户来说更优雅、更容易的东西，所以我希望用户能够访问（受密码保护的）网页并让它显示文本文件的当前内容。 txt （我可以做到这里），然后有一个文本框来输入新内容和一个“提交”按钮。然后提交按钮将文本框的新内容写入文件，保留其原始名称 (textfile.txt)。

目前，我一直在思考哪种方法是最好的方法，更不用说实施它了。

我非常感谢有关最简单和最优雅的方式（对于用户）的建议。一些示例代码也将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:42:28.793

我在这个答案中假设您有一个功能 Web 服务器。否则，我建议安装[Apache](http://www.apache.org/)。如果您需要帮助设置它，网上有很多[说明。](http://techblog.ankitaoza.com/2011/08/08/install-apache-php-on-window-server-2008-r2/)Apache 本身可以创建受密码保护的网页。但是，您需要一个 SSL 扩展来实际加密信息。您还需要[PHP](http://php.net/manual/en/install.windows.apache2.php)，您将使用它在服务器上保存新文件。您也可以将所有这些作为一体式软件包获得，例如[WAMP](http://www.wampserver.com/en/)。

如果或当您有一个正常运行的 Web 服务器时，您将在实际网页中使用[HTML](http://www.w3schools.com/html/)、[CSS](http://www.w3schools.com/css/)、[Javascript](http://www.w3schools.com/js/)和[PHP的混合体。](http://www.w3schools.com/php/)

一般 id 是您有一个使用该网页的客户端。在客户端的网页上，您将拥有一个将数据发送回您的服务器的脚本。在服务器上，您将有另一个脚本接收数据，然后将其存储到您想要的文件中。

首先，您需要设计客户将要访问的页面。你可以用[HTML](http://www.w3schools.com/html/)和[CSS](http://www.w3schools.com/css/)做到这一点。您将使用[HTML](http://www.w3schools.com/html/)添加文本框和其他内容，并使用[CSS](http://www.w3schools.com/css/)更改其在页面上的外观。

一个 HTML 示例：

```
<html>
<body>
    <textArea>My first html page!</textArea>
    <button>Submit</button>
</body>
</html> 
```

一个 CSS 示例：

```
body { background-color: black; }
textArea { width:50%; } 
```

然后，您将在浏览器上使用[Javascript收集文本框中的信息。](http://www.w3schools.com/js/)然后，您将该请求发送到服务器上的[PHP](http://www.w3schools.com/php/)脚本。在[PHP](http://www.w3schools.com/php/)脚本中，您将数据保存到文件请求中。这是一个使用[Javascript](http://www.w3schools.com/js/)和[Jquery - Javascript 扩展](http://www.w3schools.com/jquery/)的粗略示例：

```
<script>

/*
    The $( "#submitButton" ) is executed every time the user clicks the div that is
    associated with it.

    The text in the textbox is returned from $( "#submitBox" ).text( );

    in $.post, here's what's happening

    $.post( ( script name ), ( data to be sent to script ) )

    So when your executing $.post( "php_file.php", new_text:$("#submitBox").text() )

    You're starting a script called php_file.php and sending the text in text box to a 
    variable called new_text.
*/
$( "#submitButton ).click( function( ){

    $.post( "php_file.php", new_text : $( "#submitBox" ).text( ) );

});

</script> 
```

PHP 脚本

```
<?php
file_put_contents( "filename.txt", $_POST[ "new_text" ] );
?> 
```

由于这些只是代码片段，我建议您阅读 HTML、CSS、Javascript 和 PHP。[您会在W3schools](http://w3schools.com/)（以及其他网站）上找到很多信息。我建议首先关注 HTML，在您的家用计算机上使用它（即在您的计算机上创建一个 .html 文本文件并在浏览器上打开它）。如果您在此过程中遇到问题，这是一个很好的网站，可以在其他所有方法都失败时发布您的问题。

# javascript - jQuery数据表自定义排序和过滤

> ID：16053164
> 
> 赞同：4
> 
> 时间：2013-04-17T06:36:32.107
> 
> 标签：javascript, jquery, asp.net, datatable, datatables

我在我的 MVC4 应用程序中使用 jquery 数据表。最简单的jquery数据表配置。

事实上，我已经将这个小的 jquery 片段放在了我的 layout.cshtml 文件中，它将处理我的应用程序中的所有表，而无需进行任何自定义。

```
$(".dataTable").dataTable({
   "bJQueryUI": true,
   "sPaginationType": "full_numbers"
}).columnFilter(); 
```

当我用`<thead>, <tbody> and <tfoot>.`

这是图像：![在此处输入图像描述](https://i.stack.imgur.com/v2qku.png)

当然，并不是所有的东西都可以使用这个基本配置。

* * *

## 问题

付款状态列不仅包含一些文本，还包含一个跨度和一个隐藏的下拉列表。单击`<td>`，跨度被隐藏并且下拉列表变得可见。在下拉更改时，它会恢复为可见的跨度和隐藏的下拉列表。

编码 ：

```
 <td class=" " paymentid="106">
            <span>
                Completed
            </span>

           <select name:"paymentstatus"="" style="display:none;" onchange="changepaymentStatus($(this).parent().attr('paymentId'),$(this).val(),10);">
               <option value="0" selected="'selected'">Completed</option>
               <option value="1">Pending</option>
               <option value="2">Cancelled</option>
           </select>
        </td> 
```

![在此处输入图像描述](https://i.stack.imgur.com/ayGgV.png)

由于`<td>`元素中存在所有这些混乱，它根本无法过滤（对于该列并且排序工作不正确（对于该列）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:14:23.807

您好，看看这个[http://datatables.net/examples/plug-ins/sorting_sType.html](http://datatables.net/examples/plug-ins/sorting_sType.html)这将为您完成这项工作。

# ios - 调用了 MKMapView 委托的 viewForAnnotation 方法，但两个参数均为 nil

> ID：16053165
> 
> 赞同：0
> 
> 时间：2013-04-17T06:36:31.940
> 
> 标签：ios, mapkit, mkannotation, mkannotationview

正如标题所说的方法

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView1 viewForAnnotation:(id <MKAnnotation>)annotation { 
```

被调用，mapView1和注解都是nil

我在 viewDidAppear 方法中以通常的方式添加一个注释：

```
 [mapView addAnnotation:_a]; 
```

尝试了两种注释实现——自定义和标准。这是标准注释使用：

```
MKPointAnnotation *_aa=[[MKPointAnnotation alloc]init];
CLLocationCoordinate2D coordinates;
coordinates.latitude=39.281520;
coordinates.longitude= -76.580806;
_aa.coordinate= coordinates;
_aa.title=@"annotation 2";

[mapView addAnnotation:_aa]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:32:52.173

**MapAnnotation.h**

```
 #import <Foundation/Foundation.h>
        #import <MapKit/MKAnnotation.h>

        @interface MapAnnotation : NSObject <MKAnnotation>
        @property(nonatomic, assign)    CLLocationCoordinate2D coordinate;
        @property(nonatomic, copy)      NSString *title;
        @property(nonatomic, copy)      NSString *subtitle;

    -(id)initWithCoordinate:(CLLocationCoordinate2D)Region withtitle:(NSString *)Title andSubTitle:(NSString *)SubTitle ; 
```

**MapAnnotation.m**

```
@implementation EventAtPlacesAnnotation
@synthesize title = _title, subtitle = _subtitle,coordinate = _coordinate;

 -(id)initWithCoordinate:(CLLocationCoordinate2D)Region withtitle:(NSString *)Title andSubTitle:(NSString *)SubTitle 
{

    self = [super init];
    if(self){
        _title = Title;
        _subtitle = SubTitle;
        _coordinate = Region;
    }
    return self;
} 
```

从您使用地图视图的类中分配值

```
 CLLocationCoordinate2D newCoordinate = CLLocationCoordinate2DMake(40.56, 90.83);

    MapAnnotation *firstannotation = [[MapAnnotation alloc]initWithCoordinate:newCoordinate withtitle:@"Place 1" andSubTitle:@"Near To empire state"];

[myMapview addAnnotation:firstannotation]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:10:57.290

事实证明，在拖入 UI 构建器时，某些“魔法”被破坏了。重新构建屏幕和控制器，现在一切都像宣传的那样工作。

# c - C 简介：连续提示输入

> ID：16053166
> 
> 赞同：0
> 
> 时间：2013-04-17T06:36:32.290
> 
> 标签：c, loops, prompt

我想在 ANSI C 中编写一个提示用户输入的代码。首先，我想打印提示。然后，我想回显提示并循环，仅当输入并回显字符时。

我知道要进行无限循环，我必须将 while() 的条件设置为始终为真的东西，例如 while(1)

但是，当我测试我的代码时，似乎我一遍又一遍地循环打印“输入一个字符”。对 C 的新手有什么建议吗？

```
#include <stdio.h>

int main()
{

char mychar;

while(1)
    printf("Enter a characater:\n");
    scanf("%c", &mychar);
    printf("%c", &mychar)
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T06:37:39.953

C 中的块不是基于缩进的（例如在 python 中）。块必须以 开头`{`和结尾`}`，如下所示：

```
while(1)
{
    printf("Enter a characater:\n");
    scanf("%c", &mychar);
    printf("%c", mychar);// NOTE the missing `&` in front of `mychar` here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:47:35.417

You should use an editor or an IDE which can autoformat/autoindent entire source files. If you had such a thing, you would have immediately seen the problem, because your code would look like this:

```
int main()
{
  char mychar;

  while(1)
    printf("Enter a characater:\n");
  scanf("%c", &mychar);
  printf("%c", &mychar)
} 
```

And this is a mistake even experienced C programmers sometimes make, so having the simple cure (autoindent/autoformat code) for it is important even in future.

* * *

Unrelated problem, you pass pointer to char for `%c` format specifier in your latter `printf`. You should enable warnings on your compiler, it would warn you about that.

# javascript - 如何使用 javascript 从 sqlite 数据库中获取值

> ID：16053168
> 
> 赞同：1
> 
> 时间：2013-04-17T06:36:41.383
> 
> 标签：javascript, android, database, sqlite, cordova

我们应该如何使用我们在android中给出的java脚本从sqlite中获取值。

```
instance name = db.arraylistname(id);
column name =  instance name.get(0).get("column name"); 
```

我们应该如何在java脚本中给出它？

我们如何像在 android 中那样设置文本，例如，

```
text_view.setText(column name); 
```

我们应该如何在 java 脚本中给出它？而我已经将文本作为列表视图的数据给出。

相反，“列名”中的所有数据都应该被视为一个列表视图。

通常，我们应该如何为标签设置文本，就像我们为 android 中的文本视图设置文本一样。

我的意思是我想从数据库中获取一个值并将其放在 para 标记的内容中`<p>....</p>`

请..帮助..我不知道。

当我使用以下编码检索数据时

```
var len = results.rows.length;
for (var i = 0; i < len; ++i) 
{
    var obj = results.rows.item(i);
    console.log(+obj);               
} 
```

我在日志中得到以下信息

```
04-17 11:54:59.416: D/CordovaLog(23307): Returned rows = 2
04-17 11:54:59.416: I/Web Console(23307): Returned rows = 2 at file:///android_asset/www/index.html:33
04-17 11:54:59.416: D/CordovaLog(23307): NaN
04-17 11:54:59.416: I/Web Console(23307): NaN at file:///android_asset/www/index.html:38
04-17 11:54:59.427: D/CordovaLog(23307): NaN
04-17 11:54:59.427: I/Web Console(23307): NaN at file:///android_asset/www/index.html:38
04-17 11:54:59.427: D/CordovaLog(23307): No rows affected!
04-17 11:54:59.427: I/Web Console(23307): No rows affected! at file:///android_asset/www/index.html:44 
```

我得到**NaN**而我应该将数据输入到表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:55:39.407

嗯，我找到了这个问题前半部分的答案，

如果我们想要表中的 id，我们需要为 phonegap 编码

```
function querySuccess(tx, results) 
{
    var len = results.rows.length;
    console.log("DEMO table: " + len + " rows found.");
    for (var i=0; i<len; i++)
    {
         console.log("Row = " + i + " id = " + results.rows.item(i).id);
     }
} 
```

检索值的确切代码是..

```
" id = " + results.rows.item(i).id 
```

# jquery - 使用 jQuery 防止默认和提交表单

> ID：16053170
> 
> 赞同：0
> 
> 时间：2013-04-17T06:36:49.157
> 
> 标签：jquery, forms, submit, uploadify, preventdefault

我在 jQuery 中提交火有问题：

```
$(document).ready(function() {
                    $('#zestaw-edytuj-form').submit(function(e) {
                        e.preventDefault();
                        $('#ip_dilmarbundle_zestawytype_path').uploadify('upload');
                    });

                    $('#ip_dilmarbundle_zestawytype_path').uploadify({
                        'swf'      : '{{ asset("js/uploadify/uploadify.swf") }}',
                        'uploader' : '{{ path('upload-image') }}',
                        'folder'   : '{{ asset("images") }}',
                        'auto'     : false,
                        'onUploadSuccess' : function(file,data,response) {
                            $('#ip_dilmarbundle_zestawytype_zdjecie').attr('value',file.name);

                        },
                        'onUploadComplete' : function(file) {
                            $('#zestaw-edytuj-form').submit();
                        },
                        'onUploadError' : function(file, errorCode, errorMsg, errorString) {

                        },
                    });
                }); 
```

首先，点击提交按钮后，我需要阻止默认并上传图片。上传完成后（onUploadComplete）我需要正常提交表单。但是当图片上传时，提交不会触发。我能用它做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:45:51.583

Try this:

**EDITED**: fixed this too: a trailing , here at the end of 'onUploadError : func(){},'

```
$(document).ready(function() {
    var ready = false;

$('#zestaw-edytuj-form').submit(function(e) {
    if(!ready){
        e.preventDefault();
        $('#ip_dilmarbundle_zestawytype_path').uploadify('upload');
    }
});

$('#ip_dilmarbundle_zestawytype_path').uploadify({
    'swf'      : '{{ asset("js/uploadify/uploadify.swf") }}',
    'uploader' : '{{ path('upload-image') }}',
    'folder'   : '{{ asset("images") }}',
    'auto'     : false,
    'onUploadSuccess' : function(file,data,response) {
        $('#ip_dilmarbundle_zestawytype_zdjecie').attr('value',file.name);

    },
    'onUploadComplete' : function(file) {
        ready = true;
        $('#zestaw-edytuj-form').submit();
    },
    'onUploadError' : function(file, errorCode, errorMsg, errorString) {

    }
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-21T13:18:14.647

我相信你在这里有一个提交循环的公式，如果它可以工作的话。几个建议。您可以将表单分成两种形式（单独的表单标签），一种用于文件上传，另一种用于输入数据。文件上传完成后，提交数据表单。然而，最好的方法可能是使用uploadify，您可以发送其他附加数据作为参数，以便您处理文件上传的同一脚本也可以处理传入数据。你可以得到表单参数`var myform = $(this).serializeArray()`，我相信参数是`formData`这样的，你可以`'formData':myform`在 uploadify() 配置参数中设置它。（参考：Uploadify 网站现已关闭[http://www.uploadify.com/documentation/uploadify/formdata/](http://www.uploadify.com/documentation/uploadify/formdata/)。

# visual-studio-2010 - 在不保持文件打开的情况下托管 C++ 重命名重构

> ID：16053172
> 
> 赞同：1
> 
> 时间：2013-04-17T06:36:57.210
> 
> 标签：visual-studio-2010, refactoring, managed-c++, visual-assist, visual-assist-x

我目前正在使用 Visual Studio 2010 和 Visual Assist X 在托管 C++ 代码中进行重命名重构。对于在代码中不经常使用的小型代码库或重命名项目，它工作得很好。

重命名在大型代码库中经常使用的项目几乎是不可能的，因为 Visual Assist 会保持每个更改的文件都处于打开状态和未保存状态。这意味着如果有很多文件打开，下一个文件需要更长的时间才能打开。

由于我使用的是版本控制，这对我来说没有意义，因为如果出现问题，我可以恢复所有更改。

有没有办法在不保持文件打开的情况下进行重构？也许还有另一个 VS 扩展？到目前为止我没有找到任何有关的信息...

例如：我有一个包含大约 100 个项目的解决方案，如果我重命名一个经常使用的类，Visual Assist X 的重命名执行大约需要 30 分钟或更长时间。它会打开每个必须更改的文件。重命名运行的时间越长，在 VS 中打开的文件就越多，打开另一个文件所需的时间就越长......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:46:48.603

至少有一个解决方法。

当我打开太多选项卡时，我会通过 Window / Windows ... 关闭它们，然后按 Ctrl+A，取消选择一两个需要的窗口，然后“关闭窗口”。

此外，我过度使用 File / Save All。我已将它映射到 Ctrl+Shift+S 但我不确定这是否是标准的。

# objective-c - NSDate 未格式化并获得为零

> ID：16053174
> 
> 赞同：0
> 
> 时间：2013-04-17T06:37:04.353
> 
> 标签：objective-c, ios6, nsdate, nsdateformatter

我从另一个 uiview 获取日期并设置日期格式并添加事件。

但是，它给出了零。

这是我的代码

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"dd-MM-yyyy"];

EKEventStore *store = [[EKEventStore alloc] init];
EKEvent *event = [EKEvent eventWithEventStore:store];
event.startDate = [formatter dateFromString:eventDate]; 
```

这是日志

```
 (lldb) po eventDate
  $0 = 0x0b555f60 2013-04-19
  (lldb) po [formatter dateFromString:eventDate]
  $1 = 0x00000000 <nil>
  (lldb) 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:40:47.123

您的字符串格式和您在日期格式化程序中指定的格式必须匹配。

将日期格式化程序的格式设置`yyyy-MM-dd`为与您希望转换为日期的字符串相匹配。

# php - 需要一个正则表达式从 php 中的图像 url 获取宽度和高度

> ID：16053175
> 
> 赞同：0
> 
> 时间：2013-04-17T06:37:05.127
> 
> 标签：php, regex, wordpress

我的形象课

$温度=`<img class="alignnone wp-image-6" alt="2166105529_70dd50ef4b_n" src="http://192.168.1.12/wordpress/wp-content/uploads/2013/03/2166105529_70dd50ef4b_n-300x175.jpg" width="180" height="105">`

我想从 url 中获取宽度和高度，`width="180"`即`height="105"`

我已经使用了 src 部分

`preg_replace('/<img\s.*?\bsrc="(.*?)".*?>/si', $temp, $matches);`

$matches= 它包含像这样提取的 src

```
http://192.168.1.12/wordpress/wp-content/uploads/2013/03/2166105529_70dd50ef4b_n-300x175.jpg 
```

现在如何使用正则表达式或任何其他也接受的方法来提取宽度和高度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T06:54:41.967

在 php 中使用 dom 类是一种更好的方法。更容易使用。示例：[http ://sandbox.onlinephpfunctions.com/code/c6d89fc6e0803ac38a3bc1ea9c61e081c1b71f08](http://sandbox.onlinephpfunctions.com/code/c6d89fc6e0803ac38a3bc1ea9c61e081c1b71f08)

```
$dom = new DOMDocument();
$dom->loadHTML('<img class="alignnone wp-image-6" alt="2166105529_70dd50ef4b_n" src="http://192.168.1.12/wordpress/wp-content/uploads/2013/03/2166105529_70dd50ef4b_n-300x175.jpg" width="180" height="105">');

$img = $dom->getElementsByTagName('img');

$src= $img->item(0)->getAttribute('src'); 
$width= $img->item(0)->getAttribute('width'); 
$height= $img->item(0)->getAttribute('height'); 

echo $src ."<br/>";
echo $width."<br/>";;
echo $height."<br/>";; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T06:54:13.017

我更喜欢为此使用 PHP 的[DOM](http://php.net/dom)扩展，因为它更可靠，并且知道如何正确解析 HTML，并且对字符集有所了解。

```
<?php

$temp='<img class="alignnone wp-image-6" alt="2166105529_70dd50ef4b_n" src="http://192.168.1.12/wordpress/wp-content/uploads/2013/03/2166105529_70dd50ef4b_n-300x175.jpg" width="180" height="105">';

$dom = new \DomDocument;
$dom->loadHTML($temp);

$img = $dom->getElementsByTagName('img')->item(0);

// Note: Values are returned as strings, not as numbers
$src = $img->getAttribute('src');
preg_match('/(.+)-([0-9]+)x([0-9]+)\.jpg$/', $src, $matches);

$width = $matches[2];
$height = $matches[3]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:51:56.270

你可以做

```
list($height, $width) = explode("x",substr(strrchr( $url , "-" ),1,-4)); 
```

如果我误解了，您需要从属性中获取它，而不是图像的实际 url，那么

```
$url= '<img class="alignnone wp-image-6" alt="2166105529_70dd50ef4b_n" src="http://192.168.1.12/wordpress/wp-content/uploads/2013/03/2166105529_70dd50ef4b_n-300x175.jpg" width="180" height="105">';

echo substr(strstr( $url , "width" ),0,-1); 
```

会回声

```
width="180" height="105" 
```

# c# - NopCommerce：如何将此网关的返回字段映射到 Nop 的预期？

> ID：16053176
> 
> 赞同：4
> 
> 时间：2013-04-17T06:37:05.397
> 
> 标签：c#, e-commerce, payment-gateway, nopcommerce

**背景**

我正在为[NopCommerce](http://www.nopcommerce.com/default.aspx) 2.80 编写支付网关插件。这是我第一次为支付网关编写代码。我快到了，但有一些问题。

**问题**

*   首先，在`ProcessPayment`方法中，我需要返回 a `ProcessPaymentResult`，它具有以下属性（有人可以向我解释一下它们之间的区别吗？）：

`AuthorizationTransactionCode`

`AuthorizationTransactionId`

`AuthorizationTransactionResult`

`CaptureTransactionId`

`CaptureTransactionResult`

我需要实现的网关（Tranzila）返回以下字段：

`ConfirmationCode`

`AuthNumber`

`RefNumber`

`TempRef`

以及其他一些可能不适用于这种情况的人。我不知道如何将这些映射到 Nop 的期望......

*   其次，`Capture`方法是什么？我看过`PayPalDirect`插件，但不是很清楚。什么时候调用这个方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T17:40:56.157

在验证 if`processPaymentResult.Success`为真后，此字段将保存到订单中。所有这些都是可选的，但如果您想在 nopcommerce 中的订单和 Tranzila 中的支付交易之间有某种参考，则需要包含它们。

*   `AuthorizationTransactionId`（可选）是您生成的唯一 ID，如果您想记录交易

*   `AuthorizationTransactionCode`是支付网关生成的唯一交易 ID。在你的情况下，它可能是`RefNumber`. 但我会仔细检查。

*   `AuthorizationTransactionResult`是支付网关返回的整个响应。您可以只保存文本或整个 XML 响应。这又是一次，仅供将来参考。

其他 2 个字段用于延期付款。它们是在“管理员”从管理面板中获取资金时设置的。

*   `CaptureTransactionId`支付网关生成的交易代码
*   `CaptureTransactionResult`该交易的全部信息

# regex - 正则表达式匹配特定的起始词或什么都不匹配

> ID：16053177
> 
> 赞同：1
> 
> 时间：2013-04-17T06:37:06.053
> 
> 标签：regex

我正在努力为以下场景提出正确的正则表达式。

假设您必须匹配一个以 http- 开头的单词，或者什么都不匹配

例如：http-test-data, test-data 应该是匹配的，但 xyz-test-data 不应该是匹配的

到目前为止我提出的正则表达式是

(?:http-)?(测试数据)

但它也匹配 xyz-test-data。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:52:49.633

您可以简单地使用以下内容：

```
(?:http-|^)(test-data) 
```

这会测试`http-`字符串的正向后视或 before 的开头`test-data`。

例如，对于如下示例数据：

```
http-test-data
xyz-test-data
http-test-data
xyz-test-data
test-data
yes-yes-test-data
-test-data 
```

它产生：

```
http-test-data
http-test-data
test-data 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T06:46:48.770

Try this representation

```
^(http-|)(test-data) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:39:01.690

是的，`?`因为`(?:http-)`. 然后正则表达式也将匹配任何包含`test-data`.

# c++ - 在 C++ 代码中使用“$”符号是否安全？

> ID：16053179
> 
> 赞同：1
> 
> 时间：2013-04-17T06:37:12.050
> 
> 标签：c++, visual-studio

我的代码中的某些内容（变量、函数等）需要一个特殊符号。我注意到 '$' 是一个合法符号，但只是想知道是否建议使用它（以后不会与其他东西冲突？）。

我正在使用 VStudio，并且我知道 VS 在某些事情上使用 $（例如片段等，尽管我不打算使用它们）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:12:36.637

Microsoft VC++ 编译器也允许使用`$`符号。阅读：http: [//msdn.microsoft.com/en-us/library/565w213d.aspx](http://msdn.microsoft.com/en-us/library/565w213d.aspx)。因此，如果您在 MS 环境中工作，没问题，您可以将其用作其他支持的对象，例如 AZ、az、0-9、_

编辑：但有一件事，如果其他程序员将来可能会看到您的代码并且可能会混淆（因为某些编程语言（例如 PHP `$`）用作键符号）。并且还建议对标识符（**`Write programs for peoples first, computer second - Steve McConnell`**）使用含义全名。所以如果你重新考虑使用`$`符号，如果它让你的名字难看，那就打吧。而且它也可能导致可移植性问题（仅在您针对多个编译器时才重要）

# objective-c - xcode 中的部署目标

> ID：16053185
> 
> 赞同：0
> 
> 时间：2013-04-17T06:37:39.533
> 
> 标签：objective-c, ios5, xcode4.6, ios6.1

我将 xcode4.6 用于视网膜显示屏幕尺寸。当我使用部署目标 5 时，我没有收到任何警告。当我使用部署目标 6.1 时，我收到警告 shouldAutoRotation 已弃用。但是我在 iphone4 &5 的同一个 viewcontroller.m 文件中同时使用了 shouldAutorotateToInterfaceOrientation 和 willAnimateRotationToInterfaceOrientation。我计划上传我的应用程序。我用于应用程序的部署目标适用于 iphone4 和 5。如果我使用部署目标 6.1，我的应用程序将在 iphone4 中运行吗？或者它只适用于iphone5？（或）应用商店拒绝我的应用或不收到警告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T06:46:51.340

It's "deployment target", not "development target". The deployment target defines the minimum version of iOS your app supports. If you set it to iOS 6.1 then your app will only work on devices that have iOS 6.1 or later installed. If you set it to iOS 5.0 then your app will run on any device with iOS 5.0 or later.

If you set the deployment target to 5.0 or 5.1 then your app must properly deal with the change in APIs. View controller rotation changed a lot in iOS 6.0\. Therefore all of your view controllers must implement the older and the new rotation related methods. If your deployment target is 6.0 or later then you don't need to add any of the older 5.x rotation related methods.

# android - android 应用程序中的 mdotm 广告集成

> ID：16053189
> 
> 赞同：0
> 
> 时间：2013-04-17T06:37:46.790
> 
> 标签：android, json, ads

我为客户端开发了一个 android 应用程序，因为我正在使用 mdotm 集成广告。但是在应用程序中无法显示直播广告，如果是测试广告，则显示成功。

## 代码

```
adView = (MdotMAdView)findViewById(R.id.mdotm_ad_view);
    request = new MdotMAdRequest();
    request.setAppKey("1e05e3a737c4f008ed68470d4c312316");// jim
    //request.setTestMode("1");// for test ads
    request.setTestMode("0");// for live ads
    request.setEnableCaching(true);
    //      request.setAdRefreshInterval(10); // here value is in seconds
    //      adView.loadAd(this, request);
    interstitial.loadInterstitial(this, request);
-------------------------------------------------------------------------------

public void loadInterstitial(MdotMAdEventListener listener, MdotMAdRequest adRequest) {
    mAdEventListener = listener;
    isInterstitialReady = false;
    MdotMNetworkManager mAdManager = MdotMNetworkManager.getInstance(mContext);
    mAdManager.setAdNetworkListener(this);
    adRequest.setLoadInterstitial(true);
    adRequest.setAdSize(MdotMUtils.getUtilsInstance().getDisplaySize(mContext));
    / //TODO remove this
    // adRequest.setAdSize(MdotMAdSize.BANNER_320_480);
    interstitialResponse = null;
    mAdManager.sendRequest(adRequest);

} 
```

如果是测试广告，这很好，但如果是实时广告，我没有得到任何响应，即响应是空的。

请检查上面的代码并帮助我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T05:38:59.893

下面的代码足以从 MdotM 获取插页式广告。可能他们没有针对您的位置定位任何实时广告。联系 MdotM Publishers Publishers *[at] mdotm [dot] com*了解更多详情。

## 代码

```
adView = (MdotMAdView)findViewById(R.id.mdotm_ad_view);
request = new MdotMAdRequest();
request.setAppKey("1e05e3a737c4f008ed68470d4c312316");// 
//request.setTestMode("1");// for test ads
request.setTestMode("0");// for live ads
request.setEnableCaching(true);
//request.setAdRefreshInterval(10); // here value is in seconds
//adView.loadAd(this, request);
interstitial.loadInterstitial(this, request); 
```

PS：这个答案来自我目前没有链接的人。他（问题编辑器）通过编辑问题而不是像我代表他那样回答而犯了错误，如果您觉得这有帮助，我们将不胜感激。

# objective-c - 应用程序在慢速 InternetConnection 上崩溃

> ID：16053190
> 
> 赞同：0
> 
> 时间：2013-04-17T06:37:48.787
> 
> 标签：objective-c

我在 applicationDidBecomeActive 方法中从服务器获取数据。当网络连接速度太慢时，应用程序不断崩溃。我不知道如何处理这个问题。任何帮助将不胜感激。提前致谢。

```
NSString *post =[[NSString alloc] initWithFormat:@"=%@@=%@",myString,acMobileno];

    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http:///?data=%@&no=%@",myString,acMobileno]];

    NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];

    [request setURL:url];
    [request setHTTPMethod:@"POST"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setHTTPBody:postData];

    NSError *error1 = [[NSError alloc] init];
    NSHTTPURLResponse *response = nil;
    NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error1];
    NSString *string;
    if ([response statusCode] >=200 && [response statusCode] <300)
            {
            string = [[NSString alloc] initWithData:urlData encoding:NSMacOSRomanStringEncoding];

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:02:44.327

它可能会崩溃，因为连接已经开始下载，但它还没有完成，因此允许编译器传递你的 if 语句，这将不可避免地给出一个 nil`urlData`参数。

要解决此问题，您应该检查是否有错误，然后检查下载的响应标头。另外，我建议在后台线程上运行此操作，这样它就不会阻碍用户体验 - 目前，应用程序将延迟启动，具体取决于文件大小和用户的下载速度。

```
NSError *error1 = nil;
NSHTTPURLResponse *response = nil;
NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error1];
NSString *string = nil;
if (error != nil && ([response statusCode] >=200 && [response statusCode] <300)){ 
    string = [[NSString alloc] initWithData:urlData encoding:NSMacOSRomanStringEncoding];
}
else {
    NSLog(@"received error: %@", error.localizedDescription);
} 
```

`dispatch_async`对于后台线程，在语句中运行上述代码，或`-sendAsynchronousRequest:`使用`-sendSynchronousRequest`.

或者，正如@Viral 所说，请求可能花费的时间太长，并且由于同步请求在加载 UI 之前未完成而导致应用程序挂起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:06:43.150

很可能是由于应用程序的委托方法中的同步调用。加载 UI 花费了太多时间（因为互联网连接速度很慢，并且您在主线程上调用 Web 服务）；因此操作系统认为您的应用程序由于 UI 无响应而挂起，并使应用程序本身崩溃。

`FirstViewController`仅出于调试目的，在您的`viewDidAppear`方法中尝试相同的代码。它应该在那里工作正常。如果是这样，您需要将调用更改为其他地方（也最好在某个后台线程或异步中）。

**编辑：**虽然，如果它在其他地方工作，您需要将调用更改为异步或后台线程上的更流畅的用户体验。

# android - 如何从文件目录在列表视图中显示真实图像

> ID：16053195
> 
> 赞同：0
> 
> 时间：2013-04-17T06:38:09.710
> 
> 标签：android

如何在文件列表中显示图像？这是我的代码，它只显示图标我想显示真实图像而不是图标我该怎么办？请帮助我如何在gridview中显示真实图像请帮助我

```
 private void inflateListView(File[] files){
    List<Map<String,Object>> listItems=new ArrayList<Map<String,Object>>();
    for(int i=0;i<files.length;i++){
        Map<String, Object> listItem=new HashMap<String, Object>();

        if(files[i].isDirectory()){

            listItem.put("icon", R.drawable.folder);

        }
        else
        {
            listItem.put("icon", R.drawable.file);
        }
        listItem.put("fileName", files[i].getName());
        listItems.add(listItem);
    }
    SimpleAdapter simpleAdapter=new SimpleAdapter(this,listItems,R.layout.line,new  
 String[]{"icon","fileName"},new int[]{R.id.icon,R.id.file_name});
    gridView.setAdapter(simpleAdapter);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:44:18.367

获取文件的路径，将其存储在 arraylist 中。有一个自定义适配器。使用路径在 grdiview 中显示图像。

我建议你使用通用图像加载器

解释：

1.  获取文件夹下文件的路径。（假设文件夹只有图像。）。将其存储在 ArrayList 中。将数组列表和活动上下文传递给您的适配器构造函数

2.  有一个 CustomAdapter 说 MyAdapter 扩展了 BaseAdapter。为每一行膨胀一个自定义布局，并根据位置显示 iamge。

3.  使用通用图像加载器，如下所示

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)。

```
ArrayList<String> f= new ArrayList<String>
private File[] listFile; 

public void getFromSdcard()
{
    File file=  new File(android.os.Environment.getExternalStorageDirectory(),"TTImages_cache");

        if (file.isDirectory())
        {
            listFile = file.listFiles();

            for (int i = 0; i < listFile.length; i++)
            {

                f.add(listFile[i].getAbsolutePath());

            }
        }
}

    adapter=new LazyAdapter(Activity.this,thumb);
gridView.setAdapter(adapter); 
```

在您的 CustomAdapter

```
private Activity activity;
private ArrayList<String> data = new ArrayList<String>();
private LayoutInflater inflater=null;
public ImageLoader imageLoader; 
DisplayImageOptions options;

public LazyAdapter(Activity a, ArrayList<String> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    File cacheDir = StorageUtils.getOwnCacheDirectory(a, "MyRaghu");

 // Get singletone instance of ImageLoader
   imageLoader = ImageLoader.getInstance();
 // Create configuration for ImageLoader (all options are optional)
    ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(a)
              // You can pass your own memory cache implementation
             .discCacheExtraOptions(1024, 1024, CompressFormat.PNG, 100)
             .discCache(new UnlimitedDiscCache(cacheDir)) // You can pass your own disc cache implementation
             .discCacheFileNameGenerator(new HashCodeFileNameGenerator())
             .enableLogging()
             .build();
 // Initialize ImageLoader with created configuration. Do it once.
 imageLoader.init(config);
    //imageLoader.init(ImageLoaderConfiguration.createDefault(a));
   // imageLoader=new ImageLoader(activity.getApplicationContext());
    options = new DisplayImageOptions.Builder()
    .showStubImage(R.drawable.ic_launcher)
    .cacheInMemory()
    .cacheOnDisc()
    .displayer(new RoundedBitmapDisplayer(20))
    .build();
  } 
```

在你的 getView

```
public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
     vi = inflater.inflate(R.layout.rowimage, null);

    ImageView image=(ImageView)vi.findViewById(R.id.ivv); 
    ProgressBar pb= (ProgressBar)vi.findViewById(R.id.pb); 
    //imageLoader.displayImage(data.get(position).toString(), image,options);

    return vi;
} 
```

# mongodb - 在 mongodb c# 驱动程序中使用 InsertBatch 方法的最佳批量项目数是多少？

> ID：16053197
> 
> 赞同：7
> 
> 时间：2013-04-17T06:38:21.130
> 
> 标签：mongodb, bulkinsert, mongodb-.net-driver

我听说大批量并没有真正提供任何额外的性能

什么是最佳的？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-17T12:37:33.160

如果您调用 Insert 一次插入一个文档，则每个文档都有一个网络往返。如果您调用 InsertBatch 以批量插入文档，则每个批次而不是每个文档都有一个网络往返。InsertBatch 比 Insert 更有效，因为它减少了网络往返次数。

假设您必须插入 1,000,000 个文档，您可以分析不同批量大小的网络往返次数：

*   批量大小 1：1,000,000 次往返
*   批量大小 10：100,000 次往返
*   批量大小 100：10,000 次往返
*   批量大小 1000、1000 次往返
*   ETC...

因此，您会看到，即使是小至 10 的批大小也已经消除了 90% 的网络往返，而 100 的批大小已经消除了 99% 的网络往返。

这是一个稍微简化的分析，因为它忽略了随着批量大小增加，消息大小也会增加的事实，但它或多或少是准确的。

我认为没有任何*一种*最佳批量大小。我会说更大的批次性能更高，但是一旦每批次有 10-100 个文档，大批次的性能改进就会非常小。

# mysql - 如果我选择两个没有 WHERE 子句的表会发生什么？

> ID：16053200
> 
> 赞同：3
> 
> 时间：2013-04-17T06:38:24.030
> 
> 标签：mysql, sql

上周我进行了一次技术面试，面试官问我如果运行以下查询会发生什么：

`SELECT * FROM tbl1, tbl2`

我想我回答正确，但这不是一个深入的答案。

我说我会选择两个表中的所有列。例如，如果 tbl1 有 3 列，而 tbl2 有 4 列。结果集将有 7 列。

然后他问我为什么是7？我说是因为我从每张桌子上选择了所有东西。

这是一个糟糕的答案，但我想不出别的。

切入正题，在接受采访后，我使用两张表执行了后一条语句。

表 A，有 3 种动物：狗、猫和大象。

表 B 有 2 个名字：Mat 和 Beth

这是我在执行语句后得到的结果集：

```
*********************************************
| id_tbl1 | name_tbl1 | id_tbl2 | name_tbl2 |
*********************************************
|   1     |  dog      |    1    | Mat       |
|   2     |  cat      |    1    | Mat       |
|   3     |  elephant |    1    | Mat       |
|   1     |  dog      |    2    | Beth      |
|   2     |  cat      |    2    | Beth      |
|   3     |  elephant |    2    | Beth      |
********************************************* 
```

所以我的问题是，为什么声明会这样？

换句话说：

为什么表 B 的记录会重复，直到我到达表 A 的末尾，然后又重新开始？

你会如何以一种会让面试官“惊叹”的方式回答这个问题？

如果此问题不属于 SO，请随时删除或关闭它！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T06:48:02.677

如果您执行这样的选择，则一个结果集中的所有行都将连接到另一个结果集中（笛卡尔积）中的所有行。

因此，您将获得第一个表的所有行和第二个表的第一行的列表，然后是第二行的所有条目，依此类推。订单可以是实施细节。不确定是否定义了第一个顺序是由第一个表，它可能在不同的实现中有所不同。如果您连接三个（或更多）表，那么所有表的所有行都会发生同样的情况。当然，这不仅适用于表，也适用于连接的任何结果集。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T06:49:55.600

结果将是一个笛卡尔积看看这个例子

[SQL 示例](http://sqlfiddle.com/#!2/16111/1)

您可以看到有两个表，一个有 5 条记录，另一个有 4 条记录，结果是 20 条记录。表示 5 * 4 = 20 而不是您假设的 5 + 4 = 9。

表格1

```
| IDX |   VAL |
---------------
|   1 | 1val1 |
|   1 | 1val2 |
|   2 | 2val1 |
|   2 | 2val2 |
|   2 | 2val3 | 
```

表2

```
| ID | POINTS |
---------------
|  1 |      2 |
|  2 |     10 |
|  3 |     21 |
|  4 |     29 | 
```

以下查询的结果

```
SELECT * FROM Table1 , Table2

| IDX |   VAL | ID | POINTS |
-----------------------------
|   1 | 1val1 |  1 |      2 |
|   1 | 1val1 |  2 |     10 |
|   1 | 1val1 |  3 |     21 |
|   1 | 1val1 |  4 |     29 |
|   1 | 1val2 |  1 |      2 |
|   1 | 1val2 |  2 |     10 |
|   1 | 1val2 |  3 |     21 |
|   1 | 1val2 |  4 |     29 |
|   2 | 2val1 |  1 |      2 |
|   2 | 2val1 |  2 |     10 |
|   2 | 2val1 |  3 |     21 |
|   2 | 2val1 |  4 |     29 |
|   2 | 2val2 |  1 |      2 |
|   2 | 2val2 |  2 |     10 |
|   2 | 2val2 |  3 |     21 |
|   2 | 2val2 |  4 |     29 |
|   2 | 2val3 |  1 |      2 |
|   2 | 2val3 |  2 |     10 |
|   2 | 2val3 |  3 |     21 |
|   2 | 2val3 |  4 |     29 | 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T06:50:56.950

我认为您通过运行一个包含两个具有相同字段的表的示例来混淆自己。您指的是一个联合，它将一个表的值与另一个表的值结合起来，使用您的示例，这将为您提供 3 + 4 = 7 个结果。

逗号分隔的 FROM 语句正在执行 JOIN，它将遍历表 X 中的所有值并将它们与表 Y 的所有值配对。这将导致 X 的大小 * Y 的大小结果，使用您的示例这将是 3 * 4 = 12。

# c++ - 如何将模板类指针传递给同一个类

> ID：16053202
> 
> 赞同：0
> 
> 时间：2013-04-17T06:38:29.700
> 
> 标签：c++, templates

我知道以下代码中的问题，但不确定解决方案。

由于模板化参数是 MOD，因此在函数 'func' 中，对于被调用类和作为参数传递的类指针，它期望 MOD 的类型相同。

```
template <class MOD>
class Test {
    public:
        void func(Test<MOD>* _ptr);
        Test(MOD* _m, int _val);
        int ival;
    private:
        MOD* _mod;
};

template <class MOD>
Test<MOD>::Test(MOD* _m, int _val) {
   _mod = _m;
    ival = _val;
}

template <class MOD> 
void Test<MOD>::func(Test<MOD>* _ptr) {
    if(ival == _ptr->ival)
        std::cout << "Equal values " << std::endl;
    else
        std::cout << "Unequal values " << std::endl;
}

class T1 {
    public:
        Test<T1>* _test1;
        T1() : _test1(NULL) {
            _test1 = new Test<T1>(this, 4); 
        }   
        ~T1() {
            delete _test1; _test1 = NULL;
        }
};

class T2 {
    public:
public:
        Test<T2>* _test2;
        T2() : _test2 (NULL) {
            _test2 = new Test<T2>(this, 5);
        }
        ~T2() {
            delete _test2; _test2 = NULL;
        }
};

int main() {
    T1 t1;
    T2 t2;
    t1._test1->func(t2._test2);
    return 0;
} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:44:39.043

你需要这个

```
template <class MOD>
class Test {
    public:
        template<class T> void func(Test<T>* _ptr);

        Test(MOD* _m, int _val);
        int ival;
    private:
        MOD* _mod;
};

template <class MOD> 
template <class T>
void Test<MOD>::func(Test<T>* _ptr) {
    if(ival == _ptr->ival)
        std::cout << "Equal values " << std::endl;
    else
        std::cout << "Unequal values " << std::endl;
} 
```

`func`应该是模板类中的模板方法。

# apache-flex - AS3 可检查或类似可检查的非组件功能

> ID：16053204
> 
> 赞同：0
> 
> 时间：2013-04-17T06:38:37.233
> 
> 标签：apache-flex, parameters, actionscript-3

我想知道是否有任何方法可以放置“可检查”函数（不是组件）以避免选择默认值之外的另一个值。

例子：

如果我们有一个

> 函数 goToHome(typeOfTransport:String):void {
> 
> ……
> 
> }

我希望“typeOfTransport”只能选择两个值：“bus”、“car”。

所以如果它是一个组件 [Inspectable( enumeration="bus,car", defaultValue="bus" )]

但它只在自定义组件和 MXML 中起作用。

我需要一种在标准代码中执行的方法，例如我们这样做时：

> X.addEventListener([//他只出现了可能的值]

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:31:57.160

[您可以根据Christophe Herreman 的模型](http://www.herrodius.com/blog/87)创建一个`TransportTypeE`枚举

然后，您将方法定义更改为：

```
function goToHome(typeOfTransport:TransportTypeE):void {
...
} 
```

# iphone - 如何从 NSDictionary 中检索到 NSArray 的所有国家名称？

> ID：16053213
> 
> 赞同：-2
> 
> 时间：2013-04-17T06:39:00.523
> 
> 标签：iphone, ios, nsmutablearray, nsdictionary

这是我的字典结果。

```
"continent_code" = EU;
"country_code" = gb;
"country_id" = 169;
"country_name" = "United Kingdom";

NSString *responseString = [[NSString alloc] initWithData:responseData      
encoding:NSUTF8StringEncoding];
NSDictionary *LoginResult = (NSDictionary*)[responseString JSONValue]; 
```

我只想从字典中检索国家名称到 NSArray。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:10:43.533

**填写countryArray**的正确方法：

```
NSError* error;
NSDictionary* json = [NSJSONSerialization JSONObjectWithData:yourResponseData options:kNilOptions error:&error];
NSArray* getMAS_CR = [(NSDictionary*)json objectForKey:@"yourKeyRootResult"];
NSMutableArray *countryArray = [[NSMutableArray alloc]init];
for (NSDictionary *rr in getMAS_CR)
{
    NSString *cName = [NSString stringWithFormat:@"%@",[rr objectForKey:@"country_name"]];
    [countryArray addObject:cName];
}
NSLog(@"countryArray :: %@",countryArray); 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:48:32.427

尝试这个 ：：

```
NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData:webData options:NSJSONReadingMutableContainers error:&error];

NSLog(@" Value :: %@", [[jsonArray JSONRepresentation] JSONValue]);

for (NSDictionary *item in jsonArray) {
   NSLog(@" Item :::::> %@", [item objectForKey:@"country_name"]);
} 
```

希望，它会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:50:08.727

```
 NSMutableArray *wholeJsonArray = [LoginResult objectForKey:@"RootName"];
 NSMutableArray *loginArray = [[NSMutableArray alloc]init];

 for(int i = 0 ; i<[loginArray count];i++)
    {
        NSString *countryName=[[loginArray objectAtIndex:i]objectForKey:@"country_name"];
       [loginArray addObject:countryName];
    } 
```

祝你好运 ！！

# sql - 在 oracle 中查找第二个（或第 n 个）最新值

> ID：16053215
> 
> 赞同：1
> 
> 时间：2013-04-17T06:39:04.737
> 
> 标签：sql, oracle, oracle11g

我已经提到[如何从表中获取第二大或第三大条目](https://stackoverflow.com/questions/4483222/how-to-get-second-largest-or-third-largest-entry-from-a-table)，但它只能通过查看**最大值**来返回。

但在这里我需要一个使用另一个字段的最大值的 sql 查询（这里的 id 是一个序列）。

这是表 my_test ![在此处输入图像描述](https://i.stack.imgur.com/Y1969.png)

我需要通过**id获得****sent_by**的第二大唯一值，即**100**

 **我的查询似乎不太好，我试过了

```
SELECT sent_by
FROM MY_TEST
WHERE id =
     (SELECT MAX(id)
     FROM MY_TEST
     WHERE id NOT IN
          (SELECT id
          FROM MY_TEST
          WHERE sent_by =(SELECT sent_by FROM my_test WHERE id =(SELECT MAX(id) FROM MY_TEST))
          )
     ); -- results 100 
```

有没有其他简单的方法来获得所需的？如果我需要获得第三个呢？

## **编辑**

在这里，我将更新我的问题以使您更清楚。

让我们假设给定的表是消息事务的详细信息。让 id 是唯一的并且是（序列），sent_by 插入个人/人的 id（如 user_id）。sent_by 列可能/可能不会插入具有相同 user_id 的多行。

如果我需要获取最新的 sent_by 值：我可以查询

```
select sent_by from my_test where id= (select max(id) from my_test);-- to get 60 
```

我的问题是取第二个最新的 sent_by 值：（在给定的表中，

```
the 2nd latest sent_by value should be 100, as id 8, 9, 10 are same sent_by values
the 3rd latest sent_by value should be 4, 
the 4th latest sent_by value should be 3 
```

)

希望问题现在很清楚。

提前致谢：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T07:16:46.383

如果我理解正确，请尝试以下操作：

```
select * 
from(
  select sent_by, row_number() over (order by sent_by desc, id asc) row_num
  from MY_TEST) t
where row_num = 2 -- or 3 ... n 
```

* * *

**更新**

尝试这个：

```
select * 
from(
  select sent_by, 
         rank() over (order by max(id) desc)  rk
   from MY_TEST
  group by sent_by) t
where rk = 2 -- or 3 .. n 
```

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/5d059/45)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T06:43:39.817

要找到第二个值，请尝试：

```
select * from(
  SELECT sent_by, row_number() over (order by sent_by desc) RNum
  FROM MY_TEST
  )x
WHERE RNum =2 
```

第三

```
select * from(
  SELECT sent_by, row_number() over (order by sent_by desc) RNum
  FROM MY_TEST
  )x
WHERE RNum =3 
```

是的......现在这提出了一个不同的问题。请检查我的尝试：

```
SELECT DISTINCT SENT_BY FROM(
  select ID, SENT_BY,  dense_rank() OVER(ORDER BY MaxID DESC) RNum FROM(
    SELECT ID, SENT_BY, max(ID) over (partition by sent_by order by ID desc) MaxID
    FROM MY_TEST
  )x
)xx where RNum=3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:46:29.717

Analytic functions. ROW_NUMBER() OVER() [NTH_VALUE](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions112.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T17:04:32.653

方法一：

```
select sent_by, rownum, from my_test where(rowid,0) in (select rowid, mod(rownum,4) from my_test); 
```

这将每第 4 行返回一次。如果您想要随机行，请在 in 子句中用 rownums 替换子查询。

方法二：

```
select sent_by, rownum from (select sent_by , rownum  from MY_TEST) v1 where mod(v1.rownum,4)=0; 
```

方法三：

```
select sent_by, rownum, from my_test group by sent_by, rownum having mod(rownum,n)=0 or rownum=2-n 
```

使用这些方法中的任何一种来选择第 5 行和第 9 行，这可以将第一种方法更改为以下

```
select sent_by, rownum, from my_test where rownum in(5,9); 
```**

# azure - 从 winRt 中的 azure blob 存储下载图像

> ID：16053217
> 
> 赞同：0
> 
> 时间：2013-04-17T06:39:13.957
> 
> 标签：azure, windows-8

我现在关于[azure-sdk-winRT](https://github.com/WindowsAzure/azure-sdk-for-net/tree/master/microsoft-azure-api/Services/Storage/Lib/RT)中的方法**DownloadToStreamAsync**，但我无法实现这一点。如何从 blob 存储下载图像，并保存到本地文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:01:29.113

您可以尝试以下类似的方法（非常简单的实现，没有错误检查）：

```
 CloudStorageAccount account = new CloudStorageAccount(new StorageCredentials("accountname", "accountkey"), true);
        var client = account.CreateCloudBlobClient();
        var container = client.GetContainerReference("containername");
        var blob = container.GetBlockBlobReference("imagename.ext");//e.g myimage.png
        var file = await KnownFolders.PicturesLibrary.CreateFileAsync("imagename.ext", CreationCollisionOption.ReplaceExisting);
        var stream = await file.OpenAsync(FileAccessMode.ReadWrite);
        await blob.DownloadToStreamAsync(stream);
        await stream.FlushAsync();
        stream.Dispose(); 
```

不过有几点评论：

*   上面的示例写入“图片”库。您需要确保您的 Windows 8 应用程序具有为其定义的功能。
*   尝试查看共享访问签名功能，而不是使用帐户凭据路由，特别是如果您允许应用程序的用户从您的存储帐户下载图像。

# java - 无法将 Google Maps V3 与 GWT 一起使用

> ID：16053220
> 
> 赞同：2
> 
> 时间：2013-04-17T06:39:28.293
> 
> 标签：java, google-maps, gwt, google-maps-api-3

我正在尝试让 Googlemaps v3 与 Google 网络工具包一起使用。我正在使用 GWT 2.5.1。我一直在尝试使用 GWT 搜索最新版本的 Google Maps 并最终出现在此[页面上](https://github.com/branflake2267/GWT-Maps-V3-Api)。按照那里的说明，我已经下载了这 3 个 jar 文件。

```
gwt-maps-api-v3-3.8.1-javadoc.jar
gwt-maps-api-v3-3.8.1-sources.jar
gwt-maps-api-v3-3.8.1.jar 
```

**我已将这些 jar 文件放在我的 WEB-inf 中** ![在此处输入图像描述](https://i.stack.imgur.com/4aHY0.png)

**我已将这些 jar 文件添加到我的类路径中** ![在此处输入图像描述](https://i.stack.imgur.com/1ZDW5.png)

在我的**map_geolocation.gwt.xml 中**，我继承了该模块。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE module PUBLIC "-//Google Inc.//DTD Google Web Toolkit 2.5.1//EN" "http://google-web-toolkit.googlecode.com/svn/tags/2.5.1/distro-source/core/src/gwt-module.dtd">
<module rename-to="map_geolocation">
    <inherits name="com.google.gwt.user.User" />
    <inherits name="com.google.maps.gwt.GoogleMaps" />
    <source path="client" />
    <entry-point class="com.google.maps.gwt.samples.basics.client.MapGeolocation" />
</module> 
```

当我尝试运行我的代码时，我得到了这个错误。

```
Loading modules
   com.google.maps.gwt.samples.basics.map_geolocation
      Loading inherited module 'com.google.maps.gwt.samples.basics.map_geolocation'
         Loading inherited module 'com.google.maps.gwt.GoogleMaps'
            [ERROR] Unable to find 'com/google/maps/gwt/GoogleMaps.gwt.xml' on your classpath; could be a typo, or maybe you forgot to include a classpath entry for source?
         [ERROR] Line 6: Unexpected exception while processing element 'inherits 
```

在做了一些研究后，我继承了

```
<inherits name='com.google.gwt.maps.Maps' /> 
```

代替

```
<inherits name="com.google.maps.gwt.GoogleMaps" /> 
```

仍然失败。有谁知道发生了什么？

**更新：我不关心使用 V3。我在哪里可以找到 GWT 的最新稳定版 Google 地图插件？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T08:43:14.550

1-您只需要一个 jar，从 maven repos 下载最新版本，然后在您的类路径中放入一个 jar： [gwt-maps-api-3.10.0-alpha-6.jar](http://search.maven.org/remotecontent?filepath=com/github/branflake2267/gwt-maps-api/3.10.0-alpha-6/gwt-maps-api-3.10.0-alpha-6.jar)

2-`gwt-maps-api`取决于`gwt-ajaxloader`所以[下载](http://code.google.com/p/gwt-google-apis/wiki/Downloads)它，解压缩，然后将`gwt-ajaxloader.jar`文件添加到你的类路径。

3-检查您是否在`.gwt.xml`文件中继承了正确的模块：

```
<inherits name='com.google.gwt.maps.Maps' /> 
```

4- 通常，在你的 Eclipse 中，GWT sdk 的类路径应该在 3party 库之前

5-`[ERROR] Unable to find '....gwt.xml' on your classpath`始终是类路径的问题。stackoverflow 中有很多关于这个常见问题的答案。

完成此操作后，如果您的问题仍然存在，请尝试删除项目的“运行方式”配置并重新设置。

# java - 如何判断程序何时终止？

> ID：16053224
> 
> 赞同：1
> 
> 时间：2013-04-17T06:39:46.590
> 
> 标签：java, command-line, exit

因此，我正在开发一个必须处理用户统计信息和其他数据的命令行服务器程序，并且我有一个命令来停止服务器并将用户统计信息和数据保存到文件中。我想知道的是，是否有一种方法可以在不使用 stop 命令的情况下终止服务器时也保存用户统计信息和数据。我尝试创建一个新进程并查找该进程何时终止，但它没有告诉我服务器何时终止。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:42:10.867

我假设您正在谈论某人`Ctrl+C`的程序或以意外方式终止程序的情况。我知道处理这种情况的最好方法是使用[Shutdown Hook](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)。

从文档中：

> 当虚拟机开始其关闭序列时，它将以某种未指定的顺序启动所有已注册的关闭挂钩并让它们同时运行

但这有可能对您不起作用，因为文档还说：

> 在极少数情况下，虚拟机可能会中止，即在没有完全关闭的情况下停止运行。当虚拟机在外部终止时会发生这种情况，例如在 Unix 上使用 SIGKILL 信号或在 Microsoft Windows 上使用 TerminateProcess 调用。如果本地方法出错，例如破坏内部数据结构或尝试访问不存在的内存，虚拟机也可能中止。如果虚拟机中止，则无法保证是否会运行任何关闭挂钩。

# php - 排序多维关联数组

> ID：16053229
> 
> 赞同：0
> 
> 时间：2013-04-17T06:40:06.013
> 
> 标签：php, multidimensional-array, key, associative-array, array-multisort

我想按价格订购这个数组并保留我的密钥而不改变它们。

这是我一直在使用的。

```
<?php 

$a = array(
        1=>array('price'=>9.25,'timestamp_added'=>1301945848,'name'=>'pencils'),
        4=>array('price'=>19.15,'timestamp_added'=>1299267448,'name'=>'crayon box'),
        15=>array('price'=>4.25,'timestamp_added'=>1299785848,'name'=>'markers'),
        2=> array('price'=>4.28,'timestamp_added'=>1299785848,'name'=>'eraser'),
        44=>array('price'=>13.99,'timestamp_added'=>1299872248,'name'=>'trapper'),
        32=>array('price'=>9.25,'timestamp_added'=>1299872248,'name'=>'notebook'),
        14=>array('price'=>13.99,'timestamp_added'=>1301945848,'name'=>'sharpener'),
        5=>array('price'=>15.01,'timestamp_added'=>1299872248,'name'=>'calculator')
);

function printList( $a ){
    echo "<br />";
    foreach ($a as $key => $value){
        echo "<br /> Product ID $key Price: " . $value['price'] . " Timestamp: " . $value['timestamp_added'] . " Name: " . $value['name'];
    }

}

printList( $a );
$price = array();
foreach ($a as $key => $row)
{
    $price[$key] = $row['price'];
}
array_multisort($price, SORT_ASC, $a);
printList( $a );
?> 
```

输出：

```
Product ID 1 Price: 9.25 Timestamp: 1301945848 Name: pencils
Product ID 4 Price: 19.15 Timestamp: 1299267448 Name: crayon box
Product ID 15 Price: 4.25 Timestamp: 1299785848 Name: markers
Product ID 2 Price: 4.28 Timestamp: 1299785848 Name: eraser
Product ID 44 Price: 13.99 Timestamp: 1299872248 Name: trapper
Product ID 32 Price: 9.25 Timestamp: 1299872248 Name: notebook
Product ID 14 Price: 13.99 Timestamp: 1301945848 Name: sharpener
Product ID 5 Price: 15.01 Timestamp: 1299872248 Name: calculator

Product ID 0 Price: 4.25 Timestamp: 1299785848 Name: markers
Product ID 1 Price: 4.28 Timestamp: 1299785848 Name: eraser
Product ID 2 Price: 9.25 Timestamp: 1299872248 Name: notebook
Product ID 3 Price: 9.25 Timestamp: 1301945848 Name: pencils
Product ID 4 Price: 13.99 Timestamp: 1299872248 Name: trapper
Product ID 5 Price: 13.99 Timestamp: 1301945848 Name: sharpener
Product ID 6 Price: 15.01 Timestamp: 1299872248 Name: calculator
Product ID 7 Price: 19.15 Timestamp: 1299267448 Name: crayon box 
```

它对数组进行排序，但键已更改。我怎样才能保持键的原样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:57:57.230

您可以使用*[uasort](http://www.php.net/manual/en/function.uasort.php)*功能

```
$a = array(
           1=>array('price'=>9.25,'timestamp_added'=>1301945848,'name'=>'pencils'),
           4=>array('price'=>19.15,'timestamp_added'=>1299267448,'name'=>'crayon box'),
           15=>array('price'=>4.25,'timestamp_added'=>1299785848,'name'=>'markers'),
           2=> array('price'=>4.28,'timestamp_added'=>1299785848,'name'=>'eraser'),
           44=>array('price'=>13.99,'timestamp_added'=>1299872248,'name'=>'trapper'),
           32=>array('price'=>9.25,'timestamp_added'=>1299872248,'name'=>'notebook'),
           14=>array('price'=>13.99,'timestamp_added'=>1301945848,'name'=>'sharpener'),
           5=>array('price'=>15.01,'timestamp_added'=>1299872248,'name'=>'calculator')
           );

function printList( $a ){
  echo "<br />";
  foreach ($a as $key => $value){
    echo "<br /> Product ID $key Price: " . $value['price'] . " Timestamp: " . $value['timestamp_added'] . " Name: " . $value['name'];
  }

}

printList( $a );

function sbyprice($a, $b)
{
   return ($a['price'] >= $b['price']) ? 1 : 0;
}

uasort($a , "sbyprice");
printList( $a );
?> 
```

输出 ：

```
Product ID 1 Price: 9.25 Timestamp: 1301945848 Name: pencils
Product ID 4 Price: 19.15 Timestamp: 1299267448 Name: crayon box
Product ID 15 Price: 4.25 Timestamp: 1299785848 Name: markers
Product ID 2 Price: 4.28 Timestamp: 1299785848 Name: eraser
Product ID 44 Price: 13.99 Timestamp: 1299872248 Name: trapper
Product ID 32 Price: 9.25 Timestamp: 1299872248 Name: notebook
Product ID 14 Price: 13.99 Timestamp: 1301945848 Name: sharpener
Product ID 5 Price: 15.01 Timestamp: 1299872248 Name: calculator

Product ID 15 Price: 4.25 Timestamp: 1299785848 Name: markers
Product ID 2 Price: 4.28 Timestamp: 1299785848 Name: eraser
Product ID 32 Price: 9.25 Timestamp: 1299872248 Name: notebook
Product ID 1 Price: 9.25 Timestamp: 1301945848 Name: pencils
Product ID 44 Price: 13.99 Timestamp: 1299872248 Name: trapper
Product ID 14 Price: 13.99 Timestamp: 1301945848 Name: sharpener
Product ID 5 Price: 15.01 Timestamp: 1299872248 Name: calculator
Product ID 4 Price: 19.15 Timestamp: 1299267448 Name: crayon box 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:10:08.340

和其他人一样，但使用内联函数，这可能会更好：

```
uasort ( $array , function($a, $b) {
  return $a['price'] >= $b['price'] ? 1 : 0 ;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T06:59:42.240

[uasort](http://www.php.net/manual/en/function.uasort.php)适合你

例如：

```
<?php
function my_sort($a,$b)
{
if ($a==$b) return 0;
return ($a<$b)?-1:1;
}

$arr=array("a"=>4,"b"=>2,"c"=>8,d=>"6");
uasort($arr,"my_sort");
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T06:57:27.477

[usort](http://php.net/manual/en/function.uasort.php)将解决您的问题。请参考此链接。

# ibm-mobilefirst - TypeError：WLJSX.Ajax.WLRequest.setConnected 不是函数

> ID：16053230
> 
> 赞同：0
> 
> 时间：2013-04-17T06:40:11.287
> 
> 标签：ibm-mobilefirst

我已经将我的工作灯从 5.0.5 升级到了 5.0.6。当我在 5.0.5 上工作时它运行良好，但是当我在更新版本的工作灯 5.0.6 中使用相同的代码时，它给了我这个错误

TypeError: WLJSX.Ajax.WLRequest.setConnected 不是一个函数 WLJSX.Ajax.WLRequest.setConnected(false);

当我在升级到 worklight 5.0.6 后第一次构建时，它在控制台中给出了这个

FWLST1061W: RMLight.java 已更改，onCreate() 已重命名为 onWLCreate()，请检查您的代码是否有更改。有关详细信息，请参阅 IBM Worklight 信息中心。

有人可以帮忙吗

我也收到此错误

ReferenceError：未定义 wlInitOptions [中断此错误]

if (!isIOSEnv() && wlInitOptions.connectOnStartup) {

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:40:38.283

如错误消息所述：未定义 wlInitOptions。这真的可以吗？请参阅[此 Stackoverflow 问题](https://stackoverflow.com/questions/15549359/uncaught-referenceerror-wlinitoptions-is-not-defined)。

查看应用程序的 js 文件夹 (yourProject\apps\yourApp\common\js)。确保它包含一个 initOptions.js

确保在 HTML 中也引用了此文件。

# java - 向服务器发送击键的 Android 按钮

> ID：16053237
> 
> 赞同：0
> 
> 时间：2013-04-17T06:40:24.287
> 
> 标签：java, android

好的，所以我是 android 编程的新手，并且在我的驾驶室之外进行了一个项目。我找到了一个开源项目，它“有点”我希望它做它的远程 droid 2.0，但我不需要它的鼠标方面。我只需要放置一个发送“w”键击的按钮，但我在网上找不到任何东西来告诉我如何操作。我知道如何在 PHP 和 javascript 中执行此操作，我只会添加一个 onclick 事件，但在 android 中不知道。

所以在结束时请帮助一个新的例子或任何可以让我达到我需要的最终效果的教程

有趣的是，我过去曾取笑人们说“我只是想***_* __ *_***为什么这么难”，我总是说代码不明白你想要什么，直到你告诉它。现在我面临着吞下自己的讽刺。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:47:32.213

Do you intend to send keystrokes from your own app, or do you want to do a 'keylogger' and send to the server keys pressed on the phone?

For the former, you might want to look at: -[https://developers.google.com/eclipse/docs/endpoints-androidconnected-gae](https://developers.google.com/eclipse/docs/endpoints-androidconnected-gae)

the example to do something when a button is clicked.

```
Button b = (Button) findViewById(R.id.button1);
b.setOnClickListener(new OnClickListener() { 
public void onClick(View v) {
    postData(); //refer to the comments for the postData() example.
}); 
```

# c# - 如何检测是否在列表框离开时按下了 Tab 键

> ID：16053238
> 
> 赞同：0
> 
> 时间：2013-04-17T06:40:25.317
> 
> 标签：c#, listbox, windows-applications

我正在开发一个 Windows 应用程序。在那个应用程序中，我在一个表单上有一个列表框控件。现在我需要检测用户是否按下了 Tab 键或 Shift + Tab 键。我如何在列表框离开事件时检测到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:52:24.163

您需要获取`KeyEventArgs`以检测已按下的键。但是假设当用户按下`Tab`或`Shift`+时`Tab`，控件失去焦点，您可以只听`OnKeyDown`or`OnKeyPress`并检查按下的项目是否为`Tab`或`Shift`+`Tab`

* * *

```
 private void textBox1_KeyDown(object sender, System.Windows.Forms.KeyEventArgs e)
    { 
        //Check for Tab key
        if (e.KeyCode == Keys.Tab)
        {
           //Do something
        }
        //Check for the Shift Key as well
        if (Control.ModifierKeys == Keys.Shift && e.KeyCode == Keys.Tab) {
            //Other stuff to do
        }
    } 
```

# c++ - 从线程中分离对象

> ID：16053254
> 
> 赞同：2
> 
> 时间：2013-04-17T06:41:31.083
> 
> 标签：c++, qt, qthread, qobject

简单的问题：是否可以从 QThread 中分离 QObject 以将其移动到主线程？

我使用以下代码：

```
QThread *thread = new QThread();

MyObject *object = new MyObject();

object->moveToThread(thread);

thread->start(); 
```

在我想将`MyObject`实例移动到主线程之后的某个地方。

```
object->moveToThread(QApplication::instance()->thread()); 
```

我有以下错误：`QObject::moveToThread: Current thread (0x00000001) is not the object's thread (0x00000002). Cannot move to target thread (0x00000003)`。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T06:49:10.977

正如[官方文档所说](http://qt-project.org/doc/qt-4.8/qobject.html#moveToThread)，`moveToThread`函数不能从另一个线程“拉”一个对象，它将一个对象“推”到另一个线程。

这就是为什么如果要更改对象的线程亲和性，应该在当前对象的线程中进行。

我添加了一个简单的示例。

这是`Worker`课程：

```
class Worker : public QObject
{
    Q_OBJECT
public:
    explicit Worker(QObject *parent = 0);
signals:
    void done();

public slots:
    void doWork();
    void checkThread();

private:
    bool isMainThread();
};

Worker::Worker(QObject *parent) :
    QObject(parent)
{
    qDebug() << __PRETTY_FUNCTION__ 
             << QThread::currentThread() 
             << isMainThread();
}

void Worker::doWork()
{
    qDebug() << __PRETTY_FUNCTION__ 
             << QThread::currentThread() 
             << isMainThread();

    qDebug() << __PRETTY_FUNCTION__ << "Work is done";
    moveToThread(qApp->thread());
    emit done();
}

void Worker::checkThread()
{
    qDebug() << __PRETTY_FUNCTION__ 
             << QThread::currentThread() 
             << isMainThread();
}

bool Worker::isMainThread()
{
    return QThread::currentThread() == qApp->thread();
} 
```

我们创建一个`Worker`对象，一个`QThread`对象并将它们相互连接：

```
QThread *thread = new QThread;
Worker *worker = new Worker;
worker->moveToThread(thread);

QObject::connect(thread, SIGNAL(started()), worker, SLOT(doWork()));
QObject::connect(worker, SIGNAL(done()), thread, SLOT(quit()));
QObject::connect(thread, SIGNAL(finished()), worker, SLOT(checkThread()));
QObject::connect(thread, SIGNAL(finished()), thread, SLOT(deleteLater()));

thread->start(); 
```

这就是我们在应用程序输出中得到的：

```
Worker::Worker(QObject*) QThread(0x1034680) true 
void Worker::doWork() QThread(0x1224970) false 
void Worker::doWork() Work is done 
void Worker::checkThread() QThread(0x1034680) true 
```

在主应用程序线程中创建一个`Worker`对象，然后它在一个新线程中工作。工作完成后，它发送`done()`信号并将自身移回主线程。线程完成后，我们再次检查我们的`Worker`对象是否真的在主线程中。

但我真的不明白你为什么需要这个。

# windows-phone-8 - 如何在 Windows Phone 8 上使用 C++ 创建文件？

> ID：16053259
> 
> 赞同：0
> 
> 时间：2013-04-17T06:41:58.460
> 
> 标签：windows-phone-8

我想在 windows phone 上使用 C++ 创建一个文件，但我不熟悉 Win32 API，你能提供一些代码片段如何使用它们吗？对了，这里我也想知道在windows phone平台上用c++创建本地文件的速度是否比c#快？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T07:43:50.313

C++ 的主要挑战是找到可以写入的根目录。

您不需要使用 C++ 中的 Win32 协议（这也可能是最不便携的选项）。您还可以使用标准 C FILE* API、标准 C++ 流 API 或新的 WinRT 异步文件 API。

例如使用 FILE*（来自[https://stackoverflow.com/a/15988970/694641](https://stackoverflow.com/a/15988970/694641)）。

```
void SaveToFile()
{
    // get local folder (= isolated storage)
    auto local = Windows::Storage::ApplicationData::Current->LocalFolder;
    auto localFileNamePlatformString = local->Path + "\\game.sav";

    FILE* pFile;
    auto f = _wfopen_s(&pFile, localFileNamePlatformString->Data(), L"w");
    auto res1 = fprintf(pFile, "123456789");
    auto res2 = fclose(pFile);
} 
```

除非您尝试修复已知的性能问题，否则我不会担心文件的速度。

# javascript - 如何从函数返回对象？

> ID：16053264
> 
> 赞同：0
> 
> 时间：2013-04-17T06:42:16.293
> 
> 标签：javascript

从函数返回对象时，我遇到了概念性的 Javascript 问题。有人可以指出我在这里做错了什么吗？

```
var productsPartsObj = {
  layers: ['toe', 'base', 'shaft'],
  layer: [
    {
      name: 'toe',
      height: 75,
      width: 78,
      coords: {
        x: 20,
        y: 120
      }
    }
  ]
}

var coords = {};
coords = (function() {
  productsPartsObj.layer.forEach(function(layerObj){
    if ( layerObj.name === "toe" ) {
      return layerObj.coords;
    }
  })
})()

console.log(coords); //logs undefined 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T06:46:14.440

You are returning from the `forEach` callback, not from the immediately-executed function expression. You could do this instead (assuming you know there will only ever be one element of the `layer` array with a `name` matching the value in question:

```
var coords = (function() {
  return productsPartsObj.layer.filter(function(layerObj){
      return layerObj.name === "toe";
  })[0].coords;
})(); 
```

Notice that there are 2 `return` statements - the first one returns from the IIFE, and the second returns from the `filter` callback.

Also notice that I've moved the `var` keyword into this statement. There is no point assigning an empty object to `coords` and then simply overwriting it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:48:04.717

您的匿名函数没有返回任何值。

```
var productsPartsObj = {
    layers : ['toe', 'base', 'shaft'],
    layer : [{
                name : 'toe',
                height : 75,
                width : 78,
                coords : {
                    x : 20,
                    y : 120
                }
            }]
}

var coords = {};
coords = (function() {
    var x;
    productsPartsObj.layer.forEach(function(layerObj) {
                if (layerObj.name === "toe") {
                    x = layerObj.coords;
                }
            })
    return x;
})()

console.log(coords); 
```

否则直接使用设置坐标值

```
var coords = {};
(function() {
    productsPartsObj.layer.forEach(function(layerObj) {
                if (layerObj.name === "toe") {
                    coords = layerObj.coords;
                }
            })
})() 
```

# c# - 如何在 ASP.NET 和 C# 的网格中显示树结构？

> ID：16053265
> 
> 赞同：4
> 
> 时间：2013-04-17T06:42:16.667
> 
> 标签：c#, asp.net, .net

我需要显示与每一行网格相关的树状结构，如下图所示。每当我单击该行的 + 按钮时，该特定行都会出现一些选项。

谷歌搜索了很多，但没有找到任何满足我要求的东西。

如果您以前这样做过，请分享您的知识。

![在此处输入图像描述](https://i.stack.imgur.com/Opuzv.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:19:01.343

我得到以下链接对于创建网格层次结构或网格到网格或可扩展网格非常有用。

**电信：**

[http://demos.telerik.com/aspnet-ajax/grid/examples/hierarchy/nestedviewtemplate/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/grid/examples/hierarchy/nestedviewtemplate/defaultcs.aspx)

**DevEx**

[http://demos.devexpress.com/ASPxGridViewDemos/MasterDetail/Det​​ailTabs.aspx](http://demos.devexpress.com/ASPxGridViewDemos/MasterDetail/DetailTabs.aspx)

**代码项目（在Nag**的帮助下）

[http://www.codeproject.com/Articles/160773/Expandable-Rows-in-GridView](http://www.codeproject.com/Articles/160773/Expandable-Rows-in-GridView)

# jquery - jQuery 内容面板切换器与 Slidesjs 滑块

> ID：16053268
> 
> 赞同：0
> 
> 时间：2013-04-17T06:42:33.290
> 
> 标签：jquery, slider

我在我的网站上使用这两个插件：jQuery 内容面板切换器和 Slidesjs 滑块。内容面板滑块在单击链接后切换内容，但在其中一个内容中我需要使用 Slidesjs 滑块。它在页面加载后工作，但是当用户更改内容时，slidesjs 就会消失。我不确定这是一个很好的描述，来这里看看实时预览：[实时预览](http://jsbin.com/ozikec/3/edit)。

例如，尝试单击摄影，然后单击返回主页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:57:17.420

内容切换器正在破坏 slidesjs，因为它改变了 dom 结构。在此用例中，您不应使用切换器。反而：

*   将除第一个视图之外的所有视图设置为`display:none`.
*   `fadeOut()`单击链接时，在当前视图上执行 jQuery 。
*   make a `setTimeout`，等待`fadeOut`完成，然后`fadeIn()`到要显示的元素

# ios - 通过带有开发 SSL 证书的 xcode 在设备中推送通知测试

> ID：16053271
> 
> 赞同：3
> 
> 时间：2013-04-17T06:42:38.467
> 
> 标签：ios, objective-c, xcode, push-notification, apple-push-notifications

我的应用程序已经在应用程序商店中，并且推送通知处于活动状态并且正在运行（使用生产证书）。现在我需要在应用程序中添加徽章（在它们只是警报之前）（已经在服务器端实现）。因此，为了进行测试，我需要一个开发 SSL 证书。所以以下是我的查询：

1.  我是否必须在我的服务器上安装开发 SSL 证书才能使用开发证书在 iPhone 上进行测试？
2.  它不会与服务器上已安装的生产 SSL 证书冲突吗？
3.  我是否必须使用以下代码在 didReceiveRemoteNotification: 和 didFinishLaunchingWithOptions: 代表中添加徽章：

代码部分：

```
NSString* alertValue = [[userInfo valueForKey:@"aps"] valueForKey:@"badge"];  
NSLog(@"my message-- %@",alertValue);  
int badgeValue= [alertValue intValue];  
[[UIApplication sharedApplication] setApplicationIconBadgeNumber:badgeValue]; 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T07:48:15.150

只是为已提出的证书/服务器/SSL 问题和答案添加一些额外的颜色：

**基于 Codesign 设置选择的 Prod/Sandbox APNS**

为了全面起见，让我们先快速回顾一下 APNS 环境：

*   **使用iOS 开发**证书进行代码签名的应用程序连接到并等待从**沙盒**APNS 环境传递推送通知
*   **使用iOS 分发**证书（AppStore 或分发 > Ad-Hoc）进行代码签名的应用程序连接到并等待从**生产**APNS 环境传递推送通知。
*   此设置由 Xcode 在构建过程中自动确定，并且只能通过选择 CodeSign 步骤中使用的证书类型来配置。

**问题 1：我是否必须在我的服务器上安装开发 SSL 证书才能测试开发证书签名的应用程序推送通知？**

是的，一旦应用程序经过代码签名，它的 APNS 设置就会使用上一节中的规则密封到二进制文件中。然后由开发人员的服务器代码决定设备将生成的 APNS 令牌与沙盒 APNS 环境一起使用，并且服务器应该将该请求路由到 gateway.sandbox.push.apple.com。

一些开发人员选择设置能够进行这些区分的单个服务器，而其他开发人员选择设置其服务器的并行实例，一组发送到生产，另一组发送到沙箱。

无论哪种方式，决定权在于个人开发人员以及他们的服务器端代码能够做什么以及设置第二台服务器的相对复杂性。无论哪种方式，如果您在测试即将推出的功能时不小心禁用了生产推送通知，然后忘记重新启用它们，用户可能会感到不安，因此在查看生产代码时*一定要小心！*

**问题 #2：开发和生产 SSL 证书会冲突吗？**

从原始 SSL 的角度来看，它们不会冲突——您应该能够在服务器以外的机器上下载并打开/检查这两个证书，并看到证书的内容实际上是不同的。将它们导入相同的服务器环境（同样从 SSL 的角度来看）是完全允许的。为确保它们不同，在请求证书时，请确保您创建了两个不同的 certificateSigningRequests，并且您最终会得到不同的数据。

从开发人员的服务器端推送代码的角度来看——这取决于。请参阅问题 1 中有关服务器端代码功能的对话。如果服务器代码的设计考虑到这一点，那么理论上答案也是“不，它们不会发生冲突”，但这是个体开发人员需要对自己的服务器端代码能力做出的决定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T07:10:48.297

1.  是的，您应该在服务器上安装开发 SSL 证书。您还必须使用带有此证书的沙盒推送通知服务 (gateway.sandbox.push.apple.com)。

2.  我想他们不会冲突。您应该只为 AppStore 应用程序使用生产 SSL，为测试应用程序使用开发 SSL。

3.  最好不要在代码中增加或减少或设置徽章值。您的服务器应在通知正文中返回徽章值。例如，当您的应用程序未运行时，您无法处理推送，因此您无法在代码中更改徽章值。但是，如果您的推送包含徽章值，它将以任何方式正确设置和显示。

这是通知正文示例。为键“badge”传递徽章值：{“aps”：{“alert”：“这是消息。”，“badge”：7}}

顺便说一句，didReceiveRemoteNotification: 方法总是在您的应用收到推送时调用。即使应用程序关闭，当您从推送启动应用程序时也会调用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T14:37:40.303

我只是想在现有答案中添加一些内容。虽然开发证书不会与安装在同一台服务器上的生产证书冲突，但您可能会与存储在数据库中的设备令牌发生冲突。当您使用开发证书时，您会从 Apple 获得开发设备令牌，这与您为生产证书获得的生产设备令牌不同。如果您将开发设备令牌和生产设备令牌保存在同一个数据库中（如果您将同一服务器用于开发和生产，您可能会这样做），如果您使用生产证书发送带有开发设备令牌的通知，您将遇到麻烦，反之亦然.

这就是为什么 Apple 建议使用单独的服务器进行开发和生产。

这段话摘自[Troubleshooting Push Notifications](https://developer.apple.com/library/ios/#technotes/tn2265/_index.html)，这是一个非常有用的文档：

> 最常见的问题是无效的设备令牌。如果令牌来自沙盒环境，例如当您在内部测试开发构建时，您无法将其发送到生产推送服务。每个推送环境都会为同一设备或计算机颁发不同的令牌。如果您确实将设备令牌发送到错误的环境，推送服务会将其视为无效令牌并丢弃通知。
> 
> 注意：建议您为每个推送环境运行一个单独的提供程序实例，以避免将设备令牌发送到错误环境的问题。

# firebase - Firebase 从现有应用导入用户

> ID：16053273
> 
> 赞同：9
> 
> 时间：2013-04-17T06:42:42.893
> 
> 标签：firebase

如何使用电子邮件/密码将现有应用程序的用户导入 firebase 的简单登录。

我有键和散列以及包含用户数据的用户集合。是否可以只导入它或者我必须使用firebase的用户api。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T07:24:35.027

当前将现有用户帐户从其他服务导入 Firebase 以在 Firebase 简单登录中使用的最佳方法是调用`createUser(email, password, callback)`每个电子邮件地址/密码组合，前提是您拥有它们。目前没有开箱即用的方法将用户电子邮件地址和密码*哈希*导入 Firebase 简单登录，尽管 ping support@firebase.com 可能有办法做到这一点。

如果您已经拥有想要继续使用的现有身份验证机制，而不是使用 Firebase 简单登录，请查看[自定义令牌生成](https://www.firebase.com/docs/security/custom-login.html)，这将允许您继续使用现有身份验证。这将要求您在每个用户进行身份验证时生成 JSON Web 令牌 (JWT)，然后可以在您的安全规则中使用此令牌的有效负载，如下所述：[https ://www.firebase.com/docs/security/security -rules.html](https://www.firebase.com/docs/security/security-rules.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-11-01T10:50:46.517

**自 2019 年 11 月起更新**

1.  第一步，确保安装 Firebase Tools，这个命令`npm install -g firebase-tools`，我假设你已经安装`Node.js`过`npm`。

2.  在您的终端中点击`firebase login`以登录到您要从中导出的帐户（顺便说一句，您可能已经登录）。

3.  使用 导出您的电子邮件和密码`firebase auth:export database.json --project projectName`。

4.  现在`firebase logout`到`firebase login`您要导入的帐户。

5.  转到**您要从中导出**的项目的`Console`-> `Project`-> `Authentication`-> （这非常重要，如果您要从导入的那个项目中获取参数，它将不起作用）。`Password hash parameter`

 **在那里你可以看到类似的东西：

```
hash_config {
  algorithm: SCRYPT,
  base64_signer_key: <long string of random characters>,
  base64_salt_separator: <short string of random characters>,
  rounds: 8,
  mem_cost: 14,
} 
```

6.  在您的终端运行`firebase auth:import database.json --hash-algo=scrypt --rounds=8 --mem-cost=14 --hash-key=<long string of random characters> --salt-separator=<short string of random characters> --project=YOUR_PROJECT_NAME`. 注意：我没有在字符串中使用引号，而且效果很好。

7.  测试您的身份验证是否适用于新环境。可能很明显，但不要忘记改变你`firebaseConfig`的新项目:)

**编辑：**

澄清它适用于哪个 Firebase 工具版本：

```
$ firebase --version
7.6.1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-01T13:24:50.887

现在可以在 Firebase v3.x 中导出/导入用户。您所要做的就是安装 Firebase CLI（Firebase 工具），在您的机器上设置一个文件夹，代表您的 Firebase 项目的工具镜像。（就像`firebase init`在适当的文件夹中一样简单）

导出：[auth:export](https://firebase.google.com/docs/cli/auth#authexport)

导入：[auth:import](https://firebase.google.com/docs/auth/web/manage-users#import_user_accounts)

**更新：**在我写这个答案的时候，上面链接中给出的例子`auth:import`有 2 件丢失：`hash key`和`salt separator`，您可以向客户支持咨询。也许他们将来会通过工具或控制台共享它。**

# ios - 通过线程调用函数给出异常

> ID：16053279
> 
> 赞同：0
> 
> 时间：2013-04-17T06:42:55.690
> 
> 标签：ios, objective-c, nsthread

我正在使用线程调用我的函数“initialGetMethod”

```
[NSThread detachNewThreadSelector:@selector(initialGetMethod) toTarget:self withObject:nil]; 
```

我的get方法是

```
-(void) initialGetMethod
{
    self.loginPassword = [[ UIAlertView alloc] initWithTitle:@"Please Login to MFP" message:@"Enter Valid UserID and Password" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:@"Cancel", nil];
    [self.loginPassword setAlertViewStyle:UIAlertViewStyleLoginAndPasswordInput];
    [self.loginPassword setTag:2];
    [self.loginPassword show];
} 
```

但它给出了异常“试图从主线程或网络线程以外的线程获取网络锁。这可能是从辅助线程调用 UIKit 的结果。”

它在“[self.loginPassword setAlertViewStyle:UIAlertViewStyleLoginAndPasswordInput];”处给出异常

如果我将该函数称为“[self initialGetMethod];” 它没有给出例外，但需要一些时间..

我尝试在后台加载，但它不工作..（意味着我不希望它在后台）..

请提出一些解决方案..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:52:04.407

您在运行应用程序期间遇到的错误是

“试图从主线程或web线程以外的线程获取web lock。这可能是从辅助线程调用UIKit的结果。”

**一旦您在除 MainThread 之外的任何其他线程中更新或访问 UI 元素，就会发生这种情况（仅使用主线程来访问或更新 UI，它只会帮助您）**

在这里，您在后台线程中显示警报，这就是它发生的原因

请使用以下其中一项来弹出警报

```
 [self performSelector:@selector(initialGetMethod) withObject:nil];

  [self performSelector:@selector(initialGetMethod) withObject:nil afterDelay:0.1]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T06:57:27.517

```
 //call createthread:

    [self setupTimerThread:];

       //write following code in setupTimerThread
       timer = [NSTimer timerWithTimeInterval:02
                                        target:self
                                      selector:@selector(initialGetMethod:)
                                      userInfo:nil
                                       repeats:NO];
       NSRunLoop* runLoop = [NSRunLoop currentRunLoop];
       [runLoop addTimer:timer forMode:NSRunLoopCommonModes];
       [runLoop run]; 
```

# java - 不幸的 Java 异常：java.lang.NoSuchMethodError

> ID：16053280
> 
> 赞同：7
> 
> 时间：2013-04-17T06:42:59.483
> 
> 标签：java, exception, nosuchmethoderror

我写了一个应用程序，它可以正常工作 3 年，但是！今天，当他们尝试运行此应用程序时，引发了意外的异常：

```
INFO   | jvm 1    | 2013/04/17 10:02:40 | Exception in thread "Thread-1" java.lang.NoSuchMethodError: java.sql.Connection.isValid(I)Z
INFO   | jvm 1    | 2013/04/17 10:02:40 |   at lib.MySQLConnectionPatch.SearchInCache(MySQLConnectionPatch.java:103)
INFO   | jvm 1    | 2013/04/17 10:02:40 |   at lib.MySQLConnectionPatch.getConnection(MySQLConnectionPatch.java:79)
INFO   | jvm 1    | 2013/04/17 10:02:40 |   at lib.SQLManager.establishSqlConnection(SQLManager.java:62)
INFO   | jvm 1    | 2013/04/17 10:02:40 |   at lib.SQLManager.establishSqlConnection(SQLManager.java:30)
INFO   | jvm 1    | 2013/04/17 10:02:40 |   at lib.tasks.classes.sql.executeQuery.execute(executeQuery.java:49)
INFO   | jvm 1    | 2013/04/17 10:02:40 |   at Components.TTask.run(TTask.java:86)
INFO   | jvm 1    | 2013/04/17 10:02:40 |   at Components.ThreadTask.run(ThreadTask.java:29)
INFO   | jvm 1    | 2013/04/17 10:02:40 |   at lib.tasks.classes.fori.execute(fori.java:66)
INFO   | jvm 1    | 2013/04/17 10:02:40 |   at Components.TTask.run(TTask.java:86)
INFO   | jvm 1    | 2013/04/17 10:02:40 |   at Components.ThreadTask.run(ThreadTask.java:29)
INFO   | jvm 1    | 2013/04/17 10:02:40 |   at lib.tasks.classes.fori.execute(fori.java:66)
INFO   | jvm 1    | 2013/04/17 10:02:40 |   at Components.TTask.run(TTask.java:86)
INFO   | jvm 1    | 2013/04/17 10:02:40 |   at Components.ThreadTask.run(ThreadTask.java:29)
INFO   | jvm 1    | 2013/04/17 10:02:40 |   at Components.ThreadTask.run(ThreadTask.java:44)
INFO   | jvm 1    | 2013/04/17 10:02:40 |   at LauncherService.LaunchService.run(LaunchService.java:38) 
```

**MySQLConnectionPatch.java/SearchInCache**的代码是

```
private Connection SearchInCache(String key) {

    Connection result = null;
    try{
        if (!connections.isEmpty())
            result  = connections.get(key);
    } catch (Exception ex){
    }
    if (result != null){
        boolean isValid = false;  /** THIS IS LINE 103 WHERE EXCEPTION RAISED **/
        try {
            Statement s = result.createStatement();
            if (s.execute("SHOW STATUS;")){
                isValid = true;
            }
            s.close();
        } catch (Exception ex) {
            isValid = false;
        }

        if (!isValid){
            connections.remove(key);
            messageLog.stdwar("MySQL_PATCH: ONE CONNECTION EXPIRED :: force close");
            try {
                result.close();
            } catch (SQLException ex) {
                messageLog.stderr("MySQL_PATCH: CLOSING CONNECTION ERROR: "+ex.getMessage());
            }
            result = null;
        }
    }
    return result;
} 
```

我想知道为什么要`boolean isValid = false;`提出 Exception `java.lang.NoSuchMethodError: java.sql.Connection.isValid(I)Z`。

**请注意**，唯一不同的是 JRE（以前是 1.6，新的是 1.7）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T06:52:04.470

奇怪的。它清楚地引用了[`isValid(int)`](http://docs.oracle.com/javase/7/docs/api/java/sql/Connection.html#isValid%28int%29)方法`java.sql.Connection`

在您的堆栈跟踪中，我还看到了一个 I 和一个 Z： `java.sql.Connection.isValid(I)Z`

这些对应于 int (I) 和 boolean (Z)，它们是`java.sql.Conneciton`. 所以肯定会调用一个方法。注意：括号右边的字符表示方法的返回类型，该方法返回布尔值（Z）。

以下是我能想到的唯一想法：

1.  您提供的源代码与您的环境中实际运行的代码不对应。（例如，也许您的“补丁”从未真正应用过？）

2.  此外，您的环境可能正在运行 Java 5，因为该`isValid(int)`方法直到 Java 6 才出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:20:04.830

抱歉，我无法发表评论。

您是否只是替换了 jvm 而没有替换任何类文件？请在 IDE 中尝试您的源代码（记得替换依赖项等），以便重新编译您的源代码并了解 1.7 附带的新签名。

其余的，我和朱利叶斯戴维斯一起去。Java 应该调用 isValid() （如果将其更改为布尔值 nameOtherThanAMethodOfConnection = false; 会发生什么会很有趣）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-06T14:42:31.447

固定的！！你猜怎么着！**`A copy of old jre`**(1.5.08) 嵌入在 HP 打印机驱动程序中，并将地址添加到**`PATH`**环境变量中！

# php - mysqli 不执行 Select 语句

> ID：16053283
> 
> 赞同：0
> 
> 时间：2013-04-17T06:43:14.273
> 
> 标签：php, mysql, select, mysqli

我有下面的代码。当我在没有`WHERE`子句的情况下使用此代码时，将按预期显示表中的所有用户。但是当使用该`WHERE`子句时，什么都不会显示。

可能是什么原因，我该如何解决？

谢谢！

```
function requestUser($user) {
  $DBHost   = "localhost";
  $DBUser   = "dbUser";
  $DBPass   = "dbPass";
  $DBName   = "dbName";

  $db = new mysqli($DBHost, $DBUser, $DBPass, $DBName);
  if ($db -> connect_errno > 0) { 
    $lbOK = false; 
  }
  else {
    $lbOK = $db -> set_charset('utf8');
  } 

  if ($lbOK) {
    $id         = NULL;
    $user_name  = NULL;
    $user       = htmlentities($user, ENT_QUOTES);
    $lcSQL      = "SELECT `user_name` FROM `users` WHERE user_name=?";
    $stmt       = $db -> prepare($lcSQL);
    $ok         = $stmt -> bind_param('s', $user);
    $ok         = $stmt -> execute();
    $ok         = $stmt -> bind_result($user_name);

    while ($row = $stmt -> fetch()){
      echo $user_name;
    }

    $stmt->close();
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:17:17.337

您的代码存在许多重大错误，其中一些可能是问题的原因，而另一些则不是。但无论如何，他们都必须纠正

1.  **切勿**在应用程序功能内连接 co 数据库。在引导文件中的某处连接一次，然后在整个应用程序中使用该单一连接。
2.  不要将 htmlentities 与任何数据库交互一起使用。它可能很容易破坏数据
3.  始终检查错误
4.  不要使用mysqli，它是不可用的。请改用 PDO。

    ```
    $dsn = "mysql:host=DBHost;dbname=DBName;charset=utf8";
    $opt = array(
        PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
        PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC
    );
    $pdo = new PDO($dsn,$DBUser, $DBPass, $opt);

    function requestUser($user) {
      global $db;

      $sql  = "SELECT `user_name` FROM `users` WHERE user_name=?";
      $stmt = $db->prepare($sql);
      $stmt->execute(array($user));
      return $stmt->fetchColumn();
    }
    echo requestUser($user); 
    ```

如果它仍然不起作用，请以这种方式验证

```
 $sql  = "SELECT `user_name` FROM `users` WHERE user_name='$user'";
  var_dump($sql); 
```

然后尝试在控制台/phpmyadmin 中运行以找出您的数据/值有什么问题

# spring - 飞路和弹簧集成

> ID：16053284
> 
> 赞同：1
> 
> 时间：2013-04-17T06:43:14.533
> 
> 标签：spring, flyway

与 Spring 集成时如何正确配置 flyway？我看到有一个接受属性的配置方法，但是从 spring XML 中它将需要一个 setter 方法来提供一种注入属性实例的方法。

我可以编写自己的 Pojo 来将配置委托给 flyway 实例，但不知何故，我觉得我错过了一些东西。

这是我的配置：

```
<bean 
  id="flyway" 
  class="com.googlecode.flyway.core.Flyway" 
  init-method="migrate" 
  lazy-init="false"
  depends-on="dataSource"
  >
   <property name="dataSource" ref="dataSource" />
   <property name="locations" value="classpath:/META-INF/migrations" />
</bean> 
```

我想为迁移配置提供一个专用的属性文件，如此处所述：

[https://github.com/flyway/flyway/blob/master/flyway-commandline/src/main/assembly/flyway.properties](http://code.google.com/p/flyway/source/browse/flyway-commandline/src/main/assembly/flyway.properties)

从[javadoc](http://flywaydb.org/documentation/javadoc/com/googlecode/flyway/core/Flyway.html)我看到我可以设置大部分属性。我可以使用 spring ${} 属性替换并使用内置的机制加载属性文件，但这会使这些属性对所有 bean 都可用，我会添加我需要的每一个。

我的包装器将提供一个设置器，因此我可以将以下内容添加到我的 spring xml 配置中：

```
<property name="configLocations" value="classpath:/META-INF/flyway.properties" /> 
```

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-17T06:07:23.510

您应该使用 spring 注释并包装 Flyway 类，然后做任何您想做的事情。例如，配置飞行路线属性。这篇博文可能会给你一个例子[http://esofthead.com/migrate-database-highly-change-environment-multiple-versions-management/](http://esofthead.com/migrate-database-highly-change-environment-multiple-versions-management/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T17:29:59.907

Spring 的[MethodInvokingFactoryBean](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/beans/factory/config/MethodInvokingFactoryBean.html)应该做你想做的事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-26T17:44:28.437

`JdbcTemplate`或者，您可以使用 Flyway 的[SpringJdbcMigration](http://flywaydb.org/documentation/javadoc/com/googlecode/flyway/core/api/migration/spring/SpringJdbcMigration.html)创建迁移。以下示例是从[Flyway 文档](http://flywaydb.org/documentation/migration/java.html)中复制的：

```
import com.googlecode.flyway.core.api.migration.spring.SpringJdbcMigration;
import org.springframework.jdbc.core.JdbcTemplate;

public class V1_2__Another_user implements SpringJdbcMigration {

    @Override
    public void migrate(JdbcTemplate jdbcTemplate) throws Exception {
        jdbcTemplate.execute("INSERT INTO test_user (name) VALUES ('Obelix')");
    }
} 
```

# jsf - 如何做多个嵌套的ui：param？

> ID：16053293
> 
> 赞同：1
> 
> 时间：2013-04-17T06:44:32.237
> 
> 标签：jsf, jakarta-ee, parameters, javabeans

我正在做一个项目，我想测试我可以用 JSF 中的模板做多少。现在我正在处理参数，我想知道如何模板化多个参数。

```
<h:outputText value="#{bean.getobject.action}"/> 
```

我会像这样放置参数......

```
<ui:param name="bean" value="#{myBean}"/>
<ui:param name="getobject" value="object"/>
<ui:param name="action" value="action"/> 
```

我像这样尝试过，但出现错误`CDATA tags may not nest`。

有可能吗？如果没有，是否有任何替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:12:24.160

您可以嵌套`<ui:param>`值。您只需将它们作为 EL 表达式引用，如下所示：

`<ui:param name="bean" value="#{myBean}"/>`
`<ui:param name="getobject" value="#{bean.object}"/>`
`<ui:param name="action" value="#{getobject.action}"/>`

希望这能回答你的问题。

# laravel - 如何正确复制工作中的 Laravel 4 项目

> ID：16053297
> 
> 赞同：2
> 
> 时间：2013-04-17T06:44:49.603
> 
> 标签：laravel, laravel-4, composer-php

[我有来自 Laravel 的github repo](https://github.com/laravel/laravel/tree/develop)的最新 Laravel 4 beta 5 版本。

我已经构建了一个简单的 Web API，它运行良好。我想将项目复制到另一个文件夹并继续从副本中处理它。但是，当我尝试这样做时，我收到以下错误消息：

```
InvalidArgumentException
Driver [native] not supported.

/Users/tolga/Sites/l4api-copy/bootstrap/compiled.php
    Line 10908: throw new \InvalidArgumentException("Driver [{$driver}] not supported."); 
```

这是我为了复制项目所做的：

```
[/Users/tolga/Sites] $ cp -R l4api l4api-copy
[/Users/tolga/Sites] $ chmod -R 755 l4api-copy 
```

它没有用，所以我尝试了：

```
[/Users/tolga/Sites] $ chmod -R 777 l4api-copy/app/storage 
```

还是不行，尝试运行composer dump-autoload：

```
[/Users/tolga/Sites] $ cd l4api-copy
[/Users/tolga/Sites/l4api-copy] $ composer.phar dump-autoload
 Generating autoload files

[/Users/tolga/Sites/l4api-copy] $ 
```

同样的错误。我还尝试删除该`app/storage`文件夹并重新创建它。

```
[/Users/tolga/Sites/l4api-copy] $ rm -Rf app/storage
[/Users/tolga/Sites/l4api-copy] $ mkdir app/storage
[/Users/tolga/Sites/l4api-copy] $ chmod -R 777 app/storage/ 
```

这是一个全新的错误：

```
ErrorException

Warning: file_put_contents(/Users/tolga/Sites/l4api-copy/bootstrap/../app/storage/meta/services.json):
failed to open stream: No such file or directory in
    /Users/tolga/Sites/l4api-copy/bootstrap/compiled.php line 5507

        Line 5507: return file_put_contents($path, $contents); 
```

`composer.phar dump-autoload`清空`app/storage`文件夹后，我也再次运行命令。

最后，我也尝试过`composer.phar install`：

```
[/Users/tolga/Sites/l4api-copy] $ composer.phar install
 Loading composer repositories with package information
 Installing dependencies from lock file
 Nothing to install or update
 Generating autoload files

[/Users/tolga/Sites/l4api-copy] $ 
```

以上都没有帮助。我究竟做错了什么？复制工作项目的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T07:00:08.647

在[最近提交](https://github.com/laravel/laravel/commit/d9c559ba7f3e92d0623df0cd30f8f8e5ae7a7aff)到**laravel/laravel**存储库后，引入了一个新的会话驱动程序`native`。从错误的外观来看，您应该更新您的应用程序框架（laravel/laravel 的克隆开发分支），删除您的`bootstrap/compiled.php`文件并重新运行`composer update`以获取最新的框架更改。

在复制项目方面，您应该复制*除*目录之外的所有内容，`vendor`然后`composer install`在新位置运行。您可以复制`vendor`目录，但最好运行全新安装并让 composer 转储新的自动加载。

我还看到 Taylor 提到清理您的`app/storage/sessions`目录。删除里面的所有文件。

# c# - 在面板上的标签和垂直滚动条上环绕文本

> ID：16053300
> 
> 赞同：3
> 
> 时间：2013-04-17T06:44:55.777
> 
> 标签：c#, winforms

我在面板中有一个标签。当文本超出时，标签文本应该换行。为此，我设置了 mylabel 的 AutoSize = false 和 MaximumSize = 100,0。

现在由于文本被包装，垂直滚动条应该出现在面板上。但这没有发生，请说明我在这里缺少什么。是否有可能，或者我应该在面板内显式添加垂直滚动条？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-04T16:09:41.033

1）您需要将标签放在面板内

2) 标签的 AutoSize 应为 TRUE

3) 面板的 AutoSize 应为 FALSE

4) 面板的 AutoScroll 应该是 True

这就对了！

![在此处输入图像描述](https://i.stack.imgur.com/Nn5dg.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:04:08.197

您应该设置`AutoSize`为 true 以自动换行。对于滚动条检查您设置`panel.VerticalScroll.Visible = true;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T07:18:52.593

你有属性 Scrollable=true 或 AutoScroll 吗？

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.panel.scrollbars.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.panel.scrollbars.aspx)

尝试这个：

```
ScrollBar vScrollBar1 = new VScrollBar();
vScrollBar1.Dock = DockStyle.Right;
vScrollBar1.Scroll += (sender, e) => { panel1.VerticalScroll.Value = vScrollBar1.Value; };
panel1.Controls.Add(vScrollBar1); 
```

# java - 在不扩展 TimerTask 的情况下安排常规任务？

> ID：16053301
> 
> 赞同：0
> 
> 时间：2013-04-17T06:45:02.547
> 
> 标签：java, multithreading, jakarta-ee, timer, runnable

如何在单独的线程和给定的时间间隔中重复运行此类的实例？（正如您所注意到的，我使用的是 Java 2 EE）。

```
public class Gate extends AbsDBObject<Gate> implements Runnable{
  public void Run(){
    //Something
  }
} 
```

我之前通过`Gate`类扩展`TimerTask`类并使用来完成此操作`Timer`：

```
Timer timer = new Timer();
Gate gates = Gate.fetchOne();
timer.schedule(gate, 0, 1000); 
```

但在这种情况下，我不能扩展任何其他类。我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:49:09.457

如果你使用 a[`ScheduledExecutorService`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ScheduledExecutorService.html)那么你只是执行`Runnable`对象，而不是`TimerTask`对象。

```
ScheduledExecutorService executorService = 
    new ScheduledThreadPoolExecutor(corePoolSize);
Gate gate = Gate.fetchOne();
executorService.scheduleAtFixedRate(gate, 0, 1, TimeUnit.SECONDS); 
```

这节省了扩展的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:02:25.070

尝试

```
 Timer timer = new Timer();
    final Gate gates = Gate.fetchOne();
    timer.schedule(new TimerTask() {
        public void run() {
            gates.run();
        }
    }, 0, 1000); 
```

# c# - DataTable 中的文本未显示在 GridView 中

> ID：16053306
> 
> 赞同：1
> 
> 时间：2013-04-17T06:45:29.100
> 
> 标签：c#, asp.net, gridview, datatable, datarow

我正在创建一个 DataTable 并填充其中的行/列。

但是，当我将它绑定到 GridView 时，我看不到分配给一列的文本。

代码：

```
 DataTable dt = new DataTable();
        dt.Columns.Add(new DataColumn("RowNumber", typeof(string)));
        dt.Columns.Add(new DataColumn("Column1", typeof(string)));

        DataRow dr = dt.NewRow();
        dr["RowNumber"] = 1;
        dr["Column1"] = "some text";
        dt.Rows.Add(dr);

        dr = dt.NewRow();
        dr["RowNumber"] = 2;
        dr["Column1"] = "more text";
        dt.Rows.Add(dr);

        dr = dt.NewRow();
        dr["RowNumber"] = 3;
        dr["Column1"] = "and more text";
        dt.Rows.Add(dr);

        Gridview2.DataSource = dt;
        Gridview2.DataBind(); 
```

gridview 只显示第一列（带有数字 1-3），但带有文本的第二列不显示在 gridview 上。

有任何想法吗？

谢谢！

编辑：第 1 列 gridview 在 BoundField 中，而第 2 列在 TemplateFied...ItemTemplate 中。

```
 <asp:gridview ID="Gridview2" runat="server" ShowFooter="true" GridLines="None"  
            AutoGenerateColumns="false"  >
    <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
    <EditRowStyle BackColor="#999999" />
    <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
    <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
    <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
    <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
    <SortedAscendingCellStyle BackColor="#E9E7E2" />
    <SortedAscendingHeaderStyle BackColor="#506C8C" />
    <SortedDescendingCellStyle BackColor="#FFFDF8" />
    <SortedDescendingHeaderStyle BackColor="#6F8DAE" />
<Columns>
<asp:BoundField DataField="RowNumber" HeaderText="#" ItemStyle-Width="30px" ItemStyle-HorizontalAlign="Center" />
<asp:TemplateField>
    <ItemTemplate>
        <asp:TextBox ID="TextBox1" runat="server" Width="300"></asp:TextBox>
    </ItemTemplate>
    <FooterStyle HorizontalAlign="Right" />
    <FooterTemplate>
     <asp:Button ID="ButtonAdd1" runat="server" Text="Add Statement" onclick="ButtonAdd1_Click" />
    </FooterTemplate>
</asp:TemplateField>
</Columns>
</asp:gridview> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:57:58.917

您尚未使用`gridview`. 或者使用另一个绑定字段，如下所示

```
<asp:BoundField DataField="Column1" HeaderText="#" ItemStyle-Width="30px" /> 
```

或修改您的模板文件如下

```
 <ItemTemplate>
    <asp:TextBox ID="TextBox1" Text='<%# Eval("Column1") %>'  runat="server" Width="300">     
    </asp:TextBox>
</ItemTemplate> 
```

## 编辑 1

你的结构`gridview`很奇怪

```
 <FooterStyle HorizontalAlign="Right" />
<FooterTemplate>
 <asp:Button ID="ButtonAdd1" runat="server" Text="Add Statement" 
             onclick="ButtonAdd1_Click" />
</FooterTemplate> 
```

里面`<asp:TemplateField>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:09:24.060

你可以这样做标记。根据您的要求使用标签/文本框

```
<asp:TemplateField HeaderText="Column1">  
<ItemTemplate> 
 <asp:Label ID="lblColumn1" runat="server" Text='<%# DataBinder.Eval(Container.DataItem, "Column1")%'></asp:Label>
</ItemTemplate> </asp:TemplateField> 
```

# matlab - 如何从 Matlab 中的向量中删除可变数量的连续 NaN 值？

> ID：16053308
> 
> 赞同：3
> 
> 时间：2013-04-17T06:45:41.117
> 
> 标签：matlab, interpolation

我有一个值向量，如下所示：

```
1
2
3
NaN
4
7
NaN
NaN
54
5
2
7
2
NaN
NaN
NaN
5
54
3
2
NaN
NaN
NaN
NaN
4
NaN 
```

我该如何使用

> interp1

以这种方式只插入可变数量的连续 NaN 值？例如，我只想插入那些最多有三个连续 NaN 值的 NaN 值。所以*NaN*，*NaN NaN*和*NaN NaN NaN*将被插值，但不是*NaN NaN NaN NaN*。

谢谢你的帮助=）

PS如果我不能用interp1做到这一点，有什么想法可以用另一种方式做到这一点吗？=)

举个例子，我给出的向量将变为：

```
1
2
3
interpolated
4
7
interpolated
interpolated
54
5
2
7
2
interpolated
interpolated
interpolated
5
54
3
2
NaN
NaN
NaN
NaN
4
interpolated 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T07:10:19.773

首先，找出所有`NaN`值序列的位置和长度：

```
nan_idx = isnan(x(:))';
nan_start = strfind([0, nan_idx], [0 1]);
nan_len = strfind([nan_idx, 0], [1 0]) - nan_start + 1; 
```

接下来，找到`NaN`不插值的元素的索引：

```
thr = 3;
nan_start = nan_start(nan_len > thr);
nan_end = nan_start + nan_len(nan_len > thr) - 1;
idx = cell2mat(arrayfun(@colon, nan_start, nan_end, 'UniformOutput', false)); 
```

现在，插入所有内容并将不应该插入的元素替换为`NaN`值：

```
x_new = interp1(find(~nan_idx), x(~nan_idx), 1:numel(x));
x_new(idx) = NaN; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:02:18.813

我知道这在 matlab 中是一个坏习惯，但我认为这种特殊情况需要一个循环：

```
function out = f(v)
  out = zeros(numel(v));
  k = 0;
  for i = 1:numel(v)
    if v(i) ~= NaN
      if k > 3
        out(i-k:i - 1) = ones(1, k) * NaN;             
      else
        out(i-k: i - 1) = interp1();%TODO: call interp1 with right params
      end
      out(i) = v(i)
      k = 0

    else
      k = k + 1 % number of consecutive NaN value encoutered so far
    end

 end 
```

# c# - EF：无法将 NULL 插入列

> ID：16053318
> 
> 赞同：5
> 
> 时间：2013-04-17T06:46:22.983
> 
> 标签：c#, entity-framework

我在数据库中有下表：

![在此处输入图像描述](https://i.stack.imgur.com/N0NzY.png)

`Apps`数据库中的表中已经有应用程序。我将它们呈现给最终用户，他必须将项目添加到`AppsToDomains`表中

我正在尝试将实体保存到该表中：

```
private static void FillDomains(string[] domainsWls, EntityCollection<AppToDomains_V1> AppsToDomains, 
    Guid appGuid, Guid groupId ,bool isWhiteListed)
{
    foreach (var domain in domainsWls)
    {
        AppsToDomains.Add(new AppToDomains_V1()
                              {
                                  Domain = domain,
                                  IsWhiteListed = isWhiteListed,
                                  AppId = appGuid,
                                  GroupId = groupId,
                              });
    }
} 
```

但得到以下错误：

> {"无法将值 NULL 插入到列 'ClientAppID'、表 'MamDB.dbo.Apps'；列不允许空值。INSERT 失败。\r\n语句已终止。"}

怎么可能？因为我没有在 Apps 表中添加任何行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:51:29.863

你将不得不找出什么是空的。根据您得到的异常，您发布的代码中没有问题的来源。保存更改时，您将保存所有更改。其他代码所做的更改也在您发布的当前范围内不可见。

搜索将记录添加到具有 ClientAppID 列的表的其他代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:27:20.457

根据您的架构，它表明您不会在所有字段上都允许为空，这就是 EF 使其不可为空的原因。如果您强制在 EF 中存储空值，那么在将数据保存到架构时仍然会遇到问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T07:41:32.423

您传入的参数之一可能具有 NULL 值。

```
 EntityCollection<AppToDomains_V1> AppsToDomains, 
    Guid appGuid, Guid groupId 
```

您需要调查这些对象并查看哪些与`Apps`表相关并调查空值。

# jpa - JPA：关于删除限制

> ID：16053319
> 
> 赞同：0
> 
> 时间：2013-04-17T06:46:23.640
> 
> 标签：jpa, cascade, restrict

如何在@OneToMany 关系中实现“ON DELETE RESTRICT”行为？

AFAIK，如果我没有设置 CascadeType.REMOVE，则不会删除子级，但仍会删除父级。我知道这种级联类型适用于实体对象，但在数据库中，外键都具有“NO ACTION”。如何在数据库级别设置级联类型？

我也很惊讶我没有发现谷歌关于这个主题的任何有用的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T09:06:17.677

见评论。“NO ACTION”做我想要的。如果删除违反了约束，则不会执行并抛出错误。

# blogs - 想知道在博客中的adsense

> ID：16053324
> 
> 赞同：0
> 
> 时间：2013-04-17T06:46:41.083
> 
> 标签：blogs, blogger, adsense

我想了解adsense。有没有办法使用博客创建 AdSense 帐户。如果不是意味着建议我实现它的方法，朋友们。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T09:03:59.903

> 要了解 Adsense[谷歌](http://www.google.com)它。在询问有关堆栈交换的任何问题之前，请仔细阅读[常见问题解答。](https://stackoverflow.com/faq)

什么是adsense？

Google AdSense 是由 Google Inc. 运营的一项计划，它允许 Google 内容网络网站中的发布商投放针对网站内容和受众的自动文本、图片、视频和富媒体广告。这些广告由 Google 管理、排序和维护，它们可以根据每次点击或每次展示产生收入。谷歌对每次操作成本服务进行了 beta 测试，但在 2008 年 10 月停止了它，转而支持 DoubleClick 产品（也归谷歌所有）。（来源：[-wiki](http://en.wikipedia.org/wiki/AdSense)）

> 有没有办法使用博客创建 AdSense 帐户。

有关详细步骤[http://support.google.com/affiliatenetwork/publisher/answer/156883](http://support.google.com/affiliatenetwork/publisher/answer/156883)

# siebel - 如何在 IE8 而不是 Chrome 中打开 Siebel

> ID：16053327
> 
> 赞同：0
> 
> 时间：2013-04-17T06:46:47.637
> 
> 标签：siebel

我在我的系统（Windows 7 操作系统）中安装了带有示例数据库的 Siebel 8.1 版本。我的机器上同时安装了 IE8 和 chrome。每当我打开 Siebel 客户端时，它默认以 chrome 形式打开。

要将我的 IE 更改为默认浏览器，我打开 IE 并导航到工具-> Internet 选项-> 程序并选中“告诉我 IE 是否不是默认浏览器”并单击“设为默认”按钮。完成这些更改后，我重新启动了我的 IE。

即使在我将 IE 设为默认浏览器后，Siebel 客户端仍以 chrome 方式打开。现在我的所有其他应用程序都默认在 IE 中打开，除了 Siebel 客户端。我也不想卸载 chrome。

有没有其他方法可以解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:37:36.443

您可以试试这个，如果您使用的是 64 位 Windows，请将以下内容添加到您的 Web 客户端快捷方式。这可确保使用 32 位版本的 IE：/b “C:\Program Files (x86)\Internet Explorer\iexplore.exe”</p>

# symfony - 控制器必须返回一个响应，数组给定

> ID：16053331
> 
> 赞同：6
> 
> 时间：2013-04-17T06:46:58.920
> 
> 标签：symfony, fosrestbundle

我正在尝试遵循[Will Durand](http://williamdurand.fr/2012/08/02/rest-apis-with-symfony2-the-right-way/)关于如何使用 Symfony2 设置良好的 REST API 的教程。但是，当我收到此错误时，我一开始就失败了：

```
The controller must return a response (Array(welcome => Welcome to my API) given). 
```

我的基本配置肯定有一些基本问题。我尝试了不同的`fos_rest`配置设置，但[配置参考](https://github.com/FriendsOfSymfony/FOSRestBundle/blob/master/Resources/doc/configuration-reference.md)并没有提供非常有用的帮助，因为我并不真正了解单个设置的作用。

我的设置：

```
//config.yml
sensio_framework_extra:
    view:
        annotations: true

fos_rest: ~ 
```

```
//Controller
<?php

namespace Acme\Bundle\ApiBundle\Controller;

use FOS\RestBundle\Controller\Annotations as Rest;

class DefaultController
{
    /**
     * @Rest\View
     */
    public function indexAction()
    {
        return array(
            'welcome' => 'Welcome to my API'
        );
    }
} 
```

我的 API 应该根据接受标头返回 XML 或 JSON。永远不会有 html 输出。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-17T07:19:41.057

我修好了它！配置需要如下所示：

```
sensio_framework_extra:
    view:
        annotations: false

fos_rest:
    view:
        view_response_listener: true 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-10T18:53:24.210

我花了一天时间搜索工作配置：

```
sensio_framework_extra:
    view:   {   annotations: false }
    router: {   annotations: true }

fos_rest:
    param_fetcher_listener: true
    body_listener: true
    format_listener: true
    view:
        view_response_listener: 'force'
        formats:
            xml: true
            json : true
        templating_formats:
            html: true
        force_redirects:
            html: true
        failed_validation: HTTP_BAD_REQUEST
        default_engine: twig
    routing_loader:
        default_format: json 
```

# asp.net-mvc - MVC 3 Models edited do not reflect in Views

> ID：16053332
> 
> 赞同：1
> 
> 时间：2013-04-17T06:46:59.240
> 
> 标签：asp.net-mvc, asp.net-mvc-3

I am working on MVC3\. not sure whether its the right question but it keeps on bothering me always.

I have a generic model used by multiple views. If i make any changes to the model variables for example name change it does not reflect in any of the views nor does it throw any compile time errors. The errors are thrown only at run time.

This can cause a serious issue if model changes are not checked for in each view manually.

Is there any way to overcome this manual changes in the view?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:30:36.047

有两件事可以提供帮助。第一个是[T4MVC](http://t4mvc.codeplex.com/)，尽管这实际上更多是为了让你的助手在编译时更安全。这本身不会有帮助。如果您还[遵循这些说明](https://stackoverflow.com/questions/383192/compile-views-in-asp-net-mvc)，那么它还将编译您的视图并捕获大多数这些错误。

但是请注意，编译视图会显着减慢构建过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:49:50.653

不...这是您在“修复”模型时必须注意的事情。

由于模型在运行时被评估，就像`ViewBag`and一样`ViewData`，您将不得不手动更新更改。

我想你可以用一个不错的“搜索和替换”来更新更改

# java - how to use PrinterStateReason in Java?

> ID：16053336
> 
> 赞同：0
> 
> 时间：2013-04-17T06:47:18.540
> 
> 标签：java

Need a help. I don't know how to use `PrinterStateReason` to giving printer. we can call `PrinterStateReason` in this way

`PrinterStateReason pr =PrinterStateReason.OUTPUT_AREA_FULL;`

but I want to check the state of a giving printer is it possible with `PrinterStateReason`?

example :

```
PrintService[] pservices =PrintServiceLookup.lookupPrintServices(null, null);
log.info("Printer Attrbute"+ pservices .getAttributes().toArray()); 
```

this will list down all print which are available in the giving network. I don't know how to use `PrinterStateReason` in the same way?

# r - R从一组字符串数据中创建一个唯一键

> ID：16053337
> 
> 赞同：3
> 
> 时间：2013-04-17T06:47:24.367
> 
> 标签：r

是否有快速算法/函数将字符串转换为 R 中的整数

我有一个数据框看起来像

```
id_1 id_2 id_3 date        value
1     2    3   2012-11-18   50
1     1    4   2012-05-07   100 
```

和

`strtoi(paste(df[,1],df[,3],df[,4],sep='_')`给了我一个`NA`

试图设置一个唯一的主键，我可以用它来做一些基本的算术

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T06:52:37.877

使用`digest`包

```
library(digest)
temp <- data.frame(x1=c(1:5,1),x2=c(2:6,2),stringsAsFactors=FALSE)
temp <- data.frame(temp, uid = apply(temp, 1, digest),stringsAsFactors=FALSE)) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T07:06:51.873

`digest`正如@lokheart 指出的那样很棒。

另一种选择是简单地使用`factor`s。 `factor`s 也是数字。您可以通过强制获取它们的数值`as.numeric`。

```
 kvpairs <- factor(apply(X, 1, paste, collapse="")) 
```

现在您在级别（连接的行字符串）和基础数值之间进行了配对。

```
# the numeric key of the first value
> as.numeric(kvpairs)[[1]]
[1] 2

# the value of key==2
> levels(kvpairs)[2]
[1] "1232012-11-18 50"

> kvpairs
[1] 1232012-11-18 50 1142012-05-07100
Levels: 1142012-05-07100 1232012-11-18 50 
```

请注意，如果添加重复行，它将具有相同的级别（连接时）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-17T07:30:00.880

为每行创建唯一键的另一个选项是使用`interaction`，例如：

```
 transform(dat,id =interaction(dat))

 id_1 id_2 id_3       date value                   id
1    1    2    3 2012-11-18    50  1.2.3.2012-11-18.50
2    1    1    4 2012-05-07   100 1.1.4.2012-05-07.100 
```

**编辑**

默认行为是保留所有因子水平。最好在这里使用`drop = TRUE`，因此从结果中删除未使用的因子水平。

```
 transform(dat,id =interaction(dat,drop=TRUE))

     id_1 id_2 id_3       date value                   id
    1    1    2    3 2012-11-18    50  1.2.3.2012-11-18.50
    2    1    1    4 2012-05-07   100 1.1.4.2012-05-07.100 
```

# c# - Excel 插件 (C#) + SharePoint 2003

> ID：16053343
> 
> 赞同：1
> 
> 时间：2013-04-17T06:47:43.463
> 
> 标签：c#, sharepoint, vsto, add-in, excel-addins

有生成信息表的 Excel 插件。客户端有这个 Excel 插件。

有门户 SharePoint 2003。

在 Excel 插件的客户端上，有一个按钮可以单击在 SharePoint 2003 门户上添加 Excel 文档。

如何将文档添加到门户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:01:06.027

以下链接为您提供有关 Excel 中所有加载项的信息。它还向您展示了在图像方面处理此问题的分步方法。

[http://www.add-in-express.com/docs/net-excel-automation-addins.php](http://www.add-in-express.com/docs/net-excel-automation-addins.php)

**参考以下代码：**

```
void Application_WorkbookBeforeSave(Microsoft.Office.Interop.Excel.Workbook Wb, bool SaveAsUI, ref bool Cancel)
    {
        Excel.Worksheet activeWorksheet = ((Excel.Worksheet)Application.ActiveSheet);
        Excel.Range firstRow = activeWorksheet.get_Range("A1");
        firstRow.EntireRow.Insert(Excel.XlInsertShiftDirection.xlShiftDown);
        Excel.Range newFirstRow = activeWorksheet.get_Range("A1");
        newFirstRow.Value2 = "This text was added by using code";
    } 
```

此代码属于以下链接，该链接为您提供了为 Excel 创建第一个应用程序级加载项的所有演练。

[http://msdn.microsoft.com/en-us/library/vstudio/cc668205.aspx](http://msdn.microsoft.com/en-us/library/vstudio/cc668205.aspx)

希望它有帮助。

# sql - 如何使用 VB.net 在 wince 应用程序中保存日期

> ID：16053344
> 
> 赞同：0
> 
> 时间：2013-04-17T06:47:50.137
> 
> 标签：sql, vb.net, datetime

我正在为移动扫描仪开发入站应用程序。此应用程序将直接更新到我们的主数据库。但是我在保存和调用日期时间值时遇到问题。

首先，我想将日期保存为`dd-mmm-yyyy`日期时间字段，并将时间保存为日期时间`hh:mm`字段。我收到错误说明“**转换日期时间值的算术溢出错误**”

这是我的代码：

```
cmd = New SqlCeCommand("insert into Receiving (Id,PalletNo,Batch,Run,PCode,Qty,AddUser,AddDate) VALUES (@Id,@PalletNo,@Batch,@Run,@PCode,@Qty,@AddUser,@AddDate)", cn)
cmd.Parameters.AddWithValue("@PalletNo", txtPallet.Text)
cmd.Parameters.AddWithValue("@Batch", Trim(txtBatch.Text))
cmd.Parameters.AddWithValue("@Run", Trim(txtRun.Text))
cmd.Parameters.AddWithValue("@PCode", Trim(txtPCode.Text))
cmd.Parameters.AddWithValue("@Qty", Val(txtQty.Text))
cmd.Parameters.AddWithValue("@AddUser", txtEmpNo.Text)
cmd.Parameters.AddWithValue("@Id", (ID + 1))
cmd.Parameters.AddWithValue("@AddDate", Format(Now, "dd-mmm-yyyy"))
cmd.ExecuteNonQuery() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:44:42.863

您不能以任何格式将日期时间值存储在数据库中。只需存储它并在检索值时为它们提供所需的格式。

如果您使用的是 SQL Server，手动插入日期的格式是`MM/dd/yyyy`，但在您的情况下，您可以简单地使用 SQL 函数`getdate()`来获取实际的日期时间。

# sql-server - 如何避免 SQL Server 报告服务中的参数值缓存报告

> ID：16053351
> 
> 赞同：1
> 
> 时间：2013-04-17T06:48:17.333
> 
> 标签：sql-server, reporting-services

SQL Server 报表将参数值保存在缓存中。我正在从数据库中填充参数值。如果我们重新打开报表，即使数据库中的参数值发生变化，也会列出相同的参数值。我们可以避免这种行为吗？我正在使用 WebForms 版本的 ReportViewer 控件来查看报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:58:29.357

我在 ReportViewer 控件所在的页面上添加了 <%@ OutputCache Location="None"%> 并且它可以工作。

# jquery - TinyMCE execCommand 返回未定义

> ID：16053353
> 
> 赞同：9
> 
> 时间：2013-04-17T06:48:23.310
> 
> 标签：jquery, ajax, tinymce, undefined

我正在尝试从我之前创建的特定文本区域中删除 tinyMCE，但以下命令不断产生“未定义”错误（使用 firebug 控制台检查）：

```
tinyMCE.execCommand('mceFocus', false, 'textarea-plainText');
tinyMCE.execCommand('mceRemoveControl', false, 'textarea-plainText') 
```

我已经使用 jQuery 为该特定文本区域初始化了 TinyMCE：

```
$('textarea#textarea-plainText').tinymce({
                script_url : '<?php echo base_url(); ?>/assets/js/tinymce/tinymce.min.js',
                oninit: function() {
                            $("textarea#textarea-plainText").tinymce().setContent("");
                            $("textarea#textarea-plainText").tinymce().setContent(noteSecContent.html[0].notesec_content);
                        }
            }); 
```

我也尝试使用以下命令添加 tinyMCE，但它也返回 undefined，尽管我有一个带有“textarea-plainText”ID 的 textarea：

```
$.getScript('<?php echo base_url(); ?>assets/js/tinymce/tinymce.min.js', function() {
            window.tinymce.dom.Event.domLoaded = true;
            tinyMCE.init({
                mode: 'none'
            });
            tinyMCE.execCommand('mceAddControl', false, 'textarea-plainText');
        }); 
```

简而言之，我只能使用 jquery 方法或精确方法进行初始化。但不使用 tinyMCE.execCommand。不知何故，“exeCommand”命令不起作用。

文本区域的 HTML：

```
<div id="plainTextModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="plainTextLabel" aria-hidden="true">
  <div class="modal-body">
   <textarea id='textarea-plainText'></textarea>
  </div>
  <div class="modal-footer">
    <button class="btn btn-danger" data-dismiss="modal" aria-hidden="true">Cancel</button>
    <a href="" id="confirm-delete-note-section" class="btn btn-primary">Save</a>
    <a href="" id="confirm-delete-note-section" class="btn btn-info">Save &amp; Close</a>
  </div>
</div> 
```

它是一个模态，所以它最初是隐藏的，直到调用模态。

顺便说一句，我正在使用 TinyMCE 4.0b1。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-18T18:03:05.503

你得到 undefined 因为在 4.x 中他们删除了`mceRemoveControl`并且`mceAddControl`（我不确定`mceFocus`）所以使用`mceAddEditor`and`mceRemoveEditor`代替。

因为这些代码做了与他们删除`mceRemoveControl`和`mceAddControl`清理相同的事情。

并且不要忘记`tinymce`从现在开始您需要使用小写字母。

# asp.net-mvc-3 - 在 mvc3 中将 Sql 转换为 EF

> ID：16053354
> 
> 赞同：0
> 
> 时间：2013-04-17T06:48:23.280
> 
> 标签：asp.net-mvc-3, linq, sql-server-2008, entity-framework

我需要将 sql 查询转换为 Linq 查询我的 sql 查询是

```
select *,SUBSTRING((SELECT ',' + cast(CT_LBookIssue.BK_id as varchar(max)) 
 from CT_LBookIssue FOR XML PATH('')),2,200000) as BK_id 
 from CM_LBookIssue 
```

这里 CM_LBookIssue 是父表，CT_LBookIssue 是子表。Lbl_id 是 CM_LBookIssue 的主键。但我需要将最终输出显示为单行。我在这里给出的 sql 查询返回单行，CT_LBookIssue 中的 BK_id 以逗号分隔。Bk_id 是 CT_LBookIssue 中的字段之一

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:19:57.317

如果我理解正确，你想要这样的东西：

```
var result = (from ct in context.CT_LBookIssue
    join cm in context.CM_LBookIssue on ct.SomeId equals cm.SomeId 
    select ct); 
```

注意：用`SomeId`您用来连接这些表的任何列替换上面的内容。

另请注意，EF 将 XML 列返回为`string`，因此`ct.BK_id`将返回为`string`。

这是你想要的吗？

# javascript - [].forEach.call() 在 JavaScript 中做了什么？

> ID：16053357
> 
> 赞同：155
> 
> 时间：2013-04-17T06:48:24.647
> 
> 标签：javascript, arrays, foreach, ecmascript-5, nodelist

我正在查看一些代码片段，发现多个元素在节点列表上调用函数，并将 forEach 应用于空数组。

例如我有类似的东西：

```
[].forEach.call( document.querySelectorAll('a'), function(el) {
   // whatever with the current node
}); 
```

但我不明白它是如何工作的。谁能解释一下 forEach 前面的空数组的行为以及它是如何`call`工作的？

* * *

## 回答 #1

> 赞同：233
> 
> 时间：2013-04-17T06:58:20.423

`[]`是一个数组。
这个数组根本不用。

它被放在页面上，因为使用数组可以让您访问数组原型，例如`.forEach`.

这比打字快`Array.prototype.forEach.call(...);`

接下来，`forEach`是一个将函数作为输入的函数......

```
[1,2,3].forEach(function (num) { console.log(num); }); 
```

...对于每个元素`this`（其中`this`类似于数组，因为它有 a`length`并且您可以访问它的部分，如`this[1]`），它将传递三件事：

1.  数组中的元素
2.  元素的索引（第三个元素将通过`2`）
3.  对数组的引用

最后，`.call`是函数具有的原型（它是在其他函数上调用的函数）。
`.call`将采用它的第一个参数并用`this`您传递的任何内容替换常规函数内部`call`，作为第一个参数（`undefined`或者`null`将`window`在日常 JS 中使用，或者将是您传递的任何内容，如果在“严格模式”下）。其余参数将传递给原始函数。

```
[1, 2, 3].forEach.call(["a", "b", "c"], function (item, i, arr) {
    console.log(i + ": " + item);
});
// 0: "a"
// 1: "b"
// 2: "c" 
```

因此，您正在创建一种调用`forEach`函数的快速方法，并且您正在`this`从空数组更改为所有`<a>`标签的列表，并且对于每个`<a>`顺序，您正在调用提供的函数。

# 编辑

### 逻辑结论/清理

下面有一篇文章的链接，建议我们放弃函数式编程的尝试，每次都坚持手动的内联循环，因为这种解决方案是 hack-ish 且难看。

我想说虽然`.forEach`它的帮助不如它的对应物 , `.map(transformer)`, `.filter(predicate)`，`.reduce(combiner, initialValue)`但当你真正想做的只是修改外部世界（而不是数组）n 次，同时可以访问`arr[i]`or时，它仍然有用`i`。

那么我们如何处理这种差异，因为 Motto 显然是一个有才华和知识渊博的人，我想想象我知道我在做什么/我要去哪里（不时......其他次是头头学习）？

答案实际上很简单，由于疏忽，鲍勃叔叔和克罗克福德爵士都会面对：

***清理它***。

```
function toArray (arrLike) { // or asArray(), or array(), or *whatever*
  return [].slice.call(arrLike);
}

var checked = toArray(checkboxes).filter(isChecked);
checked.forEach(listValues); 
```

现在，如果您质疑自己是否需要这样做，答案很可能是否定的……
这件事是由……现在每个（？）具有高阶特性的库完成的。
如果您使用 lodash 或 underscore 甚至 jQuery，它们都会有一种获取一组元素并执行 n 次操作的方法。
如果你不使用这样的东西，那么一定要自己写。

```
lib.array = (arrLike, start, end) => [].slice.call(arrLike, start, end);
lib.extend = function (subject) {
  var others = lib.array(arguments, 1);
  return others.reduce(appendKeys, subject);
}; 
```

### ES6(ES2015) 及更高版本的更新

`slice( )`/ /etc 辅助方法不仅`array( )`可以让那些想要像使用数组一样使用列表的人生活更轻松（因为他们应该），而且对于那些可以在相对较近的 ES6+ 浏览器中操作的人来说也是如此。未来，或者今天在 Babel 中的“转译”，你有内置的语言特性，这使得这种类型的事情变得不必要。

```
function countArgs (...allArgs) {
  return allArgs.length;
}

function logArgs (...allArgs) {
  return allArgs.forEach(arg => console.log(arg));
}

function extend (subject, ...others) { /* return ... */ }

var nodeArray = [ ...nodeList1, ...nodeList2 ]; 
```

超级干净，非常好用。
查找***Rest***和***Spread***运算符；在 BabelJS 网站上试用它们；如果您的技术堆栈是有序的，请使用 Babel 和构建步骤在生产中使用它们。

* * *

没有充分的理由不能使用从非数组到数组的转换......只是不要把你的代码弄得一团糟，除了在任何地方粘贴同样丑陋的行*之外什么都不做。*

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2013-04-17T06:52:45.440

该[`querySelectorAll`方法](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)返回 a `NodeList`，它类似于数组，但不完全是数组。因此，它没有`forEach`方法（哪些数组对象通过 继承`Array.prototype`）。

由于 a`NodeList`类似于数组，因此数组方法实际上将对其起作用，因此通过使用，您可以在 的上下文中`[].forEach.call`调用该方法，就好像您能够简单地执行.`Array.prototype.forEach``NodeList``yourNodeList.forEach(/*...*/)`

请注意，空数组文字只是扩展版本的快捷方式，您可能也会经常看到：

```
Array.prototype.forEach.call(/*...*/); 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-04-17T07:00:33.950

其他答案已经很好地解释了这段代码，所以我只是添加一个建议。

这是一个很好的代码示例，应该为了简单和清晰而重构。不要使用`[].forEach.call()`or`Array.prototype.forEach.call()`每次执行此操作，而是使用它创建一个简单的函数：

```
function forEach( list, callback ) {
    Array.prototype.forEach.call( list, callback );
} 
```

现在你可以调用这个函数而不是更复杂和晦涩的代码：

```
forEach( document.querySelectorAll('a'), function( el ) {
   // whatever with the current node
}); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-17T06:55:29.580

使用它可以更好地编写

```
Array.prototype.forEach.call( document.querySelectorAll('a'), function(el) {

}); 
```

它所做的是`document.querySelectorAll('a')`返回一个类似于数组的对象，但它不从`Array`类型继承。所以我们`forEach`从对象调用方法，`Array.prototype`上下文作为返回的值`document.querySelectorAll('a')`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-05-21T19:21:16.507

```
[].forEach.call( document.querySelectorAll('a'), function(el) {
   // whatever with the current node
}); 
```

它与以下内容基本相同：

```
var arr = document.querySelectorAll('a');
arr.forEach(function(el) {
   // whatever with the current node
}); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-17T06:51:34.490

一个空数组`forEach`在其原型中有一个属性，它是一个 Function 对象。（空数组只是获取对`forEach`所有`Array`对象都具有的函数的引用的一种简单方法。）函数对象又具有一个`call`也是函数的属性。当您调用函数的`call`函数时，它会使用给定的参数运行该函数。第一个参数成为`this`被调用函数。

[您可以在此处](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)找到该`call`函数的文档。文档在[这里](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)。`forEach`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-05-20T18:39:39.393

此页面上有很多很好的信息（请参阅[答案](https://stackoverflow.com/a/16053538/3029276)+[答案](https://stackoverflow.com/a/16053436/3029276)+[评论](https://stackoverflow.com/questions/16053357/what-does-foreach-call-do-in-javascript#comment96252493_16053538)），但我最近遇到了与 OP 相同的问题，并且需要进行一些挖掘才能获得全貌。所以，这是一个简短的版本：

目标是在本身没有这些方法[`Array`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)的类数组上使用方法。[`NodeList`](https://developer.mozilla.org/en-US/docs/Web/API/NodeList)

一个较旧的模式通过 选择了 Array 的方法[`Function.call()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/call)，并使用了数组文字 ( `[]`)，而不是`Array.prototype`因为它的类型更短：

```
[].forEach.call(document.querySelectorAll('a'), a => {}) 
```

一种较新的模式（ECMAScript 2015 后）是使用[`Array.from()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from)：

```
Array.from(document.querySelectorAll('a')).forEach(a => {}) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-11-27T18:45:03.610

想更新这个老问题：

`[].foreach.call()`在现代浏览器中使用循环元素的原因已经基本结束。我们可以`document.querySelectorAll("a").foreach()`直接使用。

> NodeList 对象是节点的集合，通常由 Node.childNodes 等属性和 document.querySelectorAll() 等方法返回。
> 
> 尽管 NodeList 不是数组，**但可以使用 forEach() 对其进行迭代**。也可以使用 Array.from() 将其转换为真正的 Array。
> 
> 但是，一些较旧的浏览器没有实现 NodeList.forEach() 或 Array.from()。这可以通过使用 Array.prototype.forEach() 来规避——请参阅本文档的示例。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-09-18T05:42:34.430

只需添加一行：

```
NodeList.prototype.forEach = HTMLCollection.prototype.forEach = Array.prototype.forEach; 
```

瞧！

```
document.querySelectorAll('a').forEach(function(el) {
  // whatever with the current node
}); 
```

享受 ：-）

**警告：** NodeList 是一个全局类。如果您编写公共图书馆，请不要使用此建议。但是，当您在网站或 node.js 应用程序上工作时，这是提高自我效能的一种非常方便的方法。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-07-02T05:59:44.637

只是一个快速而肮脏的解决方案，我总是最终使用。我不会碰原型，就像好的做法一样。当然，有很多方法可以让它变得更好，但你明白了。

```
const forEach = (array, callback) => {
  if (!array || !array.length || !callback) return
  for (var i = 0; i < array.length; i++) {
    callback(array[i], i);
  }
}

forEach(document.querySelectorAll('.a-class'), (item, index) => {
  console.log(`Item: ${item}, index: ${index}`);
}); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-04-17T07:00:03.120

`[]`总是返回一个新数组，它等效于`new Array()`但保证返回一个数组，因为`Array`可以被用户覆盖而`[]`不能。所以这是获取 的原型的安全方法`Array`，然后如前所述，`call`用于在类似数组的节点列表 (this) 上执行函数。

> 使用给定的 this 值和单独提供的参数调用函数。[mdn](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Function/call)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-09-27T10:51:21.617

[Norguard](https://stackoverflow.com/a/16053538/1355416)解释了做*什么* `[].forEach.call()`和[James Allardice](https://stackoverflow.com/a/16053436/1355416) *为什么*我们这样做：因为 querySelectorAll 返回一个`NodeList`没有 forEach 方法的...

除非您拥有现代浏览器，例如 Chrome 51+、Firefox 50+、Opera 38、Safari 10。

如果没有，您可以添加[Polyfill](http://%20https://developer.mozilla.org/en-US/docs/Web/API/NodeList/forEach#Polyfill)：

```
if (window.NodeList && !NodeList.prototype.forEach) {
    NodeList.prototype.forEach = function (callback, thisArg) {
        thisArg = thisArg || window;
        for (var i = 0; i < this.length; i++) {
            callback.call(thisArg, this[i], i, this);
        }
    };
} 
```

# iphone - 如何在 iPhone sdk 中将 HTML 页面附加到我的邮件编辑器？

> ID：16053359
> 
> 赞同：2
> 
> 时间：2013-04-17T06:48:28.740
> 
> 标签：iphone, html, ios, mfmailcomposer

我在 UIWebView 中显示了一个 html 文件。我需要将当前页面作为附件和附件作为 html 文件邮寄。我的代码，

```
-(void)mailClick
{
         NSLog(@"mail");
         if ([MFMailComposeViewController canSendMail])
         {
    //atableView.scrollEnabled=YES;
    //[socailNetworkView removeFromSuperview];
    //  self.navigationItem.title = @"Contents";
    MFMailComposeViewController *mailViewController =           [[MFMailComposeViewController alloc] init];
    mailViewController.mailComposeDelegate = self;
    [mailViewController setSubject:@""];
    NSString *fullPath =[[NSBundle mainBundle] pathForResource:@"first" ofType:@"html"];
    NSData *myData = [NSData dataWithContentsOfFile:fullPath];
    [mailViewController addAttachmentData:myData
                       mimeType:@"text/plain"
                       fileName:@"File_Name"];
    [mailViewController setMessageBody:@"" isHTML:NO];
    NSString *string = [NSString stringWithFormat:@"", nil];

    NSArray *mailArr = [[NSArray alloc] initWithObjects:string,nil];
    [mailViewController setToRecipients:mailArr];
    [self presentModalViewController:mailViewController animated:YES];
    [mailViewController release];

}

else 
    {

    NSLog(@"Device is unable to send email in its current state");

}
  }

- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error;

{

NSLog(@"Mail");
NSString  *str=@"";
switch (result) {
    case MFMailComposeResultCancelled:
        NSLog(@"Mail send canceled.");
        str=@"\nMail sending cancelled";
        msgLabel.text=str;
        [msgLabel setFont:[UIFont fontWithName:@"Arial" size:18]];
        msgLabel.textColor=[UIColor colorWithRed:(54.0/255.0) green:(2.0/255) blue:(1.0/255) alpha:1.0];

        /*
         Execute your code for canceled event here ...
         */
        break;
    case MFMailComposeResultSaved:
        NSLog(@"Mail saved.");
        str=@"Mail saved";
        /*
         Execute your code for email saved event here ...
         */
        break;
    case MFMailComposeResultSent:
        NSLog(@"Mail sent.");
        str=@"Mail sent";
        /*
         Execute your code for email sent event here ...
         */
        break;
    case MFMailComposeResultFailed:
        str=@"Mail not sent";
        NSLog(@"Mail send error: %@.", [error localizedDescription]);
        /*
         Execute your code for email send failed event here ...
         */
        break;
    default:
        break;
}

[self dismissModalViewControllerAnimated:YES];
} 
```

使用此代码可以发送带有指定 html 文件（整个 html 文件）作为附件的邮件。并以文本文件的形式很好地接收邮件。现在我怎样才能将我当前页面和附件的邮件作为 html 文件发送？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:00:56.890

您必须将 mimeType 设置为`mimeType:@"text/html"`. 我认为没有其他方法可以在 MFMailComposer 中将特定页面（当前页面）作为附件发送。请参阅此[链接](http://www.iana.org/assignments/media-types)以设置 mimetype

# javascript - 如何通过属性值从 jQuery 对象中获取特定元素？

> ID：16053362
> 
> 赞同：0
> 
> 时间：2013-04-17T06:48:41.757
> 
> 标签：javascript, jquery, loops, attributes

我有一个网站，其中包含以下几个元素：

```
<g class="box" rel="1">...</g>
<g class="box" rel="2">...</g>
<g class="box" rel="3">...</g>
<g class="box" rel="4">...</g>
<g class="box" rel="5">...</g> 
```

在我的代码中，我想在循环中更改这些元素的一些属性。我一开始做的是这个（它对我来说很好）：

```
for(var i = 0, l = relValList.length; i < l; i+=1){
    $(".box[rel=" + relValList[i] + "]").children().first().attr("fill","#000000");
} 
```

现在我阅读了一篇 jQuery 最佳实践文章，在那里我发现了一种叫做缓存的东西来提高性能。

所以我试试看。

```
//call this when page loaded
var boxes = $(".box");

//the good old loop
for(var i = 0, l = relValList.length; i < l; i+=1){
   //here is my problem
   boxes ????
} 
```

通过 rel 属性从盒子中获取特定元素的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:51:36.193

您可以使用`filter`方法，它遍历选定的元素并返回匹配的元素。`filter`方法比链式字符串选择器快得多。

```
var $boxes = $(".box"),
    $goldenOnes = $boxes.filter('[rel="golden"]'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:50:58.893

试试[`filter`](http://api.jquery.com/filter/)。它将选择器应用于现有的 jQuery 选择。

```
box.filter("[rel=" + relValList[i] + "]").children().first().attr("fill","#000000"); 
```

或者，您甚至不必遍历这些框。您可以匹配具有`rel`如下属性的每个框的第一个孩子：

```
$('.box[rel] :first-child').attr("fill","#000000"); 
```

# django - 确保只有一个工作人员在运行多个工作人员的金字塔网络应用程序中启动 apscheduler 事件

> ID：16053364
> 
> 赞同：42
> 
> 时间：2013-04-17T06:48:52.923
> 
> 标签：django, pyramid, wsgi, gunicorn, apscheduler

我们有一个用金字塔制作的网络应用程序，并通过 gunicorn+nginx 提供服务。它适用于 8 个工作线程/进程

我们需要工作，我们选择了调度程序。这是我们启动它的方式

```
from apscheduler.events import EVENT_JOB_EXECUTED, EVENT_JOB_ERROR
from apscheduler.scheduler import Scheduler

rerun_monitor = Scheduler()
rerun_monitor.start()
rerun_monitor.add_interval_job(job_to_be_run,\
            seconds=JOB_INTERVAL) 
```

问题是 gunicorn 的所有工作进程都选择了调度程序。我们尝试实现文件锁定，但它似乎不是一个足够好的解决方案。确保在任何给定时间只有一个工作进程选择预定事件并且没有其他线程在下一个之前选择它的最佳方法是什么`JOB_INTERVAL`？

如果我们决定稍后切换到 apache2+modwsgi，该解决方案甚至需要使用 mod_wsgi。它需要与作为服务员的单进程开发服务器一起使用。

### 来自赏金赞助者的更新

我面临着 OP 描述的相同问题，只是使用 Django 应用程序。如果原始问题，我很确定添加此细节不会有太大变化。出于这个原因，为了获得更多的可见性，我还用 标记了这个问题`django`。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2016-10-20T18:47:56.910

因为 Gunicorn 从 8 个工作人员开始（在您的示例中），所以这会将应用程序 8 次**分叉**为 8 个进程。这 8 个进程是从主进程派生出来的，**主**进程监控每个进程的状态并能够添加/删除工作人员。

每个进程都会获得您的 APScheduler 对象的副本，该对象最初是您的主进程的 APScheduler 的精确副本。这导致每个“nth”工作人员（进程）执行每个作业总共“n”次。

解决此问题的方法是使用以下选项运行 gunicorn：

```
env/bin/gunicorn module_containing_app:app -b 0.0.0.0:8080 --workers 3 --preload 
```

该`--preload`标志告诉 Gunicorn “*在分叉工作进程之前加载应用程序*”。通过这样做，每个工作人员都*“获得了应用程序的副本，已经由 Master 实例化，而不是实例化应用程序本身”*。这意味着以下代码仅在 Master 进程中执行一次：

```
rerun_monitor = Scheduler()
rerun_monitor.start()
rerun_monitor.add_interval_job(job_to_be_run,\
            seconds=JOB_INTERVAL) 
```

此外，我们需要将**jobstore设置为****:memory:**以外的任何内容。这样，虽然每个 worker 都是自己的独立进程，无法与其他 7 个进程进行通信，但通过使用本地数据库（而不是内存），我们保证一个作业存储上的 CRUD 操作的真实点。

```
from apscheduler.schedulers.background import BackgroundScheduler
from apscheduler.jobstores.sqlalchemy import SQLAlchemyJobStore

rerun_monitor = Scheduler(
    jobstores={'default': SQLAlchemyJobStore(url='sqlite:///jobs.sqlite')})
rerun_monitor.start()
rerun_monitor.add_interval_job(job_to_be_run,\
            seconds=JOB_INTERVAL) 
```

最后，我们想使用**BackgroundScheduler**，因为它实现了`start()`. 当我们调用`start()`BackgroundScheduler 时，会在后台启动一个新线程，负责调度/执行作业。这很重要，因为请记住在步骤 (1) 中，由于我们的`--preload`标志，我们仅`start()`在 Master Gunicorn 进程中执行该函数一次。根据定义，**分叉的进程不会继承其父进程的线程，**因此每个工作进程都不会运行 BackgroundScheduler 线程。

```
from apscheduler.jobstores.sqlalchemy import SQLAlchemyJobStore

rerun_monitor = BackgroundScheduler(
    jobstores={'default': SQLAlchemyJobStore(url='sqlite:///jobs.sqlite')})
rerun_monitor.start()
rerun_monitor.add_interval_job(job_to_be_run,\
            seconds=JOB_INTERVAL) 
```

由于这一切，每个 Gunicorn 工作者都有一个 APScheduler 被欺骗进入“已启动”状态，但实际上并没有运行，因为它丢弃了它的父线程！每个实例还能够更新作业存储数据库，只是不执行任何作业！

查看[flask-APScheduler](https://github.com/viniciuschiele/flask-apscheduler)以获得在 Web 服务器（如 Gunicorn）中运行 APScheduler 的快速方法，并为每个作业启用 CRUD 操作。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-12-04T20:52:03.667

我找到了一个适用于具有非常相似问题的 Django 项目的修复程序。我只是在调度程序第一次启动时绑定一个 TCP 套接字并随后检查它。我认为以下代码只需稍作调整也可以为您工作。

```
import sys, socket

try:
    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    sock.bind(("127.0.0.1", 47200))
except socket.error:
    print "!!!scheduler already started, DO NOTHING"
else:
    from apscheduler.schedulers.background import BackgroundScheduler
    scheduler = BackgroundScheduler()
    scheduler.start()
    print "scheduler started" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-08T15:59:02.623

简短的回答：你不能正确地做到这一点而没有后果。

我以 Gunicorn 为例，但对于 uWSGI 来说基本相同。运行多个进程时有各种 hack，仅举几例：

1.  使用`--preload`选项
2.  使用`on_starting`hook 启动 APScheduler 后台调度程序
3.  使用`when_ready`hook 启动 APScheduler 后台调度程序

它们在一定程度上起作用，但可能会出现以下错误：

1.  工人经常超时
2.  没有作业时调度程序挂起[https://github.com/agronholm/apscheduler/issues/305](https://github.com/agronholm/apscheduler/issues/305)

APScheduler 设计为在单个进程中运行，它可以完全控制将作业添加到作业存储的过程。它使用`threading.Event`'s`wait()`和`set()`方法来协调。如果它们由不同的进程运行，则协调将不起作用。

可以在一个进程中在 Gunicorn 中运行它。

1.  仅使用一个工作进程
2.  使用`post_worker_init`钩子启动调度程序，这将确保调度程序只在工作进程中运行，而不是在主进程中运行

作者还指出，多个进程共享作业存储量是不可能的。[https://apscheduler.readthedocs.io/en/stable/faq.html#how-do-i-share-a-single-job-store-among-one-or-more-worker-processes](https://apscheduler.readthedocs.io/en/stable/faq.html#how-do-i-share-a-single-job-store-among-one-or-more-worker-processes)他还提供了解决方案使用 RPyC。

虽然用 REST 接口包装 APScheduler 是完全可行的。您可能需要考虑将其作为一个独立的应用程序提供给一名工作人员。换句话说，如果您有其他端点，请将它们放在另一个应用程序中，您可以在其中使用多个工作人员。

# jakarta-ee - 处理加载的片段

> ID：16053373
> 
> 赞同：1
> 
> 时间：2013-04-17T06:49:15.750
> 
> 标签：jakarta-ee, thymeleaf

我对加载片段有一些具体的问题。

我们在表单框架中动态加载片段，它仅从表单 bean 定义生成带有 Java 反射的表单。事情是处理加载的片段（不知道为什么），在处理关闭表单标签之后（`</form>`）。因为我们只在所选表单的开始标签到结束标签中携带表单上下文（因为同一页面上可能有更多表单），所以会发生异常，而 thymeleaf 会推迟加载片段的处理。

加载片段的代码：

```
public static List<Node> loadFragment(Arguments arguments, String fragmentName, String fragmentPath) { 
        IFragmentSpec fragmentSpec = new ElementAndAttributeNameFragmentSpec(null, "th:fragment", fragmentName, true); 
        FragmentAndTarget fat = new FragmentAndTarget(fragmentPath, fragmentSpec); 
        return fat.extractFragment(arguments.getConfiguration(), arguments, arguments.getTemplateRepository()); 
} 
```

此代码在 中调用`InitializerElProcessor`，其中整个表单构建为 html。片段已按应有的方式加载，但未由 thymeleaf 处理。如何加载已由百里香处理的片段？或者我们应该如何强制 thymeleaf 立即处理这个节点（加载的结果）？

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T19:22:54.143

经过数小时的调试，我找到了它。
当我提取片段内容并将其附加到 DOM 树中的当前已处理元素时，将跳过所有新的嵌套节点（更好的是，跳过第一个节点，并且使用该节点，它的所有子节点都是也跳过）。当遍历继续时（第 4 点），这部分代码在`Node`类中处理：

```
void processNode(final Arguments arguments, final boolean processTextNodes, final boolean processCommentNodes) { 
    // some code 
    if (!isPrecomputed()) { 
        precomputeNode(arguments.getConfiguration()); 
    } 

    if (!isSkippable()) { 
            // processing itself 
            ... 

            // move processing to children, but does not happend if node is marked as skippable 
            doAdditionalProcess(executionArguments, executionArguments.getProcessTextNodes(), executionArguments.getProcessCommentNodes()); 
    } 
} 
```

因为从fragment中提取的节点没有标记为`precomputed`，所以`precomputeNode`方法如下：

```
final void precomputeNode(final Configuration configuration) { 
    if (!isPrecomputed()) { 
        this.processors = configuration.computeProcessorsForNode(this); 
        if (this.processors == null || this.processors.size() == 0) { 
            this.skippable = true; 
        } else { 
            unsafeSetSkippable(false); 
        } 
            setPrecomputed(true); 
    } 
    doAdditionalPrecomputeNode(configuration); 
} 
```

因为 node 没有被标记为`precomputed`，所以方法`computeProcessorsForNode()`被调用。此方法返回`null`，然后将节点标记为`skippable`。正如评论所说，当前节点的兄弟姐妹应该在方法中将此节点设置为不可跳过`doAdditionalPrecomputeNode()`。*不幸的是，这不会发生。*

经过更多调试后，我发现，必须在从片段中提取的所有节点上调用方法`node.setProcessable(true);`以避免将第一个节点设置为`skippable`. 我仍然不知道这是一个错误还是功能..

# opencv - OpenCV Haartraining 不会永远结束

> ID：16053378
> 
> 赞同：0
> 
> 时间：2013-04-17T06:49:34.147
> 
> 标签：opencv, machine-learning, computer-vision, adaboost, training-data

这是我第一次使用 opencv 的 haartraining。

只是为了练习，我使用了 35 个正图像和 45 个负图像。

但是当我尝试从数据中训练时，它不会永远完成，

即使参数被极度调整。

（最小命中率 = 0.001，最大误报率 = 0.999

由于这个极端值，我认为不会花费很多时间）

我的实验一定有什么问题？

这是我的命令和参数。

```
$opencv_haartraining -data Training -vec samples.vec -bg negatives.dat -nstages 2 -nsplits     2 -minhitrate 0.001 -maxfalsealarm 0.999 -npos 30 -nneg 40 -w 20 -h 20 -nonsym -mem 512 -mode      ALL -minpos 10 
```

和结果。

```
Data dir name: Training
Vec file name: samples.vec
BG  file name: negatives.dat, is a vecfile: no
Num pos: 30
Num neg: 40
Num stages: 2
Num splits: 2 (tree as weak classifier)
Mem: 512 MB
Symmetric: FALSE
Min hit rate: 0.001000
Max false alarm rate: 0.999000
Weight trimming: 0.950000
Equal weights: FALSE
Mode: ALL
Width: 20
Height: 20
Applied boosting algorithm: GAB
Error (valid only for Discrete and Real AdaBoost): misclass
Max number of splits in tree cascade: 0
Min number of positive samples per cluster: 10
Required leaf false alarm rate: 0.998001
Stage 0 loaded
Stage 1 loaded
Stage 2 loaded
Stage 3 loaded
Stage 4 loaded

Tree Classifier
Stage
+---+---+---+---+---+
|  0|  1|  2|  3|  4|
+---+---+---+---+---+

   0---1---2---3---4

Number of features used : 125199

Parent node: 4

*** 1 cluster ***
POS: 30 32 0.937500 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T07:01:20.727

我认为您使用的是 OpenCV_Haartraining 是否正确？

如果是这样，这是一个已弃用的应用程序，您应该使用 opencv_traincascades。

这会

```
- A. Speed up the time taken to classify 
 - B. Have better support 
```

请参阅这些链接以进一步阅读 [Training Vs TrainCascade](http://answers.opencv.org/question/757/haartraining-vs-traincascade-object-detection/)和[TrainCascade Wiki](http://docs.opencv.org/doc/user_guide/ug_traincascade.html)。

编辑：

此外，更改您的最小命中率和 maxFalseAlarm 率。

我建议使用 0.4 & 0.95 之类的东西来开始。

原因是它需要永远达到 0.999 和 0.0001，如果有的话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T06:57:18.967

这很正常。参考[本教程](http://note.sonots.com/SciSoftware/haartraining.html)和我自己的经验，培训通常需要几天甚至一周的时间。引用教程：

> 仅供参考：我建议您同时进行不同的训练，因为您必须在训练期间等待很多天（可能需要一周时间）。我通常进行实验 1\. 在周五运行 haartraining 2\. 完全忘记它 3\. 在下周五查看结果 4\. 运行另一个 haartraining（循环）。

# python - “只能 POST 到 CGI 脚本”501 错误

> ID：16053379
> 
> 赞同：0
> 
> 时间：2013-04-17T06:49:38.387
> 
> 标签：python

我在 Python 中运行本地 CGIHttpServer，并且正在使用这个 python 程序在该服务器中运行一些东西：

```
''' submit data to form using robots '''
import urllib
import pprint

# hacking gullible app
url = "http://localhost:8000/cgi-bin/w5/captcha.example/vote_app/gullible_app.py"

def vote(lecturer):
    params = urllib.urlencode({'lecturer': lecturer,'submit':'submit'})
    f = urllib.urlopen(url, params)
    pprint.pprint(f.fp.readlines())

vote("Ivo") 
```

这告诉我它只能 POST 到 CGI 脚本，我觉得这很奇怪，因为 python 脚本在我的网络浏览器中打开该地址就好了。所以......它在我的浏览器中运行良好，但当 python 程序尝试发布到该 URL 时却没有。这里发生了什么？（互联网上关于这个的信息很少——我已经尝试自己研究这个问题来解决它，但只有 3-4 人提到这个问题）

编辑：对不起，伙计们！我不明白 GET 和 POST。我应该在问题中包含这个 - 它是 python 程序“gullible_app.py”。如您所见，表单执行“POST”操作

```
import cgi
import cgitb; cgitb.enable()

# form generation
# -------------------------------------------------------
def print_form():
    print "Content-Type: text/html\n"
    print '''
<html>
<body>
    <form method="post" action="gullible_app.py">
        <p>Select your favorite lecturer:</p>
        <input type="radio" name="lecturer" value="harald" /> Harald
        <input type="radio" name="lecturer" value="ivo" /> Ivo
        <input type="submit" name="submit" />
    </form>
</body>
</html>
'''

# response generation
# -------------------------------------------------------
def print_response():
    print 'Content-Type: text/html\n'
    print '<html><body>Thank you for your vote!</body></html>'

def main():
    user_data = cgi.FieldStorage()
    if "submit" in user_data: # user press "submit"
        lecturer = user_data.getfirst("lecturer")
        f = open( "cgi-bin\\w5\\captcha.example\\vote_app\\votes.txt", "a" )
        f.write( lecturer+'\n' )
        f.close()
        print_response()
    else: # display the form
        print_form()

main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:01:20.253

服务器端程序（你没有给出，所以我们不能肯定地说）只接受 GET 请求，而不接受对所示 url 的 POST 请求。

urllib 使 urlopen 像您所做的那样充当 POST。有关如何发出 GET 请求的示例，请参阅文档[http://docs.python.org/2/library/urllib.html#examples](http://docs.python.org/2/library/urllib.html#examples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:58:31.623

答案似乎在文档中。

您的错误信息：[`Error 501, “Can only POST to CGI scripts”, is output when trying to POST to a non-CGI url.`](http://docs.python.org/2/library/cgihttpserver.html#CGIHTTPServer.CGIHTTPRequestHandler.do_POST)

大提示：[`run the CGI script, instead of serving it as a file, if it guesses it to be a CGI script`](http://docs.python.org/2/library/cgihttpserver.html#CGIHTTPServer.CGIHTTPRequestHandler)

您需要修改的内容：[`cgi_directories`](http://docs.python.org/2/library/cgihttpserver.html#CGIHTTPServer.CGIHTTPRequestHandler.cgi_directories)

因此，要么将您的（Python）CGI 脚本放在默认子目录之一中，要么修改它`cgi_directories`以使其正确“猜测”该 URL 应该是 CGI 脚本。

# matlab - SVD 在 Matlab 和 OpenCV 中计算不同的结果

> ID：16053380
> 
> 赞同：15
> 
> 时间：2013-04-17T06:49:41.543
> 
> 标签：matlab, opencv, linear-algebra, svd

我想知道为什么在 Matlab 和 OpenCV 中 SVD 计算的结果存在符号差异。我输入相同的矩阵

```
 3.65E+06  -2.09E+06   0
 YY =    -2.09E+06  2.45E+06    0
           0         0          0

[U,S,V] = svd(YY);//Matlab

        -0.798728902689475  0.601691066917623   0
   V =  0.601691066917623   0.798728902689475   0
         0                  0                   1

cv::SVD::compute(YY, S, U, V);//opencv

     0.798839   -0.601544   0
V =  0.601544   0.798839    0
     0          0           1 
```

我知道他们使用相同的算法，为什么会有符号差异？谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-19T07:28:43.327

您使用的是哪个版本的 OpenCV？

从[http://code.opencv.org/issues/1498](http://code.opencv.org/issues/1498) 看来，最近版本的 OpenCV 似乎不再使用 LAPACK 来执行 SVD（我认为是 Matlab 使用的）。因此，使用相同算法的假设可能不正确。

当然 YY=U *S* V'

如果你否定 U 和 V 的第一列：

```
U(:,1)=-U(:,1);
V(:,1)=-V(:,1) 
```

你会发现 U *S* V' 仍然等于 YY。这适用于您的特定情况，因为 YY 是对称的 (YY=YY')。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-23T20:16:20.357

SVD 的结果不必是唯一的。例如，对于任何单一的 V = U，I = UIV'。您在上面给出的示例特别是秩不足，因此没有理由期望唯一性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-18T10:26:15.333

奇异值分解只定义到一个符号；U 和 V 的符号是任意的，如果它们在 MATLAB 和 OpenCV 之间不同，则不表示存在问题。

# postgresql - 如何使用 postgresql 构建 morph 字典？

> ID：16053381
> 
> 赞同：0
> 
> 时间：2013-04-17T06:49:43.800
> 
> 标签：postgresql, dictionary, morphological-analysis

我需要为自然语言创建特殊的形态词汇。每个单词都应该包含一组特征。PostgreSQL 9.* 在这种情况下有帮助吗？我的意思是：我应该从头开始创建表还是有一些预定义的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T02:09:43.583

您正在寻找的东西远远超出了 PostgreSQL 的典型解决方案旨在构建的内容。您最好的选择是构建您自己的自定义表格。

现在，我只是对语言学主题感兴趣的读者，但对于形态分析，我怀疑你会遇到不同语言具有根本不同的形态系统的问题。例如，南岛语、印欧语和阿萨巴斯语中的形态学概念（我知道所有这些都足够危险）并没有让我觉得非常有利于单一的关系模型。例如，对于 IE 中的动词时态，我们可能有不同的形态，但其他两个则没有。南岛语言中的重复增加了一些曲线球（特别是在处理前缀/后缀/中缀组合时），并且 Athabascan 的插槽不符合其他两种语言对词性的期望。

所以我认为你不可能找到很多通用的变形数据库模式。事物可能是特定于语言和特定目的的。例如，建立一个数据库来寻找中古英语和现代英语之间的形态变化，与仅仅分析推文等当前形态的东西完全不同。

# java - 如何使用处理程序立即启动可运行文件

> ID：16053389
> 
> 赞同：2
> 
> 时间：2013-04-17T06:50:12.123
> 
> 标签：java, android, android-mediaplayer, handlers

我们如何才能立即启动 runnable 而不是将 runnable 添加到消息队列中......我们可以这样做......？

我观察到 post 方法在执行中有一些延迟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:56:07.830

在 Android 中 post 在主线程上执行，所以 Runnable 被添加到消息队列中然后被处理。

您可以创建自己的[ExecutorService](http://developer.android.com/reference/java/util/concurrent/ExecutorService.html)并将您的 Runnables 直接提交给它，它将使用线程池来执行您提交的任何 Runnables，在 submit() 和 Runnable 开始运行之间应该没有真正的延迟。这些不会在主 UI 线程上运行，只是需要牢记。

# android - 注册一个receiver来监听shake事件

> ID：16053390
> 
> 赞同：0
> 
> 时间：2013-04-17T06:50:15.030
> 
> 标签：android, accelerometer

我们可以注册一个接收器来收听震动事件吗？是否有任何接收者意图这样做，我无法找到它。我的要求是在摇动手机时启动我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:46:25.643

没有接收器来获取抖动事件。你已经在服务中写了这个。为此，您的应用程序应在后台运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:52:48.790

您可以注册加速度计传感器并在读数中查找尖峰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:53:32.370

是的，你可以。你所要做的就是实现 SensorListener 接口。然后实现一个算法来检测手机的移动是否是震动。

[看一下这个](http://android.hlidskialf.com/blog/code/android-shake-detection-listener)

# ios - 如何在iphone中的字典数据数组中对字典数组进行排序

> ID：16053391
> 
> 赞同：3
> 
> 时间：2013-04-17T06:50:15.297
> 
> 标签：ios, nsmutabledictionary, nssortdescriptor

我在字典数据数组中有字典数组，我需要根据用户选择在字典数组内进行排序。

例如我的数据值是

```
sortResultArray--(
        {
        alertSeverity = 1;
        customerName = TPMG;
        endDate = "05-05-2013";
        isProjectHide = 1;
        kpiData =         (
                        {
                kpiActual = 18;
                kpiName = Issue;
                kpiPlanned = "";
                kpiUnit = "";
            },
                        {
                kpiActual = 7;
                kpiName = Progress;
                kpiPlanned = "";
                kpiUnit = "%";
            },
                            );
        lastInvoiceDate = "05-04-2013";
        nextBillingDate = "05-04-2013";
        nextMilestoneDate = "10-04-2013";
        nextReviewDate = "08-04-2013";
        plannedCompletionDate = "04-05-2013";
        projectID = 3000;
        projectName = "Rain Harvesting";
        projectSortType = "";
        projectStatus = 1;
        startDate = "01-01-2013";
    },
        {
        alertSeverity = 2;
        customerName = Florida;
        endDate = "12-12-2014";
        isProjectHide = 1;
        kpiData =         (
                                {
                kpiActual = 20;
                kpiName = Issue;
                kpiPlanned = "";
                kpiUnit = "";
            },
                        {
                kpiActual = 10;
                kpiName = Progress;
                kpiPlanned = "";
                kpiUnit = "%";
            },
                         );
        lastInvoiceDate = "12-05-2012";
        nextBillingDate = "12-05-2013";
        nextMilestoneDate = "16-05-2012";
        nextReviewDate = "12-05-2012";
        plannedCompletionDate = "12-08-2014";
        projectID = 4000;
        projectName = "Bridge Planning";
        projectSortType = "";
        projectStatus = 1;
        startDate = "12-12-2011";
    },
        {
        alertSeverity = 3;
        customerName = BIRO;
        endDate = "01-01-2013";
        isProjectHide = 1;
        kpiData =         (
                        {
                kpiActual = 16;
                kpiName = Issue;
                kpiPlanned = "";
                kpiUnit = "";
            },
                        {
                kpiActual = 5;
                kpiName = Progress;
                kpiPlanned = "";
                kpiUnit = "%";
            },
                           );
        lastInvoiceDate = "20-12-2013";
        nextBillingDate = "13-12-2013";
        nextMilestoneDate = "28-12-2013";
        nextReviewDate = "25-12-2013";
        plannedCompletionDate = "30-12-2013";
        projectID = 1000;
        projectName = "Rocket Launching";
        projectSortType = "";
        projectStatus = 1;
        startDate = "11-11-2012";
    }, 
```

这里假设用户选择了问题或进度键（kpiName = Issue, kpiName = Progress），基于kpiActual值需要排序（kpiActual = 5）。

我的意思是用户现在选择问题，排序结果是

```
 kpiActual = 20;
                kpiName = Issue;
and then      
                kpiActual = 18;
                kpiName = Issue; 
```

这是我尝试过的源代码

```
sortResultArray = [[NSMutableArray alloc] init];
    NSMutableArray *tempArray = [[NSMutableArray alloc] init];
    [tempArray removeAllObjects];
    [tempArray addObjectsFromArray:listOfProjects];

        NSString *key = @"kpiName";
        NSSortDescriptor *statusDescriptor = [[NSSortDescriptor alloc] initWithKey:key ascending:NO];
        NSSortDescriptor *kpiDescriptor = [[NSSortDescriptor alloc] initWithKey:@"kpiActual" ascending:NO];
        NSArray *sortDescriptors = [NSArray arrayWithObjects:statusDescriptor,kpiDescriptor,nil];
        NSArray *sortedArray = [tempArray sortedArrayUsingDescriptors:sortDescriptors];
        [statusDescriptor release];
        [tempArray removeAllObjects];
        tempArray = (NSMutableArray*)sortedArray;
        [sortResultArray removeAllObjects];
        [sortResultArray addObjectsFromArray:tempArray]; 
```

# java - 从其他线程中选择更新以及“选择计数子句”

> ID：16053393
> 
> 赞同：0
> 
> 时间：2013-04-17T06:50:41.533
> 
> 标签：java, mysql, hibernate, locking

根据我们的要求，我们`select for update`在获取数据时用锁锁定一个表。这样，没有其他线程获取该数据。

我只是想确认是否`select count(*) from table where column1=value1`会检索锁定的行。

如果是，它会检索在锁定结束时所做的最近更改`select for update`（即它会等待更新行）还是会显示陈旧的数据？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:00:33.210

1\. 这取决于 TX 隔离级别。

2\. 锁定意味着`stop and wait`但不是`skip`。

# ios - 将 NSMutableArray 的 NSMutableDictionary 的键值放在 UITableViewCell 上

> ID：16053394
> 
> 赞同：0
> 
> 时间：2013-04-17T06:50:49.827
> 
> 标签：ios, objective-c, cocoa-touch

我是 iPhone 开发的新手。

我有数组字典。

```
{
    A =     (
               {
                address = "Talala (gir)";
                "main_id" = 1;
                mobile = 8878876884;
                name = "Amit Patel";
               },
               {
                address = "Junagdh";
                "main_id" = 5;
                mobile = 4894679865;
                name = "Arjun Patel";
               }
            );
        J = (
                {
                address = "Taveli";
                "main_id" = 6;
                mobile = 87886356085878;
                name = "Jasmin Patel";
                },
                {
                address = "Gujarat";
                "main_id" = 4;
                mobile = 6636633368;
                name = "Jatin ";
               }
           );
        R =     (
                    {
                address = "Mumbai";
                "main_id" = 2;
                mobile = 999686322;
                name = "Rajan Patel";
            }
        );
        S =     (
                    {
                address = "Rajkot";
                "main_id" = 3;
                mobile = 8866086549;
                name = "Sumit Patel";
            }
        );
    } 
```

我有`UITableView`并且我想显示有键`"name"`的值`UITableViewCell`

我的`cellForRowAtIndexPath`方法是

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [[[self.finalPDic objectForKey:[self.listOfHeader objectAtIndex:indexPath.row]] objectAtIndex:indexPath.row] objectForKey:@"name"];
    return cell;
} 
```

但是上面的代码对我来说是粉碎的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:06:07.433

这段代码有很多问题......

第一个 indexPath.row 必须是**indexPath.section**。

作为一般提示，最好组织您的代码更具可读性，例如：

```
NSArray* nameArrayForLetter = [self.finalPDic objectForKey:[self.listOfHeader objectAtIndex:indexPath.section];
NSDictionary* addressDict = [nameArrayForLetter objectAtIndex:indexPath.row];
NSString* nameString = [addressDict objectForKey:@"name"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:03:44.847

您的代码一一遍历根键，但您不会从较低级别的索引 0 开始。（S 键是第 4 个，所以你想要第 3 项它不存在的数组。

尝试使用部分。A..S 是部分，行是​​名称！

# java - 在类路径中添加大量 JAR 时，Java 文件 IO 性能下降超过 30%

> ID：16053396
> 
> 赞同：7
> 
> 时间：2013-04-17T06:50:54.113
> 
> 标签：java, file, io

**测试代码：**

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.util.Map.Entry;

public class ReadLine {

    /**
     * @param args
     * @throws IOException
     */
    public static void main(String[] args) throws IOException {
        System.getenv();
        System.getProperties();

        BufferedReader br = new BufferedReader(new FileReader(args[0]), 2 << 17);
        int lineTotal = 0;
        int lineDone = 0;
        long start = System.currentTimeMillis();
        long totalSincePre = System.currentTimeMillis();
        while (br.readLine() != null) {
            lineTotal++;
            if (lineTotal % 100000 == 0) {
                long end = System.currentTimeMillis();
                System.out.println("total speed=" + lineTotal / (end - totalSincePre) + "k/s. curr speed="
                        + (lineTotal - lineDone) / (end - start));
                start = end;
                lineDone = lineTotal;
            }
        }
        printEnv();
    }

    static void printEnv() {

        for (Entry<?, ?> e : System.getenv().entrySet()) {
            System.out.println(e.getKey() + ":" + e.getValue());
        }

        for (Entry<?, ?> e : System.getProperties().entrySet()) {
            System.out.println(e.getKey() + ":" + e.getValue());
        }
    }
} 
```

**测试环境：** 操作系统：Linux，文件大小：7.2G（csv 文本文件，每行超过 1k），java 版本“1.6.0_32”

**测试运行：**

代码被打包到一个 jar 中。我在同一个主机上运行了两个测试，使用同一个 jar，读取同一个文件。

1）运行`./java -cp=my.jar ReadLine TestFile.txt` 性能稳定在150k line/s左右。

控制台输出如下：

```
total speed=251k/s. curr speed=251
total speed=304k/s. curr speed=384
total speed=323k/s. curr speed=371
total speed=337k/s. curr speed=387
total speed=350k/s. curr speed=414
total speed=358k/s. curr speed=401
total speed=363k/s. curr speed=395
total speed=349k/s. curr speed=277
total speed=304k/s. curr speed=150
total speed=277k/s. curr speed=153
total speed=258k/s. curr speed=154
total speed=244k/s. curr speed=152
total speed=233k/s. curr speed=152
total speed=225k/s. curr speed=154
total speed=218k/s. curr speed=153
total speed=196k/s. curr speed=149
total speed=193k/s. curr speed=146
......stabled.......
total speed=163k/s. curr speed=150
total speed=162k/s. curr speed=155
total speed=162k/s. curr speed=155
total speed=162k/s. curr speed=149
total speed=162k/s. curr speed=147
total speed=162k/s. curr speed=150
total speed=161k/s. curr speed=148
total speed=161k/s. curr speed=145
total speed=161k/s. curr speed=151
total speed=161k/s. curr speed=154
total speed=161k/s. curr speed=163
total speed=161k/s. curr speed=179 
```

2）没有代码更改，只是将 JAR（在生产环境中使用）添加到类路径中（在生产中需要，但不是这个程序），比如`./java -cp=my.jar:hundreds_of_other_jars ReadLine TestFile.txt`. 性能下降到约90k线/s

```
total speed=312k/s. curr speed=383
total speed=335k/s. curr speed=393
total speed=348k/s. curr speed=395
total speed=361k/s. curr speed=423
total speed=369k/s. curr speed=414
total speed=374k/s. curr speed=404
total speed=342k/s. curr speed=214
total speed=264k/s. curr speed=93
total speed=224k/s. curr speed=95
total speed=200k/s. curr speed=95
total speed=182k/s. curr speed=94
total speed=170k/s. curr speed=94
total speed=161k/s. curr speed=95
total speed=154k/s. curr speed=95
total speed=148k/s. curr speed=93
.....stabled.....
total speed=139k/s. curr speed=92
total speed=135k/s. curr speed=92
total speed=132k/s. curr speed=92
total speed=129k/s. curr speed=92
total speed=127k/s. curr speed=92
total speed=125k/s. curr speed=90
total speed=123k/s. curr speed=91
total speed=121k/s. curr speed=92
total speed=120k/s. curr speed=89
total speed=118k/s. curr speed=92
total speed=117k/s. curr speed=91
total speed=116k/s. curr speed=91
total speed=115k/s. curr speed=91
total speed=114k/s. curr speed=90
total speed=113k/s. curr speed=91 
```

我的分析：

唯一的区别是类路径。第二个测试的类路径在类路径中有数百个 JAR。但是在这个程序中没有使用它们。

*   与环境无关。此代码被打包到 JAR 中，并且两个测试都使用相同的 JAR。两个测试都在同一台主机上运行，​​读取相同的文件，使用相同的代码。我还比较了 System.getEnv 和 System.getProperties，除了类路径没有区别。
*   不是操作系统缓存。这可以重现。经过多次测试，结果都是一样的。无论哪个测试先运行。
*   jmap显示内存使用没有太大差异，所有代都没有被高度使用。
*   jstack 显示两个测试的调用堆栈最有可能是

这个

```
at java.io.FileInputStream.available(Native Method)
at sun.nio.cs.StreamDecoder.inReady(StreamDecoder.java:343)
at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:304)
at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
 - locked <0xb4220388> (a java.io.FileReader)
at java.io.InputStreamReader.read(InputStreamReader.java:167)
at java.io.BufferedReader.fill(BufferedReader.java:136)
at java.io.BufferedReader.readLine(BufferedReader.java:299)
- locked <0xb4220388> (a java.io.FileReader)
at java.io.BufferedReader.readLine(BufferedReader.java:362)
at com.amazon.invhealth.metrics.transform.topasin.RL.main(RL.java:24) 
```

或者

```
at sun.nio.cs.UTF_8$Decoder.decodeArrayLoop(UTF_8.java:240)
at sun.nio.cs.UTF_8$Decoder.decodeLoop(UTF_8.java:305)
at java.nio.charset.CharsetDecoder.decode(CharsetDecoder.java:544)
at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:298)
at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
- locked <0xb4220388> (a java.io.FileReader)
at java.io.InputStreamReader.read(InputStreamReader.java:167)
at java.io.BufferedReader.fill(BufferedReader.java:136)
at java.io.BufferedReader.readLine(BufferedReader.java:299)
- locked <0xb4220388> (a java.io.FileReader)
at java.io.BufferedReader.readLine(BufferedReader.java:362)
at com.amazon.invhealth.metrics.transform.topasin.RL.main(RL.java:24) 
```

查看调用堆栈，这些测试用例可能使用相同的代码。

*   这不是由类路径中的某个 JAR 引起的。我尝试删除类路径的前 50% 来运行测试，性能约为 110k line/s。然后我去掉最后的 50% 运行测试，性能也是 110k line/s 左右。如果从类路径中删除超过 2/3 的 jar，则性能约为 120k line/s。所以从测试来看，这个性能问题只与类路径中有多少 JAR 有关。
*   然后我尝试将所有这些 JAR 打包成一个大 JAR。可悲的是，性能从 90k 下降到 60k....所以准确地说，根据我的测试，这种性能下降是由类路径中有多少类引起的。
*   我在不同的机器上用不同的文件（文件大小和格式相似）运行了这两个测试，结果是一样的。所以这绝对可以重现。

但我认为这没有意义。我错过了什么吗？如果这确实是真的，那么根本原因是什么？

**----------更多调试------**

**GC 和 Perm 大小**

添加`-Xmx2432m -Xms256m -XX:MaxNewSize=700m -XX:MaxPermSize=1024m -XX:+PrintGCDetails`到两个测试中。有所有只是有PSYoungGen GC。两者的性能相同。

输出细节

长CP一：

```
total speed=114k/s. curr speed=91
[GC [PSYoungGen: 247888K->16K(238272K)] 248810K->938K(413056K), 0.0003290 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
total speed=113k/s. curr speed=92
[GC [PSYoungGen: 238096K->16K(228864K)] 239018K->938K(403648K), 0.0003840 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
total speed=113k/s. curr speed=92
[GC [PSYoungGen: 228816K->16K(220096K)] 229738K->938K(394880K), 0.0006030 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
total speed=112k/s. curr speed=92
[GC [PSYoungGen: 219984K->16K(211584K)] 220906K->938K(386368K), 0.0004380 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
total speed=111k/s. curr speed=93
[GC [PSYoungGen: 211536K->16K(203584K)] 212458K->938K(378368K), 0.0005160 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
total speed=111k/s. curr speed=92
[GC [PSYoungGen: 203472K->16K(195840K)] 204394K->938K(370624K), 0.0005920 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
total speed=110k/s. curr speed=94
[GC [PSYoungGen: 195792K->16K(188608K)] 196714K->938K(363392K), 0.0004010 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
[GC [PSYoungGen: 188496K->16K(181568K)] 189418K->938K(356352K), 0.0004440 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 

......................

Heap
 PSYoungGen      total 145984K, used 81767K [0xc8560000, 0xd7780000, 0xf4160000)
  eden space 145920K, 56% used [0xc8560000,0xcd535d18,0xd13e0000)
  from space 64K, 25% used [0xd7760000,0xd7764000,0xd7770000)
  to   space 64K, 0% used [0xd7770000,0xd7770000,0xd7780000)
 PSOldGen        total 174784K, used 922K [0x5c160000, 0x66c10000, 0xc8560000)
  object space 174784K, 0% used [0x5c160000,0x5c246ae8,0x66c10000)
 PSPermGen       total 16384K, used 2032K [0x1c160000, 0x1d160000, 0x5c160000)
  object space 16384K, 12% used [0x1c160000,0x1c35c260,0x1d160000) 
```

一罐CP：

```
total speed=180k/s. curr speed=148
[GC [PSYoungGen: 87248K->16K(87296K)] 87904K->672K(262080K), 0.0005300 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
[GC [PSYoungGen: 87248K->16K(87296K)] 87904K->672K(262080K), 0.0004950 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
[GC [PSYoungGen: 87248K->16K(87296K)] 87904K->672K(262080K), 0.0005020 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
total speed=179k/s. curr speed=150
[GC [PSYoungGen: 87248K->16K(87296K)] 87904K->672K(262080K), 0.0005360 secs] [Times: user=0.01 sys=0.00, real=0.00 secs] 
[GC [PSYoungGen: 87248K->16K(87296K)] 87904K->672K(262080K), 0.0005190 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
total speed=178k/s. curr speed=151
[GC [PSYoungGen: 87248K->16K(87296K)] 87904K->672K(262080K), 0.0005360 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
[GC [PSYoungGen: 87248K->16K(87296K)] 87904K->672K(262080K), 0.0005400 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
[GC [PSYoungGen: 87248K->16K(87296K)] 87904K->672K(262080K), 0.0003510 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
total speed=177k/s. curr speed=150

Heap
 PSYoungGen      total 87296K, used 83826K [0xc8580000, 0xcdad0000, 0xf4180000)
  eden space 87232K, 96% used [0xc8580000,0xcd758928,0xcdab0000)
  from space 64K, 25% used [0xcdab0000,0xcdab4000,0xcdac0000)
  to   space 64K, 0% used [0xcdac0000,0xcdac0000,0xcdad0000)
 PSOldGen        total 174784K, used 656K [0x5c180000, 0x66c30000, 0xc8580000)
  object space 174784K, 0% used [0x5c180000,0x5c224080,0x66c30000)
 PSPermGen       total 16384K, used 2022K [0x1c180000, 0x1d180000, 0x5c180000)
  object space 16384K, 12% used [0x1c180000,0x1c379bb0,0x1d180000) 
```

**JVM 初始值**

我非常期待这是原因，因为这是合理的。但是在使用以下代码后：

```
String filepath = args[0];
while (true) {
    BufferedReader br = new BufferedReader(new FileReader(filepath), 2 << 17);
    System.out.println("Press Enter to start...");
    while (System.in.read() != '\n')
        ;
    int lineTotal = 0;
    int linePre = 0;
    long start = System.currentTimeMillis();
    long totalStart = System.currentTimeMillis();
    while (br.readLine() != null) {
        lineTotal++;
        if (lineTotal % 100000 == 0) {
            long end = System.currentTimeMillis();
            System.out.println("total speed=" + lineTotal / (end - totalStart) + "k/s. curr speed="
                    + (lineTotal - linePre) / (end - start));
            start = end;
            linePre = lineTotal;
        }
    }
} 
```

运行并按进入主次，性能不会改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T04:04:27.700

我找到了解决方案，但仍然不知道为什么。我使用JDK 1.7.0_21再次运行测试，两个测试用例的性能相同，稳定在180k线/秒。

正如问题中提到的，另一个测试是使用JDK 1.6.0_37，它有性能提升但仍有差距。

因此，如果可能，请升级 JDK。

如果有人知道根本原因并告诉我原因，我将不胜感激:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T12:18:45.050

我认为这取决于您导入文件的方式。

如果速度是一个问题，请始终只导入您使用的类。

思考它的方式是计算机正在做更多的事情来做它以前做的更少的事情。

# asp.net - 托管在 HTTPS 上的 Web 应用程序中的 WCF 服务

> ID：16053405
> 
> 赞同：0
> 
> 时间：2013-04-17T06:51:24.413
> 
> 标签：asp.net, wcf, https

我有一个现有的 ASP.NET Web 应用程序在 HTTPS 上的生产（.NET 4.0、IIS 7.0）中运行（我们称之为[https://myapp.com](https://myapp.com)）。现在需要向应用程序添加一个新的 WCF 服务，该服务将由位于不同服务器上的桌面应用程序使用。这是我所做的：

1.  在我现有项目的目录 /WebServices 中添加一个新的 WCF 服务（称为 myService.svc）（在 localhost 上工作正常）。
2.  照常发布网站。
3.  如下配置我的网络服务`web.config`：

配置：

```
<system.serviceModel>
  <bindings>
    <basicHttpBinding>
      <binding name="TransportSecurity">
        <security mode="Transport">
          <transport clientCredentialType="None"/>
        </security>
      </binding>
    </basicHttpBinding>
  </bindings>

  <services>
    <service name="myService" behaviorConfiguration="myBehavior">
      <endpoint address="https://myapp.com/Webservices/myService.svc" binding="basicHttpBinding"
         bindingConfiguration="TransportSecurity" contract="myService"/>
      <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange"/>
    </service>
  </services>

  <behaviors>
    <serviceBehaviors>
      <behavior name="myBehavior">
        <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
        <serviceDebug includeExceptionDetailInFaults="false" />
      </behavior>
    </serviceBehaviors>
  </behaviors>
  <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel> 
```

在我看来，我已经完成了所有需要的事情。当我在浏览器中运行 URL`https://myapp.com/WebServices/myService.svc`时，我得到“找不到资源”。为了仔细检查，我创建了一个测试控制台应用程序并尝试使用相同的 URL 来“添加服务引用”，但它没有发现它。

我究竟做错了什么？我是 WCF 的新手，并且在这个问题上停留了太久。

# javascript - 如何使用 JavaScript 触发 ctrl + 和 ctrl - 事件

> ID：16053406
> 
> 赞同：0
> 
> 时间：2013-04-17T06:51:27.360
> 
> 标签：javascript, jquery

我有两个选择器，例如 A+ 按钮、A- 按钮，当我单击 A+ 按钮时，它应该触发 ctrl + 事件。当我单击 A- 按钮时，它应该触发 ctrl - 事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T22:29:24.440

您可以将这些放在您的事件处理程序中

```
window.parent.document.body.style.zoom *=1.2//zoom in
window.parent.document.body.style.zoom *=0.8//zoom out 
```

根据您使用的浏览器，通过 CSS 转换比例，如下所示：

```
transform: scale(1.2); 
```

可能是您正在寻找的东西。

请参阅： [如何在页面加载时增加浏览器缩放级别？](https://stackoverflow.com/questions/9441557/how-to-increase-browser-zoom-level-on-page-load)

# ruby - ruby 从集合中挑选（选择）索引

> ID：16053412
> 
> 赞同：1
> 
> 时间：2013-04-17T06:51:43.083
> 
> 标签：ruby, enumerable

我有一个数组`a`。我想构建一个新数组，其中一个或多个元素被挑选出来。结果数组应如下所示：

```
 [a[5], a[7], a[8]] 
```

如何通过传递索引数组来进行此选择`[5,7,8]`？我想象过这样的事情：

```
 b = a.select([5,7,8]) 
```

这是行不通的；`select`需要一个块来评估。我可以枚举数组并手动选择，但我觉得这应该更优雅。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T07:06:51.373

使用`Array#values_at`.

```
b = a.values_at(*[5,7,8]) 
```

# php - 在实时服务器中实现linkedin登录

> ID：16053413
> 
> 赞同：0
> 
> 时间：2013-04-17T06:51:44.953
> 
> 标签：php, linkedin

我已经在我的网站中实现了linkedin登录。用户通过我的网站表单输入他的用户名和密码，成功登录后，我检索用户信息并在我的网页中显示给用户。这在 localhost wampserver 中运行良好。

但是当我将它部署到实时服务器时，它无法正常工作。当我输入linkedin的电子邮件地址和密码时。我被重定向到linkedin页面。这是网址：

```
https://www.linkedin.com/uas/oauth2/authorizedialog/submit 
```

这是我得到的错误。

```
Request Error
We’re sorry, there was a problem with your request. Please make sure you have cookies enabled and try again.

Or follow this link to return to the home page. 
```

但是，在本地主机中。我被重定向到这个页面。我成功获取用户信息。为什么它在服务器中不起作用。这是我的链接代码：

```
<form action="https://www.linkedin.com/uas/oauth2/authorizedialog/submit" method="POST" name="oauth2SAuthorizeForm" novalidate="novalidate" class="grant-access" data-jsenabled="check">

<input type="hidden" name="isJsEnabled" value="true">

<div class="login">
 <p class="description">Sign in to LinkedIn and allow access:</p>
 <ul>
 <li class="email-input">

 <label for="session_key-oauth2SAuthorizeForm" id="yui-gen1" style="display: none;">Email</label>

 <script id="controlinit-http-12157-7141289-1" type="text/javascript+initialized" class="li-control">

 /* extlib: _ghostlabel */

 LI.Controls.addControl('control-http-12157-7141289-1', 'GhostLabel', {});
 </script>

 <div class="fieldgroup">
 <input type="text" name="session_key" value="" id="session_key-oauth2SAuthorizeForm" autocorrect="off" autocapitalization="off" data-ime-mode-disabled="" placeholder="Email">
 <span class="error" id="session_key-oauth2SAuthorizeForm-error"></span>
 </div>
 <a target="_blank" href="/reg/join">Join LinkedIn</a>
 </li>
 <li class="password-input">

 <label for="session_password-oauth2SAuthorizeForm" id="yui-gen2" style="display: none;">Password</label>

 <script id="controlinit-http-12157-7141289-2" type="text/javascript+initialized" class="li-control">

 LI.Controls.addControl('control-http-12157-7141289-2', 'GhostLabel', {});
 </script>

 <div class="fieldgroup">
 <input type="password" name="session_password" value="" id="session_password-oauth2SAuthorizeForm" autocorrect="off" autocapitalization="off" maxlength="250" placeholder="Password">
 <span class="error" id="session_password-oauth2SAuthorizeForm-error"></span>
 </div>

 </li>
 </ul>
</div>
<ul class="duration">
</ul>

<div class="actions">
 <ul>
 <li>
 <input type="submit" name="authorize" value="Allow access" class="allow">
 </li>
 <li><a href="http://carwarehouseonline.com/test.php?error=access_denied&amp;error_description=the+user+denied+your+request&amp;state=STATE" class="cancel">Cancel</a></li>
 </ul>
 <div class="logo">LinkedIn</div>
</div>

 <input type="hidden" name="oauth_token" value="na" id="oauth_token-oauth2SAuthorizeForm"><input type="hidden" name="appId" value="" id="appId-oauth2SAuthorizeForm"><input type="hidden" name="client_id" value="1ba8ogpm9e05" id="client_id-oauth2SAuthorizeForm"><input type="hidden" name="scope" value="r_basicprofile r_emailaddress" id="scope-oauth2SAuthorizeForm"><input type="hidden" name="state" value="STATE" id="state-oauth2SAuthorizeForm"><input type="hidden" name="redirect_uri" value="http://127.0.0.1:8088/linkedin/test.php" id="redirect_uri-oauth2SAuthorizeForm"><input type="hidden" name="scope_id" value="1001" id="scope_id-oauth2SAuthorizeForm"><input type="hidden" name="authorized" value="true" id="authorized-oauth2SAuthorizeForm"><input type="hidden" name="csrfToken" value="ajax:4651646934577528060" id="csrfToken-oauth2SAuthorizeForm"><input type="hidden" name="sourceAlias" value="0_9DsHd_bZgogqUxUum9_VlTBWJMUCeow0cdGxvyKqdV8" id="sourceAlias-oauth2SAuthorizeForm">
 </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:30:18.240

我的猜测是回调发生错误。用户应该被重定向回您的应用程序。请再次检查您的请求 uri

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:08:07.503

它没有正确捕获您的会话。请仔细查看您的会话代码。

# javascript - 如何在 jQuery 的 txt 文件中动态生成 html？

> ID：16053415
> 
> 赞同：0
> 
> 时间：2013-04-17T06:51:47.247
> 
> 标签：javascript, jquery

我的 aspx 页面中有一个空 div，我正在该 div 中生成动态内容。

```
<div id="book"> </div> 
```

加载我的 div 的内容后

```
<div id="book">
    <div class=’a’ style=”left: 0px ; width:469px;"> … </div>
    <div class=’b’ style=”left: 0px ; width:469px;"> … </div>
    <div class=’c’ style=”left: 0px ; width:469px;"> … </div>
</div> 
```

我想要一个 txt 文件中的 html 代码。所以基本上我的 txt 文件包含数据：

```
<div class=’a’ style=”left: 0px ; width:469px;"> … </div>
<div class=’b’ style=”left: 0px ; width:469px;"> … </div>
<div class=’c’ style=”left: 0px ; width:469px;"> … </div> 
```

在 jQuery 中这些东西有什么功能吗？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:54:45.813

```
$.ajax({
    url : 'path/to/file.txt',
    dataType : 'html',
    success : function(html) {
        $('#book').html(html);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:19:51.733

```
// get contents of div, set to variable txt
var txt = $('#book').html();

// send contents of txt to asp handler,
// ie. some function that takes an input and saves it on your server
var request = $.ajax({
    type: 'POST',
    dataType : 'html',
    url: "handler.asp",
    data: txt         
});

request.done(function(data){
    // success
    console.log(data);
});

request.fail(function(jqXHR, textStatus,responseText){
    // failed
    console.log(jqXHR, textStatus,responseText)
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:54:15.813

检查[AJAX](http://api.jquery.com/JQuery.ajax)

它专门设计用于将内容动态加载到给定的元素中

这个链接是指 JQuery，你可以用纯 javascript 来做，但是代码会扩展到你需要用 JQuery 的三行

# html - 如何在html中反向播放视频

> ID：16053417
> 
> 赞同：3
> 
> 时间：2013-04-17T06:51:56.800
> 
> 标签：html, html5-video

我需要反向播放视频（最后到第一个）。这个要求怎么做。

```
I tried this 

myVideo.playbackRate = -1;

But not working 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:54:05.143

并非所有浏览器都支持playbackRate。目前只有基于 WebKit 的浏览器支持它，如 Safari、Chrome、PSX3。

祝你好运！

# listbox - 使用 Google Apps 脚本列表框在电子表格中选择不同的工作表

> ID：16053423
> 
> 赞同：0
> 
> 时间：2013-04-17T06:52:13.943
> 
> 标签：listbox, google-apps-script

我目前正在使用一个电子表格，该电子表格具有跨不同工作表的几年数值数据（某些人也称为选项卡！？），每个工作表/选项卡代表一年的价值。根据一些在线教程，我为任何给定年份创建了一个简单的图表仪表板。这是我到目前为止的代码片段（绘制图表的部分除外），在阅读 Serge 的答案后进行了 2 处修改（使“ss”成为全局并使用 setActiveSheet）。

```
var ss = SpreadsheetApp.openById(ssID);
ss.setActiveSheet(ss.getSheetByName("2012"));

function doGet() {

  var sheet = ss.getActiveSheet();
  var data = sheet.getRange(1,1,sheet.getMaxRows(),sheet.getMaxColumns());       

  var dashboard = Charts.newDashboardPanel()
     .setDataTable(data)
     .build();

  var uiApp = UiApp.createApplication().setTitle("My Dashboard");

  // Dropdown box 

  var listBox = uiApp.createListBox() // Choose data by year
    .setId('listBox')
    .setName('listBox')
    .setVisibleItemCount(1);

  for (i=0; i<ss.getNumSheets(); i++) {  
    listBox.addItem(ss.getSheets()[i].getSheetName());
  }

  var infoLabel = uiApp.createLabel('Select from List').setId('info').setVisible(false);

  // Add a handler to the ListBox when its value is changed

  var handler = uiApp.createServerChangeHandler('showSelectedinfo');
  handler.addCallbackElement(listBox);
  listBox.addChangeHandler(handler);

  // UI Element: Grid

  var mygrid = uiApp.createGrid(1, 3);
  mygrid.setWidget(0, 0, uiApp.createLabel('By Year:'));
  mygrid.setWidget(0, 1, listBox);
  mygrid.setWidget(0, 2, infoLabel)

  var controlsPanel = uiApp.createVerticalPanel().add(mygrid);  

  uiApp.add(controlsPanel).add(dashboard);    

  return uiApp;
}

function showSelectedinfo(e){
  var app = UiApp.getActiveApplication();
  var selectedItem = e.parameter.listBox;
  var listBox = app.getElementById('listBox');
  app.getElementById('info').setText('You selected :'+selectedItem).setVisible(true)
    .setStyleAttribute('color','#008000');

  ss.setActiveSheet(ss.getSheetByName(selectedItem));

  return app;

} 
```

现在我想使用下拉框选择不同的工作表，即年份，并相应地更新图表。但是，虽然我可以选择一个“年份”并正确显示它，但我仍然无法更改为使用新工作表中的数据。也许这里的任何专家都可以提供一些指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:50:03.777

这是实现这一目标的方法的示例。它使用带有标签的技巧以自定义方式显示结果，但如果您不需要它，只需保留 ListBox 和处理程序。

```
var ss = SpreadsheetApp.getActiveSpreadsheet()

function listSelect() {
  var app = UiApp.createApplication().setHeight('100').setWidth('200').setTitle('Select Sheet');
  var p = app.createVerticalPanel();
  var serverHandler = app.createServerHandler('handler').addCallbackElement(p)
  var listBox = app.createListBox() .setId('listBox').setName('listBox').addChangeHandler(serverHandler);  
  var label = app.createLabel('Please select sheet from here').setId('label')
                                      .addMouseOverHandler(app.createClientHandler()
                                      .forEventSource().setVisible(false)
                                      .forTargets(listBox).setVisible(true));
for(n=0;n<ss.getNumSheets();++n){

  listBox.addItem('You are selecting '+ss.getSheets()[n].getName(), ss.getSheets()[n].getName())      
                          }
  listBox.setVisible(false)

  p.add(listBox).add(label);
  app.add(p);
  ss.show(app)
  return app;                     
}

function handler(e){
   var app = UiApp.getActiveApplication();
   var listBox = app.getElementById('listBox');
   var label = app.getElementById('label');
   listBox.setVisible(false);
   label.setVisible(true).setText('You have selected sheet  '+e.parameter.listBox);
   ss.setActiveSheet(ss.getSheetByName(e.parameter.listBox));
//   app.close()
   return app;
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/LJ0St.jpg)

# xpages - xpages 中的自定义视图

> ID：16053424
> 
> 赞同：0
> 
> 时间：2013-04-17T06:52:14.670
> 
> 标签：xpages, lotus-domino

是否可以在 xpages.xml 中创建如下视图。如果是，如何？任何帮助深表感谢。

![在此处输入图像描述](https://i.stack.imgur.com/iQd1T.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T07:54:13.973

是的，这确实是可能的。您可以使用重复，然后添加 CSS 来设置每一行中的元素样式。

毕竟，您的目标是“只是”HTML 和 CSS。因此，您也可以使用 XPages 做到这一点。

# mysql - 选择符合条件的列名 (MySQL)

> ID：16053425
> 
> 赞同：4
> 
> 时间：2013-04-17T06:52:15.303
> 
> 标签：mysql, sql

我的数据库中有以下结构：

```
id,col_a,col_b,col_c,etc... 
```

现在，除了 id 之外的所有其他列都是布尔类型。例如，让我们说

```
col_a=1,
col_b=0,
col_c=1 
```

我正在寻找一种方法来返回列为真 (=1) 的列的名称，因此在此示例中，返回应该类似于`col_a,col_c`

将有动态数量的列，因为表经常更改以添加新列并删除旧列。

到目前为止，我拥有的函数看起来像这样 - 它是应该返回该列名字符串的函数......

```
DROP FUNCTION fn_access;

DELIMITER //;

CREATE FUNCTION fn_access (myid INT) RETURNS varchar(800)
   DETERMINISTIC
BEGIN
            DECLARE ret_val VARCHAR(800);
            DECLARE col_name VARCHAR(255);
            DECLARE i INT;
            DECLARE num_rows INT;

            DECLARE col_names CURSOR FOR

            SELECT column_name
            FROM information_schema.columns
            WHERE `table_name` = 'access' AND `table_schema` = 'some_db' AND `column_name` <> 'id'
            ORDER BY ordinal_position;

            SELECT FOUND_ROWS() into num_rows;

            SET i = 1;
            the_loop: LOOP

            IF i > num_rows THEN
                            CLOSE col_names;
                            LEAVE the_loop;
            END IF;

            FETCH col_names 
            INTO col_name;

            SET ret_val = CONCAT(',' col_name);

            SET i = i + 1;  
            END LOOP the_loop;      

            SELECT * FROM access WHERE id = @myid;

            RETURN ret_val;
END
// 
```

有没有办法使用直接 SQL 来做到这一点？我正在使用 MySQL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T07:05:17.037

如果我正确理解你的问题，也许你需要这样的东西：

```
SELECT 'col_a' col
FROM yourtable
WHERE col_a
UNION
SELECT 'col_b'
FROM yourtable
WHERE col_b
UNION
SELECT 'col_c'
FROM yourtable
WHERE col_c
... 
```

这将返回表中至少有一行为真的所有列。

或者也许是这样：

```
SELECT
  id,
  CONCAT_WS(', ',
    CASE WHEN col_a THEN 'col_a' END,
    CASE WHEN col_b THEN 'col_b' END,
    CASE WHEN col_c THEN 'col_c' END) cols
FROM
  yourtable 
```

将以这种格式返回行：

```
| ID | COLS                |
----------------------------
|  1 | col_a, col_c        |
|  2 | col_a, col_b, col_c |
|  3 |                     |
|  4 | col_c               |
... 
```

请[在此处](http://sqlfiddle.com/#!2/8f4ee/2)查看小提琴。如果您需要动态执行此操作，您可以使用以下准备好的语句：

```
SELECT
  CONCAT(
    'SELECT id, CONCAT_WS(\', \',',
  GROUP_CONCAT(
    CONCAT('CASE WHEN ',
           `COLUMN_NAME`,
           ' THEN \'',
           `COLUMN_NAME`,
           '\' END')),
    ') cols FROM yourtable'
  )
FROM
  `INFORMATION_SCHEMA`.`COLUMNS` 
WHERE
  `TABLE_NAME`='yourtable'
  AND COLUMN_NAME!='id'
INTO @sql;

PREPARE stmt FROM @sql;
EXECUTE stmt; 
```

[在这里](http://sqlfiddle.com/#!2/8f4ee/12)拉小提琴。

# c# - 如何在后面的代码中检查“localize=english”是否“localize=other language”......（ASP.NET C#）

> ID：16053431
> 
> 赞同：0
> 
> 时间：2013-04-17T06:52:31.480
> 
> 标签：c#, asp.net, localization

我有一个本地化的网站，我正在使用 LINQ 调用一些程序 - 这些程序包含一些我需要在语言切换后翻译的文本。这是我的程序调用之一：

```
public static IQueryable VyhledejCPN()
        {
            LINQDataContext db = new LINQDataContext();
            IQueryable result = db.spSearchPartNumber(PartNumber).AsQueryable();
            return result;
        } 
```

我需要这样的东西：

```
if (localize == english)
            {
                public static IQueryable VyhledejCPN()
                    {
                        LINQDataContext db = new LINQDataContext();
                        IQueryable resultEN = db.spSearchPartNumberEN(PartNumber).AsQueryable();
                        return resultEN;
                    }
            }

            else if (localize == czech)
            {
                public static IQueryable VyhledejCPN()
                    {
                        LINQDataContext db = new LINQDataContext();
                        IQueryable resultCZ = db.spSearchPartNumberCZ(PartNumber).AsQueryable();
                        return resultCZ;
                    }
            } 
```

还是有其他方法？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:01:44.743

如果您想了解客户端的文化，您可以使用[`HttpRequest.UserLanguages`属性](http://msdn.microsoft.com/en-us/library/system.web.httprequest.userlanguages.aspx)（`Accept-Language header`浏览器的语言优先级）。

> 获取客户端语言首选项的排序字符串数组。
> 
> 语言名称由浏览器提供，并且没有所有可能代码的明确列表。通常，这些代码由语言的两个字符代码、一个连字符和一个文化的两个字符代码组成，例如美国英语的“en-us”和加拿大法语的“fr-ca”。

```
int count;
String[] userLang = Request.UserLanguages;    

for (count = 0; count < userLang.Length; count++) 
{
   Response.Write("User Language " + count +": " + userLang[count] + "<br>");
} 
```

所以在你的情况下：

```
if (Request.UserLanguages.Contains("en-US"))
{
    // ...
} 
```

# c# - MOQ - 验证异常被抛出

> ID：16053433
> 
> 赞同：47
> 
> 时间：2013-04-17T06:52:38.600
> 
> 标签：c#, unit-testing, moq

我使用 MOQ 框架进行测试。我有一个场景，我希望抛出一个错误异常。我如何验证它是否被抛出？

```
public void Koko(List<string?> list) 
{ 
   foreach(string? str in list) 
   { 
        if (str != null) someProperty.Foo(str); 
        else throw new FormatException(); 
   } 
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-04-17T08:14:04.430

如果您想验证是否引发了异常（由您自己的代码），那么 Moq 不是您选择的工具。只需使用可用的单元测试框架之一。

**Xunit/NUnit：**

```
Assert.Throws<SomeException>(() => foo.Bar()); 
```

**流利的断言：**

```
Action act = () => foo.Bar();
act.Should().Throw<SomeException>(); 
```

[https://fluentassertions.com/introduction](https://fluentassertions.com/introduction)

[http://www.nunit.org/index.php?p=exceptionAsserts&r=2.6.2](http://www.nunit.org/index.php?p=exceptionAsserts&r=2.6.2)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-04-18T09:16:27.250

我可能误读了您的意图，但据我所知，没有必要对模拟做任何事情来测试是否引发了异常。

看起来你有一个类，它的方法 Foo 接受一个字符串 - 让我们调用这个 InnerClass

```
public class InnerClass {
    public virtual void Foo(string str) {
         // do something with the string
    }
} 
```

和一个包含 InnerClass 作为属性 (someProperty) 的类，它有一个成员 Koko，它以 List<string> 作为参数

```
public class OuterClass {

    private readonly InnerClass someProperty;

    public OuterClass(InnerClass someProperty) {
        this.someProperty = someProperty;
    }

    public void Koko(List<string> list) {
         foreach (var str in list) {
              if (str != null)
                   someProperty.Foo(str);
              else
                   throw new FormatException();
          }
    } 
} 
```

**注意：**我无法让 List<string?> 编译 - 告诉我基础类型（字符串）必须是不可为空的。AFAIK，只需要使值类型可以为空，引用类型可以隐式为空。

看起来您想测试如果您传入一个字符串列表，其中任何一个为空，则抛出 FormatException。

如果是这样，那么 MOQ 的唯一原因就是让我们不必担心 InnerClass 功能。Foo 是一种方法，因此，除非我们使用严格的模拟，否则我们可以只创建一个 InnerClass 模拟而无需其他设置。

有一个属性[[ExpectedException]](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.expectedexceptionattribute.aspx "[预期异常]")，我们可以使用它标记我们的测试以验证是否已抛出异常。

```
[TestMethod]
[ExpectedException(typeof(FormatException))]
public void ExceptionThrown() {

    var list = new List<string>() {
        "Abel",
        "Baker",
        null,
        "Charlie"
    };

    var outer = new OuterClass(new Mock<InnerClass>().Object);
    outer.Koko(list);

} 
```

如果抛出 FormatException，则此测试将通过，否则将失败。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2018-08-03T22:14:15.710

通读这些答案，我意识到还有另一种方法可以使用 NUnit 来做到这一点。下面从异常中获取异常文本并验证错误消息文本。

```
var ex = Assert.Throws<SomeException>(() => foo.Bar());
Assert.That(ex.Message, Is.EqualTo("Expected exception text"); 
```

而且我无法使用最新版本的 NUnit 使装饰/属性语法正常工作（上面 AlanT 的回答）——不知道为什么，但无论我尝试做什么，它都会抱怨。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-04-17T07:00:58.470

您可以使用 NUnit Asserts 测试是否引发了异常：

```
Assert.That(() => testObject.methodToTest(), Throws.TypeOf<FaultException>()); 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2013-04-17T06:56:47.117

请阅读此[起订量简介](http://code.google.com/p/moq/wiki/QuickStart)。这是调用方法时设置`InvalidOperationException`抛出的方法：`DoSomething`

```
mock.Setup(foo => foo.DoSomething()).Throws<InvalidOperationException>(); 
```

然后简单地验证是否调用了方法。如果它被调用，则引发异常

```
mock.Verify(foo => foo.DoSomething()); 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2016-10-03T11:13:47.697

一个老问题，但没有源代码实际显示解决方案是什么，所以这就是我所做的：

```
var correctExceptionThrown = false;

try
{
    _myClass.DoSomething(x);
}
catch (Exception ex)
{
    if (ex.Message == "Expected message")
        correctExceptionThrown = true;
}                    

Assert.IsTrue(correctExceptionThrown); 
```

请注意，您可以捕获特定类型的异常（通常更可取），而不是检查消息。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-17T08:36:55.913

好的，所以我通过以下方式解决了它。

由于异常破坏了我的测试，我将方法调用放在 try-catch 的因为块中。

然后我可以使用一个简单的验证。

感谢所有的帮助者...

# c# - 更新面板定时器控件和 JQuery

> ID：16053434
> 
> 赞同：0
> 
> 时间：2013-04-17T06:52:39.647
> 
> 标签：c#, jquery, asp.net, asp.net-ajax, sharepoint2010-bcs

我们在更新面板中有我们的控件，如 HTML div、tabel、grid，我们有 AsyncPostBackTrigger 和计时器控件的 Event Tick，这个时间控件将在特定时间段内更新更新面板控件。我们正在使用 JQuery 加载一些控件，其中一些带有代码。我们在计时器滴答事件中调用所有需要定期更新的函数。

一切都在第一次运行良好，直到几分钟后，如果我们保持浏览器保持打开状态，就会突然停止更新，但随后我手动引用我的浏览器都开始正常工作，几分钟后它再次停止更新。

我也使用以下但仍然没有用

```
 var prm = Sys.WebForms.PageRequestManager.getInstance();
   prm.add_endRequest(function () ..... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:34:15.313

好吧，我从页面中删除了更新面板和计时器控件，我确实使用了 $.ajax 和 setIntervaltime。

# python - 从队列接收作业时的非阻塞 WebSocketHandler

> ID：16053435
> 
> 赞同：0
> 
> 时间：2013-04-17T06:52:44.833
> 
> 标签：python, tornado, beanstalkc

设置：

*   Tornado HTTP/WebSocket 服务器。WebSocketHandler 对来自客户端的消息做出反应（例如，将它们放入作业队列中）
*   将作业发送到不同组件的 beanstalk 作业队列
*   其他一些通过 beanstalk 进行通信的组件，但这些与我的问题无关。

问题：

*   WebSocketHandler 应该对作业做出反应，但如果他正在监听 beanstalk，它会阻塞。作业可以是例如“将数据 xy 发送到客户端 xyz”

如何很好地解决这个问题？我的第一种方法是在一个单独的线程中运行一个作业队列侦听器，其中包含一个腌制 WebSocketHandler 的列表。所有内容都应存储在 redis-db 中。由于 WebsocketHandler 不能被腌制（而且这种方法似乎很丑陋），我正在寻找另一种解决方案。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:24:22.447

您可以将它们存储在类级别（或只是全局）字典中，而不是尝试腌制您的 WebSocketHandler 实例。

```
class MyHandler(WebSocketHandler):
    connections = {}

    def __init__(self, *args, **kwargs):
        self.key = str(self)
        self.connections[self.key] = self 
```

然后你会将 self.key 与作业一起传递给 beanstalk，当你得到一个作业时，你会使用密钥查找将输出发送到哪个连接，然后写入它。类似的东西（伪代码......）

```
 def beanstalk_listener():
     for response in beanstalk.listen():
         MyHandler.connections[response.data[:10]].write_message(response[10:]) 
```

我认为尝试将 websockethandler 连接保留在 redis 中没有任何价值。它们本质上是短暂的。如果您的龙卷风过程重新启动/死亡，它们将毫无用处。如果您要做的是记录哪个用户正在等待哪个作业的输出，那么您需要单独跟踪它。

# css - 带或不带`.min`的样式表参考

> ID：16053439
> 
> 赞同：0
> 
> 时间：2013-04-17T06:52:49.553
> 
> 标签：css, ruby-on-rails, model-view-controller, twitter-bootstrap, view

重定向到样式表时，使用`.min`更改了布局。

我将代码从以下位置更改：

```
<%= stylesheet_link_tag("bootstrap-responsive.min", "bootstrap.min", "main", "normalize", :media => "screen")  %> 
```

至：

```
<%= stylesheet_link_tag("bootstrap-responsive", "bootstrap", "main", "normalize", :media => "screen")  %> 
```

并且页面布局发生了变化。这是为什么？它链接到同一个文件，为什么会有任何区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:07:46.173

您的样式表的顺序似乎有问题。

“bootstrap-responsive”应始终包含在“bootstrap”之后。所以你的原始代码已经有问题了。

建议您更改顺序，清除浏览器缓存，然后重试。

此外，使用 Assets Pipeline 而不是在布局中手动包含样式表会更好，无论是否缩小。

# java - 带有“LIKE”错误的android sqlite查询搜索

> ID：16053441
> 
> 赞同：0
> 
> 时间：2013-04-17T06:52:55.993
> 
> 标签：java, android, database, android-sqlite

在过去的几个小时里，我一直坚持这个问题（可悲的是）。

我正在使用 SQLite 构建一个应用程序，该应用程序可以执行所有灵活的 SQL 命令。我目前被困在如何从 ID 以外的列中查询。

我从表的第二列中检索信息的代码如下：

```
 public String nameSearch(String n) {
    String[] columns = { KEY_ID, KEY_NAME, KEY_DESCRIPTION };
    Cursor c = myDatabase.query(true, DATABASE_TABLE, columns, KEY_NAME + "LIKE '%"+n+"%'", null, null, null, null, null);
    while(c != null){
        c.moveToFirst();
        String data = c.getString(1);
        return data;
    }
    return null;
} 
```

我在 onClick 命令上的代码，这是一个单独的类来解释上下文：

```
 case R.id.nameSearchButton:
        String n = etName.getText().toString();
        try {
            SQLControls controller = new SQLControls(this);
            controller.nameSearch(n);
            String gotName = controller.nameSearch(n).toString();
            controller.close();
            tvName.setText(gotName);
            Log.d(TAG, " got " + gotName);
        } catch (Exception e) {
            e.printStackTrace();
            Log.e(TAG, " error at " + e);
        }
        break; 
```

我知道这或多或少很简单，但我认为有一件事我没有做或没有看到，这让我感到厌烦。有关其他信息，当您点击按钮时，显示的 logCat 信息就是这样：

```
04-16 23:49:14.616: W/KeyCharacterMap(596): No keyboard for id 0
04-16 23:49:14.616: W/KeyCharacterMap(596): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
04-16 23:49:17.680: W/System.err(596): java.lang.NullPointerException
04-16 23:49:17.685: W/System.err(596):  at com.example.sqltest.SQLControls.nameSearch(SQLControls.java:175)
04-16 23:49:17.685: W/System.err(596):  at com.example.sqltest.CustomSearch.onClick(CustomSearch.java:72)
04-16 23:49:17.685: W/System.err(596):  at android.view.View.performClick(View.java:2485)
04-16 23:49:17.685: W/System.err(596):  at android.view.View$PerformClick.run(View.java:9080)
04-16 23:49:17.685: W/System.err(596):  at android.os.Handler.handleCallback(Handler.java:587)
04-16 23:49:17.685: W/System.err(596):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-16 23:49:17.685: W/System.err(596):  at android.os.Looper.loop(Looper.java:130)
04-16 23:49:17.685: W/System.err(596):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-16 23:49:17.685: W/System.err(596):  at java.lang.reflect.Method.invokeNative(Native Method)
04-16 23:49:17.685: W/System.err(596):  at java.lang.reflect.Method.invoke(Method.java:507)
04-16 23:49:17.685: W/System.err(596):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-16 23:49:17.685: W/System.err(596):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-16 23:49:17.685: W/System.err(596):  at dalvik.system.NativeStart.main(Native Method)
04-16 23:49:17.685: E/Custom Search(596):  error at java.lang.NullPointerException 
```

非常感谢你的帮助。到目前为止，回答我问题的每个人都提供了重要的帮助，即使对于如此简单和微小的事情也是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:57:54.823

您之前错过了一个空格`LIKE`，并且 c 永远不会为空，您必须检查是否`c.moveToFirst`为真

```
Cursor c = myDatabase.query(true, DATABASE_TABLE, columns, KEY_NAME + " LIKE '%"+n+"%'", null, null, null, null, null);
if (c.moveToFirst())
{
    String data = c.getString(1);
    return data;
} 
```

# php - Doctrine2 条件属性覆盖

> ID：16053445
> 
> 赞同：1
> 
> 时间：2013-04-17T06:53:11.700
> 
> 标签：php, doctrine-orm

我正在寻找实现以下模型的最佳方法：

实体建筑的属性->覆盖实体客户组的属性->覆盖默认的属性

客户组可以有许多建筑物，因此他可以配置全局默认值并仅为偏离条款定义其他设置。

示例用例：每个实体都有一个属性主题，如果“建筑”中没有定义主题，则使用“客户组”的主题属性，如果“客户组”中也没有定义主题属性，则使用“默认”（默认它必须被定义）。

在一个遗留项目中，我通过将“继承属性”设置为 NULL 来完成此操作，如果它们应该从父级获取。我可以想象这种行为可以通过@AttributeOverride 实现，但是如果我使用它，它就会被覆盖，不仅如果它没有设置（不完全确定关于@AttributeOverride 的文档是边际的）。我的问题是如何实现这一点，或者是否有替代方法来实现这种行为？

# testing - 测试套件、测试模块、测试块、测试场景和测试用例

> ID：16053447
> 
> 赞同：0
> 
> 时间：2013-04-17T06:53:15.837
> 
> 标签：testing, module, block, test-suite, scenarios

请让我知道***Test Suit、Test Module、Test Block、Test Scenario 和 Test Cases***的定义是什么，它们之间的关系是什么？

谢谢，索姆纳斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T23:04:57.640

关于询问定义，您应该知道的第一件事是，单词根据上下文具有多种含义。如果我给你一个关于什么是测试套件（我假设你不是指西装和领带）或模块是什么的答案，并且你在没有考虑或将它们应用到你的上下文的情况下接受这些定义，你不会有任何意义。事实上，任何知道得更清楚的人都会觉得你很愚蠢。

尝试了解其他人如何使用这些词以及何时使用这些词是一个更好的主意。如果您在一个团队中并且他们使用了您不理解的词 - 询问。许多人在不同的上下文中以不同的方式使用这些词，并具有不同的含义。如果您想了解更多信息，请搜索人们如何在其他上下文中使用这些词，看看是否有任何相似之处或不同之处。

至少这应该可以帮助您提出更好的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T06:58:43.687

互联网上有大量关于测试的信息。如果你用谷歌搜索，你问的所有事情都可以很容易地找到。你有没有试过搜索一下？

很抱歉，但我会否决这个问题，但我不能，因为我没有足够的声誉。

# jasper-reports - JasperReports 在 JRXML 中嵌入数据，没有任何数据源

> ID：16053454
> 
> 赞同：3
> 
> 时间：2013-04-17T06:53:45.620
> 
> 标签：jasper-reports

我想在没有任何数据源的报告模板（jrxml）中嵌入数据。我想将我的数据静态写入 jrxml，并用这些数据显示表格。真的有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T14:11:33.750

您可以拥有一个列表变量并使用 Java 类将数据存储在其中。

1.  使用变量类列表或集合创建变量。
2.  将返回列表的 Java 方法放入变量表达式中。

如果你使用 groovy 同样的东西可以实现 Groovy Collection。如果您想了解[groovy 集合](http://groovy.codehaus.org/Collections)，这里有更多信息。

例如 ：

**在报告中有一个参数/变量**

```
<parameter name="list_collect" class="java.util.List" isForPrompting="false">
  <defaultValueExpression><![CDATA[(new beandatasource()).OnFlyCollection()]]>                    </defaultValueExpression>
</parameter> 
```

**和 Java 类**

```
package beandatasource;

import java.util.ArrayList;

public class OnFlyCollection {

    public ArrayList<String> ListCollect() {

        ArrayList<String> arr_list = new ArrayList<String>();
        arr_list.add("A");
        arr_list.add("B");
        arr_list.add("C");

        return arr_list;
    }
} 
```

# ruby - 对 Test::Unit ruby 中的不同输入参数重复测试套件

> ID：16053457
> 
> 赞同：0
> 
> 时间：2013-04-17T06:53:54.107
> 
> 标签：ruby, selenium, testunit

我们正在使用 test::unit 和 selenium 构建一个 QA 自动化设置。我们网络应用程序中每个页面的测试位于单独的目录中，在顶级目录中，我们有：

```
require 'rubygems'
require 'test/unit'
require 'test/unit/runner/html'
require 'test/unit/ui/html/html_runner.rb'

Dir["*/test_*.rb"].each do |file|
  require file
end 
```

这将创建一个动态测试套件并执行它。在测试脚本中，有一个配置文件，其中包含要使用的 selenium 浏览器驱动程序的配置、启动的基本 url 等。我们必须在所有浏览器上运行测试。目前，每次执行套件后，我们都必须手动编辑配置并将 selenium 驱动程序名称从“chrome”更改为“firefox”，然后再次手动运行。我们可以改为在顶级脚本中设置，以便整个测试套件针对不同的配置重复一些“x”次吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T20:32:46.197

如果您使用的是 Hudson，您可以使用不稳定的 Selenium Server 方法，其中对于每个作业（在给定浏览器下运行测试），您可以启动 Selenium Server，并将强制浏览器模式设置为您想要测试的任何浏览器。

# localization - 廉价的在线本地化服务

> ID：16053458
> 
> 赞同：0
> 
> 时间：2013-04-17T06:53:55.217
> 
> 标签：localization

我们使用桌面软件来本地化我们的 .NET 应用程序。它可以将可本地化的字符串导出到 XLS，我将其发送给帮助我们翻译程序字符串的用户。

如果只有一个用户参与使用某种语言的翻译过程，一切都很好。但是，如果两个用户开始将程序本地化为相同的语言 - 我们将面临翻译冲突。

我想开始使用 SVN 来托管我们的翻译 XLS 文件，但也许有人可以向我推荐一个便宜的在线服务，让我们避免使用 SVN（因为它需要我们的客户一些学习曲线）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:43:48.403

您可能需要考虑 crowdin.net。对于本地化项目来说，这是非常舒适的工作流程。PS价格是可以接受的。

# php - 带有 mootools-form-upload 的文件上传进度条 onclick 事件

> ID：16053459
> 
> 赞同：0
> 
> 时间：2013-04-17T06:54:02.607
> 
> 标签：php, javascript, jquery, ajax, mootools

我在当前项目中使用文件上传。当我单击浏览按钮时，文件将自动上传并读取行数并立即显示该详细信息。我完成了这个任务。

但是当我上传大文件时，上传需要一些时间。所以我需要实现文件上传进度条。

我使用了以下示例。

[http://aryweb.nl/projects/mootools-form-upload/Demos/Upload.html](http://aryweb.nl/projects/mootools-form-upload/Demos/Upload.html)

[http://mootools.net/forge/p/form_upload](http://mootools.net/forge/p/form_upload)

```
<script>
    window.addEvent('domready', function(){
        var upload = new Form.Upload('files', {
            onComplete: function(){
                alert('Completed uploading the Files');
            }
        });
        if (!upload.isModern()){
            // Use something like
        }
    });
</script> 
```

这个脚本运行良好。

但是当我点击提交按钮时，那个时候会显示进度条。

我需要更改何时单击浏览按钮，该时间将显示进度条。我不知道如何改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:07:25.457

您正在使用 mootools 插件 javascript 库，该库允许您上传文件并跟踪进度。它与 PHP 关系不大。

由于它的演示和文档没有进度跟踪，如果您仔细查看[https://github.com/arian/mootools-form-upload/blob/master/Source/Form.Upload.js](https://github.com/arian/mootools-form-upload/blob/master/Source/Form.Upload.js)那么您会看到该进度没有任何回调..

```
onProgress: function(event){
            var loaded = event.loaded, total = event.total;
            progress.setStyle('width', parseInt(loaded / total * 100, 10).limit(0, 100) + '%');
        }, 
```

所以你需要要么

1.  使用它期望的建议 HTML ( `<div class='progress'></div>`)，或者
2.  通过扩展它之前包含的选项来添加您的自定义行为

# javascript - 如何在nodejs中将数字格式化为指定长度

> ID：16053462
> 
> 赞同：2
> 
> 时间：2013-04-17T06:54:06.497
> 
> 标签：javascript, ruby-on-rails, node.js

我有一个值**12.3456789**，我需要像**12.34**这样的结果。

我尝试**了 toPrecision()**方法并收到以下错误。

```
Object 3.0 has no method 'toPrecision' 
```

尝试过的代码是，

```
var ERA = stat['stat_group']['earned_run_average']  
statsHash['earned_run_average'] = ERA.toPrecision(4); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:56:20.103

对于javascript，您可以尝试，

如果 ERA 是 string 类型，首先将其转换为 number `ERA = 1 * ERA`，然后

```
statsHash['earned_run_average'] = 1 * ERA.toFixed(2); 
```

希望这可以帮助。

# javascript - 如何在javascript代码中的字符串中显示单引号？

> ID：16053471
> 
> 赞同：0
> 
> 时间：2013-04-17T06:54:31.903
> 
> 标签：javascript, html, css

我正在使用 javascript 生成动态内容，并且在该内容中的一部分将像

```
onfocus="if(this.value=='Enter Email Address'){this.value='';}" onblur="if(this.value=='')    {this.value='Enter Email Address';}" value="Enter Email Address" 
```

我想要上面的代码，但是在生成内容之后，但所有单引号都没有正确显示。请帮帮我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:58:16.533

如果您在 HTML 5 中使用 input 元素，我建议您查看该`placeholder`属性，因为这正是您所需要的。不需要javascript。

```
 <input type="text" placeholder="Enter Email Address" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:56:20.570

使用转义字符 \

```
'\\'Enter Email\\'' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T07:00:05.300

尝试这个

```
'\'Text\'' 
```

或者

```
"'Text'" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T07:06:29.440

尝试这样的事情，从双引号中删除反斜杠，[FIDDLE](http://jsfiddle.net/yVxLe/)

```
<input type="text" onfocus="if(this.value=='Enter Email Address'){this.value='';}" onblur="if(this.value=='')    {this.value='Enter Email Address';}" value="Enter Email Address"> 
```

# android - 如何从视图寻呼机访问视图

> ID：16053472
> 
> 赞同：12
> 
> 时间：2013-04-17T06:54:34.550
> 
> 标签：android, android-viewpager

我在我的活动中使用视图寻呼机。我为 7 个页面创建了视图。现在我想访问我的活动中的页面视图。我得到的数据是空白的。 ***活动中***

```
public class ActivitySingleEntry extends Activity implements OnClickListener {

    private ViewPager mPager;
    private FixedTabsView mFixedTabs;

    private ExamplePagerAdapter mPagerAdapter;
    private TabsAdapter mFixedTabsAdapter;
    private EditText edtFieldName;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_fixed_tabs);
        initViewPager(7, 0xFFFFFFFF, 0xFF000000);
        mFixedTabs = (FixedTabsView) findViewById(R.id.fixed_tabs);
        mFixedTabsAdapter = new FixedTabsAdapter(this);
        mFixedTabs.setAdapter(mFixedTabsAdapter);
        mFixedTabs.setViewPager(mPager);

    }

    private void initViewPager(int pageCount, int backgroundColor, int textColor) {
        mPager = (ViewPager) findViewById(R.id.pager);
        mPagerAdapter = new ExamplePagerAdapter(this, pageCount,
                backgroundColor, textColor);
        mPager.setAdapter(mPagerAdapter);
        mPager.setCurrentItem(1);
        mPager.setPageMargin(5);
    }

    @Override
    public void onClick(View v) {

//      LinearLayout lin=(LinearLayout) mPager.getChildAt(mPager.getCurrentItem());
//      edtFieldName=(EditText) lin.findViewById(R.id.edtFieldName);
//      Log.d("test", "From get child:"+edtFieldName.getText().toString()+":");

        Log.d("test", "Current Page:"+mPager.getCurrentItem());

        LinearLayout linearLayout=(LinearLayout) mPager.findViewWithTag("lin"+mPager.getCurrentItem());
        edtFieldName=(EditText) linearLayout.findViewById(R.id.edtFieldName);

        edtFieldName=(EditText) findViewById(R.id.edtFieldName);
        if (edtFieldName==null) {
            ShowToast.makeToast(getApplicationContext(), "Edt null");
        }else
        ShowToast.makeToast(getApplicationContext(),
                "Data saved " + edtFieldName.getText().toString() + ":"
                        + mPager.getCurrentItem());
    }
} 
```

***我的页面Adaper***

```
public class ExamplePagerAdapter extends PagerAdapter {

    protected transient Activity mContext;

    private int mLength = 0;
    private int mBackgroundColor = 0xFFFFFFFF;
    private int mTextColor = 0xFF000000;

    private String[] mData = { "Temperature", "Sugar", "BP", "Field 4",
            "Field 5", "Field 6", "Field 7" };

    public ExamplePagerAdapter(Activity context, int length,
            int backgroundColor, int textColor) {

        mContext = context;
        mLength = length;
        mBackgroundColor = backgroundColor;
        mTextColor = textColor;

    }

    @Override
    public int getCount() {
        return mLength;
    }

    @Override
    public Object instantiateItem(View container, int position) {

        LinearLayout linearLayout = (LinearLayout) View.inflate(mContext,
                R.layout.activity_single_entry, null);

        TextView txtFieldName = (TextView) linearLayout
                .findViewById(R.id.txtFieldName);
        EditText edtFieldName = (EditText) linearLayout
                .findViewById(R.id.edtFieldName);

        String filedName = mData[position];
        txtFieldName.setText(filedName);
        edtFieldName.setHint("Please enter " + filedName);
        edtFieldName.setInputType(InputType.TYPE_CLASS_TEXT);

        if (filedName.equals("Temperature")) {
            edtFieldName.setInputType(InputType.TYPE_CLASS_NUMBER);
        } else if (filedName.equals("Sugar")) {
            edtFieldName.setInputType(InputType.TYPE_CLASS_NUMBER);
        } else if (filedName.equals("BP")) {
            edtFieldName.setInputType(InputType.TYPE_CLASS_NUMBER);
        }

        edtFieldName.setTag("edt");

        ((ViewPager) container).addView(linearLayout, 0);
        linearLayout.setTag("lin"+position);

        Log.d("test", "Adapter creating item:"+position );
        return linearLayout;
    }

    @Override
    public void destroyItem(View container, int position, Object view) {
        ((ViewPager) container).removeView((View) view);
    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return view == ((View) object);
    }

    @Override
    public void finishUpdate(View container) {
    }

    @Override
    public void restoreState(Parcelable state, ClassLoader loader) {
    }

    @Override
    public Parcelable saveState() {
        return null;
    }

    @Override
    public void startUpdate(View container) {
    }

} 
```

在 R.layout.activity_single_entry xml 中，我有 edittext 和带有 onclick 的按钮。

***MYXml***

```
 <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/txtFieldName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />

        <EditText
            android:id="@+id/edtFieldName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp"
            android:layout_weight="1"
            android:hint="Please enter field value" />
    </LinearLayout>

    <Button
        android:id="@+id/btnSave"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Save" 
        android:layout_margin="20dp"
        android:onClick="onClick"
        />

</LinearLayout> 
```

如果我在 pageadapter 内使用

```
@Override
    public int getItemPosition(Object object) {
        // TODO Auto-generated method stub
        return POSITION_NONE;
    } 
```

OnClick 按钮我想从编辑文本中访问数据。

我能够获得第一页的价值。不是所有人。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-17T08:54:04.320

首先你 setTag():

```
linearLayout.setTag("lin"+position); 
```

位置在 <0..numPages-1> 中

但请阅读：

```
LinearLayout linearLayout=(LinearLayout) mPager.findViewWithTag("lin"+mPager.getCurrentItem()); 
```

findViewWithTag 是到处返回 null 还是只在最后一页返回？mPager.getCurrentItem() 如果是第一页，则返回 0，因此阅读时无需添加 +1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T06:04:20.373

在页面适配器中，我在每个页面中使用单个视图，因此它仅引用第一项。如果我试图获取页面的视图，它只给我第一个对象，所以我为每个页面中的编辑文本应用了不同的 id。

*在页面适配器*

```
@Override
public Object  instantiateItem(View container, int position) {

    LinearLayout linearLayout = (LinearLayout) View.inflate(mContext,
            R.layout.activity_single_entry, null);

    TextView txtFieldName = (TextView) linearLayout
            .findViewById(R.id.txtFieldName);
    EditText edtFieldName = (EditText) linearLayout
            .findViewById(R.id.edtFieldName);
    ***edtFieldName.setId(position);***

    String filedName = mData[position];
    txtFieldName.setText(filedName);
    edtFieldName.setHint("Please enter " + filedName);
    edtFieldName.setInputType(InputType.TYPE_CLASS_TEXT);

    if (filedName.equals("Temperature")) {
        edtFieldName.setInputType(InputType.TYPE_CLASS_NUMBER);
    } else if (filedName.equals("Sugar")) {
        edtFieldName.setInputType(InputType.TYPE_CLASS_NUMBER);
    } else if (filedName.equals("BP")) {
        edtFieldName.setInputType(InputType.TYPE_CLASS_NUMBER);
    }

    edtFieldName.setTag("edt"+position);

    ((ViewPager) container).addView(linearLayout, 0);
    mItems.add(linearLayout);

    linearLayout.setTag("lin"+position);

    Log.d("test", "Adapter creating item:"+position );
    return linearLayout;
} 
```

它现在工作

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-17T07:23:19.267

一个快速的解决方案是在您的 ExamplePagerAdapter 中保留一个 List 并在您的 addView() 调用之后添加到它。然后，您可以实现一个公共函数，例如 getItemAtPosition(int position)，它返回 ViewPager 的该页面的 LinearLayout。然后，您可以在 Activity 的线性布局上运行 findViewById(R.id.edtFieldName)。在代码中：

在您的 ExamplePagerAdapter 中，添加一个私有对象：

```
List<LinearLayout> mItems; 
```

在您的构造函数中添加：

```
mItems = new Vector<LinearLayout>(); 
```

添加实例化项目（）：

```
((ViewPager) container).addView(linearLayout, 0);
mItems.add(linearLayout); 
```

然后添加一个方法：

```
public LinearLayout getItemAtPosition(int position) {
    return mItems.get(position);
} 
```

然后在您的活动中使用该方法。希望这就是你要找的东西。

# ios - 检测主线程外的 UI 操作

> ID：16053475
> 
> 赞同：22
> 
> 时间：2013-04-17T06:54:41.467
> 
> 标签：ios, xcode4, uikit, lldb

注意：这个问题与[从后台线程调用 UIKit 时发出警告有关，](https://stackoverflow.com/questions/10976424/warn-on-calls-to-uikit-from-background-threads)但没有给出以下两种方法的答案。

我有一个应用程序屏幕快速闪烁的问题。我过去已经遇到过这个问题，这是由于在主线程之外更新了 UI 元素。

因此，我在很多地方都放了以下代码：

```
assertMainThread(); 
```

这是：

```
#define assertMainThread() NSAssert([NSThread isMainThread],@"Method called using a thread other than main!") 
```

当然，我不能用 assertMainThread() 覆盖整个代码，因为有很多地方，并且后台 GCD 队列以合法的方式使用了一些代码。

我查看了很多地方，但找不到让 XCode 或 LLDB 告诉我何时在主线程之外更新 UI 元素的方法。我认为可以使用符号断点或其他一些机制来中断例如在主线程之外调用 UIKit 中的常用方法但找不到方法的地方。

我还认为 UIKit 可以在进行此类调用时在运行时发出警告？或者至少给我们一些工具来帮助调试此类问题。

我看过的另一种方法（但没有尝试）是使用一些代码覆盖技术，并尝试在视觉上提取代码中哪个点正在运行的线程，但没有走那条路。

你对如何解决这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2015-11-03T13:58:43.577

# Xcode 9 及更高版本

Xcode 9 引入了一个[主线程检查器](https://developer.apple.com/documentation/code_diagnostics/main_thread_checker)，它可以嗅探许多可能在主线程外执行的相关问题。您可以在您的方案选项中以通常的方式启用此分析器以及其他运行时分析器。

# Xcode 8.3 及更早版本

另一种基于**steipete**要点的 Xcode 方式解决方案 - 符号断点：

[![Xcode 符号断点](https://i.stack.imgur.com/faQHc.png)](https://i.stack.imgur.com/faQHc.png)

`UIKit`您可以轻松地为任何类上的一些其他方法添加断点，例如`-[UIView setNeedsDisplay]`等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-11T19:40:45.413

从 Xcode 9 开始，Apple 在 Xcode 中集成了一个[主线程检查器](https://developer.apple.com/documentation/xcode/diagnosing-memory-thread-and-crash-issues-early)，如果您使用 Xcode 调试器运行您的应用程序，默认情况下会启用该主线程检查器。

它可以在诊断选项卡下的方案配置中禁用/启用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-07T16:19:09.147

Xcode 11/Swift 版本的@Michi 的回答 [![在此处输入图像描述](https://i.stack.imgur.com/ctdHs.png)](https://i.stack.imgur.com/ctdHs.png)

# zend-framework2 - ZfcUser 登录后将角色重定向到不同的页面

> ID：16053479
> 
> 赞同：1
> 
> 时间：2013-04-17T06:55:01.187
> 
> 标签：zend-framework2, zfcuser, bjyauthorize

我在我的项目中使用 ZfcUser 和 BjyAuthorize。如果用户登录，他将被重定向到我的默认路由。

但我想改变它，所以如果角色 A 的用户将重定向到页面 A，而角色 B 的用户将重定向到页面 B。

任何想法，如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T09:23:42.667

由于我必须根据角色检查几件事，因此我创建了一个简单的模块，而不是在用户登录后（登录后的默认路由）并根据角色（可通过 bjyautorize 获得）将应用程序重定向到正确的 url。

也许这不是一种优雅的方式，但您不必修改 zfcUser 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-10T00:40:49.037

我实际上已经这样做了，并在 GitHub 中创建了合并请求。这实际上是一个非常小的更改，需要在 zfc-user/src/ZfcUser/Controlelr/UserController.php 中完成。在 authenticateAction() 你需要替换这个：

```
return $this->redirect()->toRoute($this->getOptions()->getLoginRedirectRoute()); 
```

为了这：

```
$route = $this->getOptions()->getLoginRedirectRoute();

if(is_callable($route)) {
    $route = $route($this->zfcUserAuthentication()->getIdentity());
}

return $this->redirect()->toRoute($route); 
```

在您的 config/autoload/module.zfcuser.global.php 文件中，您将能够对 login_redirect_route 使用回调：

```
'login_redirect_route' => function(\ZfcUser\Entity\UserInterface $user) {
    if($user->getUsername()=='Admin') {
        return 'admin';
    }

    return 'user';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-14T09:48:42.583

您可以在登录配置文件后设置重定向。

```
'login_redirect_route' => '/your-url', 
```

`your-url`可从所有类型的用户访问，然后创建 switch case 以匹配您的角色并将页面重定向到角色特定页面。

```
$roles = $this->serviceLocator->get('BjyAuthorize\Provider\Identity\ProviderInterface')->getIdentityRoles();

switch ($roles){

     case "admin": 
            $this->redirect()->toRoute('user_admin'); 
     case "user":              
           $this->redirect()->toUri('user.html');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-28T05:13:57.167

假设您在 bjyauthorize 中有一个“管理员”角色，您想重定向到另一个路由。

在您的 loginAction 中替换代码：

```
 if ($this->zfcUserAuthentication()->getAuthService()->hasIdentity()) {
        return $this->redirect()->toRoute($this->getOptions()->getLoginRedirectRoute());
    } 
```

使用此代码：

```
 if ($this->zfcUserAuthentication()->getAuthService()->hasIdentity()) {
        $roles = $this->serviceLocator->get('BjyAuthorize\Provider\Identity\ProviderInterface')->getIdentityRoles();
        if (in_array('admin',$roles))
        {
            return $this->redirect()->toRoute('admin_route');
        } else {
            return $this->redirect()->toRoute('user_route');
        }
    } 
```

# javascript - 有没有办法查看主浏览器窗口之外的内容？

> ID：16053483
> 
> 赞同：0
> 
> 时间：2013-04-17T06:55:18.533
> 
> 标签：javascript, html, css, browser

我有一些对象需要放置在主窗口之外，然后在窗口内使用 CSS3 过渡效果移动它们。我想确定这些物体是否在视觉上处于它们的特殊位置。这是我认为它可能看起来的截图：

![浏览器窗口之外的对象](https://i.stack.imgur.com/iMLUq.png)

白色矩形代表浏览器窗口，用灰色填充的区域是包含我使用的一些对象的“外部”区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:04:19.797

您可以使用[Screenfly](http://quirktools.com/screenfly/)。这允许您设置您想要的任何屏幕尺寸。您可以设置一个巨大的屏幕尺寸来查看您的文本是否在正确的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:01:46.833

您可以尝试使用 Firefox 开发人员工具栏查看外面的内容。

右键单击 Firefox 中的任何元素并选择“检查元素 (Q)”，然后选择 3D 视图。它是面板右上角的一个小按钮。

![Firefox 中的 3D 视图按钮](https://i.stack.imgur.com/ehDec.jpg)

有了这个，您将能够探索站点的各个层，以及不在正常查看环境中的内容。

![3D 视图在行动](https://i.stack.imgur.com/EmDia.jpg)

# actionscript-3 - AS3定时器比php快

> ID：16053487
> 
> 赞同：1
> 
> 时间：2013-04-17T06:55:32.240
> 
> 标签：actionscript-3, flash, timer

我也在尝试每秒加载新消息，但是每次加载新消息时都会加倍，我想是因为计时器在执行 php 之前完成？所以我尝试添加

```
 if (checker != "" + idstored + "done") {
checker =  "" + idstored + "done"; 
```

这样一旦计时器完成，它就会更改检查器，以便当计时器重新启动并再次完成时它不会再次执行......但它停止检查所有新消息......任何提示？

```
var count:Timer = new Timer(1000, 1);
count.addEventListener(TimerEvent.TIMER_COMPLETE, onTimerComplete); 
count.start();

var checker;
function onTimerComplete(event:TimerEvent):void{
    if (checker != "" + idstored + "done") {
    checker =  "" + idstored + "done";

    var variables_cc:URLVariables = new URLVariables();
    var varSend_cc:URLRequest = new URLRequest("chat.php");
    varSend_cc.method = URLRequestMethod.POST;
    varSend_cc.data = variables_cc;
    var varLoader_cc:URLLoader = new URLLoader;
    varLoader_cc.dataFormat = URLLoaderDataFormat.VARIABLES;
    varLoader_cc.addEventListener(Event.COMPLETE, completeHandler_cc);

    function completeHandler_cc(event:Event):void{
        if (event.target.data.statusline == "is_new") {
              stored_id_txt.text = "" + event.target.data.stored_id;
              status_txt.text = "" + event.target.data.statusline;
              returnline.text = "" + event.target.data.returnBody;
              checker.text = checker;
              splitByDelimiter(event.target.data.returnBody);
              idstored = event.target.data.stored_id;
              checker = "refresh";
        } 
    }}
    // ready the last_refresh_time variable for sending to PHP
    variables_cc.requester = "chat_check";
    variables_cc.stored_id = idstored;
    varLoader_cc.load(varSend_cc);
    count.reset();
    count.start();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:28:52.693

您会收到错误，因为您有时会在之前的下载未完成时尝试开始新的下载。每隔 1 秒实时做一些依赖于延迟的事情是不明智的。你需要开始一些事情，等待它完成，然后再重新开始。

定时器启动后的 removeEventListener （在 onTimerComplete 函数内）并停止定时器并重置它。qddEventListener 到计时器并在数据下载后启动它（在 completeHangler_cc 函数中）。

# mongodb - mongodb 2.4.1 因“进程内存不足”而失败

> ID：16053491
> 
> 赞同：3
> 
> 时间：2013-04-17T06:55:42.163
> 
> 标签：mongodb, aggregation-framework

我有以下 mongo 版本

```
db version v2.4.1    
MongoDB shell version: 2.4.1, 
```

和

```
db version v2.2.1-rc1, pdfile version 4.5, 
MongoDB shell version: 2.2.1-rc1 
```

安装在`64-bit windows 7`机器上。

我有一个包含`10001000`（1000 万+）条记录的集合，当我使用 V 2.4.1 进行聚合时，它失败并出现以下错误：

```
Fatal error in CALL_AND_RETRY_2
Allocation failed - process out of memory 
```

但是，当我使用 V 2.2.1-rc1 来聚合相同的集合时，它可以正常工作并在大约 1 分钟内给出结果。

正在聚合的集合的示例文档：

```
{

    "_id" : ObjectId("516bdd1c39b10c722792e007"),
    "f1" : 10000010,
    "f2" : 10000000,
    "key" : 0
} 
```

聚合命令：

```
{$group: {"_id": "$key", total: {$sum: "$f1"}}} 
```

用于填充记录的命令：

```
for(var i = 10011000; i < 10041000; ++i)
{ 
    db.testp.insert({"f1": i+10, "f2": i, "key": i%1000})
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T09:44:25.493

你有多少内存？可能`$group`是占用了超过 10% 的可用内存并导致错误？[请参阅有关累积运算符的内存](http://docs.mongodb.org/manual/core/aggregation/#memory-for-cumulative-operators)的聚合文档。

**编辑1：**

出于兴趣 - 聚合是否在外壳之外工作？例如从驱动程序调用它。我看到了类似的 v8 错误，并且随着 shell 在 2.4 中更新到 v8 有可能是这样。

**编辑2：**

如果生成的数组在 shell 中太大，那么也会触发错误：请参阅[SERVER-8859](https://jira.mongodb.org/browse/SERVER-8859)。要解决此问题，您可能需要运行多个聚合，或者通过`$match`早期限制工作集，或者甚至`$skip`通过`$limit`结果集进行分页。

我在 Mac 上的 2.4.1 上尝试使用 10,070,999 个文档进行聚合，但没有收到错误

# javascript - 为什么backbone.js 在这个例子中没有渲染视图？

> ID：16053494
> 
> 赞同：0
> 
> 时间：2013-04-17T06:55:50.097
> 
> 标签：javascript, backbone.js, backbone-views, backbone-events

我开始学习backbone.js 并工作一个示例主干应用程序，其中搜索词的推文提要根据推特API 的主干填充。

以下是我的主干 MVC 代码。

***BackboneSample.js***

```
$(function() {
    var Tweet = Backbone.Model.extend();

    var Tweets = Backbone.Collection.extend({
        model: Tweet,
        url: 'http://search.twitter.com/search.json?q=NYC&callback=?',
        parse: function(response) {
            console.log('parsing ...');
            console.log('parsing ...');
            return response.results;
        }
    });
    var PageView = Backbone.View.extend({
        el: $('body'),
        events: {
            'click button#add': 'doSearch'
        },
        initialize: function() {
            _.bindAll(this);
            this.tweets = new Tweets();
            _this = this;
            this.tweets.on('reset', function(collection) {
                _this.$('#tweets').empty();
                collection.each(function(tweet) {
                    _this.addItem(tweet);
                });
            });
            this.counter = 0;
            this.render();
        },
        doSearch: function() {
            var subject = $('#search').val() || 'NYC';
            this.tweets.url = 'http://search.twitter.com/search.json?q=' + subject + '&callback=?';
            this.tweets.fetch();
        },
        render: function() {
            $(this.el).append("<input id= 'search'type='text' placeholder='Write a word' />");
            $(this.el).append("<button id='add'>Search twitts</button>");
            $(this.el).append("<ul id='tweets'></ul>");
            return this;
        },
        addItem: function(item) {
            console.log(item);
            $('ul', this.el).append("<li><b>" + item.get('from_user_name') + "</b>:  " + item.get('text') + "</li>");

        }
    });
    var pageView = new PageView();
}); 
```

但这并不像我预期的那样工作。渲染页面后推文未显示。JSON 响应数据从 tweeter API 返回，但视图未反映更改。这里会发生什么错误？我该如何解决这个问题？

请检查小提琴中的[演示](http://jsfiddle.net/tAk6D/2/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:15:31.167

由于 1.0 版本的 Backbone`fetch`不会自动触发重置事件，而是会使用`collection.set`将获取的模型与您已经拥有的其他模型合并。为了有效地重置您的收藏，您应该像这样更改您的 fetch 调用：

```
this.tweets.fetch({reset:true}); 
```

[官方文档](http://backbonejs.org/#Collection-fetch)中的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-27T06:56:39.040

主干视图有 2 个属性。

*   el - 保存容器的选择器。
*   $el - jQuery 元素。

你初始化错了。你需要指定

```
el: 'body' or $el: $('body') 
```

# javascript - 如何在java脚本的一行中比较两个字符串

> ID：16053502
> 
> 赞同：0
> 
> 时间：2013-04-17T06:56:23.023
> 
> 标签：javascript, ui-automation

我得到的字符串为：-队列中的时间，项目类型，状态，类型，名称，22天，文档，空闲，默认，test4。

现在我必须将状态及其相应的值比较为空闲。

如何在一行中选择这两个词并使用 java 脚本进行比较。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:21:54.840

如果结构是固定的，例如，您可以拆分字符串

```
var result = "-Time in Queue,Item Type, Status,Type,Name, 22days, Document,Idle,Default,test4".split(",")[7] === 'Idle'; 
```

但我认为你需要别的东西，只是从描述中不清楚。可能如果您添加了一些上下文并描述了您为什么需要它（为什么它必须是单行，数据来自哪里，它们的真正结构等），您可以获得更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:22:23.987

...那里有换行符吗？

...您可以执行以下操作：

```
var string = "Time in Queue,Item Type,Status,Type,Name, 22days,Document,Idle,Default,test4",

    pieces = string.split(","),
    match = pieces[2].trim() === "Status" && pieces[6].trim() === "Idle"; 
```

...当然，`.trim`不适用于旧浏览器，但您可以轻松编写类似的内容。

如果您真的非常想打高尔夫球，您可以执行以下操作：

```
var string = "Time in Queue,Item Type,Status,Type,Name, 22days,Document,Idle,Default,test4",
    reg = /[^,]+,[^,]+,\s*Status\s*,[^,]+,[^,]+,[^,]+,[^,]+,\s*Idle\s*/i;

reg.test(string); 
```

这将告诉您字符串中是否出现“..., ..., Status, ..., ..., ..., ..., Idle”，其中“...”是任何字符集这不是逗号。

如果这不是你的意思，那么你需要在这里变得更具体。

# perforce - Perforce 客户端预提交钩子

> ID：16053503
> 
> 赞同：10
> 
> 时间：2013-04-17T06:56:23.757
> 
> 标签：perforce, pre-commit-hook

我们使用 perforce 作为 Visual Studio 解决方案的源代码控制。使用 P4 和 P4V。是否可以添加客户端预提交挂钩？例如确保“调试器”一词；*.js 文件中不存在。可以在谷歌中找到一些东西。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T13:47:38.850

Perforce 触发器可用于强制执行此类策略，但它们在服务器中运行，而不是在客户端运行。因此，我所知道的大多数站点都会强制执行一条规则，例如您所描述的使用服务器中的更改内容触发器的规则。

[http://www.perforce.com/perforce/doc.current/manuals/cmdref/triggers.html](http://www.perforce.com/perforce/doc.current/manuals/cmdref/triggers.html)

从你的问题来看，为什么你需要一个客户端钩子并不明显。您是否有某些原因不想使用更改内容触发器？

也许您可能会考虑将您的工作流程重新构建为代码审查流程，并在您选择的代码审查工具中实施类似的策略。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-24T01:37:05.003

您可以使用的一种方法是“自定义工具”： [https ://www.perforce.com/perforce/doc.current/manuals/p4v/custom_tools.html](https://www.perforce.com/perforce/doc.current/manuals/p4v/custom_tools.html)

基本上，您将编写一个脚本，将更改列表作为参数检查更改列表中每个文件的条件，如果成功，则调用 p4 commit。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-15T05:12:39.490

使用最新`git-p4`的 . 我的钩子补丁`p4-pre-submit`被合并到 Git 的`next`分支中。

钩子是一个简单的可执行脚本，如果脚本以非零状态存在，它将停止提交过程以启动。所以`p4-pre-submit`hook 非常安全，没有任何副作用。

有关详细信息，请参阅[https://github.com/git/git/blob/next/Documentation/git-p4.txt](https://github.com/git/git/blob/next/Documentation/git-p4.txt)。

请注意`git-p4`是一个独立的python脚本。它不依赖于任何特定版本的 git。所以只能升级`git-p4`。

除了退出状态外，钩子`p4-pre-submit`没有其他交互。`git/git-p4`所以你可以用任何语言编写钩子（我推荐python）。

这是示例`.git/hooks/p4-pre-submit`：

```
#!/bin/sh
cd $GIT_DIR && make test 
```

# javascript - 在 unray 表达式中声明 var？

> ID：16053505
> 
> 赞同：0
> 
> 时间：2013-04-17T06:56:28.210
> 
> 标签：javascript, jquery

假设我有这个：

`$(obj).attr("style","...top:"+________)`

现在假设`top`计算：

`(o.outerHeight(true)>=30?o.outerHeight(true)+'px':'-5px')`

*我的*问题是重复`o.outerHeight(true)`

*为简单起见*：我知道我通常可以做到：

`((a=5)>2?a:-1) //5`--*注意`a`' 的计算没有重复。*

但这会创建一个全局`a`变量。（我*不想那样*做）

`window.a //5`

我试过了 ：

`((var a=5)>2?a:-1)`*//错误：意外的令牌变量

有什么办法*（除了声明我自己的var）*来避免这种重复吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T07:00:32.900

您可以使用[iife](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)：

```
(function(value) { return complex_expression_using_value; }(some_expression)) 
```

这样，您创建了一个正式的函数参数而不是一个 var。没有命名空间污染。

要将其应用于您的特定示例：

```
var top = (function(value) {
        return (value >= 30 ? value : -5) + 'px';
    }(o.outerHeight(true))); 
```

或者，您可以将 iife 用作另一个表达式的一部分：

```
$(obj).attr("style","...top:"+
    (function(value) {
            return (value >= 30 ? value : -5) + 'px';
        }(o.outerHeight(true)))
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T06:58:57.077

不，since`var a`是一个语句，根据[语言语法](http://es5.github.com/#x11.12)，条件（三元）运算符只能将表达式作为其操作数：

> *ConditionalExpression* :
>     *LogicalORExpression*
>     *LogicalORExpressionAssignmentExpressionAssignmentExpression* `?` *_* `:` *_*

您必须事先声明变量。

# java - 如何通过检查IMEI制作解锁活动的代码？

> ID：16053510
> 
> 赞同：0
> 
> 时间：2013-04-17T06:57:05.153
> 
> 标签：java, android

我知道手机IMEI可以通过

```
 TelephonyManager telephonyManager = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
telephonyManager.getDeviceId(); 
```

我找到了试用应用程序的定时炸弹代码，这给了我一个新的想法。那个代码是——

```
protected void onResume()
{   
    super.onResume();

    Calendar expirationDate = Calendar.getInstance();
    expirationDate.set(2009, 7, 3);  //hardcoded expiration date
    Calendar t = Calendar.getInstance();  //Calendar with current time/date
    if (t.compareTo(expirationDate) == 1)
       finish();
} 
```

现在我想制作一个检查 IMEI 的代码。如果 IMEI 为 123456789123456，应用程序将被解锁，否则将停止活动。怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:10:38.273

```
 long imei=telephonyManager.getDeviceId();

 if(imei==12345678912345)

     {
       Toast.maketext(getapplicationcontext(),"Your device is unlocked",Toast.lengthlong)).show();

    }
else
{
     finish();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:02:46.603

试试这样

```
long imei=telephonyManager.getDeviceId();
if(imei==12345678912345)
         {
            //move to next activity
        }
else
{
         finish();
} 
```

# activemq - 违反 ActiveMQ 唯一约束

> ID：16053513
> 
> 赞同：2
> 
> 时间：2013-04-17T06:57:17.793
> 
> 标签：activemq

在对 10,000 条消息进行负载测试期间，我看到一些独特的约束违规（10,000 条消息中只有 8 条受到影响）。我想知道是否需要在 DBCP 数据源设置或 Active MQ 设置中进行更改。错误是

```
org.springframework.jms.UncategorizedJmsException: Uncategorized exception occured during
JMS processing; nested exception is javax.jms.JMSException:
ORA-00001: unique constraint     (WEBSVC.SYS_C00181594) violated 
```

我查看了这个约束并将其跟踪到 ACTIVEMQ_MSGS 一个我们让 Active MQ 在 Oracle 中创建和维护自己的表。例如

```
select * from all_constraints
where constraint_name = 'SYS_C00181594'

OWNER   CONSTRAINT_NAME CONSTRAINT_TYPE TABLE_NAME      SEARCH_CONDITION    R_OWNER R_CONSTRAINT_NAME   DELETE_RULE STATUS  DEFERRABLE      DEFERRED    VALIDATED   GENERATED       BAD RELY    LAST_CHANGE             INDEX_OWNER INDEX_NAME      INVALID VIEW_RELATED
------  --------------- --------------- -------------   ----------------    ------- -----------------   ----------- ------- --------------  ---------   ---------   --------------  --- ----    --------------------    ----------- -------------   ------- ------------
WEBSVC  SYS_C00181594   P               ACTIVEMQ_MSGS                                               ENABLED NOT DEFERRABLE  IMMEDIATE   VALIDATED   GENERATED NAME              22-Mar-2013 16:16:22                SYS_C00181594 
```

当我将消息放入队列时会发生这种情况，下面是完整的堆栈跟踪

引起：java.io.IOException：ORA-00001：违反唯一约束（WEBSVC.SYS_C00181594）

```
at org.apache.activemq.util.IOExceptionSupport.create(IOExceptionSupport.java:45)
at org.apache.activemq.store.jdbc.TransactionContext.close(TransactionContext.java:138)
at org.apache.activemq.store.jdbc.JDBCMessageStore.addMessage(JDBCMessageStore.java:129)
at org.apache.activemq.store.memory.MemoryTransactionStore.addMessage(MemoryTransactionStore.java:328)
at org.apache.activemq.store.memory.MemoryTransactionStore$1.asyncAddQueueMessage(MemoryTransactionStore.java:155)
at org.apache.activemq.broker.region.Queue.doMessageSend(Queue.java:744)
at org.apache.activemq.broker.region.Queue.send(Queue.java:717)
at org.apache.activemq.broker.region.AbstractRegion.send(AbstractRegion.java:407)
at org.apache.activemq.broker.region.RegionBroker.send(RegionBroker.java:503)
at org.apache.activemq.broker.jmx.ManagedRegionBroker.send(ManagedRegionBroker.java:311)
at org.apache.activemq.broker.BrokerFilter.send(BrokerFilter.java:129)
at org.apache.activemq.broker.CompositeDestinationBroker.send(CompositeDestinationBroker.java:96)
at org.apache.activemq.broker.TransactionBroker.send(TransactionBroker.java:317)
at org.apache.activemq.broker.MutableBrokerFilter.send(MutableBrokerFilter.java:135)
at org.apache.activemq.broker.TransportConnection.processMessage(TransportConnection.java:450)
at org.apache.activemq.command.ActiveMQMessage.visit(ActiveMQMessage.java:680)
at org.apache.activemq.broker.TransportConnection.service(TransportConnection.java:294)
at org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:152)
at org.apache.activemq.transport.ResponseCorrelator.onCommand(ResponseCorrelator.java:116)
at org.apache.activemq.transport.MutexTransport.onCommand(MutexTransport.java:50)
at org.apache.activemq.transport.vm.VMTransport.iterate(VMTransport.java:241)
at org.apache.activemq.thread.PooledTaskRunner.runTask(PooledTaskRunner.java:129)
at org.apache.activemq.thread.PooledTaskRunner$1.run(PooledTaskRunner.java:47)
... 3 more 
```

引起：java.sql.BatchUpdateException：ORA-00001：违反唯一约束（WEBSVC.SYS_C00181594）

```
at oracle.jdbc.driver.OraclePreparedStatement.executeBatch(OraclePreparedStatement.java:10345)
at oracle.jdbc.driver.OracleStatementWrapper.executeBatch(OracleStatementWrapper.java:230)
at org.apache.commons.dbcp.DelegatingStatement.executeBatch(DelegatingStatement.java:297)
at org.apache.commons.dbcp.DelegatingStatement.executeBatch(DelegatingStatement.java:297)
at org.apache.activemq.store.jdbc.TransactionContext.executeBatch(TransactionContext.java:103)
at org.apache.activemq.store.jdbc.TransactionContext.executeBatch(TransactionContext.java:81)
at org.apache.activemq.store.jdbc.TransactionContext.close(TransactionContext.java:129) 
```

我现在有一个非常偏执的 DBCP BasicDataSource，即

```
<bean id="basicOracleDataSource" class="org.apache.commons.dbcp.BasicDataSource"
      abstract="true" destroy-method="close">
    <property name="driverClassName" value="oracle.jdbc.OracleDriver" />
    <property name="poolPreparedStatements" value="true"/>
    <property name="initialSize" value="5"/>
    <property name="maxActive" value="30"/>
    <property name="maxWait" value="60000"/> <!--  default indefinitely -->
    <property name="timeBetweenEvictionRunsMillis" value="30000" />  

    <!-- verify connections in the pool to stop connection closed errors -->
    <property name="logAbandoned" value="false"/>       <!-- default false -->
    <property name="maxIdle" value="5"/>                <!-- default 8, minIdle defaults to 0 which is OK -->
    <property name="numTestsPerEvictionRun" value="4"/> <!-- default 3 -->
    <property name="removeAbandoned" value="true"/>     <!-- default false -->
    <property name="removeAbandonedTimeout" value="60"/><!--  default 300 seconds -->
    <property name="testOnBorrow" value="true"/>        <!-- default false -->
    <property name="testOnReturn" value="true"/>        <!-- default false -->
    <property name="testWhileIdle" value="true"/>       <!-- default false -->
    <property name="validationQuery" value="SELECT 1 FROM dual"/>   
</bean> 
```

以防万一，这也是我的 JMS 模板

```
<!-- Spring JMS Template -->
<bean id="jmsTemplate" class="org.springframework.jms.core.JmsTemplate">
    <property name="connectionFactory">
        <!-- lets wrap in a pool to avoid creating a connection per send -->
        <bean class="org.springframework.jms.connection.SingleConnectionFactory">
            <property name="targetConnectionFactory">
                <ref local="jmsFactory" />
            </property>
        </bean>
    </property>
</bean> 
```

# iphone - 如何在开始之前确定 voip 通话的质量？

> ID：16053516
> 
> 赞同：2
> 
> 时间：2013-04-17T06:57:20.967
> 
> 标签：iphone, ios, networking, voip

我需要检查设备是否可以支持一定质量的 voip 通话。我的方法（我接受可能有更好的方法）是在拨打电话之前立即在用户的 iOS 设备上进行 Internet 连接速度测试。速度测试应该尽可能准确地确定即将到来的 voip 呼叫的质量是好还是差。

voip 通话包括实时视频（类似于 Skype）。

我知道以下测量连接速度的技术：

1.  下载或上传文件并测量需要多长时间。

    [如此处](https://stackoverflow.com/questions/370641/calculating-connection-download-speed)所述。测量下载或上传速度能否准确了解即时通话的 voip 通话质量？此外，文件可能会被缓存，或者速度甚至可能受到 ISP 的限制。

2.  使用 ICMP 数据包（即 ping）可靠的服务器（例如 google.com）。

    这种方法的一个潜在问题是（我听说过）某些路由器被配置为给予 ICMP 数据包比其他数据包更低的优先级。因此，它们不能用作带宽/速度/可达性等的准确度量。是这样吗？

测量网络连接速度是预测 voip 通话质量的有效方法吗？如果是这样，为此目的测量 Internet 连接速度的有效且快速（即不到 3 秒）的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-04T03:22:18.740

VoIP 呼叫的实际数据是通过 RTP 传输的，它实际上只需要 24-64Kbps（取决于编解码器）并且需要双向传输 UDP 地址。偶尔会发送 RTCP 数据包来报告状态、指标等，但实际上并不需要。

SIP 用于呼叫建立和拆除。

RTCP 数据包携带（最小）呼叫质量指标。

有几个参数会影响通话质量，包括编解码器的选择、可用带宽、网络延迟、数据包丢失（RTP 通过 UDP，因此不会重新传输）和抖动（数据包间到达延迟、无序交付）。

(Cicso) 交换机实现了 RED，这是一种通过随机丢弃网络数据包来减少队列深度的技术。对于 TCP 网络连接，这是可以接受的，因为 TCP 通过滑动窗口协议进行重传。许多基于UDP的协议实现了应用重传。但是 RTP 负担不起这种奢侈。因此，语音数据包的随机丢弃会损害连接质量。RED 的一种解决方案是通过 TCP 连接隧道 VoIP，但这不是做出的选择。

拥塞的网络是 VoIP 通话质量问题的一个重要来源，并且可以在通话的最初几秒钟内进行测量。由于抖动和延迟的数据包（高网络延迟）导致的丢包是通话质量下降的两个主要原因。我在一个 VoIP 服务质量监控系统上工作，我们观察到最差的呼叫具有高抖动和高延迟（超过 ~70 毫秒是不好的）。避免高延迟、拥塞的网络。编码的选择会对质量产生巨大影响。更高压缩率的编解码器比“效率低”的编解码器丢失更多的数据包，所以选择使用更高带宽的编解码器（祝你好运）。

IP 网络需要 QoS 保证来提供最佳 VoIP 质量。在重新定义 TCPIP 以包括 QoS 之前，VoIP 将存在（潜在的）问题。

你的方法很接近。但是你想测量：

1.  UDP
2.  数据包丢失
3.  拥塞
4.  潜伏
5.  包抖动

您需要对数据包进行时间戳和编号，并检测高延迟、到达间隔抖动，避免通过 TCP 进行测量（数据包重新传输会扭曲您的质量数字，并且 TCP 会重新排序数据包，即使它会引入延迟）。您还想知道两者的质量。您可能会发现编解码器选择将是改善通话的重要因素。

我为构建监视器 (Telchemy) 工作的公司将他们的 VQMon 软件授权为用于测量质量的产品，因此您想要的工具已经存在。

# android - 创建更复杂的音板

> ID：16053519
> 
> 赞同：-1
> 
> 时间：2013-04-17T06:57:28.260
> 
> 标签：android, eclipse

所以我创建了一个基本的音板，但现在希望将音板更新到 2.0 版

我想要一个音板，当有人单击按钮时，音板会在该特定类别中播放随机声音。

这是我的基本音板代码......

非常感激你的帮助。

```
package com.example.benandhollysoundboard;

import android.R.layout;
import android.app.Activity; 
import android.media.MediaPlayer;
import android.os.Bundle; 
import android.view.View;  
import android.widget.ImageButton;

public class myMenu extends Activity {

MediaPlayer ben, holly, gaston, plum, queenthistle, kingthistle, robot, wiseoldelf, lucy;

ImageButton Ben, Holly, Gaston, Plum, Queenthistle, Kingthistle, Robot, Wiseoldelf, Lucy;

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.Layout.activity_main);

    Ben = MediaPlayer.create(this, R.raw.ben);

    Ben = (ImageButton) findViewById(R.id.Ben);
    Ben.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            ben.start();
        }
    }); 

    holly = MediaPlayer.create(this, R.raw.holly);

    Holly = (ImageButton) findViewById(R.id.Holly);
    Holly.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            holly.start();
        }
    }); 

gaston = MediaPlayer.create(this, R.raw.gaston);

    Gaston = (ImageButton) findViewById(R.id.Gaston);
    Gaston.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            gaston.start();
        }
    });

    plum = MediaPlayer.create(this, R.raw.plum);

    Plum = (ImageButton) findViewById(R.id.Plum);
    Plum.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            plum.start();
        }
    }); 

    robot = MediaPlayer.create(this, R.raw.robot);

    Robot = (ImageButton) findViewById(R.id.Robot);
    Robot.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            robot.start();
        }
    }); 

    wiseoldelf = MediaPlayer.create(this, R.raw.wiseoldelf);

    Wiseoldelf = (ImageButton) findViewById(R.id.Wiseoldelf);
    Wiseoldelf.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            wiseoldelf.start();
        }
    }); 

lucy = MediaPlayer.create(this, R.raw.lucy);

    Lucy = (ImageButton) findViewById(R.id.Lucy);
    Lucy.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            lucy.start();
        }
    });

    kingthistle = MediaPlayer.create(this, R.raw.kingthistle);

    Kingthistle = (ImageButton) findViewById(R.id.Kingthistle);
    Kingthistle.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            kingthistle.start();
        }
    }); 

    queenthistle = MediaPlayer.create(this, R.raw.queenthistle);

    Queenthistle = (ImageButton) findViewById(R.id.Queenthistle);
    Queenthistle.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            queenthistle.start();
        }
    }); 
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:06:30.437

嗨，我不喜欢android开发，但我认为你可以将每个类别的文件名保存在一个数组中，然后如果你按下按钮生成一个随机数并将其放入数组中

例如（生成 1 - 10 之间的随机整数）

```
int rand = (int) (Math.random()*10+1); 
```

接着

就像是

```
 @Override
        public void onClick(View v) {
            int rand = (int) (Math.random()*10+1);
            Array[rand].start();
        }
    }); 
```

希望我能帮上忙；）

# c++ - 将 IPv6 地址转换为 Internet 标准点分十进制格式的 ASCII 字符串

> ID：16053521
> 
> 赞同：1
> 
> 时间：2013-04-17T06:57:34.743
> 
> 标签：c++, winapi, ipv6, ipv4

要将 IPv4 地址转换为 Internet 标准点分十进制格式的 ASCII 字符串，我们使用`inet_ntoa`函数。我应该为 IPv6 使用什么功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T07:14:25.083

IPv6 的等效函数是`inet_ntop`. 事实上，这可以做 IPv4 和 6，所以无论如何都值得使用。

# javascript - Css - 复选框上的自定义样式不起作用

> ID：16053524
> 
> 赞同：5
> 
> 时间：2013-04-17T06:57:49.683
> 
> 标签：javascript, css, checkbox, kendo-grid

首先，我有一个剑道网格。现在我正在向 DataSource 动态添加一个复选框，如下所示：

```
var chkBox =  "<input type='checkbox' id='chUpload'/><label for='chUpload'><a href='#' id='cbChoose'></a>test</label>";

var uploadedFiles = 
[
    { 
        facility: "Sunrise medical Laboratories", 
        documentName:  "Lab Results",
        documentType: "PDF",
        selected: chkBox
    }
]; 
```

以下是复选框上实现的样式：

```
input[type="checkbox"]
{
    display:none;
}

input[type="checkbox"] + label a
{
    display:inline-block;
    width:14px;
    height:14px;
    margin:-1px 4px 0 0;
    vertical-align:middle;
    background:url('../images/checkBox.png') right top no-repeat;
    cursor:pointer;
    float:right;
    margin-top:10px;
    margin-right:10px;
}

input[type="checkbox"]:checked + label a 
{
    background:url('../images/checkBox.png') -1px top no-repeat;
} 
```

> **我发现这些样式适用于我添加到面板栏选项卡的其他复选框，但在网格中，没有显示任何内容。**

我创建了一个[jsfiddle](http://jsfiddle.net/97gqZ/25/)，其中黑框是样式复选框。我已经隐藏`display:none;`在 css 中以查看所有文本框的位置。如果它正在使用中，则网格中不会显示自定义复选框。

***任何想法为什么？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:34:37.053

我发现了问题。

```
template: "<input type='checkbox' style='margin-right:23px; margin-top:0px;'  />" 
```

应该：

```
template: "#= selected #" 
```

这是我的一个简单错误。

这是一个工作[示例](http://jsfiddle.net/97gqZ/37/)。

# php - Image Magick 是否有更好的方法来遍历 pdf 页面（将 PDF 小册子转换为 .jpg）

> ID：16053528
> 
> 赞同：1
> 
> 时间：2013-04-17T06:57:58.887
> 
> 标签：php, imagemagick

这是我得到的代码，它工作正常。我只是不相信这是做到这一点的“最佳”方式。

```
<?
    $im = new imagick();
    $im->setResolution(10,10);
    $im->readimage('document.pdf');
    $pages = $im->getNumberImages();
    $im->clear();
    $im->destroy();

    for($i=0;$i<$pages;$i++) {
        $im = new imagick();
        $im->setResolution(100,100);
        $im->readimage('document.pdf['.$i.']');
        $im->setImageFormat('jpeg');
        $im->writeImage($i.'.jpg');
        $im->clear();
        $im->destroy();
    }
?> 
```

任何人都知道如何以最好的方式做到这一点？请告诉我如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-14T12:11:05.553

希望这会对某人有所帮助。

我的解决方案是使用[writeImages](http://www.php.net/manual/en/imagick.writeimages.php)方法。确保将*$adjoin*标志设置为 false 以获取单独的文件。

```
$im = new imagick();
$im->setResolution(100,100);
$im->readimage('document.pdf');
$im->setImageFormat('jpeg');
$im->writeimages('document.jpg', false);
$im->clear();
$im->destroy(); 
```

它将导致*document-0.jpg、document-1.jpg、document-3.jpg*等。

# android - Android 应用架构 - 片段

> ID：16053535
> 
> 赞同：2
> 
> 时间：2013-04-17T06:58:13.433
> 
> 标签：android, architecture, android-fragments

鉴于我在 Android 应用程序方面没有非常丰富的经验，我对应用程序的架构有疑问：

如果我决定创建一个只有一个活动的应用程序并且我只使用片段“加载”所有其他内容，我会遇到任何问题吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T07:10:54.810

不，这种做法绝对没问题。不仅如此，`Fragments`它们更轻量级`Activities`，因此您可以通过使用这种方法获得性能。但是，请记住，它`Activity`被设计为充当用于特定目的的单个用户屏幕，并且`Fragments`是该屏幕的一部分。因此，如果整个应用程序根据设计应包含单个用户屏幕，则您的方法会很好地工作，从而服务于单个具体且正确定义的目的。

# c# - 使用 ODBC 别名连接到 SQL Server

> ID：16053546
> 
> 赞同：0
> 
> 时间：2013-04-17T06:59:03.600
> 
> 标签：c#, sql-server, msde

我安装了一个 MSDE，并且我有一个数据库。并在客户端计算机上使用 ODBC 别名 (x)。我想使用用 C# 编写的 .NET4 程序连接到它。如果我只有登录名 (y) 和密码 (z)，我应该使用什么连接字符串？

还是我要从注册表中提取服务器和数据库名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:24:23.007

[http://support.microsoft.com/kb/310988](http://support.microsoft.com/kb/310988)

示例 #4 用于 DSN。

```
 {
   OdbcConnection cn;
   OdbcCommand cmd;
   string MyString;

   MyString="Select * from Customers";

   cn= new OdbcConnection("dsn=myDSN;UID=myUid;PWD=myPwd;");

   cmd=new OdbcCommand(MyString,cn);

   cn.Open();
   MessageBox.Show("Connected");

   cn.Close();
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:27:11.247

尝试这个：

> 提供者=MSDASQL.1；数据源=x

其中 x 是您的 ODBC 别名。您需要像往常一样为此添加安全信息。

# firefox - 火狐浏览器 20 支持 selenium-webdriver

> ID：16053550
> 
> 赞同：2
> 
> 时间：2013-04-17T06:59:16.503
> 
> 标签：firefox, selenium, selenium-webdriver

我有 Firefox 浏览器 v20，我想知道它支持哪个版本的 selenium-webdriver。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:21:14.523

使用最新的 Selenium Webdriver 2.32.0.jar

你可以在这里下载。[http://docs.seleniumhq.org/download/](http://docs.seleniumhq.org/download/)

您可以在此链接中查看更改日志，该链接声明它支持 Firefox 20。[http://selenium.googlecode.com/git/java/CHANGELOG](http://selenium.googlecode.com/git/java/CHANGELOG)

# c# - Livecycle 服务器访问问题

> ID：16053551
> 
> 赞同：1
> 
> 时间：2013-04-17T06:59:31.837
> 
> 标签：c#, adobe, livecycle, livecycle-designer

我有一个在远程计算机上运行的 Livecycle 应用程序。在我的 C# 程序中，我试图访问 Livecycle 服务器，但是我在这个主题上有一些连接问题。我应该先连接到运行 Livecycle 的远程计算机，然后设置 Livecycle 服务器的凭据吗？另外，我应该通过套接字编程连接到这台远程机器吗？提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T12:24:44.070

我了解当您说“Livecycle Server”时，您的意思是“Livecycle Services”。

ALC 服务通过各种渠道公开，客户最常用的可能是 SOAP（Web 服务）。

默认情况下，每个 SOAP 请求都必须包含执行的用户凭据（用户/密码）：

SOAP 属性（在客户端设置）示例：

```
Properties ConnectionProps = new Properties();
ConnectionProps.setProperty(ServiceClientFactoryProperties.DSC_DEFAULT_SOAP_ENDPOINT, "http://localhost:8080");
ConnectionProps.setProperty(ServiceClientFactoryProperties.DSC_TRANSPORT_PROTOCOL,ServiceClientFactoryProperties.DSC_SOAP_PROTOCOL);          
ConnectionProps.setProperty(ServiceClientFactoryProperties.DSC_SERVER_TYPE, "JBoss");
ConnectionProps.setProperty(ServiceClientFactoryProperties.DSC_CREDENTIAL_USERNAME, "changeit");
ConnectionProps.setProperty(ServiceClientFactoryProperties.DSC_CREDENTIAL_PASSWORD, "changeit"); 
```

以下链接详细说明了这一点和更多示例：

[http://help.adobe.com/en_US/livecycle/9.0/programLC/help/index.htm?content=000501.html](http://help.adobe.com/en_US/livecycle/9.0/programLC/help/index.htm?content=000501.html)

分配不同属性的方式可能会因语言或 Web 服务框架（axis、cxf ...）而异，但事实是，无论哪种方式，您都必须在请求中包含信息，否则将被拒绝由服务器。

# c# - Crystal 报表导出到 Excel 的多个选项卡

> ID：16053553
> 
> 赞同：0
> 
> 时间：2013-04-17T06:59:42.323
> 
> 标签：c#, crystal-reports, crystal-reports-2008, crystal-reports-2010

嗨，我有一个分组报告。每个组有 1000 条记录，每个组信息应该出现在 Excel 的不同选项卡中。据我所知，没有直接的方法可以使用 sap 水晶在不同的选项卡中导出到 excel，因为它是水晶的限制。是否有任何解决方法可以将每个组添加到相同 excel 输出的不同选项卡中。我正在使用 vs2010 创建以 oracle package.procedure 作为后端的报告。将参考光标输出报告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T23:18:18.907

您可以突发报告为每个组创建一个单独的 excel 文件，然后将所有文件合并到一个 excel 文件中。您可以在您的应用程序中实现这一点，或者使用市场上可用的工具之一。有 2 个报表调度器能够做到这一点：R-Tag 和 Visual Cut。R-Tag 还有一个报表查看器，可以导出到多个工作表，与调度程序相比，它是一种更便宜的解决方案。您还可以检查此功能是否在他们的免费许可证中可用。

# jquery - 在Child--jquery中获取Parent的全局变量值？

> ID：16053555
> 
> 赞同：0
> 
> 时间：2013-04-17T06:59:44.490
> 
> 标签：jquery, parent-child

我有 Parent.aspx 页面，我有一个按钮单击（第一个按钮）。

在单击按钮上，我得到一些作为全局变量的字段

右键单击手风琴中的那些字段，我会得到一个弹出窗口，它是用户控件。

对于此弹出窗口（ChildOne.ascx），我有自动完成（ChildTwo.ascx）要生成这些值，我需要发送第一个按钮单击的结果值。

最后我希望 Child.ascx 从 Parent.aspx 访问全局变量..，

我在我的 Child.ascx 中尝试过这样

```
 $('.element').parents('.pnlAccordion h3 VoyageMasterID') 
```

但是这些不起作用，所以有没有其他方法可以获取 Parent 元素

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:01:53.137

尝试

```
$('.element').parents.find('.pnlAccordion h3 VoyageMasterID') 
```

# asp.net-mvc-3 - 更新模型 List 类型的属性之一在提交时为空

> ID：16053556
> 
> 赞同：0
> 
> 时间：2013-04-17T06:59:48.347
> 
> 标签：asp.net-mvc-3, model, updatemodel

我有模型类“客户”。它的一个属性是对象的集合，可以说是“订单”。我希望在编辑期间我可以修改与要更新的选定客户关联的订单列表，但是当我提交修改后的客户和修改后的订单时，订单对象为空。请帮助我如何在编辑时发送修改后的订单。这是我的代码

**班级**

```
 public class Customer
    {
        public int CustomerId { get; set; }
        public string CustomerName { get; set; }
        public List<Order> Orders { get; set; }
    }

    public class Order
    {
        public int OrderId { get; set; }
        public string OrderName { get; set; }
    } 
```

**编辑视图**

```
@model MVCTestApp.Models.Customer
@{
    ViewBag.Title = "Edit";
}

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Customer</legend>
        @Html.HiddenFor(model => model.CustomerId)
        <div class="editor-label">
            @Html.LabelFor(model => model.CustomerName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.CustomerName)
            @Html.ValidationMessageFor(model => model.CustomerName)
        </div>
        @foreach (var order in Model.Orders)
        {
            <div class="editor-label">
                @Html.Label(order.OrderName)
            </div>
            <div class="editor-field">
                @Html.Editor(order.OrderName, new { id = order.OrderId })
            </div>
        }
        <p><input type="submit" value="Save" /> </p>
    </fieldset>
} 
```

**提交的编辑视图**

![在此处输入图像描述](https://i.stack.imgur.com/zJnv3.png)

![在此处输入图像描述](https://i.stack.imgur.com/pZVYJ.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:31:39.460

使用 a**`for-loop`**代替`foreach`：

```
@for (var i=0;i<Model.Orders.Count();i++)
{
    <div class="editor-label">
        @Html.Label(Model.Orders[i].OrderName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(m=> Model.Orders[i].OrderName)
    </div>
} 
```

这个问题的原因可以很容易地在该`foreach`方法的呈现 html 中看到。元素的名称没有索引，它们**都具有相同的名称**。模型绑定器无法推断如何将其传递给您的控制器。使用 a`for-loop`你有点强迫（如果这是正确的术语）标记/html 在你的`Orders`对象上有一个索引。完成后，模型绑定器现在可以正确地将您的输入映射到该`Orders`字段。

哦，顺便说一句。现在您正在使用 a`for-loop`您需要验证您的`Orders`集合不为空。但我相信你可以轻松做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:10:05.357

我建议您像这样获取订单：（检查 order_OrderName 是否是表单中输入字段的名称，例如使用 firebug 或其他内容查看源代码）

```
public ActionResult Edit(int id, string[] order_OrderName , Customer customer )
{
  //////
} 
```

# c# - 在 C#、C++ 和 Java 中导致堆栈溢出的最简单方法

> ID：16053559
> 
> 赞同：-2
> 
> 时间：2013-04-17T06:59:53.427
> 
> 标签：c#, java, javascript, c++

我正在看一个 C# 教程并遇到了 StackOverflowException。

叙述者使用下面的代码片段给出了这种异常的一个很好的例子，

```
public class Employee
{
    private string _name;

    public string Name
    {
       get{ return Name; }
    }
} 
```

我正在 C++ 和 Java 中寻找此类简单代码的一些示例，尤其是在可能导致 Stack Overflow 的 javascript 中。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-17T07:02:51.617

**这个解释是 Java、C 和 C++ 的 StackOverflowException 背后的基本原因。**

由于递归方法调用，通常在任何语言中都会导致堆栈溢出异常。

假设您有一个方法正在调用自身或任何其他无限递归循环的方法；这将导致 Stackoverflow 异常。这背后的原因是方法调用堆栈被填满，它将无法容纳任何其他方法调用。

**方法调用堆栈如下图所示。**

![在此处输入图像描述](https://i.stack.imgur.com/4Z6xK.png)

**解释**-- 假设 Main 方法有五个语句，并且第三个方法调用了 methodA，那么 Main 方法的执行在 statement3 处暂停，methodA 将被加载到调用堆栈中。然后方法 A 调用了方法 B。所以 methodB 也被加载到堆栈中。

因此，通过这种方式，无限的递归调用使调用堆栈被填满，此时它无法再提供任何方法。所以它会抛出一个 StackOverflowException。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T07:04:34.053

在 Java 中：

```
public class Test {
    public static void main(String[] args) {
        main(args);
    }
} 
```

一般来说，任何不终止或迭代次数过多的递归函数都会导致这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T07:04:05.087

对于您的代码片段，这是由于递归方法调用：

```
public string Name
{
   get{ return Name; }
} 
```

您正在`Name`递归调用方法/属性。堆栈填满（使用父`Name`方法），直到溢出并`StackOverflowException`抛出 a 。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-17T07:04:25.847

```
public string Name
{
   get{ return Name; }
} 
```

此属性使用 with 调用自身`return Name;`。这会导致无限递归。这就是为什么当你使用这个属性时，你会得到*[StackOverflowException](http://msdn.microsoft.com/en-us/library/system.stackoverflowexception%28v=vs.110%29.aspx)*。我相信这个属性的正确用法应该是：

```
public string Name
{
   get{ return _name; }
} 
```

> StackOverflowException 抛出执行堆栈溢出错误，通常是在**非常深或无限递归**的情况下。
> 
> 从 .NET Framework 2.0 版开始，StackOverflowException 对象无法被 try-catch 块捕获，并且默认情况下会终止相应的进程。因此，建议用户编写代码来检测和防止堆栈溢出。例如， **如果您的应用程序依赖于递归，请使用计数器或状态条件来终止递归循环**。

# c++ - 如何为 Vector 分配内存 动态的？

> ID：16053560
> 
> 赞同：1
> 
> 时间：2013-04-17T06:59:56.243
> 
> 标签：c++, opencv, dll

如何动态为 Vector 分配内存？

`vector<Point> vInPts;`// 我的输入向量 - 我已经转储了一些值（大小为 6）

// 对输入向量点做一些计算

`vector<Point> vOutPts;`// 如何为这个输出向量点动态分配内存

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T07:02:50.683

您可能不需要动态分配向量本身。在内部，vector 将动态分配存储其元素所需的内存，并负责管理此内存。所以只需在自动存储中声明向量：

```
 vector<Point> vOutPts; 
```

[您可以通过调用std::vector::reserve](http://en.cppreference.com/w/cpp/container/vector/reserve)为向量分配预定数量的内存。

如果您绝对必须动态分配向量，请确保您了解所有有关内存管理的知识，并阅读[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)和[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T07:06:04.967

如果你知道你想要的大小，那么你可以分配和初始化足够的元素：

```
vOutPts.resize(size); 
```

或者您可以使用该大小创建它：

```
vector<Point> vOutPts(size); 
```

否则，您可以一次增加一个元素：

```
vOutPts.push_back(some_point); 
```

如果您（大致）知道要推送多少个元素，那么您可以通过预先分配一些内存来提高效率，而无需初始化任何元素：

```
vOutPts.reserve(approx_size); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T07:01:55.853

这边走

```
vector <Point> *myvect= new vector<Point>() 
```

但不要忘记致电：

```
delete myvect 
```

当你完成使用它，否则你会造成泄漏。

请注意，以这种方式分配向量本身与动态分配向量内容不同。仅当您打算在函数内创建一个向量并通过引用返回它时，才应该对向量本身进行这种动态分配。自动内存管理比动态分配对象更容易处理，更不容易出错，最重要的是更安全......因此，当你不需要时，你应该避免这种动态分配

# php - Windows下的其他脚本更改了PHP setlocale？

> ID：16053566
> 
> 赞同：1
> 
> 时间：2013-04-17T07:00:23.913
> 
> 标签：php, windows-server, setlocale

**背景：**在 Windows Server 上运行的 Intranet CMS。有时用户会抱怨他们从 Intranet 生成的一些报告不包含`setlocale`为该脚本配置的内容。这意味着`März`他们得到的不是（德语） ，而是`March`（英语）。

就在我拥有的 PHP 脚本之上：

`setlocale(LC_TIME, 'de_DE','deu');`

这会返回`string(19) "German_Germany.1252"`并且这在 99.9% 的时间内都可以正常工作。

在 PHP 页面上有以下[警告](http://www.php.net/manual/en/function.setlocale.php)：

> 语言环境信息是按进程维护的，而不是按线程维护的。如果您在 Windows 上的 IIS 或 Apache 等多线程服务器 API 上运行 PHP，您可能会在脚本运行时遇到语言环境设置的突然更改，尽管脚本本身从未调用 setlocale()。这是由于其他脚本同时在同一进程的不同线程中运行，使用 setlocale() 更改了进程范围的语言环境。

现在这对我意味着什么？在脚本执行的瞬间，其他一些脚本会覆盖我的设置并设置为英语？

**无论如何，如何以体面的方式克服这个问题？**

注意关于这个有类似的问题，但他们并没有完全回答我的问题。

# javascript - 如何使用用户密码和开发人员密码验证 socket.io websockets

> ID：16053567
> 
> 赞同：4
> 
> 时间：2013-04-17T07:00:26.150
> 
> 标签：javascript, node.js, websocket, socket.io

我需要使用客户端的用户名、密码和开发人员密码验证 socket.io 客户端连接（开发人员密码用于确保该服务仅由注册开发人员开发的应用程序使用）。

问题是，应用程序的用户或客户端不应该看到开发人员密码。有没有办法在客户端不知道开发人员密码的情况下使用客户端用户名、密码和额外的开发人员密码来验证用户身份？任何帮助是极大的赞赏。

谢谢。

# javascript - 如何在另一个jquery文件中调用jquery方法

> ID：16053569
> 
> 赞同：2
> 
> 时间：2013-04-17T07:00:29.297
> 
> 标签：javascript, jquery

如何调用另一个jquery方法中的jquery方法？
**例如：**
在a.js中，我定义了一个变量`var url = "ssh";`
在b.js中，我想在a.js中使用url，怎么使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:03:11.833

众所周知，全局范围内的变量应该可以被声明后加载的所有脚本访问。将两个 JavaScript 文件包含在一个 HTML 文件中，将 b.js 放在 a.js 之后，以便您可以访问 url 变量。像这样

```
<script type="text/javascript" src="a.js"></script>
<script type="text/javascript" src="b.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:01:59.293

您可以直接访问文件 b.js 中的该变量。如果您在 html 页面中包含这两个文件。因为任何文件的变量/方法都是全局的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T07:06:10.573

如果你`var url`是全局的并且`a.js`是之前导入的，那么你可以直接`b.js`使用你的变量`url`

**里面的**例子**`b.js` `alert(url)`**

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T07:08:06.143

就正确的顺序和全局变量而言，查看您要查找的内容绝对是可访问的。

在文件`a.js`中，您有一个像这样的全局变量：

```
var url = "ssh"; 
```

`b.js`然后你可以在if`a.js`放在这个文件之前使用这个 var，或者你可以说在之前加载`b.js`。

所以脚本文件的顺序是：

```
<script src='a.js'></script>
<script src='b.js'></script> 
```**

# wix - 安装非常大的文件

> ID：16053570
> 
> 赞同：6
> 
> 时间：2013-04-17T07:00:32.260
> 
> 标签：wix, windows-installer, large-files

我有一个 MSI 包，除了程序组件之外，它还安装了一个大型数据库文件。此文件不包含在包中，但在 msi 文件旁边提供。到目前为止，此设置没有问题。现在数据库增长到大于 2 GB 的大小。这会在安装时引发错误（在 Win7 机器上测试）：

“写入文件时出错：[数据库文件的路径]。检查您是否拥有该文件夹的权限。”

搜索互联网显示 Windows Installer 似乎对大于 2GB 的文件有问题。作为解决方案，建议不要将文件包含在 MSI 中，而是将其与 msi 一起解压缩。这就是我们已经在做的事情。因此，建议的解决方案不起作用。

有没有办法使用 Windows Installer 安装大于 2 GB 的文件？这个限制对我来说似乎有点过时了。

PS：如果有帮助，安装是使用 WIX 构建的，但是任何关于在 msi 数据库本身中修改什么的提示都值得赞赏

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T13:19:01.023

Windows 安装程序确实有一些旧的限制。FileSize 的表定义限制为 2GB，Windows Installer 使用压缩文件压缩限制为 4GB 的数据（尽管您可以通过使用 cab-splitting 绕过它）。

我很确定您已经在 Windows Installer 中达到了真正的最大值，但是如果您有更新版本的 WiX 工具集（v3.7+），您可以查看 cab-splitting 是否适合您。要尝试替换`Media`您可能拥有的任何元素：

```
<MediaTemplate MaximumCabinetSizeForLargeFileSplitting='200' /> 
```

这将根据需要创建尽可能多的 200MB 机柜来包含您的内容。剩下的唯一问题是当文件大于 2GB 时 Windows Installer 是否会理解该文件。祝你好运！

# android - android：与活动方向不同的膨胀视图

> ID：16053574
> 
> 赞同：3
> 
> 时间：2013-04-17T07:00:36.603
> 
> 标签：android, orientation, layout-inflater

我的活动方向固定为横向。我在这个活动中通过 GLsurface 视图膨胀了 3 个不同的布局，根据用户操作，一次只能看到其中一个。这种布局之一是视频视图。我想支持视频的垂直和水平播放。但是对于所有其他视图，它需要固定为横向。我怎样才能做到这一点。

感谢您的时间和帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:50:28.240

在您的 AndroidManifest.xml 活动声明中删除

```
android:orientation 
```

标记并添加

```
android:configChanges="keyboardHidden|orientation" 
```

现在在您的活动中覆盖以下功能

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);    //To change body of overridden methods use File | Settings | File Templates.
    if (!isVideoViewSet)//change orientation to portrait other Views, skip for Video View
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
} 
```

在这里使用一些标志（上面代码片段中的**isVideoViewSet**），您可以检查设置了哪个视图并相应地设置活动方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:10:53.670

首先，我建议不要在同一个活动中夸大三个不同的视图，而是建议在一个基本活动之外使用 3 个不同的活动。

编辑：删除 LinearLayout 代码，因为这将是多余的。您可以更改方向并将它们固定在事件上以打开各个视图。

```
 setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 
```

# android - 如何在菜单中创建可点击项目以打开新活动？

> ID：16053575
> 
> 赞同：-1
> 
> 时间：2013-04-17T07:00:40.667
> 
> 标签：android, menu, android-activity, clickable

我制作了一个包含很多按钮和活动的应用程序。尽管我无法理解如何通过菜单中的按钮（当在电话上单击菜单按钮时）（充气菜单）来启动新活动。这是连接到我的活动的菜单的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/item1" android:title="@string/menu_home"></item>
</menu> 
```

这是我在 Java 中的活动：

```
package com.gmail.derekcraigsmith.nanaimobus;

import android.os.Bundle;
import android.app.Activity;
import android.content.ClipData.Item;
import android.content.Intent;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.PopupMenu;
import android.widget.PopupMenu.OnMenuItemClickListener;

public class Route1TimesCcMonfriAActivity extends Activity implements            

OnMenuItemClickListener {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.route1_times_cc_monfri_a);
}

public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.route1_times_cc_monfri_a, menu);
    return true;
}

@Override
public boolean onMenuItemClick(MenuItem item) {
    // TODO Auto-generated method stub
    return false;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:03:56.080

菜单文件夹中的 activity_main.xml

```
 <menu xmlns:android="http://schemas.android.com/apk/res/android" >
  <item android:id="@+id/next"
      android:title="Next" />
 </menu> 
```

在你的活动中膨胀菜单

```
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);

    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item)
{

switch (item.getItemId()) //get the id which is an int
{
case R.id.next:  // check if its the menu item next selected
    // Single menu item is selected do something
    // Ex: launching new activity/screen or show alert message
    Toast.makeText(MainActivity.this, "Next Selected", Toast.LENGTH_SHORT).show();
    startActivity(new Intent(MainActivity.this,secondAct.class));//start activity
    break;

default:
    return super.onOptionsItemSelected(item);   
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:06:32.263

```
int id = item.getItemId(); 
  switch (id) {
    case R.id.your_menu_item_id : {
       startActivity(new Intent(start_activity, next_activity));

 } 
```

其中 start activity 是您的主要活动， next_activity 是您要开始的活动。[在这里](http://www.survivingwithandroid.com/2013/04/android-listview-context-menu.html)查看我的博客以获取更多信息。

# jquery - 在 Datagrid for Command Field 中的删除操作之前显示确认消息

> ID：16053578
> 
> 赞同：0
> 
> 时间：2013-04-17T07:00:57.353
> 
> 标签：jquery, asp.net

我有一个带有 CommandField 的数据网格来删除一行。如何在删除行之前要求用户确认删除。

```
<asp:CommandField HeaderText="Изтрий" ShowDeleteButton="True" DeleteText="Изтрий" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:03:52.710

```
<asp:ImageButton runat="server" ID="btnDelete" ImageUrl="/Images/icons/user_delete.png" 
 ToolTip="Delete Product" CommandName="Delete"   OnClientClick="return confirm('Do you want to delete this product size ?')" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T07:30:34.377

这是一篇代码项目文章，它准确描述了您要归档的内容：

[http://www.codeproject.com/Articles/32756/ASP-NET-GridView-delete-confirmation-using-asp-Com](http://www.codeproject.com/Articles/32756/ASP-NET-GridView-delete-confirmation-using-asp-Com)

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T07:25:08.333

**使用 Jquery 在数据网格中添加删除按钮的确认消息**

你可以像这样为你的删除按钮设置一个类。我的类是“btndelete”

```
 <asp:ButtonColumn ItemStyle-CssClass="btndelete"  ButtonType="PushButton" CommandName="Delete" Text="delete"></asp:ButtonColumn> 
```

**然后写jquery代码**

```
 $('.btndelete').live('click', function () {
            return confirm("Are you sure you want to delete this record?");
        }); 
```

这对我有用！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T07:37:00.220

这个例子对你有帮助。如果你使用 asp 控件，请使用`OnClientClick="logout()"`你的函数

```
<script>
function logout()
{
if (confirm('Are you sure you want to logout?'))
location.href = "http://www.tackleprices.com/merchant/logout.php";
}
</script> 
```

# android - 如何设置像“X123”这样的EditText输入类型？

> ID：16053588
> 
> 赞同：1
> 
> 时间：2013-04-17T07:01:27.400
> 
> 标签：android, android-edittext

我想输入格式为**"X123"**的文本。即**第一个字母是字母，其余应该是数字**。那么是否有任何输入类型可以满足此要求，或者我必须使用**textwatcher**来编辑文本，然后在运行时更改编辑文本的输入类型。这可能吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:06:28.043

没有像这样的标准输入类型。

如果您想在输入时强制用户使用 TextWatcher，则可以使用它，但这可能也不是很好。你只会得到他们按下“错误”输入而没有任何反应的效果。

也许它是一种更简单、更好的方式来简单地输入一个显示预期输入的提示，一旦他们“提交”输入，你就可以根据正则表达式检查它。如果它与正则表达式不匹配，您可以显示一个 Toast，摇动输入字段，用红线包围编辑文本或任何您想显示哪个字段输入错误的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:45:07.460

使用此 RegExp 匹配字符串

```
string.matches("[a-zA-Z]\\d{3,}") // for compulasory one char and min three digit
string.matches("[a-zA-Z]\\d{2,}") // for compulasory one char and min two digit
string.matches("[a-zA-Z]\\d{1,}") // for compulasory one char and min one digit
string.matches("[a-zA-Z]\\d*") // for compulasory one char and zero or more digit 
```

希望它会帮助你。

# java - Maven 构建失败并出现错误：在指定路径找不到工件... - 路径稍有不正确

> ID：16053593
> 
> 赞同：4
> 
> 时间：2013-04-17T07:01:50.573
> 
> 标签：java, linux, maven, hadoop

运行此命令：

```
mvn package -Pcdh4 
```

这是maven中的错误：

```
[ERROR] Failed to execute goal on project hdfs-nfs-proxy: 
Could not resolve dependencies for project 
com.cloudera:hdfs-nfs-proxy:jar:0.8.1: 
Could not find artifact jdk.tools:jdk.tools:jar:1.6 at specified path 
/usr/lib/jvm/java-7-openjdk-amd64/jre/../lib/tools.jar -> [Help 1] 
```

`/../`它是返回目录的路径中的最后一行，路径应该是：

```
/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/tools.jar 
```

我不太了解 maven 或它在哪里选择这条路，我只是想遵循一些构建说明。

* * *

带调试：

```
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.730s
[INFO] Finished at: Wed Apr 17 07:06:39 UTC 2013
[INFO] Final Memory: 8M/360M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project hdfs-nfs-proxy: Could not resolve dependencies for project com.cloudera:hdfs-nfs-proxy:jar:0.8.1: Could not find artifact jdk.tools:jdk.tools:jar:1.6 at specified path /usr/lib/jvm/java-7-openjdk-amd64/jre/../lib/tools.jar -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal on project hdfs-nfs-proxy: Could not resolve dependencies for project com.cloudera:hdfs-nfs-proxy:jar:0.8.1: Could not find artifact jdk.tools:jdk.tools:jar:1.6 at specified path /usr/lib/jvm/java-7-openjdk-amd64/jre/../lib/tools.jar
        at org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.getDependencies(LifecycleDependencyResolver.java:210)
        at org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.resolveProjectDependencies(LifecycleDependencyResolver.java:117)
        at org.apache.maven.lifecycle.internal.MojoExecutor.ensureDependenciesAreResolved(MojoExecutor.java:258)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:201)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.project.DependencyResolutionException: Could not resolve dependencies for project com.cloudera:hdfs-nfs-proxy:jar:0.8.1: Could not find artifact jdk.tools:jdk.tools:jar:1.6 at specified path /usr/lib/jvm/java-7-openjdk-amd64/jre/../lib/tools.jar
        at org.apache.maven.project.DefaultProjectDependenciesResolver.resolve(DefaultProjectDependenciesResolver.java:189)
        at org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.getDependencies(LifecycleDependencyResolver.java:185)
        ... 22 more
Caused by: org.sonatype.aether.resolution.DependencyResolutionException: Could not find artifact jdk.tools:jdk.tools:jar:1.6 at specified path /usr/lib/jvm/java-7-openjdk-amd64/jre/../lib/tools.jar
        at org.sonatype.aether.impl.internal.DefaultRepositorySystem.resolveDependencies(DefaultRepositorySystem.java:375)
        at org.apache.maven.project.DefaultProjectDependenciesResolver.resolve(DefaultProjectDependenciesResolver.java:183)
        ... 23 more
Caused by: org.sonatype.aether.resolution.ArtifactResolutionException: Could not find artifact jdk.tools:jdk.tools:jar:1.6 at specified path /usr/lib/jvm/java-7-openjdk-amd64/jre/../lib/tools.jar
        at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:538)
        at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveArtifacts(DefaultArtifactResolver.java:216)
        at org.sonatype.aether.impl.internal.DefaultRepositorySystem.resolveDependencies(DefaultRepositorySystem.java:358)
        ... 24 more
Caused by: org.sonatype.aether.transfer.ArtifactNotFoundException: Could not find artifact jdk.tools:jdk.tools:jar:1.6 at specified path /usr/lib/jvm/java-7-openjdk-amd64/jre/../lib/tools.jar
        at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:256)
        ... 26 more
[ERROR]
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException 
```

mvn -v

```
root@hadoop-hdfsnfsproxy1:/opt/hdfs-nfs-proxy-release-0.8.1# mvn -v
Apache Maven 3.0.4
Maven home: /usr/share/maven
Java version: 1.7.0_15, vendor: Oracle Corporation
Java home: /usr/lib/jvm/java-7-openjdk-amd64/jre
Default locale: en_US, platform encoding: UTF-8
OS name: "linux", version: "3.5.0-27-generic", arch: "amd64", family: "unix"
root@hadoop-hdfsnfsproxy1:/opt/hdfs-nfs-proxy-release-0.8.1# 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T07:07:00.793

您的 JAVA_HOME 应该指向 JDK，而不是 JRE：tools.jar 是位于 JDK 的 lib 目录中的 lib。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T07:15:10.370

在 Linux/Ubuntu 框中安装`Sun JDK`并指向`JAVA_HOME`已安装的`JDK`.

[参考链接](https://github.com/thickpaddy/jenkins_campfire_plugin/issues/12)

# reporting-services - 导出到 MS Word 时页脚不隐藏

> ID：16053600
> 
> 赞同：1
> 
> 时间：2013-04-17T07:02:14.257
> 
> 标签：reporting-services, ms-word, ssrs-2008, footer

我只想在我的 SSRS 报告的第一页中显示页脚（其中包含一些文本）。所以我在表达式中编写以下代码来隐藏：

```
=IIF(Globals!PageNumber = 1, false, true) 
```

但是，当我通过 SSRS 导出到 MS Word 时，我在每一页中都得到了页脚（它在 PDF 中工作得非常好）。

根据以下内容，这似乎是一个已知问题：http: [//msdn.microsoft.com/en-us/library/dd283105 (v=sql.105).aspx#ReportHeadersFooters](http://msdn.microsoft.com/en-us/library/dd283105(v=sql.105).aspx#ReportHeadersFooters)

该文档提供了一种使用“带有文本运行的表达式”的解决方法。

我一直试图弄清楚这意味着什么以及如何应用它，但一直在苦苦挣扎。

有谁知道这个问题的解决方法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-22T00:57:04.083

这个答案来这个用户已经很晚了，但是对于任何其他与之抗争的人，请在此处查看 msdn SQL Server 导出到 Word 的文章：

```
http://msdn.microsoft.com/en-us/library/cc627455(v=SQL.100).aspx 
```

简而言之，不支持在报告中的任何位置切换状态。无论第一页上报告项的状态是什么，它都会在整个导出的报告中处于什么状态。考虑到这一点，PDF 似乎将是一种更好的格式来支持您的客户。

# paypal - 与 Do DIrect Payment/CreditCard 的 Paypal 计费协议

> ID：16053602
> 
> 赞同：0
> 
> 时间：2013-04-17T07:02:16.527
> 
> 标签：paypal

我一直在研究参考交易。是否可以使用 Do Direct Payment 创建计费协议，因为它没有在响应中返回任何令牌？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:44:35.460

没有使用 DoDirectPayment API 创建的计费协议。为了再次向买家收费，您所要做的就是对参考交易进行 API 调用，并传递上一个成功的交易 id。如果您想设置计费协议，Express Checkout 将是您想要使用的 API。

# android - Android - 覆盖 android 布局文件中的样式

> ID：16053603
> 
> 赞同：2
> 
> 时间：2013-04-17T07:02:16.667
> 
> 标签：android, android-layout, android-styles

我经常在 android 中看到如下布局文件：

```
<?xml version="1.0" encoding="utf-8"?>    
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@android:id/text1"
        android:layout_width="match_parent"
        android:layout_height="?android:attr/listPreferredItemHeightSmall"
        android:textAppearance="?android:attr/textAppearanceListItemSmall"
        android:gravity="center_vertical"
        android:checkMark="?android:attr/listChoiceIndicatorMultiple"
        android:paddingStart="?android:attr/listPreferredItemPaddingStart"
        android:paddingEnd="?android:attr/listPreferredItemPaddingEnd"
    /> 
```

那实际上是`android.R.layout.simple_list_item_multiple_choice`布局文件。

我想知道的是，如果我在我的应用程序中使用这个布局，有没有办法在我的`styles.xml`. 因此，例如，我想定义一个可绘制对象，`checkMark`我可以在我的应用程序主题或 styles.xml 文件中执行此操作吗？如果是这样，怎么做？现在我只是最终复制这些文件并根据需要更改属性。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-03-06T06:59:43.073

对的，这是可能的。您只需要在主题中覆盖此样式属性。例如，如果您想更改可绘制的复选标记：

`android:checkMark="?android:attr/listChoiceIndicatorMultiple"`

在您的主题中添加以下内容：
`<item name="android:listChoiceIndicatorMultiple">@drawable/your_custom_selector_for_check_mark</item>`

[您可以使用此网站http://android-holo-colors.com/](http://android-holo-colors.com/)创建资源和选择器

# ios - 如何在ios中将Casa_Batll%C3%B3转换为Casa_Batllȯ（拉丁字母）

> ID：16053604
> 
> 赞同：0
> 
> 时间：2013-04-17T07:02:16.747
> 
> 标签：ios, nsstring

我想转换`Casa_Batll%C3%B3`为`Casa_Batllȯ`.

```
NSLog(@"Converting String:%@",[@"Casa_Batll%C3%B3" stringByReplacingOccurrencesOfString:@"%c3%b3" withString:@"ȯ"]); 
```

使用此代码，我只得到已知的拉丁字符或一些特殊字符，而不是未知的拉丁字符或特殊字符。实际上我是从已经创建的数据库中获取字符串，所以我不知道这个数据库中的那些字符串。我也试过`NSString+HTML.m`在这个[MWFeedParser](https://github.com/mwaterfall/MWFeedParser/blob/master/Classes/NSString+HTML.m)中使用。但我什么也没得到。我也看过这些[link1](https://stackoverflow.com/questions/659602/objective-c-html-escape-unescape)和[link2](http://www.utf8-chartable.de/unicode-utf8-table.pl)。请帮助任何人给我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:09:15.160

使用`stringByReplacingPercentEscapesUsingEncoding:`.

```
NSLog(@"Converting String:%@",[@"Casa_Batll%C3%B3" stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]); 
```

适当调整编码。

# javascript - 使用多选组合时如何获得选定值的焦点

> ID：16053606
> 
> 赞同：0
> 
> 时间：2013-04-17T07:02:18.850
> 
> 标签：javascript

我正在使用多选组合框，我从组合框中选择了几个值并将选定的值保存到 db。当我重新打开页面时，我需要将焦点放在选择并保存的值上。

```
function getSelectedValues() {
    var from = document.getElementById("309127");
    var to;
    var v = from.options.length;
    var selectedValues = "";

    for (var i = 0; i < v; i++) {
        if (from.options[i] && from.options[i].selected) {
            var CVal = from.options[i].value;
            var CText = from.options[i].text;

            if (selectedValues == "") {
                selectedValues = CVal;
            }
            else {
                selectedValues = selectedValues + "~" + CVal;
            }

        }
    }
    return selectedValues;

} 
```

这是我用来将选定值保存在 db 中的 javascript 函数。任何人都可以帮助我解决如何将注意力重新集中在选定的项目上吗？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:35:28.183

要使用 javascript 设置焦点，您可以使用

```
document.getElementById("309127").focus(); 
```

对于您的问题，我假设您将值发送到 PHP 页面或类似的东西以更新数据库。如果是这样，当您返回页面时，您的问题将是获取选定的值。两个建议：

*   使用ajax更新数据库，这样就不需要退出页面了，
*   通过 GET 或类似方法将选定的值传递回您的页面，并将重点放在页面加载上。

编辑： - - - - - - -

例如，如果您通过 GET 传递值，例如 (www.example.com?param1=three)

您可以使用 javascript 在加载时选择该值：

```
<html>
<body onload="load()">
<select id="example">
    <option value="one"> one </option>
    <option value="two"> two </option>
    <option value="three"> three </option>
</select>
</body>

<script>
function load(){
    var param1 = getParameterByName("param1");
    var selected = document.getElementById('example');
    var opts = selected.options.length;
    for (var i=0; i<opts; i++){
    if (selected.options[i].value == param1){
        selected.options[i].selected = true;
        break;
    }
}
}
function getParameterByName(name)
{
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(window.location.search);
  if(results == null)
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
}
</script>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:31:03.673

尝试`var from = document.getElementById("309127");from.focus();`

# google-analytics - 如何使用谷歌分析跟踪 .gif 和 flash 横幅

> ID：16053612
> 
> 赞同：0
> 
> 时间：2013-04-17T07:02:41.690
> 
> 标签：google-analytics

我正在使用谷歌分析中的页面分析选项来跟踪我的 wordpress 网站。我可以跟踪除 .gif 和 flash 横幅之外的所有内容和链接。我无法理解如何使用谷歌分析跟踪 .gif 和 flash 横幅。

以下是我正在使用的代码

```
<a target="_blank" href="http://web.boc.lk/">
<img src="http://www.news360.lk/stg/wp-content/uploads/2013/04/400-x-120.gif">
    </a> 
```

如果有人知道如何做到这一点，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:38:51.947

页面内分析仅适用于内部链接。如果这是页内分析的外部链接，则不会计算这些点击。

如果你想要一个工具来提供网站的完整热图，你可以试试[CrazyEgg](http://www.crazyegg.com/)。

但是，如果您的网站上有横幅，那么您确实应该使用 AdManager 来管理这些横幅。这些工具还可以为您提供有关展示次数和点击次数的统计信息，并且通常可以提供更好的数据。查看其他答案：

[https://stackoverflow.com/a/15606096/272031](https://stackoverflow.com/a/15606096/272031)

# android - 当三次贝塞尔曲线的端点变化时找到新的控制点

> ID：16053620
> 
> 赞同：16
> 
> 时间：2013-04-17T07:03:03.170
> 
> 标签：android, android-canvas, bezier, cubic

我正在我的一个 Android 应用程序中实现三次贝塞尔曲线逻辑。

我已经在自定义视图的 onDraw 的画布上实现了三次贝塞尔曲线代码。

```
// Path to draw cubic bezier curve
Path cubePath = new Path();

// Move to startPoint(200,200) (P0)
cubePath.moveTo(200,200);

// Cubic to with ControlPoint1(200,100) (C1), ControlPoint2(300,100) (C2) , EndPoint(300,200) (P1)
cubePath.cubicTo(200,100,300,100,300,200);

// Draw on Canvas
canvas.drawPath(cubePath, paint); 
```

我在下图中可视化了上面的代码。

![上述代码的输出](https://i.stack.imgur.com/02cS2.png)

**[更新]**

```
Logic for selecting first control points, I've taken ,
baseX = 200 , baseY = 200 and curve_size = X of Endpoint - X of Start Point

Start Point     : x = baseX and y = baseY
Control Point 1 : x = baseX and y =  baseY - curve_size
Control Point 2 : x = baseX + curve_size and y =  baseY - curve_size
End Point       : x = baseX + curve_size and y = baseY 
```

我想允许用户更改上面曲线的端点，并根据新的端点，使画布无效。

但问题是，Curve 由两个控制点维护，需要根据 EndPoint 的变化重新计算。

就像，我只想在 EndPoint 从 (300,200) 变为 (250,250) 时找到新的控制点

如下图所示：

![新图片](https://i.stack.imgur.com/5mlqv.png)

请帮助我根据新的端点计算两个新的控制点，**曲线形状将保持与前一个端点相同**。

我在搜索过程中参考以下参考链接：

[http://pomax.github.io/bezierinfo/](http://pomax.github.io/bezierinfo/)

[http://jsfiddle.net/hitesh24by365/jHbVE/3/](http://jsfiddle.net/hitesh24by365/jHbVE/3/)

[http://en.wikipedia.org/wiki/B%C3%A9zier_curve](http://en.wikipedia.org/wiki/B%C3%A9zier_curve)

[http://cubic-bezier.com/](http://cubic-bezier.com/)

在回答这个问题时，也感谢任何参考链接。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-19T10:40:41.327

更改端点意味着两件事，沿 P1 的旋转和缩放因子。

比例因子（我们称之为 s）是 len(p1 - p0) / len(p2 - p0)

对于旋转因子（我们称之为 r），我让你去[计算 android 中三点之间的角度](https://stackoverflow.com/questions/10243663/calculating-the-angle-between-three-points-in-android)，这也提供了一个特定于平台的实现，但你可以通过缩放/旋转 p1 相对于 p0 来检查正确性，你应该得到p2 结果。

接下来，将相对于 p0 的缩放和旋转应用到 c1 和 c2。为方便起见，我将新的 c1 称为“d1”和新的 d2。

```
d1 = rot(c1 - p0, factor) * s + p0
d2 = rot(c2 - p0, factor) * s + p0 
```

为 rot() 定义一些伪代码（旋转[http://en.wikipedia.org/wiki/Rotation_%28mathematics%29](http://en.wikipedia.org/wiki/Rotation_%28mathematics%29)）

```
rot(point p, double angle){
  point q;
  q.x = p.x * cos(angle) - p.y * sin(angle);
  q.y = p.x * sin(angle) + p.y * cos(angle);
} 
```

您的贝塞尔曲线现在相对于 p0 进行缩放和旋转，p1 更改为 p2，

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-20T06:59:04.923

首先，我请您查看以下文章：

1.  [贝塞尔曲线](http://escience.anu.edu.au/lecture/cg/Spline/bezier.en.html)
2.  [为什么选择 B 样条曲线](http://escience.anu.edu.au/lecture/cg/Spline/whyBSpline.en.html)
3.  [B 样条曲线摘要](http://escience.anu.edu.au/lecture/cg/Spline/bSplineSummary.en.html)

您要实现的是分段复合贝塞尔曲线。从 n 个控制点（包括开始/结束）的摘要页面中，您可以获得 (n - 1)/3 个分段贝塞尔曲线。

**控制点从字面上**塑造曲线。如果您没有给新点提供适当的控制点，您将无法创建平滑连接的贝塞尔曲线。生成它们是行不通的，因为它太复杂并且没有普遍接受的方法。

如果您没有/不想提供额外的控制点，您应该使用 Catmull-Rom 样条，它通过所有控制点并且是 C1 连续的（导数在曲线上的任何点都是连续的）。

java/android 中 Catmull Rom Spline 的链接：

*   [http://hawkesy.blogspot.in/2010/05/catmull-rom-spline-curve-implementation.html](http://hawkesy.blogspot.in/2010/05/catmull-rom-spline-curve-implementation.html)
*   [https://github.com/Dongseob-Park/catmull-rom-spline-curve-android](https://github.com/Dongseob-Park/catmull-rom-spline-curve-android)
*   [适用于 Android 的 catmull-rom 样条曲线](https://stackoverflow.com/questions/5602584/catmull-rom-splines-for-android)（类似于您的问题）

底线是如果您没有控制点，请不要使用三次贝塞尔曲线。生成它们是一个问题而不是解决方案。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-24T17:38:25.117

似乎您在这里旋转和缩放一个正方形，您知道底部的两个点并且需要计算另外两个点。这两个已知点与另外两个形成两个三角形，所以我们只需要找到三角形中的第三个点。假设终点是 x1, y1：

```
PointF c1 = calculateTriangle(x0, y0, x1, y1, true); //find left third point
PointF c2 = calculateTriangle(x0, y0, x1, y1, false); //find right third point

cubePath.reset();
cubePath.moveTo(x0, y0);
cubePath.cubicTo(c1.x, c1.y, c2.x, c2.y, x1, y1);

private PointF calculateTriangle(float x1, float y1, float x2, float y2, boolean left) {
                PointF result = new PointF(0,0);
                float dy = y2 - y1;
                float dx = x2 - x1;
                float dangle = (float) (Math.atan2(dy, dx) - Math.PI /2f);
                float sideDist = (float) Math.sqrt(dx * dx + dy * dy); //square
                if (left){
                    result.x = (int) (Math.cos(dangle) * sideDist + x1);
                    result.y = (int) (Math.sin(dangle) * sideDist + y1);                    
                }else{
                    result.x = (int) (Math.cos(dangle) * sideDist + x2);
                    result.y = (int) (Math.sin(dangle) * sideDist + y2);
                }
                return result;
            } 
```

...

还有其他方法可以做到这一点，无论您在路径中的第一个点和最后一个点之间有多少点或事件其形状都无关紧要。

```
//Find scale
Float oldDist = (float) Math.sqrt((x1 - x0) * (x1 - x0) + (y1 - y0) * (y1 - y0));
Float newDist = (float) Math.sqrt((x2 - x0) * (x2 - x0) + (y2 - y0) * (y2 - y0)); 
Float scale = newDist/oldDist;

//find angle
Float oldAngle = (float) (Math.atan2(y1 - y0, x1 - x0) - Math.PI /2f);
Float newAngle = (float) (Math.atan2(y2 - y0, x2 - x0) - Math.PI /2f);
Float angle = newAngle - oldAngle;

//set matrix
Matrix matrix = new Matrix();
matrix.postScale(scale, scale, x0, y0);
matrix.postRotate(angle, x0, y0);

//transform the path
cubePath.transform(matrix); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-25T20:35:51.320

Lumis 建议的一个小变种

```
// Find scale
Float oldDist = (float) Math.sqrt((x1 - x0) * (x1 - x0) + (y1 - y0) * (y1 - y0));
Float newDist = (float) Math.sqrt((x2 - x0) * (x2 - x0) + (y2 - y0) * (y2 - y0)); 
Float scale = newDist/oldDist;

// Find angle
Float oldAngle = (float) (Math.atan2(y1 - y0, x1 - x0));
Float newAngle = (float) (Math.atan2(y2 - y0, x2 - x0));
Float angle = newAngle - oldAngle;

Matrix matrix = new Matrix();
matrix.postScale(scale, scale);
matrix.postRotate(angle);

float[] p = { c1.x, c1.y, c2.x, c2.y };
matrix.mapVectors(p);
PointF newC1 = new PointF(p[0], p[1]);
PointF newC2 = new PointF(p[2], p[3]); 
```

# java - 在 Java 中读取 XML 文件内容

> ID：16053621
> 
> 赞同：1
> 
> 时间：2013-04-17T07:03:08.660
> 
> 标签：java, xml, xml-parsing

你能告诉我用示例代码在 Java 中读取 XML 文件的最佳方法吗？XML 内容如下所示。

```
<table sourceName="person" targetName="person">
       <column sourceName="id" targetName="id"/>
       <column sourceName="name" targetName="name"/>``
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:02:02.850

我会使用 JAXB，试试这个，它有效

```
public class Test1 {
    @XmlAttribute
    String sourceName;
    @XmlAttribute
    String targetName;
    @XmlElement(name = "column")
    List<Test1> columns;

    public static Test1 unmarshal(File file) {
        return JAXB.unmarshal(file, Test1.class);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:46:08.873

您可以使用[简单](http://simple.sourceforge.net/)形式的简单 XML 序列化：

```
import org.simpleframework.xml.Serializer;
import org.simpleframework.xml.core.Persister;

public class App {

    public static void main(String[] args) throws Exception {
        String xml = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n"
                + "<table sourceName=\"person\" targetName=\"person\">\n"
                + "    <column sourceName=\"id\" targetName=\"id\"/>\n"
                + "    <column sourceName=\"name\" targetName=\"name\"/>``\n"
                + "</table>";
        Serializer serializer = new Persister();
        Table table = serializer.read(Table.class, xml);
        System.out.println(table.getSourceName());
        System.out.println(table.getTargetName());
        for (Column colunmn : table.getColumns()) {
            System.out.println(colunmn.getSourceName());
            System.out.println(colunmn.getTargetName());
        }
    }
} 
```

`Table`：

```
import java.util.List;
import org.simpleframework.xml.Attribute;
import org.simpleframework.xml.ElementList;
import org.simpleframework.xml.Root;

@Root(name = "table")
public class Table {

    @Attribute
    private String sourceName;
    @Attribute
    private String targetName;
    @ElementList(name = "column", inline = true)
    private List<Column> columns;

    public Table() {
    }

    public String getSourceName() {
        return sourceName;
    }

    public void setSourceName(String sourceName) {
        this.sourceName = sourceName;
    }

    public String getTargetName() {
        return targetName;
    }

    public void setTargetName(String targetName) {
        this.targetName = targetName;
    }

    public List<Column> getColumns() {
        return columns;
    }

    public void setColumns(List<Column> columns) {
        this.columns = columns;
    }
} 
```

`Column`：

```
import org.simpleframework.xml.Attribute;
import org.simpleframework.xml.Root;

@Root(name = "column")
public class Column {

    @Attribute
    private String sourceName;
    @Attribute
    private String targetName;

    public Column() {
    }

    public String getSourceName() {
        return sourceName;
    }

    public void setSourceName(String sourceName) {
        this.sourceName = sourceName;
    }

    public String getTargetName() {
        return targetName;
    }

    public void setTargetName(String targetName) {
        this.targetName = targetName;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T13:51:24.653

关于这个主题的书籍已经写了，这一切都取决于。如果文件的结构简单且稳定（它将元素/属性映射到 Java 类，并且您不想每周更改和重新编译 Java 类 3 次），那么 JAXB 是一个不错的选择。

除此之外，还有一系列通用树模型——DOM 是使用最广泛、最古老和最差的；我会推荐 JDOM2 或 XOM。

但理想情况是完全避免将数据读入 Java；“XRX”或“端到端 XML”原则是在整个应用程序中使用面向 XML 的语言，例如 XSLT 和 XQuery，如果确实需要，可能偶尔调用 Java 支持例程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T07:10:51.520

因为它是一个非常小的 XML 文件，所以我会使用 DOM 解析，你可以在这里找到一个完整的例子：

[http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/](http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/)

但本质上：

```
File fXmlFile = new File("/Users/mkyong/staff.xml");
DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
Document doc = dBuilder.parse(fXmlFile);

NodeList nList = doc.getElementsByTagName("table");

for (int temp = 0; temp < nList.getLength(); temp++) {
    Node tableNode = nList.item(temp);
    Element tableElement = (Element) tableNode;

    System.out.println("Table source name: " + tableElement.getAttribute("sourceName"));
    System.out.println("Table target name: " + tableElement.getAttribute("targetName"));

    NodeList columnList = tableElement.getElementsByTagName("column");
    for (int j = 0; j < columnList.getLength(); j++) {
        Node columnNode = columnList.item(j);
        Element columnElement = (Element) columnNode;

        System.out.println("Column source name: " + columnElement.getAttribute("sourceName"));
        System.out.println("Column target name: " + columnElement.getAttribute("targetName"));

    }
} 
```

请参阅示例顶部的相关导入。

希望有帮助，A.

# c# - 点网异常：空引用和参数空异常

> ID：16053623
> 
> 赞同：1
> 
> 时间：2013-04-17T07:03:14.167
> 
> 标签：c#, .net, visual-studio-2010, .net-4.5

考虑配置（在我的例子中是属性）为空的情况。

```
public Configuration {get;set;}

if (configuration == null)
{
   throw NullReferenceException("Blah blah blah..");
} 
```

但是，我在某处读到，“永远不要在代码中抛出空引用异常。`NullReferenceException`是运行时异常，只能由运行时引发”。

如果它是函数的参数，我想我会使用`ArgumentNullException`.

那么，在这种情况下应该是什么例外？总的来说，在什么情况下应该抛出什么异常？谷歌搜索了这个但没有令人满意的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T07:11:15.063

[InvalidOperationExceptions](http://msdn.microsoft.com/en-gb/library/system.invalidoperationexception%28v=vs.71%29.aspx) states -*当方法调用对于对象的当前状态无效时引发的异常，*我想这不是很合适吗？我同意空引用不是你应该抛出的。

[这是](http://msdn.microsoft.com/en-us/library/aa664610.aspx)另一个常见异常列表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T07:10:54.677

该建议是正确的，因为空引用异常并没有说明实际错误。

如果该值不允许为空，那么您应该尝试找到一个描述错误的异常。问题不在于引用为空，而是引用为空的根本原因。

如果您找不到任何足够接近的异常类，例如，您可以创建自己的`ConfigurationMissingException`异常。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-17T07:11:09.860

[`InvalidOperationException`](http://msdn.microsoft.com/en-gb/library/system.invalidoperationexception.aspx)

> 当方法调用对于对象的当前状态无效时引发的异常。

这听起来像你的情况。

基本上，如果它与参数无关，并且您想抛出内置异常，您的选择通常归结为两个异常之一。如果您*永远*无法兑现请求，`NotImplementedException`是合适的。但如果是配置或状态问题，`InvalidOperationException`则符合要求。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-17T07:26:30.210

在什么情况下你不应该抛出异常。它仅在发生意外情况时使用，例如您尝试为配置设置一些`null`值。但是，如果配置可以`null`并且*已经*是，您应该以其他方式处理它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-17T07:58:07.560

我认为这里实际上有三种情况：

**首先**，这可能是由于班级的*用户*做错事而导致的吗？他们是否忘记先调用或设置某些东西（即他们是否违反了时间依赖性）？

如果是这样，那么我认为适当的例外是`InvalidOperationException`，带有`Message`描述如何解决问题的 ，或者您可能想要指定如下所述的代码合同。

**其次**，这只能由于课堂上的逻辑错误而发生吗？换句话说，无论类的用户如何使用它的公共方法和属性，都应该不会发生这种情况吗？

如果是这样，那么如果您使用的是[代码合同](http://msdn.microsoft.com/en-us/library/dd264808.aspx)，您可以通过以下方式声明是这种情况：

```
Contract.Assume(configuration != null); 
```

我觉得这要好得多。但是，违规引发的异常是无法捕获的，除非您 catch `Exception`。这是经过深思熟虑的，也是 IMO 的正确选择。

如果你不使用代码契约，那么你就会被 throwing 困住`InvalidOperationException`。

**第三**，如果这个异常是由于程序无法控制的外部因素而自然出现的，如果不存在与问题匹配的异常类型，您可能应该为其编写自定义异常类型。然而，对于这个特定的例子，情况似乎不太可能。我希望它会在其他地方处理。

# spring - 从目录动态更改的 FTP 服务器下载文件

> ID：16053629
> 
> 赞同：0
> 
> 时间：2013-04-17T07:03:38.157
> 
> 标签：spring, ftp, spring-integration

我正在使用 Spring Integration 从 FTP 服务器下载/上传文件。

如何`remote-directory="/directory Name"`在 Spring FTP:Inbound-Channel 中动态更改。

我的客户基本上每天都会创建一个文件夹`"MM-dd-yy"`，并将所有文件复制到那里。在“FTP：入站通道”中，我没有找到任何配置此模式的方法。我基本上必须在配置中硬编码目录或文件名。我想要的是以编程方式设置路径。因为有时我需要从目录下载所有文件或只下载特定文件。

我发现`"remote-directory-expression="'directory'+'/'+ new java.text.SimpleDateFormat('dd-MM-yyyy').format(new java.util.Date())"`可以在 FTP:Outbound-channel 中设置 FTP:InBound-channel 中有没有这样的属性

我的配置是这样的：

```
<bean id="ftpClientFactory"
    class="org.springframework.integration.ftp.session.DefaultFtpSessionFactory">
    <property name="host" value="${host}" />
    <property name="port" value="${availableServerPort}" />
    <property name="username" value="${userid}" />
    <property name="password" value="${password}" />
</bean>

<int-ftp:inbound-channel-adapter id="ftpInbound"
    cache-sessions="false" channel="ftpChannel" session-factory="ftpClientFactory"
    filename-pattern="*.txt" auto-create-local-directory="true"
    delete-remote-files="false" remote-directory="/filedirectory"
    local-directory="${local_directory}">
    <int:poller fixed-rate="1000" />
</int-ftp:inbound-channel-adapter>

<int:channel id="ftpChannel">
    <int:queue />
</int:channel> 
```

我没有找到一种方法来完成上述所有项目。

请让我知道如何实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:50:21.660

你不能用入站适配器来做，但是[<ftp:outbound-gateway/>](http://static.springsource.org/spring-integration/reference/html/ftp.html#ftp-outbound-gateway)可以用来实现你所需要的；[这里](http://static.springsource.org/spring-integration/reference/html/ftp.html#ftp-outbound-gateway)描述。

您可以使用`ls`列出文件，然后使用;`<splitter/>`和另一个网关。`get`或者您可以`mget`在表达式中使用带有文件名模式的命令。

[FTP 示例](https://github.com/SpringSource/spring-integration-samples/tree/master/basic/ftp)有一个使用网关的示例

# javascript - 工具箱中的事件冒泡

> ID：16053633
> 
> 赞同：1
> 
> 时间：2013-04-17T07:03:46.317
> 
> 标签：javascript, toolkitchen

我正在考虑工具箱库中事件冒泡的最佳实践。我有一个带有组件的嵌套标记，并且在此某处按下了一个按钮，该按钮应触发组件层次结构中某处的事件。这是一个例子，我很好奇是否有更好的方法。甚至可能是 toolkithcen 库本身的内置事件系统。

```
// In one component
mouseClicked: function () {

  var evt = new CustomEvent('ganttChartNewEventRequested');
  document.dispatchEvent(evt);

}

// In another component
document.addEventListener('ganttChartNewEventRequested', function(e){

    alert('create new event');

}, false); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:26:49.197

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
  <script src='http://toolkitchen.github.io/cdn/toolkit.min.js?shadow'></script>
</head>
<body>
  <my-sink></my-sink>

  <element name="my-source">
    <script>
        Toolkit.register(this, {
          ready: function() {
            setTimeout(function() {
              this.send("hello-world");
            }.bind(this), 500);
            setTimeout(function() {
              this.send("goodbye-world");
            }.bind(this), 1500);
          }
        });
    </script>
  </element>

  <element name="my-sink" on-goodbye-world="goodbyeWorld">
    <template>
        <my-source on-hello-world="helloWorld"></my-source>
        <div >
            {{message}}
        </div>
    </template>
    <script>
        Toolkit.register(this, {
          message: '...',
          helloWorld: function() {
            this.message = 'hello world';
          },
          goodbyeWorld: function() {
            this.message = 'goodbye world';
          }
        });
    </script>
  </element>

</body>
</html> 
```

# c# - 下载文件并创建与主机相同的文件夹结构

> ID：16053634
> 
> 赞同：2
> 
> 时间：2013-04-17T07:03:50.637
> 
> 标签：c#, file-io, download, directory

我有一个配置文件，其中包含我要下载的 URI 列表。例如，

```
 http://xyz.abc.com/Dir1/Dir3/sds.txt
  http://xyz.abc.com/Dir2/Dir4/jhjs.txt
  http://xyz.abc.com/Dir1/itr.txt 
```

我想读取配置文件并复制每个 URL，但同时创建与主机上相同的目录结构。例如，对于配置文件中的第一行，我想在我的本地机器上创建目录结构 Dir1/Dir3（如果它不存在），然后将 sds.exe 复制到 .../Dir1/Dir3/

我如何在 C# 中做到这一点？

到目前为止，我所拥有的是：

```
string myStringWebResource; //Read this from the config file
System.IO.StreamReader file =
new System.IO.StreamReader("config.txt");

// Read the config file line by line
while ((myStringWebResource = file.ReadLine()) != null)
{
    // Create a new WebClient instance.
    using (WebClient myWebClient = new WebClient())
    {
        //How do I keep the original filename, e.g. sds.txt
        string outputFilename = @"" + ???";

        Console.WriteLine("Downloading ...");
        // Download the Web resource and save it into
        // the current filesystem folder.
        try
        {
            myWebClient.DownloadFile(myStringWebResource, outputFilename);
            Console.WriteLine("Successful");
        }
        catch (WebException e)
        {
            Console.WriteLine("Fail" + e.Message);
        }
    }  
} 
```

虽然这让我可以下载配置文件中的所有文件，

1.  我有这个下载后必须命名的问题，我怎样才能保留它们的原始名称？
2.  所有文件都下载到同一个文件夹中。如何从主机复制文件夹结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:18:55.370

我的建议是我们将主机过滤掉。然后拆分 / 上的每个剩余字符串。然后构建一个以 string[] 作为参数的方法来创建目录结构。使用原始路径（没有主机）在该目录中移动带有文件名（数组中的最后一项）的文件。

如果主机是可变的，则删除第三个 / 之前的所有内容。

# javascript - LightSwitch HTML 客户端自动运行查询而不刷新整个页面

> ID：16053639
> 
> 赞同：1
> 
> 时间：2013-04-17T07:03:58.973
> 
> 标签：javascript, html, visual-studio-lightswitch

在 Lightswitch HTML 客户端中，我们创建了一个屏幕来显示特定业务流程正在进行的工作。

这将显示在大屏幕上，就像您去 Argos 取货时一样。这是屏幕截图...

![在此处输入图像描述](https://i.stack.imgur.com/H9FZx.png)

我们正在使用一些 java 脚本每 30 秒刷新一次页面。

```
setTimeout(function () {
    window.location.reload(1);
}, 30000); 
```

但是，这有两个问题。

1.  用户输入的“最大结果数”文本在刷新时丢失。
2.  刷新整个页面看起来不太好。

因此是否可以只触发每个查询而不是整个页面重新加载？

（数据由 WCF RIA 服务提供给 LightSwitch）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T07:53:21.923

在 JavaScript 中，使用`screen.MyList.load()`. 它将异步重新加载列表。

请注意，IntelliSense 并不总是建议`screen`对象上的列表名称，但如果您键入名称，它会识别它们。

结合`setTimeout()`方法和`created`屏幕事件，它应该可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-20T13:33:24.133

我有同样的问题，终于找到了解决方案。我在我创建的事件中添加了这个：

```
myapp.BrowseMembers.created = function (screen) {
    setInterval(function () {screen.Members.load(true);}, 1000);
}; 
```

ii 工作，只是屏幕在重新加载数据时闪烁。setTimeout 只会触发一次，但 setInterval 会每 1 秒触发一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-31T02:40:09.143

我在使用 LightSwitch VS2012 Update 3 时遇到了同样的问题，就我而言，只要失效就足够了，所以我总是可以使用新实体。此代码在入口屏幕上运行一次，每 30 秒使加载的实体无效，并在需要时强制重新获取。

```
myapp.aaHome.created = function (screen) {
    setInterval(function () { 
        screen.details.dataWorkspace.ApplicationData.Currencies._loadedEntities = {};
    }, 30000);
}; 
```

# python - Python：要协调的 numpy 形状

> ID：16053642
> 
> 赞同：0
> 
> 时间：2013-04-17T07:04:08.173
> 
> 标签：python, numpy, coordinates, tuples

我有一个 python 脚本，它可以将三角形的坐标调整到三角形的重心。这工作得很好，但是要生成一个可行的输出（我需要编写一个可以由其他软件 Abaqus 导入的文本文件）我想在文本文件中编写一个坐标列表。

但我不能让它正常工作。我想我首先需要从 numpy 数组创建一个列表或元组。但是，这不能正常工作。此列表中的每个坐标仍有一个数组。

我怎样才能解决这个问题？我目前拥有的脚本如下所示。

```
newcoords = [[0.0, 0.0], [1.0, 0.0], [0.0, 1.0], [0.0, 0.0], [1.0, 1.0], [0.0, 1.0]]
newelems = [[0, 1, 2], [3, 4, 5]]

import numpy as np

#define triangles
triangles = np.array([[newcoords[e] for e in newelem] for newelem in newelems])

#find centroid of each triangle
CM = np.mean(triangles,axis=1)

#find vector from each point in triangle pointing towards centroid
point_to_CM_vectors = CM[:,np.newaxis] - triangles

#calculate similar triangles 1% smaller
new_triangle = triangles + 0.01*point_to_CM_vectors

newcoord = []
newcoord.append(list(zip(*new_triangle)))
print 'newcoord =', newcoord

#generate output
fout = open('_PartInput3.inp','w')
print >> fout, '*Node-new_triangle'
for i,x in  enumerate(newcoord):
  print >> fout, i+1, ',', x[0], ',', x[1]
fout.close() 
```

输出文件“_PartInput3.inp”中的坐标列表应如下所示：

```
*Node-new_triangle
1, 0.00333333,  0.00333333
2, 0.99333333,  0.00333333
3, 0.00333333,  0.99333333
4, 0.00333333,  0.00666667
5, 0.99333333,  0.99666667
6, 0.00333333,  0.99666667 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:15:04.433

```
#generate output
fout = open('_PartInput3.inp','w')
fout.write('*Node-new_triangle\n')
s = new_triangle.shape
for i, x in enumerate(new_triangle.reshape(s[0]*s[1], 2)):
    fout.write("{}, {}, {}\n".format(i+1, x[0], x[1]))
fout.close() 
```

或更好

```
#generate output
with open('_PartInput3.inp','w') as fout:
    fout.write('*Node-new_triangle\n')
    s = new_triangle.shape
    for i, x in enumerate(new_triangle.reshape(s[0]*s[1], 2)):
        fout.write("{}, {}, {}\n".format(i+1, x[0], x[1])) 
```

# c++ - C++ 指针数组声明

> ID：16053643
> 
> 赞同：1
> 
> 时间：2013-04-17T07:04:15.677
> 
> 标签：c++, arrays, pointers

目前我有几个类，其数组定义为“float myIDs”。我想将变量移动到我的父类中并将其更改为指针（'float * myIDs'）。

目前我正在这样声明它的值：

```
float myIDs[] = {
    //Variables
}; 
```

由于它现在是一个指针，我认为它大致相同：

```
myIDs = new float[] = {
}; 
```

但这似乎不起作用。我不知道如何解决这个问题，因为我以前从来没有声明过这样的指针数组。

任何人都可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T07:11:11.660

请注意，您不是分配指针数组，而只是分配浮点数组，因此基本上您的两个数组将具有相同的类型，它们只是不会存储在相同的内存空间中。

只有静态分配的数组才能以这种方式初始化，动态分配的数组不能初始化为零以外的任何值。

```
myIDs = new float[](); 
```

但是如果您知道要放入数组的元素，则不需要动态分配它。

如果你想分配一个**指针数组**，你必须这样做：

```
float* myIDs[size]; // statically
float** myIDs = new float*[size]; // dynamically 
```

但是只有静态分配的一个（第一个）可以按照您描述的方式进行初始化，当然，它必须使用指针进行初始化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T07:37:40.833

If you want to declare array in a dynamic way, you can do it like this:

```
float *array = new float[size];
array[0] = first_value;
array[1] = second_value;
etc; 
```

Just remember to free memory when you no longer need it (e.g. in a class destructor)

```
delete [] array; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T07:10:49.223

如果您想要一个动态分配的数组，您应该使用以下格式（您所做的看起来更像是 C# 而不是 C++）

```
//The declaration of the object in the class
float *myIDs;

//The allocation it self (you must know which size you want to allocate at this point)
myIDs = new float[size];//bring change "size" to whatever you need is. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T07:11:22.280

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-16T16:41:40.773

The easiest way is:

```
float *myArray[size]; 
```

> Example

```
#include <iostream>
using namespace std;

float* findMax (float* myArray[], int size) {
    float max = 0;
    int index = 0;
    for (int i = 0; i < size; i++) {
        if ( *myArray[i] > max) {
            max = *myArray[i];
            index = i;
        }
    }

    return myArray[index];
}

int main()
{
    float a = 1.25; 
    float b = 2.47; 
    float c = 3.92; 
    float d = 4.67; 
    float e = 5.89; 
    float f = 6.01;

    float *myArray[6];
    int len = *(&myArray + 1) - myArray;

    myArray[0] = &a;
    myArray[1] = &b;
    myArray[2] = &c;
    myArray[3] = &d;
    myArray[4] = &e;
    myArray[5] = &f;

    cout << "Number of even values are : " << findMax(myArray, len) << endl;

    return 0;
} 
```

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2013-04-17T07:11:09.610

如果你想要一个指针数组浮动，你必须这样声明它。您只声明了一个浮点数组。数组的名称当然是一个指针，但在 C 语法中，它的处理方式相同，只是为了方便。

```
float *myIDs[] = {
  //Variables
};

myIDs = new *float[n] = {
}; 
```

或者，您可以使用

```
float **myIDs;
myIDs = new **float; 
```

并以与数组相同的方式访问它：

浮动 *x = myIDs[i];

# python - Python：如何编写一个使用多个参数循环遍历自身的函数？

> ID：16053648
> 
> 赞同：-1
> 
> 时间：2013-04-17T07:04:24.577
> 
> 标签：python, function, python-2.7

这个简单的循环工作得很好：

```
>>> def loop (i):
        i+=i
        if 0<i<20:
            print i
            loop(i)

>>> loop (1)
2
4
8
16 
```

但是这个不起作用，它意外退出循环：

```
>>> from functools import partial
>>> def loop (i):
        i+=i
        if 0<i<20:
            print i
            partial(loop,i)

>>> loop(1)
2
>>> 
```

有什么问题？有没有办法让它以某种方式工作？

那只是一个简单的功能......我**真正的问题**是：

问：如何编写一个能够循环自身的函数，每次只有几个参数？我应该看看其他地方（除了*部分*）吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T07:10:38.957

[`partial`](http://docs.python.org/2/library/functools.html#functools.partial)创建一个可调用的，所以..

```
def loop (i):
        i+=i
        if 0<i<20:
            print i
            partial(loop,i)() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:13:08.350

问题是您`i`在函数中递增。不要递增并`i`传入函数：-`i-1``loop`

```
>>> def loop(i):
...     if i>0 and i<20:
...             print i
...             loop(i-1) 
```

使用此方法，当您运行函数时，输出如下：-

```
>>> loop(1)
1
>>> loop(2)
2
1
>>> loop(3)
3
2
1
>>> loop(4)
4
3
2
1
>>> loop(20)
>>> loop(19)
19
18
17
16
15
14
13
12
11
10
9
8
7
6
5
4
3
2
1
>>> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T07:14:45.843

不确定您要实现的目标，但部分实际上并未运行该函数，仅构造并返回带有您给出“固定”参数的函数

您需要这样的东西才能获得与第一个示例相同的结果：

```
>>> from functools import partial
>>> def loop (i):
        i+=i
        if 0<i<20:
            print i
            partial(loop,i)() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T07:18:39.673

`partial`给你一个已经设置了一些参数的函数——它实际上还没有*调用*那个函数。您需要调用该`partial`对象来执行此操作：

```
>>> def foo(a, b):
        print(a, b)
>>> bar = partial(foo, 5)
>>> bar
functools.partial(<function foo at 0x01E1A348>, 5)
>>> bar()
Traceback (most recent call last):
  File "<pyshell#6>", line 1, in <module>
    bar()
TypeError: foo() takes exactly 2 arguments (1 given)
>>> bar(4)
5 4 
```

如您所见，`partial`这里将一个参数绑定到函数`foo`- 它接受一个函数和一些参数，并返回一个比原始参数*少得多的函数。*您可以通过立即调用部分来使其在您的情况下工作`partial(loop, i)()`，但这与调用完全相同`loop(i)`。这意味着您在这里使用的工具是错误的 -`partial`主要适用于您希望将可调用对象传递给另一个函数（或只是提前设置以便稍后在代码中使用）并设置一些（或全部）的情况它的参数是在您决定使用该函数时，而不是在最终调用它时。

# java - BlackBerry Android 播放器上奇怪的浮点输出“@.0E-12”

> ID：16053657
> 
> 赞同：3
> 
> 时间：2013-04-17T07:05:06.790
> 
> 标签：java, android, blackberry-playbook, blackberry-android

我有一个在许多 Android 设备上运行良好的应用程序，但在 PlayBook 上运行的 BlackBerry Android 播放器存在问题（它运行 Android 2.3）。

我在 PreferenceManager.getDefaultSharedPreferences() 上有一个 NumberFormatException。似乎在首选项文件中，一个浮点数被保存为“@.0E-12”。我做了这个简单的测试：

```
float f = 1.0e-12f;
System.out.println (f); // prints "@.0E-12" on BlackBerry PlayBook !! 
```

怎么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:17:12.163

它是一个非常小的数字（即 0.000000..01）。
如果这对您有任何意义，您可以尝试`BigDecimal`。
否则，您可以确定小于 x 的数字（您决定 x 有多小）为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:39:55.910

如果您的问题是*这怎么可能？*，我想你可以下载Android源码，在*libcore/luni/src/main/java/java/lang*中找到相关的源码，然后，从 Float.toString() 开始，逐个函数地导入你的项目，检查每一个该错误仍然可见的时间。您将找到错误，它可能与 FP 数学有关。（也许，就像尾数最低有效部分中的随机位一样。）

# c - 有条件的无堆

> ID：16053660
> 
> 赞同：1
> 
> 时间：2013-04-17T07:05:09.913
> 
> 标签：c, malloc, conditional, free

所以，我有这种情况。一个终止处理程序和一些指向先前分配在堆上的结构的指针。

我想要做的是使用处理程序有选择地释放它们：对于每个指针，如果对应的结构被分配，则必须是空闲的。我使用一些整数（1 个指针 -> 1 个整数）来控制每个指针状态（分配或释放）并确定处理程序是否必须释放。

这是代码

```
/*HEAP STATUS GLOBAL VARIABLES (1 => free required)*/
int free_addrinfo, free_up_rcvd, free_rc_rcvd, free_rc_rspn;

/*HEAP POINTERS*/
struct addrinfo *result;
USR_PSW *up_rcvd;
TBOOK_RECORD *rc_rcvd, *rc_rspn; 

void termination_handler(){
    close(sock_ds);
    close(acc_sock_ds);
    if(free_addrinfo) freeaddrinfo(result);
    if(free_up_rcvd) free(up_rcvd);
    if(free_rc_rcvd) free(rc_rcvd);
    if(free_rc_rspn) free(rc_rspn);
   _exit(EXIT_SUCCESS);
} 
```

有更聪明的解决方案吗？谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:15:10.900

我只是在初始化时将变量设置为 NULL，并在它们被释放时再次将它们重置为 NULL。当您已经拥有一个自然指针时，没有理由保留一个单独的指标来表明指针已初始化。

实际上，在现实中，我会尝试以一种毫无疑问何时需要释放指针的方式编写代码。但是当不可能时，NULL 检查就足够了。

# c# - 使用 Regex.Split() 查找 10 个数字和两个字母

> ID：16053664
> 
> 赞同：-1
> 
> 时间：2013-04-17T07:05:24.507
> 
> 标签：c#, regex

我有一个问题，我应该接收多个电子邮件地址，其数字长度为 10，并且本身有两个字母，例如`1234567891AB`.

为了顺利地做到这一点，我尝试使用我`Regex.Split()`，因为相同的信息有更多的通信，我想将它添加到数组中。

**输入：（来自 Outlook）**

```
"Here comes number on the consignment 1020289847AB." 
```

我正在尝试编写一个如下所示的脚本：

```
string[] BODY = Regex.Split(item.body, @"[^\d$]"); 
```

**当前出处：** `1020289847`

**我想要的输出：** `1020289847AB`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:16:55.503

如果你的数字后面只需要两个字符，听起来你只需要使用；

```
\d{10}\D{2} 
```

一些示例匹配；

```
3753391729¾~
9446154600Û\ 
```

让我们编码吧；

```
string s = "Here comes number on the consignment 1020289847AB.";
Regex regex = new Regex(@"\d{10}\D{2}");
Match match = regex.Match(s);

if (match.Success)
{
    Console.WriteLine(match.Value);
} 
```

输出是；

```
1020289847AB 
```

这是一个[`DEMO`](http://ideone.com/7NM0bA).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:09:18.057

然后你需要类似的东西：

```
@"\d{10}\D{2}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T07:09:25.807

试试下面的正则表达式。抓取 10 位数字，并允许 2 个字符小写或大写。

```
\d{10}[a-zA-Z]{2}

(\d{10})([a-zA-Z]{2}) - Added Groups for digits and letters 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T07:09:41.040

怎么样：

```
string[] BODY = Regex.Split(item.body, @"[^\d{10}[A-Z]{2}$]"); 
```

仅当正好有 10 位数字后跟两个大写字母时才会匹配。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T07:08:51.707

试试这个正则表达式

```
\d+([a-zA-Z]){2} 
```

如果您想专门针对前面的 10 位数字

```
\d{10}+([a-zA-Z]){2} 
```

# c# - C# 泛型包装器生成器

> ID：16053665
> 
> 赞同：1
> 
> 时间：2013-04-17T07:05:29.660
> 
> 标签：c#, .net, generics, reflection, code-generation

我正在寻找一个代码生成器（最好带有源代码），它允许我为我的代码中的泛型类生成包装类（使用反射）。

我做了一些搜索，但似乎找不到任何可以在这里做我需要的东西，所以我想在我开始写自己的之前先问这里。最终，我可能不得不自己写，但如果有人已经写过这样的东西，我至少想抢占先机。

解释我想要它做什么有点困难，但是生成器应该允许我指定我希望它为哪些泛型类生成包装器。它应该检查我指定的 DLL 中的类型，以确定哪些类型适合基于泛型类中的 where 约束。我在 linqpad 中编写了一些示例代码，并在“生成的代码”部分提供了示例输出。如您所见，它会根据泛型类中指定的约束生成所有类的组合。

我为什么要这样做？我有很多通用类，每个类都有许多类型参数（其中许多类型参数超过 10 个），我希望简化客户端代码（这还需要一些自定义工作以及一个代码生成器，该代码生成器会生成每个组合可能，但我可以处理）。完成之后，我可以将底层泛型类重构为更简单（不影响客户端代码），并且不需要像目前那样多的类型参数，这在现阶段并不完全可能。

```
void Main()
{
    var x = new GenBothFooAgainBarAgain();
    var y = new GenFFoo();
    var z = new GenFFooAgain();
    var a = new GenBothWithChildFooBarFooChild();
    var b = new GenBothWithChildFooBarAgainFooChild();
}

//////////////////////////////////Generated code ////////////////////////////////////
public class GenBothFooBar : GenBoth<Foo, Bar> {}
public class GenBothFooAgainBar : GenBoth<FooAgain, Bar> {}
public class GenBothFooBarAgain : GenBoth<Foo, BarAgain> {}
public class GenBothFooAgainBarAgain : GenBoth<FooAgain, BarAgain>{}
public class GenFFoo : GenF<Foo>{}
public class GenFFooAgain : GenF<FooAgain>{}

public class GenBothWithChildFooBarFooChild : GenBothWithChild<Foo, Bar, FooChild> {}
//public class GenBothWithChildFooAgainBarFooChild : GenBothWithChild<FooAgain, Bar, FooChild> {} - illegal - Don't generate this as FooChild doesn't inherit from FooAgain
public class GenBothWithChildFooBarAgainFooChild : GenBothWithChild<Foo, BarAgain, FooChild> {}
//public class GenBothWithChildFooAgainBarAgainFooChild : GenBothWithChild<FooAgain, BarAgain, FooChild>{} - illegal - Don't generate this as FooChild doesn't inherit from FooAgain

//////////////////////////////////Generated code ////////////////////////////////////

public class Foo : IFoo
{
    public string foo {get; set;}
}

public class FooChild : Foo, IFooChild
{
    public string fooChild {get; set;}
}

public class Bar : IBar
{
    public string bar {get; set;}
}

public class FooAgain : IFoo
{
    public string foo {get; set;}
}

public class BarAgain : IBar
{
    public string bar {get; set;}
}

public class GenF<F>
where F: class, IFoo, new()
{

}

public class GenBoth<F, B>
where F: class, IFoo, new()
where B: class, IBar, new()
{

}

public class GenBothWithChild<F, B, FChild>
where F: class, IFoo, new()
where B: class, IBar, new()
where FChild: class, F, IFooChild, new()
{

}

public interface IFooChild
{
    string fooChild {get; set;}
}

public interface IFoo
{
    string foo {get; set;}
}

public interface IBar
{
    string bar {get; set;}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:32:15.017

对于使用 c#/.net 知识生成代码，我建议您使用[T4](http://msdn.microsoft.com/en-us/library/vstudio/bb126445.aspx) - Visual Studio 免费提供的 Microsoft 文本模板引擎。感觉就像是 C# 和 ASP.NET 的混合体，因此您应该能够快速投入。

使用**设计时模板**，您可以指定现有的程序集并像往常一样反映它们，甚至可以使用[Visual Studio 自动化](http://msdn.microsoft.com/en-us/library/envdte%28v=vs.110%29.aspx)代码模型来获取有关当前解决方案中的类的信息并从中生成代码。在您构建项目之前，此代码将在 Visual Studio 中生成。

使用**运行时模板**，您将“准备”如何在设计时生成代码的逻辑，为其提供程序集列表以在运行时处理和生成代码。

不幸的是，Visual Studio 缺乏 T4 模板的编辑功能，但有可用的免费工具，例如[有形的 T4 编辑器](http://t4-editor.tangible-engineering.com/T4-Editor-Visual-T4-Editing.html)。

此代码片段可用于 T4 模板，并在 mscorlib.dll 中查找所有通用类并将它们写入输出文件：

```
<#
    foreach(System.Reflection.TypeInfo type in typeof(string).Assembly
                                                             .DefinedTypes
                                                             .Where(t => t.ContainsGenericParameters))
    {
#><#= type.Name #><<#= string.Join(", ", type.GenericTypeParameters.Select(tp => tp.Name)) #>>
<#  }
#> 
```

希望这可以帮助

# magento - 致命错误：在 Magento admin 的非对象上调用成员函数 toOptionArray()

> ID：16053666
> 
> 赞同：2
> 
> 时间：2013-04-17T07:05:33.387
> 
> 标签：magento, magento-1.7, multi-select, shipping

当我单击 Magento 系统->配置->销售选项卡下的运输方法选项卡时，我遇到以下错误：

> 致命错误：在第 463 行对 D:\xampp\htdocs\magento\app\code\core\Mage\Adminhtml\Block\System\Config\Form.php 中的非对象调用成员函数 toOptionArray()

最令人震惊的是，这是一个全新的 Magento 安装。谁能告诉我如何消除此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-27T08:41:44.163

添加到 config.xml

```
<global>
    <models>
        <stockindicator>
            <class>Namespace_ModuleName_Model</class>
        </stockindicator>
    </models>
</global> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-02T02:57:22.757

按照本教程解决问题 => [http://kb.magenting.com/content/20/49/en/magento-error-call-to-a-member-function-tooptionarray-on-a-non-object。 html](http://kb.magenting.com/content/20/49/en/magento-error-call-to-a-member-function-tooptionarray-on-a-non-object.html)

转到 Magento Connect Manager，单击检查升级。在 Actions 中，升级具有新版本的模块，然后重新安装这些模块：

*   Interface_Adminhtml_Default
*   Mage_All_Latest
*   Mage_Core_Adminhtml
*   Mage_Core_Modules

选中“成功安装或升级后清除所有会话”，然后单击“提交更改”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-21T14:51:07.277

我遇到了这个问题，现有的答案都没有帮助。经过反复试验，我发现我的问题是由于在 Windows 和 Linux 上运行之间存在**区分大小写的问题。**

我的`widget.xml`文件包含这一行：

```
<source_model>widget/modeoptions</source_model> 
```

我的模型类被声明为：

```
class My_Widget_Model_ModeOptions 
```

当部署在 Mirosoft Azure 中运行的 Magento 实例时，这按预期工作。当我将完全相同的代码部署到在 Linux 上运行的 Magento 实例时，我收到了错误消息。

```
Call to a member function toOptionArray() on a non-object in ../includes/src/Mage_Widget_Block_Adminhtml_Widget_Options.php 
```

更新`widget.xml`以匹配班级案例后，一切都在 Windows 和 Linux 服务器上按预期工作。

更新/固定线路：

```
<source_model>widget/ModeOptions</source_model> 
```

希望这可以帮助其他一些努力解决这个错误的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-05T09:01:45.193

根据 webshopapps 支持，您需要做的就是通过 system->tools->compilation 进行编译。我个人编译，刷新缓存，注销并再次登录。有效。

我之前尝试过更新模块方法，并且在它破坏了 magento 1.9.0.1 后不得不从备份中恢复

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-09T11:53:40.790

这应该可以解决错误：-

1.  **禁用编译**( `System -> Tools -> Compilation`)
2.  **刷新缓存**( `System -> Cache Management`)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-03-11T22:20:34.097

去`app\code\core\Mage\Adminhtml\Block\System\Config\Form.php`

在第 463 行找到以下内容

```
$optionArray = $sourceModel->toOptionArray($fieldType == ‘multiselect’); 
```

并将其替换为：

```
if(is_object($sourceModel)){
$optionArray = $sourceModel->toOptionArray($fieldType == ‘multiselect’);
} else {
Mage::log($e->source_model);
} 
```

# asp.net - 子域托管在另一台服务器上，但从域中的 iis 7 中的 Url Rewrite 调用它

> ID：16053670
> 
> 赞同：0
> 
> 时间：2013-04-17T07:05:48.933
> 
> 标签：asp.net, iis-7, url-rewriting

我有一个像 www.mywebsite.com 这样的门户网站，它有一个像预订这样的模块。url 中的当前流程是 www.mywebsite.com/booking/。这对于当前情况来说很好，但我们正在转向大流量，并希望将其划分为多个部分，并根据国家和地区明智地将预订模块托管到多个服务器。

现在我的问题是我们可以在主网站上重写网址，例如，

www.mywebsite.com/us-ny-booking/ 到 booking-us-ny.mywebsite.com（托管在不同的服务器上）。

这是否有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:20:23.797

您可能可以使用以下内容：

```
<rewrite>
    <rules>
        <rule name="My redirect" stopProcessing="true">
            <match url="^(abc|pqr)/?(.*)?$" />
            <conditions>
                <add input="{HTTP_HOST}" pattern="^(abc|pqr)\.mywebsite\.com$" negate="true" />
            </conditions>
            <action type="Redirect" url="http://{R:1}.mywebsite.com/{R:2}" />
        </rule>
    </rules>
</rewrite> 
```

它能做什么：

*   检查 url 是否以`abc`or开头`pqr`
*   确保主机尚未以`abc`or开头`pqr`
*   重定向到`abc.mywebsite.com/whatever`或`pqr.mywebsite.com/whatever`取决于原始请求

# jquery - 在 jQuery PieChart (HighCharts) 的扇区上添加文本

> ID：16053671
> 
> 赞同：0
> 
> 时间：2013-04-17T07:05:49.613
> 
> 标签：jquery, highcharts

根据我的要求，我需要在我的 jQuery 饼图（HighCharts）的扇区上添加百分比（扇区大小），如下所示

![在此处输入图像描述](https://i.stack.imgur.com/3AicZ.png)

但是我的饼图是这样的，它的扇区没有任何文字

![在此处输入图像描述](https://i.stack.imgur.com/HUSC9.png)

我在我的 .js 文件中尝试了许多属性来在我的饼图扇区上显示文本，但没有运气。

这是我的 .js 文件

```
$(function () {
var chart;

$(document).ready(function () {

    // Build the chart
    $('#container').highcharts({
        chart: {
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false
        },
        title: {
            text: 'Browser market shares at a specific website, 2010'
        },
        tooltip: {
            pointFormat: '{series.name}: <b>{point.percentage}%</b>',
            percentageDecimals: 1
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: false
                },
                showInLegend: true
            }
        },
        series: [{
            type: 'pie',
            name: 'Browser share',
            data: [
                ['Firefox',   45.0],
                ['IE',       26.8],
                {
                    name: 'Chrome',
                    y: 12.8,
                    sliced: true,
                    selected: true
                },
                ['Safari',    8.5],
                ['Opera',     6.2],
                ['Others',   0.7]
            ]
        }]
    });
}); 
```

});

此图表正在呈现到显示的 div

```
<div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div> 
```

有人可以建议我一段代码，我可以将其添加到我的 .js 文件中，以便在其扇区上显示文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:04:36.053

文本应该添加 insie 切片？如果是，您可以使用带有格式化程序的数据标签[http://api.highcharts.com/highstock#plotOptions.series.dataLabels.formatter](http://api.highcharts.com/highstock#plotOptions.series.dataLabels.formatter)

编辑：您可以使用带负值的距离参数[http://api.highcharts.com/highcharts#plotOptions.pie.dataLabels.distance](http://api.highcharts.com/highcharts#plotOptions.pie.dataLabels.distance)

# vb.net - vb.net 注册热键“大写锁定”

> ID：16053672
> 
> 赞同：0
> 
> 时间：2013-04-17T07:05:58.933
> 
> 标签：vb.net, registerhotkey

是否可以将“CapsLock”注册为热键而不是注册 2keys？我不想使用 ctrl+key、alt+key。我想切换“CapsLock”来开始/中断我的循环。就像我打开大写锁定一样，循环将运行等等。我解决了这个问题，制作了一个计时器并检查大写锁定的键状态是打开还是关闭。但我不喜欢它，因为我的应用程序在每次计时器滴答声时切换大写锁定时一直显示我发出的通知气球消息。所以我希望有人可以帮助我。

我使用这个代码来注册我的一些热键，这可以编辑“CapsLock”吗？

```
RegisterHotKey(Me.Handle, 1, MOD_CTRL, Keys.Oem3) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T01:19:15.170

为什么不在表单上运行 keyup 事件的代码。使用 if 语句查看是否按下了 capslock 键，如果按下则运行循环。每次按下大写锁定键时都会更改一个布尔值，以告知循环何时退出。

```
If e.KeyData = Keys.CapsLock Then
    boolvalue = Not boolvalue
        While boolvalue
            ' Do your thing.
        End While
End If 
```

# linux - grep "str" 和有什么区别。和 grep "str" *

> ID：16053673
> 
> 赞同：-1
> 
> 时间：2013-04-17T07:05:59.807
> 
> 标签：linux, command-line, grep

在`grep "str" *`
这是否意味着 grep`grep`执行的所有内容？
哪个 `grep -r "str" .`比前一个有更多的结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:12:33.660

当您运行`grep str *`时，shell 将扩展`*`以匹配当前目录中的所有文件名，除非它们以点开头，然后将该文件列表传递给`grep`命令。

当你运行`grep -r str .`时，shell 没有什么可以扩展的。`grep`然而，该命令`-r`通过遍历其参数列表并*递归地下*降到所有目录来对该选项做出反应。

因此，至少存在三个不同点：

*   `grep -r`会找到隐藏文件
*   `grep -r`将通过子目录
*   `grep -r`也适用于包含大量文件的目录。在这种情况下，您可能会收到一条错误消息，指出命令行变得太长`grep str *`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:09:38.817

```
grep 
```

将搜索一个模式，最后一个参数是要搜索的文件，所以：

```
grep str * 
```

将在当前目录（与 * 作为通配符匹配）中搜索模式“str”的所有文件。

```
grep -r str . 
```

将递归地搜索（所以在目录内等）从当前目录开始的模式 str （单点是当前目录，两个点是前一个目录）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T07:10:36.700

```
grep  "str" * # search a string str in all files in current directly but not sub directories 
grep -r "str" . # search a string str recursively in cireent directory and in all sub directories in all file whose file name has a single character 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-01T13:58:18.377

bash 总是扩展 * ？[...] .. 如果你没有设置 noglob

当你使用“。” , grep 将从当前目录搜索，但是当您使用上述符号之一时，bash 会扩展您的命令，然后调用 grep

# asp.net - 分配页面用户属性的名称属性

> ID：16053674
> 
> 赞同：1
> 
> 时间：2013-04-17T07:06:04.107
> 
> 标签：asp.net, anonymous, loginview

我是 asp.net 的新手，这是一个理论问题，但有人可以详细说明以下内容：-

**[msdn]**

**AnonymousTemplate**属性指定在网站用户未登录网站时向其显示的内容模板。此模板在**Page User属性的****Name**属性为空时显示。

 **我想知道 name 属性是如何分配的，以及为实现它而运行的所有后台任务。我没有获得足够的信息并查看了[如何在 ASP.NET 中设置 Page.User 属性？](https://stackoverflow.com/questions/6407689/how-can-i-set-the-page-user-property-in-asp-net)

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:18:37.730

据我所知，更改`Name`属性值的方法是以用户身份进行身份验证。

简单点：`AnonymousTemplate`将在用户尚未登录时显示。**

# go - 如何用 Go 语言覆盖嵌套包中的变量？

> ID：16053678
> 
> 赞同：1
> 
> 时间：2013-04-17T07:06:15.747
> 
> 标签：go

如何覆盖 go from package 中的变量？

例如：

**文件1.go**

```
package A

import "A/B"

var Arg1 = "Hello" 
```

**文件2.go**

```
package A/B

var Arg1 = "World" 
```

如果 file2.go 中存在 arg1，我如何覆盖 file1.go 中的 arg1？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T07:37:39.317

在这种情况下，我不确定您所说的“覆盖”是什么意思。（也让我假设 file1.go 是“包 a”，而 file2.go 是“包 b”）

如果您的意思是访问`Arg1`，在包“a”内/从包“b”中定义，那么例如：

```
// In package "a"
x = Arg1    // references a.Arg1
y = b.Arg1  // references b.Arg1 
```

但是，这里没有发生任何类似覆盖的事情。在包“a”中，a`Arg1`和 b`Arg1`都可以作为不同的实体访问；后者通过强制限定符“b”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:13:02.957

你不能。包是独立的。如果包 A 不导出 arg1（小写），则对于其他包 B，它是不可见的——因此不可设置。

顺便说一句：“包 A/B”对我来说看起来很奇怪。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T11:53:45.373

您是否正在尝试做这样的事情，例如，特定位置（美国）（如果存在）会覆盖一般位置（世界）？

```
// file A/B.go

package B

var location = "USA"

func Location() string {
    return location
}

// file A.go

package A

import "A/B"

var location = "World"

func Location() string {
    loc := B.Location()
    if len(loc) == 0 {
        loc = location
    }
    return loc
}

// file main.go

package main

import (
    "A"
    "fmt"
)

func main() {
    fmt.Println("Hello,", A.Location())
} 
```

输出：

```
Hello, USA 
```

如果没有，请提供一个更好、更具体的示例来说明您正在尝试做的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-01T13:00:34.993

您可能可以使用构建标志来做到这一点：

```
go build -ldflags="-X 'package_path.variable_name=new_value'" 
```

有几件事需要注意：

*为了使用 ldflags，您要更改的值**必须存在并且是****string 类型**的包级变量。这个变量可以**是exported 也可以是unexported**。该值**不能是 const**或由函数调用的结果设置其值*

您将在DO 团队的[这篇出色文章中找到所需的所有信息](https://www.digitalocean.com/community/tutorials/using-ldflags-to-set-version-information-for-go-applications)

# django - Django模型没有得到最近插入的mysql值

> ID：16053686
> 
> 赞同：1
> 
> 时间：2013-04-17T07:06:37.057
> 
> 标签：django, apache, django-models, python-2.7

我在 apache 中运行一个 django 项目。我正在将表单字段值插入到表中。

```
 from blog.models import Blog
    b = Blog(name='Beatles Blog', tagline='All the latest Beatles news.') 
```

但是当通过 django orm 获取插入的值时，我得到了错误。

```
 entry = Blog.objects.get(name='Beatles Blog') 
```

当重新启动 apache 获取插入的值。

这是 apache 缓存问题还是 django 缓存问题？如何在不重新启动 apache 的情况下获取最近插入的值？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:09:39.913

你保存模型了吗？

```
b.save() 
```

# xcode - 使用 google protocolBuffers 在 xcode 中有一些错误

> ID：16053695
> 
> 赞同：0
> 
> 时间：2013-04-17T07:06:52.763
> 
> 标签：xcode, ios6, protocol-buffers

在我的作品中构建它时有一些错误：

> 架构 i386 的未定义符号：`
> 
> > “computeDataSize(int, NSData*)”，引用自：`
> > 
> > - [OuterMessage serializedSize] 在 Polo.pb.o 中
> > 
> > *   Polo.pb.o 中的 [Secret serializedSize]
> > 
> > > -Polo.pb.o 中的[SecretAck serializedSize]`
> 
> `"computeEnumSize(int, int)", referenced from:`
> 
> `-[OuterMessage serializedSize] in Polo.pb.o`
> 
> > - [选项 serializedSize] 在 Polo.pb.o`
> > 
> > > > - [Options_Encoding serializedSize] 在 Polo.pb.o`
> 
> `-[Configuration serializedSize] in Polo.pb.o`
> 
> `-[KeyEvent serializedSize] in Remote.pb.o`
> 
> `-[FlingResult serializedSize] in Remote.pb.o`
> 
> `"computeInt32Size(int, int)", referenced from:`
> 
> `-[MouseEvent serializedSize] in Remote.pb.o`
> 
> `-[MouseWheel serializedSize] in Remote.pb.o`
> 
> `-[Connect serializedSize] in Remote.pb.o`
> 
> `"computeStringSize(int, NSString*)", referenced from:`
> 
> `-[PairingRequest serializedSize] in Polo.pb.o`
> 
> `-[PairingRequestAck serializedSize] in Polo.pb.o`
> 
> `-[Connect serializedSize] in Remote.pb.o`
> 
> `-[Fling serializedSize] in Remote.pb.o`
> 
> `-[Data serializedSize] in Remote.pb.o`
> 
> `"computeUInt32Size(int, int)", referenced from:`
> 
> `-[OuterMessage serializedSize] in Polo.pb.o`
> 
> `-[Options_Encoding serializedSize] in Polo.pb.o`
> 
> `-[RemoteMessage serializedSize] in Remote.pb.o`
> 
> `"computeMessageSize(int, objc_object*)", referenced from:`
> 
> `-[Options serializedSize] in Polo.pb.o`
> 
> `-[Configuration serializedSize] in Polo.pb.o`
> 
> `-[RemoteMessage serializedSize] in Remote.pb.o`
> 
> `-[RequestMessage serializedSize] in Remote.pb.o`
> 
> `-[ResponseMessage serializedSize] in Remote.pb.o`
> 
> `"google::protobuf::io::CodedOutputStream::VarintSize32Fallback(unsigned int)", referenced from:`

`google::protobuf::io::CodedOutputStream::VarintSize32(unsigned int) in CommandSender.o`

> `"google::protobuf::io::CodedOutputStream::WriteVarint32FallbackToArray(unsigned int, unsigned char*)", referenced from:`
> 
> `google::protobuf::io::CodedOutputStream::WriteVarint32ToArray(unsigned int, unsigned char*) in CommandSender.o`
> 
> `ld: symbol(s) not found for architecture i386`
> 
> `clang: error: linker command failed with exit code 1 (use -v to see invocation)`
> 
> 我`Remote.pb.h`用 Object-C 制作和“Remote.pb.m”构建它。
> 关于 Xcode 4.6.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:41:52.930

> 架构 i386 的未定义符号：

尝试在实际设备 - iphone/ipad 上运行代码。我早些时候在模拟器上遇到过类似的问题，但它在实际设备上工作

# ruby-on-rails - 如何将 Grunt 与 Rails 资产管道集成

> ID：16053700
> 
> 赞同：4
> 
> 时间：2013-04-17T07:07:08.863
> 
> 标签：ruby-on-rails, testing, automated-tests, asset-pipeline, gruntjs

问题是：如何将 Rails 与 Grunt 集成？

只是一个快速的头脑风暴，我发现我**需要**：

*   幻影JS
*   茉莉花
*   JSHint / JSLint

我**不需要**或者我不知道我是否需要（取决于 Rails）:)

*   缩小
*   丑化（混淆）
*   级联

如何将它与现有的 Rails 应用程序集成？我应该采取哪些步骤才能使其发挥作用？Grunt 文件/配置应该放在哪里？最后一个问题：它会干扰 Rails 资产吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:12:20.773

考虑：

[https://github.com/bradphelan/jasminerice](https://github.com/bradphelan/jasminerice) + [https://github.com/netzpirat/guard-jasmine](https://github.com/netzpirat/guard-jasmine)

或者

[https://github.com/modeset/teabag](https://github.com/modeset/teabag)

两者都很好地与资产管道和咖啡脚本集成。

# selenium - Selenium IDE 验证“pattern1”或“pattern2”

> ID：16053702
> 
> 赞同：0
> 
> 时间：2013-04-17T07:07:14.283
> 
> 标签：selenium, ide, assert, verify

你好 Selenium IDE 朋友们，

如果某个值与模式1 或模式2 匹配，则必须通过 Selenium IDE 进行测试。在 PHP 中，我会写：

```
if($value1 == $pattern1 or $value1 == $pattern2)
{
echo "match";
} 
```

有谁知道，如何在 Selenium IDE 中这样做：

![在此处输入图像描述](https://i.stack.imgur.com/uMzkw.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:48:10.263

您可以使用以下正则表达式模式：

```
regexp:(${pattern1}|${pattern2}) 
```

硒源：

```
<tr>
    <td>verifyTextPresent</td>
    <td>regexp:(${pattern1}|${pattern2})</td>
    <td></td>
</tr> 
```

# ruby-on-rails - 来自关联模型的平均多个属性

> ID：16053706
> 
> 赞同：1
> 
> 时间：2013-04-17T07:07:24.767
> 
> 标签：ruby-on-rails

我这里有一些代码味道：

```
f.series(:name=>'Average review', :data=> [
            Integer(@review.style.reviews.average(:answer01).to_f*20),
            Integer(@review.style.reviews.average(:answer02).to_f*20),
            Integer(@review.style.reviews.average(:answer03).to_f*20),
            Integer(@review.style.reviews.average(:answer04).to_f*20),
            Integer(@review.style.reviews.average(:answer05).to_f*20),
            Integer(@review.style.reviews.average(:answer06).to_f*20),
            Integer(@review.style.reviews.average(:answer07).to_f*20),
            Integer(@review.style.reviews.average(:answer08).to_f*20),
            Integer(@review.style.reviews.average(:answer09).to_f*20),
            Integer(@review.style.reviews.average(:answer10).to_f*20),
            ] 
```

谁能建议在单个数据库查询中处理此问题的最佳方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T03:31:15.957

好的，这不是那么简洁，但是：

```
@s_avgs=Style.joins(:reviews).select(
     'avg(answer01) AS avg1,
      avg(answer02) AS avg2,
      avg(answer03) AS avg3,
      avg(answer04) AS avg4,
      avg(answer05) AS avg5,
      avg(answer06) AS avg6,
      avg(answer07) AS avg7,
      avg(answer08) AS avg8,
      avg(answer09) AS avg9,
      avg(answer10) AS avg10'
      ).where(:id=>@review.style.id).first 
```

...

```
f.series(:name=>'Average review for this style', :data=> [
        Integer(@s_avgs.avg1.to_f*20),
        Integer(@s_avgs.avg2.to_f*20),
        Integer(@s_avgs.avg3.to_f*20),
        Integer(@s_avgs.avg4.to_f*20),
        Integer(@s_avgs.avg5.to_f*20),
        Integer(@s_avgs.avg6.to_f*20),
        Integer(@s_avgs.avg7.to_f*20),
        Integer(@s_avgs.avg8.to_f*20),
        Integer(@s_avgs.avg9.to_f*20),
        Integer(@s_avgs.avg10.to_f*20),
        ] ) 
```

如果其他人有更好的选择，请告诉我！

# xcode - 由于没有证书与证书 ID 匹配，因此无法在 Ad Hoc 配置文件过期之前对其进行续订

> ID：16053710
> 
> 赞同：13
> 
> 时间：2013-04-17T07:07:41.893
> 
> 标签：xcode, provisioning, ad-hoc-distribution

我的 Ad Hoc 个人资料将在 14 天后到期。组织者中有一个我的临时个人资料的“更新”按钮，但是当我点击它时，我得到......

> 此团队中没有与提供的证书 ID 匹配的当前证书。

供应门户中的配置文件显示为活动状态，将于 30 日到期。我还看到了具有相同到期日期的分发证书。我必须假设该证书是用于签署配置文件的证书。有没有办法在不撤销和创建新的临时配置文件和证书的情况下解决这个问题？

如果我必须重新开始，在不弄乱我的测试人员的情况下，最好的方法是什么。

关于这个主题有很多帖子和答案，但我找不到任何解决这个特定问题的证书与配置文件的证书 ID 不匹配。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-17T16:01:43.757

Ad-Hoc Provisioning Profiles 由三个主要元素组成：

*   正好 1 个 AppID
*   您的分发证书的公钥
*   一个或多个已注册的测试设备 ID

当您第一次生成此配置文件时（大约一年前，如果您当前的配置文件即将到期！），您指示它在构建该配置文件时使用您当时当前的分发证书 - 生成的临时配置文件的到期日期设置为匹配分发证书的到期，因为您无法启动使用过期证书签名的应用程序（旁白：这不一定适用于越狱场景......）

您的主要问题是“可以在不撤销的情况下修复它吗？” 是一个可靠的“否”——即使您可以进行调整，即将到期的分发证书也会导致新重新发布的 Ad-Hoc Profile 的过期时间与分发证书的过期时间相匹配。当您的证书和配置文件都过期时，您将在 14 天后回到同样的情况。不幸的是，那时您还会遇到一个新问题，您向测试人员提供的任何现有构建都将不再启动，因为签名证书和配置文件将失效。

相反，最后两周是您积极主动的机会，让您的用户迁移到具有新证书和配置文件的新版本。对于我自己的测试人员，我将当前分发证书的最后几周视为迁移窗口，以切换构建并让我的测试人员下载并安装最新的测试构建，以便他们可以继续进行测试。好消息是你发现你的证书过期了，有足够的时间让事情理顺并让你的测试人员迁移——有些人就没那么幸运了，在事情过期后不得不追赶，让测试人员大喊你的应用程序崩溃/不再启动...对于任何开发人员来说绝对是一个不受欢迎的结果，

**那我该怎么办？**

在高层次上，进行迁移与第一次设置此 Ad-Hoc 配置文件几乎相同——它只需要从您的 Keychain 和 Provisioning Profiles 中清理旧数据，并发送一些测试人员电子邮件鼓励您的团队一旦您为他们提供了新版本，请升级。在高层次上，这个过程看起来像这样：

1.  撤销您现有的分发证书并重新颁发新的分发证书。
2.  从您的钥匙串中删除现有的分发证书并安装新的。
3.  更新并安装现在“无效”的 Ad-Hoc 配置文件以使用您新创建的分发证书
4.  如有必要，更新 Code Sign 构建设置。
5.  构建您的 Ad-Hoc 构建并将其发布给您的测试人员。

*等等——撤销我现有的证书不会扰乱我的测试人员吗？*

不，一点也不！您现有的 Ad-Hoc 构建将继续完美运行，直到到期日期之后，因为它们拥有在您已经发送的 Ad-Hoc 构建中验证代码签名所需的所有信息。但是，一旦证书过期，事情将无法启动，并且您将拥有尖叫的测试人员。

我将假设您使用的是个人帐户，因此证书将以“iPhone Developer: FirstName LastName”和“iPhone Distribution: FirstName LastName”的格式显示。如果您使用的是公司帐户，则格式会略有不同。我还将假设您只有一个帐户；如果您注册了多个开发者帐户，请在从 Keychain 搜索和删除现有证书和配置文件时格外小心，因为可能有多个类似条目。

首先，退出 Xcode，然后前往 developer.apple.com/ios 登录“证书、标识符和配置文件”区域。这以前称为“供应中心”。

**撤销和补发分销证书**

1.  导航到分发证书区域。
2.  找到您即将到期的分发证书并将其吊销。您可能会遇到一条消息，通知您吊销此证书将使任何链接的配置文件无效——这是完全可以预料的。事实上，这正是我们希望它做的，这样您就可以得到更新！
3.  单击右上角的“添加”按钮并逐步完成制作新的“App Store and Ad Hoc”分发证书的步骤。将文件下载到您的机器上，但暂时不要安装它——我们应该首先从您的开发机器中清理旧证书。

**删除已吊销的证书并安装新证书**

1.  打开钥匙串访问并搜索“iPhone 分发”。
2.  删除任何与“iPhone Distribution”匹配的蓝色证书。证书图标还可能显示一个红色的“X”，表示它已过期或已撤销。这些可以清理，也可以不再使用。
3.  双击新下载的证书并安装。

**编辑临时配置文件**

1.  导航到 Distribution Provisioning Profiles 部分并找到您的 Ad-Hoc Profile。
2.  如有必要，编辑该配置文件以更新测试设备列表。
3.  单击生成并下载新创建的供应配置文件。如果 Generate 按钮被禁用，请检查 Provisioning Profile 的名称中是否没有特殊字符，并且您至少选择了一个测试设备。
4.  将新下载的配置文件拖放到 Xcode 上。任何旧版本的配置文件都可以从 Organizer 中删除。

此时，您应该重新开始工作并准备好在必要时更新代码签名设置（也就是说，如果您将它们设置为匹配特定配置文件而不是使用自动配置文件选择器选项，您需要更新该设置以指向您的配置文件的当前版本）。

同样，您很幸运，您正在采取措施解决此问题，而您的测试人员仍然能够使用您的应用程序，而不必急于完成这项工作。花点时间，确保清理旧的证书和过期的配置文件，以便 Xcode 更容易确定您希望它使用最新的配置文件。

# php - 如何将 FLV 视频剪切成几个小块？

> ID：16053711
> 
> 赞同：0
> 
> 时间：2013-04-17T07:07:43.207
> 
> 标签：php, video, ffmpeg, video-processing

我正在尝试通过 PHP 使用 FFmpeg 将 FLV 视频剪切成几个小的 FLV 视频。

小视频可能具有相同的长度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:11:20.840

使用 ffmpeg 命令

并使用执行它

```
exec 
```

php中的函数

供参考检查此[链接](https://stackoverflow.com/questions/3139248/to-cut-flv-video-using-php)

# c++ - 有效地复制/乘法树

> ID：16053717
> 
> 赞同：3
> 
> 时间：2013-04-17T07:08:10.603
> 
> 标签：c++, performance, algorithm, data-structures, tree-structure

我需要（对于 g++）一个（计算时间）优化的算法树结构来复制/乘一棵树。

我的树将是一棵 k-ary 树，但不一定是填充的。主要操作是将现有树相乘（最多 k 次）并将树作为子树添加到新节点。然后叶节点级别将被擦除以保持固定级别规则。

**有人知道提供此功能的数据结构吗？**

乘法的一个例子：假设我们有一个二叉树

```
 A
      |
     / \
    /   \
   B     C
   |    / \
   |   /   \
   D   E    F 
```

我们想添加一个新节点/乘以

```
 R
   / \
  /   \
 ..   .. 
```

所以结果看起来像

```
 R
           / \
          /   \
         /     \
        /       \
       /         \
      A           A
      |           |            
     / \         / \        
    /   \       /   \        
   B     C      B     C        
   |    / \     |    / \        
   |   /   \    |   /   \    
   D   E    F   D   E    F 
```

我试图将它组织在一个类似于堆的结构中的 std::vector 上，但是乘以树仍然有点慢，因为我必须自己复制每个树级别，而不是一次复制整个树。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T10:59:33.760

当你添加 R 时，给它 2 个指向 A 的指针是微不足道的，而不是从 A 开始复制整个子树。

```
 R
  / \
  | |
  \ /
   A
   |           
  / \
 /   \
B     C
|    / \
|   /   \
D   E    F 
```

这既非常快又很容易编码。

现在，如果您稍后想要更新树的一侧，而不是另一侧，那么问题就来了。例如，也许您想将“正确的”F 更改为 G。此时您可以仅在某些节点[上使用写时复制](http://en.wikipedia.org/wiki/Copy-on-write)策略，在这种情况下会导致

```
 R
     / \
    /   \
   A    A <-- copied, left side points to B
   |   / \        
  / \  *  \  
 /   \     \
B     C     C <-- copied, left side points to E
|    / \   / \
|   /   \  *  \
D   E    F     G 
```

基本上，您只需要将路径从更改点 (F/G) 复制到根节点（最容易实现）或复制到共享的最高节点（本例中为 A）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:14:08.680

也许看看 T9 字典的 Android 代码。AFAIR 它看起来很平坦，但基本上他们所做的是构建一个字母树，这样从上到下遍历树就可以生成单词。而且我认为他们使用相对偏移量从一个节点跳转到下一个节点（如链表）。

因此，您应该能够一次复制整个树。

我不记得你的确切布局，我认为它并没有像我在这里做的那样做丑陋的填充，但是继续你的例子，它看起来像这样（！）：

```
# your tree

         __________
      ///   _      \      _
     /// /// \      \  /// \
A007021B007000D000000C007014E000000F000000
  \\\_/                   \\\_____/

# copying it, "under" R:
                __________                                __________
     _       ///   _      \      _                     ///   _      \      _
  /// \     /// /// \      \  /// \                   /// /// \      \  /// \
R007049A007021B007000D000000C007014E000000F000000A007021B007000D000000C007014E000000F000000
     \\\ \\\_/                   \\\_____/      /  \\\_/                   \\\_____/
      \\\______________________________________/ 
```

# c - “算术表达式”是否允许在 C 中用逗号分隔，或者我们需要为每个单独的语句？

> ID：16053721
> 
> 赞同：3
> 
> 时间：2013-04-17T07:08:27.973
> 
> 标签：c, comma

在 C 中，是以下语句

```
a+=3,b=c*2,d=a+b; 
```

相当于以下语句块：

```
a+=3;
b=c*2;
d=a+b; 
```

我相信你明白我的意思。我们可以在 C 中的同一语句中安全地使用多个用逗号分隔的数学表达式吗？在什么情况下这会造成问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T07:30:02.137

如果您像这样考虑呈现的逗号表达式列表，可能会更容易：

```
((a += 3, b = c * 2), d = a + b) 
```

首先评估最里面的逗号表达式：

```
a += 3, b = c * 2 
```

该表达式将分两步进行评估：

```
a += 3
b = c * 2 
```

的结果`a += 3`会被编译器扔掉，*但赋值还是会发生*，只是返回的结果被扔掉了。第一个逗号表达式的结果是`b`(which will be `c * 2`(whatever that is))。

然后第一个逗号表达式的结果位于下一个逗号表达式的左侧：

```
b = c * 2, d = a + b 
```

然后将其排序为

```
b = c * 2
d = a + b 
```

表达式的结果`b = c * 2`被丢弃（但由于它仍在评估，赋值仍然发生），完整表达式的结果是`d`（即`a + b`）。

整个表达式的结果将是`d`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:09:57.900

他们是一样的。

在 C 中，逗号运算符计算其左侧，忽略返回值（例如 x = y 的返回是新值），计算右侧并返回其结果（如果有）。逗号运算符的使用是评估和获取左侧内容的副作用，而不使用（例如丢弃）其值。

# php - 交易错误后，数据也得到保存

> ID：16053722
> 
> 赞同：1
> 
> 时间：2013-04-17T07:08:29.700
> 
> 标签：php, mysql, codeigniter

我正在使用codeigniter，我正在使用类似的代码

```
$this->db->trans_start(); 
some 5 mysql inserts and 
$this->db->trans_complete(); 
```

我`DB Transaction Failure`在第 5 次查询时遇到错误，即一些重复输入错误。但是我的所有第 1 4 个查询仍然被执行。不应该回滚吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:16:31.197

用于`"Strict Mode"`您的交易。如果其中一个查询失败，if 将自动回滚其他查询。点击[这里](http://ellislab.com/codeigniter/user-guide/database/transactions.html)查看详细信息。希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:37:46.813

您可以按如下方式手动运行事务：

```
$this->db->trans_begin();

$this->db->query('AN SQL QUERY...');
$this->db->query('ANOTHER QUERY...');
$this->db->query('AND YET ANOTHER QUERY...');

if ($this->db->trans_status() === FALSE)
{
    $this->db->trans_rollback();
}
else
{
    $this->db->trans_commit();
} 
```

# asp.net-web-api - 在 Asp.net Web Api 授权过滤器上，如何访问参数？

> ID：16053732
> 
> 赞同：13
> 
> 时间：2013-04-17T07:09:13.647
> 
> 标签：asp.net-web-api, authorization

我从 Asp.Net Web API 开始，这是我的问题：

我实现了一个自定义授权过滤器来检查我的消息头以查找 API 密钥。基于此 API 密钥，我检索了我的用户，然后我想看看他是否可以访问某些资源。我要检查的资源 ID 在 HTTP 请求的参数上。但是当我使用 AuthorizationFilter 方法时，操作参数列表是空的。

我怎样才能做到这一点 ？

如果我使用 ActionFilter 代替授权过滤器，我如何确定这将是第一个执行的过滤器？在全球范围内，如何指定过滤器的执行顺序？

最后一个问题，是否可以在“管道上”添加一些我可以在任何过滤器上检索的数据？类似于会话存储但仅限于请求的东西？

感谢您的任何回复

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-17T08:12:55.770

授权属性在参数绑定运行之前运行，因此您不能（如您所见）使用该`ActionArguments`集合。相反，您需要将请求 uri 用于查询参数，并将路由数据用于 uri 参数，如下所示。

```
//request at http://localhost/api/foo/id?MyValue=1
public class MyAuthorizationAttribute : AuthorizeAttribute
{
    protected override bool IsAuthorized(HttpActionContext actionContext)
    {
        //will not work as parameter binding has not yet run
        object value;
        actionContext.ActionArguments.TryGetValue("id", out value);

        //Will get you the resource id assuming a default route like /api/foo/{id} 
        var routeData = actionContext.Request.GetRouteData();
        var myId = routeData.Values["id"] as string;

        //uri is still accessible so use this to get query params
        var queryString = HttpUtility.ParseQueryString(actionContext.Request.RequestUri.Query);
        var myQueryParam = queryString["MyValue"];

        //and so on
    }
} 
```

**关于执行顺序**：

有 3 种不同的方法可以使用[FilterScope 枚举](http://msdn.microsoft.com/en-us/library/system.web.http.filters.filterscope%28v=vs.108%29.aspx)指定过滤器的执行顺序...范围是 Global、Controller 和 Action。是“全球性的`AuthoriseAttribute`”，因此它

> 在 Controller 之前指定一个动作。

如果您需要在这 3 个范围内指定执行顺序，那么您应该在此处阅读[这篇博客文章](http://www.strathweb.com/2012/06/control-the-execution-order-of-your-filters-in-asp-net-web-api/)，您需要在其中实现一个`FilterProvider`

**向管道添加一些数据**：

对请求使用属性集合，此集合在请求期间可用。

```
 protected override bool IsAuthorized(HttpActionContext actionContext)
    {
        actionContext.Request.Properties.Add("__MYKEY__","MyValue");

        //access this later in the controller or other action filters using
        var value = actionContext.Request.Properties["__MYKEY__"];

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-17T15:49:11.573

获取参数的另一种方法是`Execute`绑定参数。

```
try
{
    var binding = actionContext.ActionDescriptor.ActionBinding;
    var parameters = binding.ParameterBindings.OfType<ModelBinderParameterBinding>();
    var newBinding = new HttpActionBinding(actionContext.ActionDescriptor, parameters.ToArray());
    newBinding.ExecuteBindingAsync(actionContext, new CancellationToken());
    var id = actionContext.ActionArguments["id"] as string;
}
catch
{
    base.HandleUnauthorizedRequest(actionContext);
} 
```

**注意：**您需要确保仅过滤来自请求 URI 的参数，因为我注意到对预期来自请求**正文**的任何​​参数执行绑定将不再传递给实际行动。即那些参数将为*null*。

这只是为了说明您*可以*这样做，我建议您使用`GetRouteData()/RouteData`它，因为它不太可能破坏 ASP.NET MVC 模型绑定的进一步流程。

```
var routeData = actionContext.ControllerContext.RouteData;
var id = routeData.Values["id"] as string; 
```

# sql-server - 查询以连接到另一个 SQL 服务器的另一个实例，而不使用链接服务器或 SQLCMD 模式

> ID：16053736
> 
> 赞同：0
> 
> 时间：2013-04-17T07:09:22.727
> 
> 标签：sql-server, tsql

我不想使用 SQLCMD 模式或 addlinkedserver...我正在创建一个 sp，它将从中央服务器触发并从多个服务器收集数据...我只想查询..查询以连接到另一个未使用的 SQL 服务器的另一个实例链接服务器或 SQLCMD 模式，以便我可以将其粘贴到创建脚本的顶部并按 F5 运行它，它将切换到新服务器并运行创建脚本。我不想使用 SP_addLinkedserver 即我不想链接服务器....我只想连接到该服务器....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:14:52.373

您可以使用允许您针对多个服务器运行脚本的服务器组。请参阅[创建中央管理服务器和服务器组](http://msdn.microsoft.com/en-us/library/bb934126.aspx)。好消息是查询是并发运行的，而不是串行运行的，结果集由 SSMS 连接成一个结果集。对于交互式查询，它可以正常工作。坏事是当你失败时，重试和重新运行可能会很棘手。

对于自动化，尽管使用 SQLCMD 模式或[PowerShell cmdlet](http://msdn.microsoft.com/en-us/library/hh245198.aspx)是更好的选择。

# php - 如何更改数组中每个键的第一个字符？

> ID：16053743
> 
> 赞同：2
> 
> 时间：2013-04-17T07:09:42.723
> 
> 标签：php, arrays

我有一个包含情人大小写的所有键的数组，我需要将它们更改为第一个字符为大写，就像`ucfirs`函数一样。是否可以不创建新数组？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-17T07:18:31.010

不创建新数组是不可能的，但这里有一个你可以使用的时髦的单线：

```
$array = array_combine(
    array_map('ucfirst', array_keys($array)), 
    array_values($array)
); 
```

它将数组分解为键和值，转换键，然后将两个部分粘合在一起。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T07:13:13.523

试试这个代码：

```
foreach ($array as $key => $value) {
        unset ($array[$key]);
        $array[ucfirst($key)] = $value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T07:12:25.537

试试这个

```
 foreach ($arr as $key=>$val){
        unset($arr[$key]);
        $key = ucfirst($key);
        $arr[$key]=$val;
      } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T07:22:34.463

试试这个。它也适用于嵌套数组。

```
<?php
function ucfirstKeys(&$data)
{
  foreach ($data as $key => $value)
  {
    // Convert key
    $newKey = ucfirst($key);

    // Change key if needed
    if ($newKey != $key)
    {
      unset($data[$key]);
      $data[$newKey] = $value;
    }

    // Handle nested arrays
    if (is_array($value))
    {
      ucfirstKeys($data[$key]);
    }
  }
}

$test = array('foo' => 'bar', 'moreFoo' => array('more' => 'foo'));
ucfirstKeys($test);
print_r($test); 
```

# iphone - 运行动作导致异常 - (cocos2d-iphone)

> ID：16053745
> 
> 赞同：-1
> 
> 时间：2013-04-17T07:09:44.673
> 
> 标签：iphone, ios, cocos2d-iphone

当我把

```
[_nextProjectile runAction:[CCSequence actions:
                            [CCRotateTo actionWithDuration:rotateDuration angle:cocosAngle],
                            [CCCallFunc actionWithTarget:nil selector:nil],
                            nil]]; 
```

xcode 在执行方法中抛出异常

# 杂注标记 CCCallFuncN

```
@implementation CCCallFuncN

-(void) execute
{
    [targetCallback_ performSelector:selector_ withObject:target_];
} 
```

@结尾

没有 runAction 它可以正常工作..任何人都可以帮助！?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:12:00.530

删除以下行：

```
[CCCallFunc actionWithTarget:nil selector:nil], 
```

或者做这样的事情：

```
[_nextProjectile runAction:[CCSequence actions:
                            [CCRotateTo actionWithDuration:rotateDuration angle:cocosAngle],
                            [CCCallFunc actionWithTarget:self selector:@selector(execute)],
                            nil]];

-(void) execute
{

} 
```

# javascript - 带有查询字符串的 URL 正则表达式

> ID：16053753
> 
> 赞同：1
> 
> 时间：2013-04-17T07:10:18.560
> 
> 标签：javascript, jquery

我使用以下带有正则表达式的 javascript 来测试 url 字符串。

```
var url = window.location.pathname;

// create regexp to match current url pathname and remove trailing slash if 
// present as it could collide with the link in navigation in case 
// trailing slash wasn't present there
urlRegExp = new RegExp(url == '/' ? window.location.origin + '/?$' : url.replace(/\/$/, '')); 

// now grab every link from the navigation
$('.page-sidebar a').each(function () {
    // and test its normalized href against the url pathname regexp
     if (urlRegExp.test(this.href.replace(/\/$/, ''))) {
         $(this).closest("li").addClass("active");
     }
}); 
```

但是这个正则表达式不包括查询字符串。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:37:46.513

也许您可以将字符串与类似的内容匹配，并从中构造您想要的内容。

```
var rx = new RegExp("^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)");

var url = "http://stackoverflow.com/questions/16053753/regex-for-url-with-querystring?a0b&c=d&e=f#anchor";

var val = url.match(rx);

val.forEach(function (part) {
    var result = $("#result");
    var $text = $("<p>").text(part);
    result.append($text);
}); 
```

您可以在[jsfiddle上使用此代码](http://jsfiddle.net/Xotic750/Rt8rm/)

# php - 在另一个系统上部署 php 项目时显示错误，因为权限被拒绝

> ID：16053756
> 
> 赞同：0
> 
> 时间：2013-04-17T07:10:29.610
> 
> 标签：php, image, permission-denied

当我试图在另一个系统中部署一个 php 项目时，我遇到了这样的错误

```
Warning: imagejpeg() [function.imagejpeg]: Unable to open 'image.jpg' for writing: Permission denied in /Applications/XAMPP/xamppfiles/htdocs/WISMAN/pmhome.php on line 61 
```

在这里，我在调用 Web 服务以获取 json 作为响应后得到一个 json，其中包含字符串形式的图像，我将其编码为图像并将其保存为 image.jpeg 但显示了这个

```
 <?php
 $userid=$_SESSION[user_id];
 //echo $userid;
 $useridofuser=array(
 'user_id'=> "$userid");
  //echo json_encode($useridofuser);//coverting the vlaues collected from form  into json
        //calling the web service
      $url='webservice url';
    $data=$useridofuser;
 //echo("Input to Server : ".$data."\n");
    $ch=curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($useridofuser));
    curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: application/json"));
    $response=  curl_exec($ch);
   echo('\n'."Server response : \n \n".$response);
    curl_close($ch);
    //parsing the json response from server 
    $jsonde="$response";
    $json_o=json_decode($jsonde);
    $json_a=json_decode($jsonde,true);
    //echo("$json_a");
    $company_name=$json_a[user_data][company_name];
    $name=$json_a[user_data][name];
    $registration_date=$json_a[user_data][registration_date];
    $user_id=$json_a[user_data][user_id];
    $product_id=$json_a[product_data][0][product_id];
    $product_registration_id=$json_a[product_data][0][product_registration_id];
    $product_name=$json_a[product_data][0][product_name];
    $registration_date=$json_a[product_data][0][registration_date];
    $image=$json_a[product_data][0][image];
    $expiry_date=$json_a[product_data][0][expiry_date];
    $product_evaluation_level=$json_a[product_data][0][product_evaluation_level];
 $_SESSION[regid]=$product_registration_id;
if($product_evaluation_level=="1")
{
    $level=trial;
}
$image_base64="$image";
$img = imagecreatefromstring(base64_decode($image_base64));
if($img != false)
{
imagejpeg($img, 'image.jpg');
} ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:14:22.743

您只是没有足够的权限写入目标文件夹。你的服务器可能在用户下运行`apache`，`httpd`或者类似的东西，你有你的用户喜欢`Sree`。

因此，您必须在一个组中并[`chmod`](http://www.linuxnix.com/2011/10/chmod-command-explained-linuxunix.html)设置为`x7x`- 组可写；或（不在同一组中）`xx7`- 对所有人都可写。

没有提到由[seLinux](http://www.lurking-grue.org/selinuxHOWTO.html)（您的系统可能正在运行）引起的可能问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:12:52.237

您没有目录的写入权限。授予它权限，然后它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T07:14:36.577

您的应用程序在您尝试将文件保存到的目标目录中没有写入权限。您将需要使用安全 shell 登录并使用[chmod更新权限](http://www.computerhope.com/unix/uchmod.htm)

# sql - Group by 是否为空？

> ID：16053759
> 
> 赞同：1
> 
> 时间：2013-04-17T07:10:35.920
> 
> 标签：sql, group-by, firebird

我想计算 Firebird 数据库中有多少条记录的时间戳字段为空或不为空。怎么做？

像这样的东西：

```
select RECORD_TYPE, count(*), (MY_TIMESTAMP IS NULL) from MY_TABLE 
group by RECORD_TYPE, (MY_TIMESTAMP IS NULL) 
```

我正在使用火鸟 2.5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T07:12:48.193

您可以输出具有两列的单个记录，

```
SELECT  COUNT(MY_TIMESTAMP) AS TOTAL_NOTNULL,
        COUNT(CASE WHEN MY_TIMESTAMP IS NULL THEN 1 END) TOTAL_NULL
FROM    MY_TABLE 
```

# java - ServletContext realpath 是否可以在 WAR 文件中使用

> ID：16053774
> 
> 赞同：1
> 
> 时间：2013-04-17T07:10:58.030
> 
> 标签：java, servlets, war

我在 location 中存储了一些格式化的 excel `ReportGeneratorJSF/WebContent/WEB-INF/FormattedExcel/*.xls`。为了阅读它们，我使用`getRealPath("/WEB-INF/FormattedExcel/")`了 ServletContext。但它从位置读取

```
'C:\Users\kgcn984\heliosworkspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\ReportGeneratorJSF\WEB-INF\FormattedExcel\...' 
```

虽然路径应该是`ReportGeneratorJSF/WebContent/WEB-INF/FormattedExcel/*.xls`，但它的工作正常。

我的问题是当我创建一个war文件并放入tomcat的webapps时，它会成功运行吗？对不起，我无法尝试这个，因为我没有系统权限在tomcat的webapps中放置任何war。

请回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:15:09.197

当且仅当 Tomcat 扩展了 WAR 时，这将正常工作。

要在所有情况下使用该文件，您应该使用`getResourceAsStream`.

如果需要列出所有 Excel 文档，可以使用`getResourcePaths`

# regex - 使用正则表达式检查字符串是否有 url

> ID：16053775
> 
> 赞同：0
> 
> 时间：2013-04-17T07:10:58.920
> 
> 标签：regex, url, velocity

我想检查给定的字符串是否有正则表达式。我正在使用这个

```
#if($feed.message.matches('.*https?://.*'))
     $feed.message <a href="$feed.message"></a>
#else   
   $feed.message
#end 
```

所以它适用于以下网址（我得到消息和消息网址）

```
http://www.p4pune.com/img/Scene.jpeg 
```

但不适用于以下网址（我只得到消息字符串）

```
string before url http://www.p4pune.com/img/Scene.jpeg 
```

其中 feed.message 包含链接（上面给出）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:33:25.383

通过删除正则表达式开头的一些字符，它似乎对我有用：

```
(http|ftp|https)://[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:/~+#-]*[\w@?^=%&amp;/~+#-])? 
```

# cordova - 带有 jquery mobile 和 phonegap 的 PouchDB

> ID：16053776
> 
> 赞同：2
> 
> 时间：2013-04-17T07:11:07.007
> 
> 标签：cordova, jquery-mobile, pouchdb

我正在尝试在移动（android）应用程序中同时使用上述三个。当我在 firefox (20)、Ubuntu (12.04) 中运行它时，它工作得非常好，但是当我将它加载到手机（或 android 模拟器）中时，它似乎无法存储数据。在 firefox 中运行时，数据存储在 sqlite db 中的用户配置文件目录中，但是使用应用程序？如何告诉 PouchDB 将数据库存储在哪里？我该怎么做？

- 附加信息

我一直在对 PouchDB 适配器类型进行更多测试 - 在 firefox 和 chrome 中。Firefox 不支持 WebSQL，因此使用 chrome 进行测试。这是我在 index.html 中加载的脚本。

```
<link rel="stylesheet" href="jquery.mobile/jquery.mobile-1.3.1.min.css" />
<script type="text/javascript" charset="utf-8" src="jquery.mobile/jquery-1.9.1.min.js"></script>
<script type="text/javascript" charset="utf-8" src="jquery.mobile/jquery.mobile-1.3.1.min.js"></script>
<script type="text/javascript" charset="utf-8" src="cordova-2.6.0.js"></script>
<script type="text/javascript" charset="utf-8" src="jquery.mobile/pouch-20130419/pouchdb-nightly.js"></script>
<script type="text/javascript" charset="utf-8" src="testa.js"></script> 
```

这是生成这些日志的一些相关代码

```
console.log("Creating the database" + JSON.stringify(userdata));
Pouch('idb://'+userdata.username, function(err, database){
    if (err) {
    console.log('Failed to create database:'+ JSON.stringify(err));
        return {'ok': false, 'reason':'Failed to create database:'+ userdata.username};
    } else {
        pdb = database;
        console.log('Created database:'+ JSON.stringify(userdata.username));
        Pouch('idb://cred', function(err, credb){
           if (err) {
               console.log('Failed to create database: cred'+ JSON.stringify(err));
               //
               return {'ok': false, 'reason':'Failed to create database: cred'};
           } else {
               pdbcred = credb;
               console.log('Created database: cred');
               ... 
```

在firefox中，控制台日志的输出如下，带有idb适配器-Pouch("idb://idbx")

```
testa.js (line 296)     Creating the database{"username":"idbx","email":"idbx@asdf.asdf","password":"password"} 
pouchd...htly.js (line 759) idb://idbx 
pouchd...htly.js (line 764) ["idb://idbx","idb","idbx"] 
pouchd...htly.js (line 767) idb 
pouchd...htly.js (line 768) {} 
pouchd...htly.js (line 772) {"name":"idbx","adapter":"idb"} 
pouchd...htly.js (line 759) idb://_pouch__allDbs 
pouchd...htly.js (line 764) ["idb://_pouch__allDbs","idb","_pouch__allDbs"] 
pouchd...htly.js (line 767) idb 
pouchd...htly.js (line 768) {} 
pouchd...htly.js (line 772) {"name":"_pouch__allDbs","adapter":"idb"} 
testa.js (line 303)     Created database:"idbx" 
pouchd...htly.js (line 759) idb://cred 
pouchd...htly.js (line 764) ["idb://cred","idb","cred"] 
pouchd...htly.js (line 767) idb 
pouchd...htly.js (line 768) {} 
pouchd...htly.js (line 772) {"name":"cred","adapter":"idb"} 
pouchd...htly.js (line 759) idb://_pouch__allDbs 
pouchd...htly.js (line 764) ["idb://_pouch__allDbs","idb","_pouch__allDbs"] 
pouchd...htly.js (line 767) idb 
pouchd...htly.js (line 768) {} 
pouchd...htly.js (line 772) {"name":"_pouch__allDbs","adapter":"idb"} 
testa.js (line 311)     Created database: cred 
testa.js (line 328)     Saved document:{"_id":"idbx","password":"password","email":"idbx@asdf.asdf","savecred":true}:{"ok":true,"id":"idbx","rev":"1-2f0ff07a7c0d8fb6f172a6bfe8a9174f"} 
```

将适配器更改为 websql 并在 chrome 上进行了测试 - 工作正常。

将 websql 版本的 apk 加载到模拟器中（使用 google APIs 而不是 4.2.2 apis），这就是 logcat 上出现的内容（与 idb 相同，logcat 是相同的）：

```
04-19 00:28:26.571: I/Web Console(22733): Creating the database{"username":"websqlo","email":"websqlo@asdf.asdf","password":"password"} at file:///android_asset/www/testa.js:296
04-19 00:28:26.601: I/Web Console(22733): websql://websqlo at file:///android_asset/www/jquery.mobile/pouch-20130419/pouchdb-nightly.js:759
04-19 00:28:26.611: I/Web Console(22733): ["websql://websqlo","websql","websqlo"] at file:///android_asset/www/jquery.mobile/pouch-20130419/pouchdb-nightly.js:764
04-19 00:28:26.631: I/Web Console(22733): "websql" at file:///android_asset/www/jquery.mobile/pouch-20130419/pouchdb-nightly.js:767
04-19 00:28:26.651: I/Web Console(22733): {} at file:///android_asset/www/jquery.mobile/pouch-20130419/pouchdb-nightly.js:768
04-19 00:28:26.751: E/Web Console(22733): Uncaught TypeError: Cannot call method 'valid' of undefined at file:///android_asset/www/jquery.mobile/pouch-20130419/pouchdb-nightly.js:769 
```

pouchdb-nightly 的条目来自我添加到 pouch js 文件中的一些 console.log 语句。围绕 js 的实际代码如下（必须进行字符串化，因为 logcat 除了纯文本不会显示任何内容）：

```
Pouch.parseAdapter = function(name) {
  console.log(name);
  var match = name.match(/([a-z\-]*):\/\/(.*)/);
  var adapter;
  if (match) {
    // the http adapter expects the fully qualified name
    console.log(JSON.stringify(match));
    name = /http(s?)/.test(match[1]) ? match[1] + '://' + match[2] : match[2];
    adapter = match[1];
    console.log(JSON.stringify(adapter));
    console.log(JSON.stringify(Pouch.adapters))
    if (!Pouch.adapters[adapter].valid()) {
      throw 'Invalid adapter';
    }
    console.log(JSON.stringify({name: name, adapter: match[1]}));
    return {name: name, adapter: match[1]};
  } 
```

非常感谢任何有关解决此问题的帮助/建议。感谢 chesles 并经常提出您的建议 - 我现在就去看看。仅供参考 - 像 Pouch("idb://testpath/testdb") 这样的网址不起作用......抱怨元数据。在我脑后的某个地方，我在想应该有一种方法可以告诉 PouchDB 将文件存储在哪里（尤其是在应用程序中）以及有关目录的读/写权限的事情。也许我应该寻找其他地方......欢迎所有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T19:00:13.773

所以这里有几点需要注意：

1.  PouchDB 将使用适用于平台的最佳适配器，如果您只是给它一个数据库名称，不带`adapter://`前缀。如果您想使用本地存储适配器，这可能是创建数据库的最佳方式，因为无论您在什么浏览器上运行，您都可以使用相同的代码；只要它支持 WebSQL 或 IndexedDB，它就*应该*可以工作。

2.  [此处](https://github.com/daleharvey/pouchdb/issues/377)有一个对 Android 的 PhoneGap 的开放问题跟踪支持，该支持已于 4 天前关闭，已确认可以正常工作。不幸的是，我现在无法亲自确认这一点，但它*应该可以*工作。

3.  查看 howonlee 关于 pull request [670](https://github.com/daleharvey/pouchdb/pull/670)的注释，特别是关于将所有内容包装在`deviceready`回调中的内容：

    > 请注意，我们必须在 onDeviceReady() 函数中创建和使用 db，因为我们使用 websql，它仅在 deviceready 事件之后才对我们可用。

# apache-flex - Flex中mxml和script定义和初始化对象的区别

> ID：16053777
> 
> 赞同：0
> 
> 时间：2013-04-17T07:11:09.530
> 
> 标签：apache-flex

请参见以下示例：

```
Step 1: Var a:A = new A(); // a.o1.label == null, a.o2.label == "o2"
Step 2: a.initialize(); // a.o1.label == “label” 
```

一个.mxml：

```
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" width="400" height="300">
    <mx:Script>
        <![CDATA[
            public var o2:Object = {label: "o2"};
            [Bindable] private var _s:String = "o1";
        ]]>
    </mx:Script>
    <mx:Object id="o1" label="{_s}"/>
</mx:Canvas> 
```

所以，如果我想使用标签，我必须先调用initialize()？但是如果我在脚本中编码为 var o:Object = {label = _s}，那么我可以在第 1 步之后使用 aolabel。

然后，调用者似乎应该关心它的孩子的实现。这里有什么问题吗？什么是正确的解决方案？在这种情况下，我不应该在 mxml 中定义/初始化对象吗？

我希望如果有人至少可以提供一些我可以阅读的有关此的文件。

# windows-phone-7 - WP 8：如何从 Visual Studio 部署/导出应用程序

> ID：16053787
> 
> 赞同：5
> 
> 时间：2013-04-17T07:11:30.673
> 
> 标签：windows-phone-7, visual-studio-2012, windows-phone-8, windows-phone, windows-phone-7.1

在android中，我们右键单击我们的项目，单击导出并获取apk。

对于 windows phone 8，在 Visual Studio 2012 中，我如何将我的应用程序导出到我的桌面或其他地方？

任何人都可以帮忙吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-27T20:14:48.110

对于 Windows Phone，您将获得 XAP 文件而不是 APK 文件。

ARM 版本中的 XAP 即`..\<Project Folder>\Bin\ARM\Release\`应提交到 Windows 应用商店或部署到设备。Windows Phone 设备使用基于 ARM 的处理器。

要生成输出 -

*   首先从解决方案配置 DropBox 中选择发布。
*   然后转到配置管理器并将 AnyCPU 字段更改为 ARM。
*   然后构建项目。

在设备上运行-

*   Open Application Deployment（随 Windows Phone SDK 一起安装的程序）
*   选择目标设备（手机应通过 USB 连接并解锁。对于 WP 7，您需要 Zune。）
*   浏览并选择 XAP 文件`\Bin\ARM\Release\`
*   单击部署按钮

在模拟器上运行-（使用 AnyCPU 构建配置）

*   Open Application Deployment（随 Windows Phone SDK 一起安装的程序）
*   选择目标模拟器。
*   浏览并选择 XAP 文件`\Bin\x86\Release\`
*   单击部署按钮

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T07:26:58.287

每次构建项目时 - Visual Studio 都会构建 XAP 文件，该文件是用于将其上传到 Windows Phone 商店或部署到真实设备的实际包。这可能有助于[提交您的应用](http://msdn.microsoft.com/en-us/library/windowsphone/help/jj206724%28v=vs.105%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-28T08:59:33.993

使用 VS 构建应用程序后，如果要部署应用程序，只需转到 Windows SDK 文件夹，例如*C:\Program Files (x86)\Microsoft SDKs\Windows Phone\v8.0*

并在 *Tools\XAP Deployment* 下打开**XapDeploy.exe**

搜索 bin 项目文件夹中的 *.xap 文件（例如*C:\Users\user\Documents\Visual Studio 2012\Projects\HTML5App1\Bin\Debug*）

# linux - __NR_accept 的定义在哪里？

> ID：16053791
> 
> 赞同：1
> 
> 时间：2013-04-17T07:11:46.767
> 
> 标签：linux, sockets, linux-kernel, system-calls

据我所知，系统调用号的定义是asm/unistd.h中的__NR_xxxx格式，但我找不到__NR_accept的定义，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T07:43:13.037

在许多架构上，接受系统调用号*位于*.`<asm/unistd.h>`

但是，我怀疑您是在询问 i386 或其他“较旧”架构。在这种情况下，由于历史原因，实际上并没有系统调用——而是使用调用号为`accept`的多路复用系统调用来执行。您*将*在您的（以及通过 多路复用的各种与套接字相关的系统调用中找到、、、等的定义）。[`socketcall`](http://man7.org/linux/man-pages/man2/socketcall.2.html)`SYS_ACCEPT``accept()`*`__NR_socketcall``<asm/unistd.h>``SYS_SOCKET``SYS_BIND``SYS_CONNECT``SYS_LISTEN``SYS_ACCEPT``<linux/net.h>``socketcall`*

 *无论如何，对于没有真正`accept`系统调用的架构，您当然也没有系统调用号`__NR_accept`。*

# c# - 如何将拆分的字符串插入不同的行C#

> ID：16053793
> 
> 赞同：0
> 
> 时间：2013-04-17T07:11:53.190
> 
> 标签：c#, database, excel, split

我正在尝试根据我的要求插入以插入以下数据。例如：我的excel表是这样的：

```
 id    name  codes                    
  1       a    12
  2       b    13,14,15
  3       c    16-19 
```

**我的要求是这样的：**

```
 id     name   codes
  1       a      12        
  2       b      13
  2       b      14
  2       b      15
  3       c      16
  3       c      17
  3       c      18                
  3       c      19 
```

我正在使用 c#。任何人都可以帮助我.... thnx 提前。

我的代码：

```
for (rCnt = 2; rCnt <= range.Rows.Count; rCnt++)
        {

            cmd = "insert into " + tablename + " values (";

            effective_date = VerifyDateTime(range.Cells[rCnt, 7].Value);
            destination = (string)(range.Cells[rCnt, 1] as Excel.Range).Value2;
            prefix = range.Cells[rCnt, 3].Value.ToString();
            codes = range.Cells[rCnt, 2].Value.ToString();
            level = range.Cells[rCnt, 5].Value.ToString();
            rate = range.Cells[rCnt, 4].Value.ToString();
            change = range.Cells[rCnt, 6].Value.ToString();
            company_id = cmbcompanyid.SelectedItem.ToString();

            string s = range.Cells[rCnt, 6].Value.ToString();
            List<string> l = new List<string>(s.Split(';', '-'));
            int le = 0;
            for (le = 0; le <= l.Count; le++)
            {

                change = l[le];

                cmd = cmd + "'" + destination + "','" + codes + "','" + prefix + "','" + rate + "','" + level + "','" + change + "','" + effective_date + "','" + company_id + "')";

                //       cmd = cmd + "'" + destination + "','" + codes + "','" + prefix + "','" + rate + "','" + level + "','" + change + "','" + effective_date + "','" + company_id + "')";

                cmd = ReplaceSpecialCharacters(cmd);

                MySqlCommand sqlCmd = new MySqlCommand(cmd, sqlCon);
                var i = sqlCmd.ExecuteNonQuery();

            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:16:29.400

没有内置的方法可以做到这一点，但你自己很容易做到：

1.  拆分字符串`,`以获取单独的值
2.  拆分结果`-`以获得范围限制。一个结果=没有范围；两个结果 = 下限和上限，所以发出中间的所有数字。

这里使用的主要方法是[.Split()](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)。

完整的实现留给读者作为练习:-)

**编辑**
请注意，您将一个原始值转换为可能的许多新值。单个“插入”不足以处理一个输入行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:16:35.737

您必须解析字符串，如下所示：

```
string[] items = value.Split(",");
foreach (string item in items) {
  if (item.Contains("-")) {
    string[] parts = item.Split("-");
    int min = Int32.Parse(parts[0]);
    int max = Int32.Parse(parts[1]);
    for (int i = min; i <= max; i++) {
      // add the value in i to the data
    }
  } else {
    // add the value in item to the data
  }
} 
```

# java - 正则表达式从字符串中查找电子邮件地址

> ID：16053797
> 
> 赞同：15
> 
> 时间：2013-04-17T07:12:01.433
> 
> 标签：java, html, regex

我的意图是从网页获取电子邮件地址。我有页面源。我正在逐行阅读页面源代码。现在我想从我正在阅读的当前行中获取电子邮件地址。当前行可能有也可能没有电子邮件。我看到了很多正则表达式的例子。但其中大多数是用于验证电子邮件地址。我想从未验证的页面源获取电子邮件地址。它应该像[http://emailx.discoveryvip.com/](http://emailx.discoveryvip.com/)一样工作

一些示例输入行是：

```
1)<p>Send details to <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;%72%65%62%65%6b%61%68@%68%61%63%6b%73%75%72%66%65%72.%63%6f%6d">neeraj@yopmail.com</a></p>

2)<p>Interested should send details directly to <a href="http://www.abcdef.com/abcdef/">www.abcdef.com/abcdef/</a>. Should you have any questions, please email <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;%6a%6f%62%73@%72%65%6c%61%79.%65%64%75">neeraj@yopmail.com</a>.

3)Note :- Send your queries at  neeraj@yopmail.com  for more details call Mr. neeraj 012345678901. 
```

我想从示例 1,2 和 3 中获取 neeraj@yopmail.com。我正在使用 java，但我不擅长 rexexp。帮我。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-17T07:20:08.250

[您可以根据RFC 2822](https://www.rfc-editor.org/rfc/rfc2822#section-3.4.1)验证电子邮件地址格式，如下所示：

```
(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\]) 
```

这是来自[regular-expressions.info](http://www.regular-expressions.info/email.html)的解释：

> 这个正则表达式有两部分：@ 之前的部分和@ 之后的部分。@ 之前的部分有两种选择：它可以由一系列字母、数字和某些符号组成，包括一个或多个点。但是，圆点可能不会连续出现，也不会出现在电子邮件地址的开头或结尾。另一种选择要求 @ 之前的部分用双引号括起来，允许引号之间的任何 ASCII 字符串。空白字符、双引号和反斜杠必须用反斜杠转义。

您可以在这里查看：[Rubular 示例](http://rubular.com/r/RdaE7vqD4F)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-04-10T15:04:50.263

正确的代码是

```
Pattern p = Pattern.compile("\\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}\\b",
    Pattern.CASE_INSENSITIVE);
Matcher matcher = p.matcher(input);
Set<String> emails = new HashSet<String>();
while(matcher.find()) {
  emails.add(matcher.group());
} 
```

这将在您的长文本/html 输入中给出邮件地址列表。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-17T07:16:11.410

你需要这样的正则表达式：

```
".*(\\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}\\b).*" 
```

当它匹配时，您可以提取第一组，这将是您的电子邮件。

```
String regex = ".*(\\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}\\b).*";
Pattern p = Pattern.compile(regex, Pattern.CASE_INSENSITIVE);
Matcher m = p.matcher("your text here");
if (m.matches()) {
    String email = m.group(1);
    //do somethinfg with your email
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-13T10:52:14.540

这是一种从输入字符串中提取所有电子邮件的简单方法[`Patterns.EMAIL_ADDRESS`](https://developer.android.com/reference/android/util/Patterns.html#EMAIL_ADDRESS)：

```
 public static List<String> getEmails(@NonNull String input) {
        List<String> emails = new ArrayList<>();
        Matcher matcher = Patterns.EMAIL_ADDRESS.matcher(input);
        while (matcher.find()) {
            int matchStart = matcher.start(0);
            int matchEnd = matcher.end(0);
            emails.add(input.substring(matchStart, matchEnd));
        }
        return emails;
    } 
```

# android - 从 FragmentActivity 将包添加到 Fragment

> ID：16053798
> 
> 赞同：6
> 
> 时间：2013-04-17T07:12:03.970
> 
> 标签：android

我的代码中有以下几行

```
FragmentManager fm = getSupportFragmentManager();
FragmentTransaction ft = fm.beginTransaction();
ft.replace(R.id.fragment_content, fragment, fargmentTag); 
```

现在我想在我的片段中添加一个包。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-08-26T21:25:45.950

尝试这个：

在 FragmentActivity 类中的任何地方，放置：

```
MyFragmentClass mFrag = new MyFragmentClass();
Bundle bundle = new Bundle();
bundle.putString("DocNum", docNum);   //parameters are (key, value).
mFrag.setArguments(bundle);

getSupportFragmentManager().beginTransaction().replace(R.id.page_fragments, mFrag).commit(); 
```

我正在使用“import android.support.v4.app.FragmentActivity;” 所以我使用“getSupportFragmentManager()”。所以总结上面的代码，你创建了一个包实例和你的片段实例。然后将这两个对象与“mFrag.setArguments(bundle)”相关联。所以现在“bundle”与你的 MyFragmentClass 实例相关联。所以在你的 MyFragmentClass 的任何地方，通过调用来检索包：

```
Bundle bundle = getArguments();
String mDocNum = bundle.getString("DocNum"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T07:13:52.900

在`ft.replace(R.id.fragment_content, fragment, fargmentTag);`添加以下行之前：

`fragment.setArguments(bundle)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T07:16:34.927

在调用之前`replace`添加`fragment.setArguments(bundle)`

# php - 获取两个日期之间的时差

> ID：16053799
> 
> 赞同：-1
> 
> 时间：2013-04-17T07:12:08.253
> 
> 标签：php, date, symfony, compare, twig

我想比较两个日期以获得 TWIG 中的时间（天、小时、分钟和秒）差异

```
{% set todayDate = ( "now"| date("Y-m-d H:i:s") ) %}  //2013-04-17 08:45:28 
{% set endDate =  (enddate|date('Y-m-d H:i:s')) %}    //2013-04-18 23:59:59 
```

如何获得小时差？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:00:57.900

最后我明白了.. 比较两个日期以获得控制器中的时间（天、小时和分钟）：

（教义查询）

```
TIMESTAMPDIFF(DAY,CURRENT_TIMESTAMP(), a.enddate) AS endday,    
(TIMESTAMPDIFF(HOUR,CURRENT_TIMESTAMP(), a.enddate) - TIMESTAMPDIFF(DAY,CURRENT_TIMESTAMP(),a.enddate)*24) AS endhour,
(TIMESTAMPDIFF(MINUTE,CURRENT_TIMESTAMP(), a.enddate) - TIMESTAMPDIFF(HOUR,CURRENT_TIMESTAMP(), a.enddate)*60) AS endmin, 
```

为 TIMESTAMPDIFF 创建了一个函数 [https://github.com/beberlei/DoctrineExtensions/blob/master/lib/DoctrineExtensions/Query/Mysql/TimestampDiff.php](https://github.com/beberlei/DoctrineExtensions/blob/master/lib/DoctrineExtensions/Query/Mysql/TimestampDiff.php)

并包含一个片段

app->config->config.yml 学说：dbal: ........

```
orm:
    entity_managers:
        default:
            auto_mapping: true
            dql:
                datetime_functions:
                    timestampdiff: Acme\BUNDLE\FOLDER\TimestampDiff 
```

谢谢大家 ..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:23:45.573

由于您将结束日期传递给模板，因此您应该在控制器中执行此操作并将结果传递给模板。

这是您可以使用的 php 代码：

```
$now = new DateTime('now');
$dateToCompare = new DateTime('your date');

$difference = $now->format('U') - $dateToCompare->format('U');
// or if your date to compare is in the future :
// $difference = $dateToCompare->format('U') - $now->format('U');
$time_diff = gmdate('H',$difference);

echo $time_diff; 
```

# android - 如何在不同的 Android sdk 版本上导入不同的类

> ID：16053800
> 
> 赞同：2
> 
> 时间：2013-04-17T07:12:11.283
> 
> 标签：android, sdk, import, facebook-android-sdk

这是示例：PhoneConstants.java 是在 Android 4.2 上新增的，我通过将其导入自定义类来使用该类：import com.android.internal.telephony.PhoneConstants; 这样，我的应用程序无法在android4.2以下的手机上运行。

我的疑问是：有什么方法可以在不同的 android 版本上导入不同的类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:17:17.863

您可以使用从以前的 Android 版本“填补空白”的 Android 支持库，因此您可以安全地导入该类，而不会产生运行时问题。

请看这里：http: [//developer.android.com/tools/extras/support-library.html](http://developer.android.com/tools/extras/support-library.html)

希望有帮助，A.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:19:07.777

看看专门为提供向后兼容性而设计的[支持库。](http://developer.android.com/tools/extras/support-library.html)但是，支持库不仅仅包含一些移植到旧 Android 版本上的类。

# java - Java - 文件传输 FTP 到远程服务器（Apache MINA）

> ID：16053832
> 
> 赞同：0
> 
> 时间：2013-04-17T07:13:58.527
> 
> 标签：java, ftp, file-transfer, remote-server, apache-mina

我正在实现一个Java程序，

1.  必须连接到远程服务器
2.  连接的远程服务器应该从 ftp 下载文件

**我正在为这段代码使用 Apache MINA lib**

这是代码，它连接到远程服务器

```
public class filetrans
{
    public static void main(String[] args) throws IOException, InterruptedException 
    {
        SshClient client = null; 
        String login="user";
        String password="password";

        try 
        {
            client = SshClient.setUpDefaultClient(); 
            client.start(); 
            ConnectFuture future = client.connect("myhost",myport); 
            future.await(); 
            ClientSession session = (ClientSession) future.getSession(); 
            boolean auth = session.authPassword(login, password).await().isSuccess(); 
            if (auth) 
            { 
                System.out.println("Authenticated...."); 
                ClientChannel channel = session.createChannel("shell");
                channel.setIn(new NoCloseInputStream(System.in));
                channel.setOut(new NoCloseOutputStream(System.out));
                channel.setErr(new NoCloseOutputStream(System.err));
                channel.open();
                channel.waitFor(ClientChannel.CLOSED, 5000);
                channel.close(true);
            } 
            else 
            {
                System.out.println("Authentication failed....");
            } 
        } 

        catch (Throwable t) 
        {
            System.out.println(t);
        } 
        finally 
        { 
            client.stop(); 
        } 
    }
} 
```

我成功连接到远程服务器。现在我必须连接到 FTP 服务器并下载文件并保存在远程服务器中。我被困在这里，任何如何进一步实施的想法或任何代码或任何建议都会很棒。谢谢

# sql-server - 在sql中创建函数时出错

> ID：16053836
> 
> 赞同：2
> 
> 时间：2013-04-17T07:14:08.213
> 
> 标签：sql-server, sql-server-2008

```
CREATE FUNCTION Salary.SecondHighestSalary()

Returns int

AS 

    BEGIN
    Declare @salary int;

  SELECT TOP 1 salary FROM (

  SELECT TOP 2 salary FROM Salary
  ORDER BY salary DESC
) as maxsalary ORDER BY salary ASC

Return @salary  
END 
```

大家好，我正在尝试使用上述语法创建一个获得第二高薪水的sql函数，但出现错误：

"**函数中包含的 Select 语句不能将数据返回给客户端。** "

谁能告诉我编写函数的实际语法是什么，或者只是用正确的语法把我的代码转回来。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:24:21.937

我写的是使用[`ROW_NUMBER()`](http://msdn.microsoft.com/en-GB/library/ms186734.aspx)如下：

```
CREATE FUNCTION SecondHighestSalary()

Returns int

AS 
begin
    Return (
      select salary from (
         select salary,ROW_NUMBER() OVER (ORDER BY salary desc) as rn
         from Salary
        ) t
      where rn = 2);
END 
```

如果您需要处理and方法不太适合的例如关系（切换到[`RANK`](http://msdn.microsoft.com/en-us/library/ms176102.aspx)或[`DENSE_RANK`](http://msdn.microsoft.com/en-us/library/ms173825.aspx)酌情），这也允许它轻松调整。`TOP``ORDER BY`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:18:38.920

```
CREATE FUNCTION Salary.SecondHighestSalary()

Returns int

AS 

    BEGIN
    Declare @salary int;

  SELECT TOP 1 @salary = salary FROM (

  SELECT TOP 2 salary FROM Salary
  ORDER BY salary DESC
) as maxsalary ORDER BY salary ASC

Return @salary  
END 
```

# angularjs - 从 ngRepeat 中截取删除元素

> ID：16053851
> 
> 赞同：0
> 
> 时间：2013-04-17T07:14:55.620
> 
> 标签：angularjs, angularjs-directive

我正在寻找一种可以删除附加到 ngRepeat 的元素的方法。我这样做是为了添加一些动画。对于添加元素，使用“链接”事件很容易，该事件在首次创建时被调用。我不知道如何拦截删除事件。基本上我想自己做 DOM 删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T04:18:01.253

`$destroy`您可以通过订阅范围上的事件来判断元素何时被删除：

```
scope.$on('$destroy', function(event) {...}); 
```

我不确定您是否可以自己接管元素的删除，但也许您可以克隆元素并操作克隆（就像 jQuery 对可拖动元素所做的那样）。

# hadoop - 如何在 CDH4 中添加主机

> ID：16053864
> 
> 赞同：0
> 
> 时间：2013-04-17T07:15:37.270
> 
> 标签：hadoop, cloudera

我有五台安装了免费 CDH4 的服务器，并且服务运行良好。今天我想添加两个主机，但是失败了。这是日志。

```
Refreshing package metadata...
BEGIN sudo apt-get update 
...
Ign http://archive.cloudera.com precise-cdh4.0.0 Release 
Ign http://archive.cloudera.com precise-cm4.1.4 Release 
Ign http://archive.cloudera.com precise-cdh4.0.0/contrib TranslationIndex 
Ign http://archive.cloudera.com precise-cm4.1.4/contrib TranslationIndex 
Err http://archive.cloudera.com precise-cdh4.0.0/contrib amd64 Packages 
Connection failed 
Err http://archive.cloudera.com precise-cm4.1.4/contrib amd64 Packages 
Connection failed 
Ign http://archive.cloudera.com precise-cdh4.0.0/contrib Translation-en_US 
Ign http://archive.cloudera.com precise-cdh4.0.0/contrib Translation-en 
Ign http://archive.cloudera.com precise-cm4.1.4/contrib Translation-en_US 
Ign http://archive.cloudera.com precise-cm4.1.4/contrib Translation-en 
Fetched 2,965 kB in 24min 11s (2,042 B/s) 
W: Failed to fetch  http://archive.cloudera.com/cdh4/ubuntu/precise/amd64/cdh/dists/precise- cdh4.0.0/contrib/binary-amd64/Packages Connection failed 

W: Failed to fetch http://archive.cloudera.com/cm4/ubuntu/precise/amd64/cm/dists/precise-cm4.1.4/contrib/binary-amd64/Packages Connection failed 

E: Some index files failed to download. They have been ignored, or old ones used instead. 
END (100) 
```

这不是真正的问题。在下一个命令中你会看到！

```
Installing oracle-j2sdk1.6 package...
BEGIN sudo apt-cache show oracle-j2sdk1.6 
E: No packages found 
END (100) 
remote package oracle-j2sdk1.6 is not available, giving up 
```

并回滚执行。我认为真正的问题是安装 oracle-j2sdk1.6 但我不知道如何解决。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T13:15:42.420

我手动安装 oracle-j2sdk1.6 并安装完成。如果您的国家不抵制，您将不会看到此错误。

# django - 在 Django 中处理请求

> ID：16053865
> 
> 赞同：1
> 
> 时间：2013-04-17T07:15:39.017
> 
> 标签：django

我刚开始使用 Django，我有一些关于处理请求的基本问题。

假设我有两个功能。

如果我有看法，请说

```
def test():
    return render(request, 'form.html') 
```

在 form.html 我有一个表格`method="POST"`和`action="/submitted/"`

所以现在如果我想对表单的提交数据做一些事情，我应该在同一个`test()`视图中做，还是必须在另一个可以处理`/submitted/ URL的视图中做？

我一直在使用后者，但后来我读到了这个： [需要一个最小的 Django 文件上传示例](https://stackoverflow.com/questions/5871730/need-a-minimal-django-file-upload-example)。在这里，在关于 的第 4 点中`views.py`，他们以与处理表单相同的视图制作表单。

这是如何运作的？这似乎很不直观。还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:29:40.187

在 django 中，`GET`和`POST`方法可以在同一个视图中处理，除非您想将表单发布到与当前 URL 不同的 URL。阅读以下代码：

### 网址.py

```
url(r'^test/$', 'myapp.views.test', name='test'),
url(r'^test_post/$', 'myapp.views.test_post', name='test_post'), 
```

### 视图.py

```
def test(request):
    #Do your regular get method processes here
    if request.POST:
        #Do something with post data here
    return render_to_response('form.html', locals(), context_instance = RequestContext(request))

def test_post(request):
    if request.POST:
        #Do something with post data here
    return render_to_response('form.html', locals(), context_instance = RequestContext(request)) 
```

如果您希望在同一视图中处理您的帖子数据，请在您的表单中包含如下所示`test`的集合。`action="."`

```
<form method="post" action="." id="form_id" name="form_name"> 
```

如果您希望在不同的视图中处理您的帖子数据，请在您的表单中包含如下所示`test_post`的集合。`action="/test_post/"`

```
<form method="post" action="/test_post/" id="form_id" name="form_name"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:21:48.307

在您看来，您将检查表单是否已发布，就像这样。

```
def test(request): # A view always needs a request
    if request.method == "POST":
        # Do validation stuff here
    else:
        return render(request, 'form.html') 
```

但我建议你看看[Django forms](https://docs.djangoproject.com/en/dev/topics/forms/)，它是一个内置函数，使表单和验证变得更加容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T08:59:22.707

上面的答案很好，但是如果你仍然有点困惑，让我们分解你提供的一些信息，看看我们是否能理解核心问题，即确定什么时候会发生什么。

如果在这种情况下您的函数“test()”被映射到诸如“/test/”之类的 URL...那么我们也可以假设您试图弄清楚当您提交到 URL 时会发生什么“/submitted /”。

1.  在表单提交期间，“表单操作”指向的地方就是数据所在的位置（例如/submitted/）。

2.  如果您在 HTML 表单代码中告诉表单提交到“/submitted/”，那么所有表单数据处理都将在视图“submitted()”中处理，如果您还没有这样做（为便于理解的假设命名）。

3.  就像 arulmr 建议的那样，根据您的示例场景，您的代码可能看起来像这样：

    ```
    def test(request):
        return render(request, 'form.html')

    def submitted(request):
        if request.POST:
            #Do something with post data here
        return render_to_response('form_message.html') 
    ```

4.  更知名和“直观”的方法是让表单提交给它自己，而不是另一个视图或 URL。

    ```
    def test(request):
        if request.POST:
            #Do something with post data here
        return render_to_response('form_message.html') 
    ```

    和...

    ```
    <form method="post" action="."> 
    ```

'action="."' 意味着提交给自己。

希望增加清晰度。

# javascript - Javascript：将多个参数传递给 EventListener 和事件

> ID：16053866
> 
> 赞同：2
> 
> 时间：2013-04-17T07:15:39.950
> 
> 标签：javascript

我想通过 .addEventListener 方法将 EventListener 添加到按钮。这是代码：

```
myElement[i].addEventListener('click', buttonLink); 
```

这工作正常，它将事件作为值传递给方法。这是方法头：

```
function buttonLink(e) {
    //Now i can access the srcElement via:
    e.srcElement.id ...
} 
```

问题是，如果我将参数传递给方法，它会隐藏 e 参数并且它在方法内完全不可见。**有没有办法将我自己的值和（！）事件传递给 eventListener？**

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T07:16:46.177

传递一个匿名函数`addEventListener`并从中调用回调：

```
myElement[i].addEventListener('click', function (e) {
    buttonLink(e, somethingElse, anotherThing);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-06T10:33:09.840

下面我给出了两种传递函数参数的方法。两者都适用于`addEventListener`和`removeListener`：

## 方法一：包装函数：

```
let myElement = document.getElementById('myId');
function wrapperFunction(e) { 
    myFunction(e, 5, 9); //define your function and pass arguments(5,9)
}

myElement.addEventListener('event', wrapperFunction);
myElement.removeEventListener('event', wrapperFunction); 
```

注意：“e”事件是从“addEventListener”函数中免费获得的。

## 方法2：卷曲

```
var myFunction = function (arg1, arg2) {
    return function curriedFunc(e) {
      myFunction(e, arg1, arg2); // define your function and pass arguments(5,9)
    };
};

let myElement = document.getElementById('myId');
let myRef = myFunction(5,9);
myElement.addEventListener('click', myRef);
myElement.removeEventListener('click', myRef); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-27T20:24:47.470

来自[https://www.codegrepper.com/code-examples/javascript/can+I+have+multiple+arguments+in+addEventListener](https://www.codegrepper.com/code-examples/javascript/can+I+have+multiple+arguments+in+addEventListener)：

```
var someEventHander=function(event,param1,param2)
{
    console.log(event,param1,param2);
}
//add listener
document.getElementById("someid").addEventListener('click',someEventHander.bind(event,'param1','param2'), false); 
```

不过，这似乎不可用`removeEventListener`。

# erlang - Erlang: proplists:get_value/2 or pattern matching?

> ID：16053870
> 
> 赞同：5
> 
> 时间：2013-04-17T07:15:42.937
> 
> 标签：erlang

I have a list of tuples that has always the same form (i.e. the tuples come always in the same order):

```
1> L = [{a, 1}. {b,2}, {c, 3}, {d, 4}]. 
```

Knowing that the list has only a few elements, what is the best way to extract the values associated to the keys?

Suppose the list is passed as argument to a function, to extract the values should I use:

```
proplists:get_value(a, L).
proplists:get_value(b, L).
...
proplists:get_valus(d, L). 
```

Or should I simply use pattern matching as:

```
[{a, 1}. {b,2}, {c, 3}, {d, 4}] = L. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T08:16:57.147

If you really know your lists is in same form pattern matching is simplest

```
[{a, A}, {b, B}, {c, C}, {d, D}] = L, 
```

you can compare it with following

```
[A, B, C, D] = [ proplists:get_value(X, L) || X <- [a,b,c,d] ], 
```

or

```
A = proplists:get_value(a, L),
B = proplists:get_value(b, L),
C = proplists:get_value(c, L),
D = proplists:get_value(d, L), 
```

or

```
[A, B, C, D] = [ V || Key <- [a,b,c,d], {K, V} <- L, K =:= Key ], 
```

Pattern matching will be also fastest. You can also use `lists:keyfind/3` which is implemented as Bif and is way faster than `proplist:get_value/2` but it doesn't matter for short lists.

# iphone - 可以直接访问核心数据的SQLite数据库吗

> ID：16053871
> 
> 赞同：1
> 
> 时间：2013-04-17T07:15:47.080
> 
> 标签：iphone, ios, objective-c, sqlite, core-data

在一个 iphone 应用程序中，我使用核心数据来管理我的所有数据，现在我的问题是我们可以使用我们自己的查询直接访问由核心数据创建的数据库吗？可能吗 ？如果是这样，苹果会批准该应用程序吗？是否违反苹果准则？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T07:23:08.377

> 我们可以使用自己的查询直接访问由核心数据创建的数据库吗？

是的。

> 可能吗 ？

是的。

> 如果是这样，苹果会批准该应用程序吗？

是的。

> 是否违反苹果准则？

不。

不幸的是，你*没有*问的问题是最重要的：

> 我们应该直接访问Core Data的SQLite数据库吗

不。

格式不公开，可能会更改。你不知道它何时被访问，也不知道在 Core Data 背后搞乱它会导致什么问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T07:26:39.427

[核心数据编程指南](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/CoreData/PersistentStoreFeatures.html#//apple_ref/doc/uid/TP40001075-CH23-SW1)指出你不应该手动访问 SQLite 文件：

> “虽然 Core Data 支持 SQLite 作为其持久存储类型之一，但数据库格式是私有的。您不能使用本机 SQLite API 创建 SQLite 数据库并将其直接与 Core Data 一起使用（也不应该使用本机操作现有的 Core Data SQLite 存储） SQLite API）。”

# android - 如何在设备锁定时捕获图像

> ID：16053874
> 
> 赞同：2
> 
> 时间：2013-04-17T07:15:50.750
> 
> 标签：android, android-camera, android-camera-intent, android-capture

当屏幕被锁定并且有人尝试解锁时，我想通过使用 Android 设备的前置或后置摄像头自动捕获图像。我检查了它在 Android 中是可能的，并且某些应用程序在 Market 中可用。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T20:50:10.433

一般来说，你有两个子问题：

**1）检测设备何时解锁**

据我了解，这是相当直截了当的。

您只需让 BroadcaseReceiver 订阅此操作 ( [http://developer.android.com/reference/android/content/Intent.html#ACTION_USER_PRESENT](http://developer.android.com/reference/android/content/Intent.html#ACTION_USER_PRESENT) )。

您可以在此处阅读更多相关信息：

*   [解锁事件上的显示屏幕/活动？](https://stackoverflow.com/questions/9968959/display-screen-activity-on-unlock-event)

*   [http://funwithdc.wordpress.com/2012/02/12/the-problem-with-androids-action_user_present-intent/](http://funwithdc.wordpress.com/2012/02/12/the-problem-with-androids-action_user_present-intent/)

*   [为什么我的 BroadcastReceiver 收到 ACTION_USER_PRESENT 两次？](https://stackoverflow.com/questions/10273614/why-is-my-broadcastreceiver-receiving-action-user-present-twice)

**2）从bakground拍照**

我不是 100% 确定它是否可能或它是否适用于所有设备。据我所知，相机需要进行一些预览。但是，据我了解，它可能是不可见的预览。

一般来说，您想从广播接收器拍照，或者如果您对此有疑问，只需创建附加服务，从广播接收器触发它并从那里拍照。

看看这些问题（他们展示了如何进行隐形预览的示例）：

*   [从相机拍照而不预览](https://stackoverflow.com/questions/2386025/android-camera-without-preview/5384913#5384913)

*   [如何使用相机在Android上的后台服务中拍照？](https://stackoverflow.com/questions/7398897/how-to-use-camera-to-take-picture-in-a-background-service-on-android)

将这两件事结合起来应该可以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:20:42.137

您可以覆盖锁屏作为您的应用程序，然后您可以像应用程序的其余部分一样捕获图像（谷歌可以帮助您）。

# .net - 存根访问受保护的变量

> ID：16053876
> 
> 赞同：0
> 
> 时间：2013-04-17T07:15:52.593
> 
> 标签：.net, unit-testing, protected, moles, stubs

我需要测试这个类：

```
public abstract class GaBase
{
    protected GoogleAnalyticsInfo GAInfo;

    protected abstract void PopulateGAInfo();

    public string GetGoogleAnalyticsTag()
    {
        //Return any info related to GAInfo
    }

    //Some other stuffs
} 
```

我需要对该方法进行单元测试`GetGoogleAnalyticsTag`，但我需要设置属性`GAInfo`以正确测试它。`PopulateGaInfo`在生产代码中，当我们从此类派生时，我们使用我的方法来执行此操作。

如何`GAInfo`使用存根进行设置？

这是我的测试方法：

```
public void MyTest1()
{          
    var ga =  new StubGaBase()
        {
            PopulateGAInfo01 = () =>
                {
                    // How can I set GAInfo here?
                }
        };

    // The method I need to test
    var script = ga.GetGoogleAnalyticsTag();

    // My asserts
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:57:51.683

有一种称为“子类到测试”的模式，它建议如果您需要访问方法或行为（例如模拟引发事件），您将手动滚动一个存根/模拟，以公开测试所需的功能。此存根仅存在于您的测试项目中。

如果您只对测试抽象类的受保护变量感兴趣，只需创建一个派生类并公开一个执行工作并返回您感兴趣的值的方法。

# c# - WebBrowser 和 Excel 实例

> ID：16053880
> 
> 赞同：1
> 
> 时间：2013-04-17T07:16:10.303
> 
> 标签：c#, webbrowser-control, excel-interop

我使用`WebBrowser`控件打开 Excel 文件。

问题是，如果之前已经有一个打开的 Excel 实例，WebBrowser 会使用相同的 Excel 实例（应用程序）。

有没有一种方法可以指示 WebBrowser 应该创建一个新的 Excel 实例？

或者是否可以强制（或阻止）新的 Excel 文件在特定实例中打开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-04T19:00:18.883

如果从命令行启动文件，选项 /e 有助于在新实例中启动它们。例如`"C:\Program Files (x86)\Microsoft Office\Office12\EXCEL.EXE" /e Book2.xlsx`. 如果命令行不是一个选项，Windows 注册表可以提供帮助。只需按照[此处](https://conetrix.com/Blog/how-to-open-each-excel-spreadsheet-in-a-new-instance)和[此处](http://www.dannyeckes.com/open-excel-2010-in-separate-windows/)的说明进行更改：

> 1.  开始 -> 运行 -> 注册表编辑器
> 2.  转到 HKEY_CLASSES_ROOT/Excel.Sheet.8/shell/Open/command
> 3.  双击（默认）并为 Oﬃce 2007 或 "C:\Program Files\Microso Oﬃce\Oﬃce14 \EXCEL.EXE" 写入 "C:\Program Files\Microso Oﬃce\Oﬃce12 \EXCEL.EXE" /e "% 1" /e "% 1" 代表 Oﬃce 2010。
> 4.  右键单击命令，选择“重命名”，然后在名称中添加一些内容（例如 2 (command2)）
> 5.  转到 HKEY_CLASSES_ROOT/Excel.Sheet.8/shell/Open/ddeexec
> 6.  右键单击文件夹 ddeexec，选择“重命名”，然后在名称中添加一些内容（例如 2 (ddeexec2)）
> 7.  转到 HKEY_CLASSES_RO OT/Excel.Sheet.12/shell/Open/command
> 8.  双击（默认）并为 Oﬃce 2007 或 "C:\Program Files\Microso Oﬃce\Oﬃce14 \EXCEL.EXE" 写入 "C:\Program Files\Microso Oﬃce\Oﬃce12 \EXCEL.EXE" /e "% 1" /e "% 1" 代表 Oﬃce 2010。
> 9.  右键单击命令，选择“重命名”，然后在名称中添加一些内容（例如 2 (command2)）。

或更改 Excel 本身的选项，如此[处](https://superuser.com/questions/21602/open-excel-files-in-new-window)所述。

# ios - 以编程方式在iOS中触发通知时呈现一个视图？

> ID：16053882
> 
> 赞同：0
> 
> 时间：2013-04-17T07:16:14.020
> 
> 标签：ios, notifications

当用户在收到本地通知后进入应用程序时，我需要呈现一个视图。

我在方法中编写了以下代码`didReceiveLocalNotifications`。

```
NotificationModelClass *remainderAlert = [[NotificationModelClass alloc]initWithNibName:@"NotificationModelClass" bundle:nil];

[remainderAlert showRemainderAlert1];
[self.viewController presentModalViewController:remainderAlert animated:YES]; 
```

当用户通过 MainView Controller 进入后台时，它工作正常。但我想在任何 viewController 中呈现该视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:51:22.263

尝试这样的方式来呈现应用程序中的任何位置：

```
#define AppDelegateObject ((AppDelegate *)[[UIApplication sharedApplication] delegate])
[AppDelegateObject.window.rootViewController presentModalViewController: remainderAlert animated:YES]; 
```

如果你的 appdelegate 是通知的接收者，那么这样做：

```
 [self.window.rootViewController presentModalViewController: remainderAlert animated:YES]; 
```

# regex - 使用正则表达式的不同长度的通配符？

> ID：16053885
> 
> 赞同：0
> 
> 时间：2013-04-17T07:16:29.807
> 
> 标签：regex

我想从 HTML 中替换很多元关键字标签。

IE`meta name="keywords" content="Some Content"`

我想我需要使用正则表达式，因为每个页面的内容都不同。但是，内容可以是各种长度，所以我很难找到要使用的正则表达式？

提前致谢。

本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:30:44.740

您可以使用这个正则表达式（`preg_replace()`例如，使用 php 的函数）：

```
$result = preg_replace('/(?<=name=").+?(?=")/i', 'replacement', $htmlCode); 
```

使用**积极的后视**和**积极的前瞻**。

# integration - 在 Rally 中调用关于缺陷更改的 rest api

> ID：16053887
> 
> 赞同：0
> 
> 时间：2013-04-17T07:16:31.963
> 
> 标签：integration, rally, user-stories, defects

每当对缺陷或用户故事进行任何更改时，有什么方法可以调用restfull api吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:41:19.250

不幸的是，这是不可能的。您可能希望检查此问题的答案：

[监听 Rally 缺陷状态变化](https://stackoverflow.com/questions/15836966/listen-for-rally-defect-status-change)

这对这个话题有很好的讨论。

# java - java-使用Apache Http Client调用方法

> ID：16053890
> 
> 赞同：0
> 
> 时间：2013-04-17T07:16:37.137
> 
> 标签：java, json, apache-httpclient-4.x, jsonserializer

我在春天有一个方法，我想使用 Apache HttpClient 访问该方法。

以下是我的方法：

```
@PreAuthorize("isAuthenticated() and hasPermission(#request, 'CREATE_REQUISITION')")
    @RequestMapping(method = RequestMethod.POST, value = "/trade/createrequisition")
    public @ResponseBody
    void createRequisition(@RequestBody CreateRequisitionRO[] request,
            @RequestHeader("validateOnly") boolean validateOnly) {
        logger.debug("Starting createRequisition()...");
        for (int i = 0; i < request.length; i++) {
            CreateRequisitionRO requisitionRequest = request[i];

            // FIXME this has to be removed/moved
            requisitionRequest.setFundManager(requisitionRequest.getUserId());
            // FIXME might have to search using param level as well
            SystemDefault sysDefault = dbFuncs.references.systemDefault
                    .findByCompanyAndDivisionAndPortfolio(
                            userContext.getCompany(),
                            userContext.getDivision(),
                            requisitionRequest.getPortfolio());
            requisitionRequest.setCustodianN(sysDefault.getCustodianN());

            gateKeeper.route(requisitionRequest);
        }
    } 
```

这就是我登录系统并使 tomcat 在部署应用程序的地方运行的方式，因为该方法使用其他类来实现某些功能。

`I was able to log in to the system without any issues through problematically but i get the following exception -- java.io.EOFException: No content to map to Object due to end of input`

这是我的主要课程：

```
package com.hexgen.reflection;

public class ReflectionWebAPITest {

    public static void main(String[] args) {
        HttpClientRequests httpRequest = new HttpClientRequests();
        String uri="";
        try {
            uri = "http://localhost:8080/api/trade/createrequisition";
            httpRequest.doSubmit("mayank", "hexgen",uri); 

        } catch (Exception ex) {
            ex.printStackTrace();
        }

    }

} 
```

这是我的 doSubmit 方法：

```
public void doSubmit(String username, String password, String uri) {
        HttpClient client = new DefaultHttpClient();
        JsonConverter jsonROConverter = new JsonConverter();
        CreateRequisitionRO[] request = new CreateRequisitionRO[1];
        BigDecimal priceFrom= new BigDecimal("100000");
        BigDecimal quantity= new BigDecimal("2");
        request[0] = new CreateRequisitionRO();
        request[0].setPortfolio("HEXGENFUND");
        request[0].setTransSrlNo(new BigDecimal(1));
        request[0].setTransCode("BUY");
        request[0].setInvestReason("009");
        request[0].setInflowOutflow(InflowOutflow.I);
        request[0].setTradeDate(new LocalDate());
        request[0].setTradeDate(new LocalDate()); 
        request[0].setTradeDateUpto(new LocalDate());
        request[0].setTradeTime("11:27:9");
        request[0].setInvestCategory("FVTPL");
        request[0].setCustodian("DEUTSCHE");
        request[0].setHoldType("HOLD");
        request[0].setSecurityType(SecurityType.INV);
        request[0].setSecurity("DABU02");
        request[0].setAssetClass("EQU");
        request[0].setIssuer("DABU");
        request[0].setMarketType(MarketType.MKT);
        request[0].setTradePriceType("");
        request[0].setRequisitionType(RequisitionType.SO);
        request[0].setPriceFrom(priceFrom);
        request[0].setPriceTo(priceFrom);
        request[0].setMarketPrice(priceFrom);
        request[0].setAveragePrice(priceFrom);
        request[0].setPrice(priceFrom);
        request[0].setQuantity(quantity);
        request[0].setGrossAmtPcy(priceFrom);
        request[0].setExchRate(quantity);
        request[0].setGrossAmtTcy(priceFrom);
        request[0].setNetAmountPcy(priceFrom);
        request[0].setNetAmountTcy(priceFrom);
        request[0].setAccrIntPcy(priceFrom);
        request[0].setAccrIntTcy(priceFrom);
        request[0].setAcquCostPcy(priceFrom);
        request[0].setYieldType(YieldType.N);
        request[0].setPurchaseYield(quantity);
        request[0].setMarketYield(quantity);
        request[0].setYtm(quantity);
        request[0].setMduration(quantity);
        request[0].setCurrPerNav(quantity);
        request[0].setDesiredPerNav(quantity);
        request[0].setCurrHolding(quantity);
        request[0].setNoofDays(quantity);
        request[0].setRealGlTcy(quantity);
        request[0].setRealGlPcy(quantity);
        request[0].setNowLater("N");
        request[0].setIsAllocable(false); 
        request[0].setAcquCostReval(quantity);
        request[0].setAcquCostHisTcy(quantity);
        request[0].setAcquCostHisPcy(quantity);
        request[0].setExIntPcy(quantity);
        request[0].setExIntTcy(quantity);;
        request[0].setAccrIntReval(quantity);
        request[0].setAccrIntTcy(quantity);
        request[0].setAccrIntPcy(quantity);;
        request[0].setGrossAodTcy(quantity);
        request[0].setGrossAodPcy(quantity);
        request[0].setGrossAodReval(quantity);
        request[0].setBankAccAmtAcy(quantity);
        request[0].setBankAccAmtPcy(quantity);
        request[0].setTaxAmountTcy(quantity);
        request[0].setUnrelAmortPcy(quantity);
        request[0].setUnrelAmortTcy(quantity);
        request[0].setUnrelGlPcy(quantity);
        request[0].setUnrelGlTcy(quantity);
        request[0].setRealGlHisTcy(quantity);
        request[0].setRealGlHisPcy(quantity);
        request[0].setTradeFeesTcy(quantity);
        request[0].setTradeFeesPcy(quantity);

        boolean validateOnly = true;
        HttpPost post = new HttpPost("http://localhost:8080/j_spring_security_check");

        try {

            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
            nameValuePairs.add(new BasicNameValuePair("j_username", username));
            nameValuePairs.add(new BasicNameValuePair("j_password", password));

            post.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = client.execute(post);

            HttpEntity entity = response.getEntity();

            if (entity != null) {
                post.abort();
            }

            HttpPost postURI = new HttpPost(uri);
            // Setup the request parameters
                BasicHttpParams params = new BasicHttpParams();
                params.setParameter("CreateRequisitionRO", jsonROConverter.serialiseRequisionRO(request));
                params.setBooleanParameter("validateOnly", validateOnly);
                postURI.setParams(params);
            postURI.setHeader("Content-type", "application/json");

            HttpResponse responseURL = client.execute(postURI);
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

这些是我用来将其转换`Java POJO`为 Json 的方法；

```
public JSONArray serialiseRequisionRO(CreateRequisitionRO[] requisitionRO) {
        JSONSerializer serializer = new JSONSerializer();

        List<String> requisitionROList = new ArrayList<String>();

        for(int i = 0 ; i< requisitionRO.length ; i++)
        {
            requisitionROList.add(serializer.serialize(requisitionRO[i]));
        }
        System.out.println("JSON : "+serializer.serialize(requisitionRO[0]));
        return convertListToJSON(requisitionROList);
    }
    @SuppressWarnings("unchecked")
    public JSONArray convertListToJSON(List<String> requisitionROList){
        JSONArray requestCollection = new JSONArray();
        JsonFactory jsonFactory = new JsonFactory();
        for(int i = 0 ; i< requisitionROList.size() ; i++)
        { 
            requestCollection.add(requisitionROList.get(i));
        }

        return requestCollection;
    } 
```

在做了所有这些之后`i get the following exception -- java.io.EOFException: No content to map to Object due to end of input`

我猜测我没有正确设置参数，但我不确定。

请帮助我解决这个问题，因为我已经为此苦苦挣扎了三天多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T05:01:23.600

我得到了上面`java.io.EOFException: No content to map to Object due to end of input`的原因是因为调用需要一些参数，因为我已经发送了没有参数的请求。这也可能发生在参数将 json 数组作为参数但我发送的 json 字符串也给我同样的异常。

# actionscript-3 - 是什么导致了这个故障？

> ID：16053902
> 
> 赞同：0
> 
> 时间：2013-04-17T07:17:22.880
> 
> 标签：actionscript-3

我目前正在编写游戏，遇到了一个恼人的故障。偶尔，当您在游戏中杀死一个敌人时，它会掉落额外的货币，并且屏幕上的另一个敌人将从敌人列表中删除。但是，从敌人列表中删除的第二个敌人仍会出现在屏幕上，并且仍会向玩家射击。下面是碰撞公式、敌人破坏序列和子弹命中检查序列的代码片段。

碰撞公式：

```
 public function testCollision(enemy:Entity):Boolean{
        var eX:Number = enemy.collision.xPos
        var eY:Number = enemy.collision.yPos
        var eSL:Number = enemy.collision.SideLength/2
        if(eX-xPos<(SideLength/2)+eSL && eY-yPos<(SideLength/2)+eSL && eX-xPos>-(SideLength/2)-eSL && eY-yPos>-(SideLength/2)-eSL){
            return true
        }else{
            return false
        }
    } 
```

敌人破坏顺序：

```
 if(deathVar){
            view.transparency -= 1/20
            if(view.transparency<0.1){
                var cur = new PixelCurrency(2)
                cur.collision.xPos = collision.xPos
                cur.collision.yPos = collision.yPos
                entityCreated.dispatch(cur)
                destroy()
            }
        } 
```

子弹命中检查：

```
 for each (var enemy:Entity in Game.entities){
            if(enemy.allies == Pixapocalypse.EnemyFaction){
                if(collision.testCollision(enemy)){
                    if(enemy.life){
                        enemy.life.changeHealth(-2)
                        this.sound.playSound(new basicHitSound())
                        this.destroy()
                        break
                    }
                    else{

                    }
                }
            }
        } 
```

如果您需要任何额外的信息，请告诉我，我非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:57:07.393

当 Enemy.life < 0 时会发生什么？

# java - java中stardog sparql插入查询的示例

> ID：16053904
> 
> 赞同：1
> 
> 时间：2013-04-17T07:17:26.610
> 
> 标签：java, sparql, stardog

有人可以在 Stardog 中给出一个 sparql 插入/删除查询的 java 示例。

只有`queryExecution.execSelect()`可用的方法。没有`queryExecution.execInsert()`或`queryExecution.execDelete()` 可用。请举一个可行的例子。

**编辑**

我从stardog docs page 找到了这个。

[http://stardog.com/docs/#notes](http://stardog.com/docs/#notes)

**从 1.1.5 开始，Stardog 的 SPARQL 1.1 支持不包括： UPDATE 查询语言**

这是否意味着一旦输入就无法编辑元组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:45:58.497

Stardog 尚不支持 SPARQL 更新，但正如邮件列表中向您指出的那样，一旦加载数据，您可以通过 5 种方式修改数据。您可以直接使用我们的 HTTP 协议、我们支持的 3 个 Java API 中的任何一个，也可以使用命令行界面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T10:48:03.133

下面是一个插入和删除图表的示例程序。

```
package com.query;

import java.util.List;

import org.openrdf.model.Graph;
import org.openrdf.model.Statement;
import org.openrdf.model.URI;
import org.openrdf.model.impl.GraphImpl;
import org.openrdf.model.impl.ValueFactoryImpl;
import org.openrdf.query.QueryEvaluationException;

import com.clarkparsia.stardog.StardogDBMS;
import com.clarkparsia.stardog.StardogException;
import com.clarkparsia.stardog.api.Connection;
import com.clarkparsia.stardog.api.ConnectionConfiguration;
import com.clarkparsia.stardog.jena.SDJenaFactory;
import com.hp.hpl.jena.query.ParameterizedSparqlString;
import com.hp.hpl.jena.query.QueryExecution;
import com.hp.hpl.jena.query.QueryExecutionFactory;
import com.hp.hpl.jena.query.ResultSet;
import com.hp.hpl.jena.query.ResultSetFormatter;
import com.hp.hpl.jena.rdf.model.Model;

public class test {
public static void main(String[] args) throws StardogException, QueryEvaluationException {
    String appDbName ="memDb";
    String selectQuery="SELECT DISTINCT ?s ?p ?o WHERE { ?s ?p  ?o }";
    StardogDBMS dbms = StardogDBMS.toServer("snarl://localhost:5820/")
            .credentials("admin", "admin".toCharArray()).login();
    List<String> dbList = (List<String>) dbms.list();
    if (dbList.contains(appDbName)) {
        System.out.println("droping " + appDbName);
        dbms.drop(appDbName);
    }
    dbms.createMemory(appDbName);
    dbms.logout();
    Connection aConn = ConnectionConfiguration
            .to("memDb")    // the name of the db to connect to
            .credentials("admin", "admin") // credentials to use while connecting
            .url("snarl://localhost:5820/")
            .connect(); 
    Model aModel = SDJenaFactory.createModel(aConn);
    System.out.println("################ GRAPH IS EMPTY B4 SUBMITTING ="+aModel.getGraph()+ "################");

    URI order = ValueFactoryImpl.getInstance().createURI("RDF:president1");
    URI givenName = ValueFactoryImpl.getInstance().createURI("RDF:lincoln");
    URI predicate = ValueFactoryImpl.getInstance().createURI("RDF:GivenNane");

    Statement aStmt = ValueFactoryImpl.getInstance().createStatement(order,predicate,givenName);
    Graph aGraph = new GraphImpl();
    aGraph.add(aStmt);
    insert(aConn, aGraph);

    ParameterizedSparqlString paraQuery = new ParameterizedSparqlString(selectQuery);
    QueryExecution qExecution = QueryExecutionFactory.create(paraQuery.asQuery(),aModel);
    ResultSet queryResult = qExecution.execSelect();
    System.out.println("############### 1 TUPPLE CAME AFTER INSERT ################");
    ResultSetFormatter.out(System.out, queryResult);

    aGraph.add(aStmt);
    remove(aConn, aGraph);

    paraQuery = new ParameterizedSparqlString(selectQuery);
    qExecution = QueryExecutionFactory.create(paraQuery.asQuery(),aModel);
    queryResult = qExecution.execSelect();
    System.out.println("################ DB AGAIN EMPTY AFTER REMOVE ################");
    ResultSetFormatter.out(System.out, queryResult);

    System.out.println("closing connection and model");
    aModel.close();
    aConn.close();  
}
private static void insert(final Connection theConn, final Graph theGraph) throws StardogException {
    theConn.begin();
    theConn.add().graph(theGraph);
    theConn.commit();
}

private static void remove(final Connection theConn, final Graph theGraph) throws StardogException {
    theConn.begin();
    theConn.remove().graph(theGraph);
    theConn.commit();
}
} 
```

# sql-server - 子查询返回超过 1 个值。当子查询跟随 =,!=,<,<=,>,>= 或子查询用作表达式时，这是不允许的

> ID：16053907
> 
> 赞同：21
> 
> 时间：2013-04-17T07:17:32.357
> 
> 标签：sql-server, subquery

我有一个存储过程`select * from book table`，使用子查询我的查询是

```
USE [library]
GO

/****** Object:  StoredProcedure [dbo].[report_r_and_l]    Script Date: 04/17/2013 12:42:39 ******/

SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

ALTER procedure [dbo].[report_r_and_l]
@fdate date,
@tdate date,
@key varchar(1)
as

if(@key='r')

    select * 
    from dbo.books 
    where isbn =(select isbn from dbo.lending where (act between @fdate and @tdate) and (stat ='close'))

else if(@key='l')

    select * 
    from dbo.books 
    where isbn =(select isbn from dbo.lending where lended_date between @fdate and @tdate) 
```

我知道子查询是向主查询返回多个查询，但我不知道如何避免此错误，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-17T07:21:33.233

问题是这两个查询都返回不止一行：

```
select isbn from dbo.lending where (act between @fdate and @tdate) and (stat ='close')
select isbn from dbo.lending where lended_date between @fdate and @tdate 
```

您有两种选择，具体取决于您想要的结果。您可以将上述查询替换为保证返回*单行*的内容（例如，使用`SELECT TOP 1`），或者您可以切换`=`到`IN`并返回多行，如下所示：

```
select * from dbo.books where isbn IN (select isbn from dbo.lending where (act between @fdate and @tdate) and (stat ='close')) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-17T07:21:12.540

使用`In`代替`=`

```
 select * from dbo.books
 where isbn in (select isbn from dbo.lending 
                where act between @fdate and @tdate
                and stat ='close'
               ) 
```

或者你可以使用`Exists`

```
SELECT t1.*,t2.*
FROM  books   t1 
WHERE  EXISTS ( SELECT * FROM dbo.lending t2 WHERE t1.isbn = t2.isbn and
                t2.act between @fdate and @tdate and t2.stat ='close' ) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-17T07:20:47.087

您可以使用 IN 运算符，如下所示

```
select * from dbo.books where isbn IN
(select isbn from dbo.lending where lended_date between @fdate and @tdate) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-10T12:29:37.577

```
Using operator 'IN' helps

USE [library]
GO

/****** Object:  StoredProcedure [dbo].[report_r_and_l]    Script Date: 04/17/2013 12:42:39 ******/

SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

ALTER procedure [dbo].[report_r_and_l]
@fdate date,
@tdate date,
@key varchar(1)
as

if(@key='r')

    select * 
    from dbo.books 
    where isbn IN (select isbn from dbo.lending where (act between @fdate and @tdate) and (stat ='close'))

else if(@key='l')

    select * 
    from dbo.books 
    where isbn IN (select isbn from dbo.lending where lended_date between @fdate and @tdate) 
```

# javascript - 如何使 jquery 代码更简单

> ID：16053911
> 
> 赞同：3
> 
> 时间：2013-04-17T07:17:59.930
> 
> 标签：javascript, jquery

目的是检测页面加载后输入值是否更改。

输入字段（19 个字段）例如

```
<input type="text" name="date_day1" id="date_day1" value=" >
<input type="text" name="date_month1" id="date_month1" value=" >
<input type="text" name="date_year1" id="date_year1" value=" >
<input type="text" name="amount1" id="amount1" value=" > 
```

然后像这样隐藏输入字段

```
<input type="text" name="is_row_changed1" id="is_row_changed1" value="">
<script>

$("#date_day1").on("change", function () {
    document.getElementById('is_row_changed1').value = 1;
});

$("#date_month1").on("change", function () {
    document.getElementById('is_row_changed1').value = 1;
});

</script> 
```

如果在任何输入字段（19 个字段）中的值发生更改，那么我需要在此隐藏输入字段中反映它（我决定将隐藏输入字段值设置为 1）。

在使用 php 进行 ajax 之后，我检查隐藏的输入字段值是否为 1。如果为 1，则更新 mysql。目的是减少服务器资源的使用。

**隐藏输入字段的问题** Javascript 代码会很长。可能是某种方式（代码）更短（更简单）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T07:21:57.487

为每个输入添加一个 row_changed 类，然后您可以通过一次调用将它们全部定位：

```
$(".row_changed").on("change", function () {
document.getElementById('is_row_changed1').value = 1;
}); 
```

（您还可以使用 QuickSilver 的评论进一步简化它。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:29:00.160

您可以使用 JQuery 选择器为 HTML 代码中声明的所有输入元素设置相同的“输入更改”回调：

```
var anyFieldChanged = false; //Global variable
function changedCallBack()
{
  anyFieldChanged = true;
  alert('Fields changed');
}

allInputs = $('input');
allInputs.each(function() { this.onchange = yourCallBack(); }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T07:29:29.270

我不知道它是否只是在您的示例代码中，但是您有多个具有相同 ID 的元素，这是无效的。每个 ID 都应该是唯一的（这是任何 ID 的目的）。您可以向每个要跟踪的输入添加一个类，然后像 Shawn 所说的那样选择它，或者如果您想跟踪除页面上隐藏的输入之外的每个输入，您可以使用

```
$("input:[type!=hidden]").on("change", function () {
    document.getElementById('is_row_changed1').value = 1;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T07:40:09.010

像这样使用。

```
<script>
$("#date_day1").on("change", function () {

  $('#is_row_changed1').val(1);

});

$("#date_month1").on("change", function () {

  $('#is_row_changed1').val(1);

});

// etc
</script> 
```

# java - Java：使用正则表达式从块注释中去除斜线和星号

> ID：16053913
> 
> 赞同：0
> 
> 时间：2013-04-17T07:18:02.993
> 
> 标签：java, regex, comments

我正在做一个个人项目，我需要从这样的输入字符串中提取实际评论。

情况1：`/* Some useful text */`

输出：`Some useful text`

案例二：`/*** This is formatted obnoxiously**/`

输出：`This is formatted obnoxiously`

案例3：

```
 /**

    More useful
information

    */ 
```

输出：`More useful information`

案例4：

```
/**
Prompt the user to type in 
the number. Assign the number to v
*/ 
```

输出：`Prompt the user to type in the number. Assign the number to v`

我在 Java 中工作，我尝试替换`/*`和`*/`使用诸如此类的幼稚方法，`String.replace`但由于注释可以像上面那样以不同的方式格式化，因此该`replace`方法似乎不是一种可行的方法。如何使用正则表达式实现上述输出？

[这](http://pastie.org/private/gb4genjs0lzbzjgttkdrg#23,41)是我正在使用的测试评论文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:25:12.207

尝试类似：

```
"/\\*+\\s*(.*?)\\*+/" 
```

并且 dot 也应该匹配新行：

```
Pattern p = Pattern.compile("/\\*+\\s*(.*?)\\*+/", Pattern.DOTALL); 
```

**编辑**

```
 Pattern p = Pattern.compile("/\\*+\\s*(.*?)\\*+/", Pattern.DOTALL); 
 Matcher m = p.matcher("/*** This is formatted obnoxiously**/");
 m.find();
 String sanitizedComment = m.group(1); 
 System.out.println(sanitizedComment); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:22:27.223

您可以使用以下正则表达式：

```
String newString = oldString.replaceAll("/\\*+\\s*|\\s*\\*+/", ""); 
```

**编辑**

要摆脱换行符，您可以执行以下操作：

```
String regex = "/\\*+\\s*|\\s*\\*+/|[\r\n]+";
String newString = oldString.replaceAll(regex, ""); 
```

# javascript - “点击”侦听器多次执行

> ID：16053914
> 
> 赞同：6
> 
> 时间：2013-04-17T07:18:05.080
> 
> 标签：javascript, jquery, html

我正在尝试创建使用 ajax 创建行的表。问题是，当我根据类名分配“点击”侦听器时，它会被多次调用

我的代码是

```
function fn_getAlertRules(parentRowId) {
    $.ajax({
        type: "GET",
        url: anyURL,
        contentType: "application/json",
        dataType: "json"
    }).done(function(data) {
        // create row to add to parent table's row
        var s_rulesHtmlString = '<tr><td colspan="3" class="rules-parent-tr"><table><tbody>';
        $.each(data, function(i, name) {
        s_rulesHtmlString += '<tr class="rule-tr">';
        s_rulesHtmlString += '<td class="eventid-td">Rule ID:'+ name.RuleId+'<span>' + name.OccuredEventId + '</span></td>';
        s_rulesHtmlString += '<td>' + name.Name + '</td><td>' + name.RuleDate + '</td>';
        s_rulesHtmlString += '</tr>';
        });
        s_rulesHtmlString += '</tbody></table></td></tr>';
        // add row below parent tr
        $(parentRowId).parent().after(s_rulesHtmlString);
        $(".rule-tr").on("click", "td", function(event) {
            // this code blocks get executed multiple times
        });
    });
} 
```

谁能告诉我，为什么它被多次调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:20:12.150

那是因为您有多个表行，其中分配了相同的类。如果您只想为单击的项目执行它，请为其分配一个唯一的 id。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T07:31:08.767

您`click`在每个（**循环**）中绑定事件，并且事件被绑定的次数与执行循环的次数一样多，这就是您获得重复点击事件的原因。您可以将 click 事件委托给要添加的元素的父级，或者`document`在 ajax 调用之前，事件将自动绑定到在 done 函数中添加的动态添加的元素。[**您可以在此处**](http://api.jquery.com/on/)阅读有关使用 on 的事件委托的更多信息[](http://api.jquery.com/on/)

 **> 委托事件的优点是它们可以处理来自以后添加到文档的后代元素的事件。通过选择在附加委托事件处理程序时保证存在的元素，您可以使用委托事件来避免频繁附加和删除事件处理程序的需要。[参考](http://api.jquery.com/on/)。

```
function fn_getAlertRules(parentRowId) {
    $(document).on("click", ".rule-tr td", function(event) {
       // this code blocks get executed multiple times 
    });

    $.ajax({
        type: "GET",
        url: anyURL,
        contentType: "application/json",
        dataType: "json"
    }).done(function(data) {
        // create row to add to parent table's row
        var s_rulesHtmlString = '<tr><td colspan="3" class="rules-parent-tr"><table><tbody>';
        $.each(data, function(i, name) {
        s_rulesHtmlString += '<tr class="rule-tr">';
        s_rulesHtmlString += '<td class="eventid-td">Rule ID:'+ name.RuleId+'<span>' + name.OccuredEventId + '</span></td>';
        s_rulesHtmlString += '<td>' + name.Name + '</td><td>' + name.RuleDate + '</td>';
        s_rulesHtmlString += '</tr>';
        });
        s_rulesHtmlString += '</tbody></table></td></tr>';
        // add row below parent tr
        $(parentRowId).parent().after(s_rulesHtmlString);       
    });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T07:31:02.820

我认为一个解决方案（也可以优化性能）是使用[delegate](http://learn.jquery.com/events/event-delegation/)。因此，您可以在父行（或表）上添加单个事件处理程序并根据`event.target`对象进行操作。

**更新：**此外，请注意选择器`$(".rule-tr")`将事件处理程序附加到具有不同 parent_id 的行，因此更好的解决方案可能是`$(parent_Id + " .rule-tr")`假设 parent_id 是表单中的字符串`"#parent_id"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T07:30:46.697

`<tr>`在 ajax 之后，仅将 on click 事件连接到最后一个

```
$(".rule-tr :last").on("click", "td", function(event) {
            // this code blocks get executed multiple times
        }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-28T01:02:47.917

也许您可以尝试避免重复绑定单击事件

```
$(".rule-tr").unbind();
$(".rule-tr").on("click", "td", function(event) {
            // this code blocks get executed multiple times
        }); 
```**

# excel-2010 - excel 2010中不同列中的小时和时间值的总和

> ID：16053916
> 
> 赞同：0
> 
> 时间：2013-04-17T07:18:16.087
> 
> 标签：excel-2010

我有一个 Excel 文件，其中包含两个小时和分钟的列，例如：

```
hr |min
---+---
 7 |  2
10 | 16
 9 | 12 
```

我希望它在附加列中呈现为

```
07:02
10:16
09:12 
```

如何在 Excel 2010 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:34:38.530

```
 A         B      C
1   hr       min  hr:min
2   1          2
3   2         12
4   3         15
5   10        45 
```

单击单元格 C2 并将以下公式放在公式栏中并将其拖动到其他行。

```
=CONCATENATE(CONCATENATE(IF(A2 >9, A2, CONCATENATE("0",A2)),":"),CONCATENATE(IF(B2 >9, B2, CONCATENATE("0",B2)))) 
```

要获得 hr:min 列的总和，请单击要显示总计的单元格，然后在公式栏中输入以下公式。

```
=CONCATENATE(CONCATENATE((SUM(A2:A5) + INT(SUM(B2:B5)/60)),":"),MOD(SUM(B2:B5),60)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:35:10.027

干得好

```
=SUM(TIME(A2,B2,0)) 
```

# assembly - 将 xmm3 中的四个浮点数转换为内存中的四个整数

> ID：16053921
> 
> 赞同：0
> 
> 时间：2013-04-17T07:18:21.040
> 
> 标签：assembly, x86, sse, sse2

我是sse的新手，我很难找到它，请告诉我将xmm3寄存器中的四个打包浮点数转换（截断为“（int）float_”）的好方法是什么，并将其存储到内存（有些像“movaps oword [edx+32], xmm3”存储很清楚，但我不知道如何转换）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:08:36.423

如果您重视自己的理智（和空闲时间），请使用内在函数：

```
int32_t *dest;
__m128 vf = _mm_set_ps(4.0f, 3.0f, 2.0f, 1.0f);
__m128i vi = _mm_cvttps_epi32(vf); // 4 x float -> 4 x int (with truncation)
_mm_store_epi32(dest, vi); // NB: use _mm_storeu_epi32 if `dest` not aligned 
```

如果由于某种原因必须使用 asm，则对应的指令`_mm_cvttps_epi32`是`cvttps2dq`.

# magento - 从多个数量框获取输入的数量框值到magento中的购物车页面

> ID：16053945
> 
> 赞同：0
> 
> 时间：2013-04-17T07:19:12.127
> 
> 标签：magento

我是 Magento 的新手。我在产品详细信息页面中使用 foreach 以表格格式显示属性。我面临的问题是，当我在任何数量框中输入值时，它会将最后一个数量值带到购物车页面，因为我使用 foreach 循环来显示数量框。我需要显示我在数量框。代码：

```
 <table border="1" style="width:100%;">
            <thead>
                <tr>
                    <th>Fabric</th>
                    <th>Color</th>
                    <th>Required Qty</th>
                    <th>Total Cost</th>
                    <th>Cart</th>
                </tr>
            </thead>
            <?php

$attribute = Mage::getModel('eav/config')->getAttribute('catalog_product', 'fabric');
$buttonTitle = $this->__('Add to Cart');
$i=0;foreach ( $attribute->getSource()->getAllOptions(true, true) as $option){
    $i++;
if($i==1) continue;
?>

            <tbody>

                <tr>
                    <td>
                        <?php echo $attributeArray[$option['value']] = $option['label'];
?>
                    </td>
                    <td>
                        <select name="color" id="color">
                            <option>Select Color</option>
                        <?php 
                        $color = Mage::getModel('eav/config')->getAttribute('catalog_product', 'fabric_color');
$j=0;foreach ( $color->getSource()->getAllOptions(true, true) as $option_color){
    $j++;
    if($j==1) continue;?>
  <option value="<?php echo $option_color['value'];?>" price="<?php echo $option_color['price'];?>"><?php echo $option_color['label'];?></option>

<? }
                        ?>
                            </select>
                    </td>
                    <td>

                        <?php if($_product->isSaleable()): ?>
                        <div class="add-to-cart">
                            <?php if(!$_product->isGrouped()): ?>
                            <label for="qty"><?php echo $this->__('Qty:') ?></label>
                            <div class="qty_pan">
                                <input type="text" name="qty" id="qty<?=$i;?>" maxlength="12" value="1" title="<?php echo $this->__('Qty') ?>" class="input-text qty" />
                            </div>
                            <?php endif; ?>
                        </div>    
                        <?php endif; ?>

                    </td>
                    <td ><span class="qty<?=$i;?>" id=""><?php echo $_product->getPrice();?></span></td>
                    <td>
                        <button type="button" title="<?php echo $buttonTitle ?>" class="button btn-cart" onclick="productAddToCartForm.submit(this)"><span><span><?php echo $buttonTitle ?></span></span></button>
<!--                        <span id='ajax_loader' style='display:none'><img src='<?php echo $this->getSkinUrl('images/opc-ajax-loader.gif')?>'/></span>-->

        <?php //echo $this->getChildHtml('', true, true) ?>

                    </td>
                </tr>

            </tbody>

<?php }?>
        </table> 
```

截图： [https ://imageshack.us/scaled/large/12/detailpage.png](https://imageshack.us/scaled/large/12/detailpage.png)

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T12:09:25.620

我得到了解决方案。

我们可以使用查询字符串来获取数量值到购物车。

Yourdomain.com/checkout/cart/add?product=getId();?>&qty=1

您可以在 href 中使用上述查询字符串。

希望这可以帮助。

# c - 从 USB 读取作为一个端口

> ID：16053946
> 
> 赞同：0
> 
> 时间：2013-04-17T07:19:12.213
> 
> 标签：c, bluetooth, serial-port, usb

我是嵌入式世界的初学者，因为作为一名软件工程师，我总是处于“线的另一端”，所以请不要因为一个看起来很愚蠢的问题而把我钉在十字架上。

当我使用连接到计算机的蓝牙设备时，它通常显示为虚拟 COM 端口，我使用 winapi 连接并读取数据。现在，我们的嵌入式工程师向我展示了一个设备，它通过 USB 电缆发送相同的数据，它也作为我系统中的虚拟端口呈现，我读取相同（意思是，对我来说它是完全透明的）。

现在我想知道，在使用 USB 连接的任何其他设备中，我不认为该设备是一个 comport（如鼠标或键盘），但信息已发送。为什么在这种情况下需要一个comport，还有哪些其他可用的阅读选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:50:03.190

您应该阅读一些[基本的 USB 信息](http://en.wikipedia.org/wiki/Universal_Serial_Bus)。

您注意到的区别是因为 USB 支持称为[“设备类”](http://en.wikipedia.org/wiki/Universal_Serial_Bus#Device_classes)的东西，它基本上控制计算机（主机）如何查看设备。

例如，其中一类是[“USB 通信设备”](http://en.wikipedia.org/wiki/USB_communications_device_class)，它经常成为虚拟 COM 端口。

另一种是非常常见的[“USB 大容量存储设备”](http://en.wikipedia.org/wiki/USB_mass-storage_device_class)，例如闪存驱动器所使用的。

第三种是你提到的鼠标和键盘，它被称为[“USB人机接口设备”](http://en.wikipedia.org/wiki/USB_human_interface_device_class)。

特定设备第一次连接到总线时会传达它使用的类，以便主机可以加载正确的驱动程序。您不能神奇地强制设备切换类，该类通常是设备实现的“硬”（不可修改）部分，由设备的设计者选择。

# excel - Outlook Vba 代码给出错误 1004

> ID：16053948
> 
> 赞同：1
> 
> 时间：2013-04-17T07:19:25.347
> 
> 标签：excel, vba

```
Set wks = wkb.Worksheets("Calendar") 'active worksheet
    wks.Cells(NextRow, 1) = ComboBox1.Value 
```

我有这两行代码。在这里，它给了我一个`error number 1004`何时将组合框的值分配给工作表（wks）的第一个单元格的时间。让我知道一些解决方案....

提前谢谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:29:30.387

运行时错误 1004 通常意味着您指的是工作簿中不存在的对象。

与您的情况一样， `wks.Cells(NextRow, 1) = ComboBox1.Value` 检查变量 NextRow 的值并确保其大于 0 以避免该问题。

还要检查 wks 工作簿是有效的工作簿对象。

![在此处输入图像描述](https://i.stack.imgur.com/iLm96.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:23:42.063

如果以下任一条件为真，则可能会出现此问题：

*   Microsoft Visual Basic for Applications (VBA) 宏在 Excel 2003 工作簿中复制并粘贴一整行。
*   Microsoft VBA 宏在 Excel 2003 工作簿中复制并粘贴 2,516 行或更多行。

运行时错误 1004 表示：

```
Runtime error 1004: Paste method of worksheet class failed.
Runtime error 1004: Copy method of Range Class Failed. 
```

参考： http: [//support.microsoft.com/kb/905164](http://support.microsoft.com/kb/905164)

# c# - 重置固定宽度的二维锯齿状数组的快速方法

> ID：16053962
> 
> 赞同：-1
> 
> 时间：2013-04-17T07:20:08.650
> 
> 标签：c#, init, jagged-arrays

我想创建一个二维锯齿状数组（如前所述，答案声称在点网上比多维数组更快）。

我想做类似的事情

```
Int [][] myarr = new int [2][3]; 
```

但`C#`似乎不支持这一点，所以我确实使用了 for 循环进行二维实例化。然而，如果我想快速重置，我不能使用 memset 等效项，因为循环中的每个新元素都会在可能不同且不连续的位置启动数组。

是否有更快的方法来初始化和重置固定宽度的锯齿状数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:27:49.290

您可以使用 LINQ 和`Enumerable.Range`方法，但在内部仍然执行了一个循环：

```
int[][] myarr = Enumerable.Range(0, 2).Select(x => new int[3]).ToArray(); 
```

# android - java.text.ParseException：无法解析的日期：2013 年 4 月 8 日星期一 00:00:00 IST

> ID：16053964
> 
> 赞同：1
> 
> 时间：2013-04-17T07:20:22.050
> 
> 标签：android, date, parseexception

我正在尝试使用 4.2.2 上的 Android 版本解析日期并在 2.2 的模拟器上运行，它抛出异常。请帮忙！！这是我的代码

```
String date = "Mon Apr 08 00:00:00 IST 2013";
DateFormat parserSDF = new SimpleDateFormat("EEE MMM dd HH:mm:ss zzz yyyy",Locale.getDefault());
parserSDF.setTimeZone(TimeZone.getTimeZone("IST"));
Calendar calendarEvent = Calendar.getInstance();
Date dateStr = null;
try {
    dateStr = parserSDF.parse(date);
    calendarEvent.setTime(dateStr);
} catch (Exception e) {
    e.printStackTrace();
}
System.out.println("d>>"+calendarEvent.getTime()); 
```

# 堆栈跟踪

```
04-17 13:01:42.658: W/System.err(1088): java.text.ParseException: Unparseable date: Mon Apr 08 00:00:00 IST 2013
04-17 13:01:42.667: W/System.err(1088):     at java.text.DateFormat.parse(DateFormat.java:645)
04-17 13:01:42.667: W/System.err(1088):     at com.example.datetest.MainActivity.onCreate(MainActivity.java:26)
04-17 13:01:42.667: W/System.err(1088):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-17 13:01:42.667: W/System.err(1088):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
04-17 13:01:42.667: W/System.err(1088):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-17 13:01:42.667: W/System.err(1088):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-17 13:01:42.667: W/System.err(1088):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-17 13:01:42.667: W/System.err(1088):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-17 13:01:42.667: W/System.err(1088):     at android.os.Looper.loop(Looper.java:123)
04-17 13:01:42.667: W/System.err(1088):     at android.app.ActivityThread.main(ActivityThread.java:4627)
04-17 13:01:42.667: W/System.err(1088):     at java.lang.reflect.Method.invokeNative(Native Method)
04-17 13:01:42.678: W/System.err(1088):     at java.lang.reflect.Method.invoke(Method.java:521)
04-17 13:01:42.678: W/System.err(1088):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-17 13:01:42.678: W/System.err(1088):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-17 13:01:42.678: W/System.err(1088):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:25:12.650

我认为你的格式应该是这样的：

```
"EEE MMM dd HH:mm:ss z yyyy" 
```

因为您的时区不是全文。

# python - 如何在python中将字典项转换为平面字符串

> ID：16053968
> 
> 赞同：0
> 
> 时间：2013-04-17T07:20:32.027
> 
> 标签：python, list, dictionary

我有我从中生成这样的 URL 的项目字典

`request.build_absolute_uri("/myurl/" + urlencode(myparams))`

我得到的输出是这样的

`number=['543543']&region=['5,36,37']`

但我希望网址是

`number=543543&region=5,36,37`

所有这些项目都在`myparams dictionary`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:28:12.197

您可能会发现，为了易于使用，传递`doseq=True`将很有用（尽管不完全是您想要的 - 但确实意味着任何 url 解析库都应该能够在没有自定义编码的情况下处理输入......）

```
>>> from urllib import urlencode
>>> a = range(3)
>>> urlencode({'test': a})
'test=%5B0%2C+1%2C+2%5D'
>>> urlencode({'test': a}, True)
'test=0&test=1&test=2' 
```

否则，您必须编写自定义代码以`','.join(str(el) for el in your_list)`获取`myparams`列表/类似的值...（然后`.split(',')`是另一端）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:23:30.583

看起来`myparams`是 a`dict`具有`list`s 作为值。

```
new_params = dict(k, v[0] for k, v in dict.iteritems()) 
```

将构建一个新的字典。

# android - 在活动底部显示 ListView

> ID：16053973
> 
> 赞同：0
> 
> 时间：2013-04-17T07:20:49.427
> 
> 标签：android, listview

我是在 Android 上开发的新手，所以请耐心等待。我有一个活动显示今天日期的一些天气数据，我想在活动底部列出未来 7 天的更多天气数据，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/3cGHc.png)

但是，我对实现这一目标的最佳方法感到困惑。我正在考虑使用 ListView，但我对如何使用它们感到困惑。根据我收集到的信息，我需要在其中创建一个 ListView 布局，`res/layout`然后在我的主要活动上使用一个片段，它的布局设置为我刚刚制作的 ListView 布局。那是对的吗？或者更简单的解决方案是将 ListView 放在我的主要活动的底部？

或者，我是否使用了完全错误的控件来完成我想要做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:29:54.323

您可以通过以下代码轻松制作此布局：

```
<Relativelayout...>

    <EditText android="@+id/edit1"
      android:alignParentTop="true"
      ... />

    <LinearLayout android:id="@+id/YOUR_MIDDLE_DATA"
      android:above="@+id/listview1"
      android:below="@+id/edit1" ...>
      ...
      ...
    </Linearlayout>

    <Listview android:id="@+id/listview1"
      android:above="@+id/txt1"
      ... />

    <Textview android:id="@+id/txt1"
      ...
      android:alignParentBottom="true" />
</RelativeLayout> 
```

您也可以使用重量进行自定义。

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:36:29.767

以下面的 XML 为例。在这个（来自我的应用程序的实际 XML）中，我在.`EditText`上方有一个较小的`ListView`，但您可以将其更改为您需要的其他内容。这实质上说明的是，您可以`ListView`在顶部或底部拥有 a 以及其他一些内容。`ListView`（我已经删除了 Admob 代码）

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="1"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/phone_thing_comment_bg"
        android:gravity="center"
        android:paddingBottom="5dp"
        android:paddingLeft="9dp"
        android:paddingRight="9dp"
        android:paddingTop="5dp" >

        <EditText
            android:id="@+id/editFilterList"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_margin="4dp"
            android:background="@drawable/phone_thing_comment_box"
            android:drawableLeft="@drawable/filter_search_icon"
            android:drawablePadding="5dp"
            android:hint="Type Friends Name"
            android:inputType="text"
            android:maxLines="1"
            android:textColor="#ff333333"
            android:textColorHint="#ff78797d"
            android:textCursorDrawable="@null" >
        </EditText>
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <ListView
            android:id="@+id/list"
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:layout_weight="1"
            android:cacheColorHint="@android:color/transparent"
            android:divider="#000000"
            android:dividerHeight="0dp"
            android:fadingEdge="none"
            android:persistentDrawingCache="scrolling"
            android:scrollbars="none" >
        </ListView>

        <TextView
            android:id="@android:id/empty"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="center"
            android:padding="10dp"
            android:text="@string/no_friends"
            android:textColor="#f1f1f1"
            android:textSize="15sp"
            android:textStyle="bold"
            android:visibility="gone" >
        </TextView>
    </LinearLayout>
</LinearLayout> 
```

使用这种方法的*优点*是它`ListView`会像它应该的那样滚动，但`Widgets`上面它总是静止的。使用这种方法的*缺点*是在屏幕较小的设备上，*可能没有足够的空间*来`ListView`显示内容，用户可能需要滚动很多。

或者，您可以将`Widgets`上述. 这使得上面的内容随着内容一起移动。`ListView``ListView``Header``ListView``ListView`

因此，这段代码进入了一个不同的 XML，它将作为标头添加到您的 Java 代码中：

```
 <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/phone_thing_comment_bg"
        android:gravity="center"
        android:paddingBottom="5dp"
        android:paddingLeft="9dp"
        android:paddingRight="9dp"
        android:paddingTop="5dp" >

        <EditText
            android:id="@+id/editFilterList"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_margin="4dp"
            android:background="@drawable/phone_thing_comment_box"
            android:drawableLeft="@drawable/filter_search_icon"
            android:drawablePadding="5dp"
            android:hint="Type Friends Name"
            android:inputType="text"
            android:maxLines="1"
            android:textColor="#ff333333"
            android:textColorHint="#ff78797d"
            android:textCursorDrawable="@null" >
        </EditText>
    </LinearLayout> 
```

利弊与前面的例子几乎相反。

无论在 a`Fragment`或 an中使用，这两种方法都将起作用`Activity`。

# android - 如何避免频繁的位置更新？

> ID：16053977
> 
> 赞同：5
> 
> 时间：2013-04-17T07:21:04.423
> 
> 标签：android, gps

我是安卓新手。我想每隔 3 分钟获取一次 GPS 位置，但我每秒都会获取一次位置更新。

我怎样才能避免这种情况？

请提出一些建议。我正在使用以下代码：

```
captureFrequencey=3*60*1000;    
LocationMngr.requestLocationUpdates(
    LocationManager.GPS_PROVIDER, captureFrequencey, 0, this); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T07:27:45.913

```
LocationMngr.requestLocationUpdates(LocationManager.GPS_PROVIDER, captureFrequencey, 0, this); 
```

那是因为您将最小距离设置为 0。将其更改为 100 米并检查！

```
LocationMngr.requestLocationUpdates(LocationManager.GPS_PROVIDER, captureFrequencey, 100, this); 
```

请参阅[文档](http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28java.lang.String,%20long,%20float,%20android.location.LocationListener%29)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T07:58:29.693

Lazy Ninja 已经为您提供了解决方案。
但是您应该明白，当您调用请求位置更新时，它会检查条件 min time 和 min dist，如果有人为真，它会捕获位置。在您的代码中

```
LocationMngr.requestLocationUpdates(LocationManager.GPS_PROVIDER, 
                                                captureFrequencey, 0, this); 
```

你提到 0 作为最小距离，这个条件一直都是真的。因此，您会收到频繁的位置更新。
希望这些信息对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T07:28:43.843

[请参阅文档](http://developer.android.com/guide/topics/location/strategies.html#BestEstimate)中的位置策略

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T08:51:19.950

只需快速添加到所提供的正确答案...设置更新时间和距离在所有设备上都不会完全相同。

这些参数被视为位置提供者的“提示”。

因此，虽然这是一种很好的做法，但某些设备可能并不总是遵循这些确切的值。

# javascript - 使用跨多个用户的共享数据编写高效的 BackboneJS 应用程序

> ID：16053991
> 
> 赞同：0
> 
> 时间：2013-04-17T07:22:22.983
> 
> 标签：javascript, ajax, backbone.js

我目前正在创建我的第一个 BackboneJS 应用程序，很明显每次打开索引视图时，用户都需要查看来自服务器的最新数据。

我能想到的最佳方法是在服务器上更新数据时向在多个用户计算机上运行的 Backbone 应用程序发送推送通知。但是，在我继续使用该解决方案之前，是否有更好的选择？

我目前有每次查看时从服务器获取集合的视图。

# ruby-on-rails-3.2 - 找不到 EntryLevelsController 的“显示”操作？

> ID：16053996
> 
> 赞同：0
> 
> 时间：2013-04-17T07:22:27.240
> 
> 标签：ruby-on-rails-3.2, routes

我面临一个奇怪的错误“AbstractController::ActionNotFound（EntryLevelsController 找不到动作'show'）”我没有定义'show'动作，因为我不需要它。相反，我在资源 entry_levels 的集合中定义了自定义路由，如下所示：

```
resources :entry_levels do
  collection do
    get 'create_entry_level'
    post 'create_entry_level'
    get 'edit_entry_levell'
    post 'edit_entry_level'
    get 'update_entry_level'
    post 'update_entry_level'
    get 'delete_entry_level'
    post 'delete_entry_level'
    get 'entry_level_cancel'
    post 'entry_level_cancel'
    get 'change_priority'
    post 'create_entry_level'
  end
end 
```

奇怪的是，rails 为 index、show、create、delete、update 和 edit 操作生成 url，就好像我在我的 routes.rb 文件中的某处定义了一个“资源：entry_levels”，但事实并非如此。我不知道为什么有关显示操作的错误不断弹出。

我的 rake 路线如下所示：

```
create_entry_level_entry_levels GET    /entry_levels/create_entry_level                                                              entry_levels#create_entry_level
                                                         POST   /entry_levels/create_entry_level                                                         entry_levels#create_entry_level
                      edit_entry_levell_entry_levels GET    /entry_levels/edit_entry_levell                                                           entry_levels#edit_entry_levell
                       edit_entry_level_entry_levels POST   /entry_levels/edit_entry_level                                                            entry_levels#edit_entry_level
                     update_entry_level_entry_levels GET    /entry_levels/update_entry_level                                                          entry_levels#update_entry_level
                                                         POST   /entry_levels/update_entry_level                                                          entry_levels#update_entry_level
                     delete_entry_level_entry_levels GET    /entry_levels/delete_entry_level                                                         entry_levels#delete_entry_level
                                                         POST   /entry_levels/delete_entry_level                                                          entry_levels#delete_entry_level
                     entry_level_cancel_entry_levels GET    /entry_levels/entry_level_cancel                                                         entry_levels#entry_level_cancel
                                                         POST   /entry_levels/entry_level_cancel                                                        entry_levels#entry_level_cancel
                          change_priority_entry_levels GET    /entry_levels/change_priority                                                              entry_levels#change_priority
                                                         POST   /entry_levels/create_entry_level                                                          entry_levels#create_entry_level
                                          entry_levels GET    /entry_levels                                                                              entry_levels#index
                                                         POST   /entry_levels                                                                              entry_levels#create
                                       new_entry_level GET    /entry_levels/new                                                                          entry_levels#new
                                      edit_entry_level GET    /entry_levels/:id/edit                                                                     entry_levels#edit
                                           entry_level GET    /entry_levels/:id                                                                           entry_levels#show
                                                         PUT    /entry_levels/:id                                                                           entry_levels#update
                                                         DELETE /entry_levels/:id                                                                          entry_levels#destroy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:56:39.100

你的设置有点不典型。这里有一些提示。

```
resources :entry_levels do
  # restful actions are automatically included, that is 
  # :index, :show, :new, :create, :edit, :update and :destroy

  put 'change_priority', on: :member # see the generated route and helpers with `rake routes`. A PUT request states that you are updating an existing resource.
end 
```

很高兴知道您可以通过运行来检查您的设置生成了哪些路由[**`$ rake routes`**](http://guides.rubyonrails.org/routing.html#seeing-existing-routes-with-rake)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-13T14:16:06.357

我知道这是旧的，但它出现在我的搜索中，所以我想添加可能的答案。

当我有一个没有相应获取的帖子时，我会收到该错误。发生这种情况时，我要么将帖子定义为 get（如果它以这种方式工作），要么我在 routes.rb 中创建一个匹配条目，以在帖子作为 get 进入时将用户发送到根页面（例如，如果用户已注销）：

```
 match "entry_levels/create_entry_level" => "home#index", via: :get 
```

但是，在这种情况下，问题似乎是您将 create_entry_level 定义为帖子两次。从来没有这样做过，但可能会搞砸你。您忘记将 create_entry_level 更改为“change_priority”。