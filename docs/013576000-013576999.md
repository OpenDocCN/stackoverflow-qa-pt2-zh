# StackOverflow 问答 13576000-13576999

# c# - ItemCommand 中的Repeater 突出显示项

> ID：13576004
> 
> 赞同：0
> 
> 时间：2012-11-27T01:19:46.530
> 
> 标签：c#, .net, repeater

我有一个中继器，在其中我将一些用户控件与面板绑定。面板有一个`OnClick`事件并引发一个`ItemCommand`. 我知道它`DataItem`不会在整个回发过程中持续存在，因此在事件期间它将为空`ItemCommand`，我的要求是在单击特定用户控件时更改它的颜色（不使用 Javascript）。有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T05:02:10.347

您可以尝试在 itemDataBound 事件中更改特定用户控件 onClick 的类名，如下所示

```
protected void DataList1_ItemDataBound(object sender, 
                             DataListItemEventArgs e) 
{
     if (e.Item.ItemType == ListItemType.Item || 
         e.Item.ItemType == ListItemType.AlternatingItem)
     { 
         //Add eventhandlers for highlighting 
         //a DataListItem when the mouse hovers over it.
         e.Item.Attributes.Add("onmouseover", 
                "this.oldClass = this.className;" + 
                " this.className = 'EntryLineHover'"); 
         e.Item.Attributes.Add("onmouseout", 
                "this.className = this.oldClass;");
         //Add eventhandler for simulating 
         //a click on the 'SelectButton'
         e.Item.Attributes.Add("onclick", 
                this.Page.ClientScript.GetPostBackEventReference(
                e.Item.Controls[1], string.Empty));
     }
} 
```

# php - 在两种模式之一之前返回文本

> ID：13576005
> 
> 赞同：0
> 
> 时间：2012-11-27T01:19:53.130
> 
> 标签：php, regex

我有以下两个字符串：

```
$str='http://website.com/abc/?var=abc';
$str='http://website.com/abc/?xvar=123&var=xyz'; 
```

我想使用 PHP 将 $str 更改为 "?var=" 或 "&var=" 之前的所有内容。

例如，给定两个示例， $str 将转换为：

```
$str='http://website.com/abc/';
$str='http://website.com/abc/?abc=123'; 
```

谢谢

测试了以下解决方案：

```
<?php
    $str='http://website.com';
    echo('string-'.$str.'<br>');
    echo('opt1-'.opt1($str).'<br>');
    echo('opt2-'.opt2($str).'<br>');
    $str='http://website.com/';
    echo('string-'.$str.'<br>');
    echo('opt1-'.opt1($str).'<br>');
    echo('opt2-'.opt2($str).'<br>');
    $str='http://website.com/abc';
    echo('string-'.$str.'<br>');
    echo('opt1-'.opt1($str).'<br>');
    echo('opt2-'.opt2($str).'<br>');
    $str='http://website.com/abc/';
    echo('string-'.$str.'<br>');
    echo('opt1-'.opt1($str).'<br>');
    echo('opt2-'.opt2($str).'<br>');
    $str='http://website.com/abc/?var=abc';
    echo('string-'.$str.'<br>');
    echo('opt1-'.opt1($str).'<br>');
    echo('opt2-'.opt2($str).'<br>');
    $str='http://website.com/abc/?xvar=123&var=xyz';
    echo('string-'.$str.'<br>');
    echo('opt1-'.opt1($str).'<br>');
    echo('opt2-'.opt2($str).'<br>');

function opt1($str) {
    return preg_replace('/[?&]var=.*$/', '', $str);
}
function opt2($str) {
    preg_match('/(.*)[\?\&]var=/',$str2,$m);
    return $m[1];
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T01:25:51.833

假设您`$str='http://website.com/abc/?xvar=123';`在第二个示例中的意思是，这应该有效：

```
preg_match('/(.*)[\?\&]var=/',$str2,$m);
echo $m[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T01:25:54.753

您可以使用[strstr](http://php.net/manual/en/function.strstr.php)`?var`并检索 , 之前的字符串

```
$str = strstr($str, "?var=", true);
echo str; //outputs - http://website.com/abc/
//Similarly for the other needle
$str = strstr($str, "&var=", true);
echo $str; //outputs - http://website.com/abc/?abc=123 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T01:26:29.590

```
$str = preg_replace('/[?&]var=.*$/', '', $str); 
```

# c++ - Open GL 和旋转的奇怪问题。有没有人见过这个？

> ID：13576011
> 
> 赞同：0
> 
> 时间：2012-11-27T01:20:46.013
> 
> 标签：c++, opengl, quaternions

所以我在问这个问题之前就来过这里，但到目前为止没有人能够回答我的问题。所以我制作了一个视频来演示这个问题。

到目前为止，我已经检查并重新检查了我的数学文件，我的两位大学教授也是如此，我检查了我的着色器，我只是使用了一个简单的通过着色器。

我已经创建了一个关于问题发生的视频，我将描述一些我的过程。

我已将旋转的初始值设置为，这将其推到出现问题的地步。

```
rotX = 0.0f;
rotY = -22.0f;
rotZ = -62.0f; 
```

这些值确保我不必在运行时旋转对象，这些值是问题发生的地方。正如您在视频中看到的那样，奶牛将开始旋转，而代码中没有任何地方实际告诉它这样做。我将旋转矩阵和旋转值输出到我的日志文件中，它们都是正常的。

[http://www.youtube.com/watch?v=LB7_zftalT8](http://www.youtube.com/watch?v=LB7_zftalT8)

所以我从来没有在任何地方见过这个。如果有人看到过这样的事情，请告诉我。我没有发布任何代码，因为有很多可能的问题，但是我可以按需提供代码片段，或者提供对我的源 svn 的访问。

我已经花了三周时间调试这个问题，我至少有 10 组其他眼睛在看这个问题并审查我的代码。

我无法解决的唯一问题是内存损坏，我希望你有更好的运气。

编辑：

代码示例： http: [//pastebin.com/hRSvEYAZ](http://pastebin.com/hRSvEYAZ)

我使用四元数进行旋转，我用轴角创建它们。然后我将多个旋转组合在一起并创建我的 4x4。

编辑：

我试过 MadCoreTom 提供的答案，没有帮助，我也继续查看内存，我看不到任何问题。

编辑：

所以我已经从我的四元数中删除了归一化调用，现在我只在从轴角度创建四元数时对轴进行归一化。我还为我的四元数重写了 toMatrix3，看看是否有帮助，但没有。

我还将更新旋转移动到我的按键内部，我也打算尽快提供更多代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:02:20.690

期间的舍入误差可能`.normalize()`会导致值略有变化，并且这种情况会不断增加，直到奶牛发疯。

您可以尝试以下方法，并在更新方法中使用`rx`代替：`rotationX`

`rx = rotationX.normalized();`

而不是每次循环时都修改值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:54:50.020

好吧，所以我解决了我的问题。存在掩盖实际问题的浮点错误。

所以一旦我解决了这个问题，虽然没有使用 MadcoreTom 提供的方法。我最终做的只是对轴进行归一化，而不是在旋转过程中对我的四元数进行归一化。

真正的问题是我正在存储我的角度并积累它，这是导致问题的原因。

现在我只是传入旋转的变化，从轴/角度变化创建我的四元数，然后将它乘以我的四元数F。

# mysql - 无法启动 Ruby（机架）应用程序 - mysql 库错误

> ID：13576013
> 
> 赞同：2
> 
> 时间：2012-11-27T01:20:50.093
> 
> 标签：mysql, ruby-on-rails-3

Bluehost 刚刚升级了他们的 MySql 版本并破坏了我的应用程序。我现在得到“Ruby（Rack）应用程序无法启动”和这个特定的文件加载错误：

```
libmysqlclient_r.so.16: cannot open shared object file: No such file or directory - /home4/mychairs/ruby/gems/gems/mysql2-0.3.11/lib/mysql2/mysql2.so 
```

注意超长的基于根的路径。跑步

```
bundle install 
```

通过 SSH 然后

```
bundle show mysql2 
```

我被告知我正在使用这个库：

```
/home4/mychairs/ruby/gems/gems/mysql2-0.3.11 
```

我不知道异常路径是在哪里生成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T03:14:51.737

手动删除 mysql gem 并通过“bundle install”重新安装。Bundler 不知道底层的 MySQL 库已经改变，它只知道 gem 在那里。

# javascript - jQuery .click 命令顺序

> ID：13576014
> 
> 赞同：1
> 
> 时间：2012-11-27T01:20:52.143
> 
> 标签：javascript, jquery, click

这是一个非常简单的问题/问题，我可以轻松解决它，但由于我正在学习 javascript，我非常渴望知道为什么会发生这个特定问题。

```
$("#go").click(function() {
    $("p").append(array[x] + " ")
    functionlist[array[x]]()
    x++
})​ 
```

这不像我期望的那样工作。我希望它写入数组的当前内容，执行与某个函数名称相关联的简单动画，然后递增 x。一切正常，除了它不增加 x。

如果我这样做：

```
$("#go").click(function() {
    $("p").append(array[x] + " ")
    //functionlist[array[x]]()
    x++
})​ 
```

x 成功递增。

所以我的问题是，为什么会发生这种情况？

这是我正在使用的 jsfiddle 的链接：http: [//jsfiddle.net/mxy6N/3/](http://jsfiddle.net/mxy6N/3/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T01:27:16.357

好吧，如果你检查你的脚本控制台（F12 是大多数浏览器），你会看到`functionlist[array[x]]()`抛出一个类似的错误：

> 对象没有方法“接吻”

这是因为`array[x]`等于“smooch”，并且`functionlist["smooch"]`是未定义的，所以它在进入你的`x++`.

这段代码中发生的其他事情：

*   x 在函数内部声明，因此在使用时它始终为 0。
*   即使它是在你的函数之外声明的，当你增加它时，它也会用完在你的数组中查看的项目。您需要在这里使用一个或两个模运算符。
*   您没有引用具有 $.fn.transition 定义的 .js 文件，因此您的转换调用也会出错。
*   `flip`并且`flop`两者都具有相同的`rotateY`值，所以一旦它“翻转”它就不会“翻转”

这可能会做你想做的事情：http: [//jsfiddle.net/g5mJd/3/](http://jsfiddle.net/g5mJd/3/)

和更新的代码：

```
var array = ["smooch", "jab", "flip"];
var move = "flip";
var x = 0;
var functionlist = {
    flip: function() {
        $("#block").transition({
            perspective: '0px',
            rotateY: '180deg'
        }, 1000);
    },
    flop: function() {
        $("#block").transition({
            perspective: '0px',
            rotateY: '0deg'
        }, 100);
    }
};

$("#go").click(function() {
    var functionName = (x % 2 == 0) ? 'flip' : 'flop';
    var fn = functionlist[functionName];
    if($.isFunction(fn)) {
        fn();
    }
    var say = array[x % array.length];
    $('p').append(say + ' ');
    x++;
})​; 
```

编辑：用`$.isFunction()`检查更新。

# air - 发布到 AIR Captive Runtime 只会创建 .tmp 文件夹

> ID：13576023
> 
> 赞同：0
> 
> 时间：2012-11-27T01:22:10.283
> 
> 标签：air, runtime, flash-cs6

尝试使用最新的 AIR 3.5 SDK 创建 AIR Captive Runtime 时反复出现问题。

从 Flash CS6 在 Windows 7 中发布。

大多数时候 AIR 只会创建一个 .tmp 文件夹而不是一个 .app 文件夹

.tmp 文件夹中的 .exe 有时可以工作，有时会在启动时显示错误消息，说明存在错误版本的 air。在其他时候，.tmp 文件夹完全是空的。

任何有任何想法或建议的人都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:07:43.810

再次遇到这个问题后，发现实际的解决方法是：

1) 编辑项目的 adobe air 应用程序描述符 xml 文件，确保未注释以下标记并包含扩展桌面配置文件：

<supportedProfiles>桌面扩展桌面</supportedProfiles>

2）清理你的项目

3）然后从 flexbuilder 导出发布版本并选择强制运行时选项。

下面列出的解决方案具有误导性（我实际上已经包含了上述步骤，但未将其包含在下面的描述中）。命令行执行是一条红鲱鱼。

我通过使用命令行请求并按照[本网站上](http://www.riaspace.com/2011/08/bundling-air-3-runtime-in-air-desktop-applications/)的说明解决了我的问题。

从我的机器上的 bin-release 临时文件夹执行命令行请求，我将以下内容修改为我的桌面设置：

```
c:\path\to\air3sdk\bin\adt.bat -package -storetype pkcs12 -keystore c:\path\to\certificate.p12 -target bundle myapp.exe myapp-app.xml -C . myapp.swf 
```

# java - 用鼠标绘图

> ID：13576024
> 
> 赞同：2
> 
> 时间：2012-11-27T01:22:27.573
> 
> 标签：java, swing, actionlistener, mousemove

嘿伙计们，我需要帮助我正在尝试制作一个可以用鼠标在窗口中绘制的程序。到目前为止，当我单击一个点时，我已经将它放在了出现的位置，但我需要添加一个拖动方法，以便当我在页面上拖动鼠标时它会绘制东西。有人可以查看我的代码并在可能的地方帮助我吗？

这是我的代码：

```
import javax.swing.*;
import java.awt.event.*;
public class mouse {
    private static int x,y;
    private static draw object = new draw ();
    public static void main(String[] args){
        JFrame frame = new JFrame ("Mouse");
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(400,400);
        frame.add(object);
        object.addMouseListener(new AL());
    }
    static class AL extends MouseAdapter{
      public void mousePressed(MouseEvent e){
        x = e.getX();
        y = e.getY();
        object.drawing(x, y);
      }
      public void mouseDragged( MouseEvent e) {
        x= e.getX();
        y= e.getY();
        object.drawing(x, y);
      }
    }
} 
```

和

```
import javax.swing.*;
import java.awt.*;

public class draw extends JPanel {
    private static int x,y;
    public void drawing (int xx, int yy){
        x=xx;
        y=yy;
        repaint();
    }

    public void paintComponent (Graphics g){
        g.setColor(Color.black);
        g.fillOval(x, y, 10, 10);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T03:36:31.703

我的一个想法是在单击鼠标时将鼠标坐标分别添加到单独的列表中并根据列表的大小进行绘制，但是由于您使用鼠标拖动，您可以只使用`Path2D.lineTo(x, y)`和使用x`e.getX()`和`e.getY()`y坐标。在此使用`Path2D.moveTo(x, y)`以确保为鼠标移动的每个像素附加线路径之后（这可以确保每个移动看起来不像一条直线，而是像一条线移动您“绘制”的任何方向）。另外，一些小贴士：

1.  void`mouseDragged`通常在使用时效果更好，`mouseMotionAdapter`因为根据我的经验，它通常不会在 just 中注册事件`mouseAdapter`。

2.  由于这是一个绘图程序，如果您确实打算将其扩展为更大的东西（例如：g.fillOval（x，y，brushSize，刷子大小））。

# ruby-on-rails - 数组仅保存 ruby on rails 中的最后一个值

> ID：13576025
> 
> 赞同：0
> 
> 时间：2012-11-27T01:22:31.457
> 
> 标签：ruby-on-rails, ruby, arrays, ruby-on-rails-3, nokogiri

我有一个循环输出我从网站上获取的信息。为了使信息以可读的方式显示，我将它插入到一个数组中，该数组将显示在我的视图页面上。但是，该数组不会存储所有检索到的值，而是仅保存附加到它的最后一个值。最后我只能得到插入要显示的数组的最后一个值。

我的控制器文件...

```
def home
  scrape()
end

private

def scrape 

require 'rubygems'
require 'nokogiri'
require 'open-uri'

time = Time.new
month = I18n.t("date.abbr_month_names")[time.month]
day = time.day 
@strings = []

#United States
cities = [
   "sfbay", "losangeles", "athensga", "phoenix", "santabarbara", "denver",
   "panamacity", "miami", "austin", "bakersfield", "keys", "newyork"
]

cities.map do |city|

#Search Terms
search_terms = ["mechanic", "car", "tech"]

search_terms.map do |term|

  escaped_term = CGI.escape(term)

  url = "http://#{city}.craigslist.org/search/jjj?query=#{escaped_term}&catAbb=jjj&
  srchType=A"

  doc = Nokogiri::HTML(open(url))

  doc.css(".row").map do |row|

      date = row.css(".itemdate").text

      a_tag = row.css("a")[0]

      text = a_tag.text

      link = a_tag[:href]

      @strings == []

      if date = "#{month} #{day}"
        @strings << "#{date} #{text} #{link}"
      end

  end

 end

end

end 
```

在视图 home.html.erb 文件中...

```
<%= raw(@strings.join('<br />')) %> 
```

因此，当我转到主页时，我只显示插入数组的最后一个值。出了什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:24:52.883

一方面，您为每个城市的每一行创建一个新数组。（但实际上不要；目前，分配是一个比较，==。）

对于另一个，您将日期设置为“#{month} #{day}”，而不是进行比较。

# image - QToolButton 带文字的图片

> ID：13576026
> 
> 赞同：1
> 
> 时间：2012-11-27T01:22:33.393
> 
> 标签：image, qt, button, pyqt, pyqt4

我有带有文字的图像`QToolbutton`。我想修复文本位置，因此无论图像的高度如何，它始终位于同一位置，例如此处的文本`"asd"`，`"peter"`并且位于不同的位置，并且我希望文本始终位于`"peter"`文本所在的位置

![在此处输入图像描述](../Images/2fd9dd1398f052d4fbf5dacdc0440e10.png)

# algorithm - 统一成本搜索项目 euler #81

> ID：13576029
> 
> 赞同：1
> 
> 时间：2012-11-27T01:22:51.880
> 
> 标签：algorithm, shortest-path, uniform

为了“启蒙”，我正在研究欧拉项目，而不仅仅是解决它们。我已经在 80x80 矩阵上使用动态程序解决了问题 81，但是当我尝试使用统一成本搜索来解决它时，我的程序消失在了永远的土地上。我只想知道这个问题是否可以使用统一成本搜索来解决？该问题可在[此链接](http://projecteuler.net/problem=81)中找到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T02:22:37.960

UCS 绝对有效。

```
from Queue import PriorityQueue
with open('matrix.txt') as f:
    data = map(lambda s: map(int, s.strip().split(',')), f.readlines())
seen = set()
pq = PriorityQueue()
pq.put((data[0][0], 0, 0))
while not pq.empty():
    (s, i, j) = pq.get()
    if (i, j) not in seen:
        seen.add((i, j))
        if i + 1 < len(data):    pq.put((s + data[i + 1][j], i + 1, j))
        if j + 1 < len(data[i]): pq.put((s + data[i][j + 1], i, j + 1))
        if i + 1 >= len(data) and j + 1 >= len(data): print s 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T05:01:49.287

这里（作为参考）是在 c++ 中使用[统一成本搜索](http://en.wikipedia.org/wiki/Uniform-cost_search)`-O2`的解决方案，在 i7 上编译只需不到一秒（没有优化需要 3 秒）：

```
#include <iostream>
#include <fstream>
#include <vector>
#include <set>
#include <algorithm>
using namespace std;
struct Node { 
    size_t i, j; int cost;
    Node(size_t i, size_t j, int cost) : i(i), j(j), cost(cost) {}
};
bool operator<(const Node& a, const Node& b) { return b.cost < a.cost; }
bool operator==(const Node& a, const Node& b) { return a.i == b.i && a.j == b.j; }

int main() {
    const size_t SIZE = 80;
    ifstream fis("matrix.txt");
    int matrix[SIZE][SIZE];
    char crap;
    for (size_t i = 0; i < SIZE; i++)
        for (size_t j = 0; j < SIZE; j++) {
            fis >> matrix[i][j];
            if (j < SIZE - 1) fis >> crap;
        }
    vector<Node> open;
    set<Node> closed;
    open.push_back(Node(0, 0, matrix[0][0]));
    make_heap(open.begin(), open.end());
    while (!open.empty()) {
        Node node = open.front();
        pop_heap(open.begin(), open.end()); open.pop_back();

        if (node.i == SIZE - 1 && node.j == SIZE - 1) {
            cout << "solution " << node.cost << endl;
            return 0;
        }
        closed.insert(node);
        Node children[] = { Node(node.i + 1, node.j, node.cost + matrix[node.i + 1][node.j]),
                            Node(node.i, node.j + 1, node.cost + matrix[node.i][node.j + 1]) };
        for (int k = 0; k < 2; k++) { 
            Node child = children[k];
            if (!closed.count(child)) {
                vector<Node>::iterator elem = find(open.begin(), open.end(), child);
                if (elem == open.end()) { 
                    open.push_back(child); push_heap(open.begin(), open.end());
                } else if (child.cost < (*elem).cost) {
                    (*elem).cost = child.cost;
                    make_heap(open.begin(), open.end());
                }
            }
        }
    }
} 
```

这个解决方案会有点慢，因为它需要`make_heap`在打开的节点列表中替换元素，这会重建向量中的堆，但不应该永远落地，并证明可以使用 UCS 解决问题。一个建议是使用 Project Euler 问题陈述中给出的基本案例来调试您的解决方案。

# c++ - 赋值重载：为什么使用同一个对象会导致程序出现问题？

> ID：13576031
> 
> 赞同：0
> 
> 时间：2012-11-27T01:23:05.147
> 
> 标签：c++

假设我们有以下内容：

```
class StringClass
{
public:
    ...
    void someProcessing( );
    ...
    StringClass& operator=(const StringClass& rtSide);
    ...
private:
    char *a;//Dynamic array for characters in the string
    int capacity;//size of dynamic array a
    int length;//Number of characters in a
};

StringClass& StringClass::operator=(const StringClass& rtSide)
{
    capacity = rtSide.capacity;
    length = rtSide.length;
    delete [] a;
    a = new char[capacity];

    for (int i = 0; i < length; i++)
       a[i] = rtSide.a[i];

    return *this;
} 
```

我的问题是：为什么当我们尝试将对象分配给自身时，这种重载赋值运算符的实现会导致问题，例如：

```
StringClass s;
s = s; 
```

我正在阅读的教科书（Absolute C++）说，在`delete [] a;`“指针 sa 未定义。赋值运算符损坏了对象 s 并且该程序的运行可能被破坏了”之后。

为什么运营商破坏了s？如果我们在删除 sa 后立即重新初始化它，为什么这会导致程序中出现这样的问题，我们必须将函数重新定义为：

```
StringClass& StringClass::operator=(const StringClass& rtSide)
{
    if (this == &rtSide)
    //if the right side is the same as the left side
    {
        return *this;
    }
    else
    {
        capacity = rtSide.capacity;
        length = rtSide.length;
        delete [] a;
        a = new char[capacity];
        for (int i = 0; i < length; i++)
            a[i] = rtSide.a[i];

        return *this;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T01:26:30.900

如果您将一个对象分配给它自己`a`并`rt.a`指向同一个字符串，那么当您这样做时，`delete [] a`您将同时删除什么`a`和`rt.a`指向；然后你确实重新分配它，但是你要在循环中复制（在其自身上）的数据已经在`delete`.

现在，在循环中，您只需复制`new`自己返回的内存中发生的任何垃圾。

顺便说一句，即使使用自赋值的“安全网”检查赋值运算符也不完全正常（例如，它不是异常安全的）；定义“三巨头”（复制构造函数、赋值运算符、析构函数）的“安全”方法是使用“[复制和交换习语](https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom)”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T01:26:50.840

如果您自行分配，您可以`delete`先通过 LHS 参数释放 ( ) 字符串，然后再通过 RHS 参数将其复制到新分配的空间。这不是幸福的秘诀；这是未定义的行为，任何事情都可能发生。崩溃是合理的；如果你真的不走运，它可能会起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T01:26:40.347

考虑`rtSide.a`当你在里面时的价值是什么 broken `operator=`。

`this->a`它与您刚刚破坏的值相同。访问非拥有内存是未定义的行为，因此访问 this->a 是未定义的行为（因为您刚刚释放了它）。

```
delete [] a;
a = new char[capacity];

for (int i = 0; i < length; i++)
   a[i] = rtSide.a[i]; //Invalid when this->a == rtSide.a 
   //because rtSide.a is no longer owned by your program. 
```

如果您确实想要这样做，则必须在删除之前制作 a 的副本：

```
char* ca;
if (this == &rtSide) {
    ca = copy of rtSide.a or this->a;
} else {
    ca = rtSide.a;
}

//Do your assigning and whatnot

if (this == &rtSide) {
    delete[] ca;
} 
```

显然，什么都不做比制作所有实例拥有的成员的临时副本要高效得多。这与做的概念相同`int x = 5; int y = x; x = y;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T01:26:57.087

这是因为您首先删除了指针`delete [] a;`
，然后尝试从已删除的位置复制：

```
for (int i = 0; i < length; i++)
       a[i] = rtSide.a[i]; //rtSide has already been deleted as 'this' and '&rtSide' are same. 
```

请记住，它与您尝试复制的位置相同，您已将其删除。因此，错误！
您发布的后面的代码通过将自分配作为单独的案例进行检查来解决此问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T01:28:51.370

```
delete [] a;
a = new char[capacity];

for (int i = 0; i < length; i++)
   a[i] = rtSide.a[i]; 
```

这就是为什么。可以这样想：

您删除 a 指向的任何内容，然后分配新的内存块。新的内存块包含垃圾，这些垃圾会成为您的新数据。不要被`a[i] = rtSide.a[i];`只复制垃圾到自身的循环所迷惑。

请记住，`this`两者`rtSide`都将您引向同一个对象。当你使用`this`对象修改对象时，`rtSide`引用的对象就被修改了。

# ruby-on-rails - 用于图像的 Rails 自定义标题

> ID：13576035
> 
> 赞同：4
> 
> 时间：2012-11-27T01:23:37.773
> 
> 标签：ruby-on-rails, ruby-on-rails-3, image, http-headers

当有人请求图像时，是否可以在 Rails 3 中修改 HEADER？例如：

```
http://localhost:3000/assets/myimg.png 
```

我想将 Access-Control-Allow-Origin: "*" 添加到标题中，以便我可以通过 JavaScript 远程下载图像文件。

**更新 1**

我有资产文件夹下的图像的答案来更改标题，但现在我还需要对公共图像做同样的事情。我在下面尝试了相同的方法，但没有运气。

示例网址是

```
http://localhost:3000/images/stuff.png 
```

我尝试了 Rack MiddleWare，但它在访问公共图像时不运行调用方法。我还尝试了 LocationMatch（在生产环境中），同样没有运气。

我该如何尝试公共图像结束更改标题？

**更新 2**

所以，我确实设法通过 LocationMatch 让它工作，但图像无法缓存。有没有办法通过 apache 禁用图像缓存？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T17:48:02.283

资产将被“编译”并直接由 Web 服务器（Nginx/Apache）提供服务，因此 Rails 不会在生产环境中提供服务。您将需要修改 Web 服务器的配置以添加标头。

在 Apache 中是这样的。

```
<LocationMatch "^/assets/.*$">
  Header add Access-Control-Allow-Origin "*"
  ...
</LocationMatch> 
```

这在 Nginx 中。

```
location ~ ^/assets/ {
  add_header Access-Control-Allow-Origin *;
  ...
} 
```

有关预编译资产的更多详细信息，请参阅[本指南](http://guides.rubyonrails.org/asset_pipeline.html#precompiling-assets)。

**更新：**如果您需要在开发环境中应用标头，您可以使用一些自定义机架中间件来实现。有关示例，请参[见此要点。](https://gist.github.com/4157256)

# css - TEXTAREA中V滚动条上的向上按钮，莫名其妙地变灰

> ID：13576039
> 
> 赞同：1
> 
> 时间：2012-11-27T01:23:49.040
> 
> 标签：css

更多信息：该按钮实际上只有在我使用它时才会变灰：在鼠标悬停时它会消失，变为非活动状态。

我已经交换了负责的 CSS 声明，以在不同网站的另一个 TextArea 上使用，它在那里很高兴，表现如预期。但是，从外部获取有效的 CSS 声明，并将其交换到我遇到困难的 Textarea 的 CSS 中，发现问题仍然存在。所以我的结论是 CSS 不太可能有问题。至少就文本区域而言。

我接下来应该检查哪个代码区域来尝试确定这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:12:00.667

好的，这对我来说很奇怪，但错误与 z-index 有关。

问题是应用于包含有问题的 textarea 的 DIV 的 z-index 高于 textarea 本身的 z-index。所以：在某种程度上，向上按钮没有正确显示或行为。

当我将 Textarea 的 z-index 提高到高于包含 div 的值时，问题就消失了。

任何人在这个问题上绊倒，谁可能知道为什么只有一个元素受到影响，请随时添加评论，一些见解无疑会更有价值，但现在，我偶然发现了（a）解决方案。

# jquery - jQuery Validate Plugin 不会验证提交时的所有要求

> ID：13576042
> 
> 赞同：0
> 
> 时间：2012-11-27T01:24:27.983
> 
> 标签：jquery, jquery-validate

我已经阅读了其他帖子，但无法弄清楚为什么只有我的一些必填字段在提交时未经过验证。我正在帮助客户端验证他的脚本并将表单发布给另一方。在我的服务器上： http: [//alluringassets.com/caitlin/projects/validationscript/index.html](http://alluringassets.com/caitlin/projects/validationscript/index.html)。如果我关注事件日期，它将验证信息，但如果我从不关注它，然后单击提交 - 程序不会验证位置、组大小、事件日期，但会验证顶部字段。有任何想法吗？

```
$.validator.addMethod("groupMin", function(value) {
        return $("#00NG0000008iHKH").val() >= 6;
    }, 'Sorry, but we only handle groups of 6 or more.');

$.validator.addMethod("seoNO", function(value) {
        return $("#00NG0000008iHKg").match(/SEO/g);
    }, 'No thank you! We are not interested in Search Engine Optimization support.');

$.validator.setDefaults({
    //submitHandler: function() { 
        //form.submit();
        //alert("submitted!"); }
});

$().ready(function() { 
var validator = $("#detailRequestForm").bind("invalid-form.validate", function() {
            $("#summary").html("Your form contains " + validator.numberOfInvalids() + " errors. Please correct.");
        }).validate({
        rules: {
            firstname: "required",
            lastname: "required",
            email: {
                required: true,
                email: true
            },
            company: {
                required: true,
                minlength: 2
            },
            '00NG0000008iHK7': {//Program Location
                required: true,
                minlength: 2
            },
            '00NG0000008iHKH': //Group Size
                "groupMin",
            '00NG0000008iHKR': {//Event Date
                required: true,
                minlength: 3
            },
            '00NG0000008iHKg':"seoNO",
        },
        messages: {
            firstname: "Please enter your firstname",
            lastname: "Please enter your lastname",
            email: "Please enter a valid email address",
            company: "We do not serve private groups. Sorry, we can't help you.",
            '00NG0000008iHK7': //Program Location
            "Where will the program be located?",
            '00NG0000008iHKH':{//Group Size
                required:"Please enter the number of members in the group.",
            },
            '00NG0000008iHKR': {//Event Date
                required: "Please enter a date or TBA if you are unsure."
            },
            '00NG0000008iHKg': {//Comments
                //required: "Please enter any comments or questions you may have."
            }
        },
        errorElement: "em",
        errorContainer: $("#warning, #summary"),
        //highlight: function(label) {
            //$(label).removeClass("success").addClass('error');
        //},
        //success: function(label) {
                //label.text("ok!").empty().addClass("success");

            //}

    });
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:02:19.437

不知何故，我想通了。如果有人对以下作品感兴趣。

```
// JavaScript Document
//Script written by Caitlin Havener
//Utilizing jQuery validation plugin
//Visit sneakymommedia.com to hire me!
$.validator.addMethod("groupMin", function(value) {
        return $("#00NG0000008iHKH").val() >= 6;
    }, 'Sorry, but we only handle groups of 6 or more.');

    /*$.validator.addMethod("seoNO", function(value) {
            return $("#00NG0000008iHKg").match("/SEO/g");
        }, 'No thank you! We are not interested in Search Engine Optimization support.');*/

    $.validator.setDefaults({
        submitHandler: function() { 
            //form.submit();
            alert("submitted!"); }
});

$.validator.addMethod(
        "regex",
        function(value, element, regexp) {
            var re = new RegExp(regexp);
            return this.optional(element) || !re.test(value);
        },
        "No thank you! We are not interested in Search Engine Optimization support."
);

$().ready(function() { 
    var validator = $("#detailRequestForm").bind("invalid-form.validate", function() {
            $("#summary").html("Your form contains " + validator.numberOfInvalids() + " errors. Please correct.");
        }).validate({
        //debug: true,
        rules: {
            firstname: "required",
            lastname: "required",
            email: {
                required: true,
                email: true
            },
            company: {
                required: true,
                minlength: 2
            },
            '00NG0000008iHK7': {//Program Location
                required: true,
                minlength: 2
            },
            '00NG0000008iHKH': //Group Size
                "groupMin",
            '00NG0000008iHKR': {//Event Date
                required: true,
                minlength: 3
            },
            '00NG0000008iHKg':{
                //"seoNO",
                regex: / SEO |SEO| seo |seo|Search Engine Optimization | Search Engine Optimization |Search Engine Optimization/
            }
        },
        messages: {
            firstname: "Please enter your firstname",
            lastname: "Please enter your lastname",
            email: "Please enter a valid email address",
            company: "We do not serve private groups. Sorry, we can't help you.",
            '00NG0000008iHK7': //Program Location
            "Where will the program be located?",
            '00NG0000008iHKH':{//Group Size
                required:"Please enter the number of members in the group.",
            },
            '00NG0000008iHKR': {//Event Date
                required: "Please enter a date or TBA if you are unsure."
            },
            '00NG0000008iHKg': {//Comments
                //required: "Please enter any comments or questions you may have."
            }
        },
        errorElement: "em",
        errorContainer: $("#warning, #summary"),
        validClass: "success",
        focusCleanup: true,
        success: function(label) {
                label.text("ok!").addClass("success");
            }
    });

}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-27T01:29:31.937

ID 不应该以数字开头——这可能会影响验证插件。是什么阻止您调用这些字段`location`,`groupsize`和`eventdate`？

**更新**

按照声明字段的逻辑，后面的字段缺少一些大括号：

```
 company: {
            required: true,
            minlength: 2
        },
        '00NG0000008iHK7': { //Program Location = missing opening curly
            required: true,
            minlength: 2
        },
        '00NG0000008iHKH': { //Group Size - opening curly
            "groupMin"}, // closing curly
        '00NG0000008iHKR': { //Event Date - opening curly
            required: true,
            minlength: 3
        },
        '00NG0000008iHKg': {
            "seoNO", // opening curly
        } 
```

# java - JFrame、JPanel 和 awt 问题

> ID：13576043
> 
> 赞同：1
> 
> 时间：2012-11-27T01:24:30.163
> 
> 标签：java, swing, jframe, jpanel

我正在尝试制作一个简单的 java 2-d 平台游戏。Java一直给我带来一些错误“可序列化类Display没有声明long类型的静态最终serialVersionUID字段”有人可以帮忙吗？

这是我尝试运行程序时收到的错误消息：http: [//i.imgur.com/H0Afv.png](http://i.imgur.com/H0Afv.png) （在网站上）

这是代码：

```
import javax.swing.*;

public class Main {

    public static Display f;
    public static int width = 800;
    public static int height = 600;

    public static void main(String[] args)
    {

        f = new Display();
        f.setVisible(true);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setResizable(true);
        f.setSize(width, height);
        f.setLocationRelativeTo(null);
        f.setTitle("2-D Platformer");
    }

} 
```

```
//This is my display class.

import java.awt.*;

import javax.swing.*;

/* this is where the error is
 *
 */           V 
public class Display extends JFrame{

    public Display p;
    public Display()
    {

        p = new Display();
        add(p);
        setLayout(new GridLayout(1, 1, 0 , 0));
    }
} 
```

```
//and this is my display2 class
import java.awt.Color;

import javax.swing.*;

/* this is where the error is
 *too
 */            V 
public class Display2 extends JPanel{

    public Display2()
    {
        setBackground(Color.BLACK);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T01:26:15.297

这不是错误，而是警告，它来自于您扩展了一个可序列化的类（您的类正在扩展的 GUI 组件之一），并且没有按照 Serializable 接口合同的规定为其提供最终的 serialVersionUID 字段。这并不是很重要，因为您不太可能想要序列化此类的对象（将它们存储到磁盘或传输它们），因此您可以安全地忽略此警告或使用注释`@SuppressWarnings(“serial”)`来告诉编译器忽略它。IE，

编辑：或者你可以给它一个默认的 serialVersionUID 作为 bhuang3 状态。1+他的回答！

编辑2：

```
@SuppressWarnings(“serial”)
public class Display extends JFrame {

   // .....

} 
```

编辑 3：
接下来我们将讨论为什么创建扩展 JFrame 或其他组件的类通常不是必需的，实际上通常不是一个好主意，除非您覆盖超类的某些方法......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T01:27:39.040

我认为你需要在你的`Display2`类中声明一个 serialVersionUID。例如：`private static final long serialVersionUID = 1L;`

# ios - registerClass 错误表视图

> ID：13576044
> 
> 赞同：1
> 
> 时间：2012-11-27T01:24:34.390
> 
> 标签：ios, uitableview

如果我理解正确，在我的 TableView 中，我不能使用

```
if (cell == nil)
{ 
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier1];
} 
```

如果我在情节提要中声明 ReuseIdentifier。

这就是为什么我想在一个类中声明标识符。但我不知道该怎么做。

我试过这个：

```
[self.tableView registerClass:[UITableViewCell class] forCellWithReuseIdentifier:@"carTableCell"]; 
```

但它告诉我

> “UITableView”没有可见的@interface 声明选择器“registerClass:forCellWithReuseIdentifier”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T01:49:13.793

实际的方法名称是`registerClass:forCellReuseIdentifier:`-- 没有“With”。

# xml - Powershell 更改元素的值。如何禁用它？

> ID：13576046
> 
> 赞同：0
> 
> 时间：2012-11-27T01:24:55.577
> 
> 标签：xml, powershell

我正在使用流动代码来处理一些 xml。但它改变了价值！我该如何纠正？

```
$xml =[xml]@'
<?xml version="1.0" encoding="UTF-8"?><zabbix_export><hosts><host name="Template_Snmptrap"><dns></dns></host></hosts><dependencies /></zabbix_export>
'@
$random=Get-Random
$filename="{0}\{1}.xml" -f $env:temp,$random
$xml.save($filename)
get-content $filename 
```

结果

```
PS C:\Users\33333> get-content $filename
<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
  <hosts>
    <host name="Template_Snmptrap">
      <dns>
      </dns>
    </host>
  </hosts>
  <dependencies />
</zabbix_export>
PS C:\Users\33333> 
```

![之前和之后的值](../Images/8bea542bee004db1cac9a674d285164c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T02:57:01.500

在 $xml 中获得 XML 后，将`PreserveWhitespace`属性设置为`$true`例如：

```
$xml =[xml]@'
<?xml version="1.0" encoding="UTF-8"?><zabbix_export><hosts><hostname="Template_Snmptrap"><dns></dns></host></hosts><dependencies /></zabbix_export>
'@
$xml.PreserveWhitespace = $true 
```

# c# - Datagrid 按需卸载

> ID：13576047
> 
> 赞同：2
> 
> 时间：2012-11-27T01:25:01.877
> 
> 标签：c#, silverlight, datagrid, ondemand

我有一个包含 20 列左右的 SDK：DATAGRID，当它打开时只显示四个字段/列。这就是我想要的以及我是如何设计它的

基本上我是根据用户点击来获取信息 - 示例：

```
OWNERNAME.Text = ((TextBlock)EPICGrid.Columns[1].GetCellContent(EPICGrid.SelectedItem)).Text; 
```

和/或

```
OWNERNAME2.Text = ((TextBlock)EPICGrid.Columns[16].GetCellContent(EPICGrid.SelectedItem)).Text; 
```

我遇到的内容不会抓取单元格中的信息，除非我滚动并显示该列，因此我只能抓取前 4 列数据，因为它们会显示网格何时可见。

我无法从第 5 -20 列中获取数据，除非我滑过并使这些列可见。在单击期间它们不必可见......似乎在我查看该列之前数据并没有真正加载。

我想我应该说第一条记录/行加载所有数据/单元格/列，我可以从第一条记录中获取任何数据，但问题发生在记录 2 - *。

只是为了澄清 - 我的问题不是我的列或行的可见性。我的问题是 SDK DataGrid 似乎是按需加载数据。因此，如果该列在某一时刻不在视图中，则单元格中的信息不可用。

我不想显示所有列，也不想让用户能够查看所有列，所以我想禁用滚动条但是当用户点击某一行时，我需要在某些单元格中获取信息并且由于该列尚未加载，因此信息不存在。

如何关闭按需加载功能？

我进行了搜索，发现有人在加载行时遇到了类似的问题，建议设置`VirtualizingStackPanel.VirtualizationMode = Standard`

几乎就像问题源于 VirtualizingStackPanel.VirtualizationMode 但我将此属性设置为标准并回收并且没有运气。

这是定义：

> 默认情况下，VirtualizingStackPanel 为每个可见项目创建一个项目容器，并在不再需要它时将其丢弃（例如当项目滚动到视图之外时）。当 ItemsControl 包含大量项目时，创建和丢弃项目容器的过程会对性能产生负面影响。当 VirtualizingStackPanel.VirtualizationMode 设置为 Recycling 时，VirtualizingStackPanel 会重复使用项目容器，而不是每次都创建一个新容器。

在初始加载时，如果单元格不可见，我无法获取单元格内容（除非它是第一条记录/行）。一旦单元格/列可见，则信息可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T02:43:02.343

我认为您应该直接处理该行绑定的数据，而不是将数据拉出控件。这是有道理的，因为它是双向数据绑定，因此在您更改数据时会更新数据（假设它实现了 INotifyPropertyChanged 接口）。

一个示例是数据网格绑定到 MyEntity 类型的集合。

```
 private void DataGrid1_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            if (this.DataGrid1.SelectedItem == null)
                return;

            MyEntity myEntity = (MyEntity)this.DataGrid1.SelectedItem;

            // at this point you have the (updated) data the row is bound to.
           MessageBox.Show("You Selected: " + myEntity.name);
           ... 
```

另一个例子是每一行都有一个按钮。单击按钮时要处理的代码如下所示：

```
 private void btnProcessEntity_Click(object sender, RoutedEventArgs e)
      {

         Button btn = sender as Button;
         MyEntity myEntity = btn.DataContext as MyEntity;

          // clicking a button in a row doesn't select the row, so select it.
         this.DataGrid1.SelectedItem = myEntity;  
         MessageBox.Show("Will Process: " + myEntity.name);

          ...
       } 
```

如果您不熟悉 Silverlight 通常使用的一些技术，请查看这些[视频教程](http://www.myvbprof.com/MainSite/index.aspx#/zMVVM_Golf)。它是 VB.Net，但代码实际上并不是重点——它专注于 Silverlight 应用程序架构。我将从“SL4 和 WCF Ria 服务简介”开始，然后在 MVVM 上查看其中一个。

# java - httpPost 方法

> ID：13576048
> 
> 赞同：0
> 
> 时间：2012-11-27T01:25:04.000
> 
> 标签：java, http, http-post, httpclient

我正在创建 httpClient，当我发送 httpPost 方法时，如何将正文附加到 httpRequest ？

```
 public String httpPost(String URL, String BODY) {

    DefaultHttpClient httpclient = new DefaultHttpClient();
    HttpPost httpPost = new HttpPost(URL);

    try {

        response = httpclient.execute(httpPost); // get response from executing client

        StatusLine statusLine = response.getStatusLine();
        int statusCode = statusLine.getStatusCode();
        if (statusCode == HttpStatus.SC_OK) {
            body.append(statusLine + "\n");
            HttpEntity e = response.getEntity();
            String entity = EntityUtils.toString(e);
            body.append(entity);

        } else {
            body.append(statusLine + "\n");
            // System.out.println(statusLine);
        }
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        httpPost.releaseConnection();
    }
    return body.toString();
} 
```

例如，字符串是
“<html><header>Header</header><body>I am body</body>”
我在哪里将该字符串附加到请求消息中？
谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T01:36:53.300

您`httpPost.setEntity(" < html > < header > Header < /header> < body> I am body < /body> ")`在尝试捕获之前尝试过吗？

我不完全确定“实体”指的是什么，但这是我通过查看**[此处的文档所能想到的最好的](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/methods/HttpPost.html)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T01:39:05.743

您可以创建一个`StringEntity`，将其设置为`HttpPost`对象，并设置正确的`Content-Type`：

```
StringEntity entity = new StringEntity("data=" + java.net.URLEncoder.encode(body, "utf-8"));
entity.setContentType("application/x-www-form-urlencoded");
httpPost.setEntity(entity); 
```

然后像往常一样发送您的 POST 请求。

# perl - PDF::表格中的 Colspan

> ID：13576052
> 
> 赞同：4
> 
> 时间：2012-11-27T01:25:33.733
> 
> 标签：perl, pdf

我需要一些帮助来尝试对我拥有的这个 PDF 表格项目进行 colspan。在这个示例代码中，我可以解释我想要做什么。我需要用“主要信息”和“次要信息”来制作行来做一个“colspan”。我还试图使总计“线”在表格上延伸（colspan）以创建一条线来划分该表格上的部分。也许我可以传递图像来模拟 colspan，但无法弄清楚如何通过数据字符串传递图像代码。我到处寻找，但找不到任何解决方案，也许这里有人以前做过，可以告诉我如何完成他的工作。这是示例代码，并提前感谢您的帮助！

```
#!/usr/bin/perl

use warnings;
use strict;
use PDF::API2;
use PDF::Table;
use Data::Dumper;

my $pdftable = new PDF::Table;
my $pdf = new PDF::API2(-file => "report.pdf");
my $page = $pdf->page();
$pdf->mediabox('A4');

# some data to layout
my $some_data =[

    ['Name', 'Address', 'Account', 'Amount',],
    ['','','','',],
    ['Primary Info','','','',],
    ['','','','',],
    ['1 - Charles Dawrwin',   '1 - Boston, MA',   '1 - 123456789',  '150.00'],
    ['2 - Arnold Shuwerts',   '2 - San Rose, CA', '2 - 844756485' , '250.00'],
    ['3 - Joe Doe',           '3 - Revere, MA',   '3 - 000034559',  '100.00'],
    ['4 - Mary Loo',          '4 - New York, NY', '4 - 333449687',  '125.00'],
    ['','','','',],
    ['','','','___________',],
    ['','Primary Sub Total','','550.00',],
    ['','','','',],
    ['1a - Mary Dawrwin',   '1a - Cambrigde, MA',   '1a - 123452789',  '550.00'],
    ['2a - Joe Doark',      '2a - Miami, FL',       '2a - 844726485' , '350.00'],
    ['','','','',],
    ['Secondary Info','','','',],
    ['','','','',],
    ['5 - John Dell',         '5 - Portland, ME', '5 - 111000384',   '55.00'],
    ['6 - Mary Loumain',      '6 - Cambridge, MA','6 - 000034569','1,000.00'],
    ['7 - Charles Town',      '7 - New Port, NH', '7 - 222299944',  '200.00'],
    ['8 - Jasmin Deen',       '8 - San Jose, CL', '8 - 000000122',  '255.00'],

    ['','','','___________',],
    ['','','Total:','$3,450.00',],

 ];

my $cell_props;

my $j = 0; 
foreach my $row ( @{$some_data} )    
{
my $k = 0;
foreach my $cell ( @{$row} )
{

    if ( ($cell eq 'Name') || ( $cell eq 'Address') || ( $cell eq 'Account') || ( $cell eq 'Amount') ) {

    $cell_props->[$j]->[$k] ={
                                background_color => '#808080', #
                                font_color       => '#FF0000', #
                                justify => "center",
                            };

    }elsif ( ($cell eq 'Primary Info') || ($cell eq 'Secondary Info') ){

      $cell_props->[$j]->[$k] = {
                                font => $pdf->corefont("Helvetica", -encoding => "utf8"),
                                font_size => 15,
                                background_color => '#FFCA00', #
                                font_color       => '#4D4D4D', #
                                justify => "left",
                            };
    }elsif ( ($cell eq 'Total:') ){

      $cell_props->[$j]->[$k] = {
                                background_color => '#FFCA00', #
                                font_color       => '#4D4D4D', #
                                justify => "center",
                            };

    }else {

    $cell_props->[$j]->[$k] = {
                                font => $pdf->corefont("Helvetica", -encoding => "utf8"),
                                font_size => 8,
                                background_color => '#ffffff', #
                                font_color       => '#000000', #
                                justify => "center",
                            };
    }

$k++;

}
$j++;
}

 # build the table layout
 $pdftable->table(
     # required params
     $pdf,
     $page,
     $some_data, # 2D arrayref of text strings
     x => 50, #left_edge_of_table,
     -w => 495, # width of table. technically optional, but almost always a good idea to use
     start_y => 820, # baseline_of_first_line_on_first_page,
     next_y => 800, # baseline_of_first_line_on_succeeding_pages,
     -start_h => 800, # height_on_first_page,
     next_h => 500, # height_on_succeeding_pages,

     # some optional params
     -padding => 3, # cell padding
     padding_right => 10,  #right cell padding, overides -pad
     border => 0, # border width 0 for no border
     background_color_odd => '',
     background_color_even => '', #cell background color for even rows

    header_props =>
        {
         min_w => 250,
         bg_color => "#808080",
         font => $pdf->corefont("Helvetica", -encoding => "utf8"),
         font_size => 13,
         font_color => "#000000",
         repeat => 1,
        },

     column_props   => [ map{{justify => 'center' }}1..4, ],

     cell_props     => 
         $cell_props,

  );

$pdf->saveas(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:50:25.237

在你找到合适的解决方案之前，也许粗略的破解就可以了。

改变

> `['Primary Info','','','',],`

至

> `['Primary Info','col$span','col$span','col$span',],`

同样对于您希望“修复”的其他行。[显然，您可以使用任何其他字符串代替 'col$span'，只要它不会自然出现。]

然后为 'col$span' 制定一个新规则，使文本与背景颜色相同：

> ```
> } elsif ($cell eq 'col$span') {
>     $cell_props->[$j]->[$k] = {
>     font => $pdf->corefont("Helvetica", -encoding => "utf8"),
>     font_size => 1,
>     background_color => '#FFCA00', #
>     font_color       => '#FFCA00', #
> }; 
> ```

不确定 Total 是否正是您想要的，但其他看起来就像您想要的一样，即使它有点作弊。

# c++ - 对于默认构造函数和析构函数，“=default”与“{}”有何不同？

> ID：13576055
> 
> 赞同：217
> 
> 时间：2012-11-27T01:25:52.080
> 
> 标签：c++, c++11, user-defined-functions, default-constructor, deleted-functions

我最初将其发布为仅关于析构函数的问题，但现在我正在添加对默认构造函数的考虑。这是原始问题：

> 如果我想给我的类一个虚拟的析构函数，但与编译器生成的析构函数相同，我可以使用`=default`：
> 
> ```
> class Widget {
> public:
>    virtual ~Widget() = default;
> }; 
> ```
> 
> 但似乎我可以通过使用空定义减少输入来获得相同的效果：
> 
> ```
> class Widget {
> public:
>    virtual ~Widget() {}
> }; 
> ```
> 
> 这两个定义有什么不同的表现吗？

根据针对此问题发布的回复，默认构造函数的情况似乎相似。鉴于析构函数的“ `=default`”和“ `{}`”之间的含义几乎没有区别，那么默认构造函数的这些选项之间的含义是否也几乎没有区别？也就是说，假设我想创建一个类型，该类型的对象将被创建和销毁，我为什么要说

```
Widget() = default; 
```

代替

```
Widget() {} 
```

?

如果在原始发布后扩展此问题违反了某些 SO 规则，我深表歉意。为默认构造函数发布一个几乎相同的问题让我觉得不太理想。

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-11-27T06:40:46.717

当询问构造函数而不是析构函数时，这是一个完全不同的问题。

[正如霍华德指出的那样](https://stackoverflow.com/a/13576544/734069)，如果您的析构函数是`virtual`，那么差异可以忽略不计。但是，如果您的析构函数是*non-virtual*，那就完全不同了。构造函数也是如此。

 *对特殊成员函数（默认构造函数、复制/移动构造函数/赋值、析构函数等）使用`= default`语法意味着与简单地做`{}`. 使用后者，该功能变为“用户提供”。这改变了一切。

这是 C++11 定义的一个微不足道的类：

```
struct Trivial
{
  int foo;
}; 
```

如果您尝试默认构造一个，编译器将自动生成一个默认构造函数。复制/移动和破坏也是如此。因为用户没有提供任何这些成员函数，所以 C++11 规范认为这是一个“微不足道的”类。因此这样做是合法的，比如 memcpy 它们的内容以初始化它们等等。

这：

```
struct NotTrivial
{
  int foo;

  NotTrivial() {}
}; 
```

顾名思义，这不再是微不足道的。它有一个用户提供的默认构造函数。是否为空也没关系；就 C++11 的规则而言，这不可能是微不足道的类型。

这：

```
struct Trivial2
{
  int foo;

  Trivial2() = default;
}; 
```

顾名思义，这是一种微不足道的类型。为什么？因为您告诉编译器自动生成默认构造函数。因此构造函数不是“用户提供的”。因此，该类型算得上是微不足道的，因为它没有用户提供的默认构造函数。

当您添加阻止创建此类函数的成员函数时，该`= default`语法主要用于执行复制构造函数/赋值之类的操作。但它也会触发编译器的特殊行为，因此它在默认构造函数/析构函数中也很有用。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-11-27T02:33:09.763

他们都是不平凡的。

根据基础和成员的 noexcept 规范，它们都具有相同的 noexcept 规范。

到目前为止，我检测到的唯一区别是，如果`Widget`包含具有不可访问或已删除的析构函数的基类或成员：

```
struct A
{
private:
    ~A();
};

class Widget {
    A a_;
public:
#if 1
   virtual ~Widget() = default;
#else
   virtual ~Widget() {}
#endif
}; 
```

然后`=default`解决方案将编译，但`Widget`不会是可破坏的类型。即如果你试图破坏 a `Widget`，你会得到一个编译时错误。但如果你不这样做，你就有了一个工作程序。

Otoh，如果您提供*用户提供的*析构函数，那么无论您是否破坏 a ，事情都不会编译`Widget`：

```
test.cpp:8:7: error: field of type 'A' has private destructor
    A a_;
      ^
test.cpp:4:5: note: declared private here
    ~A();
    ^
1 error generated. 
```

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2014-05-16T15:22:09.210

之间的重要区别

```
class B {
    public:
    B(){}
    int i;
    int j;
}; 
```

和

```
class B {
    public:
    B() = default;
    int i;
    int j;
}; 
```

是定义的默认构造函数`B() = default;`被认为**不是用户定义的**。这意味着在*值初始化*的情况下

```
B* pb = new B();  // use of () triggers value-initialization 
```

将发生根本不使用构造函数的特殊类型的初始化，对于内置类型，这将导致*零初始化*。在`B(){}`这种情况下不会发生。C++ 标准 n3337 **§** 8.5/7 说

> 对 T 类型的对象进行值初始化意味着：
> 
> **— 如果 T 是具有用户提供的构造函数**（12.1）的（可能是 cv 限定的）类类型（第 9 条 ），则调用 T 的默认构造函数（如果 T 没有可访问的默认构造函数，则初始化是非良构的);
> 
> — if T is a (possibly cv-qualified) non-union class type **without a user-provided constructor**, then the object is zero-initialized and, if T’s implicitly-declared default constructor is non-trivial, that constructor is called.
> 
> — if T is an array type, then each element is value-initialized; — otherwise, the object is zero-initialized.

For example:

```
#include <iostream>

class A {
    public:
    A(){}
    int i;
    int j;
};

class B {
    public:
    B() = default;
    int i;
    int j;
};

int main()
{
    for( int i = 0; i < 100; ++i) {
        A* pa = new A();
        B* pb = new B();
        std::cout << pa->i << "," << pa->j << std::endl;
        std::cout << pb->i << "," << pb->j << std::endl;
        delete pa;
        delete pb;
    }
  return 0;
} 
```

possible result:

```
0,0
0,0
145084416,0
0,0
145084432,0
0,0
145084416,0
//... 
```

[http://ideone.com/k8mBrd](http://ideone.com/k8mBrd)*

# filepicker.io - Filepicker.io 选择 epub mimetype

> ID：13576060
> 
> 赞同：0
> 
> 时间：2012-11-27T01:26:28.913
> 
> 标签：filepicker.io

在过去一天左右的时间里，我一直在使用 filepicker api - 在使用 pick 方法时，我试图将我的头脑围绕在 mimetype 验证上。我只想支持上传具有 mimetype 的 epub 文件：'application/epub+zip'。但是，每当我将其用作文件选择器中唯一受支持的 mimetype 时，我都会收到以下错误：

该页面只能支持一个应用程序/epub zip/*

它似乎将字符串中的“+”解释为空格。任何有关如何解决此问题或正确验证 epub 文件的建议将不胜感激！

编辑：我找到了解决这个问题的方法，而是使用“扩展名” - 并添加 {extension: '.epub'}。这将起作用，因为我可以将 maxSize 设置为某个合理的数字，并在服务器端执行一些验证（如果文件实际上不是 epub，则从 s3 中删除文件）。如果有人弄清楚如何使用 mimetype 正确地做到这一点，那就太棒了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T04:02:52.320

很高兴您可以使用扩展名，使用 mimetype 的一种方法可能是将 + urlencode 为 %2B

# jquery - 使用 jquery 将输入文本值放在两个 div 中

> ID：13576069
> 
> 赞同：1
> 
> 时间：2012-11-27T01:27:01.127
> 
> 标签：jquery

我在我的表单上使用自动完成小部件，它基本上提供了一个出发城市文本输入字段和一个返回文本输入字段。

我想在一个 div 中显示 Depart From 和 Arrive At，在第二个 div 中显示相同的返回信息。（即离开多伦多到巴里和返回，巴里到多伦多）。

我的 jQuery 在第一次显示信息时工作正常，但我无法让信息再次显示反转。

我的表格：（只显示部分）

```
<div class="ui-widget">
    <p>
        <label for="tags">Depart From:</label>
        <input type="text" class="departCity" id="tags" size="30" />
    </p>
</div>
<div class="ui-widget">
    <p>
        <label for="tags2">To:</label>
        <input type="text" class="destination" id="tags2" size="30" />
    </p>
</div> 
```

我的代码是：

```
$(function() {
    $('input[type="text"]').blur(function() {
        $("#" + $(this).attr('id') + "_display").html($(this).val());
    });
});​ 
```

和html：

```
<div id="trip">
    <p><strong><span id="tags_display"></span> - <span id="tags2_display"></span></strong></p>
</div>
<div id="returnTrip">
    <p><strong><span id="displayTags2"></span></strong></p>
</div> 
```

正如我所说，“trip” div 的第一部分显示正常，但我想在第二部分中克隆/复制它。

我尝试了这个和其他一些变体，但无法让它再次显示。我的表单数据不会去任何地方，只会显示。

```
function open() {
    $('#displayTags2').html($('#tags2_display').clone());
}
open();​ 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:54:13.653

您需要一种方法来调用您拥有的复制功能（您所调用的`open()`）。

您可以创建一个按钮来将行程添加到列表中：

**HTML**

```
<div class="ui-widget">
    <p>
        <label for="tags">Depart From:</label>
        <input type="text" class="departCity" id="tags" size="30" />
    </p>
</div>

<div class="ui-widget">
    <p>
        <label for="tags2">To:</label>
        <input type="text" class="destination" id="tags2" size="30" />
    </p>
</div>

<div id="trip">
    <p><strong><span id="tags_display"></span> - <span id="tags2_display"></span></strong></p> 
</div>

<button class="copyTrip">Copy trip</button>

<div id="returnTrip">
    <p><strong><span id="displayTags2"></span></strong></p>
</div>
​ 
```

**Javascript**

```
$(function() {
    $('.copyTrip').on('click', function open() {
        $('#displayTags2').append($('#trip').clone());
    });

    $('input[type="text"]').on('change', function() {
        $("#" + $(this).attr('id') + "_display").html($(this).val());
    });
});​ 
```

**[演示](http://jsfiddle.net/xkZtg/2/)**

**编辑 1**

所以你只想复制目标值并将其放入隐藏的 div 中？简单的。

`$('#tags2').val()`每次更改时我都会复制它，并隐藏`returnTrip`div，除非您的回程复选框被选中。

**Javascript**

```
$(function() {

    $('input[type="text"]').on('change', function() {
        $("#" + $(this).attr('id') + "_display").html($(this).val());
        $('#displayTags2').html($('#tags2').val());
    });

});​ 
```

**[演示](http://jsfiddle.net/xkZtg/3/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T01:49:49.070

如果我真的理解你的问题，也许你的意思是这样的：在你的方法中调用你的`open()`函数。`blur()`

```
$(function() {
    $('input[type="text"]').blur(function() {
        $("#" + $(this).attr('id') + "_display").html($(this).val());
        //update immediately the Return city in the container
        open();
    });
});​ 
```

# perl - 泄漏，同时祝福 XS 代码中的空引用

> ID：13576074
> 
> 赞同：3
> 
> 时间：2012-11-27T01:27:29.950
> 
> 标签：perl, memory-leaks, reference, garbage-collection, xs

我正在尝试做一个与此等效的 XS：

```
package RefTestPP;
use strict;
use warnings;

sub new {
    my ($class, $self) = (@_, {});
    return bless $self, $class;
}

1; 
```

这种构造函数应该在调用时“自动激活”它的基础`RefTestPP->new()`，或者使用给定的引用作为基础，比如`RefTestPP->new({ stuff => 123 });`.

但是，我遇到了无法解释的泄漏。这是我的`RefTest.xs`文件：

```
#include "EXTERN.h"
#include "perl.h"
#include "XSUB.h"

#include "ppport.h"

MODULE = RefTest PACKAGE = RefTest

PROTOTYPES: ENABLE

void
new(sclass="RefTest", base=sv_2mortal(newRV_noinc((SV *) newHV())))
    const char *sclass
    SV *base
    PREINIT:
        HV *stash;
    PPCODE:
        stash = gv_stashpv(sclass, 0);
        ST(0) = sv_bless(base, stash);

        XSRETURN(1);

void
new_leaky(sclass="RefTest", base=newRV_noinc(sv_2mortal((SV *) newHV())))
    const char *sclass
    SV *base
    PREINIT:
        HV *stash;
    PPCODE:
        stash = gv_stashpv(sclass, 0);
        ST(0) = sv_bless(base, stash);

        XSRETURN(1); 
```

`RefTest.t`以及检测泄漏的文件：

```
use strict;
use warnings;

use Devel::Leak;
use Test::More;
BEGIN { use_ok('RefTest') };

sub test_leak (&$;$) {
    my ($code, $descr, $maxleak) = (@_, 0);
    my $n1 = Devel::Leak::NoteSV(my $handle);
    $code->() for 1 .. 1000;
    my $n2 = Devel::Leak::CheckSV($handle);
    cmp_ok($n1 + $maxleak, '>=', $n2, $descr);
}

# OK
test_leak { my $ref = RefTest->new() or die }
    'first sv_2mortal(); then newRV_noinc()', 2;

# also OK
test_leak { my $ref = RefTest->new_leaky({}) or die }
    'first sv_2mortal(); then newRV_noinc(); pre-init base', 2;

# leaks!
test_leak { my $ref = RefTest->new_leaky() or die }
    'first newRV_noinc(); then sv_2mortal()', 2;

done_testing 4; 
```

（正确编译所需的其余文件是由 生成的默认文件`h2xs -A -n RefTest`）

重点是：

1.  作为参数传递给构造函数的基引用永远不会泄漏；
2.  *在*XS 代码中创建的基础`sv_2mortal(newRV_noinc((SV *) newHV()))`也不会泄漏；
3.  使用创建的 base`newRV_noinc(sv_2mortal((SV *) newHV()))`将泄漏（并最终`Attempt to free unreferenced scalar: SV 0xdeadbeef`在全局销毁期间导致臭名昭著的消息）。

`sv_2mortal(newRV_noinc(...))`有什么不同的理由`newRV_noinc(sv_2mortal(...))`吗？我只是做错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T02:18:36.423

`sv_2mortal`是延迟的引用计数减量。（它发生在调用者有机会引用它或复制它之后。）在这篇文章中，我将给出 ref 计数，就好像`sv_2mortal`立即递减一样，但会使用星号（“*”）来表示这一点。

* * *

以下代码使引用死亡：

```
sv_2mortal(newRV_noinc((SV*)newHV())) 
```

所以，

1.  哈希的 REFCNT=1。这很好，因为您创建的引用包含对它的引用。
2.  参考具有 REFCNT=0*。这很好，因为没有任何引用它。

* * *

以下代码使哈希死亡：

```
newRV_noinc(sv_2mortal((SV*)newHV())) 
```

所以，

1.  哈希有 REFCNT=0*。这很糟糕，因为您创建的引用包含对它的引用。这将导致过早释放（这就是为什么在释放引用时会出现“尝试释放未引用的标量”的原因）。
2.  参考具有 REFCNT=1。这很糟糕，因为没有任何东西引用它。这是一个泄漏。

# c# - System.String[] Split(Char[])' 方法无法识别

> ID：13576078
> 
> 赞同：5
> 
> 时间：2012-11-27T01:27:33.583
> 
> 标签：c#, asp.net-mvc-3, linq, linq-to-entities

我有以下数据，我想使用 Linq to Entities 过滤数据，但出现异常：

> LINQ to Entities 无法识别方法 'System.String[] Split(Char[])' 方法，并且此方法无法转换为存储表达式。

我在表中有以下数据

```
1           HPM,BKM     NULL        1,2,3
2           HPM,BKM     L1,L2       1,2
3           KK,CC,ZZ,PP             3,4 
```

我正在编写以下代码

```
var criteria_1="1";

var criteria_2="HPM,"

var Col4 = DB.Letter_Logic.Where(m => m.Col1.Equals(criteria_1)
            && m.Col2.Split(',').Contains(criteria_2)).ToList(); 
```

它应该给我值 1,2,3 作为我的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T01:53:31.077

这是因为没有办法将 Split(Char[]) 转换为 SQL 表达式。您需要先执行 ToList() 然后执行拆分操作，但请注意，这会在使用拆分表达式过滤掉它们之前将更多结果带回您的计算机：

```
var Col4 = DB.Letter_Logic.Where(m => m.Col1.Equals(criteria_1))
                          .ToList()
                          .Where(m => m.Col2.Split(',').Contains(criteria_2))
                          .ToList(); 
```

# java - 如何将从 MongoDB 检索到的 DBObject 转换为自定义类？

> ID：13576085
> 
> 赞同：1
> 
> 时间：2012-11-27T01:28:46.977
> 
> 标签：java, mongodb, classcastexception

在我的项目中，我创建了一个名为 ClickScoreTuple 的类，它扩展了 BasicDBObject。（否则会出现 Serielizable 问题）。

然后，我使用下面的代码插入 ClickScoreTuple

```
public void insertToMongodb(String q, ClickScoreTuple cs){

    BasicDBObject doc = new BasicDBObject();
    doc.put("query", q);
    doc.put("clicks", cs);
    coll.insert(doc);
} 
```

并使用以下代码从 MongoDB 检索数据。

```
public ClickScoreTuple retrieveFromMongodb(String q){

    BasicDBObject query = new BasicDBObject();

    query.put("query", q);
    DBCursor cursor = coll.find(query);

    **ClickScoreTuple result = (ClickScoreTuple) cursor.next();**
    cursor.close();
    return result;
} 
```

但是，我遇到了这样的问题：

```
Exception in thread "main" java.lang.ClassCastException: com.mongodb.BasicDBObject cannot be cast to ClickScoreTuple
at MongoDBManager.retrieveFromMongodb(MongoDBManager.java:50)
at UserLogHistoryProcessor.processLogHistory(UserLogHistoryProcessor.java:30)
at UserLogHistoryProcessor.main(UserLogHistoryProcessor.java:108) 
```

有谁知道锄头来解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-22T11:33:34.320

您需要设置对象类类型....在保存和检索对象之前使用[DBCollection的](http://api.mongodb.org/java/2.0/com/mongodb/DBCollection.html)[setObjectClass](http://api.mongodb.org/java/2.0/com/mongodb/DBCollection.html#setObjectClass(java.lang.Class))方法....在您的情况下，它应该是-

***coll.setObjectClass(ClickScoreTuple.class);***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:03:35.233

父母可以持有对孩子的引用，但反之则不行。您必须`DBObject`手动映射到，`ClickScoreTuple`因为该`DBCursor.next()`方法未编码以返回您的孩子。

# java - -XX:+PrintTenuringDistribution 不打印任期年龄

> ID：13576091
> 
> 赞同：3
> 
> 时间：2012-11-27T01:29:28.180
> 
> 标签：java, garbage-collection, jvm

**-XX:+PrintTenuringDistribution** VM 选项应强制 VM 在幸存空间中打印对象年龄，如VMOptions[页面](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)中所述。

但是，当我设置此选项时，我只看到为每个 GC 打印的阈值，而不是任期年龄信息。

**问**：有谁知道为什么这个选项不起作用？

我的 VM 选项的完整列表：

```
-XX:+PrintTenuringDistribution -XX:+UnlockDiagnosticVMOptions -XX:+LogVMOutput 
-XX:LogFile=jvm.log -server  -XX:+HeapDumpOnOutOfMemoryError -XX:+DisableExplicitGC  
-Xloggc:bin/gc.log -XX:+PrintGCTimeStamps -XX:+PrintGCDetails -showversion 
-XX:+PrintClassHistogramBeforeFullGC -XX:+PrintClassHistogramAfterFullGC 
-XX:+UseParallelOldGC -XX:ParallelGCThreads=4 -XX:MaxTenuringThreshold=15 
-XX:NewRatio=2 -XX:InitialSurvivorRatio=3 -XX:SurvivorRatio=3 -XX:TargetSurvivorRatio=90 
-Xms8g -Xmx8g -XX:PermSize=512m -Xss256k -XX:MaxPermSize=512m -XX:+UseLargePages 
-XX:+AggressiveOpts -server -XX:-UseBiasedLocking 
```

我的 Java 版本是：

```
java version "1.6.0_21"
Java(TM) SE Runtime Environment (build 1.6.0_21-b06)
Java HotSpot(TM) 64-Bit Server VM (build 17.0-b16, mixed mode) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-14T21:16:36.537

这已添加到 jvm 6.0(mustang) build 55 中的 Parallel Scavenge 收集器 (-XX:+UseParallelGC)。

（来自对[https://community.oracle.com/thread/1543414?start=0&tstart=0](https://community.oracle.com/thread/1543414?start=0&tstart=0)的评论）

我正在使用“1.6.0_26”并且我确认我有相同的行为。为了确认前面的说法，我尝试了串行垃圾收集器（-XX:+UseSerialGC），并正确显示了tenuring age信息。

```
2014-02-14T16:04:03.285-0500: 686.879: [GC 686.880: [DefNew
Desired survivor size 13402112 bytes, new threshold 15 (max 15)
- age   1:    1288856 bytes,    1288856 total
- age   2:     320312 bytes,    1609168 total
- age   3:       9816 bytes,    1618984 total
- age   4:      33352 bytes,    1652336 total
- age   5:       6256 bytes,    1658592 total
- age   6:      34464 bytes,    1693056 total
- age   7:       9128 bytes,    1702184 total
- age   8:     100192 bytes,    1802376 total
- age   9:       9024 bytes,    1811400 total
- age  10:      55632 bytes,    1867032 total
- age  11:      14616 bytes,    1881648 total
- age  12:     302304 bytes,    2183952 total
- age  13:     682192 bytes,    2866144 total
- age  14:      11928 bytes,    2878072 total
- age  15:      13928 bytes,    2892000 total 
```

# android - Android - 更新发布到 Google Play 的应用程序 - 需要重新安装

> ID：13576092
> 
> 赞同：0
> 
> 时间：2012-11-27T01:29:29.187
> 
> 标签：android, google-play, updates, reinstall

我已经向 Google Play 商店发布了一个应用程序。现在我已经准备好更新，应用程序使用了一些序列化的对象，并且更新对它们进行了一些更改，因此需要在更新之前进行卸载。

我如何强制用户先卸载应用程序，或者我必须以某种方式在代码中解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:35:56.807

我认为你应该在代码中解决这个问题。如果需要/可能，找出一种识别旧数据并将其转换/升级为新结构的方法。即使保留旧对象 defs 以供读取，然后将它们在内存中转换为新结构也应该有效。

一种选择是编写某种“模式版本”首选项，至少可以告诉您数据是在什么情况下写入的（缺少该首选项意味着它是版本 1）。至少下次会更容易。

顺便说一句，我建议这样做而不是删除文件的原因是重复删除文件的风险。您需要某种方法来检测那里的文件是旧的（可忽​​略的、可删除的或用于升级的）还是新的并且应该保留。

# c++ - CGAL 库 Vertex_visibility_graph_2.h 的问题

> ID：13576093
> 
> 赞同：0
> 
> 时间：2012-11-27T01:29:31.920
> 
> 标签：c++, graph, visibility, cgal

对于可见性图，我在使用 CGAL 库**Vertex_visibility_graph_2.h时遇到问题。**我正在尝试的代码如下：

```
 typedef CGAL::Cartesian<CGAL::Gmpq> Kernel;
    typedef CGAL::Arr_segment_traits_2<Kernel> Traits_2;
    typedef CGAL::Vertex_visibility_graph_2<Traits_2> Vis_graph;  
    typedef CGAL::Polygon_2<Kernel> Polygon_2;

    Vis_graph graph(polygon.vertices_begin(), polygon.vertices_end()); 
```

但是当我尝试编译时，我得到了错误：

```
/opt/local/include/CGAL/Partition_2/Vertex_visibility_graph_2_impl.h:528:30: error: 
      no matching function for call to object of type 'Intersect_2' (aka
      'CGAL::Arr_segment_traits_2<CGAL::Cartesian<CGAL::Gmpq>>::Intersect_2') 
```

以前有人用过那个库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:08:56.777

您需要替换： `typedef CGAL::Vertex_visibility_graph_2<Traits_2> Vis_graph;` 通过 `typedef CGAL::Vertex_visibility_graph_2<Kernel> Vis_graph;`

# python - 目前如何在 appengine 中将数据存储区的时间戳转换为本地时间？

> ID：13576096
> 
> 赞同：0
> 
> 时间：2012-11-27T01:30:08.303
> 
> 标签：python, google-app-engine, python-2.7, pytz

我有一个相当简单的场景，我很难找到似乎需要一个简单答案的东西！我的应用程序中有一个审核日志，其中包含通过`auto_now_add`时间戳字段存储的操作执行时间。

我一直在四处寻找，gae-pytz 作为一个非常常见的答案被抛出，但它已经一年多没有更新了：

[http://pypi.python.org/pypi/gaepytz](http://pypi.python.org/pypi/gaepytz)

这让我想知道我是否忽略了一些非常简单的东西，或者添加了我找不到任何文档的新功能。

我所需要的只是将数据存储区的 UTC 时间戳显示为一个特定的时区，并可能根据该时区的参考点进行一些基本过滤。最有效的方法是什么？

# javascript - 从 javaScript Phonegap 上传文件的方法

> ID：13576097
> 
> 赞同：0
> 
> 时间：2012-11-27T01:30:08.597
> 
> 标签：javascript, android, wcf, cordova

我正在使用 phonegap 开发一个 Android 应用程序，我需要知道如何通过 JavaScript 上传文件（图像和视频）。

任何人都可以帮助我吗？，给我任何想法或什么..

应用程序使用 WCF Rest Web 服务。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T01:31:57.047

使用文件传输 API - [http://docs.phonegap.com/en/1.0.0/phonegap_file_file.md.html#FileTransfer](http://docs.phonegap.com/en/1.0.0/phonegap_file_file.md.html#FileTransfer)应该可以解决问题:)

编辑 - 要使用文件传输，你会做这样的事情..

```
var options = new FileUploadOptions();
options.fileKey="photo";
options.fileName=fileURI.substr(fileURI.lastIndexOf('/')+1);
options.mimeType="image/jpeg";

var params = new Object();
params.value1 = "test";
params.value2 = "param";

options.params = params;

var ft = new FileTransfer();
ft.upload(fileURI, "http://some.server.com/upload.php", win, fail, options); 
```

确保您正在定义 fileURI。在您的服务器上，您将寻找名称为“照片”或您所称的文件密钥的帖子。

# android - Android 将数据从应用程序传递到浏览器

> ID：13576098
> 
> 赞同：3
> 
> 时间：2012-11-27T01:30:14.340
> 
> 标签：android

在 android 中，我们可以使用`intent-filter`.
例如：

```
<intent-filter>
    <data android:scheme="http" android:host="twitter.com"/>
    <action android:name="android.intent.action.VIEW" />
</intent-filter> 
```

我们可以从浏览器获取数据如下：

```
// Getting data for http://twitter.com/status/12345
Uri data = getIntent().getData();
String scheme = data.getScheme(); // "http"
String host = data.getHost(); // "twitter.com"
List<String> params = data.getPathSegments();
String first = params.get(0); // "status"
String second = params.get(1); // "12345" 
```

我的问题是：
是否可以反过来做？
假设我想将字符串传递给浏览器，这可能吗？
如果可能，该怎么做？
我做了一些研究，结论是安全问题是不允许的。
我想也许可以四处走走，这就是我决定问的原因。
提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:46:01.753

你会考虑使用 WebView 吗？

如果是这样，您可以为 HTTP GET 传递带有参数的 url，或者您可以为 HTTP POST 进行 url 编码。

文档：http: [//developer.android.com/reference/android/webkit/WebView.html](http://developer.android.com/reference/android/webkit/WebView.html)

# ruby-on-rails - Twitter Bootstrap 在本地机器上显示奇怪，在生产中很好

> ID：13576100
> 
> 赞同：0
> 
> 时间：2012-11-27T01:30:32.200
> 
> 标签：ruby-on-rails, twitter-bootstrap, twitter-bootstrap-rails

我有一个奇怪的问题。我的 rails 应用程序在 prod 中看起来不错，但我最近开始在另一台计算机上开发它，而且首页似乎忘记了它的页边距。当我提交所有内容并将其投入生产时，就没有问题了。

我正在使用 twitter-bootstrap-rails 并且根本没有自定义样式表。

![当地的](../Images/fc465a40602934caef782a2069d72e70.png)

![生产](../Images/79cf91a756e21f5aaa7ecfb6a67cc709.png)

在我的本地机器上，这张图片的所有内容都挤在浏览器的左侧

这张照片显示了生产，其中一切都正确对齐

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T02:53:19.723

这可能是由于您正在运行服务器的模式。我的猜测是，当您运行`rails s development`vs时，您会看到不同之处`rails s production`。

我之前遇到过这个问题，这是我的 CSS 编译不正确的问题，因为我有一些糟糕的 CSS 浮动。

追踪可能非常隐蔽，因此首先查看您的资产层次结构并寻找任何不合适的地方。之后，您必须使用浏览器和检查工具（例如通过 Chrome）进行调查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:32:45.177

固定标题栏有类似的问题，失去了它的风格。看起来这是 twitter-bootstrap-rails gem 从 2.0.3 到新的 2.1.6 的更新。

随着更新，我收到一个关于 twitter-bootstrap-rails v2.1.6 的错误，错误为“rails app: `method_missing': undefined method`less”

关于 twitter-bootstrap-rails 问题列表的讨论很多：请参阅[v2.1.6 中断应用程序](https://github.com/seyhunak/twitter-bootstrap-rails/issues/437)，其中解释了许多修改后的 Gemfile 配置。

到目前为止，应用这些建议还没有解决我的标题栏问题，根据 Twitter Bootstrap 示例，标题栏是黑色的，现在显示为灰色背景，如 LH 导航栏。怀疑这与资产的编译或链接较少有关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T14:27:14.110

我不确定问题到底出在哪里，但是一旦我将应用程序链接到我的 Mac 上的 Pow，一切都会正常显示。奇怪的。无论如何，我不再有问题了。

# c++ - 声明为友元的 C++ 重载运算符

> ID：13576101
> 
> 赞同：1
> 
> 时间：2012-11-27T01:30:36.703
> 
> 标签：c++, templates

我在 Xcode C++ 程序中将重载运算符声明为友元

```
template <typename T> friend class list_template;
template <typename T> friend ostream& operator<< (ostream &, list_template<T> &); 
```

它给了我一个关于 list_template 没有被声明的第二个声明的错误？

如果我 #include 声明 list_template 的文件，我会遇到更多问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:01:26.767

如果我了解您要执行的操作，您将缺少 list_template 的全局前向声明：

**我的类.h**

```
// forward declarator. must match definition in list_template.h
template<typename T> class list_template;

class MyClass
{
public:
    MyClass() {};
    virtual ~MyClass() {};

    template<typename T> friend class list_template;
    template<typename T> friend ostream& operator <<(ostream&, const list_template<T>&);
}; 
```

**list_template.h**

```
template<typename T>
class list_template
{
public:
    list_template() {};
    virtual ~list_template() {};

    // declare friend ostream operator <<
    friend ostream& operator << <>(ostream& os, const list_template<T>& lt);
};

// ostream insertion operator <<
template<typename T>
ostream& operator <<(ostream& os, const list_template<T>& lt)
{
    // TODO: use lt here.
    return os;
} 
```

至少我*认为*这离你要去的地方很近。

# java - JMX Spring 连接到 localhost 而不指定服务器地址和端口

> ID：13576110
> 
> 赞同：0
> 
> 时间：2012-11-27T01:31:54.043
> 
> 标签：java, spring, jmx, spring-jmx

我指的是这里

```
http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/jmx.html#jmx-proxy 
```

我正在尝试连接到 localhost MBeanServer 并使用 Spring Proxy 执行一些操作。问题只是指定了 ObjectName 和 ProxyInterface，我无法连接到 localhost。我可以通过指定 MBeanProxyFactoryBean 的服务器属性来解决这个问题。

这里是我的春天`context.xml`

```
bean id="proxyWithoutServer" class="org.springframework.jmx.access.MBeanProxyFactoryBean"
          p:objectName="com.xxx.yyy"
          p:proxyInterface="com.MyInterface" 

bean id="proxyWithServer" class="org.springframework.jmx.access.MBeanProxyFactoryBean"
          p:objectName="com.xxx.yyy"
          p:proxyInterface="com.MyInterface" 
p:server-ref="clientConnector"

<bean id="clientConnector" class="org.springframework.jmx.support.MBeanServerConnectionFactoryBean"
          p:serviceUrl="service:jmx:rmi://localhost/jndi/rmi://localhost:8001/jmxrmi" /> 
```

在 Java 代码中，我只是做

```
MyInterface myInterface = context.getBean("proxyWithoutServer");
myInterface.myMethod(); 
```

但这不起作用。- 说无法连接到本地主机

但是如果我使用

```
MyInterface myInterface = context.getBean("proxyWithServer");
myInterface.myMethod(); 
```

这行得通。

这里的问题是该代码将在多个服务器上运行，并且每个服务器中的 jmx 端口会不同。所以我不想指定端口号。因此，我希望它的 proxyWithoutServer 版本能够工作。查看 spring jmx 文档，如果我们尝试连接到本地 MBean 服务器，似乎不需要指定服务器端口。需要一些关于我在这里做错了什么的建议。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T02:18:32.697

创建对 MBeanServer 的本地引用。

```
<context:mbean-server id="localMBeanServer"/> 
```

然后`localMBeanServer`在 p:server-ref 中使用。

# jquery - 使用 Jquery ScrollTo 插件如何选择特定的 jquery 选择器，即：find.('element')

> ID：13576113
> 
> 赞同：1
> 
> 时间：2012-11-27T01:32:10.390
> 
> 标签：jquery, css-selectors, scrollto

```
 $(document).ready(function(){
        $(function(){
            $(".content").hide();
            $('.more-btn').click(function( e ){
               e.stopPropagation(); // to lower "DOM layers"
               $(this).closest('section').find('.content').show(500, 'swing'), $('body').css('cursor','help'),$.scrollTo('.content', 800, {offset:-50, easing:'easeInOutBack'} );
               $(this).hide();
            }); 
```

这工作正常，我的问题是我可以弄清楚如何专门选择这个内容路径

```
$(this).closest('section').find('.content') 
```

在这里面

```
 $.scrollTo('.content', 800, {offset:-50, easing:'easeInOutBack'} ); 
```

似乎在使用 scrollTo 插件示例时我不能只使用普通的选择字符串

```
 $.scrollTo($(this).closest('section').find('.content'), 800, {offset:-50, easing:'easeInOutBack'} ); 
```

我觉得在插件中使用选择器需要不同的编写方式，如果我错了，请纠正我？

我应该告诉你我正在尝试滚动到最近的内容部分，具体取决于按下哪个按钮。

html是

```
 <section>
                <article class="toggle-box" id="toggle1">
                    <aside class="info-rollover">
                        <h3>Locavores</h3>
                        <button class="more-btn">Show More</button>
                    </aside>
                </article>
                <aside class="content">
                    <img src="images/loca/1.jpg"/>
                    <img src="images/loca/2.jpg"/>
                    <img src="images/loca/3.jpg"/>
                    <img src="images/loca/4.jpg"/>
                    <img src="images/loca/5.jpg"/>
                    <img src="images/loca/6.jpg"/>
                    <img src="images/loca/7.jpg"/>
                    <img src="images/loca/8.jpg"/>
                    <img src="images/loca/9.jpg"/>
                </aside>
        </section> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:33:56.473

UPDATE:

Your code works fine:

Instead of this:

```
$.scrollTo('.content', 800, {offset:-50, easing:'easeInOutBack'} ); 
```

you can use this:

```
$.scrollTo($(this).closest('section').find('.content'), 800, {offset:-50, easing:'easeInOutBack'} ); 
```

Please see this working fiddle: [http://jsfiddle.net/manishie/eeLms/](http://jsfiddle.net/manishie/eeLms/)

As per your comments, I've added in multiple sections, and click any of the buttons scrolls to the correct section.

mkm

# c# - VS2010 成功加载 SOS.dll 但在我的 64 位操作系统上无法使用其他命令

> ID：13576116
> 
> 赞同：0
> 
> 时间：2012-11-27T01:32:31.200
> 
> 标签：c#, .net, windbg, sos

如您所见，我使用VS2010 Professional加载了sos.dll，但是其他命令无法使用并继续抛出异常，如下所示：

> .load sos.dll 扩展 C:\Windows\Microsoft.NET\Framework\v4.0.30319\sos.dll 已加载
> 
> clr.dll 的 !clrstack PDB 符号未加载 OS 线程 ID：0x6d4 (1748) 子 SP IP 调用站点 0028f2b8 00370094 ConsoleApplication1.Program.Main(System.String[])**命令期间出错：IDebugClient 要求提供未实现的接口**
> 
> 0028f528 699e21bb [GCFrame: 0028f528]

我的电脑在64位Win7上运行，这会是问题吗？

任何人都可以帮助我吗？真的很感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:38:21.960

您是否启用了“非托管代码调试”？

请参阅此链接：

[http://social.msdn.microsoft.com/Forums/is/vsdebug/thread/04e1f64a-aea6-4516-b75d-e4cb1ac0f872](http://social.msdn.microsoft.com/Forums/is/vsdebug/thread/04e1f64a-aea6-4516-b75d-e4cb1ac0f872)

您是否升级到 .NET 4.5？看来这可能会导致问题。

[无法使用 VS 2010 启动 SOS.dll](https://stackoverflow.com/questions/10150810/unable-to-launch-sos-dll-using-vs-2010)

我知道在 WinDBG 中你可以发出这个命令：

```
.loadby sos clr 
```

这会导致它加载与 clr 位于同一目录中的 sos.dll。

# wordpress - 如何从 get_next_post 中排除子类别？

> ID：13576118
> 
> 赞同：0
> 
> 时间：2012-11-27T01:32:46.057
> 
> 标签：wordpress, wordpress-theming

我有 a 类（父类）和 b 类（a 类的子类）。

我正在使用 get_next_post 来获取下一篇文章。我需要在用户登录时有条件地包含子类别，并在用户注销时将其排除在子类别中。我想我可以使用几个 IF 语句，但是......

问题：当父类别和子类别都被检查并且我告诉 get_next_post 排除子类别时，它仍然包含它，因为检查了父类别。这个问题=我不能排除这些类别。

但是，如果我只检查子类别而不检查父类别，它根本不包括子类别。这个问题=我找不到在需要时包含该类别的方法。

关于如何实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:02:00.767

您可以排除类别作为 get_next_post() 的参数。因此，只需找到子类别 ID，并将它们作为 get_next_post() 的第二个参数传入。

[http://codex.wordpress.org/Function_Reference/get_next_post](http://codex.wordpress.org/Function_Reference/get_next_post)

# cmake - 按目录命名 CMake 目标

> ID：13576120
> 
> 赞同：0
> 
> 时间：2012-11-27T01:33:02.423
> 
> 标签：cmake

我是 CMake 的新手，遇到了一些麻烦。是否可以根据创建目标的目录命名 CMake 目标？例如，我想将我的库写入一个 lib/ 目录，以呼应我的源目录结构。

想象一下我有源目录 dir1 和 dir2，并且都创建了一个库 libmylib.a 通常 CMake 可能会抱怨创建具有相同名称的库/目标，但是如果这些库被写入 lib/dir1/libmylib.a 和 lib/dir2/ libmylib.a 然后你可以在你的 CMakeLists.txt 文件中将这些目标作为 dir1/libmylib 和 dir2/libmylib 引用（大概）而不会发生冲突。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:01:12.557

在 CMake 中，逻辑库名可以与目标生成的文件名完全解耦。`/`在您的目标名称中有 a 没有问题。你可以像这样添加你的库：

```
add_library(dir1/mylib STATIC source1 source2 ...)
set_property(TARGET dir1/mylib PROPERTY OUTPUT_NAME mylib) 
```

# instagram - 根据主题标签抓取 Instagram 照片

> ID：13576122
> 
> 赞同：3
> 
> 时间：2012-11-27T01:33:18.377
> 
> 标签：instagram, hashtag

我是 instagram 的新手，我的任务是编写一个应用程序来根据某个主题标签抓取 instagram 照片上传。这意味着如果应用程序启动并搜索主题标签“#awesomeevent”，任何上传带有该主题标签的照片的人都会自动将其存储到我们的数据库中。

该应用程序应该类似于[http://statigr.am/tag/](http://statigr.am/tag/)工作，但它应该将照片存储到数据库中，而不是显示照片。

这样做的过程是什么。从头到尾都有这个的任何教程。甚至涵盖如何从头开始创建 Instagram 应用程序。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T06:06:22.753

我们开发人员经常忽略的事情是 API 条款和条件。我自己去过那里。

> API 使用条款
> 
> 在您开始使用 API 之前，我们想告诉您一些指南。请务必阅读完整的[API 使用条款](http://instagram.com/about/legal/terms/api/)
> 
> 使用条款。以下是您将阅读的内容：
> 
> *   Instagram 用户拥有他们的图像。您有责任确保尊重该权利。
>     
>     
> *   您不能在应用程序中使用 Instagram 名称。
>     
>     
> *   **未经用户明确同意，您不能使用 Instagram API 抓取或存储用户的图像。**
>     
>     
> *   您无法复制 Instagram.com 的核心用户体验
>     
>     
> *   不要滥用 API。请求太多太快会关闭您的访问权限

但是，条款中的一部分还指出：

> *   除合理期限外，您不得缓存或存储任何 Instagram 用户照片，以便向 Instagram 用户提供您提供的服务。

希望这是您真正开始编码和存储图像之前的开始。

API 使用条款：http: [//instagram.com/about/legal/terms/api/](http://instagram.com/about/legal/terms/api/)

API：http: [//instagram.com/developer/](http://instagram.com/developer/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T01:40:20.977

对于初学者，您应该咨询[instagram api](http://instagram.com/developer/)。

至于您需要的具体api是：

```
/tags/tag-name/media/recent 
```

例如，如果您想从 tag 中查找图像`#awesomeevent`，您将执行 api 查询：

```
https://api.instagram.com/v1/tags/awesomeevent/media/recent?access_token=ACCESS-TOKEN 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T17:04:37.957

我会看看 Instagram 提供的两个库。ruby 库位于[https://github.com/Instagram/instagram-ruby-gem，python](https://github.com/Instagram/instagram-ruby-gem)库位于[https://github.com/Instagram/python-instagram](https://github.com/Instagram/python-instagram)

如果您使用任一库进行编程，它们似乎都有示例可以帮助您入门。

就存储问题而言，您是否可以存储图像的 URL 地址而不是实际图像本身？API返回JSON信息，返回图片的URL。

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-17T17:56:57.610

您可以使用以下 ruby​​ 脚本来检索图像并将它们保存到文件中。然后，您可以引用数据库中的文件或将最后一个块替换为您的特定数据库实现的代码。在不知道您的数据库类型和架构的情况下，没有人可以告诉您如何向其中添加内容。

```
require "instagram"
require "restclient"

Instagram.configure do |config|
  config.client_id = INSTAGRAM_CLIENT_ID 
  config.client_secret = INSTAGRAM_CLIENT_SECRET
end

instagram_client = Instagram.client(:access_token => INSTAGRAM_ACCESS_TOKEN)
tags = instagram_client.tag_search('cat')
urls = Array.new

for media_item in instagram_client.tag_recent_media(tags[0].name)
  urls << media_item.images.standard_resolution.url
end

urls.each_with_index do |url, idx|
  image = RestClient.get(url)
  path = Dir.pwd + "/#{idx}.jpg"
  File.open(path, 'w') {|f| f.write(image) }
end 
```

# java - 通过 Java 获取 Windows 文件关联

> ID：13576124
> 
> 赞同：1
> 
> 时间：2012-11-27T01:33:24.357
> 
> 标签：java, windows, registry, associations

我认为这将是一件容易的事，但是。. . 我希望我的 Java 程序能够获取用户的 Windows 文件关联。换句话说，我想知道用户使用什么来打开 .txt 文件、.cvs 文件等。 assoc 和 ftype 命令提供该信息，但不为用户提供。换句话说，如果我将文本编辑器设置为 Notepad++，则 assoc 和 ftype 不会显示它。它们改为显示系统默认值记事本。看起来我必须从注册表中获取该信息，但我有两个问题。1）我不知道我想要提取的确切注册表项（尽管我已经查看了“reg query HKEY_CURRENT_USER、HKEY_CLASSES_ROOT 等）2）我不知道如何从注册表中提取密钥。我已经看到提到过 JNI，但还没有弄清楚细节。任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T01:52:42.653

在 Win7 中，您可以在

```
HKLM\SOFTWARE\Classes\<extension>\(Default) 
```

钥匙。

例如，在我的机器上

```
HKLM\SOFTWARE\Classes\.txt 
```

有一个（默认）键`txtfile`。

在同一路径中，您可以找到打开类文件的内容`txtfile`：

```
HKLM\SOFTWARE\Classes\txtfile 
```

哪个应该有一个子路径`...\shell\open\command`

在我的系统上，

```
HKLM\SOFTWARE\Classes\txtfile\shell\open\command\(Default) 
```

是

```
%SystemRoot%\system32\NOTEPAD.EXE %1 
```

您可以对其进行解析以找到打开 .txt 文件的可执行文件。

对于用户特定的自定义，您可以替换

```
HKLM\SOFTWARE\Classes\ 
```

和

```
HKCU\Software\Classes\ 
```

尽管如此，如果可能的话，我喜欢 MadProgrammer 对您的应用程序的建议。

* 我确定“类”有更好的名称，我只是不知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T01:53:01.623

看看 Eclipse 的 Program 类，它应该是你想要的：[http ://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg %2Feclipse%2Fswt%2Fprogram%2FProgram.html](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Fprogram%2FProgram.html)。

如果您想启动该程序，请使用桌面类（如 MadProgrammer 建议的）

# facebook - 允许通过我的应用程序将 Flash 内容共享到用户的 Facebook 时间线

> ID：13576125
> 
> 赞同：0
> 
> 时间：2012-11-27T01:33:40.927
> 
> 标签：facebook

如何提交请求，将我的应用程序添加到白名单中，通过这些白名单可以将扩展的 Flash 内容帖子共享/添加到内嵌用户供稿中？

我之所以问，是因为我试图找到一种通过他们的网站直接联系 Facebook 的方法，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:53:13.077

我认为您所指的功能是此处描述的“Feed Gaming”：

[https://developers.facebook.com/docs/feed-gaming/](https://developers.facebook.com/docs/feed-gaming/)

该指南解释了这一切，但基本上你需要创建一个提供 og:video 元标记的 Open Graph 对象，并且它的 og:video:type 为“application/x-shockwave-flash”

希望有帮助。不需要白名单。

# php - PHP是否会死（）函数断开mysql？

> ID：13576128
> 
> 赞同：3
> 
> 时间：2012-11-27T01:34:06.510
> 
> 标签：php, mysql

我总是`mysqli_close()`在发出`die()`命令之前打电话。

这很乏味，有时甚至会忘记，但我想确定该`die`命令是否关闭了所有 mysql 连接，或者它仍然保持打开状态？

我无法通过 PHP 进行检查，因为脚本在`die()`命令之后停止。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T01:35:08.107

当脚本执行结束时，所有非持久性资源都将关闭。

简而言之，退出执行是完全安全的。PHP 将为您处理关闭所有内容。（再说一次，对于持久连接，虽然那些需要在某个地方保持打开状态，所以如果你只是普通的 PHP 可执行文件而没有围绕它的网络服务器，那么它们也将被关闭。）

旁注：我从来没有找到任何官方文档，所以你可能不应该依赖它，但是从几周前我做的一些测试中，当一个类似的问题被问到时，似乎资源已经关闭超出范围后立即。我也只测试了文件和 mysql 连接资源，所以可能就是这些。

# algorithm - 检查一个点是否在立方体内（使用matlab）

> ID：13576129
> 
> 赞同：2
> 
> 时间：2012-11-27T01:34:19.677
> 
> 标签：algorithm, matlab, octave

让我用一个问题来澄清我的问题：

假设我有一个大立方体= 100 * 100 * 100，大立方体内部有一些小立方体构成大立方体，它们的大小为= 10 * 10 * 10。（我在大立方体中有 1000 个小立方体）现在，我需要检查我的点 (2,2,2) 存在于哪个立方体中。答案肯定是这个问题的第一个立方体。然后在找到立方体后，我将保存每个立方体所包含的点数。

我的尝试：起初我认为如果我将我的观点与 8 个角进行比较就足够了。我认为我的点的坐标必须大于立方体的 4 个角，小于立方体的剩余 4 个角，然后我将迭代地增加角点的坐标以检查其他立方体。然而，现在我发现我错了。

什么是最适合这个问题的算法？

问候，艾玛迪斯

注意：我使用的是 MATLAB，因此如果有任何用于此目的的内置函数，我也可以使用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:25:44.870

假设你有一个立方体 N*N*N。然后创建维度为 n*n*n 的小立方体。然后，所有立方体都可以用一个 3D 数组表示，这样在 (a*n, b*n, c*n) 处离原点最近的边的立方体由这个 3d 数组中的索引 (a, b, c) 表示。存储在该索引处的值是该立方体内的点数。这是伪代码

```
//Pseudo code
int [N/n][N/n][N/n] arrayWithCountOfPointsInsideCubes;

void function countPointsForCubes(double point_x, point_y, point_z)
{ 
  arrayWithCountOfPointsInsideCubes[pint_x/n][point_y/n][point_z/n]++;
} 
```

# javascript - 基于选择框的带有可选字段的动态表单

> ID：13576131
> 
> 赞同：-1
> 
> 时间：2012-11-27T01:34:45.713
> 
> 标签：javascript, jquery, html

我有一个问题，我搜索了如何解决这个问题，但我发现了一些简单且与我想要的类似的东西，如下所示：

我需要一个表单，用户在组合框表单字段中选择一个选项会发生变化。

例如：选择选项 1 字段 1、字段 2 和字段 3 显示为填充 选择选项 2 字段 4、字段 5 和字段 6 显示为填充

并且当提交标识自己时填写了选项 1 或选项 2 的字段

示例 HTML：

```
<select id="option_selector" name="options">
    <option value="option1">Option 1</option>
    <option value="option2">Option 2</option>
</select>
<div id="options">
    <div id="option1">
        <input type="text" name="input1" value="Input 1" />
        <input type="text" name="input2" value="Input 2" />
        <input type="text" name="input3" value="Input 3" />
    </div>
    <div id="option2">
        <input type="text" name="input4" value="Input 4" />
        <input type="text" name="input5" value="Input 5" />
        <input type="text" name="input6" value="Input 6" />
    </div>
</div> 
```

任何人都知道任何教程或可以指出我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T01:47:11.783

最近在工作中做了这样的事情。这将做你想要的。

我这样做是为了使 select 的名称与选项 div 的 id 匹配，并且选项的值与各个部分包装器的 id 匹配。

这样，您可以稍微更改它以在单个页面上使用多个可选选择。

在这里演示：http: [//jsfiddle.net/GUCtC/](http://jsfiddle.net/GUCtC/)

```
<select id="option_selector" name="options">
    <option value="option1">Option 1</option>
    <option value="option2">Option 2</option>
</select>
<div id="options">
    <div id="option1">
        <input type="text" name="input1" value="Input 1" />
        <input type="text" name="input2" value="Input 2" />
        <input type="text" name="input3" value="Input 3" />
    </div>
    <div id="option2">
        <input type="text" name="input4" value="Input 4" />
        <input type="text" name="input5" value="Input 5" />
        <input type="text" name="input6" value="Input 6" />
    </div>
</div>
<script type="text/javascript">
        $('#option_selector').change(refresh_inputs);
        refresh_inputs();
        function refresh_inputs() {
            var name = $('#option_selector').attr('name');
            var val = $('#option_selector').val();
            $('#'+name+' div').hide();
            $('#'+val).show();
        }
</script> 
```

# performance - zlib 对提高基于 BSD Scoket 的客户端/服务器应用程序的数据传输性能有用吗？

> ID：13576132
> 
> 赞同：0
> 
> 时间：2012-11-27T01:34:49.310
> 
> 标签：performance, zlib, tcp-ip

我正在开发一个以两种方式运行的应用程序，例如客户端/服务器两者，以安装在 android/iphone 上的网络应用程序的形式。

网络应用程序与 xmpp 信令链接，因此对等方可以相互定位。

**用例是：**用户可以向远程对等方发送文件，或者远程对等方可以向用户发送文件。

**现在我的目标是提高数据传输性能**，然后我开始了解 zLib，例如，在发送文件之前它可以被压缩，在接收它时可以解压缩，这会提高性能吗？

**[1]。**这样做可行吗？（例如，如果文件大于 5 MB 或 2 MB 或仅在特定情况下？）

**[2]。**有什么例子可以开始吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:35:07.357

文件是什么？如果它们已经被压缩，例如 jpg、mp3、mov 等，那么不，压缩将无济于事。您应该简单地尝试使用 gzip 或 zip 压缩您的数据，看看它是否变小了。这将首先表明 zlib 是否会有所帮助。

其次，您需要考虑与发送压缩数据而不是未压缩数据所节省的时间相比，压缩所花费的时间。

至于大小，无所谓。zlib 流用于压缩和解压缩，因此整个文件不需要由 zlib 存储。您可以喂它并分块喂它。

# android - 谷歌地图 GPS 追踪应用

> ID：13576135
> 
> 赞同：1
> 
> 时间：2012-11-27T01:35:47.093
> 
> 标签：android, map, gps, tracking, geopoints

我一直试图让这个应用程序绘制一条连接从用户当前位置收集的 geoPoints 数组的线。尝试填充阵列以便可以连接它们时，我被卡住了。

代码：

```
public class MainActivity extends MapActivity implements LocationListener {

private MyLocationOverlay myLocationOverlay;
private MapController mMapController;
private MapView mapview;
private MapController controller;

Location Location;
ArrayList<GeoPoint> geoPointsArray = new ArrayList<GeoPoint>();
String provider = LocationManager.GPS_PROVIDER;
double lat;
double lon;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    LocationManager service = (LocationManager) getSystemService(LOCATION_SERVICE);
    boolean enabled = service.isProviderEnabled(provider); 

    // Check if enabled and if not send user to the GPS settings
    if (!enabled) {
        Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
        startActivity(intent);
    }

    //Creates new MapView
    MapView mapview = (MapView) findViewById(R.id.mapView);
    //Sets up Zoom buttons on screen
    mapview.setBuiltInZoomControls(true);
    //Sets to Satellite View on Map
    mapview.setSatellite(true);
    myLocationOverlay = new MyLocationOverlay(this, mapview);
    myLocationOverlay.enableMyLocation();
    myLocationOverlay.enableCompass();
    mapview.getOverlays().add(myLocationOverlay);
    mapview.invalidate();
    mMapController = mapview.getController();
    //Sets Zoom level
    mMapController.setZoom(20);
    //Moves map To current location.
    myLocationOverlay.runOnFirstFix(new Runnable() {
        @Override
        public void run() {
            mMapController.animateTo(myLocationOverlay.getMyLocation());
        }
    }); 
}

class MyOverlay extends Overlay{
    public MyOverlay(){ 
    }   

    public void draw(Canvas canvas, MapView mapv, boolean shadow){
    super.draw(canvas, mapv, shadow);

    Paint mPaint = new Paint();
    Path p = new Path();
    Projection projection = mapview.getProjection();

    mPaint.setStyle(Style.FILL_AND_STROKE);
    mPaint.setColor(Color.RED);

    mPaint.setDither(true);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(2);

    for (int i = 0; i < geoPointsArray.size(); i++) {
        if (i == geoPointsArray.size() - 1) {
            break;
        }

        Point from = new Point();
        Point to = new Point();
        projection.toPixels(geoPointsArray.get(i), from);
        projection.toPixels(geoPointsArray.get(i + 1), to);
        p.moveTo(from.x, from.y);
        p.lineTo(to.x, to.y);
   }

}

}

    @Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

@Override
protected void onPause() {
    super.onPause();
    myLocationOverlay.disableMyLocation();
}

@Override
protected void onResume() {
    super.onResume();
    myLocationOverlay.enableMyLocation();
}

@Override
public void onLocationChanged(Location location) {
    // TODO Auto-generated method stub

    if (Location != null){
        lat = Location.getLatitude();
        lon = Location.getLongitude();
        GeoPoint New_geopoint = new GeoPoint((int)(lat*1e6),(int)(lon*1e6));
        geoPointsArray.add(New_geopoint);
        controller.animateTo(New_geopoint);

    }

}

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

}

} 
```

任何帮助都会很棒。谢谢

# r - 如何使用 geom_text 在堆积条形图中显示值？

> ID：13576139
> 
> 赞同：4
> 
> 时间：2012-11-27T01:36:26.277
> 
> 标签：r, ggplot2

我想在堆积栏中显示百分比数字。但是，其中一组的比例非常低。两个值相互重叠。我改为'职位='身份'。它仍然无法正常工作......有什么想法吗？

```
x4.can.m <- structure(list(canopy = structure(c(1L, 2L, 3L, 1L, 2L, 3L, 1L, 
2L, 3L, 1L, 2L, 3L, 1L, 2L, 3L), .Label = c("0%", "1 to 84%", 
"85% +"), class = "factor"), YearQuarter = structure(c(1L, 1L, 
1L, 2L, 2L, 2L, 3L, 3L, 3L, 4L, 4L, 4L, 5L, 5L, 5L), .Label = c("2011-09-01", 
"2011-12-01", "2012-03-01", "2012-06-01", "2012-09-01"), class = "factor"), 
    value = c(0.51, 0.01, 0.48, 0.52, 0.01, 0.47, 0.53, 0.01, 
    0.47, 0.57, 0.01, 0.41, 0.61, 0.01, 0.38)), .Names = c("canopy", 
"YearQuarter", "value"), row.names = c(NA, -15L), class = "data.frame")

x4.can.bar <- ggplot(data=x4.can.m, aes(x=factor(YearQuarter), y=value,fill=canopy)) + geom_bar(stat="identity",position = "stack",ymax=100)

x4.can.bar+scale_y_continuous(formatter='percent')+
 labs(y="Percentage",x="Year Quarter") + 
 geom_text(aes(label =paste(round(value*100,0),"%",sep="")),size = 3, hjust = 0.5, vjust = 4,position ="identity") 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T02:40:37.447

您需要为标签的位置指定合理的值 - 如果您在`ggplot`通话之外执行此操作，则比在通话中尝试执行此操作要容易得多。

您可以通过取每个堆叠组件的中点来做到这一点。

使用`plyr`and`ddply`这很简单，只需将累积总和减去每个内当前值的一半`YearQuarter`

```
library(plyr)
x4.can.m <- ddply(x4.can.m, .(YearQuarter), mutate, csum = cumsum(value)-value/2)

x4.can.bar <- ggplot(data=x4.can.m, aes(x=factor(YearQuarter), y=value,fill=canopy)) +  
 geom_bar(stat="identity",position = "stack",ymax=100)

x4.can.bar + 
 scale_y_continuous(expand = c(0,0), labels = percent) +
 labs(y="Percentage",x="Year Quarter")+
 geom_text(aes(y = csum,label =paste(round(value*100,0),"%",sep="")),
           size = 3, hjust = 1, vjust = 0) 
```

请注意，我正在使用`ggplot2_0.9.2.1`, 所以`formatter`不再是 的有效参数`scale_y_continuous`，替换为`label = percent`. 请参阅[此问题](https://stackoverflow.com/questions/10146109/formatter-argument-in-scale-continuous-throwing-errors-in-r-2-15)和相关链接

![在此处输入图像描述](../Images/559c223c39be1bff4d43c267a63cfad8.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-27T02:15:50.133

一种解决方案是将堆栈栏更改为闪避栏

```
x4.can.bar <- ggplot(data=x4.can.m, aes(x=factor(YearQuarter), y=value,fill=canopy)) + 
                    geom_bar(stat="identity",position = "dodge",ymax=100) +
             geom_text(aes(label =paste(round(value*100,0),"%",sep=""),ymax=0), 
                       position=position_dodge(width=0.9), vjust=-0.25)
x4.can.bar 
```

![在此处输入图像描述](../Images/0d9200e59ff0bceae8d6db4ea17a908f.png)

# python - protoRPC：返回字典

> ID：13576140
> 
> 赞同：3
> 
> 时间：2012-11-27T01:36:30.177
> 
> 标签：python, google-app-engine, protorpc

一个人如何`dict`通过返回一个相似的对象`protoRPC`？

我尝试使用`FieldList`无济于事。我只看到以下字段定义：

```
 'IntegerField',
       'FloatField',
       'BooleanField',
       'BytesField',
       'StringField',
       'MessageField',
       'EnumField', 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T02:34:47.267

有两种情况：

**1）你`dict`有一个明确定义的模式：**这是 ProtoRPC 的最佳用例，如果可能的话，你应该尝试将它放入一个模式中。在这种情况下，您将使用`MessageField`与字典中的模式匹配的某个`Message`类。

例如，而不是

```
{'amount': 31, 'type': 'fish', mine: False} 
```

你可以定义

```
from protorpc import messages
class MyCatch(messages.Message):
  amount = messages.IntegerField(1)
  type = messages.StringField(2)
  mine = messages.BooleanField(3) 
```

然后通过在字段中使用此消息定义

```
messages.MessageField(MyCatch, index, ...) 
```

**2）您`dict`没有明确定义的模式：**在这种情况下，您可以使用`json`将字典转储到字符串并请求`ensure_ascii=True`确保返回类型是字节（`str`）对象。然后你可以只使用一个`BytesField`.

例如：

```
import json

class MyMessage(messages.Message):
   some_dict = messages.BytesField(1)

my_dict = {'amount': 31, 'type': 'fish', mine: False}
message = MyMessage(some_dict=json.dumps(my_dict, ensure_ascii=True)) 
```

默认情况下，使用`ensure_ascii`是可选`True`的，但这可能会根据您的环境而改变。

相反，您可以使用`pickle`序列化您的字典。该方法`pickle.dumps`始终输出 ASCII/二进制，因此通过换出`json.dumps`并`pickle.dumps`删除`ensure_ascii=True`，您将获得相同的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-11T08:30:53.373

可以像这样创建自定义`JsonField`：

```
In  [1]: class JsonField(messages.StringField):
             type = dict 
```

然后，您可以将其用作任何其他字段：

```
In  [2]: class MyMessage(messages.Message):
             data = JsonField(1)

In  [3]: m = MyMessage(data={"foo": "bar"})

In  [4]: m.data
Out [4]: {'foo': 'bar'} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T10:32:00.927

对于批准答案中的第一个选项，我们可以添加一个参数repeat=True，因此我们将有一个json列表作为答案。我在[https://developers.google.com/appengine/docs/python/tools/protorpc/overview?hl=en#Defining_the_Response_Message检查了它](https://developers.google.com/appengine/docs/python/tools/protorpc/overview?hl=en#Defining_the_Response_Message)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-11T06:18:28.847

有点涉及，但我有一个非常接近 dict 实现的方法`protorpc`：[https ://gist.github.com/linuxluser/32d4a9c36ca0b8715ad4](https://gist.github.com/linuxluser/32d4a9c36ca0b8715ad4)

它仅限于使用纯字符串键和简单（非嵌套）值。但是，如果您的数据属于该类别，则此解决方案应该可以正常工作。

这个想法有两个部分：

1.  创建一个`MultiField`可以保存任意值类型的新字段类型。
2.  创建一个类似 dict 的类型`MapField`，将键值对存储在`MultiField`类型列表中。

你像这样使用它：

```
import messages
import mapfield

class MyMessage(messages.Message):
  some_dict = mapfield.MapField(1)

my_message = MyMessage(some_dict={"foo": 7, "bar": False, "baz": 9.2, "qux": "nog"}) 
```

这只是一个开始。可能会更好。欢迎改进。:)

# database - 对象关闭时不允许操作 - 在第一行创建表语句？

> ID：13576147
> 
> 赞同：2
> 
> 时间：2012-11-27T01:37:17.950
> 
> 标签：database, excel, vba

我正在尝试在电子表格的特定空间中写入查询结果。SQL 创建临时表以在查询期间使用，然后在最后删除它们。这是我的问题的原因吗？我在下面发布了我的源代码。错误在第 530 行抛出。有没有更好的方法来做到这一点？

```
410   With wsSheet
420   Set rnStart = Sheets("Discharge Information").Range("Q51")
430   End With

440   strSQL = "create table #encounters ( DischargeKey int,EncounterID varchar(25))          insert into #encounters " & _
           "SELECT top 30 dischargekey,encounternumber from discharges order by dischargedate desc " & _
           "CREATE TABLE #icd9_poa(DischargeKey int,ICD9 nvarchar(max),POA nvarchar(max)) " & _
           "DECLARE @i int, @f int SET @i = 1 SET @f = ( " & _
           "SELECT REPLACE(column_name,'icd9_POA_','') FROM information_schema.Columns WHERE column_name LIKE 'icd9_POA_%' AND table_name = 'temp_discharge' AND ordinal_position IN ( " & _
           "SELECT Max (ordinal_position) FROM information_schema.Columns " & _
           "WHERE column_name LIKE 'icd9_POA_%' AND table_name = 'temp_discharge')) " & _
           "WHILE @i <= @f " & _
           "BEGIN IF @i=1 " & _
           "BEGIN INSERT INTO #icd9_poa " & _
           "SELECT d.DischargeKey,i.icd9code,poa.poa " & _
           "FROM discharges d " & _
           "inner join #encounters e on e.dischargekey = d.dischargekey INNER join icd9diagnosesbridge icb on icb.discharge=d.dischargekey INNER join icd9diagnoses i on icb.icd9 = i.icd9key INNER join presentonadmission poa on icb.presentonadmission = poa.poakey " & _
           "WHERE icb.Icd9Sequence = 1 End " & _
           "IF @I>1 BEGIN " & _
           "Update t SET t.Icd9 = t.Icd9 + ', '+i.Icd9Code,t.poa = t.poa + ', '+ poa.poa " & _
           "FROM  #Icd9_poa t" & _
           "INNER JOIN Discharges d ON (t.DischargeKey=d.DischargeKey) INNER JOIN Icd9DiagnosesBridge icb ON (icb.Discharge=d.DischargeKey) INNER JOIN Icd9Diagnoses i ON (icb.Icd9=i.icd9Key) INNER JOIN PresentOnAdmission poa ON (icb.PresentOnAdmission=poa.PoaKey) " & _
           "WHERE icb.Icd9Sequence=@i End " & _
           "SET @i = @i + 1 End " & _
           "select icd9, poa from #icd9_poa " & _
           "drop table #icd9_poa " & _
           "drop table #encounters "

450   Set cnt = New ADODB.Connection

460

470   With cnt
480   .CursorLocation = adUseClient
490   .Open ConnectionString
500   .CommandTimeout = 0
510   Set rst = .Execute(strSQL)
520   End With
530   rnStart.CopyFromRecordset rst 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:38:26.630

快速浏览一下，我会尝试这种方法：

```
RETURNS @icd9_poa TABLE (
    DischargeKey int,
    ICD9 nvarchar(max),
    POA nvarchar(max)) 
AS
    BEGIN 
```

...然后插入您的 SQL（记住`icd9_poa`已经定义）

```
 END 
```

不要担心删除临时表 - SQL Server 将在您的过程完成运行后立即删除它们

我无法完全测试它，因为我没有您的数据，但这是一种从 SQL 过程返回记录集的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T02:30:35.500

删除临时表不是必需的，也不会导致您的错误。

在您调用“CopyFromRecordSet”时，您的连接似乎已关闭，请尝试将该调用移至“With”块。

# javascript - 创建一个 HTML5 钢琴卷帘编辑器

> ID：13576149
> 
> 赞同：3
> 
> 时间：2012-11-27T01:38:01.130
> 
> 标签：javascript, html, css, web-applications

我正在创建一个类似钢琴卷的界面，就像你可能在诸如ableton之类的DAW中找到的界面，看起来像这样[http://www.abletonlife.com/wp-content/uploads/2010/04/midi-track-](http://www.abletonlife.com/wp-content/uploads/2010/04/midi-track-big.jpg)大[.jpg](http://www.abletonlife.com/wp-content/uploads/2010/04/midi-track-big.jpg) 网格代表一个画布，用于绘制要播放的音符，红色方块是要播放的音符。您可以双击空白区域以创建新注释，并且可以拖动边缘以更改注释的长度。

我是 Web 开发的新手，所以我很难看到正确的架构可能是什么。以我有限的知识，以下是我能想到的架构。

1) 水平弹性盒的行。

```
display: box;
box-orient: horizontal;
box-flex: 1; 
```

像这样的东西，[http://jsfiddle.net/ZgzNw/](http://jsfiddle.net/ZgzNw/)。

优点：

*   调整浏览器窗口大小时，浏览器将自动
    处理注释大小的调整，从而调整网格大小。调整 divs/notes 的大小也很容易处理，以放大和缩小和更改量化值。

*   所有位置的所有笔记都已经存在，当双击“创建”一个新笔记时，您所要做的就是更改该笔记的 css（变为红色）等。

缺点：

*   由于网格中的每个空间都有一个 div，即使是没有音符要播放的空白空间，也会有很多 div。浏览器可以处理数千个 div 吗？举个极端的例子，如果有 32 分音符量化，一首 200BPM 的歌曲每分钟有 50 小节，如果一首 10 分钟的歌曲，那就是 500 小节。回到上面的 jsfiddle 示例并设置 measure=500 和 quant=32，几秒钟后我在 Chrome 开发人员工具控制台中收到以下错误“未捕获 RangeError：超出最大调用堆栈大小”。这是在那个 javascript 中创建 div 时，如果我将数字降低到 300 左右，它可以创建 div，但是事情变得滞后。

2) 为网格的垂直线使用宽度=1px 的 div 创建网格。动态创建新的笔记 div，根据鼠标单击的位置手动定位它们（​​使用位置：浮动？）。

优点：

*   只有一个用于实际注释的 div，所以不要让方法 1) 的缺点成为问题

缺点：

*   必须手动计算所有内容，在哪里放置新创建的笔记，放大/缩小意味着重新定位网格的垂直标记，以及计算笔记 div 的新大小。这主要是在方法 1 中自动处理的。

我确信我描述的两种方法有更多的架构和优点/缺点，但我从未创建过任何 Web 应用程序，我的 Web 开发经验的程度是我在过去 2 中完成的教程几个星期来自学。

我想我的问题是创建我所描述的这个钢琴卷界面的最佳架构是什么？特别是 UI 表示，而不是支持模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T01:46:39.570

我会创建一个简单的模型（可能只是一个多维数组）来包含分数的表示，其中每个数组项代表一个时间点的一个音符。然后，您可以从模型中相应地绘制/重绘。您还可以通过修改数组来执行时移、量化、细化等操作。

> 浏览器可以处理数千个 div 吗？

几千，是的，也许更多——甚至更多——但结果会因浏览器、计算机甚至定位方式而有很大差异（例如，浮点数往往比绝对定位慢，因为浏览器有更多的计算）。

相反，我会使用[画布](https://developer.mozilla.org/en-US/docs/HTML/Canvas)进行研究，并根据您的基础模型进行绘制/重绘。您可以检测整个画布上的事件，并根据坐标轻松将事件映射到它对应的注释。

[KineticJS](http://kineticjs.com/)有一些很酷的使用画布的例子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T08:29:15.067

我会使用背景图像来表示音轨和小节，并为每个音符使用一个 div。没有必要在浏览器中将所有笔记都保存为 div，最好只将 div 用于可见的最多 10 个度量。

恕我直言，这应该是固定宽度的，根本不应该调整钢琴卷的大小。所以你可以使用像素计算。如果不大量使用 Javascript，我认为这不会起作用。

# android - Android：如何在 android 中合并多个通知图标

> ID：13576151
> 
> 赞同：0
> 
> 时间：2012-11-27T01:38:20.987
> 
> 标签：android, notifications, icons

我正在编写一个应用程序，我在其中将通知从服务器推送到客户端。如果服务器向用户推送了许多通知消息，我看到通知栏中显示了多个应用程序通知图标（其中还有其他图标，如电池、连接等）。我想限制它，但我仍然想在通知抽屉中保留通知（在下拉窗格中）。

我尝试取消 notificationManager.cancel(int id)，但它会从通知抽屉中删除通知以及通知栏。是否有任何额外的标志或任何 api 来解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T01:48:47.453

您可以更新通知内容。这是执行此操作的文档[http://developer.android.com/guide/topics/ui/notifiers/notifications.html#Updating](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#Updating)

这就是 SMS/Whatsapp/gmail 所做的。如果只有一条消息，他们会显示它的内容，否则他们会显示未读消息的数量和/或写这些消息的人数。关键是他们在状态栏上只有一个通知，并且他们一直使用同一个通知，直到用户进入应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-01T13:10:18.200

正如已经指出的那样，这严格来说是违反 android 设计准则的。然而，指导方针并不总是在每种情况下都是正确的，在我看来，这样做是可能的，至少对于某些版本的 Android 而言。

在 4.4 和 6.0（我没有测试其他版本）中，一些测试似乎表明，如果通知优先级设置为 PRIORITY_MIN，则图标不会出现在通知栏中，但会出现在抽屉中。

我不知道这种行为是否得到保证，[文档](http://developer.android.com/reference/android/app/Notification.html#PRIORITY_MIN)似乎有点含糊。还有一个恼人的后果是通知在抽屉中的位置受此影响，因此这个答案根本不理想。

我希望对于那些因为特定的设计要求而主动选择不遵循指南的人有更好的解决方案。

# java - 如何从 web 视图中获取文本

> ID：13576153
> 
> 赞同：0
> 
> 时间：2012-11-27T01:38:25.767
> 
> 标签：java, javascript, android, webview

这似乎很简单，但几乎是不可能的。我的 WebView 中显示了文本，我需要获取它。

我已经尝试了各种各样的事情。

```
webview.loadUrl("javascript:window.HTMLOUT.showHTML(document.innerText);");
webview.loadUrl("javascript:window.HTMLOUT.showHTML(document.documentElement.innerText);");

webview.loadUrl("javascript:window.HTMLOUT.showHTML(document.getElementsByTagName('auth')[0].innerHTML);");

webview.loadUrl("javascript:window.HTMLOUT.showHTML(document.getElementsByTagName('body')[0].innerText);");

webview.loadUrl("javascript:window.HTMLOUT.showHTML(document.getElementsByTagName('html')[0].innerText);"); 
```

还有很多其他的东西。我对这两个电话没有定义。

它总是尝试以一些随机 xml 的形式返回。

```
class MyJavaScriptInterface   
{  
    @SuppressWarnings("unused")  
    public void showHTML(String html)  
    {  
        Log.d("SHOWING", html);

        new AlertDialog.Builder(myApp)  
            .setTitle("HTML")  
            .setMessage(html)  
            .setPositiveButton(android.R.string.ok, null)  
            .setCancelable(false)  
            .create()  
            .show();  
    }
    public void showHTML(Object html)  
    {
        Log.d("Some random object", "Some random object");
    }
    public void showHTML(XML html)  
    {
        Log.d("Some random XML", "Some random XML");
    }  
} 
```

这就是它的样子。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T02:10:44.873

这是从您的网页发送文本到您的 android 设备的示例。它在 android 上创建一个“toast”弹出消息。

将此添加到您的网络视图中：

```
myWebView.addJavascriptInterface(new JavaScriptInterface(this), "Android"); 
```

将此类添加到您的项目中：

```
 public class JavaScriptInterface {
    Context mContext;

    JavaScriptInterface(Context c) {
        mContext = c;
    }

    public void showToast(String toast) {
        Toast.makeText(mContext, toast, Toast.LENGTH_SHORT).show();
    }
} 
```

使用 javascript 将信息从您的网站发送到您的 android，如下所示：

```
 <script type="text/javascript">
           Android.showToast("This is a message");
    </script> 
```

# c# - 需要帮助简化 LINQ 查询：选择首选类型的项目

> ID：13576155
> 
> 赞同：0
> 
> 时间：2012-11-27T01:38:45.453
> 
> 标签：c#, linq, refactoring

可以使用单个 LINQ 表达式完成以下操作吗？我有一个项目清单：

```
public enum ItemType
{
    Top,
    Bottom,
    Side,
    CornerBottom,
    CornerTop
}

public class Item
{
    public int ID;
    public ItemType Type;
} 
```

我想根据 ItemType 选择一个项目 - 但是，CornerBottom 和 CornerTop 有一个特殊情况。如果我正在搜索 CornerBottom 项目，但没有这样的结果，我想要一个底部项目。如果有结果，那么我想要一个辅助项目。与 CornerTop 类似，我更喜欢 CornerTop 项目，然后是 Top，然后是 Side 第三。

这可以用一个表达式来完成吗？现在我有一个处理每个 ItemType 的 switch 语句。但是，这很笨拙，因为实际上我的 Item 类更复杂（并且我有更多 ItemTypes），而且我有很多不同的查询需要这个核心功能。

编辑：好的，我的最终解决方案是这样的。根据 Spencer 的建议，我使用我喜欢的搜索顺序对 ItemType 枚举进行了重新排序。然后我只是将自定义比较代码放在另一个函数中（这将易于重用），并且只需 orderby 并返回第一个值。

```
ItemType searchType = ItemType.CornerTop;

var i = (from item in Items
        where typeCheck(item, searchType)
        orderby item.Type descending).FirstOrDefault();

bool typeCheck(Item item, ItemType type)
{
    switch (type)
    {
        case ItemType.CornerTop:
            return (item.Type == ItemType.CornerTop)
                || (item.Type == ItemType.Top)
                || (item.Type == ItemType.Side);
        case ItemType.CornerBottom:
            return (item.Type == ItemType.CornerBottom)
                || (item.Type == ItemType.Bottom)
                || (item.Type == ItemType.Side);
        default:
           return item.Type == type;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T01:47:09.517

按优先级顺序为每个枚举值赋予一个数值。按类型对项目列表进行排序并获取第一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T01:59:35.930

您可以构建两棵平衡树。按 CornerTop -> Top -> Side 排序的第一棵树。第二个是 CornerBottom -> 底部 -> 侧面。如果您搜索 CornerTop 或 CornerBottom，您可以获取树中的第一项。如果您搜索其他类型 - 您可以通过 log(N) 直接搜索。在 LINQ 上，您可以对集合进行排序并获取第一个或通过二进制搜索算法进行搜索。

# ruby-on-rails - 带有 yasnippets 的 emacs 智能标签

> ID：13576156
> 
> 赞同：2
> 
> 时间：2012-11-27T01:38:51.037
> 
> 标签：ruby-on-rails, emacs, lisp, yasnippet

我正在尝试在所有打开的缓冲区和 yasnippet 中完成制表符以使用制表符键。目前我可以有一个或另一个。以下代码是我处理 yasnippet 扩展的方式，但由于我不是 lisp 程序员，我在这里看不到错误。

如果它无法扩展片段，我希望它尝试从缓冲区扩展。

```
;; Auto complete settings / tab settings
;; http://emacsblog.org/2007/03/12/tab-completion-everywhere/ <-- in the comments
(global-set-key [(tab)] 'smart-tab)
(defun smart-tab ()
  "This smart tab is minibuffer compliant: it acts as usual in
    the minibuffer. Else, if mark is active, indents region. Else if
    point is at the end of a symbol, expands it. Else indents the
    current line."
  (interactive)
  (if (minibufferp)
      (unless (minibuffer-complete)
        (dabbrev-expand nil))
    (if mark-active
        (indent-region (region-beginning)
                       (region-end))
      (if (looking-at "\\_>")
          (unless (yas/expand)
            (dabbrev-expand nil))
        (indent-for-tab-command))))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T11:24:41.950

首先，我尝试了解代码的作用，以及您希望它做什么。

你的代码

*   `first checks`如果点在`the minibuffer`.

    *   如果是这样，那么它会尝试完成 minibuffer

        *   如果（在 minibuffer 中）无法完成它，它会调用 dabbrev-expand
*   否则，如果要点是`not in minibuffer`

    *   如果某个区域被标记，它会缩进该区域。

    *   if `no mark is active`，它检查该点是否在`end of some word`

        *   如果是这样，它会检查 yasnippet 是否可以扩展。

            *   如果 yas 不能扩展，它会调用 dabbrev-expand
        *   如果不是，它会尝试缩进当前行

这就是您的代码所做的。

您的代码由于 yas/expand 而失败。如果扩展失败，此命令不会返回。

如果此命令失败，它会检查变量的状态`yas/fallback-behavior`。如果此变量具有 value `call-other-command`，就像您的情况一样，失败的 yas 扩展调用绑定到变量中保存的键的命令`yas/trigger-key`。

在你的情况下，这个变量是`TAB`.

所以：你在单词的末尾，你按 TAB 键来完成它，这会触发交互`smart-tab`，它调用 yas/expand，如果它无法展开调用绑定函数`TAB`，这里是无限循环。

您的问题的解决方案是暂时绑定`nil to yas/fallback-behavior`在此`smart-tab`功能中。

以下是解决方法：

```
(if (looking-at "\\_>")
      (let ((yas/fallback-behavior nil))
        (unless (yas/expand)
          (dabbrev-expand nil)))
    (indent-for-tab-command)) 
```

# c++ - C++ 中有没有办法从数组中获取子数组？

> ID：13576160
> 
> 赞同：12
> 
> 时间：2012-11-27T01:39:39.643
> 
> 标签：c++, arrays

我现在脑子里放了个屁，我正在寻找一种快速的方法来获取一个数组并将其中的一半传递给一个函数。如果我有一个包含十个元素的数组 A，在某些语言中，我可以将 A[5:] 之类的东西传递给函数并完成它。c++中是否有类似的构造？显然我想避免和排序循环功能。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-27T01:42:38.670

是的。在纯 C 中，您使用指针，但在 C++ 中，您可以使用任何类型的迭代器（指针可以被视为迭代器）。

```
template<typename Iter>
void func(Iter arr, size_t len) { ... }

int main() {
    int arr[10];
    func(arr, 10);    // whole array
    func(arr, 5);     // first five elements
    func(arr + 5, 5); // last five elements

    std::vector<Thing> vec = ...;
    func(vec.begin(), vec.size());          // All elements
    func(vec.begin(), 5);                   // first five
    func(vec.begin() + 5, vec.size() - 5);  // all but first 5

    return 0;
} 
```

典型的技巧是将指针传递给数组的第一个元素，然后使用单独的参数来传递数组的长度。不幸的是，没有边界检查，所以你必须小心把它做对，否则你会在你的记忆中乱涂乱画。

您也可以使用半开范围。这是最常见的方法。标准库中的许多函数（如`std::sort`）以这种方式工作。

```
template<class Iter>
void func(Iter start, Iter end) { ... }

int main() {
    int arr[10];
    func(arr, arr + 10);       // whole array
    func(arr, arr + 5);        // first five elements
    func(arr + 5, arr + 10);   // last five elements

    std::vector<Thing> vec = ...;
    func(vec.begin(), vec.end());       // whole vector
    func(vec.begin(), vec.begin() + 5); // first five elements
    func(vec.begin() + 5, vec.end());   // all but the first five elements

    return 0;
} 
```

同样，没有边界检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-08T19:04:46.603

我也有相同的用途，但我使用了向量并使用了语法

```
vector <int> a(10);
// for example to use by removing first element

a = std::vector<int>(a.begin() + 1, a.end())
//its ur turn to change the size 
```

# python - 在 Python 中将 openCV 图像转换为 PIL 图像（用于 Zbar 库）

> ID：13576161
> 
> 赞同：36
> 
> 时间：2012-11-27T01:39:55.483
> 
> 标签：python, opencv, python-imaging-library, zbar

我正在尝试对使用 OpenCV 的相机方法提取的图像使用 Zbar 库的 QR 码检测方法。通常 QR 码检测方法适用于我计算机上的图像（jpg、png 等），但我猜 OpenCV 捕获的帧是不同的。
有没有办法将捕获的帧变成 PIL 图像？

谢谢你。

```
from PIL import Image
import zbar
import cv2.cv as cv

capture = cv.CaptureFromCAM(1)
imgSize = cv.GetSize(cv.QueryFrame(capture))
img = cv.QueryFrame(capture)

#SOMETHING GOES HERE TO TURN FRAME INTO IMAGE
img = img.convert('L')
width, height = img.size

scanner = zbar.ImageScanner()
scanner.parse_config('enable')
zbar_img = zbar.Image(width, height, 'Y800', img.tostring())

# scan the image for barcodes
scanner.scan(zbar_img)

for symbol in zbar_img:
    print symbol.data 
```

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-08-10T05:37:41.920

使用 python CV2，您还可以执行以下操作：

```
import Image, cv2

cap = cv2.VideoCapture(0) # says we capture an image from a webcam
_,cv2_im = cap.read()
cv2_im = cv2.cvtColor(cv2_im,cv2.COLOR_BGR2RGB)
pil_im = Image.fromarray(cv2_im)
pil_im.show() 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-27T01:44:16.110

我想我可能已经找到了答案。我稍后会编辑结果。

**OpenCV 到 PIL 图像**

```
import Image, cv
cv_im = cv.CreateImage((320,200), cv.IPL_DEPTH_8U, 1)
pi = Image.fromstring("L", cv.GetSize(cv_im), cv_im.tostring()) 
```

来源： http: [//opencv.willowgarage.com/documentation/python/cookbook.html](http://opencv.willowgarage.com/documentation/python/cookbook.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-28T23:10:04.603

您是否正在尝试获取 RGB 图像？如果是这种情况，您需要从此更改参数：

```
cv_im = cv.CreateImage((320,200), cv.IPL_DEPTH_8U, 1)
pi = Image.fromstring("L", cv.GetSize(cv_im), cv_im.tostring()) 
```

对此：

```
cv_im = cv.CreateImage((320,200), cv.IPL_DEPTH_8U, 3)
pi = Image.fromstring("RGB", cv.GetSize(cv_im), cv_im.tostring()) 
```

因为它几乎没有记录，但 Image.fromstring 的“L”参数适用于 8 位黑白图像。此外，您需要将 cv.CreateImage 函数的参数从 1（单通道图像）更改为 3（3 通道 = RGB）。

希望对你有效。干杯

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-23T06:27:57.297

一种简单的方法是直接交换频道。假设您正在尝试在 OpenCV 格式和 PIL 格式之间转换 3 通道图像文件。您可以使用：

```
img[...,[0,2]]=img[...,[2,0]] 
```

这样，您就不会被打扰，`cv2.cvtColor`因为此功能仅适用于具有一定深度的图像。

# java - 如何提取特定的字符串行

> ID：13576162
> 
> 赞同：1
> 
> 时间：2012-11-27T01:39:56.943
> 
> 标签：java, string

我的字符串中有两个元素，我想取第二个元素并放入一个新字符串。

```
String data; 
```

数据字符串包含：

```
27 Nov 2012
30 Oct 2012 
```

两个日期用 . 分隔`\n`。

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T01:41:07.157

```
String first = data.substring(0, data.indexOf("\n"));
String second = data.substring(data.indexOf("\n")); 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T01:44:08.347

另一种方法：

```
String dates[] = data.split("\n");
String second = dates[1]; 
```

# python - Pandas 合并并保留索引

> ID：13576164
> 
> 赞同：6
> 
> 时间：2012-11-27T01:40:07.183
> 
> 标签：python, pandas, dataframe, merge

[How to keep index when using pandas merge](https://stackoverflow.com/questions/11976503/how-to-keep-index-when-using-pandas-merge)中提出了一个类似的问题，但它不适用于 MultiIndexes，即

```
a = DataFrame(np.array([1,2,3,4,1,2,3,3]).reshape((4,2)), columns=['col1','to_merge_on'], index=['a','b','a','b'])
id = pd.MultiIndex.from_arrays([[1,1,2,2],['a','b','a','b']], names =['id1','id2'])
a.index = id

In [207]: a
Out[207]: 
         col1  to_merge_on
id1 id2                   
1   a       1            2
    b       3            4
2   a       1            2
    b       3            4

b=DataFrame(data={"col2": [1,2,3], 'to_merge_on' : [1,3,5]})

In [209]: b
Out[209]: 
   col2  to_merge_on
0     1            1
1     2            3
2     3            5

a.reset_index().merge(b, how="left").set_index('index')

In [208]: a.reset_index().merge(b, how="left").set_index('index')
------------------------------------------------------------
Traceback (most recent call last):
  File "<ipython console>", line 1, in <module>
  File "C:\Python27\lib\site-packages\pandas\core\frame.py", line 2054, in set_index
    level = frame[col]
  File "C:\Python27\lib\site-packages\pandas\core\frame.py", line 1458, in __getitem__
    return self._get_item_cache(key)
  File "C:\Python27\lib\site-packages\pandas\core\generic.py", line 294, in _get_item_cache
    values = self._data.get(item)
  File "C:\Python27\lib\site-packages\pandas\core\internals.py", line 625, in get
    _, block = self._find_block(item)
  File "C:\Python27\lib\site-packages\pandas\core\internals.py", line 715, in _find_block
    self._check_have(item)
  File "C:\Python27\lib\site-packages\pandas\core\internals.py", line 722, in _check_have
    raise KeyError('no item named %s' % str(item))
KeyError: 'no item named index' 
```

如何在左侧数据框中保留 MultiIndex 的同时进行合并？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T03:19:03.737

临时解决方案：

```
In [255]: a = a.reset_index()

In [256]: a
Out[256]: 
   id1 id2  col1  to_merge_on
0    1   a     1            2
1    1   b     3            4
2    2   a     1            2
3    2   b     3            4

In [271]: c = pd.merge(a, b, how="left")

In [272]: c
Out[272]: 
   id1 id2  col1  to_merge_on  col2
0    1   a     1            2   NaN
1    2   a     1            2   NaN
2    2   b     3            3     2
3    1   b     3            4   NaN

In [273]: c = c.set_index(['id1','id2'])

In [274]: c
Out[274]: 
         col1  to_merge_on  col2
id1 id2                         
1   a       1            2   NaN
2   a       1            2   NaN
    b       3            3     2
1   b       3            4   NaN 
```

# opencv - 光流簇的重心

> ID：13576166
> 
> 赞同：2
> 
> 时间：2012-11-27T01:40:40.453
> 
> 标签：opencv, opticalflow

我需要找到光流向量的重心。我应用了 OpenCV Lucas Kanade 函数，可以直观地看到光流向量。现在我如何对这些向量进行聚类并找到它们的重心？找到流向量聚集的位置是我想要实现的。

我得到的向量是 Point2f 前一个点和下一个点。我不确定如何对这些向量进行聚类。如果我使用**kmeans**函数，那么 Mat**样本**的结构应该是什么？

kmeans（**样本**，clusterCount，标签，TermCriteria（CV_TERMCRIT_ITER|CV_TERMCRIT_EPS，0.0001，10000），尝试，KMEANS_PP_CENTERS，中心）；

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:05:39.087

这取决于你想要达到什么结果。如果你想对相同的移动像素进行聚类，而不是通过估计下一个点和前一个点之间的差异来计算运动，代码如下所示：

```
std::vector<cv::Point2f> prevPts, currPts;
... run lucas kanade ...
cv::Mat samples(prevPts.size(), 2, CV_32FC1);
for(unsigned int n = 0; n < prevPts.size(); n++)
{
  samples.at<float>(n,0) = currPts[n].x - prevPts[n].x;
  samples.at<float>(n,1) = currPts[n].y - prevPts[n].y;
}
... run clustering 
```

这就像一个全球性的方法。但在大多数情况下，您还需要将位置考虑在内。比您必须考虑其他分割方法，或者您必须将位置添加为附加维度。

# sql - 以下正则表达式的 SQL 注入

> ID：13576167
> 
> 赞同：0
> 
> 时间：2012-11-27T01:41:04.320
> 
> 标签：sql, sql-injection

我正在寻找各种软件中的后门，并想知道以下代码是否容易受到 sql 注入的影响。

有一个带有以下验证表达式的电子邮件字段。(ASPX/CS)

```
ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*"> 
```

是否可以利用上述方法删除表或使用 SQL 注入做任何恶意行为？

感谢和问候

编辑 1：人们问我这是如何实现的——</p>

```
SqlConnection conn = new SqlConnection(snpConnectionString);
SqlCommand command = conn.CreateCommand();
conn.Open();
command.CommandText = "INSERT INTO TABLE_ VALUES ('" + TextBoxFN.Text + "','" + TextBoxLN.Text + "','" + sb1.ToString() + "','" + TextBoxEA.Text + "','" + sb.ToString() + "',0,'" + DateTime.Now + "')";
try{
    SqlDataReader reader = command.ExecuteReader();
}
catch
{
    Response.Redirect("Error.aspx", true);
} 
```

TextBoxEA.text 对应于电子邮件地址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T01:48:32.593

正则表达式验证非常适合 UI 或业务层检查用户输入以防止错误。

它对于防止 SQL 注入不太好。

如果代码不使用参数化查询，那么它现在或稍后在更新正则表达式以符合新的业务需求时出现小错误后都容易受到攻击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T01:58:24.653

最好使用像 Eric 所说的参数化查询，但是查看正则表达式时，只有以下字符是有效的

```
A-Za-z0-9_-+.' 
```

如果没有空格，我认为他们无法注入 SQL，但如果是我，我仍然会确保使用参数化查询以确保安全。

# firefox - Primepush ...无法建立连接，Websocket关闭，原因：连接异常关闭

> ID：13576168
> 
> 赞同：4
> 
> 时间：2012-11-27T01:41:04.927
> 
> 标签：firefox, google-chrome, primefaces, glassfish-3, atmosphere

我在用着：

Linux
PrimeFaces 3.4.1
Glassfish 3.1.2.2（构建 5，启用了 comet，禁用了 websockets）
FireFox 10.0.7
Chromium 22.0.1229.94

我在消息驱动的 bean 中有 PrimePush。当我的 MDB 的 onMessage() 被调用时（这应该是每秒几次），我期待出现咆哮通知。此外，不确定这是否重要，但 MDB 位于 *.ear 内的 *.jar 文件中，Web 应用程序也在耳内的 *.war 中。我在 MDB 中有 PrimePush，如下所示。

```
pushContext = PushContextFactory.getDefault().getPushContext();
pushContext.push("/notifications",
    new FacesMessage("Hello World", "New Notification")); 
```

这是我的 web.xml。

```
<servlet>
    <servlet-name>Push Servlet</servlet-name>
    <servlet-class>org.primefaces.push.PushServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>Push Servlet</servlet-name>
    <url-pattern>/primepush/*</url-pattern>
</servlet-mapping> 
```

问题是当我第一次将所有内容（glassfish，浏览器）清理干净时会触发一次通知，但通常不会再次出现，或者每次调用 pushContext.push() 时都不会出现。使用FF，它甚至一次都不起作用。当 MDB onMessage() 触发时，我不久后在 firefox 错误控制台中收到以下内容。

```
Error: Firefox can't establish a connection to the server at ws://localhost:8080/test/primepush/notifications?X-Atmosphere-tracking-id=0&X-Atmosphere-Framework=1.0&X-Atmosphere-Transport=websocket&X-Cache-Date=0.
Source File: http://localhost:8080/test/javax.faces.resource/push/push.js.xhtml?ln=primefaces
Line: 1 
```

使用 Chrome，它至少可以工作一次，有时但不是更可靠。每次我加载网页时，我都会看到一个连接已关闭（就像我加载页面一样）。这是在错误控制台中。

```
Unexpected response code: 200 :8080:1
Websocket closed, reason: Connection was closed abnormally (that is, with no close frame being sent). push.js.xhtml:1
Websocket closed, wasClean: false push.js.xhtml:1
Websocket failed. Downgrading to Comet and resending 
```

这是我的 text.xhtml 页面。

```
<p:growl widgetVar="growl" showDetail="true"/>

<h:form id="myform">
    <p:fieldset id="myfs" legend="Push Test">
        <!-- stuff -->
    </p:fieldset>
</h:form>

<script type="text/javascript">
    function handleMessage(data) {
        data.severity = 'info';
        growl.show([data]);
    }
</script>

<p:socket onMessage="handleMessage" channel="/notifications">
</p:socket> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:42:54.463

我遇到了同样的问题，在 glassfish 中启用 websockets 解决了我的问题（在启用彗星支持后将以下内容添加到 domain.xml）：

```
websockets-support-enabled="true" 
```

提示是这样的：

```
Websocket failed. Downgrading to Comet and resending 
```

根据此处的文档[http://www.primefaces.org/docs/vdl/3.4/primefaces-p/socket.html，websocket](http://www.primefaces.org/docs/vdl/3.4/primefaces-p/socket.html)是 primepush 中使用的默认方式，需要在 glassfish 中启用 websocket。我认为在 p:socket 中将传输设置为彗星（长轮询/流）也可能有效。

顺便说一句，我测试过：

```
Mac
PrimeFaces 3.4.2 with Atmosphere 1.0.8
Glassfish 3.1.2 (with comet enabled, websockets enabled)
FireFox 18
Chromium 24 
```

# java - 解决java程序中的arrayoutofboundexception错误

> ID：13576170
> 
> 赞同：0
> 
> 时间：2012-11-27T01:41:12.160
> 
> 标签：java, indexoutofboundsexception

我的代码有问题。当我运行我的代码时，eclipse 告诉我我有 arrayoutofboundexception 错误。但我真的不知道如何为我的代码解决这个问题。我阅读了几个与数组越界异常错误相关的问题，但无法申请我的代码。这是我与问题相关的代码。谢谢你。感谢你的帮助。

```
 char[][] cells;
  int column = 300; 
  int row = 200;
   cells= this.getCells();
   ...
   if(cells[row][column] == '2'){  // error
                // eat the pill
                cells[row][column] = '1';
            }
            else if(cells[row][column] == '3'){
                // eat the power pill
                cells[row][column] = '1';
            }

....

for (int r=0; r<rows; r++) {
            for (int c=0; c<columns; c++) {
                **if (cells[r][c] == '2')** { // error
                    //draw pill
                    g.fillRect(c*STEP-3, r*STEP-3, 6, 6);

                }
                else if (cells[r][c] == '3'){
                    //draw power pill
                    g.fillRect(c*STEP-6, r*STEP-6, 12, 12);

                }
            }
        }

public char[][] getCells()
    {
        char[][] cells = new char[rows][columns];
        for (int  r =0; r < rows; r++){
            System.arraycopy(lines.get(r).toCharArray(), 0, cells[r], 0, columns); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T01:42:09.453

您正在尝试访问超出数组范围的数组索引`cells`

初始化后

```
cells= this.getCells(); 
```

检查数组的维度，您正在尝试访问`[200][300]`导致问题的

# php - 在 Wordpress 中从表单调用变量以呈现图表

> ID：13576171
> 
> 赞同：-2
> 
> 时间：2012-11-27T01:41:18.983
> 
> 标签：php, forms, wordpress, variables

我正在尝试使用 Wordpress 图表生成插件，但调用用户在页面上设置的变量。我有图表代码，它在初级水平上工作，我能够向页面添加一个表单，用户可以在其中输入一个数字并提交它，但是用于从表单调用变量的 PHP 代码中断图表代码，我相信是因为图表代码会寻找一个 ] 字符来确定在哪里结束图表脚本。

如下：

图表代码：`[easychart type="pie" height="100" width="100" title="U.S. Federal Expenditures, 2011 Fiscal Year" groupnames="Unfunded, Funded" valuenames="Unfunded, Funded" group1values="80" group2values="<?php ?get_percent = $_POST['percent']; echo$percent; ?>"]`

如果我`<?php ?get_percent = $_POST['percent']; echo$percent; ?>`用 20 替换，图表可以正常工作。同样，我相信这是因为百分比 POST 命令后的 ] 字符。

我可能完全找错了树。基本上我只是希望用户能够操纵图表。

帮助？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T02:01:38.863

尝试更改：`group2values="<?php ?get_percent = $_POST['percent']; echo$percent; ?>"` 至：`group2values="<?php echo $_POST['percent']; ?>"`

基本上第一部分 ( `?get_percent = $_POST['percent'];`) 是不必要的，如果你确实需要它，它应该是`$get_percent = $_POST['percent'];`. 你把 a`?`而不是`$`.

# css - 如何恢复到css中的值

> ID：13576173
> 
> 赞同：-2
> 
> 时间：2012-11-27T01:41:35.273
> 
> 标签：css

我正在尝试通过它们的 z-index 来显示某些元素

```
z-index:100; 
```

但是然后我需要将它们放回原来的位置，我如何获得该值，甚至只是在不知道的情况下设置它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T01:51:19.743

如果您只需要调出一个元素并将其放回原处 - 您可以添加/删除一个类来覆盖以前的 z-index - 假设您不需要知道原始 z-index。

# php - MySQL和PHP中的多行

> ID：13576176
> 
> 赞同：2
> 
> 时间：2012-11-27T01:41:59.560
> 
> 标签：php, mysql, sql

> **可能重复：**
> [mysql 数据透视表/交叉表查询](https://stackoverflow.com/questions/12382771/mysql-pivot-crosstab-query)

我正在使用 MySQL 和 PHP，我从 JOIN 查询中获得了这个表......

```
╔═══════╦════════════════╦═══════════════╦════════╗
║ name  ║    last_name   ║ course_name   ║ tries  ║
╠═══════╬════════════════╬═══════════════╬════════╣
║ coco  ║ valencia       ║ Course Num. 1 ║     11 ║
║ coco  ║ valencia       ║ Course Num. 2 ║     10 ║
║ coco  ║ valencia       ║ Course Num. 3 ║      4 ║
║ coco  ║ valencia       ║ Course Num. 4 ║      5 ║
║ John  ║ Smith          ║ Course Num. 1 ║      7 ║
║ John  ║ Smith          ║ Course Num. 2 ║      6 ║
╚═══════╩════════════════╩═══════════════╩════════╝ 
```

我希望我的表格结果是这样的......

```
╔═══════╦═══════════╦══════════════╦═══════════════╦═══════════════╗
║ name  ║ last_name ║ Course Num.1 ║ Course Num. 2 ║ Course Num. 3 ║
╠═══════╬═══════════╬══════════════╬═══════════════╬═══════════════╣
║ coco  ║ valencia  ║           11 ║            10 ║             4 ║
║ John  ║ Smith     ║            7 ║             6 ║               ║
╚═══════╩═══════════╩══════════════╩═══════════════╩═══════════════╝ 
```

我一直在寻找，找不到办法。解决方案可以是 PHP 或 MySQL 或两者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T01:55:33.630

```
SELECT  name, last_Name,
        MAX(CASE WHEN course_name = 'Course Num. 1' THEN tries ELSE NULL END) `Course Num. 1`,
        MAX(CASE WHEN course_name = 'Course Num. 2' THEN tries ELSE NULL END) `Course Num. 2`,
        MAX(CASE WHEN course_name = 'Course Num. 3' THEN tries ELSE NULL END) `Course Num. 3`
FROM    tableName
GROUP BY name, last_Name 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/0b9f8/3)

如果你有未知数量的`Course_Name`，*PreparedStatement*就是你需要的，

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'MAX(CASE WHEN course_name =  ''',
      course_name,
      ''' then tries ELSE NULL end) AS ''',
      course_name, ''''
    )
  ) INTO @sql
FROM tableName;

SET @sql = CONCAT('SELECT  name, last_Name, ', @sql, ' 
                   FROM    tableName
                   GROUP BY name, last_Name');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/0b9f8/6)

# java - 递归编写find方法，LinkedList

> ID：13576179
> 
> 赞同：0
> 
> 时间：2012-11-27T01:42:19.830
> 
> 标签：java, recursion, linked-list

我需要递归地编写 find 方法，当我试图找到 x 并找到它时，我需要将 x 移动到链表的头部

例如，如果列表是 head --> 15 --> 20 --> 5 --> 10

然后我运行 find(5)，然后列表将是 head --> 5 --> 15 --> 20 --> 10

```
private boolean find (int x)
{
    Node pointer = head;
    int i = 0;
    while(pointer != null)
    {
        if( pointer.data != x)
        {
            pointer = pointer.next;
            find(x);      
        }
        else
        {
            return true;
        }
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:49:03.950

我认为您应该编写一个递归辅助方法，例如：

```
private boolean find(int x, Node node) {
    if (node == null)
        return false;
    return node.data == x || find(x, node.next);
} 
```

那么标准`find`就是

```
private boolean find(int x) {
    return find(x, head);  // start search from head
} 
```

考虑到这种方法，添加/删除组件应该不难实现：您可以在第`find`一种方法中删除适当的节点（如果找到），并在第二种方法中将节点添加到列表的前面`find`作为包含`x`(假设`find(x, head)`返回真）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T01:54:55.400

Private boolean find(int x) { Node retval = recursiveFind(x, head, parent) If retVal != null RetVal.next = head Return true }

Private Node recursiveFind(Int x, node head, node parent) { If head == null && parent == null Return null;

如果 head.value == x Parent.next = head.next：返回 head

否则返回 recursiveFind(x, head.next, head)

我在使用 smatphone 但类似的东西

一些

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T01:57:49.913

自从我不得不使用 java 和链表（并且在没有测试的情况下从头顶写下）以来已经有一段时间了，所以这可能无法复制/粘贴，但尝试这样的事情：

```
Node linkedListHead = ...;

public void find(int target){
    Node foundNode = findRec(target, linkedListHead, null);

    if(foundNode != null){
        // assumes Node takes in the Data first, then a Node
        linkedListHead = new Node(target, linkedListHead);
        foundNode.next = foundNode.next.next;
    }
}

private void findRec(int target, Node currentNode, Node previousNode){

    if(currentNode == null){
        return null;

    } else if(currentNode.data == target){
        return previousNode;

    } else {
        return find(target, currentNode.next, currentNode);
    }
} 
```

关键是在 findRec() 方法期间保持对前一个节点的引用并将其返回，以便之后的下一个节点（包含搜索目标）并从列表中删除。

# asp.net - 当用户未通过身份验证时，管理文件夹中的页面不会重定向到登录页面（Windows 窗体身份验证）

> ID：13576184
> 
> 赞同：1
> 
> 时间：2012-11-27T01:42:43.227
> 
> 标签：asp.net

我是 asp.net 的新手，所以任何指针都会是我的主要 web.config 代码，它连接到 godaddy 的 sql 数据库。

```
<configuration>
  <connectionStrings>
    <add name="XXXXXX" connectionString="Data Source=XXXXXX; Initial Catalog=AllMobileDB; User ID=XXXXXX; Password=XXXXXX@;" providerName="System.Data.SqlClient"/>
  </connectionStrings>
  <system.web>
    <roleManager enabled="true"/>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
      </assemblies>
    </compilation>
    <authentication mode="Forms">
      <forms loginUrl="login.aspx"/>
    </authentication>
    <membership defaultProvider="SqlProvider">
      <providers>
        <clear/>
        <add connectionStringName="XXXXXX" applicationName="/" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="true" passwordFormat="Hashed" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" name="SqlProvider" type="System.Web.Security.SqlMembershipProvider"/>
      </providers>
    </membership>
  </system.web>
  <system.net>
    <mailSettings>
      <smtp from="XXXXXX">
        <network enableSsl="true" host="smtp.gmail.com" userName="XXXXXX" password="XXXXXX" port="25"/>
      </smtp>
    </mailSettings>
  </system.net>
</configuration> 
```

我有一个名为 admin 的文件夹和一个名为 adminpage 的页面，我通过网站管理工具设置用户名和文件夹访问权限

我的管理文件夹代码中的 web.config

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.web>
        <authorization>
            <allow roles="Adminstator" />
            <deny users="*" />
        </authorization>
    </system.web>
</configuration> 
```

它应该只允许登录的人查看该页面，但是到目前为止，任何人都可以访问它。知道如何解决这个问题，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T01:50:48.393

尝试将拒绝元素更改为问号：

```
 <authorization>
        <allow roles="Adminstator" />
        <deny users="?" />
    </authorization> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T02:04:34.240

尝试正确拼写 Administrator：

```
<allow roles="Administrator" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T02:36:46.000

设置位置元素

```
<system.web>
    <authentication mode="Forms">
      <forms loginUrl="Admin/login.aspx" defaultUrl="Admin/default.aspx"/>
    </authentication>
  <authorization>
    <allow users="*"/>
  </authorization>
</system.web>

<location path="Admin">
  <system.web>
   <authorization>
    <deny users="?"/>
   </authorization>
  </system.web>
</location> 
```

# ruby-on-rails - 链接身份验证和聚合数据

> ID：13576185
> 
> 赞同：2
> 
> 时间：2012-11-27T01:42:52.303
> 
> 标签：ruby-on-rails, ruby, oauth, omniauth, linkedin

我正在使用 Ruby on Rails 构建一个 Web 应用程序，我希望我的用户能够验证和聚合来自 Linked In（以及 Github、Twitter 等其他人）的数据。

我正在使用这些宝石：

*   设计注册
*   用于身份验证的omniauth-linkedin
*   pengwynn/linkedin 用于数据聚合

不过，Linked In 有一个不太好的引脚。有没有办法避免它并从我的用户帐户中获取我想要的数据，而无需他们去链接，获取 pin 并将其提交给我？

提前致谢。

**authentications_controller.rb**

```
class AuthenticationsController < ApplicationController
  def index
    @authentications = current_user.authentications if current_user
  end

  def create
    omniauth = request.env["omniauth.auth"]
    authentication = Authentication.
          find_by_provider_and_uid(omniauth['provider'], omniauth['uid'])
    if authentication
      flash[:notice] = "Signed in successfully."
      sign_in_and_redirect(:user, authentication.user)
    elsif current_user
      current_user.authentications.
            create!(provider: omniauth['provider'], uid: omniauth['uid'])
      current_user.apply_omniauth(omniauth)
      flash[:notice] = "Authentication successful."
      redirect_to authentications_url
    else
      user = User.new
      user.apply_omniauth(omniauth)
      if user.save
        flash[:notice] = "Signed in successfully."
        sign_in(:user, user)
        redirect_to user_path(user.username)
      else
        session[:omniauth] = omniauth.except('extra')
        redirect_to new_user_registration_url
      end
   end
end 
```

# java - 如何使用 Java SSH 从 unix box 读取/复制文件到 windows

> ID：13576187
> 
> 赞同：0
> 
> 时间：2012-11-27T01:43:53.733
> 
> 标签：java, windows, unix

是否有任何简单的开源 java 类可以使用 Java SSH 从 unix box 读取/复制文件到 windows

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:48:28.070

这是用纯 Java 编写的 SSH 协议的实现：[http ://www.jcraft.com/jsch/](http://www.jcraft.com/jsch/)

# javascript - ajax 无法将数据字符串传递给 php

> ID：13576191
> 
> 赞同：-1
> 
> 时间：2012-11-27T01:44:27.587
> 
> 标签：javascript, php, ajax, database, string

我无法在我的 php 脚本上接收数据值，ajax 成功触发，但是当我发送这个时我的数据库上的数据没有改变。

```
 $.ajax({
        type: "POST",
        url: "database/clientpanel/agent_panel/notiffolder/notifedit.php",
        data: {
        email: email,
        number: number,
        emailon: emailon,
        texton: texton,
        email_delay: emaildel,
        ext_delay: textdel,
        timezone1: zone1,
        timezone2: zone2
        },
        cache: false,
        success: function(html){
            $("#upnotif").show();
            $("#errnotif").hide();
            $("#errnotif1").hide();
            $("#errnotif2").hide();
        }
    }); 
```

php

```
<?php
session_start();
include("../../../dbinfo.inc.php");

$query=" select * from tele_panel_notification where client='".$mysqli->real_escape_string($_SESSION['clientid'])."'";
$result = $mysqli->query($query);
$row = $result->fetch_assoc();
$client = $row['client'];

if($client == ""){
$query = "insert into tele_panel_notification set
emailon = '".$mysqli->real_escape_string($_POST['emailon'])."',
texton = '".$mysqli->real_escape_string($_POST['texton'])."',
timezone = '".$mysqli->real_escape_string($_POST['timezone'])."',
timezone2 = '".$mysqli->real_escape_string($_POST['timezone2'])."',
email = '".$mysqli->real_escape_string($_POST['email'])."',
email_delay = '".$mysqli->real_escape_string($_POST['email_delay'])."',
text_delay = '".$mysqli->real_escape_string($_POST['text_delay'])."',
number = '".$mysqli->real_escape_string($_POST['number'])."',
client='".$mysqli->real_escape_string($_SESSION['clientid'])."'";

    //execute the query
    if( $mysqli->query($query) ) {
        //if saving success
        echo "true";
    }else{
        //if unable to create new record
        printf("Errormessage: %s\n", $mysqli->error);
    }
}
else{
$query = "UPDATE tele_panel_note SET 
emailon = '".$mysqli->real_escape_string($_POST['emailon'])."',
texton = '".$mysqli->real_escape_string($_POST['texton'])."',
timezone = '".$mysqli->real_escape_string($_POST['timezone'])."',
timezone2 = '".$mysqli->real_escape_string($_POST['timezone2'])."',
email = '".$mysqli->real_escape_string($_POST['email'])."',
email_delay = '".$mysqli->real_escape_string($_POST['email_delay'])."',
text_delay = '".$mysqli->real_escape_string($_POST['text_delay'])."',
number = '".$mysqli->real_escape_string($_POST['number'])."'
where client='".$mysqli->real_escape_string($_SESSION['clientid'])."'";

    //execute the query
    if( $mysqli->query($query) ) {
        //if saving success
        echo "true";
    }else{
        //if unable to create new record
        printf("Errormessage: %s\n", $mysqli->error);
    }
}   

    //close database connection
$mysqli->close();

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T02:35:32.070

看看你的 PHP 部分，

```
 $result = $mysqli->query($query);
   $row = $result->fetch_assoc();
   $client = $row['client'];

   if($client == ""){ 
```

如果您想知道该行是否已经存在，您应该直接验证您的行：

```
 $result = $mysqli->query($query);
   $row = $result->fetch_assoc();
   //$client = $row['client'];

   if(!$row){ 
```

然后你的客户变量就没用了。

# spring - 我无法使用 sessionFactory.getCurrentSession().load (...) 从休眠的数据库中获取一行

> ID：13576192
> 
> 赞同：0
> 
> 时间：2012-11-27T01:44:42.127
> 
> 标签：spring, hibernate

我有一个数据库（在postgres中），我正在使用spring 3和hibernate 3，问题是当尝试从数据库中删除或获取一行时，这是我正在使用的类，哦查询后的另一件事，一个没有任何错误，唯一的事情就是那个类User是null

```
@Repository("userDao")
public class UserDao implements IUserDao {

    @Autowired
    private SessionFactory sessionFactory;

    public void SaveUser(User user) {
    sessionFactory.getCurrentSession().save(user);
    }
    @SuppressWarnings("unchecked")
    public List<User> ListUsers() {
        List<User> users = (List<User>) sessionFactory.getCurrentSession().createCriteria(User.class).list();
        return users;
    }
    public User GetUserById(Integer id) {               
        User user = (User) sessionFactory.getCurrentSession().load(User.class, id);
        return user;
    }
} 
```

顺便说一句，方法、SaveUser 和 ListUser 工作得非常好。

这是模型类

```
@Entity
@Table(name = "mrbean")
public class User {

@Id
@GeneratedValue (strategy = GenerationType.AUTO)
@Column (name = "id")
private Integer id;

@NotNull (message = "not null")
@NotEmpty (message = "empty")
@Column (name = "user_name", length = 20, nullable = false, unique = true)
private String userName;

@NotNull 
@NotEmpty (message = "empty password")
@Size (min = 7, max = 20, message = "La contraseña debe tener entre 7 y 20 caracteres")
@Column (name = "password", length = 20, nullable = false)
private String password; 
```

//带有getter和setter

这是执行 User user = (User)sessionFactory.getCurrentSession().load(User.class, id) 时休眠在控制台中显示的内容

Hibernate：从 mrbean user0_ 中选择 user0_.id 作为 id0_0_，user0_.password 作为 password0_0_，user0_.user_name 作为 user3_0_0_ where user0_.id=?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:37:12.100

我会使用“get”而不是“load”，因为 load() 创建了 User 的代理（请参阅 Hibernate ref doc）所以我会尝试： User user = (User) sessionFactory.getCurrentSession().get(User.class, id );

# c++ - C++睡眠pthread冲突

> ID：13576195
> 
> 赞同：1
> 
> 时间：2012-11-27T01:45:08.873
> 
> 标签：c++, eclipse, pthreads, mutex, sleep

我正在编写有关死锁及其检测的代码，我在 64 位 Ubuntu 12.10 上使用 eclipse Juno C/C++。问题是当我使用

> 睡觉(1)

，我明白了

> sleep 未在此范围内声明

当我构建项目时，我试图包括

> 包括 <unistd.h>

，但是所有的 pthread 函数都像

> pthread_join

给我这样的错误

> 对 pthread_join 的未定义引用

，没有**#include < unistd.h>**这样的错误不会出现。

示例代码：

```
#include <unistd.h>
#include <iostream>
#include <semaphore.h>
#include <queue>
#include <stdlib.h>

using namespace std;

pthread_mutex_t mutex;
sem_t sem; //used for writing in the console

.......

void cross(Batman b) {
// code to check traffic from the right, use counters, condition
sem_wait(&sem);
cout << "BAT " << b.num << " from " << b.direction << " crossing" << endl;
sem_post(&sem);
sleep(1);
}
........ 
```

ps我按照这些说明让pthreads在其他项目中工作，我对这个项目做了同样的事情 [http://blog.asteriosk.gr/2009/02/15/adding-pthread-to-eclipse-for-using-posix-线程/](http://blog.asteriosk.gr/2009/02/15/adding-pthread-to-eclipse-for-using-posix-threads/)

ps 我正在和一个朋友一起做这个项目，我使用了他使用的相同代码，但仍然出现这些错误，而他没有

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T02:07:28.860

当您`#include < unistd.h>`修复睡眠功能查找问题时，现在您遇到了 pthread 库问题。

接下来，您需要`#include <pthread.h>`将您的应用程序与 pthread 库链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T02:12:03.003

听起来你有两个不同的错误，

first`sleep()`是未定义的，因为您忘记包含 unistd.h。我还会包含 pthread.h 但听起来它可能会被您包含的标题之一拉入。

其次，听起来您添加了链接器错误，您可以使用 -pthread 编译或将 -lpthread 添加到链接器。它没有显示的原因是因为只有在文件编译后才能进行链接，并且第一个错误阻止了它。我敢打赌 ld 出于某种原因不喜欢 -pthread （你安装了 libpthread-dev 吗？）。您可以尝试将 -pthread 更改为 -lpthread。

# c++ - WaitForSingleObject 信号过早 ImageMagick 转换

> ID：13576196
> 
> 赞同：2
> 
> 时间：2012-11-27T01:45:42.720
> 
> 标签：c++, winapi, process, cmd, synchronous

我正在使用 ImageMagick 将 PDF 转换为 JPG。这个转换需要几百毫秒才能运行，所以我有一个[WaitForSingleItem](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032%28v=vs.85%29.aspx)在进程句柄上等待。

不幸的是，该过程几乎立即完成，并且转换没有完成（我假设它由于句柄被关闭而被中断）。我想要同步行为。

我有一个连接到进程的输出管道，我根本没有得到任何输出，无论是错误还是其他，因为进程认为“好的，完成，关闭所有内容并继续前进”。

通过不那么密集的操作，一切都按预期工作 - 错误，输出等 - 我认为问题几乎肯定在等待。

有人可以就如何解决这个问题提出建议吗？这是一些适用的代码，可能不是很有帮助，但它是唯一重要的部分，因为其他一切都很好。

运行代码后，我收到消息`WAIT_OBJECT_0`。

```
if (!CreateProcess(
    NULL, 
    (LPSTR) "convert test.pdf test.jpg",
    NULL,
    NULL,
    TRUE,
    CREATE_NO_WINDOW,
    NULL,
    NULL,
    &si,
    &pi
    )) { console_->AddItem("ERROR: Failed to create process."); }

DWORD wait = WaitForSingleObject(pi.hProcess, INFINITE);
if (wait == WAIT_ABANDONED)     { MessageBox(NULL, "WAIT_ABANDONED", "Alert", MB_OK); }
else if (wait == WAIT_OBJECT_0) { MessageBox(NULL, "WAIT_OBJECT_0", "Alert", MB_OK); }
else if (wait == WAIT_TIMEOUT)  { MessageBox(NULL, "WAIT_TIMEOUT", "Alert", MB_OK); }
else if (wait == WAIT_FAILED)   { MessageBox(NULL, "WAIT_FAILED", "Alert", MB_OK); }
else                            { MessageBox(NULL, "END OF THE WORLD", "Alert", MB_OK); } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T02:24:33.073

愚蠢的错误，与WINAPI无关。一切正常。

[http://support.cs.nott.ac.uk/help/docs/image/ImageMagick/www/FAQ.html#C19](http://support.cs.nott.ac.uk/help/docs/image/ImageMagick/www/FAQ.html#C19)

ImageMagick 有一个`convert`命令，但 Windows 也有，所以它使用了错误的命令。

当我`cmd`直接通过时，它按预期工作，但由于某种原因`CreateProcess`，使用了错误`convert.exe`。不知道为什么会这样，但它很容易修复。

ImageMagick 的一个有趣的小插曲：`The Windows convert.exe program is used to convert a system boot disk from MS-DOS "FAT" format to NTFS format. As such it can only be used one time in the life of a system.`

感谢@jeremy 的有用提示。

# objective-c - 如何在 Xcode 中使用 iOS\Cocoa Touch\Objective-C 类模板创建文件

> ID：13576205
> 
> 赞同：-1
> 
> 时间：2012-11-27T01:46:31.363
> 
> 标签：objective-c, ios, xcode, cocoa-touch, in-app-purchase

原谅这听起来多么简单，但我被困住了，需要帮助。我将 In App Purchases 放入尚未发布的可能第一个应用程序中。（所以我很新）

我一直在使用 Ray Wenderlich 的教程。我刚刚完成了主从应用程序模板的启动。现在它说我需要创建一个 IAPHelper 类，这将是我的 IAP 类，我正在执行的步骤是“使用 iOS\Cocoa Touch\Objective-C 类模板创建一个文件”。但是，当我打开 Xcode 并选择新项目时，我看不到这个选项。它有单视图应用程序等。我看到的最接近的是 Cocoa Touch 静态库。

有人可以告诉我如何“使用 iOS\Cocoa Touch\Objective-C 类模板创建文件”。我迷路了，我是从主应用程序模板中做的吗？或者我是否使用其他模板名称，如实用程序或空应用程序或 Cocoa Touch 静态库？或者我的 Xcode 版本中没有这个？还是我完全走错了路？啊哈！哈哈

我有 Xcode 4.3.2

我知道这对某些人来说可能是显而易见的，但对我来说不是:(

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:50:42.533

在您正在处理的当前项目中，右键单击一个文件并单击“新建文件...”或转到文件>新建>文件，然后您可能需要在 Cocoa Touch 下使用 Objective-c 类异议

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T01:54:10.603

您需要在到目前为止所做的同一个项目中执行此操作。您要做的是创建新项目，因为教程要求您创建新文件。您必须在您正在处理的同一个项目中执行此操作。为此，文件菜单中有一个选项可以将新文件添加到项目中。

# vim-plugin - 使用 vundle 在插入模式下绑定 ctrl-h 在 vi m 中向左移动

> ID：13576209
> 
> 赞同：2
> 
> 时间：2012-11-27T01:47:04.930
> 
> 标签：vim-plugin, vim

我来自中国，所以可能我的英语很差。

我以前写

```
:map! <C-h> <Left> 
:map! <C-l> <Right> 
```

在我的 .vimrc 文件中绑定 ctrl-h 在插入模式下向左移动， ctrl-l 向右移动。他们工作得很好。

但是在我使用 vundle 插件来管理我的插件之后。ctrl-h 现在不起作用。它更喜欢在插入模式下删除和向左移动，这不是我的愿望。但是 ctrl-l 总是可以正常工作。

ctrl-h 有什么问题吗，我认为 vundle 会影响它，或者在我之前绑定 ctrl-h 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T04:32:53.130

您可以检查谁在您之前定义了它。

```
:verbose map <C-h>
:verbose map <C-l> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T20:37:49.750

我有这个映射是为了同一个目标。它适用于 gvim、终端 (rxvt) 和 tty。

```
" move cursor in Insert Mode 
inoremap <C-h> <C-o>h
inoremap <C-j> <C-o>j
inoremap <C-k> <C-o>k
inoremap <C-l> <C-o>l 
```

# google-fusion-tables - 如何使用javascript查询融合表

> ID：13576210
> 
> 赞同：0
> 
> 时间：2012-11-27T01:47:04.957
> 
> 标签：google-fusion-tables

我在为我的融合表创建一些函数时遇到了很大的困难。我这里有两张桌子：

[积分](https://www.google.com/fusiontables/embedviz?viz=GVIZ&t=TABLE&containerId=gviz_canvas&q=select%20col0,%20col1,%20col2%20from%201BdIN39m70Vo6Sq0Y5lm1s_4Crh1CZpSwRbYMfnM)

[包裹](https://www.google.com/fusiontables/embedviz?viz=GVIZ&t=TABLE&containerId=gviz_canvas&q=select%20col0,%20col1,%20col2%20from%201-6QDLUk0Xw7weaB0GP1nmgwvXUuaXJCxWEYbO8E)

我正在尝试创建许多功能：

1）我希望能够使用下拉菜单选择点层，以通过其 ID 号进行选择。

2）我想创建一个函数，当我选择我的点时，我可以告诉融合表找到距离该点 1 公里以内的包裹。如果我可以更改距离会更可取，例如，我可以搜索 5 公里。

这是我的代码：

```
<!DOCTYPE html>
<html>
  <head>
  <style>
    #map-canvas { width:500px; height:400px; }
  </style>
  <script type="text/javascript"
    src="http://maps.google.com/maps/api/js?sensor=false">
  </script>
  <script type="text/javascript">
    var map;
    var layerl0;
    var layerl1;
    function initialize() {
      map = new google.maps.Map(document.getElementById('map-canvas'), {
        center: new google.maps.LatLng(43.94255650099583, -79.53326251471042),
        zoom: 13,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      });
      layerl0 = new google.maps.FusionTablesLayer({
        query: {
          select: "'col2'",
          from: '1-6QDLUk0Xw7weaB0GP1nmgwvXUuaXJCxWEYbO8E'
        },
        map: map,
        styleId: -1,
        templateId: -1
      });
      layerl1 = new google.maps.FusionTablesLayer({
        query: {
          select: "'col2'",
          from: '1BdIN39m70Vo6Sq0Y5lm1s_4Crh1CZpSwRbYMfnM'
        },
        map: map,
        styleId: -1,
        templateId: -1
      });
    }
    function changeMapl0() {
      var searchString = document.getElementById('search-string-l0').value.replace(/'/g, "\\'");
      layerl0.setOptions({
        query: {
          select: "'col2'",
          from: '1-6QDLUk0Xw7weaB0GP1nmgwvXUuaXJCxWEYbO8E',
          where: "'description' CONTAINS IGNORING CASE '" + searchString + "'"
        }
      });
    }
    function changeMapl1() {
      var searchString = document.getElementById('search-string-l1').value.replace(/'/g, "\\'");
      layerl1.setOptions({
        query: {
          select: "'col2'",
          from: '1BdIN39m70Vo6Sq0Y5lm1s_4Crh1CZpSwRbYMfnM',
          where: "'description' = '" + searchString + "'"
        }
      });
    }
    google.maps.event.addDomListener(window, 'load', initialize);
  </script>
  </head>
  <body>
    <div id="map-canvas"></div>
    <div style="margin-top: 10px;">
      <label>Zone: </label><input type="text" id="search-string-l0">
      <input type="button" onclick="changeMapl0()" value="Search">
    </div>
    <div style="margin-top: 10px;">
      <label>SPP_ID: </label>
      <select id="search-string-l1" onchange="changeMapl1(this.value);">
        <option value="">--Select--</option>
        <option value="<html xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:msxsl="urn:schemas-microsoft-com:xslt">

<head>

<META http-equiv="Content-Type" content="text/html">

<meta http-equiv="content-type" content="text/html; charset=UTF-8">

</head>

<body style= 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:31:19.430

目前 Fusion Tables 不支持使用一个表的 location 列在另一个表上运行空间查询（至少我不知道这种可能性）。但是您仍然可以通过将点转换为几何图形然后`ST_INTERSECTS`在您的宗地表上运行空间查询来实现您想要的。

脚步：

*   从用户单击的点获取 lat/lng 值。来自您的 Fusion Table 或直接[来自地图的点击事件](https://developers.google.com/maps/documentation/javascript/v2/reference?hl=de#GMap2.click)：

    ```
    GEvent.addListener(map, "click", function(overlay, latLng) {
        var lat = latLng.lat(),
            lng = latLng.lng();
    }); 
    ```

这里有一个[从 map 获取 lat/lng 值的完整示例](http://vikku.info/programming/google-maps-v2/get-lattitude-longitude-onmouseover-and-onmouseclick-google-map-v2.htm)。

*   使用此 lat/lng 值更新宗地图层的查询

    ```
     layer.setOptions({
         query: {
             select: location
             from: 
             where: 'ST_INTERSECTS(circle(latlng(lat,lng),radius), location) 
         }
     }); 
    ```

请参阅[Fusion Tables 的圆形示例](https://developers.google.com/fusiontables/docs/samples/circle_example)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T16:30:26.703

尤其是Fusion [Tables API 参考](https://developers.google.com/fusiontables/docs/v1/sql-reference)`ST_DISTANCE`。看起来您要做的是首先对融合表本身中的每个宗地进行地理编码（添加地址字段或纬度/经度列并运行内置地理编码器），然后您可以`SELECT`使用`WHERE ST_DISTANCE(location_column, point_location) <= max_distance`

在单独的说明中，您可能需要考虑将 HTML 格式排除在融合表之外——这通常是您放入应用程序/模板而不是数据源中的内容（例如，想象一下，如果您想将相同的数据源用于

# c++ - 我的值不断增加，而不是在我的循环语句中重置

> ID：13576216
> 
> 赞同：0
> 
> 时间：2012-11-27T01:47:50.773
> 
> 标签：c++

我不确定我的一个公式是否错误，我是否在错误的区域放置了一些东西，或者我完全错过了一些东西。但是当我运行编。它会将前一张顾客餐桌的餐费加起来，而不是为每张新餐桌重新设置。有什么帮助吗？

```
int main ()
{    
  //These are the variables used for the formulas and inputs.
  int people, counter;
  float price, subtotal, tip, tax, total;
  cout<<"How many people are at the table?" <<endl;
  cin>>people;
  //Use a while statement to start a loop
  while (people!=0)
   {
  //Use a for statement inside the while to make a nested loop. It will ask the price of each meal.
  for(counter=1; counter<=people; counter++)
    {
      cout<<"How much is the meal?: " <<endl;
      cin>>price;
        subtotal+=price;
        tax=subtotal*.06;
      if (people<5)
        {
          tip=subtotal*.18;
        }
      else
      tip=subtotal*.20;
      total=tax+subtotal+tip;

    }
  //This is the final output for the program. Which will be the bill.
  cout<<setprecision(2) <<fixed;
  cout<<left;
  cout<<setw(20)<<"Subtotal: " <<"$" <<subtotal <<endl;
  cout<<setw(20)<<"Sales Tax: " <<"$" <<tax <<endl;
  cout<<setw(20)<<"Tip: " <<"$" <<tip <<endl;
  cout<<setw(20)<<"Total: " <<"$" <<total <<endl;
  cout<<" " <<endl;
  cout<<setw(20)<<"How many people are at the table?" <<endl;
  cin>>people;

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:49:56.947

您想在`while`循环内和之前将所有变量重置为 0 `for`，尤其是`subtotal`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T02:05:39.200

看起来像初学者的代码（-：

不初始化变量是非常糟糕的编程，尤其是在 C++ 中。您必须这样做（在创建变量时）！！仅供参考：未初始化 = 包含垃圾（未定义值）。

你应该`subtotal+=price;`改为`subtotal=price;`

并`total=tax+subtotal+tip;`_`total+=tax+subtotal+tip;`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-27T02:08:42.740

尝试使用它而不是 for 循环

整数计数器 = 1；// 不要忘记声明变量

而（计数器<=人）{

// 在这里使用你的价格公式

```
cout<< your desired outputs <<endl;
counter++;             // Update counter so the condition can be met eventually 
```

}

# nhibernate - 使用 Inverse 时流畅的 nhibernate 一对多 子表的外键为空

> ID：13576222
> 
> 赞同：2
> 
> 时间：2012-11-27T01:48:56.517
> 
> 标签：nhibernate, fluent-nhibernate, one-to-many

我有一个父子表，并且使用一对多关系创建和映射实体。在一对多方面，当我使用 Inverse() 时，子表的外键值被插入为空。

```
public class TableA
{
   public virtual long ID { get; set; }
   public virtual string Name { get; set; }
   public virtual IList<TableB> TableB { get; set; }
}

public class TableB
{
   public virtual long ID { get; set; }
   public virtual string Name { get; set; }
   public virtual TableA TableA { get; set; }
}

public class TableAMap : ClassMap<TableA>
{
   public TableAMap()
   {
      Id(x=>x.ID);
      Map(x=>x.Name).Column("Name");
      HasMany(x=>x.TableB)
          .KeyColumn("TableA_ID")
          .Inverse()
          .Cascase.All()
          .Not.LazyLoad();
   }
}

public class TableBMap : ClassMap<TableB>
{
   public TableBMap()
   {
      Id(x=>x.ID);
      Map(x=>x.Name).Column("Name");
      References(x=>x.TableA).Column("TableA_ID").Not.LazyLoad();
   }
} 
```

**注意**当`Inverse()`从多对一删除时，插入新记录没有任何问题，并且插入外键没有任何问题，但是当我更新记录时，现有记录的外键被替换为空。

请帮助我，我查看了类似的问题，但这对我没有帮助。

[Fluent NHibernate 一对多关系将外键设置为空](https://stackoverflow.com/questions/11213274/fluent-nhibernate-one-to-many-relationship-setting-foreign-key-to-null)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T07:48:23.120

请参阅此链接，其中包含此问题的解决方案。

[请参阅此解决方案链接](https://stackoverflow.com/a/11213517/559227)

地图类应该是：

```
public class TableAMap : ClassMap<TableA>
{
   public TableAMap()
   {
      Id(x=>x.ID);
      Map(x=>x.Name).Column("Name");
      HasMany<TableB>(x=>x.TableB)
          .KeyColumn("TableA_ID")
          .Cascade.All().Inverse();
   }
}

public class TableBMap : ClassMap<TableB>
{
   public TableBMap()
   {
      Id(x=>x.ID);
      Map(x=>x.Name).Column("Name");
      References<TableA>(x=>x.TableA).Column("TableA_ID").Not.Nullable();
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:47:05.707

如果没有看到插入的代码，很难准确判断。然而我的水晶球告诉我你可能忘记了最后一行

```
Parent parent = new Parent();
Child child = new Child();
parent.Children.Add(child);
child.Parent = parent;     <-- this is important because this will maintain the foreign key 
```

# c++ - 拖放 Win API 32

> ID：13576225
> 
> 赞同：3
> 
> 时间：2012-11-27T01:49:15.287
> 
> 标签：c++, api, winapi, ole

我正在尝试将一个 ListView 项从我的程序拖放到另一个程序中（例如将路径拖到 VLC 中，它会播放一个视频文件）。我正在使用 CF_HDROP 剪贴板格式。CopySelection 将 STGMEDIUM hglobal 变量设置为 DROPFILES 结构。

```
void CopySelection(HWND hwndList, STGMEDIUM &stgmed)
{
    HGLOBAL hMem;
    DROPFILES  *ptr;
    DROPFILES dfiles;
    POINT p;

    // get the selection inside the list control
    int iPos = SendMessage(hwndList, LVM_GETNEXTITEM, (WPARAM)-1,(LPARAM)LVNI_SELECTED);
    cout << "iPos: " << iPos << endl;
    LVITEM item;
    char buffer[256];
    string fileDir = "";
    item.iItem = iPos;
    item.iSubItem = 1;
    item.cchTextMax = 256;
    item.pszText = buffer;
    item.mask = LVIF_TEXT;

    ListView_GetItem(hwndList, &item);
    fileDir += string(item.pszText);
    fileDir += "\\";
    item.iItem = iPos;
    item.iSubItem = 0;

    ListView_GetItem(hwndList, &item);
    fileDir += string(item.pszText);
    item.iItem = iPos;
    item.iSubItem = 2;

    ListView_GetItem(hwndList, &item);
    fileDir += string(item.pszText);

    cout << "fileDir: " << fileDir << endl;

    hMem = GlobalAlloc(GHND, sizeof(DROPFILES));
    ptr  = (DROPFILES *)GlobalLock(hMem);

    dfiles.fNC = TRUE;
    dfiles.fWide = FALSE;
    memcpy((void*)&dfiles.pFiles, (fileDir.c_str()+'\0'), fileDir.size()+1);

    GetCursorPos(&p);
    dfiles.pt=p;

    // copy the selected text and nul-terminate
    memcpy(ptr, (void*)&dfiles, sizeof(DROPFILES));

    GlobalUnlock(hMem);

    stgmed.hGlobal = hMem;

    //return hMem;
} 
```

但这似乎会导致段错误。这是调用它的 MouseMove 列表消息代码：

```
case WM_MOUSEMOVE:
{
    // stop drag-drop from happening when the mouse is released.
    if(fMouseDown)
    {
        IDataObject *pDataObject;
        IDropSource *pDropSource;
        DWORD        dwEffect;
        DWORD        dwResult;

        FORMATETC fmtetc = { CF_HDROP, 0, DVASPECT_CONTENT, -1, TYMED_HGLOBAL };
        STGMEDIUM stgmed = { TYMED_HGLOBAL   , { 0 }, 0 };

        // transfer the current selection into the IDataObject
        CopySelection(hwnd, stgmed);
        cout << "DO WE?" << endl;

        // Create IDataObject and IDropSource COM objects
        CreateDropSource(&pDropSource);
        CreateDataObject(&fmtetc, &stgmed, 1, &pDataObject);
        //
        //  ** ** ** The drag-drop operation starts here! ** ** **
        //
        //dwResult = DoDragDrop(pDataObject, pDropSource, DROPEFFECT_COPY|DROPEFFECT_MOVE, &dwEffect);
        dwResult = DoDragDrop(pDataObject, pDropSource, DROPEFFECT_COPY, &dwEffect);

        // success!
        if(dwResult == DRAGDROP_S_DROP)
        {
            if(dwEffect & DROPEFFECT_MOVE)
            {
                // remove selection from list control
            }
            else if(dwEffect & DROPEFFECT_LINK)
            {
            }
        }
        // cancelled
        else if(dwResult == DRAGDROP_S_CANCEL)
        {
        }

        pDataObject->Release();
        pDropSource->Release();

        ReleaseCapture();
        fMouseDown = FALSE;
        fDidDragDrop = TRUE;
    } 
```

代码格式正确（我已经检查过），但不确定为什么这不起作用。我什至使用正确的 OLE 剪贴板格式来实现这一点？我不确定要使用哪个，而且我找到的文档也不是很好。

干杯，罗伯

PS我试图修改这个例子： http: [//www.catch22.net/tuts/drop-source](http://www.catch22.net/tuts/drop-source)

不同之处在于，他只是移动文本，而我试图移动文件列表（比如在窗口中选择图标并拖到 vid 播放器上）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T03:00:39.113

您没有为`HGLOBAL`块分配足够的内存。您只分配了足够的内存来保存它`DROPFILES`本身，但没有内存来保存它的文件名。但是，即使您正确分配了内存，您也没有`DROPFILES::pFiles`正确使用该字段。它需要指定从`DROPFILES`文件名列表开始的结构开始的偏移量，但您将其视为内存地址。

试试这个：

```
HGLOBAL CopySelection(HWND hwndList)
{
    // get the selection inside the list control

    int iPos = SendMessage(hwndList, LVM_GETNEXTITEM, (WPARAM)-1,(LPARAM)LVNI_SELECTED);
    if (iPos == -1)
        return NULL;

    cout << "iPos: " << iPos << endl;

    LVITEM item = {0};
    char buffer[256];
    string fileDir;

    item.cchTextMax = 256;
    item.pszText = buffer;
    item.mask = LVIF_TEXT;

    item.iItem = iPos;
    item.iSubItem = 1;
    ListView_GetItem(hwndList, &item);
    fileDir = item.pszText;
    fileDir += "\\";

    item.iItem = iPos;
    item.iSubItem = 0;
    ListView_GetItem(hwndList, &item);
    fileDir += item.pszText;

    item.iItem = iPos;
    item.iSubItem = 2;
    ListView_GetItem(hwndList, &item);
    fileDir += item.pszText;

    cout << "fileDir: " << fileDir << endl;

    // +2 = the filename's null terminator and the file list's null terminator
    HGLOBAL hMem = GlobalAlloc(GHND, sizeof(DROPFILES) + fileDir.length() + 2);
    if (!hMem)
        return NULL;

    DROPFILES *dfiles = (DROPFILES*) GlobalLock(hMem);
    if (!dfiles)
    {
        GlobalFree(hMem);
        return NULL;
    }

    dfiles->pFiles = sizeof(DROPFILES);
    GetCursorPos(&(dfiles->pt));
    dfiles->fNC = TRUE;
    dfiles->fWide = FALSE;
    memcpy(&dfiles[1], fileDir.c_str(), fileDir.length());

    GlobalUnlock(hMem);
    return hMem;
} 
```

.

```
case WM_MOUSEMOVE:
{
    // stop drag-drop from happening when the mouse is released.
    if (fMouseDown)
    {
        IDataObject *pDataObject;
        IDropSource *pDropSource;
        DWORD        dwEffect;
        DWORD        dwResult;

        FORMATETC fmtetc = { CF_HDROP, 0, DVASPECT_CONTENT, -1, TYMED_HGLOBAL };
        STGMEDIUM stgmed = { TYMED_HGLOBAL   , { 0 }, 0 };

        // transfer the current selection into the IDataObject
        stgmed.hGlobal = CopySelection(hwnd);
        if (stgmed.hGlobal)
        {
            cout << "DO WE?" << endl;

            // Create IDataObject and IDropSource COM objects
            CreateDropSource(&pDropSource);
            CreateDataObject(&fmtetc, &stgmed, 1, &pDataObject);
            //
            //  ** ** ** The drag-drop operation starts here! ** ** **
            //
            //dwResult = DoDragDrop(pDataObject, pDropSource, DROPEFFECT_COPY|DROPEFFECT_MOVE, &dwEffect);
            dwResult = DoDragDrop(pDataObject, pDropSource, DROPEFFECT_COPY, &dwEffect);

            // success!
            if(dwResult == DRAGDROP_S_DROP)
            {
                if(dwEffect & DROPEFFECT_MOVE)
                {
                    // remove selection from list control
                }
                else if(dwEffect & DROPEFFECT_LINK)
                {
                }
            }
            // cancelled
            else if(dwResult == DRAGDROP_S_CANCEL)
            {
            }

            pDataObject->Release();
            pDropSource->Release();

            ReleaseCapture();
            fMouseDown = FALSE;
            fDidDragDrop = TRUE;
        }
    } 
```

如果您想一次拖动多个选定的文件，请尝试以下操作：

```
HGLOBAL CopySelection(HWND hwndList)
{
    vector<string> files;
    UINT len = 0;

    // get the selection inside the list control

    int iPos = -1;
    do
    {
        int iPos = SendMessage(hwndList, LVM_GETNEXTITEM, iPos, LVNI_SELECTED);
        if (iPos == -1)
            break;

        LVITEM item = {0};
        char buffer[256];
        string fileDir;

        item.cchTextMax = 256;
        item.pszText = buffer;
        item.mask = LVIF_TEXT;

        item.iItem = iPos;
        item.iSubItem = 1;
        ListView_GetItem(hwndList, &item);
        fileDir = item.pszText;
        fileDir += "\\";

        item.iItem = iPos;
        item.iSubItem = 0;
        ListView_GetItem(hwndList, &item);
        fileDir += item.pszText;

        item.iItem = iPos;
        item.iSubItem = 2;
        ListView_GetItem(hwndList, &item);
        fileDir += item.pszText;

        files.push_back(fileDir);

        // +1 = the filename's null terminator
        len += (fileDir.length() + 1);

        cout << "iPos: " << iPos << ", fileDir: " << fileDir << endl;
    }
    while (true);

    if (files.empty())
        return NULL;

    // +1 = the file list's null terminator
    HGLOBAL hMem = GlobalAlloc(GHND, sizeof(DROPFILES) + len + 1);
    if (!hMem)
        return NULL;

    DROPFILES *dfiles = (DROPFILES*) GlobalLock(hMem);
    if (!dfiles)
    {
        GlobalFree(hMem);
        return NULL;
    }

    dfiles->pFiles = sizeof(DROPFILES);
    GetCursorPos(&(dfiles->pt));
    dfiles->fNC = TRUE;
    dfiles->fWide = FALSE;

    char *pFile = (char*) &dfiles[1];
    for (vector<string>::size_type i = 0; i < files.size(); ++i)
    {
        string &fileDir = files[i];

        // +1 = the filename's null terminator
        len = (fileDir.length() + 1);

        memcpy(pFile, fileDir.c_str(), len);
        pFile += len;
    }

    GlobalUnlock(hMem);
    return hMem;
} 
```

# python - 编写网络应用程序来编程 Arduino

> ID：13576226
> 
> 赞同：1
> 
> 时间：2012-11-27T01:49:16.913
> 
> 标签：python, arduino

我想编写一个网络应用程序，允许人们远程编程 Arduino。将有一个带有 lolShield 的 Arduino 的实时视频流。

在 Python 中闪存 Arduino 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:29:13.527

[inotool](http://inotool.org/)是草图环境的命令行包装器，用 python 编写。

或者您可以使用 exec() 来运行[命令行 Arduino 编译和下载中的命令行解决方案之一？](https://stackoverflow.com/questions/8189306/command-line-arduino-compiling-and-downloading)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T18:56:31.920

avrdude 是通过串行接口对 Arduino 进行编程的工具。所以基本上你需要一个从你的网络服务器到有问题的 Arduino 的串行接口。这里有两种方法可以帮助你到达那里（我在大约 1.5 年前尝试过第一种方法，它很容易奏效）：

1.  Xbee 射频模块可以透明地在串行模式下运行，非常适合这种用例。这样做的缺点是您需要一台连接到 Internet 并充当 Xbee/Zigbee 网络的网关的本地中间机器。ladyada.net 上详细描述了通过 Xbee 对 Arduino 进行[编程](http://www.ladyada.net/make/xbee/arduino.html)。

2.  如果您需要直接 WiFi 连接，这应该以相同的方式工作。XBee 分为两部分：1）适配器，它通过串行接口连接到 Arduino，2）实际的射频模块。因此，如果您可以获得一个位于 XBee 适配器顶部的 WiFi 模块，那么同样的方法应该可以工作。我自己没有尝试过，但我想将第一种方法与[homebrew-tech.com](http://www.homebrew-tech.com/arduino/brewing-arduino-announcement/wiflyxbeewithwifiusingarduinoserialinterface)的以下方法结合起来应该可行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T09:12:32.370

Inotool 是一个不错的选择。除此之外，您还可以尝试以下两个选项。

**仅限 Arduino 1.5.x**

如果您使用的是 Arduino 1.5.x，那么您可以使用 arduino 可执行文件可以接受[命令行参数](https://github.com/arduino/Arduino/wiki/Arduino-IDE-1.5-from-command-line)。

请注意，Arduino 1.5.x 仍处于测试阶段，因此您可能会遇到一些问题。

**Arduino 1.0.x**

如果您使用的是 Arduino 1.0.x，那么您可以使用我[的 Arduino 生成文件，](http://hardwarefun.com/tutorials/compiling-arduino-sketches-using-makefile)它可用于从命令行编译和上传 Arduino（或普通 AVR C）程序到 Arduino。

# php - ColdFusion 和 PHP 变量

> ID：13576229
> 
> 赞同：1
> 
> 时间：2012-11-27T01:49:50.987
> 
> 标签：php, coldfusion

我希望将一些应用程序代码从 PHP 移植到 ColdFusion

ColdFusion 变量：

```
variables.*
request.*
session.*
application.*
server.*
form.*
url.*
arguments.* 
```

PHP 变量

```
$something

$_POST['something']
$_GET['something']

function getSomething($something){   
global $someglobal;
$something
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-05-16T22:38:27.497

以下是 ColdFusion 中可用的范围以及右侧相应的 PHP 对应范围：

如果您使用不带范围前缀的变量名，ColdFusion 将按以下顺序检查范围以查找该变量：

> 本地（仅限函数本地、UDF 和 CFC）=> 无数组。
> 
> 参数 => ？
> 
> 线程本地（仅在线程内部）查询（不是真正的范围；查询循环中的变量）=>？
> 
> 线程 => ？
> 
> 变量 => $GLOBALS[]
> 
> CGI => $_SERVER[]
> 
> cffile => $_FILES[]
> 
> 网址 => $_GET[]
> 
> 表格 => $_POST[]
> 
> 饼干 => $_COOKIE[]
> 
> 客户 => ？
> 
> 请求 => $_REQUEST[]

以下是我用来参考的页面：

[http://php.net/manual/en/language.variables.superglobals.php](http://php.net/manual/en/language.variables.superglobals.php)

[https://helpx.adobe.com/coldfusion/developing-applications/the-cfml-programming-language/using-coldfusion-variables/about-scopes.html](https://helpx.adobe.com/coldfusion/developing-applications/the-cfml-programming-language/using-coldfusion-variables/about-scopes.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T02:00:38.007

我不做 ColdFusion，但我可以根据[这个文档](http://www.quackit.com/coldfusion/tutorial/coldfusion_variable_types.cfm)进行一些猜测。

对于初学者来说，PHP 不会按范围明确地对其变量进行分类。

```
variables.* 
```

...只是`$var1`或`$foo`其他。它的范围取决于它的位置——它是在一个函数、一个类、免费等中。

```
request.* 
```

这些显然是“非持久性全局变量”，它们可能是PHP 中的`$_GET[]`和`$_POST[]`（两个数组）。

```
session.* 
```

这很容易。 `$_SESSION`.

```
application.* 
```

这可能最好用[$_SERVER](http://php.net/manual/en/reserved.variables.server.php)来近似。

该页面上还有其他几种变量类型，它们可能会回答您的问题。不过要小心，在 PHP 中，全局变量是安全漏洞的快速诱因。

# java - Amazon DynamoDB 获取属性值为...的项目 (Java API)

> ID：13576233
> 
> 赞同：5
> 
> 时间：2012-11-27T01:50:06.980
> 
> 标签：java, arraylist, attributes, amazon-dynamodb

我对亚马逊的 AWS 和它的 Java API 还很陌生，所以我不确定我想要做的最有效的方法是什么。基本上，我正在尝试设置一个数据库，该数据库将存储项目的 ID、状态以及用户上传到 S3 存储桶时的存储桶和位置。我遇到的问题是获取状态属性下状态为“就绪”的所有项目 ID 的列表。任何处于“就绪”状态的项目都需要将其 ID 号加载到数组或数组列表中以供以后参考。有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T01:57:31.760

这样做的方法是使用扫描 API。但是，这意味着 dynamo 需要查看表中的每个项目，并检查其属性“status”是否等于“ready”。此操作的成本会很大，并且会因读取表中的每个项目而向您收费。

代码看起来像这样：

```
Condition scanFilterCondition = new Condition()
    .withComparisonOperator(ComparisonOperator.EQ.toString())
    .withAttributeValueList(new AttributeValue().withS("ready"));
Map<String, Condition> conditions = new HashMap<String, Condition>();
conditions.put("status", scanFilterCondition);

ScanRequest scanRequest = new ScanRequest()
    .withTableName("MasterProductTable")
    .withScanFilter(conditions);

ScanResult result = client.scan(scanRequest); 
```

有一种方法可以使它变得更好，尽管它需要对您的数据进行非规范化。尝试使用“状态”的哈希键和“项目 ID”的范围键保留第二个表。这是对现有表的补充。这将允许您使用 Query API（scan 的便宜得多的表亲），并要求它提供哈希键为“ready”的所有项目。这将为您提供所需的项目 ID 列表，然后您可以从已有的项目 ID 表中获取它们。

代码如下所示：

```
QueryRequest queryRequest = new QueryRequest()
    .withTableName("ProductByStatus")
    .withHashKeyValue(new AttributeValue().withS("ready"));

QueryResult result = client.query(queryRequest); 
```

这种方法的缺点是每次更新状态字段时都必须更新两个表，并且必须确保它们保持同步。Dynamo 不提供事务性，因此您必须准备好主项目表更新成功但辅助状态表没有成功的情况。或相反亦然。

如需进一步参考：[http ://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/QueryAndScan.html](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/QueryAndScan.html)

# c# - 将用户数据输出到文件 XNA

> ID：13576241
> 
> 赞同：0
> 
> 时间：2012-11-27T01:51:06.750
> 
> 标签：c#, file-io, xna

```
namespace highscores
{
    public class Game1 : Microsoft.Xna.Framework.Game
    {
        //Stuff for HighScoreData
        public struct HighScoreData
        {
            public string[] PlayerName;
            public int[] Score;

            public int Count;

            public HighScoreData(int count)
            {
                PlayerName = new string[count];
                Score = new int[count];

                Count = count;
            }
        }

        /* More score variables */
        HighScoreData data;
        public string HighScoresFilename = "highscores.dat";
        int PlayerScore = 0;
        string PlayerName;
        string scoreboard;
        string typedText = "";
        int score = 0;
        public static SpriteFont font;
        public static Texture2D textBoxTexture;
        public static Texture2D caretTexture;
        bool txt;

        // String for get name
        string cmdString = "Enter your player name and press Enter";
        // String we are going to display – initially an empty string
        string messageString = "";

        SpriteBatch spriteBatch;
        GraphicsDeviceManager graphics;
        KeyboardState oldKeyboardState;
        KeyboardState currentKeyboardState;
        private string textString;

        public Game1()
        {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = "Content";

#if XBOX
            Components.Add(new GamerServicesComponent(this));
#endif

            currentKeyboardState = Keyboard.GetState();

        }

        /// <summary>
        /// Allows the game to perform any initialization it needs to before starting to run.
        /// This is where it can query for any required services and load any non-graphic
        /// related content.  Calling base.Initialize will enumerate through any components
        /// and initialize them as well.
        /// </summary>
        protected override void Initialize()
        {
            txt = true;
            //Append characters to the typedText string when the player types stuff on the keyboard.
            KeyGrabber.InboundCharEvent += (inboundCharacter) =>
            {
                //Only append characters that exist in the spritefont.
                if (inboundCharacter < 32)
                    return;

                if (inboundCharacter > 126)
                    return;

                typedText += inboundCharacter;
            };

            // Get the path of the save game
            string fullpath = "highscores.dat";

            // Check to see if the save exists
#if WINDOWS
            if (!File.Exists(fullpath))
            {
                //If the file doesn't exist, make a fake one...
                // Create the data to save
                data = new HighScoreData(5);
                data.PlayerName[0] = "neil";
                data.Score[0] = 2000;

                data.PlayerName[1] = "barry";
                data.Score[1] = 1800;

                data.PlayerName[2] = "mark";
                data.Score[2] = 1500;

                data.PlayerName[3] = "cindy";
                data.Score[3] = 1000;

                data.PlayerName[4] = "sam";
                data.Score[4] = 500;

                SaveHighScores(data, HighScoresFilename);
            }
#elif XBOX

            using (IsolatedStorageFile iso = IsolatedStorageFile.GetUserStoreForApplication())
            {
                if (!iso.FileExists(fullpath))
                {
                    //If the file doesn't exist, make a fake one...
                    // Create the data to save
                    data = new HighScoreData(5);
                    data.PlayerName[0] = "neil";
                    data.Score[0] = 2000;

                    data.PlayerName[1] = "shawn";
                    data.Score[1] = 1800;

                    data.PlayerName[2] = "mark";
                    data.Score[2] = 1500;

                    data.PlayerName[3] = "cindy";
                    data.Score[3] = 1000;

                    data.PlayerName[4] = "sam";
                    data.Score[4] = 500;

                    SaveHighScores(data, HighScoresFilename, device);
                }
            }

#endif

            base.Initialize();
        }
        #region saving
        /* Save highscores */
        public static void SaveHighScores(HighScoreData data, string filename)
        {
            // Get the path of the save game
            string fullpath = "highscores.dat";

#if WINDOWS
            // Open the file, creating it if necessary
            FileStream stream = File.Open(fullpath, FileMode.Create);
            try
            {
                // Convert the object to XML data and put it in the stream
                XmlSerializer serializer = new XmlSerializer(typeof(HighScoreData));
                serializer.Serialize(stream, data);
            }
            finally
            {
                // Close the file
                stream.Close();
            }

#elif XBOX

            using (IsolatedStorageFile iso = IsolatedStorageFile.GetUserStoreForApplication())
                {

                    using (IsolatedStorageFileStream stream = new IsolatedStorageFileStream(fullpath, FileMode.Create, iso))
                    {

                        XmlSerializer serializer = new XmlSerializer(typeof(HighScoreData));
                        serializer.Serialize(stream, data);

                    }

                }

#endif
        }

        /* Load highscores */
        public static HighScoreData LoadHighScores(string filename)
        {
            HighScoreData data;

            // Get the path of the save game
            string fullpath = "highscores.dat";

#if WINDOWS

            // Open the file
            FileStream stream = File.Open(fullpath, FileMode.OpenOrCreate, FileAccess.Read);
            try
            {
                // Read the data from the file
                XmlSerializer serializer = new XmlSerializer(typeof(HighScoreData));
                data = (HighScoreData)serializer.Deserialize(stream);
            }
            finally
            {
                // Close the file
                stream.Close();
            }

            return (data);

#elif XBOX

            using (IsolatedStorageFile iso = IsolatedStorageFile.GetUserStoreForApplication())
            {
                using (IsolatedStorageFileStream stream = new IsolatedStorageFileStream(fullpath, FileMode.Open,iso))
                {
                    // Read the data from the file
                    XmlSerializer serializer = new XmlSerializer(typeof(HighScoreData));
                    data = (HighScoreData)serializer.Deserialize(stream);
                }
            }

            return (data);

#endif

        }

        /* Save player highscore when game ends */
        private void SaveHighScore()
        {
            // Create the data to saved
            HighScoreData data = LoadHighScores(HighScoresFilename);

            int scoreIndex = -1;
            for (int i = data.Count - 1; i > -1; i--)
            {
                if (score >= data.Score[i])
                {
                    scoreIndex = i;
                }
            }

            if (scoreIndex > -1)
            {
                //New high score found ... do swaps
                for (int i = data.Count - 1; i > scoreIndex; i--)
                {
                    data.PlayerName[i] = data.PlayerName[i - 1];
                    data.Score[i] = data.Score[i - 1];
                }

                data.PlayerName[scoreIndex] = PlayerName; //Retrieve User Name Here
                data.Score[scoreIndex] = score; // Retrieve score here

                SaveHighScores(data, HighScoresFilename);
            }
        }

        /* Iterate through data if highscore is called and make the string to be saved*/
        public string makeHighScoreString()
        {
            // Create the data to save
            HighScoreData data2 = LoadHighScores(HighScoresFilename);

            // Create scoreBoardString
            string scoreBoardString = "Highscores:\n\n";

            for (int i = 0; i < 5; i++) // this part was missing (5 means how many in the list/array/Counter)
            {
                scoreBoardString = scoreBoardString + data2.PlayerName[i] + "-" + data2.Score[i] + "\n";
            }
            return scoreBoardString;
        }
        #endregion
        /// <summary>
        /// LoadContent will be called once per game and is the place to load
        /// all of your content.
        /// </summary>
        protected override void LoadContent()
        {
            // Create a new SpriteBatch, which can be used to draw textures.
            spriteBatch = new SpriteBatch(GraphicsDevice);
            font = Content.Load<SpriteFont>("Spritefont1");
            // TODO: use this.Content to load your game content here
        }

        /// <summary>
        /// UnloadContent will be called once per game and is the place to unload
        /// all content.
        /// </summary>
        protected override void UnloadContent()
        {
            // TODO: Unload any non ContentManager content here
        }

        protected override void Update(GameTime gameTime)
        {
            if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
                this.Exit();

            oldKeyboardState = currentKeyboardState;
            currentKeyboardState = Keyboard.GetState();
            //UpdateInput();
            score = 100;
            if(typedText != "")
                PlayerName = typedText;
            if (GamePad.GetState(PlayerIndex.One).Buttons.A == ButtonState.Pressed)
            {
                SaveHighScore();
                txt = false;
            }

            base.Update(gameTime);
        }

        //ignore this method
        private void UpdateInput()
        {
            oldKeyboardState = currentKeyboardState;
            currentKeyboardState = Keyboard.GetState();

            Keys[] pressedKeys;
            pressedKeys = currentKeyboardState.GetPressedKeys();

            foreach (Keys key in pressedKeys)
            {
                if (oldKeyboardState.IsKeyUp(key))
                {
                    if (key == Keys.Back) // overflows
                        textString = textString.Remove(textString.Length - 1, 1);
                    else
                        if (key == Keys.Space)
                            textString = textString.Insert(textString.Length, " ");
                        else
                            textString += key.ToString();
                }
            }
        } 

        /// <summary>
        /// This is called when the game should draw itself.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Draw(GameTime gameTime)
        {
            GraphicsDevice.Clear(Color.CornflowerBlue);
            spriteBatch.Begin();
            if (txt == true)
            {
                spriteBatch.DrawString(font, typedText, new Vector2(0, graphics.GraphicsDevice.PresentationParameters.BackBufferHeight * .5f), Color.White);
            }
            else if (txt == false)
            {
               spriteBatch.DrawString(font, makeHighScoreString(), new Vector2(500, 300), Color.Red);
            }
            //spriteBatch.DrawString(font, textString, new Vector2(256, 300), Color.Red);

            spriteBatch.End();
            // TODO: Add your drawing code here

            base.Draw(gameTime);
        }
    }
} 
```

以上是我正在测试的 XNA 程序的 Game1.cs 文件。我正在测试键盘输入（它使用另一个名为 KeyGrabber.cs 的类），并且我正在测试将 int 分数和字符串名称保存到文件的能力，以便我可以在我的游戏中使用高分系统。他们的键盘输入似乎可以正常工作，因为它可以输出到屏幕。保存似乎也可以保存默认数据。

我的问题是当有人完成某个分数值并在屏幕上输入他们的名字时，我想覆盖这些数据。问题是，一旦我写入文件，一旦数据没有改变。即使我更改了示例数据的默认值（例如，PlayerName = "neil", score = 2000），原始数据仍然保留，没有显示任何更改。

我的另一个问题实际上是动态添加值。我认为这很容易（也许是，我很累），但我似乎无法将用户提供的数据输出到文件中（例如，如果他们写了自己的名字或获得了一定的分数），甚至没有最初。

> 基本上，我想输出到一个文件，一个高分列表。有两个保存的值（名称和分数）。我想从屏幕上输入的文本中读取名称（变量是“typedText”）。

**编辑**

好吧，写完这一切，它击中了我。显然，一旦创建文件，样本数据值就不会改变，因为只有在文件不存在时才会添加它们。所以不要在意这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T16:09:35.607

有一个代表单个高分的简单类怎么样：

```
public class HighScore
{
    public String Name { get; set; }
    public int Score { get; set; }
} 
```

您将所有高分保存在 a`List<HighScore>`中，并使用

```
XmlSerializer serializer = new XmlSerializer(typeof(List<HighScore>)); 
```

* * *

## 样本

拥有一个私有类型的字段`List<HighScore>`可以很容易地添加和搜索分数：

```
List<HighScore> _highScores = new List<HighScore>();

void LoadData()
{
    //...
    Stream dataStream = //whichever way you open it
    XmlSerializer serializer = new XmlSerializer(typeof(List<HighScore>));
    _highScores = serializer.Deserialize(dataStream) as List<HighScore>;
} 
```

要添加高分，您只需调用

```
_highScores.Add(new HighScore(){ Name = someName, Score = someScore }); 
```

要保存它，请使用相同的序列化程序对其进行序列化。使用 LINQ，很容易对分数进行排序：

```
var orderedScores = _highScores.OrderByDescending(s=>s.Score);
HighScore bestScore = orderedScores.FirstOrDefault(); 
```

* * *

## 笔记

使用 Windows 时，您可能希望将数据保存在 ApplicationData 文件夹中（因为在发布游戏时您可能无法写入安装文件夹）。你可以像这样得到你的保存游戏路径：

```
String dirPath = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData), "GameName");
DirectoryInfo directory = new DirectoryInfo(dirPath);
if (!directory.Exists)
    directory.Create(); //so no exception rises when you try to access your game file

this.SavegamePath = Path.Combine(dirPath, "Savegame.xml"); 
```

# python - 在 Python 中将包含十六进制（以及其他字符）的字符串转换为二进制

> ID：13576245
> 
> 赞同：0
> 
> 时间：2012-11-27T01:51:43.920
> 
> 标签：python, string, binary, hex

我有一个包含以下行的文件`something.something(hexvalue1,hexvalue2)`

我正在尝试将这些十六进制值转换为二进制。根据我的研究，我发现我必须在每一行中搜索十六进制值，然后将它们转换为二进制。我不确定如何在字符串中搜索包含其他变量的十六进制值。注意：所有行的格式相同。

当我做 ：

```
for line in file:
    string = line
    string.split('(') 
```

不会在 '('

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T01:54:46.203

在 python 中，所有字符串方法都返回新对象（它们*必须*返回，因为字符串是不可变类型）。 `str.split`返回一个`list`。所以要解析你的字符串，它会是这样的：

```
for line in file:
    left,right = line.split('(',1)
    hexvalues = right.split(')')[0]
    hex1,hex2 = hexvalues.split(',') 
```

对于那些更倾向于正则表达式的人：

```
import re
>>> re.findall(r'\(([^)]+)',"this.is(0xffaabb,0x112214)")
['0xffaabb,0x112214'] 
```

# c# - 如何在没有基于任务的代理的情况下处理 Windows Phone 8 中的服务引用

> ID：13576248
> 
> 赞同：2
> 
> 时间：2012-11-27T01:52:22.750
> 
> 标签：c#, async-await, windows-phone-8, service-reference

由于如此强调基于任务的异步开发，我惊讶地发现 Windows Phone 8 中的服务引用不支持基于任务的实现。相反，他们使用“XYZCompleted”基于事件的异步方法。

因此，需要这样的代码：http: [//codepaste.net/fqyt47](http://codepaste.net/fqyt47)

```
public async Task<IEnumerable<MyService.Character>> GetCharactersAsync()
{
    var _Task = new TaskCompletionSource<IEnumerable<MyService.Character>>();
    var _Client = new MyService.ServiceClient();
    _Client.GetCharactersCompleted += (s, e) =>
    {
        var _Characters = e.Result as IEnumerable<MyService.Character>;
        if (e.Error != null && !_Task.TrySetException(e.Error))
            System.Diagnostics.Debugger.Break();
        else if (e.Cancelled && !_Task.TrySetCanceled())
            System.Diagnostics.Debugger.Break();
        else if (!_Task.TrySetResult(_Characters))
            System.Diagnostics.Debugger.Break();
    };
    _Client.GetCharactersAsync();

    return await _Task.Task;
} 
```

然而，**这感觉不对**。有没有更好、更优雅的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T02:28:20.563

我很惊讶 Windows Phone 8 没有`Task`基于 - 的参考创建。

也就是说，`TaskCompletionSource` [是与各种异步模式（包括 EAP）进行互操作的标准方式](http://msdn.microsoft.com/en-us/library/hh873178.aspx)。

通常它是通过扩展方法完成的，这些扩展方法可以被消耗`await`但它们本身不是`async`：

```
public Task<IEnumerable<MyService.Character>> GetCharactersTaskAsync(this ServiceClient client)
{
  var tcs = new TaskCompletionSource<IEnumerable<MyService.Character>>();
  client.GetCharactersCompleted += (s, e) =>
  {
    if (e.Error != null) tcs.SetException(e.Error);
    else if (e.Cancelled) tcs.SetCanceled();
    else tcs.SetResult(e.Result);
  };
  client.GetCharactersAsync();
  return tcs.Task;
} 
```

# javascript - JavaScript 使用正则表达式进行验证

> ID：13576249
> 
> 赞同：0
> 
> 时间：2012-11-27T01:52:23.160
> 
> 标签：javascript, regex

我正在验证表格，表格中的文本必须是 CIT、BIS 或 MATH

```
if(dept == ""){
     msg += "You must enter a department\n";
}else if((dept != "CIT") && (dept != "BIS") && (dept != "MATH")){
     msg += '"' + dept + '"' + " is not one of CIT, BIS, or MATH.\n";
} 
```

我需要添加某种形式的正则表达式，以确保输入时文本 CIT、BIS 或 MATH 可以以任何形式大写和小写。

任何帮助都会很棒谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T01:54:38.807

不需要正则表达式。

只需在验证之前将您的输入转换为小写即可。

```
if (dept == "") {
    msg += "You must enter a department\n";
}
else if (isInvalid(dept)) {
    msg += '"' + dept + '"' + " is not one of CIT, BIS, or MATH.\n";
}

function isInvalid(u) {
  var s = u.toLowerCase();
  var validStrings = [ "cit", "bis", "math" ];
  for (var i = 0; i < validStrings.length; i++) {
      if (s === validStrings[i]) {
          return false;
      }
  }
  return true;
} 
```

* * *

正如@y_nk 所指出的，以下方法会更有效（如有必要）：

```
function isValid(s) {
    var validationObject = { "cit" : true, "bis": true, "math": true };
    return validationObject[ s.toLowerCase() ] === true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T01:59:04.903

如果你真的认为正则表达式是这样的：

```
if (!/^(?:BIS|CIT|MATH)$/i.test(dept)) {
} 
```

必须锚定表达式，这就是为什么您还会在其中看到非捕获组的原因。

一个更好的方法是：

```
if (['cit', 'bis', 'math'].indexOf(dept.toLowerCase()) == -1) {
} 
```

不幸的是，这只适用于从 IE9 开始，因为[`Array.indexOf()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T01:58:39.720

像这样的东西

```
var regex = new RegExp("^CIT$|^BIS$|^MATH$", "i");

if(dept == ""){
     msg += "You must enter a department\n";
}else if(!regex.test(dept)){
     msg += '"' + dept + '"' + " is not one of CIT, BIS, or MATH.\n";
} 
```

# windows - 如何在我的计算机上不运行官方 Windows 8 操作系统的情况下为 Windows 8 编写应用程序？

> ID：13576251
> 
> 赞同：1
> 
> 时间：2012-11-27T01:52:50.707
> 
> 标签：windows, windows-8

我的电脑上没有 Windows 8。但是，我安装了 Windows 8 的 Consumer Preview 版本。有什么方法可以在 Consumer Preview 版本上创建适用于 Windows 8 的应用程序？Visual Studio for Windows 8 无法安装，因为它会出现大量错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T01:59:12.073

要使用 Visual Studio 2012 的最终版本构建 Windows 应用商店应用程序，您将需要使用 Windows 8 RTM 构建。

无论如何，您都不想使用 Windows 8 Consumer Preview 来开发 Windows Store 应用程序——在 Consumer Preview 和 RTM 构建之间，平台、框架和工具已经发生了重大变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T04:46:01.647

简短的回答是，如果没有 Windows 8 RTM 或更高版本，您将无法开发 Windows 应用商店应用程序。

如果您不想安装/分区您的硬盘，那么在无需对驱动器进行分区的情况下进行 Windows 8 安装是一个好主意。

[如何使用简单、易于执行的步骤创建 Windows 8 VHD 以启动到 VHD](http://blogs.technet.com/b/haroldwong/archive/2012/08/18/how-to-create-windows-8-vhd-for-boot-to-vhd-using-simple-easy-to-follow-steps.aspx)

[用于编程 Windows 应用商店应用程序的开发人员下载](http://msdn.microsoft.com/en-us/windows/apps/br229516.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T05:29:05.250

请参阅，Windows 8 应用程序使用 Windows 8 API，例如目录和所有 . 因此，要制作任何现代 UI 应用程序，您需要使用 VS 2012 安装 Windows 8

# python - Python for循环添加到方程？

> ID：13576252
> 
> 赞同：0
> 
> 时间：2012-11-27T01:52:59.240
> 
> 标签：python, loops, for-loop, equation

我在这个程序中需要一些帮助。我需要帮助弄清楚如何让它计算超过十年的利息（包括第一个）。这是我自己得到的。我将不胜感激对这个问题的一些见解。

谢谢。*"print() 仅用于间距，以便程序看起来更干净。

```
p= int(input(" Intial Amount? "))
print()
r= float(input(" Rate? (Decimal) "))
print()
n= int(input(" Number Of Times Compunded? (Yearly) "))
print()
t= float(input(" Number Of Years? "))
A= p*(1+r/n)**(n*t)
print()
print( " Interest At Final Year","$",format(A, ',.2f'))
print()
for i in range (10):
    print(format(i+1, '3')," Year","Interest","$",format(A,',.2f')) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T01:58:03.307

在循环体中，您不会更新任何变量的值。您需要在每次迭代时更新 A 或将中间结果存储在其他变量中。例如，请参见以下内容：

```
def compound_interest(r, n, initial):
    current_value = initial
    for i in range(n):
        current_value *= (1 + r)
        print(current_value) 
```

我使用 current_value 变量来保存循环的中间结果。如果我在每次迭代中都简单地完成了 initial * (1 + r) 那么 initial 的值永远不会改变；如果您想继续使用它，必须保存计算的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T02:24:56.320

> 在程序的最后，它将计数 1-10，但它的数量与第一次计算的数量相同。

是的，那是因为在那个循环中唯一发生的事情就是`print`调用。`A`在进入循环之前，您只是一次计算所有内容，然后`A`一遍又一遍地使用相同的内容。

> 我需要帮助使它添加新值以在“n”和“p”发生变化时相加。

好吧，你没有改变`n`or `p`，我认为你不需要这样做。但是你确实需要改变*一些东西*。如果您想`A`通过循环打印每次的不同值，则必须`A`根据上一年的 重新计算下一年的`A`值，或者确定正确值的任何其他内容。

例如：

```
for year in range (10):
    jan1balance = p
    for period in range(n):
        p = p * (1 + r)
    print(format(year+1, '3')," Year","Interest","$",format(p - jan1balance,',.2f')) 
```

或者：

```
for year in range (10):
    yearlyinterest = 0
    for period in range(n):
        periodinterest = p * r
        yearlyinterest += periodinterest
        p += periodinterest
    print(format(year+1, '3')," Year","Interest","$",format(yearlyinterest,',.2f')) 
```

# ruby-on-rails - Heroku 上的 RSS 解析错误

> ID：13576257
> 
> 赞同：0
> 
> 时间：2012-11-27T01:53:47.073
> 
> 标签：ruby-on-rails, heroku, rss, open-uri

我正在做一些简单的 RSS 解析和渲染——在本地主机和 Heroku 的生产环境中工作得非常好，但由于某种原因，这个特定的 RSS 提要仅在本地主机上有效，但在 Heroku 上部署时无效。

这是RSS提要：

```
http://careers.joelonsoftware.com/jobs/feed?tags=network 
```

这是我在 Heroku 上遇到的错误：

```
A ActionView::Template::Error occurred in jobs#index:
503 Service Unavailable
/usr/local/lib/ruby/1.9.1/open-uri.rb:346:in `open_http' 
```

这是我的代码：

```
@rss = RSS::Parser.parse(the_rss_feed, false)
render :partial => "layouts/rss_syndicated_jobs", :locals => {:rss => @rss} 
```

我要求：

```
require 'rss/2.0'
require 'open-uri' 
```

这似乎是一个完全有效的 RSS 提要 - 再次，在 localhost 上工作正常 - 但在 Heroku 部署时却不行......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T02:18:58.780

该域不喜欢 Heroku 的服务器发出 HTTP`GET`请求。

**来自 Heroku**

```
➜  deefour ✗ heroku run "curl -s -D - careers.joelonsoftware.com/jobs/feed -o /dev/null"
Running `curl -s -D - careers.joelonsoftware.com/jobs/feed -o /dev/null` attached to terminal... up, run.9211
HTTP/1.0 503 Service Unavailable
Cache-Control: no-cache
Connection: close
Content-Type: text/html 
```

**从本地机器**

```
➜  deefour ✗ curl -s -D - careers.joelonsoftware.com/jobs/feed -o /dev/null 
HTTP/1.1 200 OK
Cache-Control: private, max-age=1800
Content-Type: application/rss+xml; charset=utf-8
Expires: Tue, 27 Nov 2012 02:46:38 GMT
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: POST, GET, OPTIONS
Access-Control-Allow-Headers: x-requested-with
Access-Control-Max-Age: 60
Date: Tue, 27 Nov 2012 02:16:38 GMT
Content-Length: 10982 
```

如果您通过 Heroku 打印响应正文，它会提供以下信息

> 此 IP 仅允许访问我们的 API。为了保护我们的用户，我们无法处理来自该 IP 地址的请求。如果您认为您错误地访问了此页面，请与我们联系。

# objective-c - 为什么 reloadData 有效但 reloadItem 无效？

> ID：13576259
> 
> 赞同：0
> 
> 时间：2012-11-27T01:53:55.750
> 
> 标签：objective-c, macos, cocoa, nstableview, nsoutlineview

我有一个很好用的 NSOutlineView。如果我更改模型，大纲视图会在我调用时更新：`[self.myOutlineView reloadData]`。然而，当我分析我的程序时，似乎有 10% 的时间用于更新我的大纲视图。`[self.myOutlineview reloadItem:myIndexPath]`因此，我尝试通过调用where `myIndexPath`is the NSIndexPath 到我正在更新的大纲视图中的节点来仅更新已更改的模型对象而不是整个大纲视图。但是，当我打电话时什么都没有发生，而当我打电话`reloadItem`时一切正常`reloadData`。有没有人对我做错了什么或如何解决这个问题有任何建议？

谢谢！干杯，特隆德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T03:56:02.557

大纲视图`reloadItem:`需要 item 参数，而不是索引路径。所以，通过实际的项目。`NSIndexPath`根本不被`NSOutlineView`班级使用。

# svn - 在 windows7 64 位和 Ubuntu 上将 mercurial 存储库转换为 subversion 的问题

> ID：13576264
> 
> 赞同：0
> 
> 时间：2012-11-27T01:54:26.897
> 
> 标签：svn, mercurial, mercurial-extension

我想将一个 mercurial 存储库转换为 subversion（我知道，我知道），但是[从 Mercurial 转换为 Subversion](https://stackoverflow.com/questions/1898994/converting-from-mercurial-to-subversion)的标准答案似乎对我不起作用。我已经从 collabnet 安装了 tortoiseHg 和 svn 命令行包。有什么想法或提示吗？

```
D:\work\horizon>hg convert --dest-type svn src horizon-svn --debug --traceback
initializing svn repository 'horizon-svn'
running: "svnadmin" "create" "D:\work\horizon\horizon-svn" < NUL:
Traceback (most recent call last):
  File "mercurial\dispatch.pyo", line 87, in _runcatch
  File "mercurial\dispatch.pyo", line 696, in _dispatch
  File "mercurial\dispatch.pyo", line 472, in runcommand
  File "mercurial\extensions.pyo", line 184, in wrap
  File "hgext\color.pyo", line 362, in colorcmd
  File "mercurial\dispatch.pyo", line 786, in _runcommand
  File "mercurial\dispatch.pyo", line 757, in checkargs
  File "mercurial\dispatch.pyo", line 693, in <lambda>
  File "mercurial\util.pyo", line 463, in check
  File "hgext\convert\__init__.pyo", line 269, in convert
  File "hgext\convert\convcmd.pyo", line 439, in convert
  File "hgext\convert\convcmd.pyo", line 70, in convertsink
  File "hgext\convert\subversion.pyo", line 1027, in __init__
  File "hgext\convert\common.pyo", line 322, in run0
  File "hgext\convert\common.pyo", line 318, in checkexit
Abort: svnadmin exited with status 1
abort: svnadmin exited with status 1 
```

这是版本信息：

```
D:\test\Horizon>hg version
Mercurial Distributed SCM (version 2.2.3)
(see http://mercurial.selenic.com for more information)

Copyright (C) 2005-2012 Matt Mackall and others
This is free software; see the source for copying conditions. There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

D:\test\Horizon> 
```

当我在 Ubuntu 上尝试相同的操作时，它也会以类似的方式失败。

```
mike@mike-virtual-machine ~/repos $ hg convert --dest-type svn ~/Horizon ~/HorizonToSvn -v --debug  --traceback > debug_convert.log
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/mercurial/dispatch.py", line 87, in _runcatch
    return _dispatch(req)
  File "/usr/lib/python2.7/dist-packages/mercurial/dispatch.py", line 684, in _dispatch
    cmdpats, cmdoptions)
  File "/usr/lib/python2.7/dist-packages/mercurial/dispatch.py", line 466, in runcommand
    ret = _runcommand(ui, options, cmd, d)
  File "/usr/lib/python2.7/dist-packages/mercurial/dispatch.py", line 738, in _runcommand
    return checkargs()
  File "/usr/lib/python2.7/dist-packages/mercurial/dispatch.py", line 692, in checkargs
    return cmdfunc()
  File "/usr/lib/python2.7/dist-packages/mercurial/dispatch.py", line 681, in <lambda>
    d = lambda: util.checksignature(func)(ui, *args, **cmdoptions)
  File "/usr/lib/python2.7/dist-packages/mercurial/util.py", line 458, in check
    return func(*args, **kwargs)
  File "/usr/lib/python2.7/dist-packages/hgext/convert/__init__.py", line 269, in convert
    return convcmd.convert(ui, src, dest, revmapfile, **opts)
  File "/usr/lib/python2.7/dist-packages/hgext/convert/convcmd.py", line 445, in convert
    c.convert(sortmode)
  File "/usr/lib/python2.7/dist-packages/hgext/convert/convcmd.py", line 361, in convert
    self.copy(c)
  File "/usr/lib/python2.7/dist-packages/hgext/convert/convcmd.py", line 330, in copy
    source, self.map)
  File "/usr/lib/python2.7/dist-packages/hgext/convert/subversion.py", line 1144, in putcommit
    entries.update(self.add_dirs(files.difference(entries)))
  File "/usr/lib/python2.7/dist-packages/hgext/convert/subversion.py", line 1101, in add_dirs
    self.xargs(add_dirs, 'add', non_recursive=True, quiet=True)
  File "/usr/lib/python2.7/dist-packages/hgext/convert/common.py", line 366, in xargs
    self.run0(cmd, *(list(args) + l), **kwargs)
  File "/usr/lib/python2.7/dist-packages/hgext/convert/common.py", line 317, in run0
    self.checkexit(status, output)
  File "/usr/lib/python2.7/dist-packages/hgext/convert/common.py", line 313, in checkexit
    raise util.Abort('%s %s' % (self.command, msg))
Abort: svn exited with status 32512
abort: svn exited with status 32512
mike@mike-virtual-machine ~/repos $ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T03:51:14.873

**我想，今天情况的**标准答案必须是“使用 hgsubversion 进行交互”

扩大的视野：

*   您**必须**在推送之前将 Mercurial DAG 转换为适用于 Subversion 线性历史
*   您可以创建空的 SVN 存储库作为未来的推送目标**或**（对于现有的 SVN 源），将 SVN 存储库克隆到其他存储库中，从中提取您的存储库，合并，推送
*   为了推入空的 repo authormap 和 branchmap 可能必须手工准备

# iphone - 使用 CGRectMake 移动子视图会导致崩溃

> ID：13576266
> 
> 赞同：1
> 
> 时间：2012-11-27T01:54:36.920
> 
> 标签：iphone, objective-c, ios

我正在尝试单击按钮移动子视图，但它崩溃并给了我`-[MainGameDisplay openTimeChanger:]: unrecognized selector sent to instance 0x10e443d0`

这就是我正在做的事情：

```
@interface:
UIImageView *changerBackground;
@implementation

timerView = [[UIView alloc] initWithFrame:CGRectMake(0, 278, 105, 27)];
[self.view addSubview:timerView];

changerBackground = [[UIImageView alloc] init];
[changerBackground setImage:[UIImage imageNamed:@"speedbackground.png"]];
changerBackground.frame = CGRectMake(-12 , 9, 105, 33);
[changerBackground setUserInteractionEnabled:YES];
[timerView addSubview:changerBackground];

UIButton *timerBackground = [UIButton buttonWithType:UIButtonTypeCustom];
[timerBackground setBackgroundImage:[UIImage imageNamed:@"Time Background.png"] forState:UIControlStateNormal];
[timerBackground setBackgroundImage:[UIImage imageNamed:@"Time Background.png"] forState:UIControlStateHighlighted];
[timerBackground addTarget:self action:@selector(openTimeChanger:) forControlEvents:UIControlEventTouchUpInside];
timerBackground.frame = CGRectMake(-2 , 15, 102, 27);
[timerView addSubview:timerBackground];

-(void)openTimeChanger {
    [UIView animateWithDuration:0.2f
                     animations:^{
                         changerBackground.frame = CGRectMake(-12 , -16, 105, 33);
                     }
                     completion:Nil];
} 
```

还要注意 changerBackground 有 3 个子视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:59:09.007

你需要改变这个，

```
[timerBackground addTarget:self action:@selector(openTimeChanger:) forControlEvents:UIControlEventTouchUpInside]; 
```

到

```
[timerBackground addTarget:self action:@selector(openTimeChanger) forControlEvents:UIControlEventTouchUpInside]; //note that semicolon is not there in the method name 
```

您的方法定义 is`-(void)openTimeChanger`和 not `-(void)openTimeChanger:(id)sender`。它试图找到具有此定义的方法，但该方法不可用，因此崩溃。

如果要使用`[timerBackground addTarget:self action:@selector(openTimeChanger:) forControlEvents:UIControlEventTouchUpInside];`，则将方法更改为`-(void)openTimeChanger:(id)sender`.

# javascript - 根据用户输入对项目列表进行优先排序（使用尽可能少的比较）

> ID：13576271
> 
> 赞同：1
> 
> 时间：2012-11-27T01:54:51.010
> 
> 标签：javascript, algorithm

我正在尝试在 Javascript 中创建一个简单的“人力优先级”程序，并且我想找到一种根据用户输入对项目列表进行排序的方法。

我认为最好使用一种[尽可能少的比较](https://stackoverflow.com/questions/13092548/which-sorting-algorithm-uses-the-fewest-comparisons)算法来实现这一点（以便向用户提供尽可能少的提示。）

我想按重要性对以下项目进行排序（其中每对项目的相对重要性由用户决定。）：

`1) Finish Haxe project`

`2) Finish Java project`

`3) Fix car`

我想将这些项目成对呈现给用户，然后让他们决定哪个项目最重要。哪种排序算法最适合此任务（用户将在哪里比较项目？）

这是使用用户输入的自动优先级排序器的示例：http: [//luhman.org/prioritizer-scheduler](http://luhman.org/prioritizer-scheduler)

更新：我已经写了一个脚本来做到这一点：就是这样。[http://jsfiddle.net/fq3sy/1/](http://jsfiddle.net/fq3sy/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T02:31:59.287

JavaScript 数组提供了该`sort`方法，它允许传入一个回调函数来对非字符串进行自定义排序。如果您可以在这样的回调函数中执行“阻塞”用户输入集合，则可以使用所需的“哪个更重要”问题的集合对列表进行完全排序（可能`window.confirm()`带有“A 是否比 A 更重要”这样的问题乙？”）。这在漂亮的 UI 方面会很丑陋，但可能是实用且有效的。

为了避免在执行排序过程中出现问题回答，您至少可以为列表分配一个开始顺序，执行排序并记录要求的项目对，然后将所有这些对显示在一个列表中。两个项目中哪一个更重要的任何更改都会触发一个手段，然后用户将被要求仅回答那些新的项目（并且尚未被询问）。

Tad 允许用户拖放以对列表进行排序的想法可能很好（尽管听起来您想要“哪个更重要”流程代替），但我推荐 jQuery 及其[Sortable 插件](http://docs.jquery.com/UI/API/1.8/Sortable)。

要确定哪种排序算法最适合使用，这可能很困难。没有一种算法能以最少的步数可靠地对列表进行排序，因为所需的步数总是取决于项目的初始位置。一些排序算法确实更有效，但如果列表开始完全反向排序或以另一种与该算法相反的方式排序，它们仍然可能代价高昂。无论您使用哪种方案，都会有效率低下的方式。然而，有些比其他更好。

要解决这个问题，请从查看[流行的排序算法](http://en.wikipedia.org/wiki/Sorting_algorithm)开始。每种排序都有最好的情况、平均的和最坏的情况。在[您在评论中链接的问题中](https://stackoverflow.com/questions/13092548/which-sorting-algorithm-uses-the-fewest-comparisons)，提问者说他​​的数据具有重复多次的排序键，因此回答者建议可能使用插入排序，其最佳情况是在输入已经排序时出现。但是，在列表完全相反的情况下，它的最坏情况性能非常糟糕，为 O(n2)。对于任意比较，几乎可以达到的最佳结果是 O(n log n)。

不过，我确实有一个减少问题数量的想法：首先显示带有一组 HML（高中低）按钮的整个项目列表，供用户为每个按钮分配总体优先级。这可以由用户非常快速地完成。完成后，分别对每个列表进行排序。这基本上是在进行分配排序，并将大量减少“哪个更重要”问题的*数量*。我的直觉是，对三个包含 10 个项目的列表进行排序比对一个包含 30 个项目的列表进行排序要便宜得多。

您最好的选择可能是合并排序或堆排序。但是您需要自己检查算法。也许您会在一切都乱序时在开始时使用一种排序，然后在以后的排序中使用一种在输入已经接近有序时性能最佳的方法。

无论如何，我将列表分解为 HML 类别的想法应该大大减少使用任何排序方法的步骤数。

经过一番思考，在我看来，让用户执行相当于插入排序的操作可能是一种合理的方法。为了实现它，不是让用户一次将一个未排序的项目与每个已排序的项目进行比较，只需要求用户将新项目放置在已排序项目中的正确位置即可。要求用户选择一个项目开始。它可以是最重要的、最不重要的，也可以是中间的某个地方——这并不重要。然后，显示一个项目的列表（有足够的空间容纳更多），然后一次显示一个，让他拖到适当的位置（或以其他方式选择）每个未排序的项目在列表中所属的位置。完成后，列表将被排序。这提高了效率，因为用户不必在每个步骤中一次一个地阅读（和比较）列表中的每一个项目——他 只要熟悉它，就会知道他的项目是属于列表中的已组织部分的顶部、中间还是底部。他将能够快速扫描明显不匹配的优先区域，然后将他必须仔细权衡以确定正确顺序的少数项目归零。任何时候，如果他改变了已经放置的物品的顺序，他可以重新排列它们。

作为最后的评论，我想建议您研究一下[“完成事情”](http://en.wikipedia.org/wiki/Getting_Things_Done)模型，它比“按优先顺序做事”模型具有一些优势。至少，拥有一个可信赖的计算机系统、安排和忘记它们以及避免重复相同工作的概念对于任何帮助用户完成工作的系统来说似乎都是无价的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T02:18:30.600

[听起来像一个使用 Javascript http://tool-man.org/ToolManDHTML/sorting.html](http://tool-man.org/ToolManDHTML/sorting.html)的拖放排序列表

您可以对 Example: A Basic List 进行排序，然后单击右侧的检查按钮以获取当前顺序。应该很容易适应你想要的。

注意：我与该网站没有任何从属关系 - 只是我在 google 中快速找到的第一个。

# ruby-on-rails - Ruby on Rails Twitter App - 创建新状态时关联当前用户 ID

> ID：13576273
> 
> 赞同：-1
> 
> 时间：2012-11-27T01:55:05.737
> 
> 标签：ruby-on-rails, twitter-bootstrap, rails-activerecord

我正在尝试学习有关 Ruby on Rails Twitter 应用程序的教程，但当我走到最后时，我注意到我不太喜欢您可以创建其他用户的帖子这一事实。我的愿望只是创造你自己的。

我怎样才能做到这一点

```
Status Controller Create:
def create
@status = Status.new(params[:status])
respond_to do |format|
  if @status.save
    format.html { redirect_to @status, notice: 'Status was successfully created.' }
    format.json { render json: @status, status: :created, location: @status }
  else
    format.html { render action: "new" }
    format.json { render json: @status.errors, status: :unprocessable_entity }
  end
end
end 
```

状态创建当前的视图：

```
...
<div class="field">

<%= f.input :user_id, collection: User.all, label_method: :full_name %>
<%= f.input :content %>
</div>
<div class="form-actions">
<%= f.submit %>
</div> 
```

状态模型：

```
class Status < ActiveRecord::Base
attr_accessible :content, :user_id
belongs_to :user
end 
```

希望任何人都可以提供帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T01:59:08.470

你可以在这里使用一些授权！

*   与康康的授权，瑞恩贝茨的宝石

    [http://railscasts.com/episodes/192-authorization-with-cancan?autoplay=true](http://railscasts.com/episodes/192-authorization-with-cancan?autoplay=true)

*   从头开始授权 pt.1, pt.2

    [http://railscasts.com/episodes/385-authorization-from-scratch-part-1?autoplay=true](http://railscasts.com/episodes/385-authorization-from-scratch-part-1?autoplay=true)

    [http://railscasts.com/episodes/386-authorization-from-scratch-part-2?view=asciicast](http://railscasts.com/episodes/386-authorization-from-scratch-part-2?view=asciicast)

* * *

一种更简单的方法，因为您正在编写教程（=> 您想学习），您可以使用关联来解决它。

在 app/models/user.rb 里面

```
has_many :statuses, dependent: :destroy 
```

并从 app/models/status.rb 中删除 attr_accessible :user_id

attr_accessible :attribute 意味着用户可以通过表单显式设置此属性的值，这是您不想要的。

然后检查您的控制器，如果正在为其创建帖子的用户是当前登录用户。如果没有，请不要允许。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T02:21:09.463

在应用程序控制器中：

```
def current_user
  User.find(session[:user_id]) if session[:uid]
end 
```

在对用户进行身份验证时，您必须设置会话 user_id。

在您看来（使用[SimpleForm](https://github.com/plataformatec/simple_form)）：

```
 <%= f.input :user_id, as: :hidden, input_html: { value: current_user.id }%> 
```

这将起作用。如果您遇到困难，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T02:01:54.010

如果你改变这个

```
<%= f.input :user_id, collection: User.all, label_method: :full_name %> 
```

至

```
(some place in you view - or in the controller)
<% <your object>.user_id = <current user id> %>
...
<%= f.hidden_field :user_id %> 
```

我认为它会起作用

# mysql - mysql替换字段中的内容

> ID：13576274
> 
> 赞同：0
> 
> 时间：2012-11-27T01:55:12.257
> 
> 标签：mysql

我有一个名为 Database 的数据库和一个名为 Table 的表，以及 Table feed_meta 中的一个列，其中包含作为数据的一部分“&query=d|e|” 在更长的 URL 中。如何找到此实例并替换为“&query=a|b|c|d|e|” 不清除 URL 字符串的其他数据部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T01:57:47.810

```
UPDATE `Database`.`Table`
SET feed_meta = REPLACE(feed_meta, '&query=d|e|', '&query=a|b|c|d|e'); 
```

见[http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_replace](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_replace)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T01:58:17.407

```
update table
set feed_meta = replace(feed_meta, '&query=d|e|', '&query=a|b|c|d|e|') 
```

# robots.txt - 正确的 Robots.txt 代码？

> ID：13576282
> 
> 赞同：0
> 
> 时间：2012-11-27T01:56:06.373
> 
> 标签：robots.txt

我最近通过网站管理员工具向 Google 提交了我的网站，但我看不到任何来自 Google 的搜索结果。谷歌网站管理员工具显示站点地图错误 - “URL 受 robots.txt 限制” - 但据我所知，该错误不应该是问题，还是我弄错了？robots.txt 可能有问题？

```
 User-agent: Slurp
 Disallow: /

 User-agent: Baiduspider
 Disallow: /

 User-agent: ia_archiver
 Disallow: /

 User-agent: duggmirror
 Disallow: /

 User-agent: Yandex
 Disallow: /

 User-agent: *
 Disallow: /cgi-bin/
 Disallow: /wp-admin/
 Disallow: /wp-includes/
 Disallow: /wp-content/
 Disallow: /build/
 Disallow: /css/
 Disallow: /trackback/
 Disallow: /comments/
 Disallow: /assets/graphics/
 Disallow: /assets/visual/ 
```

**更新**我在验证器中运行了 robots.txt 并对其进行了更新（见上文）以不返回任何警告并将其提交给 Google。谷歌抓取该网站，但它没有编制索引。我已经向 Google 网站管理员工具提交了站点地图，向 Google fetch 提交了新的 robots.txt，以及包括主页在内的 7 个不同的页面和帖子。它们都显示 Fetch 状态：成功 URL 提交到索引。

是的，有一个旧的 robots.txt 文件阻止了所有机器人。新的显然没问题，但仍然显示警告消息（见下文）

**谷歌站长健康**：

**留言**您没有留言

**抓取错误**在过去 90 天内未检测到错误。好的！

**被阻止的 URL** robots.txt 文件：mysite.com/robots.txt 被阻止的 URL：1 状态：200（成功）

**索引状态**总索引：0

**谷歌站长优化**：

**网站地图**

站点地图内容：网页 99 已提交 1 已编入索引

*错误详情*：0 个错误，99 个警告。 *类型*：警告 *问题*：url 被 robots.txt 阻止。 *说明*：站点地图包含被 robots.txt 阻止的网址。 *问题计数*：99 *示例值*： http: [//mysite.com](http://mysite.com)

谷歌网站管理员工具中的消息对我来说似乎很矛盾，我真的不知道我是否还好，只需要等待还是有问题。

# android - Android SearchView.OnQueryTextListener OnQueryTextSubmit 未在空查询字符串上触发

> ID：13576283
> 
> 赞同：29
> 
> 时间：2012-11-27T01:56:21.523
> 
> 标签：android, searchview

我正在使用**Android 4.1.2**。我有一个`SearchView`小部件`ActionBar`。`SearchView.OnQueryTextListener`来自 android 开发者网站的文档说明`onQueryTextSubmit`当用户提交查询时触发/调用。这可能是由于键盘上的按键或按下提交按钮所致。”

如果搜索查询为空，则不会发生这种情况。我需要这个来触发一个空查询以清除 ListView 的搜索过滤器。这是一个错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-27T04:08:45.080

这不是错误，[源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/widget/SearchView.java#SearchView.onSubmitQuery%28%29)故意检查 null 和空值：

```
private void onSubmitQuery() {
    CharSequence query = mQueryTextView.getText();
    if (query != null && TextUtils.getTrimmedLength(query) > 0) { 
```

但是，当用户清除搜索 EditText 时，您应该能够使用 OnQueryTextChange 回调清除 ListView 的可过滤项。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-11-20T03:05:13.017

我有一个更简单的解决方法：使用 onQueryTextChange，但只有在它为空时才渲染。

```
searchView.setOnQueryTextListener(new SearchView.OnQueryTextListener() {
            @Override
            public boolean onQueryTextSubmit(String query) {
                    renderList(true);
                    return false;
            }

            @Override
            public boolean onQueryTextChange(String newText) {
                    if (searchView.getQuery().length() == 0) {
                            renderList(true);
                    }
                    return false;
            }
    }); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-10-29T22:42:11.210

我遇到了同样的问题，最终得到了以下解决方案：custom `SearchView`+`OnQueryTextListener.onQueryTextChange`

自定义搜索视图：

```
public class MySearchView extends SearchView {

private boolean expanded;

public MySearchView(Context context) {
    super(context);
}

@Override
public void onActionViewExpanded() {
    super.onActionViewExpanded();
    expanded = true;
}

@Override
public void onActionViewCollapsed() {
    super.onActionViewCollapsed();
    expanded = false;
}

public boolean isExpanded() {
    return expanded;
}
} 
```

创建动作和设置回调：

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    super.onCreateOptionsMenu(menu, inflater);
    searchAction = menu.add(0, SEARCH_ACTION_ID, 0 , getString(R.string.action_search));
    searchAction.setShowAsAction(SHOW_AS_ACTION_ALWAYS | SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);       
    searchView = new MySearchView(getSherlockActivity());
    searchView.setOnQueryTextListener(searchQueryListener);
    searchView.setIconifiedByDefault(true);
    searchAction.setActionView(searchView);
} 
```

最后是听众：

```
private OnQueryTextListener searchQueryListener = new OnQueryTextListener() {
    @Override
    public boolean onQueryTextSubmit(String query) {
        search(query);
        return true;
    }

    @Override
    public boolean onQueryTextChange(String newText) {
        if (searchView.isExpanded() && TextUtils.isEmpty(newText)) {
            search("");
        }

        return true;
    }

    public void search(String query) {
        // reset loader, swap cursor, etc.
    }

}; 
```

经 ABS 4.3 测试。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-08-15T09:22:33.077

我对 SearchView 有同样的问题。我的解决方案包括设置 SearchView 的样式，如指南[http://novoda.com/blog/styling-the-actionbar-searchview/](http://novoda.com/blog/styling-the-actionbar-searchview/)中所示，并为 EditText 设置 OnEditorActionListener（[当用户按 Enter 时如何触发操作？](https://stackoverflow.com/questions/4209404/how-do-i-trigger-an-action-when-the-user-has-hit-enter)）是 SearchView 的一部分是这样的：

```
final SearchView searchView = (SearchView)findViewById(R.id.search);
int searchPlateId = searchView.getContext().getResources().getIdentifier("android:id/search_src_text", null, null);
EditText searchPlate = (EditText) searchView.findViewById(searchPlateId);
searchPlate.setOnEditorActionListener(new TextView.OnEditorActionListener() {
    @Override
    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {

        if (actionId == EditorInfo.IME_ACTION_SEARCH) {
            //Do something
        }
        return false;

    }}); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-09-03T09:11:06.467

这是一个旧线程，但我找到了另一个解决方案（Kotlin 代码，但也适用于 Java）：

```
override fun onQueryTextChange(newText: String?): Boolean {
            if(newText == null || newText.isEmpty())
                searchView.setQuery("\u00A0", false)
            return true
        } 
```

`\u00A0`是一个看起来像空格的字符，但在代码方面它不是。换句话说，SearchView 不是空的。空字符串或`" "`不起作用，因为基本 SearchView 使用修剪，加上用户可能想要搜索以空格结尾或开头的文本。但据我所知，用户无法输入`\u00A0`字符。

然后您需要做的就是`return super.getQuery.replace("\u00A0", "")`在您的自定义 SearchView中覆盖 getQuery

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-02-23T20:44:41.077

**这是一个非常肮脏的 hack**，但是它可以按预期正常工作，即使在 SearchView 中没有输入（或输入然后编辑）文本时也启用提交操作。

它反射性地获得对内部 TextView 编辑器操作侦听器的访问，将其包装在自定义侦听器中，在该侦听器中将调用委托给处理程序，最后将其设置为内部 TextView 的操作侦听器。

```
 Class klass = searchView.getClass();
    try {
        Field currentListenerField = klass.getDeclaredField("mOnEditorActionListener");
        currentListenerField.setAccessible(true);
        TextView.OnEditorActionListener previousListener = (TextView.OnEditorActionListener) currentListenerField.get(searchView);
        TextView.OnEditorActionListener newListener = new TextView.OnEditorActionListener() {
            @Override
            public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
                if (v.getText().length() == 0)
                    handleQuery("");
                return previousListener.onEditorAction(v, actionId, event);
            }
        };
        Field innerTextViewField = klass.getDeclaredField("mSearchSrcTextView");
        innerTextViewField.setAccessible(true);
        SearchView.SearchAutoComplete innerTextView = (SearchView.SearchAutoComplete) innerTextViewField.get(searchView);
        innerTextView.setOnEditorActionListener(newListener);
    } catch (Exception e) {
        throw new IllegalStateException(e);
    } 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-07-02T20:40:20.600

正如其他人所提到的，这种行为是故意的。我放弃了解决方案，`OnQueryChangeListener`并决定通过`OnEditorActionListener`在 SearchView 上实现来解决问题`EditText`，您可以使用`R.id.search_src_text`. 只要你`setImeOptions`的SearchView 到`EditorInfo.IME_ACTION_SEARCH`你就可以处理键盘搜索按钮的点击。有关更多详细信息，请参阅[此 SO 答案](https://stackoverflow.com/a/9948214/1747491)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-13T21:57:35.680

我遇到了同样的问题，因为不支持空查询，所以我必须下载并使用[ActionBarSherlock](http://actionbarsherlock.com/)，然后修改 onSubmitQuery() 方法。

这就是我的 onSubmitQuery() 现在的样子

```
private void onSubmitQuery() {
     CharSequence query = mQueryTextView.getText();
     if (query == null) {query = "";}
     if (mOnQueryChangeListener == null
             || !mOnQueryChangeListener.onQueryTextSubmit(query.toString())) {
         if (mSearchable != null) {
             launchQuerySearch(KeyEvent.KEYCODE_UNKNOWN, null, query.toString());
             setImeVisibility(false);
         }
         dismissSuggestions();
     }
 } 
```

希望这可以帮助。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-11-04T00:38:19.453

我可以通过以这种方式实现 setOnQueryTextListener 来做到这一点：

```
SearchView searchView = (SearchView) menu.findItem(R.id.searchProductView).getActionView();
    searchView.setOnQueryTextListener(new SearchView.OnQueryTextListener() {
        @Override
        public boolean onQueryTextSubmit(String query) {
            return false;
        }

        @Override
        public boolean onQueryTextChange(String newText) {
            if (TextUtils.isEmpty(newText)) {
                loadLocalData(newText);
            }
            return true;
        }
    }); 
```

我的 loadLocalData 方法在哪里

```
//query my DB
products = ProductDAO.findByIdList(idList);
LinearLayoutManager layoutManager = new LinearLayoutManager(this);
listView.setLayoutManager(layoutManager);
listView.setAdapter(<YOURADAPTER>) 
```

即使您使用“X”按钮清除文本，此解决方案也会清除您的查询

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-11-12T15:55:33.280

这是一个用 Kotlin 编写的完整示例：

```
import android.content.Context
import android.text.TextUtils
import android.util.AttributeSet
import android.view.inputmethod.EditorInfo
import android.widget.TextView
import androidx.appcompat.widget.SearchView

/**
 * Custom [SearchView] which can listen to empty submit events
 *
 * If the internal implementation would change, this will not crash at runtime. It will simply
 * ignore the empty submit listener and will continue to work as this is the base [SearchView]
 */
class EmptySubmitSearchView @JvmOverloads constructor(
    context: Context,
    attrs: AttributeSet? = null,
    defStyleAttr: Int = 0
) : SearchView(context, attrs, defStyleAttr) {

    private lateinit var searchAutoComplete: SearchAutoComplete

    private lateinit var internalEditorListener: TextView.OnEditorActionListener

    private var emptySubmitListener: OnEmptySubmitListener? = null

    init {
        try {
            val defaultListenerField = SearchView::class.java
                .getDeclaredField("mOnEditorActionListener")
            defaultListenerField.isAccessible = true
            internalEditorListener = defaultListenerField.get(this) as TextView.OnEditorActionListener

            val searchAutoCompleteField = SearchView::class.java
                .getDeclaredField("mSearchSrcTextView")
            searchAutoCompleteField.isAccessible = true
            searchAutoComplete = searchAutoCompleteField.get(this) as SearchAutoComplete

            searchAutoComplete.setOnEditorActionListener { v, actionId, event ->
                if (actionId == EditorInfo.IME_ACTION_DONE && TextUtils.isEmpty(searchAutoComplete.text)) {
                    emptySubmitListener?.onEmptyTextSubmit()
                } else {
                    internalEditorListener.onEditorAction(v, actionId, event)
                }
                true
            }
        } catch (ignored: Exception) {
            //Some internal field has changed. Check there is a field called
            //mSearchSrcTextView and mOnEditorActionListener and if not update them accordingly
        }
    }

    /**
     * Set custom empty listener or null to remove it
     */
    fun setOnEmptySubmitListener(listener: OnEmptySubmitListener?) {
        emptySubmitListener = listener
    }

    interface OnEmptySubmitListener {
        fun onEmptyTextSubmit()
    }
} 
```

您可以设置一个自定义侦听器，`setOnEmptySubmitListener`使您能够区分事件。

您可以自定义要响应的 actionId，在这种情况下，我的 XML 中有 EmptySubmitSearchView 与此`android:imeOptions="actionDone|flagNoExtractUi"`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-02-19T17:49:45.863

另一种选择是通过 TextWatcher 手动触发 onQueryTextChange 方法：

```
public class MyActivity extends Activity implements SearchView.OnQueryTextListener, TextWatcher {

    // Basic onCreate(Bundle) here

    @Override
    public boolean onCreateOptionsMenu (final Menu menu) {
        getMenuInflater().inflate(R.menu.myMenu, menu);

        final SearchView searchView = (SearchView) menu.findItem(R.id.action_search).getActionView();
        final SearchManager manager = (SearchManager) getSystemService(SEARCH_SERVICE);
        searchView.setSearchableInfo(manager.getSearchableInfo(getComponentName()));
        searchView.setOnQueryTextListener(this);

        final int resource_edit_text = searchView.getContext().getResources().getIdentifier("android:id/search_src_text", null, null);
        ((EditText) searchView.findViewById(resource_edit_text)).addTextChangedListener(this);

        return super.onCreateOptionsMenu(menu);
    }

    // Implementation of TextWatcher, used to have a proper onQueryTextChange (it doesn't update when the last character is removed)
    @Override
    public void beforeTextChanged (final CharSequence charSequence, final int start, final int count, final int after) {}

    @Override
    public void onTextChanged (final CharSequence charSequence, final int start, final int before, final int after) {}

    @Override
    public void afterTextChanged (final Editable editable) {
        if (editable.length() == 0)
            onQueryTextChange(editable.toString());
    }

    // Implementation of OnQueryTextChangeListener

    @Override
    public boolean onQueryTextChange (final String query) {
        // do stuff
        return false;
    }

    @Override
    public boolean onQueryTextSubmit (final String query) {
        // do stuff
        return false;
    }
} 
```

这一切都与这里放弃的所有默认 xml 文件一起使用，这不是这个答案的重点。这是我选择使用的解决方法，请随意使用其他人

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-02-01T14:31:51.913

您不能覆盖此行为。当用户退出搜索视图时，一种解决方法可能是清除过滤器。

您可以为此使用[OnCloseListener](https://stackoverflow.com/questions/9327826/searchviews-oncloselistener-doesnt-work)。但是，这也可能会导致问题，具体取决于您开发的最低 API 级别。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-03-17T18:43:15.063

这是 samvel1024 将其转换为 Kotlin 的答案。您可能需要将 IME_ACTION_GO 更改为您用于键盘“开始”按钮的任何内容。只需在页面初始化期间运行此方法。

```
/**
 * Business: User should be allowed to perform an empty search.
 * SearchView does not cause OnQueryTextChange to fire when the box is empty.
 * To create a listener method for this scenario, we use reflection to gain access to the SearchView's inner TextView.
 */
private fun enableEmptySearch(searchView: SearchView) {
    try {
        val searchViewClass = searchView::class.java
        val currentListenerField: Field = searchViewClass.getDeclaredField("mOnEditorActionListener")
        currentListenerField.isAccessible = true
        val previousListener: TextView.OnEditorActionListener = currentListenerField.get(searchView) as TextView.OnEditorActionListener
        val newListener: TextView.OnEditorActionListener = TextView.OnEditorActionListener { v, actionId, event ->
            if (actionId == EditorInfo.IME_ACTION_GO && v.text.isEmpty()) {
                querySubmit()
            }
            previousListener.onEditorAction(v, actionId, event)
        }
        val innerTextViewField: Field = searchViewClass.getDeclaredField("mSearchSrcTextView")
        innerTextViewField.isAccessible = true
        (innerTextViewField.get(searchView) as TextView).setOnEditorActionListener(newListener) // Allow user to tap the "GO" button when the SearchView is empty.
    } catch (ignored: Exception) {
        // If a major change occurs to android SDK, internal fields mSearchSrcTextView or mOnEditorActionListener might not exist.
        // This exception will prevent this additional feature from functioning, but not crash the app or cause any other issues.
    }
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-08-26T11:34:03.093

就我而言，我只是想让用户清除他的查询，因为它在 API 搜索中用作关键字，所以最简单的想法是：

```
 searchView.setOnSearchClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            userQuery = "";
        }
    }); 
```

其中 userQuery 是我用于搜索等的变量。

希望它可以帮助某人:)

# windows-8 - 包含列表和详细信息的 Windows 8 应用页面

> ID：13576284
> 
> 赞同：1
> 
> 时间：2012-11-27T01:56:40.490
> 
> 标签：windows-8

我现在正在为 Windows 8 应用程序设计一个页面。页面有 2 个部分，左边部分就像一个列表，当用户在列表中选择一项时，右边部分将根据选择显示内容。但我想在左边选择不同的项目会在右边显示不同的数据。例如，可能选择列表中的第一项，右侧会显示一些文本块。选择第二项，右侧会显示一个图像。

后面的数据是一个有一些属性的类。我只想根据列表中的选择显示此属性

那么如何实现呢？有人知道吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T02:09:46.990

Visual Studio Express for Windows 8 附带的模板之一支持此列表和详细信息视图 - 查看[拆分应用程序模板](http://msdn.microsoft.com/en-us/library/windows/apps/hh768232.aspx#split_project_template_for_windows_store_apps)。

有关详细信息，请参阅：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh738343.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh738343.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:02:11.257

在项目模板中，为每种不同的数据类型在单独的面板中创建控件：文本、图像、视频等。然后您可以在每个面板上使用转换器来检查它所绑定的数据并在适当的位置显示/隐藏面板. 根据您的数据源，您可能正在评估类类型或包含显示类型的枚举值的属性，或者可能是对类属性状态的一些更复杂的评估。

# java - java中具有多个元素的数组和其他问题

> ID：13576286
> 
> 赞同：0
> 
> 时间：2012-11-27T01:56:54.427
> 
> 标签：java, arrays, string, methods, double

将此程序链接到此类时遇到问题。该程序接受一组 String + double 数组并经过一系列排序以产生结果。我们的指示是按名称排序，然后按价格排序。

主要问题是字符串显示为十六进制，例如（Item@4fjipe）等。

第二个问题是我的类型。我只是不知道如何让它们工作。如果可能，请提供帮助。我将包括课程和程序。请记住，它们是 2 个不同的 .java 一起工作。顺便说一句，我是初学者。

```
public class Item
{
private String itemName; // hold the name of the item
private double itemPrice; // hold the price of the item

public Item(String s, double p) // Constructor
{
    itemName = s;
    itemPrice = p;
}//end constructor

public void setName(String n)
{//method to set the item name
    itemName = n;
}//end method

public String getName()
{//method to get the item name
    return itemName;
}//end method   

public double setPrice(double p1)
{//method to set the price of the item
    itemPrice = p1;
    return itemPrice;
}//end method

public double getPrice()
{//method to get the price of the item
    return itemPrice;
}//end method

}//end class 
```

现在其他的开始了。这仍然是一团糟。

```
import javax.swing.*;
import java.util.Arrays;
public class CoffeeDriver
{
public static void main (String[] args)
{
    Item[] itemArray = new Item[5]; // Array of type Item declaration

    boolean loopControl = false; //variable for control of our loop

    while (!loopControl)
    {
        itemArray[0] = new Item("Coffee", 1.00);
        itemArray[1] = new Item("Water", 2.00);
        itemArray[2] = new Item("Milk", 1.50);
        itemArray[3] = new Item("Bagel",1.25);
        itemArray[4] = new Item("Donut", 0.75);

        String input = JOptionPane.showInputDialog(null, "Welcome to Wings Coffee Shop.  We have a great list items on our menu. \nWould you like to see these items sorted by name of by price? (n/p):");

        if(input.equals("n"))
        {
            sortName(itemArray);
            JOptionPane.showMessageDialog(null, itemArray);

        }//end if

        else if(input.equals("p"))
        {   
            sortPrice(itemArray);

            JOptionPane.showMessageDialog(null, itemArray);

        }

        else 
        {
            loopControl = true; 
        }

    }//end while

}//end main

public static void sortName(Item[] itemArray)
{
    int n = itemArray.length;
    Item temp = new Item("",0);

    for (int i =0; i < n; i++)
    {
        for(int j =1; j<(n-1); j++)
        {
            temp.setPrice(itemArray[j+1].getPrice());
            temp.setName(itemArray[j+1].getName());

            if(itemArray[j+1] == itemArray[j])
            {

                temp.setPrice(itemArray[j+1].getPrice());
                temp.setName(itemArray[j+1].getName());
                itemArray[j+1].setPrice(itemArray[j].getPrice());
                itemArray[j+1].setName(itemArray[j].getName());
                itemArray[j].setPrice(temp.getPrice());
                itemArray[j].setName(temp.getName());
                temp = itemArray[j+1];
                itemArray[j+1] = itemArray[j];
                itemArray[j] = temp;

                JOptionPane.showMessageDialog(null, itemArray);

            }//end if

        }//end inner for

    }//end outer for

}//end sortName

public static void sortPrice(Item[] itemArray)
{
    int n = itemArray.length;
    Item temp = new Item("",0);

    for (int i =0; i < n; i++)
    {
        for(int j =1; j<(n-1); j++)
        {
            temp.setPrice(itemArray[j+1].getPrice());
            temp.setName(itemArray[j+1].getName());

            if(itemArray[j+1] == itemArray[j])
            {

                temp.setPrice(itemArray[j+1].getPrice());
                temp.setName(itemArray[j+1].getName());
                itemArray[j+1].setPrice(itemArray[j].getPrice());
                itemArray[j+1].setName(itemArray[j].getName());
                itemArray[j].setPrice(temp.getPrice());
                itemArray[j].setName(temp.getName());
                temp = itemArray[j+1];
                itemArray[j+1] = itemArray[j];
                itemArray[j] = temp;

                JOptionPane.showMessageDialog(null, itemArray);

            }//end if

        }//end inner for

    }//end outer for

}//end sortPrice

}//end class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T02:00:17.357

您需要覆盖类中的`toString`方法`Item`。你可以使用：

```
@Override
public String toString() {
    return "Item [itemName=" + itemName + ", itemPrice=" + itemPrice + "]";
} 
```

由于您需要有 2 种单独的方法来按名称*和*按价格排序，因此您可以为这两种情况使用[自定义比较器](https://stackoverflow.com/questions/2784514/sort-arraylist-of-custom-objects-by-property)，使用适当的字段进行比较。查看[Arrays.sort()](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28T%5B%5D,%20java.util.Comparator%29)进行实际排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T02:18:08.010

'Item@4fjipe' 是默认实现提供的对象引用`Object.toString()`- 阅读 API 以供参考。

Java 中的十六进制文字以 0x 开头，例如 0x10。

对于您的特定问题，您有一个希望以 2 种不同方式排序的数据对象。阅读 Comparator 和 Comparable 的 API 文档。然后检查 Collections API 以查看哪些集合可能会为您提供排序。

# java - 如何从 .exe 中提取代码或检索项目中丢失的代码？

> ID：13576287
> 
> 赞同：0
> 
> 时间：2012-11-27T01:57:00.913
> 
> 标签：java, project, exe

我在我的 java 项目的类 Graph2 中有一个完整的代码。我试图使用 JSmooth 为我的程序创建一个 .exe 文件。然后我切换到 Launch4j 并用它来创建 .exe。当我回到我的项目时，我所有的源代码都不见了，它被替换为：

```
 < ?xml version="1.0" encoding="ISO-8859-1"?>

   < jsmoothproject>

   < arguments></arguments>

   < embeddedJar>false</embeddedJar>

   < initialMemoryHeap>-1</initialMemoryHeap>

   < mainClassName></mainClassName>

   < maximumMemoryHeap>-1</maximumMemoryHeap>

   < maximumVersion></maximumVersion>

   < minimumVersion></minimumVersion>

   < skeletonName><![CDATA[

   < none>]]>

   < /skeletonName>

   < /jsmoothproject> 
```

帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T22:46:16.430

1）如果你至少有类文件，反编译它们。[我在哪里可以找到 Java 反编译器？](https://stackoverflow.com/questions/671394/where-can-i-find-a-java-decompiler)

2）如果你不这样做，你仍然有JSmooth（或Launch4j）生成的exe文件中的jar文件。 [JSmooth 将 jar 提取到默认临时目录](http://jsmooth.sourceforge.net/docs/jsmooth-doc.html#N1034F)中，因此请在程序运行时对其进行复制。从 jar 文件中您可以获得类文件（使用解压缩程序），然后转到第 1 点）

# php - 在数组键中使用冒号，或如何避免它

> ID：13576290
> 
> 赞同：2
> 
> 时间：2012-11-27T01:57:35.483
> 
> 标签：php, arrays, syntax, special-characters

身份管理系统（基于 SAML2.0）向我传递了一个数组，该系统在数组中为我提供了一组用户属性。

身份提供者配置了这些数据的结构，我正在为这家（更大的公司）提供服务。改变我接收这个数组的方式不在我的控制范围内。

数组以这种形式与我一起到达（这就是我看到`print_r`的数组）：

```
Array
(
[http://longurl/surname] => Array ([0] => Smith)
[http://longurl/firstname] => Array ([0] => John)
); 
```

如您所见，这个数组数组的键是一个 URL（我相信他们有充分的理由？！）。但是，如果我尝试像这样使用这个数组：

```
echo 'Hello Mr. '.$SAMLDATA[http://longurl/surname][0]; 
```

这不好，因为冒号不是变量内的有效字符（或者我读过）。

逃脱角色似乎不起作用，知道我能在这里做什么吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T02:13:31.737

由于 PHP 的*非整数*数组键是*字符串*，因此必须将它们引用为字符串。如果你不引用它们，PHP 将发出`E_NOTICE`关于未定义的常量，假设你打算使用字符串代替常量，并且如果你尝试使用带有冒号的数组键，如那些 URL，它可能会导致致命的语法错误。

因此，要解决您的问题，您实际上只需要正确引用数组键，如下所示：

```
echo 'Hello Mr. '.$SAMLDATA['http://longurl/surname'][0]; 
```

请注意，唯一可以*不*引用字符串数组键的情况是在双引号字符串内插值时。例如：

```
$str = "This double-quoted string has an $array[key] value inside it"; 
```

对于像上面这样的简单数组值，您不需要在双引号字符串中引用键。

但是，在您的情况下，您可能需要使用`{}`语法来访问插值字符串中的这些 URL 键之一。使用时，`{}`您*需要*引用字符串数组键。一般来说，我总是建议使用`{}`数组和对象值的语法，因为它提高了可读性：

```
// When using {} enclosures, you do need to quote the key
$str = "This double-quoted string has an {$array['key']} value inside it"; 
```

[此处记录了](http://us2.php.net/manual/en/language.types.string.php#language.types.string.syntax.double)围绕上述双引号字符串中的示例的各种规则。

# jquery - 在元素单击时打开输入文件对话框，fireEvent Mootools 相当于 jQuery 触发器

> ID：13576291
> 
> 赞同：4
> 
> 时间：2012-11-27T01:57:45.330
> 
> 标签：jquery, mootools

试图隐藏输入文件，以便我可以为所有浏览器设置样式，并希望使用 js 来触发文件上传对话框

我的印象是`.fireEvent(eventType)`mootools 和`.trigger(eventType)`jQuery一样

jQuery：http: [//jsfiddle.net/KnqFj/1/](http://jsfiddle.net/KnqFj/1/)

```
$('#trig_file').click(function(){
    console.log('click');
    $('#file').trigger('click');
}); 
```

mootools：http: [//jsfiddle.net/X6mqR/7/](http://jsfiddle.net/X6mqR/7/)

```
$('trig_file').addEvent('click', function(){
    console.log('click');
    $('file').fireEvent('click');
});​​ 
```

但似乎不一样

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T02:22:52.810

仅供大家参考，这可用于根据您的喜好设置浏览按钮的样式。您可以完全隐藏输入文件并在任何元素上触发事件。

jQuery：http: [//jsfiddle.net/g9sry/3/](http://jsfiddle.net/g9sry/3/)

```
$('#trig_file').click(function(){
    console.log('click');
    $('#file').trigger('click');
});​ 
```

mootools：http: [//jsfiddle.net/X6mqR/17/](http://jsfiddle.net/X6mqR/17/)

```
$('trig_file').addEvent('click', function(){
    console.log('click');
    $('file').click();
});​ 
```

我在 FF IE7 和 Up Opera Safari Chrome 中进行了测试，但我们仍然没有发现为什么 fireEvent 与 jquery 中的触发器不同

# java - HttpGet 添加标头

> ID：13576294
> 
> 赞同：3
> 
> 时间：2012-11-27T01:57:52.913
> 
> 标签：java, http, http-headers, httpclient

我正在创建一个 httpClient，我想向我的 HttpGet 请求添加某些标头
我当前的代码产生以下请求。

GET /folder/index.html HTTP/1.0
主机：localhost:4444
连接：Keep-Alive
用户代理：Apache-HttpClient/4.2.1 (java 1.5)

我想要的是在该请求中添加另一个标头（If-Modified-Since）。
我该怎么做？
谢谢 ：）

```
public String httpGet(String s) {
    String url = s;
    StringBuilder body = new StringBuilder();
    httpclient = new DefaultHttpClient(); // create new httpClient
    HttpGet httpGet = new HttpGet(url); // create new httpGet object

    try {
        response = httpclient.execute(httpGet); // execute httpGet
        StatusLine statusLine = response.getStatusLine();
        int statusCode = statusLine.getStatusCode();
        if (statusCode == HttpStatus.SC_OK) {
            // System.out.println(statusLine);
            body.append(statusLine + "\n");
            HttpEntity e = response.getEntity();
            String entity = EntityUtils.toString(e);
            body.append(entity);
        } else {
            body.append(statusLine + "\n");
            // System.out.println(statusLine);
        }
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        httpGet.releaseConnection(); // stop connection
    }
    return body.toString(); // return the String
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T02:02:29.680

在 HttpGet 对象上使用 setHeader() 方法，如下所示。

```
httpGet.setHeader("If-Modified-Since","11/26/2012"); 
```

我使用这个[JavaDoc](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/index.html)作为参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-05T05:39:34.633

在 HttpGet 对象上使用 setHeader() 方法，如下所示作为第一个

```
httpGet.setHeader("If-Modified-Since","11/26/2012"); 
```

然后在 HttpGet 对象上使用 addHeader() 方法，如下所示用于第二个标头。

```
httpGet.addHeader("If-Expires-On","11/26/2014"); 
```

# c# - 是否可以阻止我的 Windows Phone 应用程序关闭？

> ID：13576299
> 
> 赞同：0
> 
> 时间：2012-11-27T01:58:19.780
> 
> 标签：c#, windows-phone-7

是否可以阻止我的 WP7 应用程序关闭？我知道如何覆盖后退按钮，但是否可以对开始和搜索按钮做同样的事情？我知道阻止它关闭会导致它无法通过认证，但这是一个不会提交给商店的个人应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T03:47:19.603

应用程序只能覆盖后退按钮。搜索和开始按钮均不适用于第三方应用程序。

# mysql - 如何提高 COUNT(DISTINCT field1)... GROUP BY field2 的性能？

> ID：13576304
> 
> 赞同：7
> 
> 时间：2012-11-27T01:59:02.053
> 
> 标签：mysql, query-optimization

我有以下查询

```
EXPLAIN SELECT COUNT(DISTINCT ip_address) as ip_address, exec_date
    FROM requests
    GROUP BY exec_date;

id  select_type table       type        possible_keys   key         key_len ref      rows   Extra
1   SIMPLE      requests    range       NULL            daily_ips   263     NULL    488213  Using index for group-by (scanning) 
```

具有覆盖指数`daily_ips`

```
Table       Non_unique  Key_name    Seq_in_index    Column_name Collation   Cardinality Sub_part    Packed  Null    Index_type  Comment Index_comment
requests    1           daily_ips   1               exec_date   A           16          NULL        NULL    YES BTREE       
requests    1           daily_ips   2               ip_address  A           483492      NULL        NULL    YES BTREE 
```

有什么办法可以进一步优化这个查询？

究竟是什么`Using index for group-by (scanning)`意思？这是否意味着整个`GROUP BY`子句完全由索引完成，而`COUNT(DISTINCT ip_address)`语句的一部分不是？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T18:29:55.297

根据您提供的数据，我看不出有任何方法可以进一步优化查询。

至于您的后续问题，MySQL 的手册页描述了[Using index for group-by 的](http://dev.mysql.com/doc/refman/5.5/en/explain-output.html)解释输出说：

> 与 Using index table access 方法类似， Using index for group-by 表示 MySQL 找到了一个索引，该索引可用于检索 GROUP BY 或 DISTINCT 查询的所有列，而无需对实际表进行任何额外的磁盘访问。此外，索引以最有效的方式使用，因此对于每个组，只读取几个索引条目。有关详细信息，请参阅[第 8.13.10 节，“GROUP BY 优化”</a>。](http://dev.mysql.com/doc/refman/5.5/en/group-by-optimization.html)
> 
> [](http://dev.mysql.com/doc/refman/5.5/en/group-by-optimization.html)

 [您的索引特别适合加快查询速度。因为只选择了索引字段（查询中的每一列也出现在索引中），MySQL 甚至可能根本不需要命中表，因为所有相关数据都出现在索引中。](http://dev.mysql.com/doc/refman/5.5/en/group-by-optimization.html) 

[如果执行查询就像在](http://dev.mysql.com/doc/refman/5.5/en/group-by-optimization.html)[google](http://www.google.com)上执行搜索一样，想象一下不必点击任何链接的网站，因为您直接在搜索结果中找到了您正在寻找的信息 - 这有点像不需要扫描表数据之类的。以下是有关[MySQL 如何使用索引](http://dev.mysql.com/doc/refman/5.5/en//mysql-indexes.html)的更多信息：

> 在某些情况下，可以优化查询以在不查阅数据行的情况下检索值。（为查询提供所有必要结果的索引称为[覆盖索引](http://dev.mysql.com/doc/refman/5.5/en//glossary.html#glos_covering_index)。）如果查询仅使用表中的数字列并且形成某个键的最左前缀，则可以从索引中检索所选值树以获得更快的速度：
> 
> ****从***tbl_name* **WHERE** *key_part1 中***选择***key_part3* ******1********

 ********* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T03:06:49.050

你可以 Objectify ：

Objectify ofy = ObjectifyService.begin(); Query query = ofy.query(这里是类名.class).filter("表中的列名"，要查询的值).list();

在此之前，您可能需要为 Objectify 添加 jar。********

# php - 在codeigniter的一行中输入多个值

> ID：13576305
> 
> 赞同：0
> 
> 时间：2012-11-27T01:59:02.530
> 
> 标签：php, mysql, codeigniter

我有 3 个列，我将在我的数据库的一个表中插入它们。每个表格的名称如下：

```
<h3><?= $title; ?></h3><?php echo form_open("admin/artikel/buat/");?>
<table width="95%">
    <tr>
        <td><b>Pilih Referensi Jurnal</b></td>
        <td>
            <input type="hidden" name="IDJurnal" id="IDJurnal" value="<?php echo $IDJurnal; ?>" />
            <input type="text" name="volume" id="volume" value="<?php echo $volume; ?>" readonly="readonly"  class="sedang" />
        <?php echo anchor_popup('admin/artikel/popup', 'Referensi Jurnal', array('class' => 'button')); ?>
    </td>
</tr>
<tr>
    <td><b>Kategori</b></td>
    <td>
        <?php
            echo form_dropdown('IDKategori', $kategori) . "";
        ?>
        </td>
    </tr>
    <tr>
        <td width="125"><strong>Judul</strong></td>
        <td><input type="text" name="judul" class="panjang"></td>
    </tr>
    <tr>
        <td width="125"><strong>Pengarang</strong></td>
        <td>
            <input type="text" name="pengarang" class="panjang">
            <input type="text" name="pengarang" class="panjang">
            <input type="text" name="pengarang" class="panjang">
        </td>
    </tr>
    <tr>
        <td><b>Abstract</b></td>
        <td>
        <?php
            $data = array('name' => 'abstract');
            echo $this->ckeditor->editor($data['name']);
        ?>
        </td>
    </tr>
    <tr>
        <td></td>
        <td>
            <input type="submit" class="button" value="Simpan">
            <input type="button" class="button" value="Batal" onClick="javascript: history.go(-1)" />
        </td>
    </tr>
<?php
            echo form_close();
?> 
```

我想将每个表单名称中的值插入到我的 sql 表中，如下所示：

```
CREATE TABLE `pengarang`(
`IDPengarang` INT(11)NOT NULL AUTO_INCREMENT,
`IDArtikel` INT(11)NOT NULL,
`nama_pengarang` VARCHAR(255)NOT NULL,
PRIMARY KEY(`IDPengarang`))ENGINE = INNODB DEFAULT CHARSET = utf8; 
```

在我的模型中是这样的：

```
function addArtikel() {
    $now = date("Y-m-d H:i:s");
    $data = array(
        'IDJurnal' => $this->input->post('IDJurnal'),
        'IDKategori' => $this->input->post('IDKategori'),
        'judul' => $this->input->post('judul'),
        'abstract' => $this->input->post('abstract'),
        'created_time' => $now,
        'created_by' => $_SESSION['username']
    );
    // $data1 = array(
        // 'IDJurnal' => $this->input->post('IDJurnal'),
        // 'IDKategori' => $this->input->post('IDKategori'),
        // 'judul' => $this->input->post('judul'),
        // 'abstract' => $this->input->post('abstract'),
        // 'created_time' => $now,
        // 'created_by' => $_SESSION['username']
    // );
    // $data2 = array(
        // 'IDArtikel' => $this->input->post('IDArtikel'),
        // 'nama_pengarang' => $this->input->post('pengarang')
    // );

    $this->db->insert('artikel', $data);
    // $this->db->insert_batch('artikel', $data1);
    // $this->db->insert_batch('pengarang', $data1);
} 
```

在我的控制器中

```
function buat() {
    if ($this->input->post('judul')) {
        $this->MArtikel->addArtikel();
        $this->session->set_flashdata('message', 'Artikel telah di buat !');
        redirect('admin/artikel/index', 'refresh');
    } else {
        // konfigurasi ckfinder dengan ckeditor
        $this->load->library('ckeditor');
        $this->load->library('ckfinder');
        $this->ckeditor->basePath = base_url() . 'asset/ckeditor/';
        $this->ckeditor->config['toolbar'] = 'Full';
        $this->ckeditor->config['language'] = 'en';
        $this->ckfinder->SetupCKEditor($this->ckeditor, '../../../asset/ckfinder/');

        $data['title'] = "Tambah Artikel";
        $data['main'] = 'admin/artikel/artikel_buat';
        $data['jurnal'] = $this->MJurnal->getJurnalDropDown();
        $data['kategori'] = $this->MKategori->getKategoriDropDown();
        $this->load->vars($data);
        $this->load->view('dashboard/template');
    }
} 
```

我应该在我的控制器和模型中添加什么，这将使我的表中的结果看起来像这样

```
IDPengarang     IDArtikel       nama_pengarang
1               1               testing 1
2               1               testing 2
3               1               testing 3 
```

谢谢之前

# c++ - C++ 中的谓词是什么？

> ID：13576313
> 
> 赞同：2
> 
> 时间：2012-11-27T01:59:12.527
> 
> 标签：c++

> **可能重复：**
> [C++ 中的谓词是什么？](https://stackoverflow.com/questions/5921609/what-is-predicate-in-c)

当我阅读 C++ 入门时，有一个定义的术语是**predicate**。

定义是这样的：

**返回可转换为 bool 的类型的函数。通常由通用算法用来测试元素。库使用的谓词要么是一元的（采用一个参数），要么是二元的（采用两个）。**

任何返回可以转换为 bool 的类型的人都可以是谓词！对？或者还有其他一些限制条件。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T02:05:35.783

在 C++ 的上下文中没有正式的谓词定义（无论如何我都知道），但它通常意味着可以在真/假上下文中使用的函数。

[这是 cppreference 中count_if](http://en.cppreference.com/w/cpp/algorithm/count)的一个可能实现，它说明了它在说什么：

```
template<class InputIt, class UnaryPredicate>
typename iterator_traits<InputIt>::difference_type
    count_if(InputIt first, InputIt last, UnaryPredicate p)
{
    typename iterator_traits<InputIt>::difference_type ret = 0;
    for (; first != last; ++first) {
        if (p(*first)) {
            ret++;
        }
    }
    return ret;
} 
```

`p`必须返回可以在`if`语句中使用的东西，这基本上可以归结为。

例如：

```
class T {};

T f(int x)
{
    return T();
} 
```

这不是 count_if 的有效谓词，因为 T 不能隐式转换为布尔值。

换句话说：

```
if (f(4)) { } 
```

是不可编译的代码。

但是，如果 T 可以隐式转换为布尔值，`f`则将是一个可接受的谓词（尽管很奇怪）。

# c - 不使用 string.h 逐字打印 C 中的句子

> ID：13576314
> 
> 赞同：3
> 
> 时间：2012-11-27T01:59:24.943
> 
> 标签：c, arrays, function, pointers

我目前正在学习如何用 C 编程。作为额外的练习，我的老师给了我一些问题。这是我的问题，我必须在我的程序中使用它：

```
 void strSplitTokens (char *s1, char s2[][], int *numWords);
```

这是问题的其余部分：*对 strSplitTokens 的调用将字符串 s1 分解为单词，然后将每个单词保存在不同的 char 数组中，所有字符串都保存在单个字符数组中。此外，它使用 numWords 中的指针保存字数。使用以下内容在 main 中打印字符串：*

```
For(i=0;i<numWords;i++) printf("%s\n",s2[i]); 
```

如果我运行它并给它一个*我喜欢编程*的句子，我需要它输出：

一世

像

编程

我的主要问题是我被告知不要使用 string.h，我有点迷失在没有它的情况下如何做到这一点。任何建议和指导将不胜感激。

到目前为止，我所拥有的主要是没有意义的模拟代码：

```
#include <stdio.h>
void strSplitTokens (char *s1, char s2[][], int *numWords);
int main()
{
    printf("Enter a sentence: ");
    strSplitTokens();

 For(i=0;i<numWords;i++) 
{
        printf("%s\n",s2[i]);
}
    return 0;
}
void strSplitTokens (char *s1, char s2[][], int *numWords);
{
    char s1;
    scanf("%s",&s1);
    if( s1 != '\n')
    {
        strSplitTokens();

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T04:51:54.523

逐个字符检查。将每个字符放入二维数组中，直到出现空间。

```
i=0;j=0;k=0;  
while(s[k]!='\n') {
    if(s[k]!=' ')
    {
        s1[i][j]=s[k];
        k++; 
        j++;
    }
    else{
        j=0;i++;
    }

} 
```

# iphone - 循环多个方法

> ID：13576318
> 
> 赞同：1
> 
> 时间：2012-11-27T01:59:55.070
> 
> 标签：iphone, ios

我制作了一个程序，可以在屏幕顶部的随机 x 坐标处生成图像。然后图像下降到底部。但是，我想每隔几秒钟就不断地生成新的图像（同一图像的），这样就好像同一图像的这些副本不断地从顶部“下雨”。

我怎样才能让所有这些代码每 0.5 秒重复一次？

```
@implementation ViewController {

    UIImageView *_myImage;

}

- (void)viewDidLoad
{
    srand(time(NULL));e
    int random_x_coordinate = rand() % 286;
    CGRect myImageRect = CGRectMake(random_x_coordinate, 0.0f, 40.0f, 40.0f);
    UIImageView *myImage = [[UIImageView alloc] initWithFrame:myImageRect];
    [myImage setImage:[UIImage imageNamed:@"flake.png"]];
    myImage.opaque = YES;
    [self.view addSubview:myImage];
    _myImage = myImage;

    //FALLING BIRDS TIMER
    moveObjectTimer = [NSTimer scheduledTimerWithTimeInterval:0.001 target:self selector:@selector(moveObject) userInfo:nil repeats:YES];

}
    //FALLING BIRDS MOVER
-(void) moveObject {        // + means down and the number next to it is how many pixels y moves down per each tick of the TIMER above
        _myImage.center = CGPointMake(_myImage.center.x, _myImage.center.y +1);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T02:24:13.247

只需将动画循环放在您在计时器上调用的方法中，例如

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:0.5
                                                      target:self
                                                    selector:@selector(animate)
                                                    userInfo:nil repeats:YES];
    [timer fire];
}

- (void)animate
{
    CGFloat hue = ( arc4random() % 256 / 256.0 );  //  0.0 to 1.0
    CGFloat saturation = ( arc4random() % 128 / 256.0 ) + 0.5;  //  0.5 to 1.0, away from white
    CGFloat brightness = ( arc4random() % 128 / 256.0 ) + 0.5;  //  0.5 to 1.0, away from black
    UIColor *color = [UIColor colorWithHue:hue saturation:saturation brightness:brightness alpha:1];

    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
    view.backgroundColor = color;
    [self.view addSubview:view];

    [UIView animateWithDuration:1.0 animations:^{
        view.frame = CGRectMake(0, 200, 50, 50);
    }];
} 
```

会给你从顶部连续下降的方块。请记住定期清理未使用的视图以避免内存问题。

# ssl - SSL 上的 Nginx (443)

> ID：13576319
> 
> 赞同：1
> 
> 时间：2012-11-27T02:00:15.633
> 
> 标签：ssl, https, nginx

我的目标是从端口 80 重定向到 443（强制 https），但无法首先获得有效的 https 配置。我收到 503 服务器错误，日志中没有任何内容。我查看了 SO 和 SF 上的所有帖子，但没有一个有效（X_FORWARDED_PROTO、X-Forwarded-For 标头没有区别。）。我在负载均衡器后面的 EC2 上，因此我不需要使用与 SSL 相关的指令，因为我已经在 ELB 上配置了我的证书。我正在使用 Tornado 作为 Web 服务器。

这是配置，如果有人有想法，谢谢！

```
http {
    # Tornado server
    upstream frontends {
        server 127.0.0.1:8002;
    }

server {
    listen 443;

    client_max_body_size 50M;

    root <redacted>/static;

    location ^~/static/ {
        root <redacted>/current;
        if ($query_string) {
            expires max;
        }
    }

    location / {
        proxy_pass_header Server;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Scheme $scheme;
        proxy_pass http://frontends;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T10:07:30.217

好吧，有两个不同的任务：

如果您需要将所有 http 流量重定向到 https，则需要在 nginx 中创建 http 服务器：

```
 server {
      listen 80; 
      server_name example.com;
      return       301 https://example.com$request_uri;
    } 
```

第二点，如果您的 SSL 在 ELB 终止，那么您根本不需要启用 ssl 的 nginx 服务器。只需将流量从 ELB 传递到您的服务器 80 端口。

# visual-c++ - 无法使用 Visual Studio 2012 使用类向导实现“oninitdialog”

> ID：13576324
> 
> 赞同：1
> 
> 时间：2012-11-27T02:00:57.097
> 
> 标签：visual-c++, visual-studio-2012, wizard

无法在我的 c++ 项目中使用类向导实现“oninitdialog”。在运行 Windows 7 的相当新（3 个月旧）计算机上使用 vs2012（刚刚安装）。向导在我的 .cpp 文件中生成以下内容：

```
BOOL cdlg1::OnInitDialog()
{
    CDialogEx::OnInitDialog();

#5312

    return TRUE;  // return TRUE unless you set the focus to a control
#5313

#5312

    return TRUE;  // return TRUE unless you set the focus to a control
#5313
    // TODO:  Add extra initialization here

    return TRUE;  // return TRUE unless you set the focus to a control
#5313
    return TRUE;  // return TRUE unless you set the focus to a control
#5313
    // EXCEPTION: OCX Property Pages should return FALSE
} 
```

看起来我可能没有访问某种源库。我可能会尝试重新安装该软件，但还有其他建议吗？

# objective-c - iOS接受用户输入并将其存储为全局变量

> ID：13576326
> 
> 赞同：0
> 
> 时间：2012-11-27T02:01:08.100
> 
> 标签：objective-c, ios, xcode

我正在尝试制作一个测试应用程序，当用户单击一个按钮时，文本会切换到其他内容，如果再次单击它，它会返回，但我也希望能够添加一个用户输入他/她的名字是这样说的，隐藏的信息是：或者其他什么......

我的代码是：

```
- (void)viewDidLoad
{
[super viewDidLoad];
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
//button.backgroundColor = [UIColor redColor];
button.titleLabel.textColor=[UIColor blackColor];
button.frame = CGRectMake(25, 100, 275, 60);
[button setTitle:@"Press this button to reveal the text!" forState:UIControlStateNormal];
[button addTarget:self action:@selector(button_method:) forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:button];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)button_method:(UIButton *)button {
NSString *test = @"I am learning Objective-C for the very first time! Also, this is my first ever variable!";
// handle button press
UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(25, 25, 275, 60)];
label.text = test;
label.numberOfLines = 0;
label.lineBreakMode = UILineBreakModeWordWrap;
//label.lineBreakMode = NSLineBreakByWordWrapping; //iOS 6 only
[self.view addSubview:label];
[button setTitle:@"You have pressed the button!" forState:UIControlStateNormal];
[button addTarget:self action:@selector(change_again:) forControlEvents:UIControlEventTouchUpInside];
}

- (void)change_again:(UIButton *)button {
UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(25, 25, 275, 60)];
label.text = @"You have found the next piece of text!";
label.numberOfLines = 0;
label.lineBreakMode = UILineBreakModeWordWrap;
//label.lineBreakMode = NSLineBreakByWordWrapping; //iOS 6 only
[self.view addSubview:label];
[button setTitle:@"Keep pressing!" forState:UIControlStateNormal];
[button addTarget:self action:@selector(button_method:) forControlEvents:UIControlEventTouchUpInside];

}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
} 
```

我希望这不会被认为过于本地化！

穆克曼

PS：一个附带问题，我将如何创建一个字符串，例如`NSString *var4 = var.var2.var3;`

什么是加入字符？在 JavaScript 中是`+`在 PHP 中`.`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T03:41:59.670

您可能想使用 @property 来存储文本输入。属性类似于实例变量，但它们通过添加在检索 (get) 或分配 (set) ivars 时检索的 getter 和 setter 来引入另一层抽象。目前，您的所有变量仅存在于您的方法中。属性将允许从不同的方法访问这些变量。这是一个速成课程：

在该部分中声明了一个属性`@interface`（对可从其他类访问的属性使用头文件，对只能从您的类访问的属性使用主文件）。

```
 @property (strong, nonatomic) NSString *userInput; 
```

在`@implementation`必须编写自己的 getter 和 setter 部分中，或者您可以使用 synthesize 自动创建您的 getter 和 setter：

```
 @synthesize userInput = _userInput; 
```

从这里您可以使用该物业。

```
 //Assigning the property
    self.userInput = @"Some text";

    //Retrieving the property
    label.text = self.userInput; 
```

我想了解有关属性的所有信息，这是 Apple 的[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)。

关于属性的最后一件事：由于它们是实例变量，它们与类的实例相关联，因此它们不会在程序启动之间持续存在。

对于文本输入，请尝试使用 UITextField。

如果您刚开始编写 iOS 程序，我建议[您在 iTunes U 上使用斯坦福的 CS193p](https://itunes.apple.com/au/course/ipad-iphone-app-development/id495052415)。我很确定他使用了一个自定义 getter，并且在他在第 2 课中编写计算器应用程序时，他解释了您想要编写一个 getter 的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T02:27:48.727

有两种使用全局变量的方法。首先，您可以在标头或实现方法的接口部分设置一个全局变量（仅在该类中和当前会话期间可用）。这是一个例子：

```
//  ViewController.m
#import "ViewController.h"
@interface ViewController ()
{
    NSString *nameOfGlobalVariable;
}
@end 
```

或者，在 iOS 中，您可以使用名为[NSUserDefaults的存储系统存储](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)*默认值*。NSUserDefaults 允许您在任何时间、任何课程以及任何应用会话期间设置和访问默认值。*默认值*存储在应用程序包内的 PLIST 文件中。以下是设置默认值的方法：

 *```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:@"YourText" forKey:@"NameOfDefault"];
[defaults synchronize]; 
```

您还可以探索 NSUserDefaults 方法并尝试更改`setObject`为`setBool`. 检索默认值非常相似——只需定义 NSUserDefaults，并使用该`[objectForKey]`方法检索它。我会让你弄清楚那部分，因为当你只是复制和粘贴时编程并不有趣；）

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T04:46:35.457

```
Just try something like that:-

// In .h file, define your enum...
enum
{
MDefaultButtonText = 1,
MToggleButtonText
};

// In .m file, define your string if the text not changed...
#ifndef MDefaultButtonTextString
#define MDefaultButtonTextString "This is default string"
#endif

#ifndef MToggleButtonTextString
#define MToggleButtonTextString "This is toggled string"
#endif

/*
Please note, you can also used:-
const NSString *testStr = @"your required string";
// Feel free if you think to know more...
*/

Now, in viewDidLoad:-
[yourButton setTag:1];
[yourButton addTarget:self action:@selector(someProcedure:) forControlEvents:UIControlEventTouchUpInside];

Now, you do need of implementing your click event...
-(void)someProcedure:(id)sender
{
// Do your stuff here...

switch([sender tag])
{
case MDefaultButtonText://sender.tag = 1
     [sender setTag:2];
     [sender setTitle:MToggleButtonTextString forState:UIControlStateNormal];
     // In alert set Message to = MDefaultButtonTextString
     break;
case MToggleButtonText:////sender.tag = 2
     [sender setTag:1];
     [sender setTitle:MDefaultButtonTextString forState:UIControlStateNormal];
     // In alert set Message to = MToggleButtonTextString
     break;
default:
     //if you required...
     break;
}
}

Please cross check the required message accordingly to your requirement.Hope, it'll sort your issue.

Any concern, just get back to me. :) 
```*

# javascript - 计算太阳的赤经和赤纬

> ID：13576330
> 
> 赞同：3
> 
> 时间：2012-11-27T02:02:23.993
> 
> 标签：javascript, math, astronomy

我一直在关注本指南，将其移植到 javascript： http: [//www.saao.ac.za/public-info/sun-moon-stars/sun-index/how-to-calculate-altaz/](http://www.saao.ac.za/public-info/sun-moon-stars/sun-index/how-to-calculate-altaz/)

直到 9 点（赤经）和 10 点（赤纬），一切都顺利进行。我无法重新创建他们为这些给出的答案。

(9) 寻找太阳赤经的阿尔法： (a) 开普敦：

```
lambda = 326.186
epsilon = 23.4396
alpha = arctan (tan(lambda) x cos(epsilon)) // in same quadrant as lambda

// THEIR RESULT
alpha = 328.428

// MY RESULT
var DEGREES = function (val) {
    return val / (Math.PI / 180);
};
var alpha = Math.atan(Math.tan(lambda) * Math.sin(epsilon));
alpha = 0.495;
alpha = DEGREES(0.495) = 28.39; 
```

我也试过：

```
var alpha = Math.atan2(Math.tan(lambda) * Math.sin(epsilon), lambda);
alpha = DEGREES(result) = 1.321; 
```

差远了！

和 10(a)，偏角

```
delta = arcsin (sin(lambda) x sin(epsilon))

// THEIR RESULT
(a) delta = -12.789

// MY RESULT
var result =  Math.asin(Math.sin(eclipticLong) * Math.sin(obliq));
result =  DEGREES(result);
result = -10.966; 
```

正如你所看到的，我正抓着稻草，因为我对此一无所知。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T02:59:41.273

好吧，我看到的最大问题在这里：

```
alpha = arctan (tan(lambda) x cos(epsilon)) // in same quadrant as lambda
...
var alpha = Math.atan(Math.tan(lambda) * Math.sin(epsilon)); 
```

在第二个表达式中，您从使用余弦变为正弦。

现在，从表面上看，这并不会导致相同的结果，所以让我们深入挖掘一下。为清楚起见，我将使用这些函数和常量：

```
var lambda = 326.186;
var epsilon = 23.4396;
function rad (v) { return v * Math.PI / 180 }
function deg (v) { return v * 180 / Math.PI } 
```

Javascript 数学函数采用径向坐标，所以让我们试一试：

```
var result = deg(Math.atan(Math.tan(rad(lambda)) * Math.cos(rad(epsilon)))); 
console.log(result); // -.31.5717 
```

由于度数的工作原理，这与 360 + -31.5717 = 328.428 的答案相同。

# php - 使用 FPDF 填充 PDF 表单，然后使用 PDFTK 展平显示未填充的 PDF

> ID：13576331
> 
> 赞同：15
> 
> 时间：2012-11-27T02:02:24.320
> 
> 标签：php, pdf, fpdf, pdftk, pdf-form

我正在使用来自 fpdf.org 的“表单填写”脚本来填写我创建的 PDF 表单上的一些字段。这似乎工作正常。

我希望将生成的 PDF 表单展平，以便用户无法编辑表单字段。我为此使用[PDFTK](http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/)。但是，当我尝试拼合 PDF 时，我得到一个表单字段为空的 PDF。

任何有关如何将 PDF 展平（使用 PHP）的建议将不胜感激。谢谢！

这是我的代码：

```
<?php
require('fpdm.php');
$fields = array("Name" => "John Doe", 
                "Address" => "123 White Lane", 
                "Age" => "30", 
                "Phone" => "123-1234");
$pdf = new FPDM("templates/Test.pdf");
$pdf->Load($fields, true);
$pdf->Merge();
$pdf->Output("cache/Filled1.pdf","F");

exec("pdftk cache/Filled1.pdf output cache/Filled1Flat.pdf flatten");
?> 
```

下载原Test.pdf文件：[Test.pdf](http://www.geo3o.com/KeyTech/pdf2/templates/Test.pdf)

下载 Filled1.pdf 文件（正确显示 pdf 表格，数据可见）：[Filled1.pdf](http://www.geo3o.com/KeyTech/pdf2/cache/Filled1.pdf)

下载 Filled1Flat.pdf 文件（显示扁平化的 pdf 表单，没有可见的表单数据）：[Filled1Flat.pdf](http://www.geo3o.com/KeyTech/pdf2/cache/Filled1Flat.pdf)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-07-11T21:27:24.260

公然自我推销：试试我的[php-pdftk](https://github.com/mikehaertl/php-pdftk)包。如果您已经`pdftk`安装，它非常易于使用。

```
composer require mikehaertl/php-pdftk

<?php
use mikehaertl/pdftk/Pdf;

$pdf = new Pdf('form.pdf');
// Fill in UTF-8 compliant form data!
$pdf->fillForm(array('name' => 'Any char: ÄÖÜ'))
    ->saveAs('filled.pdf');

// Alternatively: Send to browser for download...
$pdf->send('filled.pdf');

// ... or inline display
$pdf->send(); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-27T19:37:59.570

我能够找到另一个流程来填写 PDF 表单，然后将其展平。我仍然不知道为什么使用 fpdf.org 的“表单填写”脚本不起作用。

我按照[此处](http://www.myown1.com/linux/pdf_formfill.shtml)概述的步骤操作：

1) 如果字段名称未知，则获取字段名称

```
exec("pdftk templates/Test.pdf dump_data_fields >cache/testfields.txt"); 
```

2) 使用字段名称和字段值创建一个 FDF 文件并将其保存为 Test.fdf

```
%FDF-1.2
1 0 obj<</FDF<< /Fields[
<</T(Name)/V(John Doe)>>
<</T(Address)/V(123 White Lane)>>
<</T(Age)/V(30)>>
<</T(Phone)/V(123-1234)>>
] >> >>
endobj
trailer
<</Root 1 0 R>>
%%EOF 
```

3）然后填写表格并将其展平

```
exec("pdftk templates/Test.pdf fill_form templates/Test.fdf output cache/FilledFDF.pdf flatten"); 
```

下载生成的 PDF（填充和展平）：[FilledPDF.pdf](http://geo3o.com/KeyTech/pdf2/cache/FilledFDF.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-20T16:34:22.903

使用 Dhek PDF 模板编辑器，有一个 PHP 片段可以根据 JSON 映射（知道将文本/复选框放在哪里）使用 FPDF/FPDI 将数据填充到现有 PDF 中。[https://github.com/applicius/dhek](https://github.com/applicius/dhek)

# exception - Unity 中使用 ZXing.NET 的 QR 解码异常

> ID：13576333
> 
> 赞同：3
> 
> 时间：2012-11-27T02:02:33.340
> 
> 标签：exception, unity3d, qr-code, zxing

我目前正在尝试在 Unity（适用于 iOS）中创建一个允许用户扫描 QR 码的应用程序。我正在使用针对 Unity 进行了优化的 ZXing.NET 库。

这是我正在使用的当前解码线程

```
 void DecodeQR()
   {  
    // create a reader with a custom luminance source

      var barcodeReader = new BarcodeReader {AutoRotate=false, TryHarder=false};

      while (true)

      {
         if (isQuit)

            break;

         try

         {
            string result = "Cry if you see this."; 

            // decode the current frame

            if (c != null){

                print ("Start Decode!");
                result = barcodeReader.Decode(c, W, H).Text; //This line of code is generating unknown exceptions for some arcane reason
                print ("Got past decode!");
            }       
            if (result != null)
            {           
               LastResult = result;        
               print(result);
            }
            // Sleep a little bit and set the signal to get the next frame
        c = null;
            Thread.Sleep(200); 
         }
            catch 
            {   
                continue;
            }

      }
    } 
```

执行到达“开始解码！” 打印语句，但未能达到“已通过解码！” 陈述。

这是因为 Decode() 方法每次都会产生一个未知的异常，即使相机正在查看一个非常清晰的 QR 码。

供参考： c 是 Color32[] 类型，使用 WebCamTexture.GetPixels32() 生成 W、H 是表示相机纹理宽度和高度的整数。

由于某种原因，我无法在 catch 子句中捕获通用异常，这意味着我无法确定 Decode() 方法正在生成哪种异常。

编辑：我使用的代码改编自 ZXing.NET 项目提供的 Unity 演示。我正在使用当前版本的 ZXing.NET。我还应该提到，我目前正在 iMac 上进行测试，而不是在 iOS 设备或模拟器上进行测试。我尝试从头开始运行 Unity 演示，并获得了相同的结果。

这就是 c 变量 (Color32[]) 的更新方式：

```
void Update()
   {
      if (c == null)
      {
            c = camTexture.GetPixels32();
            H = camTexture.height;
            W = camTexture.width;
      }

   } 
```

编辑 2：我将解码阶段分为两个位，首先生成结果对象，然后检索结果的文本属性，如下所示：

```
if (c != null){
                print ("Start Decode!");
                var initResult = barcodeReader.Decode(c, W, H); 
                print ("Got past decode!");
                result = initResult.Text; //This line of code is generating unknown exceptions for some arcane reason
                print ("Got past text conversion!");
            } 
```

正是在检索结果的文本值时才导致错误。我仍然不知道如何解决它。

有人可以给我建议吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T06:52:49.420

代码看起来像来自 ZXing.Net 项目的统一演示。我使用当前版本 0.10.0.0 再次尝试了演示。它对我来说就像一个魅力。但我只能在 Windows 上统一测试它。我没有机会在 iOS 上尝试它。

你试过最新版的ZXing.Net吗？你使用什么版本的统一？变量 c 是否在 Update 方法中正确设置？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T01:26:57.900

我已经解决了这个问题。问题是从相机获得的纹理没有正确的纵横比并且被“压扁”。结果，ZXing 库无法正确识别代码。

纠正此问题后，识别工作完美无缺。

# jquery - 根据下拉列表的变化显示文本框中的值

> ID：13576334
> 
> 赞同：2
> 
> 时间：2012-11-27T02:02:40.743
> 
> 标签：jquery, asp.net-mvc

我有一个包含下拉列表的部分视图，并且在更改下拉列表时，我需要更新相应文本框中的值，但即使值存在，也不会显示该值。请帮忙

我的代码如下所示

```
@Html.DropDownListFor(model => model.ReportingAgencies, new SelectList(Model.ReportingAgencies, "SelectedAgency.AgencyGuid", "SelectedAgency.Name"), "--Select An Agency--", new { id = "dropDownReportAgencies" })
                </td>                 
            </tr>
            <tr class="seperator"></tr>
            <tr class="seperator"></tr>

            <tr>
                <td style="width: 100px;">@Html.LabelFor(model => model.W2StateLocal.Wages)</td> 
                <td> @Html.EditorFor(model => model.W2StateLocal.Wages)</td> 
            </tr>
            <tr>
                <td style="width: 100px;">@Html.LabelFor(model => model.W2StateLocal.Tax)</td> 
                <td>@Html.EditorFor(model => model.W2StateLocal.Tax)</td> 
            </tr>
        </table>
        <div id="rightButtonControls">        
            @if (Model.IsEditable)
            {
                <button id="btnSave" value="save">Save</button>                
            }
        </div>    
    </fieldset>
}

        @Html.HiddenFor(model => model.CompanyId, new { id = "CompanyId" })
        @Html.HiddenFor(model => model.EmployeeId, new { id = "EmployeeId" })
        @Html.HiddenFor(model => model.FilingYear, new { id = "FilingYear" })

<script type="text/javascript">
    $(document).ready(function () {
        $("#divLoader").css('display', 'none');
        $('#dropDownReportAgencies').change(function () {
            var selectedAgency = $('#dropDownReportAgencies option:selected').val();
            alert(selectedAgency);
            var CompanyId = $('#CompanyId').val();
            var EmployeeId = $('#EmployeeId').val();
            var FilingYear = $('#FilingYear').val();
            var url = '@Url.Action("W2State", "W2Generation")';
            $.get(url, { agencyId: selectedAgency, companyId: CompanyId, employeeId: EmployeeId, filingYear: FilingYear },
                function (data) {
                }                
                );
        });
    }); 
```

但是这些值没有显示在文本字段中。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T21:24:09.537

我不得不返回 html(data) 而不是返回 function(data)

# jquery - 连接许多具有相同事件名称但不同命名空间的事件

> ID：13576335
> 
> 赞同：1
> 
> 时间：2012-11-27T02:02:45.167
> 
> 标签：jquery

假设我有以下人为的代码：

```
function runTriggers() {
    $(document).trigger('mytrigger.ns1');
    $(document).trigger('mytrigger.ns2');
    $(document).trigger('mytrigger.ns3');
    ...
} 
```

如何连接一个事件处理程序来简单地监听，`mytrigger`而不必担心提及将来可能出现的每一种类型的命名空间触发器？

我[试过了](http://jsfiddle.net/edelman/C5VTv/)

```
$(document).on('mytrigger', doSomething); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T02:37:19.433

根据[命名空间事件的文档](http://docs.jquery.com/Namespaced_Events)：

```
$('.class').bind('click.namespace', function(){}); 
$('.class').trigger('click.namespace'); // Will trigger
$('.class').trigger('click');           // Will trigger
$('.class').trigger('click.other');     // Won't trigger 
```

所以你设计的代码肯定是行不通的，但你可以按如下方式反转逻辑：

```
$(document).on('mytrigger.ns1', doSomething1);
$(document).on('mytrigger.ns2', doSomething2);
$(document).on('mytrigger.ns3', doSomething3); 
```

然后：

```
function runTriggers() {
    $(document).trigger('mytrigger'); // will trigger all three `doSomething` handlers.
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T02:41:30.057

这是一种解决方法，可让您靠近。首先，向字符串原型添加一个方法：

```
String.prototype.namespaces = function () {
    var eventName = this + ".";
    var args = Array.prototype.slice.call(arguments);
    return eventName + args.join(" " + eventName);
} 
```

然后，您可以使用以下`.namespaces(namespace1, namespace2...)`表示法为同一事件绑定到多个命名空间：

```
$(function () {

   $("#mydiv").on("someevent".namespaces("a","b"), function() {
       alert("hello"); 
    });

   $("#mydiv").trigger("someevent.a");
   $("#mydiv").trigger("someevent.b");     
}); 
```

这是一个[jsfiddle](http://jsfiddle.net/XuTrJ/1/)。

# php - 我如何使用 PDO 结果？

> ID：13576336
> 
> 赞同：0
> 
> 时间：2012-11-27T02:02:46.257
> 
> 标签：php, pdo

大家好，我正在尝试为我的网站做一个登录方法，但我遇到了一个小问题。我从 PDO 连接获取数据，但每次我检查密码时它都会返回 false。我的变量错了吗？这是我的 sql 查询

```
$this->result = $this->sql->prepare('SELECT username,password FROM User WHERE username=:username AND password=:password');
$this->result->bindParam(':username',   $username,  PDO::PARAM_STR); 
$this->result->bindParam(':password',   $password,  PDO::PARAM_STR); 
$this->result->execute(); 
```

这是我的 if 语句：

```
$this->result=$this->result->fetch(PDO::FETCH_OBJ);
if (($password == $this->result->password) && ($username == $this->result->username)){ 
```

我没有收到错误，它总是返回错误。我还没有加密密码所以不是这个问题。我认为 $this->result->password 是问题所在。谁能纠正我？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T02:57:39.693

您也可以使用它：

```
$username=$_GET['username'];$password = $_GET['password'];/*of $_POST, depending of which you used*/
$this->result = $this->sql->prepare('SELECT username,password FROM User WHERE username='$username' AND password='$password'); 
```

$this->result->execute();

然后`fetchAll`像这样使用：

```
$this->results = $this->result->fetchAll(PDO::FETCH_ASSOC);
if($this->results['username']==$this->username && $this->results['password']==$this->password){/*u had beed loged in*/} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T02:47:10.367

你的逻辑应该有效。很可能，SQL 没有返回任何内容。尝试打印出获取的结果。

```
$this->result=$this->result->fetch(PDO::FETCH_OBJ);
print_r($this->result); 
```

此外，如果您在 SQL 查询中检查用户名和密码，则不必在 if 语句中再次检查。使用您正在使用的 SQL 语句，您应该能够检查它是否返回一行来验证用户。

```
$numrows = $this->result->rowCount();
if ($numrows == 1) {
  // User is valid
}
else {
  // User is not valid
} 
```

# ruby-on-rails-3 - 不支持“application/octet-stream”的 HTTP“Content-Type”。媒体资源加载失败

> ID：13576339
> 
> 赞同：1
> 
> 时间：2012-11-27T02:03:28.097
> 
> 标签：ruby-on-rails-3, content-type, wav

我试图在我的应用程序中插入音频标签

```
<audio id="beep-notify" src="beep.wav"></audio> 
```

我将在 javascript 中播放此音频文件

```
function play_audio(){
  var audio = getElementById('beep-notify');
  if(audio){
    audio.play();
  }
} 
```

它在 chrome 上很好用，但在 Firefox 上不行。当我试图查看控制台时。有一个错误说：

```
HTTP "Content-Type" of "application/octet-stream" is not supported. Load of media resource failed. 
```

这就是我的“config/initializers/mime_types.rb”的样子：

```
# Be sure to restart your server when you modify this file.

# Add new mime types for use in respond_to blocks:
# Mime::Type.register "text/richtext", :rtf
# Mime::Type.register_alias "text/html", :iphone
Mime::Type.register "audio/x-wav", :wav 
```

但是没有运气，它仍然无法在 Firefox 中运行。

如果有人可以带领我走向正确的方向，那就太好了。我一直在谷歌上搜索有关此问题的所有内容，但无济于事。

TIA

埃拉尔夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:00:09.153

我将`.wav`文件转换为`.ogg`并将`audio`标签更改为

```
<audio id="beep-notify" src="beep.wav"></audio> 
```

我也将我的`mime_types.rb`文件更改为

```
# Be sure to restart your server when you modify this file.

# Add new mime types for use in respond_to blocks:
# Mime::Type.register "text/richtext", :rtf
# Mime::Type.register_alias "text/html", :iphone
Mime::Type.register "application/ogg", :ogg 
```

这解决了问题。它现在正在火狐上工作。但是 Safari 仍然无法正常工作，因为它们的浏览器不支持 html5`audio`元素。

希望这可以帮助某人。

埃拉尔夫

# c++ - C++ MySql 连接器/MDd 源代码构建

> ID：13576341
> 
> 赞同：-1
> 
> 时间：2012-11-27T02:03:48.033
> 
> 标签：c++, mysql, cmake

我需要一个使用多线程调试 DLL (/MDd) 的 mysqlcppconn.dll 版本。这是因为我下载的默认版本导致 getInt() 返回错误数据。

我一直在努力使用 CMake，终于让它生成了一个项目。这是使用带有“源代码”和“构建二进制文件的位置”的 GUI 作为

```
C:/mysql-connector-c++-1.1.1/mysql-connector-c++-1.1.1/cppconn
C:/mysql-connector-c++-1.1.1/mysql-connector-c++-1.1.1/project 
```

我不断收到“未知命令”错误，所以我不得不添加这些错误。

```
INCLUDE(CheckIncludeFiles) 
INCLUDE(CheckTypeSize) 
INCLUDE(CheckFunctionExists) 
```

不幸的是，该项目完全没有源代码！有三个项目

```
ALL_BUILD
INSTALL
ZERO_CHECK 
```

我正在运行 Server 2008 和 VS 2010。

帮助！在踢腿比赛中，我感觉自己是一个单腿男人！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T16:35:05.840

是编码问题，而不是 DLL 问题。谢谢

# forms - 引导图标文本暗淡

> ID：13576343
> 
> 赞同：0
> 
> 时间：2012-11-27T02:04:07.293
> 
> 标签：forms, html, twitter-bootstrap

所以我连续三个引导按钮，都在一个表单内：

1.  提交`<button type="submit" class="btn btn-primary">`表单的

2.  `<a class="btn btn-inverse"><i class="icon-edit icon-white"></i> Edit</a>`旁边的一个按钮。

3.  `<a class="btn btn-success"><i class="icon-plus icon-white"></i> New</a>`旁边的一个按钮。

出于某种原因，“编辑”文本是灰色的，而其他两个按钮的文本是白色的——知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:46:02.993

您可以按照@Marronsuisse 评论中的建议查看，也可以使用

```
<a class="btn btn-inverse" style="color:#FFF">
<i class="icon-edit icon-white"></i> Edit</a> 
```

另外，请原谅，但由于它的黑色背景，它在你的眼睛里可能看起来是灰色的......你可以用这个来验证

```
<a class="btn btn-inverse" style="font-weight:bolder">
<i class="icon-edit icon-white"></i> Edit</a> 
```

# iphone - IB中添加的UILabels和其他元素在运行应用程序时放错了位置

> ID：13576345
> 
> 赞同：0
> 
> 时间：2012-11-27T02:04:12.320
> 
> 标签：iphone, objective-c, xcode

我将 InfoViewController 的视图加载为`MainViewController`像这样的子视图（在 .h 中声明）：

```
- (void)viewDidLoad
{
[super viewDidLoad];
infoViewController = [[InfoViewController alloc] initWithNibName:@"InfoViewController" bundle:nil];
mainInfoView = (MainInfoView *)[mainInfoViewController view];
 } 
```

（MainViewController 是从 tableviewcontroller 单元的 segue 推送呈现的，并且有一个导航栏。）

这是在`InfoViewController`viewDidLoad 中设置视图的大小：

```
- (void)viewDidLoad
{
[super viewDidLoad];
self.view.frame = CGRectMake(130, 0, 178, 299);
} 
```

在 InfoViewController 的尺寸检查器中，我设置了相同的尺寸（178，高度：299）。我为 XIB 中的 InfoViewController 和 Storyboard 中的 MainViewController 禁用了“使用自动布局”。

我在`InfoViewController`. 它们在 .h 中用属性声明并在 .m 中合成。并连接到 XIB 中的元素。它们的内容在 viewWillAppear 中定义`MainViewController`如下：

```
- (void)viewWillAppear:(BOOL)animated {
[super viewWillAppear:animated];
 infoViewController.kategoriLabel.text = [[objArr objectAtIndex:detailIndex] objectForKey:@"Type"];
 } 
```

当我运行应用程序并输入此视图时，一些标签、图像和文本视图突然被放置在看似随机的位置。这只发生在某些元素上。

我在另一个应用程序中做了同样的事情，它在模拟器（iPhone 4 版本 6,0）和 iPhone 5 设备上都可以正常工作，但在这个应用程序中它只是在两者上都变得混乱。当我比较应用程序时，我似乎在实用程序的任何地方或其他任何地方都找不到任何不同的地方。

如果您遇到过类似的事情并解决了它，或者您可能知道是什么原因造成的，我将不胜感激您的回答。谢谢。

PS。我正在使用 Xcode 4.5.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T02:46:10.257

我有一个不同的问题，但我的蛮力解决方案也可能对你有用。就我而言，我想禁用一系列视图控制器中最后一项的导航栏。但是，IB 不会让您删除导航栏，所以我必须在 viewWillAppear 中手动完成。然而，一旦栏被隐藏，IOS 将我在 IB 中定义的所有按钮和对象上移（现在隐藏）导航栏的高度。

我在 Controller 的 viewWillAppear 中使用了以下内容。（当我在 viewWillAppear 中尝试此操作时，对象往往会明显移动）

```
-(void) viewWillAppear:(BOOL)animated
{
    //turn off nav bar
    [[self navigationController]setNavigationBarHidden:YES animated:NO];

    //correct positions of items that shift when the bar disappears
    myThing.center = CGPointMake(desired_x_coord, desired_y_coord);
    myOtherThing.center = CGPointMake(desired_x_coord2, desired_y_coord2);
    ...etc...

    //don't forget to call the base class
    [super viewWillAppear:animated];
} 
```

烦人，但工作。如果找不到对象移动的来源，可以尝试使用 viewWillAppear 强制它们的位置。

# python - Django，阅读源代码和主要文档，“并排”

> ID：13576347
> 
> 赞同：3
> 
> 时间：2012-11-27T02:04:30.480
> 
> 标签：python, django

我正在阅读 Django 1.5 的[主要文档](https://docs.djangoproject.com/en/1.5/topics/)。随着我的前进，我希望看到一些真正的实现，以便更好地掌握这些概念。

我知道源代码在 GitHub 上。我分叉了源代码，并且必须使用我最喜欢的编辑器进行搜索才能找到东西。

您知道在其源代码中“搜索”的任何在线替代方案吗？我的意思是除了一遍又一遍地搜索每个功能......

**更新**：根据提供的答案，一个好的解决方案是使用**[ack](http://betterthangrep.com/)**！这是一个很棒的工具，用于在源代码中搜索东西..

对于基于 Debian 的发行版，您可以使用以下命令安装它：

```
sudo apt-get install ack-grep; sudo ln -s $(which ack-grep) /usr/local/bin/ack 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T10:33:16.537

您应该克隆源，并使用[ack](http://betterthangrep.com/)进行搜索。

# c++ - 结构数组作为模板参数

> ID：13576349
> 
> 赞同：3
> 
> 时间：2012-11-27T02:04:42.947
> 
> 标签：c++, templates, c++11, typetraits

我正在尝试将指向`struct`s 数组的指针作为模板参数传递。一段时间后我设法做到了：

```
struct something{};

constexpr const something single;
constexpr const something array[12];
template<const something* arg> void f() {}

template<typename T>
constexpr T* workaround(T* v){
    return v;
};

void bind(){
    f<&single>();                       //OK
    f<array>();                         //NO
    f<&array>();                        //NO
    f<&array[0]>();                     //NO
    f<workaround(array)>();             //NO
    f<(const something*)array>();       //OK
} 
```

这是数组不能透明地用作指针的罕见情况之一，还是编译器错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:04:26.617

我实际上相信最简单的调用形式 ,`f<array>();`只要你`array`正确声明定义就可以工作：

```
struct Elem
{ };

constexpr const Elem array[5] { {} , {} , {} , {} , {} };

template<const Elem* arg> void f()
{ }

int main()
{
  f<array>();
  return 0;
} 
```

我唯一改变的（除了将数组从 12 个元素减少到 5 个元素之外）是为`array`.

（这为我编译，使用 GCC 4.7.2。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T03:40:25.223

用 Apple clang v4.1 玩弄这个，我得到了下面的编译代码。我不得不承认我不知道 Clang 坚持对`single`and进行外部链接是否正确`array`。此外，它基于 jogojapan 的修改，没有特别的原因。

```
struct Elem {};

extern const Elem single;
extern const Elem array[3];

constexpr const Elem single {};
constexpr const Elem array[3] {{},{},{}};

template<const Elem* arg> void f()
{ }

int main()
{
    f<&single>();
    f<array>();
    return 0;
} 
```

FWIW，在偶然发现这个之后，我在黑暗中到达了这个镜头：http: [//lists.apple.com/archives/xcode-users/2006/Jun/msg00799.html](http://lists.apple.com/archives/xcode-users/2006/Jun/msg00799.html)

# django - 类型错误：* 之后的 add() 参数必须是序列，而不是订阅者

> ID：13576350
> 
> 赞同：4
> 
> 时间：2012-11-27T02:05:16.563
> 
> 标签：django, django-models, typeerror

```
class Subscribers(User):
    date = models.DateField()
    user = models.OneToOneField(User)

class Tour(models.Model):
    owner_id = models.ForeignKey(User)
    name = models.CharField(max_length=50)
    location = models.ManyToManyField(Location)
    subscribers = models.ManyToManyField(Subscribers, related_name="sub") 
```

我正在尝试在另一个文件中执行此操作：

```
user1 = User.objects.create_user('John','j@j.com','j1')
user2= User.objects.create_user('Mike','m@m.com','m1')
user3= User.objects.create_user('kokoko','m@m.com','m1')
user4= User.objects.create_user('lalal','m@m.com','m1')
sub = Subscribers()
tour = Tour()
tour.id = "1"
tour.name = "hello"
tour.owner_id = user1
tour.subscribers = sub 
```

但我有这个错误： TypeError: add() argument after * must be a sequence, not Subscribers

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T02:16:35.717

ManyToMany 管理器假定当您这样做时

```
tour.subscribers = sub 
```

`sub`是 的序列（元组、列表、查询集）`Subscribers`，而不是单个对象。然后这样做与这样做完全相同：

```
tour.subscribers.add(*sub) 
```

而且由于 sub 不是一个序列，它会抛出这样的错误。我建议先保存，然后再添加。我认为它也更具可读性，但这可能只是我的看法：

```
sub = Subscribers()
tour = Tour()
tour.id = "1"
tour.name = "hello"
tour.owner_id = user1
tour.save()
tour.subscribers.add(sub) 
```

希望这可以帮助 ：）

# url - Sitecore 中的 startitem 问题

> ID：13576355
> 
> 赞同：1
> 
> 时间：2012-11-27T02:06:06.173
> 
> 标签：url, sitecore

我们有四种不同的环境——开发虚拟机、开发、QA 和产品。所有环境对“网站”站点都有以下设置：

```
<site name="website" virtualFolder="/" physicalFolder="/" 
rootPath="/sitecore/content" startItem="/home" database="master" 
domain="extranet" allowDebug="true" cacheHtml="false" 
htmlCacheSize="10MB" registryCacheSize="0" viewStateCacheSize="0" 
xslCacheSize="5MB" filteredItemsCacheSize="2MB" enablePreview="true" 
enableWebEdit="true" enableDebugger="true" 
disableClientData="false" loginPage="/" hostName="www.site.com" 
enableFallback="true" enforceVersionPresence="true"/>. 
```

所以在 VM 和 prod 上，www.site.com/en/home/press 和 www.site.com/en/press 工作。

但是在开发和质量检查中，www.site.com/en/home/press 有效，但 www.site.com/en/press 无效。（与 startItem 一起使用，但没有它会得到 404）。

这发生在启用和禁用 ISAPI 的情况下（无例外）。

我不确定这里发生了什么或其他地方可以查看，除非确保我的起始项目处于良好状态，看起来是这样。

我能做些什么来解决这个问题？如果您需要更多信息，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:01:53.113

尝试查看：

web.config中的“linkManager”标签，有一个属性叫：

语言嵌入：按需 | 总是 | 绝不

可以在这些解决方案上进行不同的设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T04:27:42.940

如果您有多语言网站，建议使用
languageEmbedding: always
优点：

*   在 IE8 中，有时会破坏语言 cookie，因为显示的语言是随机变化的。（我们在我们的环境中遇到过这个问题） LanguageEmbadding ：总是会保留信息并且可以正常工作而不会出现任何问题。
*   如果您已设置为需要，则第一次显示语言，下一次将隐藏。但这会给谷歌分析带来问题。在 GA 中，您将拥有 2 个具有相同页面内容的不同 URL，因此您的分析将不必要地分为 2 个页面。

是的，您可以检查配置文件是否有任何区别。正如 Martijn 提到的，您可以使用 www.site.com/sitecore/admin/showconfig.aspx 复制配置，使用任何文件比较工具（如 WinMerge 等）进行比较。

您的项目中的层次结构是什么？Sitecore-Content-home-Press 还是 Sitecore-Content-home-Home-Press？

在我的项目中，您提到的设置有 database = web.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T01:13:18.950

我无法添加评论，但正如 Martijn 所说，您需要比较配置。现在这应该很容易，因为您应该使用配置包含文件，因此环境之间的更改应该非常小。如果您不使用它们，那么您应该开始使用它们，它可以让您更轻松地找出与默认 Sitecore 安装的差异，并且也将使您的升级在未来变得更加容易。或者，也许您正在将它们用于其他环境，这就是导致问题的原因？

[全部关于 web.config 包含 Sitecore ASP.NET CMS 的文件](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2011/05/All-About-web-config-Include-Files-with-the-Sitecore-ASPNET-CMS.aspx "全部关于 web.config 包含 Sitecore ASP.NET CMS 的文件")

至于比较配置，请使用已经提到的[WinMerge](http://winmerge.org/ "WinMerge")之类的文件比较工具，这样可以更轻松地消除差异。

此外，正如 Maulik 所说，默认配置具有：`database="web" content="master"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T10:12:15.897

这似乎是配置差异。使用 www.site.com/sitecore/admin/showconfig.aspx 比较实时配置。这样您就可以看到实际的配置，其中还包括您的所有 /app_config/include/ 文件

# c# - WCF 自托管需要身份验证

> ID：13576356
> 
> 赞同：0
> 
> 时间：2012-11-27T02:06:14.380
> 
> 标签：c#, wcf, authentication

如果我能有一个 hello world 示例说明如何让客户端必须提供特定的用户名和密码才能使用 wcf 服务，我将不胜感激。我自己托管我的服务，因此它不在 IIS 上。

我有服务器 A 和客户端 B。它们是同一网络上的不同计算机。

我正在使用`Service1`Visual Studio 在创建新的 WCF 类库时创建的默认类。所以我在服务器 A 上创建了该服务。

然后在客户端 BI 上添加对该地址的服务引用，该地址恰好是：（ `http://10.10.1.135:8732/Design_Time_Addresses/WcfServiceLibrary1/Service1/mex` 客户端 B 是控制台应用程序）

为了使用该服务，我必须这样做：

```
 static void Main(string[] args)
    {
        ServiceReference1.Service1Client svc = new ServiceReference1.Service1Client();

        svc.ClientCredentials.Windows.ClientCredential.UserName = "MyUserName";
        svc.ClientCredentials.Windows.ClientCredential.Password = "MyPassword";

        var a = svc.GetData(5); // consume the service            
    } 
```

注意我必须使用域用户的用户名和密码。**如何使用自定义密码执行类似操作？**我不想提供这些凭据，也不想在 Windows 上创建新用户。如果我可以针对数据库进行验证，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:42:25.693

只需谷歌它：

[http://codebetter.com/petervanooijen/2010/03/22/a-simple-wcf-service-with-username-password-authentication-the-things-they-don-t-tell-you/](http://codebetter.com/petervanooijen/2010/03/22/a-simple-wcf-service-with-username-password-authentication-the-things-they-don-t-tell-you/)

简单的：

[http://blogs.msdn.com/b/pedram/archive/2007/10/05/wcf-authentication-custom-username-and-password-validator.aspx](http://blogs.msdn.com/b/pedram/archive/2007/10/05/wcf-authentication-custom-username-and-password-validator.aspx)

[http://www.codeproject.com/Articles/431358/Selfhosted-Secure-WCF-by-Id-password-custom-valida](http://www.codeproject.com/Articles/431358/Selfhosted-Secure-WCF-by-Id-password-custom-valida)

# iphone - 应用启动时打开相机视图 (iOS6)

> ID：13576357
> 
> 赞同：1
> 
> 时间：2012-11-27T02:06:24.100
> 
> 标签：iphone, ios6, uiimagepickercontroller

我想做的是让应用程序以相机作为第一个屏幕打开。它不工作，我不知道我错过了什么。如果有人可以填写我，那就太好了……谢谢。

```
 - (void)viewDidLoad
{

[super viewDidLoad];
UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];

if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
{
    [imagePicker setSourceType:UIImagePickerControllerSourceTypeCamera];
}
else
{
    [imagePicker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T04:06:47.180

试试这样。希望对您有所帮助：

```
UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];

imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;

imagePicker.delegate = self;

[self presentViewController:imagePicker animated:YES completion:nil]; 
```

# maven - 如何在 Maven 中以快照 jar 的名称添加额外信息？

> ID：13576359
> 
> 赞同：0
> 
> 时间：2012-11-27T02:07:07.847
> 
> 标签：maven, snapshot

当前 maven 生成名为`artifact-$VERSION-$DATE.jar`. 我有额外的信息（内部版本号，单调递增），我想在这个名称中嵌入，可能不是日期。有没有默认或简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:50:09.170

您可以在 maven-jar-plugin <configuration> 中使用 <classifier>：

```
<plugins>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <version>2.3.2</version>
    <configuration>
      <classifier>${buildNumber}</classifier>
    </configuration>
  </plugin>
</plugins> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:06:02.130

[分类器](http://maven.apache.org/plugins/maven-deploy-plugin/examples/deploying-with-classifiers.html)字段是您自定义 Maven 存储库文件名的唯一选项。然而，它并不是真正设计用于存储内部版本号等信息，理想情况下，它应该是项目“版本”字段的一部分......

我建议您使用 Maven 存储库管理器，它可以存储额外的工件元数据。我个人的选择是nexus，它有一个[用于存储工件元数据的插件](http://www.sonatype.com/books/nexus-book/reference/custom-metadata-plugin.html)

# ios - avassetwriter 是否可以输出到内存

> ID：13576361
> 
> 赞同：8
> 
> 时间：2012-11-27T02:07:47.003
> 
> 标签：ios, memory-management, video, h.264, avassetwriter

我想编写一个连续捕获视频的 iphone 应用程序，h.264 以 10 秒的间隔对其进行编码并上传到存储服务器。这可以通过 avassetwriter 完成，并且我可以在创建新文件时继续删除旧文件。然而，由于闪存的写入周期有限，这种方案会在通过闪存的数千个写入周期后破坏闪存。有没有办法将 avassetwriter 重定向到内存，或者在 iphone 上创建一个 ram 驱动器？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:47:56.787

是的，avassetwriter 是访问硬件解码器的唯一方法。并且在写入文件时简单地读回文件不会给你 moov 原子，因此基于 avfoundation 或 mpmediaplayer 的播放器将无法读回它。您只有几个选择，定期停止 asassetwriter 并在后台线程上写入文件，有效地将您的电影分割成更小的完整文件。或者您可以在服务器端处理不完整的 mp4，您将不得不解码原始 nalu 并重新创建丢失的 moov 原子。如果您使用 ffmpeg mov.c 是要查看的源代码。这也是一个不完整的 mp4 文件会失败。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-27T02:46:55.110

为什么要将数据写入文件？你不能把捕获的数据复制到内存中，然后从内存中推送到服务器吗？

# amazon-web-services - 拍摄 EBS 卷的快照会提高可靠性吗？

> ID：13576363
> 
> 赞同：5
> 
> 时间：2012-11-27T02:08:11.570
> 
> 标签：amazon-web-services, amazon-ebs

EBS 文档指出：

> 例如，自最近的 Amazon EBS 快照以来使用 20 GB 或更少的修改数据运行的卷预计年故障率 (AFR) 介于 0.1% 到 0.5% 之间，其中故障是指卷的完全丢失。

..但这并没有给出任何卷的 AFR 指示，例如：

*   根本没有快照；或者
*   没有修改数据的新快照。

[我已经看到它建议](http://news.ycombinator.com/item?id=4118196)可以从快照中自动/静默恢复丢失或损坏的块，但我在文档中看不到对此的任何引用。这是真的？

我是否可以假设如果我有一个没有更改数据和新快照的卷，我的卷的 AFR 与 S3 的可靠性相匹配？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T14:58:12.210

去年我参加了 AWS 的为期三天的课程，他们明确地告诉我们，拍摄快照大大提高了 EBS 卷的可靠性。他们没有解释**为什么**会这样，但暗示 EBS 卷存储最新快照的更改，并且快照本身非常稳定（存储在 S3 中）。连续的快照显然使用很少的存储空间，因为 AWS 足够聪明，可以存储差异。

不过，他们没有给出任何关于失败率的确切数字。如果卷的可靠性至关重要，他们建议使用 RAID 配置多个 EBS 卷。但是，他们还建议构建您的应用程序，以便它可以容忍任何实例的故障，从而降低每个 EBS 卷的持久性的重要性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:24:50.873

EBS 卷的快照存储在 S3 中。这些快照获得了 S3 的所有[持久性](http://aws.amazon.com/s3/faqs/#How_durable_is_Amazon_S3)和[可用性](http://aws.amazon.com/s3/faqs/#How_reliable_is_Amazon_S3)优势。您还可以将快照复制到其他区域，这是针对区域级中断的不错的保险政策。

如果您的 EBS 卷出现故障，您可以从上一个快照中恢复。您的快照越近，您的恢复故事就越最新。由于 EBS 快照的增量特性，频繁执行它们是非常实用的。

EBS 还提供“恢复卷”，您可以从这个[AWS 论坛主题](https://forums.aws.amazon.com/message.jspa?messageID=355130)中看到。

据我所知，拍摄快照的行为不会直接影响活动的、正在运行的 EBS 卷的 AFR。相反，它只是让您在发生故障时更容易恢复。

# c - 将输入文件的每一行打印两次？

> ID：13576364
> 
> 赞同：1
> 
> 时间：2012-11-27T02:08:29.403
> 
> 标签：c, file, while-loop, printf

我正在编写代码，它非常简单地读入文件并适当地打印出文件中的内容。

我一直在努力让这样的程序在文件结束时终止，并认为我找到了合适的解决方案，但是每行在我的输出中打印两次，原因超出了我的范围。

这是我的主要文件：

```
int main(int argc, char *argv[]) {
    // insure 2 arguments given, one for a.out and one for the test file
    if (argc != 2) {
        // result if request fails
        printf("Requires 2 arguments. Be sure to include test file location\n");
        return 0;
    }

    FILE *fp; //open the file
    fp = fopen(argv[1], "r");

    char option;
    int key;
    int i = 0;
    while (fscanf(fp, "%c %d", &option, &key) != EOF) {
        printf("%d\n", key);
    }
} 
```

关键是打印两次！

希望这是一个简单的错误，我只是因为过度暴露于问题而忽略了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T02:25:31.517

```
#include <stdio.h>

int main(int argc, char *argv[])
{
    if (argc != 2)
    {
        fprintf(stderr, "Requires 1 argument - a file name\n");
        return 1;
    }

    FILE *fp; //open the file
    if ((fp = fopen(argv[1], "r")) == 0)
    {
         fprintf(stderr, "Failed to open file %s\n", argv[1]);
         return 1;
    }

    char option;
    int key;
    while (fscanf(fp, "%c %d", &option, &key) == 2)
        printf("%d\n", key);
    return 0;
} 
```

注意错误报告和文件读取过程中的变化。代码可能仍然不是您想要的；您可能会在第一行之后存储的第一行输入之后的数字之后获得换行符`option`。修复需要`fgets()`和`sscanf()`：

```
#include <stdio.h>

int main(int argc, char *argv[])
{
    if (argc != 2)
    {
        fprintf(stderr, "Requires 1 argument - a file name\n");
        return 1;
    }

    FILE *fp; //open the file
    if ((fp = fopen(argv[1], "r")) == 0)
    {
         fprintf(stderr, "Failed to open file %s\n", argv[1]);
         return 1;
    }
    char buffer[1024];
    while (fgets(buffer, sizeof(buffer), fp) != 0)
    {
        char option;
        int key;
        if (fscanf(fp, "%c %d", &option, &key) == 2)
            printf("%d\n", key);
        else
        {
            fprintf(stderr, "Format mismatch on %s", buffer);
            fclose(fp);  // Not 100% necessary here, but tidiness is important
            return 1;
        }
    }
    fclose(fp);          // Not 100% necessary here, but tidiness is important.
    return 0;
} 
```

虽然我`fp`在结束之前关闭了，但程序即将退出的时间并不重要，并且`return`from`main()`几乎相当于`exit()`. 如果它在一个函数中`main()`，那么确保释放您分配的任何资源非常重要，例如文件流`fp`。

*警告：未编译的代码。警告讲师。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T02:18:06.763

你可能想要：

```
fscanf(fp, "%c %d\n", &option, &key); 
```

并且您还想检查 的返回值`fscanf`以确保它等于 2。

在循环的第一次迭代中，没有消耗换行符。

在第二次迭代中，换行符被消耗并放入`option`，`%d`不匹配，并`fscanf`返回 1\. `key`不变，这就是它再次打印的原因。

在第三次迭代中，`fscanf`finally 返回`EOF`。

一般规则：始终检查返回值以确保它们是您所期望的。（您也违反了这条规则，因为您没有检查来自 的退货`fopen`。）在最坏的情况下它什么也不做；充其量，它可以帮助您调试此类问题。

# asp.net - 检查目录是否准备就绪 System.IO.Directory

> ID：13576365
> 
> 赞同：0
> 
> 时间：2012-11-27T02:08:37.037
> 
> 标签：asp.net, asp.net-mvc, io, asp.net-mvc-4

有没有办法检查司机是否准备好？

因为我列出了所有目录，例如当它到达 DVD 时，我得到一个异常，说驱动程序没有准备好。

非常感谢

```
@{
try
{
    //Resgata todos os drivers Lógicos do Sistema
    string[] drives = System.IO.Directory.GetLogicalDrives();

    Response.Write("<ul class=\"jqueryFileTree\" style=\"display: none;\">\n");

    //Itera sobre cada driver no array
    foreach(string drive in directoryEntries) {

        //Para cada driver cria um LI A 
        Response.Write("\t<li class=\"directory collapsed\"><a href=\"#\" rel=\"" + drive + "\">" + drive + "</a></li>\n");

        //Resgata subDiretórios de cada driver
        string[] directoryEntries = System.IO.Directory.GetFileSystemEntries(drive); 
    }

}
catch (Exception)
{

    throw;
}
} 
```

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:26:56.003

查看 DriveInfo.IsReady 属性。

```
 DriveInfo[] allDrives = DriveInfo.GetDrives();

  foreach (DriveInfo d in allDrives)
  {
      if (d.IsReady == true)
      {
         // do something
      }
   } 
```

可以在此 MSDN 条目上找到更多信息：

*   [http://msdn.microsoft.com/en-us/library/system.io.driveinfo.isready.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-2](http://msdn.microsoft.com/en-us/library/system.io.driveinfo.isready.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-2)

# delphi - 如何在数据库网格中显示 TIMEDIFF（现在，然后）？

> ID：13576369
> 
> 赞同：4
> 
> 时间：2012-11-27T02:08:53.307
> 
> 标签：delphi, dbgrid, tdbgrid

抱歉，我对 DbGrids 很陌生。

我是否应该使用查询的字段编辑器并以某种方式添加一个捕获 TIMEDIFF 的新字段，然后将其添加为我的 DbGrid 中的列？

或者我可以/应该跳过字段编辑器并以某种方式将 TIMEDIFFF 声明为列？

对于这个表，我想要一个有 4 列的 DbGrid：开始时间、结束时间、持续时间、描述（run_id 是主键，不会显示）。

我对如何将数据放入“持续时间”列感到困惑......

```
mysql> describe  test_runs;
+------------------+-------------+------+-----+---------+----------------+
| Field            | Type        | Null | Key | Default | Extra          |
+------------------+-------------+------+-----+---------+----------------+
| run_id           | int(11)     | NO   | PRI | NULL    | auto_increment |
| start_time_stamp | timestamp   | YES  |     | NULL    |                |
| end_time_stamp   | timestamp   | YES  |     | NULL    |                |
| description      | varchar(64) | YES  |     | NULL    |                |
+------------------+-------------+------+-----+---------+----------------+
4 rows in set (0.37 sec) 
```

* * *

[更新]数据源的查询是

```
SELECT start_time_stamp,
       end_time_stamp,
       TIMEDIFF(end_time_stamp, start_time_stamp) as duration,
       description

FROM test_runs ORDER BY start_time_stamp DESC 
```

当我在 MySql 中手动执行它时，我得到

```
mysql> select TIMEDIFF(end_time_stamp, start_time_stamp) as duration FROM
+----------+
| duration |
+----------+
| NULL     |
| 00:04:43 |
| 00:00:13 |
| 00:00:06 |
| 00:00:04 |
+----------+
5 rows in set (0.00 sec) 
```

但数据库网格中的相应列保持空白。任何人都可以帮忙吗？谢谢。

* * *

[更新] 如果有帮助，我正在使用 AnyDac。当我使用 AnYDac 查询编辑器并执行它时，该查询会在 MySql 和 Delphi IDE 中生成所有字段，包括时差。

唯一的问题是我在运行时在数据库网格中看不到它。我在设计时双击数据库网格，列是正确的。该`FielName`属性设置为`duration`，由上面显示的查询重新调整。它在数据库中不存在，而是通过查询计算出来的；这可能是问题所在吗？

* * *

[Aaaaaaaargh !!!] 有人试图“改进”我的代码并在运行时以编程方式设置查询的文本（如`SELECT * FROM test_runs)`，从而覆盖了我的设计时查询！！由于数据库表没有`duration`字段，因此在数据库网格。

话已经说了，声音也提高了，现在我必须为浪费你的时间而道歉。对不起。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T03:12:53.550

我会在您的查询中创建一个计算字段并将该字段添加到您的 DbGrid。

因此，正如您所说，在为查询打开字段编辑器的情况下，右键单击并选择新字段（或按 Ctrl-N）。为您的新字段命名（例如持续时间），保持组件名称默认或根据需要重命名。根据需要设置类型（在这种情况下最有可能是日期时间）并将字段类型设置为计算。

然后，在查询的 OnCalcFields 事件中，将该字段的值设置为所需的值。例如：

```
procedure TForm1.Query1CalcFields(DataSet: TDataSet);
begin
  Dataset.FieldByName('description').AsDateTime :=
     DataSet.FieldByName('end_time_stamp').AsDateTime - 
     DataSet.FieldByName('start_time_stamp').AsDateTime;
end; 
```

或者，您也可以在选择查询中包含持续时间作为额外字段。不幸的是，我在这里没有准备好访问 MySQL，但它可能是这样的：

```
select run_id, start_time_stamp, end_time_stamp, description, 
  (end_time_stamp - start_time_stamp) as duration from test_runs; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T09:33:47.033

> 我是否应该使用查询的字段编辑器并以某种方式添加一个捕获 TIMEDIFF 的新字段，然后将其添加为我的 DbGrid 中的列？

不是一开始，从该字段编辑器中删除所有条目

> 或者我可以/应该跳过字段编辑器并以某种方式将 TIMEDIFFF 声明为列？

不是一开始，从该列编辑器中删除所有条目

之后，您应该会看到网格内打开数据集中的所有列，因为您消除了列编辑器和字段编辑器的所有限制。

作为猜测您的网格/数据会发生什么，您没有设置`FieldName`列的属性`duration`，因此网格不知道要呈现什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T05:48:12.310

要使用 DBgrid，您需要一个数据源，每个数据集都应分配给各自的组件，并确保您已建立连接。如果您在网格中没有得到任何东西，您需要检查您的数据集，如果仅缺少日期差异列数据但标题在查询中显示字段名称，那么您可能会得到空数据.....即使您也没有得到标题名称，您需要检查您的查询.......

# php - 提交后什么都不显示

> ID：13576370
> 
> 赞同：0
> 
> 时间：2012-11-27T02:09:23.260
> 
> 标签：php, javascript, html

在下面的代码中，我显示了一个 javascript 验证。但是当我点击`moduleSubmit`按钮时，它在`if (isset($_POST['moduleSubmit'])) {`. 我的问题是，当我点击按钮时，javascript验证已经通过，那么提交后如何显示表单？

### JavaScript

```
function validation() {

    var isDataValid = true;

    var courseTextO = document.getElementById("coursesDrop");
    var moduleTextO = document.getElementById("modulesDrop");

    var errModuleMsgO = document.getElementById("moduleAlert");

    if (courseTextO.value == "") {
        $('#targetdiv').hide();
        $('#assessmentForm').hide();
        $('#updateForm').hide();
        $('#submitupdatebtn').hide();
        errModuleMsgO.innerHTML = "Please Select a Course";
        isDataValid = false;
    } else {
        errModuleMsgO.innerHTML = "";
    }

    if(isDataValid){
        $("#myForm").submit();
    }

}​ 
```

### PHP/HTML

```
 <?php

// connect to the database
include('connect.php');

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
}

$sql = "SELECT CourseId, CourseNo, CourseName FROM Course ORDER BY CourseId"; 

$sqlstmt=$mysqli->prepare($sql);

$sqlstmt->execute(); 

$sqlstmt->bind_result($dbCourseId, $dbCourseNo, $dbCourseName);

$courses = array(); // easier if you don't use generic names for data 

$courseHTML = "";  
$courseHTML .= '<select name="courses" id="coursesDrop">' . PHP_EOL; 
$courseHTML .= '<option value="">Please Select</option>' . PHP_EOL;  

$outputcourse = "";

while($sqlstmt->fetch()) 
{

    $course = $dbCourseId;
    $courseno = $dbCourseNo;
    $coursename = $dbCourseName; 

    $courseHTML .= "<option value='" . $course . "'>" . $courseno . " - " . $coursename . "</option>" . PHP_EOL;  

    if (isset($_POST['courses']) && ($_POST['courses'] == $course)) {
        $outputcourse = "<p><strong>Course:</strong> " . $courseno .  " - "  . $coursename . "</p>";
    }

} 

$courseHTML .= '</select>'; 

?>

<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post" onsubmit="return validation();">
    <table>
        <tr>
            <th>Course: <?php echo $courseHTML; ?></th>
        </tr>
    </table>
    <p>
        <input id="moduleSubmit" type="submit" value="Submit Course and Module" name="moduleSubmit" />
    </p>
    <div id="moduleAlert"></div>
    <div id="targetdiv"></div>
</form>

<?php

if (isset($_POST['moduleSubmit'])) {    

    $sessionquery = "
    SELECT SessionId, SessionName, SessionDate, SessionTime, CourseId, SessionActive
    FROM Session
    WHERE (CourseId = ? AND SessionActive = ?)
    ORDER BY SessionName 
    ";

    $active = 1;

    $sessionqrystmt=$mysqli->prepare($sessionquery);
    // You only need to call bind_param once
    $sessionqrystmt->bind_param("si",$course, $active);
    // get result and assign variables (prefix with db)

    $sessionqrystmt->execute(); 

    $sessionqrystmt->bind_result($dbSessionId,$dbSessionName,$dbSessionDate,$dbSessionTime, $dbCourseId, $dbSessionActive);

    $sessionqrystmt->store_result();

    $sessionnum = $sessionqrystmt->num_rows();   

    if($sessionnum == 0) {
        echo "<p><span style='color: red'>Sorry, You have No Assessments under this Module</span></p>";
    } 
    else 
    { 
        echo "";
    }

    ...

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T02:25:13.163

恐怕输入的值`type=button`不会以表格形式发布。您可以使用 Firefox 的 firebug 插件或 chrome 中的开发者工具来检查 http 请求中发布的值。或者您也`print_r($_POST)`可以查看在 php 端发布的值。

尝试使用隐藏输入`<input type="hidden" value="1" name="issubmit"/>`来检查它是否是帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T02:22:16.667

您必须以 html 形式使用重定向操作。这会将您重定向到您想要的任何地方.. 喜欢，

```
if $valid=$form->validate();
{
  $this->redirect('form url')
} 
```

# ruby-on-rails - 红宝石意外的 tSTRING_BEG，期待 '}'

> ID：13576373
> 
> 赞同：0
> 
> 时间：2012-11-27T02:10:10.600
> 
> 标签：ruby-on-rails, ruby, yaml

我正在学习 ruby​​，我在 ruby​​ 1.9.3 中遇到问题，错误是

> 意外的 tSTRING_BEG，期待 '}'

我在这里附加了我的代码[bot_data_to_yaml](https://gist.github.com/4151926)

我希望有人能给我回答我的代码发生了什么，因为我是编程语言的新手.. 谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T02:14:39.360

看起来您在某处缺少逗号、括号或大括号。后面加逗号：

```
 :farewell => ["Good bye!"] 
```

# c# - 围绕单实例库编写托管对象模型

> ID：13576374
> 
> 赞同：0
> 
> 时间：2012-11-27T02:10:12.410
> 
> 标签：c#, .net

我有一个应用程序，其核心功能包含在 (C) DLL 中。此库的导出存在头文件。这个应用程序是非常单实例的。我的意思是，该库在内部使用了很多全局状态，因为它一次只能处理一个文件。应用程序与此库一起使用的正常工作流程是这样的：

1.  在里面

2.  打开数据库

3.  使用数据库

4.  关闭数据库

    （重复）

我想围绕这个库提供的功能编写一个 .NET 对象模型。通过这个，我的意思是我希望“数据库”成为一个对象（调用它`Database`），它具有归结为库调用的属性/方法。

我当然希望能够`Database`在任何给定时间拥有多个对象。但是，可以将这个库的一个实例加载到我的进程中（我假设），然后我会受到库对全局变量的使用的限制。

**我有哪些选择？**

* * *

我考虑让我的顶级类`Database`只能通过工厂方法访问，这会将实例的数量限制为`Database`一个：

```
public class Database {
    private Database() {
       library_init();
       // ...
    }

    private Database m_instance;

    public static Database Open(string file) {
         if (m_instance != null)
             throw new InvalidOperationException("...");
         return new Database();
    }

    public Close() {
        library_close();
        // ...
        m_instance = null;
    }
} 
```

* * *

我还能做些什么，比如手动加载库`AppDomain`或类似的东西？

我真的只预见一次需要一个实例，但不必忍受这种限制会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T02:29:10.227

如果该全局状态仅在 RAM 中（即 DLL 不使用该状态的硬编码文件名/注册表项），那么我会看到 2 个选项如何使用多个实例：

1.  （快速和肮脏）重命名 DLL 并以另一个名称加载它。这可能由于许多原因而失败，例如由于某些依赖 DLL 的状态或显式检查。

2.  （通常更正确，但更难）创建一个加载 C DLL 的 EXE，并将功能公开为一些 IPC API，例如作为具有命名管道绑定的 WCF 服务。然后，生成该 EXE 进程的几个实例，并使用 WCF 调用 API。

# xpath - XPath 简单的条件语句？如果节点 X 存在，Y 是否存在？

> ID：13576379
> 
> 赞同：5
> 
> 时间：2012-11-27T02:10:55.463
> 
> 标签：xpath, google-sheets, xml-parsing, google-sheets-importxml

我正在使用谷歌文档进行网络抓取。更具体地说，我使用的是 Google Sheets 内置的 IMPORTXML 函数，在该函数中我使用 XPath 来选择要从中抓取数据的节点。

我要做的基本上是检查是否存在特定节点，如果是，则选择其他一些随机节点。

```
/*IF THIS NODE EXISTS*/
if(exists(//table/tr/td[2]/a/img[@class='special'])){

   /*SELECT THIS NODE*/ 
   //table/tr/td[2]/a

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T02:29:32.677

您在 XPath 中没有类似的逻辑，但您可能可以做一些您想做的事情。

如果你想选择`//table/tr/td[2]/a`但只有它有一个`img[@class='special']`，那么你可以使用`//table/tr/td[2]/a[img[@class='special']]`.

如果您想在其他情况下选择其他节点，您可以合并两条路径（`|`运算符），并确保每个路径都有一个`[]`互斥的过滤器（在 内），例如一个是路径，另一个是`not()`那条路的。我举个例子，但我不确定你想要什么“其他随机节点”……也许你可以澄清一下？

关键是将 XPath 视为一种查询语言，而不是过程语言，因此您需要考虑它们的选择器和过滤器，这是一种与大多数程序员习惯的思考问题的方式截然不同的方式。但是过滤器不需要与选择器特别相关（例如，您可以有一个过滤器开始查看文档的根目录）这一事实导致了一些强大的（如果难以阅读）的可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T14:25:11.853

**使用**：

```
/self::node()[//table/tr/td[2]/a/img[@class='special']]
   //table/tr/td[2]/a 
```

# vb.net - 程序仅从 Debug/Release 目录运行

> ID：13576383
> 
> 赞同：0
> 
> 时间：2012-11-27T02:11:28.600
> 
> 标签：vb.net

我已经部署了一个包含 Crystal Report 的 VB.net 应用程序。当我从调试/发布目录中的可执行文件打开应用程序时，该应用程序运行良好，但是当我将所有文件从调试/发布目录复制到另一个文件时，它在执行 Crystal Reports 时返回错误。数据库连接很好，问题来自水晶报表。

这是我的代码：

```
Dim report As New ReportDocument
report.FileName = System.IO.Path.GetFullPath("../../ReportNPE.rpt")
report.SetDatabaseLogon(My.Settings.UserSQL, My.Settings.PasswordSQL) 'connect to database
report.SetParameterValue("p_CAR", CAR)
report.SetParameterValue("p_NPEDate", tgl)
report.SetParameterValue("p_Con", Con) 
```

我尝试将引用部分中 Crystal dll 文件的“复制本地”设置为 True

如何在另一个目录上运行程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:17:41.363

在这一行：

```
report.FileName = System.IO.Path.GetFullPath("../../ReportNPE.rpt") 
```

您正在引用一个位于相对位置（输出目录上方 2 级）的文件。当您将输出目录的内容复制到“我的文档”文件夹时，该文件不再存在于相同的相对位置（“我的文档”上方 2 级）

# javascript - js / jquery：对象键称为“长度”的问题

> ID：13576387
> 
> 赞同：4
> 
> 时间：2012-11-27T02:12:05.870
> 
> 标签：javascript, jquery, object, key, reserved-words

我正在连接的 API 给了我一个对象。它的键/属性之一称为“长度”，这会触发一些奇怪的行为：

```
var obj = {"text1":{"index":0,"lengt":5}}; //modified key for testing

$.each(obj.text1,function(k,v){     
    console.log ('i: '+k+' v: '+v); });

i: index v: 0  //this is the result I'm looking for
i: lengt v: 5

var obj = {"text1":{"index":0,"length":5}}; //original object 

i: 0 v: undefined // ????
i: 1 v: undefined 
i: 2 v: undefined 
i: 3 v: undefined 
i: 4 v: undefined 
```

我假设`length`是一个保留字，但这就是原始对象的来源。发现和避开这个问题的最佳方法是什么？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T02:17:48.837

这是一个jQuery“功能”;-)。根据消息来源，如果没有`length`定义属性，它会将变量视为对象：

[https://github.com/jquery/jquery/blob/master/src/core.js#L589](https://github.com/jquery/jquery/blob/master/src/core.js#L589)

```
var name,
    i = 0,
    length = obj.length,
    isObj = length === undefined || jQuery.isFunction( obj );
      ^--------- 
```

如果`isObj`是`false`- 那么请参阅[https://github.com/jquery/jquery/blob/master/src/core.js#L608](https://github.com/jquery/jquery/blob/master/src/core.js#L608)

```
if ( isObj ) {
    // not your case, ommitted
} else {
    for ( ; i < length; ) {
        if ( callback.call( obj[ i ], i, obj[ i++ ] ) === false ) {
            break;
        }
    }
} 
```

如您所见，它`i`从`0`到迭代`length`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T04:02:51.307

为什么不使用普通的旧“for-in”结构？有时根本不需要 jQuery ......这更直接，更优化：没有函数调用，没有“if isObj thing”的测试，它可能是 2 或 3 行代码......

```
var value;
for (var key in object)
{
  value = object[key];
  console.log(key, '=', value); //and voila !
} 
```

# django - Django：将表单输入传递给url

> ID：13576389
> 
> 赞同：0
> 
> 时间：2012-11-27T02:12:18.527
> 
> 标签：django

在 django 中，我在将输入到表单中的数字传递给 URL 时遇到问题：

我尝试这样：模板-> index.html

```
<form action="/mysite/{{ number }}/details.html" method="post">
<p><label for="number">Give me a number:</label>    
    <input type="text" name="number" id="number" /></p> <input type="submit" value="Submit" /> 
```

但结果是**/mysite//details.html**，而不是**/mysite/123/details.html**（当用户在请求的表单中输入 123 时）

你能给我一个建议吗？

谢谢，

JJ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T02:16:24.467

您不应该以这种方式配置您的操作网址。并且用户 POST-ed 编号 123 被传递到您的视图函数，因为`request.POST['number']`您没有在操作 url 中指定它。

您的操作 url 可以简单地`{% url 'send_details' %}`对应于一个 url 定义，即

```
 url(r'^mysite/details/$',
    'send_details',
    name='send_details'), 
```

当用户提交时，您的`send_details`视图功能将收到。`request.POST['number']`

没有必要将模板中的数字作为上下文变量。

# sql - INNER JOIN 和多对多表不起作用

> ID：13576396
> 
> 赞同：0
> 
> 时间：2012-11-27T02:14:10.607
> 
> 标签：sql

我正在介绍数据库类，但我的查询遇到了问题。我正在尝试返回将为 PurchaseOrderHeader 生成的信息。我不能让它返回任何东西。

```
Use [Sandwiches Inc]
GO

DECLARE 
@VendorID INT,
@TodaysDate DATETIME,

SELECT @VendorID = 3,
@TodaysDate = GETDATE();

SELECT
@VendorID AS Vendor,
@TodaysDate AS TDate,
V.Name,
V.Phone,
A2.Address1,
A2.Address2,
A2.AdressState,
A2.City,
A2.Zip,
A1.Address1,
A1.Address2,
A1.AdressState,
A1.City,
A1.Zip
FROM Vendor AS V
INNER JOIN VendorAddress AS VA1 on V.VendorId = VA1.VendorId
--INNER JOIN VendorAddress AS VA2 on V.VendorId = VA2.VendorId
INNER JOIN VdrAddress as A1 on VA1.VdrAddressId = A1.VdrAddressId
INNER JOIN VdrAddress AS A2 on VA1.VdrAddressId = A2.VdrAddressId
WHERE A1.Name = 'Billing' And A2.Name = 'Shipping' And V.VendorId = 3
GO 
```

就像现在一样，它执行但不返回任何列。如果我只做 A1 或 A2 并注释掉其中一个，它就可以了。正是当我尝试同时做这两件事时，它才会失败。

任何帮助，将不胜感激。如果您需要更多信息，我可以详细说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T02:47:28.750

我不认为您删除了 WHERE 约束以查看更大的结果集中是否实际上没有任何内容？

我还假设所有表格中都有相关数据？

我将从这里开始删除除一个连接之外的所有连接，然后慢慢重新添加它们，这样我就可以缩小问题所在的范围。

试试看，然后再回来告诉我们更多细节。

（Ps。当我们不知道表格中的内容时，这很难做到）

# php - MySQL 表行不会 UPDATE

> ID：13576399
> 
> 赞同：0
> 
> 时间：2012-11-27T02:14:21.193
> 
> 标签：php, mysql, post, mysqli, sql-update

我正在尝试更新 MySQL 表中一行中的一列。该列是“投票”列，当有人提交 HTML 表单时，会有一个隐藏的输入，其值为“1”，该输入会被提交并发布。这是我用来尝试更新投票计数的代码：

```
if(isset($_POST['image_id']) && isset($_POST['vote'])){
    $image_id = $mysqli->real_escape_string($_POST['image_id']);
    $vote = $mysqli->real_escape_string($_POST['vote']);

    $sql_users_vote = "SELECT * FROM users WHERE id='$image_id'";
    $result_users_vote = $mysqli->query($sql_users_vote);
    $row_vote = mysqli_fetch_array($result_users_vote);
    $votes_count = $row_vote['votes'];
    $new_votes = $votes_count + $vote;

    $sql_vote = "UPDATE users WHERE id='$image_id' SET votes=$new_votes";
   $result_vote = $mysqli->query($sql_vote);
 } 
```

我已经回显了变量，直到 $sql_vote 和 $image_id、$vote、$votes_count 和 $new_votes 都回显出正确的值。我猜 UPDATE 语法有问题。我一遍又一遍地检查它，但似乎找不到任何东西。我知道我在 UPDATE 中没有在 $new_votes 周围加上引号，因为我相信这是正确的语法。我已经用引号试过了，它也不起作用。

有人可以帮我找出问题吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T02:19:48.303

SET 不是在 WHERE 之前吗？

```
$sql_vote = "UPDATE users SET votes = $new_votes WHERE id = '$image_id'" 
```

还是没关系？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T02:18:22.133

```
$sql_vote = "UPDATE users SET votes=$new_votes WHERE id='$image_id'"; 
```

# sql - 如何在此查询中包含等于 0 的计数？

> ID：13576402
> 
> 赞同：1
> 
> 时间：2012-11-27T02:14:40.670
> 
> 标签：sql, postgresql, postgresql-9.1

我的查询

```
select state,count(*) from crm_lead group by state; 
```

哪个返回

```
state   count
done    794
open    560
pending 3
draft   8
cancel  1 
```

但有时当我的桌子上没有“取消”任务时

```
state   count
done    794
open    560
pending 4
draft   8 
```

我想在结果中包含 count = 0，最好的查询是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T02:29:04.967

```
SELECT  a.STATE , 
        COALESCE(b.count, 0) AS Count
FROM 
    (
        SELECT 'done' AS STATE
        UNION
        SELECT 'open' AS STATE
        UNION
        SELECT 'pending' AS STATE
        UNION
        SELECT 'draft' AS STATE
        UNION
        SELECT 'cancel' AS STATE
    ) a LEFT JOIN 
    (
        SELECT  STATE , 
                count(*) AS count
        FROM    crm_lead
        GROUP BY STATE
    ) b ON a.STATE = b.STATE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T02:53:47.437

如果您只想确保取消在列表中，您也可以这样做：

```
select coalesce(t.state, const.state) as state, coalesce(t.cnt, const.cnt) as cnt
from (select state, count(*) as cnt
      from crm_lead
      group by state
     ) t full outer join
     (select 'cancel' as state, 0 as cnt
     ) const
     on t.state = const.state 
```

如果状态列表很长，或者您只想确保包含一个特定值，这可能会很方便。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T02:57:12.150

用[`VALUES`](http://www.postgresql.org/docs/current/interactive/sql-values.html)表达式更简单：

```
SELECT a.state, COALESCE(b.ct, 0) AS ct
FROM (VALUES('done'), ('open'), ('pending'), ('draft'), ('cancel')) a (state)
LEFT JOIN (
   SELECT state, count(*) AS ct
   FROM   crm_lead
   GROUP  BY state
 ) b USING (state); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T05:25:08.473

```
$jsonb = array();
foreach($em as $k => $v) {  
    $q = "
        SELECT  a.STATE , 
        COALESCE(b.count, 0) AS Count
    FROM 
    (
        SELECT 'done' AS STATE
        UNION
        SELECT 'open' AS STATE
        UNION
        SELECT 'pending' AS STATE
        UNION
        SELECT 'draft' AS STATE
        UNION
        SELECT 'cancel' AS STATE
    ) a LEFT JOIN 
    (
        SELECT  STATE , 
                count(*) AS count
        FROM    crm_lead
        WHERE (create_date, create_date) OVERLAPS ('2012-{$nn}-01'::DATE, '2012-{$nn}-{$num}'::DATE)
        GROUP BY STATE
    ) b ON a.STATE = b.STATE
        ";
        $result = retrieve($q);

        $jsona = array();
        $values = array();
        $ev = array();
        foreach($result as $key => $val) {
            $ev[] = $val['count'];
        }

    $jsonb[] = array("label" => $v,"values" =>$ev);
}

$jsona[] = array("label" => array(done,open,pending,draft,cancel),"values" => $jsonb); 
```

这是构造要返回给 JavaScript 的 JSON 对象的完整代码。附言。此代码包含一些不重要的自定义函数，您可能会猜到它们的值。

# prolog - 在序言中加入谓词

> ID：13576403
> 
> 赞同：1
> 
> 时间：2012-11-27T02:14:48.057
> 
> 标签：prolog

我正在使用 SWI-Prolog 在 Prolog 中进行练习，以获取嵌套列表并将其转换为元素列表，然后对元素求和，我制作了两个单独的谓词，这两个谓词使我具有两种功能：

my_flatten(X,[X])->通过将每个列表替换为其元素（递归），将列表（可能将列表作为元素保存）转换为“平面”列表。

```
my_flatten(X,[X]) :- \+ is_list(X).
my_flatten([],[]).
my_flatten([X|Xs],Zs) :-
   my_flatten(X,Y), my_flatten(Xs,Ys), append(Y,Ys,Zs). 
```

addList-> 将列表的所有元素相加并返回它们的总和

```
addList([],0).
addList([X|Xs],N):-
   addList(Xs,N0),N is X+N0. 
```

问题本身是我是 Prolog 中的新编程，我不知道如何将两个谓词连接到同一个谓词中，以便谓词 addList 使用 my_flattern 返回的列表。也许这是一个有点愚蠢的问题，但我已经坚持了好几天了。我需要一些帮助来澄清这个问题的其他问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T05:06:07.167

要构造一个同时执行两者的新谓词，只需使用共享变量同时调用`my_flatten`and `addList`：

```
addListFlattened(L, Sum) :-
    my_flatten(L, L2),
    addList(L2, Sum). 
```

`addListFlattened`是一个新的谓词（您可以更改名称），它重用`addList`.

# javascript - 哪个更快、更干净，生成 AST 并对其进行迭代或生成代码？

> ID：13576405
> 
> 赞同：1
> 
> 时间：2012-11-27T02:15:19.507
> 
> 标签：javascript, parsing, code-generation, interpreter, abstract-syntax-tree

[我使用jison](http://zaach.github.com/jison/)用 Ja​​vaScript为一种小型语言编写了一个解释器，它是 bison 的 JS 端口。该语言用于评估表达式和条件。现在评估与解析混合在一起。

我正在尝试优化它，瓶颈是词法分析器和解析器。所以我决定事先解析它，只在运行时进行评估。

问题是哪个更快或更清洁，之前生成 JS 代码然后只运行它还是生成 AST 并在运行时对其进行迭代？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:03:15.150

一般来说*，更快的总是生成最接近机器代码的任何东西。在您的情况下，生成 javascript 会更快。

生成的 javascript 代码将由底层 C/C++ 解释器直接执行（在某些情况下将 JIT 编译为机器代码）。相比之下，用 javascript 编写自己的 VM 来执行 AST 将在 VM 的附加层 - javascript 上运行。

**注意：在某些极端情况下，解释器有时可以像本机代码一样快速执行。Forth 是一个例子，因为它的解释器非常简单——它只是一个函数指针表。*

# delphi - 数据库网格 - 我可以在第一行而不是第一列显示标题吗？

> ID：13576406
> 
> 赞同：1
> 
> 时间：2012-11-27T02:15:35.793
> 
> 标签：delphi, dbgrid, tdbgrid

我想显示 MIN()、AVG()、MAX() 进行 5 次测量。

鉴于我的屏幕空间，垂直显示我的 DG 网格比水平显示要好得多。

我想要一个 2 列 15 行的 DB 网格，而不是反之亦然。

但是我如何将文本放入第一列（例如“Measurement 1 MIN()”）？我更喜欢使用数据库网格，而不是左侧有 15 个 TLabel 的 1 x 15 表，但我不想在我的数据库中存储“列（实际上是行）标题”。

我希望我清楚地描述了这一点 - 如果没有，请要求澄清 - 并且有人可以提供帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T02:22:30.970

A`DBGrid`显示来自数据源的数据。如果您希望更改输出，请更改数据 - 这意味着您必须改为在查询中进行数据**透视**。（我给了你一个带有粗体文本的搜索词，顺便说一句；你想**旋转**数据。我不能提供更多信息，因为 a）你没有说你正在使用什么数据库，b）那会是一个与 Delphi 无关的单独问题。）

# jquery - $.removeAttr() 调整输入文本的大小

> ID：13576410
> 
> 赞同：0
> 
> 时间：2012-11-27T02:16:26.997
> 
> 标签：jquery

当我在表单输入文本框上使用 jquery`$.removeAttr()`时，它会将文本框的大小调整大约 5 个像素。如果我不使用`$.removeAttr()`，那么文本框将正常工作。什么是交易？

我最终试图从文本框中删除浅灰色斜体 CSS 样式并具有正常样式的黑色文本。

为什么我的文本框要调整大小？

html:

```
<style type="text/css">
   .defaultText{
       color: lightgrey;
       font-style: italic;
   }​
</style>

<script language="javascript" type="text/javascript">
$(document).ready(function() {
    $('#email, #emailconfirm').live('focusin', function() {
        if(this.value == 'Email' || this.value == 'Confirmation Email'){
            $(this).val('').removeAttr('class');
        }            
    });
});

<form id="newsletter"  method="post" action="/mailist/?p=subscribe" name="subscribeform">
    <input type="text" name="email" id="email" class="defaultText" value="Email" autocomplete="on" size="30"/><br/>
    <script language="Javascript" type="text/javascript">addFieldToCheck("email","Email");</script>
    <input type="text" name="emailconfirm" id="emailconfirm" class="defaultText" value="Confirmation Email" autocomplete="off" size="30"/><br/>
    <script language="Javascript" type="text/javascript">addFieldToCheck("emailconfirm","Confirm your email address");</script>
    <input type="submit" id="go" name="subscribe" value="Subscribe" onClick="return checkform();">
</form>​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T04:47:26.077

您可以通过为文本框指定固定宽度来解决此问题。这样，即使您删除了`.defaultText`类，文本框仍设置为定义的宽度。

```
input[type="text"] {
  width: 200px;
}
.defaultText{
  color: lightgrey;
  font-style: italic;
} 
```

[**演示**](http://jsbin.com/iwinuj/5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:38:34.907

因此，通过添加`width: 200px;`到我的`defaultText`课程中，我能够解决这个问题。

```
<style type="text/css">
   .defaultText{
       width: 200px;
       color: lightgrey;
       font-style: italic;
   }​
</style> 
```

# c++ - 成员函数指针指向函数指针？

> ID：13576416
> 
> 赞同：1
> 
> 时间：2012-11-27T02:16:38.327
> 
> 标签：c++, visual-studio-2008-sp1

> **可能重复：**
> [将指向成员函数的指针转换为普通指针](https://stackoverflow.com/questions/4210710/cast-pointer-to-member-function-to-normal-pointer)

有一些代码

```
class TT {
public:
  void set();
  void par1(int, int);
  void par2(double, double);
};

typedef void(*Ptr1)(TT &, int, int);

typedef void(*Ptr2)(TT &, double, double);

void hello(Ptr1, Ptr2){...}

void TT::set()
{
  hello(&TT::par1, &TT::par2);
} 
```

错误显示：

```
error C2664: 'hello' : cannot convert parameter 1 from 'void (__thiscall TT::* )(int,int)' to 'Ptr1' 
```

请告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T02:20:29.443

你想这样做

`typedef void(TT::*Ptr1)(int, int);`
`typedef void(TT::*Ptr2)(double, double);`

并修复 hello 函数以获取指针，`this`因为您需要 this 指针来调用对象上的函数。

```
void hello(TT* obj,Ptr1 x, Ptr2 y){
    (obj->*x)(1,2);
} 
```

查看[这篇文章](http://www.codeproject.com/Articles/7150/Member-Function-Pointers-and-the-Fastest-Possible)以获取有关成员函数指针的更多信息。

# javascript - 我的css有什么问题？- 当我链接本地 css 文件时它不起作用

> ID：13576419
> 
> 赞同：-4
> 
> 时间：2012-11-27T02:16:53.083
> 
> 标签：javascript, html, css, wordpress

所以我有一个客户希望他们的 html/css/javascript 变成 wordpress。现在，我已将大部分代码下载到本地驱动器上。但是css仍然链接到实际的网站。我尝试将代码复制并粘贴到一个新的 css 中，这样我就有了一个本地副本，但是当我这样做并将文件路径从在线代码更改为我的本地文件时，css 中的某些背景图像会消失。我很困惑为什么当我使用与它们相同的代码时它不能正确加载。

这是客户的网站： http: [//gladhillfurniture.com](http://gladhillfurniture.com)

```
body {
   background:url(/custom/gladhill-furniture/images/bg.png) repeat-x 0 0;
   background-color:#eef1ea;
}

#wrapper,#catalog ul,#catalog h2,.browse h2,#ulItemTabs li a,#page-top,#page,#header-top,#header,#nav,#nav ul li,#nav a,li#search div,#footer ul,#footer ul li,#copyright,#sidebar li.widget_search {
   background:none;
}

.browse ul {
   background:url(/custom/gladhill-furniture/images/divider.gif) repeat-x 0 100%;
}

#share ul li a.email {
   background:url(/custom/gladhill-furniture/images/icons/email.gif);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T02:44:55.893

您应该将这些图像存储在本地，并且 css 中的引用路径应该设置为将您的文件系统中的路径解析为相对于您的 css 文件的位置 - 而不是旧文件系统。

# multithreading - 如何访问线程及其组件？

> ID：13576422
> 
> 赞同：0
> 
> 时间：2012-11-27T02:17:19.633
> 
> 标签：multithreading, delphi, thread-safety, local-variables, delphi-xe3

我创建一个线程

```
type 
  ss_thread = class;

  ss_thread = class(TThread)
  protected
    Fff_id : string;
    Fff_cmd : string;
    Fff_host : string;
    Fff_port : TIdPort;
    procedure Execute; override;
  public
    constructor Create(const ff_id, ff_cmd: string; ff_host: string; ff_port: TIdPort);
  end;

constructor ss_thread.Create(const ff_id, ff_cmd: string; ff_host: string; ff_port: TIdPort);
begin
  inherited Create(False);
  Fff_id   := ff_id;
  Fff_cmd  := ff_cmd;
  Fff_host := ff_host;
  Fff_port := ff_port;
end;

...
id := 123;
...

nst_ss_thread.Create(id, cmd, host, port); 
```

并做某事

```
procedure ss_thread.Execute;
var
  ws : TIdTCPClient;
  data : TIdBytes;
  i : integer;
  list : TList;
begin
      ws := TIdTCPClient.Create(nil);
      ws.Host := Fff_host;
      ws.Port := Fff_port;
.... 
```

如何使用 id:=123 of thread 通过另一个线程访问这个线程 'ws' 变量？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T03:47:52.603

这不可以。

您已`ws`在内部声明为局部变量`ss_thread.execute`，这意味着它仅在此处可见。外面看不到`ss_thread.execute`，其他地方也看不到`ss_thread`。

如果您希望它从其他地方或线程可见，则需要将其移动到更可见的范围。例如，如果您希望它从 中的其他地方可见，请将其移动到或部分`ss_thread`中的接口声明，如果您希望它从外部可见，请将其移动到或部分。`private``protected``ss_thread``published``public`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T08:09:43.590

你最好不要。线程对象正是为了将其变量与其他线程隔离开来。
否则会出现各种随机不可重现的错误 - [http://en.wikipedia.org/wiki/Heisenbug](http://en.wikipedia.org/wiki/Heisenbug)

[并行编程](http://en.wikipedia.org/wiki/Parallel_programming)应该有非常明确的分离和绝缘。因为您永远无法预测执行的时间以及哪个语句会更早运行以及哪个语句会更晚运行。

想象一下这个简单的场景：

```
 ws := TIdTCPClient.Create(nil);
  ws.Host := Fff_host;
      // at this point another thread gets access to ws variable, 
      // as You demanded - and changes it, so WS gets another value!
  ws.Port := Fff_port; 
```

如果它每月只在重负载的客户端多处理器计算机上发生一次，您将如何检测到这样的错误？在调试会话或模拟期间在您的工作站中，它永远不会被复制！你将如何抓住它并修复它？

根据经验，在进行并行编程时，数据应该被分成“共享不可变”和“私有可变”部分，并且在进行线程间通信时，你应该 - 类似于进程间通信 - 使一些事件/消息排队向/从线程传递命令和[回复](http://en.wikipedia.org/wiki/Actor_model)，就像在 Windows GDI 中或在 MPI 中一样

然后，您的线程将从队列中获取“更改 ws 变量”命令 - 在允许更改的适当时刻 - 并从内部更改它。因此，您将承担控制并确保变量仅在该点和以这种方式更改，这不会使代码流脱轨。

我建议您阅读 OTL 示例，以了解如何以比直接访问对象更安全的方式完成线程间通信。[http://otl.17slon.com/tutorials.htm](http://otl.17slon.com/tutorials.htm)

# php - Doctrine2 Mapping：2 个字段映射到一个字段（ManyToOne）

> ID：13576423
> 
> 赞同：8
> 
> 时间：2012-11-27T02:17:36.657
> 
> 标签：php, orm, doctrine-orm

我有 2 个实体，即 Match 和 Team。一个团队可以有一对多的比赛。但是，我的 Match 实体 consts 的 2 个字段引用了相同的实体 Team。他们是 $homeTeam 和 $awayTeam。如何将 Team 中的相同字段 $matches 引用为双向关系？

我当前的非工作代码如下：

我的匹配实体：

```
/**
 * @ORM\Entity
 * @ORM\Table(name="match")
 **/
class Match {

    /**
     * @ORM\ManyToOne(targetEntity="Team", inversedBy="matches")
     * @ORM\JoinColumn(name="home_team_id", referencedColumnName="id")
     * **/
    protected $homeTeam;

    /**
     * @ORM\ManyToOne(targetEntity="Team", inversedBy="matches")
     * @ORM\JoinColumn(name="away_team_id", referencedColumnName="id")
     * **/
    protected $awayTeam; 
```

我的团队实体（我认为不正确？）：

```
/**
 * @ORM\Entity
 * @ORM\Table(name="team")
 * **/
class Team {

    /** @ORM\OneToMany(targetEntity="Match", mappedBy="homeTeam", mappedBy="awayTeam") **/
    protected $matches; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T07:00:55.887

在探索了[Doctrine 的官方文档](http://docs.doctrine-project.org/en/latest/reference/annotations-reference.html)之后：你不能添加多个`mappedBy`列。取而代之的是，您可以选择：

1.  创建自定义存储库`Match`并定义方法`getAllMatchesForTeam($team)`
2.  在和那里定义适当的关系`$homeMatches`和`$awayMatches`+方法和联合结果`getAllMatches()``Team``$homeMatches``$awayMatches`

在这里阅读更多：

1.  [https://stackoverflow.com/questions/13922047/symfony2-doctrine2-how-to-implement-methods-on-entity-to-retrieve-related-ent](https://stackoverflow.com/questions/13922047/symfony2-doctrine2-how-to-implement-methods-on-entity-to-retrieve-related-ent)
2.  [Custom repository class in Symfony2](https://stackoverflow.com/a/8148065/541961)
3.  [Fetching data through a custom repository in a Twig extension](https://stackoverflow.com/questions/8450465/fetching-data-through-a-custom-repository-in-a-twig-extension)
4.  [How can I access a service outside of a controller with Symfony2?](https://stackoverflow.com/questions/6124444/how-can-i-access-a-service-outside-of-a-controller-with-symfony2/6127711#6127711)

# knockout.js - knockoutjs - 使用外部表单从网格编辑项目

> ID：13576426
> 
> 赞同：1
> 
> 时间：2012-11-27T02:17:53.690
> 
> 标签：knockout.js

我正在尝试从网格中添加/加载记录，在网格之外对其进行编辑并更新 observablearray 和 UI。

演示：http: [//jsfiddle.net/DiegoVieira/ckMJE/98/](http://jsfiddle.net/DiegoVieira/ckMJE/98/)

您会注意到，添加或编辑没有按预期工作。如果我添加一个新项目，它确实会添加到数组中并反映 UI，但是下次我添加另一个项目时，旧项目会被添加到位。

数据是从服务器中提取的，它有 30 多个属性，因此构建对象时每个属性都为 ko.observable 不是一种选择。

例如

```
 $.get('api/objects', function (data) {
        self.stones(data.stones); // when the vm loads, this is empty
        self.stone(data.stone); // when the vm loads, this is empty
    }); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T02:52:57.500

通常，您希望使属性可观察。

如果这是不可能的，那么一种选择是删除该项目并将其重新添加到数组中，以便实际重新渲染它。

当您添加“模板”石头时，您会希望它是一个副本。`ko.toJS`是获取副本的快速方法。

因此，您可以执行以下操作：

```
self.addStone = function () {
    self.stonesArray.push(ko.toJS(self.stoneData));  
}; 
```

并将其保存为：

```
self.saveStone = function (item) {
    var index = self.stonesArray.indexOf(item);
    self.stonesArray.remove(item);
    self.stonesArray.splice(index, 0, item);
    self.selectedStone(null);
}; 
```

示例：http: [//jsfiddle.net/rniemeyer/ckMJE/99/](http://jsfiddle.net/rniemeyer/ckMJE/99/)

# c++ - 如何用 C++ 找到斐波那契数列？

> ID：13576430
> 
> 赞同：-3
> 
> 时间：2012-11-27T02:18:06.853
> 
> 标签：c++

我正在尝试解决Project Euler 上的[问题 2](https://projecteuler.net/problem=2)。问题是：

“斐波那契数列中的每个新项都是通过添加前两项来生成的。从 1 和 2 开始，前 10 个项将是：

1, 2, 3, 5, 8, 13, 21, 34, 55, 89, ...

通过考虑斐波那契数列中值不超过四百万的项，求偶数项之和。”

我正在尝试用 C++ 解决这个问题。

到目前为止，这是我的代码

```
#include <iostream>
 using namespace std;

int main()
{
    //ANSWER = 4613732
    int max = 4000000;
    int n;
    int sum;

    for(n=0; n<=max;)
    {
        while(n%2 == 0)
        {
            n = (n-1)+(n-2);
        }
    }
    sum = n+=0;
    cout << sum << endl;
    return 0;
} 
```

如您所见，我通过搜索它来检查我的答案知道正确答案。我刚刚永远运行的这段代码永远不会显示答案。任何人都可以给我提示如何得出这个答案并帮助改进我的 C++ 代码。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T03:48:20.547

这是您不应该遵循的方法。（注意：这篇文章是个玩笑，但我很认真地不想遵循这种方法。尝试以你对 C++ 的理解水平来理解这种方法也是不明智的。）

```
#include <iostream>

struct Fib
{
  template<int n, int first=1, int second=1> struct Eval { enum {value = Eval<n-1, first, second>::value + Eval<n-2, first, second>::value}; };
  template<int first, int second> struct Eval<1, first, second> { enum {value = second}; };
  template<int first, int second> struct Eval<0, first, second> { enum {value = first}; };

};
struct SpecificFib
{
  template<int n> struct Eval { enum{ value = Fib::template Eval<n, 1, 2>::value }; };
};

template<int... values> struct Sequence {};
template<typename Seq, int n> struct Append;
template<int... values, int n> struct Append<Sequence<values...>, n> { typedef Sequence<values...,n> type; };
template<typename Seq, int n> struct Prepend;
template<int... values, int n> struct Prepend<Sequence<values...>, n> { typedef Sequence<n, values...> type; };

template<typename Func,typename Seq,typename Test=void> struct Filter;

template<typename Func,int first, int... values>
struct Filter<Func,Sequence<first,values...>,typename std::enable_if< Func::template Eval<first>::value>::type>
{
  typedef typename Prepend<typename Filter<Func,Sequence<values...>>::type,first>::type type;
};

template<typename Func,int first, int... values>
struct Filter<Func,Sequence<first,values...>,typename std::enable_if< !Func::template Eval<first>::value>::type>
{
  typedef typename Filter<Func,Sequence<values...>>::type type;
};
template<typename Func> struct Filter<Func,Sequence<>> { typedef Sequence<> type; };

struct IsEven {
  template<int n> struct Eval { enum{ value = !(n%2) }; };
};

template<typename Func,typename Seq> struct Map;
template<typename Func,int first, int... values>
struct Map<Func, Sequence<first,values...>>
{
  typedef Sequence<values...> Tail;
  typedef typename Map<Func,Tail>::type TailMapped;
  enum { firstMapped = Func::template Eval<first>::value };

  typedef typename Prepend<TailMapped,firstMapped>::type type;
};
template<typename Func>
struct Map<Func,Sequence<>>
{
  typedef Sequence<> type;
};

template<int begin, int end>
struct generate_sequence
{
  template<int current, int... values>
  struct helper: helper<current-1, current-1, values...> {};
  template<int... values>
  struct helper<begin, values...>
  {
    typedef Sequence<values...> type;
  };
  typedef typename helper<end>::type type;
};
template<typename Seq> struct Sum;
template<int first, int... values> struct Sum<Sequence<first, values...>> { enum {value = first + Sum<Sequence<values...>>::value}; };
template<> struct Sum<Sequence<>> { enum {value = 0}; };

template<typename Seq1, typename Seq2=Sequence<>>
struct Reverse { typedef Seq2 type; };

template<int first, int... values, typename Seq2>
struct Reverse<Sequence<first,values...>, Seq2>:Reverse<Sequence<values...>, typename Prepend<Seq2,first>::type> {};

template<typename Seq, char sep=','> struct PrintHelper;
template<int first, int second, int... values, char sep> struct PrintHelper<Sequence<first,second,values...>, sep>:PrintHelper<Sequence<second,values...>, sep>
{
  PrintHelper() { std::cout << sep << first; }
};
template<int last, char sep> struct PrintHelper<Sequence<last>, sep>:PrintHelper<Sequence<>, sep>
{
  PrintHelper() { std::cout << last; }
};
template<char sep> struct PrintHelper<Sequence<>,sep> { PrintHelper() {} void Do() const {} };
template<typename Seq, char sep=','> struct Print: PrintHelper< typename Reverse<Seq>::type, sep >
{};

typedef typename generate_sequence<0, 10>::type ZeroTo9;
typedef typename Map<SpecificFib,ZeroTo9>::type First10Fibs;
typedef typename Filter<IsEven,First10Fibs>::type First10FibsThatAreEven;

template<typename Sequence>
void PrintSomeInfo( std::string const& name )
{
  std::cout << name << " {";
  Print<Sequence>();
  std::cout << "} sums to " << Sum<Sequence>::value << "\n";
}
int main()
{
  PrintSomeInfo<ZeroTo9>("Zero to 9");
  PrintSomeInfo<First10Fibs>("First 10 fibs");
  PrintSomeInfo<First10FibsThatAreEven>("First 10 fibs that are even");
} 
```

我希望这会有所帮助。

我在上面做的是玩模板编程。我正在使用功能强大的 C++ 类型系统推断答案，这样如果编译器正确编译`Sum<Sequence>::value`，它将是单个编译时值。

从技术上讲，这是您用 C++ 编写的问题的答案。作为奖励，它将有`O(1)`运行时间。:)

...

更严重。*你需要一步一步*地解决你的问题。

编写一个程序，输出序列的前 10 个元素。我会说“像上面那样”，但你应该以你理解的方式去做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T03:05:22.423

让我们一步一步分析你的代码，看看你哪里出错了：

```
 //ANSWER = 4613732
    int max = 4000000;
    int n;
    int sum;

    for(n=0; n<=max;)
    { 
```

让我们停在这里......这个循环做什么？它从 0 开始循环，直到 n 等于 4000001。问题描述要求您对不超过 4000000 的偶数斐波那契项求和。因此，本质上，您将`n`其视为存储斐波那契数的变量。好的...

```
 while(n%2 == 0)
        { 
```

现在这段代码做了什么？`n`它在偶数时循环。你为什么想这么做？

```
 n = (n-1)+(n-2); 
```

好的。那么这是怎么计算的呢？它有点，有点像可以计算斐波那契数的东西。但真的吗？让我们检查！你从`n = 0`. 请注意，`0 % 2 == 0`您将执行此代码，它将 n 设置为：(0 - 1) + (0 - 2) = 0 - 1 + 0 - 2 = -3。然后循环将退出，因为 -3 不是偶数。

但是……等等，-3 不是斐波那契数！

请记住，斐波那契数，我们称之为 F(n)，用以下公式定义：F(n) = F(n - 1) + F(n - 2)，特殊情况为 F(0) = 0并且 F(1) = 1。换句话说，斐波那契数是前两个斐波那契数的和。

那么现在，你写的表达式计算斐波那契数了吗？

顺便说一句，此时您应该能够看到为什么这段代码只是运行和运行，运行和运行......如果没有，请记住是什么`n`并检查`for`循环。会发生什么？

我会给你答案；它可能有点太复杂了，但是如果您花时间在纸上逐步完成它*并*像计算机一样工作，逐行执行每一步，您将看到它是如何工作的，并更好地理解 C 和 C++ 和如何将算法和数学概念转化为代码。

```
#include <iostream>
using namespace std;

int main(int argc, char **argv)
{           
    // We store the last 2 Fibonacci numbers that we calculated in this 
    // small array to improve the performance of our routine and avoid
    // having to recalculate things all the time. We update it as we go
    // and initialize it with the values for fib(0) and fib(1)

    int max = 4000000, ans = 4613732, sum = 0, lfi = 0, lfn = 1;
    int lastfibs[2] = { 0, 1 }; 

    do  
    {
        // Calculate the next fibonacci number in the sequence
        lfn = lastfibs[0] + lastfibs[1];

        // And store it in our cache, updating the cache index
        lastfibs[lfi++] = lfn;

        if(lfi == 2) // "round and round you're turning me..."
            lfi = 0;                

        if((lfn & 1) == 0) // An even Fibonacci number! Add it to the sum
            sum += lfn;
    } while(lfn <= max);

    if(sum != ans)
        cout << "BOO! The sum is " << sum << " but it's supposed to be " << ans << "!" << endl;
    else
        cout << "Yay! The sum is " << sum << "! Thanks StackOverflow!" << endl;

    return 0;
} 
```

我希望它可以帮助*您* **思考**问题并*提出自己的解决方案*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-18T15:37:47.487

```
bool Ctest::fibonacci(int *fibo, int length)
{   
int m = 2, n =1,d,q;
int flag;

if(fibo[0]==0 && fibo[1]==1 && fibo[3]==1)
    flag = 1;

for(int i =3; i<length; i++)
{
    if(fibo[i] == m)
    {
     flag = 1;
    }
    else 
    {
        flag = 0;
    }

    d = m;
    q = m+n;
    m=q;
    n=d;
}

if (flag == 0)
{
    return TRUE;
}
else
    return FALSE; 
```

}

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-07-18T05:59:02.557

```
x = 1;
y = 1;
sum = 0;
a = 0;

while ( x < 4000 ) {
  if ( (x % 2) == 0 ){
    a = x + a;   
  }
print "x\n";
sum = x + y;
x = y;
y = sum;
}
print "\na\n"; 
```

繁荣

# html - 如何以一对一的关系为子操作添加视图给定下面的 Create 方法？

> ID：13576433
> 
> 赞同：0
> 
> 时间：2012-11-27T02:18:29.870
> 
> 标签：html, asp.net-mvc-4, entity-framework-5, asp.net-4.5, razor-2

我有 3 个实体类；团队、团队联系人和团队地址。

**关系**

```
-Team one-to-one TeamContact
-TeamContact one-to-on TeamAddress 
```

**创建方法**

```
[HttpPost]
    public ActionResult Create(Team model)
    {
        if (ModelState.IsValid)
        {
            new Team
                {
                    Name = model.Name,
                    Division = model.Division,
                    Description = model.Description,

                    TeamContact = new TeamContact
                                        {
                                            EmailAddress = model.TeamContact.EmailAddress,
                                            PhoneNumber = model.TeamContact.PhoneNumber,

                                            TeamAddress = new TeamAddress
                                                            {
                                                                Box = model.TeamContact.TeamAddress.Box,
                                                                StreetName = model.TeamContact.TeamAddress.StreetName,
                                                                StreetNumber = model.TeamContact.TeamAddress.StreetNumber,
                                                                City = model.TeamContact.TeamAddress.City,
                                                                PostalCode = model.TeamContact.TeamAddress.PostalCode,
                                                                Province = model.TeamContact.TeamAddress.Province
                                                            }
                                    }
                };
            _dataSource.Save();
        }
        return View(model);
    } 
```

我的问题是，当我尝试为创建视图搭建脚手架时，只有实体 Team 的标签和字段在搭建脚手架。该视图正在针对团队实体进行强类型化，我的猜测是这就是我的问题的根源所在。见下文。

**创建视图**

```
@model Soccer.Domain.Entities.Club.Team

 @{
    ViewBag.Title = "Create";
   }

   <h2>Create</h2>

 @using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

     <fieldset>
        <legend>Team</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.Name)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Name)
        @Html.ValidationMessageFor(model => model.Name)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Division)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Division)
        @Html.ValidationMessageFor(model => model.Division)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Description)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Description)
        @Html.ValidationMessageFor(model => model.Description)
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
} 
```

**团队**

```
namespace Soccer.Domain.Entities.Club
    {
       public class Team
       {
          //Holds players into a specific teams
          [HiddenInput(DisplayValue = false)]
          public virtual int Id { get; set; }

          [Display(Name = "Full Name:")]
          public virtual string Name { get; set; }

         //Current playing division
         [Display(Name = "Division:")]
         public virtual string Division { get; set; }

         [Display(Name = "About the team:")]
         [DataType(DataType.MultilineText)]
         public virtual string Description { get; set; }

         public virtual TeamContact TeamContact { get; set; }

         public virtual ICollection<Player> Players { get; set; }
     }
} 
```

**团队联系**

```
 namespace Soccer.Domain.Entities.Club
   {
      public class TeamContact
      {
        [Key]
        [ForeignKey("Team")]
        [HiddenInput(DisplayValue = false)]
        public virtual int TeamId { get; set; }

    [DataType(DataType.EmailAddress)]
    [Display(Name = "Email:")]
    public virtual string EmailAddress { get; set; }

    [DataType(DataType.PhoneNumber)]
    [Display(Name = "Phone:")]
    public virtual string PhoneNumber { get; set; }

    public virtual Team Team { get; set; }

    public virtual TeamAddress TeamAddress { get; set; }
  }
} 
```

**团队地址**

```
namespace Soccer.Domain.Entities.Club
{
  public class TeamAddress
  {
      //Team Mailing address
      [Key]
      [ForeignKey("TeamContact")]
      [HiddenInput(DisplayValue = false)]
      public virtual int TeamContactId { get; set; }

    [Display(Name = "P.O.Box:")]
    public virtual string Box { get; set; }

    [Display(Name = "Street Name:")]
    public virtual string StreetName { get; set; }

    [Display(Name = "Street Number:")]
    public virtual string StreetNumber { get; set; }

    [Display(Name = "City:")]
    public virtual string City { get; set; }

    [Display(Name = "Postal Code:")]
    public virtual string PostalCode { get; set; }

    [Display(Name = "Province:")]
    public virtual string Province { get; set; }

    public virtual TeamContact TeamContact { get; set; }
   }
 } 
```

我该怎么做才能通过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:23:55.243

您可以在视图中使用 EditorTemplate，它将在 Team 对象的上下文中呈现内容，以便模型绑定器在您发布表单时工作

1) 在当前视图所在的文件夹中，创建一个名为“EditorTemplates”的子文件夹

2) 在此文件夹中创建一个新的局部视图，将其命名为与您要搭建的模型相同的名称，例如 TeamContact

3) 在 TeamContact 模型的新视图中编写 HTML

4) 在您当前的团队视图中，您现在可以执行此操作...

```
@Html.EditorFor(model => model.TeamContact) 
```

MVC 将识别出您有一个用于此对象类型的自定义模板，并将使用您的局部视图来呈现页面。

当您查看 HTML 页面中的标记时，您会看到它将控件呈现为

```
Team.TeamContact.EmailAddress 
```

...为 TeamContact 提供针对 Team 对象的上下文。

编辑器模板非常适合这类事情，特别是如果您有一组子对象 - MVC 将正确索引视图中的所有项目

One additional thing, you should probably consider splitting out your 'entity domain' objects from what you are trying to render in the view. View Models are used for this, and allow you to keep your domain\data objects out of the presentation layer.

# php - PHP mysqli 连接到远程数据库

> ID：13576443
> 
> 赞同：0
> 
> 时间：2012-11-27T02:19:38.800
> 
> 标签：php, mysqli

第一次尝试连接到与我的站点不在同一主机上的数据库并且运气不佳。数据库位于 Godaddy 主机上，我已将其配置为允许远程访问：

```
$dbc = mysqli_connect($db_host,$db_user,$db_pass,$db_name);

if (!$dbc) {
    die('Connect Error: ' . mysqli_connect_error());
} 
```

我在页面上得到以下信息：

> 警告：mysqli_connect() [function.mysqli-connect]: [2002] 第 3 行 'path' 中的连接超时（尝试通过 'mydbhostname:3306 连接）
> 
> 警告：mysqli_connect() [function.mysqli-connect]: (HY000/2002): Connection timed out in 'path' on line 3
> 
> 连接错误：连接超时

我需要在我的最后寻找什么或脚本中可能导致这种情况的东西？

编辑：好吧，当我使用 mysql 时，似乎一切正常，但不是 mysqli ...并且在服务器上启用了 mysqli。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-28T11:44:44.800

我在 Digitalocean Ubuntu 14.04 服务器上遇到了同样的问题，其中防火墙配置是罪魁祸首。ufw 防火墙规则不允许 Mysql 在端口 3306 上使用。

解决方案：

```
$ sudo ufw status
$ sudo ufw allow mysql
$ sudo ufw reload 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:25:07.870

确保您为数据库插入了正确的主机名，在这里您可以看到如何在 Godaddy 主机上执行此操作：

*   [http://support.godaddy.com/help/article/4978/connecting-remotely-to-shared-hosting-databases](http://support.godaddy.com/help/article/4978/connecting-remotely-to-shared-hosting-databases)
*   [http://support.godaddy.com/help/article/39/locating-your-databases-host-name?locale=en](http://support.godaddy.com/help/article/39/locating-your-databases-host-name?locale=en)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-31T00:33:28.080

我不明白 mysqli 和 mysql 之间的区别，但我在 GoDaddy 上发现使用：

mysqli_connect 不起作用。mysql_connect 确实有效。

尝试使用以下示例代码来查看是否可以连接到需要至少一个表中的数据的数据库：

```
<?php
//Variables for connecting to your database.
//These variable values come from your hosting account.
$hostname = "XXXXXXX.db.XXXXXXXX.hostedresource.com";
$username = "XXXXXXX";
$dbname = "XXXXXXX";

//These variable values need to be changed by you before deploying
$password = "XXXXXXX";
$usertable = "XXXXXXX";
$yourfield = "XXXXXXX";

//Connecting to your database
mysql_connect($hostname, $username, $password) OR DIE ("Unable to
connect to database! Please try again later.");
mysql_select_db($dbname);

//Fetching from your database table.
$query = "SELECT * FROM $usertable";
$result = mysql_query($query);

if ($result) {
    while($row = mysql_fetch_array($result)) {
        $name = $row["$yourfield"];
        echo "<h2>some data</h2>";
        echo "$name<br>";
    }
}
?> 
```

# backbone.js - 实例化主干模型

> ID：13576451
> 
> 赞同：1
> 
> 时间：2012-11-27T02:20:32.723
> 
> 标签：backbone.js

当我实例化模型的新实例时，我经常遇到错误。任何人都可以窥探错误吗？

```
Uncaught TypeError: Object [object Object] has no method 'apply' 
```

脚本：

```
(function() {
    var Ticket = new Backbone.Model.extend({
        urlRoot: "/api/tickets",
        Subject: "",
        Created: null
    });

    var TicketView = new Backbone.View.extend({
        Model: Ticket,
        el: "body",
        render: function() {
            return this.$el.html(this.Model.Subject);
        }
    });

    // Error here
    var t = new Ticket();
    var tv = new TicketView({ model: t });

    tv.render();

})() 
```

html:

```
<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.2/underscore-min.js" type="text/javascript"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js" type="text/javascript"></script>
</head>
<body>
    <div>
        <div id="Main">Main</div>
    </div>
        <script type="text/javascript" src="/Scripts/Home_Index.js"></script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T02:26:51.093

删除`new`扩展模型和视图的行上的关键字。

# java - 在Java中序列化然后在C++中反序列化？

> ID：13576452
> 
> 赞同：2
> 
> 时间：2012-11-27T02:20:37.663
> 
> 标签：java, c++

我有一个 java 程序，它将（通过 TCP）数据包发送到 c++ 程序。只会发送两种类型的对象（结构 A 或结构 B）。我需要序列化这两个对象并将它们发送到 c++ 程序，这样当在 c++ 程序中反序列化时，它们将属于 struct A 或 struct B 类型，具体取决于发送的内容。如果没有任何外部 java 包，我怎样才能实现这一点？

```
 struct A
            {
                unsigned int field1; 
                unsigned int field2; 
            }

            struct B
            {
                unsigned int length;
                struct A list[GLOBALLENGTH];
            } 
```

GLOBALLENGTH 是一个静态的全局整数。

请注意，我不需要通用解决方案，因为我将严格处理上述类型。另外，我无法访问 c++ 程序（它是一个黑盒），两者都以小印度语操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T02:50:54.157

听起来 c++ 程序需要每个结构中的数据的原始转储，没有填充，按小端顺序，字段按声明的顺序，使用 32 位整数。如果一切正确，这里有一种写入字节供 c++ 程序使用的方法：

```
private static final int A_SIZE = 8;
private static final int B_SIZE = 4 + GLOBALLENGTH * 8;

public byte[] writeA(A a) {
    byte[] bytes = new byte[A_SIZE];
    writeA(a, bytes, 0);
    return bytes;
}

private void writeA(A a, byte[] bytes, int offset) {
    ByteBuffer buff = ByteBuffer.wrap(bytes, offset, A_SIZE);
    buff.order(ByteOrder.LITTLE_ENDIAN);
    buff.putInt(a.field1).putInt(a.field2);
}

public byte[] writeB(B b) {
    byte[] bytes = new byte[B_SIZE];
    ByteBuffer buff = ByteBuffer.wrap(bytes, 0, 4);
    buff.order(ByteOrder.LITTLE_ENDIAN);
    buff.putInt(b.length);
    int offset = 4;
    for (A a : b.list) {
        writeA(a, bytes, offset);
        offset += A_SIZE;
    }
    return bytes;
} 
```

然后，您可以调用适当的公共方法（`writeA(A)`或`writeB(B)`）并将字节发送到服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T02:25:07.330

Java 使用的序列化算法就 Java 语言而言是标准的；您不能从 C/C++ 程序中反序列化此类对象，除非您为此目的使用外部 C/C++ 库。

反之亦然：您不能将 C/C++ 序列化的对象反序列化为 Java，除非您使用某种外部包。

那么，最好的选择是提出自己的协议并根据它进行序列化。您必须为您的协议编写 Java 和 C/C++ 实现。

# google-apps-script - Google Apps 脚本小工具无法加载应用程序

> ID：13576457
> 
> 赞同：0
> 
> 时间：2012-11-27T02:22:10.980
> 
> 标签：google-apps-script, google-sites

我使用sites.coogle.com/a/ 创建了一个站点，并编写了一个列在ManageSite-AppsScripts 下的google 脚本。该脚本从 Google Docs 电子表格中提取数据以填充用户表单上的两个列表框；在提交时，它会发送一封电子邮件并将活动记录到另一个 Google 文档表中。该脚本被授权运行并部署为 Web 应用程序，以“我”身份执行并允许访问“任何人，甚至匿名”。该应用程序已使用 Insert-AppsScriptGadget 添加到网页，并从网站上可用的应用程序列表中选择该应用程序（仅一个）。

该应用程序在我登录时加载并正确运行，但在一般用户加载网页时不加载。所述错误是“拒绝显示文档，因为 X-Frame-Options 禁止显示。”

但是，当我向 Web 应用程序提供一个普通的超文本链接，以便它作为独立的 html 页面加载到 Google Chrome 浏览器中时，该应用程序确实会加载并为普通 Web 用户成功运行。

我希望该应用程序显示为嵌入在页面中的应用程序脚本小工具。谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T03:03:24.983

我不确定你的情况有什么问题。您能否查看[此处](https://developers.google.com/apps-script/execution_gadgets)提供的说明，以检查您是否正确执行了这些步骤。如果您仍然看到问题，您可以将其归档到[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/entry)中。

还要确认，如果您正在为您的 Google 网站使用自定义域。如果是这样，Google Apps 脚本小工具将无法工作。

# database-design - 如何有效地查询数据库中的用户“项目”？（亚马逊 SimpleDB）

> ID：13576459
> 
> 赞同：0
> 
> 时间：2012-11-27T02:22:20.690
> 
> 标签：database-design, amazon-simpledb

抱歉，如果以前有人问过这个问题，我想不出如何提出这个问题。

我有一个使用 2 个域的数据库（特别是在亚马逊 SimpleDB 中）。

*   域 1 有一个包含一些一般信息的用户列表。

*   域 2 是具有项目信息的项目列表。

我希望能够从域 1 中查询属于特定用户的所有项目。为此，每个项目只能属于 1 个用户，因此域 2 的属性之一是用户 ID。

直到知道我认为最好的选择是在域 1 中保留一个属性，其中包含该用户拥有的项目列表（类似于 item1&&item2&&item3&&...等），然后只查询这个属性。我认为这会使其非常高效，但是我意识到属性限制是 1024 字节，所以我最终会用完空间（因为我的项目名称有点长）。

在这种情况下，我认为每次我想获取所有用户项目时，我都必须在 Domain2 中执行“select * where userID = something”，但不知何故，这似乎并不那么有效。（我仍然可以保留域 1 中的最后更新和项目数量，以查看我的本地设备是否需要查询，或者它是否在本地具有最新版本）。

任何建议都会很棒！

（或者我应该在stackoverflow中问这个数据库吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:14:20.660

我不知道 amazon-simpledb，但在数据库方面，你有两个表：第一个是 USERS 表，它可能至少存储一个用户 ID 和用户名；第二个是存储项目 ID、项目名称及其当前所有者/用户的项目表。

您不想将用户拥有的项目列表存储在用户表的分隔列表中；遍历这个列表会很痛苦。除此之外，数据（哪些用户拥有哪些项目）已经存在于项目表中。

在标准 SQL 中，您将编写以下查询来检索特定用户拥有的项目列表

```
select items.name
from items inner join users
on items.user = users.id
where users.username = 'Luis' 
```

标准数据库是为处理具有数百万条目的表而构建的，因此不必担心效率（至少，只要添加适当的索引 - 您需要在 items 表中的“用户”字段上建立索引）。

# javascript - 使用 jQuery 从 Minecraft.net 获取会话

> ID：13576465
> 
> 赞同：-6
> 
> 时间：2012-11-27T02:22:56.257
> 
> 标签：javascript, jquery, ajax, minecraft

> **可能重复：**
> [XmlHttpRequest 错误：Access-Control-Allow-Origin 不允许 Origin null](https://stackoverflow.com/questions/3595515/xmlhttprequest-error-origin-null-is-not-allowed-by-access-control-allow-origin)

我正在尝试使用 jQuery 从 Minecraft.net 获取会话 ID 和内容

```
https://login.minecraft.net?user=<username>&password=<password>&version=99999 
```

但我无法得到它，因为有“Access-Control-Allow-Origin”。我从服务器收到的数据甚至不是 json，这对我来说更难弄清楚如何使用 javascript 获取数据。我这样做是为了让用户不会因为怀疑我试图窃取他们的帐户而发疯。

这就像我收到的一样

```
1343825972000:deprecated:SirCmpwn:7ae9007b9909de05ea58e94199a33b30c310c69c:dba0c48e1c584963b9e93a038a66bb98 
```

在这里阅读更多。[http://www.wiki.vg/Authentication#Login](http://www.wiki.vg/Authentication#Login)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T02:29:04.033

在该用户安装的插件之外，您无法在浏览器中执行此操作。

如果您想访问该 url 并获取这些值，则需要使用服务器端浏览器。像 mechanize 或 phantomjs 这样的东西非常适合这种事情。

# ruby-on-rails - 如何使 HAML 将 HTML 输出为 HTML，而不是编码文本

> ID：13576469
> 
> 赞同：1
> 
> 时间：2012-11-27T02:23:30.107
> 
> 标签：ruby-on-rails, haml

我的大多数 HAML 都可以正常工作，但是以下行...

```
%td= user.roles.map { |r| link_to(r.name, r)}.join(', ') 
```

...返回...

```
<td>
  &lt;a href=&quot;/roles/1&quot;&gt;admin&lt;/a&gt;
</td> 
```

...当我自然希望它返回时...

```
<td>
  <a href='/roles/1'>
    admin
  </a>
</td> 
```

以下不能解决这种情况：

```
%td= user.roles.map { |r| link_to(r.name, r).html_safe}.join(', ') 
```

我应该怎么办？

史蒂文。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T02:30:04.187

```
%td= user.roles.map { |r| link_to(r.name, r)}.join(', ').html_safe 
```

不过要小心在视图中包含所有这些逻辑。您可以通过为集合中的每个项目呈现一个部分，或者为您创建一个辅助方法来实现类似的目标。它会读起来更干净：

```
%td= role_links_for_user 
```

或者

```
= render user.roles 
```

# android - 将地址转换为地理点

> ID：13576470
> 
> 赞同：2
> 
> 时间：2012-11-27T02:23:34.513
> 
> 标签：android, google-maps

我希望用户输入他想通过使用 google places api 搜索附近地点的位置。我想知道如何将字符串转换为地理点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T04:42:23.530

你可以通过简单地调用 getFromLocationName()

```
Geocoder geoCoder = new Geocoder(context, Locale.getDefault());     
 try {
        List<Address> address = geoCoder.getFromLocationName(locationName, 1);    
        double latitude = address.get(0).getLatitude();
        double longitude = address.get(0).getLongitude();            
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:00:24.813

您可以使用`android.location.Geocoder`Android 中的类来获取纬度/经度。在此处查看文档：http: [//developer.android.com/reference/android/location/Geocoder.html](http://developer.android.com/reference/android/location/Geocoder.html)

如果您更喜欢外部 API，则可以使用 Google Geocoding API。文档在这里：[https ://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)

查看此线程以获取更多信息/用法：[Android geopoint from location/locality](https://stackoverflow.com/questions/10167819/android-geopoint-from-location-locality)

# android - JSON游戏状态：文件与sqlite条目？

> ID：13576472
> 
> 赞同：0
> 
> 时间：2012-11-27T02:23:42.780
> 
> 标签：android, storage

我正在使用 AndEngine 创建一个简单的 2D 游戏。`onPauseGame()`我计划在框架提供的方法中将游戏状态保存在一个 JSON 对象中，并从`onResumeGame()`. 我不确定我应该如何保存 JSON 对象。我应该将它保存在 sqlite DB 中还是应该只使用常规文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T03:03:46.573

我建议您使用基于文件的方法来保持简单。或者，您也可以查看[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)来保存数据。后一种方法使用更简洁的 API 更简单。

# ios - iOS POST 到 Rails - 参数不包含 :modelname 的值

> ID：13576476
> 
> 赞同：1
> 
> 时间：2012-11-27T02:24:20.920
> 
> 标签：ios, ruby-on-rails-3, cocoa-touch, asiformdatarequest

我有一个可以响应 HTML 和 JSON 客户端请求的 rails 3 控制器。这个控制器有一个“create”方法，它创建一个新的“用户”模型对象，其值发布在 params[:user] 中。当用户参数值从 HTML 表单发布时，这将按预期工作。但是，当从 JSON 客户端（在我的情况下为 iOS）发布到此操作时，params[:user] 为 nil；我确实注意到，如果直接访问 params 哈希确实包含正确的值，即 params[:username] => "someusername"

我需要在 HTTP 请求中添加什么内容，以便可以在控制器中使用 params[:model_name] 语法吗？我正在使用 ASIFormDataRequest.m 发布到我的 Rails 应用程序。

我的客户端 POST 如下所示：

```
-(void)createUser:(NSString *)first
     lastName:(NSString *)last
     userName:(NSString *)user
        email:(NSString *)email
     password:(NSString *)password{

NSString *stringFormat = [NSString stringWithFormat:@"%@users.json", serviceBaseURL];
NSURL *url = [NSURL URLWithString:stringFormat];
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
User *requestedUser = [[User alloc]initWithId:nil firstName:first lastName:last userName:user email:email password:password];
request.tag = CREATE_USER;
request.userInfo = [NSDictionary dictionaryWithObject:requestedUser forKey:@"requestedUser"];
[request setPostValue:first forKey:@"first_name"];
[request setPostValue:last forKey:@"last_name"];
[request setPostValue:user forKey:@"username"];
[request setPostValue:email forKey:@"email"];
[request setPostValue:password forKey:@"password"];
request.Delegate = self;
[request startAsynchronous]; 
```

}

控制器的“创建”方法如下所示：

```
 def create
  @user = User.new(params[:user])      
  if @user.save  #This will fail because params[:user] is nil when posted from iOS!
    flash[:notice] = {:success => "User Created."}
    session[:user_id] = @user.id
        session[:username] = @user.username
         respond_to do |format|
            format.json {render :json => @user}
            format.html{redirect_to(:controller => 'lists', :action => 'index')}
         end

  else
     flash[:notice] = {:error => @user.errors}
      respond_to do |format|
         #format.json {render :json => @user.errors}
         format.json {render :json => params[:username]} #This has a value. So the form parameters are sent.
         format.html{render('new')}
      end
  end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T16:48:26.367

问题是我需要以 RoR 期望的格式发布我的 JSON。POST 数据的格式如下：

```
{first_name: "somename", last_name: "somelastname", username: "someusername", etc...} 
```

我的 RoR 控制器期望将属性包装在模型对象中，如下所示：

```
{user:{first_name: "somename", last_name: "somelastname", username: "someusername", etc...}} 
```

使用 ASIFormDataRequest 这可以通过格式化您的 post 参数来完成，如下所示：

```
[request setPostValue:first forKey:@"user[first_name]"];
[request setPostValue:last forKey:@"user[last_name]"];
[request setPostValue:user forKey:@"user[username]"];
[request setPostValue:email forKey:@"user[email]"];
[request setPostValue:password forKey:@"user[password]"]; 
```

注意'model_name[parameter]' 格式。

# .net - 在 Windows Phone 7 中使用 Syndication Feed 和 XMLReader 读取 RSS

> ID：13576478
> 
> 赞同：2
> 
> 时间：2012-11-27T02:24:35.743
> 
> 标签：.net, rss, windows-phone, xmlreader, syndication-feed

嗨，我想在 Windows Phone 中阅读以下 Rss。我可以使用 Syndication Feed 阅读常见项目，例如标题。但我无法从中读取元素。我也尝试了一些代码。但他们没有工作。这是RSS。

```
<title>Title of the feed </title>
<pubDate>Thu, 22 Nov 2010 22:15:04 +0000</pubDate>
<guid isPermaLink="false"><![CDATA[2c864c4ffasfasfasfasfaer54854738422711]]></guid>
<link><![CDATA[http://abc.ldfan.com/something something something]]></link>
<media:thumbnail url="http://abc.ldfan.com/item/2137111" />
<description><![CDATA[<p>some descriptions jsdfoasjf saifjoeij alfoer alfmaoeijfea9 a epfa3- fasfa039ur aelmf320jaofa </p>]]></description>
<enclosure length="9113657" type="audio/mpeg" url="http://abc.ldfan.com/eslasdfast/song.mp3" />
<itunes:duration>12:39</itunes:duration>
<itunes:explicit>no</itunes:explicit>
<itunes:keywords />
<itunes:subtitle><![CDATA[ome descriptions jsdfoasjf saifjoeij alfoer alfmaoeijfea9 a epfa3- fasfa039ur aelmf320jaofa ]]></itunes:subtitle> 
```

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T03:10:26.980

你想得到什么财产？查看[SyndicationItem 文档](http://msdn.microsoft.com/en-us/library/system.servicemodel.syndication.syndicationitem%28v=vs.95%29.aspx)，以获得标准的东西（如 pubDate），您可以使用

```
foreach (SyndicationItem f in feeds.Items)
{
    DateTime pubDate = f.PublishDate;
} 
```

对于非标准的东西（如 itunes:subtitle），你可以使用

```
foreach (SyndicationItem f in feeds.Items)
{
    string subtitle = f.AttributeExtensions[new XmlQualifiedName("subtitle", "itunes")];
} 
```

另请参阅[松散类型扩展示例](http://msdn.microsoft.com/en-us/library/bb943475.aspx)。

# javascript - Javascript：制作元素列表的最简单方法

> ID：13576487
> 
> 赞同：0
> 
> 时间：2012-11-27T02:25:21.200
> 
> 标签：javascript, jquery

我有一个 div 和一个包含一些项目的列表：

```
<div id="myDiv">
<ul>
    <li><a>Item 1</a></li>
    <li><a>Item 2</a></li>
    <li><a>Item 3</a></li>
</ul> 
```

知道项目的数量可能会发生变化，我怎么能轻松地制作一个 'a' 元素的 Javascript 数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T02:26:44.387

如果你想要一个静态列表：

```
var mylist = $('#myDiv > ul > li > a').toArray(); 
```

* * *

但是你写了*“......知道项目的数量可能会改变”*。如果这意味着您想要一个随 DOM 更改而更新的“实时列表”，请执行以下操作：

```
var mylivelist = document.getElementById("myDiv")
                         .getElementsByTagName("a"); 
```

此列表将在添加或删除项目时更新。它假设在 中没有其他`<a>`元素`<div>`。如果有，则需要进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T02:26:15.707

如果你使用 jQuery，那么它是

```
$('#myDiv a') 
```

如果没有 jQuery 那么就这个

```
document.getElementById('myDiv').getElementsByTagName('a') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T02:33:14.720

在普通的旧 javascript 中（不需要 jQuery）：

```
 var myDiv = document.getElementById('myDiv');
    var allAnchors = myDiv.getElementsByTagName('a');
    for (var i = 0; i < allAnchors.length; i++) {
        //do something with each allAnchors[i] node
        document.write(allAnchors[i].innerHTML + '<br />');
    } 
```

# python - TAB 自动完成 python CLI

> ID：13576488
> 
> 赞同：7
> 
> 时间：2012-11-27T02:25:22.293
> 
> 标签：python, shell, kde, tcsh

我只是想知道是否可以编写一个在 shell 中运行的 Python 脚本，可以在用户点击 Tab 时向他们提供建议？

例如，某些应用程序如何限制它们所支持的文件类型。我在 optParse 中没有找到任何可以做到这一点的东西？

理想情况下应该是：

> myScript.py [TAB]（shell 打印选项列表）

有什么建议么？OpenSuse和tcsh下具体使用KDE

非常感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T06:53:14.680

这是 shell 的一个特性，而不是被调用的 Python 脚本的特性。有关shell 完成的更多信息，请参阅[SO 上的这个问题。](https://stackoverflow.com/questions/5570795/how-does-bash-tab-completion-work)特别是，您正在寻找[可编程完成](http://info2html.sourceforge.net/cgi-bin/info2html-demo/info2html?%28bash.info.gz%29Programmable%2520Completion)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T06:59:12.867

我认为您正在寻找类似[optcomplete](http://furius.ca/optcomplete/)的东西。它为 bash 实现了一个完成模块，该模块将为任何使用`optparse`. 您可以从中获取提示并将其转换为您需要的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T06:57:02.790

关于如何为 git 执行此操作有一个很好的解释。我将它包含在内，但归功于[原作者](http://gtirtha.wordpress.com/2010/05/14/git-autocomplete/)

```
# Source this script in tcsh to setup shell completions
# for git. Completions are activated by typing or Control-D
# in the shell after entering a partial command.
#
# Usage:
# source git-completion.tcsh (e.g. in ~/.cshrc)
#
# Supported completions:
# git (lists git commands)
# git help (lists git commands)
# git branch (lists branch names)
# git checkout (lists branch names)
# git log (lists the most commonly used flags)
# git remote (lists git remote commands)
# git remote add|prune|rm|show|update
# (lists git remote names)
# In addition to entering where shown, you can enter it after
# typing part of the word, e.g. git branch bug to auto-complete
# branches starting with “bug”.
#
# Author: David Adler, David Aguilar

if ( -x /usr/bin/git) then
# Git is installed so define tcsh completions for it.

# List of known git subcommands
# This is a hard-coded list to avoid calling ‘git help’ at startup.
set __git_cmd_names = (add bisect blame branch checkout clone commit config \
diff diff-files difftool fetch grep gui init log merge mv pull push \
rebase reset rm show shortlog stash status tag)

alias __git_aliases ‘git config –get-regexp “alias.*” | sed -n “s,alias\.\([^ ]*\).*,\1,p”‘
alias __git_branches ‘git for-each-ref –format=”%(refname)” refs/heads refs/remotes | sed -e s,refs/remotes/,, | sed -e s,refs/heads/,,’
alias __git_origin_branches ‘git for-each-ref –format=”%(refname)” refs/remotes/origin | grep -v HEAD | sed -e s,refs/remotes/origin/,,’

# Define the completions (see the tcsh man page).
complete git \
‘p/1/`__git_aliases | xargs echo $__git_cmd_names`/’ \
“n/help/($__git_cmd_names)/” \
‘n/branch/`__git_branches | xargs echo -m -d`/’ \
‘n/config/(–global –get-regexp –list)/’ \
‘n/diff/`__git_branches | xargs echo –check –staged –stat — *`/’ \
‘n/difftool/`__git_branches | xargs echo –no-prompt –staged — *`/’ \
‘n/fetch/`git remote`/’ \
‘n/merge/`__git_branches`/’ \
‘n/log/`__git_branches | xargs echo — –name-only –name-status –reverse –committer= –no-color –relative –ignore-space-change –ignore-space-at-eol –format=medium –format=full –format=fuller`/’ \
‘n/stash/(apply list save pop clear)/’ \
‘n/push/`git remote`/’ \
‘N/push/`__git_origin_branches`/’ \
‘n/pull/`git remote | xargs echo –rebase`/’ \
‘n/–rebase/`git remote`/’ \
‘N/–rebase/`__git_origin_branches`/’ \
‘N/pull/`__git_origin_branches`/’ \
‘n/rebase/`__git_branches | xargs echo –continue –abort –onto –skip –interactive`/’ \
‘N/rebase/`__git_branches`/’ \
‘n/remote/(show add rm prune update)/’ \
‘N/remote/`git remote`/’ \
‘n/checkout/`__git_branches | xargs echo -b –`/’ \
‘N/-b/`__git_branches`/’
endif 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T07:05:03.020

[compleat](https://github.com/mbrubeck/compleat)使用简单的用法描述在 bash 中启用制表符补全。`!command`语法应该允许动态过滤文件名。

# algorithm - 图中的 K 个互斥路线

> ID：13576489
> 
> 赞同：9
> 
> 时间：2012-11-27T02:25:27.890
> 
> 标签：algorithm, graph

输入：图 G（假设所有边都有单位权重），源-目的顶点对 (X1, Y1) , (X2 Y2) , ..., (Xk, Yk) （它们都是不同的）。

输出：路线 R1（从 X1 到 Y1）、R2（从 X2 到 Y2）、...、Rk（从 Xk 到 Yk）使得 R1、R2、...、Rk 在它们之间不共享任何顶点。无需优化路线长度。

使用什么算法？这个问题的复杂性是什么？我需要一个理论上强大的解决方案，而不是启发式的大部分时间都有效的解决方案。

最明显的解决方案是将每个自由顶点（不在 X1、X2、..Xk 或 Y1、Y2、...、Yk 中）分配给 k 条路径之一，看看它们是否真的以所需的方式形成路径。有可能的 n^k 分配（ (n-2k)^k 更准确）。我们能做得更好吗？如果我们假设图形是二维网格结构怎么办？（相当于解决[https://play.google.com/store/apps/details?id=com.bigduckgames.flow](https://play.google.com/store/apps/details?id=com.bigduckgames.flow) 游戏，但没有满足每个方格的要求）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T17:03:37.273

您可以在本文中找到一种可能的解决方案：[Ken-ichi Kawarabayashi、Yusuke Kobayashi、Bruce Reed 的“二次时间中的不相交路径问题”](http://research.nii.ac.jp/~k_keniti/quaddp1.pdf) (pdf)。

这个解决方案不是微不足道的而是高效的——只有 O(N ² ) 时间复杂度，其中 N 是顶点的数量。只有当 K 是一个小常数时，它才是有效的。

* * *

也可以将其解决为[多商品流动问题](http://en.wikipedia.org/wiki/Multi-commodity_flow_problem)。但我怀疑任何特定于多商品的算法是否足够有效。因为一般的多商品流量问题（当至少一种商品的流量大于一种时）是 NP 难的。

这不太可能作为单一商品流动问题来解决。例如，以下是以下提议的反例：

> ...将 S 到 X2 和 T 到 Y2 边缘限制为容量 0.5？如果有一对不相交的路线与所需的匹配，那么从 S 到 T 的总流量可能为 1.5 ......我相信这种方法会准确报告是否存在一组不相交的路径。

                                           ![反例图](../Images/2b3d8ef0ebf41bbeb588c31d6463f55d.png)

很容易找到容量为 1.5 的流（此流如图所示）。但是没有办法用不相交的路径连接两个（绿色和红色）顶点对。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-27T05:26:09.343

您可以使用 MaxFlow 来解决这个问题。如果你不熟悉 Flow，你可以阅读一些关于它的资料。

## 算法

1.  制作一个超级水槽顶点 S 和一个超级目标顶点 T。连接一些新边**S -> X1, S -> X2, Y1 -> T, Y2 -> T....., S -> Xk, Yk -> T**，并将每对边的容量设置为 1, 0.75, 0.5 .....
2.  将每个顶点**p**分成两个新顶点**p'**和**p"**，将**p'**和**p"**与容量也为 1 的新边连接起来。
3.  从S到T运行MaxFlow，保存流路信息。很明显，这个新图的最大流量为 2。两条流路表示所需的路线。因为算法总是找到最大流，所以最终的流路径一定是 X1 -> Y1, X2 -> Y2 ... Xk -> Yk。

## 证明

因为我们将每个顶点分开，并用一条容量为1的边代替，所以原图中的每个顶点都可以被一个流遍历。换句话说，它也意味着每个顶点可以属于一个路径。

## 延长

如果你想最小化两条路径的总长度，你可以扩展算法。在新图中添加每条边一个属性：成本。来自原始图的边的成本将为 0；并且指示单独顶点的新边的成本将为 1。您可以运行 Min-Cost-Max-Flow 算法，并获取所需的信息。

## 复杂

MaxFlow的复杂度是O(N * N * M)，使用Dinic算法。并且 Min-Cost-Max-Flow 的复杂度也大约为 O(N * N * N)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T02:08:08.827

我没有完整的解决方案，但我确实有一个可以作为第一步的减少。首先，将图分解为其[双连通分量](http://en.wikipedia.org/wiki/Biconnected_component)。这种分解识别了所有切割的顶点，一个顶点，如果被移除，就会将图形断开为两个组件。对于每个切割顶点，源和目标顶点对要么在切割的同一侧，作为非分割对，要么在切割的相对侧，作为分割对。（如果切割顶点也是源或目标，则将其计为分割对。）

*   如果任何切割顶点有两个或多个分割对，则问题没有解决方案，因为两条路径都必须通过切割顶点。（这是我上面评论中梅花形图示例的概括。）

*   如果没有拆分对，则问题会分解为两个较小的问题，每个组件上都有一个问题。解决方案是每个较小解决方案的组合。

*   如果恰好有一个分割对，那么您将问题简化为一对较小的问题，一个在每个组件的相关版本上，其中切割顶点在图之间重复。假设切割顶点`X_1`在某个组件中；在该组件中标记重复的切割顶点`Y_1`。其他组件反之亦然。和以前一样，解决方案是两个较小解决方案的组合。

该解决方案的本质是鸽巢原理，因为两条路径不能通过一个点。上一步，三分不能过两分。这会立即导致检查三联组件并使用[SPQR 树](http://en.wikipedia.org/wiki/SPQR_tree)。从这个结构中，您可以枚举所有两点切割。和之前的划分一样，顶点分成两组并类似地进行，除了你必须考虑分裂对的所有排列。子问题现在都在三联组件上。

你可以看到这会导致什么。我不知道 SPQR 树是否已被推广到更高程度的连通性。即使它们曾经是，您也可以期待一般的组合爆炸。而这一切都导致了一个难题。

* * *

起初，我怀疑这个问题在平面图上很容易解决。它不是; 请参阅上面引用的论文。它仍然是NP完全的。

给定上述算法，您可以在双连通图上假设一个问题。这里的区别在于，平面图只有“局部”边（通过将图嵌入球体上可见）；“远程”边缘必须跨越其他边缘。这意味着最小割集的行为表现得更好。但表现得不够好，不足以解决问题。

# jquery - 页面加载不刷新jquery

> ID：13576491
> 
> 赞同：0
> 
> 时间：2012-11-27T02:25:43.280
> 
> 标签：jquery, function, load, refresh

我想知道，这是如何在不刷新的情况下加载整个页面或部分页面的最佳方式。我正在使用这种方法：

```
$(".updated").load("index.php .updated"); 
```

这就是我使用 .updated 类刷新表的方式。但是在重新加载后，我的其他 jQuery 函数的一部分无法正常工作或根本无法工作。

您使用哪种方法？你能给我什么建议？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T02:52:18.367

如果您的部分页面正在使用 AJAX 调用重新加载，您应该使用以下函数 -

```
$(selector).live(events, data, handler);                // jQuery 1.3+
$(document).delegate(selector, events, data, handler);  // jQuery 1.4.3+
$(document).on(events, selector, data, handler);        // jQuery 1.7+ 
```

这将确保处理程序附加到现在或将来与选择器匹配的所有元素。

**例子 -**

```
 $("body").delegate("p", "click", function(){
      $(this).after("<p>Another paragraph!</p>");
  }); 
```

**进一步参考 -**

[http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

[http://api.jquery.com/live/](http://api.jquery.com/live/)

[http://api.jquery.com/on/](http://api.jquery.com/on/)

# c++ - 在 C++ 中的 if 语句中使用数组中的特定值

> ID：13576493
> 
> 赞同：2
> 
> 时间：2012-11-27T02:26:01.750
> 
> 标签：c++, visual-c++

```
if(gene1A[20] == 'T' || gene2A[20] == 'T')
    outFile << "Person A is of 'Anemic' type." << endl;
else if(gene1A[20] == 'T' && gene2A[20] == 'T')
    outFile << "Person A if of 'Carrier' type." << endl;
else
    outFile << "Person A is of 'Normal' type." << endl;

if(gene1B[20] == 'T' || gene2B[20] == 'T')
    outFile << "Person B is of 'Anemic' type." << endl;
else if(gene1B[20] == 'T' && gene2B[20] == 'T')
    outFile << "Person B if of 'Carrier' type." << endl;
else
    outFile << "Person B is of 'Normal' type." << endl;

if(gene1C[20] == 'T' || gene2C[20] == 'T')
    outFile << "Person C is of 'Anemic' type." << endl;
else if(gene1C[20] == 'T' && gene2C[20] == 'T')
    outFile << "Person C if of 'Carrier' type." << endl;
else
    outFile << "Person C is of 'Normal' type." << endl;

if(gene1D[20] == 'T' || gene2D[20] == 'T')
    outFile << "Person D is of 'Anemic' type." << endl;
else if(gene1A[20] == 'T' && gene2A[20] == 'T')
    outFile << "Person D if of 'Carrier' type." << endl;
else
    outFile << "Person D is of 'Normal' type." << endl; 
```

是我现在的代码。我需要做的是根据我设置的数组输出“outFile”，如果这个人是贫血、携带者或正常人。每个数组有 444 个字符长，可以是 A、C、T 或 O。如果 T 位于gene1[] 和/或gene2[] 的第 20 位，则此人将贫血（如果只有一个数组）或一个载体（如果在两个数组中）。

我现在拥有的东西使它们自动成为“正常”。我相信我的 if 语句设置不正确，但我需要的是引用数组中的第 20 个值，然后如果它 == 'T'，则输出它们的“类型”。

注意：我注意到在我的代码中我输入了 20 而不是 19。我进行了更正，所以请看过去。

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T02:36:26.983

（这不是一个完整的答案，但很难表达为评论，并且由此产生的简化可能会引导您找到答案......）

功能分解是你的朋友：

```
const char* type(const char* gene1, const char* gene2) {
    return gene1[19] != 'T' ? "Normal" : gene2[19] == 'T' ? "Anemic" : "Carrier";
}
⋮
outFile << "Person A is of '" << type(gene1A, gene2A) << "' type." << endl;
outFile << "Person B is of '" << type(gene1B, gene2B) << "' type." << endl;
outFile << "Person C is of '" << type(gene1C, gene2C) << "' type." << endl;
outFile << "Person D is of '" << type(gene1D, gene2D) << "' type." << endl; 
```

它还使得像你为 D 人介绍的 bug 这样的 bug 更难介绍，而且当你这样做时更容易发现。

**编辑：** @MarkB 指出了我的逻辑错误（我误读了原始逻辑）。不幸的是，我不确定如何解决它，因为原始逻辑是以下形式：

```
 if A or  B then X
else if A and B then Y
else                 Z 
```

因为只要 (A and B) 为真， (A or B) 就为真，第二个子句永远不会触发，这几乎肯定不是你的意图。如果您打算首先使用 AND 子句，则`type()`可以这样重写该函数：

```
const char* type(const char* gene1, const char* gene2) {
    bool t1 = gene1[19] == 'T';
    bool t2 = gene2[19] == 'T';
    return t1 && t2 ? "Anemic" : t1 || t2 ? "Carrier" : "Normal"  );
} 
```

顺便说一句，这个函数不会是当前代码的“子函数”（不管这意味着什么），它只是一个在函数上方声明的自由函数。OTOH，如果您的编译器支持 C++11 lambda，您实际上可以在`type()`本地将函数声明为相关函数：

```
auto type = [](const char* gene1, const char* gene2) -> const char * {
    …
}; 
```

# c - 启用功能时代码行为异常（可能的大小约束）

> ID：13576497
> 
> 赞同：2
> 
> 时间：2012-11-27T02:27:17.103
> 
> 标签：c, heap-memory, iar, stack-memory, 8051

我知道这个话题很模糊......所以我会试着解释一下。

我正在 IAR Workbench 中开发一个项目。我已经到了如果我添加一个新特性，比如一个简单的 if 语句，整个代码结构就会中断的地步。代码可以正常编译并下载到 8051 设备，但是在代码启动序列的中途，我失去了连接。好像发生了堆栈溢出。如果我暂停调试器，我会看到我的 XdataStack 和 IdataStack 值很低（小于 50%）并且没有要报告的堆栈溢出。

事实上，导致问题的代码甚至没有被应用程序调用。

如果我启用代码中的调试#define 常量，这一点会更加明显。启用此功能会导致将更多字符串常量内置到 UART 调试代码中。

我执行的另一个测试是在一个已经存在的函数中创建一个包含 100 个字符的数组

```
char hello[100];
memset(hello, 0x00, 100); 
```

这似乎也破坏了代码。

我想知道是否有我应该查看的内存区域，看看我是否已经填满了这个设备（CC2540，闪存大小为 128Kb）

IAR 让我调查：

*   IDATA
*   XDATA
*   SFR
*   逻辑代码
*   代码
*   数据
*   数据

就我的项目配置而言：

**堆栈大小：**

*   数据：0xC0
*   数据：0x00
*   X数据：0x280

**堆大小：**

*   XDATA：0xFF
*   远：0xFFF
*   Far22：0xFFF 巨大：0xFFF

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T16:19:03.470

> 好像发生了堆栈溢出。

这在 8051 中是不太可能的，因为堆栈没有被大量使用。如果没有有效的间接寻址模式，它主要限于保存返回地址（由 MCU 自动管理）和保存的寄存器（主要在 ISR 中）。

> 我执行的另一个测试是在一个已经存在的函数中创建一个包含 100 个字符的数组 [...] 这似乎也破坏了代码。

您的代码基本上等同于： `f() { static char hello[100]; ... }`编译器通过覆盖管理所有这些“本地”变量，以便这 100 个字节仅在`f()`执行时才能安全使用。这只有在编译器可以判断在`f()`执行时可能会调用哪些函数时才有效。如果编译器对调用树的分析是错误的，它将导致以意想不到的方式覆盖局部变量（包括函数的参数需要太多参数来传递寄存器）。

编译器应该足够聪明，可以将`main()`所有 ISR 视为独立调用树的根。它很容易被计算的跳转、通过函数指针的调用以及 RTOS 中的“任务”等概念所愚弄。例如，如果您使用函数指针，则必须告诉编译器（可能作为链接器选项）所有可能从通过指针调用的函数中调用的函数。

# ios - 即使启用分页，UICollectionView 水平滚动也会显示以前的项目

> ID：13576499
> 
> 赞同：7
> 
> 时间：2012-11-27T02:27:22.477
> 
> 标签：ios, uicollectionview

我正在实现一个滚动方向设置为水平的 uicollection 视图。我还在情节提要中启用了分页选项。在我看来，我一次可以显示 4 个项目。如果我有 5 个项目，第一页有 4 个项目，但第二页有 3 个项目。以前的项目也显示在第二页上。

我只是想问我怎样才能防止这种情况发生？我想要第一页上的 4 个项目，第二页上只有 1 个项目。我正在考虑添加项目并将它们设置为隐藏来执行此操作。这是解决这个问题的正确方法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:53:23.603

我遇到了类似的问题，我以一种相当老套的方式解决了它，但它确实有效，我现在对此感到满意。

基本上我决定做的是用空的 UICollectionViewCells 填充集合视图页面。

我首先计算总共有多少项目。如果我的 NSFetchedResultsController 提供的项目总数不是三的精确倍数，那么我添加必要的项目数，以便总数是三的倍数。

例如，如果我得到四个类别，我需要再添加两个以使其总共六个：

```
#define ITEMS_PER_PAGE 3

//...

- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section {
    NSArray *sections = [categoriesFetchedResultsController sections];
    id <NSFetchedResultsSectionInfo> sectionInfo = sections[section];

    NSInteger categoryCount = [sectionInfo numberOfObjects];
    NSInteger extraItemsNeeded = ITEMS_PER_PAGE - (categoryCount % ITEMS_PER_PAGE);
    NSInteger totalItems = categoryCount + extraItemsNeeded;

    NSInteger pages = (NSInteger)(totalItems / ITEMS_PER_PAGE);
    self.pageControl.numberOfPages = pages;
    return totalItems;
} 
```

然后，当需要生成单元格时，我执行以下操作：

```
 - (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
        CategoryCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"CategoryCell" forIndexPath:indexPath];
        // use a generic UICollectionCell for the "empty cell" case.        
        UICollectionViewCell *emptyCell = [collectionView dequeueReusableCellWithReuseIdentifier:@"EmptyCell" forIndexPath:indexPath];

        if (indexPath.row < [[categoriesFetchedResultsController fetchedObjects] count] ) {
            NSManagedObject *object = [categoriesFetchedResultsController objectAtIndexPath:indexPath];
            NSData *imageData = [object valueForKey:@"thumbnail_data"];
            NSString *name = [object valueForKey:@"category_name"];

            cell.image.image = [UIImage imageWithData:imageData];
            cell.label.text = name;
            return cell;
        }

        return emptyCell;
    } 
```

我希望这对将来的某人有所帮助，因为解决这个问题并不像它应该的那样简单，而且我很惊讶流布局并没有自动适当地计算页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:20:25.527

也许您可以将`contentSize`UICollectionView 的属性设置为其下一个倍数`bounds`？

例如对于单节集合视图：

```
NSUInteger itemsPerPage = 4;
NSUInteger pageCount = (NSUInteger) ceilf((float)[collectionView.dataSource numberOfItemsInSection:0] / itemsPerPage);
CGFloat contentWidth = collectionView.bounds.size.width * pageCount;
collectionView.contentSize = CGSizeMake(contentWidth, collectionView.contentSize.height); 
```

# opencv - 使用 CMake 为 Pandaboard Ubuntu 交叉编译 OpenCV

> ID：13576501
> 
> 赞同：1
> 
> 时间：2012-11-27T02:27:49.580
> 
> 标签：opencv, cmake, pandaboard

我在 Qt Creator 中（在 Ubuntu 主机上）编写了一个简单的 OpenCV 应用程序（从 Logitech Webcam Pro 9000 打开视频流）。[在使用 ffmepeg、x264、gstreamer 等（在http://www.ozbotz.org/opencv-installation/](http://www.ozbotz.org/opencv-installation/)上找到）修复问题（CMake 没有找到它）后，应用程序可以工作。

现在我想用 CMake for Pandaboard (Ubuntu) 交叉编译 OpenCV，将它与交叉编译的 Qt 应用程序结合使用（如在主机上）。按下配置按钮后，我得到了这个输出。 [http://depositfiles.com/files/se4r3bhrh](http://depositfiles.com/files/se4r3bhrh)

除了这个问题，我不知道如何在 CMake 中编写“用于交叉编译的工具链文件”和/或“指定用于交叉编译的选项”，恐怕要解决 ffmpeg 等问题。（喜欢在主机上）？我有一个很好的主机 HOWTO（来自 ozbotz），但是如何处理它以用于 Pandaboard 的交叉编译？

有没有人有这些问题的经验/想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-23T11:08:25.267

要使用主机 ubuntu pc 为 pandaboard 交叉编译 Opencv，请执行以下步骤：

*   安装交叉编译工具 在 ubuntu 上，只需在终端输入以下内容即可：

    `sudo apt-get install gcc-arm-linux-gnueabihf`

    *   获取opencv源码并准备构建

        `mkdir opencv
        cd opencv
        git clone https://github.com/Itseez/opencv.git
        cd opencv-master
        mkdir build
        cd build`

    *   编辑 Cmake 变量以告诉它使用交叉编译器。 `gedit ../platforms/linux/arm-gnueabi.toolchain.cmake`
        在文件的适当位置添加这些行： 如果需要，请设置附加 C_FLAGS：
        `set( CMAKE_C_COMPILER gcc-arm-linux-gnueabihf)
        set( CMAKE_CXX_COMPILER g++-arm-linux-gnueabihf)`

        `set(CMAKE_C_FLAGS "-mcpu=cortex-a8 -O3 -mfloat-abi=hard -ftree-vectorize -ftree-vectorizer-verbose=9" CACHE STRING "c flags")`

    *   运行 cmake：
        `cmake -DCMAKE_TOOLCHAIN_FILE=../platforms/linux/arm-gnueabi.toolchain.cmake ../`

    *   `make`

# java - java捕捉异常

> ID：13576502
> 
> 赞同：0
> 
> 时间：2012-11-27T02:27:50.960
> 
> 标签：java

```
 try {
        if (x.length == Styles.size()) {

        }
        else{
             throws InputMismatchException ;
        }
    } finally {
        OutputFileScanner.close();
    } 
```

我在包含上述代码的方法中得到编译错误，有没有办法在 else 块中抛出 InputMismatchException ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T02:33:13.627

您需要使用`new`关键字：

```
throw new InputMismatchException(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T02:32:22.487

“抛出”声明不会进入方法主体。如果您想简单地抛出异常，请将其声明如下：

```
 public void method() throws InputMismatchException{

    if(...) {...
     OutputFileScanner.close();
   }
    else{
      OutputFileScanner.close();
     throw new InputMismatchException("Uh oh");
      }
    } 
```

这里不需要使用 try 语句。当您调用 method() 时，您将使用以下内容：

```
try{
  method();
} catch (InputMismatchException ime){
   //do what you want
 } 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T02:29:54.320

声明它所在的方法以引发异常。

因为`OutputStream.close()`throws`IOException`你也需要抛出它：

```
void myMethod() throws InputMismatchException, IOException {
    // your code, except 
    throw new InputMismatchException();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T02:31:07.177

当你抛出异常时，就不需要 try-catch-finally 了。当您捕获异常时，try catch finally 是必要的。尝试以下 -

```
if (x.length == Styles.size()) {

    }
    else{
         throw new InputMismatchException() ;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T02:33:02.427

你想创建一个异常的实例然后抛出它。`throws`用作方法声明的一部分，而不是实际抛出异常。

```
 if (x.length == Styles.size()) {

    }
    else{
         throw new InputMismatchException();
    } 
```

# jquery - 在 JQuery 中预加载声音和图像。它通常可以工作，但有时会冻结，我将不胜感激有关改进我的代码的建议

> ID：13576508
> 
> 赞同：2
> 
> 时间：2012-11-27T02:28:42.093
> 
> 标签：jquery, preloading

这是我第一次在这个我已经爱上的网站上提问。我正在尝试使用 JQuery 制作游戏，我需要预加载声音和图像。如果图像和声音已经在浏览器的缓存中，它似乎每次都能正常工作，但如果它们还没有在浏览器的缓存中，有时它会在加载过程中卡住，尤其是在 Firefox 上。我的问题是，是什么导致这种情况发生，我该如何防止它发生？刷新页面通常可以解决问题，但如果可能的话，我希望它在第一次完美运行。这是我的代码：

HTML：

```
<div id='loading_screen'>Loading <span id='how_much_loaded'>0</span>%</div>
<div id='content'>This is the content</div> 
```

CSS：

```
#content{opacity:0}
#loading_screen{position:absolute;left:0px;top:0px} 
```

Javascript：

```
var sounds=["sound0.wav","sound1.wav","sound2.wav","sound3.wav","sound4.wav","sound5.wav","sound6.wav","ding.wav"]
var images=["background-3_blue.jpg","background-3_green.jpg","background-3_yellow.jpg","background-3_red.jpg","play2train.png"]
var loaded_items=0;
var total_items=sounds.length+images.length;

function preload()
{
    for (var index=0;index<images.length;index++)
    {
        $("#preload").append(
            $("<img />").attr({
            src: images[index],
            onload: "counter();",
            style: "display:none"})
         )
    }
    for (var index=0;index<sounds.length;index++)
    {
        $("#preload").append(
            $("<audio />").attr({
            src: sounds[index],
            oncanplaythrough='counter()',
            style: "display:none"})
        )
    }
}

function counter()
{
    loaded_items++;
    $("#how_much_loaded").html((Math.round(loaded_items/total_items*100)))
    if (loaded_items==total_items)
    {
        $("#loading_screen").remove();
        $("#content").animate({"opacity":1});
    }
} 
```

[这是我正在开发的游戏。看看它是否适用于您的计算机](http://nickmanningwebdev.com/zero_through_nine_nov25/zero_through_nine.html)。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T03:34:37.043

实际上，您无需创建 DOM 元素并将它们附加到 DOM。由于您有资源的 url，只需对其进行快速获取请求，以便您可以缓存它。

这是我不久前没有做的：

```
 var assets = images.concat(sounds); //array of assets

    var i = 0,             //counting assets
        l = assets.length, //length of array
        w = 0;

    var enterframe = setInterval(function()                 //create an enterframe loop
    {
      w += ((100 * i / l) - w) * .8;                        //simple easing function
      document.getElementById('bar').style.width = w + '%'; //apply of value

    }, 25);

    //this function is for delaying assets loading
    function delay(callback, ms) { return function() { setTimeout(callback, ms); } }

    //kind of deferred for loop
    function load()
    {
      if (i != l) { $.get(assets[i++], delay(load, 10)); }
      else { clearInterval(enterframe); exit_preloader(); }
    }; 
```

**编辑：**

另外，我刚刚注意到您开始同时加载所有资产。这不是最好的方法，因为浏览器会同时启动所有请求。您至少应该使用我的代码中编写的“延迟 for 循环”结构，以确保将每个资产作为一个序列依次加载。

# javascript - Backbone：将集合的一部分保存到数组中

> ID：13576509
> 
> 赞同：0
> 
> 时间：2012-11-27T02:28:48.050
> 
> 标签：javascript, backbone.js

我确实有一个集合，我需要遍历集合，并在必要时更改数据并推送到数组。

```
 {
"Beatles": [
      {"name":"Album 1", "rate":"70"},
      {"name":"Album 2", "rate":"75"},
      {"name":"Album 3", "rate":"82"},
      {"name":"Album 4", "rate":"60"}
], 
"Purple" :[
      {"name":"Album 1", "rate":"30"},
      {"name":"Album 2", "rate":"90"},
      {"name":"Album 3", "rate":"23"},
      {"name":"Album 4", "rate":"14"}
]
} 
```

// 我想遍历集合，只将披头士专辑的费率保存到一个数组中，所以它看起来像这样 myBeattlesarray = [70,75,82,60];

实现这一目标的最佳方法是什么。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T02:32:47.937

您可以使用下划线[`pluck`](http://underscorejs.org/#pluck)从集合中获取一个字段：

```
_.pluck(collection.Beatles, "rate"); 
```

* * *

```
var model = new Backbone.Model(
{
"Beatles": [
  {"name":"Album 1", "rate":"70"},
  {"name":"Album 2", "rate":"75"},
  {"name":"Album 3", "rate":"82"},
  {"name":"Album 4", "rate":"60"}
], 
"Purple" :[
  {"name":"Album 1", "rate":"30"},
  {"name":"Album 2", "rate":"90"},
  {"name":"Album 3", "rate":"23"},
  {"name":"Album 4", "rate":"14"}
]
}
);

var beatles = model.get("Beatles");
var rates = _.pluck(beatles, "rate");

console.log(rates); 
```

小提琴：http: [//jsfiddle.net/k5AVE/](http://jsfiddle.net/k5AVE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T01:38:02.550

如果您没有backbone.js/underscore.js 或者您不需要，这里有一个灯光数组/集合库，可以执行pluck *()*和所有其他操作，[jsList](https://github.com/tadessetdk/jsList)。您可以检查单元测试以获取示例代码。

对于你的问题，作者可以

```
var result = beattles.pluck('rate'); 
```

如果您需要提取多个字段，可以使用

```
var result = beattles.pluck(['rate', 'name']); 
```

# visual-studio-2010 - 在 VS 2010 下编译的链接阶段缺少符号

> ID：13576520
> 
> 赞同：2
> 
> 时间：2012-11-27T02:30:35.780
> 
> 标签：visual-studio-2010, tcl

我正在尝试构建和修复 UCL RAT，以便在使用 VS 2010 编译的 Windows 上运行。我已经在 Visual Studio 2010 和主要 RAT 可执行文件下成功编译了 TCL 8.5.12。

RAT 使用 TCL 来驱动它的用户界面。

当我开始修改 RAT 以将通常存储为字符串的 TCL 代码嵌入到 zip 文件中而不是使用 zvfs 时，问题就出现了。目的是最终将 zip 嵌入到可执行文件的末尾，以最大限度地减少磁盘使用和分发文件的数量。

所以我从 TOBE 项目下载了一些 zvfs 代码，看看我是否可以使用它来加快进程（特别是 zvfs.c 文件，它基本上是 tcl 的 zvfs 扩展）

这需要 Zlib 才能运行构建和集成良好。

但问题是 zvfs 代码没有与 TCL 正确链接。它通过了编译，但在链接时出现以下错误：

```
2>zvfs.obj : error LNK2019: unresolved external symbol _TclOpenFileChannelInsertProc referenced in function _Zvfs_Init
2>zvfs.obj : error LNK2019: unresolved external symbol _TclStatInsertProc referenced in function _Zvfs_Init
2>zvfs.obj : error LNK2019: unresolved external symbol _TclAccessInsertProc referenced in function _Zvfs_Init 
```

对 c/c++ 和链接器没有我可能的经验，这已成为为更现代的 Windows 版本修复 RAT 的障碍。

RAT 的版本是来自 UCL 颠覆服务器的最新版本，如果这有任何影响，Zlib 的版本是 1.2.7。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:57:59.497

这些特定功能已过时，但在正确构建到 Tcl 8.5（包括 8.5.12）时仍受支持。`USE_OBSOLETE_FS_HOOKS`在 Tcl 库的干净构建期间，您需要使用编译器定义预处理器符号（可以是任何东西）。唉，这意味着您需要编辑默认的构建指令，这就是我无法提供帮助的地方，因为我使用了与您完全不同的构建链（在不同的平台上）。

此外，在链接时，您需要链接 Tcl 库本身而不是它的存根库。

# c# - MonoTouch 自动代理网络凭据不起作用

> ID：13576522
> 
> 赞同：2
> 
> 时间：2012-11-27T02:30:37.790
> 
> 标签：c#, proxy, xamarin.ios, webrequest

试图从我的服务器上加载一些数据（xml 数据）。我通常只使用 HttpWebRequest，因为我可以将 utomaticDecompression 设置为 DecompressionMethods.GZip | DecompressionMethods.Deflate 以便自动使用 gzip 压缩我的数据。

最近，一位客户给我发电子邮件说，这在他的学校内不起作用。通过 TestFlightApp 向他发送了另一个应用程序副本，以从他那里获取更多调试信息，应用程序以 407 auth 错误响应。从那以后，我在我的计算机上设置了一个代理，我通过它重定向我的 iPhone 流量以进行测试。

我原来的设置是这样的，

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(_url);
request.CachePolicy = new HttpRequestCachePolicy(HttpRequestCacheLevel.NoCacheNoStore);
request.Proxy = null;
request.AutomaticDecompression = DecompressionMethods.GZip | DecompressionMethods.Deflate;
WebResponse response = request.GetResponse(); 
```

然后从那里开始。

我将 Proxy 设置为 null 因为在大多数情况下，用户不会在代理后面，这会中断 1-2 秒的代理解析。稍后有代码可以捕捉到这一点，然后重新创建 HttpWebRequest 但不使代理为空，我认为这将是默认代理。显然不是这样...

然后我尝试获取设备的默认代理设置。

```
CFProxySettings proxy0 = CFNetwork.GetSystemProxySettings();
IWebProxy proxy1 = WebRequest.GetSystemWebProxy();
IWebProxy proxy2 = HttpWebRequest.DefaultWebProxy;
IWebProxy proxy3 = HttpWebRequest.GetSystemWebProxy();
IWebProxy proxy4 = CFNetwork.GetDefaultProxy(); 
```

proxy1 - proxy4 的凭据为 null。proxy0 包含我需要的代理信息，例如代理 url、端口、用户名，但没有密码...

我用我的凭据手动创建了一个 WebProxy

```
WebProxy webProxy = new WebProxy(proxy0.HTTPProxy, proxy0.HTTPPort);
webProxy.Credentials = new NetworkCredential("user", "pass");
request.Proxy = webProxy; 
```

这有效。在出现 407 错误时无法为代理请求用户名和密码我不知道该怎么做... WebClient 下载不起作用，但 UIWebView 和 MKMapView 会自动进行身份验证。

有什么我想念的想法吗？

编辑：

找到这个，[https://bugzilla.xamarin.com/show_bug.cgi?id=1081](https://bugzilla.xamarin.com/show_bug.cgi?id=1081)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T00:05:13.393

我今天看了这个，做了很多调试和浏览Apple的文档——恐怕我没有给你一个肯定的答案——除非你认为“不可能”是一个肯定的答案......

**一般问题**

根据[Apple 的文档](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFProxySupport/Reference/reference.html)，`CFProxySupport`不会让您访问存储的代理凭据。

有一种 - 未记录 - 获取代理用户名的方法（返回的字典使用字符串作为键，其中一个键称为“HTTPUser”或“HTTPProxyUsername”，但我找不到任何字符串常量），但不是密码。

**在 Mac OS X 上**

在 Mac OS X 上实际上有一个解决方案：当我运行一个简单`NSURLConnection`的示例时，它要求我访问钥匙串的权限，所以我打开钥匙串实用程序并在登录钥匙串中找到代理凭据。我还编写了一个简单的 Objective C 函数来检索它，但是您需要知道代理用户名（但我没有尝试使用`NULL`，也许可以）。

除了检查该用户名是否为NULL之外，我也找不到任何检查是否需要身份验证的方法。不幸的是，您需要钥匙串访问权限来检查某些项目是否存在，因此我们需要确保确实需要身份验证。`HttpWebConnection`一种方法是在它已经收到 HTTP 407（其中还包含所需的用户名）之后从内部进行。

**在 iOS 上**

从我目前在互联网上阅读的内容来看，iOS 不允许您访问系统钥匙串——我什至不确定它是否存在。`CFProxySupport`也不会返回任何凭据。

Fwiw.，您也不需要知道代理密码，除非您想在不使用 iOS API 的情况下进行 HTTP 访问。因此，很有可能无法检索它。

作为一种解决方案，您可以使用 iOS API，例如CFNetwork 处理程序`NSURLConnection`或`WebClient`与[CFNetwork](https://github.com/mono/maccore/tree/master/src/CFNetwork)处理程序一起使用。

# java - 在创建实例时（在运行测试之前）使用参数初始化 JUnit 测试类的基类构造函数

> ID：13576524
> 
> 赞同：1
> 
> 时间：2012-11-27T02:30:44.470
> 
> 标签：java, junit

我目前正在编写一个使用 JUnit 执行一些测试的测试框架。作为该框架的一部分，我将创建 JUnit Request 对象并使用 JUnit Core 对象运行测试。我需要的是一种使用一些参数初始化测试类的父类的方法，以便基类的构造函数可以初始化基类的局部变量，因此可以在测试类中存在的测试中使用这些变量。

我找不到任何关于如何做到这一点的好信息。所有帮助将不胜感激。

# php - 最好的 mysql_fetch_array 使用

> ID：13576526
> 
> 赞同：0
> 
> 时间：2012-11-27T02:31:02.363
> 
> 标签：php, mysql

mysql_fetch_array 的最佳用途是什么（节省机器资源）：

```
$listidsquery = mysql_query("SELECT * FROM database") or die(mysql_error());
 while($listidsres=mysql_fetch_array($listidsquery)){
        results;
        } 
```

或者

```
 while($listidsres=mysql_fetch_array(mysql_query("SELECT * FROM database"))){
        results;
        } 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T02:46:27.017

第一个片段是正确的，将产生卓越的性能。第一个将 mysql 结果集资源设置为`$listidres`- 资源是一个简单的整数值。因此，它不会消耗任何重要的额外资源。

第二个片段根本不正确。它将为循环的每次迭代重新执行查询（因此可能会导致无限循环）。

正如上面评论中所述，两个片段都在使用`mysql`库，即 EOL。你应该`mysqli`改为。

# java - Matching Cards Program - 我如何正确创建一个双数组，让我可以比较 userInput 的值并让游戏正常运行？

> ID：13576529
> 
> 赞同：0
> 
> 时间：2012-11-27T02:31:32.583
> 
> 标签：java, arrays, pattern-matching

我正在尝试自学java，并在网上找到了这个项目，但我不知道如何正确地将它组合在一起。我想知道是否有人可以帮助我设置最终允许我将用户输入（EX：A1）与该部分的值进行比较的双数组。

游戏：菜单出现。用户输入 1 进行播放。2退出。游戏板出现，看起来像这样。每个盒子后面都有一个字母（啊）

```
 A  B  C  D 
    -  -  -  - 
1 | .  .  .  . 
2 | .  .  .  . 
3 | .  .  .  . 
4 | .  .  .  . 
```

然后用户输入一个点（EX：A1）。棋盘出现，随机显示字母。

```
 A  B  C  D 
    -  -  -  - 
1 | b  .  .  . 
2 | .  .  .  . 
3 | .  .  .  . 
4 | .  .  .  . 
```

然后它再次询问。（例如：用户输入 C3）

```
 A  B  C  D 
    -  -  -  - 
1 | .  .  .  . 
2 | .  .  .  . 
3 | .  .  d  . 
4 | .  .  .  . 
```

如果匹配，它们会留下来并重新开始循环。如果它们不匹配，它们都切换回“.”。

它一直持续到整个棋盘都被填满并且游戏结束！

我在这里上传项目，并且还包括了我到目前为止所拥有的，尽管我认为这不太好！

```
import java.util.*;

public class breitje_MatchUp{
   static Scanner input = new Scanner(System.in);
   static int i=0;
   static char[][] clearBoard = new char[4][4]; 
   static char[][] letterBoard = new char[4][4];
   public static void main(String[] args){
      drawBoard();

   }

   public static void drawMenu(){
      System.out.println("Welcome to the Match Up game! \n");  
      System.out.println("Please select from the following: ");  
      System.out.println("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~");  
      System.out.println("1\. New Game");  
      System.out.println("2\. Quit");  
      System.out.println("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~");  
      int optionSelect = input.nextInt();
      System.out.println("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~");  
      while(optionSelect!=1 && optionSelect !=2){
         System.out.println("Please enter 1 (New Game) or 2(Quit)");
         optionSelect = input.nextInt();}
      if (optionSelect == 1)
         System.out.print("START GAME HERE********");
      else if (optionSelect == 2)
         System.out.println("Thanks for playing! Have a great day.");  
   }

   public static void drawBoard(){
            for(int row1 = 0; row1 < 4; row1++) {
         System.out.println(""); // this will create a new line for each new row
         for(int col1 = 0; col1 < 4; col1++) {
          clearBoard[row1][col1]='.'; // this will print out the 4 row variable values            
         }        
      }

      System.out.format("   %2s %2s %2s %2s \n",'A','B','C','D');
      System.out.format("   %2s %2s %2s %2s \n",'-','-','-','-');
      System.out.format("1 |%2s %2s %2s %2s \n",clearBoard[0][0],clearBoard[0][1],clearBoard[0][2],clearBoard[0][3]);
      System.out.format("2 |%2s %2s %2s %2s \n",clearBoard[1][0],clearBoard[1][1],clearBoard[1][2],clearBoard[1][3]);
      System.out.format("3 |%2s %2s %2s %2s \n",clearBoard[2][0],clearBoard[2][1],clearBoard[2][2],clearBoard[2][3]);
      System.out.format("4 |%2s %2s %2s %2s \n",clearBoard[3][0],clearBoard[3][1],clearBoard[3][2],clearBoard[3][3]);  

      System.out.println("Please enter a column (A,B,C, or D) and row (1,2,3,or 4). Ex: A3 : ");
      String userInput = input.nextLine();
      userInput = userInput.toUpperCase().trim();

   } 
} 
```

我不确定如何初始化 的值`letterBoard`来表示卡片的初始随机放置。如何在我的 Java 代码中“发牌”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T04:17:35.817

可能有几种方法可以做到这一点。一种可能的解决方案是执行以下操作：

```
for each letter from 'a' to 'h'
    pick two random locations
    if the given location is not yet used
        place the letter at the location 
```

我刚刚用伪代码勾勒了这一点，以便您可以自己在 Java 中计算出细节。您很可能希望在自己的方法中编写它，并可能创建主要方法调用以执行特定任务的辅助方法。

# c# - Clickonce SQL Server CE 安装位置

> ID：13576531
> 
> 赞同：2
> 
> 时间：2012-11-27T02:31:44.507
> 
> 标签：c#, entity-framework-4, windows-8, sql-server-ce, clickonce

我正在使用实体框架迁移、SQL Server CE 4.0，并通过 Clickonce 进行分发。

在我`app.config`的，`datasource`是`DataSource=|DataDirectory|Mydb.sdf`。

```
<connectionStrings>
    <add name="MyContext" connectionString="DataSource=|DataDirectory|Mydb.sdf" providerName="System.Data.SqlServerCe.4.0"/>
  </connectionStrings> 
```

当我将它部署到 Windows XP 和 Windows 7 时，数据库将部署到如下所示：

```
C:\Users\kev\AppData\Local\Apps\2.0\Data\8Y5K2R4J.AM9\Y3D5WADC.HAX\myapp..tion_ab2e572047b7b084_0001.0000_66744c6353cd31ca\Data 
```

问题是 Windows 8 智能屏幕提示，用户点击继续运行，数据库是在 中创建的`application(exe) directory`，而不是上面的位置。

如何明确告诉 clickonce 在上面的目录中创建数据库？

* * *

发现这个：

由于 Windows 8 智能屏幕，它不起作用。

[http://support.microsoft.com/?kbid=920700](http://support.microsoft.com/?kbid=920700)

|数据目录| 替换字符串支持 |DataDirectory| （括在管道符号中）是指示数据库路径的替换字符串。因此，您不必在代码中包含完整路径。当您在代码中包含完整路径时，您可能会遇到问题，因为完整的数据库路径可以在不同的位置进行序列化。|数据目录| 替换字符串还可以轻松共享项目和部署应用程序。

例如，如果您在代码中包含完整路径，则应用程序可以具有以下连接字符串。

数据源= c:\program files\MyApp\Mydb.sdf 如果你使用 |DataDirectory| 替换字符串，应用程序可以有以下连接字符串。

数据源 = |DataDirectory|\Mydb.sdf 要设置 DataDirectory 属性，请调用 AppDomain.SetData 方法。如果不设置 DataDirectory 属性，将应用以下默认规则来访问数据库文件夹：•对于放在用户计算机上的文件夹中的应用程序，数据库文件夹使用应用程序文件夹。• 对于在 ClickOnce 下运行的应用程序，数据库文件夹使用创建的特定数据文件夹。注意 .NET Compact Framework 不支持基于 Microsoft Windows Mobile 的设备上的 AppDomain.SetData 方法。如果应用程序在基于 Windows Mobile 的设备上调用 AppDomain.SetData 方法，您会收到一条错误消息。

# asp.net - 从 SQL Server 中“内部联接”下返回的行中按名称获取值

> ID：13576533
> 
> 赞同：0
> 
> 时间：2012-11-27T02:31:57.793
> 
> 标签：asp.net, .net

我在 ASP.Net 页面中使用了一些存储过程。我经常在引号之间使用行号或行的名称，但我找不到按名称访问内连接表的方法：

```
 Dim conn As New SqlConnection("my_connection_string")
    Dim mycommand As New SqlCommand("last_played_songs", conn)
    mycommand.CommandType = CommandType.StoredProcedure
    mycommand.Parameters.AddWithValue("@userid", userid)
    conn.Open()
    Dim dr As SqlDataReader = mycommand.ExecuteReader()
    While dr.Read()

        /* What I have: */
        Dim artist_image As String = dr(39) & "" & "/cover.jpg"      

        /* What I want. Let's say I called my table ArtistProfile under inner join: */
        Dim artist_image As String = dr("ArtistProfile.uniqueID") & "/cover.jpg"

   End While 
```

似乎使用与内部联接一起使用的名称不是好的语法，但我找不到如何命名它以便能够访问“内部联接”表。数字索引的问题在于，如果 4-5 个连接表结构中的一个发生更改，则所有索引都在更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T03:04:20.703

别名存储过程中的字段名称以获得所需的输出

```
select 
  TableA.Name as 'TableA.Name',
  TableA.Age as 'TableA.Age',
  TableB.Address as 'TableB.Address'
from
  TableA INNER JOIN TableB ON TableA.ID = TableB.ID

-- Example using table alias in SQL
select 
  a.Name as 'TableA.Name',
  a.Age as 'TableA.Age',
  b.Address as 'TableB.Address'
from
  TableA a INNER JOIN TableB b ON a.ID = b.ID 
```

列的默认名称是字段名本身，因此在您的示例中它应该只是 dr("uniqueID")

# shell - >/dev/null 2>&1 是什么意思？

> ID：13576539
> 
> 赞同：2
> 
> 时间：2012-11-27T02:32:25.853
> 
> 标签：shell, scripting, null

```
diff file1 file2 >/dev/null 2>&1 
```

我知道这是做什么的。它正在运行命令 diff，并检查其退出状态，忽略 diff 的输出。

我只是不知道这部分是什么意思：

```
>/dev/null 2>&1 
```

什么是 > 和 &

（不知道这些叫什么，所以我无法查找）（这是在 Bourne Shell 中）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T02:34:45.333

`>/dev/null`将标准输出重定向到`/dev/null`，即丢弃输出。`2>&1`将标准错误重定向到标准输出；在这种情况下，这意味着也将所有错误输出扔掉。您可以通过谷歌搜索 shell 输出重定向以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:28:15.540

此外，由于只需要退出状态，因此可以将该命令简化为不需要将其输出重定向到位桶的命令：

```
cmp -s file1 file2 
```

# ruby - 为什么在我的 Heroku 驱动的 Sinatra 应用程序的 PostgreSQL 中存在挥之不去的开放连接？

> ID：13576543
> 
> 赞同：2
> 
> 时间：2012-11-27T02:33:03.963
> 
> 标签：ruby, postgresql, heroku, sinatra, sequel

我的网络应用程序位于[www.inflationtrends.com](http://www.inflationtrends.com)。

那里有几个计算器。第一个和第三个访问由 Heroku 托管的 PostgreSQL 数据库。该应用程序本身是使用 Sinatra 制作的。该应用程序使用 Ruby gem Sequel 访问 PSQL 数据库。

在我的“sinatra.rb”文件中，我使用以下代码连接到 PSQL 数据库：

```
before do
  db_name = "DATABASE NAME HERE"
  user = "DATABASE USER HERE"
  password = "DATABASE PASSWORD HERE"
  host = "DATABASE HOST NAME HERE"
  port = 5432
  sslmode = 'require'
  DB = Sequel.postgres(
    db_name,
    :user=>user,
    :password=>password,
    :host=>host,
    :port=>port,
    :sslmode=>sslmode
  )
end 
```

而且我还有一个“执行后”块，在页面加载时会断开与数据库的连接

```
after do
  DB.disconnect
end 
```

尽管有“DB.disconnect”代码，但我注意到当多台机器使用该应用程序时仍然有打开的连接。我注意到，当我运行以下代码时，当多个客户端访问应用程序时，“numbackends”（后端连接？）的数量会增加：

```
DB[
"SELECT *

FROM 
    pg_stat_database 

WHERE 
    datname = "DATABASE NAME HERE;"
].each{|r| p r} 
```

不过，我应该提一下，我在“sinatra.rb”文件中有如下代码：

```
get '/' do
    @variable = DB[
        "SQL CODE HERE"
    ]
    erb :index
end 
```

该代码在第三个计算器中获取“杂货清单”的项目。我不知道这是否会导致连接徘徊。我尝试在“erb :index”行之后添加“DB.disconnect”行，但这似乎并没有影响打开的连接数。

此外，在“index.erb”文件中调用了@variable，但我认为“after”循环中的“DB.disconnect”语句会处理它。我什至尝试将“DB.disconnect”添加到“index.erb”文件的末尾，但这似乎没有任何作用。

所以，我的问题是：即使有这些预防措施，为什么打开的连接数量还在继续增加？如何修复它以便在计算完成后关闭连接？

最后我要注意的是，我使用的 Heroku 提供的 PSQL 数据库一次最多支持 20 个打开的连接。

如果我需要提供更多信息/代码，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T17:31:23.077

`Database#disconnect`不会断开当前由其他线程使用的连接，因此如果另一个线程在您调用它时正在使用该连接（可能在多线程应用程序中），它不会断开这些连接。

默认情况下，每个对象最多有 4 个数据库连接`Sequel::Database`，因此除非您运行超过 5 个应用程序进程，否则您应该能够保持在 Heroku 的 20 个连接限制以下而无需任何手动断开连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T05:03:28.247

可能是由于数据库连接没有回退吗？我没有与 Sequel 合作过，但似乎您可能必须将中间件添加到您的堆栈中

```
use ActiveRecord::ConnectionAdapters::ConnectionManagement 
```

当然，对你来说，续集会是另外一回事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T10:44:21.300

不要像那样打开和关闭连接。在应用程序顶部打开与数据库的连接（之前不是），不要关闭它。

Ruby 应用程序作为一个进程运行，因此无需打开和关闭它。

# webserver - lfd - 资源使用过多：smmsp，超出处理时间

> ID：13576545
> 
> 赞同：3
> 
> 时间：2012-11-27T02:33:10.720
> 
> 标签：webserver

我正在使用带有 csf+lfd 的亚马逊 ec2，并且总是收到这种电子邮件：

时间：2012 年 11 月 27 日星期二 02:00:14 +0000
帐户：smmsp
资源：超过处理时间
：2722016 > 1800（秒）

可执行文件：/usr/sbin/sendmail.sendmail
命令行：sendmail: Queue runner@01:00:00 for /var/spool/clientmqueue
PID:
Killed: No

时间已经过去了数百万秒，不知道这是否正常。

# matlab - MATLAB。在矩阵中查找特定值并循环。

> ID：13576549
> 
> 赞同：0
> 
> 时间：2012-11-27T02:33:16.607
> 
> 标签：matlab, octave

嗨，我需要一些有关 matlab 的帮助。

我有一个 500 x 360 的矩阵。下面是一个示例数据集：

```
10 10 12 11 9 8 8 25 26 26 20 20 20 
20 22 26 20 20 19 30 31 33 35 33 32
30 30 29 31 32 33 31 33 33 32 31 31
40 50 49 45 47 47 45 65 68 69 70 71 
```

代码必须执行以下操作：

1.  查找我指定的值的第一次出现，在本例中是 20% 的变化。因此观察 (1,:)，第一次出现 20% 的变化是在第 2 列和第 3 列之间。
2.  然后它识别出在步骤 1 中指定的值之后出现的最低值。在本例中是第 6 列（即值 8）。然后代码测量从步骤 1 中指定的值到步骤 2 中出现的最小值所经过的时间。回顾示例，20% 的 delta 为 (1,3) = 12，最小值出现在 delta 20% 之后是 (1,6) = 8。经过的时间是 3。
3.  然后代码从步骤 2 中找到的最小值中找到最大值。在这种情况下，第 9 列的值为 26。它还记录了经过的时间。
4.  最后，代码测量从第一个增量值到找到的最高值所经过的时间。在这种情况下，是从 (1,3) 到 (1,9) 的时间，即 6。

所以输出看起来像这样：

```
12  8   3   26  3   6
26  19  3   35  4   3
NaN NaN NaN NaN NaN NaN
50  45  2   71  8   10 
```

我感谢您的帮助。非常感谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:11:58.177

我现在无法访问 matlab。但这里有一些步骤可以帮助您入门。请仔细检查您的测试用例的答案，以查看您获得所需的结果。

假设您有一个行向量`x`。在你的情况下说`i`你的数据矩阵的第 th 行，即`x = data(i,:);`

现在要找到（比如说）20% 变化的第一次出现，您可以使用：

```
cI = find( x >= x(1)*1.2, 1, 'first' ); 
```

其中`cI`将是第一个值变化大于 20% 的索引，并且`x(cI)`是所需值。

next 找到这个值使用后的最小值

```
[minV, minI] = min(x( (cI+1):end )); 
```

并在此之后找到最大值：

```
[maxV, maxI] = max(x( (cI+minI+1):end )); 
```

最后把所有东西放在一起：

```
[x(cI), minV, minI, maxV, maxI, (minI + maxI)] 
```

这将适用于您的第一行。现在对于第三行，您需要确保`cI`有一个值。如果`cI`为空，则只需使用`NaN(1,6)`.

如果`cI+1`或`cI+minI+1`超过元素的数量，将会有类似的错误检查。如果您正在寻找的更改发生得太晚，就会发生这种情况。

首先，您可以在每一行 ( ) 上设置一个`for`-loop `i`，但必须有更好的方法来矢量化代码。

整个设置为使用`for`-loop

```
% I have used generic variable names. Change them to something meaningful.
data = rand(500,360); % Use your data
change = 0.2;   % or 20/100 if you prefer percentage
[nROWS, nCOLS] = size(data);
result = NaN( nROWS, 6); % Defining it this way saves the trouble to having to assign NaNs

for row = 1:nROWS
    x = data( row, : );   % Not required, but easy to write code

    cI = find( x >= x(1)*(1+change), 1, 'first' );
    if isempty(cI)
        continue;
    end
    if cI == nCOLS  % no more elements to find min and max from
        result(row, 1) = x(cI);
        continue;
    end

    [minV, minI] = min(x( (cI+1):end ));
    if (cI + minI) == nCOLS % no more elements to find max from
        result(row, 1:3) = [x(cI), minV, minI];
    end

    [maxV, maxI] = max(x( (cI+minI+1):end ));
    result(row, :) = [x(cI), minV, minI, maxV, maxI, (minI + maxI)];
end 
```

# django - 如何在使用 django social-auth 的开发环境中使用 facebook 登录？

> ID：13576551
> 
> 赞同：6
> 
> 时间：2012-11-27T02:33:33.433
> 
> 标签：django, facebook, django-socialauth

我在我的 django 网络应用程序中使用了 social-auth。当我在生产环境中访问 /login/facebook 时，用户可以使用他们的 facebook 数据登录。但是在我的开发环境中，当我访问

```
http://localhost:8000/login/facebook/, 
```

我收到一条错误消息

```
An error occurred. Please try again later.

API Error Code: 191
API Error Description: The specified URL is not owned by the application
Error Message: Invalid redirect_uri: Given URL is not allowed by the Application configuration. 
```

我相信这是因为域是 localhost:8000。我该如何解决这个问题，以便我可以在我的开发环境中使用 facebook 登录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T05:12:40.550

在阅读 Heroku/Facebook 文档时，我刚刚看到了一个答案。

为此，您必须创建第二个应用程序并将其链接到您的本地主机，以便在本地对其进行测试。

你可以在这里找到更多信息：[https ://devcenter.heroku.com/articles/facebook#1-creating-a-development-facebook-app](https://devcenter.heroku.com/articles/facebook#1-creating-a-development-facebook-app)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-11T13:31:33.347

我找到的最简单的解决方案是修改主机文件来欺骗 Facebook：

1/ 编辑主机文件

*   打开 /etc/hosts
*   并在最后添加这一行：127.0.0.1 dev.mydomain.com

2/ 在 Facebook 开发控制台 ( [https://developers.facebook.com/apps/](https://developers.facebook.com/apps/) *********)

*   选择“测试应用”>“创建测试应用”
*   在“设置”>“基本”> 将域 (dev.mydomain.com) 添加到“应用程序域”字段中。

完毕！

参见： [https ://groups.google.com/forum/#!topic/django-social-auth/gB1D8ikgUwM](https://groups.google.com/forum/#!topic/django-social-auth/gB1D8ikgUwM)

# sql - Oracle Sql：外键也是主键语法

> ID：13576553
> 
> 赞同：3
> 
> 时间：2012-11-27T02:33:39.647
> 
> 标签：sql, oracle, foreign-keys, primary-key, syntax-error

我只是有一个关于符号的快速问题。我现在有两张桌子。

这个有基本的动物信息：

```
 create table d_animals (
  an_id     integer     primary key
, an_gender varchar2(1) not null
, an_dob    date        not null
, an_name   varchar2(10)    not null
); 
```

这是关于猫的：

```
 create table d_cats (
       an_id                        integer     primary key
     , feline_leukemia_test_date    date        not null
     , an_id    foreign key references d_animals_(an_id)
     ); 
```

如您所见，我试图使用 an_id 作为 d_cats 中的主键，但也引用了 d_animals 表中的 an_id。我收到 d_cats 的以下错误：

```
 ORA-00957: duplicate column name 
```

那么我该如何正确地写这个呢？

另外，我不想为 d_cats 创建另一列。我的教授希望我们只用 an_id 和 feline_leukemia_test_Date 编写 d_cats。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T02:51:24.907

使用命名约束，即：

```
create table d_cats (
   an_id                        integer     primary key
 , feline_leukemia_test_date    date        not null
 , constraint d_cats_animals_fk foreign key (an_id) references d_animals (an_id)
 ); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-27T03:41:48.413

您也可以内联外键：

```
create table d_cats
( an_id                        integer     primary key references d_animals(an_id)
, feline_leukemia_test_date    date        not null
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T02:35:32.380

为外键使用不同的名称。

```
create table d_cats (
       an_id                        integer     primary key
     , feline_leukemia_test_date    date        not null
     , cats_an_id    foreign key references d_animals_(an_id)
     ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-04T15:55:34.820

如果您需要使用与 d_animals 表相同的列作为主键和外键，则可以使用以下语句。

```
CREATE TABLE d_cats
(
  an_id                      INTEGER PRIMARY KEY,
  feline_leukemia_test_date  DATE NOT NULL,
  CONSTRAINT PK_d_cats_an_id PRIMARY KEY (an_id),
  CONSTRAINT FK_d_cats_an_id FOREIGN KEY (an_id) REFERENCES d_animals(an_id)
); 
```

# c# - 打印时将行设置为在顶部重复 - 打开 XML 和 Excel

> ID：13576555
> 
> 赞同：3
> 
> 时间：2012-11-27T02:33:55.740
> 
> 标签：c#, excel, openxml, excel-2010, xlsx

我试图让 xlsx 文件的前 4 行在打印时在每页的顶部重复。我正在使用 Open XML SDK 来完成此操作。

我的文件由 SSRS 执行 Web 服务作为文件流生成。然后，在将文件交付给用户之前，我需要修改几个布局和页面设置（边距、页面大小、缩放等），因为我的用户对 Excel 的敏锐度非常低。我需要调整的所有其他设置都可以正常工作，因此我已经从这个示例中删除了所有这些代码。

当尝试使用下面的代码设置重复的页眉时，它执行没有错误。但是，当我在执行代码后尝试打开文件时，我收到一条损坏的文件消息，并且无法打开。

知道我在这里做错了什么吗？！这让我疯狂！

```
using (SpreadsheetDocument xl = SpreadsheetDocument.Open("C:\\" + filename, true))
{
WorkbookPart wbp = xl.WorkbookPart;

//-----------------------------------------
// repeat rows at top when printing
//-----------------------------------------
DefinedNames dn = new DefinedNames();
wbp.Workbook.Append(dn);
wbp.Workbook.Save();

DefinedNames definedNames = wbp.Workbook.Descendants<DefinedNames>().FirstOrDefault();
DefinedName n1 = new DefinedName() { Name = "_xlnm.Print_Titles", LocalSheetId = (UInt32Value)0U };
n1.Text = "alpha_sort_nc!$1:$4";
definedNames.Append(n1);
wbp.Workbook.Save();

xl.Close();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T11:27:22.537

**更新：** @Duncan - 在您发表评论后，我试图找出文件损坏的根本原因。原来`SpreadsheetPinterSettings`是文档中的二进制数据。甚至将 DefinedName 添加`_xlnm.Print_Titles`到电子表格；**它在Print/Print Preview**期间没有任何效果。

处理电子表格打印机设置的 Open XML 方法似乎没有帮助。

**反映来自 Open XML SDK 生产力工具的代码：**在 MS Excel 中手动创建打印标题

```
// Adds child parts and generates content of the specified part.
public void CreateSpreadsheetPrinterSettingsPart(SpreadsheetPrinterSettingsPart part)
{
    GeneratePartContent(part);

}

// Generates content of part.
private void GeneratePartContent(SpreadsheetPrinterSettingsPart part)
{
    System.IO.Stream data = GetBinaryDataStream(partData);
    part.FeedData(data);
    data.Close();
}

#region Binary Data
private string partData = "MQAyADcALgAwAC4AMAAuADEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEEAAbcAHweXf+AAwEAAH/qCm8IZAABAA8A/P8CAAEA/P8DAAEATABlAHQAdABlAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAgAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFBSSVbiMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAQJxAnECcAABAnAAAAAAAAAABYAywGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAABQGBAAXEsDAGhDBAAAAAAAAAAAAAEAAQAAAAAAAAAAAAAAAAAAAAAA8q/OjRwAAAAAAAAAAAABAAAAAAD/AP8AAAABAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAABYAwAAU01USgAAAAAQAEgDSABQACAAQwBvAGwAbwByACAATABhAHMAZQByAEoAZQB0ACAAMgA4ADAAMAAgAFMAZQByAGkAZQBzACAAUABTAAAASFBPcmllbnRSb3RhdGUxODAARmFsc2UAUG9zdFNjcmlwdEN1c3RvbVBhZ2VTaXplAEZhbHNlAER1cGxleABOb25lAElucHV0U2xvdABBdXRvAEhQRHVwbGljYXRlSm9iTmFtZU92ZXJyaWRlAFNXRlcAUGFnZVNpemUATEVUVEVSAFBhZ2VSZWdpb24AAExlYWRpbmdFZGdlAABNZWRpYVR5cGUAQXV0bwBDb2xsYXRlAFRydWUAT3V0cHV0QmluAEF1dG8AU3RhcGxlTG9jYXRpb24ATm9uZQBIUENvdmVycwBPdGhlcl9QYWdlcwBUZXh0QXNCbGFjawBGYWxzZQBKQ0xSZXNvbHV0aW9uADYwMGRwaQBIUENvbnN1bWVyQ3VzdG9tUGFwZXIAVHJ1ZQBQcmludFF1YWxpdHlHcm91cABQUUdyb3VwXzEASlJIREluc3RhbGxlZABKUkhET2ZmAEhQRG9jUHJvcFJlc291cmNlRGF0YQBIUENhYkZpbGVOYW1lAEpSQ29uc3RyYWludHMASlJDSERGdWxsAEhQQ29sb3JNb2RlAENPTE9SX01PREUASFBQSkxFbmNvZGluZwBVVEY4AEhQSm9iQWNjb3VudGluZwBIUEpPQkFDQ1RfSk9CQUNOVABIUEJvcm5PbkRhdGUASFBCT0QASFBYTUxGaWxlVXNlZABocG1jcGRwcy54bWwAUFNBbGlnbm1lbnRGaWxlAEhQWkxTTEhOAEhQU21hcnRIdWIASW5ldF9TSURfMjYzX0JJRF81MTRfSElEXzI2NQBIUENvbG9yQXNHcmF5AEZhbHNlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUBgAAElVUEgQABEAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAGQAAQABAAMAAgAAAAEAAAACAAAATABlAHQAdABlAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH/qCm8IAAD///////////////8BAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAFsAbgBvAG4AZQBdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAWwBuAG8AbgBlAF0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAUAAAAAAAAAABAAAAAAAAAMDAwAAAAAAAwMDAAAAAAAAAAAAAAAAAAAAAAAAAfwAAAQAAAGQAAAAAAAAAAAAAAAAAAAAAAIA/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABKAEUARQBWAEEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAADwAAAAABAAAAAAAADwAAAAABAAAAAAAA/////wAAAAAAAAAADwAAAAABAAAPAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAA0CAAANAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGQAAAABAAAATQBpAGMAcgBvAHMAbwBmAHQAIABFAHgAYwBlAGwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAD/////RVhDRUwuRVhFAAAAAAAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAPAAAAAAEAAA8AAAAAAQAADwAAAAABAAAPAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAIAAAAAAQwA6AFwAUAByAG8AZwByAGEAbQAgAEYAaQBsAGUAcwBcAE0AaQBjAHIAbwBzAG8AZgB0ACAATwBmAGYAaQBjAGUAXABPAGYAZgBpAGMAZQAxADQAXABFAFgAQwBFAEwALgBFAFgARQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=";

private System.IO.Stream GetBinaryDataStream(string base64String)
{
    return new System.IO.MemoryStream(System.Convert.FromBase64String(base64String));
}

#endregion 
```

**替代方法[我不确定，您是否感兴趣:)]：**由于二进制数据部分，使用互操作的相同代码片段。完美运行！

```
Excel.Application xlApp = new Excel.Application();
Excel._Workbook xlWorkbook = xlApp.Workbooks.Open(@"C:/Users/jeeva/sample-excel-files/SampleExcel.xlsx");
Excel._Worksheet xlWorksheet = xlWorkbook.Sheets[1];

xlWorksheet.PageSetup.PrintTitleRows = "$1:$1";

xlWorkbook.Save();
xlWorkbook.Close(); 
```

* * *

前一个：

这三行不是必要的。

```
DefinedNames dn = new DefinedNames();
wbp.Workbook.Append(dn);
wbp.Workbook.Save(); 
```

要设置打印标题，DefinedName Text 的格式应为**"Worksheet_name!Row_Range or Column_Range"**。
例如：行范围：`Worksheet1!$1:$1`和列范围：`Worksheet1!$A:$A`

```
using (SpreadsheetDocument xl = SpreadsheetDocument.Open(@"C:/Users/jeeva/sample-excel-files/SampleExcel.xlsx", true))
{             
    WorkbookPart wbp = xl.WorkbookPart;

    // Input for this program
    string name = "_xlnm.Print_Titles";
    string comment = "this is Print Titles for Sheet1";
    string text = "Sheet1!$1:$1";

    if (wbp.Workbook.DefinedNames == null) 
    {
        wbp.Workbook.DefinedNames = new DefinedNames();
    }                

    bool bFound = false;
    foreach (DefinedName d in wbp.Workbook.DefinedNames)
    {
        // if found overwrite existing defined name
        if (d.Name.Value.Equals(name, StringComparison.InvariantCultureIgnoreCase)) 
        {
            bFound = true;
            d.Text = text;
            d.Comment = comment;
            break;
        }
    }

    if (!bFound) // if not found, add one
    {
        wbp.Workbook.DefinedNames.Append(getDefinedName(name, text, comment));
    }

    wbp.Workbook.Save();
    xl.Close();
}

private static DefinedName getDefinedName(string Name, string Text, string Comment)
{
    DefinedName dn = new DefinedName();
    dn.Text = Text;
    dn.Name = Name;
    dn.Comment = Comment;
    dn.LocalSheetId = (UInt32Value)1U;
    dn.Xlm = true; // since its a special schema name
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-22T09:55:58.610

下面的代码块解决了我的问题：

```
string fileName = AppDomain.CurrentDomain.BaseDirectory + "/Content/Master-License-Export.xlsx";
                    var spreadsheetDocument = SpreadsheetDocument.Open(fileName, true);           
                    WorkbookPart wbp = spreadsheetDocument.WorkbookPart;

                    UInt32 localSheetId = 0;    //LocalSheetIds are 0-indexed.

                    var definedName = new DefinedName
                    {
                        Name = "_xlnm.Print_Titles",
                        LocalSheetId = localSheetId,
                        Text = String.Format("\'{0}\'!${1}:${2}", "Master-License-Export", 1, 4)
                    };

                    if (wbp.Workbook.DefinedNames == null)
                    {
                        var definedNamesCol = new DefinedNames();
                        wbp.Workbook.Append(definedNamesCol);
                    }

                    wbp.Workbook.DefinedNames.Append(definedName);

                    wbp.Workbook.Save();
                    spreadsheetDocument.Close(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-03-16T15:29:49.713

这可以通过[ClosedXML](http://closedxml.codeplex.com/wikipage?title=Sheet%20Tab&referringTitle=Documentation)

```
Worksheet.PageSetup.SetRowsToRepeatAtTop(1, 5); 
```

# servlets - Servlet 类实例化失败（奇怪）

> ID：13576556
> 
> 赞同：0
> 
> 时间：2012-11-27T02:34:02.650
> 
> 标签：servlets, runtime-error

我在 Eclipse 动态 Web 项目中编写了一个简单的 servlet 类，将 servlet-api.jar 添加到其构建路径中，但是当我尝试运行它时，出现 servlet 类实例化错误。需要帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:37:27.943

JAVA_HOME 的错误路径是问题..我的错误

# velocity - 将列表项与变量进行比较

> ID：13576557
> 
> 赞同：2
> 
> 时间：2012-11-27T02:34:03.680
> 
> 标签：velocity

我正在尝试以速度在列表中进行搜索。我有一个国家代码列表，我设置如下：

```
#set($Europe=(['ee','ja','ku','aa' ]) 
```

我有一个变量（$cntryCode），已经设置了我想与列表中的每个项目进行比较，以查看该国家/地区是否来自该地区（在本例中为欧洲，或者不是）。

我做了：

```
#foreach ($cntryCode in $Europe)
#set ($region="Europe")
#end 
```

但它不起作用。另外，我试过：

```
#if ($Europe.contains($cntryCode)
#set($regio="Europe")
#end
#end 
```

但也不起作用。

这是我的第一个问题，然后我需要为某些国家/地区设置多个区域......知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T13:08:54.967

不确定您到底要做什么，但对我有用的是以下内容，即遍历列表并检查是否找到该元素：

```
## pre-set by some other code
#set($cntrCode = 'ja')

#set($Europe=(['ee','ja','ku','aa' ]) ) 

#foreach ($eu in $Europe)
#if($eu.equals($cntrCode))
    found country code $cntrCode in $Europe
#end
#end 
```

在这种情况下，$Europe 似乎是 java.lang.ArrayList 类型，所以下面的也是有效的

```
#if($Europe.contains($cntrCode))
    found country code $cntrCode in $Europe.class
#end 
```

我希望这可以帮助您入门，否则[Velocity 用户指南](http://velocity.apache.org/engine/releases/velocity-1.7/user-guide.html)和其他文档也应该为如何在 Velocity 中处理这些事情提供有用的信息。

# objective-c - 标签阻止按钮单击

> ID：13576558
> 
> 赞同：0
> 
> 时间：2012-11-27T02:34:05.217
> 
> 标签：objective-c

我有一个带有标签的按钮。标签挡住了按钮，所以我无法单击它。

```
timerView = [[UIView alloc] initWithFrame:CGRectMake(0, 278, 105, 27)];
[self.view addSubview:timerView];

UIButton *timerBackground = [UIButton buttonWithType:UIButtonTypeCustom];
[timerBackground setBackgroundImage:[UIImage imageNamed:@"Time Background.png"] forState:UIControlStateNormal];
[timerBackground setBackgroundImage:[UIImage imageNamed:@"Time Background.png"] forState:UIControlStateHighlighted];
[timerBackground addTarget:self action:@selector(openTimeChanger) forControlEvents:UIControlEventTouchUpInside];
timerBackground.frame = CGRectMake(-2 , 15, 102, 27);
[timerView addSubview:timerBackground];

DateDay = [[UILabel alloc] initWithFrame:CGRectMake(6, 4, 20, 21)];
DateDay.backgroundColor = [UIColor clearColor];
DateDay.textColor = [UIColor whiteColor];
[timerBackground addSubview:DateDay]; 
```

我希望标签对点击是“透明的”，所以我可以点击按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:31:39.643

UILabel 不会阻止触摸，但您的视图层次结构会。我添加了一些颜色来调试它：

![在此处输入图像描述](../Images/f3f9eac1d405d9fd39f5c7decb589d43.png)

1.  timerView — 绿色
2.  timerBackground - 红色
3.  DateDay - 黑色

如您所见，您的按钮正在扩展其父级，因此绿色边界之外的所有内容都处于非活动状态，实际上，如果您单击黑色矩形的最顶部，按钮和父级在标签下重叠 - 您将获得一个点击事件。

要解决此问题，只需对齐您的视图，使它们彼此位于内部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:31:43.327

试试这个，

```
DateDay.userInteractionEnabled = NO; 
```

还要检查在此之上是否没有其他视图。并正确对齐您的视图以检测触摸。如果您将框架设置为不会检测到任何触摸`CGRectMake(-2 , 15, 102, 27);`的区域之外的区域。`timerView`

检查您是否可以按以下方式更改代码以检测触摸，

```
timerView = [[UIView alloc] initWithFrame:CGRectMake(0, 278, 105, 27)];
[self.view addSubview:timerView];

UIButton *timerBackground = [UIButton buttonWithType:UIButtonTypeCustom];
[timerBackground setBackgroundImage:[UIImage imageNamed:@"Time Background.png"] forState:UIControlStateNormal];
[timerBackground setBackgroundImage:[UIImage imageNamed:@"Time Background.png"] forState:UIControlStateHighlighted];
[timerBackground addTarget:self action:@selector(openTimeChanger) forControlEvents:UIControlEventTouchUpInside];
timerBackground.frame = CGRectMake(0, 0, 100, 27);
[timerView addSubview:timerBackground];

DateDay = [[UILabel alloc] initWithFrame:CGRectMake(6, 4, 20, 21)];
DateDay.backgroundColor = [UIColor clearColor];
DateDay.textColor = [UIColor whiteColor];
[timerBackground addSubview:DateDay]; 
```

如果您仍想将您`timerBackground`的框架保留为`CGRectMake(-2 , 15, 102, 27);`，请将其添加为子视图`self.view`而不是添加`timerView`并将您的框架设置为，

```
timerBackground.frame = CGRectMake(0, 263, 100, 27);//or timerBackground.frame = CGRectMake(-2, 263, 102, 27); 
```

并将子视图添加为，

```
[self.view addSubview:timerBackground]; 
```

在旁注中，请使用`dateDay`变量名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T03:45:31.950

您的标签视图位于按钮的顶部，只需像这样更改代码

```
 timerView = [[UIView alloc] initWithFrame:CGRectMake(0, 278, 105, 27)];
 [self.view addSubview:timerView];

  DateDay = [[UILabel alloc] initWithFrame:CGRectMake(6, 4, 20, 21)];
  DateDay.backgroundColor = [UIColor clearColor];
  DateDay.textColor = [UIColor whiteColor];
  [timerBackground addSubview:DateDay];

  UIButton *timerBackground = [UIButton buttonWithType:UIButtonTypeCustom];
 [timerBackground setBackgroundImage:[UIImage imageNamed:@"Time Background.png"]forState:UIControlStateNormal];
 [timerBackground setBackgroundImage:[UIImage imageNamed:@"Time Background.png"]forState:UIControlStateHighlighted];
 [timerBackground addTarget:self action:@selector(openTimeChanger)  forControlEvents:UIControlEventTouchUpInside];
  timerBackground.frame = CGRectMake(-2 , 15, 102, 27);
  [timerView addSubview:timerBackground]; 
```

# php - 一个创建号码、搜索数据库以查找号码并重复直到找到唯一号码的脚本是否是一个不好的脚本？

> ID：13576564
> 
> 赞同：-1
> 
> 时间：2012-11-27T02:34:56.843
> 
> 标签：php, mysql, numbers, unique

好的，所以我编写了一个脚本，它将创建一个随机数，检查数据库，如果用户 ID 行中存在数字，它将重新创建一个新数字并继续，直到它找到一个可用的数字......我开始思考，如果我的网站变得巨大，那么它试图随机查找数字并可能不得不不断重复自己，这不是一件可怕的事情......有没有更好的方法来做到这一点，或者这是要走的路线？

用户 ID 不是私人号码，因为它可用于访问用户个人资料……它的设置类似于 Facebook，其中一长串数字或用户名可以访问个人资料。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:00:42.543

我假设您（无论出于何种原因）试图阻止某人访问类似的页面

`profile/<user_id>`, 并看到`user_id`= 100, 然后尝试`profile/101`, `profile/102`, 等等, 等等。

如果是这种情况，那么您可以使用这样的东西（以及自动递增的 id）

```
class Crypt {

    public static function encrypt($data) {

        $config = LoadSomeConfig();

        // open the module to be used.  There are several listed at http://www.php.net/manual/en/mcrypt.ciphers.php     
        $mod = mcrypt_module_open($config->cipher, '', $config->mode, '');

        // use config set initialization vector.  We will use a constant here as we do not want to include this for decryption
        if (isset($config->vector)) {
            $iv = $config->vector;
        } else {
            die("NO IV SET!");
        }

        $key_size = mcrypt_enc_get_key_size($mod);
        $key = substr($config->key, 0, $key_size);
        mcrypt_generic_init($mod, $key, $iv);

        // Do the encryption using the cipher module defined
        $encrypted = mcrypt_generic($mod, $data);

        // cleanup
        mcrypt_generic_deinit($mod);
        mcrypt_module_close($mod);

        // Changed the output based on the config encoding value.  Currently supported values, base64 and hex.
        switch ($config->encoding) {
            case "base64":
                $encrypted = base64_encode($encrypted);
                break;
            case "hex":
                $encrypted = bin2hex($encrypted);
                break;
            default:
                break;
        }
        return $encrypted;
    }

    public static function decrypt($data){

        if (empty($data)) {
            return '';
        }

        // config options set include the cipher, mode and secret key
        $config = LoadSomeConfig(); 

        // Change encrypted data base to binary based on the encoding mechanism used to generate the data
        switch ($config->encoding) {
            case "base64":
                $data = base64_decode($data);
                break;
            case "hex":
                $data = pack("H*", $data);
                break;
            default:
                break;
        }

        if (isset($config->vector)) {
            $iv = $config->vector;
        } else {
            die("NO IV SET!");
        }

        $mod = mcrypt_module_open($config->cipher, '', $config->mode, '');
        $key_size = mcrypt_enc_get_key_size($mod);
        // max key size is 448 bits
        $key = substr($config->key, 0, $key_size);
        mcrypt_generic_init($mod, $key, $iv);

        // decrypt the data
        $decrypted = mdecrypt_generic($mod, $data);

        // cleanup
        mcrypt_generic_deinit($mod);
        mcrypt_module_close($mod);

        return trim($decrypted);
    }
} 
```

然后你会有一个像`profile/c2ffd340ea3b71ca065e6add4143f36d`

在您的个人资料页面中，假设 user_id 可以在 中访问`user_id`，您可以简单地执行以下操作：

```
$user_id = Crypt::decrypt($user_id); 
```

并像往常一样进行。创建指向某人的个人资料页面的链接时，您将使用类似`profile/<?php echo Crypt::encrypt($user->user_id); ?>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:27:00.460

由于您的用户名是唯一的（我猜），也许让 /profile/ 控制器从 URL 中获取用户名并加载配置文件会更好。

另一种方式是，您不仅在我们的代码中添加了混淆的东西——如果您的加密代码由于某种原因发生了变化怎么办？所有外部链接、书签等将不再起作用。而且您将拥有更好的搜索引擎覆盖率，因为 URL 中的用户名比一些神秘的东西更有价值。啊，是的，当您决定散列时，您选择的任何算法都不会发生*理论上可能的冲突；）*

# objective-c - 如何进行通用应用程序 - 目标 C

> ID：13576568
> 
> 赞同：0
> 
> 时间：2012-11-27T02:35:33.790
> 
> 标签：objective-c, ios-universal-app

我有 2 个项目 - 一个是 iPhone，另一个是 iPad 项目。我想将它们集成到一个通用应用程序中，以便上传到 Appstore。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T02:42:09.527

发现答案的简单方法是从一个正常工作的通用应用程序开始。因此，例如，从主从应用程序模板开始并创建一个新的通用项目。看看它是如何构成的。它有两个故事板，具体取决于我们所在的平台。有些代码是有条件的，同样取决于我们所处的平台。

所以你会以任何对你有意义的方式组合你的代码/界面。具有独立界面的业务很容易（独立但平行的故事板、笔尖等）；困难的部分是如何处理部分共享和部分不共享的代码。必须维护大量条件代码非常烦人，因此有时拥有完全不同的类会更容易，一个您将在 iPad 上使用，另一个将在 iPhone 上使用。

我的书有一些关于如何根据您所在的平台测试要使用的代码集的建议：

[http://www.aeth.com/iOSBook/ch09.html#_choosing_a_device_architecture](http://www.apeth.com/iOSBook/ch09.html#_choosing_a_device_architecture)

向下滚动到该部分的末尾以获取有关此的一些重要提示。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-27T02:41:26.893

在应用程序项目中，转到目标并选择第一项，然后在摘要选项卡下选择设备并将其更改为通用，然后将所有 iPad 文件复制到另一个项目，或者如果您在 ipad 项目中执行复制所有的 iphone 文件，然后确保所有 .m 都在编译（检查 Build Phases 选项卡，我遇到了 xcode 没有添加要编译的文件的问题），然后在应用程序委托中确保检查 ether 它的iphone 设备或 ipad 设备并显示适当的 xib，或者如果您使用情节提要，只需将 iphone 情节提要的名称也放在该摘要选项卡中。

# javascript - 使用 2 个 JS 版本没有冲突

> ID：13576569
> 
> 赞同：0
> 
> 时间：2012-11-27T02:35:36.097
> 
> 标签：javascript, jquery

我正在向我的 magento 站点添加一个脚本，并且由于该脚本使用不同版本的 JS，因此出现原型错误

我试着做

$.noConflict(); // 使用其他库的 $ 的代码可以在这里跟随。

没有成功

没有冲突的最佳方法是什么？

```
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
<script>
$(function() {
    $( "#accordion" ).accordion({
        event: "click hoverintent"
    });
});

var cfg = ($.hoverintent = {
    sensitivity: 7,
    interval: 100
});

$.event.special.hoverintent = {
    setup: function() {
        $( this ).bind( "mouseover", jQuery.event.special.hoverintent.handler );
    },
    teardown: function() {
        $( this ).unbind( "mouseover", jQuery.event.special.hoverintent.handler );
    },
    handler: function( event ) {
        var that = this,
            args = arguments,
            target = $( event.target ),
            cX, cY, pX, pY;

        function track( event ) {
            cX = event.pageX;
            cY = event.pageY;
        };
        pX = event.pageX;
        pY = event.pageY;
        function clear() {
            target
                .unbind( "mousemove", track )
                .unbind( "mouseout", arguments.callee );
            clearTimeout( timeout );
        }
        function handler() {
            if ( ( Math.abs( pX - cX ) + Math.abs( pY - cY ) ) < cfg.sensitivity ) {
                clear();
                event.type = "hoverintent";
                // prevent accessing the original event since the new event
                // is fired asynchronously and the old event is no longer
                // usable (#6028)
                event.originalEvent = {};
                jQuery.event.handle.apply( that, args );
            } else {
                pX = cX;
                pY = cY;
                timeout = setTimeout( handler, cfg.interval );
            }
        }
        var timeout = setTimeout( handler, cfg.interval );
        target.mousemove( track ).mouseout( clear );
        return true;
    }
};
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T02:45:10.933

如果您只是在此匿名函数中使用 jQuery，则可以将所有内容包装在匿名函数中：

```
(function ($) {
    $( "#accordion" ).accordion({
        event: "click hoverintent"
    });

var cfg = ($.hoverintent = {
    sensitivity: 7,
    interval: 100
});

$.event.special.hoverintent = {
    setup: function() {
        $( this ).bind( "mouseover", jQuery.event.special.hoverintent.handler );
    },
    teardown: function() {
        $( this ).unbind( "mouseover", jQuery.event.special.hoverintent.handler );
    },
    handler: function( event ) {
        var that = this,
            args = arguments,
            target = $( event.target ),
            cX, cY, pX, pY;

        function track( event ) {
            cX = event.pageX;
            cY = event.pageY;
        };
        pX = event.pageX;
        pY = event.pageY;
        function clear() {
            target
                .unbind( "mousemove", track )
                .unbind( "mouseout", arguments.callee );
            clearTimeout( timeout );
        }
        function handler() {
            if ( ( Math.abs( pX - cX ) + Math.abs( pY - cY ) ) < cfg.sensitivity ) {
                clear();
                event.type = "hoverintent";
                // prevent accessing the original event since the new event
                // is fired asynchronously and the old event is no longer
                // usable (#6028)
                event.originalEvent = {};
                jQuery.event.handle.apply( that, args );
            } else {
                pX = cX;
                pY = cY;
                timeout = setTimeout( handler, cfg.interval );
            }
        }
        var timeout = setTimeout( handler, cfg.interval );
        target.mousemove( track ).mouseout( clear );
        return true;
    }
};

}(jQuery)); 
```

基本上，您将整个匿名函数包装在您的 javascript 周围，将 jQuery 作为 $ 传递给匿名函数，它将在这个匿名函数中“覆盖”原型。

这有帮助吗？

# java - java.lang.RuntimeException：将结果 ResultInfo{who=null, request=1, result=-1, data=intent} 传递给活动失败

> ID：13576570
> 
> 赞同：5
> 
> 时间：2012-11-27T02:35:41.057
> 
> 标签：java, android, runtimeexception, lang

在我的应用程序中，我点击了一个名为 Pick Photo 的按钮，它会加载图库。当我单击图库中的图像时，应用程序强制关闭，并且在我的 logcat 中我收到以下信息：

```
 java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=Intent { dat=content://media/external/images/media/3369 (has extras) }} to activity {cap.shot/cap.shot.LolcatActivity}: java.lang.NullPointerException
    at android.app.ActivityThread.deliverResults(ActivityThread.java:2655)
    at android.app.ActivityThread.handleSendResult(ActivityThread.java:2697)
    at android.app.ActivityThread.access$2000(ActivityThread.java:124)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:998)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3806)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    at dalvik.system.NativeStart.main(Native Method)
    Caused by: java.lang.NullPointerException
    at cap.shot.LolcatView.loadFromUri(LolcatView.java:137)
    at cap.shot.LolcatActivity.loadPhoto(LolcatActivity.java:384)
    at cap.shot.LolcatActivity.onActivityResult(LolcatActivity.java:299)
    at android.app.Activity.dispatchActivityResult(Activity.java:3988)
    at android.app.ActivityThread.deliverResults(ActivityThread.java:2651) 
```

我的 lolcatactivity.java 在这里可用：http: [//pastebin.com/AVL8CswT我的 lolcatview.java 在这里可用：](http://pastebin.com/AVL8CswT) [http](http://pastebin.com/vD7vCBgY) : //pastebin.com/vD7vCBgY

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T03:56:33.810

`getDrawable`在您的情况下返回 null 。您使用的 uri`setImageURI`可能无效，因此您将获得空值。

对drawable做一个null检查，如果drawable为null，你需要保释。

编辑：

```
if(drawable == null)
  return; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T04:25:10.237

我已经检查了你的代码，所以我认为你需要像这样替换你的按钮操作

```
 private static final int SELECT_PHOTO = 100

                    Intent photoPickerIntent = new Intent(
                            Intent.ACTION_PICK);
                    photoPickerIntent.setType("image/*");
                    startActivityForResult(photoPickerIntent, SELECT_PHOTO); 
```

并在您的开始活动结果中给出

```
@Override
protected void onActivityResult(int requestCode, int resultCode,
        Intent imageReturnedIntent) {
    System.out.println("requestcode" + requestCode + "result code "
            + requestCode + "intentt" + imageReturnedIntent);

    super.onActivityResult(requestCode, resultCode, imageReturnedIntent);

    switch (requestCode) {
    case SELECT_PHOTO:
        if (resultCode == RESULT_OK) {

            // InputStream imageStream;
            try {
                Uri selectedImage = imageReturnedIntent.getData();
                Bitmap yourSelectedImage = decodeUri(selectedImage);
                // imageStream = getContentResolver().openInputStream(
                // selectedImage);
                // Bitmap yourSelectedImage = BitmapFactory
                // .decodeStream(imageStream);
                try {
                    yourimageview.setImageBitmap(yourSelectedImage);
                    picArray = convertBitmap(yourSelectedImage);
                    String imagepath_new = getRealPathFromURI(selectedImage);

                    System.out.println("gakk" + imagepath_new);
                    String[] s = imagepath_new.split("/");
                    System.out.println(s[s.length - 1]);
                    String imageName1 = s[s.length - 1];
                    imageName1 = imageName1.replace(" ", "");

                } catch (Exception e) {
                    Toast.makeText(getApplicationContext(),
                            "Exception" + e, 1000).show();
                }

            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
        break; 
```

并且还添加这些行以避免在 Activity 中显示图像视图时出现内存泄漏。

```
private byte[] convertBitmap(Bitmap bm) {
    // int bytes = bm.getWidth() * bm.getHeight() * 4; // calculate how many
    // bytes our image
    // consists of. Use a
    // different value than
    // 4 if you don't use
    // 32bit images.

    // ByteBuffer buffer = ByteBuffer.allocate(bytes); // Create a new
    // buffer
    // bm.copyPixelsToBuffer(buffer); // Move the byte data to the buffer

    // byte[] array = buffer.array(); // Get the underlying array containing
    // the data.

    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    bm.compress(Bitmap.CompressFormat.PNG, 100, stream);

    byte[] array = stream.toByteArray();
    return array;
}

private Bitmap decodeUri(Uri selectedImage) throws FileNotFoundException {

    // Decode image size
    BitmapFactory.Options o = new BitmapFactory.Options();
    o.inJustDecodeBounds = true;
    BitmapFactory.decodeStream(
            getContentResolver().openInputStream(selectedImage), null, o);

    // The new size we want to scale to
    final int REQUIRED_SIZE = 140;

    // Find the correct scale value. It should be the power of 2.
    int width_tmp = o.outWidth, height_tmp = o.outHeight;
    int scale = 1;
    while (true) {
        if (width_tmp / 2 < REQUIRED_SIZE || height_tmp / 2 < REQUIRED_SIZE) {
            break;
        }
        width_tmp /= 2;
        height_tmp /= 2;
        scale *= 3;
    }

    // Decode with inSampleSize
    BitmapFactory.Options o2 = new BitmapFactory.Options();
    o2.inSampleSize = scale;
    return BitmapFactory.decodeStream(
            getContentResolver().openInputStream(selectedImage), null, o2);

}

public String getRealPathFromURI(Uri contentUri) {

    // can post image
    String[] proj = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(contentUri, proj, // Which columns to
                                                    // return
            null, // WHERE clause; which rows to return (all rows)
            null, // WHERE clause selection arguments (none)
            null); // Order-by clause (ascending by name)
    int column_index = cursor
            .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();

    return cursor.getString(column_index);

}

private Bitmap decodeFile(File f) {
    Bitmap b = null;
    try {
        // Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;

        FileInputStream fis = new FileInputStream(f);
        BitmapFactory.decodeStream(fis, null, o);

        fis.close();

        int scale = 10;
        // Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;
        fis = new FileInputStream(f);
        b = BitmapFactory.decodeStream(fis, null, o2);
        fis.close();
    } catch (IOException e) {

    }
    return b;
} 
```

希望这会帮助你

# asp.net - 如何制作可配置的 DisplayFormat 属性

> ID：13576571
> 
> 赞同：6
> 
> 时间：2012-11-27T02:36:02.900
> 
> 标签：asp.net, asp.net-mvc, custom-attributes

我有一个日期格式，如：

```
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:MM/dd/yyyy}")]
public DateTime? CreatedOn { get; set; } 
```

现在，我想让我的应用程序中的每种日期时间格式都从一个配置文件中读取。像：

```
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = SomeClass.GetDateFormat())]
public DateTime? CreatedOn { get; set; } 
```

但这不会编译。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T02:51:00.723

问题在于 .NET 只允许您将编译时常量放入属性中。另一种选择是继承`DisplayFormatAttribute`并在构造函数中查找显示格式，如下所示：

**SomeClass.cs**

```
public class SomeClass
{
    public static string GetDateFormat()
    {
        // return date format here
    }
} 
```

**DynamicDisplayFormatAttribute.cs**

```
public class DynamicDisplayFormatAttribute : DisplayFormatAttribute
{
    public DynamicDisplayFormatAttribute()
    {
        DataFormatString = SomeClass.GetDateFormat();
    }
} 
```

然后你可以这样使用它：

```
[DynamicDisplayFormat(ApplyFormatInEditMode = true)]
public DateTime? CreatedOn { get; set; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T02:39:02.663

我在基类中创建了一个字符串常量，并将我的视图模型子类化，以便我可以使用它。

例如：

```
public class BaseViewModel : IViewModel
{
    internal const string DateFormat = "dd MMM yyyy";
}

public class MyViewModel : BaseViewModel
{
    [DisplayFormat(ApplyFormatInEditMode = true,
                   DataFormatString = "{0:" + DateFormat + "}")]
    public DateTime? CreatedOn { get; set; }
} 
```

这样我也可以通过子类化来引用它：

```
public class AnotherViewModel
{
    [DisplayFormat(ApplyFormatInEditMode = true,
                   DataFormatString = "{0:" + BaseViewModel.DateFormat + "}")]
    public DateTime? CreatedOn { get; set; }
} 
```

# css - 父div上的div浮动问题

> ID：13576573
> 
> 赞同：0
> 
> 时间：2012-11-27T02:36:12.270
> 
> 标签：css, html, css-float

我在一个容器中有很多 div，我想将它们左对齐或右对齐，

问题是，当两个或多个 div 是相同的 class="left" 而不是全部向左时，第二个 div 位于另一个 div 旁边，因为它有空间。同样，当一个是“左”端时，另一个是“右”端，是的，它们可能并排在一起。

这是一个例子： http: [//www.bookingmallorca.co.uk/arq/prueba.html](http://www.bookingmallorca.co.uk/arq/prueba.html)

蓝色 div 是从父级到另一侧的 div，没关系，灰色 div 必须向左浮动，红色向右浮动，因为您可能会看到一个灰色没有很好地对齐，因为有

所以我需要一些东西来显示不同的浮动侧div，就像在那个例子中一样，并且相同的浮动值总是浮动在那个浮动值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:18:50.283

**您可以通过引入2 个额外的 .left 和 .right 浮动 div**来轻松做到这一点，如下所示。

***重要：***删除类的现有浮点属性

**HTML**

```
<body>
<div class="hola">
  <div class="left">
     <div class="pau"></div>
     <div class="losdos"></div>
     <div class="gerardo"></div>
     <div class="losdos"></div>
     <div class="pau"></div>
     <div class="gerardo"></div>
  </div>
  <div class="right">
    <div class="gerardo"></div>
    <div class="pau"></div>
    <div class="pau"></div>
    <div class="pau"></div>
    <div class="gerardo"></div>
  </div>
</div>
</body> 
```

**CSS**

```
.hola {
    height: 600px;
    margin: auto;
    width: 250px;
}
.hola .pau {
    background: none repeat scroll 0 0 #AFAFAF;
    height: 125px;
    width: 125px;
}
.hola .losdos {
    background: none repeat scroll 0 0 #5FC9F0;
    height: 125px;
    width: 125px;
}
.hola .gerardo {
    background: none repeat scroll 0 0 #F58787;
    height: 125px;
    width: 125px;
}
.hola .left{
    float: left;
    width: 125px;
}
.hola .right{
    float: right;
    width: 125px;
} 
```

​ 你可以在[JSFIDDLE上找到](http://jsfiddle.net/xE3zw/)**工作副本**

# objective-c - 如何使用 Objective-C 从 Java 服务器接收缓冲图像

> ID：13576575
> 
> 赞同：2
> 
> 时间：2012-11-27T02:36:40.120
> 
> 标签：objective-c, post, bufferedimage, outputstream, java-server

我正在开发一个 Ipad 应用程序。我必须使用 POST 方法向 Java 服务器发送请求，然后，Java 服务器将产生一个缓冲图像的输出流。如何使用objective-c接收这个缓冲图像？

POST 方法的代码：

```
NSURL * url = [NSURL URLWithString:urlString];
_request = [NSMutableURLRequest requestWithURL:url];

[_request setHTTPMethod:@"POST"];
[_request setValue:[NSString stringWithFormat:cmdString] forHTTPHeaderField:@"cmd"];
[_request setValue:[NSString stringWithFormat:paramString] forHTTPHeaderField:@"param"];

[NSURLConnection connectionWithRequest:_request delegate:self]; 
```

Java服务器的代码：

```
 OutputStream os=http.getResponseBody();
    String cmd=http.getRequestHeaders().getFirst("cmd");
    int cnt=Integer.valueOf(http.getRequestHeaders().getFirst("param"));
    System.out.println(cmd+"   "+cnt);
    int w,h;
    http.sendResponseHeaders(200,0);
    if(cmd.equals("1"))
    {
        w=512;
        h=512;
        idlmanager idl=new idlmanager();
        idl.createObject();
        byte[] buf=new byte[w*h*3+1];
        JIDLArray idlBuf=new JIDLArray(buf);
        JIDLNumber r=idl.UPDATEIMAGE(idlBuf,new JIDLInteger(1), new JIDLInteger(cnt));
        buf=(byte[]) idlBuf.arrayValue();
        int i,j;
        int[] data =new int[w*h];
        for(i=0;i<w*h;i++)
        {           
            data[i]=((buf[i*3]+256)%256)*256*256+((buf[i*3+1]+256)%256)*256+(buf[i*3+2]+256)%256;
        }

        int[] mask={255*256*256,255*256,255};
        ColorModel cm=new DirectColorModel(24,255*256*256 , 255*256,255);
        SampleModel sm=new SinglePixelPackedSampleModel(DataBuffer.TYPE_INT,w,h,mask);          
        DataBuffer db = new DataBufferInt(data, w*h);
        WritableRaster rast=Raster.createWritableRaster(sm,db, new Point(0,0));

        BufferedImage bufImg= new BufferedImage(cm, rast, false, null);
        ImageIO.write(bufImg, "png", os);
    }else if(cmd.equals("2")){....} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:43:12.033

最简单的方法是使用来自 NSURLConnection的[sendSynchronousRequest:returningResponse:error:。](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/occ/clm/NSURLConnection/sendSynchronousRequest%3areturningResponse%3aerror%3a)

```
__autoreleasing NSError *error = nil;
__autoreleasing NSURLResponse *response = nil;
NSData *responseData = [NSURLConnection sendSynchronousRequest:_request returningResponse:&response error:&error];
[responseData writeToFile:savePath atomically:YES]; 
```

假设`savePath`一个 NSString 包含一个有效的路径。

如果您想使用[connectionWithRequest:delegate:](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/occ/clm/NSURLConnection/connectionWithRequest%3adelegate%3a)如代码中所述，则必须实现以下委托方法：

```
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    NSLog(@"Error: %d %@", [error code], [error localizedDescription]);
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    responseData = [NSMutableData data];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [responseData appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    [responseData writeToFile:savePath atomically:YES]; 
} 
```

这里 responseData 是一个声明的实例变量：

```
NSMutableData *responseData; 
```

并且您的课程必须符合`NSURLConnectionDataDelegate`and`NSURLConnectionDelegate`协议。

# java - 冒泡排序数组升序

> ID：13576577
> 
> 赞同：0
> 
> 时间：2012-11-27T02:37:09.560
> 
> 标签：java, arrays, sorting, object, methods

我有一个数据文件，我需要按车辆的品牌和型号对信息进行排序。我的冒泡排序不起作用，你能帮我解决我的问题吗？非常感谢！PS 我不能有额外的方法:(如果我删除 getMake() 方法，它可以工作，但 && getModel 根本不起作用:(

```
 public static void sortByVehicleMakeModel(Vehicle[] vehicles) {
        for(int y = 0; y < vehicles.length; y++) {
            for (int x = 0 ; x < vehicles.length - 1 ; x++){
                if((vehicles[x].getMake().compareToIgnoreCase(vehicles[x+1].getMake()) > 0) && (vehicles[x].getModel().compareToIgnoreCase(vehicles[x+1].getModel()) > 0)) {    
                    swap(vehicles, x, x + 1);
                }           
            }
        }
        for(int x = 0; x < vehicles.length - 1; x++){
            System.out.println(vehicles[x].getMake());
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T02:41:22.260

请按照以下步骤比较两辆车：

*   比较两辆车的*品牌*
*   如果它们**不**相等，则返回比较结果
*   如果**相等**，比较*模型*并返回结果

您应该将*if 语句*中的代码替换为使用上述逻辑比较两个车辆的方法。

像这样的东西：

```
if (compareVehicles(vehicles[x], vehicles[x + 1]) > 0) {
    swap(vehicles, x, x + 1);
} 
```

* * *

要以正确的方式执行此操作，您应该使*Vehicle*实现*Comparable*。

这样你就可以把上面的逻辑放在你的*compareTo*方法中。

这将允许您简单地执行此操作：

```
if (vehicles[x].compareTo(vehicles[x + 1]) > 0) {
    swap(vehicles, x, x + 1);
} 
```

下面是一个如何实现 Comparable 的简单示例：

```
class Vehicle implements Comparable<Vehicle> {
    private String make;
    private String model;

    public int compareTo(Vehicle other) {
        if (other == null) {
            return -1;
        }
        int compareVal = make.compareToIgnoreCase(other.make);
        if (compareVal == 0) {
            return model.compareToIgnoreCase(other.model);
        }
        else {
            return compareVal;
        }
    }

} 
```

* * *

好的......因为已经有几天了，我将向您展示如何做到这一点。

```
public static void sortVehicles(Vehicle[] vehicles) {
    for (int i = 0; i < vehicles.length - 1; i++) {
        Vehicle curr = vehicles[i];
        Vehicle next = vehicles[i + 1];
        String currMake = curr.getMake();
        String nextMake = next.getMake();
        int compareVal = currMake.compareToIgnoreCase(nextMake);
        // if the makes are the same, we need to compare the models
        if (compareVal == 0) {
            String currModel = curr.getModel();
            String nextModel = next.getModel();
            compareVal = currModel.compareToIgnoreCase(nextModel);
        }
        if (compareVal > 0) {
            swap(vehicles, i, i + 1);
        }
    }

    for (Vehicle v : vehicles) {
        System.out.println(v.getMake());
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T02:43:50.527

只是为了提高性能（我意识到比较逻辑，@jahroy 是对的）。我认为在您的情况下，第二个循环的代码应如下所示： **x < Vehicles.length - y -1**

```
 for(int y = 0; y < vehicles.length; y++) {
        for (int x = 0 ; x < vehicles.length - y -1 ; x++){
            if((vehicles[x].getMake().compareToIgnoreCase(vehicles[x+1].getMake()) > 0) && (vehicles[x].getModel().compareToIgnoreCase(vehicles[x+1].getModel()) > 0)) {    
                swap(vehicles, x, x + 1);
            }           
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T20:53:03.223

这是我修复它的方法：

```
public static void sortByVehicleMakeModel(Vehicle[] vehicles) {

    for(int y = 0; y < vehicles.length; y++) {
        for (int x = 0 ; x < vehicles.length - 1 ; x++){
            boolean compare1 = (vehicles[x].getMake().compareToIgnoreCase(vehicles[x+1].getMake()) > 0);

        if (compare1){
            swap(vehicles, x, x + 1);

        }       

    }           
} 
```

# ruby - 正则表达式捕获 html 标签内的多个项目

> ID：13576578
> 
> 赞同：2
> 
> 时间：2012-11-27T02:37:10.697
> 
> 标签：ruby, regex, html-parsing

我正在尝试完成一项任务，我应该编写一个 Ruby 正则表达式来捕获 html 标签之间的项目，但我真的被卡住了。我到处搜索，但我只能找到关于使用 html 解析器和其他我认为不允许使用的程序的建议，因为到目前为止我们只学习了正则表达式。

示例文本是：

```
<span id="animal_display">
    <a href="/b/bird">Bird</a>     
    <a href="/c/cat">Cat</a>
    <a href="/c/dog">Dog</a>
</span> 
```

我试图捕捉`Bird` `Cat` `Dog`

使用这个正则表达式，我能够得到第一次出现：

```
 /<span id="animal_display">.*?<[^>]+>(.*?)<\/[^>]+>.*<\/span>/m 
```

我可以得到这三个，但我希望能够在可能包含三个以上项目的列表上使用正则表达式：

```
 /<span id="animal_display">\s*<[^>]+>\s*(.*?)<\/a>.\s*<[^>]+>\s*(.*?)<\/a>.\s*<[^>]+>\s*(.*?)<\/a>.<\/span>/ 
```

是否有更通用的正则表达式可以处理未指定数量的项目？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T02:46:02.773

我认为使用方便的 dom 解析器会让你的生活更轻松。

[https://www.ruby-toolbox.com/categories/html_parsing.html](https://www.ruby-toolbox.com/categories/html_parsing.html)

我建议查看 Ruby Toolbox 站点。

您会注意到 Nokogiri 是 HTML 解析器的首选，但您应该查看 hpricot。它非常好。它不是“核心”红宝石，但它是一种常用的宝石。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T03:01:28.330

这不是一个完整的答案，但有时可以通过从另一个方向解决问题来简化毛茸茸的捕获正则表达式 - 使用`split`：

```
html  = '...'
r     = / <a[^>]*>\s* | <\/a>[^<]+ /mx
parts = html.split(r)

parts.each { |p| puts p.inspect }

# Output
"<span id=\"animal_display\">                "
"Bird"
""
"Cat"
""
"Dog"
"</span>" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T02:46:27.700

试试这个

str.gsub(/</?[^>]*>/,"")

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T03:02:09.283

在现实生活中，我会使用[Nokogiri](http://nokogiri.org/)来解析它，但是你所上的课程似乎决心教你做事的方法不正确，所以这里有一种不使用解析器就可以得到结果的方法：

首先：

```
x = '<span id="animal_display">
         <a href="/b/bird">Bird</a>     
         <a href="/c/cat">Cat</a>
         <a href="/c/dog">Dog</a>
     </span>' 
```

然后：

```
x.scan(/<a.*?>(.*?)<\/a>/).flatten
 => ["Bird", "Cat", "Dog"] 
```

我不确定是否有办法创建一个匹配并返回任意数量列表项的正确结果的正则表达式；[使用子表达式调用](http://www.ruby-doc.org/core-1.9.3/Regexp.html#label-Subexpression+Calls)可能是可能的，但这非常复杂。

# html - 列表元素中的 CSS 对齐精灵

> ID：13576584
> 
> 赞同：1
> 
> 时间：2012-11-27T02:37:57.593
> 
> 标签：html, css, html-lists, css-sprites

我有这个列表菜单，我想为每个项目显示箭头，所以当你将鼠标悬停在项目上时，箭头会改变颜色。到目前为止，我的问题似乎是将此箭头与文本垂直居中对齐。正如您从屏幕截图中看到的那样，它略微偏离了。忽略箭头和超链接之间缺少的空格。

小提琴：http: [//jsfiddle.net/7xbse/](http://jsfiddle.net/7xbse/)

![截屏](../Images/9425e7e41ee0ca0c76224af70ded8880.png)

HTML,

```
<li ><a class="clear-block" href="http://wordpress.local/archives/category/announcements" title="View all posts filed under Announcements">
 <span class="tt">Announcements <strong>(1)</strong></span>
 <span class="c1"></span>
</a></li>
<li ><a class="clear-block" href="http://wordpress.local/archives/category/c-sharp" title="View all posts filed under C#">
 <span class="tt">C# <strong>(1)</strong></span>
 <span class="c1"></span>
</a></li>
<li  class="extends"><a class="clear-block" href="http://wordpress.local/archives/category/c-plus-plus" title="View all posts filed under C++">
 <span class="tt">C++ <strong>(1)</strong></span>
 <span class="c1"></span>
</a>
   <ul class="sub-menu">
    <li ><a class="clear-block" href="http://wordpress.local/archives/category/c-plus-plus/multiplexing-io" title="View all posts filed under Multiplexing I/O">
 <span class="tt">Multiplexing I/O <strong>(1)</strong></span>
 <span class="c1"></span>
</a></li>
   </ul>
</li> 
```

CSS，

```
.block ul.menu, .block ul.menu ul, .block ul.menu li, .block .box, .block .box .entry{
  margin:0;
  padding:0;
  list-style-type:none;
  line-height: normal;
}

.block ul.menu li, .block ul.box .entry{
  border-bottom:1px dotted #aaa;
  border-top:1px dotted #fff;
}

/* no border on 1st list item */
.block ul.menu li.first,
.block ul.menu li:first-child,
.block ul.box .entry.first,
.block ul.box .entry:first-child{border-top:0 !important;}

.block ul.menu li.last,
.block ul.menu li:last-child,
.block ul.box .entry.last,
.block ul.box .entry:last-child{border-bottom:0 !important;}

.block ul.menu li .expand{display: none;}

.block ul.menu li, .block ul.box .entry {
  position: relative;
  z-index: 5;
}

.block ul.menu li a {
  background:transparent url(../images/icons_old.png) no-repeat 4px -816px;
}

/* titles */
.block ul.menu .tt {
  display:block;
}

.block ul.menu a:hover .tt{
  text-decoration:underline;
}

/* content - primary */
.block ul.menu .c1{
  display:block;
  line-height: 150%;
  color:#333;
  text-decoration:none;
}

/* information block (left side) */
.block ul.menu .base {
  overflow:hidden;
  display:block;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T05:40:30.223

与其使用巨大的 CSS sprite，为什么不单独保存每个图像并利用`background-position: 0 50%`垂直居中图像这一事实呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:54:19.287

这是一个没有考虑菜单行高度的精灵图像的情况。所以箭头是不对齐的。诀窍是修复精灵。

# c# - 'PlaceHolder 不是已知元素' 警告

> ID：13576585
> 
> 赞同：3
> 
> 时间：2012-11-27T02:38:07.773
> 
> 标签：c#, asp.net, visual-studio-2010

`<asp:PlaceHolder runat="server">`这是我在其中一个 .aspx 页面中添加控件时收到的警告。我想知道如果我忽略它会不会有任何潜在的问题。

> 元素“PlaceHolder”不是已知元素。如果网站中存在编译错误，或者 web.config 文件丢失，则可能会发生这种情况。

我将`<asp:PlaceHolder runat="server">`控件放在`<head></head>`HTML 块中，代码如下所示。

```
<asp:PlaceHolder runat="server">
<%
    if (condition == met)
        Response.Write("<script type='text/javascript' src='" + ResolveClientUrl("~/a.js") "'></script>");
    else
        Response.Write("<script type='text/javascript' src='" + ResolveClientUrl("~/b.js") "'></script>");
%>
</asp:PlaceHolder> 
```

那么忽略警告是否安全？有什么建议或想法吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T02:46:53.973

根据[这个论坛](http://forums.asp.net/t/1285632.aspx)，Visual Studio 这样做是因为您将控件放在了头部。不过，这样做似乎是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T02:41:11.150

尝试将 id 属性添加到 asp:PlaceHolder 标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T02:58:08.143

您可以拥有母版页 runat=server 的头部，并在头部内放置一个 contentplaceholder。在内容页面中，你放入head中content占位符对应的内容的所有内容都会渲染到head中。

谢谢

# css - 一般“前一个”相邻 (+) 同级不工作

> ID：13576595
> 
> 赞同：0
> 
> 时间：2012-11-27T02:39:37.340
> 
> 标签：css, css-selectors

```
<span class='radio'>Place holder for Radio1</span>
<input checked type=radio name='radio' class='radio'>
<span class='radio'>Place holder for Radio2</span>
<input type=radio name='radio' class='radio'> 
```

在这种情况下，我只希望`<span>`与相应的单选按钮相关联是可见的，但是......

```
* {
    visibility:hidden
}
.radio + .radio:checked {
    visibility:visible;
} 
```

不起作用，而这样做：

```
* {
    visibility:hidden
}
.radio:checked + .radio {
    visibility:visible;
} 
```

那么为什么我不能选择和操作与*前一个*相邻兄弟相关的 css 呢？

[[jsfiddle]](http://jsfiddle.net/tLv3C/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T02:44:55.287

因为`+`只能选择下一个兄弟，而不是前一个。

您还设置了一个非常有趣的示例，说明当您有两个具有相同类名的完全不同的元素并且您尝试按类选择一个或另一个时会出现什么问题。如果选择器双向工作，那么无论您如何编写选择器`+`，您的前两个元素都会有。`visibility: visible`

[没有先前的兄弟选择器](https://stackoverflow.com/questions/1817792/css-previous-sibling-selector)，因此您需要找到另一种解决方法。此外，“一般”同级选择器是`~`, not `+`，尽管没有一个能够到达以前的同级...

# java - 在同一个 TCP 套接字上接收不同类型的对象

> ID：13576596
> 
> 赞同：2
> 
> 时间：2012-11-27T02:39:59.023
> 
> 标签：java, sockets, tcp, tcpclient

所以这是交易：我有一个正在运行的服务器，它不断地通过 TCP 套接字接受客户端：

```
public ArrayList<Socket> lista_users = new ArrayList<Socket>(); 
```

插座；

```
 s = serverSocket.accept();

            lista_users.add(s);
            avisa_all(lista_users, s);

            Thread t_trata_cliente = new Thread(new trata_cliente(lista_users, s));
            t_trata_cliente.start(); //this Thread is responsable for interacting with
                                    //the clients (where my question is) 
```

将套接字保存在数组列表中。在我想向我的客户发送不同类型的信息之后（线程“trata_cliente”）。当我说不同类型的信息时，我的意思是，首先发送警告消息，然后发送对象，然后发送一些消息，然后再次发送对象。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T02:45:28.637

用适当的包装器封装套接字的输出流：

*   [`DataOutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/DataOutputStream.html)：发送原始数据类型+字符串。
*   [`ObjectOutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectOutputStream.html)：通过流发送对象。

# java - JComboBox 子菜单项

> ID：13576600
> 
> 赞同：2
> 
> 时间：2012-11-27T02:40:12.460
> 
> 标签：java, swing, jcombobox

我相信可以通过为元素创建 JMenu 等来在 JComboBoxes 下创建子菜单，这实质上意味着创建自己的自定义组件。我还查看了一些示例，它非常复杂，而且大多数似乎都有某种问题或其他问题。

所以基本上我的问题是有可能以某种相当简单的方式创建一些看起来像 JComboBox 但也支持子菜单的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T03:42:02.313

这是一个示例： [http ://www.java2s.com/Code/Java/Swing-Components/ComboBoxMenuExample.htm](http://www.java2s.com/Code/Java/Swing-Components/ComboBoxMenuExample.htm)

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Graphics;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import javax.swing.Icon;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.SwingConstants;
import javax.swing.UIManager;
import javax.swing.border.EtchedBorder;
import javax.swing.border.TitledBorder;
import javax.swing.plaf.basic.BasicArrowButton;

public class ComboBoxMenuExample extends JFrame {

  public ComboBoxMenuExample() {
  super("ComboBoxMenu Example");

String[] itemStr = { "name", "Red", "Blue", "number", "255,0,0",
    "0,0,255",
    // separator
    "system", "control", "controlHighlight", "controlShadow",
    "text"};

JMenuItem[] menuItems = new JMenuItem[7];
menuItems[0] = new JMenuItem(itemStr[1]);
menuItems[1] = new JMenuItem(itemStr[2]);
menuItems[2] = new JMenuItem(itemStr[4]);
menuItems[3] = new JMenuItem(itemStr[5]);
menuItems[4] = new JMenuItem(itemStr[8]);
menuItems[5] = new JMenuItem(itemStr[9]);
menuItems[6] = new JMenuItem(itemStr[10]);

JMenu[] menus = new JMenu[4];
menus[0] = new JMenu(itemStr[0]);
menus[1] = new JMenu(itemStr[3]);
menus[2] = new JMenu(itemStr[6]);
menus[3] = new JMenu(itemStr[7]);

menus[0].add(menuItems[0]);
menus[0].add(menuItems[1]);
menus[1].add(menuItems[2]);
menus[1].add(menuItems[3]);
menus[3].add(menuItems[4]);
menus[3].add(menuItems[5]);
menus[2].add(menus[3]);
menus[2].add(menuItems[6]);

JMenu menu = ComboMenuBar.createMenu(menuItems[0].getText());
menu.add(menus[0]);
menu.add(menus[1]);
menu.addSeparator();
menu.add(menus[2]);

ComboMenuBar comboMenu = new ComboMenuBar(menu);

JComboBox combo = new JComboBox();
combo.addItem(itemStr[1]);
combo.addItem(itemStr[2]);
combo.addItem(itemStr[4]);
combo.addItem(itemStr[5]);
combo.addItem(itemStr[8]);
combo.addItem(itemStr[9]);
combo.addItem(itemStr[10]);

getContentPane().setLayout(new FlowLayout());
getContentPane().add(new ComboPanel("Fake ComboBox", comboMenu));
getContentPane().add(new ComboPanel("ComboBox", combo));
}

class ComboPanel extends JPanel {
ComboPanel(String title, JComponent c) {
  setLayout(new FlowLayout());
  setBorder(new TitledBorder(title));
  add(c);
}
}

public static void main(String args[]) {
try {
    UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");
} catch (Exception evt) {}

ComboBoxMenuExample frame = new ComboBoxMenuExample();
frame.addWindowListener(new WindowAdapter() {
  public void windowClosing(WindowEvent e) {
    System.exit(0);
  }
});
frame.setSize(370, 100);
frame.setVisible(true);
}
}

class ComboMenuBar extends JMenuBar {

JMenu menu;

Dimension preferredSize;

public ComboMenuBar(JMenu menu) {
this.menu = menu;

Color color = UIManager.getColor("Menu.selectionBackground");
UIManager.put("Menu.selectionBackground", UIManager
    .getColor("Menu.background"));
menu.updateUI();
UIManager.put("Menu.selectionBackground", color);

MenuItemListener listener = new MenuItemListener();
setListener(menu, listener);

add(menu);
}

class MenuItemListener implements ActionListener {
public void actionPerformed(ActionEvent e) {
  JMenuItem item = (JMenuItem) e.getSource();
  menu.setText(item.getText());
  menu.requestFocus();
}
}

private void setListener(JMenuItem item, ActionListener listener) {
if (item instanceof JMenu) {
  JMenu menu = (JMenu) item;
  int n = menu.getItemCount();
  for (int i = 0; i < n; i++) {
    setListener(menu.getItem(i), listener);
  }
} else if (item != null) { // null means separator
  item.addActionListener(listener);
}
}

public String getSelectedItem() {
return menu.getText();
}

public void setPreferredSize(Dimension size) {
preferredSize = size;
}

public Dimension getPreferredSize() {
if (preferredSize == null) {
  Dimension sd = super.getPreferredSize();
  Dimension menuD = getItemSize(menu);
  Insets margin = menu.getMargin();
  Dimension retD = new Dimension(menuD.width, margin.top
      + margin.bottom + menuD.height);
  menu.setPreferredSize(retD);
  preferredSize = retD;
}
return preferredSize;
}

private Dimension getItemSize(JMenu menu) {
Dimension d = new Dimension(0, 0);
int n = menu.getItemCount();
for (int i = 0; i < n; i++) {
  Dimension itemD;
  JMenuItem item = menu.getItem(i);
  if (item instanceof JMenu) {
    itemD = getItemSize((JMenu) item);
  } else if (item != null) {
    itemD = item.getPreferredSize();
  } else {
    itemD = new Dimension(0, 0); // separator
  }
  d.width = Math.max(d.width, itemD.width);
  d.height = Math.max(d.height, itemD.height);
}
return d;
}

public static class ComboMenu extends JMenu {
ArrowIcon iconRenderer;

public ComboMenu(String label) {
  super(label);
  iconRenderer = new ArrowIcon(SwingConstants.SOUTH, true);
  setBorder(new EtchedBorder());
  setIcon(new BlankIcon(null, 11));
  setHorizontalTextPosition(JButton.LEFT);
  setFocusPainted(true);
}

public void paintComponent(Graphics g) {
  super.paintComponent(g);
  Dimension d = this.getPreferredSize();
  int x = Math.max(0, d.width - iconRenderer.getIconWidth() - 3);
  int y = Math.max(0,
      (d.height - iconRenderer.getIconHeight()) / 2 - 2);
  iconRenderer.paintIcon(this, g, x, y);
}
}

public static JMenu createMenu(String label) {
return new ComboMenu(label);
}

}

class ArrowIcon implements Icon, SwingConstants {
 private static final int DEFAULT_SIZE = 11;

//private static final int DEFAULT_SIZE = 5;

private int size;

private int iconSize;

private int direction;

private boolean isEnabled;

private BasicArrowButton iconRenderer;

public ArrowIcon(int direction, boolean isPressedView) {
this(DEFAULT_SIZE, direction, isPressedView);
}

public ArrowIcon(int iconSize, int direction, boolean isEnabled) {
this.size = iconSize / 2;
this.iconSize = iconSize;
this.direction = direction;
this.isEnabled = isEnabled;
iconRenderer = new BasicArrowButton(direction);
}

public void paintIcon(Component c, Graphics g, int x, int y) {
iconRenderer.paintTriangle(g, x, y, size, direction, isEnabled);
}

public int getIconWidth() {
//int retCode;
switch (direction) {
case NORTH:
case SOUTH:
  return iconSize;
case EAST:
case WEST:
  return size;
}
return iconSize;
}

public int getIconHeight() {
switch (direction) {
case NORTH:
case SOUTH:
  return size;
case EAST:
case WEST:
  return iconSize;
}
return size;
}
}

class BlankIcon implements Icon {
private Color fillColor;

private int size;

public BlankIcon() {
this(null, 11);
}

public BlankIcon(Color color, int size) {
//UIManager.getColor("control")
//UIManager.getColor("controlShadow")
fillColor = color;

this.size = size;
}

public void paintIcon(Component c, Graphics g, int x, int y) {
if (fillColor != null) {
  g.setColor(fillColor);
  g.drawRect(x, y, size - 1, size - 1);
}
}

public int getIconWidth() {
return size;
}

public int getIconHeight() {
return size;
} 
} 
```

我在这里测试并且运行完美似乎有点复杂，但是如果你仔细看一下代码就会明白

# php - php 会话恢复到以前的状态

> ID：13576603
> 
> 赞同：0
> 
> 时间：2012-11-27T02:40:50.073
> 
> 标签：php, session

我似乎遇到了一个问题，即此页面上的 PHP 会话状态以一组定义的参数开始，但在重定向到 Twitter 以进行应用授权后，返回完全不同的会话 ID 和会话状态。当我清除浏览器的 cookie 时，此行为停止并且程序正常运行。但是在下一次 Twitter 授权尝试中，会话恢复到它在清除 cookie 后第一次设置的状态，但只有在从 Twitter 返回之后。

任何帮助，将不胜感激！

```
<?php

session_start();
echo session_id();

require 'oauth/twitteroauth.php';
require 'Abacus.php';

$twitter_consumer_key = 'OwxQxjghhyBOibNvg4Tg';
$twitter_consumer_secret = '3rBhdAyiLGeTBR6GY4i76vilFqqV2EL5cFQjmt8pJBg';

if (!isset($_SESSION['user'])) { echo "<script type='text/javascript'>window.location.href=(\"$index.php\")</script>"; die(); }

if (isset($_REQUEST['appauth']))
{
    $step = 0;
    if (isset($_REQUEST['step'])) {
        $step = $_REQUEST['step'];
    }

    switch ($_REQUEST['appauth'])
    {
        case 'twitter':
            if ($step == 1)
            {
                $twit_conn = new TwitterOAuth($twitter_consumer_key, $twitter_consumer_secret);
                $temp_cred = $twit_conn->getRequestToken();
                $_SESSION['twitter_temp_oauth_token'] = $temp_cred['oauth_token'];
                $_SESSION['twitter_temp_oauth_token_secret'] = $temp_cred['oauth_token_secret'];
                $redirect_url = $twit_conn->getAuthorizeURL($temp_cred);
                //header("Location: $redirect_url");
                echo "<script type='text/javascript'>window.location.href=(\"$redirect_url\")</script>";
                die();
            }
            else if ($step == 2)
            {
                $twit_conn = new TwitterOAuth($twitter_consumer_key, $twitter_consumer_secret, $_SESSION['twitter_temp_oauth_token'], $_SESSION['twitter_temp_oauth_token']);
                $token_cred = $twit_conn->getAccessToken();
                //$_SESSION['twitter_token_cred'] = $token_cred;

                $db_conn = mysql_connect(DATABASE_HOST, DATABASE_USER, DATABASE_PASSWORD);
                if (!$db_conn) { die('Could not connect to MySQL database.'); }
                mysql_select_db(DATABASE_NAME, $db_conn);

                mysql_query("DELETE FROM usercontentsources WHERE userid = {$_SESSION['user']['userid']} AND contentsourceid = 4", $db_conn);
                $insert_twitter_cred_sql = "INSERT INTO usercontentsources (userid, contentsourceid, params) VALUES ({$_SESSION['user']['userid']}, 4, '{$token_cred['oauth_token']} {$token_cred['oauth_token_secret']}')";
                mysql_query($insert_twitter_cred_sql, $db_conn);

                mysql_close($db_conn);

                $twit_conn = new TwitterOAuth($twitter_consumer_key, $twitter_consumer_secret, $token_cred['oauth_token'], $token_cred['oauth_token_secret']);
                var_dump($twit_conn->get('account/verify_credentials'));
            }
            break;
        case 'facebook':
            break;
        default:
            break;
    }
}

?>
<!DOCTYPE html>
<html>
    <head>
        <title>Settings - ProjectAbacus</title>
    </head>
    <body>
        <a href='settings.php?appauth=twitter&step=1'>Integrate Twitter</a>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-10-21T14:48:57.293

我刚刚遇到了一个类似的问题——事实证明（为了允许一次处理一个会话的多个 Ajax 请求）我们是`session_write_close()`在线程开始时调用的。

这意味着我们对会话值所做的任何更改都不会被存储，并且在页面重新加载时会话值会恢复到之前的状态。我们正在移动/删除`session_write_close()`修复它的调用。

# nhibernate - Visual Studio .Net 中显示的 dll 版本不反映引用的 dll 文件/产品版本

> ID：13576604
> 
> 赞同：6
> 
> 时间：2012-11-27T02:40:52.350
> 
> 标签：nhibernate, c#-4.0, sharp-architecture

我有一个控制台应用程序 c# 项目，它依赖于 NHibernate 3.3.2 和 ShapArch.NHibernate 2.0.4.628，它已经用 NHibernate 3.3.1 编译（据我所知 - 我可能错了，但是当我创建一个 2.0.4它通过 Nuget 下载了 NH 3.3.1 的 SharpArch 项目）。

为什么当引用的 dll 为 3.3.2.4000 时，Visual Studio 将 NHibernate 显示为版本 3.3.1.4000？对于所有引用，Specific Version 属性设置为 false。SharpArch 的版本出现在 VS 2.0.0.0 中，而不是文件/产品版本的 2.0.4。

在应用程序配置中，我有：

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="NHibernate" publicKeyToken="aa95f207798dfdb4" culture="neutral" />
      <bindingRedirect oldVersion="0.0.0.0-3.3.1.4000" newVersion="3.3.2.4000" />
    </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

该应用程序无法加载：

```
System.IO.FileLoadException was unhandled
  Message=Could not load file or assembly 'NHibernate, Version=3.3.2.4000, Culture=neutral, PublicKeyToken=aa95f207798dfdb4' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)
  Source=MyApp.ResourcesGenerator
  FileName=NHibernate, Version=3.3.2.4000, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
  FusionLog=""
  StackTrace:
       at MyApp.ResourcesGenerator.Program.InitializeNHibernateSession()
       at SharpArch.NHibernate.NHibernateInitializer.InitializeNHibernateOnce(Action initMethod) in d:\Builds\SharpArch2\Solutions\SharpArch.NHibernate\NHibernateInitializer.cs:line 54
       at MyApp.ResourcesGenerator.Program.Initialize() in C:\projects\tc\Trunk\Source_LibsUpgrade\Applications\PerformanceManagement\MyApp.ResourcesGenerator\Program.cs:line 149
       at MyApp.ResourcesGenerator.Program.Main(String[] args) in C:\projects\tc\Trunk\Source_LibsUpgrade\Applications\PerformanceManagement\MyApp.ResourcesGenerator\Program.cs:line 31
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: System.IO.FileLoadException
       Message=Could not load file or assembly 'NHibernate, Version=3.3.0.4000, Culture=neutral, PublicKeyToken=aa95f207798dfdb4' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)
       FileName=NHibernate, Version=3.3.0.4000, Culture=neutral, PublicKeyToken=aa95f207798dfdb4 
```

我什至不确定为什么在使用 3.3.1 编译了清晰的架构时它会尝试加载 3.3.0.4000。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T06:56:29.540

NHibernate 3.3.2.GA 的**文件**版本为 3.3.2.4000，但**程序集**版本仍为 3.3.1.4000。这样做是为了在不需要绑定重定向的情况下升级 NHibernate。NHibernate 的所有未来小版本升级也将遵循这种模式。

因此，您的解决方案就是删除绑定重定向。

这里令人困惑的部分是 Windows 资源管理器仅显示文件和产品版本，而 Visual Studio 仅显示程序集版本。

# php - 有没有办法检测浏览器是否支持 CSS3 动画？

> ID：13576605
> 
> 赞同：1
> 
> 时间：2012-11-27T02:40:55.263
> 
> 标签：php, javascript, jquery, css, animation

我正在使用 CSS3 处理网络动画的任务，我的参考来自[http://tympanus.net/codrops/2011/12/07/splash-and-coming-soon-page-effects-with-css3/](http://tympanus.net/codrops/2011/12/07/splash-and-coming-soon-page-effects-with-css3/)，但是有一个问题，不是所有的浏览器都支持 CSS3 动画，有没有办法知道浏览器是否支持 CSS3 动画？我想使用 Javascript/jQuery、PHP 或 CSS 本身来检测它。请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T02:42:57.053

使用[Modernizr](http://modernizr.com)，它将 CSS 类添加到 HTML 中，允许您判断特定功能是否可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T02:49:06.273

在这里找到了一个简短的 JS 方法。

[Detecting_CSS_animation_support](https://developer.mozilla.org/en-US/docs/CSS/CSS_animations/Detecting_CSS_animation_support)

# php - 在 Facebook 应用程序中设置 SESSION 变量（或 cookie）

> ID：13576610
> 
> 赞同：0
> 
> 时间：2012-11-27T02:41:13.773
> 
> 标签：php, mysql, facebook, mysqli, facebook-apps

我需要帮助开始一些 PHP 编码。我正在为 Facebook 编写一个需要投票的应用程序。我已经建立了整个框架并开始工作，并且我创建了用户可以在照片下方单击以对其进行投票的功能。客户希望人们能够为尽可能多的照片投票，但我需要弄清楚如何限制它，这样他们就不能一遍又一遍地投票给同一张照片。

我的第一个想法是，我将设置 SESSION 变量以某种方式链接到 Facebook 用户的帐户，以便应用程序可以识别此人，但我试图创建比实际应用程序更多的“自定义选项卡”。如果唯一的方法是创建一个用户必须选择加入的应用程序，那么就这样吧，但我想知道是否有一种方法可以设置 cookie 并在用户不登录应用程序的情况下执行此操作或该应用程序必须选择加入。

如您所知，我对 PHP 和 MySQL 编码还很陌生，所以我还在学习。

感谢您为我指明正确的方向！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:08:29.833

您可能可以找到 FB 使用的 cookie 并破解它以获取用户 ID，但这是一件坏事，并且可能违反 FB 条款。

为您的用户创造引人入胜的体验的更好方法是创建一个 FB 应用程序并要求您的用户接受他们是否想投票。

为了让他们有更好的体验，我建议你以下流程：

当用户单击投票按钮时，您检查他是否接受了您的应用程序并提示他这样做，以防他没有接受。

当他接受您的应用程序时，您获取他的数据，将其放入您的数据库中并检查用户与要投票的事物之间是否已经存在关系并采取相应的行动（如果用户已经为该项目投票，您不会计算双重投票并通知他）。

# css - CSS Sticky Footers，左/右侧不同背景颜色

> ID：13576621
> 
> 赞同：2
> 
> 时间：2012-11-27T02:43:01.367
> 
> 标签：css, sticky-footer

我有以下 HTML（也在[http://jsfiddle.net/pHXSJ/](http://jsfiddle.net/pHXSJ/)）。在 IE 和 Firefox 中，它按预期工作。但是，Chrome 和 Safari 无法将页脚正确定位在视口底部。我已经尝试了这里建议的很多东西，包括从 cssstickyfooter.net 实现。虽然这些技术有效，但一旦我尝试提供（在示例中）绿色侧栏颜色，它们就会开始失败。请注意，这些侧边栏没有内容。

```
 <!DOCTYPE html>
<html>
    <head>
        <title>2012 test</title>
        <style>
            html,body,form {height: 100%;}
            body,p{margin:0}
            div#wrapper {height:100%;background-color: transparent;}
            div#contentwrap {width:100%; position:relative; height:100%; top:0; padding-bottom: -4em;}
            div#content {top:0;position:relative;width:20em;min-height:100%;margin-left:auto;margin-right:auto;background-color:white; border-left: 2px yellow solid;border-right:2px yellow solid;}

            div#header {min-width:20em; width:100%; position:absolute; top: 0; height: 2em; background-color: silver;}
            div#header2 {min-width:20em; width:100%; position:absolute; top:2em; height: 1em; background-color: aqua;}
            div#footer {min-width: 20em; position: relative; clear: both; margin-top:-4em; height: 4em; background-color: red;}
        </style>
    </head>
    <body style="background-color:green;">
        <form>
            <div id="wrapper">
                <div id="contentwrap">
                    <div id="content">
                        <div style="padding-top: 3.5em;">
                            <div id="lcol" style="float:left;position:relative; width:38%">
                                <p>Left</p>
                            </div>
                            <div id="rcol" style="float:right; position:relative; width:60%;">
                                <p>Right 1 total of 35</p>
                                <p>Right</p>
                                <p>Right</p>
                                <p>Right</p>
                                <p>Right 5</p>
                                <p>Right</p>
                                <p>Right</p>
                                <p>Right</p>
                                <p>Right</p>
                                <p>Right 10</p>
                            </div>
                            <div style="clear:both;position:relative;">
                            </div>
                        </div>
                    </div>
                </div>
                <div id="header">
                    <div>Main Header</div>
                </div>
                <div id="header2">
                    <div>Header level 2</div>
                </div>
            </div>
            <div id="footer" style="">
                <div>Footer text</div>
            </div>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:30:52.407

如果我查看您的 CSS，则缺少此部分：

> div#wrapper { 最小高度：100%; 底部填充：-4em；}

这应该可以解决您在 Chrome 中的问题。

# jstl - JSTL 标记未显示在 html 中

> ID：13576635
> 
> 赞同：0
> 
> 时间：2012-11-27T02:44:46.847
> 
> 标签：jstl

另一件事，我在 jsp 中包含了 jstl，messages.properties 包含以下一个。我使用 messages.properties 从 jsp 调用。

但是当我尝试运行时，标签没有显示..它是这样显示的。

> ？？？标题？？？
> 
> ？？？问候？？？2012 年 11 月 27 日星期二 10:33:12 SGT

## messages.properties (\HelloSpring\build\web\WEB-INF\classes)

标题=SpringApp

标题=你好 :: SpringApp

问候=问候，现在是

## JSP 代码 (hello.jsp)

```
<head><title><fmt:message key="title"/> </title></head> 
```

```
<h1>Hello - Spring Application</h1>

<!-- <p>Greetings.it is now ${now}  </p> -->
<!-- <p>Greetings.it is now <c:out value ="${now}" />  </p>  -->

<h1><fmt:message key="heading"/></h1>

<p><fmt:message key="greeting"/> <c:out value="${model.now}"/></p>

<h3>Products</h3>

<c:forEach items="${model.products}" var="prod">

  <c:out value="${prod.description}"/> <i>$<c:out value="${prod.price}"/></i><br><br>

</c:forEach> 
```

# arrays - 数组中列的矢量化重塑

> ID：13576636
> 
> 赞同：3
> 
> 时间：2012-11-27T02:44:49.280
> 
> 标签：arrays, matlab, octave, vectorization

我有一个数组 A，并且想将每列的最后四个元素重塑为 2x2 矩阵。我希望将结果存储在单元格数组 B 中。

例如，给定：

```
A = [1:6; 3:8; 5:10]'; 
```

我希望 B 包含三个 2x2 数组，例如：

```
B{1} = [3, 5; 4, 6];
B{2} = [5, 7; 6, 8];
B{3} = [7, 9; 8, 10]; 
```

我显然可以在 for 循环中使用类似`reshape(A(end-3:end, ii), 2, 2)`和循环的东西来做到这一点`ii`。任何人都可以提出一种矢量化方法，也许使用类似于`cellfun`可以将操作重复应用于数组列的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T03:52:08.700

我这样做的方法是查看所需的索引，然后找出生成它们的方法，通常使用某种形式的 repmat。例如，如果您想要每列中的最后 4 个项目，A 的（绝对）索引将是 3、4、5、6，然后将行数添加到移动到下一列得到 9 ,10,11,12 等等。因此，问题就变成了根据您的行数、列数以及每列所需的元素数来生成该矩阵（我将其称为 n，在您的情况下为 n = 4）。

```
octave:1>  A = [1:6; 3:8; 5:10]'
A =

    1    3    5
    2    4    6
    3    5    7
    4    6    8
    5    7    9
    6    8   10

octave:2>  dim=size(A)
dim =

   6   3

octave:3> n=4
n =  4
octave:4> x=repmat((dim(1)-n+1):dim(1),[dim(2),1])'
x =

   3   3   3
   4   4   4
   5   5   5
   6   6   6

octave:5> y=repmat((0:(dim(2)-1)),[n,1])
y =

   0   1   2
   0   1   2
   0   1   2
   0   1   2

octave:6> ii=x+dim(1)*y
ii =

    3    9   15
    4   10   16
    5   11   17
    6   12   18

octave:7> A(ii)
ans =

    3    5    7
    4    6    8
    5    7    9
    6    8   10

octave:8> B=reshape(A(ii),sqrt(n),sqrt(n),dim(2))
B =

ans(:,:,1) =

   3   5
   4   6

ans(:,:,2) =

   5   7
   6   8

ans(:,:,3) =

    7    9
    8   10 
```

根据您生成 x 和 y 的方式，您甚至可以取消乘法，但我将把它留给您。:D

IMO 您也不需要单元格数组来存储它们，3D 矩阵也可以工作，并且您以相同的方式对其进行索引（但不要忘记在使用之前[挤压](http://www.mathworks.com/help/matlab/ref/squeeze.html)它）。

我在这个问题上给出了类似的答案[。](https://stackoverflow.com/questions/12966512/create-matrix-by-repeatedly-overlapping-a-vector/)

# iphone - iPhone/iOS：缩短应用程序启动时间的最佳实践？

> ID：13576642
> 
> 赞同：5
> 
> 时间：2012-11-27T02:45:25.787
> 
> 标签：iphone, ios

我发现在 iPhone4/iOS6.0 设备上花了 4-5 秒，我想知道那段时间系统在做什么，是否有任何缩短应用程序启动时间的最佳做法？

非常感谢。

**编辑：** 我记录它并在`applicationDidFinishLaunchingWithoptions`: 中花了大约 1.5 秒，从我点击应用程序图标到它的启动屏幕消失大约需要 3.5-4 秒（我使用时钟来获得更精确的时间）。也就是说，大约调用前 2-2.5 秒启动应用`applicationDidFinishLaunchingWithoptions`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T03:06:28.443

只需观看 Session 225 *Up and Running: Making a Great Impression with Every Launch* from [WWDC 2012](https://developer.apple.com/videos/wwdc/2012/)，它将带您完成应用程序启动分析的过程，并就最常犯的错误提供提示，非常棒。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T03:07:06.067

有一个非常非常好的 WWDC 2012 视频，其中有很长的序列专门针对*这个*主题：Session 235（响应性）。我强烈建议您观看。它为您提供了许多加快启动速度的提示和技巧（不要链接到太多库等），告诉您如何测量以及如何在 Instruments 中读取测量值等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T03:03:17.443

系统不是导致您的应用程序需要 4-5 秒才能启动的原因。它可能是您的代码`applicationDidFinishLaunching`，或者您的根视图控制器的`init`,`viewDidLoad`或其他设置方法。

使用“时间分析器”仪器在真实设备上分析您的应用程序。*仅*启动您的应用程序，一旦启动就不要按 UI 上的任何按钮。我们只想看看发布期间发生了什么。

我建议检查窗口左下方“调用树”下的“按线程分离”、“反转调用树”、“隐藏系统库”和“仅显示 Obj-C”选项。

一旦您检查了您选择的选项，请查看方法调用列表。从那些花费最多时间的人开始（出于显而易见的原因）。您可以双击符号名称以获取有关时间花费的更多详细信息。祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T11:22:15.710

我们遇到了同样的问题。

最终，我们通过在 viewDidAppear 中预加载视频显着加快了发布时间。当用户点击播放按钮启动电影时，已经加载了足够多的内容，几乎可以立即开始播放。

例如：

```
- (void)viewDidAppear:(BOOL)animated {
    NSURL *movieURL = [NSURL URLWithString:@"http://static.example.com/movie.mov"];
    MPMoviePlayerViewController *vc = [[MPMoviePlayerViewController alloc] initWithContentURL:movieURL];
    vc.moviePlayer.shouldAutoplay = NO;
    [vc.moviePlayer prepareToPlay];
    self.moviePlayerViewController = vc;
} 
```

此博客文章中的全部详细信息：http: [//blog.tetherpad.com/blog/2013/3/22/improving-tutorial-movie-load-times-on-ios-for-fun-and-profit](http://blog.tetherpad.com/blog/2013/3/22/improving-tutorial-movie-load-times-on-ios-for-fun-and-profit)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T03:20:51.067

在我看来，启动时间主要是功能成本，

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions; 
```

如果你做了一堆阻止进程的事情，启动将需要很长时间。

因此，您可以`applicationDidFinishLaunching`通过删除一些您以后可以做的不必要的代码来优化您的代码。或者您可以使您的代码非阻塞，例如，您应该使用异步网络请求`applicationDidFinishLaunching`而不是同步请求。

# java - 如何让用户和电脑轮流点击？

> ID：13576644
> 
> 赞同：0
> 
> 时间：2012-11-27T02:45:33.783
> 
> 标签：java, methods, awt, awtrobot

这是测试文件。

```
while(count<52){

    System.out.println("the times:"+panel.getCount());

    if(panel.getCount()==3){
    for(int i=0;i<2;i++){
    try{
        int temp=number.nextInt(51);
        panel.simulationClick(temp);
    }
    catch(AWTException e){
        e.printStackTrace();
    }
    }}
    } 
```

这是让计算机点击按钮的方法。

```
public void simulationClick(int dex) throws AWTException
{

    Point p1 = bt[dex].getLocation();

    System.out.println(p1.x + "," + p1.y);

    Point p = MouseInfo.getPointerInfo().getLocation();
    int x = p.x;
    int y = p.y;
    robot = new Robot();
    System.out.println(x + "," + y);
    robot.mouseMove(p1.x+100, p1.y+100);
    robot.mousePress(InputEvent.BUTTON1_MASK);
    robot.mouseRelease(InputEvent.BUTTON1_MASK);
    robot.mouseMove(x, y);

} 
```

我希望用户和simulationClick轮流进行，这意味着该方法在用户单击按钮后起作用。然后方法再次起作用！我怎么做？谢谢！

如果您需要，这里是所有代码！

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.AWTException;
import java.awt.BorderLayout;
 import javax.swing.*;
import java.util.Random;
public class cardsTest extends JFrame  {

JButton k=new JButton();
static Cards panel=new Cards();
public static void main(String[] args){

    JFrame frame=new JFrame();
    Random number=new Random();

    restart but=new restart(frame,panel);
    frame.add(panel,BorderLayout.CENTER);
    frame.add(but,BorderLayout.NORTH);

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(1400,700);
    frame.setVisible(true);

    int count=0;

    System.out.println("the times:"+panel.getCount());

    for(int i=0;i<2;i++){
    try{
        int temp=number.nextInt(51);
        panel.simulationClick(temp);
    }
    catch(AWTException e){
        e.printStackTrace();
    }
    }

}

}

import java.awt.*;
import java.awt.event.*;
import java.util.Collections;
import javax.swing.*;
import java.util.ArrayList;
import java.util.Timer;
import java.util.TimerTask;
import java.util.Random;
public class Cards extends JPanel {
private FlowLayout grid1;
private JTextField text1;
private JTextField text2;
private JTextField text3;
 private Robot robot;
 private JButton k;
 ArrayList<Integer> rn= new ArrayList<Integer>();

String score1,score2,turn;
int count=0;
int countS=0;
int record=0;
int p1=0;
int p2=0;
Timer time=new Timer();

JButton []bt=new JButton[52];
ImageIcon tail=new ImageIcon(getClass().getResource("b1fv.png"));

ImageIcon ori;
public Cards(){
    for(int i=0;i<52;i++){
        rn.add(i);
    }
    Random number=new Random();

    grid1=new FlowLayout();
    setLayout(grid1);
    for(int i=0;i<bt.length;i++){
        ImageIcon c=new ImageIcon(getClass().getResource(i+1+".png"));

        bt[i]=new JButton(c);
        bt[i].addActionListener(new ACListener(i));
        bt[i].addMouseListener(new MouseAdapter()
        {
            public void mouseClicked(MouseEvent event)
            {
                if (event.getButton() == MouseEvent.BUTTON1)
                    System.out.println(bt[1].getText() + "鼠标左键点击");
                if (event.getButton() == MouseEvent.BUTTON3)
                    System.out.println(bt[1].getText() + "鼠标右键点击");
            }
        });
        bt[i].setSize(5,5);
        //flip(i);
        flip(i);

    }

    Collections.shuffle(rn);

    for(int i=0;i<52;i++){

        add( bt[rn.get(i)]);
    }

    text1=new JTextField(score1);
    text1.setText("Player 1: 0");
    text2=new JTextField(score2);
    text2.setText("Player 2: 0");
    text3=new JTextField();
    text3.setText("Player 1's turn.\n"+"This is turn 0.");

    add(text1);
    add(text2);
    add(text3);

    addMouseMotionListener(new MouseMotionAdapter()
    {
        public void mouseMoved(MouseEvent event)
        {
        }
    });

}

private class ACListener implements ActionListener {
    private  final int index;

    public ACListener(int index) {
        this.index = index;

    }

    public void actionPerformed(ActionEvent e) {
          System.out.println("Mouse entered for rating " + index);
        ori=new ImageIcon(getClass().getResource(index+1+".png"));

        ori.setDescription("ori");
        tail.setDescription("tail");

        if (((ImageIcon) bt[index].getIcon()).getDescription()=="ori")
            bt[index].setIcon(tail);
         else
            bt[index].setIcon(ori);
       count++;

       System.out.printf("Action Performed %d times \n",count);

       TimerTask taskFlip1=new TimerTask(){
        public void run(){
            flip(index);
        }
       };

       TimerTask taskFlip2=new TimerTask(){
            public void run(){
                flip(record);
            }
          };

       if(count==1){
           record=index;
           countS++;

       }
       String turnS=Integer.toString(countS);
       text3.setText("Player 1's turn.\n"+"This is turn "+turnS);
       if(count==2){
           int match1=record/4;
           int match2=index/4;
          if(match1==match2&&record!=index){
              p1++;
              score1=Integer.toString(p1);
              text1.setText("Player 1: "+score1);
              text3.setText("Player 2's turn.\n"+"This is turn "+turnS);
              bt[index].setEnabled(false);
              bt[record].setEnabled(false);
          }
          if(record==index){
              text3.setText("Player 1's turn.\n"+"This is turn "+turnS);
          }
          if(match1!=match2){
           time.schedule(taskFlip1,1000);
           time.schedule(taskFlip2,1000);}
          text3.setText("Player 2's turn.\n"+"This is turn "+turnS);

       }

       if(count==3){
           record=index;
       }
       if(count==4){
           int match1=record/4;
           int match2=index/4;
          if(match1==match2&&record!=index){
              p2++;
              score2=Integer.toString(p2);
              text2.setText("Player 2: "+score2);
              text3.setText("Player 1's turn.\n"+"This is turn "+turnS);
             bt[index].setEnabled(false);
              bt[record].setEnabled(false);
          }
          if(record==index){
              text3.setText("Player 1's turn.\n"+"This is turn "+turnS);
          }
          if(match1!=match2){
           time.schedule(taskFlip1,1000);
           time.schedule(taskFlip2,1000);}
          text3.setText("Player 1's turn.\n"+"This is turn "+turnS);
           count=0;
       }

    }

}

public void flip(int i){
    ori=new ImageIcon(getClass().getResource(i+1+".png"));
    ori.setDescription("ori");
    tail.setDescription("tail");

    if (((ImageIcon) bt[i].getIcon()).getDescription()=="ori")
        bt[i].setIcon(tail);
     else
        bt[i].setIcon(ori);
}

public void simulationClick(int dex) throws AWTException
{

    Point p1 = bt[dex].getLocation();

    System.out.println(p1.x + "," + p1.y);

    Point p = MouseInfo.getPointerInfo().getLocation();
    int x = p.x;
    int y = p.y;
    robot = new Robot();
    System.out.println(x + "," + y);
    robot.mouseMove(p1.x+100, p1.y+100);
    robot.mousePress(InputEvent.BUTTON1_MASK);
    robot.mouseRelease(InputEvent.BUTTON1_MASK);
    robot.mouseMove(x, y);

}

public  int getCount(){
    return count;
}
}

import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.*;
public class restart extends JPanel {
private JButton start;
private int count=0;
public restart(JFrame fr,JPanel pa){
    AListener act=new AListener(fr,pa);
    start=new JButton("Restart");
    start.addActionListener(act);
    add(start);
}

public class AListener implements ActionListener{
    private JFrame f;
    private JPanel p;
    public AListener(JFrame f,JPanel p){
        this.f=f;
        this.p=p;
    }
public void actionPerformed(ActionEvent event){

    count++;
         f.remove(p);  
        f.setVisible(false);
        Cards panel=new Cards();
        f.add(panel,BorderLayout.CENTER);

        for(int i=0;i<10;i++){
            try
            {panel.simulationClick(i);
            }
            catch(AWTException e){
                e.printStackTrace();
            }
        }
        f.setVisible(true);

        p=panel;

    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T02:56:00.090

我猜你有一个用户点击事件的处理程序。您可以`simulationClick()`在用户单击处理程序（侦听器）结束时调用。

但是，如果**第一步**是随机的，您必须`simulationClick()`在确定是否轮到计算机后才调用一次。

您需要使用更多代码来解释您的问题以获得特定帮助。

编辑：查看您的代码后，似乎最好的调用位置是在class`simulationClick()`方法内。`actionPerformed()``ACListener`

我不确定你的逻辑，但如果你可以在那些 if 条件中调用它（如果需要）。例如，仅当卡片匹配等时才调用它，或者您也可以添加对特定操作事件的检查。

希望有帮助。

# php - 发送邮件消息 php

> ID：13576645
> 
> 赞同：0
> 
> 时间：2012-11-27T02:45:41.417
> 
> 标签：php, sql, email, echo

我只想发送在我的数据库中获取结果的订单内容。但是当我回显它时，它会显示在我的 php 页面上。我不想要它。我希望内容仅在用户收到时出现在电子邮件中。

这是我的代码。

```
while($row3 = mysqli_fetch_array($result3)){
$addresses=$row3['email'];
$to = $addresses;

$subject = "Order confirmed by Home and decor";

// message
$message = '

<html>
<body>
<table width="500" height="215" border="0">
<tr>
<th width="238" height="211" scope="col"><h1 align="left">Order # 1234</h1></p></th>
<th width="10" scope="col"></th>
<th width="243" scope="col"><p><img src="file:///D|/Programs/xampp/htdocs/images/sitelogo.PNG" width="224" height="68" align="right"></p></th>
</tr>
</table>

<table width="500" height="215" border="0">
<tr>
<th width="181" height="211" scope="col"><p align="left">Ship To:</p>
<p align="left"><?=$row3['first_name']?></p>
<p align="left"><?=$row3['address_1']?></p>
<p align="left"><?=$row3['city']?></p></th>
<th width="80" scope="col"></th>
<th width="40" scope="col"></th>
<th width="181" scope="col"><p align="left"></p>
<p align="right">Bill To:</p>
<p align="right"><?=$row3['first_name']?></p>
<p align="right"><?=$row3['address_1']?></p>
<p align="right"><?=$row3['city']?></p>
</th>
</tr>
</table>

<table width="500" height="94" border="0">
<tr>
<th height="43" scope="col"><div align="left">Order Date:</div></th>
<th scope="col">&nbsp;</th>
<th scope="col">&nbsp;</th>
<th scope="col"><div align="right">Shipping Method:</div></th>
</tr>
<tr>
<th width="126" height="43" scope="col"><div align="left">1/11/13</div></th>
<th width="433" scope="col">&nbsp;</th>
<th width="103" scope="col">&nbsp;</th>
<th width="156" scope="col"><div align="right">BEAST!</div></th>
</tr>
</table>
<table width="500" height="88" border="1">
<tr>
<th width="48" scope="col">Item</th>
<th width="264" scope="col">Product Name</th>
<th width="68" scope="col">Quantity</th>
<th width="92" scope="col">Price</th>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</table>
<hr>
<table width="500" height="227" border="0">
<tr>
<th height="43" scope="col">&nbsp;</th>
<th scope="col">&nbsp;</th>
<th scope="col">Subtotal:</th>
<th scope="col">&nbsp;</th>
</tr>
<tr>
<th height="43" scope="col">&nbsp;</th>
<th scope="col">&nbsp;</th>
<th scope="col">Tax:</th>
<th scope="col">&nbsp;</th>
</tr>
<tr>
<th height="43" scope="col">&nbsp;</th>
<th scope="col">&nbsp;</th>
<th scope="col">Shipping:</th>
<th scope="col">&nbsp;</th>
</tr>
<tr>
<th height="43" scope="col">&nbsp;</th>
<th scope="col">&nbsp;</th>
<th scope="col">Discount:</th>
<th scope="col">&nbsp;</th>
</tr>
<tr>
<th width="40" height="43" scope="col">&nbsp;</th>
<th width="278" scope="col">&nbsp;</th>
<th width="68" scope="col">Grand Total:</th>
<th width="96" scope="col">&nbsp;</th>
</tr>
</table>
<p align="right">&nbsp;</p>
</body>
</html>

';

// To send HTML mail, the Content-type header must be set
$headers = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

$headers .= 'From: Order reminder <lol@gmail.com>' . "\r\n";

mail($to, $subject, $message, $headers);

} 
```

回声是当你想正确地调用某些东西时。我不希望它回显，我只想让内容出现在电子邮件中而不回显它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T02:54:43.227

不要回显您的变量，将它们连接到字符串中。IE

```
$message = "Some text ".$foo." some more text'; 
```

不是：

```
$message = "Some text <?=$foo ?> some more text'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T02:53:21.773

查看此 PHP 文档以打开输出缓冲。

[http://php.net/manual/en/function.ob-start.php](http://php.net/manual/en/function.ob-start.php)

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T02:56:14.890

在您的消息内容中间，sally 错误的短标签在做什么。

```
<?= ?> 
```

有关短标签的更多信息，请参阅[此帖子](https://stackoverflow.com/questions/200640/are-php-short-tags-acceptable-to-use)

我只是替换所有这些东西

```
<?php
    $message '...
        <p align="left"><?=$row3['first_name']?></p> 
```

到

```
<?php
    $message '...
        <p align="left">'.$row3['first_name'].'</p> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T02:59:17.093

您可以[`Heredoc`](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)为此使用语法：

```
$message =<<<EOM
<html>
<body>
...
<table width="500" height="215" border="0">
<tr>
<th width="181" height="211" scope="col"><p align="left">Ship To:</p>
<p align="left">{$row3['first_name']}</p>
<p align="left">{$row3['address_1']}</p>
<p align="left">{$row3['city']}</p></th>
...
EOM; 
```

建议先申请`htmlspecialchars()`：`$row3`

```
$row3 = array_map('htmlspecialchars', $row3); 
```

*这假设您以后不会`$row3`在代码中使用*

# java - 在 Eclipse 中运行多个文件

> ID：13576652
> 
> 赞同：2
> 
> 时间：2012-11-27T02:46:37.800
> 
> 标签：java, eclipse, compilation, distributed

我正在做一个分布式系统项目，我想在我的本地系统上同时通过 eclipse 运行多个服务器（同一个文件），

有可能这样做吗？一般来说，是否可以在一个 Eclipse 上运行多个文件（例如客户端和服务器）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:30:41.133

您不能一次直接启动多个启动配置：有一个[旧错误仍然未决](https://bugs.eclipse.org/bugs/show_bug.cgi?id=39900)，它涉及[“启动组”选项](https://stackoverflow.com/questions/4053265/eclipse-running-multiple-launch-configurations-at-once/11905444#11905444)（存在于“C/C++ 开发工具”插件中，但可用于其他非 C++ 项目。

但是您可以一个接一个地运行多个启动配置。
如“[同时从 Eclipse 运行两个 Java 程序？](https://stackoverflow.com/questions/5453894/run-two-java-programs-from-eclipse-at-once) ”中所示，您将拥有多个控制台。[您可以使用escript](http://marketplace.eclipse.org/content/escripts)
编写启动序列的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T02:47:41.627

如果通过文件你的意思是程序，是的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T03:06:09.160

是的。

您可以一一启动多个服务器，然后切换到您要运行的程序。并直接再次运行。或者您可以手动设置许多运行配置，然后逐个运行它们。任何不清楚的请指出。

# java - 仅当由 Maven 执行时，使用 Reflections google 库的单元测试才会失败

> ID：13576665
> 
> 赞同：10
> 
> 时间：2012-11-27T02:48:10.773
> 
> 标签：java, eclipse, classloader, maven-3, reflections

我正在使用 Google [Reflections 库](http://code.google.com/p/reflections/)来查询类路径中的某些资源。这些资源与我项目中的类位于同一位置。

我编写了一些在 Eclipse 中作为单元测试执行时成功的单元测试，但是当我尝试使用 Maven（`maven install`例如）执行它们时，它们没有按预期工作。经过一番调试，显然问题是用Maven执行时，Reflections库找不到资源所在的classpath url。

我得出了这个结论，研究反射如何确定应该检查的类路径 URL。例如，以下方法显示了 Reflections 如何在给定类加载器的情况下找到可用的类路径 URL（原始的 Reflections 方法已被简化了一点）：

```
public static Set<URL> forClassLoader(ClassLoader... classLoaders) {
    final Set<URL> result = Sets.newHashSet();
    for (ClassLoader classLoader : classLoaders) {
        while (classLoader != null) {
            if (classLoader instanceof URLClassLoader) {
                URL[] urls = ((URLClassLoader) classLoader).getURLs();
                if (urls != null) {
                    result.addAll(Sets.<URL>newHashSet(urls));
                }
            } 
            classLoader = classLoader.getParent();
        }
    }
    return result;
} 
```

简而言之，它正在遍历类加载器层次结构，询问每个单独的类加载器的 URL。

在 Eclipse 中，我从单元测试中调用以前的方法，如下所示：

```
 ClassLoader myClassClassLoader = <MyClass>.class.getClassLoader(); //<MyClass> is in the same classpath url than the resources I need to find
    Set<URL> urls = forClassLoader(myClassClassLoader);
    for(URL url : urls) {
      System.out.println("a url: " + url); 
```

正如预期的那样，我可以看到（在许多其他 URL 中）配置为我的项目的一部分的类路径 URL：

```
file:<MY_PROJECT_PATH>/target/classes/
file:<MY_PROJECT_PATH>/target/test-classes/ 
```

和 Reflections 是一种魅力（Reflections 应该找到的资源位于`file:<MY_PROJECT_PATH>/target/classes/`）。

但是，当测试由 Maven 执行时，我意识到这些 URL 条目从该`forClassLoader`方法返回的集合中丢失，并且其余的 Reflections 方法对于这个问题没有按预期工作。

“令人惊讶”的事情是，如果我在 maven 执行单元测试时写这个：

```
ClassLoader myClassClassLoader = <MyClass>.class.getClassLoader();
url = myClassClassLoader.getResource("anExistingResource");
System.out.println("URL: "+url); //a valid URL 
```

我可以看到类加载器仍然可以解析我要查找的资源。我很困惑为什么当使用 Maven 执行该`forClassLoader`方法时，返回的集合中不包含我项目的类路径 URL，尽管同时它能够解析位于此类 url（！）中的资源。

这种行为的原因是什么？当作为 Maven 运行的单元测试的一部分调用时，我可以尝试使 Reflections 库工作的任何解决方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T18:52:18.987

解决了。发布解决方案，以防将来有人发现同样的问题。

在执行项目的单元测试时，Maven 不会（明确地）在类路径中包含其所有依赖项。相反，它声明了对位于“target/surefire/surefirebooter_NUMBER_THAT_LOOKS_LIKE_TIME_STAMP.jar”中的 tmp jar 的依赖。此 jar 仅包含一个清单文件，该文件声明项目的类路径。

Reflections 库中的方法`forClassLoader`不返回一组具有**有效**类路径的 url（即，清单文件中的类路径条目被忽略）。为了克服这个问题，我刚刚实现了这个简单的方法：

```
public static Set<URL> effectiveClassPathUrls(ClassLoader... classLoaders) {
    return ClasspathHelper.forManifest(ClasspathHelper.forClassLoader(classLoaders));
} 
```

该方法`forManifest`（也是 Reflections 库的一部分）向作为参数发送的类路径 url 集添加了在该集中包含的任何 jar 文件的清单文件中声明的缺失类路径条目。通过这种方式，该方法返回一组带有项目有效类路径的 URL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T03:16:43.620

您可能正在使用 M2Eclipse，它会自行将内容添加到类路径中。命令行 Maven 的工作方式不同。您可能会找到[一些有用的选项](http://maven.apache.org/plugins/maven-surefire-plugin/examples/class-loading.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T21:54:26.573

我有同样的问题。添加以下 URL 对我有用。

```
ConfigurationBuilder cb = new ConfigurationBuilder();
cb.setUrls(...);
cb.addUrls(YourClassName.class.getProtectionDomain().getCodeSource().getLocation()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-06T12:58:09.780

我刚刚在使用反射库（版本 0.9.11）时遇到了同样的问题，只有在从 Maven 构建执行单元测试时。接受的答案中提供的链接为我指明了正确的方向。

对我的 Surefire 插件的简单 POM 文件更改解决了这个问题：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.21.0</version>
            <configuration>
                <useSystemClassLoader>false</useSystemClassLoader>
            </configuration>
        </plugin>
        <plugin>
            <artifactId>maven-failsafe-plugin</artifactId>
            <version>2.21.0</version>
            <configuration>
                <useSystemClassLoader>false</useSystemClassLoader>
            </configuration>
            <executions>
                <execution>
                    <goals>
                        <goal>integration-test</goal>
                        <goal>verify</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

`<useSystemClassLoader>`配置参数默认为“真” 。强制它为“假”似乎可以解决我的单元测试中的类加载器问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T09:21:23.363

您可以创建一些导致surefire失败的问题。

1.  有一个命名约定；测试套件应称为“TestBlaBla”或“BlaBlaTest”；以单词“Test”开头或结尾。

2.  如前所述，Maven 中的类路径比 Eclipse 中更受限制，因为 Eclipse（愚蠢地）没有将编译类路径与测试类路径分开。

3.  Surefire 可以以任意顺序从不同的测试套件中自由运行测试用例。当运行多个测试套件初始化一些通用基础（例如内存数据库或 JNDI 上下文）时，可能会在测试套件开始相互影响时产生冲突。您需要注意正确隔离测试套件。我使用的技巧是为套件使用单独的内存数据库，并且我为每个单元测试而不是每个测试套件初始化共享的东西。

我可以告诉你，3 是最难调试的；每当某些东西在 Eclipse 中而不是在 Maven 中起作用时，我自然会认为我在隔离测试套件时做错了。

# php - 我可以创建一个网页来实时控制另一个网页吗？

> ID：13576667
> 
> 赞同：2
> 
> 时间：2012-11-27T02:48:30.873
> 
> 标签：php, javascript, html, controls, webpage

我的想法是创建三个网页。一个用作显示页面，另外两个用作更改显示页面中图像的遥控器。我希望所有的变化都在显示页面中实时发生。这可以在 HTML 网页中实现吗？如果是这样，需要什么语言或语言？单靠 JavaScript 能实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T03:27:58.343

**实时**执行此操作的最佳方法是使用 HTML5 Websockets。您需要一个[NodeJS 服务器](http://nodejs.org/)来处理 websocket 连接。我建议使用包[SocketIO](http://socket.io/)。寻找聊天室示例或多人游戏教程。

您的显示页面将打开一个 websocket 连接和一个房间。此外，您的 2 个“远程”页面将加入房间，您将能够将数据从一个页面交换到另一个页面并执行 javascript 功能。

[Pult.io](http://pult.io/)（您在桌面浏览器和手机上启动以相互通信的 Web 应用程序）的工作方式是这样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:50:24.380

查看[http://xsockets.net](http://xsockets.net)，如果您在 .net 上运行，Nuget-Package 中包含一组示例可以帮助您。您还可以仅使用 XSockets.NET 的 JavaScript API 和名为[http://live.xsockets.net的云托管服务](http://live.xsockets.net)

# c# - Unity Light Material“附加材质”

> ID：13576671
> 
> 赞同：0
> 
> 时间：2012-11-27T02:49:26.403
> 
> 标签：c#, unity3d

我有一个通过脚本生成的 2d 平面，我需要它上面有一个可以用作灯光的材料。

我正在做的是一个带有生成的 2d 火炬（飞机）的侧卷轴游戏，现在环境颜色和天空盒是漆黑的，我的 2d 火炬需要点亮 3d 的背景，到目前为止，我已经变得几乎可取粒子添加材料的效果，但是对比度很弱，如果环境是黑色的，将无济于事。

我是否需要开发自己的着色器，因为在我不想这样做之前我从未这样做过，或者是否有我可以使用的简单材质解决方案。

我正在免费使用unity3.55

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:46:37.113

粒子系统不会点亮任何东西。您唯一的开箱即用解决方案是像素点光源。

# matlab - 用符号输入 MatLab 求解方程

> ID：13576673
> 
> 赞同：1
> 
> 时间：2012-11-27T02:49:50.007
> 
> 标签：matlab

我正在尝试求解一个耦合方程。我有函数 V 取决于改变变量 tk(n) 和函数 UP。这是我为 UP 求解方程的输入。

这是我的代码：

```
OMG=zeros(kPoints,1);
for nn1=1:kPoints
    OMG(nn1)=sqrt(tk(nn1))*(tanh((-sqrt(betaV)*betaU*sqrt(tk(nn1))+sqrt(betaV)*sqrt(tk(nn1)*tk(nn1*tk(nn1)))./CHI*CHI))./sqrt(betaV)   ;
end;

V=zeros(kPoints,1);
% UP=zeros(kPoints,1);
syms UP;
for nn1=1:kPoints-1
    V(nn1)=(CHI*UP)./(tk(nn1)-betaV*OMG(nn1));
    S=solve(UP==-CHI*sum(V((nn1)))+1i*betaU*UP,UP);
end; 
```

MatLab 给出错误提示：`DOUBLE cannot convert the input expression into a double array.` 我会提前感谢任何详细的帮助。谢谢

# svm - LibSVM 是否接受具有科学格式的浮点数的训练文件？

> ID：13576674
> 
> 赞同：4
> 
> 时间：2012-11-27T02:50:15.077
> 
> 标签：svm, libsvm

**LibSVM**是否接受科学格式的浮点数？

具有...的功能。</p>

```
index: 4
value: 1.04515435733819E-05 
```

…看起来像这样：

```
4:1.04515435733819E-05 
```

我有一个很大的训练文件，里面充满了浮点值，它们的指数从`-06`到`+31`.

（注：我关心的是特征值
的格式，我知道训练文件的格式，即`label index:value index:value ...`：）

我正在使用**Visual C++ 2010** ，并且正在使用和类将其写入`value`文件。`String``StreamWriter`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T04:02:12.997

鉴于**LibSVM** ( **v3.16** ) 使用`stdlib`'`double strtod(const char *, char **)`函数来读取特征值，它应该接受**所有可以读取的符号`strtod()`**。

（顺便说一句，标签也是如此，如下面的代码片段所示，也可以是浮点数。）

有问题的代码可以在来自**LibSVM**的源代码分发`void read_problem(const char *filename)`的`svm-train.c`文件中找到。

 **这是相关部分的精简版`read_problem(...)`：

```
label = strtok(*line," \t\n");
problem->y[i] = strtod(label,&endptr);                 // document label
while (1) {
    idx = strtok(NULL,":");
    val = strtok(NULL," \t");
    (*x_space)[j].index = (int)strtol(idx,&endptr,10); // feature index
    (*x_space)[j].value = strtod(val,&endptr);         // feature value
    ++j;
} 
```**

# javascript - 不会重新计算基于数组值的计算属性

> ID：13576675
> 
> 赞同：4
> 
> 时间：2012-11-27T02:50:34.153
> 
> 标签：javascript, coffeescript, ember.js

## 问题空间

我正在渲染一些嵌套的 Ember 视图，这样我就可以制作一个拆分窗格样式的 UI。我想在第一次渲染时调整我的视图大小，以便它们具有相等的宽度。我不希望我的子视图互相看着，所以我使用一个子类`Ember.ContainerView`来保存我的内容和可拖动的拆分器句柄。

我不能`Ember.View#didInsertElement`在我的容器视图上使用，因为我需要等待我的子视图完全呈现。

## 我的（尝试的）解决方案

我正在使用此答案中提供的代码：[如何等待模板完全呈现](https://stackoverflow.com/questions/12086848/emberjs-how-to-wait-until-a-template-is-fully-rendered-before-accessing-its-ch)。这会`isRendered`为所有实例添加一个属性，该属性会在模板通过重新打开 Ember.View`Ember.View`触发时自动设置：`didInsertElement`

```
Ember.View.reopen

  didInsertElement: ->
    res = @_super();
    @_setIsRendered();
    res

  _setIsRendered: ->
    if (!! @$())
      @set('isRendered', true)
    else
      Ember.run.next this, ->
        @_setIsRendered() 
```

我尝试重新打开`Ember.ContainerView`以向所有容器视图添加一个`childViewsRendered`属性，但 Ember 反对并为子视图中只有一个项目的容器视图抛出了一些非常奇怪的 IndexOutOfBounds 错误。

我最终将我的收藏代码放在以下 mixin 中：

```
App.ChildrenRendered = Ember.Mixin.create

  childViewsRendered: (->
    res = @get('childViews').everyProperty('isRendered')
    console.log('childViewsRendered', res, this)

    # Pointer to this most offensive object for debugging
    window.wtf = this
    res
  ).property('childViews.@each.isRendered')

  _runChildViewsDidRender: (->
    if @get('childViewsRendered')
      console.log('trying to invoke childViewsDidRender')
      Ember.tryInvoke(this, 'childViewsDidRender')
  ).observes('childViewsRendered') 
```

然后我有这样的课：

```
App.SplitterView = Ember.ContainerView.extend App.ChildrenRendered,
  # ...(some properties)...
  init: ->
    child_views = @get('childViews')
    child_views.pushObjects([App.WindowView.create(), App.WindowView.create()]) 
```

* * *

## 什么有效：

*   `App.SplitterView#childViewsRendered`在任何视图渲染之前计算一次，因此变为`false`
*   视图由 Ember 处理（插入和渲染），并设置它们自己的`isRendered`属性。
*   稍后运行`window.wtf.get('childViews').everyProperty('isRendered')`返回`true`。

## 什么不起作用：

*   计算的属性`childViewsRendered`永远不会再自我更新。
*   数组元素成员上的虚拟值的计算属性`childView`似乎也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:49:47.157

如果没有 jsFiddle 看，我只能按照您所说的和您提供的片段进行，但似乎您要做的只是确保容器的所有 childViews 在***做某事***之前都在 DOM 中，是的？

如果是这样的话......当视图被添加到`childViews`它们时，如您所知，它们会自动呈现并插入到 DOM 中。好吧，这一切都发生在同一个 RunLoop 中。因此，要延迟某个函数的执行，直到所有子节点都“inDOM”，它就像观察`childViews.@each`和使用`Ember.run.next`延迟执行到下一个 RunLoop 一样简单。这是一个例子

```
App.SomeContainerView = Em.ContainerView.extend
  init: ->
    @_super() # run default init
    # add 2 of our 4 views
    @get('childViews').pushObjects [@aView.create(), @bView.create()]

  # a non-cached (volatile) computed property to check if children are inDOM
  # just used for demo purposes
  childrenAreInDom: (->
    @get('childViews').every (v) ->
      v.state is "inDOM"
  ).property().volatile()

  # our observer
  observeChildren: (->
    # if the container isn't inDOM yet the afterRender function we add below 
    # will handle it, if views are added/removed after that then we handle it here
    return unless @state is "inDOM"
    # output to console if every childview are inDOM
    console.log "observeChildren", @get('childrenAreInDom')
    # the above will always be false since we're still in the same RunLoop
    # next RunLoop our function will run
    Ember.run.next @, 'doWhatever'
  ).observes('childViews.@each') # observe changes in the childViews array

  afterRender: ->
    console.log "afterRender", @get('childrenAreInDom')
    Ember.run.next @, 'doWhatever'

  # the function we want to run eventually after children are inDOM
  doWhatever: ->
    console.log "doWhatever"
    # print out childrenAreInDom one more time.. it will be true
    console.log "childrenAreInDom:", @get('childrenAreInDom')

  # some views to insert
  aView: Em.View.extend
    template: Em.Handlebars.compile("A")
  bView: Em.View.extend
    template: Em.Handlebars.compile("B")
  cView: Em.View.extend
    template: Em.Handlebars.compile("C")
  dView: Em.View.extend
    template: Em.Handlebars.compile("D") 
```

如果您在模板中有 {{view App.SomeContainerView}}，在控制台中您会看到：

```
afterRender false
doWhatever
childrenAreInDom true 
```

如果您要在容器已经在 DOM 中之后通过 pushObjects 以编程方式添加 cView 和 dView，您会看到

```
observeChildren false
doWhatever
childrenAreInDom true 
```

即使这不是您想要的，希望它可以帮助您到达您需要的地方，而无需所有 Mixin 废话：D

# android - 如何在android中解析复杂的JSON文件

> ID：13576676
> 
> 赞同：1
> 
> 时间：2012-11-27T02:50:36.370
> 
> 标签：android, json

我需要解析这个 json 字符串

```
 {
"results": {
    "result": [
        {
            "cover": "http://ia.media-imdb.com/images/M/MV5BMjMyOTM4MDMxNV5BMl5BanBnXkFtZTcwNjIyNzExOA@@._V1._SX54_CR0,0,54,74_.jpg",
            "title": "The Amazing Spider-Man",
            "year": "(2012",
            "director": "Marc Webb",
            "rating": "7.3",
            "details": "http://www.imdb.com/title/tt0948470/"
        },
        {
            "cover": "http://i.media-imdb.com/images/SF1f0a42ee1aa08d477a576fbbf7562eed/realm/feature.gif",
            "title": "The Amazing Spider-Man 2",
            "year": "(2014",
            "director": "N/A",
            "rating": "N/A",
            "details": "http://www.imdb.com/title/tt1872181/"
        },
        {
            "cover": "http://ia.media-imdb.com/images/M/MV5BMzk3MTE5MDU5NV5BMl5BanBnXkFtZTYwMjY3NTY3._V1._SX54_CR0,0,54,74_.jpg",
            "title": "Spider-Man",
            "year": "(2002",
            "director": "Sam Raimi",
            "rating": "7.3",
            "details": "http://www.imdb.com/title/tt0145487/"
        },
        {
            "cover": "http://ia.media-imdb.com/images/M/MV5BODUwMDc5Mzc5M15BMl5BanBnXkFtZTcwNDgzOTY0MQ@@._V1._SX54_CR0,0,54,74_.jpg",
            "title": "Spider-Man 3",
            "year": "(2007",
            "director": "Sam Raimi",
            "rating": "6.3",
            "details": "http://www.imdb.com/title/tt0413300/"
        },
        {
            "cover": "http://ia.media-imdb.com/images/M/MV5BMjE1ODcyODYxMl5BMl5BanBnXkFtZTcwNjA1NDE3MQ@@._V1._SX54_CR0,0,54,74_.jpg",
            "title": "Spider-Man 2",
            "year": "(2004",
            "director": "Sam Raimi",
            "rating": "7.5",
            "details": "http://www.imdb.com/title/tt0316654/"
        }
    ]
}
} 
```

我得到了所有数据......但我无法显示从“封面”标签获得的图像网址......从这里开始最简单的方法是什么......？[http://ia.media-imdb.com/images/M/MV5BMjMyOTM4MDMxNV5BMl5BanBnXkFtZTcwNjIyNzExOA@@._V1._SX54_CR0,0,54,74_.jpg](http://ia.media-imdb.com/images/M/MV5BMjMyOTM4MDMxNV5BMl5BanBnXkFtZTcwNjIyNzExOA@@._V1._SX54_CR0,0,54,74_.jpg)

* * *

我已经从http json数据在listview中实现了Android Lazy Loading图像和文本，现在我想让列表项可点击，但我无法弄清楚如何在这种情况下做到这一点

```
 public class MainActivity extends Activity {

ListView mListView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);    

    final TextView txts=(TextView) findViewById(R.id.textView1);
    String URL1=getIntent().getExtras().getString("URL");

    // URL to the JSON data 
    String strUrl = URL1;

    // Creating a new non-ui thread task to download json data 
    DownloadTask downloadTask = new DownloadTask();

    // Starting the download process
    downloadTask.execute(strUrl);

    // Getting a reference to ListView of activity_main
    mListView = (ListView) findViewById(R.id.lv_countries);

   }

    /** A method to download json data from url */
    private String downloadUrl(String strUrl) throws IOException{
    String data = "";
    InputStream iStream = null;
    try{
            URL url = new URL(strUrl);

            // Creating an http connection to communicate with url 
            HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

            // Connecting to url 
            urlConnection.connect();

            // Reading data from url 
            iStream = urlConnection.getInputStream();

            BufferedReader br = new BufferedReader(new InputStreamReader(iStream));

            StringBuffer sb  = new StringBuffer();

            String line = "";
            while( ( line = br.readLine())  != null){
                sb.append(line);
            }

            data = sb.toString();

            br.close();

    }catch(Exception e){
            Log.d("Exception while downloading url", e.toString());
    }finally{
            iStream.close();
    }

    return data;
      }

      /** AsyncTask to download json data */
     private class DownloadTask extends AsyncTask<String, Integer, String>{
    String data = null;
            @Override
            protected String doInBackground(String... url) {
                    try{
                        data = downloadUrl(url[0]);

                    }catch(Exception e){
                        Log.d("Background Task",e.toString());
                    }
                    return data;
            }

            @Override
            protected void onPostExecute(String result) {

                    // The parsing of the xml data is done in a non-ui thread 
                    ListViewLoaderTask listViewLoaderTask = new ListViewLoaderTask();

                    // Start parsing xml data
                    listViewLoaderTask.execute(result);

            }
      }

    /** AsyncTask to parse json data and load ListView */
     private class ListViewLoaderTask extends AsyncTask<String, Void, SimpleAdapter>{

    JSONObject jObject;
    // Doing the parsing of xml data in a non-ui thread 
    @Override
    protected SimpleAdapter doInBackground(String... strJson) {
        try{
            jObject = new JSONObject(strJson[0]);
            CountryJSONParser countryJsonParser = new CountryJSONParser();
            countryJsonParser.parse(jObject);
        }catch(Exception e){
            Log.d("JSON Exception1",e.toString());
        }

        // Instantiating json parser class
        CountryJSONParser countryJsonParser = new CountryJSONParser();

        // A list object to store the parsed countries list
        List<HashMap<String, Object>> countries = null;

        try{
            // Getting the parsed data as a List construct
            countries = countryJsonParser.parse(jObject);
        }catch(Exception e){
            Log.d("Exception",e.toString());
        }          

        // Keys used in Hashmap 
        String[] from = { "country","flag","details"};

        // Ids of views in listview_layout
        int[] to = { R.id.tv_country,R.id.iv_flag,R.id.tv_country_details};

        // Instantiating an adapter to store each items
        // R.layout.listview_layout defines the layout of each item         
        SimpleAdapter adapter = new SimpleAdapter(getBaseContext(), countries,        
        return adapter;
    }

    /** Invoked by the Android on "doInBackground" is executed */
    @Override
    protected void onPostExecute(SimpleAdapter adapter) {

        // Setting adapter for the listview
        mListView.setAdapter(adapter);

        for(int i=0;i<adapter.getCount();i++){
            HashMap<String, Object> hm = (HashMap<String, Object>) adapter.getItem(i);
            String imgUrl = (String) hm.get("flag_path");
            ImageLoaderTask imageLoaderTask = new ImageLoaderTask();

            HashMap<String, Object> hmDownload = new HashMap<String, Object>();
            hm.put("flag_path",imgUrl);
            hm.put("position", i);

            // Starting ImageLoaderTask to download and populate image in the listview 
            imageLoaderTask.execute(hm);
        }
    }       
}

   /** AsyncTask to download and load an image in ListView */
  private class ImageLoaderTask extends AsyncTask<HashMap<String, Object>, Void, HashMap<St

    @Override
    protected HashMap<String, Object> doInBackground(HashMap<String, Object>... hm) {

        InputStream iStream=null;
        String imgUrl = (String) hm[0].get("flag_path");
        int position = (Integer) hm[0].get("position");

        URL url;
        try {
            url = new URL(imgUrl);

            // Creating an http connection to communicate with url
            HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

            // Connecting to url                
            urlConnection.connect();

            // Reading data from url 
            iStream = urlConnection.getInputStream();

            // Getting Caching directory 
            File cacheDirectory = getBaseContext().getCacheDir();

            // Temporary file to store the downloaded image 
            File tmpFile = new File(cacheDirectory.getPath() + "/wpta_"+position+".png");               

            // The FileOutputStream to the temporary file
            FileOutputStream fOutStream = new FileOutputStream(tmpFile);

            // Creating a bitmap from the downloaded inputstream
            Bitmap b = BitmapFactory.decodeStream(iStream);             

            // Writing the bitmap to the temporary file as png file
            b.compress(Bitmap.CompressFormat.PNG,100, fOutStream);              

            // Flush the FileOutputStream
            fOutStream.flush();

            //Close the FileOutputStream
            fOutStream.close();             

            // Create a hashmap object to store image path and its position in the listview
            HashMap<String, Object> hmBitmap = new HashMap<String, Object>();

            // Storing the path to the temporary image file
            hmBitmap.put("flag",tmpFile.getPath());

            // Storing the position of the image in the listview
            hmBitmap.put("position",position);              

            // Returning the HashMap object containing the image path and position
            return hmBitmap;                

        }catch (Exception e) {              
            e.printStackTrace();
        }
        return null;
    }

    @Override
    protected void onPostExecute(HashMap<String, Object> result) {
        // Getting the path to the downloaded image
        String path = (String) result.get("flag");          

        // Getting the position of the downloaded image
        int position = (Integer) result.get("position");

        // Getting adapter of the listview
        SimpleAdapter adapter = (SimpleAdapter ) mListView.getAdapter();

        // Getting the hashmap object at the specified position of the listview
        HashMap<String, Object> hm = (HashMap<String, Object>)   adapter.getItem(position); 

        // Overwriting the existing path in the adapter 
        hm.put("flag",path);

        // Noticing listview about the dataset changes
        adapter.notifyDataSetChanged(); 
    }
}

    @Override
   public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
  }
  } 
```

怎么做到呢 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T03:05:26.147

首先请看一些教程，例如：

[http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

[http://www.vogella.com/articles/AndroidJSON/article.html](http://www.vogella.com/articles/AndroidJSON/article.html)

```
JSONObject response = new JSONObject(respString);
ArrayList<Book> bookCollection = new ArrayList<Book>();//
    if(response.has("results")){
        if(response.has("result")){
            JSONArray resultArray = response.getJSONArray("result");
            for(int iCount=0; iCount<resultArray.length; iCount++){
                JSONObject item = resultArray.getJSONObject(iCount);
                Book book = new Book();
                if(item.has("title")){
                    book.title =item.getString("title");
                }
                bookCollection.add(book);
            }
        }
    } 
```

* * *

要填充的 pojo

```
public Book{

public String cover;
public String title;

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T03:21:04.537

您可以尝试将当前 Json 字符串解析为：

```
JSONObject response = new JSONObject(respString);
JSONObject jsonobjresults = response.getJSONObject("results");
JSONArray resultArray = jsonobjresults.getJSONArray("result");
Map<Integer,ArrayList<String>> 
                       mapoflisp = new HashMap<Integer,ArrayList<String>>();  
ArrayList<String> listofitem;
for(int i=0; i<resultArray.length; i++){
    JSONObject itemobj = resultArray.getJSONObject(i);
    listofitem=new ArrayList<String>();
    // Add items in List
    listofitem.add(item.getString("cover"));
    listofitem.add(item.getString("title"));
    listofitem.add(item.getString("year"));
    listofitem.add(item.getString("director"));
    listofitem.add(item.getString("rating"));
    listofitem.add(item.getString("details"));

     //add list to Map
    mapoflisp.put(i,listofitem); 

    // your code here...
 } 
```

# xcode - 通过命令行删除模拟器上的应用程序

> ID：13576682
> 
> 赞同：1
> 
> 时间：2012-11-27T02:51:16.530
> 
> 标签：xcode, bash, ios-simulator, ui-automation

我正在编写一个自动化测试，它将使用 Instruments 自动化器在我的应用程序上运行一系列 UX 测试。问题是，对于我正在运行的特定测试集，我需要在全新安装上运行该应用程序。有没有办法通过命令行删除模拟器中的应用程序？

具体来说，我正在寻找这样的东西：

```
xcodeBuild -delete myApp.app 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:22:50.073

像这样的东西可能会起作用，尽管我还没有完全测试过：

```
rm -rf ~/Library/Application\ Support/iPhone\ Simulator/6.0/Applications/* 
```

当然，用正确的模拟器版本号替换 6.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T20:50:30.537

我实际上最终使用了这里找到的解决方案：[https ://stackoverflow.com/a/5128616/608739](https://stackoverflow.com/a/5128616/608739)

苹果脚本运行良好，解决了所有那些讨厌的模拟器问题。

--------------- 旧帖子 -------------------

在 jpancoast 的指导下，我修改了他的脚本以在模拟器上查找并清除最新版本的应用程序：

```
CURRENT_SDK=""
if [ -z "$RUN_ON_SPECIFIC_DEVICE_OPTION" ] ; then
    CURRENT_SDK=$(xcodebuild -showsdks | grep 'iphoneos[0-9].[0-9]' | grep -o '[0-9].[0-9]' | head -n1)
else
    CURRENT_SDK=$(xcodebuild -showsdks | grep 'iphonesimulator[0-9].[0-9]' | grep -o '[0-9].[0-9]' | head -n1)
fi
rm -rf ~/Library/Application\ Support/iPhone\ Simulator/"$CURRENT_SDK"/Applications/* 
```

该脚本检查我们当前是否在设备上运行。然后它会找到与最新 SDK 对应的文件夹（假设您的项目是基于该 SDK 构建的）并删除与该 SDK 版本关联的所有应用程序。可以进一步细化以仅删除您感兴趣的特定应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-01T21:04:23.137

假设您知道 iOS 版本和应用程序的名称，这是我为删除单个应用程序而编写的脚本。如果您不想重置整个模拟器并丢失所有其他已安装的应用程序，它会派上用场。

下面的脚本是我使用的较大脚本的一部分，但应该如图所示工作。我已将此保存为simulator-uninstall.sh，然后您可以使用以下方式卸载应用程序：

```
./simulator-uninstall.sh ios=7.1 app="My App" 
```

这是脚本（注意，bash 不是我的强项，但这对我有用！）：

```
#!/bin/bash

for p in "$@"; do
    # Parse out each param which needs to be of the form key=value
    # Then remove any quotes around the value, because we will quote all vars anyway
    IFS="=" read argkey argvalue <<< "$p"
    argvalue="${argvalue%\"}"
    argvalue="${argvalue#\"}"
    case $argkey in
        ios)    IOS_VERSION=$argvalue
        ;;
        app)    APP_NAME=$argvalue
        ;;
    esac
done

SIMULATOR_ROOT="$HOME/Library/Application Support/iPhone Simulator/$IOS_VERSION"

# Find the *.app directory
APP_PATH=`find "$SIMULATOR_ROOT/Applications" -name "$APP_NAME.app"`

if [ "$APP_PATH" ]; then
    # Ensure simulator isn't running whilst we remove the app
    killall "iPhone Simulator"

    # Get the parent directory - this will be a UUID, then remove it
    APP_DIR=`dirname "$APP_PATH"`
    rm -rf "$APP_DIR"

    echo "Removed $APP_DIR"
else
    echo "App $APP_NAME not found for platform version $IOS_VERSION"
fi 
```

希望有帮助！

# java - java中没有这样关键字的静态接口与普通接口有什么区别？

> ID：13576684
> 
> 赞同：6
> 
> 时间：2012-11-27T02:51:41.500
> 
> 标签：java, interface, map, static

**我想知道静态接口**与java中没有此类关键字的普通接口有什么区别？
以及何时何地我们应该在**interface之前使用****static**关键字。为什么我们应该使用它？可以以这个界面为例非常感谢！ **`public static interface Map.Entry<K,V>`**

 *** * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T02:53:08.303

没有区别：`static`是*隐含*的-所有接口实际上都是静态的。

使用与否或`static`关键字是风格问题。就个人而言，我更喜欢使用`static`它，因为它符合内部静态*类*的语义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-27T09:04:11.727

接口本质上是静态的。您不能在块内声明接口。例如，以下代码摘录**无法编译**，因为 HelloThere 接口定义在方法 greetInEnglish 的主体内：

```
public void greetInEnglish() {
    interface HelloThere {
       public void greet();
    }
    class EnglishHelloThere implements HelloThere {
        public void greet() {
            System.out.println("Hello " + name);
        }
    }
    HelloThere myGreeting = new EnglishHelloThere();
    myGreeting.greet();
} 
```**

# spring - Cloudbees、Tomcat 和 Spring：“无法为连接 URL 'null' 创建类 '' 的 JDBC 驱动程序”

> ID：13576685
> 
> 赞同：1
> 
> 时间：2012-11-27T02:51:59.713
> 
> 标签：spring, tomcat, cloudbees

我正在尝试将我的 Spring MVC webapp（Hibernate 和 JPA）部署到 Cloudbees 中的 Tomcat 7 ClickStack，但似乎无法正确配置数据库连接。我尝试了多个教程（提供了许多解决方案），但都没有奏效。如果有人可以在下面查看我的配置文件并让我知道他们是否发现任何错误，我们将不胜感激。

错误：

```
java.lang.NullPointerException
org.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot create JDBC driver of class '' for connect URL 'null' 
```

首先，我使用 cloudbees cli 将我的数据库绑定到我的应用程序，这样我就不必在 cloudbees-web.xml 中声明它：

```
bees app:bind -a myapp/app -db mydatabase
    application - myapp/app bound to cb-db:myapp/mydatabase as mydatabase 
```

（我也尝试过取消绑定数据库并在 cloudbees-web.xml 和 context.xml 中定义它但没有成功）

**弹簧数据.xml：**

```
<jee:jndi-lookup id="datasource" jndi-name="jdbc/mydatabase"
                 lookup-on-startup="false" proxy-interface="javax.sql.DataSource"
                 cache="true" resource-ref="true"  />

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="hibernate-jpa"/>
    <property name="dataSource" ref="dataSource"/>
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="databasePlatform" value="org.hibernate.dialect.MySQL5Dialect"/>
            <property name="showSql" value="false"/>
            <property name="generateDdl" value="true"/>
        </bean>
    </property>
</bean>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
    <property name="jpaDialect">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaDialect"/>
    </property>
</bean> 
```

**网页.xml：**

```
<resource-ref>
    <res-ref-name>jdbc/mydatabase</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref> 
```

我已经从我的 Maven 文件和`lib`文件夹中的所有 jar 中删除了对连接器的所有引用。搜索错误消息显示它通常与找不到驱动程序有关...但是由于数据库是由容器提供的，我为什么要担心呢？

## -- 编辑：工作 META-INF/context.xml 文件 --

请注意，很多文档中引用的 com.cloudbees.jdbc.Driver 不起作用（引发了 classnotfound 异常），因此我不得不将 mysql-connector-java.jar 文件打包到 lib 文件夹中。另外，现在我只是硬编码了 url、用户名和密码，而不是设置它来使用系统属性。

```
<Context>
<Loader delegate="true"/>
<Resource
        name="jdbc/mydatabase"
        auth="Container"
        type="javax.sql.DataSource"
        maxActive="5"
        maxIdle="2"
        username="USERNAME"
        maxWait="5000"
        driverClassName="com.mysql.jdbc.Driver"
        password="PASSWORD"
        url="jdbc:mysql://MY_EC2_DB_URL:3306/mydatabase"/>
</Context> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:40:09.977

我面临同样的问题，终于设法“正确”配置数据源！

我正在使用 PropertyPlaceholderConfigurer，如下所示：

```
<bean id="jpaVendorAdapter" class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
   <property name="showSql" value="false" />
   <property name="database" value="MYSQL" />
   <property name="generateDdl" value="false" />
</bean>

<context:property-placeholder system-properties-mode="FALLBACK" />

<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
   <property name="driverClassName" value="${dt4j.driver}" />
   <property name="url" value="${dt4j.url}" />
   <property name="username" value="${dt4j.username}" />
   <property name="password" value="${dt4j.password}" />
</bean> 
```

“FALLBACK”表示应根据任何本地属性解析占位符，然后再根据系统属性解析占位符。

最后，我只需要添加系统属性（-Dprop=value）或将它们添加到 Cloudbees 部署器插件中即可使其工作。肯定有更好的方法，但主要目标已经实现：数据源配置在项目中没有硬编码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T00:36:28.693

不幸的是，此时 JNDI DB 设置尚未在 tomcat7 堆栈中为您完成。

当您将数据库绑定到您的应用程序时 - 它会注入一些系统属性：

```
MYSQL_PASSWORD_MYDB 
MYSQL_URL_MYDB
MYSQL_USERNAME_MYDB 
```

（MYDB 因为它是您的数据库资源的名称）。然后，您可以在您的代码/配置中引用它们。对于 tomcat 7，您可以将 /META-INF/context.xml 放入您的应用程序中，这将设置 JNDI 数据源（请参阅[http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples -howto.html](http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html) )

# ruby - 元素重复一定次数的数组的排列

> ID：13576687
> 
> 赞同：0
> 
> 时间：2012-11-27T02:52:12.130
> 
> 标签：ruby

我正在尝试编写一个执行以下操作的`Array`扩展：

我这样称呼它：

`%w[eggs bacon sausage].with_every_possibiity_of_multiples(2)`

它给了我这些：

```
 [   
    %w[eggs, bacon, sausage],
    %w[eggs, eggs, bacon, sausage],
    %w[eggs, bacon, bacon, sausage],
    %w[eggs, bacon, sausage, sausage],
    %w[eggs, eggs, bacon, bacon, sausage],
    %w[eggs, eggs, bacon, bacon, sausage, sausage],
  ] 
```

希望很清楚这里发生了什么。如果我用 3 而不是 2 的参数调用它，我会得到一个由 9 个元素组成的数组，其中一个是`%w[eggs, eggs, eggs, bacon, sausage]`.

我正在努力想出如何写这个。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:43:43.657

正如@sawa 指出的那样，您的结果可能混淆了。我猜传递 2 得到 8 个元素，而不是 6，传递 3 得到 27，而不是 9。

您可以充分利用[`Array#repeated_combination`](http://ruby-doc.org/core-1.9.3/Array.html#method-i-repeated_combination)来生成要重复每个元素的次数：

```
class Array
  def with_every_possibility_of_multiples(n)
    (1..n).to_a.repeated_permutation(size).map do |repeats|
      zip(repeats).flat_map{|elem, nb| [elem] * nb}
    end
  end
end

food = %w[eggs bacon sausage]
food.with_every_possibility_of_multiples(2) # =>
[["eggs", "bacon", "sausage"], ["eggs", "bacon", "sausage", "sausage"], ["eggs", "bacon", "bacon", "sausage"],
 ["eggs", "bacon", "bacon", "sausage", "sausage"],
 ["eggs", "eggs", "bacon", "sausage"],
 ["eggs", "eggs", "bacon", "sausage", "sausage"],
 ["eggs", "eggs", "bacon", "bacon", "sausage"],
 ["eggs", "eggs", "bacon", "bacon", "sausage", "sausage"]]

food.with_every_possibility_of_multiples(3) # =>
[["eggs", "bacon", "sausage"],
 ["eggs", "bacon", "sausage", "sausage"],
 ["eggs", "bacon", "sausage", "sausage", "sausage"],
 ["eggs", "bacon", "bacon", "sausage"],
 ["eggs", "bacon", "bacon", "sausage", "sausage"],
 ["eggs", "bacon", "bacon", "sausage", "sausage", "sausage"],
 ["eggs", "bacon", "bacon", "bacon", "sausage"],
 ["eggs", "bacon", "bacon", "bacon", "sausage", "sausage"],
 ["eggs", "bacon", "bacon", "bacon", "sausage", "sausage", "sausage"],
 ["eggs", "eggs", "bacon", "sausage"],
 ["eggs", "eggs", "bacon", "sausage", "sausage"],
 ["eggs", "eggs", "bacon", "sausage", "sausage", "sausage"],
 ["eggs", "eggs", "bacon", "bacon", "sausage"],
 ["eggs", "eggs", "bacon", "bacon", "sausage", "sausage"],
 ["eggs", "eggs", "bacon", "bacon", "sausage", "sausage", "sausage"],
 ["eggs", "eggs", "bacon", "bacon", "bacon", "sausage"],
 ["eggs", "eggs", "bacon", "bacon", "bacon", "sausage", "sausage"],
 ["eggs", "eggs", "bacon", "bacon", "bacon", "sausage", "sausage", "sausage"],
 ["eggs", "eggs", "eggs", "bacon", "sausage"],
 ["eggs", "eggs", "eggs", "bacon", "sausage", "sausage"],
 ["eggs", "eggs", "eggs", "bacon", "sausage", "sausage", "sausage"],
 ["eggs", "eggs", "eggs", "bacon", "bacon", "sausage"],
 ["eggs", "eggs", "eggs", "bacon", "bacon", "sausage", "sausage"],
 ["eggs", "eggs", "eggs", "bacon", "bacon", "sausage", "sausage", "sausage"],
 ["eggs", "eggs", "eggs", "bacon", "bacon", "bacon", "sausage"],
 ["eggs", "eggs", "eggs", "bacon", "bacon", "bacon", "sausage", "sausage"],
 ["eggs", "eggs", "eggs", "bacon", "bacon", "bacon", "sausage", "sausage", "sausage"]] 
```

请注意，这`repeated_permutation`是 Ruby 1.9.2 的新内容。您可以`require 'backports'`在早期版本中，或使用更丑陋的版本`product`：

```
# ...
(1..n).to_a.product(*[(1..n).to_a] * (size-1)).map do |repeats|
# ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:35:09.697

你可以试试这个内置的排列方法：

```
 %w[eggs bacon sausage].permutation(2).to_a 
```

# path - vimscript：通过文件名路径切换到缓冲区

> ID：13576691
> 
> 赞同：3
> 
> 时间：2012-11-27T02:52:52.623
> 
> 标签：path, buffer, filenames, vim

我有一个 vimscript 需要切换到特定的缓冲区。该缓冲区将由完整路径、部分路径或仅其名称指定。

例如：

我在目录中`/home/user/code`，打开了 3 个 vim 缓冲区`foo.py` `src/foo.py`，并且`src/bar.py`.

*   如果脚本被告知切换到 buffer `/home/user/code/foo.py`，它将切换到 buffer `foo.py`。

*   如果它被告知切换到`user/code/src/foo.py`它将切换到缓冲区`src/foo.py`

*   如果它被告知切换到`foo.py`它将切换到缓冲区`foo.py`

*   如果它被告知切换到`bar.py`它将切换到缓冲区`src/bar.py`

我能看到的最简单的解决方案是以某种方式获取存储在变量中的缓冲区列表并使用试错法。

如果解决方案是跨平台的就好了，但它至少需要在 Linux 上运行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T09:27:40.480

`bufname()`/`bufnr()`函数可以通过部分文件名查找加载的缓冲区。您可以通过附加 a 将匹配锚定到末尾`$`，如下所示：

```
echo bufnr('/src/foo.py$') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:42:01.497

我找到了一种在 vimscript 中使用 python 的方法。使用 python，我能够从`vim.buffers[i].name`和使用的所有缓冲区的名称中获取`os.path`并`os.sep`处理要切换到的缓冲区。

最后，我决定如果它被请求切换到的缓冲区不明确，它拒绝做任何事情会更有帮助。

这里是：

```
"Given a file, full path, or partial path, this will try to change to the
"buffer which may match that file. If no buffers match, it returns 1\. If
"multiple buffers match, it returns 2\. It returns 0 on success
function s:GotoBuffer(buf)
python << EOF
import vim, os
buf = vim.eval("a:buf")

#split the paths into lists of their components and reverse.
#e.g. foo/bar/baz.py becomes ['foo', 'bar', 'baz.py']
buf_path = os.path.normpath(buf).split(os.sep)[::-1]
buffers = [os.path.normpath(b.name).split(os.sep)[::-1] for b in vim.buffers]
possible_buffers = range(len(buffers))

#start eliminating incorrect buffers by their filenames and paths
for component in xrange(len(buf_path)):
    for b in buffers:
        if len(b)-1 >= component and b[component] != buf_path[component]:
            #This buffer doesn't match. Eliminate it as a posibility.
            i = buffers.index(b)
            if i in possible_buffers: possible_buffers.remove(i)

if len(possible_buffers) > 1: vim.command("return 2")
#delete the next line to allow ambiguous switching
elif not possible_buffers: vim.command("return 1") 
else:
    vim.command("buffer " + str(possible_buffers[-1] + 1))
EOF
endfunction 
```

**编辑：**上面的代码似乎有一些错误。我不打算修复它们，因为还有另一个更好的答案。

# java - spring-jpa-1.0.xsd 冲突

> ID：13576694
> 
> 赞同：0
> 
> 时间：2012-11-27T02:53:02.437
> 
> 标签：java, spring

我是 Spring 新手，我的命名空间有问题，它显然涉及 spring-jpa-1.0.xsd。我注意到其他人也有这种情况。问题是 spring-jpa-1.0.xsd 将 spring-context 的版本硬编码为 3.0.，但我还没有看到关于如何修复它的明确解释。我的 xml 开头如下：

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:jpa="http://www.springframework.org/schema/data/jpa"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:jdbc="http://www.springframework.org/schema/jdbc"
xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
    http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd
    http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.0.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd"> 
```

我得到的错误是：

```
 The errors below were detected when validating the file "spring-jpa-1.0.xsd" via the file "datasource-tx-jpa.xml". 
```

我的 jpa 的 POM 是：

```
 <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-jpa</artifactId>
        <version>1.0.2.RELEASE</version>
    </dependency> 
```

我将版本更改为

```
 <version>1.1.0.BUILD-SNAPSHOT</version> 
```

但是现在我收到了一个我不知道如何修复的缺失工件错误。

有人知道怎么修这个东西吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:38:23.677

尝试更新到`spring-jpa-1.1`

**上下文.xml**

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:jpa="http://www.springframework.org/schema/data/jpa"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:jdbc="http://www.springframework.org/schema/jdbc"
xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
    http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd
    http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.1.xsd"
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd"> 
```

**pom.xml**

```
 <dependency>
   <groupId>org.springframework.data</groupId>
   <artifactId>spring-data-jpa</artifactId>
   <version>1.1.0.RELEASE</version>
   </dependency> 
```

# php - Amazon api试图获取非对象的属性

> ID：13576700
> 
> 赞同：1
> 
> 时间：2012-11-27T02:53:28.097
> 
> 标签：php

我正在使用亚马逊产品广告 API。

因此，我收到了诸如“尝试获取非对象的属性”之类的通知。谁能告诉我如何解决这个问题？

这是我的代码

```
if(!is_null($result->Items[0]->ItemAttributes->ListPrice->FormattedPrice) && $result->Items[0]->ItemAttributes->ListPrice->FormattedPrice != '0'){
                $output_str .= '<span class="amazon-ad-listprice"><strong>List Price: </strong>'. $result->Items[0]->ItemAttributes->ListPrice->FormattedPrice .'</span>';
                } 
```

这是那部分的 var_dump

```
'ListPrice' => object AmazonProduct_Price (1)
protected _values -> array (3)
'Amount' => string (4) "3999"
'CurrencyCode' => string (3) "USD"
'FormattedPrice' => string (6) "$39.99" 
```

我只在没有这些值的产品中收到通知。

我试过使用isset（）。但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T03:11:33.503

如果这一切都取决于你的存在，`ListPrice`可以写一个简单的条件：

```
if (isset($result->Items[0]->ItemAttributes->ListPrice)) {
    // do stuff with ListPrice->FormattedPrice;
} 
```

# elasticsearch - 使用 PHP curl 在 ElasticSearch 中索引文档

> ID：13576703
> 
> 赞同：5
> 
> 时间：2012-11-27T02:54:11.377
> 
> 标签：elasticsearch

我正在尝试将文档添加到 ElasticSearch。我从命令行使用 curl 没有问题，但是在 PHP 中使用 curl 时遇到了问题。我正在关注文档中的这个例子： [http ://www.elasticsearch.org/guide/reference/api/index_.html](http://www.elasticsearch.org/guide/reference/api/index_.html)

以下代码给了我这个错误： `{"error":"IndexMissingException[[twitter] missing]","status":404}`

```
$search_host = '127.0.0.1';
$search_port = '9200';
$index = 'twitter';
$doc_type = 'tweet';
$doc_id = 1;

    $json_doc = array(
                "user" => "kimchy",
                "post_date" => "2012-11-15T14:12:12",
                "message" => "trying out Elastic Search"
            );
    $json_doc = json_encode($json_doc);

    $baseUri = 'http://'.$search_host.':'.$search_port.'/'.$index.'/'.$doc_type.'/'.$doc_id;

    $ci = curl_init();
    curl_setopt($ci, CURLOPT_URL, $baseUri);
    curl_setopt($ci, CURLOPT_PORT, $search_port);
    curl_setopt($ci, CURLOPT_TIMEOUT, 200);
    curl_setopt($ci, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ci, CURLOPT_FORBID_REUSE, 0);
    curl_setopt($ci, CURLOPT_CUSTOMREQUEST, 'XPUT');
    curl_setopt($ci, CURLOPT_POSTFIELDS, $json_doc);
    $response = curl_exec($ci); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T14:51:12.567

您必须将 curl 选项设置`CURLOPT_CUSTOMREQUEST`为`PUT`，而不是`XPUT`。

```
curl_setopt($ci, CURLOPT_CUSTOMREQUEST, 'PUT'); 
```

# python - 带有中文标签的networkx draw_graphviz

> ID：13576704
> 
> 赞同：3
> 
> 时间：2012-11-27T02:54:24.670
> 
> 标签：python, networkx, neato, pygraphviz

我有一个图表，其中节点标签是中文的。我想用 来画`draw_graphviz()`，但是保存图片时，没有汉字显示。相反，它们显示为白色块。

我只想知道如何设置字体。

```
nx.draw_graphviz(G, font_size=6, node_size=80, font_family='serif', font_color='b', alpha=0.1)       
plt.savefig("community__large" + str(i) + ".png")  
plt.close() 
```

以上是我现在使用的代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T08:41:24.550

> ...所有中文单词都没有显示，而是用块白色显示。

起初我无法复制您在使用时描述的行为`plt.show()`，但是在保存图像时，字符显示为白色块。在我的系统（OS X 10.8.2，Python 2.7.3）上，SimHei 字体似乎解决了这个问题。从[matplotlib 邮件列表中](https://sourceforge.net/p/matplotlib/mailman/message/26407518/)，我发现 Microsoft Yahei 字体也可以使用，但我没有尝试过。

```
g = nx.Graph()

g.add_edge('挪威'.decode('utf8'), '瑞典'.decode('utf8'))
nx.draw_graphviz(g, font_family='SimHei', node_size=1000,
    node_color='white')
plt.savefig('plot.png') 
```

这产生了以下图像：

![带有中文标签的图表](../Images/dc458434bd074940fed58f349020cd39.png)

请注意，我是从谷歌翻译中得到汉字的，所以我希望它没有任何冒犯性。

# node.js - 根据 id 更新数组对象？

> ID：13576707
> 
> 赞同：3
> 
> 时间：2012-11-27T02:55:09.187
> 
> 标签：node.js, mongodb

我有一个 mongo 问题。我想知道是否有一种方法可以在 mongo 控制台命令中执行以下操作，而不是多个`find`和`update`调用。

```
{
    "_id" : ObjectId("50b429ba0e27b508d854483e"),
    "array" : [
        {
            "id" : "1",
            "letter" : "a"
        },
        {
            "id" : "2",
            "letter" : "b"
        }
    ],
    "tester" : "tom"
} 
```

我想用这个新的数组项更新对象

```
{
    "id": "2",
    "letter": "c"
} 
```

我使用了这个，`addToSet`是有限的，如果它已经存在，它不会将一个项目插入到数组中，但它不会根据标识符更新一个项目。在这种情况下，我真的很想根据`id`.

```
db.soup.update({
     "tester": "tom"
 }, {
     $addToSet: {
         "array": {
             "id": "2",
             "letter": "c"
         }
     }
}); 
```

这给了我：

```
{
    "_id" : ObjectId("50b429ba0e27b508d854483e"),
    "array" : [
        {
            "id" : "1",
            "letter" : "a"
        },
        {
            "id" : "2",
            "letter" : "b"
        },
        {
            "id" : "2",
            "letter" : "c"
        }
    ],
    "tester" : "tom"
} 
```

当我真正想要的是：

```
{
    "_id" : ObjectId("50b429ba0e27b508d854483e"),
    "array" : [
        {
            "id" : "1",
            "letter" : "a"
        },
        {
            "id" : "2",
            "letter" : "c"
        }
    ],
    "tester" : "tom"
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T03:19:52.363

您可以使用[`$`](http://docs.mongodb.org/manual/reference/operator/positional/)位置运算符来执行此操作：

```
db.soup.update(
    {_id: ObjectId("50b429ba0e27b508d854483e"), 'array.id': '2'}, 
    {$set: {'array.$.letter': 'c'}}) 
```

更新对象中的`$`充当第一个元素的占位符`array`以匹配查询选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:25:08.787

干得好：

```
> db.collection.insert( { array : [ { id : 1, letter : 'a' }, { id : 2, letter : 'b' } ], tester : 'tom' } );
> db.collection.findOne();
{
    "_id" : ObjectId("50b431a69a0358d590a2f5f0"),
    "array" : [
        {
            "id" : 1,
            "letter" : "a"
        },
        {
            "id" : 2,
            "letter" : "b"
        }
    ],
    "tester" : "tom"
}
> db.collection.update( { tester : 'tom' }, { $set : { 'array.1' : { id : 2, letter : 'c' } } }, false, true );
> db.collection.findOne();
{
    "_id" : ObjectId("50b431a69a0358d590a2f5f0"),
    "array" : [
        {
            "id" : 1,
            "letter" : "a"
        },
        {
            "id" : 2,
            "letter" : "c"
        }
    ],
    "tester" : "tom"
} 
```

诀窍在于假、真、假。即：更新插入为真，更新倍数为假。

有关更多详细信息，请查看： [http ://www.mongodb.org/display/DOCS/Updating#Updating-update%28%29](http://www.mongodb.org/display/DOCS/Updating#Updating-update%28%29)

# ios - 在线程中调用 sleep(1) 会导致崩溃吗？

> ID：13576708
> 
> 赞同：1
> 
> 时间：2012-11-27T02:55:15.570
> 
> 标签：ios

我在我的项目中使用了 HUD。在我的应用程序中会出现这种情况：在主线程中它会做一个动画，而在子线程中它会调用睡眠。我会收到这样的崩溃日志：

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0xd0000008
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x383d55b0 objc_msgSend + 16
1   UIKit                           0x36b7b822 -[UIAnimator stopAnimation:] + 262
2   UIKit                           0x36c16252 -[UIAnimator(Static) _advanceAnimationsOfType:withTimestamp:] + 290
3   UIKit                           0x36b7b384 -[UIAnimator(Static) _LCDHeartbeatCallback:] + 48
4   QuartzCore                      0x35c7006c CA::Display::DisplayLink::dispatch(unsigned long long, unsigned long long) + 156
5   QuartzCore                      0x35c6ffc4 CA::Display::IOMFBDisplayLink::callback(__IOMobileFramebuffer*, unsigned long long, unsigned long long, unsigned long long, void*) + 60
6   IOMobileFramebuffer             0x312a6fd4 IOMobileFramebufferVsyncNotifyFunc + 152
7   IOKit                           0x312ab446 IODispatchCalloutFromCFMessage + 190
8   CoreFoundation                  0x3646d5d8 __CFMachPortPerform + 116
9   CoreFoundation                  0x36478170 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
10  CoreFoundation                  0x36478112 __CFRunLoopDoSource1 + 134
11  CoreFoundation                  0x36476f94 __CFRunLoopRun + 1380
12  CoreFoundation                  0x363e9eb8 CFRunLoopRunSpecific + 352
13  CoreFoundation                  0x363e9d44 CFRunLoopRunInMode + 100
14  GraphicsServices                0x385962e6 GSEventRunModal + 70
15  UIKit                           0x36a622fc UIApplicationMain + 1116
16  YH_EMenu                        0x000e36c4 main (main.m:14)
17  YH_EMenu                        0x000dd6cc start + 36

Thread 1:
0   libsystem_kernel.dylib          0x38503d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x33a27cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x33a27a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x33a278a0 start_wqthread + 4

Thread 2 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 2:
0   libsystem_kernel.dylib          0x384f3648 kevent64 + 24
1   libdispatch.dylib               0x33cc8974 _dispatch_mgr_invoke + 792
2   libdispatch.dylib               0x33cc8654 _dispatch_mgr_thread$VARIANT$mp + 32

Thread 3 name:  WebThread
Thread 3:
0   libsystem_kernel.dylib          0x384f2eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x384f3048 mach_msg + 36
2   CoreFoundation                  0x36478040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x36476d9e __CFRunLoopRun + 878
4   CoreFoundation                  0x363e9eb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x363e9d44 CFRunLoopRunInMode + 100
6   WebCore                         0x385f9a70 RunWebThread(void*) + 440
7   libsystem_c.dylib               0x33a3230e _pthread_start + 306
8   libsystem_c.dylib               0x33a321d4 thread_start + 4

Thread 4:
0   libsystem_kernel.dylib          0x38503d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x33a27cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x33a27a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x33a278a0 start_wqthread + 4

Thread 5:
0   libsystem_kernel.dylib          0x38503d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x33a27cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x33a27a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x33a278a0 start_wqthread + 4

Thread 6:
0   libsystem_kernel.dylib          0x385036a4 __semwait_signal + 24
1   libsystem_c.dylib               0x33a373ce nanosleep + 138
2   libsystem_c.dylib               0x33a97de6 sleep + 42
3   YH_EMenu                        0x000eb580 -[MainViewController threadENDSHOWHUD:] (MainViewController.m:939)
4   Foundation                      0x342ae678 __NSThread__main__ + 968
5   libsystem_c.dylib               0x33a3230e _pthread_start + 306
6   libsystem_c.dylib               0x33a321d4 thread_start + 4 
```

我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-27T02:59:33.803

而是尝试使用 sleep(1000) 1 秒。这里的“1000”代表 1000 毫秒。

# mysql - Rails 连接 pluck 返回类型而不是值

> ID：13576709
> 
> 赞同：0
> 
> 时间：2012-11-27T02:55:22.467
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3.2

运行查询

`

```
Profile.joins(:values).where("profiles.bill * values.data > 200").pluck(:bill)
```

返回`Object #<ActiveRecord::Relation:0x007fcf5175b6b0>`

但是，我想从该查询中收到一系列账单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T03:22:00.060

这是因为 Rails 延迟加载，有点像指针，添加

```
.all 
```

查询，您将获得实际的实例数组

# c# - 如何使用超出集合的单个模型的 EditorFor

> ID：13576714
> 
> 赞同：0
> 
> 时间：2012-11-27T02:56:10.103
> 
> 标签：c#, asp.net-mvc, razor

我对 MVC 比较陌生，但这就是我所拥有的：我有一个视图，它有一个类型的模型`IEnumerable<SportsStore.Domain.Entities.Comment>`

顾名思义，它用于收集评论。我还希望用户能够向页面添加评论。在以前的视图中，我使用了`@Html.EditorForModel()`. 这不起作用，因为模型是一个集合。

所以接下来我尝试使用`EditorFor()`，所以我尝试了这个`@Html.EditorFor(M => M.FirstOrDefault())`，但由于某种原因它不起作用。

有没有办法实现我正在尝试的东西，或者我必须为模型中的每个属性编写一个 html 小部件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T04:18:51.513

```
@Html.EditorFor(M => M.FirstOrDefault().FieldName) 
```

# sql - 不同提供者上的实体框架、DATALENGTH、SUM

> ID：13576716
> 
> 赞同：0
> 
> 时间：2012-11-27T02:56:16.913
> 
> 标签：sql, sql-server, entity-framework, sql-server-ce-3.5

**SQL Server CE 3.5
SQL Server 2008**

DataLenSumQuery：

```
SELECT SUM(DATALENGTH(Data)) FROM ... 
```

在 SQL Server CE 上，`Data`列的类型是`IMAGE`

在 SQL Server Standard 上，类型`Data`为`varbinary(MAX)`，因为 Microsoft 表示标准版的 IMAGE 类型已弃用并将被删除。

此代码适用于标准版：

```
using (var container = new DatabaseModelContainer())
{
var result = container.ExecuteStoreQuery<long?>(DataLenSumQuery).FirstOrDefault();
            long test= result.HasValue ? result.Value : 0L;
} 
```

但在 CE 上抛出异常：

> System.InvalidOperationException：从具体化的“System.Int32”类型到可为空的“System.Int64”类型的指定转换无效。

反之亦然，这适用于 CE：

```
using (var container = new DatabaseModelContainer())
{
var result = container.ExecuteStoreQuery<int?>(DataLenSumQuery).FirstOrDefault();
            long test= result.HasValue ? result.Value : 0L;
} 
```

但在标准上抛出异常：

> 从具体化的“System.Int64”类型到可为空的“System.Int32”类型的指定转换无效。

如果`Data`两个提供者上的列都是 IMAGE 并且使用`<int?>`了 for，`ExecuteStoreQuery`则工作正常。

Microsoft 建议在 Standard 上迁移到 varbinary(MAX)，但 Compact 版本甚至不支持它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:53:30.380

> 选择 CAST(SUM(DATALENGTH(Data)) AS BIGINT)

```
container.ExecuteStoreQuery<long?>() 
```

# neo4j - 使用 REST API 与 neo4j 的乐观并发

> ID：13576718
> 
> 赞同：0
> 
> 时间：2012-11-27T02:56:39.940
> 
> 标签：neo4j

在使用 REST API 更新和创建 neo4j 节点期间，有什么方法可以实现乐观并发？只有当该名称不存在时，我才想创建一个具有唯一名称的用户节点。如果他们同时选择相同的用户名，不希望两个用户意外地相互覆盖。

此外，我还可以使用递增的版本号来检查节点上的并发性。在 SQL 中，我通常会使用检查 id 和版本号的 where 子句进行更新。有没有我可以用 cypher 做的类似的事情，这很容易实现，并且不需要我将所有属性名称输入到一个长查询中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T04:50:43.967

你可以尝试一个唯一的索引：[http ://docs.neo4j.org/chunked/stable/rest-api-unique-indexes.html](http://docs.neo4j.org/chunked/stable/rest-api-unique-indexes.html)

密码“CREATE UNIQUE”语法也可能有帮助：[http ://docs.neo4j.org/chunked/stable/query-create-unique.html](http://docs.neo4j.org/chunked/stable/query-create-unique.html)

# vb.net - 尝试调用 sub 时出现此错误（在 mscorlib.dll 中发生了“System.StackOverflowException”类型的未处理异常）

> ID：13576719
> 
> 赞同：0
> 
> 时间：2012-11-27T02:56:46.847
> 
> 标签：vb.net, vb.net-2010

我有一个子程序会尝试在数据库中获取随机食物，获取这些食物卡路里的总和并检查它们是否不会超过所需的卡路里。

大部分时间子工作，但有时会出现此错误。这是我的代码。它有点长。

```
Private Sub lunchgenerate()

        Dim grams As Integer = DSgrams.Tables("grams").Rows(0).Item("grams")
        Dim grams1 As Integer = DSricegrams.Tables("ricegrams").Rows(0).Item("grams")
        Dim grams2 As Integer = DSgrams2.Tables("grams").Rows(0).Item("grams")

        Dim calorieval As Decimal = foodcalories * grams
        Dim calorieval1 As Decimal = ricecalories * grams1
        Dim calorieval2 As Decimal = foodcalories2 * grams2

        Dim carbval As Decimal = foodcarb * grams
        Dim carbval1 As Decimal = ricecarb * grams1
        Dim carbval2 As Decimal = foodcarb2 * grams2

        Dim proteinval As Decimal = foodprotein * grams
        Dim proteinval1 As Decimal = riceprotein * grams1
        Dim proteinval2 As Decimal = foodprotein2 * grams

        Dim fatval As Decimal = foodfat * grams
        Dim fatval1 As Decimal = ricefat * grams1
        Dim fatval2 As Decimal = foodfat2 * grams

        Dim caloriepercent As Decimal = usercalories * 0.5
        Dim mincalories As Decimal = caloriepercent - 300

        Dim proteinpercernt As Decimal = userprotein * 0.5
        Dim minprotein As Decimal = proteinpercernt - 20

        Dim counter As Integer = 0
        Dim counter1 As Integer = 0

        Dim foodcalorietotal As Decimal = calorieval + calorieval1 + calorieval2
        Dim foodproteintotal As Decimal = proteinval + proteinval1 + proteinval2
        Dim carbtotal As Decimal = carbval + carbval1 + carbval2
        Dim foodfattotal As Decimal = fatval + fatval1 + fatval2

        If foodcalorietotal < mincalories Or foodcalorietotal > caloriepercent Then
            counter = 0
        Else
            counter = 1
        End If

        If foodproteintotal < minprotein Or foodproteintotal > proteinpercernt Then
            counter1 = 0
        Else
            counter1 = 1
        End If

        If counter = 1 And counter1 = 1 Then
          'output to the form

        Else

                **lunchgenerate()**

            End If

        End If
End Sub 
```

**我认为错误是再次调用 lunchgenerate() 子时。**

但就像我说的那样，大多数时候它都有效，但有时它会冻结，然后出现这个错误，然后突出显示我的代码的第一行，即

```
 Dim DAlunchcategory As New SqlDataAdapter(lunchquery, CN)
        Dim DSlunchcategory As New DataSet
        DAlunchcategory.Fill(DSlunchcategory, "category_id") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:12:18.603

`Stack Overflow`当堆栈上没有空间时会发生错误（用于局部变量、参数值、函数结果和其他一些小东西的部分进程内存）。

产生此错误的代码通常通过执行无限递归来实现。如果您显示的代码是完整`lunchgenerate`的函数，则在其中一个`counter`或`counter1`不是 1 的情况下，`lunchgenerate`将再次以完全相同的结果再次调用，一次又一次，直到它完全耗尽堆栈上的空间并引发异常。您需要有一些转义逻辑来避免它。

# php - Magento'找不到基表或视图'系统降级

> ID：13576721
> 
> 赞同：0
> 
> 时间：2012-11-27T02:56:53.360
> 
> 标签：php, mysql, magento, mage

我试图将我的 Magento 从 1.1.8 更新到 3.x ......这是一场噩梦！

我的数据库已备份，我尝试从 core_resource 表中删除“catalog_setup”，它停止了此错误，但出现了另一个关于第 1 行重复条目的错误。我打算安装 v1.7 并尝试将所有 catalog_ 表拉过来但这很可能会失败吗？

我昨晚升级到了 2.x 版，但它没有用，因为试图恢复，我只是收到这个错误：

```
 PDOException Object
(
[message:protected] => SQLSTATE[42S02]: Base table or view not found: 1146 Table 'website_magento.catalog_product' doesn't exist
[string:private] => 
[code:protected] => 42S02
[file:protected] => /home/website/domains/[website]/public_html/lib/Varien/Db/Adapter/Pdo/Mysql.php
[line:protected] => 187
[trace:private] => Array
    (
        [0] => Array
            (
                [file] => /home/website/domains/[website]/public_html/lib/Varien/Db/Adapter/Pdo/Mysql.php
                [line] => 187
                [function] => query
                [class] => PDO
                [type] => ->
                [args] => Array
                    (
                        [0] => DELETE FROM catalog_product_entity_decimal
WHERE (entity_id in (
    SELECT entity_id FROM catalog_product WHERE type_id = 'downloadable'
)) and attribute_id = 64
                    )

            )

        [1] => Array
            (
                [file] => /home/website/domains/[website]/public_html/lib/Varien/Db/Adapter/Pdo/Mysql.php
                [line] => 249
                [function] => raw_query
                [class] => Varien_Db_Adapter_Pdo_Mysql
                [type] => ->
                [args] => Array
                    (
                        [0] => DELETE FROM catalog_product_entity_decimal
WHERE (entity_id in (
    SELECT entity_id FROM catalog_product WHERE type_id = 'downloadable'
)) and attribute_id = 64
                    )

            )

        [2] => Array
            (
                [file] => /home/website/domains/[website]/public_html/app/code/core/Mage/Core/Model/Resource/Setup.php
                [line] => 493
                [function] => multi_query
                [class] => Varien_Db_Adapter_Pdo_Mysql
                [type] => ->
                [args] => Array
                    (
                        [0] => 
DELETE FROM catalog_product_entity_decimal
WHERE (entity_id in (
    SELECT entity_id FROM catalog_product WHERE type_id = 'downloadable'
)) and attribute_id = 64

                    )

            )

        [3] => Array
            (
                [file] => /home/website/domains/[website]/public_html/app/code/core/Mage/Downloadable/sql/downloadable_setup/mysql4-upgrade-0.1.0-0.1.1.php
                [line] => 52
                [function] => run
                [class] => Mage_Core_Model_Resource_Setup
                [type] => ->
                [args] => Array
                    (
                        [0] => 
DELETE FROM catalog_product_entity_decimal
WHERE (entity_id in (
    SELECT entity_id FROM catalog_product WHERE type_id = 'downloadable'
)) and attribute_id = 64

                    )

            )

        [4] => Array
            (
                [file] => /home/website/domains/[website]/public_html/app/code/core/Mage/Core/Model/Resource/Setup.php
                [line] => 268
                [args] => Array
                    (
                        [0] => /home/website/domains/[website]/public_html/app/code/core/Mage/Downloadable/sql/downloadable_setup/mysql4-upgrade-0.1.0-0.1.1.php
                    )

                [function] => include
            )

        [5] => Array
            (
                [file] => /home/website/domains/[website]/public_html/app/code/core/Mage/Core/Model/Resource/Setup.php
                [line] => 178
                [function] => _modifyResourceDb
                [class] => Mage_Core_Model_Resource_Setup
                [type] => ->
                [args] => Array
                    (
                        [0] => upgrade
                        [1] => 0.1.0
                        [2] => 0.1.14
                    )

            )

        [6] => Array
            (
                [file] => /home/website/domains/[website]/public_html/app/code/core/Mage/Core/Model/Resource/Setup.php
                [line] => 145
                [function] => _upgradeResourceDb
                [class] => Mage_Core_Model_Resource_Setup
                [type] => ->
                [args] => Array
                    (
                        [0] => 0.1.0
                        [1] => 0.1.14
                    )

            )

        [7] => Array
            (
                [file] => /home/website/domains/[website]/public_html/app/code/core/Mage/Core/Model/Resource/Setup.php
                [line] => 120
                [function] => applyUpdates
                [class] => Mage_Core_Model_Resource_Setup
                [type] => ->
                [args] => Array
                    (
                    )

            )

        [8] => Array
            (
                [file] => /home/website/domains/[website]/public_html/app/code/core/Mage/Core/Model/Config.php
                [line] => 215
                [function] => applyAllUpdates
                [class] => Mage_Core_Model_Resource_Setup
                [type] => ::
                [args] => Array
                    (
                    )

            )

        [9] => Array
            (
                [file] => /home/website/domains/[website]/public_html/app/code/core/Mage/Core/Model/App.php
                [line] => 243
                [function] => init
                [class] => Mage_Core_Model_Config
                [type] => ->
                [args] => Array
                    (
                        [0] => Array
                            (
                            )

                    )

            )

        [10] => Array
            (
                [file] => /home/website/domains/[website]/public_html/app/Mage.php
                [line] => 424
                [function] => init
                [class] => Mage_Core_Model_App
                [type] => ->
                [args] => Array
                    (
                        [0] => 
                        [1] => store
                        [2] => Array
                            (
                            )

                    )

            )

        [11] => Array
            (
                [file] => /home/website/domains/[website]/public_html/app/Mage.php
                [line] => 443
                [function] => app
                [class] => Mage
                [type] => ::
                [args] => Array
                    (
                        [0] => 
                        [1] => store
                        [2] => Array
                            (
                            )

                    )

            )

        [12] => Array
            (
                [file] => /home/website/domains/[website]/public_html/index.php
                [line] => 46
                [function] => run
                [class] => Mage
                [type] => ::
                [args] => Array
                    (
                    )

            )

    )

[errorInfo] => Array
    (
        [0] => 42S02
        [1] => 1146
        [2] => Table 'website_magento.catalog_product' doesn't exist
    )

  )

  Error in file: "/home/website/domains/[website]/public_html/app/code/core/Mage/Downloadable/sql/downloadable_setup/mysql4-upgrade-0.1.0-0.1.1.php" - SQLSTATE[42S02]: Base table or view not found: 1146 Table 'website_magento.catalog_product' doesn't exist

  #0 /home/website/domains/[website]/public_html/app/code/core/Mage/Core/Model/Resource/Setup.php(286): Mage::exception('Mage_Core', 'Error in file: ...')
  #1 /home/website/domains/[website]/public_html/app/code/core/Mage/Core/Model/Resource/Setup.php(178): Mage_Core_Model_Resource_Setup->_modifyResourceDb('upgrade', '0.1.0', '0.1.14')
  #2 /home/website/domains/[website]/public_html/app/code/core/Mage/Core/Model/Resource/Setup.php(145): Mage_Core_Model_Resource_Setup->_upgradeResourceDb('0.1.0', '0.1.14')
  #3 /home/website/domains/[website]/public_html/app/code/core/Mage/Core/Model/Resource/Setup.php(120): Mage_Core_Model_Resource_Setup->applyUpdates()
  #4 /home/website/domains/[website]/public_html/app/code/core/Mage/Core/Model/Config.php(215): Mage_Core_Model_Resource_Setup::applyAllUpdates()
  #5 /home/website/domains/[website]/public_html/app/code/core/Mage/Core/Model/App.php(243): Mage_Core_Model_Config->init(Array)
  #6 /home/website/domains/[website]/public_html/app/Mage.php(424): Mage_Core_Model_App->init('', 'store', Array)
  #7 /home/website/domains/[website]/public_html/app/Mage.php(443): Mage::app('', 'store', Array)
  #8 /home/website/domains/[website]/public_html/index.php(46): Mage::run()
  #9 {main} 
```

# python - 即使请求已排队，Scrapy 也不会爬行？

> ID：13576723
> 
> 赞同：0
> 
> 时间：2012-11-27T02:57:01.853
> 
> 标签：python, scrapy

我目前有以下规则：

```
# Matches all comments page under user overview,
# http://lookbook.nu/user/50784-Adam-G/comments/
Rule(SgmlLinkExtractor(allow=('/user/\d+[^/]+/comments/?$'), deny=('\?locale=')),
    callback='parse_model_comments'),
# http://lookbook.nu/user/50784-Adam-G/comments?page=2
Rule(SgmlLinkExtractor(allow=('/user/\d+[^/]+/comments\?page=\d+$'), deny=('\?locale=')),
    callback='parse_model_comments'), 
```

在我的函数定义中，

```
def parse_model_comments(self, response):
  log.msg("Inside parse_model_comments")
  hxs = HtmlXPathSelector(response)
  model_url = hxs.select('//div[@id="userheader"]/h1/a/@href').extract()[0]
  comments_hxs = hxs.select(
      '//div[@id="profile_comments"]/div[@id="comments"]/div[@class="comment"]')
  if comments_hxs:
    log.msg("Yielding next page." + LookbookSpider.next_page(response.url))
    yield Request(LookbookSpider.next_page(response.url)) 
```

这是实际的运行日志：

```
2012-11-26 18:52:46-0800 [lookbook] DEBUG: Crawled (200) <GET http://lookbook.nu/user/1363501-Rachael-Jane-H/comments> (referer: None)
2012-11-26 18:52:46-0800 [lookbook] DEBUG: Crawled (200) <GET http://lookbook.nu/user/1363501-Rachael-Jane-H/comments> (referer: http://lookbook.nu/user/1363501-Rachael-Jane-H/comments)
2012-11-26 18:52:46-0800 [scrapy] INFO: Inside parse_model_comments
2012-11-26 18:52:46-0800 [scrapy] INFO: Yielding next page.http://lookbook.nu/user/1363501-Rachael-Jane-H/comments?page=2
2012-11-26 18:52:46-0800 [lookbook] DEBUG: Scraped from <200 http://lookbook.nu/user/1363501-Rachael-Jane-H/comments>
    {'model_url': u'http://lookbook.nu/rachinald',
     'posted_at': u'2012-11-26T13:21:49-05:00',
     'target_url': u'http://lookbook.nu/look/4290423-Blackout-Challenge-One',
     'text': u"Thanks Justina :) They're actually purple - the whole premise is to not wear black all week ^^",
     'type': 2}
...
2012-11-26 18:52:47-0800 [lookbook] DEBUG: Crawled (200) <GET http://lookbook.nu/user/1363501-Rachael-Jane-H/comments?page=2> (referer: http://lookbook.nu/user/1363501-Rachael-Jane-H/comments)
2012-11-26 18:52:48-0800 [lookbook] INFO: Closing spider (finished)
2012-11-26 18:52:48-0800 [lookbook] INFO: Dumping Scrapy stats:
    {'downloader/request_bytes': 2072,
     'downloader/request_count': 3,
     'downloader/request_method_count/GET': 3,
     'downloader/response_bytes': 51499,
     'downloader/response_count': 3,
     'downloader/response_status_count/200': 3,
     'finish_reason': 'finished',
     'finish_time': datetime.datetime(2012, 11, 27, 2, 52, 48, 43058),
     'item_scraped_count': 14,
     'log_count/DEBUG': 23,
     'log_count/INFO': 6,
     'request_depth_max': 3,
     'response_received_count': 3,
     'scheduler/dequeued': 3,
     'scheduler/dequeued/memory': 3,
     'scheduler/enqueued': 3,
     'scheduler/enqueued/memory': 3,
     'start_time': datetime.datetime(2012, 11, 27, 2, 52, 44, 446851)}
2012-11-26 18:52:48-0800 [lookbook] INFO: Spider closed (finished) 
```

即使 ?page=2 已被爬网，也未调用 parse_model_comments，因为未记录“Inside parse_model_comments”。

我检查`re.search('/user/\d+[^/]+/comments\?page=\d+$', 'http://lookbook.nu/user/1363501-Rachael-Jane-H/comments?page=2')`并确认它确实有效。

任何想法为什么 page=2 被爬网但函数没有被调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:08:23.187

事实证明，当您产生请求时，您必须在 CrawlSpider 中手动指定回调。

如果请求对象没有设置回调，默认的 parse() 将被调用。

Crawlspider 的 parse() 函数只返回 []*检查源*

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-27T08:14:29.033

I know it looks strange but the callback is not supposed to be a generator ( yield something)

I'll recommend:

```
def parse_model_comments(self, response):
   return list(_iter_parse_model_comments(self, response))

def _iter_parse_model_comments(self, response):
    # place your current code here 
```

# memory - 堆栈相对与堆栈延迟寻址

> ID：13576725
> 
> 赞同：1
> 
> 时间：2012-11-27T02:57:15.703
> 
> 标签：memory, assembly, pep8-assembly

下面两个代码示例中 s 和 sf 之间的实际区别是什么？

我知道堆栈相关看起来像 Mem [SP + OprndSpec] 和延迟看起来像 Mem [Mem [SP + OprndSpec]]。但是我不明白这是如何完成的。

堆栈延迟

```
 BR      main
a:       .BLOCK  2          ;global variable #2d
b:       .BLOCK  2          ;global variable #2d
;
;******* void swap (int& r, int& s)
r:       .EQUATE 6          ;formal parameter #2h
s:       .EQUATE 4          ;formal parameter #2h
temp:    .EQUATE 0          ;local variable #2d
swap:    SUBSP   2,i        ;allocate #temp
         LDA     r,sf       ;temp = r
         STA     temp,s
         LDA     s,sf       ;r = s
         STA     r,sf
         LDA     temp,s     ;s = temp
         STA     s,sf
         RET2               ;deallocate #temp, pop retAddr
;
;******* void order (int& x, int& y)
x:       .EQUATE 4          ;formal parameter #2h
y:       .EQUATE 2          ;formal parameter #2h
order:   LDA     x,sf       ;if (x > y)
         CPA     y,sf
         BRLE    endIf
         LDA     x,s        ;   push x
         STA     -2,s
         LDA     y,s        ;   push y
         STA     -4,s
         SUBSP   4,i        ;   push #r #s
         CALL    swap       ;   swap (x, y)
         ADDSP   4,i        ;   pop #s #r
endIf:   RET0               ;pop retAddr

;
;******* main ()
main:    STRO    msg1,d     ;cout << "Enter an integer: "
         DECI    a,d        ;cin >> a
         STRO    msg1,d     ;cout << "Enter an integer: "
         DECI    b,d        ;cin >> b
         LDA     a,i        ;push the address of a
         STA     -2,s
         LDA     b,i        ;push the address of b
         STA     -4,s
         SUBSP   4,i        ;push #x #y
         CALL    order      ;order (a, b)
ra1:     ADDSP   4,i        ;pop #y #x
         STRO    msg2,d     ;cout << "Ordered they are: "
         DECO    a,d        ;     << a
         STRO    msg3,d     ;     << ", "
         DECO    b,d        ;     << b
         CHARO   '\n',i     ;     << endl
         STOP
msg1:    .ASCII  "Enter an integer: \x00"
msg2:    .ASCII  "Ordered they are: \x00"
msg3:    .ASCII  ", \x00"
         .END 
```

堆栈相对

```
 BR      main        
;
;******* int binomCoeff (int n, int k)
retVal:  .EQUATE 10          ;returned value #2d
n:       .EQUATE 8           ;formal parameter #2d
k:       .EQUATE 6           ;formal parameter #2d
y1:      .EQUATE 2           ;local variable #2d
y2:      .EQUATE 0           ;local variable #2d
binCoeff:SUBSP   4,i         ;allocate #y1 #y2
if:      LDA     k,s         ;if ((k == 0)
         BREQ    then        
         LDA     n,s         ;|| (n == k))
         CPA     k,s         
         BRNE    else        
then:    LDA     1,i         ;return 1
         STA     retVal,s    
         RET4                ;deallocate #y2 #y1, pop retAddr
else:    LDA     n,s         ;push n - 1
         SUBA    1,i         
         STA     -4,s        
         LDA     k,s         ;push k
         STA     -6,s        
         SUBSP   6,i         ;push #retVal #n #k
         CALL    binCoeff    
ra2:     ADDSP   6,i         ;pop #k #n #retVal
         LDA     -2,s        ;y1 = binomCoeff (n - 1, k)
         STA     y1,s        
         LDA     n,s         ;push n - 1
         SUBA    1,i         
         STA     -4,s        
         LDA     k,s         ;push k - 1
         SUBA    1,i         
         STA     -6,s        
         SUBSP   6,i         ;push #retVal #n #k
         CALL    binCoeff    
ra3:     ADDSP   6,i         ;pop #k #n #retVal
         LDA     -2,s        ;y2 = binomCoeff (n - 1, k - 1)
         STA     y2,s        
         LDA     y1,s        ;return y1 + y2
         ADDA    y2,s        
         STA     retVal,s    
endIf:   RET4                ;deallocate #y2 #y1, pop retAddr
;
;******* main ()
main:    STRO    msg,d       ;cout << "binCoeff (3, 1) = "
         LDA     3,i         ;push 3
         STA     -4,s        
         LDA     1,i         ;push 1
         STA     -6,s        
         SUBSP   6,i         ;push #retVal #n #k
         CALL    binCoeff    
ra1:     ADDSP   6,i         ;pop #k #n #retVal
         DECO    -2,s        ;<< binCoeff (3, 1)
         CHARO   '\n',i      ;cout << endl
         STOP                
msg:     .ASCII  "binCoeff (3, 1) = \x00"
         .END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:42:32.563

您的问题似乎很简单，除了它们可能包含示例之外，与代码几乎没有关系。

（我不熟悉这个指令集，但在汇编中已经编码了很长时间。）

根据您提供的定义，“堆栈相对”是指在堆栈指针确定的位置从内存中获取项目，加上可能嵌入在指令中的常量偏移量。这被大多数人称为索引寻址，特别注意它是堆栈指针索引的。

“延迟”（一个旧术语）通常意味着“间接通过内存位置”，您对此的定义与此想法一致：找到“堆栈相对”位置，读取该位置，然后将该值用作要获取的内存位置。

# javascript - 使用历史对象的 Javascript 概念

> ID：13576727
> 
> 赞同：0
> 
> 时间：2012-11-27T02:57:50.700
> 
> 标签：javascript, arrays, history, concept

我有兴趣制作一个网站，当他们访问时，他们会闪现访问者的整个网络历史。我计划使用 JavaScript 来获取每个查看者计算机上的历史记录，并根据他们拥有的数量以不同的速度对其进行动画处理。我的想法是用来 `history.length`确定访问者历史的长度，然后用`history.go()`-1、-2、-3 等导航整个网络历史。我认识到加载时间会很长，但现在我只是想通过这个概念来思考。[这个](https://stackoverflow.com/questions/1232863/get-full-url-history-using-javascript)相关的问题似乎是我将用于我的代码的基础，但是，我不明白他们为什么描述这种方法不起作用。我是一名对 JavaScript 非常陌生的学生。

你们是否知道这是否可行，或者对实现我的想法有什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:11:07.137

您可以调用`history.go()`一次。这就是你所能得到的。原因很简单，一旦你进入上一页，你的 javascript 就消失了。iframe 也不起作用，因为您无法在具有来自另一个域的页面的 iframe 中执行自己的 JS。阅读有关[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)的更多信息。

我能想到的唯一真正的解决方案是浏览器扩展。之所以可行，是因为您的 JS 可以跨多个站点持续存在。您可能只需要在每个页面中执行以下操作的用户脚本：

*   检查变量以查看功能是否启用
*   如果是，则`history.go(-1)`在超时后调用（以控制速度）

我最熟悉 Chrome，所以我想象一个[browserAction](http://developer.chrome.com/extensions/browserAction.html)来启用/禁用脚本和一个执行重定向的[内容脚本](http://developer.chrome.com/extensions/content_scripts.html)。其他潜在选项包括[Greasemonkey](https://addons.mozilla.org/en-US/firefox/addon/greasemonkey/) (Firefox)、[Tampermonkey](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo) (Chrome)、[个性化 Web](https://chrome.google.com/webstore/detail/personalized-web/plcnnpdmhobdfbponjpedobekiogmbco) (Chrome) 脚本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T03:17:38.917

正如您链接到的问题中所述，JavaScript 和/或 DOM 不会让您访问整个浏览器历史记录，因为这将严重侵犯隐私。想象一下访问一个站点，让他们知道*您在该浏览器中访问过的每个站点*。

这可能会使站点访问：

1.  您仍在其他网站上登录的会话（如果他们将会话密钥存储在 URL 中，就像某些网站那样）
2.  深入了解您执行的活动类型（您是站点 X 的版主吗？）
3.  关于您感兴趣的内容的大量数据。

这不是标准机构或浏览器制造商认为用户有兴趣与所有人分享的东西。这就是为什么没有一个 API 可以遍历浏览器的整个历史。

@sachleen 已经提供了一个非常好的深入答案，如果您想构建此应用程序，如何解决单个浏览器的此限制。为了完整起见，我将简单地提及关键术语：“浏览器扩展”。:-)

# html - 将点击事件传递给可拖动 Div 中的控件

> ID：13576728
> 
> 赞同：1
> 
> 时间：2012-11-27T02:57:56.877
> 
> 标签：html, controls, draggable, onmouseclick

我们有一个使用 ASP、VB 和 Javascript 的 Web 应用程序。在其中，我们有一个项目表，允许对项目进行评论。注释代码是使用一个包含一些控件的 div 实现的——几个文本框和一些按钮。

我最近使用来自[http://www.brainjar.com](http://www.brainjar.com)的 Mike Hall 的通用拖动脚本为 div 添加了基本的可拖动性。目的是能够将评论 div 移出页面上其他文本的方式。

问题是文本框现在无法捕获它们的点击事件。无法发表评论。div 上的两个按钮似乎工作正常。

我已经在互联网上搜索了一段时间，并尝试了许多可能的解决方案，包括对 z 顺序进行硬编码，但都没有明显的效果。

这是div背后的代码：

```
<script src="Scripts/GenericDrag.js" type="text/javascript"></script>
...
<div id="divComment" style="DISPLAY: none; LEFT: 800px; WIDTH: 340px; POSITION: absolute; TOP: 800px; HEIGHT: 140px; BACKGROUND-COLOR: teal; BORDER: 1px; PADDING: 10px"
onmousedown="dragStart(event)" runat="server">
    <TABLE>
        <tr>
            <td>Kaizen&nbsp;ID</td>
            <td><asp:textbox id="txtCommentID" runat="server" Width="132px"></asp:textbox></td>
        </tr>
        <tr>
            <td>Comment</td>
            <td><asp:textbox id="txtComment" runat="server" Width="250" Height="72px" TextMode="MultiLine"></asp:textbox></td>
        </tr>
        <tr>
            <td><asp:button id="btnComment" runat="server" CausesValidation="False" Text="Comment"></asp:button></td>
            <td align="right"><input onclick="divComment.style.display='none'" type="button" value="Cancel"></td>
        </tr>
    </TABLE>
</div> 
```

btnComment 有一个 onClick 函数，但它只在文本框中的注释字符串非空时才做一些值得注意的事情。

如果我删除包含 GenericDrag.js，可拖动性会停止，但人们可以再次输入评论。

我已经在 Win XP 和 Win7 上使用最新的 FF、IE 和 Chrome 进行了尝试。在这方面，所有行为都相同。

任何建议都将受到欢迎。如果我发现我做了一些基本错误的事情，我一点也不感到惊讶。

杰夫

# cordova - Cordova/Phonegap GCM 和 Airpush

> ID：13576731
> 
> 赞同：0
> 
> 时间：2012-11-27T02:58:10.090
> 
> 标签：cordova, phonegap-plugins, google-cloud-messaging, cordova-2.0.0

好的，我有来自 marknutter/GCM-Cordova 的 gcm 插件和安装的 airpush sdk ... [https://github.com/marknutter/GCM-Cordova](https://github.com/marknutter/GCM-Cordova)

两者都可以单独工作，但是当结合使用时，我会收到错误并且应用程序崩溃... logcat info ...

```
11-26 20:43:31.475: D/webviewglue(1847): nativeDestroy view: 0x2a3a5c88
11-26 20:43:32.655: D/BUGSENSE(1847): {"data": [], "error": null}
11-26 20:43:32.675: D/BugSenseHandler(1847): java.lang.NullPointerException: println eeds a message
11-26 20:43:32.675: D/BugSenseHandler(1847): at android.util.Log.println_native(Native Method)
11-26 20:43:32.675: D/BugSenseHandler(1847):    at android.util.Log.v(Log.java:117)
11-26 20:43:32.675: D/BugSenseHandler(1847):    at school.is.in.GCMIntentService.onMessage(GCMIntentService.java:63)
11-26 20:43:32.675: D/BugSenseHandler(1847):    at com.google.android.gcm.GCMBaseIntentService.onHandleIntent(GCMBaseIntentService.java:179)
11-26 20:43:32.675: D/BugSenseHandler(1847):    at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:65)
11-26 20:43:32.675: D/BugSenseHandler(1847):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-26 20:43:32.675: D/BugSenseHandler(1847):    at android.os.Looper.loop(Looper.java:137)
11-26 20:43:32.675: D/BugSenseHandler(1847):    at android.os.HandlerThread.run(HandlerThread.java:60)
11-26 20:43:32.675: E/AndroidRuntime(1847): FATAL EXCEPTION: IntentService[GCMIntentService-GCMIntentService-4]
11-26 20:43:32.675: E/AndroidRuntime(1847): java.lang.NullPointerException: println needs a message
11-26 20:43:32.675: E/AndroidRuntime(1847):     at android.util.Log.println_native(Native Method)
11-26 20:43:32.675: E/AndroidRuntime(1847):     at android.util.Log.v(Log.java:117)
11-26 20:43:32.675: E/AndroidRuntime(1847):     at school.is.in.GCMIntentService.onMessage(GCMIntentService.java:63)
11-26 20:43:32.675: E/AndroidRuntime(1847):     at com.google.android.gcm.GCMBaseIntentService.onHandleIntent(GCMBaseIntentService.java:179)
11-26 20:43:32.675: E/AndroidRuntime(1847):     at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:65)
11-26 20:43:32.675: E/AndroidRuntime(1847):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-26 20:43:32.675: E/AndroidRuntime(1847):     at android.os.Looper.loop(Looper.java:137)
11-26 20:43:32.675: E/AndroidRuntime(1847):     at android.os.HandlerThread.run(HandlerThread.java:60) 
```

从我对 android 的一点了解来看，该消息似乎没有任何数据并且使应用程序崩溃......我已经检查了从服务器发送到谷歌 gcm 服务器的消息看起来不错......我的问题是如何判断airpush是否事先消耗数据..

我可能很遥远......有人指出我的写作方向......

谢谢罗杰……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T04:44:09.670

好吧，似乎走开一点点让我清醒过来并阅读控制台数据……它说是记录器造成了问题……所以没关系……

# windows - 在 Windows 7 上用 python 移动鼠标

> ID：13576732
> 
> 赞同：1
> 
> 时间：2012-11-27T02:58:22.717
> 
> 标签：windows, python-2.7, mouse-cursor

如何在 Windows 7 上的 python 2.7 中移动鼠标光标？

```
def MoveMouse(x,y):
    #move mouse cursor 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T03:04:11.453

你需要的是 Win32api。

```
 import win32api
def move_to(x,y):
    win32api.SetCursorPos((x,y)) 
```

# java - Java - 用于菜单选择的 While 循环（基于控制台的程序）

> ID：13576734
> 
> 赞同：2
> 
> 时间：2012-11-27T02:58:50.687
> 
> 标签：java

*更新* 当用户第一次做出诸如“1”之类的选择时，菜单会再次显示。下一次做出选择时，支付信息开始循环。循环完成并再次显示菜单后，它可以正常工作。此外，前两年是输出，而不是仅在选择开始循环时输出第一年，然后按预期一次输出一年。

```
//create scanner object for choosing a loan, then prompt for and accept input
    Scanner choose = new Scanner(System.in);
    String choice;
    System.out.println("\nType 1, 2, or 3 and press enter to see the monthly payment information for the respective loan. To end the program type \"end\".");
    choice = choose.next();

    //cycle loan 1 payment information
    //create scanner object to advance to the next year's payments

    //loop for cycling payment information
    //initialize loan principal to variable

    while (!"end".equals(choice)) {
        System.out.println("\nType 1, 2, or 3 and press enter to see the monthly payment information for the respective loan. To end the program type \"end\".");
        choice = null;
        choice = choose.next();
        if ("1".equals(choice)) {
           //calculation code
                    }
                if (j < 6) {
                    System.out.println("Press enter to get the mortgage information for year " + (j + 2));
                    choice = choose.nextLine();
                } else {
                    System.out.println("Congratulations, your mortgage has been paid off.");
                }

            }

            choice = null;
        }
        if ("2".equals(choice)) {
            //calculation code
                }
                if (j < 14) {
                    System.out.println("Press enter to get the mortgage information for year " + (j + 2));
                    choice = choose.nextLine();
                } else {
                    System.out.println("Congratulations, your mortgage has been paid off.");
                }

            }

            choice = null;
        }
        if ("3".equals(choice)) {
            //calculation code
                }
                if (j < 29) {
                    System.out.println("Press enter to get the mortgage information for year " + (j + 2));
                    choice = next.nextLine();
                } else {
                    System.out.println("Congratulations, your mortgage has been paid off.");
                }

            }

            choice = null;
        }
    }
    choose.close();
} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T03:03:04.243

我可以预先看到三个问题：

1.  您不需要两个扫描仪来进行`System.in`流式传输。删除此语句`Scanner next = new Scanner(System.in);`并使用`choose`实例。

2.  如果您将输入扫描仪关闭为`next.close();`，它也会关闭您的输入流`System.in`，您可能无法再次读取该流。**确保仅在完全完成程序后才关闭流。**

3.  使用`equals`方法比较`while`as中的条件`while(!"end".equals(choice))`。将文字`"end"`作为第一个参数将处理`choice`.

**编辑：**

您修改的高级代码：

```
 Scanner choose = new Scanner(System.in);
    String choice= null;
    int j = 0;
    while (!"end".equals(choice)) {
        System.out.println("\nType 1, 2, or 3 and press enter to see the monthly payment information for the respective loan. To end the program type \"end\".");
        choice = choose.nextLine();
        if ("1".equals(choice)) {
           //calculation code
               if (j < 6) {
                    System.out.println("Press enter to get the mortgage information for year " + (j + 2));
                    choice = choose.nextLine();
                } else {
                    System.out.println("Congratulations, your mortgage has been paid off.");
                }
            choice = null;
        }
        if ("2".equals(choice)) {
                if (j < 14) {
                    System.out.println("Press enter to get the mortgage information for year " + (j + 2));
                    choice = choose.nextLine();
                } else {
                    System.out.println("Congratulations, your mortgage has been paid off.");
                }
            choice = null;
        }
        if ("3".equals(choice)) {
                if (j < 29) {
                    System.out.println("Press enter to get the mortgage information for year " + (j + 2));
                    choice = choose.nextLine();
                } else {
                    System.out.println("Congratulations, your mortgage has been paid off.");
                }
            choice = null;
        }
    }
    choose.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-29T10:56:03.943

导入 java.util.Scanner；

主类

{

```
public static void main(String [] args)

  {

    Scanner sc=new Scanner(System.in);

    System.out.println("Enter no.1:");

    int a=sc.nextInt();

    System.out.println("Enter no.2:");

    int b=sc.nextInt();

    boolean exit=false;

    do
    {
      System.out.println("1.addition");
      System.out.println("2.subtraction");
      System.out.println("3.multiplication");
      System.out.println("4.division");
      System.out.println("5.exit");
      System.out.println("choose one!");
      Scanner sd=new Scanner(System.in);
      System.out.println("enter your choice");
      int num=sd.nextInt();
      switch(num)
     {
       case 1:
       int add=a+b;
       System.out.println("addition="+add);
       System.out.println("\n");
       break;

       case 2:
       int sub=a-b;
       System.out.println("subtraction="+sub);
       System.out.println("\n");
       break;

       case 3:
       int mul=a*b;
       System.out.println("multilpication="+mul);
       System.out.println("\n");
       break;

       case 4:
       int div=a/b;
       System.out.println("division="+div);
       System.out.println("\n");
       break;

       case 5:
       exit=true;
       break;
      }
    }while(!exit);
} 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T03:00:42.047

一个错误是字符串相等与 == 不同。您应该使用 .equals()：

```
while (!choice.equals("end")) { 
```

希望有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T03:01:45.667

你设置`choice`为`null`，所以`choice != "end"`总是正确的。将`next.close(); choice = null`移到while 循环*之外。*另外，weolfe91 所说的。

# javascript - Facebook 与 sencha 建立联系

> ID：13576735
> 
> 赞同：0
> 
> 时间：2012-11-27T02:59:12.777
> 
> 标签：javascript, facebook, sencha-touch-2, sencha-architect

我正在使用 sencha 为 android 和 iOS 构建一个网站和一个简单的应用程序，我希望它能够连接到 facebook 并发布一些东西。
我已阅读信息并尝试实现[Facebook Javascript SDK](http://developers.facebook.com/docs/reference/javascript/)。
它可以在网站上运行，当我点击一个按钮时，Facebook 登录会弹出，要求我登录并授权我创建的 Facebook 应用程序。在我授权并获得访问令牌后，我可以从网络上发布一些内容到时间线。
但是，当我尝试将其打包成 .apk 并将其安装在我的 android 设备上时，它不起作用。

将 Facebook Javascript SDK 打包到 .apk 后，是否可以使用带有 sencha touch 的 Facebook Javascript SDK？还是我应该使用另一种方法？
我希望任何人都可以帮助我，并且一个例子会很好。
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:57:14.890

观看列表可让您与 Facebook 上的朋友分享您看过和想看的电影。 [https://github.com/senchalearn/Watchlist](https://github.com/senchalearn/Watchlist)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:41:03.450

在 sencha 中编写一个处理程序来调用您网站的 oAuth 服务进行身份验证...为您的移动应用程序使用此身份验证...我不认为问题是由于 .apk 您是否在移动浏览器中尝试过同样的事情，看看是否工作过？？？

# java - 将参数从一个 jframe 上的文本字段传递到另一个 jframe

> ID：13576743
> 
> 赞同：2
> 
> 时间：2012-11-27T02:59:55.843
> 
> 标签：java, swing, jframe, jbutton, jtextfield

我试图简单地创建四个 jtextfields 和一个 jbutton。按下按钮后，我希望将输入到 jtextfields 中的文本作为参数（p、var、s、f）传递到另一个窗口，该窗口使用给定的参数显示数学函数。

在按下初始按钮之前，我不希望第二个窗口出现并显示数学函数。

我怎样才能做到这一点？如果这是一个新手问题，我很抱歉，但我正在学习..

到目前为止，我已经完成了绘图部分，所以我现在需要做的就是创建第一个窗口，其中包含链接到绘图窗口的文本框和按钮。

这是我认为值得展示的代码的开头，因此您知道我在说哪些变量：

```
public class Cartesian {
 public static void main(String[] args) {
  SwingUtilities.invokeLater(new Runnable() {

   @Override
   public void run() {
    CartesianFrame frame = new CartesianFrame();
    frame.showUI();

   }
  });
 }

}

class CartesianFrame extends JFrame {
 CartesianPanel panel;

 public CartesianFrame() {
  panel = new CartesianPanel();
  add(panel);

 }

 public void showUI() {
  setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
  setTitle("Polynomial Grapher");
  setSize(700, 700);
  setVisible(true);
 }
}

class CartesianPanel extends JPanel {
    //These are the variables I want to be assigned to textfields(I'm assuming      using "gettext" from another window.

     String p="something from textbox one";//Variable 1
     String var="something from textbox two";//Variable 2
     double s=-2;//ANY double value from textbox 3
     double f=2;//ANY double value from textbox 4 
```

... ... ... 之后使用的其余代码只是一个绘制组件等，用于显示笛卡尔平面和数学函数。

我在网上查看了其他一些示例，但它们并没有应用于我正在做的事情。我对任何反馈都很感兴趣！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T03:02:34.133

不要创建第二个 JFrame。如果您绝对必须显示第二个窗口，请显示一个对话框，例如 JDialog 或 JOptionPane。至于如何做到这一点，只需创建一个 JPanel 来显示您希望向用户显示的信息，也许在 JLabel 中，然后使用它的`showMessage(...)`方法在 JOptionPane 中显示它。实际上，这很容易。

如果这没有帮助，那么你最好告诉我们更多关于你卡在哪里的信息。

# ruby-on-rails - :url、:action、:form_for 中的方法之间的 RoR 差异

> ID：13576745
> 
> 赞同：21
> 
> 时间：2012-11-27T03:00:27.473
> 
> 标签：ruby-on-rails, ruby-on-rails-3, form-for

文档中可能有答案，但我似乎没有找到好的答案。那么这三个:url、:action、:method，在Rails的form_for中使用时有什么区别呢？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-27T06:51:31.417

和之间`:url`的区别`:action``:method`

**：网址**

如果您想为任何特定的控制器、任何特定的操作提交表单并想要传递一些额外的参数（使用在控制器中定义并传递给控制器​​的操作）

*例如*

```
<%= form_for @post, :url => {:controller => "your-controller-name", :action => "your-action-name"} do |f| %> 
```

在上面的代码中，表单被提交给那个控制器（你传递 url）并转到那个（你传递动作）动作。它将默认为当前操作。

现在假设你想传递额外的参数**，例如**

```
form_for @post, :url => { :action => :update, :type => @type, :this => @currently_editing } do |f| ... 
```

你可以传递额外的参数，比如`:type => @type`

`:url`表单提交到的 URL 也是如此。它采用您传递给 url_for 或 link_to 的相同字段。特别是，您也可以在此处直接传递命名路线。

* * *

**：行动**

```
 form_for @post, :url => { :action => :update, :type => @type, :this => @currently_editing } do |f| ... 
```

在上面的例子中，`:action`如果我们想在不同的动作中提交表单，那么我们通过`:action`并且`your-action-name`表单被发布到那个动作

* * *

**：方法**

方法用于您要为该操作传递的方法。有几种方法，例如`put`，，...`post``get`

*例如*

```
form_for @post, :url => post_path(@post), :method => :put, .... 
```

在上面`form_for`我们通过`:method => :put`当这个表单提交它会使用`put`方法

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-27T03:15:35.383

form_for 基本上用于对象。例如：

```
 <% form_for @person do |f| %>
       ...
      <% end %> 
```

当您单击提交时，它将进入默认操作，例如从 :new 到 :create, :edit => :update。如果要指定自己的操作，则必须使用 :url 和 :method 用于强制发布或获取。例如：

```
 <% form_for @person :url => {:action => "my_action"}, :method => "post" do |f| %>
       ...
      <% end %> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-29T09:13:21.630

网址：

Url 是表单数据应该去的路径。当您单击表单中的提交按钮时，您在 :url 符号中写入的任何内容都被视为您的数据应该去的路径。

行动：

Action 是您的控制器中的方法，在您的 form_for @user （其中 @user 是 User 模型的对象）中，如果您说 :action => create 然后它将数据汇总到 users_controller 'create' 函数（def create）。您将在 :url 中提及这一点，以告知数据应该转到指定的操作。

方法：

是http方法，有'get'、'post'、'update'、'patch'和'delete'方法。您可以在 google 中了解这一点。

# php - 将一种形状变形为另一种形状的算法。

> ID：13576746
> 
> 赞同：14
> 
> 时间：2012-11-27T03:00:26.593
> 
> 标签：php, javascript, image-manipulation

我正在尝试研究一种将一个“形状”变形为另一个“形状”的算法。两种形状都是任意的，甚至可能有更小、不连贯的形状。

到目前为止，我的基本想法如下：定位形状的边缘，沿着这些边缘放置点，然后对目标图像执行相同的操作，然后将点移动到它们的目标。

这是一个插图：

![变形](../Images/603942a222b0d55d6a685fd6e80a4e74.png)

我只是不知道从哪里开始。上图是简化图，实际用例具有更复杂的形状/轮廓。我的主要问题是：如何处理不相交的形状？我能想到的最好的办法是找出两部分之间的最近点，并将它们连接在一起作为路径的一部分。但是我将如何实现呢？

我还没有任何代码，我仍处于计划阶段。我想我要问的是是否有人可以将我链接到任何可能有帮助的资源，或提供任何指示。搜索谷歌已经产生了一些有趣的变形算法，但它们都处理完整的图像，并涉及将图像分解成碎片以重塑它们，这不是我想要的。

请注意，这将在 JavaScript 中使用，但如果更容易，也可以在 PHP 中预先计算。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T19:58:42.100

我在 JavaScript 中找到[了一个关于轮廓变形和补间动画的演示（使用 Raphael.js）](http://raphaeljs.com/animation.html)，展示了如何使用 Raphael.js 将一条曲线变形为另一条曲线。

此外，[这个相关的问题](https://stackoverflow.com/questions/2186441/shape-tween-in-javascript/2186469#2186469)（关于 JavaScript 中的形状补间）可能包含一些与这个问题相关的答案。

MorpherJS[库](https://github.com/jembezmamy/morpher-js)也可能适用于此目的。[可以在这里找到](http://jembezmamy.github.com/morpher-js/demos.html)一些使用 MorpherJS 进行轮廓变形的演示。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-29T06:10:56.000

最好将问题分解为多个可以独立解决的较小问题。这样你在解决这个问题后也拥有独立的功能，可以添加到一些全局模块集合中。

首先我们需要弄清楚from_shape中的哪个像素去to_shape中的哪个像素。
我们可以通过以下方法来解决这个问题：

1.  将 to_shape 放在 from_shape 上。

2.  对于 from_shape 中的每个像素，找到它最接近的 to_shape 像素。
    形状中的每个像素都必须有一个唯一的 id，例如，该 id 可以是它的 xy 位置。

3.  现在您可以记录 from_shape 中的每个唯一像素，以及它进入 to_shape 中的哪个唯一像素。

4.  删除重叠的形状并回到原来的形状，
    刚才from_shape中的每个像素都知道它在to_shape中的目的地。

我们还需要知道每个像素有哪些“兄弟姐妹”。
同级是紧邻另一个像素的像素。
要找到它，请转到给定像素，从中收集半径为 1 的所有像素，所有这些像素都是黑色的......是来自像素的兄弟姐妹。当像素移动到目的地时，此信息对于将形状保持为单个单元是必要的。跳过兄弟姐妹会大大加快和简化变形，但如果没有它们，形状可能会在变形过程中变得支离破碎。可能想从无兄弟版本开始，看看情况如何。

最后我们实现变形：

1.  有 morph_time_duration。
    对于 from_shape 中的每个像素，在 to_shape 中找到到其目的地的距离。
    该距离除以 morph_time_duration 就是变形期间像素的速度。
    此外，朝向目的地的角度是旅行的角度。
    所以现在你有了速度和角度。

2.  因此，在变形过程中的每一帧，给定的 from_pixel 现在都知道行进的方向、速度，并且还知道它的兄弟姐妹。因此，在每一帧中，在以它的速度向它的方向移动之后，只需在它的新位置绘制像素。然后为所有像素兄弟画一条线。

这将显示你的变形。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T04:40:22.747

这样做不会很容易，但我可以给你几个起点。如果你想要一个简单的 javascript 实现，一个很好的起点是： [http](http://raphaeljs.com/animation.html) ://raphaeljs.com/animation.html ，它正在做你想要的。因此，您可以检查调用了哪些方法并通过库源浏览这些方法以查看实现。

如果您需要在 PHP 中变形 2 个图像，我建议您使用某种扩展，而不是在普通 PHP 中这样做。这是一个使用 ImageMagick 的示例： [http ://www.fmwconcepts.com/imagemagick/shapemorph2/index.php](http://www.fmwconcepts.com/imagemagick/shapemorph2/index.php)

如果您想了解更多关于它的内部结构： [http ://web.mit.edu/manoli/www/ecimorph/ecimorph.html#algo](http://web.mit.edu/manoli/www/ecimorph/ecimorph.html#algo)

希望其中之一有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T19:50:24.420

简短的回答，如果你想自己动手，这不是一项简单的任务。有很多关于这些主题的数学可以执行这些转换（显然，你发现的最常见的处理最常见的形状），但这可能对你来说也可能不是，而且它不会那么容易弄清楚如何进行非标准转换。

如果您只是在寻找一种合乎逻辑的方法，这就是我要开始的地方（多年来没有做过数学，也没有研究过链接的图形库的内部工作原理）：

1.  选择一个距离，以任何有意义的单位测量，也许是像素。

2.  识别每个形状中的每个连续边。在每个形状的一个边缘上选择一个任意点（例如，在 (0,0) 表示左上角的平面上，每个形状上最接近 (0,0) 的边缘点），然后在该平面上对齐您的单独形状观点。出于您转换的目的，该点将保持静态，所有其他点将符合它。

3.  如果您的形状有两个或更多不同的边缘，请按周长排序。考虑较短的长度从属于较长的长度。使用与步骤 2 中类似的过程来选择任意点以将这两条边连接在一起。

4.  在您选择的每个点上，以您在步骤 1 中选择的距离为间隔计算边缘周围的点。

5.  （留给读者作为练习）将不同边缘上的点整合在一起并形成目标形状，必要时对齐、减少或添加边缘上的点。

或者，您可以选择任意数量的点而不是任意距离，然后将它们沿着边缘适当地分布在它们适合的任何距离处，然后将这些点整合在一起。

只是抛出一些想法，我真的不知道问题有多深。

# mysql - MySQL LOAD DATA LOCAL INFILE 间歇性工作

> ID：13576747
> 
> 赞同：0
> 
> 时间：2012-11-27T03:00:35.830
> 
> 标签：mysql, ubuntu-12.04, load-data-infile

操作系统：Ubuntu 12.04.1 LTS MySQL 版本：5.5.28-0ubuntu0.12.04.2

当我尝试运行 LOAD DATA LOCAL INFILE 时，我收到错误 1148（此 MySQL 版本不允许使用的命令）-但仅在以下情况下

*   当命令通过 PHP wget cron 作业运行时（大多数时候失败，大约每 4 次中的 1 次）
*   当命令通过浏览器会话中的 PHP 文件运行时（失败两次，然后通常在第三次工作）

我看到如果脚本运行正常，并且在不久之后努力运行它，它工作正常 - 但是在运行它后等待 5 分钟以上，它又开始失败，直到我刷新它足够的时间来获得它再次运行。我每次都需要从 cron 成功运行它。

我在 my.conf 的 [mysqld]、[mysql] 和 [client] 条目下添加了 local-infile（不是 local-infile=1），然后重新启动服务器，但无济于事。我也尝试在 [client] 下输入loose-local-infile=1，但没有任何乐趣。

数据库文件夹已移动到不同的位置 (/media/Data/mysql_data) 并归 root 所有。

导入文件下载到本地，权限为 0644。

这是正在运行的命令：

```
LOAD DATA LOCAL INFILE
            "/var/www/'.$import_dir.$table.'.csv"
            INTO TABLE _PREP_'.$table.'
            FIELDS TERMINATED BY ","
            OPTIONALLY ENCLOSED BY "\"" 
```

..$import_dir 和 $table 是导入文件的路径和名称。

有没有其他人见过这个？是否有任何日志我可以查看以了解它失败的原因？为什么只是间歇性失败？

这有点奇怪。为了记录，这是一个新盒子，脚本一直都是这样的。

所有帮助表示赞赏。-保罗G

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:35:35.470

向**mysql_connect**添加额外的标志**128**为我解决了这个问题。检查此以获取详细信息[mysql_connect](http://php.net/manual/en/function.mysql-connect.php)

# java - 在 Java 中，如何判断一个点是否在 GeneralPath 的边界上？

> ID：13576753
> 
> 赞同：7
> 
> 时间：2012-11-27T03:01:30.883
> 
> 标签：java

我发现`GeneralPath`Java中的类只提供了检查一个点是否在一般路径内的方法（具体来说，**一个带有直线段的多边形**）。有人知道如何***有效地***检查一个点是否在一般路径的边界上吗？

谢谢

**虚拟解决方案 1：**我们可以定义一个半径为 $\epsilon$ 的圆（$\epsilon$ 是一个非常小的正实值）。然后，我们检查圆上足够数量的点，看看它们中的一个/一些是否落入一般路径。然而，这种虚拟方法可能需要大量的计算工作，这不是非常理想的。

**虚拟解决方案 2：**我们可以计算从点（在边界上）到多边形每一边的距离。如果最小距离足够小，则该点在边界上；否则，它不是。同样，这种方法仍然是计算密集型的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T03:39:50.487

我还没有遇到图书馆方法......或解决问题的盆栽解决方案。我认为原因是这个问题根本不可能完全解决。

该类继承了一个从`GeneralPath`调用的方法。如果您查看 javadoc，您将看到该对象将路径建模为一系列直线段。该方法采用如下指定的参数：`getPathIterator``Shape2D``PathIterator``getPathIterator``flatness`

> *“平面度 - 用于逼近曲线段的线段允许偏离原始曲线上任何点的最大距离。”*

现在，如果您正在查看的形状由直线段组成，那么路径迭代器很有可能会为您提供这些线段。但是如果形状有曲线段，那么线段只是一个近似值。如果你不知道确切的边界是什么，显然不可能测试一个点是否正好在边界上。

即使假设线段精确地模拟了真实曲线，您仍然存在这样的问题（除了特殊情况），真实曲线上的大多数点无法使用 Java 原始数据类型（int、double 等）精确表示。因此，“精确性”再次存在问题。

我认为你能希望的最好的结果是测试你的点是否在边界的某个小增量内......并选择一个`flatness`小于该增量的值，迭代路径线段，并测试切向距离每个段的点。

注意：如果你做`flatness`的非常小，你可以预期必须测试大量的线段。在坚持使用 GeneralPath API 的同时，我认为没有任何方法可以解决这个计算问题。

* * *

如果您将问题限制为真正的（即直边）多边形，那么您只需要迭代线段，并为每一个测试看看从点到线的距离是否小于某个合适的 epsilon。 [这个维基百科条目](http://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line)给你数学。请注意，这里的准确性仍然是一个问题......

您没有非常昂贵的计算，但计算准确的平方根并不是免费的，对于 N 边多边形，您必须最多执行 N 次。

做得比那更好（即变得比 更好`O(N)`）将是困难的。但是，如果多边形是固定的，并且您要针对它测试大量点，那么您可以考虑使用预先计算的四叉树数据结构来进行解析。预先计算四叉树会很昂贵，但如果 N 足够大，测试一个点会更便宜。（大致`O(log(1/epsilon))`是在最坏的情况下，而不是`O(N)`平均情况。一个点离边界越远，答案就越便宜。）

但正如我所说，四叉树只会在有限的情况下有所帮助......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T06:39:22.003

您可以使用描边路径。`BasicStroke`有方法

```
public Shape createStrokedShape(Shape s) 
```

所以只需定义粗线`BasicStroke`，获取描边形状并检查描边是否`Shape`包含您的点。

# objective-c - TIKeyboardInputManagerZephyr 和 UIAlertView(Private) 的 iOS StackTrace 错误

> ID：13576756
> 
> 赞同：1
> 
> 时间：2012-11-27T03:02:10.020
> 
> 标签：objective-c, ios6, runtime-error, stack-trace

我已经在这个问题上摸索了一段时间，但我似乎无法弄清楚。我的应用程序只崩溃了几次，给了我这个 StackTrace（但是我不确定错误发生在哪里，因为这是来自实时应用程序的错误报告）：

```
0     libicucore.A.dylib                    0x31227788 ucol_getVersion + 0
1     TextInput                             0x3255efe7 _ZN2KB8WordTrie4loadERKNS_6StringE + 279
2     TextInput                             0x325584c1 _ZN2KB16StaticDictionary4loadERKNS_6StringE + 17
3     TextInput                             0x328c4d03 _ZN2KB19DictionaryContainerC2ERKNS_6StringES3_bb + 59
4     TextInput                             0x328c4ca1 _ZN2KB19DictionaryContainer6createERKNS_6StringES3_bb + 45
5     TextInput                             0x3254ffa1 _ZN14TIInputManager17load_dictionariesERKN2KB6StringES3_b + 25
6     TextInput                             0x32561003 -[TIKeyboardInputManagerZephyr loadDictionaries] + 223
7     TextInput                             0x32560c47 -[TIKeyboardInputManagerZephyr initWithConfig:] + 503
8     UIKit                                 0x367fff57 +[UIKeyboardInputManager sharedInstanceForInputMode:inHardwareKeyboardMode:] + 163
9     UIKit                                 0x367fefa7 -[UIKeyboardImpl setInputMode:userInitiated:] + 403
10    UIKit                                 0x367febbb -[UIKeyboardImpl setInputModeFromPreferences] + 379
11    UIKit                                 0x367fd491 -[UIKeyboardImpl initWithFrame:] + 465
12    UIKit                                 0x367fd183 +[UIKeyboardImpl sharedInstance] + 151
13    UIKit                                 0x3685f6af -[UIAlertView(Private) _updateFrameForDisplay] + 391
14    UIKit                                 0x3685c59d -[UIAlertView(Private) layoutAnimated:withDuration:] + 529
15    UIKit                                 0x3685c291 -[UIAlertView(Private) _layoutPopupAlertWithOrientation:animated:] + 105
16    UIKit                                 0x3685acd7 -[UIAlertView(Private) _performPopup:animationType:revealedBySpringBoardAlert:] + 407
17    UIKit                                 0x3685aaff -[UIAlertView(Private) _performPopup:animationType:] + 31
18    UIKit                                 0x3685a43f -[UIAlertView(Private) popupAlertAnimated:animationType:] + 35
19    *APP NAME*                            0x000f984d 0x000ef000 + 43085
20    libdispatch.dylib                     0x38080793 _dispatch_call_block_and_release + 11
21    libdispatch.dylib                     0x38083b3b _dispatch_queue_drain + 143
22    libdispatch.dylib                     0x3808167d _dispatch_queue_invoke + 45
23    libdispatch.dylib                     0x38084613 _dispatch_root_queue_drain + 211
24    libdispatch.dylib                     0x380847d9 _dispatch_worker_thread2 + 93
25    libsystem_c.dylib                     0x342fc7f1 _pthread_wqthread + 361 
```

真正让我感到困惑的是第**6**行和**第 13**行，其中提到了我从未听说过的方法 - TIKeyboardInputManagerZephyr 或 UIAlertView(Private)??

有谁知道那些是什么意思？我觉得**TIKeyboardInputManagerZephyr**与自动更正功能有关，而且我有预感 UIAlertView 行与从 Apple 的一个私有 API 中弹出的某种对话框有关（但是我的应用程序没有使用这些）？

这些错误报告来自 iPhone 运行的 iOS 6.0.1

我真的不知道这个 - 如果它过于本地化，我想将任何答案重定向到更通用的目的：有没有办法挑选堆栈跟踪以更容易理解它，或者它只是有点经验的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T23:39:35.570

您是否尝试从主线程以外的线程显示警报视图？

尝试将 UIAlertView 代码包装在一个块中并在主线程上调度该块。

这是与您的问题类似的问题： [更改为 iOS6 后应用程序崩溃 - ucol_getVersion](https://stackoverflow.com/questions/12525857/app-crashes-after-change-to-ios6-ucol-getversion) [https://devforums.apple.com/message/728324#728324](https://devforums.apple.com/message/728324#728324)

# objective-c - iOS5 GestureRecognizer 仅在第二次点击时触发

> ID：13576758
> 
> 赞同：3
> 
> 时间：2012-11-27T03:02:20.827
> 
> 标签：objective-c, ios5, uigesturerecognizer, uitapgesturerecognizer

有没有人知道为什么只有在 ios5 中第二次点击后才调用 Tap 手势识别器，尽管在 ios6 中它在一次点击后工作正常。

该代码适用于 ios6，我也在单独的项目中尝试了此代码，并且适用于 ios5，我认为它与项目设置相关联，但我不知道是哪个。

我的代码是：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.title = questTitle;
    //add coretextview
    scrollView = [[UIScrollView alloc] initWithFrame:self.view.bounds];
    scrollView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    coreTextView = [[FTCoreTextView alloc] initWithFrame:CGRectMake(20, 20, 280, 0)];
    coreTextView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    // set text
    [coreTextView setText:[self textForView]];
    // set styles
    [coreTextView addStyles:[self coreTextStyle]];
    // set delegate
    [coreTextView setDelegate:self];

    [coreTextView fitToSuggestedHeight];
    scrollView.scrollEnabled = TRUE;

    [scrollView addSubview:coreTextView];
    [scrollView setContentSize:CGSizeMake(CGRectGetWidth(scrollView.bounds), CGRectGetHeight(coreTextView.frame) + 40)];

     [self.view addSubview:scrollView];

    UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(pan:)];
tapGesture.delegate = (id <UIGestureRecognizerDelegate>)self;
[coreTextView addGestureRecognizer:tapGesture];
tapGesture.numberOfTapsRequired = 1;            // How many taps
tapGesture.numberOfTouchesRequired = 1;

coreTextView.userInteractionEnabled = YES;

tapGesture.cancelsTouchesInView = NO;
scrollView.userInteractionEnabled = YES;
scrollView.exclusiveTouch = NO;
scrollView.delegate = self;
[tapGesture release];

}

- (void)pan:(UITapGestureRecognizer*)sender {
     NSLog(@"Pan tap");
}

- (BOOL)gestureRecognizerShouldBegin:(UITapGestureRecognizer *)gestureRecognizer{
      NSLog(@"tap");
    return YES;
}

- (BOOL)gestureRecognizer:(UITapGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UITapGestureRecognizer *)otherGestureRecognizer{
      NSLog(@"tap");
    return YES;
}
- (BOOL)gestureRecognizer:(UITapGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch{
      NSLog(@"tap");
    return YES;
} 
```

# javascript - Backbone：在不同的集合中显示返回的模型

> ID：13576761
> 
> 赞同：0
> 
> 时间：2012-11-27T03:03:00.250
> 
> 标签：javascript, backbone.js

我正在使用该`where`方法从集合中获取一些特定模型。类似于骨干站点的示例：

```
var friends = new Backbone.Collection([
  {name: "Athos",      job: "Musketeer"},
  {name: "Porthos",    job: "Musketeer"},
  {name: "Aramis",     job: "Guard"},
  {name: "d'Artagnan", job: "Guard"},
]);

var musketeers = friends.where({job: "Musketeer"}); 
```

这将返回具有火枪手工作的 2 个模型。

如何将这 2 个 Musketeer 模型放入一个新集合并为其渲染一个 collectionView？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T03:22:03.330

您可以使用 将其传递给新集合`collection.reset`。然后只需将其传递给视图并渲染。

```
var MyView = Backbone.View.extend({
    el: "#container",

    template: _.template($("#templ").html()),

    render: function() {
        var self = this;
        _.each(this.collection.models, function(model) {
            self.$el.append(self.template(model.toJSON()));
        });
    }        
});

var friends = new Backbone.Collection([
  {name: "Athos",      job: "Musketeer"},
  {name: "Porthos",    job: "Musketeer"},
  {name: "Aramis",     job: "Guard"},
  {name: "d'Artagnan", job: "Guard"},
]);

var musketeers = friends.where({job: "Musketeer"});

var newCollection = new Backbone.Collection();
newCollection.reset(musketeers);

var view = new MyView({ collection: newCollection });
view.render(); 
```

[http://jsfiddle.net/k3JEz/1/](http://jsfiddle.net/k3JEz/1/)

# c# - Java中的C#等效项，用于将关联数组添加到命令参数

> ID：13576768
> 
> 赞同：2
> 
> 时间：2012-11-27T03:03:52.233
> 
> 标签：c#, java, oracle, jdbc, ado.net

我在合并语句中使用绑定变量，它包含关联数组。什么是等效的 Java 代码。我尝试使用 PreparedStatement 和 callable 语句，但它们不适用于数组。

```
comm.Parameters.Add(new OracleParameter(":student_id", OracleDbType.Varchar2, arrayCount, studentId, System.Data.ParameterDirection.Input));
comm.Parameters.Add(new OracleParameter(":first_name", OracleDbType.Varchar2, arrayCount, firstName, System.Data.ParameterDirection.Input));
comm.Parameters.Add(new OracleParameter(":last_name", OracleDbType.Varchar2, arrayCount, lastName, System.Data.ParameterDirection.Input));
comm.Parameters.Add(new OracleParameter(":created_by", OracleDbType.Varchar2, arrayCount, createdBy, System.Data.ParameterDirection.Input));
comm.Parameters.Add(new OracleParameter(":modified_by", OracleDbType.Varchar2, arrayCount, modifiedBy, System.Data.ParameterDirection.Input));

if(conn.State != ConnectionState.Open)
    conn.Open();
comm.ArrayBindCount = arrayCount;
comm.BindByName = true; 
```

这是我的合并声明

```
MERGE INTO STUDENT USING DUAL ON(student_id = :student_id) 
WHEN MATCHED THEN 
    UPDATE SET modified_by = :modified_by, 
               first_name = :first_name, 
               last_name = :last_name 
WHEN NOT MATCHED THEN 
    INSERT (student_id, first_name, last_name, created_by, modified_by) 
    VALUES (:student_id, :first_name,:last_name,:created_by,:modified_by) 
LOG ERRORS INTO ERR$_STUDENT ('MERGE') REJECT LIMIT UNLIMITED 
```

示例 Java 代码

```
 conn = DriverManager.getConnection(jdbcUrl,connProps);
        conn.setAutoCommit(false);
        stmt = conn.createStatement();          
          int arrayCount = 3;
          String[] studentId = new String[arrayCount];
          String[] firstName = new String[arrayCount];
          String[] lastName = new String[arrayCount];
          String[] createdBy = new String[arrayCount];
          String[] modifiedBy = new String[arrayCount];
          for (int i = 0; i < arrayCount; i++)
          {
              studentId[i] = String.valueOf(i + 1);
              firstName[i] = "Alan" + (i + 1);
              lastName[i] = "King" + (i + 1);
              createdBy[i] = "Scott" + (i + 1);
              modifiedBy[i] = "Victor" + (i + 1);
          }                             
        String sql = GetArrayMergeSQL();            
        PreparedStatement mergeStatement = conn.prepareStatement(sql);  
        NamedParameterStatement p = new NamedParameterStatement(conn,sql);
        CallableStatement merge = (CallableStatement) conn.createStatement();
        merge.setNString(":student_id", studentId);
        int count = stmt.executeUpdate(sql);    
        conn.commit(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-15T11:26:39.697

我认为您想使用一组不同的参数执行相同的语句。在 JDBC 中，它是使用[批处理实现的](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#addBatch())

因此，您的结果代码将如下所示：

```
Connection conn = DriverManager.getConnection(jdbcUrl, connProps);
conn.setAutoCommit(false);
String sql = GetArrayMergeSQL();
PreparedStatement mergeStatement = conn.prepareStatement(sql);
int arrayCount = 3;
for (int i = 0; i < arrayCount; i++)
{
    mergeStatement.setString(1, "Victor" + (i + 1));
    mergeStatement.setString(2, "Alan" + (i + 1));
    mergeStatement.setString(3, "King" + (i + 1));
    mergeStatement.setInt(4, i + 1);
    mergeStatement.setString(5, "Alan" + (i + 1));
    mergeStatement.setString(6, "King" + (i + 1));
    mergeStatement.setString(7, "Scott" + (i + 1));
    mergeStatement.setString(8, "Victor" + (i + 1));
    mergeStatement.addBatch();
}
int[] count = mergeStatement.executeBatch();
conn.commit(); 
```

此外 JDBC 不支持命名参数 - 您必须将它们替换为 ? 标记并按位置引用它们：

```
 MERGE INTO STUDENT USING DUAL ON(student_id = :student_id)
 WHEN MATCHED THEN
    UPDATE SET  modified_by = ? /*:modified_by*/,
                first_name = ? /*:first_name*/,
                last_name = ? /*:last_name*/
 WHEN NOT MATCHED THEN
    INSERT (student_id, first_name, last_name, created_by, modified_by)
    VALUES (? /*:student_id*/, ? /*:first_name*?, ? /*:last_name*/,? /*:created_by*/, ? /*:modified_by*/)
 LOG ERRORS INTO ERR$_STUDENT ('MERGE') REJECT LIMIT UNLIMITED 
```

# java - 实际上没有插入 MySQL 但自动增量字段正在增加？

> ID：13576772
> 
> 赞同：0
> 
> 时间：2012-11-27T03:04:15.807
> 
> 标签：java, mysql, jdbc

我真的不知道发生了什么事。我是 Java 新手，对 MySQL 还很陌生。

我正在尝试将行插入到 Java 中的 MySQL 数据库中。它不会抛出任何异常，当我打印出 a 时`SELECT *`，它会显示我更新的行。但是当我再次运行程序或在 Workbench 中运行程序时，这些行并没有粘住。

其中一列（pk）是一个自动递增的字段。该字段正在递增，但数据不存在。

当我通过 Workbench 添加数据时，它会粘住，当我执行`SELECT *`. 只有当我通过下面的代码添加它时，数据似乎才会消失。

这是代码。我遵循了一个教程：

```
import java.sql.*;

public class SaveMap {  
public static boolean MapSave(String mapName) {
    Connection con = null;
    Statement st = null;
    ResultSet rs = null;

    String url = "jdbc:mysql://127.0.0.1:3306/";
    String db = "game_Maps";
    String driver = "com.mysql.jdbc.Driver";
    String user = "root";
    String pass = "pass";

    try {
        Class.forName(driver);
        con = DriverManager.getConnection(url + db, user, pass);
        con.setAutoCommit(false);

        st = con.createStatement();

        System.out.println(st.executeUpdate("INSERT INTO Maps (mapName, mapSize) VALUES('DB Test', 5)"));
        st.executeBatch();

        String sql = "SELECT * FROM Maps";
        rs = st.executeQuery(sql);

        System.out.println("No \t Name");
        while(rs.next()){
            System.out.println(rs.getString(1) + " \t");
            System.out.println(rs.getString(2) + " \t");
            System.out.println(rs.getString(3) + " \t");
        }

        rs.close();
        st.close();
        con.close();
    } catch (Exception e) {
        e.printStackTrace();
    }

    return true;
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T03:06:49.983

这是因为您将自动提交设置为 false ( `con.setAutoCommit(false);`)，但没有提交事务。

未提交的插入不存储行，但它们会增加自动增量字段。

您需要提交事务以在事务结束后保留​​行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T06:24:50.380

你设置`con.setAutoCommit(false);`

后`st.executeBatch();`

添加`con.commit();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T03:11:22.630

尝试使用准备好的语句 - 这样您的数据库就可以防止 sql 注入。像这样的东西（修复你的价值观）：

```
 Class.forName("com.mysql.jdbc.Driver").newInstance();
        Connection con = (Connection) DriverManager.getConnection(DBurl, user, password);
        String read = "INSERT INTO Maps (mapName, mapSize) VALUES(?, ?)"
        PreparedStatement p = (PreparedStatement) con.prepareStatement(read);
        p.setString(1, "DB Test");
        p.setInt(2, 5);
        p.executeUpdate();
        long insertId = p.getLastInsertID();
        con.close(); 
```

# java - Hibernate 4 - 调用 DAO 并初始化 sessionFactory bean

> ID：13576777
> 
> 赞同：1
> 
> 时间：2012-11-27T03:04:29.223
> 
> 标签：java, spring, hibernate

我正在将我的旧程序更新到 Spring 3.2 和 Hibernate 4，并且在 sessionFactory 上遇到了一些困难（我之前使用的是 hibernateTemplate）。

1.  我不认为我访问 DAO 的方式是最好的方式，但我不知道还有什么方法可以让它工作。如果我简单地创建 DAO 对象 (CSSDAO d = new CSSDAOImpl();)，则 sessionFactory 始终为空。如果我按照下面的方式拥有它，它就可以工作。调用 DAO 方法的正确方法是什么？（请忽略控制器的 MVC 部分，我知道这需要它自己的工作）

2.  我在 DAO 中的每个方法中都打开了一个新会话。我知道这是不正确的，因为我应该得到当前会话。但是每次我尝试获取当前会话时，它都会说一个不存在。会话如何第一次“初始化”？我认为它会根据 XML 配置注入它，但这似乎没有做任何事情。有什么想法吗？

**休眠-cfg.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.0.xsd">

    <bean id="myDataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="org.apache.derby.jdbc.EmbeddedDriver"></property>
        <property name="url" value="jdbc:derby:C:\Users\Steven\MyDB"></property>
    </bean>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="packagesToScan" value="net.form" />
        <property name="dataSource" ref="myDataSource"></property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.DerbyTenSevenDialect
                </prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>
        <property name="annotatedClasses">
            <list>
                <value>net.form.StyleChooser</value>
            </list>
        </property>
    </bean>

    <bean id="transactionManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager" />

    <bean id="CSSDAO" class="dao.CSSDAOImpl">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

</beans> 
```

**道：**

```
package dao;

import java.util.List;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.transaction.annotation.Transactional;

import net.form.StyleChooser;

public class CSSDAOImpl implements CSSDAO {

    private SessionFactory sessionFactory;

    @Autowired
    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    @Transactional
    public List selectAllCSS() {
        Session session = sessionFactory.openSession();
        Transaction tx = session.beginTransaction();
        List l = session.createCriteria(StyleChooser.class).list();
        session.flush();
        tx.commit();
        return l;
    }

    @Transactional
    public StyleChooser selectCSSById(Integer ID) {
        Session session = sessionFactory.openSession();
        Transaction tx = session.beginTransaction();
        StyleChooser sc = (StyleChooser) session.get(StyleChooser.class, ID);
        session.flush();
        tx.commit();        
        return sc;
    }

    @Transactional
    public Integer insertCSS(StyleChooser insertCSS) {
        Session session = sessionFactory.openSession();
        Transaction tx = session.beginTransaction();
        Integer id = (Integer) session.save(insertCSS);
        session.flush();
        tx.commit();
        return id;
    }

    @Transactional
    public void deleteCSS(Integer CSSId) {
        Session session = sessionFactory.openSession();
        Transaction tx = session.beginTransaction();
        StyleChooser sc = (StyleChooser) session.get(StyleChooser.class, CSSId);
        session.delete(sc);
        session.flush();
        tx.commit();
    }

    @Transactional
    public void updateCSS(StyleChooser cssWithNewValues) {
        Session session = sessionFactory.openSession();
        Transaction tx = session.beginTransaction();
        session.update(cssWithNewValues);
        session.flush();
        tx.commit();        
    }
} 
```

访问 DAO...

```
package net.controllers;

import java.util.List;
import javax.servlet.http.HttpServletRequest;
import net.form.StyleChooser;
import org.springframework.beans.factory.BeanFactory;
import org.springframework.beans.factory.xml.XmlBeanFactory;
import org.springframework.core.io.FileSystemResource;
import org.springframework.core.io.Resource;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.multiaction.MultiActionController;
import dao.CSSDAOImpl;

@Controller
@RequestMapping("/stylechoosertable.html")
public class IndexController extends MultiActionController {

    Resource resource = new FileSystemResource(
            "C:/Users/Steven/Desktop/Programming/workspace/CSSGeneratorHibernate4/WebContent/WEB-INF/hibernate.cfg.xml");
    BeanFactory beanFactory = new XmlBeanFactory(resource);
    CSSDAOImpl dao = (CSSDAOImpl) beanFactory.getBean("CSSDAO");

    @RequestMapping(method = RequestMethod.GET)
    public ModelAndView showIndex(HttpServletRequest request) throws Exception {
        List<StyleChooser> styleChooser = dao.selectAllCSS();
        return new ModelAndView("stylechoosertable", "styleChooser", styleChooser);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T03:34:19.840

几个观察：

1.  在您的检索方法中，不应使用事务，即它们应该是非事务性的。

2.  添加`<tx:annotation-driven transaction-manager="transactionManager"/>`您的配置以识别事务注释。

3.  如果您使用`@Transactional`注释，则不需要使用编程事务。在`@Transactional`注解中添加传播属性 as`@Transactional(propagation=Propagation.REQUIRED)`并将事务管理留给 Hibernate。

4.  第一次您需要打开会话，如果没有关闭，您下次可以使用相同的会话。为了获得`session`，最好使用如下实用方法：

    ```
    private Session getSession(SessionFactory sessionFactory){
     Session session = null;
     try{
         session = sessionFactory.getCurrentSession();
     }catch(HibernateException hex){
         hex.printStackTrace();
     }
     if(session == null && !session.isClosed()){
         session = sessionFactory.openSession();
     }
    } 
    ```

**这样，您将获得会话（如果可用）并打开，否则打开一个新会话。**

# neo4j - Neo4j 启动服务失败 1053

> ID：13576778
> 
> 赞同：3
> 
> 时间：2012-11-27T03:04:36.863
> 
> 标签：neo4j

最近我遇到了一个关于 Neo4j 的问题。启动Neo4j Server，安装成功，但是启动服务时报错：[SC]StartService FAILED:1053 服务没有及时响应启动或控制请求。

然后我使用：Neo4j.bat 控制台，它运行良好，但我仍然无法访问 localhost:7474

我的开发环境是： Neo4j-community-1.9.M01 操作系统是Win7 64bit

有人知道原因吗？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:31:44.720

启动 powershell 并前往 Neo4j 包中的 /bin 目录。运行以下命令：

PS ..\neo4j-community-1.9.M03\bin> ./Neo4j.bat 控制台

如果您收到类似“无法访问 jarfile C:\PROGRA~1\NEO4J-~1.1\bin\windows-service-wrapper-*.jar”的错误消息，那么快速解决方法是打开 /bin/ base.bat 使用任何文本编辑器（可能是记事本），然后更改此行：

设置 wrapperJarFilename=windows-service-wrapper-*.jar

到这一行：

设置 wrapperJarFilename=windows-service-wrapper-4.jar

我不确定为什么通配符不起作用，但这让我可以安装 Neo4j。我在这里找到了解决方案：[https ://github.com/neo4j/neo4j/issues/391](https://github.com/neo4j/neo4j/issues/391)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T11:15:20.810

我有一个类似的问题 - 我启动了 Neo4j 服务器，它安装成功，但后来当我尝试启动时，它报告...：[SC]StartService FAILED:1053 服务没有响应启动或控制请求一个及时的时尚。我发现在“\neo4j-community-1.9.2\data\graph.db”下，文件“tm_tx_log.1”没有被删除。我删除了该文件，并且使用 bin>Neo4j.bat start 开始正常

# python - 如何访问使用 django 的社交身份验证生成的令牌？

> ID：13576779
> 
> 赞同：2
> 
> 时间：2012-11-27T03:04:41.173
> 
> 标签：python, django, facebook, token, django-socialauth

我正在使用 django 的 social_auth 进行 facebook 身份验证。一旦用户使用 facebook 登录，我就会尝试访问令牌，以便该应用程序可以执行诸如检索用户的朋友以及他/她的新闻源上的内容之类的操作。但是，我无法获得该令牌。下面是我所拥有的。{{instance}} 显示在模板中，但是当我添加 {{token}} 时，我收到一条错误消息，提示“QuerySet”对象没有属性“tokens”。如何获取生成的令牌？

# 看法

```
def friends(request):   
    instance = UserSocialAuth.objects.filter(user=request.user).filter(provider='facebook') 
    token = instance.tokens
    return render_to_response('reserve/templates/friends.html', {'token':token, 'instance':instance},
        context_instance=RequestContext(request)) 
```

# 模板

```
{{instance}}
<br>
{{token}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T03:08:56.097

该错误说明了一切： a`QuerySet`是您搜索的任何内容的集合（在本例中为`UserSocialAuth`）。要获取该模型中的字段，您需要遍历集合：

```
tokens = [x.tokens for x in instance] 
```

作为替代方案，如果您确定您的过滤器将只返回一个实例（**不是**零，不是 2 或更多），您可以使用`get`而不是`filter`：

```
instance = UserSocialAuth.objects.get(user=request.user, provider='facebook') 
token = instance.tokens 
```

但是请注意，单个提供者可以返回[多个令牌](http://django-social-auth.readthedocs.org/en/latest/tokens.html)，例如`oauth_token`and `oauth_token_secret`，因此您应该选择您想要的令牌和/或适当地格式化它。

# ios - 来自 TableViewCell 的 UITextField 框架

> ID：13576780
> 
> 赞同：0
> 
> 时间：2012-11-27T03:05:00.937
> 
> 标签：ios, ipad

为什么我无法为 tableViewCell 文本字段获取正确的框架？

myCustomCell 有一个 leftDetailTF 和一个 rightDetailTF 文本字段。

无论我点击什么单元格/文本字段，下面的日志语句都会生成相同的矩形坐标。日志：帧 = {{470, 1}, {200, 24}}

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

myCustomCell *cell = (myCustomCell*)[tableView cellForRowAtIndexPath:indexPath];

NSLog(@"Frame = %@",NSStringFromCGRect(cell.rightDetailTF.frame)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T04:23:43.273

首先获取单元格的框架...

```
CGRect cellFrame = [tableView rectForRowAtIndexPath:indexPath]; 
```

然后获取正确文本字段的框架...

```
myCustomCell *cell = (myCustomCell*)[tableView cellForRowAtIndexPath:indexPath];
CGRect rightDetailTFFrame = cell.rightDetailTF.frame; 
```

然后将两者结合起来：

```
CGRect resultFrame = CGRectMake(cellFrame.origin.x + rightDetailTFFrame.origin.x, cellFrame.origin.y + rightDetailTFFrame.origin.y, rightDetailTFFrame.size.width, rightDetailTFFrame.size.height); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:54:38.663

使用数组记录矩形。

```
-(UITableViewCell*)cell.......:IndexPath...
{
      CGRect rect = cell.rightDetailTF.cellFrame;
      NSMutableDictionary* dic = [NSMutableDictionary alloc] init...:4];
      [dic setObject:[NSNumber numberWithFloat:rect.origin.x] forKey:...1];
      //... rect.origin.y,rect.size.with,rect.size.height
      [arr addObject:dic];
      [dic release];
}
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
      NSMutableDictionary* dic = [arr objectAtIndex:indexPath.row];
      CGRect rect = CGRectMake([dic objectForKey:...1],........);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T06:58:17.160

如果您想在超级视图的超级视图中检查子视图的框架，您可以使用它。

```
 CGRect rect = [cell.rightDetailTF.superview convertRect:cell.rightDetailTF.frame toView:self.view];
NSLog(@"Rect:%@",NSStringFromCGRect(rect)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T07:12:27.417

所以，问题是，对于 iOS 中的 UITableView，框架对于单元格中的所有视图都是固定的。因此，您**不能**修改这些帧。无论您为单元格设置什么框架，它都会在`[cell reloadData]`自动调用时恢复。

您是否正确初始化了`init`方法中的视图？

**只需覆盖“myCustomCell”**类中的“loadsubviews”方法即可。

在这个方法中打印出子视图的CGRect，如果框架不正确，那么在init方法中初始化视图时一定有问题。

# windows-phone-7 - 如何检查当前的windows phone设备是否越狱？

> ID：13576785
> 
> 赞同：0
> 
> 时间：2012-11-27T03:05:40.997
> 
> 标签：windows-phone-7

我想开发一个应用程序来检查当前的 Windows Phone 7 设备是否越狱。我该如何检测？

我认为手机越狱后肯定有一些密码操作，但我不知道。所以请给我一些想法或一些链接就可以了！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:21:24.813

您无法仅从沙盒中运行的应用程序中检测到这一点。如果您可以读取注册表值或检查文件的一致性，那么它是可能的，但不是来自常规的 Windows Phone 应用程序。

# database - 我们可以在 DB 中添加一列而不将其添加到休眠对象吗？

> ID：13576789
> 
> 赞同：2
> 
> 时间：2012-11-27T03:06:16.083
> 
> 标签：database, hibernate

在 DB 中添加一个额外的列会中断休眠吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T03:08:13.837

只要该列*未定义*为`NOT NULL`或`DEFAULT`定义了值，就可以了。

插入 Hibernate 发出的语句不会为列提供值（显然），但它产生的语句在语法上是正确的，即使它不知道该列 - 列及其值根本不会被提及插入语句。

如果必须以某种特殊方式派生，您可以考虑使用数据库触发器来维护该列中的值，尽管除非绝对必要，否则请谨慎使用数据库功夫，例如，如果您无法控制hibernate 实体类和列*必须*是一些不能被声明为列默认值的特定值。

更新和选择语句不需要特殊处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:14:11.067

如果您的意思是通过休眠自动更新表，那么您可以在休眠配置文件中使用以下内容

```
 <property name="hbm2ddl.auto">create</property> 
```

# haskell - 如何使未完全实现的类的警告静音

> ID：13576792
> 
> 赞同：3
> 
> 时间：2012-11-27T03:06:53.263
> 
> 标签：haskell, compiler-warnings

我将我的数据类型声明为类的实例`Num`并仅实现方法 sum `(+)`。其他方法，如`(*)`, `negate`, `abs`,`fromInteger`等。我没有实现。原因是我的数据类型不需要这些方法。

我编译了程序，除了一些令人不舒服的警告之外，一切正常，例如：

```
Warning: No explicit method nor default method for `*'
... 
```

我怎样才能避免这些警告，或者我需要实现上述方法？实际上，我不想实现它们。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T03:16:49.383

您可以使用命令行标志（在 GHC 中）使这些警告静音

```
ghc -fno-warn-missing-methods YourFile.hs 
```

但是，如果您只想实现加法，那么将您的类型设置为`Num`. 如果您只想对类型的操作有一个不错的运算符，您可以定义自己的，`(+)`如果您甚至可以重用

```
import Prelude hiding ((+))
import qualified Prelude  -- so that (+) can be still used in qualified form 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T21:40:37.580

您始终可以`undefined`用作占位符值；它的类型是`a`simple ，所以它总是进行类型检查。不过要小心，评估它会在运行时抛出异常。

```
data Foo = Bar | Baz

instance Eq Foo where
      Bar == Bar = True
      Baz == Baz = True
      (/=)       = undefined 
```

# redirect - 使用 ~ 语法的 301 重定向文件夹

> ID：13576794
> 
> 赞同：1
> 
> 时间：2012-11-27T03:07:22.390
> 
> 标签：redirect, directory, litespeed

我的网站在 Litespeed Web 服务器上运行，问题是 domain.ltd/~username/ 像 domain.ltd/ 的镜像一样工作

请帮我将所有 URL domain.ltd/~username/* 重定向到 domain.ltd/*

谢谢！

# asp.net - jquery 只在默认页面执行的原因是什么？

> ID：13576796
> 
> 赞同：0
> 
> 时间：2012-11-27T03:07:28.070
> 
> 标签：asp.net, jquery-ui

在我的 asp 应用程序中，我使用了几个 jquery。这些在默认页面中完美运行。但不在任何其他页面中。有人请告诉我为什么它不执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T03:13:53.203

您需要在要使用它的每个页面上包含 jQuery，您可以通过创建母版页轻松做到这一点，并让您的所有页面都使用该母版。请参阅[asp.net 中的母版页实现](https://stackoverflow.com/questions/6179125/master-page-implementation-in-asp-net)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T03:27:50.123

创建一个可供所有页面使用的母版页并添加以下代码

aspx：

```
<script src='<%# ResolveUrl("~/javascripts/jquery-1.4.2.min.js") %>' type="text/javascript"></script> 
```

aspx.cs：

```
 page_load(){
     Page.Header.DataBind();
} 
```

# css - Twitter bootstrap 无法使用固定网格填充容器

> ID：13576797
> 
> 赞同：0
> 
> 时间：2012-11-27T03:07:33.260
> 
> 标签：css, twitter-bootstrap, padding, grid-layout

我试图在容器和 Twitter 引导站点的网格之间获得一些填充（排水沟）。

```
<div class="container">
  <div class="row">
    <div class="span4">
      Some narrow content
    </div>
    <div class="span8">
      Some wider content
    </div>
  </div>
</div> 
```

如果我在 .container 上放置 10px 的填充，这一切都会中断，因为我正在缩小使用像素宽度的固定网格的空间。我明白了，所以我尝试了流体布局。

这会使用我想要的排水沟正确格式化网格 - 但是......它会在其他地方引起问题。在我的狭窄内容中，我实际上有这个（为简洁起见，删除了 a 和 img，但它们的大小都相同）：

```
 <ul class="thumbnails">
   <li class="span2">...</li>
   <li class="span2">...</li>
   <li class="span2">...</li>
   <li class="span2">...</li>
   <li class="span2">...</li>
   <li class="span2">...</li>
 </ul> 
```

在固定布局中，它完美地包裹在一个漂亮的 2x3 方形图片网格中。在流畅的布局中，我在顶行获得了 2 张图像，然后在剩下的部分略微缩进了一张——我漂亮的缩略图网格被破坏了。一些研究表明，流畅的布局在缩略图上有动态边距，第一个是为了适应这个特殊的 CSS 代码：

```
 .row-fluid [class*="span"]:first-child {
   margin-left: 0;
 } 
```

由于这显然不适用于第二行中的第一张图像，因此它与其他缩略图（用于间距）具有相同的边距并与顶行对齐。

所以我正在寻找解决这两个问题的方法。我希望使用固定布局，但如果有人能解决缩略图问题，我会很乐意使用流动布局。

遇到此问题的任何人都有解决方案吗？

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:41:25.077

我不建议填充`container`or`row`类，它会抛出整个引导网格。将填充直接应用于`span*`类`divs`。

# assembly - Mips：计算两个输入的总和

> ID：13576801
> 
> 赞同：10
> 
> 时间：2012-11-27T03:08:17.300
> 
> 标签：assembly, mips

看起来很简单，但我认为我的程序无法编译，因为我覆盖了 $v0 寄存器？提前致谢

更新：没关系，当我进行系统调用以打印总和时，我的命令是错误的……已修复，以防有人需要参考。

```
.data
prompt1: .asciiz "\n\n Enter the first integer please:"
prompt2: .asciiz "Enter the second integer please:"
result: .asciiz "The result is:"

.text

main:

    #t0-to hold first integer
    #t1-to hold second integer
    #t2- used to hold the sum of t$1 and t$2

        #first number

    li $v0, 4 #syscall to print string
        la $a0, prompt1  #address of string to print
        syscall

        li $v0, 5 #syscall to read an integer
        syscall
        move $t0, $v0  #move the number to read into $t0

    #second number
    li $v0, 4
    la $a0, prompt2
    syscall

    li $v0,5        
        syscall
    move $t1,$v0

        add $t2, $t1, $t0 #compute the sum

    #print out sum of $t2
    li $v0, 4       # load syscall print int into $v0
    move $a0, $t2   #move the number to print into $a0
    li, $v0,1
    la, $a0, result
    syscall

Done:

    li $v0, 10    #syscall to exit
        syscall 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-04-04T16:54:47.610

```
.data
prompt1: .asciiz "\n\n Enter the first integer please:"
prompt2: .asciiz "Enter the second integer please:"
result: .asciiz "The result is:"

              .text
main:
    #t0-to hold first integer
    #t1-to hold second integer
    #t2- used to hold the sum of t$1 and t$2
        #first number
        li $v0, 4 #syscall to print string
        la $a0, prompt1  #address of string to print
        syscall
#
        li $v0, 5 #syscall to read an integer
        syscall
        move $t0, $v0  #move the number to read into $t0
    #second number
    li $v0, 4
    la $a0, prompt2
    syscall
#
    li $v0,5        
    syscall
    move $t1,$v0
#
    #print out sum of $t2
    li $v0, 4
    la $a0, result
    syscall
#
    add $a0, $t1, $t0 #compute the sum
    li $v0, 1
    syscall
#
    li $v0, 10
    syscall 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-28T02:09:20.873

实际上，您在本节中搞砸了：

`#print out sum of $t2 li $v0, 4 # load syscall print int into $v0 move $a0, $t2 #move the number to print into $a0 li, $v0,1 la, $a0, result syscall`

让我们逐行进行：
`li $v0, 4 #You are ready to indicate that you want to print string`
`la $a0, result #you have loaded the address of string now`
`syscall # Now you will see: "The result is:`

现在让我们打印数字
`li $v0, 1`
`move $a0, $t2`
`syscall`

脚注：每次你表明你将使用系统调用时，你应该先完成那个命令。例如，如果你想打印一些东西，你必须完成那个集合的系统调用，然后继续打印整数。

示例：假设我们要打印这样的东西，。1号

MIPS 代码将是：
`.data prompt: .asciiz "Number : " .text main: #Now lets read a number li $v0, 5 syscall # -> note syscall is done for each instruction #Lets complete printing first li $v0, 4 la $a0, prompt syscall`

#我们现在有 $t0 中的号码 #如果我们做
`li $v0, 1 la $a0, prompt syscall`
#ask question and answer you yourself. 将打印什么。#我们输入的号码或提示地址#这里需要修改什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-18T17:57:50.640

```
.text
main:
    #print the msg1
    li $v0 4
    la $a0 msg1
    syscall 

    #read the num 1
    li $v0 5
    syscall

    sw $v0 a1

    #print the msg2
    li $v0 4
    la $a0 msg2
    syscall 

    #read the Num 2
    li $v0 5
    syscall

    sw $v0 a2

    #print the msg3
    li $v0 4
    la $a0 msg3
    syscall 

    lw $t0 a1
    lw $t1 a2

    li $v0 1
    add $a0 $t0 $t1
    syscall  
.data
    msg1: .asciiz "Enter the first number :"
    msg2: .asciiz "Enter the second number :"
    a1 : .word 0
    a2 : .word 0
    msg3: .asciiz  "The sum is = " 
```

# vb.net - 如何更改已搜索字符的颜色？

> ID：13576802
> 
> 赞同：1
> 
> 时间：2012-11-27T03:08:17.243
> 
> 标签：vb.net, fonts, colors

我有这个机器问题，允许用户在 TextBox1 中输入一个段落。然后要求用户在 TextBox2 上输入要在 TextBox1（段落）上搜索的字符。我需要做的最后一件事是...在单击 executeBUTTON 时更改 TextBox1 中搜索字符的颜色。可能吗？因为我已经搜索了一千次，找不到任何答案。我只使用 TextBox 并找到了一些将其更改为 RichTextBox 的答案，但我不知道如何（如果可以的话）。

# python - Matplotlib - 在 x 轴上隐藏特定刻度

> ID：13576805
> 
> 赞同：24
> 
> 时间：2012-11-27T03:09:00.027
> 
> 标签：python, matplotlib, plot, axis-labels

我试图隐藏我的条形图的第一个和最后一个 x 轴刻度文本，即“2004”和“2013”​​。Matplotlib 默认自动添加这些，即使我的数据集是 2005 年到 2012 年的，因此我不希望在我的条形图中有 2004 年和 2013 年。我正在寻找一些代码行来选择和隐藏这些刻度。有任何想法吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-27T11:29:56.600

请告诉我这不是你想要的。

```
import sys, os
import matplotlib.pyplot as plt

path = sys.path[0]
sizes = [(12,3,), (4,3,)]
x =  range(20)

for i, size in enumerate(sizes):
    fig = plt.figure(figsize = size, dpi = 80, facecolor='white',edgecolor=None,linewidth=0.0, frameon=True, subplotpars=None)
    ax = fig.add_subplot(111)
    ax.plot(x)
    plt.ylabel ('Some label')
    plt.tight_layout()

    make_invisible = True
    if (make_invisible):
        xticks = ax.xaxis.get_major_ticks()
        xticks[0].label1.set_visible(False)
        xticks[-1].label1.set_visible(False)

plt.show() 
```

此示例使第一个和最后一个 X-ticks 不可见。但是您可以轻松地添加对您的特殊刻度的检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-26T11:58:21.653

只需添加到@DmitryNazarov 的答案，如果您只想隐藏刻度标签，保持网格线可见，请使用：

```
ax = plt.gca()     
ax.axes.xaxis.set_ticklabels([])
ax.axes.yaxis.set_ticklabels([]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-29T13:19:56.080

我想从`0`to的每个数字都有刻度`30`，但标签看起来很乱，所以我这样做只显示了 5 的倍数：

```
pyplot.xticks(numpy.arange(0,31,1), [i if i in range(0,31,5) else '' for i in range(31)]) 
```

您可以应用相同的方法并排除数据集的第一个和最后一个元素的标签。

# c# - Bitmap.Save “一般错误”

> ID：13576806
> 
> 赞同：3
> 
> 时间：2012-11-27T03:09:24.017
> 
> 标签：c#, windows, forms, bitmap, gdi+

当我运行我的应用程序时，我的脸上出现了以下错误“GDI+ 中发生了一般错误。” 我环顾四周，看到人们有类似的错误，但没有找到真正的解决方案，或者实施起来真的很痛苦。那些没有得到解决方案的人还没有发布他们的代码。

所以我想我不妨试一试，并提出另一个关于如何修复此错误的线程。这是我的代码和错误

```
 Random r = new Random();
            DirectoryInfo di = new DirectoryInfo(folderbrowser.SelectedPath);
            FileInfo[] fi = di.GetFiles().Where(f => extensions.Contains(f.Extension.ToLower())).ToArray();
            for (int i = 0; i < imageCount; i++)
            {
                int img1 = r.Next(imageCount);
                int img2 = r.Next(imageCount);
                while (img2 == img1)
                    img2 = r.Next(imageCount);
                pic1.Image = Image.FromFile(fi[img1].FullName);
                pic2.Image = Image.FromFile(fi[img2].FullName);
                Image i1 = pic1.Image;
                Image i2 = pic2.Image;
                Bitmap bitmap = new Bitmap(i1.Width + i2.Width, 1080);
                using (Graphics g = Graphics.FromImage(bitmap))
                {
                    g.DrawImage(i1, 0, 0);
                    g.DrawImage(i2, i2.Width, 0);
                }
                bitmap.Save(@"C:\TEST\Image_"+i.ToString());                   
            } 
```

这是错误代码

```
System.Runtime.InteropServices.ExternalException was unhandled
  Message=A generic error occurred in GDI+.
  Source=System.Drawing
  ErrorCode=-2147467259
  StackTrace:
       at System.Drawing.Image.Save(String filename, ImageCodecInfo encoder, EncoderParameters encoderParams)
       at System.Drawing.Image.Save(String filename, ImageFormat format)
       at System.Drawing.Image.Save(String filename)
       at WallpaperMerger.Form1.btn_merge_Click(Object sender, EventArgs e) in C:\Users\PeppeJ\documents\visual studio 2010\Projects\WallpaperMerger\WallpaperMerger\Form1.cs:line 113
       at System.Windows.Forms.Control.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
       at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
       at System.Windows.Forms.Control.WndProc(Message& m)
       at System.Windows.Forms.ButtonBase.WndProc(Message& m)
       at System.Windows.Forms.Button.WndProc(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
       at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.Run(Form mainForm)
       at WallpaperMerger.Program.Main() in C:\Users\PeppeJ\documents\visual studio 2010\Projects\WallpaperMerger\WallpaperMerger\Program.cs:line 18
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

那么你们在 StackOverflow 有什么想法。我是不是和其他人一样，必须输入一个非常复杂的代码来解决这个问题，还是我犯了一个简单的错误并且很容易纠正？

如果您想自己测试它是否有帮助，这里是[调试构建的链接](https://dl.dropbox.com/u/14970061/WallpaperMerger.exe)

只需勾选“使用多个文件”，例如选择一个包含图像文件的文件夹（C:\Users\Public\Pictures\Sample Pictures）。点击合并。

我想补充一点，我在这个函数中使用了 Bitmap.Save，它可以完美地工作。

```
 Bitmap bitmap = new Bitmap(pic1.Image.Width + pic2.Image.Width, 1080);
        using (Graphics g = Graphics.FromImage(bitmap))
        {
            g.DrawImage(pic1.Image, 0, 0);
            g.DrawImage(pic2.Image, pic1.Image.Width, 0);
        }
        if (savepicfile.ShowDialog() == DialogResult.OK)
            bitmap.Save(savepicfile.FileName); 
```

在上面的函数文件中是这样加载的：

```
 DialogResult result = pic1file.ShowDialog();
    if (result == DialogResult.OK)
        pic1.Image = Image.FromFile(pic1file.FileName); 
```

值得一提的是“picX”是一个“System.Windows.Forms.PictureBox”对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T03:28:24.587

根据我的经验，99% 的情况下，此错误是由以下问题引起的：

1.  您没有写入文件的权限。
2.  您尝试写入的文件已被另一个进程锁定。

有时我会在以下情况下遇到它：

*   我正在绘制带有零点的 GraphicPaths。
*   我不是处置我的 GDI+ 对象的财产。（可能与上述选项 2 有关）

我会先检查前两件事。如果可以排除这种情况，我可以看到您在提供的代码中没有正确处理一些对象的位置。我会把它清理干净。如果您不应该调用 Dispose()，那么 GDI+ 与 .NET 的 GC 并不是特别合作。

```
 var r = new Random();
        var di = new DirectoryInfo(folderbrowser.SelectedPath);
        var fi = di.GetFiles().Where(f => extensions.Contains(f.Extension.ToLower())).ToArray();
        for (var i = 0; i < imageCount; i++)
        {
            var img1 = r.Next(imageCount);
            var img2 = r.Next(imageCount);
            while (img2 == img1) 
            {
                img2 = r.Next(imageCount);
            }
            pic1.Image = Image.FromFile(fi[img1].FullName);
            pic2.Image = Image.FromFile(fi[img2].FullName);
            var i1 = pic1.Image;
            var i2 = pic2.Image;
            using (var bitmap = new Bitmap(i1.Width + i2.Width, 1080))
            using (var g = Graphics.FromImage(bitmap))
            {
                g.DrawImage(i1, 0, 0);
                g.DrawImage(i2, i2.Width, 0);
                bitmap.Save(@"C:\TEST\Image_"+i.ToString());
            }                   
        } 
```

* * *

**编辑：更多想法（嗯，真的澄清了上面的第 2 点）......**

*   如果您的应用程序中有一个 PictureBox 或其他控件引用`C:\TEST`您尝试写入的目录中的图像，您会看到此错误。
*   如果您有其他代码读取您尝试写入的图像，您会看到此错误。
*   如果外部进程（例如您的 IDE、图像查看器/编辑器等）打开了文件，您会看到此错误。

调试思路：

*   尝试在 Save 调用上设置断点。当您找到它时，请使用此处找到的提示来确定可能正在访问文件的进程：[如何找出使用 .NET 锁定文件的进程？](https://stackoverflow.com/questions/317071/how-do-i-find-out-which-process-is-locking-a-file-using-net)
*   尝试先删除文件，看看它是否允许您保存，如果它们不是他们的。
*   尝试在您正在写入的目录上为“每个人”设置完全权限（但不要这样）
*   确保您尝试保存的图像的宽度是大于零的数字。我注意到您正在以编程方式进行设置。
*   确保您要保存的图像的宽度不是太大（也许您遇到了内存问题？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T14:23:40.363

我找到了答案，目录“\TEST\”不存在。当我创建它时，它完美无缺。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-09T17:32:58.327

我遇到了这个确切的问题，解决方法是将位图包装在 using 子句中；位图也需要处理

```
using (Bitmap bmp = new Bitmap()) 
{
    // Bitmap operation
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T03:27:30.650

在处理 Graphics 对象之前尝试执行 bitmap.Save：

```
Bitmap bitmap = new Bitmap(i1.Width + i2.Width, 1080);
using (Graphics g = Graphics.FromImage(bitmap))
{
    g.DrawImage(i1, 0, 0);
    g.DrawImage(i2, i2.Width, 0);
    bitmap.Save(@"C:\TEST\Image_"+i.ToString()); 
} 
```

# jquery - 如何在鼠标悬停在弹出窗口上时保持 jQuery.hover 弹出窗口

> ID：13576810
> 
> 赞同：1
> 
> 时间：2012-11-27T03:09:51.057
> 
> 标签：jquery, popup, hover

这是我的问题：当鼠标移到一个项目上时，会有一个弹出窗口显示项目的详细信息。我使用 hover() 来执行此操作（我设置了一个函数来延迟触发）。但是，当我移出项目并移出详细信息弹出窗口时。弹出窗口就消失了。那么，当鼠标不悬停触发元素而是悬停弹出窗口时如何保持弹出窗口。这是我的代码

tab.find("tr").slice(1,parseInt(jQuery("#itemCount").val())+2).find("td").mouseDelay(500).hover(function (e){

```
 var id=jQuery(this).parent().find( "td:first").html();
    var url = "/" +job.webDatabasePath+"/DPGetDoc?openAgent&id="+id;

    jQuery.ajax( {
               url:url,
              success: function(data){
                    var xmlObj = jQuery(data);
                     var major = xmlObj.find("DPTrainSubItem" ).text();
                    jQuery( "#blockDeptName").val(major);                                    
                     }     
              } )
              var a=getMousePoint(e);
           if((parseInt(document.getElementById("popupContact").style.width)+a.x)<parseInt(document.body.clientWidth)){
              jQuery( "#popupContact").css({
                "top": a.y+20,
                "left": a.x+20
               });
             popupModal.show();
            }else{
                jQuery( "#popupContact").css({
                    "top": a.y+20,
                    "left": a.x-parseInt(document.getElementById("popupContact").style.width)-50
                 });
                 popupModal.show(); 
              }
    },
   function (){

    if(jQuery('#popupContact').is(':hover')){
        disablePopup();
        }
 }); 
```

如果 jQuery('#popupContact').is(':hover') 在 IE 中工作，我的工作很简单。然而事实并非如此。所以我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:33:54.767

您可以尝试使用 settimeout，如下所示：

```
setTimeout(function (){$("#popupContact").remove();}, 3000); 
```

希望这可以帮助

# c# - 检查 null，== null vs != null

> ID：13576818
> 
> 赞同：2
> 
> 时间：2012-11-27T03:11:21.333
> 
> 标签：c#, .net

是否有推荐的方法（根据 .net Framework 指南）检查 null，例如：

```
if (value == null)
{//code1}
else
{//code2} 
```

或者

```
if (value != null)
{//code2}
else
{//code1} 
```

或者两个代码具有相同的性能？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-27T03:12:08.433

这两个选项将执行相同的操作。

您应该使用语义上有意义的任何一个，或者任何一个导致更清晰的代码。
例如，如果非空操作更短，则将那个块放在第一位是有意义的，这样`else`就接近`if`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-27T03:12:30.190

没有性能差异，因此您应该努力提高可读性。

例如，将更“常规”的路径放在`if`分支中，将“异常”的路径放在分支中通常是一个好主意`else`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-27T03:12:50.493

性能上没有区别。我个人将更常见的情况放在最上面，将不太常见的情况放在`else`分支中，但这只是偏好。这让我更容易看到更常见的场景。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-27T03:12:54.500

没有性能差异。根据您的需要使用它们（可读性/可用性角度）。**最合适/使用的块进入，`if`可选/次要块进入`else`.**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T09:24:13.830

两者都是相同的..为了便于阅读，您可以将代码块放在 IF 中，结果为真。在这种情况下 IF(value != null) 可读性更好，更明显:)

# android - 像 Instagram 这样的开源图像过滤器库？

> ID：13576835
> 
> 赞同：36
> 
> 时间：2012-11-27T03:13:12.110
> 
> 标签：android, instagram

我正在开发一个应用程序（android），它想要像在 Instagram 中那样做一些图像过滤效果，只是想知道是否有任何可用的开源库？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-27T03:22:39.997

你可以看看 Androids [Effects](http://developer.android.com/reference/android/media/effect/EffectFactory.html)包。这个类的源是可用的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-05-15T07:29:39.790

您可以使用库 GPU 图像处理。使用此链接[https://github.com/Cyber​​Agent/android-gpuimage](https://github.com/CyberAgent/android-gpuimage)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-27T06:28:32.697

如果您已下载 SDK 的 API-17 示例，请从那里参考 HelloEffects 代码。它使用 EffectFactory 来执行图像转换。您拥有的其他选择是使用 OpenCV，否则获取算法并将其与 NDK 一起使用。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-27T03:24:46.030

您可能想查看本教程系列的图像处理部分。 [http://xjaphx.wordpress.com/learning/tutorials/](http://xjaphx.wordpress.com/learning/tutorials/)

我还发现了一个库 [http://code.google.com/p/android-image-filtering/](http://code.google.com/p/android-image-filtering/)

# mfc - 我不能在 MFC 中使用 Afx 全局函数

> ID：13576837
> 
> 赞同：1
> 
> 时间：2012-11-27T03:13:40.337
> 
> 标签：mfc, visual-c++, afx

我正在改进一个用 VC++ 编写的应用程序。我想添加一个发送和接收消息的函数。我使用了回调函数。在回调函数中，我用来`::AfxGetMainWnd`获取主窗口的句柄。当我输入 ::Afx 时，没有相关的 Afx 出现让我选择。并且`AfxGetMainWnd`功能在程序中不起作用。

请帮忙。

# php - 使用 GZip 压缩输出

> ID：13576838
> 
> 赞同：2
> 
> 时间：2012-11-27T03:13:41.130
> 
> 标签：php, codeigniter, optimization, gzip, yslow

我使用 CodeIgniter 创建了一个站点，一切都很好。我使用**YSlow** （Google Chrome 应用程序）测试了我的网站的性能，其中一些结果被评为**A。**但是，我在*“使用 gzip 压缩组件”*这一领域的成绩为**F。**它与我的*css*和*js*文件有关，大部分都在. 我不是那么先进，所以这就是为什么我不知道如何解决这个问题。***`<head>`***

 **** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T04:22:11.313

您可以在文档中找到答案：http: [//developer.yahoo.com/performance/rules.html#gzip](http://developer.yahoo.com/performance/rules.html#gzip)

但是，简而言之，为了节省通过网络发送数据的时间，您可以在 Web 服务器中对其进行压缩，然后在 Web 浏览器中对其进行解压缩。请注意，这些功能是 Web 服务器（Apache / IIS）和 Web 浏览器（IE、Chrome、Firefox）的属性，而不是应用程序级别的属性。换句话说，您无法在 Code Igniter 中修复它。这是[apache 的文档](http://httpd.apache.org/docs/2.0/mod/mod_deflate.html)，但如果你在 IIS 中，那么你可以做类似的事情。

您仍然可以通过压缩 JS 和 CSS 文件来优化您的 JS 和 CSS 文件，而无需在 Web 服务器上进行任何调整 - 它们最终仍然是纯文本，但您可以缩短变量名、删除换行符等等。这是[雅虎减少文件大小的工具](http://refresh-sf.com/yui/)，您可能应该从这里开始。您还可以使用刚刚为 Apache（由 Google 发布）发布的 on-the-fly mod。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T05:14:27.427

您可以使用 .htaccess 文件来压缩您的输出。为此，您需要启用 apaches deflate 模块。如果您使用的是 wamp，请单击系统托盘上的 wamp 图标。现在转到 apache -> 模块。现在打开标题模块和放气模块。现在在您的 .htaccess 文件中放置以下代码。

```
# compress text, html, javascript, css, xml:

AddOutputFilterByType DEFLATE text/plain
AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE text/xml
AddOutputFilterByType DEFLATE text/css
AddOutputFilterByType DEFLATE application/xml
AddOutputFilterByType DEFLATE application/xhtml+xml
AddOutputFilterByType DEFLATE application/rss+xml
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE application/x-javascript
AddOutputFilterByType DEFLATE image/jpeg
AddOutputFilterByType DEFLATE image/png
AddOutputFilterByType DEFLATE image/gif

#Custom Setting End 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T05:45:54.217

您可以通过将配置文件中的 compress_output 键设置为 true 来实现。我已从 ./application/config/config.php 文件中复制了此文本

> 启用 Gzip 输出压缩以加快页面加载速度。启用时，| 输出类将测试您的服务器是否支持 Gzip。| 但是，即使支持，也不是所有浏览器都支持压缩 | 所以只有当你有理由确定你的访问者可以处理它时才启用。| | 非常重要：如果您在启用压缩时得到一个空白页，它 | 意味着您过早地将某些内容输出到浏览器。它可以 | 甚至是一个脚本末尾的一行空格。对于 | 压缩工作，在调用输出缓冲区之前什么都不能发送| 由输出类。不要在启用压缩的情况下“回显”任何值。

```
$config['compress_output'] = FALSE; 
```***

# rtmp - 我可以测试互联网上的任何地方是否有 rtmp（协议）URL？

> ID：13576840
> 
> 赞同：24
> 
> 时间：2012-11-27T03:13:47.297
> 
> 标签：rtmp, sample

我正在基于 NetStream 构建一个 Flash 视频播放器，我只需要测试它是一个正常运行的 RTMP url，但我无法通过谷歌在整个互联网上找到一个。

有谁知道我可以用来测试这个东西的任何有效的示例 rtmp 流及其 URL？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-29T21:50:02.530

JWPLayer 有一个演示页面：[http ://www.longtailvideo.com/support/jw-player/29395/rtmp-single-stream/](http://www.longtailvideo.com/support/jw-player/29395/rtmp-single-stream/)

您可以打开页面，查看源代码并从那里复制和粘贴`rtmp://`URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-03T14:16:01.437

[目前我在https://web.duke.edu/dms/flashtest/](https://web.duke.edu/dms/flashtest/)使用 Wowza 示例页面

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-03T15:57:52.160

对于那些稍后查看这个问题并想要快速回答的人，附上我从 koenpeters 的回答中获得的这个 url

```
rtmp://fms.12E5.edgecastcdn.net/0012E5/mp4:videos/8Juv1MVa-485.mp4 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2014-11-24T11:58:52.280

我不知道你还需要回答。您可以为此目的使用 curl，只需执行此操作即可。

```
curl --output /dev/null --silent --head --fail your_rtmp_link 
```

上面的命令正在linux上工作。如果您没有 curl 只需通过以下命令安装，

```
sudo apt-get install libcurl4-openssl-dev 
```

我也是用 c++ 做的。我使用 curl c++ 库并每 3 分钟检查一次我的 rtmp 链接。

# c - 在C中比较两个不同格式的日期

> ID：13576842
> 
> 赞同：1
> 
> 时间：2012-11-27T03:13:57.793
> 
> 标签：c

我想比较两个日期“2010-08-12”和“2010-8-12”，但是使用 strcmp 失败了，所以请建议任何内置的 C 函数或任何 C 函数来比较这些日期。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T03:20:12.200

我建议你试试[strptime](http://linux.die.net/man/3/strptime)看看它是否合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:32:27.350

您可以编写一个简单而直接的函数，将日期转换为足以用于订购目的的数字，方法是使用[`strtol`](http://www.cplusplus.com/reference/cstdlib/strtol/)：

```
int seq_day(char *date) {
    int y = strtol(date, &date, 10);
    int m = strtol(++date, &date, 10);
    int d = strtol(++date, &date, 10);
    return (y*12+m)*31+d;
} 
```

在两个日期调用上述函数，并比较`int`结果；对于较早的日期，返回的值会更小。

# java - 如何将另一个源目录添加到 Play 1.2.x 项目？

> ID：13576843
> 
> 赞同：1
> 
> 时间：2012-11-27T03:13:58.650
> 
> 标签：java, playframework, thrift, playframework-1.x

我正在使用播放框架（v1.2.3）。作为我的代码的一部分，我有各种生成的源文件。这些文件是由 thrift 生成的，所以我不希望它们包含在我的源代码管理中。因此，我想排除所有生成的文件。但是，目前，我将它们全部构建在主 app/ 目录下。所以没有办法添加忽略子句来避免将任何文件提交到 git。

如果我可以简单地将 thrift 源文件生成到不同的目录结构（例如 gen/）中，这将不是问题。有没有办法将 Play 配置为从 app/ 文件夹和另一个单独的、不相关的文件夹中编译文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:09:36.637

我相信您最好的选择是将这些文件作为[模块](http://www.playframework.org/documentation/1.2.3/modules)提供并从主应用程序中使用它。这样你就可以把它们放在一个单独的区域。

检查这个[关于](https://stackoverflow.com/questions/5856747/play-framework-1-2-how-to-add-custom-module-dependencies)如何将本地模块添加到项目的问题。

# c++ - C++ 类函数

> ID：13576845
> 
> 赞同：3
> 
> 时间：2012-11-27T03:14:09.520
> 
> 标签：c++, class

一个简单的 c++ 文件和类 TT 有两种方法。

```
#include <map>
#include <string>
#include <iostream>

using namespace std;

class TT{ 
    public:
        TT(const string& str);
        template<class T>T Read(const string& key)const;
        template<class T>T Read(const string& key, const T& value)const;
};

TT::TT(const string& str){
    cout<<str<<endl;
}

template<class T>T TT::Read(const string& key)const{
    std::cout<<key<<std::endl;
    return 1;
}

template<class T>T TT::Read(const string& key, const T& value)const{
    std::cout<<key<<'\t'<<value<<std::endl;
    return value;
}

int main(void){
    TT tt("First");

    tt.Read("Hello", 12);
    return 1;
} 
```

如果更换

```
tt.Read("Hello world!", 12); 
```

和

```
tt.Read("Hello world!"); 
```

在**主（）**

G++ 说：

> new.cc:31: 错误：没有匹配函数调用 'TT::Read(const char [5])'</p>

为什么 G++ 找不到**Read(const string& key)const**方法？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T03:22:51.173

您正在尝试定义一个返回 T 的函数：

```
template<class T>
T TT::Read(const string& key) const
{
    std::cout << key << std::endl;
    return 1;
} 
```

但是，您总是`int`从这个函数返回一个。您要么需要这样称呼它：

```
tt.Read<int>("Hello"); 
```

或者删除模板定义，因为这里没有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T03:23:07.493

您的函数`template<class T>T Read(const string& key)const;`在类型 T 上模板化，但 T 仅作为返回类型出现。

如果您打算手动将返回类型烘焙到您的函数中（并且看起来像是从 的外观`return 1;`），您可以将声明更改为：

```
int Read(const string& key) const; 
```

否则，您必须在调用中手动指定模板类型，如下所示：

```
tt.Read<int>("Hello"); 
```

这归结为这样一个事实，即当模板化类型仅作为返回出现时，函数不能推导出模板化类型。

C++ 标准在标题为：

`Explicit template argument specification [temp.arg.explicit]`

> 如果所有的模板参数都可以推导出来，那么它们都可以被省略；在这种情况下，空模板参数列表 <> 本身也可以省略。在演绎完成但失败的上下文中，或在演绎未完成的上下文中，如果指定了模板参数列表，并且它与任何默认模板参数一起标识单个函数模板特化，则模板 ID 是左值用于功能模板专业化。

```
template<class X, class Y> X f(Y);

int i = f<int>(5.6); // Y is deduced to be double
int j = f(5.6); // ill-formed: X cannot be deduced 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T03:23:31.980

我相信这是因为在处理模板时，编译器想知道返回函数是什么，即使它返回 1，它也是一个 int，它也无法弄清楚。从技术上讲`return 1`可能是一个错误，因为它不知道返回值应该是什么。

采用`tt.Read<int>("Hello");`

# javascript - 浏览器历史管理

> ID：13576848
> 
> 赞同：2
> 
> 时间：2012-11-27T03:14:34.187
> 
> 标签：javascript, html, gwt, back-button, browser-history

我正在尝试找到一个干净的解决方案，以最有效的方式处理浏览器历史记录。（我正在使用 GWT，但这个问题确实比这更笼统。）

这是我的情况（我认为这很标准）：

我有一个 Web 应用程序，它有几个不同的页面/地点/位置（无论你想怎么称呼它），我会根据浏览器历史记录的更改显示这些应用程序。除了通常是静态 HTML 页面的“主页”、“功能”、“联系人”等之外，还有一个“用户”部分，人们可以在其中登录他们的用户帐户和（我们称之为）“项目”部分，用户可以在其中处理他们的项目。

所以，现在我只需使用名为*#Home*、*#Features*、*#Contact*等的本地链接以及*#User*、*#Project*来访问不同的页面。一切都很好，除了以下情况：

例如，如果有人打开链接*#Project*，则会向该人显示项目登录对话框。这个登录对话框有一个`cancel`按钮，我想通过`back`从我的应用程序中调用浏览器的按钮来实现它（很简单）。我想这样做的原因有两个：

1.  您可以从应用程序中的几个不同位置以及您的书签访问此登录对话框，使用这种方法，我不需要跟踪用户来自哪里。
2.  更重要的是：如果我确实记得用户来自哪里（例如*#Home*）并将用户“转发”链接到那个地方，我会得到以下效果：
    *   假设用户访问*#Home*，然后是*#Features*，然后单击项目登录。
    *   如果用户单击`cancel`按钮，我将他“转发”到*#Features*，然后单击浏览器的`back`按钮将返回登录对话框，然后再次返回*#Features*，最后*返回 #Home*。不是你所期望的。
    *   相反，您希望立即返回*#Home*，这正是我`cancel`通过浏览器的返回功能实现的结果。

此时一切都很好，除非用户最初通过指向*#Project*的直接书签链接进入此登录对话框。因为那时，如果我只是有`cancel`= `back`，用户就会从页面完全返回到他的浏览器的起始页面或他之前所在的任何地方。因此，在这种情况下，我确实需要将“转发”链接到*#Home*。

现在，我尝试了几种方法来解决这个问题，并提出了一些解决方案，但似乎没有一个对我来说是非常可取的，但还是让我分享它们以激发一些创造力：

*   首次打开页面时，获取历史令牌。如果是*#Project*或*#User*或其他任何触发可取消对话框的项目，请将以下项目放入历史堆栈：*#Home*、*#Project*，其中最后一项是保存的初始令牌。然后，这允许我的`cancel`按钮正常工作......一次......但是，如果用户`back`随后点击，他将再次获得登录对话框（因为原始历史令牌仍在历史堆栈中，我不知道如何清除它）。然后单击`cancel`将使他离开页面（不一致的行为）。
*   我可以改为将*#+++*、*#Home*、*#Project*放到堆栈上，然后我可以`back`通过检测*#+++*链接并简单地重新添加*#归入*堆栈的令牌。这将解决问题并且总体上工作得很好，除了我讨厌那些不让你在没有足够快地敲击后退按钮的情况下让你退出它们的网站......
*   最干净的解决方案是，就我的应用程序中的位置而言，如果我能以某种方式跟踪历史堆栈的长度。一开始很容易：它上面有一个项目。但是，如果我得到一系列这样的地方：*#Home*、 # *Features*、*#Home*？用户是否点击`back`返回*#Home*，即浏览器中的历史现在长度为1，或者他是否点击了*#Home*链接，即历史长度为3？我检测这一点的想法是：
    *   定义， # *Home与**#home*相同。
    **   让页面中的所有链接仅链接到大写版本的链接。*   每当您收到以大写字母开头的历史更改通知时，立即向历史添加两个项目，第一个以小写字母开头，第二个也以大写字母开头。即*#Home*变成了*#Home*、*#home*、*#Home*。*   如果您曾经收到以小写字母开头的历史记录更改，您知道用户只是单击`back`而不是链接，您只需再单击`back`两次，他就可以真正返回到前一页。*   现在您可以区分“向后”和“向前”链接，并在代码中维护准确的历史模型。*   但是，不幸的是，这有两个问题：第一，浏览器历史记录变得混乱（不是很优雅），第二，系统开始崩溃，如果用户点击`back`得足够快以至于你的应用程序没有有时间对消息做出反应。*

 *看起来这应该是一个非常普遍的问题，我希望你们中的一个人可以为我指出一个比我迄今为止的想法更有用的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:53:57.513

在您的用户可以访问#LOGIN 对话框之前，您的入口点类已执行。在本课程中，您可以记住最后已知的页面。在登录活动/演示者中，您可以添加一个浏览器历史事件处理程序，它检查最后一个已知位置是否为空。如果为 null，则将用户发送到 #HOME 页面。

您无需询问浏览器用户访问过您应用中的哪些位置。如果您愿意，您可以记住每个会话的全部历史记录：即 [#HOME, #LOGIN, #FEATURES, #HOME]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T03:33:09.357

[`window.history`](https://developer.mozilla.org/en-US/docs/DOM/window.history)有一个`length`属性可以显示当前选项卡的历史记录中有多少条目。不幸的是，它是*不可*过滤的（所以没有办法说`window.history.localURLs.length`）。

如果您几乎完全在客户端执行此操作（即部分更新、很少的整页加载、使用哈希或`history.(push|pop)State`API），那么您可能需要考虑将客户端路由框架合并到您的应用程序中以避免重新发明轮子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T00:13:25.540

你有一个怎么样`Queue<String> historyQueue;`

当页面第一次加载时，即`onModuleLoad()`初始化`Queue`. 当您捕获历史事件时，请检查它是返回还是新的历史令牌。如果是后退，则将其从队列中弹出，如果是新的，则将其添加到队列中。这样，取消按钮只是一个`token = historyQueue.pop()`并检查令牌是否为空。如果是，那么就像你说`back = cancel`的那样，做适当的事情。*

# jquery - Jquery Hide & Show IMG - 切换功能

> ID：13576849
> 
> 赞同：0
> 
> 时间：2012-11-27T03:14:55.937
> 
> 标签：jquery, html, css

我有以下 HTML 和 jQuery，但它不能正常工作：

**HTML**

```
<div class="conversationsMessage">
    <img src="images/conversations-message-control-pin.png" id="conversationsMessagePin" class="conversationsMessagePin" />
    <img src="images/conversations-message-control-pin-active.png" id="conversationsMessagePinActive" class="conversationsMessagePin" />
</div> 
```

**Javascript**

```
$('img.conversationsMessagePin').click(function() {
    alert('yep here now...');
    if ($('img#conversationsMessagePinActive', this).css('display') == 'none') {
        alert('1');
        $(this).hide();
        $('img#conversationsMessagePin', $(this).closest('div.conversationsMessage')).show();
    } else {
        alert('2');
        $(this).hide();
        $('img#conversationsMessagePinActive', $(this).closest('div.conversationsMessage')).show();
    }
}); 
```

问题是它总是显示警报“2”——例如：if 语句总是等于 false。我还尝试了以下方法 - 使用不同的 if 语句：

```
$('img.conversationsMessagePin').click(function() {
    alert('yep here now...');
    if ($('img#conversationsMessagePin', this).is(':visible')) {
        alert('1');
        $(this).hide();
        $('img#conversationsMessagePin', $(this).closest('div.conversationsMessage')).show();
    } else {
        alert('2');
        $(this).hide();
        $('img#conversationsMessagePinActive', $(this).closest('div.conversationsMessage')).show();
    }
}); 
```

目前两者都不起作用 - 有人可以给我一个关于我在这里做错了什么的提示..

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T03:19:34.210

`$('img#conversationsMessagePin', this)`- 第二个参数是上下文，你想在哪里找到东西。在这个函数中，'this' - 它是一个`$('img.conversationsMessagePin')`. 您在 img 中搜索 img 并且总是错误的。你需要这样的东西`$('img#conversationsMessagePin', $(this).closest('div.conversationsMessage'))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:21:28.897

这是检查图像`#conversationsMessagePin`是否可见的正确方法：

```
if ($('img#conversationsMessagePin').is(':visible')) 
```

尽管我认为您的代码中还有其他问题。

这是切换图像显示的一种方法：

```
$('img.conversationsMessagePin').click(function() {
    alert('yep here now...');
    if ($('img#conversationsMessagePin').is(':visible')) {
        alert('1');
        $('img#conversationsMessagePin').hide();
        $('img#conversationsMessagePinActive').show();
    } else {
        alert('2');
        $(this).hide();
        $('img#conversationsMessagePin').show();
        $('img#conversationsMessagePinActive').hide();
    }
});​ 
```

甚至更好：

```
$('.conversationsMessagePin').on('click', function() {
    $('.conversationsMessagePin').toggle();
});​ 
```

最后一个答案假设您隐藏了一个图像并开始显示一个图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T03:24:54.450

你应该使用`.`which 是一个类选择器：

```
if ($('img.conversationsMessagePin').is(':visible')) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T03:27:56.700

您正在尝试评估没有样式属性的元素的样式属性。

因此，要解决您的问题，您可以通过以下任何方式设置该属性：

1.`$('img#conversationsMessagePinActive').css('display', 'none');`在你的if语句之前

2.`$('img#conversationsMessagePinActive').hide();`在你的if语句之前

3.`<img src="images/conversations-message-control-pin-active.png" id="conversationsMessagePinActive" class="conversationsMessagePin" style="display:none;"/>`

# regex - java脚本中值的动态正则表达式

> ID：13576850
> 
> 赞同：0
> 
> 时间：2012-11-27T03:14:56.900
> 
> 标签：regex

java脚本正则表达式有问题。我希望我的正则表达式应该是动态的，并且它与带有起始字符的字符串匹配。这个问题发生在自动完成中

例子：

```
var myString = "tester Developer" ;

variable = values which typed in input fields;

var regExp = ('^' + variable + '$'); 
```

当用户输入一个字符时，这个正则表达式会发生变化。如果用户输入't'（或）'te'（或）'tes'......它返回true。如果 'td','ht','fd'（不是 myString 的起始字母）它返回 false..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:19:57.783

我认为您正在寻找的是：

```
var re = new RegExp("ab+c"); 
```

有关更详细的说明，请参见： [https ://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)

# javascript - JQuery Mobile：带有动态搜索过滤器的列表

> ID：13576853
> 
> 赞同：0
> 
> 时间：2012-11-27T03:15:15.560
> 
> 标签：javascript, css, jquery-mobile

我开始使用 JQuery Mobile 1.2.0。我遇到了问题`listviewwhen I followed the [guide](http://jquerymobile.com/demos/1.2.0/docs/about/getting-started.html) to get started.I used the sample code in my html, but the list view had a little problem, like: ![enter image description here](../Images/f64bab2599b1a7d9dc95c7c2fe4e3108.png)`

 `As you can see, the search field clips with the list view. However it runs well in JQuery website. So I'm a little lost and have no idea what is missing.

Could anyone help me?

Edited: Source code` 

```
<ul data-role="listview" data-inset="true" data-filter="true">
<li><a href="#">Acura</a></li>
<li><a href="#">Audi</a></li>
<li><a href="#">BMW</a></li>
<li><a href="#">Cadillac</a></li>
<li><a href="#">Ferrari</a></li></ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:44:00.027

[这是](http://jsfiddle.net/Gajotres/fmJhF/)一个工作示例：

```
<div data-role="page" id="some-page">
    <div data-role="header">
        <h1>Warning</h1>
    </div>
    <div data-role="content">    
        <ul data-role="listview" id="thumbs" data-filter="true">
            <li><a href="index.html">Adam Kinkaid</a></li>
            <li><a href="index.html">Alex Wickerham</a></li>
            <li><a href="index.html">Avery Johnson</a></li>
            <li><a href="index.html">Bob Cabot</a></li>
            <li><a href="index.html">Caleb Booth</a></li>
            <li><a href="index.html">Christopher Adams</a></li>
            <li><a href="index.html">Culver James</a></li>
        </ul>
    </div>
</div> 
```

# javascript - 在哪里可以找到将标题放在图像下方的自动图像标题脚本

> ID：13576856
> 
> 赞同：1
> 
> 时间：2012-11-27T03:16:00.290
> 
> 标签：javascript, image, caption

好的，我一直在寻找这个脚本很长一段时间，似乎有很多脚本将图像标题放在图像的顶部，但没有多少将它直接放在下面（就像在维基百科上一样） .

我找到了一个可以完成这项工作的工具，但它需要 MooTools 而不是 jQuery，它在 Google Chrome 中看起来很乱，甚至在 Internet Explorer 中也没有出现。但是，它在 Firefox 中看起来不错。所以我想我需要一些帮助才能找到这个。

脚本要求：

*   需要将标题直接放在图像下方，最好放在一个盒子里。
*   应该是跨浏览器兼容的。
*   相当容易设置（我对 Javascript 不太了解）。
*   根据 Alt 属性自动为图像添加标题。
*   根据图像对齐属性定位图像和标题（我使用的是所见即所得编辑器）。

我认为这涵盖了它。如果有人可以为此提供一些帮助，那将不胜感激，因为我确实花了几个小时寻找这个！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:27:58.393

我刚刚找到了解决方案！:D [http://yabtb.blogspot.co.uk/2012/02/automatic-image-caption-from-img-title.html](http://yabtb.blogspot.co.uk/2012/02/automatic-image-caption-from-img-title.html) 所有功劳归于 MS-potilas。

```
 <script src='http://code.jquery.com/jquery-latest.js' type='text/javascript'></script>
<style type='text/css'>
.caption-text { clear:both;color:#666;font-size:90%;text-align:center;margin:0 0 6px;padding:3px 0 0; }
</style>
<script type='text/javascript'>
//<![CDATA[
// Add captions to images from title tag
// by MS-potilas 2012\. See http://yabtb.blogspot.com/
function addCaption(img) {
  var ele=$(img);
  if(ele.parent().is(".caption-wrap")) return;
  var title=ele.attr('title');
  if(title=="") return;
  if(ele.parent().is("a")) ele=ele.parent();
  var align=ele.attr("align");
  if(!align) align=ele.css("float");
  if(align=="") align="none";
  var container=ele.wrap('<div style="display:inline-block" class="caption-wrap '+align+'" />').parent();
  container.css("float", align);
  container.css("width", ele.outerWidth()+"px");
  container.css("margin-left", ele.css("margin-left"));
  container.css("margin-right", ele.css("margin-right"));
  container.css("margin-bottom", ele.css("margin-bottom"));
  ele.css("margin-left", "0px");
  ele.css("margin-right", "0px");
  ele.css("margin-bottom", "0px");
  var text=container.append('<p class="caption-text">'+title+'</p>').find(".caption-text");
  text.css("width", ele.outerWidth()+"px");
}
// add captions on doc ready to img's with class "caption"
$(document).ready(function() {
  $("img.caption").each(function() {
    addCaption(this);
  });
});
//]]>
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:40:34.350

这是一些可用于实现图像标题的 jquery 插件

[http://www.jquery4u.com/plugins/30-text-captions-overlay-image-plugins/](http://www.jquery4u.com/plugins/30-text-captions-overlay-image-plugins/)

[http://iwantaneff.in/repo/plugins/effects-ui/capty/index.html](http://iwantaneff.in/repo/plugins/effects-ui/capty/index.html)

[http://www.net-kit.com/10-jquery-caption-plugins/](http://www.net-kit.com/10-jquery-caption-plugins/)

# magento - wamp magento 没有管理页面

> ID：13576857
> 
> 赞同：0
> 
> 时间：2012-11-27T03:16:01.273
> 
> 标签：magento, wamp

我有一个托管在 Bluehost 中的实时 magento 网站，我刚刚安装了 wamp 并尝试将实时网站克隆到本地 wamp 服务器。

在将一些配置从实时服务器更改为本地后，该站点可以正常运行，但是没有管理页面！如果我转到 localhost/magento/admin，它会将我带到 404 页面并抛出错误：在此服务器上找不到请求的 URL /magento/admin。

我该如何解决？非常感谢。

服务器信息：wampserver2.2e-php5.4.3-httpd2.2.22-mysql5.5.24-32b

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T04:01:49.187

似乎，您的服务器没有配置重写。

试试`http://localhost/magento/index.php/admin`- 这应该工作。之后在您的服务器中配置重写（启用 mod_rewrite），以便一切按预期工作。

@benmarks 是对的——不要使用`localhost`（即不带点的服务器名称）。浏览器将向您显示管理员登录表单，但很有可能它无法让您登录到管理面板。您最好将服务器名称更改为`magento.local`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:25:32.913

发生此错误是因为管理值可能在几个表中发生更改。请检查下表并更新。

```
 SET FOREIGN_KEY_CHECKS=0;
    UPDATE `core_store` SET store_id = 0 WHERE code='admin';
    UPDATE `core_store_group` SET group_id = 0 WHERE name='Default';
    UPDATE `core_website` SET website_id = 0 WHERE code='admin';
    UPDATE `customer_group` SET customer_group_id = 0 WHERE customer_group_code='NOT LOGGED IN';
    SET FOREIGN_KEY_CHECKS=1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-15T22:50:27.517

在 apache“httpd.conf”文件中找到

"#LoadModule version_module modules/mod_version.so"

只需删除 # 符号即可取消注释。然后制作 .htaccess.sample 文件，如 .htaccess。此文件位于 magento 根目录中。

# ruby-on-rails-3 - 显示 Mongoid 本地化字段

> ID：13576858
> 
> 赞同：1
> 
> 时间：2012-11-27T03:16:01.587
> 
> 标签：ruby-on-rails-3, mongoid

我有一个本地化的 Mongoid 字段，通过以下方式实现：

`field :name, localize: true`

它有一个`en`版本和一个`de`版本。有没有办法可以在同一个视图上输出两个本地人？HAML 中的类似内容，但显示`en`和`de`版本。

`= user.name`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T16:19:55.960

**您可以使用相应的_translations**方法一次获取和设置所有翻译。

您可以对**config.i18n.available_locales = [:de, :en]**中的每种语言执行此操作：

```
- I18n.available_locales.each do |language|
  = @user.name_translations[language.to_s] 
```

要不就：

```
= @user.name_translations['en']
= @user.name_translations['de'] 
```

它在那里描述[http://mongoid.org/en/mongoid/docs/documents.html#localized_fields](http://mongoid.org/en/mongoid/docs/documents.html#localized_fields)

# java - 如何在不缩小列表的情况下从数组列表中删除项目

> ID：13576860
> 
> 赞同：2
> 
> 时间：2012-11-27T02:44:29.593
> 
> 标签：java

我有一个案例，我使用 ArrayList 来保留一个项目列表，这些项目由它们在列表中的位置键入。其他对象通过它们的位置引用 ArrayList 项。如果我从列表中删除其中一项，我不希望列表缩小，因为这会使对列表中项目的所有其他引用无效（例如，项目 2 现在位于位置 1）。我对缩小数组列表问题的解决方案是将数组列表中的位置设为空，这样列表就不会缩小。我很好奇这是否会释放该项目以前在该位置持有的内存。

如果有更好的方法来完成这个要求，我想知道它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T03:19:42.923

鉴于您的目标是在很长一段时间内通过给定键（索引）始终如一地引用项目，您想要的实际上是 Dictionary 或 Hashtable，因此 ArrayList 对于您的目的来说是错误的数据结构，并且以这种方式使用一个确实非常危险. 只需要一个元素被某人在某处删除，然后宾果游戏所有引用都是错误的，比错误更糟糕，他们将获得不正确的数据。

为此使用正确的数据结构，使用将元素与给定键相关联的数据结构，即字典或哈希表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T03:04:24.013

简短的回答是肯定的，如果没有其他对该对象的引用，内存将被释放。尽管您可以运行 gc，但您将无法真正控制释放它的方式和时间，但这不是一个好习惯，也不能保证它会被清理。

请注意，ArrayList 不同步。您声明您有多个对象引用 ArrayList - 您需要同步以避免并发修改。

你绑定到 ArrayList 吗？顺序对您很重要，还是只是您对列表中的项目有一致的参考？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T07:28:57.680

如果`ArrayList`在 java 中像`ArrayList`在 .NET 中一样工作，那么它只是一个数组的包装器。如果内部数组太小，它将分配一个新的更大的数组并将所有项目复制到新数组中。每次内部数组变得太小时，该过程都会重复。

结论：

1.  当您设置`array[mypos] = null`.
2.  如果您继续添加新项目，内部数组将继续增长。

# css - Twitter Bootstrap navbar-fixed-bottom 自定义高度

> ID：13576866
> 
> 赞同：8
> 
> 时间：2012-11-27T03:16:52.630
> 
> 标签：css, twitter-bootstrap, navbar

我正在使用 twitter bootstrap 感兴趣。这些天我正在尝试制作自定义导航栏。我想在底部导航栏上显示一些信息，使其成为 navbar-fixed-bottom。但我无法自定义它的高度。默认高度对我来说是不够的。

如果有人遇到过这个问题并有解决方案，请分享。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T20:16:41.630

顺便说一句...您可以在此处自定义您的 Twitter Bootstrap：http: [//twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)

只需更改@navbarHeight。

但这也会改变导航栏固定顶部的高度......

* * *

编辑：网站已更改，自定义 Bootstrap 的新 URL 是[http://getbootstrap.com/customize/](http://getbootstrap.com/customize/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T05:21:28.797

导航栏应该与内容的大小相匹配（只要内容不在文档流之外）。您将需要增加正文的填充，以便内容不会消失在底部导航栏后面。如果您使用的是响应式引导程序，请将以下规则添加到您的 css 并替换 ?? 底部导航栏的高度：

```
@media (min-width: 980px){
    body {
        padding-bottom: ??px;
    }
} 
```

对于非响应式布局，在没有媒体查询的情况下声明它：

```
body {
    padding-bottom: ??px;
} 
```

# c++ - 如何将此 Python 转换为 C++ 而不会溢出？

> ID：13576870
> 
> 赞同：2
> 
> 时间：2012-11-27T03:17:56.627
> 
> 标签：c++, python, overflow

我有以下 Python 片段

```
v=(2*(a/2)+1)**2
U=int(((4*N+v)**.5-1)/4) 
```

N 在 10^12 的数量级上，变量“a”具有许多值，但其最大值也为 10^12 量级。

但是，我似乎无法用 C++ 编写此代码而不会在某处溢出某些东西，而且我有点卡住了。

编辑：是的， 2*(a/2) 是故意的，因为在 Python 中，除法与地板除法相同。有时 a 很奇怪，所以我需要将其减半，将其取底，然后将其重新乘以 2，这就是该代码的作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T03:32:58.443

```
>>> a=10**12
>>> v=(2*(a/2)+1)**2
>>> log(v,2)
79.72627427729958 
```

您计算的值需要 80 位，而 long long 只有 64。您需要一个扩展的算术包来处理它。

# django - django 压缩器创建大量缓存文件

> ID：13576871
> 
> 赞同：1
> 
> 时间：2012-11-27T03:18:21.467
> 
> 标签：django, caching, static, django-compressor

服务器位于负载均衡器后面，无论出于何种原因，压缩器在其中创建了数以万计的缓存文件`/static/CACHE/js/`，`/static/CACHE/css/`

我的 settings.py 中的唯一设置是：`COMPRESS_ENABLED = True`

我是否缺少清理缓存文件的设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T08:57:14.397

好的，我想我找到了罪魁祸首，压缩标签中包含一段模板生成的javascript代码，导致压缩器不断生成新的缓存文件。

例如。

```
{% compress js %}
    <script src="...">
    <script src="...">
    var data = {{ context_data_var }};
{% endcompress %} 
```

# c - C void 指针作为参数

> ID：13576872
> 
> 赞同：0
> 
> 时间：2012-11-27T03:18:34.350
> 
> 标签：c, pointers, void-pointers, memory-address

我试图通过地址传递一些东西。在这种情况下，一个 char 数组，但它可以是任何东西。

```
void rickyHashTableAdd(rickyHashTable *table, char *key, void *value)
{
    rickyHashTableEntry entry;
    entry.key = strdup(key);    
    entry.value = value;
    table->entries[0] = entry;
}

int rickyHashTableGet(rickyHashTable *table, char *key, void *value)
{
    value = table->entries[0].value;
}

int main (void) 
{       
    void *val;
    val = "what up";
    rickyHashTableAdd(&symbolTable, "ok", val);
    void *val2;
    rickyHashTableGet(&symbolTable, "ok", val2);
    printf("result: %s\n", val2); 
```

}

当我在 rickyHashTableGet 函数中检查“值”的值时，它是正确的，但是当我在调用函数后签入 main 时，它就不好了。它似乎没有设置为正确的内存地址。为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T03:22:45.767

```
int rickyHashTableGet(rickyHashTable *table, char *key, void *value)
{
    value = table->entries[0].value;
} 
```

这忽略了`value`通过的。设置`value`为某物，然后将其丢弃。这不可能。

```
void *val2;
rickyHashTableGet(&symbolTable, "ok", val2); 
```

这没有设置`val2`任何东西，因此将一个无意义的值传递给`rickyHashTableGet`. 这不可能。

你要：

```
int rickyHashTableGet(rickyHashTable *table, char *key, void **value)
{
    *value = table->entries[0].value;
} 
```

这需要一个指向 a 的指针`void *`并使它指向某个东西。

和：

```
void *val2;
rickyHashTableGet(&symbolTable, "ok", &val2); 
```

传递to的*地址*，所以它可以设置它的值。`val2``rickyHashTableGet`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:22:33.907

在您的 get 例程中，它应该是 void **get 作为参数和 *value = table->entries[0].value; 然后调用将使用 &val2。

# arrays - 如何在 ASSOCIATE 块中保留 Fortran 数组边界？

> ID：13576873
> 
> 赞同：5
> 
> 时间：2012-11-27T03:18:46.267
> 
> 标签：arrays, fortran

我想将关联块中的数组边界保留为：

```
integer a(2:4,2)
associate (b => a(:,1))
    print *, lbound(b), ubound(b)
end associate 
```

我期望`b`is`2`和的范围`4`，但实际上它们是`1`and `3`。这个怎么做？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T07:56:29.250

您正在关联到一个子数组，它的边界总是从 1 开始。尝试

```
 print *, lbound(a(:,1),1) 
```

AFAIK 你不能在`associate`构造中使用指针重新映射技巧。具体来说：“[如果选择器是一个数组，则关联实体是一个数组，每个维度的下界等于固有 LBOUND(selector) 的值。](http://pic.dhe.ibm.com/infocenter/compbg/v121v141/index.jsp?topic=/com.ibm.xlf141.bg.doc/language_ref/associatestmt.html) ”

但是你当然可以使用指针

```
integer,target :: a(2:4,2)

integer,pointer :: c(:)

associate (b => a(:,1))
    print *, lbound(b), ubound(b)
end associate

c(2:4) => a(:,1)
print *, lbound(c), ubound(c)

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-03T07:47:01.277

我认为保留数组边界的更优雅的方法是执行以下操作：

```
integer,target  :: a(2:4,2)
integer,pointer :: b(:)

b(lbound(a,1):) => a(:,1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-12T16:56:36.740

这是@VladimirF 答案的直接扩展。只需将指针放在标准块中，您将获得几乎与您想要的效果完全相同的效果（例如，指针的范围只是局部的，就像关联块一样）。

```
integer,target :: a(2:4,2)

block

    integer,pointer :: c(:)

    c(2:4) => a(:,1)

    print *, lbound(c), ubound(c)    ! 2 4

end block 
```

# macos - Cocoa - Mac 操作系统上的 webview 关闭和窗口关闭

> ID：13576874
> 
> 赞同：2
> 
> 时间：2012-11-27T03:18:54.210
> 
> 标签：macos, cocoa, webview, nswindow

我通过调用 createWebviewWithRequest 打开一个新的 webview 窗口。它打开得很好。但我有一个问题。

当这个 webview 窗口关闭时，我的窗口应用程序也关闭了。这是我打开新 webview 窗口的代码

```
- (WebView*)webView:(WebView *)sender createWebViewWithRequest:(NSURLRequest *)request
{
    originRect = appDelegate.window.frame;
    [[webview mainFrame]loadRequest:request];
    return webview;
}

- (void)webViewShow:(WebView *)sender
{
    // set size window app to origin rect
    [appDelegate.window setFrame:originRect display:YES];
} 
```

webview 有一个提交按钮。当用户点击此按钮时，webview 将被关闭。

当 webview 窗口关闭时，如何防止我的窗口应用程序未关闭？

你有什么想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-04T21:17:41.043

您的 NSApplication 委托（或子类）中的这段代码应该可以正常工作：

```
- (BOOL)applicationShouldTerminateAfterLastWindowClosed:(NSApplication *)theApplication
{
    return(NO);
} 
```

-它将允许您打开 0 个窗口。您可以将它与您已经提到的解决方案结合起来，但我建议将这 4 行添加到您的 NSApplication 委托/子类中，以便以正确的方式做事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T02:03:28.680

我通过处理 webview UIDelegate 的 webViewClose 解决了这个问题。在 webViewClose 中，我将窗口设置为键和前面

请参阅下面的代码：

```
- (void)webViewClose: (WebView *)wv
{
    [window makeKeyAndOrderFront:wv];
} 
```

当我调用它时，它起作用了。

# maven - Maven（部署插件）为 Nexus 创建大量日志

> ID：13576879
> 
> 赞同：2
> 
> 时间：2012-11-27T03:19:16.750
> 
> 标签：maven, logging, maven-2, nexus, maven-deploy-plugin

我们正在使用 Maven 部署插件将工件部署/上传到我们的 nexus 存储库。在这样做的同时，Maven 正在创建巨大的日志文件，它只是记录连接上传状态，如下所示：

```
[20:02:11]:  [Step 4/4] Uploaded: http://[repo-location] (4 KB at 7.5 KB/sec)
[20:02:11]:  [Step 4/4] Uploading: http://[repo-location]\server-6.03-b07-prd.war
[20:02:11]:  [Step 4/4] 2/82923 KB   
[20:02:11]:  [Step 4/4] 4/82923 KB   
[20:02:11]:  [Step 4/4] 6/82923 KB   
[20:02:11]:  [Step 4/4] 8/82923 KB   
[20:02:11]:  [Step 4/4] 10/82923 KB   
[20:02:11]:  [Step 4/4] 12/82923 KB   
[20:02:11]:  [Step 4/4] 14/82923 KB   
[20:02:11]:  [Step 4/4] 16/82923 KB   
[20:02:11]:  [Step 4/4] 18/82923 KB   
[20:02:11]:  [Step 4/4] 20/82923 KB   
[20:02:11]:  [Step 4/4] 22/82923 KB   
[20:02:11]:  [Step 4/4] 24/82923 KB   
[20:02:11]:  [Step 4/4] 26/82923 KB   
[20:02:11]:  [Step 4/4] 28/82923 KB   
[20:02:11]:  [Step 4/4] 30/82923 KB   
[20:02:11]:  [Step 4/4] 32/82923 KB   
[20:02:11]:  [Step 4/4] 34/82923 KB   
[20:02:11]:  [Step 4/4] 36/82923 KB   
[20:02:11]:  [Step 4/4] 38/82923 KB   
[20:02:11]:  [Step 4/4] 40/82923 KB   
[20:02:11]:  [Step 4/4] 42/82923 KB   
[20:02:11]:  [Step 4/4] 44/82923 KB   
[20:02:11]:  [Step 4/4] 46/82923 KB   
[20:02:11]:  [Step 4/4] 48/82923 KB   
[20:02:11]:  [Step 4/4] 50/82923 KB   
[20:02:11]:  [Step 4/4] 52/82923 KB   
[20:02:11]:  [Step 4/4] 54/82923 KB   
[20:02:11]:  [Step 4/4] 56/82923 KB   
[20:02:11]:  [Step 4/4] 58/82923 KB   
[20:02:11]:  [Step 4/4] 60/82923 KB   
[20:02:11]:  [Step 4/4] 62/82923 KB   
[20:02:11]:  [Step 4/4] 64/82923 KB   
[20:02:11]:  [Step 4/4] 66/82923 KB   
[20:02:11]:  [Step 4/4] 68/82923 KB   
[20:02:11]:  [Step 4/4] 70/82923 KB   
[20:02:11]:  [Step 4/4] 72/82923 KB   
[20:02:11]:  [Step 4/4] 74/82923 KB   
[20:02:11]:  [Step 4/4] 76/82923 KB   
[20:02:11]:  [Step 4/4] 78/82923 KB   
[20:02:11]:  [Step 4/4] 80/82923 KB 
```

这种情况一直持续下去。我怎样才能抑制这个日志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:26:32.413

您是否尝试过使用：

```
mvn --batch-mode ... 
```

# linux - 将 jar 模块添加到地理服务器时的 osgeolive 权限问题

> ID：13576882
> 
> 赞同：0
> 
> 时间：2012-11-27T03:19:48.290
> 
> 标签：linux, geoserver, osgeo

我正在尝试将 imagepyramid 插件复制到我的地理服务器中，但系统不允许我这样做。我以管理员身份登录

```
user@osgeolive:/usr/local/lib/geoserver-2.1.3/webapps/geoserver/WEB-INF/lib$ sudo chown -R atgis /usr/local/lib/geoserver-2.1.3/webapps/geoserver/WEB-INF/lib
user@osgeolive:/usr/local/lib/geoserver-2.1.3/webapps/geoserver/WEB-INF/lib$ cp /home/user/downloads/gt-imagepyramid-8.4.jar gt-imagepyramid-8.4.jar
cp: cannot create regular file `gt-imagepyramid-8.4.jar': Permission denied
user@osgeolive:/usr/local/lib/geoserver-2.1.3/webapps/geoserver/WEB-INF/lib$ mkdir test
mkdir: cannot create directory `test': Permission denied
user@osgeolive:/usr/local/lib/geoserver-2.1.3/webapps/geoserver/WEB-INF/lib$ cd ..
user@osgeolive:/usr/local/lib/geoserver-2.1.3/webapps/geoserver/WEB-INF$ chmod 777 lib
chmod: changing permissions of `lib': Operation not permitted
user@osgeolive:/usr/local/lib/geoserver-2.1.3/webapps/geoserver/WEB-INF$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:16:49.730

尝试这个 ：

1.  停止地理服务器服务。
2.  检查您是否有权写入地理服务器文件夹。

    $ ls -all /usr/local/lib/geoserver-2.1.3/webapps/

如果你没有写权限：

```
$ chmod 777 /usr/local/lib/geoserver-2.1.3/webapps/geoserver 
```

我希望这可以帮助你。

# python - 更改 python 和 ruby 的默认目录

> ID：13576887
> 
> 赞同：1
> 
> 时间：2012-11-27T03:20:21.320
> 
> 标签：python, ruby, terminal

嘿 :) 我正在使用带有 Mountain Lion 的 Mac，并从自制软件中安装了 Ruby 1.9.3 和 Python 2.7.3。但是，`which python`并`which ruby`返回它们分别位于 /usr/local/bin/ *_* _ 中。我希望他们从 /usr/local/Cellar/python 或 /usr/local/Cellar/ruby 中读取。我如何改变他们的路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:48:20.550

似乎你应该只修改你`$PATH`的 include `/usr/local/Cellar`before `/usr/local/bin`。你的 shell 将使用它找到的第一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:43:59.073

我不知道在 mac 上，但在 linux 上，它们被设置为 /usr/local/bin/* 的链接

如果您想更改符号链接，您可以运行 `ln -s /user/local/Celler/python /usr/local/bin/python`创建新符号链接的命令。

这是否适用于 OSX 我无法确认。

您可能想尝试的另一种方法是直接调用自制版本，而不是让系统上的所有内容都使用它们。或者只是建立一个到其他东西的符号链接，比如`ln -s /user/local/Celler/python /usr/local/bin/pythonH`

# algorithm - 如何将此顺序迭代二进制搜索转换为并行算法？

> ID：13576888
> 
> 赞同：0
> 
> 时间：2012-11-27T03:20:35.963
> 
> 标签：algorithm, parallel-processing, sequential

我有这个数组（A），其中有 n 个元素，这些元素保证被排序，我需要在并行系统中对它们执行二进制搜索。我从制作这个二分搜索算法开始。它是迭代的，因为我还不确定如何将递归合并到并行处理中。

```
/* Looking for element k in array A of length n */
min = 0;
max = n - 1;
while(min <= max)
{
    midpoint = min + ((max-min)/2); //index
    if(A[midpoint] > k) //discard upper half
        max = midpoint - 1;
    else if(A[midpoint] < k) //discard lower half
        min = midpoint + 1;
    else
        return midpoint; //Found k, return index
}
return -1; //not found 
```

在并行算法中，我可以访问 p 个处理器，它是一个允许并发读取但独占写入的系统。真正的问题是我仍在按顺序思考。也就是说，我似乎看不出有任何方法可以使用多个处理器来完成，因为您不能在不首先知道您在中点值方面的位置的情况下“丢弃”阵列中不需要的部分。它似乎天生是顺序的。

伪代码：

```
Global:  //Variables accessible by all processors
  index; //index of k
  p;     //number of processors
  i;     //the i^th processor
  n;     //number elements in array A
  A[0, 1, ... , (n-1)];
local:   //Variables accessible by only the owning processor
         //Not sure what I need yet
Begin
  Spawn(P1, P2 . . . P(p-1)); //"create" the p processors
  for all P where 0 <= i <= (p-1) do //each processor does the following code
    //I'm stuck here
  endfor
End 
```

最后一件事：我看到一个用户发布的问题，询问是否有办法通过并行处理进行二进制搜索。这个问题没有真正决定性的答案，因为两个相关的答案都获得了 1 票。一个人说这实际上是不可能的，因为这是一个循序渐进的过程，而另一个人似乎非常有信心它会很容易实施。你觉得呢？你有没有什么想法？

[上一个并行二分搜索问题](https://stackoverflow.com/questions/8423873/parallel-binary-search-would-be-silly-right)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T03:42:42.783

虽然在技术上可以使二进制搜索并行运行，但我不建议这样做。

并行运行的最佳算法是那些具有彼此分离的离散元素并且可以同时运行的算法。例如，将 3d 图形渲染到视频中是很好的，因为每一帧都是独立的，并且可以提供给单独的处理器。

您可以将树分成多个段，以便每个处理器都有工作要做，但考虑到二进制搜索的性质，只有许多处理器中的一个会找到答案，因此浪费了所有其他处理器的计算工作在他们的段中有搜索元素。这甚至没有考虑线程的开销。

现在，如果另一方面您要对单个二叉树进行一系列搜索，那将是另一回事。您可以有一个作业队列，您的所有线程都从中提供，执行二进制搜索并响应。这样，您可以并行运行许多搜索，而不是搜索的一部分。如果您希望进一步优化它，您还可以实现缓存。

简而言之，不要尝试跨处理器拆分单独的二进制搜索，因为除了浪费处理器时间之外，您不会获得任何收益。但是，如果您正在执行许多搜索，则可以通过并行运行许多搜索来获得收益。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T03:44:52.017

与并行解决的所有问题一样……这在很大程度上取决于您的数据大小、消息/共享内存的速度以及您的要求。

写锁有多快，同步有多快？如果它们足够快（例如，在单台机器上使用共享内存）并且您的数据量足够大，那么特定类型的“拆分并运行”技术可能会起作用。你可以这样想：

二进制搜索是一种分而治之的方法，您在每次迭代后更新您正在检查的范围 - 每次迭代时范围减半。与其将当前范围划分为 2，不如将其划分为多个`p`部分，其中每个进程负责其中一个部分；在每次迭代中，“获胜”部分（目标值在其范围内的部分）将要搜索的新范围写入内存，并在开始下一次迭代之前同步进程。如果您有足够的数据，那么从将数据减半到`p`每次都减少数据可能是一个胜利。你会从 $O(log_2(x))$ 到 $O(log_p(x))$。

这种方法只有在写入和同步足够快的情况下才有效，因为它依赖于*大量*的写入和同步。如果您在集群中执行此操作，这些将变得昂贵。如果进程之间的通信很困难，也许你能做的最好的就是你链接到的另一篇文章中建议的“拆分并运行”。具体来说，获取`p`排序列表的每个元素，并将其放在不同的节点上。然后，当请求进来时，在所有节点上进行二进制搜索。如果数组中的值是唯一的，则只有一个节点会找到答案，并且该节点可以返回结果。这是一个相对较差的并行性，因为你重复了很多工作——你忽略了*之间存在的顺序*不同节点上的数组。但它会让你从 $O(log_2(x))$ 加速到 $O(log_2(x/p))$。

在实践中，很难提前知道哪种方法在您的硬件上运行良好。通常，您必须在确保所有进程始终处于活动状态和确保不会因通信开销而浪费太多时间之间取得经验平衡。

# asp.net - 在自定义验证器中访问嵌套控件

> ID：13576889
> 
> 赞同：0
> 
> 时间：2012-11-27T03:20:46.210
> 
> 标签：asp.net

如何从自定义验证器访问嵌套在页面中的多个级别的 asp.net 控件？

具体来说，我正在生成位于占位符内的下拉列表，该占位符位于中继器内，该中继器位于另一个中继器内，该中继器位于另一个占位符内。

我需要访问所有下拉框的选定值以相互比较。

我当前的解决方案是遍历每个控件内的所有控件，直到我深入到足以访问下拉列表的：

```
 For Each g As Control In sender.Parent.Controls
        If g.GetType().ToString.Equals("System.Web.UI.WebControls.Repeater") Then
            For Each k As Control In g.Controls
                If k.GetType().ToString.Equals("System.Web.UI.WebControls.RepeaterItem") Then
                    For Each l As Control In k.Controls
                        If l.GetType().ToString.Equals("System.Web.UI.WebControls.Repeater") Then
                            For Each p As Control In l.Controls
                                If p.GetType().ToString.Equals("System.Web.UI.WebControls.RepeaterItem") Then
                                    For Each n As Control In p.Controls
                                        If n.GetType().ToString.Equals("System.Web.UI.WebControls.PlaceHolder") Then
                                            For Each c As Control In n.Controls
                                                If c.GetType().ToString.Equals("System.Web.UI.WebControls.DropDownList") Then

                                                'Add the dropdownlist to an array so that I can use it after all drop down lists have been added for validation. 
```

这似乎完全是在浪费资源。有没有更好的方法从自定义验证器访问这些控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T03:23:56.100

我相信您可以使用`$`连接容器名称来访问嵌套控件；像这样的东西：

```
ControlToValidate="panel1$usercontrol1$otherusercontrol$textbox1" 
```

这确实会导致验证器执行内部`FindControl()`调用，这有点昂贵，因此您应该谨慎使用这种方法。

一般来说，访问其他容器内的深层嵌套控件并不是一个好主意。您应该将这些控件视为页面/控件的私有成员，而不是通过这种方式访问​​它们。*仅当您真的非常必须*时才使用上述方法。

**编辑**：这可能不是完美的解决方案，但我会这样做。创建一个新的 DropDownListX 控件（从 DropDownList 派生），该控件抓取页面并检查页面是否实现了您创建的新自定义接口。此接口可用于向页面注册控件，然后您的验证器可以通过此列表并验证每个注册的控件。就像是：

```
interface IValidationProvider
{
    void RegisterForValidation ( Control oCtrl );
} 
```

你的页面应该实现这个接口。然后在您的新 DropDownListX 控件中：

```
protected override void OnLoad ( EventArgs e )
{
    IValidationProvider oPage = Page as IValidationProvider;

    if ( oPage != null )
        oPage.RegisterForValidation ( this );
} 
```

然后在页面中，当验证发生时，您可以通过验证列表中的控件列表，并对其进行逐个验证。您的自定义验证器不会有单个`ControlToValidate`控件名称，但这似乎适合您，因为您有 1 个验证器可以验证嵌套中继器内的多个控件。

此解决方案使您能够完全跳过当前的深度循环 - 如果您有一个需要验证的控件，它将自行注册，否则页面中的列表将为空，无需检查任何内容。这也避免了对控件名称进行字符串比较，因为不需要搜索控件——它们在需要时注册自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:42:58.713

您是否尝试过以递归方式获得控制权？

```
private Control FindControlRecursive(Control root, string id) 
{ 
    if (root.ID == id)
    { 
        return root; 
    } 

    foreach (Control c in root.Controls) 
    { 
        Control t = FindControlRecursive(c, id); 
        if (t != null) 
        { 
            return t; 
        } 
    } 

    return null; 
} 
```

# objective-c - xCode 预期标识符

> ID：13576892
> 
> 赞同：-4
> 
> 时间：2012-11-27T03:21:14.697
> 
> 标签：objective-c, ios, xcode

```
_options = [[NSArray arrayWithObjects:
             [NSDictionary dictionaryWithObjectsAndKeys:[UIImage imageNamed:@"facebook.png"],@"img",@"Facebook",@"text", nil],
             [NSDictionary dictionaryWithObjectsAndKeys:[UIImage imageNamed:@"twitter.png"],@"img",@"Twitter",@"text", nil], 
             [NSDictionary dictionaryWithObjectsAndKeys:[UIImage imageNamed:@"tumblr.png"],@"img",@"Tumblr",@"text", nil], 
             [NSDictionary dictionaryWithObjectsAndKeys:[UIImage imageNamed:@"google-plus.png"],@"img",@"Google+",@"text", nil], 
             [NSDictionary dictionaryWithObjectsAndKeys:[UIImage imageNamed:@"linkedin.png"],@"img",@"LinkedIn",@"text", nil], 
             [NSDictionary dictionaryWithObjectsAndKeys:[UIImage imageNamed:@"pinterest.png"],@"img",@"Pinterest",@"text", nil], 
             [NSDictionary dictionaryWithObjectsAndKeys:[UIImage imageNamed:@"dribbble.png"],@"img",@"Dribbble",@"text", nil], 
             [NSDictionary dictionaryWithObjectsAndKeys:[UIImage imageNamed:@"deviant-art.png"],@"img",@"deviantArt",@"text", nil], 
             nil]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T03:23:50.750

你把两个方括号放在你只需要一个的地方：

```
_options = [NSArray arrayWithObjects: // And so on...
//        ^^^ You need only one square bracket here 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T03:24:42.090

错误消息“预期标识符”表示您的方括号级别不正确。例如：

```
[7]; 
```

这是非法的，因为它周围有一组额外的方括号。这条线是合法的（但没用）：

```
7; 
```

# dictionary - 一些地图在运行 hadoop 作业时会丢失用户定义的计数器

> ID：13576894
> 
> 赞同：1
> 
> 时间：2012-11-27T03:21:42.120
> 
> 标签：dictionary, hadoop, counter, user-defined

我有一份 Hadoop 工作，并自己定义了几个计数器。当我运行这个作业（地图数量 > 500）时，我发现一些地图任务丢失了用户定义的计数器，但 Hadoop 内置计数器（如地图输入记录）工作正常。该问题在某些 DataNode 上随机发生。这令人困惑。那么问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T23:43:54.007

用 try-catch 块包装你的 map() 方法逻辑，并在 catch 块中增加另一个以异常消息命名的计数器：

```
@Override
public void map(ByteBuffer key,SortedMap<ByteBuffer, IColumn> value, Context context)
        throws IOException, InterruptedException {

    try {

        //  Map logic goes here.

        context.getCounter("Custom","Counter").increment(1);

    } catch (Exception e) {
        context.getCounter("Exception",e.getMessage()).increment(1);
    }
    // End map logic 

} 
```

您的行处理可能会引发异常，从而绕过增量逻辑。

# spring - getBean() 的 AOP 通配符没有被触发

> ID：13576899
> 
> 赞同：0
> 
> 时间：2012-11-27T03:22:09.550
> 
> 标签：spring, aop, spring-aop

我有一个从应用程序上下文中获得的 ShapeService。shapeService 被注入了一个圆形和三角形。我的 shapeService 中有 getCircle() 和 getTriangle()。我还有一个建议，它配置为在调用 getter 时触发。指定的切入点表达式，使其适用于所有 getter。因此，每当调用 getCircle() 或 getTriangle() 时，都会触发通知。但我想知道为什么 applicationContext.getBean() 没有触发它。这也是一个满足切入点表达式的getter。谁能帮我弄清楚为什么它没有被触发。

```
@Aspect
@Component
    public class LoggingAspect {

    @Before("allGetters()")
    public void loggingAdvice(JoinPoint joinPoint){
        System.out.println(joinPoint.getTarget());
    }

    @Pointcut("execution(public * get*(..))")
    public void allGetters(){}
} 
```

这是获取 bean 的主要类。只有 Shapeservice 的 getter 和 circle 的 getter 被触发，而不是 appllicationContext 的 getBean

```
public class AopMain {
        public static void main(String[] args) {
        ApplicationContext ctx = new ClassPathXmlApplicationContext("spring-config.xml");
        ShapeService shapeService = ctx.getBean("shapeService", ShapeService.class);
        System.out.println(shapeService.getCircle().getName());

    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:44:35.173

应用程序上下文不是 Spring 组件（它是管理其他组件的容器），因此如果您使用 Spring AOP，它不会自行编织。如果您使用 AspectJ，您可以拦截所有 getter，但即便如此，也只能使用加载时间编织或重新编译类路径上的所有 jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:22:55.893

正如@Dave 所暗示的那样，要启用方面，您必须在编译时（[CTW](http://www.eclipse.org/aspectj/doc/next/devguide/ajc-ref.html)）或类加载时（[LTW](http://www.eclipse.org/aspectj/doc/next/devguide/ltw.html)）“编织”它们。

为了从 AspectJ+Spring 的魔力中受益，可以考虑使用例如 LTW，它非常灵活（您甚至可以将方面从 3rd-party jar 中编织到类中而无需修改它们）。

从阅读[Spring 文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/aop.html#aop-aj-ltw)开始，这是一个很好的切入点。基本上：

*   `<context:load-time-weaver/>`在你的 Spring 配置中添加一个元素
*   在你的类路径中创建一个`META-INF/aop.xml`文件：

    ```
    <!DOCTYPE aspectj PUBLIC "-//AspectJ//DTD//EN" "http://www.eclipse.org/aspectj/dtd/aspectj.dtd">
    <aspectj>
      <weaver>
        <!-- include your application-specific packages/classes -->
        <!-- Nota: you HAVE TO include your aspect class(es) too! -->
        <include within="foo.ShapeService"/>
        <include within="foo.LoggingAspect"/>
      </weaver>
      <aspects>
        <!-- weave in your aspect(s) -->        
        <aspect name="foo.LoggingAspect"/>
      </aspects>
    </aspectj> 
    ```

*   使用编织 java 代理运行：`java -javaagent:/path/to/lib/spring-instrument.jar foo.Main`

# html - Perl 中的类似 Markdown 的可扩展模块？

> ID：13576901
> 
> 赞同：2
> 
> 时间：2012-11-27T03:22:21.967
> 
> 标签：html, perl, markdown, perl-module, dancer

我正在`Dancer`用 perl 构建一个应用程序。

我的应用程序侦听 POST 事件，将它们存储在数据库中，进行一些计算，然后可能 POST 到另一个 http 端点（它在 text/html 中呈现事件）；在我用来进行更新的模块中，我使用 HTML 格式，例如：

```
$helper->post_update({
    text => 'some text that is escaped',
    main_text => 'unescaped text, <i>with html</i>',
    ...
}); 
```

是否有一个 perl 模块可以让我获得可扩展的、类似降价的支持？

例如：

代替

`$newtext = "<b>this is bold</b> <i>this is italic</i> <span class="something">@evalutated_with_a_custom_rule</span> ... etc";`

和

`$newtext = Markdown::Module->run_rules("*this is bold* _this is italic_ @evalutated_with_a_custom_rule ... etc");`

...为了进一步分离我的模型和视图。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:57:45.183

我相信有很多方法可以做到这一点，例如：

1.  使用[Template::Toolkit](https://metacpan.org/module/Template%3a%3aToolkit)将您的文本替换为从 markdown 模板文件提供的 main_text。

2.  使用[Text::Markdown](https://metacpan.org/module/Text%3a%3aMarkdown)将生成的 Markdown 转换为 HTML，然后您可以将其返回给客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:57:57.733

查看[WikiText 模块](https://metacpan.org/pod/WikiText)及其子模块。例如

```
use WikiText::Socialtext;
my $wikitext = '*this is bold* _this is italic_ @evalutated_with_a_custom_rule ... etc';
my $html = WikiText::Socialtext->new($wikitext)->to_html; 
```

……会产生：

```
<p><strong>this is bold</strong> <em>this is italic</em> @evalutated_with_a_custom_rule</p> 
```

顺便说一句，如果`@`前面的`evaluated_with_a_custom_role`意思是标记，则必须使用前面的反斜杠对其进行转义或使用单引号。在双引号字符串中 perl 将插入数组的内容`@evalutated_with_a_custom_rule`。

# variable-assignment - 线性瓶颈分配（LBAP）的代码或伪代码？

> ID：13576902
> 
> 赞同：4
> 
> 时间：2012-11-27T03:22:31.767
> 
> 标签：variable-assignment, graph-theory, linear-programming

我正在构建一个机器人模拟器，其中有 n 个机器人需要去 n 个不同的位置。所有机器人同时开始移动。当机器人到达指定位置时，它会停止移动。所有机器人到达其位置所需的总时间由给定机器人到达其指定位置所需的最长长度决定。我想通过巧妙地将目的地分配给机器人来最小化这个最长的长度。

显然这个问题是[“线性瓶颈分配问题”](https://en.wikipedia.org/wiki/Linear_bottleneck_assignment_problem)。

我找不到任何代码来解决这个问题。任何人都有任何伪代码或实际代码（任何语言都可以，首选 Ruby/Java）来有效地解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T03:56:42.100

阈值算法是解决线性瓶颈分配问题的标准算法之一。快速搜索并没有找到我可以在此处轻松复制和粘贴的伪代码，但伪代码由 Rainer Burkard、Mauro Dell'Amico 和 Silvano Martello在*Assignment Problems的第 175 页给出。*这是[相关页面](http://books.google.com/books?id=nHIzbApLOr0C&pg=PA175&dq=%22threshold%20algorithm%20for%20the%20lbap%22&hl=en&sa=X&ei=8Di0UPXUBOquiALZ04GQBg&ved=0CDAQ6AEwAA#v=onepage&q=%22threshold%20algorithm%20for%20the%20lbap%22&f=false)的 Google 图书链接。几页后，他们给出了另一种利用对偶性的算法，但我对那个算法不太熟悉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T20:11:17.503

LBAP（线性瓶颈分配）只是与您的案例相关的整个**分配和路径路由问题**系列中的一个特定子类。

**在决定为您的 n 个机器人实施MinMax**路由算法时，您有很多选择。这就是我要做的：我将从**Dijkstra 最短路径算法的最简单实现开始。**

Dijkstra的[wikipedia 页面](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)有一个很好的可视化示例，但它们的伪代码看起来比它需要的更令人生畏。它甚至链接到[机器人运动规划](http://en.wikipedia.org/wiki/Motion_planning)，尽管从您的问题来看，您似乎正在寻找要实施的路径算法。

**[根据 OP 的澄清更新。最小最大]**

Dijkstra 仍然有效，但您需要执行一些额外的步骤。以下是基本策略：

```
For each robot r = 1 to n
   calculate the shortest time-path for r from source of r to sink of r - (suggest starting with Dijkstra's) [if you are assuming constant speeds, then distance and length become equivalent]
Next r 
```

**MinMax 模式：**

1.  按所用时间对所有路径（时间）进行排序并取最长的路径。（这是您的理论最小最大时间。） - 我们称之为`t_max`
2.  其他机器人 r 有时间`"slack"`-`t_max` 减 `time_r`
3.  拿每一对机器人，看看它们的路径是否冲突。
    *   如果没有冲突，你就完成了。
    *   如果是冲突，那么您必须在松弛时间内重新路由（冲突节点/边缘避免）。（最简单的重新路由是等到冲突的机器人清除边缘或交叉点。）
4.  如果你能够在 内路由`slack`，你就完成了。否则，将 t_max 更新为最长（重新路由）路径。

以下是您应该能够使用的一些 Dijkstra 代码示例。（网络搜索将产生更多。）

1.  [http://cs.fit.edu/~ryan/java/programs/graph/Dijkstra-java.html（Java](http://cs.fit.edu/~ryan/java/programs/graph/Dijkstra-java.html)）
2.  [这是Ruby的要点](https://gist.github.com/1001947)

**补充说明：**

1.  你不必局限于 Dijkstra 的方法。您可以换出并尝试找到其他路由算法。尝试一些路由算法。
2.  记得检查冲突。（即两个机器人同时在同一个节点t） 无冲突路由的最基本实现涉及一些优先规则，一个机器人要等到节点清除后再继续。

希望有帮助。

# d3.js - d3 仅整数上的刻度线

> ID：13576906
> 
> 赞同：32
> 
> 时间：2012-11-27T03:22:41.557
> 
> 标签：d3.js, axis

我有一个 d3 条形图，其值范围为 0-3。我希望 y 轴只显示整数值，我可以通过

```
var yAxis = d3.svg.axis().scale(y).orient("right").tickFormat(d3.format("d")); 
```

但是，非整数标记处仍有刻度线。设置刻度格式只会隐藏这些标签。我可以显式设置刻度数或刻度值，但我想做的是能够指定刻度线仅出现在整数值处。那可能吗？

![在此处输入图像描述](../Images/a8cf9b2e78988f3bfbd4b20ffb36c8ad.png)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2019-06-29T22:22:32.690

**正确的解决方案**是使用[`.ticks()`](https://github.com/d3/d3-scale#continuous_ticks)方法检索刻度，过滤它们以仅保留整数并将它们传递给[`.tickValues()`](https://github.com/d3/d3-axis#axis_tickValues)：

```
const yAxisTicks = yScale.ticks()
    .filter(tick => Number.isInteger(tick));
const yAxis = d3.axisLeft(yScale)
    .tickValues(yAxisTicks)
    .tickFormat(d3.format('d')); 
```

* * *

为了完整起见，这里解释**了为什么其他解决方案不好**：

[@BoomShakalaka 解决方案](https://stackoverflow.com/a/13577829/5812238)使用`.tickSubdivide()`不再存在的方法。

[@cssndrx 和 @kris 解决方案](https://stackoverflow.com/a/18063083/5812238)强制您指定刻度数，因此它在一般情况下不起作用。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-27T05:19:02.740

您可以添加 .ticks(4) 和 .tickSubdivide(0) ，如下所示：

```
var yAxis = d3.svg.axis()
    .scale(y)
    .orient("right")
    .ticks(4)
.tickFormat(d3.format("d"))
    .tickSubdivide(0); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-05T16:26:03.657

您可以以编程方式将滴答数设置为`data.length - 1`（这也解决了您在少量滴答时遇到的问题）

```
var yAxis = d3.svg.axis()
    .scale(y)
    .orient("right")
    .tickFormat(d3.format("d"))
    .ticks(data.length - 1) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-02T21:44:02.417

从所有列出的解决方案中，我无法摆脱刻度线。

```
.xAxis().ticks(4)
.tickFormat(d3.format("d")); 
```

删除标签，但不删除蜱虫。

所以我建议对 ticks() 应用一个阈值。如果小于 4，则将其设置为限制本身 (0,1,2,3)。完成：

```
.on("preRedraw", function(chart) {
    var maxTick = chart.group().top(1)[0].value;
    if (maxTick < 4) {
      chart.xAxis().ticks(maxTick);
    } else {
      chart.xAxis().ticks(4);
    } 
```

});

jsfiddle 可从[https://jsfiddle.net/PBrockmann/k7qnw3oj/获得](https://jsfiddle.net/PBrockmann/k7qnw3oj/)

让我知道是否有更简单的解决方案。问候

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-22T07:36:46.000

使用此 TIP 在动态图表上进行这项工作（页面上的 1 个或多个图表）

> 那成功了。我改为 Math.min(maxHeight+1,yAxis.ticks()) 所以如果图形高度小于刻度数，它会减少刻度数。– Jeff Storey 2012 年 11 月 28 日在 2:47

```
 // It is either 10 or Maximum Chart height + 1 

        var graphValues = selection.data()[0].map(function(obj) {
            return obj['count'];
        }).compact();  

        Array.prototype.maxValArray = function() {
          return Math.max.apply(null, this);
        };

        var maxValue = graphValues.maxValArray();

        yAxis.ticks(Math.min(maxValue + 1, 10)) 
```

# drag-and-drop - Extjs 4.1 将treeview节点拖放到网格中以动态添加列

> ID：13576909
> 
> 赞同：1
> 
> 时间：2012-11-27T03:23:03.990
> 
> 标签：drag-and-drop, extjs4.1

我有一个包含可用列标题作为树节点的树视图。我也有一个网格。我需要做的是将其中一个树节点拖到网格的列标题部分以动态添加新列。我的树视图和网格都已正确配置和呈现。

我的树视图配置如下：

```
 var tree = Ext.create('Ext.tree.Panel', {
    viewConfig: {
        plugins: {
            ptype: 'treeviewdragdrop',
            dragGroup: 'myDDGroup'
        }
    ... 
```

我的网格配置如下：

```
 var grid = Ext.create('Ext.grid.Panel', {
    viewConfig: {
        plugins: {
            ptype: 'gridviewdragdrop',
            dropGroup: 'myDDGroup'
        }
    ... 
```

如果我想做的是将树节点拖到网格中以添加新行，我会说这非常有效。相反，正如我所提到的，我想要做的是将一个节点拖到列标题部分以添加一个新列（而不是一行）。

我在 ExtJS 源代码 (ViewDropZone.js) 中看到了处理 OnNodeDrop 事件的实现，看起来它按设计工作。我想我可以编写自己的 OnNodeDrop 事件处理程序来完成我需要的行为。在我走这条路之前，我想看看是否有人已经实施了类似的解决方案或知道替代/更好的解决方案。

# python - UnboundLocalError：赋值前引用的局部变量

> ID：13576911
> 
> 赞同：2
> 
> 时间：2012-11-27T03:23:07.327
> 
> 标签：python, google-app-engine

我正在尝试创建一个简单的表单，用户可以在其中插入信息。如果用户单击发送按钮，将显示信息。

这是views.py中的代码。

```
from kay.utils import render_to_response
from myapp.form import ContactForm
from myapp.models import NhanThu
# Create your views here.
@login_required
def index(request):
    form_test = ContactForm()
    if request.method =="POST" and form_test.validate(request.form):
        NhanthuModelbien = NhanThu(subject=ContactForm['subject'])
        NhanthuModelbien.put()
        return redirect(url_for('myapp/index'))

    query = NhanthuModelbien.all().order('-created')
    inthuwhat = query.fetch(20)    
    return render_to_response('myapp/index.html',
                              {'form2': form_test.as_widget(),'inthura': inthuwhat}) 
```

我总是收到这个错误“UnboundLocalError：分配前引用的局部变量'NhanthuModelbien'”。有人可以指出这里有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T03:26:50.237

如果条件`request.method =="POST" and form_test.validate(request.form)`为假，则变量不会被初始化。然后在初始化查询时尝试使用它`query = NhanthuModelbien.all().order('-created')`。

只需声明它并将其初始化为`if`.

# breeze - 本地查询排序问题

> ID：13576912
> 
> 赞同：1
> 
> 时间：2012-11-27T03:23:18.100
> 
> 标签：breeze

我遇到了排序和`executeQueryLocally()`.

**一些例子：**

*   对名称为“Group”的属性进行排序**确实**有效：`.orderBy("Group");`
*   对名称为“Name”的属性进行排序**不起作用**：`.orderBy("Name");`在这种情况下，不会引发错误，但不会对数组进行排序。
*   对“组和名称”进行排序**确实**有效：`.orderBy("Group, Name");`
*   使用“desc”对上述任何内容进行排序**都不起作用**：`.orderBy("Group desc");` 在这种情况下，会引发如下错误：`Object Group1 has no method 'getProperty'`

不幸的是，我没有机会调试比较器以查看发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:44:19.793

具有“desc”资格的“orderBy”子句现在已在 v 0.73.5 中修复，可通过 nuget 或微风网站获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:05:02.927

我在做*微风*产品。

我无法重现您的第一个错误

*   对名称为“Name”的属性进行排序不起作用： .orderBy("Name"); 在这种情况下，不会引发错误，但数组未排序。

但我能够重现您的第二个错误。

*   使用“desc”对上述任何内容进行排序都不起作用： .orderBy("Group desc"); 在这种情况下，会引发如下错误： Object Group1 has no method 'getProperty'

我会在明天的某个时候尝试解决这个问题。

如果你能给我更多关于第一个错误的背景信息，我也会再看看它。

和...感谢您的反馈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T05:23:20.140

group 是关键字，必须用 [] 或 '' 包裹

# php - 表有问题

> ID：13576917
> 
> 赞同：0
> 
> 时间：2012-11-27T03:23:59.770
> 
> 标签：php

```
<?php

$con = mysql_connect("localhost","root","");

if (!$con)

{

die('Could Not Connect: '. mysql_error());

}
// This block grabs the whole list for viewing

$bilboard_list = "";
$bilboard_list0 = "";
$bilboard_list1 = "";
$bilboard_list2 = "";
$bilboard_list3 = "";
$bilboard_list4 = "";
$bilboard_list5 = "";
$bilboard_list6 = "";
$bilboard_list7 = "";
$bilboard_list8 = "";
$bilboard_list9 = "";
$bilboard_list10 = "";
$bilboard_list11 = "";
$bilboard_list12 = "";

$sql = mysql_query("SELECT * FROM maklumat_peribadi ORDER BY id");

$bilboardCount = mysql_num_rows($sql); // count the output amount

if ($bilboardCount > 0) {
while($row = mysql_fetch_array($sql)){

$id = $row["id"];
$nama_penuh = $row["nama_penuh"];
$no_ic = $row["no_ic"];
$alamat_ttp = $row["alamat_ttp"];
$no_rumah = $row["no_rumah"];
$no_bimbit = $row["no_bimbit"];
$jantina = $row["jantina"];
$tmpt_lhir = $row["tmpt_lhir"];
$email = $row["email"];
$agama = $row["agama"];
$bangsa = $row["bangsa"];
$negara = $row["negara"];
$nama_penjaga = $row["nama_penjaga"];
$nama_ibu = $row["nama_ibu"];

//for show

$bilboard_list .= "$No<br>";
$bilboard_list0 .= "$Nama<br>";
$bilboard_list1 .= "$No Kad Pengenalan<br>";
$bilboard_list2 .= "$Alamat<br>";
$bilboard_list3 .= "$No Telefon Rumah<br>";
$bilboard_list4 .= "$No Telefon Bimbit<br>";
$bilboard_list5 .= "$Jantina<br>";
$bilboard_list6 .= "$Tempat Lahir<br>";
$bilboard_list7 .= "$Email<br>";
$bilboard_list8 .= "$Agama<br>";
$bilboard_list9 .= "$Bangsa<br>";
$bilboard_list10 .= "$Warganegara<br>";
$bilboard_list11.= "$Nama Penjaga/Bapa<br>";
$bilboard_list12 .= "$Nama Ibu<br>";

}
}
 ?>

<html>
<head>
<link rel="stylesheet" href="2col_leftNav.css" type="text/css" />
<style type="text/css">
<!--
.style1 {
    font-size: 12px;
    font-weight: bold;
}
-->
</style>
</head>

 <body>
<div id="masthead">
  <h1 id="siteName">Admin Site</h1>
  <div id="globalNav"> <a href="adminpage.php"> Halaman Utama</a> |   <a href="test.php">Maklumat Peribadi Pelajar | <a href="adminpage.php">Senarai Pelajar Mengikut Kursus  |  <a href="logout.php">Logout</a></div>
</div>
<table width="1000px" border="1" align="center">

      <tr>

        <td width="auto"><span class="style1"><strong>NO<strong></span></td>
        <td width="auto"><span class="style1"><strong>NAMA</strong></td>
        <td width="auto"><span class="style1"><strong>NO KAD PENGENALAN</strong></td>
        <td width="auto"><span class="style1"><strong>ALAMAT</strong></td>
        <td width="auto"><span class="style1"><strong>NO TELEFON RUMAH</strong></td>\
        <td width="auto"><span class="style1"><strong>NO TELEFON BIMBIT</strong></td>
        <td width="auto"><span class="style1"><strong>JANTINA</strong></td>
        <td width="auto"><span class="style1"><strong>TEMPAT LAHIR</strong></td>
        <td width="auto"><span class="style1"><strong>EMAIL</strong></td>\
        <td width="auto"><span class="style1"><strong>AGAMA</strong></td>
        <td width="auto"><span class="style1"><strong>BANGSA</strong></td>
        <td width="auto"><span class="style1"><strong>WARGANEGARA</strong></td>
        <td width="auto"><span class="style1"><strong>NAMA PENJAGA/BAPA</strong></td>
        <td width="auto"><span class="style1"><strong>NAMA IBU</strong></td>

      </tr>

      <tr>

        <td><?php echo $bilboard_list; ?></td>
        <td><?php echo $bilboard_list0; ?></td>
        <td><?php echo $bilboard_list1; ?></td>
        <td><?php echo $bilboard_list2; ?></td>
        <td><?php echo $bilboard_list3 ?></td>
        <td><?php echo $bilboard_list4; ?></td>
        <td><?php echo $bilboard_list5; ?></td>
        <td><?php echo $bilboard_list6; ?></td>
        <td><?php echo $bilboard_list7; ?></td>
        <td><?php echo $bilboard_list8; ?></td>
        <td><?php echo $bilboard_list9; ?></td>
        <td><?php echo $bilboard_list10; ?></td>
        <td><?php echo $bilboard_list11; ?></td>
        <td><?php echo $bilboard_list12; ?></td>

      </tr>

</table>

<body>

</html>
` 
```

我有这个代码。但是每当我尝试运行此代码时，它都会显示：

> 警告：mysql_num_rows() 期望参数 1 是资源，布尔值在第 32 行的 D:\xampp\htdocs\ftn_eg\table.php 中给出

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:32:45.423

在您的代码中缺少选择数据库函数

您应该`mysql_select_db('your_db_name');`在运行`mysql_query`功能之前使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:29:46.547

您的查询

```
SELECT * FROM maklumat_peribadi ORDER BY id 
```

正在返回错误。检查你的数据库

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T03:40:05.493

让我们首先说，不要使用 mysql_* 函数。这段时间已经过去了，您现在应该使用[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)。

话虽如此，您没有选择数据库。MySQL应该从哪里提取？

`mysql_select_db('DATABASE_NAME');`

接下来，在尝试打印此信息时会出现很多可预见的语法错误。 `$bilboard_list3 .= "$No Telefon Rumah<br>";`这应该是我可以阅读的变量，需要类似于`$bilboard_list3 .= "$No_Telefon_Rumah<br>";`

最后，这些变量中的大多数都可以简化为一个数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T03:45:04.330

您需要使用 选择架构`mysql_select_db`。你只连接到一个数据库系统，而不是一个特定的数据库。

使用 来检查结果是一种很好的做法`if ($bilboardCount > 0) {`，但您的输出并不查看是否有要显示的结果。您可能会在页面上收到错误消息。

使用`PDO`将使某些事情对您来说更容易和更安全。即使数据来自数据库，您也应该`htmlspecialchars`在页面上显示时使用转义它。

改进的一件好事是为 $bilboard_list 创建一个对象 :)

保持！:)

# sql - SQL复制具有关系的表中的行

> ID：13576930
> 
> 赞同：3
> 
> 时间：2012-11-27T03:25:51.377
> 
> 标签：sql, sql-server, tsql, copy, rows

希望有人可以帮助我，我想复制同一张表中的行，并且该表与另一个表有关系，我必须相应地复制相关行：

**表格1**

```
 table1Id table0Id otherColumn 
          1         3        8
          2         3        9
          3         4        6 
```

我用 table0Id = 3 复制了行

**表格1**

```
 table1Id table0Id otherColumn 
          1         3        8
          2         3        9
          3         4        6
        -------------------------
          4         3        8
          5         3        9 
```

我想根据 Table1 Id 对 Table2 做同样的事情，如下所示：

**表2**

```
 table2Id table1Id otherColomn
           1        1        0
           2        2        5
           3        3        8 
```

**表2**

```
 table2Id table1Id otherColomn
           1        1        0
           2        2        5
           3        3        8
         -----------------------
           4        4 new Id 0
           5        5 new Id 5 
```

如您所见，第 1 行和第 2 行被复制到 table2 中，但它们具有来自 table1 中新添加行的新 ID。我知道如何做第一部分，但我被困在第二部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:04:14.900

感谢您的回答，我通过使用输出和身份来解决这个问题：

```
Declare @temp table(tempId int,tempName nchar(10),tempOther bit, rownumber int identity)
insert into @temp select Id,Nam,other from dbo.Table_1  where Nam = 'ToCopy'

Declare @tempIds table(outputId int,rownumber int identity)

Declare @finalTemp table(OldId int,new_id int)

select * from dbo.Table_1
select * from dbo.Table_2

insert into dbo.Table_1
output inserted.Id into @tempIds
select tempName,tempOther from @temp

insert into @finalTemp
select oldT.tempId, newT.outputId 
from @temp as oldT
join @tempIds as  newT on oldT.rownumber = newT.rownumber

insert into dbo.Table_2(Table1Id)
select ftemp.new_id
from dbo.Table_2 t2 
join @finalTemp ftemp on ftemp.OldId = t2.Table1Id

select * from dbo.Table_1
select * from dbo.Table_2 
```

# java - 值未在 XML 配置文件中硬编码的 Spring 示例

> ID：13576933
> 
> 赞同：1
> 
> 时间：2012-11-27T03:26:17.133
> 
> 标签：java, spring

我正在学习 Spring，我想问一下有没有办法在运行时为 Bean 属性赋值？我在互联网和书籍中尝试过的所有示例通常都在 xml 文件中实现硬编码值。

例如，在本网站[http://www.dzone.com/tutorials/java/spring/spring-bean-setter-injection-1.html](http://www.dzone.com/tutorials/java/spring/spring-bean-setter-injection-1.html)

中找到的简短教程 User 类具有 getter 和 setter 方法，但其所有值都是在 beans.xml 中硬编码。我尝试通过 main() 中的 setter 方法为用户的成员变量设置值，但出现了很多错误。

所以我只是想知道这是否可能，如果你能展示包含本教程的简短示例或网站，我将不胜感激。提前致谢。

```
Exception in thread "main" org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Unexpected failure during bean definition parsing
Offending resource: class path resource [SimpleValues.xml]
Bean 'insertValues'; nested exception is org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: <property> element for property 'name' must specify a ref or value
Offending resource: class path resource [SimpleValues.xml]
Bean 'insertValues'
    -> Property 'name'
    at org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:68)
    at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:85)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.error(BeanDefinitionParserDelegate.java:324)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseBeanDefinitionElement(BeanDefinitionParserDelegate.java:579)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseBeanDefinitionElement(BeanDefinitionParserDelegate.java:477)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseBeanDefinitionElement(BeanDefinitionParserDelegate.java:446)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.processBeanDefinition(DefaultBeanDefinitionDocumentReader.java:311)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseDefaultElement(DefaultBeanDefinitionDocumentReader.java:202)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:181)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:140)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:111)
    //More errors 
```

这是我的 xml 文件

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

    <bean id="insertValues" class="com.SimpleValues.SimpleValues">
        <property name="name"/> 

        <property name="age"/>

        <property name="height"/>

    </bean>

</beans> 
```

主要方法

```
public static void main(String[] args) {

        GenericXmlApplicationContext ctx = new GenericXmlApplicationContext();
        ctx.load("SimpleValues.xml");
        ctx.refresh();

        SimpleValues inject = (SimpleValues) ctx.getBean("insertValues");
        inject.setName("Andres");
        inject.setAge(20);
        inject.setHeight(7);

        System.out.println("Name: "+ inject.getName()+ " Age: "+inject.getAge()+ " Height: "+inject.getHeight());
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T03:48:15.463

如果您阅读错误，您会看到它（正确地）抱怨您的 XML 无效（您使用的是格式错误的`<property/>`节点。假设您确实在其他地方有代码获取对设置器的引用`insertValues`并调用设置器，那么只需删除XML中的 3`<property/>`个节点。

也就是说，只需使用：

```
<bean id="insertValues" class="com.SimpleValues.SimpleValues" /> 
```

这将创建您的`insertValues`bean 而不会调用任何设置器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T06:23:27.640

您面临的问题是您必须在使用属性时提供一个*ref*（即对另一个 Spring bean 的引用）或一个*值。*在您的示例中，由于您指的是原语（而不是其他 bean），因此您可以使用以下内容：

```
<bean id="insertValues" class="com.SimpleValues.SimpleValues">
    <property name="name" value="Andres"/> 
    <property name="age" value="20"/>
    <property name="height" value="7"/>
</bean> 
```

通过这样做，您可以跳过方法中的 setter 方法，并在从应用程序上下文中获取 bean 后直接`main`从 bean 中获取相应的值。`SimpleValues`

请参阅[示例](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-some-examples)并在 Spring 参考文档中阅读有关[基于 setter 的依赖注入的更多信息。](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-setter-injection)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-07-12T15:44:50.807

在这里，在尝试动态初始化值时，尝试获取 bean 类的 set 属性中的值（使用 Scanner 方法），并在 XML 文件中传递默认值，这样，访问将转到 setter 方法和您可以在其中初始化值并在获取 getter 方法中的值时使用这些值。

# c - 在C中的二维数组中将int转换为void

> ID：13576937
> 
> 赞同：0
> 
> 时间：2012-11-27T03:27:13.270
> 
> 标签：c, pointers, casting

考虑到指针的大小不同，执行以下强制转换有多安全？（32/64 位）它会导致不正确的程序行为吗？

```
#define APL 1
#define GRP 2

void *fruits[][2] = {
    {"Apples", (void *) APL},
    {"Grapes", (void *) GRP},
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T03:32:07.903

> 考虑到指针的大小不同？

这不起作用，标准允许将整数转换为指针。

但是强制转换的结果是（除了评估为 0 的常量表达式）实现定义的，并且可能不是指向您被允许操作甚至读取的内存的指针。

> 它会导致不正确的程序行为吗？

如果您使用这些指针（例如，转换为其他指针类型并取消引用结果），则可能导致未定义的行为，并导致各种不良行为。

# android - 屏幕关闭时打开活动

> ID：13576939
> 
> 赞同：0
> 
> 时间：2012-11-27T03:27:39.393
> 
> 标签：android, android-activity, broadcastreceiver

我正在尝试制作一个锁屏应用程序，当屏幕被唤醒时，该应用程序会显示出来。我目前有一个广播接收器，它监听 ACTION_SCREEN_OFF 和 ACTION_SCREEN_ON 并启动活动。我已经测试了他们两个，似乎没有一个比另一个快。即使我收听 ACTION_SCREEN_OFF，活动也不会加载，直到屏幕打开后一段时间。

有没有办法在屏幕关闭时实际加载活动，以便在屏幕重新打开时立即显示？或者至少有一种更有效的方式来启动活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:33:17.350

没有更有效的方法了。当您的应用从 SCREEN_OFF 广播启动 Activity 时，Android 会在调用该 Activity 的 onPause() 方法后立即创建 Activity。然而，不同的手机处理它的方式不同，所以像阴影和重影这样的事情是预期的，因为当你再次打开屏幕时，Activity 的 onResume() 被调用，所以有时会发生刷新，这取决于设备。

# cvs - 相当于 CVS 中的 git stash？

> ID：13576940
> 
> 赞同：5
> 
> 时间：2012-11-27T03:27:49.097
> 
> 标签：cvs, git-stash

我需要测试一些旧版本的源代码，但是我有一些本地更改。所以我想“隐藏”这些更改，签出旧版本，做一些测试，然后回到当前版本，并恢复我的更改。是否可以在 CVS 中执行这种工作流程？基本上，我需要的是相当于`git stash/restore`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T03:59:56.370

与现代源代码控制系统相比，CVS 是原始的。没有直接的等价物来存储。

您将获得的最接近的方法是使用`cvs diff -u`创建更改的统一差异，然后还原更改，执行您需要做的任何事情，再次还原/更新，然后应用补丁以恢复您的更改。

或者，您可以在另一个目录中创建另一个结帐并在那里独立工作。

# javascript - HTML 表单需要保存为 csv.file 格式

> ID：13576945
> 
> 赞同：-1
> 
> 时间：2012-11-27T03:28:24.033
> 
> 标签：javascript, jquery, html

此代码运行成功..但我的问题是，我需要添加一个带有保存按钮的函数，该按钮将以 csv.file 格式保存此表单。我该怎么做？可以进行哪些修改，以便我可以完成我的要求。我将发布整个代码。请帮我解决这个问题...TQ

```
<form="form1" action="process.csv" method="post">
  <div> TESTER  <input type="text"/> 
    DATE<input type="text" />       
    EMP  NO  <input type="text" />  
    6S DONE  <input type="text" />
    <br />
    <br />
    WW  <input type="text" size="8"maxlength="8"/>      
    NAME  <input type="text" />     
    SHIFT<input type="text" />
    <br />
    <br />
    <br />
  </div>
  PASSOVER (Please verify Summit Receipe & Storm before start shift)
  <br />
  <br />
  <br />                    
  Summit Receipe OK ?                   
  <select name="">                      
    <option value="" style="display:none;"></option>        
    <option value="Yes">Yes</option>                
    <option value="No">No</option>              
  </select>     
  Motif/ Storm OK ?                     
  <select name="">                      
    <option value="" style="display:none;"></option>        
    <option value="Yes">Yes</option>                
    <option value="No">No</option>              
  </select>                     
  <br />
  <br />
  <br />
  <SCRIPT TYPE="text/javascript">
    function addRowToTable()
      {
        var tbl = document.getElementById('tblSample');
        var lastRow = tbl.rows.length;
        // if there's no header row in the table, then iteration = lastRow + 1
        var iteration = lastRow;
        var row = tbl.insertRow(lastRow);
        // left cell
        var cellLeft = row.insertCell(0);
        var textNode = document.createTextNode(iteration);
        cellLeft.appendChild(textNode);
        // right cell
        var cellRight = row.insertCell(1);
        var el = document.createElement('input');
        el.type = 'text';
        el.name = 'txtRow' + iteration;
        el.id = 'txtRow' + iteration;
        el.size = 40;

        el.onkeypress = keyPressTest;
        cellRight.appendChild(el);
        // insert cell
        var cellRight1 = row.insertCell(2);
        var el1 = document.createElement('input');
        el1.type = 'text';
        el1.name = 'txtRow' + iteration;
        el1.id = 'txtRow' + iteration;
        el1.size = 40;

        el1.onkeypress = keyPressTest;
        cellRight1.appendChild(el1);

        // insert cell
        var cellRight2 = row.insertCell(3);
        var el2 = document.createElement('input');
        el2.type = 'text';
        el2.name = 'txtRow' + iteration; 
        el2.id = 'txtRow' + iteration;
        el2.size = 40;

        el2.onkeypress = keyPressTest;
        cellRight2.appendChild(el2);

        // insert cell
        var cellRight3 = row.insertCell(4);
        var el3 = document.createElement('input');
        el3.type = 'text';
        el3.name = 'txtRow' + iteration;
        el3.id = 'txtRow' + iteration;
        el3.size = 40;

        el3.onkeypress = keyPressTest;
        cellRight3.appendChild(el3);

        // insert cell
        var cellRight4 = row.insertCell(5);
        var el4 = document.createElement('input');
        el4.type = 'text';
        el4.name = 'txtRow' + iteration;
        el4.id = 'txtRow' + iteration; 
        el4.size = 40;

        el4.onkeypress = keyPressTest;
        cellRight4.appendChild(el4);

        // insert cell
        var cellRight5 = row.insertCell(6);
        var el5 = document.createElement('input');
        el5.type = 'text';
        el5.name = 'txtRow' + iteration;
        el5.id = 'txtRow' + iteration;
        el5.size = 40;

        el5.onkeypress = keyPressTest;
        cellRight5.appendChild(el5);

        // insert cell
        var cellRight6 = row.insertCell(7);
        var el6 = document.createElement('input');
        el6.type = 'text';
        el6.name = 'txtRow' + iteration;
        el6.id = 'txtRow' + iteration;
        el6.size = 40;

        el6.onkeypress = keyPressTest;
        cellRight6.appendChild(el6);

        // insert cell
        var cellRight7 = row.insertCell(8);
        var el7 = document.createElement('input');
        el7.type = 'text';
        el7.name = 'txtRow' + iteration;
        el7.id = 'txtRow' + iteration;
        el7.size = 40;

        el7.onkeypress = keyPressTest;
        cellRight7.appendChild(el7);

        // insert cell
        var cellRight8 = row.insertCell(9);
        var el8 = document.createElement('input');
        el8.type = 'text';
        el8.name = 'txtRow' + iteration;
        el8.id = 'txtRow' + iteration;
        el8.size = 40;

        el8.onkeypress = keyPressTest;
        cellRight8.appendChild(el8);
      }

    function keyPressTest(e, obj){
        var validateChkb = document.getElementById('chkValidateOnKeyPress');
          if (validateChkb.checked) {
            var displayObj = document.getElementById('spanOutput');
            var key;
            if(window.event) {
              key = window.event.keyCode; 
            }
            else if(e.which) {
              key = e.which;
            }
            var objId;
            if (obj != null) {
              objId = obj.id;
            } 
            else {
              objId = this.id;
            }
            displayObj.innerHTML = objId + ' : ' + String.fromCharCode(key);
          }
      }

    function removeRowFromTable(){
        var tbl = document.getElementById('tblSample');
        var lastRow = tbl.rows.length;
        if (lastRow > 2) tbl.deleteRow(lastRow - 1);
      }
    function openInNewWindow(frm){
        // open a blank window
        var aWindow = window.open('', 'TableAddRowNewWindow',
          'scrollbars=yes,menubar=yes,resizable=yes,toolbar=no,width=400,height=400');

        // set the target to the blank window
        frm.target = 'TableAddRowNewWindow';

        // submit
        frm.submit();
      }

    function validateRow(frm){
      var chkb = document.getElementById('chkValidate');
      if (chkb.checked) {
        var tbl = document.getElementById('tblSample');
        var lastRow = tbl.rows.length - 1;
        var i;
        for (i=1; i<=lastRow; i++) {
          var aRow = document.getElementById('txtRow' + i);
          if (aRow.value.length <= 0) {
            alert('Row ' + i + ' is empty');
            return;
          }
        }
      }
      openInNewWindow(frm);
    }
    </SCRIPT>
    <form action="tableaddrow_nw.html" method="get">
      <p>
        <input type="button" value="Add" onclick="addRowToTable();" />
        <input type="button" value="Delete" onclick="removeRowFromTable();" />
      </p>
      <p>
      </p>
      <table border="1" id="tblSample">
        <tr>
          <TH>Num</TH>
          <TH>Lot Number</TH>
          <TH>Location</TH>
          <TH>Total In</TH>
          <TH>1 * Test</TH>
          <Th>2 * Test</TH> 
          <TH>3 * Test</TH>
          <TH>Total Out</TH>
          <TH>Lot Status</TH>
          <TH>Remark</TH> 
```

很抱歉发了这么长的帖子。如果你们认为这个编码应该改进。请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:38:02.543

所以 - 您首先要确保适当的表单元素具有名称属性。

然后你可以做这样的事情来创建一个逗号分隔的字符串：

```
 var returnStringColHeaders, returnStringColValues, returnString = '';
        var names = [];
        var vals = [];
        $.each($('#myForm').serializeArray(), function (i, field) {
            names.push(field.name);
            vals.push(field.value);
        });
        for (var i = 0; i < names.length; i++) {
            returnStringColHeaders = returnStringColHeaders + ', ' + names[i];
            returnStringColValues = returnStringColValues + ', ' + vals[i];
        }
        returnString = returnStringColHeaders + '\n' + returnStringColValues;
        //do something with returnString
        console.log(returnString); 
```

然后，您可以将`returnString`其发布到某个页面，该页面将该字符串作为 CSV 发送回客户端作为下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:31:57.987

让我们从改进您的代码开始。

```
function addRowToTable()
  {
    var tbl = document.getElementById('tblSample');
    var lastRow = tbl.rows.length;
    // if there's no header row in the table, then iteration = lastRow + 1
    var iteration = lastRow;
    var row = tbl.insertRow(lastRow);
    // left cell
    var cellLeft = row.insertCell(0);
    var textNode = document.createTextNode(iteration);
    cellLeft.appendChild(textNode);
    // right cell
    var cellRight = row.insertCell(1);
    var el = document.createElement('input');
    el.type = 'text';
    el.name = 'txtRow' + iteration;
    el.id = 'txtRow' + iteration;
    el.size = 40;

    el.onkeypress = keyPressTest;
    cellRight.appendChild(el);
    // insert cell
    var cellRight1 = row.insertCell(2);
    var el1 = document.createElement('input');
    el1.type = 'text';
    el1.name = 'txtRow' + iteration;
    el1.id = 'txtRow' + iteration;
    el1.size = 40;

    el1.onkeypress = keyPressTest;
    cellRight1.appendChild(el1);

    // insert cell
    var cellRight2 = row.insertCell(3);
    var el2 = document.createElement('input');
    el2.type = 'text';
    el2.name = 'txtRow' + iteration; 
    el2.id = 'txtRow' + iteration;
    el2.size = 40;

    el2.onkeypress = keyPressTest;
    cellRight2.appendChild(el2);

    // insert cell
    var cellRight3 = row.insertCell(4);
    var el3 = document.createElement('input');
    el3.type = 'text';
    el3.name = 'txtRow' + iteration;
    el3.id = 'txtRow' + iteration;
    el3.size = 40;

    el3.onkeypress = keyPressTest;
    cellRight3.appendChild(el3);

    // insert cell
    var cellRight4 = row.insertCell(5);
    var el4 = document.createElement('input');
    el4.type = 'text';
    el4.name = 'txtRow' + iteration;
    el4.id = 'txtRow' + iteration; 
    el4.size = 40;

    el4.onkeypress = keyPressTest;
    cellRight4.appendChild(el4);

    // insert cell
    var cellRight5 = row.insertCell(6);
    var el5 = document.createElement('input');
    el5.type = 'text';
    el5.name = 'txtRow' + iteration;
    el5.id = 'txtRow' + iteration;
    el5.size = 40;

    el5.onkeypress = keyPressTest;
    cellRight5.appendChild(el5);

    // insert cell
    var cellRight6 = row.insertCell(7);
    var el6 = document.createElement('input');
    el6.type = 'text';
    el6.name = 'txtRow' + iteration;
    el6.id = 'txtRow' + iteration;
    el6.size = 40;

    el6.onkeypress = keyPressTest;
    cellRight6.appendChild(el6);

    // insert cell
    var cellRight7 = row.insertCell(8);
    var el7 = document.createElement('input');
    el7.type = 'text';
    el7.name = 'txtRow' + iteration;
    el7.id = 'txtRow' + iteration;
    el7.size = 40;

    el7.onkeypress = keyPressTest;
    cellRight7.appendChild(el7);

    // insert cell
    var cellRight8 = row.insertCell(9);
    var el8 = document.createElement('input');
    el8.type = 'text';
    el8.name = 'txtRow' + iteration;
    el8.id = 'txtRow' + iteration;
    el8.size = 40;

    el8.onkeypress = keyPressTest;
    cellRight8.appendChild(el8);
  } 
```

以上所有内容都可以在 for 循环内的几行中完成。

```
//counter to keep track of rows
var rowCount = 1;
var tbl = document.getElementById('tblSample');
function addRowToTable(){
  // add a row 
  var row = tbl.insertRow(rowCount);
  //add the first cell 
  var leftCell = row.insertCell(0);
  var textNode = document.createTextNode(rowCount);
  leftCell.appendChild(textNode);

  //Insert the rest of the cells
  for(var i = 1; i<10; i++){
    var cell = row.insertCell(i);
    var el = document.createElement('input');
    el.type = 'text';
    el.name = 'txtRow'+rowCount;
    el.id = 'txtRow'+rowCount;
    el.size = 40;
    el.onkeypress = keyPressTest;
    cell.appendChild(el);
  }
   //Increment the counter
  rowCount++;
} 
```

由于我们添加了一个计数器，当我们从表中删除一行时，我们需要减少它。所以你的 removeRow 函数应该是这样的：

```
function removeRowFromTable(){
    var lastRow = tbl.rows.length;
    if (lastRow > 1) {
      tbl.deleteRow(lastRow - 1);
      rowCount--;
    }
  } 
```

您还应该将名称属性添加到表单中的输入元素。

```
<div> 
   TESTER  <input type="text"  name="tester"/> 
   DATE    <input type="text" name="date" />        
   EMP  NO <input type="text" name="emp"/>  
   6S DONE <input type="text" name="6s"/>
   WW      <input type="text" size="8"maxlength="8" name="ww"/>     
   NAME    <input type="text" name="name"/>     
   SHIFT   <input type="text" name="shift"/>
</div> 
```

创建一个提交按钮并将其绑定到 onClick 事件，而不是使用 action 属性。例如：

```
<input type='button' value='Submit' onclick='submitForm()' /> 
```

最后，您需要添加一个 submitForm() 函数，该函数获取所有数据，按照您想要的方式对其进行格式化，然后将其发送到您想要的任何地方。

```
function submitForm(){
  var form = document.getElementById('form1');
  //get all the inputs under the div tag
  var inputs = form.children[0].children;
  var inputName, inputValue, csvData= '';
  //get the name and value of each input and convert to csv format
  for (var i = 0; i<inputs.length; i++)
  {
    inputName = inputs[i].name;
    inputValue = inputs[i].value;
    csvData += inputName +","+inputValue +"\n";
  }

  console.log(csvData);
} 
```

该字符串`csvData`将包含 csv 格式的所有数据。你可以随心所欲地使用它。

# sql - 如何从大表中选择行对？

> ID：13576947
> 
> 赞同：2
> 
> 时间：2012-11-27T03:28:47.590
> 
> 标签：sql, sqlite, select

在表中......（ID，NAME，EVENT）

数据：

```
(1,BOB,E)    
(2,JANE,B)    
(3,JOE,C)    
(4,TOM,A)   
(5,JANE,B)    
(6,JOE,C)    
(7,BEN,D)    
(8,TOM,B)    
(9,JANE,D)    
(10,JOE,A)    
(11,JANE,B)    
(12,BOB,C)    
(13,JOE,C)    
.    
.    
. 
```

期望的输出：

```
(2,JANE,B)    
(3,JOE,C)    
(5,JANE,B)    
(6,JOE,C) 
```

我试图列出 Jane,B 和 Joe,C 连续出现在表中的每个实例。使用 sqlite。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:41:27.063

您可以使用标准 SQL 执行此操作，该标准也适用于 SQLite。这个想法是将给定的行连接到下一行和上一行，然后检查条件：

```
select t.*
from t join
     t tnext
     on tnext.id = t.id + 1 join
     t tprev
     on tprev.id = t.id - 1
where (t.name = 'Jane' and t.event = 'B' and tnext.name = 'Joe' and tnext.event = 'C') or
      (tnext.name = 'Jane' and tnext.event = 'B' and t.name = 'Joe' and t.event = 'C') or
      (t.name = 'Jane' and t.event = 'B' and tprev.name = 'Joe' and tprev.event = 'C') or
      (tprev.name = 'Jane' and tprev.event = 'B' and t.name = 'Joe' and t.event = 'C') 
```

# iphone - 日期格式化程序、时区和语言之间的关系

> ID：13576948
> 
> 赞同：0
> 
> 时间：2012-11-27T03:29:03.103
> 
> 标签：iphone, ios, timezone, nsdateformatter

时间格式化程序的语言无法更改，如以下两个屏幕截图所示。两种语言都设置为英语。一个时区是中国北京，另一个是美国路易斯维尔。 ![在此处输入图像描述](../Images/5ee250d5ef00cb2725e71269c9f50f8b.png)![在此处输入图像描述](../Images/27bd82fa44bda2acca23c834ab5a7e1f.png)

在我的应用程序中，`NSDateFormatter`创建如下代码：

```
NSString *formatString = [NSDateFormatter dateFormatFromTemplate:@"dMMM HH:mm" 
                          options:0 locale:[NSLocale currentLocale]];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:formatString];
NSString *timestamp = [dateFormatter stringFromDate:date]; 
```

时间戳始终为中文，例如：11月26日11:20。我想要的是语言和日期格式化程序与语言设置一致。任何帮助将不胜感激：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T03:48:04.477

我终于在 iPhone 中找到了设置：General->International->Region Format。可以在那里设置语言和格式化程序。

# javascript - Javascript 不能同时工作

> ID：13576951
> 
> 赞同：-2
> 
> 时间：2012-11-27T03:29:23.900
> 
> 标签：javascript

```
<script language="JavaScript">
    function validate(x) {

        var cur_p = document.getElementById('current').value;
        var new_p = document.getElementById('new').value;
        var con_p = document.getElementById('confirm').value;

        document.getElementById('msg_p').innerHTML = '';
        document.getElementById('msg_cur').innerHTML = '';

        if(x != cur_p)
        {   document.getElementById('msg_cur').innerHTML = ' Your password was incorrect';
            return false;
        }   

        if(new_p != con_p)
        {   document.getElementById('msg_p').innerHTML = 'Passwords do not match';
            return false;
        }

        return (true);

    }
</script> 
```

html

```
<form action='change-password.php' method='post' onsubmit="return validate('<?=$current?>')" > 
```

我的代码上有这些。我无法同时显示这些 if 的结果。

```
if(x != cur_p)
and 
if(new_p != con_p) 
```

如果我把

```
if(x != cur_p){} 
```

在顶部

```
if(new_p != con_p){} 
```

if(x != cur_p) 的响应结果会显示，后者不会

反之亦然。

我如何显示这两个 if 的结果（假设满足那些条件）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T03:32:20.567

问题是你`false`在第一个之后返回，所以第二个永远不会到达。相反，在每个中设置一个布尔变量并返回布尔变量（`true`如果两者都没有失败，或者`false`其中一个失败）。

```
 // Boolean variable starts true, will get set to false if either condition is met:
    var okFlag = true;
    if(x != cur_p)
    {   document.getElementById('msg_cur').innerHTML = ' Your password was incorrect';
        // Set to false
        okFlag = false;
    }   

    if(new_p != con_p)
    {   document.getElementById('msg_p').innerHTML = 'Passwords do not match';
        // Set to false
        okFlag = false;
    }
    // Return the flag, which is either true or false.
    return okFlag; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T03:32:54.833

首先，您的代码中有错字

```
document.getElementById('msg_p').innerHTM = '';  <-- Missing an L 
```

其次，当然如果你返回，它会退出函数。所以代码不会执行这两个语句。

改变

```
 if(x != cur_p)
    {   document.getElementById('msg_cur').innerHTML = ' Your password was incorrect';
        return false;
    }   

    if(new_p != con_p)
    {   document.getElementById('msg_p').innerHTML = 'Passwords do not match';
        return false;
    }

    return (true); 
```

到

```
 var isValid = true;
    if(x != cur_p)
    {   document.getElementById('msg_cur').innerHTML = ' Your password was incorrect';
        isValid = false;
    }   

    if(new_p != con_p)
    {   document.getElementById('msg_p').innerHTML = 'Passwords do not match';
        isValid = false;
    }

    return isValid; 
```

# asp.net - 在 html 联系人 aspx 中添加显示字段

> ID：13576953
> 
> 赞同：0
> 
> 时间：2012-11-27T03:29:47.110
> 
> 标签：asp.net, html, contact

我对aspx比较陌生。我正在尝试在联系页面中添加一个字段（我已经完成了）并将其显示在生成的电子邮件中（我遇到了问题）。来自表单的电子邮件仍会发送并显示所有字段 - 但我添加的特定字段“ctrlDOP”不会显示结果电子邮件中的文本 - 它只显示#DOP#。

contact.aspx 和contact.xml 页面以及生成的电子邮件如下。提前谢谢了。

--CONTACT.ASPX--

```
 </asp:Content>
        <asp:Content ID="Content2" ContentPlaceHolderID="content" runat="server">
        <h2>Job Attended / Completed</h2>

    <asp:MultiView ID="mvContactForm" runat="server" ActiveViewIndex="0">

    <asp:View runat="server" ID="ContactForm" runat="server">
    <div class="form contact">
    <p>
        <asp:Label runat="server" AssociatedControlID="ctrlName">Job Number <asp:RequiredFieldValidator runat="server" ControlToValidate="ctrlName" ErrorMessage="required..." 
            CssClass="error" Display="Dynamic" /></asp:Label>
        <asp:TextBox ID="ctrlName" runat="server" CssClass="txt required" />

    </p>
    <p>
        <asp:Label runat="server" AssociatedControlID="ctrlEmail">Model <asp:RequiredFieldValidator runat="server" ControlToValidate="ctrlEmail" ErrorMessage="required..."
            CssClass="error" Display="Dynamic" /></asp:Label>
        <asp:TextBox ID="ctrlEmail" runat="server" CssClass="txt required" />

    </p>
    <p>
    <p>
        <asp:Label runat="server" AssociatedControlID="ctrlSubject">Serial <asp:RequiredFieldValidator runat="server" ControlToValidate="ctrlEmail" ErrorMessage="required..."
            CssClass="error" Display="Dynamic" /></asp:Label>
        <asp:TextBox ID="ctrlSubject" runat="server" CssClass="txt required" />
    </p>
    <p>
        <asp:Label runat="server" AssociatedControlID="ctrlMessage">Report <asp:RequiredFieldValidator runat="server" ControlToValidate="ctrlMessage" ErrorMessage="required..."
            CssClass="error" Display="Dynamic" /></asp:Label>
        <asp:TextBox ID="ctrlMessage" runat="server" CssClass="txt required" TextMode="MultiLine" />

    </p>
            <asp:Label runat="server" AssociatedControlID="ctrlDOP">DOP <asp:RequiredFieldValidator runat="server" ControlToValidate="ctrlDOP" ErrorMessage="required..."
            CssClass="error" Display="Dynamic" /></asp:Label>
        <asp:TextBox ID="ctrlDOP" runat="server" CssClass="txt required" TextMode="SingleLine" />

    </p>

    <p class="commandBar">
        <asp:ImageButton ID="cmdSubmit" runat="server" CssClass=""
            OnClick="cmdSubmit_Click" SkinID="SubmitButton" AlternateText="Submit Enquiry" />
    </p>
    <p class="errorMessage"><asp:Literal ID="ErrorMessage" runat="server" EnableViewState="false" />

    </p>
    <br class="clear" />
    </div>
    </asp:View>
        <asp:View runat="server" ID="ConfirmationMessage">
        <p>
        Your job info has been submitted.<br />
        Ensure the jobsheet makes it to the pigeon hole.
        </p>
        </asp:View>
    </asp:MultiView>
    <br class="clear" />

    </asp:Content> 
```

--CONTACT.XML--

```
<?xml version="1.0" encoding="utf-8" ?>
<Email>
<To>scotty@metroappliance.com.au</To>
<From>jobnotification@metroappliance.com.au</From>
<Subject>Job Notification: #SUBJECT#</Subject>
<Priority>Normal</Priority>
<Message format="HTML">
 <![CDATA[
        <html>
        <head>
        <title></title>
          <style type="text/css">
                * {font: 1em/1.5 Helvetica, Arial, 'Liberation Sans', FreeSans, sans-serif;}
                a, a:hover,a:visited,a:active{color:#2F9F49;}
            </style>
        </head>
        <body style="background-color:#00256e;">
            <div>
                <table border="0" width="600" cellpadding="4" cellspacing="4" style="background-color:#fff;">
                    <tr>
                        <td align=justify colspan="4">
                            <img src="#APP_ROOT#App_Themes/Default/images/email-header.jpg" alt="Metro Appliance">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <p><b>Job attended by #NAME#.</b></p>

                            <h4>#SUBJECT#</h4>
                            <h4>#DOP#</h4>
                            <p>#MESSAGE#</p>
                        </td>
                    </tr>
                </table>
            </div>
        </body>
    </html>     
    ]]>
   </Message>
</Email> 
```

--结果电子邮件--

作业编号参加的作业。串行

# DOP

报告

再次 - 我提前感谢所有人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T00:28:54.540

问题在于您要替换 #DOP# 的电子邮件生成代码，您尚未发布它，但它可能错误地是零而不是 O。

# webgl - Three.js 是否在 Collada 文件中呈现线条？

> ID：13576954
> 
> 赞同：0
> 
> 时间：2012-11-27T03:29:54.010
> 
> 标签：webgl, three.js, collada

我正在处理一个包含一行材料的[Collada 文件。](https://dl.dropbox.com/u/44791710/S_line.dae)

我无法在 Three.js 中呈现此文件

我不确定 Three.JS 是否可以从 Collada 文件中渲染线条。

这个文件有什么问题？它在 SketchUp 中完美运行，但我无法在 Three.js 中加载它。Blender 不支持线条，我无法在那里检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T23:22:06.183

试试画布渲染器？它有一个“rederLine()”方法，其他的没有。（线宽等是材料的属性，顺便说一句——不是线本身）

或者，查询threejs场景的内容并确保该行确实是其中的一部分

# nslayoutconstraint - 在 awakeFromNib 中似乎没有设置框架视图

> ID：13576957
> 
> 赞同：4
> 
> 时间：2012-11-27T03:30:16.737
> 
> 标签：nslayoutconstraint, awakefromnib

我在我的视图控制器中使用自动布局来对齐 uiview，就好像它是一个导航栏（对齐到顶部，拉伸到尾随和前导边以及 44 高度）。

我已经对这个视图进行了子类化，并且在`awakeFromNib`我想向它添加子视图。

但是，当我添加这些子视图（也有对父视图的约束）时，它不起作用。

最初我认为约束编程不正确，但是，在记录视图的框架后，如下所示：

```
- (void)awakeFromNib
{
    [super awakeFromNib];

    NSLog(@"%@", NSStringFromCGRect(self.frame));
} 
```

我得到以下输出：

```
2012-11-27 03:25:25.976 myApp[8262:c07] {{0, 0}, {0, 0}} 
```

然而，例如，当我登录时，`touchesBegan:withEvent:`它会记录正确的帧大小。

有谁知道这可能是什么原因造成的？

我也尝试过设置`setTranslatesAutoresizingMaskIntoConstraints:NO`所有涉及的视图。但似乎没有任何效果。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:03:23.390

调用时`awakeFromNib`，视图尚未创建。在此方法中从视图中获取任何类型的属性的最佳方法是`[self view]`在尝试访问属性之前调用。

# extjs4.1 - 在 roweditor 中侦听字段的事件

> ID：13576959
> 
> 赞同：1
> 
> 时间：2012-11-27T03:30:43.387
> 
> 标签：extjs4.1, extjs-mvc

我很清楚如何在控制器上的 roweditor 上侦听事件，这是通过使用控制配置来查询带有 roweditor 插件的网格，然后触发 roweditor 事件。**但我想听的确切事件实际上属于组件（例如文本字段）在该 roweditor 中**。我认为该事件不会传递到网格面板。

有没有办法通过使用控制器来实际监听该行编辑器中的字段事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T02:28:34.803

我以某种方式成功地从网格行编辑器中的组件监听事件。事实证明，我们不能将这些组件作为网格的子项进行查询。

假设我想在网格行编辑器中获取字段组件，此代码将返回 null

```
Ext.ComponentQuery.query('grid field[id=test]'); 
```

相反，查询该字段，因为它不是该网格的子元素并且它可以工作

```
Ext.ComponentQuery.query('field[id=test]'); 
```

# c# - WPF datepicker：日期从和日期到

> ID：13576963
> 
> 赞同：2
> 
> 时间：2012-11-27T03:31:13.243
> 
> 标签：c#, wpf, datepicker

我的 WPF 画布中有两个日期选择器。我想做的就像航空公司网站上的日期选择器。第一个日历允许用户选择出发日期，第二个日历允许用户选择返回日期。假设我从 datapickerA 中选择 11/11/2012，当我单击第二个 datepickerB 时，2012 年 11 月 11 日**之前**的日期被禁用。我应该在日期选择器中放什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T03:41:10.470

您可以使用`DisplayDateStart`. `DatePicker`它是一个`DependencyProperty`，因此您可以通过`DataContext`使用 MVVM 来提供它，或者将`DisplayDateStart`您的第二个设置`DatePicker`为`SelectedDate`从第一个`DatePicker`：

```
<DatePicker x:Name="Date1"/>
<DatePicker DisplayDateStart="{Binding ElementName=Date1, Path=SelectedDate}"/> 
```

# c# - 我可以使用 System.Reflection.Emit 向现有类型添加动态方法吗？

> ID：13576964
> 
> 赞同：0
> 
> 时间：2012-11-27T03:31:15.493
> 
> 标签：c#, .net

我刚开始学习 Emit 命名空间 - 以下内容有效吗？这会引发异常：

```
public class EmitTest
{
    public void Test()
    {
        DynamicMethod dynMeth = new DynamicMethod("Foo", null, null, typeof(EmitTest));
        ILGenerator gen = dynMeth.GetILGenerator();
        gen.EmitWriteLine("Foo");
        gen.Emit(OpCodes.Ret);
        dynMeth.Invoke(null, null);
        dynamic d = this;
        d.Foo();
    }
} 
```

无论如何要使这项工作按预期进行，还是DLR的限制？在这里，我创建了一个新的 void 方法 Foo() 并将其创建为 EmitTest 类的成员。运行时说在 EmitTest 上找不到 Foo()

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T03:35:30.653

你误解了`owner`参数。
MSDN[说](http://msdn.microsoft.com/en-us/library/z84bd3st.aspx)：（重点补充）

> `owner`
> 
> > 与动态方法**逻辑**关联的类型。动态方法可以访问该类型的所有成员。

您不能将方法添加到现有类型。

# html - 元素顶部和底部的 CSS3 线性渐变

> ID：13576965
> 
> 赞同：2
> 
> 时间：2012-11-27T03:31:18.643
> 
> 标签：html, css

我正在尝试为元素的顶部和底部获得线性渐变。在谷歌上找到的教程到处都是，所以我希望这里有人能提供帮助。

这是 HTML 和 CSS 代码：

CSS：

```
.content {background: -webkit-gradient(linear, center bottom, center top, from(#f5f5f5), to(#fff));  }
.separator {
    height:1px;
    border-bottom:1px solid #ebebeb;
    } 
```

HTML：

```
<div class="content">

</div>

<div class="separator"></div>

<div class="content">

</div>

<div class="separator"></div>

<!-- etc... -> 
```

我希望它产生这个：

![在此处输入图像描述](../Images/7a096d85612cf924b7555e17fdf72eda.png)

当然，我使用的 CSS 和 HTML 在内容底部显示渐变。如何以最少的 HTML 同时使用顶部和底部来显示它？

我将在其中包含内容，`.content`因此我希望渐变成为背景图像。我可以添加一个渐变，`.separator`但渐变不会出现在下一个元素的后面。

我知道我可以使用背景图片，但我想避免这条路线，因为我有一个响应式设计。（是的，我知道我可以使用响应式背景图像，但我想只使用 CSS，不使用图像。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T04:32:03.290

我认为这对你有帮助

html

```
<div class="contentTop">

</div>

<div class="separator"></div>

<div class="contentBottom">

</div> 
```

css

```
.contentTop{
    height:100px;
    background:#ffffff;
    /* For WebKit (Safari, Google Chrome etc) */
    background:-webkit-gradient(linear, left top, left bottom, from(#fff), to(#f1f1f1));
    /* For Mozilla/Gecko (Firefox etc) */
    background:-moz-linear-gradient(top, #fff, #f1f1f1);
    /* For Internet Explorer 5.5 - 7 */
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#fff, endColorstr=#f1f1f1);
    /* For Internet Explorer 8 */
    -ms-filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#fff, endColorstr=#f1f1f1)";   
}
.contentBottom{
    height:100px;
    background:#f5f5f5;
    /* For WebKit (Safari, Google Chrome etc) */
    background:-webkit-gradient(linear, left top, left bottom, from(#f5f5f5), to(#fff));
    /* For Mozilla/Gecko (Firefox etc) */
    background:-moz-linear-gradient(top, #f5f5f5, #fff);
    /* For Internet Explorer 5.5 - 7 */
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#f5f5f5, endColorstr=#fff);
    /* For Internet Explorer 8 */
    -ms-filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#f5f5f5, endColorstr=#fff)";   
}
.separator{
    border-top:solid 1px #eaeaea;
    height:1px;
    font-size:0;
    line-height:0;
} 
```

这是[jsFiddle 文件](http://jsfiddle.net/a4vA4/)

# c++ - 在 C/C++ 程序执行期间，泄漏的内存是否会一直丢失？

> ID：13576969
> 
> 赞同：1
> 
> 时间：2012-11-27T03:31:47.127
> 
> 标签：c++, c, memory, memory-management, operating-system

以下代码有明显的内存泄漏：

```
void Memory_Leak(void);
void Lots_Of_Other_Stuff(void);

int main(){

    Memory_Leak();
    Lots_Of_Other_Stuff();
}

void Memory_Leak(void)
{
  int *data = new int;
  *data = 15;
  return;
}
void Lots_Of_Other_Stuff(void){
    //allocates/deletes more memory
    //calls functions
    //etc..
    return;
} 
```

在程序期间，内存可以恢复吗？
程序是否可以覆盖丢失的内存，并达到没有内存丢失的状态？
操作系统可以在程序仍在运行时恢复它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T03:33:21.070

不，在您的程序完成执行之前不会恢复内存。

不。如果您能够覆盖该内存，那么首先就不会发生内存泄漏，因为您仍然必须有一些指向已分配内存的指针（使用 new 或 malloc 分配新内存永远不会给您相同的已分配内存）。

不，操作系统无法知道您的程序没有仍在使用该内存，因此它无法恢复它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T03:45:25.327

标准 C++ 无法知道您不再使用内存。

存在一些特定于平台的机制用于内省内存堆，通常用于调试，例如

[http://msdn.microsoft.com/en-us/library/974tc9t1(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/974tc9t1(v=vs.80).aspx)

*从理论上讲*，您*可以*在运行`Memory_Leak()`. 然后在它完成后，你可以寻找任何你认为是泄漏的东西并释放它。 **但不要这样做。** 只是为了彻底而提及它。

避免泄漏的 C++ 方法是使用“智能”指针而不是“原始/裸/哑/C 样式”指针。例如：

```
void Memory_Leak(void) // actually, with this change it won't leak anymore...
{
    shared_ptr<int> data (new int);
    *data = 15;
    return;
} 
```

共享指针是一个带有析构函数的对象，因此它有机会在其生命周期结束时运行一些代码。该代码释放内存。在这种情况下，局部变量`data`在 return 语句处结束它的生命，如果 shared_ptr 没有被复制并存储在其他地方，那么在内存中为整数保存的引用计数将为零。这样内存就会被释放。

您可以在 StackOverflow、Wikipedia、Google 等网站上阅读更多关于智能指针的信息。

[http://en.wikipedia.org/wiki/Smart_pointer](http://en.wikipedia.org/wiki/Smart_pointer)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T03:35:26.063

是的，在程序执行期间内存会丢失。操作系统无法知道您丢失了对该内存位置的所有引用。

这是 C/C++ 和 Java/C# 之间的根本区别之一。

垃圾收集是用于确定内存位置是否不再有任何引用它的机制，并且是允许操作系统回收未使用内存的机制 - 在 C/C++ 中不可用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T03:36:33.240

> 在程序执行期间，内存是否会全部恢复？

不：除非你神奇地猜到了丢失变量的地址并调用`delete`它，否则它就消失了。

> 程序现在可以重写这块内存，并达到没有内存丢失的状态吗？

不 - 同样，一旦您丢失了对分配的内存区域地址的引用，您就无法恢复相应的内存块。

> 操作系统可以在程序仍在运行时恢复它吗？

不，操作系统在进程退出之前不会恢复该内存。

# java - Swing ContentPane 使用（重新）验证后不更新，重新绘制

> ID：13576985
> 
> 赞同：2
> 
> 时间：2012-11-27T03:33:22.787
> 
> 标签：java, swing, event-dispatch-thread, contentpane

类似的问题已经被问过好几次了。参见例如[这里](https://stackoverflow.com/questions/2155351/swing-jpanel-wont-repaint)和[这里](https://stackoverflow.com/questions/10154812/swing-menu-item-selection-not-setting-content-in-the-contentpane)。

然而，我真的很想了解为什么我的代码不起作用。正如在这个问题的其他版本中所回答的那样， CardLayout 可能就足够了，但在我的情况下，我不确定它是否理想。无论如何，我感兴趣的是*从概念上*理解为什么这不起作用。

我有一个 JFrame，它的内容窗格监听关键事件。当在内容窗格中按下某个键时，内容窗格会告诉 JFrame 使用新的内容窗格更新自身。这是问题的一个简单示例：

**此代码是完全可编译的。您可以复制粘贴它并按原样运行它。**

这是我的 JFrame：

```
import javax.swing.*;
import java.awt.*;
import java.util.Random;

public class SimpleSim extends JFrame{

    private static SimpleSim instance = null;

    public static SimpleSim getInstance(){
        if(instance == null){
            instance = new SimpleSim();
        }

        return instance;
    }

    private SimpleSim(){}

    public void initialize(){

        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setExtendedState(Frame.MAXIMIZED_BOTH);
        this.pack();
        this.setVisible(true);

        update();
    }

    public void update(){
        System.out.println("SIMPLE_SIM UPDATE THREAD: " + Thread.currentThread().getName());
        Random rand = new Random();

        float r = rand.nextFloat();
        float g = rand.nextFloat();
        float b = rand.nextFloat();

        SimplePanel simplePanel = new SimplePanel(new Color(r, g, b));
        JPanel contentPane = (JPanel) this.getContentPane();

        contentPane.removeAll();
        contentPane.add(simplePanel);
        contentPane.revalidate();
        contentPane.repaint();

        validate();
        repaint();

    }

} 
```

这是我的 JPanel，用作我的内容窗格：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

public class SimplePanel extends JPanel implements KeyListener {

    public SimplePanel(Color c){

        setFocusable(true);
        setLayout(null);
        setBackground(c);
        setVisible(true);
        this.addKeyListener(this);
    }
    public void keyTyped(KeyEvent keyEvent) {
        if(keyEvent.getKeyChar() == 'a'){
            System.out.println("a");
            System.out.println("SIMPLE_PANEL KEY PRESS THREAD: "  + Thread.currentThread().getName());
            SimpleSim.getInstance().update();
        }
    }

    public void keyPressed(KeyEvent keyEvent) {
    }
    public void keyReleased(KeyEvent keyEvent) {
    }
} 
```

奇怪的是，它在您第一次按 时起作用`a`，但在之后不起作用。我的猜测是这里发生了线程问题。我可以看到`update`第一次调用它是在主线程上调用的。下次在 EDT 上调用它。我尝试使用 invokeLater() 调用 update() ，但也没有用。我找到了使用不同设计模式的解决方法，但我真的很想了解为什么这不起作用。

此外，运行简单的类：

```
public class Run {

    public static void main(String[] args){
        SimpleSim.getInstance().initialize();
    }
} 
```

**注意：**对验证和重新绘制 JFrame 的看似多余的调用是为了试图安抚发布在我提供的第二个链接上的建议，该链接指出： *在受影响最大的组件上调用 validate()。这可能是 Java 渲染周期中最混乱的部分。对 invalidate 的调用将组件及其所有祖先标记为需要布局。对 validate 的调用执行组件及其所有后代的布局。一个“向上”工作，另一个“向下”工作。您需要在树中将受您的更改影响的最高组件上调用 validate*。我认为这会导致它工作，但无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T04:11:04.873

抱歉，我对您的代码进行了一些修改，但它使测试变得更加容易......

我可以看到的导入更改在更新方法中。基本上我只是简单地调用`revalidate`了框架

重新验证状态

> 重新验证组件层次结构，直到最近的验证根。
> 
> 此方法首先使从该组件开始到最近的验证根的组件层次结构无效。之后，从最近的验证根开始验证组件层次结构。
> 
> 这是一种方便的方法，旨在帮助应用程序开发人员避免手动查找验证根。基本上相当于先在这个组件上调用 invalidate() 方法，然后**在最近的 validate root 上调用 validate() 方法**。

我认为最后一部分是您自己的代码中缺少的部分。

```
public class SimpleSim extends JFrame {

    private static SimpleSim instance = null;

    public static SimpleSim getInstance() {
        if (instance == null) {
            instance = new SimpleSim();
        }

        return instance;
    }

    private SimpleSim() {
    }

    public void initialize() {

        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setSize(400, 400);
        this.setVisible(true);
        setLayout(new BorderLayout());

        update();

    }

    public void update() {
        System.out.println("NEXT: " + Thread.currentThread().getName());
        Random rand = new Random();

        float r = rand.nextFloat();
        float g = rand.nextFloat();
        float b = rand.nextFloat();

        SimplePanel simplePanel = new SimplePanel(new Color(r, g, b));
        JPanel contentPane = (JPanel) this.getContentPane();

        getContentPane().removeAll();
        add(simplePanel);

        revalidate();
    }

    public class SimplePanel extends JPanel {

        public SimplePanel(Color c) {

            setFocusable(true);
            setLayout(null);
            setBackground(c);
            setVisible(true);
            requestFocusInWindow();
            InputMap im = getInputMap(WHEN_IN_FOCUSED_WINDOW);
            ActionMap am = getActionMap();

            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_A, 0), "A");
            am.put("A", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    System.out.println("a");
                    System.out.println("KEY: " + Thread.currentThread().getName());
                    SimpleSim.getInstance().update();
                }
            });

        }
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                SimpleSim.getInstance().initialize();
            }
        });
    }
} 
```

另外，我建议您利用[键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)API 而不是使用`KeyListener`. 它将解决一些重点问题；）

**更新**

经过一段时间的各种排列测试，我们得出的结论是，主要问题与焦点问题有关。

虽然`SimplePanel`是可聚焦的，但没有任何东西给它焦点，这意味着无法触发关键侦听器。

在添加`simplePanel.requestFocusInWindow`到框架之后添加似乎允许关键侦听器保持活动状态。

根据我自己的测试，没有调用`revalidate`面板没有更新。

# javascript - Backbone - 对 fetch 实际在做什么以及我是否通过创建回调正确使用它感到困惑

> ID：13576986
> 
> 赞同：0
> 
> 时间：2012-11-27T03:33:31.710
> 
> 标签：javascript, backbone.js

刚开始使用主干并有一个快速的问题，并认为我会写一个简单的留言板。我想要一些响应哈希更改 detail/:id 的东西，并像这样将它添加到路由器中。这似乎可行，但我认为这不是正确的方法。一般来说，这是如何进行 http 调用获取对象的（特别是成功回调）？

```
var MessageBoardRouter = Backbone.Router.extend({
  routes: {
    "detail/:id" : "showDetail"//,
  },
  showDetail: function(id){
    console.log('within showDetail with ' + id);
    //var p1=new Post({header:'my original header'});
    var p2=new Post({id:id});
    p2.fetch({
     success: function(){   // <- should I be doing this or different way or is who strategy off???
     console.log(p2.attributes);
     var view= new MbDetail();
     view.render(p2);
    }
    });
 }, 
```

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:49:06.897

有 2 种方法可以响应主干事件：使用回调（就像您上面所说的那样）或使用事件绑定。对于一般情况，我认为事件绑定是更惯用和“骨干”的方法，原因如下：

*   事件允许代码中的多个位置对同一事件做出反应，而只能有一个回调
*   骨干是围绕事件设计的，因此这种方法是一致的并且是“骨干”
*   只有当你想覆盖默认的事件调度行为时，回调样式才是真正需要的
*   我相信回调风格是受 jquery 启发的，并且在骨干内部不像事件那样一致

但是，考虑到这一点，两种样式都可以正常工作。在您的具体示例中，您可能希望这样编写代码：

```
var p2=new Post({id:id});
p2.on('change', function(post){
 console.log(post.attributes);
 var view= new MbDetail();
 view.render(p2);
}
p2.fetch(); 
```

其他一些辅助点：

*   您不一定需要每次获取一个新的视图实例，您可以只创建一个，将模型传递给它的构造函数，并让它在每次获取时重新呈现自己。这将有助于避免由于遗留事件绑定导致的内存泄漏
*   不要将参数传递给`render()`. 它不是为期待他们而设计的。通过构造函数参数将模型传递给视图，然后根据需要`options.model`从内部引用模型。`render`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:20:17.637

如果您希望对每个事件都有一致的反应，那么绑定到`change`事件的方法通常可以很好地工作。

[Backbone fetch](http://backbonejs.org/#Model-fetch)返回一个[jqXHR](http://api.jquery.com/jQuery.ajax/#jqXHR)对象，该对象可以与 Deferred 对象一起使用。我发现这种方法通常看起来更好。

这是它的样子：

```
var MessageBoardRouter = Backbone.Router.extend({
  routes: {
    "detail/:id" : "showDetail"//,
  },
  showDetail: function(id){
    console.log('within showDetail with ' + id);
    //var p1=new Post({header:'my original header'});
    var p2=new Post({id:id});
    var view= new MbDetail();

    p2.fetch().done(function() {
     view.render(p2);
     console.log(p2.attributes);
    });
 }, 
```

# ruby-on-rails - ActiveRecord 不返回行，但在第二个重复行之后返回？

> ID：13576988
> 
> 赞同：0
> 
> 时间：2012-11-27T03:34:03.907
> 
> 标签：ruby-on-rails, ruby, activerecord

我有一个名为 users 的空表。我通过以下方式创建一个新用户：

```
User.create :fb_id => fb_id 
```

它成功创建了一个条目。

然后我通过以下方式查询它：

```
User.first(:include => :cookies, :conditions => {:cookies => {:opened => false} , :fb_id => fb_id}) 
```

回归`nil`！！

我检查了桌子，用户在那里。所以我通过以下方式创建了一个新的重复用户：

```
User.create :fb_id => fb_id 
```

现在有确切的两行具有相同的 fb_id。如果我现在像以前一样查询：

```
User.first(:include => :cookies, :conditions => {:cookies => {:opened => false} , :fb_id => fb_id}) 
```

它现在返回 id 为 2 的新用户！

这是怎么回事？我一直在尝试调试它 3-4 小时，但无法弄清楚。谢谢

我的模型：

```
class User < ActiveRecord::Base
    has_many :cookies
    has_many :fortunes, :through => :cookies
end

class Cookie < ActiveRecord::Base
    belongs_to :user
    belongs_to :fortune
end

class Fortune < ActiveRecord::Base
    has_many :cookies
    has_many :users, :through => :cookies
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T03:51:06.110

尝试这个：

```
 User.first(:include => :cookies, :conditions => ["cookies.opened=? or users.fb_id=?",false, fb_id]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:58:08.050

我相信 Rails`left outer join`在使用`include`. 但是，在加入关联行时，所有值都将为`null`. 因此，您应该使用类似的东西：

```
User.first(:include => :cookies, 
           :conditions => ["cookies.opened <> ? AND fb_id = ?", true, fb_id]) 
```

# python - 我的表单上的 NoReverseMatch

> ID：13576989
> 
> 赞同：0
> 
> 时间：2012-11-27T03:34:07.980
> 
> 标签：python, django, django-forms

我不断收到此`NoReverseMatch`错误。我的错误在于`<form action>`标签。但是，如果我将格式更改为类似于`<a href>`标签中的格式，那么一切都会好起来的。请指导我，因为我是 Django 新手。

```
<html>
<head><title>Feedbacks</title></head>

<body>
    {% if store_list %}
        <ul>
            {% for store in store_list %}
                <li><a href="/feedbacks/{{ store.store_name }}/add/">{{ store.store_name }}</a></li>
                <form action="{% url 'view' store.store_name %}" method="post">
                    <input type="submit" value="Add" text="Add" />
                </form>
            {% endfor %}
        </ul>
    {% else %}
        <p>List is empty.</p>
    {% endif %}
</body>
</html> 
```

我的网址.py

```
from django.conf.urls import patterns, url
from feedback import views

urlpatterns = patterns('',
    #/feedbacks
    url(r'^$', views.feedbacks, name="feedbacks"),
    # /feedbacks/Kenny Rogers/add/
    url(r'^(?P<store_name>.+)/add/$', views.add, name="add"),

    url(r'^(?P<store_name>.+)/view/$', views.view, name="view"),
) 
```

我的观点.py

```
from django.http import HttpResponse
from feedback.models import Store
from django.template import Context, loader
from django.shortcuts import render

def feedbacks(request):
    store_list = Store.objects.all()
    context = {"store_list" : store_list}
    return render(request, "feedback/feedbacks.html", context)

def add(request, store_name):
    return HttpResponse("I'm at the add page of %s. " % store_name)

def view(request, store_name):
    return HttpResponse("I'm at the view page of %s. " % store_name) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:49:27.287

1.  你没有`{% load url %}`或`{% load url from future %}`。
2.  Raunak Agarwal 正确强调了您尝试使用“查看”功能而不是“添加”。但是在这两种情况下，您都传递了相同的参数，因此它会起作用。

[在 Django 文档](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#url)中你可以找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:38:26.780

django 1.5 允许使用引号。如果您使用的是低于它的版本，请尝试将其删除。

```
<form action="{% url add store.store_name %}" method="post"> 
```

此外，尽管错误与此无关，但您缺少 csrf 令牌。

# java - 谷歌搜索克隆错误

> ID：13576993
> 
> 赞同：1
> 
> 时间：2012-11-27T03:34:23.223
> 
> 标签：java, php, google-search

我目前正在使用 greekdevs 谷歌克隆脚本，但由于某种原因，他们的所有版本都有相同的错误，只有在网络搜索中，如果你输入多个单词，它不会显示和结果，我启用了 PHP 错误，它会显示“注意：未定义的变量：导致“我一次又一次地通过代码，但我没有足够的经验来解决这个问题，因为他们不再更新这个项目，我希望这里有人可以帮我解决这个问题。

这是项目的链接：http: [//greekdev.blogspot.co.uk/2012/09/google-clone-script.html](http://greekdev.blogspot.co.uk/2012/09/google-clone-script.html)

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T22:08:02.503

此错误已在 1.2 版中修复。看看：http: [//sourceforge.net/projects/googleclone](http://sourceforge.net/projects/googleclone)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:45:21.337

如果他们停止了支持，那么这可能意味着有些事情不对劲。建议转移到不同的地方。

至于您的错误，`Notice: Undefined variable: results in`可以从此输出中找到错误。它会让您知道该行以及`results`未定义的文件。在这种情况下，您需要确保变量[isset](http://php.net/manual/en/function.isset.php)。

`if(isset($results)){}`

或者

`if(isset($ARRAY['results'])){}`

# actionscript-3 - FLEX 4 中的组合框功能

> ID：13576994
> 
> 赞同：0
> 
> 时间：2012-11-27T03:34:24.003
> 
> 标签：actionscript-3, combobox, flex4

我正在研究 FLEX 4，我遇到了一个关于 FLEX 4combobox 的奇怪问题。与下拉列表不同，组合框允许用户输入一个值，然后组合框将显示建议值的列表。我的问题是：组合框似乎允许用户输入和保存无意义的值。例如，在下图中，允许值列表是从 1982 年到 2040 年的年份集合。

![在此处输入图像描述](../Images/e1db3a709a318c67be164bd278eb47e7.png)

但是，用户可以在组合框中键入“test”并单击保存。最终结果是年末季度/年末对是**3-test**。显然，这是一个荒谬的价值。

为什么会这样？有没有办法防止这种情况？我知道可以简单地切换到下拉列表，但由于“建议值”功能，我更喜欢保留组合框。

一个后续问题：无论有什么解决办法，是否有可能“全球”进行？意思是，我们可以在代码中的某一点进行修复并在整个项目中生效吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T04:59:57.780

对于这种类型的控件，这是非常标准的行为。`ComboBox`不知道是什么使输入有效或无效。它旨在接受任何输入，我们有责任验证输入是否适合我们的应用程序。

您可以做一些事情，这些事情的一些组合应该会有所帮助：

*   将 的[限制](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/ComboBox.html#restrict)属性设置为`ComboBox`仅包含您将允许输入的有效字符的字符串，例如字符串“0123456789”。

*   使用[maxChars](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/ComboBox.html#maxChars)属性将输入限制为 4 个字符。

*   玩转[labelToItemFunction](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/ComboBox.html#labelToItemFunction)属性。您可以将其设置为一个函数，该函数将根据用户的输入决定选择什么值。

*   使用[NumberValidator](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/validators/NumberValidator.html)或[DateValidator](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/validators/DateValidator.html)来验证用户是否输入了适当的值（或者只是在保存按钮的单击处理程序中自己添加此逻辑）

*   （可能不太有用）使用[itemMatchingFunction](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/ComboBox.html#itemMatchingFunction)属性。您可以使用它来自动选择第一个/最后一个（或其他）值作为默认值，而不是使用无意义的输入。