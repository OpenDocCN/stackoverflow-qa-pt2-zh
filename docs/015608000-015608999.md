# StackOverflow 问答 15608000-15608999

# c++ - 如何使用指针用随机数填充二维数组

> ID：15608004
> 
> 赞同：2
> 
> 时间：2013-03-25T05:05:28.453
> 
> 标签：c++, pointers, random, multidimensional-array, pointer-to-array

当我执行这段代码时，我没有得到一个完全随机数的矩阵，而是得到了许多重复的数字。知道如何使用rainGen 生成真正随机的二维矩阵吗？您能提供的任何帮助将不胜感激！

```
#include <iostream>
#include <cstdlib>
using namespace std;

const int MATRIX_ROW = 5;
const int MATRIX_COL = 5;

int** rainGen(int **theMatrix_ptr_ptr, int rows);

int main()
{
    int matrix[MATRIX_ROW][MATRIX_COL];
    int *matrix_ptr[MATRIX_ROW];
int **matrix_ptr_ptr = &matrix_ptr[0];
int rows = 3;

for (int count = 0; count < MATRIX_ROW; count++)
    matrix_ptr[count] = &matrix[count][0];

rainGen(matrix_ptr_ptr, rows);

return 0;
}

int** rainGen(int **theMatrix_ptr_ptr, int rows)
{
    srand(1023);

    for (int i = 0; i < rows; i++)
        for (int j = 0; j < MATRIX_COL; j++)
            *((*theMatrix_ptr_ptr + i) + j) = rand() % 100;

return theMatrix_ptr_ptr;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:11:57.593

我添加了一些调试代码。该`int matrix[MATRIX_ROW][MATRIX_COL];`语句为其分配内存，`matrix`但不初始化元素值。这些值将是先前内存使用留下的任何位模式。我将元素值初始化`matrix`为一个意外的值`-1`。最后，我打印了`matrix`.

```
#include <iostream>
#include <cstdlib>
using namespace std;

const int MATRIX_ROW = 5;
const int MATRIX_COL = 5;

int** rainGen(int **theMatrix_ptr_ptr, int rows);

int main()
{
     int matrix[MATRIX_ROW][MATRIX_COL];
     // initialize matrix elements to -1.
     for (int i = 0; i < MATRIX_ROW; ++i)
          for (int j = 0; j < MATRIX_COL; ++j)
               matrix[i][j] = -1;
     int *matrix_ptr[MATRIX_ROW];
     int **matrix_ptr_ptr = &matrix_ptr[0];
     int rows = 3; // error
     for (int i = 0; i < MATRIX_ROW; i++)
          matrix_ptr[i] = &matrix[i][0];
     rainGen(matrix_ptr_ptr, rows);
     // print matrix elements.
     for (int i = 0; i < MATRIX_ROW; ++i) {
          for (int j = 0; j < MATRIX_COL; ++j)
               cout << " [" << i << "," << j << "] " << matrix[i][j];
          cout << endl;
     }
     return 0;
}

int** rainGen(int **theMatrix_ptr_ptr, int rows)
{
     srand(1023);
     for (int i = 0; i < rows; i++)
          for (int j = 0; j < MATRIX_COL; j++)
               *((*theMatrix_ptr_ptr + i) + j) = rand() % 100; //error
     return theMatrix_ptr_ptr;
} 
```

输出：

```
[0,0] 8 [0,1] 53 [0,2] 30 [0,3] 51 [0,4] 40 
[1,0] 88 [1,1] 60 [1,2] -1 [1,3] -1 [1,4] -1 
[2,0] -1 [2,1] -1 [2,2] -1 [2,3] -1 [2,4] -1 
[3,0] -1 [3,1] -1 [3,2] -1 [3,3] -1 [3,4] -1 
[4,0] -1 [4,1] -1 [4,2] -1 [4,3] -1 [4,4] -1 
```

从`matrix`值为 的元素中可以看出`-1`，您并没有给出`matrix`随机值的所有元素。

作为一个有用的提示，我用评论标记了两个特别感兴趣的陈述`// error`。

解决问题后，输出应如下所示：

```
[0,0] 8 [0,1] 14 [0,2] 19 [0,3] 36 [0,4] 99 
[1,0] 53 [1,1] 45 [1,2] 20 [1,3] 64 [1,4] 3 
[2,0] 30 [2,1] 51 [2,2] 40 [2,3] 88 [2,4] 60 
[3,0] 22 [3,1] 36 [3,2] 42 [3,3] 1 [3,4] 49 
[4,0] 96 [4,1] 24 [4,2] 48 [4,3] 92 [4,4] 46 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:19:10.973

srand() 重新初始化随机生成器。您可以使用当前时间作为 srand() 的参数。这将解决你的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T07:24:09.323

根据我对你问题的理解。我为你提供了一些代码。可能这会对你有所帮助。

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <time.h>

    --------->int <---------
    main (int argc, char *argv[])
    {
      /* Simple "srand()" seed: just use "time()" */
      unsigned int iseed = (unsigned int)time(NULL);
      srand (iseed);

      /* Now generate 5 pseudo-random numbers */
      int i;
      for (i=0; i<5; i++)
      {
        printf ("rand[%d]= %u\n",
          i, rand ());
      }
      return 0;
    }

 /*
     * rand: Generates 5 numbers using standard "srand()/rand()" function
     *
     * SAMPLE OUTPUT:
     *   rand[0]= 824522256
     *   rand[1]= 1360907941
     *   rand[2]= 1513675795
     *   rand[3]= 1046462087
     *   rand[4]= 253823980
     */ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T05:15:14.217

我认为你应该把你的 srand() 放在函数之外

```
int** rainGen(int **theMatrix_ptr_ptr, int rows) 
```

你应该把它放到 main() 中。

**另一种方法：**

您可以将 srand(1234) 更改为**srand(time())**

但你必须

```
#include <time.h> 
```

第一的

# firebird - 如何从 Firebird 中的 UDF 返回错误？

> ID：15608005
> 
> 赞同：3
> 
> 时间：2013-03-25T05:05:39.827
> 
> 标签：firebird

我正在为 Firebird 编写一个 UDF，它从 blob 中提取信息并将其作为字符串返回。

如果我遇到问题（错误的数据或 UDF 的错误参数），是否有任何方法可以将错误消息/代码发送回 Firebird。

我知道我可以将消息放入字符串返回值中，用户会看到它，但 Firebird 不会识别出发生了错误。

我正在使用火鸟 2.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T15:42:18.987

UDF 不应引发异常，因为 Firebird 引擎无法捕获它们。

[火鸟发行说明 2.1.4](http://firebirdsql.org/rlsnotesh/rlsnotes210.html#rnfb20x-udf-nullpointer)：

> 由于 UDF 没有正式的机制来表示错误，因此必须将返回值用作指示符。

例如，您可以使用**Magic Prefixes** Pattern 返回错误信息：

*   如果发生错误，则返回“！ErrorCode！错误消息”；
*   如果一切正常，则返回“结果”。

# android - 使用 asynctask 发送数据时强制关闭

> ID：15608007
> 
> 赞同：0
> 
> 时间：2013-03-25T05:05:51.830
> 
> 标签：android

我使用 asynctask 将 http 发送到服务器。我把传递参数给我的异步任务。这是我的异步任务

```
private class ProcessSend extends AsyncTask<String, Boolean, String> {

        //private HttpClient mHc = new DefaultHttpClient();
        HttpClient httpclient = new DefaultHttpClient();
        private ProgressDialog pDialog;

        @Override
        protected void onPreExecute() {
            super.onPreExecute();

            pDialog = new ProgressDialog(MainPetakTetap.this);
            pDialog.setMessage("Loading Send ...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();

        }
        @Override
        protected String doInBackground(String... params) {
            publishProgress(true);
            // Do the usual httpclient thing to get the result
            String code = params[0];
            String alamat = params[1];
            String batas = params[2];
            String lat = params[3];
            String lon = params[4];
            String luas = params[5];
            String tglA = params[6];
            String tglB = params[7];
            String userId = params[8];
            //Toast.makeText(MainPetakTetap.this, "response : " + name, Toast.LENGTH_LONG).show();
            String url;
            url = CGlobalConfig.getURLRcvrPetakTetap();
            // Create a new HttpClient and Post Header

            HttpPost httppost = new HttpPost(url);

            //This is the data to send
            //String MyName = "puja"; //any data to send

            try {
            // Add your data
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
            nameValuePairs.add(new BasicNameValuePair("code", code));
            nameValuePairs.add(new BasicNameValuePair("alamat", alamat));
            nameValuePairs.add(new BasicNameValuePair("info_batas", batas));
            nameValuePairs.add(new BasicNameValuePair("lat", lat));
            nameValuePairs.add(new BasicNameValuePair("lon", lon));
            nameValuePairs.add(new BasicNameValuePair("luas", luas));
            nameValuePairs.add(new BasicNameValuePair("tgl_awal", tglA));
            nameValuePairs.add(new BasicNameValuePair("tgl_akhir", tglB));
            nameValuePairs.add(new BasicNameValuePair("user_id", userId));

            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            // Execute HTTP Post Request

            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            String response = httpclient.execute(httppost, responseHandler);

            //This is the response from a php application
            final String reverseString = response;
            runOnUiThread(new Runnable() {
                  public void run() {
                      Toast.makeText(MainPetakTetap.this, "response : " + reverseString, Toast.LENGTH_LONG).show();
                  }
                });

            //saveContact(code);
            } catch (final ClientProtocolException e) {
                runOnUiThread(new Runnable() {
                      public void run() {
                          Toast.makeText(MainPetakTetap.this, "CPE response " + e.toString(), Toast.LENGTH_LONG).show();
                      }
                    });
            // TODO Auto-generated catch block
            } catch (final IOException e) {
                runOnUiThread(new Runnable() {
                      public void run() {
                          Toast.makeText(MainPetakTetap.this, "IOE response " + e.toString(), Toast.LENGTH_LONG).show();
                      }
                    });
            // TODO Auto-generated catch block
            }

            // stop gps
            lman.removeUpdates(locaListener);
            constantsCursor.requery();
            return null;
        }

        @Override
        protected void onProgressUpdate(Boolean... progress) {
            // line below coupled with 
            //    getWindow().requestFeature(Window.FEATURE_INDETERMINATE_PROGRESS) 
            //    before setContentView 
            // will show the wait animation on the top-right corner
            MainPetakTetap.this.setProgressBarIndeterminateVisibility(progress[0]);
        }

        @Override
        protected void onPostExecute(String result) {
            publishProgress(false);
            pDialog.dismiss();
            // Do something with result in your activity
        }

    } 
```

但是当显示进度对话框发送时，吐司是显示成功但强制关闭。这是我的日志猫

```
03-25 11:57:40.320: ERROR/AndroidRuntime(5704): FATAL EXCEPTION: AsyncTask #1
03-25 11:57:40.320: ERROR/AndroidRuntime(5704): java.lang.RuntimeException: An error occured while executing doInBackground()
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     at java.lang.Thread.run(Thread.java:1019)
03-25 11:57:40.320: ERROR/AndroidRuntime(5704): Caused by: android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     at android.view.ViewRoot.checkThread(ViewRoot.java:2932)
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     at android.view.ViewRoot.requestLayout(ViewRoot.java:629)
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     at android.view.View.requestLayout(View.java:8267)
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     at android.view.View.requestLayout(View.java:8267)
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     at android.view.View.requestLayout(View.java:8267)
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     at android.view.View.requestLayout(View.java:8267)
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     at android.widget.ScrollView.requestLayout(ScrollView.java:1299)
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     at android.view.View.requestLayout(View.java:8267)
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     at android.view.View.requestLayout(View.java:8267)
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     at android.widget.AbsListView.requestLayout(AbsListView.java:1124)
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     at android.widget.AdapterView$AdapterDataSetObserver.onChanged(AdapterView.java:790)
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     at android.database.DataSetObservable.notifyChanged(DataSetObservable.java:31)
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     at android.widget.BaseAdapter.notifyDataSetChanged(BaseAdapter.java:50)
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     at android.widget.CursorAdapter$MyDataSetObserver.onChanged(CursorAdapter.java:385)
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     at android.database.DataSetObservable.notifyChanged(DataSetObservable.java:31)
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     at android.database.AbstractCursor.requery(AbstractCursor.java:97)
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     at android.database.sqlite.SQLiteCursor.requery(SQLiteCursor.java:548)
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     at hariff.ltis.petaktetap.MainPetakTetap$ProcessSend.doInBackground(MainPetakTetap.java:484)
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     at hariff.ltis.petaktetap.MainPetakTetap$ProcessSend.doInBackground(MainPetakTetap.java:1)
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
03-25 11:57:40.320: ERROR/AndroidRuntime(5704):     ... 4 more 
```

如何解决？

将运行 ui 线程从 Do in Background 移至 onPostExecute？但如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:23:25.873

而不是`runOnUiThread()`，只需返回错误消息并将其捕获`onPostExecute()`，然后您可以检查结果是否是`null`，如果不是 - 显示`Toast`并做其他事情。还有，搬家比较好

```
 lman.removeUpdates(locaListener);
        constantsCursor.requery(); 
```

到`onPostExecute()`也。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T05:14:16.610

您需要将对 cursor.requery 的调用移至 onPostExecute。该光标绑定到列表适配器，因此它调用 UI 代码。您只能在主线程上执行此操作。

# javascript - div内的iframe截断内容

> ID：15608012
> 
> 赞同：1
> 
> 时间：2013-03-25T05:06:54.037
> 
> 标签：javascript, jquery, html, css, iframe

我在 div 中有一个 iframe。问题是，iframe 里面有一个扩展菜单（垂直扩展）。因此，iframe 的高度将是动态的，具体取决于展开的项目。当我展开它时，它会被切断而不显示。下面是 div 和 iframe 的代码。

```
 <div class="camera">
<iframe name="ifra" id="ifra"  title ="iframe" src="pages/whitef.html" frameBorder=0 scrolling="no"></iframe>
</div> 
```

这是这两个项目的 css。

```
iframe#ifra{
position: relative;
width: 810px;
min-height: 750px;
height:100%;
margin-top: -40px;
z-index: 1;
border:none;
overflow:hidden;
}
.camera {
height: 100%;
} 
```

我想要实现的是 iframe 将根据扩展菜单进行扩展，并且不会被切断。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:26:18.077

答案在你的 CSS 中，

你可以写这个

```
overflow-y:scroll; //that will create a scroll in the iframe the content will not be hidden, 
```

当你写`OVERFLOW: HIDDEN;`它时，它会增加溢出并减少，不会显示。

编辑：对于新链接

参考旧对话

`http://stackoverflow.com/questions/934323/control-iframe-height-with-jquery`

那会做的:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:54:02.623

好的，[这个](http://www.dynamicdrive.com/dynamicindex17/iframessi2.htm)插件可以满足您的要求，但它仅在 iframe src 在您的域中时才有效。

还有[一篇](http://css-tricks.com/cross-domain-iframe-resizing/)关于 CSS 技巧的文章，您可能想看看。

# installation - 在 ubuntu ssl 证书错误上安装 Meteor

> ID：15608013
> 
> 赞同：0
> 
> 时间：2013-03-25T05:07:04.507
> 
> 标签：installation, meteor

当我尝试在 ubuntu(11.04) 上安装流星时：

```
**$ curl https://install.meteor.com | /bin/sh** 
```

我收到以下消息：

` % Total % Received % Xferd 平均速度 时间 时间 当前 Dload 上传总花费 左速度 0 0 0 0 0 0 0 0 --:--:-- --:--:-- --:--:- - 0curl: (60) SSL 证书问题，验证 CA 证书是否正常。详细信息：错误：14090086：SSL 例程：SSL3_GET_SERVER_CERTIFICATE：证书验证失败更多详细信息：[http ://curl.haxx.se/docs/sslcerts.html](http://curl.haxx.se/docs/sslcerts.html)

```
curl performs SSL certificate verification by default, using a "bundle"
 of Certificate Authority (CA) public keys (CA certs). If the default
 bundle file isn't adequate, you can specify an alternate file
 using the --cacert option.
If this HTTPS server uses a certificate signed by a CA represented in
 the bundle, the certificate verification probably failed due to a
 problem with the certificate (it might be expired, or the name might
 not match the domain name in the URL).
If you'd like to turn off curl's verification of the certificate, use
 the -k (or --insecure) option.` 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:31:33.187

看起来像是某种 SSL CA 证书错误，试试

```
sudo update-ca-certificates 
```

然后再试一次

同样，以下内容也应该可以正常工作：

```
curl http://install.meteor.com --insecure | /bin/sh 
```

# java - 画中画 Surfaceview 相机显示

> ID：15608025
> 
> 赞同：1
> 
> 时间：2013-03-25T05:08:35.590
> 
> 标签：java, android, surfaceview, android-picture-in-picture

我有一个显示相机预览显示的表面视图

像这样的东西在android中有这样的视图是可行的。

![在此处输入图像描述](../Images/8ca49b42647b661ec18a37750008d02e.png)

# java - LinkedList，队列与列表的区别

> ID：15608026
> 
> 赞同：40
> 
> 时间：2013-03-25T05:08:56.880
> 
> 标签：java, list, data-structures, linked-list, queue

创建这两个对象时有什么区别

```
Queue<String> test = new LinkedList<String>(); 
```

和

```
List<String> test2 = new LinkedList<String>(); 
```

`test`和之间的实际区别是`test2`什么？两者都是`LinkedList`吗？是否存在性能差异或使用其中一种的原因？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-03-25T05:13:16.020

您编写的两个语句都构造了一个`LinkedList<String>`对象来保存字符串列表，然后将其分配给一个变量。区别在于变量的类型。

通过将 分配给`LinkedList<String>`类型的变量`Queue<String>`，您只能访问接口`LinkedList`中可用的方法`Queue<String>`，其中包括对入队和出队元素的支持。如果您需要编写一个程序，该程序将队列用于各种操作并希望通过使用链表来实现该队列，这将非常有用。

通过将 分配给`LinkedList<String>`类型的变量`List<String>`，您只能访问接口`LinkedList`中可用的方法`List<String>`，这是维护元素序列的正常操作。例如，如果您需要处理可以在任何地方增长和缩小的元素列表，这将很有用。

简而言之，这两行创建了相同的对象，但打算以不同的方式使用它们。一个说它需要一个由链表支持的队列，而另一个说它需要一个由链表支持的通用元素序列。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T05:16:47.057

在这两种情况下，您都在实例化`LinkedList`.

不同之处在于您用来引用这些实例的变量的类型。

`test`是 类型`Queue`并且`test2`是 类型`List`。根据变量的类型，您只能调用在该特定类型上指定的方法。我认为这对您的情况很重要。

在性能方面，它将是相同的，因为您在这两种情况下使用的实际实现是相同的 ( `LinkedList`)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T05:16:34.887

除了您要公开的方法类型之外，我觉得它们几乎相同。由于 LinkedList 实现了这两个接口，因此选择其中一个可以访问该接口类型的方法。

请查看这些链接以获取接口方法声明

[http://docs.oracle.com/javase/6/docs/api/java/util/Queue.html](http://docs.oracle.com/javase/6/docs/api/java/util/Queue.html) [http://docs.oracle.com/javase/6/docs/api/java/util/List.html](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)

我不确定性能，但我想它应该没有什么不同，因为对象实现很常见。

# android - 如何从 VideoView 控制器中删除搜索栏？

> ID：15608027
> 
> 赞同：1
> 
> 时间：2013-03-25T05:09:04.237
> 
> 标签：android, android-video-player

在我的应用程序中，我正在显示来自远程服务器的视频。一切正常。我在 VideoView 的 .xml 文件中使用以下代码。

```
<VideoView
    android:id="@+id/video"
    android:layout_width="150dp"
    android:layout_height="150dp"
    android:layout_gravity="center"
    android:visibility="gone" >
</VideoView> 
```

以下是我播放视频的代码，

```
video.requestFocus();
video.setVideoURI(Uri.parse(ClipPath));
video.setMediaController(new MediaController( SubmitClipActivity.this) );
video.setOnPreparedListener(new MediaPlayer.OnPreparedListener()
{
    public void onPrepared(MediaPlayer mp) 
    {
        video.start();
        if ( video.isPlaying() )
        {
            MyProgressDialog.Dismiss();
        }
    }
});
video.setOnErrorListener(new MediaPlayer.OnErrorListener() 
{
    public boolean onError(MediaPlayer mp, int what, int extra) 
    {
        MyProgressDialog.Dismiss();
        return false;
    }
}); 
```

现在的问题是，只要活动可见，它就会在视频下方显示一个搜索栏，就像下图一样，

![搜索栏](../Images/41b36780f1d0e4f589bfe8528685e43b.png)

我只想，不显示底部的搜索栏。有可能隐藏它吗？我已经尝试过 VideoView 的`setClickable()`&`setScrollContainer()`方法，但没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:27:07.317

请看[`MediaController`](http://developer.android.com/reference/android/widget/MediaController.html)课。如果您想提供自定义控件，您可以扩展该类并提供您的实现。使用`VideoView's` [`setMediaController`](http://developer.android.com/reference/android/widget/VideoView.html#setMediaController(android.widget.MediaController))方法来分配用户定义的控件。您可以使用完全`videoView.setMediaController(null);`隐藏`MediaController`。[搜索此论坛](https://stackoverflow.com/search?q=%5Bandroid%5D+MediaController)以获取有关`MediaController`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T09:00:46.453

尝试这个，

```
 @Override
public boolean onTouchEvent(MotionEvent ev) {
if (ev.getAction() == MotionEvent.ACTION_DOWN) {
    if (controllerCreated == false) {
        videoView.setMediaController(mc);
        mc.show();
        controllerCreated = true;
    }
    return true;
} else {
    return false;
}
} 
```

# android - 如何在android中为一个按钮设置不同的文本大小？

> ID：15608030
> 
> 赞同：3
> 
> 时间：2013-03-25T05:09:16.483
> 
> 标签：android, android-button

我有一个按钮，我希望显示两种不同的文本大小。我已经将该文本声明为string.xml，并且我已经在java代码中设置了文本，`btnSin.setText(getResources().getString(R.string.lblasin) + "\n" + getResources().getString(R.string.lblSin));` 那么这样做的方法是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T10:00:42.480

```
SpannableStringBuilder spanSin = new SpannableStringBuilder();
    SpannableString itemasin = new SpannableString(getResources().getString(R.string.lblasin)+"\n");
    itemasin.setSpan(new AbsoluteSizeSpan(9, true), 0,itemasin.length(),0);
    itemasin.setSpan(new ForegroundColorSpan(Color.parseColor("#EA7C07")), 0, itemasin.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    spanSin.append(itemasin);

    SpannableString itemsin = new SpannableString(getResources().getString(R.string.lblSin));
    itemsin.setSpan(new AbsoluteSizeSpan(12, true), 0,itemsin.length(),0);
    spanSin.append(itemsin);
    btnSin.setText(spanSin,BufferType.SPANNABLE); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T05:12:08.713

将两个字符串包装在[AbsoluteSizeSpan](http://developer.android.com/reference/android/text/style/AbsoluteSizeSpan.html)对象 中

# c# - 如何在 endrequest 方法中获取 _dopostback() 中传递的参数？

> ID：15608031
> 
> 赞同：1
> 
> 时间：2013-03-25T05:09:16.800
> 
> 标签：c#, asp.net, ajax, microsoft-ajax

如何获取传入的参数值

`_dopostback('','');`

例如
`__doPostBack('<%=upSubAccount.ClientID %>',true);`
，我想在 endrequest() 处理程序中获取第二个参数，这里

//wire 结束请求过程，

```
Sys.WebForms.PageRequestManager.getInstance().add_endRequest(requestComplete_Handler)

    //will be called after the async request completes.
    function requestComplete_Handler(sender, args)
    {
        var panel = sender._postBackSettings.sourceElement.id;
        switch (panel)
        {
            case "<%=upSubAccount.ClientID %>":
                __doPostBack('<%=upAllocationChart.ClientID %>');
                break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:28:18.933

第二个参数是事件参数。
它不由框架存储。
但是，您可以轻松地将其存储在您自己的变量中并稍后访问它。
您只需要将 替换为`__doPostBack`您自己的功能。

```
var orignalDoPostback = __doPostBack;
var lastEventArgument = "";
__doPostBack = function(eventTarget, eventArgument)
{
   lastEventArgument = eventArgument;
   orignalDoPostback(eventTarget, eventArgument);
} 
```

然后，您可以根据需要使用它。

# javascript - 强制使用 javascript 时需要服务器端验证吗？

> ID：15608033
> 
> 赞同：0
> 
> 时间：2013-03-25T05:09:30.067
> 
> 标签：javascript, validation, web-applications, client-side, user-input

我了解用户可以禁用 Javascript。

我正在开发一个 Web 应用程序，每当用户提交表单（以及客户端验证）时，都会使用 javascript 修改隐藏字段，并在服务器端进行检查以查看用户是否禁用了 js。如果 js 被禁用，则会通知用户启用 javascript。

1.  我是否需要在服务器端再次验证输入？（如果是，那为什么？）
2.  在这种情况下，有没有办法绕过客户端验证？
3.  同样，在基于 ajax 的登录的情况下，我们是否需要在服务器端再次检查用户凭据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T05:11:34.417

您永远不应该信任任何客户端输入并始终在服务器上进行验证。
客户端验证只是为了方便用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T05:12:12.713

> 我是否需要在服务器端再次验证输入？

是的。[**总是。**](https://stackoverflow.com/a/5553434/139010)不要偷懒。甚至无法保证请求来自浏览器，更不用说启用了 JavaScript 的浏览器了。浏览器并不是发出 HTTP 请求的唯一方式，而且 HTTP 服务器——根据定义——服务于 HTTP 客户端，而不仅仅是浏览器。验证的存在是为了保护您、您的系统、您的宝贵数据以及您系统的其他用户。依赖客户端验证假定合作的、非恶意的客户端，但验证的全部*目的*是提供对不合作或恶意客户端的保护。

> 在这种情况下，有没有办法绕过客户端验证？

当然。请求可以“手动”构造，使服务器误以为隐藏字段是用 JavaScript 操作的，从而使服务器误以为 JS 已启用。隐藏字段对安全没有任何作用；[他们是微不足道的操纵。](https://stackoverflow.com/a/7962209/139010)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T05:14:20.377

您需要在服务器端再次验证输入。不要相信来自客户的任何输入。因为他们可以在没有您的表单的情况下发布任何数据。

客户端验证仅适用于 UX。

# oracle - 我在带有数字列的 Oracle 表上看到值 1E19

> ID：15608038
> 
> 赞同：0
> 
> 时间：2013-03-25T05:10:08.097
> 
> 标签：oracle, numbers

我在带有数字列的 Oracle 表上看到值 1E19。当我尝试将此值插入另一个标记为 number(20,5) 的列时，它会失败。如果我看到长度，它说 1E19 的长度为 19，这就是失败的原因 (>15)。1E19 = 1 后跟 18 个零的值也是如此。我如何在 Oracle 中查看文字值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:23:07.047

您需要从 NUMWIDTH 设置一个 SQL 会话值来保存列值。

```
SQL> SET NUMWIDTH 40
SQL> SELECT n
  2  FROM   t
  3  WHERE  n BETWEEN 12345678901234567800
  4               AND 12345678901234567900
  5  /
                                    N
----------------------------------------
                12345678901234567890 
```

这应该可以帮助您：

[http://www.orafaq.com/forum/t/9660/2/](http://www.orafaq.com/forum/t/9660/2/)

# scala - Scala：当应用多个隐式转换时

> ID：15608039
> 
> 赞同：2
> 
> 时间：2013-03-25T05:10:09.397
> 
> 标签：scala, implicit-conversion

《Scala 编程》一书规定：

> 直到 Scala 2.7，这就是故事的结局。每当应用多个隐式转换时，编译器都会拒绝在它们之间进行选择。... Scala 2.8 放宽了这条规则。如果一个可用的转换严格来说比其他的更具体，那么编译器将选择更具体的一个。...如果以下情况之一适用，则一种隐式转换比另一种更具体：
> 
> • 前者的参数类型是后者的子类型。

考虑以下情况：

```
object Encoder {
  implicit def fromInt(x: => Int) = { println("int"); new Encoder }
  implicit def fromIntArray(x: => Array[Int]) = { println("int array"); new Encoder }
  implicit def fromGenericArray[T](x: => Array[T])(implicit subencoder: (=> T) => Encoder) = {
    println("generic array")
    subencoder(x(0))
    new Encoder
  }
}
val e: Encoder = Array(1) 
```

此处可以应用多种转换，但似乎选择了 fromIntArray。当 fromIntArray 不存在时，选择 fromGenericArray。我的问题是，这种特定情况是否适用上述规则，以便我可以放心地期望 fromIntArray 将适用于 Array[Int] 和 fromGenericArray 用于所有其他 Array[T]？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:30:47.493

来自 Scala 语言规范：

> 如果有几个符合条件的参数与隐式参数的类型匹配，则将使用静态重载解析规则（第 6.26.3 节）选择一个最具体的参数。如果参数具有默认参数并且找不到隐式参数，则使用默认参数。

[http://www.scala-lang.org/docu/files/ScalaReference.pdf](http://www.scala-lang.org/docu/files/ScalaReference.pdf)

# c# - 如何在基于新闻的应用程序中应用 Windows Phone 7 中的翻页

> ID：15608040
> 
> 赞同：1
> 
> 时间：2013-03-25T05:10:10.877
> 
> 标签：c#, windows-phone-7

```
Mainpage.xaml.cs code

public partial class MainPage : PhoneApplicationPage
{ string f;
// Constructor
public MainPage()
{
InitializeComponent();

WebClient webClient = new WebClient();
webClient.DownloadStringCompleted += new DownloadStringCompletedEventHandler(webClient_DownloadStringCompleted);

webClient.DownloadStringAsync(new Uri("http://www.taxmann.com/TaxmannWhatsnewService/mobileservice.aspx?service=topstories"));

}

void webClient_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{
var rootObject = JsonConvert.DeserializeObject<List<NewsItem>>(e.Result);

foreach (var item in rootObject)
{

// Console.WriteLine(item.news_id + "new_id");
f += '|'+item.news_id;
//f ='|' + item.news_id;

}

lstEmployee.ItemsSource = rootObject;
}

private void lstEmployee_SelectionChanged_1(object sender, SelectionChangedEventArgs e)
{
int selindex = lstEmployee.SelectedIndex;

//ListBox sourceList = sender as ListBox;
//ListBox.se

(Application.Current as App).selectedNewsItem = lstEmployee.Items[lstEmployee.SelectedIndex] as NewsItem;
NavigationService.Navigate(new Uri("/Page1.xaml", UriKind.Relative));

}

}

public class NewsItem
{
public string news_id { get; set; }
public string news_title { get; set; }
public string website_link { get; set; }
public string imagepath { get; set; }
public string news_date { get; set; }

public string image_path { get; set; }
public string news_detail_description { get; set; }

}

}

page1.xaml.cs

public Page1()
{
InitializeComponent();

Loaded += new RoutedEventHandler(Page1_Loaded);

}

void Page1_Loaded(object sender, RoutedEventArgs e)
{
NewsItem selectedNewsItem = (Application.Current as App).selectedNewsItem;
// TextBlockNewsDescription.Text = selectedNewsItem.news_detail_description;
string strURI= selectedNewsItem.news_detail_description;

// strURI.Replace("<link href='http://www.taxmann.com/css/taxmannstyle.css' rel='stylesheet' type='text/css' />", "");
// string k = "<html><body style='background-color:Black;font-size:30px;color:#fff;'>" + strURI + "</body></html>";

string k = "<html><body href='http://www.taxmann.com/css/taxmannstyle.css' rel='stylesheet' type='text/css'>" + strURI + "</body></html>";

webBrowser1.NavigateToString(k);

}

}
} 
```

我想在 page1.xaml 中应用页面翻转我能够在 listview 中的 mainpage.xaml 中显示数据，并且在 page1.xaml.cs 中我根据主页的项目在 web 视图中显示数据现在我想要 page1.xaml 翻转假设用户翻到下一页，然后显示下一个项目详细信息，如果前一页翻页，则应显示上一个新闻详细信息。（就像 android view pager 一样）

我必须在 Windows Phone 7 中创建基于新闻的应用程序，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:06:11.070

您可以将 Pivot 控件添加到 Page1.xaml，将其绑定到 NewsItem 集合并将其设置`currentItem`为`selectedNewsItem`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:55:12.123

您可以使用全景模板代替原始模板。

# c# - 虚拟键盘自定义

> ID：15608041
> 
> 赞同：4
> 
> 时间：2013-03-25T05:10:11.317
> 
> 标签：c#, wpf, windows, touch, multi-touch

Windows 7 和 8 有一个虚拟键盘。（实际上，其中 2 个，但我说的不是“轻松访问”中的“屏幕键盘”，而是用于触控和笔输入设备的虚拟键盘）。我注意到只有 Internet Explorer 可以通过更改或添加一些按钮来自定义它，例如“.com”、“.net”以加快输入速度。仅当地址框激活时。

**我想知道天气我可以为我的应用程序（C#、WPF）的特定控件添加我自己的按钮，例如“创建新项目”或“链接”。**

请不要建议使用快捷方式，因为它需要 2 个按钮（默认情况下我有一种用于输入的文本框，我不能使用单个按钮作为快捷方式，而且快捷方式远不如清楚描述其功能的按钮那么明显和易于学习）。

![在此处输入图像描述](../Images/f4ea7c65cda0cf58422006d3d5a93099.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:21:05.447

使用该`TextBox.InputScope`属性来启用额外的按钮。你不能自己做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:15:36.713

您不能将按钮添加到虚拟键盘。请参阅[此](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/7349d01d-dc0e-4e1c-9327-df90e00fbebf/)MSDN 社交页面和[此](https://stackoverflow.com/questions/13539277/adding-buttons-to-the-windows-8-on-screen-keyboard)SO 帖子。

# php - 合并 PHP 数组

> ID：15608043
> 
> 赞同：-1
> 
> 时间：2013-03-25T05:10:18.537
> 
> 标签：php, arrays, merge

我有两个数组：

数组1：

```
Array ( [id] => 1 [time] => 12:10:23 [date] => 2013-03-24 ) 
```

数组2：

```
Array ( [id] => 2 [time] => 12:10:25 [date] => 2013-03-25 ) 
```

我想合并它们，以便它们产生以下结果（已编辑）：

```
Array ( [id] => 1
             => 2
        [time] => 12:10:23
               => 12:10:25
        [date] => 2013-03-24 
               => 2013-03-25 
      ) 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T05:14:14.990

如果你真的想要输出：

```
Array (
    Array ([id] => 1 [time] => 12:10:23 [date] => 2013-03-24 ),
    Array ([id] => 2 [time] => 12:10:25 [date] => 2013-03-25 )
) 
```

然后你想使用下面的代码：

```
$newArray = array($array1, $array2); 
```

要获取最近日期的元素：

```
$most_recent = $newArray[0];
foreach($newArray as $compare)
{
    if($compare['time'] > $most_recent['time'])
    {
        $most_recent = $compare;
    }
} 
```

# parsing - 如何从语言 x 的 Go 编译包中获取类型信息？

> ID：15608046
> 
> 赞同：2
> 
> 时间：2013-03-25T05:10:26.160
> 
> 标签：parsing, go

我想为 Go 语言编写一个具有基本自动完成功能的简单编辑器作为宠物项目。一个人会怎么做呢？我查看了 Eclipse 和 IntelliJ 的 Go 插件，但它们对于我来说太大而无法理解（更不用说要编译了）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T05:39:59.200

Go 标准库为[Go 解析器](http://golang.org/pkg/go/)提供了构建块，您可以使用它来解析源文件并查找函数定义等。

还有一个[`godoc`](http://golang.org/cmd/go/#hdr-Run_godoc_on_package_sources)命令已经做了你想要的：提取方法定义和它的文档。您可以查看 [源代码](http://code.google.com/p/go/source/browse/src/cmd/#cmd%2Fgodoc)以了解`godoc`其工作方式或`godoc`直接使用方式。

[这个用 Go](https://github.com/mikhailt/tabby)项目编写的编辑器具有可管理的代码量，您可以查看它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T08:21:42.053

解决这个问题的事实上的标准方法是使用[nsf 的 gocode](https://github.com/nsf/gocode)。我只在 Vim 中尝试过——效果很好。

即使有对特定编辑器的现成支持，gocode 也不是特定于编辑器的。它是一个带有通信协议的守护进程。因此它可以从任何程序中使用。

# javascript - 避免使用 MVC 和 Jquery 调用 db 来重置值

> ID：15608049
> 
> 赞同：1
> 
> 时间：2013-03-25T05:10:44.257
> 
> 标签：javascript, asp.net-mvc-3, jquery, asp.net-mvc-4

我正在使用 MVC4、jquery、ajax 和 json，我有任务

在注册表中，获取已经输入的数据进行编辑。我编辑了内容。然后我点击取消按钮，表单数据被重置为编辑之前的数据。

有什么方法可以避免 db 调用来重置值。？我听说 jquery 维护用于重置值的历史数据选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:20:21.050

第一次进行数据库调用以获取值时.....将这些值作为 JSON 对象存储在客户端。当用户编辑数据时，这些对象将能够保持其状态，因此将保持不变。因此，在单击取消时，从存储在客户端的 JSON 对象中获取原始值。因此，在这种情况下，整个流程将在客户端，并且不会进行服务器调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:26:38.613

我相信您可以`checked`使用 jQuery 使用通用方法来保存多个输入的当前值（和其他属性，例如 ），并使用另一种方法将值反转为该保存的值[`data`](http://api.jquery.com/data/)：

```
function save() {
    $("input, textarea, select").each(function() {
        $(this).data("savedVal", $(this).val());
        $(this).data("savedChecked", $(this).prop("checked"));
    });
}

function reset() {
    $("input, textarea, select").each(function() {
        $(this).val($(this).data("savedVal"));
        $(this).prop("checked", $(this).data("savedChecked"));
    });
} 
```

[演示](http://jsfiddle.net/mgibsonbr/JLZhJ/)。不过，我建议将您的选择器限制为特定的形式，而不是捕获整个页面中的所有输入。

# python - 在子路径下托管 Pyramid webapps

> ID：15608057
> 
> 赞同：3
> 
> 时间：2013-03-25T05:11:24.260
> 
> 标签：python, hosting, pyramid

我们有一个托管设置，我们有一个顶级域，我们在子路径下托管 Web 应用程序。例如：

```
  /projects -> 克隆
  / 内部 -> 雄猫
  ETC

```

在这种情况下，我们需要一种方法来告诉后端的 Web 应用程序它的基本路径是什么，以便它可以正确地生成指向其视图和静态内容的链接。对于上面的示例，这很好。

我们刚刚开始使用由 Waitress 提供服务的 Pyramid，但到目前为止我们还没有弄清楚如何做到这一点。有没有一种干净的方法可以在 Waitress 中配置这个基本路径，或者是否有一个更灵活的应用程序服务器可以使用来支持 Pyramid？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T06:53:02.870

WSGI 中的所有内容都与当前请求相关。您只需要`environ`正确设置（通常通过您的 WSGI 服务器）。

例如，`/projects`如果`request.environ['SCRIPT_NAME'] == '/projects'`. 如果您希望您的应用程序对其挂载点不可知，您可以简单地对其进行编码，就好像它在`/foo/bar`. `/projects`然后你通过一些中间件挂载你的应用程序，这些中间件可以`environ`正确地改变（mod_wsgi 和其他一些服务器应该能够自动为你做到这一点）。现在，当传入的 URL 是`/projects/foo/bar`and`environ['SCRIPT_NAME'] == '/projects'`时`environ['PATH_INFO'] == '/foo/bar'`，您的应用程序可以专注于相对路径。

在 Pyramid 中，这将归结为 ini 中的一个额外步骤，您可以在其中将前缀中间件添加到 WSGI 堆栈中。中间件会为您处理改变`PATH_INFO`和`SCRIPT_NAME`中的键`environ`。

```
[app:myapp]
use = egg:myapp

# ...

[filter:proxy-prefix]
use = egg:PasteDeploy#prefix
prefix = /projects

[pipeline:main]
pipeline =
    proxy-prefix
    myapp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T00:23:22.450

在我的金字塔应用程序中，在 .ini 配置文件（生产和开发）中，我正在做这样的事情：

```
filter-with = urlprefix

[filter:urlprefix]
use = egg:PasteDeploy#prefix
prefix = /mysubfolder 
```

我认为它可能与上面迈克尔的回答相同；我对 Pyramid 也还是比较陌生，我会像你一样放弃食谱。但最终结果是它从我的根目录创建了 /mysubfolder 的基本 URL，并且应用程序的其余部分与此相关。这是在本地 pserve 下运行的，我认为 nginix 在我的网络主机上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-06T05:05:07.547

repoze.vhm 应该适合您的用例。

如果您想使用虚拟根功能，我认为它不会起作用。即您的代理网络应用程序的子路径（*[https://hidden.tld/root/](https://hidden.tld/root/)*应该显示为*[https://example.com/](https://example.com/)*）

为了在外部域的子路径中公开您的应用程序 repoze.vhm 工作得很好。IMO 最好的一点是，您不需要将任何子路径配置或任何内容放入您的 Web 应用程序部署中。这允许您在代理上将 url 更改为您想要的任何内容，甚至可以在多个域名和/或子路径上公开相同的应用程序实例。

# ruby-on-rails - APN (Grocer Gem) sslv3 警报证书未知错误

> ID：15608062
> 
> 赞同：1
> 
> 时间：2013-03-25T05:11:42.840
> 
> 标签：ruby-on-rails, ruby, ssl, push-notification, ssl-certificate

当我发送消息时，我在 sidekiq 控制台中收到此错误，

SSL_connect 返回=1 errno=0 状态=SSLv3 读取完成 A：sslv3 警报证书未知

对于使用 apn_on_rails 的人，我看到了类似的错误，他们认为这与某人重做的证书有关并且它有效。我尝试做同样的事情，但仍然得到同样的错误。知道它可能是什么吗？我目前正在使用 grocer gem 来处理推送通知。

# clojure - 在 cljs 中漂亮的打印

> ID：15608063
> 
> 赞同：10
> 
> 时间：2013-03-25T05:11:44.147
> 
> 标签：clojure, clojurescript

我正在尝试在浏览器的控制台上从 clojurescript 漂亮地打印 JSON。

我找到了以下链接 -[如何使用 JavaScript 漂亮地打印 JSON？](https://stackoverflow.com/questions/4810841/json-pretty-print-using-javascript)

上面的链接提供了以下js -`JSON.stringify(obj, undefined, 2)`

cljs 中的以下翻译不起作用`(.stringify js/JSON obj undefined 2)`

1.  cljs 中是否有任何用于漂亮打印的本地方式？
2.  任何想法为什么上面的 cljs 表达式不起作用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T14:24:30.973

**更新**：ClojureScript 现在以 cljs.pprint 的形式拥有完整的 clojure.pprint 端口。

还有一个[fipp](https://github.com/brandonbloom/fipp)范围更窄，可能更快一些。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-07T23:44:16.847

```
cljs.user> (.stringify js/JSON (clj->js {:foo 42}) nil 2)
"{\n  \"foo\": 42\n}"

cljs.user> (pr-str {:foo 42})
"{:foo 42}" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-04T09:38:21.297

下面将 Clojure 映射 ( `object`) 转换为 JSON，并将其作为对象打印在控制台中，从而可以利用浏览器检查 JSON 功能：

```
(.dir js/console (clj->js object)) 
```

**编辑**：虽然漂亮的打印非常好，但在开发人员控制台中，我仍然更喜欢将数据结构作为树浏览的能力，现在经常使用[cljs-devtools](https://github.com/binaryage/cljs-devtools)。它是一个为您提供交互式数据树的库，可以将其扩展为普通的 js-object，但对于 vanilla clojure，无需转换为 js、meaning`:keywords`和`{:ma "ps"}`clj-family 的其余部分。

目前，它需要您向项目中添加 leiningen 依赖项和一些代码并使用 Chrome Canary。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-09T13:31:53.810

`clojure.pprint`已通过 release 移植到 ClojureScript `0.0-3255`。它被称为`cljs.pprint`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-11T16:39:18.330

确实，有人需要移植`clojure.pprint`，这似乎正在发生[`shaunlebron/cljs-pprint`](https://github.com/shaunlebron/cljs-pprint)。

同时，如果你在 NodeJS 上运行，我使用`prettyjson`from npm。

```
(ns foo (:require [cljs.nodejs :as nodejs]
                  [cljs.core :refer [clj->js]]))
(nodejs/enable-util-print!)
(def render (.-render (nodejs/require "prettyjson")))
(defn pp [value] (println (render (clj->js value)))) 
```

*然后它以彩色*YAML打印值：

```
ClojureScript:foo> (pp {:a 123 :foo ["baz" 42]})
a:   123
foo:
  - baz
  - 42 
```

这只是一个 hack，但至少是可读的。

# javascript - 通过 if 语句不工作隐藏下一个可见的兄弟姐妹

> ID：15608072
> 
> 赞同：1
> 
> 时间：2013-03-25T05:12:13.010
> 
> 标签：javascript, jquery

我有一个搜索过滤器功能，但我 99% 确定问题不存在。

我首先调用搜索过滤器，然后运行 ​​if 语句来确定是否应该隐藏该行。

想象一下，在执行搜索后我有以下可见的表行：

```
<tr>
  <td class="time">content<td>
</tr>
<tr>
  <td>result</td>
<tr>
</tr>
  <td>result</td>
</tr>
<tr>
  <td class="time">content<td>
</tr>
<tr>
  <td class="time">content<td>
</tr>
<tr>
  <td class="time">content<td>
</tr> 
```

**我的目标是隐藏所有具有时间类的 td 元素，前提是它们由包含具有相同时间类的 td 元素的行进行。**因此 if 语句应该只在我上面的例子中隐藏最后三行，即：

```
<tr>
  <td class="time">content<td>
</tr>
<tr>
  <td>result</td>
<tr>
</tr>
  <td>result</td>
</tr> 
```

我尝试了以下方法无济于事：

```
$('td.time').parent().each(function() {
  if($(this).siblings().first().children('td.time').length > 0) {
    $(this).hide();
  }
}); 
```

以上方法有效，但前提是我的搜索返回单个结果。如果在不同的时间行之后存在另一个结果，则错误地隐藏了该时间行。

以下是我目前拥有的，但它只是隐藏了所有时间行，即使理论上它是有意义的：

```
$('td.time').parent().each(function() {
  if($(this).next(':visible').children('.time')) {
    $(this).hide();
  }
}); 
```

我唯一的解释是，使用 .next() 它只查看下一个 td.time 父级，而不是所有可见表行中的下一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:14:51.740

尝试将[nextAll()](http://api.jquery.com/nextAll/)用于父 tr ，您可能不需要在这里使用 each 来隐藏所有 next`tr`与`td`class `time`。

**[现场演示](http://jsfiddle.net/dGrDL/)**

```
$(this).closest('tr').nextAll('tr:has(td.time)').hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:19:28.160

它不是很优雅，但[试试这个](http://jsbin.com/eqadej/2)

```
$(".time").each(function() {
    if ($(this).parent("tr").next("tr").find(".time").length > 0) {
        $(this).parent("tr").hide();
    }
}); 
```

# ruby-on-rails-3 - 使用 rails 3 上 best_in_place gem 激活器按钮的实时编辑字段

> ID：15608074
> 
> 赞同：0
> 
> 时间：2013-03-25T05:12:24.373
> 
> 标签：ruby-on-rails-3, best-in-place

我使用 best_in_place gem 编辑评论列表。这是我的代码。只是工作。但是创建新评论时失败了。几分钟后它也可以工作并刷新页面

%= 评论：内容类型：：textarea，路径：commen_path(comment)，激活器：“#activator-#{comment.id}”%>

('.best_in_place').best_in_place(); 该代码包括 js 文件中的 best_in_place。

也许它包括实时绑定......但是如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T10:43:26.290

它对我有用：

```
<% Comment.where(:user_id =>current_user.id).each do |comment| %>
  <%= best_in_place comment,:content %>
<%end%> 
```

# java - Java 套接字应用程序在尝试发送文件时发送额外的字节

> ID：15608075
> 
> 赞同：2
> 
> 时间：2013-03-25T05:12:25.437
> 
> 标签：java, sockets, file-io, stream, java-io

我的程序是一个典型的服务器-客户端应用程序。问题是，当我尝试发送文件时，出于某种原因，客户端套接字接收的字节数比服务器套接字发送的字节数多。更奇怪的是，这些字节位于开头，并且它们的数量根据文件大小而变化。当我尝试发送 1x1px 文件时，有 6 个字节的偏移量（添加了 6 个字节的数据，如果我跳过它们，会给出正确的图像），而 800x600 字节的偏移量更大（总第二个输出文件比第二个输入大 56 个字节） . 在互联网上搜索后，我发现的唯一两个建议是尝试事先清除缓冲区，我想我试过了，但它只是“吃掉”了我的第一个 inStream.read()。第二个与发送包裹的方式有关，大小必须乘以某个数字？但这似乎很奇怪，因为不会

客户端类

```
public class Client{

import java.io.BufferedReader;

public class Client implements Runnable {
static Socket clientSocket = null;
static Socket iClientSocket = null;
static PrintWriter out = null;
static BufferedReader in = null;
static InputStream iin = null;
public static void main(String[] args) {
    int port = Integer.valueOf(args[1]);
    String host = args[0];

    try {
        clientSocket = new Socket(host, port);
        iClientSocket = new Socket(host, port);
        out = new PrintWriter(clientSocket.getOutputStream(), true);
        in = new BufferedReader(new InputStreamReader(
                clientSocket.getInputStream()));
        iin = iClientSocket.getInputStream();
    } catch (UnknownHostException e) {
        System.err.println("Don't know about host: " + host);
        System.exit(-1);
    } catch (IOException e) {
        System.err.println("Couldn't get I/O for " + "the connection to: "
                + host);
        System.exit(-1);
    }

    BufferedReader stdIn = new BufferedReader(new InputStreamReader(
            System.in));
    String userInput;

    try {
        new Thread(new Client()).start();
        while ((userInput = stdIn.readLine()) != null) {
            out.println(userInput);
        }
        System.out.println("Closing sockets, closing streams");

        out.close();
        in.close();
        stdIn.close();
        iClientSocket.close();
        clientSocket.close();

    } catch (IOException e) {
        System.exit(-1);
    }

}

@Override
public void run() {
    String a = null;

    try {
        while (true) {
            if((a = in.readLine()) == null)
                continue;
            //System.out.println("Tried to read");
            int n;
            try{
                n = Integer.valueOf(a);
            }catch(NumberFormatException e){
                System.out.println(a);
                n=1;
                //continue;
            }
            a = "";
            for (int i = 0; i < n; i++)
                a += in.readLine() + "\n";
            System.out.println(a);
            // if(a.contains("POST"),)
            if (a.compareToIgnoreCase("EXIT") == 0) {
                System.out.println("Exiting");
                break;
            }
            if (a.endsWith("Sending File\n")) {

                System.out.println("Recieving image.");
                a=in.readLine();
                a=in.readLine();
                FileOutputStream iout = new FileOutputStream(a);
                int fileSize=Integer.parseInt(in.readLine());
                int total=0;
                int step = 1500;
                int bufferSize = 0;
                // if(step>fileSize)
                // bufferSize=(int) fileSize;
                // else
                bufferSize = step;
                byte[] buffer = new byte[bufferSize];
                int read=0;

                while (fileSize-total>0 && (read = iin.read(buffer, 0, (int)Math.min(buffer.length, fileSize-total))) > 0) {
                    iout.write(buffer, 0, read);
                    //out.println("saved packet");
                    total+=read;

                }
                iout.flush();
                iout.close();
                System.out.println("Image recieved");

            }
        }
    } catch (IOException e) {
        System.exit(-1);
    }

} 
```

}

服务器类，负责发送

```
public class Server implements Runnable {

static ServerSocket serverSocket;
Socket tempSocket;
Socket tempSocket2;
static volatile List<User> usersList = new ArrayList<User>();
static boolean waitForNew = true;
PrintWriter tempOut;
volatile User[] tempUser;
volatile boolean isReadingN = false;

public Server(Socket _s, Socket _s2) {
    tempSocket = _s;
    tempSocket2 = _s2;
}

public Server(PrintWriter nOut, User[] user) {
    tempOut = nOut;
    tempUser = user;
    isReadingN = true;
}

@Override
public void run() {
    if (isReadingN) {
        while (true) {
            if (tempUser != null && tempUser.length > 0
                    && tempUser[0] != null)
                break;
        }
        User[] myUser = new User[1];
        myUser[0] = tempUser[0];
        // myUser[0]=usersList.
        while (true) {
            if (myUser[0].isCurrentlyLoggedIn() == false)
                break;
            String[] toSend = null;
            if (myUser[0].isNotificable())
                toSend = myUser[0].printNotifications().split("\n");
            else
                continue;
            //tempOut.println("");
            tempOut.println("1");
            tempOut.println(myUser[0].getName());
            int sendL=toSend.length;
            tempOut.println(String.valueOf(sendL));
            for (int i = 0; i < toSend.length; i++)
                tempOut.println(toSend[i]);
        }
        return;
    }
    Socket clientSocket = tempSocket;
    System.out.println("Initiating conversation with the client");
    String inputLine;
    try {
        System.out.print("creating server out...");
        PrintWriter out = new PrintWriter(clientSocket.getOutputStream(),
                true);
        Socket iClientSocket = tempSocket2;
        ObjectOutputStream iout = new ObjectOutputStream(
                iClientSocket.getOutputStream());
        System.out.println("OK!");
        System.out.print("creating server in...");
        BufferedReader in = new BufferedReader(new InputStreamReader(
                clientSocket.getInputStream()));
        System.out.println("OK!");
        System.out.print("creating server image streams...");
        System.out.println("OK!");
        System.out.println("Server initiating conversation");
        User[] currentUser = new User[1];
        new Thread(new Server(out, currentUser)).start();
        while ((inputLine = in.readLine()) != null) {
            System.out.println(inputLine);
            boolean[] downloadPicture = new boolean[1];
            downloadPicture[0] = false;
            String input = Command.call(inputLine, currentUser, usersList,
                    downloadPicture);
            String[] toSend;
            if (input != null) {
                toSend = input.split("\n");
            } else
                toSend = new String[0];
            out.println(String.valueOf(toSend.length));
            for (int i = 0; i < toSend.length; i++)
                out.println(toSend[i]);
            if (downloadPicture[0]) {
                out.println("1");
                out.println("Sending File");

                System.out.println("Sending File");
                String[] temp = inputLine.split(" ");
                String path = temp[temp.length - 1];
                path = path.replace("\\", "\\\\");
                File f = new File(path);
                temp=path.split("\\\\");
                String fileName=temp[temp.length-1];
                out.println("1");
                out.println(fileName);
                if (f.exists()) {
                    FileInputStream iin = new FileInputStream(path);

                    long fileSize = f.length();

                    out.println(fileSize);

                    int step = 1500;
                    int bufferSize = 0;
                    if (step > fileSize)
                        bufferSize = (int) fileSize;
                    else
                        bufferSize = step;
                    int bytesRead = 0;
                    byte[] buffer = new byte[bufferSize];
                    iout.flush();
                    while ((bytesRead = iin.read(buffer)) > 0) {
                        //iout.flush();
                        iout.write(buffer, 0, bytesRead);
                        // System.out.println(in.readLine());
                    }
                    // iout.write(buffer,0,0);
                    iout.flush();
                    System.out.println("File sent.");
                    iin.close();

                } else{
                    out.println("1");
                    out.println("Error: File does not exit.");}
            } else
                //out.println(" ");
            if (inputLine.equals("EXIT")) {
                waitForNew = false;
                break;
            }
        }
        // End communication graciously
        System.out.println("Closing sockets, closing streams");
        out.close();
        in.close();
        clientSocket.close();
        serverSocket.close();
    } catch (IIOException e) {
        System.out.println("Error: Could not find file");
        e.printStackTrace();
        System.exit(-1);
    } catch (IOException e) {
        System.out.println("Error");
        e.printStackTrace();
        System.exit(-1);
    }

}

public static void main(String[] args) {
    // Create socket on port given in argument, localhost
    if (args.length == 0) {
        System.out
                .println("Not enough arguments. Try Server <port number>");
        System.exit(-1);
    }
    int port = 0;
    try {
        port = Integer.valueOf(args[0]);
        System.out.println("Application start");

        serverSocket = new ServerSocket(port);
        System.out.println("Created socket on port " + port);
    } catch (NumberFormatException c) {
        System.out
                .println("Incorrect port number. Try Server <port number>");
        System.exit(-1);
    } catch (IOException e) {
        System.exit(-1);
    }

    // Waiting for client
    System.out.println("Waiting for client...");
    Socket clientSocket = null;
    Socket iClientSocket = null;
    while (waitForNew) {
        try {
            clientSocket = serverSocket.accept();
            iClientSocket = serverSocket.accept();
            new Thread(new Server(clientSocket, iClientSocket)).start();
        } catch (IOException e) {
            System.out.println("Accept failed: " + port);
            System.exit(-1);
        }
    }

}
 } 
```

命令类，在服务器端操作命令，返回输出。

```
 public class Command {
static volatile List<Status> statusList = new ArrayList<Status>();
static Object block_statusList = new Object();

public static String call(String arg, User[] user, List<User> userlist,
        boolean[] downloadPicture) {

    String command[] = arg.split(" ");
    if (command.length == 0)
        return "";
    else if (command[0].compareTo("LOGIN") == 0)
        return login(command, user, userlist);
    else if (command[0].compareTo("EXIT") == 0)
        return exit(command, user, userlist);
    else if (user == null || user.length != 1 || user[0] == null
            || !user[0].isCurrentlyLoggedIn())
        return "You need to login first. Try LOGIN <username>";
    else if (command[0].compareTo("LOGOUT") == 0)
        return logout(command, user, userlist);
    else if (command[0].compareTo("POST") == 0)
        return post(command, user, userlist, downloadPicture);
    else if (command[0].compareTo("TIMELINE") == 0)
        return timeline(command, user, userlist);
    else if (command[0].compareTo("FOLLOW") == 0)
        return follow(command, user, userlist);
    else if (command[0].compareTo("UNFOLLOW") == 0)
        return unfollow(command, user, userlist);
    else if (command[0].compareTo("VIEWSTATUS") == 0)
        return viewstatus(command, user, userlist);
    else if (command[0].compareTo("LISTUSER") == 0)
        return listuser(command, user, userlist);
    else if (command[0].compareTo("VIEWUSER") == 0)
        return viewuser(command, user, userlist);
    else if (command[0].compareTo("COMMENT") == 0)
        return comment(command, user, userlist);

    else
        return "Command not recognized";
}

private static String logout(String[] arg, User[] user, List<User> userlist) {
    if (arg.length != 1)
        return "Wrong number of parameters. LOGOUT does not take any parameters";
    user[0].setCurrentlyLoggedIn(false);
    return "Logged out.";
}

private static String[] parseArg(String[] arg) {
    int startCommas = 0;
    int endCommas = 0;
    for (int i = 0; i < arg.length; i++) {
        if (startCommas == 0 && arg[i].startsWith("\""))
            startCommas = i;
        if (startCommas != 0 && arg[i].endsWith("\""))
            endCommas = i;
    }
    if (startCommas != endCommas) {
        String[] newArg = new String[arg.length + startCommas - endCommas];
        for (int i = 0; i < startCommas; i++)
            newArg[i] = arg[i];
        newArg[startCommas] = "";
        for (int i = startCommas; i < endCommas; i++)
            newArg[startCommas] += arg[i] + " ";
        newArg[startCommas] += arg[endCommas];
        for (int i = endCommas + 1; i < arg.length; i++)
            newArg[i - endCommas] = arg[i];
        return newArg;
    }
    return arg;
}

private static String comment(String[] arg, User[] user, List<User> userlist) {
    synchronized (block_statusList) {
        arg = parseArg(arg);
        int SID;
        if (arg.length != 3)
            return "Wrong number of parameters. Try COMMENT <Status ID> \"Comment text\"";
        if (arg[2].charAt(0) != '"'
                || arg[2].charAt(arg[1].length() - 1) != '"')
            return "Text of message has to be in quotation marks. Try  POST \"post text\"";
        String temp = arg[2].substring(1, arg[2].length() - 1);
        try {
            SID = Integer.valueOf(arg[1]);
        } catch (NumberFormatException e) {
            return "Status ID has to be a number. Try COMMENT <Status ID> \"Comment text\"";
        }
        Comment c = new Comment(temp, user);
        statusList.get(SID).addComment(c);
        return "Comment succeeded";
    }
}

private static String viewuser(String[] arg, User[] user,
        List<User> userlist) {
    synchronized (block_statusList) {
        if (arg.length != 2)
            return "Wrong number of parameters. Try VIEWUSER <user>";
        String r = "";
        for (User u : userlist)
            if (u.getName().compareTo(arg[1]) == 0)
                r = u.printUser();
        return r;
    }
}

private static String listuser(String[] arg, User[] user,
        List<User> userlist) {
    if (arg.length != 1)
        return "Wrong number of parameters. LISTUSER doesn't take any parameters";
    String r = "";
    for (User u : userlist)
        r += u.getName() + "\n";
    return r;
}

private static String viewstatus(String[] arg, User[] user,
        List<User> userlist) {
    synchronized (block_statusList) {
        int SID;
        if (arg.length != 2)
            return "Wrong number of parameters. Try VIEWSTATUS <Status ID>";
        try {
            SID = Integer.valueOf(arg[1]);
        } catch (NumberFormatException e) {
            return "Status ID has to be a number. Try  VIEWSTATUS <Status ID>";
        }
        if (SID >= statusList.size())
            return "Status ID too big.";
        return statusList.get(SID).printWithComments();
    }
}

private static String unfollow(String[] arg, User[] user,
        List<User> userlist) {
    if (arg.length != 2)
        return "Wrong number of parameters. Try UNFOLLOW <username>";
    boolean removed = false;
    for (User u : userlist) {
        if (u.getName().compareTo(arg[1]) == 0) {
            user[0].removeFriend(arg[1]);
            u.removeFollower(user[0].getName());
            removed = true;
        }
    }
    if (!removed)
        return "User not found.";
    return "Follow succeded. " + user[0].printFriends();
}

private static String follow(String[] arg, User[] user, List<User> userlist) {
    if (arg.length != 2)
        return "Wrong number of parameters. Try FOLLOW <username>";
    if(user[0]!=null && user.length!=0 && user[0]!=null && user[0].getName().compareTo(arg[1])==0)
        return "You cannot follow yourself. Try FOLLOW <username>";
    User[] followed = null;
    for (User u : userlist) {
        if (u.getName().compareTo(arg[1]) == 0) {
            followed = new User[1];
            followed[0] = u;
            user[0].addFriend(followed);
            followed[0].addFollower(user);
        }
    }
    if (followed == null)
        return "User not found.";
    return "Follow succeded. Current " + user[0].printFriends();
}

public static String login(String[] arg, User[] user, List<User> userslist) {
    if (arg.length != 2)
        return "Wrong number of parameters. Try LOGIN <username>";
    if (user.length > 0 && user[0] != null) {
        if (user[0].isCurrentlyLoggedIn())
            return "User already logged in. Try logging out first";
    }
    for (User l : userslist) {
        if (l.getName().compareTo(arg[1]) == 0) {
            if (l.isCurrentlyLoggedIn())
                return "That user is already logged in.";
            user[0] = l;
            user[0].setCurrentlyLoggedIn(true);
            return "Login succeeded";
        }
    }

    User newUser = new User(arg[1]);
    userslist.add(newUser);
    user[0] = newUser;
    user[0].setCurrentlyLoggedIn(true);
    return "Login succeeded. Created new user.";
}

public static String post(String[] arg, User[] user, List<User> userslist,
        boolean[] downloadPicture) {
    arg = parseArg(arg);
    if (arg.length != 2 && arg.length != 3)
        return "Wrong number of parameters. Try POST \"post text\"";
    if (arg[1].charAt(0) != '"'
            || arg[1].charAt(arg[1].length() - 1) != '"')
        return "Text of message has to be in quotation marks. Try  POST \"post text\"";
    String temp = arg[1].substring(1, arg[1].length() - 1);
    Status s;
    try {
        s = new Status(temp, statusList.size(), user);
    } catch (Exception e) {
        System.out.println("Error: Could not create Status");
        e.printStackTrace();
        return "Error";
    }
    if(arg.length==3)
    s.hasImage(arg[2]);
    user[0].addStatus(s);
    statusList.add(s);
    if (arg.length == 3)
        downloadPicture[0] = true;

    return "Successfully added status";

}

public static String timeline(String[] arg, User[] user,
        List<User> userslist) {
    if (arg.length != 1)
        return "Wrong number of parameters. TIMELINE doesn't take any parameters";
    List<Status> Timeline = new ArrayList<Status>();
    Timeline.addAll(user[0].getStats());
    for (User l : user[0].getFriends())
        Timeline.addAll(l.getStats());
    Collections.sort(Timeline);
    String result = "";
    for (Status s : Timeline)
        result += s.print() + "\n" + "Comments[" + s.getComments().size()
                + "]\n\n";
    return result;
}

public static String exit(String[] arg, User[] user, List<User> userslist) {
    if (arg.length != 1)
        return "Wrong number of parameters. EXIT doesn't take any parameters";
    if (user[0] != null)
        user[0].setCurrentlyLoggedIn(false);
    return "EXIT";
}

 } 
```

添加通知

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T06:03:33.373

您没有发送额外的字节，也没有收到额外的字节，但您肯定在接收端将额外的字节写入文件。

您的发送代码是正确的，您的接收代码不正确。看看`write()`调用之间的区别。一个使用接收计数：一个不使用。前者是正确的。Java中复制流的方法如下：

```
int count;
byte[] buffer = new byte[8192];
while ((count = in.read(buffer)) > 0)
{
    out.write(buffer, 0, count);
}
out.close();
in.close(); 
```

在两端。但是在这种情况下，当您保持套接字打开以接收更多命令时，您需要在图像之前发送图像大小，并且您需要一种不会干扰图像的发送和接收命令的方式，而这`BufferedReader`是无法完成的。所以你需要使用`DataOutputStream`and `DataInputStream`，像这样：

```
// At the sender
DataOutputStream out = new DataOutputStream(socket.getOutputStream());
out.writeUTF(command);
// ...
out.writeLong(imageSize);
// then the copy loop, reading from the image file.

// At the receiver
DataInputStream in = new DataInputStream(socket.getInputStream());
String command = in.readUTF();
// ...
// image reading code
long imageSize = in.readLong();
long total = 0;
int count;
byte[] buffer = new byte[8192];
while (total < imageSize && (count = in.read(buffer, 0, (int)Math.MIN(buffer.length, imageSize-total))) > 0)
{
  out.write(buffer, 0, count);
  total += count;
}
out.close(); 
```

模数错误。

# qt - 如何在 Qt 的 .pro 文件中将路径更改为多行？

> ID：15608078
> 
> 赞同：0
> 
> 时间：2013-03-25T05:12:53.753
> 
> 标签：qt

我应该在我的项目中包含一个 .dll 文件，该文件位于“deep”目录中，因此语句如下所示：

```
LIBS += D:\\boost_1_51_0\\bin.v2\\libs\\boost-mingw\\libs\\regex\\build\\gcc-mingw-4.7.2\\debug\\libboost_regex-mgw47-d-1_51.dll 
```

太长了，不方便看。我怎样才能缩短它？我试着把它分成两行：

```
LIBS += D:\\boost_1_51_0\\bin.v2\\libs\\boost-mingw\\libs
\\regex\\build\\gcc-mingw-4.7.2\\debug\\libboost_regex-mgw47-d-1_51.dll 
```

但是，这不会编译。这是错误消息：

```
error: \regex\build\gcc-mingw-4.7.2\debug\libboost_regex-mgw47-d-1_51.dll: No such file or directory 
```

那么，有没有办法将路径更改为几行或只是缩小它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:35:33.513

你应该写：

```
LIBS += "D:/boost_1_51_0/bin.v2/libs/boost-mingw/libs/regex/build/ \
         gcc-mingw-4.7.2/debug/libboost_regex-mgw47-d-1_51.dll" 
```

# sql - ASP.Net WEB 应用程序转移到另一台计算机

> ID：15608080
> 
> 赞同：0
> 
> 时间：2013-03-25T05:12:55.673
> 
> 标签：sql, grouping

我有一张桌子作为付款

```
ser. paymentdate amount
1\.   12 mar 2007 5000
1\.   14 mar 2007 5000
2\.   6 dec 2007  4000
3\.   2 mar 2008  6000
4\.   5 nov 2008  2000 
```

我想按月从表组中选择数据，例如 2007 年的记录

```
month    amount
mar      10000
dec      4000 
```

我可以通过此查询获取数据日期，但不能获取月份数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:19:53.813

请试试：

```
SELECT 
    DATENAME(m, paymentdate) [Month], 
    SUM(Amount) AS Amount
FROM 
    Payment
WHERE
    YEAR(paymentdate)=2007
GROUP BY DATENAME(m, paymentdate), MONTH(paymentdate)
ORDER BY MONTH(paymentdate) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:21:25.493

SQL LIKE 子句用于使用通配符将值与相似值进行比较。有两个通配符与 LIKE 运算符一起使用：

```
The percent sign (%)
The underscore (_) 
```

百分号表示零个、一个或多个字符。下划线表示单个数字或字符。这些符号可以组合使用。

```
WHERE SALARY LIKE '%200%' 
```

查找在任何位置具有 200 的任何值

因此，根据您的情况，取一些包含您要选择的月份的变量，然后输入类似的语句，

```
WHERE SALARYDATE LIKE '%mar%' 
```

或其他一些适合您的选择

```
WHERE SALARY LIKE '200%'    Finds any values that start with 200
WHERE SALARY LIKE '%200%'   Finds any values that have 200 in any position
WHERE SALARY LIKE '_00%'    Finds any values that have 00 in the second and third positions
WHERE SALARY LIKE '2_%_%'   Finds any values that start with 2 and are at least 3 characters in length
WHERE SALARY LIKE '%2'  Finds any values that end with 2
WHERE SALARY LIKE '_2%3'    Finds any values that have a 2 in the second position and end with a 3
WHERE SALARY LIKE '2___3'   Finds any values in a five-digit number that start with 2 and end with 3 
```

# asp.net-mvc - 为什么我的 ASP.NET 临时文件夹是空的？

> ID：15608081
> 
> 赞同：2
> 
> 时间：2013-03-25T05:13:12.693
> 
> 标签：asp.net-mvc, iis

根据 MSDN，“C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files”应该包含预编译的 ASP.NET 文件。为什么这个目录在我的开发箱（包括 x64）上是空的，但在我的实时服务器上却没有？它是否将其缓存在其他地方？仅供参考，我使用的是 IIS Express 8.0。它依赖于IIS吗？

# ruby-on-rails - 语法错误，意外的 IDENTIFIER，需要keyword_end

> ID：15608084
> 
> 赞同：1
> 
> 时间：2013-03-25T05:13:32.957
> 
> 标签：ruby-on-rails, ruby

我已多次检查此代码，但找不到此语法错误的原因。

```
syntax error, unexpected tIDENTIFIER, expecting keyword_end 
```

这是代码：

```
# coding: utf-8
lib = File.expand_path('../lib', __FILE__)
$LOAD_PATH.unshift(lib) unless $LOAD_PATH.include?(lib)
require '00 hello/version'

Gem::Specification.new do |spec|
  spec.name          = "00 hello"
  spec.version       = 00 hello_VERSION
  spec.authors       = ["John Kirtley"]
  spec.email         = ["KirtleyJ16@gmail.com"]
  spec.description   = %q{TODO: Write a gem description}
  spec.summary       = %q{TODO: Write a gem summary}
  spec.homepage      = ""
  spec.license       = "MIT"

  spec.files         = `git ls-files`.split($/)
  spec.executables   = spec.files.grep(%r{^bin/}) { |f| File.basename(f) }
  spec.test_files    = spec.files.grep(%r{^(test|spec|features)/})
  spec.require_paths = ["lib"]

  spec.add_development_dependency "bundler", "~> 1.3"
  spec.add_development_dependency "rake"
end 
```

这是修改后的代码：

```
# coding: utf-8
lib = File.expand_path('../lib', __FILE__)
$LOAD_PATH.unshift(lib) unless $LOAD_PATH.include?(lib)
require = 00hello_version

Gem::Specification.new do |spec|
  spec.name          = "00hello"
  spec.version       = "00hello:VERSION"
  spec.authors       = ["John Kirtley"]
  spec.email         = ["KirtleyJ16@gmail.com"]
  spec.description   = %q{TODO: Write a gem description}
  spec.summary       = %q{TODO: Write a gem summary}
  spec.homepage      = ""
  spec.license       = "MIT"

  spec.files         = `git ls-files`.split($/)
  spec.executables   = spec.files.grep(%r{^bin/}) { |f| File.basename(f) })
  spec.test_files    = spec.files.grep(%r{^(test|spec|features)/})
  spec.require_paths = ["lib"]

  spec.add_development_dependency "bundler", "~> 1.3"
  spec.add_development_dependency "rake"
end 
```

我稍微更改了代码，现在我得到的错误是：

```
There was a SyntaxError while loading hello.gemspec:
/Users/John/$/hello.gemspec:4: syntax error, unexpected tIDENTIFIER, expecting end-of-input
/Users/John/$/Rakefile:1:in `<top (required)>'
/Users/John/.rvm/gems/ruby-2.0.0-p0/bin/ruby_noexec_wrapper:14:in `eval'
/Users/John/.rvm/gems/ruby-2.0.0-p0/bin/ruby_noexec_wrapper:14:in `<main>'
(See full trace by running task with --trace) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:16:31.687

您可以注释掉行，直到找到它为止....

但是`00 hello_Version`对我来说看起来很狡猾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:35:27.233

`spec.executables = spec.files.grep(%r{^bin/}) { |f| File.basename(f) }`

缺少结束括号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T05:41:10.450

您需要引用您的 spec.version 部分。

```
spec.version = '00 hello_VERSION' 
```

# freebsd - struct kevent 中的 udata 字段是什么？

> ID：15608093
> 
> 赞同：1
> 
> 时间：2013-03-25T05:14:15.080
> 
> 标签：freebsd, kqueue

我正在模拟 kqueue 的某些功能来处理我的 Centos 框中的事件（我正在从 FreeBSD 移植一些代码），但我无法理解`void *udata`in的目的`struct kevent`：

```
struct kevent {
         uintptr_t ident;        /* identifier for this event */
         short     filter;       /* filter for event */
         u_short   flags;        /* action flags for kqueue */
         u_int     fflags;       /* filter flag value */
         intptr_t  data;         /* filter data value */
         void      *udata;       /* opaque user data identifier */
     }; 
```

我试过搜索，但我能找到的关于这个字段的最长的文献形式是“不透明的用户定义的值通过内核保持不变”。这没有多大帮助。

谁能清楚地向我解释一下这个领域是什么？有人可以用它做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T05:25:28.933

> The udata field is passed in and out of the kernel unchanged, and is not used in any way. The usage of this field is entirely application dependent, and is provided as a way to efficiently implement a function dispatch routine, or otherwise add an application identifier to the kevent structure.

for complete reference, please check out the following paper:

[Kqueue: A generic and scalable event notification facility](http://people.freebsd.org/~jlemon/papers/kqueue.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T22:23:56.373

swpd 是正确的。我想补充一点，“用户数据”的概念广泛用于事件处理 API 和调用者提供回调函数的 API。用户数据（通常是空指针）*逐字*传回。

用户数据的另一个例子是（网络）cookies——当网络服务器设置 Set-Cookie 标头时，它会要求浏览器在每个后续请求中将内容发送回（在 Cookie 标头中）。浏览器不应该以任何方式解释 cookie——就像内核不解释 udata 字段一样——只需将其发送回来。

# php - 使用 PHP 访问 MySQL 数据库行数据

> ID：15608101
> 
> 赞同：0
> 
> 时间：2013-03-25T05:15:10.103
> 
> 标签：php, mysql, sql, forum

我有以下 PHP 来访问我正在构建的简单论坛的数据库：

```
$sql = "
    SELECT
        categories.cat_id,
        categories.cat_name,
        categories.cat_description
    FROM
        categories
    WHERE
        categories.cat_id = '" . mysql_real_escape_string($_GET['id']) ."'
";                        
$result = mysql_query($sql);

//If data is unable to be served...
if (!$result) { 
    echo 'Category could not be displayed! Please try again later' . mysql_error();
} else {
    if(mysql_num_rows($result) == 0) {
        //This is the error code being displayed
        echo 'Category does not exist!';
    }
} 
```

这是数据库这一部分的代码：

```
CREATE TABLE categories(
    cat_id          INT(8) NOT NULL AUTO_INCREMENT,
    cat_name        VARCHAR(255) NOT NULL,
    cat_description VARCHAR(255) NOT NULL,
    UNIQUE INDEX
    cat_name_unique (cat_name),
    PRIMARY KEY(cat_id)
)
TYPE=INNODB; 
```

问题：由于某种原因，查询似乎没有正确地从数据库中提取行数据，我不知道为什么它不工作。也就是说，我对 MySQL 和 SQL 也很陌生。有人对发生的事情有任何想法吗？简单地说，为什么 MySQL 查询没有访问 PHP 代码的数据？

任何帮助都感激不尽！

谢谢！

更新：

将 SQL 查询更改为：

```
categories.cat_id = " . mysql_real_escape_string($_GET['id']); 
```

解决了原来的问题，结果又出现了另一个问题。

我现在收到错误代码：

```
echo 'Category could not be displayed! Please try again later' . mysql_error(); 
```

使用 SQL 输出：

```
You have an error in your SQL syntax; check the manual that corresponds to
your MySQL server version for the right syntax to use near '' at line 8 
```

我之前实际上遇到过这个问题，但是在我尝试修复它时，我发现了我发布的原始代码。我在我的 PHP 文件中都有类似的代码有效，这让我相信这是我在数据库代码中犯的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:21:33.513

然而，看看你返回了什么错误，但同时根据你的表定义，`cat_id`是一个`int`.

但是你用单引号括起来传递它，这意味着如果它是一个字符串，你不会在 PHP 中得到错误，你会从 mySQL 中得到它。

好的做法是改变这一点

`categories.cat_id = '" . mysql_real_escape_string($_GET['id']) . "'";`

至

`categories.cat_id = " . intval( mysql_real_escape_string($_GET['id']) );`

如果`$_GET['id']`返回一个字符串，或者如果 DBMS 设置为[`strict_mode`](http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html)

理想情况下，您可以*测试*取自 的值`$_GET`，并在传入错误类型之前优雅地处理它们，从而避免 PHP 或 mySql 产生错误。

# android - AIDL——原语作为输出参数

> ID：15608103
> 
> 赞同：0
> 
> 时间：2013-03-25T05:15:29.160
> 
> 标签：android, aidl

在 AIDL 指南（[http://developer.android.com/guide/components/aidl.html](http://developer.android.com/guide/components/aidl.html)）中，它提到所有原语都是“in”参数。但是，我想创建一个原始参数，它是一个“输出”变量，即服务器将为我设置它。

除了创建我自己的 Parcelable 原语并自己完成所有工作之外，是否有解决此问题的方法？我已经尝试过原语的类版本（整数、布尔值等），但这些似乎不起作用:(

谢谢，J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:23:14.457

进程之间允许使用 AIDL（服务器可能在另一个应用程序中完全在另一个 VM 中运行），因此您不能发送任何无法实现可解析的内容，除了 Google 特殊情况下的那些内容（如列表）。而且由于 Java 仅对原语按值传递，因此这些将不起作用。一种可能的解决方法是使用值列表作为输出参数，但我不确定它是否有效（从未尝试过）。但是编写自己的简单包装器并不难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-10T01:14:42.790

其他一些选项：

1）如果你只需要设置一个参数，你可以只返回参数

2) 定义返回参数的回调函数

# android - Android的文本字段中没有出现一些特殊字符

> ID：15608104
> 
> 赞同：1
> 
> 时间：2013-03-25T05:15:33.037
> 
> 标签：android, settext

在我的应用程序中，要求用户输入文本。但是一些特殊字符没有出现

用户输入：test{"@","\"} 实际结果：test{"",""}

我怎样才能解决这个问题 ？text.setText() 代码有什么特殊要求吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:27:32.250

使用文本观察器和输入过滤器接口实现

# ember.js - Ember js RC1 - 未应用混合方法/属性

> ID：15608105
> 
> 赞同：0
> 
> 时间：2013-03-25T05:15:34.243
> 
> 标签：ember.js

在我们当前在 Ember (v1.0.0-pre.2) 上的实现中，我们有这个：

```
var LoggingMixin = Ember.Mixin.create({
    LOGGING: false,

    log: function (message) {
        if (this.LOGGING) {
            Ember.Logger.log(logMessage);
        }
    }
});

var SomeNamespace = Ember.Namespace.create(LoggingMixin, {
}); 
```

这允许我们调用`SomeNamespace.log('message')`. 这似乎不适用于 Ember.js RC1。Javascript 报告：`TypeError: SomeNamespace.log is not a function`.

相反，在 RC1*中似乎*起作用的是：

```
var SomeNamespace = Ember.Namespace.extend(LoggingMixin);
var someNamesapce = SomeNamespace.create(); 
```

现在调用`someNamespace.log('message')` *确实*有效。

所以我的问题是 RC1 中的 mixin 创建/行为是否发生了变化，还是我在原始代码中遗漏了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:23:58.193

这似乎是*Ember 1.0.0-pre.3（2013 年 1 月 17 日）*中的重大变化：

*   突破性变化：`Ember.Object.create`表现得像`setProperties`. 用于`createWithMixins`旧行为。

# php - 根据文档大小动态调整 iframe 大小？

> ID：15608107
> 
> 赞同：0
> 
> 时间：2013-03-25T05:15:39.757
> 
> 标签：php, html, iframe

所以我得到的是一个页面，它将显示带有评论的视频（类似于 youtube）。我不想在浏览评论时重新加载整个页面——而且我真的不想像我们在 disquss 上看到的那样“显示更多”。我想把它分成几页。

因此，我可以使用包含评论页面的 iframe 来制作视频页面，并且用户可以通过 iframe 交换页面。但是，如果 iframe 没有自己的滚动条并且它只是使父窗口更改大小，我会更喜欢。

我希望人们能够在浏览评论时观看视频，这就是为什么我不希望在他们进入新评论页面时刷新整个页面。

那么是否可以制作一个根据 iframe 的文档大小调整自身大小的 iframe？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:25:58.197

为什么不直接使用 jQuery 的 $.load() 函数将评论加载到 div 中？然后，您将完全控制布局。

# java - 需要有关二叉树高度的帮助

> ID：15608113
> 
> 赞同：0
> 
> 时间：2013-03-25T05:16:22.720
> 
> 标签：java

这是 12 年级二叉树作业中的一道题。它需要一个 BTree 类的方法来返回树的高度。我假设树中有一个节点时高度为0，不确定，我今天会问我的老师。

但无论如何，这是我的代码，我不知道它有什么问题。

```
public int height(){
    if(root == null){
        return -1;
    }
    return height(root, 0, 0);
}
public int height(BNode branch, int depth, int ans){
    if(depth>ans){
        ans=depth;
    }
    if(branch.getLeft()!=null){
        depth+=1;
        return height(branch.getLeft(), depth, ans);
    }
    else if(branch.getRight()!=null){
        depth+=1;
        return height(branch.getRight(), depth, ans);
    }
    return ans;
} 
```

这是测试类：

```
 BTree bTree = new BTree();
    bTree.add(50);
    bTree.add(60);
    bTree.add(40);
    bTree.add(35);
    bTree.add(55);
    bTree.add(45);
    bTree.add(51);
    bTree.display();
    System.out.println(bTree.height()); 
```

这棵树的高度应该为 3，但它正在返回：35 40 45 50 51 55 60 2

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T05:21:57.977

你喜欢你的左节点而不是你的右节点。节点的高度应该是：

```
MAX(height(left), height(right)) + 1 
```

但是相反，您实际上是在说：

```
if (left)
   return height(left) + 1
else if (right) 
   return height(right) + 1 
```

因此，如果一个节点的左腿短而右腿长，那么您会得到错误的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:27:49.883

只是一个提示。在遍历树进行一些计算时，您需要递归处理两个子树。

所以任何非空给定树节点的高度应该是

```
max( (  height of left sub tree) , (height of right  sub tree)) + 1 
```

如其他答案中所述，您的遍历不正确。

如果节点为空，则其高度为 0。

同样，任何非空节点的大小都是 sizeof(left)+sizeof(right)+1 等

# c - GNU - 对“setmode”的未定义引用

> ID：15608116
> 
> 赞同：3
> 
> 时间：2013-03-25T05:16:29.963
> 
> 标签：c, linux, gnu, porting

我正在 Linux 上移植一个 WIN32 库。我能够毫无错误地编译我的库。但是当我尝试链接时，它会出现以下链接错误

> 未定义对“setmode”的引用

我知道**setmode**函数是标准库函数，它位于**unistd.h**中，我在通过终端链接时提供参数**-lc 。**

这是更多关于**setmode的**[链接](http://www.unix.com/man-page/osx/3/SETMODE/)。

 **有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-05-18T21:28:12.323

恐怕这些答案都是无稽之谈。来自 Win32 环境的程序正在使用两个可能的函数之一：要么是[MSDN 中记录](https://msdn.microsoft.com/en-us/library/tw4k6df8.aspx)`setmode`的 Microsoft`_setmode`函数，要么是 Cygwin 对它的模仿，称为.`setmode`

这与 BSD 无关`setmode`。这是一个有两个参数的函数，它将文件描述符设置为二进制或文本翻译模式。

**如果您的程序需要此功能，但您链接到 LibBSD，程序可能会链接，但它是不正确的。**

GNU C 库不提供用于操作`FILE *`流或描述符的文本或二进制模式的接口，如果提供，它不会做任何事情，因为这两种模式是相同的。

在 Cygwin 上需要 Cygwin`setmode`函数的代码可能会在 Unix 上不做任何事情而侥幸逃脱：也就是说：

```
#ifdef __CYGWIN__
setmode(fileno(my_stdio_stream), O_BINARY);
#elif _WIN32
_setmode(_fileno(my_stdio_stream), _O_BINARY);
#else
/* nothing on systems with no text-vs-binary mode */
#endif 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-14T20:19:19.567

我也遇到了这个问题。链接发生在制作过程中，因此会发生这种情况，并且与 c 没有业务往来的人（如我）尝试使用 cygwin 或 mingw。感谢 Cairnarvon 的回答，我了解到缺少必要的包含语句：

```
#include <io.h> 
```

...在调用该`setmode`函数的模块中（在我的情况下，我正在尝试在 Cygwin 64 位上构建 GDAL）。错误仍然存​​在，直到我看到[这些人](http://lists.gnu.org/archive/html/emacs-bug-tracker/2013-07/msg00069.html)的回答并了解到 64 位版本的 Cygwin 没有预先强调 32 位版本的方式。因此，我手动进行了前置操作，并且成功完成了 [更多]。我希望这有帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T05:21:22.463

`setmode`不是标准库函数；这是一个 libbsd 函数。这只是在 OS X 等 BSD 派生系统上的相同内容，该手册页来自该系统。传递`-lbsd`参数以让链接器在 Linux 上找到它。

始终信任您自己系统的手册页而不是 Internet 的手册页。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T05:36:37.860

您必须使用`<bsd/unistd.h>`标题（不是`<unistd.h>`）。

在我的 Ubuntu 机器上，我必须安装软件包`libbsd0`并且`libbsd-dev`：

```
sudo apt-get install libbsd0 libbsd-dev 
```

之后，我能够编译以下程序：

```
#include <bsd/unistd.h>

int main(void) {
    setmode(0);
    return 0;
} 
```

使用命令：

```
gcc hello.c -lbsd 
```**

# javascript - 时序问题：通过 javascript 在页面上渲染元素，需要在同一个文件中调用这些元素

> ID：15608118
> 
> 赞同：0
> 
> 时间：2013-03-25T05:16:32.993
> 
> 标签：javascript, jquery, google-chrome, google-chrome-extension, coffeescript

我的 CoffeeScript 文件中有这段代码。基本上，我正在等待点击事件的响应来填充一堆`li`内容。**但是我需要用 jQuery 抓取这些元素并处理另一个点击事件**

就目前的代码而言，底部的 jQuery 不起作用，因为元素不在页面上。

任何帮助将非常感激！

```
$ ->
      chrome.tabs.query("active": true, "currentWindow": true,
      (tab) -> 
        chrome.tabs.sendMessage(tab[0].id, "showTerms", 
          (response) ->
            console.log (JSON.stringify(response))
            terms = response
            for term in terms
              $(".terms").append($('<li></li>', {"class": "term", "data-term": "#{term}", "text": "#{term}"} ))

            for child in $(".terms").children()
              $(child).append($('<a></a>', {"href": "#", "class": "remove-term", "text": "x"} ))
        )
      )

  $(".terms li a").click (e) =>
    debugger
    e.preventDefault()
    termToBeRemoved = e.parent().data("term")
    chrome.tabs.query("active": true, "currentWindow": true,
      (tab) ->
        chrome.tabs.sendMessage(tab[0].id, "remove" + termToBeRemoved,
          (response) ->
            console.log response
        )
    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:10:30.967

您可以在加载元素时将点击事件附加到元素：

```
$ ->
      chrome.tabs.query("active": true, "currentWindow": true,
      (tab) -> 
        chrome.tabs.sendMessage(tab[0].id, "showTerms", 
          (response) ->
            console.log (JSON.stringify(response))
            terms = response
            for term in terms
              $(".terms").append($('<li></li>', {"class": "term", "data-term": "#{term}", "text": "#{term}"} ))

            for child in $(".terms").children()
              $(child).append($('<a></a>', {"href": "#", "class": "remove-term", "text": "x"} ))
           #Bind them here after they've been created.
            $(".terms li a").click (e) =>
              debugger
              e.preventDefault()
              termToBeRemoved = e.parent().data("term")
              chrome.tabs.query("active": true, "currentWindow": true,
                (tab) ->
                  chrome.tabs.sendMessage(tab[0].id, "remove" + termToBeRemoved,
                    (response) ->
                       console.log response
                  )
              )
        )
      ) 
```

# servlets - 使用过滤器和重定向进行会话检查

> ID：15608126
> 
> 赞同：2
> 
> 时间：2013-03-25T05:17:33.897
> 
> 标签：servlets, servlet-filters

我正在尝试进行登录操作，但是当我使用过滤器检查会话是否有效时，我得到了异常：- `java.lang.IllegalStateException`，在响应提交后无法创建会话。

Myservlet 过滤器代码是：-

```
 public class SessionFilter implements javax.servlet.Filter 
    {

private ArrayList<String> urlList;

     public void destroy() {

}

public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) 
    throws IOException, ServletException {

HttpServletRequest request = (HttpServletRequest) req;
    HttpServletResponse response = (HttpServletResponse) res;
    String url = request.getServletPath();
    boolean allowedRequest = false;

    if(urlList.contains(url)) {
        allowedRequest = true;

    }

    if (!allowedRequest) {
        HttpSession session = request.getSession(false);
        if (null == session) {
            response.sendRedirect("Login.jsp");
        }
    }

  chain.doFilter(req, res);

}

public void init(FilterConfig fConfig) throws ServletException {

    String urls = fConfig.getInitParameter("avoid-urls");

    //StringTokenizer token = new StringTokenizer(urls, ",");

    StringTokenizer token = new StringTokenizer(urls);

    urlList = new ArrayList<String>();

    urlList.add(token.nextToken());

    /*while (token.hasMoreTokens()) {
        urlList.add(token.nextToken());

    }*/
}

}

  Filter mapping in web.xml is :-

<filter>
   <filter-name>SessionFilter</filter-name>
   <filter-class>Filter.SessionFilter</filter-class>

    <init-param>
      <param-name>avoid-urls</param-name>
      <param-value>Login.jsp,</param-value>
    </init-param>
</filter>

<filter-mapping>

    <filter-name>SessionFilter</filter-name>
    <url-pattern>/*</url-pattern>

</filter-mapping> 
```

现在，当我请求时，`login.jsp`我得到了这个异常。请帮助我自从过去 2 天以来一直卡在我的项目上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T10:37:10.733

做完后不要继续过滤`sendRedirect`。`sendRedirect`会将标头提交给客户端，之后您不应该写任何东西。

并将 login.jsp 设置为您允许的 url。

```
 if (!allowedRequest) {
    HttpSession session = request.getSession(false);
    if (null == session || ) {
        response.sendRedirect("Login.jsp");
        return;
    }
} 
```

**参考：**

[Servlet“响应已提交”的原因](https://stackoverflow.com/questions/11305563/cause-of-servlets-response-already-committed)

# html - 为什么对象标签会删除我的 html 的其余部分？

> ID：15608130
> 
> 赞同：0
> 
> 时间：2013-03-25T05:17:51.050
> 
> 标签：html

我通过对象标签在我的网页中嵌入了一个 html 文件（是的，这可能是不好的做法，但它有效）。问题是对象标签会切断它之后的所有内容。我不知道为什么会这样。

```
 <html>
 <header>
 </header>
 <body>
 <h1> This will show up </h1>
 <object type="text/html" data="myWebPage.html" />
 <h1> This won't show up </h1>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T05:22:10.030

[`<object>`标签是非空的（不是自动关闭的）](http://www.w3.org/TR/html5/embedded-content-0.html#the-object-element)，因此浏览器会在您想要的正确 HTML 上做出最佳猜测，并得出以下结论：

```
<object type="text/html" data="myWebPage.html">
    <h1> This won't show up </h1>
</object> 
```

在这种情况下，`<object>`' 的内容是后备 - 例如，当您尝试显示 Flash 视频但浏览器没有 Flash 时很有用。

通过正确关闭标签来解决这个问题：

```
<html>
<header>
</header>
<body>
<h1> This will show up </h1>
<object type="text/html" data="myWebPage.html"></object>
<h1> This won't show up </h1>
</body>
</html> 
```

* * *

下次你看到这样的“奇怪”行为时，[首先通过验证器运行你的代码](http://html5.validator.nu/)，它通常会发现明显的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T05:23:11.110

我认为`<object>`标签应该有结束标签`</object>`
详细信息：[http ://www.w3schools.com/tags/tag_object.asp](http://www.w3schools.com/tags/tag_object.asp)

# php - $_POST[$row['field'] <-- 这可能吗？

> ID：15608133
> 
> 赞同：0
> 
> 时间：2013-03-25T05:18:09.923
> 
> 标签：php, post, row, fetch

我在这里要做的是
1\. 从 mysql db 获取数据
2\. 在 a 中`<form action="post">`，我有一个文本字段，它的值将是`$row['name']`我刚刚从 mysql 获取的值
3\. 我希望能够提交表单并回显我刚刚发布的内容`$row['name']`，这是我尝试做的一个示例，但它不起作用，当我发布它时它只是显示为空，但是当我获取它时有一个东西。

```
<form action="" method="post">
<?php 
mysql_connect("localhost","root","");
mysql_select_db("my_db");
$query = mysql_query("SELECT * FROM `table`");
while ($row = mysql_fetch_assoc($query)) {
echo '<input type="text" name="'.$row['id'].'" value="'.$row['name'].'"><br>';  
//The line above puts the name of the document in the text area so the user can    just click post it
}
?>
<input type="submit" value="View documents"/>
</form> 
```

您选择的文件是`<?php echo $_POST[$row['id']].' '.$_POST[$row['name']].'<br>'; ?>`

对不起，如果这没有任何意义，我想我一般要问的是我怎样才能把它放在`$row['name']`我可以像 `$_post['name'] = $row['name']`<- 这对我一样发布的格式中，但是当我发布它时，它的值是空的。

我是 php 和堆栈溢出的新手，所以在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:21:57.967

代替 ：

```
echo '<input type="text" name="'.$row['id'].'" value="'.$row['name'].'"><br>'; 
```

改成 ：

```
echo '<input type="text" name="name" value="'.$row['name'].'"><br>'; 
```

在 php 中，您可以使用`$_POST['name']`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T05:23:16.297

像这样试试

```
echo '<input type="text" name="my_val" value="'.$row['name'].'"><br>'; 
```

然后在你的 php 代码中给出喜欢

```
$my_val = $_POST['my_val'];
echo $my_val; 
```

对于一组值，您也可以给出类似

```
echo '<input type="text" name="my_val[]" value="'.$row['name'].'"><br>'; 
```

并在你的 php 代码中给出喜欢

```
$my_vals = $_POST['my_val'];
print_r($my_vals); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T21:09:53.667

如果有人在那里查找此解决方案并需要它用于“SELECT”选项..这样做：

```
echo "<select name='questions' class='form-control'>";
            echo "<option></option>";
                while ($row = mysqli_fetch_array($result)) {
                    echo "<option value='" . $row['q'] . "'>" . $row['q'] . "</option>";
                }
                echo "</select>"; 
```

然后在将传递值的php代码中

```
$q = $_POST['questions']; 
```

我花了一段时间才弄清楚这一点……希望其他人不必经历这个……

# jpa - 加入@ManyToOne 的@OneToMany

> ID：15608142
> 
> 赞同：1
> 
> 时间：2013-03-25T05:19:12.687
> 
> 标签：jpa, join, criteria-api

1.  每个`Account`都有一个过`Origin`孔`@ManyToOne`
2.  每个`Origin`s 都有`Shadow`s via`@OneToMany`

有了 given `Root<Account>`，我怎样才能加入那些`Shadow`s 以便我可以在哪里为他们设置一些条件？

```
final Root<Account> account;
final Path<Origin> origin = account.get(Account_.origin); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:44:15.263

假设 entity 中的`@OneToMany`属性`Origin`被调用`shadows`，则需要使用[Join](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/Join.html)如下：

```
Join<Origin, Shadow> shadows = origin.join(Origin_.shadows); 
```

`Shadow`然后，您可以在s 属性上编写条件，就像在这个简单的 String 案例中一样，因为`Join<Z,X>`has `Path<X>`as SuperInterface：

```
String name;
Predicate condition = criteriaBuilder.equals(shadows.get(Shadow_.name, name)); 
```

# javascript - 在 mvc4 中的 javascript 中访问 tempdata

> ID：15608146
> 
> 赞同：9
> 
> 时间：2013-03-25T05:19:33.110
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-4, tempdata

我正在尝试在 Javascript 中访问 TempData。但得到空值。我正在进行 ajax 调用以更新记录，并且我想显示记录更新成功消息。这将来自控制器的 UpdateOperation 操作。但目前它将显示空值。我还检查了 Firebug，它显示如下：

```
function onComplete(e) {

if (e.name == "update") {

alert('');

} 
```

这是我的控制器代码

```
 public class OperationController : BaseController
    {
        /// <summary>
        /// Index action will return template view of the page without data
        /// </summary>
        /// <returns>Blank Action</returns>
        public ActionResult Index()
        {
            return this.View();
        }

        /// <summary>
        /// Get all Operation from System
        /// </summary>
        /// <returns>return action result</returns>
        [GridAction]
        public ActionResult SelectOperation()
        {
            IEnumerable<OperationEntity> operationList = OperationComponent.GetAll();
            return this.View(new GridModel(operationList));
        }

        /// <summary>
        /// Method for update operation
        /// </summary>
        /// <param name="entity">moduleViewModel to update Module</param>
        /// <returns>return action result</returns>
        [GridAction]
        public ActionResult UpdateOperation(OperationEntity entity)
        {
            if (ModelState.IsValid)
            {
                entity.Log = new BusinessCore.BusinessEntities.LogDetails();
                entity.Log.ModifiedBy = SessionHelper.UserId;
                Status status = OperationComponent.Update(entity);
                this.TempData["AlertMessage"] = status.Message;
                this.ViewData["_AlertMessage"] = status.Message;
                return this.View(new GridModel(OperationComponent.GetAll()));
            }
            else
            {
                return this.View(entity);
            }
        }
    } 
```

在我看来

```
@using Telerik.Web.Mvc.UI;
@{
    ViewBag.Title = "Operation List";
}

<h2>@ViewBag.Title</h2>
<script src="../../../../Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
<script type="text/javascript">
//    function onSave(e) {
//        alert('Record Save Succesfully');
//    }
    function onComplete(e) {
        if (e.name == "update") {
           alert('@TempData["AlertMessage"]');
            alert('@ViewData["_AlertMessage"]');
        }
        if (e.name == "insert") {
            alert("Operation Inserted Successfully");
        }
        if (e.name == "delete") {
            alert("Operation Deleted Successfully");
        }
    }
    function newAlert(type, message) {
    if (message != "" || message != null) {
        $("#alert-area").append($("<div class='alert alert-success " + type + " fade in' data-alert><p><b> " + message + " </b></p></div>"));
        $(".alert-success").delay(4000).fadeOut("slow", function () { $(this).remove(); });
    }
}
</script>

@(Html.Telerik().Grid<QuexstERP.BusinessCore.BusinessEntities.SysAdmin.OperationEntity>()
        .Name("Grid")
         .DataKeys(keys => 
        {
            keys.Add(p => p.Id);
        })
                    .ToolBar(commands => commands.Insert().ButtonType(GridButtonType.Image).ImageHtmlAttributes(new { style = "margin-left:0", title = "Add" }))
        .DataBinding(dataBinding =>
        {
            dataBinding.Ajax()
                .Select("SelectOperation", "Operation")
                .Insert("InsertOperation", "Operation")
                .Update("UpdateOperation", "Operation")
                .Delete("DeleteOperation", "Operation");
        })
        .Columns(columns =>
        {
            columns.Command(commands =>
            {
                commands.Edit().ButtonType(GridButtonType.Image).HtmlAttributes(new { title = "Edit" });
                commands.Delete().ButtonType(GridButtonType.Image).HtmlAttributes(new { title = "Delete" });
            }).Width(80).Title("Commands");
            columns.Bound(p => p.Name).Width(200).Title("Operation Name");
            columns.Bound(p => p.Description).Width(310).Title("Description");
        })
        .ClientEvents(events => events
                .OnComplete("onComplete")
                )
                    .Editable(editing => editing.Mode(GridEditMode.PopUp).InsertRowPosition(GridInsertRowPosition.Top))

        .Pageable()
        .Scrollable()
        .Sortable()
        .Filterable()        
)
@section HeadContent {
<style type="text/css">
    .field-validation-error
    {
        position: absolute;
        display: block;
    }

    * html .field-validation-error { position: relative; }
    *+html .field-validation-error { position: relative; }

    .field-validation-error span
    {
        position: relative;
        white-space: nowrap;
        color: red;
        padding: 10px 5px 3px;
        background: transparent url('@Url.Content("~/Content/Common/validation-error-message.png") ') no-repeat 0 0;
    }

    /* in-form editing */
    .t-edit-form-container
    {
        width: 480px;
        margin: 1em;
    }

    .t-edit-form-container .editor-label,
    .t-edit-form-container .editor-field
    {
        padding-bottom: 1em;
        float: left;
    }

    .t-edit-form-container .editor-label
    {
        width: 25%;
        text-align: right;
        padding-right: 3%;
        clear: left;
    }
    .t-edit-form-container .editor-field textarea
    {
    font-size:11px;
    width:80%;
}
    .t-edit-form-container .editor-field
    {
        width: 70%;
    }
</style>
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-05-06T12:46:09.377

我知道这是一个老问题，但我想我会回答，因为我正在寻找完全相同的解决方案，并希望能帮助其他人。

这为我解决了[how-to-get-the-tempdata-in-javascript](https://stackoverflow.com/questions/17058413/how-to-get-the-tempdata-in-javascript)

本质上，您的语法缺少括号

```
 //Your code
alert('@TempData["AlertMessage"]');

// Correct code
alert('@(TempData["AlertMessage"])'); 
```

@ 后面的括号

希望这对像我这样的下一个搜索者有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-25T10:21:05.590

`TempData`重定向到操作时使用。试试`ViewBag`。

在控制器中：

```
ViewBag.AlertMessage = status.Message; 
```

鉴于：

```
@{
    ViewBag.Title = "Operation List";
    string alert = "Your custom error message";

    if(ViewBag.AlertMessage != null)
    {
        alert = (string)ViewBag.AlertMessage;
    }        
} 
```

和 javascript

```
var jsAlert = '@alert';
alert(jsAlert ); 
```

# python - 取消 Skype4Py 文件传输

> ID：15608147
> 
> 赞同：1
> 
> 时间：2013-03-25T05:19:46.920
> 
> 标签：python, file-transfer, skype, skype4py

我想在 python 中取消文件传输，但我找不到任何解决方案。我为此使用 OnFileTransferStatusChanged 函数，但我不知道如何实际取消文件传输。

* * *

```
import Skype4Py
import sys
import time
import os
from datetime import datetime

skype = Skype4Py.Skype(Transport = "dbus")
skype.Attach()

def OnFile(file, stts):
    # cancel file transfer
    # todo

def Main():
    while True:
        skype.OnFileTransferStatusChanged = OnFile
        time.sleep(0.5)
Main() 
```

# iphone - 变量值改变，如果一个值改变

> ID：15608148
> 
> 赞同：0
> 
> 时间：2013-03-25T05:19:52.820
> 
> 标签：iphone, ipad, variables, uitextfield

我有两个变量问题是它们都有 12.90 和其他有 40 的默认值，所以当我将变量值 40 更改为 45 时，12.90 也变为 45。我正在通过 textfielddid 更改事件更改值。

![在此处输入图像描述](../Images/3ca44ae900713d5c3c46f6f5518d6e76.png)

这是图片

```
NSLog(@"Clinical Data %.2f",appDelegate.p_ClinInf_Yes_NV_InModel);
NSLog(@"Fatal Data %.2f",appDelegate.p_Fatal_Yes_NV_InModel);

[textFieldOne addTarget:self action:@selector(textFieldTextDidChangeOneF:) forControlEvents:UIControlEventEditingChanged];

 -(void)textFieldTextDidChangeOneF:(UITextField*)tf{

NSLog(@"Testing Successful Fatal One");

appDelegate.p_Fatal_Yes_NV_InModel  = [[textFieldOne text] floatValue];

appDelegate.p_Fatal_No_NV_InModel=100-appDelegate.p_Fatal_Yes_NV_InModel;
    textFieldTwo.text=[NSString stringWithFormat:@"%.2f",appDelegate.p_Fatal_No_NV_InModel];

    NSCharacterSet * set = [[NSCharacterSet characterSetWithCharactersInString:@"0123456789."] invertedSet];
    NSString*string=textFieldOne.text;
    if ([string rangeOfCharacterFromSet:set].location != NSNotFound) {
        UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Warning" message:@"Only a  
        number can be entered into this input field " delegate:nil cancelButtonTitle:@"OK"        
       otherButtonTitles:nil];
      [alert show];
      [alert release];
        textFieldOne.text=@"";

    }

    NSLog(@"Fata Data %.2f",appDelegate.p_Fatal_Yes_NV_InModel);

    } 
```

我在同一个按钮上调用了不同的方法可能是因为这个值是冲突的。

另一种方法是

```
-(void)textFieldTextDidChangeOneCI:(UITextField*)tf{

NSLog(@"Testing Successful");

appDelegate.p_ClinInf_Yes_NV_InModel  = [[textFieldOne text] floatValue];

appDelegate.p_ClinInf_No_NV_InModel=100-appDelegate.p_ClinInf_Yes_NV_InModel;

textFieldTwo.text=[NSString stringWithFormat:@"%.2f",appDelegate.p_ClinInf_No_NV_InModel];

NSCharacterSet * set = [[NSCharacterSet characterSetWithCharactersInString:@"0123456789."] invertedSet];
NSString*string=textFieldOne.text;
if ([string rangeOfCharacterFromSet:set].location != NSNotFound) {
    UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Warning" message:@"Only a number can be entered into this input field " delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    [alert release];
            textFieldOne.text=@"";

  }

appDelegate.p_ClinInf_No_NV_InModel=100-appDelegate.p_ClinInf_Yes_NV_InModel;

textFieldTwo.text=[NSString stringWithFormat:@"%.2f",appDelegate.p_ClinInf_No_NV_InModel];

NSLog(@"p_ClinInf_No_NV_InModel Text Two Data %.2f",appDelegate.p_ClinInf_No_NV_InModel);

 } 
```

查看 Did 加载方法

```
 - (void)viewDidLoad {

appDelegate=[[UIApplication sharedApplication]delegate];
    popImageView.hidden=YES;
closeButton.hidden=YES;

if([titleName isEqualToString:@"Westnile Disease"])
{
    bgImageView.image=[UIImage imageNamed:@"wnd2_bg.png"];
    barImageView.image=[UIImage imageNamed:@"eee1.png"];

    barImageView.image=[UIImage imageNamed:@"eee1.png"];
    labelFour.text=@"99.57";
    labelOne.text=@"12.90";
    labelTwo.text=@"0.43";
    labelThree.text=@"87.10";
    float valueone;
    valueone = appDelegate.p_ClinInf_Yes_NV_InModel;

    textFieldOne.text=[NSString stringWithFormat:@"%.2f",valueone];

        NSLog(@" Working one %.2f",appDelegate.p_ClinInf_Yes_NV_InModel);
        NSLog(@"Working Two %.2f",appDelegate.p_ClinInf_Yes_V_InModel);

        textFieldTwo.text=[NSString stringWithFormat:@"%.2f",appDelegate.p_ClinInf_No_NV_InModel];
        textFieldThree.text=[NSString stringWithFormat:@"%.2f", appDelegate.p_ClinInf_Yes_V_InModel];
        textFieldFour.text=[NSString stringWithFormat:@"%.2f",appDelegate.p_ClinInf_No_V_InModel];
    NSLog(@"Clinical Data %.2f",appDelegate.p_ClinInf_Yes_NV_InModel);
        NSLog(@"Fatal Data %.2f",appDelegate.p_Fatal_Yes_NV_InModel);
       }

if([titleName isEqualToString:@"Eastern Equine Encephalomyelitis"])
 {

    bgImageView.image=[UIImage imageNamed:@"eee2_bg.png"];

    barImageView.image=[UIImage imageNamed:@"eee1.png"];
    textFieldOne.text=[NSString stringWithFormat:@"%.2f",appDelegate.p_ClinInf_Yes_NV_InModel];
    textFieldTwo.text=[NSString stringWithFormat:@"%.2f",appDelegate.p_ClinInf_No_NV_InModel];
    textFieldThree.text=[NSString stringWithFormat:@"%.2f", appDelegate.p_ClinInf_Yes_V_InModel];
    textFieldFour.text=[NSString stringWithFormat:@"%.2f",appDelegate.p_ClinInf_No_V_InModel];

    }

if([titleName isEqualToString:@"Western Equine Encephalomyelitis"])

     {
    bgImageView.image=[UIImage imageNamed:@"wee2_bg.png.png"];
    NSLog(@"appDelegate.p_ClinInf_Yes_NV_InModel %.2f",appDelegate.p_ClinInf_Yes_NV_InModel);
    barImageView.image=[UIImage imageNamed:@"eee1.png"];

        appDelegate.p_ClinInf_No_NV_InModel=100-appDelegate.p_ClinInf_Yes_NV_InModel;

    appDelegate.p_ClinInf_No_V_InModel=100- appDelegate.p_ClinInf_Yes_V_InModel;
    textFieldOne.text=[NSString stringWithFormat:@"%.2f",appDelegate.p_ClinInf_Yes_NV_InModel];
    textFieldTwo.text=[NSString stringWithFormat:@"%.2f",appDelegate.p_ClinInf_No_NV_InModel];
    textFieldThree.text=[NSString stringWithFormat:@"%.2f", appDelegate.p_ClinInf_Yes_V_InModel];
    textFieldFour.text=[NSString stringWithFormat:@"%.2f",appDelegate.p_ClinInf_No_V_InModel];
    }

if([titleName isEqualToString:@"Venezuelan Equine Encephalomyelitis"])  {

    bgImageView.image=[UIImage imageNamed:@"page2_bg.png"];

    barImageView.image=[UIImage imageNamed:@"eee1.png"];
    textFieldOne.text=[NSString stringWithFormat:@"%.2f",appDelegate.p_ClinInf_Yes_NV_InModel];
    textFieldTwo.text=[NSString stringWithFormat:@"%.2f",appDelegate.p_ClinInf_No_NV_InModel];
    textFieldThree.text=[NSString stringWithFormat:@"%.2f", appDelegate.p_ClinInf_Yes_V_InModel];
    textFieldFour.text=[NSString stringWithFormat:@"%.2f",appDelegate.p_ClinInf_No_V_InModel];

    }

  r_Fatal_w_Euthanasia_NV=appDelegate.p_ClinInf_Yes_NV_InModel *     appDelegate.p_Fatal_Yes_NV_InModel * appDelegate.p_Euthanasia_Yes_NV_InModel * 1; 
```

r_Fatal_w_Spontaneous_Death_NV=appDelegate.p_ClinInf_Yes_NV_InModel *appDelegate.p_Fatal_Yes_NV_InModel *appDelegate.p_Euthanasia_No_NV_InModel * 1；

```
r_NonFatal_w_Perpetual_Sequelae_NV=appDelegate.p_ClinInf_Yes_NV_InModel *appDelegate.p_Fatal_No_NV_InModel * 1 * appDelegate.p_Sequelae_Yes_NV_InModel;
r_NonFatal_w_Full_Recovery_NV=appDelegate.p_ClinInf_Yes_NV_InModel * appDelegate.p_Fatal_No_NV_InModel * 1 * appDelegate.p_Sequelae_No_NV_InModel;
r_Subtotal_ClinInf_NV=r_Fatal_w_Euthanasia_NV + r_Fatal_w_Spontaneous_Death_NV + r_NonFatal_w_Perpetual_Sequelae_NV + r_NonFatal_w_Full_Recovery_NV;

r_Fatal_w_Euthanasia_V= appDelegate.p_ClinInf_Yes_V_InModel * p_Fatal_Yes_V_InModel * appDelegate.p_Euthanasia_Yes_V_InModel * 1;
r_Fatal_w_Spontaneous_Death_V= appDelegate.p_ClinInf_Yes_V_InModel * appDelegate.p_Fatal_Yes_V_InModel *appDelegate.p_Euthanasia_No_V_InModel * 1;
r_NonFatal_w_Perpetual_Sequelae_V= appDelegate.p_ClinInf_Yes_V_InModel * appDelegate.p_Fatal_No_V_InModel * 1 * appDelegate.p_Sequelae_Yes_V_InModel;
r_NonFatal_w_Full_Recovery_V=appDelegate.p_ClinInf_Yes_V_InModel * appDelegate.p_Fatal_No_V_InModel * 1 * appDelegate.p_Sequelae_No_V_InModel;

r_Subtotal_ClinInf_V=r_Fatal_w_Euthanasia_V + r_Fatal_w_Spontaneous_Death_V + r_NonFatal_w_Perpetual_Sequelae_V + r_NonFatal_w_Full_Recovery_V;

/*********************Unvaccinated horse Graph Values **********/

   r_Fatal_V=r_Fatal_w_Spontaneous_Death_V + r_Fatal_w_Euthanasia_V;

[textFieldOne addTarget:self action:@selector(textFieldTextDidChangeOneCI:) forControlEvents:UIControlEventEditingChanged];
[textFieldThree addTarget:self action:@selector(textFieldTextDidChangeThreeCI:) forControlEvents:UIControlEventEditingChanged];

[super viewDidLoad];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:29:28.413

只需在您的`textFieldTextDidChangeOneF`方法中评论此波纹管..

```
textFieldTwo.text=[NSString stringWithFormat:@"%.2f",appDelegate.p_ClinInf_No_NV_InModel]; 
```

**更新：**

首先`BOOL`在您的 .h 文件中使用此名称声明变量，`isTextFieldOne`然后执行如下操作...

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
    if (textField == textFieldOne) {
        isTextFieldOne = True;
    }
    else{
        isTextFieldOne = False;
    }
    return YES;
} 
```

并用您的方法替换波纹管方法...

```
-(void)textFieldTextDidChangeOneF:(UITextField*)tf{

   if (isTextFieldOne){

       NSLog(@"Testing Successful Fatal One");
       appDelegate.p_Fatal_Yes_NV_InModel  = [[textFieldOne text] floatValue];
       appDelegate.p_Fatal_No_NV_InModel=100-appDelegate.p_Fatal_Yes_NV_InModel;
       textFieldTwo.text=[NSString stringWithFormat:@"%.2f",appDelegate.p_Fatal_No_NV_InModel];

       NSCharacterSet * set = [[NSCharacterSet characterSetWithCharactersInString:@"0123456789."] invertedSet];
       NSString*string=textFieldOne.text;
       if ([string rangeOfCharacterFromSet:set].location != NSNotFound) {
           UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Warning" message:@"Only a  
        number can be entered into this input field " delegate:nil cancelButtonTitle:@"OK"        
       otherButtonTitles:nil];
           [alert show];
           [alert release];
           textFieldOne.text=@"";
       }
       NSLog(@"Fata Data %.2f",appDelegate.p_Fatal_Yes_NV_InModel);
    }
} 
```

# ruby - 提前退出的文件读取循环

> ID：15608150
> 
> 赞同：1
> 
> 时间：2013-03-25T05:19:53.987
> 
> 标签：ruby, loops, file-io

我必须在 Ruby 中处理一些笨重的文件。给定一个特定的 ID，我知道与该 ID 关联的数据*不会超过一个*文件，但我不确定是哪个文件。它也可能不存在，这是我需要处理的错误状态。所以我有一个这样的循环：

```
files = ['a','b','c','d']
files.each do |filename|
  File.open(filename,'r') do |f|
    break unless contains_id(myid)
    do_stuff
  end
end 
```

所以我有两个问题：

1.  一旦我找到包含我正在寻找的数据的文件，什么是打破循环的正确方法？

2.  如何处理数据不在任何文件中的情况？

这是我想出的，但感觉很粗糙：

```
files = ['a','b','c','d']
found = false
files.each do |filename|
  break if found
  File.open(filename,'r') do |f|
    break unless contains_id(myid)
    found = true
    do_stuff
  end
end
do_error_stuff unless found 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T05:25:29.713

您可以使用`Enumerable#find`而不是查找块返回 true`#each`的第一个条目，或者使用 else 。所以这看起来像：`files``nil`

```
files = ['a','b','c','d']
file = files.find do |filename|
  File.open(filename,'r') do |f|
    contains_id(myid)
  end
end
do_error_stuff unless file 
```

# asp.net-mvc - WebApi OData 元数据/描述

> ID：15608151
> 
> 赞同：2
> 
> 时间：2013-03-25T05:20:13.760
> 
> 标签：asp.net-mvc, excel, odata

我正在使用新的 2012.2 OData 东西（Microsoft ASP.NET Web API OData）并遵循基本示例。我有一个非常基本的 POCO，它通过我在 /odata 的 MVC 站点“神奇地”公开：

```
 ODataModelBuilder modelBuilder = new ODataConventionModelBuilder();
modelBuilder.EntitySet<Job>("Products");

Microsoft.Data.Edm.IEdmModel model = modelBuilder.GetEdmModel();
config.Routes.MapODataRoute("ODataRoute", "odata", model); 
```

这似乎神奇地连接了 odata“服务”描述文件，并调用了我的 Products 控制器，该控制器被格式化为 ATOM。

我的问题与 POCO、描述和元数据有关。这里发生了很多魔法，我不知道在哪里可以找到文档。我希望能够：

*   为我的实体提供“描述”属性（Excel 2013 在数据连接向导中显示了这一点）

*   用用户友好的名称覆盖我的 POCO 的类名。作为奖励，请允许我动态设置它。

我真的不知道是什么生成了那个“/odata/magic.svc”文件，所以我不知道如何找到它的文档。这是 WebApi、OData、EntityFramework 吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T16:04:57.153

没有生成任何magic.svc。您已完成构建 OData 服务所需的 3 个步骤。有关详细信息，请参阅本[教程](http://www.asp.net/web-api/overview/odata-support-in-aspnet-web-api)和此博客[文章](http://blogs.msdn.com/b/webdev/archive/2013/01/29/getting-started-with-asp-net-webapi-odata-in-3-simple-steps.aspx)。

当你这样做时，

```
DataModelBuilder modelBuilder = new ODataConventionModelBuilder();
modelBuilder.EntitySet<Job>("Products");
Microsoft.Data.Edm.IEdmModel model = modelBuilder.GetEdmModel(); 
```

您已经为 OData 服务构建了[EDM 模型](http://www.odata.org/documentation/odata-v3-documentation/odata-core/#2_Data_Model)。

当你这样做时，

```
config.Routes.MapODataRoute("ODataRoute", "odata", model); 
```

您正在告诉 Web API 使用您刚刚构建的服务模型在 ~/odata/ （第二个参数）处公开 OData 服务。

当您尝试获取 url ~/odata/Products 时，您添加的 OData 路由知道您正在尝试访问 Products 实体集并将其路由到 ProductsController。我将尝试写一篇关于 ODataConventionModelBuilder 使用的约定和默认 OData 路由约定的博客文章。

而关于另外两个问题，

1) 没有提供原子元数据的开箱即用支持。但是，您可以通过使用为 OData 格式化程序添加可扩展性点的每晚删除来覆盖原子元数据。有关详细信息，请参阅此[答案](https://stackoverflow.com/questions/15132667/customizing-odata-output-from-asp-net-web-api/15400048#15400048)。

2) 我们现在不支持别名。所以，那里没有运气。不过，它是我们未来计划中的首要项目之一。

# c++ - 离散数学 C++

> ID：15608155
> 
> 赞同：-1
> 
> 时间：2013-03-25T05:20:30.470
> 
> 标签：c++, discrete-mathematics

x^2 + y^2 = Z^2。如何在代码中检验毕达哥拉斯定理的真实性？我的任务是读入 10 个整数，并用这 10 个整数中的每一个来测试语句是真还是假。这就是我所拥有的，但我不确定它是否正确，因为我不确定我是否正在解决 z。

任何帮助表示赞赏

```
void ESearch(int array[], int size)
{
int trueCount = 0;
//int falseCount = 0;

for(int i = 0; i < size; ++i)
{
    for(int j = 0; j < size; ++j)
    {

        int x = array[i];
        int y = array[j];

        int z = sqrt(pow(x, 2)+ pow(y, 2));

        if(z == x || y)
        {
            ++trueCount;
        }

    }

}
if(trueCount > 0) cout << "\nE is TRUE"; else cout << "\nE is FALSE";

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:53:20.083

你的代码不会按照你想要的方式工作。尝试这个。您的数据量非常小，所以很可能您不太关心效率，但我使用 STL 编写了一些简单（还不是最有效）的解决方案。您定义一个向量并对其进行一次排序，以便在您想要检查该对是否`(x,y)`满足 Pyth 时使用二进制搜索。来自输入数据的其他整数的定理。它需要`log(size)`，因此即使对于大量数据输入，它也应该相当快。此外，您不需要从数据的开头运行第二个循环，因为您已经在检查同一对但之前的顺序不同。代码应该相当简单，但如果您有任何问题，请提出。祝你好运。

```
void ESearch(int array[], int size)
{

int trueCount = 0;
std::vector<int> z(array, array + size);
std::sort(z.begin(), z.end());

int x, y;
double z_check;

for(int i = 0; i < size; i++)
{
    x = array[i];

    for(int j = i+1; j < size; j++)
    {
        y = array[j];

        z_check = sqrt(x*x + y*y);

        if(std::binary_search(z.begin(), z.end(), z_check))
        {
            trueCount++;
        }

    }
}
z.clear();
if(trueCount > 0) cout << trueCount; else cout << "\nE is FALSE";
} 
```

编辑：您甚至可以加快速度，因为您知道您正在寻找大于`sqrt(x*x+y*y)`排序向量的数字：

```
if(std::binary_search(z.begin() + ceil(z_check), z.end(), z_check)) 
```

# sql - SQL（大）查询顺序属性

> ID：15608161
> 
> 赞同：0
> 
> 时间：2013-03-25T05:21:17.420
> 
> 标签：sql, google-bigquery

我们在 bigquery 中有非规范化数据：

```
User,   Cities Lived, Time,  Other properites
A       LD            1942
A       SF            1902
A       LA            2004
A       TK            2012
B       SF            1935
B       SD            1972
B       LA            1899
C       ... 
```

找到住在洛杉矶之前住在旧金山的用户的最有效方法是什么？

输出可以是一个列表。在上述情况下，仅列出“A”。

如果列表同时包含日期和城市会更好：

```
A, 1902, SF, 2004, LA
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:57:50.887

您可以使用 JOIN 来计算您想要的结果：

```
SELECT la_table.user as user, la_table.city, la_table.time,  
  sf_table.city, sf_table.time 
FROM (
  SELECT user, time, city as la from yourTable where city = "LA") as la_table
JOIN EACH (
  SELECT user, time, city as la from yourTable where city = "SF") as sf_table
ON la_table.user = sf_table.user
WHERE la_table.time > sf_table.time 
```

注意连接子句中的“EACH”，因为表的大小可能会很大。请参阅 BigQuery JOIN[参考](https://developers.google.com/bigquery/docs/query-reference#joins)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:54:04.717

我想你应该加入类似（伪代码）（SELECT TIME AS LA_TIME where Cities = LA GROUP BY User）并标记所有行，其中 TIME_LA > TIME where city = SF。OUTPUT 将通过“帮助”列上的 HAVING 子句进行过滤。

上次 BQ 更新后，您不应受到嵌套选择输出大小的限制。

# r - 哪个是 R 中时间序列数据峰值检测的最佳 R 包？

> ID：15608168
> 
> 赞同：-2
> 
> 时间：2013-03-25T05:21:45.663
> 
> 标签：r

我想知道就时间复杂度、CPU 利用率而言，哪个是 R 中峰值检测的最佳包……我在 R 中找到了一些用于峰值检测的包，例如：

```
PROcess
quantmod
baseline 
```

我想对时间序列数据应用峰值检测算法。谁能帮帮我。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-25T06:22:31.643

开发了 robfilter r 包，用于过滤时间序列数据，以基于稳健的统计方法挑选出异常值以进行时间序列分析。您可以使用 adore.filter 函数将模式拟合到数据中，然后选择远离信号的异常值。

# android - 如何在Android的GridLayout中设置元素的列和行

> ID：15608173
> 
> 赞同：2
> 
> 时间：2013-03-25T05:22:11.073
> 
> 标签：android, imagebutton, grid-layout

我有一个包含几个 ImageButton 的 GridLayout，例如

```
 <ImageButton
       android:id="@+id/btnColor00"
       android:layout_column="0"
       android:layout_row="0" /> 
```

布局正确显示 ImageButtons，但我想以编程方式实现它以动态创建 ImageButtons 的 GridLayout。

我在下面编写了代码，但我还不知道如何以编程方式设置 android:layout_column, android:layout_row。

```
 ibs = new ImageButton[42];

    for (int i=0; i<42;i++) {
        ibs[i] = new ImageButton(getContext());
        LayoutParams params = ibs[i].getLayoutParams();
        params.height = 40;
        params.width = 40;

        ibs[i].setLayoutParams(params);
    } 
```

我搜索了 LayoutParams 和 ImageButton 的方法，但找不到任何类似的命令。谁能帮我？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:24:30.210

不同的布局有不同的`LayoutParams`类。您需要使用 GridLayout.LayoutParams。

```
GridLayout.LayoutParams params = (GridLayout.LayoutParams)ibs[i].getLayoutParams(); 
```

# asp.net - 页面加载时 LoginView LoggedInTemplate 中的 Findcontrol？

> ID：15608178
> 
> 赞同：0
> 
> 时间：2013-03-25T05:23:06.893
> 
> 标签：asp.net, loginview

我有一个带有匿名模板和 LoggedInTemplate 的 LoginView。我想在页面加载事件中找出 LoggedInTemplate 中包含的控件。

```
<asp:LoginView ID="HeadLoginView" runat="server" EnableViewState="false">
                <AnonymousTemplate>
                    <asp:HyperLink NavigateUrl="~/Account/Login.aspx" ID="HeadLoginStatus" runat="server" Text="Log In" />
                </AnonymousTemplate>
                <LoggedInTemplate>
               <%-- <span >--%>
                    <asp:Image ID="imgUserPic" CssClass="profilePic floatRight cursor" runat="server" />
                        <a href="#"  class="hlnkstyle">                            
                            <asp:Label ID="lblLoginUser" runat="server" class="show_hide"/>
                        </a>
                    <%--</span>--%> 
                    <div class="slidingDiv  imgHover">
                        <asp:Image ID="imgSlidingUserPic" CssClass="slidingPic" runat="server" />
                        <div class="clr"></div>
                        <asp:Label ID="lblUserName" Font-Bold="true" runat="server" />
                        <br /><asp:Label ID="lblEmail"  ForeColor="#666" runat="server" />                       
                        <br /><br />
                        <asp:HyperLink id="hlkUsrProfile" CssClass="lnkprofilestyle" runat="server">View Profile</asp:HyperLink>
                        <div class="innerSlidingDiv">
                            <asp:HyperLink ID="hlkUsrAccount" NavigateUrl="~/Account/ChangePassword.aspx" runat="server">Account</asp:HyperLink>
                            <asp:LoginStatus ID="LoginStatus1" style=" float:right;" runat="server" LogoutAction="Redirect" LogoutText="Log Out" LogoutPageUrl="~/Account/Login.aspx"
                                onloggingout="HeadLoginStatus_LoggingOut"/> 
                        </div> 
                    </div>                                           
                </LoggedInTemplate>
            </asp:LoginView> 
```

在这里，我试图在页面加载事件的登录视图中找到控件（超链接和图像）。但是使用此代码，我无法获得控制权并出现错误。
所以任何帮助都深表感谢。

```
 HyperLink hlkUsrProfile = (HyperLink)HeadLoginView.FindControl("hlkUsrProfile");
        Image imgUserPic = (Image)HeadLoginView.FindControl("imgUserPic"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-12T21:52:48.380

尝试这个：

```
(this.HeadLoginView.FindControl("hlkUsrProfile") as HyperLink).Text = "Some text";
(this.HeadLoginView.FindControl("imgUserPic") as Image ).ImageUrl= "Image Url"; 
```

# python - 使用 ElementTree 或 lxml 创建 xml 文件

> ID：15608185
> 
> 赞同：-1
> 
> 时间：2013-03-25T05:23:23.807
> 
> 标签：python, xml, xml-parsing, lxml, elementtree

我正在使用以下代码创建 XML 文件，但格式混乱。我想知道是否有人对如何使用 elementtree 或 lxml 为以下代码创建格式化的 xml 文件有意见。

```
data = [['SEC.12.0', '\\\\DATA\\LOC', '\\\\ftp\\location'], ['SEC.13.0', '\\\\DATA\\LOC2', '\\\\ftp\\location2']]

f = open('data.xml', 'w')
f.write('<combo>')
for line in data :
    f.write('<pro>' + line[0] + '</pro>')
    f.write ('\n')
    f.write('<dataloc>' + line[1] + '</dataloc>')
    f.write('\n')
    f.write('<ftploc>' + line[2]+ '</ftploc>')
    f.write('\n')
f.write(</combo>') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T14:00:07.153

我不确定为了美化而解析和转储你的 xml 字符串是个好主意。您可以像这样预先格式化您的 xml 字符串：

```
from lxml import etree

data = [['SEC.12.0', '\\\\DATA\\LOC', '\\\\ftp\\location'], ['SEC.13.0', '\\\\DATA\\LOC2', '\\\\ftp\\location2']]

COMBO = """<combo>
    {0}
</combo>"""

ITEM = """
    <pro>{0}</pro>
    <dataloc>{1}</dataloc>
    <ftploc>{2}</ftploc>
"""

output = COMBO.format("".join([ITEM.format(*line) for line in data]))

with open('data.xml', 'w') as f:
    f.write(output) 
```

仅供参考，您可以这样做`lxml`（我已经稍微改变了形成 xml 的过程）：

```
from lxml import etree

data = [['SEC.12.0', '\\\\DATA\\LOC', '\\\\ftp\\location'], ['SEC.13.0', '\\\\DATA\\LOC2', '\\\\ftp\\location2']]

xml_string = '<combo>'
for line in data:
    xml_string += "<pro>{0}</pro>\n<dataloc>{1}</dataloc>\n<ftploc>{2}</ftploc>\n".format(*line)
xml_string += '</combo>'

parser = etree.XMLParser(remove_blank_text=True)
root = etree.fromstring(xml_string, parser)
with open('data.xml', 'w') as f:
    f.write(etree.tostring(root, pretty_print=True)) 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T19:14:19.177

以下是使用 lxml`Element`和`SubElement`函数创建 XML 文档的方法（无需键入任何尖括号）：

```
from lxml import etree

data = [['SEC.12.0', '\\\\DATA\\LOC', '\\\\ftp\\location'],
        ['SEC.13.0', '\\\\DATA\\LOC2', '\\\\ftp\\location2']]

combo = etree.Element("combo")   # Root element of XML document

for line in data:
    etree.SubElement(combo, 'pro').text = line[0]
    etree.SubElement(combo, 'dataloc').text = line[1]
    etree.SubElement(combo, 'ftploc').text = line[2]

etree.ElementTree(combo).write("data.xml", pretty_print=True) 
```

程序输出一个名为 data.xml 的文档，其内容如下：

```
<combo>
  <pro>SEC.12.0</pro>
  <dataloc>\\DATA\LOC</dataloc>
  <ftploc>\\ftp\location</ftploc>
  <pro>SEC.13.0</pro>
  <dataloc>\\DATA\LOC2</dataloc>
  <ftploc>\\ftp\location2</ftploc>
</combo> 
```

* * *

上面的代码可以修改为使用 ElementTree：

1.  将导入语句更改为`from xml.etree import ElementTree as etree`.
2.  删除方法`pretty_print`中的参数`write()`。

但是输出不会打印得很漂亮。要解决该问题，您可以使用[http://effbot.org/zone/element-lib.htm#prettyprint](http://effbot.org/zone/element-lib.htm#prettyprint)`indent()`中的函数。

# php - Active Record Delete 无法正常工作

> ID：15608188
> 
> 赞同：5
> 
> 时间：2013-03-25T05:23:41.663
> 
> 标签：php

我编写了一个简单的函数来从数据库中删除数据，但删除查询不正确，我的模型代码如下：

```
function removedata()
{
    $userid = $this->input->post('userid');
    $this->db->where('userid', $userid);
    $deldata = $this->db->delete('userbasic');
    if ($deldata == true) {
        echo "Data Removed Successfully";
    } else {
        echo "Deletion Failed";
    }
} 
```

我已经加载了数据库并尝试了两个查询，即

```
 $this->db->where('userid',$userid);
  $deldata=$this->db->delete('userbasic'); 
```

和

```
$deldata=$this->db->delete('userbasic',array('userid'=>$userid)); 
```

所以请建议我回答结果没有错误它也打印成功删除的数据但仍然没有从数据库中删除数据......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:30:59.503

代码看起来不错。尝试调试。

使用它来打印查询。

```
echo $this->db->last_query(); 
```

然后尝试在您的 phpmyadmin 中执行该查询。并检查天气它会删除你的行。

# python - Python：套接字不能在 LAN 上工作

> ID：15608189
> 
> 赞同：0
> 
> 时间：2013-03-25T05:23:44.483
> 
> 标签：python, macos, sockets, python-2.7, raspberry-pi

我最近从假期回来，我的基本 python 2 套接字服务器现在无法通过 LAN 与客户端通信。服务器在 Mac 上，客户端是我的树莓派或我的 windows 7 机器。我在这里简化了服务器和客户端代码来举个例子：

**服务器**

```
import socket
from thread import *

HOST = socket.gethostname()

print HOST

PORT = input ("Enter the PORT number (1 - 10,000)")

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM )
s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
print "Socket Created"

s.bind((HOST, PORT))

print "Socket Bind Complete"

s.listen(10)
print "Socket now listening"

    #Sending message to connected client
    #This only takes strings (words

while True:
    #Wait to accept a connection - blocking call
    connection, addr = s.accept()
    print "Connection Established!"

    connection.send("Welcome to the server. Type something and hit enter\n")

    #loop so that function does not terminate and the thread does not end
    while True:

        #Receiving from client
        data = connection.recv(1024)
        if not data:
            break
        connection.sendall(data)
        print data
    connection.close()
s.close() 
```

**客户**

```
import socket #for sockets
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
print "Socket Created"

#Get host and port info to connect
host = raw_input("HOST >>>   ")
port = 2468
s.connect((host, port))

while True:   
    #Send some data to the remote server
    message = raw_input(">>>  ")

    #set the whole string
    s.sendall(message)

    reply = s.recv(1024)
    print reply 
```

**问题**

这里发生了什么？我正在获取本地 IP，但脚本仍然无法通信。会不会是操作系统的问题？

* * *

**更多信息**

1.  平平

    一个。我能够从我的 Mac 终端 ping PI：

    ```
    PING raspberrypi (67.63.55.3): 56 data bytes
    64 bytes from 67.63.55.3: icmp_seq=0 ttl=240 time=17.434 ms
    64 bytes from 67.63.55.3: icmp_seq=1 ttl=240 time=18.180 ms
    64 bytes from 67.63.55.3: icmp_seq=2 ttl=240 time=22.046 ms
    64 bytes from 67.63.55.3: icmp_seq=3 ttl=240 time=25.124 ms
    64 bytes from 67.63.55.3: icmp_seq=4 ttl=240 time=31.773 ms 
    ```

    湾。我的 PI 无法找到作为主机的 Mac。我会看看我能做些什么来解决这个问题。

    C。我的电脑能够 PING 我的 mac。我的 Mac 能够 ping 我的 PC

2.  防火墙

我的 Mac 的防火墙已关闭。我将在 [Raspberry Pi Stackexchange Site] 上查看 PI 是否有防火墙。

一旦我测试我的 Windows 机器，我将添加更多信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:27:40.000

在本地运行这两个脚本，它们设法在我的机器上连接和通信。您正面临网络问题，这应该很容易调试。

1.  **错误的绑定。** 在服务器上，打印你得到的 HOST。如果服务器有多个 IP，您可能会尝试绑定错误的 IP。您也可以将其更改为“0.0.0.0”（仅在服务器端），看看是否可行。

2.  **防火墙。** 任何一方都可能在操作系统级别阻止 tcp 通信。调试是通过Windows上的[Wireshark](http://www.wireshark.org/download.html)和unix上的[tcpdump完成的。](http://www.tcpdump.org/tcpdump_man.html)开始嗅探，运行您的代码，看看出了什么问题。您很可能会看到客户端发送`SYN`数据包，但服务器将无法使用`SYN|ACK`数据包进行应答。如果您看到`SYN`数据包到达服务器，请尝试完全关闭服务器的防火墙并重试。如果不是，则客户端被禁止传出通信（不太可能），您将需要关闭其防火墙。

3.  **正在使用的端口。** 尝试删除 SO_REUSEADDR 进行调试，看看是否有变化。

4.  **例外。** 确保不要忽略套接字的任何异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T11:42:24.810

您的代码运行良好，但我做了一些小的更正，并在代码内的注释中解释了它们：

**服务器：**

```
import socket
from thread import *

# 1.Gets the local ip/ip over LAN.
HOST =socket.gethostbyname(socket.gethostname()) 

print HOST

# 2.Use port no. above 1800 so it does not interfere with ports already in use.
PORT =input ("Enter the PORT number (1 - 10,000)") 

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM )
s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
print "Socket Created"
s.bind((HOST, PORT))
print "Socket Bind Complete"
s.listen(10)
print "Socket now listening"
while True:
    connection, addr = s.accept()
    print "Connection Established!"
    connection.send("Welcome to the server. Type something and hit enter\n")
    while True:
        data = connection.recv(1024)
        if not data:
            break
        connection.sendall(data)
        print data
        connection.close()
s.close() 
```

**客户：**

```
import socket 
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
print "Socket Created"
host = raw_input("HOST >>>   ")

# 3\. Use the same port no. entered on server.py as the client binds to the 
#    same port
port = input ("Enter the PORT number (1 - 10,000)") 
s.connect((host, port))

while True:   
    message = raw_input(">>>  ")    
    s.sendall(message)
    reply = s.recv(1024)
    print reply 
```

上面的代码对我来说很好用，我相信你也可以，因为我遇到了同样的麻烦。发现的bug我已经把它们放在代码里面的注释里看看。

干杯....！

# android - 无法显示带有进度条的自定义对话框

> ID：15608199
> 
> 赞同：0
> 
> 时间：2013-03-25T05:24:29.237
> 
> 标签：android, android-widget

我正在为我的对话框使用自定义布局来显示进度条和文本。布局看起来像

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/footer_layout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/popuplayout"
    android:padding="8dp">

    <LinearLayout android:id="@+id/progressdialog" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true">

    <ProgressBar
        android:id="@+id/progressBar"
        android:layout_width="32dp"
        android:layout_height="32dp"
        android:layout_gravity="center_vertical"
        android:layout_toLeftOf="@+id/textView1" />

    <TextView
        android:id="@+id/progressmsg"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_gravity="center_vertical"
        android:layout_marginLeft="10dp"
        android:textStyle="bold"
        android:textSize="15dp"
        android:padding="5dp"
        android:text="loading..." />
    </LinearLayout>
</RelativeLayout> 
```

并通过我的 util.java（不是活动）中的方法在对话框中分配此布局，例如

```
private static Dialog progressDialog = null;
public static void showLoadingProgress(String msg){
        Log.d("EditorUtil", "show loading progress"+progressDialog);//No i18n

        progressDialog = new Dialog(MainActivity.getActivity());
        progressDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
        progressDialog.setCancelable(false);
        progressDialog.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
        progressDialog.setContentView(R.layout.customprogress);

        TextView message = (TextView)progressDialog.findViewById(R.id.progressmsg);
        message.setText(msg);

        progressDialog.show();
        Log.d("",progressDialog.isShowing()+""); //No i18n
    } 
```

调用此方法时，我无法看到对话框，但日志正在正确打印。请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:42:58.540

创建自定义对话框

如果您想要自定义的对话框设计，您可以使用布局和小部件元素为对话框​​窗口创建自己的布局。定义布局后，将根视图对象或布局资源 ID 传递给 setContentView(View)。

```
For example, to create the dialog shown to the right:

Create an XML layout saved as custom_dialog.xml:

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/layout_root"
              android:orientation="horizontal"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:padding="10dp"
              >
    <ImageView android:id="@+id/image"
               android:layout_width="wrap_content"
               android:layout_height="fill_parent"
               android:layout_marginRight="10dp"
               />
    <TextView android:id="@+id/text"
              android:layout_width="wrap_content"
              android:layout_height="fill_parent"
              android:textColor="#FFF"
              />
</LinearLayout> 
```

此 XML 在 LinearLayout 中定义了一个 ImageView 和一个 TextView。将上述布局设置为对话框的内容视图，并为 ImageView 和 TextView 元素定义内容：

```
Context mContext = getApplicationContext();
Dialog dialog = new Dialog(mContext);

dialog.setContentView(R.layout.custom_dialog);
dialog.setTitle("Custom Dialog");

TextView text = (TextView) dialog.findViewById(R.id.text);
text.setText("Hello, this is a custom dialog!");
ImageView image = (ImageView) dialog.findViewById(R.id.image);
image.setImageResource(R.drawable.android); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:43:07.273

```
View dialogRoot = getLayoutInflater().inflate(R.layout.sync_bars, null);
cancelDialog.setView(dialogRoot);
ProgressBar hbar = (ProgressBar) dialogRoot.findViewById(R.id.progressBar); 
```

您必须参考进度条才能与之交互。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T05:44:20.210

我不太确定您的问题背后的原因是什么，但我可以提出一些您可能会觉得有帮助的建议

1.  使用上下文而不是 getActivity。

    progressDialog = new Dialog(MainActivity.getActivity());

应该替换为必须添加到 util 类的上下文，并且应该通过构造函数传递

```
 progressDialog = new Dialog(context); 
```

我希望你不要通过 getActivity 方法传递 Activity 的对象。

1.  而不是使用 progressDialog.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND); 和progressDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);

您可以将所有这些内容添加到 R.style.Your 主题

3.如果为像这样扩展Dialog类的对话框创建一个单独的类

```
public class TextEditDialog extends Dialog implements OnClickListener {
            Button cancelButton;
            public Button okBtn;
            TextView title;
            EditText nameField,password;
            public static long id;
            public static int code;
            CheckBox rememberme;
            Context c;
            TableRow bottomoftextdialog;
            TextView bottomtexttochange,toptexttochange;

            public TextEditDialog(Context context) {
                super(context,R.style.Theme_Custom);
                c=context;
                this.requestWindowFeature(Window.FEATURE_NO_TITLE);

                setContentView(R.layout.main);

                nameField = (EditText) findViewById(R.id.Uname);
                password= (EditText) findViewById(R.id.password);
                rememberme=(CheckBox)findViewById(R.id.rememberme);
                okBtn = (Button)findViewById(R.id.login);
                bottomoftextdialog=(TableRow)findViewById(R.id.bottomoftextdialog);

                bottomtexttochange=(TextView)findViewById(R.id.bottomtexttochange);
                toptexttochange=(TextView)findViewById(R.id.toptexttochange);
                okBtn.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View v) {

                        dismiss();
                    }
                });

            }

            public void onClick(View v) {
                // TODO Auto-generated method stub

            }
        }

    this way you will be able to manage things really well. 
```

# javascript - 如何使用 javascript 渲染数据库

> ID：15608201
> 
> 赞同：0
> 
> 时间：2013-03-25T05:24:41.940
> 
> 标签：javascript, database, sqlite, loops, while-loop

我想知道是否有人可以对我有所帮助。

我正在尝试从使用 TideSDK 创建的应用程序的应用程序数据库中呈现表。

所以它会在同一页面上呈现所有行/列的每个表。我认为我走在正确的轨道上，在 WHILE 循环中加入了 WHILE 循环。

这是我的 JS 代码：

```
window.onload = function () { 

//connect to application database
var db = Ti.Database.openFile(Ti.Filesystem.getFile(
                          Ti.Filesystem.getApplicationDataDirectory(), 'assessment.db'));

var tbl_name = db.execute("SELECT name FROM sqlite_master WHERE type='table' ORDER BY name");

var row_name = db.execute("SELECT * FROM " + tbl_name);

//This is a table I've hard-coded into the html page
var tbl = document.getElementById('tbl');

while (tbl_name.isValidRow()) {

while (row_name.isValidRow()) {
var td = document.createElement('td');
var row = row_name.fieldByName();
td.appendChild(document.createTextNode(row));
tr.appendChild(td);
tbl.appendChild(tr);
row_name.next();   
};

//end row while loop

var tr = document.createElement('tr');
var name = tbl_name.fieldByName('name');
tr.appendChild(document.createTextNode(name));
tbl.appendChild(tr);
tbl_name.next();   
};
//end table while loop

} 
```

我一直在绞尽脑汁试图让它发挥作用，并认为也许这里有人会知道如何为我指明正确的方向。

# php - PHP 在 preg_replace 上崩溃

> ID：15608203
> 
> 赞同：20
> 
> 时间：2013-03-25T05:24:53.930
> 
> 标签：php, crash, preg-match

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T05:32:16.917

您可以使用替代 mb_ereg_replace() 函数：

```
mb_internal_encoding("UTF-8");
mb_regex_encoding("UTF-8");
echo mb_ereg_replace('#(?:^[^\pL]*)|(?:[^\pL]*$)#u','',$string); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T14:08:23.167

也许这会有所帮助：

> 这些属性通常仅在 PCRE 使用“--enable-unicode-properties”编译时可用

[http://docs.php.net/manual/en/regexp.reference.unicode.php#96479](http://docs.php.net/manual/en/regexp.reference.unicode.php#96479)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T06:56:06.947

从表达式本身来看，有两点可以改进：

1.  `*`乘数不是很有用。为什么要用空字符串替换可能为空的匹配项？事实上，在我的系统上运行它会产生`NULL`操作`preg_replace()`。

2.  内存组可以合并在一起。

这是应用两项改进后的代码：

```
$string = 'ﺫﺫ';
var_dump(preg_replace('#(?:^[^\pL]+|[^\pL]+$)#u', '', $string));
// string(4) "ﺫﺫ" 
```

[**3v4l 结果**](http://3v4l.org/lF95R)

如果您只是在寻找多字节修剪功能（从 4.3.0 开始支持）：

```
$string=' دد';
var_dump(preg_replace('#(?:^\s+|\s+$)#u', '', $string)); 
```

[**3v4l 结果**](http://3v4l.org/ZBXoX)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T02:42:02.973

使用`preg_quote`并且您必须在将其与正则表达式一起使用之前正确转义特殊字符。例如：

```
<?php
$string = preg_quote("\دد");
echo preg_replace('#(?:^[^\pL]*)|(?:[^\pL]*$)#u','',$string); 
```

在行动中看到它：http: [//3v4l.org/LeBXg](http://3v4l.org/LeBXg)

更多关于[preg_quote](http://php.net/manual/en/function.preg-quote.php)。

干杯，

阿迪

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-28T11:08:42.380

最后解决了这个bug：

> ```
> Output for 4.4.0 - 4.4.9, 5.0.5 - 5.1.6, 5.5.27 - 5.5.33, 5.6.11 - 7.0.4, hhvm-3.6.1 - 3.12.0
>     دد 
> ```

# java - updating javac version to same as java version

> ID：15608204
> 
> 赞同：4
> 
> 时间：2013-03-25T05:25:01.993
> 
> 标签：java, centos

How to use the same version of java 1.7 for both java and javac, on my centos I am getting results like this...

for command java -version:

```
java version "1.7.0_03"
Java(TM) SE Runtime Environment (build 1.7.0_03-b04)
Java HotSpot(TM) 64-Bit Server VM (build 22.1-b02, mixed mode) 
```

for command javac -version:

```
javac 1.6.0_24 
```

how to use 1.7 for javac too? If I need to update JAVA_HOME variable how can I update it? (using what command)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:43:05.627

您需要更新 PATH 变量以包含正确 JDK 的 bin 目录。

通过将其添加到 PATH 的开头，确保您的 PATH 在安装任何其他 JDK/JRE 之前具有您的 JDK bin 文件夹。

**从您的 Korn 或 bash shell（控制台）运行以下命令：**

```
export JAVA_HOME=jdk-install-dir 

export PATH=$JAVA_HOME/bin:$PATH 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T05:27:45.173

也许您刚刚安装了 1.6 JDK 和 1.7 JRE。要使两者保持在同一级别，只需安装 1.7 JDK。试试这个命令：

```
su -c "yum install java-1.7.0-openjdk" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T05:43:50.490

设置 JAVA_HOME =C:..... 你的 java 7 所在的路径到 bin 位置

例子

```
SET JAVA_HOME=C:\Program Files\Java\jdk_1.7.1
SET JAVA=%JAVA_HOME%\bin\java 
```

# gwt - Direction and Size of Placeholder in SmartGWT Mobile

> ID：15608207
> 
> 赞同：1
> 
> 时间：2013-03-25T05:25:11.333
> 
> 标签：gwt, smartgwt, mobile-application, gxt

![place holder](../Images/0a56118e8cc8a0f78111095916dca96c.png)

I have a Text Item added to a dynamic form in smart GWT mobile (as shown in the image). On the right there is the place holder, when I start typing it starts from far end. I want it to start typing from the left that is after title.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T23:00:22.533

尝试将文本对齐方式设置为 LEFT。
在非移动版本中，可以使用更改文本对齐方式`textItem.setTextAlign(Alignment.LEFT);`

此外，看看是否可以通过使用可用的 API 方法更改长度、提示的显示方式、标题的显示方式等来完成任何事情。

我没有使用 SmartGWT mobile，所以这可能无法解决问题。

我的感觉是，移动输入字段旨在优化移动设备上的屏幕空间，将标题和输入推向屏幕的左侧和右侧，将任何剩余的空间放在中间。

在浏览器或其他模拟器中进行测试时，标签和输入之间的空间看起来很大，但在移动设备中使用时，它可能看起来还不错。

# backbone.js - Backbone home route reloads page

> ID：15608208
> 
> 赞同：1
> 
> 时间：2013-03-25T05:25:15.573
> 
> 标签：backbone.js, router

in a very simple backbone app, I tried manipulating routes, I have them working, but I'm just wondering why the links to the homepage actually reload the page, when no other routes do reload.

Here's my router:

```
App.Router = Backbone.Router.extend({
routes: {
    '':             'index',
    'trips':        'trips',
    'trips/new':    'newTrip',
    'trips/:id':    'showTrip'
},

index: function(){

    App.trips = new App.Collections.Trips ;

    App.trips.fetch().then(function(){

        new App.Views.App({ collection: App.trips });

    });
},

trips: function(){
    console.log('All trips') ;
},

newTrip: function(){
    console.log('new trip') ;
    var new_trip = new App.Views.Trip.New ;

    $('#content').empty().append(new_trip.el) ;

},

showTrip: function(id){
    console.log('trips id:' + id) ;
}
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:15:25.907

如果您使用 Backbone 路由器或链接，您必须知道，`#`只要您没有启用 pushstate（在您的浏览器和服务器上），每个路由都会被处理。

所以如果你需要设置一个家庭使用的链接`#`

与`<a class="brand" href="#/">Home</a>`其他方式一样，该链接将作为本机 url 处理

# asp.net - 样式表 CSS 未使用 Context.RewritePath 加载

> ID：15608212
> 
> 赞同：1
> 
> 时间：2013-03-25T05:25:31.787
> 
> 标签：asp.net, vb.net, visual-studio-2010, global-asax

我在使用 asp.net VB **Context.RewritePath加载****样式表**CSS 时遇到问题。

 **我的项目正在开发飞行子域系统。意味着当我们在 **abcUser.mydomain.com**中输入时，它将从**mydomain.com/users/abcUser/default.aspx**获取 abcUser 的默认页面，而无需更改地址栏的地址。*记住不存在任何物理子域*。

在我的项目中，如果存在用户名文件夹，那么它会从 /users/<abcUser>/default.aspx 加载默认页面。

现在如果在浏览器中我输入直接路径

> 例如：www.mydomain.com/users/<abcUser>/default.aspx

然后它加载css样式表，但如果我输入这样的路径：

> 例如：abcUser.mydomain.com

然后它加载我的 default.aspx 页面但不加载 css 文件

*   这是 Global.asax Application_BeginRequest 代码：

.

```
If Directory.Exists(Server.MapPath("~/users/" & parameters(i))) Then
   Context.RewritePath("/users/" & parameters(i) & "/default.aspx", False)                    
    Return
Else
    Context.RewritePath("/error.aspx")
    Return
End If 
```

Parameters(i) 变量包含在浏览器中作为子域输入的值，例如：abcUser。

*   这是我的文件夹结构：

![在此处输入图像描述](../Images/535385dc93c4ac5dc53cc8dc807e7ee1.png)

*   这是我的 default.aspx 页面代码：

    ```
    <link href="StyleSheet.css" rel="stylesheet" /> 
    ```

[额外细节：我为 microsoft.aspnet.friendly.urls LINK](http://weblogs.asp.net/scottgu/archive/2013/02/18/announcing-release-of-asp-net-and-web-tools-2012-2-update.aspx)安装了新的 ASP.NET 和 Web Tools 2012.2 更新。它正在按承诺工作，我所有的新旧网页现在都很友好。我的项目是asp.net 4 webform iis7

**Global.asax 代码：**

```
 Sub Application_BeginRequest(ByVal sender As Object, ByVal e As EventArgs)
    Dim fullHostPath As String = Request.Url.ToString()
    Dim url As New System.Uri(fullHostPath)
    Dim fullDomain As String = url.Host
    Dim parameters() As String = fullDomain.Split(".")
    Dim originalPath As String = HttpContext.Current.Request.Path.ToLower()
    '   

    For i As Integer = 0 To parameters.Length - 1
        If parameters(i) = "localhost" Or parameters(i) = "abc" Then
            'if User enter www.abc.com
            parameters(i) = 0
            Return
        End If
        If parameters(i) = "www" Then
            'if User enter WebName with "www" eg: www.jasbir.abc.com
            'i+=1 gives the next array value, next array is the user name in "fulldomain" variable
            i += 1
            GlobalUserNameVar = parameters(i)   ' get current subdomain name and store for CSS
            If parameters(i) <> "abc" Then
                If originalPath.Contains("/dashboard") And Directory.Exists(Server.MapPath("~/users/" & parameters(i))) Then
                    'check is full path contains "/dashboard" keyword if yes then move to this:-
                    Context.RewritePath(originalPath.Replace("/dashboard", "~/dashboard"), False)
                    Return
                ElseIf originalPath.Contains("/profile") And Directory.Exists(Server.MapPath("~/users/" & parameters(i))) Then
                    'check is full path contains "/profile" keyword if yes then move to this:-
                    Context.RewritePath(originalPath.Replace("/profile", "/users/" & parameters(i) & "/profile"), False)
                    Return
                ElseIf Directory.Exists(Server.MapPath("~/users/" & parameters(i))) Then
                    'check user named directory exists or not if yes then do this:-
                    HttpContext.Current.Server.TransferRequest("/users/" & parameters(i) & "/default.aspx", False)
                    Return
                Else
                    Context.RewritePath("/error.aspx")
                    Return
                End If
            Else
                Return
            End If
        End If
        Next 
```

这是 default.aspx 页面代码

```
<script type="text/javascript" charset="utf-8">
    $(document).ready(function () {
    function oGod(textboxID, NewValue, textboxUserName) {
        var resultData;

        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "default.aspx/HelloWorld",
            data: '{ "varTextBoxID" : "' + textboxID + '", "varNewData" : "' + NewValue + '", "varUserName":  "' + textboxUserName + '"}',
            dataType: "json",
            async: false,
            success: function (msj) {                    
                resultData = msj.d;
                return resultData;
            },
            error: function (e) {                    
                resultData = "error";                   
                return resultData;
            }

        });           

        return resultData;
    } 
```

default.aspx.vb 代码

```
<WebMethod()> _
Public Shared Function HelloWorld(varTextBoxID As String, varNewData As String, varUserName As String)
    Dim tempData As String = Nothing

    If varTextBoxID = "edit_main_contents" Then
        tempData = UpdateHouseDatabase(varTextBoxID, varNewData, varUserName)
    End If
    If varTextBoxID = "edit_second_contents" Then
        tempData = UpdateHouseDatabase(varTextBoxID, varNewData, varUserName)
    End If
    If varTextBoxID = "user_ID" Then
        tempData = varNewData
    End If

    Return tempData
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-10T17:14:38.777

我最终使用了`Server.TransferRequest`. 使用此方法时，问题似乎并未显现。我不知道为什么...**

# c# - 如何只允许在文本框上按下数字、退格键和连字符键

> ID：15608213
> 
> 赞同：0
> 
> 时间：2013-03-25T05:25:51.743
> 
> 标签：c#, maskedtextbox

我做了一个文本框来插入电话号码。我只想按下数字、删除按钮和连字符键。我使用了以下代码：它适用于删除按钮和数字，我应该为连字符做什么？

```
private void ContactNumTextBox_KeyPress(object sender, KeyPressEventArgs e)
{
    const char Hyphen = (char)2d;
    const char Delete = (char)8;
    if (char.IsNumber(e.KeyChar) && e.KeyChar != Hyphen && e.KeyChar!= Delete)
        e.Handled = true; 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T05:34:41.350

使用十六进制数字时，必须在数字前面加上`0x`. 由于`d`指定数字是双精度的巧合，您的代码当前正在编译。以下代码将正确检测连字符：

```
private void ContactNumTextBox_KeyPress(object sender, KeyPressEventArgs e)
{
    const char hyphen = (char)0x2D;
    const char delete = (char)0x08;
    if (!char.IsNumber(e.KeyChar) && e.KeyChar != hyphen && e.KeyChar!= delete)
        e.Handled = true; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-10T05:54:06.977

你也可以试试这个

```
if (!(char.IsDigit(e.KeyChar) || e.KeyChar == (char)Keys.Back || e.KeyChar == '-'))
{
     e.Handled = true;

} 
```

# php - 查找与php中的单词完全匹配？

> ID：15608216
> 
> 赞同：1
> 
> 时间：2013-03-25T05:26:12.867
> 
> 标签：php, regex, match, cakephp-2.1

我想用锚标记替换可用字符串中的一些单词。但这给我带来了问题。我正在做如下：

```
$post['Post']['comment'] = 'a class href';
$post['Post']['person'] = 'a';
$post['Post']['place'] = 'class';
$post['Post']['thing'] = 'href';

$thing = "<a class='searchName' href='javascript:void(0)'>".ucfirst($post['Post']['thing'])."</a>";
$person = "<a class='searchName' href='javascript:void(0)'>".ucfirst($post['Post']['person'])."</a>";
$place = "<a class='searchName' href='javascript:void(0)'>".ucfirst($post['Post']['place'])."</a>";

$search_strings = array($person=>$post['Post']['person'],$place=>$post['Post']['place'],$thing=>$post['Post']['thing']);
$kw_to_search_for = $post['Post']['comment'];
foreach($search_strings as $key=>$v)
{               
    if (preg_match('~\b' . $v . '\b~i', $kw_to_search_for, $m))
    {               
        $as[] = str_ireplace($v, $key, $kw_to_search_for);
    } 
} 
```

上述代码的输出是：

```
Array
(
    [0] => **A** cl**A**ss href
    [1] => a **Class** href
    [2] => a class **Href**
) 
```

但我不想像上面那样输出。根据我的要求，输出应如下所示：

```
Array
(
    [0] => **A** class href
    [1] => a **Class** href
    [2] => a class **Href**
) 
```

请尽快建议.......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:20:18.857

如果您使用评论中的空格来分隔单词，它将起作用。

```
foreach ($search_strings as $key=>$v)
{
    //space at the beginning?
    $a = preg_replace('/\s' . $v . '/i', " $key ", $kw_to_search_for);

    //space at the end?
    $b = preg_replace('/' . $v . '\s/i', " $key ", $kw_to_search_for);

    //if anything replaced, use it
    if ($a !== $kw_to_search_for)
    {
        $as[] = $a;
    }
    elseif ($b !== $kw_to_search_for)
    {
        $as[] = $b;
    }
} 
```

输出有一些额外的空格，但 HTML 应该忽略那个很好......

```
Array
(
    [0] =>  <a class='searchName' href='javascript:void(0)'>A</a> class href
    [1] => a <a class='searchName' href='javascript:void(0)'>Class</a>  href
    [2] => a class <a class='searchName' href='javascript:void(0)'>Href</a>
) 
```

# hibernate - Struts 出错 - Hibernate 项目部署

> ID：15608223
> 
> 赞同：1
> 
> 时间：2013-03-25T05:26:48.153
> 
> 标签：hibernate, jakarta-ee, struts

在 Struts 和 hibernate 上部署 Web 应用程序构建时出现错误。

我得到的堆栈跟踪是：

```
> org.apache.jasper.JasperException: An exception occurred processing
> JSP page /index.jsp at line 23   20: <body> 21:  22: <h1>Contact
> Manager</h1> 23: <s:actionerror xmlns:s="#unknown" /> 24:  25: <s:form
> action="add" method="post" xmlns:s="#unknown"> 26:    <s:textfield
> name="contact.firstName" label="Firstname" />  
> 
> Stacktrace:
>   org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:524)
>   org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:435)
>   org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)
>   org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)
>   javax.servlet.http.HttpServlet.service(HttpServlet.java:803)  
> 
> root cause    The Struts dispatcher cannot be found.  This is usually
> caused by using Struts tags without the associated filter. Struts tags
> are only usable when the request has passed through its servlet
> filter, which initializes the Struts dispatcher needed for this tag. -
> [unknown location]
>   org.apache.struts2.views.jsp.TagUtils.getStack(TagUtils.java:60)
>   org.apache.struts2.views.jsp.StrutsBodyTagSupport.getStack(StrutsBodyTagSupport.java:44)
>   org.apache.struts2.views.jsp.ComponentTagSupport.doStartTag(ComponentTagSupport.java:48)
>   org.apache.jsp.index_jsp._jspx_meth_s_005factionerror_005f0(index_jsp.java:185)
>   org.apache.jsp.index_jsp._jspService(index_jsp.java:94)
>   org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
>   javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
>   org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:393)
>   org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)
>   org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)
>   javax.servlet.http.HttpServlet.service(HttpServlet.java:803)  
> 
> note The full stack trace of the root cause is available in the Apache
> Tomcat/6.0.13 logs.  
> 
> My web.xml file is :--
> 
> <?xml version="1.0" encoding="UTF-8"?> <web-app version="2.5" 
>   xmlns="http://java.sun.com/xml/ns/javaee" 
>   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
>   xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
>   http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">  
> <welcome-file-list>
>     <welcome-file>index.jsp</welcome-file>   </welcome-file-list>   <filter>      <filter-name>struts2</filter-name>      <filter-class>
>           org.apache.struts2.dispatcher.FilterDispatcher      </filter-class>   </filter>   <filter-mapping>      <filter-name>struts2</filter-name>  
>   <url-pattern>*.action</url-pattern>   </filter-mapping></web-app> 
```

我怎么能提供代码页，因为它在更新同一篇文章时会出错。

# jquery - 用于克隆文本框的 Grails Richui 自动完成功能

> ID：15608225
> 
> 赞同：3
> 
> 时间：2013-03-25T05:26:55.060
> 
> 标签：jquery, grails, autocomplete, grails-plugin, gsp

我`grails richui autocomplete`在我的应用程序中使用字段。它适用于我的静态文本框，但是当我克隆文本框时，此功能不适用于克隆的文本框，甚至没有显示错误。

关于如何解决这个问题的任何想法

这是我的代码：

```
<resource:autoComplete skin="default" /> 
```

在顶部

```
<richui:autoComplete name="filterLocation1" id="filterLocation1" delimChar=";"  class="location_txtbox" action="${createLinkTo('dir': 'abc/yyy')}" style="margin-left:5px;"/> 
```

这是我的自动完成字段

我正在像这样克隆

```
var counter = 1;
$("#addRow").click(function() {
counter++;
var cln = $('#static_table tbody>tr:last').clone(true);
cln.find("[id^='filterLocation']").each(function(i, val) {
    val.id = val.id.match(/^([^0-9]+)[0-9]*$/)[1] + "" + counter;
});

return false;
}); 
```

我克隆整行，做一些隐藏/显示操作并增加 id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T18:31:35.483

当您克隆`tr`它时，它会克隆所有内容，其中包括`javascript`插件创建的内容。这个克隆的脚本使用 的`id`来`text field`制作它`auto complete`。需要更改此文`id`本字段才能使克隆的自动完成功能正常工作。

我使用以下脚本来更改该 ID：

```
<script type="text/javascript">
    var counter = 1;
    function asd() {
        var cloneContent = "<tr>" + $("#firstTrToClone").html().replace(/giveAUniqueId/g, "giveAUniqueId" + counter++) + "</tr>";
        $("#tableId").append(cloneContent);
    }
</script> 
```

**以下是我的完整工作页面：**

```
<!DOCTYPE html>
<html>
<head>
<resource:autoComplete skin="default"/>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
    var counter = 1;
    function asd() {
        var cloneContent = "<tr>" + $("#firstTrToClone").html().replace(/giveAUniqueId/g, "giveAUniqueId" + counter++) + "</tr>";
        $("#tableId").append(cloneContent);
    }
</script>
</head>

<body>
<g:form>
<table id="tableId">
    <tr id="firstTrToClone">
        <td>
            <richui:autoComplete name="name" id="giveAUniqueId" action="${createLinkTo('dir': 'oauthCallBack/test')}"/>
        </td>
    </tr>
</table>
</g:form>

<button onclick="asd()">Clone</button>

</body>
</html> 
```

试试看..，。

# hibernate - 数据库列名称问题中的休眠空间

> ID：15608226
> 
> 赞同：0
> 
> 时间：2013-03-25T05:26:59.940
> 
> 标签：hibernate

我有已经创建的数据库。数据库的列名包含空格、特殊字符，例如：- 人名、“人地址”等。

如何在hibernate-Mapping xml文件中提及这些东西？它会在这样的条件下工作吗？

?? 谢谢，魔术师

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:43:58.130

您可以使用[带引号的标识符](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/mapping.html#mapping-quotedidentifiers)

```
<property name="personName" column="`Person Name`"/> 
```

# python - print() 的 `flush` 有什么作用？

> ID：15608229
> 
> 赞同：50
> 
> 时间：2013-03-25T05:27:08.860
> 
> 标签：python, python-3.x

`print()`该函数有一个布尔可选参数`flush`，默认为 False。

文档说这是强制刷新流。

我不明白冲洗的概念。什么是冲洗这里？什么是流的冲洗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-25T05:30:34.683

通常输出到文件或控制台是缓冲的，至少在您打印换行符之前输出文本。刷新确保缓冲的任何输出都到达目的地。

我确实使用它，例如，当我`Do you want to continue (Y/n):`在获取输入之前发出用户提示时，例如。

这可以模拟（在 Ubuntu 12.4 上使用 Python 2.7）：

```
from __future__ import print_function

import sys
from time import sleep

fp = sys.stdout
print('Do you want to continue (Y/n): ', end='')
# fp.flush()
sleep(5) 
```

如果你运行这个，你会看到提示字符串直到睡眠结束并且程序退出时才会出现。如果用flush取消注释该行，您将看到提示，然后必须等待5秒钟才能完成程序

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-03-25T05:37:45.897

这里有几件事要理解。一是缓冲 I/O 和非缓冲 I/O 之间的区别。这个概念相当简单——对于缓冲 I/O，有一个内部缓冲区被保留。仅当该缓冲区已满（或发生其他事件，例如到达换行符）时，输出才会“刷新”。使用无缓冲 I/O，每当调用输出某些内容时，它都会执行此操作，一次 1 个字符。

大多数 I/O 函数都属于缓冲类别，主要是出于性能原因：一次写入块要快得多（所有 I/O 函数最终都归结为某种描述的系统调用，这很昂贵。）

`flush`允许您手动选择何时写入此内部缓冲区 - 调用 flush 将在缓冲区中写入任何字符。通常，这不是必需的，因为流将自行处理。但是，在某些情况下，您可能希望在继续之前确保输出某些内容 - 这是您需要调用`flush()`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-12-09T06:53:58.633

**我们在这里有两个完美的答案，**

*Anthon*说得很清楚，基本上，在下一行完成之前，从技术上讲，打印线不会运行*（打印） 。*

> 从技术上讲，该行确实运行它只是保持无缓冲，直到下一行完成运行。

`sleep`对于某些在运行函数后使用该函数的人来说，这可能会导致一个错误，他们希望在函数启动`print`之前看到它的打印。`sleep`

*那么我为什么要添加另一个答案？*

**未来已经到来，我想花时间更新你：**

```
from __future__ import print_function 
```

*首先，我认为这是一个内部笑话，意在显示错误：未定义未来^_^*

* * *

我现在正在查看*PyCharm 的*文档，看起来他们在 print 函数本身中添加了一个内置的刷新方法，**看看这个：**

```
def print(self, *args, sep=' ', end='\n', file=None): # known special case of print
"""
print(value, ..., sep=' ', end='\n', file=sys.stdout, flush=False)

Prints the values to a stream, or to sys.stdout by default.
Optional keyword arguments:
file:  a file-like object (stream); defaults to the current sys.stdout.
sep:   string inserted between values, default a space.
end:   string appended after the last value, default a newline.
flush: whether to forcibly flush the stream.
"""
pass 
```

[![在此处输入图像描述](../Images/12de1c8421c65ef91939b8ef1fb05cb2.png)](https://i.stack.imgur.com/LLJTb.png)

* * *

**所以我们也许可以使用：（**不确定参数的使用顺序是否应该相同）

```
from __present__ import print_function

from time import sleep

print('Hello World', flush=True)

sleep(5) 
```

**或这个：**

```
print('Hello World', file=sys.stdout , flush=True) 
```

**正如安东所说：**

> 如果你运行这个，你会看到提示字符串直到睡眠结束并且程序退出时才会出现。如果用flush取消注释该行，您将看到提示，然后必须等待5秒钟才能完成程序

**因此，让我们将其转换为我们当前的情况：**

如果运行此程序，您将看到提示，然后必须等待 5 秒才能完成`flush=False`程序退出。

# android-activity - 服务无法启动

> ID：15608232
> 
> 赞同：0
> 
> 时间：2013-03-25T05:27:39.143
> 
> 标签：android-activity, android-service, android-broadcast

我正在尝试启动一项服务，只要导航活动正在运行，该服务就会在后台运行。问题是服务似乎没有启动。该应用程序没有崩溃，据我所知，它会尝试启动服务，但似乎什么也没发生。有人可以告诉我我做错了什么吗？此外，我正在尝试使用本地广播公司将数据字符串从服务发送到调用活动，我是否正确实现了它？最后，我似乎无法让导航活动执行 run()，最好的方法是什么，所以 run() 被重复调用，直到活动关闭？这是我第一次尝试制作 android 应用程序，所以请用新手术语解释一下 :) 谢谢

FYI MainActivity 启动 Navigation Activity，它启动 Service AugiActivity

主要活动：

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void call_ioio(View v)
{   
    Intent intent = new Intent(this, AugiActivity.class);
    startActivity(intent);
}

public void navigation(View v)
{   
    System.out.println("Got to Mainactivity start Navigation");
    Intent intent = new Intent(this, Navigation.class);
    startActivity(intent);
} 
```

}

导航活动：

```
public class Navigation extends MapActivity implements Runnable, 
SurfaceHolder.Callback{

String LED = null;
String MAG = null;
String BAR = null;
String GYRO = null;
String EULER = null;    
String GGA = null;

private BroadcastReceiver MessageReceiver = new BroadcastReceiver()
{
    @Override
    public void onReceive(Context context, Intent intent)
    {
        LED = intent.getStringExtra("LED");
        MAG = intent.getStringExtra("MAG");
        BAR = intent.getStringExtra("BAR");
        GYRO = intent.getStringExtra("GYRO");
        EULER = intent.getStringExtra("EULER");
        GGA = intent.getStringExtra("GGA"); 
        run();
    }
};

boolean previewing = false;
boolean map_view = true;
boolean cam_view = false;
boolean sen_view = false;

LinearLayout SS;
SurfaceView CC;
MapView MM;

TextView light_voltage_TV;
TextView bar_data_TV;
TextView mag_TV;
TextView gyro_TV;
TextView gyro_rate_TV;
TextView acel_TV;
TextView acel_euler_TV;
TextView gga_TV;
TextView gsa_TV;
TextView gsv_TV;
TextView rmc_TV;
TextView vtg_TV;

// CAMERA VARIABLES
    Camera cam;
    SurfaceView cam_TV;
    SurfaceHolder holder;       

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_navigation);
    MapView mapview = (MapView) findViewById(R.id.mapview);
    mapview.setBuiltInZoomControls(true);   

    getWindow().setFormat(PixelFormat.UNKNOWN);

    cam_TV = (SurfaceView) findViewById(R.id.CAMERA_View);
    holder = cam_TV.getHolder();
    holder.addCallback((Callback) this);
    holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

    LocalBroadcastManager.getInstance(this).registerReceiver(MessageReceiver, 
            new IntentFilter("IOIOData"));

    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

            // Lots of linking view variables to xml views here

    System.out.println("Got to Navigation OnCreate");
    startService(new Intent(this, AugiActivity.class));     
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_navigation, menu);
    return true;
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
    // TODO Auto-generated method stub

}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    // TODO Auto-generated method stub

}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    // TODO Auto-generated method stub

}

public void sensorLayer(View v)
{
    // set view visable/invisible
}

public void mapLayer(View v)
{
    //set view visable/invisible
}

public void cameraLayer(View v)
{
    //set view visable/invisible
}   

@Override
public void run() {
    System.out.println("Got to Navigation RUN");

    //update text views with string data
}
} 
```

活动：

```
public class AugiActivity extends Service { 

public Activity activity_name;

class IOIO extends IOIOActivity {   

// Various unrelated global variables

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState); 
    activity_name = this.getParent();
    System.out.println("Got to AugiActivity OnCreate");
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.        
    return true;
}

class Looper extends BaseIOIOLooper {

    public Activity activity_name;

    Looper(Activity x)
    {
        this.activity_name = x;
    }       

    // Communication variables

    /**
    * Called every time a connection with IOIO has been established.
    * Typically used to open pins.
    *   
    * @throws ConnectionLostException
    *             When IOIO connection is lost.
     * @throws InterruptedException 
    * 
    * @see ioio.lib.util.AbstractIOIOActivity.IOIOThread#setup()
    */
        @Override
        protected void setup() throws ConnectionLostException, 
InterruptedException 
        {
            // OPEN LIGHT SENSOR PINS

            // ESTABLISH I2C CONNECTION

            // ESTABLISH UART CONNECTION                

            bar_calibration();      
            mag_setup();
            imu_setup();    
            try {
                gps_setup();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        // BAROMETER CALIBRATION METHOD
        private void bar_calibration()
        {
            // do setup
        }

        // MAGNETOETER SETUP METHOD
        private void mag_setup()
        {
            // do setup
        }

        // IMU SETUP METHOD
        private void imu_setup()
        {
            // do setup
        }

        private void gps_setup() throws IOException, InterruptedException
        {               
            // do setup     
        }

    /**
    * Called repetitively while the IOIO is connected.
    * 
    * @throws ConnectionLostException
    *             When IOIO connection is lost.
     * @throws InterruptedException 
    * 
    * @see ioio.lib.util.AbstractIOIOActivity.IOIOThread#loop()
    */

    @Override
        public void loop() throws ConnectionLostException, 
InterruptedException 
        {           
            get_light();

            get_temp();

            get_pressure();

            get_north();

            get_imu();

            System.out.println("Got to AugiActivity LOOP");
            try {
                get_gps();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            led_.write(true);   

            sendMessage();
        }

        private void get_light()
        {
            // get data
        }

        private void get_temp()
        {
            // get data
        }

        private void get_pressure()
        {
            // get data
        }

        private void get_north()
        {
            // get data
        }

        private void get_imu()
        {
            // get data
        }

        private void get_gps() throws IOException, InterruptedException
        {   
            // get data 
            }

        private void sendMessage()
        {
            Intent intent = new Intent("IOIOData");     

            intent.putExtra("LED", get_LED());

LocalBroadcastManager.getInstance(activity_name).sendBroadcast(intent);

            intent.putExtra("MAG", get_MAG());

LocalBroadcastManager.getInstance(activity_name).sendBroadcast(intent);

            intent.putExtra("BAR", get_BAR());

LocalBroadcastManager.getInstance(activity_name).sendBroadcast(intent);

            intent.putExtra("GYRO", get_GYRO());

LocalBroadcastManager.getInstance(activity_name).sendBroadcast(intent);

            intent.putExtra("EULER", get_EULER());

LocalBroadcastManager.getInstance(activity_name).sendBroadcast(intent);

            intent.putExtra("GGA", gps_GGA);

LocalBroadcastManager.getInstance(activity_name).sendBroadcast(intent);
        }
    }
    /**
    * A method to create our IOIO thread.
    * 
    * @see ioio.lib.util.AbstractIOIOActivity#createIOIOThread()
    */
    @Override
    protected IOIOLooper createIOIOLooper() {
        return new Looper(activity_name);
    }       

    public String get_LED()
    {
        // code here            
    }

    public String get_MAG()
    {
        // code here
    }

    public String get_BAR()
    {
        // code here            
    }

    public String get_GYRO()
    {
        // code here            
    }

    public String get_EULER()
    {
        // code here            
    }

    public String get_GPS()
    {
        // code here            
    }

}

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return this.onBind(intent);
}   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:05:08.510

我不是专家，但在这里你有一个服务中的活动。你打电话`startService()`的`Intent`时候`AugiActivity`是一个服务（很难用这种名字来关注你）。

我看到的问题是您甚至没有实现服务的`onCreate()`,`onStartCommand()`和`onDestroy()`方法。在这种方法中，您可以管理您在此处拥有的嵌套对象的生命周期。

无论如何，我相信在 Service 中有一个 Activity 并不是很干净。你的目的到底是什么？为什么你有一个嵌套的活动？您似乎没有任何布局（也许我错过了它，但有很多代码！:D），那么为什么不只留在服务本身，而不是在嵌套类中执行所有操作呢？

如果您想要一个与后台服务通信的用户界面，那么您可以使用绑定到服务的活动（但创建 2 个不同的类：一个用于服务，一个用于具有接口的活动）。查看 Android 开发者指南中的[绑定服务](http://developer.android.com/guide/components/bound-services.html)。

# python - Eclipse 和 Google App Engine：ImportError：没有名为 _sysconfigdata_nd 的模块；无法识别的参数：--high_replication

> ID：15608236
> 
> 赞同：46
> 
> 时间：2013-03-25T05:27:54.410
> 
> 标签：python, eclipse, google-app-engine

刚刚升级到 Ubuntu 13.04 并且 Eclipse 抱怨以下 2 个错误：

```
1\. ImportError: No module named _sysconfigdata_nd

ERROR    2013-03-25 07:26:43,559 http_runtime.py:221] unexpected port response from runtime ['']; exiting the development server
ERROR    2013-03-25 07:26:43,561 server.py:576] Request to '/_ah/warmup' failed

2\. dev_appserver.py: error: unrecognized arguments: --high_replication 
```

我从来没有遇到过第一个。其次，我曾经通过设置参数来运行谷歌应用引擎应用程序`--high_replication`，它运行良好。为什么突然，这两个不起作用？提前致谢。

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2013-04-25T20:49:16.433

“没有名为 _sysconfigdata_nd 的模块”是[Ubuntu 软件包中的一个错误](https://bugs.launchpad.net/ubuntu/+source/python2.7/+bug/1115466)。

您可以创建软链接作为解决方法：

```
sudo ln -s /usr/lib/python2.7/plat-*/_sysconfigdata_nd.py /usr/lib/python2.7/ 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-01-08T09:00:40.230

根据不同的情况，更新`virtualenv`实际上可能是一个更好的主意，而不是[这个解决方法](https://stackoverflow.com/a/16224441/548696)，如[链接的错误报告](https://bugs.launchpad.net/ubuntu/+source/python2.7/+bug/1115466)中所述。要更新`virtualenv`，您可以使用以下命令：

```
sudo pip install --upgrade virtualenv 
```

# python - Soundcloud API：按国家/地区查询用户

> ID：15608237
> 
> 赞同：0
> 
> 时间：2013-03-25T05:28:07.703
> 
> 标签：python, soundcloud

我正在使用 python 包装器并尝试查找来自特定国家/地区的用户。我相信以下代码行应该返回来自波兰的用户，但相反，我得到了许多其他国家/地区的用户或“无”作为国家/地区的用户。我通过打印 user.country 检查用户国家

```
users = client.get('/users', country='Poland'); 
```

以下是我一直在使用的资源：

[http://developers.soundcloud.com/docs#search](http://developers.soundcloud.com/docs#search) [http://developers.soundcloud.com/docs/api/reference#users](http://developers.soundcloud.com/docs/api/reference#users)

如果有人可以在这里帮助我，我将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:59:47.807

I figured out what the problem was. Country is not a field that can be filtered. For users only q='' is supported. For the time being it seems the only way to get this data is through a manual search [http://soundcloud.com/people/search?q%5Bcountry_code%5D=](http://soundcloud.com/people/search?q%5Bcountry_code%5D=) where the country_code is the 2 letter identifier for a country.

# c# - C# - 在活动目录中查找用户管理器

> ID：15608241
> 
> 赞同：6
> 
> 时间：2013-03-25T05:28:43.317
> 
> 标签：c#, active-directory

开始使用`System.DirectoryServices.AccountManagement`命名空间，对活动目录 (AD) 中的用户执行查找。**我还需要用户的 manager**，但我似乎在使用这个命名空间时遇到了麻烦。当前获取人的代码：

```
class Person {
    // Fields
    public string GivenName = null;
    public string Surname = null;
    public string DistinguishedName = null;
    public string Email = null;
    public string MangerDistinguishedName = null;  // Unable to set this

    // Constructor
    public Person(string userName) {
        UserPrincipal user = null;

        try {
            user = GetUser(userName);

            if (user != null) {
                this.GivenName = user.GivenName;
                this.Surname = user.Surname;
                this.DistinguishedName = user.DistinguishedName;
                this.Email = user.EmailAddress;
                this.MangerDistinguishedName = user.<NO SUCH PROPERTY TO FIND A MANAGER'S DISTINGUISHED NAME>
            }
            else {
                throw new MissingPersonException("Person not found");
            }
        }
        catch (MissingPersonException ex) {
            MessageBox.Show(
                ex.Message
                , ex.reason
                , MessageBoxButtons.OK
                , MessageBoxIcon.Error
            );
        }
        catch (Exception ex) {
            MessageBox.Show(
                ex.Message
                , "Error: Possible connection failure, or permissions failure to search for the username provided."
                , MessageBoxButtons.OK
                , MessageBoxIcon.Error
            );
        }
        finally {
            user.Dispose();
        }
    } 
```

执行人员搜索

```
 private UserPrincipal GetUser(string userName) {
        PrincipalContext ctx = new PrincipalContext(ContextType.Domain);
        UserPrincipal user = UserPrincipal.FindByIdentity(ctx, userName);

        return user;
    } 
```

**直接访问特定用户的经理的专有名称的另一种方法是什么？**

*   [在](https://stackoverflow.com/questions/9498908/looping-through-active-directory-to-get-managers-and-direct-reports)VB 中可能有部分答案，但我看不到关于提及经理的任何内容。
*   另一个可能的部分[在这里](https://stackoverflow.com/questions/1546871/system-directoryservices-vs-system-directoryservices-accountmanagement)，再次，与经理无关。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T05:52:57.697

如果您使用 .NET 3.5 及更高版本并使用`System.DirectoryServices.AccountManagement`(S.DS.AM) 命名空间，则可以轻松扩展现有`UserPrincipal`类以获得更高级的属性，例如`Manager`等。

在这里阅读所有相关信息：

*   [在 .NET Framework 3.5 中管理目录安全主体](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)
*   [System.DirectoryServices.AccountManagement 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)

基本上，您只需定义一个基于 的派生类`UserPrincipal`，然后定义您想要的附加属性：

```
[DirectoryRdnPrefix("CN")]
[DirectoryObjectClass("Person")]
public class UserPrincipalEx : UserPrincipal
{
    // Inplement the constructor using the base class constructor. 
    public UserPrincipalEx(PrincipalContext context) : base(context)
    { }

    // Implement the constructor with initialization parameters.    
    public UserPrincipalEx(PrincipalContext context,
                         string samAccountName,
                         string password,
                         bool enabled) : base(context, samAccountName, password, enabled)
    {} 

    // Create the "Department" property.    
    [DirectoryProperty("department")]
    public string Department
    {
        get
        {
            if (ExtensionGet("department").Length != 1)
                return string.Empty;

            return (string)ExtensionGet("department")[0];
        }
        set { ExtensionSet("department", value); }
    }

    // Create the "Manager" property.    
    [DirectoryProperty("manager")]
    public string Manager
    {
        get
        {
            if (ExtensionGet("manager").Length != 1)
                return string.Empty;

            return (string)ExtensionGet("manager")[0];
        }
        set { ExtensionSet("manager", value); }
    }

    // Implement the overloaded search method FindByIdentity.
    public static new UserPrincipalEx FindByIdentity(PrincipalContext context, string identityValue)
    {
        return (UserPrincipalEx)FindByIdentityWithType(context, typeof(UserPrincipalEx), identityValue);
    }

    // Implement the overloaded search method FindByIdentity. 
    public static new UserPrincipalEx FindByIdentity(PrincipalContext context, IdentityType identityType, string identityValue)
    {
        return (UserPrincipalEx)FindByIdentityWithType(context, typeof(UserPrincipalEx), identityType, identityValue);
    }
} 
```

现在，您可以在代码中使用“扩展”版本`UserPrincipalEx`：

```
using (PrincipalContext ctx = new PrincipalContext(ContextType.Domain))
{
    // Search the directory for the new object. 
    UserPrincipalEx inetPerson = UserPrincipalEx.FindByIdentity(ctx, IdentityType.SamAccountName, "someuser");

    // you can easily access the Manager or Department now
    string department = inetPerson.Department;
    string manager = inetPerson.Manager;
} 
```

# windows-phone-8 - Windows Phone 8 Windows 运行时组件显示消息

> ID：15608249
> 
> 赞同：1
> 
> 时间：2013-03-25T05:29:16.637
> 
> 标签：windows-phone-8

如何在 WindowsPhone 8 c++ 运行时组件中显示消息对话框？

还有有没有办法让调度员。

# asp.net-mvc - 监控服务器请求

> ID：15608253
> 
> 赞同：1
> 
> 时间：2013-03-25T05:29:48.617
> 
> 标签：asp.net-mvc, asp.net-mvc-3, glimpse

我有一个 ASP.NET MVC3 Web 应用程序。为了从第三方获取数据，我的应用程序从服务器发出了几个 HTTP 请求。我想查看每个页面加载时从服务器向第三方发出的所有 http 请求。我已经从 nu-get 包安装了一瞥。但我看不到从服务器发出的任何远程 HTTP 调用。我正在本地机器上调试我的应用程序。是否可以使用 glimpse 获取此信息？如果没有，还有其他工具可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:10:52.700

不幸的是，Glimpse 目前不显示您的应用程序发出的 HTTP 请求 - 但这听起来是一个很棒的功能！

你确实有几个选择：

1.  [使用 Glimpse 的可扩展性模型创建自定义选项卡](https://github.com/Glimpse/Glimpse/wiki/Extending)。您可以利用您正在使用的任何 HTTP 客户端并公开数据。
2.  此外，您可以利用[Glimpse 的跟踪选项卡](http://getglimpse.com/Help/Trace-Tab)来跟踪有关您的 HTTP 请求的消息。
3.  最后，您可以使用[ANTS Performance Profiler](https://www.red-gate.com/products/dotnet-development/ants-performance-profiler/features/key-features)，它最近添加了一项功能，可以查看应用程序发出的所有 HTTP 请求，以及 CPU 级别的计时信息和 SQL 查询。（[而且它有免费试用](https://www.red-gate.com/dynamic/products/dotnet-development/ants-performance-profiler/download)！）

# php - Javascript原型是否类似于PHP静态方法？

> ID：15608255
> 
> 赞同：1
> 
> 时间：2013-03-25T05:30:07.007
> 
> 标签：php, javascript

我正在学习一些 Javascript，但我有一个问题`prototype`

**在这种情况下，原型是否类似于 PHP 静态方法，因为所有实例都共享它？**

Javascript

```
var Person = function(){
   this.name = "Test Person";
}

Person.prototype.work = function(){
   return this.name + "is working";
} 
```

PHP

```
class Person($personName){

   public static working(){
      return $personName . "is working";
   }
}

$person1 = new Person("Joe").working();
$person2 = new Person("Mike").wokring(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T05:33:56.100

不是真的，不。我建议阅读[Doug Crockford 关于原型继承的文章，](http://javascript.crockford.com/prototypal.html)以了解`x.prototype`Javascript 中的含义，以及它如何与更“经典”的继承相关联。维基百科也有[一个条目](http://en.wikipedia.org/wiki/Prototype-based_programming)可以帮助你理解这个概念。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T05:50:46.940

技术答案是否定的。原型函数的底层实现与类 C 语言中静态方法的实现不同。

...但是，在实践中，您可以认为它们的一般用法类似于`public-static`方法。
与公共静态成员相比，原型属性更相似。

它们的调用方式不同，但是位于“类”/构造函数上的方法或属性的概念，每个实例都可以访问，并且将这些值修改为共享值，影响所有其他实例非常，很像一个`public static`。

但是，还有其他一些事情需要记住，这将与您认为的功能一致`public static`，具体取决于您使用的语言......

当然，最重要的是，就原型函数而言，它们绝对***无法访问任何不可公开访问的私有/实例特定状态***。
因此，如果您习惯于处理`public static`可能能够调用私有方法或使用特定于实例的变量（不是公共成员）的函数，那么您将 120% 不走运。

要考虑的第二件事是，您还可以通过闭包创建等效的公共和私有静态成员/方法。

```
var Class = (function () {
    var private_static_method = function () {},
        public_static_method  = function () {},
        private_static_property = 1,
        public_static_property = 2,

        class_constructor = function (a, b) {
            var private_method = function () {},
                public_method  = function () {},
                public_property  = a,
                private_property = b,

                public_interface = {
                    method   : public_method,
                    property : public_property
                };

            return public_interface;
        };

    class_constructor.method   = public_static_method;
    class_constructor.property = public_static_property;
    return class_constructor;
}()); 
```

现在，通过闭包，我得到了每个私有实例都可以访问的“私有静态”函数和属性。
我有公共静态方法，我已将其作为构造函数的方法附加。
然后我得到了不使用的构造函数`new`，只是创建了一个新对象（`public_interface`），它可以附加你想要的任何东西。
由于闭包，实例的任何公共方法都可以访问该实例的任何私有方法/变量。

这些都与传统课程无关。
但从纯粹基于闭包的角度来看，这就是您可以重新创建所有这些访问类型的方法，而不会让自己发疯，试图将类硬塞到 JS 中。

# wordpress - wordpress 用户注册/个人资料插件

> ID：15608260
> 
> 赞同：0
> 
> 时间：2013-03-25T05:30:30.893
> 
> 标签：wordpress

我正在尝试制作一个 wordpress 网站，该网站将允许用户自行注册并登录该网站并拥有个人资料。是否有这样的插件可以让我将其合并到我的网站中？我环顾四周，由于我对制作网站/wordpress 的经验很少，所以我决定请教一些专家。

我知道使用 wordpress 你会得到一个“博客”之类的网站，但我希望如果我正在寻找的插件存在，那么我可以让我的网站看起来不同。我要求每个成员拥有自己的“个人资料页面/私人页面”的原因是因为我希望能够将数据上传到他们的特定页面，并且他们应该能够在不看到其他人的情况下看到数据。

感谢您为我提供的所有帮助。如果我找不到合适的解决方案，我会尝试用 joomla 建立一个网站，我曾经使用过 wordpress，因为我听说它更容易使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-08T11:31:05.257

是的，有一个插件可以在 wordpress 中完成所有这些工作。插件名称：**Profile Builder - 前端用户注册、登录和编辑配置文件**

插件链接：[http ://wordpress.org/plugins/profile-builder/](http://wordpress.org/plugins/profile-builder/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T05:39:08.223

是的，有一个插件可以处理你想要的所有事情。**插件名称：** “*主题我的登录*”

***插件特点：***

*   您的注册、登录和密码恢复页面都将与您网站的其余部分相匹配

*   包括一个可自定义的小部件，可从您的博客的任何位置登录

*   根据用户的角色在登录和注销时重定向用户

*   向已登录的用户显示 gravatar。

*   根据角色为登录的用户分配自定义链接

*   自定义用于注册和/或密码恢复的用户电子邮件

*   以 HTML 格式发送用户电子邮件

*   允许用户在注册时设置自己的密码

*   要求用户在注册时获得批准或确认电子邮件地址

*   主题用户配置文件

***请参考以下位置：***

[主题我的登录](http://wordpress.org/extend/plugins/theme-my-login/)

# c# - C# 中的无效列名

> ID：15608261
> 
> 赞同：-1
> 
> 时间：2013-03-25T05:30:32.643
> 
> 标签：c#

我正在使用以下查询来更新 SQL C# 中的记录。

但我收到错误：

> 无效的列名 P1

其中`P1`是字符串数据类型的参数，要更新谁的记录。

```
string SQl_Update="update dbo.tb_patient set name =patientname ,age= patientcontact where id=P1"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:32:16.880

检查列`name`。

此列在数据库中必须不同，否则此列可能不存在于数据库中。

请检查更新查询中的表字段名称和字段。

如果您尝试使用参数化查询，请将 @ 放在参数之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:32:26.873

如果这三个值是参数，则应使用`@`,

```
string SQl_Update = @"UPDATE dbo.tb_patient 
                      SET    name = @patientname,
                             age = @patientcontact 
                      WHERE  id = @P1"; 
```

并在您的命令对象中，设置每个参数的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T05:36:56.990

`P1`用单引号 ( )`'`括起来。

# java - 可编辑的 Jcombobox 不从数据库中填充数据

> ID：15608266
> 
> 赞同：0
> 
> 时间：2013-03-25T05:31:01.467
> 
> 标签：java, swing, jcombobox, comboboxmodel

在我的 Java swing 应用程序中，我希望 Jcombobox 从数据库中填充一些数据，并允许用户输入他们希望的关键字，以便使用组合框值进行搜索。所以我将可编辑模式设置为 true。但后来我丢失了来自数据库的数据。是否可以启用可编辑模式 true 并同时使用数据库中的数据填充 Jcomobobox？

```
 private void cmbPvtTrnsCompanySeacrhFocusGained(java.awt.event.FocusEvent evt) {                                                    
          try {  
              ArrayList<String> transList = PvtTransDriverController.getPvtTransporterNames();
              ComboBoxModel comboBoxModel = new DefaultComboBoxModel(transList.toArray());
              cmbPvtTrnsCompanySeacrh.setModel(comboBoxModel);

        } catch (ClassNotFoundException ex) {
              Logger.getLogger(PvtTransDriver.class.getName()).log(Level.SEVERE, null, ex);
        } catch (SQLException ex) {
              Logger.getLogger(PvtTransDriver.class.getName()).log(Level.SEVERE, null, ex);
        }
  } 
```

初始化代码`cmbPvtTrnsCompanySeacrh`

```
cmbPvtTrnsCompanySeacrh.setEditable(true);
        cmbPvtTrnsCompanySeacrh.addFocusListener(new java.awt.event.FocusAdapter() {
              public void focusGained(java.awt.event.FocusEvent evt) {
                    cmbPvtTrnsCompanySeacrhFocusGained(evt);
              }
        });

        javax.swing.GroupLayout jPanel23Layout = new javax.swing.GroupLayout(jPanel23);
        jPanel23.setLayout(jPanel23Layout);
        jPanel23Layout.setHorizontalGroup(
              jPanel23Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
              .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel23Layout.createSequentialGroup()
                    .addContainerGap()
                    .addComponent(cmbPvtTrnsCompanySeacrh, 0, 266, Short.MAX_VALUE)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addComponent(btnSearch, javax.swing.GroupLayout.PREFERRED_SIZE, 84, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addContainerGap())
        ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T05:37:00.223

您可以编写如下代码：

```
ArrayList<String> transList = PvtTransDriverController.getPvtTransporterNames();
ComboBoxModel comboBoxModel = new DefaultComboBoxModel(transList.toArray());
cmbPvtTrnsCompanySeacrh.setModel(comboBoxModel ); 
```

# mysql - 使用聚合或映射减少在 mongodb 中获取每天的计数

> ID：15608267
> 
> 赞同：1
> 
> 时间：2013-03-25T05:31:13.317
> 
> 标签：mysql, mongodb

如何将以下 mysql 查询转换为 mongodb 查询： `SELECT count(*) as count , DATE_FORMAT( timestamp, '%d-%c-%Y' ) as day, timestamp as tm FROM visits WHERE 1 GROUP BY day ORDER BY tm`。我想在 nodejs 上使用它，所以我使用的是本机 mongodb。

获取 mongodb 中每天的页面浏览量，其中每个页面浏览量与时间戳一起存储。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T09:48:10.387

您的问题缺乏您的任何努力，我们很少只是“给”人们这样的答案，但是，这一次：

**注意**：您还不能操纵日期以将它们转换为不同的格式，而无需自己进行一些手动工作来挑选零件并重新加入它们。因此，我省略了您所做的日期格式，只是将其用作对象。

```
db.visits.aggregate([
    {
        $project: {
            date: {day: {$dayOfMonth: '$timestamp'}, month: {$month: '$timestamp'}, year: {$year: '$timestamp'}},
            //day: {concat: [date.day,date.mont,date.year]}
        }
    },
    {$group: {_id: '$date', tm: '$timestamp', count: {$sum:1}}}
]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:17:18.800

我找到了一个使用 mapreduce 的工作 mongodb 查询，它给了我作为 unix 时间的输出时间，而不是我在问题中提到的格式。但这是正确排序时间的查询。我曾尝试过 mongo group 查询，但它没有按时间排序。工作的mongo查询是：

```
db.visits.mapReduce(
function(){
  day = Date.UTC(this.timestamp.getFullYear(), this.timestamp.getMonth(), this.timestamp.getDate());

  emit({day: day}, {count: 1});
}, 
function(key, values) {
  var count = 0;

  values.forEach(function(v) {
    count += v['count'];
  });

  return {count: count};
},
             {
              out : {inline:1},
              sort:{_id:1}
             }
); 
```

# git - 可视化项目增长的工具

> ID：15608268
> 
> 赞同：2
> 
> 时间：2013-03-25T05:31:30.700
> 
> 标签：git, svn, version-control, visualization

我有几个在 Git 和 SVN 中的项目，我想可视化随着时间的推移而增长。也许不仅仅是代码行，还有谁提交了什么（删除和插入会很棒）。

是否有任何现成的工具可以让我做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T05:37:21.920

[Gource](http://gource.io/)可以可视化 Git、Mercurial 和 SVN 存储库的开发过程。

# spring - Spring Data + Mongodb + 查询单值？

> ID：15608270
> 
> 赞同：5
> 
> 时间：2013-03-25T05:31:39.343
> 
> 标签：spring, mongodb

如何查询一个字段而不是整个对象？我正在尝试做类似的事情，想看看这可能吗？

```
public BigInteger findUserIDWithRegisteredEmail(String email){

    Query query = Query.query(Criteria.where("primaryEmail").is (email));    
    query.fields().include("_id");

    return (BigInteger) mongoTemplate.find(query, BigInteger.class);    
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T07:43:14.230

在方法

```
find(Query query, Class<YourCollection> entityClass) 
```

**entityClass**应该是对应的集合，而不是id的类型。

如果您只是想获得 id 使用

```
Query query = Query.query(Criteria.where("primaryEmail").is (email));    
query.fields().include("_id");
mongoTemplate.find(query, <YourCollection>.class).getId(); 
```

如果只包含 _id，则结果中的所有其他字段都将为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-15T08:50:48.557

如果您想避免序列化，这是您可以处理它的一种方法：-

```
final List<String> ids = new ArrayList<String>();
mongoTemplate.executeQuery(query, "collectionName", new DocumentCallbackHandler() {
    @Override
    public void processDocument(DBObject dbObject) throws MongoException, DataAccessException {
        ids.add(dbObject.get("_id").toString());
    }
}); 
```

# c# - 这个令人困惑的表达式“a == b ? value1 : value2”是什么？

> ID：15608271
> 
> 赞同：1
> 
> 时间：2013-03-25T05:31:43.570
> 
> 标签：c#, silverlight

我是学习 C# 和 Silverlight 的新手，我的雇主已经给了我一些申请文件来开始学习。我能够理解 C# 中使用的大部分逻辑、方法和语法，但有一句话让我非常困惑。我现在无法联系我的前辈来问他们所以背后的逻辑所以我想我会在这里问。

看看这个：

在 .xaml.cs 文件中：

```
List<object> lst = new List<object>();
lst.Add(GP.mpl.A);
lst.Add(GP.mpl.B);
lst.Add(GP.mpl.C);
lst.Add(GP.mpl.StnNo); 
```

在不同的 .cs 文件中：

```
public int StnNo = Convert.ToInt32(lst[3].ToString() == string.Empty ? 0 : Convert.ToInt32(lst[3].ToString())); 
```

我了解从 lst[3] 接收 StnNo 并通过

```
Convert.ToInt32(lst[3].ToString() 
```

但我不明白这部分：

```
== string.Empty ? 0 : Convert.ToInt32(lst[3].ToString()) 
```

你能告诉我那里发生了什么吗？我在谷歌上进行了多次搜索，但没有找到任何相关内容。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T05:34:40.773

这是*条件*运算符，有时称为*三元*运算符。

它采用*布尔表达式的形式？真值：假值。*

在 C# 中，真值和假值必须属于同一类型，或者一个必须隐式转换为另一个（但不能同时转换）。否则，您必须合法且明确地将一个或两个强制转换为通用类型。

在您的代码中，您有

```
int StnNo = Convert.ToInt32(lst[3].ToString() == string.Empty ? 0 : Convert.ToInt32(lst[3].ToString())); 
```

它产生的功能等价物

```
int temp;
if (lst[3].ToString() == string.Empty)
    temp= 0;
else 
    temp = Convert.ToInt32(lst[3].ToString());

int StnNo = Convert.ToInt32(temp); 
```

您可以看到`Convert.ToInt32`代码中的外部实际上是多余的，可以消除。

```
int StnNo = lst[3].ToString() == string.Empty ? 0 : Convert.ToInt32(lst[3].ToString()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T05:34:55.570

`?`是三元运算符。

```
condition ? first_expression : second_expression; 
```

*   [?: 运算符（C# 参考）](http://msdn.microsoft.com/en-us/library/ty67wk28%28v=vs.80%29.aspx)

所以在你的例子中，

```
public int StnNo = Convert.ToInt32(lst[3].ToString() == string.Empty ? 0 : Convert.ToInt32(lst[3].ToString())); 
```

等于

```
public int StnNo;
if (lst[3].ToString() == string.Empty)
{
    StnNo = 0;
}
else
{
    StnNo = Convert.ToInt32(lst[3].ToString());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T05:34:57.343

这是一种写得很糟糕的说法“如果`lst[3]`为空，则使用`0`，否则解析`lst[3]`” - 因为正如您的问题所说明的那样，很难说出原始开发人员的确切意图。

为了更清楚，让我们剖析一下。

*   `lst[3].ToString() == string.Empty`表示“`lst[3]`计算结果是否为空字符串？”
*   `? X : Y`意思是“如果是，`X`，否则`Y`。
    *   `0`一个常数值
    *   `Convert.ToInt32(lst[3].ToString())`将值解析为`lst[3]`整数。
*   最后整个表达式被传递给另一个`Convert.ToInt32`，但这完全没有必要，因为条件表达式的结果总是一个`int`。

由于您不必调用`Convert.ToInt32`两次，因此编写此代码的更好方法是：

```
public int StnNo = 
    (lst[3].ToString() == string.Empty 
    ? 0 
    : Convert.ToInt32(lst[3].ToString())); 
```

一个更好的写法是：

```
int StnNo; 
int.TryParse(lst[3], out StnNo); 
```

它的代码行数更多，但更容易阅读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T05:36:43.970

`== string.Empty ? 0 : Convert.ToInt32(lst[3].ToString())`是检查如果`lst[3]`不包含任何值，则将 0 分配给`StnNo`。

# batch-file - 如何在不打开 shell 窗口的情况下运行多个批处理文件？

> ID：15608272
> 
> 赞同：1
> 
> 时间：2013-03-25T05:31:49.960
> 
> 标签：batch-file

我有一些`.bat`文件，`start xxx`我需要在另一个文件中运行它们

所以如果在`start xxx.bat`那里，我将运行 xxx 和命令行 shell。我不需要另一个 shell 那么如何在不打开另一个 shell 的情况下运行批处理文件？或在执行后关闭它的外壳。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:34:16.490

如果我理解正确，您只想使用`call`而不是`start`.

例子：

```
call xxx.bat 
```

# python - 如何调整用 Pandas 创建的条形图的底部

> ID：15608279
> 
> 赞同：3
> 
> 时间：2013-03-25T05:32:39.597
> 
> 标签：python, python-2.7, matplotlib, pandas, bar-chart

我创建了一个条形图使用

grouped.plot(kind='bar')

Pandas 中的方法。然而，垂直 x 标签被切断。当我尝试通过说来更改底部变量时

grouped.plot(kind='bar',bottom=0.2)

我收到一条错误消息：

TypeError: bar() 为关键字参数“底部”获取了多个值

所以该方法是发送它自己的底部值，我不知道如何替换它。

我可以避免它并直接使用 pyplot bar() 方法，但这意味着直接指定 left 和 height 变量以及我正在使用的 groupby 对象，这将变得相当棘手，所以我真的希望不要那样做。有没有办法可以通过 Pandas 的 .plot(kind='bar') 方法传递不同的底部变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T22:08:36.883

一种选择是在使用以下调用绘图后调整底部边距。

```
plt.subplots_adjust(bottom=.3) 
```

# hadoop - 如何为 CDH4 ( 4.2.0 ) 构建 eclipse-plugin

> ID：15608280
> 
> 赞同：2
> 
> 时间：2013-03-25T05:32:51.657
> 
> 标签：hadoop, cloudera, hadoop-plugins

有谁知道如何为 CDH4 ( 4.2.0 ) 构建 eclipse-plugin ？我google了一个早上，只发现了一些关于4.1.2或更早版本的提示。

我的hadoop集群是Cloudera Management搭建的，CDH最新版本是4.2.0，不知道eclipse-plugin怎么搭建，还是把CDH版本回滚到4.1.2？如果是这样，该怎么做？

# html - 停止所有音频实例，甚至是隐藏的

> ID：15608281
> 
> 赞同：1
> 
> 时间：2013-03-25T05:33:03.050
> 
> 标签：html, dom, audio, time

如何停止（并将当前时间重置为 0）整个 DOM 上的所有音频实例，甚至是隐藏的？我无法使用此代码停止当前正在播放的音频。

```
$('.link').on('click', function(e){
    $('.pagecontainer>div').fadeOut();
    $(this.getAttribute("href")).fadeIn();  
    stopAudio();
});

function stopAudio() { //fade out and stop any current audio
    $('audio').animate({volume: 0}, 1000);
    setTimeout(function(){
        $.each($('audio'), function () {
            this.currentTime=0;
            this.pause();
        });
    },1000)
}

$('.sound').on('play', function () { //since volume was faded out, reset volume when click play button
    $('audio').animate({volume: 1}, 100);
});

....
....

<a href="#page1" class="link">Audio 1</a>
<a href="#page2" class="link">Audio 2</a>
<a href="#page3" class="link">Audio 3</a>

<div class="pagecontainer">

    <div id="page1"> //all three audio elements are in exact same spot
                     //clicking page link fades in current audio and fades in new one
        <audio controls loop class="sound">
            <source src="../../site/music/music1.mp3"/>
            <source src="../../site/music/music1.ogg"/>
        </audio>
    </div>

    <div id="page2">
        <audio controls loop class="sound">
            <source src="../../site/music/music2.mp3"/>
            <source src="../../site/music/music2.ogg"/>
        </audio>
    </div>

    <div id="page3">
        <audio controls loop class="sound">
            <source src="../../site/music/music3.mp3"/>
            <source src="../../site/music/music3.ogg"/>
        </audio>
    </div>

</div> 
```

当我单击另一个页面的链接时，我需要停止并重置所有三个音频元素。目前由于它没有停止，当我点击淡入音频元素的播放按钮时，我听到两个音频同时播放。虽然有趣的是，音频确实会淡出。

请注意，所有三个音频元素都位于完全相同的位置，这是预期的。

# javascript - JS中的修剪数组

> ID：15608284
> 
> 赞同：4
> 
> 时间：2013-03-25T05:33:10.210
> 
> 标签：javascript, jquery, arrays

我有一个数组说

```
['(','C','1','2',')'] 
```

现在我想从数组中修剪数据`indexOf('C') + 2`，如果它是一个数字，我需要从数组中删除它。所以对于上面的例子，最终数组必须是

```
 ['(','C','1',')'] 
```

例如，如果我`['(','C','1','2','3','*',')']`希望将其修剪为`['(','C','1','*',')']`，则在元素“C”之后只允许使用一个数字。

我知道我可以通过获取 indexOf('C') 来遍历数组，然后检查每个元素的数字..但是帮助我用一些有效和更好的方法。比如使用拼接什么的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T06:19:02.457

如果您要“修剪”的位置已知，则可以`filter`在此处使用，例如：

```
var a = ['(','C','1','2','3','*',')']
        .filter( function(a){
                   this.x += 1; 
                   return this.x<=2 ? a : isNaN(+a);}, {x:-1} 
         ); 
```

这可能导致此`Array`扩展：

```
Array.prototype.trimNumbersFrom = function(n){ 
    return this.filter( function(a){
                         this.x += 1; 
                         return this.x<=n ? a : isNaN(+a);
                        }, {x:-1} 
           );
};
//=> usage
var a = ['(','C','1','2','3','*',')'].trimNumbersFrom(2);
    //=> ["(", "C", "1", "*", ")"] 
```

[**也可以看看 ...**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T05:59:38.673

```
var a = ['(','C', 'a', '8','2',')'].join("").split("C");
var nPos = a[1].search(/[0-9]/g);
var firstNumber = a[1][nPos];
var b = a[1].split(n);

// rebuild
a = a[0] + "C" + b[0] + firstNumber + b[1].replace(/[0-9]/g, ""); 
```

未经彻底测试，但对于您的情况，它可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T06:10:33.367

您可以使用[isNaN()](http://www.w3schools.com/jsref/jsref_isNaN.asp)函数，如果它是有效数字则返回 false，如果它不是数字则返回 true

```
var str = ['(','C','1','2','3','4','*',')']; // Your Input
var temp = [],count = 0;

for(var i=0;i<str.length;i++)
{
   if(i<str.indexOf('C') + 2)
   {
      temp[count] = str[i];
      count++;
   }
   else
   {
      if(isNaN(str[i]) == true)
      {
        temp[count] = str[i];
        count++;
      }      
   }
 }
str = temp;
alert(str); 
```

[现场演示](http://jsfiddle.net/yexWg/)

# android - 未生成 Jni 示例头文件

> ID：15608286
> 
> 赞同：1
> 
> 时间：2013-03-25T05:33:29.970
> 
> 标签：android, java-native-interface, header-files

当我运行以下命令在我的 JNI 项目中创建头文件时出现以下错误

```
 root@bsd-pc1907:/home/sat/KISHORE/kishore workspace/Ivijni/bin/classes/com/ivi/jni# javah JniActivity
   error: cannot access JniActivity
   bad class file: RegularFileObject[./JniActivity.class]
   class file contains wrong class: com.ivi.jni.JniActivity
   Please remove or make sure it appears in the correct subdirectory of the classpath.
   com.sun.tools.javac.util.Abort
   at com.sun.tools.javac.comp.Check.completionError(Check.java:180)
   at com.sun.tools.javadoc.DocEnv.loadClass(DocEnv.java:159)
   at com.sun.tools.javadoc.RootDocImpl.<init>(RootDocImpl.java:95)
   at com.sun.tools.javadoc.JavadocTool.getRootDocImpl(JavadocTool.java:188)
   at com.sun.tools.javadoc.Start.parseAndExecute(Start.java:364)
   at com.sun.tools.javadoc.Start.begin(Start.java:162)
   at com.sun.tools.javadoc.Main.execute(Main.java:113)
   at com.sun.tools.javah.Main.main(Main.java:153)
    javadoc: error - fatal error
  2 errors 
```

我的 JniActivity.java

```
public class JniActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    System.loadLibrary("hellojni");
    new JniActivity().sayHello();

}
private native void sayHello();

} 
```

hellojni.cpp

```
 #include "hellojni.h"
 #include  <iostream>

 using namespace std;

 void sayHello () {
 cout << "Hello World Again!" << endl;
 return;
 } 
```

任何帮助总是很感激，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:23:42.130

> root@bsd-pc1907:/home/sat/KISHORE/kishore workspace/Ivijni/bin/classes/com/ivi/jni# javah JniActivity

这里有几个问题。

1.  您在错误的目录中。你应该在`/home/sat/KISHORE/kishore workspace/Ivijni/bin/classes`。
2.  您发出错误的命令。`javah`, `javap`,`rmic`和所有其他处理 .class 文件的 Java 实用程序的参数是一个完全限定的类名，包括包名。你没有提供，所以你得到了错误。

# javascript - 具有可折叠选项的自动分隔列表视图

> ID：15608288
> 
> 赞同：14
> 
> 时间：2013-03-25T05:33:58.660
> 
> 标签：javascript, jquery, asp.net, jquery-mobile, mobile

我正在研究一个`listview`基于日期的自动分隔器，它是一个很长的列表`data-autodividers='true'`并且工作正常，但我想通过使`listview`日期可折叠来进一步改进它。

这可以使用 c# 从后端完成（我正在开发一个 asp.net webform 移动网站），我在其中根据 Month-Year 对列表进行分组并使每个组可折叠。

但我很想用 jQuery 来做这件事，就像我做`autodivider`. 我已经在 jsFiddle 上设置了相同的设置。

**[http://jsfiddle.net/5PnBT/10/](http://jsfiddle.net/5PnBT/10/)**

**如何在不使用代码隐藏文件（c#）的*情况下使用 jQuery 使这些自动分隔器可折叠？***

我没有看到 jquerymobile 在哪里有这个作为内置选项。

```
$(document).on("pageinit", "#page-wrapper", function () {
    $("#hp-latest-articles").listview({
        autodividers: true,
        autodividersSelector: function (li) {
            var out = li.attr('date');
            return out;
        }
    }).listview('refresh');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-07T11:03:05.940

您的问题有两种解决方案。

1.  您可以使用 jQuery Mobile 端的可折叠列表集，然后您将能够准确找到您正在寻找的内容。您可能需要使用 CSS 编辑元素的外观，使其看起来像一个列表视图。

[http://jsfiddle.net/rc9Gk/](http://jsfiddle.net/rc9Gk/)

```
 <div data-role="collapsible">
        <h3>Title</h3>
             <ul><li>Item1</li><li>Item2</li></ul>
     </div> 
```

1.  第二种解决方案是在列表视图控件的单击事件上应用自定义事件处理程序。每当列表分隔器上发生单击事件时，您可以隐藏以下列表元素，直到下一个自动分隔器。此解决方案需要一些编码。如果此解决方案适合您，我可以为您编写该代码，让我知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T10:39:36.243

如果我理解你的问题，我想你只需要使用**$.mobile.listview.prototype.options.autodividersSelector**选项。我有一个类似的问题，所以如果您需要根据单个元素的日期属性列出它们，请执行以下操作：

```
 $( document ).on( "mobileinit", function() {
  $.mobile.listview.prototype.options.autodividersSelector = function( element )       {
    return (element.attr('date'))       

  };
}); 
```

我为此准备了一个 jsbin：http: [//jsbin.com/enuwoj/1/edit](http://jsbin.com/enuwoj/1/edit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-20T22:03:34.313

我相信您的问题可以通过将以下内容添加到原始小提琴的底部来解决

```
$('.ui-li-divider').click( function(ev ){
  var li = $(ev.target).next(':not(.ui-li-divider)');
  while ( li.length > 0 ) {
      li.toggle();
      li = li.next(':not(.ui-li-divider)');
  }
}); 
```

这是更新的[jsFiddle](http://jsfiddle.net/ezanker/5PnBT/50/)

基本上，每次单击分隔线时，它都会查找所有后续 LI，直到下一个分隔线并切换它们的可见性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-22T21:16:55.330

您将需要`<div data-role="collapsible">`或`<div data-role="collapsible-set">`，具体取决于您是否要将它们分组。

如果您希望它们在默认情况下预先折叠，请`data-collapsed="true"`同时包含该属性。

# iphone - 'set font:' 已弃用：首先在 ios3 中弃用（警告）

> ID：15608289
> 
> 赞同：1
> 
> 时间：2013-03-25T05:34:01.863
> 
> 标签：iphone, ios, xcode4.5

'set font:' 已弃用：首先在 ios3 中弃用（警告）

写在 Viewdidload

```
[btnCancelSignin setFont:[UIFont fontWithName:Font_Ubuntu_Bold size:15.0f]]; 
```

我正在使用 Xcode 4.5.2

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-25T05:35:30.237

**目标 C**

```
button.titleLabel.font = [UIFont fontWithName:@"Helvetica-Bold" size:12.0f]; 
```

**迅速**

```
button.titleLabel.font = UIFont(name: "Helvetica-Bold", size: 12.0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T05:35:20.730

用这个

```
[btnCancelSignin.titleLabel setFont:[UIFont fontWithName:Font_Ubuntu_Bold size:15.0f]]; 
```

# c# - 多个客户端的公共/私人加密逻辑

> ID：15608290
> 
> 赞同：0
> 
> 时间：2013-03-25T05:34:04.227
> 
> 标签：c#, encryption, aes

我有一个场景，我必须根据以下内容实现安全性：

*   服务器使用 Key_Private 加密密码并将此加密密码发送给所有客户端

*   客户端只有 Key_Public 可以用来解密，但不能用这个密钥加密任何新密码。

*   我可以为多个客户端生成多个 Key_Public。

*   我需要控制公钥的长度（应该小于 20 个字符）

我已经尝试过 AES 加密，但我找不到任何简单的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T06:24:13.603

您的算法不起作用，因为它是倒退的。

您无法使用公钥解密。公钥仅用于加密。解密需要私钥。这是公钥/私钥加密的基础。

相反，您想使用会话密钥协商。

1.  客户端连接，它将其公钥发送到您的服务器。
2.  服务器生成一个安全的随机 AES 会话密钥，以及适当的到期时间和适当的反重放值
3.  服务器使用客户端公钥加密安全随机 AES 会话密钥块
4.  服务器向客户端发送加密的 blob
5.  客户端使用客户端私钥解密会话 blob
6.  客户端发送确认消息，使用会话密钥加密
7.  服务器和客户端使用共享会话密钥开始安全通信。

一些警告：

1.  服务器可能应该在开始会话之前确保客户端是可信赖的。这可以使用带外步骤（即公钥由受信任的第三方注册）来完成。或者与现代 API 一样，服务器生成公钥/私钥对，将其发送给客户端，并保留公钥。

2.  服务器应正确过期会话密钥，以防止重播

3.  客户端（如果您控制它们）可能应该验证服务器是否值得信赖（即使用服务器众所周知的公钥）

# android-source - META-INF/com/google/android/update-binary 源代码？

> ID：15608292
> 
> 赞同：5
> 
> 时间：2013-03-25T05:34:14.497
> 
> 标签：android-source, edify

在`update.zip`android更新文件的`update-binary`可执行文件中存在路径`META-INF/com/google/android/`。`update.zip`将由系统下载，稍后将在系统中安装更新。我需要帮助来理解该`update-binary`文件及其用途。任何机构都可以帮助我解决这个问题以及相应的源代码吗？如果任何机构共享源代码链接会很好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-04T02:28:20.333

这种脚本语言称为 Edify，更新二进制代码在这里：

*   [https://github.com/CyanogenMod/android_bootable_recovery/tree/jellybean/edify](https://github.com/CyanogenMod/android_bootable_recovery/tree/jellybean/edify)

更多关于它：

*   [http://wiki.cyanogenmod.org/w/Doc:_About_Edify](http://wiki.cyanogenmod.org/w/Doc:_About_Edify)

# angularjs - 我们可以编写一个可用于所有模块但仅实例化一次的自定义 angularjs 服务吗

> ID：15608293
> 
> 赞同：2
> 
> 时间：2013-03-25T05:34:14.943
> 
> 标签：angularjs

是否可以编写一个可用于页面上所有模块但仅实例化一次的自定义 angularjs 服务？

非常类似于 Angular 提供的全球服务，例如 $http。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:04:31.843

在 AngularJS 中，服务默认是单例的，详见[开发者指南](http://docs.angularjs.org/guide/dev_guide.services.creating_services)。

# django - 在 Django url 中传递一个 id

> ID：15608295
> 
> 赞同：12
> 
> 时间：2013-03-25T05:34:36.087
> 
> 标签：django

我想`userid` 从 django url 传递到我的视图

这是我在 Django 模板中写的

```
<a href ={% url 'user_details' x.id  %} class='btn btn-primary' style="float: right;" >Know More</a></div> 
```

为了处理这个 url，我写了 Url

```
url(r'^User/(\d{userid})/$', 'search.views.user_detail',name='user_details'), 
```

但我收到一个错误，即

```
NoReverseMatch at /search/

Reverse for ''user_details'' with arguments '(2L,)' and keyword arguments '{}' not found. 
```

请帮帮我我在这里做错了什么。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-25T05:41:21.700

没有报价`''`

```
<a href ={% url user_details x.id  %} class='btn btn-primary' style="float: right;" >
    Know More
</a> 
```

另一个你的网址

```
url(r'^User/(?P<userid>\d+)/$', 'search.views.user_detail', name='user_details'), 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-03-28T16:17:47.627

注意，在 Django 1.5 之后，使用必须使用引号。我遇到了这个解决方案并尝试了它，得到了一个错误。我正在使用 Django 1.6，你需要引号：

```
<a href ={% url 'user_details' x.id  %} class='btn btn-primary' style="float: right;" >
    Know More
</a> 
```

希望能帮助到你。

# php - Ajax登录在输入键上不起作用

> ID：15608298
> 
> 赞同：3
> 
> 时间：2013-03-25T05:34:48.023
> 
> 标签：php, jquery, html, ajax, login

我在 PHP 中有一个在 ajax 上工作的登录表单，当我单击登录按钮时它工作得很好，但在按下回车键时却没有。

我对此进行了大量研究，并尝试了该网站上发布的所有相同解决方案，并尝试了所有解决方案，但没有什么对我有用。

我的 HTML 包含在 div id ="mini-login" 中

```
<div class="content-login">
<h4>Email Address:</h4>
<input type="text" name="email" value="" />
<h4>Password:</h4>
<input type="password" name="password" value="" id="pasword"/>
<br />
<a href="<?php echo $forgotten; ?>"><?php echo $text_forgotten; ?></a><br />
<br />
 <input type="button" value="<?php echo $button_login; ?>" id="button-login-mini" class="button" /> 
```

还有我的剧本——

```
$('#button-login-mini').live('click', function() {
$.ajax({
url: 'index.php?route=module/login/validate',
type: 'post',
data: $('#mini-login .content-login :input'),
dataType: 'json',
beforeSend: function() {
  $('#button-login-mini').attr('disabled', true);
  $('#button-login-mini').after('<span class="wait">Please wait</span>');
},  
complete: function() {
  $('#button-login-mini').attr('disabled', false);
  $('.wait').remove();
},        
success: function(json) {
  $('.warning, .error').remove();
  if (json['redirect']) {
    $('#mini-login .content-login').fadeOut('slow');
    location = json['redirect'];
  } else if (json['error']) {
    $('#mini-login .content-login').prepend('<div class="warning" style="display: none;">' + json['error']['warning'] + '</div>');

    $('.warning').fadeIn('slow');
  }
},
error: function(xhr, ajaxOptions, thrownError) {
  alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
}
}); 
}); 
```

所以上面的工作非常好，但我尝试在输入键上调用它 - keyup、keydown、keypress 并检查 keyCode==13，但它不起作用，也尝试使用表单，现在对此发疯了！ ！！我究竟做错了什么？？以及如何使它工作？

注意：登录页面不是一个完整的文档，点击主页上的登录链接会向下滑动。

这就是登录页面的调用方式-

```
$(document).ready(function() {
$('#mini-login > .heading-login a').live('click', function() {
    $('#mini-login').addClass('active');

    $('#mini-login').load('index.php?route=module/login #mini-login > *');

    $('#mini-login').live('mouseleave', function() {
        $(this).removeClass('active');
    });
});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T05:41:58.153

尝试这个

```
 $(document).ready(function() {
$('#mini-login > .heading-login a').live('click', function() {

 $(document).bind('keydown', function(e){         
    if (e.which == 13){
       $('#button-login-mini').trigger('click');   
   }     
      });

$('#mini-login').addClass('active');

$('#mini-login').load('index.php?route=module/login #mini-login > *');

$('#mini-login').live('mouseleave', function() {
    $(this).removeClass('active');
    $(document).unbind('keydown');
});
});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T05:40:14.710

用于`trigger`在按下回车时触发点击事件....

尝试这个

```
 $(document).keypress(function(event){  // i called a clicked event in document here you can chnage it to any other event like.. input field keyup event or so....
   var keycode = (event.keyCode ? event.keyCode : event.which);
   if(keycode == '13'){
     $('#button-login-mini').trigger('click');   
   }

}); 
```

并使用`on()`而不是现场

```
$(document).on('click', '#button-login-mini',function() {.... 
```

最接近的静态父级比 on.... 的文档更受欢迎。在你的情况下，`#content-login`我认为

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T05:38:06.520

这是我与 jQuery 一起使用的代码片段

```
 $(".login").keyup(function(event){
                if(event.keyCode == 13){
                    $("#loginBtn").click();
                }
            }); 
```

keyCode 13 = 输入键`#loginBtn`是我附加到调用 th onClick 的按钮本身的 ID，`.login`它只是它所在的 div 类。

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T06:07:37.143

当您在电子邮件文本框或密码文本框中按 Enter 键时，您实际上可以调用该事件：

将您的 ajax 代码放在一个函数上并在您的事件中调用它：

```
function login(){
    $.ajax({
    url: 'index.php?route=module/login/validate',
    type: 'post',
    data: $('#mini-login .content-login :input'),
    dataType: 'json',
    beforeSend: function() {
      $('#button-login-mini').attr('disabled', true);
      $('#button-login-mini').after('<span class="wait">Please wait</span>');
    },  
    complete: function() {
      $('#button-login-mini').attr('disabled', false);
      $('.wait').remove();
    },        
    success: function(json) {
      $('.warning, .error').remove();
      if (json['redirect']) {
        $('#mini-login .content-login').fadeOut('slow');
        location = json['redirect'];
      } else if (json['error']) {
        $('#mini-login .content-login').prepend('<div class="warning" style="display: none;">' + json['error']['warning'] + '</div>');

        $('.warning').fadeIn('slow');
      }
    },
    error: function(xhr, ajaxOptions, thrownError) {
      alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
    }
    }); 
}

$document.ready(function(){
$('#button-login-mini').on('click', function() {
  login();
});
$('input[name="email"],input[name="password"]').bind('keypress',function(e){
    var code = (e.keyCode ? e.keyCode : e.which);
    if(code == 13) {
      login();
    }
  });
}); 
```

# regex - Lua模式匹配，重复字符

> ID：15608299
> 
> 赞同：3
> 
> 时间：2013-03-25T05:34:52.413
> 
> 标签：regex, lua

我是模式匹配的初学者。我了解到 Lua 的模式匹配与标准略有不同，因此我一直无法找到一种方法将针对此问题的正则表达式解决方案改编为 Lua 代码。

我正在尝试替换字符串中重复字符的最长子字符串。

例如，在 abbbccccc 中，它会找到 a、bbb、ccccc。

这不起作用，它只匹配整个字符串：

```
string.gsub(inputString, "(.+)", function (n) return replace(n) end) 
```

我可以看到为什么它不起作用，但我找不到其他方法。

我知道我可以使用循环轻松解决这个问题，但我正在尝试使用正则表达式等进行更多练习。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:02:43.387

它不能用单一的模式来完成。
使用模式链：

```
inputString:gsub('.','\0%0%0'):gsub('(.)%z%1','%1'):gsub('%z.(%Z+)',replace) 
```

# svn - 使用 pysvn:propget() 时出错

> ID：15608300
> 
> 赞同：1
> 
> 时间：2013-03-25T05:34:52.500
> 
> 标签：svn, pysvn

在我的 python 脚本中，我调用了 propget() API，

```
 root = "...."
     prop_list = svncl.propget( "Test",
     root,
     revision=pysvn.Revision(pysvn.opt_revision_kind.number, 42),
     recurse=False,
     peg_revision=pysvn.Revision( pysvn.opt_revision_kind.number, 42 ),
     depth="empty" ) 
```

但是在运行脚本时出现以下错误，

**TypeError：propget() 不能混合深度和递归**

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-24T10:18:04.603

[文档](http://pysvn.tigris.org/docs/pysvn_prog_ref.html#pysvn_client_propget)说： “深度可以用来代替递归。”

您似乎同时使用深度和递归。尝试删除一个。

# html - 在 localStorage 中保存 ID (BD) 的信息是一种不好的做法？

> ID：15608304
> 
> 赞同：2
> 
> 时间：2013-03-25T05:35:00.807
> 
> 标签：html, local-storage

有时我在登录后使用 localStorage 将信息存储为“idclient”、“name”，然后在用户与系统交互的系统的其他视图中使用这些数据。没有localStorage，使用PHP，之前我是用session变量来持久化数据，现在更喜欢用LocalStorage，因为用起来更舒服、更容易，但不知道我这样做是不是不好的做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T22:44:21.210

您可以保存导航数据或改善用户体验的数据，但出于安全原因，我认为您不应该在前端存储 idclient 或其他关键后端信息。查看 twitter 等大多数后裔开放 APIS 中广泛使用的 access_token 模型；

[https://dev.twitter.com/docs/api/1/post/oauth/access_token](https://dev.twitter.com/docs/api/1/post/oauth/access_token)

# .net - 什么时候应该使用 SQLite，什么时候应该使用 Microsoft Access？

> ID：15608305
> 
> 赞同：0
> 
> 时间：2013-03-25T05:35:01.153
> 
> 标签：.net, sqlite, ms-access

我必须在 .Net 中开发一个基于 Window 的应用程序。该应用程序提供给单个用户，该用户可以查询数据库以获取结果。数据库中没有任何修改可以由用户进行。对于安装，我需要使应用程序独立于任何类型的来源。因此，对于数据库问题，我想知道哪个更好用：

SQL lite 还是 MS Access？

至于 MS Access，无论在何处运行设置，我总是需要注意系统上可用的 Office 版本。

请建议哪个对我有好处，如果有任何其他选择可以使这个便携。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T06:26:33.890

您还可以使用[SQL Server Compact](http://en.wikipedia.org/wiki/SQL_Server_Compact)。

它是一个像 SQLite 一样的嵌入式数据库，这意味着它不需要像 SQL Server Express 这样的客户端安装。[您只需要在您的应用程序中分发一些程序集](https://stackoverflow.com/questions/5356333/how-should-i-use-sql-server-compact-edition-in-a-sharpdevelop-project-on-multipl/5356898#5356898)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T06:08:24.110

仅当您不关心您的数据（即从不）时才使用 MSAccess。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T05:58:56.847

我会在 MS Access 之前使用[SQL Server Express 。](http://www.microsoft.com/en-us/sqlserver/editions/2012-editions/express.aspx)

如果您可以安全地假设一个 Windows 生态系统，那么这将是一个不错的选择。

SQL Lite 可以在所有主要平台上运行，因此它肯定更便携。

您需要提供有关用户和架构的更多信息，然后任何人才能很好地回答您的问题。

# jasper-reports - Jasper iReport 设计器中的表格

> ID：15608309
> 
> 赞同：-1
> 
> 时间：2013-03-25T05:35:29.840
> 
> 标签：jasper-reports

我在 Jasper iReport Designer 中创建了一个表格。报表执行时，多次显示同一张表。虽然只使用了单个数据集和表。请指导。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:41:58.170

尝试将您的表格组件放入汇总带，因为详细带重复数据集中每一行的记录。

如果您确实需要将其放在详细信息带中，可以尝试将表属性“printWhenExpression”设置为 $V{REPORT_COUNT} == 1

# android - 如何在 LinearLayout 中添加空白空间？

> ID：15608314
> 
> 赞同：2
> 
> 时间：2013-03-25T05:36:15.907
> 
> 标签：android, android-layout

我希望通过扩展 LinearLayout 来制作复合控件，这是我的代码：

```
public class MemberView extends LinearLayout {
    private TextView contactName;
    private ImageView removeContact;
    private ImageView contactPicture;

    public MemberView(Context context) {
    super(context);
    //Context thisContext = getContext();
    onCreate(context);

    }

    private void onCreate(Context context) {
    contactName = new TextView(context);
    contactName.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    contactName.setText("Mohammad");

    removeContact = new ImageView(context);
    removeContact.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    removeContact.setImageResource(R.drawable.ic_menu_delete);

    contactPicture = new ImageView(context);
    contactPicture.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    contactPicture.setImageResource(R.drawable.ic_contact_picture);

    setClickable(true);
    setOrientation(LinearLayout.HORIZONTAL);
    addView(contactName);
    addView(removeContact);
    addView(contactPicture);
    }
} 
```

我希望它看起来像以下**UI 原型**：

![在此处输入图像描述](../Images/ddd808587ed07125b4de56d362621e62.png)

但我的代码的结果是：

![在此处输入图像描述](../Images/b84a17423c42b69fe4d82ffb11a05590.png)

我尝试添加一个 VERTICAL LinearLayout 并为其添加一些空格，但没有用：这是编辑后的 ​​onCreate 代码：

```
private void onCreate(Context context) {
    contactName = new TextView(context);
    contactName.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    contactName.setText("Mohammad");

    removeContact = new ImageView(context);
    removeContact.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    removeContact.setImageResource(R.drawable.ic_menu_delete);

    contactPicture = new ImageView(context);
    contactPicture.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    contactPicture.setImageResource(R.drawable.ic_contact_picture);

    LinearLayout layout2 = new LinearLayout(context);
    layout2.setOrientation(LinearLayout.VERTICAL);
    layout2.addView(new Space(context));
    layout2.addView(contactName);
    layout2.addView(new Space(context));

    setClickable(true);
    setOrientation(LinearLayout.HORIZONTAL);
    addView(layout2);
    addView(removeContact);
    addView(contactPicture);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T05:41:27.963

不要放置空间，因为它不是正确的方式。

使用**android:layout_width**。

1.  将`android:layout_width`孩子的设置为“0dp”
2.  设置`android:weightSum`父母的
3.  按比例设置`android:layout_weight`每个孩子的，即：
    `weightSum="5"`三个孩子：
    *   `layout_weight="1"`
    *   `layout_weight="3"`
    *   `layout_weight="1"`

例如（这是静态的，你必须尝试动态）：

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:weightSum="5">

    <Button
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="1" />

    <Button
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="3"
        android:text="2" />

    <Button
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="3" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:56:10.287

RelativeLayout 将在这里最好地满足您的目的。结构应该是这样的：

```
<RelativeLayout>

    // image layout, aligned to the right.
    <RelativeLayout horizontal alignParentRight >
    <ImageView contact icon>
    <ImageView deleteIcon alignBottom right of contactIcon>
    </RelativeLayout>

    // contact name
    <RelativeLayout fillparent leftof abovelayout>
    <Textview centerparent true  this will display contact name />
    </Relativelayout>

</RelativeLayout> 
```

# .net - .Net 4.5 - TFS2010 通过 HTTPS 连接错误 TF31003

> ID：15608316
> 
> 赞同：0
> 
> 时间：2013-03-25T05:36:36.923
> 
> 标签：.net, visual-studio-2012, team-explorer

我们在盒子上安装了 TFS2010 SP1，当我使用`http://myserver:8080` 办公室连接团队资源管理器时它可以工作。当我使用我们的外部 URL ( [https://tfs.extserver.com](https://tfs.extserver.com) ) 从家里连接时，我收到此错误。这些天对我来说这一切都很好，即使在安装了 VS2012 之后也能正常工作。有趣的是，它适用于许多使用 VS2012 的人，但我和其他几个人，虽然我没有看到任何模式。

错误：TF31003：您没有输入必要的凭据，或者您的用户帐户没有连接权限......

我们的 TFS Webaccess 门户工作正常，但问题仅在于 teamexplorer 连接。

如果您对故障排除有任何建议，那就太好了。是否可以启用任何日志来跟踪此问题？

**更新** 显然**.Net 4.5 导致了这个问题**。如果我们卸载 .Net4.5 就可以解决问题。但是，我使用的是 windows8 和 VS2012，所以无法卸载 .net 4.5。

# javascript - 如何将字符串转换为二维数组？

> ID：15608317
> 
> 赞同：1
> 
> 时间：2013-03-25T05:36:37.860
> 
> 标签：javascript, arrays, multidimensional-array

为了将字符串转换为一维 JavaScript 数组，我可以使用“eval()”。但是如何将字符串转换为二维数组呢？

我的字符串是：

```
['stage 1', 1, 11, 111],['Stage 2', 2, 22, 222] 
```

使用此类参数执行“eval(...)”会创建一个包含 4 个元素的 1 数组：['stage', 1, 11, 111]。相反，我希望有 2 个元素的数组，其中每个元素又是另一个 4 个元素的数组。

我相信，我可以将原始字符串按“，”拆分为子字符串列表，并为每个子字符串调用“eval”，并将结果组合成一个二维数组。

但**我相信应该已经存在更有效的方法。有没有？如果是，请指教。**

非常感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T05:44:58.420

而不是使用`eval`它会更好地使用`JSON.parse`：

```
var string = '["stage 1", 1, 11, 111],["Stage 2", 2, 22, 222]';
var array2d = JSON.parse("[" + string + "]");
console.log(array2d); 
```

在此处查看演示：http: [//jsfiddle.net/y94zz/](http://jsfiddle.net/y94zz/)

# javascript - 使用 jQuery 添加和删除类时淡入标题

> ID：15608325
> 
> 赞同：0
> 
> 时间：2013-03-25T05:37:09.683
> 
> 标签：javascript, jquery, scroll, fadein, fadeout

我正在设计一个导航，在用户向下滚动页面后显示背景栏。当他们滚动回顶部时，栏（背景颜色）消失。我正在使用以下说明进行操作：

[基于垂直滚动的jquery添加/删除类？](https://stackoverflow.com/questions/12558311/add-remove-class-with-jquery-based-on-vertical-scroll/12558348#12558348)

它工作正常，但现在我想在滚动条上添加淡入淡出。我试过添加 fadeIn() 和 fadeOut() 方法。问题是当它淡出时，它会淡出整个#nav div！不仅仅是背景颜色。这是查询

```
$(function() {
//caches a jQuery object containing the header element
var header = $('.noBackground');
$(window).scroll(function() {
    var scroll = $(window).scrollTop();

    if (scroll >= 500) {
        header.removeClass('noBackground').addClass('blackBackground').fadeIn();
    } else {
        header.removeClass('blackBackground').fadeOut().addClass('noBackground');
    }
});
}); 
```

完整的，HTML，CSS 和 jQuery 在[这个小提琴上](http://jsfiddle.net/f5UTL/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:05:19.913

这里的问题是`#nav`当您滚动回顶部时您的 div 是隐藏的。这是因为该`.fadeOut()`方法通过将匹配的元素淡化为透明来隐藏它们。所以你`.fadeOut()`从其他条件中删除它并且它工作正常。

这是编辑后的代码。

```
$(function() {
    //caches a jQuery object containing the header element
    var header = $('.noBackground');
    $(window).scroll(function() {
        var scroll = $(window).scrollTop();

        if (scroll >= 500) {
            header.removeClass('noBackground').addClass('blackBackground').fadeIn();
        } else {
            header.removeClass('blackBackground').addClass('noBackground');
        }
    });
}); 
```

**编辑：**

一个简单的扭曲将显示效果：

```
$(function() {
    //caches a jQuery object containing the header element
    var header = $('.noBackground');
    $(window).scroll(function() {
        var scroll = $(window).scrollTop();

        if (scroll >= 500) {
            if(header.hasClass('noBackground')) {
                header.hide();
                header.removeClass('noBackground')
               .addClass('blackBackground').fadeIn(2000);
            }
        } else {
            if(header.hasClass('blackBackground'))  {   
                header.hide();
                header.removeClass('blackBackground')
               .addClass('noBackground').fadeIn(2000);
            }
        }
    });
}); 
```

[演示小提琴](http://jsfiddle.net/f5UTL/28/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:57:05.217

fadeOut() 方法可以在 jquery 元素上实现，而不是在类上实现。你的代码工作得很好

# .net - 如何在下拉列表之前更改 DateTimePicker 的值

> ID：15608326
> 
> 赞同：1
> 
> 时间：2013-03-25T05:37:21.723
> 
> 标签：.net, datetimepicker

我想在 DateTimePicker 下拉时更改值

```
protected override void OnDropDown(EventArgs eventargs)
    {

        if (Value == MinDate)
        {
            Value = DateTime.Now;
        }
        base.OnDropDown(eventargs);

    } 
```

但是不行，输入框显示今天，日历却显示MinDate。我希望今天显示日历。而且我有一个解决方案，但这不是我想要的，我不想向系统发送消息

```
protected override void OnDropDown(EventArgs eventargs)
    { 
        if (Value == MinDate)
        {
            Value = DateTime.Now;
            System.Windows.Forms.SendKeys.Send("%{DOWN}");
        }
        base.OnDropDown(eventargs); 
    } 
```

对不起，我的英语不好！

# c - C-程序在 Main 中跳过 scanf 请求

> ID：15608329
> 
> 赞同：0
> 
> 时间：2013-03-25T05:37:32.147
> 
> 标签：c

我有以下程序：

```
#include <stdio.h>
#include <stdlib.h>   /* for malloc */
#include <ctype.h>

struct employee
 {
 char first_name[10];
 char last_name[10];
 long id_number;
 float wage;
 float hours;
 float overtime;
 float gross;

 struct employee *next;
 };

 /*-----------------------------------------------------------------------------*/
 /*                                                                             */
 /* FUNCTION:  print_list                                                       */
 /*                                                                             */
 /* DESCRIPTION:  This function will print the contents of a linked             */
 /*               list.  It will traverse the list from beginning to the        */
 /*               end, printing the contents at each node.                      */
 /*                                                                             */
 /* PARAMETERS:   emp1 - pointer to a linked list                               */
 /*                                                                             */
 /* OUTPUTS:      None                                                          */
 /*                                                                             */
 /* CALLS:        None                                                          */
 /*                                                                             */
 /*-----------------------------------------------------------------------------*/
 void print_list(struct employee *emp1)
 {
    struct employee *tmp;   /* tmp pointer value to current node */
    int i = 0;              /* counts the nodes printed          */

    /* Start a beginning of list and print out each value               */
    /* loop until tmp points to null (remember null is 0 or false)      */
    for(tmp = emp1; tmp ; tmp = tmp->next)
    {
        i++;

        /* TODO - print other members as well */
        printf("\nEmployee ID: %6d, Wage: %8.2f, Hours: %5.2f\n",tmp->id_number,
                                                  tmp->wage,tmp->hours);
    }

    printf("\n\nTotal Number of Employees = %d\n", i);

  }

  /*----------------------------------------------------------------------------*/
  /*                                                                            */
 /* FUNCTION:  main                                                            */
  /*                                                                            */
 /* DESCRIPTION:  This function will prompt the user for an employee           */
 /*               id and wage until the user indicates they are finished.      */
 /*               At that point, a list of id and wages will be                */
 /*               generated.                                                   */
 /*                                                                            */
 /* PARAMETERS:   None                                                         */
 /*                                                                            */
  /* OUTPUTS:      None                                                         */
 /*                                                                            */
 /* CALLS:        print_list                                                   */
 /*                                                                            */
/*----------------------------------------------------------------------------*/
int main ()
{

char   answer[80];       /* to see if the user wants to add more employees */
int    more_data = 1;    /* flag to check if another employee is to be processed */
char   value;             /* gets the first character of answer */

struct employee *current_ptr,   /* pointer to current node */
                *head_ptr;       /* always points to first node */

  /* Set up storage for first node */
head_ptr = (struct employee *) malloc (sizeof(struct employee));
current_ptr = head_ptr;

while (more_data)
{
   /* Read in Employee ID and Hourly Wage */

    printf("\nEnter employee ID: ");
    scanf("%li", & current_ptr -> id_number);

    printf("\nEnter employee weekly wage: ");
    scanf("%f", & current_ptr -> wage);

    printf("\nEnter employee weekly hours: ");
    scanf("%f", & current_ptr -> hours);

    printf("\nEnter First Name: ");
    scanf(" %c", & current_ptr -> first_name);

    printf("\nEnter Last Name: ");
    scanf("%c", & current_ptr -> last_name);

    printf("Would you like to add another employee? (y/n): ");
    scanf("%s", answer);

    /* Ask user if they want to add another employee */
    if ((value = toupper(answer[0])) != 'Y')
       {
       current_ptr->next = (struct employee *) NULL;
       more_data = 0; 
       }
    else
       {
       /* set the next pointer of the current node to point to the new node */
       current_ptr->next = (struct employee *) malloc (sizeof(struct employee));
      /* move the current node pointer to the new node */
       current_ptr = current_ptr->next;
       }
} /* while */

/* print out listing of all employee id's and wages that were entered */
print_list(head_ptr);

 printf("\n\nEnd of program\n");

 return 0;
  } 
```

我想开始阅读 First_name 和 last_name 的 ifnormation，但是当我提示用户输入 first_name 时，我输入值，按 Enter，然后它会跳过 last_name 请求。我不确定为什么会这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T05:41:38.840

使用`%s`而不是`%c`读取字符串。当您阅读时，`%c`您只会得到一个字符，而将其余字符留在缓冲区中。

```
printf("\nEnter First Name: ");
scanf("%s", &current_ptr->first_name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:46:59.410

根据对你问题的理解。我认为您应该在 scanf() 语句之前调用 fflush() 函数。可能你的问题会解决，但我不确定。请确保此函数的语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T08:12:58.617

正如 c.fogelklou 提到的，`%s`用于字符串和`%c`字符。但是，`scanf`可能会导致缓冲区溢出攻击，因此，我建议您阅读[这篇文章](https://stackoverflow.com/questions/1621394/how-to-prevent-scanf-causing-a-buffer-overflow-in-c)和[此页面](http://crasseux.com/books/ctutorial/String-overflows-with-scanf.html)以了解如何避免这种情况。

# sql - 在sql语句中正确使用撇号来调用组合框

> ID：15608331
> 
> 赞同：1
> 
> 时间：2013-03-25T05:37:44.680
> 
> 标签：sql, vb.net, combobox

如何更改“COMP”以检查我在组合框类别上选择的内容？

我的文本框是 cmbCategory

```
cmd = New SqlCommand("SELECT * FROM tblOfficeEquipmentSubCategory Where CAT_ID='COMP'", sqlconn)
If sqlconn.State = ConnectionState.Closed Then sqlconn.Open()
Dim sdr As SqlDataReader = cmd.ExecuteReader()
sdr.Close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:48:25.500

尝试这样的事情：

```
cmd = New SqlCommand("SELECT * FROM tblOfficeEquipmentSubCategory Where CAT_ID=@Category", sqlconn)
cmd.Parameters.Add("@Category", SqlDbType.NVarChar, -1).Value = cmbCategory.SelectedText
If sqlconn.State = ConnectionState.Closed Then sqlconn.Open()
Dim sdr As SqlDataReader = cmd.ExecuteReader()
sdr.Close() 
```

# php - 以适当的格式排列数组

> ID：15608333
> 
> 赞同：-6
> 
> 时间：2013-03-25T05:37:48.290
> 
> 标签：php, arrays

嗨朋友这是我的阵列：-

```
 [0] => Array
    (
        [0] => Array
            (
                [name] => rel
                [value] => 8th 
            )

        [1] => Array
            (
                [name] => imag
                [value] => media/fil
            )

        [2] => Array
            (
                [name] => dur
                [value] => 130
            )

        [id] => 1009
    ) 
```

我希望输出是这样的： -

```
 [0] => Array
    (
        [0] => Array
            (
                [name] => rel
                [value] => 8th
                [id] => 1009
            )

        [1] => Array
            (
                [name] => imag
                [value] => media/fil
                [id] => 1009
            )

        [2] => Array
            (
                [name] => dur
                [value] => 130
                [id] => 1009
             )

    ) 
```

谁能帮我吗 ？？

我尝试了大多数数组函数，但它不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T05:41:15.290

```
$id = $array['id'];
unset($array['id']);
foreach($array as $k=>$v) {
    $array[$k]['id'] = $id;
} 
```

# vb.net - 通过多项式方程进行数据压缩

> ID：15608334
> 
> 赞同：2
> 
> 时间：2013-03-25T05:37:55.437
> 
> 标签：vb.net

我正在尝试制作一种压缩数据的新方法。我想要做的是说一组大量的数字，然后尝试将多项式函数应用于数据/生成多项式函数。然后，我将使用起始参数而不是每个单独的数据位来存储多项式。这意味着在运行时，打开的程序将只使用多项式来重新创建数据。

我的问题：Visual Basic .NET 中是否有任何库或函数可以获取一组数据`{0, 2, 4, 6, ..., Large Even}`并为其返回“趋势线”？很像 excel 的图表趋势线选项。

# angularjs - Angular NgResource：初始化错误

> ID：15608337
> 
> 赞同：-1
> 
> 时间：2013-03-25T05:38:00.553
> 
> 标签：angularjs

我有一个关于角度资源的奇怪问题。当我尝试定义它时，它会导致应用程序创建错误。我不知道，但这是定义角度资源的正确方式吗？tIA

main.js

```
'use strict';

require.config({
paths: {
    jquery: 'libs/jquery/jquery-1.9.1',
    angular: 'libs/angular/angular.min',
    ngResource: 'libs/angular/angular-resource.min'

},

shim: {
    angular: {
        exports: 'angular'
    },

    resource : { deps : ['angular'], 'exports' : 'ngResource'},
  }
  });

    require([
    'jquery',
    'angular',
    //'ngResource',  
    'app',
    'routes',
    ],
    function ($, angular, app,  routes) {// set main controller

$(function(){
    var $html = $('html');
    angular.bootstrap($html, [app['name']]);

    $html.addClass('ng-app');

   });

  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:57:33.890

只是为了帮助那些不熟悉上面代码的用户；代码展示了RequireJS的配置和初始化结构，最后只有一小部分是实际的AngularJS代码。

您已正确配置 RequireJS 以在初始化之前包含 ngResource，但您实际上并没有告诉 Angular 使用它。我不确定`app['name']`代表什么，但你的角度引导调用应该包括 ngResource 模块：

```
angular.bootstrap($html, ['ngResource']); 
```

而且，顺便说一句，我认为您不需要在最后添加类（'ng-app'）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:41:55.063

在加载所有资源时的回调中，尝试在引导之前显式定义模块和依赖项，如下所示：

```
angular.module('fooApp', ['ngResource']); // Module name and list of dependancies.
angular.bootstrap(document, 'fooApp'); 
```

不需要手动添加 ng-app 类，当这个类用于自动引导时，witch 不是你想要的。您希望在加载所有脚本时加载应用程序模块，并将 ngResource 模块作为依赖项。

希望这可以帮助。

# linux - fork() 因内存不足错误而失败

> ID：15608347
> 
> 赞同：9
> 
> 时间：2013-03-25T05:39:13.830
> 
> 标签：linux, fork, virtual-memory, memory-overcommitment

父进程在尝试 fork 子进程时失败并显示 errno=12(Out of memory)。父进程在 Linux 3.0 内核 - SLES 11 上运行。在分叉子进程时，父进程已经使用了大约 70% 的 RAM（180GB/256GB）。这个问题有什么解决方法吗？

该应用程序是用 C++ 编写的，使用 g++ 4.6.3 编译。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-25T19:33:45.693

也许在您的系统中防止了虚拟内存过度提交。

如果被阻止，则虚拟内存不能大于物理 RAM + 交换的大小。如果允许，那么虚拟内存可以大于 RAM+swap。

当您的进程分叉时，您的进程（父进程和子进程）将拥有 2*180GB 的虚拟内存（如果没有交换，那就太多了）。

因此，允许通过这种方式过度提交：

```
 echo 1 > /proc/sys/vm/overcommit_memory 
```

如果子进程立即执行，或者在父进程向自己的内存写入过多之前释放分配的内存，它应该会有所帮助。所以，要小心，如果两个进程都继续使用所有内存，内存不足的杀手可能会起作用。

proc(5) 的手册页说：

> /proc/sys/vm/overcommit_memory
> 
> 该文件包含内核虚拟内存记帐模式。值为： 0：启发式过度使用（这是默认设置） 1：总是过度使用，从不检查 2：总是检查，从不过度使用
> 
> 在模式 0 中，不检查带有 MAP_NORESERVE 的 mmap(2) 调用，并且默认检查非常弱，导致进程“OOM-killed”的风险。在 Linux 2.4 下，任何非零值都意味着模式 1。在模式 2（自 Linux 2.6 起可用）中，系统上的总虚拟地址空间限制为 (SS + RAM*(r/100))，其中 SS 是交换空间，RAM是物理内存的大小，r是文件/proc/sys/vm/overcommit_ratio的内容。

更多信息：[SLES 中的过度使用内存](http://www.novell.com/support/kb/doc.php?id=7002775)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T06:20:48.420

`fork`-ing 需要资源，因为它是[在写入时复制](http://en.wikipedia.org/wiki/Copy-on-write)进程的可写页面。再次阅读[fork(2)](http://man7.org/linux/man-pages/man2/fork.2.html)手册页。

您至少可以提供一个巨大的临时交换文件。您可以（在一些有足够空间的文件系统上）创建一个巨大的`$SWAPFILE`文件

```
 dd if=/dev/zero of=$SWAPFILE bs=1M count=256000
  mkswap $SWAPFILE
  swapon $SWAPFILE 
```

否则，您可以例如以不同的方式设计您的程序，例如`mmap`-ing 一些大文件（并`munmap`在 fork 之前对其进行`mmap`-ing，然后再对其进行 -ing），或者更简单地从程序的开头开始`popen`-ed shell，或一个`p2open`-ed 或显式地`pipe`对它进行 -s （可能多路复用调用 à la`poll`也很有用），然后向它发出命令。

如果我们知道你的程序在做什么，为什么它会消耗这么多内存，以及它为什么和什么是分叉的，也许我们可以提供更多帮助......

阅读[高级 Linux 编程](http://advancedlinuxprogramming.com/)了解更多信息。

### PS。

如果您`fork`只是为了`gdb`显示回溯，请考虑更简单的替代方案，例如[最近的 GCC 的 libbacktrace](https://github.com/mirrors/gcc/tree/master/libbacktrace)或[Wolf 的 libbacktrace](http://freecode.com/projects/libbacktrace) ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-17T16:45:50.380

Linux 上一个更好的解决方案是使用 vfork 或 posix_spawn （因为它会尝试使用 vfork 如果可能）： vfork “创建新进程而不复制父进程的页表”，因此即使您的应用程序使用更多超过 50% 的可用 RAM。

请注意，std::system 和 QProcess::execute 也在后台使用 fork，在 Qt 框架中甚至有一张关于这个问题的票：[https ://bugreports.qt.io/browse/QTBUG-17331](https://bugreports.qt.io/browse/QTBUG-17331)

# nginx - Nginx 缓存控制打破了工作路径

> ID：15608350
> 
> 赞同：0
> 
> 时间：2013-03-25T05:39:33.073
> 
> 标签：nginx, amazon-web-services, amazon-ec2

我大部分时间都在关注 html5boilerplate nginx 设置，但是当我包含`expires.conf`.

用于 Nginx 设置的 HTML5BP：[https ://github.com/h5bp/server-configs/tree/master/nginx](https://github.com/h5bp/server-configs/tree/master/nginx)

我只更改了一些非常小的内容，我将在下面进行说明。然而，当包含在内时，`conf/expires.conf`一切都返回 404。

作为旁注，我也不认为它只是 HTML5BP .. 我也遵循[了这个指南](http://www.if-not-true-then-false.com/2011/nginx-and-php-fpm-configuration-and-optimizing-tips-and-tricks/)，图像也坏了（在 Nginx 提示 #5 静态资产到期的标题下）。

```
location ~* \.(jpg|jpeg|gif|png|css|js|ico|xml)$ {
    access_log        off;
    log_not_found     off;
    expires           360d;
} 
```

我在 EC2 弹性负载均衡器后面的服务器上使用 nginx。

这是我的 /etc/nginx/sites-enabled/example.conf：

```
server {
    listen       80;
    server_name  localhost;

    location / {
        root   /var/www/html/example.com;
        index  index.html index.htm;
    }

    # Specify a charset
    charset utf-8;

    # Custom 404 page
    error_page 404 /404.html;

    include conf/base.conf;
} 
```

# php - 在相互交织的日期范围内使用多个 Mysql SUMS 的快捷方式

> ID：15608354
> 
> 赞同：1
> 
> 时间：2013-03-25T05:39:48.177
> 
> 标签：php, mysql, sql

当我网站上的用户登录时，会对统计信息执行多个查询。

```
SELECT SUM(earnings) FROM stats WHERE date BETWEEN $start_month AND $end_month
SELECT SUM(earnings) FROM stats WHERE date BETWEEN $start_last_month AND $end_last_month
SELECT SUM(earnings) FROM stats WHERE date BETWEEN $start_year AND NOW()
//etc... 
```

我觉得我通过`SUM`在单独的查询中询问所有这些来“欺骗”Mysql 引擎。例如，当它计算年收入时，它也在计算其中的月收入......但无论如何我都会再次查询它。

有没有更好的方法来获取相互交织的多个日期范围的总和？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T05:42:24.607

其实你可以`CASE`用来计算`earning`。

```
SELECT  SUM(CASE WHEN date BETWEEN $start_month AND $end_month THEN earnings ELSE 0 END),
        SUM(CASE WHEN date BETWEEN $start_last_month AND $end_last_month THEN earnings ELSE 0 END),
        SUM(CASE WHEN date BETWEEN $start_year AND NOW() THEN earnings ELSE 0 END)
FROM    stats 
```

# php - 添加功能不适用于数据库

> ID：15608358
> 
> 赞同：0
> 
> 时间：2013-03-25T05:40:16.280
> 
> 标签：php, mysql, database, function, add

大家好，我这学期正在学习 php + html，但我被困在了这段代码上。一切正常（列表+从数据库中删除）但由于某种原因添加不会添加到数据库中，即使它确实验证了输入并使用标头函数在 URL 末尾提供了代码编号。是的，我确实包含了 addProduct 功能的页面:)

如果有人可以给我建议或提示，这是代码

PHP代码：

```
if ( $action == 'add_product' ) {
  $code = $_POST['code'];
  $name = $_POST['name'];
  $version = $_POST['version'];
  $releaseDate = $_POST['releaseDate'];

  if (empty($code) || empty($name)  || empty($version) || empty($releaseDate)) {
    $error = "Please enter a valid and correct values.";
    include('../errors/error.php');
    exit();
  } else {
    addProduct($code, $name, $version, $releaseDate);
    header("Location: .?code=$code");
  }
} 
```

这是 addProduct 函数

```
function addProduct($code, $name, $version, $releaseDate){
  global $db;

  $query = "INSERT INTO products
              (productCode, name, version, releaseDate)
            VALUES
              ('$code', '$name', '$version' '$releaseDate')";
  $db->exec($query);
} 
```

这是HTML代码

```
<form action="index.php" method="post">
    <input type="hidden" name="action" value="add_product"/>
    <label>Code:</label> <input type="input" name="code"/>
    <br />
    <label>Name:</label><input type="input" name="name"/>
    <br />
    <label>Version:</label><input type="input" name="version"/>
    <br />
    <label>Release Date:</label><input type="input" name="releaseDate"/> <label>Use 'yyyy-mm-dd' format</label>
    <br />
    <label>&nbsp;</label>
    <input type="submit" name="submit" value="Add Product" />
    <br />  <br />
</form> 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:14:12.543

只是我还是您的函数中缺少逗号？

`VALUES ('$code', '$name', '$version' '$releaseDate')";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:14:23.223

你可以使用 mysql_query($query); 而不是 $db->e​​xec($query);

# sass - 如何从主 scss 文件中分离 ie hacks 代码

> ID：15608359
> 
> 赞同：3
> 
> 时间：2013-03-25T05:40:19.057
> 
> 标签：sass, compass-sass

我在我的项目中使用 sass 和 compass。然而，它为 ie hacks 提供了一个非常酷的 mixins。

例如：

```
.display { @include inline-block; } 
```

将执行

```
.display {  display: -moz-inline-stack;
   display: inline-block; 
   vertical-align: middle;
   *vertical-align: auto;
   zoom: 1;
   *display: inline;
} 
```

但是我想将所有 ie hacks 代码分离到不同的 css 文件中，例如`ie.css`并希望它放在 ie 条件注释中，以便我的 css 文件与 w3c 兼容。

有什么想法可以克服这个问题。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T23:23:40.927

只需创建两个“父” sass 文件。例如`screen.scss`&`ie.scss` 将所有实际的 sass 放入单独的“子”scss 文件中。然后在您的“父”文件中只有导入语句。

例子：

**屏幕.SCSS**

```
//Global
@import "vars";
@import "mixins";

//Base
@import "reset";
@import "base";
@import "layout";    

//MODULES
@import "modules/module_a";
@import "modules/module_b"; 
```

**IE.SCSS**

```
@import "vars";
@import "mixins";
@import "ie_hacks"; 
```

这使您可以导入所有依赖于 sass 的“子”文件，例如任何变量或 mixin。它还允许您将所有 ie 内容保存在单独的 css 文件中。`ie.scss`显然会比你的主要`screen.scss`

# jquery - 代码点火器和 jquery $.post()

> ID：15608360
> 
> 赞同：0
> 
> 时间：2013-03-25T05:40:24.547
> 
> 标签：jquery, codeigniter

我正在使用 jquery $.post() 并使用 cod 点火器更新数据库中的值。现在，我如何将结果发送到 jquery 中的成功回调。

这是什么，我已经累了。

**模型**

```
 class Test extends CI_Model{
    function update(){
           .....
        return $result = $this->db->update();

     }

   } 
```

**jQuery**

```
 $.post(...,... , function(data,status) {
        alert(data);  **Says undefined**
        alert(status); **Says success**

     }); 
```

由于我使用 update 来更新数据库中的值，因此我将数组从控制器传递到模型。现在，当我使用控制器中提到的 about 时，我得到 Missing argument 1 as for update() function 这是有道理的，我如何获得结果我的模型到控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:13:03.907

只是`echo`变量。它将在 jquery 中接收。尝试这个，

控制器 ：

```
function index(){
  if($a = $this->Test_model->Update()){
    $data['rows'] = $a;
  }
  echo json_encode($data);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:48:54.773

正如 Edwin Alex 所说，您可以通过 echo 发回结果。

但

如果您在 codeigniter 中启用了 gzip，则 echo 将不起作用。您必须使用 codeigniter 的输出类

```
$this->output->set_output(json_encode($data)); 
```

只是让你知道。

# c++ - 是否对空指针未定义的行为执行算术？

> ID：15608366
> 
> 赞同：21
> 
> 时间：2013-03-25T05:41:05.323
> 
> 标签：c++, c, language-lawyer, undefined-behavior, null-pointer

在我看来，下面的程序计算了一个无效的指针，因为`NULL`除了赋值和比较相等之外没有任何用处：

```
#include <stdlib.h>
#include <stdio.h>

int main() {

  char *c = NULL;
  c--;

  printf("c: %p\n", c);

  return 0;
} 
```

但是，GCC 或 Clang 中针对未定义行为的警告或工具似乎都没有表明这实际上是 UB。该算法是否真的有效并且我太迂腐了，或者这是我应该报告的检查机制的缺陷？

测试：

```
$ clang-3.3 -Weverything -g -O0 -fsanitize=undefined -fsanitize=null -fsanitize=address offsetnull.c -o offsetnull
$ ./offsetnull
c: 0xffffffffffffffff

$ gcc-4.8 -g -O0 -fsanitize=address offsetnull.c -o offsetnull
$ ./offsetnull 
c: 0xffffffffffffffff 
```

Clang 和 GCC 使用的 AddressSanitizer 似乎有很好的记录，它更专注于对坏指针的取消引用，所以这很公平。但其他检查也没有抓住它：-/

**编辑**：我问这个问题的部分原因是这些`-fsanitize`标志可以*动态*检查生成的代码中的明确性。这是他们应该抓住的东西吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-25T05:45:12.670

不指向数组的指针的指针算术是未定义的行为。
此外，取消引用 NULL 指针是未定义的行为。

```
char *c = NULL;
c--; 
```

是未定义的行为，因为`c`不指向数组。

**C++11 标准 5.7.5：**

> 当具有整数类型的表达式被添加到指针或从指针中减去时，结果具有指针操作数的类型。如果指针操作数指向数组对象的元素，并且数组足够大，则结果指向与原始元素偏移的元素，使得结果和原始数组元素的下标之差等于积分表达式。换句话说，如果表达式 P 指向数组对象的第 i 个元素，则表达式 (P)+N（等效于 N+(P)）和 (P)-N（其中 N 的值为 n）指向分别指向数组对象的第 i + n 个和第 i - n 个元素，前提是它们存在。此外，如果表达式 P 指向数组对象的最后一个元素，则表达式 (P)+1 指向数组对象的最后一个元素，如果表达式 Q 指向数组对象的最后一个元素，则表达式 (Q)-1 指向数组对象的最后一个元素。如果指针操作数和结果都指向同一个数组对象的元素，或者超过数组对象的最后一个元素，则计算不应产生溢出；否则，行为未定义。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-07-31T19:59:02.813

是的，这是未定义的行为，`-fsanitize=undefined`应该被抓住；它已经在我的 TODO 列表中添加一个检查。

FWIW，这里的 C 和 C++ 规则略有不同：添加`0`一个空指针并从另一个空指针中减去一个空指针在 C 中具有未定义的行为，但在 C++ 中没有。所有其他关于空指针的算术在两种语言中都有未定义的行为。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-08-04T21:03:35.387

不仅禁止空指针上的算术运算，而且捕获尝试取消引用以也捕获空指针上的算术的实现的失败大大降低了空指针陷阱的好处。

标准从未定义任何情况，向空指针添加任何内容都可以产生合法的指针值；此外，实现可以为此类操作定义任何有用行为的情况很少见，通常可以通过编译器内在函数 (*) 更好地处理。然而，在许多实现中，如果未捕获空指针算术，则向空指针添加偏移量会产生一个指针，该指针虽然无效，但不再*可识别*为空指针。取消引用此类指针的尝试不会被捕获，但可能会触发任意效果。

捕获 (null+offset) 和 (null-offset) 形式的指针计算将消除这种危险。请注意，保护不一定需要捕获 (pointer-null)、(null-pointer) 或 (null-null)，而前两个表达式返回的值不太可能有任何用处 [如果实现要指定null-null 将产生零，针对特定实现的代码有时可能比必须特殊情况的代码更有效`null`] 他们不会产生无效的指针。此外，使 (null+0) 和 (null-0) 产生空指针而不是捕获不会危及安全性，并且可以避免使用用户代码特殊情况空指针的需要，但是由于编译器的优点将不那么引人注目将不得不添加额外的代码来实现这一点。

(*) 例如，8086 编译器上的这种内在函数可能会接受无符号的 16 位整数“seg”和“ofs”，并在地址 seg:ofs 处读取字，即使地址恰好为零，也不会出现空陷阱. 8086 上的地址 (0x0000:0x0000) 是一些程序可能需要访问的中断向量，虽然地址 (0xFFFF:0x0010) 在只有 20 个地址线的旧处理器上访问与 (0x0000:0x0000) 相同的物理位置，但它访问具有 24 条或更多地址线的处理器上的物理位置 0x100000）。在某些情况下，另一种选择是对指针进行特殊指定，这些指针*预期*指向 C 标准无法识别的事物（诸如中断向量之类的事物将符合条件），并避免将它们捕获为空，或者指定`volatile`指针将以这种方式处理。我在至少一个编译器中看到了第一个行为，但我认为我没有看到第二个。

# java - 使用 Java 反射显示字段类型

> ID：15608367
> 
> 赞同：4
> 
> 时间：2013-03-25T05:41:07.557
> 
> 标签：java, class, reflection, types, field

我在 Java 中使用反射。

这是我的代码：

```
 public String getClassFields(Class aClass)
  {
  String ClassFields = "";
  Field[] Fields = aClass.getDeclaredFields();
  boolean isPublic;
  String separator = System.getProperty( "line.separator" );
  for (Field f : Fields) 
  {
    isPublic = Modifier.isPublic(f.getModifiers());
    if (isPublic)
        ClassFields += "public " + f.getType() + " " + f.getName() + separator;
    else
        ClassFields += "private " + f.getType() + " " + f.getName() + separator;
  }    
  return ClassFields; 
```

}

如果Class中的字段如下：

```
private int Diameter;
private Colour Colour; 
```

我在上面发布的代码返回以下内容：

```
private int Diameter
private class Colour Colour 
```

如何修改我的代码以从该行中删除额外的“类”字：

```
private class Colour Colour 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T05:45:30.687

现在，您将获得由以下提供的默认字符串表示形式[`Class#toString()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#toString%28%29)：

> 将对象转换为字符串。字符串表示是字符串“类”或“接口”，后跟一个空格，然后是类的完全限定名称，格式为`getName`. 如果此`Class`对象表示原始类型，则此方法返回原始类型的名称。如果此`Class`对象表示 void，则此方法返回“void”。

所以你想使用不同的方法来获取类的名称。改变

```
f.getType() 
```

至

```
((Class) f.getType()).getName()
// or
((Class) f.getType()).getSimpleName() 
```

* * *

旁注：不要在这样的循环中执行字符串连接。因为它每次都必须复制字符串，所以会导致二次 ( `O(n^2)`) 渐近运行时。改用 a [`StringBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)。

# java - 分两部分做for循环

> ID：15608369
> 
> 赞同：2
> 
> 时间：2013-03-25T05:41:11.980
> 
> 标签：java, for-loop, dry

你会如何在一个 for 循环中写这个

```
for (File file:files)
  {
    if (file.getName().endsWith(".dat"))   {
       Species x = reader.readSpecies(file);
       allSpecies.add(x);
       allGenes.addAll(x.getGenome());
    }
} 
for (File file:files){
     if (file.getName().endsWith(".dat")) {
       Species x = reader.readSpecies(file);
       x.setIndices(allGenes);
     }
} 
```

我希望它通过 for 循环运行一个段而不是下一个使用一个循环。这可能吗？如果不是，我写的代码是否违反了 DRY？

好的，到目前为止，没有人回答过我的问题。我希望代码通过整个第一个循环。然后是整个第二个循环。直到 allGenes.addAll 完成循环中的文件后，设置索引方法才会起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T05:43:50.383

它应该是

```
for (File file:files){
        if (file.getName().endsWith(".dat")){
            Species x = reader.readSpecies(file);                
            allSpecies.add(x);
            allGenes.addAll(x.getGenome());
            x.setIndices(allGenes);
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:43:58.040

```
if (file.getName().endsWith(".dat")){
    Species x = reader.readSpecies(file);
    x.setIndices(allGenes); // Take out this line from for loop 2 and put it inside for loop 1
    allSpecies.add(x);
    allGenes.addAll(x.getGenome());
} 
```

由于`if`两个`for`循环中的条件相同，因此您可以合并两者，只需将上述语句从 second 移动`for`到 first `for`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T05:57:14.500

只需将`x.setIndices(allGenes)`第二个循环中的添加到第一个循环之后`allGenes.addAll(x.getGenome())`

# mysql - 我需要帮助来确定我的删除语句有什么问题

> ID：15608371
> 
> 赞同：0
> 
> 时间：2013-03-25T05:41:18.980
> 
> 标签：mysql, sql

好的，我不断收到：

> 致命错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册以获取正确的语法：

我的删除语句如下所示：

```
"DELETE FROM tblSymbol WHERE UserID=$PersonID"."AND Symbol=$stock" 
```

有人看到我的删除语句有什么问题吗？我用对了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T05:43:57.213

首先，之前好像没有空间`AND`。

其次，您的代码容易受到 SQL 注入的影响。你不应该使用 $ 变量来构造你的语句。相反，使用`?`instead 和[prepared statements](http://php.net/manual/en/mysqli.prepare.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T05:43:03.860

在

```
"DELETE FROM tblSymbol WHERE UserID=$PersonID"."AND Symbol=$stock" 
```

当你连接它时，它看起来像这样：

```
DELETE FROM tblSymbol WHERE UserID=$PersonIDAND Symbol=$stock 
```

注意 AND 之前没有空格。

此外，请确保 $variables 被正确替换，因为 SQL 将期望正确的数据类型（数字或用引号括起来的字符串，或...）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T05:43:14.517

尝试这个

```
$query = 'DELETE * FROM tblSymbol WHERE UserID='.$PersonID.' AND Symbol='.$stock; 
```

或者，或者，

```
$query = 'DELETE * FROM tblSymbol WHERE UserID=$PersonID AND Symbol=$stock'; 
```

**编辑**：
请注意，我添加了`*`符号，意思是“删除符合条件的所有内容”

# ios - 等待异步执行的块的 iOS（或 RubyMotion）习语是什么？

> ID：15608375
> 
> 赞同：2
> 
> 时间：2013-03-25T05:41:41.607
> 
> 标签：ios, multithreading, asynchronous, sync, rubymotion

几个星期以来，我一直在为这个琐碎的问题而烦恼，但我找不到任何关于如何或做什么的信息或提示，所以我希望 RubyMotion 论坛上的某个人可以帮助我。

如果这有点长，请提前道歉，但需要一些设置才能正确解释问题。作为背景，我有一个使用在 Rails 应用程序中实现的 JSON/REST 后端的应用程序。这是非常简单的事情。后端工作正常，在某种程度上，前端也是如此。我可以调用在 RubyMotion 客户端中填充模型对象，一切都很好。

一个问题是所有 http/json 库在处理请求时都使用异步调用。这很好，我理解他们为什么这样做，但是在某些情况下我需要能够等待呼叫，因为我需要在继续下一步之前对返回的结果做一些事情。

考虑一个用户想要付款的例子，他们有一些保存的付款信息。在向用户提供付款选项列表之前，我想确保我在客户处拥有最新列表。所以我需要向用户对象上的一个方法发出请求，该方法将获取当前列表（或超时）。但我不想继续，直到我确定列表是最新的，或者对后端的调用失败。基本上，我希望这个调用阻塞（不阻塞 UI），直到返回结果。

诸如轮询更改或将更改从后端推送到前端等替代方案不适合这种情况。我还考虑过简单地从目标表单中提取数据（而不是将其推送到表单中），但这在这种特定情况下不起作用，因为我想根据用户是否有零个、一个或多个支付选项来做不同的事情保存。所以我需要提前知道push到下一个控制器，并且提前知道，我需要进行同步调用。

我的第一个攻击是创建一个共享实例（我们称之为 SyncHelper），我可以使用它来存储请求的返回结果以及“完成”状态。它可以提供一个等待方法，该方法只使用 CFRunLoopRunInMode 旋转，直到请求完成，或者直到请求超时。

SyncHelper 看起来有点像这样（我已经对其进行了编辑以删除一些不相关的内容）：

```
class SyncHelper
  attr_accessor :finished, :result, :error
  def initialize()
    reset
  end
  def reset
    @finished = false
    @result   = nil
    @error    = nil
  end
  def finished?
    @finished
  end
  def finish
    @finished = true
  end
  def finish_with_result(r)
    @result   = r
    @finished = true
  end
  def error?
    !@error.nil?
  end
  def wait
    timeout = 0.0
    while !self.finished? && timeout < API_TIMEOUT
      CFRunLoopRunInMode(KCFRunLoopDefaultMode, API_TIMEOUT_TICK, false)
      timeout = timeout + API_TIMEOUT_TICK
    end
    if timeout >= API_TIMEOUT && !self.finished?
      @error = "error: timed out waiting for API: #{@error}" if !error?
    end
  end
end 
```

然后我有一个像这样的辅助方法，它允许我通过将同步器实例提供给被调用的方法来使任何调用同步。

```
def ApiHelper.make_sync(&block)
  syncr = ApiHelper::SyncHelper.new
  BubbleWrap::Reactor.schedule do
    block.call syncr
  end
  syncr.wait
  syncr.result
end 
```

我希望做的是在任何地方都使用异步版本，但是在少数需要同步执行某些操作的情况下，我只需将调用包装在 make_sync 块周围，如下所示：

```
# This happens async and I don't care
user.async_call(...)
result = ApiHelper.make_sync do |syncr|
  # This one is async by default, but I need to wait for completion
  user.other_async_call(...) do |result|
    syncr.finish_with_result(result)
  end
end
# Do something with result (after checking for errors, etc)
result.do_something(...) 
```

重要的是，我希望能够将“同步”调用的返回值返回到调用上下文中，因此是“结果 = ...”位。如果我不能做到这一点，那么整件事对我来说也没多大用处。通过传入syncr，我可以调用它的finish_with_result，告诉任何监听异步任务已经完成的人，并将结果存储在那里供调用者使用。

我的 make_sync 和 SyncHelper 实现存在的问题（除了我可能在做一些非常愚蠢的事情这一显而易见的事实）是 BubbleWrap::Reactor.schedule 中的代码 do ... end 块没有被调用直到对 syncr.wait 的调用超时（注意：未完成，因为该块永远没有机会运行，因此无法将结果存储在其中）。它完全使所有其他进程无法访问 CPU，即使对 CFRunLoopRunInMode 的调用是在等待中发生的。我的印象是这个配置中的 CFRunLoopRunInMode 会旋转等待，但允许其他排队的块运行，但似乎我错了。

这让我觉得这是人们不时需要做的事情，所以我不能是唯一一个遇到这种问题的人。

我有太多疯狂的药丸吗？是否有一个标准的 iOS 习语来做这件事，我只是不理解？有没有更好的方法来解决这类问题？

任何帮助将非常感激。

提前致谢，

男@

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T00:59:50.317

当您需要显示支付选项时，显示一个 HUD，如 MBProgressHUD 以阻止用户使用 UI，然后开始您的网络呼叫。当网络调用返回时，在您的成功/失败块或委托方法中关闭 HUD，然后使用接收到的数据刷新您的视图。

如果您不喜欢 HUD 的想法，您可以在 UI 中显示适当的内容，例如带有“正在加载...”的 UILabel 或 UIActivityIndi​​catorView。

如果您需要首先显示数据，请在 viewDidAppear 中进行；如果它发生在某个操作上，则将您的转换移动到下一个视图（performSegueWithIdentifier 或其他）到您的网络成功块/回调中，并在调用该操作时进行网络调用。

您的网络库中应该有示例说明如何使用，或者查看 MBProgressHUD 本身[https://github.com/jdg/MBProgressHUD](https://github.com/jdg/MBProgressHUD)中的使用示例代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T00:20:03.427

这是我进行多线程同步异步调用的方法。

```
def make_sync2(&block)
  @semaphore ||= Dispatch::Semaphore.new(0)
  @semaphore2 ||= Dispatch::Semaphore.new(1)
  BubbleWrap::Reactor.schedule do
    result = block.call("Mateus")
    @semaphore2.wait # Wait for access to @result
    @result = result
    @semaphore.signal
  end
  @semaphore.wait # Wait for async task to complete
  result = @result
  @semaphore2.signal
  result
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-24T06:13:15.940

您还可以使用同步队列。

```
Dispatch::Queue.new('name').sync

Dispatch::Queue.main.sync 
```

看看更多使用示例：http: [//blog.arkency.com/2014/08/concurrent-patterns-in-rubymotion/](http://blog.arkency.com/2014/08/concurrent-patterns-in-rubymotion/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T09:41:13.243

正如 borrrden 刚才所说，我会使用 dispatch_semaphore

```
 def ApiHelper.make_sync(&block)
   @semaphore = Dispatch::Semaphore.new(0)
   BubbleWrap::Reactor.schedule do
     # do your stuff
     @result = block.call()
     @semaphore.signal
   end
   @semaphore.wait
   @result
 end 
```

这就是我在 Rubymotion 上的处理方式

# javascript - 检索多条记录 OData java 脚本 Microsoft Dynamics CRM

> ID：15608377
> 
> 赞同：3
> 
> 时间：2013-03-25T05:41:51.810
> 
> 标签：javascript, dynamics-crm-2011

我正在使用以下 java 脚本代码按帐户 ID 检索联系人。我设置了警报消息调试。它没有进入成功回调消息功能。

以以下错误结束

> 检索“error”时出错：{“lang”：“en-US”，“Value”：“位置 20 处的语法错误'\ufffd'。” }

我正在使用以下代码。

```
function retrieveMultiple(odataSetName, select, filter, successCallback) {
    var serverUrl = Xrm.Page.context.getServerUrl();
    var ODATA_ENDPOINT = "/XRMServices/2011/OrganizationData.svc";
    var odataUri = serverUrl + ODATA_ENDPOINT + "/" + odataSetName + "?";

    alert("retrieveMultiple"+odataUri);

    if (select) {
        odataUri += "$select=" + select + "&";
        alert("select error="+odataUri);
    }

    if (filter) {
       odataUri += "$filter=" + filter;
       alert("filter error="+odataUri);
    }

    $.ajax({
       type: "GET",
       contentType: "application/json; charset=utf-8",
       datatype: "json",
       url: odataUri,
       beforeSend: function (XMLHttpRequest) {
           //Specifying this header ensures that the results will be returned as JSON.
           var x = XMLHttpRequest.setRequestHeader("Accept", "application/json");
           alert(" in Ajax :beforeSend:" + x );
       },
       success: function (data, textStatus, XmlHttpRequest) {
           alert("In success function outside success");

           if (successCallback) {
               alert("successCallback in if");

               if (data && data.d && data.d.results) {
                   alert("data && data.d && data.d.results"+data + data.d + data.d.results);
                   successCallback(data.d.results, textStatus, XmlHttpRequest);
                   alert("data.d.results, textStatus, XmlHttpRequest" + data.d.results + textStatus +       XmlHttpRequest);
                }
                else if (data && data.d) {
                     successCallback(data.d, textStatus, XmlHttpRequest);
                }
           else {
               successCallback(data, textStatus, XmlHttpRequest);
           }
       }
    },
    error: function (XmlHttpRequest, textStatus, errorThrown) {
        alert(" In erro function");

        if (XmlHttpRequest && XmlHttpRequest.responseText) {
           alert(" In error function If");
           alert("Error while retrieval ; Error – " + XmlHttpRequest.responseText);
        }
    }
});
}

function readRecordsOnSuccess(data, textStatus, XmlHttpRequest) {
    // Loop through the retrieved records
    for (var indx = 0; indx < data.length; indx++) {
         alert("Name – " + data[indx].name);
    }
}

function retrieveContactsByAccountId() {
    // Pass ‘Contact’ set name since we are reading Contacts
    var oDataSetName = "ContactSet";

    // Column names of ‘Contact’ (Pass * to read all columns)
    var columns = "FirstName";

    // Read Account Guid
    var accountId = Xrm.Page.data.entity.getId()

    // Prepare filter
    var filter = "AccountId/Id eq guid’" + accountId + "‘";

    alert("retrieveContactsByAccountId"+filter);

    retrieveMultiple(oDataSetName, columns, filter, readRecordsOnSuccess);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:24:40.147

看起来像常见的错误类型；）请注意您传递的以下字符串：

```
var filter = "AccountId/Id eq guid’" + accountId + "‘"; 
```

您的撇号与通常[的撇号](http://www.fileformat.info/info/unicode/char/27/index.htm)[不同](http://www.fileformat.info/info/unicode/char/2019/index.htm)

您需要使用常规`'`

```
var filter = "AccountId/Id eq guid'" + accountId + "'"; 
```

# jsp - 为什么我的文本框值没有在使用 struts 的动作类中起作用？我正在获取密码字段的值，但不是文本字段

> ID：15608378
> 
> 赞同：1
> 
> 时间：2013-03-25T05:41:56.390
> 
> 标签：jsp, servlets, struts, jsp-tags, jspinclude

这是我的动作类，我正确定义了 struts.xml，我的问题是，我得到 textBox 用户名值 NULL，但其他输入正在返回该值。我正在添加 User.java 类，Struts ActionClass。

```
public class UserLogin extends ActionSupport {
User user = new User();
public String getAccess() {  
  System.out.println(user.getPassword()+"and"+user.getUserName()); 
 // output: xyz and null
  if (user.getPassword().equals("pass")){
    System.out.println(user.getUserName());
            return "success";
} else{
    return "input";
}
}

public User getModel() {

return user;
}
} 
```

我的**jsp**页面是：

```
<form action="login">
UserName:<input type="text" name="userName"/>
Password:<input type="password" name="password"/>
<input type="submit" value="login"/>
</form> 
```

**用户.java**

```
public User {

private String userName;
private String password;

public String getUserName(){
return userName;
} 
public void setUserName(String userName) {
this.userName = userName;
}
public String getPassword(){
return password;
} 
public void setPassword(String password) {
this.password= password;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T06:39:12.667

用于`Jsp taglib`获取用户输入，使用以下 JSp 表单将此代码放入您的`login.jsp`文件中。

```
<%@ page contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="s" uri="/struts-tags"%>
<html>
<head>
<title>LogIn</title>
</head>

<body>
<s:form action="login" method="get">
 <s:textfield name="userName" key="Username" size="20" />
<s:password name="password"  key="Password" size="20" />
<s:submit method="getAccess" align="center"/>
</s:form>
</body>
</html> 
```

如果以下行

```
 <%@ taglib prefix="s" uri="/struts-tags"%> 
```

给出错误然后下载 jsp 标签 lib jar 并放入您的 lib 文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T06:33:36.787

在您的操作中定义属性`userName`及其`password`getter 和 setter 方法。

只需使用`getUserName()`and`getPassword()`而不是`user.getUserName()`and `user.getPassword()`。

Action 表单可以通过这些属性读取浏览器中提交的值。您必须分配给`user`对象的那些属性，然后您可以从`user`对象中使用它们。

# ruby-on-rails - 如何将设计登录路径重定向到不同的控制器和视图？注意：这是在身份验证发生之前

> ID：15608381
> 
> 赞同：0
> 
> 时间：2013-03-25T05:42:01.353
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

现在，在我的应用程序中，用户可以在`/users/sign_in`. 但我宁愿让他们在同一个地方登录并注册，这样我就已经在`/home/all`. 话虽如此，我如何确保每次用户去`/users/sign_in`或`/users/sign_up`他们被重定向到`/home/all`？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:57:05.593

您可以通过覆盖设计的默认路由来做到这一点，

```
 get "/users/sign_up" => 'home#all'
 get "/users/sign_in" => 'home#all' 
```

将其写入之前的路线文件中的行**devise_for :users**。

每当请求来自 /users/sign_up/ 或 /users/sign_in/ 时，它将由 home#all 处理

# linux - 设置变量 Linux

> ID：15608387
> 
> 赞同：0
> 
> 时间：2013-03-25T05:42:57.850
> 
> 标签：linux, shell, ubuntu

我是 linux shell 脚本的新手，我正在尝试设置以下变量来获取从键盘传入的文件夹路径的大小。我不断收到错误消息，提示选项无效。吨

谁能告诉我我做错了什么？当我删除“大小”变量并保持原样时，错误消失了。

谢谢！

```
#!/bin/bash 
echo -e "\nEnter the first directory (relative path)"
read dir1

size=find $dir1 -type f | wc -l 

 echo $size 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T05:44:38.677

它应该是：

```
size=$(find $dir1 -type f | wc -l) 
```

使用该`$()`符号意味着应该运行命令并将其输出放在行上。

这是因为变量被分配了文字文本值。

```
myvar=foo 
```

会将字符串“foo”放入`myvar`而不是变量 foo 的值或 foo 命令的结果。

```
myvar=$foo 
```

将变量的值`foo`放入`myvar`. 和

```
myvar=$(foo) 
```

将运行命令的结果`foo`放入 myvar。

shell 语法的一个特殊部分允许您在运行命令之前分配变量值，并且这些变量值仅针对该命令设置。它看起来像这样：

```
x=foo1 y=foo2 command parameter ... 
```

你写台词的方式

```
size=find $dir1 -type f | wc -l 
```

`size`被赋值为“find”，然后

```
$dir1 -type f  # this won't be a valid command 
```

作为单独的命令执行。

# java - 您如何将 JMenu 的弹出窗口居中？

> ID：15608395
> 
> 赞同：1
> 
> 时间：2013-03-25T05:43:16.477
> 
> 标签：java, swing, alignment, center, jmenu

我正在尝试将 JMenu 的弹出窗口居中，这样我就可以在 JPanel 上使用它并且它看起来不会关闭。这是一些演示我正在尝试做的代码：

```
import javax.swing.*;

public class Menu extends JMenu{

public static void main(String[] args) {        
    JFrame f = new JFrame("Menu Test");
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    JMenuBar menuBar = new JMenuBar();
    menuBar.add(new Menu());

    JPanel background = new JPanel();
    background.add(menuBar);
    f.setContentPane(background);

    f.setSize(250, 100);
    f.setLocationRelativeTo(null);
    f.setVisible(true);
}

public Menu() {
    super("I'm a Menu");

    add(new JMenuItem("Can This Popup be Centered?"));
    add(new JMenuItem("Not To the Right?"));
}
} 
```

这是当前的输出

![这是输出的图像](../Images/77b8ae4f01a057717bb50113722b6ff1.png "输出")

这就是我想要的（或接近的）

![这是（接近）我想要的](../Images/6d71510280b25b41855a6e61f9d2101f.png "想")

如果有比使用 JMenu 更好的方法，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:12:07.857

我想出了答案。我重写 processMouseEvent 以了解何时单击菜单，而不是简单地设置弹出菜单相对于菜单位置的位置。

```
 @Override
    protected void processMouseEvent(MouseEvent e) {
        super.processMouseEvent(e);
        if(e.getID() == MouseEvent.MOUSE_PRESSED)
            getPopupMenu().setLocation(
                getLocationOnScreen().x+getWidth()/2-getPopupMenu().getWidth()/2,
                getLocationOnScreen().y+getHeight());
} 
```

# c++ - 在 C++ 中实现全局应用程序设置

> ID：15608398
> 
> 赞同：4
> 
> 时间：2013-03-25T05:43:38.300
> 
> 标签：c++, configuration, singleton, global-variables, application-settings

我有一个比较大的学术模拟软件（50个班）。用户选择一个包含 20 多个项目的配置文件。这些常量变量在整个仿真平台（几乎在每个类中）都使用。模拟每秒运行数十万个代理对象几次，因此性能很重要。

目前我使用单例设置类。我使用该实例在程序启动时从文件中读取值到类中（我不想在每个其他类中添加对设置类的引用）。

1- 我最近运行了一个分析器，发现对 getInstance().getSomeSetting() 的过度调用正在影响性能。

2- 每次我谈到单例使用时，都会受到很多谴责。

在这种情况下访问设置的最佳做法是什么？我应该为这 20 多个配置项使用全局变量吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:04:06.827

您可以将配置对象保存在 shared_ptr 中并将其传递到您想要的任何地方，这样您将拥有一个设置对象

# isabelle - 如何删除 Isabelle 中的重复子目标？

> ID：15608399
> 
> 赞同：4
> 
> 时间：2013-03-25T05:43:39.710
> 
> 标签：isabelle

在 Isabelle 中，有时会遇到重复子目标的情况。例如，想象以下证明脚本：

```
lemma "a ∧ a"
  apply (rule conjI) 
```

有目标：

```
proof (prove): step 1

goal (2 subgoals):
 1\. a
 2\. a 
```

有没有办法就地消除重复的子目标，所以不需要重复证明？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T05:43:39.710

`distinct_subgoals_tac`删除重复子目标中的 ML 级别策略`Pure/tactic.ML`，可按如下方式使用：

```
lemma "a ∧ a"
  apply (rule conjI)
  apply (tactic {* distinct_subgoals_tac *}) 
```

离开：

```
proof (prove): step 2

goal (1 subgoal):
 1\. a 
```

不幸的是，似乎没有办法不进入 ML 世界。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-30T23:50:04.710

我遇到了类似的行为，作为应用于任何定理的方法的副作用`subst`，例如`refl`. 然后`apply (subst refl)`确实删除重复的子目标。

这不是一个错误，这是一个功能 ;-）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-31T20:46:34.120

添加到 davidg 的答案，如果一个人不想使用`tactic`任何原因，很容易`distinct_subgoals_tac`变成一种方法：

```
method_setup distinct_subgoals =
  ‹Scan.succeed (K (SIMPLE_METHOD distinct_subgoals_tac))›

lemma P and P and P
  (* here there are three goals P *)
  apply distinct_subgoals
  (* now there is only one goal P *) 
```

# visual-c++ - 替换 system() 以运行在后台不打开 cmd 窗口的 .exe 文件

> ID：15608407
> 
> 赞同：1
> 
> 时间：2013-03-25T05:44:06.710
> 
> 标签：visual-c++, visual-studio-2005, cmd

我的系统中安装了 Visual Studio 2005 和 Win 7。在 c++ 中，我使用 URLDownloadToFile() 从本地服务器下载 .exe。下载后我需要运行这个 .exe 文件。我可以使用 system("path to the .exe file") 来做到这一点，但它会在后台打开一个 cmd 窗口。谁能告诉我我可以使用什么其他方法来替换不会在后台打开 cmd 窗口的 system() 。

我也尝试过以下方法

```
 1\. ShellExecute(NULL,(LPCWSTR) "explore",(LPCWSTR) "C:/Users/ay\\AppData/Roaming/path-here/file.exe", NULL, NULL, SW_SHOWNORMAL);
 2\.     LPTSTR szCmdline = _tcsdup(TEXT("C:\\Users\\ay\\AppData\\Roaming\\path-here\\file.exe -L -S"));
        CreateProcess(NULL, szCmdline,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL); 
```

但是这些命令都不能开始运行我的 .exe 文件。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:41:46.810

下载成功后，请尝试以下解决方案。

```
CString exeFileName;
ShellExecute(NULL, _T("open"), exeFileName.GetBuffer(), NULL, sExePresentInDirectory, SW_SHOWNORMAL);

exeFileName.ReleaseBuffer(); 
```

我试过了，效果很好。

如需更多帮助，请参阅[此](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153%28v=vs.85%29.aspx)。

# python - PyPy 可以在一个进程中使用多个 CPU 吗？

> ID：15608411
> 
> 赞同：0
> 
> 时间：2013-03-25T05:44:17.900
> 
> 标签：python, pypy, gil

CPython中有一个GIL，听说PyPy没有这个问题。这是真的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T08:03:16.533

不，PyPy 仍然有 GIL。Jython 和 IronPython 没有。但是，有努力用 STM 替换它，有关详细信息，请参阅[http://pypy.org/tmdonate.html](http://pypy.org/tmdonate.html)。

# primefaces - 我怎样才能调整宽度 在 ?

> ID：15608414
> 
> 赞同：5
> 
> 时间：2013-03-25T05:44:21.420
> 
> 标签：primefaces

我对所有列都使用了宽度属性，但在显示中，列没有调整。

我可以这样吗？如果，请指导我实现我想要的列宽。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-09T07:19:58.883

您必须使用 columnClasses 属性并用逗号（，）分隔每个列样式。下面的代码示例展示了如何使用 columnClassess 属性。

在头部标签中：

```
<style type="text/css">
            .column1{width: 10px;height:auto}
            .column2{width: 5px;height:auto}
            .column3{width: 20px;height:auto}
           </style> 
```

在正文标签中：

```
<p:panelGrid columnClasses="column1,column2,column3" columns="4" style="width: 100%" >  
                    <p:column></p:column>                        
                    <p:column></p:column>
                    <p:column></p:column> 
                    <p:column></p:column> 
                </p:panelGrid> 
```

它也适用于 h:panelGrid 标签。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-25T09:03:15.543

您可以使用硬编码值：

```
<p:column style="width:20px"> 
```

或百分比：

```
<p:column style="width:20%"> 
```

取决于什么最适合你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-20T15:44:41.740

[我建议您使用primefaces show](http://www.primefaces.org/showcase/ui/panel/grid.xhtml)中描述的 ui-grid-col css 类。其中 12 = 100%

```
<div class="ui-grid ui-grid-responsive">
 <div class="ui-grid-row">
  <div class="ui-grid-col-2">
     <h:outputText value="To :" />
  </div>    
  <div class="ui-grid-col-4">
      <h:outputText value="#{bean.name}" />
  </div> 
</div>
<div class="ui-grid-row">
   <div class="ui-grid-col-2">
    <h:outputText value="Address :" />
  </p:column>  
  <div class="ui-grid-col-4">
    <p:outputLabel value="#{bean.address}" />  
  </div>
</div> 
```

# kendo-ui - 具有安全性的剑道 ui 菜单 - mvc4

> ID：15608417
> 
> 赞同：2
> 
> 时间：2013-03-25T05:44:45.590
> 
> 标签：kendo-ui

我需要一种通过剑道用户界面添加菜单的方法..但菜单需要能够只为某些用户显示某些菜单项......即管理员应该看到所有菜单，而其他员工只能看到一个子集那些菜单......我怎样才能使用授权属性来实现这一点？任何代码示例或链接都会非常有帮助

谢谢

VB

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:07:18.480

Kendo UI 开箱即用地支持这一点。只需将 Authorize 属性添加到您的操作并使用 Kendo 服务器端包装器：

```
@(Html.Kendo().Menu()
    .Name("menu")
    .Items(items =>
    {
        items.Add()
            .Text("Home")
            .Action("Index", "Home");
     })
) 
```

[http://www.kendoui.c​​om/forums/ui/menu/binding-to-sitemap-with-security-trimming-on-roles.aspx](http://www.kendoui.com/forums/ui/menu/binding-to-sitemap-with-security-trimming-on-roles.aspx)

[http://docs.kendoui.c​​om/api/wrappers/aspnet-mvc/Kendo.Mvc.UI.Fluent/MenuBuilder](http://docs.kendoui.com/api/wrappers/aspnet-mvc/Kendo.Mvc.UI.Fluent/MenuBuilder)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:59:37.913

由于 MVC 是基于约定的，因此您需要确保通过 url 阻止控制器访问除了隐藏菜单之外

您需要设置一个自定义提供程序，以便您可以更轻松地使用角色，然后您需要将菜单放入动态构建菜单的局部视图中。

我四处寻找，找到了一个很好地解释它的网站，我认为：

自定义提供者： [http ://techbrij.com/custom-roleprovider-authorization-asp-net-mvc](http://techbrij.com/custom-roleprovider-authorization-asp-net-mvc)

基于角色的菜单： [http ://techbrij.com/role-based-menu-asp-net-mvc](http://techbrij.com/role-based-menu-asp-net-mvc)

# python - 读取fortran未格式化文件时记录标记不一致

> ID：15608421
> 
> 赞同：2
> 
> 时间：2013-03-25T05:45:02.213
> 
> 标签：python, fortran

我正在尝试使用 python 读取一个非常大的 Fortran 无格式二进制文件。该文件包含 2^30 个整数。

我发现记录标记令人困惑（第一个是-2147483639），无论如何我已经实现了恢复数据结构（那些想要的整数都是相似的，因此与记录标记不同）并编写下面的代码（借助[here](https://stackoverflow.com/questions/14985311/writing-fortran-unformatted-files-with-python)）。

但是，我们可以看到每条记录的开头和结尾的标记并不相同。这是为什么？

是因为数据的大小太长（ 536870910 = (2^30 - 4) / 2 ）？但是 (2^31 - 1) / 4 = 536870911 > 536870910。

还是只是数据文件的作者犯了一些错误？

另一个问题，记录开头的标记类型是什么，int 还是 unsigned int？

```
fp = open(file_path, "rb")

rec_len1, = struct.unpack( '>i', fp.read(4) )
data1 = np.fromfile( fp, '>i', 536870910)
rec_end1, = struct.unpack( '>i', fp.read(4) )

rec_len2, = struct.unpack( '>i', fp.read(4) )
data2 = np.fromfile( fp, '>i', 536870910)
rec_end2, = struct.unpack( '>i', fp.read(4) )

rec_len3, = struct.unpack( '>i', fp.read(4) )
data3 = np.fromfile( fp, '>i', 4)
rec_end3, = struct.unpack( '>i', fp.read(4) )
data = np.concatenate([data1, data2, data3])

(rec_len1,rec_end1,rec_len2,rec_end2,rec_len3,rec_end3) 
```

这是读取的记录长度值，如上所示：

```
(-2147483639, -2176, 2406, 589824, 1227787, -18) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:31:37.077

最后，事情似乎更清楚了。

[这](http://software.intel.com/sites/products/documentation/doclib/stdxe/2013/composerxe/compiler/fortran-win/index.htm#GUID-64D43E4C-68E7-4C48-8B50-B49F1F7DA46C.htm)是英特尔 Fortran 编译器用户和参考指南，请参阅*记录类型：可变长度记录*部分。

> 对于大于 2,147,483,639 字节的记录长度，该记录分为子记录。子记录的长度可以是 1 到 2,147,483,639，包括 1 到 2,147,483,639。
> 
> 前导长度字段的符号位指示记录是否继续。尾随长度字段的符号位表示存在前面的子记录。符号位的位置由文件的字节序格式决定。
> 
> 连续的子记录具有符号位值为 1 的前导长度字段。组成记录的最后一个子记录具有符号位值为 0 的前导长度字段。具有前面子记录的子记录具有尾随长度符号位值为 1 的字段。组成记录的第一个子记录具有符号位值为 0 的尾随长度字段。如果符号位的值为 1，则记录的长度存储在*两个-补符号*。

写了很多文章后，我意识到我被*二进制补码符号*误导了，记录标记只是根据上面的规则改变符号，而不是在符号位为 1 时更改为*二进制补码符号*。无论如何，我的也有可能数据是用不同的编译器创建的。

下面是解决方案。

数据大于2GB，因此分为几个子记录。正如我们看到的第一个记录开始标记是 -2147483639，所以第一个记录的长度是 2147483639，这正是子记录的最大长度，而不是我认为的 2147483640，也不是 2147483638 的*二进制补码符号*-2147483639。

如果我们跳过 2147483639 字节来读取记录结束标记，您将得到 2147483639，因为它是结束标记为正的第一个子记录。

以下是检查记录标记的代码：

```
fp = open(file_path, "rb")
while 1:
    prefix, = struct.unpack( '>i', fp.read(4) )
    fp.seek(abs(prefix), 1)    #or read |prefix| bytes data as you want
    suffix, = struct.unpack( '>i', fp.read(4) )
    print prefix, suffix
    if abs(suffix) - abs(prefix): 
        print "suffix != prefix!"
        break
    if prefix > 0: break 
```

和丝网印刷

```
-2147483639 2147483639
-2147483639 -2147483639
18 -18 
```

我们可以看到记录开始标记和结束标记除了符号之外总是相同的。三个记录的长度分别是2147483639、2147483639、18个字节，不一定是4的倍数。所以第一个记录以某个整数的前3个字节结束，第二个记录从剩下的1个字节开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:08:44.743

由于这个问题似乎经常出现.. 这是一个 python 实用程序代码，用于扫描二进制文件并确定它是否（可能是）fortran 未格式化的顺序访问文件。它通过尝试几种标题格式来工作。当然，由于“未格式化”格式不是标准的，可能还有其他变体，但这应该是最常见的。

请注意左括号已转义，因此您可能需要更改 & #060; 如果您屏幕复制此内容，则返回“小于”符号。

```
 def scanfbinary(hformat,file,fsize):
 """ scan a file to see if it has the simple structure typical of
     an unformatted sequential access fortran binary:
     recl1,<data of length recl1 bytes>,recl1,recl2,<data of length recl2 bytes>,recl2 ...
 """
 import struct
 print 'scan type',hformat,
 if 'qQ'.find(hformat[1])>=0:  hsize=8
 elif 'iIlL'.find(hformat[1])>=0:  hsize=4
 if hformat[0] == '<':  endian='little'
 elif hformat[0] == '>':  endian='big'
 print '(',endian,'endian',hsize,'byte header)',
 f.seek(0)
 nrec = 0
 while fsize > 0:
  h0=struct.unpack(hformat,f.read(hsize))[0]
  if h0 < 0 :   print 'invalid integer ',h0; return 1
  if h0 > fsize - 2*hsize:
   print 'invalid header size ',h0,' exceeds file size ',fsize
   if nrec > 0:print 'odd perhaps a corrupe file?'
   return 2
# to read the data replace the next line with code to read h0 bytes..
# eg 
#  import numpy
#  dtype = numpy.dtype('<i')
#  record=numpy.fromfile(f,dtype,h0/dtype.itemsize) 
  f.seek(h0,1)   
  h=struct.unpack(hformat,f.read(hsize))[0]
  if h0!=h :  print 'unmatched header';   return 3
  nrec+=1
  if nrec == 1:print
  if nrec < 10:print 'read record',nrec,'size',h
  fsize-=(h+2*hsize)
 print 'successfully read ',nrec,' records with unformatted fortran header type',hformat
 return 0
f=open('binaryfilename','r')
f.seek(0,2)
fsize=f.tell()
res=[scanfbinary(hformat,f,fsize) for hformat in ('<q','>q','<i','>i')]
if res.count(0)==0:
 print 'no match found, file size ',fsize, 'starts..'
 f.seek(0)
 for i in range(0,12): print f.read(2).encode('hex_codec'),
 print 

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T07:08:08.563

我发现使用 f2py 是 python 访问 fortran 数据的一种更方便的方式。然而，记录标记的奇怪行为仍然是一个问题。至少我们可以避免深入（有时令人困惑）fortran 无格式文件结构。它与 numpy 很好地匹配。

F2PY 用户指南和参考手册在[这里](http://cens.ioc.ee/projects/f2py2e/usersguide/)。这是一个用于打开和关闭文件、读取整数一维数组和浮点二维数组的示例 fortran 源文件。注意注释以 !f2py 开头，它们有助于使 f2py 更“聪明”。

要使用它，您需要将其包装到一个模块中并导入到 python 会话中。然后你可以像那些 python 函数一样调用这些函数。

```
!ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
!cc                                                         cc
!cc      FORTRAN MODULE for PYTHON PROGRAM CALLING          cc
!cc                                                         cc
!ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc

!Usage: 
!   Compile:   f2py -c fortio.f90 -m fortio
!   Import:    from fortio import *
!       or     import fortio
!Note:
!   Big endian: 1; Little endian: 0

!cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
SUBROUTINE open_fortran_file(fileUnit, fileName, endian, error)
  implicit none

  character(len=256) :: fileName
  integer*4 :: fileUnit, error, endian
  !f2py integer*4 optional, intent(in) :: endian=1
  !f2py integer*4 intent(out) :: error

  if(endian .NE. 0) then
     open(unit=fileUnit, FILE=fileName, form='unformatted', status='old', &
          iostat=error, convert='big_endian')
  else
     open(unit=fileUnit, FILE=fileName, form='unformatted', status='old', &
          iostat=error)
  endif
END SUBROUTINE 

!cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
SUBROUTINE read_fortran_integer4(fileUnit, arr, leng)
  implicit none

  integer*4 :: fileUnit, leng
  integer*4 :: arr(leng)
  !f2py integer*4 intent(in) :: fileUnit, leng 
  !f2py integer*4 intent(out), dimension(leng), depend(leng) :: arr(leng)

  read(fileUnit) arr
END SUBROUTINE

!cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
SUBROUTINE read_fortran_real4(fileUnit, arr, row, col)
  implicit none

  integer*4 :: fileUnit, row, col
  real*4 :: arr(row,col)
  !f2py integer*4 intent(in):: fileUnit, row, col
  !f2py real*4 intent(out), dimension(row, col), depend(row, col) :: arr(row,col)

  read(fileUnit) arr
END SUBROUTINE

!cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
SUBROUTINE close_fortran_file(fileUnit, error)
  implicit none

  integer*4 :: fileUnit, error
  !f2py integer*4 intent(in) :: fileUnit
  !f2py integer*4 intent(out) :: error

  close(fileUnit, iostat=error)
END SUBROUTINE 
```

# c++ - 为什么我的 C++ 递归下降解析器只适用于几台计算机？

> ID：15608423
> 
> 赞同：-3
> 
> 时间：2013-03-25T05:45:13.140
> 
> 标签：c++, windows-xp, codeblocks

出于某种原因，我的程序似乎无法在使用 Code Blocks 12.11 的计算机或使用 VMware 的教授计算机上运行，​​但它在两个使用 Visual C++ 2012 的同学计算机上运行良好。因为我的计算机在Windows XP，我不能使用 Visual C++ 2012 甚至 2010，所以我必须使用代码块。我的程序旨在从文件中读取字符串列表并检查这些字符串是否符合 BNF 语法。

从来没有打印过错误。该程序编译得很好，但在我或我教授的计算机上运行时没有输出。

编辑：预期的输出应该是它要求文本文件的名称来读取它。然后，对于文件中的每个字符串，程序应该输出该字符串是否使用该语言。如果文件不存在，则程序输出“操作失败”。取而代之的是，程序直接进入“按任意键终止”，这只是假设显示程序何时已经完成运行。

```
/* This is a recursive descent parser that uses the following productions. The
   '||' operator stands for concatenation. The '|' operator for alternatives.

P_statement -> P_Identifier = P_Expression | P_Expression
P_Expression -> P_Term + P_Expression | P_Term - P_Expression | P_Term
P_Term -> P_Factor * P_Term | P_Factor / P_Term | P_Factor
P_Factor -> P_Exponential ^ P_Factor | P_Exponential
P_Exponential -> P_Identifier | L | UI | UL | (P_statement)
P_Unary -> + | - | !
P_Identifier -> P_Character | P_Character||P_Identifier
P_Character -> a | b | ... | y | z
P_Number -> P_Digit | P_Digid||P_Number
P_Digit -> 0 | 1 | ... | 8 | 9
*/

#include <iostream>
#include <string>
#include <fstream>

using std::cout;
using std::cin;
using std::endl;
using std::ifstream;
using std::ios;
using std::ofstream;
using std::string;

// The functions that test whether the current string matches a particular
// production, hence the 'P_' prefix.
bool P_statement(void);
bool P_Expression(void);
bool P_Term(void);
bool P_Factor(void);
bool P_Exponential(void);
bool P_Unary(void);
bool P_Identifier(void);
bool P_Character(void);
bool P_Number(void);
bool P_Digit(void);

string s;

int main(){
   string mystr;
   cout << "What is your text file? ";
   cin >> mystr;
   ifstream input(mystr.c_str());

   if(input.is_open()){
      while(input.good()){
         getline(input, s);
         string C = s;
         if (P_statement() && s == ""){
            cout << "The string \"" << C << "\" is in the language." <<endl;
         }
         else {
            cout << "The string \"" << C << "\" is not in the language." <<endl;
         }
      }
      input.close();
   }
   else cout << "Operation failed" << endl;

   return 0;
}

bool P_statement(void) {

   if (P_Identifier()) {
      if (s[0] == '=') {
         s = s.substr(1);
         if (P_Expression()) {
            return true;
         }
      }
      s = s.substr(1);
   }
   if(P_Expression()){
      return true;
   }
   return false;
}

bool P_Expression(void) {

  if (P_Term()) {
     if (s[0] == '+' || s[0] == '-') {
         s = s.substr(1);
         if (P_Expression()) {
            return true;
         }
     }
     return true;
  }
  return false;
}

bool P_Term(void) {

   if(P_Factor()){
      if (s[0]=='*' || s[0]=='/'){
         s = s.substr(1);
         if (P_Term()) {
            return true;
         }
      }
      return true;
   }
   return false;
}

bool P_Factor(void){
   if (P_Exponential()) {
      if (s[0] == '^') {
         s = s.substr(1);
         if (P_Factor()) {
            return true;
         }
      }
      return true;
   }
   return false;
}

bool P_Exponential(void){
   if(P_Identifier()){
      return true;
   }
   else if(P_Number()){
      return true;
   }
   else if(P_Unary()){
      if (P_Identifier()){
         return true;
      }
      else if(P_Number()){
         return true;
      }
   }
   else if (s[0] == '(') {
      s = s.substr(1);
      if (P_statement()) {
         if (s[0] == ')') {
            s = s.substr(1);
            return true;
         }
      }
   }
   return false;
}

bool P_Unary(void){
   if (s[0] =='+' || s[0]=='-' || s[0]=='!'){
      s = s.substr(1);
      return true;
   }
   return false;
}

bool P_Identifier(void) {
   if(P_Character()) {
      if(P_Identifier()){
         return true;
      }
      return true;
   }
   return false;
}

bool P_Character(void){
   if ('a' <= s[0] && s[0] <= 'z') {
      s = s.substr(1);
      return true;
   }
   return false;
}

bool P_Number(void) {
   if(P_Digit()){
      if(P_Number()){
         return true;
      }
      return true;
   }
   return false;
}

bool P_Digit(void){
   if ('0' <= s[0] && s[0] <= '9') {
      s = s.substr(1);
      return true;
   }
   return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T06:20:14.343

您的测试函数有副作用，并且您继续对全局字符串`s`. 您使用数组索引到字符串中而不检查它有多长。你几乎肯定会得到未定义的行为。这可能是平台之间差异的来源。

然而，真正的问题是你的代码不清楚，不值得弄清楚它到底做了什么。

更新：

你说“没有打印错误”和“它没有输出”。由于代码块上的标准库行为不同，这可能就像不刷新 std::cout 一样简单。就像`<< endl`你的第一条消息的结尾一样，看看你是否得到一个刷新的缓冲区。我对代码中未定义行为的其他评论仍然适用，但如果您根本没有收到任何消息，那可能是第一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T06:36:06.240

您编写的程序将接受此无效语句并将其称为有效：

```
a=(a7-62)^2 
```

您不允许在标识符中使用数字，因此根据您的语法，该程序不是有效的程序。但是你的程序会接受它。

一旦你弄清楚它为什么这样做并解决了问题，你的程序可能会在不同的平台上具有更可预测的行为。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-25T05:56:42.950

```
bool A(void);
bool E(void);
bool T(void);
bool F(void);
bool P(void);
bool U(void);
bool I(void);
bool C(void);
bool L(void);
bool D(void); 
```

不。

# c# - 使用扩展方法访问字段的属性

> ID：15608425
> 
> 赞同：3
> 
> 时间：2013-03-25T05:45:17.060
> 
> 标签：c#, linq, extension-methods, custom-attributes

我想通过使用扩展方法检查我的类成员（仅限字段）的自定义属性。

```
public class DatabaseIdAttribute : Attribute
{
    public int ID { get; set; }

    public DatabaseIdAttribute(int id)
    {
        this.ID = id;
    }
}

public class MyClass 
{
    [DatabaseId(1)]
    double Height {get;set;}

    [DatabaseId(2)]
    double Width {get;set;}

    double Area { get { return this.Height * this.Width; }
} 
```

我想在扩展方法中使用 LINQ 表达式来访问类字段而不是传递魔术字符串。

```
var myClass = new MyClass();
var attribute = myClass.GetAttribute<DatabaseIdAttribute>(c => c.Height); 
```

有没有可能实现？

[编辑]

目前，我在@leppie 的帮助下实现了以下目标

```
 public static MemberInfo GetMember<T, R>(this T instance, Expression<Func<T, R>> selector)
    {
        var member = selector.Body as MemberExpression;
        if (member != null)
        {
            return member.Member;
        }
        return null;
    }

    public static T GetAttribute<T>(this MemberInfo member) where T : Attribute
    {
        return member.GetCustomAttributes(false).OfType<T>().SingleOrDefault();
    } 
```

可以通过以下方式获取属性

```
var c = new MyClass();
var attribute = c.GetMember(m => m.Height).GetAttribute<DatabaseIdAttribute>(); 
```

但我希望能够通过以下方式访问它

```
var c = new MyClass();
var attribute = c.GetAttribute<DatabaseIdAttribute>(m => m.Height); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T07:12:47.697

你快到了！这应该有效（未经测试）。

```
public static class ObjectExtensions
{
    public static MemberInfo GetMember<T,R>(this T instance, 
         Expression<Func<T, R>> selector)
    {
        var member = selector.Body as MemberExpression;
        if (member != null)
        {
            return member.Member;
        }
        return null;
    }

    // unnecessary in .NET 4.5 and up, see note!
    public static T GetAttribute<T>(this MemberInfo meminfo) where T : Attribute
    {
       return meminfo.GetCustomAttributes(typeof(T)).FirstOrDefault() as T;
    }
} 
```

用法：

```
var attr = someobject.GetMember(x => x.Height).
              GetAttribute<DatabaseIdAttribute>(); 
```

* * *

注意：从 .NET 4.5 及更高版本（包括 .NET Core）开始，BCL 提供了一种[`GetCustomAttribute<T>(MemberInfo)`扩展方法](https://docs.microsoft.com/dotnet/api/system.reflection.customattributeextensions.getcustomattribute?view=netframework-4.5#System_Reflection_CustomAttributeExtensions_GetCustomAttribute__1_System_Reflection_MemberInfo_)，其功能与`GetAttribute`上面定义的方法相同，如果可用，应改为使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-11T07:47:41.297

如果你不介意提供额外的泛型类型，你可以这样做：

```
public static class ReflectionHelper
{
    public static TAttr GetAttribute<TClass, TProp, TAttr>(Expression<Func<TClass, TProp>> selector) where TAttr : Attribute
    {
        var member = selector.Body as MemberExpression;
        return member.Member.GetCustomAttributes<TAttr>(false).First();
    }
} 
```

然后你可以像这样使用它：

```
var attribute = ReflectionHelper.GetAttribute<MyClass, double, DatabaseIdAttribute>(m => m.Height); 
```

请注意，这不是扩展方法（因为我们不能有静态扩展），因此无需创建类的实例。

当然，您仍然可以使用扩展方法版本：

```
public static TAttr GetAttribute<TClass, TProp, TAttr>(this TClass instance, Expression<Func<TClass, TProp>> selector) where TAttr : Attribute
{
   var member = selector.Body as MemberExpression;
   return member.Member.GetCustomAttributes<TAttr>(false).First();
} 
```

这会让你这样称呼它：

```
var c = new MyClass();
var attribute = c.GetAttribute<MyClass, double, DatabaseIdAttribute>(m => m.Height); 
```

但无论哪种方式都非常冗长。如果你想让编译器推断出所有的泛型类型，我们需要传入我们属性的一个实例：

```
public static class ReflectionHelper
{
    public static TAttr GetAttribute<TClass, TProp, TAttr>(TAttr attribute, Expression<Func<TClass, TProp>> selector) where TAttr : Attribute
    {
        var member = selector.Body as MemberExpression;
        return member.Member.GetCustomAttributes<TAttr>(false).First();
    }
} 
```

用法：

```
var attribute = ReflectionHelper.GetAttribute(new DatabaseIdAttribute(), m => m.Height); 
```

# gcc - makefile 隐式规则——困惑

> ID：15608426
> 
> 赞同：0
> 
> 时间：2013-03-25T05:45:26.653
> 
> 标签：gcc, makefile

我正在开发一个使用 makefile 来制作目标的项目。在这里，我很困惑 makefile 如何从 .cpp 文件生成 .o 文件。

像文件 clientthread_level1_unix.o 必须从 clientthread_level1_unix.cpp 文件生成。但是没有指定使用 *.cpp 文件的地方。

```
EXTRALIBS = -pthread -lz -ldl -lm
OPENGLLIBS =
LDFLAGS_GL =
LDLIBS = ${APPEXTRALIBS} ${top_builddir}/lib/libwx_based-2.6.a ${EXTRALIBS}

# Compiler used
CXX         = c++
CC          = gcc

CANALOBJS =     ../../common/listenthread_unix.o ../../common/clientthread_level1_unix.o ../../common/devicethread_unix.o \
        ../../common/canalshmem_level1_unix.o ../../common/clientlist.o ../../common/controlobject.o \
        ../../common/devicelist.o ../../common/udpreceivethread_unix.o ../../../vscp/common/vscp.o \
        ../../common/clientthread_level2_unix.o ../../common/canalshmem_level2_unix.o \
        ../../common/tcplistenthread.o
CANALHDRS = ../../common/clientlist.h ../../common/controlobject.h ../../common/devicelist.h \
        ../../common/canal.h ../../common/canaldlldef.h \
        ../../common/version.h ../../common/canal_unix_ipc.h ../../common/CanalShMem_level1_unix.h \
        ../../common/CanalShMem_level2_unix.h ../../common/clientthread_level1_unix.h ../../common/clientthread_level2_unix.h
PROJOBJS    = ../../../common/dllist.o ../../../common/configfile.o ../../../common/crc.o
PROJHDRS    = ../../../common/dllist.h ../../../common/configfile.h
OBJS        = canald.o
HDRS        = canald.h

all:        canald

# Build the Linux executable
canald:     $(OBJS) $(HDRS) $(CANALOBJS) $(CANALHDR) $(PROJOBJS) $(PROJHDRS)
        $(CXX) $(OBJS) $(CANALOBJS) $(PROJOBJS) -o canald $(LIBS) $(LDLIBS) 
```

如果我们也使用隐式规则，那么**canald**目标也不是这样。 [http://www.gnu.org/software/make/manual/make.html#make-Deduces](http://www.gnu.org/software/make/manual/make.html#make-Deduces) [http://www.gnu.org/software/make/manual/make.html#Implicit-Rules](http://www.gnu.org/software/make/manual/make.html#Implicit-Rules)

请问这条生产线是如何生产**运河的**？

```
 $(CXX) $(OBJS) $(CANALOBJS) $(PROJOBJS) -o canald $(LIBS) $(LDLIBS) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:35:48.297

线

```
 $(CXX) $(OBJS) $(CANALOBJS) $(PROJOBJS) -o canald $(LIBS) $(LDLIBS) 
```

将大约（我跳过未定义的变量）翻译成：

```
 c++  canald.o ../../common/listenthread_unix.o ../../common/clientthread_level1_unix.o ../../common/devicethread_unix.o \
    ../../common/canalshmem_level1_unix.o ../../common/clientlist.o ../../common/controlobject.o \
    ../../common/devicelist.o ../../common/udpreceivethread_unix.o ../../../vscp/common/vscp.o \
    ../../common/clientthread_level2_unix.o ../../common/canalshmem_level2_unix.o \
    ../../common/tcplistenthread.o \
    ../../../common/dllist.o ../../../common/configfile.o ../../../common/crc.o \
    -o canald /lib/libwx_based-2.6.a -pthread -lz -ldl -lm 
```

即，“正常”编译器调用。由于 有明确的规则`canald`，因此无需搜索隐含的规则。此外，它是 中的目标规则`Makefile`，因此它是默认目标。

但是，对于对象`canald`依赖，不存在显式规则，因此使用隐式规则。

如果您想知道存在哪些隐式规则，请`make -p`在输出中调用并搜索该模式，例如在您的情况下为`%.cpp`.

# asynchronous - 没有 Ember 数据的 AJAX 承诺

> ID：15608431
> 
> 赞同：16
> 
> 时间：2013-03-25T05:45:37.173
> 
> 标签：asynchronous, ember.js

我决定不使用 ember-data，因为它还没有准备好生产并且仍在变化。无论如何，我的应用程序只需要发出一些 ajax 请求，所以它不应该有太大的不同。我无法理解如何处理 ajax 承诺响应。

当我的用户加载应用程序时，他们已经有一个经过身份验证的会话。我正在尝试 ping 服务器以获取该用户信息并将其显示在我的模板中。似乎我的模板是在我的 ajax 请求返回结果之前呈现的，然后没有使用承诺进行更新。

```
// route
App.ApplicationRoute = Ember.Route.extend({
    setupController: function(){
        this.set("currentUser", App.User.getCurrentUser());
    }
});

// model
App.User = Ember.Object.extend({
    email_address: '',
    name_first: '',
    name_last: '',
    name_full: function() {
        return this.get('name_first') + ' ' + this.get('name_last');
    }.property('name_first', 'name_last')
});
App.User.reopenClass({
    getCurrentUser: function() {
        return $.ajax({
            url: "/api/get_current_user",
            type: "POST",
            data: JSON.stringify({})
        }).then(function(response) {
            return response;
        });
    }
}); 
```

在我的模板中：

```
<h1> Hey, {{App.currentUser.name_first}}</h1> 
```

当我收到响应或延迟渲染直到我收到响应时，我将如何更新模板？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-25T09:22:35.243

其实答案很简单：你不需要使用 Promise。而是只返回一个空对象。您的代码可能如下所示：

```
App.User.reopenClass({
    getCurrentUser: function() {
        var user = App.User.create({}); //create an empty object
        $.ajax({
            url: "/api/get_current_user",
            type: "POST",
            data: JSON.stringify({})
        }).then(function(response) {
            user.setProperties(response); //fill the object with your JSON response
        });
        return user;
    }
}); 
```

这里发生了什么？

1.  您创建一个**空对象**。
2.  您对 API 进行异步调用...
3.  ...并**在您的成功回调中填充您的空对象。**
4.  您返回您的用户对象。

**注意：真正发生了什么？**上面提到的流程不是这些动作发生的顺序。实际上，首先执行第 1,2 和第 4 点。然后一段时间后，当响应从您的服务器返回时，执行 3。**所以真正的动作流程是：1 -> 2 -> 4 -> 3。**

**所以一般规则是总是返回一个使 Ember 能够执行其逻辑的对象。**在您的情况下，不会首先显示任何值，一旦您的对象被填充，Ember 将开始发挥它的魔力并自动更新您的模板。没有艰苦的工作需要在你身边完成！

* * *

**超越最初的问题：如何使用数组来做到这一点？** 按照这个一般规则，您将返回一个空数组。这里有一个小例子，假设您可能希望从后端获取所有用户：

```
App.User.reopenClass({
    getAllUsers: function() {
        var users = []; //create an empty array
        $.ajax({
            url: "/api/get_users",
        }).then(function(response) {
            response.forEach(function(user){
                var model = App.User.create(user); 
                users.addObject(model); //fill your array step by step
            });
        });
        return users;
    }
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-13T15:52:55.880

我会使用 Ember.Deferred 而不是如前所述返回一个空数组。

```
App.User.reopenClass({
  getAllUsers: function() {
    var dfd = Ember.Deferred.create();
    var users = [];

    $.ajax({
        url: "/api/get_users",
    }).then(function(response) {
        response.forEach(function(user){
            var model = App.User.create(user); 
            users.addObject(model);
        });
        dfd.resolve(users);
    });
    return dfd;
  }
}); 
```

在你的模型钩子中，你所要做的就是这个

```
model: function(){
  return App.User.getAllUsers();
} 
```

Ember 足够聪明，并且知道如何处理您返回的承诺，一旦解决了模型将被正确设置，您也可以返回 jQuery 承诺，但它会给您一些奇怪的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-05T10:01:16.383

您也可以将当前用户设置为 ApplicationRoute 的模型，如下所示：

```
App.ApplicationRoute = Ember.Route.extend({
    model: function() {
        return App.User.getCurrentUser();
    }
}); 
```

由于`getCurrentUser()`返回一个承诺，转换将暂停，直到承诺履行或拒绝。

这很方便，因为在转换完成时，您的模型已初始化，您将看到它在模板中呈现。

您可以在 Ember 指南中[阅读有关异步路由的更多信息。](http://emberjs.com/guides/routing/asynchronous-routing/)

# javascript - JQuery - 选择结果显示选择消息

> ID：15608433
> 
> 赞同：0
> 
> 时间：2013-03-25T05:45:51.533
> 
> 标签：javascript, jquery, show, selectable

插件演示：http: [//jqueryui.com/selectable/#serialize](http://jqueryui.com/selectable/#serialize)

您好，我不太了解这个“插件”，特别是

`result.append( " #" + ( index + 1) );` &

`<span>You've selected:</span> <span id="select-result">none</span>.`

我希望用户能够选择以下“按钮”之一，然后显示一条消息来代替所选数字（如演示中所示）

所以：您选择了：#2。将是：您已选择：英国，请转到此并执行此操作等...

我猜最简单的方法是使用 JavaScript

```
if "select-result" = 1 then
else 
```

那类的东西？

任何帮助都会很棒！我希望这不是一个愚蠢的问题...

代码：

```
<html>
<head>
<title>jQuery UI Selectable - Serialize</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery- ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<style>
#feedback { font-size: 1.4em; }
#selectable .ui-selecting { background: #FECA40; }
#selectable .ui-selected { background: #F39814; color: white; }
#selectable { list-style-type: none; margin: 0; padding: 0; width: 60%; }
#selectable li { margin: 3px; padding: 0.4em; font-size: 1.4em; height: 18px; }
</style>
<script>
$(function() {
$( "#selectable" ).selectable({
  stop: function() {
    var result = $( "#select-result" ).empty();
    $( ".ui-selected", this ).each(function() {
      var index = $( "#selectable li" ).index( this );
      result.append( " #" + ( index + 1) );
    });
  }
});
});
</script>
</head>
<body>
<p id="feedback">
<span>You've selected:</span> <span id="select-result">none</span>.
</p>

<ol id="selectable">
<li class="ui-widget-content">UK</li>
<li class="ui-widget-content">USA</li>
<li class="ui-widget-content">FR</li>
<li class="ui-widget-content">AU</li>
<li class="ui-widget-content">CA</li>
<li class="ui-widget-content">DE</li>
</ol>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:49:40.470

```
var index = $( "#selectable li" ).index( this ); 
```

这会获取我们传递的元素的索引。我们不需要这条线。

```
result.append( " #" + ( index + 1) ); 
```

索引是元素在下降 DOM 时出现的位置。

我们可以将以上几行更改为一件简单的事情。

```
$( ".ui-selected", this ).text().appendTo(result); 
```

*编辑*：见上文，`this`可能是指整个 ul，所以我们需要通过被选中的项目来过滤它。如果您允许多选，请参见下文。

```
$( ".ui-selected", this ).each(function(){
    $(this).text().appendTo(result);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:01:29.227

插件中的示例显示了选定的索引..您不需要这样做...您需要做的是获取选定的文本并在跨度中显示它..所以使用..`html()`或`text()`..

尝试这个

```
 $(function() {
   $( "#selectable" ).selectable({
    stop: function() {
         var result = $( "#select-result" );
         result.html($(this).html());  // result.text($(this).text());
    }
  });
}); 
```

# c# - 使用 Rest 发送具有 Stream 属性的类对象

> ID：15608434
> 
> 赞同：0
> 
> 时间：2013-03-25T05:45:52.173
> 
> 标签：c#, rest, upload

我可以发送一个简单`class object`的一些属性，如下所示：

```
[DataContract]
public class DeviceInfo
{
    [DataMember]
    public string DeviceCode { get; set; }

    [DataMember]
    public string ClientKey { get; set; }

    [DataMember]
    [XmlIgnore]
    public DateTime Timestamp { get; set; }

    [DataMember]
    public string Token { get; set; }
} 
```

Windows窗体代码：

```
string baseAddress = "http://some_webservice_url";
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(baseAddress);
request.Method = "POST";
request.ContentType = "application/json";

DeviceInfo customData = new DeviceInfo();
customData.DeviceCode = "123456";
customData.ClientKey = "hfhf8djf89dfk9";
customData.Timestamp = "12-12-2013";
customData.Token = "444sdf54df544r";

byte[] byteArray = Encoding.UTF8.GetBytes(Serialize<DeviceInfo>(customData));
request.ContentLength = byteArray.Length;
Stream dataStream = request.GetRequestStream();
dataStream.Write(byteArray, 0, byteArray.Length);
dataStream.Close();

using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
{
    MessageBox.Show(Utility.ReadResponse(response));
}  

// SERIALIZATION PART  

public static string Serialize<T>(T obj)
{
    System.Runtime.Serialization.Json.DataContractJsonSerializer serializer = new System.Runtime.Serialization.Json.DataContractJsonSerializer(obj.GetType());
    MemoryStream ms = new MemoryStream();
    serializer.WriteObject(ms, obj);
    string retVal = Encoding.Default.GetString(ms.ToArray());
    ms.Dispose();

    return retVal;
}

public static byte[] ReadFully(Stream input)
{
    byte[] buffer = new byte[16 * 1024];
    using (MemoryStream ms = new MemoryStream())
    {
        if (input != null)
        {
            int read;
            while ((read = input.Read(buffer, 0, buffer.Length)) > 0)
            {
                ms.Write(buffer, 0, read);
            }
        }
        return ms.ToArray();
    }
} 
```

它的作用是将 DeviceInfo 发送到服务器。
但是**我怎么能用一个类对象来做到这一点`Stream property`：**

```
public class PhotoData
{
    public string ProductId { get; set; }
    public string PhotoId { get; set; }
    public System.IO.Stream FileData { get; set; }
} 
```

这是我到目前为止所做的，它抛出了一个错误，说

```
 Type 'System.IO.FileStream' with data contract name 'FileStream:http://schemas.datacontract.org/2004/07/System.IO' 
is not expected. Consider using a DataContractResolver or add any types not known statically to the list of 
known types - for example, by using the KnownTypeAttribute attribute or by adding them to the list of known types 
passed to DataContractSerializer.  

StreamReader sr = new StreamReader(openFileDialog1.FileName);
byte[] fileStream = ReadFully(sr.BaseStream);

PhotoData pd = new PhotoData();
pd.FileData = sr.BaseStream;
pd.ProductId = "121513542454545";
pd.PhotoId = textBox4.Text;

baseAddress = "http://someurl/rest/UploadPhotoStream";
request = (HttpWebRequest)WebRequest.Create(new Uri(baseAddress));
request.Method = "POST";
request.ContentType = "application/octet-stream";

byteArray = Encoding.UTF8.GetBytes(Serialize<PhotoData>(pd));
request.ContentLength = byteArray.Length;
Stream dataStream2 = request.GetRequestStream();
dataStream2.Write(byteArray, 0, byteArray.Length);
dataStream2.Close();

using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
{
    MessageBox.Show(Utility.ReadResponse(response));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:50:37.600

我建议使用 a`byte[]`而不是 a `Stream`。

```
public class PhotoData
{
    public string ProductId { get; set; }
    public string PhotoId { get; set; }
    public byte[] FileData { get; set; }
} 
```

然后您可以以传统方式读取/写入`FileData`using a `MemoryStream`。我不完全确定你的方法试图做什么，但我认为它最终看起来有点像这样：

```
byte[] fileStream = ReadFully(sr.BaseStream);

PhotoData pd = new PhotoData();
pd.FileData = fileStream; 
```

# html - 简单登录 NSURLConnection

> ID：15608436
> 
> 赞同：0
> 
> 时间：2013-03-25T05:46:11.307
> 
> 标签：html, objective-c, forms, authentication

如何通过我的应用程序中的 textFields 执行简单的登录到这样的网站？ [https://sms12.schoolsoft.se/drottningblanka/jsp/Login.jsp](https://sms12.schoolsoft.se/drottningblanka/jsp/Login.jsp)

真的需要帮助。还没有找到任何适用于我的东西。然而，它似乎很容易执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:03:52.063

1.您可以在 UIWebView 中填充此页面并执行登录操作。

或者

2.创建一个带有密码文本字段，用户名文本字段的用户界面。从您的服务器获取用于登录的网络服务API。屏幕中的文本字段将为您提供用户名和密码，使用 GET/POST 方法进行登录操作以及这些详细信息。

# javascript - 在刷新页面时设置不同的选项选择选项 - JAVASCRIPT

> ID：15608437
> 
> 赞同：0
> 
> 时间：2013-03-25T05:46:11.907
> 
> 标签：javascript, html, css

所以我有一张如下表：

```
<select id="CellLayout" style="color:#99FF00; font-family:monospace;" onChange="PipeConfigChange(this.value);">
    <option>select layout</option>
    <option>blinker</option>
    <option>glider</option>
    <option>flower</option>
    <option>custom</option>
</select> 
```

默认情况下，“选择布局”是显示的内容。单击一个按钮，我需要选择框来显示“自定义”。我试着在 SO 周围搜索，但我试图在没有 Jquery 的情况下做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T05:56:29.390

试试这个...它很简单...真的有效..

```
<script type="text/javascript">
function fun()
{

document.getElementById("CellLayout").selectedIndex = 4;
}
</script>

<form name="f1">
<select id="CellLayout" style="color:#99FF00; font-family:monospace;" >
    <option>select layout</option>
    <option>blinker</option>
    <option>glider</option>
    <option>flower</option>
    <option>custom</option>
</select>
<input type="button" onclick="fun()"/>
</form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T05:56:39.233

您可以更改选择值，如下所示：

```
<select id="CellLayout" style="color:#99FF00; font-family:monospace;" onChange="PipeConfigChange(this.value);">
    <option>select layout</option>
    <option>blinker</option>
    <option>glider</option>
    <option>flower</option>
    <option>custom</option>
</select>

<input type="button" value="change" onclick="change()" />

<script type="text/javascript">
function change() {
    document.getElementById('CellLayout').value = 'custom';
}
</script> 
```

[**小提琴**](http://jsfiddle.net/fAt4Z/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T05:54:52.383

你可以试试：

```
<select id="CellLayout" style="color:#000; font-family:monospace;" onChange="PipeConfigChange(this.value);">
    <option value="0">select layout</option>
    <option value="1">blinker</option>
    <option value="2">glider</option>
    <option value="3">flower</option>
    <option value="4">custom</option>
</select>
<input id="btn" type="submit" value="setSelected">
<script type="text/javascript">
    var btn = document.getElementById('btn');
    btn.onclick = function(){
        var layOut = document.getElementById('CellLayout');
        for(var i = 0; i < layOut.length; i++){
            if(layOut.options[i].value == '4'){
                layOut.selectedIndex = i;
            }
        }
    }
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T06:05:35.777

根据我对你的问题的理解。可能以下是您的答案。请检查。

在 html 中：

```
<select id="CellLayout" style="color:#99FF00; font-family:monospace;" onChange="PipeConfigChange(this.value);">
    <option>select layout</option>
    <option>blinker</option>
    <option>glider</option>
    <option>flower</option>
    <option>custom</option>
</select>
<input type="button" value="clickHere" onclick="javascript:call()"/> 
```

在 JavaScript 中：

```
function call() {
        var textToFind = 'custom';
        var dd = document.getElementById('CellLayout');
        for (var i = 0; i < dd.options.length; i++) {
            if (dd.options[i].text === textToFind) {
                dd.selectedIndex = i;
                break;
            }
        }
    } 
```

# sql-server - 如何用随机数据填充数据库的所有表？

> ID：15608438
> 
> 赞同：6
> 
> 时间：2013-03-25T05:46:17.797
> 
> 标签：sql-server, database, sql-server-2008, sql-server-2008-r2, relational-database

有这样的软件吗？数据本身是否有意义并不重要。我只是担心这些领域会被填充。基本上，它将读取表定义并相应地生成一些数据。如果它询问每个表要插入多少行，默认值是留空还是填充，如何处理 varchars（完全或最多给定的指定字符数），那也很棒. 理想情况下是免费的 :) 但也非常欢迎商业产品建议。谢谢你们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-04-27T08:20:43.017

我看到仍然没有被选为最佳的答案。除了这个线程中已经提到的解决方案，我可以建议使用[ApexSQL Generate - 一个 SQL 数据生成器工具](https://www.apexsql.com/sql_tools_generate.aspx)，它能够使用各种数据源和各种数据生成器快速生成数百万行。

它具有功能齐全的免费试用版，因此您可以下载并测试它是否可以完成您的工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T06:10:53.330

Hey **SQL Data Generator**提供真实的测试数据，您可以从以下网站下载此数据 [http://www.red-gate.com/products/sql-development/sql-data-generator/](http://www.red-gate.com/products/sql-development/sql-data-generator/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-05T13:50:12.553

对于*mysql*数据库，您可以使用`filldb.info`.

它会自动生成数据并用这些虚拟数据填充您的数据库表

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-25T09:29:15.190

尝试为此使用 Visual Studio，如本文所示

[http://www.mssqltips.com/sqlservertip/2190/generating-sql-server-test-data-with-visual-studio-2010/](http://www.mssqltips.com/sqlservertip/2190/generating-sql-server-test-data-with-visual-studio-2010/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-07-21T00:10:24.673

如果有人正在寻找一种无需额外软件的简单方法来做到这一点。

我们只需要一个返回随机数的函数：

```
-- Create the RANDBETWEEN function
-- Usage: SELECT dbo.RANDBETWEEN(0,9,RAND(CHECKSUM(NEWID())))
CREATE FUNCTION dbo.RANDBETWEEN(@minval TINYINT, @maxval TINYINT, @random NUMERIC(18,10))
RETURNS TINYINT
AS
BEGIN
  RETURN (SELECT CAST(((@maxval + 1) - @minval) * @random + @minval AS TINYINT))
END
GO 
```

然后你可以运行这样的查询：

```
-- Insert 1 million records into the Person table
INSERT INTO Person (FirstName,LastName,CityId)
SELECT TOP 1000000
    CASE
        WHEN dbo.RANDBETWEEN(0,9,RAND(CHECKSUM(NEWID()))) = 0 THEN 'John'
        WHEN dbo.RANDBETWEEN(0,9,RAND(CHECKSUM(NEWID()))) = 1 THEN 'Jack'
        WHEN dbo.RANDBETWEEN(0,9,RAND(CHECKSUM(NEWID()))) = 2 THEN 'Bill'
        WHEN dbo.RANDBETWEEN(0,9,RAND(CHECKSUM(NEWID()))) = 3 THEN 'Mary'
        WHEN dbo.RANDBETWEEN(0,9,RAND(CHECKSUM(NEWID()))) = 4 THEN 'Kate'
        WHEN dbo.RANDBETWEEN(0,9,RAND(CHECKSUM(NEWID()))) = 5 THEN 'Matt'
        WHEN dbo.RANDBETWEEN(0,9,RAND(CHECKSUM(NEWID()))) = 6 THEN 'Rachel'
        WHEN dbo.RANDBETWEEN(0,9,RAND(CHECKSUM(NEWID()))) = 7 THEN 'Tom'
        WHEN dbo.RANDBETWEEN(0,9,RAND(CHECKSUM(NEWID()))) = 8 THEN 'Ann'
        WHEN dbo.RANDBETWEEN(0,9,RAND(CHECKSUM(NEWID()))) = 9 THEN 'Andrew'
    ELSE 'Bob' END AS FirstName,
    CASE
        WHEN dbo.RANDBETWEEN(0,9,RAND(CHECKSUM(NEWID()))) = 0 THEN 'Smith'
        WHEN dbo.RANDBETWEEN(0,9,RAND(CHECKSUM(NEWID()))) = 1 THEN 'Morgan'
        WHEN dbo.RANDBETWEEN(0,9,RAND(CHECKSUM(NEWID()))) = 2 THEN 'Simpson'
        WHEN dbo.RANDBETWEEN(0,9,RAND(CHECKSUM(NEWID()))) = 3 THEN 'Walker'
        WHEN dbo.RANDBETWEEN(0,9,RAND(CHECKSUM(NEWID()))) = 4 THEN 'Bauer'
        WHEN dbo.RANDBETWEEN(0,9,RAND(CHECKSUM(NEWID()))) = 5 THEN 'Taylor'
        WHEN dbo.RANDBETWEEN(0,9,RAND(CHECKSUM(NEWID()))) = 6 THEN 'Morris'
        WHEN dbo.RANDBETWEEN(0,9,RAND(CHECKSUM(NEWID()))) = 7 THEN 'Elliot'
        WHEN dbo.RANDBETWEEN(0,9,RAND(CHECKSUM(NEWID()))) = 8 THEN 'White'
        WHEN dbo.RANDBETWEEN(0,9,RAND(CHECKSUM(NEWID()))) = 9 THEN 'Davis'
    ELSE 'Brown' END AS LastName,
    dbo.RANDBETWEEN(1,15,RAND(CHECKSUM(NEWID()))) as CityId
FROM sys.all_objects a
CROSS JOIN sys.all_objects b
GO 
```

结果：

[![样本结果](../Images/91bd8e8784927729312aef7c4aa919b1.png)](https://i.stack.imgur.com/bUD7S.png)

相应地调整查询以匹配您的表/列名称。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-12-17T09:14:59.697

我通常使用的非常简单的 SQL：

```
create table fillTbl (msg nvarchar(255))
insert into fillTbl select top 4285 description from sys.sysmessages where msglangid=1033 -- ~ 1 Mo
GO 100 -- the number of Mo you want to add
exec sp_spaceused 'fillTbl' -- space in the table
exec sp_spaceused -- space in the database
-- drop table fillTbl -- reset the space added 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-25T12:19:13.193

有大量用于 SQL Server 测试数据生成的工具。因此，您不必通过某种方式构建自己的逻辑来手动执行此操作。请检查[http://www.kodyaz.com/articles/tools-sql-server-tool-list.aspx上的测试数据生成器部分](http://www.kodyaz.com/articles/tools-sql-server-tool-list.aspx)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-04-10T23:58:14.657

我[在 netbeans IDE 中用 java 创建了一个项目。](https://github.com/dealmeida-gabriel-1945/data_generator_to_mysql_3306) 这个项目允许你用随机数据填充你的表。它有一些问题，所以我正在努力解决它。

# xaml - 滚动windows8 xaml时网格控件项内的组合框重复

> ID：15608445
> 
> 赞同：0
> 
> 时间：2013-03-25T05:47:28.750
> 
> 标签：xaml, windows-8, microsoft-metro, devexpress

我在网格控件内的 datatemplete 中有一个 xaml 组合框，当我滚动组合框的选定值时，会重复某些行。即）当其索引更改时，选定的值将保存在 db 中。下次当我再次加载它时，可见行正确显示所选值。但是当我向下滚动网格控件时，值会重复。我怎样才能让它正常工作？我正在使用 devexpress 网格控件。

# php - 数组数据的组合

> ID：15608447
> 
> 赞同：4
> 
> 时间：2013-03-25T05:47:30.113
> 
> 标签：php, algorithm

有什么可以帮助我获得输出为：

a：b a：c a：d a：e b：c b：d b：e c：d c：e d：e a：b：c a：b：d a：b：e a：c：d a：c：e a：d：e b：c：d b： c: e b: d: e c: d: e a: b: c: d a: b: c: e a: b: d: e a: c: d: e b: c: d: e a: b: c: d: e

数据数组 $ n = array ('a', 'b', 'c', 'd', 'e');

我试过这样的代码：

```
for($a=0;$a<count($n);$a++)
{
    for($b=$a+1;$b<count($n);$b++)
    {
        echo $n[$a].' : '.$n[$b].'<br />';  
    }
}

for($a=0;$a<count($n);$a++)
{
    for($b=$a+1;$b<count($n);$b++)
    {
        for($c=$b+1;$c<count($n);$c++)
        {
            echo $n[$a].' : '.$n[$b].' : '.$n[$c].'<br />';     
        }       
    }
}

for($a=0;$a<count($n);$a++)
{
    for($b=$a+1;$b<count($n);$b++)
    {
        for($c=$b+1;$c<count($n);$c++)
        {
            for($d=$c+1;$d<count($n);$d++)
            {
                echo $n[$a].' : '.$n[$b].' : '.$n[$c].' : '.$n[$d].'<br />';            
            }           
        }       
    }
}

for($a=0;$a<count($n);$a++)
{
    for($b=$a+1;$b<count($n);$b++)
    {
        for($c=$b+1;$c<count($n);$c++)
        {
            for($d=$c+1;$d<count($n);$d++)
            {
                for($e=$d+1;$e<count($n);$e++)
                {
                    echo $n[$a].' : '.$n[$b].' : '.$n[$c].' : '.$n[$d].' : '.$n[$e].'<br />';               
                }               
            }           
        }       
    }
} 
```

但我认为代码太长请帮助简化，

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:08:52.380

尝试这个 ：

```
<?php
function getCombinations($base,$n){

$baselen = count($base);
if($baselen == 0){
    return;
}
    if($n == 1){
        $return = array();
        foreach($base as $b){
            $return[] = array($b);
        }
        return $return;
    }else{
        //get one level lower combinations
        $oneLevelLower = getCombinations($base,$n-1);

        //for every one level lower combinations add one element to them that the last element of a combination is preceeded by the element which follows it in base array if there is none, does not add
        $newCombs = array();

        foreach($oneLevelLower as $oll){

            $lastEl = $oll[$n-2];
            $found = false;
            foreach($base as  $key => $b){
                if($b == $lastEl){
                    $found = true;
                    continue;
                    //last element found

                }
                if($found == true){
                        //add to combinations with last element
                        if($key < $baselen){

                            $tmp = $oll;
                            $newCombination = array_slice($tmp,0);
                            $newCombination[]=$b;
                            $newCombs[] = array_slice($newCombination,0);
                        }

                }
            }

        }

    }

    return $newCombs;

}

echo "<pre>";
print_r(getCombinations(array('a','b','c','d','e'),2));
?> 
```

参考：[PHP 递归获得字符串的所有可能性](https://stackoverflow.com/questions/4279722/php-recursion-to-get-all-possibilities-of-strings/8880362#8880362)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:56:24.840

```
<?php

 $n = array ('a', 'b', 'c', 'd', 'e');

 function getPerm($array, $key)
 {
   foreach( $array as $arrkey=>$value )
   {
      if($arrkey != $key)
      {
        echo " $array[$key]:$array[$arrkey] ";
      }
   }
 }

foreach($n as $key=>$value)
{
  getPerm($n, $key);
}

?> 
```

见键盘[http://codepad.org/uTaW8ssx](http://codepad.org/uTaW8ssx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T06:11:34.770

爪哇：

```
ArrayList<String> setProduct (ArrayList<String> a, ArrayList<String> b)
{
    ArrayList<String> prod = new ArrayList<String>();

    for (String s : a)
    {
        for (String t : b)
        {
            prod.add(s + ":" + t);
        }
    }

    return prod;
} 
```

PHP：

```
<?php
function setProduct($a, $b)
{
    $arr = array();

    foreach ($a as $s)
    {
        foreach ($b as $t)
        {
            $arr[] = $s . ":" . $t;
        }
    }

    return $arr;
}
?> 
```

# .net - MSMQ 使用问题

> ID：15608451
> 
> 赞同：0
> 
> 时间：2013-03-25T05:47:44.477
> 
> 标签：.net, msmq, message-queue

您能否解释一下，使用可恢复消息时将使用多少 RAM 内存？我知道，一条消息消耗大约 70-80 个字节，这没关系，我知道消息正文将保存到磁盘，但它是否也可以将正文复制到 RAM？我尝试使用快速且可恢复的消息（消息存储限制为 1gb）来测试这一点——在这两种情况下，我在进程资源管理器中看到，msmq 服务进程达到了他的工作集（内存）到 1gb。我知道，如果是快递信息，没关系，但对于可恢复的信息，它应该少得多！

第二个问题是关于 MSMQ 回调限制。

> 如果您收到带有回调的消息，请考虑每个进程最多只能注册 63 个回调。如果您的回调在没有活动的情况下无限期地等待队列，您可能会达到此限制。

它适用于所有队列还是仅适用于一个？例如，我有我的过程，我做了类似的事情：

```
QueueFirst = new MessageQueue(@".\test") { Formatter = new BinaryMessageFormatter() };
QueueFirst.ReceiveCompleted += QueueOnReceiveCompleted;
QueueSecond = new MessageQueue(@".\test") { Formatter = new BinaryMessageFormatter() };
QueueSecond.ReceiveCompleted += QueueOnReceiveCompleted;
for (int i = 0; i < 63; i++)
{
    QueueFirst.BeginReceive(TimeSpan.FromSeconds(10), "", Callback);
    QueueSecond.BeginReceive(TimeSpan.FromSeconds(10), "", Callback);
} 
```

我可以这样做吗？我在问，因为如果我将循环上限设置为超过 63 的值，则不会发生任何不好的事情。我正在使用这个[方法重载](http://msdn.microsoft.com/en-us/library/c2hsyffy(v=vs.100).aspx)，因为在帮助中有一些关于回调的东西，这是否意味着使用事件处理程序没有任何限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:17:24.793

MSMQ 尽可能将消息存储在内存中以提高性能。
所有类型的消息也写入磁盘 - 快速/可恢复/事务性。
消息的大小对于确定 RAM 使用情况并不重要。
[该博客](http://blogs.msdn.com/johnbreakwell/archive/2006/09/18/insufficient-resources-run-away-run-away.aspx)应该包含您了解消息如何使用内存所需的一切。
[这个博客](http://blogs.msdn.com/b/johnbreakwell/archive/2008/02/29/what-are-msmq-s-limits-if-i-had-a-farthing-for-every-time.aspx)也很有用。

# mod-rewrite - 仅重定向主页

> ID：15608452
> 
> 赞同：-1
> 
> 时间：2013-03-25T05:47:55.210
> 
> 标签：mod-rewrite, url-rewriting, nginx, rewrite

我只需要将[http://shop.test.com](http://shop.test.com)重定向到[http://www.test.com/fedex-orders/](http://www.test.com/fedex-orders/)

只是主页。没有其他的。即[http://shop.test.com/?page=blog](http://shop.test.com/?page=blog)不应重定向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:58:34.577

像这样添加一个位置：

```
location = / {
   if ($args !~* .+ ) { 
      return 301 http://www.test.com/fedex-orders;
   }
} 
```

基本上那个位置只匹配'/'，所以那里的任何配置只适用于主页

因为任何带有 get 参数的东西对于网络服务器来说都是同一个文件，所以你需要额外的 if，只有当正则表达式不匹配时才会重定向。

# java - 如何使用@ContextConfiguration 配置来自另一个项目的值

> ID：15608453
> 
> 赞同：0
> 
> 时间：2013-03-25T05:47:55.537
> 
> 标签：java, spring, spring-mvc, annotations

当文件在春天的同一个项目中时，我配置了这样的东西

```
@ContextConfiguration("classpath:META-INF/spring/applicationContext*.xml") 
```

但我想配置另一个项目中可用的几个文件，如何在春季使用 `@ContextConfiguration`.

请说清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T05:50:45.517

```
@ContextConfiguration("classpath:META-INF/spring/applicationContext*.xml") 
```

这要求 spring 从类路径中加载**所有** `META-INF/spring/applicationContext*.xml`内容，无论是否是您的项目（即一些 JAR 依赖项）。

参见[`@ContextConfiguration`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/test/context/ContextConfiguration.html)javadoc

# php - 从中心开始的交替算法

> ID：15608454
> 
> 赞同：0
> 
> 时间：2013-03-25T05:47:56.263
> 
> 标签：php, algorithm

我试图找出一种算法来得出一个与中心等距交替点的排列结果（可以基于百分比）。所以，我的最终结果是这样的：X = 20（基于项目数的分离距离）- 100 / 5（5 个项目分布在 100% 上）

*   A = 50（中心点）
*   B = 70 (A + 20)
*   C = 30 (A - 20)
*   D = 90 (B + 20)
*   E = 10 (C - 20)

另一个结果是如果我们有 10 个项目 (X = 100 / 10)：

*   A = 50（中心点）
*   B = 60 (A + 10)
*   C = 40 (A - 10)
*   D = 70 (B + 10)
*   E = 30 (C - 10)
*   F = 80 (D + 10)
*   G = 20 (E - 10)
*   H = 90 (F + 10)
*   我 = 10 (G - 10)
*   J = 100 (H + 10)

如果它很重要，我正在尝试使用 PHP 来实现这个算法。我不是一个数学天才，所以我不确定这种计算是否有名称。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:55:39.743

如果我理解正确，这应该有效：

```
function pointsArray($center, $numPoints) {        
        $arr = array();
        $arr[0] = $center;

        for($i = 1;$i < $numPoints; $i++)
            $arr[$i] = $i%2 == 0 ? $center - ($i-1)*20 : $center + $i*20;

        return $arr;
} 
```

比，你可以使用这样的功能：

```
$PointsArray = pointsArray(50, 5); // {50,70,30,90,10} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:59:18.777

您可以编写如下函数：

```
function getArrayEquidistant($startValue, $step, $nbEntries)
{
    $i = 0;
    $count = 1;
    $final = array();
    $final[] = $startValue;
    while($i < $nbEntries)
    {
        if ($i % 2 == 0)
            $final[] = $startValue + ($count * $step);
        else
        {
            $final[] = $startValue + ($count * $step);
            $count++;
        }

        $i++;
    }

    retun $final;
} 
```

其中`$startValue`是初始值（在索引 0 处），`$step`是每次迭代中添加或减去的值，以及`$nbEntries`初始值之后的条目数。

例如：

```
print_r(getArrayEquidistant(50, 20, 10)); 
```

会给你：

```
Array
(
    [0] => 50
    [1] => 70
    [2] => 30
    [3] => 90
    [4] => 10
    [5] => 110
    [6] => -10
    [7] => 130
    [8] => -30
    [9] => 150
    [10] => -50
) 
```

# mysql - 如何检查查询中的条件。

> ID：15608455
> 
> 赞同：0
> 
> 时间：2013-03-25T05:47:58.380
> 
> 标签：mysql, sql

我有两张桌子`fdone, incident_one.`

**fdone**包含四个列。

```
 INC_KEY,LAT,LONG,FDID. 
```

**event_one**包含`five`列。

```
INC_KEY,LAT,LONG,STATE,FDID. 
```

我通过此查询将**fdone**表 LAT LONG 设为 4。

```
SELECT S.`LAT `,S.`LONG `,(S.`LAT `+5)as x,(S.`LONG `-5)as Y FROM `fdheader` S 
```

然后我得到

纬度、经度、X、Y

然后使用连接查询。

我必须检查，

event_one LAT AND LONG 在 LAT,LONG,X,Y 内。

我必须检查为..，

```
S.LAT<LAT ,S.LONG<LONG,X>LONG,Y<LONG. 
```

我必须通过 sql 语句检查这个条件。

你能帮我加入查询吗？

我需要这个必要的帮助来进行连接查询。

```
join  using FDID 
```

提前感谢..,

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T06:06:12.730

可能对你有帮助

```
SELECT * FROM fdone fd INNER JOIN incident_one io ON fd.FDID=io.FDID WHERE io.LATE IN (fd.LATE-5,fd.LATE) 
AND io.LONG IN (fd.LONG-5,fd.LONG) ; 
```

# ios - 使用 AVAudioPLayer 播放音频时出现故障

> ID：15608456
> 
> 赞同：1
> 
> 时间：2013-03-25T05:48:03.087
> 
> 标签：ios, xcode, audio, stream, avaudioplayer

我正在尝试从 IP 摄像机流中播放音频，它是 API`http://...<ip-camera..>/audio.cgi`

目前，我通过适配 MJPEG 客户端来播放流音频，获取音频块并将它们放入`NSMutableArray`连续声音包的缓冲区（）中。这里有一些接收数据的代码：

```
-(void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    NSLog(@"Data recv.");

     NSLog(@"Data lenght:%i",[data length]);

    if ([data length]>AUDIO_STREAM_HEADER_SIZE){
        [recvData appendData:data]; //audio stream data - always 1024 bytes
        NSLog(@"Data Append lenght:%i",[recvData length]);

    }
    else {
        [_encabezado appendData:data]; //audio stream header - always 44 bytes
        NSLog(@"Crea encabezado:%@",_encabezado);
        NSLog(@"Largo encabezado:%i",[_encabezado length]);

    }

    if ([recvData length] >= PACKET_SIZE_BUFFER_SONIDO) //PACKET_SIZE_BUFFER_SONIDO = 81920
    {

        NSMutableData *soundData = [[NSMutableData alloc] initWithCapacity:([recvData length])];

        NSMutableData *soundCut = [[NSMutableData alloc] initWithData:recvData];

        [soundData appendData:_encabezado]; //audio stream header
        [soundData appendData:soundCut];  //audio stream data

        [_arrSonidos addObject:soundData];

        if ([_arrSonidos count]>(BUFFER_SIZE_FOR_PLAY-1)) {
            if (playerBuffer.isPlaying) {
                [playerBuffer AgregaDataSound:soundData]; //addDataSound in Buffer
            } else {
                playerBuffer = [[SoundDataPLayer alloc]initWithFileNameQueue:_arrSonidos];
            }
        }

        [recvData setLength:0];

        [soundData release];
    }

} 
```

每次调用函数（函数显示）时，数据字段的标题是获取（44字节），然后是每次调用的数据字节位（1024字节）。我所做的是让头部接收数据，`NSData`然后接收数据直到定义的数据包大小，将包与它们各自的头数据一起保存在缓冲区中。所以我迭代地将包添加到缓冲区。

另一方面，我创建了一个由上述代码调用的“playerBuffer”（灵感来自网络上的示例），并且还负责控制缓冲区并播放缓冲区的每个数据包。该对象基于`AVAudioPlayer`：

声音数据播放器.h

```
#import <Foundation/Foundation.h>
#import <AVFoundation/AVFoundation.h>

@interface SoundDataPLayer : NSObject <AVAudioPlayerDelegate> {
    AVAudioPlayer* myplayer;
    NSMutableArray* dataSound;
    int index;
}

@property (nonatomic, retain) AVAudioPlayer* myplayer;
@property (nonatomic, retain) NSMutableArray* dataSound;

- (id)initWithFileNameQueue:(NSArray*)datas;
- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag;
- (void)playX:(int)i;
- (void)stop;
- (BOOL)isPlaying;
- (void)AgregaDataSound:(NSData *)data;

@end 
```

声音数据播放器.m

```
#import "SoundDataPLayer.h"
#import "ExtAudioFileConvertUtil.h"

@implementation SoundDataPLayer

@synthesize myplayer;
@synthesize dataSound;

- (id)initWithFileNameQueue:(NSArray*)datas {
    if ((self = [super init])) {
        self.dataSound = [[NSMutableArray alloc]initWithArray:datas];
        index = 0;
        [self playX:index];
    }
    return self;
}

- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag {
    if (index < dataSound.count) {
        [self playX:index];
    } else {
        //reached end of queue
    }
}

- (void)playX:(int)i {

    self.myplayer = [[AVAudioPlayer alloc] initWithData:[dataSound objectAtIndex:i]  error:nil];
    myplayer.delegate = self;
    [myplayer prepareToPlay];
    [myplayer play];

    index++;
}

- (void)stop {
    if (self.myplayer.playing) [myplayer stop];
}

- (BOOL)isPlaying{
    return self.myplayer.playing;
}

- (void)AgregaDataSound:(NSData *)data {
    [dataSound addObject:data]; //Add Sound Data to the buffer
}

@end 
```

那就是工作和播放循环播放音频，但是在每个循环中，当`AVAudioPlayer`后面播放一个新的数据包 ( `NSData`) 的缓冲区时，它会在每个数据包之间听到令人讨厌的故障。

我尝试`SystemSound`将声音包缓冲区记录到数据文件中，以查看数据是否包含故障，但显然故障是在数据的末尾。

我在一个论坛上发现了一篇文章，似乎可以解释发生了什么：[这里](http://forums.macrumors.com/showthread.php?t=640862)但显然没有完全解释我的情况，因为是 x-wav 音频和 PCM 编解码器，所以我认为和理解是未压缩的。虽然我不知道您如何从`NSData`数据包中解压缩音频。

来自 IP 摄像机的流式音频的附加信息：

datos del audio en el 标头：

> “缓存控制”=“无缓存”；“内容类型”=“音频/x-wav”；日期 =“2010 年 1 月 5 日星期二 01:17:04”；Pragma = "无缓存"; 服务器=“GoAhead-Webs”；
> 
> Datos adicionales del audio 编解码器：PCM 采样率：16 kHz

如果有人能告诉我如何解决这个问题，我将不胜感激......我试图解决它很多小时......让我发疯！

在此先感谢并为我的英语不好感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:33:15.683

您听到的“故障”是您接收“完成播放”事件、处理它、为下一个数据包初始化 AVAudioPlayer 并将数据发送到声卡所花费的时间的组合。

这类似于在开始下一个 CD 播放器之前等待一个 CD 播放器完成播放——不可能对无故障播放做出足够快的反应。

您可能想要使用音频队列服务，并且您还需要一些方法来补偿相机和手机之间的音频时钟偏差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T01:29:00.650

我用 AVQueuePlayer 解决了我的问题。

我希望它可以帮助某人。

# c# - 从 vbscript 获取错误输出

> ID：15608457
> 
> 赞同：0
> 
> 时间：2013-03-25T05:48:03.697
> 
> 标签：c#, vbscript, error-handling

如何在 C# 中正确地从 runnung vbscript 获取错误输出？

这是我的代码：

```
System.Diagnostics.Process p = new System.Diagnostics.Process();
p.StartInfo = new System.Diagnostics.ProcessStartInfo("cscript");
p.StartInfo.CreateNoWindow = true;
p.StartInfo.UseShellExecute = false;
p.StartInfo.RedirectStandardOutput = true;

p.OutputDataReceived += (proc, outLine) => MessageBox.Show(outLine.Data, 
                                                            "Data:", 
                                                            MessageBoxButtons.OK, 
                                                            MessageBoxIcon.Information);
p.ErrorDataReceived += (proc, outLine) => MessageBox.Show(outLine.Data, 
                                                            "error!", 
                                                            MessageBoxButtons.OK, 
                                                            MessageBoxIcon.Error);

p.StartInfo.Arguments = "C:\\test.vbs";

p.Start();

p.BeginOutputReadLine(); 
```

这样我就可以从 cscript 获取数据，但是如果脚本中有错误 - 进程只是关闭，没有消息......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:01:04.253

哎呀。我的错 - 我忘了添加

```
p.BeginErrorReadLine(); 
```

这就是答案

# java - Android 字符串内容加载性能

> ID：15608465
> 
> 赞同：0
> 
> 时间：2013-03-25T05:49:02.713
> 
> 标签：java, android, performance

我在一个文件中有 1000 行，每次他/她加载应用程序时都会提供给用户。

我目前的做法是：

**MainActivity: onCreate** : 启动一个 AsyncTask

**AsyncTask onPreExecute：** 显示进度对话框

**AsyncTask doInBackground：** 检查键/值是否存在于 sharedpreferences 中，如果是，则在 doInBackground 中什么也不做。如果没有（第一次用户），从原始文件中读取并创建一个字符串构建器。将 StringBuilder 的内容作为键值对存储在 sharedpreferences 中。

**AsyncTask onPostExecute：** 从 sharedpreferences 填充 textview。关闭进度对话框。

在 doInBackground 方法中从文件中读取的代码是：

```
StringBuilder sb = new StringBuilder();
InputStream textStream = getBaseContext().getResources().openRawResource(R.raw.file);
BufferedReader bReader = new BufferedReader(new InputStreamReader(textStream));

String aJsonLine = null;
try {
    while ((aJsonLine = bReader.readLine()) != null) {
        sb.append(aJsonLine + System.getProperty("line.separator"));
    }
} catch (IOException e) {
    e.printStackTrace();
} finally{
    try {
        bReader.close();
        textStream.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

我看到用户必须等待大约 9-10 秒才能首次启动，然后等待 4-5 秒才能进行后续启动。在我的情况下提高性能的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:40:50.903

你不需要让你的用户等待整个列表被加载。一旦你有足够的数据填满屏幕（可能是 10-20 项？），用你已经拥有的数据填充屏幕列表或其他任何东西，这将使延迟完全不显着。

您可以查看[http://developer.android.com/reference/android/content/AsyncTaskLoader.html](http://developer.android.com/reference/android/content/AsyncTaskLoader.html)以了解它应该如何完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T07:17:56.930

作为其他评论的一个小补充，因为 aJsonLine 是一个字符串，所以最好使用两个 append() 而不是一个单独的 append() 将其值与换行符一起存储：

```
sb.append(aJsonLine);
sb.append(System.getProperty("line.separator")); 
```

代替：

```
sb.append(aJsonLine + System.getProperty("line.separator")); 
```

对于后者，aJsonLine 和 System.getProperty("line.separator")) 的结果都需要转换为 StringBuilder ，然后它们之间的连接才能发生，并且最终值作为参数传递。

当然，你也应该缓存`System.getProperty("line.separator"))`al的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T06:14:59.997

我宁愿通过[JsonReader](http://developer.android.com/reference/android/util/JsonReader.html)读取 JSON 流并提取我感兴趣的名称值对。字符串连接/垃圾收集是昂贵的操作。现在编写代码的方式，这些操作会减慢任务。代码中也存在效率低下的问题，例如在循环的每次迭代中访问行分隔符`System.getProperty("line.separator")`。

仅使用`JSONReader`.

# linux-kernel - 内核 schedule() 函数的进入和退出

> ID：15608466
> 
> 赞同：3
> 
> 时间：2013-03-25T05:49:22.387
> 
> 标签：linux-kernel

我知道内核调度程序会定期运行。该时间段由计时器确定。但是，我一直无法找到定时器中断的 IRQ 在哪里以及从调度程序代码开始到结束的整个流程。

我知道 schedule() 函数可能有几个入口和出口点。但有人可以指出我在哪里寻找这些吗？

从内核源代码中，我收集到 __schedule() 是主要的调度函数，似乎是从 schedule() 调用的......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:27:49.180

Linux 内核中实际上有两个调度程序，或者说是两个调度代码。有一个核心调度程序，您自己提到过，它称为 schedule()，它调用 __schedule()。schedule() 从内核中的许多点调用：

1.  显式阻塞，例如信号量、互斥锁等。
2.  在中断和返回用户空间时检查标志 TIF_NEED_RESCHED，如果设置则调用调度。
3.  一个进程被唤醒。

还有另一个调度程序代码，名称为 scheduler_tick()[这也驻留在 core.c] 中，它是一个周期性调度程序，由定时器代码(timer.c) 通过中断频率为 HZ 调用，即 scheduler_tick()在一秒钟内称为 HZ 次。HZ 取决于硬件，其值在 100-1024 之间变化。scheduler_tick() 调用处理器上当前任务所属的调度类的 task_tick()。

# asp.net - n ASP .NET 4.5 SelectMethod 无法在单击按钮时将数据绑定到网格视图

> ID：15608470
> 
> 赞同：0
> 
> 时间：2013-03-25T05:49:40.840
> 
> 标签：asp.net, .net, asp.net-4.5

我正在使用 ASP.Net 4.5 ，并面临一个关于使用“选择方法”的网格视图数据绑定的问题。

网格也能够在自定义分页上绑定数据。

问题在于过滤数据。我有一个 asp 按钮，通过单击它，我可以使用存储的 proc 获取过滤数据。但是这次网格无法调用我在 aspx 页面中提到的 SelectMethod 中该网格的方法。

```
<asp:GridView ID="gEmployee" runat="server"

   AutoGenerateColumns="False"

   OnRowCommand="gEmployee_Command" CellPadding="4"

   OnRowDataBound="gEmployee_RowDataBound"

   AllowCustomPaging="true" PageSize="10" PagerSettings-Visible="false"

   CssClass="mGrid"

   AllowSorting ="true"

   AlternatingRowStyle-CssClass="alt"

ItemType="ModelEntityLayer.ClsEmployee"  SelectMethod="BindGrid" 

   OnSorting ="gEmployee_OnSorting"  HeaderStyle-Wrap="false" DataKeyNames="PropClockNumber" > 
```

上面的代码显示了我为网格视图设置的属性。

```
public IQueryable<ClsEmployee> BindGrid()

{

    int intTotalPages = 0;

    objBALEmployee = new ClsEmployeeBAL();

    List<ClsEmployee>  employee = null;

    if ((string)Session["QueryResult"] != null)

    {

        employee = objBALEmployee.GetPageWiseData(gEmployee.PageIndex, gEmployee.PageSize, ViewState["SortExpression"] != null ? ViewState["SortExpression"].ToString() : ViewState["ClockNumber"].ToString(),  ViewState["SortOrder"] != null ? ViewState["SortOrder"].ToString() : "asc", ref intTotalPages, ((string)Session["QueryResult"]));

        Session.Remove("QueryResult");

    }

    else

    {

        if (Convert.ToInt32(ViewState["IsEditSearch"]) != 1)

        {

            employee = objBALEmployee.GetPageWiseData(gEmployee.PageIndex, ViewState["SortExpression"] != null ? ViewState["SortExpression"].ToString() : ViewState["ClockNumber"].ToString(),  ViewState["SortOrder"] != null ? ViewState["SortOrder"].ToString() : "asc", gEmployee.PageSize, ref intTotalPages);

        }

        else

        {

            employee = objBALEmployee.GetPageWiseData(gEmployee.PageIndex, gEmployee.PageSize, ViewState["SortExpression"] != null ? ViewState["SortExpression"].ToString() : ViewState["ClockNumber"].ToString(),  ViewState["SortOrder"] != null ? ViewState["SortOrder"].ToString() : "asc", ref intTotalPages, dlEmployee.SelectedValue+" = '"+txtSearch.Text.Trim()+"'");

        }

    }

    var lstEmployee = employee.AsQueryable();

    if (intTotalPages > 0)

    {

        CustomPager.TotalPages =  intTotalPages %gEmployee.PageSize == 0 ? intTotalPages /gEmployee.PageSize : intTotalPages / gEmployee.PageSize + 1;

        CustomPager.Visible = true;

        lblNoRecordsFound.Visible = false;

        NoRecords.Visible = false;

    }

    else

    {

        CustomPager.Visible = false;

        lblNoRecordsFound.Visible = true;

        NoRecords.Visible = true;

    }

    ExportData1.DisableBtn(gEmployee);

    ExportData.ExportCheck = false;

    return lstEmployee;

} 
```

上面的代码显示了`bindGrid`我为网格中的 selectMethod 设置的方法。

protected void btnGo_Click（对象发送者，EventArgs e）

```
{

    ViewState["IsEditSearch"] = "1";

    hiddenSearchField.Value = dlEmployee.SelectedValue;

    hiddenSearchValue.Value = txtSearch.Text.Trim();

    gEmployee.SelectMethod = "BindGrid";

} 
```

上面的代码是为按钮单击编写的。

尽管我`gEmployee.SelectMethod = "BindGrid";`再次编写了点击代码，但`BindGrid`并没有被解雇。所以我无法将我新过滤的数据绑定到网格。

请指导我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:08:04.420

我认为您需要`btnGo_Click`在网格上明确调用 DataBind() 的末尾添加一行：

```
protected void btnGo_Click(object sender, EventArgs e)
{
    ViewState["IsEditSearch"] = "1";
    hiddenSearchField.Value = dlEmployee.SelectedValue;
    hiddenSearchValue.Value = txtSearch.Text.Trim();
    gEmployee.SelectMethod = "BindGrid";

    gEmployee.DataBind();
} 
```

# ibm-mobilefirst - 在 Tomcat 上启动 Worklight 服务器时出现异常

> ID：15608474
> 
> 赞同：0
> 
> 时间：2013-03-25T05:50:00.273
> 
> 标签：ibm-mobilefirst

我将应用程序从开发移动到生产，更改 application-description.xml 和 worklight.properties 文件并生成一个 .war 文件，然后将其添加到 tomcat，但是当我启动 tomcat 时，出现以下错误：

```
 java.lang.ClassNotFoundException: Class org.hsqldb.jdbcDriver not found in Worklight platform or project 
```

但即使我将 hsql.jar 添加到我的应用程序中，它仍然是错误，有什么帮助吗？我的工作灯版本是 5.0.5 和 apache-tomcat-7.0.37 和 mysql 是 5.1.57

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:17:12.940

HSQL 是在 Eclipse 中运行 Worklight 项目时使用的默认数据库。当您迁移到 Tomcat 时，您还需要在 worklight.properties 中编辑与数据库相关的属性。

由于您提到了 MySQL，您需要取消注释 worklight.properties 中的 MySQL 部分并根据您的设置对其进行编辑。

当然，也可以取消部署并重新部署更新的 .war 文件。

**补充：** HSQL 是一个文件系统驱动的数据库，由 Worklight 提供，在 Eclipse 中运行时可以开箱即用。

当迁移到 Tomcat 并在其中安装 Worklight 时，您必须编辑 worklight.properties 并对其进行设置，以便它知道如何与数据库通信。

在您的情况下，使用 MySQL 时，您还必须在 Tomcat 的 \lib 文件夹中包含 MySQL 连接器/J 文件。你可以从这里得到它：[http](http://www.mysql.com/downloads/mirror.php?id=412178) ://www.mysql.com/downloads/mirror.php?id=412178 （点击底部的“不，谢谢，开始我的下载”）。

请注意，为了在 Application Server（例如 Tomcat、WebSphere 或 Liberty）上运行 Worklight，**您必须使用 Worklight 的 Consumer 或 Enterprise Edition**。这是必需的，否则您将没有 Worklight JEE .jar 文件以及用于创建数据库表的 SQL 脚本。所有这些都是通过 IBM Installation Manager 完成的。

您不能在使用 Developer Edition 的应用程序服务器上使用 Worklight。

# css - 电子邮件客户端是否支持 CSS Float？

> ID：15608475
> 
> 赞同：0
> 
> 时间：2013-03-25T05:50:03.910
> 
> 标签：css, css-float

我只想知道电子​​邮件客户端是否支持浮动？

我现在无法测试 Outlook 或 Thunderbird，所以我在问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:22:37.000

查看本[指南](http://www.campaignmonitor.com/css/)，详细了解电子邮件中的 CSS 支持

# objective-c - 更改 OS X 桌面背景图像缩放模式

> ID：15608476
> 
> 赞同：0
> 
> 时间：2013-03-25T05:50:20.063
> 
> 标签：objective-c, cocoa, position, scaling, desktop-wallpaper

我一直在做一个改变桌面图像的项目，我一直在完成这样的工作：

```
[[NSWorkspace sharedWorkspace] setDesktopImageURL:fileURL forScreen:[NSScreen mainScreen] options:[NSDictionary dictionary] error:&error]; 
```

这可行，但我无法控制缩放。我希望能够像在 UI 中那样以编程方式选择缩放选项（填充屏幕、适合屏幕、拉伸以填充屏幕、中心、平铺），但我找不到解释如何执行此操作的文档。更糟糕的是，调用上述方法总是会将缩放重置为“填充屏幕”。

任何帮助将不胜感激。感谢您的时间和帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T06:21:43.500

可以`NSWorkspaceDesktopImageScalingKey`在`option`参数中设置。以下是可能的值：

`NSImageScaleProportionallyDown`

如果它对于目标来说太大，请在保持纵横比的同时缩小图像。

`NSImageScaleAxesIndependently`

缩放每个维度以完全适合目的地。此设置不保留图像的纵横比。

`NSImageScaleNone`

不要缩放图像。

`NSImageScaleProportionallyUpOrDown`

将图像缩放到其最大可能尺寸，同时保持在目标区域内并保持其纵横比。

在 NSCell.h 中声明。

# qt4 - 从 QRegex 模式中获取字符串（作为 Stringlist / 数组返回）

> ID：15608478
> 
> 赞同：0
> 
> 时间：2013-03-25T05:50:26.197
> 
> 标签：qt4, qregexp

例子：

```
QFile controller_selected_file(loaded_file);

if (controller_selected_file.open(QIODevice::ReadOnly))
{
    // grab a data
    QTextStream in(&controller_selected_file);

    // read all
    QString read_data = in.readAll();

    // Regex for match function "public function something()"
    QRegExp reg("(static|public|final)(.*)function(.*)[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]", Qt::CaseInsensitive);

    // Read by regex and file
    reg.indexIn(read_data);

    QStringList data_render = reg.capturedTexts();

    qDebug() << data_render;

    qDebug() << data_render[0];
    qDebug() << data_render[1];
    qDebug() << data_render[3];

    // ...
} 
```

我想抓取一个文件中所有出现的位置`public function somefunction()`和另一个`public function something($a,$b = "example")`出现在文件中的位置，但我只收到完整的文件字符串或仅`public`在第一个数组上接收。

所以我想抓取所有显示为数组的数据：

`public function somefunction()`.

所以很简单，解析文件中的所有函数名。

QRegexp 表达式中正则表达式的完整功能：

```
(static|public|final)(.*)function(.*)[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff] 
```

编辑：我想抓取所有出现在 PHP 文件中的字符串。当您收到文件中的所有字符串而不是使用正则表达式定义的字符串时，就会出现问题。

谢谢你的尊重！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:20:56.537

如果我理解你的问题是正确的，我认为你需要将正则表达式修改为`QRegExp reg( "((static|public|final).*function.*\([\\w\\s,]*\))" );`

使用上面的 RegExp，您可以匹配类似`static function newFunc( int gen_x, float A_b_c )`

```
QFile controller_selected_file(loaded_file);

if (controller_selected_file.open(QIODevice::ReadOnly)) {
    // grab a data
    QTextStream in(&controller_selected_file);

    // read all
    QString read_data = in.readAll();

    // Regex for match function "public function something()"
    QRegExp reg( "((static|public|final).*function.*\([\\w\\s,]*\))" );

    // Read by regex and file
    qDebug() << reg.indexIn( read_data );
    qDebug() << reg.cap( 1 );
    // ...
} 
```

说`read_data`包含以下文字

```
"This is some text: static function newFunc( int generic, float special )
And it also contains some other text, but that is not important" 
```

然后输出将是

```
19
"static function newFunc( int generic, float special )" 
```

我希望这是你想要的。

# stored-procedures - MySQL程序检索表丢失的自动增量ID？

> ID：15608479
> 
> 赞同：0
> 
> 时间：2013-03-25T05:50:30.723
> 
> 标签：stored-procedures, mysql-5.5

我创建了一个程序来从表中找出丢失的 id，但它没有检索到任何结果，下面是程序

```
DELIMITER ||
DROP PROCEDURE IF EXISTS proc_rpt ||
CREATE PROCEDURE proc_rpt()
BEGIN 
SET @minID = (SELECT MIN(`id`) FROM `tbl_film` WHERE `user_id`=13);
SET @maxID = (SELECT MAX(`id`) FROM `tbl_film` WHERE `user_id`=13);
REPEAT 
    SET @tableID = (SELECT `id` FROM `tbl_film` WHERE `id` = @minID);
    IF (@tableID IS NULL) THEN
        INSERT INTO temp_missing(`missing_id`) VALUES (@tableID);
    END IF;
    SET @minID = @minID + 1; 
UNTIL (@minID <= @maxID)
END REPEAT;  // earlier I was missing this line which was giving error in Procedure.
END; || 
```

然后我在上面打电话

```
CALL rpt_proc(); 
```

`film_id`但是在 tbl_missing 上没有结果，而我可以看到in有很多缺失值`tbl_film`。有人会告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:43:15.090

试试这个代码。

```
DELIMITER ||
    DROP PROCEDURE IF EXISTS proc_rpt ||
    CREATE PROCEDURE proc_rpt()
    BEGIN 
    DECLARE maxId int;
    DECLARE minId int;
    DECLARE curId int;
        SELECT MIN(`id`) INTO maxId FROM `tbl_film` WHERE `user_id`=13;
        SELECT MAX(`id`) INTO minId FROM  `tbl_film` WHERE `user_id`=13;
    REPEAT 
        SELECT `id` INTO curId FROM `tbl_film` WHERE `id` = @minID);
        IF (curId IS NULL) THEN
            INSERT INTO temp_missing(`missing_id`) VALUES (curId);
        END IF;
        SET minId = minId + 1; 
    UNTIL (minId <= maxId)
    END REPEAT;  // earlier I was missing this line which was giving error in Procedure.
    END; || 
```

# c# - 在 C# 中的安装向导期间安装 SQL Server 2005 并创建数据库

> ID：15608480
> 
> 赞同：1
> 
> 时间：2013-03-25T05:50:33.910
> 
> 标签：c#, sql-server-2005

我有一个 ac# 应用程序，它在 SQL Server 2005 中包含一个数据库。我希望首先安装 sql server 2005，在运行时（即安装我的 c# 应用程序期间）在该数据库中创建数据库和表。安装向导应该安装所有这些，然后安装我的 c# 应用程序。

我经历了 msdn 演练，但解决方案是 Visual Basic。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:07:37.450

安装应用程序后，首先在登录表单/启动表单上检查您的数据库。如果 DBMS 中不存在您的数据库，请在运行时恢复您的数据库的背面。

# filepicker.io - 文件选择器 UI 加载问题

> ID：15608482
> 
> 赞同：0
> 
> 时间：2013-03-25T05:50:44.000
> 
> 标签：filepicker.io

有时，Filepicker.io UI 无法在 iframe 中加载并给出错误：

错误：模块加载超时：main require.min.js:32 [http://requirejs.org/docs/errors.html#timeout](http://requirejs.org/docs/errors.html#timeout)

请提出解决此问题的方法，主机应用程序应如何处理。

# php - 在 PHP5.1.6 上运行时获取 json 为空输出

> ID：15608483
> 
> 赞同：2
> 
> 时间：2013-03-25T05:50:44.540
> 
> 标签：php, jquery, ajax, json

我正在尝试使用 ajax 和 jquery 从 php 获取二维数组。

问题是当我在 php5.4.7 中运行它时，我得到了预期的 json 响应

```
[["A",46],["B",35],["C",68],["D",30],["E",27],["F",85]] 
```

但是使用 php5.1.6 我得到了一个回应`json is null`。我怎样才能让它在 PHP5.1.6 中工作？

```
$.ajax({
    type: "POST",
    url: "get_data.php",
    data: "",
    dataType: "json",
    success: function (json) {
        var data = json;

        initChart(data);
    }
}); 
```

* * *

```
header('Content-Type: application/json');

$arr=array();
$arr = array(
    array('A', 46),
    array('B', 35),
    array('C', 68),
    array('D', 30),
    array('E', 27),
    array('F', 85),
);
echo json_encode($arr); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:53:02.703

`json_encode`需要`version > 5.2.0`

为了向后兼容，请使用以下代码

```
if (!function_exists('json_encode'))
{
function json_encode($a=false)
{
if (is_null($a)) return 'null';
if ($a === false) return 'false';
if ($a === true) return 'true';
if (is_scalar($a))
{
  if (is_float($a))
  {
    // Always use "." for floats.
    return floatval(str_replace(",", ".", strval($a)));
  }

  if (is_string($a))
  {
    static $jsonReplaces = array(array("\\", "/", "\n", "\t", "\r", "\b", "\f", '"'), array('\\\\', '\\/', '\\n', '\\t', '\\r', '\\b', '\\f', '\"'));
    return '"' . str_replace($jsonReplaces[0], $jsonReplaces[1], $a) . '"';
  }
  else
    return $a;
}
$isList = true;
for ($i = 0, reset($a); $i < count($a); $i++, next($a))
{
  if (key($a) !== $i)
  {
    $isList = false;
    break;
  }
}
$result = array();
if ($isList)
{
  foreach ($a as $v) $result[] = json_encode($v);
  return '[' . join(',', $result) . ']';
}
else
{
  foreach ($a as $k => $v) $result[] = json_encode($k).':'.json_encode($v);
  return '{' . join(',', $result) . '}';
}
}
} 
```

# iphone - 带有 4 个按钮的 UIImageView

> ID：15608495
> 
> 赞同：0
> 
> 时间：2013-03-25T05:51:31.153
> 
> 标签：iphone, ios, objective-c, xcode

我正在尝试使用 4 个按钮（如 imageview 子视图）顺时针旋转圆形图像。它使用核心动画与按钮一起旋转，但是当我点击任何按钮时它不会导航另一个页面，请帮助我

提前致谢

我在这里给出我的代码

```
 CABasicAnimation *fullRotation = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
    fullRotation.fromValue = [NSNumber numberWithFloat:0];
    fullRotation.toValue = [NSNumber numberWithFloat:((360*M_PI)/180)];
    fullRotation.duration = 150.0f;
    fullRotation.repeatCount = 20.0;
    [self.image_Wheel addSubview:self.btn1];
    [self.image_Wheel addSubview:self.btn2];
    [self.image_Wheel addSubview:self.btn3];
    [self.image_Wheel addSubview:self.btn4];
    [self.image_Wheel.layer addAnimation:fullRotation forKey:@"360"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:17:32.477

非常好的问题。您应该使用视图并在其上添加所有按钮和图像。旋转视图而不是图像和按钮将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:56:34.963

将`userInteractionEnabled`属性设置`UIImageView`为`YES`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T05:59:55.527

尝试

```
self.image_Wheel.userInteractionEnabled = YES; 
```

也尝试将 设置`btn`在前面。

# java - 获取 java.net.SocketTimeoutException：android 中的连接超时

> ID：15608499
> 
> 赞同：90
> 
> 时间：2013-03-25T05:52:12.653
> 
> 标签：java, android, httpurlconnection, java-io

我对android开发比较陌生。我正在开发一个 android 应用程序，我在其中向 Web 服务器发送请求并解析 JSON 对象。在与服务器通信时，我经常遇到`java.net.SocketTimeoutException: Connection timed out`异常。有时它会完美地工作而没有任何问题。我知道同样的问题已经被问过很多次了。但是，对于这个问题，我仍然没有得到任何令人满意的解决方案。我在下面发布了我的 logcat 和 app-server 通信代码。

```
public JSONObject RequestWithHttpUrlConn(String _url, String param){

    HttpURLConnection con = null;
    URL url;
    String response = "";
    Scanner inStream = null;
    PrintWriter out = null;
    try {
        url = new URL(_url);
        con = (HttpURLConnection) url.openConnection();
        con.setDoOutput(true);
        con.setRequestMethod("POST");
        if(param != null){
            con.setFixedLengthStreamingMode(param.getBytes().length);
        }
        con.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
        out = new PrintWriter(con.getOutputStream());
        if(param != null){
            out.print(param);
        }
        out.flush();
        out.close();
        inStream = new Scanner(con.getInputStream());

        while(inStream.hasNextLine()){
            response+=(inStream.nextLine());
        }
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } finally{
        if(con != null){
            con.disconnect();
        }if(inStream != null){
            inStream.close();
        }if(out != null){
            out.flush();
            out.close();
        }
    }
} 
```

日志猫：

```
03-25 10:55:32.613: W/System.err(18868): java.net.SocketTimeoutException: Connection 
timed out
03-25 10:55:32.617: W/System.err(18868):at org.apache.harmony.luni.platform.OSNetworkSystem.connect(Native Method)
03-25 10:55:32.617: W/System.err(18868):at dalvik.system.BlockGuard
$WrappedNetworkSystem.connect(BlockGuard.java:357)
03-25 10:55:32.617: W/System.err(18868):at 
org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:204)
03-25 10:55:32.617: W/System.err(18868):at 
org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:437)
03-25 10:55:32.617: W/System.err(18868):at        java.net.Socket.connect(Socket.java:1002)
03-25 10:55:32.621: W/System.err(18868):at 
org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>
(HttpConnection.java:75)
03-25 10:55:32.621: W/System.err(18868): at 
org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>
(HttpConnection.java:48)03-25 10:55:32.624: W/System.err(18868):at 
org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection$Address.connect
(HttpConnection.java:322)03-25 10:55:32.624: W/System.err(18868):at 
org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get
(HttpConnectionPool.java:89)03-25 10:55:32.628: W/System.err(18868):at 
org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHttpCon
nection(HttpURLConnectionImpl.java:285)
03-25 10:55:32.628: W/System.err(18868):at     org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.makeConn
ection(HttpURLConnectionImpl.java:267)
03-25 10:55:32.636: W/System.err(18868):at
org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.connect
(HttpURLConnectionImpl.java:205)
03-25 10:55:32.636: W/System.err(18868):at 
org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getOutputS
tream(HttpURLConnectionImpl.java:614)
03-25 10:55:32.636: W/System.err(18868):at 
com.myapp.core.JSONRequest.RequestWithHttpUrlConn(JSONRequest.java:63)
03-25 10:55:32.636: W/System.err(18868):    at com.myapp.core.DetailPage
$AsyncRecBooks.doInBackground(AKBookDetailView.java:265)
03-25 10:55:32.640: W/System.err(18868):    at com.myapp.core.DetailPage
$AsyncRecBooks.doInBackground(AKBookDetailView.java:1)
03-25 10:55:32.640: W/System.err(18868):    at android.os.AsyncTask$2.call
(AsyncTask.java:185)
03-25 10:55:32.640: W/System.err(18868):    at java.util.concurrent.FutureTask
$Sync.innerRun(FutureTask.java:306)
03-25 10:55:32.640: W/System.err(18868):    at java.util.concurrent.FutureTask.run
(FutureTask.java:138)
03-25 10:55:32.640: W/System.err(18868):    at 
java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
03-25 10:55:32.648: W/System.err(18868):    at 
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
03-25 10:55:32.648: W/System.err(18868):    at java.lang.Thread.run(Thread.java:1019)
03-25 10:55:32.652: E/JSON Parser(18868): Error parsing data org.json.JSONException:  
End of input at character 0 of 
```

任何人都可以帮助我找到解决方案吗？提前致谢....

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-03-28T14:29:56.860

我在网上搜索了很多关于连接超时异常的文档后，我理解的是，防止`SocketTimeoutException`超出了我们的限制。有效处理它的一种方法是定义连接超时，然后使用`try-catch`块来处理它。希望这对将来遇到同样问题的人有所帮助。

```
HttpUrlConnection conn = (HttpURLConnection) url.openConnection();

//set the timeout in milliseconds
conn.setConnectTimeout(7000); 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-07-07T16:02:27.630

我知道这个问题有点老了。但由于我在做研究时偶然发现了这一点，我认为添加一点可能会有所帮助。

如前所述，客户端无法解决该错误，因为它是与网络相关的问题。但是，您可以做的是重试连接几次。在真正的问题得到解决之前，这可能是一种解决方法。

```
for (int retries = 0; retries < 3; retries++) {
    try {
        final HttpClient client = createHttpClientWithDefaultSocketFactory(null, null);
        final HttpResponse response = client.execute(get);
        final int statusCode = response.getStatusLine().getStatusCode();
        if (statusCode != 200) {
            throw new IllegalStateException("GET Request on '" + get.getURI().toString() + "' resulted in " + statusCode);
        } else {                
            return response.getEntity();
        }
    } catch (final java.net.SocketTimeoutException e) {
        // connection timed out...let's try again                
    }
} 
```

也许这对某人有帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-06-08T15:51:34.143

如果您使用的是**Kotlin + Retrofit + Coroutines**，那么只需将`try`and`catch`用于网络操作，例如，

```
viewModelScope.launch(Dispatchers.IO) {
        try {
            val userListResponseModel = apiEndPointsInterface.usersList()
            returnusersList(userListResponseModel)
        } catch (e: Exception) {
            e.printStackTrace()
        }
    } 
```

其中，异常是类型`kotlin`而不是`java.lang`

这将处理每个异常，例如，

1.  异常
2.  套接字超时异常
3.  致命异常：DefaultDispatcher 等

这是我的`usersList()`功能

```
@GET(AppConstants.APIEndPoints.HOME_CONTENT)
suspend fun usersList(): UserListResponseModel 
```

**注意：** 你的 RetrofitClient 类必须有这个`client`

```
OkHttpClient.Builder()
            .connectTimeout(10, TimeUnit.SECONDS)
            .readTimeout(10, TimeUnit.SECONDS)
            .writeTimeout(10, TimeUnit.SECONDS) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-24T12:29:18.033

如果您在 localhost 中测试服务器，您的 Android 设备必须连接到同一个本地网络。那么您的APP使用的Server URL必须包含您的计算机IP地址而不是“localhost”掩码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-08T11:55:47.767

我在连接到 EC2 时遇到了同样的问题，问题出在安全组上，我通过在端口 5432 添加允许的 IP 来解决

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-17T20:39:57.590

我遇到了这个问题，解决方案是重新启动我的调制解调器（路由器）。之后我可以将我的应用程序连接到互联网。

我认为我正在使用的库没有正确管理连接，因为它只发生了几次。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-06T06:19:36.317

在 OkHttpClient.Builder() 对象中设置它

```
val httpClient = OkHttpClient.Builder()
        httpClient.connectTimeout(5, TimeUnit.MINUTES) // connect timeout
            .writeTimeout(5, TimeUnit.MINUTES) // write timeout
            .readTimeout(5, TimeUnit.MINUTES) // read timeout 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-25T07:08:20.267

对我来说，我刚刚重新启动了我的应用程序，它已经消失了。如果您使用的是模拟器，请尝试重新启动它。如果您使用的是物理设备，请检查互联网连接。试试看！

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-12-03T19:10:07.423

我得到了同样的错误，因为我错误地更改了语句的顺序

```
OkHttpClient okHttpClient = new OkHttpClient().newBuilder() .connectTimeout(20, TimeUnit.SECONDS).readTimeout(20,TimeUnit.SECONDS).writeTimeout(20, TimeUnit.SECONDS) .build(); 
```

更改 writeTimeout 和 readTimeout 的顺序后，错误解决。我使用的最终代码如下：

```
OkHttpClient okHttpClient = new OkHttpClient.Builder().connectTimeout(60, TimeUnit.SECONDS)
                    .writeTimeout(60, TimeUnit.SECONDS)
                    .readTimeout(60, TimeUnit.SECONDS)
                    .build(); 
```

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2013-10-11T13:48:16.240

```
public JSONObject RequestWithHttpUrlConn(String _url, String param){

    HttpURLConnection con = null;
    URL url;
    String response = "";
    Scanner inStream = null;
    PrintWriter out = null;
    try {
        url = new URL(_url);
        con = (HttpURLConnection) url.openConnection();
        con.setDoOutput(true);
        con.setRequestMethod("POST");
        if(param != null){
            con.setFixedLengthStreamingMode(param.getBytes().length);
        }
        con.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
        out = new PrintWriter(con.getOutputStream());
        if(param != null){
            out.print(param);
        }
        out.flush();
        out.close();
        inStream = new Scanner(con.getInputStream());

        while(inStream.hasNextLine()){
            response+=(inStream.nextLine());
        }
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } finally{
        if(con != null){
            con.disconnect();
        }if(inStream != null){
            inStream.close();
        }if(out != null){
            out.flush();
            out.close();
        }
    }
} 
```

# php - PHP 上传除 Web 根目录（htdocs）文件夹以外的目录？

> ID：15608502
> 
> 赞同：0
> 
> 时间：2013-03-25T05:52:43.020
> 
> 标签：php, file-upload

是否可以将上传目录更改为 PHP 中除 htdocs 文件夹之外的其他目录？因为我不希望我的文件直接暴露在网络上。可以做到吗？我使用我的桌面作为上传位置，但文件没有上传到这里！这是我的代码：

```
<?php
    if(isset($_FILES['image'])){
            $errors= array();
            $file_name = $_FILES['image']['name'];
            $file_size =$_FILES['image']['size'];
            $file_tmp =$_FILES['image']['tmp_name'];
            $file_type=$_FILES['image']['type'];   
            $file_ext=strtolower(end(explode('.',$_FILES['image']['name'])));

            $expensions= array("txt");      
            if(in_array($file_ext,$expensions)=== false){
                $errors[]="extension not allowed, please choose a JPEG or PNG file.";
            }
            if($file_size > 2097152){
            $errors[]='File size must be excately 2 MB';
            }               
            if(empty($errors)==true){
                move_uploaded_file($file_tmp,"/home/abhi/Desktop/uploads/".$file_name);
                echo "Success";
            }else{
                print_r($errors);
            }
        }
    ?>

    <form action="" method="POST" enctype="multipart/form-data">
    <input type="file" name="image" />
    <input type="submit"/>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:02:26.810

是的，有可能。您将其保存到的文件夹必须具有运行网络服务器的“用户”的正确权限。看看[我能像在 PHP 中一样找到正在运行 Web 服务器的用户吗？](https://stackoverflow.com/questions/827327/can-i-find-which-user-the-web-server-is-being-run-as-in-php)

# paypal - 交易状态：6 在测试信用卡交易中。金额未记入沙盒业务帐户

> ID：15608503
> 
> 赞同：1
> 
> 时间：2013-03-25T05:52:48.667
> 
> 标签：paypal, payflowlink

我使用 PayPal payflow 链接中的测试信用卡号进行了测试交易。交易状态如下，交易状态：6 响应代码：A
错误代码：00 金额未记入沙盒商业账户。我试图在错误代码参考的帮助下找到解决方案。但无法获得解决方案。帮我成功完成测试交易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:52:12.803

事务状态 6 表示事务尚未结算，并且处于挂起状态。您使用的是连接到 Payflow 帐户的 Payflow 帐户，还是仅使用未连接到沙盒帐户的 Payflow 帐户。通常，如果帐户连接到它将结算的沙箱，因为它是基于主机的并且应该实时结算。如果您使用的是未连接到沙盒帐户的测试支付流帐户，并且使用的是第 3 方处理器。它实际上不会解决，它宁愿显示一个跨状态 6，但你应该得到一个返回 0 的结果代码，这意味着它是成功的。它只会保持在trans state 6，因为它不会真正传递给处理器进行处理。如果您仍有疑问，如果您可以提供交易 ID#，我可以进一步调查。

# groovy - 如何将响应中的值与soapUI中的早期值进行比较？

> ID：15608508
> 
> 赞同：0
> 
> 时间：2013-03-25T05:53:20.033
> 
> 标签：groovy, soapui, security-testing

我正在使用soapUI和groovy来测试一个特定的值是否会再次重新生成？

我将有一个带有 JSON 的soapUI 请求，它在响应中给出一个 id，我应该提取 tat id 并将其存储在动态位置，以便当我再次运行测试用例时，我应该能够比较 prev id。如果两者都匹配，则测试用例应该失败，如果不匹配，则应该添加新值，并且当测试用例现在运行时，它应该比较前两个值。

这持续了至少 10000 次运行。所以第 10000 个 id 应该与所有第 9999 个 id 进行比较以检查重复。如果它存在，它应该失败，否则测试应该通过。

请帮助我..提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T21:34:29.467

2013 年 3 月...哇..抱歉，回答迟了，希望您能找到这个问题的答案。

我无权访问soapUI，因此我无法提供此答案的代码，但我会说..而不是将值保存在动态位置中，将其存储在测试套件、测试用例或项目级属性中每次你想比较..只需读取该值并进行比较。

我知道您将不得不存储 10000 次，因此与其创建这么多属性，不如将值存储在列表或映射中，然后将该映射存储在属性中。每次您需要检查该值时，您都可以访问该属性，找到您要查找的内容进行比较。

明天我可以访问soapUI，所以我会尝试为您编写一些代码。

# android - 实现动作条 sherlock

> ID：15608510
> 
> 赞同：-3
> 
> 时间：2013-03-25T05:53:28.620
> 
> 标签：android, actionbarsherlock, actionbarsherlock-map

我已经在我的项目中实现了 actionbarsherlock。我需要在另一台机器上运行/使用这个项目进行开发。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:05:32.833

如果我正确理解了您的问题，您可以尝试使用[此](https://bitbucket.org/)站点使用存储库进行代码托管`GIT`。这样，您将能够从任何具有 Internet 连接的计算机上访问您的代码。

# caching - 实现有界上下文时优化数据库查询

> ID：15608511
> 
> 赞同：3
> 
> 时间：2013-03-25T05:53:30.670
> 
> 标签：caching, orm, domain-driven-design, data-access-layer, bounded-contexts

在我们的项目中，我们正在尝试应用[限界上下文](http://en.wikipedia.org/wiki/Domain-driven_design#Bounded_context)思想，但我们面临着一种明显的性能问题。例如，我们有不同的类（在不同的上下文中）来表示系统中的用户：`Person`在我们的核心域上下文和`User`安全上下文中。因此，我们为每个聚合有两个不同的存储库，但它们使用 DB 中的同一个表，有时访问相同的数据。

在这种情况下，是否有最小化数据库往返的通用解决方案？是否有处理它的 ORM，或者我们应该自己编写一些缓存系统？

**upd：**数据库来自旧版应用程序，我们必须“按原样”使用它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T17:31:13.470

> 因此，我们为每个聚合有两个不同的存储库，但它们使用 DB 中的同一个表，有时访问相同的数据。

您将两个聚合存储在同一个表中这一事实表明设计存在问题。在这种情况下，您似乎有两个有界上下文 - 核心域的 BC（Person is here）和身份/访问 BC（User is here）。BC 是相关的，后者可以看作是前者的上游。`Person`核心域中的A在`User`身份 BC 中有一个对应，但它们并不是完全一样的东西。

除了 BC 之间的这种关系之外，还有关于行为所有权的问题。例如，Person 和 User 都可能有一个名字，要确定的是谁拥有更改名字的行为。这可以通过多种方式实现。人可能有自己的名字，更改应该传播到身份 BC。类似地，用户可能拥有对名称的更改，在这种情况下，它们必须通过同步机制传播给 Person。

总的来说，您的问题可以通过两种方式解决。首先，您可以将 Person 和 User 聚合存储在不同的表中。任何给定的查询都应该只使用这些表之一，并且它们可以在最终一致的情况下进行同步。另一种方法是将行为域模型与为查询设计的模型（[读取模型](http://gorodinski.com/blog/2012/04/25/read-models-as-a-tactical-pattern-in-domain-driven-design-ddd/)）分离。这样，您可以创建一个旨在为特定屏幕提供服务并具有自定义查询的读取模型，甚至可能在 ORM 之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T09:36:49.940

如果所有用户也是个人（有时外部服务也被建模为特殊用户），用户和个人应该在数据库上共享的唯一数据是他们的标识符。实际上，域模型中的每个实体都应该只保存对它们确保其不变量所需的数据的引用。

此外，我猜用户是由用户名标识的，而人员是由其他东西标识的（增值税代码左右..）。

因此，最简单的优化技术是**避免将那些不需要确保其不变量的信息封装在实体中**。

此外，您只需要一种有效的[上下文映射](http://en.wikipedia.org/wiki/Domain-driven_design#Context_map)技术即可在需要时轻松地从 User 传递到 Person。我为此使用[共享标识符](http://epic.tesio.it/doc/manual/shared_identifiers.html)。

例如，您可以在 User 类中公开 Person 的标识符，以便对 Person 的存储库的简单查询可以为您提供所需的数据。

最后，我建议您[阅读有关聚合根设计的 Vaughn Vernon 系列](http://dddcommunity.org/library/vernon_2011/)。

# c++ - 来自 Kuwahara 过滤器的奇怪结果

> ID：15608516
> 
> 赞同：10
> 
> 时间：2013-03-25T05:54:09.237
> 
> 标签：c++, opencv, image-processing, computer-vision

我正在用 C++ 实现一个 Kuwahara 过滤器，使用 OpenCV 来帮助打开和显示图像。这个想法很简单，但不知何故我得到了奇怪的结果。这里的成本：

```
#include "opencv2/opencv.hpp"
#include <iostream>
#include <iomanip>
#include <cmath>

using namespace std;
using namespace cv;

//This class is essentially a struct of 4 Kuwahara regions surrounding a pixel, along with each one's mean, sum and variance.
class Regions{
    int* Area[4];
    int Size[4];
    unsigned long long Sum[4];
    double Var[4];
    int kernel;
public:
    Regions(int _kernel) : kernel(_kernel) {
        for (int i = 0; i<4; i++) {
            Area[i] = new int[kernel*kernel];
            Size[i] = 0;
            Sum[i] = 0;
            Var[i] = 0.0;
        }
    }

    //Update data, increase the size of the area, update the sum
    void sendData(int area, int data){
        Area[area][Size[area]] = data;
        Sum[area] += data;
        Size[area]++;
    }
    //Calculate the variance of each area
    double var(int area) {
        int __mean = Sum[area]/Size[area];
        double temp = 0;
        for (int i = 0; i<Size[area]; i++) {
            temp+= (Area[area][i] - __mean) * (Area[area][i] - __mean);
        }
        if (Size[area]==1) return 1.7e38; //If there is only one pixel inside the region then return the maximum of double
                                           //So that with this big number, the region will never be considered in the below minVar()
        return sqrt(temp/(Size[area]-1));
    }
    //Call the above function to calc the variances of all 4 areas
    void calcVar() {
        for (int i = 0; i<4; i++) {
            Var[i] = var(i);
        }
    }
    //Find out which regions has the least variance
    int minVar() {
        calcVar();
        int i = 0;
        double __var = Var[0];
        if (__var > Var[1]) {__var = Var[1]; i = 1;}
        if (__var > Var[2]) {__var = Var[2]; i = 2;}
        if (__var > Var[3]) {__var = Var[3]; i = 3;}
        return i;
    }

    //Return the mean of that regions
    uchar result(){
        int i = minVar();
        return saturate_cast<uchar> ((double) (Sum[i] *1.0 / Size[i]));
    }
};

class Kuwahara{
private:
    int wid, hei, pad, kernel;
    Mat image;
public:
    Regions getRegions(int x, int y){
        Regions regions(kernel);

        uchar *data = image.data;

        //Update data for each region, pixels that are outside the image's boundary will be ignored.

        //Area 1 (upper left)
        for (int j = (y-pad >=0)? y-pad : 0; j>= 0 && j<=y && j<hei; j++)
            for (int i = ((x-pad >=0) ? x-pad : 0); i>= 0 && i<=x && i<wid; i++) {
                regions.sendData(1,data[(j*wid)+i]);
            }
        //Area 2 (upper right)
        for (int j = (y-pad >=0)? y-pad : 0; j<=y && j<hei; j++)
            for (int i = x; i<=x+pad && i<wid; i++) {
                regions.sendData(2,data[(j*wid)+i]);
            }
        //Area 3 (bottom left)
        for (int j = y; j<=y+pad && j<hei; j++)
            for (int i = ((x-pad >=0) ? x-pad : 0); i<=x && i<wid; i++) {
                regions.sendData(3,data[(j*wid)+i]);
            }
        //Area 0 (bottom right)
        for (int j = y; j<=y+pad && j<hei; j++)
            for (int i = x; i<=x+pad && i<wid; i++) {
                regions.sendData(0,data[(j*wid)+i]);
            }
        return regions;
    }

    //Constructor
    Kuwahara(const Mat& _image, int _kernel) : kernel(_kernel) {
        image = _image.clone();
        wid = image.cols; hei = image.rows;
        pad = kernel-1;
    }

    //Create new image and replace its pixels by the results of Kuwahara filter on the original pixels
    Mat apply(){
        Mat temp;
        temp.create(image.size(), CV_8U);
        uchar* data = temp.data;

        for (int j= 0; j<hei; j++) {
            for (int i = 0; i<wid; i++)
                data[j*wid+i] = getRegions(i,j).result();
        }
        return temp;
    }
};

int main() {
    Mat img = imread("limes.tif", 1);
    Mat gray, dest;
    int kernel = 15;
    gray.create(img.size(), CV_8U);
    cvtColor(img, gray, CV_BGR2GRAY);

    Kuwahara filter(gray, kernel);

    dest = filter.apply();

    imshow("Result", dest);
    imwrite("result.jpg", dest);
    waitKey();
} 
```

结果如下： ![在此处输入图像描述](../Images/a525487d897ed02de425535d6a2e32ab.png)

正如您所看到的，它与正确的结果不同，这些酸橙的边界似乎被复制并向上移动。如果我应用 15x15 过滤器，它会给我带来这样的一团糟：

![在此处输入图像描述](../Images/87bd378e1010e755763993da3513eed8.png)

我花了一整天的时间来调试，但到目前为止还没有找到。我什至手动对小图像进行了计算并与结果进行比较，没有发现任何差异。谁能帮我找出我做错了什么？非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T03:42:28.293

事实证明，我的代码没有任何问题，但我定义内核的方式是问题的根源。我的内核实际上是四个小 kuwahara 部分之一，而内核的正确定义是为每个像素计算数据的整个区域，因此包含所有四个部分的区域实际上是内核。所以当谈到一个 7x7 的“内核”时，我实际上应用了一个 15x15 的内核，可怕的结果并不是我想象的来自 15x15 的内核，而是来自 31x31。在那个尺寸下，桑原过滤器根本没有意义，奇怪的结果是不可避免的。

# c++ - ofstream 覆盖堆栈变量

> ID：15608517
> 
> 赞同：0
> 
> 时间：2013-03-25T05:54:13.143
> 
> 标签：c++, netbeans, g++

我正在为操作系统类开发一个“线程池”程序。本质上，文件是从 tar 文件中提取并写入磁盘，使用 5 个线程池。这是我的线程代码

```
#include <iostream>
#include <cstdlib>
using namespace std;

vector<Header*> headers;
vector<string> fileBlocks;
void* writeExtractedFiles(void* args)
{
    bool hasFilesLeft = true;
    ofstream outputFile;
    while(hasFilesLeft)
    {
        pthread_mutex_lock(&mutex);
        if(headers.size() != 0)
        {
            Header* hdr = headers.back();
            headers.pop_back();
            string fileBytes = fileBlocks.back();
            fileBlocks.pop_back();
            pthread_mutex_unlock(&mutex);

            outputFile.open(hdr->fileName.c_str(), ios::app);
            outputFile.rdbuf()->pubsetbuf(0,0);
            fileBytes = fileBytes.substr(0, hdr->fileSize);
            outputFile.put('0');
            outputFile.close();
            // This is a dummy object to check if the values are corrupted
            Header* test0 = headers.back();
            cout << "GRAWWR!";
            //chown(hdr->fileName.c_str(), hdr->userId, hdr->groupId);
            //chmod(hdr->fileName.c_str(), hdr->fileMode);
        }
        else
        {
            // We're done!
            hasFilesLeft = false;
            pthread_mutex_unlock(&mutex);
        }
    }
} 
```

*注意*到目前为止，我只用一个线程对其进行测试。显然，访问`headers`我的互斥锁之外的向量会适得其反。

问题是， 的值`test0`都搞砸了，超高的数字和胡说八道`fileName`。似乎我出于某种原因覆盖了我的堆栈变量。当我注释掉时，`outputFile.close();`我的变量值不会改变，但是当我保留它时，无论我是否真的将内容写入文件，事情都会变得不稳定。我知道一定有什么我错过了。我已经尝试完全摆脱缓冲区，将文件写入不同的位置，我能想到的任何东西。有什么建议么？

（我在 Windows 机器上测试它，但它是为 Linux 制作的）

# django - Django中的未绑定LocalError？

> ID：15608519
> 
> 赞同：0
> 
> 时间：2013-03-25T05:54:57.753
> 
> 标签：django, django-errors

我在 Django 中有一个这样的注册视图：

```
from django import forms
from django.contrib.auth.forms import UserCreationForm
from django.shortcuts import render_to_response, RequestContext, HttpResponseRedirect

def register(request):
    '''Registers the users'''

    if request.method == 'POST':
        form = UserCreationForm(request.POST)

        if form.is_valid():
            new_user = form.save()
            return HttpResponseRedirect('/index/') #Returns user to user if successfully logs in

        else:
            form = UserCreationForm()    #Redirects to the UserCreationForm is the form is invalid
            return render_to_response('registration/register.html', {'form':form}, context_instance=RequestContext(request))

    else:
        return render_to_response('registration/register.html', {'form':form}, context_instance=RequestContext(request)) 
```

当我尝试运行视图时，我得到`UnBound LocalError`.

```
#Full exception:
Traceback:
File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
  115\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/zurelsoft/workspace/fyp/summary/views.py" in register
  20\.         return render_to_response('registration/register.html', {'form':form}, context_instance=RequestContext(request))

Exception Type: UnboundLocalError at /
Exception Value: local variable 'form' referenced before assignment 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:57:01.017

对于`GET`您未定义的请求`form`。

我建议添加

```
form = UserCreationForm() 
```

行前

```
if request.method == 'POST': 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:57:04.370

如果方法未发布，则表单将进入最后一个`else`块

你应该在`request.POST`like之外定义你的表单

```
def register(request):
    '''Registers the users'''
    form = UserCreationForm()
    if request.method == 'POST':
        form = UserCreationForm(request.POST)

        if form.is_valid():
            new_user = form.save()
            return HttpResponseRedirect('/index/') #Returns user to user if successfully logs in

        else:
            form = UserCreationForm()    #Redirects to the UserCreationForm is the form is invalid
            return render_to_response('registration/register.html', {'form':form}, context_instance=RequestContext(request))

    else:
        return render_to_response('registration/register.html', {'form':form}, con 
```

# android - 如何在 Android 中获取印地语字体..？

> ID：15608520
> 
> 赞同：1
> 
> 时间：2013-03-25T05:55:00.317
> 
> 标签：android, fonts, hindi

我是 Android 领域的新手。我已经按照在模拟器上获取印地语字体的过程，但印地语字符仍然出现在方框中。请帮助我如何进行。我正在使用 android 2.2，juno 版本。任何有关上述问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-12T10:37:49.613

在 Android 的 TextView 上设置印地语字体

```
 TextView t = new TextView(this);
 Typeface Hindi = Typeface.createFromAsset(getAssets(), "fonts/mangle.ttf");
 t.setTypeface(Hindi);
 t.setText("Naveen Tamrakar"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T06:10:20.470

Android 尚不完全支持印地语（机器人字体）：

阅读此[链接](https://code.google.com/p/android/issues/detail?id=1618)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-02T16:09:11.277

[您可以从http://hindi-fonts.com](http://hindi-fonts.com)下载印地语字体并将其复制到手机的 /system/font 目录中。字体将被安装。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T06:12:20.967

在资产中创建一个文件夹作为“字体”。将您的 .ttf 字体文件放在其中。

然后尝试代码：

```
Typeface fontHindi = Typeface.createFromAsset(getAssets(), "fonts/font.ttf");
tv.setTypeface(fontHindi); 
```

这个对我有用。希望它也适合你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-13T05:20:36.810

首先下载hindi字体，d你得到的OTF/TTF文件，保存在asset文件夹中，**eclipse**已经有了这个文件夹，如果你使用的是**android studio**，那么在`project/app/src/main`.

然后在java文件中，假设你必须应用你的字体`TextView t1`，使用代码..

```
Typeface mytypeface= Typeface.createFromAsset(getAssets(),"font-file_name.TTF");
t1.setTypeface(mytypeface); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-11T13:58:12.037

这样您就可以**在 Android 中使用印地语字体**。

第 1 步：在 res --> values --> string.xml 文件中添加所有印地语文本

```
<resources>
<string name="app_name">गन्ने से समृद्धि&lt;/string>
<string name="ganne_ki_kheti">गन्ने  की  खेती</string>
<string name="sampark">संपर्क</string> 
```

第 2 步：在布局 xml 文件中添加文本标记为 android:text="@string/your_text"。例如见下文。

```
<TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginTop="32dp"
        android:text="@string/ganne_ki_kheti"
        android:textSize="32sp"
        android:textStyle="bold" /> 
```

# java - Android Processing 编程不会在设备上运行应用程序。我该如何解决？

> ID：15608521
> 
> 赞同：0
> 
> 时间：2013-03-25T05:55:03.847
> 
> 标签：java, android, processing

我目前正在使用 Processing，我想编写一个 android 应用程序。我已经成功地能够在 android 模拟器中启动 may 应用程序，但我无法让它在我的 Galaxy 2.0 选项卡上启动。我单击运行设备，但每次我都在最后收到一条消息，上面写着“等待设备可用”。我在想我可能需要以某种方式将处理指向我的 android 平板电脑。关于我做错了什么的任何想法。我在 Windows 7 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:23:43.577

这意味着在 eclipse 调试器工具中未检测到您的设备。您是否检查了“开发人员选项”选项卡，确保启用了 USB 调试。请参考其他链接，您可能会得到答案。
[点击这里](https://stackoverflow.com/questions/4179178/galaxy-tab-on-device-debug)

[使用 USB 电缆连接时在 Eclipse 中未检测到设备](https://stackoverflow.com/questions/8063147/device-not-detected-in-eclipse-when-connected-with-usb-cable)

# azure - 如何在不使用 Sql Azure 数据库的情况下运行 Azure 云服务？

> ID：15608522
> 
> 赞同：0
> 
> 时间：2013-03-25T05:55:12.627
> 
> 标签：azure, azure-sql-database

我的 azure 应用程序使用 azure sql 数据库成功运行，但现在我想使用我自己的数据库服务器运行云应用程序，因为它们的数据安全性。为此，我们可以使用云应用程序从我们自己的系统建立本地数据库连接，并使用以下链接通过以下步骤完美连接到我的数据库，

[http://www.codeproject.com/Articles/261063/Azure-Virtual-Network-Connecting-Local-Database](http://www.codeproject.com/Articles/261063/Azure-Virtual-Network-Connecting-Local-Database)

```
 After this i deployed my application in to azure and it deployed without any error.but when i try to run  my cloud application using cloud url like xxx.cloudapp.net  getting an error like 
```

“在建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。找不到服务器或无法访问该服务器。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者： TCP 提供程序，错误：0 - 请求的名称有效，但未找到请求类型的数据。）”。

请给出一些建议，为什么会出现此错误。

谢谢，

PCSSCP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:11:02.890

尝试从网络外部的另一台计算机使用 SQL 管理进行连接。我相信在 Azure 云服务中发布没有问题，但你的 SQL 服务器存在连接问题。

亚瑟奥利维拉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:13:26.903

您必须远程到 VM 并检查 SQL Server 端口是否打开，与 SQL Server 机器相同。我曾经将本地数据库与基于云的应用程序连接起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-28T08:08:06.983

这是 SQL Server 的间歇性问题。

如果有帮助，请检查此链接， [IntermittentSQLServerIssue](https://serverfault.com/questions/261369/intermittent-problem-connecting-to-sql-server)

# c# - Windows 服务 - 一次只允许一个实例

> ID：15608525
> 
> 赞同：0
> 
> 时间：2013-03-25T05:55:49.820
> 
> 标签：c#, windows, service

我尝试使用下面的代码来限制 Windows 服务的第二个实例，但是下面的代码对我不起作用，任何人都可以帮助我。我已经设置了运行服务的时间间隔，即 5 分钟，如果第一个实例启动并运行，5 分钟后第二个实例启动，即使第一个实例没有完成。

```
static class Program
{
    [STAThread]
    static void Main()
    {

     bool ok;
     System.Threading.Mutex m = new System.Threading.Mutex(true, "ImageImportService", out ok);
        if (!ok)
        {
            return;
        }
        GC.KeepAlive(m);
        if (PriorProcess() != null)
        {
            return;
        }
        ServiceBase[] ServicesToRun;
        ServicesToRun = new ServiceBase[] 
            { 
                new ImageImportService() 
            };
        ServiceBase.Run(ServicesToRun);
    }
    public static Process PriorProcess()
    {
        Process curr = Process.GetCurrentProcess();
        Process[] procs = Process.GetProcessesByName(curr.ProcessName);
        foreach (Process p in procs)
        {
            if ((p.Id != curr.Id) && (p.MainModule.FileName == curr.MainModule.FileName))
                return p;
        }
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:23:27.680

服务控制管理器是 Windows 的一个组件，如果 Windows 服务已经在运行，则它不允许启动它。只是依靠它。

您需要做的主要事情是永远不要直接启动您的可执行文件。相反，`ServiceController`在从代码启动服务时使用类，在`services.msc`手动启动/停止服务时使用控制面板 ( )。

在某些情况下，您可能需要采取额外的步骤来确保服务在停止后不会保留任何资源，从而阻止其自己的后续启动，直到某个较低级别的超时。但是您的问题中没有任何内容表明您已经遇到过此类问题（例如，重新绑定 TCP 端口）。

# magento - Magento 没有为 M2Epro 订单创建订单

> ID：15608535
> 
> 赞同：0
> 
> 时间：2013-03-25T05:56:35.163
> 
> 标签：magento, m2e-pro

我已经用 magento 实现了 M2Epro。

我使用 Ebay_Available_quantity 属性来设置 ebay 可用数量。

但有时网站正常库存为零，产品缺货，但仍在 ebay 上上市。

当有人在 ebay 上购买时。它确实在 M2Epro 上下订单。但不允许将订单作为 magento 订单。

是因为缺货还是数量为零？

我们可以对第三方销售有例外吗？

谢谢阿比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-24T20:25:06.237

我们前段时间也遇到过这个问题，这是 M2e 在电子邮件中回答的内容：

> 感谢您提供的详细信息。
> 
> 我检查了您的 FBA 订单 XXXX，并且我了解您希望为 FBA 订单创建 Magento 订单不依赖于库存情况。
> 
> 让我解释一下 Magento 订单的创建逻辑。在 M2e Pro 中导入渠道订单时，M2e Pro 会检查帐户设置 > 订单选项卡中提供的设置。如果提供了用于创建 Magento 订单的相应设置 - M2E Pro 向 Magento 发送请求以创建渠道订单的 Magento 订单。
> 
> Magento 订单是根据标准 Magento 功能和核心模型创建的。如果产品缺货或“已禁用”或 Magento 中没有可用数量，Magento 不允许创建订单。应满足这些要求，以便成功创建订单。
> 
> M2e Pro 不能影响 Magento 订单创建过程的逻辑。如果您希望在一个 FBA 订单中创建 Magento 订单，您可以临时设置“库存”状态和可用数量。
> 
> 希望这个解释会有所帮助。请让我知道我是否可以为您提供其他帮助。

下一封电子邮件：

> 我们的其他客户使用延期交货功能。作为产品数量为 0 时创建订单的可能解决方法，您可以允许需要的产品（产品应该有库存，管理数量 - “是”。如果 qty=0，这将允许为相应的 FBA 订单创建 Magento 订单。您可以在 Magento 产品库存中设置此参数。
> 
> 我已就您的情况咨询了我们的开发部门。作为一种可能的解决方法，我们可以为您提供负责订单功能的部分代码。如果您的开发人员能够调整所需的更改，我们将很乐意为您提供帮助。另请注意，当应用对代码的一些自定义修改时，我们将不保证正常工作。如果您的开发人员批准了此建议，请将您的确认发送给我们，我会将部分代码发送给您。

他们想提供的代码是无用的，这只是暗示魔法发生在

```
app/code/community/Ess/M2ePro/Model/Order.php
public function createMagentoOrder() 
```

这很明显。

请考虑延期交货功能会带来其他问题，因此我们不使用此功能，目前可以忍受这种情况。

对我来说，有 FBA 库存但没有 magento 库存是一个非常重要和标准的情况，所以我不明白他们为什么不解决问题。

如果有时间，我们将自己修复。

# php - 使用 ajax 的 jquery 框架

> ID：15608537
> 
> 赞同：0
> 
> 时间：2013-03-25T05:56:39.587
> 
> 标签：php, jquery, ajax, wordpress

先说一下我的情况：

我即将创建一个表单，其中每个字段都有一个帮助按钮。现在，如果有人单击帮助，它将从数据库中获取数据并在 div 中显示这些数据。例如

```
<div class="main">
 <div class="form">
   <!-- my form code will be here-->
 </div>

 <div class="help">
   <!-- this div will show some data using ajax. I need to make database query using ID of help then show the data here-->
 </div>

</div><!--end of main--> 
```

现在我在 w3 学校阅读了有关 ajax 的信息，我在那里找到了解决方案。这是：

```
<script>
 function loadXMLDoc(a)
 {
 var xmlhttp;
 var temp = "myname.php?id=" + a;

 if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
         xmlhttp=new XMLHttpRequest();
    }
 else
    {// code for IE6, IE5
       xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
       xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
             document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
        }
      }
 xmlhttp.open("GET",temp,true);
 xmlhttp.send();
}
</script>

<h2>AJAX</h2>
  <button type="button" onclick="loadXMLDoc('1')">Request 1</button>
    <button type="button" onclick="loadXMLDoc('2')">Request 2</button>
  <button type="button" onclick="loadXMLDoc('3')">Request 3</button>
<div id="myDiv"></div> 
```

如果我单击一个按钮并将 id 作为参数发送它的工作原理。在进行了一些谷歌搜索后，我发现最好使用 jQuery 框架进行 ajax。现在我在谷歌没有得到任何关于这个的初学者教程。

现在，如果在这种情况下可以使用上面的代码，请给我一些链接或帮助，说明如何在 Javascript 上进行数据库查询并获取值并使用 Ajax 将其设置为 div。

如果这不是使用 Ajax 的好方法，那么请给我一些说明，告诉我如何使用 Ajax 从数据库中获取值并将其显示在特定的 div 中。请记住，我需要发送用于查询数据库的函数的帮助 ID。

我正在使用 wordpress 框架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T05:59:58.813

在您的页面中包含[jquery.js](http://digwp.com/2009/06/including-jquery-in-wordpress-the-right-way/)然后它就像

```
function loadXMLDoc(a) {
    $('#myDiv').load("myname.php?id=" + a);
} 
```

如果您想要一个完整的 jquery 解决方案，那么我建议您也使用 jquery 事件注册

HTML

```
<button type="button" class="requester" data-request="1">Request 1</button>
<button type="button" class="requester" data-request="2">Request 2</button>
<button type="button" class="requester" data-request="3"Request 3</button>
<div id="myDiv"></div> 
```

JS

```
$(function() {
    $('.requester').click(function() {
        $('#myDiv').load("myname.php?id="
                + $(this).data('request'));
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:21:43.130

```
$.post('myname.php',{id:a},function(data){ $('#myDiv').html(data); }); 
```

# azure - 即使在注销后，Azure ACS 也会保留身份

> ID：15608541
> 
> 赞同：0
> 
> 时间：2013-03-25T05:56:46.323
> 
> 标签：azure

我有一个使用 Azure ACS 进行联合身份验证的网站，该网站发布在云中。一旦我作为一个 gmail 用户从 google 提供商注销并尝试使用其他 gmail 凭据登录，该网站没有为我提供登录选项，它直接访问以前的 gmail 凭据并将我重定向到 gmail 主页。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:36:44.497

您还必须从您的应用程序中注销。仅当您被重定向以再次登录 Google 时，从 Google 退出才会影响。但是一旦通过 Google 的身份验证，您现在就可以`new session`在自己的网站上拥有一个。并且将在该`our own`网站上登录，直到 (a) 您的会话到期或 (b) 您明确退出。

使用 WIF/ACS 时，要显式退出 Web 应用程序，您需要执行以下方法：

```
var wsFedModule = FederatedAuthentication.WSFederationAuthenticationModule;
wsFedModule.SignOut(); 
```

您可以在此处阅读有关 FederatedAuthentication的更多信息，并[在](http://msdn.microsoft.com/en-us/library/hh737299.aspx)[此处](http://msdn.microsoft.com/en-us/library/system.identitymodel.services.federatedauthentication.aspx)阅读特定的 SingOut 方法。

请注意参考资料 - 它们都来自 .NET Framework 4.5 和`System.IdentityModel.Services`汇编版本 4.0.0.0！我强烈建议使用该框架版本和程序集，而不是使用 .NET Framework 3.5 (4.0) 和 WIF 程序集`Microsoft.IdentityModel`。

# android - 如何在 android 设备中查找 simcard 是否更改？

> ID：15608551
> 
> 赞同：1
> 
> 时间：2013-03-25T05:57:27.120
> 
> 标签：android, android-layout, android-intent

在我的项目中，需要检查 simcard 是否在 android 中更改。

我指的是很多问题，`Stack Overflow`但`blog`没有得到任何正确的方法。

**我想做一个简单的任务，如下所示。**

```
when simcard is change that time print some message. 
```

**问题。**

1.  一些安卓设备`CDMA`和`GSM`. 那么呢`CDMA`？

2.  GSM 哪个 id 是唯一用于检查 simcard 的`change or not`？

3.  何时检查 SIM 卡是否更换，因为某些手机必须关闭手机取出电池并更换 SIM 卡，而有些手机可以直接更换 SIM 卡而无需移除手机意味着手机有 SIM 卡插槽。

给我一些`guideline`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:04:59.643

有一个建议：-

在您的应用程序启动（第一次）保存/存储 SIM 的唯一编号（订户 ID）。

在每次手机启动时再次获取此唯一编号`SIM(Subscriber ID).`并与您存储在应用程序中的内容相匹配。如果匹配，则可以，否则更改 sim。以下是您获取`SubscriberID`号码所需的方法。

```
IMSI = m_telephonyManager.getSubscriberId(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:01:12.980

更换 SIM 卡时（设备将重新启动），因此您可以创建一个在首选项中存储 SIM 序列号的服务，然后在服务启动时将存储的序列号与当前 SIM 中的序列号进行比较。

以下是访问 SIM 详细信息的详细信息：[使用 Android 应用程序访问 SIM 卡？](https://stackoverflow.com/questions/2372757/access-the-sim-card-with-an-android-application)

# python - Python 将 html 转换为文本并模仿格式

> ID：15608555
> 
> 赞同：11
> 
> 时间：2013-03-25T05:57:37.423
> 
> 标签：python, html, beautifulsoup

我正在学习 BeautifulSoup，并找到了许多“html2text”解决方案，但我正在寻找的解决方案应该模仿格式：

```
<ul>
<li>One</li>
<li>Two</li>
</ul> 
```

会成为

```
* One
* Two 
```

和

```
Some text
<blockquote>
More magnificent text here
</blockquote>
Final text 
```

至

```
Some text

    More magnificent text here

Final text 
```

我正在阅读文档，但我没有看到任何直截了当的内容。有什么帮助吗？我愿意使用beautifulsoup以外的东西。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-25T06:29:03.007

看看 Aaron Swartz 的[html2text](https://github.com/aaronsw/html2text)脚本（可以安装`pip install html2text`）。请注意，输出是有效的[Markdown](http://en.wikipedia.org/wiki/Markdown)。如果出于某种不完全适合您的原因，一些相当微不足道的调整应该可以为您提供问题中的确切输出：

```
In [1]: import html2text

In [2]: h1 = """<ul>
   ...: <li>One</li>
   ...: <li>Two</li>
   ...: </ul>"""

In [3]: print html2text.html2text(h1)
  * One
  * Two

In [4]: h2 = """<p>Some text
   ...: <blockquote>
   ...: More magnificent text here
   ...: </blockquote>
   ...: Final text</p>"""

In [5]: print html2text.html2text(h2)
Some text

> More magnificent text here

Final text 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T06:40:36.370

我有一个更简单任务的代码：删除 HTML 标记，并在适当的位置插入换行符。也许这可以成为您的起点。

Python 的`textwrap`模块可能有助于创建缩进的文本块。

[http://docs.python.org/2/library/textwrap.html](http://docs.python.org/2/library/textwrap.html)

```
class HtmlTool(object):
    """
    Algorithms to process HTML.
    """
    #Regular expressions to recognize different parts of HTML. 
    #Internal style sheets or JavaScript 
    script_sheet = re.compile(r"<(script|style).*?>.*?(</\1>)", 
                              re.IGNORECASE | re.DOTALL)
    #HTML comments - can contain ">"
    comment = re.compile(r"<!--(.*?)-->", re.DOTALL) 
    #HTML tags: <any-text>
    tag = re.compile(r"<.*?>", re.DOTALL)
    #Consecutive whitespace characters
    nwhites = re.compile(r"[\s]+")
    #<p>, <div>, <br> tags and associated closing tags
    p_div = re.compile(r"</?(p|div|br).*?>", 
                       re.IGNORECASE | re.DOTALL)
    #Consecutive whitespace, but no newlines
    nspace = re.compile("[^\S\n]+", re.UNICODE)
    #At least two consecutive newlines
    n2ret = re.compile("\n\n+")
    #A return followed by a space
    retspace = re.compile("(\n )")

    #For converting HTML entities to unicode
    html_parser = HTMLParser.HTMLParser()

    @staticmethod
    def to_nice_text(html):
        """Remove all HTML tags, but produce a nicely formatted text."""
        if html is None:
            return u""
        text = unicode(html)
        text = HtmlTool.script_sheet.sub("", text)
        text = HtmlTool.comment.sub("", text)
        text = HtmlTool.nwhites.sub(" ", text)
        text = HtmlTool.p_div.sub("\n", text) #convert <p>, <div>, <br> to "\n"
        text = HtmlTool.tag.sub("", text)     #remove all tags
        text = HtmlTool.html_parser.unescape(text)
        #Get whitespace right
        text = HtmlTool.nspace.sub(" ", text)
        text = HtmlTool.retspace.sub("\n", text)
        text = HtmlTool.n2ret.sub("\n\n", text)
        text = text.strip()
        return text 
```

代码中可能会留下一些多余的正则表达式。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-07T09:56:36.137

Python 的内置 html.parser（早期版本中的 HTMLParser）模块可以轻松扩展以创建一个简单的翻译器，您可以根据您的确切需求进行定制。当解析器遍历 HTML 时，它可以让您挂钩某些事件。

由于其简单的性质，您不能像使用 Beautiful Soup 那样在 HTML 树中导航（例如兄弟节点、子节点、父节点等），但对于像您这样的简单案例来说，它应该足够了。

[html.parser 主页](https://docs.python.org/3/library/html.parser.html)

在您的情况下，您可以通过在遇到特定类型的开始标签或结束标签时添加适当的格式来使用它：

```
from html.parser import HTMLParser
from os import linesep

class MyHTMLParser(HTMLParser):
    def __init__(self):
        HTMLParser.__init__(self, strict=False)
    def feed(self, in_html):
        self.output = ""
        super(MyHTMLParser, self).feed(in_html)
        return self.output
    def handle_data(self, data):
        self.output += data.strip()
    def handle_starttag(self, tag, attrs):
        if tag == 'li':
            self.output += linesep + '* '
        elif tag == 'blockquote' :
            self.output += linesep + linesep + '\t'
    def handle_endtag(self, tag):
        if tag == 'blockquote':
            self.output += linesep + linesep

parser = MyHTMLParser()
content = "<ul><li>One</li><li>Two</li></ul>"
print(linesep + "Example 1:")
print(parser.feed(content))
content = "Some text<blockquote>More magnificent text here</blockquote>Final text"
print(linesep + "Example 2:")
print(parser.feed(content)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-24T17:11:26.630

在使用 samaspin 的解决方案时，如果存在非英文 unicode 字符，则解析器将停止工作并仅返回一个空字符串。为每个循环初始化解析器可确保即使解析器对象损坏，它也不会为后续解析返回空字符串。添加到 samaspin 的解决方案中，`<br>`标签的处理也是如此。在处理 HTML 代码而不清理 html 标签方面，可以添加后续标签并将其预期输出写入函数`handle_starttag`

```
 class MyHTMLParser(HTMLParser):
            """
            This class will be used to clean the html tags whilst ensuring the
            format is maintained. Therefore all the whitespces, newlines, linebrakes, etc are
            converted from html tags to their respective counterparts in python.

            """

            def __init__(self):
                HTMLParser.__init__(self)

            def feed(self, in_html):
                self.output = ""
                super(MyHTMLParser, self).feed(in_html)
                return self.output

            def handle_data(self, data):
                self.output += data.strip()

            def handle_starttag(self, tag, attrs):
                if tag == 'li':
                    self.output += linesep + '* '
                elif tag == 'blockquote':
                    self.output += linesep + linesep + '\t'
                elif tag == 'br':
                    self.output += linesep + '\n'

            def handle_endtag(self, tag):
                if tag == 'blockquote':
                    self.output += linesep + linesep

        parser = MyHTMLParser() 
```

# java - 需要从 Eclipse 中触发一项规则，该规则位于流口水 guvnor 中

> ID：15608565
> 
> 赞同：0
> 
> 时间：2013-03-25T05:58:44.790
> 
> 标签：java, drools, drools-guvnor

虽然我能够从 Eclipse 中触发那些在项目内部创建的规则，但我无法触发在部署 pojo 模型后在 drools guvnor 中创建的规则？我的方法对吗？关于我的方法有什么建议吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:38:32.260

您可能想要使用 KnowlegdeAgent，这允许您从 guvnor 中的已编译包创建 kbase。 [http://docs.jboss.org/drools/release/5.5.0.Final/drools-guvnor-docs/html/ch09.html#d0e3433](http://docs.jboss.org/drools/release/5.5.0.Final/drools-guvnor-docs/html/ch09.html#d0e3433)

或者，您可以使用变更集从 guvnor 下载规则文件并在那里对 url 进行硬编码，例如： [https ://github.com/droolsjbpm/jbpm/blob/5.4.0.Final/jbpm-test/src/main /java/org/jbpm/test/JbpmJUnitTestCase.java#L213](https://github.com/droolsjbpm/jbpm/blob/5.4.0.Final/jbpm-test/src/main/java/org/jbpm/test/JbpmJUnitTestCase.java#L213)

克里斯

# facebook - 使用 Facebook 图形搜索 API 搜索“所有”公共事件

> ID：15608568
> 
> 赞同：3
> 
> 时间：2013-03-25T05:58:57.553
> 
> 标签：facebook, facebook-graph-api

虽然这个问题以前曾被问过，但那是一年前的事了，并不是我想问的。所以，这里是：

我正在使用[https://graph.facebook.com/search?q=conference&type=event](https://graph.facebook.com/search?q=conference&type=event)来查找所有具有关键字“会议”的事件。

问题1：我只得到一页结果，页面底部的分页链接产生一个没有数据的页面（只是一些结构）。但是，从我的 facebook 搜索我可以看到更多的事件。如何搜索“全部”（或相当数量的事件说 200+）？

问题 2：如果搜索结果有限，我该如何限制仅来自一个国家的事件。因此，例如，我只对美国的会议感兴趣，而不是欧洲的会议。我怎么做？

问题3：如何搜索多个关键字。假设我想搜索“会议和数据”。

我会很感激你的帮助。

谢谢P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:32:54.300

要搜索多个关键字，请使用“+”。在这种情况下，“会议+数据”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-30T21:09:51.783

关于问题 1：请注意，q=conference 表示您正在搜索其中包含关键字会议的事件。您不是按类别搜索事件。如果您想搜索所有活动，您可以使用 q=*，这将为您提供所有公开的 Facebook 活动。它们不会按位置/距离过滤。我试图通过位置和距离来限制搜索，但到目前为止没有任何成功。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-25T07:56:46.533

将 &limit=200 添加到您的查询字符串

# ios - 将 Json 数据保存到 coredata IOS 并同时在 UITableView 中显示

> ID：15608569
> 
> 赞同：1
> 
> 时间：2013-03-25T05:59:05.097
> 
> 标签：ios, xcode, core-data

我是 IOS Xcode 编程的新手。目前我正在开发一个使用 Json 数据的应用程序。该应用程序读取可能非常大的 Json 数据。我需要解析数据并将其存储到 Core Data 中，这样当应用程序下次运行时，它可以简单地从那里读取数据，从而节省大量时间。我尝试过使用`dispatch_async`，但 UI 似乎在保存数据时被冻结，这也导致应用程序崩溃。我曾经`ASIHTTPRequest`读取和解析 Json 数据，它工作得很好，但它是我必须将数据保存到核心数据并`UITableView`同时加载它的部分，这被证明是痛苦的。如果有人可以帮助我，我将不胜感激。

这是我的代码

```
NSString *connectionString = [NSString stringWithFormat:@"%@%@?song_id=%@", SERVER_STRING, URL_GET_SONG_LIST, lasSongID];

NSLog(@"COnnection String is:\n%@", connectionString);
NSURL* url = [NSURL URLWithString:connectionString];

//The actual request
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];

// Becoming the request delegate
//To get callbacks like requestFinished: or requestFailed:
[request setDelegate:self];
NSLog(@"Fetching Dataaaaaaaa from %@",url);

// Fire off the request
[request startAsynchronous];

-(void) requestFinished: (ASIHTTPRequest *) request 
{
    NSString *theJSON = [request responseString];
    NSLog(@"Dataaaaaaaa,%@",theJSON);
    NSDictionary *responseDictionary = [theJSON JSONValue];

    if ([[responseDictionary valueForKey:@"Message"] isKindOfClass:[NSArray class]])
    {
        [songsArray addObjectsFromArray:[responseDictionary valueForKey:@"Message"]];

        if (songsArray.count > 0) 
        {
            dispatch_async (bgQueue, ^(void){
                [self saveDownloadedSongs];            
            });
        }
    }
} 
```

saveDownloadedSongs--> 在经过一些验证后将 Json 保存到我的核心数据中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:20:22.937

1.  为您要存储的实体创建一个 NSFetchedResultsController

    ```
    @property (nonatomic) NSFetchedResultsController fetchedResultsController;
    //Initialize it in your viewDidLoad 
    ```

2.  你的视图控制器应该是你的 NSFetchedResultsControllerDelegate
3.  为 NSFetchedResultsController 实现委托方法

    ```
    - (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
    {
        [self.tableView reloadData];
    } 
    ```

4.  为 UITableView 实现数据源方法

    ```
    - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
    {
        return self.fetchedResultsController.sections.count;
    }

    - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
    {
        return [self.fetchedResultsController.sections[0] numberOfObjects];
    }

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *CellIdentifier = @"Cell";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

        if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        }

        SomeObject *object = [self.fetchedResultsController objectAtIndexPath:indexPath];
        cell.label.text = object.property
        return cell;
    } 
    ```

5.  每次持久化一个新对象时，您的委托将**自动**触发并重新加载表，该表现在包含新对象。

**编辑：**

如果您想节省时间，请创建一个新的主从应用程序。在您的 MasterViewController 中，您将找到步骤 1 的源代码和步骤 3 中的平滑动画。

# ios - 通过过滤一些值从现有字典创建新字典

> ID：15608573
> 
> 赞同：1
> 
> 时间：2013-03-25T05:59:27.660
> 
> 标签：ios, objective-c

好的，这是我的问题。

我将对象数组（Person 类）添加到字典中。每个都包含 fullName 和一些其他属性。我通过循环生成键创建字典

```
NSString -stringWithFormat:@"person%d" 
```

为了方便起见，让我们说我的字典看起来像

```
NSDictionary *dict=@{@"person1": @"Ilena Jennifer DCruz", @"person2":@"James Bond", @"person3":@"Skylark", @"person4":@"Xan Xiaa Zuang Ming"}; 
```

现在，我需要一本只有每个人名字的字典。

我怎么能拥有它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-25T06:01:53.903

试试这个：

```
NSDictionary *dict=@{@"person1": @"Ilena Jennifer DCruz",
                     @"person2":@"James Bond",
                     @"person3":@"Skylark",
                     @"person4":@"Xan Xiaa Zuang Ming"
                     };

NSMutableDictionary *firstNameDict=[NSMutableDictionary new];
for (NSString *key in dict) {
    [firstNameDict setObject:[dict[key]componentsSeparatedByString:@" "][0]
                      forKey:key];
}
NSLog(@"->%@",firstNameDict); 
```

输出：

```
->{
   person1 = 伊莲娜；
   人2 =詹姆斯；
   person3 = 斯凯拉尔；
   person4 = Xan；
 }

```

# magento - Magento config.xml system.xml adminhtml.xml

> ID：15608574
> 
> 赞同：17
> 
> 时间：2013-03-25T05:59:34.417
> 
> 标签：magento

任何人都可以对以下主题有所了解吗？

Magento 的 etc/config.xml、system.xml 和 adminhtml.xml 之间有什么明显区别？

什么代码区分上述三个 XML 文件？

它仅适用于核心 magento 知识。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-25T07:38:50.693

这些`config.xml`文件包含 Magento 的全局配置信息，可用于所有 Magento “区域”。一开始，没有`adminhtml.xml`配置文件。此信息位于`config.xml`。Magento 的更高版本将这些信息分解为文件，并且仅在系统为后端管理页面提供服务时`adminhtml.xml`将这些文件与其他文件合并。`config.xml`

这些`system.xml`文件**不是**全局配置的一部分。它们是一个单独的系统，用于在后端应用程序中自动构建 UI 以设置系统配置值。

**Magento如何**加载这些文件是一个长期涉及的故事，不适合 Stack Overflow 的答案。如果您对这类事情感兴趣，我有一个[四篇文章系列详细介绍了这一点。](http://alanstorm.com/category/magento#magento_config)

简短版本是`config.xml`文件在此处加载

```
#File: app/code/core/Mage/Core/Model/Config.php
$this->loadModulesConfiguration(array('config.xml',$resourceConfig), $this); 
```

`adminhtml.xml`文件在这里加载

```
#File: app/code/core/Mage/Admin/Model/Config.php
Mage::getConfig()->loadModulesConfiguration('adminhtml.xml', $adminhtmlConfig); 
```

和`system.xml`文件在这里加载

```
#File: app/code/core/Mage/Adminhtml/Model/Config.php
$config = Mage::getConfig()->loadModulesConfiguration('system.xml')
->applyExtends(); 
```

# javascript - 向下滚动页面时如何保持浮动顶栏？

> ID：15608577
> 
> 赞同：0
> 
> 时间：2013-03-25T05:59:53.310
> 
> 标签：javascript, html, css, styles

大家好，我想在页面顶部有一个浮动顶栏，即使我向下滚动页面也可以看到。我尝试使用以下代码实现此目的，但由于某种原因它不起作用！在尝试排除故障后，我注意到**$(document).ready(function()** 永远不会成为真的！你们能帮我看看这里有什么问题吗？

浮动顶栏：

```
<div class="FlyingTopBar">
    <div class="GlobalNav">    
      <div class="Content">
        <span class="Line"></span>

        <a class="Active" href="/" title="Home">Home</a>
        <span class="Line"></span>
        <a  href="/link1.html" title="Link">Link</a>
        <span class="Line"></span>
        <a  href="/link2.html" title="Link">Link</a>
        <span class="Line"></span>
        <a  href="/link3.html" title="Link">Link</a>
        <span class="Line"></span>
        <a  href="/link4.html" title="Link">Link</a>
        <span class="Line"></span>

        <a  href="/link5.html" title="Link">Link</a>
        <span class="Line"></span>
        <a  href="/link6.html" title="Link">Link</a>
        <span class="Line"></span>

        <a  href="/link7.html" title="Link">Link</a>
        <span class="Line"></span>

        <a  href="/link8.html" title="Link">Link</a>
        <span class="Line"></span>
        <a href="/link9.html" title="Link">Link</a>
        <span class="Line"></span>
        <a href="/link10.html" title="Link">Link</a>
        <span class="Line"></span>
        <div class="BottomFix"></div>
      </div>
    </div>

  </div> 
```

javascript 在向下滚动时将浮动 tobar 保持在顶部：

```
<script type="text/javascript">
  /*<![CDATA[*/

   alert('start');

      var $flying_bar = $('div.FlyingTopBar');
      var amount_scrolled;
      var initial_top_position =0;
      var actual_top_position;

         $(document).ready(function() {
        updateCurrentPosition();
        alert('visable topbar1');
        $flying_bar.css('visibility','visible');
         alert('visable topbar2');

        $(window).bind('scroll', updateCurrentPosition);
        })

      function updateCurrentPosition() {
        amount_scrolled = $window.scrollTop();
        if (amount_scrolled < 0) amount_scrolled = 0;  //not tested iPad reversed scroll fix
        if (amount_scrolled < initial_top_position) {
          actual_top_position = initial_top_position - amount_scrolled;
          $flying_bar.css({'top':actual_top_position + 'px'});
        } else {
          $flying_bar.css({'top':'0px'});
        }
      }

    headerTickerInit('div.ReportTitleTicker');

    if( $('#ScrollPollSection').length > 0 ) {
      $('#SideNavPolls').show(0);
    }
  /*]]>*/
  </script> 
```

CSS的一部分：

```
.FlyingTopBar {z-index:20; position:fixed; top:120px; left:0px; width:100%; visibility:hidden;} /* <- top updated by JS */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:18:51.187

是的，不需要 javascript，看看[这个 fiddle](http://jsfiddle.net/cardeo/RVrZj/)或者这里是 CSS

```
#fixed-nav {
 position: fixed;
 background: black;
 margin: 0;
 padding: 20px;
 width: 100%;
 top: 0;
 left: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T06:03:16.843

```
position:fixed; 
```

将完成这项工作。我不明白为什么你必须添加一个脚本来做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T06:13:30.403

将此添加到 FlyingTopBar 类，在这种情况下确实不需要使用 JavaScript：-

```
. FlyingTopBar { position : fixed; top: 0px; width:100%; z-index:20; } 
```

要了解有关固定定位的更多信息，请访问：[http ://www.w3schools.com/cssref/pr_class_position.asp](http://www.w3schools.com/cssref/pr_class_position.asp)

我希望这有帮助。:-) 干杯！

# magento - 在观察者中使用标头时出现无限循环错误

> ID：15608581
> 
> 赞同：0
> 
> 时间：2013-03-25T06:00:03.470
> 
> 标签：magento

我只是想在成功登录后设置条款和条件页面。一切似乎运作良好。我通过我放置在 CMS 页面中的表格获取帖子数据，标识符为“一般条件”。问题只在

`header('Location: '.Mage::getUrl('general-conditions'));`

如果我注释掉这一行..页面加载正确，但如果我不这样做，它就会陷入无限循环。

谁能帮帮我，这是唯一剩下的事情，我花了很多时间。提前致谢。

```
<?php

Class Rik_Terms_Model_Observer{
public function checkGeneralTerms(){

  if (Mage::helper('customer')->isLoggedIn()) {

  $id       =   Mage::getModel('customer/session')->getId();
  $customer =   Mage::getModel('customer/customer')->load($id);
  $customerData = $customer->getData();

  $groupId = Mage::helper('customer')->getCustomer()->getGroupId();
  $groupName = Mage::getModel('customer/group')->load($groupId)->getCode();
  $storeId = Mage::app()->getStore()->getId();

  if($customer->getGeneralTerms()=='0'){
      $pageIdentifier = Mage::getModel('cms/page')->checkIdentifier("general-conditions", $storeId);
      if ($pageIdentifier){      
            header('Location: '.Mage::getUrl('general-conditions')); // problem
            die();

        }

    }
 }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T00:24:06.567

后来发现，其实和我的CMS Module的扩展版本冲突。

# java - 代理身份验证失败错误。[Java、FTP 代理]

> ID：15608584
> 
> 赞同：-1
> 
> 时间：2013-03-25T06:00:21.427
> 
> 标签：java, authentication, proxy, ftp, ftp-client

我正在尝试通过 FTP SITE 代理访问 FTP 服务器以绕过防火墙，`it.sauronsoftware.ftp4j.FTPClient`因为我知道我的用户名/密码是正确的，因为我可以使用 FileZilla 进行连接。我尝试使用`Authenticator`，但它没有用。代码：

```
import java.net.Authenticator;
import it.sauronsoftware.ftp4j.FTPClient;
import it.sauronsoftware.ftp4j.connectors.FTPProxyConnector;
...
    FTPClient client = new FTPClient();
        FTPProxyConnector connector = new FTPProxyConnector(String "proxyHost", int proxyPort);
        client.setConnector(connector);

        Authenticator.setDefault(new Authenticator() {
        @Override
             public PasswordAuthentication getPasswordAuthentication() {
                       return new PasswordAuthentication("proxyUser", "proxyPass".toCharArray());
         }});

        System.setProperty("ftp.proxyHost", "proxyHost");
        System.setProperty("ftp.proxyPort", "proxyPort");
        System.setProperty("ftp.proxyUser", "proxyUser");
        System.setProperty("ftp.proxyPassword", "proxyPass");

        System.out.println("Proxy Accessed");

        client.connect("ftpHost");
        client.login("ftpUser", "ftpPass"); 
```

给我这个错误：`java.io.IOException: Proxy authentication failed`

我尝试过的事情：

*   使用备用构造函数`(String, int, String, String)`。
*   移除`Authenticator`
*   使用 just `Authenticator`，不使用 FTPProxyConnector
*   在设置连接器之前进行身份验证，反之亦然。

但是，当我只是使用 Authenticator 时，我得到一个不同的错误说`Connection timed out`。

两个错误都在线发生`client.connect("ftpHost");`

**任何**帮助将不胜感激。

注意：[FTP 代理连接器](http://www.sauronsoftware.it/projects/ftp4j/api/it/sauronsoftware/ftp4j/connectors/FTPProxyConnector.html)

编辑：我发现代理是 Firewall-1 检查点——如果这有帮助的话。

# actionscript-3 - 列表组件 - 更改单元格之间的间隙大小

> ID：15608588
> 
> 赞同：-1
> 
> 时间：2013-03-25T06:00:41.963
> 
> 标签：actionscript-3, flash

我想增加列表中单元格之间的间隙大小，这样它们就不会相互重叠。我知道有，`m_list.setStyle("contentPadding", 5)`但这只会调整列表边缘的间隙，而不是单个单元格。同样调整列表中的 rowHeight 不会影响相邻单元格之间的间隙。我似乎找不到有关如何完成此操作的任何资源。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:06:51.853

它不支持 api。您可以创建自己的 List extends fl.controls.List 并使用 rowHeight 技巧，请参阅：

```
package 
{
    import fl.controls.List;
    import fl.controls.listClasses.CellRenderer;

    public class MyList extends List
    {

        public var gap:Number = 5;

        public function MyList()
        {
            super();

            rowHeight +=  gap;
        }

        override protected function draw():void
        {
            super.draw();
            updateRenderer();
        }

        protected function updateRenderer():void
        {
            var renderers:Array = availableCellRenderers.concat(activeCellRenderers);
            var l:uint = renderers.length;

            for (var i:uint=0; i<l; i++)
            {
                var renderer:CellRenderer = renderers[i];

                if (i > 0)
                {
                    renderer.y +=  gap;
                }

                renderer.setSize(availableWidth+_maxHorizontalScrollPosition,rowHeight - gap);

                renderer.drawNow();
            }
        }
    }
} 
```

# c# - 在运行时编辑 datagridview 并更新数据库

> ID：15608593
> 
> 赞同：0
> 
> 时间：2013-03-25T06:01:29.303
> 
> 标签：c#, datagridview

我搜索了一些帖子，但仍然无法正常工作。

我有一个用 C# 编写的窗口应用程序，在这里我将 datagridview 绑定到我的数据库：

```
public static DataSet GetDataSet(string sql)
    {
        using (SqlConnection cn = new SqlConnection(constr))
        {
            SqlDataAdapter da = new SqlDataAdapter(sql, cn);
            DataSet ds = new DataSet();
            da.Fill(ds);
            return ds;

        }
    } 
```

我将datagridview绑定在另一个类中：

```
string sql = "select Amount, Price, Description from myTable";
ds = DbHelper.GetDataSet(sql);
dataGridView2.DataSource = ds.Tables[0]; 
```

我创建了一个按钮供用户在编辑 datagridview 后更新数据库：

```
string sql = "select Amount, Price, Description from myTable";
DbHelper.UpdateDataSet(sql, ds);
MessageBox.Show("done");

public static void UpdateDataSet(string sql, DataSet ds)
    {
        using (SqlConnection cn = new SqlConnection(constr))
        {
            SqlDataAdapter da = new SqlDataAdapter(sql, cn);
            da.Update(ds);
        }
    } 
```

这是错误，发生在以下行`da.Update(ds);`：

当传递带有修改行的 DataRow 集合时，更新需要有效的 UpdateCommand。

感谢帮助。

**编辑** 我可以让它工作：

```
SqlCommandBuilder commandBuilder = new SqlCommandBuilder(da);
da.UpdateCommand = commandBuilder.GetUpdateCommand(); 
```

但只有当我在 datagridview 中显示密钥时，否则：

对于不返回任何键列信息的 SelectCommand，不支持为 UpdateCommand 生成动态 SQL。

如果我不想在 datagridview 中显示密钥，如何克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:40:48.913

SqlCommandBuilder 需要主键来更新字段。您仍然可以将键加载到 DataGridView，但**隐藏**列。

# php - 如何在 .htaccess 中使用重写器更改 URL？

> ID：15608597
> 
> 赞同：0
> 
> 时间：2013-03-25T06:02:06.153
> 
> 标签：php, .htaccess

我有这样的 URL：

```
http://example.com/directory/index.php?q=anything 
```

这样 PHP 将使用 $_GET['q'] 加载测试变量。

我希望在我的 .htaccess 中将其简化为：

```
http://example.com/directory/anything.html 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:06:32.030

也许你可以添加这样的东西`.htaccess`

```
RewriteEngine on

RewriteRule ([0-9A-Za-z-\+._]+)\.html$ ./index.php?q=$1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T07:29:37.847

我自己解决了这个问题 :: 这是 .htaccess 代码

```
RewriteEngine On
RewriteRule ^directory/([^/]*)\.html$ /directory/index.php?q=$1 [L] 
```

# ruby-on-rails - 在 ruby on rails 教程中使用 self.current_user？

> ID：15608598
> 
> 赞同：0
> 
> 时间：2013-03-25T06:02:24.350
> 
> 标签：ruby-on-rails

我试图理解这段代码

```
module SessionsHelper

  def sign_in(user)
    cookies.permanent[:remember_token] = user.remember_token
    self.current_user = user
  end

  def current_user=(user)
    @current_user = user
  end

  def current_user
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
  end
end 
```

使用线路

```
self.current_user = user 
```

它会为 SessionsController 类创建一个名为 current_user 的变量（上述模块属于 SessionsController 类）吗？

如果我使用

```
@current_user = user 
```

而不是上面的行，代码似乎以完全相同的方式工作。如何？！

非常感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:06:10.303

`self.current_user = user`只需调用该方法`current_user=(user)`，而该方法只做`@current_user = user`，所以如果你这样做，它的工作原理是一样的`@current_user = user`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-07T06:54:15.763

`self.current_user = user`，这个表达式是表示`current_user`是类中的方法`Sessions`（按模块混合`SessionsHelper`）而不是局部变量。那里的 self 代表 class `Sessions`，所以这一行只是一个方法调用，与`@current_user = user`or效果相同`current_user=(user)`。

# c# - 如何将参数（id）传递给 WCF 中的消息检查器？

> ID：15608602
> 
> 赞同：9
> 
> 时间：2013-03-25T06:02:59.993
> 
> 标签：c#, .net, wcf, web-services, service

我只想用一些 id 绑定 WCF 传入和传出消息，将记录到数据库的内容。

由于它计划在高多线程环境中使用，因此出现了一些问题。

* * *

后编辑

这是我想要记录的方式：

```
public class LogMessageInspector : IClientMessageInspector
    {
        public void AfterReceiveReply(ref System.ServiceModel.Channels.Message reply, object correlationState)
        {
            Dictionary<string, object> logParams = (Dictionary<string, object>)correlationState;
            logParams["description"] = reply.ToString();

            Logger log = LogManager.GetCurrentClassLogger();
            log.InfoEx(String.Format("response_{0}", logParams["_action"]), logParams);
        }

        public object BeforeSendRequest(ref System.ServiceModel.Channels.Message request, System.ServiceModel.IClientChannel channel)
        {            
            string iteration_id = "";
// here comes seeking for custom, previously setted header with id
            for (int i = 0; i < request.Headers.Count; i++)
            {
                if ((request.Headers[i].Name == "_IterationId") && (request.Headers[i].Namespace == "http://tempuri2.org"))
                {
                    iteration_id = request.Headers.GetHeader<string>(i);
                    request.Headers.RemoveAt(i);

                    break;
                }
            }

            string pair_id = StringGenerator.RandomString(10);
            string action_name = request.Headers.Action.Substring(request.Headers.Action.LastIndexOf("/") + 1);
            Dictionary<string, object> logParams = new Dictionary<string,object>() { {"iteration_id", iteration_id}, { "description", request.ToString() }, { "request_response_pair", pair_id }, { "_action", action_name } };

            Logger log = LogManager.GetCurrentClassLogger();
            log.InfoEx(String.Format("request_{0}", action_name), logParams);            

            return logParams;
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-05T07:34:29.653

如果我理解正确，您想使用 ID`correlationState`将请求与回复联系起来。为此，请将您的 ID 作为对象返回`BeforeSendRequest`，并将其作为参数传递给`AfterReceiveReply`。

```
public object BeforeSendRequest(ref Message request, IClientChannel channel)
{
    var correlationState = ... // for example, a new GUID, or in your case 
                               // an id extracted from the message

    ... do your stuff here

    return correlationState;
}

public void AfterReceiveReply(ref Message reply, object correlationState)
{
    // the correlationState parameter will contain the value you returned from
    // BeforeSendRequests
} 
```

**更新**

> 问题是如何将参数传递给 BeforeSendRequest 方法。

在这种情况下，如果您的请求消息中没有您需要的所有信息，那么显而易见的解决方案是我们使用[ThreadStatic](http://msdn.microsoft.com/en-us/library/system.threadstaticattribute.aspx)字段将信息从您的调用者传递到`BeforeSendRequest`.

在调用您的服务之前设置该字段，然后提取并使用`BeforeSendRequest`.

**更新 2**

> 我可以使用的另一个选项是将参数设置为消息本身，但是如何在 BeforeSendRequest 的请求参数中访问它？

我不明白这个问题。如果我理解正确，您希望能够将参数从调用者传递给`BeforeSendRequest`方法。您知道如何使用correlationState将其从`BeforeSendRequest`to传递。`AfterReceiveReply`

做到这一点的方法是使用一个`ThreadStatic`字段。例如，您可以创建以下类：

```
public static class CallerContext
{
    [ThreadStatic]
    private static object _state;

    public static object State
    {
        get { return _state; }
        set { _state = value; }
    }
} 
```

然后您的调用者将在调用 Web 服务之前进行设置，并且它对和`CallerContext.State`都可用。例如`BeforeSendRequest``AfterReceiveReply`

```
...
try
{
    CallerContext.State = myId;

    ... call web service here ...
}
finally
{
    CallerContext.State = null;
} 
```

这将在`BeforeSendRequest`：

```
public object BeforeSendRequest(ref Message request, IClientChannel channel)
{
    var correlationState = CallerContext.State;

    ... do your stuff here

    return correlationState;
} 
```

请注意，使用 try/finally 重置`CallerContext.State`为 null 并不是绝对必要的，但可以防止不相关的代码访问您存储在那里的可能敏感数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-02T09:57:48.787

我认为最简单的解决方案是将 threadstatic 变量放入`LogMessageInspector`. 在 中设置值`BeforeSendRequest`并再次使用它`AfterReceiveReply`。

如果您使用异步操作，我会变得更复杂一些，但您所要做的就是密切关注您如何访问和传递这个本地变量。

MessageInspectors 旨在处理 Message 本身，因此最好的解决方案是在消息中包含一些相关的内容，例如 requestId、OrderId 等。

编辑：

我会想象服务合同看起来像这样：

```
[ServiceContract]
public interface IService1
{
    [OperationContract]
    ServiceResponse Process( ServiceRequest request );
}

class ServiceRequest
{
    public Guid RequestID { get; set; }
    public string RequestData { get; set; }
}

class ServiceResponse
{
    public Guid RequestID { get; set; }
    public string ResponseData { get; set; }
} 
```

RequestID 将在客户端生成，现在您可以对消息执行 xpath 并获取 RequestID 以关联请求和响应。

# php - 一起运行模型

> ID：15608605
> 
> 赞同：0
> 
> 时间：2013-03-25T06:03:10.343
> 
> 标签：php, mysql, model, pdo, dao

应用每个单独的模型，无法回滚或阻止任何插入运行
MODEL_A：即使射击`Exception`
MODEL_B 也会插入 MODEL_B：即使射击也会插入 MODEL_A`Exception`

```
$ MODEL_A-> insert();
$ MODEL_B-> insert(); 
```

//模型.A

```
try {
    $statement = $pdo-> prepare( "INSERT INTO ..." );
    $statement-> execute();
}catch{} 
```

//模型.B

```
try {
    $statement = $pdo-> prepare( "INSERT INTO ..." );
    $statement-> execute();
}catch{} 
```

//程序将是简单的解决方法

```
try {
    #beginTransaction;
    $statement = $pdo-> prepare( "INSERT INTO ..." );
    $statement-> execute();

    $statement = $pdo-> prepare( "INSERT INTO ..." );
    $statement-> execute();
    #commit;
}catch{} 
```

如果第一个insert被插入，第二个触发错误，不用作为第一个rollback
执行动作前都需要测试
有人对如何解决这个问题有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:26:31.873

您需要通过关闭自动提交来显式启动事务，然后在完成测试后提交或回滚事务。您可以使用[beginTransaction()](http://www.php.net/manual/en/pdo.begintransaction.php)、[commit()](http://www.php.net/manual/en/pdo.commit.php)和[rollback()](http://www.php.net/manual/en/pdo.rollback.php)函数对 PDO 执行此操作。

如果插入位于不同的类中，则可以传递对`$pdo`对象的引用。

```
class ModelA {
    function insert(&$pdo){
        $statement = $pdo->prepare( "INSERT INTO ..." );
        $statement->execute();
    }
}

class ModelB {
    function insert(&$pdo){
        $statement = $pdo->prepare( "INSERT INTO ..." );
        $statement->execute();
    }
} 
```

您的代码将如下所示：

```
// disable autocommit
$pdo->beginTransaction(); 

$modelA = new ModelA();
$modelA->insert($pdo);

$modelB = new ModelB();
$modelB->insert($pdo);

// check for errors, and either commit() or rollback()
$hasErrors = ? // Add your code to check for errors
if ($hasErrors){
    $pdo->rollback();
} else {
    $pdo->commit();
} 
```

# android - Fragment Pager Adapter 的 getChildAt 返回什么？

> ID：15608606
> 
> 赞同：0
> 
> 时间：2013-03-25T06:03:15.477
> 
> 标签：android

我的 FragmentPagerAdapter 是一些 ListFragment。

当滚动页面时，调用 onPageSelected，我想在 ListFragment 中运行一些方法。

但问题是当我生病时，我试过这个

```
public void onPageSelected(int position) {
                  ((MyListFragment)((Viewpager)viewPagerAdapter.getChildAt(position))).someMethod;
            } 
```

但出现错误，viewPager 无法投射 MyListFragment。

我如何获得 ListFragment？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:59:47.520

尝试这个，

```
public void onPageSelected(int position) {
    ((MyListFragment)viewPagerAdapter.getItem(position)).someMethod();
} 
```

# asp.net - 需要有关 Session Less cookie 的信息

> ID：15608612
> 
> 赞同：1
> 
> 时间：2013-03-25T06:03:58.470
> 
> 标签：asp.net

我知道没有 cookie 的会话。你能告诉我关于**sessionless cookie 的**信息吗？如果有相关链接请分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:37:15.980

没有“无会话 cookie”之类的东西。这不是 Web 开发中使用的技术术语，也不是任何 HTTP 规范中的术语。

Cookie 可用于在客户端存储会话 ID，但只需要一个 cookie 即可，所有其他 cookie 在这方面都是非会话 cookie。

另一种解释涉及 cookie 生命周期：存储在客户端上的 cookie 可以在浏览器窗口关闭时过期，或者绝对过期。前一种通常被称为“[浏览器]会话cookie”，因为它们会持续浏览器会话的生命周期（这就是为什么网站可以在用户关闭浏览器窗口后注销用户，即使他们没有点击任何Log-关闭按钮）。如果这是正确的解释，那么绝对过期（并且比浏览器窗口持续时间更长）的 cookie 是“非会话”cookie，但我不会使用那种语言，它仍然不是“无会话”cookie，因为它只是不正确的术语。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:27:08.830

无 Cookie 会话状态是在 ASP.NET 中开发的，当时手机等移动设备（从 10 多年前开始）对 cookie 没有很好的支持。如今的现代手机配备了现代网络浏览器，始终支持 cookie。

不推荐使用 cookieless session state 和 cookieless forms 身份验证，因为 ASP.NET 的许多功能与它们不兼容。

# java - 如何在 Eclipse 中配置客户端服务器应用程序？

> ID：15608614
> 
> 赞同：1
> 
> 时间：2013-03-25T06:04:08.407
> 
> 标签：java, eclipse, jakarta-ee, eclipse-plugin

我正在开发一个客户端服务器应用程序，我们曾经在 IE 中使用 URL:http:\[服务器的 IP]:[端口号] 进行请求。在此应用程序中，客户端从服务器获取指示。客户端用java编写，服务器用c++编写。

客户端是用 ant 构建的，并且具有类似于 projet 内部的文件夹结构两个子文件夹，其中一个被命名为客户端，另一个是库，两者都有它的 owin build.xml 和 build.properties 文件。并且客户端包含图书馆拥有的所有罐子。

我尝试在最新版本的 eclipse JUNO 中配置它，但出现错误。

请指导我配置它，以便我可以调试客户端代码...在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:05:48.033

尝试将其配置为文件系统，因为您有 2 个包含源代码的文件夹。如果您要相互添加，则会产生问题。

# php - 警告：PDOStatement::execute() [pdostatement.execute]: SQLSTATE[HY093]:

> ID：15608617
> 
> 赞同：1
> 
> 时间：2013-03-25T06:04:28.910
> 
> 标签：php

警告：PDOStatement::execute() [pdostatement.execute]: SQLSTATE[HY093]: Invalid parameter number: 绑定变量的数量与 C:\wamp\www\pegasus\classes\generic.class.php 中的标记数量不匹配在第 68 行
类 Add_consum 扩展通用 {

```
private $result;
private $error;
private $impexp;
private $sea_air;
private $customername;
private $customerreference;
private $homeconsumption;
private $invoicevalue;
private $currency;
private $mbl_hbl;
private $vesselname;
private $lcl_fcl;
private $noofcontainers;
private $sft_containers;
private $fcl_containerno;
private $weight;
private $noofpallets;
private $itemdescripion;
private $suppliersdetails;
private $cif_fob;
private $blnumer;
private $bl_date;

function __construct() {

    if(isset($_POST['searchimpexp'])) {
        $this->searchimpexp();
        exit();
    }
// jQuery form validation
    parent::checkExists();

    if(isset($_POST['add_consum'])) {
        $this->impexp = parent::secure($_POST['impexp']);
        $this->sea_air = parent::secure($_POST['sea_air']);
        $this->customername = parent::secure($_POST['customername']);
        $this->customerreference = parent::secure($_POST['customerreference']);
        $this->homeconsumption = parent::secure($_POST['homeconsumption']);
        $this->invoicevalue = parent::secure($_POST['invoicevalue']);
        $this->currency = parent::secure($_POST['currency']);
        $this->mbl_hbl = parent::secure($_POST['mbl_hbl']);
        $this->vesselname = parent::secure($_POST['lcl_fcl']);
        $this->lcl_fcl = parent::secure($_POST['customerreference']);
        $this->noofcontainers = parent::secure($_POST['noofcontainers']);
        $this->sft_containers = parent::secure($_POST['sft_containers']);
        $this->fcl_containerno = parent::secure($_POST['fcl_containerno']);
        $this->weight = parent::secure($_POST['weight']);
        $this->noofpallets = parent::secure($_POST['noofpallets']);
        $this->itemdescripion = parent::secure($_POST['itemdescripion']);
        $this->suppliersdetails = parent::secure($_POST['suppliersdetails']);
        $this->cif_fob = parent::secure($_POST['cif_fob']);
        $this->blnumer = parent::secure($_POST['blnumer']);
        $this->bl_date = parent::secure($_POST['bl_date']);

        // Confirm all details are correct
        $this->verify();

        // Create the user
        $this->addconsum();

        if(!empty($this->error)) parent::displayMessage($this->error);
            else echo $this->result;
        exit();

    }

}

/** @todo: Should be in a different class, not add_consum. */
private function searchimpexp() {

    if(empty($_POST['searchimpexp'])) return false;

    $sql = array( ':searchQ' => $_POST['searchimpexp'] . '%' );
    $sql = "SELECT distinct username as suggest, user_id
            FROM login_users
            WHERE username LIKE :searchQ
            OR name LIKE :searchQ
            OR user_id LIKE :searchQ
            ORDER BY username
            LIMIT 0, 5";

    $stmt = parent::query($sql);

    if ( $stmt->rowCount() < 1 ) {
        echo '<h3>' . _('No suggestions') . '</h3>
              <p class="help-block">' . _('Try searching by username, name, or user id.') . '</p>';
        return false;
    }

    echo '<h2>' . _('Suggestions') . '</h2>';

    while($suggest = $stmt->fetch(PDO::FETCH_ASSOC))
        echo "<p><a href='users.php?uid=" . $suggest['user_id'] . "'>" . $suggest['suggest'] . "</a></p>\n";

} 
```

// 如果存在则返回一个值 public function getPost($var) {

```
 if(!empty($this->$var)) {
        return $this->$var;
    } else return false;

}

private function verify() {

    if(empty($this->impexp)) {
        $this->error = '<div class="alert alert-error">'._('You must enter a impexp.').'</div>';
        return false;
    }

    if(empty($this->sea_air)) {
        $this->error = '<div class="alert alert-error">'._('You must enter a seaair.').'</div>';
        return false;
    }

    if(empty($this->customername)) {
        $this->error = '<div class="alert alert-error">'._('You must enter a customername.').'</div>';
        return false;
    }

} 
```

私有函数 addconsum() {

```
 if (!empty($this->error)) return false;

    $params = array(
        ':impexp'           => $this->impexp,
        ':sea_air'          => $this->sea_air,
        ':customername'     => $this->customername,
        ':homeconsumption'  => $this->customerreference,
        ':homeconsumption'  => $this->homeconsumption,
        ':invoicevalue'     => $this->invoicevalue,
        ':currency'         => $this->currency,
        ':mbl_hbl'          => $this->mbl_hbl,
        ':vesselname'       => $this->vesselname,
        ':lcl_fcl'          => $this->lcl_fcl,
        ':noofcontainers'   => $this->noofcontainers,
        ':sft_containers'   => $this->sft_containers,
        ':fcl_containerno'  => $this->fcl_containerno,
        ':weight'           => $this->weight,
        ':noofpallets'      => $this->noofpallets,
        ':itemdescripion'   => $this->itemdescripion,
        ':suppliersdetails' => $this->suppliersdetails,
        ':cif_fob'          => $this->cif_fob,
        ':blnumer'          => $this->blnumer,
        ':bl_date'          => $this->bl_date,
    ); 
```

parent::query("INSERT INTO `add_consignment`( `impexp`, `sea_air`, `customername`, `customerreference`, `homeconsumption`, `invoicevalue`, `currency`, `mbl_hbl`, `vesselname`, `lcl_fcl`, `noofcontainers`, `sft_containers`, `fcl_containerno`, `weight`, `noofpallets`, `itemdescripion`, `suppliersdetails`, `cif_fob`, `blnumer`)`bl_date`值 (:impexp, :sea_air, :customername, :customerreference, :homeconsumption, :invoicevalue, :货币、:mbl_hbl、:vesselname、:lcl_fcl、:noofcontainers、:sft_containers、:fcl_containerno、:weight、:noofpallets、:itemdescripion、:suppliersdetails、:cif_fob、:blnumer、:bl_date);", $params); }

} $addconsum = 新的 Add_consum();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:46:03.337

编码：

```
 $sql = array( ':searchQ' => $_POST['searchimpexp'] . '%' );
    $sql = "SELECT distinct username as suggest, user_id
            FROM login_users
            WHERE username LIKE :searchQ
            OR name LIKE :searchQ
            OR user_id LIKE :searchQ
            ORDER BY username
            LIMIT 0, 5";

    $stmt = parent::query($sql); 
```

只会**设置**

```
$stmt = parent::query("SELECT distinct username as suggest, user_id
                FROM login_users
                WHERE username LIKE :searchQ
                OR name LIKE :searchQ
                OR user_id LIKE :searchQ
                ORDER BY username
                LIMIT 0, 5"); 
```

设置数组的 $sql 是无用的，因为当 $sql 设置选择语句时它会被覆盖。

无效的参数编号：绑定变量的数量与标记的数量不匹配意味着查询中的 nr 个变量不是赋予 PDO 对象的值的数量。我不确定函数 parent::query 做了什么，但应该使用准备语句。

你将不得不做类似的事情

```
<?php

$statement = parent::query-prepare("SELECT distinct username as suggest, user_id
                    FROM login_users
                    WHERE username LIKE :searchQ
                    OR name LIKE :searchQ
                    OR user_id LIKE :searchQ
                    ORDER BY username
                    LIMIT 0, 5");
$statement->execute(array(':searchQ' => $_POST['searchimpexp'] . '%'));     
$row = $statement->fetchAll();

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:11:06.387

您的问题似乎是您没有将值绑定到您的查询：

```
$stmt = parent::query($sql);
$stmt->bindValue( ':searchQ', $_POST['searchimpexp'], PDO::PARAM_STR ); 
```

# perl - 检测并显示计算机 IP 地址

> ID：15608618
> 
> 赞同：-1
> 
> 时间：2013-03-25T06:04:29.650
> 
> 标签：perl

谁能告诉我如何使用 Perl 检测和显示计算机 IP 地址。

提前致谢。请帮忙。

代码是：

```
#!/usr/bin/perl 
use IO::Socket;
$hostname="(my hostname)"; 
my($addr)=inet_ntoa((gethostbyname($hostname))[4]);
print "$addr\n"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:10:17.803

在谷歌上快速搜索给了我以下信息

> 要获取 IP 地址，可以使用 gethostbyname 内置函数将名称转换为数字。要将该数字转换为大多数人期望的点分八位字节形式 (abcd)，请使用 Socket 模块中的 inet_ntoa 函数，该函数也随 perl 一起提供。

```
use Socket;
my $address = inet_ntoa(
        scalar gethostbyname( $host || 'localhost' )
); 
```

更多示例：[Perldoc，我如何找到我的主机名、域名或 IP](http://perldoc.perl.org/perlfaq9.html#How-do-I-find-out-my-hostname,-domainname,-or-IP-address?%20%22How%20do%20I%20find%20out%20my%20hostname,%20domainname%20or%20IP)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:07:17.823

您是否正在寻找

```
use CGI qw( );
my $cgi = CGI->new();
print $cgi->header('text/plain');
print $cgi->remote_addr(), "\n"; 
```

# java - 如何在JAVA中设置本机内存

> ID：15608621
> 
> 赞同：1
> 
> 时间：2013-03-25T06:04:52.240
> 
> 标签：java, multithreading

您好我正面临以下错误。我通过谷歌搜索读到的是我的本机内存用完了。解决此问题的任何帮助将不胜感激。请注意，我使用的是 32 位 Windows 7。

```
java.lang.OutOfMemoryError: unable to create new native thread
        at java.lang.Thread.start0(Native Method)
        at java.lang.Thread.start(Thread.java:597)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.start(JIoEndpoint.java:478) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T06:44:39.653

您的线程用完了，这与可用内存没有直接关系。

在给定平台（通常由操作系统给定）上，您可以在 Java 中创建的线程数有一个上限。

我的猜测是该消息会在一段时间后显示，并且您的 servlet 没有正确完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:38:23.603

因此，如果您的内存不足限制了线程数，那么您可以使用以下 JVM 选项调整与每个线程关联的堆栈空间。

```
-XX:ThreadStackSize=128k 
```

默认堆栈大小为 512k 或 1024k（我认为），具体取决于您运行的是 32 位还是 64 位 JVM。

*如果你的线程数*用完了，那么你可能需要创建[`ExecutorService`线程池](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)或其他机制来在更少的线程上运行许多作业。

这是获取更多信息的好链接： [您可以创建的线程数有什么限制？](http://vanillajava.blogspot.com/2011/07/java-what-is-limit-to-number-of-threads.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T06:09:44.980

[http://docs.oracle.com/javase/1.3/docs/tooldocs/solaris/java.html](http://docs.oracle.com/javase/1.3/docs/tooldocs/solaris/java.html)

查看 java -Xmx 选项；您可能需要增加堆大小。

# war - 如果部署的战争在其路径上不存在会发生什么？

> ID：15608623
> 
> 赞同：0
> 
> 时间：2013-03-25T06:05:02.927
> 
> 标签：war

我已经在 Weblogic 服务器上部署了一场战争。我想知道该war文件是否恰好从部署它的服务器上的物理位置删除/删除，这会产生什么影响？

问候，

杜希扬特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:12:02.413

在部署war文件时，有一个可选设置页面，其中之一是“Source Availability”。

如果您选择“使用部署目标定义的默认值”或“为我将此应用程序复制到每个目标上”，您无需担心原始战争文件已被删除，因为它已被复制到每个服务器。部署对所有托管服务器使用暂存模式，对管理服务器使用非暂存模式。

如果您选择“使部署可从以下位置访问”，然后删除该战争/目录，您的应用程序将不再继续工作。这是非分阶段模式。

# php - 访问函数外部的变量

> ID：15608631
> 
> 赞同：-1
> 
> 时间：2013-03-25T06:05:40.717
> 
> 标签：php

如果可以的话，我会进一步详细说明，但我遇到的主要问题是我无法访问函数之外的变量。我已经尝试了以下两种方法。

**这是我的来源：**

```
function register($rand, $code) {
    global $rand, $access_token;
    if ($code == $access_token)
        $rand = rand('100000','1000000');
}   

echo $rand; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:18:07.230

可能对你有帮助

```
function register($rand, $code) {
    global $rand, $access_token;
    if ($code == $access_token) {
        $rand = rand('100000','1000000');
    }

return $rand;
} 
```

回声寄存器（$rand，$code）；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:15:24.713

`$rand`如果您在访问变量之前调用函数，我想它应该可以正常运行。

```
function register($rand, $code) {
    global $rand, $access_token;
    if ($code == $access_token) {
        $rand = rand('100000','1000000');
    }
    echo "\nInside Function = ".$rand;
    echo $access_token;
}   

register(100, '');
echo "\nOutside Function = ".$rand; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T06:19:30.427

您必须在设置 $rand 之前调用该函数。在调用 register() 之前，函数内部的全局 $rand 不会设置任何值。

```
<?php
    function register($rand, $code) {
        global $rand, $access_token;
        if ($code == $access_token)
            $rand = rand('100000','1000000');
    }   
    register('x', 'y');

    echo $rand;
?> 
```

如果 PHP 会在调用函数之前设置所有全局值，那么请考虑以下问题。$rand 会被设置成什么？只有在调用其中一个函数时才有意义。

```
<?php
function a() {
global $rand = 1;
}
function b() {
global $rand = 2;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T06:14:33.937

请考虑使用参数而不是使用 $GLOBALS 或使用全局 $var，因为它推荐 [看看这些问题：[一](https://stackoverflow.com/questions/5166087/php-global-in-functions)和[二](https://stackoverflow.com/questions/1557787/are-global-variables-in-php-considered-bad-practice-if-so-why)]

```
function register($rand, $code, $access_token) {
    if ($code == $access_token){
      $rand = rand('100000','1000000');
    }
    return $rand;
}

echo register($rand, $code, $access_token); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T06:11:58.293

```
function register($rand, $code) {
    if ($code == $access_token)
        $rand = rand('100000','1000000');
} 
```

然后先调用函数

```
register('1','2');
 echo $rand; 
```

# python - 当我在 setup.py 中设置 test_suite="nose.collector" 时，我不能单独使用鼻子测试

> ID：15608632
> 
> 赞同：0
> 
> 时间：2013-03-25T06:05:53.510
> 
> 标签：python, setuptools, nose

这是我之前的问题： [最佳实践：如何在 setup.py 中列出所需的依赖项？](https://stackoverflow.com/questions/15422527/best-practices-how-do-you-list-required-dependencies-in-your-setup-py)

安装程序.py

```
test_requires = [
    'mock',
    'nose',
    'nose-progressive',
]

# test_suite uses nose so to run tests we should call  ``python setup.py test``
setup(name='lib_name',
      install_requires=install_requires,
      tests_require=test_requires,
      test_suite="nose.collector",
) 
```

我现在可以运行`python setup.py test`这将触发 mock、nose 和 nose-progressive 在运行测试之前作为 egg 安装在本地目录中。这对我来说没问题。

问题是，我想用`nosetests`. 这已经不可能了。

```
(ven)yeukhon@yeukhon:/repo$ which nosetests
/usr/local/bin/nosetests

pip install nose
Requirement already satisfied (use --upgrade to upgrade): nose in ./nose-1.2.1-py2.7.egg
Cleaning up... 
```

我应该怎么办？由于 Pyramid 的内部设置，全局鼻子将无法通过我的测试。

# r - 在 R 中使用 Beta.Select 函数（先验估计）

> ID：15608633
> 
> 赞同：1
> 
> 时间：2013-03-25T06:05:58.743
> 
> 标签：r, statistics, probability

我正在尝试通过使用总计数和 beta 分布来制定先验。

我写了以下内容：

```
quantile(df$row, probs=c(0.00001, 0.5, 0.99999))

quantile1 <- list(p=0.5, x=8)
quantile2 <- list(p=0.99999, x=10)
quantile3 <- list(p=0.00001, x=1)

library("LearnBayes")
findBeta <- function(quantile1,quantile2,quantile3)

quantile1_p <- quantile1[[1]]; quantile1_q <- quantile1[[2]]
quantile2_p <- quantile2[[1]]; quantile2_q <- quantile2[[2]]
quantile3_p <- quantile3[[1]]; quantile3_q <- quantile3[[2]]

priorA <- beta.select(list(p=0.5, x=8), list(p=0.99999, x=10)) 
```

一旦我尝试使用 beta.select 函数计算priorA，我会收到以下错误：

```
Error in if (p0 < p) m.hi = m0 else m.lo = m0 : 
  missing value where TRUE/FALSE needed
In addition: Warning message:
In pbeta(x, K * m0, K * (1 - m0)) : NaNs produced 
```

我只是无法摆脱错误，也不知道如何处理它。急需帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:28:24.203

我猜测（完全凭空而来）您正在处理百分比。在这种情况下你想使用`x/100`

```
beta.select(list(p=0.5, x=.08), list(p=0.9, x=.10))
#  [1]  28.02 318.74 
```

* * *

无论哪种方式，虽然最好`beta.select`抛出更合适的错误消息（或者更确切地说，在那里进行错误检查），但问题的根源在于您`x`的 ' 超出范围。（正如@Didzis 所指出的，beta dist 的间隔是`[0, 1]`）

# c# - 添加和读取列表 使用 Gobal.asax

> ID：15608636
> 
> 赞同：2
> 
> 时间：2013-03-25T06:06:12.397
> 
> 标签：c#, asp.net

我研究了 Global.asax 和 Application_Start 然后在网上搜索其他人试图解决这个问题，但没有找到这样的资源。

问题：我们可以将 a 存储`List<t>`在全局内存 (Global.asax) 中吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T06:09:09.887

听起来应用程序变量是您最好的选择。这是来自记忆，但我相信访问它们的语法是：

```
Application[ "MyVariable" ] = 123.45f; 
```

您可以从 Global.asax 或其他任何地方访问它们。

对于 List<>，代码类似于：

```
Application[ "ValueList" ] = new List<float>();
( (List<float>)Application[ "ValueList" ] ).Add( 123.45f );
float myValue = ( (List<float>)Application[ "ValueList" ] )[ 0 ]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T06:07:46.420

您不能将它存储在 Global.asax 但您可以将其存储在[asp.net 缓存](http://msdn.microsoft.com/en-us/library/xsbfdd8c%28v=vs.71%29.aspx)或[应用程序状态](http://msdn.microsoft.com/en-us/library/ms178594%28v=vs.100%29.aspx)中用于存储/检索的代码可以在 Global.asax 或 Web 应用程序中的任何其他位置。

# android - 添加 Google Play APK 扩展库包导致“R 无法解析为变量”

> ID：15608638
> 
> 赞同：1
> 
> 时间：2013-03-25T06:06:16.523
> 
> 标签：android, apk

我仍在尝试遵循使用“APK 扩展文件”（[http://developer.android.com/google/play/expansion-files.html#Preparing](http://developer.android.com/google/play/expansion-files.html#Preparing)）的文档。当我到达将“downloader_library”项目添加到我的应用程序项目的部分时，表单的所有令牌都`R.`变得未解析。我还注意到我的项目没有`gen/R.java`为我的应用程序生成一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:56:44.180

我已经放弃使用 eclipse 转而在 Ubuntu for Android 上进行命令行开发。这些问题不会发生在`ant`.

# android - 使用 jquerymobile 编写 android 应用程序时转换前的空白页或闪烁

> ID：15608644
> 
> 赞同：0
> 
> 时间：2013-03-25T06:07:09.153
> 
> 标签：android, cordova, jquery-mobile

我使用 jQueryMobile 和 PhoneGap 来制作我的 android 应用程序，一切都很顺利，但过渡时，它总是在空白页或 flash 之后显示。

简单的转换代码如下：

```
<a href="#product_list"  data-transition="slide">Go to Product list </a> 
```

任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T16:42:54.913

试试这个（如果它适合你）：

```
<a href="#product_list"  data-transition="none">Go to Product list </a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:38:01.970

我没有使用phonegap。但是我曾使用 html 和 j 查询来开发完整的 Web 应用程序。当我使用 j 查询时，我也遇到了同样的问题。当您使用 html 和脚本开发应用程序时，它应该非常精简，然后我们才能实现转换。实际上我完全摆脱了这个问题，但是当我使用时，我仍然能够将空白页删除到大约 95% JQMOBI 代替 j 查询。我预测J查询有点重。这一定是空白页的原因。所以你可以参考[JQMOBI](http://app-framework-software.intel.com/index.php)，希望能解决你的问题。它很精简，你可以使用这个应用程序框架的默认转换。

# perl - 基于perl中的一列合并多个文本文件

> ID：15608645
> 
> 赞同：1
> 
> 时间：2013-03-25T06:07:09.850
> 
> 标签：perl, csv, merge

我是 Perl 的新手，这是我在这个博客中的第一个问题，希望得到解决。

我在一个文件夹中有一些文本（10-18）文件，我想读取所有文件并合并所有在名称列中具有公共变量的文件以及所有文件的区域列。例如：文件 1.txt

名称 sim 区域 Cas
aa 12 54 222
ab 23 2 343
aaa 32 34 34
bba 54 76 65

文件 2.txt

名称 Sim 区域 Cas
ab 45 45 56
abc 76 87 98
bba 54 87 87
aaa 33 43 54

文件 3.txt

名称 Sim 区域 Cas

aaa 43 54 65
ab 544 76 87
ac 54 65 76

输出应该是

名称 Area1 Area2 area3
aaa 32 43 54
ab 23 45 76

任何人都可以帮助解决这个问题。我是 Perl 的新手，并且很难使用哈希。

到目前为止我已经尝试过了

```
use strict;
use warnings;

my $input_dir = 'C:/Users/Desktop/mr/';
my $output_dir = 'C:/Users/Desktop/test_output/';

opendir SD, $input_dir || die 'cannot open the input directory $!';
my @files_list = readdir(SD);
closedir(SD);

    foreach my $each_file(@files_list)
    {
        if ($each_file!~/^\./)               
        {
            #print "$each_file\n"; exit;
            open (IN, $input_dir.$each_file) || die 'cannot open the inputfile $!';
            open (OUT, ">$output_dir$each_file") || die 'cannot open the outputfile $!';

        print OUT "Name\tArea\n"; 

            my %hash; my %area; my %remaning_data;

            while(my $line=<IN>){
            chomp $line;

            my @line_split=split(/\t/,$line);
            # print $_,"\n" foreach(@line_split);

            my $name=$line_split[0]; 
             my $area=$line_split[1]; 
                }
            }   
        } 
```

任何人都可以提供有关如何完成此操作的指导吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T09:35:21.427

```
perl -lane '$X{$F[0]}.=" $F[2]";END{foreach(keys %X){if(scalar(split / /,$X{$_})==4){print $_,$X{$_}}}}' file1 file2 file3 
```

测试：

```
> perl -lane '$X{$F[0]}.=" $F[2]";END{foreach(keys %X){if(scalar(split / /,$X{$_})==4){print $_,$X{$_}}}}' file1 file2 file3
ab 2 45 76
aaa 34 43 54 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:46:37.490

```
#!/usr/bin/perl

use strict;
use warnings;

my $inputDir = '/tmp/input';
my $outputDir = '/tmp/out';

opendir my $readdir, $inputDir || die 'cannot open the input directory $!';
my @files_list = readdir($readdir);
closedir($readdir);

my %areas;
foreach my $file (@files_list) {
    next if $file =~ /^\.+$/; # skip ..
    open (my $fh, "<$inputDir/$file");
    while (my $s = <$fh>) {
        if ($s =~ /(\w+)\s+[\d\.]+\s+([\d\.]+)/) {
            my ($name,$area) = ($1, $2); # parse name and area
            push(@{$areas{$name}}, $area); # add area to the hash of arrays
        }
    }
    close ($fh);
}

open (my $out, ">$outputDir/outfile");
foreach my $key (keys %areas) {
    print $out "$key ";
    print $out join " ", @{$areas{$key}};
    print $out "\n";
}
close ($out); 
```

# javascript - 取消选中框 - Javascript

> ID：15608646
> 
> 赞同：0
> 
> 时间：2013-03-25T06:07:14.013
> 
> 标签：javascript, html, css

有没有办法一次取消选中所有框？

我有一个 4x4 的复选框表，我将它们的所有 ID 设置为“cb”。我想要一个清除所有这些的按钮，所以我尝试执行如下操作：

```
document.getElementById("cb").checked="false" 
```

但在屏幕上，它们仍然处于选中状态。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T06:09:29.393

ID 是唯一的，因此拥有多个具有相同 ID 的元素不会解决问题，只会使您的标记无效。改用类：

```
var boxes = document.getElementsByClassName("cb");

for (i=0; boxes.length<i; i++) {
    boxes[i].checked = false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T06:10:29.587

检查这篇文章[Javascript 检查并取消选中所有复选框](http://www.shiningstar.net/articles/articles/javascript/checkboxes.asp)

下面是代码：

脚本

```
<script language="JavaScript">

    function checkAll(field)
    {
    for (i = 0; i < field.length; i++)
        field[i].checked = true ;
    }

    function uncheckAll(field)
    {
    for (i = 0; i < field.length; i++)
        field[i].checked = false ;
    }

</script> 
```

HTML

```
<form name="myform" action="checkboxes.asp" method="post">
<b>Your Favorite Scripts & Languages</b><br>
<input type="checkbox" name="list" value="1">Java<br>
<input type="checkbox" name="list" value="2">Javascript<br>
<input type="checkbox" name="list" value="3">Active Server Pages<br>
<input type="checkbox" name="list" value="4">HTML<br>
<input type="checkbox" name="list" value="5">SQL<br>

<input type="button" name="CheckAll" value="Check All"
onClick="checkAll(document.myform.list)">
<input type="button" name="UnCheckAll" value="Uncheck All"
onClick="uncheckAll(document.myform.list)">
<br>
</form> 
```

此致

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T06:13:06.487

你可以使用这样的东西：

```
function toggle(state) {
    var cb = document.getElementsByName('cb');
    for (var i = cb.length; i--;) {
        cb[i].checked = typeof state != 'undefined' ? state : !cb[i].checked;
    }
} 
```

用法：

```
toggle(false); // Uncheck all
toggle(true);  // Check all
toggle();      // Toggle all 
```

在此示例中，您通过 name 属性选择复选框。您还可以使用类名并通过[document.getElementsByClassName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)或[document.querySelectorAll](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)方法选择输入。

演示：http: [//jsfiddle.net/kCmqL/1/](http://jsfiddle.net/kCmqL/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T12:59:31.583

虽然您已经有了答案，但我想我也会发布以下内容作为选项。给定以下最小/演示性 HTML 标记：

```
<input type="checkbox" class="something" name="cb" />
<input type="checkbox" class="something" name="cb" checked />
<input type="checkbox" class="something" name="cb" />
<input type="checkbox" class="something" name="cb" />
<input type="checkbox" class="something" name="cb" checked />
<input type="checkbox" class="something" name="cb" checked /> 
```

以下 JavaScript 可用于选中、取消选中或切换`checkboxes`选择器返回的所有内容：

```
Object.prototype.check = function (newState) {
    switch (newState.toLowerCase()) {
        case 'toggle':
            for (var i = 0, len = this.length; i<len; i++){
                this[i].checked = !this[i].checked;
            }
            break;
        case 'check':
            for (var i = 0, len = this.length; i < len; i++) {
                this[i].checked = true;
            }
            break;
        case 'uncheck':
            for (var i = 0, len = this.length; i < len; i++) {
                this[i].checked = false;
            }
            break;
    }
    return this;
}; 
```

要切换所有，请调用（例如）：

[`document.getElementsByClassName('something').check('toggle');`](http://jsfiddle.net/davidThomas/sJZLu/).

要检查所有，请调用（例如）：

[`document.getElementsByClassName('something').check('check');`](http://jsfiddle.net/davidThomas/sJZLu/1/).

要取消选中所有，请调用（例如）：

[`document.getElementsByClassName('something').check('uncheck');`](http://jsfiddle.net/davidThomas/sJZLu/2/).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T06:09:54.093

尝试

```
<script language="javascript">
function checkUnCheckAll(formname)
{
  var checkboxes = new Array(); 
  checkboxes = document[formname].getElementsByTagName('input');

  for (var i=0; i<checkboxes.length; i++)  {
    if (checkboxes[i].type == 'checkbox')   {
      checkboxes[i].checked = false;
    }
  }
}
</script> 
```

### [`More`](http://www.dzone.com/snippets/checkuncheck-all-checkboxes)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T06:20:37.970

您也可以对所有控件使用相同的名称，如下所示：

```
<input type="Checkbox" name="compare" id="compare" value="1" />
    <input type="Checkbox" name="compare" id="Checkbox1" value="5" />
    <input type="Checkbox" name="compare" id="Checkbox2" value="8" />
    <input type="Checkbox" name="compare" id="Checkbox3" value="10" />

<input type="button" value="select all" onclick="javascript:checkAll()"/>
<input type="button" value="unckeck all" onclick="javascript: unCheckAll()"/> 

<script type="text/javascript">
    function checkAll()
    {
        var c = document.getElementsByName("compare");
        for (var i = 0; i < c.length; i++) {
            c[i].checked = true;
        }

    }
    function unCheckAll() {
        var c = document.getElementsByName("compare");
        for (var i = 0; i < c.length; i++) {
            c[i].checked = false;
        }

    }
    </script> 
```

# android - Android：解析 XML 数据的最佳解析器

> ID：15608647
> 
> 赞同：6
> 
> 时间：2013-03-25T06:07:15.417
> 
> 标签：android, android-xml, saxparser, xmlpullparser, android-parser

我正在开发一个应用程序，我第一次将在其中解析来自远程服务器的 xml 文件中的数据。

但是我无法选择哪个解析器是高效的或最适合解析的。因为主要有三种类型的解析，我知道：

1.  萨克斯
2.  XMLPull解析
3.  DOM

**哪个是解析数据的最佳解析器？**正如我在谷歌上搜索并发现上述解析器的正反两面。但我无法确定哪个是最有效的。

XML 包含带有大量标签的大量数据。

请指导我并建议我应该使用哪个解析器，因为我是第一次在我的应用程序中使用解析。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-25T06:10:55.277

SAX Parsing 是比 DOM 实现的最好的一种。在下面查看这两者之间的区别：

**DOM**：

*   节点采用树结构的形式。
*   内存：占用更多内存，DOM 仅在 XML 文档较小的情况下优先使用。
*   运行时较慢。
*   存储为对象。
*   以编程方式易于实现。
*   易于导航和使用。

**萨克斯**：

*   事件顺序。
*   它不使用大型文档首选的任何内存。
*   由于上述几点，运行时更快。
*   对象将被创建。
*   需要编写代码来创建对象。
*   在 SAX 中，向后导航是不可能的，因为它按顺序处理文档。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-25T06:24:16.897

在所有 XML 解析器中，Sax 解析器是最快的，因此您可以毫无疑问地使用它……如果您需要从 XML 读取和写入数据，您可以使用 DOM。使用 SAX 解析器，您将只能从 XML 中读取数据。由于这两个在列表的顶部，因此您无需考虑 XMLPullparser。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T06:14:26.613

我会说 XMLPullParsing，但我最近听到了有关[Xerces](http://xerces.apache.org/)的好消息，可能也想研究一下。但是，从未使用过 Xerces 和 XMLPullParser 从来没有让我失望过。我们构建了一个使用它的色盲应用程序，它会提取数千种颜色组合，以便告诉您刚刚拍摄的照片是什么颜色。

**更新**：如果您不介意阅读，这里有几个链接可供阅读：p，显示双方的利弊

[http://www.firstobject.com/xml-reader-sax-vs-xml-pull-parser.htm](http://www.firstobject.com/xml-reader-sax-vs-xml-pull-parser.htm)

另一个可能读入[SAX 解析器与 XMLPull 解析器的答案](https://stackoverflow.com/questions/5808105/sax-parser-vs-xmlpull-parser)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-30T09:24:22.243

我认为 XMLPullParser 将是一个不错的选择，正如他们在[Android 文档](http://developer.android.com/training/basics/network-ops/xml.html)中提到的那样。

# php - Lucene 中的范围查询

> ID：15608650
> 
> 赞同：0
> 
> 时间：2013-03-25T06:07:41.323
> 
> 标签：php, lucene

我正在使用 Lucene 和 PHP 来构建我的搜索引擎。现在索引的每个文档都有三个字段`title`：`startTime`和`finishTime`。通过 PHP Web 界面，我可以知道用户的当前时间。为了响应用户查询，当且仅当用户的当前时间在检索到的文档的`startTime`and`finishTime`字段之间时，我希望检索文档。

我是 Lucene 的新手。所以我想知道在 Lucene 中有什么方法可以做到这一点。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:16:54.927

首先，确保`startTime`和`finishTime`是整数值，最好是数字 UNIX 时间或滴答计数。如果您使用像“MM/dd/yyyy”这样的字符串日期表示，那么它将不起作用。

您的查询可以改写为“startTime 小于 now，finishTime 大于 now”。这可以像这样转换为 Lucene 的查询语法（`555`当前时间戳值在哪里）：

```
startTime:[0 TO 555] AND finishTime:[555 TO 999] 
```

（其中`0`和`999`分别是最小和最大界限值）

请注意，如果您要添加其他术语，您需要用括号对这两个范围谓词进行分组，并且还要注意 Lucene 默认为“OR”而不是“AND”。

此处提供了语法参考：http: [//lucene.apache.org/core/old_versioned_docs/versions/2_9_1/queryparsersyntax.html#Range%20Searches](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_1/queryparsersyntax.html#Range%20Searches)

在 PHP 中，你会这样做：

```
$userTime = getUserTime(); // this must be an integer numeric value.
$max = mktime(23,59,59, 12,31,2099); // generates an upperbound timestamp

$query = "startTime:[0 TO %1$d] AND finishTime:[%1$d TO %2$d]";
$query = sprintf($query, $userTime, $max); 
```

然后提交`$query`到您的 Lucene 搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:48:27.863

转换为 ISO 8601“简要”格式也可以工作（“20130328T144734”或类似的）。

# asp.net - 如何使用 SignalR 从服务器向客户端发送消息

> ID：15608651
> 
> 赞同：0
> 
> 时间：2013-03-25T06:07:44.293
> 
> 标签：asp.net, signalr

我想从服务器向客户端发送消息。

在我的场景中，客户端未与服务器连接。服务器是否可以与未连接的客户端建立连接并建立连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T06:25:40.667

客户端必须建立连接。只有这样，服务器才能将消息发送回客户端。

# cakephp - 如何跨不同数据源链接模型？

> ID：15608654
> 
> 赞同：0
> 
> 时间：2013-03-25T06:08:01.233
> 
> 标签：cakephp, cakephp-2.0

乍一看，我假设答案不是简单的，因为当我查看 Cake 创建的查询时，一个数据源无法知道如何为关联的表构建查询。至少对我来说。我所拥有的是一个通过 User.twitter_profile_id 拥有一个 TwitterProfileModel 的 UserModel。我的 UserModel 使用 MySQL，而我的 TwitterProfileModel 使用 MongoDB。我能想到的唯一解决方案是通过我的 UserModel 的 afterFind 回调获取 TwitterProfile 数据。我很想知道是否有更原生于 CakePHP 的解决方案，以及我计划解决这个问题的方式是否是最好的方式。我查看了文档，但没有提到像我这样的情况。

**编辑：** 我知道数据源不相互交谈。我的问题是我可以遵循哪些步骤才能检索来自不同数据源的关联模型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:46:44.833

这根本与 CakePHP 无关，而是与数据库有关：您不能通过连接来关联不同的数据库系统表。如果您确实必须使用 sql 连接，则对两个表使用相同的数据库系统，否则您需要在 afterFind() 中获取记录，因为您已经这样做了。

# algorithm - big-O 表示法和 theta 表示法之间的区别，为什么 (theta) Ө-notation 适合插入排序来描述其最坏情况下的运行时间？

> ID：15608655
> 
> 赞同：1
> 
> 时间：2013-03-25T06:08:04.377
> 
> 标签：algorithm, sorting, math, time-complexity

**`We use Ө-notation to write worst case running time of insertion sort. But I’m not able to relate properties of Ө-notation with insertion sort, why Ө-notation is suitable to insertion sort. How does the insertion sort function f(n), lies between the c1*n^2 and c2*n^2 for all n>=n0.`**

插入排序的运行时间为 Ө(n^2) 意味着它具有上限 O(n^2) 和下限 Ω(n^2)。我对插入排序下限是Ω（n ^ 2）还是Ω（n）感到困惑。

![在此处输入图像描述](../Images/cd62e512e5f849e4ce97d75becf95471.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-29T15:54:34.153

**Ө-notation 的使用：**

* * *

如果任何函数的上界和下界都相同，我们可以使用Ө-notation 来描述它的时间复杂度。它的上界和下界都可以用一个符号来指定。它只是更多地说明了函数的特性。

**例子 ，**

```
suppose we have a function , 
                  f(n) = 4logn + loglogn  
             we can write this function as 
                  f(n) = Ө(logn)
             Because its upper bound and lower bound
are O(logn) and  Ω(logn) repectively, which are same 
so it is legal to write this function as , 
                  f(n)=  Ө(logn) 
```

证明：

```
 **Finding upper bound :**

 f(n) = 4logn+loglogn

    For all sufficience value of n>=2

        4logn <= 4 logn   
        loglogn <= logn 

    Thus , 

     f(n) = 4logn+loglogn <= 4logn+logn
                          <= 5logn
                           = O(logn)       // where c1 can be 5 and n0 =2
**Finding lower bound :**

   f(n) = 4logn+loglogn

   For all sufficience value of n>=2

      f(n) = 4logn+loglogn >= logn
    Thus,              f(n) =  Ω(logn)   // where c2 can be 1 and n0=2

  so , 
                        f(n) = Ɵ(logn) 
```

![在此处输入图像描述](../Images/b7ef018ef6c749761e74e18a53356f43.png)

* * *

**同样，在插入排序的情况下：**

* * *

```
If running time of insertion sort is described by simple function f(n).
In particular , if f(n) = 2n^2+n+1 then 

Finding upper bound:
      for all sufficient large value of n>=1
                         2n^2<=2n^2   ------------------- (1)
                           n <=n^2    --------------------(2)
                           1 <=n^2    --------------------(3)
        adding eq 1,2 and 3, we get.
                     2n^2+n+1<= 2n^2+n^2+n^2
        that is 
                         f(n)<= 4n^2
                         f(n) = O(n^2)  where c=4 and n0=1 

Finding lower bound:
       for all sufficient large value of n>=1
                           2n^2+n^2+1 >= 2n^2
         that is , 
                                f(n) >= 2n^2
                                f(n) = Ω(n^2) where c=2 and n0=1     
      because upper bound and lower bound are same,
                                f(n) = Ө(n^2)

   if f(n)= 2n^2+n+1 then, c1*g(n) and c2*g(n) are presented by diagram: 
```

![在此处输入图像描述](../Images/616b0bb2029908e4a9ded0929ab3f5b0.png)

**在最坏的情况下，插入排序的上界和下界是 O(n^2) 和 Ω(n^2)，因此在最坏的情况下，将插入排序的运行写成 Ө(n^2)) 是合法的**

**最好的情况是 Ө(n)。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T06:50:46.687

插入排序时间“计算”复杂度：O(n^2), Ω(n)

```
O(SUM{1..n}) = O(1/2 n(n+1)) = O(1/2 n^2 + 1/2 n)) ~ O(n^2)

Ө(SUM{1..(n/2)}) = Ө(1/8 n(n+2)) = Ө(1/8 n^2 + 1/4 n) ~ Ө(n^2) 
```

这是一篇论文，表明间隙插入排序是 O(n log n)，这是插入排序的最佳版本：[间隙插入排序](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.9.3665)

但是，如果您正在寻找更快的排序算法，那么当 k=n （所有符号都是唯一的）时，有时间：O（3n）的[计数排序，空间：O（n）](http://en.wikipedia.org/wiki/Counting_sort)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T06:14:00.817

插入时间的最佳情况运行时间是 Ө(n) ，最坏情况是 Ө(n^2) 准确地说。所以插入排序的运行时间是 O(n^2) 而不是 Ө(n^2)。O(n^2) 意味着算法的运行时间应该小于或等于 n^2，其中 Ө(n^2) 意味着它应该完全等于 n^2。

最坏情况下的运行时间永远不会小于 Ө(n^2)。我们使用 Ө(n^2) 因为它更准确。

# r - getFinancials 中的错误

> ID：15608657
> 
> 赞同：2
> 
> 时间：2013-03-25T06:08:13.607
> 
> 标签：r, quantmod

我正在尝试检索 AAPL 财务数据，但出现以下错误

```
> library(quantmod)
> f <- get(getFinancials('APPL'))
Error in thead[x]:thead[x + 1] : NA/NaN argument
In addition: Warning message:
In readLines(tmp) :
  incomplete final line found on 'C:\Users\myuser\AppData\Local\Temp\Rtmpgrg0Uq\fileafc7f52710a' 
```

我尝试加载整个 NQ100 并且这些股票也收到了相同的错误消息

```
> symbols
 [1] "ADBE" "APOL" "AAPL" "AMAT" "ADSK" "ADP"  "BBBY" "BMC"  "CA"   "CERN" "CSCO" "COST" "DELL" "DTV"  "DLTR" "ERTS" "ESRX" "FFIV" "FLEX" "GRMN" "GMCR" "HSIC" "ILMN"
[24] "INFY" "INTC" "INTU" "JOYG" "KLAC" "LRCX" "LLTC" "MRVL" "MXIM" "MCHP" "MU"   "MSFT" "NTAP" "NWSA" "NVDA" "ORCL" "PAYX" "QCOM" "RIMM" "ROST" "SNDK" "STX"  "SHLD"
[47] "SPLS" "SBUX" "SYMC" "URBN" "VOD"  "WFM"  "XLNX" 
```

所有其他股票工作正常

这是`fileafc7f52710a`错误消息中指定的文件中的文本

```
<!DOCTYPE html><html><head><script>(function(){(function(){function d(a){this.t={};this.tick=function(a,c,b){b=void 0!=b?b:(new Date).getTime();this.t[a]=[b,c]};this.tick("start",null,a)}var a=new d;window.jstiming={Timer:d,load:a};if(window.performance&&window.performance.timing){var a=window.performance.timing,c=window.jstiming.load,b=a.navigationStart,a=a.responseStart;0<b&&a>=b&&(c.tick("_wtsrt",void 0,b),c.tick("wtsrt_","_wtsrt",a),c.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),
c&&0<b&&(c.tick("_tbnd",void 0,window.chrome.csi().startE),c.tick("tbnd_","_tbnd",b))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,c&&0<b&&(c.tick("_tbnd",void 0,window.external.startE),c.tick("tbnd_","_tbnd",b))),a&&(window.jstiming.pt=a)}catch(e){}})();})();
</script><title>Financial Statements for APPELL PETE CORP - Google Finance</title><meta name="Description" content="Get the detailed quarterly/annual income statement, cashflow statement, and balance sheet for APPELL PETE CORP (PINK:APPL). See revenue, expenses, profit, cash, assets, liabilities, shareholder’s equity and more for the lastest fiscal quarter/year for APPELL PETE CORP (PINK:APPL) on Google Finance."><meta http-equiv="X-UA-Compatible" content="IE=10"><link rel="stylesheet" type="text/css" href="/finance/f/finance_us-3578168175.css"><link rel="stylesheet" type="text/css" href="/finance/_/ss/a/ver=1b0b1eb0rwwhe/am=!xiAxGGlQxoffym1L/bf=/r=O"><link rel="icon" type="image/vnd.microsoft.icon" href="/finance/favicon.ico"><style>#gbar,#guser{font-size:13px;padding-right:8px;padding-top:4px !important;}#gbar{padding-left:8px;height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}.gbi .gb4{color:#dd8e27 !important}.gbf .gb4{color:#900 !important}</style><script></script><script>
      function _rpt() {}
      function _tck() {}
    </script></head><body><div class=fjfe-bodywrapper><div id=fjfe-real-body class=g-doc><input type="text" name="hist_state" id="hist_state" style="display:none;"><iframe id="hist_frame" name="hist_frame" class=invfr tabindex="-1"></iframe><iframe src="/finance/_/js/a/b/rt=h/ver=t5fUYABu0to.en_US./sv=1/am=!xiAxGGlQxoffym1L/d=0" class=invfr tabindex="-1"></iframe><div id=gbar><nobr><a class=gb1 href="http://www.google.com/webhp?hl=en&tab=ew">Search</a> <a class=gb1 href="http://www.google.com/imghp?hl=en&tab=ei">Images</a> <a class=gb1 href="http://maps.google.com/maps?hl=en&tab=el">Maps</a> <a class=gb1 href="https://play.google.com/?hl=en&tab=e8">Play</a> <a class=gb1 href="http://www.youtube.com/?tab=e1">YouTube</a> <a class=gb1 href="http://news.google.com/nwshp?hl=en&tab=en">News</a> <a class=gb1 href="https://mail.google.com/mail/?tab=em">Gmail</a> <a class=gb1 href="https://drive.google.com/?tab=eo">Drive</a> <a class=gb1 style="text-decoration:none" href="http://www.google.com/intl/en/options/"><u>More</u> &raquo;</a></nobr></div><div id=guser width=100%><nobr><span id=gbn class=gbi></span><span id=gbf class=gbf></span><span id=gbe></span><a  href="http://www.google.com/support/finance?hl=en" class=gb4>Help</a> | <a target=_top id=gb_70 href="https://www.google.com/accounts/ServiceLogin?service=finance&passive=1209600&continue=http://www.google.com/finance?fstype%3Dii%26q%3DAPPL&followup=http://www.google.com/finance?fstype%3Dii%26q%3DAPPL" class=gb4>Sign in</a></nobr></div><div class=gbh style=left:0></div><div class=gbh style=right:0></div><div id=fjfe-click-wrapper><script>
(function() {
  var l = window.location;
  var q = l.search ? l.search.substr(1) : '';
  var h = l.hash ? l.hash.substr(1) : '';
  var p = '/finance';
  var ss = 'stockscreener';
  var conn = window.history && window.history.pushState ? '/' : '#';
  if (l.pathname == p + '/' + ss) {
    if (h) l.href = p + conn + ss + '?' + q + '&' + h;
  } else if (l.pathname != p && h) {
    l.href = p + l.hash;
  }
  if (h) {
document.getElementById('fjfe-click-wrapper').style.display = 'none';
  }
})();
</script><div id=gf-head class="g-section g-tpl-75-25 g-split"><div class="g-unit g-first"><div class=fjfe-logo><a href="/finance/?ei=OudPUfCPNIeowAPQtQE"><img src="/finance/f/logo_us-115376669.gif" alt="Google Finance"></a></div><div id=gf-search class=fjfe-search><form method="get" action="/finance" autocomplete="off"><input class=fjfe-searchbox-input name=q type=text tabindex=1 value="PINK:APPL"></input><span class=fjfe-searchbox-button-wrapper><span class=fjfe-searchbox-button-wrapper2><input class=fjfe-searchbox-button type=submit tabindex=2 value="Get quotes"></input></span></span><input type=hidden name="ei" value="OudPUfCPNIeowAPQtQE"></input></form></div></div><div class="g-unit fjfe-promo"><div id="ad2-target" class="id-ad2-target"></div></div></div><div class=elastic><div id=app class="g-section g-tpl-left-11p4em"><div class="g-unit g-first"><div id=gf-nav><div class=fjfe-nav-nav><ul class=fjfe-nav id=navmenu><li class=fjfe-nav-item><a href="/finance?ei=OudPUfCPNIeowAPQtQE"><div>Markets</div></a><li class=fjfe-nav-item><a href="/finance/market_news?ei=OudPUfCPNIeowAPQtQE"><div>News</div></a><li class=fjfe-nav-item><a href="/finance/portfolio?action=view&ei=OudPUfCPNIeowAPQtQE"><div>Portfolios</div></a></ul></div><div class="fjfe-recentquotes fjfe-recentquotes-noquote"><h4>Recent Quotes <span class="fjfe-recentquotes-duration">(2 hours)</span></h4><div class=fjfe-recentquotes-noquote-notification>You have no recent quotes</div><div class=fjfe-recentquotes-quotes><div class="fjfe-toggle fjfe-toggle-button"><span class=fjfe-chg-toggle>chg</span> | <span class=fjfe-perc-toggle>%</span></div><div class=fjfe-table-div><table class=fjfe-recentquotes-table id=rq width=100%></table></div></div></div></div><script>var _cleardot = 'data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';
    var google = google || {};
    google.finance = google.finance || {};
    google.finance.gce =false;</script><script src="/finance/f/sfe-opt-2862241303.js"></script><script>
      _regOnLoad = function(f) {
        if (document.readyState == 'complete') {
          f && f();
        } else {
          // Window.attachEvent() for IE8 and below compatability.
          var addEventFunction = window.attachEvent ||
              window.addEventListener || function(ignored, f) { f(); };
          var event = window.attachEvent ? 'onload' : 'load';
          f && addEventFunction(event, f);
        }
      };

      google.finance.renderRecentQuotes = function() {};
    </script></div><div class=g-unit id=gf-viewc><div class=fjfe-content></div></div></div></div></div><div id=gf-foot><div class=fjfe-footer-links>Google Finance Beta available in: <a href="http://www.google.com.hk/finance?ei=OudPUfCPNIeowAPQtQE" class="fjfe-edition-link">Hong Kong</a> - <a href="http://www.google.ca/finance?ei=OudPUfCPNIeowAPQtQE" class="fjfe-edition-link">Canada</a> - <a href="http://www.google.com/finance?ei=OudPUfCPNIeowAPQtQE" class="fjfe-edition-link">U.S.</a> - <a href="http://www.google.com.hk/finance?hl=zh-CN&ei=OudPUfCPNIeowAPQtQE" class="fjfe-edition-link">China</a> - <a href="http://www.google.co.uk/finance?ei=OudPUfCPNIeowAPQtQE" class="fjfe-edition-link">U.K.</a></div><p class=fjfe-footer-disclaimer>Information is provided "as is" and solely for informational purposes, not for trading purposes or advice, and may be delayed.<br>To see all exchange delays, please <a href="http://www.google.com/intl/en/googlefinance/disclaimer/?ei=OudPUfCPNIeowAPQtQE" class="fjfe-secondary-link fjfe-no-sticky-params"> see disclaimer</a>.</p><div class=fjfe-footer-links>&copy;2013 Google - <a href="http://www.google.com?hl=en&ei=OudPUfCPNIeowAPQtQE">Google Home</a> - <a href="http://googlefinanceblog.blogspot.com?ei=OudPUfCPNIeowAPQtQE">Blog</a> - <a href="http://support.google.com/finance?hl=en&ei=OudPUfCPNIeowAPQtQE">Help</a> - <a href="http://support.google.com/finance?ctx=report&hl=en&ei=OudPUfCPNIeowAPQtQE&exch=PINK&sym=APPL">Report a Problem</a> - <a href="http://www.google.com/intl/en/policies/privacy/?ei=OudPUfCPNIeowAPQtQE">Privacy Policy</a> - <a href="http://www.google.com/intl/en/policies/terms/?ei=OudPUfCPNIeowAPQtQE">Terms of Service</a></div></div></div></div><script>var googlefinance = {i: ["f.b.id","",,500,"",0,,["f.b.cf","t5fUYABu0to.en_US.",0]
,[]
,0,[["c388b5b8","true",2]
]
,"OudPUfCPNIeowAPQtQE","www.google.com"]
}; GF_domReady = 1;</script></body></html> 
```

# lua - Corona 中的回调事件

> ID：15608661
> 
> 赞同：0
> 
> 时间：2013-03-25T06:08:36.437
> 
> 标签：lua, coronasdk

我正在尝试使用回调在我的类中调用一个函数，如下所示：

```
//main function
function Main()
   button:setOnCallback("touch", fnName)
end

//fnName
function fnName(event)
   if event.phase == "ended" then
     //do something
   end
end 
```

如果我不包含 event.phase == "ended" 部分，则回调有效，但我需要它来指定何时调用该函数。问题是，如果我包含该部分，它根本不会调用整个函数。我在这里做错了什么？请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T07:16:09.320

的值`event.phase`永远不能`"ended"`按照[Corona API](http://docs.coronalabs.com/api/event/key/phase.html)参考。

它是`up`或`down`。

> 按键状态：**`"up"`**或**`"down"`**。查看*[`event.keyName`](http://docs.coronalabs.com/api/event/key/keyName.html)*键名。

# ruby-on-rails - 使用 Omniauth 进行身份验证（无设计） - 如何检查路由是否已登录？

> ID：15608663
> 
> 赞同：0
> 
> 时间：2013-03-25T06:08:48.060
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authentication, oauth-2.0, omniauth

我只使用omniauth-oauth2 进行身份验证（无设计）。我想为已登录和未登录的用户定义不同的根，以包括安全仪表板。我的应用程序控制器中有一个 current_user 方法，但我似乎无法在我的路由中访问它。有人对我如何最好地做到这一点有任何建议吗？

**应用控制器：**

```
helper_method :current_user

private

    def current_user
        @current_user ||= User.find(session[:user_id]) if session[:user_id]
    end 
```

**这不起作用：**

```
Blog::Application.routes.draw do

 if :current_user
   root :to => "home#show"
 else
   root :to => "home#index"
 end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:32:32.363

在**routes.rb**文件中，只需根据条件指定路由的**约束**。

```
root :to => 'home#show', :constraints => lambda{|req| !req.session[:user_id].blank?}
root :to => 'home#index' 
```

希望这会在您将**user_id**存储在会话中时有用，这将起作用

# mongodb - MongoDB通过匹配子文档按相关性排序

> ID：15608664
> 
> 赞同：2
> 
> 时间：2013-03-25T06:08:50.447
> 
> 标签：mongodb, aggregation-framework, nosql

我有一个文档，必须根据其子文档中的值进行搜索并按相关性排序。

在研究这个话题时，我遇到了这个[问题](https://stackoverflow.com/questions/8617318/get-documents-with-tags-in-list-ordered-by-total-number-of-matches)。我现在知道我必须使用聚合框架，但解决方案没有涵盖子文档。

例如，我想获取每个包含带有 teams.name ['blue', 'red', 'green'] 的子文档的文档，并根据它拥有的最多匹配项进行排序。

```
League Collection:
{ 
  coach: Henderson,
  teams:
  [ 
    {
       name: red,
       logo: bird,
       division: east
    },
    {
       name: blue,
       logo: bluejay,
       division: west
    },
   {
       name: green,
       logo: monkey,
       division: east
    }
 ]
}

{ 
  coach: Wilkins,
  teams:
  [ 
    {
       name: red,
       logo: bird,
       division: east
    },
    {
       name: blue,
       logo: bluejay,
       division: west
    },
 ]
}

{ 
  coach: Sandy,
  teams:
  [ 
    {
       name: red,
       logo: bird,
       division: east
    }
 ]
} 
```

最终结果将是：

```
item          total matches
--------      --------------
Henderson     3
Wilkins       2
Sandy         1 
```

我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T06:34:57.323

您可以尝试以下方法：

```
db.league.aggregate(
  {$match:{'teams.name':{$in:['red','blue','green']}}},
  {$unwind:'$teams'},
  {$match:{'teams.name':{$in:['red','blue','green']}}},
  {$project:{'item':'$coach','teams':1}},
  {$group:{_id:'$item',total:{$sum:1}}},
  {$sort:{total:-1}}
) 
```

第一个匹配将匹配所有具有匹配红色、蓝色和绿色中至少一个的团队子文档的文档。第二个匹配将删除包含在第一个匹配中的虚假子文档。

# java - 为什么java集合框架中没有直接实现Bag？

> ID：15608667
> 
> 赞同：24
> 
> 时间：2013-03-25T06:09:06.487
> 
> 标签：java, collections

我不明白为什么 JCF（Java 集合框架）没有`Bag`实现（允许重复而不维护顺序）。 `Bag`性能将比 JCF 中当前的 Collection 实现好得多。

*   我知道如何`Bag`用 Java 实现。
*   我知道`Bag`在 Apache commons 中可用。
*   我知道还有其他实现可以用作 a`Bag`但是与 a 相比，在其他实现中还有很多工作要做`Bag`。

为什么 Java Collections 框架没有提供这样的直接实现？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-25T14:39:44.467

发表我的评论作为答案，因为它最好地回答了这个问题。

从[这里](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6567419)提交的错误报告：

> Collection 框架的维护者对设计和实现这些接口/类的热情并不高。我个人不记得需要一个。在 JDK 之外开发的流行包在现实世界中证明其价值后，更有可能将其导入 JDK。

对 Bags 的支持需求在今天仍然有效。

[番石榴](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/Multiset.html)支持它。还有[GS-Collections](http://www.goldmansachs.com/gs-collections/javadoc/2.0.0/com/gs/collections/api/bag/Bag.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-01T09:03:10.983

Currently, bag violates the collections contract. Many methods are in conflict with the current collections rules.

"Bag is a Collection that counts the number of times an object appears in the collection. Suppose you have a Bag that contains `{a, a, b, c}`. Calling `getCount(Object)` on `a` would return 2, while calling `uniqueSet()` would return `{a, b, c}`.

Note that this interface violates the Collection contract. The behavior specified in many of these methods is not the same as the behavior specified by Collection. The noncompliant methods are clearly marked with "(Violation)" in their summary line. A future version of this class will specify the same behavior as Collection, which unfortunately will break backwards compatibility with this version."

```
 boolean add(java.lang.Object o)
      (Violation) Add the given object to the bag and keep a count.

 boolean removeAll(java.util.Collection c)
      (Violation) Remove all elements represented in the given collection, respecting cardinality. 
```

Please see the link for more information: [HERE](https://commons.apache.org/proper/commons-collections/javadocs/api-2.1.1/org/apache/commons/collections/Bag.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T06:45:07.243

JDK 尝试为您提供通用数据结构的实现，并允许您在通用结构无法满足您的目的时实现任何东西。他们可能认为这不是常见的数据结构。从实用性来看，他们不可能实现每个数据结构或满足每个人的要求。你认为常见的东西可能对大多数人来说并不常见。

# shell - 在 shell 脚本中搜索特定的单词

> ID：15608677
> 
> 赞同：0
> 
> 时间：2013-03-25T06:10:11.757
> 
> 标签：shell

我有问题。请给我一个解决方案。

我必须运行下面给出的命令，它将列出所有包含给定字符串“abcde1234”的文件。

> 查找 /path/to/dir/ * | xargs grep abcde1234

但在这里它也会显示包含字符串“abcde1234567”的文件。但我只需要包含单词“abcde1234”的文件。我需要在命令中进行哪些修改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T06:18:49.357

当我需要类似的东西时，我使用`\<`and `\>`which 表示单词边界。像这样：

`grep '\<abcde1234\>'`

```
The symbols \< and \> respectively match the empty string at the beginning and end of a word. 
```

但这就是我。正确的方法可能是使用`-w`switch 代替（我倾向于忘记）：

```
-w, --word-regexp
          Select  only  those  lines  containing matches that form whole words.  The test is that the matching substring must either be at the beginning of the line, or preceded by a non-word constituent character.  Similarly, it
          must be either at the end of the line or followed by a non-word constituent character.  Word-constituent characters are letters, digits, and the underscore. 
```

还有一件事：你可以只使用with而不是`find`+ 。或者实际上只是 grep ：`xargs``find``-exec``-r`

```
grep -w -r abcde1234 /path/to/dir/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T06:19:20.130

```
$ grep abcde1234 * 
```

这将 grep`abcde1234`当前目录中的字符串，以及字符串所在的文件名。前任：

```
abc.log: abcde1234 found 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T06:19:16.187

嗨，我得到了答案。通过将 $ 附加到要搜索的单词，它将显示仅包含该单词的文件。

命令将是这样的。

> 查找 /path/to/dir/ * | xargs grep abcde1234$

谢谢。

# ios - 使用 isKindOfClass 简洁地评估具有 MULTIPLE 类检查的对象

> ID：15608684
> 
> 赞同：2
> 
> 时间：2013-03-25T06:10:43.403
> 
> 标签：ios, objective-c

有没有更好的方法来查看一个对象是否有几个类之一

```
if ([item isKindOfClass:[NSArray class]] || [item isKindOfClass:[NSNumber class]] || 
[item isKindOfClass:[NSPredicate class]] || [item isKindOfClass:[NSMutableArray class]] 
|| [item isKindOfClass:[NSString class]]) {
   return YES;
}; 
```

还有比这更优雅的方式吗？最好是不需要为循环/数组创建类别或多行的内联方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T06:17:24.570

也许这个？

```
NSArray *classes = @[ [NSArray class], [NSNumber class], [NSPredicate class], (etc.)];
for (Class cls in classes) {
    if ([item isKindOfClass:cls]) {
        return YES;
    }
} 
```

它并没有明显更简洁，但我认为它更容易阅读和维护。

**编辑**：当然，在我写这篇文章的时候，你会添加一个关于没有循环或数组的规定。:)

您可能可以使用 NSPredicate 和 "@any.FUNCTION(isKindOfClass:)" 键路径来做到这一点，但我认为它不会更优雅；大多数人会发现它更难阅读。我真的认为数组和for循环是这里的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:45:37.160

这就是我最终做的事情：

```
NSArray *classes = @[ [NSArray class], [NSDictionary class], [NSSet class] ];
NSUInteger *matches = [classes indexesOfObjectsPassingTest:^BOOL(id class, NSUInteger idx, BOOL *stop) {
           return [item isKindOfClass:class]);
       }].count; 
```

# html - 设置带有半边框的文本区域

> ID：15608695
> 
> 赞同：2
> 
> 时间：2013-03-25T06:11:14.707
> 
> 标签：html, css, textarea

我怎样才能做一个 textarea 有一个半边框，看起来就像下图中的那个？而这一切都只有CSS。

![在此处输入图像描述](../Images/7be3140d99d1059f7654a6edd9f34a05.png)

在我的 html 中看起来像：

```
 <div class"textareaKeeper">
    <textarea class="forDesc">Small Description</textarea>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T06:24:35.903

尝试向上移动文本区域并调整边距和填充。

请参阅[DEMO](http://jsfiddle.net/76yza/11/)（针对浏览器不一致的问题进行了修复）。

```
textarea {
    width: 198px;
    height: 20px;
    line-height: 20px;
    top: -12px;
    border: none;
    resize: none;
    margin-left: 2px;
    position: relative;
    padding: 0 2px;
}
div {
    border-left: 2px solid red;
    border-right: 2px solid red;
    border-bottom: 2px solid red;
    height: 10px;
    width: 204px;
    margin-top: 20px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T06:16:45.267

尝试这个

```
.forDesc{
    border-style:solid;
    border-color:white red red red;
} 
```

如果你想实现半边框，直接 CSS 边框属性是不可能的

可能这可以帮助你[css border-left 50% height](https://stackoverflow.com/questions/2837440/css-border-left-50-height)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T06:14:04.107

```
textarea {
 border-top: 0;
 height: 18px; /* optional but looks like you have a short text area */
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T06:22:02.240

在父 div 中创建一个`span`or并创建它并添加边框`div``position:absolute`

**HTML**

```
<div class="textareaKeeper">
    <textarea class="forDesc">Small Description</textarea>
      <span></span>
</div> 
```

**CSS**

```
textarea{
    border:none; 
    height:30px;
    background:#fcf7d1;
    bottom:0;
    vertical-align:bottom;
    width:100%
}
span{
    width:100%;
    position:absolute;
    bottom:0; display:inline-block;
     border-bottom:solid 1px red;
    border-left:solid 1px red;
    border-right:solid 1px red;
    height:15px
}
.textareaKeeper{
    border:none;   
    display:inline-block;
    position:relative
} 
```

**[演示](http://jsfiddle.net/nEw2D/1/)**

# python - Django SelectTimeWidget 只读

> ID：15608697
> 
> 赞同：0
> 
> 时间：2013-03-25T06:11:19.460
> 
> 标签：python, django, django-forms, django-templates, django-views

这是我的 Django 代码，

```
class Fpool_Booked(forms.Form):

    From = forms.CharField(label = 'Departure Place',max_length = 30,widget=forms.TextInput(attrs={'readonly':'readonly'}),error_messages = {'required': 'Please enter From where do you want to go'})

    To = forms.CharField(label = 'Destination Place',max_length = 30,widget=forms.TextInput(attrs={'readonly':'readonly'}),error_messages = {'required': 'Please enter destination'})

    From_Time = forms.TimeField(label = 'Departure Time',widget = SelectTimeWidget(attrs={'readonly':'readonly'},twelve_hr = True)) 
```

如您所见，我已经准备好文本字段，它工作正常，就像我想让 SelectTimeWidget 只读一样，我已经尝试过`attrs={'readonly':'readonly'}`但没有按预期工作。有没有什么办法解决这一问题 ？/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:48:13.147

SelectTimeWidget 是基于 SelectDateWidget 的自定义小部件。我认为它不支持“只读”。我可能回答过头了，但我有一个剧本并想出了以下内容，如果你真的想这样做可能会有所帮助......

[我将 SelectTimeWidget 片段放入我的代码](http://djangosnippets.org/snippets/1202/)中并更改了以下行

```
def __init__(self, attrs=None, hour_step=None, minute_step=None, second_step=None, twelve_hr=False): 
```

至：

```
def __init__(self, attrs={'readonly':'readonly'}, hour_step=None, minute_step=None, second_step=None, twelve_hr=False): 
```

和：

```
select_html = Select(choices=hour_choices).render(self.hour_field % name, hour_val, local_attrs)
select_html = Select(choices=minute_choices).render(self.minute_field % name, minute_val, local_attrs)
select_html = Select(choices=second_choices).render(self.second_field % name, second_val, local_attrs) 
```

至：

```
select_html = TextInput().render(self.hour_field % name, hour_val, local_attrs)
select_html = TextInput().render(self.minute_field % name, minute_val, local_attrs)
select_html = TextInput().render(self.second_field % name, second_val, local_attrs) 
```

当我想将值发布到表单字段中并且更加动态，能够访问表单中的值并动态更改表单时，我使用了以下表单样式。

```
class time_form(forms.Form):
    def __init__(self, *args, **kwargs):
        super(time_form, self).__init__(*args, **kwargs)

        self.fields['From'] = forms.CharField(widget=forms.TextInput(attrs={'onchange':'this.form.submit()'}))
        self.fields['To'] = forms.CharField(widget=forms.TextInput(attrs={'onchange':'this.form.submit()'}))
        self.fields['From_Time'] = forms.TimeField(widget = SelectTimeWidget()) 
```

在视图中，我设置了值以查看它的外观：

```
form = time_form({'From_Time':'12:34:56 P.M.',}) 
```

注意我留在 attrs={'onchange':'this.form.submit()'} 是为了好玩，以防您想在进行更改时动态更新表单（并显示 attr= 的位置），虽然我发现这往往最适合选择小部件。在表单中，您可以访问 'From' 和 'To' 值（例如 var = args[0].get('To')）并更新 'From_Time' (args[0]['From_Time']= some function ）。

其次，“From_Time”小部件现在只是一个美化的只读 TextInput 框，它可以解析时间格式，因此看起来很复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T04:12:50.230

我必须在我的表单中禁用一个选择小部件，我使用这段代码只是为了禁用该字段：

```
def __init__(self, *args, **kwargs):
   self.fields['field_name'].widget.attrs['disabled'] = True 
```

选择输入字段没有“*只读*”属性。

# qt - 如何以纳秒为单位设置 QTimer

> ID：15608700
> 
> 赞同：1
> 
> 时间：2013-03-25T06:11:39.873
> 
> 标签：qt, qtimer

是否可以像我们之前在linux中设置的那样设置计时器值

> 结构时间规范间隔时间；长秒，纳秒；秒 = 0; 纳秒 = 100000;
> 
> ```
> intervalTime.tv_sec  = seconds;
> intervalTime.tv_nsec = nanoSeconds; 
> ```

我可以在 QTimer 的 Qt 中设置相同的时间吗

QTimer::setValue(1 毫秒)，我如何设置纳秒..

请帮助，提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:10:37.167

纳秒 - 不，但如果您将计时器类型设置为 Qt::PreciseTimer 您可以获得毫秒精度

# google-app-engine - 谷歌应用引擎：完整的修订历史

> ID：15608701
> 
> 赞同：-1
> 
> 时间：2013-03-25T06:11:46.630
> 
> 标签：google-app-engine

我不小心写了一个文件，然后继续上传到我的应用引擎网站。有没有办法找到以前的修订？我没有设置新版本。

是否有上传文件的完整修订历史记录或只有不同显式版本的当前文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:11:14.480

除非您更改版本，否则您会覆盖文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:30:50.507

您可以尝试查看管理员日志，可能会在那里找到一些东西 编辑可能还保存了一些历史记录 祝您好运（这是您写得更好的机会）

# c - 为什么 sockaddr_in 中需要零填充？

> ID：15608707
> 
> 赞同：16
> 
> 时间：2013-03-25T06:12:12.267
> 
> 标签：c, linux, kernel

我用谷歌搜索了它，有些人说“与 struct sockaddr 保持相同的大小”。但是内核不会直接使用 sockaddr （对吧？）。使用时。内核会将其转换回原来的样子。那么为什么需要零填充呢？

```
struct sockaddr {
    unsigned short    sa_family;    // address family, AF_xxx
    char              sa_data[14];  // 14 bytes of protocol address
};

struct sockaddr_in {
    short            sin_family;   // e.g. AF_INET, AF_INET6
    unsigned short   sin_port;     // e.g. htons(3490)
    struct in_addr   sin_addr;     // see struct in_addr, below
    char             sin_zero[8];  // zero this if you want to
};

struct in_addr {
    unsigned long s_addr;          // load with inet_pton()
}; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-25T06:39:28.460

我能找到的另外两条相关信息是

*   [**将 sin_zero 设置为 0**](http://silviocesare.wordpress.com/2007/10/22/setting-sin_zero-to-0-in-struct-sockaddr_in/)

谈一段*不*清除字节的代码

> 这是一个错误。我看到它偶尔发生。此错误可能会导致应用程序中出现未定义的行为。

随后进行了一些解释

> 大部分网络代码不使用sockaddr_in，它使用sockaddr。当您使用像 sendto 这样的函数时，您必须将 sockaddr_in 或您正在使用的任何地址显式转换为 sockaddr。sockaddr_in 与 sockaddr 大小相同，但在内部大小相同，因为有一点点改动。
> 
> 那个hack是sin_zero。sockaddr_in 中有用数据的长度确实比 sockaddr 短。但是使用一个小缓冲区在 sockaddr_in 中填充了差异；该缓冲区是 sin_zero。

最后，可以在各个地方找到的信息

> 在某些架构上，不清除 sin_zero 不会导致任何问题。但在其他架构上可能会。规范要求它清除 sin_zero，因此如果您希望您的代码现在和将来没有错误，则必须这样做。

*   [**sin_zero 的使用**](http://lists.kernelnewbies.org/pipermail/kernelnewbies/2011-February/000966.html)

回答问题

> 为什么我们需要这个 8 字节填充？

和答案

> Unix 网络编程第 3.2 章说，“POSIX 规范只需要结构中的三个成员：sin_family、sin_addr 和 sin_port。符合 POSIX 的实现可以定义额外的结构成员，这对于 Internet 套接字是正常的地址结构。几乎所有的实现都添加了 sin_zero 成员，以便所有套接字地址结构的大小至少为 16 字节。”
> 
> 这有点像结构填充，将来可能会保留给额外的字段。正如评论的那样，你永远不会使用它。

这与第一个链接一致。清除字节告诉接收器“我们这边没有使用这些字节”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-25T06:15:01.383

由于 struct sockaddr_in 需要转换为 struct sockaddr 它必须保持相同的大小，sin_zero 是一个未使用的成员，其唯一目的是将结构填充到 16 个字节（这是 sock_addr 的大小）。此填充大小可能因地址族而异。例如;

```
struct sockaddr_in {
   short int sin_family;     // Address family, AF_INET 
   unsigned short int sin_port;     // Port number 
   struct in_addr sin_addr;     // Internet address 
   unsigned char sin_zero[8];     // For padding, to make it same size as struct sockaddr 
}; 
```

现在以具有不同结构成员的 Xerox NS 系列为例：

```
struct sockaddr_ns {
    u_short sns_family;        // Address family, AF_NS 
    struct ns_addr sns_addr;        // the 12-byte XNS address 
    char sns_zero[2];        // unused except for padding 
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T06:43:04.460

发生结构填充是因为结构的成员必须出现在正确的字节边界，为了实现这一点，编译器会放入填充字节（或位，如果位字段正在使用），以便结构成员出现在正确的位置。此外，结构的大小必须使得在结构数组中所有结构都在内存中正确对齐。

因此，可能需要忽略内存泄漏。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-14T04:38:19.340

`struct sockaddr`是这个结构的抽象的、不完整的版本，只有家庭。 `struct sockaddr_in`是这个结构的 IPv4 版本。它只使用前 8 个字节。 `struct sockaddr_in6`是这种结构的 IPv6 版本，并且更大。填充允许较小的结构容纳此结构的最大变化，因此缓冲区不会过小。

当您将地址传递*给*函数或系统调用时，额外的字节并不是必需的。但是检索地址时，您需要为结果提供结构地址。该结构必须是所有可能变化中最大的。如果不是——假设你提供了一个 IPv4 版本，但取回了一个 IPv6 地址——那么结果将超出结构并破坏内存中隔壁的任何内容。

为了避免这种内存损坏，大多数相关函数都将结构大小作为参数。但是现在，当您通过该 IPv4 版本及其太小的尺寸时，您最终会得到一个不完全填充的 IPv6 版本的结构。看家庭，你可以看到它是IPv6。但是，如果您将该结构转换为 IPv6 并尝试使用它，则内容是错误的，因为该结构太小而无法包含完整的有效数据。

填充较小的结构可以避免这些障碍，并避免任何相关的潜在安全问题。

# android - 将 onSaveInstanceState 与 backstack 中的片段一起使用？

> ID：15608709
> 
> 赞同：27
> 
> 时间：2013-03-25T06:12:25.243
> 
> 标签：android, android-fragments

我有片段保存在 FragmentManager 的后台堆栈中。保存每个片段状态以使用成员变量更改方向，例如：

```
@Override
public void onSaveInstanceState(Bundle outState) 
{
    super.onSaveInstanceState(outState);
    outState.putLong("userId", mUserId);
    outState.putString("username", mUsername);
} 
```

我的问题是，如果方向发生变化，由于后台堆栈中的每个片段都通过 onSaveInstanceState 调用，我得到一个空指针异常，因为成员变量不再存在。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-09T23:00:05.533

您的成员变量可能不再存在，因为`FragmentManager`您`Activity`的所有片段都在消亡。

您还需要覆盖类的方法，因为`onSaveInstanceState`您`Activity`需要在保存`Activity`状态之前保存`Fragments`状态。

正如[文档](http://developer.android.com/reference/android/app/Fragment.html#onSaveInstanceState%28android.os.Bundle%29)所说：

> 在很多情况下，一个片段可能大部分被拆除（例如当放置在没有显示 UI 的后台堆栈上时），但它的状态不会被保存，直到它拥有的 Activity 实际需要保存它的状态。

**更新**

在您的`Activity` `onSaveInstanceState`and`onRestoreInstanceState`中，尝试保存您的`Fragment`引用，然后使用以下内容恢复它们：

```
public void onSaveInstanceState(Bundle outState){
    getFragmentManager().putFragment(outState, "myfragment", myfragment);
}
public void onRestoreInstanceState(Bundle inState){
    myFragment = getFragmentManager().getFragment(inState, "myfragment");
} 
```

如果你运气好，请告诉我！:-)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-08-19T19:57:31.900

以 Jorge Gil 为基础 - 'xɔɾ.xɛ xil answer 注意以下几点：

*   不要忘记调用 onSaveInstanceState() 和 onRestoreInstanceState() 的超级实现。
*   如果您正在使用支持包：请使用 getSupportFragmentManager() 而不是 getFragmentManager()。
*   检索原始片段时，您必须对其进行投射。

对不起，很明显是队长！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-16T17:26:21.617

在片段上设置 setRetainInstance 是否有帮助。试用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-25T13:57:00.033

我认为正确的解决方案是读取那些似乎总是`savedInstanceState`在`onCreate`之前被调用的成员变量`onSaveInstanceState`。如果您处理 中的字段`onViewCreated`，则它们没有机会在下一个之前初始化`onSaveInstanceState`（在这种特殊情况下，当 Fragment 在后台堆栈中时）。

# python - 如何在 onchange 事件中加载一对多的孩子？

> ID：15608710
> 
> 赞同：5
> 
> 时间：2013-03-25T06:12:32.653
> 
> 标签：python, xml, one-to-many, openerp

如果我选择一个部门需要在“笔记本部分”加载其员工，我有一个选择字段（多对一个部门字段）。如何在 openerp 7 中实现这一点？

如果我选择了相关的房地产 ID，则需要加载相关部门。如果选择部门，则需要在下一阶段加载相关工作人员

```
<record model="ir.ui.view" id="bpl_work_offer_form">
<field name="name">bpl.work.offer.form</field>
<field name="model">bpl.work.offer</field>
<field name="arch" type="xml">
<form string='bpl_work_offer' version='7.0'>
<sheet>

<group>
    <group>
        <field name='bpl_estate_id' />
        <field name='bpl_division_id' />
        <field name='user_id' />
    </group>
    <group>
        <field name='date_of_offer' />
        <field name='payment_type' />
        <field name='select_by' />
        <field name='no_of_workers' attrs="{'invisible':[('select_by','=','by_name')]}" />
        <field name='work_type' />

    </group>
</group>
<div name="Worker Selection"></div>
<separator string='Select workers' />
<notebook attrs="{'invisible':[('select_by','=','by_count')]}">
    <page string="Tea Workers" attrs="{'readonly':[('work_type','!=','tea')]}">
        <field name='selected_tea_workers_line_ids' nolabel='1'>
            <tree string='List' editable='bottom'>
                <field name='worker_id' />
                <field name='is_selected' />
            </tree>
        </field>
        <group class='oe_subtotal_footer oe_right'>
            <field name='total_workers' />
        </group>
        <br />
        <br />
    </page>
    <page string="Rubber Workers" attrs="{'readonly':[('work_type','!=','rubber')]}">
        <field name='selected_rubber_workers_line_ids' nolabel='1'>
            <tree string='List' editable='bottom'>
                <field name='worker_id' />
                <field name='is_selected' />
            </tree>
        </field>
        <group class='oe_subtotal_footer oe_right'>
            <field name='total_workers' />
        </group>
        <br />
        <br />
    </page>
    <page string="Sundry Workers" attrs="{'readonly':[('work_type','!=','sundry')]}">
        <field name='selected_sundry_workers_line_ids' nolabel='1'>
            <tree string='List' editable='bottom'>
                <field name='worker_id' />
                <field name='is_selected' />
            </tree>
        </field>
        <group class='oe_subtotal_footer oe_right'>
            <field name='total_workers' />
        </group>
        <br />
        <br />
    </page>
</notebook>
</sheet>
</form>
</field>
</record>

<record model="ir.actions.act_window" id="bpl_work_offer_action">
<field name="name">bpl.work.offer.action</field>
<field name="res_model">bpl.work.offer</field>
<field name="view_type">form</field>
<field name="view_mode">form</field>
</record> 
```

型号代码

```
class company_new_registration(osv.osv):
    _name = "bpl.company.n.registration"
    _description = "Company"
    _columns = {
                'name': fields.char('Company Name', size=128, required=True),
                'estates': fields.one2many('bpl.estate.n.registration', 'company_id', 'Estate')                                        
    }
# Bill of Material
company_new_registration()

class estate_new_registration(osv.osv):
    _name = "bpl.estate.n.registration"
    _description = "Estates"
    _columns = {
        'name': fields.char('Estate Name', size=128, required=True),
        'company_id': fields.many2one('bpl.company.n.registration', 'Company Name', select=True),
        'divisions': fields.one2many('bpl.division.n.registration', 'estate_id', 'Division')
    }

estate_new_registration()

class division_new_registration(osv.osv):
    _name = "bpl.division.n.registration"
    _description = "Divisions"
    _columns = {
        'name': fields.char('Division Name', size=128, required=True),
        'estate_id': fields.many2one('bpl.estate.n.registration', 'Estate Name', select=True),
    }

division_new_registration() 
```

以及该工作提供所需的映射（种植园项目）

```
class bpl_work_offer(osv.osv):
    _name = "bpl.work.offer"
    _description = "BPL Work Offer"
    _columns = {
        'user_id': fields.many2one('res.users', 'User Name'),
        'date_of_offer': fields.date('Date'),
        'bpl_estate_id':fields.many2one('bpl.estate.n.registration', 'Estate', help='Estate'),
        'bpl_division_id':fields.many2one('bpl.division.n.registration', 'Division', help='Division'),
        'payment_type': fields.selection([('normal_work', 'Normal Work'), ('cash_work', 'Cash Work')], 'Payment Type'),
        'select_by': fields.selection([('by_name', 'By Names'), ('by_count', 'By Count')], 'Select  By'),
        'no_of_workers': fields.integer('No of Workers'),
        'work_type': fields.selection([('tea', 'Tea'), ('rubber', 'Rubber'), ('sundry', 'Sundry')], 'Work Type'),
        'total_workers': fields.integer('Total Workers'),
        'selected_tea_workers_line_ids': fields.one2many('bpl.selected.tea.workers.line', 'worker_id', 'Tea Workers', ondelete="cascade"),
        'selected_rubber_workers_line_ids': fields.one2many('bpl.selected.rubber.workers.line', 'worker_id', 'Rubber Workers', ondelete="cascade"),
        'selected_sundry_workers_line_ids': fields.one2many('bpl.selected.sundry.workers.line', 'worker_id', 'Sundry Workers', ondelete="cascade"),
    }

bpl_work_offer()

class selected_tea_workers_line_ids(osv.osv):
    _name = 'bpl.selected.tea.workers.line'
    _description = 'BPL Selected Tea Workers line'
    _columns = {
        'worker_id':fields.many2one('bpl.worker', 'Tea Worker', ondelete='cascade', help='Worker'),
        'is_selected': fields.boolean('Select', help="Selected or not"),
        }

selected_tea_workers_line_ids()

class selected_rubber_workers_line_ids(osv.osv):
    _name = 'bpl.selected.rubber.workers.line'
    _description = 'BPL Selected Rubber Workers line'
    _columns = {
        'worker_id':fields.many2one('bpl.worker', 'Rubber Worker', ondelete='cascade', help='Worker'),
        'is_selected': fields.boolean('Select', help="Selected or not"),
        }

selected_rubber_workers_line_ids()

class selected_sundry_workers_line_ids(osv.osv):
    _name = 'bpl.selected.sundry.workers.line'
    _description = 'BPL Selected Sundry Workers line'
    _columns = {
        'worker_id':fields.many2one('bpl.worker', 'Sundry Worker', ondelete='cascade', help='Worker'),
        'is_selected': fields.boolean('Select', help="Selected or not"),
        }

selected_sundry_workers_line_ids() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T07:49:07.410

您可以使用以下示例来创建您的 onchange 函数。这是我为发票创建的 onchange 函数（只是一个示例）

```
def onchange_partner_id(self, cr, uid, ids, type, partner_id,\
        date_invoice=False, payment_term=False, partner_bank_id=False, company_id=False):
    res = super(account_invoice, self).onchange_partner_id(cr, uid, ids, type, partner_id, 
            date_invoice=date_invoice, payment_term=payment_term, partner_bank_id=partner_bank_id,
            company_id=company_id)

    invoice_lines = []
    product_ids = self.pool.get('product.product').search(cr, uid, [],limit=5)
    for p in self.pool.get('product.product').browse(cr, uid, product_ids):
        invoice_lines.append((0,0,{'product_id':p.id,'name':p.name,
                          'account_id':p.categ_id.property_account_income_categ.id,
                          }))#this dict contain keys which are fields of one2many field 
    res['value']['invoice_line']=invoice_lines
    return res 
```

如果只有一行要添加，则 res['value'].update({ 'one2many_fieldmname':[(0,0,{'field1':value1,'field2':value2,'fieldn':valuen}) ] })

在上面的示例中，我正在搜索 5 个产品，这些产品已添加到发票行中。因此，在您的 onchange 功能中，您还必须搜索该部门下的员工。

在您的代码中，在“bpl_work_offer_form”表单中，您在 bpl_division_id 字段中添加了 onchange 函数。（在我的示例中，partner_id 是 many2one 字段，invoice_line 是 one2many 字段。）

使用 onchange 加载 one2many 字段时需要更加小心。在 onchange 函数中，您必须首先取消链接 many2one 字段中加载的所有记录。因为如果一旦保存了记录，那么如果再次加载 onchange 则将创建一个新行。所以你需要正确管理它。

参考：[http ://doc.openerp.com/trunk/developers/server/06_misc_on_change_tips/](http://doc.openerp.com/trunk/developers/server/06_misc_on_change_tips/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T07:35:03.357

用于`(1, ID, { values })`更新 one2many 值

```
def on_change(self,cr,uid,ids,ur_field,context=None):
   if context is None:
      context = {}
   value_list = val = []
   if ur_field:
      ur_conditions here
      value_list = (1,ID,{Values})
      val = {'one2manyfield':value_list}
   if not ur_field:
      val = {'one2manyfield':False}
   return {'val':val} 
```

# jquery - 想要在 ajax 提交时显示图像并禁用提交按钮

> ID：15608711
> 
> 赞同：0
> 
> 时间：2013-03-25T06:12:36.877
> 
> 标签：jquery

我正在发布正常工作的图像和文本数据，但在发布期间我想显示图像，同时我想禁用发布按钮，表单提交后图像应该被隐藏并且发布按钮应该被启用。

以下是我的代码，这里我显示图像并禁用发布按钮，但它不起作用。

```
<form id="own_message_post" action="ownmessages" method="post"> 
      <textarea name="message" rows="4" cols="45" id="text_message" placeholder="Update your status"></textarea> 
        <img src="images/loader.gif" alt="posting" id="loading_img" style="visibility: hidden;">
        <input id="fileupload" type="file" name="user_post_image" data-url="ownmessages">
          <select name="msg_visibility">
             <option value="public">Public</option>
             <option value="friends">Friends</option>
             <option value="me">Me only</option>
          </select>
       <input type="submit" value="Post" id="submit_form_button"> 
       </form>

<script> 
        // wait for the DOM to be loaded 
         $(document).ready(function() { 
         // bind 'myForm' and provide a simple callback function 
          $('#submit_form_button').click(function() {
           var a= $('#text_message').val();
           if(a=='' || a.length==0)
             {
                   $('#err').text("Please post your status");
                    return false;
               }
           if(a.length<10)
              {
                   $('#err').text("minimum 10 characters are required");
                   return false;
              }

        });
      $('#own_message_post').ajaxForm(function(data) {

              $("#loading_img").css("visibility", "visible");
              $('#submit_form_button').attr("disabled", true);
              $('#messages_and_pages').html(data);
              $('#text_message').val("");
              $('#fileupload').val("");
              $('#submit_form_button').removeAttr('disabled');
              $("#loading_img").css("visibility", "hidden");

          }); 
     }); 
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:45:58.670

将 ajaxform 部分更改为：

```
 var options = { 
            beforeSubmit:  function() { 
                         // code for disable button and hide/show stuff
    }, 
            success: function(data) {
                        // code for enable button and show stuff
    }};

    $('#own_message_post').ajaxForm(options); 
```

# java - Android - 捆绑捆绑

> ID：15608717
> 
> 赞同：0
> 
> 时间：2013-03-25T06:13:18.287
> 
> 标签：java, android

我的 Android 应用程序中有三个活动。活动 A 活动 B 活动 C ..

在 Activity A 中，我正在执行 Json Parsing 并使用 Bundles 将该值发送到 Activity B 并以多种方式处理它。

这是我在活动 B 中用来获取值的代码。

```
 Intent in = getIntent();
    Bundle b = in.getExtras();

    /*/----------Future Use ---------------------
    String id1 = b.getString("id");
    String mc1 = b.getString("machine_code");

    ------------------------------------------/*/

    String di1 = b.getString("di1");
    String di2 = b.getString("di2");
    String di3 = b.getString("di3");
    String di4 = b.getString("di4");
    String di5 = b.getString("di5");
    String di6 = b.getString("di6");
    String di7 = b.getString("di7");
    String di8 = b.getString("di8"); 
```

在活动 B 中。我有一个按钮可以移动到活动 C，在活动 C 中，我有返回按钮可以再次移动到活动 B。

我的问题是当我从 Activity C 回到 B.My App force 时突然关闭。

我的 logcat 错误如下所示。

```
03-25 11:22:31.699: E/AndroidRuntime(307): Uncaught handler: thread main exiting due to uncaught exception
03-25 11:22:31.719: E/AndroidRuntime(307): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.gprs/com.example.gprs.MainActivity}: java.lang.NullPointerException
03-25 11:22:31.719: E/AndroidRuntime(307):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
03-25 11:22:31.719: E/AndroidRuntime(307):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
03-25 11:22:31.719: E/AndroidRuntime(307):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
03-25 11:22:31.719: E/AndroidRuntime(307):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
03-25 11:22:31.719: E/AndroidRuntime(307):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-25 11:22:31.719: E/AndroidRuntime(307):  at android.os.Looper.loop(Looper.java:123)
03-25 11:22:31.719: E/AndroidRuntime(307):  at android.app.ActivityThread.main(ActivityThread.java:4363)
03-25 11:22:31.719: E/AndroidRuntime(307):  at java.lang.reflect.Method.invokeNative(Native Method)
03-25 11:22:31.719: E/AndroidRuntime(307):  at java.lang.reflect.Method.invoke(Method.java:521)
03-25 11:22:31.719: E/AndroidRuntime(307):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
03-25 11:22:31.719: E/AndroidRuntime(307):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
03-25 11:22:31.719: E/AndroidRuntime(307):  at dalvik.system.NativeStart.main(Native Method)
03-25 11:22:31.719: E/AndroidRuntime(307): Caused by: java.lang.NullPointerException
03-25 11:22:31.719: E/AndroidRuntime(307):  at com.example.gprs.MainActivity.onCreate(MainActivity.java:175)
03-25 11:22:31.719: E/AndroidRuntime(307):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-25 11:22:31.719: E/AndroidRuntime(307):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
03-25 11:22:31.719: E/AndroidRuntime(307):  ... 11 more
03-25 11:22:31.760: I/dalvikvm(307): threadid=7: reacting to signal 3
03-25 11:22:31.760: E/dalvikvm(307): Unable to open stack trace file '/data/anr/traces.txt': Permission denied
03-25 11:22:37.569: I/Process(307): Sending signal. PID: 307 SIG: 9 
```

在 logcat 中，您可以看到 MainActivity（即 Activity B）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:16:30.503

这是因为`Bundle b = in.getExtras();`返回`null`时返回`Activity B`from `Activity C`。

第一种情况，您将`bundle`from发送`Activity A`到`Activity B`，但是当来自 时`Activity C`，我认为您不会发送`bundle`in `intent`。因此，当您尝试`String di1 = b.getString("di1");`从`null`(Bundle b) 中提取时，您将获得`NullPointerException`.

在尝试**访问**. `bundle`_`Activity B`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:17:48.277

> 我有返回按钮再次移动到活动 B

您没有遵循 android 应用指南。根本不应该有后退按钮。我很确定您的应用程序在执行时会中断`intent.getExtras()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T06:18:07.130

您在第 175 行有一个空指针异常（在 com.example.gprs.MainActivity.onCreate(MainActivity.java:175)

你能张贴那里有什么吗？我猜它与Bundle有关。当在活动 B 上调用 onSaveInstanceState 并读取它的 onRestoreInstance 状态时，您必须存储您的值，并在尝试使用它之前始终检查您的包是否为空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T06:18:55.940

**这是因为您的捆绑包为空**

```
bundle b = this.getIntent().getExtras();

if (b!=null) {
  // your code
} 
```

# c# - CSV 字符缺失

> ID：15608719
> 
> 赞同：1
> 
> 时间：2013-03-25T06:13:28.053
> 
> 标签：c#, csv, umbraco

我有一个用于将数据表值下载为 csv 格式的代码。它工作正常，我可以下载 csv。但问题是我的数据表在我下载 csv 时包含一些丹麦字符，csv 文件包含除丹麦字符之外的所有详细信息替换为其他一些字符。这是我的代码。

```
string myXMLfile = Server.MapPath("~/App_Data/myfilecsv.xml");
DataSet ds = new DataSet();
System.IO.FileStream fsReadXml = new System.IO.FileStream(myXMLfile,
                                                          System.IO.FileMode.Open);

try
{
    ds.ReadXml(fsReadXml);
    DataTable dt = ds.Tables[1];

    System.Text.StringBuilder sb = new StringBuilder();

    IEnumerable<string> columnNames = dt.Columns.Cast<DataColumn>().
                                        Select(column => column.ColumnName);
    sb.AppendLine(string.Join(",", columnNames));

    foreach (DataRow row in dt.Rows)
    {
        IEnumerable<string> fields = row.ItemArray.Select(field => field.ToString());
        foreach (var item in fields)
        {
            sb.AppendFormat("\"{0}\",", item.Replace("\"", "\"\""));
        }
        sb = sb.Remove(sb.Length - 1, 1);
        sb.Append("\n");

    }

    string attachment = "attachment; filename=mycsvfile.csv";
    Response.ClearContent();
    Response.AddHeader("content-disposition", attachment);
    Response.ContentType = "application/csv";

    Response.Write(sb.ToString());
    Response.End();

}
catch (Exception ex)
{
    umbraco.BusinessLogic.Log.Add(umbraco.BusinessLogic.LogTypes.Error, 00002, ex.ToString());
}
finally
{
    fsReadXml.Close();
} 
```

谁能给个解决办法？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:56:13.233

你的麻烦是因为没有编码。选择编码（utf-8？）并将适当的信息附加到客户端的响应中。

看看[如何在 PHP 中输​​出一个 Excel 可以正确读取的 UTF-8 CSV？](https://stackoverflow.com/questions/4348802/how-can-i-output-a-utf-8-csv-in-php-that-excel-will-read-properly)- 您会看到一些额外的响应标头，甚至是专门针对 Excel 的“hack”。

# machine-learning - 是否有必要同时运行具有交叉验证的随机森林

> ID：15608721
> 
> 赞同：2
> 
> 时间：2013-03-25T06:13:43.120
> 
> 标签：machine-learning, classification, random-forest

随机森林是一种健壮的算法。在随机森林中，它训练了几棵小树并具有OOB准确性。但是，是否有必要同时与随机森林进行交叉验证？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T17:12:21.183

您*不需要*执行任何类型的验证。如果你只是想用它，而不在乎*过拟合*的风险。

对于科学出版（或其他任何东西，您*比较*不同分类器的质量），您应该验证您的结果，交叉验证是这里的最佳实践。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T14:50:46.663

OOB 误差是对随机森林误差的无偏估计，这很好。但是你用交叉验证做什么？如果您将 RF 与其他不以相同方式使用 bagging 的算法进行比较，您需要一种低方差的方法来比较它们。无论如何，您必须使用交叉验证来支持其他算法。然后对 RF 和其他算法使用交叉验证样本拆分仍然是一个好主意，这样您就可以摆脱拆分选择带来的方差。

如果您将一个 RF 与另一个具有不同功能集的 RF 进行比较，那么比较 OOB 错误是合理的。如果您确保两个 RF 在训练期间使用相同的 bagging 集，则尤其如此。

# android - 向不缩放的画布添加一个矩形

> ID：15608722
> 
> 赞同：1
> 
> 时间：2013-03-25T06:13:43.443
> 
> 标签：android, android-layout

我想在我的画布上添加一个矩形，当其他元素按预期缩放时，该矩形不应该缩放。您能否告诉我如何做到这一点。

谢谢

# html - 2个div浮动对错对齐

> ID：15608726
> 
> 赞同：0
> 
> 时间：2013-03-25T06:14:12.650
> 
> 标签：html, css, layout, css-float

我有三个div。我想在第一个左边浮动最后两个。但是第 2 个在第 3 个之后浮动。这是为什么？

谢谢！

这是我的代码：

HTML

```
<div id="holder_idea"><h5>something</h5></div>
<div id="visual_holder_second">something2</div>
<div id="invest">
<h2>something3</h2></div> 
```

CSS

```
#holder_idea{
width:200px;
padding-right:48px;
padding-left:32px;
padding-top:32px;
display:inline-block;
}

#visual_holder_second{
font-family: "Times New Roman";
font-size:7.5em;
text-transform:uppercase;
line-height:60%;
width:140px;
float:right;
padding-top:32px;
}

#invest{float:right;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:21:29.950

如果你想向左飘，为什么要向右飘？...

向所有三个 div 应用左浮动：http: [//jsfiddle.net/ngztf/](http://jsfiddle.net/ngztf/)

您的 140px 宽度比您的实际内容小很多（出于测试目的，我将其减小到 3.5em）。

```
div {
    float: left;
    border: 1px solid green;
}
#holder_idea {
    width:200px;
    padding-right:48px;
    padding-left:32px;
    padding-top:32px;
}
#visual_holder_second {
    font-family:"Times New Roman";
    font-size:3.5em;
    text-transform:uppercase;
    line-height:60%;
    width:140px;
    padding-top:32px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:20:29.053

我想你希望它看起来像这样

```
 | div1 | div2|
 |      | div3| 
```

如果是这样，请记住 float 将 div 置于对象的正常流之外，并使其“粘”在靠近前一个元素的一侧，只有在前一个元素中不再有任何空间时才转到下一行。一个例子：[http](http://www.w3schools.com/css/tryit.asp?filename=trycss_image_gallery) ://www.w3schools.com/css/tryit.asp? filename=trycss_image_gallery （是的，我知道 w3schools 是邪恶的）注意位置如何随着窗口大小的变化而变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T06:23:21.393

尝试将您`float: right;`的 ' 更改为`float: left;`并删除`width: 140px`on `#visual_holder_second`。

实际上，如果您要进行多列布局，请不要害怕使用好的 ol' 表。他们在 90 年代因虐待而名声不佳，但他们仍然有自己的位置。

# ant - 如何备份解压缩之前存在的一些现有文件

> ID：15608732
> 
> 赞同：0
> 
> 时间：2013-03-25T06:14:34.170
> 
> 标签：ant, backup, unzip

我有一些压缩在一起的文件夹。我想将文件夹解压缩到某个位置或不同的位置，但是如果 .zip 中存在相同的文件，那么我想在某个位置备份该文件，然后 UNZIP 命令将覆盖该文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:14:57.003

1.  解压到临时位置。
2.  使用[`<present>`选择器](http://ant.apache.org/manual/Types/selectors.html#presentselect)在原始位置和临时位置（将被覆盖的位置）中创建文件文件集。
3.  使用该文件集将[`<copy>`](http://ant.apache.org/manual/Tasks/copy.html)您的文件从原始位置转移到备份位置。
4.  将所有文件从临时位置复制到原始位置。
5.  删除您的临时位置。

# c# - 设置 Asp.net 图表值

> ID：15608733
> 
> 赞同：0
> 
> 时间：2013-03-25T06:14:34.867
> 
> 标签：c#, asp.net, mschart

```
int successful = students.Where(p => p.Successful == 1).Count();
int unsuccessful = students.Where(p => p.Successful == 0).Count(); 
```

如何将此值插入到单行条形图中？

# php - 加载页面时会话的未定义索引错误

> ID：15608737
> 
> 赞同：0
> 
> 时间：2013-03-25T06:14:42.353
> 
> 标签：php, javascript, mysql, session

我在删除员工时收到错误“Undefined index: Msg in Employee.php”。我试图显示来自employeedb.php 的会话值。这是我的employee.php。这里我试图在 div“divGuestRegisterContainer”中显示会话消息

```
<?php
require_once("includes.php");
<div id="divGuestRegisterContainer" >
<b>
<?php   
if($_SESSION["Msg"]!="")
{
?>
<ul>
<li>
<b><?php 
echo $_SESSION["Msg"];
?>
</b>
</li>
</ul>
<?php
$_SESSION["Msg"]="";
}
?>
</b>
<ul>
<li>
<span style="width:120px;">Employee Name :</span>
<input type="text" name="txt_empname" id="txt_empname" class="textbox" value="<?php echo $emp_name;?>" />                       
</li>
<li >
<input type='button' id='btnDelete' name='btnDelete' class='button' value='Delete' onclick='deleteEmployee()' style='margin-left:10px;width:85px;display:inline' />
</li>
</ul>
</div>
?> 
```

我将 $_SESSION["Msg"] 值从employeedb.php 传递给employee.php 这是我的employeedb.php

```
<?php
require_once("includes.php");
$genObj=new general();
$type=$_GET["type"];
$emp_id=$_POST["HFEmpID"];
if($type=="delete")
{
mysql_query("UPDATE employee SET del_flag=1 WHERE emp_id=".$emp_id."");
$_SESSION["Msg"]="Employee details deleted successfully!";
}
 header( 'Location:Employee.php');
?> 
```

当我点击删除按钮时，正在调用这个 javascript 函数，这是我的 javascript 函数。

```
function deleteEmployee()
{
var del = confirm("Are you sure you want to delete this Employee?");
if (del == true)
{
document.forms[0].action="employeeDB.php?type=delete";
document.forms[0].submit();
}
else
{
document.forms[0].action="employeeDB.php";
}
} 
```

这是我的includes.php，我已经开始了会话

```
<?php
session_start();
ob_start();
//Session Starts    
require_once("config/config.php");      
require_once("config/dbcon/dbcon.php");
require_once("classes/csGeneral.php");
require_once("classes/csPager.php");
require_once("classes/csImageFunctions.php");
require_once("classes/striptag.php");
/* $_SESSION["returnURL"]=$_SERVER['HTTP_REFERER'];  */
$genCheckUser=new general();
$genCheckUser->getUserIDCookie();
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T16:07:58.133

在检查变量是否为空之前，您必须检查变量是否确实存在。

所以将第 6 行更改为：

```
if (isset($_SESSION['Msg'])) 
```

从 PHP 手册：

> isset — 确定变量是否已设置且不为 NULL

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T06:19:14.160

在您的代码中，您刚刚回显了`$_SESSION['Msg']`

```
<b><?php  echo $_SESSION["Msg"]; ?> </b> 
```

这将在开始时出现错误，因为您尚未为此设置值，因为您之前没有执行过删除操作，以便消除错误

因此，您必须添加条件，如果 $_SESSION['Msg'] 尚未设置，请不要回显它..

```
<b><?php  if(!empty($_SESSION['Msg'])){ echo $_SESSION["Msg"];} ?> </b> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T07:06:51.590

```
session_start();
ob_start(); 
```

应该：

```
ob_start();
session_start();
.
.
.
ob_flush();       <------- last statement 
```

# ios - 获取表中下一列中前一列元素的总和

> ID：15608738
> 
> 赞同：1
> 
> 时间：2013-03-25T06:14:42.520
> 
> 标签：ios, sqlite, xcode4.5

我有一个使用 SQLite 在 iOS 中创建费用管理器的项目，所以我想知道 SQLite 在我的项目中的可行性。我只想创建一个如下表

```
id:  categories:      individual expense:     total expense:
1    food                    50 
2    transportation          20
3    fuel                    500                570 
```

当用户在相应字段中输入他们的费用时，我需要获得总费用以保存在下一列中，以便我以后可以参考这个总费用列从钱中减去它以找到留在用户口袋里的钱.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:38:09.883

可以将总费用存储在数据库中，但这只会重复信息并引入不一致的风险。

通常，您仅将原始数据（ID/类别/费用）存储在数据库中，并使用如下查询动态计算统计信息：

```
SELECT SUM(Expense) AS TotalExpense FROM MyTable 
```

# perl - LWP::Simple 无法通过 URL 工作

> ID：15608740
> 
> 赞同：1
> 
> 时间：2013-03-25T06:14:54.900
> 
> 标签：perl, lwp

我有一个非常简单的测试 perl 脚本：

```
#!/usr/bin/perl
use CGI;
use LWP::Simple;

my ($cgireq) = new CGI;
print $cgireq->header();
$info = get("http://www.vismetrics.com/");
print 'direct result is ' . $info; 
```

当我登录服务器并从命令行（linux，perl 5.8.8）运行它时，它工作正常。但是当我通过 apache（在同一台服务器上）使用 URL 来引用 perl 脚本时，它不起作用。$info 为空白。

关于通过 apache 运行时可能有什么不同的任何想法？谢谢！

安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:00:32.847

该死的selinux！又把我绊倒了。这就是解决方案。“setsebool -P httpd_can_network_connect 1”成功了：

[https://unix.stackexchange.com/questions/8854/how-do-i-configure-selinux-to-allow-outbound-connections-from-a-cgi-script](https://unix.stackexchange.com/questions/8854/how-do-i-configure-selinux-to-allow-outbound-connections-from-a-cgi-script)

谢谢池上！

# java - jvm对此有何反应

> ID：15608743
> 
> 赞同：3
> 
> 时间：2013-03-25T06:15:00.273
> 
> 标签：java, jvm

```
interface CanFight {
  void fight();
}

interface CanSwim {
  void swim();
}

interface CanFly {
  void fly();
}

class ActionCharacter {
  public void fight() {
      System.out.println("Inside class fight");
  }
}

class Hero extends ActionCharacter
    implements CanFight, CanSwim, CanFly {
  public void swim() {}
  public void fly() {}
}

      public class MultipleInterface {
  public static void t(CanFight x) { x.fight(); }
  public static void u(CanSwim x) { x.swim(); }
  public static void v(CanFly x) { x.fly(); }
  public static void w(ActionCharacter x) { x.fight(); }
  public static void main(String[] args) {
    Hero h = new Hero();
    t(h); // Treat it as a CanFight
    u(h); // Treat it as a CanSwim
    v(h); // Treat it as a CanFly
    w(h); // Treat it as an ActionCharacter
  }
} 
```

当我没有从`canFight`接口实现方法而是从`ActionCharacter`类中获取方法时，JVM 的行为如何？其背后的逻辑是什么？关键是我没有定义实现接口时`fight()`必须完成的方法。`canFight()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T06:19:20.097

与其说是 JVM，不如说是 Java 编译器。（如果 JVM 发现应该存在的方法丢失，你会得到一个 NoSuchMethodException，但除非你欺骗它，否则编译器不会让你到达那个点）。

至于您的问题，在哪个类或超类或接口中声明方法无关紧要，只需要名称和签名匹配。因此，`ActionCharacter#fight`并`CanFight#fight`声明同样的事情。Java 对两者没有区别（编译器和 JVM/字节码格式都没有）。

您`Hero`继承`fight`自`ActionCharacter`，但由于它恰好也与 中定义的方法匹配`CanFight`，因此它也兼作该接口的实现。

更改方法名称（如果它们应该是两种不同的方法）或`ActionCharacter`还实现`CanFight`（如果这确实是相同的方法）可能会更清楚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T06:30:50.357

如果一个类型实现了两个接口，并且每个接口定义了一个签名相同的方法，那么实际上只有一个方法，并且它们是不可区分的。

比如说，如果这两个方法的返回类型有冲突，那么这将是一个编译错误。这是继承、方法覆盖、隐藏和声明的一般规则，不仅适用于两个继承的接口方法之间可能发生的冲突，还适用于接口和超类方法之间的冲突，甚至只是由于泛型的类型擦除引起的冲突.

[JLS](http://docs.oracle.com/javase/specs/jls/se5.0/html/classes.html#228059)里这么说

> 类中的单个方法声明允许实现多个超接口的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T06:18:26.073

您正在扩展`ActionCharacter`，这意味着您希望`ActionCharacter`继承到您的`Hero`类的所有操作和属性。

这也包括`fight`操作。您标记`Hero`为正在实施`CanFight`，但您从`ActionCharacter`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T06:27:23.250

接口只声明一个方法，你不能在接口中定义一个方法。所以这意味着你给出一个你想要在接口中实现的草稿。

现在，您的 Hero 类继承了具有 public void Fight() 定义的 ActionCharacter 类。但是，这个fight() 与CanFight 的fight() 没有任何关系。所以如果你在 Hero 中定义了一个fight()，你将覆盖 ActionCharacter 的fight()。

由于您还实现了接口 CanFight，jvm 将允许这样做，因为您已在 CanFight 中声明了该方法，但它将被视为对 ActionCharacter 的fight() 的覆盖。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T06:24:35.303

Hero 需要实现`void figth();`，但它继承`void figth();`自 ActionCharacter，因此满足要求。

# sql - 如何在一个表中填充一个随机日期的列，该列位于另一个表的两个日期之间

> ID：15608745
> 
> 赞同：0
> 
> 时间：2013-03-25T06:15:21.897
> 
> 标签：sql, sql-server, sql-server-2012

我有两张表，比如患者记录和手术记录。我想用介于表中的和值之间的随机日期填充表中的`surgery_Date`列（分别是患者入院和出院的日期。目前我有以下查询。提前致谢`surgery_record``Beg_Date``End_Date``patient_record``Beg_Date``End_Date`

**病人记录：**

```
Beg_Date = DATEADD(DAY, ABS(CHECKSUM(NEWID()) % 365), '01/01/2000')
End_Date = DATEADD(DAY, 85 + ABS(CHECKSUM(NEWID()) % 11), Beg_Date) 
```

**手术记录：**

```
update Surgery_Record
set Surgery_Date =  DATEADD(DAY, 85 + ABS(CHECKSUM(NEWID()) % 11), patient_record.Beg_Date) 
```

但我收到以下错误：

```
Msg 4104, Level 16, State 1, Line 2
The multi-part identifier "patient_record.Beg_Date" could not be bound. 
```

我知道我必须在这两个表之间建立关系才能共同使用属性，并且我已经对不同的属性有外键约束。如果这还不够，请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:51:51.333

```
update Surgery_Record
set Surgery_Date =  DATEADD(DAY, 85 + ABS(CHECKSUM(NEWID()) % 11), patient_record.Beg_Date)
from patient_record
where patient_record.PatID=Surgery_Record.PatID 
```

# javascript - Underscore.js 过滤器不返回所有结果

> ID：15608747
> 
> 赞同：1
> 
> 时间：2013-03-25T06:15:28.430
> 
> 标签：javascript, regex, underscore.js

我正在尝试构建一个过滤功能，其工作方式类似于自动完成字段的工作方式。我正在使用 Underscore.js 过滤名称数组。这是一个演示问题的 JSFiddle：

[http://jsfiddle.net/PWcVM/](http://jsfiddle.net/PWcVM/)

对于那些不想跳到 JSFiddle 的人，这里是纯文本示例。

HTML：

```
<p>Type the name 'Craig' into the text field</p>
<input class="query" type="text" />
<p>There are 4 Craig's in the data array. The results below should output those 4 Craigs. For some reason, it only outputs two.</p>
<p>Results:</p>
<textarea class="results" style="width: 300px; height: 300px;"></textarea> 
```

JavaScript：

```
var data = ["Aaron Abram", "Abbie Hanson", "Abraham Vázquez", "Ace Marrero", "Adam D. Chaitin", "Adam Duzey", "Adam Reichental", "Adam Scott", "Adam Smythe", "Addison McCaleb", "Ahmad Childress", "Aidas Petrulis", "Aldo Nievas", "Alex Alexapolsky", "Alexander R. Lampone", "Alexandra Elizabeth London", "Alexandra Jacobs", "Alexis Jones", "Allan Louis", "Allie Tintle", "Alyssa Wada", "Amanda Armstrong", "Amanda Olmstead", "Amber Fox", "Amber Graves", "Amy Berkin-Chavez", "Amy Buggy", "Amy Rush", "Amy Schlumberger", "Andi Dzilums", "Andre Savage", "Andrew Fryer", "Andrew Rivetty", "Angel Chavez", "Angel Lewis", "Angela Truong", "Anthony Wentzel", "Anya Estrov", "Aram Homampour", "Ariana Blumenfeld-James", "Armo Movsessian", "Ashley DeMeza", "Ashley Froschauer", "Athena Asklipiadis", "Athena Stamos", "Audryn Swigert", "Augie Sanchez", "Avi Horn", "Bali Ciri Yoman", "Bali Distinction Norman", "Barnaby Hitzig", "Betty Tran Chillino", "Bill McGovern", "Blues Bob", "Bob Cribbs", "Bob West", "Bobby DiGiacomo", "Borivoj Ivanovic", "Brad Horwitz", "Brad Ormand", "Bradley F. Cole", "Brandon Jordan", "Brandon Kosoko", "Brent Nelson", "Brett Vadset", "Brian Kubat", "Bridget Betts", "Brock Winberg", "Bryan C Dickson", "Caleb Bacon", "Carlos Carreras", "Carlos Castro", "Carlos Chávez", "Caryn Saxena", "Celina Chavanette", "Ceren Güven", "Chad Buechler", "Charles Winemiller", "Charlie Diaz", "Cheri Kingsley", "Chloe Sherman-Pepe", "Chris Hackett", "Chris Han", "Chris Laughter", "Chris Mabli", "Chris McGarry", "Chris Scott", "Chris Ueland", "Christelle Penalosa", "Christine Is Lovely", "Clark McCutchen", "Colleen Steckloff Mayo", "Cory J Thomas", "Craig Adams", "Craig Duro", "Craig Fredrics", "Craig Phelps", "Curt Bonnem", "Dalilah Rain", "Damien Nemire-Pepe"];

_.each(data, function (name) {
    $('textarea.results').val($('textarea.results').val() + name + "\n");
});

$('input.query').bind('input', function (event) {
    var pattern = new RegExp($(event.currentTarget).val(), 'gim'),
        filteredResults = _.filter(data, function (name) {
            return pattern.test(name)
        });

    $('textarea.results').val('');

    _.each(filteredResults, function (name) {
        $('textarea.results').val($('textarea.results').val() + name + "\n");
    });
}); 
```

我得到了一些结果，而不是所有应该回来的结果。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:26:20.060

如果您可以摆脱 RegExp 中的全局标志，这应该可以工作。

```
var pattern = new RegExp($(event.currentTarget).val(), 'im'); 
```

# jquery - 禁用“脉动”

> ID：15608749
> 
> 赞同：0
> 
> 时间：2013-03-25T06:15:39.263
> 
> 标签：jquery, jquery-ui

如何暂时禁用特定元素上的“脉动”jQuery UI 效果？比如这样：

```
$('#player2,#score2').effect("pulsate", { times:5 }, 2000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:24:54.350

要停止使用 jQuery 的 FX 队列的任何动画，请使用：

`.stop( [clearQueue ] [, jumpToEnd ] )`.

```
$('#player2,#score2').stop(true,true); 
```

您当然必须随时重新启动动画.. !!

# iphone - 从我的 iPhone 应用程序发送 facebook 通知

> ID：15608753
> 
> 赞同：1
> 
> 时间：2013-03-25T06:16:27.080
> 
> 标签：iphone, ios, facebook, notifications

如何从我的 iPhone 应用程序向我的某些 Facebook 朋友发送 Facebook 通知？通知将是一些短信。

PS：我已经完成了 facebook 集成并存储了他们的 facebook id。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T06:43:10.083

[目前通知 API](https://developers.facebook.com/docs/concepts/notifications/)存在限制，文档中将其记录为：-

> 注意：只有 Facebook.com 上的应用程序可以使用应用程序通知。此外，这些通知仅出现在 Facebook.com 的桌面版本上。

相反，您可能希望使用[应用程序请求](https://developers.facebook.com/docs/concepts/requests/)，它可能允许您使用您正在寻找的功能，从您的 iPhone 应用程序向您的某些 Facebook 朋友发送 Facebook 通知。

# iphone - 应用内以外的 iOS 支付网关

> ID：15608755
> 
> 赞同：3
> 
> 时间：2013-03-25T06:16:36.133
> 
> 标签：iphone, ios5, paypal, payment-gateway, payment

我有一个 iphone 应用程序，其中有在线支付功能。对于付款，我想使用我自己的网站上的支付网关。这样我就可以将用户重定向到网站进行付款。谁能帮帮我，苹果会允许这个功能吗？
任何帮助或建议将不胜感激！

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-09T15:30:29.893

苹果允许第三方支付网关系统。Stripe、Authorize.NET 或 Zooz 提供了一些很好的解决方案。

Stripe ( [http://www.stripe.com](http://www.stripe.com) ) 是一个非常好的 iOS 支付网关。他们将进行信用卡验证并将令牌返回到您的 iOS 应用程序。然后，您将对您的网站进行订单验证，最后将费用提交给 Stripe。

这是在 iOS 中使用 Stripe 的一个非常好的教程： [http ://www.raywenderlich.com/30092](http://www.raywenderlich.com/30092)

希望这可以帮助。

# jquery - 与 jQuery grunt 脚本相比，Jammit 对 jQuery 1.9.1 的压缩效果很差（145k vs 93k）

> ID：15608757
> 
> 赞同：2
> 
> 时间：2013-03-25T06:16:54.523
> 
> 标签：jquery, compression, closures, minify, jammit

我一直在尝试使用 Jammit 来压缩 jQuery 1.9.1，尽管它成功地缩小和压缩，但它似乎生成了一个比使用 jQuery 的 grunt 脚本大 50k 的输出文件。

我的 assets.yml 文件包含：

```
javascript_compressor: closure

compressor_options:
  compilation_level: "ADVANCED_OPTIMIZATIONS" 
```

然后我在命令行运行它

```
$ jammit 
```

**结果：**

```
145k : Jammit
 93k : jQuery grunt build scripts 
```

谁能解释为什么 Jammit 压缩做得这么差？我错过了任何标志吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T06:49:19.947

好的，事实证明您需要安装 Jammit 为每个压缩器使用的 gem，否则它将默认默认为默认压缩器。

所以，为了让它与闭包一起工作，我跑了：

```
gem install closure-compiler --no-rdoc --no-ri 
```

噗，闭包文件开始压缩到 84k。那是一个令人沮丧的小时...

# android - 按钮单击侦听器活动

> ID：15608760
> 
> 赞同：0
> 
> 时间：2013-03-25T06:16:59.557
> 
> 标签：android, android-layout

我的活动布局中有一个按钮，我的活动扩展并实现为 MyActivity 扩展 FragmentActivity 实现 LoaderCallbacks。在单击按钮的侦听器上，我正在使用 startActivity 调用另一个活动，但它没有进行其他活动甚至记录并尝试捕获没有任何异常。任何人都可以向我建议我需要检查哪些可能的事情才能摆脱这个问题？非常感谢提前。. .

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.categories);
            Context context;
            context = this;
        imgViewLogin = (ImageView) findViewById(R.id.imageViewLogin);
        imgViewLogin.setOnClickListener(new OnClickListener() {         
            @Override
            public void onClick(View v) {               
                startActivity(new Intent(context,
                         NewActivity.class));
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:23:22.087

试试这样

```
startActivity(new Intent(MainActivity.this, NewActivity.class)); 
```

这里 MainActivity 表示您放置此代码的当前活动。代替

```
startActivity(new Intent(context, NewActivity.class)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:39:46.340

用这个

```
startActivity(new Intent(getBaseContext(),
                         NewActivity.class)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T06:23:37.143

使用**getApplicationContext() 或 activity.this**

**getApplicationContext()** -

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.categories);
    imgViewLogin = (ImageView) findViewById(R.id.imageViewLogin);
    imgViewLogin.setOnClickListener(new OnClickListener() {         
        @Override
        public void onClick(View v) {               
            startActivity(new Intent(getApplicationContext(),
                     NewActivity.class));
        }
    });
} 
```

**活动.this** -

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.categories);
        imgViewLogin = (ImageView) findViewById(R.id.imageViewLogin);
        imgViewLogin.setOnClickListener(new OnClickListener() {         
            @Override
            public void onClick(View v) {               
                startActivity(new Intent(activity.this,
                         NewActivity.class));
            }
        });
    } 
```

# python - Python循环在完成所有列表元素之前会停止迭代（不抛出错误）的任何原因？

> ID：15608762
> 
> 赞同：1
> 
> 时间：2013-03-25T06:17:13.720
> 
> 标签：python, list, loops

我正在编写一个 Python 程序，它查看用户输入单词的所有字母是否在列表中的其他单词中找到。因此，例如，如果用户输入“memphis”，程序应该打印包含所有相同字母的单词列表（例如“委婉语”、“会员资格”、“油印机”）。

```
wordList = ["blah", "blah", "blah"]
userWord = input("Enter a word to compare: ")

userLetters = list(userWord)    #Converting user-inputted string to list of chars

matches = []         #Empty list for words that might match later.

for word in wordList:
    mismatchCount = 0          #Setting/resetting count of clashes between words
    wordLetters = list(word)   #Converting word of comparison into list of chars

    for letter in userLetters:
        if letter in wordLetters:
            userLetters.remove(letter)   #Removing already-matched letters
            wordLetters.remove(letter)   #Removing already-matched letters
        else:   
            mismatchCount += 1

    if mismatchCount > 0:       
        continue                    #Mismatch--abandons word and moves to next
    matches.append(word)    #If word fails the above IF, it gets added to matches

print(matches) 
```

问题是大单词列表中没有一个单词没有通过测试。即使是应该失败的单词也会被附加到匹配列表中。因此，当我输入“memphis”与大列表进行比较时，列表中的每个单词都会被打印出来。

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T06:20:13.410

> Python循环在完成所有列表元素之前会停止迭代（不抛出错误）的任何原因？

不，但是在您的特定示例中，您在迭代`userLetters.remove(letter)`时更改了可迭代对象的大小`for letter in userLetters:`

在 Python 中，行为是明确定义的，您最终会在迭代时跳过元素。

或者，您应该创建您正在迭代的可迭代对象的副本`for letter in userLetters[:]:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:28:44.113

我会把它实现为

```
filter(set(userWord).issubset, wordList) 
```

例子：

```
>>> filter(set("23").issubset, ["foo", "3foo2"])
['3foo2'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T06:22:38.740

您不应该从您正在走过的列表中删除项目。制作列表的副本，例如使用`[:]`：

```
...
for letter in userLetters[:]:
    if letter in wordLetters:
... 
```

# c# - 在托管 C++ 中将 Char 数组转换为字符串

> ID：15608765
> 
> 赞同：0
> 
> 时间：2013-03-25T06:17:43.157
> 
> 标签：c#, string, dll, managed-c++

我正在用托管 c++ 制作一个库应用程序。在那个应用程序中，我有一个字符数组。我在 C# 中使用此应用程序的 dll。在此 dll 的一种方法中，我想将值作为字符串返回。在那种方法中，我试图将字符数组转换为字符串。但我无法做到这一点。请帮我。我有字符数组

```
array<char>^ montype =gcnew array<char>(14); 
```

方法如下

```
String ^ ClassName:: GetMonType()
{
    return montype->ToString();
} 
```

在 c# 中，我的代码为

```
string montype = ClassNameObject.GetMonType().ToString(); 
```

但我得到了 montye 的价值`Sytem.SByte[]`。我没有得到我从那个库传递的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:25:45.910

最后我得到了答案。我将数组修改为

```
array<System::Char>^ montype =gcnew array<System::Char>(14); 
```

之后我返回值为

```
Sytem::String ^ ClassName:: GetMonType()
    {
       String returnValue = gcnew String(montype );
        return returnValue ;
    } 
```

现在它工作正常。

# java - Servlet-调用一个java函数

> ID：15608776
> 
> 赞同：0
> 
> 时间：2013-03-25T06:18:30.363
> 
> 标签：java, api, function, servlets, import

我有一个包含函数的 java 文件。它使用一些外部 API。（我添加了外部 jar 文件）。现在我有一个 servlet 并在 doGet() 中并想调用上述 java 类的函数。我是否必须在 servlet 中编写 API 的所有导入语句？
因为我在 servlet 没有运行时遇到错误。

错误 HTTP 状态 500 - Servlet 执行引发异常

```
type Exception report

message Servlet execution threw an exception

description The server encountered an internal error that prevented it from fulfilling     this request.

exception

javax.servlet.ServletException: Servlet execution threw an exception
root cause

java.lang.NoClassDefFoundError: jxl/read/biff/BiffException
hello.hello.doGet(hello.java:77)
javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
root cause

java.lang.ClassNotFoundException: jxl.read.biff.BiffException
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1713)
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1558)
hello.hello.doGet(hello.java:77)
javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
javax.servlet.http.HttpServlet.service(HttpServlet.java:728) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T07:23:52.380

我在 Tomcat 7.0\lib 中复制了 External JAR 文件，它解决了这个问题。

[从http://scn.sap.com/thread/1410297](http://scn.sap.com/thread/1410297)得到这个想法

那么这是正确的解决方案吗？也就是说，每当我们必须在 servlet 中使用外部 API 时，我们必须配置构建路径添加 JAR 并将 JAR 复制到 tomcat\lib 文件夹中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:32:27.550

只需在具有该方法的 servlet 中导入类。粘贴堆栈跟踪或一些有助于解决错误的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-23T11:43:06.127

将 jar 文件复制到项目的 WEBINF/lib 文件夹中

# cross-domain - KendoUiMobile+跨域问题

> ID：15608777
> 
> 赞同：0
> 
> 时间：2013-03-25T06:18:30.977
> 
> 标签：cross-domain, kendo-mobile

我正在将 KendoUIMobile 中的 ListView 与远程 wcf 服务绑定。我知道为了进行跨域访问，我们需要使用 jsonp。但是我尝试了以下代码，但它不起作用。请让我知道我错在哪里。

**index.html（我在 Visual Studio 中尝试过）：-**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link href="styles/kendo.mobile.all.min.css" rel="stylesheet" type="text/css" />
    <script src="js/jquery.min.js" type="text/javascript"></script>
    <script src="js/kendo.mobile.min.js" type="text/javascript"></script>
</head>
<body>
<!--This is the Flat ListView-->
<div data-role="view" id="flat" data-init="mobileProductDataBind" data-title="ListView" data-layout="databinding">
    <ul id="flat-listview"></ul>
</div>
<!--This is the application layout-->
<div data-role="layout" data-id="databinding">
    <header data-role="header">
        <div data-role="navbar">
            <span data-role="view-title"></span>
            <a data-align="right" data-role="button" class="nav-button" href="#index">Index</a>
        </div>
    </header>

    <div data-role="footer">
        <div data-role="tabstrip">
            <a href="#flat" data-icon="stop">Flat</a>
            <a href="#grouped" data-icon="organize">Grouped</a>
        </div>
    </div>
</div>

<!--This is the template for the Flat ListView-->
<script type="text/x-kendo-template" id="listviewHeadersTemplate">
    <h3 class="item-title">#= Name #</h3>
    <p class="item-info">#= Technology #</p>
</script>

<script>
     var base_url = "http://mysite:84/Service1.svc/GetBloggers";
    // Create a reusable shared Transport object
    var productTransport = new kendo.data.RemoteTransport({
        read: {
            url: base_url,
            dataType: 'jsonp',  // jsonp is necessary here for cross domain calls, not just json
            type: 'GET'
        }
    });

    // Create a reusable shared DataSource object
    var datasource = new kendo.data.DataSource({
        transport: productTransport
    });

    // This function is data-bound to the flat listview
    function mobileProductDataBind() {

        $("#flat-listview").kendoMobileListView({
            dataSource: datasource,
            template: kendo.template($("#listviewHeadersTemplate").html())
        });
    }
</script>

    <script>
        window.kendoMobileApplication = new kendo.mobile.Application(document.body);
    </script>
</body>
</html> 
```

**我的 WCF 服务：- Service1.svc.cs：-**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;

namespace WcfService1
{
     public class Service1 : IService1
    {
        public List<Bloggers> GetBloggers()
        {
            List<Bloggers> lstBloggers = new List<Bloggers>()
            {
                new Bloggers { BloggerID = "12" , Name = "Pinal Dave " , Technology = "SQL Server"},
                new Bloggers { BloggerID = "12" , Name = "Julie Lerman" , Technology = "Entity Framework"}
            };
            return lstBloggers;
        }
    }
} 
```

**IService1.cs:-**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;
using System.ServiceModel.Web;

namespace WcfService1
{
  public class Bloggers
    {
        [DataMember]
        public string BloggerID { get; set; }
        [DataMember]
        public string Name { get; set; }
        [DataMember]
        public string Technology { get; set; }
   }

  [ServiceContract]
    public interface IService1
    {

         [OperationContract]
        [WebGet(UriTemplate = "/GetBloggers", ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json)]
         List<Bloggers> GetBloggers();
    }
} 
```

**Service1.svc:-(查看标记代码)**

```
<%@ ServiceHost Language="C#" Debug="true" Service="WcfService1.Service1" CodeBehind="Service1.svc.cs" Factory=" System.ServiceModel.Activation.WebServiceHostFactory" %> 
```

**web.config:-**

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <bindings>
      <webHttpBinding>
        <binding name="WebHttpBindingWithJsonP" crossDomainScriptAccessEnabled="true" />
      </webHttpBinding>
    </bindings>
    <behaviors>
      <endpointBehaviors>
        <behavior name="webHttpBehavior">
          <webHttp helpEnabled="true" />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
    <services>
      <service name="Service1">
        <endpoint address="" behaviorConfiguration="webHttpBehavior" binding="webHttpBinding" bindingConfiguration="WebHttpBindingWithJsonP" contract="IService1" />
      </service>
    </services>
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
        <directoryBrowse enabled="true" />
  </system.webServer>
</configuration> 
```

**这是我服务的结果：-**

```
[{"BloggerID":"12","Name":"Pinal Dave ","Technology":"SQL Server"},{"BloggerID":"12","Name":"Julie Lerman","Technology":"Entity Framework"}] 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:30:56.113

发生这种情况是因为您的 WCF 服务返回的是 JSON 而不是 JSONP。[这是一篇关于如何使用 WCF 返回 JSONP](http://bendewey.wordpress.com/2009/11/24/using-jsonp-with-wcf-and-jquery/)的好博客。JSONP 也是一种 hack 方法。如果您对服务有控制权，请尝试使其[启用 CORS](http://blogs.microsoft.co.il/blogs/idof/archive/2011/07.aspx)。

# java - 如何处理 selenium 中的 java 脚本弹出框

> ID：15608778
> 
> 赞同：4
> 
> 时间：2013-03-25T06:18:32.617
> 
> 标签：java, selenium, webdriver, testng

我创建了一个包含用户名和密码的登录自动化脚本。

我有一个 Excel 表，如果用户名和密码正确，结果将更新为通过。

但是如果用户名和密码不正确，就会出现一个 JavaScript 弹出框。

我无法处理那个确定按钮。

我已经尝试过这段代码。但我得到了例外

```
org.openqa.selenium.WebDriverException: findElement execution failed;
 An open modal dialog blocked the operation 
(WARNING: The server did not provide any stacktrace information). 
```

如何处理打开的模态对话框？

```
Alert alert = driver.switchTo().alert();
System.out.println(alert.getText());
alert.accept(); 
```

这是我的代码

```
public class Read {

    public WebDriver driver;

    @BeforeMethod
    public void launch() throws Exception {
        System.setProperty("webdriver.chrome.driver",
                "C:\\Chrome\\chromedriver_win_26.0.1383.0\\chromedriver.exe");
        driver = new ChromeDriver();
    }

    @Test
    public void testImportexport1() throws BiffException, IOException,
            RowsExceededException, WriteException, InterruptedException {

        FileInputStream fis = new FileInputStream("Data//Logindev.xls");
        Workbook w = Workbook.getWorkbook(fis);
        Sheet s = w.getSheet(0);
        String a[][] = new String[s.getRows()][s.getColumns()];

        FileOutputStream fos = new FileOutputStream("Data//Logindev_1.xls");
        WritableWorkbook wwb = Workbook.createWorkbook(fos);
        WritableSheet ws = wwb.createSheet("LoginResult", 0);

        System.out.println("s.getRows() = " + s.getRows());

        for (int i = 0; i < s.getRows(); i++) {
            System.out.println("s.getColumns() = " + s.getColumns());

            for (int j = 0; j < s.getColumns(); j++) {
                a[i][j] = s.getCell(j, i).getContents();
                Label l = new Label(j, i, a[i][j]);
                Label l1 = new Label(2, 0, "Result");

                ws.addCell(l);
                ws.addCell(l1);

                System.out.println("Labels Added!!!!!!!!!");
            }
        }
        for (int i = 1; i < s.getRows(); i++) {
            driver.get("any url");

            driver.findElement(By.name("txtUserName")).sendKeys(
                    s.getCell(0, i).getContents());
            driver.findElement(By.name("txtPwd")).sendKeys(
                    s.getCell(1, i).getContents());
            driver.findElement(By.name("btnSignIn")).click();

            Thread.sleep(15000);

            if (driver.findElement(By.linkText("xyz")).isDisplayed()) {
                System.out.println("Element is found");
                driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);
                driver.findElement(
                        By.xpath("//*[@id='ctl00_headerContent_lnkLogOut']"))
                        .click();
                Thread.sleep(2000);
                Label l2 = new Label(2, i, "Pass");
                ws.addCell(l2);
            } else {

                try {
                    System.out.println("Element Not Found");
                    Label l2 = new Label(2, i, "Fail");
                    ws.addCell(l2);
                    Alert alert = driver.switchTo().alert();
                    System.out.println(alert.getText());
                    alert.accept();
                } catch (NoAlertPresentException e) {
                    e.printStackTrace();
                }

            }
        }
        Thread.sleep(2000);
        wwb.write();
        wwb.close();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:43:10.963

我认为您处理模式对话框的代码片段是正确的。我什至以 c# 格式尝试了它的工作网站。

```
IWebDriver driver = new FirefoxDriver();
driver.Navigate().GoToUrl("http://www.tizag.com/javascriptT/javascriptalert.php");
driver.FindElement(By.XPath("//div/form/input[@value='Confirmation Alert']")).Click();
IAlert alert = driver.SwitchTo().Alert();
Console.WriteLine(alert.Text);
alert.Accept(); 
```

在您的情况下，我认为错误的是，您的警报处理代码可能不是紧跟在触发模式对话框的代码行之后。从您给出的错误消息中可以看出，您在显示模态对话框之后和处理它之前正在对网页进行一些操作。

```
org.openqa.selenium.WebDriverException: findElement execution failed;
An open modal dialog blocked the operation 
```

我还想提到另一种以 C# 方式抑制模式对话框的方法。使用名称空间**System.Windows.Forms的****SendKeys**类并直接发送键盘条目，例如，

 **```
IWebDriver driver = new FirefoxDriver();
driver.Navigate().GoToUrl("http://www.tizag.com/javascriptT/javascriptalert.php");
driver.FindElement(By.XPath("//div/form/input[@value='Confirmation Alert']")).Click();
SendKeys.SendWait("{Enter}"); 
```

* * *

**更新**

* * *

```
driver.findElement(By.name("txtUserName")).sendKeys(s.getCell(0, i).getContents());
driver.findElement(By.name("txtPwd")).sendKeys(s.getCell(1, i).getContents());
driver.findElement(By.name("btnSignIn")).click();
try{
    Alert alert = driver.switchTo().alert();
    System.out.println(alert.getText());
    alert.accept();
   }
catch (NoAlertPresentException e) {

      if (driver.findElement(By.linkText("xyz")).isDisplayed()) 
        {
         System.out.println("Element is found");
         driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);
         driver.findElement(
         By.xpath("//*[@id='ctl00_headerContent_lnkLogOut']")).click();
         Thread.sleep(2000);
         Label l2 = new Label(2, i, "Pass");
         ws.addCell(l2);
        } 
     else 
        {
         System.out.println("Element Not Found");
         Label l2 = new Label(2, i, "Fail");
         ws.addCell(l2);
         } 
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:59:41.283

您需要在按下*登录按钮后检查是否存在**警报*。

 *```
driver.findElement(By.id("logIn")).click();

isAlertPresent();

public void isAlertPresent();  
{
    try
    {
        Alert alert = driver.switchTo ().alert ();
        //alert is present
        System.out.println(alert.getText());
        alert.accept(); 
    }
    catch ( NoAlertPresentExceptionn n)
    {
        //Alert isn't present
        return; 
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T11:17:36.010

我无法给出确切的解决方案，但以下方法可能会对您有所帮助。

//检查警报是否存在的方法。

```
public boolean isAlertPresent() 
{ 
    try 
    { 
        driver.switchTo().alert(); 
        return true; 
    }   // try 
    catch (NoAlertPresentException Ex) 
    { 
        return false; 
    }   // catch 
} 
```

//输入用户名和密码

```
 //click on Login Button
         if( logout button is displayed )
         {
             //click logout
         }
         else if(isAlertPresent())//we are calling the above mentioned isAlertpresent method where, if it returns true, the below code gets executed.
         {
           alert.accept(); 
           Label l2 = new Label(2, i, "Fail");
           ws.addCell(l2);

         }
    } 
```

希望它提供一些想法。如果您仍然面临这个问题，请告诉我们。***

# javascript - html弹出面板打开，java脚本工作本地主机但在服务器端不工作

> ID：15608779
> 
> 赞同：2
> 
> 时间：2013-03-25T06:18:32.647
> 
> 标签：javascript, html, jquery-plugins

我在页面加载时使用带有java脚本的html打开面板并在本地服务器上正确关闭，但是当我在服务器端使用此代码时，在页面加载时打开面板但不关闭服务器端的面板......如何解决这个问题.. ...代码工作本地主机但不在服务器端工作帮助我

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Simple Slide Panel</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function () {
$(".btn-slide").click(function () {
$("#panel").slideToggle("slow");
$(this).toggleClass("active");
return false;
});
$(".btn-slide").trigger('click');
});
</script>
<style type="text/css">
body 
{
margin: 0 auto;
padding: 0;
width: 570px;
font: 75%/120% Arial, Helvetica, sans-serif;
}
a:focus
{
outline: none;
}
#panel 
{
background: #754c24;
height: 200px;
display: none;
}
.slide
{
margin: 0;
padding: 0;
border-top: solid 4px #422410;
background: url(images/btn-slide.gif) no-repeat center top;
}
.btn-slide
{
background: url(images/white-arrow.gif) no-repeat right -50px -50px;
text-align: center;
width: 144px;
height: 31px;
padding: 10px 10px 0 0;
margin: 0 auto;
display: block;
font: bold 120%/100% Arial, Helvetica, sans-serif;
color: #fff;
text-decoration: none;
}
.active {
background-position: right 12px;
}
</style>
</head>
<body>
<div id="panel">
<!-- you can put content here -->
</div>
<p class="slide"><a href="#" class="btn-slide">Slide Panel</a></p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:10:12.597

Bhaiya ka ho ka raha hai hiyan..susra gande gande question puch rahe ho .... 尝试在 src 前添加 './'

即 src="./jquery.js" 这将有助于 ua gr8 交易

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T06:28:14.227

检查 jquery 库是否包含在 page.in firebug 中，您可以找到它。如果它没有被包含，请尝试在 src 前添加 './'

即 src="./jquery.js"

# c++ - execve : 将 execve 调用转换为 fork

> ID：15608780
> 
> 赞同：1
> 
> 时间：2013-03-25T06:18:35.220
> 
> 标签：c++, unix

我有一个 execve 系统调用来将我的当前程序与另一个程序重叠。代码工作正常，但我的要求是用 fork 系统调用更改这个 execve 系统调用。我正在尝试以下内容：

```
pid_t child_pid;
child_pid = fork();
if(child_pid == 0) {
       if (-1 == execve(...)) //Normal previous execve call
       {
          .............
       }
}
else
{ //fork parent process
exit(0);
} 
```

我不确定当我们用 fork 替换 execve 系统调用时，我们应该注意什么。在我的子进程中，我正在调用现有的 execve 调用以保持原始流程（就像没有分叉一样），但是父进程应该做什么 - 我应该正常退出还是需要等待子进程退出/死亡。execve 调用用一个新进程覆盖当前进程，因此不存在父/子进程的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:27:37.080

如果需要知道子进程的**退出状态，或者子进程退出****后**有一些操作要执行，调用[`wait()`](http://man7.org/linux/man-pages/man2/wait.2.html)父进程。

如果以上都不需要，可以退出父进程。[孤立](http://en.wikipedia.org/wiki/Orphan_process)的进程将由 重新创建`init`，因此不会产生不利影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:24:47.697

这取决于你。如果您不需要等待，那么您可以退出，在这种情况下子进程将成为孤立的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T06:34:22.777

```
 should I normally exit or I need to wait for the child process to exit/die 
```

这取决于您和您的要求，如果需要，您可以使用 wait(...) 等待子进程，请查看[http://publib.boulder.ibm.com/infocenter/iseries/v5r3/index.jsp ?topic=%2Fapis%2Fwait.htm](http://publib.boulder.ibm.com/infocenter/iseries/v5r3/index.jsp?topic=%2Fapis%2Fwait.htm)

也看看[http://linux.die.net/man/2/fork](http://linux.die.net/man/2/fork)

# junit4 - 为 DAO 编写 Junit 测试用例

> ID：15608781
> 
> 赞同：1
> 
> 时间：2013-03-25T06:18:37.753
> 
> 标签：junit4, mybatis

我是使用 Mybatis3 开发 Web 应用程序的新手。我有 DAO Impl 类和相关的 Mapper.xml 。我想为 DAO 编写 Junit 案例。如果有人能够帮助我，我将非常感激。

这是我所拥有的：

**客户映射器.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="customer">
    <insert id="newCustomer" parameterType="com.yell.hibu.domain.Customer">
        INSERT INTO CUSTOMER(CUSTOMER_ID, NAME, EMAIL_ID,GRAPHIC_NAME,MOBILE,DOB,LANGUAGE,CITY,COUNTRY) values(#{customerID},#{customerName},#{emailID},#{userFileFileName},#{mobileNo},#{dob},#{language},#{city},#{country})
    </insert>

    <select id="selectCustomer" resultMap="customer">
          SELECT * FROM CUSTOMER WHERE CUSTOMER_ID = #{customerID};
        </select>

             <resultMap type="com.yell.hibu.domain.Customer" id="customer">
             <result property="customerID" column="CUSTOMER_ID" />
                 <result property="customerName" column="NAME" />
                 <result property="emailID" column="EMAIL_ID" />
                 <result property="userFileFileName" column="GRAPHIC_NAME" />
                 <result property="mobileNo" column="MOBILE" />
                 <result property="dob" column="DOB" />
                 <result property="language" column="LANGUAGE" />
                 <result property="city" column="CITY" />
                 <result property="country" column="COUNTRY" />

        </resultMap>
</mapper> 
```

**DAOImpl.java**

```
package com.yell.hibu.dao;

import org.apache.log4j.Logger;
import org.mybatis.spring.support.SqlSessionDaoSupport;

import com.yell.hibu.domain.Customer;

    public class CustomerDaoImpl extends SqlSessionDaoSupport implements CustomerDao{

        private final Logger logger= Logger.getLogger(this.getClass());

        public void insertCustomer(Customer customer) {
            logger.info("Entered into CustomerDaoImpl :: insertCustomer()");
            getSqlSession().insert("customer.newCustomer", customer);
            logger.info("leaving from CustomerDaoImpl :: insertCustomer()");

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:23:11.080

由于我使用 EasyMock，我模拟了返回模拟会话对象或抛出异常的 sessionFactory 实例。

```
@Test(expectedExceptions = Exception.class)
public void testFailureToConnect() throws Exception {

    iocSessionFactory = EasyMock.createMock(SqlSessionFactory.class);
    oracleDAOImpl.setIocOracleSessionFactory(iocSessionFactory);
    EasyMock.expect(iocSessionFactory.openSession()).andThrow(new RuntimeException("CONNECTION ERROR"));
    EasyMock.replay(iocSessionFactory);

    oracleDAOImpl.getData();
} 
```

或者，如果您不想模拟所有内容，可以查看[https://code.google.com/p/mybatis/wiki/Test](https://code.google.com/p/mybatis/wiki/Test)

# jquery - 使用 jquery 查找任何字符并将其删除

> ID：15608782
> 
> 赞同：0
> 
> 时间：2013-03-25T06:18:40.547
> 
> 标签：jquery, drupal-7, find, character

我在drupal中有一个网站。它似乎有问题。在body标签的末尾出现一个数字9。所以我需要通过jQuery删除它。

我知道 jQuery 中有 find() 方法，但它只找到元素而不是字符。我需要找到字符并将其删除。它不属于body标签以外的任何元素，因此我无法选择围绕它的元素并将其删除。

```
<body>all the other site elements....9</body> 
```

我需要删除那个 9。请提出建议。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:24:47.593

您应该找到附加字符的原因，并将其删除。但是，要在客户端进行临时修复：

您不想操纵`innerHTML`（或`.html()`）整个文档。`document.body`取而代之的是，抓住（到目前为止，jQuery 可以做到）的最后一个子节点，验证它是一个文本节点（jQuery 在这一点上做不到），并稍微缩短它的文本内容。`textContent`两者都不`innerText`是跨浏览器兼容的（[尽管我们可能希望`innerText`成为标准](http://www.davidtong.me/innerhtml-innertext-textcontent-html-and-text/)）。但是，对于文本节点，`nodeValue`可用：

```
$(document).ready(function(){
  var node = document.body.lastChild;
  if(node && node.nodeType == node.TEXT_NODE){
    node.nodeValue = node.nodeValue.replace(/9^/,"")
  }
}) 
```

请注意，假设九是出现在正文中的*最后一*件事，并且后面没有不可见的内容（空格、脚本标签、注释标签）。可以通过修改正则表达式来忽略空格（留给读者作为练习），并且可以通过迭代来跳过不可见的节点（如果根据您的特定情况定制更容易；毕竟这是一个临时修复）。

有用的链接：

[https://developer.mozilla.org/en-US/docs/DOM/Node.lastChild](https://developer.mozilla.org/en-US/docs/DOM/Node.lastChild)
[https://developer.mozilla.org/en-US/docs/DOM/Node.nodeType](https://developer.mozilla.org/en-US/docs/DOM/Node.nodeType)
[https://developer.mozilla。 org/en-US/docs/DOM/Node.nodeValue](https://developer.mozilla.org/en-US/docs/DOM/Node.nodeValue)
[https://developer.mozilla.org/en-US/docs/DOM/Node.previousSibling](https://developer.mozilla.org/en-US/docs/DOM/Node.previousSibling)

# django - Django 过滤 ModelChoiceField 的查询集

> ID：15608784
> 
> 赞同：4
> 
> 时间：2013-03-25T06:18:46.300
> 
> 标签：django

我一直在使用一个名为 ModelChoiceField 的表单字段并通过所有对象进行查询，但这并不是我打算使用它的目的。

```
 class PictureForm(forms.ModelForm):
    Whiteboard = forms.ModelChoiceField(queryset=Whiteboard.objects.all()) 
```

我一直在尝试使用 ModelChoiceField 来查询属于特定用户的所有 WhiteBoard 对象

```
Whiteboard = forms.ModelChoiceField(queryset=Whiteboard.objects.filter(user=request.user)) 
```

但我发现请求没有传递给 ModelForm 。我一直在通过 SO 搜索各种解决方案，一种解决方案是覆盖表单的**init** ()

这可能是与我的问题有关的最接近的问题 [How to use the request in a ModelForm in Django](https://stackoverflow.com/questions/8841502/how-to-use-the-request-in-a-modelform-in-django)

**这是他的解决方案。如果他的解决方案是覆盖视图中的查询集。他如何在 forms.py 中创建没有查询集的 ModelChoiceField**

**就我而言，我想按用户过滤所有白板。我怎么能做到？**

我的模块的一部分

```
class Whiteboard(models.Model):

    Category =models.CharField(max_length=30,choices=CATEGORY)
    user = models.ForeignKey(User)
    name = models.CharField(max_length=100)
    picture = models.OneToOneField('Picture',related_name='picture',blank=True,null=True)
    def __unicode__(self):
        return self.name

class Picture(models.Model):
    user = models.ForeignKey(User)
    Whiteboard = models.ForeignKey(Whiteboard,blank=False,null=False,related_name='board')
    image = models.FileField(upload_to="images/",blank=True)
    description = models.TextField()
    is_primary = models.BooleanField(default=False)

    def __unicode__(self):
        return self.description 
```

我的观点.py

```
def PictureCreator(request):
if not request.user.is_authenticated():
    return HttpResponseRedirect(reverse('world:LoginRequest'))

if request.method == "POST":
    form = PictureForm(request.POST , request.FILES)
    if form.is_valid():
        picture = Picture(user=request.user)
        image = request.FILES.get('image')
        if image:
                            picture.image = form.cleaned_data['image']
                    description = form.cleaned_data['description']
        if description:
                            picture.description = form.cleaned_data['description']

        if board:
                            picture.board = form.cleaned_data['board']
        picture.save()
        board = Whiteboard.objects.get(Whiteboard=picture.board)
        the_id = board.id
    return HttpResponseRedirect(reverse('world:Boat', kwargs={'animal_id': the_id }))   

return render(request,'picture.html',{'form':PictureForm()}) 
```

图片.html

```
<form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
{{ form.as_p }}
<input type = "submit" value= "Add Picture" />
 </form> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-25T06:27:03.267

在类定义期间根本不要设置过滤器。您将在视图中覆盖它。

```
form = PictureForm()
form.fields['whiteboard'].queryset = Whiteboard.objects.filter(user=request.user)

class PictureForm(ModelForm):
   whiteboard = forms.ModelChoiceField(queryset=Whiteboard.objects.none(),) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T06:34:21.743

然后在视图中的表单中传入，您必须传递`user`用户值`init``PictureForm(request.user)`

```
class PictureForm(forms.ModelForm):
    class Meta:
        model = Picture

    def __init__(self, user, *args, **kwargs):
        super(PictureForm, self).__init__(*args, **kwargs)
        self.fields['Whiteboard'].queryset = Whiteboard.objects.filter(user=user)

def PictureCreator(request):
    if not request.user.is_authenticated():
        return HttpResponseRedirect(reverse('world:LoginRequest'))

    if request.method == "POST":
        form = PictureForm(request.user, request.POST, request.FILES)
        if form.is_valid():
            picture = Picture(user=request.user)

            image = request.FILES.get('image')
            if image:
                picture.image = form.cleaned_data['image']

            description = form.cleaned_data['description']
            if description:
                picture.description = form.cleaned_data['description']

            if board:
                picture.board = form.cleaned_data['board']
            picture.save()

            board = Whiteboard.objects.get(Whiteboard=picture.board)
            the_id = board.id
        return HttpResponseRedirect(reverse('world:Boat', kwargs={'animal_id': the_id }))   
    return render(request,'picture.html',{'form':PictureForm(request.user)}) 
```

# kendo-ui - 导出数据时如何在日期和时间之间留出空间？

> ID：15608790
> 
> 赞同：0
> 
> 时间：2013-03-25T06:19:10.207
> 
> 标签：kendo-ui, kendo-grid

在此日期时间列中也存在，而导出日期时间显示为这样， `2013-02-0613:18:07`没有空格
如何在日期和时间之间留出空间（即需要以这种格式导出日期和时间`2013-02-06 13:18:07`）以这样的代码格式给出`=yyyy-MM-dd HH:mm:ss`我试过喜欢这 `yyyy-MM-ddTHH:mm:ss`但是在导出字符 T 的同时也被导出了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:01:17.780

您可以在提到**yyyy-MM-dd HH:mm:ss时使用带空格的格式字符串**

[工作演示在这里](http://jsfiddle.net/zaheerahmed/Sbb5Z/299/)

```
{
    field: "BirthDate",
    title: "Birth Date",
    template: '#= kendo.toString(BirthDate,"yyyy-MM-dd HH:mm:ss") #'
} 
```

`Window.open()`问题是它不需要空格，所以你必须通过 URl 传递数据，否则我更新[你的 Jsfiddle](http://jsfiddle.net/zaheerahmed/5bchz/21/)可能对你有帮助。

# ios - UITableViewCell 触摸响应延迟

> ID：15608796
> 
> 赞同：1
> 
> 时间：2013-03-25T06:19:34.087
> 
> 标签：ios, ipad, uitableview

我正在尝试实现一个“**设置**页面”，例如拆分视图，左侧是表格视图，右侧是图像视图。一切都很好，但是如果尝试更快地点击它，表格视图单元格触摸会出现延迟。`DidSelectRowAtIndex`path 没有被调用，但单元格闪烁。

我试过的，

1.  将*图像更改*逻辑移至`willSelectRowAtIndexPath`from`DidSelectRowAtIndex`

2.  从委托方法中删除所有内容（检查是否是由于加载图像）

我该如何解决这个有线问题？

**表数据源**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *cellIdentifier = @"tutorialCell";
        CustomTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
        if (cell == nil) {
            NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"TutorialTableCell" owner:nil options:nil];
            cell = [nib objectAtIndex:0];        
        }
        NSDictionary * dic = [dictArray objectAtIndex:indexPath.row];
        cell.tutorialText.text = [dic valueForKey:TUTORIAL_TEXT];
        cell.tutorialImage.image = [UIImage imageNamed:[dic valueForKey:TUTORIAL_ICON]];
        cell.contentView.backgroundColor = [UIColor colorWithHex:@"#36393D" alpha:1.0];
        UIView *bgColorView = [[UIView alloc] init];
        [bgColorView setBackgroundColor:[UIColor colorWithHex:@"#1f1f1f" alpha:1.0]];
        [cell setSelectedBackgroundView:bgColorView];
        return cell;
    } 
```

**表视图委托**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSDictionary * dic = [dictArray objectAtIndex:indexPath.row];
    _tutorialImageView.image = [UIImage imageNamed:[dic valueForKey:TUTORIAL_IMAGE]];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T06:23:11.860

`delaysContentTouches`UITableViews 是默认启用的 UIScrollViews 的子类。这是因为 UIScrollView 在允许触摸转到其子视图之前尝试确定触摸是否是滑动手势或滚动动作的一部分。如果您真的想禁用该操作，您可以通过将`delaysContentTouches`表视图的设置为 NO。这可能会使滚动行为有点奇怪，因为点击会*立即*转到表格视图的单元格。您可能会发现您实际上比非延迟触摸动作更喜欢延迟触摸动作。

**编辑**克莱门特说他已经尝试过了，所以这是另一个想法。

在发布的代码中，您`imageNamed:`至少最初是从磁盘 ( ) 加载这些图像。UIKit 可能会做一些缓存。如果您的教程图像非常大，您可能无法更快地加载它们，因此请提前加载它们。您可以使用相同的`[dic valueForKey:TUTORIAL_IMAGE]`键加载所有图像并将它们放入字典中。然后，`tableView:didSelectRowAtIndexPath:`您可以设置`_tutorialImageView.image`为字典中的（已加载的）图像之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:43:07.780

这可能是图像加载代码。我在这里有两个建议：

一个。如果图像不是太多，您可以将它们全部加载并缓存在 NSArray 中。

湾。如果内存是一个问题，我建议首先显示一个占位符图像和/或 UIActivityIndi​​cator，然后在主线程之外的单独线程中加载主图像。

# git - 识别删除特定文件的提交

> ID：15608797
> 
> 赞同：1
> 
> 时间：2013-03-25T06:19:34.237
> 
> 标签：git, file, commit, identity, delete-file

我正在开发一个托管在 GIT 上的项目。在我的仓库中的某个目录中，有人删除了路径 [/home/git/myProject/generic] 中的一个文件，例如 [a.txt]。现在，在这个目录中的文件上发生了很多提交。我想追踪删除该文件的提交。

我已经尝试过。

```
git log --oneline myProject/generic 
```

但这会返回大量提交，并且很难追踪确切的提交。

我也试过

```
git log --oneline myProject/generic/a.txt 
```

但这会返回，路径不存在错误。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:24:24.820

只需添加`--`：

```
git log --oneline -- myProject/generic/a.txt 
```

# c# - 使用 WebApiContrib 进行路由测试

> ID：15608800
> 
> 赞同：0
> 
> 时间：2013-03-25T06:19:47.340
> 
> 标签：c#, asp.net-web-api, asp.net-routing, web-api-contrib

我有一个正在尝试测试的 WebApi 项目。我有一个控制器 -

```
public class UserController : ApiController
{
    public string Get()
    {
        return "foo";
    }
} 
```

我需要测试路线，我正在尝试使用[WebApiContrib.Testing](http://nuget.org/packages/WebApiContrib.Testing)包。

现在，我的问题是，在注册路由时，我使用`GlobalConfiguration.Configuration.Routes`的是`HttpRouteCollection`.

在我的测试中，我可以访问`RouteTable.Routes`，但这是`RouteCollection`.

结果，由于这种类型的不兼容，我无法在我的测试中注册 WebApi 路由。

有没有人遇到过这个问题？我有什么明显的遗漏吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-13T18:30:34.853

我通过使用解决了这个问题：

```
WebApiConfig.Register( GlobalConfiguration.Configuration ); 
```

在`TestFixtureSetup`

# javascript - Sencha ExtJS Json 转换

> ID：15608806
> 
> 赞同：2
> 
> 时间：2013-03-25T06:20:17.990
> 
> 标签：javascript, json, extjs

所以，我正在制作一个登录表单。

Sencha 期望任何 Json 响应通常具有以下格式：

```
{  
  "root" : {
    "success": true/false,
    "message": ...,
    "id": ...,
    "metaData": ...,
  }
} 
```

但是，我得到的实际 Json 响应如下所示：

```
{
  "SessionId":"1", //doesn't exist if login error
  "UserName":"admin", //doesn't exist if login error
  "ResponseStatus":{
    //blank or failed to login error list 
  }
} 
```

格式来自第 3 方，所以我无法更改。由于结构不同，映射这些文件并不直接。

我的直觉告诉我应该在 Ext.Form -> Reader/errorReader -> Functions 中编写自定义 json 数据转换。但是，我是 ExtJS 的新手，我没有脑力将它粘合在一起。能否请你帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:27:21.003

根据 Johan，您不需要自定义阅读器。

如果您的 json 没有根目录，请不要告诉您的读者使用根目录...

```
Ext.define('My.model.Model1', {
    extend:'Ext.data.Model',
    fields:[
    'SessionId',
    'UserName'
    ],
    proxy:{
      type:'ajax',
      url:'./app/data/response.json',
      reader:{
        type:'json',
        messageProperty:'ResponseStatus'
      }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T08:33:06.520

这可以做到，您将需要创建自己的阅读器。这篇文章中的这个答案是这样的：

[如何配置 extjs 阅读器来读取这个 json？](https://stackoverflow.com/questions/8969437/how-to-configure-extjs-reader-to-read-this-json)

```
Ext.define('Ext.data.reader.JsonPWithoutRoot', {
    extend: 'Ext.data.reader.Json',
    read: function(response) {
        return this.callParent([ { root: response } ]);
    },
    root: 'root'
}); 
```

您的商店代理配置：

```
proxy: {
    type    : 'json',
    reader  : {
        type: 'json',
        root: ''
    }       
} 
```

# c++ - 浮点数转换为整数的行为

> ID：15608807
> 
> 赞同：1
> 
> 时间：2013-03-25T06:20:26.617
> 
> 标签：c++, floating-point, type-conversion

我有一个固定长度的整数类，我知道如何实现从我的类型到本机浮点数的转换，反之亦然，但有些特殊情况我不知道该怎么做：

假设有符号类型名称是`T`，无符号版本是`UT`，类型大小是`128-bit`

(1) 本机浮点值大于/小于`T`或`UT`可以表示什么？

(2) `T`or`UT`的值大于/小于本机浮点可以表示的值？

我应该截断、抛出异常还是将结果设置为零？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:06:19.807

根据您的问题，我不确定您是否完全理解浮点数。浮点表示既有量级又有精度，但你的问题只是在谈论量级。因此，尽管您的整数可能在浮点可表示的范围内，但它仍然可能无法准确地表示为浮点。你关心准确性的损失吗？

我的选择是抛出一个异常，但也包括预先检查一个数字是否可以用另一种格式表示的方法。换句话说，让您的代码用户选择他们希望如何处理特殊情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:27:47.363

最好的方法是构造最大和最小值相互兼容的整数-浮点对类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T06:43:36.290

> 浮点值大于/小于 T 或 UT 可以表示的值？

可能。语言标准要求浮点类型支持至少与 10 ^(37)一样大的值，或者相​​当于 2 ^(122)，这接近于最大 128 位整数值（有符号或无符号）。

> T 或 UT 的值大于/小于浮点可以表示的值？

可能。

IEEE-754 单精度浮点格式的最大有限值略小于 2 ^(128)，而 IEEE-754 双精度格式的最大有限值略小于 2 ^(1024)。

这些答案最终取决于您的平台。

> 我应该截断、抛出异常还是将结果设置为零？

由你决定。

# java - 如何在android java中加载测验应用程序的url？

> ID：15608814
> 
> 赞同：0
> 
> 时间：2013-03-25T06:20:45.803
> 
> 标签：java, android, url

我最近启动了一个测验应用程序，我找到了一个很好的网站，我可以在其中使用图像、多个响应进行测验，并在开始时显示分数。

我不知道我的错误在哪里，因为 ggoogle.com 有效，但我的测验没有。

这是我要加载的链接surveyanyplace.com/s/pozitiemers

我的课：

```
public class ChestionareA extends MainActivity2A {
    /** Called when the activity is first created. */

    WebView web;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.chestionare_a);

        web = (WebView) findViewById(R.id.webview01);
        web.setWebViewClient(new myWebClient());
        web.getSettings().setJavaScriptEnabled(true);
        web.loadUrl("http://surveyanyplace.com/s/pozitiemers/");
    }

    public class myWebClient extends WebViewClient
    {
        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
            // TODO Auto-generated method stub
            super.onPageStarted(view, url, favicon);
        }

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            // TODO Auto-generated method stub

            view.loadUrl(url);
            return true;

        }
    }

    // To handle "Back" key press event for WebView to go back to previous screen.
   @Override
   public boolean onKeyDown(int keyCode, KeyEvent event)
  {
    if ((keyCode == KeyEvent.KEYCODE_BACK) && web.canGoBack()) {
        web.goBack();
        return true;
    }
    return super.onKeyDown(keyCode, event);
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:51:26.933

还添加了清单 android:hardwareAccelerated="true"。不确定它是否有帮助。

下面的代码对我有用。尝试这个。

```
public class MainActivity extends Activity {

WebView wv;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    wv= (WebView) findViewById(R.id.wv);
    wv.getSettings().setPluginsEnabled(true);
    WebSettings webSettings = wv.getSettings();
    webSettings.setJavaScriptEnabled(true);
    wv.getSettings().setDomStorageEnabled(true);

    wv.setWebViewClient(new MyOwnWebViewClient());
    wv.loadUrl("http://surveyanyplace.com/s/pozitiemers/");
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
class MyOwnWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl("http://surveyanyplace.com/s/pozitiemers/");
        return true;
    }
 } 
```

activity_main.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<WebView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/wv"></WebView>
</LinearLayout> 
```

结果快照

![在此处输入图像描述](../Images/ca07e255fd9a036ae0bd6812a4b658f6.png)

# gnome-shell-extensions - 如何在 GNOME Shell 3.6、3.8 或更新版本上进行调试

> ID：15608817
> 
> 赞同：2
> 
> 时间：2013-03-25T06:20:49.203
> 
> 标签：gnome-shell-extensions

我开发了自己的 gnome-shell 扩展，它适用于 GNOME Shell 3.4 和 GNOME Shell 3.6。它不适用于 GNOME Shell 3.8，我不知道为什么，因为我不知道在哪里可以访问任何日志。

在 GNOME Shell 3.4 上，使用 Look Glass，在 3.6 和 3.8 版本中删除了一个“错误”选项卡，我看不到任何错误。在扩展选项卡上，单击“显示错误”会显示“没有错误”。

启动 gnome-shell --replace for terminal 也不会显示任何错误。但是我的扩展没有显示（代码相同，适用于 GNOME 3.4 和 3.6）。

我如何调试它以找出我的代码有什么问题？

谢谢！

扩展：[https ://github.com/Softcatala/TraductorGnomeShell](https://github.com/Softcatala/TraductorGnomeShell)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T06:26:07.260

所有输出都重定向到 stout/stderr 这被捕获

.cache/gdm/session.log 或 .xsession-errors

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-02T21:31:32.250

自 Gnome 3.6+ 起，错误消息选项卡已从“窥镜”中删除。在 Gnome 3.6+ 系统上打开控制台并发出命令：

```
tail -f .xsession-errors 
```

在您的扩展中使用新的日志记录语法：

```
log('my message'); 
```

在您的控制台中，您将看到：

```
JS LOG: my message 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-08T19:40:52.640

如果您使用@mbokil 回答中提到的 Fedora 19 日志功能，请写到`/var/log/messages`

```
tail -f messages | grep 'localhost gnome-session' 
```

会是你的朋友。

# animation - Unity 4 - 带有动画的导入非人形角色。我可以添加物理吗？

> ID：15608821
> 
> 赞同：0
> 
> 时间：2013-03-25T06:21:14.807
> 
> 标签：animation, unity3d, physics, legacy

我对 Unity 比较陌生，我在为合同做的事情上需要帮助。我有一台以 fbx 文件形式导入动画的非人形 PC，因此我必须尽可能通过旧脚本来制作动画。我在播放器上安装了第三人称相机。我希望它有一个延迟，就好像它被 PC 拖在一根绳子上一样，所以当它启动、停止或加速时，需要一些时间来跟随或赶上。我只能通过使用物理来完成接近这种行为的任何事情，但这会破坏动画。任何有关如何解决此问题的提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:30:18.473

我猜动画有时会碰到相机。
我目前的项目也需要这个，我的计划是：

1.  将相机与播放器分离
2.  只要你能负担得起，就没有相机的物理特性，即环境不太复杂，也不会导致由于相机和角色之间的障碍物而导致 PC 被遮挡的情况
3.  `LateUpdate`仅通过操纵它来移动相机`transform`并让它跟随当前玩家的位置
4.  使用[Vector3.SmoothDamp](http://docs.unity3d.com/Documentation/ScriptReference/Vector3.SmoothDamp.html)、[Mathf.SmoothDamp](http://docs.unity3d.com/Documentation/ScriptReference/Mathf.SmoothDamp.html)、[Slerp](http://docs.unity3d.com/Documentation/ScriptReference/Vector3.Slerp.html)等实现衰减效果

# android - 这可以在 api 11 级别以下使用 ListFragment 和 FragmentTransaction 吗？

> ID：15608823
> 
> 赞同：0
> 
> 时间：2013-03-25T06:21:27.167
> 
> 标签：android, android-fragments, android-listfragment, fragmenttransaction

任何机构都可以帮助我在低于 api 级别 11 中使用 Fragment。

developer.android 提供 List Fragment 和 Transaction Fragment 但它添加在 api 级别 11 中。

如何在 Froyo(2.2) 中使用 Fragment。（我想实现 ListView Fragment）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T06:23:22.217

您可以使用 Android 支持库。 [http://developer.android.com/tools/extras/support-library.html](http://developer.android.com/tools/extras/support-library.html)

# javascript - JQuery：如何结合 .contains() 和 .replaceWith()？

> ID：15608824
> 
> 赞同：1
> 
> 时间：2013-03-25T06:21:28.807
> 
> 标签：javascript, jquery, replacewith

我想使用 JQuery 用我自己的替换和元素的 html。我以为我可以使用：

```
$('#nav a:contains(replace me)').replaceWith('<h2>Label</h2>'); 
```

但这不起作用。我已经尝试了很多这样的变体，但都无济于事。

有谁知道我做错了什么？

编辑：添加了当前的 html：

```
<div id="nav">
<a href="#">replace me</a>
<a href="#">this is ok</a>
<a href="#">this is ok</a>
<a href="#">this is ok</a>
</div> 
```

我希望它看起来像什么：

```
<div id="nav">
<a href="#"><h2>Label</h2></a>
<a href="#">this is ok</a>
<a href="#">this is ok</a>
<a href="#">this is ok</a>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T06:27:34.707

我想我会这样做：

```
$('#nav a').html(function(i, html) {
    return $.trim(html) == 'replace me' ? '<h2>Label</h2>' : html;
}); 
```

[**小提琴**](http://jsfiddle.net/Au2f2/)

因为我不是很喜欢`:contains`，或者

```
$('#nav a:contains(replace me)').html('<h2>Label</h2>'); 
```

[**小提琴**](http://jsfiddle.net/Au2f2/1/)

因为`replaceWith()`将替换整个锚，而不仅仅是它的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T06:35:31.397

可能对你有帮助

```
 $("div").find('a').each(function(index)
    {
        if(index==0){
         $(this).html("<h2>Label</h2>");
        }

    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T06:48:16.370

```
$("a").text(function () {
    return $(this).text().replace("replace me", "<h2>Label</h2>"); 
}); 
```

这是一个 jsfiddle 链接 [http://jsfiddle.net/xpfRV/1/](http://jsfiddle.net/xpfRV/1/)

# html - 允许单击元素但仍注册悬停

> ID：15608827
> 
> 赞同：1
> 
> 时间：2013-03-25T06:21:33.480
> 
> 标签：html, css, events, dom, click

这是我的问题：我有一个`a`标签用作箭头，您可以将鼠标悬停在上面以更改 div 的滚动。这部分有效。但是，我希望您能够单击`a`此链接下方 div 中的其他元素。所有其他展示如何允许点击失败的教程也阻止了我的 Javascript 能够在最顶部的链接上注册鼠标事件。
有没有办法解决这个问题？[这是我正在尝试做的事情的链接](http://mrfishie.com/products/playzone/index.php?p=my%20awesome%20game)。
尝试将鼠标悬停在屏幕顶部的项目列表上。将出现两个箭头。这些是我希望对事件可见但仍然可以点击的链接。
对于那些人来说，代码非常简单：

```
<a id="lefthover" href="javascript:void(0);">◄&lt;/a>
<a id="righthover" href="javascript:void(0);">►&lt;/a> 
```

如果您需要更多链接，这里有一个非常基本的[JSFiddle](http://jsfiddle.net/Gq3nK/)。几乎，如果您单击其中一个箭头并且鼠标悬停在箭头和其中一个框上，它应该显示两个警报框（因此它会同时触发）。谢谢！

# rvm - 在 ubuntu 12.04 中安装 RVM

> ID：15608828
> 
> 赞同：0
> 
> 时间：2013-03-25T06:21:42.000
> 
> 标签：rvm

我对 ruby​​ 有疑问，决定重新安装 rvm 和 rails ......

当我尝试安装 rvm by`curl -L https://get.rvm.io | bash -s stable` 时，出现以下错误

curl：（56）代理连接中止

当我将 https 更改为 http 时，我得到 .

意外标记附近的语法错误`<' bash: line 1:`'

我在系统范围的代理中尝试了它..然后删除了系统范围的代理并在 01proxy 中进行了配置，仍然得到相同的结果。

我在哪里安装这个出错了？

几周前我使用相同的命令安装了它并且它有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T17:52:51.353

您的代理似乎正在处理该请求。

您可以尝试通过其他方式下载安装程序脚本。首先尝试在您的网络浏览器中输入该 URL。如果您转到一个以 开头的页面，`#!/usr/bin/env bash`则可以将其保存（右键单击 -> 另存为/另存为）为“rvm-installer”。

如果它不起作用，您可以尝试通过其完整 url 下载脚本：

```
$ wget https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer 
```

之后，您可以执行它：

```
$ cat /path/to/rvm-installer | bash -s stable 
```

希望能帮助到你。

# iphone - 仅使用 iPA 文件分发版本

> ID：15608833
> 
> 赞同：-1
> 
> 时间：2013-03-25T06:21:56.887
> 
> 标签：iphone, objective-c, xcode, ipa

我需要上传我的客户的新版本，但我只有他的 iPA 文件。是否可以使用 xCode 4.5 分发新版本？

找不到正确答案。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T06:24:20.583

不，不可能。新版本 -> 新编译 -> 需要源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T06:24:14.113

如果您有已构建的应用程序的 IPA 文件，并且您的设备已配置好，您可以使用 iTunes 将其上传到您的设备。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T06:26:12.043

简单回答是不。为了分发应用程序，您需要来自帐户的分发（应用商店）配置文件。除非您拥有这样的个人资料并且能够登录 App Store 帐户（如果是企业帐户，则成为团队负责人），否则您就不走运了。

# jsf - 不工作

> ID：15608843
> 
> 赞同：0
> 
> 时间：2013-03-25T06:22:48.293
> 
> 标签：jsf, primefaces, facelets

我有代码

```
<p:selectOneMenu id="starter" value="#{reportRegisterManagedBean.starter}" style="width:160px" converter="#{reportStarterConverter}">
<f:selectItem itemLabel="Select Report Starter" itemValue="0"
itemDescription="TEST" />
<f:selectItems
value="#{reportRegisterManagedBean.startersSelectItems}" var="ds" itemLabel="#{ds.name}" itemValue="#{ds}" itemDescription="#{ds.description}" />
</p:selectOneMenu> 
```

这里的属性在标签`itemDescription="TEST"`中效果很好。`<f:selectItem>`但`itemDescription="#{ds.description}"` 不能在`<f:selectItems>`标签中工作。

这里有错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:39:57.333

f:selectItems 需要一个您在我们的 bean 中定义的列表，如下所示：

```
List<SelectItem> list = new LinkedList<SelectItem>();
list.add(new SelectItem("this will be the return value -> itemValue", "this will be the display value -> itemLable")); 
```

如果这样做，您甚至不需要 itemValue 或 itemDescription，因为它已在列表中定义。

**更新（注意：您不需要 itemValue、itemDescription）：**

在您的 xhtml 页面中，它看起来像这样：

```
<p:selectOneMenu value="#{reportRegisterManagedBean.starter}">
    <f:selectItems value="#{reportRegisterManagedBean.startersSelectItems}" />
</p:selectOneMenu> 
```

# mysql - 试图获得具有相应名称的最小值和最大值

> ID：15608850
> 
> 赞同：0
> 
> 时间：2013-03-25T06:23:31.117
> 
> 标签：mysql

试图在 mysql 中编写将显示约会的约会时间、技工名字、技工名字、客户名字和顾客名字，但我的代码给了我错误的结果。我只想要最大和最小持续时间和相应的名称。所以2行

```
SELECT 
Min(Appointment.Appointment_duration) AS MINOfAppointment_duration, 
Max(Appointment.Appointment_duration) AS MAXOfAppointment_duration,
mechanic_Firstname, mechanic_lastname, customer_firstname, customer_lastname
FROM Appointment, mechanic, Customer
WHERE (mechanic.mechanic_ID=Appointment.mechanic_ID) AND (customer.customer_ID=Appointment.customer_ID); 
```

约会表中的记录

```
Appointment_ID  Appointment_DATE    Appointment_Duration    Mechanic_ID Customer_ID
12               08/01/2007     0:35:00                      1            5684
13               01/01/2009     2:15:36                      6            2534
14               06/12/2010     0:05:29                      7            7423 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:46:53.217

`customer`问题是，两个表之间没有关系`mechanic`，您必须分别获取每个表的最大和最小持续时间，并使用`UNION ALL`将两个结果集合并为一个。就像是：

```
SELECT 
  m.mechanic_Firstname AS FirstName, 
  m.mechanic_lastname AS LastName,
  IFNULL(Min(a.Appointment_duration), 0) AS MINOfAppointment_duration, 
  IFNULL(Max(a.Appointment_duration), 0) AS MAXOfAppointment_duration
FROM mechanic AS m
LEFT JOIN Appointment AS a ON a.mechanic_ID = m.mechanic_ID
GROUP BY m.mechanic_Firstname,
         m.mechanic_lastname
UNION ALL
SELECT 
  c.customer_firstname,
  c.customer_lastname,
  IFNULL(Min(a.Appointment_duration), 0), 
  IFNULL(Max(a.Appointment_duration), 0)
FROM customer AS c
LEFT JOIN Appointment AS a ON a.mechanic_ID = c.customer_ID
GROUP BY c.customer_firstname,
         c.customer_lastname; 
```

这只会给你四列：

```
FirstName  |  LastName  |  MINOfAppointment_duration  |  MAXOfAppointment_duration 
```

在所有技工名称和客户名称都列在两列中的情况下`firstname`，`lastname`您可以添加一个标志来标记来自客户的技工。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:43:14.360

您可以使用`Union all`函数来找出最大值和最小值。

```
 SELECT 
    Min(Appointment.Appointment_duration) AS Appointment_duration, 'Min' as status,
    mechanic_Firstname, mechanic_lastname, customer_firstname, customer_lastname
    FROM Appointment, mechanic, Customer
    WHERE (mechanic.mechanic_ID=Appointment.mechanic_ID) 
    AND (customer.customer_ID=Appointment.customer_ID);
Union all
    SELECT  
    Max(Appointment.Appointment_duration) AS  Appointment_duration,'Max' as status,
    mechanic_Firstname, mechanic_lastname, customer_firstname, customer_lastname
    FROM Appointment, mechanic, Customer
    WHERE (mechanic.mechanic_ID=Appointment.mechanic_ID)
    AND (customer.customer_ID=Appointment.customer_ID); 
```

# java - 在 Java 中调用常量时出错

> ID：15608862
> 
> 赞同：0
> 
> 时间：2013-03-25T06:24:23.313
> 
> 标签：java, android, performance, android-intent, android-asynctask

我正在尝试在我的应用程序中解析 json：

所以首先我为我的android应用程序创建了常量类，它有大约6个app.config变量：

（等级：1）

```
public class Constants{

    // url to make request
    public static String url = "http://server.com/";

    // JSON Node names
    public static final String TAG_CONTACTS = "contacts";
    public static final String TAG_ID = "id";
    public static final String TAG_NAME = "name";
    public static final String TAG_EMAIL = "email";
    public static final String TAG_ADDRESS = "address";
    public static final String TAG_GENDER = "gender";

} 
```

现在我想在不同的类中使用它，所以我继续创建了不同的类：

（等级：2）

```
 public class ReadFiles{

        public void readConstant(){
       //appConfig is JSONArray
        JSONArray appConfig = null;
       // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();

        // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(c.url);

        try {
            // Getting Array of Contacts
            contacts = json.getJSONArray(Constants.TAG_CONTACTS);

            // looping through All Contacts
            for(int i = 0; i < contacts.length(); i++){
                JSONObject d = details.getJSONObject(i);

                // Storing each json item in variable  
                String id = d.getString(Constants.TAG_ID); //Error: 
        //ERROR :  The method getString(int) in the type  JSONArray is not applicable for the arguments-(String)
                String name = d.getString(Constants.TAG_NAME);
                String email = d.getString(Constants.TAG_EMAIL);
                String address = d.getString(Constants.TAG_ADDRESS);
                String gender = d.getString(Constants.TAG_GENDER);

            } catch (JSONException e) {
             e.printStackTrace();
            }
        } 
```

我在块上遇到错误：`String name = c.getString(Constants.TAG_NAME);` 我正在尝试通过解析 json 将常量值应用于局部变量。

我遵循了日食提示，也尝试过

```
String name = c.(Constants.TAG_NAME); 
```

但仍然没有运气。这个区块有什么问题？如何将 json 值分配给局部变量？据您所知：这就是我想要实现的目标：[android-json-parsing-tutorial](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/) 但我想将常量保留在单独的类中。

更新：所以我做了你建议的改变，我得到了新的错误：
`String tabTitle = appConfig.(ConfigConstants.TITLE); //Error: Syntax error on token ".", Identifier expected after this token`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T06:26:09.640

为什么不简单地使用它？

```
Constants.TAG_NAME 
```

为什么要实例化你的`Constants`类？`Constants`因为，类中的所有字段`static`，它们只需要以某种`static`方式（即）通过使用`ClassName`（**常量**）来访问。

**更新：-**

```
appConfig.(ConfigConstants.TITLE); 
```

不应该有方法吗？像这样的东西。

```
appConfig.someMethodName(ConfigConstants.TITLE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:36:24.383

我猜你在包中使用 JSONArray 类

```
org.json.JSONArray 
```

有一个方法

```
getString(int) 
```

给定这个方法接受一个整数参数，如果你传递一个字符串参数，很明显 Eclipse 会抛出一个错误

# php - 从 foreach 创建和引用 PHP 变量以进行比较

> ID：15608867
> 
> 赞同：0
> 
> 时间：2013-03-25T06:24:45.880
> 
> 标签：php, json, api, trello

[现场页面可以在这里看到](http://donedigital.com.au/trello.php)

我的目标是根据它出现的列表将特定类应用于第二个 UL 中的每个列表项。第二个 json 调用返回一个与第一个列表中的 ID 和名称对匹配的 ID。

我想将每个 listID 分配给一个名为 $listID 的 $variable，其值是该列表的名称。

例如`$514fc8993f53cfb366006851 = "To Do";`

然后，我可以使用 if 语句根据 PHP 第二个块中的一系列 if 语句来分配一个类。

任何生成这些变量的帮助将不胜感激。

相关代码如下：

```
<p>The sample board contains the following lists:</p>
<ul>
    <?
        $lists_enc = file_get_contents("https://api.trello.com/1/board/".$BOARD."/lists?key=9ee57574e9f968cedf9ac9964d2f7c4e");
        $lists = json_decode($lists_enc, true);
        $testing = array();

        foreach ($lists as $list) {
            $id = $list["id"];
            $name = $list["name"];

            echo "<li>".$name." (".$id.")</li>\n";
        }
        echo "</ul>";
    ?>

<p>The sample board contains the following cards:</p>
<ul>
    <?
        $cards_enc = file_get_contents("https://api.trello.com/1/board/".$BOARD."/cards?fields=name,idList&key=9ee57574e9f968cedf9ac9964d2f7c4e");      
        $cards = json_decode($cards_enc, true);

        foreach ($cards as $card) {
        echo "<li class=".$status.">".$card["name"]."</li>\n";
      }  

    ?>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:22:33.797

```
<?php
//Reference the trello API's
$lists_enc = file_get_contents("https://api.trello.com/1/board/".$BOARD."/lists?key=9ee57574e9f968cedf9ac9964d2f7c4e");
$lists = json_decode($lists_enc, true);
$cards_enc = file_get_contents("https://api.trello.com/1/board/".$BOARD."/cards?fields=name,idList&key=9ee57574e9f968cedf9ac9964d2f7c4e");      
$cards = json_decode($cards_enc, true);
//Go through every card
foreach ($cards as $card) {
    $idCard = $card['id'];

    //Go through all lists
    foreach ($lists as $list) {
        $idList = $list['id'];

        //If card is related to list, then create an associative variable
        //with the id of list
        if ($card['id'] == $list['id'] {
            $idList[$idList][] = $idCard;
        }
    }
    //gone through all lists
}
//-- gone through all cards
?> 
```

现在您将拥有 $idList[514fc8993f53cfb366006851]、$idList[514fc8993f53cfb366006852] 和 $idList[514fc8993f53cfb366006853] 之类的东西，它们应该包含与列表相关的卡片。虽然我没有测试代码，但我希望你能得到图片......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:32:41.417

```
<?
  // Create array $convert[] to allow translation of listID into listName
    for ($i=0; $i < count($lists); $i++) { 
      $convert[$lists[$i][id]]=$lists[$i][name];
    }

  // iterate over all cards, create list item for each with class that has a slug equivalent of the list name  
    foreach ($cards as $card) {
       $id = $card[idList];
       echo "<li class=".slug($convert[$id]).">".$card["name"]."</li>\n";
    }  

?> 
```

# android-layout - Android布局多个屏幕 - 澄清我

> ID：15608870
> 
> 赞同：1
> 
> 时间：2013-03-25T06:25:10.647
> 
> 标签：android-layout

假设我有一个大小为 320x480px 的布局。布局有背景、带有 2 个按钮的菜单背景和徽标。支持大多数设备的最佳方式是什么？我知道我应该拥有所有四种密度的资产。我的意思是，在我了解了 3:4:6:8 的比例后，在这种情况下，对于具有 mdpi 的普通屏幕，背景是 320x480。因此对于**hdpi**的背景将有**480x720px (1.5x)**，对于**xhdpi 640x960px (2.0x)**和**ldpi 240x360px (0.75x)**，对吗？

另一件事是，我可以同时拥有限定词**res/drawable-xhdpi、/drawable-hdpi、/drawable-mdpi、/drawable-ldpi**和**res/layout-small、/normal、/large、/xlarge**吗？

让我感到困惑的是，如果用户有一个普通屏幕设备 hdpi，使用的背景 img 将是 drawable-hdpi 上的那个，但对于普通屏幕来说太大了，在这种情况下，背景尺寸为 480x720px，它不是吗？

请有人帮我解决这个问题，我试图帮助开发人员处理布局 xml 和资产，但我无法理解。

我想我需要知道的是，对于低、正常、大、xlarge，最“常见”的屏幕尺寸（以像素为单位）是多少，但密度呢？

如果有人能为我澄清这一点，我真的很感激！

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:19:13.987

android 没有最“常见”的屏幕尺寸。

您以不同的密度创建资产并相应地扩展它们。您所要做的就是为您的资产使用正确的比例并创建与密度无关的布局。

看[这里](http://developer.android.com/guide/practices/screens_support.html)的介绍。

# java - 垃圾回收中的复活是什么？幻影参考如何解决它？有什么实际的例子吗？

> ID：15608871
> 
> 赞同：0
> 
> 时间：2013-03-25T06:25:13.553
> 
> 标签：java, garbage-collection

我在研究不同类型的参考资料时遇到了这个词（复活）。对我来说令人困惑的领域之一是幻影参考。到现在为止，我从来没有在现实中遇到过一个用例，事后我觉得我应该使用 Phantom Reference。

在搜索用例时，我发现了 Where Phantom Reference 可以防止对象复活。

为了清楚起见，我了解 finalize 和 phantom reference 中 Object “resurrection” 的定义

我遇到麻烦的地方是找到一个“真实”的用例

1.  何时使用对象复活？
2.  何时使用幻影参考？
3.  幻影引用如何解决无意中的对象复活

我非常感谢围绕这个主题进行讨论。这些是几个对我来说仍然模糊的领域

谢谢， 阿比吉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-03-26T18:57:44.657

Java 有两种不同的机制来响应对象的释放。旧的机制 using`finalize`会在对象被释放之前运行一个特定的方法。新机制 using允许您在对象被释放*后*`PhantomReference`立即运行特定方法。¹

 *该`finalize`技术更强大，因为您可以在对象被`this`释放时访问它；但也更危险，因为有可能（有意或无意地）在终结器中创建对对象的新引用。这可以直接完成（例如通过分配`this`给静态字段）或间接完成（例如两个对象同时变为未引用，一个引用另一个，因此最终对象最终通过不同对象的字段间接访问终结器）。这种情况下，对象最终确定，但仍然可以从某个地方到达，称为对象复活。虽然它已经定义了语义²，它们在实践中往往是相当有问题的语义，并且通常被视为等同于未定义的行为。

对对象释放做出反应的`PhantomReference`方法基本上是一种受约束的终结形式，通过不给你工具来防止你犯任何错误：当你对释放做出反应时，对象已经（有效地）释放了，因此您没有机会意外地复活它或同时释放的任何其他对象。（特别是，`PhantomReference`不能访问对象的`this`指针；`PhantomReference#get`总是返回`null`。）幻像引用还有其他优点，例如，API 允许您精确控制终结器在哪个线程上运行以及它当时将要做什么。

那么为什么要使用幻像参考呢？基本上，任何你想对对象的释放做出反应的情况都应该使用`PhantomReference`，因为它使用的 API 可以防止终结器的各种常见错误。`finalize`（现在已弃用）应仅用于确实没有其他选择的情况。

不幸的是`PhantomReference`，尽管 API 比 for 更难误用，但`finalize`通常也更难使用：

*   你需要一个对象来容纳它`PhantomReference`自己；只有当这个`PhantomReference`对象还活着时才会触发。例如，如果您想在对象死亡时从映射中删除有关对象的元数据，则将`PhantomReference`as/within 存储在实现映射的同一对象中的单独字段中是有意义的（这`WeakMap`在 Java 中实际上是这样工作的） . 如果您使用终结器来管理像文件句柄这样的全局资源，那么`PhantomReference`将需要通过一些全局结构（例如，某个类的静态字段中的集合）来保持活动状态。
*   您需要一个`ReferenceQueue`处理终结器的调度。
*   你需要一个方法来完成你的终结工作——当你监控的对象被释放时运行的东西。`PhantomReference`没有直接规定其中之一；通常的技术是扩展`PhantomReference`并为生成的派生类提供相关方法。
*   您需要轮询参考队列；这是指定终结器在哪个线程上运行以及它当时正在做什么的操作。可能性包括使用单独的线程进行参考队列轮询，或者在程序没有做任何重要的事情时（例如，就在它开始阻塞输入之前）使用程序的主线程。
*   轮询引用队列实际上并不运行终结器（毕竟，`PhantomReference`没有直接提供在终结时运行的方法）。相反，轮询引用队列只会为您提供`PhantomReference`看到释放的对象。由于`PhantomReference`类本身没有对此做出反应的有用方法，因此您需要将其强制转换为适当的类，然后运行您创建的方法。
*   轮询引用队列也不会解除分配`PhantomReference`对象（您必须在其他对象中保持活动状态；否则它将不起作用）。所以当你看到一个幻像引用出列时，如果你想避免内存泄漏，你必须手动将它从保持它活着的东西（通常是一个集合）中删除。
*   如果您需要有关已释放对象的更多信息（例如，在 a 的情况下`WeakMap`，这将是对需要删除的映射条目的引用），您必须将其存储在某处，因为否则它将不可用当对象被释放时。通常，您会将数据存储在`PhantomReference`自身中（无论如何您都在使用它的派生类，您可以在派生类中创建字段来存储数据）。请记住，这不能引用您想要对其解除分配做出反应的对象，因为否则您最终会保持对象处于活动状态并且它永远不会被解除分配。

尽管您可以自己处理所有这些复杂性，并且如果您想对幻像引用做一些不寻常的事情，有时是必要的，但使用将所需操作包装成更方便的 API 的预先编写的库更为常见. 例如，在`java.lang.ref.Cleaner`内部使用幻像引用来提供更类似于 的 API `finalize`，但是（因为它基于幻像引用）可以安全地防止意外复活和类似问题。因此，虽然幻影引用通常对于对无法访问的对象做出反应非常有用，但程序员很少真正直接处理它们。使用在内部使用它们的库会更常见。

* * *

¹在旧版本的 Java 中，幻像引用技术实际上保留了分配对象的内存，直到幻像引用被清除；但这只是一个实现细节，因为无法访问有问题的内存，并且对象应该被视为已经从幻像引用处理程序中释放，因为无论如何您都无法对它们做任何事情。

²复活的对象保持分配状态，直到它变得无法访问，此时它在不运行其终结器的情况下被释放，除非它被同时释放的其他对象的终结器第二次复活。依赖此行为的代码可能已损坏。*

# dynamics-crm-2011 - 我们能否在动态 CRM 中制作一个基于另一个表单的表单？

> ID：15608873
> 
> 赞同：1
> 
> 时间：2013-03-25T06:25:25.180
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm, microsoft-dynamics, dynamics-crm-online

我想知道是否有可能创建一个基于另一个表单的表单。

例如，我正在创建一个新帐户，最初，我知道我必须创建大约 10 个帐户。关键是，它们都有几乎相同的数据（地址、国家、手机号码......）

所以，我认为如果我有一个功能，允许我通过打开相同的表单来创建另一个帐户并只编辑/添加不同的数据，那会更好。

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T09:33:15.290

请参阅接下来的两个选项，看看：

*   [没有代码](http://rc.crm.dynamics.com/RC/2011/en-us/online/5.1_CTP/cloneRecords.aspx)- 使用自引用关系并管理映射。
*   [Javascript 代码](http://msdn.microsoft.com/en-us/library/jj602956.aspx#BKMK_OpenEntityForm)- 这种方式是一种打开实体表单的新方式，如果我们将 null 传递给 id，则会创建该实体的新记录，并且您可以传递默认值。至少在 rollup 8 中有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T07:22:08.483

您可以在帐户表单功能区上添加一个名为“新帐户”的按钮。
该按钮可以调用一个 JavaScript 函数，该函数弹出一个新帐户并使用当前记录中的每个值填充它。

或者，您可以将查找添加到另一个名为“帐户模板”的帐户。
代码正在等待查找的更改，并使用“帐户模板”帐户中的所有属性值填充表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T18:35:50.093

我猜您正在寻找克隆现有记录的实体，以便您可以以最少的努力输入相同的数据来创建新记录。如果这是您的问题，您可以使用现成的解决方案...在此处查看为 Dynamics CRM 添加的记录克隆...您也可以免费试用：[https ://www.iotap.com/ProductDetail/tabid/ 788/ProductID/28/RecordClone-CRM2011-FREETRIAL/Default.aspx](https://www.iotap.com/ProductDetail/tabid/788/ProductID/28/RecordClone-CRM2011-FREETRIAL/Default.aspx)

问候， Jahnavi jray@iotap.com

# android - 通过包名找出正在运行的进程ID

> ID：15608876
> 
> 赞同：22
> 
> 时间：2013-03-25T06:25:30.823
> 
> 标签：android, adb

我正在编写一个脚本，我需要在其中提供我的应用程序的 PID。我可以通过以下命令列出所有进程及其 PID，并且可以看到我的应用程序的条目。

> adb 外壳 ps

这给了我一个巨大的进程列表。而且我需要一个条目（我可以进一步提供给另一个命令），所以我想用包名过滤这个结果。grep 命令在我的 Windows 机器上不起作用。还尝试了以下命令，但没有帮助。

> adb shell ps 名称：my_app_package

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-25T19:04:01.957

从 Android 7.0 开始，通过包名找出进程 ID 的最简单方法是使用`pidof`命令：

```
usage: pidof [-s] [-o omitpid[,omitpid...]] [NAME]...

Print the PIDs of all processes with the given names.

-s      single shot, only return one pid.
-o      omit PID(s) 
```

像这样运行它：

```
adb shell pidof my.app.package 
```

在 7.0 之前的 Android 中，人们使用`ps`命令，然后使用内置的按`comm`值过滤器（对于 android 应用程序是包名称的最后 15 个字符）或`grep`命令来解析其输出。如果名称的`comm`最后 15 个字符以数字开头并且在`grep`Android 4.2 之前默认不包含 ，则过滤器不起作用。但即使在找到合适的工艺线之后，`PID`仍需要提取该值。

有多种方法可以做到这一点。以下是如何使用单个`sed`命令完成查找进程和提取 PID 的方法：

```
adb shell "ps | sed -n 's/^[^ ]* *\([0-9]*\).* my\.app\.package$/\1/p'" 
```

同样的问题是`sed`直到 Android 6.0 才默认包含它。

但如果您必须使用较旧的设备，您始终可以使用以下 Android 版本独立解决方案。它不使用任何外部命令 - 只是 Android shell 内置：

```
adb shell "for p in /proc/[0-9]*; do [[ $(<$p/cmdline) = my.app.package ]] && echo ${p##*/}; done" 
```

寻找 PID 的最常见原因是在其他命令中使用它，例如`kill`. 假设我们有多个`logcat`正在运行的实例，我们希望一次优雅地完成它们。只需将最后一个命令中的`echo`替换为：`kill -2`

```
adb shell "for p in /proc/[0-9]*; do [[ $(<$p/cmdline) = logcat ]] && kill -2 ${p##*/}; done" 
```

如果从 Linux/OSX shell 运行命令，请替换`"`为。`'`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-12-16T11:53:47.870

代替使用`adb shell ps`，先进入`adb shell`再使用`ps`。

**一步步：**

1.  连接设备（或仿真器）时输入`adb shell`命令。
    （命令行前缀将`shell@android:/ $`在执行此命令之后。）

2.  输入`ps | grep <package_name_to_be_filtered>`（即`ps | grep com.google`）。

```
C:> adb shell
shell@android:/ $ ps | grep com.google
u0_a64  3353  2467  903744 52904 ffffffff 00000000 S com.google.process.location
u0_a64  3426  2467  893964 49452 ffffffff 00000000 S com.google.process.gapps 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T06:43:22.793

ps 显示的进程可以限制为属于任何给定用户的进程，方法是通过 grep（用于搜索文本的过滤器）管道输出。例如，属于用户名为 adam 的用户的进程可以显示如下：

```
ps -ef | grep adam 
```

-e 选项生成有关当前运行的每个进程的信息列表。-f 选项生成的列表包含的每个进程的信息项比 -l 选项少。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-01T01:04:24.203

[Alex P. 的回答](https://stackoverflow.com/a/15622698)在技术上回答了“按*进程名称*查找正在运行的进程 ID ”的问题，而不是“按*包名称*查找正在运行的进程 ID ”的问题。`<activity>`区别是微妙的，并且通过标签中的“android:process”属性体现在进程重命名中。

我担心正确的解决方案会涉及更多内容，您可以阅读 Android Studio 为在[此处](https://android.googlesource.com/platform/tools/adt/idea/+/refs/heads/studio-master-dev/deploy/src/com/android/tools/idea/run/deployable/Device.java)找到真正的进程名称所做的解决方法。您将在 下看到适用于 pre-Android Oreo`resolveLegacyPid`和`resolveApplicationId`适用于 Android Oreo+ 的相关 shell 脚本：

> ```
>  /**
>    * Asynchronously resolves to the application ID. The application ID is the package name that is
>    * ultimately given to the application on the device, which usually comes from the manifest.
>    * Note that this may be different from {@link ClientData#getClientDescription()} or
>    * {@link ClientData#getPackageName()} due to the manifest containing a process rename XML
>    * option via "android:process".
>    *
>    * <p>When the manifest option is specified, the two aforementioned {@link ClientData }methods
>    * will return the process name, not the application ID. Therefore, this method guarantees the
>    * application ID if it's possible to resolve. Only if it's not possible will this fall back to
>    * using the process name instead.
>    */
>   private void resolveApplicationId(@NotNull Process process) {
>     myResolverExecutor.execute(() -> {
>       String command = String.format(Locale.US, "stat -c %%u /proc/%d | xargs -n 1 cmd package list packages --uid", process.getPid());
>       CollectingOutputReceiver receiver = new CollectingOutputReceiver();
>       try {
>         myIDevice.executeShellCommand(command, receiver);
>       }
>       catch (IOException | TimeoutException | AdbCommandRejectedException | ShellCommandUnresponsiveException e) {
>         Logger.getInstance(Device.class).warn("Could not resolve application ID", e);
>         return;
>       }
>       String output = receiver.getOutput();
>       if (output.isEmpty()) {
>         return;
>       }
>       Matcher m = PACKAGE_NAME_PATTERN.matcher(output);
>       while (m.find()) {
>         process.addApplicationId(m.group(1));
>       }
>     });
>   }
>   @NotNull
>   private Future<Void> resolveLegacyPid(@NotNull String applicationId) {
>     return myResolverExecutor.submit(
>       () -> {
>         // This shell command tries to retrieve the PID associated with a given application ID.
>         // To achieve this goal, it does the following:
>         //
>         // 1) Gets the user name (e.g. u0_a01) using run-as with the application ID and
>         //    the whoami command.
>         // 2) Runs the ps command under the application ID to get a list of all running
>         //    processes running under the user associated with the given application ID.
>         //    The output of ps looks something like: "<user> <pid> ..."
>         // 3) The output of ps is piped into grep/tr/cut to parse out the second parameter,
>         //    of each line, which is the PID of each process.
>         // 4) The PID is then used in the readlink command to follow the symbolic links of
>         //    the symlinked exe file under the PID's /proc directory.
>         // 5) If the symlink resolves to any of the 32 or 64 bit zygote process, the PID is
>         //    printed to the console, serving as the output of the script.
>         String command =
>           String.format(
>             "uid=`run-as %s whoami` && " +
>             "for pid in `run-as %s ps | grep -o \"$uid[[:space:]]\\{1,\\}[[:digit:]]\\{1,\\}\" | tr -s ' ' ' ' | cut -d ' ' -f2`; do " +
>             "  if [[ `run-as %s readlink /proc/$pid/exe` == /system/bin/app_process* ]]; then " +
>             "    echo $pid; " +
>             "  fi; " +
>             "done",
>             applicationId, applicationId, applicationId);
>         CollectingOutputReceiver receiver = new CollectingOutputReceiver();
>         myIDevice.executeShellCommand(command, receiver);
>         String output = receiver.getOutput();
>         if (output.isEmpty()) {
>           return null;
>         }
>         String[] lines = output.split("\n");
>         // We only handle the first return value for now.
>         try {
>           for (String line : lines) {
>             int pid = Integer.parseInt(line.trim());
>             myPidToProcess.computeIfPresent(pid, (ignored, process) -> {
>               process.addApplicationId(applicationId);
>               return process;
>             });
>           }
>         }
>         catch (NumberFormatException ignored) {
>         }
>         return null;
>       });
>   } 
> ```

# paypal - Paypal Beta 开发人员帐户无法正常工作

> ID：15608877
> 
> 赞同：2
> 
> 时间：2013-03-25T06:25:34.713
> 
> 标签：paypal

切换到新的 beta 开发者 paypal 后，我们创建的所有沙盒帐户或导入的电子邮件不再起作用，您能尽快查看吗

获取错误的步骤：

1.  使用开发者帐户登录

2.  进入应用程序->沙盒帐户

3.  转到任何沙盒帐户的沙盒站点

4.  使用 sanbox 帐户信息记录

5.  收到错误：

请登录以使用 PayPal 沙盒功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T06:46:43.337

由于从旧沙箱过渡到新站点，这是一个已知问题。您需要删除 cookie 并重新登录才能访问沙盒站点。请注意，IE 在文件系统中存储了需要删除的永久 cookie。Firefox 或 Chrome 会比 IE8 更好。

# c - C-通过函数将 tmp 值传递给另一个函数

> ID：15608881
> 
> 赞同：1
> 
> 时间：2013-03-25T06:25:54.260
> 
> 标签：c

在这个程序中：

```
#include <stdio.h>
#include <stdlib.h>   /* for malloc */
#include <ctype.h>

#define STD_WORK_WEEK 40
#define OVERTIME_RATE 1.5

struct employee
 {
 char first_name[10];
 char last_name[10];
 long id_number;
 float wage;
 float hours;
 float overtime;
 float gross;

 struct employee *next;
 };

/************************************************************************/
/*                      Function: Gross_pay_calc                        */
/*                                                                      */
/*  Purpose:    Calculates gross pay of an employee using hours and     */
/*              wage data that is already stored                        */
/*                                                                      */ 
/*                                                                      */
/*  Parameters: wage - Array of employee wages                          */
/*              hours- Array of number of hours worked by an employee   */
/*              grossPay- Gross Pay of an employee                      */
/*              size-number of employees to process                     */
/*                                                                      */
/*  Returns:    Stores grossPay to be referenced in another function output  */
/*                                                                       */
/************************************************************************/

 /* Function call to calculate gross pay. */
 void Gross_pay_calc (struct employee *emp1)
 { 
  /*Local Variable Declaration */
  struct employee *tmp;   /* tmp pointer value to current node */

            if ( tmp->hours <= STD_WORK_WEEK ) /* Calculates grossPay based on <40 or     >40 for OT */

            {
            tmp->gross = tmp->wage*tmp->hours;
            }

            else

            {
            tmp->gross = (tmp->wage*STD_WORK_WEEK)+((tmp->hours-STD_WORK_WEEK)* (tmp->wage*OVERTIME_RATE));
            } 

   }

 /*-----------------------------------------------------------------------------*/
 /*                                                                             */
 /* FUNCTION:  print_list                                                       */
 /*                                                                             */
 /* DESCRIPTION:  This function will print the contents of a linked             */
 /*               list.  It will traverse the list from beginning to the        */
 /*               end, printing the contents at each node.                      */
 /*                                                                             */
 /* PARAMETERS:   emp1 - pointer to a linked list                               */
 /*                                                                             */
 /* OUTPUTS:      None                                                          */
 /*                                                                             */
 /* CALLS:        None                                                          */
 /*                                                                             */
 /*-----------------------------------------------------------------------------*/
 void print_list(struct employee *emp1)
 {
    struct employee *tmp;   /* tmp pointer value to current node */
    int i = 0;              /* counts the nodes printed          */

        printf ("--------------------------------------------------------------\n");         /*Print Header To Screen */
        printf ("     Name \t     Clock# \t Wage \t Hours \t OT \t Gross\n");
        printf ("---------------------------------------------------------------\n");

    /* Start a beginning of list and print out each value               */
    /* loop until tmp points to null (remember null is 0 or false)      */

    for(tmp = emp1; tmp ; tmp = tmp->next)
    {
        i++;

        /* TODO - print other members as well */
        printf("\n %s %s %6d %8.2f %5.2f %7.2f\n",tmp->first_name,tmp->last_name,tmp->id_number,
                                                  tmp->wage,tmp->hours,tmp->gross);

     }

     printf("\n\nTotal Number of Employees = %d\n", i);

  }

 /*----------------------------------------------------------------------------*/
 /*                                                                            */
 /* FUNCTION:  main                                                            */
 /*                                                                            */
 /* DESCRIPTION:  This function will prompt the user for an employee           */
 /*               id and wage until the user indicates they are finished.      */
 /*               At that point, a list of id and wages will be                */
 /*               generated.                                                   */
  /*                                                                            */
 /* PARAMETERS:   None                                                         */
 /*                                                                            */
 /* OUTPUTS:      None                                                         */
 /*                                                                            */
 /* CALLS:        print_list                                                   */
 /*                                                                            */
 /*----------------------------------------------------------------------------*/
int main ()
{

char   answer[80];       /* to see if the user wants to add more employees */
int    more_data = 1;    /* flag to check if another employee is to be processed */
char   value;             /* gets the first character of answer */

struct employee *current_ptr,   /* pointer to current node */
                *head_ptr;       /* always points to first node */

  /* Set up storage for first node */
head_ptr = (struct employee *) malloc (sizeof(struct employee));
current_ptr = head_ptr;

while (more_data)
{
   /* Read in Employee ID and Hourly Wage */

    printf("\nEnter employee ID: ");
    scanf("%li", & current_ptr -> id_number);

    printf("\nEnter employee weekly wage: ");
    scanf("%f", & current_ptr -> wage);

    printf("\nEnter employee weekly hours: ");
    scanf("%f", & current_ptr -> hours);

    printf("\nEnter First Name: ");
    scanf("%s", & current_ptr -> first_name);

    printf("\nEnter Last Name: ");
    scanf("%s", & current_ptr -> last_name);

    printf("Would you like to add another employee? (y/n): ");
    scanf("%s", answer);

    Gross_pay_calc(head_ptr);

    /* Ask user if they want to add another employee */
    if ((value = toupper(answer[0])) != 'Y')
       {
       current_ptr->next = (struct employee *) NULL;
       more_data = 0; 
       }
    else
       {
       /* set the next pointer of the current node to point to the new node */
       current_ptr->next = (struct employee *) malloc (sizeof(struct employee));
      /* move the current node pointer to the new node */
       current_ptr = current_ptr->next;
       }
} /* while */

/* print out listing of all employee id's and wages that were entered */

print_list(head_ptr);

  printf("\n\nEnd of program\n");

 return 0;
 } 
```

我正在尝试使用 Gross_pay_calc 来计算我在请求中输入的每位员工的总工资。但是，当我尝试在 print_list 函数中打印 tmp->gross 值时，它无法正确计算。我不确定为什么会发生这种情况，并且会喜欢有关如何使其准确计算的任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T07:00:36.900

两件事，第一，你眼前的问题。如评论中所述，在 Gross_pay_calc 中，您正在通过不确定的指针访问内存，`tmp`. 它在被取消引用之前从未设置为有效内存，因此它是**未定义的行为**。尝试改用传入的参数`emp1`：

```
/* Function call to calculate gross pay. */
void Gross_pay_calc (struct employee *emp1)
{
    if ( emp1->hours <= STD_WORK_WEEK ) /* Calculates grossPay based on <40 or     >40 for OT */
    {
        emp1->gross = emp1->wage*emp1->hours;
    }
    else
    {
        emp1->gross = (emp1->wage*STD_WORK_WEEK) + 
                      ((emp1->hours-STD_WORK_WEEK) * (emp1->wage*OVERTIME_RATE));
    }
} 
```

其次，填充链表的算法工作量过大。一个简单的指针对指针可以使该循环*更加*简洁：

```
int main ()
{
    char answer[80];       /* to see if the user wants to add more employees */

    struct employee *head_ptr = NULL; /* the list head pointer */
    struct employee **next_ptr = &head_ptr; /*always holds the address of the next pointer to fill */

    do
    {   /* allocate new node wherever *next_ptr says to. initially it will be
           the head pointer. after that, the next-ptr of the last node added. */
        *next_ptr = calloc(1, sizeof(**next_ptr));

        /* Read in Employee ID and Hourly Wage */
        printf("\nEnter employee ID: ");
        scanf("%li", &(*next_ptr)->id_number);

        printf("\nEnter employee weekly wage: ");
        scanf("%f", &(*next_ptr)->wage);

        printf("\nEnter employee weekly hours: ");
        scanf("%f", &(*next_ptr)->hours);

        printf("\nEnter First Name: ");
        scanf("%s", (*next_ptr)->first_name);

        printf("\nEnter Last Name: ");
        scanf("%s", (*next_ptr)->last_name);

        Gross_pay_calc(*next_ptr);

        // move to the next pointer we'll be filling
        next_ptr = &(*next_ptr)->next;

        /* Ask user if they want to add another employee */
        printf("Would you like to add another employee? (y/n): ");
        scanf("%s", answer);
        if (toupper(answer[0]) != 'Y')
            break;

    }  while (1);

    // always set the last pointer to nothing.
    *next_ptr = NULL;

    /* print out listing of all employee id's and wages that were entered */
    print_list(head_ptr);

    printf("\n\nEnd of program\n");

    return 0;
} 
```

同样，打印设施也可以稍微清理一下：

```
void print_list(struct employee *emp1)
{
    int i = 0;              /* counts the nodes printed          */

    printf ("--------------------------------------------------------------\n");
    printf ("     Name \t     Clock# \t Wage \t Hours \t OT \t Gross\n");
    printf ("---------------------------------------------------------------\n");

    /* Start a beginning of list and print out each value               */
    /* loop until tmp points to null (remember null is 0 or false)      */
    for (;emp1; ++i, emp1 = emp1->next)
    {
        printf("\n %s %s %6ld %8.2f %5.2f %7.2f\n",
               emp1->first_name,emp1->last_name,emp1->id_number,
               emp1->wage,emp1->hours,emp1->gross);
    }
    printf("\n\nTotal Number of Employees = %d\n", i);
} 
```

# c# - WCF 死亡/停止，对象仍在内存中

> ID：15608882
> 
> 赞同：-1
> 
> 时间：2013-03-25T06:26:03.743
> 
> 标签：c#, wcf

我的 WCF 服务将大量数据（如 300 万行）加载到 SQL 和其他数据插入中，但有时当磁盘繁忙或需要更多时间时，WCF 函数会停止执行该数据插入并停止，但对象仍然存在在 WCF 内存中。我不知道数据插入是否会扰乱服务并且一切都冻结在 WCF 中的对象。没有异常或类似的东西抛出。该动作像完全冻结一样停止，在一些用于数据插入的磁盘活动之后没有磁盘活动。

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:50:40.307

此操作过程应为您提供调查问题所需的信息：

1.  将 VS 设置为在抛出时中断 ( `Debug`->`Exceptions...`和旁边的`Common Language Runtime Exceptions`check `thrown`。不管你是否`catch`有异常，VS 都会中断。(作为奖励，你还会看到你是否无意中吞下了异常，我怀疑可能是问题）
2.  在您的服务上启动调试会话（在 VS 中打开项目，转到`Debug`-> `Attach to process`->`w3wp.exe`在远程计算机上选择（[您需要在服务器上进行远程调试：MSDN 有详细信息](http://msdn.microsoft.com/en-us/library/vstudio/y7f5zaaa.aspx)）
3.  重现并看看会发生什么（因为出了问题，VS 应该停止并至少暗示出了什么问题）

# ios - 将 iPhone 应用程序（2009 年制作）升级到新版本（需要帮助）

> ID：15608883
> 
> 赞同：0
> 
> 时间：2013-03-25T06:26:05.137
> 
> 标签：ios, sqlite, core-data, upgrade

只是寻找一些指示、指导和保证，以使这一过渡尽可能顺利。

我创建了一个 iPhone 应用程序，它自 2009 年以来一直在商店中。最近我受到了更新它的启发，包括一些新功能，但也为现在更高分辨率的设备整理它。

我决定在一个新的 Xcode 项目中从头开始重新编写应用程序。

我的问题是：

*   我需要在我的新 Xcode 项目中配置哪些设置以确保它会覆盖和升级原始项目？（它只是捆绑 ID 和版本号吗？）

*   有没有办法在提交之前在设备/模拟器上进行测试？

*   原始项目使用 SQLITE，而新项目使用 Core Data。迁移数据的正确方法是什么？

如果您需要更多信息，请告诉我。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:46:02.007

> 我需要在我的新 Xcode 项目中配置哪些设置以确保它会覆盖和升级原始项目？（它只是捆绑 ID 和版本号吗？）

是的，但请确保*整个*捆绑包标识符匹配。Xcode 中目标的摘要窗格中仅显示部分捆绑包 ID。Xcode 中未显示包 ID 的 10 个字符前缀。基本上，您应该进入 iOS Provisioning Portal，单击“App ID”，并确保您的配置文件设置为使用与早期版本的应用程序相同的应用程序 ID。

> 有没有办法在提交之前在设备/模拟器上进行测试？

我会通过从 App Store 下载应用程序来做到这一点。（显然，这意味着您必须在设备上进行测试。）然后尝试从 Xcode 安装应用程序的更新副本。如果捆绑 ID 相同，我相信较新的版本应该替换 App Store 中的那个。

> 原始项目使用 SQLITE，而新项目使用 Core Data。迁移数据的正确方法是什么？

这与您在任何两种不同格式之间迁移的操作大致相同。确保新版本仍然可以从旧的 SQLite 数据文件中读取数据。编写代码，从旧文件中读取用户数据，然后将其写入新的 Core Data 模型。数据迁移似乎总是成为错误的来源——很难测试它在每种情况下都能完美运行。考虑到这一点，您可能希望建议用户在迁移之前将他们的数据同步/备份到 iTunes，或者至少避免立即删除旧文件。

# android - 无法将位置发送到 Android 模拟器

> ID：15608885
> 
> 赞同：0
> 
> 时间：2013-03-25T06:26:08.390
> 
> 标签：android

因此，我在我的 Android 项目中拥有获取位置所需的所有权限，但无论我做什么，我都无法向设备发送模拟位置。我尝试过从[`geo fix`](https://stackoverflow.com/questions/2279647/how-to-emulate-gps-location-in-the-android-emulator)控制台使用，我尝试过使用Eclipse中的[DDMS 透视图，以及其他所有内容。](https://stackoverflow.com/a/8966848/1291812)

我的模拟器只是拒绝获取位置。而且我知道这不是我的代码中的错误，因为有时它会起作用。

做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:28:03.117

在尝试这样做之后遇到了很多麻烦，我发现以下其中一项通常可以解决问题：

转到模拟器，转到设置。向下滚动到位置访问，然后关闭“访问我的位置”。然后重新打开它。尝试从 DDMS 角度或`geo fix`再次发送位置。

# android - 如何从android中的通话记录中获取号码？

> ID：15608894
> 
> 赞同：1
> 
> 时间：2013-03-25T06:26:53.437
> 
> 标签：android, call, contacts

我想通过活动结果的意图调用呼叫日志活动。所以从通话记录中选择一个号码并在活动结果中获取这个号码。因为这在android中是可能的。如果是这样，请帮助我如何从通话记录中获取号码。我使用以下代码，但它对我不起作用。

```
Intent showCallLog = new Intent(); 
showCallLog.setAction(Intent.ACTION_VIEW);
showCallLog.setType(CallLog.Calls.CONTENT_TYPE);
startActivityForResult(showCallLog,3); 
```

这不能恢复活动吗？请帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T16:09:43.540

我使用自己的版本进行了此操作。我使用了一个对话框并将光标交给了通话记录。这是功能：

```
public void getCallLog() {

    String[] callLogFields = { android.provider.CallLog.Calls._ID,
            android.provider.CallLog.Calls.NUMBER,
            android.provider.CallLog.Calls.CACHED_NAME /* im not using the name but you can*/};
    String viaOrder = android.provider.CallLog.Calls.DATE + " DESC";
    String WHERE = android.provider.CallLog.Calls.NUMBER + " >0"; /*filter out private/unknown numbers */

    final Cursor callLog_cursor = getActivity().getContentResolver().query(
            android.provider.CallLog.Calls.CONTENT_URI, callLogFields,
            WHERE, null, viaOrder);

    AlertDialog.Builder myversionOfCallLog = new AlertDialog.Builder(
            getActivity());

    android.content.DialogInterface.OnClickListener listener = new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialogInterface, int item) {
            callLog_cursor.moveToPosition(item);

            Log.v("number", callLog_cursor.getString(callLog_cursor
                    .getColumnIndex(android.provider.CallLog.Calls.NUMBER)));

            callLog_cursor.close();

        }
    };
    myversionOfCallLog.setCursor(callLog_cursor, listener,
            android.provider.CallLog.Calls.NUMBER);
    myversionOfCallLog.setTitle("Choose from Call Log");
    myversionOfCallLog.create().show();
} 
```

# file - 运行一个服务器中存在的批处理文件以检查另一服务器中的文件是否存在

> ID：15608895
> 
> 赞同：0
> 
> 时间：2013-03-25T06:26:53.470
> 
> 标签：file, batch-file

我的要求是检查`file_%y%-%m%-%d%-05-00.txt`特定路径中是​​否存在文件`\\servername\e$\folder\`。

批处理文件将放置在一台服务器 A 中，我必须检查服务器 A 和服务器 B 中是否存在`file_%y%-%m%-%d%-05-00.txt`in `\\servername\e$\folder\`。

我试图在变量中给出路径，但它不起作用。我试图直接给出路径，但这也不起作用。我的日志文件包含条目

```
Server: servername               
File file_2013-03-25-05-00.SEC HAS been found 
File file_2013-03-25-05-00.SEC HAS NOT been found 
```

我写的脚本如下：

```
set d=%date:~7,2%
set m=%date:~4,2%
set y=%date:~10,4%

ECHO Server: servername >> log.txt

ECHO .....................................

IF EXIST \\servername\e$\folder\file_%y%-%m%-%d%-05-00.txt (
GOTO file_found
) ELSE (
GOTO file_not_found)

:file_found
ECHO File file_%y%-%m%-%d%-05-00.txt HAS been found >> log.txt

:file_not_found
ECHO File file_%y%-%m%-%d%-05-00.txt >> log.txt 
```

请帮我找出错误是什么以及上述脚本中需要进行哪些修改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:39:41.900

与 Delphi 等语言不同，批处理只是逐行执行语句，而忽略`:file_found`or之类的标签`:file_not_found`。唯一使用标签的时间是在 a`GOTO`中，执行跳转到指定的目标标签（如`GOTO file_not_found`.

因此，当您执行时`GOTO file_found`，它会执行，然后继续执行标签`ECHO file...found`之后的下一条语句。`:file_not_found`

要更正，请插入

```
goto :eof 
```

上线后`ECHO...has been found`

请注意，特殊标签`:eof`（不区分大小写）在批处理中被预定义为“批处理文件的结尾” - 要使用此预定义，您**必须**使用`:EOF`- 和冒号，而不是`eof`.

* * *

找到了！！

由于问题看起来很明显 - 流过，生成了两条消息，我没有费心复制粘贴发布的代码，因为由于消息与代码文本不同，因此已对其进行了编辑***。***

流通问题已修复，但随后发现了一个**附加**问题 - 尽管文件实际上并不存在，但仍检测到该文件......

**我将评论中的实际**代码修补到原始问题中（即使现在仍在等待审查......）。

是的 - 非常正确 - 文件**被**检测到，尽管不存在...... [插入戏剧音乐]

这就是为什么要准确发布**正在**使用的代码（审查最少的喃喃自语）

`SET`开头的行似乎有**TRAILING SPACES**。因此，变量`y`,`m`和`d`有尾随空格并且正在执行的有效语句是

```
IF EXIST \\.....file_2013 03 25 -05-00.SEC (GOTO ... 
```

现在我不知道为什么解析器没有抛出这个问题，但我会把它放在一边。

治愈：（我必须进行更改以适应我的日期格式和网络资源，所以我不会发布**我**的代码）

```
@echo off 
set "d=%date:~0,2%"
set "m=%date:~3,2%"
set "y=%date:~6,4%" 
```

这应该有效，因为这些行上的任何尾随空格都将被忽略。

***记事本***因引起此类问题而闻名。我使用[EDITPLUS](http://www.editplus.com/)

# ios - iOS：从一个应用程序，如何打开其他已安装的应用程序？

> ID：15608900
> 
> 赞同：0
> 
> 时间：2013-03-25T06:27:05.753
> 
> 标签：ios, objective-c

有没有办法从我的应用程序打开另一个应用程序？如果我的应用程序有另一个应用程序的广告，并且该应用程序也安装在设备上，有没有办法从我的应用程序打开该应用程序？

谢谢

更新：看起来您需要知道应用程序的方案才能启动它，但是您不能在没有任何方案和 URL 的情况下就午餐应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:28:53.820

是的，您必须使用一个称为 URL 方案的概念：

[http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T06:29:11.010

这是在 iOS中使用[自定义 URL 方案的一个很好的教程](http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)

与教程中一样，您应该解析 URL 参数并将它们存储在此方法中的应用程序中使用：

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
  // Do something with the url here
} 
```

这里有几个例子……</p>

```
myapp://

myapp://some/path/here

myapp://?foo=1&amp;bar=2

myapp://some/path/here?foo=1&amp;bar=2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T06:28:49.133

是的，您可以使用 URL 方案打开另一个应用程序。看到这个[参考](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007899)。这里是[教程](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T06:36:21.540

它只是在 iPhone 中打开待办事项列表的示例，使用如下

指定要打开的应用名称和内容，此处“todolist://”为应用名称，其余为要打开的内容@“todolist://www.acme.com?Quarterly%20Report#200806231300”

```
NSURL *myURL = [NSURL URLWithString:@"todolist://www.acme.com?Quarterly%20Report#200806231300"];

[[UIApplication sharedApplication] openURL:myURL]; 
```

如果您仍然找不到正确的，请参阅苹果文档部分（与其他应用程序通信） [http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html)

# jquery - 焦点显示列表和删除列表上的小部件

> ID：15608907
> 
> 赞同：0
> 
> 时间：2013-03-25T06:27:28.440
> 
> 标签：jquery, html, css, widget

我有一个小部件，它是输入和按钮的包装器。我想显示输入焦点和按钮单击的下拉列表。它在按钮单击时工作正常，输入工作正常，只有一次之后不起作用。即使您选择了一个选项，它也不起作用....如果您使输入模糊，那么它会正常工作，直到您选择某些东西或使用按钮单击....下面是我的代码.....请解决任何问题。 ...................................

```
 input = $("<input>")
                .appendTo(wrapper)
                .val(value)
                .attr("title", "")
                .autocomplete({
                    delay: 0,
                    minLength: 0,
                    appendTo: wrapper,
                    source: function (request, response) {
                        var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i");

                        response(select.children("option").map(function () {
                            var text = $(this).text();
                            if (this.value && (!request.term || matcher.test(text)))
                                return {
                                    label: text,
                                    value: text,
                                    option: this
                                };
                        }));

                    },

                .focus(function () {                    
                    $(".ui-combobox").addClass("focus");                    

                    if (wasOpen) {
                        return;
                    }

                    input.autocomplete("search", "");
                })

                .blur(function () {                 
                    $(".ui-combobox").removeClass("focus");
                });

            // creating the anchor button
            $("<button></button>")
                .attr("tabIndex", -1)
                .addClass("br-r")
                .appendTo(wrapper)
                .mousedown(function () {
                    wasOpen = input.autocomplete("widget").is(":visible");
                })
                .click(function () {
                    input.focus();

                    if (wasOpen) {
                        return;
                    }

                    input.autocomplete("search", "");                   
                });
        }, 
```

以上只是处理所需功能的片段.........

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:58:42.747

试试这个作为输入

```
input = $("<input>")
                .appendTo(wrapper)
                .val(value)
                .attr("title", "")
                .autocomplete({
                    delay: 0,
                    minLength: 0,
                    appendTo: wrapper,
                    source: function (request, response) {
                        var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i");

                        response(select.children("option").map(function () {
                            var text = $(this).text();
                            if (this.value && (!request.term || matcher.test(text)))
                                return {
                                    label: text,
                                    value: text,
                                    option: this
                                };
                        }));

                    }})

                .focus(function () {                    
                    $(".ui-combobox").addClass("focus");                    

                    if (wasOpen) {
                        return;
                    }

                    input.autocomplete("search", "");
                })

                .blur(function () {                 
                    $(".ui-combobox").removeClass("focus");
                }); 
```

# asp.net - Debug模式和Release模式部署

> ID：15608915
> 
> 赞同：1
> 
> 时间：2013-03-25T06:28:11.850
> 
> 标签：asp.net, visual-studio-2010, visual-studio-debugging

我需要你的帮助来理解这一点。

在调试模式和发布模式下部署点网应用程序的主要区别是什么？
从开发人员的角度来看，它们与应用程序的效率和性能有何不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:33:33.237

Here is a similar question
你可以通过它来了解区别
[Visual Studio中的Debug和Release有什么区别？](https://stackoverflow.com/questions/367884/debug-release-difference)
[调试与发布性能](https://stackoverflow.com/questions/2446027/c-sharp-debug-vs-release-performance)

# java - 如何从 JButton 的操作中获取 JTextField 中的字符串？

> ID：15608917
> 
> 赞同：2
> 
> 时间：2013-03-25T06:28:23.103
> 
> 标签：java, swing, jbutton, actionlistener, jtextfield

一段时间以来，我一直在努力解决这个问题，在网上搜索，最后决定加入只是为了解决这个问题。所以我的困境是这样的。

```
addActionListner(new ActionListener(){
public void actionPerformed(ActionEvent e)
{
    //some code
}
}); 
```

有些代码实际上可以从 JTextField 中提取（为了参数，让我们称它为 myText）？如果可能的话，我怎么能调用 ActionListner？那么当单击按钮时，它实际上执行了 myText 中 ActionListener 的 actionPeformed 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T18:40:48.763

Add the action listener to the button and then retrieve myText's contents in the button's action listener. Hope it helps.

Assuming your button is named something like "myButton":

```
String someString = "";

myButton.addActionListner(new ActionListener(){
    public void actionPerformed(ActionEvent e) {
       //this will give you myText's contents. Do what you will with them.
       someString = myText.getText();
    }
}); 
```

Now you should be able to do whatever you want with the contents.

# sql - 连接时的非聚集索引

> ID：15608920
> 
> 赞同：3
> 
> 时间：2013-03-25T06:28:33.867
> 
> 标签：sql, sql-server, sql-server-2008, indexing, non-clustered-index

我一直想知道在连接上使用非聚集索引是否会提高性能？喜欢

```
INNER JOIN FaceList fl ON fl.FaceListID = flf.FaceListID 
```

在上面的连接中，当我在 FaceListID 上有非聚集索引时，我可以获得性能优势，因为它的独特组合并返回明确的结果

任何链接或建议表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T06:55:59.873

您肯定需要在外键列上放置非聚集索引：

阅读更多：

[http://www.sqlperformance.com/2012/11/t-sql-queries/benefits-indexing-foreign-keys](http://www.sqlperformance.com/2012/11/t-sql-queries/benefits-indexing-foreign-keys)

# menu - Excel 2010 中的工具参考命令在哪里？

> ID：15608922
> 
> 赞同：1
> 
> 时间：2013-03-25T06:28:43.290
> 
> 标签：menu, excel-2010

我需要检查我的文件引用，但我似乎没有“工具”菜单，并且“引用”命令没有出现在自定义列表中

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T06:47:00.980

我认为您正在寻找检查文件引用的菜单选项不是直接从 Excel 访问的，而是在 VBA 界面内。

转到“开发人员”选项卡，然后转到“Visual Basic”。在那里的菜单选项中，您将找到一个带有引用选项的工具菜单，可让您添加和删除文件引用

# google-app-engine - 致命的 devappserver2 错误：Appengine 1.7.6 和 1.7.5 python 2.7、win7 中的 PYTHON_EGG_CACHE

> ID：15608925
> 
> 赞同：1
> 
> 时间：2013-03-25T06:28:49.270
> 
> 标签：google-app-engine, windows-7, python-2.7

我尝试使用 Appengine SDK 版本 1.7.6，但收到致命错误（如下所述），因此恢复到 1.7.5，我的应用程序运行良好。但是，当我尝试在 1.7.5 中运行实验性 devappserver 时，我在 1.7.6 中看到的错误再次出现。我在 win 7 机器上运行 Python 2.7。AppEngine 的标准安装选择。

这些错误消息涉及与 PYTHON_EGG_CACHE 相关的权限，但是... - 1) 它们不会发生在“旧”dev_appserver 上 - 2) 应用程序可以成功地将文件提取到指定的位置。实际上，我将 PYTHON_EGG_CACHE 的路径更改为另一个位置，赋予它完全开放的权限，但仍然收到错误。- 3) 我的站点包中有 pyyaml，所以我不确定它为什么需要临时提取。

任何寻求解决此问题的帮助将不胜感激，因为我将被迫在几个发布时间内使用新的 devappserver。

下面的命令行错误转储：

```
python "C:\Program Files (x
86)\Google\google_appengine\devappserver2.py" .
WARNING  2013-03-25 19:10:41,029 devappserver2.py:497] devappserver2.py is curre
ntly experimental but will eventually replace dev_appserver.py in the App Engine
 Python SDK. For more information and to report bugs, please see: http://code.go
ogle.com/p/appengine-devappserver2-experiment/
INFO     2013-03-25 19:10:41,171 appcfg.py:618] Checking for updates to the SDK.

WARNING  2013-03-25 19:10:44,525 simple_search_stub.py:975] Could not read searc
h indexes from c:\users\ben\appdata\local\temp\appengine.dev~upskillme-main.Ben\
search_indexes
INFO     2013-03-25 19:10:44,539 api_server.py:148] Starting API server at: http
://localhost:49302
INFO     2013-03-25 19:10:44,555 dispatcher.py:96] Starting server "default" run
ning at: http://localhost:8080
INFO     2013-03-25 19:10:44,571 admin_server.py:112] Starting admin server at:
http://localhost:8000
Traceback (most recent call last):
  File "C:\Program Files (x86)\Google\google_appengine\_python_runtime.py", line
 150, in <module>
    run_file(__file__, globals())
  File "C:\Program Files (x86)\Google\google_appengine\_python_runtime.py", line
 146, in run_file
    execfile(script_path, globals_)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\de
vappserver2\python\runtime.py", line 39, in <module>
    from google.appengine.ext.remote_api import remote_api_stub
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\ext\remo
te_api\remote_api_stub.py", line 75, in <module>
    import yaml
  File "C:\Program Files (x86)\Google\google_appengine\lib\yaml-3.10\yaml\__init
__.py", line 14, in <module>
    from cyaml import *
  File "C:\Program Files (x86)\Google\google_appengine\lib\yaml-3.10\yaml\cyaml.
py", line 5, in <module>
    from _yaml import CParser, CEmitter
  File "C:\Python27\lib\site-packages\pyyaml-3.10-py2.7-win32.egg\_yaml.py", lin
e 7, in <module>
  File "C:\Python27\lib\site-packages\pyyaml-3.10-py2.7-win32.egg\_yaml.py", lin
e 4, in __bootstrap__
  File "C:\Python27\lib\site-packages\pkg_resources.py", line 882, in resource_f
ilename
    self, resource_name
  File "C:\Python27\lib\site-packages\pkg_resources.py", line 1351, in get_resou
rce_filename
    self._extract_resource(manager, self._eager_to_zip(name))
  File "C:\Python27\lib\site-packages\pkg_resources.py", line 1406, in _extract_
resource
    manager.extraction_error()  # report a user-friendly error
  File "C:\Python27\lib\site-packages\pkg_resources.py", line 928, in extraction
_error
    raise err
pkg_resources.ExtractionError: Can't extract file(s) to egg cache

The following error occurred while trying to extract file(s) to the Python egg
cache:

  [Error 5] Access is denied: 'C:\\Users\\Ben\\AppData\\Roaming\\Python-Eggs\\py
yaml-3.10-py2.7-win32.egg-tmp\\_yaml.pyd'

The Python egg cache directory is currently set to:

  C:\Users\Ben\AppData\Roaming\Python-Eggs

Perhaps your account does not have write access to this directory?  You can
change the cache directory by setting the PYTHON_EGG_CACHE environment
variable to point to an accessible directory.

Exception in thread Thread-4:
Traceback (most recent call last):
  File "C:\Python27\lib\threading.py", line 551, in __bootstrap_inner
    self.run()
  File "C:\Python27\lib\threading.py", line 504, in run
    self.__target(*self.__args, **self.__kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\de
vappserver2\server.py", line 1045, in _loop_adjusting_instances
    self._adjust_instances() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:07:13.873

如果有人遇到同样的问题，对我有用的解决方案如下：

*   将 python27 站点包目录中的 PyYAML-3.10-py2.7-win32.egg 解压缩到站点包中的新目录中。您需要将其解压缩到类似 NEWPyYAML-3.10-py2.7-win32.egg 的目录名称中以避免名称冲突。
*   重命名你原来的鸡蛋。到其他东西（例如，OLDPyYAML-3.10-py2.7-win32.egg）。
*   将新目录重命名为 PyYAML-3.10-py2.7-win32.egg

所有对 egg 的引用现在实际上将指向站点包中包含解压缩的 python 文件的目录。新的 devappserver 应该能够使用它。

不确定如何在 Windows 中解压缩鸡蛋？请参见此处（假设您安装了 Winzip 或类似软件）： http: [//mail.python.org/pipermail/chicago/2007-July/002301.html](http://mail.python.org/pipermail/chicago/2007-July/002301.html)

# php - 使用单元格值作为参数将javascript函数应用于表格的每一行？

> ID：15608930
> 
> 赞同：1
> 
> 时间：2013-03-25T06:29:18.493
> 
> 标签：php, javascript, arrays, timer, countdown

我有一个显示用户当前拍卖的表（从 php 数组生成）。此表的其中一列显示拍卖的剩余时间。我正在使用一个 jquery 倒计时插件（[http://www.keith-wood.name/countdown.html](http://www.keith-wood.name/countdown.html)），它使剩余时间倒计时为零。

如何使用不同的剩余时间将倒计时功能应用于每一行？

```
$(function () {
    $('#countdown').countdown({until: +remainingTime, format: 'HMS', compact: true});
}); 
```

我正在尝试，但似乎没有工作：

```
 foreach($tradePile['auctionInfo'] as $auction)
 {                      
     if ($auction['tradeState'] == "active")
     {
        $i++;
        echo '<tr>';
        echo '<td><a href="player.php?id='.$auction['itemData']['resourceId']. '">'.$stats['first_name'].' '.$stats['last_name'].'</a></td>';
        echo'<td>'.$auction['itemData']['rating'].'</td>';
        echo'<td>'.$buyNowPrice.'</td>';
        echo'<td>'.$auction['startingBid'].'</td>'; 
        //remaining time for each auction:
        //$auction['expires']
        ?>
        <td>
           <script>$(function () {$('#countdown<?php echo $i; ?>').countdown({until: +<?php echo $auction['expires'] ?>, format: 'HMS', compact: true});});</script>
           <div id="countdown<?php echo $i; ?>"></div>
        </td>
        <?php
        echo'</tr>';
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:43:21.200

使用 each 循环遍历所有表格行。不要用 PHP 编写 JS 脚本。

创建这样的表结构，使用增量`i`变量定义 id：

```
<table id="myTable">
    <tr id="1" expire="55">
    <td id="countdown-1">....</td>
        ...
    </tr>
</table> 
```

和这样的JS代码：

```
$(function () {
    $('#myTable tr').each(function(){
        var remainingTime = $(this).attr('expire');
        var id = $(this).attr('id');
        $('#countdown-'+id).countdown({until: +remainingTime, format: 'HMS', compact: true});
    });
}); 
```

# avfoundation - MAC OSX AVFoundation 视频采集

> ID：15608931
> 
> 赞同：4
> 
> 时间：2013-03-25T06:29:25.790
> 
> 标签：avfoundation

我是 MAC OSX 开发的新手。我想在 OSX 10.7 上使用 AVFoundation 将视频捕获为原始帧。我不了解为相机设备设置特定的视频分辨率，不知何故我使用 VideoSettings 设置，但如果我设置为 320x240，它会以 320x176 捕获。我不明白是否有任何 API 调用不匹配。

请帮我解决这个问题。等待您的回复......提前谢谢......

问候，阿南德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-19T05:02:48.333

user692178 的回答有效。但更简洁的方法是在对象上设置`kCVPixelBufferWidthKey`和`kCVPixelBufferHeightKey`选项。`AVCaptureVideoDataOutput`这样就不需要`AVCaptureDevice lockForConfigration`在开始之前通过调用来获得对设备的独占访问权限`AVCaptureSession`。最小样本如下。

```
_session = [[AVCaptureSession alloc] init];
_sessionInput = [AVCaptureDeviceInput deviceInputWithDevice:_device error:&error];
_sessionOutput = [[AVCaptureVideoDataOutput alloc] init];

NSDictionary *pixelBufferOptions = [NSDictionary dictionaryWithObjectsAndKeys:
                              [NSNumber numberWithDouble:width], (id)kCVPixelBufferWidthKey,
                              [NSNumber numberWithDouble:height], (id)kCVPixelBufferHeightKey,
                              [NSNumber numberWithUnsignedInt:kCVPixelFormatType_32BGRA], (id)kCVPixelBufferPixelFormatTypeKey,
                              nil];
[_sessionOutput setVideoSettings:pixelBufferOptions]; 
```

注意：此宽度/高度将覆盖会话预设宽度/高度（如果不同）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T16:00:09.683

在 AVCaptureDevice 中有两个属性。格式和活动格式。format 将返回 AVCaptureDeviceFormat 的 NSArrary，其中包含 cam 公开的所有格式。您可以从此列表中选择任何一种格式并将其设置为 activeFormat。确保在通过调用 AVCaptureDevice lockForConfigration 获得对设备的独占访问权限后设置格式。设置格式后，使用 AVCaptureDevice unlockForConfigration 释放锁定。然后启动 AVCaptureSession，它将为您提供您设置的格式的视频帧。

AVCaptureFormat 是 CMFormatDescription 的包装器。CMVideoFotmatDescription 是 CMFormatDescription 的具体子类。使用 CMVideoFormatDescriptionGetDimentions() 获取设置格式的宽度和高度。使用 CMFormatDescriptionGetMediaSubType() 获取视频编解码器。对于 raw fotmats 视频编解码器主要是 yuvs 或 vuy2。对于压缩格式，它的 h264、dmb1(mjpeg) 等等。

# java - 如何在显示标签中指定排序图标的位置

> ID：15608932
> 
> 赞同：2
> 
> 时间：2013-03-25T06:29:42.413
> 
> 标签：java, css, jsp, jquery-ui-sortable, displaytag

我已经使用“sortable = true”对displaytag中的列进行了排序......但是我想在列的最右边显示排序图标......我该怎么做？在这里我只提到了一个专栏供您参考...

```
<display:column  property="issuerName" scope="col" sortable="true" title="${issuerName}"  headerClass="hixTableHeader" class="displayTagtd" /> 
```

CSS 代码：

```
th.sortable a {
    background-image: url(../images/common/header/arrow_off.png);
    background-repeat: no-repeat;
    background-position:right;
    text-decoration: none;
    padding-right:25px;
    padding-left: 25px;

}

th.order1 a{
    background-image: url(../images/common/header/arrow_down.png);
    background-position:right;
    background-repeat: no-repeat;
    text-decoration: none;
    padding-right:25px;
    padding-left: 25px;
}

th.order2 a{
    background-image: url(../images/common/header/arrow_up.png);
    background-repeat: no-repeat;
    text-decoration: none;
    background-position:right;
    padding-right:25px;
    padding-left: 25px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:39:35.290

尝试把它放在`<th>`而不是`<a>`. `<a>`是一个`display:inline`元素，因此它不会拉伸`<th>`.

```
th.sortable {
    background-image: url(../images/common/header/arrow_off.png);
    background-repeat: no-repeat;
    background-position:right;
}

th.order1 {
    background-image: url(../images/common/header/arrow_down.png);
    background-position:right;
    background-repeat: no-repeat;
}

th.order2 {
    background-image: url(../images/common/header/arrow_up.png);
    background-repeat: no-repeat;
    background-position:right;
} 
```

或者，您可以应用以下内容，这将`<a>`填充`<th>`可能更可取的内容，因为您可以单击 上的任意位置`<th>`来激活排序。

```
th a {
    display:block;
    width:100%;
    height:100%;
} 
```

## 更新

确保您也保留当前样式，以保留下划线，您需要确保它仍然针对您的`<a>`标签。您可以添加它以定位`<a>`标签中的所有`<th>`标签。

```
th a {
    text-underline:none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:40:51.370

您可能必须更改包含 html 代码的模板文件`<display:column>`

# python - Python3：寻找 gevent 和 pylibmc/python-memcached 的替代品

> ID：15608933
> 
> 赞同：10
> 
> 时间：2013-03-25T06:29:44.777
> 
> 标签：python, python-3.x, gevent, python-memcached

所以，我决定用 python3 编写我的下一个项目，为什么？由于 Ubuntu 计划在明年内逐步放弃对 Python2 的所有支持，仅支持 Python3。（从 Ubuntu 13.04 开始）

gevent 和 memcached 模块没有正式移植到 Python3。

对于 gevent 和 pylibmc 或 python-memcached，已经正式移植到 Python3 的替代方案有哪些？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-15T07:03:48.483

[Circuits](https://bitbucket.org/prologic/circuits/)现在支持 Python 3，试试吧，它很棒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-19T10:00:56.873

for memcached you probably know alternative: redis+python3

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T13:22:06.357

I am stuck in the same point.

Its core is `greenlet 0.4.0`, which is available in python 3, but not the full libraries (`gevent`, `evenlet` or `concurrence`).

There are some attempts to migrate it, but with no luck.

You can check packages availability in this website: [http://py3ksupport.appspot.com/pypi/greenlet](http://py3ksupport.appspot.com/pypi/greenlet)

If I find any alternative I would let you know.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-29T10:44:31.893

[pymemcache](https://github.com/pinterest/pymemcache)：一个全面的、快速的、纯 Python 的 memcached 客户端。

与其他客户的比较

> pylibmc
> 
> pylibmc 库是 libmemcached 的包装器，用 C 实现。它速度快，实现了一致的散列、完整的 memcached 协议和超时。它不提供对“noreply”标志的访问。它也不是纯 Python，因此将它与 gevent 之类的库一起使用是不可能的，并且它对 libmemcached 的依赖带来了挑战（例如，它必须针对它将在运行时使用的相同版本的 libmemcached 构建）。
> 
> Python 内存缓存
> 
> python-memcache 库实现了整个 memcached 文本协议，所有套接字调用都有一个超时，并且具有灵活的序列化和反序列化方法。它也是完全用 Python 编写的，因此可以很好地与 gevent 等库配合使用。但是，它与使用线程局部变量有关，没有实现“noreply”，不能将错误视为缓存未命中，并且比 pylibmc 和 pymemcache 都慢。它还与处理 memcached 服务器集群的特定方法相关联。

# android - 不使用支持库的 Android 4.0、4.1 (<4.2) 中嵌套片段的最佳实践

> ID：15608935
> 
> 赞同：115
> 
> 时间：2013-03-25T06:29:59.653
> 
> 标签：android, android-fragments, android-support-library, android-nested-fragment

我正在为 4.0 和 4.1 平板电脑编写一个应用程序，**我不想为此使用支持库**（如果不需要），但只使用 4.x api。

所以我的目标平台非常明确地定义为：>= 4.0 和 <= 4.1

该应用程序具有多窗格布局（两个片段，左侧一个小片段，右侧一个内容片段）和一个带有选项卡的操作栏。

与此类似：

![在此处输入图像描述](../Images/c8c732c28001b196a9fde5458a880880.png)

单击操作栏上的选项卡会更改“外部”片段，然后内部片段是具有两个嵌套片段的片段（1\. 左侧小列表片段，2\. 宽内容片段）。

我现在想知道替换片段尤其是嵌套片段的最佳做法是什么。ViewPager 是支持库的一部分，此类没有本机 4.x 替代方案。在我的意义上似乎被“弃用”。- [http://developer.android.com/reference/android/support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

然后我阅读了 Android 4.2 的发行说明，关于`ChildFragmentManager`，这将是一个很好的选择，但我的目标是 4.0 和 4.1，所以这也不能使用。

`ChildFragmentManager`仅在 4.2 中可用

*   [http://developer.android.com/about/versions/android-4.2.html#NestedFragments](http://developer.android.com/about/versions/android-4.2.html#NestedFragments)
*   [http://developer.android.com/reference/android/app/Fragment.html#getChildFragmentManager()](http://developer.android.com/reference/android/app/Fragment.html#getChildFragmentManager())

不幸的是，即使在整个 Android 开发人员指南中，也几乎没有任何好的示例可以展示在没有支持库的情况下使用 Fragment 的最佳实践；尤其是关于嵌套片段的任何内容。

**所以我想知道：如果不使用支持库和它附带的所有东西，就不可能编写带有嵌套片段的 4.1 应用程序吗？（需要使用 FragmentActivity 而不是 Fragment 等？）** 或者最佳实践是什么？

* * *

我目前在开发中遇到的问题正是这种说法：

*   [http://developer.android.com/about/versions/android-4.2.html#NestedFragments](http://developer.android.com/about/versions/android-4.2.html#NestedFragments)

> Android 支持库现在还支持嵌套片段，因此您可以在 Android 1.6 及更高版本上实现嵌套片段设计。
> 
> 注意：当布局包含`<fragment>`. 仅当动态添加到片段时才支持嵌套片段。

因为我在 XML 中定义了嵌套片段，这显然会导致如下错误：

```
Caused by: java.lang.IllegalArgumentException: Binary XML file line #15: Duplicate id 0x7f090009, tag frgCustomerList, or parent id 0x7f090008 with another fragment for de.xyz.is.android.fragment.CustomerListFragment_ 
```

目前，我自己总结：即使在 4.1 上，当我什至不想针对 2.x 平台时，如果没有支持库，截图中所示的嵌套片段是不可能的。

（这实际上可能更像是一个 wiki 条目而不是一个问题，但也许其他人之前已经管理过它）。

**更新：**

一个有用的答案是：[Fragment Inside Fragment](https://stackoverflow.com/questions/6672066/fragment-inside-fragment/6672688#6672688)

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-06-16T10:21:07.103

## 限制

`FragmentManager`因此，无论您使用哪个版本，xml 都无法将片段嵌套在另一个片段中。

所以你必须通过代码添加片段，这似乎是个问题，但从长远来看，你的布局会变得超级灵活。

所以嵌套而不使用`getChildFragmentManger`？背后的本质`childFragmentManager`是它延迟加载，直到前一个片段事务完成。当然，它只在 4.2 或支持库中自然得到支持。

## 没有 ChildManager 的嵌套 - 解决方案

解决方案，当然！我已经这样做了很长时间了（自`ViewPager`宣布以来）。

见下文; 这是`Fragment`延迟加载的 a，因此`Fragment`可以在其中加载 s。

它非常简单，`Handler`是一个非常方便的类，在当前片段事务完成提交后，处理程序实际上会在主线程上等待一个空间来执行（因为片段会干扰它们在主线程上运行的 UI）。

```
// Remember this is an example, you will need to modify to work with your code
private final Handler handler = new Handler();
private Runnable runPager;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    return inflater.inflate(R.layout.frag_layout, container, false);
}

@Override
public void onActivityCreated(Bundle savedInstanceState)
{
    super.onActivityCreated(savedInstanceState);
    runPager = new Runnable() {

        @Override
        public void run()
        {
          getFragmentManager().beginTransaction().addFragment(R.id.frag_container, MyFragment.newInstance()).commit();
        }
    };
    handler.post(runPager);
}

/**
 * @see android.support.v4.app.Fragment#onPause()
 */
@Override
public void onPause()
{
    super.onPause();
    handler.removeCallbacks(runPager);
} 
```

我不会认为它是“最佳实践”，但我有使用这个 hack 的实时应用程序，我还没有遇到任何问题。

我也使用这种方法嵌入视图寻呼机 - [https://gist.github.com/chrisjenx/3405429](https://gist.github.com/chrisjenx/3405429)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-04T15:13:17.453

在 API 17 之前的版本中执行此操作的最佳方法是根本不执行此操作。试图实现这种行为会导致问题。然而，这并不是说它不能令人信服地使用当前的 API 14 伪造。我所做的如下：

1 - 查看片段之间的通信[http://developer.android.com/training/basics/fragments/communicating.html](http://developer.android.com/training/basics/fragments/communicating.html)

2 - 将您的布局 xml FrameLayout 从现有的 Fragment 移动到 Activity 布局，并通过将高度设置为 0 来隐藏它：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:tools="http://schemas.android.com/tools"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent">
<FrameLayout android:id="@+id/content"
          android:layout_width="300dp"
          android:layout_height="match_parent" />

<FrameLayout android:id="@+id/lstResults"
             android:layout_width="300dp"
             android:layout_height="0dp"
             android:layout_below="@+id/content"
             tools:layout="@layout/treeview_list_content"/>

<FrameLayout android:id="@+id/anomalies_fragment"
             android:layout_width="match_parent"
             android:layout_height="match_parent"
        android:layout_toRightOf="@+id/content" /> 
```

3 - 在父片段中实现接口

```
 OnListener mCallback;

// Container Activity must implement this interface
public interface OnListener 
{
    public void onDoSomethingToInitChildFrame(/*parameters*/);
    public void showResults();
    public void hideResults();
}

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);

    // This makes sure that the container activity has implemented
    // the callback interface. If not, it throws an exception
    try {
        mCallback = (OnFilterAppliedListener) activity;
    } catch (ClassCastException e) {
        throw new ClassCastException(activity.toString()
                + " must implement OnListener");
    }
}

@Override
public void onActivityCreated(Bundle savedInstanceState) 
{
    super.onActivityCreated(savedInstanceState);

    mCallback.showResults();
}

@Override
public void onPause()
{
    super.onPause();

    mCallback.hideResults();
}

public void onClickButton(View view)
{
    // do click action here

    mCallback.onDoSomethingToInitChildFrame(/*parameters*/);
} 
```

4 - 在父Activity中实现接口

公共类 YourActivity 扩展 Activity 实现 yourParentFragment.OnListener {

```
public void onDoSomethingToInitChildFrame(/*parameters*/)
{
    FragmentTransaction ft = getFragmentManager().beginTransaction();
    Fragment childFragment = getFragmentManager().findFragmentByTag("Results");
    if(childFragment == null)
    {
        childFragment = new yourChildFragment(/*parameters*/);
        ft.add(R.id.lstResults, childFragment, "Results");
    }
    else
    {
        ft.detach(childFragment);

        ((yourChildFragment)childFragment).ResetContent(/*parameters*/);

        ft.attach(childFragment);
    }
    ft.commit();

    showResultsPane();
}

public void showResults()
{
    FragmentTransaction ft = getFragmentManager().beginTransaction();
    Fragment childFragment = getFragmentManager().findFragmentByTag("Results");
    if(childFragment != null)
        ft.attach(childFragment);
    ft.commit();

    showResultsPane();
}

public void showResultsPane()
{
    //resize the elements to show the results pane
    findViewById(R.id.content).getLayoutParams().height = ViewGroup.LayoutParams.WRAP_CONTENT;
    findViewById(R.id.lstResults).getLayoutParams().height = ViewGroup.LayoutParams.WRAP_CONTENT;
}

public void hideResults()
{
    //resize the elements to hide the results pane
    findViewById(R.id.content).getLayoutParams().height = ViewGroup.LayoutParams.MATCH_PARENT;
    findViewById(R.id.lstResults).getLayoutParams().height = 0;

    FragmentTransaction ft = getFragmentManager().beginTransaction();
    Fragment childFragment = getFragmentManager().findFragmentByTag("Results");
    if(childFragment != null)
        ft.detach(childFragment);
    ft.commit();
} 
```

}

5 - 享受吧，通过这种方法，您可以获得与 API 17 之前的环境中的 getChildFragmentManager() 函数相同的流畅功能。您可能已经注意到子片段不再是父片段的子片段，而是活动的子片段，这确实是无法避免的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-03T09:51:57.417

由于 NavigationDrawer、TabHost 和 ViewPager 的组合，我不得不处理这个确切的问题，由于 TabHost 的原因，支持库的使用很复杂。然后我还必须支持 JellyBean 4.1 的 min API，因此不能选择使用带有 getChildFragmentManager 的嵌套片段。

所以我的问题可以提炼为...

```
TabHost（用于顶级）
+ ViewPager（仅用于顶级选项卡式片段之一）
= 需要嵌套片段（JellyBean 4.1 不支持）
```

我的解决方案是在没有实际嵌套片段的情况下创建嵌套片段的错觉。我通过让主要活动使用 TabHost 和 ViewPager 来管理两个同级视图来做到这一点，它们的可见性是通过在 0 和 1 之间切换 layout_weight 来管理的。

```
//Hide the fragment used by TabHost by setting height and weight to 0
LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, 0, 0);
mTabHostedView.setLayoutParams(lp);
//Show the fragment used by ViewPager by setting height to 0 but weight to 1
lp = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, 0, 1);
mPagedView.setLayoutParams(lp); 
```

只要我手动管理相关的布局权重，这有效地允许我的假“嵌套片段”作为独立视图运行。

这是我的activity_main.xml：

```
<android.support.v4.widget.DrawerLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/drawer_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context="com.ringofblades.stackoverflow.app.MainActivity">

    <TabHost
        android:id="@android:id/tabhost"
        android:layout_width="match_parent"
        android:layout_height="match_parent">
        <LinearLayout android:orientation="vertical"
            android:layout_width="match_parent"
            android:layout_height="match_parent">
            <FrameLayout android:id="@android:id/tabcontent"
                android:background="@drawable/background_image"
                android:layout_width="match_parent"
                android:layout_weight="0.5"
                android:layout_height="0dp"/>
            <android.support.v4.view.ViewPager
                xmlns:tools="http://schemas.android.com/tools"
                android:id="@+id/pager"
                android:background="@drawable/background_image"
                android:layout_width="match_parent"
                android:layout_weight="0.5"
                android:layout_height="0dp"
                tools:context="com.ringofblades.stackoverflow.app.MainActivity">
                <FrameLayout
                    android:id="@+id/container"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" />
            </android.support.v4.view.ViewPager>
            <TabWidget android:id="@android:id/tabs"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" />
        </LinearLayout>
    </TabHost>

    <fragment android:id="@+id/navigation_drawer"
        android:layout_width="@dimen/navigation_drawer_width"
        android:layout_height="match_parent"
        android:layout_gravity="start"
        android:name="com.ringofblades.stackoverflow.app.NavigationDrawerFragment"
        tools:layout="@layout/fragment_navigation_drawer" />
</android.support.v4.widget.DrawerLayout> 
```

请注意，“@+id/pager”和“@+id/container”是具有“android:layout_weight="0.5"' 和 'android:layout_height="0dp"' 的兄弟姐妹。这样我就可以在任何屏幕尺寸的预览器中看到它。无论如何，它们的权重将在运行时在代码中进行操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-13T10:36:05.747

尽管 OP 可能有特殊情况阻止他使用支持库，但大多数人应该使用它。Android 文档推荐它，它将使您的应用程序提供给尽可能广泛的受众。

在[我更完整的答案](https://stackoverflow.com/a/39467807/3681880)中，我做了一个示例，演示如何将嵌套片段与支持库一起使用。

[![在此处输入图像描述](../Images/8dab80c082349a165eac3c21c53fcb53.png)](https://i.stack.imgur.com/0LmzJ.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-07T21:39:26.757

Building on @Chris.Jenkins answer, this is the solution that has been working well for me, for removing fragment(s) during life cycle events (which have a tendency to throw IllegalStateExceptions). This uses a combination of the Handler approach, and an Activity.isFinishing() check (otherwise it will throw an error for "Can not perform this action after onSaveInstanceState).

```
import android.app.Activity;
import android.os.Handler;
import android.support.annotation.Nullable;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;

public abstract class BaseFragment extends Fragment {
    private final Handler handler = new Handler();

    /**
     * Removes the {@link Fragment} using {@link #getFragmentManager()}, wrapped in a {@link Handler} to
     * compensate for illegal states.
     *
     * @param fragment The {@link Fragment} to schedule for removal.
     */
    protected void removeFragment(@Nullable final Fragment fragment) {
        if (fragment == null) return;

        final Activity activity = getActivity();
        handler.post(new Runnable() {
            @Override
            public void run() {
                if (activity != null && !activity.isFinishing()) {
                    getFragmentManager().beginTransaction()
                            .remove(fragment)
                            .commitAllowingStateLoss();
                }
            }
        });
    }

    /**
     * Removes each {@link Fragment} using {@link #getFragmentManager()}, wrapped in a {@link Handler} to
     * compensate for illegal states.
     *
     * @param fragments The {@link Fragment}s to schedule for removal.
     */
    protected void removeFragments(final Fragment... fragments) {
        final FragmentManager fragmentManager = getFragmentManager();
        final FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();

        for (Fragment fragment : fragments) {
            if (fragment != null) {
                fragmentTransaction.remove(fragment);
            }
        }

        final Activity activity = getActivity();
        handler.post(new Runnable() {
            @Override
            public void run() {
                if (activity != null && !activity.isFinishing()) {
                    fragmentTransaction.commitAllowingStateLoss();
                }
            }
        });
    }
} 
```

Usage:

```
class MyFragment extends Fragment {
    @Override
    public void onDestroyView() {
        removeFragments(mFragment1, mFragment2, mFragment3);
        super.onDestroyView();
    }
} 
```

# jquery - 具有先前默认设置值的 jQuery Star Rating Plugin 回调函数

> ID：15608936
> 
> 赞同：1
> 
> 时间：2013-03-25T06:30:00.297
> 
> 标签：jquery, rating, rating-system

我正在使用[jQuery Star Rating Plugin](http://www.fyneworks.com/jquery/star-rating/)。加载页面时，应设置动态值，并可以在 jquery 对话框中使用新的选定值更改动态值。我有这样的事情：

```
 $("input#currentRatingDisplay").rating('select', '${rating}');// dynamic value that does not get selected?!?   

    $("input#currentRatingDisplay").rating({
        callback: function(value, link){
            $("#rateIt").rating('select', value, false); // stars in ui dialog to get persisted in the db  
                $("#dialog-rating" ).dialog("open");
            }
    }); 
```

在对话框中将值传递给星星的回调函数有效，但问题是未选择初始评级。有任何想法吗？另外 - 有没有办法读取重置按钮？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:35:15.630

不需要javascript来做到这一点。正如网站所说：使用选中的属性来指定控件的初始/默认值。

所以像：

```
<c:forEach var="random" items="${item}">
   <c:if test="${fn:item == rating}">
      <input name="star2" type="radio" class="star" checked="checked"/>
   <c: else>
      <input name="star2" type="radio" class="star"/>
</c:forEach> 
```

# android - 不允许将 Android 应用程序安装在仅支持 WiFi 的设备上

> ID：15608944
> 
> 赞同：0
> 
> 时间：2013-03-25T06:31:12.343
> 
> 标签：android, android-market-filtering, uses-feature

我有一个应用程序需要存在 GSM/CDMA 无线电并且能够读取设备的 IMEI（仅 WiFi 设备上不存在）。

我将如何使用`<uses-feature>`来*限制*我的应用对 Play 上仅 WiFi 的设备可见？

现在我的清单中有这个：

```
<uses-feature
    android:name="android.hardware.telephony.gsm"
    android:required="true" /> 
```

我还应该添加`android.hardware.telephony.cdma`以允许将应用程序安装在使用 GSM 和 CDMA 的设备上吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T06:33:54.620

请改用 android.hardware.telephony。否则，您需要特定类型的电话，这可能不可用。如果您同时需要 CDMA 和 GSM，那么您最终只能在极少数同时具备这两种功能的手机上工作。

请注意，CDMA 没有 IMEI，它有自己的标识符。

# ruby - Rails 3范围查询

> ID：15608947
> 
> 赞同：2
> 
> 时间：2013-03-25T06:31:23.013
> 
> 标签：ruby, ruby-on-rails-3.2

我有一个名为“SessRequest”的模型，其中包含字段“sess_start”（会话的开始日期时间）和“sess_duration”（会话持续时间以小时为单位）。因此，会话的结束时间是：sess_start + sess_duration.hours 我需要过滤掉所有“end_time”晚于当前时间的会话。为此，相应的模型范围如下所示：

```
SESSION_ASSUMED_PAST_AFTER_HRS = 3
  scope :past,
    lambda{where('(sess_start < :current_time) AND (sess_start IS NOT NULL)', :current_time => 0.days.from_now - SESSION_ASSUMED_PAST_AFTER_HRS.hours)}; 
```

我想根据“sess_duration”数据库字段而不是常量 SESSION_ASSUMED_PAST_AFTER_HRS 来创建这个范围。如何在保持数据库不可知的同时做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:31:42.877

您可以使用[squeel](https://github.com/ernie/squeel) gem 来创建复杂的 SQL 查询和各种 RDBMS 系统。

您的代码将如下所示：

```
SESSION_ASSUMED_PAST_AFTER_HRS = 3
scope :past, where { (sess_start < SESSION_ASSUMED_PAST_AFTER_HRS.hours.ago) & (sess_start != nil ) } 
```

# java - DateFormat 没有以所需格式给出日期

> ID：15608954
> 
> 赞同：1
> 
> 时间：2013-03-25T06:32:39.533
> 
> 标签：java, date-format

我想以以下格式获取当前日期 yyyy_mm_dd

我正在使用下面的代码

```
DateFormat date = new SimpleDateFormat("yyyy_mm_dd");
Date datetoday = new Date();
System.out.println(date.format(datetoday)); 
```

但它以这种方式给出结果 - 2013_56_25

但是，它应该给出类似**2013_03_25的结果**

事实上，*mm*值在我每次运行时都会变化。我系统的日期格式为 - 2013 年 3 月 25 日。（Idk，如果它与此有关）

这可能有什么问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-25T06:33:35.503

使用大写`MM`，小写`mm` 代表分钟。

```
DateFormat date = new SimpleDateFormat("yyyy_MM_dd"); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-25T06:34:09.763

月份是 M，而不是 m（即分钟）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-25T06:35:05.823

使用**MM**代替**mm**；小写是分钟；大写月份

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-25T06:42:15.097

您将不得不使用 MM 而不是 mm。请参考下图中的表格

![在此处输入图像描述](../Images/0cf4ba6500f6b680e94ebb416ea802ca.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T06:54:53.133

将 java.util.Date 解析为 java.sql.Date String date="2012-05-02"; 后得到了不同的结果

SimpleDateFormat df=new SimpleDateFormat("yyyy-mm-dd");

我得到的结果是：2012-01-01

表示 1 天少于实际需要。

# innodb - 为什么 myisam 存储引擎比 Innodb 存储引擎快

> ID：15608955
> 
> 赞同：1
> 
> 时间：2013-03-25T06:32:46.213
> 
> 标签：innodb, myisam

为什么 myisam 存储引擎比 Innodb 存储引擎快

是什么让它更快而 innodb 变慢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T06:51:30.167

MyISAM 可以比 innodb 更快，因为它的设计更简单。此外，它已经存在了更长的时间，并且有更多的时间来积累基于实际使用数据的增量改进和优化。

MyISAM 的设计基于 ISAM：[http ://en.m.wikipedia.org/wiki/ISAM](http://en.m.wikipedia.org/wiki/ISAM)

不过，速度是有代价的：MyISAM 不支持事务或外键。这意味着它最适合保存和分析日志数据，以及作为数据挖掘和数据仓库技术的后端，而 innodb 更适合事务处理和一般信息系统的存储层。

维基百科在这里对 MySQL 存储引擎进行了很好的比较：http: [//en.m.wikipedia.org/wiki/Comparison_of_MySQL_database_engines](http://en.m.wikipedia.org/wiki/Comparison_of_MySQL_database_engines)

# javascript - 选项添加上的jQuery触发操作

> ID：15608957
> 
> 赞同：0
> 
> 时间：2013-03-25T06:32:52.807
> 
> 标签：javascript, jquery

我有一个在 jsp 页面上的选择字段，我通过外部 js 库向它添加选项。现在我的 jsp 上是否有办法在添加选项时触发操作？

这是因为我需要从后端获得一些价值，并且不可能在外部 js 页面上做所有事情。

我使用了 .change() 但我猜是因为添加发生在外部页面中，它不会触发任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:37:40.270

利用`.on`

```
$('#your_dropdown_id').on('change', function (d) {
 // your code here..
}); 
```

# sql - SQL Server 按分组选择

> ID：15608958
> 
> 赞同：-2
> 
> 时间：2013-03-25T06:33:13.137
> 
> 标签：sql, sql-server, grouping

表格1

状态

```
csid status
122  defaulter
123  regular
124  registery
125  defaulter 
```

表 2

csplot详细信息

```
csid plotsize
122  50
123  25
124  30
125  25 
```

查询结果

```
Status     totalplotsize

defaulter  75
regular    25
.... 
```

我怎么能做到这两个表都没有关系它们与另一个表有关系

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:35:51.673

```
SELECT status, sum(plotsize) as totalplotsize 
FROM csstatus cs 
INNER JOIN csplotdetials cp ON cs.csid = cp.csid 
GROUP BY status 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:36:10.823

我必须在这里遗漏一些东西，因为看起来我可以推断出两个表之间的关系（在`csid`列上）以产生您所追求的结果：

```
SELECT csstatus.status AS Status, SUM(csplotdetials.plotsize) AS totalplotsize
FROM csplotdetials
INNER JOIN csstatus ON csplotdetials.csid = csstatus.csid
GROUP BY csstatus.status 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!2/028d7/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T06:36:28.510

我假设表是通过`csID`两个表中的 coluymn 链接的。

```
SELECT  a.csID, a.status, SUM(b.plotsize) totalPlotSize
FROM    ccstatus a
        INNER JOIN csplotdetails b
            On a.csID = b.csID
GROUP   BY a.csID, a.status 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/7479b/2)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# mysql - 如何在两个提交标签的表单中提及不同的操作？

> ID：15608959
> 
> 赞同：1
> 
> 时间：2013-03-25T06:33:13.847
> 
> 标签：mysql, ruby-on-rails, ruby, ruby-on-rails-3, rubygems

我有我的表单标签，并且我的表单中有两个按钮。单击提交按钮时，如何在表单中调用不同的操作。

这是我的代码：

```
<%= form_for :attachment_metadata, :url=>{:action=>'delete_files'}, :html=>{:onsubmit=> "return confirm('Are you sure, you want to delete selected files?');",:multipart => true} do |f| %>
   <table>
     ..........Some stuff here..........
   </table> 
<%= submit_tag 'Reprocess', :class =>'button' %>
<%= submit_tag 'Remove', :class =>'button' %>
<% end %> 
```

单击“重新处理”时，我想以相同的形式调用不同的操作。

我怎样才能做到这一点？

请帮忙

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:38:47.613

这在[Railscast 38](http://railscasts.com/episodes/38-multibutton-form)中有介绍。我相信它会解决你的问题。它非常简单。每当您提交表单时，它会在 params hash 中发送一些关于您执行的提交的信息，我建议您看一下 railscast，您会完全理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T06:40:17.070

`params[:commit]`可以区分两个提交标签的动作。
更新：

> @action = 参数[:commit]

如果您单击按钮，它会将@`action`值作为“ `Reprocess`”，如果您单击`Reprocess`按钮，它会给出“ `Remove`”值`Remove`，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T06:44:17.373

您可以有两种不同的表单，您可以使用 jQuery 提交表单。在这种情况下，您可以将表单提交到特定位置。

```
<form id="target" action="destination.html">
  <input type="text" value="Hello there" />
  <input type="submit" value="Go" />
</form>
<div id="other">
  Trigger the handler
</div>

$('#target').submit(function() {
  alert('Handler for .submit() called.');
  return false;
}); 
```

# python - POST 响应在 200、500 和 404 之间变化不可预测

> ID：15608966
> 
> 赞同：0
> 
> 时间：2013-03-25T06:33:36.253
> 
> 标签：python, post, web-scraping, http-status-code-404, scrapy

尝试对返回大量搜索结果的网站进行一些抓取。问题是导航页面的唯一方法是通过附加到每个链接的 href 参数的 __doPostBack 方法。

这是我当前的代码：

```
class guruSpider(BaseSpider):
    name = "guru"
    allowed_domains = ["guru.com"]

    def start_requests(self):
        baseUrl = "http://www.guru.com/emp/search.aspx?keyword=#&&sort=Earnings&page="
        endUrl = "&sort=Earnings"
        target = 'ctl00$empcnt$ucResults$pagination'
        hiddenValue = ";;AjaxControlToolkit, Version=3.5.60919.0, Culture=neutral, PublicKeyToken=28f01b0e84b6d53e:en-US:311bfa99-1d92-41d7-aace-73bb01d14bf6:475a4ef5:effe2a26:1d3ed089:5546a2b:497ef277:a43b07eb:d2e10b12:37e2e5c9:751cdd15:dfad98a5:3cf12cf1"
        requests = []
        for i in range(1, 5):
            url = baseUrl + str(i)
            argument = str(i+1)
            data = {'__EVENTTARGET': target, '__EVENTARGUMENT': argument,
                    '__ASYNCPOST': 'true', 'ctl00_scriptMgr_HiddenField':hiddenValue}
            currentPage = FormRequest(url, formdata=data)
            requests.append(currentPage)
        return requests 
```

这具有以下示例响应：

```
Crawled (404) <POST http://www.guru.com/emp/search.aspx?keyword=#&&sort=Earnings&page=3> (referer: None)
Crawled (200) <POST http://www.guru.com/emp/search.aspx?keyword=#&&sort=Earnings&page=4> (referer: None) 
```

但是，在 200 消息中，实际返回如下：

```
<HtmlXPathSelector xpath=None data=u'<html><body><p>179|error|500|The page is'> 
```

有想法该怎么解决这个吗？我真的对此束手无策。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:59:03.097

因此，事实证明，使用 scrapy 与任何 javascript 交互通常是一场失败的战斗。最终使用 casperjs 来实际执行这些请求并且效果很好。我听说 Selenium 也适用于这样的事情，但我还没有真正尝试过 Selenium。

只是想我会提供更新。

# powershell - PowerShell 命令行导入模块

> ID：15608968
> 
> 赞同：1
> 
> 时间：2013-03-25T06:33:43.620
> 
> 标签：powershell, powershell-2.0

我在模块 M1 下有一个 cmdlet。我需要从命令行本身运行 cmdlet。比如说，`powershell -Command cmdlet1`。

但我需要在运行之前导入模块 M1 `cmdlet1`。有没有办法一次性做到这一点？

我不想与 PowerShell 交互，但我想像`cmdlet1`运行普通 Windows 命令一样运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T07:52:58.697

尝试：

```
 powershell -command "& { import-module M1; cmdlet1 }" 
```

要不就：

```
 powershell -command "import-module M1; cmdlet1 " 
```

# iphone - GPS 位置在 iPhone 中为我的应用程序打开/关闭

> ID：15608970
> 
> 赞同：0
> 
> 时间：2013-03-25T06:33:47.530
> 
> 标签：iphone, ios, gps, cllocationmanager

我检查`GPS`位置是`on/off`使用此代码

```
BOOL servicesEnabled = [CLLocationManager locationServicesEnabled]; 
```

在 iphone 中打开/关闭 LocationServices 时它可以正常工作，但是我为我的应用程序设置了 LocationServices 它只返回`servicesEnabled`到`YES`那个时候`[CLLocationManager locationServicesEnabled]` 如何签`locationServicesEnabled`入我的应用程序 **例如：**我禁用了我的应用程序位置服务，如 instagram，如何解决这个问题`LocationServices`在 iphone 或 ipad 中 检查特定应用程序的问题？![在此处输入图像描述](../Images/f44b567a819d9092f58976061e722860.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T06:36:29.773

使用您的`CLLocationManagerDelegate's locationManager: didFailWithError:`方法并检查`kCLErrorDenied`错误以查看用户是否拒绝位置服务。

```
- (void)viewDidLoad
{
    locationManager = [[CLLocationManager alloc] init];

    locationManager.delegate = self;

    locationManager.desiredAccuracy = kCLLocationAccuracyKilometer;

    // Set a movement threshold for new events.

    locationManager.distanceFilter = 500;

    [locationManager startUpdatingLocation];
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)locationManager:(CLLocationManager *)manager

     didUpdateLocations:(NSArray *)locations {

    // If it's a relatively recent event, turn off updates to save power

}

- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error
{

    NSLog(@"%@",error);
} 
```

如果您的应用程序禁用了位置服务，那么它会给您错误

```
Error Domain=kCLErrorDomain Code=1 "The operation couldn’t be completed. (kCLErrorDomain error 1.)" 
```

# xslt - 如何在具有多个 simple-page-master 的 XSLT 中设置页码？这是用于在 PDF 中动态插入页码

> ID：15608973
> 
> 赞同：-1
> 
> 时间：2013-03-25T06:33:56.500
> 
> 标签：xslt

我有一个具有多个简单页面主控的 XSLT 文件。多个 simple-page-master 用于设置不同的高度和宽度。

在这里，我面临一个问题，即每个 simple-page-master 对应的页码以 1 开头。

我使用 < fo:page-number/> 来动态生成页码。

我还想获得总页数，因为我必须将页码写为

第 1 页，共 20 页

我需要按顺序排列的页码。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:35:23.003

嗯，没有更多样本，很难尝试答案......

我赌了一把，但很盲目：

你应该有一些地方。在其中添加页码参数。并在您添加 . 您应该能够通过参数输出页码。要获取 simple-page-master 的总数，请添加另一个参数或使用 XPath count(//simple-page-master) （最好计算一次并使用参数）。

# javascript - 在 JSP 中选中复选框时显示警告消息

> ID：15608976
> 
> 赞同：0
> 
> 时间：2013-03-25T06:33:59.403
> 
> 标签：javascript, jsp, dojo

在我的 jsp 页面中，在其他输入字段中，我在顶部有两个复选框，在页面末尾有两个下拉菜单，其中包含诸如“一”和“二”之类的值以及许多其他值。在选中这两个复选框时，我希望在每个下拉框旁边显示一条警告消息，如“必须选择一个或两个”，并且在取消选中这两个复选框时，警告消息应该消失。

同样，当用户在选中复选框时未在下拉列表中选择“一”或“二”时，应显示相同的警告消息。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:45:13.623

`div`在每个下拉框旁边创建一个标签。使`div`标签默认显示并在其中显示您的文本。在更改复选框值时调用函数，根据选择决定是否隐藏/显示`div`标签。

# javascript - Node.js：检查文件更改的稳定方法？

> ID：15608977
> 
> 赞同：1
> 
> 时间：2013-03-25T06:34:08.003
> 
> 标签：javascript, file, node.js, directory, watch

是否有一种稳定的方法来检查 node.js 中的文件更改？我已经尝试过 default `fs.watch`，但它非常有问题。

```
fs.watch(__dirname, function(event, filename){
    console.log(event + ' file ' + filename);
}) 
```

这会记录一次更改 3 次。每个人都报告了不同操作系统下的许多错误。

*节点 v0.8.21，Ubuntu 12.10*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T06:44:52.450

如果`fs.watch`是错误的，我只是偶尔检查文件的最后修改戳，看看是否有任何更新使用`fs.stat`

# android - cocos2dx 应用程序在恢复活动时崩溃

> ID：15608978
> 
> 赞同：0
> 
> 时间：2013-03-25T06:34:09.117
> 
> 标签：android, opengl-es, crash, android-activity, cocos2d-x

在我的 cocos2dx 游戏中，我正在为结果启动另一个活动，当我返回游戏活动时，它会因以下堆栈而崩溃。通过添加日志，我检查了

```
applicationWillEnterForeground() 
```

和

```
CCDirector::sharedDirector()->resume(); 
```

成功执行，然后应用程序崩溃。类似地，当我通过按主页按钮暂停应用程序并重新打开它时，会注意到行为。但在这种情况下，堆栈跟踪指向
“/system/lib/egl/libGLESv2_adreno200.so”
文件。

```
03-25 12:46:49.659: D/cocos2d-x debug info(21764): AppDelegate::applicationWillEnterForeground done
03-25 12:46:49.739: I/GLThread(21764): noticed surfaceView surface acquired tid=16
03-25 12:46:49.739: W/EglHelper(21764): start() tid=16
03-25 12:46:49.769: W/EglHelper(21764): createContext com.google.android.gles_jni.EGLContextImpl@405924d8 tid=16
03-25 12:46:49.769: I/Main thread(21764): onWindowResize waiting for render complete from tid=16
03-25 12:46:49.769: W/GLThread(21764): egl createSurface
03-25 12:46:49.769: W/EglHelper(21764): createSurface()  tid=16
03-25 12:46:49.769: W/GLThread(21764): onSurfaceCreated
03-25 12:46:50.119: D/cocos2d-x debug info(21764): reload all texture
03-25 12:46:50.289: W/GLThread(21764): onSurfaceChanged(320, 240)

********** Crash dump: **********
Build fingerprint: 'samsung/GT-S5670/GT-S5670:2.3.4/GINGERBREAD/XWKQ2:user/release-keys' pid: 20072, tid: 20083  >>> com.xxxx.yyyo <<<
signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 482b7000
Stack frame #00  pc 0000cd8c  /system/lib/libc.so
Stack frame #01  pc 00168cde  /mnt/asec/com.xxxx.yyyo-2/lib/libgame.so: Routine _initWithRawData in D:/Dev/cocos2d-2.0-x-2.0.4/yyyo-21mar/proj.android/../libs/cocos2dx/platform/CCImageCommon_cpp.h:593
Stack frame #02  pc 00168174  /mnt/asec/com.xxxx.yyyo-2/lib/libgame.so: Routine initWithImageData in D:/Dev/cocos2d-2.0-x-2.0.4/yyyo-21mar/proj.android/../libs/cocos2dx/platform/CCImageCommon_cpp.h:148 
```

**更新** 试图在 Visual Studio 中模拟相同的行为并提出调用堆栈

```
libcocos2d.dll!cocos2d::CCImage::_initWithRawData(void * pData, int nDatalen, int nWidth, int nHeight, int nBitsPerComponent)   Line 576
libcocos2d.dll!cocos2d::CCImage::initWithImageData(void * pData, int nDataLen, cocos2d::CCImage::EImageFormat eFmt, int nWidth, int nHeight, int nBitsPerComponent) Line 126    C++
libcocos2d.dll!cocos2d::CCTextureCache::addImage(const char * path) Line 440    C++
libcocos2d.dll!cocos2d::CCSprite::initWithFile(const char * pszFilename) Line 254   C++
libcocos2d.dll!cocos2d::CCSprite::create(const char * pszFileName) Line 104 C++
Game.win32.exe!Ball::Ball(b2World * world, std::map<std::basic_string<wchar_t,std::char_traits<wchar_t>,std::allocator<wchar_t> >,JSONValue *,std::less<std::basic_string<wchar_t,std::char_traits<wchar_t>,std::allocator<wchar_t> > >,std::allocator<std::pair<std::basic_string<wchar_t,std::char_traits<wchar_t>,std::allocator<wchar_t> > const ,JSONValue *> > > jBall, float boxScaleFactor) Line 20 C++
.
.
.
Game.win32.exe!Game::singleton() Line 27    C++
Game.win32.exe!AppDelegate::applicationDidFinishLaunching() Line 30 C++ 
```

**_initWithRawData**方法在这里

```
bool CCImage::_initWithRawData(void * pData, int nDatalen, int nWidth, int nHeight,   int nBitsPerComponent)
{
bool bRet = false;
do 
{
    CC_BREAK_IF(0 == nWidth || 0 == nHeight);

    m_nBitsPerComponent = nBitsPerComponent;
    m_nHeight   = (short)nHeight;
    m_nWidth    = (short)nWidth;
    m_bHasAlpha = true;

    // only RGBA8888 supported
    int nBytesPerComponent = 4;
    int nSize = nHeight * nWidth * nBytesPerComponent;
    m_pData = new unsigned char[nSize];
    CC_BREAK_IF(! m_pData);
    memcpy(m_pData, pData, nSize);

    bRet = true;
} while (0);
return bRet;
} 
```

**UPDATE2** 发现问题是由于地址重叠造成的。在 memcpy 之前添加了以下代码

```
if(pData > (m_pData + nSize)) {
        CCLOG("CCImage::_initWithRawData source > dest + size ");
memcpy(m_pData, pData, nSize);
    } else {
        CCLOG("CCImage::_initWithRawData error source < dest + size ");
memmove(m_pData, pData, nSize);
    } 
```

输出为

```
CCImage::_initWithRawData error source < dest + size 
```

但是该应用程序仍然在 memmove 上崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:24:57.070

我意识到我正在将一些原始数据从 android 发送到 cocos2dx 以创建图像精灵。并且onPause原始数据正在从android端释放，当cocos2dx恢复时它无法在指针位置找到原始图像数据，所以它崩溃了。

# asp.net-mvc - 修改模型中的每个 DateTime 实例（服务器时间到客户端时间）

> ID：15608986
> 
> 赞同：1
> 
> 时间：2013-03-25T06:34:29.133
> 
> 标签：asp.net-mvc, razor

有没有办法修改从控制器到视图的每个 DateTime 实例？

我在 UTC 时区的服务器上保存了日期时间。但在浏览器中，我需要在客户端时区显示日期。所以每次我必须在客户时区手动转换日期时间：

```
model.DateCreated = ConvertToClientTimeZone(model.DateCreated) 
```

这很不舒服。所以我在问自动进行这种转换的可能方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:38:18.150

如果您使用视图模型，您还可以将时区转换逻辑放入映射功能中，将您的域模型转换为视图模型。

即，如果您使用的是 AutoMapper，我认为可以配置 AutoMapper，以便在映射日期时自动执行从 UTC（在 DB 中）到客户端时区的转换。这样可以减少忘记调用转换辅助函数并向用户显示错误日期时间的可能性。

不要忘记，您还必须将来自客户端的 DateTimes 转换为 DB（从视图模型到域模型）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:29:20.267

您可以编写一个自定义 HTML 助手：

```
public static IHtmlString FormatDate(this HtmlHelper html, DateTime date)
{
    string result = ... format the date however you like
    return new HtmlString(result);
} 
```

然后在视图中：

```
@Html.FormatDate(model.DateCreated) 
```

# python - Python中调用者函数的访问变量

> ID：15608987
> 
> 赞同：20
> 
> 时间：2013-03-25T06:34:34.213
> 
> 标签：python, python-3.x

我的怀疑是，我想做的事情在 Python 中以一种干净的方式不太可行。下面是一些相互调用的嵌套函数。（一般来说，它们不必在词法范围内，但需要动态地相互调用。）

```
def outer() :
    s_outer = "outer\n"

    def inner() :
        s_inner = "inner\n"
        do_something()

    inner() 
```

现在，当我调用时，`do_something()`我想进一步访问调用堆栈中调用函数的变量，在这种情况下`s_outer`和`s_inner`.

不幸的是，这里的关键字只有在我在函数内部`nonlocal`定义时才对我有帮助。但是，如果我将其定义在与该关键字相同的级别，则该关键字将不起作用。`do_something()``inner()``outer()``nonlocal`

但是，我想`do_something()`从其他各种函数调用，但总是在它们各自的上下文中执行它并访问它们各自的范围。

感觉很顽皮，然后我写了一个小访问器，我可以`do_something()`像这样从内部调用它：

```
def reach(name) :
    for f in inspect.stack() :
        if name in f[0].f_locals : return f[0].f_locals[name]
    return None 
```

接着

```
def do_something() :
    print( reach("s_outer"), reach("s_inner") ) 
```

工作得很好。

我的两个问题是这些

1.  有没有更好的方法来解决这个问题？（除了将各自的数据包装成字典并将这些字典显式传递给`do_something()`）

2.  是否有更优雅/更简洁的方式来实现该`reach()`功能？

干杯!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T07:27:21.663

我最终做的是

```
scope = locals() 
```

并`scope`从`do_something`. 这样我就不必到达，但我仍然可以访问调用者的局部变量字典。这与自己构建字典并传递它非常相似。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-25T06:40:54.753

没有，在我看来，也不应该是优雅的实现方式，`reach`因为它引入了一个新的非标准间接，它真的很难理解、调试、测试和维护。正如 Python 的咒语 (try `import this`) 所说：

> 显式优于隐式。

所以，只需传递参数。来自未来的你会非常感谢今天的你。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-07T22:00:52.883

> 有没有更好的方法来解决这个问题？（除了将各自的数据包装成字典并将这些字典显式传递给 do_something()）

明确地传递 dicts 是一种更好的方法。

你的提议听起来很不合常规。当代码大小增加时，您必须将代码分解为模块化架构，并在模块之间使用干净的 API。它还必须是易于理解、易于解释并且易于移交给其他程序员来修改/改进/调试它的东西。您提出的建议听起来*不是*一个干净的 API，非常规，具有不明显的数据流。我怀疑它可能会让许多程序员看到它时脾气暴躁。:)

另一种选择是使函数成为类的成员，数据位于类实例中。如果您的问题可以建模为在数据对象上运行的多个函数，那么这可能会很好。

# extjs - extjs 中的更新方法错误

> ID：15608991
> 
> 赞同：7
> 
> 时间：2013-03-25T06:34:58.017
> 
> 标签：extjs, extjs4, extjs4.1, extjs-mvc

在我的 extjs 项目中，我有一些要在活动中`panel`展示的 's 。这工作正常。但是，当我只是用新的 html 更新面板时，该事件就不起作用了。`toolbar``mouseEnter``mouseenter`

```
panel.update('hello'); 
```

然后我通过 Chrome 开发工具意识到，该`update`方法是`div`在写入新文本之前擦除最后一个嵌套的内部面板（即“你好”）。

> 每个面板都有**`3`/`4`**嵌套的 div，但是当我们使用 update() 时，面板只有**`2`**嵌套的 div？

这是没有在 上调用`mouseenter`事件的主要原因，`panel`因为我认为在`Ext`方法之后无法将 识别`panel`为有效面板`update()`。

`panel`无论如何，后来我通过检查chrome 控制台中的变量来解决这个问题，如下所示。

```
panel.body.dom.childNodes[0].children[0].childNodes[0].data = 'hello'; 
```

上面的实现看起来很恶心，但它对我有用。还有其他好方法吗？

**编辑**：

```
//In controller
this.control({          
   '#monthCalendar>panel>panel': {
        render: function(container){
             container.on('mouseenter',function(){                              
                  //do something here                                   
             },container,{element: 'el'});
        }
    }
}) 
```

**更新前**：

```
<div class="x-panel x-box-item x-panel-default" id="panel-1078" style="left: 870px; top: 0px; margin: 0px; width: 174px; height: 52px;">
      <div id="panel-1078-body" class="x-panel-body x-panel-body-default x-panel-body-default x-box-layout-ct" style="width: 174px; height: 52px; left: 0px; top: 0px;">
           <div id="panel-1078-innerCt" class="x-box-inner " role="presentation" style="height: 50px; width: 172px;">
               <div id="panel-1078-targetEl" style="position: absolute; width: 172px; left: 0px; top: 0px; height: 1px;">
                    March 01
               </div>
           </div>
      </div>
</div> 
```

**更新后**：

```
<div class="x-panel x-box-item x-panel-default" id="panel-1078" style="left: 870px; top: 0px; margin: 0px; width: 174px; height: 52px;">
      <div id="panel-1078-body" class="x-panel-body x-panel-body-default x-panel-body-default x-box-layout-ct" style="width: 174px; height: 52px; left: 0px; top: 0px;">
          February 01
      </div>
</div> 
```

我在[Sencha 聊天室](https://chat.stackoverflow.com/rooms/23760/sencha)有空。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T21:30:54.523

您的事件处理程序停止工作，因为您`update()`删除了面板布局添加的内部元素。

正如您所注意到的，您在面板上使用了 HBox 或 VBox 布局，这会在主布局中添加额外的 HTML 元素。如果调用`update()`主组件的元素，则会擦除布局添加的内部元素，包括事件处理程序正在侦听的元素。

解决方案是：

*   在面板上使用更简单的布局，例如 Auto；

或者

*   更新布局添加的内部元素：

    ```
    panel.getLayout().targetEl.update('Updated'); 
    ```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-08T14:03:47.723

如果你想更新面板的内容，你应该调用

```
panel.body.update('hello'); 
```

这只会更新内容区域元素，不会破坏面板的完整性。据我所知，直接在面板上调用更新是错误的，因为调用从 AbstractComponent 继承的函数不会考虑内部面板的结构，并且会覆盖基本面板的标记。

# android - VideoView（无法在线程内创建处理程序）

> ID：15608995
> 
> 赞同：0
> 
> 时间：2013-03-25T06:35:19.313
> 
> 标签：android, android-videoview

我正在尝试使我的 VideoView 与 Asynctask 一起使用。但是，有一些我无法理解的错误。有人可以检查我的代码吗？我收到此错误“ `java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()`”

```
@Override
        protected Void doInBackground(Void... params) {
            try {
                getWindow().setFormat(PixelFormat.TRANSLUCENT);
                MediaController mediaController = new MediaController(
                        MainActivity.this);
                mediaController.setAnchorView(videoView);

                Uri video = Uri.parse(videoPath);
                videoView.setMediaController(mediaController);
                videoView.setVideoURI(video);
                videoView.requestFocus();
                videoView.setOnPreparedListener(new OnPreparedListener() {

                    public void onPrepared(MediaPlayer mp) {

                        pDialog.dismiss();
                        videoView.start();
                    }
                });
            } catch (Exception e) {

                System.out.println("Video Play Error :" + e.toString());
                // finish();
            }
            return null;

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:37:15.717

您无法更新`doInBackground`方法视图。移动用于更新`onPostExecute`方法视图的代码。

# android - 在某些活动中显示背景但在其他活动中不显示背景的 Web 视图？

> ID：15608998
> 
> 赞同：-1
> 
> 时间：2013-03-25T06:35:40.273
> 
> 标签：android, view, web

我有两个活动都相同，布局几乎相同。在这些 web 视图中使用。透明背景设置为 web 视图。但它出现在一项活动中但没有出现在其他活动中可能是什么原因？显示资产文件夹中数据的 Web 视图使用 Html。可能是什么原因。我已经尝试了所有可能的解决方案。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:42:21.687

```
Webview.setBackgroundColor(0);
Webview.setBackgroundResource(R.drawable.botom_bg);//set your background here 
```

试试这两条线。

# controller - Grails 2.1 SQL 到 Grails GORM 查询

> ID：15608999
> 
> 赞同：1
> 
> 时间：2013-03-25T06:35:51.067
> 
> 标签：controller, hql, grails-2.0

我想要这样的东西

```
'SELECT * FROM MyDomain WHERE endDate >= date AND startDate <= date'

Now please give possible solution by this way

def date = new Date().clearTime(), 
obj = MyDomain.find(....................) or
obj = MyDomain.findWhere(....................) 
```

但我不想要任何 sql 或 hql 注入。任何人都可以帮助我。我想要 GORM 的这个。为我糟糕的英语道歉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:34:25.393

在这种情况下使用标准的最简单方法是

```
def myDomainList = MyDomain.withCriteria{
   def date = new Date().clearTime()
   le('startDate', date)
   ge('endDate', date)
} 
```

请注意更正：查询要求小于等于和大于等于，在这种情况下必须在条件中使用'le'和'ge'。

AND 也隐含在标准中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T08:42:31.043

你需要写这个

```
def myDate = new Date().clearTime()
obj = MyDomain.findAll("FROM MyDomain Where (:myDate) between startDate AND endDate", [myDate: myDate]) 
```

或者

```
obj = MyDomain.executeQuery("FROM MyDomain Where (:myDate) between startDate AND endDate", [myDate: myDate]) 
```

如果您想在没有 sql 或 hql 的情况下使用，那么请使用标准

```
 obj = MyDomain.createCriteria().list{

      and{
           lt('startDate', myDate)
           gt('endDate', myDate)
         }
} 
```

有关更多信息，您可以[在此处](http://grails.org/doc/2.2.x/ref/Domain%20Classes/createCriteria.html)或[此处访问](https://stackoverflow.com/questions/9518252/how-do-i-find-that-march-2nd-and-march-3rd-falls-between-march-1st-and-march-4th)