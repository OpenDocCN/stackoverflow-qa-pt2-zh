# StackOverflow 问答 15381000-15381999

# css - CSS width:100% 的 div 通过增加 IE 缩放级别变得更短

> ID：15381000
> 
> 赞同：0
> 
> 时间：2013-03-13T09:10:58.717
> 
> 标签：css, internet-explorer, zooming

我有一个带有以下 CSS 的 div

```
 div.bottom {
          position: absolute;
          bottom: 0px; left: 0px;
          height: 13px; width: 100%;
          background-image:  url("../../image/icon/login_bottom.gif");
          background-repeat: repeat-x;
        } 
```

当 IE 的缩放级别为 100% 时，这个 div 覆盖了 IE 窗口的整个宽度，但是当我增加缩放级别时，这个 div 变得越来越短。

我希望所有缩放级别的宽度为 100% 以覆盖整个窗口的宽度。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:24:44.653

它变短了，因为你告诉 div 为 100%，如果你放大 150%，它将保持 IE 的 100% 宽度，所以你放大得越多，它看起来就越小。不确定，但这是我的想法。

我不知道你的目的是什么，但可以使用 css scale

```
#div { zoom: 3; -moz-transform: scale(3); -moz-transform-origin: 0 0 } 
```

# javascript - 通过子数组和对象值选择对象

> ID：15381002
> 
> 赞同：0
> 
> 时间：2013-03-13T09:10:59.570
> 
> 标签：javascript, jquery

我正在`object`从 Facebook 获取数据，并希望选择所有子值为 xxx 的`objects`。`array`

（`object`当然是简化的）的结构如下：

```
var friends = [
    {
        id: 123456,
        name: "Friend1 name",
        education: [
            {
                school: {
                    name: "School1 name"
                },
                type: "Highscool"
            }
        ]
    },
    {
        id: 3456789,
        name: "Friend2 name",
        education: [
            {
                school: {
                    name: "School2 name"
                },
                type: "College"
            }
        ]
    }
] 
```

假设我想用education.type = "Highscool" 获取所有对象。我怎样才能做到这一点，而不循环整个对象......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:12:39.747

> 我怎样才能做到这一点，而不循环整个对象......？

你不能。但这并不一定很难：

```
var highSchoolFriends = friends.filter(function(friend) {
    var keep = false;
    friend.education.some(function(entry) {
        if (entry.type === "Highschool") {
            keep = true;
            return true;
        }
    });
    return keep;
}); 
```

那使用 ES5[`Array#filter`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.4.20)和[`Array#some`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.4.17)函数。返回由迭代器函数为其`filter`返回的数组中的条目组成的新数组。循环遍历一个数组，直到你给*它*的迭代函数返回（我使用它而不是因为你可以提前停止它）。如果您需要支持还没有这些的旧浏览器，它们是“ES5 shim”可以为您提供的浏览器。`friends``true``some`*`true``Array#forEach`*

 *或者你只做简单的循环：

```
var i, j;
var highSchoolFriends = [];
var friend;

for (i = 0; i < friends.length; ++i) {
    friend = friends[i];
    for (j = 0; j < friend.education.length; ++j) {
        if (friend.education[j].type === "Highschool") {
            highSchoolFriends.push(friend);
            break;
        }
    }
}); 
```*

# c# - 如何在 C# 中关闭剪贴板资源？

> ID：15381005
> 
> 赞同：0
> 
> 时间：2013-03-13T09:11:09.913
> 
> 标签：c#, clipboard, concurrent-programming, clipboard-interaction

下面是我如何将文本字符串放入 Windows 剪贴板的代码。我正在寻找一个命令来立即关闭剪贴板资源，以便应用程序不再锁定它。你知道如何在 C# 中显式地关闭剪贴板资源吗？

这是代码

```
String s = "Hello World";
Thread staThread3 = new Thread
(
    delegate()
    {
        try { new SetClipboardHelper(DataFormats.Text, s).Go();}
        catch (Exception ex)  { /* Exception Handling */ }
    }
);
staThread3.SetApartmentState(ApartmentState.STA);
staThread3.Start();
staThread3.Join();
// Here I would like to close the clipboard
// ???? 
```

这是类 SetClipboardHelper 的代码

```
class SetClipboardHelper : StaHelper
{
    readonly string _format;
    readonly object _data;

    public SetClipboardHelper(string format, object data)
    {
        _format = format;
        _data = data;
    }

    protected override void Work()
    {
        var obj = new System.Windows.Forms.DataObject(
            _format,
            _data
        );

        Clipboard.SetDataObject(obj, true);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:46:32.990

如果您通过调用[OpenClipboard()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms649048%28v=vs.85%29.aspx)方法“锁定”（防止其他应用程序修改）剪贴板，那么您可以（并且应该，因为它阻止其他应用程序使用它）使用[CloseClipboard()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms649035%28v=vs.85%29.aspx)关闭它。

[这](http://msdn.microsoft.com/en-us/library/windows/desktop/ms649016%28v=vs.85%29.aspx#_win32_Copying_Information_to_the_Clipboard)是复制到剪贴板时应遵循的顺序。

# java - 如何使用原始设置更新 JAR 文件？

> ID：15381008
> 
> 赞同：1
> 
> 时间：2013-03-13T09:11:18.530
> 
> 标签：java, jar

我正在尝试更新`Kitchen.jar`文件，但更新后它拒绝工作。这是我所做的：

```
$ jar xf Kitchen.jar
$ jar uf Kitchen.jar com/package/Toster.class 
```

一切看起来都不错。`opendiff`（以及`jar tf`）显示**没有区别**，但是文件大小不同 1008 字节。二进制比较显示大约 700 个差异。罐子不再起作用了。

如您所见，我没有更改任何文件，我只是进行了提取并使用原始未触及的类文件更新了 jar 文件。

我在 SO 上看到过[类似的问题](https://stackoverflow.com/questions/9604622/jar-files-why-does-extracting-then-compression-a-jar-file-create-a-file-of-a-di)，但没有回答，因为我的结构没有改变。

原始清单有这个：

```
Created-By: 1.7.0_05-b05 (Oracle Corporation) 
```

虽然我有：

```
$ javac -version
javac 1.7.0_17 
```

不得不说（但不确定这是否相关）我试图修改的 Jar 文件是 Eclipse IDE 插件的一部分。

我有两个想法：

1.  这是因为我在 Mac 上，而原始 jar 是在不同平台上创建的。
2.  这是因为在创建包时定义了一些[java 运行时变量](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html#options)（jar 的 -J 选项）。

这让我觉得我要么需要找到它创建的平台并尝试在那里打包它，要么找出在打包操作期间定义的*-J -options。*可能吗？如何？

# canvas - feColorMatrix 滤镜的强度

> ID：15381009
> 
> 赞同：1
> 
> 时间：2013-03-13T09:11:23.860
> 
> 标签：canvas, svg, filter, colormatrix

我正在尝试在 SVG 中创建一个可调节强度的棕褐色过滤器。在 Canvas 中，这很容易做到。但我不确定如何在 SVG 中解决这个问题。

这是我当前的过滤器代码。

```
 <filter id="image1362918248406filter">
    <feColorMatrix color-interpolation-filters="sRGB" values="0.393 0.769 0.189 0 0 0.349 0.686 0.168 0 0 0.272 0.534 0.131 0 0 0 0 0 1 0"></feColorMatrix>
 </filter> 
```

下面的小提琴是我试图实现的演示。如何让 SVG 示例看起来与画布示例相同？

[http://jsfiddle.net/5LLFS/](http://jsfiddle.net/5LLFS/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:35:37.260

当我在 Firefox 上尝试时，这看起来就像你想要的。

```
<defs>
    <filter id="image1362918248406filter" color-interpolation-filters="sRGB">
        <feColorMatrix values="0.393 0.769 0.189 0 0 0.349 0.686 0.168 0 0 0.272 0.534 0.131 0 0 0 0 0 1 0" result="sepia"></feColorMatrix>
        <feComposite in="sepia" in2="SourceGraphic" operator="arithmetic" k2="0.5" k3="0.5" />
       </filter>
</defs> 
```

# php - 数据库插入错误

> ID：15381015
> 
> 赞同：0
> 
> 时间：2013-03-13T09:11:54.573
> 
> 标签：php, mysql, mysqli

下面的回声语句，

```
$statement = "INSERT INTO $tbl_name VALUES(" . $_GET['username'] . "," . $_GET['password'] . "," . $_GET['PasswordHintQuestion'] . "," . $_GET['PasswordHintAnswer'] . "," . $_GET['firstname'] . "," . $_GET['lastname'] . "," . $_GET['genderSelect'] . "," . $_GET['date_in_format'] . "," . $_GET['nationality'] . "," . $_GET['refEmail'] . ")" ;   
echo $statement; 
```

给出的输出为，

```
INSERT INTO ge_user_table VALUES([object HTMLInputElement],[object HTMLInputElement],[object HTMLInputElement],[object HTMLInputElement],[object HTMLInputElement],[object HTMLInputElement],[object NodeList],[object HTMLSelectElement]/[object HTMLSelectElement]/[object HTMLSelectElement],[object HTMLInputElement],[object HTMLInputElement])Database Insertion fault on registration 
```

但是在插入数据库期间，我得到了错误，

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '[object HTMLInputElement],[object HTMLInputElement],[object HTMLInputElement],[o' 附近使用正确的语法

但是，下面的查询工作正常。

```
INSERT INTO ge_user_table VALUES('Muthu2','1234','Who are you?','Iam Indian','Muthu','Ganapathy','MALE','1991-12-21','Indian','abc@abc.com'); 
```

**编辑：** 我已将代码更改为，

```
 $username     = mysql_escape_string($_GET['username']);
  $password     = mysql_escape_string($_GET['password']);
  $hintQues     = mysql_escape_string($_GET['PasswordHintQuestion']);
  $hintAns      = mysql_escape_string($_GET['PasswordHintAnswer']);
  $firstname    = mysql_escape_string($_GET['firstname']);
  $hintQues     = mysql_escape_string($_GET['lastname']);
  $gender       = mysql_escape_string($_GET['genderSelect']);
  $date         = mysql_escape_string($_GET['date_in_format']) ;
  $nationality  = mysql_escape_string($_GET['nationality']) ;
  $email        = mysql_escape_string($_GET['refEmail']) ;

    $statement = "INSERT INTO $tbl_name VALUES('$username' ,'$password','$hintQues' ,'$hintAns','$firstname' ,'$lastname' ,".
               "'$gender' ,'$date','$nationality','$email')" ; 
```

但是，数据库的条目为， ![在此处输入图像描述](../Images/c9c04619be87e4777f9879f1125105b6.png)

最终解决方案：我在 html 中传递了 form.username 而不是 form.username.value。现在明白了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:16:40.590

看起来你在 javascript 中有错误。您发送 html DOM 节点而不是值。

你也应该逃避你的 get 变量，比如

```
mysql_real_escape_string($_GET['username']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:30:52.727

尝试这个

```
 $username     = mysql_escape_string($_GET['username']);
  $password     = mysql_escape_string($_GET['password']);
  $hintQues     = mysql_escape_string($_GET['PasswordHintQuestion']);
  $hintAns      = mysql_escape_string($_GET['PasswordHintAnswer']);
  $firstname    = mysql_escape_string($_GET['firstname']);
  $hintQues     = mysql_escape_string($_GET['lastname']);
  $gender       = mysql_escape_string($_GET['genderSelect']);
  $date         = mysql_escape_string($_GET['date_in_format']) ;
  $nationality  = mysql_escape_string($_GET['nationality']) ;
  $email        = mysql_escape_string($_GET['refEmail']) ;

  $statement = "INSERT INTO $tbl_name VALUES('$username' ,'$password','$hintQues' ,'$hintAns','$firstname' ,'$lastname' ,".
               "'$gender' ,'$date','$nationality','$email')" ;   

  echo $statement; 
```

始终尽量保持语句的可读性..无论何时需要插入字符串..它应该被正确引用也总是使用 mysql_escape_string() 以避免 sql 注入。

*   可能的问题可能是..您传递的是 html 元素本身而不是它的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T09:26:59.737

Your sql syntax is wrong you can use mysql_real_escape_string but you also need to care about how you are passing values to sql.

In above query you symply passed text without quotes.

```
$statement = "INSERT INTO $tbl_name VALUES('".$_GET['username']."', '".$_GET['password']."', '".$_GET['PasswordHintQuestion']."', '".$_GET['PasswordHintAnswer']."', '".$_GET['firstname']."', '".$_GET['lastname']."', '".$_GET['genderSelect']."', '".$_GET['date_in_format']."', '".$_GET['nationality']."', '".$_GET['refEmail']."')" ; 
```

# zend-framework - Zend Framework 和 DOMPDF 不呈现特殊字符

> ID：15381019
> 
> 赞同：1
> 
> 时间：2013-03-13T09:12:05.113
> 
> 标签：zend-framework, frameworks, dompdf, autoloader

我正在使用 Zend Framework 1.12 和 DOMPDF 0.6.0 beta 3。我正在尝试用罗马尼亚语呈现包含特殊字符 (ăîâşţ ĂÎÂŞŢ) 的文本。

这是我的代码：

```
 $this->_helper->viewRenderer->setNoRender();
    $this->view->layout()->disableLayout();

    require_once 'dompdf_config.inc.php';  
    $autoloader = Zend_Loader_Autoloader::getInstance(); // assuming we're in a controller  
    $autoloader->pushAutoloader('DOMPDF_autoload');

    $html = 'test ăîâşţ ĂÎÂŞŢ';

    $dompdf = new DOMPDF();  
    $dompdf->set_paper("a4","portrait");  
    $dompdf->load_html($html);  
    $dompdf->set_base_path($_SERVER['DOCUMENT_ROOT']);  
    $dompdf->render();  
    $dompdf->stream("domAction.pdf");
    exit(); 
```

然而，这是 PDF 文件显示的内容：test ÄƒÃ®Ã¢ÅŸÅ£ Ä‚ÃŽÃ‚ÅžÅ¢</p>

我确信它与 Zend Autoloader 有关，因为 DOMPDF 在一个简单的示例（没有 Zend 框架）中使用它时能够创建一个包含这些特殊字符的 .pdf 文件。

有什么建议或解决方案吗？

# networking - 无法通过 IE、Chrome 或 Firefox 访问 ftp 站点

> ID：15381025
> 
> 赞同：-2
> 
> 时间：2013-03-13T09:12:18.663
> 
> 标签：networking, ftp, filezilla

我以以下 FTP 详细信息为例：

**服务器：** 10.10.100.10

**用户：**梦想家

**密码：** 12345

当我使用 FileZilla 时，我可以使用上述凭据访问 FTP 站点。

当我使用 Windows 资源管理器时，我把它放在地址栏中**`ftp://10.10.100.10`**，我会弹出一个询问凭据的弹出窗口，我输入它并且这有效。

但是，当我使用 IE、firefox 或 Chrome 时，我无法进入。

我在地址栏中使用它：**`ftp://dreamer:12345@10.10.100.10`**

请注意，这只是一个例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:18:30.563

在 Filezilla 中，右键单击要访问的文件。

选择“将 URL 复制到剪贴板”并将其粘贴到您的浏览器中，一个弹出窗口应该会出现，要求您登录。

这对我行得通。

# python - 如何更改python中调用函数的语法？

> ID：15381026
> 
> 赞同：0
> 
> 时间：2013-03-13T09:12:21.417
> 
> 标签：python, function, methods, syntax, call

函数通常以这种方式应用于参数：`func(arg)`. 但是，如果参数很长（例如其他函数的组合），如果使用以下语法，则代码更具可读性：`x.sun()`. python中是否有允许从第一种语法切换到另一种语法的技巧。

例如，在我的特定情况下，我希望能够`x.list()`使用`list(x)`.

# ios - 在 UILabel.attributedText *not* 蓝色和 *not* 下划线

> ID：15381028
> 
> 赞同：43
> 
> 时间：2013-03-13T09:12:25.357
> 
> 标签：ios, objective-c, xcode, nsattributedstring

我希望我的 OHAttributedLabel 中的一些单词是链接，但我希望它们是蓝色以外的颜色，并且我不想要下划线。

这给了我一个带有下划线文本的蓝色链接：

```
 -(void)createLinkFromWord:(NSString*)word withColor:(UIColor*)color atRange:(NSRange)range{

    NSMutableAttributedString* mutableAttributedText = [self.label.attributedText mutableCopy];   

    [mutableAttributedText beginEditing];
    [mutableAttributedText addAttribute:kOHLinkAttributeName
                   value:[NSURL URLWithString:@"http://www.somewhere.net"]
                   range:range];

    [mutableAttributedText addAttribute:(id)kCTForegroundColorAttributeName
                   value:color
                   range:range];

    [mutableAttributedText addAttribute:(id)kCTUnderlineStyleAttributeName
                   value:[NSNumber numberWithInt:kCTUnderlineStyleNone]
                   range:range];
    [mutableAttributedText endEditing];

    self.label.attributedText = mutableAttributedText;

} 
```

由于我使用的是 OHAttributedLabel，因此我也尝试使用其`NSAttributedString+Attributes.h`类别中的方法，但这些方法也返回带蓝色下划线的链接：

```
-(void)createLinkFromWord:(NSString*)word withColor:(UIColor*)color atRange:(NSRange)range{

NSMutableAttributedString* mutableAttributedText = [self.label.attributedText mutableCopy];

[mutableAttributedText setLink:[NSURL URLWithString:@"http://www.somewhere.net"] range:range];
[mutableAttributedText setTextColor:color range:range];
[mutableAttributedText setTextUnderlineStyle:kCTUnderlineStyleNone range:range];

self.label.attributedText = mutableAttributedText;
} 
```

如果我注释掉在每个版本中设置链接的行，则文本会根据我传入的内容着色 - 这很有效。似乎设置链接会覆盖它并将其变回蓝色。

不幸的是，我发现的苹果文档页面显示了如何将链接文本设置为蓝色并加下划线，这正是我不需要的： [https ://developer.apple.com/library/content/documentation/Cocoa/Conceptual/AttributedStrings/任务/更改AttrStrings.html](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/AttributedStrings/Tasks/ChangingAttrStrings.html)

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-03-19T04:53:38.213

所以我最终使用了 TTTAttributedLabel：

```
-(void)createLinkFromWord:(NSString*)word withColor:(UIColor*)color atRange:(NSRange)range{
    NSMutableAttributedString* newTextWithLinks = [self.label.attributedText mutableCopy];
    NSURL *url = [NSURL URLWithString:@"http://www.reddit.com"];
    self.label.linkAttributes = @{NSForegroundColorAttributeName: color, 
                                   NSUnderlineStyleAttributeName: @(NSUnderlineStyleNone)};
    [self.label addLinkToURL:url withRange:range];
} 
```

我发现`OHAttributedLabel`实际上确实有设置链接并为这些链接声明颜色和下划线样式的方法。但是，我希望链接是基于参数的不同颜色。`TTTAttributedLabel`通过让您`linkAttributes`为您创建的每个链接设置它的属性来实现这一点。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-03-04T14:17:44.250

我正在使用[TTTAttributedLabel](https://github.com/TTTAttributedLabel/TTTAttributedLabel)。我想更改链接文本的颜色，并保持下划线。皮姆的回答看起来很棒，但对我不起作用。这是有效的：

```
label.linkAttributes = @{ (id)kCTForegroundColorAttributeName: [UIColor magentaColor],
                           (id)kCTUnderlineStyleAttributeName : [NSNumber numberWithInt:NSUnderlineStyleSingle] }; 
```

注意：如果您不希望文本加下划线，则从字典中删除 kCTUnderlineStyleAttributeName 键。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2014-06-27T08:01:00.637

这是我对 Ramsel 已经很好的答案的改进版本。我相信它更具可读性，我希望它会得到很好的使用。

```
label.linkAttributes = @{ NSForegroundColorAttributeName: [UIColor whiteColor],
                          NSUnderlineStyleAttributeName: [NSNumber numberWithInt:NSUnderlineStyleSingle] }; 
```

这[是其他属性名称的列表](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/AttributedStrings/Articles/standardAttributes.html)。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-05-07T06:52:46.153

如果您使用的是**`UITextView`**，则可能必须更改`tintColor`属性以更改链接颜色。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-10-05T15:03:10.777

Swift 2.3 示例`TTTAttributedLabel`：

```
yourLabel.linkAttributes       = [
    NSForegroundColorAttributeName: UIColor.grayColor(),
    NSUnderlineStyleAttributeName: NSNumber(bool: true)
]
yourLabel.activeLinkAttributes = [
    NSForegroundColorAttributeName: UIColor.grayColor().colorWithAlphaComponent(0.8),
    NSUnderlineStyleAttributeName: NSNumber(bool: false)
] 
```

斯威夫特 4

```
yourLabel.linkAttributes = [
    .foregroundColor: UIColor.grayColor(),
    .underlineStyle: NSNumber(value: true)
]
yourLabel.activeLinkAttributes = [
    .foregroundColor: UIColor.grayColor().withAlphaComponent(0.7),
    .underlineStyle: NSNumber(value: false)
] 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-08-19T05:57:32.807

如果您像我一样并且真的不想使用 TTT（或者在您以其他奇怪方式绘制的自定义实现中需要它）：

首先，继承 NSLayoutManager 然后重写如下：

```
- (void)showCGGlyphs:(const CGGlyph *)glyphs 
           positions:(const CGPoint *)positions 
               count:(NSUInteger)glyphCount
                font:(UIFont *)font 
              matrix:(CGAffineTransform)textMatrix 
          attributes:(NSDictionary *)attributes
           inContext:(CGContextRef)graphicsContext
{
   UIColor *foregroundColor = attributes[NSForegroundColorAttributeName];

   if (foregroundColor)
   {
      CGContextSetFillColorWithColor(graphicsContext, foregroundColor.CGColor);
   }

   [super showCGGlyphs:glyphs 
             positions:positions 
                 count:glyphCount 
                  font:font 
                matrix:textMatrix 
            attributes:attributes 
             inContext:graphicsContext];
} 
```

这或多或少告诉布局管理器**始终**`NSForegroundColorAttributeName`尊重您的属性字符串，而不是Apple内部对链接的怪异。

 **如果您需要做的只是获得一个可以正确绘制的布局管理器（正如我所需要的那样），您可以在这里停下来。如果你需要一个真正的 UILabel，这很痛苦，但有可能。

首先，再次继承 UILabel 并在所有这些方法中添加耳光。

```
- (NSTextStorage *)textStorage
{
   if (!_textStorage)
   {
      _textStorage = [[NSTextStorage alloc] init];
      [_textStorage addLayoutManager:self.layoutManager];
      [self.layoutManager setTextStorage:_textStorage];
   }

   return _textStorage;
}

- (NSTextContainer *)textContainer
{
   if (!_textContainer)
   {
      _textContainer = [[NSTextContainer alloc] init];
      _textContainer.lineFragmentPadding = 0;
      _textContainer.maximumNumberOfLines = self.numberOfLines;
      _textContainer.lineBreakMode = self.lineBreakMode;
      _textContainer.widthTracksTextView = YES;
      _textContainer.size = self.frame.size;

      [_textContainer setLayoutManager:self.layoutManager];
   }

   return _textContainer;
}

- (NSLayoutManager *)layoutManager
{
   if (!_layoutManager)
   {
      // Create a layout manager for rendering
      _layoutManager = [[PRYLayoutManager alloc] init];
      _layoutManager.delegate = self;
      [_layoutManager addTextContainer:self.textContainer];
   }

   return _layoutManager;
}

- (void)layoutSubviews
{
   [super layoutSubviews];

   // Update our container size when the view frame changes
   self.textContainer.size = self.bounds.size;
}

- (void)setFrame:(CGRect)frame
{
   [super setFrame:frame];

   CGSize size = frame.size;
   size.width = MIN(size.width, self.preferredMaxLayoutWidth);
   size.height = 0;
   self.textContainer.size = size;
}

- (void)setBounds:(CGRect)bounds
{
   [super setBounds:bounds];

   CGSize size = bounds.size;
   size.width = MIN(size.width, self.preferredMaxLayoutWidth);
   size.height = 0;
   self.textContainer.size = size;
}

- (void)setPreferredMaxLayoutWidth:(CGFloat)preferredMaxLayoutWidth
{
   [super setPreferredMaxLayoutWidth:preferredMaxLayoutWidth];

   CGSize size = self.bounds.size;
   size.width = MIN(size.width, self.preferredMaxLayoutWidth);
   self.textContainer.size = size;
}
- (CGRect)textRectForBounds:(CGRect)bounds limitedToNumberOfLines:(NSInteger)numberOfLines
{
  // Use our text container to calculate the bounds required. First save our
  // current text container setup
  CGSize savedTextContainerSize = self.textContainer.size;
  NSInteger savedTextContainerNumberOfLines = self.textContainer.maximumNumberOfLines;

  // Apply the new potential bounds and number of lines
  self.textContainer.size = bounds.size;
  self.textContainer.maximumNumberOfLines = numberOfLines;

  // Measure the text with the new state
  CGRect textBounds;
  @try
  {
      NSRange glyphRange = [self.layoutManager 
                            glyphRangeForTextContainer:self.textContainer];
      textBounds = [self.layoutManager boundingRectForGlyphRange:glyphRange
                                       inTextContainer:self.textContainer];

      // Position the bounds and round up the size for good measure
      textBounds.origin = bounds.origin;
      textBounds.size.width = ceilf(textBounds.size.width);
      textBounds.size.height = ceilf(textBounds.size.height);
  }
  @finally
  {
      // Restore the old container state before we exit under any circumstances
      self.textContainer.size = savedTextContainerSize;
      self.textContainer.maximumNumberOfLines = savedTextContainerNumberOfLines;
   }

   return textBounds;
}

- (void)setAttributedText:(NSAttributedString *)attributedText
{
    // Pass the text to the super class first
    [super setAttributedText:attributedText];

    [self.textStorage setAttributedString:attributedText];
}
- (CGPoint)_textOffsetForGlyphRange:(NSRange)glyphRange
{
   CGPoint textOffset = CGPointZero;

   CGRect textBounds = [self.layoutManager boundingRectForGlyphRange:glyphRange 
                                                     inTextContainer:self.textContainer];
   CGFloat paddingHeight = (self.bounds.size.height - textBounds.size.height) / 2.0f;
   if (paddingHeight &gt; 0)
   {
       textOffset.y = paddingHeight;
   }

   return textOffset;
}

- (void)drawTextInRect:(CGRect)rect
{
   // Calculate the offset of the text in the view
   CGPoint textOffset;
   NSRange glyphRange = [self.layoutManager glyphRangeForTextContainer:self.textContainer];
   textOffset = [self _textOffsetForGlyphRange:glyphRange];

   // Drawing code
   [self.layoutManager drawBackgroundForGlyphRange:glyphRange atPoint:textOffset];

   // for debugging the following 2 line should produce the same results
   [self.layoutManager drawGlyphsForGlyphRange:glyphRange atPoint:textOffset];
   //[super drawTextInRect:rect];
} 
```

[无耻地从这里夺走](https://www.cocoanetics.com/2015/03/customizing-uilabel-hyperlinks/)。令人难以置信地为原作者工作，以完成这一切。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-09-01T15:08:41.483

对于 Swift 3，我使用以下方式为我解决了`TTTAttributedLabel`：

1）在情节提要上添加标签并将其类定义为`TTTAttributedLabel` [![故事板视图](../Images/165c5e01d7a4a244d279e2edaa2fa0f8.png)](https://i.stack.imgur.com/7tsgO.png)

2）在代码中定义 `@IBOutlet var termsLabel: TTTAttributedLabel!`

3）然后`ViewDidLoad`写下这些行

```
termsLabel.attributedText = NSAttributedString(string: "By using this app you agree to the Privacy Policy & Terms & Conditions.")
guard let labelString = termsLabel.attributedText else {
            return
        }
        guard let privacyRange = labelString.string.range(of: "Privacy Policy") else {
            return
        }
        guard let termsConditionRange = labelString.string.range(of: "Terms & Conditions") else {
            return
        }

        let privacyNSRange: NSRange = labelString.string.nsRange(from: privacyRange)
        let termsNSRange: NSRange = labelString.string.nsRange(from: termsConditionRange)

        termsLabel.addLink(to: URL(string: "privacy"), with: privacyNSRange)
        termsLabel.addLink(to: URL(string: "terms"), with: termsNSRange)

        termsLabel.delegate = self
        let attributedText = NSMutableAttributedString(attributedString: termsLabel.attributedText!)
        attributedText.addAttributes([NSFontAttributeName : UIFont(name: "Roboto-Medium", size: 12)!], range: termsNSRange)
        attributedText.addAttributes([NSFontAttributeName : UIFont(name: "Roboto-Medium", size: 12)!], range: privacyNSRange)
        attributedText.addAttributes([kCTForegroundColorAttributeName as String: UIColor.orange], range: termsNSRange)
        attributedText.addAttributes([kCTForegroundColorAttributeName as String: UIColor.green], range: privacyNSRange)
        attributedText.addAttributes([NSUnderlineStyleAttributeName: NSUnderlineStyle.styleNone.rawValue], range: termsNSRange)
        attributedText.addAttributes([NSUnderlineStyleAttributeName: NSUnderlineStyle.styleNone.rawValue], range: privacyNSRange)
        termsLabel.attributedText = attributedText 
```

它看起来像这样 [![模拟器视图](../Images/b109b14c2f10fc25502c38a586cbc20a.png)](https://i.stack.imgur.com/hBLBT.png)

4）最后编写委托功能，`TTTAttributedLabel`以便您可以点击打开链接

```
public func attributedLabel(_ label: TTTAttributedLabel!, didSelectLinkWith url: URL!) {
    switch url.absoluteString  {
    case "privacy":
        SafariBrowser.open("http://google.com", presentingViewController: self)
    case "terms":
        SafariBrowser.open("http://google.com", presentingViewController: self)
    default:
        break
    }
} 
```

**Swift 4.2 更新**

对于 Swift 4.2，步骤 3 有一些更改，所有其他步骤将保持与上述相同：

3）`ViewDidLoad`写下这些行

```
termsLabel.attributedText = NSAttributedString(string: "By using this app you agree to the Privacy Policy & Terms & Conditions.")
guard let labelString = termsLabel.attributedText else {
            return
        }
        guard let privacyRange = labelString.string.range(of: "Privacy Policy") else {
            return
        }
        guard let termsConditionRange = labelString.string.range(of: "Terms & Conditions") else {
            return
        }

        let privacyNSRange: NSRange = labelString.string.nsRange(from: privacyRange)
        let termsNSRange: NSRange = labelString.string.nsRange(from: termsConditionRange)

        termsLabel.addLink(to: URL(string: "privacy"), with: privacyNSRange)
        termsLabel.addLink(to: URL(string: "terms"), with: termsNSRange)

        termsLabel.delegate = self
        let attributedText = NSMutableAttributedString(attributedString: termsLabel.attributedText!)
        attributedText.addAttributes([NSAttributedString.Key.font : UIFont(name: "Roboto-Regular", size: 12)!], range: termsNSRange)
        attributedText.addAttributes([NSAttributedString.Key.font : UIFont(name: "Roboto-Regular", size: 12)!], range: privacyNSRange)
        attributedText.addAttributes([kCTForegroundColorAttributeName as NSAttributedString.Key : UIColor.orange], range: termsNSRange)
        attributedText.addAttributes([kCTForegroundColorAttributeName as NSAttributedString.Key : UIColor.green], range: privacyNSRange)
    attributedText.addAttributes([NSAttributedString.Key.underlineStyle: 0], range: termsNSRange)
        attributedText.addAttributes([NSAttributedString.Key.underlineStyle: 0], range: privacyNSRange) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-23T11:38:59.077

Swift 3 示例`TTTAttributedLabel`：

```
yourLabel.linkAttributes = [
    NSForegroundColorAttributeName: UIColor.green,  
    NSUnderlineStyleAttributeName: NSNumber(value: NSUnderlineStyle.styleNone.rawValue)
]
yourLabel.activeLinkAttributes = [
    NSForegroundColorAttributeName: UIColor.green,  
    NSUnderlineStyleAttributeName: NSNumber(value: NSUnderlineStyle.styleDouble.rawValue)
] 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-03-08T17:21:06.783

对于 Swift 3 使用`TTTAttributedLabel`

```
let title: NSString = "Fork me on GitHub!"

var attirutedDictionary = NSMutableDictionary(dictionary:attributedLabel.linkAttributes)

attirutedDictionary[NSForegroundColorAttributeName] = UIColor.red
attirutedDictionary[NSUnderlineStyleAttributeName] =  NSNumber(value: NSUnderlineStyle.styleNone.rawValue)

attributedLabel.attributedText = NSAttributedString(string: title as String)
attributedLabel.linkAttributes = attirutedDictionary as! [AnyHashable: Any]

let range = subtitleTitle.range(of: "me")
let url = URL(string: "http://github.com/mattt/")

attributedLabel.addLink(to: url, with: range) 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2019-01-19T09:49:23.570

斯威夫特 4.0：

简短而简单

```
 let LinkAttributes = NSMutableDictionary(dictionary: testLink.linkAttributes)
 LinkAttributes[NSAttributedStringKey.underlineStyle] =  NSNumber(value: false)
 LinkAttributes[NSAttributedStringKey.foregroundColor] = UIColor.black // Whatever your label color
 testLink.linkAttributes = LinkAttributes as NSDictionary as! [AnyHashable: Any] 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2017-09-01T22:35:12.460

最好使用启用了“链接”功能的**UITextView 。**在这种情况下，您可以用一行来完成：

**斯威夫特 4**：

```
// apply link attributes to label.attributedString, then
textView.tintColor = UIColor.red // any color you want 
```

完整示例：

```
 let attributedString = NSMutableAttributedString(string: "Here is my link")
    let range = NSRange(location: 7, length:4)
    attributedString.addAttribute(.link, value: "http://google.com", range: range)
    attributedString.addAttribute(.underlineStyle, value: 1, range: range)
    attributedString.addAttribute(.underlineColor, value: UIColor.red, range: range)
    textView.tintColor = UIColor.red // any color you want 
```

或者您可以仅将属性应用于链接：

```
 textView.linkTextAttributes = [
      .foregroundColor: UIColor.red
      .underlineStyle: 1,
      .underlineColor: UIColor.red
   ] 
```**

# jena - 无法从 Jena 查询 d2rq ttl 文件

> ID：15381030
> 
> 赞同：0
> 
> 时间：2013-03-13T09:12:29.170
> 
> 标签：jena, d2rq

我正在尝试从 d2rq 生成的 ttl 文件中进行查询。以下是我的代码片段：

```
 ModelD2RQ m = new ModelD2RQ("file:C:\\Users\\599782\\Downloads\\d2rq-0.8.1\\northwind.ttl");
        String sparql = 
            "PREFIX vocab: <http://localhost:2020/resource/vocab/>" +
            "select ?firstname ?lastname where{"+
                "?x vocab:employees_Country 'USA'."+
                "?x vocab:employees_FirstName ?firstname."+
                "?x vocab:employees_LastName ?lastname."+
            "}";
        Query q = QueryFactory.create(sparql); 
        ResultSet rs = QueryExecutionFactory.create(q, m).execSelect();
        ResultSetFormatter.out(System.out, rs, q);
        m.close(); 
```

它显示了这个异常：

```
Exception in thread "main" java.lang.IncompatibleClassChangeError: Class com.hp.hpl.jena.sparql.algebra.op.OpProject does not implement the requested interface org.openjena.atlas.io.Printable
at org.openjena.atlas.io.PrintUtils.toString(PrintUtils.java:28)
at de.fuberlin.wiwiss.d2rq.engine.QueryEngineD2RQ.translate(QueryEngineD2RQ.java:70)
at de.fuberlin.wiwiss.d2rq.engine.QueryEngineD2RQ.modifyOp(QueryEngineD2RQ.java:60)
at com.hp.hpl.jena.sparql.engine.QueryEngineBase.createPlan(QueryEngineBase.java:94)
at com.hp.hpl.jena.sparql.engine.QueryEngineBase.getPlan(QueryEngineBase.java:87)
at de.fuberlin.wiwiss.d2rq.engine.QueryEngineD2RQ$QueryEngineFactoryD2RQ.create(QueryEngineD2RQ.java:110)
at com.hp.hpl.jena.sparql.engine.QueryExecutionBase.getPlan(QueryExecutionBase.java:513)
at com.hp.hpl.jena.sparql.engine.QueryExecutionBase.startQueryIterator(QueryExecutionBase.java:490)
at com.hp.hpl.jena.sparql.engine.QueryExecutionBase.execResultSet(QueryExecutionBase.java:498)
at com.hp.hpl.jena.sparql.engine.QueryExecutionBase.execSelect(QueryExecutionBase.java:194)
at com.jenaproj.HelloJena.main(HelloJena.java:159) 
```

任何人都知道可能发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:00:21.867

```
java.lang.IncompatibleClassChangeError 
```

您的类路径中有不兼容的 jar 版本。

如果您使用 d2rq 中的 Jena jar，它们应该是正确的版本，否则您需要针对您希望使用的 Jena jar 编译的 d2rq 版本。

# ssl - 为什么在 Chef-Workstation 上使用刀命令时 Chef 会引发 SSL 错误？

> ID：15381033
> 
> 赞同：1
> 
> 时间：2013-03-13T09:12:42.233
> 
> 标签：ssl, chef-infra

当我们使用刀命令验证 Chef-Workstation 的成功设置或我们尝试上传 Chef-Cookbook 时，会发生 SSL 错误。使用以下命令：

```
knife client list
knife node list
knife cookbook upload cookbookname 
```

我们在 Chef-Workstation 上收到以下错误：

```
OpenSSL::SSL::SSLError: SSL_connect returned=1 errno=0 state=SSLv2/v3 read server hello A: unknown protocol 
```

为了解决这个错误，我们尝试使用 rackfile 软件创建以下 3 个文件：

```
hostname.key
hostname.pem
hostname.crt 
```

在厨师服务器上。

我们放置`hostname.pem`在`chef`服务器本身的文件夹内和`certs`工作站上的文件夹内。最后，我们尝试再次运行这些命令，但没有成功。任何解决 SSL 错误的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-04-21T20:02:16.330

Chef 服务器证书尚未拉入工作站的trusted_certs 目录。

`knife ssl fetch` 从您的 Chef 工作站运行命令 。这将从 Chef 服务器中提取证书并将其放置在 Workstation 的trusted_certs 目录中。trusted_certs 的默认位置在 chef-repo 目录中的 .chef/trusted_certs 目录中。

然后运行 `knife ssl check` 以验证证书。

在trusted_certs 目录中的证书将被任何knife 命令的执行所信任。

[https://docs.chef.io/workstation/getting_started/#get-ssl-certificates](https://docs.chef.io/workstation/getting_started/#get-ssl-certificates)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-31T23:16:19.687

您需要在每个*工作站*上注册该证书。此外，确保证书匹配正确的 URL（即 API 端点，而不是 Web 界面）

# c# - 任何数据提供者的 EF 通用存储库

> ID：15381035
> 
> 赞同：2
> 
> 时间：2013-03-13T09:12:50.630
> 
> 标签：c#, orm, repository-pattern, n-tier-architecture

我正在尝试使我的`EF`通用存储库更加“宽泛”，以便与任何数据提供程序（ORM）（如 EF、NHibernate、Amazon Services 等）一起使用，而无需与`EF`上下文进行任何绑定。

现在我有（要点链接）：

*   [存储库](https://gist.github.com/maksii/5150366)
*   [存储库](https://gist.github.com/maksii/5150372)

我已经重写了[IRepository](https://gist.github.com/maksii/5150401)和[Repository](https://gist.github.com/maksii/5150410)的一部分。

但不知道如何处理`EF`以及如何最终摆脱它。

你能给我一些文章或代码示例，以便在我的工作中找到正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:20:06.933

IRepository id 的想法是为Repository 中的**每个 ORM 进行不同的实现。**这样您就不必根据 ORM 本身来构建您的解决方案。

然后我认为当你试图让你的存储库来处理许多 ORM 时你做错了

***更新：***

您应该根据 IRepository 构建您的 BLL，而不需要对实现一无所知，然后您可以使用构造函数注入或依赖解析器将合适的实现传递给 BLL。

例如

```
public interface IProductRepository{
   void AddProduct(Product model);
   void UpdateProduct(Product model);
} 
```

EF实施：

```
public class ProductRpository : IProductRepository
{
   void AddProduct(Product model)
   {
      //Add any code you want maybe EF code.
   }
   void UpdateProduct(Product model)
   {
      //........
   }
} 
```

然后在 BLL 中，您依赖于 ProductRepository 上的 IProductRepository ：

```
public class ProductService
{
   private readonly IProductRepository repository
   public ProductService(IProductRepository repository){
      this.repository = repository
   }
// ........ the code of your BLL
} 
```

# ruby - Rspec：如何捕获示例、失败和未决计数

> ID：15381037
> 
> 赞同：0
> 
> 时间：2013-03-13T09:12:56.050
> 
> 标签：ruby, rspec

好吧，我正在努力实现一件事。一些花哨但值得尝试的东西..

当我跑步时`bundle exec rspec spec/`

我的测试用例通过了，我得到了

```
Finished in 5.12 seconds
38 examples, 0 failures, 1 pending 
```

我想使用 MAC OS`say`命令（请[在此处](http://www.gabrielserafini.com/blog/2008/08/19/mac-os-x-voices-for-using-with-the-say-command/)阅读）。这将在测试套件完成后说，`you have 38 examples, 0 failures and 1 pending example`.

例如命令

`say you have example_count examples, failures_count failures and pending_count pending examples`

要求是，我需要在可以与`say`命令一起使用的变量中捕获示例、失败和挂起。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:36:08.053

您可以编写自定义 RSpec 格式化程序并在那里发挥您的魔力。您还可以有多个格式化程序。

查看此资源以获取更多信息：

*   [自定义格式化程序（津津乐道）](https://www.relishapp.com/rspec/rspec-core/docs/formatters/custom-formatters)
*   [如何在 RSpec 2 中使用多个格式化程序](http://itreallymatters.net/post/1592879361/how-to-use-multiple-formatters-in-rspec-2#.UUBHfdH45DI)
*   [源代码 base_text_formatter.rb](https://github.com/rspec/rspec-core/blob/master/lib/rspec/core/formatters/base_text_formatter.rb)

# selenium - Firefox 无法启动套接字，在 Windows 7 上使用单声道（c#）

> ID：15381042
> 
> 赞同：1
> 
> 时间：2013-03-13T09:13:12.827
> 
> 标签：selenium, mono

我真的需要帮助，我是这个领域的新手。

我在 C# 上创建了简单的代码来使用 selenium Lib 打开 Firefox。我已经在 Mono (Xamarin 4.0) 上完成了我的代码。

如果我使用 .Net 运行时构建和运行我的代码，那么一切都运行良好。但是，当我切换到 Mono (3.0.6) 时，我遇到了这个问题：

> 未处理的异常：OpenQA.Selenium.WebDriverException：无法在 OpenQA.Selenium.Firefox.Internal.ExtensionConnection.ConnectToBrowser (Int6 4 timeToWaitInMilliSeconds) [0x00000] 在 45000 内启动套接字：0

我错过了什么？我应该怎么做才能解决这个问题？谢谢你们的帮助。

**编辑**

这是我的示例代码：

> ```
> using System;
> using OpenQA.Selenium;
> using OpenQA.Selenium.Firefox;
> using OpenQA.Selenium.Remote;
> using OpenQA.Selenium.Support.UI;
> 
> namespace AutomatedTesting
> {
>     class MainTest
>     {
>         public static void Main (string[] args)
>         {
>             IWebDriver driver = new FirefoxDriver ();
>             driver.Navigate ().GoToUrl ("http://www.google.com");
>         }
>     }
> } 
> ```

# java - AFreeChart OHLCDataset：如何删除日期轴上没有数据的空格？

> ID：15381045
> 
> 赞同：2
> 
> 时间：2013-03-13T09:13:16.483
> 
> 标签：java, android, charts, jfreechart, candlestick-chart

3 月 9 日至 10 日没有数据，这期间可以去掉空格吗？

![OHLC 图表](../Images/319a65b8c78529d27d310a9b3f21606d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T10:06:47.570

如果是周末数据产生了差距，你可以做这样的事情

```
SegmentedTimeline timeline = SegmentedTimeline.newMondayThroughFridayTimeline();
((DateAxis) chart.getXYPlot().getDomainAxis()).setTimeline(timeline); 
```

或者

```
final OHLCDataset dataset = new DefaultOHLCDataset("Series1", ohlc);
SegmentedTimeline timeline = SegmentedTimeline.newMondayThroughFridayTimeline();
chart = ChartFactory.createHighLowChart(this.getTitle(),xLabel, yLabel,dataset,timeline, false); 
```

如果不是周末，那么您将不得不更聪明地使用`SegmentedTimeline`api

[http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/axis/SegmentedTimeline.html](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/axis/SegmentedTimeline.html)

# javascript - Javascript、ajax 计时问题

> ID：15381046
> 
> 赞同：0
> 
> 时间：2013-03-13T09:13:19.530
> 
> 标签：javascript, ajax

我在调用 2 个单独的 ajax 函数时遇到问题。我有一个循环遍历页面上的所有复选框元素，然后如果它们被选中，它会调用一个 ajax 函数来移动我的数据库中的一些数据。然后在 for 循环之外，我调用另一个 ajax 函数，该函数进入我的数据库并将结果拉回我的 ID 元素。我不得不以不同的方式命名我的 httprequests，这样它们就不会打架，这两个功能都可以工作，但是我循环之外的那个功能很快，并且不会提取新的/更改的数据。如果我在这个外部循环函数之前发出警报，它就会起作用。我也尝试过使用 setTimeout(myFunctio(), 3000) 没有运气。

这是我的代码。

```
 function ungroupContact(){
    group = document.getElementsByName("moveGroup")[0].value;
    for(i=0;i<=25;i++){
        if(document.getElementById('checkBox'+i)){
            if(document.getElementById('checkBox'+i).checked){
                var email = document.getElementById('checkBox'+i).value;
                moveContact(email, group);
            }
        }
    }
    //alert("hello");
    //setTimeout(alert("hello"),12000);
    groupList1(group);
} 
```

这是我第一次发帖，对不起，如果这是noobish，目前正在攻读计算机科学学位。

感谢您的任何建议和/或帮助

抱歉，我应该知道要设置 ajax 函数。我使用了 w3schools 的布局。

```
 function moveContact(email, group){
    if (email=="" || group=="") 
      {
      document.getElementById("sidebar2").innerHTML="Something wrong was entered";
      return;
      } 
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp1=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp1=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp1.onreadystatechange=function()
      {
    if (xmlhttp1.readyState==1 || xmlhttp1.readyState==2 || xmlhttp1.readyState==3)
        {
        document.getElementById("sidebar2").innerHTML="<img src='images/loading.gif' alt='Loading'> ";
        }

      if (xmlhttp1.readyState==4 && xmlhttp1.status==200)
        {
        document.getElementById("sidebar2").innerHTML=xmlhttp1.responseText;
        }
      }
    xmlhttp1.open("GET","core/moveContact.php?group="+group+"&email="+email,true);
    xmlhttp1.send();
    return;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:18:10.177

您需要跟踪最后一个`moveContact()`异步 ajax 函数何时完成，然后（并且仅在那时）调用`groupList1()`.

由于您尚未披露`moveContact()`可能正在执行 ajax 调用的代码，因此我们不能真正推荐跟踪它们的具体细节。一种简单的技术是设置挂起 ajax 调用的计数器，并在 ajax 调用的每个成功处理程序中`moveContact()`，检查计数器现在是否已达到零。如果是这样，您可以调用`groupList1(group)`.

假设你添加了一个完成回调`moveContact()`，你可以这样做：

```
function ungroupContact(){
    group = document.getElementsByName("moveGroup")[0].value;
    var contactsRemaining = 0;
    for(i=0;i<=25;i++){
        if(document.getElementById('checkBox'+i)){
            if(document.getElementById('checkBox'+i).checked){
                ++contactsRemaining;
                var email = document.getElementById('checkBox'+i).value;
                moveContact(email, group, function() {
                    --contactsRemaining;
                    if (contactsRemaining === 0) {
                        groupList1(group);
                    }
                });
            }
        }
    }
}

function moveContact(email, group, fn){
    if (email=="" || group=="") {
      document.getElementById("sidebar2").innerHTML="Something wrong was entered";
      return;
    } 
    if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp1=new XMLHttpRequest();
    } else  {// code for IE6, IE5
        xmlhttp1=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp1.onreadystatechange=function() {
        if (xmlhttp1.readyState==1 || xmlhttp1.readyState==2 || xmlhttp1.readyState==3) {
            document.getElementById("sidebar2").innerHTML="<img src='images/loading.gif' alt='Loading'> ";
        }

        if (xmlhttp1.readyState==4 && xmlhttp1.status==200) {
            document.getElementById("sidebar2").innerHTML=xmlhttp1.responseText;
            // we are done now, so call the finish callback
            if (fn) {
               fn();
            }
        }
      }
    xmlhttp1.open("GET","core/moveContact.php?group="+group+"&email="+email,true);
    xmlhttp1.send();
    return;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T09:23:21.647

您可以在成功时添加回调函数，并在`groupList1`所有方法完成执行时在该函数中执行函数：

```
var finished = 0;
moveContact(email, group, function() {
   if (++finished == 25) {
       groupList1(group);
   }
}); 
```

# jquery - jquery ajax 没有正确接收 node.js 响应

> ID：15381047
> 
> 赞同：0
> 
> 时间：2013-03-13T09:13:28.720
> 
> 标签：jquery, ajax, node.js, express, passport.js

客户端代码：

```
 for(var i =0; i < 1; i++) {
    void function(item) {
        alert(item);
        $.ajax({
          url : "/documents/ajax/" + item,
          dataType : "text",
          success : function(data) {
            alert("data");
          },
          error: function (xhr, ajaxOptions, thrownError) {
            alert('Error: ' + error.message);
          }
        });
    }(featuredItems.eq(i).text().trim());
  } 
```

Node.js 代码：

```
app.get('/documents/ajax/:id.:format?', function(req, res) {
  console.log("Request Received");
  res.send("Response");
  res.end();

}); 
```

使用此代码，我无法在客户端接收响应。

如果我在我的节点服务器上执行 ctrl-c，则会弹出成功警报。

请帮忙/

更新：

如果我注释掉以下行，那么我会正确收到响应：

```
//  app.use(express.session({secret: 'secret_key'}));
//  app.use(passport.initialize());
//  app.use(passport.session()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T10:25:02.997

您正在使用旧式的 $.ajax; 阅读[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

否则没有发布/获取方法。

如果您认为 express 有问题，只需从终端创建新的 clear 应用程序进行**测试**：`express -s myapp`

这是我的 $.ajax 代码：

```
$('.form-2').on('submit', function(e) {
    e.preventDefault();
        var data = {};
            data.email = $('#email').val().toLowerCase();
            data.pass = $('#password').val();
        $.ajax({ url: '/login'
               , type: 'POST'
               , data: JSON.stringify(data)
               , contentType: 'application/json'
            })
            .done(function(data) {
                if (data.access == 'logged') ...
            });
}); 
```

服务器：

```
app.post('/login', function(req, res, next) {
    res.json({ access: 'logged' });
}); 
```

# oracle - 为什么我在尝试调用过程时会收到错误消息？

> ID：15381052
> 
> 赞同：1
> 
> 时间：2013-03-13T09:13:34.630
> 
> 标签：oracle, plsql, oracle11g, procedure

我创建了一个名为*greet*的过程：

```
create procedure greet(message in char(50))
as  
begin 
  dbms_output.put_line('Greet Message : ' || message);
end; 
```

该过程编译成功，但是当我尝试将其称为：

```
execute greet('Hey ! This is a self created procedure :)'); 
```

我收到一个错误：

```
execute greet('Hey ! This is a self created procedure :)')
Error report:
ORA-06550: line 1, column 7:  
PLS-00905: object SUHAIL.GREET is invalid
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored
06550\. 00000 -  "line %s, column %s:\n%s"
*Cause:    Usually a PL/SQL compilation error.
*Action: 
```

这是什么错误？为什么我会得到它？

*注意：“suhail”是连接到 oracle 服务器的当前用户的名称*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T09:20:43.130

我不相信您的程序编译成功。当我尝试在我的系统上编译它时，出现语法错误

```
SQL> create procedure greet(message in char(50))
  2  as
  3  begin
  4    dbms_output.put_line('Greet Message : ' || message);
  5  end;
  6  /

Warning: Procedure created with compilation errors.

SQL> sho err
Errors for PROCEDURE GREET:

LINE/COL ERROR
-------- -----------------------------------------------------------------
1/32     PLS-00103: Encountered the symbol "(" when expecting one of the
         following:
         := ) , default varying character large
         The symbol ":=" was substituted for "(" to continue. 
```

如果我解决了语法错误（您不能为输入参数指定长度），它可以工作

```
SQL> ed
Wrote file afiedt.buf

  1  create or replace procedure greet(message in char)
  2  as
  3  begin
  4    dbms_output.put_line('Greet Message : ' || message);
  5* end;
SQL> /

Procedure created.

SQL> set serveroutput on;
SQL> execute greet('Hey ! This is a self created procedure :)');
Greet Message : Hey ! This is a self created procedure :)

PL/SQL procedure successfully completed. 
```

如果您真的希望将输入参数声明为`CHAR`. 几乎总是，您应该使用`VARCHAR2`字符串。遇到真正需要`CHAR`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:59:47.190

这是工作老兄；

```
create or replace
procedure greet(message in char)
as  
begin 
  dbms_output.put_line('Greet Message : ' || message);
end; 
```

请参阅 char 数据类型的主要属性是输入数据的长度小于您指定的大小**它将添加空格**。varchar2 不会发生这种情况。

1.  在上述过程中，违反了 char 属性，因此它*几乎像 varchar2 一样对待*。因此，***如果您删除输入参数的大小，***它将起作用并且字符支持最大输入长度。

# ios - 将新的 xib 连接到从 UIView 继承的类

> ID：15381055
> 
> 赞同：0
> 
> 时间：2013-03-13T09:13:40.957
> 
> 标签：ios, objective-c, uiview

我正在使用最新的 SDK 开发一个 iOS 应用程序。

我想`UIView`使用 XIB 文件创建自定义和设置布局。

在这个 XIB 中，我`UIButton`使用 Interface Builder 添加了四个 s。

现在我想将这四个按钮连接到我的自定义`UIView`类并在那里管理`IBActions`。**这很重要，我必须这样做。**

要加载我做的xib：

```
- (id)initWithCoder:(NSCoder *)aDecoder {
    if ((self = [super initWithCoder:aDecoder]))
    {
        [self addSubview:[[[NSBundle mainBundle] loadNibNamed:@"MyCustomView"
                                                        owner:self
                                                      options:nil] objectAtIndex:0]];
    }
    return self;
} 
```

我也有一个故事板，并且我使用 Interface Builder添加了一个`UIView`到 main 。`ViewController`

我的问题是：**如何将新的 XIB 文件连接到`UIView`Interface Builder 上的自定义文件？**

我想我必须在 Interface Builder 上打开这个新的 xib 并将 main 设置`ViewController`为文件的所有者，并将我的自定义`UIView`类设置为这个新的 xib 上的视图的类，但我不确定。

并且，主要`ViewController`将这个新视图的类更改为我的 custom `UIView`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:01:59.343

在 Interface Builder 中，将自定义类设置为您的`CustomView`.Make 与此自定义类的连接。在要使用此 xib 的任何视图控制器中，只需使用`loadNibNamed:owner:options:`方法加载 nib。

```
CustomView *cView = [[[NSBundle mainBundle] loadNibNamed:@"CustomView"
                                                    owner:nil
                                                  options:nil] objectAtIndex:0];
[cView.button1 addTarget:self action:@selector(actnForBtn1:) forControlEvents:UIControlEventTouchUpInside];
[cView.label1 setText:@"sometext"];
[self.view addSubview:cView]; 
```

并在您的视图控制器中添加该方法`actnForBtn1:(id)sender`以在不同的视图控制器中执行不同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:19:42.807

在 View.h 中

```
+(View *)loadViewFromNib; 
```

在视图.m

```
+(View *)loadViewFromNib{
    return (View *)[[[NSBundle mainBundle] loadNibNamed:@"View" owner:self options:0] objectAtIndex:0];
} 
```

加载 View 调用

```
View *view = [View loadViewFromNib]; 
```

在您的 View.xib 文件中，将**Files Owner 类设置为 View**，将**Views 类设置为 View**，仅将 Outlets 连接到 View，**而不连接到 FilesOwner！**

# c# - 从另一个实体中选择字段后使用 Group By

> ID：15381058
> 
> 赞同：0
> 
> 时间：2013-03-13T09:13:48.330
> 
> 标签：c#, .net, linq, group-by

我有一个 linq 声明。

```
GalleryMedias
.Where(q => q.Gallery.Status == 1 && q.Media.Status == 1 && q.Media.MediaTypeId==1)
 .Select(q => new
{
   Id = q.Gallery.Id,
   Title = q.Gallery.Title,
   MediaTypeId = q.Media.MediaTypeId
 }
)
.OrderByDescending(q=>q.Id) 
```

如您所见，GalleryMedias 和 Gallery 之间存在关系。我从 Gallery 和 Media 中获取字段。我的结果目前看起来像这样。

```
Id  Title    MediaTypeId
355 record1  1
355 record1  1
354 record2  1
354 record2  1
353 record3  1 
```

所以，我想在选择后按他们分组。但是字段不是来自 GalleryMedias，所以我无法进行分组。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:01:04.403

在 Select 之后，您的 GalleryMedias 源中的字段不可用，因为您已选择到没有引用 GalleryMedias 源的匿名对象集合中。

如果您想要拉出所有其他 GalleryMedias 属性以便在 GroupBy 中使用它们，您可以执行与以下示例类似的操作，其中 GalleryMedias 源对象在 Select 语句中被拉出。

```
GalleryMedias
.Where(q => q.Gallery.Status == 1 && q.Media.Status == 1 && q.Media.MediaTypeId==1)
 .Select(q => new
{
   Id = q.Gallery.Id,
   Title = q.Gallery.Title,
   MediaTypeId = q.Media.MediaTypeId,
   GalleryMedia = q //Here you are including the GalleryMedia object in your annonymous object
 }
)
.GroupBy(g => g.GalleryMedia.Property) //You can now access the GalleryMedia's properties in the GroupBy
.OrderByDescending(q=>q.Id) 
```

# mysql - Mysql树表连接和计算行数

> ID：15381059
> 
> 赞同：0
> 
> 时间：2013-03-13T09:13:48.973
> 
> 标签：mysql

我在下面有这三个表。我想使用 MySQL 查询加入他们。在我提供的表格下方，我还提供了我的输出应该是什么样子。

`GameTable`：

```
GameID  GameName    
1       NvsA
2       NvsB
3       DvsA
4       NvsE 
```

`PlayerOnGame`：

```
GameID  PlayerName  PlayerNumber  PlayerID
1       Clement     7             10
1       Niyoyita    8             11
2       Clement     8             10
2       David       6             5 
```

`PlayerdataTable`：

```
GameID  Action  PlayerNumber
1       kick    7
1       pass    8
1       Run     7
1       Kick    7
2       Kick    8
2       Pass    6
2       Run     8
2       Run     8 
```

仅输出`PlayerName = Clement`：

```
GameName  Action  ActionCount
NvsA      Kick    2
NvsA      Run     1
NvsB      Kick    1
NvsB      Run     2 
```

请问有人可以帮我查询以获得此输出吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:17:18.927

您可以使用此查询来计算

```
SELECT
    gt.GameName,
    pdt.Action,
    count(pdt.Action) AS ActionCount
FROM GameTable AS gt
INNER JOIN PlayerdataTable AS pdt ON pdt.GameID = gt.GameID
INNER JOIN PlayerOnGame AS pg ON pg.GameID = pdt.GameID AND pg.PlayerNumber = pdt.PlayerNumber
WHERE pg.PlayerName = 'Clement'
GROUP BY gt.GameID , pdt.Action 
```

# java - 如何在运行时分页由 ajax 调用生成的表

> ID：15381060
> 
> 赞同：0
> 
> 时间：2013-03-13T09:13:51.330
> 
> 标签：java, jquery, ajax, jsp

我通过使用 AJAX 调用 onchange of dropdown 调用 servlet，根据用户的选择生成一个表。该表生成正常，但问题是我想分页该表以及它有很多行。我尝试了很多 jquery 插件，但由于大多数插件都需要仅在 ajax 调用时生成的表 id，因此无法对表进行分页。请帮助...！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:18:57.213

只需在 AJAX 请求的回调中调用分页插件`success`，因为此时该表将存在并且您应该知道`id`该表的名称。如果您当时不知道`id`表的名称，最简单的解决方案是修改服务器端代码以将其作为响应的一部分传回（作为[JSON](http://json.org)对象的属性）。

如果这不是一个选项，那么您将不得不遍历 DOM 以获取对表的引用，然后从中获取`id`。我需要知道页面的 HTML 结构才能准确地告诉您它的外观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:22:59.463

你可以使用这个插件
[http://tablesorter.com/docs/](http://tablesorter.com/docs/)

您可以通过引用此 url [http://tablesorter.com/docs/example-trigger-sort.html从外部触发排序](http://tablesorter.com/docs/example-trigger-sort.html)

# c# - 将数据从datagridview插入数据库

> ID：15381066
> 
> 赞同：2
> 
> 时间：2013-03-13T09:14:03.013
> 
> 标签：c#, .net, sql-server, datagridview

我希望将我的 datagridview 中的值插入到 sql server 数据库中。我不确定这是否有效，但我不想使用文本框。

我的逻辑是使用两个 for 循环（比如 i 和 j）遍历 datagridview 的每个单元格，但我不确定这是否有效。

请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:18:24.007

以一种或另一种方式应该是可能的，但是为什么要从 GridView 将数据加载到后端，而不是加载和使用最初用于填充和呈现 UI 控件 ( `DataGridView`) 的相同数据？

在此处查看我的答案：[https](https://stackoverflow.com/a/7939179/559144) ://stackoverflow.com/a/7939179/559144当您有一个`DataTable`用于绑定和显示数据的方法时，`DataGridView`您可以轻松地像这样循环，然后您可以使用网格的编辑模式来捕获用户界面中的最终用户更改并在程序逻辑/后端处理它们并将更改保存到数据库。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T09:45:13.107

如果您的应用程序是窗口应用程序并显示数据库中表中的所有字段，则应将 Datagridview 与`SqlDataAdapter`.For example-一起使用

```
private BindingSource bindingSource = null;
private SqlDataAdapter sqlDataAdapter = null;
DataTable dataTable=null;

private void Form_Load(object sender, EventArgs e)
{
     dataTable = new DataTable();
     sqlDataAdapter.Fill(dataTable);//Fill Data To bind Datagridview
     bindingSource = new BindingSource();
     bindingSource.DataSource = dataTable;
     dataGridViewTrial.DataSource = bindingSource;
}

private void btnSave_Click(object sender, EventArgs e)
{
     try
       {
           sqlDataAdapter.Update(dataTable);
       }
       catch (Exception exceptionObj)
          {
             MessageBox.Show(exceptionObj.Message.ToString());
          }
} 
```

另请参见[此处](http://khanrahim.wordpress.com/2010/04/10/insert-update-delete-with-datagridview-control-in-c-windows-application/)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-13T12:28:15.833

嗨，我找到了一个答案......一个更简单的代码，它将数据从 datagridview 插入到 SQL 数据库。请注意，您的列名是在此处预定义的。

```
private void button1_Click(object sender, EventArgs e)
    {
        string str = System.Environment.MachineName;
        SqlConnection sconn = new SqlConnection("Data Source='" + str + "';Initial Catalog=main;Integrated Security=True");
        sconn.Open();
        DataSet ds = new DataSet();
        for(int i=0; i< dataGridView1.Rows.Count;i++)
            {
                SqlDataAdapter da = new SqlDataAdapter("insert into demo values('" + dataGridView1.Rows[i].Cells[0].Value + "','" + dataGridView1.Rows[i].Cells[1].Value + "','" + dataGridView1.Rows[i].Cells[2].Value + "')",sconn);
                    da.Fill(ds, "main");

        conn.Close(); 
```

}

# ruby-on-rails - 如何使用carrierwave，resize_and_pad方法和jpg放置透明背景？

> ID：15381068
> 
> 赞同：1
> 
> 时间：2013-03-13T09:14:07.937
> 
> 标签：ruby-on-rails, carrierwave, rmagick

我正在使用 Carrierwave 和 RMagick 将图像上传到我的 Rails 应用程序。我有一个`image_uploader`这样的：

```
class ImageUploader < CarrierWave::Uploader::Base

  # ... Other stuff ...
  process :convert => 'png'

  def filename
    super.chomp(File.extname(super)) + '.png'
  end

  # ...

  version :resized_image do
    process :resize_and_pad => [X, Y]
  end

  # ...
end 
```

我的问题是，当我上传 png 图像时，该`resize_and_pad`方法是添加透明背景以适合指定的尺寸。但是当我上传 jpg 图像时，它被转换为 png 但背景是白色而不是透明的，可能是因为图像在调整大小后而不是之前被转换为 png。

那么，有没有办法解决这个问题呢？是否有任何可能的方法来确保在将透明背景添加到调整大小的图像`convert`之前调用该方法？`resize_and_pad`

**编辑**

我举了一个例子来让我的问题更清楚：

上传的 JPG 为普通图片，例如 300px × 300px。我的`resize_and_pad`方法将图像填充到 300px × 400px。我要填充的那些 100px 必须是透明的，但是由于 JPG 不能有透明背景，我尝试在应用`resize_and_pad`. 我的问题是最终结果是具有白色背景而不是透明背景的图像。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-13T14:58:12.437

JPG 文件不支持透明度，如果您在 JPEG 图像中看到白色背景，那是因为它被白色填充，因此当您的上传者处理 JPEG 图像时，它会忠实地转换白色背景。

# c# - 如何覆盖 DynamicMetaObject.BindConvert 以接受 Cast to Interface

> ID：15381069
> 
> 赞同：4
> 
> 时间：2013-03-13T09:14:08.257
> 
> 标签：c#, dynamic, proxy

使用下面的代码，我试图让 BindConverter 的覆盖正确，以允许转换到接口 T

```
class DynamicProxy<T> : DynamicObject
{
    private T t;
    public DynamicProxy(T t)
    {
        this.t = t;
    }
    public override DynamicMetaObject GetMetaObject(Expression parameter)
    {
        return new DynamicProxyMetaObject(parameter, this);
    }
    class DynamicProxyMetaObject : DynamicMetaObject
    {
        public DynamicProxyMetaObject(Expression expression, DynamicObject value)
            : base(expression, BindingRestrictions.Empty, (object)value)
        {                
        }
        public override DynamicMetaObject BindConvert(ConvertBinder binder)
        {
            return base.BindConvert(binder);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T10:17:56.900

这是 BindConvert 的工作实现：

```
public override DynamicMetaObject BindConvert(ConvertBinder binder)
{
    BindingRestrictions restrictions 
        = BindingRestrictions.GetTypeRestriction(Expression, LimitType);
    //if the type requested is compatible with the 
    //instance, there's no conversion to be done.
    if (binder.Type.IsAssignableFrom(LimitType))
        return binder.FallbackConvert(
            new DynamicMetaObject(Expression, restrictions, Value));

    if (LimitType.IsGenericType && 
        LimitType.GetGenericTypeDefinition().Equals(typeof(DynamicProxy<>)))
    {
        //get the type parameter for T
        Type proxiedType = LimitType.GetGenericArguments()[0];
        //now check that the proxied type is compatible 
        //with the desired conversion type
        if(binder.ReturnType.IsAssignableFrom(proxiedType))
        {
            //this FieldInfo lookup can be cached by 
            //proxiedType in a static ConcurrentDictionary
            //to cache the reflection for future use
            FieldInfo tField = LimitType.GetField("t", 
                BindingFlags.Instance | BindingFlags.NonPublic);
            //return a field expression that retrieves the 
            //private 't' field of the DynamicProxy
            //note that we also have to convert 'Expression'
            //to the proxy type - which we've already ascertained
            //is the LimitType for this dynamic operation.
            var fieldExpr = Expression.Field(
                Expression.Convert(Expression, LimitType), tField);
            //but because we're allowing bases or interfaces of 'T',
            //it's a good idea to chuck in a 'Convert'
            return new DynamicMetaObject(
                Expression.Convert(fieldExpr, binder.ReturnType),
                restrictions);
        }
    }

    return base.BindConvert(binder);
} 
```

这是一个测试：

```
[TestMethod]
public void TestConvert()
{
    List<string> myList = new List<string>() { "Hello", "World" };
    //proxy a List<string>
    DynamicProxy<List<string>> proxy1 =
        new DynamicProxy<List<string>>(myList);

    dynamic proxyDynamic = proxy1;
    //dynamic 'cast' to List<string> (the actual 'T')
    //should return same instance, because the conversion
    //simply gets the private 't' field.
    List<string> fromDynamic1 = (List<string>)proxyDynamic;
    Assert.AreSame(myList, fromDynamic1);
    //dynamic 'cast' to a base or interface of T
    //In this case, IEnumerable<string>
    IEnumerable<string> fromDynamic2 = (IEnumerable<string>)proxyDynamic;
    Assert.AreSame(myList, fromDynamic2);
} 
```

并且测试您所要求的确切内容 - 即`T`接口在哪里 - 也同样有效：

```
[TestMethod]
public void TestConvert2()
{
  List<string> myList = new List<string>() { "Hello", "World" };
  DynamicProxy<IEnumerable<string>> proxy =
    new DynamicProxy<IEnumerable<string>>(myList);

  dynamic proxyDynamic = proxy;
  var fromDynamic = (IEnumerable<string>)proxyDynamic;
  Assert.AreSame(myList, fromDynamic);      
} 
```

*正如测试所示，您不仅可以动态转换为`T`.，还可以动态转换为`T`. 但是，请注意，实现首先会检查目标类型是否是 的基/接口`DynamicProxy<T>`- 所以动态转换`object`（尽管我不知道为什么要这样做）实际上会返回代理实例。您可以通过删除`if`第一行之后的第一条语句来禁用该行为`BindConvert`。*

`LimitType`方法中的使用`BindConvert`至关重要，因为它为您提供了隐藏在动态表达式后面的对象的运行时类型。元对象的`Expression`属性通常只有一个类型`Object`- 这不利于钓鱼到对象和调用方法或读取属性/字段，这是我们需要做的以支持动态转换。

因此，使用`LimitType`使我们能够查看实际`DynamicProxy<T>`实例内部，既`T`可以获取实例字段，也可以访问实例字段`t`（它是私有的，但表达式编译器可以处理）。在确认所需的转换目标类型与 的 兼容`T`后`DynamicProxy<T>`，我们发出一个表达式，该表达式读取该字段并返回对象作为转换结果。

顺便说一句 - 在第二个测试中，我们目前*无法*动态转换为`List<string>`，即使我们传入的代理对象是`List<string>`- 因为这需要对初始类型检查逻辑进行轻微更改，然后对存储在中的实例进行自省't' 字段检查它的实际类型是否与请求的转换类型兼容。我没有以这种方式完成实施，因为我认为您不太可能这样做。

# java - 私有类的构造函数是否必须是私有的？

> ID：15381077
> 
> 赞同：3
> 
> 时间：2013-03-13T09:14:32.803
> 
> 标签：java

如果一个类是私有的，那么构造函数也必须是私有的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T09:16:24.480

不，没有这样的限制。参见[JLS §8.8.3。构造函数修饰符](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.8.3)。

值得指出的是，只能声明一个嵌套类`private`。JLS 允许此类的构造函数使用任何有效的访问修饰符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T09:16:56.287

如果您的意思是嵌套类，**答案是否定**的。将内部类设为私有使其只能在外部类中使用。

**编辑：**看起来外部类可以完全访问内部类的内部，而不管它们的访问修饰符如何。这使我的上述推理无效，但无论如何，没有这样的限制。奇怪的是，现在看来，如果内部类是`private`，那么它的构造函数*本质上就是* `private`，而不管它的访问修饰符是什么，因为没有其他人可以调用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T09:50:17.500

不，它没有。相反，如果您使用外部类的私有构造函数（私有类的默认构造）创建内部类的实例，Java 将创建一个附加类以防止访问冲突并让 JVM 满意

如果你编译这个类

```
class Test {
    private class Test2 {
        Test2() {
        }
    }
    Test() {
        new Test2();
    }
} 
```

javac会创建Test.class，Test@Test2.class

如果你编译这个类

```
class Test {
    private class Test2 {
    }
    Test() {
        new Test2();
    }
} 
```

javac 将创建 Test.class、Test@Test2.class、Test$1.class

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T09:21:10.533

不，它不是固定的，您可以将其设置为私有/公共/任何您想要的。

但在某些情况下，当您不想让其他类创建此类的对象时，我更喜欢将构造函数设为私有。那么在这种情况下，您可以通过将构造函数设置为私有来执行此类操作。

```
private class TestClass{
    private TestClass testClass=null;
    private TestClass(){
         //can not accessed from out side
         // so out side classes can not create object
         // of this class
    }

    public TestClass getInstance(){
      //do some code here to
      // or if you want to allow only one instance of this class to be created and used
      // then you can do this
      if(testClass==null)
           testClass = new TestClass();

      return testClass;
    }
} 
```

顺便说一句，这取决于您的要求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T09:34:32.177

它不必*是*私有的。但它可以。例子：

```
public class Outer {

    // inner class with private constructor
    private class Inner {
        private Inner() {
            super();
        }
    }

    // this works even though the constructor is private.
    // We are in the scope of an instance of Outer
    Inner i = new Inner();

    // let's try from a static method
    // we are not in the scope of an instance of Outer
    public static void main(String[] args) {

        // this will NOT work, "need to have Inner instance"
        Inner inner1 = new Inner();

        // this WILL work
        Inner inner2 = new Outer().new Inner();
    }
}

// scope of another class
class Other {
    // this will NOT work, "Inner not known"
    Inner inner = new Outer().new Inner(); 
} 
```

如果您在私有内部类上使用`private`或构造函数，这没有什么区别。`public`原因是内部类实例是外部类实例的一部分。这张照片说明了一切：

![内部类是外部类的一部分。 这就是为什么内部类的所有私有成员都可以从外部类访问。](../Images/15d8bbc4ccda9996b615059b3ba442f6.png)

请注意，我们谈论的是**内部类**。如果嵌套类是`static`，官方术语是**静态嵌套类**，这与内部类不同。无需外部类实例，只需调用即可访问公共静态嵌套类`new Outer.Inner()`。有关内部类和嵌套类的更多信息，请参见此处。[http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)

# emulation - 虚拟按钮未出现在模拟的 Android 4.2 系统上

> ID：15381083
> 
> 赞同：0
> 
> 时间：2013-03-13T09:14:44.050
> 
> 标签：emulation, android-sdk-tools, android-4.2-jelly-bean

我创建了一个 Android 4.2 AVD。对于我当前项目的需要，主屏幕方向是横向。选择了软件密钥选项。模式设置为 xhdpi，就像 Galaxy Nexus 手机一样。

当我启动模拟器时，我在按钮应该出现的右侧看到一条黑色条纹，但它仍然是黑色的。因此，由于模拟的物理键被禁用，因此无法触发 Back 操作。

该问题可以通过将模拟器配置为纵向模式然后在启动后旋转它来解决；按钮按预期显示。这会导致问题，因为窗口会自动缩小以适合我的显示器；旋转完成后，我没有找到在运行时恢复 1:1 缩放的任何快捷方式。这很重要，因为我希望看到像素完美的结果。

我正在使用昨天更新的 SDK 版本 21 和平台工具版本 16.0.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:11:11.293

自己找到了解决方案...这是一种解决方法，可以实现 1:1 比例并且软件按钮可以正常工作。

*   让 AVD（Galaxy Nexus 或从中克隆）处于纵向模式。
*   `-scale 1`使用选项从命令行运行模拟器；这是强制 1:1 像素完美比例的魔力，即使窗口在启动时不适合屏幕。默认情况下，自动缩小尺寸恰好适合显示器。
*   使用 Ctrl+F11 或 Ctrl+F12 旋转显示器以获得横向模式。

# android - 更改方向时的 StrictMode$InstanceCountViolation

> ID：15381085
> 
> 赞同：4
> 
> 时间：2013-03-13T09:14:46.633
> 
> 标签：android, android-orientation, android-strictmode

我有一个带有标签的活动，当我旋转设备时我遇到了问题。当我以纵向模式启动应用程序时，然后旋转到横向并再次旋转到纵向，然后应用程序崩溃并且在 LogCat 中我看到：

```
android.os.StrictMode$InstanceCountViolation: class com.example.MyActivity; instances=2; limit=1 
```

这是我的活动`onCreate()`方法：

```
mTabManager = new TabManager(this, mTabHost, R.id.realtabcontent, R.id.realtabcontentleft);
mTabManager.addTab(mTabHost.newTabSpec(TAB1_ID).setIndicator(indicator1), Fragment.class, args, SendType.SEND1);
mTabManager.addTab(mTabHost.newTabSpec(TAB2_ID).setIndicator(indicator2), Fragment.class, args, SendType.SEND2);

if (savedInstanceState != null || shouldSetCurrentTag) {
    mTabHost.setCurrentTabByTag(currentTabTag);
} 
```

片段类 - 这是扩展的空类`SherlockFragment`（我使用 ActionBarSherlock）。

这里是`TabManager`类：

```
public static class TabManager implements TabHost.OnTabChangeListener {

    private final FragmentActivity mActivity;
    private final TabHost mTabHost;
    private final int mContainerId;
    private final int mLeftContainerId;
    private boolean mIsDualPane = false;
    private final HashMap<String, TabInfo> mTabs = new HashMap<String, TabInfo>();
    TabInfo mLastTab;

    static final class TabInfo {

        private final String tag;
        private final String leftContainerTag;
        private final Class<?> clss;
        private final Bundle args;
        private Fragment fragment;
        private Fragment leftContainerFragment;

        TabInfo(String _tag, String _leftTag, Class<?> _class, Bundle _args) {
            tag = _tag;
            leftContainerTag = _leftTag;
            clss = _class;
            args = _args;
        }
    }

    static class DummyTabFactory implements TabHost.TabContentFactory {

        private final Context mContext;

        public DummyTabFactory(Context context) {
            mContext = context;
        }

        @Override
        public View createTabContent(String tag) {
            View v = new View(mContext);
            v.setMinimumWidth(0);
            v.setMinimumHeight(0);
            return v;
        }
    }

    public TabManager(FragmentActivity activity, TabHost tabHost,
            int containerId, int leftContainerId) {
        mActivity = activity;
        mTabHost = tabHost;
        mContainerId = containerId;
        mLeftContainerId = leftContainerId;
        mTabHost.setOnTabChangedListener(this);

        View leftContainerView = activity.findViewById(leftContainerId);
        mIsDualPane = leftContainerView != null
                && leftContainerView.getVisibility() == View.VISIBLE;
    }

    public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args,
            SendType sendType) {
        tabSpec.setContent(new DummyTabFactory(mActivity));
        String tag = tabSpec.getTag();
        String leftTag = tag + "_LEFT";

        if (mIsDualPane) {
            if (args == null) {
                args = new Bundle();
            }

            args.putInt(BoxTypeFragment.EXTRA_BOX_TYPE, sendType.ordinal());
        }

        TabInfo info = new TabInfo(tag, leftTag, clss, args);

        // Check to see if we already have a fragment for this tab, probably
        // from a previously saved state. If so, deactivate it, because our
        // initial state is that a tab isn't shown.
        info.fragment = mActivity.getSupportFragmentManager()
                .findFragmentByTag(tag);
        if (info.fragment != null && !info.fragment.isDetached()) {
            FragmentTransaction ft = mActivity.getSupportFragmentManager()
                    .beginTransaction();
            ft.detach(info.fragment);
            ft.commit();
            mActivity.getSupportFragmentManager().executePendingTransactions();
        }

        if (mIsDualPane) {
            // if this is a tablet, then check if we already have a left
            // container fragment and then detach it
            info.leftContainerFragment = mActivity.getSupportFragmentManager()
                    .findFragmentByTag(leftTag);
            if (info.leftContainerFragment != null
                    && !info.leftContainerFragment.isDetached()) {
                FragmentTransaction ft = mActivity.getSupportFragmentManager()
                        .beginTransaction();
                ft.detach(info.leftContainerFragment);
                ft.commit();
                mActivity.getSupportFragmentManager()
                        .executePendingTransactions();
            }
        }

        mTabs.put(tag, info);
        mTabHost.addTab(tabSpec);
    }

    @Override
    public void onTabChanged(String tabId) {
        TabInfo newTab = mTabs.get(tabId);

        if (mLastTab != newTab) {
            FragmentTransaction ft = mActivity.getSupportFragmentManager()
                    .beginTransaction();

            if (mLastTab != null) {
                if (mLastTab.fragment != null) {
                    ft.detach(mLastTab.fragment);
                }

                if (mIsDualPane) {
                    if (mLastTab.leftContainerFragment != null) {
                        ft.detach(mLastTab.leftContainerFragment);
                    }
                }
            }

            if (newTab != null) {
                if (newTab.fragment == null) {
                    newTab.fragment = Fragment.instantiate(mActivity,
                            newTab.clss.getName(), newTab.args);
                    newTab.fragment.setHasOptionsMenu(true);
                    ft.add(mContainerId, newTab.fragment, newTab.tag);
                } else {
                    ft.attach(newTab.fragment);
                }

                if (mIsDualPane) {
                    if (newTab.leftContainerFragment == null) {
                        newTab.leftContainerFragment = Fragment.instantiate(
                                mActivity, BoxTypeFragment.class.getName(),
                                newTab.args);
                        ft.add(mLeftContainerId, newTab.leftContainerFragment,
                                newTab.leftContainerTag);
                    } else {
                        ft.attach(newTab.leftContainerFragment);
                    }
                }
            }

            mLastTab = newTab;
            ft.commit();
            mActivity.getSupportFragmentManager().executePendingTransactions();
        }
    }
} 
```

我试图`static`从班级和`final`活动变量中删除，但没有帮助。

我认为当我旋转时，我的活动应该被销毁并重新创建，但可能有某个地方引用它并且不能被销毁。

有人可以帮助我吗？

编辑：我创建了一个空的 android 应用程序项目，其中只有一个活动和应用程序类，我在其中设置了严格模式，我得到了同样的错误。我将其用于严格模式：

```
public class StrictModeWrapper {
public static void init(Context context) {
    int appFlags = context.getApplicationInfo().flags;

    if ((appFlags & ApplicationInfo.FLAG_DEBUGGABLE) != 0) {
        StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()
            .detectAll()
            .penaltyLog()
            .build());

        StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder()
            .detectAll()
            .penaltyLog()
            .penaltyDeath()
            .build());
    }
}
} 
```

# iphone - UIWebView 播放被其他 viewcontroller 覆盖的视频

> ID：15381090
> 
> 赞同：0
> 
> 时间：2013-03-13T09:15:11.187
> 
> 标签：iphone, ios, objective-c

我的应用视图控制器结构如下：

self.window.rootViewController = menuViewController;

MainViewController 覆盖 menuViewController。在 MainViewController 中呈现一个 Web 视图控制器

```
[self presentViewController:webViewController animated:YES completion:nil]; 
```

在这个webViewController点击一个超链接打开一个视频网页，点击这个页面中的播放按钮，一个全屏的视频播放视图闪烁然后消失，我关闭当前的网页视图并将MainViewController移出，发现视频页面实际上是覆盖的菜单视图控制器。

两个问题：

1.  我应该如何将视频播放控制器启动以呈现 Web 视图？

2.  当我单击视频播放控制器中的“完成”按钮时，出现异常。感觉像继承问题。请告诉我怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:38:14.877

我终于通过 set self.window.rootViewController = mainViewController; 解决了这个问题

为什么苹果不将弹出视频视图控制器设置为窗口现有视图的顶部？

# c# - 为什么在 C# 中不允许在成员初始化程序中这样做，但在 VB.Net 中允许我

> ID：15381091
> 
> 赞同：17
> 
> 时间：2013-03-13T09:15:11.703
> 
> 标签：c#, vb.net

我正在将一个 VB.Net 应用程序转换为 C#，并注意到在 VB.Net 代码中，有一个私有成员变量，它是`Me`这样初始化的：

```
Private m_ClassA As New MyCollection(Of ClassA)(Me) 
```

当我将其转换为这样的 C# 代码时：

```
private MyCollection<ClassA> _classA = new MyCollection<ClassA>(this); 
```

我有错误

> 参数是`value`而参数类型是`ref`。

如果我把`ref`参数放在前面`this`，我会得到错误

> 不能`this`在成员初始化器中使用。

我在这里读到成员在基类之前初始化，因此`this`不能在成员中使用，因为它可能尚未初始化。我的问题是为什么它在 VB.Net 而不是 C# 中是合法的？

这取决于编译器以不同的方式处理它吗？两人的行为不同，这似乎很奇怪。

为了解决这个问题，我想我会在构造函数中初始化成员。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T09:27:09.510

根据`MSDN`.

> 仅在实例构造函数、实例方法或实例访问器的块中才允许 this 访问。

这可以在[这里](http://msdn.microsoft.com/en-gb/library/aa691361%28v=vs.71%29.aspx)阅读。

除了实例/构造函数之外，您无法在任何地方访问它。所以你也不能做这样的事情：

```
public class Foo
{
  private Foo _foo = this;
} 
```

正如您所说，`C#`您将不得不使用方法/构造函数。

```
public class Foo
{
  private Foo _foo;
  public Foo()
  {
    _foo = this;
  }
  public void InitializeFoo()
  {
    _foo = this;
  }
} 
```

`MSDN`还针对`Me`:

> Me 关键字提供了一种方法来引用当前执行代码的类或结构的特定实例。Me 的行为类似于引用当前实例的对象变量或结构变量。

听起来好像一旦类执行了，您就可以访问`this`，但只能在实例方法中访问，而在`VB.NET`类执行时您可以访问，因此您不能像您所说的那样使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T09:23:25.150

VB 在 .NET 和 VB.NET 之前就存在了，因此存在一些在 .NET 引入时开发人员不想删除的功能。另一个这样的功能是“On Error Resume Next”，它在 C# 中也不存在。

# python - 应该如何使用 Amazon SQS？导入/处理场景

> ID：15381092
> 
> 赞同：2
> 
> 时间：2013-03-13T09:15:18.697
> 
> 标签：python, amazon-web-services, amazon-sqs, amazon-sns

我想协调告诉服务器 B 从服务器 A 启动一个进程，然后当它完成后，在服务器 A 上运行一个导入脚本。我很难弄清楚在这种情况下我应该如何正确使用 SQS .

服务器 A：主专用服务器 服务器 B：云处理服务器

*   服务器 A 通过 SNS 向 SQS 发送消息以说“开始进程”
*   服务器 B 不断轮询 SQS 以获取“启动进程”消息
*   服务器 B 在 SQS 上找到“启动进程”消息
*   服务器 B 运行“process.sh”文件
*   服务器 B 完成运行“process.sh”文件
*   服务器 B 从 SQS 中删除“启动进程”
*   服务器 B 通过 SNS 向 SQS 发送消息说“开始导入”
*   服务器 A 轮询不断轮询 SQS 以获取“开始导入”消息
*   服务器 A 在 SQS 上找到“开始导入”消息
*   服务器 A 运行 import.sh
*   服务器 A 完成运行“import.sh”
*   服务器 A 从 SQS 中删除“开始导入”

这是应该如何使用 SQS 还是我完全忽略了这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:50:19.693

亚马逊提供 SQS 作为服务，我几乎感到抱歉。它不是“简单队列”，在您的情况下可能不是最佳选择。具体来说：

*   它在低容量消息传递中表现不佳（某些消息需要 90 秒才能到达）
*   不保留消息顺序
*   它喜欢多次传递信息
*   他们向你收取投票费用

好消息是它可以很好地扩展。但是你猜怎么着，你没有规模问题，所以处理 SQS 的古怪行为只会让你无缘无故地感到痛苦。我强烈建议您查看 RabbitMQ，它的行为与您想要一个简单队列的行为完全一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T21:42:54.600

好吧... SQS 不支持消息路由，以便将消息分配给服务器 A 或 B，这就是为什么可用的解决方案之一：创建 SNS 主题“服务器 a”和“服务器 b”。这些主题应该将消息发送到 SQS，您的应用程序将拉取这些消息。还可以实现网络挂钩 - SNS 事件的订阅者，它将分析消息并对您的应用程序进行回调。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T12:41:19.380

您布置的内容在理论上可行，但我不再将消息直接放入队列，而是将这些消息放入 SNS 主题，然后将队列订阅到主题以将它们带到那里 - 为您提供更大的更改灵活性无需每次接触代码或生产中的服务器即可完成后续工作。

对于您现在正在做的事情，SNS 部分是不必要的，但使用将允许您更改功能而无需触及您现有的服务器。

例如：需要更改，并且您想要添加一个进程 C，该进程 C 每次在服务器 B 上运行“启动进程”时也会启动。通过 AWS SNS 控制台，您可以将消息的第二个副本定向到之前执行的另一个队列不存在，并设置一个从该队列轮询的服务器 C（扇出模式）。

此外，我在初始推出期间经常喜欢做的是向 SNS 添加通知，这样我就知道发生了什么，即每次发生“启动进程”事件时，我都会在我的手机（或电子邮件地址）上订阅该主题，这样我就知道了通知 - 我可以实时监控正在（或没有）发生的事情。在生产部署后经过一段时间后，我可以进入 AWS 控制台并简单地从该过程中取消订阅我的电子邮件/单元格 - 无需每次接触任何服务器或代码。

# java - LWJGL 混淆纹理映射

> ID：15381093
> 
> 赞同：1
> 
> 时间：2013-03-13T09:15:25.503
> 
> 标签：java, opengl, graphics, lwjgl

我一直在做一个非常简单的游戏，我决定加入一些基本的纹理。我正在试验代码，出于某种原因，我不知道为什么，我无法正确映射纹理。现在，我只是想将一个绿色矩形（512 x 64 .png 文件）映射到大小为 640 x 480 的屏幕底部。这个绿色矩形应该代表地面。这是我尝试失败的图像： ![失败](../Images/d10e923230938e8cfcf62f4833e7084b.png)

以下是相关代码：

在我创建的 Boot 类中，我调用了这个函数：

```
 public void initGL() {
        GL11.glMatrixMode(GL11.GL_PROJECTION);
        GL11.glLoadIdentity();
        GL11.glOrtho(0, gameWidth, gameHeight, 0, 1, -1);
        GL11.glMatrixMode(GL11.GL_MODELVIEW);
        GL11.glEnable(GL11.GL_TEXTURE_2D);
    } 
```

在我创建的地面类中，我调用了一个绘图函数。纹理在 Boot 类中加载，并设置为我在 ground.draw() 函数中绑定和使用的受保护变量。

```
 public void draw() {
        this.texture.bind();
        GL11.glLoadIdentity();
        GL11.glTranslatef(0, 0, 0);
        GL11.glBegin(GL11.GL_QUADS);
            GL11.glTexCoord2f(0, 0);
            GL11.glVertex2f(0, 480 - height);
            GL11.glTexCoord2f(1, 0);
            GL11.glVertex2f(640, 480 - height);
            GL11.glTexCoord2f(1, 1);
            GL11.glVertex2f(640, 480);
            GL11.glTexCoord2f(0, 1);
            GL11.glVertex2f(0, 480);
        GL11.glEnd();
   } 
```

另外，如果你注意到上面我有一个 GL11.glTranslatef 调用。如果我只是让这个函数的第二个参数足够大以使其在 y 方向上进一步移动，我可以让我的地面纹理处于正确的位置，但是我不希望这样做。我真的不知道纹理最初是如何出现在这个位置的，我想弄清楚为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:57:01.340

我认为你的矩阵有问题：

```
 GL11.glMatrixMode(GL11.GL_PROJECTION);
    GL11.glLoadIdentity();
    GL11.glOrtho(0, gameWidth, gameHeight, 0, 1, -1); 
```

我从未真正使用过 OpenGL 固定管道，但我看到或实际上没有看到的是您将矩阵相乘的地方。您必须将四边形的模型矩阵与 glOrtho() 的投影矩阵相乘。（glPushMatrix/glPopMatrix）

因此，在您的情况下，您应该：

```
Push Ortho matrix.
   Push camera(view) matrix (if exists).
        Push Model Matrix.

        Pop  Model Matrix.
   Pop camera (view) matrix (if exists).
Pop Ortho matrix. 
```

如果 Ortho 永远不会改变，我认为你只需要推动它一次。还要确保考虑到正交坐标的变化，因为根据 glOrtho() 设置，世界中心将不同于屏幕中心。通常是左上角或左下角。

底线是：虽然我根本不建议您使用旧的和已弃用的 OpenGL，但您应该看看在众多在线[教程](http://www.songho.ca/opengl/gl_transform.html)中如何正确完成转换。[也在这里](http://www.swiftless.com/tutorials/opengl/pop_and_push_matrices.html)

# c# - 如何在控制台应用程序中使用浏览文件夹对话框

> ID：15381094
> 
> 赞同：1
> 
> 时间：2013-03-13T09:15:26.267
> 
> 标签：c#, console-application, folderbrowserdialog

我创建了一个程序来监视目录中的文件发生了什么。例如，如果我添加一个新文件，它会显示新文件的路径和名称。尽管我在 Windows 窗体中对其进行了编码，但我想将其更改为控制台应用程序，以便在控制台上显示结果

我的问题是如何使用控制台浏览文件夹？任何想法提前谢谢

Windows 窗体代码如下：

```
 private void button1_Click(object sender, EventArgs e)
        {
            DialogResult result = folderBrowserDialog1.ShowDialog();
            if (result == DialogResult.OK) 
            {
                button1.Enabled = false;
                button2.Enabled = true;
                directoryPath = folderBrowserDialog1.SelectedPath;

            }
        }

        private void button2_Click(object sender, EventArgs e)
        {
            try
            {

                if (Directory.Exists(directoryPath))
                {
                    textbox_append("monitor opened");
                    filesList = Directory.GetFiles(directoryPath);
                   timer1.Start();

                }
                else
                {
                    MessageBox.Show("folder does not exist.");
                }
            }
            catch (Exception ex)
            {
                  MessageBox.Show("Error." + ex.Message);

            }
         } 
```

这是我的全部代码

```
namespace emin_lab2_Csharp
{

    public partial class Form1 : Form
    {

        public string directoryPath;

        string[] filesList, filesListTmp;
        IFileOperation[] opList = {         new FileProcByExt("jpeg"),
                                            new FileProcByExt("jpg"),
                                            new FileProcByExt("doc"),
                                            new FileProcByExt("pdf"),
                                            new FileProcByExt("djvu"),
                                            new FileProcNameAfter20()
                                            };

        public Form1()
        {
            InitializeComponent();

        }

        private void button1_Click(object sender, EventArgs e)
        {
            DialogResult result = folderBrowserDialog1.ShowDialog();
            if (result == DialogResult.OK) 
            {
                button1.Enabled = false;
                button2.Enabled = true;
                directoryPath = folderBrowserDialog1.SelectedPath;

            }
        }

        private void button2_Click(object sender, EventArgs e)
        {
            try
            {

                if (Directory.Exists(directoryPath))
                {
                    textbox_append("monitor opened");
                    filesList = Directory.GetFiles(directoryPath);
                   timer1.Start();

                }
                else
                {
                    MessageBox.Show("Такой папки нету.");
                }
            }
            catch (Exception ex)
            {
                  MessageBox.Show("Error." + ex.Message);

            }
         }

        private void timer1_Tick(object sender, EventArgs e)
        {
            filesListTmp = Directory.GetFiles(directoryPath);
            foreach (var elem in Enumerable.Except<string>(filesListTmp, filesList))
            {
                textbox_append(elem);

                foreach (var op in opList)
                {
                    if (op.Accept(elem)) { op.Process(elem); textbox_append(elem + " - action is performed on the file"); }

                }
            }
            filesList = filesListTmp;

        }

       public void textbox_append(string stroka)
        {
            textBox1.AppendText(stroka);
            textBox1.AppendText(Environment.NewLine);
        }

    interface IFileOperation
    {
        bool Accept(string fileName);
        void Process(string fileName);
    }

    class FileProcByExt : IFileOperation
    {
        string extName;
        string folderName;

        public FileProcByExt(string ext = "")
        {
            extName = ext;           
            folderName = extName.ToUpper();

        }

        public bool Accept(string fileName)
        {
            bool res = false;

            if (Path.GetExtension(fileName) == "." + extName) res = true;
            return res;
        }
        public void Process(string fileName)
        {
            Directory.CreateDirectory(Path.Combine(Path.GetDirectoryName(fileName),
                                                   folderName));
            File.Move(fileName,
                      Path.Combine(Path.GetDirectoryName(fileName),
                                   folderName,
                                   Path.GetFileName(fileName)));   

        }
    }

    class FileProcNameAfter20 : IFileOperation
    {

        public bool Accept(string fileName)
        {
            return Path.GetFileNameWithoutExtension(fileName).Length > 20;
        }

        public void Process(string fileName)
        {
            int cnt = Path.GetFileNameWithoutExtension(fileName).Length;
           File.Copy(fileName,
                       Path.Combine(Path.GetDirectoryName(fileName),
                                   "longname_" + cnt + Path.GetExtension(fileName)));

        }
    }

      }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T09:22:06.267

首先，您需要添加对`System.Windows.Forms` 第二个，将[STAThread](http://msdn.microsoft.com/en-us/library/system.stathreadattribute.aspx)属性添加到您的方法的引用。

例如：

```
using System;
using System.Windows.Forms;

namespace ConsoleApplication1
{
    class Program
    {
        [STAThread]
        static void Main(string[] args)
        {
            OpenFileDialog ofd = new OpenFileDialog();
            ofd.ShowDialog();
            Console.Write(ofd.FileName);
        }
    }
} 
```

# iphone - 游戏中心。如何更改排行榜中显示点的外观？

> ID：15381101
> 
> 赞同：0
> 
> 时间：2013-03-13T09:15:56.590
> 
> 标签：iphone, ios, game-center, gamekit, leaderboard

这很可能是非常简单的问题，我对正确答案有自己的假设，但我无法验证我是否正确。所以，在我的排行榜中，积分目前是这样显示的，`100Points`但我希望它像这样显示`100 points`。如何在`100`and之间插入空格`points`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-21T03:50:34.450

这个答案为我解决了这个问题：[https ://stackoverflow.com/a/18204051](https://stackoverflow.com/a/18204051)

> 我在 iTunes Connect 中没有写“points”或“points”，而是写了“points”作为后缀

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T23:08:26.673

**假设您创建了自定义排行榜并下载了分数：**

如果使用`NSString`'s 显示排行榜积分，那么您是否可以从末尾减去最后六个字符以留下分数？

`NSString *justScore = [rawScore substringToIndex:[rawScore length]-6];`

# jquery - jQuery SlideUp 高度

> ID：15381104
> 
> 赞同：3
> 
> 时间：2013-03-13T09:16:09.787
> 
> 标签：jquery, height, slideup

```
$(document).ready(function() {
    $('#arrow').click(function () {
        if ($('#slide1').is(":hidden")) {
            $('#slide1').slideDown('medium');
        } else {
            $('#slide1').slideUp('normal');   
        }
    });
}); 
```

我怎么能单独提到上滑高度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:46:30.570

```
 $('#arrow').click(function () {
      if ($('#slide1').hasClass("small")) {
         $('#slide1').animate({"height": "40px"}, "medium").removeClass("small"); 
      } else {

            $('#slide1').animate({"height": "20px"}, "medium").addClass("small");
      }
  }); 
```

您可以使用该`animate`方法更改`height`. 以及`hasClass`检查 div 状况的方法（是否为原始大小）。在这里，我添加了一个“小”类来指示高度降低的状态。

[单击此处获取 jsfiddle](http://jsfiddle.net/arjuncc/xapCR/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:26:37.717

采用`animate()`

```
$(document).ready(function() {
  $('#arrow').click(function () {
      if ($('#slide1').is(":hidden")) {
       $('#slide1').animate({"height": "100px"}, "medium");
      } else {
       $('#slide1').animate({"height": "0px"}, "medium");;   
      }
  });
}); 
```

看看[`toggle()`](http://api.jquery.com/toggle/)（尽管在 jq 1.9 中已弃用和删除），[`fadeToggle()`](http://api.jquery.com/fadeToggle/)

# ajax - 引入预检 CORS 请求的动机是什么？

> ID：15381105
> 
> 赞同：453
> 
> 时间：2013-03-13T09:16:10.000
> 
> 标签：ajax, html, http, cors, preflight

*跨域资源共享*是一种允许网页向另一个域（来自[Wikipedia](https://en.wikipedia.org/wiki/Cross-origin_resource_sharing)）发出 XMLHttpRequests 的机制。

在过去的几天里，我一直在摆弄 CORS，我想我对一切是如何运作的有了很好的理解。

所以我的问题不是关于 CORS / preflight 如何工作，而是关于**将 preflights 作为新请求类型提出的原因**。我看不出为什么服务器 A 需要向服务器 B 发送预检 (PR) 只是为了确定是否会接受真正的请求 (RR) - B 肯定有可能接受/拒绝 RR 而无需任何先前的 PR。

经过一番搜索后，我在[www.w3.org](http://www.w3.org) (7.1.5)找到[了这](https://www.w3.org/TR/cors/#preflight-request)条信息：

> *为了保护资源免受在本规范存在之前无法源自某些用户代理的跨域请求，发出预检请求以确保资源了解本规范。*

我发现这是有史以来最难理解的句子。我的解释（最好称其为“最佳猜测”）是关于保护服务器 B 免受来自不了解规范的服务器 C 的请求。

有人可以解释一个场景/展示一个 PR + RR 比单独使用 RR 解决的问题吗？

* * *

## 回答 #1

> 赞同：377
> 
> 时间：2013-06-05T16:36:40.260

我花了一些时间对预检请求的目的感到困惑，但我想我现在明白了。

关键的见解是预检请求不是**安全**问题。相反，它们是**不改变规则**的东西。

预检请求与安全无关，它们与现在正在开发的应用程序无关，具有 CORS 意识。相反，预检机制有益于在*没有*意识到 CORS 的情况下开发的服务器，并且它充当客户端和服务器之间的健全性检查，它们都支持 CORS。CORS 的开发人员认为那里有足够多的服务器依赖于他们永远不会收到的假设，例如，他们发明了预检机制以允许双方选择加入的跨域删除请求。他们认为，如果只是简单地启用跨域调用，就会破坏太多现有的应用程序。

这里有三种情况：

1.  旧服务器，不再在开发中，在 CORS 之前开发。这些服务器可能会假设它们永远不会收到例如跨域删除请求。**这种情况是预检机制的主要受益者。**是的，这些服务可能已经被恶意或不合格的用户代理滥用（而 CORS 并没有改变这一点），但在使用 CORS 的世界中，预检机制提供了额外的“健全性检查”，因此客户端和服务器不会打破，因为网络的基本规则已经改变。

2.  仍在开发中但包含大量旧代码的服务器，并且不可行/不希望审核所有旧代码以确保其在跨域世界中正常工作。这种情况允许服务器逐步选择加入 CORS，例如通过说“现在我将允许这个特定的标头”、“现在我将允许这个特定的 HTTP 动词”、“现在我将允许 cookie/auth 信息发送”等。**这种情况得益于预检机制。**

3.  以 CORS 意识编写的新服务器。根据标准安全实践，服务器必须在面对*任何*传入请求时保护其资源——服务器不能相信客户端不会做恶意事情。**这种情况不会从预检机制中受益**：预检机制不会为已正确保护其资源的服务器带来额外的安全性。

* * *

## 回答 #2

> 赞同：307
> 
> 时间：2017-01-17T01:36:41.470

***引入预检请求的动机是什么？***

引入了预检请求，以便浏览器在发送某些请求之前可以确定它正在处理可识别 CORS 的服务器。[这些请求被定义为具有潜在危险（状态改变）和新的（在 CORS 之前由于Same Origin Policy](https://en.wikipedia.org/wiki/Same_origin_policy)是不可能的）的请求。使用预检请求意味着服务器必须选择加入（通过正确响应预检）来接受 CORS 实现的新的、具有潜在危险的请求类型。

[这就是原始规范这部分](https://www.w3.org/TR/cors/#cross-origin-request-with-preflight-0)的含义：“为了保护资源免受在本规范存在之前无法源自某些用户代理的跨域请求，发出预检请求以确保资源了解本规范。”

***你可以给我一个例子吗？***

让我们假设一个浏览器用户登录到他们的银行网站`A.com`。当他们导航到恶意页面时`B.com`，该页面包含一些试图向其发送`DELETE`请求的Javascript `A.com/account`。由于用户已登录`A.com`，因此该请求（如果发送）将包含识别用户的 cookie。

在 CORS 之前，浏览器的同源策略会阻止它发送此请求。但既然 CORS 的目的就是让这种跨域通信成为可能，那已经不合适了。

浏览器*可以*简单地发送`DELETE`并让服务器决定如何处理它。但是如果`A.com`不知道 CORS 协议怎么办？它可能会继续执行危险的操作`DELETE`。它可能会假设——由于浏览器的同源策略——它永远不会收到这样的请求，因此它可能永远不会针对这种攻击进行强化。

为了保护这种不支持 CORS 的服务器，协议要求浏览器首先发送*预检请求*。这种新类型的请求只有 CORS 感知服务器才能正确响应，允许浏览器知道发送实际的`DELETE`.

***为什么对浏览器这么大惊小怪，攻击者不能只`DELETE`从自己的计算机发送请求吗？***

当然可以，但是这样的请求不会包含用户的 cookie。旨在防止的攻击依赖于浏览器将与请求一起发送其他域的 cookie（特别是用户的身份验证信息）这一事实。

***这听起来像[Cross-Site Request Forgery](https://en.wikipedia.org/wiki/Cross-site_request_forgery)，其中网站上的表单`B.com`可以`A.com`与用户的 cookie 一起提交并造成损害。***

这是正确的。另一种说法是，创建预检请求是为了不增加非 CORS 感知服务器的 CSRF 攻击面。

***但是`POST`被[列为](https://fetch.spec.whatwg.org/#cors-safelisted-method)不需要预检的方法。这可以像`DELETE`!***

确实如此！CORS 不会保护您的站点免受 CSRF 攻击。再说一次，没有 CORS，您也无法免受 CSRF 攻击。预检请求的目的只是将您的 CSRF 暴露于 CORS 之前世界中已经存在的内容。

***叹。好的，我勉强接受了预检请求的需要。但是为什么我们必须对服务器上的每个资源（URL）都这样做呢？服务器要么处理 CORS，要么不处理。***

你确定吗？多个服务器处理单个域的请求并不少见。例如，请求可能`A.com/url1`由一种服务器处理，而请求可能由另一种服务器`A.com/url2`处理。通常情况下，处理单个资源的服务器不能对该域上的所有资源进行安全保证。

***美好的。让我们妥协。让我们创建一个新的 CORS 标头，允许服务器准确说明它可以代表哪些资源，这样就可以避免对这些 URL 的额外预检请求。***

好主意！事实上，标题`Access-Control-Policy-Path`就是为了这个目的而提出的。但最终，它被排除在规范之外，[显然是](https://lists.w3.org/Archives/Public/public-appformats/2008May/0039.html)因为某些服务器错误地实现了 URI 规范，使得对浏览器似乎安全的路径的请求在损坏的服务器上实际上并不安全。

这是一个审慎的决定，将安全性置于性能之上，允许浏览器立即实施 CORS 规范，而不会使现有服务器面临风险？还是仅仅为了在特定时间容纳特定服务器中的错误而注定互联网浪费带宽和加倍延迟是短视的？

意见不一。

***好吧，至少浏览器会缓存单个 URL 的预检？***

是的。虽然可能不会持续很长时间。在 WebKit 浏览器中，最大预检缓存时间[当前为 10 分钟](https://github.com/WebKit/WebKit/blob/2975e943c6f6b59aff6f4e6a638ecdd73526105b/Source/WebCore/loader/CrossOriginPreflightResultCache.cpp#L42)。

***叹。好吧，如果我知道我的服务器支持 CORS，因此不需要预检请求提供的保护，我有什么办法可以避免它们吗？***

您唯一真正的选择是确保您的请求使用 CORS 安全的[方法](https://fetch.spec.whatwg.org/#cors-safelisted-method)和[标头](https://fetch.spec.whatwg.org/#cors-safelisted-request-header)。这可能意味着省略您将包含的自定义标题（如`X-Requested-With`），更改`Content-Type`，或更多。

无论你做什么，你都必须确保你有适当的 CSRF 保护，因为 CORS 不会阻止所有不安全的请求。正如最初的规范[所说](https://www.w3.org/TR/cors/#security)：“简单请求对检索具有重要意义的资源必须保护自己免受跨站点请求伪造”。

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2013-03-13T12:49:24.950

考虑 CORS 之前的跨域请求世界。您可以执行标准形式的 POST，或使用 a`script`或`image`标签来发出 GET 请求。除了 GET/POST 之外，您不能发出任何其他请求类型，也不能针对这些请求发出任何自定义标头。

随着 CORS 的出现，规范作者面临着在不破坏 Web 现有语义的情况下引入新的跨域机制的挑战。他们选择通过为服务器提供一种选择加入任何新请求类型的方法来做到这一点。此选择加入是预检请求。

因此，没有任何自定义标头的 GET/POST 请求不需要预检，因为这些请求在 CORS 之前就已经可以实现。但是任何带有自定义标头的请求或 PUT/DELETE 请求*都*需要预检，因为这些是 CORS 规范的新内容。如果服务器对 CORS 一无所知，它将在没有任何 CORS 特定标头的情况下进行回复，并且不会发出实际请求。

如果没有预检请求，服务器可能会开始看到来自浏览器的意外请求。如果服务器没有为这些类型的请求做好准备，这可能会导致安全问题。CORS 预检允许以安全的方式将跨域请求引入 Web。

* * *

## 回答 #4

> 赞同：42
> 
> 时间：2013-03-13T11:43:08.703

CORS 允许您指定比以前使用跨域`<img src>`或`<form action>`.

假设浏览器无法发出，例如跨域`DELETE`请求或带有`X-Requested-With`标头的跨域请求，某些服务器可能（很差）受到保护，因此此类请求是“受信任的”。

为了确保服务器真正支持 CORS 而不仅仅是响应随机请求，执行预检。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2016-05-05T01:01:58.513

这是另一种看待它的方式，使用代码：

```
<!-- hypothetical exploit on evil.com -->
<!-- Targeting banking-website.example.com, which authenticates with a cookie -->
<script>
jQuery.ajax({
  method: "POST",
  url: "https://banking-website.example.com",
  data: JSON.stringify({
    sendMoneyTo: "Dr Evil",
    amount: 1000000
  }),
  contentType: "application/json",
  dataType: "json"
});
</script> 
```

在 CORS 之前，上面的利用尝试会失败，因为它违反了同源策略。以这种方式设计的 API 不需要 XSRF 保护，因为它受到浏览器的本机安全模型的保护。预 CORS 浏览器不可能生成跨域 JSON POST。

现在 CORS 出现了——如果不需要通过飞行前选择加入 CORS，那么这个站点就会突然出现一个巨大的漏洞，这不是他们自己的过错。

为了解释为什么允许某些请求跳过预飞行，[规范对此进行了回答：](https://www.w3.org/TR/cors/#preflight-request)

> 一个简单的跨域请求已被定义为与当前部署的不符合本规范的用户代理可能生成的请求一致。

为了解决这个问题，GET 没有预先飞行，因为它是 7.1.5 定义的“简单方法”。（标题也必须是“简单的”以避免预飞行）。这样做的理由是“简单”的跨域 GET 请求可能已经由 eg 执行`<script src="">`（这就是 JSONP 的工作方式）。由于任何具有`src`属性的元素都可以触发跨域 GET，而无需预检，因此要求对“简单”XHR 进行预检没有安全优势。

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2015-09-14T15:54:47.093

我觉得其他答案并没有关注战前增强安全性的原因。

场景：

1)**飞行前**。*攻击者在用户通过safe-bank.com*身份验证时伪造来自站点 dummy-forums.com
的请求方法。服务器不知道浏览器期望作为响应的 CORS，因此*浏览器*将不会继续（没有任何危害） 2）**没有 pre-flight**。攻击者在与上述相同的场景下伪造请求，浏览器将立即发出 POST 或 PUT 请求，服务器接受并可能处理它，这可能会造成一些危害。

 ****如果攻击者直接从某个随机主机跨源发送请求，则很可能有人正在考虑**没有**身份验证的请求。这是一个伪造的请求，但不是 xsrf 请求。因此服务器将检查凭据并失败。CORS 不会尝试阻止具有发出请求的凭据的攻击者，尽管白名单可以帮助减少这种攻击向量。

飞行前机制增加了客户端和服务器之间的安全性和一致性。我不知道这是否值得为每个请求进行额外的握手，因为缓存在那里很难使用，但这就是它的工作原理。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-03-13T12:28:12.760

> **此外，对于可能对用户数据造成副作用的**HTTP 请求方法（特别是对于 GET 以外的 HTTP 方法，或者对于某些 MIME 类型的 POST 使用），规范要求浏览器“预检”请求

[来源](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-06-23T03:55:31.583

在支持 CORS 的浏览器中，**读取**请求（如 GET）已经受到同源策略的保护：试图发出经过身份验证的跨域请求（例如向受害者的网上银行网站或路由器的配置界面）的恶意网站不会能够读取返回的数据，因为银行或路由器没有设置`Access-Control-Allow-Origin`标头。

但是，通过**写入**请求（如 POST），当请求到达网络服务器时，损坏就完成了。*网络服务器可以检查`Origin`标头以确定请求是否合法，但这种检查通常不会实现，因为网络服务器不需要对于 CORS 或网络服务器比 CORS 更旧，因此假设同源策略完全禁止跨域 POST。

这就是为什么网络服务器有机会**选择接收跨域写入请求的**原因。

[* 本质上是 AJAX 版本的 CSRF。]

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-05-02T20:02:06.233

不是关于**Performance**的预检请求吗？通过预检请求，客户端可以在发送大量数据之前快速知道该操作是否被允许，例如在 JSON 中使用 PUT 方法。或者在通过网络传输身份验证标头中的敏感数据之前。

除了自定义标头之外，PUT、DELETE 和其他方法的事实是默认不允许的（它们需要“Access-Control-Request-Methods”和“Access-Control-Request-Headers”的明确许可），听起来就像双重检查一样，因为这些操作可能对用户数据产生更多影响，而不是 GET 请求。所以，听起来像：

*“我看到您允许来自[http://foo.example](http://foo.example)的跨站点请求，但是您确定您将允许 DELETE 请求吗？您是否考虑过这些请求可能对用户数据造成的影响？”*

我不理解预检请求与旧服务器优势之间的引用相关性。在 CORS 之前实现或没有 CORS 意识的 Web 服务将永远不会收到任何跨站点请求，因为首先它们的响应不会有“Access-Control-Allow-Origin”标头。****

# android - 以线性布局将数据绑定到 5 个不同的文本框

> ID：15381106
> 
> 赞同：1
> 
> 时间：2013-03-13T09:16:10.390
> 
> 标签：android, binding

我在解析 Web 响应后获得了 xml 响应，这里是

```
<NewDataSet>
  <Table>
    <Restaurant_ID>1705</Restaurant_ID>
    <restaurant_name>1947</restaurant_name>
    <address>296, Ram Towers, 100 Feet Ring Road, Banashankari, Bangalore</address>
    <costoftwo>Approx Rs. 600 for two (without alcohol)</costoftwo>
    <rating>3.3</rating>
    <timings>11 AM to 11 PM</timings>
    <Phone>08026791213</Phone>
    <Location_ID>34</Location_ID>
    <Location_name>Banashankari</Location_name>
    <city_ID>1</city_ID>
    <city_name>Bangalore</city_name>
    <Cuisine_ID>8</Cuisine_ID>
    <Cuisine_name>North Indian</Cuisine_name>

  </Table> 
```

我有一个 XML 布局，我需要将上述响应绑定到该布局。我的 XML 布局是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="right"
    android:orientation="vertical"
    android:weightSum="1.0" >

  <LinearLayout 
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:orientation="horizontal"
      android:background="@color/headerbgcolor"
      android:weightSum="1.0" 
      >  

     <Button
            android:id="@+id/restaurant_back"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.2"
            android:onClick="finishActivity"
            android:text="@string/back" />

        <TextView

            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_weight="0.6"
            android:gravity="center"
            android:text="@string/restauran_details" />

        <Button
            android:id="@+id/restaurant_home"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.2"
            android:text="@string/home" />
     </LinearLayout>

  <RelativeLayout
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      >

      <Button
          android:id="@+id/Refresh"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:gravity="left"
          android:text="@string/refresh" />
  </RelativeLayout>

  <LinearLayout 
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:orientation="vertical"
      android:weightSum="1">

     <TextView
         android:id="@+id/Restaurant_name"
        android:layout_width="fill_parent"
        android:layout_height="30dp"
        android:text="@string/restaurant_name" 
        />

     <TextView
         android:id="@+id/Restaurant_add"
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:text="@string/restaurant_address" 
         />
     </LinearLayout>
     <LinearLayout 
        android:layout_width="match_parent"
        android:layout_height="200dp"
        android:orientation="vertical"
        android:weightSum="1" >
     <TextView
         android:id="@+id/Restaurant_rating"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/restaurant_rating"
        android:layout_weight="0.1"  />

     <TextView
         android:id="@+id/Restaurant_timings"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/restaurant_timings" 
        android:layout_weight="0.1"  />

     <TextView
         android:id="@+id/Restaurant_cstfortwo"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/cost_for_two" 
        android:layout_weight="0.1" />

     <TextView
         android:id="@+id/Restaurant_cuisine"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/restaurant_cuisine" 
        android:layout_weight="0.1" />

     <TextView
         android:id="@+id/Restaurant_location"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/restaurant_location" 
        android:layout_weight="0.1" />

     <TextView
         android:id="@+id/Restaurant_city"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/restaurant_city" 
        android:layout_weight="0.1" />

</LinearLayout>

     <TextView
         android:id="@+id/Restaurant_phone"
        android:layout_width="fill_parent"
        android:layout_height="20dp"
        android:text="@string/restaurant_phone"
        />

     <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <ImageView
            android:id="@+id/footerimage"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:background="#808000"
            android:src="@drawable/btn_bg_cuisine" />
    </RelativeLayout>

</LinearLayout> 
```

而且我不知道它是否好，但我正在使用customadapter进行绑定。这是我的自定义适配器。

```
public class CustomAdapterforRestaurant extends BaseAdapter {

    private List<Item> mlist = null;
    private Context mcontext;
    private LayoutInflater l_Inflater;

    public CustomAdapterforRestaurant(Context context, List<Item> lstresponse) {
        mlist = lstresponse;
        mcontext = context;
        l_Inflater = (LayoutInflater) mcontext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        ViewHolderforcities holder;
        if (convertView == null) {
            convertView = l_Inflater.inflate(R.layout.restaurantdetails, null);
            holder = new ViewHolderforcities(convertView);

            convertView.setTag(holder);
        } else {
            holder = (ViewHolderforcities) convertView.getTag();
        }

        holder.restaurant_location.setText(mlist.get(position).getLocation_name());
        holder.restaurant_name.setText(mlist.get(position).getRestaurant_name());
        holder.restaurant_add.setText(mlist.get(position).getAddress());
        holder.restaurant_rating.setText(mlist.get(position).getRating());
        holder.restaurant_timings.setText(mlist.get(position).getTimings());
        holder.restaurant_cstfortwo.setText(mlist.get(position).getCostoftwo());
        holder.restaurant_cuisine.setText(mlist.get(position).getCuisine_name());
        holder.restaurant_city.setText(mlist.get(position).getCity_name());
        holder.restaurant_phone.setText(mlist.get(position).getPhone());

        return convertView;
    }

    class ViewHolderforcities {

        TextView restaurant_name,restaurant_add,restaurant_rating,restaurant_timings,
        restaurant_cstfortwo,restaurant_cuisine,restaurant_location,restaurant_city,
        restaurant_phone;

        public ViewHolderforcities(View base)

        {
            restaurant_name = (TextView) base.findViewById(R.id.Restaurant_name);
            restaurant_add = (TextView) base.findViewById(R.id.Restaurant_add);
            restaurant_rating = (TextView) base.findViewById(R.id.Restaurant_rating);
            restaurant_timings = (TextView) base.findViewById(R.id.Restaurant_timings);
            restaurant_cstfortwo = (TextView) base.findViewById(R.id.Restaurant_cstfortwo);
            restaurant_cuisine = (TextView) base.findViewById(R.id.Restaurant_cuisine);
            restaurant_location = (TextView) base.findViewById(R.id.Restaurant_location);
            restaurant_city = (TextView) base.findViewById(R.id.Restaurant_city);
            restaurant_phone = (TextView) base.findViewById(R.id.Restaurant_phone);
        }

    } 
```

可以一些1请解释我将如何将数据绑定到它。

谢谢拉穆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:23:37.933

您需要使用可用的 XML 解析器之一解析此 XML（核心 android 参考是[http://developer.android.com/training/basics/network-ops/xml.html](http://developer.android.com/training/basics/network-ops/xml.html)）。从 xml 中获取信息后，您可以使用该`textView.setText("text")`方法以编程方式填写 textViews。

# java - 构造函数中的可覆盖方法调用

> ID：15381111
> 
> 赞同：2
> 
> 时间：2013-03-13T09:16:16.157
> 
> 标签：java, netbeans, methods, constructor, overriding

我有一个 U 类，在该类的构造函数中，我调用了公共的可覆盖方法。NetBeans 警告我：`Overridable method call in constructor`

但是，我不会在我的项目中覆盖该方法，因为 U 类没有子类。这样可以保留吗？....在这种情况下在构造函数中调用可覆盖的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:35:41.363

这不是错误。你可以忽略它。

如果您想让编译器满意，请将任一方法或整个类设为**final**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:22:57.133

如前所述，您可以“忽略”警告。

但是，您这样做需要您自担风险，因为错误可能会在以后出现。警告的原因是编译器无法证明对“this”的引用不会逃脱构造函数。这可能会导致错误，因为正在创建的对象尚未完全构造，因此该对象可能处于无效状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T09:19:57.163

这是一个警告，而不是错误，所以你可以这样离开它。但是，如果您要发布此代码，有人可能会扩展您的 U 类，重写该方法并遇到很多麻烦。

# objective-c - 重命名连接的动作

> ID：15381112
> 
> 赞同：2
> 
> 时间：2013-03-13T09:16:17.157
> 
> 标签：objective-c, xcode, interface-builder, rename, ibaction

如何重命名连接的操作并保持连接？
这些是我尝试但失败的步骤：

1.  在我`UIViewController`放置了一个按钮
2.  我通过按下控制键+单击按钮拖动到代码中的空行来创建动作
3.  `UIViewController`.m 文件 -> 重命名操作 -> 连接丢失（函数旁边的空圈）
4.  按住control +单击按钮拖动到函数名称/主体-> 连接失败
5.  右键单击按钮并按 X 删除旧连接 -> 重复步骤 4 -> 连接失败
6.  右键单击正确设置事件中的按钮，当鼠标变为“+”时，将鼠标放在空圆圈上，重复步骤 4 -> 失败

奇怪的是，当拖动到不同的连接动作名称/主体时，它确实允许连接。
除了在文本编辑器中打开故事板文件并更改函数名称之外，我还能从`IDE`?

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T09:23:09.307

## 它被称为`Refactoring`

1.  在 .h 或 .m 文件中的插座名称上单击鼠标右键
2.  `Refactor`
3.  `Rename`
4.  输入所需的名称

# c++ - floor() 行为异常

> ID：15381119
> 
> 赞同：3
> 
> 时间：2013-03-13T09:16:42.503
> 
> 标签：c++, integer, rounding, floor

我需要一个函数将正双精度数舍入到最接近的整数。潜伏的奥伦德我发现了这种非常优雅的方式

```
int x = floor(y + 0.5); 
```

我写了一个简单的测试程序：

```
double a = 10.0;

for (int i = 0; i < 10; i++) {
  cout << a << "\t" << a + 0.5 << "\t" << floor(a + 0.5) << endl;
  a += 0.1;
} 
```

但我收到一些奇怪的输出

```
10      10.5    10
10.1    10.6    10
10.2    10.7    10
10.3    10.8    10
10.4    10.9    10
10.5    11      10 <--- should be 11!
10.6    11.1    11
10.7    11.2    11
10.8    11.3    11
10.9    11.4    11 
```

那是什么？

谢谢问候卢卡

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:25:58.633

通过添加 0.1，您确实添加了一个略低于 0.1 的值。

所以5次加0.1和加0.5一次是不一样的；你没有完全达到那个值。通过再次添加 0.5，您不会超过 11，这会产生您观察到的行为。

* * *

交流节目如

```
#include <stdio.h>
#include <math.h>

int main()
{
    double a = 10.0;
    int i;
    for (i = 0; i < 11; i++) {
        printf("%4.19f\t%4.19f\t%4.19f\n", a, a+.5, floor(a + 0.5));
        a += 0.1;
    }
    printf("\n");
    for (i = 0; i < 11; i++) {
        a = 10.0 + i/10.0;
        printf("%4.19f\t%4.19f\t%4.19f\n", a, a+.5, floor(a + 0.5));
    }
} 
```

显示在其输出上

```
10.0000000000000000000  10.5000000000000000000  10.0000000000000000000
10.0999999999999996447  10.5999999999999996447  10.0000000000000000000
10.1999999999999992895  10.6999999999999992895  10.0000000000000000000
10.2999999999999989342  10.7999999999999989342  10.0000000000000000000
10.3999999999999985789  10.8999999999999985789  10.0000000000000000000
10.4999999999999982236  10.9999999999999982236  10.0000000000000000000
10.5999999999999978684  11.0999999999999978684  11.0000000000000000000
10.6999999999999975131  11.1999999999999975131  11.0000000000000000000
10.7999999999999971578  11.2999999999999971578  11.0000000000000000000
10.8999999999999968026  11.3999999999999968026  11.0000000000000000000
10.9999999999999964473  11.4999999999999964473  11.0000000000000000000

10.0000000000000000000  10.5000000000000000000  10.0000000000000000000
10.0999999999999996447  10.5999999999999996447  10.0000000000000000000
10.1999999999999992895  10.6999999999999992895  10.0000000000000000000
10.3000000000000007105  10.8000000000000007105  10.0000000000000000000
10.4000000000000003553  10.9000000000000003553  10.0000000000000000000
10.5000000000000000000  11.0000000000000000000  11.0000000000000000000
10.5999999999999996447  11.0999999999999996447  11.0000000000000000000
10.6999999999999992895  11.1999999999999992895  11.0000000000000000000
10.8000000000000007105  11.3000000000000007105  11.0000000000000000000
10.9000000000000003553  11.4000000000000003553  11.0000000000000000000
11.0000000000000000000  11.5000000000000000000  11.0000000000000000000 
```

区别：第一次运行是累积误差的方法，步长为 0.0999999999999996447，而第二次运行重新计算 a 尽可能接近，从而可以精确地达到 10.5 和 11.0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T09:35:31.023

这是输出，`printf`改为使用：

`printf("%.15f\t%.15f\t%.15f\n", a, a + 0.5, floor(a + 0.5));`

不精确性现在很明显：

```
10.000000000000000  10.500000000000000  10.000000000000000
10.100000000000000  10.600000000000000  10.000000000000000
10.199999999999999  10.699999999999999  10.000000000000000
10.299999999999999  10.799999999999999  10.000000000000000
10.399999999999999  10.899999999999999  10.000000000000000
10.499999999999998  10.999999999999998  10.000000000000000
10.599999999999998  11.099999999999998  11.000000000000000
10.699999999999998  11.199999999999998  11.000000000000000
10.799999999999997  11.299999999999997  11.000000000000000
10.899999999999997  11.399999999999997  11.000000000000000 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T09:31:05.987

问题是由于舍入误差的累积。浮点数在内部不是以整数表示的，它们的值大多是近似值。因此，每次执行**+= .1**和**+ .5**操作时，您都会累积舍入误差，结果就是您得到的结果。

您可以尝试不查看增量修改，而是使用以下表达式（通常它会在大规模上提供更好的结果）：

```
a = 10\. + .1 * i; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T09:46:29.173

问题是，正如其他人所指出的那样，您实际上从未拥有`10.5`; 你只有非常接近`10.5`（但非常小）的东西。

作为一般规则，对于这类事情，您*不*应该为浮点值添加增量。您应该只使用整数增量，并每次将其缩放为浮点值：

```
for ( int i = 0; i != 10; ++ i ) {
    double aa = a + ( i / 10\. );
    std::cout << aa << '\t' << aa + 0.5 << '\t' << floor( aa + 0.5 ) << std::endl;
} 
```

这应该会给你想要的结果。

当然，如果您的示例只是一个测试......很大程度上取决于如何计算要四舍五入的值。您使用的实际舍入可能是合适的。或者，如果您知道这些值应该是 的倍数`0.1`，您可以尝试进行按 10 缩放的算术运算，然后将结果四舍五入，然后四舍五入为 10 的倍数。

# mysql - 在 MySQL 中使用带边界的 rlike 搜索中文单词

> ID：15381120
> 
> 赞同：-1
> 
> 时间：2013-03-13T09:16:46.393
> 
> 标签：mysql, regex, utf-8

我需要使用搜索的单词搜索行，但不知何故 rlike 不适用于中文（和 UTF-8）字符。这是我正在尝试的一个：

```
select * from mytable where mycolumn rlike '[[:<:]]健康早餐[[:>:]]'; 
```

但这仅适用于英文字符，不适用于 UTF-8 字符。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:28:31.380

默认情况下 MySQL 使用 ISO-8859-1 (Latin1) 字符集。使用 gbk 为本地中文配置您的字符集。检查您的数据库是否配置为处理中文字符。使用多字节字符时，RLIKE 可能会产生意想不到的结果。有关详细信息，请参阅[文档](http://dev.mysql.com/doc/refman/5.1/en/regexp.html#operator_regexp)

# windows - 删除画笔在 Windows 中不起作用

> ID：15381125
> 
> 赞同：0
> 
> 时间：2013-03-13T09:16:54.830
> 
> 标签：windows, graphics

我有一个老式的 Windows API 程序，上面有一个 C++ 自制层。所以我创建了一个画笔来绘画，并在析构函数中调用 DestructObject(Handle) 来释放它。对于许多刷子来说，这似乎不起作用。我必须在调用析构函数之前手动释放刷子，否则程序将停止。

为什么会这样？我的解释是我有太多用于 Windows 的开放画笔。单独线程中的删除运算符是否会延迟对 DestructObject 的调用？

# java - 如何从 XML 节点检索空白值

> ID：15381127
> 
> 赞同：0
> 
> 时间：2013-03-13T09:16:56.830
> 
> 标签：java, xml

我有一个如下的 XML

```
<Element>
     <Name>srmgmtaddress</Name>
     <Value>10.133.14.19</Value>
</Element>
<Element>
     <Name>crlbif0</Name>
     <Value/>
</Element>
<Element>
     <Name>srseid.srtype</Name>
     <Value>Cisco c7206VXR</Value>
</Element>
<Element>
     <Name>craddressinterim</Name>
     <Value/>
</Element>
<Element>
     <Name>crvrfinterim</Name>
     <Value/>
</Element> 
```

我想检索元素值，我正在使用 XPath 表达式`//ResponseItem/Object/Element/Value/text()`，其中 ResponseItem 和 Object 是两个上层节点。

这适用于以下代码：

```
ArrayList<String> elementsToFetch = new ArrayList<String>(Arrays.asList("//ResponseItem/Object/Element/Name/text()","//ResponseItem/Object/Element/Value/text()"));

for (String n : elementsToFetch) {

    XPathFactory xPathfactory1 = XPathFactory.newInstance();
    XPath xpath1 = xPathfactory1.newXPath();
    XPathExpression expr1 = xpath1.compile(n);
    NodeList nl = (NodeList) expr1.evaluate(doc1, XPathConstants.NODESET);
    for (int i=0;i<nl.getLength();i++) {
    String nodeval = nl.item(i).getNodeValue();

    //...SOME CODE HERE
    }
} 
```

但我也想将“crlbif0”、“craddressinterim”等中的空白 XML 节点值检索为 NULL 或“”。

现在我得到如下列表，其中没有处理空白节点

```
[CRNdNode_RO:1024, chn-pe2-rt02, 10.133.14.19, Cisco c7206VXR, CRNdNode_RO:1037, chn-pe4-rt04, 10.133.14.6, Cisco c7609 ...] 
```

我希望列表为

```
[CRNdNode_RO:1024, chn-pe2-rt02, 10.133.14.19, "", Cisco c7206VXR, "", "", CRNdNode_RO:1037, chn-pe4-rt04, 10.133.14.6, "", Cisco c7609, "", "",....] 
```

在这方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:18:19.813

我刚刚得到了解决方案，并想分享相同的内容。

我只是将 XPath 表达式更改为

```
//ResponseItem/Object/Element/Value[string-length(text())>=0] 
```

这有效...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:51:31.937

在您的 XPath 表达式中，选择元素而不是文本节点。在您的循环中，调用`nl.item(i).getTextContent()`.

# android - Android：属性动画中的布局动画并行

> ID：15381131
> 
> 赞同：2
> 
> 时间：2013-03-13T09:17:13.997
> 
> 标签：android, android-animation

我希望将动画应用于网格布局的所有子项。此动画应在活动可见时立即运行，并应一个接一个地应用于网格的子级。

我知道我可以使用[Grid Layout Animation Controller](http://developer.android.com/reference/android/view/animation/GridLayoutAnimationController.html)。我想知道 Property Animation API 中是否有更好的解决方案。因为这个 API 在制作动画时提供了更大的灵活性。或者我应该动态地将动画添加到我的所有网格项目并在视图可见时立即启动动画？

# ios - 如何检测 splitViewController 隐藏？

> ID：15381132
> 
> 赞同：0
> 
> 时间：2013-03-13T09:17:16.913
> 
> 标签：ios, objective-c, ipad

我正在创建使用 splitViewController 的 iPad 应用程序。当应用程序是纵向时，我想检测 splitViewController 隐藏和显示。我可以使用此委托方法检测 splitViewController 显示。

```
 -(void)splitViewController:(UISplitViewController *)svc popoverController:(UIPopoverController *)pc willPresentViewController:(UIViewController *)aViewController
{

} 
```

但我找不到任何方法来检测 splitViewController 隐藏。任何人都可以给我答案。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:34:02.207

在上述方法中，将委托分配给 pc：

```
pc.delegate = self; 
```

并实现 UIPopoverControllerDelegate 方法`- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController`，该方法将在 popover 被解除时调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:27:57.193

据我了解，您想检测 masterController 可见性。如果是，试试这个：

```
BOOL isVisible = NO;
if ([[splitViewController viewControllers] count] > 0) {
    isVisible = [[splitViewController viewControllers] objectAtIndex:0].view.window != nil;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T09:30:35.257

您应该只阅读文档。你想要的是关于[UISplitViewController 委托的文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISplitViewControllerDelegate_protocol/Reference/Reference.html#//apple_ref/occ/intf/UISplitViewControllerDelegate)

从文档中我们可以看到您只需要使用：

```
- (void)splitViewController:(UISplitViewController *)svc willHideViewController:(UIViewController *)aViewController withBarButtonItem:(UIBarButtonItem *)barButtonItem forPopoverController:(UIPopoverController *)pc 
```

# php - PHP中的zipArchive打开错误

> ID：15381142
> 
> 赞同：2
> 
> 时间：2013-03-13T09:18:00.230
> 
> 标签：php, zip, zlib, ziparchive

无法在 PHP 中创建 zip 存档，总是返回**ZIPARCHIVE::ER_MULTIDISK**

```
$fileName=$_SERVER['DOCUMENT_ROOT'].'/temp/temp.zip';
$zip = new ZipArchive();
$err=$zip->open($fileName,ZipArchive::CREATE);
$zipFileFunctionsErrors = array(0=>'OK',
        ZIPARCHIVE::ER_MULTIDISK => 'Multi-disk zip archives not supported.',
        ...,
        ...
);
echo $zipFileFunctionsErrors[$err];
$zip->addFromString('empty.txt', '');
$zip->close(); 
```

输出

```
Multi-disk zip archives not supported 
```

未创建 zip 文件

在本地机器代码上效果很好

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:28:36.593

我认为您的问题必须与 php 版本有关，听起来是这样的：（来自 php.net 评论）：

**如果 zip_open 失败，一些较旧的 PHP 版本过去会返回 false，而较新的版本会返回错误数（作为整数），所以不要这样：**

```
$zip = zip_open($zip_file);
if ($zip) {
  // consider zip file opened successfully
} 
```

用这个：

```
$zip = zip_open($zip_file);
if (is_resource($zip)) {
  // consider zip file opened successfully
} 
```

听起来您正在从数组中获取第一个非数字索引，可能是“1”为“真”，这就是它在错误数组上显示元素“1”的原因

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:26:41.393

首先，检查您是否可以在服务器端使用 php 创建文件。可能存在身份问题。php 可以在 ie 上运行：apache id 并且你的 id 是 yourFtpId..

然后检查服务器上的php是否支持zip库，phpinfo可以显示。

然后检查您的服务器配置是否允许来自 php.ini 的 zip 命令。

当这些诊断结束时，如果您发现这些问题，您应该联系服务器管理员来解决它们。

# c# - 如何知道 c# 中属性位置的层次结构？

> ID：15381143
> 
> 赞同：3
> 
> 时间：2013-03-13T09:18:00.940
> 
> 标签：c#, reflection

例如，我有以下课程。

```
public class Level1
{
    public int intprop;
    public Level2 level2;
}

public class Level2
{   
    public string strprop;
    public Level3 level3;
}

public class Level3
{
    public float fltprop;
} 
```

现在如果我得到 fltprop，那么如何知道这个属性层次结构就像这个 **Level1.level2.level3.fltpro**？

有什么方法可以通过反射来了解属性位置的层次结构？

# 更新：

如果查看 Level1 到 Level3 类，您可以看到 fltprop 位于 Level1 => level2 => level3 => fltprop 内部。

现在通过使用反射，如果我得到 fltprop 作为 PropertyInfo，那么我可以知道这个属性来自 Level1 => level2 => level3 吗？意味着获取propertyinfo然后我知道这个属性的根级别3然后知道级别3的根级别2然后知道级别2的根是级别1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:26:36.423

> 有什么方法可以通过反射来了解属性位置的层次结构？

不，没有。

当您读取该属性（实际上它现在是一个字段）时，您只有一个值。没有关于您从中读取的对象类型的信息可用。当您拥有对象本身（`Level3`对象）时，编译器或运行时无法告诉您从哪里获得该对象。也许您刚刚创建了 的新实例`Level3`，或者您从另一个对象的属性中读取了它。您只知道这一点，而不是运行时。

编辑：

假设您将一个`PropertyInfo`for`fltprop`和一个类型的对象一起传递`Level3`给一个方法。该方法的所有信息是属性名称是`fltprop`，并且它来自`Level3`类型。这不会告诉方法您传递给该方法*的`Level3` **对象**来自哪里*。这也不存储在`Level3`类型信息中。实际上，当你读取 的类型信息时`Level3`，无论你如何获取类型，都是一样的：

```
var type1 = level3Obj.GetType();
var type2 = level1Obj.level2.level3.GetType();
var type3 = typeof(Level3);
var type4 = fltpropPropertyInfo.ReflectedType;

Console.WriteLine( type1 == type2 ); // outputs 'true'
Console.WriteLine( type2 == type3 ); // also outputs 'true'
Console.WriteLine( type3 == type4 ); // also 'true' 
```

# c# - 有条件预订系统的最佳设计模式

> ID：15381144
> 
> 赞同：7
> 
> 时间：2013-03-13T09:18:02.023
> 
> 标签：c#, oop, design-patterns

我正在根据大学 OOP 课程的规范构建航班预订系统。系统必须用 C# 编写。我想知道解决以下问题的最佳方法是什么

> 该公司目前实施折扣计划。西部群岛居民可享受 10% 的折扣。斯科舍还出于营销目的记录这些乘客的居住岛。商务旅客可享受 25% 的折扣，并且必须提供公司名称。普通乘客通常不会获得折扣，除非它是当前促销活动的一部分，在这种情况下，他们会获得 5% 的折扣。

我应该有一个乘客类，每种不同类型的客户都继承自该类吗？对此的任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T09:40:14.980

在我看来，您*不想*从Passenger继承。继承意味着对象以某种方式发生变化，但乘客无论获得什么折扣都是乘客。换句话说，他的功能不会因为他获得更大的折扣而改变。

您使用的这个示例与通常为该`Decorator`模式给出的示例非常接近，尽管这通常是因为它表明可以将多个折扣应用于被装饰的对象（在您的情况下为乘客）。[在这里](http://en.wikipedia.org/wiki/Decorator_pattern)查看 wiki 上的 Coffee 示例

另一种可能性是`Strategy`模式，这为您提供了一个干净的界面来为乘客创建票证，而在内部，它会`DiscountStrategy`根据请求票证的乘客类型进行切换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:38:41.553

你想让折扣政策灵活，乘客并没有那么不同。

您可以拥有一个从中派生的`Customer`基类，但这并不会真正影响您应用折扣逻辑的方式。`Passenger``Company`

继承意味着不同的行为，但乘客的行为不会改变，只有应用的折扣，折扣不应该是乘客状态的一部分，因此它不适合该类。此外，许多折扣仅在一段时间内有效，将其编码到 Customer 类中没有意义，您应该能够动态添加和删除它们。

由于折扣逻辑实际上是应用于客户的业务规则，因此应将其封装到一组单独的类中。用于实现这一点的常见模式是[strategy](http://en.wikipedia.org/wiki/Strategy_pattern)。根据您的设计，当您想对不同类型的用户应用不同的策略时，您可能会发现[访问者](http://en.wikipedia.org/wiki/Visitor_pattern)模式有用与否。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T04:51:56.677

我会使用之前帖子中描述的策略模式“另一种可能性是策略模式，它为您提供了一个干净的界面来为乘客创建票，而在内部它会根据乘客请求票的类型切换 DiscountStrategy。”

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-13T09:31:20.023

如果都是关于折扣方案，那么只使用其他人描述的装饰器模式就足够了。

然后，您将检查界面的类型而不是乘客的类型，例如，如果您想列出商务旅客的数量，或出于营销目的的住所等。

# backbone.js - 主干和requirejs应用程序中的应用程序结构

> ID：15381146
> 
> 赞同：0
> 
> 时间：2013-03-13T09:18:07.860
> 
> 标签：backbone.js, require, backbone-routing

我正在使用主干和 requirejs 开发应用程序。我已经像这样构建了应用程序：

1.  一个主 index.html 文件有`<script data-main="app.js" src="vendor-libraries/require.js"></script>`
2.  在 app.js 我这样做：

    ```
    require.config({

        paths:{
    //all paths here
    },

    shim: {
        // all shims here
        },
        }
     });

         require(['jquery',
     'Backbone',
     'views/master',
     'views/dashboard',
     //all other views are loaded as dependencies here...

     ],function($,Backbone,masterView,dashboardView, .....){

         var Router=Backbone.Router.extend({
             routes:{
                  "":"loadDashboard",
                  "home":"loadDashboard",
                  //all routes paths go here
                },

            initialize:function(){
            this.children={
            dashboardView: new dashboardView(),
            //all views initialized as the dashboard view
            }
        },

        loadDashboard: function(){
        this.children.dashboardView.render();
        },

        //functions for all routes here...

        });

    var router = new Router();
    var view=new masterView();
    Backbone.history.start(); 
    ```

    });

3.  在主视图中，我只需单击按钮即可导航到相应的视图。

现在，我刚刚开始使用这个应用程序，我担心的是，按照上述工作流程可能会导致一次加载所有视图文件。在所有视图中，我都加载了几个模板。那么我最终会在页面渲染之前加载所有的 html 吗？如果是，上述方法中应该修改什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:00:11.090

好吧，如果要在您的页面上加载太多东西，您可能只需要您的视图文件，因为它们是需要的。

例如，假设您将有一个用户列表视图，它可以从您的路由器以这种方式加载：

```
routes: {
    ...
    'userslist' : 'loadUsersList'
}

loadUsersList: function() {

    require('views/userslist',function(UserListView) {

        UserListView.render();
    });

} 
```

# screenshot - 使用 QTP 自动化 Greenshot

> ID：15381154
> 
> 赞同：3
> 
> 时间：2013-03-13T09:18:24.650
> 
> 标签：screenshot

我一直在寻找一种通过 VB 使用 QTP 自动完成绿景拍摄的方法，而不是记录整个过程，但找不到一个好的起点。有谁试过这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T19:16:41.073

具有 COM 接口的 Greenshot API 有一个开放的通用功能请求。请参阅[此链接](http://sourceforge.net/p/greenshot/feature-requests/411/)以获取更新。

# iphone - 如何在 UITextview/UILabel 中使用自定义表情？

> ID：15381163
> 
> 赞同：2
> 
> 时间：2013-03-13T09:18:39.453
> 
> 标签：iphone, ios, xcode, ios6

我正在开发一个 Messenger 跨平台应用程序。我想使用我的自定义图像集作为表情符号。同时搜索我可以使用现有表情符号找到的解决方案。首先我计划在 IOS 中开发。任何有价值的建议/示例代码都会可观

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:26:14.630

Long story short, you hardly succeed with UITextView / UILabel.

Alternatives are:

*   UIWebView
*   Core Text facilities
*   Overlaing emoticons upon UITextView

Quote from one good [answer](https://stackoverflow.com/a/10181449/612705):

> You would be better off using a UIScrollView and managing UITextViews and UIImageViews in it. UITextView doesn't support adding image inline with text. In fact, it doesn't really support anything other than multiline text.

# javascript - 移动设备中的谷歌地图

> ID：15381167
> 
> 赞同：5
> 
> 时间：2013-03-13T09:18:56.643
> 
> 标签：javascript, android, iphone, google-maps

在我的应用程序中，我使用了类似的地图`http://maps.google.com/maps?q=`

问题是 Android 有一个标签“A”，但 iPhone 有地址。当我在 iPhone 中点击 Pin 标签以“获取路线”时，页面确实包含实际的街道地址，但 Android 没有。

据我所知，iPhone 有自己的应用程序来显示地图，但 Android 显示在浏览器中。

有没有办法管理Android的地图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:57:26.147

我认为Android有不同的热链接地址方式：

使用以下代码：

```
<html>
  <body>
  <H1>
   <a href="geo:42,2?z=8">Click here for maps</a>
 </h1>
   <BR><BR>
   <a href="geo:53,-9?saddr=(53,-9)&daddr=(42,4)">Click here for route maps</a>
 </body>
</html> 
```

通过[https://stackoverflow.com/a/6299564/580173](https://stackoverflow.com/a/6299564/580173)

# gtk - GTK 本身是一个库还是一门语言

> ID：15381169
> 
> 赞同：2
> 
> 时间：2013-03-13T09:18:58.570
> 
> 标签：gtk

GTK到底是什么？

它是一些可用于所有编程语言的库吗？即我可以`#include`用 C 语言或 Java 语言我有可以导入的可用数据包吗？

有人可以用简单的术语来描述它吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T09:24:53.850

GTK 本身不是一种语言。它主要是 C 语言的工具包（库集）。引用[GTK Homepage](http://www.gtk.org)的描述：

> GTK+ 或 GIMP Toolkit 是一个用于创建图形用户界面的多平台工具包。GTK+ 提供一整套小部件，适用于从小型一次性工具到完整应用程序套件的项目。

[存在其他语言的绑定，](http://www.gtk.org/language-bindings.php)这使得该库可用于各种语言，例如。Python、C++、Ruby 等。其中最流行的是[PyGTK](http://www.pygtk.org)（用于[Python](http://www.python.org)）和[GTKmm](http://www.gtkmm.org)（用于[C++](http://en.wikipedia.org/wiki/C++)）。Infact GTK 的设计方式使得创建绑定变得特别容易。

> GTK+ 是用 C 语言编写的，但从一开始就被设计为支持广泛的语言，而不仅仅是 C/C++。使用来自 Perl 和 Python 等语言的 GTK+（尤其是与 Glade GUI 构建器结合使用）提供了一种快速应用程序开发的有效方法。

GTK 确实为 C 程序员引入了核心语言中缺乏的各种[面向对象的特性。](http://en.wikipedia.org/wiki/Object-oriented_programming)

此外，还努力开发一种新语言[Vala](https://live.gnome.org/Vala)，它利用上述面向对象的特性 ( [GObject](https://developer.gnome.org/gobject/stable/) ) 以及许多其他面向对象的功能和内存管理特性。Vala 编译成 C 代码。正如您所料，它主要在 Gnome 开发人员中流行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T09:24:41.413

GTK+ 是一个构建图形用户界面的工具包。因此，它是一个基于[GLib](https://developer.gnome.org/glib/)和[GObject](https://developer.gnome.org/gobject/)库的库。由于 GObject 及其自省机制，存在相当[多](https://live.gnome.org/GObjectIntrospection/Users)的语言绑定。

简而言之：

*   使用 Java 的 JGIR 绑定
*   像 C 一样使用 GTK+ 库

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T09:24:09.150

GTK 是一个用 C 语言编写的库。它绑定了许多其他语言（包括 Java）。所以是的，一旦你安装了它（如果你想在 Java 中使用它，Java 绑定），你可以只`#include`使用 C 中的适当头文件或`import`Java 中的类，然后开始使用它。

# javascript - 正则表达式仅在 IE7 中失败

> ID：15381170
> 
> 赞同：0
> 
> 时间：2013-03-13T09:18:59.240
> 
> 标签：javascript, regex

我使用以下规则创建了一个用于密码字段验证检查的正则表达式：

1.  至少一个小写字符
2.  至少一个大写字符
3.  至少有一个特殊的字符
4.  至少一个数字

正则表达式：`/^(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$&*])(?=.*[0-9]).{8,}$/`

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:33:40.727

最简单的解决方法是根本不使用前瞻。在您的情况下，由于所有前瞻都从字符串的开头开始（由于`^`），因此相当于分别检查每个前瞻。您可以进一步删除`.*`并进行未锚定的匹配。

```
if (/[a-z]/.test(str) &&
    /[A-Z]/.test(str) &&
    /[!@#$&*]/.test(str) &&
    /[0-9]/.test(str) &&
    str.length() >= 8) {

    // All conditions met
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:31:56.593

[应用Change Password Control RegEx](https://stackoverflow.com/questions/2518232/change-password-control-regex-validating-oddly-in-ie-7-only)中建议的相同概念，仅在 IE 7 中进行奇怪的验证，您将得到以下正则表达式：

```
/^(?=.{8,}$)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$&*])(?=.*[0-9]).*/ 
```

我没有IE7，所以我无法测试它。

# css - 我怎样才能让 Flexbox 孩子 100% 的高度是他们的父母？

> ID：15381172
> 
> 赞同：676
> 
> 时间：2013-03-13T09:19:00.423
> 
> 标签：css, flexbox

我正在尝试填充 Flexbox 内的弹性项目的垂直空间。

```
.container {
  height: 200px;
  width: 500px;
  display: flex;
  flex-direction: row;
}
.flex-1 {
  width: 100px;
  background-color: blue;
}
.flex-2 {
  position: relative;
  flex: 1;
  background-color: red;
}
.flex-2-child {
  height: 100%;
  width: 100%;
  background-color: green;
}
```

```
<div class="container">
  <div class="flex-1"></div>
  <div class="flex-2">
    <div class="flex-2-child"></div>
  </div>
</div>
```

这是[JSFiddle](https://jsfiddle.net/2ZDuE/)

`flex-2-child`不填充所需的高度，除非在以下两种情况下：

1.  `flex-2`高度为 100%（这很奇怪，因为弹性项目默认为 100% + 它在 Chrome 中是错误的）
2.  `flex-2-child`有一个绝对位置，这也很不方便

目前这在 Chrome 或 Firefox 中不起作用。

* * *

## 回答 #1

> 赞同：564
> 
> 时间：2015-09-08T20:04:03.010

## 采用`align-items: stretch`

与 David Storey 的回答类似，我的解决方法是：

```
.flex-2 {
    display: flex;
    align-items: stretch;
} 
```

注意`height: 100%`应该从子组件中移除（见注释）。

或者`align-items`，您可以`align-self`仅在`.flex-2-child`要拉伸的项目上使用。

* * *

## 回答 #2

> 赞同：286
> 
> 时间：2013-03-13T15:29:26.483

我在[这里](https://stackoverflow.com/a/15388247/295813)回答了一个类似的问题。

我知道你已经说过`position: absolute;`不方便，但它有效。有关修复调整大小问题的更多信息，请参见下文。

另请参阅此[jsFiddle](http://jsfiddle.net/poztin/MFHj7/1/)进行演示，尽管我只添加了 WebKit 前缀，因此在 Chrome 中打开。

您基本上有两个问题，我将分别处理。

1.  **让弹性项目的孩子填充高度 100%**

*   设置`position: relative;`在孩子的父母身上。
*   放在`position: absolute;`孩子身上。
*   然后，您可以根据需要设置宽度/高度（在我的示例中为 100%）。

2.  **修复 Chrome 中调整大小滚动的“怪癖”**

*   放在`overflow-y: auto;`可滚动的 div 上。
*   可滚动的 div 必须明确指定高度。我的样本已经有 100% 的高度，但如果没有应用，您可以指定`height: 0;`

有关滚动问题的更多信息，请参阅[此答案](https://stackoverflow.com/a/14964944/295813)。

* * *

## 回答 #3

> 赞同：253
> 
> 时间：2013-05-27T10:38:08.603

如果我理解正确，您希望 flex-2-child 填充其父级的高度和宽度，以便红色区域完全被绿色覆盖？

如果是这样，你只需要设置 flex-2 来使用 Flexbox：

```
.flex-2 {
    display: flex;
} 
```

然后告诉 flex-2-child 变得灵活：

```
.flex-2-child {
    flex: 1;
} 
```

见[http://jsfiddle.net/2ZDuE/10/](http://jsfiddle.net/2ZDuE/10/)

原因是 flex-2-child 不是 Flexbox 项，但它的父项是。

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2013-09-18T08:08:27.323

我想 Chrome 的行为更符合 CSS 规范（尽管它不太直观）。根据 Flexbox 规范，property的默认`stretch`值[仅更改](http://www.w3.org/TR/css3-flexbox/#align-stretch)元素的“cross size 属性”（在本例中为 ）的[*使用*](http://www.w3.org/TR/css3-flexbox/#align-stretch)[值。](http://www.w3.org/TR/css3-flexbox/#align-stretch)而且，据我了解[CSS 2.1 规范](http://www.w3.org/TR/CSS2/visudet.html#x12)，百分比高度是根据父级的*指定*值计算的，而不是其使用值。父级的指定值不受任何 flex 属性的影响，仍然是.`align-self`[](http://www.w3.org/TR/css3-flexbox/#align-stretch)*`height`*`height``height``auto`**

 **设置显式`height: 100%`可以*正式*计算孩子的百分比高度，就像设置`height: 100%`为`html`可以计算`body`CSS 2.1 中的百分比高度一样。

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2018-05-22T18:12:49.323

我自己找到了解决方案。假设您有以下 CSS：

```
.parent {
  align-items: center;
  display: flex;
  justify-content: center;
}

.child {
  height: 100%; <- didn't work
} 
```

在这种情况下，将高度设置为 100% 将不起作用，因此我将`margin-bottom`规则设置为`auto`，例如：

```
.child {
  margin-bottom: auto;
} 
```

并且孩子将与父母的最顶层对齐。

`align-self`如果您愿意，也可以使用该规则：

```
.child {
  align-self: flex-start;
} 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2019-10-02T18:39:24.757

这也可以通过`align-self: stretch;`我们想要拉伸的元素来解决。

有时希望在 Flexbox 设置中仅拉伸一项。

```
.container {
  height: 200px;
  width: 500px;
  display: flex;
  flex-direction: row;
}
.flex-1 {
  width: 100px;
  background-color: blue;
}
.flex-2 {
  position: relative;
  flex: 1;
  align-self: stretch;
  background-color: red;
}
.flex-2-child {
  background-color: green;
}
```

```
<div class="container">
  <div class="flex-1"></div>
  <div class="flex-2">
    <div class="flex-2-child"></div>
  </div>
</div>
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-01-17T11:13:12.500

```
.container {
    height: 200px;
    width: 500px;
    display: -moz-box;
    display: -webkit-flexbox;
    display: -ms-flexbox;
    display: -webkit-flex;
    display: -moz-flex;
    display: flex;
    -webkit-flex-direction: row;
    -moz-flex-direction: row;
    -ms-flex-direction: row;
    flex-direction: row;
}
.flex-1 {
   flex:1 0 100px;
    background-color: blue;
}
.flex-2 {
    -moz-box-flex: 1;
    -webkit-flex: 1;
    -moz-flex: 1;
    -ms-flex: 1;
    flex: 1 0 100%;
    background-color: red;
}
.flex-2-child {
    flex: 1 0 100%;
    height: 100%;
    background-color: green;
}
```

```
<div class="container">
    <div class="flex-1"></div>
    <div class="flex-2">
        <div class="flex-2-child"></div>
    </div>
</div>
```

[http://jsfiddle.net/2ZDuE/750/](http://jsfiddle.net/2ZDuE/750/)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-03-13T09:54:47.447

一个想法是`display:flex;`with用and`flex-direction: row;`填充`container`div ，但这并不意味着它有一个 default ，即使它被扩展到全高。`.flex-1``.flex-2``.flex-2``height:100%;`

并且要拥有一个带有 的子元素 ( `.flex-2-child`) `height:100%;`，您还需要在div上将父元素设置为`height:100%;`或使用`display:flex;`with 。`flex-direction: row;``.flex-2`

据我所知，`display:flex`不会将所有子元素的高度扩展到 100%。

一个小演示，删除了高度并`.flex-2-child`用于：http : [//jsfiddle.net/2ZDuE/3/](http://jsfiddle.net/2ZDuE/3/)`display:flex;``.flex-2`

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-02-09T08:17:27.400

有趣的事实：height-100% 适用于最新的 chrome；但不是在野生动物园中；

* * *

所以顺风的解决方案是

# “弹性项目-拉伸”

[https://tailwindcss.com/docs/align-items](https://tailwindcss.com/docs/align-items)

并递归地应用于孩子的孩子的孩子......

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-11-15T19:09:44.093

```
.parent {
    display: flex;
}

.child {
    min-height: 100%;
} 
```

* * *

## 回答 #11

> 赞同：-8
> 
> 时间：2019-03-13T02:45:31.490

。容器 { 。. . . 对齐项目：拉伸；. . . . }

* * *

## 回答 #12

> 赞同：-14
> 
> 时间：2015-12-01T17:41:54.730

这是我使用[css+](http://www.css.plus)的解决方案。

首先，如果第一个孩子 (flex-1) 应该是 100px，它不应该是 flex。

实际上，在[css+](http://www.css.plus)中，您可以设置灵活和/或静态元素（列或行），您的示例变得如此简单：

```
<div class="container">
  <div class="EXTENDER">
    <div class="COLS">
      <div class="CELL _100px" style="background-color:blue">100px</div>
      <div class="CELL _FLEX" style="background-color:red">flex</div>
    </div>
  </div>
</div> 
```

容器 CSS：

```
.container {
    height: 200px;
    width: 500px;
    position: relative;
} 
```

显然包括[css+ 0.2 core](https://github.com/hicTech/cssPlus/blob/master/css/build/core.css)。

这是[小提琴](http://jsfiddle.net/dL5eujkk/)。**

# c# - 如何计算 .NET 应用程序中的并发线程数？

> ID：15381174
> 
> 赞同：27
> 
> 时间：2013-03-13T09:19:18.270
> 
> 标签：c#, multithreading, visual-studio, debugging, task-parallel-library

阅读[Parallel.ForEach 不断产生新线程](https://stackoverflow.com/questions/14039051/parallel-foreach-keeps-spawning-new-threads)后，我仍然怀疑它是否是计算并发线程数的正确方法？

我看到的是该方法计算同时输入但未完成的迭代（循环）的数量`Parallel.ForEach`。
它是传达正确数量的同时运行线程的并发线程数量的同义词吗？
我不是专家，但我可以想象：

*   线程可以在其活动在某处交换以供以后继续时重复使用。
*   **理论上，用于循环活动的线程在循环完成后保留在线程池中，但不会重新用于另一个**
*   或者扭曲实验（线程计数）纯度的可能性是什么？

无论如何，如何直接计算.NET进程的运行线程数，最好是（C＃）代码？

**更新：**

因此，如果遵循[Jeppe Stig Nielsen 的回答](https://stackoverflow.com/a/15381637/2031316)并使用计数

```
directThreadsCount = Process.GetCurrentProcess().Threads.Count; 
```

那么输出就是，在 Release (threadsCount == 7) 和 Debug (threadsCount == 15) 模式下都非常相似：

```
[Job 0 complete. 2 threads remaining but directThreadsCount == 7
[Job 1 complete. 1 threads remaining but directThreadsCount == 7
[Job 2 complete. 2 threads remaining but directThreadsCount == 7
[Job 4 complete. 2 threads remaining but directThreadsCount == 7
[Job 5 complete. 2 threads remaining but directThreadsCount == 7
[Job 3 complete. 2 threads remaining but directThreadsCount == 7
[Job 6 complete. 2 threads remaining but directThreadsCount == 7
[Job 9 complete. 2 threads remaining but directThreadsCount == 7
[Job 7 complete. 1 threads remaining but directThreadsCount == 7
[Job 8 complete. 0 threads remaining but directThreadsCount == 7
FINISHED 
```

也就是说，线程的数量并没有减少，[说明上面引用的方法](https://stackoverflow.com/questions/14039051/parallel-foreach-keeps-spawning-new-threads)是不正确的~~，而`System.Diagnostics.ProcessThread`给出`"Class name is not valid at this point"`~~

我的结论是否正确~~，为什么不能`ProcessThread`使用~~？

C#控制台应用程序的使用代码：

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Threading;
using System.Threading.Tasks;

namespace Edit4Posting
{
public class Node
{

  public Node Previous { get; private set; }
  public Node(Node previous)
  {
    Previous = previous;
    }
  }
  public class Edit4Posting
  {

    public static void Main(string[] args)
    {
      int concurrentThreads = 0;
      int directThreadsCount = 0;
      int diagThreadCount = 0;

      var jobs = Enumerable.Range(0, 10);
      Parallel.ForEach(jobs, delegate(int jobNr)
      {
        int threadsRemaining = Interlocked.Increment(ref concurrentThreads);

        int heavyness = jobNr % 9;

        //Give the processor and the garbage collector something to do...
        List<Node> nodes = new List<Node>();
        Node current = null;
        //for (int y = 0; y < 1024 * 1024 * heavyness; y++)
        for (int y = 0; y < 1024 * 24 * heavyness; y++)
        {
          current = new Node(current);
          nodes.Add(current);
        }
        //*******************************
        //uncommenting next line gives: "Class name is not valid at this point"
        //diagThreadCount=System.Diagnostics.ProcessThread
        directThreadsCount = Process.GetCurrentProcess().Threads.Count;
        //*******************************
        threadsRemaining = Interlocked.Decrement(ref concurrentThreads);
        Console.WriteLine(
           "[Job {0} complete. {1} threads remaining but directThreadsCount == {2}",
            jobNr, threadsRemaining, directThreadsCount);
      });
      Console.WriteLine("FINISHED");
      Console.ReadLine();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-03-13T09:40:55.157

我认为有不同种类的线程。您正在运行的应用程序的操作系统线程数可以计算为：

```
int number = Process.GetCurrentProcess().Threads.Count; 
```

它似乎计算`System.Diagnostics.ProcessThread`实例。也许您需要计算另一种线程，例如“托管线程”，所以我不确定我的答案是否是您所寻求的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-13T09:22:15.753

> 我不是专家，但我可以想象线程可以在其活动在某处交换时重复使用。

不——除了一些*非常*特殊的情况（你几乎可以肯定不需要担心），线程不会被重入使用。*在当前迭代完成后*，该线程将被重用于运行另一个迭代（或其他任务） ，但*在*您的代码运行时不会要求它执行其他操作。

所以你目前的方法基本上是合理的。

> 无论如何，如何直接计算 .NET 中正在运行的线程数？

您可以查看 perfmon，它会为您绘制图表。（如果进程在你的控制之下，最简单的方法是启动进程但让它等待输入，然后打开 perfmon，从“进程”选项中添加一个计数器，选择“线程计数”作为要添加的计数器，并限制从下拉列表中将其添加到您感兴趣的流程。点击确定，然后让您的流程开始工作。）

编辑：回答更新：

> 也就是说，线程数并没有减少，说明上述方法不正确

不，它所显示的只是积极运行代码的线程数量减少了，但线程仍然存在。这对于线程池来说是完全自然的。

> 为什么不能`ProcessThread`使用？

你只是不恰当地使用它。Jeppe 说系统正在*计算 的实例，`ProcessThread`*而您的代码尝试将类分配给变量：

```
diagThreadCount=System.Diagnostics.ProcessThread 
```

那只是无效的代码。错误消息表明编译器意识到它是一个类型的名称，但您不能只为变量分配一个类型名称。

# ruby-on-rails - 如何在 ruby on rails 应用程序中制作 facebook 之类的“群组”

> ID：15381176
> 
> 赞同：0
> 
> 时间：2013-03-13T09:19:26.580
> 
> 标签：ruby-on-rails

我目前正在开发一个使用 Ruby on rails 作为我的开发框架的 Web 应用程序。我的应用程序需要组功能。

我打算有这样的东西。用户将在应用程序中拥有个人资料。用户可以创建一个组。现在他可以通过电子邮件邀请人们加入群组。实际上，我正在尝试制作类似于 wikispace 讨论论坛的东西。所以用户/老师将通过电子邮件邀请所有学生，学生可以订阅该组。

现在，每当老师在小组中发布内容时，学生应该会收到一封电子邮件，告知他们已经完成了新帖子，并且他们应该能够对帖子发表评论并讨论主题。我不会为学生制作任何个人资料。

您能否就如何在 ruby​​ on rails 中实现此功能提出一些方法和资源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T17:13:36.677

简而言之，您需要创建不同的模型并在它们之间创建关系 - 在`has_many`( `belongs_to`) 或`has_many_belongs_to_many`关系的帮助下。我建议您先创建“模型图”，以便更好地了解模型之间的关系。

你甚至可以在纸上做，这就是 MVC 的伟大之处！

尝试在[此处](https://stackoverflow.com/questions/8144429/modeling-user-group-and-membership-database-tables)和[此处](https://stackoverflow.com/questions/5784810/model-relations-in-ruby-on-rails)查找参考资料。

看来你打算做点大事了。我建议您从小事做起——从创建群组、用户、类似博客的功能等小事开始，然后慢慢添加更复杂的内容。

# string - 在每个新行的字符串之前快速追加

> ID：15381177
> 
> 赞同：0
> 
> 时间：2013-03-13T09:19:33.333
> 
> 标签：string, append

我有几个相当大的文本文件（每个 1 GB），每行都有一个生成的单词。我想在每个生成的单词之前附加一个字符串。是 Java、C#、C、C++ 还是 Ruby 并不重要。虽然我不能自己编程，但我可以编译和运行它。

例子：

文件.txt：

```
Aoos
ahsd
gAATa
sdFfg 
```

输出：

```
appendAoos
appendahsd
appendgAATa
appendsdFfg 
```

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:27:43.263

You can just use [sed](http://linux.die.net/man/1/sed) from the command line, e.g.

```
$ sed 's/^/append/' < old_file.txt > new_file.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:31:18.513

根据您可用的工具，您可以使用`sed`，`awk`甚至`perl`：

```
sed 's/^/append/' inputFile >outputFile
awk '{print "append"$0}' inputFile >outputFile
perl -pne 's/^/append/' inputFile >outputFile 
```

如果你真的想编写自己的程序，你可以在 C 中相对简单地进行过滤程序：

```
#include <stdio.h>
int main (void) {
    int ch, lastCh = '\n';
    while ((ch = getchar()) != EOF) {
        if (lastCh == '\n') printf ("append");
        putchar (ch);
        lastCh = ch;
    }
    return 0;
} 
```

例如，只需将其编译为，`myprog`然后运行：

```
myprog <inputFile >outputFile 
```

# internet-explorer - Internet Explorer 浏览器为我网站上的所有页面请求额外的“无/”页面

> ID：15381178
> 
> 赞同：2
> 
> 时间：2013-03-13T09:19:35.090
> 
> 标签：internet-explorer

昨天我决定使用 PHP`error_log`向我的电子邮件地址发送错误消息。很快我收到了数百封信，告诉我有人尝试加载“%some_page%/ **none/** ”链接。例如，用户尝试加载具有相对链接'contacts/'的页面，该页面已正确加载并显示，但也有对'contacts/ **none/** '页面的请求，因此我的Web服务器需要处理两次更多的请求。所有这些请求仅来自 IE 用户。我尝试用 IE 8 加载几个页面，它们显示正确，但浏览器也尝试加载这些愚蠢的“/无”页面。

[此处](http://wordpress.org/support/topic/none-at-the-end-of-permalinks?replies=6#post-1096316)描述了相同的**错误**，但未找到解决方案。我不使用任何CMS。我的网站通过了 W3 标记验证，没有任何错误。我真的不知道该怎么做，也无法在 Web 上找到有关此问题的任何有用信息。 Chrome 的 DevTools 的屏幕截图。**最后更新**：我发现这是因为 css 规则“行为：url(/custom/css/border-radius.htc);”。我删除了它们，一切正常！![在此处输入图像描述](../Images/c30033eebb0be07ffaeed02da496f01d.png)![在此处输入图像描述](../Images/fc89c564e099018ef888e8b55e556f4c.png)

# java - WebService 客户端 - 替换类名中的元音变音

> ID：15381182
> 
> 赞同：2
> 
> 时间：2013-03-13T09:19:49.667
> 
> 标签：java, eclipse, wsdl, webservice-client, diacritics

我从外部来源获得了 Web 服务描述，并且必须使用它构建一个接口。
这不是问题，一切正常。Webservice Client 是使用 Eclipse 和 Axis 自动生成的。

但在那个描述中，我有这样的东西：

```
<xs:complexType name="Type">
    <xs:sequence>
        <xs:element minOccurs="0" name="Übersicht">
            ...
        </xs:element>
    </xs:sequence>  
</xs:complexType> 
```

如您所见，元素名称中有一个 Ü 变音符号。

当我在 Eclipse 中生成 Webservice 客户端时，这将生成一个名为`Type_Übersicht.java`. 虽然这对编译器来说不是问题，但它违反了我们的代码风格规则。它是整个工作区中唯一一个带有特殊字符的类。

所以，问题：
我可以告诉 Eclipse Web 服务生成器将给定的名称或单个字符映射到其他东西吗？不幸的是，更改描述不是一种选择...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:10:54.080

您可以通过使用 XSD 中的提示或使用绑定文件来修改生成的类，尽管我不熟悉使用 eclipse 生成器获取绑定文件（我通常使用 maven 插件）。尝试像这样编辑 XSD/WSDL

```
<xs:complexType name="Type">
 <xs:sequence>
    <xs:element minOccurs="0" name="Übersicht">
        <xs:annotation>
            <xs:appinfo>
                <jaxb:class name="Ubersicht"/>
            </xs:appinfo>
        </xs:annotation>
    </xs:element>
 </xs:sequence>  
</xs:complexType> 
```

# actionscript-3 - 如何比较actionscript中arrayList的标签字段

> ID：15381187
> 
> 赞同：0
> 
> 时间：2013-03-13T09:20:00.510
> 
> 标签：actionscript-3, arraylist

我有一个数组列表：

```
public var exampleData:IList = new ArrayList([
            {title: 'data1', data:[
                {label:'IT', value: 50},
                {label:'Business', value: 46},
                {label:'Doctor', value: 64},
                {label:'Teacher', value: 85},
                {label:'Engineer', value: 98}
            ]} ,  
            {title: 'data2', data:[
                {label:'IT', value: 63},
                {label:'Businss', value: 46},
                {label:'Doctor', value: 38},
                {label:'Tea', value: 51},
                {label:'Enee', value: 24}
            ]} ,
            {title: 'data3', data:[
                {label:'IT', value: 37},
                {label:'Business', value: 58},
                {label:'Doctor', value: 48},
                {label:'Teacher', value: 14},
                {label:'Engineer', value: 28}
            ]}, ]); 
```

我想比较arrayList中每个数组的标签字段。默认，与第一个数组（标题：'data1'）进行比较。类似的结果如下：

```
public var resultData:IList = new ArrayList([
            {title: 'data1', data:[
                {label:'IT', value: 50},
                {label:'Business', value: 46},
                {label:'Doctor', value: 64},
                {label:'Teacher', value: 85},
                {label:'Engineer', value: 98}
            ]} ,  
            {title: 'data3', data:[
                {label:'IT', value: 37},
                {label:'Business', value: 58},
                {label:'Doctor', value: 48},
                {label:'Teacher', value: 14},
                {label:'Engineer', value: 28}
            ]}, ]); 
```

# matlab - Matlab中的补子集

> ID：15381188
> 
> 赞同：1
> 
> 时间：2013-03-13T09:20:01.197
> 
> 标签：matlab, matrix, matrix-indexing

在 R 中，我可以执行以下操作：

```
v <- 11:20
v[-(4:5)] 
```

并得到 ，因此*除*第 4 和第 5之外的`11 12 13 16 17 18 19 20`所有索引。

 *Matlab 的索引逻辑中是否有等价物？

但是，我全神贯注于它，我似乎没有正确的搜索词来谷歌我自己的结果来解决这个相当基本的问题。

* * *

注意：当然我可能会使用一些 set 函数，例如

```
v = 11:20;
v(setdiff(1:length(v), 4:5)) 
```

然而，这并不直观。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:25:17.827

另一种方法是简单地从数组中删除元素：

```
u = v;
u(4:5) = []; 
```

我正在使用一个临时变量，因为我不知道修改原始数组是否可以接受`v`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:25:43.070

我不认为有一种优雅的方式，但可能会更高效

```
v = rand(1,10);
sel = true(1, numel(v));
sel( 4:5 ) = false;
v = v( sel ); 
```*

# jquery - Jquery - 永无止境的滑块，速度问题

> ID：15381192
> 
> 赞同：3
> 
> 时间：2013-03-13T09:20:09.420
> 
> 标签：jquery, html, css, animation, slider

我做了一个永无止境的循环，头条新闻从一侧滑到另一侧。当标题到达末尾时，它会排在最后。

问题是我的标题宽度不同。这以具有不同动画速度的滑块结束。也许我的设置有误，但这是我的代码：

HTML：

```
<header>
  <div id="spotlight">
    <span class="active">Foo</span>
    <span>Baaaar</span>
    <span>Baaz</span>
    <span>baz</span>
    <span>qux</span>
    <span>quux</span>
    <span>corge</span>
    <span>grault</span>
    <span>garply</span>
    <span>waldo</span>
  </div>
</header> 
```

CSS：

```
body {
    background: #000;
}

header {
    border-bottom: 8px solid white;
    height: 300px;
    margin-bottom: 4%;
    overflow: hidden;
    position: relative;
}
header #spotlight {
    left: 0;
    position: absolute;
    width: 1100%;
}
header #spotlight span {
    color: white;
    display: block;
    float: left;
    font-size: 6em;
    font-weight: 900;
    margin-top: 1%;
    text-transform: uppercase;
}
header #spotlight span {
    margin-left: 30px;
}
header #spotlight span:not(:last-child):after {
    content: "•";
    margin-left: 30px;
} 
```

JS：

```
$(window).load(function(){
        animate_spotlight();
});

function animate_spotlight(){
    var $current_spot = $('#spotlight span.active')
    var pos = $current_spot.next().position().left;
    $('#spotlight').stop().animate({
        left : '-' + pos + 'px'
    }, {easing : 'linear', duration : 3000, complete : function(){
        $current_spot.next().addClass('active'); // Fetch new object
        $current_spot.appendTo('#spotlight'); // Put the old object last in #spotlight elem.
        $('#spotlight').css({left : 0 + 'px'}) // Reset the position
        $current_spot.removeClass('active'); // Removes active class of the old elem.
        animate_spotlight(); // Loop
    }});
} 
```

JS 小提琴 [http://jsfiddle.net/7BMaF/2/](http://jsfiddle.net/7BMaF/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:31:25.487

我通过添加一个变量来解决这个问题，并将其用作计算速度的源。

```
var divide_to_get_time = (pos / 10000) * 50000; 
```

然后将该变量放入持续时间中。

最终代码：

```
function animate_spotlight(){
    var $current_spot = $('#spotlight span.active')
    var pos = $current_spot.next().position().left;

    var divide_to_get_time = (pos / 10000) * 50000;

    $('#spotlight').stop().animate({
        left : '-' + pos + 'px'
    }, {easing : 'linear', duration : divide_to_get_time, complete : function(){
        $current_spot.next().addClass('active');
        $current_spot.appendTo('#spotlight');
        $('#spotlight').css({left : 0 + 'px'})
        $current_spot.removeClass('active');
        animate_spotlight();
    }});
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:37:55.627

想办法改变持续时间。在本例中，我将每个跨度的宽度除以 1000，然后将其乘以持续时间，在本例中为 8000

[http://jsfiddle.net/axrwkr/7BMaF/4](http://jsfiddle.net/axrwkr/7BMaF/4)

```
function animate_spotlight(){
    var $current_spot = $('#spotlight span.active')
    var pos = $current_spot.next().position().left;

   var wid = $current_spot.width();
   var dur = (wid / 1000) * 8000;

    $('#spotlight').stop().animate({
        left : '-' + pos + 'px'
    }, {easing : 'linear', duration : dur, complete : function(){
    $current_spot.next().addClass('active');
    $current_spot.appendTo('#spotlight');
    $('#spotlight').css({left : 0 + 'px'})
    $current_spot.removeClass('active');
    animate_spotlight();
    }});
} 
```

# windows - 从 Git 中删除凭据

> ID：15381198
> 
> 赞同：879
> 
> 时间：2013-03-13T09:20:21.760
> 
> 标签：windows, git, credentials

我正在使用几个存储库，但最近我只是在我们内部的一个存储库中工作，一切都很好。

今天我不得不提交代码并将代码推送到另一个，但我遇到了一些麻烦。

```
$ git push appharbor master
error: The requested URL returned error: 403 while accessing https://gavekortet@appharbor.com/mitivo.git/info/refs?service=git-receive-pack
fatal: HTTP request failed 
```

我无能为力，否则会再次输入密码。

如何重置系统上的凭据，以便 Git 会询问我该存储库的密码？

我试过了：

*   `git config --global --unset core.askpass`

为了取消设置密码

*   `git config credential.helper 'cache --timeout=1'`

为了避免凭据缓存...

似乎没有任何效果；有人有更好的主意吗？

* * *

## 回答 #1

> 赞同：1108
> 
> 时间：2016-09-21T06:24:42.067

如果此问题出现在 Windows 机器上，请执行以下操作。

*   转到凭据管理器

    *   在德语中，它被称为：*Anmeldeinformationsverwaltung*
    *   在法语中，它被称为：*Gestionnaire d'identification*
    *   在波兰语中，它被称为：*Menedżer poświadczeń*
    *   在葡萄牙语中，它被称为：*Gerenciador de Credenciais*
    *   在俄语中，它被称为：*Диспетчер учётных данных*
    *   在西班牙语中，它被称为：*Administrador de credenciales*

    [![转到凭据管理器](../Images/36cd013ccc7b7edf8f286ead29a04a54.png)](https://i.stack.imgur.com/5KePZ.png)

*   转到 Windows 凭据

*   删除通用凭据下的条目

    [![转到 Windows 凭据并删除通用凭据下的条目](../Images/40a8ff32256789fca84e392aaf5c3f8d.png)](https://i.stack.imgur.com/kRdEv.png)

*   再次尝试连接。这一次，它应该提示您输入正确的用户名和密码。

* * *

## 回答 #2

> 赞同：748
> 
> 时间：2013-03-13T10:38:59.077

Git 凭证缓存运行一个守护进程，它将您的凭证缓存在内存中并按需分发。因此，如果您继续将其用作 cache.helper 选项，杀死您的 git-credential-cache--daemon 进程会丢弃所有这些并导致重新提示您输入密码。

您还可以使用`git config --global --unset credential.helper`. 然后重置它，您将继续为其他存储库（如果有）提供缓存的凭据。`git config --system --unset credential.helper`如果系统配置文件（例如，Windows 2 的 Git）中设置了此项，您可能还需要这样做。

在 Windows 上，您最好使用*管理器*助手 ( `git config --global credential.helper manager`)。这会将您的凭据存储在具有控制面板界面的 Windows 凭据存储中，您可以在其中删除或编辑存储的凭据。使用此商店，您的详细信息由您的 Windows 登录信息保护，并且可以在多个会话中持续存在。Git for Windows 2.x 中包含的*管理器*助手已经替换了早期在 Git for Windows 1.8.1.1 中添加的*wincred*助手。*一个名为winstore*的类似帮助程序也可以在线获得，并与 GitExtensions 一起使用，因为它提供了更多的 GUI 驱动界面。*manager助手提供与**winstore*相同的 GUI界面。

从详细介绍 Windows 凭据管理器的[Windows 10 支持页面](https://support.microsoft.com/en-us/help/4026814/windows-accessing-credential-manager)中提取：

> 要打开凭据管理器，请在任务栏的搜索框中键入“凭据管理器”，然后选择**凭据管理器控制面板**。

然后选择**Windows 凭据**以编辑（=删除或修改）给定 URL 的存储 git 凭据。

* * *

## 回答 #3

> 赞同：184
> 
> 时间：2014-11-18T18:55:31.980

重新输入：

```
$ git config credential.helper store 
```

然后系统将提示您再次输入您的凭据。

**警告**

> 使用此帮助程序会将未加密的密码存储在磁盘上

来源：[https ://git-scm.com/docs/git-credential-store](https://git-scm.com/docs/git-credential-store)

* * *

## 回答 #4

> 赞同：156
> 
> 时间：2016-09-20T11:09:39.527

我面临与OP相同的问题。它正在使用我存储在系统某处的旧 Git 凭据，我想将 Git 与我的新凭据一起使用，所以我运行了命令

```
$ git config --system --list 
```

这显示了

```
credential.helper=manager 
```

每当我执行`git push`时，它都会使用我很久以前设置的旧用户名，并且我想使用新的 GitHub 帐户来推送更改。后来我发现我的旧 GitHub 帐户凭据存储在 *Control Panel* → *User Accounts* → *Credential Manager* → *Manage Windows Credentials*下。

[![管理 Windows 凭据](../Images/ec678c8b0e69b04c3865918954e7a7a4.png)](https://i.stack.imgur.com/9K7sE.png)

我刚刚删除了这些凭据，当我执行它时，`git push`它要求我提供我的 GitHub 凭据，它就像一个魅力。

* * *

## 回答 #5

> 赞同：63
> 
> 时间：2016-08-11T05:57:08.807

尝试使用以下命令。

```
git credential-manager 
```

在这里，您可以获得各种选项来管理您的凭据（检查下面的屏幕）。

[![在此处输入图像描述](../Images/d0292e128db5b852d018186edff2db5f.png)](https://i.stack.imgur.com/fSztX.png)

或者你甚至可以直接尝试这个命令：

```
git credential-manager uninstall 
```

这将在每个服务器交互请求上再次开始提示输入密码。

* * *

## 回答 #6

> 赞同：47
> 
> 时间：2015-11-18T11:21:06.217

我发现了一些对我有用的东西。当我向 OP 写评论时，我未能检查系统配置文件：

```
git config --system -l 
```

显示一个

```
credential.helper=!github --credentials 
```

线。我取消了它

```
git config --system --unset credential.helper 
```

现在凭证被遗忘了。

* * *

## 回答 #7

> 赞同：36
> 
> 时间：2017-09-25T14:51:04.687

```
git config --list 
```

将显示`credential.helper = manager`（这是在 Windows 机器上）

要为您当前的本地 git 文件夹禁用此缓存的用户名/密码，只需输入

```
git config credential.helper "" 
```

这样，git 每次都会提示输入密码，而忽略“管理器”中保存的内容。

* * *

## 回答 #8

> 赞同：35
> 
> 时间：2018-12-03T11:11:33.560

当您在同一台机器上使用多个 Git 帐户时会出现此错误。

如果您使用的是 macOS，则可以删除已保存的**github.com**凭据。

请按照以下步骤删除**github.com**凭据。

1.  打开**钥匙串访问**
2.  找**github**
3.  选择**github.com**并右键单击它
4.  删除**“github.com”**
5.  再次尝试 Push 或 Pull 到 git，它会要求提供凭据。
6.  输入存储库帐户的有效凭据。
7.  完毕

    [![在此处输入图像描述](../Images/46dd134cf03ccd3b7bc2eb2ac2cfd135.png)](https://i.stack.imgur.com/96OKa.png)

* * *

## 回答 #9

> 赞同：33
> 
> 时间：2017-03-02T14:20:52.753

就我而言，Git 使用 Windows 来存储凭据。

您所要做的就是删除存储在您的 Windows 帐户中的凭据：

[![Windows 凭据菜单](../Images/421bd51378a44b4d99bfe05e90ac134c.png)](https://i.stack.imgur.com/AVheT.jpg)

* * *

## 回答 #10

> 赞同：32
> 
> 时间：2018-06-18T23:45:49.290

您必须在您的凭据管理器中更新它。

转到控制面板 > 用户帐户 > 凭据管理器 > Windows 凭据。您将在列表中看到 Git 凭据（例如 git:https://）。单击它，更新密码，然后从您的 Git bash 执行 git pull/push 命令，它不会再抛出任何错误消息。

* * *

## 回答 #11

> 赞同：23
> 
> 时间：2016-12-12T23:55:17.687

在带有“wincred”* 的 Windows 2003 Server 中，其他答案都没有帮助我。我不得不使用[`cmdkey`](https://technet.microsoft.com/en-us/library/cc754243(v=ws.11).aspx).

*   `cmdkey /list`列出所有存储的凭据。
*   `cmdkey /delete:Target`删除具有“目标”名称的凭据。

[![cmdkey /列表； cmdkey /删除：目标](../Images/607de1b74edf873976f1f96664c2cf91.png)](https://i.stack.imgur.com/IkGwa.png)

（*我的意思是“wincred” `git config --global credential.helper wincred`）

* * *

## 回答 #12

> 赞同：17
> 
> 时间：2018-09-16T15:51:22.080

在 Windows 10 Professional 上使用适用于 Windows 的最新版本的 git，我遇到了类似的问题，即我有两个不同的 GitHub 帐户和一个 Bitbucket 帐户，所以对于 VS2017、git 扩展和 git bash，事情变得有点混乱。

我首先检查了 git 如何使用此命令处理我的凭据（使用提升的命令运行 git bash，否则会出现错误）：

```
git config --list 
```

我找到了凭据管理器条目，因此我单击了开始按钮 > 键入凭据管理器并左键单击启动应用程序的凭据管理器黄色安全图标。然后我点击了 Windows Credentials 选项卡，找到了我当前 git 帐户的条目，恰好是 Bit-bucket，所以我删除了这个帐户。

但这并没有奏效，因此下一步是取消设置凭据，我从笔记本电脑上的存储库目录中执行此操作，该目录包含我试图推送到远程的 GitHub 项目。我输入了以下命令：

```
git config --system --unset credential.helper 
```

然后我做了一个 git push ，系统提示我输入一个 GitHub 用户名（我需要的正确用户名），然后是相关的密码，一切都被正确推送。

我不确定这会带来多大的问题，大多数人可能会在一个存储库中工作，但我必须跨多个工作并使用不同的提供程序，因此可能会再次遇到这个问题。

* * *

## 回答 #13

> 赞同：17
> 
> 时间：2018-10-01T03:25:19.190

执行“git pull”时遇到同样的错误，这就是我修复它的方法。

1.  将存储库更改为 HTTPS
2.  运行命令`git config --system --unset credential.helper`
3.  运行命令`git config --system --add credential.helper manager`
4.  测试命令`git pull`
5.  在弹出的登录窗口中输入凭据。
6.  git pull 成功完成。

* * *

## 回答 #14

> 赞同：16
> 
> 时间：2018-01-23T15:53:01.877

如果使用[适用于 Windows](https://github.com/Microsoft/Git-Credential-Manager-for-Windows)的 Git Credential Manager（当前版本通常这样做）：

```
git credential-manager clear 
```

这是[在 2016 年年中添加的](https://github.com/Microsoft/Git-Credential-Manager-for-Windows/pull/260)。要检查是否使用了凭据管理器：

```
git config --global credential.helper
→ manager 
```

* * *

## 回答 #15

> 赞同：14
> 
> 时间：2018-07-16T21:00:57.920

1.  去`C:\Users\<current-user>`
2.  检查`.git-credentials`文件
3.  根据您的要求删除或修改内容
4.  重启你的终端

* * *

## 回答 #16

> 赞同：14
> 
> 时间：2019-12-13T08:25:41.343

如果您希望 git 忘记旧保存的凭据并重新输入用户名和密码，您可以使用以下命令执行此操作：

```
git credential-cache exit 
```

运行上述命令后，如果您尝试推送任何内容，它将提供输入用户名和密码的选项。

* * *

## 回答 #17

> 赞同：14
> 
> 时间：2020-06-27T10:39:35.193

如果您的凭据存储在凭据帮助程序中（通常是这种情况），则删除为特定主机保留的密码的可移植方法是调用`git credential reject`：

*   在一行中：

    ```
    $ echo "url=https://appharbor.com" | git credential reject 
    ```

*   或交互：

    ```
    $ git credential reject
    protocol=https
    host=gitlab.com
    username=me@example.com
    ↵ 
    ```

    *   ↵ 是回车符号，在输入结束时按两次回车键，不要复制/粘贴
    *   wincred 似乎无法识别用户名，因此请避免在 Windows 上按用户名过滤

之后，要输入新密码，请键入`git fetch`。

[https://git-scm.com/docs/git-credential](https://git-scm.com/docs/git-credential)

* * *

## 回答 #18

> 赞同：13
> 
> 时间：2018-02-12T13:28:53.773

需要使用相应的 github 登录`username`和`password`

在 windows 中清除用户名和密码

**控制面板\用户帐户\凭据管理器**

编辑**windows 凭据**

删除现有用户，现在转到命令提示符写入 push 命令，它会显示 github 弹出窗口以输入`username`/`email`和`password`.

现在我们可以在切换用户后推送代码。

* * *

## 回答 #19

> 赞同：12
> 
> 时间：2013-08-22T09:23:28.150

从位于 Windows 当前登录用户文件夹中的 .gitconfig 文件中删除此行：

```
[credential]
helper = !\"C:/Program Files (x86)/GitExtensions/GitCredentialWinStore/git-credential-winstore.exe\" 
```

这对我有用，现在当我推送到远程时，它会再次询问我的密码。

* * *

## 回答 #20

> 赞同：12
> 
> 时间：2017-02-22T17:53:21.953

就我而言，我找不到保存在 Windows 凭据管理器 (Windows 7) 中的凭据。

我能够通过执行重置我的凭据

```
git config --global credential.helper wincred 
```

老实说，玛丽很高兴看到它是否会抹去我的凭据并且它确实有效。

* * *

## 回答 #21

> 赞同：8
> 
> 时间：2019-05-02T19:57:40.613

至少在 Windows 上[`git remote show [remote-name]`](https://stackoverflow.com/a/32058217/44330)可以工作，例如

```
git remote show origin 
```

* * *

## 回答 #22

> 赞同：7
> 
> 时间：2016-05-25T04:19:08.803

您可以`credential.helper=!github --credentials`从以下文件`C:\Program Files\Git\mingw64\etc\gitconfig`中删除该行以删除 git 的凭据

* * *

## 回答 #23

> 赞同：7
> 
> 时间：2018-12-04T04:18:59.497

**对于 macOS 用户：**

当您在同一台机器上使用多个 Git 帐户时会出现此错误。

请按照以下步骤删除 github.com 凭据。

> 1.  转到查找器
> 2.  转到应用程序
> 3.  转到实用程序文件夹
> 4.  打开钥匙串访问
> 5.  选择 github.com 并右键单击它
> 
> 删除“github.com”

再次尝试 Push 或 Pull 到 git，它会要求提供凭据。输入存储库帐户的有效凭据。完成，现在为答案投票。

* * *

## 回答 #24

> 赞同：6
> 
> 时间：2020-07-16T16:08:32.377

这种方法对我有用，应该与操作系统无关。这有点笨拙，但很快，让我可以重新输入凭据。

只需找到您希望重新输入凭据的远程别名。

```
$ git remote -v 
origin  https://bitbucket.org/org/~username/your-project.git (fetch)
origin  https://bitbucket.org/org/~username/your-project.git (push) 
```

**复制项目路径**( `https://bitbucket.org/org/~username/your-project.git`)

然后取出遥控器

```
$ git remote remove origin 
```

然后加回来

```
$ git remote add origin https://bitbucket.org/org/~username/your-project.git 
```

* * *

## 回答 #25

> 赞同：4
> 
> 时间：2018-08-04T08:40:51.050

最终为我解决这个问题的是使用 GitHub 桌面，转到存储库设置，然后从存储库 url 中删除 user:pass@。然后，我尝试从命令行推送并被提示输入登录凭据。在我把它们放进去之后，一切都恢复了正常。Visual Studio 和命令行都可以正常工作，当然还有 GitHub 桌面。

GitHub 桌面-> 存储库-> 存储库设置-> 远程选项卡

从以下位置更改主远程存储库（来源）：

[https://pork@muffins@github.com/MyProject/MyProject.git](https://pork@muffins@github.com/MyProject/MyProject.git)

到：

[https://github.com/MyProject/MyProject.git](https://github.com/MyProject/MyProject.git)

点击“保存”

凭证将被清除。

* * *

## 回答 #26

> 赞同：4
> 
> 时间：2018-12-21T18:42:00.260

根据[@patthoyts 的高票回答](https://stackoverflow.com/a/15382950/16958560)构建：

他的回答使用但没有解释`local`vs. `global`vs. `system`configs。他们的官方 git 文档在[这里](https://git-scm.com/docs/git-config#git-config---global)，值得一读。

例如，我在 Linux 上，不使用*系统*配置，所以我从不使用`--system`标志，但通常需要区分`--local`和`--global`配置。

我的用例是我有两个 Github 凭证；一种用于工作，一种用于玩耍。

以下是我将如何处理这个问题：

```
$ cd work
# do and commit work
$ git push origin develop
# Possibly prompted for credentials if I haven't configured my remotes to automate that. 
# We're assuming that now I've stored my "work" credentials with git's credential helper.

$ cd ~/play 
# do and commit play
$ git push origin develop                                                                   
remote: Permission to whilei/specs.git denied to whilei.                
fatal: unable to access 'https://github.com/workname/specs.git/': The requested URL returned error: 403

# So here's where it goes down:
$ git config --list | grep cred
credential.helper=store # One of these is for _local_
credential.helper=store # And one is for _global_

$ git config --global --unset credential.helper
$ git config --list | grep cred
credential.helper=store # My _local_ config still specifies 'store'
$ git config --unset credential.helper
$ git push origin develop
Username for 'https://github.com': whilei
Password for 'https://whilei@github.com':
Counting objects: 3, done.
Delta compression using up to 12 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 1.10 KiB | 1.10 MiB/s, done.
Total 3 (delta 1), reused 0 (delta 0)
remote: Resolving deltas: 100% (1/1), completed with 1 local object.
To https://github.com/whilei/specs.git
   b2ca528..f64f065  master -> master

# Now let's turn credential-helping back on:
$ git config --global credential.helper "store"
$ git config credential.helper "store"
$ git config --list | grep cred
credential.helper=store # Put it back the way it was.
credential.helper=store 
```

还值得注意的是，有一些方法可以完全避免这个问题，例如，您可以使用`~/.ssh/config`'s 与 Github 的相关 SSH 密钥（一个用于工作，一个用于娱乐）和相应的自定义命名的远程主机来解决身份验证上下文化。

* * *

## 回答 #27

> 赞同：3
> 
> 时间：2020-03-03T08:28:32.087

对于 Windows 10，请转到以下路径，

> 控制面板\用户帐户\凭据管理器

此位置将有 2 个选项卡，

1.  Web 凭据和 2\. Windows 凭据。

单击 Windows 凭据选项卡，您可以在“通用凭据”标题下看到您存储的 github 凭据。

您可以从此处删除这些并尝试重新克隆 - 它现在会询问用户名/密码，因为我们刚刚从 Windows 10 系统中删除了存储的凭据

* * *

## 回答 #28

> 赞同：3
> 
> 时间：2020-04-21T20:10:33.390

要添加到 @ericbn 的[https://stackoverflow.com/a/41111629/579827](https://stackoverflow.com/a/41111629/579827)，这里是我嵌入在脚本中的示例命令，我运行该脚本以在更新时更新所有密码。它可能无法按原样使用，因为它非常具体，但它显示了`cmdkey.exe`.

> ⚠ 这是在*cygwin中运行的**shell*脚本⚠</p>
> 
> *⚠ 之所以可行，是因为我使用所有使用相同密码进行身份验证的私有 git 存储库（您可能不想使用相同的凭据进行循环，但您可以重用此示例`/list`命令来提取已注册凭据的列表）⚠</ p>*

 *```
entries=`cmdkey.exe /list: | grep git | sed -r -e 's/^[^:]+:\s*(.*)$/\1/gm'`
for entry in ${entries}
do
    cmdkey.exe "/delete:${entry}"
    cmdkey.exe "/generic:${entry}" "/user:${GIT_USERNAME}" "/pass:${GIT_PASSWORD}"
done 
```

* * *

## 回答 #29

> 赞同：3
> 
> 时间：2020-06-20T22:59:52.330

**Update**实际上`useHttpPath`是一个[git 配置](https://git-scm.com/docs/gitcredentials)，它应该适用于所有 GCM。已更正。

**原始问题摘要**

*   在 Windows 上使用 git
*   在 GitHub 上处理多个存储库
*   用于另一个 GitHub 存储库的错误凭据

虽然标题说“删除凭据”，但描述让我假设您可能在 GitHub 上拥有多个帐户，例如与工作相关的项目和私人项目。（至少那个问题让我找到了这个话题。）如果是这样，请继续阅读，否则，请忽略答案，但它可能会在某个时候派上用场。

**原因**

Git Credential Managers（简称 GCM），例如 Microsoft 的[GCM for Windows](https://github.com/Microsoft/Git-Credential-Manager-for-Windows)，默认为每个主机存储凭据。这可以通过检查 Windows 凭据管理器来验证（请参阅有关如何在英语、法语和德语 Windows 版本上访问它的其他答案）。因此，默认情况下无法在同一主机（此处为 github.com）上使用多个帐户。

2020 年 10 月，GCM for Windows 被弃用并被[GCM Core](https://github.com/microsoft/Git-Credential-Manager-Core)取代。此处的信息仍然适用于新的 GCM，它甚至应该使用 GCM for Windows 存储的凭据。

**解决方案**

[配置 git](https://git-scm.com/docs/gitcredentials)以包含存储库的完整路径作为每个凭证条目的附加信息。还记录在[GCM for Windows](https://github.com/microsoft/Git-Credential-Manager-for-Windows/blob/master/Docs/Configuration.md)上。
我个人更喜欢包含 HTTP(S) [repository] ​​路径，以便能够为每个存储库使用单独的帐户。

对于所有可能的主机：

```
git config --global credential.useHttpPath true 
```

仅适用于 github.com：

```
git config --global credential.github.com.useHttpPath true 
```

看看 GCM 和[git](https://git-scm.com/docs/gitcredentials)文档，也许你想指定一些不同的东西。

* * *

## 回答 #30

> 赞同：2
> 
> 时间：2016-05-04T18:28:54.643

在我们的例子中，清除用户`.git-credentials`文件中的密码是有效的。

```
c:\users\[username]\.git-credentials 
```

* * *

## 回答 #31

> 赞同：2
> 
> 时间：2019-04-16T16:26:07.633

在 PowerShell 控制台中执行以下命令以清除 Git Credentials Managers for Windows 缓存：

```
rm $env:LOCALAPPDATA\GitCredentialManager\tenant.cache 
```

或在 Cmd.exe 中

```
rm %LOCALAPPDATA%\GitCredentialManager\tenant.cache 
```

* * *

## 回答 #32

> 赞同：2
> 
> 时间：2019-06-03T10:39:09.470

当上述任何方法都不适合您时，请尝试此操作。

```
git config credential.helper 'cache --timeout=30' 
```

这将每 3 秒删除一次缓存，并要求输入用户名和密码。您可以使用增加的超时值重新运行该命令。

* * *

## 回答 #33

> 赞同：1
> 
> 时间：2018-12-03T18:55:25.230

正如上面每个人都提到的，这是一个`Git Credential Manager`问题。由于权限，我无法修改我的凭据或操纵凭据管理器。我也不能在电脑上以纯文本形式放置密码。一种解决方法是删除远程分支`intellij`并重新添加远程分支。这将删除存储的凭证并强制刷新凭证。

[![在此处输入图像描述](../Images/8942e876ee8713ec21be53c4e7d337b1.png)](https://i.stack.imgur.com/4kuWz.png)

* * *

## 回答 #34

> 赞同：1
> 
> 时间：2021-02-25T23:20:15.353

**Mac 设备**的答案：

去

`Applications/Utilities/Keychain Acccess`

搜索`git.credentials`并删除所需 URL 的 git 凭据。

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2013-03-13T09:22:32.567

如果您使用您的密钥对进行身份验证，您可以删除或移动您的私钥，或者停止密钥代理并尝试。

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2020-07-04T18:06:45.230

在您的*项目根文件夹*中打开**.git/config**。此文件包含有关远程 URL 和您的凭据类型的详细信息。

此文件中您当前的远程 URL 可能正在存储凭据。从 github 复制远程 url 并更新此配置文件中的 url。

如下所示：

```
[remote "origin"]
    url = [update it]
    fetch = +refs/heads/*:refs/remotes/origin/*
[credential]
    helper = manager 
```

**现在，当您尝试推送代码时，它会要求提供凭据。谢谢**

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2021-11-01T05:39:08.440

请运行以下命令 -

```
git config --global credential.helper cache 
```

然后运行任何 git 命令，如 git pull 它会询问用户名和密码。输入详细信息，如果要存储 git 凭据，请运行以下命令 -

```
git config --global credential.helper store 
```

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2021-11-01T11:49:36.077

如果`git config credential.helper`返回`manager-core`（来自跨平台[GCM -- Git Credential Manager Core](https://github.com/microsoft/Git-Credential-Manager-Core)项目），您可以：

*   保持此设置不变

*   使用跨平台 GCM 命令删除您的凭据：

    ```
    printf "Host=github.com\nusername=xxx\nprotocol=https" | \
      git credential-manager-core erase 
    ```

检查它是否已消失：

```
 printf "Host=github.com\nusername=xxx\nprotocol=https" | \
    git credential-manager-core get 
```

（替换`xxx`为您的 GitHub 用户帐户名）（
替换`github.com`为实际的远程 Git 存储库托管服务器：`gitlab.com`、、、`bitbucket.com`）`yourOwnServer.com`

如果您看到输入凭据的提示，请单击“取消”：以前的凭据已从操作系统底层密钥管理器（Windows 凭据管理器、Linux libsecret 或 Mac osxkeychain）中消失

在下一次 git push 中，输入您的凭证作为 GCM-core 凭证助手的提示符：您的新凭证将被存储。

* * *

## 回答 #39

> 赞同：0
> 
> 时间：2022-01-07T08:34:46.167

没有给出的答案对我有用。但最终对我有用的是：

```
rm -rf ~/.git-credentials 
```

这将删除任何凭据！当您使用新`git`命令时，系统会要求您输入密码！*

# extjs - 将 Flex 值动态添加到 extjs 中的控制器

> ID：15381200
> 
> 赞同：3
> 
> 时间：2013-03-13T09:20:30.620
> 
> 标签：extjs, extjs4, extjs4.1, extjs-mvc

我在“视图”中给出了一些项目（容器），布局为`hbox`. 现在我想`flex`通过“控制器”为每个项目赋予价值。我怎样才能做到这一点？

我已经浏览了文档，但找不到像`setFlex`.

**编辑**：

```
Ext.apply(Ext.getCmp('IdHere'), {flex: 1}); 
```

[我从这个链接](https://stackoverflow.com/a/6109705/1577396)得到了答案。但现在的问题是，即使我正在动态更改 flex 值，容器的视图也没有改变。它保持不变。

*[如此处](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.layout.container.Box-cfg-flex)所述，我最初并未在“视图”中分配 flex 值*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T10:08:35.893

我的第一个猜测是需要通过调用来重新运行布局过程`doLayout()`我不太确定，但我认为你必须调用包含`hbox`布局的父元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-03T00:21:56.043

获取您的父容器（您在其上应用了布局 hbox 或 vbox）然后获取项目，最后更改 flex 并更新布局

```
var ct = me.up('#parentComponent');
 ct.items.get('itemId1').flex = 2;
 ct.items.get('itemId2').flex = 2;
 ct.updateLayout(); 
```

# php - 将 Python 文件的执行仅限于服务器（防止从浏览器访问）

> ID：15381202
> 
> 赞同：0
> 
> 时间：2013-03-13T09:20:40.410
> 
> 标签：php, python, security

我有两个 Python 文件，我想阻止任何人执行，除非它来自服务器本身。这些文件实现了增加用户金额的功能。我需要的是让这个文件不对网络公开，这样如果有人试图调用这个文件，文件就会拒绝这个请求，除非调用来自服务器。

有谁知道我该怎么做？我的第一个想法是检查 IP 地址，但很多人可以欺骗他们的 IP。

### 例子

假设我有这个文件：`function.py`，这个文件中的一个函数将接受一个新的金额并增加数据库中的适当余额。

当有人试图将数据发布到这个文件，并且这个人在服务器之外（比如说 from `244.23.23.0`），这个文件将是不可访问的。而从服务器本身调用该函数将被接受。

*所以文件可以访问服务器上的其他文件，但外部用户不能，结果除非从服务器调用，否则没有人可以执行这个文件。*

这对我来说真的很重要，因为它与真钱有关。此外，这笔钱将来自 PayPal IPN。实际上，如果有一种方法可以阻止访问，除非它来自 PayPal，那将是保护应用程序的绝佳方式。

好的，就我所尝试的而言：

1.  使用 Google [https://developers.google.com/cloud-sql/] 将数据库放在云 SQL 中
2.  尝试在文件中检查传入请求的 IP

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:24:18.387

如果您使用 Apache，则可以使用 .htaccess 来限制对文件的访问：

[http://httpd.apache.org/docs/current/howto/htaccess.html](http://httpd.apache.org/docs/current/howto/htaccess.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:23:17.967

.htaccess、chmod 或者您可以使用您自己定义的密钥...您有多种可能性。

编辑：无论如何，如果文件只包含一个函数。除非您在此文件中实际调用它，否则没有人可以从外部 http 请求中使用它：`function();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T09:29:13.433

关于支付宝..

我建议从 paypal 看一下[这个例子](https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623)，它们是 x.com 的一部分，它是合法的。

重要的部分是：

```
// STEP 2: Post IPN data back to paypal to validate

$ch = curl_init('https://www.paypal.com/cgi-bin/webscr');
curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_FORBID_REUSE, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Connection: Close'));

// In wamp like environments that do not come bundled with root authority certificates,
// please download 'cacert.pem' from "http://curl.haxx.se/docs/caextract.html" and set the directory path 
// of the certificate as shown below.
// curl_setopt($ch, CURLOPT_CAINFO, dirname(__FILE__) . '/cacert.pem');
if( !($res = curl_exec($ch)) ) {
    // error_log("Got " . curl_error($ch) . " when processing IPN data");
    curl_close($ch);
    exit;
}
curl_close($ch);

// STEP 3: Inspect IPN validation result and act accordingly

if (strcmp ($res, "VERIFIED") == 0) {
    // check whether the payment_status is Completed
    // check that txn_id has not been previously processed
    // check that receiver_email is your Primary PayPal email
    // check that payment_amount/payment_currency are correct
    // process payment

    // assign posted variables to local variables
    $item_name = $_POST['item_name'];
    $item_number = $_POST['item_number'];
    $payment_status = $_POST['payment_status'];
    $payment_amount = $_POST['mc_gross'];
    $payment_currency = $_POST['mc_currency'];
    $txn_id = $_POST['txn_id'];
    $receiver_email = $_POST['receiver_email'];
    $payer_email = $_POST['payer_email'];
} else if (strcmp ($res, "INVALID") == 0) {
    // log for manual investigation
} 
```

这里发生的是发布到您的 ipn 脚本的请求被发送回贝宝进行验证，贝宝检查详细信息并发送回“有效”响应，此时您知道数据是好的并且已由贝宝发送，您是然后，您可以对数据采取行动并更新数据库或您需要执行的任何操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T09:31:55.393

您可以尝试以下方法：

将其移出`public_html`文件夹。

```
if (php_sapi_name() == 'cli')
{
   //code to be executed
}
else if (php_sapi_name() != 'cli')
{
   die();
} 
```

这样，文件将只能从命令行执行，也可以从您的服务器本身执行，因为您必须验证服务器详细信息。该文件无法从 Web 执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T09:39:49.823

另一种不太优雅的方法可能是定义一个需要和秘密的参数以能够执行代码。

例如：

```
www.myweb.com/myfunction.php?pass=secretPassword 
```

然后您可以检查密码是否是您期望的密码，例如：

```
//hardcoded hashed pass with sha1, for example.
$myHashedPass = '40bd001563085fc35165329ea1ff5c5ecbdbbeef';

if(sha1($_GET['pass']) != $myHashedPass){
    die();
} 
```

可能不是最好的解决方案，但与其他一些解决方案结合使用会很有用。

# java - neo4j 路径遍历器说明

> ID：15381205
> 
> 赞同：0
> 
> 时间：2013-03-13T09:20:45.887
> 
> 标签：java, neo4j

1.  将关系类型定义为

    private enum Rels implements RelationshipType { LIKES, KNOWS } 可以使用以下遍历器遍历该图，从“Joe”节点开始：

    for ( 路径位置 : Traversal.description() .depthFirst() .relationships( Rels.KNOWS ) .relationships( Rels.LIKES, Direction.INCOMING ) .evaluator( Evaluators.toDepth( 5 ) ) .traverse( node ) ) { 输出+= 位置 + "\n"; 遍历会输出：

    (7) (7)<--[喜欢,1]--(4) (7)<--[喜欢,1]--(4)--[知道,6]-->(1) (7 )<--[喜欢,1]--(4)--[知道,6]-->(1)--[知道,4]-->(6) (7)<--[喜欢,1 ]--(4)--[知道,6]-->(1)--[知道,4]-->(6)--[知道,3]-->(5) (7)<- -[喜欢,1]--(4)--[知道,6]-->(1)--[知道,4]-->(6)--[知道,3]-->(5) --[知道,2]-->(2) (7)<--[喜欢,1]--(4)--[知道,6]-->(1)<--[知道,5] --(3)

    如果我们取 (7)<--[LIKES,1]--(4) 数字 1 代表什么？

    提前感谢更多信息 [http://docs.neo4j.org/chunked/stable/tutorial-traversal-java-api.html](http://docs.neo4j.org/chunked/stable/tutorial-traversal-java-api.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T10:04:49.437

这可能是边缘的 id

# ios - 如何在 Grand Central Dispatch 中创建死锁？

> ID：15381209
> 
> 赞同：23
> 
> 时间：2013-03-13T09:21:28.267
> 
> 标签：ios, objective-c, xcode, grand-central-dispatch

在 Apple 文档中，它说：

> 重要提示：您永远不应该从在您计划传递给函数的同一队列中执行的任务中调用 dispatch_sync 或 dispatch_sync_f 函数。这对于保证死锁的串行队列尤其重要，但对于并发队列也应该避免。

你如何编写代码来做到这一点？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-13T09:35:34.313

某个队列上的故意死锁：

```
dispatch_queue_t queue = dispatch_queue_create("my.label", DISPATCH_QUEUE_SERIAL);
dispatch_async(queue, ^{
    dispatch_sync(queue, ^{
        // outer block is waiting for this inner block to complete,
        // inner block won't start before outer block finishes
        // => deadlock
    });

    // this will never be reached
}); 
```

这里很清楚，外部块和内部块在同一个队列上运行。大多数情况下发生这种情况的地方不太明显，调用者`dispatch_sync`正在操作哪个队列。这通常发生在（深度）嵌套堆栈中，您正在执行最初在某个队列上启动的某个类中的代码，并且意外地将 a 调用`dispatch_sync`到同一个队列中。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-13T09:35:30.867

创建死锁的简单代码：

```
dispatch_queue_t q = dispatch_queue_create("deadlock queue", DISPATCH_QUEUE_SERIAL);

NSLog(@"1");
dispatch_async(q, ^{
    NSLog(@"2");
    dispatch_sync(q, ^{
        NSLog(@"3");
    });
    NSLog(@"4");
});
NSLog(@"5"); 
```

日志输出：

```
1
5
2 
```

这里内部块被安排在串行队列上运行，`q`但在当前块完成之前它不能运行，而当前块反过来等待内部完成，因为我们同步调用它。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-13T09:44:21.623

最简单的阻塞方法是`dispatch_sync`在当前队列上：

```
dispatch_sync(dispatch_get_current_queue(), ^{}); 
```

当当前队列是串行队列时，这会阻塞，例如主队列。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-12-18T08:22:07.847

在最新的 Swift 语法中：

```
let queue = DispatchQueue(label: "label")
queue.async {
    queue.sync {
        // outer block is waiting for this inner block to complete,
        // inner block won't start before outer block finishes
        // => deadlock
    }
    // this will never be reached
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-03-11T18:46:46.757

面试官经常会问：“造成死锁最简单的方法是什么？”

对象-C：

```
dispatch_sync(dispatch_get_main_queue(), ^{}); 
```

迅速：

```
DispatchQueue.main.sync {} 
```

从主线程调用`sync`将导致死锁，因为主队列是串行队列，并且会`sync`停止当前队列执行，直到传递的块/闭包完成。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-01-25T12:29:35.053

`sync`如果有人好奇，并发队列如果被称为针对同一队列，则不会死锁。我知道这很明显，但我需要确认只有串行队列的行为方式

作品：

```
let q = DispatchQueue(label: "myQueue", attributes: .concurrent)

q.async {
    print("work async start")
    q.sync {
        print("work sync in async")
    }
    print("work async end")
}

q.sync {
    print("work sync")
}

print("done") 
```

失败：

初始化`q`为`let q = DispatchQueue(label: "myQueue") // implicitly serial queue`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-11-15T14:36:04.107

在 Swift 4.2 中，您可以使用以下代码导致死锁：

```
let aSerialQueue = DispatchQueue(label: "my.label")

aSerialQueue.sync {
    // The code inside this closure will be executed synchronously.
    aSerialQueue.sync {
        // The code inside this closure should also be executed synchronously and on the same queue that is still executing the outer closure ==> It will keep waiting for it to finish ==> it will never be executed ==> Deadlock.
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-11T09:06:38.723

在我的情况下，**调度队列**调用 Xcode 中的异常或设备崩溃，但**sleep()**的使用更适合我的测试目的（它只是当前队列中的冻结）。

```
sleep(UInt32.max) 
```

# android - 将您自己的侦听器添加到列表中

> ID：15381211
> 
> 赞同：0
> 
> 时间：2013-03-13T09:21:38.403
> 
> 标签：android, list, listener

我试图在该列表中添加一个侦听器，但我不明白为什么如果您想查看其余代码，请检查[将您自己的侦听器添加到列表中](https://stackoverflow.com/questions/15381211/add-your-own-listener-to-a-list)

```
public void onCreatebis(final ResolveInfo resolveInfo)  {

            setContentView(R.layout.main);
            final Intent mainIntent=new Intent(Intent.ACTION_MAIN,null);
            mainIntent.addCategory(Intent.CATEGORY_LAUNCHER) ;
            final PackageManager pm = getApplicationContext().getPackageManager();
            final ArrayList<ResolveInfo> listP= (ArrayList<ResolveInfo>)                    pm.queryIntentActivities( mainIntent, 0);
            final int trimLength = "com.android.".length();
            ArrayList<String> maliste = new ArrayList<String>();
                        // Loop over each item.
            for (ResolveInfo info : listP) {
                // Get the (full, qualified) package name.
                String packag = info.activityInfo.applicationInfo.packageName;

                // Now, trim it with substring and the trim length.
                String trimmed = packag.substring(trimLength);
                maliste.add(trimmed);
            }
            ListView list = (ListView)findViewById(R.id.list);
            monadaptateur adapter2 = new monadaptateur(this, maliste);

            list.setOnItemClickListener(new OnItemClickListener(){

                @Override
                public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                        long arg3) {
                    Log.v("lalalala","lalala");

                }
                   });
            list.setAdapter(adapter2);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:24:34.460

如果 ListView 具有可聚焦的项目，`onClickListener`则将触发而不是`onItemClickListener`. 设置项目可以聚焦为假

```
list.setItemsCanFocus(false); 
```

看看这个[线程](https://stackoverflow.com/questions/2098558/listview-with-clickable-editable-widget)。另请注意，有解决方法。但更好的选择是将项目设置为不可聚焦并使用`OnItemClickListener`，或者使它们可聚焦并`onClickListener`在视图上使用

此外，`onClickListener`不应为列表视图设置 。代替`getView()`方法中的每个列表视图项

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // ...

    view.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // your code
        }

    });

    return view;
} 
```

# c# - 我们应该把类、枚举和其他实体放到他们自己的文件中吗？

> ID：15381212
> 
> 赞同：16
> 
> 时间：2013-03-13T09:21:40.920
> 
> 标签：c#, .net, project, code-organization

我与我们公司的团队负责人\建筑师就这个话题进行了讨论。

他认为，如果将“逻辑连接的实体”放在一个 cs 文件中，则更容易理解大型项目。

我引用：

1.  *“整个逻辑结构、接口和类都可以在一个地方看到，这是一个无法反驳的论点。要看到同样的东西，但有一堆文件，你需要使用工具、类图表，用于导航的 R# 等。”*

2.  *“按照这个糟糕的理论，我可能会尖叫说一大堆分离的文件很酷，但是当涉及到对现有代码进行更改时，特别是如果你不是这段代码的编写者，那么很难理解大量分散的文件。所以在论坛上，你可以写“一个枚举一个文件”，但在实践中，永远不应该使用这种方法“*

3.  *“......关于开发人员之间的代码库分离，现在同时编辑同一个文件不是问题。合并不是问题。”*

我多次听到并阅读到我们必须为每个枚举、类等创建一个 .cs 文件，这是最佳实践。

但我无法说服他。他说他不信任任何知名程序员，例如 Jon Skeet。顺便说一下，这里是 Skeet 对这个主题的看法[定位枚举类型的最佳位置在哪里？](https://stackoverflow.com/questions/213637/where-is-the-best-place-to-locate-enum-types)

你怎么看？有真正的问题吗？还是口味问题，应该由组织的编码标准来规范？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T09:39:29.447

在我看来：

较大逻辑类中所需的小型枚举和类可以保留在其文件中。
但是，如果在该范围之外使用较小的类和枚举，则应该单独使用它们（尽管如果它们在逻辑上链接，它们本身可能在同一个文件中）。
所以我同意他关于逻辑耦合的观点。

话虽如此，我必须说还有其他选择，您可以在项目内创建逻辑文件夹以保存来自相同逻辑环境或连接的类。
今天的 IDE 让您在整个解决方案中通过 Go-To 功能轻松访问和移动，因此查找代码不是问题。

将逻辑组件保持在一起（只要它们真正紧密耦合）在扩展时确实具有很大的优势。随着项目变得越来越大，它往往会变得更加混乱，而这正是他试图避免的。

顺便说一句，如果您仔细阅读 Skeet 的意见，您会注意到：

> 并**假设它们将被其他类使用**，在它们自己的文件中使它们成为顶级类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T09:44:42.867

有趣的问题，这是我的看法。

您必须区分逻辑分组（命名空间）和物理分组（文件/项目）。

在任何情况下，枚举都应该放在它业务明智所属的逻辑命名空间中，而不是放在只包含枚举的命名空间中，或者甚至不要在命名空间名称中指定枚举。拥有“枚举”命名空间是没有意义的，因为您将混淆概念并且您没有指定它所属的域。

如果一个枚举只被一种类型的类使用，你也可以把它放在类本身中。这样，很明显它属于那个特定的类，因此它在同一个代码文件中。如果枚举更像是一个通用枚举，在多个类中使用，那么将它单独放在自己的代码文件中。

所以我不同意你的团队领导：如果你把它放在同一个文件中，让它成为类本身的一部分，因为如果你把它放在同一个文件中，这就是你所说的，否则把它放在它自己的代码文件中。我认为无论如何，它的用法更一致。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T09:34:12.987

这在很大程度上是一个意见问题，因此最好在此处发布：

[https://codereview.stackexchange.com/](https://codereview.stackexchange.com/)

但是，通常您应该将所有类型定义放在它们自己的文件中，但有一些例外：

*   用于为抽象基类或接口提供契约的代码契约类在逻辑上属于该类。

*   *仅*在类中用作参数、属性或返回值的枚举也属于该类（但不嵌套在其中）。

可能还有其他一些例外，但通常每种类型都应放入单独的文件中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T09:27:43.940

i think that your "teamlead\architect" opinion is largely based on poor usages of namespaces. every time I have heard that argument from a developer it is because of almost total lack of namespace usage(and then it becomes really messy if you add a lot of files)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-13T09:35:27.557

我不同意这里的“团队负责人/架构师”提出的许多观点。

就像很多与代码有关的事情一样，这是一个见仁见智的问题。

就个人而言，我认为最好为每个枚举、类等创建一个 .cs 文件。通常，如果有一个类与枚举最密切相关，我会将它们放在同一个文件中。

我接受公司可以拥有自己的编码标准，但这里建议的标准是完全错误的，因为它违背了很多我认为的良好做法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-13T09:40:06.810

你和他可以看看互联网上大量复杂的开源项目。看看 github、codeplex 和类似的地方。

例如查看 MVC 源代码。如果每个文件的类对微软来说足够好并且像 MVC 一样复杂的项目，我认为它很有可能对你们也足够好。

就我个人而言，我使用每个文件的类/接口方法（在特殊情况下除外，比如有一点枚举，但这是主观的），我看不出它有任何问题。

# mysql - 检索最近的多行

> ID：15381213
> 
> 赞同：0
> 
> 时间：2013-03-13T09:21:41.290
> 
> 标签：mysql

这个问题已经问了好几次了，但从来没有得到真正的答案！

我有一个看起来像这样的表：

```
answer_id  q_id  answer  qscore_id  answer_timestamp
1          10    Male    3          1363091016
2          10    Male    3          1363091017
3          11    Male    3          1363091018
4          10    Male    3          1363091019
5          11    Male    3          1363091020
6          12    Male    3          1363091020
7          11    Male    3          1363091025 
```

因此，对于相同的问题（q_id），我有多个答案。我希望每个问题只能检索一个答案，这是最新的答案。

IE。

应该返回三行，它们都是该 q_id 的最新回答：

```
4          10    Male    3          1363091019
6          12    Male    3          1363091020
7          11    Male    3          1363091020 
```

任何帮助将非常感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:27:10.667

Use a subselect to get the max timestamps and then join that back against the table

```
SELECT a.answer_id, a.q_id, a.answer, a.qscore_id, a.answer_timestamp
FROM SomeTable a
INNER JOIN (SELECT q_id, MAX(answer_timestamp) AS answer_timestamp FROM SomeTable GROUP BY q_id) Sub1
ON a.q_id = Sub1.q_id AND a.answer_timestamp = Sub1.answer_timestamp 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-13T09:24:59.663

从 q_id=? 的表中选择 * 按 answer_timestamp desc 限制 3 排序

# php - 用于智能电视应用的 HTML5 v/s Ajax-CE

> ID：15381214
> 
> 赞同：2
> 
> 时间：2013-03-13T09:21:41.393
> 
> 标签：php, javascript, jquery, html, smart-tv

我正在为 Panasonic Viera 智能电视开发应用程序。我找到了开发指南[http://developer.vieraconnect.com/applications](http://developer.vieraconnect.com/applications)。它包括入门指南、设备指南、技术概述等。

在 Panasonic Smart tv 中开发应用程序时，我听说过并阅读了有关**Ajax-CE SDK**和**HTML5 SDK**的信息。

*   Ajax-CE SDK 和 HTML5 SDK 有什么区别？
*   为什么我应该在示例中使用一个而不是另一个？

谢谢你这么！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:00:17.083

关于*“为什么我应该用一个而不是另一个来举例？”*

[引用](http://developer.vieraconnect.com/intro/development-guide/device-guidelines)设备指南：

> **设备指南**
> 
> 两个 SDK 都支持一组单独的设备。有关详细信息，请参阅以下每个 SDK：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-05T07:36:35.837

Ajax-CE 是松下在 2011 年 TV/BD 型号上使用的技术，2012 年型号也支持该技术。从 2012 年的电视型号开始，还支持 HTML5，因此根据需要支持哪些电视连续剧，您应该决定技术。

一般来说，所有电视供应商都在转向 HTML5 世界——飞利浦也是如此，CE-HTML 不再是 2012 年以上型号 (NetTV 4.x) 的要求。

# javascript - 在javascript中使用document.querySelector获取数组中的值时出现错误NULL？

> ID：15381216
> 
> 赞同：0
> 
> 时间：2013-03-13T09:21:56.603
> 
> 标签：javascript

```
object = ["a","input","textarea","select","img","#content",".view"];
for (var i = 0; i < oj.length; i++) {
    var resources = document.querySelector(object[i]);
    resources.addEventListener('mouseover', function(){alert("test");}, false);
} 
```

错误`TypeError: resources is null`，如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:23:38.570

我猜对非虚假值（元素*匹配*选择器）的基本检查是要走的路：

```
if (resources) {
    resources.addEventListener("mouseover", function() { ... }, false);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:23:48.100

没有与您的数组中的选择器之一匹配的元素。在附加事件之前，做一个简单的检查以确保它不是未定义的。

```
var object = ["a","input","textarea","select","img","#content",".view"];
for (var i = 0; i < oj.length; i++) {
    var resources = document.querySelector(object[i]);
    if(resources){
    resources.addEventListener('mouseover', function(){alert("test");}, false);
    }
} 
```

# php - 获取标题并设置一个 url 链接

> ID：15381226
> 
> 赞同：0
> 
> 时间：2013-03-13T09:22:30.243
> 
> 标签：php

再会

我想编辑一个自定义链接（见下面的链接）。

我想做的是替换 wordpress 帖子的**永久链接**，并将其替换为自定义 url 和末尾的“标题”。标题将从 ["title"] 中获取

```
<h2 class="featured-title"><a href="<?php echo esc_url($arr[$i]["permalink"]); ?>"><?php echo esc_html($arr[$i]["title"]); ?></a></h2> 
```

所以这将是这样的：

```
h2 class="featured-title"><a href="<?php echo esc_url($arr[$i]["http://mysite.com/"title""]); ?>"><?php echo esc_html($arr[$i]["title"]); ?></a></h2> 
```

我该怎么做呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:25:11.987

我不确定你在找什么试试这个：

```
<h2 class="featured-title"><a href="http://mysite.com/categories/<?php echo strtolower(str_replace(" ","",$arr[$i]["title"])); ?>"><?php echo esc_html($arr[$i]["title"]); ?></a></h2> 
```

# c# - 更改所选项目 MediaUriElement 时隐藏的 WPF TabControl

> ID：15381227
> 
> 赞同：0
> 
> 时间：2013-03-13T09:22:32.553
> 
> 标签：c#, wpf, tabcontrol, mediaelement

我有 TabControl，我希望 TabItems 的内容中有视频。我有将视频添加到选项卡内容的方法：

```
private void AddVideosFromListToTab(IEnumerable<VideoClass> list, TabItem tab)
    {
        var stackPanel = new StackPanel { Orientation = Orientation.Horizontal };
        foreach (
            var media in
                list.Select(
                    video =>
                    MediaUriElementHelper.CreatePreviewMediaElementUri(video.SamplePath(), 200, 150, mediaPreviewControls,
                                                                       mediaPlayer_MouseDown)))
        {
            stackPanel.Children.Add(media);
        }
        stackPanel.Children.Add(new TextBlock {Text = "Some text"});
        tab.Content = stackPanel;
    } 
```

这是我用视频创建媒体的方法。我正在使用 MediaUriElement，因为它的性能更好。

```
 public static MediaUriElement CreatePreviewMediaElementUri(string sourceFile, int width, int height, List<MediaUriElement> listMedias, System.Windows.Input.MouseButtonEventHandler mouseDown)
    {
        var media = new MediaUriElement();
        media.BeginInit();
        media.Width = width;
        media.Height = height;
        media.Margin = new Thickness(20);
        media.Volume = 0;
        media.LoadedBehavior = WPFMediaKit.DirectShow.MediaPlayers.MediaState.Play;
        media.MouseDown += mouseDown;
        media.Loop = true;
        media.Source = new Uri(sourceFile);
        media.EndInit();
        listMedias.Add(media);
        return media;
    } 
```

当应用程序加载时没关系，但是当我选择另一个选项卡时没有视频，当我返回第一个选项卡时也没有视频了。我添加了一些文本，并且一直存在。所以问题出在 MediaUriElement 上。有人知道如何解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:47:42.093

我想因为普通的 TabConrol 只有一个 contentPresenter 它会丢弃以前的内容。如果是这样，这应该有效： [Stop TabControl from recreate its children](https://stackoverflow.com/questions/9794151/stop-tabcontrol-from-recreating-its-children)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T09:03:29.437

我设法在不使用 TabControlEx 的情况下修复了它（因为它也对我不起作用）。我使用 Datatemplates 和 templateselector 在选项卡之间切换。

xml:

```
 <Window.Resources>
    <local:MainTabViewDataTemplateSelector x:Key="myMainContentTemplateSelector" />
    <DataTemplate x:Key="Dashboard">
        <views:DashboardView />
    </DataTemplate>
    <DataTemplate x:Key="SystemHealth">
        <views:SystemHealthView />
    </DataTemplate>
</Window.Resources>
        <TabControl ItemsSource="{Binding MainTabs}"
                Margin="0,33,0,0"
                Grid.RowSpan="2"
                SelectedIndex="0"
                 Width="auto" 
                Style="{DynamicResource TabControlStyleMain}"
                ContentTemplateSelector="{StaticResource myMainContentTemplateSelector}"
                Padding="20" Grid.ColumnSpan="2"
                VerticalAlignment="Stretch">
        <TabControl.Background>

            <ImageBrush ImageSource="/SystemHealthAndDashboard;component/Images/innerBackground.png"/>

            </TabControl.Background>
        <TabControl.ItemTemplate>
            <DataTemplate >
                    <TextBlock Grid.Column="0" Text="{Binding Name}" VerticalAlignment="Center" HorizontalAlignment="Left"/>
            </DataTemplate>
        </TabControl.ItemTemplate>
    </TabControl> 
```

数据模板选择器：

```
 public class MainTabViewDataTemplateSelector : DataTemplateSelector
{
    public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
        FrameworkElement element = container as FrameworkElement;
        switch ((item as TabInfoEntity).TabIndex)
        {
            case 1:
                {
                    return element.FindResource("Dashboard") as DataTemplate;
                }
            case 2:
                {
                    return element.FindResource("SystemHealth") as DataTemplate;
                }

        }
        return null;
    }
} 
```

TabInfoEntity 类（这种类型的对象列表是 TabControl 的 itemsource）：

公共类 TabInfoEntity { 公共 TabInfoEntity() {

```
 }
    private string name;

    public string Name
    {
        get { return name; }
        set { name = value; }
    }

    private int tabindex;

    public int TabIndex
    {
        get { return tabindex; }
        set { tabindex = value; }
    }
} 
```

# c# - 我们可以在实体框架中拥有没有主键的表吗？

> ID：15381233
> 
> 赞同：40
> 
> 时间：2013-03-13T09:22:55.170
> 
> 标签：c#, entity-framework

我只是从[msdn](http://msdn.microsoft.com/en-us/data/jj193542)练习代码优先新数据库实体框架，我想知道是否可以在代码优先新数据库 EF 中创建没有主键的表？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2015-11-02T12:59:48.303

EF 可以对数据库执行的操作与使用数据库可以执行的操作之间存在很大差异。

**大多数数据库允许表没有主键。**大多数数据库还允许表没有聚集索引/索引组织表（或其他数据库系统中的特定术语）。

这并没有错，人们不应该说没有 PK 的桌子是个坏主意。

与往常一样，这取决于特定表的需求和使用情况。例如日志表，不需要PK。它永远不会被用作FK，那么它有什么用呢？

最重要的是，**EF 不支持没有**开箱即用密钥的表，有一些奇怪的解决方法，但我所见过的都不够好。这是一种耻辱。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-03-13T09:27:20.180

不，您不能，因为当您进行更新或删除操作时，Entity Framework 需要知道跟踪对象的密钥。

**无论如何，没有 PrimaryKey 的表不是一个好主意**

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2017-02-24T15:04:30.747

1.  实体框架**必须**具有在对表建模的实体（POCO 类）上标识的键。
2.  您在实体框架中定义的键**不需要**存在于底层数据库（例如 sql 表）中。

如果您的 SQL 表没有主键，您仍然可以在 Entity Framework 中对其进行建模，您只需为该实体定义一个键。选择实体上的一个或多个（可能是所有）列，当它们组合时，将在实体集合中唯一标识该实例。请注意，这仅对更新或删除实体很重要，因为它们需要针对该集合中的其他实体进行唯一标识以针对更改。查找/选择和添加/插入不需要这种一致性。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-03-25T11:18:26.533

有时添加 PK 是不可能的，因为它可能是您必须使用的客户端的只读、超级保护数据库。EF 即使在 SELECT 操作上也会引发异常。当我遇到这个问题时，我能够像这样解决它（名称是人为的）：

```
[Table( "WeirdTable", Schema = "SomeSchema" )]
public class WeirdTable
{
    [Column( "ID1" )]
    public int Id1 { get; set; }

    [Column( "ID2" )]
    public int Id2 { get; set; }
} 
```

在上下文的代码文件中：

```
protected override void OnModelCreating( DbModelBuilder model_builder )
{
    base.OnModelCreating( model_builder );
    model_builder.Entity<WeirdTable>().HasKey(
        t => new { t.Id1, t.Id2 }
    );
} 
```

所以基本上你只需要指定哪些列可以是主键。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2019-01-29T13:41:28.937

从 .NET Core 2.1 开始，EF Core 支持没有主键的模型。
这是通过*查询类型*而不是*实体类型*的概念来实现的。
请参阅[https://docs.microsoft.com/en-us/ef/core/modeling/query-types](https://docs.microsoft.com/en-us/ef/core/modeling/query-types)

> 查询类型的一些主要使用场景是：
> 
> *   作为即席 FromSql() 查询的返回类型。
> *   映射到数据库视图。
> *   **映射到没有定义主键的表。**
> *   映射到模型中定义的查询。

*查询类型*虽然有限制。它们不能在数据库中插入、更新或删除。而且他们对导航属性的支持有限。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-05-06T12:58:00.810

EF.Core 5 将具有`[Keyless]`允许拥有没有 PK 的实体的属性。但它仍在开发中。

[EF.Core 5 新功能](https://docs.microsoft.com/en-us/ef/core/what-is-new/ef-core-5.0/whatsnew)

# javascript - javascript setTimeout() 不添加延迟

> ID：15381245
> 
> 赞同：1
> 
> 时间：2013-03-13T09:23:25.737
> 
> 标签：javascript

以下是我的代码。现在，当鼠标离开时，我想等待 2000 毫秒以恢复我的幻灯片放映。但是一旦鼠标离开，图像就会改变。有人可以帮忙吗？？

```
<img src="images/achiever.png" name="slide" alt="badge" 
width="130" height="130" onmouseover="pause()" 
onmouseout="javascript:setTimeout(resume(), 2000)" /> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T09:25:07.940

您正在*调用* `resume`并将其返回值传递给`setTimeout`，而不是传递`resume`给它。`setTimeout`应该是这样的：

```
setTimeout(resume, 2000) 
```

就像`foo(bar())`执行*bar*并将其返回值传递给一样`foo`，`setTimeout(resume(), 2000)` *执行* `resume`并将其返回值传递给`setTimeout`.

* * *

另外，请注意您不要将`javascript:`伪协议与任何`onXYZ`属性一起使用，仅在需要 URL 的地方（例如`href`在锚点上）使用。所以你的`onmouseout`属性应该是这样的：

```
onmouseout="setTimeout(resume, 2000)" 
```

属性中的代码`onXYZ`始终是代码，而不是 URL。`javascript:`那里实际上最终成为一个毫无意义的[标签](http://www.ecma-international.org/ecma-262/5.1/#sec-12.12)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:25:40.627

setTimeOut 的参数应该是一个函数，而将函数作为参数传递的正确方法是使用不带括号的函数名。如果添加括号，则实际上是在执行函数并将结果传递给 setTimeOut。因此，应该是`setTimeOut(resume,2000)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T09:28:17.603

请去掉括号。示例：setTimeout(resume, 2000);

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T09:30:55.303

resume() 周围的括号导致立即评估该函数。有效地删除这些会使函数调用某种“指针”。

```
<html>
<head>
<script type="text/javascript">
function pause() {
    //pause here
}

function resume() {
    alert('resumed');
}
</script>
</head>
<body>
<img src="images/achiever.png" name="slide" alt="badge" width="130" height="130"     onmouseover="pause()" onmouseout="javascript:setTimeout(resume, 2000)" />
</body> 
```

# java - 从视频流中获取预览图片

> ID：15381247
> 
> 赞同：1
> 
> 时间：2013-03-13T09:23:35.673
> 
> 标签：java, android, video-streaming

我有一个指向视频流的链接，并且想要以某种方式预览视频图片，例如从 10 秒开始。任何想法如何实现这一点？

# linux-kernel - 如何在 qemu 环境中使用 GDB 调试 Linux 内核

> ID：15381261
> 
> 赞同：0
> 
> 时间：2013-03-13T09:24:32.680
> 
> 标签：linux-kernel, gdb

我有一个要求，我想使用 GDB 调试我的 Linux 内核映像，但不确定有什么可用的选项，

当我在命令下运行时

gdb ./vmlinux

```
 users/amit/vmlinuz-2.6.32-33-generic": not in executable format: File format not recognized 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T09:31:32.913

`z`末尾的告诉`vmlinuz`您您的内核映像是压缩格式的。要调试它，您需要有一个未压缩的版本。您*可以*`vmlinux`从中提取 a `vmlinuz`，但您必须确保在某处具有所需的调试符号（System.map？）。

最简单的选择可能是使用调试符号且不进行压缩来重建内核。

# java - 如何在java中将图像转换为像素？

> ID：15381263
> 
> 赞同：0
> 
> 时间：2013-03-13T09:24:35.540
> 
> 标签：java, image

我有 JPEG 格式的 RGB 图像。我想将此图像转换为像素并显示在文本文件中。这个怎么做？

```
public static int[][][] getPixelData(Image image) {

    // get Image pixels in 1D int array
    int width = image.getWidth(null);
    int height = image.getHeight(null);

    int[] imgDataOneD = imageToPixels(image);

private static int[] imageToPixels(Image image) {

    int height = image.getHeight(null);
    int width = image.getWidth(null);

    int pixels[] = new int[width * height];

    PixelGrabber grabber = new PixelGrabber(image, 0, 0, width, height, pixels, 0, width);

    try {
        grabber.grabPixels();
    } catch (InterruptedException e) {
    }

    return pixels;
} 
```

如何将此信息以序列向量格式存储在文本文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:31:40.603

您可以将整数保存为逗号分隔的列表。

确保还保存图像宽度，以便恢复图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:12:58.000

使用类似下面的东西。希望这会有所帮助

```
import java.io.*;
import javax.imageio.ImageIO;
import java.awt.image.BufferedImage;

public class ImageToText {
    public static void main(String args[]) throws IOException {
        File file = new File("your file path.jpg");
        BufferedImage image = ImageIO.read(file);
        // Getting pixel color by position x=100 and y=40

        for (int i = 0; i < image.getHeight(); i++) {
            for (int j = 0; j < image.getWidth(); j++) {
                int color = image.getRGB(j, i);

                // You can convert the colour to a readable format by changing
                // to following string. It is a 6 character hex
                // String clr = Integer.toHexString(color).substring(2);

                // Write this int value or string value to the text file
                // Add a comma or any other separator. Since it is always 6
                // characters long you can avoid using comma. It will save some
                // space.
            }
            // add a new line
        }
    }
} 
```

您可以考虑自己的算法来读取文本文件并检索数据。:-)

# c# - 带有 JS 函数调用的 MVC3 中的分页问题

> ID：15381265
> 
> 赞同：2
> 
> 时间：2013-03-13T09:24:39.310
> 
> 标签：c#, javascript, jquery, asp.net-mvc-3, lambda

我已经在我的 MVC3 应用程序中实现了分页。单击每个页码后，会发生回发并正确显示请求的页面。

以下是我的扩展代码 -

```
public static string PageLinks(this HtmlHelper html, PageLinks pagelinks, Func<int, string> pageUrl)
        {
            StringBuilder result = new StringBuilder();
            int startFrom;
            //Previous Page link
            int divi = (int)pagelinks.Current / pagelinks.PageLinksToDisplay;
            if (divi > 0)
            {
                TagBuilder tag = new TagBuilder("a"); // Construct an <a> tag
                tag.MergeAttribute("href", pageUrl((divi * pagelinks.PageLinksToDisplay) - 1));
                tag.InnerHtml = "Prev";
                result.AppendLine(tag.ToString());
            }
            if (divi > 0)
            {
                startFrom = (divi * pagelinks.PageLinksToDisplay);
            }
            else
            {
                startFrom = (divi * pagelinks.PageLinksToDisplay) + 1;
            }
            int endOn = (startFrom + pagelinks.PageLinksToDisplay);
            if (endOn > pagelinks.Total + 1)
                endOn = pagelinks.Total + 1;

            for (int i = startFrom; i < endOn; i++)
            {
                TagBuilder tag = new TagBuilder("a"); // Construct an <a> tag
                tag.MergeAttribute("href", pageUrl(i));
                tag.InnerHtml = i.ToString();
                if (i == pagelinks.Current)
                    tag.AddCssClass("selected");
                result.AppendLine(tag.ToString());
            }

            if (endOn < pagelinks.Total)
            {
                TagBuilder tag = new TagBuilder("a"); // Construct an <a> tag
                tag.MergeAttribute("href", pageUrl(endOn));
                tag.InnerHtml = "Next";
                result.AppendLine(tag.ToString());
            }
            return result.ToString();
        } 
```

下面是我的视图实现分页的源代码 -

```
<!-- Paging Strip -->
           <div class="PagerDiv">
                <div class="pagerCurrent">
                <%
                    int? currentPgNo = Model.Pager.Current;
                    int totalItems = Model.Pager.TotalItemCount;
                    int displayRecs = Model.Pager.PageSize;
                %>
                    Showing  <%=(currentPgNo * displayRecs) - (displayRecs - 1)%> - 
                    <%=(currentPgNo * displayRecs < totalItems ? currentPgNo * displayRecs : totalItems)%>
                    out of <%=totalItems%> 
                </div>
                <div class="pager">
                    <%=Html.PageLinks(Model.Pager, x => Url.Action("Index", new { Current = x }))%>
                </div>
                <div class="options">

                    Sort By : <%:Html.DropDownListFor(m=>m.SortBy, Model.SortOptions, new { onchange = "this.form.submit();" })%>
                </div>
            </div>
           <!-- End Paging--> 
```

下面是输出 - ![寻呼机](../Images/7aa800c645f1cfa32c2f02a99f5703b0.png)

**问题 ：-**

到目前为止，一切都很好。我面临着新的困难。我有一个 Div 视图，其中数据通过 json 呈现。我将我的部分视图之一渲染为 Json。这个局部视图显示了一个需要实现分页的列表。我不想回发，而是需要在 Div 中显示新渲染的 json。

编码

`<%=Html.PageLinks(Model.Pager, x => Url.Action("Index", new { Current = x }))%>`

实际上生成编号框，我想要的是在这些编号框上附加一个 JS 函数而不是一个 url。

我试过了

`<%=Html.JQueryPageLinks(Model.Pager, x => "MyJSFunction(" + x + ")")%>`

其中 x 代表页码。创建另一个扩展，但似乎没有运气。

这是代码 -

```
public static string JQueryPageLinks(this HtmlHelper html, PageLinks pagelinks, string jQryFn)
        {
            StringBuilder result = new StringBuilder();
            int startFrom;
            //Previous Page link
            int divi = (int)pagelinks.Current / pagelinks.PageLinksToDisplay;
            if (divi > 0)
            {
                TagBuilder tag = new TagBuilder("a"); // Construct an <a> tag
                //tag.MergeAttribute("href", pageUrl((divi * pagelinks.PageLinksToDisplay) - 1));
                tag.Attributes.Add("onclick", jQryFn);
                tag.InnerHtml = "Prev";
                result.AppendLine(tag.ToString());
            }
            if (divi > 0)
            {
                startFrom = (divi * pagelinks.PageLinksToDisplay);
            }
            else
            {
                startFrom = (divi * pagelinks.PageLinksToDisplay) + 1;
            }
            int endOn = (startFrom + pagelinks.PageLinksToDisplay);
            if (endOn > pagelinks.Total + 1)
                endOn = pagelinks.Total + 1;

            for (int i = startFrom; i < endOn; i++)
            {
                TagBuilder tag = new TagBuilder("a"); // Construct an <a> tag
                //tag.MergeAttribute("href", pageUrl(i));
                tag.Attributes.Add("onclick", jQryFn);
                tag.InnerHtml = i.ToString();
                if (i == pagelinks.Current)
                    tag.AddCssClass("selected");
                result.AppendLine(tag.ToString());
            }

            if (endOn < pagelinks.Total)
            {
                TagBuilder tag = new TagBuilder("a"); // Construct an <a> tag
                //tag.MergeAttribute("href", pageUrl(endOn));
                tag.Attributes.Add("onclick", jQryFn);
                tag.InnerHtml = "Next";
                result.AppendLine(tag.ToString());
            }
            return result.ToString();
        } 
```

有人可以帮我解决这个问题。感谢您分享您宝贵的时间和智慧。

**编辑：** ***在最简单的情况下，我希望 JS 函数调用页码而不是 url。例如。
单击 1 将调用 MyJSFunction(1)，单击 2 将调用 MyJSFunction(2) 等等...***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:37:52.300

这是我不久前写的（很糟糕！），可能会有所帮助。它用查询的结果替换指定的 div

```
 <div id="placeholder">
        <br />Enter your email address below.....<br /><br />
        <% using (Ajax.BeginForm("VoucherRequest", "Intro", new AjaxOptions { UpdateTargetId = "placeholder", InsertionMode = InsertionMode.Replace, HttpMethod = "Post" }))    
        {%>
            First Name: <%: Html.TextBox("txtFirstName", "", new { style = "width:50%" })%><br /><br />
            Last Name: <%: Html.TextBox("txtLastName", "", new { style = "width:50%" })%><br /><br />
            Your Email: <%: Html.TextBox("txtEmail", "", new { style = "width:50%" })%><br /><br />
            <input type="submit" value="Submit" />
            <br /><br />
            <%: Html.CheckBox("OptIn", false) %> ....
        </div> 
```

# c# - 基于 Xpath 在 XML 中添加节点，同时在同一个父节点中添加多个相似的标签

> ID：15381273
> 
> 赞同：1
> 
> 时间：2013-03-13T09:24:54.733
> 
> 标签：c#, xml, xml-serialization

我拥有构建 XML 所需的所有 xpath。所以我需要用 xpaths 和相关的值来构建这个 XML。但在某些情况下，XML 可能需要在同一父级中具有相同的标签，如下所示：

```
<root>
  <Name>
    <Address>
      <Fname>bbb</Fname>
      <Lname>bbb</Lname>
      <Official>o</Official>
      <Official>r</Official>
      <District>Ekm Edited</District>
      <State>Kerala Edited</State>
    </Address>
    <Sex>
      <Field1>m</Field1>
      <Field1>f</Field1>
    </Sex>
    <Qualification>
      <EDUCATION>10</EDUCATION>
    </Qualification>
  </Name>
</root> 
```

你可以看到不同的innerText[与]相同的标签`<Official>o</Official>`和重复标签。但是当我尝试创建这样的 XML 时，输出如下：`<Official>r</Official>``<Sex><Field1>m</Field1><Field1>f</Field1></Sex>`

```
<Sex>
  <Field1>m, f</Field1>
</Sex> 
```

和 `<Official>o, r</Official>`

以下是我用来基于 xpaths 创建节点的代码：

```
public XmlNode makeXPath(XmlDocument doc, string xpath, string innertext)
    {
        string[] partsOfXPath = xpath.Split('/');
        XmlNode node = null;
        for (int xpathPos = partsOfXPath.Length; xpathPos > 0; xpathPos--)
        {
            string subXpath = string.Join("/", partsOfXPath, 0, xpathPos);
            node = doc.SelectSingleNode(subXpath);
            if (node != null)
            {
                // append new descendants
                for (int newXpathPos = xpathPos; newXpathPos < partsOfXPath.Length; newXpathPos++)
                {
                    node = node.AppendChild(doc.CreateElement(partsOfXPath[newXpathPos]));

                }
                break;
            }
        }
        node.InnerText = innertext.TrimStart(' ');
        return node;
    } 
```

那么我如何创建单独的标签而不是用逗号分隔的内部文本的单个标签。

**编辑我**

我发现了问题，我将 xpath 和相应的值作为查询字符串发送到此页面。现在对于我的情况，如果存在多个相同的标签，Request.QueryString 会产生逗号分隔值[例如：m，f]。

好吧，我尝试向节点添加一个属性，但这只添加了逗号分隔数据中的最后一个数据。

有没有修复？？？就像我应该如何调用该函数来添加具有一些属性的节点，这些属性使相同的 xpath 节点成为不同的节点。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:48:29.573

据我了解您的代码，当您想要创建第二个节点时，makeXPath 函数将在第一个循环 中`Official`找到一个现有节点。将返回这个现有节点，然后您将在不创建新节点的情况下设置。我相信你应该在第一个循环之前检查完整路径的存在，然后创建兄弟。`Official``for``node = doc.SelectSingleNode(subXpath)``innerText``for`

就像是

```
public XmlNode makeXPath(XmlDocument doc, string xpath, string innertext)
    {
        string[] partsOfXPath = xpath.Split('/');
        XmlNode node = null;
        if (doc.SelectSingleNode(xpath) != null) {
            //get the parent
            node = doc.SelectSingleNode(string.Join("/", partsOfXPath, 0, partsOfXPath.Length-1));
            node = node.AppendChild(doc.CreateElement(xpath));
            node.InnerText = innertext.TrimStart(' ');
        }
        else {
            for (int xpathPos = partsOfXPath.Length; xpathPos > 0; xpathPos--)
            {
                string subXpath = string.Join("/", partsOfXPath, 0, xpathPos);
                node = doc.SelectSingleNode(subXpath);
                if (node != null)
                {
                    // append new descendants
                    for (int newXpathPos = xpathPos; newXpathPos < partsOfXPath.Length; newXpathPos++)
                    {
                        node = node.AppendChild(doc.CreateElement(partsOfXPath[newXpathPos]));

                    }
                    break;
                }
            }
            node.InnerText = innertext.TrimStart(' ');
        }
        return node;
    } 
```

# ruby - 仪表板 gitlab 上没有提交

> ID：15381275
> 
> 赞同：1
> 
> 时间：2013-03-13T09:24:57.730
> 
> 标签：ruby, gitlab

我正在使用 Gitlab 使用这些包： [https ://github.com/gitlabhq/gitlab-public-wiki/wiki/GitLab-Debian-packages-%28unofficial%29](https://github.com/gitlabhq/gitlab-public-wiki/wiki/GitLab-Debian-packages-%28unofficial%29)

一切正常，但我没有在仪表板上看到提交。任何线索如何解决这个问题？Unicorn 和 redis 运行良好。

蒂门

# c# - 如何将泛型类型参数与运算符重载一起使用？

> ID：15381285
> 
> 赞同：1
> 
> 时间：2013-03-13T09:25:40.953
> 
> 标签：c#, generics, operator-overloading, generic-type-argument

我想在一个类中重载一个运算符。我希望重载方法是通用的。例如：

```
class Subtractable
{
    public static Subtractable operator-<T>(Subtractable a, T b)
    {
        //Implementation
    }
} 
```

当我这样做时，我在泛型类型参数处收到以下消息：

> 语法错误，“（”预期

`b`如果我删除泛型类型参数，我会在's 类型处收到以下消息：

> 找不到类型或命名空间名称“T”（您是否缺少 using 指令或程序集引用？）

有没有办法做到这一点？如果是这样，怎么做？如果不是，为什么？

# c++ - QSharedData 和 operator=

> ID：15381288
> 
> 赞同：4
> 
> 时间：2013-03-13T09:25:45.730
> 
> 标签：c++, qt, qshareddata

最近我想实现隐式共享功能，就像 Qt 对它的`QSharedData`和`QSharedDataPointer`类所做的那样，所以我查看了它们的源代码，并`QSharedData`找到了以下三行代码：

```
private:
    // using the assignment operator would lead to corruption in the ref-counting
    QSharedData &operator=(const QSharedData &); 
```

但是我不明白如何`operator=`破坏引用计数。

如果我只是没有将其设为私有并将其实现留空，它不会起到同样的作用吗？

即，如果我简单地写了这个：

```
 public:
    QSharedData &operator=(const QSharedData & ) { return *this; } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T10:03:17.890

的全部目的`QSharedData`是保持引用计数。如果将一个分配给另一个，每一侧的引用计数会发生什么变化？正如您正确确定的那样：没有。将一个分配给另一个根本没有意义`QSharedData`，因此明智的做法是在编译时阻止它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T09:30:24.250

不，这将是一件坏事，如果它正在做引用计数，它需要做簿记并且仅仅让它返回`this`将意味着有`QSharedData`下落不明的副本。这个[来自 C++faq 的例子](http://www.parashift.com/c++-faq/ref-count-simple.html)`operator =`基本上显示了在引用计数对象中需要什么样的簿记。

# android - 应用程序在第二方向崩溃？

> ID：15381290
> 
> 赞同：-3
> 
> 时间：2013-03-13T09:25:48.653
> 
> 标签：android, android-fragments

我正在使用片段，下面是我的代码。当我尝试多次更改方向时，我的应用程序崩溃了。

这是我的代码：

```
public void Reservation_Dashboardinfo_execute() {

    String url_main = getActivity().getIntent().getStringExtra(
            "Detail_Bundle");
    url = url_main + "&action=getDashboardInfoDay";
    flag = 1;
    updateList clist = new updateList();
    clist.execute(new String[] { url });

}

@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    // setRetainInstance(true);
    String url_main = getActivity().getIntent().getStringExtra(
            "Detail_Bundle");
    url = url_main + "&action=getDashboardInfoDay";
    updateList clist = new updateList();
    clist.execute(new String[] { url });

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub

    View view = inflater.inflate(R.layout.reserv_dashboardinfo, container,
            false);

    return view;
}

class updateList
        extends
        AsyncTask<String, ArrayList<HashMap<String, String>>, ArrayList<HashMap<String, String>>> {
    TableRow row, row_yield, row_status;
    TextView t1, t2, t3, t4, t5, t6, t7;

    @Override
    protected void onPostExecute(ArrayList<HashMap<String, String>> result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);

        TableLayout tl1;
        tl1 = (TableLayout) getActivity().findViewById(R.id.table_dashboard);

        if (flag == 1) {

            tl1 = (TableLayout) getActivity()
                    .findViewById(R.id.table_dashboard);
            tl1.removeAllViews();
            tl1.invalidate();
            row = new TableRow(getActivity());

            t1 = new TextView(getActivity());

            t2 = new TextView(getActivity());

            t3 = new TextView(getActivity());

            t1.setText("Daypart");
            t2.setText("Reservation");
            t3.setText("Guest");
            t1.setTextSize(15);
            t2.setTextSize(15);
            t3.setTextSize(15);
            t1.setTypeface(null,Typeface.BOLD);
            t2.setTypeface(null,Typeface.BOLD);
            t3.setTypeface(null,Typeface.BOLD);

            row.addView(t1);
            row.addView(t2);
            row.addView(t3);

            tl1.setStretchAllColumns(true);
            tl1.addView(row, new TableLayout.LayoutParams(
                    LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));

        }

        for (int current = 0; current < result.size(); current++) {

            row = new TableRow(getActivity());

            t1 = new TextView(getActivity());

            t2 = new TextView(getActivity());

            t3 = new TextView(getActivity());

            t1.setText(result.get(current).get("Daypart"));
            t2.setText(result.get(current).get("Reservation_Today"));
            t3.setText(result.get(current).get("Nop_Today"));

            t1.setTextSize(15);
            t2.setTextSize(15);
            t3.setTextSize(15);

            row.addView(t1);
            row.addView(t2);
            row.addView(t3);

            tl1.setStretchAllColumns(true);
            tl1.addView(row, new TableLayout.LayoutParams(
                    LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));

        }

        row_yield = new TableRow(getActivity());
        t4 = new TextView(getActivity());

        t5 = new TextView(getActivity());
        t4.setText("Current Yield");
        // String
        // total_seated=getActivity().getIntent().getStringExtra("total_seated");
        ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();
        contactList = (ArrayList<HashMap<String, String>>) getActivity()
                .getIntent().getSerializableExtra("logindetails");

        String maxcapacity = contactList.get(0).get("MaxCapacity");

        int max_value = Integer.parseInt(maxcapacity);
        int total_seated_value = Integer.parseInt("2");
        float yield = (total_seated_value * 100) / max_value;
        t5.setText("" + yield + "% (" + total_seated_value + " seated)");
        t4.setTextSize(15);
        t5.setTextSize(15);
        row_yield.addView(t4);
        row_yield.addView(t5);
        tl1.setStretchAllColumns(true);
        tl1.addView(row_yield, new TableLayout.LayoutParams(
                LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
        row_status = new TableRow(getActivity());
        t6 = new TextView(getActivity());

        t7 = new TextView(getActivity());

        t6.setText("Connection Status");
        Drawable img = getActivity().getApplicationContext().getResources()
                .getDrawable(R.drawable.green_rnd);

        t7.setCompoundDrawablesWithIntrinsicBounds(img, null, null, null);
        t6.setTextSize(15);

        row_status.addView(t6);
        row_status.addView(t7);
        tl1.setStretchAllColumns(true);
        tl1.addView(row_status, new TableLayout.LayoutParams(
                LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
    }

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
    }

    @Override
    protected ArrayList<HashMap<String, String>> doInBackground(
            String... params) {
        // TODO Auto-generated method stub

        List<NameValuePair> postParameters = new ArrayList<NameValuePair>();

        ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

        JSONParser jParser = new JSONParser();

        // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(url, postParameters);

        try {
            // Getting Array of Contacts
            contacts = json.getJSONArray("result");

            // looping through All Contacts
            for (int i = 0; i < contacts.length(); i++) {
                JSONObject c = contacts.getJSONObject(i);

                // Storing each json item in variable
                // String id = c.getString(TAG_ID);
                String daypart = c.getString("daypart");
                String reservation = c.getString("reservations");
                String reservation7 = c.getString("reservations7");
                String reservation14 = c.getString("reservations14");
                String guests = c.getString("nop");
                String guests7 = c.getString("nop7");
                String guests14 = c.getString("nop14");

                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();

                // adding each child node to HashMap key => value
                // map.put(TAG_ID, id);
                map.put("Daypart", daypart);
                map.put("Reservation_Today", reservation);
                map.put("Reservation_Next7", reservation7);
                map.put("Reservation_Next14", reservation14);
                map.put("Nop_Today", guests);
                map.put("Nop_Next7", guests7);
                map.put("Nop_Next14", guests14);
                // map.put(TAG_EMAIL, email);
                // map.put(TAG_PHONE_MOBILE, mobile);

                // adding HashList to ArrayList
                contactList.add(map);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return contactList;
    }
    // TODO Auto-generated method stub

} 
```

}

这是我的日志猫

```
03-12 18:49:26.946: E/PhonePolicy(1208): Could not preload class for phone policy:    com.android.internal.policy.impl.PhoneWindow$ContextMenuCallback
 03-12 18:49:27.036: I/dalvikvm-heap(1208): Grow heap (frag case) to 7.944MB for 3145744-byte allocation
  03-12 18:49:27.296: D/libEGL(1208): loaded /system/lib/egl/libEGL_mali.so
  03-12 18:49:27.296: D/libEGL(1208): loaded /system/lib/egl/libGLESv1_CM_mali.so
   03-12 18:49:27.306: D/libEGL(1208): loaded /system/lib/egl/libGLESv2_mali.so
   03-12 18:49:27.346: D/OpenGLRenderer(1208): Enabling debug mode 0
   03-12 18:49:27.856: I/dalvikvm-heap(1208): Grow heap (frag case) to 11.000MB for 3145744-byte allocation
   03-12 18:49:28.006: D/TextLayoutCache(1208): Using debug level: 0 - Debug Enabled: 0
   03-12 18:49:28.376: D/OpenGLRenderer(1208): Flushing caches (mode 0)
  03-12 18:49:35.936: V/response code(1208): 200
   03-12 18:49:42.316: D/OpenGLRenderer(1208): Flushing caches (mode 0)
  03-12 18:49:44.226: D/OpenGLRenderer(1208): Flushing caches (mode 0)
  03-12 18:49:44.476: W/PhoneWindow(1208): Previously focused view reported id 2131230886 during save, but can't be found during restore.
  03-12 18:49:46.066: D/AndroidRuntime(1208): Shutting down VM
  03-12 18:49:46.066: W/dalvikvm(1208): threadid=1: thread exiting with uncaught exception (group=0x40a3e1f8)
  03-12 18:49:46.076: E/AndroidRuntime(1208): FATAL EXCEPTION: main
  03-12 18:49:46.076: E/AndroidRuntime(1208): java.lang.NullPointerException
  03-12 18:49:46.076: E/AndroidRuntime(1208):   at com.demo.fragmentdemo.Reservation_Dashboardinfo$updateList.onPostExecute(Reservation_Dashbo ardinfo.java:116)
  03-12 18:49:46.076: E/AndroidRuntime(1208):   at com.demo.fragmentdemo.Reservation_Dashboardinfo$updateList.onPostExecute(Reservation_Dashboardinfo.java:1)
  03-12 18:49:46.076: E/AndroidRuntime(1208):   at android.os.AsyncTask.finish(AsyncTask.java:602)
  03-12 18:49:46.076: E/AndroidRuntime(1208):   at android.os.AsyncTask.access$600(AsyncTask.java:156)
  03-12 18:49:46.076: E/AndroidRuntime(1208):   at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
  03-12 18:49:46.076: E/AndroidRuntime(1208):   at android.os.Handler.dispatchMessage(Handler.java:99)
  03-12 18:49:46.076: E/AndroidRuntime(1208):   at android.os.Looper.loop(Looper.java:137)
   03-12 18:49:46.076: E/AndroidRuntime(1208):  at android.app.ActivityThread.main(ActivityThread.java:4429)
   03-12 18:49:46.076: E/AndroidRuntime(1208):  at java.lang.reflect.Method.invokeNative(Native Method)
   03-12 18:49:46.076: E/AndroidRuntime(1208):  at java.lang.reflect.Method.invoke(Method.java:511)
   03-12 18:49:46.076: E/AndroidRuntime(1208):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
   03-12 18:49:46.076: E/AndroidRuntime(1208):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562) 
```

我无法理解我的错误。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:38:34.717

您在 Asynctask 中收到 NPE（空指针异常）。不应该为空的东西（指针）是。

此外，由于您使用的是片段，因此您应该保留旋转时的数据，[或者通过将它们保存在 中`onSavedInstance`](https://stackoverflow.com/a/6787393/312312)，或者通过保留片段的实例，[使用`setRetainInstance`](https://stackoverflow.com/a/11160506/312312)

# eclipse - 如何在 sbt、Eclipse 和 github 中初始化一个新的 Scala 项目

> ID：15381294
> 
> 赞同：21
> 
> 时间：2013-03-13T09:26:02.633
> 
> 标签：eclipse, git, scala, sbt

如何在 sbt、Eclipse 和 github 中初始化一个新的 Scala 项目，让它们一起玩……

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-13T09:26:02.633

一个新的 Scala 项目通常需要为 sbt、eclipse（如果您选择）和 github 设置，以便它们一起工作。在此设置上投入一些时间后，只要没有更简单的方法可用，拥有此列表以对齐这 3 个工具/服务可能会有所帮助。对我有用的一系列步骤如下。它假设您在 eclipse 中安装了 Scala IDE 插件。

1.  [在 Github 中](https://github.com/new)创建一个新的仓库。
2.  确定新项目的目录位置
3.  在 Eclipse 中，使用 Git Repositories View 将 Github 存储库导入该位置。或者，您可以为此使用命令行 git。
4.  找到您为项目选择的同一位置并运行`sbt eclipse`. 这确保 eclipse 能够处理 sbt 项目结构，以便您的项目可以由 sbt 构建，同时也可以被 eclipse 理解。如果`sbt eclipse`不起作用，sbt eclipse 插件可能没有安装在 sbt - [install it](https://github.com/typesafehub/sbteclipse)中。
5.  在 eclipse 中，使用`File --> Import --> General --> Existing Projects into Workspace`，选择相同的位置，以便 eclipse 为 sbt 刚刚准备好的文件结构构建其项目结构。
6.  通过更新 .gitignore 文件以忽略 eclipse 和 sbt 文件，使 git 忽略新项目的核心以外的所有内容。以下似乎目前很好。

    ```
    *.class
    *.log

    # sbt specific
    dist/*
    target/
    lib_managed/
    src_managed/
    project/boot/
    project/plugins/project/

    # Scala-IDE specific
    .scala_dependencies

    # Eclipse specific
    .project
    .classpath
    .cache 
    ```

您现在应该能够在 eclipse 和 sbt 中运行该项目，并通过 git 提交和推送代码更改。要查看空项目运行，这在这个阶段可能很有意义，您可以在 eclipse 中添加一个 scala 类，仅包含以下代码。请注意，scala 源代码通常应位于 src/main/scala 下。如果此路径尚不存在，请通过例如`mkdir -p src/main/scala`在 Unix 上创建它。

```
object hello {
  def main(args: Array[String]) {
    println("Main starting")  
  }
} 
```

或者仅此代码：

```
object app extends App {
  println("Application starting")  
} 
```

它现在应该可以工作了。需要声明的是，未来版本的 eclipse、sbt 等可能会使它过时。如果这在您的环境中是完全错误的，您可以添加一个更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-18T22:11:50.520

以前的答案和问题一样重要，因为这些工具不是自我解释的。根据对这一挑战的个人经验，这似乎是不可能的，但当人们承认几个关键的保险政策参考点时，事情将成为现实：

1.  由于采用了新工具，开发环境的实现可能需要彻底重新安装（如果您在已经安装 SBT 后采用 GIT，您可能需要清空 SBT 的工作目录，因为 GIT 要求克隆过程在本地工作目录上有空房子）
2.  保持非常好的更新备份，尤其是在考虑重新设置任何这种“多米诺骨牌”环境层时，因为某些 GUI 或命令启动的清理操作确实会处理这一点，有时效果令人惊讶，而且不考虑其他工具/层的要求
3.  在关键阶段保留非常好的文档（包括以前的务实答案）以使事情成为现实（再次）

# c# - 如何创建会话并在会话中设置 UserBean

> ID：15381297
> 
> 赞同：2
> 
> 时间：2013-03-13T09:26:07.970
> 
> 标签：c#, nancy

我是 Nancy 和 .NET 框架的新手。在这里，我在恐慌的情况下奔跑。

我已经编写了我自己的`Bootstrapper`以在项目中启用`CookieBasedSessions`。这是我必须执行的任务。

1.  一旦用户登录创建会话并`User`在会话中设置。
2.  然后在每个请求中验证用户`session`

    ```
     class Bootstrapper : DefaultNancyBootstrapper
    {
    protected override void ApplicationStartup(TinyIoCContainer container, IPipelines pipelines)
    {
        base.ApplicationStartup(container, pipelines);
        CookieBasedSessions.Enable(pipelines);
    }

    } 
    ```

这是我的控制器。

```
 Post["/myapp/login"] = parameters =>
        {
            var model = new User();
            model.UserName = this.Request.Form.userName;

            model = manager.GetUser(model.UserName);
            if (!string.IsNullOrEmpty(model.UserName) && model.isAdmin())
            {
               // var user = Request.Session["user"];
                if (Request.Session["key"] != null)  // Here i get the ERROR
                    Request.Session["key"] = model;

                return Response.AsRedirect(HOME_URL);
            }
            else
                return Response.AsRedirect(LOGIN_URL);
        }; 
```

当我执行此代码时，我收到`{"Session support is not enabled."}`错误。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:50:49.423

它没有使用您的自定义引导程序 - 将课程公开，它会选择它。

# javascript - 如何将 YYYY-MM-DD hh mm ss 转换为 MonthName, date, year | 小时：分钟（上午/下午）在 JavaScript 或 jQuery

> ID：15381302
> 
> 赞同：1
> 
> 时间：2013-03-13T09:26:20.957
> 
> 标签：javascript, jquery

我有日期字符串`(2013-03-10 19:43:55)`，想`(Mar 10, 2013 | 7:43 pm)`使用 JavaScript 或 jQuery 将其转换为这种格式。我怎样才能做到这一点 ？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:54:30.003

为跨浏览器兼容的解决方案扩展 @arun-p-johny 解决方案

```
function converter(s) {

  var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
  s =  s.replace(/-/g, '/');
  var d = new Date(s);

  var hour = d.getHours();

  return d.getFullYear() + ' ' + months[d.getMonth()] + ' ' + d.getDate() + ' | ' + (hour % 12) + ':' + d.getMinutes() + ' ' + (hour > 11 ? 'pm' : 'am');
}

console.log(converter('2013-03-10 19:43:55')); 
```

参考：[http ://dygraphs.com/date-formats.html](http://dygraphs.com/date-formats.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:38:39.243

尝试类似的东西

```
function converter(string) {
    var d = new Date(string);
    var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'sep', 'Oct', 'Nov', 'Dec'];

    var hour = d.getHours();

    return d.getFullYear() + ' ' + months[d.getMonth()] + ' ' + d.getDate() + ' | ' + (hour % 12) + ' ' + d.getMinutes() + ':' + (hour > 11 ? 'pm' : 'am');
}

alert(converter('2013-03-10 19:43:55')) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/ZqCAr/3/)

更新：

```
RegEx based solution for cross browser compatibility
function converter(string) {
    var d = string.split(/[-:\s]/);
    var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'sep', 'Oct', 'Nov', 'Dec'];

    var hour = parseInt(d[3], 10);

    return d[0] + ' ' + months[parseInt(d[1], 10) - 1] + ' ' + d[2] + ' | ' + (hour % 12) + ' ' + d[4] + ':' + (hour > 11 ? 'pm' : 'am');
}

alert(converter('2013-03-10 19:43:55')) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/ZqCAr/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-17T22:50:57.077

Kashif 的回答似乎是 +1，但是，有一个小故障。

如果要显示的分钟少于 10 分钟，则根据他的功能，而不是显示“6:08 PM”，而是显示“6:8 PM”。这可以通过添加来解决，

```
var minutes = d.getMinutes();
if(minutes<10){
    minutes = "0"+minutes;
} 
```

完整的工作功能如下，

```
function dateConverter(s) {

 var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
 s =  s.replace(/-/g, '/');
 var d = new Date(s);
 var hour = d.getHours();
 var minutes = d.getMinutes();

  //to display the minutes less than 10 with 0 as the suffix
  if(minutes<10){
    minutes = "0"+minutes;
  }
  return months[d.getMonth()] + ' ' + d.getDate() + ' , ' + d.getFullYear() + ' | ' + (hour % 12) + ':' + minutes + ' ' + (hour > 11 ? 'pm' : 'am');
} 
```

# d3.js - Nodes on force graph links in d3.js

> ID：15381306
> 
> 赞同：3
> 
> 时间：2013-03-13T09:26:36.510
> 
> 标签：d3.js, force-layout

I am trying to create a force graph with nodes on the links between main nodes (O--o--O), similar to this visualization: [http://www.nytimes.com/interactive/2013/02/20/movies/among-the-oscar-contenders-a-host-of-connections.html](http://www.nytimes.com/interactive/2013/02/20/movies/among-the-oscar-contenders-a-host-of-connections.html):

![enter image description here](../Images/572aeaeb9afc9e7411e31a18cd2cd2cc.png)

More specifically, I would like the links between nodes to start and stop at a main node (O), with a link node (o) at the midpoint. Is there a straightforward way to achieve this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:18:56.867

通常：在网络数据结构中创建两个类或节点类别（“main”、“midpoint”），并根据类成员有条件地设置节点的半径和其他样式属性。

# c# - Convert 12:00:00.000 always to 12AM issue

> ID：15381308
> 
> 赞同：0
> 
> 时间：2013-03-13T09:26:40.083
> 
> 标签：c#, .net, sql, datetime, converter

I had an issue like this. In my development environment, when I read the record from SQL Database: 12:00:00.000, the convertion always return 12PM in my application. But in the customer environment, it always return 12AM....and of course it's wrong

Have you ever faced this issue?

Thank & best regards,

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:36:10.180

假设 "12:00:00.000" 是 a `string`，考虑`DateTime`使用以下方法调用将其转换为 a ：

```
string myValue = "12:00:00.000";
DateTime myDate = DateTime.ParseExact(myValue, "HH:mm:ss:fff"); 
```

使用[HH 作为小时](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)，使用 24 小时日期格式。

请记住：这只适用于输入中指定的确切格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:40:05.750

```
return DateTime.ParseExact("12:00:00.000", "HH:mm:ss:fff"); 
```

# sql - 将变量添加到 TSQL 字符串

> ID：15381310
> 
> 赞同：0
> 
> 时间：2013-03-13T09:26:51.270
> 
> 标签：sql, sql-server-2008, tsql

这是我的有效 SQL 命令

```
SET @Command = 'REN "C:\Nielsen\' + @FileName + '" "'
+ RIGHT(@FileName,LEN(@FileName)-11) + '"' 
```

我想`C:\Nielsen\`用一个名为的变量的值替换`@Nielsen`

这不起作用......我错过了什么？

```
SET @Command = 'REN ' + @Nielsen + @FileName  
+ RIGHT(@FileName,LEN(@FileName)-11) + '' 
```

**编辑**

错误信息是：

> *该命令的语法不正确。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T09:32:44.947

您可以将其分解如下（抱歉，由于转义字符，格式无法正常工作）：

```
--Same string without variable 
SET @Command = 'REN "' + 'C:\Nielsen\' + @FileName + '" "'
+ RIGHT(@FileName,LEN(@FileName)-11) + '"'

--Same string with variable 
SET @Command = 'REN "' + @Nielsen + @FileName + '" "'
+ RIGHT(@FileName,LEN(@FileName)-11) + '"' 
```

# java - Decoration pattern used for creating JMSMessages / Where should the timeout start

> ID：15381311
> 
> 赞同：1
> 
> 时间：2013-03-13T09:26:56.753
> 
> 标签：java, design-patterns, timeout, decorator, messaging

I started to build a messaging framework and I decided to use the decoration pattern for creating JMSMessages.

```
class BaseMessage implements Message { ... } 
```

**Abstract decoration**

```
class AbstractDecoration implements Message {
   Message message;

   public AbstractDecoration(Message message) {
      this.message = message
   }
} 
```

**Decoration example:**

```
class JsonPayloadDecoration extends AbstractDecoration { ... } 
```

**Usage example:**

```
...

IMessage m = new BaseMessage(...);
m = new ExpireDecoration(m, 10, TimeUnit.MINUTES);
m = new TextPayloadDecoration(m, "Text!");
m = new CorrelationDecoration(m, "123456");
m = new PriorityDecoration(m, 9);
m = new NonPersistentDecoration(m);
m = new QueueDestinationDecoration(m, "JMSTEST.DECORATIONTEST1");
m = new ErrorHandlerDecoration(m, errorhandler, 1000);

// requestor handles MessageProducers
// m.send will create the real JMSMessage and use the requestor
// to send the message with a MessageProducer
m.send(requestor); 
```

At first I would like to get some input about the whole decoration idea and now to my real question. The `errorhandler` of `ErrorHandlerDecoration` has a timeout. When should the `timeout` start? When it's created or when `m.send` is called? I am arguing with my colleagues about that.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:44:10.277

当消息发送时间过长时不会触发“超时”吗？它可能应该在`send`被调用时开始，除非构造函数正在做一些特殊的事情而不是填充字段。

关于您关于使用decorator模式的智慧的问题：decorator模式非常适合提供功能排列，这似乎是您的情况（但是，您的代码示例中不存在这种用法）。如果您只打算对消息应用一个装饰器，请考虑改用策略模式。

还要小心相互排斥的装饰器。如果你有太多这些，跟踪哪些装饰器与哪些兼容可能会令人困惑。

**编辑**以回应您的评论：确保不兼容的装饰器不一起使用的一种方法是获取到目前为止应用于对象的装饰器列表，并在您看到冲突时抛出异常。要获取装饰器列表，可以将此方法添加到 AbstractDecoration：

```
List<AbstractDecoration> getDecorations() {
    List<AbstractDecoration> decorations;
    if (message instanceof AbstractDecoration) {
        decorations = ((AbstractDecoration) message).getDecorations();
    }
    else {
        decorations = new ArrayList<AbstractDecoration>();
    }

    decorations.add(this);
    return decorations;
} 
```

因此，一旦您已经应用了装饰器列表，只需检查每个装饰器的 instanceof 以检测冲突。请注意，您必须在所讨论的互斥装饰器的两端都执行此操作，否则当装饰器以一个顺序而不是另一个顺序应用时，不会发生此验证。

有点像黑客的感觉。我不是装饰器模式的专家，所以我不知道解决这个问题的标准是什么；我当场想出了这个。

**编辑：**在考虑了更多之后，在 AbstractDecoration 的构造函数中进行此验证可能更有意义。然后，您的规则是集中的，您甚至可以将它们委托给另一个班级。

# .net - Windows form not closing when opened from another thread

> ID：15381313
> 
> 赞同：0
> 
> 时间：2013-03-13T09:26:59.310
> 
> 标签：.net, vb.net, winforms, devexpress, .net-2.0

I have created a simple window form(pasted below). Now I use this to display a wait dailog to the user when running a complex operation which consumes time.

Calling the `HerculesWaitForm.Show("Some Title","Some Caption...)` shows the form as usual but when calling `HerculesWaitForm.Close` still shows the form. What can I do to overcome the problem.

```
Imports System.Threading
Public Class HerculesWaitForm
    Inherits DevExpress.Utils.WaitDialogForm
    Private Shared form As HerculesWaitForm
    Private Shared _thread As Thread
    Private Shared _caption As String, _title As String
    Private Sub New(ByVal caption As String, ByVal title As String)
        MyBase.New(caption, title)
    End Sub
    Private Shared Sub CreateInstance()
        form = New HerculesWaitForm(_caption, _title)
        Application.Run(form)
        Application.DoEvents()
    End Sub
    Public Overloads Shared Sub Show(ByVal caption As String, ByVal title As String)
        _caption = caption
        _title = title
        If form Is Nothing Then
            _thread = New Thread(AddressOf CreateInstance)
            _thread.IsBackground = True
            _thread.Start()
        End If
    End Sub
    Public Overloads Shared Sub SetCaption(ByVal caption As String)
        If form IsNot Nothing Then
            _caption = caption
            form.SetFormCaption()
        Else
            Show(caption, "")
        End If
    End Sub
    Public Overloads Shared Sub Close()
        If form IsNot Nothing Then
            form.CloseForm()
            form = Nothing
        End If
    End Sub
    Private Sub CloseForm()
        If Me.InvokeRequired Then
            Invoke(New MethodInvoker(AddressOf CloseForm))
            Return
        End If
        Application.ExitThread()
    End Sub
    Private Sub SetFormCaption()
        If Me.InvokeRequired Then
            Invoke(New MethodInvoker(AddressOf SetFormCaption))
            Return
        End If
        MyBase.SetCaption(_caption)
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:34:29.513

如果您将其称为：

```
Private Sub doSomethingLong()
    HerculesWaitForm.Show("hi", "there")
    Sleep(someAmount)  'Random long operation '
    HerculesWaitForm.Close()
End Sub 
```

然后，您可能会遇到问题，如您所指出的，如果打开和关闭通话之间的时间很短。*这是因为在*您执行操作时，调用会`Show()`启动第二个线程来创建新的 hercules 对象。长操作*立即*开始，同时线程开始启动并运行自己的任务。

 **如果在`Close()`线程完成自身初始化并完成`form`对象的实例化之前调用 to ，那么调用 to`Close()`将找到它`form = Nothing`并且它将简单地返回而不做任何事情。

然后，`Show()`像这样更改代码：

```
Public Overloads Shared Sub Show(ByVal caption As String, ByVal title As String)
    _caption = caption
    _title = title
    If form Is Nothing Then
        _thread = New Thread(AddressOf CreateInstance)
        _thread.SetApartmentState(ApartmentState.STA)  'should do this '
        _thread.IsBackground = True
        _thread.Start()
    End If
    While form Is Nothing   ' add   '
        Thread.Sleep(1)     ' this  '
    End While               ' here  '
End Sub 
```

将强制`Show()`方法阻塞，直到工作线程创建`form`对象 - 这确保`Close`不会简单地跳过所有未来的调用（因为`form is nothing`）。不漂亮，但如果不重构整个类，它可能是最快的修复。

然而，这实际上是处理长时间操作的一种非常糟糕的方法。您不是将工作放入工作线程，而是创建一个新的 UI 线程来运行愚蠢的动画，同时阻止真正的 UI 线程执行耗时的操作。除了糟糕的设计实践之外，这还会导致您的 DevExpress 小部件表单将悬停在所有其他应用程序之上（因为从此类调用时它本身就是一种应用程序），从而使您的用户无法进行多任务处理其他应用程序，因为您的应用程序正在窃取前端和中心以表明它正在做某事。

您确实应该使用 ThreadPool 或 BackgroundWorker 或其他类型的工作线程来执行复杂的操作。这使您的主 UI 线程可以自由地提供长操作的状态更新，并避免上述双 UI 线程混乱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T13:20:25.477

您需要在启动线程之前调用 _thread.SetApartmentState(ApartmentState.STA)。**

# c# - Getting UserPrincipal with Windows authentication and anonymous authentication on

> ID：15381316
> 
> 赞同：6
> 
> 时间：2013-03-13T09:27:01.383
> 
> 标签：c#, asp.net, .net, iis-7.5, userprincipal

The following code only works while only Windows Authentication is enabled in IIS for local users on our network.

```
using (PrincipalContext ctx = new PrincipalContext(ContextType.Domain))
{
     UserPrincipal up = UserPrincipal.FindByIdentity(ctx, userName);
     return up;
} 
```

Otherwise it throws this exception:

> [ArgumentException: The (&(objectCategory=user)(objectClass=user)(|(userPrincipalName=)(distinguishedName=)(name=))) search filter is invalid.] System.DirectoryServices.ResultsEnumerator.MoveNext() +434305 System.DirectoryServices.SearchResultCollection.get_InnerList() +282 System.DirectoryServices.SearchResultCollection.get_Count() +9 System.DirectoryServices.AccountManagement.ADStoreCtx.FindPrincipalByIdentRefHelper(Type principalType, String urnScheme, String urnValue, DateTime referenceDate, Boolean useSidHistory) +1898 System.DirectoryServices.AccountManagement.ADStoreCtx.FindPrincipalByIdentRef(Type principalType, String urnScheme, String urnValue, DateTime referenceDate) +85 System.DirectoryServices.AccountManagement.Principal.FindByIdentityWithTypeHelper(PrincipalContext context, Type principalType, Nullable`1 identityType, String identityValue, DateTime refDate) +211 System.DirectoryServices.AccountManagement.UserPrincipal.FindByIdentity(PrincipalContext context, String identityValue) +95 WebApplication1.Index.GetUserPrincipal(String userName) in C:\Users\xxx\Documents\Visual Studio 2010\Projects\WebApplication1\WebApplication1\Index.aspx.cs:38 WebApplication1.Index.Page_Load(Object sender, EventArgs e) in C:\Users\xxx\Documents\Visual Studio 2010\Projects\WebApplication1\WebApplication1\Index.aspx.cs:19 System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +25 System.Web.UI.Control.LoadRecursive() +71 System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3064

Is there any way of getting this to work for getting our local users UserPrincipal **while Windows and Anonymous authentication are both** turned on?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:31:21.123

`userName`必须是一个空字符串（或以其他方式，完全由空格组成），并且显然它没有被`FindByIdentity`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:25:41.647

不确定您是如何让 FindByIdentity 工作的，因为我认为还需要指定身份类型？IE：

```
UserPrincipal up = UserPrincipal.FindByIdentity(ctx, IdentityType.SamAccountName, userName); 
```

无论哪种方式，如果你强迫它，模拟可能会起作用。因此，在该代码段之前使用以下内容：

```
// This will impersonate the logged in user in order to get whichever username you require GIVEN the logged in user has AD read/querying rights.

System.Web.HttpContext.Current.Request.LogonUserIdentity.Impersonate();
using (PrincipalContext ctx = new PrincipalContext(ContextType.Domain))
    {
    UserPrincipal up = UserPrincipal.FindByIdentity(ctx, userName);
    return up;
    } 
```

# ftp - shell script to check ftp and sftp communication

> ID：15381317
> 
> 赞同：0
> 
> 时间：2013-03-13T09:27:05.667
> 
> 标签：ftp, communication, sftp, ping

First I have to say you that I'm a newbie, but I wanna learn!

I need a script which suppose to check the ftp and sftp communication. This is for 26 ftp and sftp. Script has to execute just 1 times and script suppose to login to ftp and sftp servers using username with password, easy from an extern list.

If ftp works also it has to send an mail and even if it is fail also it suppose to send the mail. Or just a print on screen with status : alive or not alive should be ok.

I am starting with the below script:

I found something like :

"You can use your script with a regular user, creating the file .netrc in the user's homedir (~/.netrc), with the following contents: Code: machine 192.1.1.1 login usename password user-passwd" ...

```
ftp -v -n <<EOF > ${LOG_FTP} 2>&1
open ${IP_ADDRESS_SERVER}
user ${FTPUSER} ${FTPPASS}
... 
```

EOF

I need now to understand how I can send the email to my email adres or just print on screen the results.

Please can you suggest me the right way or help me write the script.

It would be great help for me.

Thanks in advance for all your help!

Nico

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:35:06.653

您可以使用 sendmail 将电子邮件发送到您的电子邮件 ID。如果您正在使用 bash，请将此行添加到您的脚本中：

```
#!/bin/bash 
```

然后在终端上执行此操作：

```
chmod +x <scriptname> #setting executable permission for script
./<scriptname> #executing the script 
```

# css - 哪个更好：CSS 媒体查询或 JQuery 移动？

> ID：15381321
> 
> 赞同：1
> 
> 时间：2013-03-13T09:27:12.970
> 
> 标签：css, jquery-mobile, media-queries

我是开发移动网站的新手。我对这两种方法很困惑，因为我对此没有任何经验。两种方法之间有什么更好的：*当我们在css文件中使用所有宽度设备时的css查询*或*使用使用php技术的jquery mobile用于使用桌面或移动设备的不同用户*[用户-> php？->移动使用jquery移动/桌面使用CSS标准]？

非常感谢这个答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:34:56.263

我将按重要性对方法进行分类，从最重要到不太重要：

## 客户端检测

使用[Modernizer](http://modernizr.com/) javascript 库检测移动/桌面环境

## 服务器端检测

使用[Modernizer 服务器](https://github.com/jamesgpearce/modernizr-server)或[WURFL](http://wurfl.sourceforge.net/apis.php)。比第一个解决方案复杂一点，但更详细（如果您需要有关使用设备的更多数据）

## CSS 媒体查询

检测桌面/移动设备的错误解决方案。当前的移动设备可以拥有与桌面平台相同的屏幕分辨率

## 基于 JavaScript 的浏览器嗅探

可能的最坏解决方案。特别是如果您想区分智能手机和平板电脑。

要了解有关此解决方案的更多信息，请阅读我的其他文章/示例答案：[https ://stackoverflow.com/a/15055352/1848600](https://stackoverflow.com/a/15055352/1848600)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-20T08:06:14.330

我必须在这里发布答案，因为这首先出现在搜索引擎中，并且接受的答案不准确。

关于响应式设计有两个主要问题：

1.  内容：内容应根据视口的宽度/高度进行重组，以便用户无需不断放大和缩小即可查看内容。这需要完全基于视口的分辨率而不管设备如何。它可以是移动设备或桌面上的小窗口。这主要涉及网站的外观和感觉，使用媒体查询绝对没问题。即使恕我直言，最好使用媒体查询来分离视图和逻辑之间的关注点。没有网页设计师喜欢在调试期间看到随机的宽度或高度出现在他们的 html 元素上，而不知道它们来自哪里。媒体查询将帮助您调整元素的大小并显示或隐藏它们；但是，在某些情况下，您可能需要移动元素；

2.  功能：如果您需要根据设备功能打开/关闭功能，请不要依赖视口规范；使用 JS 中可用的大量库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-25T00:31:18.813

附带说明一下，智能手机浏览器的渲染分辨率**似乎**远低于实际设备屏幕尺寸。拿出一个快速的 JS 来显示你的窗口分辨率并在你的手机上运行它。

示例：Chrome 在我 1440x2560 像素的安卓屏幕上以 360x640 像素运行。

# jquery - jQuery dialog not opening when in if - statement

> ID：15381323
> 
> 赞同：0
> 
> 时间：2013-03-13T09:27:17.833
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

I have this dialog I use multiple times with different content. All works great but at a certain point it fails to open.

I got this [basic jsFiddle](http://jsfiddle.net/x3sRd/) to explain what I'm trying to do in my project. Unlike at jsFiddle I can't get it to work.

Next are some code snippets from the original (broken) jQuery project.

```
/**
 * Enable the JQuery dialog
 * (#wizard_dialog) 
 */
$('#wizard_dialog').dialog({
    autoOpen: false,
    resizable: false,
    modal: true,
    dialogClass: "no-close",
    open: function() {
        $('.ui-dialog-buttonpane').find('button:contains("Annuleren")').addClass('cancelButtonClass');
        $('.ui-dialog-buttonpane').find('button:contains("Verwijderen")').addClass('deleteButtonClass');
        $('.ui-dialog :button').blur(); // Because it is dangerous to put focus on 'OK' button
        $('.ui-widget-overlay').css('position', 'fixed'); // Fixing overlay (else in wrong position?)
        if ($(document).height() > $(window).height()) {
            var scrollTop = ($('html').scrollTop()) ? $('html').scrollTop() : $('body').scrollTop(); // Works for Chrome, Firefox, IE...
            $('html').addClass('noscroll').css('top',-scrollTop); // Prevent scroll without hiding the bar (thus preventing page to shift)
        }
    },
    close: function() {
        $('.ui-widget-overlay').css('position', 'absolute'); // Brake overlay again
        var scrollTop = parseInt($('html').css('top'));
        $('html').removeClass('noscroll'); // Allow scrolling again
        $('html,body').scrollTop(-scrollTop);
        $('#wizard_dialog').html('');
    }
});

/**
 * Builds the order list in #step_five 
 */
function buildOrderList(data) {
    // delete all orders first
    $('#orderList').empty();

    var html = '';
    var orderCount = 0;

    $.each(data.wizard, function(key,val) {
        // Set some vars
        // Set html for each order

        orderCount++;   
    });

    //console.log(newCount);
    // There are orders to show
    if(html != '') {
        $('#orderList').append(html);
        // Set total price
        $('#totOrderPrice').html('€ '+calcTotal());
        console.log('!=0 ??');
        /**
         * onClick [id^=delete_]
                     * this works fine, so deleteOrder() function is not included
         */
        $(document).off('click', '[id^=delete_]').on('click', '[id^=delete_]', function(e) {
            var id = $(this).attr('id').split('_');
            id = id[1];
            deleteOrder(id, data);
        });
    }
    // OrderList is empty
    else {
        // Display message in dialog
        console.log('else');
        var Msg = 'De bestelling is volledig verwijderd.';
        $('#wizard_dialog').append(Msg);
        $('#wizard_dialog').dialog('option', 'width', 500);
        $('#wizard_dialog').dialog('option', 'buttons',  [ 
            { text: "OK", 
                click: function() { 
                    // TODO: Reset wizard
                    // Go to step 1
                    stepHopper('five','one'); // FYI this function works fine..
                    $(this).dialog("close");
                    $(this).html(''); 
                }
            }
        ] );
        $( "#wizard_dialog" ).dialog( "open" );
    }
} 
```

So the dialog I try to open in the `else` part of the if-statement doesn't do what I suspected it to do :-). The console.log DOES put 'else' in firebug console so I know we get past the if. I did try with checking for orderCount to be 0 instead of checking for an empty html var it gave the same result though.

At other forums/questions I found some stuff on why you should put the dialog element in a var. But the dialog works just fine in the rest of the project. Only in this case it fails to do it's job.

When I put `if(false){...}else if(true){...}` the dialog does open. ???!!!???

Any ideas? I would certainly appreciate all feedback on this one. Thanks!

**Fixed it** I decided to build a function in which the dialog gets initiated. Calling `showDialog(Msg, button);` again worked in all cases but not if I called it in the function where the order list is added to the DOM. The only other thing I could think of, after raging for another few hours, was to set a timeout. `setTimeout(function () {showDialog(Msg, button)}, 400);` .. Now it's all unicorns and rainbows ^^

Not sure why the timeout makes it work though.

# c# - something wrong in view page and url

> ID：15381326
> 
> 赞同：0
> 
> 时间：2013-03-13T09:27:26.650
> 
> 标签：c#, razor, asp.net-mvc-4

I am using c# and ASP.NET MVC4 for a web application (with mobile template). I'm having a problem with my Details view page. (First you select something from Index page and then it goes to Details page) I have put a bing map on the page and the map doesn't load. First I thought it was something wrong with the map but its not. I noticed that the url is `http://localhost:2550/Place/Details` of the page. However if I manually put a '1' on the end like so `http://localhost:2550/Place/Details/1` then the map loads on the page. I don't understand why this is...

does anyone know why? thanks

my view page for Details:

```
@model Project.Models.Place
@{ ViewBag.Title = "Details";}
<h2>Place Details</h2>
<fieldset>
<div class="display-label"> Name: @Model.Name</div>
<div class="display-label">Address: @Model.Address</div>
<div class="display-label">Post Code: @Model.PostCode</div>
<div class="display-label"> PhoneNo: @Model.PhoneNo</div>
</fieldset>

<p>    @Html.ActionLink("Back to List", "Index")</p>

<body onload="getMap();">
  <div id='myMap' style="position:relative; width:400px; height:400px;"></div>
  <div>
     <input type="button" value="createWalkingRoute" onclick="createDirections();" />
  </div>
  <div id='directionsItinerary'> </div> 
</body>

@section scripts{

 <script type="text/javascript"    src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0"></script>
  <script type="text/javascript">
      var map = null;
      var directionsManager;
      var directionsErrorEventObj;
      var directionsUpdatedEventObj;

      function getMap() {
          map = new Microsoft.Maps.Map(document.getElementById('myMap'), { credentials: 'mykey' });
      }

      function createDirectionsManager() {
          var displayMessage;
          if (!directionsManager) {
              directionsManager = new Microsoft.Maps.Directions.DirectionsManager(map);
              displayMessage = 'Directions Module loaded\n';
              displayMessage += 'Directions Manager loaded';
          }
          alert(displayMessage);
          directionsManager.resetDirections();
          directionsErrorEventObj = Microsoft.Maps.Events.addHandler(directionsManager, 'directionsError', function (arg) { alert(arg.message) });
          directionsUpdatedEventObj = Microsoft.Maps.Events.addHandler(directionsManager, 'directionsUpdated', function () { alert('Directions updated') });
      }

      function createWalkingRoute() {
          if (!directionsManager) { createDirectionsManager(); }
          directionsManager.resetDirections();
          // Set Route Mode to walking 
          directionsManager.setRequestOptions({ routeMode: Microsoft.Maps.Directions.RouteMode.walking });
          var seattleWaypoint = new Microsoft.Maps.Directions.Waypoint({ address: 'Seattle, WA' });
          directionsManager.addWaypoint(seattleWaypoint);
          var redmondWaypoint = new Microsoft.Maps.Directions.Waypoint({ address: 'Redmond, WA', location: new Microsoft.Maps.Location(47.678561, -122.130993) });
          directionsManager.addWaypoint(redmondWaypoint);
          // Set the element in which the itinerary will be rendered
          directionsManager.setRenderOptions({ itineraryContainer: document.getElementById('directionsItinerary') });
          alert('Calculating directions...');
          directionsManager.calculateDirections();
      }

      function createDirections() {
          if (!directionsManager) {
              Microsoft.Maps.loadModule('Microsoft.Maps.Directions', { callback: createWalkingRoute });
          }
          else {
              createWalkingRoute();
          }
      }
  </script>

} 
```

my controller action for Details:

```
 public ViewResult Details(int id)
    {
        ViewBag.events = eventRepository.PlaceEvents(id);
        return View(placeRepository.Find(id));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:32:37.607

可能的原因，可能是您没有编写带有零参数的控制器默认控制器。

或者你没有用 [HttpPost] 属性编写控制器

如果你把控制器的代码放在这里会很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:59:21.880

如果您说末尾带有 /1 的导航有效，但您当前的 url 没有数字，那么您在索引页面上的 url 是错误的。您的网址现在类似于

```
@Html.ActionLink("Details", "Place") 
```

把它改成这样：

```
@Html.ActionLink("Details", "Place", new { id = @Model.Id }) 
```

所以问题是您的 id 没有提供给您的 details 操作。

# jquery - 如何在 Ajax 调用中发送 MVC 模型

> ID：15381327
> 
> 赞同：1
> 
> 时间：2013-03-13T09:27:27.637
> 
> 标签：jquery, asp.net, asp.net-mvc

我在发布模型以调用控制器中的操作时面临挑战。

我有一个主视图，我在其中进行 Web 服务调用并使用某些标准并获得结果。一旦我得到结果，我会将结果显示到部分视图中，作为原始视图上的弹出窗口，然后在部分视图中弹出我有一个搜索按钮，它应该在局部视图中显示的结果中进行搜索。因此，为此我需要将模型发送到控制器以在局部视图中显示的结果集中进行搜索。

这能实现吗？这怎么能实现？

需要你们的帮助......

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:31:54.583

真的不明白为什么你在这里有问题。如果你的控制器动作看起来像

```
[HttpPost]
public ActionResult index(int param1, string param2...) 
{

} 
```

您需要使用指定的参数对此操作执行 POST 请求。所以请求正文将有`param1=123&param2=somestring&...` Or using JSON: `{"param1": 123, "param2":"somestring"...}`。GET 请求几乎相同。

ajax 调用本身可能如下所示：

```
$.ajax({
    type: 'POST',
    url: 'your_url',
    contentType: "application/json; charset=utf-8",
    data: JSON.stringify(your_model),
    success: function(response) {
    }
}); 
```

# c++ - DLL 和编译器设置

> ID：15381328
> 
> 赞同：4
> 
> 时间：2013-03-13T09:27:29.327
> 
> 标签：c++, visual-c++, dll, compiler-construction, linker

许多文章和帖子警告在链接和使用 DLL 时可能导致不兼容的编译器设置。

如果您在用 C++ 编写 DLL 并使用 extern “C” 导出函数并仅使用 POD 数据类型或坚持使用接口（纯虚拟）类时遵循最佳实践，那么哪些编译器设置会导致问题？

你怎么知道哪些编译器设置会导致问题？不同的编译器会有不同的设置吗？是否有可用的 Visual C++ 编译器设置列表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T09:40:54.820

这不是一个明确的清单，但我记得的事情：

1.  链接到不同的运行时，例如链接到主可执行文件中的调试 Visual C++ 运行时以及链接到正在导入的 DLL 中的发布版 Visual C++ 运行时，也会导致问题。（代码生成 -> 运行时库选项）

2.  也不建议链接到不同版本的 C++ 运行时（即 VC90 和 VC100）。（常规选项卡 -> 平台工具集选项）

3.  注意 DLL 使用的调用约定（C/C++ 高级选项卡 -> 调用约定选项）

4.  在两个模块之间传递结构时，确保两个模块具有相同的打包（C/C++ -> 代码生成 -> 结构成员对齐选项）

5.  不确定，但听起来很合理，它们应该具有相同的异常处理模型（C/C++ -> 代码生成 -> 启用 C++ 异常选项）

6.  如果您将浮点数传入和传出，则使用相同的浮点模型（C/C++ -> 代码生成 -> 浮点模型选项）

7.  显然，这两个模块是相同的架构（Intel x86、AMD x64、Itanium、ARM 等）

对于问题的第二部分，[这里](http://msdn.microsoft.com/en-us/library/9s7c9wdw%28v=vs.71%29.aspx)是关于所有编译器选项的综合文档。

# c# - Concurrent SFTP file transfer using c# and SharpSSH

> ID：15381329
> 
> 赞同：0
> 
> 时间：2013-03-13T09:27:37.907
> 
> 标签：c#, sharpssh

I am using [SharpSSH](http://www.tamirgal.com/blog/page/SharpSSH.aspx) for uploading & downloading files via SFTP.

It works with up to 2 connections at a time. Any more than this fails.

Why won't it work with more than 2 connections at a time?

# cookies - How to get access to an http-only cookie using Meteor

> ID：15381330
> 
> 赞同：0
> 
> 时间：2013-03-13T09:27:39.737
> 
> 标签：cookies, meteor

**Some background:**

*   **my site**: *site.domain.com*
*   http-only cookie set by domain.com.
*   I can see the cookie in the resources view in **Chrome** & in the network traffic

I really need read access to an **http-only** (domain) cookie from either meteor client or server (doesnt matter to me)

http-only renders any technique that uses **"document.cookie"** useless unfortunately.

I can see the cookie details being passed back to Meteor inside the various **sockjs GET** requests, what i probably need is a way to get at that raw request info so i can tease out the cookie value.

Anyone have any ideas? Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:49:27.610

看看尝试通过 req 或使用 connect 的 cookieparser 访问标头：

**服务器 Js**

```
__meteor_bootstrap__.app.use(connect.cookieParser()).use(function(req, res, next) {
    Fiber(function () {
        console.log(JSON.stringify(req.cookies));
    }).run();
}); 
```

看看：[https](https://groups.google.com/forum/?fromgroups=#!topic/meteor-talk/xLGOcruZ4c4) ://groups.google.com/forum/?fromgroups=#!topic/meteor-talk/xLGOcruZ4c4了解更多信息

# php - Send json to php through a form

> ID：15381337
> 
> 赞同：2
> 
> 时间：2013-03-13T09:27:53.330
> 
> 标签：php, javascript, json, forms

```
$('<form method="post" action="login/makeLogin"><input type="hidden" name="fbphoto" value="'+image +
                    '"><input type="hidden" name="fbname" value="'+response.first_name +'"><input type="hidden" name="fbemail" value="'+response.email +'"><input type="hidden" name="fbid" value="'+response.id+
                    '"><input type="hidden" name="fbsurname" value="'+response.last_name +'"><input type="hidden" name="fbfriends" value="'+json +'"></form>').appendTo('body') 
```

I create this form dynamicly with javascript. But when I try to send this form to a php function, it returns false when I try to access the fbfriends property the rest values work fine. The value of fbfriends is a string containing json, which I get using:

```
var json=JSON.stringify(response.friends); 
```

If I dont stringify the json I get a string [Object object] when retrieving values in the php function. How can I send json through a form.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T21:38:25.857

您的表单仅包含隐藏项目。为什么不直接通过 $.ajax 发布响应值？

# azure - Azure 磁盘管理

> ID：15381341
> 
> 赞同：1
> 
> 时间：2013-03-13T09:28:14.407
> 
> 标签：azure, disk

我刚开始使用 azure 虚拟机，我必须承认我还有一些关于磁盘管理的问题：我通过 Node JS API 以下列方式管理我的机器：

```
 azure vm create INSTANCE  b39f27a8b8c64d52b05eac6a62ebad85__Ubuntu-12_10-amd64-server-    20130227-en-us-30GB  azureuser XXXXXX --ssh  --location "West US" -t ./azure.pem 
 azure vm start INSTANCE

 //do whatever
 azure vm shutdown INSTANCE
 azure vm delete INSTANCE 
```

1.  删除实例后，我还剩下一堆磁盘，这些磁盘没有被删除，但我需要付费（即从我的免费试用中扣除）。它们不是默认删除的吗？是否有 API 调用来删除它们（只找到了相应的 REST 调用，但有点不愿意混合 NODE JS 和 Rest api 调用）。

2.  我可以在启动新实例时指定其中一个现有磁盘吗？

感谢您的回答！约尔格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:41:49.147

> 删除实例后，我还剩下一堆磁盘，这些磁盘没有被删除，但我需要付费（即从我的免费试用中扣除）。它们不是默认删除的吗？是否有 API 调用来删除它们（只找到了相应的 REST 调用，但有点不愿意混合 NODE JS 和 Rest api 调用）。

是的，默认情况下不会删除磁盘。我相信这样做的原因是重用这些磁盘来分离新的虚拟机。要删除磁盘（这是存储在 Windows Azure Blob 存储中的页 blob），您可以使用 Azure SDK for Node：[https](https://github.com/WindowsAzure/azure-sdk-for-node) ://github.com/WindowsAzure/azure-sdk-for-node 。

> 我可以在启动新实例时指定其中一个现有磁盘吗？

是的你可以。为此，您需要找到磁盘映像，然后使用以下命令：

```
azure vm create myVM myImage myusername --location "West US" 
```

其中“myImage”是图像的名称。更多详情，请访问： http: [//www.windowsazure.com/en-us/develop/nodejs/how-to-guides/command-line-tools/#VMs](http://www.windowsazure.com/en-us/develop/nodejs/how-to-guides/command-line-tools/#VMs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:47:22.110

是的，当删除 VM 时，会留下磁盘。在门户中，您可以在创建时将此磁盘映像应用到新的 VM 实例。这里有一些关于使用现有磁盘映像从 API 创建 VM 的特定指南：

[http://www.windowsazure.com/en-us/develop/nodejs/how-to-guides/command-line-tools/#VMs](http://www.windowsazure.com/en-us/develop/nodejs/how-to-guides/command-line-tools/#VMs)

# apache - Apache Solr & schema.xml

> ID：15381344
> 
> 赞同：0
> 
> 时间：2013-03-13T09:28:19.517
> 
> 标签：apache, solr, lucene

I have just began with Apache Solr 4.1 yesterday and though I have managed to get our MySQL data imported successfully in Solr, I am unable to view any data using queries. I suspect the problem is in schema.xml changes (data-config.xml is correct). Here are my questions -

*   Do I need to add all DB fields in the schema.xml? My table has 275+ fields, and configuring all of them would be a task. I am hoping there is a way to auto-configure these fields.
*   Is there a way to use separate schema.xml for my requirement? Where and how do I configure this? I don't want to modify the example-DIH's sample schema.xml

Any pointers here would be highly appreciated! I have already gone through this document - [http://wiki.apache.org/solr/DataImportHandler](http://wiki.apache.org/solr/DataImportHandler)

and I have also read few question posted here, but couldn't find answer to my queries.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:19:58.513

1）您在 data-config.xml 作为字段列中提到的所有字段都必须将它们添加到 schema.xml。没有可用的自动配置。
2) 不，我们不能使用单独的 schema.xml。

您能否显示您在 schema.xml 中提到的一些索引字段

# php - 错误的权限设置了粘滞位

> ID：15381345
> 
> 赞同：6
> 
> 时间：2013-03-13T09:28:21.963
> 
> 标签：php, linux, directory, file-permissions

前几天，我在使用php-function时碰巧设置了错误的权限，`mkdir`如下所示：

```
mkdir("foldername", 777, true); 
```

正确的方法是，假设您想要这些权限：

```
mkdir("foldername", 0777, true); 
```

我知道我不应该在我的文件或文件夹上使用 777，但这是一个非常封闭的系统，所以请不要卡在这个问题上。因为至少对我来说，这是有趣（奇怪）的部分。因为我们注意到当这个脚本创建文件夹时有些奇怪。设置的权限真的很奇怪，尤其是对于像我这样的非 linux 高级用户。因为我们看到的是创建的文件夹的权限设置为：

> 博士 - - - - x - - t

对我来说这很奇怪，我之前没有听说过粘性位（`t`），但是当你想让该文件只能由 root 删除时，这显然是设置的。有谁知道为什么 PHP 会这样，或者它甚至是 PHP 问题（不是真正的问题，因为我当时错误地使用了该函数），或者这是我们的 *nix 系统在有疑问时默认执行的操作或者其他的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T09:33:24.300

文件权限采用八进制表示法（以 8 为基数）。

777 是十进制的，这意味着 01411 八进制，它也设置了粘性...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:57:04.043

有人回答了这个问题，然后删除了，这很可悲，因为我强烈认为它是正确的。因此，如果您阅读此内容，请再次发布该答案，我会接受。

无论如何，似乎 php 将 to 转换`decimal 777`为`octal 1411`并将权限设置为我得到的权限，即：

> 博士 - - - - x - - t

# android - 如何为 Android 设备创建通知服务？

> ID：15381348
> 
> 赞同：0
> 
> 时间：2013-03-13T09:28:31.270
> 
> 标签：android, push-notification, google-cloud-messaging

当我单击“**发送通知**”按钮时，我想从 Web 应用程序开发通知系统，该按钮将向安装了我的应用程序的所有设备发送通知。

我用谷歌搜索了很多，发现很少有线索如何做到这一点。

1.  云谷歌通知。
2.  拉服务。

拉取服务始终在设备上运行，因此会影响设备性能。

我完全混淆了该怎么做，哪个选项最适合我？

请建议我，如果有人有开发，请分享我，如果你有它的演示应用程序。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:30:40.320

[Google Cloud Messaging Reference](http://developer.android.com/google/gcm/index.html)将是一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:34:45.363

Google Cloud Messaging for Android (GCM) 是一项服务，可让您将数据从服务器发送到用户的 Android 设备。这可能是一条轻量级消息，告诉您的应用程序有新数据要从服务器获取。[更多细节](http://developer.android.com/google/gcm/index.html)

使用 Google Cloud Messaging (GCM)、PHP 和 MySQL 的 Android 推送通知。[点击这里](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)。

适用于 Android 的 Google 云消息传递。[点击这里](http://www.optimusmobility.com/2012/08/17/google-cloud-messaging-android/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T09:34:31.287

您必须使用 GCM - Google 云消息传递来实现您的功能。

请参阅 android 开发者网站中给出的演示应用程序。

[**GCM 演示应用程序**](http://developer.android.com/google/gcm/demo.html)

主要链接是 - [Google Cloud Messaging for Android](http://developer.android.com/google/gcm/index.html)

# android - aChartEngine 中的逗号分隔符

> ID：15381353
> 
> 赞同：1
> 
> 时间：2013-03-13T09:28:48.407
> 
> 标签：android, bar-chart, achartengine, separator

我正在使用 aChartEngine 为我的应用报告设计图表，但我想知道是否可以在 BarCharts 中为 XYSeries 使用逗号分隔符？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:56:59.043

我建议您使用注释而不是常规图表值。

```
series.addAnnotation("Vacation", 6, 30); 
```

您必须下载该库的最新版本。例如，从[这里](https://repository-achartengine.forge.cloudbees.com/snapshot/org/achartengine/achartengine/1.1.0/)获取夜间构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:57:04.770

最后我在亲爱的丹的帮助下得到了答案，我想和你分享这个可能是别人的问题，希望它有帮助：

在更新我的 achartengine jar 文件以构建 1.1.0 后，我在 XYSeriesRenderer 中找到了一个名为“setChartValuesFormat”的方便函数，因此我定义了如下所示的 NumberFormat：

```
public static final NumberFormat IntegerFormatter = new DecimalFormat("###,###,###.##"); 
```

然后我在那个函数中使用了这个 NumberFormat ：

```
SalesRenderer.setChartValuesFormat(GlobalVariables.IntegerFormatter); 
```

它工作完美！

# javascript - 单击右上角的关闭（x）按钮后，DOJO 对话框未第二次打开

> ID：15381357
> 
> 赞同：0
> 
> 时间：2013-03-13T09:29:02.587
> 
> 标签：javascript, html, jsp, dojo

我的页面中有一个名为 EDIT 的对话框按钮。

第一次点击 EDIT 按钮时，会出现 EDIT 弹出窗口。当我通过单击位于弹出窗口右上角的关闭 (x) 按钮关闭弹出窗口并再次单击编辑按钮时，弹出窗口没有出现（打开）。但是在单击位于同一“编辑”弹出窗口下方的“取消”和“应用”按钮并第二次单击“编辑”后，弹出窗口将打开。所以点击关闭按钮后出现问题，不允许我再次打开编辑窗口。

更新：

我发现代码（如下）不允许我第二次打开“编辑”对话框，我对其进行了评论。但是评论代码引起了另一个问题，即当我单击“取消”或“应用”按钮时，它会抛出以下错误，并且不允许我通过抛出相同的错误再次打开“编辑”按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:31:20.273

您正在关闭 ( `destroyOnClose : true`) 时销毁小部件，因此无法在第二次尝试时打开它。

```
/*
 * Overload the _destroyOrHide method in rmt.NewModalPopup so 
 * that the popup will be destroyed instead of closed. (Close
 * doesn't remove the DOM node.)
 */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:35:00.560

在创建对话框之前，请添加以下代码：

```
if (dojo.byId('displayQualificationPane') != null) {
                        dojo.forEach(dijit.findWidgets(dojo.byId('displayQualificationPane')), function (w) {
                            w.destroyRecursive();
                        });
                    }
                    dojo.destroy(dojo.byId('displayQualificationPane'));
                    if (dijit.byId('displayQualificationPane')) {
                        dijit.byId('displayQualificationPane').destroy();
                    } 
```

它会在创建它之前每次销毁小部件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-25T18:40:22.060

另一种技术，类似于 Himani 的建议，但可能更易于使用，是确保在调用 hide 函数后销毁对话框内容。这样，您在初始化组件时不必为此进行任何复杂的检查。

```
hide: function() {
    this.inherited(arguments);
    window.setTimeout( dojo.hitch( this, 'destroyRecursive' ), 500 );
} 
```

或者甚至可能

```
aspect.after( dialog, 'hide', dojo.hitch( this, function() {
                      setTimeout( function() {
                          dialog.destroyRecursive();
                      }, 500 );
              })); 
```

# android - 是否可以将尺寸设置为与地图缩放级别无关的 groundOverlay？

> ID：15381358
> 
> 赞同：5
> 
> 时间：2013-03-13T09:29:04.197
> 
> 标签：android, google-maps, overlay, zooming, google-maps-android-api-2

我有一个`GroundOverlay`，`GoogleMap`我希望它的尺寸​​在我放大/缩小地图时不会改变。`markers`与始终保持其尺寸的默认地图完全相同。我已经尝试了这两种形式，`GroundOverlay.setDimensions()`但图像仍然在缩放时调整大小。这是我的代码：

```
 Bitmap btm = BitmapFactory.decodeResource(getResources(), R.drawable.map_arrow);
 BitmapDescriptor arrow = BitmapDescriptorFactory.fromBitmap(btm);
 float w = btm.getWidth();
 float h = btm.getHeight();

if (groundOverlay != null) groundOverlay.remove();
 groundOverlay = mMap.addGroundOverlay(new GroundOverlayOptions()
            .image(arrow).position(meLoc, w,h).bearing(bearAngle));
 groundOverlay.setDimensions(1000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-21T10:15:25.350

我遇到过同样的问题。如果要放置图像，可以使用 Google maps API 提供的默认标记。您可以将自定义图像设置为标记图标，其大小将保持不变。

```
private final List<BitmapDescriptor> mImages = new ArrayList<BitmapDescriptor>();
mImages.add(BitmapDescriptorFactory.fromResource(R.drawable.YOUR_IMAGE));
Marker marker = map.addMarker(new MarkerOptions().icon(mImages.get(0))); 
```

此示例显示如何从图像列表的元素中设置标记的图标。希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T15:24:15.180

您拥有覆盖的宽度和高度，并根据您的缩放级别将其放置在地图上。对于该缩放级别似乎很好。正确的？现在您可以计算半径并获取地图屏幕的米数。因为地图背景覆盖的宽度和高度值都是米。我们必须使用仪表而不是缩放级别或其他任何东西。也许有人可以找到更好的解决方案，但我尝试了太多方法，最终得到了这个解决方案，而且效果很好。

```
 float zoomLevel=mMap.getCameraPosition().zoom;
    //calculate meters*********************         
    myBounds = mMap.getProjection().getVisibleRegion().latLngBounds;
    myCenter=  mMap.getCameraPosition().target;
    if (myCenter.latitude==0 || myCenter.longitude==0) {
        myCenter=new LatLng(myLocation.getLatitude(),myLocation.getLongitude());
    }

    LatLng ne = myBounds.northeast;

    // r = radius of the earth in statute miles
    double r = 3963.0;  

    // Convert lat or lng from decimal degrees into radians (divide by 57.2958)
    double lat1 = myCenter.latitude / 57.2958; 
    double lon1 = myCenter.longitude / 57.2958;
    final double lat2 = ne.latitude / 57.2958;
    final double lon2 = ne.longitude / 57.2958;

    // distance = circle radius from center to Northeast corner of bounds
    double dis = r * Math.acos(Math.sin(lat1) * Math.sin(lat2) + 
      Math.cos(lat1) * Math.cos(lat2) * Math.cos(lon2 - lon1));

    //1 Meter = 0.000621371192237334 Miles
    double meters_calc=dis/0.000621371192237334;

    float factor=1;  
    if (zoomLevel==15) {  // my default zoom level yours can be different
        metersoverlay=meters_calc;  // global variable metersoverlay set
    }
    else { // if my zoom level change then I have to calculate dimension scale factor
        factor=(float) (meters_calc/metersoverlay); 
    }

    //******************************* now we are ready to set dimension of background overlay
    float dimensions=1000*factor; 
    loadingGroundOverlayBg.setDimensions(dimensions); 
```

我希望它对你们所有人都有效：）

# mysql - MySQL唯一索引错误？

> ID：15381359
> 
> 赞同：0
> 
> 时间：2013-03-13T09:29:05.173
> 
> 标签：mysql, sql

```
CREATE TABLE tblUser 
( 

    CREATE UNIQUE INDEX i_ITUsername ON tblUser (ITUsername),
    CREATE UNIQUE INDEX i_email ON tblUser (email),
    CREATE INDEX i_disability ON tblUser (disability),
    CREATE INDEX i_name ON tblUser (name)
) TYPE = MyISAM; 
```

谁能明白为什么我在第一个唯一索引行出现错误？据我所知，没有错误:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:30:46.107

第一个错误是您在一列上有两种数据类型，

```
mobilePhone long int UNSIGNED not null, -- choose one INT or LONG
housePhone long int UNSIGNED, 
```

第二个是你声明喜欢`TSQL`，这里是 mysql，

```
primary key (ITUsername),
UNIQUE i_ITUsername  (ITUsername),
UNIQUE i_email (email),
KEY i_disability  (disability),
KEY i_name (name) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/f9303)

# java - 如何使用一个jar来创建一个mac应用程序？

> ID：15381362
> 
> 赞同：0
> 
> 时间：2013-03-13T09:29:11.653
> 
> 标签：java, jar, jarbundler

我创建了一个 java 项目，当我从 eclipse 执行我的应用程序时，它没有任何问题，也没有例外。我创建了一个 jar 来执行它，它可以在我用于开发的计算机上运行，​​我在另一台电脑上尝试过，它只有在我`java-jar program.jar`在 CMD 中执行时才有效。我尝试使用我的 jar 使用 jarBundler 创建一个应用程序 mac (.App)。但问题是当我运行应用程序时它可以工作，但它并没有停止。事实上，我的一个按钮执行一个脚本，一个条形执行在执行结束时停止。启动脚本的mac应用程序不会停止，如果我在终端中尝试我的脚本，它可以与它工作的jar一起工作。我不知道是什么问题以及如何检测它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:40:36.980

尝试将日志记录（调试）消息合并到您的代码中（尤其是未按预期完成执行的方法）。跟踪对方法执行至关重要的所有对象的状态，并比较不同环境下的结果。

如果您使用多个线程，请添加日志记录以跟踪它们的状态并确保它们按预期结束并且没有死锁。

关于环境的差异（不同的操作系统和控制台/UI 执行），检查所有 java 特定的环境变量，即 JAVA_HOME、JAVA_OPTS 等。您的 UI 和控制台用户可能（尽管极不可能）使用不同的环境。变量。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T09:48:49.280

如果停止脚本在 mac 中不起作用，那么您可以对代码进行一些更改并编写关闭脚本，因为它可以在两个平台上工作。

如果无法获得这样的代码，而不是为 mac 和其他操作系统编写不同的关闭脚本，那么首先您编写代码用于通过代码识别操作系统，而不是根据操作系统通过 macthing 运行代码。

了解操作系统喜欢：

```
public static boolean isWindows() {

        String os = System.getProperty("os.name").toLowerCase();
        // windows
        return (os.indexOf("win") >= 0);

    }

    public static boolean isMac() {

        String os = System.getProperty("os.name").toLowerCase();
        // Mac
        return (os.indexOf("mac") >= 0);

    } 
```

你能澄清一下结束脚本吗？这会有帮助..

**--嗡--**

# c# - 私有类调用父类方法

> ID：15381372
> 
> 赞同：2
> 
> 时间：2013-03-13T09:29:56.293
> 
> 标签：c#

一个新手问题，我得到了以下 C# 代码，其中有一个内部类 B 需要调用类 A 上的方法。

请指教如何。

```
class A
{
  void MethodA() {
  }

  class B {
    void MethodB {
      // Now method B need to call Method A above
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T09:31:05.127

嵌套类型不会自动拥有其父类型的实例；你需要类似的东西：

```
class B {
    private readonly A a;
    public B(A a) { this.a = a; }
    void MethodB() { a.MethodA(); }
} 
```

而不是`new B()`，你会使用`new B(this)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:40:16.860

在 B 类中创建 A 的对象。并在 MethodB 中使用它。

```
class B
{
    private A objectA;
    void MethodB()
    {
        objectA.MethodA();
    }
} 
```

使用前初始化objectA。您可以在构造函数中执行此操作。

# outlook - 如何以编程方式设置 Outlook 文件夹初始视图

> ID：15381373
> 
> 赞同：1
> 
> 时间：2013-03-13T09:29:57.877
> 
> 标签：outlook

我想将公用文件夹设置为具有初始视图（自定义视图），我知道如何在 Outlook 2007 上手动执行此操作，但是，我找不到可以在 Interop（文件夹和 MAPI 文件夹）中使用的任何属性或方法可以做到这一点。

经过几个小时的谷歌搜索，我得出以下结论：

```
Imports NUnit.Framework
Imports System.Windows.Forms
Imports System.Net.Mail
Imports System.Net.Mime
Imports System.Net

Imports System.Runtime.InteropServices
Imports Outlook = Microsoft.Office.Interop.Outlook

<TestFixture()>
Public Class TestOutlook
    <Explicit()>
    <Test()>
    Public Sub TestSetFolderInitialView()
        Dim ol As New Outlook.Application
        Dim exCatched As Exception = Nothing
        Try
            ' Get My Mailbox 
            Dim myFolder As Outlook.MAPIFolder = Nothing
            For i As Integer = 0 To ol.Session.Folders.Count - 1
                myFolder = ol.Session.Folders(i + 1)
                If myFolder.Name = "Mailbox - Rex" Then ' Change it to your mail box name
                    Exit For
                End If
            Next

            ' Get the folder I want to Set initial view
            Dim testFolder As Outlook.MAPIFolder = Nothing
            If myFolder IsNot Nothing Then
                For i As Integer = 0 To myFolder.Folders.Count - 1
                    Dim pFolder = myFolder.Folders(i + 1)
                    If pFolder.Name = "Inbox" Then
                        For Each fol As Outlook.MAPIFolder In pFolder.Folders
                            If fol.Name = "TestFolder" Then
                                testFolder = fol
                                Exit For
                            End If
                        Next
                        Exit For
                    End If
                Next
            End If

            If testFolder IsNot Nothing Then
                Try
                    ' Create a test view
                    Dim newVw = CType(testFolder.Views.Add("RexTest-" & DateTime.Now.ToString("yyyyMMdd-hhmmss"),
                                                                   Outlook.OlViewType.olTableView,
                                                                   Outlook.OlViewSaveOption.olViewSaveOptionThisFolderEveryone), 
                                             Outlook.TableView)
                    newVw.LockUserChanges = True
                    newVw.Save()
                    newVw.Apply()

                    ' PR_DEFAULT_VIEW_ENTRYID:
                    Dim ns = "http://schemas.microsoft.com/mapi/proptag/"
                    Dim PR_DEFAULT_VIEW_ENTRYID = "0x36160102"
                    Dim PR_FOLDER_XVIEWINFO_E = "0x36E00102"
                    Dim defaultVw = testFolder.PropertyAccessor.GetProperty(ns & PR_DEFAULT_VIEW_ENTRYID)
                    Dim xVwInfo = testFolder.PropertyAccessor.GetProperty(ns & PR_FOLDER_XVIEWINFO_E)

                    ' the defaultVw is nothing for the first time (actually throw exception)
                    ' if i manually change it from the outlook, 
                    '   the value will be something like: 000000004B593F3D35EF8C42AB181C105AE444D40700E46C905CB9ABE446AA44351902AFC40E000026BF7A8C000040DB82FE9B98724F9B222A9C9BDB42CD0000005CF0280000

                    ' **** The problem is how to get the correct binary data for the newly created view so i can set it like this: *****
                    'testFolder.PropertyAccessor.SetProperty(ns & PR_DEFAULT_VIEW_ENTRYID, testFolder.PropertyAccessor.StringToBinary(newVw.Name))
                Catch ex As Exception
                    ' _log.Warn(String.Format("Error set initial view {0} to folder - {1}", newVw.Name, testFolder.Name), ex)
                    exCatched = ex
                    ' First time error 'The property "http://schemas.microsoft.com/mapi/proptag/0x36160102" is unknown or cannot be found' will be shown
                    ' If we set the initial view of the folder in the outlook, this error will go away
                End Try
            End If
        Catch ex As Exception
            Debug.WriteLine(ex.Message)
            Debug.WriteLine(ex.StackTrace)
            exCatched = ex
        Finally
            If ol IsNot Nothing Then
                Marshal.ReleaseComObject(ol)
                ol = Nothing
            End If
        End Try

        If exCatched IsNot Nothing Then
            Throw exCatched
        End If
    End Sub
End Class 
```

现在唯一剩下的部分是如何从新创建的视图中获取正确的二进制数据。一些操纵二进制值的线索：[http ://microsoft.public.win32.programmer.messaging.narkive.com/x1fNHHA5/default-view](http://microsoft.public.win32.programmer.messaging.narkive.com/x1fNHHA5/default-view)

但是它是用不同的语言编写的，我不知道如何在 vb 或 c# 中制作它。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:48:57.250

您是否尝试过 MAPIFolder.CurrentView 和 MAPIFolder.Views？

# php - 重新加载或刷新页面时如何记住没有提交事件的表单输入？

> ID：15381374
> 
> 赞同：1
> 
> 时间：2013-03-13T09:30:08.853
> 
> 标签：php, javascript, jquery, html, zend-framework

我在页面中有许多文本输入的表单

与他们一起，我提供 zend 分页来选择结果。

但是当我使用 zend 分页时，用户表单输入会丢失，因为它没有提交

当页面重新加载时，我移动到一个新页面有什么方法可以维护用户输入。

请任何人都可以帮我找到解决此问题的方法..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:33:20.290

伪代码：

使用javascript获取更改的值并将其存储在cooke中（使用jquery cookie插件）

```
jQuery('form').on('change', 'input', function() {
    jQuery.cookie(...)
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:33:50.187

解决方案是...

**AJAX** +**会话**

`change`在每个输入的事件上发送一个 ajax 请求。
将数据保存到`Session`.

每次加载表单数据时，请检查是否`Session`填写表单字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T09:33:04.377

您可以使用会话：

```
$form = array();

if (!empty($_POST))
{
  $form = $_POST;
}

elseif (!empty($_SESSION['form']))
{
  $form = $_SESSION['form'];
} 
```

然后用于`$form`填充输入字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T09:34:47.823

您可以使用 ajax onfocusout 元素并将值存储在会话中。在加载页面时，从会话中获取数据并显示它。

# security - 如何保护用户敏感数据的 S3 下载？

> ID：15381380
> 
> 赞同：0
> 
> 时间：2013-03-13T09:30:23.593
> 
> 标签：security, amazon-s3

假设我们有一个用于电子书购物的 Web 应用程序，用户只能下载他们付费的书籍。所有这些电子书数据（如 epub 数据）都存储在 S3 中，当我们的应用程序验证用户已经购买了一本书时，用户将获得一个 S3 下载 url。

我知道 S3 会为用户生成一个临时且有时间限制的 URL。但问题是即使 url 是临时的和有时间限制的，如果在有限的时间内另一个用户获得临时 url 会发生什么？

好的，所以一种方法似乎是让限时非常短，比如 10 秒，但潜在的风险仍然存在。

我知道这个问题很严谨，你会怎么处理？还是忘记了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:43:17.367

如果担心买家会分发 URL，他们同样可以分发他们下载的文件。

如果担心有人会在买家不知情的情况下获取 URL，那么也许您可以使用只有买家知道的令牌（例如某种密码）来保护下载。这将使该 URL 对买方以外的任何人都无法使用。不利的一面是，这会给为您的产品付费的人带来不便。

# php - MySQL自定义全局定义变量

> ID：15381382
> 
> 赞同：4
> 
> 时间：2013-03-13T09:30:32.557
> 
> 标签：php, mysql, database

在我的数据库设计中，我倾向于将一些旨在充当 ROLE 或 TYPE 的变量存储为`SMALLINT`.

例如：

```
CREATE TABLE `house` (
   `id` int(11) NOT NULL AUTO_INCREMENT,
   `type` smallint(11) NOT NULL, 
```

在 PHP 中，我这样做：

```
define('HOUSE_SMALL_TYPE', '0');
define('HOUSE_MEDIUM_TYPE', '1'); 
```

所以在 PHP 中，在`SELECT`查询中我会：

```
$this->db->query("SELECT * FROM house  
                  WHERE type = ?;", HOUSE_SMALL_TYPE); 
```

我的问题是：

1.  在 PHP 部分，有没有更好的方法来做到这一点？
2.  在 MySQL 本身中，MySQL 是否也具有全局定义功能（如 PHP 中的定义）？

我也想做点什么

```
SELECT * FROM house  WHERE type = HOUSE_SMALL_TYPE; 
```

在 MySQL 查询中。

我的目的是，当我在 MySQL 中执行 SELECT 时，我绝不会继续将值 0、1、2 与其真正含义进行映射。只是方便查看表值，而不更改结构表和字段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-12T11:43:37.377

从 MySQL 5.5 开始，无法设置全局用户定义变量。

一种解决方法可能是创建一个存储过程来返回您需要的内容。

```
DROP PROCEDURE IF EXISTS HOUSE_SMALL_TYPE;
DELIMITER //
CREATE PROCEDURE HOUSE_SMALL_TYPE ()
BEGIN 
SELECT 0;
END//
DELIMITER ; 
```

然后调用它。

```
CALL HOUSE_SMALL_TYPE(); 
```

该`DROP`语句是必需的，以便能够对其进行修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-21T12:48:48.820

恕我直言，MySQL 在这方面存在巨大差距，显然是在后面的版本中。一种替代方法可能是求助于设置操作系统环境变量，但是如何从 MySQL 中检索这些值，我一直无法看到。

这里有一整页：[https](https://dev.mysql.com/doc/refman/5.0/en/setting-environment-variables.html) ://dev.mysql.com/doc/refman/5.0/en/setting-environment-variables.html教我们如何在 shell 中“设置”操作系统环境变量，但只字不提实际上在 MySQL 中调用这些变量。

作为另一种解决方法，使用 FUNCTION 可能被认为比 STORED PROCEDURE 更轻量级，如下所示：

```
CREATE DEFINER=`root`@`localhost` FUNCTION `DEFAULT_COUNTRY_CODE`() RETURNS CHAR(4)
DETERMINISTIC
RETURN '+234'; 
```

在查询的其他地方，您可以执行以下操作：

```
SELECT CONCAT(DEFAULT_COUNTRY_CODE(), "-", telephone) FROM contacts WHERE CountryCode = "NGA" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-28T22:31:00.870

您的方法很好，如果您想查看 MySQL 中的值而不是 1、2、3 等，请考虑以下问题：

```
define('HOUSE_SMALL_TYPE', 'HOUSE_SMALL_TYPE');
define('HOUSE_MEDIUM_TYPE', 'HOUSE_MEDIUM_TYPE'); 
```

然后在 MySQL 中你可以使用：

```
SELECT * FROM house  WHERE type = 'HOUSE_SMALL_TYPE'; 
```

您只需要记住，如果没有 PHP 支持，您不能将任何您喜欢的值塞进 house.type 中。

更好地考虑这一点：

```
class HouseType {
  const SMALL = 'SMALL';
  const MEDIUM = 'MEDIUM';
} 
```

或者

```
class House {
  const TYPE_SMALL = 'SMALL';
  const TYPE_MEDIUM = 'MEDIUM';
} 
```

因为那时你可以在你的 PHP 代码中使用`HouseType::SMALL`or`House::TYPE_SMALL`而不是使用全局定义。通过这样做，您可能会受益于某些 IDE 中的代码完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-16T15:33:36.377

由于 MySQL 5.5 无法设置全局用户定义变量，另一种解决方法可能是帮助表

```
create table glob_var(key varchar(10) unique not null, val varchar(10) not null); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-13T11:39:10.980

我建议使用 MySQL 变量：

```
SET HOUSE_SMALL_TYPE = 0;
SET HOUSE_MEDIUM_TYPE = 1; 
```

然后，在您的查询中，您可以使用这些变量：

```
SELECT * FROM house  WHERE type = @HOUSE_SMALL_TYPE; 
```

此方法定义**会话**变量：

> 如果您更改会话系统变量，该值将一直有效，直到您的会话结束或您将变量更改为不同的值。其他客户端看不到更改。

如果要定义全局 MySQL 变量（适用于所有会话）：

```
SET GLOBAL HOUSE_SMALL_TYPE = 0;
SET GLOBAL HOUSE_MEDIUM_TYPE = 1; 
```

> 要明确指出变量是全局变量，请在其名称前加上 GLOBAL 或 @@global.. 设置全局变量需要 SUPER 权限。

文档：
[SET 语句](http://dev.mysql.com/doc/refman/5.6/en/set-statement.html)
[使用系统变量](http://dev.mysql.com/doc/refman/5.6/en/using-system-variables.html)
[用户定义的变量](http://dev.mysql.com/doc/refman/5.6/en/user-variables.html)

# ruby-on-rails - 使用 minitest 编写模型方法测试

> ID：15381386
> 
> 赞同：1
> 
> 时间：2013-03-13T09:30:42.963
> 
> 标签：ruby-on-rails, ruby, minitest

我使用迷你测试来测试框架。我尝试编写模型测试。

```
class Person
  include Mongoid::Document

  field :provider, type:String
  field :user_id, type:String
  field :name, type:String

  def self.create_with_omniauth(auth)
    create! do |person|
      person.provider = auth["provider"]
      person.user_id = auth["uid"]
      #user.name = auth["info"]["name"]
    end
  end

  def self.find_by_provider_and_uid(provider, uid)
    where(provider: provider, user_id: uid).first
  end

end 
```

以上是我的人物模型。我想编写一个测试来控制人是否具有“create_with_omniauth 方法”。

我该如何编写这个测试。我等你的想法？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:40:12.580

为此，您可以使用[assert_respond_to](http://bfts.rubyforge.org/minitest/MiniTest/Assertions.html#method-i-assert_respond_to)。

一个完整的例子：

```
class PersonTest < MiniTest::Unit::TestCase
  def test_responds_to_create_with_omniauth
     assert_respond_to(Person, :create_with_omniauth)
  end
end 
```

我个人的意见是测试方法的行为，而不是断言它是否存在，但我会留给你。

# java - 为从 wsdl 生成的 Axis2 代码编写 Client.java 代码

> ID：15381387
> 
> 赞同：0
> 
> 时间：2013-03-13T09:30:43.197
> 
> 标签：java, eclipse-plugin, wsdl, axis2

我是 Axis2 wsdl 客户端生成的新手。我能够使用axis2、eclipse和tomcat生成存根（ConfigurationServiceStub）和回调。我如何生成或应该为客户编写什么代码。Java 发出肥皂请求。

请求如下：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:con="http://schema.unitedtote.com/ToteLink/2008/06/Configuration" xmlns:com="http://schema.unitedtote.com/ToteLink/2008/06/Common">
<soapenv:Header/>
  <soapenv:Body>
   <con:GetConfiguration>
     <!--Optional:-->
     <con:ConfigurationRequest>
        <com:Source>
           <com:SystemId>ABCD</com:SystemId>
           <com:SourceId>EFG</com:SourceId>
        </com:Source>
     </con:ConfigurationRequest>
  </con:GetConfiguration> 
```

java代码如下：

```
=== from Junit tester following code was generated:
/**
* Auto generated test method
*/
public  void testStartgetConfiguration() throws java.lang.Exception{
com.unitedtote.configuration.ConfigurationServiceStub stub = new com.unitedtote.configuration.ConfigurationServiceStub();
com.unitedtote.configuration.ConfigurationServiceStub.GetConfiguration getConfiguration8=(com.unitedtote.configuration.ConfigurationServiceStub.GetConfiguration)getTestObject(com.unitedtote.configuration.ConfigurationServiceStub.GetConfiguration.class);
// TODO : Fill in the getConfiguration8 here
stub.startgetConfiguration(
getConfiguration8,
new tempCallbackN65548()
);

public  void testgetConfiguration() throws java.lang.Exception{
com.unitedtote.configuration.ConfigurationServiceStub stub =
new com.unitedtote.configuration.ConfigurationServiceStub();//the default implementation should point to the right endpoint
com.unitedtote.configuration.ConfigurationServiceStub.GetConfiguration getConfiguration8=

(com.unitedtote.configuration.ConfigurationServiceStub.GetConfiguration)getTestObject(com.unitedtote.configuration.ConfigurationServiceStub.GetConfiguration.class);
    // TODO : Fill in the getConfiguration8 here
    assertNotNull(stub.getConfiguration(
    getConfiguration8));
        } 
```

# objective-c - Objective-C 为什么这不起作用？

> ID：15381393
> 
> 赞同：1
> 
> 时间：2013-03-13T09:30:50.730
> 
> 标签：objective-c

```
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        NSMutableString *outputStringSet = [[NSMutableString alloc] init];
        NSMutableString *outputStringArray = [[NSMutableString alloc] init];
        NSMutableSet *mySet = [[NSMutableSet alloc] init];
        NSMutableArray *myArray = [[NSMutableArray alloc] initWithCapacity: 10];
        int userInput;

        NSLog(@"Enter 10 numbers");

        for( int i = 0; i < 10; i++) {
            scanf("%i", &userInput);
            NSNumber *input = [[NSNumber alloc] initWithInt: userInput];
            [myArray addObject:input];
            if([mySet member: input]) {
                [mySet addObject: input];
            }

        }
        for (int k = 0; k < [myArray count]; k++) {

            [outputStringArray appendFormat:@"%@, ", [myArray objectAtIndex:k]];

        }

        NSLog(@"%@", [outputStringArray substringToIndex:[outputStringArray length] - 2]);

        for (int j = 0; j < [myArray count]; j++) {

            if([mySet containsObject: [myArray objectAtIndex:j]]) {

                [outputStringSet appendFormat:@"%@, ", [myArray objectAtIndex:j]];
            }

            NSLog(@"%@", outputStringSet);

        }
    }

    return 0;
} 
```

**上面的代码打印了数组，但没有打印集合中的适当对象**
为什么？
请解释清楚。我有点菜鸟，在其他任何地方都找不到答案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:38:32.600

```
if([mySet member: input]) {
    [mySet addObject: input];
} 
```

如果对象已经在集合中，则将其添加到集合中。您想要相反：如果对象*不在*其中，则添加该对象。

因此：

```
if ( ! [mySet member:input] )
    [mySet addObject:input]; 
```

顺便说一句，您应该在测试中使用`containsObject:`而不是：`member:`

> `containsObject:`
> 
> 返回一个布尔值，指示给定对象是否存在于集合中。
> 
> `- (BOOL)containsObject:(id)anObject`

编辑：您甚至不需要在添加之前测试对象是否已经在集合中。毕竟，这是 a 的主要目的`NSSet`：确保其对象的唯一性。因此，如果您添加一个对象两次，第二次调用将被忽略，因为该对象已经在其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:38:03.860

你的集合是空的，因为

```
 if([mySet member: input]) {
        [mySet addObject: input];
    } 
```

**成员：**

> 确定集合是否包含与给定对象相等的对象，如果存在则返回该对象。

# spring - Spring 3.2，jUnit 4.11，JPA NoSuchBeanDefinitionException：预计至少 1 个 bean

> ID：15381396
> 
> 赞同：0
> 
> 时间：2013-03-13T09:30:56.797
> 
> 标签：spring, junit4

我正在使用基于注释的弹簧配置并尝试测试我的基于 JPA 的 DAO。配置后，当我运行测试时，会抛出以下错误。即使在 Test 类中创建了 Bean 配置，我也不知道为什么找不到 IPartnerDao。

```
 5173 [ERROR] org.springframework.test.context.TestContextManager  - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@3600e312] to prepare test instance [test.java.net.bornil.persistence.service.partner.PartnerDaoTest@148238f4]
    org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'test.java.net.bornil.persistence.service.partner.PartnerDaoTest': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private main.java.net.bornil.persistence.service.IPartnerDao test.java.net.bornil.persistence.service.partner.PartnerDaoTest.parDao; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [main.java.net.bornil.persistence.service.IPartnerDao] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:288)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1120)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireBeanProperties(AbstractAutowireCapableBeanFactory.java:379)
        at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:110)
        at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
        at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:313)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:284)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:88)
        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
        at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
        at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
        at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
        at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
        at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
        at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
        at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
        at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
        at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)
    Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private main.java.net.bornil.persistence.service.IPartnerDao test.java.net.bornil.persistence.service.partner.PartnerDaoTest.parDao; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [main.java.net.bornil.persistence.service.IPartnerDao] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:514)
        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:285)
        ... 32 more
    Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [main.java.net.bornil.persistence.service.IPartnerDao] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:967)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:837)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:749)
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:486)
        ... 34 more 
```

测试类

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(loader = AnnotationConfigContextLoader.class, classes = { JPAConfig.class })
public final class PartnerDaoTest {

    @Configuration
    static class ContextConfiguration {

        @Bean
        public IPartnerDao getParDao() {
            return new PartnerDao();
        }
    }

    @Autowired
    private IPartnerDao parDao;

    @Test
    public void testFindPartnerWithAddress() throws Exception {
        Partner partner = parDao.findPartnerWithAddress(1L);
        assertNotNull(partner);
    }
} 
```

DAO 类

```
@Repository
@Transactional(readOnly = true)
public class PartnerDao implements IPartnerDao {

    private static Logger logger = Logger.getLogger(PartnerDao.class.getName());

    @PersistenceContext
    private EntityManager em;

    public PartnerDao() {

    }

    /* (non-Javadoc)
     * @see main.java.net.bornil.persistence.service.IPartnerDao#find(java.lang.Long)
     */
    @Override
    public Partner findPartnerWithAddress(Long id) {
        if (logger.isDebugEnabled()) {
            logger.debug("Partner ID : " + id);
        }

        Query query = em.createQuery("select p from Partner p join fetch p.addressSet where p.id = :id");
        query.setParameter("id", id);

        return (Partner) query.getSingleResult();
    }

} 
```

合作伙伴界面

```
@Service
public interface IPartnerDao {

    public Partner findPartnerWithAddress(Long id);

} 
```

JPAConfig 类

```
@Configuration
// @EnableLoadTimeWeaving
@EnableTransactionManagement
@PropertySource({ "classpath:jdbc.properties" })
public class JPAConfig {

    @Autowired
    Environment env;

    @Bean
    DataSource getJdbcDataSource() {

        String jdbcUrl = env.getProperty("jdbc.url");
        String username = env.getProperty("jdbc.username");
        String password = env.getProperty("jdbc.password");

        return new DriverManagerDataSource(jdbcUrl, username, password);
    }

    @Bean
    public PlatformTransactionManager getTransactionManager() {
        JpaTransactionManager transactionManager = new JpaTransactionManager();
        transactionManager.setEntityManagerFactory(getEntityManagerFactoryBean().getObject());
        return transactionManager;
    }

    @Bean
    public LocalContainerEntityManagerFactoryBean getEntityManagerFactoryBean() {
        LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();
        factory.setDataSource(getJdbcDataSource());
        factory.setPackagesToScan(new String[] { "main.java.net.bornil.persistence.entity" });

        HibernateJpaVendorAdapter hjva = new HibernateJpaVendorAdapter();
        hjva.setGenerateDdl(false);
        hjva.setShowSql(true);
        hjva.setDatabasePlatform("org.hibernate.dialect.MySQLDialect");

        factory.setJpaVendorAdapter(hjva);
        return factory;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:38:50.510

确保您的`JPAConfig.class`.

```
@ComponentScan("package.containing.PartnerDao")
public class JPAConfig{

} 
```

还可以尝试将测试添加到由`ContextLoader`

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(loader = AnnotationConfigContextLoader.class, 
   classes = { JPAConfig.class, PartnerDaoTest.class })
public final class PartnerDaoTest {

/** tests**/
} 
```

# c# - asp:HiddenField 在按钮单击时从 JavaScript 变量中获取值

> ID：15381397
> 
> 赞同：1
> 
> 时间：2013-03-13T09:30:56.903
> 
> 标签：c#, javascript, jquery, asp.net

我对 JavaScript 和 jQuery 很陌生，虽然我经常使用 jQuery UI 组件，但我之前几乎没有做过任何修改。在这种情况下，我需要调整 jQuery Slider 来调整日期，我创建了如下内容：http: [//jsfiddle.net/ryn_90/Tq7xK/6/](http://jsfiddle.net/ryn_90/Tq7xK/6/)。

到目前为止我对此感到满意，现在我让滑块按我的意愿工作，我希望能够从 JavaScript 属性或 HTML 绑定 C# HiddenValue，这样我就可以保存日期有。除非有任何更好的方法可以将此值发送到后端...

到目前为止，我已经能够从 c# 变量中绑定一个 JavaScript 值，但还没有找到相反的方法。

这是我的 JavaScript 代码：

```
 <script>
    $(function () {
        $("#dialog").dialog({
            autoOpen: false,
            show: {
                effect: "blind",
                duration: 1000
            },
            hide: {
                effect: "explode",
                duration: 1000
            }
        });

        jQuery(function() {
            var dlg = jQuery("#sliderPopup").dialog({ 
                draggable: true, 
                resizable: true, 
                show: {
                    effect: "blind",
                    duration: 1000
                },
                hide: {
                    effect: "explode",
                    duration: 1000
                },
                width: 320, 
                autoOpen: false, 
                minHeight: 10, 
                minwidth: 10 
              });
          dlg.parent().appendTo(jQuery("form"));
        });

        $("#popupOpener").click(function () {
            $("#dialog").dialog("open");
        });

        $("#sliderPopupOpener").click(function () {
            $("#sliderPopup").dialog("open");
        });
    });

    $(function () {
        $("#slider").slider({
            max: 30,
            min: -30,
            value: 0,
            slide: function (event, ui) {
                $("#days").val(ui.value);
                $("#date").text(addDaysToDate(parseInt($("#days").val())));
            },
            create: function (event, ui) {
                $("#date").text(addDaysToDate(parseInt($("#days").val())));
            }
        });
    });

    $("#days").val($("#slider").slider("value"));

    $("#days").change(function (event) {
        var data = $("#days").val();
        if (data.length > -30) {
            if (parseInt(data) >= 0 && parseInt(data) <= 30) {
                $("#slider").slider("option", "value", data);
            }
            else {
                if (parseInt(data) < -30) {
                    $("#days").val("-30");
                    $("#slider").slider("option", "value", "-30");
                }
                if (parseInt(data) > 30) {
                    $("#days").val("30");
                    $("#slider").slider("option", "value", "30");
                }
            }
        }
        else {
            $("#slider").slider("option", "value", "0");
        }
        $("#date").text(addDaysToDate(parseInt($("#days").val())));
    });

    function addDaysToDate(days) {
        var mths = new Array("Jan", "Feb", "Mar",
        "Apr", "May", "Jun", "Jul", "Aug", "Sep",
        "Oct", "Nov", "Dec");

        var d = new Date(<%=deadlineYear%>, <%=deadlineMonth%>, <%=deadlineDay%>);
        d.setHours(d.getHours() + (24 * days));

        var currD = d.getDate();
        var currM = d.getMonth();
        var currY = d.getFullYear();

        return mths[currM] + " " + currD + ", " + currY;
    }

    jQuery(function() {
       var dlg = jQuery("#sliderPopup").dialog({ 
                            draggable: true, 
                            resizable: true, 
                            show: 'Transfer', 
                            hide: 'Transfer', 
                            width: 320, 
                            autoOpen: false, 
                            minHeight: 10, 
                            minwidth: 10 
              });
      dlg.parent().appendTo(jQuery("form"));
    });
</script> 
```

这是 asp.NET 代码：

```
<div id="sliderPopup" title="Modify Deadline">
    <div id="slider"></div>
    <input type="text" id="days" value="0"/>
    <div id="date"></div>
    <asp:HiddenField ID="ModifiedDeadlineDateFromSlider" />
    <asp:Button ID="DeadlineDateSave" Text="Save Deadline" runat="server"             OnClick="saveDeadline" />
</div> 
```

如果您需要更多信息，请告诉我。感谢您的回答和评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:43:24.997

要将 javascript 值传递给 c#，请执行以下操作：

```
<script type="text/javascript">
function abc()
{
   var str = "yourValue";
   document.getElementById("HiddenField1").value = str;
}
</script> 
```

然后在代码隐藏上访问 HiddenField1.Value。

要将 c# 变量传递给 javascript，您可以像这样绑定公共变量：

```
<%=this.YourVariable%> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:09:22.907

您只需添加一行代码即可将日期值设置为隐藏字段。***在幻灯片事件*****和*****.slider 函数的******创建事件*****中**添加以下**代码**

 ***```
$("#ModifiedDeadlineDateFromSlider").val(addDaysToDate(parseInt($("#days").val()))); 
```

或者

```
$("#ModifiedDeadlineDateFromSlider").val($("#date").text()); 
```

修改后您的 .slider 函数将如下所示。

```
$(function () {
        $("#slider").slider({
            max: 30,
            min: -30,
            value: 0,
            slide: function (event, ui) {
                $("#days").val(ui.value);
                $("#date").text(addDaysToDate(parseInt($("#days").val())));

                $("#ModifiedDeadlineDateFromSlider").val($("#date").text());

            },
            create: function (event, ui) {
                $("#date").text(addDaysToDate(parseInt($("#days").val())));

                $("#ModifiedDeadlineDateFromSlider").val($("#date").text());

            }
        });
    }); 
```

PS 仅当您还想在创建滑块时在隐藏字段值中设置日期时，才添加提到的代码行来创建事件。如果您只想在日期更改时设置，那么只需在幻灯片事件中添加该代码。

*注意：在这个特定的场景中，它也不适用于更改。因此，经过讨论和几次试验，我们又发现了一件小事，但却造成了问题。**asp 隐藏字段的属性 ClientIDMode 未设置为静态**，因为它的 ID 在渲染期间发生了更改，结果值在后期代码中不可用*

希望有帮助！***

# mysql - jooq 扩展现有的方言。采用 MySQL 方言到 apache Hive 方言

> ID：15381401
> 
> 赞同：2
> 
> 时间：2013-03-13T09:31:09.727
> 
> 标签：mysql, hadoop, hive, cloudera, jooq

我正在尝试使用 JOOQ 来查询 Hive。Hive SQL 方言非常接近 MySQL 方言。现在我遇到了这些问题：

*   Hive 支持 LIMIT N，它不支持 LIMIT N OFFSET K。虚拟解决方案 - 覆盖**select.limit(limit);**

在 JOOQ 中解决此类问题的最佳实践是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T19:08:41.790

不幸的是，扩展 jOOQ 以彻底支持新的 SQL 方言并不是很简单。jOOQ 的 API 随着时间的推移变得越来越广泛，支持一组很棒的标准和特定于供应商的 SQL 语法变体。虽然 Apache Hive 方言可能看起来与 MySQL 相似，但可能存在许多需要在 jOOQ 内部实现的细微差别。LIMIT .. OFFSET 子句的不同实现只是一个问题。也就是说，将 jOOQ 与“未知”或“不受支持”的方言一起使用通常不是一个好主意。

### 解决方案：短期内

在短期内，您可能需要修补 jOOQ 呈现的 SQL。最好的技术是使用此处记录的 ExecuteListener：

*   [http://www.jooq.org/doc/latest/manual/sql-execution/execute-listeners/](http://www.jooq.org/doc/latest/manual/sql-execution/execute-listeners/)
*   [http://www.jooq.org/javadoc/latest/org/jooq/ExecuteListener.html](http://www.jooq.org/javadoc/latest/org/jooq/ExecuteListener.html)

收到“renderEnd()”事件后，您将能够访问呈现的 SQL 并使用正则表达式或您可能喜欢的任何技术对其进行修改。

### 解决方案：从长远来看

从长远来看，如果/当[#2337](https://github.com/jOOQ/jOOQ/issues/2337)实施时可能会有更好的解决方案（但我们可能不会实施）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:44:48.143

这是最肮脏的解决方案 :) 不幸的是，JOOQ 用户组没有回答 :(

```
public class CountRatingQueryBuilder {

    private static final String SCORING_TABLE_NAME = "web_resource_rating";

    private final Connection connection;
    private final ScoringMetadata scoringMetadata;

    private final SelectSelectStep select;
    private final Factory create;

    public CountRatingQueryBuilder(Connection connection, ScoringMetadata scoringMetadata){
        this.connection = connection;
        this.scoringMetadata = scoringMetadata;

        create = new Factory(this.connection, SQLDialect.MYSQL);
        select = create.select();

        withSelectFieldsClause();
    }

    public CountRatingQueryBuilder withLimit(int limit){
        select.limit(limit);
        return this;
    }

    public CountRatingQueryBuilder withRegionId(Integer regionId){
        select.where(REGION_ID.field().equal(regionId));
        return this;
    }

    public CountRatingQueryBuilder withResourceTypeId(int resourceTypeId){
        select.where(RESOURCE_TYPE_ID.field().equal(resourceTypeId));
        return this;
    }

    public CountRatingQueryBuilder withRequestTimeBetween(long beginTimestamp, long endTimestamp){
        select.where(REQUEST_TIME.field().between(beginTimestamp, endTimestamp));
        return this;
    }

    public CountRatingQueryBuilder withResourceId(int resourceId){
        select.where(RESOURCE_ID.field().equal(resourceId));
        return this;
    }

    protected void withGroupByClause(){
        select.groupBy(REGION_ID.field());
        select.groupBy(RESOURCE_TYPE_ID.field());
        select.groupBy(RESOURCE_ID.field());
        select.groupBy(CONTENT_ID.field());
    }

    protected void withSelectFieldsClause(){
        select.select(REGION_ID.field());
        select.select(RESOURCE_TYPE_ID.field());
        select.select(CONTENT_ID.field());
        select.select(RESOURCE_ID.field());
        select.select(Factory.count(HIT_COUNT.field()).as(SUM_HIT_COUNT.fieldName()));
    }

    protected void withFromClause(){
        select.from(SCORING_TABLE_NAME);
    }

    protected void withOrderByClause(){
        select.orderBy(SUM_HIT_COUNT.field().desc());
    }

    public String build(){
        withGroupByClause();
        withOrderByClause();
        withFromClause();
        return select.getSQL().replace("offset ?","");//dirty hack for MySQL dialect. TODO: we can try to implement our own SQL dialect for Hive :)

    }

    public List<ResultRow> buildAndFetch(){
        String sqlWithPlaceholders = build();

        List<ResultRow> scoringResults = new ArrayList<ResultRow>(100);
        List<Record> recordResults = create.fetch(sqlWithPlaceholders, ArrayUtils.subarray(select.getBindValues().toArray(new Object[select.getBindValues().size()]),0, select.getBindValues().size()-1));//select.fetch();
        for(Record record : recordResults){
            ResultRowBuilder resultRowBuilder = ResultRowBuilder.create();

            resultRowBuilder.withContentType(scoringMetadata.getResourceType(record.getValue(RESOURCE_TYPE_ID.fieldName(), Integer.class)));
            resultRowBuilder.withHitCount(record.getValue(SUM_HIT_COUNT.fieldName(), Long.class));
            resultRowBuilder.withUrl(record.getValue(CONTENT_ID.fieldName(), String.class));
            scoringResults.add(resultRowBuilder.build());
        }
        return scoringResults;
    }

} 
```

# c++ - 将 const Byte* 转换为 std::string c++

> ID：15381402
> 
> 赞同：0
> 
> 时间：2013-03-13T09:31:14.677
> 
> 标签：c++, visual-c++

如何将 const Byte* 转换为 std::string。我尝试了以下

```
std::string sTemp(reinterpret_cast<const char*>(ByteBuffer)); 
```

其中 ByteBuffer 是 const Byte*。使用上面的代码没有得到 sTemp 中 ByteBuffer 的值 请帮忙

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:33:07.717

如果`ByteBuffer`包含以 NUL 结尾的字符串，则代码应该可以正常工作。

如果没有，您需要将其长度作为第二个参数提供给[`string`构造函数](http://www.cplusplus.com/reference/string/string/string/)。

以上假设这`Byte`是我认为的，而事实`ByteBuffer`并非如此`NULL`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:39:11.097

C++ 中没有“字节”这样的数据类型。如果它存在的话，我假设它是一个 8 位数据存储，在这种情况下你的代码是正确的。确保缓冲区中有一个空字符 - '\0'。

# iphone - 如何设置UIView控件固定大小，不管iphone 3.5的屏幕还是iphone 4.0的屏幕

> ID：15381403
> 
> 赞同：-1
> 
> 时间：2013-03-13T09:31:15.080
> 
> 标签：iphone, objective-c, cocoa-touch

我有一个黄色的`UIView`，我希望它的高度一直保持在80，但是它会变成4.0的长屏，我希望它是固定的，那我们该怎么办？谢谢！！

UIButton 为什么不跟大屏大一点呢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:40:22.503

如图所示的自动调整大小的掩码（不会在垂直或水平方向调整大小）将确保 UIView 不会随着屏幕大小的变化而调整大小。

![自动调整蒙版](../Images/a54c842aeba85ec181eaab39fab3446d.png)

这些设置可以在实用程序的尺寸检查器选项卡中找到。您应该在“查看”部分下看到自动调整大小选项。

# tomcat - Tomcat6 作为 Windows 服务无法识别映射驱动器

> ID：15381410
> 
> 赞同：0
> 
> 时间：2013-03-13T09:31:30.743
> 
> 标签：tomcat, windows-xp, tomcat6

我的 C 盘上有一个目录`C:/ABCD/XYZ`，这个目录我已映射为 D 盘。`XYZ`包含其他几个子目录，即。`dir1`等`dir2`。
我在 Windows XP 上安装了 Tomcat 6 作为服务。
当我运行包含代码的 servlet 时。

```
(new File("D:\dir1")).isDirectory(); 
```

上面这行代码返回的值是`false`

如果我通过命令行启动 Tomcat 6 ，则会返回完全相同的代码`true`行（此 Tomcat 是从 zip 文件中提取的）。
我意识到这个问题是由于用户（Windows 和/或 Tomcat）及其权限造成的，但我无法确切地弄清楚问题是什么以及如何解决它。
任何人都可以阐明一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:43:36.023

您必须意识到您在登录时所做的网络映射发生在您用户的上下文中。服务通常在其自己的上下文中运行，并且没有与任意用户相同的映射。（想象一下两个用户在机器上拥有帐户：两者都可以有不同的驱动器映射——服务应该采用哪一个？）

我有一段时间没有使用 Windows，所以我将依靠您自己找到有关如何为服务映射驱动器的信息 - 或依靠其他人指出实际位置。希望这个快速回答至少有助于理解潜在的问题

# python - 在 websocket 握手中发送自定义标头

> ID：15381414
> 
> 赞同：2
> 
> 时间：2013-03-13T09:31:39.290
> 
> 标签：python, websocket

**如何**在 WebSocket 协议中发生的第一次握手中发送自定义标头？

我想在我的初始请求中使用自定义标头“ ****X-Abc-Def : xxxxx** ”

WebSocket 客户端是 Python 和 Android 客户端。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T07:09:28.963

在 python [websocket-client](https://pypi.python.org/pypi/websocket-client)中，您确实可以轻松传递自定义标头 - 有一个`header`可用的关键字参数；请参阅文档中的以下示例：

```
conn = create_connection("ws://echo.websocket.org/", header={"User-Agent": "MyProgram"}) 
```

**编辑**：关键字应该是`header`，不是`headers`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-09T21:17:07.447

@ThiefMaster 做得很完美。但是，如果要添加自定义标头，可以使用参数`header`而不是`headers`. 希望这可以帮助

# mysql - Visual Basic MySql 连接字符串

> ID：15381415
> 
> 赞同：0
> 
> 时间：2013-03-13T09:31:39.480
> 
> 标签：mysql, vba, exception, connection-string

我正在使用 MySQL 连接字符串连接到我当前项目中的 MySQL 数据库。

> 服务器=127.0.0.1；Uid=root；密码=12345；数据库=test；

但是当参数之一包含时，连接会抛出异常；象征。例如：

> 密码=12;345

例外：

> 不支持关键字。参数名称：345；数据库

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:39:08.740

[在此处](http://connectionstrings.com/)检查您的连接字符串

而且您的密码看起来包含 MySQL 的非法值。只要看看您的代码。

例如`Server=127.0.0.1;Uid=root;Pwd=12345;Database=test;` ，在 Pwd 之前，它已经有；然后在你的密码之后，它仍然有；所以，这意味着密码从“;”开始 并以“;”结尾 再次。因此，最好的建议是更改密码。希望会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:46:10.320

用双引号将您的密码括起来。

请参阅“备注”部分下的[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring%28VS.71%29.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring%28VS.71%29.aspx)大约三分之一。

> 连接字符串的基本格式由一系列用分号分隔的关键字/值对组成。等号 (=) 连接每个关键字及其值。要包含包含分号、单引号字符或双引号字符的值，该值必须用双引号引起来。如果该值同时包含分号和双引号字符，则该值可以用单引号引起来。如果值以双引号字符开头，则单引号也很有用。相反，如果值以单引号开头，则可以使用双引号。如果该值同时包含单引号和双引号字符，则用于将该值括起来的引号字符每次出现在该值中时都必须加倍。

# c++ - 在 Visual Studio 中使用 GNUPLOT

> ID：15381431
> 
> 赞同：2
> 
> 时间：2013-03-13T09:32:11.177
> 
> 标签：c++, visual-studio-2010, qt, opencv, gnuplot

我已将我的 OpenCV + Qt 与 Microsoft Visual Studio 2010 链接起来。

我现在想将它与 GNULOT 链接。

您认为可以通过从不同的 IplImage 中提取一些信息来绘制一些图表吗？

坦率地说，我认为在要绘制一些图表时处理该[链接非常复杂。](http://www.shervinemami.info/graphs.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:41:37.113

如果你想添加一些图表（有很多功能），想想，使用这个有据可查的库是个好主意：Qwt（[http://qwt.sourceforge.net/](http://qwt.sourceforge.net/)）。此外，StackOverflow 上有与此库相关的[qwt -tag。](/questions/tagged/qwt "显示标记为“qwt”的问题")

此外，更简单的是使用`QCustomPlot`来自[http://www.workslikeclockwork.com/index.php/components/qt-plotting-widget/的绘图小部件](http://www.workslikeclockwork.com/index.php/components/qt-plotting-widget/)

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T10:34:54.287

我在我的项目中使用了 Qwt ( [http://qwt.sourceforge.net/](http://qwt.sourceforge.net/) )，这是一种绘制图表的简单方法。我建议你也将它用于你的项目。它也很好地与 Qt 集成。

# c# - VISUAL C# - WPF 页面名称

> ID：15381432
> 
> 赞同：1
> 
> 时间：2013-03-13T09:32:12.333
> 
> 标签：c#, c#-4.0, wpf-controls, wpf-4.0

简而言之，我需要能够在我的项目中自动创建多个“tot”页面，每个页面都应该有不同的名称，因此，我需要一种方法，让我有机会定义每个页面的名称在声明时动态页面。

现在，找不到解决方案，我提出了我创建的 2 个页面的创建代码：

```
Page fisrt= new Page();
Page second= new Page(); 
```

实际上我需要：

```
for (int i=0; i<tot; ++i)
{
 Page nome = new Page();
} 
```

我粘贴的代码中的术语“名称”将是每次动态都会更改的页面名称，例如来自数据库中的表，但这将是我稍后会看到的内容。

如果我输入字符串变量的字符串或变量名而不是“名称”，这是行不通的！所以我只需要知道每次使用不同名称创建每个页面的唯一方法是什么。

非常感谢你！=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:51:22.943

将您的页面放在一个集合中。如果您想通过字符串获取引用，您可以使用 SortedList<> 例如：

```
SortedList<string, Page> pageList = new SortedList<string, Page>();

for (int i = 0; i < 3; i++)
{
    pageList.Add(string.Format("Page{0}", i), new Page());
} 
```

然后，您可以获得对特定页面的引用，如下所示：

```
Page page = pageList["Page2"]; 
```

或者

```
pageList["Page0"].ActualHeight = 250; 
```

# ios - UIView 的不透明度和 alpha 是一样的吗

> ID：15381436
> 
> 赞同：23
> 
> 时间：2013-03-13T09:32:20.667
> 
> 标签：ios, objective-c, xcode, opacity, alpha

我想使用动画来更改 UIView 的颜色以使其褪色，但是，不知何故我无法访问和设置不透明度，但我可以设置 alpha。我想知道 alpha 和 opacity 是否相同？在网上搜索，我没有找到一个好的答案。非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-13T09:36:42.397

实际上“不透明度”是指您的`UIView`. 当视图完全不透明时，这意味着它`alpha = 1`，当视图完全透明（非透明）时，它的`alpha = 0`.

至于 Cocoa 的属性`CALayer`和`UIView`在 Cocoa 中的属性，是的，它们提供了相同的功能。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-13T09:36:09.950

自己试试吧！

`CALayer`从`opacity`0 到 1，`UIView`从`alpha`0 到 1。它们具有相同的视觉效果。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-13T09:40:50.583

Alpha 会影响在视图上绘制的所有内容。背景颜色的 Alpha 会影响背景颜色的透明度以及在视图上绘制的任何其他内容。即它会给整个视图带来冷淡的效果。不透明度意味着不要在下面绘制任何东西，即使你是透明的，它只会影响当前视图。

# visual-c++ - 如何在本机 C++ 项目中使用 tlb 文件

> ID：15381440
> 
> 赞同：5
> 
> 时间：2013-03-13T09:32:27.717
> 
> 标签：visual-c++, com, visual-studio-2005

我有一个 tlb 文件，其中包含一些我需要使用的函数声明。

如果我使用

```
#import "type_library.tlb" 
```

我可以从我的代码中正确引用该函数：

```
tlb_namespace::required_function(); 
```

但是当我编译项目时，链接器说 tlb_namespace::required_function 是一个未解析的外部符号。

我怎样才能成功地建立这样的项目？

**编辑**：

我在 Dummy VBA 访问项目中使用了相同的类型库。我已经添加了对类型库的引用，并且我注意到类型库中包含的一些函数被正确调用。但其中一些不是。VBA 说它无法在相关的 dll 中找到它们的入口点。

这可以解释构建 c++ 应用程序时未解析的外部符号吗？

我还注意到失败的函数在 tlb 中声明如下：

```
UPPER_function_name 
```

但在dll中声明如下：

```
Upper_function_name 
```

这可能是问题吗？

直接修改二进制tlb文件或dll是否可以解决这种错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T16:36:50.630

使用IDE查看TLB信息。
使用此帮助：[如何：查看类型库信息](http://msdn.microsoft.com/en-us/library/98w057c3%28v=vs.80%29.aspx)

在 IDE：View-> Object Browser，单击“...”编辑自定义组件集，浏览您的 TLB 文件并添加以查看信息。

确认使用的命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-01T23:05:55.833

使用命名空间解决链接器错误：例如：#import "<>" raw_interfaces_only using namespace <>

这将解决问题

# c# - windows phone 可以设置后台运行的时间间隔吗？

> ID：15381442
> 
> 赞同：-1
> 
> 时间：2013-03-13T09:32:32.393
> 
> 标签：c#, windows-phone-7, windows-phone-8, windows-phone

我厌倦了搜索这个问题。每次我搜索时，它也表明

```
Periodic agents typically run every 30 minutes. 
```

`To optimize battery life, periodic agents may be run in alignment with other background processes and therefore the execution time may drift by up to 10 minutes.`

Windows 手机应用程序，如 Skype、Facebook、Whatsapp。这些类型的应用程序在后台运行并每分钟更新一次通知。为什么周期性代理通常每 30 分钟运行一次？那么这些应用程序如何在短时间内更新通知以提醒用户：几分钟？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:53:01.793

这些应用程序使用推送通知来更新磁贴。这是从 Web 服务器发送到手机的消息，WP7/8 操作系统无需在后台运行应用程序即可处理该消息。

# android - Android弹出窗口不会关闭

> ID：15381444
> 
> 赞同：1
> 
> 时间：2013-03-13T09:32:36.280
> 
> 标签：android, button, android-ui

我正在尝试在我的应用程序中实现一个弹出窗口，但它不会关闭。当我单击加号按钮时，应该打开弹出窗口，这很有效。但是，当我单击弹出布局中的取消按钮时，它应该关闭，但它没有。为什么？

弹出布局（tempo_popup.xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="number" >

        <requestFocus />
    </EditText>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:orientation="vertical"
            android:layout_weight="1" >

            <Button
                android:id="@+id/confirmtempo"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="@string/Confirm" />

        </LinearLayout>
        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:layout_weight="1" >

            <Button
                android:id="@+id/canceltempo"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="@string/Cancel" />
         </LinearLayout>
    </LinearLayout>
</LinearLayout> 
```

Java代码：

```
 public class MetronomeActivity extends Activity{
      @Override
      public void onCreate(Bundle savedInstanceState) {
           super.onCreate(savedInstanceState);
           setContentView(R.layout.activity_metronome);
           final Button plus = (Button) findViewById(R.id.tempop);
           final Button minus = (Button) findViewById(R.id.tempom);
           final Button confirm_tempo = (Button) findViewById(R.id.confirmtempo);

           plus.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                     final LayoutInflater inflater = (LayoutInflater) getBaseContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                     View pop = inflater.inflate(R.layout.tempo_popup, null, false); 
                     final PopupWindow pw = new PopupWindow(
                     inflater.inflate(R.layout.tempo_popup, null, false), 
                                      250, 150, true);

                     // The code below assumes that the root container has an id called 'main'
                     pw.showAtLocation(plus, Gravity.CENTER, 0, 0);
                     Button cancel_tempo = (Button) pop.findViewById(R.id.canceltempo);

                     cancel_tempo.setOnClickListener( new View.OnClickListener() {
                                         @Override
                                         public void onClick(View v) {
                                              Log.i("Begin1", "POPUP CANCEL");
                                              pw.dismiss();
                                         }
                     });
                }
           });
      }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:12:44.243

该死的！替换单行代码，它会像魅力一样工作。

反而：

```
PopupWindow popUpWindow = new PopupWindow(inflater.inflate(R.layout.tempo_popup, null, false),250, 150, true); 
```

利用：

```
View view = inflater.inflate(R.layout.tempo_popup, null, false);
PopupWindow popUpWindow = new PopupWindow(view, 250, 150,  true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:36:32.097

弹出取消日志是否被打印？否则，这可能会有所帮助：

[Android弹出窗口解除](https://stackoverflow.com/questions/3121232/android-popup-window-dismissal)

# android - 在 Android 中调用自定义 View 的 onDraw() 方法

> ID：15381448
> 
> 赞同：14
> 
> 时间：2013-03-13T09:32:47.460
> 
> 标签：android, android-custom-view

我为日历创建了一个 CustomView。我有一个 onDraw 方法来绘制日历中的文本。当我单击它时，我想更改当天文本的颜色。我怎样才能实现它？

日历视图.java：

```
package com.example.calendar_module;

import java.util.Calendar;

import android.app.ActionBar.LayoutParams;
import android.content.Context;
import android.content.res.Resources;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Rect;
import android.graphics.drawable.Drawable;
import android.util.AttributeSet;
import android.util.MonthDisplayHelper;
import android.view.MotionEvent;
import android.widget.ImageView;

public class CalendarView extends ImageView {

private static int WEEK_TOP_MARGIN = 0;
private static int WEEK_LEFT_MARGIN = 05;
private static int CELL_WIDTH = 20;
private static int CELL_HEIGH = 20;
private static int CELL_MARGIN_TOP = 05;
private static int CELL_MARGIN_LEFT = 29;
private static float CELL_TEXT_SIZE;
private static int CALENDAR_WIDTH;
private static int CALENDAR_HEIGHT;

private static final String TAG = "CalendarView"; 
private String[] mDayString = {"Sun","Mon","Tue","Wed","Thu","Fri","Sat"};
private Calendar mRightNow = null;
private Drawable mWeekTitle = null;
private Cell mToday = null;
private Cell[][] mCells = new Cell[6][7];
private Cell[] mDayCells = new Cell[7];
private OnCellTouchListener mOnCellTouchListener = null;
MonthDisplayHelper mHelper;
Drawable mDecoration = null;

public interface OnCellTouchListener {
    public void onTouch(Cell cell);
}

public CalendarView(Context context) {
    this(context, null);
}

public CalendarView(Context context, AttributeSet attrs) {
    this(context, attrs, 0);
}

public CalendarView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    mDecoration = context.getResources().getDrawable(R.drawable.typeb_calendar_today);      
    initCalendarView();
}

private void initCalendarView() {

    mRightNow = Calendar.getInstance();
    // prepare static vars

    Resources res = getResources();
    WEEK_TOP_MARGIN  = (int) res.getDimension(R.dimen.week_top_margin);
    WEEK_LEFT_MARGIN = (int) res.getDimension(R.dimen.week_left_margin);

    CELL_WIDTH = (int) res.getDimension(R.dimen.cell_width);
    CELL_HEIGH = (int) res.getDimension(R.dimen.cell_heigh);
    CELL_MARGIN_TOP = (int) res.getDimension(R.dimen.cell_margin_top);
    CELL_MARGIN_LEFT = (int) res.getDimension(R.dimen.cell_margin_left);
   //       CALENDAR_HEIGHT = 700;
  //        CALENDAR_WIDTH = 700;
  //        
    CALENDAR_HEIGHT = (int) res.getDimension(R.dimen.calendar_height);
    CALENDAR_WIDTH = (int) res.getDimension(R.dimen.calendar_width);

    System.out.println("Width and Hight :"+CALENDAR_WIDTH+" "+CALENDAR_HEIGHT);
    System.out.println("Dimen Width and Height : "+R.dimen.calendar_width+" "+R.dimen.calendar_height);

    CELL_TEXT_SIZE = res.getDimension(R.dimen.cell_text_size);
    // set background
  //        setImageResource(R.drawable.background);
    mWeekTitle = res.getDrawable(R.drawable.calendar_week);

    mHelper = new MonthDisplayHelper(mRightNow.get(Calendar.YEAR), mRightNow.get(Calendar.MONTH));

}

private void initCells() {

    class _calendar {
        public int day;
        public boolean thisMonth;
        public _calendar(int d, boolean b) {
            day = d;
            thisMonth = b;
        }
        public _calendar(int d) {
            this(d, false);
        }
    };
    _calendar tmp[][] = new _calendar[6][7];

    for(int i=0; i<tmp.length; i++) {
        int n[] = mHelper.getDigitsForRow(i);
        for(int d=0; d<n.length; d++) {
            if(mHelper.isWithinCurrentMonth(i,d))
                tmp[i][d] = new _calendar(n[d], true);
            else
                tmp[i][d] = new _calendar(n[d]);

        }
    }

    Calendar today = Calendar.getInstance();
    int thisDay = 0;
    mToday = null;
    if(mHelper.getYear()==today.get(Calendar.YEAR) && mHelper.getMonth()==today.get(Calendar.MONTH)) {
        thisDay = today.get(Calendar.DAY_OF_MONTH);
    }

    // build cells
    Rect Bound = new Rect(CELL_MARGIN_LEFT, CELL_MARGIN_TOP, CELL_WIDTH+CELL_MARGIN_LEFT, CELL_HEIGH+CELL_MARGIN_TOP);
   //       for( int i=0 ; i < 7 ; i++ )
   //       {
   //           
    //          mDayCells[i] = new Cell(mDayString[i],new Rect(Bound),CELL_TEXT_SIZE);
  //            Bound.offset(CELL_WIDTH, 0);
 //         
 //     }
 //     
 //     Bound.offset(0, CELL_HEIGH);      // move to next row and first column
 //     Bound.left = CELL_MARGIN_LEFT;
 //     Bound.right = CELL_MARGIN_LEFT+CELL_WIDTH;
 //     

    for(int week=0; week<mCells.length; week++) {
        for(int day=0; day<mCells[week].length; day++) 
        {

            if(tmp[week][day].thisMonth) {
                if(day==0 || day==6 )
                    mCells[week][day] = new RedCell(tmp[week][day].day, new Rect(Bound), CELL_TEXT_SIZE);
                else 
                    mCells[week][day] = new Cell(tmp[week][day].day, new Rect(Bound), CELL_TEXT_SIZE);
            } else {

                mCells[week][day] = new GrayCell(tmp[week][day].day, new Rect(Bound), CELL_TEXT_SIZE);
            }

            Bound.offset(CELL_WIDTH, 0); // move to next column 

            // get today
            if(tmp[week][day].day==thisDay && tmp[week][day].thisMonth) {
                mToday = mCells[week][day];
                mDecoration.setBounds(mToday.getBound());
            }
        }

        Bound.offset(0, CELL_HEIGH); // move to next row and first column
        Bound.left = CELL_MARGIN_LEFT;
        Bound.right = CELL_MARGIN_LEFT+CELL_WIDTH;

    }       
}

@Override
public void onLayout(boolean changed, int left, int top, int right, int bottom) {
  //        Rect re = getDrawable().getBounds();
  //        WEEK_LEFT_MARGIN = CELL_MARGIN_LEFT = (right-left - re.width()) / 2;
  //        mWeekTitle.setBounds(WEEK_LEFT_MARGIN, WEEK_TOP_MARGIN, WEEK_LEFT_MARGIN+mWeekTitle.getMinimumWidth(), WEEK_TOP_MARGIN+mWeekTitle.getMinimumHeight());

    initCells();
    super.onLayout(changed, left, top, right, bottom);
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    System.out.println("Width : "+CALENDAR_WIDTH);
    System.out.println("Height : "+CALENDAR_HEIGHT);
    setMeasuredDimension(CALENDAR_WIDTH, CALENDAR_HEIGHT);
  //        setMeasuredDimension(100,200);
}

public void setTimeInMillis(long milliseconds) {
    mRightNow.setTimeInMillis(milliseconds);
    initCells();
    this.invalidate();
}

public int getYear() {
    return mHelper.getYear();
}

public int getMonth() {
    return mHelper.getMonth();
}

public void nextMonth() {
    mHelper.nextMonth();
    initCells();
    invalidate();
}

public void previousMonth() {
    mHelper.previousMonth();
    initCells();
    invalidate();
}

public boolean firstDay(int day) {
    return day==1;
}

public boolean lastDay(int day) {
    return mHelper.getNumberOfDaysInMonth()==day;
}

public void goToday() {
    Calendar cal = Calendar.getInstance();
    mHelper = new MonthDisplayHelper(cal.get(Calendar.YEAR), cal.get(Calendar.MONTH));
    initCells();
    invalidate();
}

public Calendar getDate() {
    return mRightNow;
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    if(mOnCellTouchListener!=null){
        for(Cell[] week : mCells) {
            for(Cell day : week) {
                if(day.hitTest((int)event.getX(), (int)event.getY())) {
                    mOnCellTouchListener.onTouch(day);
                }                       
            }
        }
    }
    return super.onTouchEvent(event);
}

public void setOnCellTouchListener(OnCellTouchListener p) {
    mOnCellTouchListener = p;
}

@Override
protected void onDraw(Canvas canvas) {
    // draw background
    super.onDraw(canvas);
    mWeekTitle.draw(canvas);

    // draw cells
    for(Cell[] week : mCells) {
        for(Cell day : week) {
            day.draw(canvas);           
        }
    }

    // draw today
    if(mDecoration!=null && mToday!=null) {
        mDecoration.draw(canvas);
    }
}

public class GrayCell extends Cell {
    public GrayCell(int dayOfMon, Rect rect, float s) {
        super(dayOfMon, rect, s);
        mPaint.setColor(Color.LTGRAY);
    }           
}

private class RedCell extends Cell {

    public RedCell(int dayOfMon, Rect rect, float s) {
        super(dayOfMon, rect, s);
        mPaint.setColor(0xdddd0000);
    }           

}

} 
```

细胞.java：

```
 package com.example.calendar_module;

  import android.graphics.Canvas;
  import android.graphics.Paint;
  import android.graphics.Rect;
  import android.graphics.RectF;
  import android.graphics.drawable.Drawable;
  import android.util.Log;

  public class Cell {
private static final String TAG = "Cell";
protected Rect mBound = null;
protected int mDayOfMonth = 1;  // from 1 to 31
protected Paint mPaint = new Paint(Paint.SUBPIXEL_TEXT_FLAG
        |Paint.ANTI_ALIAS_FLAG);
int dx, dy;
protected String mDayString;
private Cell cell ;

public Cell(int dayOfMon, Rect rect, float textSize, boolean bold) {
    mDayOfMonth = dayOfMon;
    mBound = rect;
    mPaint.setTextSize(textSize);
    mPaint.setColor(Color.BLACK);
    if(bold) mPaint.setFakeBoldText(true);

    dx = (int) mPaint.measureText(String.valueOf(mDayOfMonth)) / 2;
    dy = (int) (-mPaint.ascent() + mPaint.descent()) / 2;
}

public Cell(String day,Rect rect,float textSize,boolean bold)
{
    mDayString = day;
    mBound = rect;
    mPaint.setTextSize(textSize);
    mPaint.setColor(Color.BLACK);
    if(bold) mPaint.setFakeBoldText(true);

    dx = (int) mPaint.measureText(String.valueOf(mDayString)) / 2;
    dy = (int) (-mPaint.ascent() + mPaint.descent()) / 2;

}

public Cell(String day , Rect rect , float textSize , int newColor)
{
    mDayString = day;
    mBound = rect;
    mPaint.setTextSize(textSize);
    mPaint.setColor(newColor);

    dx = (int) mPaint.measureText(String.valueOf(mDayString)) / 2;
    dy = (int) (-mPaint.ascent() + mPaint.descent()) / 2;
}

public Cell(int dayOfMon, Rect rect, float textSize) {
    this(dayOfMon, rect, textSize, false);
}
public Cell(String day,Rect rect,float textSize)
{
    this(day,rect,textSize,false);
}

protected void draw(Canvas canvas) {
    canvas.drawText(String.valueOf(mDayOfMonth), mBound.centerX() - dx, mBound.centerY() + dy, mPaint);
}

public int getDayOfMonth() {
    return mDayOfMonth;
}

public boolean hitTest(int x, int y) {
    return mBound.contains(x, y); 
}

public Rect getBound() {
    return mBound;
}

public String toString() {
    return String.valueOf(mDayOfMonth)+"("+mBound.toString()+")";
}

} 
```

日历活动.java

```
package com.example.calendar_module;

import java.util.GregorianCalendar;

import com.example.calendar_module.CalendarView.OnCellTouchListener;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Color;
import android.graphics.Rect;
import android.os.Bundle;
import android.os.Handler;
import android.text.format.DateUtils;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class CalendarActivity extends Activity{

public static final String MIME_TYPE = "vnd.android.cursor.dir/vnd.example.calendar_module.date";
public static String mClickedDate, mClickedMonth;
CalendarView mView = null;
TextView mHit;
Handler mHandler = new Handler();
private  Button mNextButton;
private Button mPreviousButton;
private TextView mMonthText ;
private int mMonthInt;
private ListView mEventListView;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mView = (CalendarView)findViewById(R.id.calendar);

    mEventListView = (ListView) findViewById(R.id.EventsList);
    mEventListView.setAdapter(new BadgeAdapter(this));

    mView.setOnCellTouchListener(new OnCellTouchListener() {

        @Override
        public void onTouch(Cell cell) {

            TextView mMonthText = (TextView)findViewById(R.id.MonthText);
            mClickedDate = ""+cell.getDayOfMonth();
            mClickedMonth =""+mMonthText.getText();
 //             System.out.println("Clicked date is : "+mClickedDate+" "+mClickedMonth);
 //             startActivity(new Intent(CalendarActivity.this,Event.class));

 //             cell = new Cell(cell.getDayOfMonth(),new Rect(cell.getBound()),Color.MAGENTA);

        }
    });

    mNextButton = (Button) findViewById(R.id.NextMonth);
    mPreviousButton = (Button) findViewById(R.id.PreviousMonth);
    mMonthText = (TextView) findViewById(R.id.MonthText);

    mMonthText.setText(DateUtils.getMonthString(mView.getMonth(), DateUtils.LENGTH_LONG)+", "+mView.getYear());

 //        System.out.println("CurrentMonth is : "+mView.getMonth());

 //        if(getIntent().getAction().equals(Intent.ACTION_PICK))
 //         findViewById(R.id.hint).setVisibility(View.INVISIBLE);
    mNextButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            mView.nextMonth();
            mMonthText.setText(DateUtils.getMonthString(mView.getMonth(), DateUtils.LENGTH_LONG)+", "+mView.getYear());

        }
    });

    mPreviousButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            mView.previousMonth();
            mMonthText.setText(DateUtils.getMonthString(mView.getMonth(), DateUtils.LENGTH_LONG)+", "+mView.getYear());
        }
    });

    System.out.println("Calendar View Height : "+mView.getHeight());

}

private class RedCell extends Cell {

    public RedCell(Cell cell) {
        super(cell.getDayOfMonth(),new Rect(cell.getBound()), R.dimen.cell_text_size);
        mPaint.setColor(Color.RED);

    }           

  }

} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-13T09:42:48.337

`mView.invalidate();`为该视图调用onClick() 方法。这将调用`onDraw()`（最终），然后它将为您的视图运行绘图代码。

# php - IMAP 邮箱标识符

> ID：15381455
> 
> 赞同：1
> 
> 时间：2013-03-13T09:33:12.520
> 
> 标签：php, email, imap, uid

我正在编写一个脚本，通过 IMAP 从电子邮件地址获取所有电子邮件。

目前，我正在获取每个文件夹（邮箱）并从每个文件夹中保存最高（获取的）UID，因此下次同步时我开始以最高 UID+1 获取。但是，如果一个文件夹被删除并且有人创建了一个同名的新文件夹怎么办。UID 仅用于单个文件夹，将被重置。

我似乎找不到任何方法来找到邮箱（文件夹）的任何唯一标识符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:57:33.307

这正是`UIDVALIDITY`它的用途。这是一个标识文件夹名称的化身的“cookie”。`SELECT`它在您创建文件夹时发送给您。您应该保存它，如果它发生变化，您将丢弃您所知道的关于该文件夹的所有信息。

如果需要，请参阅 RFC 3501 了解更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:20:47.263

我建议您存储`mail size`也对应于`uids`. 如果存储在 cient 上的最大 uid 大于服务器返回的最大 uid（文件夹删除情况），请比较 uid 和相应的邮件大小。

从`UID+1`自身获取邮件的想法有很多缺陷......如果通过其他接口（web/pop）或其他客户端从服务器删除了一组邮件怎么办，那么你将如何同步它在 imap 客户端上？？？我假设你会为此调用一个`uid fetch`命令......如果你这样做，那么你可以比较 uid 和邮件大小以进行交叉验证。

为了获得更好的结果，您可以使用`UIDVALIDITY`也的概念。但是你不能太依赖它，因为我看到一些 imap 服务器没有正确使用它。

# php - unseralize + php 提供转换原始值

> ID：15381458
> 
> 赞同：1
> 
> 时间：2013-03-13T09:33:19.743
> 
> 标签：php, arrays, serialization

这是我想要反序列化这个字符串的字符串。

```
$string3 = 'a:3:{i:0;a:2:{s:5:"value";d:4.0999999999999996;s:7:"players";a:2:{i:6;i:6;i:7;i:7;}}i:1;a:2:{s:5:"value";d:10.899999999999999;s:7:"players";a:1:{i:7;i:7;}}i:2;a:2:{s:5:"value";d:1.7763568394002505E-15;s:7:"players";N;}}'; 
```

它给出了以下结果

```
Array
(
[0] => Array
    (
        [value] => 4.1 // this value converted to 4.1 original was see in the string it was 4.0999999999999996
        [players] => Array
            (
                [6] => 6
                [7] => 7
            )

    )

[1] => Array
    (
        [value] => 10.9 // this value converted to 10.9 original was see in the string it was 10.899999999999999
        [players] => Array
            (
                [7] => 7
            )

    )

[2] => Array
    (
        [value] => 1.7763568394003E-15
        [players] => 
    )

) 
```

它将数组值转换为 4.1 和 10.9 等。我希望原始值不转换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:25:18.037

计算机很难精确处理浮点数。无需赘述，PHP 只是为浮点值的最大数量设置了一个值。这是在`precision`配置属性中设置的。它可能设置为 14，因此每个具有 14 个或更多浮点数的浮点数都将被舍入。

因此，您需要做的是增加`precision`php.ini 中的值。或者用`ini_set('precision', 20)`.

这应该够了吧。

# c - GCC编译不同文件夹中的多个文件

> ID：15381460
> 
> 赞同：2
> 
> 时间：2013-03-13T09:33:21.180
> 
> 标签：c, gcc

我正在搜索可以一次编译不同文件夹中的多个文件的 gcc 命令。prg1.c prg1.h 位于 C:\文件夹中。c:/folder/sub 中的 prg2.c 包括“prg1.h”

所以，我需要一次编译 prg1.c 和 prg2.c ......并且需要将生成的 .exe 保存在 c:/folder/sub

我在尝试

```
cd C:\folder
gcc -o ../../sub/prg2.exe  prg1.c ../../sub/prg2.c 
```

但没有得到这样的文件或目录错误

我什至尝试使用完整路径...

有人帮我准确的命令

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:37:04.067

您正在使用 删除 Windows 文件系统的顶部`../../`，也许这就是问题所在？尝试

```
gcc -o sub/prg2.exe  prg1.c sub/prg2.c 
```

# c# - 将项目添加到列表<>

> ID：15381466
> 
> 赞同：3
> 
> 时间：2013-03-13T09:33:38.813
> 
> 标签：c#, .net

显然我在这里遗漏了一些东西，但我看不到

```
List<Item> Items = new List<Item>().Add(new Item() { Code = "12223", ExGroup = 2}); 
```

错误信息是

> 无法将类型隐式转换`void`为`List<>`

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-13T09:35:09.023

使用`object initializer`列表。你不能这样调用`Add`，**因为它返回`void`，而不是它`List`本身**。试试这个：

```
List<Item> Items = new List<Item>
                   {
                       new Item { Code = "12223", ExGroup = 2 }
                   }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T09:34:34.207

您需要在两行上执行此操作：

```
List<Item> Items = new List<Item>();
Items.Add(new Item() { Code = "12223", ExGroup = 2}); 
```

您收到错误的原因是该[`List<T>.Add`](http://msdn.microsoft.com/en-us/library/3wcytfd1.aspx)方法不返回任何内容，并且您`Items`应该被从右侧返回的内容填充。

这是 Add 方法的签名。

```
public void Add(
    T item
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T09:35:45.537

或者像这样

```
 List<Item> Items = new List<Item>{
             new Item() { Code = "12223", ExGroup = 2}
       }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T09:39:33.630

您不能将 Add 与对象初始值设定项一起使用。**List.Add 返回 void**，当您初始化列表时，这是不期望的。改用这个：

```
List<Item> Items = new List<Item>
{
   new Item { Code = "12223", ExGroup = 2 }
}; 
```

或者，如果您仍想使用 Add，那么您可以按照 Habib 的说明将代码分成两行。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T09:41:08.720

如果您想在一行中执行此操作，请使用[Collection Initializer](http://msdn.microsoft.com/en-us/library/vstudio/bb384062.aspx)

如：

```
List<Item> Items = new List<Item> 
     { new Item() { Code = "12223", ExGroup = 2 } }; 
```

# c# - C# 和 OleDbException

> ID：15381470
> 
> 赞同：0
> 
> 时间：2013-03-13T09:33:53.190
> 
> 标签：c#, database

今天我得到了那个错误：

> “没有为一个或多个必需参数提供值。”

我正在制作这个程序 1 个月，但我没有那样的错误，我不知道这是什么意思。你能帮忙吗？这是代码：

PS school_DatabaseDataSet 有名为 Classes 的表。

```
private void button5_Click(object sender, EventArgs e)
{
    classesTableAdapter1.Fill(school_DatabaseDataSet.Classes);
    dataGridView1.DataSource = school_DatabaseDataSet.Classes;
    dataGridView1.Refresh();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:11:50.520

如果`school_DatabaseDataSet`是一个数据集并且`Classes`是它的表，那么

```
classesTableAdapter1.Fill(school_DatabaseDataSet.Tables["Classes"]);
dataGridView1.DataSource  =school_DatabaseDataSet.Tables["Classes"]; 
```

# php - 取消链接功能不适用于超过 1mb 的文件

> ID：15381474
> 
> 赞同：0
> 
> 时间：2013-03-13T09:34:00.320
> 
> 标签：php, file, unlink

有谁知道为什么 unlink 函数可以处理 1mb 以下的文件，但无法处理 1mb 以上的文件？我需要更改 php.ini 中的设置吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:08:33.590

解决了。最后不是unlink函数是php.ini中的memory_limit对imagecreatefromjpeg函数有影响。限制增加，问题解决。

# python - openerp7 使用 XML-RPC 将客户置于公司之下

> ID：15381476
> 
> 赞同：0
> 
> 时间：2013-03-13T09:34:06.427
> 
> 标签：python, xml-rpc, openerp

我正在尝试将客户和公司从另一个数据库导入 OpenERP。我可以同时导入客户和公司，但无法链接它们：这是我尝试使用的代码：

```
 if data:
            for erprow in data:
                #mielöt updatelünk vagy létrehozunk csekoljuk le hogy alá tudjuk e rendelniegy cégnek
                cegargs = [('panda_id', '=', int(csvrow[1])),]
                cegids = sock.execute(dbname, uid, pwd, model, 'search', cegargs)
                cegfields = ['id', 'name', 'child_ids',]
                cegdata = sock.execute(dbname, uid, pwd, 'res.partner', 'read', cegids, cegfields)
                """if cegdata:
                    #childcustomer = str(erprow['id']) + '/' + str(cegdata[0]['id'])
                    child = cegdata[0]['child_ids']
                    if not child:
                        child = False
                    update = True
                    print cegdata[0]['child_ids']
                    if erprow['id'] in child:
                        update = False
                    else:
                        child.append(int(erprow['id']))
                    if update:
                        cegvalues = {}
                        cegvalues['child_ids'] = child
                        results = sock.execute(dbname, uid, pwd, 'res.partner', 'write', cegids, cegvalues)
                    print '-------', cegdata[0]['child_ids']"""
                parent_id = False
                if cegdata:
                    parent_id = [int(cegdata[0]['id']), cegdata[0]['name']]
                # a tömböknek (dictionary pythomban) nevük van....
                values = {}
                #string be convertálom különben mindig külömböző lesz
                """if str(erprow['active']) != str(csvrow[0]):
                    values['active'] = csvrow[0]"""
                # x_panda_id ki hagyva mert az alapján vana keresés...
                if erprow['zip'] != csvrow[11]:
                    values['zip'] = csvrow[11]
                #a country kicsit nezebb mivel Openerpnek van saját táblája országokrol és IDvel müködik.
                if erprow['country'] != country_tomb:   
                    values['country'] = country_id
                    values['country_id'] = country_id
                if erprow['name'] != nev:
                    values['name'] = nev
                if erprow['street'] != csvrow[13]:
                    values['street'] = csvrow[13]
                """if erprow['street2'] != csvrow[6]:
                    values['street2'] = csvrow[6]"""
                if erprow['city'] != csvrow[12]:
                    values['city'] = csvrow[12]
                """if erprow['comment'] != csvrow[8]:
                    values['comment'] = csvrow[8]"""
                if erprow['email'] != csvrow[9]:
                    values['email'] = csvrow[9]
                if erprow['fax'] != csvrow[8]:
                    values['fax'] = csvrow[8]
                if erprow['mobile'] != csvrow[10]:
                    values['mobile'] = csvrow[10]
                if erprow['function'] != csvrow[5]:
                    values['function'] = csvrow[5]
                if erprow['phone'] != telefon:
                    values['phone'] = telefon
                if erprow['parent_id'] != parent_id:
                    erprow['parent_id'] = parent_id
                if cegdata:
                    if erprow['company_id'] != int(cegdata[0]['id']):
                        values['company_id'] = cegdata[0]['id']
                if values: 
                    number += 1
                    results = sock.execute(dbname, uid, pwd, model, 'write', ids, values)
                    print loop, '. ', number , ". results frissités pandából...", parent_id
                else:
                    number += 1
                    print loop, '. ', number , ". sor létezik de nincs frisités.", parent_id

        else:
            #mielöt updatelünk vagy létrehozunk csekoljuk le hogy alá tudjuk e rendelniegy cégnek
            cegargs = [('panda_id', '=', int(csvrow[1])),]
            cegids = sock.execute(dbname, uid, pwd, model, 'search', cegargs)
            cegfields = ['id', 'name',]
            cegdata = sock.execute(dbname, uid, pwd, 'res.partner', 'read', cegids, cegfields)
            parent_id = False
            if cegdata:
                parent_id = [int(cegdata[0]['id']), cegdata[0]['name']]
            number += 1
            print loop, '. ', number, ".Nem létezik - Létrehozzás"
            partner_data = {'name':nev, 'active': True, 'panda_id': csvrow[0], 'zip' : csvrow[11], 'country_id': country_id, 'street': csvrow[13],  'city': csvrow[12], 'email': csvrow[9], 'fax': csvrow[8], 'mobile': csvrow[10], 'function': csvrow[5], 'phone': telefon, 'parent_id': parent_id,}
            partner_id = sock.execute(dbname, uid, pwd, model, 'create', partner_data)
    loop += 1
    print loop, local_number 
```

由于这个脚本是我从命令行而不是 openerp 调度程序运行的，所以它有很多打印。可悲的是，我不知道如何将它们链接为 Company-> child。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:34:42.183

1.  创建公司
2.  搜索创建的公司 ID
3.  创建或编写合作伙伴`{'company_id': company_id}`

# sql - 按最新线程排序

> ID：15381477
> 
> 赞同：0
> 
> 时间：2013-03-13T09:34:06.810
> 
> 标签：sql, tsql, select

我正在尝试做一个复杂的 SQL，我在其中编写所有类别，页面上的类别中有多少线程。现在我也在努力做到这一点，所以我的中继器会根据线程日期时间显示该类别中的最新线程。

这是我的 SQL：

```
SELECT categories.category_name, categories.category_id, 
COUNT(threads.thread_category_id) 
AS 'threadCount' FROM threads 
RIGHT OUTER JOIN categories 
ON categories.category_id = threads.thread_category_id
GROUP BY categories.category_name, categories.category_id 
```

我一直在尝试不同的方法，也问过我的老师。我们似乎无法找到一种方法使这成为可能，在一个 SQL 查询中，在中继器中运行。

基本上：包含每个类别的中继器

类别名称、
类别 ID、类别
中的线程数、
最新线程标题、
最新线程日期时间。

线程标题数据库字段：`threads.thread_title`

线程日期时间数据库字段：`threads.thread_datetime`

将不胜感激任何想法或帮助！

# ajax - 修改 TYPO3 链接解析器自动生成 AJAX 链接

> ID：15381478
> 
> 赞同：1
> 
> 时间：2013-03-13T09:34:07.497
> 
> 标签：ajax, hyperlink, typo3

我希望标题能让我的问题有点清楚。我对这个主题的问题是，经过数周的搜索，我没有找到任何线索，以便在 TYPO3 中编辑此解析器。

（这个“解析器”[我想我应该这么称呼它，请随时纠正我]是一个将后端中每个 ID 生成的链接转换为最终 HTML 页面中发送给客户端的真实链接的那个）

我正在尝试做的事情（以防万一它可能有助于回答问题）：我想修改这个解析器，使其自动创建弹性 AJAX 链接到同一网站上的其他页面，这些页面只会加载那些页面之间的更改，以及当 JS 停用时该链接仍应正常工作。到目前为止，我的问题本身只是关于该解析器的位置，而不是关于编程，但如果有人可能有不同的解决方案，我也很乐意倾听。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:37:27.433

大多数情况下，链接是通过打字链接或通过菜单呈现的。但不要改变核心！重新思考。我猜你需要一个 javascript 函数，它检查页面是否是内部的，并且 onclick 更改请求。

你可以使用

```
page.intTarget = _top 
```

用于设置具有内部链接的目标。但是恕我直言，您应该只使用 JavaScript。

使用硬编码的 html 页面解决这个问题。如果你搞定了，用 TYPO3 就很容易解决了。恕我直言，现在这不是 TYPO3 问题。

# android - Android 聚焦canvas.scale操作后放点困难

> ID：15381482
> 
> 赞同：3
> 
> 时间：2013-03-13T09:34:21.570
> 
> 标签：android, view, bitmap, scaling, gesture

这是我关于stackoverflow的第一个问题，所以请放轻松。

让我给你一点背景：

我创建了一个在视图中操作位图的应用程序（在这种情况下，图像是设施的地图），我使用位图上点的实际 x 和 y 坐标在地图上放置点。我跟踪位图左上角相对于屏幕左上角的偏移，方法是根据手势对图像位置的更改修改此偏移值。这实际上非常适合平移，这使我可以轻松地将屏幕坐标（从长按手势）转换为位图上的实际坐标。有了这个，我在地图上画了一个圆圈，并允许用户创建一个我推送到数据库的“兴趣点”。

处理缩放时会出现问题。我
`canvas.scale(scalefastor ,scalefactor);` 在 onDraw 中用一个简单的缩放。使用此缩放，实际缩放是相对于图像的左上角的，因此缩放缩放并不直观，因为您尝试放大的实际位置非常快地跑出屏幕。但是，以这种方式缩放图像不会影响图像的实际偏移量，因此我的点放置仍然准确。我使用以下简单的数学来完成此操作：

```
bitmapXCoordinate = (event.getX() - xOffset) /scaleFactor; 
```

我想用

```
canvas.scale(scalefactor, scalefactor, gestureFocusX, gestureFocusY); 
```

为了保持缩放对用户直观，但这会对位图的实际矩阵进行转换，因此我的点放置不再起作用。似乎位图上的点现在以某种方式相对于比例的焦点，并且所有放置的点都关闭并趋向于该焦点。我知道我需要考虑矩阵上的这种转换才能正确放置我的点，但显然，它需要一个比我更聪明的人。解决方案可能很简单，但我已经为此工作了好几天试图解释这个新的偏移量，但我无法获得任何真正的进展。对此解决方案的任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T00:40:01.163

我为此苦苦挣扎了一个多星期，尝试了各种解决方案，然后才找到了一些虽然我不完全理解的东西;)，但有工作的好处。您将需要一个捏缩放（或其他）图像视图的工作实现，您可以从中得出当前的比例和平移值。

我认为这个问题的困难在于有两个问题需要解决：1，解码可能缩放和翻译的图像上的点击，以及 2，渲染存储的点击位置。

无论如何，到代码。要注册触摸：

```
private Float[] getNormalizedTouchLocation(MotionEvent event) {
    float xpos = getOffsetX();
    float ypos = getOffsetY();
    float scale = getScaleFactor();

    Drawable drawable = getDrawable();
    Rect image_bounds = drawable.getBounds();

    Matrix matrix = new Matrix(getImageMatrix());

    matrix.postScale(scale, scale, mPivotX, mPivotY);
    matrix.postTranslate(xpos, ypos);

    RectF image_rect = new RectF(image_bounds);

    matrix.mapRect(image_rect);

    float x = ((event.getX() - image_rect.left) / scale);
    float y = ((event.getY() - image_rect.top) / scale);

    return new Float[]{x, y};
} 
```

然后渲染：

```
public void onDraw(Canvas canvas) {
    // Ensure parent leaves the canvas *unscaled* and *untranslated*.
    super.onDraw(canvas);

    float xpos = getOffsetX();
    float ypos = getOffsetY();
    float scale = getScaleFactor();

    canvas.save();

    Matrix matrix = canvas.getMatrix();
    matrix.postScale(scale, scale, mPivotX, mPivotY);
    matrix.postTranslate(xpos, ypos);

    Drawable drawable = getDrawable();
    Rect image_bounds = drawable.getBounds();

    RectF image_rect = new RectF(image_bounds);

    Matrix image_matrix = new Matrix(getImageMatrix());
    image_matrix.postScale(scale, scale, mPivotX, mPivotY);
    image_matrix.postTranslate(xpos, ypos);

    image_matrix.mapRect(image_rect);

    // mPoints is a list of float[2] coordinates.
    for (Float[] coord: mPoints) {

        // Draw a bitmap centered on each touch position.
        float x = (scale * coord[0] + image_rect.left) - mBitmap.getWidth() / 2;
        float y = (scale * coord[1] + image_rect.top) - mBitmap.getHeight() / 2;

        canvas.drawBitmap(mBitmap, x, y, mPaint);
    }

    canvas.restore();
} 
```

希望这对你有用！显然，这里的解决方案仅在相同的屏幕分辨率等下正确渲染在相同渲染大小的图像上注册的点 - 它可能会被修改为存储图像宽度/高度的分数，以用于跨图像/分辨率的解决方案。

# sql-server - 在数据库或应用程序中进行审计

> ID：15381483
> 
> 赞同：2
> 
> 时间：2013-03-13T09:34:22.457
> 
> 标签：sql-server, logging, auditing, cdc

我需要审核企业 Web 应用程序中的修改操作（创建/删除/更新）。然后，用户可能需要查看特定实体（例如 Person）的更改历史来决定是否执行某项操作。

据我所知，它可以通过使用.NET 中的 log4net、nlog 等库来完成，或者可能还有其他我不知道的版本控制专用库。

或者它可以在数据库中完成，例如使用SQL Server 的[更改数据捕获](http://msdn.microsoft.com/en-us/library/bb522489%28v=sql.105%29.aspx)。

使用内置数据库解决方案似乎更有效，但问题是：

将应用程序的业务控制到数据库中，在软件工程方面是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:43:23.547

在我公司的应用程序中，我们在两个地方都登录，但用途不同：

*   应用程序：应用程序保留详细的日志操作以进行调试/调整。
*   数据库：“官方”审计数据保存在数据库中，并作为我们存储过程的一部分添加。位于数据库中使得访问、控制访问变得微不足道，并使实时监控变得容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T21:41:56.763

对于允许我们跟踪每个表的更改的基本审计，包括表中的数据，记录更改的内容、时间和人员，我们使用[AutoAudit](http://autoaudit.codeplex.com/)很幸运。它是一个开源包，可以为数据库中的任何或所有表添加自动审计。

我只在相对较小的项目（少于 20 个表，同时只有少数几个用户）上亲自尝试过，但效果很好。设置几乎不费吹灰之力，开箱即用的功能满足了我们的需求。

2013 年 11 月发布了对 AutoAudit 3.20 版的重大升级，具有以下新增功能：

*   处理最多 5 个 PK 列的表

*   性能提升比 2.00 版快 90%

*   改进的历史数据检索 UDF

*   处理需要 quotename [ ] 的列/表名称

*   存档过程以使实时审计表更小/更快，但在存档 AutoAudit 表中保留旧数据

你可以在[这里](http://autoaudit.codeplex.com/)找到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T09:41:24.127

您使用的是什么版本的 SQL Server？SQL Server 2008 + 原生支持审计，我相信这是 2008 和 2008 R2 中的企业版功能，但 SQL Server 2012 的标准版中提供服务器级审计，只有数据库级审计是企业功能。

有关详细信息，请参阅以下链接：

[SQL Server 审计（数据库引擎）](http://msdn.microsoft.com/en-gb/library/cc280386%28v=sql.110%29.aspx)

变更数据捕获并不是真正为审计而设计的，它旨在用于提供源系统上已更改的数据的摘要，以便可以轻松地被另一个系统使用。

编辑：

因此，如果您需要保留实际更改的数据，那么 CDC 可以做到这一点，但您将无法看到是谁更改了它，因此它不是审计。CDC 和审计的组合可以工作，但设置起来会很复杂。

最简单的方法可能是使用更新、插入和删除触发器来维护历史表，添加审计信息，例如修改发生的时间和执行操作的人员。这也意味着您不必使用 SQL Server 的企业版，因为可以在所有版本上定义触发器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-29T23:21:22.813

是的，我建议在数据库中进行。这个解决方案会更快。就软件工程而言，这是正确的，因为您将使用数据库作为解决方案，但您将创建另一个层（UI）来从数据库中检索信息。

如果您的 SQL Server 不是企业版，您可能需要手动创建触发器，或者购买 apexsql trigger 等帮助工具来帮助您审核该信息。

# knockout.js - 淘汰赛绑定问题

> ID：15381489
> 
> 赞同：0
> 
> 时间：2013-03-13T09:34:38.527
> 
> 标签：knockout.js, viewmodel

我使用映射插件来创建视图模型。这是 Chrome 的观察者输出：

```
viewModel: Object
 Id: function observable() 
 Language: function observable() 
 QuoteListViewModel: Object
 QuoteSelectedViewModel: Object 
```

MVC 模型是：

```
public class QuoteRequestViewModel
{
    public Guid Id { get; set; }
    public LanguageEnum Language { get; set; }   

    public QuoteViewModel QuoteSelectedViewModel { get; set; }
    public QuoteListViewModel QuoteListViewModel { get; set; }
} 
```

QuoteViewModel 是：

```
public class QuoteViewModel
{
    public string ProductName { get; set; }
    public decimal MonthPrice { get; set; }
    public decimal QuarterPrice { get; set; }
    public decimal BiannualPrice { get; set; }
    public decimal YearPrice { get; set; }

    public List<CoverQuoteViewModel> CoverQuotesViewModel { get; set; }
} 
```

QuoteListViewModel 在这里不相关，实际上工作正常。

两个问题：

1) 为什么 QuoteSelectedViewModel 映射为 Object 而不是 Observable 函数？我理解为什么 QuoteListViewModel 是这种情况，因为它是一个数组，但 QuoteSelectedViewModel 不是一个数组。

2) 我无法将我的 DOM 绑定到 QuoteSelectedViewModel。这就是我所做的：

```
viewModel.customizeQuote = function () {
  viewModel.QuoteSelectedViewModel = this;
} 
```

并在那里调用customQuote：

```
<table data-bind="with: QuoteListViewModel">
 <tbody>
 <tr data-bind="foreach: Quotes">
  <td>
    <a class="btn btn-primary" href="#" data-bind="click: $root.customizeQuote">Customize</a>
 </td>
 </tr> 
```

调试时，我可以看到 QuoteSelectedViewModel 包含来自 QuoteListViewModel 数组的正确报价。但是这样做：

```
viewModel.QuoteSelectedViewModel = this; 
```

对我来说似乎不正确。它应该是可观察的，我应该这样做

```
viewModel.QuoteSelectedViewModel( this ); 
```

知道有什么问题吗？

**[编辑]**

QuoteSelectedViewModel 不可观察的事实显然是问题的根源。

我添加了以下代码：

```
viewModel.SelectedQuote = ko.observable(viewModel.QuoteSelectedViewModel); 
```

而在自定义方法中，我这样做：

```
viewModel.SelectedQuote(this); 
```

所以现在，列表是绑定的。那么，当我使用映射插件时，如何从一开始就使 QuoteSelectedViewModel 成为可观察对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:30:10.337

映射插件为最低级别的属性和数组创建 observables。对于嵌套对象，它不会使父对象成为可观察对象。

```
var test = {
   sub: {
       name: "Bob"
   }
}; 
```

在这种情况下，它将成为`name`可观察的，但`sub`不会是可观察的。

一种选择是使用映射选项自定义对象的创建方式，如此[处](http://knockoutjs.com/documentation/plugins-mapping.html#customizing_object_construction_using_create)所述。

# javascript - 在调用 javascript 函数时发送其他元素 ID

> ID：15381490
> 
> 赞同：1
> 
> 时间：2013-03-13T09:34:40.990
> 
> 标签：javascript, jquery, jquery-mobile, element

您好，我正在开发一个 jQuery 移动应用程序，情况如下

```
 <script>
            function showPanel(info) {

                alert(info.id);

            }
        </script>

<div data-role="footer" id="footer_button" onclick="showPanel(this);">
            <h4 style="text-align: center;">Open toolbar</h4>
</div>

<div id="footerhigher1"></div> 
```

现在，在`onclick`我传递的第一个 div 的代码事件中，我`this`从中提取了 first 的 id `div`。现在我想传递第二个是`div`footerhigher1的 Id 我**该**如何处理它。`Id`

 **我在单页中有多个这样的组合

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:36:51.783

试试这个

```
 <script>
        function showPanel(idval) {

            alert($(idval).id);

        }
    </script>

<div data-role="footer" id="footer_button" onclick="showPanel('footerhigher1');">
            <h4 style="text-align: center;">Open toolbar</h4>
</div>

<div id="footerhigher1"></div> 
```

**或者**

* * *

## [JsFiddle 演示](http://jsfiddle.net/cZ4eD/)

像这样修改脚本，它会给你下一个 div 元素

```
 <script>
        function showPanel(idval) {

            alert($(info).next().attr('id'));

        }
    </script> 
```**

# objective-c - Objective-C 中的正则表达式

> ID：15381493
> 
> 赞同：-2
> 
> 时间：2013-03-13T09:34:47.577
> 
> 标签：objective-c, regex

在 Objective-C 中处理正则表达式时正确的语法是什么？

假设我有以下字符串：

```
NSString *string = @"my string"; 
```

和以下正则表达式：

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"(a|b)*"]; 
```

如果我必须将字符串与这个正则表达式进行匹配，那么以下就足够了吗？

```
if(NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"(a|b)*"]) {
  // do something
} 
```

如果字符串与正则表达式匹配，我习惯于 Java`matches`方法已经返回^^`true`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T09:38:59.910

您在该 if 语句中所做的只是检查是否创建了正则表达式。你从来没有*匹配*是反对任何东西。

您缺少该`numberOfMatchesInString:options:error:`方法（或任何其他匹配方法）。它们都可以在[文档](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html "NSRegularExpression 文档")中找到。

您正在寻找的代码将是这样的：

```
NSString *string = @"my string";

NSError *error = NULL;
NSRegularExpression *regex = 
    [NSRegularExpression regularExpressionWithPattern:@"(a|b)*" 
                                              options:0 
                                                error:&error];
// Check error here... (maybe the regex pattern was malformed)

NSUInteger numberOfMatches = [regex numberOfMatchesInString:string 
                                                    options:0 
                                                     range:NSMakeRange(0, [string length])]; // Check full string

if (numberOfMatches > 0) {
    // You have at least one match ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:40:39.540

如何使用正则表达式的快速示例

```
NSString *expression = @"^[a-zA-Z_//s]{0,30}$";
    NSString *newString = @"abc";
    NSError *error = nil;
    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:expression
                                                                           options:NSRegularExpressionCaseInsensitive
                                                                             error:&error];

    NSUInteger numberOfMatches = [regex numberOfMatchesInString:newString
                                                        options:0
                                                          range:NSMakeRange(0, [newString length])];

     if (numberOfMatches == 0)
     {
         NSLog(@"Not Allowed");
     }
     else
     {
         NSLog(@"Allowed");
     } 
```

# ruby-on-rails - 在 ruby on rails 中建模 mvc

> ID：15381495
> 
> 赞同：0
> 
> 时间：2013-03-13T09:34:53.457
> 
> 标签：ruby-on-rails, ruby

我在用 ruby​​ on rails 开发的 projet 工作

我有这条线：

```
 _orig_account     = Account.find_ussd_by_login_and_pass_and_type_and_name(_orgin,_pin,Account::Type::Creova.to_sym,_orgin) 
```

老实说，我不明白这段代码

我有另一个代码：

```
 _resul   = PMClient.new.user_login_ussd(_orgin,_pin) 
```

在这种情况下，user_login_ussd 是模型中的一个函数，专门用于：PMClient

**Account**的源代码是

```
class Account < CreovaBase

  attr :login, true
  attr :admin_login, true
  attr :admin_pass, true
  attr :type
  attr :name, true
  attr :status
  attr :balance, true
  attr :currency
  attr :dob, true
  attr :bank_id, true
  attr :routing, true
  attr :legal_name, true
  attr :bank_name, true
  attr :attribute, true
  attr :linker_id, true

  Status = Enum.new(:Enabled, :Suspended,:Deleted, :Legal_Hold, ['Enabled','Suspended','Deleted','Legal Hold'])

  Type = Enum.new(:Creova, :Bank, :Credit,:rt, ['Creova','Bank','Credit','rt'])

  Banks = Enum.new(:None, :Test1,:Test2 , :Test3, :Test4,
    ['','Test1','Test2','Test3','Test4'])

  def initialize(params=nil)
    super
  end

  def type=(val)
    val.blank? ? @type = nil : @type = val.to_sym
  end

  def status=(val)
    val.blank? ? @status = nil : @status = val.to_sym 
  end

  def currency=(val)
    val.blank? ? @currency = nil : @currency = val.to_sym
  end

  # should check that the account number either:
  # a) exists in the system
  # b) is a valid mobile number
  # c) ?? is a valid email address ??
  # returns [valid,message]
  def self.is_valid_account?(name, purpose=:send)
    #STUB
    return true
  end

  def formatted_balance(currency = :tnd)
    curr = Currency.get_currency(currency) rescue Currency.get_currency(:tnd)
    curr.display(balance.to_i)  
  end

  def formal_name(currency=:tnd)
    curr = Currency.get_currency(currency) rescue Currency.get_currency(:tnd)
    curr.formal_name
  end

  def save!

    #pmac = CreovaBase._get_admin()

    if @new_record
      # create_account will raise an exception if it cannot be created
      vars = self.instance_variables.map() { |v| v.sub('@','') unless ['@errors','@new_record'].include?(v) }.compact 
      params = {}
      vars.each() do |v|
        if self.send(v).is_a?(Enum::Member)
          params[v] = self.send(v).to_sym
        else
          params[v] = self.send(v)
        end
      end
      if PMClient.new.create_account(params)
        @new_record = false
      else
        raise 'account save failed'
      end
    else
      PMClient.new.update_account(admin_login,admin_pass,type,name,status)
    end
  end

  def save
    save!
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:49:55.487

我假设您的问题是“这段代码有什么作用？” （您可能需要在标题和问题文本中进行精确说明）。

```
 _orig_account     = Account.find_ussd_by_login_and_pass_and_type_and_name(_orgin,_pin,Account::Type::Creova.to_sym,_orgin) 
```

没有任何其他信息，我想：

*   这是一个查找器方法，用于从数据库中搜索并返回 Account。[将finder 查询](http://guides.rubyonrails.org/active_record_querying.html)作为模型上的类方法在Rails 中是非常标准的，许多都是“开箱即用”的。
*   参数匹配各种“and”，origin 是登录名和名称（在这种情况下两者可能相同），然后是密码和类型（作为[Symbol](http://www.troubleshooters.com/codecorn/ruby/symbols.htm#_What_can_symbols_do_for_you)给出，另一种 Ruby 常见做法）。

第二部分：

```
_resul   = PMClient.new.user_login_ussd(_orgin,_pin) 
```

只是创建一个 PMClient 对象 (PMClient.new)，紧接着对新创建的对象 (".user_login_ussd") 进行方法调用，并提供两个参数。

希望这可以帮助。

# java - Highstock 图表未显示正确日期且未按日期缩放

> ID：15381497
> 
> 赞同：0
> 
> 时间：2013-03-13T09:34:56.507
> 
> 标签：java, php, mysql, highcharts, highstock

我已经创建了我试图使用我的数据创建的图表的 JSFiddle。

我已经成功地从 mySQL 导出了我的数据，并且 unix 时间戳看起来是正确的。第一个数据始于 2004 年 1 月 1 日，最后一个数据是昨天（2013 年 3 月 12 日）。但是，该图表仅显示了 1 月 13 日至 16 日以及我不需要的时间。我需要它来显示整个数据范围，即 IE 2004 - 2013。按日期缩放似乎也不起作用？

我的 JSFiddle 链接是：

[http://jsfiddle.net/petenaylor/rJDRB/1/](http://jsfiddle.net/petenaylor/rJDRB/1/)

```
 <script type="text/javascript">

(function($){ // encapsulate jQuery

$(function() {
var seriesOptions = [],
    yAxisOptions = [],
    seriesCounter = 0,
    names = ['Electric', 'Oil', 'Gas'],
    colors = Highcharts.getOptions().colors;

$.each(names, function(i, name) {

    $(function() {

$.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-c.json&callback=?', function(data) {
    // Create the chart
    window.chart = new Highcharts.StockChart({
        chart : {
            renderTo : 'container'
        },

        rangeSelector : {
            selected : 1
        },

        title : {
            text : 'Energy Prices'
        },

        series : [{
            name : 'Electric',

            <?php 
            $result = mysql_query (" SELECT * FROM energyprices ORDER BY id ASC") or die (mysql_error());
            while ($row = mysql_fetch_array($result)) {
            extract($row);
            $date = strtotime($row['pDate']); // convert from Unix timestamp to JavaScript time
            $data1[] = "[$date, $electric]";
            }
            ?>

            data: [<?php echo join($data1, ',') ?>],
            tooltip: {
                valueDecimals: 2
            }
        },{
            name : 'Oil',

            <?php 
            $result = mysql_query (" SELECT * FROM energyprices ORDER BY id ASC") or die (mysql_error());
            while ($row = mysql_fetch_array($result)) {
            extract($row);
            $date = strtotime($row['pDate']); // convert from Unix timestamp to JavaScript time
            $data2[] = "[$date, $oil]";
            }
            ?>

            data: [<?php echo join($data2, ',') ?>],
            tooltip: {
                valueDecimals: 2
            }
        },{
            name : 'Gas',

            <?php 
            $result = mysql_query (" SELECT * FROM energyprices ORDER BY id ASC") or die (mysql_error());
            while ($row = mysql_fetch_array($result)) {
            extract($row);
            $date = strtotime($row['pDate']); // convert from Unix timestamp to JavaScript time
            $data3[] = "[$date, $gas]";
            }
            ?>

            data: [<?php echo join($data3, ',') ?>],
            tooltip: {
                valueDecimals: 2
            }
        }]
    });
});

 });

});

// create the chart when all data is loaded
function createChart() {

    chart = new Highcharts.StockChart({
        chart: {
            renderTo: 'container'
        },

        rangeSelector: {
            selected: 4
        },

        yAxis: {
            labels: {
                formatter: function() {
                    return (this.value > 0 ? '+' : '') + this.value + '%';
                }
            },
            plotLines: [{
                value: 0,
                width: 2,
                color: 'silver'
            }]
        },

        plotOptions: {
            series: {
                compare: 'percent'
            }
        },

        tooltip: {
            pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.change}%)<br/>',
            valueDecimals: 2
        },

        series: seriesOptions
    });
}

});
})(jQuery); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:03:30.977

您的数据 x 应该乘以 1000，因为您需要 JS 时间戳，并且还按 x 升序排序。

# ios - presentViewController:animated:completion 中的状态栏影响

> ID：15381501
> 
> 赞同：0
> 
> 时间：2013-03-13T09:35:05.200
> 
> 标签：ios, presentmodalviewcontroller

我有一个问题，我真的不知道它是为什么引起的。

在我的应用程序中，我有一个主视图控制器，其框架为 (0, 0, 320, 480) (iphone4)。在这个控制器中，我只是在事件发生时以模态方式呈现另一个视图控制器。然而，虽然视图控制器实际上占据了整个屏幕，但这个视图控制器的视图框架是 (0, 20, 320, 480)。

问题似乎出在使 20 出现的状态栏中。但是，主视图控制器还可以让您看到该状态栏，并且不会影响其框架。如果我将状态栏设置为隐藏在Info.plist中，这里不会出现问题，但我不想这样做。你知道如何解决这个问题吗？

再见，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:00:50.357

您必须为您的第二个视图控制器视图和子视图设置适当的自动调整大小，以便即使框架发生变化，它们也将保持在原位。或者，正如@Rahul 建议的那样，将视图的高度保持在 460。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:40:26.013

将帧保持为 (0, 20, 320, 460)。如果你想在屏幕上显示状态栏。由于默认屏幕大小为 480，但状态栏为 460。因此修改您的框架并应用。

# detection - 停止或检测 dll 注入加载库

> ID：15381506
> 
> 赞同：1
> 
> 时间：2013-03-13T09:35:13.557
> 
> 标签：detection, dll-injection, createremotethread

我想检测 dll 注入器。下面的代码作为 dll 注入器工作。我需要你在 c# 源代码中的帮助，它可以帮助我检测然后我将关闭我的应用程序。我在 google.com 中搜索了很多但很累得到解决方案。请帮助并给我 C# 中的源代码

```
public partial class Form1 : Form
{
    [DllImport("kernel32")]
    public static extern IntPtr CreateRemoteThread(
      IntPtr hProcess,
      IntPtr lpThreadAttributes,
      uint dwStackSize,
      UIntPtr lpStartAddress, // raw Pointer into remote process  
      IntPtr lpParameter,
      uint dwCreationFlags,
      out IntPtr lpThreadId
    );

    [DllImport("kernel32.dll")]
    public static extern IntPtr OpenProcess(
        UInt32 dwDesiredAccess,
        Int32 bInheritHandle,
        Int32 dwProcessId
        );

    [DllImport("kernel32.dll")]
    public static extern Int32 CloseHandle(
    IntPtr hObject
    );

    [DllImport("kernel32.dll", SetLastError = true, ExactSpelling = true)]
    static extern bool VirtualFreeEx(
        IntPtr hProcess,
        IntPtr lpAddress,
        UIntPtr dwSize,
        uint dwFreeType
        );

    [DllImport("kernel32.dll", CharSet = CharSet.Ansi, ExactSpelling = true)]
    public static extern UIntPtr GetProcAddress(
        IntPtr hModule,
        string procName
        );

    [DllImport("kernel32.dll", SetLastError = true, ExactSpelling = true)]
    static extern IntPtr VirtualAllocEx(
        IntPtr hProcess,
        IntPtr lpAddress,
        uint dwSize,
        uint flAllocationType,
        uint flProtect
        );

    [DllImport("kernel32.dll")]
    static extern bool WriteProcessMemory(
        IntPtr hProcess,
        IntPtr lpBaseAddress,
        string lpBuffer,
        UIntPtr nSize,
        out IntPtr lpNumberOfBytesWritten
    );

    [DllImport("kernel32.dll", CharSet = CharSet.Auto)]
    public static extern IntPtr GetModuleHandle(
        string lpModuleName
        );

    [DllImport("kernel32", SetLastError = true, ExactSpelling = true)]
    internal static extern Int32 WaitForSingleObject(
        IntPtr handle,
        Int32 milliseconds
        );

    public Int32 GetProcessId(String proc)
    {
        Process[] ProcList;
        ProcList = Process.GetProcessesByName(proc);
        return ProcList[0].Id;
    }
    public void InjectDLL(IntPtr hProcess, String strDLLName, Process proc)
    {
        IntPtr bytesout;

        // Length of string containing the DLL file name +1 byte padding
        Int32 LenWrite = strDLLName.Length + 1;
        // Allocate memory within the virtual address space of the target process
        IntPtr AllocMem = (IntPtr)VirtualAllocEx(hProcess, (IntPtr)null, (uint)LenWrite, 0x1000, 0x40); //allocation pour WriteProcessMemory

        // Write DLL file name to allocated memory in target process
        WriteProcessMemory(hProcess, AllocMem, strDLLName, (UIntPtr)LenWrite, out bytesout);
        // Function pointer "Injector"
        UIntPtr Injector = (UIntPtr)GetProcAddress(GetModuleHandle("kernel32.dll"), "LoadLibraryA");

        if (Injector == null)
        {
            Console.WriteLine(" Injector Error! \n ");
            // return failed
            return;
        }

        // Create thread in target process, and store handle in hThread
        IntPtr hThread = (IntPtr)CreateRemoteThread(hProcess, (IntPtr)null, 0, Injector, AllocMem, 0, out bytesout);
        // Make sure thread handle is valid
        if (hThread == null)
        {
            //incorrect thread handle ... return failed
            Console.WriteLine(" hThread [ 1 ] Error! \n ");
            return;
        }
        // Time-out is 10 seconds...
        int Result = WaitForSingleObject(hThread, 10 * 1000);
        // Check whether thread timed out...
        if (Result == 0x00000080L || Result == 0x00000102L || Result == 0xFFFFFFFF)
        {
            /* Thread timed out... */
            Console.WriteLine(" hThread [ 2 ] Error! \n ");
            // Make sure thread handle is valid before closing... prevents crashes.
            if (hThread != null)
            {
                //Close thread in target process
                CloseHandle(hThread);
            }
            return;
        }
        // Sleep thread for 1 second
        Thread.Sleep(1000);
        // Clear up allocated space ( Allocmem )
        VirtualFreeEx(hProcess, AllocMem, (UIntPtr)0, 0x8000);
        // Make sure thread handle is valid before closing... prevents crashes.
        if (hThread != null)
        {
            //Close thread in target process
            CloseHandle(hThread);
        }
        // return succeeded
        return;
    }
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }

    private void button1_Click(object sender, EventArgs e)
    {
        String strDLLName = @"C:\Users\muhammad.qasim\Desktop\qasim\testdllinject\testdllinject\bin\Debug\testdllinject.dll";
        String strProcessName = "notepad";

        Int32 ProcID = GetProcessId(strProcessName);
        Process proc = Process.GetProcessById(ProcID);

        if (ProcID >= 0)
        {
            IntPtr hProcess = (IntPtr)OpenProcess(0x1F0FFF, 1, ProcID);
            if (hProcess == null)
            {
                MessageBox.Show("OpenProcess() Failed!");
                return;
            }
            else
            {
                InjectDLL(hProcess, strDLLName, proc);
                MessageBox.Show("injected");

            }
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T02:53:12.013

[实现 DLL 注入（Hooking）的场景](http://www.google.fr/#hl=fr&sclient=psy-ab&q=API-hooking-revealed&oq=API-hooking-revealed&gs_l=hp.12..0i30l3.452979.452979.1.454365.1.1.0.0.0.0.744.744.6-1.1.0...0.0...1c.1.11.psy-ab.YYLELmRIHoA&pbx=1&bav=on.2,or.r_qf.&bvm=bv.45645796,d.d2k&fp=ef812d476990c067&biw=1241&bih=545)有很多，您需要了解更多关于每个方法背后的工作原理并对其进行保护，最常见的是使用 CreateRemoteThread() API 函数，例如您可以注入您的安全每个正在运行的进程上的 DLL 并挂钩/重定向/拒绝对 CreateRemoteThread() 的任何调用或任何“危险”API 调用。

PS：由于您正在编写 C# 代码，您可能对[EasyHook](http://easyhook.codeplex.com/)感兴趣。

但是请记住（如果您真的想制作安全软件）：

> 用户模式挂钩永远不会成为以任何安全方式应用额外安全检查的选项。如果你只想“沙箱化”一个专用进程，你很了解，而进程实际上并不了解 EasyHook，这可能会成功！但永远不要尝试编写任何基于用户模式挂钩的安全软件。它不会起作用的，我向你保证……</p>

**更新** EasyHook 移至 github：[https ://github.com/EasyHook/EasyHook](https://github.com/EasyHook/EasyHook)

# sql - SQL查询根据值获取特定行

> ID：15381509
> 
> 赞同：0
> 
> 时间：2013-03-13T09:35:23.620
> 
> 标签：sql

鉴于此表：

```
SubstationNo SubstationType
----------------------------
     1411             1566
     1411             135
     1422             1411
     1433             1433 
```

如何从两个不同的列中获取不同的值作为由`|`一行中的符号分隔的值

需要的结果是

```
1411|1422|1433|1566|135|1433 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:44:43.607

这将使用联合进行子选择以*混合*列。不确定您的 RDBMS 上是否可用。

```
SELECT DISTINCT * FROM
(
  SELECT SubstationNo FROM table
  UNION
  SELECT SubstationType FROM table
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:49:14.633

`GROUP_CONCAT()`函数将所有行连接为单个字符串。此处的查询将给出两列中的所有唯一值

```
SELECT  GROUP_CONCAT(
    select distinct * from (SELECT column1
    FROM tablename
    UNION
    SELECT column2
    FROM tablename) SEPARATOR '|') AS rowValue
FROM  tablename 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T09:52:00.353

> 如果您正在使用`SQL Server`，那么您可以这样做：

```
;WITH CTE
AS
(
  SELECT SubstationNo AS COL FROM Table1
  UNION
  SELECT SubstationType AS COL FROM Table1
)

SELECT DISTINCT 
STUFF((
     SELECT '|'+ CAST(COL AS VARCHAR(50)) 
     FROM CTE
     FOR XML PATH ('')),1,1,'')
FROM TABLE1 
```

[SQL 小提琴演示](http://www.sqlfiddle.com/#!3/110a9/18)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T09:56:03.810

如果您使用 MySQL，您可以使用 GROUP_CONCAT()，但比 Ajo Koshy 的方法更简单。

每列一个 GROUP_CONCAT，然后通过 CONCAT() 将它们放在一起

```
SELECT 
CONCAT(GROUP_CONCAT(DISTINCT column1 SEPARATOR '|'), '|', GROUP_CONCAT(DISTINCT column2 SEPARATOR '|'))
FROM yourTable 
```

这是[GROUP_CONCAT() 的手动条目。](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T10:17:10.780

如果您正在尝试这些东西，请`SQL SERVER`尝试如下所示..它会对您有所帮助..

```
SELECT DISTINCT 
STUFF((
     SELECT '|'+ CAST(SubStation AS VARCHAR(50))
     FROM (SELECT DISTINCT SubstationNo SubStation
 FROM TableName
 UNION
 SELECT DISTINCT SubstationType as SubStation
 FROM TableName) res
     FOR XML PATH ('')),1,1,'') as SubStation
FROM TableName 
```

# c - 如何在 Linux 中更改特定应用程序的音量

> ID：15381519
> 
> 赞同：-2
> 
> 时间：2013-03-13T09:35:44.377
> 
> 标签：c, linux, opensuse, alsa, pulseaudio

我想使用我的 c 代码在 Linux 中调整特定应用程序的音量（不是整个系统音量）。

请建议我们如何在 Linux 中做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:55:17.470

首先，您需要知道您的桌面使用的是什么音频系统。

如果是 PulseAudio（最近很流行），那么可以在这里找到一些 API 文档：

[http://freedesktop.org/software/pulseaudio/doxygen/](http://freedesktop.org/software/pulseaudio/doxygen/)

我不完全确定这是否是满足您需求的正确 API（控制*其他*应用程序），但这是一个起点，我相信进一步的冲浪/谷歌搜索会让您到达那里。

# php - 如果没有价格，PHP 添加符号

> ID：15381521
> 
> 赞同：0
> 
> 时间：2013-03-13T09:35:47.440
> 
> 标签：php, magento-1.7

有两种不同数量和价格的产品

```
 simple product -1 :         qty      price
                                 2        150
                                 3        145
                                 5        130
                                 10      100

    simple product -2 :         qty      price
                                 2        195
                                 5        175
                                 9        170 
```

我想以以下格式显示数量和价格：

```
qty : 2          3          5       9         10

     $150       $145       $130      -        $100

     $195         -        $175     $170       - 
```

下面是显示价格和数量的代码

```
/*
$_tResult = [2, 3, 5, 9, 2, 5, 10]
*/

     /*
$_tierPrice value

    array(10) {
      ["price_id"] => string(2) "18"
      ["website_id"] => string(1) "0"
      ["all_groups"] => string(1) "1"
      ["cust_group"] => int(32000)
      ["price"] => string(8) "150.0000"
      ["price_qty"] => float(2)
      ["website_price"] => string(8) "150.0000"
      ["formated_price"] => string(34) "150.00"
      ["savePercent"] => float(4)
      ["formated_price_incl_tax"] => string(34) "150.00"
    }

    array(10) {
      ["price_id"] => string(2) "65"
      ["website_id"] => string(1) "0"
      ["all_groups"] => string(1) "1"
      ["cust_group"] => int(32000)
      ["price"] => string(8) "120.0000"
      ["price_qty"] => float(3)
      ["website_price"] => string(8) "120.0000"
      ["formated_price"] => string(34) "120.00"
      ["savePercent"] => float(23)
      ["formated_price_incl_tax"] => string(34) "120.00"
    }

    array(10) {
      ["price_id"] => string(2) "61"
      ["website_id"] => string(1) "0"
      ["all_groups"] => string(1) "1"
      ["cust_group"] => int(32000)
      ["price"] => string(8) "145.0000"
      ["price_qty"] => float(5)
      ["website_price"] => string(8) "145.0000"
      ["formated_price"] => int(5) "145.00"
      ["savePercent"] => float(7)
      ["formated_price_incl_tax"] => string(34) "145.00"
    }

    array(10) {
      ["price_id"] => string(2) "62"
      ["website_id"] => string(1) "0"
      ["all_groups"] => string(1) "1"
      ["cust_group"] => int(32000)
      ["price"] => string(8) "130.0000"
      ["price_qty"] => float(9)
      ["website_price"] => string(8) "130.0000"
      ["formated_price"] => int(5) "130.00"
      ["savePercent"] => float(17)
      ["formated_price_incl_tax"] => string(34) "130.00"
    }

    array(10) {
      ["price_id"] => string(2) "47"
      ["website_id"] => string(1) "0"
      ["all_groups"] => string(1) "1"
      ["cust_group"] => int(32000)
      ["price"] => string(8) "190.0000"
      ["price_qty"] => float(2)
      ["website_price"] => string(8) "190.0000"
      ["formated_price"] => int(5) "190.00"
      ["savePercent"] => float(5)
      ["formated_price_incl_tax"] => string(34) "190.00"
    }

    array(10) {
      ["price_id"] => string(2) "63"
      ["website_id"] => string(1) "0"
      ["all_groups"] => string(1) "1"
      ["cust_group"] => int(32000)
      ["price"] => string(8) "175.0000"
      ["price_qty"] => float(5)
      ["website_price"] => string(8) "175.0000"
      ["formated_price"] => int(5) "175.00"
      ["savePercent"] => float(13)
      ["formated_price_incl_tax"] => string(34) "175.00"
    }

    array(10) {
      ["price_id"] => string(2) "64"
      ["website_id"] => string(1) "0"
      ["all_groups"] => string(1) "1"
      ["cust_group"] => int(32000)
      ["price"] => string(8) "195.0000"
      ["price_qty"] => float(9)
      ["website_price"] => string(8) "195.0000"
      ["formated_price"] => int(5) "195.00"
      ["savePercent"] => float(3)
      ["formated_price_incl_tax"] => string(34) "195.00"
    }

    array(10) {
      ["price_id"] => string(2) "44"
      ["website_id"] => string(1) "0"
      ["all_groups"] => string(1) "1"
      ["cust_group"] => int(32000)
      ["price"] => string(8) "170.0000"
      ["price_qty"] => float(10)
      ["website_price"] => string(8) "170.0000"
      ["formated_price"] => int(5) "170.00"
      ["savePercent"] => float(15)
      ["formated_price_incl_tax"] => string(34) "170.00"
    }
    */

 <?php $_item->setData('tier_price',null); ?>
          <?php $_tierPrices = $this->getTierPrices($_item); ?>
          <?php //print_r($_tResult); ?>
          <?php foreach ($_tierPrices as $price): ?>
                  <td>
                        <?php if(in_array($price['price_qty'],$_tResult)) :?>
                               <?php echo $price['formated_price']; ?>
                        <?php else: ?>
                               <?php echo "-"; ?>
                        <?php endif; ?>
                   </td>    
           <?php endforeach; ?> 
```

下面是代码的实际输出。

```
qty :     2          3          5       9         10 

         $150       $145       $130    $100

         $195       $175       $170 
```

数组中没有价格值时如何添加“-”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:41:00.710

尝试这个：

```
<?php $_item->setData('tier_price',null); ?>
          <?php $_tierPrices = $this->getTierPrices($_item); ?>
          <?php //print_r($_tResult); ?>
          <?php foreach ($_tierPrices as $price): ?>
            <td>
               <?= (!empty($price['price'])) ? $price['formated_price']: "-"; ?>
            </td>    
           <?php endforeach; ?> 
```

如果它不起作用：

代替：

```
<?= (!empty($price['price_qty'])) ? $price['formated_price']: "-"; ?>
with
<?= (!empty($price['formated_price'])) ? $price['formated_price']: "-"; ?> 
```

评论或编辑您的问题。告诉我们什么是输出：

```
echo "<pre>"; print_r($price); echo "</pre>"; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T09:40:51.570

您的代码中的主要逻辑错误是数组元素不等于上面的数字。

您需要做的是创建一个数组，其中包含`[-]`要显示的元素和键。

# python - 将数据输入 SQLite

> ID：15381526
> 
> 赞同：0
> 
> 时间：2013-03-13T09:36:00.070
> 
> 标签：python, mysql, database, sqlite, serial-port

我正在处理一个项目并启动了一个小项目来通过串行获取一些数据。数据来自串行，但没有任何内容添加到数据库中。创建了表，但未推送实际数据。那里出了点问题。

这是我的代码：

```
#!/usr/bin/env python
import serial
import time

import sqlite3
import os
from datetime import datetime

conn = sqlite3.connect("elements78.db") # or use :memory: to put it in RAM

cursor = conn.cursor()
sql_file = os.path.join(os.path.dirname(__file__), 'elements78.db')
needs_creation = not os.path.exists(sql_file) 
db_connection = sqlite3.connect(sql_file)
db_connection.row_factory = sqlite3.Row

# create a table
if needs_creation:
    print 'Creating initial database...'
    cursor = db_connection.cursor()

    db_connection.commit()
    print 'Database created.'

cursor.executescript("""
                    DROP TABLE IF EXISTS elements;
                    CREATE TABLE elements (id INTEGER PRIMARY KEY AUTOINCREMENT, Name, date CURDATE )
                    """)

#enter your device file
arddev = '/dev/tty.usbmodem621'
baud = 9600

#setup - if a Serial object can't be created, a SerialException will be raised.
while True:
    try:
        ser = serial.Serial(arddev, baud)

        #break out of while loop when connection is made
        break
    except serial.SerialException:
        print 'waiting for device ' + arddev + ' to be available'
        time.sleep(3)

#read lines from serial device
count = 0
while count < 5:

    element = ser.readline().strip('\n')
    count = count + 1
    datestamp = datetime.now()
    print 'received the element: ' + element 
    print datestamp

    cursor.execute('insert into elements(Name) values("%s")'%(element))

allentries = []
cursor.execute('SELECT * FROM elements')

allentries=cursor.fetchall()

print allentries 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T09:38:34.840

尝试添加

```
db_connection.commit() 
```

在您的 INSERT 语句之后。

# ruby-on-rails - Rails 设计/令牌身份验证：如果令牌错误或丢失，则重定向

> ID：15381534
> 
> 赞同：3
> 
> 时间：2013-03-13T09:36:20.727
> 
> 标签：ruby-on-rails, redirect, devise, token

我已经使用令牌身份验证/json api 实现了设计。我现在的问题是，每当“?auth_token”错误或丢失时，设计将我“HTTP/1.1 302 临时移动”重定向到我想要的 json 错误响应，而不是直接返回：“HTTP/1.1 403 Forbidden”。

我的错误响应来自我的 SessionsController < Devise::SessionsControllers "new" 操作，我认为这可能是错误的地方。

我找不到设计进行重定向的地方或我可以改变这种行为的地方。谁能给我一个线索？

非常感谢，克里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T09:49:50.170

您可以创建一个**自定义的失败**ruby​​ 文件，并通过将其放在您的 lib 目录中来提供所需的重定向，然后将其包含在您的设计`initializer`中，就像它在此[SO Post](https://stackoverflow.com/questions/5832631/devise-redirect-after-login-fail?rq=1)中提到的那样。

故障应用的定义定义在：

[https://github.com/plataformatec/devise/blob/master/lib/devise/failure_app.rb](https://github.com/plataformatec/devise/blob/master/lib/devise/failure_app.rb)

或者

您可以在自己的控制器中使用以下代码：

```
before_filter :correct_auth, :if => { request.format == :json }

  def correct_auth
    unless current_user
      render :json => {'error' => 'authentication error'}, :status => 403
    end
  end 
```

因此，如果您`auth_token`不正确，则意味着没有用户应该登录到应用程序，因此您可以显示`authentication error 403`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T12:36:14.940

仅出于文档目的，这里是我执行的步骤：

[HOWTO 设计自定义故障应用程序](https://github.com/plataformatec/devise/wiki/How-To%3a-Redirect-to-a-specific-page-when-the-user-can-not-be-authenticated)

添加到**devise.rb**

```
 config.warden do |manager|
    manager.failure_app = CustomFailure
  end 
```

创建**lib/devise/custom_failure.rb**

```
class CustomFailure < Devise::FailureApp

  def redirect_url
    login_page_url
  end

  # You need to override respond to eliminate recall
  def respond
    if http_auth?
      http_auth
    else
      if request.format.json?
        self.status = :unauthorized
        self.response_body = { :elements => {:id => "Authentication Failed", :description =>   "Invalid or missing authentication token"} }.to_json
        self.content_type = "json"
      else
        redirect
      end
    end
  end

end 
```

# assembly - GAS 程序集片段除以 0，不知道为什么

> ID：15381537
> 
> 赞同：0
> 
> 时间：2013-03-13T09:36:32.630
> 
> 标签：assembly, x86, gnu-assembler, divide-by-zero, i386

我有以下功能，涉及 GAS 语法中的 i386 程序集片段：

```
inline int MulDivRound(
    int nNumber,
    int nNumerator,
    int nDenominator )
{
    int nRet, nMod;

    __asm__ __volatile__ (
        "mov    %2,     %%eax   \n"
        "mull   %3              \n"
        "divl   %4              \n"
        "mov    %%eax,  %0      \n"
        "mov    %%edx,  %1      \n"

        :   "=m"    (nRet),
            "=m"    (nMod)
        :   "m"     (nNumber),
            "m"     (nNumerator),
            "m"     (nDenominator)
        :   "eax", "edx"
    );

    return nRet + nMod*2 / nDenominator;
} 
```

我注意到，在某些情况下，我在`EXC_I386_DIV`使用此功能时会崩溃。以下调用会产生这样的崩溃：

```
int res = MulDivRound( 4096, -566, 400 ); 
```

我无法清楚地看到导致此函数除以 0 的原因：它肯定只是将 4096 移动到`eax`，然后将其乘以 -566，然后将其除以 400，返回除法运算结果的两个分量。任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T11:54:45.667

x86 中的除法/乘法指令......这段代码有一些问题：

您正在使用带有*无符号* `mul`/`div`操作的有符号操作数。因此，您*真正*执行的操作是：

1.  有符号`-566`（`0xfffffdca`作为 2 补码 32 位）被解释为无符号`4294958538`
2.  乘以`4096`得到`17592183726080`( `0xfff:0xffdca000`in `EDX:EAX`)。请注意转换为您“预期”的*低32 位*`-2318336`
3.  完整的 64 位值除以`400`但由于高 32 位是`0xfff`, `4095`)，结果超出`UINT32_MAX`并引发异常。

如果您通过在`xor %%edx,%%edx`之前插入 an 来清除高位 32 位`divl`，则操作将成功，但它会返回您不期望的内容 - 即，它通过导致( ) in和余数( ) in来除`0xffdca000`( ) 。`4292648960``400``0xa3c066``10731622``EAX``0xa0``160``EDX`

就您指示机器执行的操作而言，这是“正确的”，但不是您期望的。如果要使用带符号的数字，则需要`imul`/`idiv`代替。

组装最终可以简化为以下内容：

```
__asm__ __volatile__ (
    "imull   %3              \n"
    "idivl   %4              \n"
    :   "=a"    (nRet),
        "=&d"   (nMod)
    :   "a"     (nNumber),
        "mr"    (nNumerator),
        "mr"    (nDenominator)
    :   "cc"
); 
```

那是因为 gcc 允许指定哪些寄存器用作输入/输出，所以这里根本不需要数据移动。此外，`"m"`单独的约束会在 64 位上创建次优代码，因为它将参数强制到堆栈上；给它一个替代方案，生成的代码会更好。

**编辑：**刚刚将`nMod`约束更改为`"=&d"(nMod)`; 它必须是 gcc 所说的“早期破坏者”。这意味着指定的输出寄存器在所有输入操作数被消耗/使用之前被覆盖，并告诉编译器不要`(nDenominator)`在`EDX`. 否则，如果发生这种情况，将导致“有趣”的故障模式。*如果您只*使用`"m"`for `nNumerator`/这不是问题，`nDenominator`但是一旦允许使用寄存器，最好小心。

**Edit2：**还要注意，上面的代码当然不能证明溢出异常。你仍然可以称之为`MulDivRound(INT32_MAX, 4, 2)`触发那些。合法地/通过这些说明的设计方式。如果您必须确保不会发生这种情况，则必须添加代码，将分母与`EDX`/`RDX`之前的/ 进行比较，`[i]div`并处理分母较小的情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T10:03:05.907

您不会得到除以零错误，而是**溢出错误**。

`divl`除`rdx:rax / operand`（rdx 中的高位字）并将结果存储`eax`在`edx`.

`rdx=4095`在您的代码中，您以and结尾`rax=0`，因此您尝试将`75539416981840613867520 / 400`结果划分为`188848542454601534668 remainder 320`.

`188848542454601534668`它`0x 000a 3ccc cccc cccc cccc`不适合 32 位结果寄存器`eax`，因此出现溢出错误。

你需要确保`rax`包含你的价值`4095`和那个`rdx=0`。这给出了 rax（结果）和 rdx（余数）的正确结果：

```
rax            0xa      10
rdx            0x5f     95 
```

# java - 在小程序中使用 java.awt.Robot 类进行屏幕捕获时出现 java.security.AccessControlException

> ID：15381538
> 
> 赞同：1
> 
> 时间：2013-03-13T09:36:32.600
> 
> 标签：java, applet, awt, awtrobot, accesscontrolexception

每当客户端单击打印屏幕按钮时，我需要捕获一个网页屏幕以将其存储在客户端的机器上。为此，我用谷歌搜索并通过在我的 jsp 页面中嵌入一个带有签名的小程序（受信任的小程序）来获得它，我可以做到这一点。因此，我正在尝试为独立的 java 类使用一个简单的小程序。成功后，我可以在签署小程序后尝试 jsp。我尝试的是：

```
import java.applet.Applet;  
import java.awt.Graphics;  
import java.util.Date;
import javax.imageio.ImageIO;
import java.awt.image.BufferedImage;
import java.io.File;
import java.awt.Dimension;
import java.awt.Rectangle;
import java.awt.Robot;
import java.awt.Toolkit;
import javax.swing.ImageIcon;
/* <applet code = MyApplet.class width="500" height="500">Java Applet for screen capture</applet>  */

public class MyApplet extends Applet {  

  /* Applet Life cycle Methods */  
  public void start()
  { 
   try{
   // capture the whole screen
   BufferedImage screencapture = new Robot().createScreenCapture(new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()) );
   // Save as JPEG
   File file = new File("D:/screencapture.jpg");
   ImageIO.write(screencapture, "jpg", file);
   System.out.println("screen capture finished : ");
     }//try closing...
     catch(Exception e)
     {
       System.out.println("screen capture error : ");
       e.printStackTrace();
     }//catch closing...  
   }//start closing...

 public void stop()
  {  

  }   
} 
```

我得到这个：

```
java.security.AccessControlException: access denied ("java.awt.AWTPermission" "createRobot")
        at java.security.AccessControlContext.checkPermission(AccessControlContext.java:366)
        at java.security.AccessController.checkPermission(AccessController.java:560)
        at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
        at java.awt.Robot.checkRobotAllowed(Robot.java:170)
        at java.awt.Robot.init(Robot.java:134)
        at java.awt.Robot.<init>(Robot.java:96)
        at MyApplet.start(MyApplet.java:23)
        at sun.applet.AppletPanel.run(AppletPanel.java:474)
        at java.lang.Thread.run(Thread.java:722) 
```

任何帮助，任何想法都会被应用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-23T13:58:25.250

我知道我在问题发生一年后正在挖掘恐龙，但我一直面临同样的问题。正如有人所说，更改策略文件是一个非常糟糕的主意（对某些用户来说也不舒服，就我而言，这是完全不可接受的解决方案）。

我在带有有效清单的签名小程序中遇到了同样的问题。问题出在我调用安全相关方法的方式上。在这种情况下，您应该替换行：

```
 BufferedImage screencapture = new Robot().createScreenCapture(new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()) ); 
```

和

```
BufferedImage screencapture = AccessController.doPrivileged(new PrivilegedAction<BufferedImage >() {
    @Override
    public BufferedImage run(){
        return new Robot().createScreenCapture(new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()) );
    }
}); 
```

这是干净的方法。在使用有效证书签名的苹果中，在清单和 jnpl 文件中具有正确的安全条目，它可以完美运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:31:59.293

我解决了这个问题。我所做的只是将这些行粘贴到 java.policy 文件中（只需在您的 java 安装文件夹中搜索此文件，您将在 3 个位置获取它，最后需要将其粘贴到所有文件中）

```
permission java.awt.AWTPermission "createRobot"; 
permission java.awt.AWTPermission "accessClipboard"; 
permission java.awt.AWTPermission "accessEventQueue"; 
permission java.awt.AWTPermission "showWindowWithoutWarningBanner"; 
permission java.awt.AWTPermission "readDisplayPixels", "read"; 
permission java.io.FilePermission "<<ALL FILES>>", "read, write, delete, execute"; 
```

# javascript - Javascript / 将 json 转换为 csv

> ID：15381539
> 
> 赞同：3
> 
> 时间：2013-03-13T09:36:32.967
> 
> 标签：javascript, json, node.js, csv

如何将 json 对象数组转换为 csv ？

前任

```
[{ name: "Item 1", color: "Green", size: "X-Large" },
 { name: "Item 2", color: "Green", size: "X-Large" },
 { name: "Item 3", color: "Green", size: "X-Large" }]; 
```

给

```
name;color;size
Item 1;Green;X-Large
Item 2;Green;X-Large
Item 3;Green;X-Large 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T09:36:32.967

JSFiddle 中的示例：http: [//jsfiddle.net/FLR4v/](http://jsfiddle.net/FLR4v/)

依赖项：

*   Underscorejs [http://underscorejs.org/underscore-min.js](http://underscorejs.org/underscore-min.js)
*   Momentjs [http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.0.0/moment.min.js](http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.0.0/moment.min.js)

功能

```
 /**
 * Return a CSV string from an array of json object
 *
 * @method JSONtoCSV
 * @param {Object} jsonArray an array of json object
 * @param {String} [delimiter=;] delimiter
 * @param {String} [dateFormat=ISO] dateFormat if a date is detected
 * @return {String} Returns the CSV string
**/
function JSONtoCSV(jsonArray, delimiter, dateFormat){
    dateFormat = dateFormat || 'YYYY-MM-DDTHH:mm:ss Z'; // ISO
    delimiter = delimiter || ';' ;

    var body = '';
    // En tete
    var keys = _.map(jsonArray[0], function(num, key){ return key; });
    body += keys.join(delimiter) + '\r\n';
    // Data
    for(var i=0; i<jsonArray.length; i++){
        var item = jsonArray[i];
        for(var j=0; j<keys.length; j++){
            var obj = item[keys[j]] ;
            if (_.isDate(obj)) {                
                body += moment(obj).format(dateFormat) ;
            } else {
                body += obj ;
            }

            if (j < keys.length-1) { 
                body += delimiter; 
            }
        }
        body += '\r\n';
    }

    return body;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-19T12:12:06.960

尽管这是一个很老的问题，但将我的发现保存在这里以供未来的研究人员使用。

Javascript 现在提供 Object.values 的功能，可以将 json 的所有值拉到一个数组中，然后可以使用 join 将其转换为 csv。

```
var csvrecord = Object.keys(jsonarray[0]).join(',') + '\n'; 
jsonarray.forEach(function(jsonrecord) {
   csvrecord += Object.values(jsonrecord).join(',') + '\n';
}); 
```

唯一的限制是一些浏览器仍然不支持它。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-02-12T13:55:16.877

```
function getCSVFromJson(k)
{
var retVal=[];
k.forEach(function(a){
var s=''; 
for(k in a){
    s+=a[k]+';';
}   

retVal.push(s.substring(0,s.length-1));
});
return retVal;
} 
```

# c# - C# 旋转矩阵

> ID：15381542
> 
> 赞同：0
> 
> 时间：2013-03-13T09:36:43.920
> 
> 标签：c#, matrix, rotational-matrices

我正在编写一个 C# 程序，它有一个立方体对象，允许用户在 xy 和 z 轴上移动它。但是我希望他们也能够旋转它。

我的矩阵定义如下：`public double[, ] matrix = new double[4, 4];`

因此，例如，我能够通过此代码缩放立方体。

```
public void initAsScalingMatrix(double sx, double sy, double sz) {

initAsIdentityMatrix();
matrix[0, 0] = sx; // scale x
matrix[1, 1] = sy; // scale y
matrix[2, 2] = sz; // scale z
matrix[3, 3] = 1;
} 
```

所以我的问题是。我如何使用相同的方法来旋转立方体，例如 x 轴？

编辑 - -

你好，

我已经想出了如何旋转它，但它是从左上角的方式进行的。

```
matrix[0, 0] = Math.Cos(rz);
matrix[0, 1] = Math.Sin(rz);
matrix[1, 0] = -(Math.Sin(rz));
matrix[1, 1] = Math.Cos(rz); 
```

它怎么会从中心旋转？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:07:26.230

您需要将您的旋转矩阵乘以一个平移矩阵以获得一个矩阵，该矩阵将围绕一个非原点位置旋转您的对象。

这有点拗口，所以以这种方式看待它可能会有所帮助：

首先对立方体应用一个平移矩阵，将立方体的中心（或旋转原点）移动到世界原点 (0,0)。现在应用您的旋转矩阵。现在应用相反的平移将立方体放回原来的位置。当然现在它将被旋转并在它原来的“位置”，这就是你想要的。

实际上所做的是将矩阵（Trans x Rotation x ^Trans）应用于立方体。

你的旋转矩阵是二维的。如果要围绕任意 3D 轴旋转，则需要使用 3D 旋转矩阵。如果您为 C# 安装 XNA 框架，您将免费获得一个矩阵数学库。XNA 应该用于游戏，但根据您所做的事情，您可能会发现它对矩阵数学有用，而不是自己滚动。

# jquery - jQuery Mobile XML 解析成表格

> ID：15381544
> 
> 赞同：0
> 
> 时间：2013-03-13T09:36:47.400
> 
> 标签：jquery, html, mobile

我刚刚开始使用 jQuery Mobile 框架，并想将我最初设置为表格的网格修改为表格。我面临的问题是我只从我的 XML 解析中获取第一行数据，尽管有 8 条数据要输入。

我猜网格会自动为它找到的每个新集合添加一行，而它在 tabe 布局中没有找到，并且可能需要为它找到的每条数据添加某种“每个”——我不知道该怎么做案例，但如果有人可以提供帮助，我将非常感激 - 谢谢。

```
 <!DOCTYPE html>
    <html lang="en">
    <head>
    <title>Table</title>

    <!--Standard Jquery Stuff here-->
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />

    <!--Set the Icons to be used if saved to an apple home screen-->
    <link rel="apple-touch-icon" href="_/images/iOS_Icons/iPhoneIcon.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="_/images/iOS_Icons/iPadIcon.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="_/images/iOS_Icons/iPhoneIcon@2x.png" /> 
    <link rel="apple-touch-icon" sizes="144x144" href="_/images/iOS_Icons/iPadIcon@2x.png" />   

    <!-- Custom css -->
    <link rel="stylesheet" href="../_/css/Michaels.css" />

     <!-- dpv feed-->
          <script type="text/javascript">
              var xml;
              $(document).ready(function(){
                  $.ajax({
                      type: "GET",
                      url: "../_/xml/dpv.xml",
                      dataType: "xml",
                      success: xmlParser
                  });
              });

                  //loading XML file and parsing to .main div.
                  function xmlParser(data) {
                      xml = data;

                      $('#load').fadeOut();

                      $(xml).find("location").each(function () {
                          var name = $(this).find("name").text();
                          var target = $(this).find("target").text();
                          var actual = $(this).find("actual").text();
                          var thru = $(this).find("thru").text();
                          var lastmod = $(this).find("lastmodified").text();

                          $("#dpvtable").append('<tr><th><a href="dpv_graphs/dpv-' + name + '.html" rel="external">'+name+'</a></th><td>' + actual + '</td><td>' + target + '</td><td>' + thru + '</td></tr>');

                          $('#dpvtable').tableview('refresh'); 

                      });
                  }          
          </script>
  </head>
<body>
<!-- DPV -->
<div data-role="page" id="dpv">
    <div data-role="header" data-position="fixed">
        <h1>DPV</h1>
    </div>
    <div data-role="content" data-theme="a" >
        <ul id="table" data-role="tableview">
            <li id="load">Loading Data...</li>
        </ul>
        <table data-role="table" id="dpvtable" data-mode="columntoggle" class="ui-responsive table-stroke">
            <thead>
                <tr>
                    <th>Location</th>
                    <th data-priority="1">DPV</th>
                    <th data-priority="1">Target</th>
                    <th data-priority="2">Thru</th>
                </tr>
          </thead>
       <tbody>

          </tbody>
         </table>
    </div>
</div>
<!--Footer-->
<div data-role="footer" style="text-align:center" data-position="fixed">
    <a class="ui-btn-left" data-icon="home" style="margin: float" href="../index.html" data-transition="flip">Home</a>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:11:31.360

我已经想出编码或删除：

```
$('#dpvtable').tableview('refresh'); 
```

已经把整张桌子放好了！现在我只需要弄清楚如何配置它以使用新的列隐藏功能......

# ruby-on-rails-3 - 当路线似乎匹配时没有路线匹配

> ID：15381550
> 
> 赞同：0
> 
> 时间：2013-03-13T09:37:02.530
> 
> 标签：ruby-on-rails-3, routes

我正在尝试添加一条路线，使我能够将两个“文章”合并在一起，但无论我尝试什么，当路线实际上似乎匹配时，我都会不断收到“无路线匹配”。

在我看来：

```
<%= label_tag(:merge_with, "Article ID:") %>
<%= text_field_tag(:merge_with) %>
<%= button_to "Merge", {:controller=>'admin/articles', :action=>'merge_article'}, :method => :post %> 
```

从我的路线.rb：

```
match 'articles/:id/merge' => 'articles#merge_article', :via => :post, :as => 'merge_article' 
```

rake 路由的输出：

```
merge_article POST /articles/:id/merge(.:format) {:controller => "articles", :action => "merge_article"} 
```

页面留言：

没有路线匹配 {:controller => "admin/articles", :action => "merge_article"}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:39:56.600

您的路线需要`id`. 你需要`:id`像

```
{ :controller=>'admin/articles', :action=>'merge_article', :id => some_id } 
```

或使用

```
merge_article_path(some_id) 
```

# pdf - 通过操作 BLOB/Byte[] 添加 PDF 字体

> ID：15381552
> 
> 赞同：-2
> 
> 时间：2013-03-13T09:37:07.543
> 
> 标签：pdf, fonts

工作很简单——在现有 PDF 中嵌入字体。

那么不是那么简单-即不使用任何库/程序-> 只需直接编辑PDF，即blob/bytes。

我期待一些拼接等...

但能做到吗？感谢有用的指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:48:52.250

PDF 中的字体很可能有自己的自定义编码，您必须对其进行分析和使用。甚至在此之前，PDF 是对象的数据转储，因此您需要能够将它们拆开并重建。所以它远非简单......

# ruby - 报告厨师错误

> ID：15381556
> 
> 赞同：0
> 
> 时间：2013-03-13T09:37:49.413
> 
> 标签：ruby, chef-infra, chef-recipe

我尝试使用`chef_handler`食谱在厨师中报告，`reportchef` 当我尝试将其上传到服务器时：

```
require 'net/http'
require 'uri'

class ReportChef < Chef::Handler
def initialize(opts = nil)
@opts = opts
unless opts[:api_key]
  Chef::Application.fatal!("No ReportChef API Key set")
end
end

def report
params = @opts.merge({ node_name: run_status.node.fqdn })

if run_status.failed?
  params[:last_run_successful] = false
  params[:exception] = run_status.formatted_exception
  params[:backtrace] = run_status.backtrace.join("\n")
else
  params[:last_run_successful] = true
end

uri = URI.parse("http://reportchef.com/api/v1/reports")
http = Net::HTTP.new(uri.host, uri.port)
request = Net::HTTP::Post.new(uri.request_uri)
request.set_form_data(params)
response = http.request(request)
end
end 
```

错误

```
knife cookbook upload reportchef -c /etc/chef/knife.rb
Uploading reportchef     [1.0.1]
FATAL: Cookbook file files/default/reportchef.rb has a ruby syntax error:
FATAL: /software/chef-repo/cookbooks/reportchef/files/default/reportchef.rb:13: syntax    
error
FATAL:     params = @opts.merge({ node_name: run_status.node.fqdn })
FATAL:                                      ^
FATAL: /software/chef-repo/cookbooks/reportchef/files/default/reportchef.rb:13:     syntax   
error
FATAL:     params = @opts.merge({ node_name: run_status.node.fqdn })
FATAL: 
```

发生了什么？

它是下载的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:09:19.127

您可能在您的服务器上使用 Ruby 1.8，而在 1.8 中缺少一些特定的语法糖，允许您在 1.9 中编写`{a: 'b'}`（相当于`{:a => 'b'}`）。

您应该尝试在您的服务器上安装 Ruby 1.9 或鼓励作者创建向后兼容性（不推荐，因为恕我直言不支持 1.8）。

# java - 将文件发送到服务器的最简单方法

> ID：15381559
> 
> 赞同：1
> 
> 时间：2013-03-13T09:37:58.140
> 
> 标签：java, file-upload

我有一个可以生成日志的 Java 桌面应用程序。**我想将这些日志发送到远程服务器**。

这样做的正确方法是什么？通过**FTP**？编写一个小型**Java 服务器**并使用套接字发送它？将内容发布到**PHP 表单**？

如果使用 FTP，是否安全？我的意思是，是否可以允许上传但也可以保护文件不被删除或重命名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:05:18.220

在您的特定情况下，我建议使用`log4j`'s [SimpleSocketServer](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/net/SimpleSocketServer.html)。

在您的服务器中，您可以使用以下参数启动服务器：

```
java -cp log4j.jar org.apache.log4j.net.SimpleSocketServer 4712 
```

这是服务器的示例`log4j.properties`：

```
log4j.rootLogger=debug, stdout

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout

log4j.appender.stdout.layout.ConversionPattern=%5p [%t] (%F:%L) - %m%n 
```

这是客户的示例`log4j.properties`：

```
log4j.appender.SERVER=org.apache.log4j.net.SocketAppender
log4j.appender.SERVER.Port=4712
log4j.appender.SERVER.RemoteHost=loghost
log4j.appender.SERVER.ReconnectionDelay=10000 
```

唯一需要注意的是，您不能设置某种身份验证，其功能`SimpleSocketServer`仅为。您只能使用其他一些方法来实现这一点，fe SSH-tunnel。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:07:06.957

通过电子邮件发送日志文件也是另一种选择。这使您可以选择将日志发送到电子邮件中的人员列表，以防您需要根据错误立即执行操作。

对于 log4j，请检查此链接：

[http://www.codereye.com/2009/02/sending-email-alerts-with-log4j.html](http://www.codereye.com/2009/02/sending-email-alerts-with-log4j.html)

基本要点是：

```
log4j.rootLogger=INFO, a, email
log4j.appender.a=org.apache.log4j.ConsoleAppender
log4j.appender.a.layout=org.apache.log4j.PatternLayout
log4j.appender.a.layout.ConversionPattern=%d{HH:mm:ss} %-5p [%c{1}]: %m%n
log4j.appender.email=org.apache.log4j.net.SMTPAppender
log4j.appender.email.BufferSize=10
log4j.appender.email.SMTPHost=mysmtp.mailserver.net
log4j.appender.email.From=admin@mycompany.com
log4j.appender.email.To=me@mycompany.com
log4j.appender.email.Subject=My Module Error
log4j.appender.email.layout=org.apache.log4j.PatternLayout
log4j.appender.email.layout.ConversionPattern=%d [%t] %-5p %c %x - %m%n 
```

还要检查[AsynAppender](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/AsyncAppender.html)是否异步发送电子邮件，以便当前线程不会被阻止发送电子邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:34:23.673

是的... Log4J 对于应用程序中的日志记录机制非常有用。

而对于向服务器发送数据，使用客户端套接字 - 服务器套接字变得非常容易。

有非常有用的方法可以将数据从客户端发送到服务器，反之亦然。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T12:19:45.333

感谢@VarunAchar，我决定通过电子邮件发送日志。但是我没有使用 log4j（使用它是个好主意，但在我的情况下我不需要这样一个完整的解决方案），我使用自己的方法发送带有一些附件的电子邮件：

```
Properties properties = new Properties();
properties.setProperty("mail.smtp.submitter", from); //such as abc@gmail.com
properties.setProperty("mail.smtp.auth", "true");
properties.setProperty("mail.smtp.host", host);   //use smtp.gmail.com for Google
properties.put("mail.smtp.user", from); //such as abc@gmail.com
properties.put("mail.smtp.port", port); //use 465 for Google's SMTP server
properties.put("mail.smtp.socketFactory.port", port); //use 465 for Google's SMTP server
properties.put("mail.smtp.starttls.enable","true");
properties.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
properties.put("mail.smtp.socketFactory.fallback", "false");

Authenticator mailAuthenticator = new MailAuthenticator(from,"mypassword");
Session mailSession = Session.getDefaultInstance(properties,mailAuthenticator);
Message message = new MimeMessage(mailSession);

InternetAddress fromAddress = new InternetAddress(from);
InternetAddress toAddress = new InternetAddress(to);

message.setFrom(fromAddress);
message.setRecipient(RecipientType.TO, toAddress);
//you can use RecipientTypes such as
//RecipientType.TO
//RecipientType.BCC
//RecipientType.CC
//RecipientType.NEWSGROUPS
message.setSubject(subject);

// Create the message part 
BodyPart messageBodyPart = new MimeBodyPart();

// Some text
messageBodyPart.setText(text);

// Attachments
Multipart multipart = new MimeMultipart();
multipart.addBodyPart(messageBodyPart);
// Attach error.log
File f = new File(ruta+"error.log");
if (f.exists()) {
    messageBodyPart = new MimeBodyPart();
    String filename = ruta+"error.log";
    DataSource source = new FileDataSource(filename);
    messageBodyPart.setDataHandler(new DataHandler(source));
    messageBodyPart.setFileName(filename);
    multipart.addBodyPart(messageBodyPart);
}

// repeat with more attachments if needed

// Fill email content
message.setContent(multipart);

Transport.send(message); 
```

它使用[Java Mail API](http://www.oracle.com/technetwork/java/javamail/index.html)
原始代码在这里找到：http: [//tunatore.wordpress.com/2011/10/05/how-to-send-an-e-mail-using-java-mail-api-swing- desktop-application-using-googles-smtp-example/](http://tunatore.wordpress.com/2011/10/05/how-to-send-an-e-mail-using-java-mail-api-swing-desktop-application-using-googles-smtp-example/)
附件部分在这里：[http ://www.roseindia.net/javamail/SendAttachment.shtml](http://www.roseindia.net/javamail/SendAttachment.shtml)

# xaml - 使用 MVVM 在 PrintDocument 中打印会出错：对话框必须由用户启动

> ID：15381562
> 
> 赞同：0
> 
> 时间：2013-03-13T09:38:01.213
> 
> 标签：xaml, mvvm, silverlight-5.0

我在 MVVM 中打印文档的命令为：

```
 private void OKButton_Click(object sender, RoutedEventArgs e)
    {
        PrintDocument doc = new PrintDocument();
        doc.PrintPage += new EventHandler<PrintPageEventArgs>(doc_PrintPage);
        doc.Print("Payment Receipt");
        this.DialogResult = true;
    }

    void doc_PrintPage(object sender, PrintPageEventArgs e)
    {
        Grid pGrid = new Grid();
        pGrid.ColumnDefinitions.Add(new ColumnDefinition() { Width = new GridLength(30) });
        pGrid.ColumnDefinitions.Add(new ColumnDefinition() { Width = new GridLength(665, GridUnitType.Star) });
        pGrid.ColumnDefinitions.Add(new ColumnDefinition() { Width = new GridLength(30) });
        pGrid.RowDefinitions.Add(new RowDefinition() { Height = new GridLength(30) });
        pGrid.RowDefinitions.Add(new RowDefinition() { Height = new GridLength(1, GridUnitType.Star) });
        pGrid.RowDefinitions.Add(new RowDefinition() { Height = new GridLength(20) });
        // Stretch to the size of the printed page
        pGrid.Width = e.PrintableArea.Width;
        pGrid.Height = e.PrintableArea.Height;

        // Assign the XAML element to be printed
        Grid parentGrid = grdReceipt.Parent as Grid;
        parentGrid.Children.Remove(grdReceipt);
        pGrid.Children.Add(grdReceipt);
        Grid.SetColumn(grdReceipt, 1);
        Grid.SetRow(grdReceipt, 1);

        // Stretch to the size of the printed page
        pGrid.Width = e.PrintableArea.Width;
        //grdReceipt.Height = e.PrintableArea.Height;

        // Assign the XAML element to be printed
        e.PageVisual = pGrid;

        // Specify whether to call again for another page
        e.HasMorePages = false;
    } 
```

当它执行 doc.Print() 它给我错误，因为对话框必须是用户启动的。请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:43:40.473

[http://msdn.microsoft.com/en-us/library/ff382752%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/ff382752%28v=vs.95%29.aspx)

> 出于安全考虑，如果 Silverlight 应用程序是沙盒应用程序，则文件和打印对话框必须由用户启动。这意味着您必须从用户启动的操作（例如按钮的单击事件处理程序）中显示它们。如果您尝试从非用户启动的代码中显示对话框，则会发生 SecurityException。此外，在用户启动对话和显示对话之间允许的时间有限制。

那么`OKButton_Click`当用户点击一个按钮时会被调用吗？您是否可能在单击和执行实际打印之间有一个调试点？

# jquery - 多个选择框中的jQuery optgroup和选项值

> ID：15381565
> 
> 赞同：0
> 
> 时间：2013-03-13T09:38:04.987
> 
> 标签：jquery, select, optgroup

[请通过此链接](https://stackoverflow.com/questions/15155086/jquery-populate-optgroup-for-second-selectbox-dynamically)参考我的第一个问题，感谢@AV 的帮助，

提供的脚本实际上很好用，但是和的名称存在问题`option value`，`optgroup`请访问[http://jsfiddle.net/NZ6tY/7/](http://jsfiddle.net/NZ6tY/7/)了解更具体的操作，**组 1-1**与选项配合得很好value 和 optgroup 标签没有**空格**，**逗号**或**斜杠**，其余部分不可行，有人可以给出解决方案吗？我必须在选项值和 optgroup 标签中有一个长文本作为必要的信息。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:46:32.003

引用您的 jsfiddle，它的问题是 optgroup 的选择器。

它目前看起来像这样：

`$('optgroup[label='+somelabel+']');`

确实可以正常工作，但是当`somelabel`包含空格或特殊字符时，它们会干扰选择器。为了解决这个问题，只需`somelabel`用引号括起来，如下所示：

`$('optgroup[label="'+somelabel+'"]');`

我分叉了你的小提琴并进行了更新（第 33 行）：http: [//jsfiddle.net/S7NkB/](http://jsfiddle.net/S7NkB/)

**编辑：**请注意，如果`somelabel`包含引号字符，您希望转义或替换它们，否则它将再次中断。

# android - ImageView scaleType 'centerCrop' 等价于位图可绘制重力

> ID：15381571
> 
> 赞同：42
> 
> 时间：2013-03-13T09:38:31.373
> 
> 标签：android, android-layout, drawable

我创建了一个带有标题图像的活动。此标题图像最初是使用 ImageView 在 Activity 的布局 xml 中创建的，其中 scaleType 设置为 centerCrop。这就是我想要的，它使图像居中，在纵向模式下左右剪切，在横向模式下全部显示。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingTop="30dp"
    android:paddingBottom="6dp"
    android:paddingLeft="6dp"
    android:paddingRight="6dp"
    android:background="#919EAC"
    android:orientation="vertical" >

<ImageView
    android:id="@+id/header_image"
    android:layout_width="match_parent"
    android:layout_height="120dp"
    android:contentDescription="@string/header_description"
    android:scaleType="centerCrop"
    android:src="@drawable/header" />

    .... <other views> ... 
```

我想将其替换为背景可绘制对象，以便我可以使用标题图像空间来显示数据，并且它可以让我在不同的活动中重复相同的布局。

出于这个原因，我创建了一个可在 android:background 属性中引用的可绘制对象：

```
 <layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
        <item>
            <shape android:shape="rectangle" >
                <solid android:color="#919EAC" />
            </shape>
        </item>
        <item>
            <bitmap 
                android:antialias="true"
                android:gravity="top|center_horizontal"
                android:src="@drawable/header" />
        </item>
    </layer-list> 
```

此可绘制对象定义了布局将定义的彩色背景，并定义了一个标题图像，否则该图像将作为 ImageView 包含在布局中。

但是现在我的图像被缩放了，而我希望它被裁剪。

检查Android文档我尝试了其他重力模式，例如

```
 android:gravity="top|clip_horizontal" 
```

但它似乎仍然与图像视图显示/缩放不同。

背景可绘制的正确定义是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-08-18T20:16:44.747

要在代码中居中裁剪位图，请执行以下操作：

```
public static Bitmap cropCenter(Bitmap bmp) {
    int dimension = Math.min(bmp.getWidth(), bmp.getHeight());
    return ThumbnailUtils.extractThumbnail(bmp, dimension, dimension);
} 
```

我不知道有任何其他方法可以明智地居中裁剪位图 xml。

希望它可以帮助任何人。

我从这篇文章中找到了这个解决方案： [Android Crop Center of Bitmap](https://stackoverflow.com/questions/6908604/android-crop-center-of-bitmap)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-14T12:55:19.657

我用一个保持底层drawable纵横比的装饰器解决了这个问题：[https ://gist.github.com/rudchenkos/e33dc0d6669a61dde9d6548f6c3e0e7e](https://gist.github.com/rudchenkos/e33dc0d6669a61dde9d6548f6c3e0e7e)

不幸的是，没有办法从 XML 应用它，所以我在我的启动活动开始时就这样做了：

```
public class SplashActivity extends AppCompatActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        final Drawable bg = getResources().getDrawable(R.drawable.screen);
        getWindow().setBackgroundDrawable(new CenterCropDrawable(bg));

        ...
    }
} 
```

这大致相当于`android:windowBackground`在 Activity 主题中指定可绘制对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-05T07:20:21.340

我不知道如何在背景下做到这一点。您可以尝试其他解决方案：

1）在图像顶部显示内容的最简单解决方案是将它们都放在某种布局中，以便它们重叠。例如，您可以使用具有 ImageView 尺寸的 RelativeLayout，ImageView 在两个尺寸上都是 match_parent，在中心是 TextView。

2) 您可以将 Imageview 保存在不同的布局中，例如 header.xml，并在您需要的任何地方通过**include header.xml使用它。**

3）如果要在 ImageView 顶部显示的布局在任何地方都相同，那么您可以使用 ImageView 创建一个自定义布局，并说一个 TextView 在中心，并在任何地方使用该布局。然后，您可以在此自定义布局上设置 TextView 字符串。您可以阅读有关自定义布局的更多信息，它们很简单。

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2013-03-13T10:12:01.080

使用`scaleType = "centerCrop"`您正在实现您想要的结果，*裁剪图像的边缘并显示适合该尺寸的中心部分*。

**对于 ImageView ：**

`ImageView`具有**仅适用于将其设置为要显示的源的图像的**`scaleType`属性。即好像它是它的来源。**`TextView``Text`**

 **甚至您可能已经注意到*scaleType 不适用于设置为背景的图像，该背景*仅适用于在运行时以 XML 或 XML 作为源提供的图像。

**对于布局**

`Layout`可以显示背景图像，但*没有为布局提供任何属性可以处理背景图像*并根据属性的值对其进行缩放。

所以你应该停止询问`ImageView`from的功能`Layout`，因为它没有它。

**2 种不同的解决方案来解决您的问题**

1）在不同的可绘制文件夹中保留适当的背景标题图像并使用它，这样您就不需要在运行时缩放它，因为您已经为不同的尺寸开发了图像。

2) 您只需要重新设计您的 XML，如下例所示

```
<RelativeLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:background="@drawable/subway"
        android:scaleType="centerCrop" />

    <Button
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_alignParentLeft="true"
         />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        />
</RelativeLayout> 
```**

# android - Google Maps Javascript API V3 - 在瓷砖边界处切割的标记

> ID：15381574
> 
> 赞同：2
> 
> 时间：2013-03-13T09:38:33.983
> 
> 标签：android, cordova, google-maps-api-3, google-maps-markers

我正在开发一个基于地理位置的游戏。带有标记的地图是它的核心组成部分之一。我们正在使用

*   电话间隙 2.2
*   该问题仅出现在 Android 4.2.x 上（在 Nexus 4、7 和 10 上测试）
*   谷歌地图 API V3
*   我们正在使用 PhonegapBuild 构建它
*   MarkerImages 与缩放图像一起使用（参见下面的代码）

不幸的是，我在地图上正确显示标记时遇到了一些问题。瓷砖周围似乎有一个小边框，并且标记是在这个边框上切割的。该问题并不总是发生。

放大地图后，标记会正确显示。

下面的代码显示了我们如何添加标记和定义地图。

```
map = new google.maps.Map(document.getElementById('map'), {
            zoom : 14,
            mapTypeControl : false,
            center : new google.maps.LatLng(lastPos.lat, lastPos.lon),
            mapTypeId : google.maps.MapTypeId.ROADMAP,
            streetViewControl : false,
            styles : [..]
        });

[some time later, after making sure map is initialized, is displayed and so on...]

var markerimage = {
    url : image,
    size : new google.maps.Size(60, 106),
    origin : new google.maps.Point(0, 0),
    anchor : new google.maps.Point(15, 53),
    scaledSize : new google.maps.Size(30, 53)
};
var marker = new google.maps.Marker({
    position : new google.maps.LatLng(spot.position.latitude, spot.position.longitude),
    icon : markerimage,
    optimized : true,
    clickable : true,
    draggable : false,
    map : map,
    zIndex: 2
}); 
```

有谁知道这个问题或如何解决它？

谢谢！

编辑：

我只是尝试了几件事。我禁用了应用程序中的所有 CSS 和所有不需要的 Javascript，我从标记和地图中删除了自定义样式。但是Bug还是出现了。地图大小现在设置为固定宽度和高度（按像素）。我真的被这个错误抓狂了！标记重复，被拉伸并被切割......！我在下面附上了一个新的截图。

![新截图](../Images/43e1492dffdc9416b1ac4c5d79317bde.png)

![地图与瓷砖和切割标记之间的边界](../Images/accf888eb5a5a91ad6ec30893522a050.png).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:11:40.377

这很难调试，因为它很难重现 - 但我将尝试提供一些提示来尝试作为答案：

*   带有图像（png，gif）的标记转`optimized: false`，如果这无助于尝试删除 markerImages 并看看会发生什么。还是bug？

*   从地图中删除自定义样式（尝试不使用自定义样式和标记图像，不使用自定义样式但使用标记图像等）

*   尝试监听 tilesloaded、bounds_changed 等事件并使用调试打印来检查它们是否被触发。当他们这样做时：尝试在此之后初始化您的标记 - 首先是直接 - 然后有小的超时

*   尝试删除图像的缩放和特殊的锚设置等，尽量减少

*   例如，确保通过将 markerImage(s) 附加到 DOM 来加载它们。（对于网络图像，这是正常且良好的做法 - 我不知道 phonegap 是否有不同）。

如果似乎没有任何帮助 - 向 gooooogle 提问 :)

# android - 缩放动画的问题

> ID：15381583
> 
> 赞同：2
> 
> 时间：2013-03-13T09:38:43.597
> 
> 标签：android, listview, animation, view, scale

当用户单击 ListView 中的项目时，我正在尝试将视图（ListView）缩放到特定大小。ListView 的“原始”（开始）状态设置为

```
layout_width="match_parent" 
```

如果您愿意，ListView 显然是一个矩形。我不知道如何缩小 ListView 并将矩形的左侧（即 ListView）“锚定”到屏幕/父活动的左侧。我想要发生的只是 ListView 的右侧从屏幕/父级的右侧滑入。y 轴不能缩放或改变，只有 ListView 的右侧。如果这还不够清楚，我深表歉意。下面是用户单击时 ListView 的开始状态和结束状态的粗略图片。

[一只忙碌的猫 http://dc589.2shared.com/download/mdK_EobN/listviewanimationjpeg.jpg?tsid=20130313-093629-3c816601](http://dc589.2shared.com/download/mdK_EobN/listviewanimationjpeg.jpg?tsid=20130313-093629-3c816601)

我很感激任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:55:10.153

如果您确定始终首先拥有展开的视图，那么您可以执行以下操作：

1.  首先像您当前一样使用 match_parent，以确保它占用其父容器的所有水平空间。

2.  覆盖`onWindowFocusChanged`您的活动以获得最大所需宽度

    ```
    @Override
    public void onWindowFocusChanged (boolean hasFocus) {
        // myComponentToBeResized.getMeasuredWidth(); 
    } 
    ```

3.  存储该值的 50%，因此，您拥有完全展开和部分展开的视图的宽度。

4.  更新您的视图以使用像素（或倾角）作为宽度，而不是 match_parent 关键字。现在，您可以在两个值之间进行动画处理，如您所见:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:43:44.757

您可以尝试`relativeLayout`在此布局中使用您的添加`ListView`，`android:alignParentLeft="true"`然后尝试在 listView 上使用缩放动画。通过添加这些属性，您将像固定在左侧一样。希望它有效。`android:alignParentTop="true"``ListView``listView`

# java - 如何以所需的时间格式在 Joda Time 中获得 Interval 或类似的课程？

> ID：15381584
> 
> 赞同：0
> 
> 时间：2013-03-13T09:38:44.827
> 
> 标签：java, jodatime

我的间隔有一个开始日期时间和一个结束日期时间。如何格式化间隔或其日期时间，以便我只得到我想要的部分。例如，只有日期，例如`2012-04-11`后跟时间`06:15:25`，没有别的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:42:16.633

看看[`DateTimeFormat`](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html)，你可以通过你想要的格式。

例如

```
DateTime dt = new DateTime();
DateTimeFormatter fmt = DateTimeFormat.forPattern("yyyy-MM-dd HH:mm:ss");
String str = fmt.print(dt); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:42:18.143

您是否尝试过 PeriodFormatter：http: [//joda-time.sourceforge.net/apidocs/org/joda/time/format/PeriodFormatter.html](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/PeriodFormatter.html)

# html - rails link_to_add_fields 不添加带有 has_many 的字段：通过（内部有嵌套表单）

> ID：15381586
> 
> 赞同：2
> 
> 时间：2013-03-13T09:38:48.217
> 
> 标签：html, ruby-on-rails, ruby-on-rails-3, nested-forms

我的 link_to_add_fields 代码适用于许多其他模型，但在这里它不起作用。我使用 Ryan Bates 的屏幕投射来模拟我的工作方式。

与此可能不同的是，我在一个部分中有 2 个嵌套模型。一半的表字段来自模型 a (journals)，另一个来自模型 b (journal_entries)，并且都基于 Leases 模型。

该表如下所示，[xx] 是输入字段。它看起来有点像数据网格。

```
Dated      |Memo      |Account           |Credit     |
-----------------------------------------------------------
[a.dated]  |[a.memo]  |[b.account_name]  |[b.credit] |....
[a.dated]  |[a.memo]  |[b.account_name]  |[b.credit] |....
[a.dated]  |[a.memo]  |[b.account_name]  |[b.credit] |....
(Link:Click to add another row) 
```

当我检查生成的 html 中的 link_to_add_fields 时，看到：

```
<a href="#" class="add_fields" data-fields="&lt;fieldset style=&quot;
border:0px none;padding:0px .625em;&quot;&gt;  &lt;/fieldset&gt;" 
data-id="-629772378">+ Add transactions</a> 
```

我预计会有更多的行动......显然，当我点击链接时，什么也没有发生。

_journals_form.html.erb

```
<div>
  <%= f.fields_for :journals do |journals| %>
    <%= render "journal_fields" , {f: journals} %>
  <% end %>
  <%= link_to_add_fields "+ Add transactions", f, :journals %>
</div> 
```

_journal_fields.html.erb，注意嵌套的 f.fields_for 以及 f.attribute 和 g.attribute 的混合

```
<fieldset style="border:0px none;padding:0px .625em;">
  <%= f.fields_for :journal_entries do |g| %> 
      <table>
        <tr>
          <td style="width:200px;font-size:.7em"><%= f.date_select :dated %></td>
          ...
          <td style="width:100px;"><%= g.text_field :account_name, size: 8 %></td>
          <td style="width:100px;"><%= g.hidden_field :_destroy %><%= link_to "remove", '#', class: "remove_fields" %></td>
        </tr>
      </table>
  <% end %>
</fieldset> 
```

我的控制器似乎编辑/更新并添加了两个模型（期刊和 journal_entries）的行，除了删除链接有问题......

```
 def edit
    @lease = Lease.find(params[:id])
    @lease.tenants.build
    1.times do 
      journal = @lease.journals.build
      journal.journal_entries.build
    end
  end
  def update
    @lease = Lease.find(params[:id])
    if @lease.update_attributes(params[:lease])
      redirect_to edit_pm_lease_path(@lease), notice: 'Lease was successfully updated.'
    else
      render action: "edit"
    end
  end 
```

该模型基于租赁。租赁有许多期刊和许多通过期刊的期刊条目。这就是我们跟踪给定租赁的付款和账单的方式。Leases 也有很多租户（这个 add_fields... 效果很好）。

租赁.rb

```
class Lease < ActiveRecord::Base
  ...
  has_many :tenants
  has_many :journals, :order => [:dated, :id] #, :conditions => "journals.lease_id = id"
  has_many :journal_entries, :through => :journals  
  accepts_nested_attributes_for :tenants , :reject_if => lambda { |a| a[:name].blank? }, :allow_destroy => true 
  accepts_nested_attributes_for :journal_entries , :allow_destroy => true
  accepts_nested_attributes_for :journals ,  :allow_destroy => true    
  #Below didn't seem to help or hinder so it's removed.
    #accepts_nested_attributes_for :journals, :journal_entries, :allow_destroy => true 
  ...
end 
```

期刊.rb

```
class Journal < ActiveRecord::Base
  ... 
  belongs_to :lease, :conditions =>  :lease_id != nil   
  has_many :journal_entries
  accepts_nested_attributes_for :journal_entries , :allow_destroy => true
end 
```

日记条目.rb

```
class JournalEntry < ActiveRecord::Base
  belongs_to :journal
end 
```

link_to_add_fields 助手：（来自 Ryan bates railscasts 的参考资料（EPISODE #196）

```
module ApplicationHelper
  def external_link_to(label, target, options = [])
    #length = 25 #options[:length] ||= 25
    #window = options[:target] ||= "new"
    unless target.downcase.start_with?("http://","https://")
      link = "http://" + target.strip
    end
    link_to target, link, :target => "new"   
  end

  def link_to_add_fields(name, f, association)
    new_object = f.object.send(association).klass.new
    id = new_object.object_id
    fields = f.fields_for(association, new_object, child_index: id) do |builder|
      render(association.to_s.singularize + "_fields", f: builder)
    end
    link_to(name, '#', class: "add_fields", data: {id: id, fields: fields.gsub("\n", "")})
  end
end 
```

不知道我在哪里出错了，数据的添加和删除工作正常，但是只有 journal/journal_entry 表单的 link_to_add_fields 没有做出应有的响应。我没有使用nested_form gem，如果这有所作为......

我正在使用 Rails 3.2.12、Ruby 1.9.3

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:04:45.890

`journal_fields.hrml.erb`通过删除 `fields_for`代码博客修改您的文件。为 Lease 类添加嵌套的将军。

```
 <fieldset style="border:0px none;padding:0px .625em;">
     <table>
        <tr>
          <td style="width:200px;font-size:.7em"><%= f.date_select :dated %></td>
          # Your form field
          <td style="width:100px;"><%= g.text_field :account_name, size: 8 %></td>
          <td style="width:100px;"><%= g.hidden_field :_destroy %><%= link_to "remove", '#', class: "remove_fields" %></td>
        </tr>
      </table>
  </fieldset> 
```

# javascript - 选择移动网站的菜单

> ID：15381588
> 
> 赞同：0
> 
> 时间：2013-03-13T09:38:50.903
> 
> 标签：javascript, jquery, css, html

我想为移动网站制作选择菜单..我把选择的html代码放在我的页面中

```
 <select id="menu_mobile"> 
<option value="" selected="selected">Navigation</option>
<option value="http://kudu.com.sa/en/about/who-we-are">  Who we are</option>
<option value="index.html">  Home</option>
<option value="index.html">  --Profile</option>
<option value="index.html">  --Franchise</option>
<option value="index.html">  --CSR</option>
<option value="index.html">  Home</option>

</select> 
```

但是当我在 iphone 上打开我的网站时，它只是选择不点击

我该如何解决

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:40:47.370

我假设您的意思是浏览器没有导航到`<select>`.

# jQuery

```
$(document).ready( function() {
   $('#select').change( function() {
      location.href = $(this).val();
   }
});

<form action="">
    <select id="select">
        <option value="">Choose a site</option>
        <option value="/internal/location.htm">Location</option>
        <option value="http://external.site.com/">Other</option>
    </select>
</form> 
```

# JavaScript

```
<form>
    <select onchange="window.location.href=this.form.URL.options[this.form.URL.selectedIndex].value" name="URL">
        <option value="">Choose a site</option>
        <option value="/internal/location.htm">Location</option>
        <option value="http://external.site.com/">Other</option>
    </select>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:47:46.693

试试这个

```
$("select").change(function() {
  window.location = $(this).find("option:selected").val();
}); 
```

它的工作[看到这个小提琴](http://jsfiddle.net/FGxWC/) 我认为你没有在你的代码中添加一个 jquery

# html - 灯箱和 iframe 全屏

> ID：15381594
> 
> 赞同：0
> 
> 时间：2013-03-13T09:39:12.093
> 
> 标签：html

当我使用 iframe 将图库嵌入到外部站点时，灯箱仅在 iframe 内加载。例如，640x800px 帧。

是否可以强制它在 iframe 之外进行全屏显示？就像视频播放器一样。

我正在使用 Foobox。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:40:37.000

您可以使用 HTML5 来完成 - 请参阅[示例](http://johndyer.name/native-fullscreen-javascript-api-plus-jquery-plugin/)、[带有 iframe 示例的 JS Bin](http://jsbin.com/aminut/1)以及[此处的文档](https://wiki.mozilla.org/Gecko%3aFullScreenAPI)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:45:28.233

您可以使用 div 代替 iframe。

```
HTML
<div id="gallery">
The gallery
</div>

CSS
#gallery {
// your css
} 
```

# c# - 此搜索代码是否具有以下任何日期格式？或不？

> ID：15381601
> 
> 赞同：0
> 
> 时间：2013-03-13T09:39:37.340
> 
> 标签：c#, sql, date, search

此搜索代码是否具有以下任何日期格式？捕捉日期格式“dd-MM-yyyy”。我的桌子是：

```
id |   dat    | user | remain
-----------------
1 | 01-03-2013 | x | 1000
----------------
2 | 01-03-2013 | x | 1200
----------------
3 | 02-03-2013 | y | 1100
----------------
4 | 02-03-2013 | y | 1300
----------------
5 | 03-03-2013 | z | 1200
----------------
6 | 03-03-2013 | z | 1400
-------------------------

private void textBox10_Leave(object sender, EventArgs e)
    {
        if ((textBox10.Text == "yyyy/MM/dd") || (textBox10.Text == "dd/MM/yyyy") || (textBox10.Text == "yyyy-MM-dd"))
        {
            textBox10.Text = "dd-MM-yyyy";
            using (SqlConnection cn = new SqlConnection(Class1.x))
            {
                cn.Open();
                string cm = "select id from item_treasury where dat='" + textBox10.Text + "' order by id";
                using (SqlCommand cmd = new SqlCommand(cm, cn))
                {
                    using (SqlDataReader dr = cmd.ExecuteReader())
                    {
                        while (dr.Read() == true)
                        {
                            if (dr.HasRows == false)
                            {
                                MessageBox.Show("xxxxxxxxxxxxxxxxxxxx");
                                this.Close();
                            }
                            comboBox1.Items.Add(dr[0].ToString());
                        }
                    }
                }
            }
        }
    } 
```

我想更正这段代码。请帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:51:30.547

谢谢大家，我最后的正确代码：

```
DateTime date;
        string[] formats = { "dd/MM/yyyy", "dd-MM-yyyy", "d/MM/yyyy", "d-MM-yyyy", "yyyy/MM/dd", "yyyy-MM-dd", "yyyy/M/dd", "yyyy-M-dd", "dd/M/yyyy", "dd-M-yyyy" }; //////////if (DateTime.TryParse(textBox10.Text, null, System.Globalization.DateTimeStyles.None, out date))
        if (DateTime.TryParseExact(textBox10.Text, formats, System.Globalization.CultureInfo.InvariantCulture, DateTimeStyles.None, out date))
        {
            using (SqlConnection cn = new SqlConnection(Class1.x))
            {
                cn.Open();
                string cm = "select id from item_treasury where dat='" + date.ToString("yyyy-MM-dd") + "' order by id";
                ///////////****
                using (SqlCommand cmd = new SqlCommand(cm, cn))
                {
                    using (SqlDataReader dr = cmd.ExecuteReader())
                    {
                        while (dr.Read() == true)
                        {
                            if (dr.HasRows == false)
                            {
                                MessageBox.Show("xxxxxxxxxxxxxxxxxx");
                                this.Close();
                            }
                            comboBox1.Items.Add(dr[0].ToString());
                        }
                    }
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:49:28.707

我认为您的文本框中有一个日期，例如 2012 年 12 月 31 日，因此您确实希望将其作为日期，并且您使用该日期进行 sql 查询。此时您只需在 TextBox 中查找格式字符串。

```
DateTime date;
if (DateTime.TryParse(textBox10.Text, (... date formats in string array), null, null, out date)
{
    ....
         string cm = "select id from item_treasury where dat='" + date.ToString("dd-MM-yyyy") + "' order by id";
    ....
} 
```

最好将日期保存为数据库中的日期，并使用参数化查询来检索数据。

# linux - 替换 bash 脚本中的变量的可选参数

> ID：15381602
> 
> 赞同：1
> 
> 时间：2013-03-13T09:39:39.717
> 
> 标签：linux, bash, variables, host

如何将可选参数传递给将替换脚本中现有变量的 bash 脚本？例如：

```
#!/bin/bash
#hostfinder.sh
#Find hosts in current /24 network

subnet=$(hostname -i | cut -d. -f1,2,3)

for j in \
    $(for i in $subnet.{1..255}; do host $i; done | grep -v not | cut -d" " -f5)
do ping -c1 -w 1 $j; done | grep -i from | cut -d" " -f3,4,5 | tr ':' ' ' | \
sed -e 's/from/Alive:/' 
```

这将获取当前主机的 IP，对可能的邻居运行反向查找，ping 测试它找到的任何主机名，并显示类似于以下的输出：

```
Alive: host1.domain (10.64.17.23)
Alive: host2.domain (10.64.17.24)
... 
```

说我疯了，但它比 nmap 快得多，而且会吐出一个不错的列表。

无论如何，我想在执行脚本时选择将任何 C 类网络地址的前三个八位字节作为 $1 参数传递给 $subnet 变量。例如：

```
./hostfinder.sh 10.20.0 
```

我的第一个想法是尝试 $subnet=$1 之类的方法，但我认为这行不通。我对重写脚本以使其更优雅或其他任何东西都不是很感兴趣，我主要只是对我在主题行中输入的内容感到好奇。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:35:11.027

怎么换：

```
subnet=$(hostname -i | cut -d. -f1,2,3) 
```

和：

```
case $# in  
  0) subnet=$(hostname -i | cut -d. -f1,2,3);;
  1) subnet="${1}";;
  *) echo "To many arguments" >&2; exit 1;;
esac 
```

*   `$#`是命令行参数的数量
*   这不太优雅，`getopt`但易于理解和扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:42:18.307

尝试使用 getopt 从命令行中读取选项，然后设置变量。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-04-16T08:19:49.637

像 LtWorf 建议的那样，尝试使用`getopt`. 它从命令行读取选项及其参数。

您可以在`getopt`这里找到一个很好的用法示例： [getopt 用法示例](http://www.bahmanm.com/blogs/command-line-options-how-to-parse-in-bash-using-getopt)

# django - AttributeError：“元组”对象没有属性“插入”

> ID：15381603
> 
> 赞同：1
> 
> 时间：2013-03-13T09:39:40.217
> 
> 标签：django, mongodb, mongoengine, django-nonrel, django-mongodb-engine

我已经安装了以下内容，来自[http://www.django-mongodb.org/topics/setup.html](http://www.django-mongodb.org/topics/setup.html)

django-nonrel

django工具箱

MongoDB引擎

安装后我尝试使用运行我的程序`python manage.py runserver`

它显示如下错误，

```
Validating models...

Unhandled exception in thread started by <bound method Command.inner_run of <django.contrib.staticfiles.management.commands.runserver.Command object at 0x1655450>>
Traceback (most recent call last):
  File "/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/django/core/management/commands/runserver.py", line 92, in inner_run
    self.validate(display_num_errors=True)
  File "/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/django/core/management/base.py", line 280, in validate
    num_errors = get_validation_errors(s, app)
  File "/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/django/core/management/validation.py", line 28, in get_validation_errors
    from django.db import models, connection
  File "/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/django/db/__init__.py", line 40, in <module>
    backend = load_backend(connection.settings_dict['ENGINE'])
  File "/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/django/db/__init__.py", line 34, in __getattr__
    return getattr(connections[DEFAULT_DB_ALIAS], item)
  File "/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/django/db/utils.py", line 93, in __getitem__
    backend = load_backend(db['ENGINE'])
  File "/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/django/db/utils.py", line 27, in load_backend
    return import_module('.base', backend_name)
  File "/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/django_mongodb_engine-0.4.0-py2.7.egg/django_mongodb_engine/__init__.py", line 13, in <module>

AttributeError: 'tuple' object has no attribute 'insert' 
```

我正在使用 Django 1.5 和 python 2.7

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:47:51.493

`django-mongodb-engine`出于某种原因，期望`settings.INSTALLED_APPS`成为一个列表。

你必须改变你的

```
INSTALLED_APPS = (
   .. apps ..
) 
```

到

```
INSTALLED_APPS = [
   .. apps ..
] 
```

这完全是`django-mongodb-engine`他们的错，他们应该感到难过。

他们有[这个问题](https://github.com/django-nonrel/mongodb-engine/issues/150)七个月并且没有表现出任何关注。

# python - SqlAlchemy Core 和裸存在查询

> ID：15381604
> 
> 赞同：8
> 
> 时间：2013-03-13T09:39:42.053
> 
> 标签：python, sqlalchemy, exists

我遇到了一个问题，我必须使用**SqlAlchemy Core**查找表中是否存在数据。

我认为执行此查询的最佳方法是使用`exists`方法，一旦找到第一个项目就会停止搜索。所以，我制作了这个版本的查询：

```
conn = self.db.connect()
query = exists().where(cookie_table.c.cookie_id == cookie_id)
result = conn.execute(query) 
```

但它会产生这个错误：

```
StatementError: Not an executable clause (original cause: ArgumentError: Not an
executable clause) 'EXISTS (SELECT * \nFROM cookie \nWHERE cookie.cookie_id = ?)' [] 
```

我尝试对其进行一些修改（与 select 结合使用），但无济于事。

所以，最终我想出了另一个解决方案，使用`limit(1)`，它有效。

```
conn = self.db.connect()
query = select([1], cookie_table.c.cookie_id == cookie_id).limit(1)
result = conn.execute(query).fetchone()
return True if result is not None else False 
```

**我有两个问题：**

如何用`exists`方法完成任务？

查询是否与`limit`一样有效`exists`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T10:53:15.667

根据[文档](http://docs.sqlalchemy.org/en/rel_0_8/core/expression_api.html?highlight=exists#sqlalchemy.sql.expression.exists)，`exists`适用于`Select`对象，并提供以下示例：

```
# use on an existing select()
s = select([table.c.col1]).where(table.c.col2==5)
s = exists(s)

# construct a select() at once
exists(['*'], **select_arguments).where(criterion)

# columns argument is optional, generates "EXISTS (SELECT *)"
# by default.
exists().where(table.c.col2==5) 
```

**那你的代码出了什么问题？**

好吧，据我了解，`EXISTS`它本身不是指令，因此尝试*执行*an`exists()`将失败，因为它不是可执行子句。

为了说明，您可以尝试使用简单的 sqlite 控制台：

*   `EXISTS(SELECT * from t);`是一个错误
*   `SELECT EXISTS(SELECT * FROM t);`按预期产生 0 或 1。

**如何解决您的问题？**

将您包装`exists()`在`select()`可执行语句中：

```
result = conn.execute(select([exists().where(cookie_table.c.cookie_id == cookie_id)])) 
```

它应该按预期工作：

```
>>> print select([exists().where(users.c.name=='test')])
SELECT EXISTS (SELECT *
FROM users
WHERE users.name = :name_1) 
```

现在，您应该使用`exists`or`limit`吗？坦率地说，我不知道，我什至不确定答案是否取决于您的数据库引擎......

# jquery - 使用 jquery ajax 调用 struts 操作更新页面内容

> ID：15381607
> 
> 赞同：1
> 
> 时间：2013-03-13T09:39:51.527
> 
> 标签：jquery, ajax, struts2

我通过从数据库中读取内容在 jsp 页面上显示图表。我想根据使用 ajax 从页面上的复选框列表中选择的项目来更改图表数据。

脚本如下

```
$('[name="overlay"]').click(function() {
        var checkeditems = new Array();
        var boxes = $('input[name=overlay]:checked');
        $(boxes).each(function(){
            checkeditems.push($(this).val());
        });

        $.ajax({
            cache: false,
            url: "getOperation.action",
            type: "POST",
            dataType: "html",
            data: "checkeditems=" + checkeditems,
            error: function(XMLHttpRequest, textStatus, errorThrown){
                alert('Error ' + textStatus);
                alert(errorThrown);
                alert(XMLHttpRequest.responseText);
            },
            success: function(data){ 
                ('#totalbox').html(data);
               }
        });

      }); 
```

在此处单击复选框列表 ( `name=overlay`) 中的任何复选框时，我将所选项目的列表传递给 struts 操作。

我能够访问`checkeditems`我的操作类中的 ，并基于它们，我从数据库中读取数据并更改用于在图表上显示数据的哈希图。（在控制台上打印 hashmap 的内容会给出正确的数据。）

但是我很困惑如何更新页面上图表中的数据。图表仅在页面刷新时更新。

由于成功返回的数据是html，我尝试在`totalbox`div上使用html(data)，它是图表的父div。

有人可以帮我弄清楚如何更新页面内容。

# jquery - 触发更改 通过ajax加载的

> ID：15381610
> 
> 赞同：1
> 
> 时间：2013-03-13T09:40:01.860
> 
> 标签：jquery, ajax, select

我很难让一个简单的事件触发与 jquery 一起工作。我正在使用 jquery 1.9.1 并且不打算降级。我缺少的一件事是[.live()](http://api.jquery.com/live)方法，该方法现在内置在[.delegate()](http://api.jquery.com/delegate)函数中。这是我想做的事情：

我有一些通过 AJAX 加载到我的页面中的 DOM，它看起来如下：

```
 <select id="equip_new">
        <option value="1">Text 1</option>
        <option value="2">Text 2</option>
    </select> 
```

现在我想触发新加载的选定选项的[.change()](http://api.jquery.com/change)函数。在旧的 jquery 中我会使用

```
 $('#equip_new').live('change', function(){
        alert(1);
    }); 
```

现在我需要使用 .delegate() 但它不会触发任何东西。我的代码如下所示：

```
 $('#equip_new').delegate('option', 'change', function(){
        alert(1);
    }); 
```

但它不起作用。

在更改通过 AJAX 加载到 DOM 的选择框中的选项时，如何正确使用委托来触发代码的任何想法？

**编辑：**我只是想通了，但想给其他人提示：

您必须在 AJAX 加载的内容上方的现有元素上调用 .delegate() 方法。例如 $('body')

我的事件处理程序绑定或委托也是错误的。我做了以下代码：

```
 $('body').delegate('#equip_new', 'change', function(){
        alert(1);
    }); 
```

现在一切都很好。有时您需要向其他人解释一些事情以了解您做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-05T15:31:46.083

@塞巴斯蒂安

.on() 方法也适用于未来的（动态创建的）元素。您只需要按照使用 deligate 的方式使用它。但是 .on() 语法是 1.7 版使用的新语法，它旨在替代 .bind()、.delegate() 和 .live()。

看小提琴：57BTd

如果您像这样使用 on() ，则在任何情况下都不会。在小提琴而不是正文标签中，您可以提供不是动态生成的文档的任何类或 id（任何父元素类或 id）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:42:47.443

使用`.on()`功能。`.live()`已弃用

```
$('#equip_new').on('change', function(){
        alert(1);
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T09:43:54.420

请参阅本指南 live () 替换为 .on() 函数

[http://jquery.com/upgrade-guide/1.9/#live-removed](http://jquery.com/upgrade-guide/1.9/#live-removed)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T09:46:50.847

是的，事件委托必须在您想要观看事件的元素的父元素上完成，如下所示：

```
$('#equip_new').parent().on('#equip_new', 'change', function(){
        alert(1);
}); 
```

# javascript - 向现有模块化模式对象添加新方法

> ID：15381614
> 
> 赞同：5
> 
> 时间：2013-03-13T09:40:10.097
> 
> 标签：javascript, design-patterns, closures

我有以下具有两种方法的模块，`A()`并且`B()`：

```
var Module = (function() {

    function A(){
      console.log("Module: A");
      B();
    };

    function B(){
       console.log("Module: B");
       Module.Utils.C(); /* Here is the problem */
    };

    return {
      A:A,
      B:B
    }

} ()); 
```

假设我想添加一个新方法`C()`......

```
function C(){
      console.log("C");
    }; 
```

...到上面的模块而不触及它，即，我不想更改现有代码，`Module`而是将其扩展为具有新`C`属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:57:15.477

在模块定义之后，您需要执行以下操作：

```
Module.Utils = Module.Utils || {};
Module.Utils.C = function(){
  console.log("C");
}; 
```

第一行检查 Module.Utils 是否已经定义，如果没有定义它。下一部分然后分配功能 C。

如果您尝试这样做，`Module.Utils.C = function(){ console.log("C"); };`那么您将收到有关 Module.Utils 未定义的错误。

我在这里创建了一个小提琴，显示它可以正常工作：http: [//jsfiddle.net/u5R4E/](http://jsfiddle.net/u5R4E/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:43:00.957

您可以动态地将方法添加到对象：

```
Module.Utils.C = function(){
  console.log("C");
}; 
```

# actionscript-3 - Flash AS3 - 位图平滑的全局值

> ID：15381621
> 
> 赞同：2
> 
> 时间：2013-03-13T09:40:27.747
> 
> 标签：actionscript-3, flash

我正在做一个项目，我们让艺术家通过将影片剪辑和位图导入库。flash，有时我正在访问具有多个位图子项的影片剪辑。我需要从代码中的各种位置访问和缩放各种位图。

我知道我可以通过访问来设置位图的平滑`myBitmap.smoothing`，但我希望有一个可以设置的全局值，以便平滑默认为真，而不是假。

我一直在查看[bitmaps 的文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Bitmap.html#smoothing)，但它没有说明任何可以用它设置的全局值。

**所以我的主要问题是：** 你们中是否有人知道为我使用的所有位图启用平滑的方法，所以我不必为我添加的每个位图设置它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T10:25:22.793

**警告：**此答案仅适用于通过新 Bitmap 调用制作的位图。

不，没有这样做的全局开关。

最简单的方法是查找新的位图调用并将平滑设置为您的来源。

您可以继承 Bitmap 类并编写修改后的构造函数

```
 package somewhere.at.your.dirs {

 import flash.display.Bitmap;

 public class MyBitmap extends Bitmap{

 public  function MyBitmap(
     bitmapData:BitmapData = null, 
     pixelSnapping:String = "auto", 
     smoothing:Boolean = true) { 

     super(bitmapData, pixelSnapping, smoothing);
 }
 }
 } 
```

将此代码保存到某处/at/your/dirs/MyBitmap.as

然后在您的文件中找到并用“new MyBitmap”替换“new Bitmap”。在这种情况下，您也应该导入某个地方。at.your.dirs.MyBitmap。一般来说，这不应该带来过敏反应。但如果函数不接受您的“MyBitmaps”，它们可以通过 (Bitmap)myBmp 转换为位图...

另一种不太实用的方法如下：

```
 package somewhere.at.your.dirs{

 import flash.display.Bitmap;

 public function newSmoothBitmap(
     bitmapData:BitmapData = null, 
     pixelSnapping:String = "auto", 
     smoothing:Boolean = true): Bitmap { 

     return(new Bitmap(bitmapData, pixelSnapping, smoothing));
 }
 } 
```

将此代码保存到某处/at/your/dirs/newSmoothBitmap.as

然后在您的文件中找到并用“newSmoothBitmap”替换“new Bitmap”。在这种情况下，您也应该导入某个地方。at.your.dirs.newSmoothBitmap。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:24:15.417

我假设您的主要问题是位图主要是手动导入 Flash IDE 并放置在影片剪辑中，这就是 Ihsan 的解决方案可能不起作用的原因，因为您没有对所有这些位图的引用。

如果确实如此，那么一个简单的解决方案是设置一个规则，然后每当导入位图时，始终选中属性框中的“**允许平滑”选项。**无论有多少人正在将位图资产导入您的项目，这都会起作用。

# javascript - 用字符串定义对象键的“路径”

> ID：15381623
> 
> 赞同：4
> 
> 时间：2013-03-13T09:40:31.047
> 
> 标签：javascript, jquery

是否可以定义`object`键的“路径”？

例如，如果您有`object`：

```
var obj = {
    hello: {
        you: "you"
    }
} 
```

我想像这样选择它：

```
var path = "hello.you";
obj[path]; //Should return "you" 
```

（显然不起作用，但有办法吗？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T09:47:49.463

快速代码，你可能应该让它防错;-)

```
var obj = {
    hello: {
        you: "you"
    }
};

Object.prototype.getByPath = function (key) {
  var keys = key.split('.'),
      obj = this;

  for (var i = 0; i < keys.length; i++) {
      obj = obj[keys[i]];
  }

  return obj;
};

console.log(obj.getByPath('hello.you')); 
```

在这里你可以测试-> [http://jsbin.com/ehayav/2/](http://jsbin.com/ehayav/2/)

mz

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T09:48:37.700

你可以试试这个：

```
var path = "hello.you";
eval("obj."+path); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T09:47:40.537

你不能这样做，但你可以编写将遍历嵌套对象的函数

```
function get(object, path) {
   path = path.split('.');
   var step;
   while (step = path.shift()) {
       object = object[step];
   }
   return object;
}

get(obj, 'hello.you'); 
```

# php - mysqli 和 bind_param - 可以使用哪些参数？

> ID：15381633
> 
> 赞同：0
> 
> 时间：2013-03-13T09:40:48.013
> 
> 标签：php, data-binding, mysqli, bind

任何人都可以确认下面的前两个陈述是好的，最后一个是错误的：

无效的：

```
$sql="SELECT Code, Name FROM Country WHERE Code LIKE ? LIMIT 5";
$stmt = $mysqli->prepare($sql);
$stmt->bind_param("s", "C%"); 
```

无效的：

```
$sql="SELECT Code, Name FROM Country WHERE Code LIKE ? LIMIT 5";
$stmt = $mysqli->prepare();
$stmt->bind_param("s", strtolower($_POST['code'])); 
```

无效（绑定的不仅仅是文字值）：

```
$sql="SELECT Code, Name FROM Country ? LIMIT 5";
$stmt = $mysqli->prepare();
$stmt->bind_param("s", "WHERE Code LIKE C%"); 
```

有效的：

```
$sql="SELECT Code, Name FROM Country WHERE Code LIKE ? LIMIT 5";
$stmt = $mysqli->prepare();
$stmt->bind_param("s", $_POST['code']); 
```

我问它是因为我想正确理解 Mysqli Prepared Statements 的基本知识。

我仍然不确定我可以输入哪些参数`bind_param()`。我可以不放变量，而是放它的值（我的第一个例子），甚至执行一些 php 函数（我的第二个例子）作为 bind_param() 中的参数吗？

[php.net](http://php.net/manual/en/mysqli-stmt.bind-param.php)说`bool mysqli_stmt::bind_param ( string $types , mixed &$var1 [, mixed &$... ] )`

但这对我来说仍然不清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:43:16.717

> 我可以不放变量，而是放它的值（我的第一个例子）

你不能。那就是问题所在。

> 我想正确理解 Mysqli Prepared Statements 的基本知识。

不要浪费你的时间，而是学习**[PDO](https://stackoverflow.com/tags/pdo/info)** Prepared Statements。
它们更加明智和实用。
它有`bindValue()`方法可以让你上面提到的一切

如果您必须使用 mysqli API - 也有一个解决方案，您可以使用构建在 mysqli 之上的[SafeMysql](https://github.com/colshrapnel/safemysql)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T18:14:34.850

对于您的第一个示例，您已`%`在`bind_param`函数中添加了。当你的 sql 查询被执行时，`%`它将被存储为一个普通的字符串，并且不会改变你的语句的功能。

对于你的第二个例子，你最好这样做：

```
$string = strtolower($_POST['code']);
$sql="SELECT Code, Name FROM Country WHERE Code LIKE ? LIMIT 5";
$stmt = $mysqli->prepare();
$stmt->bind_param("s", $string); 
```

对于您的第三个示例，`bind_param`将值转换为可以传递到数据库的“事物”，并且不允许更改您的 sql 语句，即 sql 注入。顺便说一句，你的第一个例子对这件事做同样的`%`事情。

对于您的第四个示例，它是有效的，因为它是一个没有围绕它的函数的变量。就像我的第二个例子一样。

希望这可以帮助 ：）

# sql - case，when and then on where 存储过程中的子句不起作用

> ID：15381651
> 
> 赞同：1
> 
> 时间：2013-03-13T09:41:31.177
> 
> 标签：sql, oracle, select, stored-procedures, sqlanywhere

以下存储过程基于搜索类型（id、编号、名称）和搜索文本（“三星银河”或任何其他等）进行产品搜索。让我们假设

**search_type 是名称**， **search_text 是“三星银河”**

基于此条件，我编写了以下存储过程。

```
create or replace procedure product_search(
    search_type IN varchar2,
    search_text IN varchar2,
    status IN varchar2)
is
cursor c1 is 
    SELECT p.pm_oid , p.item_name  
        FROM prism_item_hierarchy p
        WHERE 
        CASE search_type
             WHEN 'id' THEN p.pm_oid LIKE '%'||search_text||'%'
             WHEN 'name' THEN  Lower(p.item_name ) LIKE '%'||search_text||'%'
             ELSE p.item_number LIKE '%'||search_text
        END;

BEGIN
    open c1;
    -- fetch c1 into 

    close c1;

 END; 
```

但是我在 case-when-condition 上收到以下错误：

```
[Error] ORA-00905 (18: 49): PL/SQL: ORA-00905: missing keyword 
```

你能否建议我如何解决这个问题，即使你提出其他方法来解决这个问题，它也会很棒。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T09:44:47.087

这不是在 Oracle 中可以做到的。例如，您可以通过这种方式重写您的查询：

```
SELECT p.pm_oid , p.item_name  
        FROM prism_item_hierarchy p
        WHERE 
         (search_type='id' AND (p.pm_oid LIKE '%'||search_text||'%')) 
         OR (search_type='name' AND ( Lower(p.item_name ) LIKE '%'||search_text||'%'))
         OR (search_type NOT IN ('id', 'name') AND (p.item_number LIKE '%'||search_text )) 
```

我在这里所做的：我制定了一个传统的逻辑表达式，用于表达您使用该[`CASE-WHEN-THEN`](http://www.techonthenet.com/oracle/functions/case.php)构造所制定的内容。在该`WHERE`子句中，CASE-WHEN-THEN 不能按照您的方式使用 - 它返回某种值，而您没有对此做任何事情，这就是您收到“缺少关键字”错误的原因。 ..

考虑到这一点，您可以这样做，相应地定义和使用返回值（但**请注意**，在这种情况下，这是一种扭曲且丑陋的方法！）：

```
SELECT p.pm_oid , p.item_name  
        FROM prism_item_hierarchy p
        WHERE 
        1 = CASE 
                 WHEN search_type='id' AND (p.pm_oid LIKE '%'||search_text||'%') THEN 1
                 WHEN search_type='name' AND (Lower(p.item_name ) LIKE '%'||search_text||'%') THEN 1
                 WHEN search_type NOT IN ('name','id') AND (p.item_number LIKE '%'||search_text) THEN 1
                 ELSE 0
        END; 
```

但我认为您应该使用该[`IF-THEN-ELSIF-ELSE`](http://www.techonthenet.com/oracle/loops/if_then.php)构造，并将单个查询分成三个查询：

```
IF search_type = 'id' THEN
    SELECT p.pm_oid , p.item_name  
    FROM prism_item_hierarchy p
    WHERE p.pm_oid LIKE '%'||search_text||'%'

ELSIF search_type = 'name' THEN
    SELECT p.pm_oid , p.item_name  
    FROM prism_item_hierarchy p
    WHERE Lower(p.item_name ) LIKE '%'||search_text||'%'

ELSE
    SELECT p.pm_oid , p.item_name  
    FROM prism_item_hierarchy p
    WHERE p.item_number LIKE '%'||search_text

END IF; 
```

这种方法，因为它使用三个不同的查询更加优化：查询优化器将能够为每个使用不同的配置文件，所以一般来说，您最终会在每个查询上获得增强的性能。

# python - numpy 数组绘图矩阵 matplotlib

> ID：15381653
> 
> 赞同：4
> 
> 时间：2013-03-13T09:41:46.323
> 
> 标签：python, matrix, numpy

```
[ [ 99  66]
  [118  67]
  [119  67]
  [120  67]
  [121  67]
  [121  68]
  [121  70]
  [ 95  71]
  [121  71]
  [123  98]
  [133 109]
  [136 110]
  [150 126]
  [153 126]
  [153 128]
  [153 129]] 
```

我有这个 numpy 数组，其中包含我想绘制到矩阵上的坐标集。我怎样才能把这个numpy数组变成这样的东西

```
[[0 1 1 ..., 0 1 1]
 [0 0 1 ..., 1 1 1]
 [0 0 0 ..., 1 0 0]
 ..., 
 [0 0 0 ..., 0 1 0]
 [1 0 0 ..., 0 0 1]
 [0 1 0 ..., 1 1 1]]` 
```

所以我能够将我想要的东西绘制到我的矩阵上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:50:40.293

```
width = max(coord[0] for coord in coordinates)
height = max(coord[1] for coord in coordinates)
zeros_and_ones = numpy.zeros([width, height])
for x, y in coordinates:
    zeros_and_ones[x, y] = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:00:13.260

如果你有一个 numpy 数组，这可能会更快（它假设这`coord`是积极的）：

```
maxcoord = np.amax(coord, axis=0)
zeros_and_ones = numpy.zeros(maxcoord)
zeros_and_ones[coord[0], coord[1]] = 1 
```

如果`coord`由整数组成但具有负值，您可以简单地重新调整它

# php - 如何更改服务器上文件的顺序？

> ID：15381656
> 
> 赞同：0
> 
> 时间：2013-03-13T09:41:55.907
> 
> 标签：php, filesystems, cakephp-2.0, fetch

如何更改文件系统中文件的顺序？我正在使用获取。

我问的原因是因为我有一个菜单栏，它会根据“页面”文件夹中的内容自动列出我网站中的页面。我在获取时看到的方式是按字母顺序“blog.ctp、games.ctp、home.ctp、news.ctp”。所以我希望菜单栏将页面列为“BLOG GAMES HOME NEWS”，但它会将它们列为“GAMES NEWS BLOG HOME”。最终，我希望订单是“HOME GAMES BLOG NEWS”。如何更改文件的顺序？

这是我的代码，以防万一。但我的代码不是问题......我只需要知道如何更改文件夹“页面”中的文件顺序。

```
if ($handle=opendir('../View/Pages/'))
{
    while (false !== ($entry = readdir($handle))) 
    {
        if(strpos($entry,".ctp")!==False) 
            echo "<div class='menubarItem'>".$this->Html->link(substr($entry,0,-4),
                array('controller'=>'pages','action'=>'display',substr($entry,0,-4)),
                array('escape' => false)).'</div>';

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:46:13.067

在文件名的开头或结尾添加优先级标志。即 GAMES_1, HOME_2 ...etc... 使用 PHP sort() 对文件名数组进行排序，并使用 substr($filename, -2) 替换文件名的最后两个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T23:32:32.860

CakePHP`Folder`实用程序可以选择对结果进行排序；

[http://book.cakephp.org/2.0/en/core-utility-libraries/file-folder.html#Folder::find](http://book.cakephp.org/2.0/en/core-utility-libraries/file-folder.html#Folder::find)

```
App::uses('Folder', 'Utility');
App::uses('Folder', 'Utility');
$myFolder = new Folder('/path/to/directory');
$files = $myFolder->find('*.ctp', true);

foreach ($files as $filename) {

   // your code here 

} 
```

但是，如果您不想按字母顺序显示页面，请在文件名前加上数字前缀并创建特殊路径，或者*不*使用文件名进行排序，而是手动指定顺序。

最后，基于视图文件动态创建菜单的唯一原因是自动为您生成菜单。但是，这些更改可能不会经常发生，并且根据您的评论（首选顺序），您*确实*有一个特定的顺序。

最好的解决方案是手动指定排序顺序。这也将提高性能，因为服务器不必为*每个请求进行目录扫描*

例如：

```
/**
 * MenuItems
 *
 * preferable pass this as a viewVar to the View
 *
 * file => title
 */
$menuItems = array(
    'home' => 'HOME',
    'blog' => 'BLOG',
    ....
);

foreach($menuItems as $file => $title) {
     // your code here
} 
```

## 将其移至模型

在您的视图中检索文件列表*不是*应该执行此操作的位置。最好事先读取文件并通过 viewvar 将它们传递给 View。因为读取文件实际上是“检索数据”，所以您可能希望为此创建一个未连接到数据库表的模型。

### 例子

应用程序/模型/Menuoption.php

```
App::uses('Folder', 'Utility');

class Menuoption extends AppModel {
    // this model does not use a database table
    public $useTable = false;

    public function getOptions()
    {
        // NOTE: or use the 'manually' created menuItems here
        $myFolder = new Folder('/path/to/directory');
        return $myFolder->find('*.ctp', true);
    }
} 
```

在您的控制器内部；例如在 beforeRender() 回调中，或在常规操作中；

```
public function beforeRender()
{
     $this->set('files', ClassRegistry::init('Menuoption')->getOptions());

} 
```

在您的视图中，您现在可以通过`$files`变量访问结果；

```
 foreach ($files as $filename) {

   // your code here 

} 
```

# node.js - 无法在 Heroku 上部署 Hubot

> ID：15381657
> 
> 赞同：4
> 
> 时间：2013-03-13T09:42:03.033
> 
> 标签：node.js, heroku, hubot

我上个月（2 月 13 日）使用 hubot 2.4.6 在 Heroku 上部署了一个 Hubot 实例。

今天我想添加一个新脚本，但在部署回 Heroku 时出现编译错误。在更新之前，我尝试按照 wiki 说明部署一个全新的 hubot 导致完全相同的错误，这里是日志：

```
$ git push heroku master
Counting objects: 23, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (19/19), done.
Writing objects: 100% (23/23), 10.58 KiB, done.
Total 23 (delta 0), reused 0 (delta 0)

-----> Node.js app detected
-----> Resolving engine versions
       Using Node.js version: 0.10.0
       Using npm version: 1.1.65
-----> Fetching Node.js binaries
-----> Vendoring node into slug
-----> Installing dependencies with npm
       npm http GET https://registry.npmjs.org/optparse/1.0.3
       npm http GET https://registry.npmjs.org/hubot
       npm http GET https://registry.npmjs.org/hubot-scripts
       npm http 200 https://registry.npmjs.org/optparse/1.0.3
       npm http GET https://registry.npmjs.org/optparse/-/optparse-1.0.3.tgz
       npm http 200 https://registry.npmjs.org/hubot-scripts
       npm http GET https://registry.npmjs.org/hubot-scripts/-/hubot-scripts-2.4.2.tgz
       npm http 200 https://registry.npmjs.org/hubot
       npm http GET https://registry.npmjs.org/hubot/-/hubot-2.4.8.tgz
       npm http 200 https://registry.npmjs.org/optparse/-/optparse-1.0.3.tgz
       npm http 200 https://registry.npmjs.org/hubot-scripts/-/hubot-scripts-2.4.2.tgz
       npm http 200 https://registry.npmjs.org/hubot/-/hubot-2.4.8.tgz
       npm ERR! cb() never called!
       npm ERR! not ok code 0
 !     Failed to install --production dependencies with npm
 !     Heroku push rejected, failed to compile Node.js app

To git@heroku.com:radiant-taiga-1655.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:radiant-taiga-1655.git' 
```

现在 Hubot 是 2.4.8。有人有同样的问题还是我错过了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T15:25:58.147

我们遇到了同样的问题。我们通过在 package.json 中将节点版本更改为 0.8.21 来修复它。

```
"engines": {
  "node": "= 0.8.21",
  "npm": "1.1.x"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:14:11.283

所以我在 NPM 1.2.9、nodejs 0.9.12 上遇到了类似的错误并`npm cache clean`修复了所有问题。

`npm update`失败后运行，`npm cache clean`然后`npm update`再次运行。

# c++ - 如果它们发生在 Qt 中，我可以获得断言的名称吗？控制台应用程序

> ID：15381658
> 
> 赞同：0
> 
> 时间：2013-03-13T09:42:04.307
> 
> 标签：c++, qt, logging, crash, assert

我有一个长时间运行的控制台应用程序，用`C++ (Qt)`. 如果`assert`发生 - 我的应用程序崩溃非常糟糕。所以我需要知道什么断言失败了。我需要知道这一点，因为我必须找到并修复代码的错误部分。我怎样才能做到这一点？我不希望我的应用程序崩溃，但是如果断言失败导致崩溃 - 我想知道哪里出了问题。谢谢。:) PS：我可以`log`断言应用程序崩溃时的名称和位置吗？

PS2：发生的断言是内部的，例如 Qt 的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:15:09.727

您可以使用命令行参数将输出重定向到文件

```
2>&1 | tee ~/console.txt 
```

这会将 stderr 和 stdout 复制到一个 txt 文件。Q_ASSERTS 打印到 stderr，因此您现在应该能够看到输出并诊断问题

# php - 如何在 iframe 中停止 php 进程？

> ID：15381662
> 
> 赞同：-1
> 
> 时间：2013-03-13T09:42:17.870
> 
> 标签：php, iframe, rotator

我有一个旋转链接，我不想让人们在 iframe 中打开它。

如何在 iframe 中停止 php 进程？

```
header("X-FRAME-OPTIONS: DENY"); 
```

在 Firefox 和 chrome 中不起作用。我的链接是（已编辑）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:45:45.900

检查[Access-control-allow-origin](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)标头。

它允许您控制哪个域可以访问或构建您的脚本。

您可以在 3 个值之间进行选择：

*   仅来自同一个域
*   仅来自您创建的列表中列出的域
*   来自任何人（通配符）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:49:25.337

由于*PHP*从不在*iframe*中而是在服务器端执行，因此无法可靠地知道请求是否来自您网站上的*iframe*。

如果您的意图*（不太清楚）*是确保人们不会将您网站的*iframe*放在另一个网站上，那么您可以检查请求的*引用*者等。但其中大部分都可以被欺骗。

**由于评论而更新：**

不幸的是，没有好的标准化方法可以可靠地获取此类信息。如果您自己的网站上有一个 iframe，并且由于某种原因不希望它能够调用您的脚本，您可以通过 javascript 或其他方式添加一些*GET参数来做到这一点。*但是由于您可以很好地控制自己的 iframe，这应该不是问题。

但是，在确定从浏览器到服务器的请求是否源自 iframe 时，HTTP 标头中没有信息可以披露这一点。您可能会被告知的唯一一件事是该 iframe 是否来自托管在另一个域上的页面。

但是，如果您在自己的站点上有 iframe，请不要在请求中添加任何额外参数并访问其中的脚本，然后*通常*从浏览器的*主*窗口中，这两个请求在服务器上看起来是一样的。

# java - XMLConfiguration 两次写入属性

> ID：15381667
> 
> 赞同：1
> 
> 时间：2013-03-13T09:42:29.223
> 
> 标签：java, xml, configuration

我遇到了这个问题：当我调用 org.apache.commons.configuration.XMLConfiguration.save(String fileName) 时，它会写入两次未更改的属性。例如，我从这个 foo.xml 加载所有属性：

```
<config>
    <foo>value</foo>
    <bar>value2</bar>
</config> 
```

全部正确加载。然后我通过调用 XMLConfiguration.setProperty("foo", "new_value") 并立即调用 XMLConfiguration.save(fileName) 来更改 foo 值，我得到以下信息：

```
<config>
<foo>new_value</foo>
<bar>value2</bar>
<bar>value2</bar>
</config> 
```

如果关闭应用程序，重新启动并重复这些操作，柱的数量再次翻倍，但如果更改一次运行所有参数，则全部写入正确。

我试过这样写，但没有得到结果：

```
config.setProperty("bar", config.getString("bar")); 
```

请帮忙……我怀疑，这很神奇……

**UPD：问题解决了。方法很简单：不要调用 XMLConfiguration.load()，因为它已经在 XMLConfiguration 构造函数中调用了。**

# android - 单击按钮时如何首先设置列表视图位置？

> ID：15381670
> 
> 赞同：0
> 
> 时间：2013-03-13T09:42:42.110
> 
> 标签：android, listview

我想在单击按钮时执行此操作，如果再次单击，则从顶部列出的列表显示最后一项

这该怎么做

对不起我糟糕的英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:44:19.887

要重新定位您的列表视图，请使用`setSelection`，例如：

```
position = data.lenght() - 1;
listView.setSelection(position); 
```

# linux - Shell 脚本 - URL 操作

> ID：15381676
> 
> 赞同：1
> 
> 时间：2013-03-13T09:43:01.930
> 
> 标签：linux, shell, debugging, url, scripting

我需要根据文件中的值操作 URL。这是我能做的

```
var=$(grep -A2 -i "some_text" /path/to/file | grep -v "some_text" | cut -d'"' -f 4-5 | cut -d'"' -f 1 | tr -d '\n') 
```

这将给出输出：/text/to/be/appended/to/domain

现在，我需要将域名附加到`var`值。

所以我做了，

```
var1="http://mydomain" 
```

接着

```
echo ${var1}${var} 
```

所以我期待

```
http://mydomain/text/to/be/appended/to/domain 
```

成为输出。但我得到了公正`/text/to/be/appended/to/domain`。

我猜这是由于`/`as the first char，但如果我`cut`用来删除 first `/`，我会得到`var1`作为输出的值。

我哪里做错了？

更新（不确定这是否会有所帮助）：

如果我这样做`echo ${var}${var1}`，我会得到`/text/to/be/appended/to/domainhttp://mydomain`

示例条目：

```
<tr><td><a id="value">some_text</a></td></tr>
<tr><td><a id="value" href="/text/to/be/appended/to/domain">2013</a></td></tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-26T16:18:25.700

> 这一行结束 (^M) 指出在某些时候文件在 dos 环境中被编辑（创建）。使用“dos2unix yourfile”解决问题。您的脚本和示例条目。

# c# - C# WPF WebBrowser 多点触控

> ID：15381681
> 
> 赞同：1
> 
> 时间：2013-03-13T09:43:17.830
> 
> 标签：c#, wpf, google-maps, web, touch

希望有人可以提供帮助，我在将 Web 浏览器嵌入到我的应用程序以显示 Google 地图页面时遇到了一些问题。

该页面在 IE Web 浏览器和 Awesomium 中正确加载，但是我们实际上使用的是 Windows 7 触摸屏，如果我捏缩放 Google 地图，整个 Web 浏览器都会放大。它似乎没有调用 Google 上的触摸事件地图。

如果我通过 IE 或 Chrome 浏览到谷歌地图，地图支持多点触控手势，使用 chrome.exe 或 ieexplorer.exe（不嵌入应用程序）。

是否可以将相同的功能嵌入到 WPF 应用程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:50:23.433

GekoFX 似乎支持触摸事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-18T04:18:12.933

您可以考虑将[DotNetBrowser](http://teamdev.com/dotnetbrowser)作为替代方案。它的重量级模式提供了对触摸事件的支持，C# Corner 上提供了 Google 地图教程：[http ://www.c-sharpcorner.com/article/embed-google-maps-in-net-desktop-application/](http://www.c-sharpcorner.com/article/embed-google-maps-in-net-desktop-application/)

# c# - 在平板电脑上部署 Surface sdk2 应用程序

> ID：15381682
> 
> 赞同：1
> 
> 时间：2013-03-13T09:43:19.770
> 
> 标签：c#, wpf, xaml, windows-8, pixelsense

我使用visual studio 2010--> suface v2-->surface application(WPF)开发了一个表面应用程序(wpf)。

现在我想在平板电脑中测试应用程序。我在 Windows rt 和 8 上试过。但没有一个是兼容的。

这种情况下我需要什么平板电脑规格。或者我应该如何部署应用程序。

另一个问题是我们如何指定设计的分辨率。即三星 sur40 屏幕较大，平板电脑较小。我们如何在应用程序中调整它。是否需要这样的调整。正在使用的名称空间是，

```
using System;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using Microsoft.Surface;
using Microsoft.Surface.Presentation.Controls; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:19:28.240

实际上，有几个 Win 8 平板电脑可以运行完整的 Windows 8，并且可以运行 Windows 7 可以运行的所有应用程序。我正在使用 Acer W510-1666 运行我的 WPF 应用程序。

我希望这有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T18:10:58.023

要在 Windows 8 系统（专业版）上运行 Pixelsense 应用程序，您需要安装 Surface Runtime。要捕获多点触控输入，请确保应用程序在普通窗口中运行，而不是 SurfaceWindow。

# c++ - Xcode 4：为什么“继续当前行”显示为灰色？

> ID：15381683
> 
> 赞同：1
> 
> 时间：2013-03-13T09:43:21.213
> 
> 标签：c++, debugging, xcode4

当我调试我的程序时，我经常想让它从暂停的地方运行到特定的行。

在**Xcode 3**中，我可以通过单击悬停在行号旁边的按钮来做到这一点。

在**Xcode 4**中，似乎可以通过右键单击行号并选择***Continue to here 来执行此***操作，或者使用***Debug***菜单并选择***Continue To Current Line***项。

但是，当我想使用它们时，这些选项总是变灰的。

注意，我不知道这是否相关，但我使用的是 c++

有什么我做错了吗？

提前致谢，

凯文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:01:26.317

这似乎是因为您使用的是 LLDB 调试器。同样的事情发生在我身上，同时使用 LLDB 调试器和调试 C++ 代码，你可以在这里看到：

![灰色 使用 LLDB 和 C++ 继续此处](../Images/1091abefa84eadd61e5754d9ce54e619.png)

我用 Objective-C 代码对此进行了测试，这个功能在调试 Objective-C 时工作得非常好。

![继续使用 LLDB 和 Objective-C](../Images/4e53f247f1673243e178ad280e2f6281.png)

您提到的用于 Xcode 3 的绿色按钮也会弹出 Objective-C 代码（使用 Xcode 4）。正如你在这里看到的：

![绿色按钮](../Images/6640096824f794db8a4521efefe0bf8f.png)

也许这是 Xcode 中的错误，或者 Apple 只是希望您使用 Objective-C 进行编程。这似乎只是使用 LLDB 和调试 C++ 代码时的问题（我不确定 C 代码）。另一方面，使用 GDB 进行调试可以很好地处理 C++ 和 Obj-C 代码。

您目前唯一的实际选择是：

## **选项1：**

请改用 GDB 调试器，因为带有 Xcode 的 GDB 调试器支持这一点。

要更改调试器：

**第1步：**

在左上角的方案菜单下单击您的项目名称。 ![第 1 步 - 图 1](../Images/23551b48da0ba1d4d72acff8c5dde182.png) ![第 1 步 - 图 2](../Images/e8854fca69895e0197f7b50cdd318d9a.png)

**第2步：**

单击“编辑方案...”

![第 2 步 - 图 1](../Images/14d6de40fe9b3c2a48188b6fc613d057.png)

**第 3 步：**

出现“编辑方案”菜单后，单击“调试器”选项旁边的弹出菜单。

![第 3 步 - 图 1](../Images/61d1ed3c6040becd99dbc5feba43c166.png) ![第 3 步 - 图 2](../Images/2a3db3103e8db685dca7a533932dde77.png)

**第4步：**

单击选项“GDB”以使用 GDB 调试器。

![第 4 步 - 图 1](../Images/ab931ee38c594f21cab08c5f9434bb6f.png) ![第 4 步 - 图 2](../Images/07ef58f463a7c0b171e6826d1338d093.png)

**注意：** 单击 GDB 后，“Debug Process As”选项将显示为灰色。

**第 5 步：**

单击确定。

**笔记：**

我不确定在 LLDB 上使用 GDB 调试器时的限制（我认为 Xcode 不支持任何最新版本的 GDB，因为它们已切换到 LLDB 和 clang）。

## **选项 2：**

在您希望继续的地方创建一个断点，然后继续它。与右键单击并按“继续此处”或绿色按钮相比，这并不难。这也提供了相同的功能。使用键盘快捷键可以同样快（见下文）。

例如：

假设您想继续，直到您到达第 39 行。

![代码](../Images/74dd2301b85b06ccf6232c6ea8814416.png)

在第 39 行设置断点。

![设置断点](../Images/f11dde1b9f3cd5e0fa8f6d9f02c9eef3.png)

单击“继续执行程序”按钮，该按钮有点像媒体播放按钮。或者，您可以继续使用键盘快捷键：Command + Ctrl + Y，或使用菜单（产品->调试->继续）

![继续程序执行按钮](../Images/e13f64fb5aea8e98eb9dbd2794dc455a.png) ![通过菜单继续](../Images/905f4397c7349a8c745e1f1aec9b19d9.png)

**笔记：**

您需要显示的调试区域 (Shift-Command-Y)，才能看到“继续执行程序”按钮。

![调试区](../Images/c480de597d236436648a690fa1c9412e.png)

# iphone - 如何在 iPad 中创建类似选项卡的按钮以在视图之间切换

> ID：15381686
> 
> 赞同：1
> 
> 时间：2013-03-13T09:43:30.270
> 
> 标签：iphone, objective-c, uitabbar

我想`view`在`UIButtons`. `view`当用户选择每个按钮时，他/她应该能够在`views`.

我通过`view`在 .xib 中添加一个在另一个之上并设置`view.hidden = NO`and来尝试它`view.hidden = YES`。但我知道这不是实现这一点的正确方法。

各位专家能否建议一种实现这种情况的好方法？

![示例图像](../Images/c90a2f068f0a1ef931cf45852f1d0f9b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:03:44.040

您可以使用 UITabBar。但这不会给你两行标签，我猜。如果您对一行选项卡感到满意，而其他选项卡将像 iPhone 中的旧 iPod 应用程序一样被隐藏，那么 UITabBar 是一个选项。

# asp.net - asp.net 网站按钮

> ID：15381687
> 
> 赞同：2
> 
> 时间：2013-03-13T09:43:36.017
> 
> 标签：asp.net

我的网站需要一些帮助。

我有三个按钮，我需要一些帮助才能将它们链接到我在网站上拥有的内容区域。当我按下按钮时`one`，内容会发生变化`<h1>Button one<h1>`，其余代码将随之而来。我已经有内容设置，所以我只需要按钮代码的示例。网站的其余部分将是相同的。我使用的是 asp.net c# 4.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:47:56.930

要使 h1 可以从代码隐藏中访问：

```
<h1 runat="server" id="H1Control">Button one<h1> 
```

然后在 YourBtn_Click() 方法上以这种方式分配新值：

```
H1Control.InnerHtml = "New text"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:48:35.767

我假设您想在单击按钮时更改内容区域的内容。为此，您需要处理按钮的单击事件并更改单击功能的内容。在这里阅读[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.click.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.click.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:05:03.700

正如您的建议，我认为您想更改`<h1></h1>`.Here 中的内容。这是执行此操作的代码。

```
<h1 runat="server" id="something">Button 1</h1> 
```

在按钮单击事件后面的代码中执行此操作..

```
something.InnerHTML="new text" 
```

# sql - SQL Server：连接两行。使用别名的第一列和第二列中的所有列

> ID：15381694
> 
> 赞同：0
> 
> 时间：2013-03-13T09:44:00.643
> 
> 标签：sql, sql-server, inner-join

这标志着我第一次提出有关堆栈溢出的问题，并且可能是我访问该站点的第 5000 次。所以首先，感谢您的辛勤工作！

所以我在一个表上有一个基本的选择查询，它返回两行相似的数据，并通过一个共享的 PK 链接。

我想从第一行中检索所有字段，并且在别名下仅检索第二行中的一列。

基本上将两条记录拼合为一条，但仅使用第二行中的一列。

好的，这是一个屏幕截图。

[http://www.flickr.com/photos/imagevault/8581053528/](http://www.flickr.com/photos/imagevault/8581053528/)

查看第一个结果窗口，我希望第二个“Comp”值显示为第一行的附加列，作为“RentalComp”。如果给定的 propertyid 只返回一行，则它可以为 null。

谢谢！

..我不知道谷歌要做什么，所以我在这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:05:55.903

```
SELECT a.*, b.Comp AS RentalComp
FROM dbo.vwComps AS a LEFT OUTER JOIN dbo.vwComps AS b ON a.PropertyID = b.PropertyID 
AND b.ConfigurationUsed = 2
WHERE (a.ConfigurationUsed = 1) 
```

关键是在“ON”语句中指定了多个条件。然后在 where 子句中进行基本过滤。

我一直试图在它过滤掉所有东西的地方做所有事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:46:21.997

这是你要找的吗？

```
SELECT t1.*, 
       t2.col
FROM   table1 t1
       JOIN table2 t2
       ON t1.key = t2.key 
```

# css - CSS中难以对齐复选框

> ID：15381697
> 
> 赞同：0
> 
> 时间：2013-03-13T09:44:13.563
> 
> 标签：css

我很难将我的复选框（在**Weeks**下）与表单的其他部分（即**2\. Date & Time**）对齐。除此之外，我似乎无法在复选框右侧获取文本，它似乎总是出现在下方。我该如何解决这个问题？

这是我的小提琴：http: [//jsfiddle.net/4YMaQ/2/](http://jsfiddle.net/4YMaQ/2/)

**代码**

```
label {
    width: 8em;
    float: left;
    text-align: left;
    display: block;
}
select {
    width: 70%;
}
.slider, .slider2 {
    width: 100%;
    margin-top: 5px;
}
input {
    border: none;
    font-family: 'Segoe UI', arial, helvetica, sans-serif !important;
    font-size: 14px;
    padding: 0px;
    background-color: transparent;
}
.clear {
    clear: both;
}
.w50 {
    width: 50%;
}
.weeks fieldset {
    border: none;
    outline: none;
}
.weeks fieldset > legend {
    float: left;
    margin-right: 3.8em;
}
.weeks fieldset .item {
    overflow: hidden;
    margin: 0;
    padding: 0;
}
.weeks fieldset label {
    float: none;
    display: inline-block;
    vertical-align: top;
}
.left {
    float: left;
    outline: none;
}
fieldset span {
    display: inline-block;
    width: 12em;
}
.weeks fieldset span {
    display: inline-block;
    width: 2em;
}
.request_heading {
    font-size: 18px;
    font-weight: bold;
}
.page {
    padding-left: 20px;
    font-family: 'Segoe UI', arial, helvetica, sans-serif;
    padding-right: 20px;
    font-size: 14px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:48:54.547

调整 .weeks 字段集的宽度，您可以强制复选框低于周数:)

```
.weeks fieldset {
border: none;
outline: none;
width: 50px;
} 
```

它不再起作用，因为其他事情发生了变化，这是你必须做的：

```
.weeks fieldset .item {
margin: 0;
padding: 0;
width: 40px;
} 
```

删除隐藏的溢出并为此字段添加宽度。

```
.weeks fieldset {
border: none;
outline: none;
width: 124px; 
```

}

我提供的宽度可能不是您想要的宽度，请根据自己的需要调整:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:53:19.853

你的跨度是 2em（你似乎已经覆盖了下面一行的 12em），因为你的标签是 8em，这就是为什么如果你改变你的标签它们会换到下一行

如果您将跨度更改为 3.5em 并将标签更改为 1.5em，您将获得以下信息：

```
 .weeks fieldset label {width:1.5em}
 .weeks fieldset span {width:3em;} 
```

[http://jsfiddle.net/4YMaQ/6/](http://jsfiddle.net/4YMaQ/6/)

如果您更改图例的右边距，则可以在一行中放置五个：

```
 .weeks fieldset > legend {margin-right:1.1em;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T09:57:07.933

**现在只需定义**你的班级 `.weeks fieldset span` `text-align:center;`和

**定义**你的`.weeks fieldset label` `with:auto;`

**像这样**

```
.weeks fieldset span{
    text-align:center;    
}
.weeks fieldset label{
    width:auto;
} 
```

**[演示](http://jsfiddle.net/4YMaQ/12/)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T09:58:53.340

我更改了 HTML 的结构以满足您的需要，我删除了`labels`所有`inputs`.

[这是小提琴](http://jsfiddle.net/bigood/EwRxf/1/)，让我知道它是否对你足够好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-13T10:03:44.410

只需使用它`display: inline-block;`即可`item class`。**[演示](http://jsfiddle.net/4YMaQ/13/)**

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-13T10:12:21.723

将 .item-Elements 的显示更改为`inline-block`应该可以解决问题。

```
.weeks fieldset .item {
    display: inline-block;
    overflow: hidden;
    margin: 0;
    padding: 0;
} 
```

# java - 合并 2 个具有相同元素的 XML 文件并将 id 分配给唯一项目

> ID：15381700
> 
> 赞同：0
> 
> 时间：2013-03-13T09:44:24.130
> 
> 标签：java, xml, xslt

```
I have a pair of XML Files with following structure :

* the data contained here is random

        <root_tag>
        <packages>
         <package>
          <name>class_name1</name>
          <classes>3</classes>
          <functions>21</functions>
          < ncss>285</ncss>
          <javadocs>20</javadocs>
          <javadoc_lines>111</javadoc_lines>
          <single_comment_lines>11</single_comment_lines>
          <multi_comment_lines>222</multi_comment_lines>
    </package>
     </packages>

    <objects>

        <object>
          <name>object1</name>
          <ncss>255</ncss>
          <functions>17</functions>
          <classes>2</classes>
          <javadocs>20</javadocs>
        </object>

    </objects<
    <functions>
    <function>
          <name>function1</name>
          <ncss>242</ncss>
          <ccn>63</ccn>
          <javadocs>1</javadocs>
        </function>
    </functions>
    </root_tag> 
```

包中包含以下数据项：

命名类函数 ncss javadocs javadoc_lines single_comment_lines multi_comment_lines

一个对象有以下与之关联的数据项：

命名函数 ncss javadocs 类

一个函数有以下数据项：

名称 ncss ccn javadocs

假设我的第二个 xml 文件包含 function1 的一些不同值。如何将这些 xml 文件合并到第三个文件中，并为每个名称元素分配一个唯一的 id，以便输出如下：

```
File  Id    Name    Classes  Functions  NCSS JavaDocs JavaDocLines SingleCommentLines

File1 func1 somefun Null     Null       10   20       30           40

File2 func1 somefun Null     Null       11   23        40          50 
```

有没有办法通过java程序做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:27:39.080

使用 XSLT，您可以通过以下方式实现它：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="2.0">
<!-- You need to store the other inputs in xsl:variable to access it inside the same
stylesheet -->
<xsl:variable name="file2" select="document('file2.xml')"/>
<xsl:output method="xml"/>   
<xsl:template match="root_tag">
    <!--Open here your personnal layout stuffs,
    like opening tables <table:table> and things like that (column labels...)-->
    <table>
    <labels/>
    <xsl:apply-templates select=".//function | $file2//function">
         <!-- All the work is done by the xsl:sort which can specify the order you
         want to process you elements. -->
         <xsl:sort select="name"/>
    </xsl:apply-templates>
    <!-- Close here your layout stuffs -->
    </table>
</xsl:template>

<xsl:template match="function">
    <!-- Open here your layout inline stuffs-->
    <line>
    <!-- Here you may prefer to apply the templates
         in specific order in case of 'melted' input, 
        do this by calling templates in queue, like  <xsl:apply-templates
        select="name"/> <xsl:apply-templates select="ncss"/>...-->
        <xsl:apply-templates select="*"/>
    <!-- Close here your layout inline stuffs -->            
    </line>
</xsl:template>

<!-- This template may apply to anything but he's applied only on function childs
during the process -->
<xsl:template match="*">
    <!-- Open here the cell stuffs (<table:table-cell>) -->
    <cell>
    <xsl:value-of select="."/>
    <!-- Close here the cell stuffs-->
    </cell>
</xsl:template> 
```

我为“布局材料”（如表格、线条和单元格）使用了一些虚拟元素。

希望这可能会有所帮助。

# sql - SQL Server 使用 Se 变量作为列名

> ID：15381701
> 
> 赞同：0
> 
> 时间：2013-03-13T09:44:26.080
> 
> 标签：sql, sql-server, loops, concatenation

我是 SQL 新手，我想知道是否可以有一个变量，例如： `@fundCount INT = 1`然后将该变量连接到另一个将用作列名的变量，例如。`@fundColumn VARCHAR = FUND_ + @fundCount + _CODE`.

然后我想创建一个循环：

```
FOR(@fundCount < 21){0 as @fundColumn} 
```

输出将是这样的：

```
FUND_1_CODE FUND_2_CODE FUND_3_CODE  .... FUND_21_CODE 
```

以零作为列数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:54:33.620

你需要动态 SQL，你可以在

[http://www.sommarskog.se/dynamic_sql.html](http://www.sommarskog.se/dynamic_sql.html)

但请注意，除非由于某些安全风险（您也可以在网站上阅读有关它们），否则不建议使用动态 SQL。

# c# - 我想知道在迭代数据读取器对象时“yield”的连接状态和对代码性能的影响

> ID：15381708
> 
> 赞同：16
> 
> 时间：2013-03-13T09:44:47.583
> 
> 标签：c#, linq, using, datareader, yield-return

这是我用来从数据库中获取数据的示例代码：在 DAO 层：

```
public IEnumerable<IDataRecord> GetDATA(ICommonSearchCriteriaDto commonSearchCriteriaDto)
{
    using(DbContext)
    {
        DbDataReader reader = DbContext.GetReader("ABC_PACKAGE.GET_DATA", oracleParams.ToArray(), CommandType.StoredProcedure);
        while (reader.Read())
        {
            yield return reader;
        }
    }
} 
```

在 BO 层上，我调用上述方法，如：

```
List<IGridDataDto> GridDataDtos = MapMultiple(_costDriversGraphDao.GetGraphData(commonSearchCriteriaDto)).ToList(); 
```

在映射层 MapMultiple 方法的定义如下：

```
public IGridDataDto MapSingle(IDataRecord dataRecord)
{
    return new GridDataDto
    {
        Code = Convert.ToString(dataRecord["Code"]),
        Name = Convert.ToString(dataRecord["Name"]),
        Type = Convert.ToString(dataRecord["Type"])     
    };
}
public IEnumerable<IGridDataDto> MapMultiple(IEnumerable<IDataRecord> dataRecords)
{
    return dataRecords.Select(MapSingle);
} 
```

上面的代码运行良好，但我想知道上面代码的两个问题。

1.  数据读取器的连接将打开多长时间？
2.  当我只考虑代码性能因素时，使用'yield return'而不​​是将记录添加到列表中并返回整个列表是个好主意吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-13T09:54:29.180

1.  您的代码未显示您打开/关闭连接的位置；但是这里的*阅读器*实际上只会*在您迭代数据时*打开。延迟执行等。您的代码中唯一这样做的是`.ToList()`，所以它会没事的。在更一般的情况下，是的：阅读器将在您迭代它所花费的时间内保持开放；如果你这样做`.ToList()`，那将是最小的；如果你做了一个`foreach`并且（对于每个项目）发出一个外部 http 请求并等待 20 秒，那么是的 - 它会打开更长时间。
2.  两者都有其用途；非缓冲方法非常适合您想要作为流处理的巨大结果，而无需将它们加载到单个内存列表中（甚至一次将它们全部加载到内存中）；返回列表使连接保持快速关闭，并且可以很容易地避免在已经打开阅读器时意外使用连接，但对于大型结果并不理想

如果你返回一个迭代器块，调用者可以决定什么是理智的；如果你总是返回一个列表，他们没有太多选择。第三种方式（我们在 dapper 中所做的）是让他们自己选择；我们有一个可选`bool`参数，默认为“返回一个列表”，但调用者可以更改它以指示“返回一个迭代器块”；基本上：

```
bool buffered = true 
```

在参数中，并且：

```
var data = QueryInternal<T>(...blah...);
return buffered ? data.ToList() : data; 
```

在实施中。在大多数情况下，返回一个列表是完全合理的，并且可以避免很多问题，因此我们将其设为默认值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T09:56:04.767

> 数据读取器的连接将打开多长时间？

连接将保持打开状态，直到`reader`被解除，这意味着它会一直打开，直到迭代结束。

> 当我只考虑代码性能因素时，这是一个好主意，`yield return`而不是将记录添加到列表中并返回整个列表？

这取决于几个因素：

*   如果您不打算获取整个结果，`yield return`将帮助您节省在网络上传输的数据量
*   如果您不打算将返回的数据转换为对象，或者如果使用多行来创建单个对象， `yield return`将帮助您节省在程序使用高峰时使用的内存
*   如果您计划在短时间内迭代整个结果集，那么使用`yield return`. 如果迭代将在多个并发线程上持续很长时间，则可能会超出 RDBMS 端的打开游标数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T09:56:49.497

该答案忽略了所示实现中的缺陷并涵盖了总体思路。

这是一个折衷 - 如果不知道系统的限制，就不可能判断这是否是一个好主意 - 您期望获得的数据量是多少，您愿意接受的内存消耗，数据库上的预期负载， ETC

# jsf - 操作后不刷新页面

> ID：15381718
> 
> 赞同：0
> 
> 时间：2013-03-13T09:45:28.770
> 
> 标签：jsf, richfaces

嗨，我们与 a4j 标签一起使用。

在这里，我们在单击按钮后从数据库中检索数据。即使数据在服务器中可用，它也不会显示在视图中。手动刷新网页后会出现数据显示。

这是代码片段....这里有一些代码

```
 <rich:tab id="menu5" label="Recall">
  <ui:include src="/pages/mctrans/reCallMcifTrans.xhtml" />  
  </rich:tab> 
```

reCallMcifTrans.xhtml 包含以下代码

```
<h:commandButton type="button" id="reCallbutton1" value="   Search   "
    styleClass="commandExButton">
    <a4j:support event="onclick" id="ajsf12"
        oncomplete="javascript:alert('Search   Completed');javascript:document.body.style.cursor='default';"
        action="#{mcifRecallTransBean.reCallSearch}" reRender="reCallgrid1" />
</h:commandButton> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:58:30.617

看起来您正在使用 RichFaces 3.3。因此，您不需要`<h:commandButton`with，`<a4j:support>`因为您可以使用[`<a4j:commandButton>`](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/a4j_commandButton.html)它已经做到了这一点。您可以将代码重构为：

```
<a4j:commandButton type="button" id="reCallbutton1" value="Search"
    styleClass="commandExButton"
    action="#{mcifRecallTransBean.reCallSearch}"
    reRender="reCallgrid1"
    oncomplete="javascript:alert('Search   Completed');javascript:document.body.style.cursor='default';" /> 
```

确保您的`reCallgrid1`组件`<h:form>`与`<a4j:commandButton>`.

由于您还想在单击按钮*时搜索数据行为时添加等待，您可以与*[演示](http://livedemo.exadel.com/richfaces-demo/richfaces/status.jsf;jsessionid=CC5043704D1272996EE0305CCFAFDD0D?c=status&tab=usage)中所示的[`<a4j:status>`](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/a4j_status.html)一起使用。这是一个基本示例：`<a4j:commandButton>`[`<a4j:status>`](http://livedemo.exadel.com/richfaces-demo/richfaces/status.jsf;jsessionid=CC5043704D1272996EE0305CCFAFDD0D?c=status&tab=usage)

```
<a4j:commandButton type="button" id="reCallbutton1" value="Search"
    styleClass="commandExButton"
    action="#{mcifRecallTransBean.reCallSearch}"
    reRender="reCallgrid1" />
<!-- Note that there's no oncomplete in this case -->
<a4j:status for="reCallbutton1">
    <f:facet name="start">
        <h:graphicImage  value="/res/images/wait.gif"/>
    </f:facet>
</a4j:status> 
```

最后但同样重要的是，您应该将托管 bean 切换到请求范围并使用强大[`<a4j:keepAlive>`](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/a4j_keepAlive.html)的 RichFaces 来模拟 JSF 2 [`@ViewScoped`](http://balusc.blogspot.com/2010/06/benefits-and-pitfalls-of-viewscoped.html)。您甚至可以在托管 bean 上以注释的形式使用它（无需额外配置）：

```
@KeepAlive
public class McifRecallTransBean {
    //managed bean code here...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:41:24.087

当您在 bean 中使用请求参数时，您需要使用您的操作再次传递它们：

```
<h:commandButton type="button" id="reCallbutton1" value="Search" styleClass="commandExButton">
    <a4j:support event="onclick" id="ajsf12" oncomplete="javascript:alert('Search  Completed');javascript:document.body.style.cursor='default';" action="#{mcifRecallTransBean.reCallSearch}" reRender="reCallgrid1" />
    <f:param name="param1" value="#{param['param1']}" />
    <f:param name="param2" value="#{param['param2']}" />
</h:commandButton> 
```

# iphone - hide previous button only when the page number is zero and next button only when page number is 20

> ID：15381721
> 
> 赞同：0
> 
> 时间：2013-03-13T09:45:49.620
> 
> 标签：iphone, ios, button, hide, conditional-statements

I have two buttons with objects `*tmpltLeft` and `*tmpltRight`. When i launch my app, i want the previous button(`tmpltLeft`) initially to be hidden and when i press the next button(`tmpltRight`) i want the previous button(`tmpltLeft`) to be displayed and when the next button(`tmpltRight`) reaches page 20(last page) I want the next button(`tmpltRight`) to be hidden.

I have in .h file

```
IBOutlet UIButton *tmpltLeft, *tmpltRight; 
```

In .m file

```
-(IBAction)templateNavigationBtnTapped:(UIButton*)sender {
UIButton *button=sender;
switch (button.tag) {
    case 1:
        NSLog(@"prev btn tapped");
        if (pageNo>1) {
            pageNo--;
        }    
        break;
    case 2:
        NSLog(@"next btn tapped");
        if (pageNo<18) {
           pageNo++;
       }
     break;
     default:
     break;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:56:29.000

First Set `[tmpltLeft setHidden:YES];` in `-viewDidLoad`

```
 -(IBAction)templateNavigationBtnTapped:(UIButton*)sender {
    UIButton *button=sender;
    switch (button.tag) {
        case 1:
            NSLog(@"prev btn tapped");
            if (pageNo>1) {
                [tmpltRight setHidden:NO];
                pageNo--;
                if (pageNo == 1)
                {
                     [tmpltLeft setHidden:YES];
                }
            }    
            break;
        case 2:
            NSLog(@"next btn tapped");
            [tmpltLeft setHidden:NO];
            if (pageNo<18) {
               pageNo++;
               if (pageNo == 18)
               {
                    [tmpltRight setHidden:YES];
               }
           }
         break;
         default:
         break;
    } 
```

Not Implemented , but write here to get some Idea to you...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:56:43.130

You can check the page number and then hide the button. As per your code:

```
-(IBAction)templateNavigationBtnTapped:(UIButton*)sender {
    UIButton *button=sender;
    switch (button.tag) {
    case 1:
        NSLog(@"prev btn tapped");
        tmpltRight.hidden = NO; // for the next button in the last-1 page to be displayed if the page number is less than max number of pages. 
        if (pageNo>1) {
            pageNo--;
        } 
        else if (pageNo == 0)
           tmpltLeft.hidden = YES;
        break;
    case 2:
        NSLog(@"next btn tapped");
        tmpltLeft.hidden = NO; //for the previous button to be displayed when the page number is greater than 0.
        if (pageNo<18) {
           pageNo++;
        }
        else if (pageNo == 19)
            tmpltRight.hidden = YES;
        break;
    default:
        break;
   } 
```

The code is not tested, but that is the general idea.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:14:41.107

```
- (void)viewDidLoad{
    [super viewDidLoad];
    BtnCount = 0;
    previosButton.enabled = FALSE;
}
-(IBAction)previosButtonPressed:(id)sender{
    BtnCount= BtnCount-1;
    if(BtnCount==0){
        previosButton.enabled=FALSE;
    }
    if(BtnCount<19){
        nextButton.enabled= TRUE;
    }
}
-(IBAction)nextButtonPressed:(id)sender{
    previosButton.enabled = TRUE;
    BtnCount = BtnCount+1;
    if(BtnCount==19)
    {
        nextButton.enabled = FALSE;
    }   
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T13:32:10.487

```
 switch(button.tag) { case 1:
        NSLog(@"prev btn tapped");
        if (pageNo>1 || (tmpltLeft.hidden=TRUE)) {
            tmpltRight.hidden=FALSE;
            pageNo--;
            if(pageNo==1)
            tmpltLeft.hidden=TRUE;
           }
        break;
    case 2:
        NSLog(@"next btn tapped");

        if (pageNo<18 || (tmpltRight.hidden=TRUE)) {
            tmpltLeft.hidden=FALSE;
            pageNo++;
            if(pageNo==18)
                tmpltRight.hidden=TRUE;
        }
        break;
        default:
        break;
} 
```

Initially tmpltLeft button is hidden in

*   (void)viewDidLoad {

// Template Navigation Button

```
tmpltLeft.hidden=TRUE; 
```

}

# bash - 如果列小于 4，则 bash/awk 追加下一行

> ID：15381730
> 
> 赞同：2
> 
> 时间：2013-03-13T09:46:04.267
> 
> 标签：bash, awk, append

我想执行以下操作，但不知道如何在 awk 中执行此操作。如果列数小于 4，我需要附加下一行（以便它与 8 列的行匹配）

```
aaa2 17 79285137 bbb3 0.23 A X 5
aaa2 17 79287477 
aaa2 1 F F 5 
aaa2 17 79291434 bbb33 1 G X 5
aaa2 17 79292215 bcs23 1 Q X 5
aaa22 4 4201745 
aaa22 1 C C 5
.... 
```

到

```
aaa2 17 79285137 bbb3 0.23 A X 5
aaa2 17 79287477 aaa2 1 F F 5 
aaa2 17 79291434 bbb33 1 G X 5
aaa2 17 79292215 bcs23 1 Q X 5
aaa22 4 4201745  aaa22 1 C C 5
.... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:51:24.020

试试这一行：

```
awk 'NF<4{printf "%s", $0;next}1' file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T11:35:41.980

（编辑：我恢复了早期版本，否则将很难遵循..）

多一个：

```
awk '{ORS=NF<4?x:RS}1' file 
```

* * *

如果重新加入的句子部分之间不需要字段分隔符，则可以使用上述内容。这是一个将引入空间的方法：

```
awk 'ORS=NF<4?FS:RS' file 
```

* * *

即使上述选项适用于 OP 的示例输入，但如果需要连接的行少于 4 个字段（例如，需要将 2 x 3 个字段的总行连接到 6字段，上面的示例不是这种情况）

这就是我添加此选项的原因：

```
awk 'NF<4{getline $(NF+1)}1' file 
```

* * *

我查看了 Dimitre 与 Ed Morton 帖子的链接，但我认为在这种情况下，没有真正`getline`适用的警告。NF 没有得到更新的事实对于这个应用程序来说不是问题。通常我会测试 getline 的成功，但我把它留在这里，因为如果在假设的情况下最后一行的字段少于 3 个，那么输入文件将被破坏，并且这里的解决方案都不会提供100% 正确的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T09:54:05.553

这个 awk 将为您工作：

```
awk '{if (pre!="") {print pre $0; pre=""} else if (NF>=4) print; else pre=$0}' in.file 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T09:56:39.107

```
awk '{if(NF<4){x=$0;f=1;next}if(f){$0=x" "$0;f=0};print}' your_file 
```

测试：

```
> awk '{if(NF<4){x=$0;f=1;next}if(f){$0=x" "$0;f=0};print}' temp
aaa2 17 79285137 bbb3 0.23 A X 5
aaa2 17 79287477  aaa2 1 F F 5 
aaa2 17 79291434 bbb33 1 G X 5
aaa2 17 79292215 bcs23 1 Q X 5
aaa22 4 4201745  aaa22 1 C C 5
> 
```

# asp.net - ASP.NET 令人困惑的性能计数器

> ID：15381731
> 
> 赞同：1
> 
> 时间：2013-03-13T09:46:04.663
> 
> 标签：asp.net, iis, monitoring, instrumentation, health-monitoring

TechNet 论坛上一个问题的答案让我感到困惑。

[http://social.technet.microsoft.com/Forums/en-US/perfmon/thread/6cb7ebad-7735-4e2b-b48f-a82df664e2e0](http://social.technet.microsoft.com/Forums/en-US/perfmon/thread/6cb7ebad-7735-4e2b-b48f-a82df664e2e0)

克林特 说：

```
ASP.NET v2.0.50727 is an aggregate of all ASP.NET v2.0.50727 applications.
ASP.NET Apps v2.0.50727 is each ASP.NET v2.0.50727 application specifically.
ASP.NET Applications is all ASP.NET applications. 
```

但是，如果我在 ASP.NET 应用程序下选择一个计数器，实例列表只显示我的 .NET 4.0 站点，而没有显示我的 2.0 运行时站点。

克林特错了吗？

最后，有谁知道替换 Perfmon 管理单元的第三方工具，这是自 1994 年以来我们所拥有的同样糟糕的 UI。

卢克

# jmeter - Jmeter总结报告分析

> ID：15381739
> 
> 赞同：0
> 
> 时间：2013-03-13T09:46:18.613
> 
> 标签：jmeter

谁能解释一下如何分析jmeter的摘要报告？

例子：

```
Label : Login Action(sampler)
Sample# : 1
average: 104             // What does this mean actually?
min : 104                // What does this mean actually?
max : 104
stddev : 0               // What does this mean actually?
error% : 0
Throughput : 9.615384615 // What does this mean actually?
Kb/Sec : 91.74053486     // What does this mean actually?
Average Bytes : 9770     // What does this mean actually? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T11:01:15.303

这很简单：

*   **Average、min**和**max**是请求的响应时间，以毫秒为单位。os 从请求发送到响应接收的响应时间。由于您只有一个请求，因此它们当然都是平等的。

*   **stddev**是响应时间变化的度量：[http](http://en.wikipedia.org/wiki/Standard_deviation) ://en.wikipedia.org/wiki/Standard_deviation 。

*   **吞吐量**是每秒的请求数。平均响应时间略高于 100 毫秒，吞吐量略低于 10。

*   **Kb/Sec**是每秒传输的千字节数。它是**平均字节**数（每个请求）* 吞吐量。我不确定平均字节是否仅用于响应或请求和响应。我的猜测是后者。它是后者：响应标头和正文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-25T06:03:32.343

我刚刚在这里找到了非常好的和简单的解释：http: [//jmeterresults.blogspot.jp/2012/07/jmeterunderstanding-summary-report.html](http://jmeterresults.blogspot.jp/2012/07/jmeterunderstanding-summary-report.html)

# solr - 如何在不同面板中的同一搜索页面 [浏览] 上显示来自数据库和网站爬网的数据

> ID：15381742
> 
> 赞同：0
> 
> 时间：2013-03-13T09:46:27.523
> 
> 标签：solr

目前我正在我的 Solr 索引中抓取网站数据和数据库数据。但是在搜索页面上，我有 2 个面板：
1）面板 A 显示来自 DB 的结果
2）面板 B 显示来自网站抓取的结果

我无法理解我应该如何对 DB 的索引 1 和 Webcrawl 数据的索引 2 发起 2 个查询。

我面临的问题是：只有一个查询在索引上被触发。
当我触发查询时，假设索引返回 35 个结果。（DB 为 20，Web 为 10）
但在第 1 页上：如果 6 个结果是 Web 的，4 个结果是 DB，则在 10 个结果中

面板 A 显示 4 个结果 面板 B 显示 6 个结果

我希望这两个面板都有单独的结果集

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:02:13.023

如果您在将文档与数据库和网站区分开来时遇到问题，那么您可以做的一件事是，在您的 solr 文档中创建一个额外的字段，例如“源”，并在索引时根据该文档的来源在该字段中输入值。即数据库或网站

稍后您可以对索引触发过滤器查询并仅从该源获取文档。例如：source:DB "sample query" 上面的查询将带上所有匹配 "sample query" 并且以数据库为源的文档。

# visual-studio-2010 - OpenCV QT VS2010 链接错误

> ID：15381751
> 
> 赞同：0
> 
> 时间：2013-03-13T09:46:36.787
> 
> 标签：visual-studio-2010, qt, opencv

正如标题所暗示的，我正在使用 VS2010 和 OpenCV 2.4.3 和 QT 4.8。我尝试独立运行它们（OpenCV+VS2010），然后（Qt+VS2010），它们运行良好。但是当我尝试在一个程序中同时运行所有三个时，我得到一个链接器错误

```
1>LINK : fatal error LNK1104: cannot open file 'opencv_calib3d244d.lib' 
```

我试着环顾四周，但似乎找不到任何解决方案。你能建议吗？谢谢你。

# cross-platform - 动态创建应用程序栏

> ID：15381752
> 
> 赞同：0
> 
> 时间：2013-03-13T09:46:43.303
> 
> 标签：cross-platform, windows-phone-8, application-bar

我想创建`Application Bar dynamically in Windows Phone 8`. 我已使用以下代码在 appbar.cs 文件中创建应用程序栏

```
class AppBar
    {
    public AppBar()
    {
        ApplicationBar appbar;
            this.appbar = new ApplicationBar();
            this.appbar.IsVisible = true;
            this.appbar.Opacity = 1;
            this.appbar.Mode = ApplicationBarMode.Minimized;
            ApplicationBarIconButton appButon = new ApplicationBarIconButton();
            appButon.IconUri = new Uri("/images/show.png", UriKind.Relative);
            appButon.Text = "Show";
            this.appbar.Buttons.Add(appButon);
            appButon.Click += appButon_Click;

        }
     }

        void appButon_Click(object sender, EventArgs e)
        {

        }
} 
```

如果我创建了**AppBar 类的实例**，则调用了所有方法，但我无法看到应用程序栏。我给了`request to create the appbar from webview`。从 javainterface 中，我使用给定的文本和图标创建了应用程序栏的实例。如何在网页中显示此内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:59:19.060

我已经解决了我的应用程序栏问题。`Added my application bar with parent element(PhoneApplicationPage)`.

```
class AppBar
    {
    public AppBar()
    {
        ApplicationBar appbar;
        PhoneApplicationPage parentpage = (Application.Current.RootVisual as ContentControl).Content as PhoneApplicationPage; 
            parentpage.ApplicationBar =  new ApplicationBar();         
            appbar = parentpage.ApplicationBar;
            appbar.IsVisible = true;
            appbar.Opacity = 1;
            appbar.Mode = ApplicationBarMode.Minimized;
            ApplicationBarIconButton appButon = new ApplicationBarIconButton();
            appButon.IconUri = new Uri("/images/show.png", UriKind.Relative);
            appButon.Text = "Show";
            appbar.Buttons.Add(appButon);
            appButon.Click += appButon_Click;

        }
     }

        void appButon_Click(object sender, EventArgs e)
        {

        }
} 
```

# prolog - 使用 SWI-Prolog 进行字符串操作

> ID：15381756
> 
> 赞同：0
> 
> 时间：2013-03-13T09:46:59.687
> 
> 标签：prolog

我正在尝试创建一个序言程序，它接受输入“我爱你”作为字符串，然后输出

```
"i love you"
"i love yo"
"i love y"
"i love "
"i love"
"i lov"
"i lo"
"i l"
"i "
"i" 
```

我目前正在使用 SWI-Prolog，我拥有的代码如下。

```
sublist(S, L) :-
  append(_, L2, L),
  append(S, _, L2).

contains(A, B) :-
  atom(A),
  name(A, AA),
  contains(AA, B).

contains(A, B) :-
  sublist(B, A),
  B \= []. 
```

我使用以下代码来执行代码：

?- forall(contains('我爱你',X),writef("%s\n",[X])).

以下是完全如图所示生成的输出。

```
i
i 
i l
i lo
i lov
i love
i love 
i love y
i love yo
i love you

 l
 lo
 lov
 love
 love 
 love y
 love yo
 love you
l
lo
lov
love
love 
love y
love yo
love you
o
ov
ove
ove 
ove y
ove yo
ove you
v
ve
ve 
ve y
ve yo
ve you
e
e 
e y
e yo
e you

 y
 yo
 you
y
yo
you
o
ou
u 
```

我感谢任何和所有的帮助。提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:28:12.967

我不完全理解您的要求（您的意思是`that accept input "i love you" as a string`什么？）但您并不真的需要一个程序来产生该输出：

```
?- forall(append(_, [F|S], "I love you"), format('"~s"~n', [[F|S]])).
"I love you"
" love you"
"love you"
"ove you"
"ve you"
"e you"
" you"
"you"
"ou"
"u"
true. 
```

append/3 的第二个参数已被“模式化”为长度至少为 1，以避免最后一个空字符串，否则会导致。

*编辑*答案到目前为止它是错误的：我没有注意到它显示了尾巴！这是一个经过调试的过程，但*不*充当生成器：

```
pheader([X]) :-
    format('~s~n', [[X]]), !.
pheader(L) :-
    format('~s~n', [L]),
    L = [_|Xs],
    pheader(Xs). 
```

产量

```
?- pheader("i love you").
"i love you"
" love you"
"love you"
"ove you"
"ve you"
"e you"
" you"
"you"
"ou"
"u"
true. 
```

那么你*需要*一个“程序”来完成它，最后！

*编辑*以恢复初始行为（标头生成器），这里有 2 个参数过程

```
pheader([X|Xs], [X|Xs]).
pheader([_|Xs], R) :-
    pheader(Xs, R). 
```

最后产生所需的输出：

```
?- forall(pheader("i love you",X),format('"~s"~n', [X])).
"i love you"
" love you"
"love you"
"ove you"
"ve you"
"e you"
" you"
"you"
"ou"
"u"
true. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:50:44.183

要删除列表的最后一个元素，您可以使用`append(WithoutLast, [Last], List)`：

```
foo([]) :- !.
foo(S) :- format('"~s"~n', [S]), append(S1, [_Last], S), !, foo(S1).

?- foo("i love you").
"i love you"
"i love yo"
"i love y"
"i love "
"i love"
"i lov"
"i lo"
"i l"
"i "
"i"
true. 
```

如果你不希望它是确定性的，你可以删除削减。

# cordova - 页脚问题中的滑块/范围控制

> ID：15381757
> 
> 赞同：0
> 
> 时间：2013-03-13T09:47:01.243
> 
> 标签：cordova, phonegap-build

在将 PhoneGap (Android) 添加到 jQM Web 应用程序时，应位于页脚中的 jQM 滑块控件被移除并由 PhoneGap (?) 放置在页脚中。使用 Adob​​e PhoneGap Build。

```
<div data-role="footer" data-position="fixed" data-theme="d" data-id="nav">
<div data-role="navbar" id="mynav">
<ul>
<li><input type="range" name="dayslider" id="dayslider" value="180" min="1" max="365" data-highlight="true" /></li>
<li><input type="button" data-icon="check" data-iconpos="bottom" value="Animate" id="animate" onclick="animY()"></li>
</ul>
</div>
</div> 
```

可能是什么原因？对 jQM 页脚中的内容是否有任何限制（通过 PhoneGap）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:23:42.193

那应该行得通。我发现 JQM，data-position="fixed" 不适用于所有设备并更改为绝对 CSS 定位。但是，您在第二个输入中缺少“/”。这可能会导致问题。

```
<input type="button" data-icon="check" data-iconpos="bottom" value="Animate" id="animate" onclick="animY()"> 
```

应该：

```
<input type="button" data-icon="check" data-iconpos="bottom" value="Animate" id="animate" onclick="animY()"/> 
```

# oauth - Oauth2.0 认证 Google Adsense

> ID：15381759
> 
> 赞同：0
> 
> 时间：2013-03-13T09:47:06.500
> 
> 标签：oauth, oauth-2.0

我正在尝试使用 Oauth2 进行身份验证。我早期的实现是使用 OAuth2Draft10 但由于它现在已弃用，所以我想转移到 OAuth2.0 [http://www.proksi.us/browse.php?u=Oi8vY29kZS5nb29nbGUuY29tL3AvZ29vZ2xlLWFwaS1qYXZhLWNsaWVudC93aWtpL09BdXRoMg%3D%3D&b=1](http://www.proksi.us/browse.php?u=Oi8vY29kZS5nb29nbGUuY29tL3AvZ29vZ2xlLWFwaS1qYXZhLWNsaWVudC93aWtpL09BdXRoMg%3D%3D&b=143)

我的是一个已安装的应用程序，我正在关注[http://www.proksi.us/browse.php?u=Oi8vY29kZS5nb29nbGUuY29tL3AvZ29vZ2xlLWFwaS1qYXZhLWNsaWVudC93aWtpL09BdXRoMg%3D%3D&b=143#Installed_Applications](http://www.proksi.us/browse.php?u=Oi8vY29kZS5nb29nbGUuY29tL3AvZ29vZ2xlLWFwaS1qYXZhLWNsaWVudC93aWtpL09BdXRoMg%3D%3D&b=143#Installed_Applications)

但是在这里调用 authorize() 方法时遇到问题，无法通过 VerificationCodeReceiver。

任何帮助或任何指南，我可以从中找到错误或失踪的地方..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:27:02.993

解决 ..：）

无需验证码接收器。

```
 public static Credential authorize() throws Exception {
        // load client secrets
        GoogleClientSecrets clientSecrets = GoogleClientSecrets.load(
            JSON_FACTORY, AdSenseSample.class.getResourceAsStream("/client_secrets.json"));

        // set up file credential store
        File jsonFile = new File("/adsense.json"); 

        FileCredentialStore credentialStore = new FileCredentialStore(jsonFile, JSON_FACTORY);

        // set up authorization code flow
        GoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(
            HTTP_TRANSPORT, JSON_FACTORY, clientSecrets,
            Collections.singleton(AdSenseScopes.ADSENSE_READONLY)).setCredentialStore(
            credentialStore).build();
        // authorize
        return new AuthorizationCodeInstalledApp(flow, new LocalServerReceiver()).authorize("user");
      } 
```

谢谢..：）

# android - 活动暂停时可运行停止

> ID：15381761
> 
> 赞同：0
> 
> 时间：2013-03-13T09:47:07.880
> 
> 标签：android, runnable

我通过使用 Runnable 更新 TextView 文本来完成时钟。当我在活动中时，TextView 会正确更新，但是当我离开并返回活动时，`run()`方法中的代码不再执行。

我必须在我的活动`run()`中再次调用吗？`onResume`为什么？mTicker Runnable 是否已停止？

**我的活动.java**

```
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    mHandler = new Handler();

    mTicker = new Runnable() {
        public void run() {
            if(mClockStopped) return;
            long now = System.currentTimeMillis();
            mCalendar.setTimeInMillis(now);  
            mClock.setText(DateFormat.format("kk:mm", mCalendar));
            mClock.invalidate();
            long upTime = SystemClock.uptimeMillis();
            long next = upTime + (60000 - now % 60000);
            mHandler.postAtTime(mTicker, next);
        }
    };
    mTicker.run();

    /* more stuff */

}

@Override
    public void onResume()
    {
        super.onResume();
        mClockStopped = false; 
    }

    @Override
    public void onPause()
    {
        mClockStopped = true;        
        super.onPause();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:51:41.693

也许不是那么简单，但是将 mClockStopped 设置为 true 会使您的 runnable 的 run() 退出。

你应该打电话

```
mClockStopped = false; 
mTicker.run(); 
```

在`onResume`

# django - django 1.5 管理员内联额外

> ID：15381773
> 
> 赞同：14
> 
> 时间：2013-03-13T09:48:00.487
> 
> 标签：django, django-admin, django-1.5

我有一些带有大量内联的模型。由于并非每个对象都需要所有对象，因此我声明了内联模型，`extra = 0`因此内联上出现了一个小对象`add +`。

但是，这似乎不再适用于 django 1.5。如果`extra = 0`设置，则内联不再可编辑。

有没有办法把 1.4 的行为变成 1.5？

示例代码：

```
class ModelInline(admin.StackedInline):
    model = MyModel
    extra = 0

class OtherModelAdmin(admin.ModelAdmin)
    inlines = [ModelInline]

admin.site.register(OtherModel, OtherModelAdmin) 
```

编辑（一些屏幕）：

Django 1.4： ![django 1.4 额外=0](../Images/f08d0af771809762942b204434f058cb.png)

Django 1.5： ![在此处输入图像描述](../Images/be3af419ac34d92d80bd6baf78edcbb0.png)

（欣祖夫根 == 添加）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T13:55:13.343

这在以前已经发生过。

```
The new javascript made this impossible because the "Add Another" button 
was controlled by max_num, and ignored a value of 0.
The javascript ignored a value of 0 because max_num has a default value of 0, 
and all the code using it had taken to equating max_num = 0 with being "off". 
So you can't actually have a maximum of 0\. It's not possible. 
```

Gabrial Hurley 创建了一个补丁来恢复所需的行为而不会破坏其他任何东西。这是 3 年前的事了，我不知道它是否仍然适用于 Django 1.5。你试一试 ：）

[https://code.djangoproject.com/attachment/ticket/13023/13023_inlines_patch.diff](https://code.djangoproject.com/attachment/ticket/13023/13023_inlines_patch.diff)

这是同一错误的票（3年前）：

[https://code.djangoproject.com/ticket/13023](https://code.djangoproject.com/ticket/13023)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T16:51:57.723

我遇到了同样的问题，因为我在 django 安装之外的目录中有静态管理内容。将 Django 1.5 静态内容从 django/contrib/admin/static/admin/js/ 复制到 STATIC_ROOT/admin/js 解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-19T11:33:41.267

更好的解决方案是覆盖内联本身的 get_extra 方法。这适用于 Django 1.9，但我不能说早期版本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-03T11:22:01.167

您所要做的就是添加`extra`字段。

* * *

例如：

1.  `models.py`：

```
 class Category(models.Model):
    name = models.CharField(max_length=50)
    def __str__(self):
        return self.name

class Product(models.Model):
    name = models.CharField(max_length=50)
    price = models.IntegerField()
    category = models.ForeignKey(Category, on_delete=models.CASCADE)

    def __str__(self):
        return '{}, {}'.format(self.name, self.company) 
```

2.  `admin.py`：

```
 class InlinesProduct(admin.StackedInline):
        model = Product
        extra = 0     #<=== For remove empty fields from admin view

    @admin.register(Category)
    class CategoryAdmin(admin.ModelAdmin):
        inlines = [InlinesProduct] 
```

# knockout.js - 淘汰js确保一个值大于另一个

> ID：15381777
> 
> 赞同：0
> 
> 时间：2013-03-13T09:48:11.963
> 
> 标签：knockout.js

我有以下业务需求：

有 2 个文本框，用户需要在其中输入他们的当前年龄和退休年龄。退休年龄需要大于当前年龄，因此如果用户输入的退休年龄小于当前年龄，则应将退休年龄更新为当前年龄，如果用户输入的当前年龄大于退休年龄年龄则必须将退休年龄设置为当前年龄。

有没有一种简单的方法可以使用淘汰赛 js 做到这一点？我假设我需要一个带有某种后备存储的两个字段的计算 observable？

这是我的出发点：http: [//jsfiddle.net/RVNHy/](http://jsfiddle.net/RVNHy/)

js：

```
var viewModel = function() {
    this.currentAge= ko.observable(32);
    this.retirementAge = ko.observable(44);  
};

ko.applyBindings(new viewModel ()); 
```

html:

```
<div class='liveExample'>   
    <p>Current Age: <input data-bind='value: currentAge' /></p> 
    <p>Retirement Age: <input data-bind='value: retirementAge' /></p> 
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:59:27.153

是的，这就是你想要的：

```
function MyViewModel() {
    var self = this;
    var age= ko.observable(32);
    var retAge = ko.observable(44); 

    self.currentAge = ko.computed({
        read: function () {
            return age();
        },
        write: function (value) {
            retAge(Math.max(value, retAge));
            age(value);
        },
        owner: this
    });
} 
```

并为退休年龄创建一个计算的 observable。

# drupal - 从一个共享主机迁移到另一个共享主机会在站点/默认/文件上引发权限错误

> ID：15381779
> 
> 赞同：0
> 
> 时间：2013-03-13T09:48:18.547
> 
> 标签：drupal, permissions, drupal-7, cpanel, shared-hosting

我们在共享主机（A）中安装和配置了 Drupal 7，现在我们正在将其迁移到另一个共享主机（B），在此期间，sites/default/files 目录在其中创建文件和目录时会引发权限错误。我们曾尝试将文件目录的权限暂时更改为 777，但一旦我们更改它，权限就会自动更改回 775。有没有人遇到并解决过这样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:00:28.063

我的猜测是您无权将目录更改为 777。请与您的主机提供商联系。这是共享主机的常见问题；它们限制 FTP 用户的权限以避免安全风险。

托管公司应该能够帮助您！

# c# - 在 Objective c 和 C# 之间使用 AES128 加密/解密

> ID：15381780
> 
> 赞同：1
> 
> 时间：2013-03-13T09:48:18.767
> 
> 标签：c#, objective-c, encryption, aes

我在目标 c（iPad 端）和 C#（.net，服务器站点）之间使用加密/解密。我正在使用此链接中的代码： [iPhone/C# AES Encryption](http://automagical.rationalmind.net/2009/02/12/aes-interoperability-between-net-and-iphone/)

我们在服务器端加密 XML 并使用 Web 服务将其发送到 iPad 端。在 iPad 端，当我尝试解密时，它正在创建解密数据，但无法将该数据转换为字符串。使用 NSUTF8StringEncoding 将数据转换为字符串时会出现一些问题。

在从服务器发送到 iPad 之前，我们将其转换为 base64 字符串。

在 iPad 端加密和解密时相同的 XML 文件可以正常工作。

我相信来自服务器端的加密数据中有一些特殊字符，因此在iPad端没有解密。

任何人都可以给我任何建议。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:06:36.957

您不能通过网络发送加密字符串。您需要将加密的 NSString 转换为 Base64 字符串。然后将此 Base 64 字符串发送到 ipad。

# c# - 将变量传递给列表视图中的用户控件（asp.net，c#）

> ID：15381781
> 
> 赞同：3
> 
> 时间：2013-03-13T09:48:20.920
> 
> 标签：c#, asp.net, listview, user-controls

我想从 to 传递一些动态信息`listview`，`UserControl`但我想我错过了一些东西。

.aspx 页面：

```
<asp:ListView ID="ListView1" runat="server" DataSourceID="SqlDataSource"
        DataKeyNames="id_Image">
  <ItemTemplate>
       <uc1:Info Name_Lbl='<%# Bind("Name") %>'   Description_Lbl='<%# Bind("Description")%>' ID="info1"  runat="server" />
  </ItemTemplate>
</asp:ListView> 
```

.ascx 文件：

```
Name:
<asp:Label ID="NameLabel" runat="server"  />
Description:
<asp:Label ID="DescriptionLabel" runat="server"  /> 
```

.ascx 代码隐藏文件：

```
public string Name_Lbl { get; set; }
public string Description_Lbl { get; set; }

protected void Page_Load(object sender, EventArgs e)
{  
    NameLabel.Text = Name_Lbl;
    DescriptionLabel.Text = Description_Lbl;  
} 
```

如果我试图从字符串文本中获取价值，一切都很好：

```
<uc1:Info Name_Lbl="Name"   Description_Lbl="Description" ID="info1"  runat="server" /> 
```

但是当我试图从中获取值时`Datasource`，usercontrol 中的字符串值为“null” 谁能看到我做错了什么？谢谢，吉姆·奥克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T10:14:33.517

DataBinding 在控件生命周期中发生的时间比`Load`.

您在 Load 上分配文本，但您的控件仅在`DataBind`

要解决此问题，您可以设置 text `OnPreRender`。这发生在`DataBind`

```
protected override void OnPreRender(EventArgs e)
{  
    NameLabel.Text = Name_Lbl;
    DescriptionLabel.Text = Description_Lbl;  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:55:07.190

您的代码中的一切看起来都很好，只需检查代码行：

```
<uc1:Info Name_Lbl='<%# Bind("Name") %>'   Description_Lbl='<%# Bind("Description"%>' ID="info1"  runat="server" /> 
```

您缺少针对 Description_Lbl 的右括号“)”。它应该是：

```
<uc1:Info Name_Lbl='<%# Bind("Name") %>'   Description_Lbl='<%# Bind("Description")%>' ID="info1"  runat="server" /> 
```

# c++ - visual studio 2010 c++ 正在收集项目信息时请稍候 永不关闭

> ID：15381785
> 
> 赞同：1
> 
> 时间：2013-03-13T09:48:37.950
> 
> 标签：c++, visual-studio-2010

我在 Visual Studio 2010 Express 中使用新的 C++ 框架（在本例中为 cocos2d-x），但是当我创建一个新的测试项目时，我得到这个窗口，上面写着：

“正在收集项目信息，请稍候”

问题是窗口永远不会关闭并且它阻止我编辑代码。
我怎样才能强制关闭它或做任何事情呢？ ![在此处输入图像描述](../Images/b7b57a4dc683a0f3ae5d6850b6bbe1a2.png)

# android - 多用户聊天 addinvitationlisterner 不工作

> ID：15381787
> 
> 赞同：2
> 
> 时间：2013-03-13T09:48:43.627
> 
> 标签：android, xmpp, smack

我目前正在进行群聊，当有人邀请我时我无法收到任何通知。我正在使用服务来跟踪通知，并且我的服务类实现了邀请监听器。

```
 public void onCreate() {
  //code to execute when the service is first created
    Log.d("Service", "Start myCityMessageService");
    this.receive_manager = MyCityUtils.getReceiveManager();
    this.receive_manager.registerReceivedObserver(this);       
    MultiUserChat.addInvitationListener(MyCityUtils.getChatHandler().getConnection(), this);

}
   @Override
public void invitationReceived(Connection con, final String room, final String inviter, String reason, String pass, Message msg)
{
    Log.i("Invite","Here it is");
    handler.post(new Runnable() {  
        DialogInterface.OnClickListener dialogClickListener = new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                switch (which){
                case DialogInterface.BUTTON_POSITIVE:
                    //Yes button clicked
                    Intent intent = new Intent(getApplicationContext(), GroupChatMessageScreenActivity.class);

                    startActivity(intent);
                    break;

                case DialogInterface.BUTTON_NEGATIVE:
                    //No button clicked
                    MultiUserChat.decline(MyCityUtils.getChatHandler().getConnection(), room, inviter, "Busy");
                    break;
                }
            }
        };
        @Override  
        public void run() {  
            AlertDialog.Builder builder = new AlertDialog.Builder(getApplicationContext());
            builder.setMessage(inviter + "invite you to a group chat.\nWant to Join?")
                .setPositiveButton("Yes", dialogClickListener)
                .setNegativeButton("No", dialogClickListener).show();   
        }  
     });  

} 
```

不正确的部分是什么？？另外，我想跟踪房间里有多少人，并希望显示他们的所有名字。有什么办法可以做到吗？

# jasper-reports - 如何在碧玉报告中获得两个日期之间的天数

> ID：15381793
> 
> 赞同：-1
> 
> 时间：2013-03-13T09:49:07.323
> 
> 标签：jasper-reports

我有两个日期，一个是`assign_date`（指定日期），另一个是`complt_date`（完成日期）。我必须得到两个日期之间的天数。

```
DATE ASSIGNED : 04-27-2012
DATE COMPLETED: 04-27-2012
THUS DAYS     : 0

NOT COMPLETED (AS OF 03-13-2013)
DATE ASSIGNED : 04-20-2012
DATE COMPLETED:
THUS DAYS     : 327 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:21:41.613

您可以在查询级别执行此操作，这可能更容易。

对于 MySQL 数据库，有一个名为 DATEDIFF 的函数：-

```
ex:-  SELECT DATEDIFF(complt_date,assign_date) AS DiffDate 
```

# c++ - 用 C++ 编写解释器

> ID：15381794
> 
> 赞同：0
> 
> 时间：2013-03-13T09:49:08.120
> 
> 标签：c++, regex, qt, interpreter

我正在开发一个 C++ 项目，该项目应该执行以下操作：

* * *

1.  打开一个 .txt 文件，其中包含字符串列表（例如 String1: " **Hi,name_1_is,;Ondrej,age24;year,,88;** "），可选值由空逗号 " **,,** " 确定。

2.  在此之后，使用正则表达式检查每个字符串的有效输入（例如“ **Hi** ”不应该是数字或“ ***1*** ”必须是数字，并且带有“ **,,** ”的所有内容都是可选的，可以跳过，或者用户可以输入此值作为出色地）。

3.  然后评估结果并将其保存到变量或新的 .txt 生成文件中。

4.  此结果显示整个字符串是否正确并附加了“ **ok ”消息，或者它会将“** **not ok** ”消息附加到错误输入的参数。

* * *

*   我已经完成了打开一个 .txt 文件、检查整个字符串并将正确的字符串保存到新文件中的部分（使用**Qt**和**Visual Studio 2010 Express**）。

*   我需要做检查每个参数的部分，但不知何故我不知道如何准确，因为我不应该**构建**Parser**但**整个程序**必须**像**Interpreter**一样构建。

实际上我被困在这一点上，因为我不知道如何像解释器一样开始构建它。

我所有的尝试总是使用类似于 Parser 的结构（这意味着：我使用拆分字符串，然后使用正则表达式检查每个标记或字符，然后再次将字符串构建在一起，等等。）

您能否为我提供一些有用的链接或提示，说明如何实现这一目标，或者至少从哪里开始？

# racket - 如何编写一个只返回嵌套列表中奇数的函数？

> ID：15381795
> 
> 赞同：-2
> 
> 时间：2013-03-13T09:49:09.460
> 
> 标签：racket

如何`odd-list`使用球拍语言编写如下工作的函数？

```
(odd-list '((1 2 3 4) (5 6 7 8) (10 11 12 13))) => ((1 3) (5 7) (11 13)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:18:16.957

```
(require srfi/26)
(define (odd-list lists)
  (map (cut filter odd? <>) lists)) 
```

享受。:-)

# delphi - 在 Firemonkey 中移动无边界表单

> ID：15381796
> 
> 赞同：1
> 
> 时间：2013-03-13T09:49:13.487
> 
> 标签：delphi, firemonkey, delphi-xe3

在 VCL 表单中我使用**WM_SYSCOMMAND**，但在 firemonkey 中它是未声明的。

我测试这段代码：

```
procedure TForm4.dragPanelMouseDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Single);
begin
  isDraging := true;
  X0 := X;
  Y0 := Y;
end;

procedure TForm4.dragPanelMouseMove(Sender: TObject; Shift: TShiftState;
  X, Y: Single);
begin
  if isDraging then
  begin
    Form4.Left := Trunc(Form4.Left + X - X0);
    Form4.Top := Trunc(Form4.Top + Y - Y0);
  end;
end;

procedure TForm4.dragPanelMouseUp(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Single);
begin
  isDraging := False;
end; 
```

这有效，但只适用于慢动作！！！

如何在 Firemonkey 中移动表单？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-02-20T06:20:53.090

更简单的是使用 Form 的 StartWindowDrag 方法。这样它就可以在 Windows 和 MacOS 中运行，而且它只有 1 行代码。像这样：

```
procedure TForm4.dragPanelMouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Single);
begin
    Self.StartWindowDrag;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T13:14:50.380

如果您要复制的 VCL 代码是：

```
SendMessage(MyForm.Handle, WM_SYSCOMMAND, SC_DRAGMOVE, 0); 
```

那么 FMX 的等价物将是：

```
SendMessage(FmxHandleToHWND(MyForm.Handle), WM_SYSCOMMAND, SC_DRAGMOVE, 0); 
```

原因是这`MyForm.Handle`是一个 FMX 句柄。这与窗口句柄不同。您使用 转换为窗口句柄`FmxHandleToHWND()`。

您可能需要声明几个常量：

```
const
  WM_SYSCOMMAND = $0112;
  SC_DRAGMOVE = $F012; 
```

# macros - 在 Umbraco 中使用 DAMP 数据类型作为宏参数

> ID：15381798
> 
> 赞同：2
> 
> 时间：2013-03-13T09:49:16.060
> 
> 标签：macros, umbraco

我刚刚开始研究在 Umbraco 中使用 DAMP 媒体选择器。我希望能够创建一个可以在编辑器中使用的自定义宏。在该宏中，我希望用户能够选择一个或多个媒体项目（即一组图像用于图库）。

DAMP 媒体选择器让我可以做到这一点，因为相关的数据类型似乎只能作为文档类型的通用属性使用。

有没有办法从内部使用 DAMP 媒体选择器作为自定义宏参数。

我四处搜索，几乎找不到非常有用的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:24:13.503

通过阅读一些 DAMP 源代码（[http://damp.codeplex.com/SourceControl/changeset/view/b3b45c70ce29#DAMP.RazorModel/DAMP_Item.cs](http://damp.codeplex.com/SourceControl/changeset/view/b3b45c70ce29#DAMP.RazorModel/DAMP_Item.cs)），看起来 DAMP 节点选择器将像 ucomponents multinodepicker 一样存储.

如果是这样，则 DAMP 选择器（如多节点选择器）应存储为 XML - 然后可以用作宏参数（[http://our.umbraco.org/projects/backoffice-extensions/ucomponents/questionssuggestions/19682-Can-I -pass-a-MultiNode-as-Parameter-to-Macro](http://our.umbraco.org/projects/backoffice-extensions/ucomponents/questionssuggestions/19682-Can-I-pass-a-MultiNode-as-Parameter-to-Macro) )

或者 propertyTypePickerMultiple 可以工作（[http://our.umbraco.org/forum/developers/xslt/8135-Looping-through-all-values-of-a-propertyTypePickerMultiple-in-XSLT](http://our.umbraco.org/forum/developers/xslt/8135-Looping-through-all-values-of-a-propertyTypePickerMultiple-in-XSLT)）

# php - 如何使用 Javascript / PHP / MySQL 定义和使用站点级别的“用户权限级别”变量

> ID：15381800
> 
> 赞同：1
> 
> 时间：2013-03-13T09:49:23.697
> 
> 标签：php, javascript, global-variables, privileges, access-levels

我通常倾向于特定的技术问题，但这是一个相当开放的问题，但仍处于问答而非讨论的范围内。

它考虑了用户级别权限的最佳实现，以规范在 Web 应用程序中可以做什么和不可以做什么。

我将从一个例子开始。我想从数据库中删除一部分。我以 Jon Doe 身份登录。Jon Doe 具有访问权限级别 1（sql 数据库中的列），因此无法删除部分。我将使用 javascript (jQuery) 来触发 ajax PHP 函数来执行删除。

所以，我想出了一些选择，但我相信还有更好的选择。

1.  我可以在登录时设置一个 PHP“用户级”会话变量，在 Ajax PHP 删除请求中评估并返回成功函数，让用户知道访问被拒绝。

    优点：访问速度快，简单

    缺点：我必须运行 PHP 请求，并且评估成功是否混乱

2.  我可以运行一个 PHP 预定义函数，在 Ajax PHP 删除请求中查询 mySQL 的用户权限，然后返回成功函数并让用户知道访问被拒绝。

    优点：实时评估（不一定很关键，但允许在用户保持登录状态时更改权限）

    缺点：我必须运行 PHP 请求，并且评估成功与否

3.  我可以在运行 Ajax PHP 删除请求之前查询的 Ajax Javascript / PHP 登录过程中创建一个全局“用户级”javascript 变量（附加到窗口？）。

    优点：停止不必要的 ajax 请求，非常简洁和容易

    缺点：似乎它可能很脆弱

我希望在整个应用程序中对用户特权进行相当程度的评估，因此我很感激专家为解决我认为相当普遍的问题所做的任何建议。我可能错过了一些明显的东西。

谢谢。

** 作为回应 **

啊，这很有趣。是的，有一个加载模板界面，每个内容面板都是通过 ajax 加载的。我并没有真正考虑将禁用或删除界面按钮作为“先发制人的打击”。我也喜欢先进行 javascript 检查，同时在 PHP 端进行检查来支持它的想法。如果用户已经未能达到所需的访问级别，这将避免我不得不执行不必要的 Ajax 调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:02:22.400

为了安全性和可用性，从 PHP 端处理这个，利用会话来存储用户的 ID。当且仅当用户具有删除权限时，让 PHP 提供删除链接。收到删除请求后，再次检查用户是否具有删除权限。这样可以确保如果用户在收到删除链接后失去权限，他/她将无法删除。如果您在应用程序中大量使用 AJAX 并且界面只加载一次，如果用户的权限已增强，则在收到任何请求时，您应该将某种状态变量发送到浏览器。此状态变量应触发 UI 重新加载，以便现在启用适当的链接/按钮/功能。这不是最简单的解决方案，但它是最强大的，并且允许一切听起来像你的东西'

# json - 调用传递字符串 id 参数的 WebAPI 方法

> ID：15381804
> 
> 赞同：1
> 
> 时间：2013-03-13T09:49:28.540
> 
> 标签：json, jquery, asp.net-web-api

我有一个 ASP.NET MVC4 WebAPI 实现，在其中我有一种方法可以在注册时检查用户名是否可用。当用户离开用户名文本框时，将使用文本框中的值向服务器发送 ajax 调用调用。

我已将其实现如下。

1) 我将 WebAPI 路由代码设置为...

```
 config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

2）我有要调用的web api动作写成......

```
 [HttpPost]
    public HttpResponseMessage IsUserNameAvailable(string id)
    {
        return Request.CreateResponse(HttpStatusCode.OK, (new UserManager()).IsUserNameAvailable(id));
    } 
```

3) 我的 jquery 调用如下所示...

```
 $.ajax({
        url: '/api/PublicServicesApi/IsUserNameAvailable',
        data: '{id:"testname"}',
        contentType: 'application/json; charset=utf-8',
        type: 'POST',
        success: function (d) {
            if (d == true)
               //NAME IS AVAILABLE
            else
                //NAME IS NOT AVAILABLE
        }
    }); 
```

但是问题发生在服务器上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:57:48.053

您在 URL 中包含操作名称，我认为您的路由应该反映这一点。

```
routes.MapHttpRoute(
   name: "ActionApi",
   routeTemplate: "api/{controller}/{action}/{id}",
   defaults: new { id = RouteParameter.Optional }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:22:13.027

将您的路由更改为：

```
 config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{action}"
        ); 
```

然后将您的操作方法更改为：

```
 [HttpPost]
    public HttpResponseMessage IsUserNameAvailable(dynamic value)
    {
        string id = value.id;
        return Request.CreateResponse(HttpStatusCode.OK, (new UserManager()).IsUserNameAvailable(id));
    } 
```

# android - 如何在 onProgressUpdate() 中更新列表视图

> ID：15381806
> 
> 赞同：0
> 
> 时间：2013-03-13T09:49:28.953
> 
> 标签：android, android-listview, android-asynctask

我是 android 的新手，我想获取联系人并在列表视图中显示。这是我在 asynctask 中获取联系人的代码。请帮助如何在获取每个联系人后更新列表视图。

```
protected Void doInBackground(Void... params) {
         ContentResolver cr = ReadContactsActivity.this.getContentResolver();
         Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,
                null, null, null, null);

         if (cur.getCount() > 0) {
             while (cur.moveToNext()) {
                 String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
                 String name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                 if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                     Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,
                                            ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?",
                                            new String[]{id}, null);
                     while (pCur.moveToNext()) {
                           String phone = pCur.getString(
                                  pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                        //li.add("Name:"+name+",Number:"+phone);
                           publishProgress("Name:"+name+",Number:"+phone);
                     }
                     pCur.close();
                     }
                 }
             }
        return null;
    }

    // A callback method executed on UI thread, invoked by the publishProgress() 
    // from doInBackground() method
    @Override
    protected void onProgressUpdate(String... values) {
         list=(ListView) findViewById(R.id.lvDisplay);
        ArrayAdapter<String> adp=new ArrayAdapter<String> 
        (getBaseContext(),R.layout.list,R.id.label,li);
        list.setAdapter(adp);       
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T09:55:26.927

你如何使用你的列表视图和适配器是完全不同的。

*   不要每次都使用 findViewById，而是存储对它的引用
*   不要每次都设置新的适配器，而是更改底层数据并调用
*   总是在`OnPreExecute`

    ```
    ListView list;
    List<String> names;
    ArrayAdapter<string> adapter;

    @Override
    protected void onPreExecute() {
        names = new ArrayList<String>();
        list = (ListView) findViewById(R.id.lvDisplay);
        ArrayAdapter<String> adapter = new ArrayAdapter<String>     
            (getBaseContext(),
             R.layout.list,
             R.id.label,
             names);
        list.setAdapter(adp);  
    }

    // doInBackground() ...

    @Override
    protected void onProgressUpdate(String... values) {
         names.add(values[0])
         adapter.notifyDataSetChanged();
    } 
    ```

注意：在这种情况下，我实际上建议您将 Adapter、listView 和基础数据的引用保留在AsyncTask*之外。*您仍然可以使用这些引用，并且您还可以在需要时在外部类中使用它们（这很可能）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:57:47.637

像这样放在 onPostExecute() 中

```
@Override
   protected void onPostExecute(String... values) {
      super.onPostExecute(result);
      list=(ListView) findViewById(R.id.lvDisplay);
    ArrayAdapter<String> adp=new ArrayAdapter<String> 
    (getBaseContext(),R.layout.list,R.id.label,li);
    list.setAdapter(adp); 
   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T10:05:45.317

**更新：艾哈迈德修正了他的答案...... [https://stackoverflow.com/a/15381932/1659588](https://stackoverflow.com/a/15381932/1659588)**

~~根据 Ahmed Aeon Axan 的回答，这里是一个固定版本~~

 ~~```
ListView list;
ArrayAdapter<string> adapter;

@Override
protected void onPreExecute() {
    list = (ListView) findViewById(R.id.lvDisplay);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>     
        (getBaseContext(),R.layout.list,R.id.label,li);
        list.setAdapter(adp);  
}

// doInBackground() ...

@Override
protected void onProgressUpdate(String... values) {
     adapter.add(values[0]);
     adapter.notifyDataSetChanged();
} 
```~~

# php - 当由 shell 脚本执行时 PHP 是如何工作的？

> ID：15381808
> 
> 赞同：1
> 
> 时间：2013-03-13T09:49:31.560
> 
> 标签：php, shell

我想通过 cron-job 执行一个 PHP 脚本，但它必须每秒钟或每 2 秒执行一次。（PHP 文件通过 opengraph 更新页面的封面照片）

所以我决定写一个下面的shell脚本。但是 php 在由 shell 脚本执行时是如何工作的，它是像从浏览器请求的那样正常工作还是会发生什么？会话有效吗？

```
#!/bin/bash

while true; do
    /path/to/file.php
    sleep 1
done;

echo "Stopped" | mail -s "Cron script has stopped." mymail@domain.com 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T09:52:23.463

不同之处在于您将没有`$_GET`,`$_POST`和其他可用的 http 特定的东西。会话也不起作用（为什么需要它们？）。您显然无法设置 cookie、标题和其他类似的东西。

除此之外，您几乎可以忽略您“在外壳中”的事实。

有关详细信息，请参见此处：[http ://www.php.net/manual/en/features.commandline.differences.php](http://www.php.net/manual/en/features.commandline.differences.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T09:58:11.953

将所有浏览器方面从 PHP 中移除，这就是它的行为方式。您没有会话（除非您使用 cURL 调用它并存储 cookie somwehre）。

你得到 no`$_GET`或`$_POST`- 相反你需要使用[`$args`](http://php.net/manual/en/reserved.variables.argv.php)- 但如果你没有传递任何变量，这与你并不真正相关。

您显然需要确保您已授予脚本执行权限，否则，请使用`/path/to/php /path/to/file.php`.

看看这些资源，它们应该可以帮助你。

[http://www.php.net/manual/en/features.commandline.differences.php](http://www.php.net/manual/en/features.commandline.differences.php) [http://www.php.net/manual/en/features.commandline.php](http://www.php.net/manual/en/features.commandline.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T10:13:10.593

当您从命令行 (CLI) 执行 php 时，您会进入另一个环境。
存在[多种差异](http://www.php.net/manual/en/features.commandline.differences.php)

他们之中有一些是

`**Configuration**`

从命令行执行时，您运行另一个`php.ini`文件。（通常`/etc/php5/php.ini`）

`**Permissions**`

在 Web 上，您*通常*使用 user.php 执行 PHP `www-data`。
从命令行执行时，脚本将以当前用户身份执行。

`**Arguments**`

您不再有权访问`$_GET`, `$_POST`, `$_FILES`... 超全局变量。
相反，你有新的超全局变量，[`$argv`](http://php.net/argv)并且[`$argc`](http://php.net/argc)

`**Sessions**`

您无权访问`session`或`$_COOKIES`

`**Relative Paths**`

脚本使用的路径是相对于命令开始的路径因此，在脚本中使用相对路径时要
小心`./`

例如：

```
$ pwd 
/path/to/project/

$ cat app/script.php
<?php
echo getcwd(), PHP_EOL;

$ php app/script.php
/path/to/project

$ cd app
$ php script.php
/path/to/project/app 
```

您可以通过使用获取当前目录[`getcwd`](http://php.net/getcwd)

# ruby-on-rails - 将 :remote => true 与悬停事件一起使用

> ID：15381810
> 
> 赞同：3
> 
> 时间：2013-03-13T09:49:33.117
> 
> 标签：ruby-on-rails, ajax

我想在 Rails 中调用 Ajax 调用。`:remote`我已经看到了使用该选项的好方法。我有这个工作示例：

```
<%= button_to('Get Transfers', {:action => 'get_transfers', :section_id => params[:section_id]}, :method => :get, :remote => true) %> 
```

但是，我不希望用户通过按下按钮或单击链接来调用调用，而是在 Javascript 事件上调用它（悬停在元素上）。

有没有办法使用`:remote => true`，但在悬停在元素上时会自动调用它？如果是，如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:03:25.573

**选项1**

要使按钮响应单击并将鼠标悬停在其他 div 上，您可以尝试执行以下操作：

在您的视图中，您为按钮提供了一个唯一的 id，并向应该充当触发器的元素添加了一些类：

```
<%= button_to('Get Transfers', {action: 'get_transfers', section_id: params[:section_id]}, method: :get, remote: true}, {id: 'remote_hover_button'}) %>
<div class="some_trigger">Hover me!</div> 
```

在您的 js 中，您希望绑定到该触发元素并触发按钮上的单击事件：

```
$(document).ready(function(){
  $('.some_trigger').hover(function(){
    $('#remote_hover_button').trigger('click');
  });
}); 
```

**选项 2**

通过创建悬停的 div 手动编写 ajax 并为其提供要调用的 url：

```
<div class="some_trigger" data-url="<%= url_for(action: 'get_transfers', section_id: params[:section_id]) %>">Hover me!</div> 
```

绑定到 div 并进行 ajax 调用：

```
$(document).ready(function(){
  $('.some_trigger').hover(function(){
    $.ajax($(this).data('url'));
  });
}); 
```

这实际上只会触发操作，而不会对响应执行任何操作。您可以使用以下方式绑定到结果：

```
$(document).ready(function(){
  $('.some_trigger').hover(function(){
    $.ajax($(this).data('url'))
      .done(function() { alert("success"); })
      .fail(function() { alert("error"); })
      .always(function() { alert("complete"); });
  });
}); 
```

有关 ajax 函数的更多信息，请查看[文档](http://api.jquery.com/jQuery.ajax/)。

# sql - 如何使用 SQL 根据列数据匹配获取数据

> ID：15381820
> 
> 赞同：0
> 
> 时间：2013-03-13T09:50:09.350
> 
> 标签：sql, self-join

寻求小帮助，我需要从一个表中获取数据，该表将包含 2009、2010、2011 等所有年份的数据。

我需要创建一个 SQL 查询，该查询将根据特定年份是否有匹配的行来提取数据

此查询将帮助用户获取 2010 年输入的产品在 2011 年的产品价格

样本数据

```
ProductID      price                  year 
1020           2000 USD                2009
1030           100  USD                2009
1030           150  USD                2010
1020           300  USD                2011
1020           310  USD                2012
1030           160  USD                2012
1040           400  USD                2012 
```

下面的查询是我写的我毫无疑问所以请纠正我

```
select * 
from productstbl a ,productstbl b
where Year = '2012' and 
      ProductID in(select b.ProductID from productstbl where b.Year = '2011') and 
      a.ProductID=b.ProductID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:26:21.957

尝试这个

```
select * from productstbl 
where ( year = '2012' or year = '2011' )
and ProductID in (select ProductID from productstbl where year='2011' and year='2012' ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:31:38.000

子查询版本

```
SELECT
  ProductID,
  price as ThisYear,
  (SELECT b.price FROM productstbl b 
   WHERE b.ProductID=a.ProductID
   AND b.year=2011) as LastYear 
FROM productstbl a
WHERE year=2012
ORDER BY ProductID 
```

如果它是 MS SQL，我会在子查询中添加 TOP 1，以防数据超过 1 行并破坏事物。或者 GROUP BY ProductID 并根据需要使用 min() 或 max() 价格。

如果它不返回任何内容并最终为 Null，则可能围绕子查询的 Coalesce 默认为正常的默认值

# wpf - 应如何组织应用程序范围的资源？

> ID：15381822
> 
> 赞同：5
> 
> 时间：2013-03-13T09:50:14.473
> 
> 标签：wpf, visual-studio-2012, styles, resourcedictionary

这是场景：

我一直在使用 VS 2010 使用 MEF 编写相当大的 WPF 项目。这个解决方案中有多个项目，我有一个`ResourceDictionary`适合我所有风格的项目。

`AppStyles.xaml` `ResourceDictionary`位于我的启动项目中，它包含我对该项目的所有样式。在我的内部，`App.xaml`我有以下内容：

```
<Application x:Class="Dionysus.Shell.App"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         DispatcherUnhandledException="UnhandledException" ShutdownMode="OnMainWindowClose">
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>

            <ResourceDictionary Source="AppStyles.xaml"/>

    </ResourceDictionary>
</Application.Resources> 
```

现在，这一切都在 VS 2010 的设计模式下完美运行，当我调试时，正确的样式被应用于我的所有控件。但是我最近切换到VS 2012，设计器不再工作了！当我调试它时，它工作得很好，但每当我使用我的一种样式时，如下所示：

```
<Button Name="btnForward" Height="23" Margin="10,0" Style="{StaticResource DionysusButton}" Grid.Row="2" Grid.Column="0"/> 
```

我在 VS 2012 设计器中收到以下错误：

```
The resource "DionysusButton" could not be resolved. 
```

我不知道为什么会发生这种情况，我已经重命名了 my `Style`，甚至`ResourceDictionary`无济于事。

我应该在 VS 2012 中这样做吗？或者这是 VS 2012 的问题？

我发现很多帖子都说更改`x:Name`my `AppStyles.xaml` `ResourceDictionary`to的属性`x:Key`可以解决这个问题，但我不能这样做，因为它不是`ResourceDictionary`.

提前感谢

- 更新

我正在使用 Marc 的答案，除了默认样式外，一切似乎都很顺利。我有以下风格：

```
 <Style TargetType="DataGrid" x:Name="DataGridStyle"/> 
```

这是我的主要内容`ResourceDictionary`：

```
<ResourceDictionary x:Name="Main" 
                xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

<ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="Styles/AppStyling.xaml" />
</ResourceDictionary.MergedDictionaries>

<Style TargetType="DataGrid" BasedOn="{StaticResource DataGridStyle}"/> 
```

当我不在`Style`我的 main 中添加标签时，`ResourceDictionary`它可以正常工作，但是该样式显然并未应用于所有项目。当我添加它时，我得到以下异常：

> 在“System.Windows.Markup.StaticResourceHolder”上提供值引发异常

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T10:08:57.823

您是否尝试使用位于您的模块中的 app.xaml 中的样式，您使用 PRISM 将其导出到外壳中？模块不应该引用您的应用程序/shell 项目（启动项目）？那么他们可能只是不“了解”包含样式的项目？虽然问题是为什么它在 VS2010 中起作用......请让我知道，如果我误解了你的 MEF 场景，那么我会调整我的答案。

资源和棱镜有点棘手，我喜欢以下方法，我之前已经发布过，但它也可能对你的情况有所帮助。与将资源放在 app.xaml 中相比，它更适合 PRISM 解决方案：

我通常创建一个单独的样式项目，我从我想要样式的项目中引用它。样式项目具有如下固定结构：

![造型项目](../Images/a56f40338e5be11e0188ab047a9ebb3d.png)

对于每个控件，我都会创建一个样式`ResourceDictionary`。例如对于我的按钮：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Style x:Key="PrimaryButtonStyle" TargetType="Button">
    </Style>

    <Style x:Key="ToolbarButton" TargetType="Button">
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Margin" Value="3"/>
        <Setter Property="Background" Value="Transparent"></Setter>
    </Style>
</ResourceDictionary> 
```

在一个 main`ResourceDictionary`中，我合并了所有其他字典，在本例中是 IncaDesign.xaml 文件，您可以在上图中看到：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="clr-namespace:Commons.Controls;assembly=Commons">

    <ResourceDictionary.MergedDictionaries>

        <ResourceDictionary Source="Converter/Converter.xaml" />
        <ResourceDictionary Source="Styles/Button.xaml" />
        <ResourceDictionary Source="BitmapGraphics/Icons.xaml" />

    </ResourceDictionary.MergedDictionaries>

    <!-- Default Styles -->
    <Style TargetType="Button" BasedOn="{StaticResource PrimaryButtonStyle}"></Style>
</ResourceDictionary> 
```

请注意我是如何定义默认样式的，它们会自动应用，除非您另外指定。在您想要设置样式的每个窗口或控件中，您只需要引用这个`ResourceDictionary`. 注意源的定义，它是对程序集 ( `/Commons.Styling;component...`)的引用

```
<UserControl.Resources>        
    <ResourceDictionary>            
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/Commons.Styling;component/IncaDesign.xaml" />
        </ResourceDictionary.MergedDictionaries>  
        <!-- Here you can added resources which belong to the UserControl only -->
        <!-- For example: -->
        <DataTemplate x:Kex="UcTemplate" /> 
    </ResourceDictionary>        
</UserControl.Resources> 
```

现在将自动设置默认样式，如果您想显式访问资源，可以使用`StaticResource`.

```
<Viewbox Height="16" Width="16" Margin="0,0,10,0">
    <ContentControl Content="{StaticResource FileIcon32}" />
</Viewbox> 
```

在我看来，这是一个非常好的解决方案，它适用于非常复杂的解决方案，包括模块化解决方案，例如使用 PRISM 构建的解决方案。

# ruby-on-rails - 如何创建 Rails 使用的机架应用程序？

> ID：15381823
> 
> 赞同：4
> 
> 时间：2013-03-13T09:50:16.503
> 
> 标签：ruby-on-rails, rack

Rails 本身基于多个独立的进程，这些进程在请求之间是无状态的。我需要向我的 Rails 应用程序添加有状态的集中式服务（游戏自动机）。

据我所知，我应该让有状态服务成为机架应用程序。是否有一些关于如何制作机架应用程序以及重要的是如何从 Rails 与它通信的教程。使用 Rails 部署它的惯用方式是什么，以及将它放在我的 git Rails 代码库中的惯用位置是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T06:56:43.990

我的问题在另一个问题中得到了回答：

[如何在机架请求中读取 POST 数据](https://stackoverflow.com/questions/15458334/how-to-read-post-data-in-rack-request)

```
require 'json'

class Greeter
  def call(env)
    req = Rack::Request.new(env)
    if req.post?
      puts req.POST()
    end
    [200, {"Content-Type" => "application/json"}, [{x:"Hello World!"}.to_json]]
  end
end

run Greeter.new 
```

并用于`JSON.parse( req.body.read )`解析 POST 数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:58:45.583

除了 rack 之外的另一个选项是[守护](http://daemons.rubyforge.org/)你的应用程序。

# android - 无法从 android 解析 JSON，因为 asp.net 服务器不返回数组名称

> ID：15381824
> 
> 赞同：3
> 
> 时间：2013-03-13T09:50:16.453
> 
> 标签：android, json, api, asp.net-mvc-4

我制作了一个小型 MVC4 应用程序，它以 API 的形式从 SQL 服务器返回数据，本地 url 是`http://10.0.0.116:35577/api/articoli`（我已经启用了对本地 IIS 实例的网络访问，这实际上阻止了我一整天，直到我弄清楚了），它返回的格式如下：

```
[{"id":0,"desc":"Pizza"},{"id":1,"desc":"Pasta"},{"id":2,"desc":"Science"},{"id":3,"desc":"spaghetti"},{"id":4,"desc":"sfas"},{"id":5,"desc":"test"}] 
```

调用`http://10.0.0.116:35577/api/articoli/1`返回单个元素：

```
{"id":1,"desc":"Pasta"} 
```

我一直无法从我的 android 应用程序中解析它，从我收集到的数组应该有一个标题名称或其他东西，这里完全不存在，我真的不知道如何在这里添加它，或者如果我真的需要一个。

从我可以收集到的从教程中获得的解析器类不适合这种数据，我真的不知道如何使它与这样的结果一起工作。

解析器如下：

```
public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

public JSONObject getJSONFromUrl(String url) {

    // Making HTTP request
    try {

        URL aaa = new URL(url);
        URLConnection uConnection = aaa.openConnection();
        uConnection.connect();

        //is = httpEntity.getContent();
        is = aaa.openStream();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, /*"UTF-8"*/ "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

}
} 
```

我不得不编辑解析器的 url 检索部分，因为它试图通过使用 POST 来获取数据，服务器应用程序将其解释为尝试插入数据并调用了错误的方法，

这是一段调用解析器的代码，它应该检索每个元素，然后将每个元素作为一行放在列表视图中，然后单击它应该调用一个读取单个元素的活动：

```
private void fillDataJSON() {
        JSONParser jParser = new JSONParser();

        JSONObject json = jParser.getJSONFromUrl(URL);
        JSONArray articoli;
        try {
            articoli = json.getJSONArray("Articoli");

            if (articoli == null) {
                throw new NullPointerException();
            }

            for(int i = 0; i< articoli.length(); i++) {
                JSONObject c = articoli.getJSONObject(i);

                String id = c.getString(KEY_ID);
                String desc = c.getString(KEY_DESC);

                HashMap<String, String> map = new HashMap<String, String>();

                map.put(KEY_ID, id);
                map.put(KEY_DESC, desc);

                menuItems.add(map);

                adapter = new SimpleAdapter(ApiTest.this, menuItems,
                        R.layout.activity_api_test_row,
                        new String[] { KEY_DESC },
                        new int[] { R.id.TextView01 });
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }
    } 
```

我得到的错误如下：

```
03-13 10:05:33.291: E/JSON Parser(11811): Error parsing data org.json.JSONException: Value [{"id":0,"desc":"Pizza"},{"id":1,"desc":"Pasta"},{"id":2,"desc":"Science"},{"id":3,"desc":"spaghetti"},{"id":4,"desc":"sfas"},{"id":5,"desc":"test"}] of type org.json.JSONArray cannot be converted to JSONObject 
```

这可以在android端修复还是我必须改变我的服务器的工作方式？

服务器只是通过控制器返回数据，其他一切都留给框架，例如：

```
 public IEnumerable<Articoli> GetAllArticoli()
    {
        return repository.GetAll();
    } 
```

除此以外不做任何事情

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:53:19.330

JSON 文档的根元素可以是 JSONObject 或 JSONArray（或原语之一）。您总是将其解析为对象：

```
// try parse the string to a JSON object
try {
    jObj = new JSONObject(json);
} catch (JSONException e) {
    Log.e("JSON Parser", "Error parsing data " + e.toString());
} 
```

`new JSONArray(json)`当文档的根元素是一个数组时，您应该将其解析为 a 。您可以使用以下方法安全地执行此操作`JSONTokener`：

```
// try parse the string to a JSON object
try {
    JSONTokener jt = new JSONTokener(json);
    Object rootElement = jt.nextValue();
    if (rootElement instanceof JSONObject) {
       // You got an object from the response
    } else if (rootElement instanceof JSONArray) {
       // You got a JSON array
    }
    // else... -> it can also be String, Boolean, Integer, Long or Double
} catch (JSONException e) {
    Log.e("JSON Parser", "Error parsing data " + e.toString());
} 
```

如果您知道自己的要求，那么使用正确的响应类型会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:04:58.997

您可以简单地在里面更改代码。只需`fillDataJSON()`将类型从更改`JSONObject`为`JSONArray`

```
JSONArray json = jParser.getJSONFromUrl(URL);
        JSONArray articoli;
        try {
            articoli = json; 
```

并在您`JSONParser`更改为：

```
// try parse the string to a JSON object
    try {
        jObj = new JSONArray(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    } 
```

并将 jObj 的类型更改为 JSONArray

```
static JSONArray jObj = null; 
```

和类的返回类型 from `JSONObject`to`JSONArray`

```
public JSONObject getJSONFromUrl(String url) { 
```

# git - 为什么运行 git push 时 git hook update 不起作用

> ID：15381828
> 
> 赞同：0
> 
> 时间：2013-03-13T09:50:27.933
> 
> 标签：git

正如它所说，钩子更新是由远程存储库上的**git-receive-pack**调用的，当在本地存储库上完成**git-push时会发生这种情况。**现在我添加`echo 'update run'`了更新，但是当我运行**git-push**时，钩子更新没有运行，因为我没有看到信息`'update run'`，为什么会是这个结果？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:08:15.927

我已经解决了这个问题。您工作方向上的更新脚本不会运行，该脚本仅在服务器端运行。

# extjs - 如何在控制器初始化之前运行代码

> ID：15381830
> 
> 赞同：0
> 
> 时间：2013-03-13T09:50:39.813
> 
> 标签：extjs, sencha-touch-2

我正在使用*Sencha Touch 2构建应用程序*

我想在尚未初始化但我们的应用程序已经加载的那一刻**运行**`Controllers`一些代码。**`requires`**

 **查看`Ext.app.Application`源代码，我真的很想拦截`onProfilesLoaded`呼叫。但我只是不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:01:23.523

好吧，我想我自己想通了。显然您可以使用该`override`功能进行拦截。

```
Ext.define('MyApp.AppOverrides', {
    override: 'Ext.app.Application',

    onProfilesLoaded: function(){
        alert('Hey Mum, I just intercepted the call!');
        this.callParent(arguments);
    }
}); 
```**

# java - c++ 可以做这个 java builder 模式吗？

> ID：15381832
> 
> 赞同：2
> 
> 时间：2013-03-13T09:50:42.090
> 
> 标签：java, c++

在 java 中，构建器的 setter 方法可以返回构建器本身，以便可以链接调用，如下所示：

```
public class builder{

private String name;
private int age;
private char glyph;

    public builder setName(String name){
    this.name = name;
        return this;
    }

    public builder setAge(int age){
        this.age = age;
        return this;
    }

public builder setGlyph(char glyph){
    this.glyph = glyph;
    return this;
}

public static void main(String[] args){
    builder b = new builder().setName("").setAge(10).setGlyph('%');
}
} 
```

这在 C++ 中可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T09:52:34.260

是的，当然，您可以只返回对构建器的引用：

```
Builder & setSomething(const std::string & smth) 
{
    // do setting
    return *this;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T09:52:57.427

是的，函数链接当然是可能的。例如的实现`setName`如下所示：

```
builder& setName(std::string name)
{
  this->name = name;
  return *this;
} 
```

它返回对指向 by 的对象指针的引用`this`，这当然是当前对象。

# php - 将脚本从 PHP mysql_insert_id 标头、位置方法转换为 PHP 会话方法

> ID：15381834
> 
> 赞同：3
> 
> 时间：2013-03-13T09:50:45.923
> 
> 标签：php, session, session-variables

我已经使用 PHP mysql_insert_id 标头位置方法成功实现了从一个页面到另一个页面的数据传输尝试。我所做的是：

我已经验证了它（将表单传输（即表单操作）到同一页面），我已经将它保存在数据库中，现在我正试图在另一个页面上显示数据。

page1（原始表格所在的位置）

```
$id =  mysql_insert_id();
header('Location: page2.php?id='.$id); 
```

并在第 2 页

```
$id = $_GET['id'];
$query  = "SELECT * FROM form1 WHERE id=$id";
{
 // there after display of data
} 
```

我面临的问题：

我在标题栏中得到这个链接

`http://localhost/aaa/page2.php?id=76`

现在，如果我尝试更改 id= 56 或 45 或任何其他值，它会将显示的数据更改为该 id .. 所以任何用户都可以在地址栏中更改它，因此将能够看到我的 db 值..

我首先考虑对其进行编码，然后在第二位我想将其更改为会话。

所以我在谷歌上搜索了很多以将其设置为会话，我尝试了这个

```
<?php 
// Starting the session 
session_start();

if(isset($_SESSION['id'])) //and is this use of id correct?
{ // then what?
} 
```

谢谢大家帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:03:30.193

你必须解释你到底想做什么？以便我们提出建议。虽然下面的代码可以正常工作。但我认为没有用。在使用会话之前使用 session_start。

第 1 页：

```
$id =  mysql_insert_id();
$_SESSION['last_id'] = $id;
header('Location: page2.php'); 
```

第 2 页：$id = $_SESSION['last_id'];

```
 $query  = "SELECT * FROM form1 WHERE id=$id";
  {
// there after display of data
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:17:04.517

page1.php：

```
<form action="post" action="page2.php">
       <input name="name" type="hidden" value="<?=mysql_insert_id();?>"></input>
</form> 
```

page2.php：

```
<?php
  $id = $_POST['name'];
  $query  = "SELECT * FROM form1 WHERE id=$id";
?> 
```

# spring - Spring异步处理不返回查看

> ID：15381837
> 
> 赞同：2
> 
> 时间：2013-03-13T09:50:57.333
> 
> 标签：spring, servlets, spring-mvc, asynchronous

我正在使用 Spring MVC 异步处理，但控制器不会在 Web 浏览器上返回视图。

```
@RequestMapping(value = "/generateGM", method = RequestMethod.POST)
    public Callable<ModelAndView> generateGMReport(@RequestParam("countryCode") int countryCode, ModelAndView mv) {

        Callable<ModelAndView> c = new GenericCallable(countryCode, reportDao, mv);

        return c;
    }

@Override
    public ModelAndView call() throws Exception {

        List<CostReport> gmList = reportDao.generateGrossMarginReport(countryCode);

        mv.setViewName("gmReport");
        mv.addObject("gmList", gmList);

        return mv;
    } 
```

我曾尝试修改代码以返回 Callable，但它仍然没有返回到指定的视图名称。

我正在使用 JBoss 7.1 作为。

部署期间有警告：

```
WARN  [org.jboss.as.ee] (MSC service thread 1-7) 

JBAS011006: Not installing optional component 

org.springframework.web.context.request.async.StandardServletAsyncWebRequest 
due to exception: org.jboss.as.server.deployment.DeploymentUnitProcessingException: 
JBAS011054: 
Could not find default constructor for class 
org.springframework.web.context.request.async.StandardServletAsyncWebRequest 
```

原因：可能 sitemesh 无法从 Spring MVC 框架（AsynContext）设置响应对象。

是什么原因 ？

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:33:56.953

由于 Sitemesh 过滤器在请求结束时会进行一些后处理，因此它需要支持 Servlet 3 异步请求功能才能使其正常工作。当初始 Servlet 容器线程退出并且响应保持打开状态时。如果 Sitemesh 过滤器没有意识到这一点，它将尝试提前完成处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T22:09:35.203

我不是对 sitemesh 的期望。但它也是一个 servlet，因此它们遵循“命令链”模式，这意味着它可能无法传输您需要的正确 url。您可以在 web.xml 中发布异步 spring 和 sitemesh 配置的配置吗

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-25T11:35:47.373

这可能会有所帮助。作为**String**而不是**ModelAndView**返回。

# c - c中基于控制台的聊天应用程序

> ID：15381840
> 
> 赞同：0
> 
> 时间：2013-03-13T09:51:03.177
> 
> 标签：c, unix

我创建了这个应用程序，其中两个进程进行通信。一切都很好，但**我希望当用户按下 esc 时，进程会自动结束**。s**其次，它只从用户那里得到一条线。一次在一个过程中**。在进入第二行之前，我们还必须在另一个进程中添加一行。这是**进程 1 的代码（我称为服务器）**

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <sys/errno.h>
extern int      errno;
#define FIFO1   "/tmp/fifo.1"
#define FIFO3   "/tmp/fifo.3"
#define PERMS   0666
#define MESSAGE1        "client Says:"

main()
{
    char buff[BUFSIZ];
    int readfd, writefd;
int n, size;
    if ((mknod (FIFO1, S_IFIFO | PERMS, 0) < 0) && (errno != EEXIST)) {
        perror ("mknod FIFO1");
        exit(1);
    }
    if (mkfifo(FIFO3, PERMS) < 0 && (errno != EEXIST)) {
        unlink (FIFO1);
        perror("mknod FIFO3");
        exit(1);
    }
    if ((readfd = open(FIFO1, 0)) < 0) {
        perror ("open FIFO1");
        exit(1);
    }
    if ((writefd = open(FIFO3, 1)) < 0) {
        perror ("open FIFO3");
        exit(1);
    }
///////////////////////////////////////////////////////////////////////////////////////////////////////
loop:
 while(1)
{

    if ((n = read(readfd, buff, 100)) < 0) {
        perror ("server read"); exit (1);
    }

write(1,MESSAGE1,strlen(MESSAGE1));
if (write(1, buff, n) != n) {
            perror ("client write2"); exit(1);
        }

/////////////////////////////////////////////////////////////////////////////////////////////

while(1)
{

printf("server says:");
//strcpy(buff,"I say:");
fgets(buff,100,stdin);
n=strlen(buff) + 1;
    if (write(writefd, buff,n) < n) {
        perror("server write1"); exit (1);
    }
goto loop; 
}

}//end of first for 
    close (readfd); close (writefd);
} 
```

第二个过程（我叫客户）

```
#include <stdio.h>
#include <string.h>
#include<stdlib.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <sys/errno.h>
extern int      errno;
#define FIFO1   "/tmp/fifo.1"
#define FIFO3   "/tmp/fifo.3"
#define PERMS   0666
#define MESSAGE1        "server Says:"

main()
{
    char buff[BUFSIZ];
char buf[]="logout";
    int readfd, writefd, n, size;
    if ((writefd = open(FIFO1, 1)) < 0) {
        perror ("client open FIFO1"); exit(1);
    }
    if ((readfd = open(FIFO3, 0)) < 0) {
        perror ("client open FIFO3"); exit(1);
    }
///////////////////////////////////////////////////////////
loop:
while(1)
{

printf("client says:");
fgets(buff,100,stdin);
n=strlen(buff) + 1;
    if (write(writefd, buff,n) < n) 
    {
        perror("server write1"); exit (1);
        }

////////////////////////////////////////////
while(1)
{

    if ((n = read(readfd, buff, 100)) < 0) 
    {
        perror ("client read"); exit(1);
        }

    write(1,MESSAGE1,strlen(MESSAGE1));
        if (write(1, buff, n) != n) 
        {
            perror ("client write2"); exit(1);
        }

goto loop;
}
}//end of first for
    close(readfd); close(writefd);
     /* Remove FIFOs now that we are done using them */
    if (unlink (FIFO1) < 0) {
        perror("client unlink FIFO1");
        exit(1);
    }
    if (unlink (FIFO3) < 0) {
        perror("client unlink FIFO3");
        exit(1);
    }
    exit(0);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:04:29.560

如果我理解正确，您希望这两个程序是*非阻塞的，**即*它们应该能够从用户*或*管道读取。

 *如果是这种情况，那么我建议您查看[`select`](http://pubs.opengroup.org/onlinepubs/009695399/functions/select.html)系统调用。它可用于轮询来自任意文件描述符的输入。

您可以执行类似以下伪代码的操作：

```
while (1)
{
    /* Poll for input */
    select(...);

    if (is_pipe_readable())
        read_from_pipe_and_print_to_stdout();
    else if (is_stdin_readable())
        read_from_stdin_and_write_to_pipe();
} 
```

请注意，文件描述符在关闭时变得可读。因此，如果管道的写端关闭，则读端变为可读，并`read`返回零。*

# android - 设置框架布局边距及其子宽度、高度和位置

> ID：15381841
> 
> 赞同：2
> 
> 时间：2013-03-13T09:51:07.390
> 
> 标签：android, android-relativelayout, android-framelayout

我目前正在以编程方式创建带有图像视图和文本视图的框架布局。按原始布局是相对布局。

```
RelativeLayout layout = (RelativeLayout) findViewById(R.id.rel);

    FrameLayout fr = new FrameLayout(this);
    fr.setBackgroundResource(R.drawable.question_bar_icon);
    ImageView b1 = new ImageView(this);
    TextView b2 = new TextView(this);
    b1.setBackgroundResource(R.drawable.mcq);
    fr.addView(b1);
    fr.addView(b2);
    layout.addView(fr); 
```

现在我无法调整图像视图和按钮的大小，也无法将它们定位在中心的文本视图和垂直中心的图像视图中，并且位于左侧。我尝试了布局参数，但没有工作，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T10:16:26.127

`addView`在您以编程方式添加视图的每种情况下，尝试使用它的重载版本`LayoutParameter`，否则它会被插入到`ViewGroup`具有默认布局参数的视图中。（PS你也可以控制插入的顺序）。

例如，对于`ImageView`您想要位于框架布局的中心的：

```
int width = FrameLayout.LayoutParams.WRAP_CONTENT; //or whatever you want
int height= FrameLayout.LayoutParams.WRAP_CONTENT; //or whatever you want

FrameLayout.LayoutParams lp = new FrameLayout.LayoutParams(width, height, Gravity.CENTER);

fr.addView(b1,lp); 
```

对另一个视图做同样的事情**，最重要**的是，做同样的事情，`RelativeLayout.LayoutParams`用于将框架元素本身插入到您的`RelativeLayout`.

# jquery - 在 jquery 中使用修剪

> ID：15381844
> 
> 赞同：0
> 
> 时间：2013-03-13T09:51:18.750
> 
> 标签：jquery

而不是一直使用修剪，我想在下面的代码中使用一次......请帮助我

```
if ("Company Profile" == $.trim(selectedValue)) {
    actionClass = "locationImportCompany.do?";
} else if ("Oppty Locations" == $.trim(selectedValue)) {
    actionClass = "locationImport.do?";
} else if ("Different Oppty" == $.trim(selectedValue)) {
    actionClass = "locationImportDiffOppty.do?";
} else if ("Loop TrackId Profile" == $.trim(selectedValue)) {
    actionClass = "locationImportLoopTrkId.do?";
} else if ("Inventory" == $.trim(selectedValue)) {
    isOrdering = "Y";
    actionClass = "inventoryLaunch.do?";
} else if ("Data Center List" == $.trim(selectedValue)) {
    actionClass = "locationImportDataCenter.do?";
} else if ("Customer AccountId" == $.trim(selectedValue)) {
    actionClass = "inventoryLaunch.do?";
} else if ("Customer Name" == $.trim(selectedValue)) {
    actionClass = "locationImportDataCenter.do?";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:52:31.430

将其存储在变量中：

```
 var selectedValue = $.trim(selectedValue); 
```

然后做：

```
if (selectedValue == "Oppty Locations") {

} 
```

ETC...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T09:53:39.937

```
var selectedValue = $.trim(selectedValue);
if ("Company Profile" == selectedValue) {
    actionClass = "locationImportCompany.do?";
} else if ("Oppty Locations" == selectedValue) {
    actionClass = "locationImport.do?";
} else if ("Different Oppty" == selectedValue) {
    actionClass = "locationImportDiffOppty.do?";
} else if ("Loop TrackId Profile" == selectedValue) {
    actionClass = "locationImportLoopTrkId.do?";
} else if ("Inventory" == selectedValue) {
    isOrdering = "Y";
    actionClass = "inventoryLaunch.do?";
} else if ("Data Center List" == selectedValue) {
    actionClass = "locationImportDataCenter.do?";
} else if ("Customer AccountId" == selectedValue) {
    actionClass = "inventoryLaunch.do?";
} else if ("Customer Name" == selectedValue) {
    actionClass = "locationImportDataCenter.do?";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T09:52:26.247

用修剪后的值覆盖 selectedValue 并随后使用，或将其分配给某个变量并使用它。

```
selectedValueTrimmed = $.trim(selectedValue)
if("Company Profile"==selectedValueTrimmed ){ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T10:12:51.647

将其改为 Switch 语句而不是 Else If 语句。

```
switch ($.trim(selectedValue)) {
    case: "Company Profile" 
        actionClass = "locationImportCompany.do?";
        break;
    case: "Oppty Locations" 
        actionClass = "locationImport.do?";
        break;
   // So on ...
} 
```

# sqlite - 循环遍历可变数量的表

> ID：15381846
> 
> 赞同：0
> 
> 时间：2013-03-13T09:51:19.480
> 
> 标签：sqlite, loops

我运行具有不同迭代次数的模拟，每次迭代都会创建一个输出表，如 table1、table2、table3 ... 它们都具有相同的结构，如：

身份证 | 价值

但行数不同。

对于每个表，我想计算“值”列的平均值并将它们显示在一个新表中，列“平均值”如下：

表号 | 平均值

```
 1     |      516
  2     |      512
  3     |      521
 ...    |      ... 
```

如果表的数量非常多，这在 SQlite 中是否可行？如果没有，我怎样才能以不同的方式实现这一目标？

提前非常感谢:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:08:43.010

不要创建不同的表，而是将结果放在同一个表中，并有一列指示该行属于哪个批次或集合。然后，当您查询表时，您可以对该列进行过滤，以便您只使用所需的批次/集。在该列上放置一个索引以提高查询的效率并使其运行得更快。也无需将平均结果保存到单独的表格中。您的查询可以生成结果，而无需将结果作为数据保存在另一个表中。

```
 select batch, avg(value) as AvgValue
        from simulation           
        where batch = 100
        group by batch 
```

# php - 将 AddThis 模块设置为在所有页面上工作

> ID：15381856
> 
> 赞同：1
> 
> 时间：2013-03-13T09:51:49.837
> 
> 标签：php, magento, module, addthis

我已经为 Magento 安装了 AddThis 模块。

但此扩展仅适用于产品页面。您知道如何将共享按钮设置为显示在所有页面上吗？我已经搜索了所有源代码，但没有弄清楚仅在产品页面上设置的位置。

所以我猜这个问题可能来自 app/design/frontend/default/default/template/addthis/sharingtool/share.phtml 在这个页面中加载了一些 javascript 代码。任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:17:05.203

我找到了解决方案：

**1.我的解决方案：**

转到：app/code/community/AddThis/SharingTool/Model/Observer.php

改变这个：

```
 if ($block->getNameInLayout()=='product_review_list.count') { 
```

对此：

```
 if (strstr($block->getNameInLayout(),'search')) { 
```

（所以 addthis 分享按钮会出现在所有包含搜索选项的页面上）

**2** .我还通过电子邮件发送了 addthis 官方支持，答案是：

> 您可以在任何 CMS 或 .phtml 文件中添加共享按钮。

**2.1 对于 cms 页面，您可以使用**

```
{{block type="sharingtool/share" name="addthis_sharetool"}} 
```

**2.2 在您可以使用的任何 phtml 文件中**

```
<?php
echo $this->getLayout()->createBlock('sharingtool/share')->setBlockId('addthis_sharetool')->toHtml();
?> 
```

**这是支持文档。** [http://support.addthis.com/customer/portal/articles/381234-addthis-for-magento](http://support.addthis.com/customer/portal/articles/381234-addthis-for-magento)

# php - facebook登录错误：发生错误。请稍后再试

> ID：15381858
> 
> 赞同：0
> 
> 时间：2013-03-13T09:52:08.543
> 
> 标签：php, facebook

我正在我的网站上工作，我刚刚添加了 Facebook 登录。我让我的朋友测试它，但当他尝试时，它给他的错误消息是“发生错误。请稍后再试”。当我尝试使用自己的 Facebook 帐户登录时，我能够成功注册。有人会告诉我该怎么做。我已经在沙盒中启用了应用程序，并且我已经将 localhost url 作为站点 URL。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:53:53.533

您的 Facebook 应用程序页面中有一个设置可以启用/禁用沙盒模式。

如果沙盒模式开启，只有app的所有者可以访问，需要禁用其他人才能使用。

转到应用程序页面并进行编辑：[https ://developers.facebook.com/apps/](https://developers.facebook.com/apps/)

见下图：

![在此处输入图像描述](../Images/6e6ec8f26f8e784ee6cb0747904c0b02.png)

# excel - 在活动单元格中以逗号分隔打印相同的值 10 次

> ID：15381860
> 
> 赞同：-5
> 
> 时间：2013-03-13T09:52:20.477
> 
> 标签：excel, vba

我想使用命令按钮使用逗号在单元格中打印特定值 10 次或更多次。谁能解释如何为此编写宏？

当我单击命令按钮时，该值应在活动单元格中打印所需的时间。数据非常庞大，因此手动输入单个单元格并输入它非常困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:19:43.000

将其放入您的 Commandbutton_Click 事件处理程序中：

```
Dim strValueToPrint as String, strOutput as String
Dim intRepeatCount as Integer, i as Integer

strValueToPrint = "1" 'Change this to be the value that you want to repeat
for i = 1 to intRepeatCount
    strOutput = strOutput & strValueToPrint & ","
Next
Activecell.Value = strOutput 
```

# jquery - 如何从jQuery 的 toggle() 方法中启用点击事件？

> ID：15381870
> 
> 赞同：0
> 
> 时间：2013-03-13T09:52:35.157
> 
> 标签：jquery, toggle, jquery-click-event

 我有一个树形菜单。此菜单中的最后一个`<li>`元素包含一个`<a>`元素。

我正在使用 jQuery`toggle()`方法。

我知道默认情况下`toggle()`包含一个`e.preventDefault()`。

我想做的是将点击事件返回给`<a>`元素。

你能帮忙吗？

HTML：

```
<ul class="menu">
    <li>
        Item1
        <ul style="display: none">
            <li>
                subItem1
                <ul style="display: none">
                    <li>
                        <a href="http://www.google.com">Google</a>
                    </li>
                    <li>
                        <a href="http://www.yahoo.com">Yahoo</a>
                    </li>
                    <li>
                        <a href="http://www.facebook.com">Facebook</a>
                    </li>     
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

Javascript：

```
$(".menu li").toggle(
    function() {
        $(this).children().slideDown();
    },

    function() {
        $(this).children().slideUp(); 
    }
); 
``` 

请检查这个小提琴：http: [//jsfiddle.net/fzy48/](http://jsfiddle.net/fzy48/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:15:43.217

你错过了一些结束标签。

请参阅[更新的小提琴](http://jsfiddle.net/fzy48/2/)。

```
$(".menu li").on('click', function(e) {
    e.stopPropagation();
    $(this).children('ul').slideToggle();
}); 
```

使用该`on()`方法，您可以更好地控制您的功能。您需要的是[`stopPropagation()`](http://api.jquery.com/event.stopPropagation/)方法：它可以防止单击事件将 dom 树冒泡到`li`可以滑动切换它的父级。

此外，通过将 clicked 的子项过滤`li`为 only `ul`'s，您可以更明确地了解您想要切换的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:25:12.747

Flauwekeul 的替代版本，使用`.on()`事件委托：

```
$('.menu').on('click', 'li', function(event){
    if (event.target != this) {
     return;//dont want bubbled up events
    }
    $(event.target).children('ul').slideToggle();
}); 
```

**[在http://jsfiddle.net/fzy48/5/](http://jsfiddle.net/fzy48/5/)**中查看

使用事件委托的优点是我们只附加一个事件处理程序（在父`.menu`元素中），而不是每个`li`元素一个事件处理程序。

# jax-rs - ServiceMix / Fuse ESB 中的 JAX-RS

> ID：15381872
> 
> 赞同：-2
> 
> 时间：2013-03-13T09:52:40.643
> 
> 标签：jax-rs, cxf, esb, apache-servicemix, cxfrs

当我尝试将 CXF 示例从 Talend 安装到 FuseESB 时出现以下错误。

```
FuseESB:karaf@root> features:install talend-cxf-example-jaxrs-intro
Error executing command: Can not resolve feature:
Unsatisfied requirement(s):
---------------------------
   package:(&(package=javax.ws.rs.core)(version>=2.0.0)(!(version>=3.0.0)))
      Intro JAX-RS Example Common
   package:(&(package=javax.ws.rs)(version>=2.0.0)(!(version>=3.0.0)))
      Intro JAX-RS Example REST Resource Bundle
   package:(&(package=javax.ws.rs)(version>=2.0.0)(!(version>=3.0.0)))
      Intro JAX-RS Example Common
   package:(&(package=javax.ws.rs.core)(version>=2.0.0)(!(version>=3.0.0)))
      Intro JAX-RS Example REST Resource Bundle 
```

我正在运行 JSR-311

```
FuseESB:karaf@root> list|grep -i 311
[ 165] [Active     ] [            ] [       ] [   10] Apache ServiceMix :: Specs :: JSR-311 API 1.1.1 (1.9.0) 
```

如何解决`Unsatisfied requirement(s)`错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:28:48.747

Fuse 使用旧版本的 CXF，而不是 Talend 为其 ESB 使用的版本，并且当前不支持 CXF 2.7.x，这是添加 JAX-RS 实现的 2.x 版本的地方。它们包含的 CXF 的 2.6.x 版本仅支持 JAX-RS 1.1。您可能可以编辑 Talend 示例以将其降至 1.1 级别。不知道这会有多好。

# android - android 2.3 上的推送通知崩溃。

> ID：15381873
> 
> 赞同：5
> 
> 时间：2013-03-13T09:52:41.647
> 
> 标签：android, notifications, push-notification

我正在尝试将推送通知发送到带有 GCM 的手机，它在带有 android 4 的设备上运行良好，但是当我尝试在 android 2.3 上发送通知时，应用程序崩溃了，我收到了这个错误

```
03-13 11:44:25.994: E/AndroidRuntime(3579): FATAL EXCEPTION: IntentService[GCMIntentService-1074787013996-1]
03-13 11:44:25.994: E/AndroidRuntime(3579): java.lang.IllegalArgumentException: contentIntent required: pkg=com.itom.vreauRCA id=0 notification=Notification(vibrate=default,sound=default,defaults=0xffffffff)
03-13 11:44:25.994: E/AndroidRuntime(3579):     at android.os.Parcel.readException(Parcel.java:1251)
03-13 11:44:25.994: E/AndroidRuntime(3579):     at android.os.Parcel.readException(Parcel.java:1235)
03-13 11:44:25.994: E/AndroidRuntime(3579):     at android.app.INotificationManager$Stub$Proxy.enqueueNotificationWithTag(INotificationManager.java:274)
03-13 11:44:25.994: E/AndroidRuntime(3579):     at android.app.NotificationManager.notify(NotificationManager.java:110)
03-13 11:44:25.994: E/AndroidRuntime(3579):     at android.app.NotificationManager.notify(NotificationManager.java:90)
03-13 11:44:25.994: E/AndroidRuntime(3579):     at com.itom.vreauRCA.GCMIntentService.generateNotification(GCMIntentService.java:71)
03-13 11:44:25.994: E/AndroidRuntime(3579):     at com.itom.vreauRCA.GCMIntentService.onMessage(GCMIntentService.java:36)
03-13 11:44:25.994: E/AndroidRuntime(3579):     at com.google.android.gcm.GCMBaseIntentService.onHandleIntent(GCMBaseIntentService.java:223)
03-13 11:44:25.994: E/AndroidRuntime(3579):     at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:59)
03-13 11:44:25.994: E/AndroidRuntime(3579):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-13 11:44:25.994: E/AndroidRuntime(3579):     at android.os.Looper.loop(Looper.java:123)
03-13 11:44:25.994: E/AndroidRuntime(3579):     at android.os.HandlerThread.run(HandlerThread.java:60)
03-13 11:44:26.374: V/GCMBroadcastReceiver(3579): onReceive: com.google.android.c2dm.intent.RECEIVE
03-13 11:44:26.374: V/GCMBroadcastReceiver(3579): GCM IntentService class: com.itom.vreauRCA.GCMIntentService
03-13 11:44:26.374: V/GCMBaseIntentService(3579): Acquiring wakelock
03-13 11:44:26.414: V/GCMBroadcastReceiver(3579): onReceive: com.google.android.c2dm.intent.RECEIVE
03-13 11:44:26.414: V/GCMBroadcastReceiver(3579): GCM IntentService class: com.itom.vreauRCA.GCMIntentService
03-13 11:44:26.414: V/GCMBaseIntentService(3579): Acquiring wakelock 
```

这是我的 GCMBaseIntentService 类

```
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

import com.google.android.gcm.GCMBaseIntentService;

public class GCMIntentService extends GCMBaseIntentService {
    private static final String TAG = "GCMIntentService";
    PendingIntent contentIntent;

    public GCMIntentService() {
        super(GetObiecte.SENDER_ID);
    }

    @Override
    protected void onRegistered(Context context, String registrationId) {
        Log.i(TAG, "Device registered: regId = " + registrationId);
        Log.d("GCMIntentService", "in GCMIntentService");
    }

    @Override
    protected void onUnregistered(Context context, String registrationId) {
        Log.i(TAG, "Device unregistered");
    }

    @Override
    protected void onMessage(Context context, Intent intent) {
        Log.i(TAG, "Received message");
        String a = intent.getStringExtra("data");
        String b = intent.getStringExtra("data2");
        generateNotification(context, a,b);
    }

    @Override
    protected void onDeletedMessages(Context context, int total) {
        Log.i(TAG, "Received deleted messages notification");
    }

    @Override
    public void onError(Context context, String errorId) {
        Log.i(TAG, "Received error: " + errorId);
    }

    @Override
    protected boolean onRecoverableError(Context context, String errorId) {
        Log.i(TAG, "Received recoverable error: " + errorId);
        return super.onRecoverableError(context, errorId);
    }

    private void generateNotification(Context context, String message,
                                                String title) {

        NotificationManager notificationManager = (NotificationManager) context
                .getSystemService(NOTIFICATION_SERVICE);

        Notification notification = new Notification();
        notification.icon = R.drawable.ic_launcher;
        notification.tickerText = "i-Asigutare";
        notification.defaults = Notification.DEFAULT_ALL;
        notification.setLatestEventInfo(context, title, message, null);
        notificationManager.notify(0, notification);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T10:06:31.507

问题在于 notification.setLatestEventInfo 方法。

此方法在 API 级别 11中[已弃用](http://developer.android.com/reference/android/app/Notification.html#setLatestEventInfo%28android.content.Context,%20java.lang.CharSequence,%20java.lang.CharSequence,%20android.app.PendingIntent%29)，鼓励使用[Notification.Builder 。](http://developer.android.com/reference/android/app/Notification.Builder.html)您还可以查看[NotificationCompat.Builder](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html)以了解支持库的使用情况。

如果您仍然想按照自己的方式行事，您应该查看这个问题的公认答案： [Android - 通知管理器，有一个没有意图的通知](https://stackoverflow.com/questions/7040742/android-notification-manager-having-a-notification-without-an-intent)

这清楚地说明使用这样

```
notification.setLatestEventInfo(context, contentTitle, contentText, PendingIntent.getActivity(getApplicationContext(), 0, new Intent(), 0)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:07:43.847

`notification.setLatestEventInfo(context, title, message, null);`而不是`null`您必须添加一个 Intent，当用户触摸通知时，它将启动。

从[android 开发者页面](http://developer.android.com/reference/android/app/Notification.html#setLatestEventInfo%28android.content.Context,%20java.lang.CharSequence,%20java.lang.CharSequence,%20android.app.PendingIntent%29)：

> contentIntent：当用户点击展开的通知时启动的意图。如果这是一个活动，它必须包含 FLAG_ACTIVITY_NEW_TASK 标志，这要求您按照任务和返回堆栈文档中的描述处理任务管理。

# activiti - Activiti表单数据类型？

> ID：15381877
> 
> 赞同：1
> 
> 时间：2013-03-13T09:52:51.657
> 
> 标签：activiti

可用于 Activiti 工作流表单的可用表单类型有哪些？

[我在文档](http://www.activiti.org/userguide/index.html#formProperties)中找不到。

*Activiti 工作流表单示例（具有各种类型）：*

![在此处输入图像描述](../Images/033bcb58b1cee79d55ecccf476c36a91.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T09:59:15.937

"[我们支持以下表单属性类型：](http://www.activiti.org/userguide/index.html#formProperties) "

*   字符串（org.activiti.engine.impl.form.StringFormType）

*   长（org.activiti.engine.impl.form.LongFormType）

*   枚举（org.activiti.engine.impl.form.EnumFormType）

*   日期（org.activiti.engine.impl.form.DateFormType）

*   布尔值（org.activiti.engine.impl.form.BooleanFormType）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-10T17:39:50.027

实际上，`user`是另一种被 Activiti Explorer 和 REST-API 支持的表单类型。如果您使用用户表单属性，Activiti Explorer 将提供一个自动完成字段来选择用户。如果您使用 LDAP 或 Active Directory，这也适用。这样，您可以在流程运行时确定受让人。仍然缺少组表单属性。除了用户表单属性，您还可以使用上面提到的数据类型。

# r - 创建两个不同长度的表的条形图

> ID：15381879
> 
> 赞同：0
> 
> 时间：2013-03-13T09:52:53.453
> 
> 标签：r, plot, ggplot2

我似乎无法弄清楚如何获得一个漂亮的条形图，其中包含来自两个包含不同列数的表的数据。

有问题的表格类似于（从最后截取一些数据）：

```
> tab1
   1    2    3    6    8   31
5872 1525  831  521  299    4

> tab2
   1    2    3    4   22
7874  422    2    5    1 
```

请注意，列名和大小是不同的。当我只`barplot()`在其中一张表上进行操作时，它会出现我想要的图（将列名显示为 X 轴，Y 轴上的频率）。但是，我希望这两个并排。

我已经创建了一个数据框，其中包含作为注释的变量和第一列中的不同行名（使用`data.frame()`and `merge()`），但是当我绘制这个时，X 轴似乎都是错误的。尝试重新排序列给了我一个关于长度不同的例外。

代码：

```
combined <- merge(data.frame(tab1), data.frame(tab2), by = c('Var1'), all=T)
barplot(t(combined[,2:3]), names.arg = combined[,1], beside=T) 
```

这显示了一个绘图，但并非所有标签都存在，并且位置 26 的值绘制在 33 之后。

有什么简单的方法可以让这个情节发挥作用吗？ggplot2 解决方案会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:59:34.867

您可以将所有数据放在一个数据框中（如示例所示）。

```
df<-data.frame(group=rep(c("A","B"),times=c(2,3)),
   values=c(23,56,345,6,7),xval=c(1,2,1,2,8))
  group values xval
1     A     23    1
2     A     56    2
3     B    345    1
4     B      6    2
5     B      7    8 
```

然后`ggplot()`with`geom_bar()`可用于绘制数据。

```
ggplot(df,aes(xval,values,fill=group))+
  geom_bar(stat="identity",position="dodge") 
```

# sql - 插入/更新/删除记录会自动更新索引吗？

> ID：15381882
> 
> 赞同：4
> 
> 时间：2013-03-13T09:53:04.897
> 
> 标签：sql, sql-server, tsql, indexing, rebuild

在数据库中插入/更新或删除记录会自动更新索引吗？

我已经看到了索引的重建命令，但我无法理解是否必须手动执行所有这些操作，那么索引的目的是什么。这太不方便了，以至于我每周左右都花时间重建索引。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T09:54:39.680

当索引碎片变得太高时，索引将非常低效。需要重建索引。

[让 SQL Server 告诉您要重建哪些索引](http://weblogs.asp.net/okloeten/archive/2009/01/05/6819737.aspx)

重建索引会删除并重新创建索引。这消除了碎片，通过基于现有填充因子设置压缩页面来回收磁盘空间，并重新排序连续页面中的索引行。

[重组和重建索引](http://technet.microsoft.com/en-us/library/ms189858%28v=sql.105%29.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T10:07:30.093

是的，当您`insert, update, or delete`一行时，该表上的任何索引都会自动反映更改。

# app-store - 如何使用 windows8 商店应用程序的模拟器测试我的台式电脑中的加速度计传感器

> ID：15381884
> 
> 赞同：1
> 
> 时间：2013-03-13T09:53:09.220
> 
> 标签：app-store, windows-store-apps

我从 Microsoft 下载了[Windows 8 应用程序示例](http://code.msdn.microsoft.com/windowsapps/Windows-8-Modern-Style-App-Samples)和这些示例之一的**加速度计传感器示例**

![模拟器视觉工作室 2012](../Images/17089f804f0bb20ec69d0fe48ae2e9cf.png)

我不知道如何测试它以规划我的软件以使用此功能？

我没有表面设备，想知道是否只有一种方法可以做到这一点？为什么我们不能测试它并用鼠标摇动它？为什么当我旋转它时传感器在模拟器中不起作用？为什么模拟器中没有任何用于用鼠标摇动模拟器的按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:07:21.480

不幸的是，模拟器不模拟加速度计或除位置以外的其他传感器。您将需要物理传感器硬件来对此进行测试。

[来自 MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/90f618c0-ce0e-4082-a2b9-5de257555461)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-08T17:04:13.153

好吧，您可以使用 Windows Phone Emulator 中的那个

[https://www.nuget.org/packages/XamlActions.AccelerometerSimulator/](https://www.nuget.org/packages/XamlActions.AccelerometerSimulator/)

ps：超级大师解决方法。需要您自担风险使用它 ：）

# verilog - Verilog 中对线路和寄存器的非阻塞同时分配

> ID：15381888
> 
> 赞同：-1
> 
> 时间：2013-03-13T09:53:22.190
> 
> 标签：verilog, nonblocking, assign

我有兴趣编写同时更新多个输出的 Verilog 模块，类似于以下代码，同时进行 3 个操作（clk 10）：

```
module mymodule (a,b,c,d,e);
input a;
input b;
output c;
output d;
output e;

wire b;
wire a;
wire c;
wire d;

reg e;

initial begin
c <=  #10  (a+b);
d <=  #10  a;
e  <= #10  b;
end

endmodule 
```

那个代码合法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T10:52:42.843

如何在 10 个时间单位或时钟后一次性分配变量：

作为测试平台级别的构造：

```
reg c,d,e;
initial begin
  #10;
  c = a+b;
  d = a;
  e = b;
end 
```

对于 RTL（综合），首先您需要一个带时钟的测试台。
我会在我的测试工具中生成一个这样的时钟：

```
reg clk ; //Rising edge every 10 timesteps
initial begin
  clk = 0;
  #5; 
  forever begin
    #5 ;
    clk = ~clk;
  end
end 
```

建立一个计数到 10 的计数器，一旦达到 10，就使触发器能够加载新值。

```
wire enable = (counter == 4'b10);
always @(posedge clk or negedge rst_n) begin
  if (~rst_n) begin
    c <= 1'b0;
    d <= 1'b0;
    e <= 1'b0;
  end
  else if (enable) begin
    c <=  (a+b);
    d <=   a;
    e <=   b;
    end
  end
endmodule 
```

**额外的 Verilog 提示**
输出是隐含的连线，无需重新定义它们。

非阻塞分配`<=`用于在`@(posedge clk)`推断触发器时始终使用。

`reg`s 或`logic`类型可以在内部`always`或`initial`块中分配。`wire`s 用于`assign`或用于端口之间的连接。

# javascript - 为什么这些警报不会在 Javascript Google Maps API Geocode 中返回？

> ID：15381889
> 
> 赞同：2
> 
> 时间：2013-03-13T09:53:22.823
> 
> 标签：javascript, google-maps, google-geocoder

我有以下功能，可以对地址进行地理编码，结果位中的任何警报都不起作用！我在我的页面上的另一个 Geocoder 实例上有完全相同的代码，它工作正常！有什么线索吗？

```
function geocoderegion(addressX) {      
  alert("GeocodeRegion running for " + addressX);
  geocoder2.geocode({address: addressX, partialmatch: true }, function geocodeResult(results, status){
    if (status =='OK' && results.length >0) {
      alert("Geocode ran " + status);
      //return results[0].geometry.location;
    } else {
      alert("Geocode was not successful for the following reason:" + status)
    }
  });
} 
```

# c# - 导入 WSDL 文件会出现错误

> ID：15381892
> 
> 赞同：2
> 
> 时间：2013-03-13T09:53:32.670
> 
> 标签：c#, web-services, wsdl

我有`.wsdl`客户提供的文件列表。我已尝试按照[此处](https://stackoverflow.com/a/6119163/892788)所述导入它们。

但是当我这样做时，它会给出一个错误。此错误如下所示。

```
 The document was understood, but it could not be processed.
  - The WSDL document contains links that could not be resolved.
  - There was an error downloading 'file:///[path]/WebServices_8_0_2_0/WebServices/wsdl/common.xsd'.
  - Could not find file '[path]\WebServices_8_0_2_0\WebServices\wsdl\common.xsd'.
  - Could not find file '[path]\WebServices_8_0_2_0\WebServices\wsdl\common.xsd'.
  - Could not find file '[path]\WebServices_8_0_2_0\WebServices\wsdl\common.xsd'.
   If the service is defined in the current solution, try building the solution and adding the service reference again. 
```

我不知道这个`common.xsd`文件是什么。至少有人可以告诉我发生这种情况的原因和可能的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T10:02:46.403

该`common.xsd`文件可能包含 WSDL 中使用的类型定义。尝试手动下载文件（URL 应该在 WSDL 中）并将文件保存在 WSDL 文件旁边。

# magento - 模板邮件主题中的重音

> ID：15381894
> 
> 赞同：0
> 
> 时间：2013-03-13T09:53:35.203
> 
> 标签：magento, special-characters

在 base_url/app/locale/fr_FR（或任何语言）/模板/电子邮件中

在所有 template.html 中，主题字符串不支持特殊字符（生成错误），并且所有代码 html 或 iso 都不会被解释。

<!--@ subject l'été à la plage @-->

有人有解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:00:58.040

您是否尝试过将这些字符作为 html 实体放入？我们已经成功地在我们的德语电子邮件中添加了特殊字符。

可以在[此处找到对字符的引用](http://www.w3schools.com/tags/ref_entities.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:18:10.627

是的，我也尝试使用实体编号和实体名称，但它们没有被解释。在身体里没关系。

你在这个主题上真的成功了吗？您是否在管理此输出的模型中使用了 htmlentities php 方法？（想想应该是正确的做法）。

# multithreading - 跨线程合并更改时如何防止竞争条件？

> ID：15381896
> 
> 赞同：2
> 
> 时间：2013-03-13T09:53:38.223
> 
> 标签：multithreading, core-data, merge, race-condition

一个典型的设置：我们有一个带有 a 的主线程`mainMOC`和一个带有自己的`backgroundMOC`. `backgroundMOC`后台线程通过将块分派到对 执行只读操作`backgroundQueue`。

`backgroundMOC`需要合并来自的更改，因此`mainMOC`我们注册`NSManagedObjectContextDidSaveNotification`然后执行类似的操作

```
- (void)mainMocDidSave:(NSNotification *)notification {
    dispatch_async(backgroundQueue, ^{
        [backgroundMoc mergeChangesFromContextDidSaveNotification:notification];
    });
} 
```

假设用户删除了`mainMOC`. 上面的代码对我来说似乎并不安全，因为合并将在未来的某个时候完成。在合并完成之前，可能仍然存在`backgroundQueue`试图使用已删除对象的块。

显而易见的解决方案是`dispatch_sync`改用（或`performBlockAndWait`, `performSelector:OnThread:...`）。从我在互联网上看到的代码片段来看，这似乎是每个人都在做的事情。但我也不喜欢这个解决方案。

该名称`NSManagedObjectContextDidSaveNotification`暗示在发送通知时保存已经发生。所以相应的行已经从底层数据库中删除（假设是一个 sqlite 存储）。`dispatch_sync`必须等待队列中的其他块完成才能合并更改，并且这些其他块仍然可以尝试使用已删除的对象，从而导致`NSObjectInaccessibleException`.

在我看来，将更改从一个线程/队列合并到另一个的正确方法是

1.  订阅`NSManagedObjectContextWillSaveNotification`并`NSManagedObjectContextDidSaveNotification`在后台线程上。
2.  On `NSManagedObjectContextWillSaveNotification`：清空`backgroundQueue`并暂停任何将新块分派到队列的操作。
3.  On `NSManagedObjectContextDidSaveNotification`：同步合并更改。
4.  在后台队列上恢复正常操作。

这是正确的方法还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T12:29:15.450

我在两个项目中使用了以下结构，在这些项目中我遇到了与您类似的麻烦。首先，我使用单例服务来确保只有一个后台线程合并和读取更改。

**AppDelegate.m**

```
- (NSManagedObjectContext *)managedObjectContext {
    if (_managedObjectContext != nil) {
        return _managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil) {
        // It is crucial to use the correct concurrency type!
        _managedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
        [_managedObjectContext setPersistentStoreCoordinator:coordinator];
    }
    return _managedObjectContext;
}

- (void)saveContext {
    NSError *error = nil;
    NSManagedObjectContext *managedObjectContext = self.managedObjectContext;
    if (managedObjectContext != nil) {
        if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error]) {
             // Replace this implementation with code to handle the error appropriately.
             // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        }
        else {
            [[NSNotificationCenter defaultCenter] postNotificationName:@"ParentContextDidSaveNotification" object:nil];
        }
    }
} 
```

**后台服务.m**

```
- (id)init {
    self = [super init];

    if (self) {
        [self managedObjectContext];
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(parentContextDidSave) name:@"ParentContextDidSaveNotification" object:nil];
    }

    return self;
}

- (NSManagedObjectContext *)managedObjectContext {
    if (!_managedObjectContext) {
        // Again, make sure you use the correct concurrency type!
        _managedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
        [_managedObjectContext setParentContext:[(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext]];
    }

    return _managedObjectContext;
}

- (BOOL)saveContext {
    @synchronized(self) {
        BOOL successful = YES;

        // Bad practice, process errors appropriately.
        [[self managedObjectContext] save:nil];

        [[[self managedObjectContext] parentContext] performBlock:^{
            [(AppDelegate *)[[UIApplication sharedApplication] delegate] saveContext];
        }];

        return successful;
    }
}

- (void)parentContextDidSave {
    [[self managedObjectContext] reset];

    [[NSNotificationCenter defaultCenter] postNotificationName:@"ManagedObjectContextResetNotification" object:nil];
} 
```

# activerecord - 将 ActiveRecord 查询中的 :include 和 :joins 与嵌套关联混合

> ID：15381904
> 
> 赞同：3
> 
> 时间：2013-03-13T09:54:05.110
> 
> 标签：activerecord, ruby-on-rails-3.2

我想知道在从数据库中检索对象时是否以及如何实现混合`:include`和`:joins`关联以避免不必要的往返。

例如，当有一个模型空间时：

```
 —————                —————             —————
|  A  | 0..1 ————— * |  B  | * ————— 1 |  C  |
 —————                —————             ————— 
```

在这里，我通过已知标识符加载 A 的实例以显示在我的视图中，但我也想加载 B 和 C （B via`:include`和 C via `:joins`）。这可以做到吗？到目前为止，我`:include`只使用，即。

```
A.find params[:id], :include => [ { :b => :c } ] 
```

这自然会生成两个额外的往返（1.，通过 id 获取 A，2.获取关联的 B，3.获取关联的 C）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:06:21.917

由于您使用的是 Rails 3，因此您可以链接这些方法。

```
A.includes(:b).joins(b: :c).find(params[:id]) 
```

# spring-roo - Spring ROO 自定义查找器

> ID：15381906
> 
> 赞同：1
> 
> 时间：2013-03-13T09:54:11.537
> 
> 标签：spring-roo

我使用 Spring ROO ，我成功生成了查找器。问题是每个属性都在自己的菜单中，我想以一种形式生成自定义查找器。

我首先在我的实体中添加一个方法，这里是方法

```
 public static TypedQuery<com.keyrus.outside.business.entity.Candidate> findCandidatesByCustomDataLike(String principalSkills, String university) {
    if (principalSkills != null) {
        principalSkills = principalSkills.replace('*', '%');
        if (principalSkills.charAt(0) != '%') {
            principalSkills = "%" + principalSkills;
        }
        if (principalSkills.charAt(principalSkills.length() - 1) != '%') {
            principalSkills = principalSkills + "%";
        }
    }
    if (university != null) {
        university = university.replace('*', '%');
        if (university.charAt(0) != '%') {
            university = "%" + university;
        }
        if (university.charAt(university.length() - 1) != '%') {
            university = university + "%";
        }
    }
    EntityManager em = Candidate.entityManager();
    TypedQuery<Candidate> q = em.createQuery("SELECT o FROM Candidate AS o WHERE LOWER(o.principalSkills) LIKE LOWER(:principalSkills)" + 
    " AND LOWER(o.university) LIKE LOWER(:university)", Candidate.class);
    q.setParameter("principalSkills", principalSkills);
    q.setParameter("university", university);
    return q;
} 
```

如何在 *.aj 文件中生成它？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-29T06:57:08.420

如果我理解正确，您想向与您的实体相关的 AspectJ IDT 文件添加一个新方法，该文件由 Spring Roo 生成。

如果是这种情况，我建议您将更改保留在实体 .java 文件中。这就是 Spring Roo 的工作方式，它在 .aj 文件中生成代码，而您在 .java 文件中编写自己的代码。如果您修改 .aj 文件，它将被 Roo 覆盖。

[您可以在Spring Roo 参考文档](http://docs.spring.io/spring-roo/reference/html/architecture.html#architecture-critical-technologies-aspectj)以及[推荐的实践](http://docs.spring.io/spring-roo/reference/html/usage.html#usage-recommendations)中获得有关其工作原理的更多信息。

如果您想要添加一个可以合并到任何实体中的新功能，您可以开发自己的 Roo 插件，然后生成自己的 .aj 文件，添加您需要的新方法。

# functional-programming - Why `list` in OCaml does not maintain a pointer to the last element?

> ID：15381907
> 
> 赞同：1
> 
> 时间：2013-03-13T09:54:12.380
> 
> 标签：functional-programming, ocaml

When we do `l1 @ l2`, it is `O(length(l1))` because we have to go through l1 and connect l1 and l2.

**So my question is that why the implementation does not maintain a `last_element` pointer?**

I ask this because I want to learn/understand the decision making process of `OCaml`'s standard library implementation.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T09:57:02.263

Just going to the last element of `l1` would not help us. We need to copy the entire contents of `l1` and we can't do that without going through it. So having a pointer to the end of `l1` wouldn't help us.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T14:40:02.290

To build on sepp2k's answer: List are implemented this way in OCaml.

```
type 'a list = Nil | Cons of 'a * 'a list 
```

a list l1 [1;2;3] can be thought in this way:

```
Cons (1, Cons(2, Cons(3, Nil))) 
```

Say you want to concatenate it with l2, in Cons(3, Nil), you need to replace the Nil with l2, which is impossible since these elements are immutable. The new list is constructed this way:

```
Cons (1, Cons(2, Cons(3, l2))) 
```

which is O(length(l1))

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T17:03:49.080

Octref and sepp2k explained well why it's impossible to have `O(1)` appends with cons lists. I'd just like to point that you can always use other data structures that support constant time (amortized or worst case) appends.

Other options include:

1) Difference lists, have `O(1)` appends but need `O(n)` to turn them into cons lists. (Not aware of any implementations in OCaml however)

2) Catenable lists have `O(1)` amortized appends.

3) You can always use mutable linked lists. Such as `DllList` in batteries.

# jquery-ui-autocomplete - Jquery UI Autocomplete - 如何将变量从 Jquery 传递到 ashx 处理程序

> ID：15381911
> 
> 赞同：0
> 
> 时间：2013-03-13T09:54:33.120
> 
> 标签：jquery-ui-autocomplete, generic-handler

我正在使用 Jquery UI 多值自动完成，我正在向服务器发出请求：

```
.autocomplete({
          source: function(request, response) {
              $.getJSON("handlers/autocomplete.ashx", {
                  term: extractLast(request.term)
              }, response);
          }, 
```

如何取回`term`.ashx 处理程序中的值？

我已经尝试过`Request.Form["TextBox1"]`，但我遇到了`object reference not set to an intance of an object`错误。有什么办法可以直接得到吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T11:12:03.270

使用 url 传递 TextBox1 值

```
.autocomplete({
          source: function(request, response) {
              $.getJSON("handlers/autocomplete.ashx?TextBox1=curtxt", {
                  term: extractLast(request.term)
              }, response);
          }, 
```

从处理程序中读取 TextBox1 public void ProcessRequest(HttpContext context) {

```
 HttpRequest request = context.Request;
        HttpResponse response = context.Response;

string txtval = request["TextBox1"];

   } 
```

# ajax - Jquery Mobile - 在 AJAX 加载内容后，搜索输入在帖子上没有价值

> ID：15381913
> 
> 赞同：1
> 
> 时间：2013-03-13T09:54:37.510
> 
> 标签：ajax, jquery, jquery-mobile

我遇到一个问题，当通过 Ajax 加载页面时，我的搜索输入中没有值。这是我的 HTML：

```
<form id="searchForm" action="javascript:;" method="post">
    <div>
        <input type="search" name="search-mini" id="search-mini" value="" data-mini="true" />
        <input type="submit" data-mini="true" value="Search"  />
    </div>
</form> 
```

我们有一个输入按钮的原因是因为来自客户的请求，因为他们发现人们会在 IOS 键盘上单击“完成”而不是“搜索”而不提交表单。这是我处理提交的Javascript：

```
$(document).on('submit', '#searchForm', function () {
    var text = $("#search-mini").val();
    text = encodeURIComponent(text);
    window.location.href = "/Mobile/Browse/Text?text=" + text;
    return true;
}); 
```

如果我刷新页面，这一切都运行良好，因此内容不会通过 AJAX 加载。只有在页面之间链接并且它们由 AJAX 加载时才会失败。在这种情况下，提醒“文本”具有空白值。

我已经阅读了有关使用 JQM 初始化事件（例如“PageInit”而不是 DOM ready()）的信息，如果这是正确的方法，我只需要一个用我的代码实现它的示例吗？

问候，

丹尼

# c# - 枚举返回后无法访问代码

> ID：15381919
> 
> 赞同：0
> 
> 时间：2013-03-13T09:54:52.720
> 
> 标签：c#

嗨，我有一个 emun，它将通过 if 语句运行测试。

```
public enum Test_Criteria
    {
        Pass,
        Warning,
        Fail
    } 
```

在它运行 if 语句之后

```
if (driver.Url.Contains("Postcode.aspx?type=billing&mode=guest"))
        {

            return Test_Criteria.Pass;
        }

        else
        {
            return Test_Criteria.Fail;  
        } 
```

我正在获取无法访问的代码，以便直接在下面进行下一个测试

```
driver.FindElement(By.Id("Pagecontent_TextBoxPostCode")).SendKeys("#####"); 
```

让程序在返回后继续代码的最明智的方法是什么。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:55:39.767

`if`您在and子句中都返回`else`，这就是为什么您的代码不会在`if`语句之后到达下一行。在任何情况下，如果检查失败与否，您的代码将从该方法返回。这就是您收到错误/警告的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:03:48.567

您的问题是您正在从条件的两个分支返回。如果你想执行更多的代码，你不应该返回任何一个。

为了测试多个条件，您可以尝试这样的事情：（我在这里假设失败的条件会立即停止测试）

```
var result = Test_Criteria.Pass;
if ( */fail condition*/ )
{
    return Test_Criteria.Fail;  
}

if ( */another fail condition*/ )
{
    return Test_Criteria.Fail;  
}

if( */warning condition*/ )
{
    result = Test_Criteria.Warning;
}
else if( */another warning condition*/ )
{
    result = Test_Criteria.Warning;
}

return result; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:20:16.577

您有两个执行路径，每个都从您的函数返回，因此在 if-else 块之后确实不可能继续。

尝试这个：

```
var urlContains = driver.Url.Contains("Postcode.aspx?type=billing&mode=guest"));
var result = urlContains ? Test_Critera.Pass : Test_Criteria.Fail;

driver.FindElement(By.Id("Pagecontent_TextBoxPostCode")).SendKeys("#####");
//the rest of your code

return result; 
```

# c# - C# 在 Web 浏览器中打开 .xls 文件时，它会打开一个 excel 实例

> ID：15381922
> 
> 赞同：1
> 
> 时间：2013-03-13T09:54:57.557
> 
> 标签：c#, excel

对于我的 C# 表单应用程序，我看到多个教程说可以使用以下代码在 Web 浏览器中打开一个 excel 文件：

`this.webBrowser2.Navigate("filename", false);` [http://www.codeproject.com/Articles/15760/How-to-Integrate-Excel-in-a-Windows-Form-Applicati](http://www.codeproject.com/Articles/15760/How-to-Integrate-Excel-in-a-Windows-Form-Applicati)

但是，当我尝试此操作时，Web 浏览器显示“导航到网页已取消”并且 Excel 打开并在其中打开电子表格。

有谁知道如何阻止这种情况发生？

干杯，

汤姆

编辑：我现在已经解决了这个问题 - 我将在七个小时内发布答案（因为帖子少于十个的用户无法在发布后的前八小时内回答他们自己的问题）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T09:06:07.980

我已经解决了！！

这个问题与 C# 或 Visual Studio 无关，它与 windows 如何管理它的文件类型有关（我认为）。这个链接告诉你如何**阻止**在 Internet Explorer 中打开 Excel 文件，所以我只是做了与他们所说的相反的事情。（我做了注册表编辑方法-方法2）。 [http://support.microsoft.com/kb/162059#LetMeFixItMyselfAlways](http://support.microsoft.com/kb/162059#LetMeFixItMyselfAlways)

要解决此问题：转到 **HKEY_LOCAL_MACHINE/Software/Classes** 并将以下键的 BrowserFlags 数据编号更改为 1：

Excel.Sheet.8

Excel.Sheet.12

Excel.SheetBinaryMacroEnabled.12

Excel.SheetMacroEnabled.12

然后你就完成了。这对我来说适用于 .xls 文件和 .xlsx 文件及其相关的宏文件。希望这将有助于将来的某人。

干杯，

汤姆

# java - 在本地 tomcat 中运行 Web 应用程序失败并出现 LinkageException

> ID：15381927
> 
> 赞同：0
> 
> 时间：2013-03-13T09:55:14.250
> 
> 标签：java, jsp, tomcat, servlets

将 Web 应用程序部署到本地 tomcat（在 eclipse 中）时，启动失败并出现以下错误：

> 严重：向 com.sun.faces.config.ConfigureListener 类的侦听器实例发送上下文初始化事件的异常
> 
> java.lang.LinkageError：加载程序约束冲突：解析接口方法时“javax.servlet.jsp.JspApplicationContext.addELResolver(Ljavax/el/ELResolver;)
> 
> 当前类 com/sun/faces/config/ConfigureListener 的类加载器（org/apache/catalina/loader/WebappClassLoader 的实例）和用于解析的类加载器（org/apache/catalina/loader/StandardClassLoader 的实例）类，javax/servlet/jsp/JspApplicationContext，对于 p.JspApplicationContext.addELResolver(Ljavax/el/ELResolver;) 类型有不同的 Class 对象

这里发生了什么？我已经读过它可能与在 WEB-INF/lib 中有 servlet jars 有关，但这似乎不是问题所在：

![WEB-INF/lib JAR](../Images/0a71153db17d498675d7915f2c70f435.png)

那里没有“javax.*” jar，那么为什么该包中的类会失败？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T10:00:11.520

`servlet-api` 从您的应用程序中删除。这不应该在 webapp 分发中。

Tomcat（或任何容器）必须从它自己的类路径中提供这些类，以便类的多个实例不会被类加载。

如果您使用的是 maven，则这需要是一个`provided`依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T04:44:14.587

问题是由于位数引起的。检查您正在使用哪位操作系统并为该位安装 jre。因为tomcat是一个java应用程序，它没有位。这意味着它可以在 64 位和 32 位上运行。

可以同时安装 64 位和 32 位版本的 Java。如果 Tomcat 7 安装程序发现（仅）安装了 Java 7 32 位，那么它会将 tomcat 7 安装到 Program files (x86) 目录中。但是 Tomcat 7 安装程序将选择 64 位版本的 Java，并将其自身安装到 Program Files 文件夹中。

但是你不能假设在这种情况下 Tomcat 7 使用的是 64 位 Java，因为用户可能在安装 tomcat 7 后添加了 64 位 Java，而当 tomcat 7 不知道将其“位”从 32 更改为 64 时有时候是这样的。

# hibernate - 其中employees.employees.gender = 'm'，或者如何过滤Item 字段上的Item 列表？

> ID：15381928
> 
> 赞同：1
> 
> 时间：2013-03-13T09:55:17.107
> 
> 标签：hibernate, select, join, filter, hql

雇主有许多雇员（一对多的关系）。以下是我为给定选择员工的方式`:employer`：

```
select employer.employees
from Employer employer
where employer = :employer 
```

我想过滤结果以仅获取`gender`字段为的员工`m`。我如何使用 HQL 来实现这一点？[文档](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html)中是否有我没有注意到的任何条款？

理想情况下，类似：

```
and employer.employees.gender = 'm' 
```

或者：

```
and each(employer.employees).gender = 'm' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:23:10.723

试试这个查询

```
SELECT ey.name
FROM Employer employer
LEFT JOIN employer.employees ey
WHERE ey.gender = 'm' AND employer = :employer 
```

希望这可以帮助。

# apache - 我可以在 apache wicket 框架中使用任何其他页面而不是 HTML，如 JSP ...等吗？

> ID：15381934
> 
> 赞同：0
> 
> 时间：2013-03-13T09:55:30.313
> 
> 标签：apache, jsp, wicket

我在 wicket 应用程序中有 Web 应用程序，我想在其中包含 jsp 页面，所以我可以在 apache wicket 框架中使用任何其他页面而不是 HTML，如 JSP ...等如果是，那么如何配置 wicket 框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:05:22.260

您必须使用`getRequestCycleSettings().setBufferResponse(false)`.

否则，您的 Wicket 页面将在立即包含的 JSP 之后被刷新。

参考[Jsp 和 Wicket 坐在同一棵树上](http://herebebeasties.com/2007-03-01/jsp-and-wicket-sitting-in-a-tree/) :)

# java - 在 Android 应用程序中关闭 ByteArrayOutputStream

> ID：15381952
> 
> 赞同：12
> 
> 时间：2013-03-13T09:56:10.747
> 
> 标签：java, android, bytearrayoutputstream

在一个 Android 应用程序中，我正在发送从 中拍摄的图片，`Camera Intent`因此我需要将 a 转换`Bitmap`为字节数组。为此，我使用`ByteArrayOutputStream`如下：

```
private byte[] getRawImageData(Bitmap source) {
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    byte[] rawImageData = null;
    try {
        source.compress(CompressFormat.JPEG, DEFAULT_COMRESSION, baos);
        rawImageData = baos.toByteArray();
    } finally {
        try {
            baos.close();
        } catch (IOException e) {
            // handle exception here
        }
    }
    return rawImageData;
} 
```

一切正常，真正的问题是`ByteArrayOutputStream`javadoc 和 Android 文档之间的文档差异。

[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/ByteArrayOutputStream.html#close%28%29)读取_

> 关闭 ByteArrayOutputStream 无效。

[Android 文档](http://developer.android.com/reference/java/io/ByteArrayOutputStream.html#close%28%29)内容如下：

> 关闭此流。这会释放用于该流的系统资源。

无论如何，我都会关闭流，但我想知道哪些文档是正确的以及它们为什么不同。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T10:15:27.740

`ByteArrayOutputStream`是基于内存的流（由用户在代码中管理和填充），因此调用`close()`它时没有任何效果。清理其内存占用的唯一方法是撤销对该对象的所有引用。届时，**垃圾收集器**将在不久的将来随时启动并完成清理此类对象的工作。

但是，当您使用文件或输入/输出套接字流（例如`OutputStream`，`InputStream`）等资源时，需要关闭流。当您调用`close()`此类流时，JVM 会安全地释放它们的本地存储/占用内存并避免任何 OutOfMemory 问题。

`close()`所以总的来说，当不再需要任何类型的流时调用它是好的（有时是至关重要的） ，但更重要的是，最好知道我们为什么要调用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T10:00:32.913

这是 ByteArrayOutputStrem.close 的实现

```
public void close() throws IOException {
} 
```

API 说*关闭 ByteArrayOutputStream 没有效果*

所以省略 close() 是安全的，另一方面它也没有害处，JVM 无论如何都会跳过对空方法的调用。它可用于避免警告*资源未关闭*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:03:20.597

关闭流不会造成任何伤害，但不关闭它可能会。所以最好关闭它。

# cuda - CUBLAS 库：查找实际值的最大值而不是绝对值

> ID：15381956
> 
> 赞同：2
> 
> 时间：2013-03-13T09:56:21.367
> 
> 标签：cuda, cublas

NVIDIA CUDA 的 CUBLAS 库允许找到具有最大**绝对值**(cublasIsamax) 的元素/索引。是否可以使用 CUBLAS 缩减函数以某种方式找到具有最大**实际值的元素/索引？**

[我使用的是 CUBLAS 3.2 版。]

**编辑**
约束：我无法以任何方式更改生产服务器的状态。这意味着我不能使用推力/cudpp，并且我坚持使用旧版本的 CUBLAS。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:06:18.143

我不确定您指的是什么“减少功能”。

CUBLAS 基本上只是用于 CUDA 设备的 BLAS 的“同类”实现。它仅提供标准的 1 级、2 级和 3 级 BLAS 函数，以及恰好三个扩展——geam（缩放矩阵加法/转置）、dgmm（对角矩阵-矩阵点积）和 getrfBatched（用于许多小矩阵的批量 LU 分解）。这些函数都不会找到提供的向量或矩阵的有符号最大值。

NVIDIA[提供 cudpp](https://code.google.com/p/cudpp/)和[推力](https://github.com/thrust/thrust#readme)，其中任何一个都可能更适合此类操作。此外，CUBLAS 3.2 已有两年半的历史。

作为最后的评论，我强烈建议使用 CUBLAS 4.x 或 CUBLAS 5.x 版本。代码的 API 和性能得到了显着改善，尤其是对于较新的硬件。

# jquery - jQuery, $(element).click 不适用于 ie<9

> ID：15381959
> 
> 赞同：2
> 
> 时间：2013-03-13T09:56:27.447
> 
> 标签：jquery, internet-explorer, events

我有一个像这样的 jQuery 的点击事件：

```
$(document).ready(function() {    
    $("#id_secteur_activite").click(function () {    
        console.log('ok');    
    });
}); 
```

在 Firefox 和 ie9 上，当我单击我的元素时`#id_secteur_activite`，我的控制台中会显示“ok”消息。

但是当我在 ie 8 和 ie7 上测试时，我什么都没有。.click 不适用于 ie<9。

你有什么想法 ？谢谢 ！

编辑 ：

```
<SELECT id=id_secteur_activite name=secteur_activite>
<OPTION selected value="">choisissez d'abord un secteur d'activité</OPTION>
</SELECT> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T10:01:53.990

采用`.on()`

```
$(document).ready(function() {    
    $("#id_secteur_activite").on('click',function () {
        alert('ok');    
    });
}); 
```

并且还使用`alert`而不是`console`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:04:36.207

[演示（[http://jsfiddle.net/mplungjan/8t8Jh/show/](http://jsfiddle.net/mplungjan/8t8Jh/show/)）

所有工作都使用足够高的 jQuery 版本（这里是当前 v1.9.2pre 的边缘）

```
$(document).ready(function() {    
/*    $("#id_secteur_activite").click(function () {    
        console.log('click');    
    });
*/    
    $("#id_secteur_activite").on("click",function () {    
        console.log('click');    
    });
    $("#id_secteur_activite").on("change",function () {    
        console.log('change');    
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:04:28.730

您可以同时使用`click`事件和 `change`事件。

```
$(document).ready(function() {    
    $("#id_secteur_activite").on('change',function () {    
        console.log('ok');    
    });
}); 
```

# mysql - 查询返回错误结果

> ID：15381963
> 
> 赞同：1
> 
> 时间：2013-03-13T09:56:37.220
> 
> 标签：mysql

```
SELECT 
    A.id AS id, 
    Group_Concat(B.value) AS values, 
    Group_Concat(C.ac_id) AS ac_id, 
    Concat(D.first_name,' ',D.last_name) AS updatedBy
FROM A 
LEFT JOIN B 
    ON A.id = B.id 
LEFT JOIN C 
    ON A.id = C.id 
LEFT JOIN D 
    ON A.modified_by = D.user_id 
WHERE 
    A.status!='deleted' 
    AND A.created_by = '18'  
GROUP BY A.id; 
```

表 B 和 C 有多行对应于 A.id 这就是为什么我在这些字段上使用 group_concat 但对于那些分组的列我得到错误的结果。查询返回结果如

```
+---------+-------------------------+-------------------------+-------------+
| id      | values                  | ac_id                   | updatedBy   |
+---------+-------------------------+-------------------------+-------------+
|       8 | A,A,A,B,B,B,C,C,C,D,D,D | 1,5,6,1,5,6,1,5,6,1,5,6 | Abdul       |
+---------+-------------------------+-------------------------+-------------+ 
```

但我需要这样的输出

```
+---------+-------------------------+-------------------------+-------------+
| id      | values                  | ac_id                   | updatedBy   |
+---------+-------------------------+-------------------------+-------------+
|       8 | A,B,C,D                 | 1,5,6                   | Abdul       |
+---------+-------------------------+-------------------------+-------------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:59:41.760

在`DISTINCT`你的`GROUP_CONCAT()`. 这样就不会显示重复项。

```
SELECT 
A.id AS id, 
Group_Concat(DISTINCT B.value) AS values, 
Group_Concat(DISTINCT  C.ac_id) AS ac_id, 
Concat(D.first_name,' ',D.last_name) AS updatedBy
FROM A 
LEFT JOIN B ON A.id = B.id 
LEFT JOIN C ON A.id = C.id 
LEFT JOIN D ON A.modified_by = D.user_id 
WHERE A.status!='deleted' AND A.created_by = '18'  GROUP BY A.id; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T10:00:54.573

这个问题已经解决了！

直接从[以下文档中获取`GROUP_CONCAT`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)：

> 要消除重复值，请使用该`DISTINCT`子句。

甚至还有一个方便的使用示例。

**请使用文档。**

# vb.net - Word COM Addin：如何迭代不连续选定文本的所有部分（Ctrl 键）

> ID：15381964
> 
> 赞同：1
> 
> 时间：2013-03-13T09:56:38.003
> 
> 标签：vb.net, ms-word, office-interop

我正在开发一个 Word 2007/2010 COM 插件，它可以帮助用户在 Word 文档中应用自定义样式。

目前我成功地在连续选定的文本上应用样式（甚至在多个段落上），但是当我尝试不连续的选择（由于'Ctrl'键在文档的不同部分中选择的文本）时，只有最后一个选定的部分是风格。

How can I iterate on different selected parts when selections are not consecutive?

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:09:36.237

我终于找到了一个解决方法，我将在下面为感兴趣的人公开：

我使用 WindowSelectionChange 来捕捉我的 word 文档中的每个选择更改，我将代码放在下面

```
Public mySelectionStack as ArrayList

If My.Computer.Keyboard.CtrlKeyDown Then   
    mySelectionStack.Add(Sel.Range)
Else                                  
    mySelectionStack = New ArrayList()
    mySelectionStack.Add(Sel.Range)
End If 
```

然后，我可以在 mySelectionStack 上为 each 执行一个操作，以将专用行为应用于选择的每个部分。

# asp.net-mvc - 从视图调用部分视图时，两次抛出验证错误

> ID：15381974
> 
> 赞同：1
> 
> 时间：2013-03-13T09:57:07.100
> 
> 标签：asp.net-mvc, partial-views

**我的视图中有一个 aspx 页面，它调用了局部视图，**

```
using (Html.BeginForm("Edit", "MyReport", FormMethod.Post, new { name = "myform", autocomplete = "off" }))
   {%>
    <%
       Html.RenderPartial("_Form");%>    
 <% } %> 
```

**部分观点是**

```
 <div>
        <%=Html.ValidationSummary()%>    
    </div>    
    <div class="fieldRow">    
        <span class="fieldCell threeCol">    
            <label for="schedule.SavedReportName">   
                Name<span class="requiredField">*</span>    
            </label>   
        <%=Html.TextBox("schedule.SavedReportName", ViewData.Model.SavedReportName, new {style = "width:516px;"})%>    
        </span>   
    </div> 
```

**我的模型有这个属性**

```
[Required(ErrorMessage = "Name is required.")]

[StringLength(60, ErrorMessage = "Maximum 60")]
public string SavedReportName { get; set; } 
```

我遇到的问题是，我可以看到两次字符串长度验证错误。可能是什么问题？

# php - 在 zend 框架 2 中使用 URL 重定向进行身份验证

> ID：15381977
> 
> 赞同：0
> 
> 时间：2013-03-13T09:57:11.763
> 
> 标签：php, zend-framework2

我是 Zend Framework 2 的新手。

我创建了一个“Admin”模块，还创建了“UserController”和“AlbumController”。UserController 包含登录和注销操作。AlbumController 包含正常的 CRUD 和欢迎操作。

`http://localhost/websites/zendtest/public/admin/login`现在，当我已经登录后直接访问时，如何在欢迎页面上重定向页面。

`http://localhost/websites/zendtest/public/admin/album/welcome`而且，同样的问题是当我尚未登录时直接访问时，如何在登录页面上重定向页面。

任何人都可以建议我解决这个问题吗？

我还有另一个问题，我如何在 layout.phtml 中使用控制器操作值，因为我有 MenuContoller 来创建菜单。所以我需要从 layout.phtml 中的 MenuController 返回数组来创建动态菜单。

那么，我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:02:05.440

我认为你不想在[ZF2 doc](http://framework.zend.com/manual/2.0/en/modules/zend.mvc.plugins.html)中解释。要恢复，您必须使用`redirect`插件测试会话并重定向：

```
$this->redirect()->toRoute('actionname'); 
```

**重定向**插件的使用方式如下：

```
->toRoute($route, array $params = array(), array $options = array()); 
```

`$params`使用提供的和`$options`组装的 URL重定向到命名路由。

要验证像`acl`旧 ZF 插件这样的用户，请转到[此页面](http://p0l0.binware.org/index.php/2012/02/18/zend-framework-2-authentication-acl-using-eventmanager/)

**对于最后一个问题**，您可以使用（对于 ZF2.1.3）在视图中传递一些值

```
$layout = $this->layout();
$layout->myvar = $mymenuarray; 
```

并使用在视图中检索它

```
$myvar... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:14:30.710

我不知道您是如何验证用户的，但如果您正在使用`Zend\Auth`，那么您可以执行以下操作：

```
public function loginAction() {
    $authService = new \Zend\Authentication\AuthenticationService();
    $authService->setStorage(new \Zend\Authentication\Storage\Session('user', 'details'));

    if ($authService->hasIdentity()) {
        // User is already logged in; redirect to welcome page
        return $this->redirect()->toRoute('welcome'); // Assumes that you have a 'welcome' route
    }
} 
```

对于欢迎行动：

```
public function welcomeAction() {
    $authService = new \Zend\Authentication\AuthenticationService();
    $authService->setStorage(new \Zend\Authentication\Storage\Session('user', 'details'));

    if (!$authService->hasIdentity()) {
        // User is not logged in; redirect to login page
        return $this->redirect()->toRoute('login'); // Assumes that you have a 'login' route
    }
} 
```

如果您希望在许多页面上执行上述操作，可能会非常重复，因此您应该考虑使其可重用，例如通过从服务管理器（*工厂*）获取身份验证服务。

# sharepoint - 我是否需要在本地计算机上安装 SharePoint 2013 才能进行 Web 部件开发？

> ID：15381979
> 
> 赞同：7
> 
> 时间：2013-03-13T09:57:23.293
> 
> 标签：sharepoint, visual-studio-2012

我们在远程计算机上有一个 SharePoint 2013 服务器。我可以在我的开发 PC 上不安装 SP 服务器或在远程计算机上安装 VS2012 的情况下开发 Web 部件吗？在各个网站上似乎有关于此的相互矛盾的消息。

我只是希望能够在本地构建我的应用程序并部署到 SP2013。是否有 SP2013“精简版”解决方案可以帮助我在我的开发机器上实现这一目标？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T23:39:49.967

是的，您可以在不安装 SharePoint 本身的情况下开发适用于 SharePoint 2013 的**应用程序。**您将需要安装以下内容：

*   [从http://www.microsoft.com/web/downloads/platform.aspx](http://www.microsoft.com/web/downloads/platform.aspx)安装 Microsoft Web 平台安装程序
*   [从http://www.microsoft.com/en-us/download/details.aspx?id=35585](http://www.microsoft.com/en-us/download/details.aspx?id=35585)安装 SharePoint 2013 开发 SDK

您还需要为您的 SharePoint 网站[设置应用程序目录](http://msdn.microsoft.com/en-us/library/fp123530.aspx)以使用您创建的应用程序。

注意：如果您想开发解决方案 (wsp) 文件，那么您仍然需要在开发计算机上安装 SharePoint。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:50:26.697

在 SP 2013 中，现在可以使用 Visual Studio 2012 开发应用程序而无需直接安装 SP。请参阅[本文](http://msdn.microsoft.com/en-us/library/jj220047.aspx)

如前所述：

> 使用 Visual Studio 中以前版本的 SharePoint 工具，开发人员必须先在本地安装 SharePoint Foundation 或 SharePoint Server，然后才能在 Visual Studio 中构建 SharePoint 解决方案。这一要求增加了开发成本，不仅因为需要更多的 SharePoint 副本，还因为需要更强大的系统来托管它们。
> 
> 但是，通过将**Microsoft Visual Studio 2012 中的 SharePoint 开发工具与 Microsoft SharePoint 2013 结合使用**，您可以通过使用 SharePoint 的远程安装在系统上为 SharePoint 解决方案创建应用程序。您不必在本地系统上安装 SharePoint 2013。此功能称为远程开发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T02:45:49.003

..而且，对于 WSP SharePoint 2013 解决方案，SharePoint 2013 需要 Windows 2008 R2，因此您的开发工作站不能是 Windows 7 ......所以请占用一些内存，安装 2008 虚拟机并重新安装所有内容。不好-希望肯定有更好的方法。

# django - Django 错误表单提交

> ID：15381980
> 
> 赞同：1
> 
> 时间：2013-03-13T09:57:41.780
> 
> 标签：django

我有一个应用程序可以让您创建个人资料。我的应用程序功能之一是它可以让您编辑您的姓名并上传图片。

问题是用户无法提交图像，除非他输入他的姓名。我该如何修复此页面以使其如此如果用户提交图像但未提交名称。如果他没有提交图像并更改了他的名字，他仍将使用他的旧名字。他还会有他的老照片吗？

我尝试添加 blank=True 和 null = False ， null = True 但似乎没有做这项工作

我的模型.py

```
class Person(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=100,null=True,blank=False)
    image = models.FileField(upload_to="images/")

    def __unicode__(self):
        return self.name 
```

我的表格.py

```
 class PersonForm(forms.ModelForm):
    class Meta:
        model = Person
        fields = ('image','name',) 
```

我的观点.py

```
def Display(request):
    if not request.user.is_authenticated():
        return HttpResponseRedirect(reverse('world:LoginRequest'))

    if request.method == 'POST':
        form = PersonForm(request.POST, request.FILES)
        if form.is_valid():
            person = Person.objects.get(user=request.user)
            person.image = form.cleaned_data['image']
            person.name = form.cleaned_data['name']
            person.save() 
    return render(request,'edit.html',{'form': PersonForm()}) 
```

![在此处输入图像描述](../Images/4fb4d17f19bfe7abdcfdecc28bd66ad6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:29:24.567

```
class Person(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=100, blank=True)
    image = models.FileField(upload_to="images/", blank=True)

    def __unicode__(self):
        return self.name

def Display(request):
    if not request.user.is_authenticated():
        return HttpResponseRedirect(reverse('world:LoginRequest'))

    if request.method == 'POST':
        form = PersonForm(request.POST, request.FILES)
        if form.is_valid():
            image = form.cleaned_data['image']
            name = form.cleaned_data['name']

            person = Person.objects.get(user=request.user)

            if image:
                person.image = form.cleaned_data['image']
            if name:
                person.name = form.cleaned_data['name']

            person.save() 
    return render(request,'edit.html',{'form': PersonForm()}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:28:23.930

django forms对用户数据进行验证

验证在两个级别上完成：

1.  现场级别：

    *   如果该字段是必需的并且用户没有输入任何数据，则会引发错误
    *   如果用户为该字段输入了格式不正确的数据，则会引发错误
    *   您可以通过实现名为的函数来覆盖字段验证的行为`clean_fieldname`
    *   这种类型的验证导致`form.field.errors`
2.  表单级别：

    *   检查任何（非特定领域的）验证错误
    *   `clean`您可以通过实现方法来覆盖行为
    *   这种类型的验证导致`form.non_field_errors`

从您的模型中：

图像不允许为空白，这意味着它是必需的。不输入图像会引发错误

让空白=真名称和图像

我还建议使用[form.save()](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#the-save-method)而不是从视图中保存模型

还有一个内置的 ImageField 用于保存图像

# mysql - Mysql 4到5查询转换--join头疼

> ID：15381985
> 
> 赞同：1
> 
> 时间：2013-03-13T09:57:45.173
> 
> 标签：mysql, join, mysql-5.5, mysql4

如果有人可以帮助我重写我的查询以在 mysql 5 中工作，我将非常感激。如果有人可以提供有关如何重写旧查询的可靠简单教程的链接，那也很棒。

我当前的（版本 4）查询如下所示：

```
SELECT
 course.course_code,
 course.course_title_sv AS course_title,
 course.course_u_credits,
 course.course_successive_level_scb_id,
 s.successive_level_scb_order,
 s.successive_level_scb_code,
 LEFT (education_level.edu_level_name_sv, 1) AS course_edu_level, course.course_level, 
 GROUP_CONCAT(DISTINCT h.head_area_hv_title_sv SEPARATOR ', ') AS head_area_hv
FROM
 course, course_event, course_event_package_links, package, education_level
LEFT JOIN
 course_has_head_area_hv ON(course.course_id = course_has_head_area_hv.course_id)
LEFT JOIN
 head_area_hv h ON(h.head_area_hv_id = course_has_head_area_hv.head_area_hv_id)
LEFT JOIN
 successive_level_scb s ON(s.successive_level_scb_id = course.course_successive_level_scb_id)
WHERE
 course.course_edu_level=education_level.edu_level_id AND
 course.course_id=course_event.course_id AND
 course_event.course_event_id=course_event_package_links.course_event_id AND
 course_event_package_links.package_id=package.package_id AND
 course.course_successive_level_scb_id != '' AND
 package.package_id='6318'
GROUP BY course.course_id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:52:08.010

只需更换

```
SELECT ... 
FROM course, course_event, course_event_package_links
...
WHERE course.course_id=course_event.course_id 
AND course_event.course_event_id=course_event_package_links.course_event_id 
```

经过

```
SELECT ...
FROM course
JOIN course_event ON course_event.course_id = course.course_id
JOIN course_event_package_links 
  ON course_event_package_links.course_event_id = course_event.course_event_id
... 
```

关于您的错误消息，您确定`course.course_id`存在吗？也许它被替换了`course.course_code`？

# fonts - IE8 @font-face 在具有正确代码时无法正常工作

> ID：15381994
> 
> 赞同：1
> 
> 时间：2013-03-13T09:57:56.460
> 
> 标签：fonts, internet-explorer-8, font-face, webfonts

我试图让@font-face 为 IE 8 工作，但它不起作用。我已经有了正确的代码。还有什么可能是错的？

```
@font-face {
font-family: "HelveticaNeueCn";
src: url("/font/HelveticaNeueLTCom-Cn.eot");
src: url("/font/HelveticaNeueLTCom-Cn.eot?#iefix") format("embedded-opentype"), 
     url("/font/HelveticaNeueLTCom-Cn.woff") format("woff"), 
     url("/font/HelveticaNeueLTCom-Cn.ttf") format("truetype"), 
     url("/font/HelveticaNeueLTCom-Cn.svg") format("svg");
font-weight: normal;
font-style: normal;
} 
```