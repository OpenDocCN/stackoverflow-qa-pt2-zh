# StackOverflow 问答 13679000-13679999

# json - 使用 Wordpress JSON API 注册/登录用户

> ID：13679001
> 
> 赞同：17
> 
> 时间：2012-12-03T07:37:01.183
> 
> 标签：json, wordpress

我想为一个 wordpress 网站创建移动应用程序。我已经集成了[wordpress json 插件](http://wordpress.org/extend/plugins/json-api/)。我不确定在哪里可以找到用户注册和登录服务。请指教。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2017-08-06T12:08:22.417

1.在您的主题`function.php`文件中粘贴以下代码。

2.确保`WP-REST-API`插件应该安装在wordpress网站上

```
add_action( 'rest_api_init', 'register_api_hooks' );

function register_api_hooks() {
  register_rest_route(
    'custom-plugin', '/login/',
    array(
      'methods'  => 'POST',
      'callback' => 'login',
    )
  );
}

function login($request){
    $creds = array();
    $creds['user_login'] = $request["username"];
    $creds['user_password'] =  $request["password"];
    $creds['remember'] = true;
    $user = wp_signon( $creds, false );

    if ( is_wp_error($user) )
      echo $user->get_error_message();

    return $user;
}

add_action( 'after_setup_theme', 'custom_login' ); 
```

然后您的 API 将被创建为

```
http://www.url.com/wp-json/custom-plugin/login 
```

用 Postman 试试你会得到`200`回应`user info`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-01-20T16:16:39.717

我能够使用**@Salam El-Bannas 的****[链接](http://techattitude.com/tips-tricks-and-hacks/how-to-remotely-create-a-user-on-your-wordpress-website-using-json-api-request/)****弄清楚登录和注册**，以防有人仍然需要这个你去：

你需要两个插件来完成工作：

[WordPress JSON API 插件](https://wordpress.org/plugins/json-api/)

和

[JSON API 用户](https://wordpress.org/plugins/json-api-user/)

1.  **对于用户注册：**您需要**nonce ID**，它将成为 GET url 过程中注册参数的一部分（由插件提供）。阅读@Salam El-Bannas 的[链接](http://techattitude.com/tips-tricks-and-hacks/how-to-remotely-create-a-user-on-your-wordpress-website-using-json-api-request/)以获得更多理解。我在 android 中使用的方法是，页面加载后我立即使用“正在连接...”消息阻止 UI，而在后台获取 nonce ID 一旦其完成 UI Blocking 消失并且 nonce ID 被添加到一个特殊的 non - 为 nonce ID 创建的可编辑 EditText 字段，然后用户输入他/她所需的凭据，我在使用我得到的 nonce ID 连接到服务器之前验证它的有效性。服务器的结果是 JSON，所以我可以使用 volley 和 GSON 在 android 代码中处理其余部分。

2.  对于用户登录：您只需要插件生成的 cookie ID，例如在我的情况下`http://localhost/mylocalhost/my_api_base/user/generate_auth_cookie/?insecure=cool&email=xxx@xdfer.org&password=xxxv678`

结果就是这个json；

`{"status":"ok","cookie":"xxxx|1486130938|Ot6yAX7iU773JnQ2zfE8sdmjt09LhHqDKSYBqtekuha|7fe58a35ab9f260c9bced9148f5cf9ae3ab56c16d7d9ce3b2db7da651d4d937d","cookie_name":"wordpress_logged_in_4132d8131ebbc6760d21627637bd4b20","user":{"id":1,"username":"administrator","nicename":"administrator","email":"xxx@xdfer.org","url":"","registered":"2016-11-02 17:46:19","displayname":"xxxx","firstname":"","lastname":"","nickname":"xxxxwedds","description":"","capabilities":"","avatar":null}}`

那么您必须阅读[这个不错的教程](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)才能在 android 中使用生成的 JSON（如果您是 android 登录新手），否则请自行决定。

一旦您按照我的排队流程进行操作，它真的真的非常简单和有趣。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-11-02T12:21:49.597

要注册用户[，这](http://techattitude.com/tips-tricks-and-hacks/how-to-remotely-create-a-user-on-your-wordpress-website-using-json-api-request/)将向您展示如何通过简单地调用 url 并使用[GET 方法](http://www.w3schools.com/tags/ref_httpmethods.asp)向其添加数据来在数据库中注册用户。现在要从移动应用程序执行此操作，您只需向包含用户所需的所有数据的 url 发出 http 请求。[这](https://stackoverflow.com/questions/3505930/make-an-http-request-with-android)将向您展示如何从 Android 发出请求。

这仅用于注册用户，将使用另一个插件[JSON APi Auth](https://wordpress.org/plugins/json-api-auth/)来登录用户。

这些是基础知识，因为我现在没有太多时间，当我这样做时，我将提供完整的细节和示例。但现在这应该做

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-21T09:23:16.593

与清洁类一起使用

```
// Register REST API endpoints
class Login_REST_API_Endpoints {

    /**
     * Register the routes for the objects of the controller.
     */
    public static function register_endpoints() {
        // endpoints will be registered here
        register_rest_route( 'wp', '/login', array(
            'methods' => 'GET',
            'callback' => array( 'Login_REST_API_Endpoints', 'login' ),
        ) );
    }

    /**
     * @param WP_REST_Request $request Full data about the request.
     * @return WP_Error|WP_REST_Request
     */
    public static function login( $request ) {

        $data = array();
        $data['user_login'] = $request["username"];
        $data['user_password'] =  $request["password"];
        $data['remember'] = true;
        $user = wp_signon( $data, false );

        if ( !is_wp_error($user) )
          return $user;
    }

}
add_action( 'rest_api_init', array( 'Login_REST_API_Endpoints', 'register_endpoints' ) ); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-09-20T20:27:13.807

尝试[WP REST User](https://wordpress.org/plugins/wp-rest-user/)它具有创建用户和重置密码功能

对于登录，如果您需要对用户功能进行高级控制，请使用[AAM](https://wordpress.org/plugins/advanced-access-manager/)

# c# - C# 如何使用 openPGP 密钥简单地加密字符串

> ID：13679007
> 
> 赞同：2
> 
> 时间：2012-12-03T07:37:59.383
> 
> 标签：c#, encryption, bouncycastle, openpgp

我有 OpenPGP `pgpkey`，并且`pgpid`在 C# 中如何使用 Bouncy Castle 库简单地加密字符串？

接收者的公钥（base64 中的 MPI）： `BADelitpUqMZLn+bryZR5rK9J3eu+pRVFP5tpboOlIwO2vqO/rCi8VvT2TPzEJarWhyZ465NIohYCiia9vaGUEp4rsDzFnVNgpON47yPew1zCmOOofituf+X6Qlaxylm5NnO4vnRcmoF4IbGwSCqyGgGor29D75Hovwlj1q6BWHYWwAGKQ==`

公钥的密钥类型：`RSA`

公钥的密钥 ID（8 字节，十六进制）：`02044b001cd7a551`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:19:46.080

这篇博文展示了一个使用 Bouncy Castle 库[的 OpenPGP 加密示例。](http://rafayal.blogspot.fr/2009/06/pgp-encryption-with-c.html)同一作者还写过[解密部分](http://rafayal.blogspot.fr/2009/06/pgp-decryption-with-c.html)。

# iphone - 如何将图像发布到 Web 服务器

> ID：13679009
> 
> 赞同：5
> 
> 时间：2012-12-03T07:38:15.080
> 
> 标签：iphone, objective-c, ios, xcode

我正在使用 json 解析处理 Web 服务。我能够从网络服务中获取图像，有人可以帮助我如何发布图像吗？如何将图像发布到 Web 服务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T07:44:25.283

这将是类似的事情......

```
NSMutableURLRequest *mutableRequest = [[NSMutableURLRequest alloc] initWithURL:@"you url"];

[mutableRequest addValue:@"image/jpeg" forHTTPHeaderField: @"Content-Type"];

NSMutableData *body = [NSMutableData data];

[body appendData:[NSData dataWithData:UIImageJPEGRepresentation(self.image, 0.9)]];

[mutableRequest setHTTPBody:body];

NSURLResponse *response;
NSError *error;

(void) [NSURLConnection sendSynchronousRequest:mutableRequest returningResponse:&response error:&error]; 
```

谢谢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T07:45:35.937

检查下面的好教程。在该教程中，您也可以找到 ios 端代码以及服务器端 php 代码。 [http://zcentric.com/2008/08/29/post-a-uiimage-to-the-web/](http://zcentric.com/2008/08/29/post-a-uiimage-to-the-web/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T09:56:13.063

在此处找到用于使用随机名称上传图像的服务器端 (PHP) 编码。它也会给出图像链接作为响应。

```
//Create a folder named images in your server where you want to upload the image.
// And Create a PHP file and use below code .

<?php
$uploaddir = 'images/';
$ran = rand () ;

$file = basename($_FILES['userfile']['name']);
$uploadfile = $uploaddir .$ran.$file;

if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {
        echo "www.host.com/.../images/{$uploadfile}";
}
?> 
```

这是iOS代码

```
- (IBAction)uploadClicked:(id)sender
{
    /*
         turning the image into a NSData object
         getting the image back out of the UIImageView
         setting the quality to 90
        */
        NSData *imageData = UIImageJPEGRepresentation(imageView.image, 90);
        // setting up the URL to post to
        NSString *urlString = @"your URL link";

        // setting up the request object now
        NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
        [request setURL:[NSURL URLWithString:urlString]];
        [request setHTTPMethod:@"POST"];

        /*
         add some header info now
         we always need a boundary when we post a file
         also we need to set the content type

         You might want to generate a random boundary.. this is just the same 
         as my output from wireshark on a valid html post
        */
        NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
        NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
        [request addValue:contentType forHTTPHeaderField: @"Content-Type"];

        /*
         now lets create the body of the post
        */
        NSMutableData *body = [NSMutableData data];
        [body appendData:[[NSString stringWithFormat:@"rn--%@rn",boundary] dataUsingEncoding:NSUTF8StringEncoding]];    
        [body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name="userfile"; filename="ipodfile.jpg"rn"] dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[[NSString stringWithString:@"Content-Type: application/octet-streamrnrn"] dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[NSData dataWithData:imageData]];
        [body appendData:[[NSString stringWithFormat:@"rn--%@--rn",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
        // setting the body of the post to the reqeust
        [request setHTTPBody:body];

        // now lets make the connection to the web
        NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
        NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

        NSLog(returnString);

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T10:36:50.390

ASIHttpFormData的最佳使用方法[点击这里了解如何使用](http://allseeing-i.com/ASIHTTPRequest/How-to-use)

# hdfs - 无法在flume-ng中创建类型为HDFS的接收器

> ID：13679014
> 
> 赞同：2
> 
> 时间：2012-12-03T07:38:31.667
> 
> 标签：hdfs, flume

我有一个将日志写入 HDFS 的水槽。
我在单个节点中创建了一个代理。
但它没有运行。
有我的配置。

* * *

# example2.conf：单节点 Flume 配置

# 命名这个代理上的组件
agent1.sources = source1
agent1.sinks = sink1 agent1.channels =
channel1

# 描述/配置 source1
agent1.sources.source1.type = avro
agent1.sources.source1.bind = localhost
agent1.sources.source1.port = 41414

# 在内存中使用缓冲事件的通道
agent1.channels.channel1.type = memory
agent1.channels.channel1.capacity = 10000
agent1.channels.channel1.transactionCapacity = 100

# 描述 sink1
agent1.sinks.sink1.type = HDFS
agent1.sinks.sink1.hdfs.path = hdfs://dbkorando.kaist.ac.kr:9000/flume

# 绑定源和汇通道
agent1.sources.source1.channels = channel1 agent1.sinks.sink1.channel =
channel1

* * *

我命令

`flume-ng agent -n agent1 -c conf -C /home/hyahn/hadoop-0.20.2/hadoop-0.20.2-core.jar -f conf/example2.conf -Dflume.root.logger=INFO,console`

结果是

* * *

信息：包括通过 (/home/hyahn/hadoop-0.20.2/bin/hadoop) 找到的用于 HDFS 访问的 Hadoop 库
+ exec /usr/java/jdk1.7.0_02/bin/java -Xmx20m -Dflume.root.logger=信息，控制台 -cp '/etc/flume-ng/conf:/usr/lib/flume-ng/lib/*:/home/hyahn/hadoop-0.20.2/hadoop-0.20.2-core.jar' - Djava.library.path=:/home/hyahn/hadoop-0.20.2/bin/../lib/native/Linux-amd64-64 org.apache.flume.node.Application -n agent1 -f conf/example2。 conf
2012-11-27 15:33:17,250 (main) [INFO - org.apache.flume.lifecycle.LifecycleSupervisor.start(LifecycleSupervisor.java:67)] 启动生命周期主管 1
2012-11-27 15:33:17,253 (main) [INFO - org.apache.flume.node.FlumeNode.start(FlumeNode.java:54)] Flume 节点启动 - agent1
2012-11-27 15:33:17,257 (lifecycleSupervisor-1-1) [INFO - org.apache.flume.conf.file.AbstractFileConfigurationProvider.start(AbstractFileConfigurationProvider.java:67)] 配置提供程序开始于
2012-11-27 15 :33:17,257 (lifecycleSupervisor-1-0) [INFO - org.apache.flume.node.nodemanager.DefaultLogicalNodeManager.start(DefaultLogicalNodeManager.java:203)] 节点管理器开始于
2012-11-27 15:33:17,258 (lifecycleSupervisor -1-0) [INFO - org.apache.flume.lifecycle.LifecycleSupervisor.start(LifecycleSupervisor.java:67)] 启动生命周期主管 9
2012-11-27 15:33:17,258 (conf-file-poller-0) [INFO - org.apache.flume.conf.file.AbstractFileConfigurationProvider$FileWatcherRunnable.run(AbstractFileConfigurationProvider.java:195)] 重新加载配置文件：conf/example2.conf
2012-11-27 15:33:17,266 (conf-file-poller-0) [INFO - org.apache.flume.conf.FlumeConfiguration$AgentConfiguration.addProperty(FlumeConfiguration.java:988)] 处理：sink1
2012-11- 27 15:33:17,266 (conf-file-poller-0) [INFO - org.apache.flume.conf.FlumeConfiguration$AgentConfiguration.addProperty(FlumeConfiguration.java:988)] 处理：sink1
2012-11-27 15:33 :17,267 (conf-file-poller-0) [INFO - org.apache.flume.conf.FlumeConfiguration$AgentConfiguration.addProperty(FlumeConfiguration.java:988)] 处理:sink1
2012-11-27 15:33:17,268 (conf -file-poller-0) [INFO - org.apache.flume.conf.FlumeConfiguration$AgentConfiguration.addProperty(FlumeConfiguration.java:902)] 添加了接收器：sink1 代理：agent1
2012-11-27 15:33:17,290 (conf-file-poller-0) [INFO - org.apache.flume.conf.FlumeConfiguration.validateConfiguration(FlumeConfiguration.java:122)] 验证后水槽配置包含代理的配置: [agent1]
2012-11-27 15:33:17,290 (conf-file-poller-0) [INFO - org.apache.flume.conf.properties.PropertiesFileConfigurationProvider.loadChannels(PropertiesFileConfigurationProvider.java:249)] 创建通道
2012 -11-27 15:33:17,354 (conf-file-poller-0) [INFO - org.apache.flume.instrumentation.MonitoredCounterGroup.(MonitoredCounterGroup.java:68)] 监控的计数器组类型：CHANNEL，名称：channel1 ， 注册成功。
2012-11-27 15:33:17,355 (conf-file-poller-0) [INFO - org.apache.flume.conf.properties.PropertiesFileConfigurationProvider.loadChannels(PropertiesFileConfigurationProvider.java:273)] 创建通道 channel1
2012-11- 27 15:33:17,368 (conf-file-poller-0) [INFO - org.apache.flume.instrumentation.MonitoredCounterGroup.(MonitoredCounterGroup.java:68)] 监控的计数器组类型：SOURCE，名称：source1，注册成功.
2012-11-27 15:33:17,378 (conf-file-poller-0) [INFO - org.apache.flume.sink.DefaultSinkFactory.create(DefaultSinkFactory.java:70)] 创建 sink 实例： sink1，输入：高密度文件系统

* * *

如上，出现了flume-ng在sink生成部分停止的问题。问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T08:33:29.620

您需要打开另一个窗口并在端口发送 avro 命令`41414`：

```
bin/flume-ng avro-client --conf conf -H localhost -p 41414 -F /home/hadoop1/aaa.txt -Dflume.root.logger=DEBUG,console 
```

这里我有一个名为目录`aaa.txt`的文件`/home/hadoop1/`

您的水槽将读取此文件并发送到 hdfs。

# android - 自定义 ExpandableListView 时默认箭头继续出现

> ID：13679016
> 
> 赞同：2
> 
> 时间：2012-12-03T07:38:58.297
> 
> 标签：android, android-layout

我已经完全自定义了`ExpandableListView`，但默认组指示符（箭头）仍然出现。这是我的截图：

![倒塌](../Images/45445f6edfab02c13aef6a5d61e17ce8.png) ![展开](../Images/78d22053f4ffed3b6c310cf43d1489bb.png)

任何想法如何删除这个箭头？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T07:47:52.787

```
setGroupIndicator(null); 
```

应该有帮助

# c# - 如何在 WPF c# 中禁用 webbrowser 安全警告

> ID：13679021
> 
> 赞同：3
> 
> 时间：2012-12-03T07:39:49.917
> 
> 标签：c#, wpf, security, wpf-controls, browser

我正在使用 VS 2010 (C#) 在我的 WPF 应用程序中使用 webbrowser 控件。我在我的网络浏览器中显示一个带有 js 文件的本地 html。并显示安全警告。那么任何人都可以建议我如何禁用此安全警告。![在此处输入图像描述](../Images/471267a6d6d0d9564e5fe9a6628471a6.png)

添加以下行后：

```
"<!-- saved from url=(0016)http://localhost -->" 
```

它显示以下错误： ![在此处输入图像描述](../Images/c57bbf6ee655c0fc3f5fa78bf8b04b63.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T07:53:44.153

您需要将[Web 标记](http://msdn.microsoft.com/en-us/library/ms537628%28v=VS.85%29.aspx)添加到本地 HTML。在 HTML 文件的最开头添加以下内容：

```
 <!-- saved from url=(0016)http://localhost --> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-23T01:40:25.607

另一个答案中的本地主机和代码 16 对我不起作用；但是我认为必须有一个更新的解决方案，因为在为我工作之前，HTML 第一行的以下版本。这是 VS 2013 供参考。

```
<!-- saved from url=(0014)about:internet --> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-17T05:17:45.540

我尝试使用系统路径加载 html 文件，但网络标记还不够。所以除了

```
<!-- saved from url=(0014)about:internet --> 
```

作为 html 文件的第一行，我还必须将 html 文件 (C:\somedir\somefile.html) 的路径转换为

```
file://127.0.0.1/c$/somedir/somefile.html 
```

代码示例：

```
string somePath = @"C:\somedir\somefile.html".Replace(@"C:\", "file://127.0.0.1/c$/"); 
```

# objective-c - NSJSON 序列化

> ID：13679024
> 
> 赞同：3
> 
> 时间：2012-12-03T07:40:10.697
> 
> 标签：objective-c, json, nsjsonserialization

我是新手`NSJSONSerialization`。这是我的浏览器输出：

```
{
  "appointment": [
    {
      "w1": "Mallya Hospital",
      "w2": "Nagarjuna Hospital",
      "w3": "Mallige     Hospital",
      "w4": "Mallya Hospital",
      "t1": [
        "08:00 - 08:25",
        "08:25 - 08:50",
        "08:50 - 09:15",
        "09:15 - 09:40"
      ],
      "t2": [
        "14:00 - 14:05",
        "14:05 - 14:10",
        "14:10 - 14:15",
        "14:15 - 14:20",
        "14:20 - 14:25",
        "14:25 - 14:30",
        "14:30 - 14:35",
        "14:35 - 14:40",
        "14:40 - 14:45",
        "14:45 - 14:50",
        "14:50 - 14:55",
        "14:55 - 15:00",
        "15:00 - 15:05",
        "15:05 - 15:10",
        "15:10 - 15:15",
        "15:15 - 15:20",
        "15:20 - 15:25",
        "15:25 - 15:30",
        "15:30 - 15:35",
        "15:35 - 15:40",
        "15:40 - 15:45",
        "15:45 - 15:50",
        "15:50 - 15:55"
      ],
      "t3": [
        "14:00 - 14:35",
        "14:35 - 15:10",
        "15:10 - 15:45"
      ],
      "t4": [
        "16:30 - 17:15",
        "17:15 - 18:00"
      ],
      "tp1": "25",
      "tp2": "5",
      "tp3": "35",
      "tp4": "45",
      "ts1": "8:00 - 10:00",
      "ts2": "14:00 - 16:00",
      "ts3": "14:00 - 16:00",
      "ts4": "16:30 - 18:30",
      "offdays": "4-6"
    }
  ]
} 
```

我需要将时间传递给标签，将医院名称传递给另一个。我怎样才能`NSJSONSerialization`得到上面给出的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:55:18.487

首先，您必须将字符串/文件转换为可以反序列化的数据

```
NSData *data = [stringData dataUsingEncoding:NSUTF8StringEncoding]; 
```

为了可视化您的数据在 JSON 对象中的组织方式，[快速美化](http://jsonformatter.curiousconcept.com/)器将显示您的数据遵循结构 Dictionary->Array (1 element)->Dictionaries->Arrays/Values

例如，要专门访问时间：

```
NSDictionary *jsonObject = [NSJSONSerialization JSONObjectWithData:data options: NSJSONReadingMutableContainers error: &e]; //Options can be simply 0

NSArray *t1 = jsonObject[@"appointment"][0][@"t1"]; 
```

# java - 在数组上查找集合的索引

> ID：13679025
> 
> 赞同：0
> 
> 时间：2012-12-03T07:40:10.680
> 
> 标签：java

我有以下循环

```
 for (Annotation currAnnotation : annotation.getAnnotations())
    {
        List<Map<String, String>> list = annotation.getList();
list.get(index) 
```

索引应该是循环的索引，我该如何实现？我需要从列表中获取特定条目。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T07:41:58.083

您可以使用计数器：

```
int index = 0;
for (Annotation currAnnotation : annotation.getAnnotations())
{
    List<Map<String, String>> list = annotation.getList();
    ... list.get(index) ...
    index++;
} 
```

# regex - 在 PL/SQL 中获取字符串的最后一个数字部分

> ID：13679029
> 
> 赞同：0
> 
> 时间：2012-12-03T07:40:36.517
> 
> 标签：regex, oracle, plsql

在 PL/SQL 中，有没有办法从另一个序列号（如“A1B0010C”）计算下一个序列号。下一个序列号将是 A1B0011C (+1)。我的想法是检索数字部分，增加它得到返回字符串。我可以在 java 中做到这一点，但是将超过 1000 个元素传递给 Oracle 会导致 IN 子句出现问题。所以请帮助，任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:20:47.997

尝试编写一些这样的递归函数

此函数返回下一个字符。例如：C 之后的 D。Z 之后的 0。

```
create or replace function get_next_character(ch char)
return char
is
result_ch char(1) := ch;
begin

IF UPPER(ch) = 'Z' or ch = '9' THEN
  result_ch := 'A';
ELSE
  result_ch := chr(ascii(ch) + 1);
END IF;

return upper(result_ch);
end get_next_character; 
```

这是您返回下一个序列号的实际函数因此，如果您的输入是“ **A1B0010C ”，它会生成“** **A1B0010D** ”

 **```
create or replace function get_next_serial(p_serial IN varchar2)  -- PASS THE REQUIRED ARGUMENTS
    return varchar2
    IS
    v_ret_serial varchar2(100);
    v_in_serial varchar2(100) := p_serial;
    tmp varchar2(100);
    last_char char(1);
    begin

    tmp := v_in_serial;

    for i in reverse 1..length(v_in_serial) loop

      last_char := substr(tmp, length(tmp));
      last_char := get_next_character(last_char);

      tmp := substr(v_in_serial, 1, length(tmp)-1);
      v_in_serial := substr(v_in_serial, 1, i-1) || last_char || substr(v_in_serial, i+1);

      IF last_char <> 'A' then
        exit;
      END IF;
    end loop;

    IF last_char = 'A' THEN
      v_in_serial:= 'A'||v_in_serial;
    END IF;
    return UPPER(v_in_serial);

    exception
    when NO_DATA_FOUND then
      return 'AA';
    when others then
      return null;
    end get_next_serial; 
```

你可以在任何你想要的地方调用这个函数 (get_next_serial('abc'))；

```
select get_next_serial('ALK0989KJ') from dual 
```

您可以将这两个功能放在一个包中，并在您方便的时候使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T08:19:59.377

您可以通过使用以下`Regexp_*`功能组合来实现它：

```
SQL> with t1 as(
  2    select 'A1B0010C' col from dual
  3  )
  4  select regexp_replace(col, '[[:digit:]]+'
  5                       , to_char(to_number(regexp_substr(col, '[[:digit:]]+',1,2) + 1), 'fm0000')
  6                       , 1
  7                       , 2
  8                       ) as Res
  9    from t1
 10  ;

RES
------------
A1B0011C 
```

**更新**回应评论。

```
SQL> with t1 as(
  2        select 'A1B0010C'     col from dual union all
  3        select 'A1B0010C2'    col from dual union all
  4        select 'A1B0012C001'  col from dual union all
  5        select 'S000001'      col from dual
  6      )
  7  select col
  8       , regexp_replace(col
  9                       , '([[:digit:]]+)([[:alpha:]]+$|$)'
 10                       ,  LPad(to_char(to_number(num) + 1), length(num), '0') || '\2'
 11                       ) as Res
 12    from (select col
 13               , regexp_substr(col, '([[:digit:]]+)([[:alpha:]]+$|$)', 1, 1, 'i', 1) as num
 14             from t1
 15            )
 16  ;

COL            RES
-----------    -----------------
A1B0010C       A1B0011C
A1B0010C2      A1B0010C3
A1B0012C001    A1B0012C002
S000001        S000002 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T08:33:59.033

```
create or replace function nextSerial(s in varchar2) return varchar2 as
  i integer;
  done boolean := false;
  c char;
  newserial varchar2(4000);
begin
  newserial := s;

  i := length(newserial);
  while i>0 and not done loop
    c := substr(newserial, i, 1);
    if c='9' then
      newserial := substr(newserial, 1, i-1) || '0' || substr(newserial, i+1);
    elsif c>='0' and c<='8' then
      c := chr(ascii(c)+1);
      newserial := substr(newserial, 1, i-1) || c || substr(newserial, i+1);
      done := true;
    end if;
    i := i-1;
  end loop;

  if not done then
    newserial := '1' || newserial;
  end if;

  return newserial;
end; 
```**

# eclipse - http 404 报错 tomcat eclipse

> ID：13679030
> 
> 赞同：0
> 
> 时间：2012-12-03T07:40:41.793
> 
> 标签：eclipse, tomcat, http-status-code-404

我对网络应用程序真的很陌生，这是我第一次使用 tomcat。尝试运行 index.jsp 时，我不断收到此消息。

![截屏](../Images/69d425aee75378a9fe6b504685f56fea.png)

我正在使用 eclipse indigo 和 tomcat 6.0（本地主机上的 Tomcat v6.0 服务器已经启动并同步）。我已经将 ROOT 文件夹复制到 wtpwebapp，签`<Connector port="8080" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="8443" />`入 server.xml 文件，但似乎没有任何效果。

这是服务器配置： ![在此处输入图像描述](../Images/5552e044deb09574540a472588910749.png)

我刚刚开始使用 index.jsp：

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"                                 "http://www.w3.org/TR/html4/loose.dtd">
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Insert title here</title>
    </head>
    <body>
    Hello World!
    </body>
    </html> 
```

这是我的 web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
    <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
      <display-name>ChatBot</display-name>
      <welcome-file-list>
        <welcome-file>index.html</welcome-file>
        <welcome-file>index.htm</welcome-file>
        <welcome-file>index.jsp</welcome-file>
        <welcome-file>default.html</welcome-file>
        <welcome-file>default.htm</welcome-file>
        <welcome-file>default.jsp</welcome-file>
      </welcome-file-list>
    </web-app> 
```

我想知道怎么了...在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:06:34.607

首先我想知道ru使用的是哪个框架。如果您正在使用 struts 2，请尝试用此代码替换您在 web.xml 中的代码...

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee   http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<display-name>Struts2</display-name>

 <filter>
    <filter-name>struts2</filter-name>
    <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>*.action</url-pattern>
</filter-mapping>

<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>

</web-app> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-16T22:45:34.110

以下对我有用：尝试拖动`index.jsp`到`WebContent`目录。然后，右键单击`index.jsp`并单击“在服务器上运行”。

# android - 制作一个看起来像按钮的形状

> ID：13679037
> 
> 赞同：0
> 
> 时间：2012-12-03T07:41:29.390
> 
> 标签：android, android-button, android-drawable

我确实有一组按钮，我正在使用选择器形状对其进行自定义。这是我到目前为止的代码和图像：

CODE-bgbtn.xml

```
 <item android:state_pressed="true" >
    <shape>
    <solid
      android:color="#004dfd" />
    <stroke
       android:width="1dp"
       android:color="#2f3436" />
    <corners
       android:radius="0dp" />
    <padding
       android:left="10dp"
       android:top="10dp"
       android:right="10dp"
       android:bottom="10dp" />
    </shape>
</item>
<item>
    <shape>
        <gradient
            android:startColor="#425262"
            android:endColor="#51677d"
            android:angle="45" />
        <stroke
            android:width="1dp"
            android:color="#2f3436" />
        <corners
            android:radius="0dp" />
        <padding
            android:left="10dp"
            android:top="10dp"
            android:right="10dp"
            android:bottom="10dp" />
    </shape>
</item> 
```

结果：

![在此处输入图像描述](../Images/b032f6bb418541ded03d3633fd1091af.png)

我只为第一个按钮应用了样式，你可以看到它看起来太平了。如何让它看起来更像一个按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-01T22:44:58.403

尝试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_enabled="true"
            android:state_pressed="true">
        <shape android:padding="10dp" android:shape="rectangle">
            <gradient android:startColor="@color/yourColor" android:endColor="@color/yourColor" android:angle="90"/>
            <stroke android:width="2dp" android:color="#3E4976" />
            <corners android:bottomLeftRadius="15dp" android:bottomRightRadius="15dp" android:topLeftRadius="15dp" android:topRightRadius="15dp" />
        </shape>
    </item>
    <item android:state_enabled="true" android:state_focused="true">
        <shape android:padding="10dp" android:shape="rectangle">
            <gradient android:startColor="@color/yourColor" android:endColor="@color/yourColor" android:angle="90"/>
            <corners android:bottomLeftRadius="15dp" android:bottomRightRadius="15dp" android:topLeftRadius="15dp" android:topRightRadius="15dp" />
        </shape>
    </item>
    <item android:state_enabled="true">
        <shape android:padding="10dp"
            android:shape="rectangle">
            <gradient android:startColor="@color/yourColor" android:endColor="@color/yourColor" android:angle="90"/>
            <corners android:bottomLeftRadius="15dp" android:bottomRightRadius="15dp" android:topLeftRadius="15dp" android:topRightRadius="15dp" />
        </shape>
    </item>
</selector> 
```

然后为按钮设置背景

```
android:background="@drawable/custom_button" 
```

# java - android文件选择器不起作用

> ID：13679040
> 
> 赞同：1
> 
> 时间：2012-12-03T07:41:47.660
> 
> 标签：java, android

我正在编写一个`Android`文件选择器程序，在添加详细信息时`ListView`，流程无法完美运行。在文件中`Uploadlist.java`，我将目录路径发送到另一个`filedetails`扩展的类`ArrayAdapter`。但是代码流没有进入方法`getView()`。有人能说出原因并说出为什么代码无法进入`getView()`. 我使用了下面的代码。

**上传列表.Java**

```
public class UploadList extends ListActivity {
private List<String> item=null;
private List<String> path=null;
private String root;
private TextView mypath;
String pathname,filename;
ImageView image;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mypath=(TextView)findViewById(R.id.path);
        image=(ImageView)findViewById(R.id.imageView1);
        root=Environment.getExternalStorageDirectory().getPath();
        filedetails details=new filedetails(this, root);
        setListAdapter(details);
    }
    /**
     * @param dirPath
     */
    public void getDir(String dirPath){
        mypath.setText("Location is:"+dirPath);
         pathname=dirPath;
         filedetails details=new filedetails(this, dirPath);
         setListAdapter(details);
    }
    protected void onListItemClick(ListView l,View v,int position,long id){
        File file=new File(path.get(position));
        if(file.isDirectory()){
            if(file.canRead())
                getDir(path.get(position));
        }

        else
        {
            filename=file.getName();
            pathname=pathname+"/"+filename;
            Intent back=new Intent(this,Upload.class);
            Bundle filen=new Bundle();
            filen.putString("filepath",pathname);
              back.putExtras(filen);
            startActivity(back);
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_upload_list, menu);
        return true;
    }

} 
```

**文件详细信息.java**

```
public class filedetails extends ArrayAdapter<String> {
Context context;
File[]values;
String dirPath;
String root=Environment.getExternalStorageDirectory().getPath();
String filename;
private List<String> item;
private List<String> path;
    public filedetails(Context context,String dirPath)
    {
        super(context,R.layout.row1);
        this.context=context;
        this.dirPath=dirPath;
    }

    static class ViewHolder {
        public TextView text;
        public ImageView image;
      }

    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.row1, parent, false);
        ViewHolder viewholder=new ViewHolder();
        viewholder.text=(TextView)rowView.findViewById(R.id.textView1);
        viewholder.image=(ImageView)rowView.findViewById(R.id.imageView1);
        rowView.setTag(viewholder);
        item=new ArrayList<String>();
        path=new ArrayList<String>();
        File file=new File(dirPath);
        File[]filelist=file.listFiles();
        ViewHolder holder=(ViewHolder)rowView.getTag();
        if(!dirPath.equals(root)){
            item.add(root);
            path.add(root);
            item.add("../");
            path.add(file.getParent());
        }
            for(int i=0;i<filelist.length;i++){
                File file1=values[i];
                if(file1.canRead())
                {
                        if(file1.isDirectory()){
                        holder.image.setImageResource(R.drawable.folder);
                        holder.text.setText(file1.getName());

                    }
                }
                    else{
                        holder.image.setImageResource(R.drawable.file);
                        holder.text.setText(file1.getName());

                    }
                }

            return rowView;

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:08:46.573

改变

```
File[]values; 
```

到

```
//File[]values; 
```

然后改变

```
File file1=values[i]; 
```

到

```
File file1=filelist[i]; 
```

# java - 在单链表中添加节点

> ID：13679047
> 
> 赞同：0
> 
> 时间：2012-12-03T07:42:34.567
> 
> 标签：java, algorithm

晚上好

我正在尝试自己实现一个链接列表，当我想创建搜索方法时遇到了问题。显然，当您要搜索节点（将用于在某个位置插入节点）时，您将必须评估一些值以查看您是否到达了正确的位置。考虑到我的节点只有一个数据字段作为标识符，除了使用它之外，我没有看到任何其他方法。但是，由于数据字段不是唯一的，因此可能有多个节点符合条件。

考虑以下列表：5, 7, 2, 8, 3, 1, 6, 5, 8, 4, 2。当我想在列表中的某处添加节点时（例如：在值为 8 的节点之后），他将遍历列表并在第一次出现“8”之后添加新节点。如果我想在第 2 个 8 之后插入它应该怎么做？

这甚至可以通过单链表实现吗？

除此之外，我想对我的“removeLast()”方法有一些反馈，它似乎没有做我想做的事情（从列表中删除最后一个节点）。我知道如果列表只有 1 个值，我的代码不应该工作，我会在删除最后一个节点的一般代码工作后立即调查。

我的代码可以在[这里](https://github.com/Vannevelj/Exercises/tree/master/Exercises/src)找到。

用代码编辑：

```
 public class SingleLinkedList {

 public void deleteLast() {
    if (lastNode != null) {
        Node currentNode = firstNode;

        while (currentNode != null) {
            Node nextNode = currentNode.getNextNode();
            Node nextNextNode = nextNode.getNextNode();

            if (nextNextNode == null) {
                nextNextNode = null;
                lastNode = nextNode;
            }
        }
        listSize--;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T08:05:20.890

当然可以 - 您需要跟踪您通过的对象的数量，并且在您通过`n`的对象等于寻找的对象之后 - 插入新数据：

```
public void addAfterNth(Object data,Object o, int n) { 
    Node curr = firstNode;
    while (curr != null) { 
        if (curr.data.equals(o)) n--;
        if (n == 0) { 
            Node newNode = new Node(data,curr.nextNode);
            curr.setNext(newNode);
            break;
        }
        curr = curr.getNextNode();
    }
} 
```

在这里，您在遇到数据等于 的节点`data`后插入一个新节点，该节点的数据在参数中表示。`n``o`

运行：

```
SingleLinkedList list = new SingleLinkedList();
list.addLast(5);
list.addLast(7);
list.addLast(2);
list.addLast(8);
list.addLast(3);
list.addLast(1);
list.addLast(6);
list.addLast(5);
list.addLast(8);
list.addLast(4);
list.addLast(2);
list.drawList();
list.addAfterNth(999,8, 2);
System.out.println("");
list.drawList(); 
```

产量（如预期）：

```
5, 7, 2, 8, 3, 1, 6, 5, 8, 4, 2, 
5, 7, 2, 8, 3, 1, 6, 5, 8, 999, 4, 2, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T08:53:15.187

这是删除LL的最后一个代码的伪代码。以上答案正确回答了您在特定位置插入的问题。

```
if (START == NULL){
    Print: Linked-List is empty.
}
else{
    PTR = START, PREV = START
    while (PTR->LINK != NULL)enter code here
        PREV = PTR //Assign PTR to PREV
    PTR = PTR->LINK //Move PTR to next node

    ITEM = PTR->INFO //Assign INFO of last node to ITEM
    If (START->LINK == NULL) Then //If only one node is left
        START = NULL //Assign NULL to START
    Else
        PREV->LINK = NULL //Assign NULL to link field of second last node

    Delete PTR
} 
```

# android - 如何在android sqlite中检索2个日期之间的数据

> ID：13679051
> 
> 赞同：3
> 
> 时间：2012-12-03T07:43:00.623
> 
> 标签：android, sqlite, android-sqlite

你好朋友我想检索 2 个日期之间的数据。我使用 sql between 子句，当两个日期都是 2 位或单个日期时它工作正常。
**例如：**

`SELECT * FROM EXPENSE WHERE EXP_DATE BETWEEN '20-12-2012' AND '21-12-2012'`

此查询工作正常，但如果我使用日期，因为`'9-12-2012' AND '20-12-2012'`它不起作用..`returns null`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:47:45.273

试试这个查询。这个对我有用。

```
db.query(EXPENSE_TABLE_NAME, new String[]{"*"},
                        "(EXP_DATE  >= ? and EXP_DATE <= ? )" , new String[] {startDate,endDate}, " strftime(" + "\"%d" + "-" + "%m" + "-" + "%Y\""  + ",EXP_DATE) ",null ,null); 
```

# video - 我可以将 webkit 页面渲染为高清视频吗？

> ID：13679058
> 
> 赞同：2
> 
> 时间：2012-12-03T07:43:38.473
> 
> 标签：video, webkit, impress.js, prezi

首先，我想知道是否可以从 prezi 幻灯片或类似 impress.js 的东西中制作出好的高清视频。

我见过有人试图从他们的浏览器页面制作截屏视频，但质量通常不是最佳的。（动作经常不流畅）

那么，是否可以将带有动画的 html 页面渲染到视频中？（也许使用 webkit 引擎？）

*   没有交互，只播放普通的 jquery 动画（可能会减慢 webkit 引擎的速度，以便能够将页面渲染到某个视频文件）
*   与交互记录页面上的所有动画

**更新：** 使用 Jan Dvorak 的提示我尝试了这个：

```
<a href="javascript:(function(){
   var factor = 10; 
   function slower(x){
      return function(){
        return x.apply(this,arguments)/factor;
      }
    }
function longer(x){
      return function(f, time){
        time = time * factor;
        return x.apply(this,arguments);
    }
  }
  Date.prototype.getTime = slower(Date.prototype.getTime);
  Date.now = slower(Date.now);
  setTimeout = longer(setTimeout);
  setInterval = longer(setInterval);
  alert('Warning, jQuery slowed down'); 
 })();">Test bookmarklet!</a> 
```

但这似乎对此页面没有任何影响，例如：[http ://bartaz.github.com/impress.js/#/bored](http://bartaz.github.com/impress.js/#/bored)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:43:03.673

减慢页面时间后，您可以使用任何以全分辨率捕获的记录工具，然后以相同的因素加快捕获速度。

jQuery 使用它`Date#getTime`来计时它的动画。页面脚本本身可能会使用其他方法进行计时。尝试将此脚本添加到您正在捕获的页面（在 Chrome 中测试）：

```
(function(){
  var factor = 10; //or choose your own. Higher slowdown = smoother capture.

  function slower(x){
    return function(){
      return x.apply(this,arguments) / factor;
    }
  }

  function longer(x){
    return function(f, time){
      time = time * factor;
      return x.apply(this,arguments);
    }
  }

  Date.prototype.getTime = slower(Date.prototype.getTime);
  Date.now = slower(Date.now);
  setTimeout = longer(setTimeout);
  setInterval = longer(setInterval);
})() 
```

演示：http: [//jsfiddle.net/DPhSv/2/](http://jsfiddle.net/DPhSv/2/)

请注意，这假定页面使用 Javascript 制作动画，并且不会减慢 CSS3 动画的速度。

# python - python打开大日志文件

> ID：13679063
> 
> 赞同：3
> 
> 时间：2012-12-03T07:44:07.647
> 
> 标签：python

我使用 python 打开大型日志文件，例如

```
Thu Oct  4 23:14:40 2012 [pid 16901] CONNECT: Client "66.249.74.228"
Thu Oct  4 23:14:40 2012 [pid 16900] [ftp] OK LOGIN: Client "66.249.74.228", anon     password "googlebot@google.com"
Thu Oct  4 23:17:42 2012 [pid 16902] [ftp] FAIL DOWNLOAD: Client "66.249.74.228",   "/pub/10.5524/100001_101000/100039/Assembly-2011/Pa9a_assembly_config4.scafSeq.gz",  14811136 bytes, 79.99Kbyte/sec
Fri Oct  5 00:04:13 2012 [pid 25809] CONNECT: Client "66.249.74.228"
Fri Oct  5 00:04:14 2012 [pid 25808] [ftp] OK LOGIN: Client "66.249.74.228", anon password "googlebot@google.com"
Fri Oct  5 00:07:16 2012 [pid 25810] [ftp] FAIL DOWNLOAD: Client "66.249.74.228", "/pub/10.5524/100001_101000/100027/Raw_data/PHOlcpDABDWABPE/090715_I80_FC427DJAAXX_L8_PHOlcpDABDWABPE_1.fq.gz", 14811136 bytes, 79.99Kbyte/sec
Fri Oct  5 00:13:19 2012 [pid 27354] CONNECT: Client "1.202.186.53"
Fri Oct  5 00:13:19 2012 [pid 27353] [ftp] OK LOGIN: Client "1.202.186.53", anon password "mozilla@example.com" 
```

我想从文件末尾读取行，例如 tail 命令，以获取最近 7 天的记录。

这是我的代码，我该如何更改它。

```
import time
f= open("/opt/CLiMB/Storage1/log/vsftp.log")
def OnlyRecent(line):
   if  time.strptime(line.split("[")[0].strip(),"%a %b %d %H:%M:%S %Y")>     time.gmtime(time.time()-(60*60*24*7)): 
    return True
return False
filename= time.strftime('%Y%m%d')+'.log'
f1= open(filename,'w')
for line in f:
 if OnlyRecent(line):
        print line
        f1.write(line)
f.close()
f1.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T08:18:45.147

使用[*file.seek()*](http://docs.python.org/2.7/library/stdtypes.html#file.seek)跳转到文件末尾的某个偏移量。例如，要在不读取文件开头的情况下打印文件的最后 1Kb，请执行以下操作：

```
with open("/opt/CLiMB/Storage1/log/vsftp.log") as f:
     f.seek(-1000, os.SEEK_END)
     print f.read() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:19:19.447

我没有检查这个，只是重新格式化代码：

1.  从时间模块导入不那么冗长
2.  `dropwhile`而不是`for`..`if`
3.  `with`打开/关闭文件的上下文
4.  PEP8
5.  杂项

-

```
from time import time, gmtime, strptime
from itertools import dropwhile

deadline = gmtime(time()-(60*60*24*7))
formatting = "%a %b %d %H:%M:%S %Y"

def not_recent(line):
    return strptime(line.split("[")[0].strip(), formatting) <= deadline

with open("/opt/CLiMB/Storage1/log/vsftp.log") as f:
    filename = time.strftime('%Y%m%d')+'.log'
    with open(filename,'w') as f1:
        for line in dropwhile(not_recent, f):
            print line
            f1.write(line) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T08:20:08.557

另一种实现，考虑到您正在处理巨大的日志文件

```
def tail(fname, n):
    fin = os.open(fname,os.O_RDONLY ) #Get an open file desc
    size = os.fstat(fin).st_size #Get the size from the stat
    fin = os.fdopen(fin) #Convert fd to file obj
    count = 0
    fin.seek(size) #Seek to the end of the file
    try:
        while count < n: #Loop until the count of newlines exceed the tail size
            pos = fin.tell() - 2 #Step backward
            if pos == -1: #Until you are past the begining
                raise StopIteration #When you end the Loop
            fin.seek(pos)
            if fin.read(1) == '\n': #And check if the next character is a new line
                count += 1 #Maintaining the count
    except StopIteration:
        pass

    return fin 
```

用法

```
for e in tail("Test.log",10):
    print e 
```

# android - 在 ExpandableListView 中的组项之间添加间隙

> ID：13679064
> 
> 赞同：2
> 
> 时间：2012-12-03T07:44:13.207
> 
> 标签：android, android-layout

如何在组项目之间添加间隙（比如说 20dp）`ExpandableListView`？我有`RelativeLayout`作为父母的自定义组布局。向父级添加边距无济于事。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T08:13:56.940

不知道你的目标是什么，但这是一个想法

将您在主要活动中获得的列表传递给您的自定义列表

```
MyExpandableListAdapter myAdapter = new MyExpandableListAdapter(expandableList); 
```

在您的自定义列表类方法中：

```
private ExpandableListView exp;

public MyExpandableListAdapter(ExpandableListView exp)
{
    this.exp = exp;
}

public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent)
{

    if (convertView == null)
    {
        LayoutInflater infalInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = infalInflater.inflate(R.layout.list_child, null);
    }

    exp.setDividerHeight(0);

    return convertView;

}

public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent)
{

    if (convertView == null)
    {
        LayoutInflater infalInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = infalInflater.inflate(R.layout.list_row, null);
    }

    exp.setDividerHeight(20);

    return convertView;
} 
```

例如，这应该在组之间而不是子组之间添加间距

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-26T06:09:37.957

对于未来，在 xml 布局中，您可以添加`android:dividerHeight"`到您的`ExpandableListView`，也可以调整分隔线颜色：

```
 <ExpandableListView
        android:id="@+id/expandableListView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:divider="@color/red"
        android:dividerHeight="5dp"
        android:indicatorLeft="? 
        android:attr/expandableListPreferredItemIndicatorLeft"
        /> 
```

# magento - 需要在magento中显示未找到的目录图像而不是占位符

> ID：13679066
> 
> 赞同：2
> 
> 时间：2012-12-03T07:44:32.730
> 
> 标签：magento, placeholder

我陷入了一个问题。我正在使用另一台服务器进行图像上传。让我先详细说明一下这个问题。

当我从媒体文件夹中手动删除图像时，现在会显示占位符图像。

最初

> 目录/产品/缓存/1/image/9df78eab33525d08d6e5fb8d27136e95/c/o/controlbar-white-small.jpg

手动删除图像后

> 目录/产品/缓存/1/image/9df78eab33525d08d6e5fb8d27136e95/images/catalog/product/placeholder/image.jpg

我的要求是我的商店仍应获取与删除前相同的图像 URL，因为数据库中的图像路径仍然存在。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:51:38.223

我已经解决了我的问题。我说的是解决方案。

转到 OnePica_ImageCDN-1.0.9\OnePica\ImageCdn\Model\Adapter\Amazons3.php

替换这个

公共函数 getUrl($filename)

{

```
 $type = Mage::app()->getStore()->isCurrentlySecure() ? 'url_base_secure' : 'url_base';

    $base_url = Mage::getStoreConfig('imagecdn/amazons3/' . $type);

    $filename = $base_url . $this->getRelative($filename);

    return str_replace('\\', '/', $filename);

} 
```

经过

公共函数 getUrl($filename)

{

```
 $type = Mage::app()->getStore()->isCurrentlySecure() ? 'url_base_secure' : 'url_base';

 $base_url = Mage::getStoreConfig('imagecdn/amazons3/' . $type);

    $product = Mage::registry('current_product');

    $productId = $product->getId();

    $resource = Mage::getSingleton('core/resource')->getConnection('core_write');

    $imageName = $resource->fetchOne("select value from catalog_product_entity_varchar where attribute_id=86 && entity_id = ".$productId);

    $filename = $base_url . $this->getRelative($filename);

    $filename = substr($filename, 0, -22);

    $filename = $filename.$imageName;

    return str_replace('\\', '/', $filename);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:02:33.103

这是一个核心 magento 行为，因此没有图像的产品将显示占位符而不是损坏的图像，因此除非您对 app/code/core/Mage/Catalog/Model/Product/Image 中的核心图像/助手进行大量更改.php 唯一的另一种方法是更改​​占位符。

您是否考虑过仅更改占位符图像？

在管理员中，在系统 > 配置 > 目录 > 产品图像占位符下，您可以上传新文件。

> core_config_data 表

# android - 如何在开放的街道地图中添加气球标题？

> ID：13679069
> 
> 赞同：1
> 
> 时间：2012-12-03T07:44:39.337
> 
> 标签：android

我正在使用此[实施开放街道地图](http://android-coding.blogspot.com/2012/06/example-of-implementing-openstreetmap.html)中的开放街道地图，代码运行良好，但问题是我想添加一个像谷歌地图这样的气球，它显示在此图像 [Android Mapview Balloons](https://github.com/jgilfelt/android-mapviewballoons)中。

请告诉我我该怎么做？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:09:06.377

为 Android 创建多标记 OpenStreetMap

[http://android-er.blogspot.in/2012/05/create-multi-marker-openstreetmap-for.html](http://android-er.blogspot.in/2012/05/create-multi-marker-openstreetmap-for.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:14:16.750

如果您使用 eclipse 将[mapviewbaloons](https://github.com/jgilfelt/android-mapviewballoons)库导入您的项目，然后扩展 MyItemizedOverlay

```
public class MyItemizedOverlay extends BalloonItemizedOverlay<OverlayItem> 
```

你的 onTap 必须变成 onBaloonTap

```
@Override
protected boolean onBalloonTap(int index, OverlayItem item) {
    String url = "someurl.com";
    Intent i = new Intent(Intent.ACTION_VIEW);
    i.setData(Uri.parse(url));
    c.startActivity(i);
    return true;

} 
```

确保在此示例中在 onBaloonTap() 中启动活动时添加上下文 c 是上下文

```
c.startActivity(i); 
```

# javascript - 作为 NPObject 的功能 - 如何获得它的签名？

> ID：13679072
> 
> 赞同：0
> 
> 时间：2012-12-03T07:44:45.553
> 
> 标签：javascript, npapi

我的 NPAPI 插件接收一个 Javascript 函数作为 NPObject。有没有办法获得这个函数的签名，或者至少，它需要的参数数量？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:31:15.123

与 C++ 不同，JavaScript 是[动态类型](http://en.wikipedia.org/wiki/JavaScript#Dynamic)的：您只需调用该函数并依靠它来处理您传入的内容。

虽然[`Function.length`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/length)要获取命名参数的数量，但基于此的不同行为会破坏方法，例如：

*   通过检查正在定义的参数来处理不同的参数计数
*   使用[`arguments`数组](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:57:41.703

您可以使用以下代码获取参数的数量：

```
function MyFunc(a, b, c) {
     //some stuff here...
}

var num = MyFunc.length;
alert("number of arguments: " + num); 
```

[测试用例](http://jsfiddle.net/kEL4M/)。

除了你不能在函数本身之外得到什么，JavaScript 没有类型，所以你不知道函数期望什么类型的参数。

# sql - 如何在sql中找到另一列中的一列

> ID：13679073
> 
> 赞同：0
> 
> 时间：2012-12-03T07:44:59.937
> 
> 标签：sql

我无法在另一列中找到一列。我有这个代码：

```
SELECT company.name
FROM company, person
WHERE company.name not like '%'+person.sirname+'%' 
```

有两个表，公司有列 - 名称

```
Company of mr. Black 
```

和有专栏的人 - sirname

```
Black 
```

但是当我运行这段代码时，它变成了一个错误“无效号码”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T07:46:35.047

我认为您正在尝试加入这两个表。尝试`JOIN`像这样使用显式语法：

```
SELECT company.name
FROM company
INNER JOIN person ON company.name not like '%'+person.sirname+'%' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T07:47:52.087

字符串需要与 || 连接。运算符（您可能需要一个 JOIN 条件）：

```
SELECT company.name
FROM company, person
WHERE company.name not like '%' || person.sirname || '%'
AND person.company_id = company.id 
```

如果您使用 + 运算符，数据库会尝试将名称转换为数字，您会收到错误*invalid number*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T07:55:29.490

我认为最好的事情是你应该使用内部连接，不要为了获取也使用 ID 我想这可能会有所帮助如果我没有弄错问题

# windows-8 - 了解 Windows8 漫游和本地数据存储

> ID：13679074
> 
> 赞同：1
> 
> 时间：2012-12-03T07:45:05.873
> 
> 标签：windows-8, microsoft-metro, data-storage

我想制作一个 Windows 8 Metro 风格的应用程序。这将是我的第一个申请。学习 Windows-8 的概念。我想制作一个简单的应用程序，用户可以在其中存储一些笔记。我希望应用程序使用漫游数据存储，以便笔记可以通过云和用户的其他设备使用。但根据 msdn [http://msdn.microsoft.com/library/windows/apps/Hh464917](http://msdn.microsoft.com/library/windows/apps/Hh464917)漫游数据只能使用30天（如果没有访问应用程序），其他设备无法访问本地存储数据。我的问题是，如果我使用漫游数据存储并且由于某种原因用户 dnt 打开应用程序 30 天（虽然不太可能但以防万一），他的所有笔记都会从所有设备上消失，对吗？如果是这样的话，我应该用什么来防止这种情况。我可以将数据保存到两种存储类型吗？

**谢谢**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:09:16.380

对于这种情况，建议使用 Azure 后端，确切地说是移动服务。据我所知，这些都是免费的（有使用限制）。

是的，您可以将便笺存储在两个存储中，然后检查便笺是否存储在漫游数据中，如果不是，则从本地存储中恢复。

# regex - vim 可视块搜索/替换仅替换一行上的第一次出现

> ID：13679075
> 
> 赞同：6
> 
> 时间：2012-12-03T07:45:21.117
> 
> 标签：regex, vim, replace

我正在以可视模式尝试以下命令以尝试对文本块进行全局查找/替换

> :'<,'>s/红/绿/g

文字看起来像这样

> 红色 红色 红色 蓝色 红色 红色 红色 蓝色

结果

> 绿色 红色 红色 蓝色 红色 红色 红色 蓝色

而不是我对**g**开关的期望：

> 绿色 绿色 绿色 蓝色 绿色 绿色 绿色 蓝色

知道是什么导致了这种行为吗？如果它是默认行为，我如何让**g**真正*真正*全球化？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T08:11:34.640

你可能已经`:set gdefault`; 这反转了`g`替换标志的含义。您可以通过 检查它的设置位置`:verbose set gdefault?`并暂时将其关闭`:set nogdefault`，但您可能希望找到设置它的位置并将其从那里删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:56:56.647

我在我的 vim 中尝试了这个并得到了正确的结果：

```
green green green blue green green green blue 
```

也许你的 .vimrc 中有一些东西改变了默认行为。你想把它附加到这个线程吗？

# objective-c - __attribute__((const)) 是否适用于带有 Clang 的 Objective-C 方法？

> ID：13679077
> 
> 赞同：3
> 
> 时间：2012-12-03T07:45:29.417
> 
> 标签：objective-c, attributes, clang

`__attribute__((const))`是用于检查函数执行纯度的 GCC 属性。我认为 Clang 支持这一点，但是当我把它放到一个方法中时，它似乎不起作用。

```
@interface C1
- (id)method1 __attribute__((const));
@end

int a = 0;

@implementation C1
- (id)method1 __attribute__((const))
{
    a++;
    return nil;
}
@end 
```

上面的代码不会产生任何警告或错误。

这个归因是否适用于 Clang？或者我应该怎么做才能使它起作用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T08:14:07.227

该`const`属性不*检查*函数的纯度。它*声明*了函数的纯度，因此优化器可以消除对函数的调用。实际确保函数是纯函数由您决定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-25T18:57:57.163

声明一个方法`const`在 Objective-C 中不起作用，因为它与运行时的消息传递机制相矛盾。的[文档](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)`const`说：

> 请注意，具有指针参数并检查指向的数据的函数不得声明为 const。

每个 Objective-C 方法至少有一个（隐式）指针参数：`self`. 它*始终*作为消息传递 ( `objc_msgSend()`) 的一部分进行检查。这就是使 Objective-C 动态化的原因。

# matlab - x轴上的全范围值 - matlab

> ID：13679079
> 
> 赞同：0
> 
> 时间：2012-12-03T07:45:34.750
> 
> 标签：matlab, range, histogram

我正在尝试检查直方图**x 轴上的****全部**值范围，特别是当我期望整个范围为时，当我对 histogram 使用以下命令时，我得到以下信息：**`[0, 255]``[h, bins] = hist(H)`**

 **```
h =

   221    20     6     4     1     1     2     0     0     1

bins =

  Columns 1 through 7

    8.2500   24.7500   41.2500   57.7500   74.2500   90.7500  107.2500

  Columns 8 through 10

  123.7500  140.2500  156.7500 
```

这意味着我在这里得到的最大范围是`165`.

如果我们查看下面的直方图，我们可以看到这`165`似乎是值的最大值`frequency`。我如何知道 x 轴的最大值（范围）？

![在此处输入图像描述](../Images/02b4a6f46abf118ea8979cd16397b200.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T13:03:27.717

我认为您需要以下三个选项之一：

```
max(H) 
```

或者

```
numel(unique(H)) 
```

或者

```
numel(H) 
```

我会从顶部开始，直到你找到你需要的那个。**

# wpf - 将 IronPython 用于 WPF 中的附加属性的异常

> ID：13679083
> 
> 赞同：3
> 
> 时间：2012-12-03T07:45:44.003
> 
> 标签：wpf, ironpython

我正在尝试向 WPF Web 浏览器添加一个属性，以允许我在运行时使用 NavigateToString，但出现异常：

> SystemError：无法设置未知成员“{clr-namespace:WebBrowserHelper;Assembly=helpers}WebBrowserHelper.Body”。

我在 C# 程序集中有一个工作版本，但我想知道如何使用 IronPython 来完成它。

我的 ns 声明如下所示：

```
xmlns:helpers="clr-namespace:WebBrowserHelper;Assembly=helpers" 
```

它是这样使用的：

```
<WebBrowser helpers:WebBrowserHelper.Body="{Binding html}" /> 
```

这是 IronPython 代码：

```
import clr

clr.AddReference("System.Windows")
clr.AddReference("WindowsBase")
clr.AddReference("PresentationCore")
clr.AddReference("PresentationFramework")

from System.Windows import (
DependencyObject, DependencyProperty
)

class WebBrowserHelper(DependencyObject):
    _Body = None

    def __new__(cls):
        if notWebBrowserHelper._Body:
            WebBrowserHelper._Body = DependencyProperty.RegisterAttached(
                "Body", clr.GetClrType(str), clr.GetClrType(WebBrowserHelper), PropertyMetadata(WebBrowserHelper.OnBodyChanged))
        return DependencyObject.__new__(cls)

    def getBody(self):
        return self.GetValue(WebBrowserHelper._Body)

    def setBody(self, value):
        self.SetValue(WebBrowserHelper._Body, value)

    @staticmethod
    def OnBodyChanged(dependancyObject, eventArgs):
        dependancyObject.NavigateToString(eventArgs.NewValue)

    Body = property(getBody, setBody) 
```

# android - 全景图片作为 Android 中的子视图

> ID：13679086
> 
> 赞同：0
> 
> 时间：2012-12-03T07:46:06.423
> 
> 标签：android, view, android-activity, panoramas

我正在使用适用于 android 的 Panoramagl 库来显示一些全景图片。示例项目运行良好。问题是现在我想将全景图片显示为子视图，而我不能将其添加为子视图。当我尝试从 xml 将其添加为子项时，它会引发 android.view.InflateException。它还给了我一个 java.lang.NoSuchMethodException：PLView(Context,AttributeSet)。

在进一步查看该库后，我发现 PLView 扩展了一个最终扩展 Activity 的类 PLViewBase。

所以基本问题是如何在 Activity 类中添加 Activity 作为 View ？

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:23:28.033

好的，我做错了我想向panoramagl库添加布局并尝试将库视图作为子库视图，而不是通过使用“addContentView”将我想要的视图创建为panorogl视图来实现

# delphi - (Delphi THintWindow) 如何画一个透明的PNG？

> ID：13679089
> 
> 赞同：0
> 
> 时间：2012-12-03T07:46:26.203
> 
> 标签：delphi, graphics, drawing, tooltip, delphi-2010

我有这个**delphi 2010**代码：

```
unit Unit1;

interface

uses
    Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
    Dialogs, StdCtrls, Math, ExtCtrls, pngimage;

type
     TMyHintWindow = class(THintWindow)
     private
      FBitmap : TBitmap;
      ThePNG  : TPngImage;
      FRegion : THandle;
      procedure FreeRegion;
     protected
      procedure CreateParams(var Params : TCreateParams); override;
      procedure Paint; override;
      procedure Erase(var Message : TMessage); message WM_ERASEBKGND;
     public
      constructor Create(AOwner : TComponent); override;
      destructor Destroy; override;
      procedure  ActivateHint(Rect : TRect; const AHint : String); Override;
     end;

type
    TForm1 = class(TForm)
    Button1: TButton;
     procedure FormCreate(Sender : TObject);
    private
     { Private declarations }
    public
     { Public declarations }
    end;

var
   Form1 : TForm1;

implementation

{$R *.dfm}
// --------------------------------------------------------------------------- //
constructor TMyHintWindow.Create(AOwner : TComponent);
begin
     inherited Create(AOwner);
     FBitmap                  := TBitmap.Create;

     FBitmap.PixelFormat      := pf32bit;
     FBitmap.HandleType       := bmDIB;
     FBitmap.Transparent      := True;
     FBitmap.TransparentMode  := tmAuto;  // }tmFixed;
     FBitmap.TransparentColor := clWhite;
     FBitmap.AlphaFormat      := {afPremultiplied;  // }afDefined;

     ThePNG                   := TPngImage.Create;
     ThePNG.Transparent       := True;
     ThePNG.TransparentColor  := clWhite;
     ThePNG.LoadFromFile('D:\project-1\tooltip.png');

     FBitmap.LoadFromFile('D:\project-1\tooltip.bmp');
end;
// --------------------------------------------------------------------------- //
destructor TMyHintWindow.Destroy;
begin
     FBitmap.Free;
     FreeRegion;

     inherited;
end;
// --------------------------------------------------------------------------- //
procedure TMyHintWindow.CreateParams(var Params : TCreateParams);
const
     CS_DROPSHADOW = $20000;
begin
     inherited;
     Params.Style := Params.Style - WS_BORDER;
     Params.WindowClass.Style := Params.WindowClass.Style or CS_DROPSHADOW;
end;
// --------------------------------------------------------------------------- //
procedure TMyHintWindow.FreeRegion;
begin
     if FRegion <> 0 then
     begin
      SetWindowRgn(Handle, 0, True);
      DeleteObject(FRegion);
      FRegion := 0;
     end;
end;
// --------------------------------------------------------------------------- //
procedure TMyHintWindow.ActivateHint(Rect : TRect; const AHint : String);
var
   i : Integer;
begin
     Caption             := AHint;
     Canvas.Font         := Screen.HintFont;
     FBitmap.Canvas.Font := Screen.HintFont;
     DrawText(Canvas.Handle, PChar(Caption), Length(Caption), Rect, DT_CALCRECT or DT_NOPREFIX);

     Width               := 230;  // (Rect.Right - Rect.Left) + 16;
     Height              := 61;   // (Rect.Bottom - Rect.Top) + 10;

     FBitmap.Width       := Width;
     FBitmap.Height      := Height;
     Left := Rect.Left;
     Top := Rect.Top;
     FreeRegion;

     with Rect do
      FRegion := CreateRoundRectRgn(1, 1, Width, Height, 3, 3);

     if FRegion <> 0 then
    SetWindowRgn(Handle, FRegion, True);

     AnimateWindowProc(Handle, 300, AW_BLEND);

     SetWindowPos(Handle, HWND_TOPMOST, Left, Top, 0, 0, SWP_SHOWWINDOW or SWP_NOACTIVATE or SWP_NOSIZE);
end;
// --------------------------------------------------------------------------- //
procedure TMyHintWindow.Paint;
var
   CaptionRect : TRect;
begin
     with FBitmap.Canvas do
     begin
      Font.Color  := clWindowText;
      Brush.Style := bsClear;
     end;    // with
     CaptionRect := Rect(25, 26, Width - 10, Height - 10);

     SetBkMode(Canvas.Handle, TRANSPARENT);
     DrawText(FBitmap.Canvas.Handle, PChar(Caption), Length(Caption), CaptionRect, DT_WORDBREAK OR DT_NOPREFIX);
     BitBlt(Canvas.Handle, 0, 0, Width, Height, FBitmap.Canvas.Handle, 0, 0, SRCERASE{SRCCOPY});
end;
// --------------------------------------------------------------------------- //
procedure TMyHintWindow.Erase(var Message : TMessage);
begin
     Message.Result := 0;
end;
// --------------------------------------------------------------------------- //
procedure TForm1.FormCreate(Sender : TObject);
begin
     HintWindowClass := TMyHintWindow;
     Button1.Hint    := 'This is a nice fake tooltip!';
end;
// --------------------------------------------------------------------------- //
end. 
```

这个例子有**两个问题**：

1.  我需要用透明边框绘制 PNG。[图片本身在这里](http://i.stack.imgur.com/0o36B.png)

2.  如果您运行这个项目（表单只有一个名为 Button1 的按钮），并显示几次提示，您应该意识到每次显示提示时标题都会变粗。我很确定我忘记了忘记清除/擦除的背景，但我不知道如何解决这个问题。

**有人可以告诉我如何解决这两个问题吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:40:48.193

您将不得不在上面需要的提示中对位置和 png 进行调整，但“引擎”应该按预期工作。我没有使用 GDI+，这会让我变得更容易。

```
unit Unit1;

interface

uses
    Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
    Dialogs, StdCtrls, Math, ExtCtrls, pngimage;

type
     TMyHintWindow = class(THintWindow)
     private
      FBitmap : TBitmap;
      ThePNG  : TPngImage;
      FCurrAlpha:Integer;
      FTimer:TTimer;
      FActivated:Boolean;
      FLastActive:Cardinal;
      procedure PrepareBitmap;
      procedure IncAlpha(Sender:TObject);
     protected
      procedure CreateParams(var Params : TCreateParams); override;
      procedure Paint; override;
      procedure Erase(var Message : TMessage); message WM_ERASEBKGND;
     public
      constructor Create(AOwner : TComponent); override;
      destructor Destroy; override;
      procedure  ActivateHint(Rect : TRect; const AHint : String); Override;
     end;

type
    TForm1 = class(TForm)
    Button1: TButton;

     procedure FormCreate(Sender : TObject);
    private
     { Private declarations }
    public
     { Public declarations }
    end;

var
   Form1 : TForm1;

implementation

{$R *.dfm}
// --------------------------------------------------------------------------- //
constructor TMyHintWindow.Create(AOwner : TComponent);
begin
     inherited Create(AOwner);
     FBitmap                  := TBitmap.Create;
     FCurrAlpha               := 1;
     FTimer                   := TTimer.Create(self);
     FTimer.Interval          := 20;
     Ftimer.OnTimer           := IncAlpha;
     Ftimer.Enabled           := false;
     ThePNG                   := TPngImage.Create;
     ThePNG.Transparent       := True;
     ThePNG.TransparentColor  := clWhite;
     ThePNG.LoadFromFile('C:\temp\0o36B.png');

end;
// --------------------------------------------------------------------------- //
destructor TMyHintWindow.Destroy;
begin
     FBitmap.Free;
     ThePNG.Free;
     inherited;
end;
// --------------------------------------------------------------------------- //

procedure TMyHintWindow.IncAlpha(Sender:TObject);
begin
    FCurrAlpha := FCurrAlpha + 10;
    if FCurrAlpha >= 254 then
        begin
           FCurrAlpha := 254;
           Ftimer.Enabled := false;
           FActivated := false;
        end;
    invalidate;
end;

procedure TMyHintWindow.CreateParams(var Params : TCreateParams);
const
     CS_DROPSHADOW = $20000;
begin
     inherited;
     Params.Style := Params.Style - WS_BORDER;
     Params.WindowClass.Style := Params.WindowClass.Style or CS_DROPSHADOW;
end;
// --------------------------------------------------------------------------- //

type
  pRGBQuadArray = ^TRGBQuadArray;
  TRGBQuadArray = ARRAY[0..$effffff] OF TRGBQuad;
Procedure SetAlpha(bmp:TBitMap;Alpha:Byte);
var
 pscanLine32 : pRGBQuadArray;
 i,j:Integer;
 begin
   Bmp.PixelFormat := pf32Bit;
   bmp.HandleType := bmDIB;
   bmp.ignorepalette := true;
   bmp.alphaformat := afDefined;
   for i := 0 to bmp.Height -1 do
     begin
     pscanLine32 := bmp.Scanline[i];
     for j := 0 to bmp.Width -1 do
        begin
          pscanLine32[j].rgbReserved := Alpha;
          pscanLine32[j].rgbBlue := 0;
          pscanLine32[j].rgbRed := 0;
          pscanLine32[j].rgbGreen := 0;
        end;
     end;
 end;

Procedure ResetSetAlpha(bmp:TBitMap;r:Trect;Alpha:Byte);
var
 pscanLine32 : pRGBQuadArray;
 i,j:Integer;
 begin
   for i := 0 to bmp.Height -1 do
     begin
     pscanLine32 := bmp.Scanline[i];
     for j := 0 to bmp.Width -1 do
        begin
          if (i>=r.Top) and (i<=r.Bottom) and (j>=r.Left) and (j<=r.Right) then
                pscanLine32[j].rgbReserved := Alpha;
        end;
     end;
 end;

procedure TMyHintWindow.PrepareBitmap;
var
 r:TRect;
begin
   r := Clientrect;
   r.Top := r.Top + 10;
   InflateRect(r,-10,-10);
   FreeAndNil(FBitmap);
   FBitmap := TBitmap.Create;
   FBitmap.Width := 230;
   FBitmap.Height := 61;
   SetAlpha(FBitmap, 0);
   FBitmap.Canvas.Font := Screen.HintFont;
   FBitmap.Canvas.Brush.Style := bsClear;
   FBitmap.Canvas.Draw(0, 0, ThePNG);
   DrawText(FBitmap.Canvas.Handle, PChar(Caption), Length(Caption), r,DT_Center or DT_Wordbreak or DT_NOPREFIX);
   ResetSetAlpha(FBitmap,r,255);
end;

// --------------------------------------------------------------------------- //
procedure TMyHintWindow.ActivateHint(Rect : TRect; const AHint : String);
var
   i : Integer;

begin
    if (GetTickCount - FLastActive > 250) and (Length(AHint) < 100) then

     if not FActivated then
        begin
         FCurrAlpha := 1;
         FActivated := true;
         Caption             := AHint;
         Canvas.Font         := Screen.HintFont;
         Width               := 230;  // (Rect.Right - Rect.Left) + 16;
         Height              := 61;   // (Rect.Bottom - Rect.Top) + 10;
         Left := rect.Left  - Width div 2;
         Top := Rect.Top;
         Ftimer.Enabled := true;
         ShowWindow(Handle, SW_SHOWNOACTIVATE);
         SetWindowPos(Handle, HWND_TOPMOST, Left, Top, 0, 0, SWP_NOACTIVATE or SWP_NOMOVE or SWP_NOSIZE);
         invalidate;
        end;
    FLastActive := GetTickCount;
end;

// --------------------------------------------------------------------------- //
procedure TMyHintWindow.Paint;
var
   DestPoint, srcPoint:TPoint;
   winSize:TSize;
   DC         : HDC;
   blendfunc  : BLENDFUNCTION;

    Owner : HWnd;
    curWinStyle:Integer;

     exStyle:Dword;
begin

   PrepareBitmap;
   DC := GetDC(0);

   try
   winSize.cx := width;
   winSize.cy := Height;
   srcPoint.x := 0;
   srcPoint.y := 0;

   DestPoint := BoundsRect.TopLeft;

   exStyle := GetWindowLongA(handle, GWL_EXSTYLE);
   if (exStyle and WS_EX_LAYERED) = 0 then

    SetWindowLong(handle, GWL_EXSTYLE, exStyle or WS_EX_LAYERED );

   With blendFunc do
   begin
     AlphaFormat := 1; //=AC_SRC_ALPHA;
     BlendFlags := 0;
     BlendOp := AC_SRC_OVER;
     SourceConstantAlpha :=  FCurrAlpha;  // here you can set Alpha
   end;
   UpdateLayeredWindow(Handle, DC, @DestPoint, @winSize, FBitmap.Canvas.Handle,  @srcPoint,clBlack, @blendFunc, 2);//=ULW_ALPHA

   finally
      ReleaseDC(0, DC);
   end;

end;
// --------------------------------------------------------------------------- //
procedure TMyHintWindow.Erase(var Message : TMessage);
begin
     Message.Result := 0;
end;
// --------------------------------------------------------------------------- //
procedure TForm1.FormCreate(Sender : TObject);
begin
     HintWindowClass := TMyHintWindow;

     Button1.Hint    := 'This is a nice fake tooltip!';
     ReportMemoryLeaksOnShutDown := true;
end;
// --------------------------------------------------------------------------- //
end. 
```

# c++ - C++ NCurses 如何获取当前光标位置？

> ID：13679094
> 
> 赞同：4
> 
> 时间：2012-12-03T07:47:09.273
> 
> 标签：c++, linux, ncurses, cursor-position

如何使用 C++ 使用 NCurses 在终端中获取光标的当前位置？我搜索了一下，看到“getxy（int x，int y）”。我试过了，得到了错误“'getxy'没有在这个范围内声明”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T08:57:36.550

您可能忘记了一些`#include <ncurses.h>`，宏拼写为[getyx](http://linux.die.net/man/3/getyx)

不要忘记编译`g++ -Wall -g`和链接`-lncurses`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-15T06:58:08.297

```
getyx(WINDOW *win,int y,int x); 
```

不是 getxy()。

# c++ - 从 dll 中的函数返回时堆损坏

> ID：13679104
> 
> 赞同：8
> 
> 时间：2012-12-03T07:48:09.473
> 
> 标签：c++, dll, exception-handling, heap-corruption

我有一个原型函数，如下所示：

```
void function(std::string str); 
```

在加载和使用该 dll 的另一个程序中的主函数中调用此函数。

```
function("some string value here"); 
```

从这个函数返回时，我得到堆损坏错误：

> Windows 在 program.exe 中触发了一个断点。
> 
> 这可能是由于堆损坏，这表明 program.exe 或其已加载的任何 DLL 中存在错误。
> 
> 这也可能是由于用户在 program.exe 获得焦点时按 F12。
> 
> 输出窗口可能有更多诊断信息。

玩弄我的代码，我注意到一些奇怪的观察结果：
1\. 当传入的字符串长度小于 11 个字符时，我没有收到任何错误，只要我添加更多字符，就会出现错误。
2\. 将参数类型从 更改为 时`std::string`，`std::string&`错误消失。传递引用的想法来自[这里](http://forums.devx.com/showthread.php?171091-Heap-corruption-probelm-when-i-try-to-return-std-string-from-function-in-dll)。
3\. 我已经注释掉了函数的主体。那里的操作与产生的异常无关。
4\. 将参数类型从 更改`std::string`为`char*`也可以解决问题。
什么可能导致此错误？我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T08:02:42.567

最有可能的是，由于在 Windows 中 DLL 有自己的私有堆这一事实，您会看到崩溃。

当你编译你的函数时，编译器为`std::string`的析构函数生成了一些代码，以清理它的参数。此代码释放 DLL 堆上分配的内存。但是，应用程序 EXE 也会为 的构造函数生成自己的代码`std::string`，该构造函数在程序堆上分配代码。当您在一个堆上分配并在另一个堆上释放时，会发生未定义的行为，并且您会崩溃。

至于为什么小字符串不会触发错误 - 许多`std::string`实现将小字符串内联到结构本身，以避免堆开销。当您的字符串足够小以适应时，不需要进行内存分配，因此它似乎可以工作......只要您对 EXE 和 DLL 使用相同的 STL 版本，并且内联的阈值永远不会改变。

为避免此问题，不要将对象按值传递给 DLL（除非它们是[POD 对象](https://stackoverflow.com/questions/146452/what-are-pod-types-in-c)），并且不要在与创建对象不同的 DLL 或 EXE 中释放对象。避免将 STL 或 C++ 库对象传递为好吧，因为它们的实现可能在不同版本的 C++ 编译器之间有所不同。传递 POD 对象或 C 原始类型，例如`const char *`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-03T07:59:24.027

导出 DLL 函数时，最好只接受整数数据类型，即 int 或指针（不确定 float 和 double）。

当您需要传递字符串时，将其作为 传递`const char *`，当您需要 DLL 函数返回字符串时，将`char *`指向预分配缓冲区的指针传递给 DLL，DLL 将在其中写入字符串。

永远不要在 DLL 自己的函数之外使用由 DLL 分配的内存，并且永远不要通过具有自己的构造函数/析构函数的值结构传递。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-03T08:05:58.607

可能您已经与静态版本的 C 运行时链接，创建与静态版本的 C 运行时链接的 DLL 绝不是一个好主意。这可能会导致很多问题，例如在您的程序中，您的 EXE 从与其链接的静态 C 运行时的私有堆分配内存，然后在您的 DLL 中您想要删除该堆并创建一个新堆（因为您想要添加一些数据到输入字符串，它需要增加它的缓冲区），所以它会导致错误。最简单的方法是将程序的所有部分（EXE 和 DLL）与 C 运行时的 DLL 版本链接，因此它们都共享来自 MSVCRTXX.dll 的相同堆

# java - 读入字符串，检查字符串，输出数字

> ID：13679107
> 
> 赞同：0
> 
> 时间：2012-12-03T07:48:21.647
> 
> 标签：java, int

我在这里遇到了一个大问题。基本上我要做的是让用户输入一个数字......然后程序会取这个数字，读取它是负数还是正数。如果为负，则将先前的错误 negval 设置为 true 并继续。然后它再次读取数字，检查前导零，如果有任何它删除它们。然后它需要剩下的内容并检查字符串是否小于最大的大声字符数，如果是，则循环计算空格，同时计算空格它还确保它们是数字。如果字符串大于允许的字符数，程序停止检查并打印 0

我的问题是，即使字符串长度是有效长度，它也会一直跳到 0 输出

这就是我所拥有的。

```
 String snum;
System.out.print("Please enter a number here : ");
snum = console.next();
System.out.println(getIntnum(" The number entered was: "+snum)); 
```

其他通用的东西

```
 final String maxInt = "2147483648";
    final String minInt = "-2147483648";
    boolean negval = false;

    int n;
    int count;
    int num = 1;
    int value;

    if(snum.charAt(0) == '-' || snum.charAt(0) == '+')
     {
      if(snum.charAt(0) == '-')
      {
        negval = true;
      }
      else
      {
        snum = snum.substring(1, snum.length());
      }
    }

    while (snum.charAt(0) == '0')
    {
      snum = snum.substring(1, snum.length());
    }

    n = snum.length( );
    if (n < 10)
    {
      count = 0;
      if (count < n)
      {
        if (Character.isDigit(snum.charAt(count)))
          count++;
      }
    }

     else
       {
     num = 0;

    }
     if(maxInt.compareTo(snum) >= 0 && minInt.compareTo(snum) <= 0)
     {
       num = Integer.parseInt(snum);
     }
     if(negval == true)
     {
       num = num * -1;
     }
     value = num;
     return value;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:30:53.623

您正在比较的字符串与比较数字的工作方式不同。例如，`"10"`<`"2"`因为`'1'`<`'2'`而这意味着`"-1"`<`"-2147483648"`和`"3"`>`"2147483647"`

很难建议您应该做什么，因为我不清楚您为什么要执行一半的代码，例如您能说出您的代码与

```
try {
    return Integer.parseInt(s);
} catch (NumberFormatException ignored) {
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:55:25.907

您的主要问题是您使用字符串比较来比较数字。此外，由于您已经知道该数字是正数，因此将其与 minInt 进行比较没有多大意义。最后，您的 maxInt 值错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T07:54:18.547

只需使用`Integer.parseInt(snum)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T08:04:20.907

```
final String maxInt = "2147483648"; 
```

`MAX_INT`是`2147483647`。

其次，不要使用字符串比较来比较数字。像这样使用它：

```
 if (Integer.parseInt(maxInt) >= Integer.parseInt(snum)) {
            num = Integer.parseInt(snum);

        } 
```

# cocos2d-iphone - 如何在 cocos2d(box2D) 中沿圆弧路径旋转物理或动态体

> ID：13679108
> 
> 赞同：0
> 
> 时间：2012-12-03T07:48:23.180
> 
> 标签：cocos2d-iphone, rotation, box2d-iphone, bezier

由于我是 cocoa2d 的新手，我正在努力沿着弧形路径旋转物理或动态体。

我尝试的方法如下：

```
#define COS_ANIMATOR(position, timeCount, speed, waveMagnitude) ((cosf(timeCount * speed) * waveMagnitude) + position)

#define SIN_ANIMATOR(position, timeCount, speed, waveMagnitude) ((sinf(timeCount * speed) * waveMagnitude) + position)

CCSpriteBatchNode *pipe_parent = [CCSpriteBatchNode batchNodeWithFile:@"pipe.png" capacity:100];
        CCTexture2D *pipeSpriteTexture_ = [pipe_parent texture];

        PhysicsSprite *pipeSprite = [PhysicsSprite spriteWithTexture:pipeSpriteTexture_ rect:CGRectMake(0 ,0 ,55,122)];

        //pipe = [CCSprite spriteWithFile:@"pipe.png" 
                                              // rect:CGRectMake(0, 0, 55, 122)];

        [self addChild:pipeSprite];
        // pipe.position = ccp(s.width/2 , 420.0);

        b2BodyDef myBodyDef;
        myBodyDef.type = b2_staticBody; //this will be a dynamic body
        myBodyDef.position.Set(((s.width/2) - 90)/PTM_RATIO, 420.0/PTM_RATIO); //set the starting position
        myBodyDef.angle = 0; //set the starting angle

        b2Body* staticBody = world->CreateBody(&myBodyDef);

        b2PolygonShape boxShape;
        boxShape.SetAsBox(1,1);

        b2FixtureDef boxFixtureDef;
        boxFixtureDef.shape = &boxShape;
        boxFixtureDef.density = 1;
        boxFixtureDef.userData = pipeSprite;
        boxFixtureDef.filter.groupIndex = -1;
        staticBody->CreateFixture(&boxFixtureDef);
        [pipeSprite setPhysicsBody:staticBody];

-(void) draw
{
    //
    // IMPORTANT:
    // This is only for debug purposes
    // It is recommend to disable it
    //
    [super draw];

    const CGPoint newSpritePosition = ccp(COS_ANIMATOR(150, mTimeCounter, 0.05,50), SIN_ANIMATOR(400, mTimeCounter, -0.05, 50));

    pipeSprite.position = newSpritePosition;

    ccGLEnableVertexAttribs( kCCVertexAttribFlag_Position );

    kmGLPushMatrix();

    world->DrawDebugData(); 

    kmGLPopMatrix();
} 
```

遵循这种方法，我的精灵以圆周运动旋转，而不是在弧形路径中旋转。

请提出您的想法或建议。

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:54:11.207

当您谈论在弧形路径中旋转时，我不完全确定您想要完成什么。我只看到你设置了一个位置，而不是一个旋转，所以你只是想设置一个位置，还是一个旋转，或者两者兼而有之？您的位置代码看起来像您正在尝试实现圆形（或椭圆形）路径，因为您在 x,y 位置使用正弦和余弦。

如果你想沿着正弦曲线移动精灵，我今天就这样做了，它需要一些试验和错误。我有一些振幅和周期的变量，从那里我在精灵的 update: 方法中找到了一个很好的正弦曲线运动。

```
CGPoint initialPosition; // set this to the sprite's initial position
float amplitude; // in points
float period; // in points
float y, x = initialPosition.x;
-(void) update:(ccTime)dt
{
   x += dt * 100; // speed of movement across the screen.  Picked by trial and error.
   y = initalPosition.y + amplitude * sinf((x - initialPosition.x)/period);
   sprite.position = ccp(x,y);
   sprite.rotation = cosf((x - initialPosition.x)/period); // optional if you want to rotate along the path as well
} 
```

不知道这是否是您正在寻找的任何东西，但它可能会给您一些想法。

# iphone - 在 iPhone 上加载图像需要大约 10-20 秒

> ID：13679109
> 
> 赞同：-1
> 
> 时间：2012-12-03T07:48:29.960
> 
> 标签：iphone, uiimage, uiimagepickercontroller

我创建了一个应用程序，它从相机中选择图像，并在 didFinishPickingMediaWithInfo 上将其传递给另一个视图并加载此视图。我认为代码还可以，但显示第二个视图需要大约 15-20 秒。所以请让我知道如何解决这个加载问题。

我的代码块是：

```
-(void)imagePickerController:(UIImagePickerController *)picker 
didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    [[picker parentViewController] dismissModalViewControllerAnimated:YES];

    [NSThread detachNewThreadSelector:@selector(switchToSecondView:) toTarget:self withObject:info];
}

-(void) switchToSecondView:(NSDictionary *)info
{
    UIImage *image = [info
              objectForKey:UIImagePickerControllerOriginalImage];

    secController =[[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    secController.myimage = image;

    AppDelegate *appDelegate=(AppDelegate *)[[UIApplication sharedApplication] delegate];
    [appDelegate.navController pushViewController:secController animated:NO];
} 
```

谢谢， Laxmilal Menaria

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:07:59.387

UiKit 仅在主线程上 [压倒性地] 安全使用。您的工作`switchToSecindView:`是在后台线程上进行的。因此行为是未定义的。

可能发生的情况是 UIKit 无法注意到您的更改，直到它碰巧在进行其他处理。

# java - Java 配置构建路径或 WEB-INF/lib 文件夹

> ID：13679112
> 
> 赞同：7
> 
> 时间：2012-12-03T07:48:41.087
> 
> 标签：java, jakarta-ee, build, jar, classpath

我见过很多教程和应用程序将他们的 jar 放在构建路径中，而其他人把它放在他们的 web-inf/lib 文件夹中，有什么显着的区别吗？两者的优缺点是什么？将某个 jar 放入 libs 文件夹并将 jar 放入构建路径中的指标是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-03T08:05:51.353

带有 WEB-INF 文件夹的应用程序是 Web 应用程序。这意味着它将被打包为 WAR 文件并部署在服务器上。

如果您使用的是 Eclipse 之类的 IDE，并且您将项目导出为 WAR 文件，它将自动获取 lib 文件夹下的 jar 并将它们与 WAR 一起打包，这将使它们可用于在服务器上运行的应用程序（jar 下WEB-INF/lib 包含在应用程序类路径中）。

如果您只是将它们放在其他任何地方并将它们包含在构建路径中，那么当您导出项目时，您必须声明您希望构建路径中的 jar 也包含在内。

基本上，没有太大的区别，但是如果你知道你在运行时需要这个jar（即在将应用程序部署到服务器之后），最好把它放在WEB-INF/lib 文件夹下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T08:00:49.260

*构建路径*是什么意思？您使用的大多数 JAR 都需要在构建（编译）期间可用，因为您的代码依赖于它们 - 否则它将无法编译。

真正的问题是在将 JAR 放入`WEB-INF/lib`与容器`/lib`目录之间。一般来说，您应该始终将您的 JAR 放在`WEB-INF/lib`. 将它们放在全球范围内会产生几个后果：

*   如果多个部署，单例现在对所有 Web 应用程序（一个类加载器）都是全局的

*   如果库包含对您的任何类的引用，则更容易引入内存泄漏（见上文）

*   您不会复制相同的类（每个 Web 应用程序将重用相同的类，而不是在每个类加载器中都有一个单独的副本

# .net - 从 C# 代码调用 .net DLL

> ID：13679116
> 
> 赞同：0
> 
> 时间：2012-12-03T07:48:53.033
> 
> 标签：.net, dll, tfs

我想使用 tfs 从 csharp 代码中调用一些 .net DLL。问题是我无法将这些 DLL 的引用直接添加到我的解决方案中，因为我需要一个独立的解决方案。这是因为要调用的 DLL 经常变化，并且新的 DLL 也被添加到其中。那么我如何使用 TFS 通过代码调用它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:54:05.190

我不确定 TFS 会出现在哪里，但您正在寻找的是 System.Reflection。有一篇文章会在

[http://www.codeproject.com/Articles/32828/Using-Reflection-to-load-unreferenced-assemblies-a](http://www.codeproject.com/Articles/32828/Using-Reflection-to-load-unreferenced-assemblies-a)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:09:12.533

如果我理解正确，这或多或少是您需要的：

```
private void LoadUpdatedAssembly()
{
    var versionControlServer = _tfs.GetService<VersionControlServer>();
    var tempFilePath = Path.GetTempFileName();
    if (File.Exists(tempFilePath))
    {
        File.SetAttributes(tempFilePath, FileAttributes.Normal);
        File.Delete(tempFilePath);
    }
    versionControlServer.DownloadFile(@"$/<TeamProject>/<SourceControlFilePath>.dll", tempFilePath);
    var assembly = Assembly.LoadFrom(tempFilePath);
    AppDomain.CurrentDomain.Load(assembly.GetName());
} 
```

然后您可以使用“Dynamics”最轻松地访问它：

```
static void UseDynamicallyLoadedAssembly()
{
    dynamic dynamicExampleClass  = new ClassInAssembly();
    dynamicExampleClass.MethodOfTheClassInTheAssembly (10, 4);
} 
```

与动态（或反射）一样，您对所写的内容负全部责任，因为所有错误都会在运行时出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T07:51:23.127

这些其他 DLL 是从 VS 项目创建的吗？如果我这样做，我会将项目添加到单个解决方案中，然后添加对依赖项目的引用，而不是直接添加到输出 DLL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T09:05:23.243

不知道为什么你会使用未引用的 dll，但对我来说，这听起来有点像你需要使用反射。我在项目中使用的另一种方法是 .Net 的 AddIn 选项：Microsoft 官方解释： http: [//msdn.microsoft.com/en-us/library/bb384200](http://msdn.microsoft.com/en-us/library/bb384200(v=vs.90).aspx) (v=vs.90).aspx Codeproject 的示例，这对我很有帮助：http: [//www.codeproject.com/Articles/25866/AddIn-Enabled-Applications](http://www.codeproject.com/Articles/25866/AddIn-Enabled-Applications)

了解更多关于为什么不引用 dll 的问题可能会有所帮助。

# android - Android 电话通话状态

> ID：13679120
> 
> 赞同：0
> 
> 时间：2012-12-03T07:49:36.917
> 
> 标签：android, android-intent

对于调用有两种主要可能的情况

*   第一种情况：用户 B 呼叫用户我（假设我是用户 A）
*   第二种情况：用户A（我正在）呼叫用户B

在第一种情况下，将有三种调用状态 `CALL_STATE_IDLE`，`CALL_STATE_RINGING`并且`CALL_STATE_OFFHOOK`

用户 B 呼叫用户 A（myphone）。

当用户 B 呼叫我 (A) 时，电话状态 1 将进入振铃状态，当我接听电话时，它将进入摘机状态，当我或用户 B 结束时，呼叫控制将进入空闲状态，即美好的 。

使用第一种呼叫情况，我们可以检测到用户 A 侧电话的三种状态。

第二种情况：在第二种情况下，当我打电话给用户 B 时。

控制进入内部`IDLE`状态然后摘机状态没有应答，

任何人都可以描述我如何识别用户 B 在我这边（在用户 A 那边）参加（接听）我的电话？

# bash - if else 在 .bat 脚本 + findstr 命令中起作用

> ID：13679122
> 
> 赞同：2
> 
> 时间：2012-12-03T07:49:44.410
> 
> 标签：bash, batch-file

```
IF find tcp.client == 1 

(

 findstr tcp.client *_chkpackage.log>summary.txt 
) 

ELSE 
(

#write only "filename" & "N/A" >> summary.txt

) 
```

我想搜索一个文件，如果找到包含我需要的信息的行，它将在文件夹中的所有文本文件中搜索一些值，如果找不到，它将将该行写入文本字段，它将只写入文件名和“N/A”到线

我知道错了，但是我的编码技巧很烂，所以我不得不问

非常感谢你的回答

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T11:08:22.100

根据您的“规范”工作的东西是：

```
@echo off
if exist summary.txt del summary.txt
for %%f in (*_chkpackage.log) do (
  find "tcp.client" %%f>NUL:
  IF errorlevel 1 (
    echo %%f N/A >> summary.txt
  ) ELSE (
    findstr "tcp.client" %%f >> summary.txt
  )
)
type summary.txt 
```

请注意，`if errorlevel 1`“如果错误级别大于或等于 1”的意思是我交换了您的比较，因为`if errorlevel 0`即使错误级别等于 1 也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T13:06:28.043

我假设点是点而不是正则表达式通配符，在这种情况下，您需要告诉 FINDSTR 进行文字搜索。

FINDSTR 如果找到则返回成功，如果未找到则返回错误。如果先前的`||`命令失败，则操作员有条件地执行命令。

使用 FOR 循环单独获取每个文件，并添加一个永远不会匹配的附加文件 (nul) 以强制在输出中包含文件名。

将整个构造括在括号中并重定向整个块

```
@echo off
>summary.txt (
  for %%F in (*_chkpackage.log) do findstr /l "tcp.client" "%%F" nul||echo %%F N/A
) 
```

# frameworks - Entity Framework 5.0 获取表列的名称

> ID：13679123
> 
> 赞同：3
> 
> 时间：2012-12-03T07:49:46.473
> 
> 标签：frameworks, mapping, entity

有谁知道，我如何获取实体的列名，因为它们在数据库中命名？

例如，我已将映射类中的属性映射到某些列名：

```
public class BewegungMap : EntityTypeConfiguration<Bewegung>
{
    public BewegungMap()
    {
        // Primary Key
        this.HasKey(t => t.Id);

        // Properties
        this.Property(t => t.TechnicalKey).HasMaxLength(200);

        // Column Mappings
        this.Property(t => t.TechnicalKey).HasColumnName("BWG_TechnicalKey");
        ...
    }
} 
```

如何以编程方式获取实体“Bewegung”的映射列名称（例如“BWG_TechnicalKey”）？

提前谢谢了。

# java - Rich:modalpanel 向导行为不起作用

> ID：13679128
> 
> 赞同：0
> 
> 时间：2012-12-03T07:50:12.440
> 
> 标签：java, richfaces, wizard

我在 Rich:modal 面板中的类似向导的行为有问题。我已经阅读了教程和这个[http://maxkatz.sys-con.com/node/1428854/mo​​bile](http://maxkatz.sys-con.com/node/1428854/mobile)和这个[http://www.mkyong.com/jsf2/jsf-form-action-navigation-rule-example /](http://www.mkyong.com/jsf2/jsf-form-action-navigation-rule-example/)。但他们都没有任何帮助。我的代码如下：

**面孔配置：**

```
 <!-- WizardProject -->
    <navigation-rule>
    <from-view-id>/widgets/wizard/ProjectStep.xhtml</from-view-id>
    <navigation-case>
        <from-action>#{projectWizard.goNext}</from-action>
        <from-outcome>SUCCESS</from-outcome>
        <to-view-id>/widgets/wizard/InfoStep.xhtml</to-view-id>
    </navigation-case>
    <navigation-case>
        <from-action>#{projectWizard.goNext}</from-action>
        <from-outcome>FAIL</from-outcome>
        <to-view-id>/widgets/wizard/InfoStep.xhtml</to-view-id>
    </navigation-case>
</navigation-rule> 
```

**我的富面板：**

```
<?xml version="1.0" encoding="UTF-8"?>

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:a4j="http://richfaces.org/a4j"
  xmlns:rich="http://richfaces.org/rich">

<!-- 
    Parameters:
        id - modal dialog id
        bean 
        src - firstWizardPage
 -->

 <rich:modalPanel id="#{id}" width="750" resizeable="false" autosized="true">

      <f:facet name="header">
        <h:panelGroup>
                <h:outputText  value="Wizard"/>
        </h:panelGroup>
      </f:facet>
      <h:form>
        <h:panelGroup id="test">
            <a4j:include id="wizardPage" viewId="#{src}"/>
        </h:panelGroup>
      </h:form>
    </rich:modalPanel>
</ui:composition> 
```

模态面板正确获取参数。第一个页面打开，然后调用 bean。

这是第一页 - ProjectStep.xhtml

```
<h:panelGroup xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html" 
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:a4j="http://richfaces.org/a4j" 
    xmlns:rich="http://richfaces.org/rich"
    xmlns:c="http://java.sun.com/jstl/core">

        <h:outputText value="I've opened up #{bean}" />
        <h:inputText value=" " />
        <div class="actionButtons">
        <div class="actionCancelButtons">
          <a4j:commandButton id="btnNext" 
                             value="Next" 
                             action="#{bean.goNext()}"
                             style="display:#{bean.isCanGoNext() ? '' : 'none'}"
                             reRender="test"/>

            <a4j:region>
            <a4j:commandButton  onclick="#{rich:component(id)}.hide()" 
                                value="Cancel" 
                                style="display:#{bean.isCanCancel() ? '' : 'none'}"/>
            </a4j:region>
        </div>
        </div>

</h:panelGroup> 
```

我尝试使用 ui:composition 而不是 h:panelGroup。它没有用。第二页以同样的方式实现。

当我单击下一步时，我的 bean 返回 SUCCESS 消息，但页面没有改变。

请问，有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:03:46.367

将`<redirect/>`属性添加到您的 faces_config.xml 并可能`ajaxRendered="true"`在您的`<a4j:include/>`. *绝对*确保您的导航案例正在被调用。你的 faces_config 应该看起来像

```
 <navigation-rule>
    <from-view-id>/widgets/wizard/ProjectStep.xhtml</from-view-id>
    <navigation-case>
        <from-action>#{projectWizard.goNext}</from-action>
        <from-outcome>SUCCESS</from-outcome>
        <to-view-id>/widgets/wizard/InfoStep.xhtml</to-view-id>
        <redirect/>
    </navigation-case>
    <navigation-case>
        <from-action>#{projectWizard.goNext}</from-action>
        <from-outcome>FAIL</from-outcome>
        <to-view-id>/widgets/wizard/InfoStep.xhtml</to-view-id>
        <redirect/>
    </navigation-case>
</navigation-rule> 
```

# python - 事件驱动的串口pyqt

> ID：13679131
> 
> 赞同：1
> 
> 时间：2012-12-03T07:50:33.423
> 
> 标签：python, serial-port

几个月来我一直在寻找这个问题的答案，有一个用于 QT 的 c++ 代码设计以允许串行端口通信，它的功能之一是允许定义事件驱动的串行读取和写入，代码名称是qextserialport 和代码可以在 [这里找到](http://code.google.com/p/qextserialport/)

我正在寻找一个事件驱动的代码，它允许我在 python 和 QT 中做同样的事情，我搜索了扭曲的串行通信文档，但那里没有多少。

# jquery - 使用 jQuery 将具有相同类的输入值一起计算

> ID：13679132
> 
> 赞同：2
> 
> 时间：2012-12-03T07:50:38.903
> 
> 标签：jquery, html

我需要编写一个脚本来计算工作时间。我有一张表，其中包含 6 个可能的小时数，需要在底部的字段中添加在一起。

HTML 如下所示：

```
<table>
 <tr>
  <td><input type="text" name="amount[]" class="countAmount"></td>
  <td>(...)</td>
 </tr>
 <tr>
  <td><input type="text" name="amount[]" class="countAmount"></td>
  <td>(...)</td>
 </tr>
 <tr>
  <td><input type="text" name="amount[]" class="countAmount"></td>
  <td>(...)</td>
 </tr>
 <tr>
  <td>Total: <span id="total"></span></td>
 </tr>
</table> 
```

我正在尝试将类的值`countAmount`一起计算。

我不知道从哪里开始 jQuery 代码。我尝试的一切都是无用的，但主要问题是如何处理空值以及如何将值作为 INT 处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T07:53:24.263

要查找输入：

```
var inputs = $('input.countAmount'); 
```

要转换为数字并处理空格：

```
var num = parseInt($(input).val(), 10);
if (!isNaN(num)) {
    // It's a valid number, not blank, not "a" or "q", etc.
} 
```

要遍历它们，请使用`each`.

所以：

```
var total = 0;
$('input.classAmount').each(function() {
    var num = parseInt(this.value, 10);
    if (!isNaN(num)) {
        total += num;
    }
}); 
```

...因为在循环中，`this`将是`input`，并且要获取输入的值，您不需要 jQuery，该`value`属性很好。

然后把它放在你的`total`跨度中：

```
$("#total").text(String(total)); 
```

# c# - 超网格中的 3 路排序

> ID：13679133
> 
> 赞同：0
> 
> 时间：2012-12-03T07:50:44.390
> 
> 标签：c#, winforms, sorting, ultrawingrid

我怎样才能在每列上使用 3 路排序的超网格？我是说 ：

一种。Ascendiing - 默认情况下指示升序 SortIndicator。

湾。降序 - 默认情况下指示降序 SortIndicator。

C。无排序 - 取消排序列。

注意：我已经尝试过 BeforeSortChanged 事件，但我遇到了 2 个问题：

1.  我无法获取上一列排序指示器来找出我应该何时禁用排序。

2.  我有一个异常，它说我们不能在 BeforeSortChange 事件中更改 SortIndicator

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T23:02:06.923

实现“未排序”状态并不是那么简单。数据排序后，只需在波段内重新排序即可。您可以通过应用以下代码自己查看：

```
 Infragistics.Win.UltraWinGrid.UltraGridColumn[] oldSort;

    private void Sort() {
        ultraGrid1.BeforeSortChange += new Infragistics.Win.UltraWinGrid.BeforeSortChangeEventHandler(ultraGrid1_BeforeSortChange);
        ultraGrid1.AfterSortChange += new Infragistics.Win.UltraWinGrid.BandEventHandler(ultraGrid1_AfterSortChange);
    }

    void ultraGrid1_BeforeSortChange(object sender, Infragistics.Win.UltraWinGrid.BeforeSortChangeEventArgs e) {
        oldSort = new Infragistics.Win.UltraWinGrid.UltraGridColumn[e.Band.SortedColumns.Count];
        e.Band.SortedColumns.CopyTo(oldSort, 0);
    }

    void ultraGrid1_AfterSortChange(object sender, Infragistics.Win.UltraWinGrid.BandEventArgs e) {
        for (int i = 0; i < oldSort.Length; i++) {
            for (int j = 0; j < e.Band.SortedColumns.Count; j++) {
                Infragistics.Win.UltraWinGrid.UltraGridColumn column = e.Band.SortedColumns[j];
                if (column.Key == oldSort[i].Key) {
                    if (column.SortIndicator == Infragistics.Win.UltraWinGrid.SortIndicator.Ascending) {
                        //column.SortIndicator = Infragistics.Win.UltraWinGrid.SortIndicator.None;
                        e.Band.SortedColumns.Remove(column.Key);
                        j--;
                        break;
                    }
                }
            }
        }
    } 
```

我的猜测是，您需要保留一个单独的数组，其中包含行索引，并根据数组在删除排序后重新排序带内的行。但在我看来，这可能会消耗内存。

另一种方法是有一个额外的隐藏列，它可以用简单的 for 循环中递增的整数填充。一旦列的排序被“删除”，您只需将升序排序应用于该隐藏列。但是，还有其他方面需要使用这种方法进行维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T06:27:50.413

我通过使用 UIElement.GetContext() 在我的网格的 Mouse Up 事件处理程序中找到单击的列解决了我的问题，然后我检查了该列的 sortIndicator 属性并将其更改为我想要的。

**编辑 ：**

```
private void Grid_MouseUp(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Left)
    {
        UIElement element = Grid.DisplayLayout.UIElement.ElementFromPoint(new Point(e.X, e.Y));
        if (element == null)
            return;

        ColumnHeader clickedHeader = (ColumnHeader)element.GetContext(typeof(ColumnHeader), true);

        UltraGridColumn clickedColumn;

        if (clickedHeader != null)
            clickedColumn = clickedHeader.Column;

        if (clickedColumn == null)
            return;

        Switch ( clickedColumn.SortIndicator)
        {
           case SortIndicator.Ascending :
               clickedColumn.SortIndicator= SortIndicator.Descending;
               break;
           case SortIndicator.Descending :
               clickedColumn.SortIndicator= SortIndicator.Disabled;
               break;
           case SortIndicator.Disabled :
           default :
               clickedColumn.SortIndicator= SortIndicator.Ascending;
               break;
        }
    }
} 
```

# pdf - iTextSharp 5.3.3：替换第一个文档中的页面并插入第二个文档中的页面而不是它们

> ID：13679139
> 
> 赞同：0
> 
> 时间：2012-12-03T07:51:27.023
> 
> 标签：pdf, pdf-generation, itextsharp

原谅我英语不好。我想替换第一个文档中的页面并插入第二个文档中的页面而不是它们。我使用 itextsharp 5.3.3。第二份文档的页面包含图片。我的代码：

```
reader1:=New iTextSharp.text.pdf.PdfReader (file_name_1);

reader2:=New iTextSharp.text.pdf.PdfReader (file_name_2);

Document:= New iTextSharp.text.Document();

Document.Compress:=False;

For i:=4 To reader1.NumberOfPages Do

reader1.SetPageContent(i,reader2.GetPageContent(i));    

End For;

Stamper:=New iTextSharp.text.pdf.PdfStamper(reader1, New System.IO.FileStream(new_file_name, System.IO.FileMode.CreateNew));

stamper.Close(); 
```

结果，新文档中的图像混淆了。我究竟做错了什么？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:38:09.173

您的代码在许多层面上都是错误的。您正在复制内容流而不复制任何资源。我再也不想看到这样的代码了，永远！

请阅读[http://www.manning.com/lowagie2/samplechapter6.pdf](http://www.manning.com/lowagie2/samplechapter6.pdf)

完成任务的最佳方法是使用`PdfCopy`. 创建两个`PdfReader`对象，然后添加来自第二个阅读器的 4 个 PdfImportedPage 对象，然后添加来自`PdfImportedPage`第 5 页的第一个阅读器的对象。

使用以下代码示例获取灵感：

[http://itextpdf.com/examples/iia.php?id=123](http://itextpdf.com/examples/iia.php?id=123)

[http://kuujinbo.info/iTextInAction2Ed/index.aspx?ch=Chapter06&ex=Concatenate](http://kuujinbo.info/iTextInAction2Ed/index.aspx?ch=Chapter06&ex=Concatenate)

如果您发现一个页面建议使用您的原始方法，请告诉我，以便我可以采取措施删除该页面。如果您在 itextpdf.com 上找到此页面，请不要在未阅读文档的情况下使用这些示例！

# c++ - 第一个包不能用非阻塞 tcp 套接字发送

> ID：13679143
> 
> 赞同：0
> 
> 时间：2012-12-03T07:52:12.017
> 
> 标签：c++, linux, tcp

我正在编写一个带有 TCP 协议的工具。该工具模拟1000个TCP客户端，当socket fd添加到500左右时，后续创建socket无法发送数据，send函数返回EAGAIN。为什么？

我所有的 TCP 套接字都是非阻塞的。

例如：

我的测试日志：

```
12 2012-12-03 23:21:56:41005 tang_dts_serv_task.cpp:55 [3] [17294] dts zero channel acc.[confid:41075200][userid:860194970]
 13 2012-12-03 23:21:56:41509 send_task_mgr.cpp:49 [3] [17348] send task mgr.[cmdcode:4354][fd:1026]
 14 2012-12-03 23:21:56:41529 data_send_task.cpp:51 [2] [17348] dts send task.[cmdcode:4354][fd:1026][port:25789]
 15 2012-12-03 23:21:56:41543 os_sock.cpp:15 [0] [17348] send error.[fd:1026][errno:11] 
```

刚刚创建了 1026 套接字，但是第一个包无法发送。

我的记忆：

```
Ubuntu 8.04.4 LTS
Linux VM-Ubuntu203001 2.6.24-24-server #1 SMP Fri Sep 18 17:24:10 UTC 2009 i686 GNU/Linux 
```

发送部分：

```
void DataSendTask::ProcessMsg(message *msg)
{
    tcm_message *tm;
    DtsContext *ctx;
    ClientEntity *cli;

    size_t transfer_bytes;
    char *d_buf;
    int buf_len;
    int retval;
    EventHandler *handler;
    Reactor *reactor;

    tm = (tcm_message*)msg->content;
    ctx = (DtsContext*)tm->ctx;

    handler = ctx->event_handler();
    reactor = handler->reactor();

    SendBuffer &s_buf = ctx->send_buf();
    SockStream &stream = ctx->sock_stream(); 
    cli = ctx->client_entity();

    int sock_state = ctx->GetSockState();
    if (sock_state != DtsContext::CS_CONNECTED){
        LOG_ERROR("data send task socket state exception! [fd:%d][sockstate:%d]" ,stream.sock_fd() , sock_state);
        delete tm;
        tm = NULL;

        return;
    }

    struct sockaddr_in localaddr;
    socklen_t addr_len;
    addr_len = sizeof(localaddr);

    OsSock::GetSockName(stream.sock_fd() , (struct sockaddr*)&localaddr , &addr_len);
    int port = localaddr.sin_port;
    LOG_INFO("dts send task.[cmdcode:%d][fd:%d][port:%d]",msg->msg_code , stream.sock_fd() , port);

    //1\. Wei need to see wheter the half_package have unsend bytes.
    buf_len = s_buf.GetHalfPackageLength();

    if (buf_len > 0){
        transfer_bytes = 0;
        d_buf = s_buf.GetHalfPackagePointer();
        retval = stream.Send(d_buf , buf_len , MSG_NOSIGNAL , &transfer_bytes); 
        if (retval <= 0){
            LOG_ERROR("dts half send error.[fd:%d][send_bytes:%d][transfered_bytes:%d]" ,stream.sock_fd(),buf_len,transfer_bytes);
            if (retval == OS_SOCK_EAGAIN){
                //register event handler
                reactor->RegisterHandler(handler , EventHandler::EM_WRITE);
            }else if (retval == OS_SOCK_PEER_CNN_CLOSED){
                //connect again?
                ClientMgr::Instance()->ClientOffline(cli);
            }else{
                //error,print log info,continue;
            }

            s_buf.SaveLeftData(d_buf-transfer_bytes , buf_len - transfer_bytes);
            delete tm;
            tm = NULL;

            return;
        }

        s_buf.SetHalfPackageLength(0);

        LOG_DEBUG("dts half send success.[bytes:%d][fd:%d]",retval , stream.sock_fd());
    }

    PriorityQueue<DtsRtpPackage> &squeue = ctx->send_queue();
    while(1){
        //1\. Get message from priority queue.
        DtsRtpPackage *data = squeue.Dequeue();

        if (data == NULL)
            break;

        d_buf = (char *)data; 
        buf_len = data->m_size + 4;

        transfer_bytes = 0;
        retval = stream.Send(d_buf , buf_len , MSG_NOSIGNAL  , &transfer_bytes); 
        if (retval <= 0){
            LOG_ERROR("dts send error.[fd:%d][send_bytes:%d][transfered_bytes:%d]" ,stream.sock_fd(),buf_len,transfer_bytes);

            if (retval == OS_SOCK_EAGAIN){
                //register event handler
                reactor->RegisterHandler(handler , EventHandler::EM_WRITE);
            }else if (retval == OS_SOCK_PEER_CNN_CLOSED){
                //connect again?
                ClientMgr::Instance()->ClientOffline(cli);
            }else{
                //error,print log info,continue;
            }

            s_buf.SaveLeftData(d_buf-transfer_bytes , buf_len - transfer_bytes);
            tang_mfree(data);

            break;
        }
        LOG_DEBUG("dts send success.[bytes:%d][fd:%d]",retval , stream.sock_fd());

        tang_mfree(data);
    }

    delete tm;
    tm = NULL;

    LOG_DEBUG("dts send over.[fd:%d]", stream.sock_fd());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:28:59.947

当您使用非阻塞套接字时，您必须预料到有时您会在必须阻塞的时候尝试操作。这就是非阻塞套接字的本质。当他们本来会被阻止时，他们会返回一个错误。

您的代码如下：

```
 retval = stream.Send(d_buf , buf_len , MSG_NOSIGNAL , &transfer_bytes); 
    if (retval <= 0){
        LOG_ERROR("dts half send error.[fd:%d][send_bytes:%d][transfered_bytes:%d]" ,stream.sock_fd(),buf_len,transfer_bytes);
        if (retval == OS_SOCK_EAGAIN){ // <- HERE
            //register event handler
            reactor->RegisterHandler(handler , EventHandler::EM_WRITE);
        }else if (retval == OS_SOCK_PEER_CNN_CLOSED){
            //connect again?
            ClientMgr::Instance()->ClientOffline(cli);
        }else{
            //error,print log info,continue;
        } 
```

所以它已经正确处理了这种情况，当有可用的缓冲区空间时重试写入。我只是将代码更改为不记录`OS_SOCK_EAGAIN`或`OS_SOCK_PEER_CNN_CLOSED`，因为这些实际上不是错误，而是正常的预期条件。

# android - 将图像添加到 Facebook 事件

> ID：13679144
> 
> 赞同：0
> 
> 时间：2012-12-03T07:52:34.683
> 
> 标签：android, events, facebook-graph-api

我有以下代码并且事件已成功创建，我想为事件添加图像。请帮忙！

```
 Bundle params = new Bundle();
    params.putString("name", "This is a test event");
    params.putString("start_time", "2013-12-02T18:00:00+0530");
    params.putString("end_time", "2013-12-02T20:00:00+0530");
    params.putString("description", "This is test description yeah?.");
    params.putString("location", "Mount Lavinia");
    //params.putString("location_id", "");
    params.putString("privacy_type", "OPEN");
    mAsyncRunner.request("me/events", params, "POST", new RequestListener() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:11:39.670

使用 source 参数将图片添加到事件中。基本上源标签接受字节数组形式的参数。因此，**创建一个字节数组**（使用算法将图片转换为字节数组）并在捆绑请求中**使用 putbytearray 设置源标签**，并使用事件 ID、参数和 POST 方法调用 facebook 请求，就像这样 -`response = facebook.request(eventid + "/picture", picture_parameters, "POST");`不要**忘记设置访问令牌**具有发布流权限。

# java - 持有用户信息的服务器

> ID：13679147
> 
> 赞同：0
> 
> 时间：2012-12-03T07:52:53.313
> 
> 标签：java

我正在尝试为自己编写一个用于教育目的的游戏服务器。我需要某种列表，其中包含所有在线用户、他们的姓名以及他们的 X 和 Y 位置。

拿着这个最聪明的方法是什么？我在想某种多维数组或数组列表？代码示例也会很棒，我对 Java 很陌生 :-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T07:55:37.540

做一个`ArrayList`你可能会打电话的班级`User`。

您可以在该类中保存所有信息，例如用户名、x 和 y 位置。

我意识到这是一个非常笼统的答案，但这是一个非常笼统的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:03:28.237

我猜你必须有一个数据库来永久保存你的用户信息。当用户在线时，他的信息将保存在 bean 中。例如，您应该阅读 JSF 中的 Java Bean Scopes。

# python - Python 二维码不一致

> ID：13679150
> 
> 赞同：0
> 
> 时间：2012-12-03T07:52:55.393
> 
> 标签：python, ubuntu, qr-code

我对[python-qrcode](https://github.com/lincolnloop/python-qrcode)有一个非常奇怪的问题。

我已经让它在我们的开发环境中工作了一段时间，没有任何问题。我们使用它来创建两个二维码，它们都包含几乎完全相同长度的 URL（一个包含一个额外的字母和两个额外的斜杠）。这两个代码的大小必须完全相同，这一点至关重要。

自从我们大约五个月前设置 python-qrcode 以来，我们生成的每个 qrcode 的大小都完全相同，没有失败。但是，我们现在已经将所有内容推送到生产服务器，突然我们遇到了问题。

基本上，我们生成的代码之一比正常代码大（这是带有三个额外字符的代码）。另一个代码是正确的大小。这两个代码是使用完全相同的函数生成的，我们只是传递不同的 URL 进行编码。

在我的本地机器和我们的开发服务器上，所有 qrcode 的大小完全相同（包括带有额外字符的那个），但在生产服务器上，较长的一个更大，而另一个是正确的。

我们使用 Git 版本控制，因此服务器之间的所有文件/功能等都是相同的。设置之间的唯一区别是 Ubuntu 的版本（生产服务器上的 12.04 与 12.10），但我不明白为什么会导致这个问题。

如果两个代码都更大，我可以理解，但我无法弄清楚为什么只有一台服务器上的一个会比另一个大......？

如果有人可以就从哪里开始解决这个问题提出任何建议，我将不胜感激！

编辑：

以下是相关代码：

```
myQrGenerator = qrcode.QRCode(
    version=QRCODE_SIZE,
    error_correction=qrcode.constants.ERROR_CORRECT_M,
    box_size=QRCODE_BOX_SIZE,
    border=QRCODE_BORDER_SIZE
)

myQrGenerator.add_data('%s%s/' % (theBaseUrl, str(theHash)))
myQrGenerator.make(fit=True) 
```

我们从 local_settings.py 中获取这些变量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:48:34.500

经过长时间的讨论，确定两台服务器使用不同的 URL。喷出较大 QR 码（就 QR 像素而言，随后以图像像素而言）的那个溢出，它可以存储的预定义大小的比特限制是不够的，并`qrcode`通过增加数量使其适合它可以存储的数据。

为了解决这个问题，`fit`设置`False`为提供溢出约束，并`version`从一开始就增加以容纳更多位。`box_size`可以减少一点以或多或少地保持原始图像大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:34:45.743

可能在盒子上安装[PIL的方式有所不同。](http://www.pythonware.com/products/pil/)查看[python-qrcode 源代码](https://github.com/lincolnloop/python-qrcode/blob/master/qrcode/image/pil.py)，它确实：

```
try:
    from PIL import Image, ImageDraw
except ImportError:
    import Image, ImageDraw 
```

看看当你这样做时会发生什么：

```
from PIL import Image, ImageDraw 
```

在每台机器上。无论哪种方式，如果它真的不是应用程序代码中的错误（确保每个盒子上都有相同的代码），听起来这将是因为 PIL 在 Ubuntu 12.10 和 12.04 上构建自身的方式存在一些差异，可能是由于它用于编译的一些不同的头文件/库。查看确保 PIL 安装与其他框一致。

# c++ - 通用双向链表的复制构造函数

> ID：13679156
> 
> 赞同：0
> 
> 时间：2012-12-03T07:53:31.250
> 
> 标签：c++

```
template <class T>
class list
{
public:
    //stuff
    list(const list &cctorList); //cctor
private:
    struct node
    {
       node *next;
       node *previous;
       T *info;
    }

    node *firstNode; //pointer to the first node (NULL if none)
    node *lastNode; //pointer to the last node (NULL if none)
} 
```

我现在正在尝试定义`list(const list &cctorList); //cctor`，但我遇到了麻烦。

这是我到目前为止所拥有的：

```
template <class T>
list<T>::list(const list &cctorList)
{
    node *another = new node;
    firstNode = another;
    another->previous = NULL;
    another->info = new T(*(cctorList->info));

    // ...
} 
```

到目前为止一切都正确吗？有没有办法让我递归分配`another->next`？另外，有没有更简单的方法来使用迭代器来完成这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:07:18.627

1.  你应该使用`std::list`. 实际上，您应该使用`std::vector`，因为对于大多数实际目的来说它更快（列表只有在对象非常大或构建起来非常昂贵时才会更快）并且您不需要随机访问。

2.  `new T(*(cctorList->info));`不会编译，因为`cctorList`( `list&`) 没有`operator->`并且它也没有`info`成员。

3.  复制构造函数最好根据其他更原始的操作（如`push_back`迭代）来实现。所以首先做这些，然后复制构造函数变成：

    ```
    template <class T>
    list<T>::list(const list &cctorList)
    {
        std::copy(begin(cctorList), end(cctorList), std::back_inserter(this));
    } 
    ```

    事实上，我只是模板该构造函数：

    ```
    template <class T, class Collection> list(const Collection &cctorList) 
    ```

    （身体保持不变）。它用作复制构造函数，但也允许从任何其他可以隐式转换为 T 的任何类型的集合进行复制。

4.  实际数据应按*值*保存。即`node`应该定义为

    ```
    struct node
    {
        node *next;
        node *previous;
        T info;
    } 
    ```

    无论如何，您都在复制该值，因此您无需针对何时进行两次单独的分配`node`以及`T`何时进行分配。

* * *

编辑：你说你想学习概念。但现代 C++ 最重要的概念是算法的组合。他们的定义通常是微不足道的。的基本实现`std::copy`只是：

```
template <typename InputIterator, typename OutputIterator>
OutputIterator copy(InputIterator begin, InputIterator end, OutputIterator out) {
    for(;begin != end; ++out, ++begin) *out = *begin;
} 
```

现在这似乎没有分配任何东西。诀窍在于`back_insertion_iterator`. 插入迭代器是一种无需预先分配序列即可使其工作的技巧。它在基础集合上定义`operator*`using并忽略。这满足了“输出迭代器”的概念，因为它只保证在这两个调用严格交错时工作，并使算法可以处理从普通旧数组到输出流的许多事情。`push_back``operator++`

另一部分是虽然琐碎的定义是正确的，但它们不是库中使用的实际定义。库中的实际定义进行了优化。例如，通常`std::copy`会检查输入迭代器是否知道它们的距离，以及输出是否是插入操作符以对操作进行排序`reserve`并调用它以避免某些分配。这些是优化，取决于标准库的实现细节。

如果您想了解它们，您可以从标准库中写下事物的基本实现并测试它们的工作方式。`std::copy`但是您应该遵循标准库定义事物的方式，通过简单的辅助位（如、`std::swap`、插入迭代器适配器等）构建它们。如果你查看标准库，大多数函数都是单行的！

Edit2：尽管标准库提供了所有通用性，但仍然有人批评它不够通用。例如[GotW #84: Monoliths “Unstrung”](http://www.gotw.ca/gotw/084.htm)讨论了哪些方法`std::string`可以转换为通用算法。

# c - Matlab 的 C 包装器有问题

> ID：13679158
> 
> 赞同：1
> 
> 时间：2012-12-03T07:53:37.790
> 
> 标签：c, matlab, dll, wrapper

我目前在使用 Matlab 时遇到了一个明显愚蠢的问题，但我就是不知道出了什么问题（或者更好的是，我认为这是错误的，但有人告诉我它应该可以工作）。

我有一个 Matlab 脚本“myscript.m”，它需要使用 C 编程函数“myfunc.c”，它又在库“mylib.dll”中编译（或“生活”）。为了让“myscript.m”访问和执行“myfunc.c”，还有一个“myfunc.m”Matlab 脚本，它在“myscript.m”中被调用。然而，“myfunc.m”是一个完全空的文件，除了一些注释（也没有特定的格式或模式）。所有这些文件都给了我，我被告知，Matlab 应该正确执行“myfunc.c”，因为“myfunc.m”充当包装器。

我遇到的问题是它当然不起作用。当我执行“myscript.m”中的行时：

```
output1 = myfunc(input1, input2); 
```

我收到 Matlab 错误，说我正在尝试将脚本作为函数执行。在我看来，这是正确的，因为我将输入和请求输出发送到声明两者都没有的东西，因为“myfunc.m”是空的（注释除外，它们不是代码）。

我认为 Matlab 无法（按原样）知道我想访问“mylib.dll”中的 C 代码。我也没有头文件“mylib.h”，因此我可以使用 loadlibrary 在 Matlab 中加载库。

我的问题是，鉴于目前的描述，这种执行是否可行？有什么方法可以让它工作，或者我错过了什么？一种可能性是这是一种旧的包装格式，它目前不再起作用。

如果有人知道任何事情或有建议，他们将不胜感激。谢谢！！！

雨果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:07:50.250

听起来 myfunc.c 是一个 mex 文件。尝试使用`mex`命令在 Matlab 中编译它。`dll`扩展可能是旧版本的matlab。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T21:32:04.663

你试过[`loadlibrary`](http://www.mathworks.fr/fr/help/matlab/ref/loadlibrary.html)吗？您需要一个 .h 文件，但如果您知道函数的原型，则很容易重新创建。

# ruby-on-rails-3 - 基于铁路环境的路由错误

> ID：13679167
> 
> 赞同：0
> 
> 时间：2012-12-03T07:54:26.637
> 
> 标签：ruby-on-rails-3, rails-routing

我有这样的子域路由设置

```
constraints :subdomain => 'my' do
  scope :module => 'my', :as => 'my' do
    scope :module => 'author', :as => 'author' do
      resources :modlette_author
    end
    resources :modlettes
    root :to => 'my#index'
  end
end 
```

当我在开发环境中时，特别`config.cache_classes = false`是 my_controller 需要坐下来`app/controllers`并像这样定义：

```
class MyController < ApplicationController
  layout "my"
  before_filter :authenticate_user!

  def index

  end
end 
```

然而，在生产中，当`config.cache_classes = true`rails 想要`my_controller`加入`app/controllers/my`并定义如下：

```
class My::MyController < ApplicationController
  layout "my"
  before_filter :authenticate_user!

  def index

  end
end 
```

显然，两者都尝试是不切实际的。有没有人对我做错了什么有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:13:28.180

尝试更改`scope :module => 'my', :as => 'my' do`为，`namespace :my, path: nil do`以便它可以像在生产中一样在开发模式下工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:23:35.343

虽然亚历克斯写的内容是 100% 正确的，但比亚历克斯写的错误要多得多。我最终为路由重写了一大块，并重新组织了所有控制器路径和控制器名称。我从头开始重写所有这些，我使用了以下链接：

[导轨导轨](http://guides.rubyonrails.org/routing.html)

[Railscasts REST API 版本控制](http://railscasts.com/episodes/350-rest-api-versioning)

# c#-4.0 - 如何在 C# 中使用 CODEDOM 生成空的 get 和 set 语句

> ID：13679171
> 
> 赞同：9
> 
> 时间：2012-12-03T07:54:47.380
> 
> 标签：c#-4.0

目前我拥有的代码正在生成类似的属性

```
private int integerProperty  
         { 
            get  
            { 
                return integerField; 
            }
            set  
            { 
                integerField = value; 
            } 
        } 
```

我希望属性很简单，比如......

```
private int integerProperty  
         { 
            get;              
            set; 
         } 
```

我的代码是

```
 CodeMemberProperty property1 = new CodeMemberProperty();
        property1.GetStatements.Add(new CodeMethodReturnStatement(new CodeFieldReferenceExpression(new CodeThisReferenceExpression(), "integerField")));
        property1.SetStatements.Add(new CodeAssignStatement(new CodeFieldReferenceExpression(new CodeThisReferenceExpression(), "integerField"),new CodePropertySetValueReferenceExpression()));
        type1.Members.Add(property1); 
```

任何人请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-03T08:08:38.590

正如Botz3000所提到的，这在官方上是不可能的。但是，通过以下 hack，您可以实现它：

```
var field = new CodeMemberField
  {
      Attributes = MemberAttributes.Public | MemberAttributes.Final,
      Name = "MyProperty",
      Type = new CodeTypeReference(typeof(MyType)),
  };

  field.Name += " { get; set; }"; 
```

通过附加`{ get; set; }`到字段名称，它将在实际源代码中生成一个属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-07T13:39:53.267

这是一个老问题，但值得注意的是“@Serguei Fedorov”的答案不再适用（它仅对 c# 1.0 到 c# 2.0 有效）

替换“};”的解决方案 应该避免使用“}”，因为“};” 用于从 C# 3.0 开始的 Object 和 Collection Initializers 的语法。

查看 [Object 和 Collection Initializers](http://msdn.microsoft.com/en-us/library/bb384062.aspx)。

例子：

```
 var pet = new { Age = 10, Name = "Fluffy" };  //it's ended by "};" 
```

**替代解决方案**

您可以使用支持 C# 1.0 到 c#6.0[的新 .NET 编译器平台（“Roslyn”） 。](https://github.com/dotnet/roslyn)

[示例](https://github.com/dotnet/roslyn/tree/master/src/Samples/CSharp/ConvertToAutoProperty)包括 ConvertToAutoProperty - 一种代码重构，用于将具有简单 getter 和 setter 的简单属性更改为自动属性。

如果您对 CodeDom 感兴趣 ，可以从 nuget 安装[适用于 .NET 编译器平台（“Roslyn”）的新 CodeDOM 提供程序](https://www.nuget.org/packages/Microsoft.CodeDom.Providers.DotNetCompilerPlatform/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T08:01:41.440

不，这是不可能的。自动属性是一种特定于语言的功能，因此您找不到任何生成它们的方法。

# javascript - 结合JS函数mouseup

> ID：13679176
> 
> 赞同：-3
> 
> 时间：2012-12-03T07:55:02.400
> 
> 标签：javascript, jquery

我想组合 JS 函数，但这不起作用。有人对我的代码有建议吗？

```
$(document).ready(function(){
  $(".searchs").keyup(function() {
    var searchbox = $(this).val();
    var dataString = 'searchword='+ searchbox;
    if(searchbox=='') {
      $("#display").hide();
    } else {
      $.ajax({
        type: "POST",
        url: "searchs.php",
        data: dataString,
        cache: false,
        success: function(html) {
          $("#display").html(html).show();
        }
      });
    }
    return false;
  });
  $(".searchs").focus(function(){
    var seachbox = $(searchbox).val();
    if(seachbox != '') {
      $("#display").show();
    }
  });
});
$(document).mouseup(function(e) {
  if ($("#display").is(":visible") && $(e.target).parents$("#display").length == 0) {
    $("#display").hide();
  }
}); 
```

作为参考，我从[http://jsfiddle.net/bqQqN/15/](http://jsfiddle.net/bqQqN/15/)获得了该脚本。我想要做的是将 mouseup 函数添加到我的代码中。任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:12:11.220

如果您想将两者结合起来（尽管操作相同），您可以

```
 $(document).ready(function(){
// ... whatever is already here
    }).mouseup(function(e) {
      if ($("#display").is(":visible") && $(e.target).parents$("#display").length == 0) {
        $("#display").hide();
      }
    }); 
```

# java - iText - 使用 mytable.writeSelectedRows 的 PdfPTable RowSpan

> ID：13679178
> 
> 赞同：1
> 
> 时间：2012-12-03T07:55:12.943
> 
> 标签：java, itext

我正在使用 iText 5.1.3，我想在我的 Pdf 文档中添加一个标题。我使用了此处发布的已知解决方案：http: [//itextpdf.com/examples/iia.php ?id=104](http://itextpdf.com/examples/iia.php?id=104)

该解决方案使用了类，并在完成每个页面后`PdfPageEventHelper`重写了添加标题的方法。`onEndPage()`上面链接中提供的示例工作正常，因为它添加了一个表格作为文档的标题。我试图用 1 个差异做完全相同的事情，我希望该表中的某些单元格具有 Rowspan 和/或 Colspan。

我试过了，发现使用`table.writeSelectedRows()`与. 这是我正在尝试做的一个示例：`document.add(table)``Rowspan``onEndPage`

```
PdfPTable mytable = new PdfPTable(3);
mytable.setTotalWidth(527);
PdfPCell cell1 = new PdfPCell(new Phrase("Hello"));
cell1.setColspan(2);
cell1.setRowspan(2);
mytable.addCell(cell1);

PdfPCell cell2 = new PdfPCell(new Phrase("Girls !"));
mytable.addCell(cell2);

PdfPCell cell3 = new PdfPCell(new Phrase("Boys !"));
mytable.addCell(cell3);

mytable.writeSelectedRows(0, -1, 34, 803, writer.getDirectContent()); 
```

而不是在左侧有一个带有“Hello”的2x2单元格，而是将“Hello”单元格作为1x2而不是2x2

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T09:35:40.390

好吧..我自己找到了解决方案：D它只是替换`mytable.writeSelectedRows(0, -1, 34, 803, writer.getDirectContent());`为以下内容：

```
ColumnText column = new ColumnText(writer.getDirectContent());
column.addElement(mytable);
column.setSimpleColumn(-12, -20, 604, 803); // set LLx, LLy, URx, and URy of the header
column.go(); 
```

就是这样:)工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-16T00:20:10.247

当我使用 iText-2.1.7 时，iText writeSelectedRows 不适用于 rowSpan，rowSpan 单元格不会增长到其他行，但它有一个解决方法。

```
ArrayList tmp = table.getRows(0, table.getRows().size());
table.getRows().clear();
table.getRows().addAll(tmp);
table.writeSelectedRows(0, -1, x, y, directContent); 
```

# google-chrome - 从 chrome 扩展如何检查页面上是否存在 web 元素？

> ID：13679180
> 
> 赞同：1
> 
> 时间：2012-12-03T07:55:17.177
> 
> 标签：google-chrome, google-chrome-extension

我正在尝试构建一个 chrome 扩展，它可以让我检查打开的页面上是否存在某些元素。有人可以在这里帮助我。当我使用下面的代码时，它给出空值。

清单.json

```
{
  "name": "A browser action with a popup that changes the page color.",
  "version": "1.0",
  "permissions": [
    "tabs", "http://*/*", "https://*/*"
  ],
  "browser_action": {
      "default_title": "Set this page's color.",
      "default_icon": "icon.png",
      "default_popup": "popup.html"
  },
  "manifest_version": 2
} 
```

popup.html

```
<!doctype html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="popup.js"></script>
  </head>
</html> 
```

popup.js

```
if(jQuery('#nav').is(':visible')==true){
    alert("true");
}else {
        alert("false");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:59:49.553

您必须使用“内容脚本”，它将在您指定的页面上运行。仅当用户单击您的扩展按钮时才会调用弹出页面。

```
{
    ...,
    "content_scripts": [
        {
            "matches": [
                "*"
            ],
            "js": [
                "script.js"
            ]
        }
    ],
    ...
} 
```

更多信息在这里：http: [//developer.chrome.com/extensions/content_scripts.html](http://developer.chrome.com/extensions/content_scripts.html)

此外，在检查时，首先检查元素是否实际存在，然后检查它的可见性：

```
val $nav = jQuery('#nav');
if( $nav.length > 0 && $nav.is(':visible')==true){
    alert("true");
}else {
    alert("false");
} 
```

# jakarta-mail - Javamail 配置说明

> ID：13679186
> 
> 赞同：1
> 
> 时间：2012-12-03T07:55:55.527
> 
> 标签：jakarta-mail

如果我想通过我的应用程序使用 Javamail API 在任意两个外部电子邮件地址之间发送电子邮件，例如**gmail->yahoo**或**yahoo->gmail**或任何其他电子邮件帐户，而不使用身份验证机制，我应该如何配置**mail.smtp.host**属性？

配置 javamail 属性以在任意两个外部电子邮件地址之间发送电子邮件的正确方法是什么？

发送邮件的示例代码如下：

```
Session session = Session.getDefaultInstance(new Properties(),null);
MimeMessage message = new MimeMessage(session);   
message.setFrom(new InternetAddress("test@gmail.com"));  
InternetAddress[] toAddress = {new InternetAddress("test@yahoo.com")};  
message.setRecipients(Message.RecipientType.TO, toAddress);  
message.setSubject("test mail");  message.setText("test body");  
Transport.send(message); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T18:33:59.590

这是给gmail的，试试吧。你需要`mail.jar`

```
public static void main(String[] args) {
    final String username = "yourId@gmail.com";
    final String password = "your-pwd";

    Properties props = new Properties();
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.starttls.enable", "true");
    props.put("mail.smtp.host", "smtp.gmail.com");
    props.put("mail.smtp.port", "587");

    Session session = Session.getInstance(props,
            new javax.mail.Authenticator() {
                protected PasswordAuthentication getPasswordAuthentication() {
                    return new PasswordAuthentication(username, password);
                }
            });

    try {

        Message message = new MimeMessage(session);
        message.setFrom(new InternetAddress("yourId@gmail.com"));
        message.setRecipients(Message.RecipientType.TO,
                InternetAddress.parse("some-mail@gmail.com"));
        message.setSubject("A Mail Subject");
        message.setText("Hey I'm sending mail using java api");

        Transport.send(message);

        System.out.println("Done");

    } catch (MessagingException e) {
        throw new RuntimeException(e);
    }

} 
```

**编辑 ：**

[下载](http://www.oracle.com/technetwork/java/index-138643.html)Java 邮件 Api 的链接以及`mail.jar`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T18:25:25.330

大多数公共邮件服务器都需要身份验证。如果您想在没有身份验证的情况下执行此操作，则需要运行自己的邮件服务器。

# java - 如何在 ImageView Android 上添加标记/图钉？

> ID：13679189
> 
> 赞同：11
> 
> 时间：2012-12-03T07:56:15.370
> 
> 标签：java, android, imageview, android-canvas, marker

我想问一下如何在 imageView 上实现或添加标记。我使用 svglib 渲染了一个 SVG，并使用了一个 customImageView，以便我可以缩放和平移图像。

这是我如何使用我的 customImageView 的代码

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        SVG svg;
        switch (mNum) {

        case 1:
            svg = SVGParser.getSVGFromResource(getResources(), R.raw.t1);
            break;
        case 2:
            svg = SVGParser.getSVGFromResource(getResources(), R.raw.t2);
            break;
        case 3:
            svg = SVGParser.getSVGFromResource(getResources(), R.raw.t3);
            break;
        case 4:
            svg = SVGParser.getSVGFromResource(getResources(), R.raw.t4);
            break;
        default:
            svg = SVGParser.getSVGFromResource(getResources(),
                    R.raw.android);

        }

        View v = inflater.inflate(R.layout.hello_world, container, false);
        View tv = v.findViewById(R.id.text);
        imageView = (GestureImageView) v.findViewById(R.id.imageView1);
        imageView.setStrict(false);
        imageView.setStartingScale(lastScale);
        // if(lastXPosition!=0 && lastYPosition!=0)
        imageView.setStartingPosition(lastXPosition, lastYPosition);
        // Log.i("tag",
        // "lastXPosition" + lastXPosition);
        // Log.i("tag",
        // "lastYPosition" + lastYPosition);
        // Log.i("tag",
        // "lastScale" + lastScale);
        // imageView.setRotation(45);
        // imageView.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
        if (Build.VERSION.SDK_INT > 15)
            imageView.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
        imageView.setImageDrawable(svg.createPictureDrawable());
        ((TextView) tv).setText("Floor number: " + mNum);
        imageView.setBackgroundColor(Color.WHITE);
        // tv.setBackgroundDrawable(getResources().getDrawable(
        // android.R.drawable.gallery_thumb));
        // imageView.setScaleType(ScaleType.CENTER);
        // ((GestureImageView)imageView).setScale(x);
        return v;
    } 
```

现在我想添加一个图钉，如下图所示......

[![我的问题](../Images/f34fb0d7fea7776ba0f9a3195c281174.png)](https://i.stack.imgur.com/ocg1R.png)
[（来源：[modality.com](http://www.modality.com/images/appimages/130/screens/645/large.png)）]

但我的问题是，当我在标记周围平移时，我添加的标记没有与图像 SVG 结合，因此在平移时会留在某个位置......

这是我的代码...注意：尚未最终确定...我仍在寻找一种方法来使其正常工作，并且我正在使用放大的图像视图作为地图...

```
@Override
protected void onDraw(Canvas canvas) {

    if (layout) {
        if (drawable != null && !isRecycled()) {
            canvas.save();

            float adjustedScale = scale * scaleAdjust;

            canvas.translate(x, y);

            if (rotation != 0.0f) {
                canvas.rotate(rotation);
            }

            if (adjustedScale != 1.0f) {
                canvas.scale(adjustedScale, adjustedScale);
            }

            drawable.draw(canvas);

            canvas.restore();
        }

        if (drawLock.availablePermits() <= 0) {
            drawLock.release();
        }
    }

    // ---add the marker---
    Bitmap marker = BitmapFactory.decodeResource(getResources(),
            R.drawable.search_marker_icon);
    canvas.drawBitmap(marker, 40, 40, null);
    Paint mPaint = new Paint();
    mPaint.setColor(Color.RED);
    canvas.drawCircle(60, 60, 5, mPaint);
    super.onDraw(canvas);
} 
```

谢谢....我是android的新手:)希望你能帮助我....

![我的问题](../Images/29bcafb3fdc3be4597236cc9c91d8ff0.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-07-16T09:51:20.850

这是一个很好的显示图像库，它支持缩放/平移和在图像上添加引脚 [https://github.com/davemorrissey/subsampling-scale-image-view](https://github.com/davemorrissey/subsampling-scale-image-view)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T08:13:35.133

```
 drawable.draw(canvas);

// ---add the marker---
Bitmap marker = BitmapFactory.decodeResource(getResources(),
        R.drawable.search_marker_icon);
canvas.drawBitmap(marker, 40, 40, null);
Paint mPaint = new Paint();
mPaint.setColor(Color.RED);
canvas.drawCircle(60, 60, 5, mPaint);

        canvas.restore();
    }

    if (drawLock.availablePermits() <= 0) {
        drawLock.release();
    }
}
 super.onDraw(canvas);
} 
```

您需要在 canvas.restore 之前执行此操作......：D 去年得到了这个解决方案......谢谢帮助......我的应用程序快完成了 :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T11:02:15.877

在 Android 视图中实现类似 HTML 地图的元素：

*   支持图像作为可绘制或布局中的位图
*   允许在 xml 中列出区域标签
*   允许对资源 xml 使用剪切和粘贴 HTML 区域标签（即，能够获取 HTML 地图 - 和图像并在最少编辑的情况下使用它）
*   如果图像大于设备屏幕，则支持平移
*   支持捏缩放
*   支持点击区域时的回调。
*   支持将注释显示为气泡文本并在点击气泡时提供回调

试试这个链接你会找到你的解决方案[https://github.com/catchthecows/AndroidImageMap](https://github.com/catchthecows/AndroidImageMap)

# sharepoint-2010 - webservice中的sharepoint对象模型

> ID：13679192
> 
> 赞同：0
> 
> 时间：2012-12-03T07:56:46.710
> 
> 标签：sharepoint-2010

我正在创建一个 Web 服务来为另一个应用程序提供一个用户属性值。为了做同样的事情，我使用共享点对象模型连接到 mysite。

代码：spsite站点=新站点（mysite url）

但我收到以下错误，请帮忙。

错误：System.IO.FileNotFoundException：找不到“mysite url”处的 Web 应用程序。验证您是否正确键入了 URL。如果 URL 应该服务于现有内容，系统管理员可能需要将新的请求 URL 映射添加到预期的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:16:57.423

我可以想到两件事可能是您的问题的原因：

- 如果您的 SharePoint 是 64 位，则您的应用程序必须以 64 位构建。这同样适用于 x86。

- 应用程序中的 Target Framework 选项需要设置为 3.5

编辑：我找到了一篇关于它的文章。也许你可以从中受益。

[http://blogs.technet.com/b/stefan_gossner/archive/2011/09/19/common-issue-new-spsite-returns-quot-the-web-application-at-http-server-port-could-找不到-quot.aspx](http://blogs.technet.com/b/stefan_gossner/archive/2011/09/19/common-issue-new-spsite-returns-quot-the-web-application-at-http-server-port-could-not-be-found-quot.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:20:19.250

如果这是一个 WCF 服务，那么默认情况下没有 httpcontext，ergo，没有 spcontext。修复方法是在 web.config 中启用“asp.net 兼容模式”。这是通过以下指令完成的：

```
<serviceHostingEnvironment aspNetCompatibilityEnabled="true"/> 
```

# java - 不能在 Eclipse 中使用 MigLayout，但它可以在 Groovy 控制台中使用

> ID：13679194
> 
> 赞同：1
> 
> 时间：2012-12-03T07:56:54.807
> 
> 标签：java, eclipse, groovy, miglayout

我正在使用 Windows 7、Eclipse 4.2.1 和（尝试使用）MigLayout 4.0。

我已经下载了 miglayout-4.0-swing.jar，将其添加到我的类路径并在 Groovy 控制台中成功运行以下脚本：

```
import groovy.swing.SwingBuilder
import groovy.swing.factory.LayoutFactory
import javax.swing.WindowConstants as WC
import net.miginfocom.swing.MigLayout

def swing = new SwingBuilder()
swing.registerBeanFactory('migLayout', MigLayout)

swing.build {
    frame(id: 'eventScrollPanel', pack: true, show: true,
      defaultCloseOperation: WC.EXIT_ON_CLOSE) {
        migLayout(layoutConstraints: "fill, debug", columnConstraints: "",
        rowConstraints: "")
        panel() {
            label(text: "test")
        }
    }
} 
```

在 Eclipse 中，我已将外部 jar 文件添加到我的 JDK 并检查它是否出现在 Project => Properties => Java Build Path => Libraries tab => JRE System Library [jdk1.7.0_09] 中。但是，脚本失败并出现以下错误：

```
Caught: java.lang.ExceptionInInitializerError
java.lang.ExceptionInInitializerError
    at net.miginfocom.layout.UnitValue.<init>(Unknown Source)
    at net.miginfocom.layout.UnitValue.<clinit>(Unknown Source)
    at net.miginfocom.layout.PlatformDefaults.<clinit>(Unknown Source)
    at net.miginfocom.swing.MigLayout.<init>(Unknown Source)
    at net.miginfocom.swing.MigLayout.<init>(Unknown Source)
    at MigLayoutExamples$_run_closure1_closure2.doCall(MigLayoutExamples.groovy:12)
    at MigLayoutExamples$_run_closure1_closure2.doCall(MigLayoutExamples.groovy)
    at MigLayoutExamples$_run_closure1.doCall(MigLayoutExamples.groovy:10)
    at MigLayoutExamples$_run_closure1.doCall(MigLayoutExamples.groovy)
    at MigLayoutExamples.run(MigLayoutExamples.groovy:9)
Caused by: java.lang.NullPointerException
    at net.miginfocom.layout.LayoutUtil.hasBeans(Unknown Source)
    at net.miginfocom.layout.LayoutUtil.<clinit>(Unknown Source)
    ... 10 more 
```

此外，脚本第 12 行开头的 migLayout 引用由 Eclipse 加下划线，即 Eclipse 无法解析该引用。

感谢所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:24:40.987

看起来这[条线](http://code.google.com/p/miglayout/source/browse/core/src/main/java/net/miginfocom/layout/LayoutUtil.java?r=7e186c67e3c8126b72d628f79156cf27c3c75037#70)是罪魁祸首。

```
LayoutUtil.class.getClassLoader().loadClass("java.beans.Beans"); 
```

最新的 jar 是 4.2，这个问题似乎已经用`try-catch`块修复了。
试试这些罐子。它们可从 Maven 存储库获得。[http://mvnrepository.com/artifact/com.miglayout/miglayout-swing/4.2](http://mvnrepository.com/artifact/com.miglayout/miglayout-swing/4.2)
[http://mvnrepository.com/artifact/com.miglayout/miglayout-core/4.2](http://mvnrepository.com/artifact/com.miglayout/miglayout-core/4.2)

# c++ - 如何使用相同的调用签名索引和分配张量中的元素？

> ID：13679195
> 
> 赞同：4
> 
> 时间：2012-12-03T07:56:55.197
> 
> 标签：c++, arrays, vector, matrix, variable-assignment

好的，我已经在谷歌上搜索了太久，我只是不确定如何称呼这种技术，所以我认为最好在 SO 上问一下。如果它有一个明显的名称和/或我忽略的解决方案，请指出我正确的方向。

对于外行来说：*张量*是矩阵的逻辑扩展，就像矩阵是向量的逻辑扩展一样。向量是 rank-1 张量（在编程术语中，一维数字数组），矩阵是 rank-2 张量（二维数字数组），然后 rank-N 张量只是 ND 数字数组.

现在，假设我有这样的张量类：

```
template<typename T = double> // possibly also with size parameters
class Tensor
{
  private: 
    T *M;  // Tensor data (C-array)
           // alternatively, std::vector<T> *M 
           // or std::array<T> *M 
           // etc., or possibly their constant-sized versions
           // using Tensor<>'s template parameters

  public: 

    ... // insert trivial fluffy stuff here 

    // read elements
    const T & operator() (size_t a, size_t b) const {
        ... // error checks etc.
        return M[a + rows*b];
    }

    // write elements
    T & operator() (size_t a, size_t b) {
        ... // error checks etc.
        return M[a + rows*b];
    }

    ... 

}; 
```

使用 的这些定义`operator()(...)`，索引/分配单个元素然后具有相同的调用签名：

```
Tensor<> B(5,5);
double a = B(3,4);   // operator() (size_t,size_t) used to both GET elements
B(3,4) = 5.5;        // and SET elements 
```

将其扩展到任意张量等级是相当简单的。但我希望能够实现的是一种更高级的索引/分配元素的方式：

```
Tensor<> B(5,5);
Tensor<> C = B( Slice(0,4,2), 2 );  // operator() (Slice(),size_t) used to GET elements
B( Slice(0,4,2), 2 ) = C;           // and SET elements 
         // (C is another tensor of the correct dimensions) 
```

我知道`std::valarray`（以及许多其他人）已经做了非常相似的事情，但仅仅*完成*行为并不是我的目标；我的目标是学习如何**优雅**、**高效**、**安全地**将以下功能添加到我的`Tensor<>`课程中：

```
// Indexing/assigning with Tensor<bool>
B( B>0 ) += 1.0;   

// Indexing/assigning arbitrary amount of dimensions, each dimension indexed 
// with either Tensor<bool>, size_t, Tensor<size_t>, or Slice()
B( Slice(0,2,FINAL), 3, Slice(0,3,FINAL), 4 ) = C; 

// double indexing/assignment operation
B(3, Slice(0,4,FINAL))(mask) = C;  // [mask] == Tensor<bool>

.. etc. 
```

请注意，我打算`operator[]`将`operator()`. 或者，我将更多地坚持`std::vector<>`使用`.at()`检查版本的方法的方法`operator[]`。无论如何，这是一个设计选择，除了现在的问题。

我想出了以下不完整的“解决方案”。此方法仅对向量/矩阵（rank-1 或 rank-2 张量）真正可管理，并且具有许多不良副作用：

```
// define a simple slice class
Slice () 
{ 
  private:
    size_t 
        start, stride, end; 

  public: 
    Slice(size_t s, size_t e) : start(s), stride(1), end(e) {}
    Slice(size_t s, size_t S, size_t e) : start(s), stride(S), end(e) {}
    ...

};

template<typename T = double>
class Tensor
{
    ... // same as before

  public:       

    // define two operators() for use with slices:     

    // version for retrieving data
    const Tensor<T> & operator() (Slice r, size_t c) const {
        // use slicing logic to construct return tensor
        ...
        return M;
    {

    // version for assigning data
    Sass operator() (Slice r, size_t c) {
        // returns Sass object, defined below
        return Sass(*this, r,c);
    }

  protected:

    class Sass 
    {
        friend class Tensor<T>;

     private:        
        Tensor<T>& M;
        const Slice &R;
        const size_t c;

      public:

        Sass(Tensor<T> &M, const Slice &R, const size_t c)
            : M(M)
            , R(R)
            , c(c)
        {}

        operator Tensor<T>() const { return M; }

        Tensor<T> & operator= (const Tensor<T> &M2) {
            // use R/c to copy contents of M2 into M using the same 
            // Slice-logic as in "Tensor<T>::operator()(...) const" above
            ...

            return M;
        }

    }; 
```

但这只是感觉不对...

对于上面列出的每个索引/分配方法，我必须为每个这样的操作定义一个单独的`Tensor<T>::Sass::Sass(...)`构造函数、一个 new`Tensor<T>::Sass::operator=(...)`和一个 new 。`Tensor<T>::operator()(...)`此外，`Tensor<T>::Sass::operators=(...)`将需要包含许多已经在对应的相同内容，并且使所有内容都`Tensor<T>::operator()(...)`适合*任意等级*使这种方法变得非常丑陋，过于冗长，更重要的是，完全无法管理。`Tensor<>`

 *所以，我的印象是有一种更有效的方法来解决所有这些问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:48:19.960

首先我想指出一些设计问题：

```
T & operator() (size_t a, size_t b) const; 
```

建议您不能通过此方法更改矩阵，因为它是`const`. 但是您正在返回对矩阵元素的非常量引用，因此实际上您*可以*更改它。这仅因为您使用的原始指针而编译。我建议`std::vector`改用它，它会为您进行内存管理，并且会给您一个错误，因为 vector 的 const 版本`operator[]`提供了应有的 const 引用。

关于您的实际问题，我不确定 Slice 构造函数的参数应该做什么，也不确定 Sass 对象的含义（我不是母语人士，“Sass”在字典中只给了我一个翻译，意思是…… .如“无礼”、“无礼”）。但是，我想您希望使用切片创建一个对象，该对象可以访问由切片参数定义的矩阵子集。

我建议不要使用`operator()`各种方式访问​​矩阵。使用两个索引访问给定元素的 op() 似乎很自然。使用类似的运算符来获得整个矩阵对我来说似乎不太直观。

这是一个想法：创建一个 Slice 类，该类包含对 Matrix 的引用以及定义 Matrix 的哪个部分由 Slice 表示的必要参数。这样，Slice 就像是它定义的 Matrix 子集的代理，类似于一对迭代器，可以看作是它们指向的容器子范围的代理。给您的 Matrix 提供一对`slice()`返回 Slice/ConstSlice 的方法（const 和 nonconst），引用您调用该方法的 Matrix。这样，您甚至可以对方法进行检查，以查看 Slice 的参数对于它所引用的 Matrix 是否有意义。如果有意义且有必要，您还可以添加一个转换运算符，将 Slice 转换为它自己的 Matrix。

一次又一次地重载 operator() 并将参数用作掩码，因为线性索引和其他东西比帮助 imo 更令人困惑。`operator()`如果它做了每个人都期望的自然的事情，那么它就是光滑的。如果它在任何地方使用，它只会混淆代码。改用命名方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:48:40.453

如果你允许你的张量隐含地是一个双精度，你可以只从你的 operator() 重载中返回张量。

```
operator double() { 
    return M.size() == 1 ? M[0] : std::numeric_limits<double>::quiet_NaN(); 
}; 
```

这应该允许

```
double a = B(3,4);
Tensor<> a = B(Slice(1,2,3),4); 
```

让 operator() 使用 Slice 和 integer 处理多个重载是另一个问题。我可能只是使用 Slice 并创建另一个隐式转换，以便整数可以是 Slice 的，然后可能使用变量参数省略。

```
const Tensor<T> & operator() (int numOfDimensions, ...) 
```

尽管可变参数路由是一种混合，最好只为 Slice 的 1-8 个参数提供 8 个特化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T10:59:08.677

不是答案，只是跟进我的评论的注释：

```
Tensor<bool> T(false);
// T (whatever its rank) contains all false
auto lazy = T(Slice(0,4,2));
// if I use lazy here, it will be all false
T = true;
// now T contains all true
// if I use lazy here, it will be all true 
```

这*可能*是您想要的，也可能是意料之外的。

一般来说，这可以与*不可变*张量一起干净地工作，但允许变异会产生与 COW 字符串相同的问题。*

# c# - 时间已过的事件不起作用，c#

> ID：13679197
> 
> 赞同：1
> 
> 时间：2012-12-03T07:56:58.240
> 
> 标签：c#, winforms, events, timer

我正在使用计时器每 2 秒将文本输出到文本框。但似乎它不起作用。知道什么是错的。这是我的代码：

```
public partial class Form1 : Form
{
    public Form1()
    {
      InitializeComponent();
    }

    public static System.Timers.Timer aTimer;

    public void BtnGenData_Click(object sender, EventArgs e)
    {
      aTimer = new System.Timers.Timer(10000);

      // Hook up the Elapsed event for the timer.
      aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);

      // Set the Interval to 2 seconds (2000 milliseconds).
      aTimer.Interval = 2000;
      aTimer.Enabled = true;
    }

    public static void OnTimedEvent(object source, ElapsedEventArgs e)
    {
      string GenData = "Welcome";
      Form1 frm1 = new Form1();
      frm1.TboxData.AppendText(GenData.ToString());
    }
} 
```

实际上我没有看到任何输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:02:15.910

问题出在这种方法中：

```
public static void OnTimedEvent(object source, ElapsedEventArgs e)
{

    string GenData = "Welcome";
    Form1 frm1 = new Form1();
    frm1.TboxData.AppendText(GenData.ToString());

} 
```

通过调用`new Form1();`您创建一个新表单。此表单被创建为隐藏，您更改了文本，但它不显示，并且在此方法结束时它被垃圾收集。你想要的是重用你现有的。完全删除此行并使用您现有的表格。默认情况下，名称应为`form1`

```
public static void OnTimedEvent(object source, ElapsedEventArgs e)
{

    string GenData = "Welcome";
    form1.TboxData.AppendText(GenData.ToString());

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T08:04:32.387

尽管这与您在代码中遇到的问题没有直接联系，但是...

从 MSDN [System.Timers.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)：

> 基于服务器的 Timer 设计用于多线程环境中的工作线程。

在 Windows 窗体中，您可以使用[System.WindowsForms.Timer](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)：

```
 System.Windows.Forms.Timer timer;

    public Form1()
    {
        InitializeComponent();

        timer = new Timer();
        timer.Interval = 1000;
        timer.Tick += new EventHandler(timer_Tick);
    }

    public void BtnGenData_Click(object sender, EventArgs e)
    {
        BtnGenData.Enabled = false;
        timer.Start();
    }

    void timer_Tick(object sender, EventArgs e)
    {
        timer.Stop();
        BtnGenData.Enabled = true;

        //do what you need
    } 
```

* * *

至于您的代码，为什么要使计时器静态？尝试使用这个：

```
 public partial class Form1 : Form
 {
    public Form1()
    {
        InitializeComponent();
    }

    public System.Timers.Timer aTimer;

    public void BtnGenData_Click(object sender, EventArgs e)
    {
        aTimer = new System.Timers.Timer(10000);
        aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);
        aTimer.Interval = 2000;
        aTimer.Enabled = true;
    }

     public void OnTimedEvent(object source, ElapsedEventArgs e)
     {
        this.TboxData.AppendText("Welcome");
     } 
 } 
```

您还应该考虑，如果您按两次按钮会发生什么...

# jquery - jsTree节点点击事件

> ID：13679200
> 
> 赞同：2
> 
> 时间：2012-12-03T07:57:10.323
> 
> 标签：jquery, jstree

每当单击任何 jsTree 节点时，我都想重定向到某个 mypage.aspx 页面（与 jsTree 节点关联的 ID 将传递给该页面，并且页面将相应地呈现）。我在 jsTree 中遵循了代码。

```
<script type="text/javascript">
     $(function () {
         $("#mydiv").jstree({
             "plugins": ["themes", "json_data"],
             "json_data": {
                 "ajax": {
                     "async": false,
                     // the URL to fetch the data
                     "url": "../Handlers/HandleRequest.aspx",
                     "data": function (n) {
                         return {
                             "PassID": "<% = UserNameCtrlID %>"
                         };
                     }
                 }
             },
             // Configuring the search plugin
             "search": {},
             "types": {},
             "ui": { "initially_select": ["node_4"] },
             "core": { "initially_open": ["node_2", "node_3"] }
         });
     });
    </script> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T17:02:02.240

老问题，但这是我为使其工作所做的。

*   绑定 JStree

    ```
    "plugins" : [ "types", "themes", "json_data" ,"ui"]
    }).bind("select_node.jstree", function(event, data) { 
    ```

*   进行ajax调用以获取数据并将下一页所需的数据作为隐藏变量传递。

    ```
    $.ajax({
            type: "POST",  
            url: "getMyData.do",  
            data: inputParam,  
     contentType: "application/x-www-form-urlencoded;charset=UTF-8",  
         success: function(response) {  
        var url = '<%=request.getContextPath()%>/nextPage.do';  
              // rediret to next page  
                  window.location.replace(url);  
                    }  
        }); 
    ```

*   在 MVC 控制器中 - 设置会话属性并在重定向的 jsp 中读取它。

*   在 JSP 中将隐藏字段转换为 JSON，然后您可以遍历它。

# c# - 使用 BouncyCastle PGP 解密文件的异常

> ID：13679204
> 
> 赞同：3
> 
> 时间：2012-12-03T07:57:20.200
> 
> 标签：c#, console-application, bouncycastle, encryption, pgp

我试图使用一个名为 PgpDecrypt 的类来解密客户端给出的这个示例文件。但是当代码来到这一行时：

```
Stream clear = pbe.GetDataStream(privKey); 
```

它返回一个错误： **异常解密密钥**

这是我的解密代码：

```
PgpDecrypt test = new PgpDecrypt(string.Concat(pathh, "TestDecryptionFile"),
                                             string.Concat(pathh, "mypgpprivatekey.key"),
                                             "mypassphrase",
                                             @"d:/test/",
                                             string.Concat(pathh, "clientpublickey.key"));

FileStream fs = File.Open(string.Concat(pathh, "TestDecryptionFile"), FileMode.Open);
test.Decrypt(fs, @"d:\test\"); 
```

我使用 BouncyCastle 作为我的 .NET 第三方库。

任何解决这个问题的想法都会有很大帮助。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-08T10:19:31.330

如果您正在关注 BouncyCastle 类 PGPEncrypt、PGPDecrypt 和 PGPEncryptionKeys...

在 PGPEncryptionKeys 类下，添加此方法：

```
/// <summary>
/// Return the last key we can use to decrypt.
/// Note: A file can contain multiple keys (stored in "key rings")
/// </summary>
private PgpSecretKey GetLastSecretKey(PgpSecretKeyRingBundle secretKeyRingBundle)
{
    return (from PgpSecretKeyRing kRing in secretKeyRingBundle.GetKeyRings()
            select kRing.GetSecretKeys().Cast<PgpSecretKey>()
                                            .LastOrDefault(k => k.IsSigningKey))
                                            .LastOrDefault(key => key != null);
} 
```

仍在 PgpEncryptionKeys 类中，确保 ReadSecretKey 方法如下所示：

```
private PgpSecretKey ReadSecretKey(string privateKeyPath, bool toEncrypt)
{
    using (Stream keyIn = File.OpenRead(privateKeyPath))
    using (Stream inputStream = PgpUtilities.GetDecoderStream(keyIn))
    {
        PgpSecretKeyRingBundle secretKeyRingBundle = new PgpSecretKeyRingBundle(inputStream);
        PgpSecretKey foundKey = toEncrypt ? GetFirstSecretKey(secretKeyRingBundle) : GetLastSecretKey(secretKeyRingBundle);

        if (foundKey != null)
            return foundKey;
    }
    throw new ArgumentException("Can't find signing key in key ring.");
} 
```

^_^

# windows - 代码签名服务器的 FLOSS 解决方案 (Windows)

> ID：13679206
> 
> 赞同：1
> 
> 时间：2012-12-03T07:57:24.180
> 
> 标签：windows, service, windows-services, code-signing

有谁知道允许我将文件包发送到远程代码签名服务器进行签名的 FLOSS 解决方案？目前的方法是使用 SSH 或 RDP 登录到远程机器。为此提供专门的服务可能会更容易集成到构建过程中。重要的部分是身份验证方法必须是安全的。

# talend - tAccessInput 组件显示错误

> ID：13679207
> 
> 赞同：1
> 
> 时间：2012-12-03T07:57:30.543
> 
> 标签：talend

在我的工作中使用 tAccessInput 组件时，它显示错误，例如，

```
It may not be a database that your application recognizes, or the file may be corrupt. 
```

但是，所有连接和数据库/表名称在我的工作中都是有效的。可能是什么问题。我该如何解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:11:45.270

提及确切的 DBVersion 对于 tAccessInput/tAccessOutput 更为重要。像 Access 2003/Access 2007 和相关的数据库文件名。

![在此处输入图像描述](../Images/3a676b9212b7568903771ffb65be9f37.png)

# objective-c - GNUstep 安装

> ID：13679212
> 
> 赞同：-2
> 
> 时间：2012-12-03T07:58:04.027
> 
> 标签：objective-c, gnustep

我将如何在 Linux 中安装 GNUStep？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:27:38.023

首先，确保您设置了启动脚本的路径。在运行任何 GNUstep 二进制文件之前，每个 shell 都必须调用它们一次。像这样的东西

. /usr/local/share/GNUstep/Makefiles/GNUstep.sh

（不要错过第一个点和后面的空格）

您可以直接从主干安装东西。这里有一些来自 Etoile 项目的有用脚本。它获取 svn 并为您安装东西。您也可以查看脚本并忽略 Etoile 位。

[http://svn.gna.org/svn/etoile/trunk/Etoile/BuildScripts/](http://svn.gna.org/svn/etoile/trunk/Etoile/BuildScripts/)

AFAICR，使用分销商的软件包不是一个好主意，它们维护不善，损坏，应该避免。

而且你应该放弃 gcc 来使用 clang。

另外，请查看 Philippe Roussel 的包存储库。我从来没有使用过它们。

[http://lists.gnu.org/archive/html/discuss-gnustep/2012-10/msg00034.html](http://lists.gnu.org/archive/html/discuss-gnustep/2012-10/msg00034.html)

# prolog - Prolog - 如何在 prolog 中实现嵌套函数？

> ID：13679215
> 
> 赞同：0
> 
> 时间：2012-12-03T07:58:08.160
> 
> 标签：prolog

我需要在下面写规则：

编写谓词 take(L,N,L1) 的规则，如果列表 L1 包含列表 L 的前 N ​​个元素，则以相同的顺序成功。以下查询显示了使用此谓词的示例：

```
?- take([5,1,2,7], 3, L1).
L1 = [5,1,2]
?- take([5,1,2,7], 10, L1).
L1 = [5,1,2,7] 
```

我的想法是随时删除两个列表的第一个数字，直到 L1 为空。我也在想我可以使用 car([X|_], X) 每次删除最后一个数字，直到第一个列表==第二个列表。我已经写了长度（L，Len），但我不知道下一步该怎么做......

我的代码是：

```
take(L,X,[]).(I know it miss something, but I don't know how to do...)
take(H|L,N,H|L1):- take(L,X,L1), N is X-1. 
```

==========================更新======================== ==========================谢谢1638891！现在，代码是

```
 take(L,0,[]).
    take([H|L],N,[H|L1]):- take(L,X,L1), N is X+1. 
```

但它在第二种情况下不起作用，即

```
 ?- take([5,1,2,7], 10, L1).
   L1 = [5,1,2,7] 
```

我试图添加

```
 take([],X,[])->!. 
```

但它会弹出“错误：is/2：参数没有充分实例化”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:52:42.393

你实际上想写 X 是 N - 1。

```
take(L,0,[]).
take([H|L],N,[H|L1]):- take(L,X,L1), X is N-1. 
```

作为一般规则，请尝试大声朗读您的规则。您编写的第一条规则是“空列表是 L 中前 X 个元素的列表”。但它应该是“空列表是 L 中前 0 个元素的列表”作为基本情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:52:18.217

@user1638891 忘记交换减法，并在请求的元素多于可用元素时覆盖这种情况：

```
take(_,0,[]).
take([],_,[]).
take([H|L],N,[H|L1]) :- N > 0, X is N-1, take(L,X,L1). 
```

# grails - grails 中的页面标题显示在 body 上

> ID：13679216
> 
> 赞同：0
> 
> 时间：2012-12-03T07:58:16.633
> 
> 标签：grails, layout

当我尝试使用标题标签设置视图页面的标题时，我在页面正文上得到了这个标题，我发现头部标签是空的。这是页面的头部：

```
<head>      
        <meta name="layout" content="main">
        <title>Implementation Error</title>
        <link rel="stylesheet" href="${resource(dir: 'css', file: 'errors.css')}" type="text/css">
         <r:require modules="bootstrap"/>
</head> 
```

当页面被渲染时，我得到以下信息：

```
<body>
    Implementation Error

            <script src="/accountcontrol/static/plugins/jquery-1.7.2/js/jquery/jquery-1.7.2.min.js" type="text/javascript"></script>
        <link href="/accountcontrol/static/bundle-fixtaglib_head.css" type="text/css" rel="stylesheet" media="screen, projection">
        <link href="/accountcontrol/static/bundle-bundle_bootstrap_head.css" type="text/css" rel="stylesheet" media="screen, projection">

            <link href="/accountcontrol/css/style.css" type="text/css" rel="stylesheet">

    <script type="text/javascript" src="/accountcontrol/static/js/lputil.js"></script>
</body> 
```

这有什么问题？

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T20:14:51.330

我在 Grails 2.2 上遇到了同样的问题，它把我带到了这里。经过大量的牦牛剃须后，我发现您需要查看 main.gsp 布局文件并将布局标题标签实际包装在标题标签中，如下所示：

```
 <title><g:layoutTitle/></title> 
```

一旦我这样做了，问题就消失了。我一定看过[这个](http://grails.org/doc/latest/guide/theWebLayer.html#layouts)页面一百万次，但没有看到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:52:29.570

检查您的“主要”布局并确保在 head 部分中定义了“g:layoutTitle”标签。有关详细信息，请参阅[layoutTitle 文档](http://grails.org/doc/latest/ref/Tags/layoutTitle.html)。

# javascript - ASP.NET 按钮，仅当 OnClientClick 返回 true 时才执行 OnClick

> ID：13679219
> 
> 赞同：3
> 
> 时间：2012-12-03T07:58:28.720
> 
> 标签：javascript, asp.net, web-services

我有一个看起来像这样的按钮：

```
<asp:Button ID="btnSave" runat="server" CssClass="SubmitButton" Text="Order >>" OnClientClick="return SaveChanges();" OnClick="btnSave_Click" /> 
```

一个看起来像这样的 javascript 函数：

```
function SaveChanges() {
    var success = false;

    var arr1 = new Array();
    var arr2 = new Array();
    var arr3 = new Array();
    for (var i = 0; i < self.frames.length-1; i++) {
        arr1[i] = document.getElementById("frame" + i.toString()).contentWindow.getFramePSFID();
        arr2[i] = document.getElementById("frame" + i.toString()).contentWindow.getFrameHeading();
        arr3[i] = document.getElementById("frame" + i.toString()).contentWindow.saveSvg();
    }

    Scripts.WebServices.WSCommon.SaveChanges(arr1, arr2, arr3, function (result) {
        return true;
    });
} 
```

所在的块`return true;`是 Web 服务调用（需要几秒钟）完成并返回结果后发生的情况。不管我放什么，`btnSave_Click`总是触发。（如果我删除`btnSave_Click`并更改`return true;`为`alert('test');`，则会触发警报。）。

一旦 Web 服务返回 true ，我需要做什么才能强制`btnSave_Click`触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:02:14.540

`function`在您的 Web 服务调用中是异步调用返回时要执行的回调方法。

但你的`SaveChanges`方法不会等到那时。

我认为您可以做到这一点的一种方法是在您的网络表单中添加一个隐藏字段或向您的输入按钮添加一个额外的（您自己的）属性。在回调方法中将其值设置为某个有意义的值。在调用 webService 之前检查此值.. 如果找到返回 true，否则调用您的 webService 并返回 false。

并且还添加代码以在回调方法中使用 jQuery 或 javascript 来单击您的按钮，而不是返回 true..

像这样的东西

```
function SaveChanges() {

   //your array code..

    if (<check_your_hidden_field_value>){
        return true;
    }else{
        Scripts.WebServices.WSCommon.SaveChanges(arr1, arr2, arr3, function (result) {

            //set your hiddenfield data here..

            document.getElementById('<%= btnSave.ClientID %>').click();//click button
        });
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T08:04:58.387

稍微调整一下怎么样`SaveChanges()`：

```
function SaveChanges() {
    var success = false;

    var arr1 = new Array();
    var arr2 = new Array();
    var arr3 = new Array();
    for (var i = 0; i < self.frames.length-1; i++) {
        arr1[i] = document.getElementById("frame" + i.toString()).contentWindow.getFramePSFID();
        arr2[i] = document.getElementById("frame" + i.toString()).contentWindow.getFrameHeading();
        arr3[i] = document.getElementById("frame" + i.toString()).contentWindow.saveSvg();
    }

    Scripts.WebServices.WSCommon.SaveChanges(arr1, arr2, arr3, function (result) {
        success = true;
        btnSave_Click();
    });

    return success;
} 
```

# arrays - stacks -java 与数组实现

> ID：13679223
> 
> 赞同：1
> 
> 时间：2012-12-03T07:59:22.840
> 
> 标签：arrays, stack

编写一个程序，将以下信息保存在书籍上：

```
Book title
Barcode
Author Name
Price
Edition 
```

来自十个不同作者的书籍需要以这样一种方式堆积，以便用户一次可以访问一本书的信息。

注意：对堆栈使用数组实现。您的程序应验证以下内容：

*   将 10 多本书添加到您的堆栈中。
*   当您的堆栈为空时删除书籍。

我创建了类 Book 来保存书籍信息（条形码，.....）我创建了 10 个类 book 对象并将每个对象保存在数组中。

那么呢？*>

# list - Prolog中的列表移位

> ID：13679228
> 
> 赞同：3
> 
> 时间：2012-12-03T07:59:37.100
> 
> 标签：list, prolog, failure-slice

以下代码导致无限循环，最终出现“Out of Local Stack”错误。基本上，我将 GX 的值递减，直到它与 MX 相同。样本输入 [[m,g,b],[w,w,w]],路径

```
wallBlock('w').
wallBlock('b').
item('f').
item('p').
item('m').
item('u').
item('6').
item('r').
item('g').
anyCell(Cell) :- 
    wallBlock(Cell).
anyCell(Cell) :-
    item(Cell).

ghostPathing(Maps, Path) :-
    append(Maps, NewMap), 
    length(Maps, N), 
    findGhost(NewMap, N, GX, GY), 
    findPacman(NewMap, N, MX, MY),
    moveGhost(NewMap, N, MX, MY, GX, GY, Path).

/*FINDS THE COORDINATES OF THE GHOST W=row X=column*/
findGhost(NewMap, N, X, Y) :-
    findGhostSpot(NewMap, S),
    X is floor(S / N) + 1,
    Y is (S mod N) +1 .

findGhostSpot(['g'|_], 0) :-
    print('Found Ghost. ').
findGhostSpot(['r'|_], 0) :-
    print('Found Ghost. ').
findGhostSpot(['6'|_], 0) :-
    print('Found Ghost. ').
findGhostSpot([_|Tail], S) :-
    findGhostSpot(Tail, S1),
    S is S1+1 .

/*FINDS THE COORDINATES OF THE GHOST W=row X=column*/
findPacman(NewMap, N, X, Y) :-
    findPacmanSpot(NewMap, S),
    X is floor(S / N) + 1,
    Y is (S mod N) + 1.

findPacmanSpot(['m'|_], 0) :-
    print('Found Pacman. ').
findPacmanSpot([_|Tail], S) :-
    findPacmanSpot(Tail, S1),
    S is S1+1 .

/* Base Case, Ghost is on the Pacman*/
moveGhost(_, _, X, Y, X, Y, []).

/*IF PACMAN AND THE GHOST ARE IN THE SAME COLUMN*/
moveGhost(NewMap, N, MX, Y, GX, Y, ['u'|Rest]) :-
    itemNext(NewMap, CN, Z),
    item(Z),
    moveGhost(NewMap, N, MX, Y, X, Y, Rest),
    GX is X + 1,
    MX < GX,
    CN is ((X * N) + Y).
moveGhost(NewMap, N, MX, Y, GX, Y, ['d'|Rest]) :-
    itemNext(NewMap, CN, Z),
    item(Z),
    moveGhost(NewMap, N, MX, Y, X, Y, Rest),
    GX is X - 1,
    MX > GX,
    CN is ((X * N) + Y).

/*IF PACMAN AND THE GHOST ARE IN THE SAME ROW*/
moveGhost(NewMap, N, X, MY, X, GY, ['l'|Rest]) :-
    itemNext(NewMap, CN, Z),
    item(Z),
    moveGhost(NewMap, N, X, MY, X, Y, Rest),
    GY is Y + 1,
    MY < GY,
    CN is ((X * N) + Y).
moveGhost(NewMap, N, X, MY, X, GY, ['r'|Rest]) :-
    itemNext(NewMap, CN, Z),
    item(Z),
    moveGhost(NewMap, N, X, MY, X, Y, Rest),
    GY is Y - 1,
    MY > GY,
    CN is ((X * N) + Y).

itemNext([Cell|_], 0, Cell) :-
    item(Cell). 
itemNext([First|Rest], CN, Cell) :-
    anyCell(First),
    itemNext(Rest, N, Cell),
    CN is N + 1. 
```

因为它是一个 2d 数组，所以 append 将其转换为 1d 并且 NextCell 中的算术采用一行的长度并找到相邻单元格的坐标并返回该单元格的值。如果单元格是“w”或“b”，则幽灵不能朝那个方向移动。你可以假设地图是方形的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:57:10.953

（我假设你的问题是你的程序为什么会循环。）

为了确定您的程序未终止的原因，我已**`false`**在您的程序中插入了目标。由于剩余程序（**故障片**）不会终止，因此您的原始程序也不会终止。您需要修复剩余可见部分中的某些内容。或者，换种说法：只要当前的fragment不变，问题就会一直存在！作为一个小评论，最好避免`print/1`像你这样的纯程序中的目标。

有关更多信息，请参阅标签[故障切片](/questions/tagged/failure-slice "显示标记为“故障切片”的问题")

```
?- ghostPathing([[m,g,b],[w,w,w]],Path), false。

项目（'f'）：-**假**。
项目（'p'）：-**假**。
项目（'m'）。
项目（'u'）：-**假**。
项目（'6'）：-**假**。
项目（'r'）：-**假**。
项目（'g'）。

anyCell(Cell) :- **false** ,
     wallBlock(Cell)。
任何细胞（细胞）： -
    项目（单元格）。

ghostPathing（地图，路径）：-
    附加（地图，新地图），
    长度（地图，N），
    findGhost(NewMap, N, GX, GY),
    findPacman(NewMap, N, MX, MY),
    moveGhost(NewMap, N, MX, MY, GX, GY, 路径), false。

/*找到幽灵的坐标 W=row X=column*/
findGhost(NewMap, N, X, Y) :-
    findGhostSpot(NewMap, S),
    X是地板（S / N）+ 1，
    Y 是 (S mod N) +1 。

findGhostSpot(['g'|_], 0) :-
    print('发现幽灵。').
findGhostSpot(['r'|_], 0) :- **false** ,
     print('Found Ghost.')。
findGhostSpot(['6'|_], 0) :- **false** ,
     print('Found Ghost.')。
findGhostSpot([_|尾巴], S) :-
    findGhostSpot（尾巴，S1），
    S 是 S1+1 。

/*找到幽灵的坐标 W=row X=column*/
findPacman(NewMap, N, X, Y) :-
    findPacmanSpot(NewMap, S),
    X是地板（S / N）+ 1，
    Y 是 (S mod N) + 1。

findPacmanSpot(['m'|_], 0) :-
    print('找到吃豆子。').
findPacmanSpot([_|Tail], S) :- **false** ,
     findPacmanSpot(Tail, S1) ,
     S 是 S1+1。

/* 基本情况，Ghost 在 Pacman*/
moveGhost(_, _, X, Y, X, Y, []) :- **false**。

/*如果吃豆人和幽灵在同一列*/
moveGhost(NewMap, N, MX, Y, GX, Y, ['u'|Rest]) :- **false** ,
     itemNext(NewMap, CN, Z) ,
     item(Z) ,
     moveGhost(NewMap, N, MX, Y, X, Y, Rest)，
     GX 是 X + 1，
     MX < GX，
     CN 是 ((X * N) + Y)。
moveGhost(NewMap, N, MX, Y, GX, Y, ['d'|Rest]) :-   **false** ,
     itemNext(NewMap, CN, Z) ,
     item(Z) ,
     moveGhost(NewMap, N, MX, Y, X, Y, Rest)，
     GX 是 X - 1，
     MX > GX，
     CN 是 ((X * N) + Y)。

/*如果吃豆人和幽灵在同一行*/
moveGhost(NewMap, N, X, MY, X, GY, ['l'|Rest]) :-
    itemNext(NewMap, CN, Z),
    项目（Z），
    moveGhost(NewMap, N, X, MY, X, Y, Rest), false ,
     GY 是 Y + 1 ,
     MY < GY ,
     CN 是 ((X * N) + Y)。
moveGhost(NewMap, N, X, MY, X, GY, ['r'|Rest]) :- **false** ,
     itemNext(NewMap, CN, Z) ,
     item(Z) ,
     moveGhost(NewMap, N, X, MY, X, Y, Rest) ,
     GY 是 Y - 1 ,
     MY > GY ,
     CN 是 ((X * N) + Y)。

itemNext([单元格|_], 0, 单元格) :-
    项目（单元格）。
itemNext([First|Rest], CN, Cell) :-
    anyCell（第一个），
    itemNext（休息，N，细胞），
    CN 是 N + 1。

```

# image-processing - 在 OpenCV 中检查像素的透明度

> ID：13679231
> 
> 赞同：1
> 
> 时间：2012-12-03T07:59:46.573
> 
> 标签：image-processing, opencv, transparency, pixel, alpha

如何检查 OpenCV 中的像素是否透明？我有一个带有透明部分的 png 图像，我想将 rgb 图像转换为 hsv，然后改变像素的色调。我需要透明像素在转换后保持透明。

请提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:44:07.577

你可以试试GDAL。它与 CV2 兼容

这些链接可能有用。

[使用 GDAL 读取栅格数据](http://www.gis.usu.edu/~chrisg/python/2009/lectures/ospy_slides4.pdf)

[GDAL API 教程](http://gdal.org/gdal_tutorial.html)

```
import gdal
from gdalconst import *
import numpy as np

ds = gdal.Open('lena.jpg', GA_ReadOnly)
B = ds.GetRasterBand(1)
G = ds.GetRasterBand(2)
R = ds.GetRasterBand(3)
A = ds.GetRasterBand(4) // Alpha

height, width = B.shape
img = np.zeros(height, width, 3)
img[:, :, 0] = B
img[:, :, 1] = G
img[:, :, 2] = R

// Do something you want

ds.GetRasterBand(1).WriteArray(new_B)
ds.GetRasterBand(2).WriteArray(new_G)
ds.GetRasterBand(3).WriteArray(new_R)
// The forth band dose not need to be changed

// Close image, the changes is writen in the source file
ds = None

// Note that I did not test this code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:53:51.760

OpenCV 不支持图像中的透明性。（v2.4之前，我不确定最新版本）

[您可以在http://blog.developer.stylight.de/2010/05/how-to-load-alpha-channel-pngs-with.html](http://blog.developer.stylight.de/2010/05/how-to-load-alpha-channel-pngs-with.html)尝试解决方案并重建 OpenCV，或者您可以使用 ImageMagick 之类的东西来提取alpha 层（[论坛链接](http://www.wizards-toolkit.org/discourse-server/viewtopic.php?f=1&t=10155&start=0)）作为单独的图像并加载它。

# ruby - awk cmd 从 STDOUT 捕获行

> ID：13679232
> 
> 赞同：0
> 
> 时间：2012-12-03T07:59:48.113
> 
> 标签：ruby, bash, rubygems, awk

以下是`gem environment`命令的输出。

```
○ gem environment
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.23
  - RUBY VERSION: 1.9.3 (2012-04-20 patchlevel 194) [x86_64-darwin10.8.0]
  - INSTALLATION DIRECTORY: /Users/userme/.rbenv/versions/1.9.3-p194/gemsets/global
  - RUBY EXECUTABLE: /Users/userme/.rbenv/versions/1.9.3-p194/bin/ruby
  - EXECUTABLE DIRECTORY: /Users/userme/.rbenv/versions/1.9.3-p194/gemsets/global/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-darwin-10
  - GEM PATHS:
     - /Users/userme/.rbenv/versions/1.9.3-p194/gemsets/global
     - .bundle
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
     - :sources => ["http://rubygems.org/"]
     - "gem" => "--no-rdoc --no-ri"
  - REMOTE SOURCES:
     - http://rubygems.org/
userme at userme in ~ 
```

在行前的条带下捕获`awk`行的命令是什么？`/Users/userme/.rbenv/versions/1.9.3-p194/gemsets/global``- GEM PATHS:``-``/Users/userme/.rbenv/versions/1.9.3-p194/gemsets/global`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:02:42.503

尝试：

```
$ gem env gempath
/home/mpapis/.rvm/gems/ruby-1.9.3-p286:/home/mpapis/.rvm/gems/ruby-1.9.3-p286@global 
```

它将显示用 PATH_SEPARATOR 分隔的所有路径，这是`:`在 linux

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T08:09:33.530

使用`awk`，您可以通过以下方式管道输出：

```
awk '{if(e){sub (/^ *- */,"",$0);print;e=0}}/GEM PATHS/{e=1}' 
```

它的工作原理如下：

*   ( `e`echo) 标志从 0 开始，因此禁用了回显。
*   对于设置了回显标志的每一行，它首先删除`<spaces>-<spaces>`行开头的 ，回显修改后的行，然后重置标志。
*   在它找到`GEM PATHS`一行的地方，它设置标志，以便使用前面的规则输出下一行。

以下是实际操作的小抄本：

```
pax> echo 'RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.23
  - GEM PATHS:
     - /Users/userme/.rbenv/versions/1.9.3-p194/gemsets/global
     - .bundle
  - GEM CONFIGURATION:
     - :update_sources => true
' | awk '{if(e){sub (/^ *- */,"",$0);print;e=0}}/GEM PATHS/{e=1}' 
```

```
/Users/userme/.rbenv/versions/1.9.3-p194/gemsets/global

```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T11:12:16.147

这是一种使用方法`sed`：

```
sed -n '/- GEM PATHS:/ { N; s/.* - //p }' file 
```

另一种使用方式`awk`，如果你熟悉使用 `getline`：

```
awk '/- GEM PATHS:/ { getline; sub(/.* - /,""); print }' file 
```

否则，这可能是您最安全的选择：

```
awk 'n && !--n { sub(/.* - /,""); print } /- GEM PATHS:/ { n = 1 }' file 
```

结果：

```
/Users/userme/.rbenv/versions/1.9.3-p194/gemsets/global 
```

# c# - 使用反射解析函数/方法内容

> ID：13679240
> 
> 赞同：4
> 
> 时间：2012-12-03T08:01:07.023
> 
> 标签：c#, unit-testing, reflection

我的单元测试框架由 TestFixtures、TestMethods 和 Actions 组成。Action是TestMethod内部额外的小容器，Actions来自我们公司内部编写的Dll。动作在这样的方法中使用：

```
[Test]
void TestMethod1()
{
    Run(new Sleep { Seconds = 10 } );
} 
```

我必须编写一个应用程序，该应用程序从 DLL 收集有关夹具、测试和操作的所有信息。我发现了如何使用类型/方法属性通过反射来枚举测试装置和测试方法。

但我不知道如何枚举测试方法中的操作。

能否请你帮忙？完全可以使用反射吗？

**更新：** 查看接受的答案。真的很酷的图书馆。如果您对我如何为夹具、测试和操作创建实体模型以及以 MVVM 方式绑定到 TreeView 感兴趣，您也可以查看此处（[WPF：以 MVVM 方式绑定 TreeView 分步教程）。](https://stackoverflow.com/questions/13789563/wpf-binding-treeview-in-mvvm-way-step-by-step-tutorial)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T08:06:12.917

是的。

反射会给你方法体，而不是你需要反汇编 IL 来读取方法体并获得你想要的任何信息。

```
var bytes = mi.GetMethodBody().GetILAsByteArray(); 
```

[Cecil](http://www.mono-project.com/Cecil)是一种可能的拆卸工具

查看[Traverse ac# 方法并分析方法主体](https://stackoverflow.com/questions/3413779/traverse-a-c-sharp-method-and-anazlye-the-method-body)以获取更多链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:09:16.953

与其使用反射，不如推出自己的方法来记录所有 Action 执行。

```
void ExecuteAction(Action action)
{
   //Log TestFixture, TestMethod, Action

   //Execute actual action
}

[Test]
void TestMethod1()
{
    ExecuteAction(Run(new Sleep { Seconds = 10 } ));
} 
```

ExecuteAction 方法可以在基类或辅助类中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T14:12:22.150

谢谢，阿列克谢列文科夫！最后，我找到了使用您的提示的解决方案。分享。您唯一应该做的事情 -> 从[https://github.com/jbevain/mono.reflection](https://github.com/jbevain/mono.reflection)下载并引用 Mono.Reflection.dll 。

```
using System;
using System.Linq;
using System.Reflection;
using MINT;
using MbUnit.Framework;
using Mono.Reflection;

namespace TestDll
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            const string DllPath = @"d:\SprinterAutomation\Actions.Tests\bin\x86\Debug\Actions.Tests.dll";
            Assembly assembly = Assembly.LoadFrom(DllPath);

            // enumerating Fixtures
            foreach (Type fixture in assembly.GetTypes().Where(t => t.GetCustomAttributes(typeof(TestFixtureAttribute), false).Length > 0)) 
            {
                Console.WriteLine(fixture.Name);
                // enumerating Test Methods
                foreach (var testMethod in fixture.GetMethods().Where(m => m.GetCustomAttributes(typeof(TestAttribute), false).Length > 0))
                {
                    Console.WriteLine("\t" + testMethod.Name);
                    // filtering Actions
                    var instructions = testMethod.GetInstructions().Where(
                        i => i.OpCode.Name.Equals("newobj") && ((ConstructorInfo)i.Operand).DeclaringType.IsSubclassOf(typeof(BaseAction)));

                    // enumerating Actions!
                    foreach (Instruction action in instructions)
                    {
                        var constructroInfo = action.Operand as ConstructorInfo;
                        Console.WriteLine("\t\t" + constructroInfo.DeclaringType.Name);
                    }
                }
            }

        }
    }
} 
```

# android - 使用网络服务实时跟踪安卓手机

> ID：13679242
> 
> 赞同：0
> 
> 时间：2012-12-03T08:01:30.717
> 
> 标签：android

我正在开发 android 应用程序，它将跟踪朋友并在 Web 应用程序上发送经度和纬度。我的应用程序也会在一段时间后从 Web 应用程序中获取数据，并根据获取的数据在地图上显示一个指针，以便在地图上展示朋友。我正在考虑这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:14:07.003

是的，将手机的位置发送到网络服务（或其他外部“代理”）是手机跟踪的唯一一种解决方案。但是，您必须考虑电池寿命问题。GPS 接收器和 3G 数据通信消耗大量能量，因此优化是必不可少的。

您还可以考虑通过 GCM 发送设备到设备的消息（无需您自己的服务器和开箱即用的异步通信）。 [http://developer.android.com/guide/google/gcm/index.html](http://developer.android.com/guide/google/gcm/index.html)

使用标准网络服务 - GPS 接收器以 1/s 的频率提供位置。如果您将每 1 秒发送一次您的位置。您的电池会在很短的时间内耗尽（取决于设备，但预计几分钟而不是几小时）。第二台设备必须经常向网络服务询问您同事的当前位置，因此会耗尽电池电量。您必须减少发送到 Web 服务的位置数量（即检查它是否已发生足够的变化）并使用一些异步解决方案将数据从 Web 服务发送到想要获悉位置变化的设备。

# java - 如何在 Android 中实现 swipeView

> ID：13679249
> 
> 赞同：2
> 
> 时间：2012-12-03T08:02:01.120
> 
> 标签：java, android, android-layout

我有两个活动布局，我想在两个布局之间在 Android 中实现一个 swipeView。

提前致谢。

```
package com.example.finalproject;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class FinalProjectActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_final_project);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_final_project, menu);
        return true;
    }

} 
```

# updatepanel - 当我使用 fullcalendar 时，updatepanel 永远不会触发 OnSelectedIndexChanged 函数

> ID：13679251
> 
> 赞同：1
> 
> 时间：2012-12-03T08:02:10.983
> 
> 标签：updatepanel, fullcalendar

我想开发一个基于全日历的网络，一切顺利，直到我遇到这个问题，我在全日历日点击时使用 jQuery 对话框，我计划使用 updatepanel 在 jQuery 对话框中建立我的下拉列表链接。但我发现 OnSelectedIndexChanged 函数从未触发。我发现当我在 上添加这段代码`style="display:block"`时`<div>`，所有代码都运行良好，当我使用 jQuery 对话框时，更新面板永远不会触发 OnSelectedIndexChanged 函数。

那么，这是否意味着我不能在 jQuery 对话框中使用更新面板？

# mysql - mysql事件不起作用

> ID：13679252
> 
> 赞同：3
> 
> 时间：2012-12-03T08:02:12.860
> 
> 标签：mysql, events, information-schema

嗨，我将此事件存储在信息模式的事件表中：

```
event_catalog:def
event_schema: m4af
event_name:aggiornaGiorni
definer:root@localhost
timezone:system
event_body:sql
event_definition:update m4af.utentibloccati set giorni=giorni+1
event_type:recurring
execute at: null
interval_value:1
interval_field:day
sql_mode:STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION
starts:2012-11-26 11:40:41
ends:null
status:enabled
on_completion:not preserve
created:2012-11-26 11:40:41
last_altered:2012-11-26 11:40:41
 last_executed:2012-11-26 11:40:41
event_comment: ""
originator:0
character_set_client:utf8
collocation_connection:utf8_general_ci
database_collation:utf8_general_ci 
```

为什么此事件不会增加我名为 utentibloccati 的表的值日？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-03T08:20:41.283

这些事件由一个特殊的事件调度线程执行；并且很有可能没有启动事件调度程序线程。使用此查询检查它 -

```
SELECT @@global.event_scheduler; 
```

结果应该是 - `ON`。否则，执行此查询以启动事件调度程序 -

```
SET @@global.event_scheduler = 1; 
```

[事件调度程序配置](http://dev.mysql.com/doc/refman/5.1/en/events-configuration.html)。

# git - 在 Git 中创建远程仓库的不同命令

> ID：13679255
> 
> 赞同：0
> 
> 时间：2012-12-03T08:02:20.990
> 
> 标签：git, git-remote

Git（VCS工具）中的这些命令有什么区别：

```
$ git init --bare
$ git init --bare --shared
$ git init --bare --shared=group 
```

你能给我解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:06:38.813

从手册页：

```
 --shared[=(false|true|umask|group|all|world|everybody|0xxx)]
       Specify that the git repository is to be shared amongst several users. This allows users belonging to the same group to push into that repository. When
       specified, the config variable "core.sharedRepository" is set so that files and directories under $GIT_DIR are created with the requested permissions. When
       not specified, git will use permissions reported by umask(2). 
```

你究竟在疑惑什么？

# google-analytics - 使用 Google Analytics SDK for Android v2 时不会出现任何崩溃或异常，我曾尝试过 EasyTracker 和 ExceptionReporter 但没用？

> ID：13679260
> 
> 赞同：4
> 
> 时间：2012-12-03T08:02:43.417
> 
> 标签：google-analytics

使用 EasyTracker：`<bool name="ga_reportUncaughtExceptions">true</bool>`

使用异常报告器：

```
UncaughtExceptionHandler myHandler = new ExceptionReporter(
    myTracker,                                        // Currently used Tracker.
    GoogleAnalytics.getInstance(),                    // GoogleAnalytics singleton.
    Thread.getDefaultUncaughtExceptionHandler());     // Current default uncaught exception handler.

Thread.setDefaultUncaughtExceptionHandler(myHandler); // Make myHandler the new default uncaught exception handler. 
```

我可以获取其他数据，例如事件，页面，但我无法获取任何崩溃和异常数据。我在我的程序中设置了一些`uncatch`异常。`crashs`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:27:25.633

如果您查看 API 文档：

```
ExceptionReporter(Tracker tracker, ServiceManager serviceManager, java.lang.Thread.UncaughtExceptionHandler originalHandler) 
```

GoogleAnalytics 没有实现 ServiceManager 接口……幸运的是 GAServiceManager 实现了。因此，如果您更改：

```
GoogleAnalytics.getInstance() 
```

到：

```
GAServiceManager.getInstance() 
```

这个对我有用

# sql-server - 每位客户仅返回 1 个地址

> ID：13679262
> 
> 赞同：0
> 
> 时间：2012-12-03T08:02:51.467
> 
> 标签：sql-server, tsql

我需要查询前 500 名客户（最佳买家）的地址。许多公司有多个地址。

有数据的表：

*   顾客信息
*   客户地址
*   交易信息
*   事务元素

我的查询是这样的：

```
select Customername, CustomerStreet --etc 
from CustomerInfo 
join CustomerAddress on CustomerID = Add_CustID
join  TransactionInfo on Trn_CustID = CustomerID
JOIN TransactionElements ON Trn_CustID = TrE_CustID

GROUP BY CustomerName, CustomerStreet --etc
ORDER BY SUM (TrE_TranValue) DESC 
```

它返回一个公司的多个地址，我只需要一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:23:57.883

像这样的东西适用于 sqlserver 2005+。我还建议在您的表中添加一些别名并参考这些别名。

```
select CI.Customername, CA.CustomerStreet --etc 
from CustomerInfo CI
cross apply 
(select top 1 Customername, CustomerStreet --etc
from CustomerAddress where CustomerID = CI.Add_CustID) CA
join  TransactionInfo TI on TI.Trn_CustID = CI.CustomerID
JOIN TransactionElements ON CI.CustomerID = TE.TrE_CustID
GROUP BY CustomerName, CustomerStreet --etc
ORDER BY SUM (TrE_TranValue) DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T08:13:51.800

如果您使用的是 SQL Server 2005 及更高版本（您在这方面不够具体），则一种方法是使用 CTE（通用表表达式）。

使用此 CTE，您可以按某些标准（即您的）对您的数据进行分区，`CustomerId`并让 SQL Server 为每个“分区”从 1 开始为您的所有行编号，并按某些标准排序。

所以尝试这样的事情：

```
;WITH CustomerAndAddress AS
(
   SELECT 
       c.Customername, ca.CustomerStreet ,
       ROW_NUMBER() OVER(PARTITION BY c.CustomerId ORDER BY ca.AddressID DESC) AS 'RowNum'
   FROM 
       dbo.CustomerInfo c
   INNER JOIN 
       dbo.CustomerAddress ca ON c.CustomerID = ca.Add_CustID       
   WHERE
      ......
)
SELECT 
   Customername, CustomerStreet 
FROM 
   CustomerAndAddress
WHERE
   RowNum = 1 
```

在这里，我只为每个“分区”（即每个`CustomerId`）选择“第一个”条目 - 按某些标准排序（我只是`AddressID`从地址中任意挑选 - 根据需要进行调整），您需要在 CTE 中定义。

这是否接近你正在寻找的东西？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T08:11:43.413

如果`CustomerInfo`有很多`CustomerAddress`，则此查询将为`CustomerInfo`每个`CustomerAddress`（笛卡尔积）返回：

`join CustomerAddress on CustomerID = Add_CustID`

因此，如果您只需要获取一个地址，则必须添加选择 single 所需的条件`CustomerAddress`：

`join CustomerAddress on CustomerID = Add_CustID where <conditions>`

# java - 使用 Java 更新 mongodb 中的 List 字段

> ID：13679265
> 
> 赞同：2
> 
> 时间：2012-12-03T08:03:02.700
> 
> 标签：java, mongodb

我有一个包含 List 作为字段之一的类。如何更新此字段。

找到更新字段的示例

```
BasicDBObject newDocument3 = new BasicDBObject().append("$set", new 
    BasicDBObject().append("type", "dedicated server"));

collection.update(new BasicDBObject().append("hosting", "hostA"), newDocument3); 
```

从链接-> [http://www.mkyong.com/mongodb/java-mongodb-update-document/](http://www.mkyong.com/mongodb/java-mongodb-update-document/)

所以这就是我尝试过的

```
BasicDBObject objectUpdateCommand = new BasicDBObject("$push", new 
    BasicDBObject("someList", stringValue));

collection.update(new BasicDBObject().append("id", user.getId()).append("email", 
    user.getEmail()), objectUpdateCommand); 
```

结果：没有变化。

我错过了什么？

在 shell 上试​​过，它有效[我知道它不匹配所有的 id，但它适用于测试目的]

```
db.user.update( { Id: 'yourid'}, {$push: { someList: 'appendNewValue'} } ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:24:17.367

我已将以下行插入到集合中。

```
{ "_id" : ObjectId("50bc89ef88555f5ad35da8ba"), "id" : 1, "email" : "test1@test.com", "list" : [ "list1", "list2" ] }
{ "_id" : ObjectId("50bc89f788555f5ad35da8bb"), "id" : 2, "email" : "test2@test.com", "list" : [ "list1", "list2" ] } 
```

然后通过使用以下代码，我可以更新 id=1 的文档。

```
BasicDBObject cmd = new BasicDBObject().append("$push", new  BasicDBObject("list", "list3"));
coll.update(new BasicDBObject().append("id", 1).append("email","test1@test.com"), cmd); 
```

更新后的行如下所示：

```
{ "_id" : ObjectId("50bc89ef88555f5ad35da8ba"), "id" : 2, "email" : "test2@test.com", "list" : [ "list1", "list2" ] }
{ "_id" : ObjectId("50bc89f788555f5ad35da8bb"), "email" : "test1@test.com", "id" : 1, "list" : [ "list1", "list2", "list3" ] } 
```

再次检查您的代码。它应该与此代码一起使用。

# c# - C# 期间验证

> ID：13679271
> 
> 赞同：-2
> 
> 时间：2012-12-03T08:04:19.167
> 
> 标签：c#, visual-studio-2010, validation

我想问是否有人知道如何限制文本框允许的期限。我正在使用 C# Visual Studio 2010。

我的问题是我需要找到验证代码，以确保用户的文本框中间首字母只允许一个句点。如果用户键入另一个句点，则该句点将不会显示在文本框中。不需要错误消息。示例是仅接受字母的验证码。这是我的这个例子的代码：

```
private void txtFirstName_KeyPress(object sender, KeyPressEventArgs e)
        {
            byte num = Convert.ToByte(e.KeyChar);

        if ((num >= 65 && num <= 90) || (num >= 97 && num <= 122) || (num == 8) || (num == 32))
        {

        }

        else if (num == 13)
        {
            e.Handled = true;
            SendKeys.Send("{Tab}");
        }
        else
        {
            e.Handled = true;
        }

    } 
```

我的 txtboxMI 目前有以下代码：

```
private void txtMI_KeyPress(object sender, KeyPressEventArgs e)
{
    byte num = Convert.ToByte(e.KeyChar);

    if ((num >= 65 && num <= 90) || (num >= 97 && num <= 122) || (num == 8) || (num == 32))
    {

    }
    else if (num == 13)
    {
        e.Handled = true;
        SendKeys.Send("{Tab}");
    }
    else
    {
        e.Handled = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:15:44.120

您必须将其设置为服务器端吗？

您可以使用[正则表达式验证器](http://www.w3schools.com/aspnet/control_regularexpvalidator.asp)。

[a-zA-Z_-.] 应该给你你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:41:05.063

尝试这个：

```
var txt = (TextBox)sender;
if ((e.KeyChar >= 'A' && e.KeyChar <= 'Z') || (e.KeyChar >= 'a' && e.KeyChar <= 'z') || e.KeyChar == 8 || e.KeyChar == 32) {
} else if (txt.Text.Contains('.') && e.KeyChar == '.') {
    e.Handled = true;
} else if (e.KeyChar == '\t') {
    e.Handled = true;
    SendKeys.Send("{Tab}");
} 
```

# c++ - 列表框动态改变宽度

> ID：13679277
> 
> 赞同：2
> 
> 时间：2012-12-03T08:04:57.063
> 
> 标签：c++, c, winapi, layout, win32gui

列表框不会自动调整大小。我们得到的最好的是：

```
SendMessage(my_listbox, LB_SETHORIZONTALEXTENT, 1000, 0); 
```

MS 有用地指出“......列表框不会动态更新其水平范围”。

^(（为什么不……但我离题了）)

如何动态设置宽度以避免截断超过 1000 像素的消息文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T08:42:50.483

如果我理解这个问题...... :-)

您基本上需要测量列表框中的所有项目并计算列表框内容的最大宽度，然后调整列表框的宽度。

[这是该项目](http://gipsysoft.com/articles/global_subclass/)的一些代码（向列表框添加自动水平滚动条）。当字体更改时会调用此代码段，但它（大致）演示了需要什么：

```
static void OnSetFont( HWND hwnd, HFONT hFont )
//
//  Font has changed!
//  We need to measure all of our items and reset the horizontal extent of the listbox
{
    CData *pData = reinterpret_cast< CData * >( ::GetProp( hwnd, g_pcszDataProperty ) );

    pData->m_hFont = hFont;

    //
    //  Set up a HDC...
    HDC hdc = GetDC( hwnd );
    HGDIOBJ hOld = SelectObject( hdc, pData->m_hFont );

    //
    //  Record the average width for use as our 'fudge factor' later.
    TEXTMETRIC tm;
    GetTextMetrics( hdc, &tm );
    pData->m_nAvergeCharWidth = tm.tmAveCharWidth;

    pData->m_nMaxWidth = 0;

    //
    //  This is used as our item buffer. Saves us from having to handle the reallocation
    //  for different string lengths
    CArray< TCHAR, TCHAR > arrBuffer;

    //
    //  Quick reference to make the code below read better
    CArray< int, int > &arrWidth = pData->m_arrItemWidth;

    //
    //  The main loop. Iterate over the items, get their text from the listbox and measure
    //  it using our friendly little helper function.
    const UINT uCount = arrWidth.GetSize();
    for( UINT u = 0; u < uCount; u++ )
    {
        const int nLength = ::SendMessage( hwnd, LB_GETTEXTLEN, u, 0 );
        arrBuffer.SetSize( nLength + 1 );
        ::SendMessage( hwnd, LB_GETTEXT, u, (WPARAM)arrBuffer.GetData() );

        const int nItemWidth = BaseMeasureItem( pData, hwnd, hdc, arrBuffer.GetData() );

        pData->m_arrItemWidth.SetAt( u, nItemWidth );
        if( nItemWidth > pData->m_nMaxWidth )
        {
            pData->m_nMaxWidth = nItemWidth;
        }
    }

    //
    //  Now, either set the horizontal extent or not, depending on whether we think we need it.
    if( pData->m_nMaxWidth > pData->m_nClientWidth )
    {
        ::SendMessage( hwnd, LB_SETHORIZONTALEXTENT, pData->m_nMaxWidth + pData->m_nAvergeCharWidth, 0 );
    }
    else
    {
        ::SendMessage( hwnd, LB_SETHORIZONTALEXTENT, 0, 0 );
    }

    //
    //  The usual release of resources.
    SelectObject( hdc, hOld );
    ReleaseDC( hwnd, hdc );
} 
```

和...

```
static int BaseMeasureItem( CData *pData, HWND hwnd, HDC hdc, LPCTSTR pcszText )
//
//  Measure and item and adjust the horizontal extent accordingly.
//  Because the HDC is already set up we can just do it.
//  We return the width of the string so our caller can use it.
{
    SIZE size;
    ::GetTextExtentPoint32( hdc, pcszText, _tcslen( pcszText ), &size ); 

    if( size.cx > pData->m_nMaxWidth )
    {

        pData->m_nMaxWidth = size.cx;

        if( pData->m_nMaxWidth > pData->m_nClientWidth )
        {
            ::SendMessage( hwnd, LB_SETHORIZONTALEXTENT, pData->m_nMaxWidth + pData->m_nAvergeCharWidth, 0 );
        }

    }

    return size.cx;
} 
```

# ios - 如何将消息从 php web 服务发送到指定的 ios 设备

> ID：13679281
> 
> 赞同：1
> 
> 时间：2012-12-03T08:05:00.547
> 
> 标签：ios, response

我有一个 ios 设备和一个用 php 编写的 web 服务。当 ios 设备向 Web 服务发送请求时，Web 服务将响应该确切的 ios 设备。我不知道服务器如何向该设备发送响应。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:13:51.987

如果它是移动网站或应用程序，您可以使用 jquery ajax 来查询您的 web 服务，如果有，它将产生响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:17:04.330

您可以研究每个单独的组件：

1) 应用程序使用回调委托方法（ASIHttpRequest 或 AFNetworking）向 Web 服务发出 HTTP POST 请求

2）服务器接收请求，解析它，然后构造一个JSON响应并自动返回给应用程序（使用Web框架）

3) 在您的应用程序的委托回调方法中，您会将 JSON 数据解析为 NSDictionary。您使用 [yourDictionary valueForKey:@"name"];、[yourDictionary valueForKey:@"age"]、[yourDictionary valueForKey:@"gender"]、[yourDictionary valueForKey:@"email"] 等提取 JSON 键值。

然后您的应用程序可以在屏幕上显示解析的数据或用它做其他事情。

## 编辑

由于您使用 PHP 作为 Web 服务语言，我推荐使用 Symfony 2 Web 框架。

你会写类似的东西

```
// get request
$inputName = $_REQUEST['name'];

// ORM
$em = $this->getDoctrine()->getManager();

// find email based on name
$member = $em->getRepository('MyWebAppWebServiceBundle:Member')->findOneByName($inputName);

...

// construct JSON array
$json = array(
    'id' => $member->getId(),
    'name' => $member->getName(),
    'email' => $member->getEmail()
);

// send the response back to the user as JSON data
$response = new Response(json_encode($json));
$response->headers->set('Content-Type', 'application/json');
return $response; 
```

或者，如果您想要可扩展的应用程序，您可以使用 Node.js（服务器端 Javascript）

# c# - 在应用 LINQ 的某个日期之间没有获得记录？

> ID：13679286
> 
> 赞同：0
> 
> 时间：2012-12-03T08:05:46.863
> 
> 标签：c#, asp.net, linq

```
 bindToGridCollection = transactionRecsCollection.
               Where(tran =>  tran.GlhDate >= durationFrom && 
                                      tran.GlhDate <= durationTo).ToList(); 
```

我只得到 2 条记录，而在我提供的日期之间应该有 7 条记录

在 transactionRecsCollection 我得到所有的记录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:10:14.783

我相信这是您在这里使用的 DateTime 结构，所以不要忘记它的时间部分。尝试以下操作，看看会发生什么。

```
bindToGridCollection = transactionRecsCollection.Where(tran =>  tran.GlhDate >= durationFrom && tran.GlhDate < durationTo.AddDays(1)).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:02:42.233

在您给定的示例中，问题可能是其中之一：

1.  tran.GlhDate 和 durationFrom 的日期格式可能不同。
2.  durationFrom 可能是字符串类型而不是日期时间。
3.  tran.GlhDate 可能是字符串类型而不是日期时间。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-03T08:10:56.717

我能想到为什么你只得到两条而不是 7 条记录的唯一原因是这`GlhDate`是一个`DateTime`带有时间部分的变量，你想包括给定日期的所有记录。

然后您可以使用[`DateTime.Date`](http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx)which 返回没有时间的日期组件：

```
bindToGridCollection = transactionRecsCollection
    .Where(tran =>  tran.GlhDate.Date >= durationFrom.Date  
                 && tran.GlhDate.Date <= durationTo.Date)
    .ToList(); 
```

# javascript - 使用 parallax.js 的所有内容左对齐和小边距

> ID：13679290
> 
> 赞同：0
> 
> 时间：2012-12-03T08:06:04.010
> 
> 标签：javascript, css, html, parallax.js

我正在将 parallax.js 用于网站，但遇到了一些问题。

似乎每次我想从右侧滚动一个 div 时，我正在滚动的 div 中的所有内容都与左侧非常对齐，并且 div 的内容都被压在左边距上。

我在这里展示我的意思：http: [//jsfiddle.net/gS8YU/8/](http://jsfiddle.net/gS8YU/8/)

难道我做错了什么？您会看到名为 div 的`test`加载正确，但是当从右侧滚动时，它会全部变形。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:15:13.227

你需要给 div 一个固定的宽度：

```
#test
{
    background-color:blue;
    width: 300px;
} 
```

[看这里。](http://jsfiddle.net/gS8YU/11/)

# android - 如何在 ListView 中获取 Spinner

> ID：13679292
> 
> 赞同：1
> 
> 时间：2012-12-03T08:06:26.130
> 
> 标签：android, listview, spinner

我的活动布局中有一个 ListView。listview_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ListView android:layout_width="wrap_content"    
        android:layout_height="wrap_content"    
        android:id="@+id/MyListView" />
</LinearLayout> 
```

我正在为 ListView 的 ListItem 使用另一种布局。

listitem_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>  
<RelativeLayout    
    android:id="@+id/RelativeLayout01"    
    android:layout_width="fill_parent"    
    xmlns:android="http://schemas.android.com/apk/res/android"    
    android:layout_height="fill_parent">  

    <TextView
        android:id="@+id/txtTitle"
        android:layout_width="80dp"
        android:layout_height="wrap_content" />

    <Spinner 
        android:id="@+id/MySpinner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</RelativeLayout> 
```

我的 Activity 的布局与 listview_layout.xml 的相同。

我使用 SimpleAdapter 引用了 listitem_layout.xml 的布局。

问题：现在我想获取 listview_layout.xm 的 Spinner 控件 ID。

我在 ListView 的活动中使用 findViewById(MySpinner)，它有空指针异常的错误。找不到。因为 Activity 布局文件使用 listview_layout.xml 中的 listview_layout.xml 和 Spinner 控件。

任何人的帮助都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T08:08:41.947

您不能直接使用 findViewById(spinnerId)。您必须覆盖自定义适配器的 getView() 方法而不是简单适配器，并在其中将 listitem_layout 膨胀为 view(v)，然后使用 v.findViewById(spinnerId)。

请参阅以下[链接](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)，这将帮助您创建自定义适配器（链接示例中的天气适配器）。在示例中 ImageView 对象是在 GetView 方法中创建的。取而代之的是，您使用 Spinner。

# hibernate - Hibernate 在使用“更新 CURRENT_TIMESTAMP 时的默认 CURRENT_TIMESTAMP”时创建没有名称的列

> ID：13679294
> 
> 赞同：3
> 
> 时间：2012-12-03T08:06:28.873
> 
> 标签：hibernate

我得到了以下实体：

```
@Entity
public class Person {

@Id
@GeneratedValue(strategy=GenerationType.AUTO)
@Column(columnDefinition="int(11)",nullable=false)
private int id;

@Column(columnDefinition="varchar(255)",nullable=false)
private String name;

@Column(columnDefinition="varchar(255)",nullable=false)
private String vorname;

@Column(columnDefinition="varchar(255)",nullable=false)
private String password;

@Column(columnDefinition="varchar(100)",nullable=false)
private String user;

@Column(columnDefinition="varchar(20)",nullable=false)
private String klasse;

@Temporal(TemporalType.TIMESTAMP)
@Column(name="timestamp",nullable = false,columnDefinition="default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP")
private Date timestamp = new Date();

public Person(){

}
@PreUpdate
public void updatePerson(){
    this.timestamp = new Date();
}

...getters
    ...setters 
```

}

调用 hibenate 时，当 hibernate 想要创建表时出现错误。似乎发生了错误，因为列时间戳没有名称：

错误：HHH000389：不成功：创建表 Person (id int(11) not null auto_increment，klasse varchar(20) not null，name varchar(255) not null，password varchar(255) not null，时间戳默认 CURRENT_TIMESTAMP 更新 CURRENT_TIMESTAMP 不是null，用户 varchar(100) 不为空，vorname varchar(255) 不为空，主键 (id)) type=MyISAM

有谁知道为什么hibernate会这样做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T09:45:45.720

这不是没有名称的列，而是没有类型的列。

Hibernate 也期望`columnDefinition`包含列类型：

```
@Temporal(TemporalType.TIMESTAMP)
@Column(name="timestamp", nullable = false,
    columnDefinition="TIMESTAMP default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP")
private Date timestamp = new Date(); 
```

# android - 无法打开数据库（预创建）

> ID：13679299
> 
> 赞同：0
> 
> 时间：2012-12-03T08:07:10.557
> 
> 标签：android, android-sqlite

```
 Here is the one more problem which i m facing this time the runnin time error am getting is Failed To open the database.. please look at my logcat file and suggest me the solution . 
```

这是错误 m 得到“无法打开数据库'/data/data/com.example.crudoperation/myDB'。12-03 13:24:33.651: E/SQLiteDatabase(798): android.database.sqlite.SQLiteCantOpenDatabaseException:未知错误（代码 14）：无法打开”。请查看 DataBaseManager 类中的代码，并为我找到一些解决方法。我已经完美地运行了此代码。但是我尝试将此代码嵌入到其他一些项目中，但在这里我得到了这个错误。

数据库管理器.java

```
package com.example.crudoperation;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;

public class DBAdapter extends SQLiteOpenHelper{

    //The Android's default system path of your application database.
    private static String DB_PATH = "/data/data/com.example.crudoperation/"; 
    private static String DB_NAME = "myDB";
    private SQLiteDatabase myDataBase; 
    private final Context myContext;
    private static String DB_IN = "firstdb";
    public static final String KEY_ROWID = "_id";
    public static final String KEY_NAME = "name";
    public static final String KEY_EMAIL = "email";
    private static final String DATABASE_TABLE = "Contact";

    /**
     * Constructor
     * Takes and keeps a reference of the passed context in order to access to the application assets and resources.
     * @param context
     */
    public DBAdapter(Context context) {
        super(context, DB_NAME, null, 1);
        this.myContext = context;
    }   

  /**
     * Creates a empty database on the system and rewrites it with your own database.
     * */
    public void createDataBase() throws IOException{
        boolean dbExist = checkDataBase();

        if(dbExist){
            //do nothing - database already exist
        }else{
            //By calling this method and empty database will be created into the default system path
               //of your application so we are gonna be able to overwrite that database with our database.
            this.getReadableDatabase();
            try {
                copyDataBase();
            } catch (IOException e) {
                throw new Error("Error copying database");
            }
        }
    }

    /**
     * Check if the database already exist to avoid re-copying the file each time you open the application.
     * @return true if it exists, false if it doesn't
     */
    private boolean checkDataBase(){
        SQLiteDatabase checkDB = null;
        try{
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
        }catch(SQLiteException e){
            //database does't exist yet.
        } 
        if(checkDB != null){
            checkDB.close();
        }

        return checkDB != null ? true : false;
    }

    /**
     * Copies your database from your local assets-folder to the just created empty database in the
     * system folder, from where it can be accessed and handled.
     * This is done by transfering bytestream.
     * */
    private void copyDataBase() throws IOException{ 
        //Open your local db as the input stream
        InputStream myInput = myContext.getAssets().open(DB_IN);

        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        //Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        //transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }

        //Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();
    }

    public void openDataBase() throws SQLException{
        //Open the database
        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);
    }

    @Override
    public synchronized void close() {
            if(myDataBase != null)
                myDataBase.close();
            super.close();
    }

  //---insert a contact into the database---
    public long insertContact(String name, String email)
    {
    ContentValues initialValues = new ContentValues();
    initialValues.put(KEY_NAME, name);
    initialValues.put(KEY_EMAIL, email);
    return myDataBase.insert(DATABASE_TABLE, null, initialValues);
    }

  //---updates a contact---
    public boolean updateContact(long rowId, String name, String email)
    {
    ContentValues args = new ContentValues();
    args.put(KEY_NAME, name);
    args.put(KEY_EMAIL, email);
    return myDataBase.update(DATABASE_TABLE, args, KEY_ROWID + "=" + rowId, null) > 0;
    }

  //---deletes a particular contact---
    public boolean deleteContact(long rowId)
    {
    return myDataBase.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;
    }

    //----Retrieving all Contacts From Database ------
    public Cursor getAllContacts()
    {
        return myDataBase.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_NAME,
                KEY_EMAIL}, null, null, null, null, null);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }

        // Add your public helper methods to access and get content from the database.
       // You could return cursors by doing "return myDataBase.query(....)" so it'd be easy
       // to you to create adapters for your views.

}

LogCat: 

12-03 13:24:33.623: E/SQLiteLog(798): (14) cannot open file at line 30174 of [00bb9c9ce4]
12-03 13:24:33.623: E/SQLiteLog(798): (14) os_unix.c:30174: (2) open(/data/data/com.example.crudoperation/myDB) - 
12-03 13:24:33.651: E/SQLiteDatabase(798): Failed to open database '/data/data/com.example.crudoperation/myDB'.
12-03 13:24:33.651: E/SQLiteDatabase(798): android.database.sqlite.SQLiteCantOpenDatabaseException: unknown error (code 14): Could not open database
12-03 13:24:33.651: E/SQLiteDatabase(798):  at android.database.sqlite.SQLiteConnection.nativeOpen(Native Method)
12-03 13:24:33.651: E/SQLiteDatabase(798):  at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:209)
12-03 13:24:33.651: E/SQLiteDatabase(798):  at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:193)
12-03 13:24:33.651: E/SQLiteDatabase(798):  at android.database.sqlite.SQLiteConnectionPool.openConnectionLocked(SQLiteConnectionPool.java:463)
12-03 13:24:33.651: E/SQLiteDatabase(798):  at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:185)
12-03 13:24:33.651: E/SQLiteDatabase(798):  at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:177)
12-03 13:24:33.651: E/SQLiteDatabase(798):  at android.database.sqlite.SQLiteDatabase.openInner(SQLiteDatabase.java:804)
12-03 13:24:33.651: E/SQLiteDatabase(798):  at android.database.sqlite.SQLiteDatabase.open(SQLiteDatabase.java:789)
12-03 13:24:33.651: E/SQLiteDatabase(798):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:694)
12-03 13:24:33.651: E/SQLiteDatabase(798):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:669)
12-03 13:24:33.651: E/SQLiteDatabase(798):  at com.example.crudoperation.DBAdapter.openDataBase(DBAdapter.java:109)
12-03 13:24:33.651: E/SQLiteDatabase(798):  at com.example.crudoperation.InsertActivity.insertRecord(InsertActivity.java:70)
12-03 13:24:33.651: E/SQLiteDatabase(798):  at com.example.crudoperation.InsertActivity$1.onClick(InsertActivity.java:52)
12-03 13:24:33.651: E/SQLiteDatabase(798):  at android.view.View.performClick(View.java:4084)
12-03 13:24:33.651: E/SQLiteDatabase(798):  at android.view.View$PerformClick.run(View.java:16966)
12-03 13:24:33.651: E/SQLiteDatabase(798):  at android.os.Handler.handleCallback(Handler.java:615)
12-03 13:24:33.651: E/SQLiteDatabase(798):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-03 13:24:33.651: E/SQLiteDatabase(798):  at android.os.Looper.loop(Looper.java:137)
12-03 13:24:33.651: E/SQLiteDatabase(798):  at android.app.ActivityThread.main(ActivityThread.java:4745)
12-03 13:24:33.651: E/SQLiteDatabase(798):  at java.lang.reflect.Method.invokeNative(Native Method)
12-03 13:24:33.651: E/SQLiteDatabase(798):  at java.lang.reflect.Method.invoke(Method.java:511)
12-03 13:24:33.651: E/SQLiteDatabase(798):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-03 13:24:33.651: E/SQLiteDatabase(798):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-03 13:24:33.651: E/SQLiteDatabase(798):  at dalvik.system.NativeStart.main(Native Method)
12-03 13:24:33.651: D/AndroidRuntime(798): Shutting down VM
12-03 13:24:33.661: W/dalvikvm(798): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
12-03 13:24:33.692: E/AndroidRuntime(798): FATAL EXCEPTION: main
12-03 13:24:33.692: E/AndroidRuntime(798): android.database.sqlite.SQLiteCantOpenDatabaseException: unknown error (code 14): Could not open database
12-03 13:24:33.692: E/AndroidRuntime(798):  at android.database.sqlite.SQLiteConnection.nativeOpen(Native Method)
12-03 13:24:33.692: E/AndroidRuntime(798):  at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:209)
12-03 13:24:33.692: E/AndroidRuntime(798):  at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:193)
12-03 13:24:33.692: E/AndroidRuntime(798):  at android.database.sqlite.SQLiteConnectionPool.openConnectionLocked(SQLiteConnectionPool.java:463)
12-03 13:24:33.692: E/AndroidRuntime(798):  at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:185)
12-03 13:24:33.692: E/AndroidRuntime(798):  at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:177)
12-03 13:24:33.692: E/AndroidRuntime(798):  at android.database.sqlite.SQLiteDatabase.openInner(SQLiteDatabase.java:804)
12-03 13:24:33.692: E/AndroidRuntime(798):  at android.database.sqlite.SQLiteDatabase.open(SQLiteDatabase.java:789)
12-03 13:24:33.692: E/AndroidRuntime(798):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:694)
12-03 13:24:33.692: E/AndroidRuntime(798):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:669)
12-03 13:24:33.692: E/AndroidRuntime(798):  at com.example.crudoperation.DBAdapter.openDataBase(DBAdapter.java:109)
12-03 13:24:33.692: E/AndroidRuntime(798):  at com.example.crudoperation.InsertActivity.insertRecord(InsertActivity.java:70)
12-03 13:24:33.692: E/AndroidRuntime(798):  at com.example.crudoperation.InsertActivity$1.onClick(InsertActivity.java:52)
12-03 13:24:33.692: E/AndroidRuntime(798):  at android.view.View.performClick(View.java:4084)
12-03 13:24:33.692: E/AndroidRuntime(798):  at android.view.View$PerformClick.run(View.java:16966)
12-03 13:24:33.692: E/AndroidRuntime(798):  at android.os.Handler.handleCallback(Handler.java:615)
12-03 13:24:33.692: E/AndroidRuntime(798):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-03 13:24:33.692: E/AndroidRuntime(798):  at android.os.Looper.loop(Looper.java:137)
12-03 13:24:33.692: E/AndroidRuntime(798):  at android.app.ActivityThread.main(ActivityThread.java:4745)
12-03 13:24:33.692: E/AndroidRuntime(798):  at java.lang.reflect.Method.invokeNative(Native Method)
12-03 13:24:33.692: E/AndroidRuntime(798):  at java.lang.reflect.Method.invoke(Method.java:511)
12-03 13:24:33.692: E/AndroidRuntime(798):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-03 13:24:33.692: E/AndroidRuntime(798):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-03 13:24:33.692: E/AndroidRuntime(798):  at dalvik.system.NativeStart.main(Native Method) 
```

# android - 来自 SQLitedatabase 的 Android ListView，带有要删除的可点击项目

> ID：13679300
> 
> 赞同：0
> 
> 时间：2012-12-03T08:07:12.760
> 
> 标签：android, android-listview

我正在尝试通过查询为我的 Android 应用程序创建的 SQLite 数据库来填充值列表。当用户单击按钮 (DROP) 时，活动更改为 ListViewDelete，该活动应具有来自基于 ID 的 Select 查询的所有行的列表。我不知道如何进行。我从教程中尝试了一些东西，但我的应用程序失败了。这是我的代码：

--MySQLitehelper.java----

```
public class MySQLitehelper {

//public static final String TABLE_COMMENTS = "comments";
  public static final String COLUMN_ID = "GWid";
  public static final String COLUMN_DATE = "DateGWU";
  public static final String COLUMN_LOCATION = "location";
  public static final String COLUMN_TIME = "time";

  public static final String TABLE_NAME = "UPDTable";

  private static final String DATABASE_NAME = "UPDdb_version6";
  private static final int DATABASE_VERSION = 6;

  private final Context context;
  GetSet getset = new GetSet();
  public void GetIdForGwid(GetSet get)
  {
     getset=get; 
  }

  // Database creation sql statement
  private static final String DATABASE_CREATE = "CREATE TABLE " + TABLE_NAME +
                                " (" +COLUMN_ID+ " integer," + COLUMN_DATE + " VARCHAR," +
                                COLUMN_LOCATION+" VARCHAR," +COLUMN_TIME +" VARCHAR);";

//  private static final String DATABASE_INSERT = "INSERT INTO " +TABLE_NAME +
//                                              " Values (47688507,'DEC-07-2012','MARVIN 203','20:00');";

  private static final String DATABASE_INSERT = "INSERT INTO " +TABLE_NAME +  " (" +COLUMN_ID+ " ," + COLUMN_DATE + "," +
          COLUMN_LOCATION+" ," +COLUMN_TIME +" )"  +
                          " Values (47688507,'DEC-07-2012','MARVIN 203','20:00');";

  DatabaseHelper dbhelper;
  SQLiteDatabase db;

 public MySQLitehelper(Context ctx)
  {
      this.context = ctx;
      dbhelper = new DatabaseHelper(ctx);
  }

private static class DatabaseHelper extends SQLiteOpenHelper {

     public DatabaseHelper(Context context)
     {
         super(context,DATABASE_NAME, null,DATABASE_VERSION);
     }

 @Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub
    db.execSQL(DATABASE_CREATE);            //execute create table
    db.execSQL(DATABASE_INSERT);            //execute insert query
    db.execSQL("INSERT INTO " +TABLE_NAME +  " (" +COLUMN_ID+ " ," + COLUMN_DATE + "," +COLUMN_LOCATION+" ," +COLUMN_TIME +" )" +" Values (47688507,'DEC-22-2012','OLD MAIN','23:00');");
    db.execSQL("INSERT INTO " +TABLE_NAME +  " (" +COLUMN_ID+ " ," + COLUMN_DATE + "," +COLUMN_LOCATION+" ," +COLUMN_TIME +" )" +" Values (1234567,'DEC-14-2012','FUNGER','12:00');");
    db.execSQL("INSERT INTO " +TABLE_NAME +  " (" +COLUMN_ID+ " ," + COLUMN_DATE + "," +COLUMN_LOCATION+" ," +COLUMN_TIME +" )" +" Values (7654321,'DEC-29-2012','GELMAN','22:00');");
    db.execSQL("INSERT INTO " +TABLE_NAME +  " (" +COLUMN_ID+ " ," + COLUMN_DATE + "," +COLUMN_LOCATION+" ," +COLUMN_TIME +" )" +" Values (47688507,'DEC-12-2012','IVORY','23:00');");
 }

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub
    Log.w(MySQLitehelper.class.getName(),
            "Upgrading database from version " + oldVersion + " to "
                + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
        onCreate(db);
    }
}

// open the DB
 public MySQLitehelper open() throws SQLException
 {
    System.out.println("Inside open function");
     db = dbhelper.getWritableDatabase();
    return this;
 }

 public void close()
 {
     dbhelper.close();
 }

 public void insertRecord(long gwid, String date, String location, String time)
     {
           ContentValues initialValues = new ContentValues();
          initialValues.put(COLUMN_ID, gwid);
          initialValues.put(COLUMN_DATE, date);
          initialValues.put(COLUMN_LOCATION, location);
          initialValues.put(COLUMN_TIME, time);
          db.insert(TABLE_NAME, null, initialValues);
     }

public Cursor getAllrows()      //function to get all rows in the DB. Testing initially.
{

     Cursor cur = db.rawQuery("SELECT * FROM "+TABLE_NAME, null);
     return cur;
}

public Cursor getRecord(long getid) throws SQLException
{
        Cursor mCursor =
        db.query(true, TABLE_NAME, new String[] {COLUMN_ID,
        COLUMN_DATE, COLUMN_LOCATION, COLUMN_TIME},
        COLUMN_ID + "= "+getid, null, null, null, null, null);   //HARDCODED. Please make it dynamic
        if (mCursor != null) 
        {
            mCursor.moveToFirst();
        }
 return mCursor;
}

} 
```

--SelectOptions.java-- 这里用户点击 DROP 按钮 (btnDrop) 然后控制转到下面的活动 ListViewDelete.java

```
public class SelectOptions extends Activity {

protected static final String EXTRA_MESSAGE = "This is a the GWID";
Button btnView, btnDrop, btnLocation;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_select_options);

    final Intent intent = getIntent();
    //String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);
    //long getid = intent.getLongExtra(MainActivity.EXTRA_MESSAGE, defaultValue)
            final Bundle extras = getIntent().getExtras(); 

       if (extras != null) {
           long getid = extras.getLong(MainActivity.EXTRA_MESSAGE,0);

        }

    btnView = (Button)findViewById(R.id.btnViewShift);
    btnDrop = (Button)findViewById(R.id.btnDropShift);
    btnLocation = (Button)findViewById(R.id.btnViewLocation);

    final GetSet gwid = new GetSet();
/*   ArrayList<String> results = new ArrayList<String>();
        SQLiteDatabase sampleDB = null;
        final MySQLitehelper db = null;

        final Dialog diag = null;
        final TextView txt = null;   */
    final MySQLitehelper helper = new MySQLitehelper(this);

    btnView.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {

            helper.open();
            Cursor c = helper.getRecord(extras.getLong(MainActivity.EXTRA_MESSAGE));
        //  List<String> list = new ArrayList<String>();
         //    Cursor cursor = helper.query(constantValues.TABLE_NAME, new String[] { "emailid"},null, null, null, null, null); // here emailid is the field name in the table and contantValues.TABLE_NAME is the table name 
            if (c.moveToFirst()) {
             do {

                 System.out.println("In Do while");
                 DisplayRecord(c); 

             } while (c.moveToNext());
          }
            helper.close(); 
            System.out.println("Out of Do");                

        }  
    });

    btnLocation.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            Intent intent2 = new Intent(SelectOptions.this, MapViewActivity.class);
            //startActivity(intent2);
            startActivity(intent2);

        }
    });

    btnDrop.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent intent3 = new Intent(SelectOptions.this, ListViewDelete.class);
            //startActivity(intent2);
            intent3.putExtra(EXTRA_MESSAGE, extras.getLong(MainActivity.EXTRA_MESSAGE));
            startActivity(intent3);

        }
    });
}

public void DisplayRecord(Cursor c)
{
    System.out.println("In side toast display function");
    Toast.makeText(this, "id: "+c.getString(0)+"\n"+
            "Date: "+c.getString(1)+"\n"+
            "Location: "+c.getString(2)+"\n"+
            "Time: "+c.getString(3), Toast.LENGTH_LONG).show();
}

} 
```

--ListViewDelete.java

```
public class ListViewDelete extends ListActivity {

String []list =  {"A","B","C","D"};    //#I just tried to populate a sample list#

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.activity_list_view_delete);

    final Intent intent = getIntent();
    final Bundle extras = getIntent().getExtras();    //gets the GWID

    final MySQLitehelper dbhelper = new MySQLitehelper(this);

    setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,list));
    Cursor c = dbhelper.getRecord(extras.getLong(MainActivity.EXTRA_MESSAGE));
        if (c.moveToFirst())
        {
            do {

                System.out.println("In Do while");
                // DisplayRecord(c); 
                //list[]

                } while (c.moveToNext());
        }
    dbhelper.close();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_list_view_delete, menu);
    return true;
}

} 
```

上面的课程需要重组，我似乎没有走上正轨。任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:54:14.593

处理此类 imo 之类的最佳方法是使用由 a 支持的列表视图`cursorAdapter`，而不是由另一种适配器支持的列表视图。这是 ListViewDelete 类的重组，以包含`simpleCursorAdapter`. 缺点是您必须知道适配器将要写入的 textView 的 ID。好处是您可以使用适配器直接引用您的数据库行来实现它。

```
import android.support.v4.widget.SimpleCursorAdapter; // < --- make sure it's this one

...

public class ListViewDelete extends ListActivity {

    private MySQLitehelper dbhelper;
    private SimpleCursorAdapter adapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_list_view_delete);

        final Intent intent = getIntent();
        final Bundle extras = getIntent().getExtras();    //gets the GWID

        dbhelper = new MySQLitehelper(this);
        Cursor c = dbhelper.getRecord(extras.getLong(MainActivity.EXTRA_MESSAGE));

        //    SimpleCursorAdapter adapter = new SimpleCursorAdapter(context, layout, c, from, to, flags) 
        //    ^ I wanted you to see the parameters

        adapter = new SimpleCursorAdapter(
                this, 
                R.layout.delete_activity,
                // ^ custom xml holding a layout to be used for each row of your listview
                c, 
                new String[]{MySQLitehelper.COLUMN_DATE, MySQLitehelper.COLUMN_LOCATION, MySQLitehelper.COLUMN_TIME},
                // ^ an array of the database columns that you want
                new int[]{R.id.text1, R.id.text2, R.id.text3},
                // ^ the textView ids (in your custom layout) that you wanted the columns to be mapped to 1 to 1 
                0);
        // ^ just put 0 for that

        setListAdapter(adapter);
    }

    private void refreshListview() {
        Cursor c = dbhelper.getRecord(extras.getLong(MainActivity.EXTRA_MESSAGE));
        adapter.changeCursor(c);
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        // where the delete action is gonna take place
        dbhelper.deleteRow(id);
        // when they click a row, the database will delete by id
        // which the onListItemClick method conveniently provides with a cursorAdapter
        refreshListview();
        // then we refresh the listview to see the changes.
        // you might want to make an "delete? are you sure?" dialog or something for your own implementations.
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_list_view_delete, menu);
        return true;
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        dbhelper.close();
    }
} 
```

以及正在引用的 MySQLitehelper 数据库类中的删除方法：

```
public boolean deleteRow(long rowId) {
    return db.delete(TABLE_NAME, COLUMN_ID + "=" + rowId, null) > 0;
} 
```

# php - 在 PHP 中使用数组

> ID：13679303
> 
> 赞同：0
> 
> 时间：2012-12-03T08:07:44.103
> 
> 标签：php, arrays

我正在开发我的第一个用 PHP 编写的程序。这是一个基本问题。我正在尝试打印存储在数组中的字符串。我有两个数组。一个数组 $content 存储一个数字`$content[$i][15]`（我在数组中使用数组，并使用 for 循环遍历它）。假设这个数字是 3。我现在想访问另一个数组中的字符串，称为 $type。该字符串位于位置`$type[3]`。从逻辑上讲，我认为`$type[3]`应该打印与`$type[$content[$i][15]]`. 但是，当我打电话时`$type[$content[$i][15]]`，它不会打印任何东西，但是当我打印时`$type[3]`它工作正常。PHP中不允许这种类型的调用吗？

```
$type = array();
$typetemp = readfile("type.csv");
foreach ($typetemp as $sa){
    $type[$sa[0]] = $sa[1];
}

$content = readfile("content.csv");

for($i=0; $i<sizeof($content); $i++){
    if($content[$i][15] == 3){
        if($content[$i][4] == 1){
            $temp = $content[$i][15];
            echo "id is " . $content[$i][0] . "title is " . $content[$i][1] . "introtext is " . $content[$i][2] . "restoftext is " . $content[$i][3] . "visible is " . $content[$i][4] . "category is " . $content[$i][5] . "creation_date is " . $content[$i][6] . "author is " . $content[$i][7] . "img is " . $content[$i][8] . "ordering is " . $content[$i][9] . "rank is " . $content[$i][10] . "vid is " . $content[$i][11] . "start_date is " . $content[$i][12] . "stop_date is " . $content[$i][13] . "event_date is " . $content[$i][14] . "type is " . $content[$i][15] . "thumb is " . $content[$i][16] . "type name is " . $type[$temp] . "<br/>";  
        }
    }
}

function readfile($filename) {
    $line_of_text = array();
    $file_handle = fopen($filename, "r");

    while (!feof($file_handle) ) {
      array_push($line_of_text, fgetcsv($file_handle, 1024));
    }
    fclose($file_handle);
    return $line_of_text;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T08:09:35.057

您`$`之前缺少一个标志`content`：

```
$type[$content[$i][15]] 
```

`$type`这使用索引访问值`$content[$i][15]`

# sql - 如何想出一个脚本来修改数据库中的现有表而不丢失现有信息？

> ID：13679307
> 
> 赞同：-2
> 
> 时间：2012-12-03T08:08:04.600
> 
> 标签：sql, sql-server-2008-r2, sql-scripts

我有一个带有数据库的应用程序，它们运行良好，一切都很好。

现在，我只需要通过添加更多列来修改数据库中的一个表。我正在使用 SQL Server，数据库管理员要求我向他提供修改该表的脚本。

**那么该怎么做呢？**

我正在使用 SQL Server Management Studio，当我单击表右键单击时，我曾经选择要创建的脚本，Management Studio 会给我脚本。现在，这个表有信息，所以我认为我不应该为这个表使用创建脚本。

新列应允许空值。

**那我应该用什么？**

供您参考，这里是创建表的脚本：

```
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

SET ANSI_PADDING ON
GO

CREATE TABLE [dbo].[Test](
    [ID] [numeric](18, 0) IDENTITY(1,1) NOT NULL,
    [No] [char](20) NOT NULL,
    [Date] [smalldatetime] NULL,
    [ProjectType] [char](500) NULL,
    [ProjectPhase] [char](300) NULL,
    [rejected_reason] [varchar](max) NULL,
    [archived_reason] [varchar](max) NULL,
    [forward_to] [varchar](max) NULL,
    [forward_type] [varchar](max) NULL,
    [forward_concern] [varchar](max) NULL,
 CONSTRAINT [PK_Test] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]

GO

SET ANSI_PADDING OFF
GO

ALTER TABLE [dbo].[Test] ADD  CONSTRAINT [DF_LLATestB_No]  DEFAULT ('*') FOR [No]
GO

ALTER TABLE [dbo].[Test] ADD  CONSTRAINT [DF_LLATestB_Status]  DEFAULT ((2)) FOR [Status]
GO

ALTER TABLE [dbo].[Test] ADD  CONSTRAINT [DF_LLATestB_AID]  DEFAULT ((0)) FOR [AID]
GO

ALTER TABLE [dbo].[Test] ADD  CONSTRAINT [DF_LLATestB_Hit]  DEFAULT ((0)) FOR [Hit]
GO

ALTER TABLE [dbo].[Test] ADD  CONSTRAINT [DF_LLATestB_Sent]  DEFAULT ((0)) FOR [Sent]
GO

ALTER TABLE [dbo].[Test] ADD  CONSTRAINT [DF_LLATestB_SentTo]  DEFAULT ((0)) FOR [SentTo]
GO

ALTER TABLE [dbo].[Test] ADD  CONSTRAINT [DF_LLa_Added_To_Cart]  DEFAULT ((0)) FOR [Added_To_Cart]
GO 
```

应添加到此表的新列示例如下：

```
[rejected_reason] [varchar](max) NULL,
[archived_reason] [varchar](max) NULL,
[forward_to] [varchar](max) NULL,
[forward_type] [varchar](max) NULL, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:24:03.220

当您[在 MSDN 上学习 SQL Server 联机丛书时](http://msdn.microsoft.com/en-us/library/ms130214.aspx)，它应该是小菜一碟 - 使用[ALTER TABLE](http://msdn.microsoft.com/en-us/library/ms190273.aspx)：

```
 ALTER TABLE dbo.LLa
 ADD [rejected_reason] [varchar](max) NULL

 ALTER TABLE dbo.LLa
 ADD [archived_reason] [varchar](max) NULL

 ALTER TABLE dbo.LLa
 ADD [forward_to] [varchar](max) NULL

 ALTER TABLE dbo.LLa
 ADD [forward_type] [varchar](max) NULL 
```

问题更多：你**真的**需要为你的每一列提供最多 2 GB 的数据`VARCHAR(MAX)`吗？好像有点矫枉过正了！

您应该始终使用适当的数据类型 - 如果该列最多只能容纳 100 个字符 - 为什么不使用`VARCHAR(100)`而不是使用最大数据类型？

# javascript - 验证 xxx-xxx-xxxx 或 (xxx)xxx-xxxx

> ID：13679310
> 
> 赞同：3
> 
> 时间：2012-12-03T08:08:18.407
> 
> 标签：javascript, regex

> **可能重复：**
> [用于电话号码验证的综合正则表达式](https://stackoverflow.com/questions/123559/a-comprehensive-regex-for-phone-number-validation)

什么是正则表达式

```
xxx-xxx-xxxx
or
(xxx)xxx-xxxx 
```

我可以为第一个创建正则表达式

```
/^\d{3}-\d{3}-\d{4}$/ 
```

但是如何在其中添加规则以便它也可以处理第二个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T08:14:43.873

你可以使用这个： -

```
/^(?:\(\d{3}\)|\d{3}-)\d{3}-\d{4}$/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T08:09:50.317

我不是大师，但这应该可以解决问题；

```
/^(\d{3}\-)?(\(\d{3}\))?\d{3}\-\d{4}$/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T08:16:23.887

```
/^(\(\d{3}\))|(\d{3}-)\d{3}-\d{4}$/ 
```

# windows - 使用cmd替换txt中的字符串

> ID：13679312
> 
> 赞同：0
> 
> 时间：2012-12-03T08:08:34.397
> 
> 标签：windows, string, cmd

我有一个文本文件。

使用 windows cmd 我想查找并替换以下内容

`__HTML_APP_URL__`-->`http://google.com`

找不到这样做的简单教程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:08:36.793

我会尽力

电源外壳

`get-content somefile.txt | %{$_ -replace "expression","replace"}`

# java - 是方法重载吗？

> ID：13679317
> 
> 赞同：-2
> 
> 时间：2012-12-03T08:08:42.560
> 
> 标签：java, inheritance, overloading

请在下面找到示例代码：-

```
class ExtendMe{
    public void printV(int x){
        System.out.println(x);
    }
}

public class InheritOM extends ExtendMe {
    void printV(int y ,int z){
        System.out.println("2 arg method called");
        System.out.println(y);
        System.out.println(z);
    }

    public static void main(String args []){
        InheritOM obj = new InheritOM();
        obj.printV(4);
        obj.printV(5,6); 
    }
} 
```

我可以说 printV 方法重载了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T08:11:07.343

是的，重载在尝试从超类中重载方法时起作用。

在谈论重载时请记住这一点：

*   重载的方法必须改变参数列表。
*   重载的方法可以改变返回类型。
*   重载的方法可以更改访问修饰符。
*   重载的方法可以声明新的或更广泛的检查异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T08:10:14.547

是的。你可以这样说。[http://en.wikipedia.org/wiki/Function_overloading](http://en.wikipedia.org/wiki/Function_overloading)上的第一句话告诉你。

# qt - 为 arm-Linux 寻找 qt4 库

> ID：13679321
> 
> 赞同：2
> 
> 时间：2012-12-03T08:08:55.270
> 
> 标签：qt, makefile

使用 FindQt.cmake 查找 QT 库：

```
FIND_PACKAGE(Qt4 COMPONENTS QtCore QtGui QtOpenGL ) 
```

但是，我总是收到此警告：

```
The ASM compiler identification is GNU

CMake Warning at ../cmake-2.8/Modules/FindQt4.cmake:601 (MESSAGE):
  /Qt4.8.0/bin/qmake reported
  QT_INSTALL_LIBS as "/Qt4.8.0/lib"
  but QtCore could not be found there.  Qt is NOT installed correctly for the
  target build environment. 
```

我确定有 QtCore 库：/Qt4.8.0/lib

```
ls -all libQtCore*

-rw-r--r-- 1 root root     950 Nov 30 13:08 libQtCore.la
-rw-r--r-- 1 root root     942 Nov 30 13:07 libQtCore.prl
lrwxrwxrwx 1 root root      18 Nov 30 13:07 libQtCore.so -> libQtCore.so.4.8.0
lrwxrwxrwx 1 root root      18 Nov 30 13:08 libQtCore.so.4 -> libQtCore.so.4.8.0
lrwxrwxrwx 1 root root      18 Nov 30 13:08 libQtCore.so.4.8 -> libQtCore.so.4.8.0
-rwxr-xr-x 1 root root 2697932 Nov 30 13:08 libQtCore.so.4.8.0 
```

如何检查为什么在该目录中找不到 QtCore 的警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:07:35.050

`FindQt4.cmake`查看分发中的模块代码，`CMake`我找到了解决此问题的方法。我已经设置`QT_QTCORE_LIBRARY_RELEASE`了除了`QT_QMAKE_EXECUTABLE`变量。`cmake`我通过以下方式将它们放入我的工具链中：

```
# Qt4 related stuff required here due to FindQt4.cmake issues
set(QT_QMAKE_EXECUTABLE $ENV{QT_DIR}/bin/qmake)
set(QT_QTCORE_LIBRARY_RELEASE $ENV{QT_DIR}/lib/libQtCore.so) 
```

我使用`QT_DIR`环境变量来简化不同 Qt4 构建之间的切换。

# matlab - MATLAB - 全局优化工具箱

> ID：13679324
> 
> 赞同：1
> 
> 时间：2012-12-03T08:09:13.087
> 
> 标签：matlab, genetic

当我运行 GA 求解器时，我收到以下警告：这是什么意思？我应该采取什么行动，或者我只是忽略它？

警告：上限长度 > 长度（x）；忽略额外的界限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T16:28:59.300

这意味着您指定的上限 ub(i) 比未知变量的数量 nvars 多。GA 将忽略额外的 ub(i)。

# c# - LINQ.Any 到字符串的结果

> ID：13679326
> 
> 赞同：4
> 
> 时间：2012-12-03T08:09:21.150
> 
> 标签：c#, string, linq, contains

因此，我使用以下语句检查字符串是否包含数组中的某个单词：

```
if(stringArray.Any(s => stringToCheck.Contains(s))) 
```

简单的。现在找到了一个匹配项，并且该陈述为真。但我也想知道数组中的哪个项目与字符串匹配。上述 LINQ 语句中的占位符“s”在以下子句中不可用。

希望有人有想法。我可以遍历数组，是的，但是 LINQ 对我来说看起来更好。=)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T08:11:01.893

```
var match = stringArray.FirstOrDefault(s => stringToCheck.Contains(s));
if(match != null) {
    // match was found
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T08:11:20.940

如果您希望输入列表中的所有字符串都与条件匹配，则需要使用`Where`：

```
var matchingStrings = stringArray.Where(s => stringToCheck.Contains(s)) 
```

如果你只想要第一个字符串，你可以使用 `FirstOrDefault`：

```
var firstMatchingString = stringArray
    .FirstOrDefault(s => stringToCheck.Contains(s)) 
```

有关所有可用方法的概述，请查看[http://msdn.microsoft.com/en-us/library/bb341635.aspx](http://msdn.microsoft.com/en-us/library/bb341635.aspx)

有关 Linq to Objects 的介绍，请在此处查看 101 个示例：http: [//code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T08:18:44.057

另一个简单的解决方案（只需**一行**代码）就是利用`Select`重载：

通过选择，我们可以访问`value` *和* `index`当代：

```
//Example:
string[] arr = new[] {"a", "bb", "ccc"}; 
var result = arr.Select((v,i)=>new {value=v, index=i}).Where(x=>x.value.Contains("c")); 
```

这会产生如下结果：

```
{"ccc", 2} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T08:19:26.200

另一种（更有效的）方法是[`Enumerable.Join`](http://msdn.microsoft.com/en-us/library/bb534675.aspx)：

```
IEnumerable<string> matches = from str1 in stringArray
                              join str2 in stringToCheck on str1 equals str2
                              select str1;
if(matches.Any())
{
    string allMatches = string.Join(", ", matches);
    Console.Write(allMatches);
} 
```

[**为什么 LINQ JOIN 比使用 WHERE 链接快得多？**](https://stackoverflow.com/questions/5551264/why-is-linq-join-so-much-faster-than-linking-with-where)

或者甚至更有效地使用[`Enumerable.Intersect`](http://msdn.microsoft.com/en-us/library/bb460136.aspx)：

```
IEnumerable<string> matches = stringArray.Intersect(stringToCheck);
foreach(string common in matches)
{
    // ...
} 
```

# linux - 预配置的开发环境映像

> ID：13679327
> 
> 赞同：0
> 
> 时间：2012-12-03T08:09:25.307
> 
> 标签：linux, node.js, ubuntu, deployment, lamp

我正在寻找一种在 ubuntu 中将开发人员环境打包在一起的方法。我的意思是我需要能够安装预配置有lamp的ubuntu（包括我们开发人员需要的数据库条目）、nodsjs、预配置的eclipse等。我需要能够为我的公司开发定制部署需要。有谁知道任何指南/程序/等来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:11:07.537

你可能想看看像[Chef](http://en.wikipedia.org/wiki/Chef_%28software%29)或[Puppet](http://en.wikipedia.org/wiki/Puppet_%28software%29)这样的东西。

# actionscript-3 - 使用 ActionScript 3.0 编写 Windows 8 应用程序？

> ID：13679334
> 
> 赞同：0
> 
> 时间：2012-12-03T08:09:37.577
> 
> 标签：actionscript-3, windows-8, flash-builder

有没有办法使用 Adob​​e Flash Builder 编写 Windows 8 应用程序？如果我有一个 swf 文件，我可以把它变成 Windows 8 应用程序吗？

什么东西会停止工作？什么仍然有效？

# google-bigquery - 记录中嵌套记录的最大数量是多少？

> ID：13679336
> 
> 赞同：3
> 
> 时间：2012-12-03T08:09:45.783
> 
> 标签：google-bigquery

如果我在 BigQuery 中创建记录，架构中可以有多少个不同的嵌套记录？架构的大小是否有限制？这可能吗：AA：记录 A1：记录 A2：记录 .... A1000：记录

注意，我知道有一个选项可以让 A 成为重复记录，我不感兴趣\不询问这个选项。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T18:23:07.593

允许的最大模式嵌套深度为 100。也就是说，您可以拥有类似于 {a1: {a2: {a3: { a4: {... {a100: "foo" } ...}}} 的记录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-22T14:32:54.713

此限制@2020 为 150

> BigQuery 支持 STRUCT（或 RECORD）类型的列。STRUCT 是一种复杂类型，可用于表示具有多个子列的对象。在 STRUCT 列中，您还可以将一个或多个子列定义为 STRUCT 类型（称为嵌套或嵌入式 STRUCT）。当您嵌套 STRUCTS 时，BigQuery 会强制执行 15 个级别的嵌套深度限制。嵌套深度限制与 STRUCT 是标量还是基于数组无关。

请参阅完整文档 - [BQ 嵌套和重复列限制](https://cloud.google.com/bigquery/docs/nested-repeated#limitations)

# magento - 为当前的 magento 网站添加新主题

> ID：13679341
> 
> 赞同：0
> 
> 时间：2012-12-03T08:10:45.113
> 
> 标签：magento

是否可以为当前网站添加新外观，而不必从头开始重做整个事情？如何？我不太熟悉 magento 的工作原理，也不知道如何保留所有功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:00:31.220

这是 Magento 的一大卖点。分层主题回退意味着您不需要从头开始创建一个全新的主题，您可以创建一个新主题并且只添加或更改您想要的部分 - 它会回退到您的默认包主题或默认主题（取决于您如何根据目录结构进行设置）。您还可以添加特定时间段的设计覆盖（即，它在 12 月加载圣诞节主题）。

最好的主意是阅读一下它，因为它的范围太广，无法提供 SO 答案；

[http://www.magentocommerce.com/design_guide/articles/working-with-magento-themes](http://www.magentocommerce.com/design_guide/articles/working-with-magento-themes)

# php - 如何在带有背景图像的php中创建具有不同文本格式的gif图像？

> ID：13679342
> 
> 赞同：1
> 
> 时间：2012-12-03T08:10:45.270
> 
> 标签：php

这是否可以在 php 中创建具有各种文本字体、样式、格式和对齐方式的背景图像的 gif 图像？

例如我有一个背景图片 ![在此处输入图像描述](../Images/1bf48ec7b0c25764b731a307ca0d7ddd.png)

我想在背景图像上插入的图像是

![在此处输入图像描述](../Images/7c5e1f2f153837fb7f474f42a74a05f3.png)

输出的 gif 图像应该看起来像 ![在此处输入图像描述](../Images/d8bd1d78cb78339088263ae174d573e9.png)

我为此尝试了代码

```
<?php
// Create a new image instance
$im = imagecreatetruecolor(300, 250);
$img = imagecreatefrompng('back.png');
// Make the background white
imagefilledrectangle($im, 0, 0, 300, 250, 0xEFEFEF);

// Draw a text string on the image

imagestring($im, 20,20, 40, 'Heading1', 0x000000);
imagecopymerge($img, $im, 0, 0, 0, 0, 300, 250, 70);
// Output the image to browser
header('Content-Type: image/gif');

imagegif($img,'test.gif');
imagedestroy($im);
?> 
```

但不幸的是，它没有提供所需的输出，我想向背景图像添加更多内容，如输出图像中所示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:02:36.467

对于这个设计：

![图片](../Images/96c91b38880403317ba05e60dfea360e.png)

您可以使用以下代码：

```
<?php
// Create a new image instance
$img = imagecreatefrompng('back.png');

// Draw a text string on the image
//  imagestring ( resource $image , int $font , int $x , int $y , string $string , int $color )
imagestring($img, 5, 20, 30, 'Heading1', 0x000000);
imagestring($img, 3, 180, 30, 'Heading 2 test desc', 0x000000);

imagestring($img, 3, 20, 80, 'Text info 3', 0xFF0000);   //red
imagestring($img, 1, 180, 80, 'Demonstration text', 0x000000);

imagestring($img, 5, 400, 170, 'Price here', 0xFF0000);   //red

$im = imagecreatefrompng('plane.png'); //load pic 2
imagecopymerge($img, $im, 0, 130, 0, 0, 165, 71, 70);
imagedestroy($im);

// Output the image to browser
header('Content-Type: image/gif');
imagegif($img);
imagedestroy($img);
?> 
```

该`imagestring()`功能仅限于内置的、相当难看的字体，并且大小选项只有 1 到 5。您可以使用另一个功能来代替 TTF 字体，如下所述。

要更改字体，您需要提供自己的 TTF 格式字体，将它们放在与脚本相同的文件夹中，然后将`imagestring()`函数替换为这个。参数非常相似，您自己替换该代码应该很简单。这是解释如何使用`imagettftext()`-function的链接。

[http://php.net/manual/en/function.imagettftext.php](http://php.net/manual/en/function.imagettftext.php)

# android - 谷歌日历同步无限循环

> ID：13679347
> 
> 赞同：1
> 
> 时间：2012-12-03T08:10:58.527
> 
> 标签：android, android-syncadapter

我正在 Android 上开发一个谷歌日历同步应用程序。我已经习惯`SyncAdapter`了。我完成了登录部分，接收和解析来自 Google 日历 api 的响应。

当我单击数据和同步下的同步日历选项时，它会进入无限同步循环，一直运行，直到我取消选中该复选框。

所以我的问题是，重复同步是否是正常行为？如果没有那么请告诉我哪里出错了..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-13T07:09:26.323

我认为这在很大程度上取决于您用于同步日历资源的过程。

我过去发现，使用 events > list 并将 singleEvents 设置为 TRUE（即返回重复事件的单个实例），任何没有结束日期的重复事件基本上永远不会完成对查询结果的处理。这是因为结果实际上是没有尽头的......

# ruby - 带有表双下划线的 Sequel gem 限定查询列名

> ID：13679348
> 
> 赞同：6
> 
> 时间：2012-12-03T08:11:01.020
> 
> 标签：ruby, sequel

使用 Sequel gem：

```
employees = DB[:prm_master__employee.identifier]
.join(:prm_master__employee_custom_fields.identifier, :employee => :employee)
.where("termination_date >= ?","06/01/2012")
.or("termination_date = NULL")
.and("employee = 'holderl'") 
```

以上失败：

```
~/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/sequel-3.41.0/lib/sequel/adapters/tinytds.rb:221:in `fields': TinyTds::Error: Ambiguous column name 'employee'. (Sequel::DatabaseError) 
```

我理解错误（连接表之间的列名相同，例如员工），但不知道如何限定`and`语句中的员工条件，因为表使用标识符方法忽略下划线。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-03T08:52:51.690

答案是使用以下方法实际限定列名：

```
Sequel.qualify(:table, :column) 
```

或等效的较短语法：

```
Sequel[:table][:column] 
```

导致：

```
employees = DB[:prm_master__employee.identifier]
.join(:prm_master__employee_custom_fields.identifier, :employee => :employee)
.where("termination_date >= ?","06/01/2012")
.or("termination_date = NULL")
.and(Sequel.qualify(:prm_master__employee_custom_fields.identifier, :employee)  => "holderl") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:23:48.773

用户别名。或者把 table_name.column_name

# android - 当我尝试获取当前位置附近地点的 json 响应时，我收到 Request denied

> ID：13679352
> 
> 赞同：1
> 
> 时间：2012-12-03T08:11:16.627
> 
> 标签：android, json

```
https://maps.googleapis.com/maps/api/place/search/json?location=gurudwar&radius=500&types=locality&sensor=true&key=0aSMA1WnWOIUNXILbCLs1wBScpm7EJfZAnQ8W6Q 
```

我使用这个 url 来获得响应，但我得到了

```
{
   "html_attributions" : [],
   "results" : [],
   "status" : "REQUEST_DENIED"
} 
```

我也尝试更改 API 密钥，但仍然是相同的消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:27:02.517

试试这个..

[https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=-33.8670522,151.1957362&radius=500&types=food&sensor=false&key=YOUR_API_KEY](https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=-33.8670522,151.1957362&radius=500&types=food&sensor=false&key=YOUR_API_KEY)

尝试不同的 API_KEY ..可能是 api_key 已过期[https://code.google.com/apis/console/?pli=1](https://code.google.com/apis/console/?pli=1)

# python - matplotlib 可选择在左侧或右侧自动缩放轴范围

> ID：13679354
> 
> 赞同：1
> 
> 时间：2012-12-03T08:11:21.460
> 
> 标签：python, matplotlib

如何以编程方式设置 matplotlib 图的范围，可选择保持自动缩放（在左侧或右侧）：

```
import numpy as np
import matplotlib.pyplot as plt

a = np.arange(10)

fig = plt.figure()
ax = fig.add_subplot(111)
myrange = None,None
ax.set_xlim(myrange)
ax.plot(a-5,a)
plt.show() 
```

这会将范围设置为`0 to 1`而不是我想要的`-5 to 4`（自动缩放）。我也试过：

```
 ax.set_xlim(*myrange) 
```

但这也好不到哪里去。我知道该`auto=True`选项，但这似乎不适用于`left`和`right`关键字参数。换句话说，我还希望能够将左侧的范围设置为自动缩放（`-5`）并将右侧的范围限制为特定值 - 例如： `myrange = None,3`

* * *

对于那些可能熟悉的人`gnuplot`，我对 gnuplot 的等价物感兴趣：

```
set xrange [*:max] 
```

或者

```
set xrange [max:*] 
```

句法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:27:07.750

你必须在`ax.set_xlim`之后打电话`ax.plot`。

```
import numpy as np
import matplotlib.pyplot as plt

a = np.arange(10)

fig = plt.figure()
ax = fig.add_subplot(111)
ax.plot(a-5,a)
ax.set_xlim(xmin = -1.)
plt.show() 
```

# silverlight - Openaccess：如何从数据库中获取数据

> ID：13679355
> 
> 赞同：0
> 
> 时间：2012-12-03T08:11:26.040
> 
> 标签：silverlight, data-binding, telerik, openaccess

Silverlight 新手在这里，尝试做一个简单的数据绑定：

我试图获取测试数据库中所有用户的列表，但我不能；我使用 Openaccess 并遵循所有关于如何创建域模型和域服务的教程；我在执行以下代码时遇到问题，即使我在 db 上有 200 行，它也总是返回 0：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using System.ServiceModel.DomainServices.Client;
using SLTest.Web;

namespace SLTest {
    public partial class MainPage : UserControl  {

        private TestDomainContext link = new TestDomainContext();

        public MainPage() {
            InitializeComponent();
            Loaded += new RoutedEventHandler(MainPage_Loaded);
        }

        private void MainPage_Loaded(object sender, RoutedEventArgs e) {

            int count = 0;
            LoadOperation<DomainUser> loadOperation = link.Load(link.GetDomainUsersQuery());
            loadOperation.Completed += (s, a) =>{
                theList.ItemsSource = link.DomainUsers;
                count = link.DomainUsers.Count();
            };

        }
    }
} 
```

另外，为什么那只是在做

```
int count = link.DomainUsers.Count(); 
```

不像在 ASP.NET 中那样工作？

这是 XAML：

```
<UserControl x:Class="SLTest.MainPage"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
        mc:Ignorable="d" d:DesignWidth="640" d:DesignHeight="480">

    <Grid x:Name="theGrid">
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"></RowDefinition>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200"></ColumnDefinition>
            <ColumnDefinition Width="*"></ColumnDefinition>
        </Grid.ColumnDefinitions>
        <ListBox Grid.Row="0" Grid.Column="0" x:Name="theList">
            <DataTemplate>
                <TextBlock Text="{Binding FullName}"></TextBlock>
            </DataTemplate>
        </ListBox>
    </Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:56:16.103

我猜链接对象是您的实际域服务，因此您不应该直接在回调方法中处理它，因为您的服务中的所有查询操作都是异步的，并且不会产生任何以这种方式处理的结果。相反，您可以使用异步回调方法参数来获取您请求的信息，如下所示：

```
 loadOperation.Completed += (s, a) =>
        {
            LoadOperation<DomainUser> loadedObjects = (LoadOperation<DomainUser>)s;
            theList = loadedObjects.Entities;
            count = loadedObjects.Entities.Count();
        }; 
```

那应该行得通。

# iphone - iPhone OS 更新时 iOS KeyChain 会发生什么

> ID：13679359
> 
> 赞同：1
> 
> 时间：2012-12-03T08:11:35.317
> 
> 标签：iphone, objective-c, ios

我的应用程序从 iOS 5.1 升级到 6.0 的用户遇到了一些 NSAsserts，这些问题只有在钥匙串数据严重损坏时才会发生。我不能确切地说，但似乎在升级之间没有维护 keyChain 数据。

# regex - sed 打印出所有数据而不是我要提取的替换部分

> ID：13679363
> 
> 赞同：-1
> 
> 时间：2012-12-03T08:11:51.930
> 
> 标签：regex, sed

我知道，这个问题以前曾多次以略有不同的方式提出。但我无法适应这些解决方案。我有一个包含以下内容的文件 header.out：

```
// some text before this 
            :type = "Primary Grid: Tau Format" ;
            :deformation_timestep = 0\. ;
            :deformation_alpha = 0\. ;
            :deformation_dalpha = 0\. ;
            :deformation_h = 0\. ;
            :deformation_dh = 0\. ;
            :deformation_step = 0 ;
            :adaptation_level = 0 ;
            :connectivity_check = 1 ;
            :volume_check = 1 ;
            :point_check = 1 ;
            :test_lib_check = 1 ;
            :periodic_pairs_check = 1 ;
            :is_balanced = 0 ;
            :preserve_piles = 0 ;
            :marker_1 = "WingMidTrailing" ;
            :marker_2 = "WingMidLower" ;
            :marker_3 = "WingMidUpper" ;
            :marker_4 = "WingSide" ;
            :marker_5 = "Farfield" ;
            :marker_6 = "SymmetryPlane" ;
            :marker_7 = "WingInnerLower" ;
            :marker_8 = "WingInnerUpper" ;
            :marker_9 = "WingInnerTrailing" ;
            :marker_10 = "WingOuterLower" ;
            :marker_11 = "WingOuterUpper" ;
            :marker_12 = "WingOuterTrailing" ;
 } 
```

我需要提取属于字符串“SymmetryPlane”的标记的 ID 所以在这种情况下，我想要 6 作为输出。所有使用 sed 和正则表达式的尝试都失败了。我试过的是：

```
sed 's/.*marker_\(.*\) = "SymmetryPlane.*/\1/' header.out 
```

但这只会给我

```
 :type = "Primary Grid: Tau Format" ;
            :deformation_timestep = 0\. ;
            :deformation_alpha = 0\. ;
            :deformation_dalpha = 0\. ;
            :deformation_h = 0\. ;
            :deformation_dh = 0\. ;
            :deformation_step = 0 ;
            :adaptation_level = 0 ;
            :connectivity_check = 1 ;
            :volume_check = 1 ;
            :point_check = 1 ;
            :test_lib_check = 1 ;
            :periodic_pairs_check = 1 ;
            :is_balanced = 0 ;
            :preserve_piles = 0 ;
            :marker_1 = "WingMidTrailing" ;
            :marker_2 = "WingMidLower" ;
            :marker_3 = "WingMidUpper" ;
            :marker_4 = "WingSide" ;
            :marker_5 = "Farfield" ;
6
            :marker_7 = "WingInnerLower" ;
            :marker_8 = "WingInnerUpper" ;
            :marker_9 = "WingInnerTrailing" ;
            :marker_10 = "WingOuterLower" ;
            :marker_11 = "WingOuterUpper" ;
            :marker_12 = "WingOuterTrailing" ;
} 
```

我不确定为什么会这样。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:29:06.390

只需抑制输出 ( `-n`) 并在替换 ( `p`) 后打印：

```
sed -n 's/.*marker_\(.*\) = "SymmetryPlane.*/\1/p' header.out 
```

# android - 如何在 XML 中做出服务器响应

> ID：13679364
> 
> 赞同：0
> 
> 时间：2012-12-03T08:11:56.093
> 
> 标签：android, xml

我在我的网站上使用 wordpress。我希望服务器的响应是 xml 响应。我开始知道，如果我使用 JSON API 插件，那么我将从服务器获得 json 响应。现在我正在从服务器获得 html 响应。如何从服务器获取 XML 响应是否有任何插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:18:13.457

看看这里[如何在 php 中回显 xml 文件](https://stackoverflow.com/questions/1199595/how-to-echo-xml-file-in-php)。我想那是你想做的。希望它会帮助你。

XML 解析器：http: [//developer.android.com/training/basics/network-ops/xml.html](http://developer.android.com/training/basics/network-ops/xml.html)

# javascript - Javascript用逗号添加数字

> ID：13679368
> 
> 赞同：3
> 
> 时间：2012-12-03T08:12:45.173
> 
> 标签：javascript, html, equation

我有四个 HTML 字段，我获取它们的值并将它们添加到一个如下所示的等式中：

```
Total = Number(value1) + Number(value2) + Number(value3) + Number(value4) 
```

现在一些值可能等于`1,078.00`，结果我得到`NaN`了。我应该怎么办 ？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-03T08:15:18.313

删除逗号，显然：

```
parseFloat(value1.replace(/,/g,'')) 
```

# java - 对 JMS 队列上的消息进行计数时的奇怪行为

> ID：13679369
> 
> 赞同：4
> 
> 时间：2012-12-03T08:12:47.590
> 
> 标签：java, jms, activemq, message-queue

我正在使用 Active MQ 和 Java JMS。

我想计算队列中的消息数。

一种方法是使用浏览器计算消息：

```
 Queue queue = (Queue) session.createQueue(subject);
    QueueBrowser queueBrowser = session.createBrowser(queue);
    Enumeration<?> e = queueBrowser.getEnumeration();
    int numMsgs = 0;
    // count number of messages
    while (e.hasMoreElements()) {
    //    Message m = (Message) e.nextElement();
        e.nextElement();
        numMsgs++;
    } 
```

但是对于有 5000 个待处理请求的队列，这只返回 500。

另一种方法是（迭代队列中的所有消息）：

```
Message message= consumer.receive(500);
while(message!= null)
    {

        if (message instanceof TextMessage) 
        {
            TextMessage textMessage = (TextMessage) message;
       //     BytesMessage Byte

            System.out.println("Received message '"+ textMessage.getText() + "'");
        }
        if(message!=null)
            Messages_list.add(message);

        message = consumer.receive(1);
    } 
```

但这也没有提供适量的待处理消息。

我怎样才能自信地迭代 akk 队列中等待的消息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T16:33:43.197

ActiveMQ 中有一个错误阻止浏览器返回实际的消息数。在这种情况下，浏览器只返回单页消息，由 maxPageSize 属性设置并在此处记录：http: [//activemq.apache.org/per-destination-policies.html](http://activemq.apache.org/per-destination-policies.html)

ActiveMQ 目前有一个关于此问题的错误报告，并在此处进行跟踪：[https](https://issues.apache.org/jira/browse/AMQ-4181) ://issues.apache.org/jira/browse/AMQ-4181 。此问题已解决，目前计划在 ActiveMQ 5.8.0 中修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:42:00.093

由于您使用的是 ActiveMQ，您可以使用 ActiveMQ 的 StatisticsPlugin：[http ://activemq.apache.org/statisticsplugin.html](http://activemq.apache.org/statisticsplugin.html)

> 同样，要查询目的地的统计信息，只需向目的地名称发送一条带有 ActiveMQ.Statistics.Destination 前缀的消息。例如，要检索名称为 TEST.FOO 的队列的统计信息，请将空消息发送到名为 ActiveMQ.Statistics.Destination.TEST.FOO 的队列

具体来说，您可能对`enqueueCount`. 我在这里省略了示例代码，因为插件网页上的示例代码简洁而好。

# c# - 在继承自 UserControl 的控件上以编程方式显示工具提示

> ID：13679370
> 
> 赞同：0
> 
> 时间：2012-12-03T08:12:47.260
> 
> 标签：c#, tooltip

我有一个从 UserControl 类继承的自定义控件。它有一个 ToolTip 属性，但是当鼠标拖到它上面时我需要显示它。

[Tooltip.Show](http://msdn.microsoft.com/en-us/library/67fds2ee%28v=vs.80%29.aspx)方法需要 Control 类型的第二个参数。我不知道如何处理它。

任何想法/帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-01-28T23:15:33.187

SetToolTip() 只需调用一次

```
class Foo : Form {
     ToolTip tooltip = new ToolTip();

     public Foo(){
          tooltip.SetToolTip(this, "This is a tooltip!"); 
          foreach(Control ctrl in this.Controls) {
                tooltip.SetToolTip(ctrl, "This is a tooltip!");
            }
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:23:51.147

在构造函数中实例化您的工具提示并在鼠标悬停事件中显示它。

取自 Joseph 在 stackoverflow 中的回答

```
public ToolTip tT { get; set; }

public ClassConstructor()
{
tT = new ToolTip();
}

private void MyControl_MouseHover(object sender, EventArgs e)
{
tT.Show("Why So Many Times?", this);
} 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-09T11:06:36.863

今天自己遇到了这个问题，并想出了这个相当简单的解决方案。

将以下源文件添加到您的代码库中的某处（我将其放在文件 ToolTipEx.cs 中）

```
namespace System.Windows.Forms
{
    public static class ToolTipEx
    {
        private static void SetTipRecurse(ToolTip toolTip, Control control, string tip)
        {
            toolTip.SetToolTip(control, tip);

            foreach (Control child in control.Controls)
                SetTipRecurse(toolTip, child, tip);
        }

        public static void SetTooltip(this ToolTip toolTip, UserControl control, string tip)
        {
            SetTipRecurse(toolTip, control, tip);
        }
    }
} 
```

如果它在另一个 DLL 中，请确保引用了该 DLL。

然后你所要做的就是进行正常的调用，`toolTip.SetToolTip(myControl, "some tip");`编译器会为你处理剩下的事情。

因为该函数本质上将 ToolTip.SetToolTip() 方法扩展为具有签名的方法

```
ToolTip(UserControl control, string tip); 
```

在层次结构中比原来的更高

```
ToolTip(Control control, string tip); 
```

当我们处理一个 UserControl 时，它将被调用而不是原来的。

新方法执行一个简单的递归调用，为所有子控件提供与父控件相同的工具提示。

此代码假定在调用 SetToolTip 后，UserControl 不会添加其他控件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-14T07:01:34.617

我自己也需要这个，发现上面提供的部分解决方案可以改进。

基本上，您需要将所有适用的子控件的 MouseHover 事件设置为父 UserControl 的 MouseHover。

这可以通过 MyUserControl 类构造函数中的以下代码来完成：

```
class MyUserControl:UserControl
{
   string strTooltip;
   public ToolTip toolTip
   {
    get;
    set;
   }

   public MyUserControl()
   {
     toolTip = new ToolTip();
     foreach(Control ctrl in this.Controls)
     {
      ctrl.MouseHover += new EventHandler(MyUserControl_MouseHover);
      ctrl.MouseLeave += new EventHandler(MyUserControl_MouseLeave);
     }
  }
  void MyUserControl_MouseLeave(object sender, EventArgs e)
  {
    toolTip.Hide(this);
  }

  void MyUserControl_MouseHover(object sender, EventArgs e)
  {
    toolTip.Show(strToolTip, this, PointToClient(MousePosition));
  }
} 
```

请注意，我们使用 PointToClient(MousePosition) 将工具提示定位到用户控件所在的位置。

否则，有时，它可能会导致工具提示显示在屏幕上的随机位置。希望这对某人有帮助！:)

# javascript - Javascript：单击一个复选框时添加额外的输入表单

> ID：13679374
> 
> 赞同：-4
> 
> 时间：2012-12-03T08:13:07.170
> 
> 标签：javascript, html

单击一个复选框时如何添加一个额外的输入表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:18:04.973

您需要确定将被选中的复选框，以及将包含新输入字段的容器（为了简单起见，我假设您在我的示例中需要一个文本框......将其更改为您想要的任何内容）。这是一个非常基本的示例，您必须根据自己的需要进行修改，但您明白了。

使用这个 HTML：

```
<input id="chk" type="checkbox" />
<div id="formContainer">
</div>​ 
```

您可以应用此 JavaScript：

```
function CreateTextbox() {
    var textBox = document.createElement("input");
    textBox.setAttribute("type", "textbox");
    textBox.setAttribute("id", textboxId);
    textboxId++;
    return textBox;
}

var textboxId = 0;

document.getElementById("chk").onclick = function () {
    document.getElementById("formContainer").appendChild(CreateTextbox(textboxId));
}​ 
```

[http://jsfiddle.net/hcmG2/1/](http://jsfiddle.net/hcmG2/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:19:23.370

也许这就是你需要的[http://viralpatel.net/blogs/dynamic-add-textbox-input-button-radio-element-html-javascript/](http://viralpatel.net/blogs/dynamic-add-textbox-input-button-radio-element-html-javascript/)？您只需要`add()`在单击复选框时调用该函数。

# c# - 我想从字符串中检索数字，其字符从 8 OR 9 OR 6 开始，后跟 8 位数字

> ID：13679375
> 
> 赞同：-2
> 
> 时间：2012-12-03T08:13:11.737
> 
> 标签：c#, regex

我想从字符串中检索数字，其字符从 8 OR 9 OR 6 开始，后跟 8 位数字。 

例如

```
sting string string  85689252 91585555 65987582  sting 12345678 string 
```

输出应该是：

```
85689252 
91585555 
65987582 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T08:16:55.017

你可能想要这个正则表达式：

```
\b[896]\d{7}\b 
```

我假设这些数字至少由字母数字和之外的某个字符分隔`_`，所以我曾经`\b`匹配单词边界。

如果要放宽条件，正则表达式引擎必须支持前瞻后瞻：

```
(?<!\d)[896]\d{7}(?!\d) 
```

在这种情况下，我只是确保整数前面或后面没有任何数字。

您的问题后跟 8 位数字，但似乎您的意思是整个数字应该有 8 位数字 - 所以我根据您的示例输入更改了答案。

用于[`Regex.Matches`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex%28v=vs.100%29.aspx)获取与正则表达式匹配的所有字符串。

# google-apps-script - Google Apps 脚本：如何在 HtmlService 中使用 js 库

> ID：13679377
> 
> 赞同：0
> 
> 时间：2012-12-03T08:13:20.357
> 
> 标签：google-apps-script

我正在尝试使用 Google Apps 脚本在谷歌网站上制作轮播。此轮播包含可动态更改的文本消息。我正在使用 jquery 来实现这一点，但 GAS HtmlService api 无法评估该 js 脚本文件。

我在我的应用程序中使用了[http://flexslider.com](http://flexslider.com)轮播。但它不起作用。我也尝试过使用 caja 游乐场，但它没有轮播实现 js 文件。我将所有必需的 js 文件上传到谷歌云存储并公开。

```
 <script type="text/javascript" src="http://commondatastorage.googleapis.com/shCore.js"></script>
 <script type="text/javascript" src="http://commondatastorage.googleapis.com/shBrushXml.js"></script>
<script type="text/javascript" src="http://commondatastorage.googleapis.com/shBrushJScript.js"></script>

 <!-- Optional FlexSlider Additions -->
<script src="http://commondatastorage.googleapis.com/jquery.easing.js"></script>
<script src="http://commondatastorage.googleapis.com/jquery.mousewheel.js"></script>
<script defer src="http://commondatastorage.googleapis.com/demo.js"></script> 
```

有什么建议可以实施吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:20:26.587

这是因为 Caja 会清理脚本并从您的 js 中过滤一些代码。[在这里](https://developers.google.com/apps-script/html_service#Caja)查看详细信息。

或者，您可以使用 Google Drive Webhost 发布您的轮播，然后使用公开可用的 iFrame 小工具将其嵌入 Google 站点。在此处查看类似的演示 [https://sites.google.com/site/appsdatepicker/test-page-2](https://sites.google.com/site/appsdatepicker/test-page-2)

# iphone - 将 NSString 转换为 NSDate 在 iPhone 中给出了错误的值和格式

> ID：13679381
> 
> 赞同：-1
> 
> 时间：2012-12-03T08:13:29.153
> 
> 标签：iphone, objective-c, nsdate

我想比较两个日期。为此，我必须使用两个字符串（fromDates 和 toDates）中的日期。

这里 fromDate 在控制台中显示正确的值。

```
//Console.
19/12/2012 from date is 
```

在 NSDateFormatter 进程之后，我得到错误的格式和日期，有时它显示为 NULL。

```
//console
First = (null) 
```

我使用了下面的方法。

```
if (fromDate) {
        self.printFromDate.text = [NSString stringWithFormat:@"%@",curBtn.dateString];
        fromDates = self.printFromDate.text;
        NSLog(@"%@ from date is",fromDates);
       dtFormatter  = [[NSDateFormatter alloc] init];
        [dtFormatter setDateFormat:@"yyyy-MM-dd"];
        NSDate *strDate = [dtFormatter dateFromString:fromDates];
        NSLog(@"First = %@",strDate);    
    } 
```

谁能告诉我我哪里错了。我完全卡在这里。提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T08:16:37.027

您的日期格式化程序不遵循字符串格式。

我想你正在寻找这个：

```
[dtFormatter setDateFormat:@"dd/MM/yyyy"];
NSDate *date1 = [dtFormatter dateFromString:fromDates];
NSDate *date2 = [dtFormatter dateFromString:anotherDate];

if ([date1 compare:date2] == NSOrderedDescending)
    NSLog(@"date1 comes first");        
else if ([date1 compare:date2] == NSOrderedAscending)
    NSLog(@"date2 comes first");
else
    NSLog(@"date1 is the same date as date2"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T08:21:18.840

```
 dtFormatter  = [[NSDateFormatter alloc] init];
        [dtFormatter setDateFormat:@"dd/MM/yyyy"];
        NSDate *strDate = [[NSDate alloc] init];
        strDate = [dtFormatter dateFromString:fromDates];
        NSLog(@"First = %@",strDate); 
```

我想这会对你有所帮助。

# javascript - 年龄验证正则表达式应该拒绝以零开头的 3 位数字返回一些奇怪的东西

> ID：13679383
> 
> 赞同：1
> 
> 时间：2012-12-03T08:13:41.440
> 
> 标签：javascript, regex

我正在尝试编写一段正则表达式代码来验证具有 1、2 或 3 位数字的简单形式的年龄。如果它有 3 位数字，则前导数字必须是 1，并且前导数字永远不会是 0。

到目前为止我所拥有的：

`/^1[0-9][0-9]$|^[0-9][0-9]$|^[0-9]$/`

这种奇怪行为的一个例子：

```
> myRe = /^1[0-9][0-9]$|^[0-9][0-9]$/;
> myRe.exec(023);
["19"]
> myRe.exec(052);
["42"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:17:06.693

`023`是一个数字，正则表达式不适用于数字。所以 JavaScript 首先将数字转换为字符串。并且因为零，它是一个八进制数；所以 023 实际上是`2 * 8 + 3`，而不是`2 * 10 + 3`。

你想做的`myRe.exec("023")`。此外，您可能想要修改您的正则表达式，以便两位数分支中的第一个数字和最后一个分支中的单个数字读取`[1-9]`，而不是`[0-9]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T08:20:03.300

如果您以 0 开头的数字文字，它将被解释为八进制（以 8 为基数）。所以 052（以 8 为底）实际上是 42（以 10 为底）。然后将其转换为字符串（“42”）并进行正则表达式。

就您的正则表达式而言：我会像这样改进它：

```
/^1[0-9][0-9]$|^[1-9][0-9]$|^[0-9]$/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T08:17:20.817

在表达式中

```
myRe.exec(023); 
```

`023`是一个八进制数。您要检查的是一个字符串。所以用引号括起来

`/^1?\d{1,2}$/`- 这是同一正则表达式的更短且更易读的版本。

或者`/^1?\d?\d$/`你更喜欢哪个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T08:17:51.240

您正在将您的 RegExp 应用于一个数字。RegExps 需要一个字符串参数。

所以：

```
> myRe = /^1[0-9][0-9]$|^[0-9][0-9]$/;
> myRe.exec('023');
null
> myRe.exec('23');
["23"]
> myRe.exec('052');
null
> myRe.exec('52');
["52"] 
```

正如预期的那样。

# conflict - 我们如何解决这个 Yacc 冲突

> ID：13679384
> 
> 赞同：2
> 
> 时间：2012-12-03T08:13:47.760
> 
> 标签：conflict, yacc, reduce

```
%token A B C D E F G H
%%
x : y H y | z H z
;

y : G | t |  y B G | y B t
;

z : w | z D w
;

w : C | t | E z F
;

t : A
; 
```

由于 t 存在减少/减少冲突。我们该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:33:10.000

默认情况下，y: t 和 w: t 之间的冲突以 y: t 的方式解决。如果你想要它的另一种方式，重新排序相应的规则。或者您可以像这样扩展其中一个：-

```
%token A B C D E F G H
%%
x : y H y | z H z
;

w : C | A | E z F
;

z : w | z D w
;

y : G |  A B G | A B A | y B G | y B A
; 
```

请注意，我已经摆脱了 t 规则并删除了 y: 通过扩展它的规则：-

第 1 步：消除 t: A 规则

```
%token A B C D E F G H
%%
x : y H y | z H z
;

y : G | A |  y B G | y B A
;

z : w | z D w
;

w : C | A | E z F
; 
```

第2步：

```
%token A B C D E F G H
%%
x : y H y | z H z
;

y : G | A |  A B G | A B A | y B G | y B A
;

z : w | z D w
;

w : C | A | E z F
; 
```

# windows-phone-7 - 页面内的链接在 Windows phone 网络浏览器中不起作用

> ID：13679387
> 
> 赞同：2
> 
> 时间：2012-12-03T08:13:52.047
> 
> 标签：windows-phone-7, webbrowser-control

我在 Windows phone 7 中使用 Web 浏览器控件，我想在页面内导航

```
<ul>
 <li>
    <a href="#chapter-1_xhtml">Section 1</a>
 </li>
 <li>
    <a href="#chapter-2_xhtml">Section 2</a>
 </li>
</ul> 
```

然后我用

```
<a name="chapter-1_xhtml" id="chapter-1_xhtml"></a>
...............The Div and other code..............
<a name="chapter-2_xhtml" id="chapter-2_xhtml"></a>
...............The Div and other code.............. 
```

它在桌面浏览器中完美运行，但是当我在 Windows 手机模拟器中运行相同的代码时，它不工作，并且在混蛋之后它停留在那里。

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:08:23.953

通过将函数添加到 Html

```
function ScrollTo(Id) {
        document.getElementById(Id).scrollIntoView();
    } 
```

并在按钮单击时调用以下代码实现了我的目标。

```
this.webBrowser.InvokeScript("ScrollTo", "chapter-1_xhtml"); 
```

# c++ - 如何打印 BST 中特定范围内的数字，从最高到最低，访问的节点最少？

> ID：13679391
> 
> 赞同：0
> 
> 时间：2012-12-03T08:14:13.453
> 
> 标签：c++, search, binary-search-tree

对于 BST，我想在 [a,b] 中找到节点的值，从最大值到最小值。我能想到的最简单的方法如下：

```
void printRange(BSTNode<Key,E>* root,int lowValue,int highValue) const
{
    if(root==NULL) return;

    printRange(root->right(),lowValue,highValue);
    if(root->key()>=lowValue&&root->key()<=highValue)
        cout<<root->key()<<" ";

    printRange(root->left(),lowValue,highValue);
} 
```

但我想知道是否有一种方法可以打印出访问的节点较少的这些值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:31:44.227

您正在访问 BST 的所有节点，无论它们是否在范围内。并且只打印所需的值。更精细的算法是：

1.  对 BST 进行中序遍历。

2.  从根开始。

3.  仅当左子树的根小于“lowValue”时才处理左子树以进行中序遍历

4.  仅当右子树的根大于“highValue”时才处理右子树

5.  否则只是从函数返回。

    这样您就可以进行过滤的中序遍历，仅访问 BST 的所需部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-01T05:03:26.490

这个问题的答案，是伪代码，应该是这样的：

```
void printRange(int lower, int upper, BSTNode * node){
  if (node == NULL) return
  if (node->key <= upper) printRange(lower, upper, node->right);
  if (node->key >= lower && node->key <= upper) printf("%d",node->value);
  if (node->key >= lower) printRange(lower, upper, node->left);
} 
```

# visual-studio-2010 - SQL Server Compact Edition 4 在哪里？

> ID：13679395
> 
> 赞同：0
> 
> 时间：2012-12-03T08:14:22.767
> 
> 标签：visual-studio-2010, sql-server-ce

我安装了 Visual Studio 2010 Prof 和 sp1。当我去服务器添加新连接并使用 SQL Server Compact 创建新数据库时。

除了 3.5 之外没有 SQL Server Compact 4 选项吗？

我试图为 vs2010 和 SQL Server Compact 运行工具，我需要安装我已经出现的 sp1 错误？

如何在 vs2010 中创建精简版的数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:17:21.450

您需要从[Microsoft 下载中心](http://www.microsoft.com/en-us/download/details.aspx?id=30709)下载 SQL Server Compact Edition v4并进行安装。

它不是 VS 2010 的一部分（因为它是在 VS 2010 之后发布的）

**更新：**您是否还下载并安装了[适用于 SQL Server Compact 4 的 Visual Studio 2010 SP1 工具](http://erikej.blogspot.ch/2010/12/visual-studio-tools-for-sql-server.html)？

**更新 #2：**抱歉，无法重现您的问题 - 在我下载并安装了这些位（SQL Server CE 4 运行时 + VS 2010 工具）之后，我确实`SQL Server Compact 4.0`在我的 VS 2010`Server Explorer > Add Connection`对话框中得到了：

![在此处输入图像描述](../Images/51a1fb445ab82fef541bb2988abfa985.png)

# alloy - 合金关系事实

> ID：13679396
> 
> 赞同：0
> 
> 时间：2012-12-03T08:14:34.300
> 
> 标签：alloy

以下是我迄今为止的部分工作。由于某种原因，我的线路和从消息到线路的单一连接之间存在循环和双向连接。我不明白为什么线路连接的消息永远不会超过一条。我的事实可能（很可能）有点错误。谢谢您的帮助。

```
some sig Line{  
    nextLine: some Line,
}

sig Message{
    formedOfLines: Line,
}
fact MessageHasMoreThan1LineHasNextLine{
    all m:Message|#m.formedOfLines>1 implies #m.formedOfLines.nextLine>0
}
fact NoNextLineIsSelf
{
   all l1,l2:Line | l1=l2 implies l1.nextLine!=l2
}
fact LineBelongsToSomeMessage
{
    all l:Line | l in Message.formedOfLines
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T17:33:30.160

您的模型允许每个`Line`都有多个`nextLine`s，这可能不是您的意图。这就是为什么您的`NoNextLineIsSelf`事实实际上并不能防止循环的原因，因为`l.nextLine != l`如果`l.nextLine`包含多个`Line`并且其中之一是`l`. 您可以将该事实重写为

```
all l: Line | l !in l.nextLine 
```

禁止所有循环。

要禁止行之间的“双向连接”，您可以编写类似

```
all disj l1, l2: Line | l2 in l1.nextLine implies l1 !in l2.nextLine 
```

（我不确定你的哪一个事实应该这样做）

如果您希望 a`Message`有超过 1 行，则应将 a 的多重性更改`formedOfLines`为`set`，即

```
sig Message {
  formedOfLines: set Line
} 
```

# java - 使用导航栏后返回熄灯模式？

> ID：13679400
> 
> 赞同：0
> 
> 时间：2012-12-03T08:14:47.523
> 
> 标签：java, android, android-view

在我的一项活动中，我希望我的 UI 始终变暗。当用户按下导航按钮（返回、主页、最近的应用程序）时，它应该表现得像往常一样，但是当焦点回到我的活动时，它应该回到熄灯状态。目前，我有熄灯工作，但在我按下最近的应用程序后，灯永远亮着。

如何让我的应用程序始终处于熄灯状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:17:09.663

想出了一些有用的东西。

```
@Override
public void onWindowFocusChanged(boolean hasFocus) {
    if (hasFocus) {
                lightsOut();
            }
    }
} 
```

基本上，每次我的应用程序获得焦点时，它都会强制熄灯（可能是多余的，但这并不重要）。

奇迹般有效！

# iphone - Cocos2d App 在 iPhone 5 上启动图像后崩溃？

> ID：13679403
> 
> 赞同：0
> 
> 时间：2012-12-03T08:15:14.300
> 
> 标签：iphone, cocos2d-iphone, iphone-5

我已经搜索过，几乎没有这方面的信息。我的朋友有一部 iPhone 5，我给他发了我的应用程序的构建，它安装得很好。他去打开应用程序，它在启动屏幕后崩溃。我现在无法从他那里得到崩溃报告，所以我想知道是否有人知道快速修复或为什么它会在 iPhone 5 上崩溃并在运行相同版本 iOS 的 iPhone 4s 上完美运行的原因作为他的 iPhone 5？

我有最新版本的 iOS 版 cocos2d，如果你愿意，我可以发布我的应用程序委托/介绍层。但在大多数情况下，它是默认的东西。

有什么想法或明显的事情要改变吗？

我将发布我的应用程序委托：

```
// Create the main window
    window_ = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    // Create an CCGLView with a RGB565 color buffer, and a depth buffer of 0-bits
    CCGLView *glView = [CCGLView viewWithFrame:[window_ bounds]
                                   pixelFormat:kEAGLColorFormatRGB565   //kEAGLColorFormatRGBA8
                                   depthFormat:0    //GL_DEPTH_COMPONENT24_OES
                            preserveBackbuffer:NO
                                    sharegroup:nil
                                 multiSampling:NO
                               numberOfSamples:0];

    director_ = (CCDirectorIOS*) [CCDirector sharedDirector];

    director_.wantsFullScreenLayout = YES;

    // Display FSP and SPF
    [director_ setDisplayStats:YES];

    // set FPS at 60
    [director_ setAnimationInterval:1.0/60];

    // attach the openglView to the director
    [director_ setView:glView];

    // for rotation and other messages
    [director_ setDelegate:self];

    // 2D projection
    [director_ setProjection:kCCDirectorProjection2D];
//  [director setProjection:kCCDirectorProjection3D];

    // Enables High Res mode (Retina Display) on iPhone 4 and maintains low res on all other devices
    [director_ enableRetinaDisplay:NO];

    // Default texture format for PNG/BMP/TIFF/JPEG/GIF images
    // It can be RGBA8888, RGBA4444, RGB5_A1, RGB565
    // You can change anytime.
    [CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_RGBA8888];

    // If the 1st suffix is not found and if fallback is enabled then fallback suffixes are going to searched. If none is found, it will try with the name without suffix.
    // On iPad HD  : "-ipadhd", "-ipad",  "-hd"
    // On iPad     : "-ipad", "-hd"
    // On iPhone HD: "-hd"
    CCFileUtils *sharedFileUtils = [CCFileUtils sharedFileUtils];
    [sharedFileUtils setEnableFallbackSuffixes:NO];             // Default: NO. No fallback suffixes are going to be used
    [sharedFileUtils setiPhoneRetinaDisplaySuffix:@"-hd"];      // Default on iPhone RetinaDisplay is "-hd"
    [sharedFileUtils setiPadSuffix:@"-ipad"];                   // Default on iPad is "ipad"
    [sharedFileUtils setiPadRetinaDisplaySuffix:@"-ipadhd"];    // Default on iPad RetinaDisplay is "-ipadhd"

    // Assume that PVR images have premultiplied alpha
    [CCTexture2D PVRImagesHavePremultipliedAlpha:YES];

    // and add the scene to the stack. The director will run it when it automatically when the view is displayed.
    [director_ pushScene: [IntroLayer scene]]; 

    // Create a Navigation Controller with the Director
    navController_ = [[UINavigationController alloc] initWithRootViewController:director_];
    navController_.navigationBarHidden = YES;

    // set the Navigation Controller as the root view controller
//  [window_ addSubview:navController_.view];   // Generates flicker.
    [window_ setRootViewController:navController_];

    // make main window visible
    [window_ makeKeyAndVisible];

    // load game center
    [GameCenterManager loadState];
    [[GameCenterManager sharedGameCenterManager] authenticateLocalPlayer]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:02:24.420

发现问题，我的 GameCenter 本地玩家身份验证需要启用纵向，而横向是唯一启用的。

# haskell - 如何将 HamletSettings 应用于 Hamlet 中的 quasiquote？

> ID：13679433
> 
> 赞同：2
> 
> 时间：2012-12-03T08:17:59.673
> 
> 标签：haskell, template-haskell, hamlet

**背景**：我正在研究哈姆雷特是如何工作的，有 WAI，但没有 Yesod。我没有掌握模板 Haskell，但在我深入研究它之前，我想知道是否有一个已知/快速的解决方案来完成这项任务。

**细节**：我想知道如何在 Hamlet quasiquote 的上下文中更改[NewlineStyle](http://hackage.haskell.org/packages/archive/hamlet/1.1.1.1/doc/html/Text-Hamlet.html#t%3aNewlineStyle)。

**探索**：我相信这与看起来像这样的函数调用有关

```
hamletWithSettings 
htmlRules 
HamletSettings 
  {
      hamletDoctype             = "<!DOCTYPE html>"
     ,hamletNewlines            = DefaultNewlineStyle
     ,Hamlet.hamletCloseStyle   = htmlCloseStyle -- this fn is in a hidden module 
     ,Hamlet.hamletDoctypeNames = []
  } 
```

...但是，在准引用的上下文中，我不知道如何编写执行此操作的代码。

这是我希望修改的**工作代码：**

```
{-# LANGUAGE OverloadedStrings #-} 
{-# LANGUAGE QuasiQuotes #-}

import Control.Monad.Trans.Resource
import Text.Hamlet                                  as Hamlet
import qualified Data.ByteString.Lazy.Char8         as ByteString
import qualified Network.Wai                        as Wai
import qualified Network.HTTP.Types                 as Http
import qualified Network.Wai.Handler.Warp           as Warp
import qualified Text.Blaze                         as Blaze 
import qualified Text.Blaze.Html.Renderer.String    as Blaze
-------------------------------------------------------------------------------
main :: IO ()
main = Warp.run 3000 application
-------------------------------------------------------------------------------
application :: Wai.Request -> ResourceT IO Wai.Response
application request = return $
    case (head $ Wai.pathInfo request) of
        "html" ->   
            Wai.responseLBS Http.status200  []  $ ByteString.pack 
                                                $ Blaze.renderHtml 
                                                $ htmlDoc -- defined below
        "d3" ->     
            Wai.ResponseFile Http.status200 [] "./d3.v2.min.js" Nothing
        _ ->        
            Wai.responseLBS Http.status400  [] "" 
-------------------------------------------------------------------------------
htmlDoc :: Hamlet.Html
htmlDoc = [shamlet|
!!!
<html>
    <head>
        <title>Study Graph
        <!-- <link rel="stylesheet" type="text/css" href="/css"> -->
        <script type="text/javascript" src="/d3" />
        <style>
        <script>
            window.onload = function()
            {
                svg = 
                    d3  .select("body")
                        .append("svg")
                        .attr("width", "100%")
                        .attr("height", "100%")
                /* SOLUTION to strawman: a solitary "\" on this code row, will render a single newline character; i.e. "\n\\\n" renders as "\n" */
                svg .selectAll("circle")
                    .data([ {"cx": 1.0, "cy": 1.1, "r":1}, 
                            {"cx": 2.0, "cy": 2.5, "r":0.9} ])

            }
    <body>
|]
------------------------------------------------------------------------------- 
```

**提前**感谢您的任何帮助、侮辱或其他评论。****

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T08:39:45.847

基本思想是创建一个新的标识符，例如：

```
myHamlet = hamletWithSettings 
  htmlRules 
  (   HamletSettings 
    "<!DOCTYPE html>" 
    DefaultNewlineStyle htmlCloseStyle doctypeNames ) 
```

然后使用`myHamlet`代替`hamlet`，例如：

```
htmlDoc = [myHamlet|...|] 
```

由于阶段限制，您可能需要`myHamlet`在与使用它的模块不同的模块中声明。**

# asp.net-mvc - Getmany 的 Lambda 表达式未在单元测试中过滤

> ID：13679441
> 
> 赞同：0
> 
> 时间：2012-12-03T08:18:16.057
> 
> 标签：asp.net-mvc, lambda, nunit, moq

我在存储库方法中使用 GetMany() 的 lambda 表达式来过滤大量值中的一些值。它在 Mvc 代码中运行良好。但是当我编写单元测试时，我为存储库做了一个模拟，并给出了如下所示的设置

```
focusRepository.Setup(x => x.GetMany(It.IsAny<Expression<Func<Focus, bool>>>())).Returns(fakeFocus); 
```

但这不起作用。它没有过滤值。相反，它返回 null 或所有值。整个测试方法是

```
 IEnumerable<Focus> fakeFocus = new List<Focus> 
        {
        new Focus { FocusId = 1, FocusName="Test1",GroupId = 1},
         new Focus { FocusId = 2, FocusName="Test2",GroupId = 1},
        new Focus { FocusId = 3, FocusName="Test3",GroupId = 2}
      }.AsEnumerable();
        focusRepository.Setup(x => x.GetMany(It.IsAny<Expression<Func<Focus, bool>>>())).Returns(fakeFocus);

        GroupGoalFormModel goal = new GroupGoalFormModel();
        GroupController controller = new GroupController();

        ViewResult result = controller.CreateGoal(2) as ViewResult;

        Assert.IsNotNull(result, "View Result is null");
        Assert.IsInstanceOf(typeof(GroupGoalFormModel),
            result.ViewData.Model, "Wrong View Model"); 
```

在我的存储库中，我将代码编写为

```
 IEnumerable<T> GetMany(Expression<Func<T, bool>> where); 
```

谁能帮帮我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:26:37.243

您正在指定您的方法应返回的确切结果，无论调用哪个参数。所以当然你的方法总是返回相同的结果。

应该有它自己的`Repository`测试，您可以在其中检查每个过滤器是否返回正确的结果。测试 时`Controller`，您模拟`Repository`结果并对结果进行硬编码。

# android - android mock gps 在真实设备上不起作用

> ID：13679443
> 
> 赞同：1
> 
> 时间：2012-12-03T08:18:22.447
> 
> 标签：android, gps

我已经添加了：

```
uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"
uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" 
```

和下面的代码：

```
public class MockGpsProviderActivity extends Activity implements LocationListener {
public static final String LOG_TAG = "MockGpsProviderActivity"; 
private static final String MOCK_GPS_PROVIDER_INDEX = "GpsMockProviderIndex";

private MockGpsProvider mMockGpsProviderTask = null;
private Integer mMockGpsProviderIndex = 0;

/** Called when the activity is first created. */
/* (non-Javadoc)
 * @see android.app.Activity#onCreate(android.os.Bundle)
 */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    /** Use saved instance state if necessary. */
    if(savedInstanceState instanceof Bundle) {
        /** Let's find out where we were. */
        mMockGpsProviderIndex = savedInstanceState.getInt(MOCK_GPS_PROVIDER_INDEX, 0);
    }

    /** Setup GPS. */
    LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    if(locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)){ 
        // use real GPS provider if enabled on the device
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
    }
    else if(!locationManager.isProviderEnabled(MockGpsProvider.GPS_MOCK_PROVIDER)) {
        // otherwise enable the mock GPS provider
        locationManager.addTestProvider(MockGpsProvider.GPS_MOCK_PROVIDER, false, false,
                false, false, true, false, false, 0, Criteria.ACCURACY_HIGH);
        locationManager.setTestProviderEnabled(MockGpsProvider.GPS_MOCK_PROVIDER, true);
    }  

    if(locationManager.isProviderEnabled(MockGpsProvider.GPS_MOCK_PROVIDER)) {
        locationManager.requestLocationUpdates(MockGpsProvider.GPS_MOCK_PROVIDER, 0, 0, this);

        /** Load mock GPS data from file and create mock GPS provider. */
        try {
            // create a list of Strings that can dynamically grow
            List<String> data = new ArrayList<String>();

            /** read a CSV file containing WGS84 coordinates from the 'assets' folder
             * (The website http://www.gpsies.com offers downloadable tracks. Select
             * a track and download it as a CSV file. Then add it to your assets folder.)
             */         
            InputStream is = getAssets().open("mock_gps_data.csv");
            BufferedReader reader = new BufferedReader(new InputStreamReader(is));

            // add each line in the file to the list
            String line = null;
            while ((line = reader.readLine()) != null) {
                data.add(line);
            }

            // convert to a simple array so we can pass it to the AsyncTask
            String[] coordinates = new String[data.size()];
            data.toArray(coordinates);

            // create new AsyncTask and pass the list of GPS coordinates
            mMockGpsProviderTask = new MockGpsProvider();
            mMockGpsProviderTask.execute(coordinates);
        } 
        catch (Exception e) {}
    }
}

@Override
public void onDestroy() {
    super.onDestroy();

    // stop the mock GPS provider by calling the 'cancel(true)' method
    try {
        mMockGpsProviderTask.cancel(true);
        mMockGpsProviderTask = null;
    }
    catch (Exception e) {}

    // remove it from the location manager
    try {
        LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        locationManager.removeTestProvider(MockGpsProvider.GPS_MOCK_PROVIDER);
    }
    catch (Exception e) {}
}

@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
    // store where we are before closing the app, so we can skip to the location right away when restarting
    savedInstanceState.putInt(MOCK_GPS_PROVIDER_INDEX, mMockGpsProviderIndex);
    super.onSaveInstanceState(savedInstanceState);
}

@Override
public void onLocationChanged(Location location) {
    // show the received location in the view
    TextView view = (TextView) findViewById(R.id.text);
    view.setText( "index:" + mMockGpsProviderIndex
            + "\nlongitude:" + location.getLongitude() 
            + "\nlatitude:" + location.getLatitude() 
            + "\naltitude:" + location.getAltitude() );     
}

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub      
}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub      
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub      
}

/** Define a mock GPS provider as an asynchronous task of this Activity. */
private class MockGpsProvider extends AsyncTask<String, Integer, Void> {
    public static final String LOG_TAG = "GpsMockProvider";
    public static final String GPS_MOCK_PROVIDER = "GpsMockProvider";

    /** Keeps track of the currently processed coordinate. */
    public Integer index = 0;

    @Override
    protected Void doInBackground(String... data) {         
        // process data
        for (String str : data) {
            // skip data if needed (see the Activity's savedInstanceState functionality)
            if(index < mMockGpsProviderIndex) {
                index++;
                continue;
            }               

            // let UI Thread know which coordinate we are processing
            publishProgress(index);

            // retrieve data from the current line of text
            Double latitude = null;
            Double longitude = null;
            Double altitude= null;
            try {
                String[] parts = str.split(",");
                latitude = Double.valueOf(parts[0]);
                longitude = Double.valueOf(parts[1]);
                altitude = Double.valueOf(parts[2]);
            }
            catch(NullPointerException e) { break; }        // no data available
            catch(Exception e) { continue; }                // empty or invalid line

            // translate to actual GPS location
            Location location = new Location(GPS_MOCK_PROVIDER);
            //location.setLatitude(latitude);
            //location.setLongitude(longitude);

            location.setLatitude(39.794952);
            location.setLongitude(116.515134);
            location.setAltitude(10);
            //location.setAccuracy(4);
            location.setTime(System.currentTimeMillis());

            // show debug message in log
            Log.d(LOG_TAG, location.toString());

            // provide the new location
            LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
            locationManager.setTestProviderLocation(GPS_MOCK_PROVIDER, location);

            // sleep for a while before providing next location
            try {
                Thread.sleep(200);

                // gracefully handle Thread interruption (important!)
                if(Thread.currentThread().isInterrupted())
                    throw new InterruptedException("");
            } catch (InterruptedException e) {
                break;
            }

            // keep track of processed locations
            index++;
        }

        return null;
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        Log.d(LOG_TAG, "onProgressUpdate():"+values[0]);
        mMockGpsProviderIndex = values[0];
    }
} 
```

}

我启动 mockgps 应用程序，然后按主页按钮使其成为背景。然后我编写了另一个测试应用程序，它可以读取纬度、经度、高度。但是当我打开谷歌地图应用程序时，谷歌地图总是说“找不到”。有什么问题？

谢谢。

# php - Mysql查询插入新行

> ID：13679445
> 
> 赞同：0
> 
> 时间：2012-12-03T08:18:38.400
> 
> 标签：php, mysql

我有这三张桌子零售商，imovo，rbpos_epos。我所做的是匹配它们，并得到我打印在页面中的结果。

我需要做的是将这些结果插入到一个新表中，我将创建一个“匹配”按钮，该按钮将查询两个表零售商和 imovo，匹配项将转到名为：matching 的新表。

为了避免重复，我需要的是从零售商表和 imovo 中删除匹配的行..

这是我用来匹配的查询：

```
 $data = mysql_query( "select r.`time`, r.`epos_id`, r.`date`,re.`location`,i.`user_id`,i.`mobile_number`,
       i.`time`, i.`rbpos_id`, i.`date`
from retailer r
join rbpos_epos re on r.epos_id = re.epos_id
join imovo i on i.rbpos_id = re.rbpos_id
             and addtime(r.`time`, '0:0:50') > i.`time`
             and r.`time` < i.`time`
             and r.`date` = i.`date`;
") 
 or die(mysql_error()); 
 Print "<table border cellpadding=3>"; 
  Print "<tr>"; 
 Print "<th>Date:</th>
<th>Time</th>
<th>Location</th>
<th>User ID</th> 
<th>Mobile Number</th>"; 
  Print "</tr>";
 while($info = mysql_fetch_array( $data )) 
 { 

   Print "<tr>"; 
 Print " <td>".$info['date'] . "</td>
<td>".$info['time'] . " </td>
<td>".$info['location'] . " </td>
<td>".$info['user_id'] . " </td>
<td>".$info['mobile_number'] . " </td>
</tr>"; 
 } 
```

打印的行是我需要在匹配表中插入的行。谢谢！

我试过这个：

```
 $data = mysql_query( "INSERT INTO Matching(date, time, location, user_id, phone)
SELECT 
   r.`date`,
   `time`,
   re.`location`,
   i.`user_id`,
   i.`mobile_number`
from retailer r
join rbpos_epos re on r.epos_id = re.epos_id
join imovo i on i.rbpos_id = re.rbpos_id
and addtime(r.`time`, '0:0:50') > i.`time`
and r.`time` < i.`time`
and 
```

河。`date`= 我。`date`; ") 但我得到错误：

```
Column count doesn't match value count at row 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:20:35.750

使用[`INSERT INTO ... SELECT ...`](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)：

```
INSERT INTO Matching(date, time, location, user_id, phone)
SELECT 
   r.`date`,
   `time`,
   re.`location`,
   i.`user_id`,
   i.`mobile_number`
from retailer r
join rbpos_epos re on r.epos_id = re.epos_id
join imovo i on i.rbpos_id = re.rbpos_id
and addtime(r.`time`, '0:0:50') > i.`time`
and r.`time` < i.`time`
and r.`date` = i.`date`; 
```

然后您必须在单击`INSERT`按钮时执行此`match`操作。

**更新：**如果要删除匹配的行。你可以[`DELETE`用`JOIN`](http://dev.mysql.com/doc/refman/5.0/en/delete.html). 就像是：

```
DELETE r, re, i
from retailer r
join rbpos_epos re on r.epos_id = re.epos_id
join imovo i on i.rbpos_id = re.rbpos_id
and DATE(r.`date`) = DATE(i.`date`); 
```

这将从所有三个表中删除所有匹配的行，如手册中所述：

> 对于多表语法，DELETE 从每个 tbl_name 中删除满足条件的行。

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/fafe6/1)

**请注意：**最好使用单列`DATETIME`而不是两个单独的部分`date`，`time`就像我在演示中所做的那样。然后你可以使用 MySQL 的日期和时间函数来控制它们，就像我在 join condition 中所做的那样`DATE(r.date) = DATE(i.date)`。

# asp.net-mvc-3 - 为 Telerik 上传控制实现防伪

> ID：13679451
> 
> 赞同：2
> 
> 时间：2012-12-03T08:18:45.937
> 
> 标签：asp.net-mvc-3, csrf, telerik-mvc, antiforgerytoken

当一个 ajax 调用时，我遇到了为 POST 方法实现防伪令牌，我在这里做的几件事是

[1]包括`[ValidateAntiForgeryToken]`我的 POST 控制器方法的属性。

[2]在我的 js 中更改`$.ajax`调用。`$.ajaxAntiForgery`

同样，我有一个telerik上传控件，我从cshtml触发控制器方法（而不是ajax调用）-下面的cshtml代码片段

```
@{ var upload = @Html.Telerik().Upload()
                .Name("attachments")
                .Multiple(true)
                .Async(async => async.Save("MyMethodName", "MyConrollerName") 
```

在这种情况下，如何实施防伪？我需要在 cshtml、控制器中做哪些更改？

谢谢， 阿达什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T22:33:00.967

您好，如果您使用 MVC 的 Kendo Upload 包装器，防伪将自动发送到服务器。

由于您使用的是旧扩展，您可能需要使用[OnUpload](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-upload-client-api-and-events.html#OnUpload)事件手动查找该值并将其发送到服务器。

例如

```
function onMyUpload(e){
    e.data = { "__RequestVerificationToken": $('input[name=__RequestVerificationToken]').val() };
} 
```

# php - 将 json 传递给 php 并更新 mysql

> ID：13679452
> 
> 赞同：2
> 
> 时间：2012-12-03T08:18:46.483
> 
> 标签：php, mysql, json

我正在尝试通过 json 将图像坐标传递给应该更新数据库的 php 文件。我在jquery中有这个：

```
var coords=[];  
var coord = $(this).position();  
var item = { coordTop:  coord.top, coordLeft: coord.left  };  
coords.push(item);  
var order = { coords: coords };  
$.ajax({   
    type: "POST",
    data : +$.toJSON(order), 
    url: "updatecoords.php",   
    success: function(response){
        $("#respond").html('<div class="success">X and Y Coordinates 
            Saved</div>').hide().fadeIn(1000);  
        setTimeout(function(){ 
            $('#respond').fadeOut(1000); 
        }, 2000);  
    }
}); 
```

这是 updatecoords.php 的样子：

```
<?php

$db = Loader::db(); 

$data = json_decode($_POST['data']); 
foreach($data->coords as $item) {  

    $coord_X = preg_replace('/[^\d\s]/', '', $item->coordTop);  
    $coord_Y = preg_replace('/[^\d\s]/', '', $item->coordLeft);  

    $x_coord = mysql_real_escape_string($coord_X); 
    $y_coord = mysql_real_escape_string($coord_Y);

    $db->Execute("UPDATE coords SET x_pos = '$x_coord', y_pos = '$y_coord'");
}  

?> 
```

成功消息从 javascript 显示，但是数据库中没有更新？有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:24:17.373

您在 $.toJSON 之前有一个 +。这意味着它返回的 json 字符串将被转换为整数 - 可能是 0 或 NaN。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:28:52.047

Alex 是对的，但您也可以从 preg_replace 模式中取出引号。PHP 自然地使用 /.../ 斜线来“引用”正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T22:02:58.977

感谢您的帮助，但这似乎可以解决问题....

在 JavaScript 中：

```
$.post('updatecoords.php', 'data='+$.toJSON(order), function(response){ alert (response + mydata); 
```

在 Updatecoords.php 中：

```
$data = json_decode(stripcslashes($_POST['data'])); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T08:33:18.813

尝试这个

```
 UPDATE coords SET x_pos = '".$x_coord."', y_pos = '".$y_coord."' 
```

并在这里查看如何使用[toJSON](http://www.w3schools.com/jsref/jsref_tojson.asp)

编辑 ：

尝试这个

```
 $.ajax({   
type: "POST",
data : { coordTop:  coord.top, coordLeft: coord.left ,coords: coords }, 
```

在第二个代码中这样做

```
 $data = json_decode($_POST['data']); 
   $coordTop = mysql_real_escape_string($_POST['coordTop']);
   $coordLeft = mysql_real_escape_string($_POST['coordLeft']);
   $coords = mysql_real_escape_string($_POST['coords']);
  foreach(.........
  .....
  ..... 
```

然后使用这些变量 $coordTop ， $coordLeft ， $coords

# jquery - 如何在“ajaxComplete”处理程序中获取调用 ajax 请求的源元素

> ID：13679457
> 
> 赞同：1
> 
> 时间：2012-12-03T08:19:23.227
> 
> 标签：jquery

我正在这个网站上开发一个基于 ajax 的网站，我已经通过 ajax 调用记录了所有请求的页面。经过一个小时的搜索，我得到了一个 Histroy.js 库来管理我的状态。但我的问题是获取调用 ajax 的元素并只更新一个 div 块。所以我想要这样的东西。

```
<a href="a.php" class="ajax" data-block-to-update="a_block"> 
<div id="a_block"> 
```

当用户单击此链接时，应该进行 ajax 调用，在得到响应后，我必须更新 id 为“a_block”的 div

这是我的脚本

```
<script>
    $(document).ready(function(){
        var History = window.History;
        var State = History.getState();
        var $log = $('#log');

        History.pushState({state:'1',rand:Math.random(),content:$('#main').html(),block:'main'}, 'index', State.url);
        //History.log(State.data, State.title, State.url);

        $('.ajax').live('click',function(){
        var gen_url = $(this).attr('href');
        var bl = $(this).attr('data-block');
            $.ajax({
                url: gen_url,
                success: function(data) {
                    console.log($(this));
                  $('#'+bl).html(data);
                  History.pushState({state:gen_url,rand:Math.random(),content:data,block:bl}, gen_url, gen_url);
                }
                  });
        return false;
        });

        $.ajaxSetup({

              });

        $(document).bind("ajaxComplete", function(e, xhr, settings){
                            // need to get element which make ajax request
            console.log(xhr);
            //var obj = $(e.target.activeElement);
            //alert(obj.attr('data-block'));

        });

        History.Adapter.bind(window, 'statechange', function() {
            var State = History.getState();
            if(State.data.content!="" && State.data.block!="")
            {
                //History.log(State.data, State.title, State.url);
                $('#'+State.data.block).html(State.data.content);
            }
            else
                return false;
        });
    });

</script> 
```

如何在“ajaxComplete”事件处理程序中获取调用 ajax 请求的元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:48:02.460

如果我理解正确，我可以想到两种解决方法，一种比另一种更优雅。

第一个是有一个捕获所有数据的 php 文件，因为您使用的是 jQuery，所以我会使用[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)。

你的问题有点分散的是你想收集什么信息，如果你说想要href数据，我会写这样的东西来收集所有元素：

```
$('a[href]'); 
```

您可以使用绑定添加事件侦听器：http: [//api.jquery.com/bind/](http://api.jquery.com/bind/)

```
$('a[href]').bind('click', function()
{
    saveHistory();
    document.location = this.href;
}); 
```

并设置链接'onclick'返回false，这样当你点击链接时你不会被转移到一个站点，转移可以由javascript处理。

但是，我以前从未这样做过，这只是我对这个主题的快速想法。希望它可以有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:17:08.237

据我了解，您的问题是将对象传递给其他函数。

如果是这样，您需要在第一个函数之外声明一个变量，并使用该函数将数据保存在该变量中。在函数中初始化的所有变量都在函数末尾被删除。

在您的情况下，我会说您的代码只有一点点变化：

```
<script>
$(document).ready(function(){
    var ajax_element;
    // Do all you need as before…

    $('.ajax').live('click',function(){
    ajax_element = $(this);
    var gen_url = $(this).attr('href');
    var bl = $(this).attr('data-block');
        $.ajax({
            url: gen_url,
            success: function(data) {
                console.log($(this));
              $('#'+bl).html(data);
              History.pushState({state:gen_url,rand:Math.random(),content:data,block:bl}, gen_url, gen_url);
            }
              });
    return false;
    });
    // Etc…

    $(document).bind("ajaxComplete", function(e, xhr, settings){
        // need to get element which make ajax request ->
        // the element you want to catch here is: ajax_element
        console.log(xhr);
        //var obj = $(e.target.activeElement);
        //alert(obj.attr('data-block'));

    });
})
</script> 
```

您仍然必须小心，在完成 ajax 调用之前不会触发您的第二个函数。我建议创建一个可以从 ajax 成功函数中调用的函数，以确保它不会被提前触发（如果必须在之后触发）。

此外，当使用链接时，我建议从一开始就阻止正常的事件传播，一些浏览器会在执行 JS 要求的操作之前传播该操作。

# javascript - 需要 setInterval 自行停止

> ID：13679461
> 
> 赞同：0
> 
> 时间：2012-12-03T08:19:33.170
> 
> 标签：javascript, html, animation, setinterval, clearinterval

我想做一个非常简单的动画，画一个圆的中心点，然后慢慢画一条线（半径），以一个渐进的圆结束。现在，圆圈部分工作正常，它是行的代码，只是没有按我的意图工作。它只是没有停止。当用户单击画布的特定区域时，一切都会触发。

```
var lineX = 390;    
canvas.addEventListener('click',ProcessClick,false);
    function ProcessClick(toi){
        var posx = toi.layerX;
        var posy = toi.layerY;
        if(toi.layerX == undefined || toi.layerY == undefined){
            posx = toi.offsetX;
            posy = toi.offsetY;
        }
        if(posx>=315 && posx<=465 && posy>=250 && posy<=300){
            ctx.clearRect(300, 60, 180, 180);
            lineX = 390;
            var interval = setInterval(aniRadio, 50);
        }
    }//ProcessClick

    aniRadio = function(){
        if(lineX == 390){
            ctx.beginPath();
            ctx.arc(390, 150, 4, 0, Math.PI*2, true);
            ctx.closePath();
            ctx.fillStyle = "black";
            ctx.fill();
        }
        ctx.beginPath();
        ctx.moveTo(lineX, 150);
        lineX += 5;
        ctx.lineTo(lineX, 150);
        ctx.closePath();
        ctx.stroke();
        if(lineX == 465){
            clearInterval(interval);//tried calling another function that just contains this line. No luck either.
        }
    } 
```

我基本上希望间隔在线条到达一个点后自行停止，这样我就可以调用绘制圆的函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T08:22:40.253

您需要在函数`var interval`之外获取声明。`ProcessClick`这样，它就被声明为局部变量，并且`undefined`在`aniRadio`.

```
var interval;
function ProcessClick() {
  // ...
  interval = setInterval(aniRadio, 50);
}
aniRadio = ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:31:44.457

您应该使用自调用函数在主代码和回调之间共享变量。

每个函数在被调用时都会创建一个新的作用域（它是所有局部变量所在的位置）。函数可以访问其范围和父范围（调用它的函数）中的所有变量。

所以，如果你想在两个函数之间共享一个变量，你可以用一个包含共享变量的自调用函数来包装它们。

```
(function() {
    var interval;
    var lineX = 390;

    canvas.addEventListener('click',ProcessClick,false);
        function ProcessClick(toi){
            var posx = toi.layerX;
            var posy = toi.layerY;
            if(toi.layerX == undefined || toi.layerY == undefined){
                posx = toi.offsetX;
                posy = toi.offsetY;
            }
            if(posx>=315 && posx<=465 && posy>=250 && posy<=300){
                ctx.clearRect(300, 60, 180, 180);
                lineX = 390;
                interval = setInterval(aniRadio, 50);
            }
        }//ProcessClick

        aniRadio = function(){
            if(lineX == 390){
                ctx.beginPath();
                ctx.arc(390, 150, 4, 0, Math.PI*2, true);
                ctx.closePath();
                ctx.fillStyle = "black";
                ctx.fill();
            }
            ctx.beginPath();
            ctx.moveTo(lineX, 150);
            lineX += 5;
            ctx.lineTo(lineX, 150);
            ctx.closePath();
            ctx.stroke();
            if(lineX == 465){
                clearInterval(interval);//tried calling another function that just contains this line. No luck either.
            }
        }
})(); 
```

# android - 无法在滚动视图中使文本视图右对齐

> ID：13679467
> 
> 赞同：1
> 
> 时间：2012-12-03T08:20:05.470
> 
> 标签：android, android-layout, textview

我有一个文本视图，我用它在文本视图中显示阿拉伯语。因此，我想将滚动视图中的文本视图向右对齐。我尝试了几个属性以使其符合我的预期，但对我不起作用。

这是xml文件

```
<LinearLayout

  android:id="@+id/linearLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/textView1"
    android:layout_centerHorizontal="true" >
    <View
        android:id="@+id/view1"
        android:layout_width="fill_parent"
        android:layout_height="25dp" />
</LinearLayout>

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@id/linearLayout2"
    android:layout_below="@id/linearLayout1"
    android:layout_gravity="center"
    android:padding="@dimen/padding_maintextview" >

    <LinearLayout
        android:id="@+id/linearLayout5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="right"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:layout_marginBottom="23dp"
            android:gravity="right"
            android:padding="@dimen/padding_maintextview"
            android:text="@string/text"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textSize="25sp" />
    </LinearLayout>
</ScrollView>

<LinearLayout
    android:id="@+id/linearLayout2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true" >
    <View
        android:id="@+id/view2"
        android:layout_width="fill_parent"
        android:layout_height="100dp" />
</LinearLayout> 
```

如果有人可以帮助我纠正这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:35:47.347

只需 1 次更改，您就完成了

```
<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@id/linearLayout2"
    android:layout_below="@id/linearLayout1"
    android:layout_gravity="center"
    android:padding="@dimen/padding_maintextview" >

    <!-- In LinearLayout attributes,
    Replace: android:layout_width="wrap_content"
    With:    android:layout_width="fill_parent"
    -->
    <LinearLayout
        android:id="@+id/linearLayout5"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="right"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:layout_marginBottom="23dp"
            android:gravity="right"
            android:padding="@dimen/padding_maintextview"
            android:text="@string/text"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textSize="25sp" />
    </LinearLayout>
</ScrollView> 
```

# php - 上传到 Mysql 数据库时出错

> ID：13679472
> 
> 赞同：0
> 
> 时间：2012-12-03T08:20:32.877
> 
> 标签：php, mysql

我创建上传图像并将图像移动到上传文件夹。当有人上传**mysql_insert_id()**将插入唯一 ID（1、2、3、4、5 等等）和图像扩展名（jpg、gif、png）的图像时，我需要结果如下所示（1\. jpg、2.gif、3.png、4.jpg、5.gif、6.png 等等……）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:28:36.707

我认为问题在于这段代码：

```
mysql_query("INSERT INTO users VALUES('', '$image_file')") or die (mysql_error());
$image_id = mysql_insert_id();
$image_file = $image_id.'.'.$extension; 
```

看起来好像你在`$image_file`创建之前在 sql 中使用它。试试这个：

```
$image_file = $image_id.'.'.$extension;
mysql_query("INSERT INTO users VALUES('', '$image_file')") or die (mysql_error());
$image_id = mysql_insert_id(); 
```

**没有**

再次查看您的代码后，我根本看不到您`$image_file`在 sql 中使用的设置位置，我注意到您在发布我的答案后使用了返回的 mysql_insert_id ，对于那里的混乱感到抱歉。

我认为您需要`$image_file`在 sql 中使用它之前生成它，然后在您想要使用返回的 mysql_insert_id 之后再次生成。

```
$image_file = $_FILES['image']['name'];
mysql_query("INSERT INTO users VALUES('', '$image_file')") or die (mysql_error());
$image_id = mysql_insert_id(); 
```

**还**

当您重命名文件时，您还需要在创建记录后更新数据库中存储的图像名称：

```
$image_file = $_FILES['image']['name'];
mysql_query("INSERT INTO users VALUES('', '$image_file')") or die (mysql_error());
$image_id = mysql_insert_id();
$image_file = $image_id . '.' . $extension;
move_uploaded_file($_FILES["image"]["tmp_name"], "upload/".$image_file);
mysql_query("UPDATE users SET image_column = '{$image_file}' WHERE id_column = {$image_id}") or die(mysql_error()); 
```

因为您没有在 sql 语句中使用列名，所以我使用了通用术语，您需要插入自己的列。

# analytics - Sitecore Analytics：我可以在哪里配置报告并查看结果？

> ID：13679476
> 
> 赞同：1
> 
> 时间：2012-12-03T08:21:08.043
> 
> 标签：analytics, sitecore, sitecore6, sitecore-dms

我已经安装了带有更新 5 的新 Sitecore 6.5.0 和 DMS，正如它[在此博客](http://geshbach.blogspot.com/2011/12/sitecore-dms-installation.html)中所写的那样。但我仍然看不到 Sitecore Analytics。我只有参与分析，当我打开它时，它会显示与内容管理器中相同的树视图。

所以实际上的问题是：我在哪里可以配置报告并查看结果？我没有正确安装分析吗？

更新：查看数据库 - 有数据，所以我想它配置好了。我在哪里可以看到分析结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:36:45.293

您必须首先部署参与计划。

转到系统/营销中心/参与计划。

找到正确的模板，进入 Review Tab -> Workflow section -> Edit -> Deploy

现在，参与将通过 yoru 数据提供。

亲切的问候，

# python - 使用隐式类型转换实现逐点算术

> ID：13679481
> 
> 赞同：4
> 
> 时间：2012-12-03T08:21:42.097
> 
> 标签：python, functional-programming, operator-overloading, abc, python-3.3

假设我有 class `Function`，其实例是带有一个参数的可调用对象。我以直接的方式为这些类定义了逐点算术。这是我的代码的简化版本（我实际上有更复杂的行为，`__init__`但`__call__`与这个问题无关）：

```
class Function:
  '''
  >>> f = Function(lambda x : x**2)
  >>> g = Function(lambda x : x + 4)
  >>> h = f/g
  >>> h(6)
  3.6
  '''
  def __init__(self, func):
    self.func = func
  def __call__(self, value):
    return self.func(value)
  def __truediv__(self, other):
    if isinstance(other, Function):
        return Function(lambda x:self(x)/other(x))
    else:
        return NotImplemented
  # ... 
```

当我尝试允许隐式类型转换时，我被卡住了。例如，我希望能够编写：

```
>>> f = Function(lambda x : x ** 2)
>>> g = f+1
>>> g(5)
26 
```

换句话说，每当我在实例`v`旁边的算术表达式中看到一个数字对象时`Function`，我都想转换`v`为`Function(lambda x : v)`.

此外，我想为我的一些用户定义类型实现类似的行为（同样，每当我在具有`Function`对象的相同二进制算术表达式中看到它们时）。

虽然我当然可以用强力分类的常规和反射二进制算术运算符（每个检查`isinstance(v, numbers.Number)`和）来编写这个逻辑`isinstance(v, MyUserDefinedType)`，但我觉得可能有一种更优雅的方式。

另外，如果我的设计还有其他可能的改进，请告诉我。（`Function`对象很少被创建，但经常被调用，所以性能是有一定意义的。）

编辑：

为了解决@Eric 的评论，我应该澄清我有另一个用户定义的类`Functional`：

```
class Functional:
  '''
  >>> c = [1, 2, 3]
  >>> f = Functional(lambda x : x + 1)
  >>> f(c)
  [2, 3, 4]
  >>> g = Functional(lambda x : x ** 2)
  >>> h = f + g
  >>> h(c)
  [3, 7, 13]
  '''
  def __init__(self, func):
    self.func = func
  @staticmethod
  def from_function(self, function):
    return Functional(function.func)
  def __call__(self, container):
    return type(container)(self.func(c) for c in container)
  def __add__(self, other):
    if isinstance(other, Functional):
      return Functional(lambda x : self.func(x) + other.func(x))
    else:
      return NotImplemented 
```

当我在同一个算术表达式中同时看到 a`Function`和一个实例时，我想隐式转换为using方法。`Functional``Function``Functional``Functional.from_function`

因此，隐式类型转换层次结构如下：

*   功能性
*   功能
*   还要别的吗

而且我想隐式转换为在给定算术表达式中看到的这个层次结构中的最高类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:32:09.113

对于所有运营商来说，这样的事情都会很好地工作：

```
def __truediv__(self, other):
  if callable(other):
      return Function(lambda x:self(x)/other(x))
  else:
      return Function(lambda x:self(x)/other) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T08:32:45.600

一种选择是让`Function`类中的所有运算符都接受任意值，如果它们本身不是函数，这些值将应用于底层函数的结果。例如，要扩展 allow `f / 5`，when`f`是一个函数，只需修改`__truediv__`您必须的实现：

```
def __truediv__(self, other):
    if isinstance(other, Function):
        return Function(lambda x:self(x)/other(x))
    else:
        return Function(lambda x:self(x)/other) 
```

您可以选择进行一些类型检查以确保它是理智的（并尽早而不是稍后引发错误），但没有它它也可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T09:25:50.007

在阅读了评论和其他答案后，我尝试了这种方法。我发布它是为了征求意见。我喜欢我可以一口气处理这两种情况`Function`，`Functional`但我担心它在性能方面可能非常昂贵：

```
class Function:
    '''
    >>> f = Function(lambda x : x**2)
    >>> g = Function(lambda x : x + 4)
    >>> h = f/g
    >>> h(6)
    3.6
    >>> k = f + 1
    >>> k(5)
    26
    >>> m = f + (lambda x : x + 1)
    >>> m(5)
    31
    '''
    def __init__(self, arg):
        if isinstance(arg, Function):
            self.func = arg.func
        elif callable(arg):
            self.func = arg
        else:
            self.func = lambda x : arg
    def __call__(self, value):
        return self.func(value)
    def __truediv__(self, other):
        return self.__class__(lambda x:Function(self)(x)/Function(other)(x))
    def __rtruediv__(self, other):
        return self.__class__(lambda x:Function(other)(x)/Function(self)(x))
    def __add__(self, other):
        return self.__class__(lambda x:Function(self)(x)+Function(other)(x))
    def __radd__(self, other):
        return self.__class__(lambda x:Function(other)(x)+Function(self)(x))
    # ...

class Functional(Function):
    '''
    >>> c = [1, 2, 3]
    >>> f = Functional(lambda x : x + 1)
    >>> f(c)
    [2, 3, 4]
    >>> g = Functional(lambda x : x ** 2)
    >>> h = f + g
    >>> h(c)
    [3, 7, 13]
    '''
    def __call__(self, container):
        return type(container)(self.func(c) for c in container) 
```

# ruby-on-rails-3 - 添加带有图像和文本的内容的推荐方法是什么？

> ID：13679483
> 
> 赞同：0
> 
> 时间：2012-12-03T08:21:45.297
> 
> 标签：ruby-on-rails-3, content-management-system, ruby-on-rails-3.2

向我的 rails 应用程序添加内容的推荐方法是什么？带有云托管图像（如亚马逊 s3 和格式化文本）的页面？我想要的只是创建一个易于与索引页面链接的教程页面。

有没有推荐的方法而不是重新发明轮子？那里流行的宝石是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:14:09.290

如果您需要固定内容，您只需在公用文件夹中使用您需要的 html 创建一个 html，然后直接从您的索引视图链接到它们。

为了将图像存储在云中，只需将它们上传并放置一个指向您页面固定内容的参考链接即可。

否则，如果您正在构建一个动态页面，您可以上传新图像等......

使用[回形针](https://github.com/thoughtbot/paperclip)宝石。这是不重新发明轮子的好方法！

# matlab - matlab曲线拟合工具，cftool，生成代码函数不给同样的拟合

> ID：13679485
> 
> 赞同：1
> 
> 时间：2012-12-03T08:21:47.040
> 
> 标签：matlab, curve-fitting

我正在使用 Matlab 的曲线拟合工具`cftool`来拟合我拥有的一组点。我面临的问题是生成代码功能不会给我与`cftool`.

这不是我想要的，因为我希望能够从残差图中检索数据。我也可以从中复制功能`cftool`并手动执行。但我不明白为什么生成的代码不会给我同样的曲线拟合。

`cftool`会话文件：[http](http://dl.dropbox.com/u/20782274/test.sfit) : //dl.dropbox.com/u/20782274/test.sfit

Matlab 生成的代码：

```
function [fitresult, gof] = createFit1(Velocity, kWhPerkm)
%CREATEFIT1(VELOCITY,KWHPERKM)
%  Create a fit.
%
%  Data for 'untitled fit 3' fit:
%      X Input : Velocity
%      Y Output: kWhPerkm
%  Output:
%      fitresult : a fit object representing the fit.
%      gof : structure with goodness-of fit info.
%
%  See also FIT, CFIT, SFIT.

%  Auto-generated by MATLAB on 02-Dec-2012 16:36:19

%% Fit: 'untitled fit 3'.
[xData, yData] = prepareCurveData( Velocity, kWhPerkm );

% Set up fittype and options.
ft = fittype( 'a/(0.008*x) + c*x^2 + d*90', 'independent', 'x', 'dependent', 'y' );
opts = fitoptions( ft );
opts.DiffMaxChange = 0.01;
opts.Display = 'Off';
opts.Lower = [-Inf -Inf -Inf];
opts.MaxFunEvals = 1000;
opts.MaxIter = 1000;
opts.StartPoint = [0 0 0];
opts.Upper = [Inf Inf Inf];

% Fit model to data.
[fitresult, gof] = fit( xData, yData, ft, opts );

% Create a figure for the plots.
figure( 'Name', 'untitled fit 3' );

% Plot fit with data.
subplot( 2, 1, 1 );
plot( fitresult, xData, yData, 'predobs' );
% Label axes
xlabel( 'Velocity' );
ylabel( 'kWhPerkm' );
grid on

% Plot residuals.
subplot( 2, 1, 2 );
plot( fitresult, xData, yData, 'residuals' );
% Label axes
xlabel( 'Velocity' );
ylabel( 'kWhPerkm' );
grid on 
```

我用生成的代码得到的曲线：http: [//i.stack.imgur.com/65d1P.jpg](http://i.stack.imgur.com/65d1P.jpg)

我需要的曲线：http: [//i.stack.imgur.com/p3Egp.jpg](http://i.stack.imgur.com/p3Egp.jpg)

那么有谁知道出了什么问题？

-edit- 以及 Velocity 和 WhPerkm 数据文件：[http ://dl.dropbox.com/u/20782274/data.mat](http://dl.dropbox.com/u/20782274/data.mat)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:10:28.170

RE：*我希望能够从残差图中检索数据*

一种方法是：

1.  从适合菜单中选择“保存到工作区...”
2.  确保选中“将拟合输出保存到命名的 MATLAB 结构”。
3.  注意变量的名称。默认情况下，它是`output`.
4.  单击“确定”将数据发送到 MATLAB 工作区。

在 MATLAB 工作区中，残差位于`output.residuals`. 对于您的示例，您可以通过例如绘制残差，

```
>> plot( Velocity, output.residuals, '.' ) 
```

# ios - 科尔多瓦 2.2.0 的共享工具包

> ID：13679486
> 
> 赞同：0
> 
> 时间：2012-12-03T08:21:49.070
> 
> 标签：ios, cordova, phonegap-plugins, sharekit

我是使用 phonegap 进行 iOS 开发的新手，

我尝试使用 sharekit 插件，我按照自述文件（sharekit 2.0）中提到的所有步骤操作，但它仍然无法正常工作，我收到以下 3 个错误：

```
/..path../Plugins/ShareKitPlugin.m:31:63: Use of undeclared identifier 'SHKURLContentTypeWebpage'
/..path../Plugins/ShareKitPlugin.m:85:63: Use of undeclared identifier 'SHKURLContentTypeWebpage'
/..path../Plugins/ShareKitPlugin.m:102:63: Use of undeclared identifier 'SHKURLContentTypeWebpage' 
```

问题是我找不到任何适用于cordova 2.2.0 的sharekit，因为我得出结论认为这个插件的旧版本不支持新的cordova 2.2.0。

有什么建议可以获取最新的插件吗？或如何解决这些错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T06:34:58.127

我在使用 phonegap 2.7.0 和 repo 中最新的 sharekit 和 sharekitplugin 时遇到了同样的问题。在 import 语句下面添加这一行。它编译并且插件对我有用。我不确定这是否正确。

```
#import "SHKMail.h"// Add below this statement
char *SHKURLContentTypeWebpage="text/html"; 
```

该插件已经有 2 年没有更新了，所以这可能与新的 Sharekit 不兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:32:19.770

我自己没有得到这些错误。但只是一个快速提示。你关注[维基](https://github.com/ShareKit/ShareKit/wiki/Installing-sharekit)了吗？不要忘记第一步，因为直接从 Github 页面下载插件不包含子模块。

# jboss - 在 jboss 7.1.1 上启用 twiddle

> ID：13679488
> 
> 赞同：0
> 
> 时间：2012-12-03T08:22:07.547
> 
> 标签：jboss, twiddle

我正在使用 Windows 7，我想在 jboss 7.1.1 上启用 twiddle。有哪些步骤可以做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:23:41.483

Twiddle 是一个工具/脚本，包含在以前版本的 JBoss 中，直到社区版本 6，用于通过命令行访问 JBoss (MBeans) 的 JMX 服务。[由于 JBoss 7 不再基于 Managed Beans](https://community.jboss.org/thread/169408)，因此它不包含此工具和 JMX 控制台。也就是说，通过 JBoss 7 中的 Managed Beans 公开的管理操作当然可以使用 JDK 附带的 JConsole 工具进行访问。

所以不要指望 JBoss 7 会有一个官方的 twiddle 命令，尽管一些独立开发者已经创建了他们[自己的版本](https://community.jboss.org/people/arnoldjohansson/blog/2012/04/14/twiddle-standalone)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:14:13.920

您必须导航到平台 mbean 并阅读内存属性：

```
/core-service=platform-mbean/type=memory:read-attribute(name=heap-memory-usage) 
```

您可以使用该表达式找到完整的资源描述：

```
/core-service=platform-mbean/type=memory:read-resource-description 
```

# jquery - jQuery 最近的用法

> ID：13679490
> 
> 赞同：-1
> 
> 时间：2012-12-03T08:22:18.727
> 
> 标签：jquery

我们有：

```
<div class="companylinks">
   <span class="current">
      <a class="welcome">Welcome!</a>
   </span>
   <span>
      <a class="ic_generalinfo">General Info</a>
   </span>
</div> 
```

我想得到`<a>`其中的类`<span class="current">`（这里是“欢迎”）

```
var selected_tab = $('#companylinks span[class="current"]').closest('a').attr('class');
alert(selected_tab); 
```

但是我得到'未定义'，我应该怎么在这里最接近（）？

我将不胜感激任何帮助。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T08:23:49.833

[`closest`](http://api.jquery.com/closest/)只在 DOM 中向上遍历，而不是向下遍历。您可能想要使用类似`children`.

您的代码中还有其他错误；您当前正在访问`#companylinks`，应该是`.companylinks`，因为那是类名而不是 ID。除此之外，您`span[class="current"]`可以写为`span.current`，尽管这不是错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:25:17.170

`.closest()`函数获取最近的**父母**而不是最近的**孩子**。要得到你想要的，只需这样做：

```
$('a.welcome') 
```

或者，如果您需要更多特异性：

```
$('.current a.welcome') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T08:26:28.460

阅读[.closest() 的文档](http://api.jquery.com/closest/)

> 对于集合中的每个元素，通过测试**元素本身并向上遍历其**在 DOM 树中的祖先来获取与选择器匹配的第一个元素。

改写这个

```
$('.companylinks span.current').find('a').attr('class'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T08:28:05.060

嘿，伙计，如果你只想要那个锚元素，你可以这样做：

```
$(document).ready( function() {
var selected_tab = $('.companylinks .current').find('a').attr('class');
alert(selected_tab);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T08:30:08.140

`.closest()`沿着父链上升，而不是沿着父链。

要在选择器中指定所有必须满足的多个父母，您可以在选择器中分别列出它们，用空格分隔。在这种情况下，您可以定位`<a>`.current 中的标签，然后像这样获取它的类：

```
$(".current a").attr("class"); 
```

或者，如果您只想将其范围限定在内部`.companylinks`，那么您可以使用它；

```
$(".companylinks .current a").attr("class"); 
```

注意：您不需要使用`span[class=".current"]`. 你可以只使用`.current`.

# svg - SVG中路径与多边形绘制的多边形示例

> ID：13679495
> 
> 赞同：27
> 
> 时间：2012-12-03T08:22:39.537
> 
> 标签：svg

我想学习 SVG，并试图学习如何通过使用点（带多边形）或通过路径（路径）动态呈现相同的图像。

我想要 SVG 多边形和 SVG 路径中的相同多边形（三角形、正方形和五边形足以开始）的几个示例，以便我可以比较代码。我可以找到任何一个绘制的单个图像，但没有一个是相同的。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-12-03T09:11:58.157

这很简单：您基本上可以获取`points`多边形的属性并`d`通过前置`M`和附加将其转换为路径的属性`z`。

```
<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%">
  <polygon points="20,20 100,20 100,100 30,110"/>
  <path        d="M20,20 100,20 100,100 30,110z" fill="green" transform="translate(100,0)"/>
</svg>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-05-03T22:39:25.017

> 两者都可以创建形状。
> 
> 多边形在绘制至少三个边后会自动为您关闭形状（通过返回第一个点），并且由一系列连接的直线组成，这意味着它不能很好地缩放。
> 
> 路径可以使用直线或曲线，并且不会为您自动关闭形状。路径可能是 SVG 中最强大的基本形状元素。

[来源](https://www.sololearn.com/Discuss/176785/what-is-the-difference-between-polygon-and-path#:%7E:text=Both%20can%20create%20shapes.,it%20does%20not%20scale%20well.&text=Path%20is%20probably%20the%20most%20powerful%20basic%20shape%20element%20in%20SVG.)

# android - 如何在 EditText 框中获取指定的产品名称？

> ID：13679497
> 
> 赞同：0
> 
> 时间：2012-12-03T08:22:42.037
> 
> 标签：android, android-edittext, autofill

我正在开发一个安卓应用程序。在那个应用程序中，我有一些产品。当用户点击任何产品时，它将显示产品的图像。在那个页面中，我只有一个像查询这样的按钮。当用户点击它时，它将打开一个表单页面。在该表单中，我有一个字段产品名称。完成此操作后，当用户单击提交时，详细信息已邮寄到管理员邮件。

我想要的是当用户单击查询按钮时，它应该打开一个带有自动填充产品名称的表单页面。

这是我的代码。

联想.java：

```
 Button order = (Button) findViewById(R.id.order);

        order.setOnClickListener(new OnClickListener(){

            public void onClick(View view){

                Intent intentmenu = new Intent(view.getContext(),Order.class);

                startActivityForResult(intentmenu,0);

                }

            });
    } 
```

**订单.java：**

```
 final EditText name   = (EditText)findViewById(R.id.username);

        final EditText mail   = (EditText)findViewById(R.id.email);

        final EditText phone   = (EditText)findViewById(R.id.phone);

        final EditText product   = (EditText)findViewById(R.id.product);

        final String _name = name.getText().toString();

        final String _mail = mail.getText().toString();

        final String _phone = phone.getText().toString();

        final String _product = product.getText().toString();

        System.out.println(_name);

        System.out.println(_mail);

        System.out.println(_phone);

        System.out.println(_product);

        Button email = (Button) findViewById(R.id.Button01);

        email.setOnClickListener(new OnClickListener(){     

                  public void onClick(View v){

                      StringBuilder body = new StringBuilder();

                      body.append("Name: "+name.getText().toString());

                      body.append("\n\n\nMail: "+mail.getText().toString());

                      body.append("\n\n\nPhone: "+phone.getText().toString());

                      body.append("\n\n\nProduct: "+product.getText().toString());

                      Intent i = new Intent(android.content.Intent.ACTION_SEND);

                      i.setType("text/plain");

                      i.putExtra(Intent.EXTRA_EMAIL  ,new String[]

                      {"b.gadwantikar1@gmail.com","",});

                      i.putExtra(android.content.Intent.EXTRA_SUBJECT, "Customer Details");

                      i.putExtra(android.content.Intent.EXTRA_TEXT, body.toString());

                      startActivity(i);

                      finish();

                  }

        });

    }
} 
```

如果有人知道，请帮助我...

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:48:15.887

您可以执行以下操作：

*   向您的项目添加新活动
*   将新活动添加到您的 Mainfest 文件中。
*   将新活动的新 XML 文件添加到布局文件夹中。
*   在 XML 文件中定义 TextView 和/或 Edittext 作为您的需求。
*   在 onCreate() 方法中将新活动的 setContentView 设置为新的 XML 文件。
*   通过以下代码启动新活动，它将具有将传输到新活动的数据。

如下所示：

```
Intent intent=new Intent(this,NewActivity.class)
intent.putExtra("Key","data_need_to_Be Transfer");
startActivity(intent); 
```

并通过执行以下操作检索已经转移到新活动的数据：

```
Intent intent = getIntent();
String yourString=intent.getStringExtra("key");
and then you can assig the value of that string to Textview or EditText 
```

# android - API 2.3.3 的 OnConfigurationChanged 问题

> ID：13679498
> 
> 赞同：1
> 
> 时间：2012-12-03T08:22:46.330
> 
> 标签：android, onconfigurationchanged, android-3.2-honeycomb

如果我使用 API 3.2 Add on Manifest 的版本，`ScreenSize`它可以完美运行，如果我为我的应用程序使用当前版本（2.3.3），更改方向将不会进入 onConfigurationChanged。

```
android:configChanges="orientation|keyboardHidden|ScreenSize" 
```

如何解决这个问题？

我需要更改方向不会再次创建活动，并且我想使用最低级别的 api (2.3.3)。

谢谢！

**编辑：**

这对我不起作用 --> `android:configChanges="keyboardHidden|orientation"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:06:37.143

最后我这样解决了：

```
if (this.getWindowManager().getDefaultDisplay().getOrientation() == 0 || 
        this.getWindowManager().getDefaultDisplay().getOrientation() == 2) {
    Log.e("TAG","LANDSCAPE");
}else{
    Log.e("TAG","PORTRAIT");
} 
```

**价值观**：`getWindowManager().getDefaultDisplay().getOrientation()`

*0 和 2：风景 1 和 3：肖像*

通过 onCreate() 方法中的这个条件，我们可以确定设备所在的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:34:17.133

在清单中尝试

```
 <activity
           android:label="@string/app_name"
           android:name=".activity.YourActivity" 
           android:configChanges="keyboardHidden|orientation">
        </activity> 
```

# javascript - 使用 npapi 的杂乱插件

> ID：13679501
> 
> 赞同：2
> 
> 时间：2012-12-03T08:23:12.137
> 
> 标签：javascript, webkit, npapi, browser-plugin, clutter

我开发了一个使用 NPAPI 调用 Clutter APIs 的插件。

我在创建插件时使用了[OpenGL+Plugin](http://www.firebreath.org/display/documentation/OpenGL+Plugin)作为参考。

独立的 Native Clutter 示例运行没有任何问题。

***我的问题***

1.  如何从插件的*WindowObject*创建 Clutter Stage ？

2.  另外，我已经阅读了 Webkit 的 Clutter 端口，但不知道它是否对我的目的有所帮助？

我的平台和版本信息是：操作系统：Win-7 Clutter：1.10

**EDIT1**：我正在使用

```
ClutterStage *stage = clutter_win32_get_stage_from_window(plugin_hwnd); 
```

但插件超时。我是否需要设置其他任何东西才能使其正常工作？

# entity-framework - 如何在 C# 中序列化 typeof 模型

> ID：13679502
> 
> 赞同：2
> 
> 时间：2012-12-03T08:23:12.317
> 
> 标签：entity-framework, serialization, asp.net-mvc-4, xml-serialization

我想像这样序列化一个 EF 模型

```
TableA theObject = db.TableA.find(uid);
XmlSerializer serializer = new XmlSerializer(typeof(TableA));
XmlWriter writer = XmlWriter.Create(Path.Combine(directory, filename));
serializer.Serialize(writer, theObject);
writer.Close(); 
```

但是代码中断了，它说它不能序列化成员，因为它是一个接口。有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T03:20:37.157

没有办法序列化接口，因此我能做的唯一方法是为我想要序列化的 EF 对象创建一个翻译类

对于集合成员，我使用了这样的数组

```
public class QueryModelTemplate
{
    public string Name { get; set; }

    public string Description { get; set; }

    public ParameterModelTemplate[] Parameters;
} 
```

# sql - SQL 查询在 VB6 中不起作用，但相同的查询在 Oracle 中可以正常工作

> ID：13679503
> 
> 赞同：0
> 
> 时间：2012-12-03T08:23:21.580
> 
> 标签：sql, oracle, vb6, oracle10g

我们编写了以下查询，它在 Oracle 中返回记录，但是当通过 VB6.0 执行相同的查询时，它返回 0 条记录。

```
Select * 
 from crdh 
where expdate between (TO_DATE('03-Dec-2002','DD-MON-YYYY')) 
  and (TO_DATE('31-Dec-2012','DD-MON-YYYY')) 
  and CS = 'AA' 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:39:11.540

假设`where and`你的问题只是一个错字，而不是你的查询的一部分，你的问题的原因可能是 NLS 问题；您的格式字符串的“MON”部分取决于文化。您可以通过在环境中设置语言来解决这个问题，但 IMO 最好使用与语言无关的数字月份格式，即

```
Select * 
 from crdh 
where expdate between (TO_DATE('03-12-2002','DD-MM-YYYY')) 
  and (TO_DATE('31-12-2012','DD-MM-YYYY')) 
  and CS='AA' 
```

# iphone - 存储在 sqlite 表中的动画图像

> ID：13679504
> 
> 赞同：-1
> 
> 时间：2012-12-03T08:23:25.497
> 
> 标签：iphone, sqlite, xcode4.3

我的 ViewDidAppear() 中有这个片段

```
photosImgView.animationImages = [NSArray arrayWithObjects: 
[UIImage imageNamed:@"blueButton.png"],[UIImage imageNamed:@"slider_ball.png"], 
[UIImage imageNamed:@"icon-small-50.png"], nil]; 
```

这里列出的图像应该在捆绑包中，它工作正常，但我想要的是而不是将图像从捆绑包带到 photosImgView 。我想将 sqlite 表中列名为 PPhotos 的图像转换为 photosImgView 进行动画处理。

我怎么能这样做任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:23:38.040

**我的建议：**

*   永远不要将图像保存在数据库中，因为它会使您的数据库变得沉重
*   您可以将图像保存在文档目录中并添加到数据库的路径
*   如果您使用的是照片库图像，请将资产 url 保存在数据库中

**解决方案：**

您可以使用选择查询从数据库中读取数据

```
- (NSMutableArray *)getImage
{
  NSMutableArray *imageArray = [[NSmutableArray alloc] init];
  if (sqlite3_open([yourDatabasePath UTF8String], &dataBase) == SQLITE_OK)
  {
    NSString *select_sql=[NSString stringWithFormat:@"select PPhotos from imageTable];
    const char *sql = [select_sql UTF8String];
    sqlite3_stmt *selectstmt;
    if(sqlite3_prepare(database, sql, -1, &selectstmt, NULL) == SQLITE_OK)
    {
        while(sqlite3_step(selectstmt) == SQLITE_ROW)
        {
            NSData *dataForCachedImage = [[NSData alloc] initWithBytes:sqlite3_column_blob(selectstmt, 0) length: sqlite3_column_bytes(selectstmt, 0)];           
            [imageArray addObject:[UIImage imageWithData:imageArray]];
        }
    }

  return [imageArray autorelease];
} 
```

这里`getImage`将返回存储在数据库中的所有图像。

# android - 如何解决“进程系统没有响应您要关闭它吗”

> ID：13679506
> 
> 赞同：2
> 
> 时间：2012-12-03T08:23:33.380
> 
> 标签：android, android-emulator

当我在 Eclipse 中使用 android 模拟器 4.0.3 运行我的程序时，每次启动模拟器时，模拟器都会显示以下消息：

> "进程系统没有响应你想关闭它吗",

我该如何解决这个问题？

# tridion - 使用 Tridion UI/XM 添加链接组件

> ID：13679520
> 
> 赞同：4
> 
> 时间：2012-12-03T08:24:26.187
> 
> 标签：tridion, tridion-2011, experience-manager

我们目前正在实施一个支持新 UI/XM（体验管理器）的新站点。目前，虽然似乎不可能向我们的“文章”组件添加“段落”（这是一个多值嵌入式模式）。我想这样的基本功能会起作用。

此外，我们有一个组件链接到多值组件链接字段中的多个其他组件。这些单独链接的组件是可编辑的（它们使用 渲染`RenderComponentPresentation()`），但我们不能将新的组件链接添加到多值字段。

任何人都知道如何让这个工作？

亲切的问候

编辑：这将在 2013 SP1 中修复！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T12:36:53.587

目前在 Tridion 的 Experience Manager UI 中无法添加多值嵌入模式。我建议在表单视图中打开组件以添加段落。

如果您认为 SDL 添加您错过的功能是个好主意，您可以在以下网址提出建议：http: [//ideas.sdltridion.com](http://ideas.sdltridion.com)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T11:17:29.560

根据[文档](http://sdllivecontent.sdl.com/LiveContent/content/en-US/UIU4SDLT2011SP1/concept_BE47E30CE7CA48EDB3EA4C42ECF43F82)（需要密码，有关详细信息，请参阅[http://docportal.sdl.com/sdltridion](http://docportal.sdl.com/sdltridion)），您应该在 DWT 模板中使用以下内容：

```
<!-- TemplateBeginRepeat name="fieldname" -->
  @@RenderComponentField("fieldname", TemplateRepeatIndex)@@
<!-- TemplateEndRepeat --> 
```

但这对组件链接来说不是很有用，因为它只是在模板中呈现 TCMURI，因此您可能希望它成为动态链接，然后您可以在 DWT 模板中使用以下内容：

```
<!-- TemplateBeginRepeat name="fieldname" -->
  <tcdl:ComponentField name="fieldname" index="${TemplateRepeatIndex}">
    <a href="#" tridion:href="@@Field@@" tridion:type="Component">@@Field@@</a>
  </tcdl:ComponentField>
<!-- TemplateEndRepeat --> 
```

如果您需要该链接中链接组件的标题，则可以使用[Dreamweaver Get eXtension (DGX)](http://sdltridionworld.com/community/extension_overview/dreamweaver_get_extension.aspx)等。

现在这将为您提供所有可编辑字段的值，当您编辑其中一个字段时，您会在字段属性的左上角看到一个绿色加号按钮，您可以从中添加新值（您将看到一个字段属性顶部的删除和移动按钮）。![XPM 中多值字段的字段属性](../Images/e9468412e62e9590e01829fc7170881b.png)

请注意，如果您的多值字段最初是空的，您必须确保有一个 tcdl 标签允许 XPM 理解它应该在那里显示字段编辑属性，您可以使用这样的东西：

```
<!-- TemplateBeginIf cond="CollectionLength('Field.Values') == 0" -->
  <tcdl:ComponentField name="${Field.Name}"></tcdl:ComponentField>
<!-- TemplateEndIf --> 
```

有关内联编辑的更多详细信息，请参阅[文档](http://sdllivecontent.sdl.com/LiveContent/content/en-US/UIU4SDLT2011SP1/task_sharedenabinlinecomp0923DC2A8E3748538314E5543E142F1D)。

## 编辑：

似乎我有点误解了这个问题，正如弗兰克提到的不幸的是，XPM 目前无法添加多值可嵌入字段集。我很想使用以下构造，它允许我编辑所有字段，但是多值按钮丢失了（因为不支持）：

```
<!-- TemplateBeginRepeat name="fieldname" -->
  <tcdl:ComponentField name="fieldname" index="${TemplateRepeatIndex}">
    <!-- TemplateBeginRepeat name="Field.embeddableFieldname1" -->
      @@RenderComponentField(FieldPath+".embeddableFieldname1", TemplateRepeatIndex)@@
      -
      @@RenderComponentField(FieldPath+".embeddableFieldname2", TemplateRepeatIndex)@@
    <!-- TemplateEndRepeat -->
  </tcdl:ComponentField>
<!-- TemplateEndRepeat --> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-20T18:11:40.693

我使用此代码来呈现多值嵌入式段落模式的字段，它在 XPM 中工作得很好：

```
<!-- TemplateBeginRepeat name="Fields.Paragraph" -->
    @@RenderComponentField("Fields.Paragraph[${TemplateRepeatIndex}].Body", 0)@@
<!-- TemplateEndRepeat --> 
```

# freemarker - 如何将数字与 freemarker 中的空检查进行比较？

> ID：13679525
> 
> 赞同：2
> 
> 时间：2012-12-03T08:25:18.617
> 
> 标签：freemarker

在 freemarker 中比较数字最优雅的是什么？

```
<#if (variable = 2) ></#if> 
```

这将不包括空检查？

如果我这样做

```
 <#if (variable! = 2) ></#if> 
```

然后freemarker会抱怨不同的类型。

我最终这样做了

```
<#if (variable!?html = "2") ></#if> 
```

但我想这不是这样做的方式吗？如何将数字与 freemarker 中的空检查进行比较？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T19:43:26.373

如果变量为空，你想发生什么？如果你想要那么假：

```
<#if variable?? && variable == 2 ></#if> 
```

如果你想假设0：

```
<#if variable!0 == 2 ></#if> 
```

注意：`=`也可以，但这是一种不好的做法，因为表达式可能与命名参数赋值相混淆。`()`是多余的；它不像Java。`?html`意味着用于转义`<`等，但更糟糕的是，您会在那里触发本地化格式，这可能会破坏比较。因此，如果您想做类似的事情，请改用`?c`(* *c* *计算机格式)。

# c# - 具有动态高度的列表框项目

> ID：13679527
> 
> 赞同：1
> 
> 时间：2012-12-03T08:25:22.250
> 
> 标签：c#, wpf, windows-phone-7

我有一个列表框，我从一些收藏中填写。每个集合项目都有一些信息：静态名称和图片，以及动态内容（文本、照片或照片等）。我想为每个集合项目更改列表框的项目高度。高度取决于内容，如果它只有文本 - 列表框的项目必须具有静态（名称的文本块，图片的图像）和带有文本的文本块，并且文本块的高度必须根据文本改变（如果它是 2-3 个字符串，高度将为最小，如果文本适合 15-20 个字符串 - 文本块的高度必须根据字符串改变），如果集合项包括文本和图像 - 它必须具有静态（名称的文本块，图片的图像），文本的文本块和图像为图像。列表框项目的高度必须取决于文本块大小和图像大小。

此时，我有一个静态项目高度的列表框，并且想要使高度动态。

这是我的列表框项目之一

```
<local:NewsTemplateSelector.Photo>
    <DataTemplate>
        <Border 
            BorderBrush="Red" 
            BorderThickness="2"  
            Width="400" 
            Height="auto" 
            Margin="10">
            <StackPanel Orientation="Horizontal" Width="400" Height="auto">
                <Image 
                    Source="{Binding SourceImage}" 
                    Height="75" 
                    Width="75" 
                    Margin="0,-225,0,0" />
                <Canvas Width="400">
                    <TextBlock 
                        Text="{Binding SourceName}" 
                        Foreground="Black" 
                        FontSize="25" 
                        TextWrapping="Wrap" 
                        Height="55" 
                        Width="326" 
                        d:LayoutOverrides="VerticalAlignment, Height" />
                    <Image  
                        Source="{Binding Photo[0].Big}" 
                        Height="auto" 
                        VerticalAlignment="Bottom" 
                        HorizontalAlignment="Right" 
                        Width="326" 
                        Canvas.Top="69"/>
                </Canvas>
            </StackPanel>
        </Border>
    </DataTemplate>
</local:NewsTemplateSelector.Photo> 
```

**UPD：**已尝试

```
<local:NewsTemplateSelector.Photo>
    <DataTemplate>
        <Border 
            BorderBrush="Red" 
            BorderThickness="2"  
            Width="auto" 
            Height="auto" 
            Margin="10">
            <Canvas Width="auto">
                <Image 
                    Source="{Binding SourceImage}" 
                    Height="auto" 
                    Width="auto" 
                    HorizontalAlignment="Stretch" />
                <TextBlock 
                    HorizontalAlignment="Stretch" 
                    Text="{Binding SourceName}" 
                    Foreground="Black" 
                    FontSize="25" 
                    TextWrapping="Wrap" 
                    Height="auto" 
                    Width="auto"  
                    MaxHeight="300" 
                    MaxWidth="460"  />
                <TextBlock 
                    HorizontalAlignment="Stretch" 
                    Text="{Binding Texts}" 
                    Foreground="Black" 
                    FontSize="25" 
                    TextWrapping="Wrap" 
                    Height="auto" 
                    Width="auto" 
                    MinHeight="150"   
                    MaxHeight="300" 
                    MaxWidth="460"  />
                <Image  
                    HorizontalAlignment="Stretch"   
                    Source="{Binding Photo[0].Big}" 
                    Height="auto" 
                    MinHeight="150" 
                    MaxHeight="300" 
                    MaxWidth="460"  
                    Width="auto"/>
            </Canvas>
        </Border> 
    </DataTemplate>
</local:NewsTemplateSelector.Photo>` 
```

但照片相互叠加，名称为 SourseImage 的图像也叠加在屏幕顶部

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:56:07.943

您可以在 xaml 代码中为 ListBox 的高度使用“自动”值

```
 <ListBox Height="auto">
    </ListBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:56:25.193

尝试将所有硬编码属性替换为 auto，例如 height=auto 和 width=auto。

如果要填充总行，请设置 Horizo​​ntalAlignment=:stretch"。

将文本块属性 TextWrapping="wrap" 和 MinWidth 设置为您想要的固定值。

# c# - 关闭主窗口时如何确保关闭所有侧线程（不同的类）

> ID：13679529
> 
> 赞同：0
> 
> 时间：2012-12-03T08:25:26.013
> 
> 标签：c#, .net, multithreading

我在 C# 中有一个主窗体类和一个副类。我正在创建侧类的实例并从该实例调用该类的方法。该方法启动新线程。现在我正在创建多个实例并为每个实例调用方法。因此，启动了多个线程。现在我已经在侧类中实现了一个方法，以确保在从与线程关联的方法中退出时关闭线程。我不知道用户是否突然单击主框架窗口的 X（关闭）按钮，然后如何处理该副类中的线程。

PS - 侧类的实例在主窗体类的方法中实例化。因此，在处置时，我没有随身携带这些实例，因此我可以阻止它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:22:56.030

如果通过关闭主窗口来终止应用程序，那么您可以在创建它们时在工作线程中的副类中将 IsBackground 设置为 true。如此：

```
 var newThread = new Thread(DoWork) {IsBackground = true};
    newThread.Start(); 
```

然而，如果关闭你的“主”窗口不是应用程序的结束，那么主窗口应该保留一个对实例化侧类的引用数组。然后它应该在每个侧实例上处理/设置一个标志，以指示线程应该停止（你如何做到这一点取决于你 - 在侧类中定期检查的标志可能是合适的）。此调用应发生在“主”窗口的 OnClose 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:29:24.050

您可以将侧线程设置为在应用程序结束时关闭的 BackGroundWorkers。
或者在 form.Closing 事件中调用它们各自的 join() 方法。
这将使应用程序等待线程完成。

# pthreads - 线程间数据传输 - Linux

> ID：13679531
> 
> 赞同：4
> 
> 时间：2012-12-03T08:25:36.773
> 
> 标签：pthreads, linux-device-driver, embedded-linux

我的程序有两个从主线程创建的线程。每个线程在连接的单独的外部通信设备上运行。

```
 main thread
    thread_1                        thread_2 
```

Thread_1 从外部设备接收数据包。每个数据包是一个 20 字节的结构。

现在我希望 thread_2 读取 thread_1 接收到的数据并将其传输到与其连接的设备。

我们如何在我的两个线程之间传输数据。

在这种情况下要使用的 linux 变量类型的确切名称是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T09:23:09.120

您的问题是[Producer Consumer Problem](http://en.wikipedia.org/wiki/Producer-consumer_problem)的经典示例。

有许多可能的方法来实现这一点，具体取决于上下文 - 您的帖子被标记为`pthreads`, 和`linux-device-drivers`。这是内核空间、用户空间还是内核空间 -> 用户空间？

## 内核空间

一个解决方案可能涉及一个环形缓冲区（如果您预计线程之间的多条消息可以同时传输）和一个信号量。

[Linux Device Drivers 3rd Edition](http://lwn.net/images/pdf/LDD3/ch05.pdf)的第 5 章将是一个很好的起点。

## 用户空间

如果两个线程都在用户空间，则同一进程中的生产者-消费者模式通常使用`pthread` [条件变量](http://ok.com/MONITOR/CV.html)来实现。如何做到这一点的一个有效的例子是[here](http://www.ittc.ku.edu/~niehaus/classes/678-s11/labs/pthreads_pc/pthreads_pc_lab.pdf)

## 内核空间 -> 用户空间

Linux 中使用的一般方法是让用户空间线程`thread_2`阻塞由 kernel-space 发出的文件系统对象`thread_1`。通常，有问题的归档系统对象位于`/dev`或中`/sys`。LDD3 有这两种方法的示例。

# java - How to save a object in Jackrabbit repository having map as one field?

> ID：13679533
> 
> 赞同：1
> 
> 时间：2012-12-03T08:25:47.100
> 
> 标签：java, jackrabbit, jcr

I have a pojo class (`Location`) which have a property as

```
@Collection(jcrType="nt:map") Map<String, String> map; 
```

Now when i am trying to insert a Location objeect in jackrabbit repository. It is giving error as:

```
org.apache.jackrabbit.ocm.exception.IncorrectPersistentClassException: Class of type: java.lang.String has no descriptor. 
        at org.apache.jackrabbit.ocm.mapper.impl.AbstractMapperImpl.getClassDescriptorByClass(AbstractMapperImpl.java:203) 
        at org.apache.jackrabbit.ocm.manager.collectionconverter.impl.DefaultCollectionConverterImpl.doInsertCollection(DefaultCollectionConverterImpl.java:116) 
        at org.apache.jackrabbit.ocm.manager.collectionconverter.impl.AbstractCollectionConverterImpl.insertCollection(AbstractCollectionConverterImpl.java:80) 
```

How i can save a object in the repository? Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:52:56.673

I was also facing the same problem. Take a look at this link [http://osdir.com/ml/users.jackrabbit.apache.org/2009-06/msg00129.html](http://osdir.com/ml/users.jackrabbit.apache.org/2009-06/msg00129.html)

By default, `@Collection` is not supporting maps based on `<String, String>`, the elements have to be beans based classes, not primitive types. If you want to use primitive types or wrapper classes, you have to use the collection converter `MultiValueCollectionConverterImpl`.

Though the problem was solved I am still not sure how the values are stored.

# c# - 如何通过 SQLiteAsyncConnection 执行原始 SQLite 查询（具有多行结果）

> ID：13679537
> 
> 赞同：1
> 
> 时间：2012-12-03T08:25:59.473
> 
> 标签：c#, sqlite, windows-8, microsoft-metro

我没有表的类映射。我指的是以下线程。获取表中的行数，我正在应用以下技术

[如何通过 SQLiteAsyncConnection 执行原始 SQLite 查询](https://stackoverflow.com/questions/13490374/how-to-perform-raw-sqlite-query-through-sqliteasyncconnection)

```
SQLiteAsyncConnection conn = new SQLiteAsyncConnection(DATABASE_NAME);
int profileCount = await conn.ExecuteScalarAsync<int>("select count(*) from " + PROFILE_TABLE); 
```

现在，我不想以行数的形式获取结果，而是想在多行数据中检索结果。

在Java中，要获得多行结果数据，我会执行

```
Cursor cursor = database.rawQuery(sql, null);
cursor.moveToFirst();
while (!cursor.isAfterLast()) {
    // For every cursor, obtain its col data by 
    // cursor.getLong(0), cursor.getInt(1), ...
    cursor.moveToNext();
} 
```

**给定相同的 sql 语句，我该如何实现 using `SQLiteAsyncConnection`？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:28:25.620

我在 SQLite.cs 中添加了 2 个新函数。不优雅，但它对我有用。

```
 // Invented by yccheok :)
    public IEnumerable<IEnumerable<object>> ExecuteScalarEx()
    {
        if (_conn.Trace)
        {
            Debug.WriteLine("Executing Query: " + this);
        }

        List<List<object>> result = new List<List<object>>();
        var stmt = Prepare();

        while (SQLite3.Step(stmt) == SQLite3.Result.Row)
        {
            int columnCount = SQLite3.ColumnCount(stmt);

            List<object> row = new List<object>();
            for (int i = 0; i < columnCount; i++)
            {
                var colType = SQLite3.ColumnType(stmt, i);
                object val = ReadColEx (stmt, i, colType);
                row.Add(val);
            }
            result.Add(row);
        }
        return result;
    }

    // Invented by yccheok :)
    object ReadColEx (Sqlite3Statement stmt, int index, SQLite3.ColType type)
    {
        if (type == SQLite3.ColType.Null) {
            return null;
        } else {
            if (type == SQLite3.ColType.Text) {
                return SQLite3.ColumnString (stmt, index);
            }
            else if (type == SQLite3.ColType.Integer)
            {
                return (int)SQLite3.ColumnInt (stmt, index);
            }
            else if (type == SQLite3.ColType.Float)
            {
                return SQLite3.ColumnDouble(stmt, index);
            }
            else if (type == SQLite3.ColType.Blob)
            {
                return SQLite3.ColumnBlob(stmt, index);
            }
            else
            {
                throw new NotSupportedException("Don't know how to read " + type);
            }
        }
    } 
```

# ruby-on-rails - 我想动态更改设计注册中的角色字段

> ID：13679544
> 
> 赞同：0
> 
> 时间：2012-12-03T08:26:44.700
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise, cancan

在我的用户模型中，我添加

```
ROLES =  Role.all.collect(&:name) 
```

在我看来，注册的一部分

```
<% if can? :manage, @users %>
<p><%= f.label :role %>: <%= f.collection_select :role, User::ROLES, :to_s, :humanize, {:include_blank => true} %></p>
<% end %> 
```

问题是 ROLES = Role.all.collect(&:name) 在我添加和编辑时没有更新。例如，我添加了新的角色用户，然后我必须重新启动服务器才能查看注册字段中角色的变化。如何在不重新启动服务器的情况下更新角色更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:38:48.140

使用类方法而不是常量：

```
def self.roles
  Role.all.collect(&:name)
end 
```

当然，如果`user`有很多，这是免费提供的`roles`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T09:37:57.470

嗯，简单的解决方案

```
<% if can? :manage, @users %>
  <p><%= f.label :role %>: <%= f.collection_select :role, Role.all.map(&:name), :to_s, :humanize, {:include_blank => true} %></p>
<% end %> 
```

你也可以把它放在一个助手中，或者让控制器处理角色的检索（例如设置一个实例变量`@roles`）。

简而言之：不要使用常量:)

# c# - LINQ to Nhibernate where 子句中的用户定义函数

> ID：13679546
> 
> 赞同：3
> 
> 时间：2012-12-03T08:26:58.833
> 
> 标签：c#, linq, nhibernate

我正在尝试执行以下操作：

```
var query =
    (from a in session.Query<A>()
    where a.BasicSearch(searchString) == true
    select a); 
```

但它一直给我这个异常“System.NotSupportedException”！

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T08:28:36.703

不能在 LINQ 查询中使用用户定义的函数。NHibernate linq 提供程序不“知道”如何将您的函数转换为 SQL。

LINQ to NHibernate 的工作原理是检查您在运行时提供的 LINQ 表达式，并将在此表达式树中找到的内容转换为正则 SQL 表达式。这是一篇了解表达式树背景的好文章：http: [//blogs.msdn.com/b/charlie/archive/2008/01/31/expression-tree-basics.aspx](http://blogs.msdn.com/b/charlie/archive/2008/01/31/expression-tree-basics.aspx)

[但是，您可以使用此处讨论](http://www.albahari.com/nutshell/predicatebuilder.aspx)的技术以另一种方式重用此类谓词。（我不确定这是否适用于 NHibernate。）如果它有效，它看起来像这样：

```
// this could be a static method on class A
public static Expression<Func<A, bool>> BasicSearch(string criteria)
{
    // this is just an example, of course
    // NHibernate Linq will translate this to something like 
    // 'WHERE a.MyProperty LIKE '%@criteria%'
    return a => criteria.Contains(a.MyProperty); 
} 
```

用法：

```
from a in Session.Query<A>().Where(A.BasicSearch(criteria)) 
```

更新：显然 NHibernate 会有问题。请参阅[此博客文章了解应该可以使用的版本](http://petemontgomery.wordpress.com/2011/02/10/a-universal-predicatebuilder/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T09:45:11.230

可以调用您自己的和 SQL 函数，但您必须为它们制作一个包装器，以便 NHibernate 知道如何将 C# 转换为 SQL。

[这是一个示例](http://jarrettmeyer.com/post/3783680616/order-by-random-with-nhibernate-queryover-syntax)，我编写了一个扩展方法来访问 SQL Server 的`NEWID()`函数。您将使用相同的技术来访问数据库服务器上的任何其他功能，无论是内置的还是用户定义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T18:03:21.747

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-20T14:25:26.340

声明一个`BasicSearch`扩展方法。假设您的 udf 在 dbo 上：

```
using NHibernate.Linq;

...

public static class CustomLinqExtensions
{
    [LinqExtensionMethod("dbo.BasicSearch")]
    public static bool BasicSearch(this string searchField, string pattern)
    {
        // No need to implement it in .Net, unless you wish to call it
        // outside IQueryable context too.
        throw new NotImplementedException("This call should be translated " +
            "to SQL and run db side, but it has been run with .Net runtime");
    }
} 
```

然后在您的实体上使用它：

```
session.Query<A>()
    .Where(a => a.SomeStringProperty.BasicSearch("yourPattern") == true); 
```

请注意，尝试使用它而不在其使用中引用实体将导致它使用 .Net 运行时进行评估，而不是将其转换为 SQL。

使这个`BasicSearch`例子适应它必须处理的任何输入类型。您的问题是直接在实体上调用它，这不允许您的读者知道它需要运行多少列以及使用哪些类型。

# c# - 对象引用未设置为对象 request.GetResponse() 的实例

> ID：13679550
> 
> 赞同：2
> 
> 时间：2012-12-03T08:27:13.777
> 
> 标签：c#

```
public static string Method_Name(
        string requestMethod, 
        string requestUrl, 
        string requestBody = null, 
        Dictionary<string, string> requestHeader = null, 
        string requestUserAgent = null, 
        Boolean isContentType = false)
    {

        string responseString = String.Empty;

        try
        {
            Uri requestUri = new Uri(requestUrl);
            WebRequest request = WebRequest.Create(requestUri);
            request.Timeout = 60000;

            if (requestHeader != null)
            {
                foreach (string key in requestHeader.Keys)
                {
                    request.Headers.Add(key, requestHeader[key]);
                }
            }

            request.Headers.Add("X-FD-TrustLevel", "trusted");
            request.Headers.Add("X-FD-Version", "1.0");

            request.Method = requestMethod;

            // For MAS 1.0 POST Call
            if (isContentType)
            {
                request.ContentType = @"application/json";
            }

            if (!String.IsNullOrEmpty(requestUserAgent))
            {
                ((HttpWebRequest)request).UserAgent = requestUserAgent;
            }

            if (!String.IsNullOrEmpty(requestBody))
            {
                Stream stream = request.GetRequestStream();
                string requestString = requestBody;
                stream.Write(Encoding.Default.GetBytes(requestString), 0, requestString.Length);
                stream.Close();
            }

/* ERROR */ HttpWebResponse response = (HttpWebResponse)request.GetResponse();

            using (StreamReader responseStream = new StreamReader(response.GetResponseStream()))
            {
                responseString = responseStream.ReadToEnd();
            }

        }
        catch (Exception ex)
        {
            AnswersExceptionCollection.GetInstance().AddException(ex);
        }

        return responseString;
    }
} 
```

当代码执行到达时，我收到以下消息`HttpWebResponse response = (HttpWebResponse)request.GetResponse();`：

> *发生错误 - 对象引用未设置为对象的实例。*

我知道为什么会发生这种错误，但在这种特殊情况下我无法找到根本原因。任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:59:21.410

问题一定出在这两行

```
Uri requestUri = new Uri(requestUrl);
WebRequest request = WebRequest.Create(requestUri); 
```

执行这些行后使用断点验证请求是否为空。如果它为空，那么您提供的 URL 可能不存在或可能有其他问题。

问候， Pavan.G

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T09:04:35.550

看来你是对请求的启蒙

```
WebRequest request = WebRequest.Create(requestUri); 
```

需要一些细节的那种请求。如果您尝试获取 HttpWebResponse，则必须从**HttpWebRequest**捕获响应。这是来自[MSDN 文章](http://msdn.microsoft.com/ru-ru/library/system.net.webrequest.getresponse.aspx)的引用。

> 注意注意
> 
> WebRequest 类是一个抽象类。WebRequest 实例在运行时的实际行为由 WebRequest.Create 方法返回的后代类决定。有关默认值和异常的更多信息，请参阅后代类的文档，例如HttpWebRequest 和 FileWebRequest。

所以这意味着如果你创建这样的请求，你会明白这一点

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(requestUri) 
```

# lucene - 使用 Lucene.net 的短语和单词建议

> ID：13679552
> 
> 赞同：1
> 
> 时间：2012-12-03T08:27:16.033
> 
> 标签：lucene, spell-checking

需要使用 Lucene.net 创建类似 Google 的建议。我目前正在使用 ShingleAnalyzerWrapper 进行短语建议并成功。但是如果没有找到任何短语，我需要搜索单词建议。

我对 Lucene 世界完全陌生。我需要在短时间内实现这一点。我会很感激任何建议。

谢谢。

**编辑**

我想简单地回答我的问题。

*   我应该使用拼写检查器吗？
*   我应该如何索引短语？
*   如何搜索短语（如果有拼写错误的单词怎么办？）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:51:56.433

如果您是 Lucene 的新手，这可能不是那么容易。但是，您需要在更高级别上做的是检查短语的结果，如果返回结果为零......只需创建一个没有短语的新查询。

我不确定你的短语是如何设置的，但你可以这样做： - 对短语进行关键字搜索并消除停用词。“the big bus” 短语可以变成“big bus”或只是“bus” - 在短语搜索中添加 slop 设置 - 使用模糊搜索 - 更多类似此搜索

我会推荐《Lucene In Action》这本书，因为它涵盖了 Lucene 3.0.3。它适用于 Java，但是当前的 Lucene.net 版本是 3.0.3，因此这两个 API 和书中的示例之间存在对称性。这本书专门有一章介绍您正在寻找的内容以及所涉及的策略：建议对不完全匹配的搜索（拼写检查，建议关闭文档等）

# java - 从 Java 中的格式化字符串中解析日期

> ID：13679557
> 
> 赞同：0
> 
> 时间：2012-12-03T08:27:44.123
> 
> 标签：java, date

我有一个格式为“Mon Dec 03 00:00:00 IST 2012”的字符串。我想将此字符串转换为日期。任何格式都可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T08:36:25.053

可以尝试：

```
SimpleDateFormat sdf = new SimpleDateFormat("EEE MMM dd HH:mm:ss z yyyy");
    try {
        Date date = sdf.parse("Mon Dec 03 00:00:00 IST 2012");
    } catch (ParseException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T08:30:21.047

您可以使用`parse()`SimpleDateFormat 类的方法。[在此处](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html#parse%28java.lang.String,%20java.text.ParsePosition%29)阅读 API 文档。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T08:31:13.630

您的字符串表示日期的日期格式是：

```
DateFormat df = new SimpleDateFormat("EEE MMM dd HH:mm:ss z yyyy"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T08:31:21.053

使用`SimpleDateFormatter`. 您可以在此处找到有关它们的详细信息：

[简单日期格式](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-03T08:37:06.547

`DateFormat dateFormat = new SimpleDateFormat("E MMM dd HH:mm:ss zzz yyyy");`

# java - 使用 Axis2 向 Java 中的 WSDL 地址发出 SOAP 请求

> ID：13679559
> 
> 赞同：0
> 
> 时间：2012-12-03T08:27:59.623
> 
> 标签：java, eclipse, soap, axis2, tomcat7

我正在尝试向 SOAP 客户端发送查询。

我目前做了以下事情：

```
Configured Tomcat7 to run on my linux VMWare.
Installed Java, Eclipse, Axis2, and Axis2 plugins for Eclipse.
Run the Axis2 plugins and generated: ContentServiceCallbackHandler.java, ContentServiceFaultException.java, and ContentServiceStub.java 
```

当我运行 JUnit 测试 32/32 运行，但 16 错误。

我现在需要做什么才能将 SOAP 消息发送到我的服务器？我有一个我想发送的服务提供的示例 SOAP 消息。

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:con="http://content.tripadvisor.com" xmlns:api="http://api.content.tripadvisor.com">
   <soapenv:Header/>
   <soapenv:Body>
  <con:getPhotos>
     <con:in0>
        <api:clientLoginID>3CFC3B05146B40048B0C105A6CB9748F</api:clientLoginID>
        <api:domain>en</api:domain>
        <api:locationId>321151</api:locationId>
        <api:numPhotos>3</api:numPhotos>
        </con:in0>
      </con:getPhotos>
   </soapenv:Body>
</soapenv:Envelope> 
```

我是否必须担心我的 JUnit 测试失败。我应该怎么做才能创建和发送 SOAP 消息？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:09:40.187

第一个工作计划

```
package com.tripadvisor.content.test;

import java.rmi.RemoteException;

import org.apache.axis2.AxisFault;

import com.tripadvisor.content.ContentServiceFaultException;

import com.tripadvisor.content.ContentServiceStub;

import com.tripadvisor.content.ContentServiceStub.ArrayOfCdsPhoto;

import com.tripadvisor.content.ContentServiceStub.CdsPhotoOptions;

public class testClient {

public static void main(String args[]){

try {

ContentServiceStub css = new ContentServiceStub();

ContentServiceStub.GetPhotos getInc =  new ContentServiceStub.GetPhotos();

ContentServiceStub.GetPhotosResponse resp = new ContentServiceStub.GetPhotosResponse();

CdsPhotoOptions param = new CdsPhotoOptions();

param.setClientLoginID(“3CFC3B05146B40048B0C105A6CB9748F”);

param.setDomain(“en”);

param.setLocationId(321151);

param.setNumPhotos(3);

getInc.setIn0(param);

css._getServiceClient().getOptions().setProperty(org.apache.axis2.transport.http.HTTPConstants.CHUNKED, Boolean.FALSE);

try {

resp = css.getPhotos(getInc);

ArrayOfCdsPhoto photos = resp.getOut();

System.out.println(“Complete”);

} catch (RemoteException e) {

// TODO Auto-generated catch block

e.printStackTrace();

} catch (ContentServiceFaultException e) {

// TODO Auto-generated catch block

e.printStackTrace();

}

} catch (AxisFault e) {

// TODO Auto-generated catch block

e.printStackTrace();

}

}

} 
```

# c# - 抛出异常时是否应该省略 else 语句？

> ID：13679565
> 
> 赞同：3
> 
> 时间：2012-12-03T08:28:15.610
> 
> 标签：c#, if-statement, exception-handling

比较下面的两个代码块：

```
if (args.Length != 1)
{
    throw new ArgumentException();
}    
if (String.IsNullOrEmpty(args[0])
{
     throw new ArgumentNullException();
}
File f = new File(args[0]);
if (!f.Exists)
{
    throw new FileNotFoundException();
}
// Perform tasks on the file 
```

和这个：

```
if (args.Length != 1)
{
    throw new ArgumentException();
}    
else if (String.IsNullOrEmpty(args[0])
{
    throw new ArgumentNullException();
}
else
{
    File f = new File(args[0]);
    if (!f.Exists)
    {
        throw new FileNotFoundException();
    }
    else
    {
        //Perform tasks on the file
    }
} 
```

哪一个更好（在性能/可读性方面）？我不会在我的代码中捕获异常，因为应用程序必须有一个文件可以操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T08:30:11.080

*更好*是高度主观的，所以我不会说一个比另一个更好。我*能*说的是第二个例子中的 else 块是*不必要*的。我个人更喜欢那个代码，因为我认为它更容易阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T08:30:02.943

没有理由`else`，因为一旦你抛出一个，程序就会停止`exception`。可以安全地预期，如果程序在您到达实际代码时尚未关闭，则没有错误。

出于可读性的目的，我会省略 else 块，因为您可以安全地从代码中消除膨胀。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T08:31:27.310

你使用哪个并不重要。如果您重构代码以不引发异常，则第二种方法也有效（当您忘记插入`else`then 时会出现奇怪的问题 :-)）。我不希望通过使用第一个语句来提高任何性能 - 至少，不是一个值得注意的语句。

但是，最好将异常消息也传递给抛出的异常。

# jsf - f:ajax 监听器因为渲染=“假”而没有执行？

> ID：13679566
> 
> 赞同：0
> 
> 时间：2012-12-03T08:28:19.833
> 
> 标签：jsf

我有一个 commandLink，它有一个“渲染”，它是根据 @RequestScoped bean 中的值计算的。commandLink 使用 f:ajax 调用侦听器，但似乎从未执行该方法。

事实证明，如果我设置了 render="#{true}" 或根本没有渲染属性，侦听器就会正确执行。是否有可能因为渲染是基于在 ajax 回发时不再存在的请求范围值（因此导致“错误”），所以正在跳过侦听器？请注意，f:ajax 还执行了一些成功执行的执行操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:45:05.977

您永远不应该使用请求范围的 bean 来定义任何 UI 组件的渲染属性的值。除非您特别小心，否则原始 bean 会被销毁并丢失其值，而是会在每次请求时创建一个新 bean。因此，组件将被隐藏，因为渲染的属性值很可能不会为下一个请求评估为 true。

您应该为您的 bean 使用视图范围。[请参阅此处](https://stackoverflow.com/questions/7012708/using-request-scoped-bean-function-as-action-for-a-temporary-rendered-button-in)的示例，但您应该可以轻松找到搜索类似`'jsf rendered attribute request scope bean'`.

# ios - UITableViewCell 不会成为第一响应者（在单元格手势上显示 UIMenuController）

> ID：13679567
> 
> 赞同：0
> 
> 时间：2012-12-03T08:28:21.747
> 
> 标签：ios, ios5, uimenucontroller, uiresponder, becomefirstresponder

我有一个带有`UITabBar`. 每个选项卡都是一个，里面`UINavigationController`有几个`UIViewControllers`。其中一个视图控制器包含一个`UITableView`，我想显示一个用于删除长按的浮动菜单`UITableViewCell`。

我正在使用`UIMenuController`但它没有显示，因为单元格拒绝成为第一响应者。

这是我的代码：

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];

        UILongPressGestureRecognizer *lpgr = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleLongPress:)];
        lpgr.minimumPressDuration = 1.0; //second
        [table addGestureRecognizer:lpgr];

        [lpgr release];
    }

-(void)handleLongPress:(UILongPressGestureRecognizer *)gestureRecognizer {
    if (gestureRecognizer.state == UIGestureRecognizerStateBegan) {
        CGPoint p = [gestureRecognizer locationInView: table];

        NSIndexPath *indexPath = [table indexPathForRowAtPoint:p];
        if (indexPath != nil) {
            UITableViewCell* cell = [self tableView:table cellForRowAtIndexPath: indexPath];

            [cell becomeFirstResponder];
            UIMenuItem *delete = [[UIMenuItem alloc] initWithTitle:@"Delete" action:@selector(delete:)];

            UIMenuController *menu = [UIMenuController sharedMenuController];
            [menu setMenuItems:[NSArray arrayWithObjects:delete, nil]];
            [menu setTargetRect:cell.frame inView:cell.superview];
            [menu setMenuVisible:YES animated:YES];
        }
    }
} 
```

在 UITableViewCell 我已经覆盖了方法：

```
-(BOOL) canBecomeFirstResponder {
    return YES;
} 
```

关于为什么细胞没有成为第一响应者的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:46:26.800

我想我修复了你的代码:-)

```
-(void)handleLongPress:(UILongPressGestureRecognizer *)gestureRecognizer {
    if (gestureRecognizer.state == UIGestureRecognizerStateBegan) {
        CGPoint p = [gestureRecognizer locationInView: self.tableView];
        NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint:p];
        if (indexPath != nil) {

            [self becomeFirstResponder];
            UIMenuItem *delete = [[UIMenuItem alloc] initWithTitle:@"Delete" action:@selector(customDelete:)];

            UIMenuController *menu = [UIMenuController sharedMenuController];
            [menu setMenuItems:[NSArray arrayWithObjects:delete, nil]];
            [menu setTargetRect:[self.tableView rectForRowAtIndexPath:indexPath] inView:self.tableView];
            [menu setMenuVisible:YES animated:YES];
        }
    }
}

- (void)customDelete:(id)sender {
//
}

- (BOOL)canBecomeFirstResponder {
    return YES;
}

- (BOOL)canPerformAction:(SEL)action withSender:(id)sender {
    if (action == @selector(customDelete:) ){
        return YES;
    }
    return NO;
} 
```

我做了以下..

1.  [自己成为FirstResponder]；
2.  [菜单 setTargetRect:[self.tableView rectForRowAtIndexPath:indexPath] inView:self.tableView];
3.  为 canPerformAction 添加了 true 如果您已实现该功能，则通常不需要

请将表格视图和其他内容更改为您的本地参考变量:-)

好读 - [http://www.intridea.com/blog/2010/12/22/developers-notes-for-uimenucontroller](http://www.intridea.com/blog/2010/12/22/developers-notes-for-uimenucontroller)

# android - 使用 Android 陀螺仪代替加速度计。我发现很多零碎的东西，但没有完整的代码

> ID：13679568
> 
> 赞同：26
> 
> 时间：2012-12-03T08:28:27.970
> 
> 标签：android, orientation, accelerometer, gyroscope

Sensor Fusion 视频看起来很棒，但没有代码： [http ://www.youtube.com/watch?v=C7JQ7Rpwn2k&feature=player_detailpage#t=1315s](http://www.youtube.com/watch?v=C7JQ7Rpwn2k&feature=player_detailpage#t=1315s)

这是我的代码，它只使用加速度计和指南针。我还在 3 个方向值上使用了卡尔曼滤波器，但是这里显示的代码太多了。最终，这可以正常工作，但结果要么过于紧张，要么过于滞后，这取决于我对结果的处理方式以及我将过滤因子设为多低。

```
/** Just accelerometer and magnetic sensors */
public abstract class SensorsListener2
    implements
        SensorEventListener
{
    /** The lower this is, the greater the preference which is given to previous values. (slows change) */
    private static final float accelFilteringFactor = 0.1f;
    private static final float magFilteringFactor = 0.01f;

    public abstract boolean getIsLandscape();

    @Override
    public void onSensorChanged(SensorEvent event) {
        Sensor sensor = event.sensor;
        int type = sensor.getType();

        switch (type) {
            case Sensor.TYPE_MAGNETIC_FIELD:
                mags[0] = event.values[0] * magFilteringFactor + mags[0] * (1.0f - magFilteringFactor);
                mags[1] = event.values[1] * magFilteringFactor + mags[1] * (1.0f - magFilteringFactor);
                mags[2] = event.values[2] * magFilteringFactor + mags[2] * (1.0f - magFilteringFactor);

                isReady = true;
                break;
            case Sensor.TYPE_ACCELEROMETER:
                accels[0] = event.values[0] * accelFilteringFactor + accels[0] * (1.0f - accelFilteringFactor);
                accels[1] = event.values[1] * accelFilteringFactor + accels[1] * (1.0f - accelFilteringFactor);
                accels[2] = event.values[2] * accelFilteringFactor + accels[2] * (1.0f - accelFilteringFactor);
                break;

            default:
                return;
        }

        if(mags != null && accels != null && isReady) {
            isReady = false;

            SensorManager.getRotationMatrix(rot, inclination, accels, mags);

            boolean isLandscape = getIsLandscape();
            if(isLandscape) {
                outR = rot;
            } else {
                // Remap the coordinates to work in portrait mode.
                SensorManager.remapCoordinateSystem(rot, SensorManager.AXIS_X, SensorManager.AXIS_Z, outR);
            }

            SensorManager.getOrientation(outR, values);

            double x180pi = 180.0 / Math.PI;
            float azimuth = (float)(values[0] * x180pi);
            float pitch = (float)(values[1] * x180pi);
            float roll = (float)(values[2] * x180pi);

            // In landscape mode swap pitch and roll and invert the pitch.
            if(isLandscape) {
                float tmp = pitch;
                pitch = -roll;
                roll = -tmp;
                azimuth = 180 - azimuth;
            } else {
                pitch = -pitch - 90;
                azimuth = 90 - azimuth;
            }

            onOrientationChanged(azimuth,pitch,roll);
        }
    }

    private float[] mags = new float[3];
    private float[] accels = new float[3];
    private boolean isReady;

    private float[] rot = new float[9];
    private float[] outR = new float[9];
    private float[] inclination = new float[9];
    private float[] values = new float[3];

    /**
    Azimuth: angle between the magnetic north direction and the Y axis, around the Z axis (0 to 359). 0=North, 90=East, 180=South, 270=West
    Pitch: rotation around X axis (-180 to 180), with positive values when the z-axis moves toward the y-axis.
    Roll: rotation around Y axis (-90 to 90), with positive values when the x-axis moves toward the z-axis.
    */
    public abstract void onOrientationChanged(float azimuth, float pitch, float roll);
} 
```

我试图弄清楚如何添加陀螺仪数据，但我做得不对。[http://developer.android.com/reference/android/hardware/SensorEvent.html](http://developer.android.com/reference/android/hardware/SensorEvent.html)上的谷歌文档显示了一些从陀螺仪数据中获取增量矩阵的代码。这个想法似乎是我将加速计和磁传感器的滤波器调低，以使它们真正稳定。这将跟踪长期方向。

然后，我会保留来自陀螺仪的最新 N delta 矩阵的历史记录。每次我得到一个新的时，我都会放弃最旧的一个，然后将它们全部相乘以获得最终矩阵，然后将其与加速度计和磁传感器返回的稳定矩阵相乘。

这似乎不起作用。或者，至少，我的实现不起作用。结果远比加速度计更加紧张。增加陀螺仪历史的大小实际上会增加抖动，这让我认为我没有从陀螺仪计算正确的值。

```
public abstract class SensorsListener3
    implements
        SensorEventListener
{
    /** The lower this is, the greater the preference which is given to previous values. (slows change) */
    private static final float kFilteringFactor = 0.001f;
    private static final float magKFilteringFactor = 0.001f;

    public abstract boolean getIsLandscape();

    @Override
    public void onSensorChanged(SensorEvent event) {
        Sensor sensor = event.sensor;
        int type = sensor.getType();

        switch (type) {
            case Sensor.TYPE_MAGNETIC_FIELD:
                mags[0] = event.values[0] * magKFilteringFactor + mags[0] * (1.0f - magKFilteringFactor);
                mags[1] = event.values[1] * magKFilteringFactor + mags[1] * (1.0f - magKFilteringFactor);
                mags[2] = event.values[2] * magKFilteringFactor + mags[2] * (1.0f - magKFilteringFactor);

                isReady = true;
                break;
            case Sensor.TYPE_ACCELEROMETER:
                accels[0] = event.values[0] * kFilteringFactor + accels[0] * (1.0f - kFilteringFactor);
                accels[1] = event.values[1] * kFilteringFactor + accels[1] * (1.0f - kFilteringFactor);
                accels[2] = event.values[2] * kFilteringFactor + accels[2] * (1.0f - kFilteringFactor);
                break;

            case Sensor.TYPE_GYROSCOPE:
                gyroscopeSensorChanged(event);
                break;

            default:
                return;
        }

        if(mags != null && accels != null && isReady) {
            isReady = false;

            SensorManager.getRotationMatrix(rot, inclination, accels, mags);

            boolean isLandscape = getIsLandscape();
            if(isLandscape) {
                outR = rot;
            } else {
                // Remap the coordinates to work in portrait mode.
                SensorManager.remapCoordinateSystem(rot, SensorManager.AXIS_X, SensorManager.AXIS_Z, outR);
            }

            if(gyroUpdateTime!=0) {
                matrixHistory.mult(matrixTmp,matrixResult);
                outR = matrixResult;
            }

            SensorManager.getOrientation(outR, values);

            double x180pi = 180.0 / Math.PI;
            float azimuth = (float)(values[0] * x180pi);
            float pitch = (float)(values[1] * x180pi);
            float roll = (float)(values[2] * x180pi);

            // In landscape mode swap pitch and roll and invert the pitch.
            if(isLandscape) {
                float tmp = pitch;
                pitch = -roll;
                roll = -tmp;
                azimuth = 180 - azimuth;
            } else {
                pitch = -pitch - 90;
                azimuth = 90 - azimuth;
            }

            onOrientationChanged(azimuth,pitch,roll);
        }
    }

    private void gyroscopeSensorChanged(SensorEvent event) {
        // This timestep's delta rotation to be multiplied by the current rotation
        // after computing it from the gyro sample data.
        if(gyroUpdateTime != 0) {
            final float dT = (event.timestamp - gyroUpdateTime) * NS2S;
            // Axis of the rotation sample, not normalized yet.
            float axisX = event.values[0];
            float axisY = event.values[1];
            float axisZ = event.values[2];

            // Calculate the angular speed of the sample
            float omegaMagnitude = (float)Math.sqrt(axisX*axisX + axisY*axisY + axisZ*axisZ);

            // Normalize the rotation vector if it's big enough to get the axis
            if(omegaMagnitude > EPSILON) {
                axisX /= omegaMagnitude;
                axisY /= omegaMagnitude;
                axisZ /= omegaMagnitude;
            }

            // Integrate around this axis with the angular speed by the timestep
            // in order to get a delta rotation from this sample over the timestep
            // We will convert this axis-angle representation of the delta rotation
            // into a quaternion before turning it into the rotation matrix.
            float thetaOverTwo = omegaMagnitude * dT / 2.0f;
            float sinThetaOverTwo = (float)Math.sin(thetaOverTwo);
            float cosThetaOverTwo = (float)Math.cos(thetaOverTwo);
            deltaRotationVector[0] = sinThetaOverTwo * axisX;
            deltaRotationVector[1] = sinThetaOverTwo * axisY;
            deltaRotationVector[2] = sinThetaOverTwo * axisZ;
            deltaRotationVector[3] = cosThetaOverTwo;
        }
        gyroUpdateTime = event.timestamp;
        SensorManager.getRotationMatrixFromVector(deltaRotationMatrix, deltaRotationVector);
        // User code should concatenate the delta rotation we computed with the current rotation
        // in order to get the updated rotation.
        // rotationCurrent = rotationCurrent * deltaRotationMatrix;
        matrixHistory.add(deltaRotationMatrix);
    }

    private float[] mags = new float[3];
    private float[] accels = new float[3];
    private boolean isReady;

    private float[] rot = new float[9];
    private float[] outR = new float[9];
    private float[] inclination = new float[9];
    private float[] values = new float[3];

    // gyroscope stuff
    private long gyroUpdateTime = 0;
    private static final float NS2S = 1.0f / 1000000000.0f;
    private float[] deltaRotationMatrix = new float[9];
    private final float[] deltaRotationVector = new float[4];
//TODO: I have no idea how small this value should be.
    private static final float EPSILON = 0.000001f;
    private float[] matrixMult = new float[9];
    private MatrixHistory matrixHistory = new MatrixHistory(100);
    private float[] matrixTmp = new float[9];
    private float[] matrixResult = new float[9];

    /**
    Azimuth: angle between the magnetic north direction and the Y axis, around the Z axis (0 to 359). 0=North, 90=East, 180=South, 270=West 
    Pitch: rotation around X axis (-180 to 180), with positive values when the z-axis moves toward the y-axis. 
    Roll: rotation around Y axis (-90 to 90), with positive values when the x-axis moves toward the z-axis.
    */
    public abstract void onOrientationChanged(float azimuth, float pitch, float roll);
}

public class MatrixHistory
{
    public MatrixHistory(int size) {
        vals = new float[size][];
    }

    public void add(float[] val) {
        synchronized(vals) {
            vals[ix] = val;
            ix = (ix + 1) % vals.length;
            if(ix==0)
                full = true;
        }
    }

    public void mult(float[] tmp, float[] output) {
        synchronized(vals) {
            if(full) {
                for(int i=0; i<vals.length; ++i) {
                    if(i==0) {
                        System.arraycopy(vals[i],0,output,0,vals[i].length);
                    } else {
                        MathUtils.multiplyMatrix3x3(output,vals[i],tmp);
                        System.arraycopy(tmp,0,output,0,tmp.length);
                    }
                }
            } else {
                if(ix==0)
                    return;
                for(int i=0; i<ix; ++i) {
                    if(i==0) {
                        System.arraycopy(vals[i],0,output,0,vals[i].length);
                    } else {
                        MathUtils.multiplyMatrix3x3(output,vals[i],tmp);
                        System.arraycopy(tmp,0,output,0,tmp.length);
                    }
                }
            }
        }
    }

    private int ix = 0;
    private boolean full = false;
    private float[][] vals;
} 
```

第二个代码块包含我从第一个代码块中添加陀螺仪的更改。

具体来说，加速度的过滤因子变小（使值更稳定）。MatrixHistory 类跟踪在 gyroscopeSensorChanged 方法中计算的最后 100 个陀螺仪 deltaRotationMatrix 值。

我在这个网站上看到了很多关于这个主题的问题。他们帮助我达到了这一点，但我不知道下一步该做什么。我真希望 Sensor Fusion 的人刚刚在某处发布了一些代码。显然，他把这一切都放在了一起。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-15T19:22:03.763

好吧，即使知道卡尔曼滤波器是什么，也要为您 +1。如果你愿意，我会编辑这篇文章并给你我几年前写的代码来做你想做的事情。

但首先，我会告诉你为什么不需要它。

如上所述，Android 传感器堆栈的现代实现使用*Sensor Fusion 。*这只是意味着所有可用数据——加速度、磁力、陀螺仪——都在一个算法中收集在一起，然后所有输出都以 Android 传感器的形式读回。

编辑：我刚刚偶然发现了这个关于这个主题的极好的谷歌技术讲座：[Android 设备上的传感器融合：运动处理的革命](https://www.youtube.com/watch?v=C7JQ7Rpwn2k)。如果您对该主题感兴趣，那么值得花 45 分钟观看。

本质上，Sensor Fusion 是一个黑匣子。我查看了 Android 实现的源代码，它是一个用 C++ 编写的大卡尔曼滤波器。那里有一些非常好的代码，比我写过的任何过滤器都要复杂得多，而且可能比你正在写的更复杂。请记住，这些人这样做是为了谋生。

我还知道至少有一家芯片组制造商拥有自己的传感器融合实施方案。然后设备制造商根据他们自己的标准在 Android 和供应商实现之间进行选择。

最后，正如 Stan 上面提到的，Invensense 在芯片级有自己的传感器融合实现。

无论如何，归根结底，您设备中的内置传感器融合可能优于您或我可以拼凑的任何东西。所以你*真正*想做的是访问它。

在 Android 中，有物理传感器和虚拟传感器。虚拟传感器是从可用物理传感器合成的传感器。最著名的示例是 TYPE_ORIENTATION，它采用加速度计和磁力计并创建滚动/俯仰/航向输出。（顺便说一句，你不应该使用这个传感器；它有太多的限制。）

但重要的是，较新版本的 Android 包含这两个新的虚拟传感器：

TYPE_GRAVITY 是过滤掉运动效果的加速度计输入 TYPE_LINEAR_ACCELERATION 是过滤掉重力分量的加速度计。

这两个虚拟传感器是通过加速度计输入和陀螺仪输入的组合来合成的。

另一个值得注意的传感器是 TYPE_ROTATION_VECTOR，它是由加速度计、磁力计和陀螺仪合成的四元数。它代表了设备的完整 3-d 方向，线性加速度的影响被过滤掉了。

然而，对于大多数人来说，四元数有点抽象，因为无论如何您都可能使用 3-d 转换，所以最好的方法是通过 SensorManager.getRotationMatrix() 结合 TYPE_GRAVITY 和 TYPE_MAGNETIC_FIELD。

还有一点：如果您使用的是运行旧版本 Android 的设备，则需要检测到您没有收到 TYPE_GRAVITY 事件并改用 TYPE_ACCELEROMETER。从理论上讲，这将是一个使用您自己的卡尔曼滤波器的地方，但如果您的设备没有内置传感器融合，它可能也没有陀螺仪。

无论如何，这里有一些示例代码来展示我是如何做到的。

```
 // Requires 1.5 or above

  class Foo extends Activity implements SensorEventListener {

    SensorManager sensorManager;
    float[] gData = new float[3];           // Gravity or accelerometer
    float[] mData = new float[3];           // Magnetometer
    float[] orientation = new float[3];
    float[] Rmat = new float[9];
    float[] R2 = new float[9];
    float[] Imat = new float[9];
    boolean haveGrav = false;
    boolean haveAccel = false;
    boolean haveMag = false;

    onCreate() {
        // Get the sensor manager from system services
        sensorManager =
          (SensorManager)getSystemService(Context.SENSOR_SERVICE);
    }

    onResume() {
        super.onResume();
        // Register our listeners
        Sensor gsensor = sensorManager.getDefaultSensor(Sensor.TYPE_GRAVITY);
        Sensor asensor = sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
        Sensor msensor = sensorManager.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD);
        sensorManager.registerListener(this, gsensor, SensorManager.SENSOR_DELAY_GAME);
        sensorManager.registerListener(this, asensor, SensorManager.SENSOR_DELAY_GAME);
        sensorManager.registerListener(this, msensor, SensorManager.SENSOR_DELAY_GAME);
    }

    public void onSensorChanged(SensorEvent event) {
        float[] data;
        switch( event.sensor.getType() ) {
          case Sensor.TYPE_GRAVITY:
            gData[0] = event.values[0];
            gData[1] = event.values[1];
            gData[2] = event.values[2];
            haveGrav = true;
            break;
          case Sensor.TYPE_ACCELEROMETER:
            if (haveGrav) break;    // don't need it, we have better
            gData[0] = event.values[0];
            gData[1] = event.values[1];
            gData[2] = event.values[2];
            haveAccel = true;
            break;
          case Sensor.TYPE_MAGNETIC_FIELD:
            mData[0] = event.values[0];
            mData[1] = event.values[1];
            mData[2] = event.values[2];
            haveMag = true;
            break;
          default:
            return;
        }

        if ((haveGrav || haveAccel) && haveMag) {
            SensorManager.getRotationMatrix(Rmat, Imat, gData, mData);
            SensorManager.remapCoordinateSystem(Rmat,
                    SensorManager.AXIS_Y, SensorManager.AXIS_MINUS_X, R2);
            // Orientation isn't as useful as a rotation matrix, but
            // we'll show it here anyway.
            SensorManager.getOrientation(R2, orientation);
            float incl = SensorManager.getInclination(Imat);
            Log.d(TAG, "mh: " + (int)(orientation[0]*DEG));
            Log.d(TAG, "pitch: " + (int)(orientation[1]*DEG));
            Log.d(TAG, "roll: " + (int)(orientation[2]*DEG));
            Log.d(TAG, "yaw: " + (int)(orientation[0]*DEG));
            Log.d(TAG, "inclination: " + (int)(incl*DEG));
        }
      }
    } 
```

嗯；如果您碰巧有一个四元数库，那么接收 TYPE_ROTATION_VECTOR 并将其转换为数组可能更简单。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-13T20:25:18.270

对于在哪里可以找到完整代码的问题，这里有一个 Android 果冻豆的默认实现：[https](https://android.googlesource.com/platform/frameworks/base/+/jb-release/services/sensorservice/) ://android.googlesource.com/platform/frameworks/base/+/jb-release/services/sensorservice/ 首先检查融合。 cpp/小时。它使用修改后的罗德里格斯参数（接近欧拉角）而不是四元数。除了方向之外，卡尔曼滤波器还估计陀螺漂移。对于测量更新，它使用磁力计，并且有点不正确地使用加速度（比力）。

要使用该代码，您应该是一个向导或了解 INS 和 KF 的基础知识。许多参数必须经过微调才能使过滤器正常工作。正如爱德华充分指出的那样，这些人这样做是为了生活。

At least in google's galaxy nexus this default implementation is left unused and is overridden by Invense's proprietary system.

# llvm - 如何将 libstdc++ 与 clang++ 静态链接

> ID：13679569
> 
> 赞同：6
> 
> 时间：2012-12-03T08:28:31.883
> 
> 标签：llvm, clang, static-linking

我试图通过阅读 STL 的源代码以及调试它来更深入地学习 C++，所以我想`libstdc++`静态链接到我的程序，并且使用`g++`. `clang++`但是，我怎样才能在 llvm 中实现同样的目标？

换句话说，问题是，什么是`clang++`等价物`-static-libgcc`？

`Makefile`我在用着

```
CXX=g++
CC=g++
LDFLAGS=-g -O0 -static-libgcc
CFLAGS=-O0 -Wall
CXXFLAGS=$(CFLAGS) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-02T19:58:42.303

您在 GCC 和 Clang 中寻找的标志是：`-static-libstdc++`

# android - Android 从 web 服务上的 json 获取数据

> ID：13679580
> 
> 赞同：0
> 
> 时间：2012-12-03T08:29:24.557
> 
> 标签：android, json, web-services

我有这样的json：

```
[ { "id": "c200", "name": "Ravi Tamada", "email": "ravi@gmail.com", "address": "xx-xx-xxxx,x - street, x - country", "gender" : "male", "phone" : "+91 0000000000" },
   { "id": "c201", "name": "Hero", "email": "ravi@gmail.com", "address": "xx-xx-xxxx,x - street, x - country", "gender" : "male", "phone" : "+90 0000000000" }] 
```

我想知道如何从 Web 服务中获取该 json。我知道一些关于那个的教程，但 json 总是这样：

```
 { "contacts": [ { "id": "c200", "name": "Ravi Tamada", "email": "ravi@gmail.com", "address": "xx-xx-xxxx,x - street, x-country", "gender" : "male", "phone" : "00 000000" }, 
                    { "id": "c201", "name": "Johnny Depp", "email": "johnny_depp@gmail.com", "address": "xx-xx-xxxx,x - street, x - country", "gender" : "male", "phone" : "00 000000", } ] } 
```

但是我不喜欢在“联系人”中获取数据，我只想在“联系人”中获取数据，它的意思是“id”，“name”....谁能帮帮我，拜托！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:52:49.343

* * *

用户 JsonArray 作为基本元素。

喜欢：

```
JsonArray jArray = new JsonArray(jsonString);
for(int i=0;i<jArray.size();i++){
// Here you can get your json object

JsonObject jObj = jArray.getJSONObject(i);

// use this json object: jObj
String id = jObj.getString("id");
} 
```

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:42:03.380

您可以在不解析 Json 的情况下使用 ArrayList<>

```
private final String NAMESPACE = "http://tempuri.org/";
        private final String URL = "http://10.250.11.139/AirlineWebService/FlightsService.asmx";
        private final String SOAP_ACTION = "http://tempuri.org/GetAllFlights";
        public String METHOD_NAME = "";

     public static ArrayList<Product> getAllProducts(String category,int mode)
    {
        ArrayList<Product> listProducts = new ArrayList<Product>();
        String METHOD_NAME="GetAllProducts";
        Log.d("GetAllProducts", "Inside GetAllProducts function");

        try
        {
            SoapObject webRequest = new SoapObject(NAMESPACE, METHOD_NAME);

            PropertyInfo categ=new PropertyInfo();
            categ.setName("category");
            categ.setValue(category);
            categ.setType(String.class);
            webRequest.addProperty(categ);

            PropertyInfo pswd=new PropertyInfo();
            pswd.setName("mode");
            pswd.setValue(mode);
            pswd.setType(Integer.class);
            webRequest.addProperty(pswd);

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.dotNet = true;
            envelope.setOutputSoapObject(webRequest);
            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

            androidHttpTransport.call(SOAP_ACTION + METHOD_NAME, envelope);
            Log.d("GetAllProducts - SOAP ACTION", SOAP_ACTION + METHOD_NAME);
            SoapObject response = (SoapObject)envelope.getResponse();
            int count=response.getPropertyCount();
            Log.d("GetAllCategories- Response", response.toString());

            for(int i=0;i<count; ++i)
            {
                  SoapObject p= (SoapObject) response.getProperty(i);

                   listProducts.add(new Product(Integer.parseInt(p.getProperty(0).toString()),p.getProperty(1).toString(), p.getProperty(2).toString(), p.getProperty(3).toString(), Double.parseDouble(p.getProperty(4).toString()), Double.parseDouble(p.getProperty(5).toString()),p.getProperty(6).toString()));

                   Log.d("GetAllCategories- Response", p.toString());
            }

            return listProducts;
        }catch (Exception e) {
                // TODO: handle exception

            return listProducts;
            }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T08:40:48.230

假设您使用的是[http://www.androidhive.info/2012/01/android-json-parsing-tutorial/之类的教程](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

尝试这个：

它说`JSONObject json = jParser.getJSONFromUrl(url);`更改为`JSONArray jsonArray = jParser.getJSONFromUrl("url");`

您还必须更改 to 的返回`getJSONFromUrl(String url)`类型`JSONArray`

# java - 以下 try-catch 语句有什么区别？

> ID：13679581
> 
> 赞同：-1
> 
> 时间：2012-12-03T08:29:36.347
> 
> 标签：java, try-catch, code-standards

`try-catch`这些块的用法和何时应该使用每个块有什么区别？

```
try {
  doSomething1();
} catch(Exception e1){
  exception_handle1();
}
try {
  doSomething2();
} catch(Exception e2){
  exception_handle2();
} 
```

* * *

```
try {
  doSomething1();
  doSomething2();
} catch(Exception e1) {
  exception_handle1();
} catch(Exception e2) {
  exception_handle2();
} 
```

* * *

```
try {
  doSomething1();
  try {
    doSomething2();
  } catch(Exception e2){
    exception_handle2();
  }
} catch(Exception e1){
  exception_handle1();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T08:34:52.720

```
try {
  doSomthing1()
catch(Exception e1){
  exception_handle1()
}
try {
  doSomthing2()
catch(Exception e2){
  exception_handle2()
} 
```

`doSomthing1()`并且`doSomthing2()`是不相关的方法。其中任何一个的失败都是相互独立的。

```
try {
  doSomthing1()
  doSomthing2()
catch(Exception e1){
  exception_handle1()
}catch(Exception e2){
  exception_handle2()
} 
```

我们可以通过这种方式使用 try-catch 块来阻止`doSomthing2()`方法在`doSomthing1()`失败时执行。我们可以使用两个 catch 块单独处理每个异常。但是，需要注意的重要一点是，您`2nd catch block`是一个`unreachable code`. 一般来说，您应该首先为更具体的异常设置 catch 块，然后是通用异常。现在，在您的情况下，第二个 catch 块应该处理的所有异常都将在第一个中处理。

```
try {
  doSomthing1()
  try {
    doSomthing2()
  catch(Exception e2){
    exception_handle2()
  }
}
catch(Exception e1){
  exception_handle1()
} 
```

我们有 2 个相互嵌入的 try-catch 块。即使在`doSomthing2()`失败之后，程序也会在 try 块内继续。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T08:32:00.640

嗯，第一个和其他两个之间的明显区别是`doSomthing2`无论是否`doSomthing1`抛出异常都会尝试。在您引用的确切代码中，除了第三个示例之外，第二个和第三个示例（除了语法错误）之间没有太大区别，您的第二个`try`异常处理代码*在*第一个异常处理代码中，所以如果它抛出，抛出将被抓住。

您应该使用哪个完全取决于具体情况。`doSomthing2`有时，无论是否`doSomthing1`引发异常，都适合运行。有时不是。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T08:34:17.863

如果 doSomThing1 失败，则代码继续执行 doSomthing2

在第二个示例中，如果 doSomthing1 失败，则不会执行 doSomthing2

而第三个示例与第二个示例类似。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T09:02:59.080

创建条件语句时的概念相同，只是该条件语句正在测试条件 try catch 正在测试错误

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T09:03:51.490

首先让我们假设，doSomething1() 和 exceltion_handle1()，不要调用 System.exit(x) 什么的。

1）所以第一段代码，将doSomething1（），无论doSomething1（）是否会抛出任何异常，它都会处理它（处理catch代码块）并进入第二次尝试并以相同的方式运行它。

```
try {
  doSomething1();
} catch(Exception e1){
  exception_handle1();
}
try {
  doSomething2();
} catch(Exception e2){
  exception_handle2();
} 
```

现在是早上，所以我希望我不会做出任何错误的决定。

2）这段代码会运行doSomething1()然后doSomething2()，不管哪个会失败（抛出异常），只会调用第一个catch子句，因为它吸收了所有的子类和它自己，所以第二个catch不会达到（首先考虑所有可能的例外）。所以afaik，你应该得到一个错误（不应该编译）。它很聪明，并且会认识到，无论如何都不会达到第二次捕获。

正确的模式是：当我们深入研究时，例外应该越来越广泛（严格地）。这是合乎逻辑的，随着捕获子句的顺序下降，上层捕获不应该是底部子句的父级，因为无论如何父级都会接受该异常，并且不会到达底部的子级。

```
Example: (I recommend you to learn about Multicatch in java.)
catch (Specific2ChildOfSpecific1 e3)
...
catch (specific1ChildOfException e2)
...
catch (Exception e1)

try {
  doSomething1();
  doSomething2();
} catch(Exception e1) {
  exception_handle1();
} catch(Exception e2) {
  exception_handle2();
} 
```

3）这一个：如果doSomething1（）将失败，将执行e1 catch子句，仅此而已，如果它通过，则如果doSomething2（）将运行，如果失败，则执行e2 catch子句。

注意@第二个例子，无论哪个 doSomething 会失败，都会执行 e1 （不要忘记有一个错误，因为 second 不可达）。但我明白你想问什么。

```
try {
  doSomething1();
  try {
    doSomething2();
  } catch(Exception e2){
    exception_handle2();
  }
} catch(Exception e1){
  exception_handle1();
} 
```

# git - SSH登录和git push登录的区别（脚本执行上下文）

> ID：13679591
> 
> 赞同：0
> 
> 时间：2012-12-03T08:30:51.717
> 
> 标签：git, bash, node.js, ssh, debian

我有一个服务器设置，我们使用 git 作为部署工具。它检出单个`bash`文件`post-receive`，然后执行它。

该`bash`脚本假设通过执行来停止进程`echo "" > fifo_file`。

当有人通过 SSH 登录到服务器并手动调用时，这非常有效`bash_script.sh`，在这种情况下，所有进程都将停止，代码部署并启动新进程。

但是由 执行的完全相同的序列`post-receive`并不完全有效。旧进程在重新启动后仍然存在，因此它们占用了新部署的代码工作所需的端口。

那里可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:02:47.597

我有一个类似的问题，但首先，我会给你一些提示来调试你的问题：

*   查看您的流程层次结构以了解是否存在不应该存在的流程。`ps faux`

*   如果一个进程挂在某个东西上，而您不知道是什么，您可以`strace -p <PID>`查看阻塞该进程的系统调用

*   如果这是关于文件描述符（在读取或写入调用时阻塞），那么您可以使用查看该进程的文件描述符`lsof -p <PID>`

*   现在，如果您想查看其他进程正在使用此文件描述符，您可以查看`NODE`列上的数字并运行：`lsof | grep <NODE>`

我遇到的问题是钩子脚本的标准输出和标准错误被 git 捕获在管道中，以将它们转发到远程主机（执行 git push 的主机）。此外，我的脚本重新启动了 postgresql 守护进程。因此，postgresql 继承了 git 的标准输出和标准错误。也就是说，将所有内容转发回远程命中主机的管道。

一种解决方案是在生成服务时关闭 stdout 和 stderr，例如：

```
service postgresql restart >&- 2>&- <&- 
```

但是，您不会收到任何错误消息。我犯规的另一个更通用的解决方案是将以下代码放入我的更新后挂钩中：

```
# Creates a temp file
t="$(tempfile)" || exit
trap "rm -f -- '$t'" EXIT

# Run the script
# You need to run the script in background, and to redirect its standard and
# error output to $t
bash path/to/script.bash >"$t" 2>&1 </dev/null &

# use tail -f to follow the output of the script, and --pid to exit when the
# previous script exits ($! is the pid of the script). This might not be very
# portable though
tail -n 0 --pid $! -f "$t"

# Clean up temp file
# if a process is still attached to it, the inode won't be cleared until the
# process close the file or dies. In our case, we don't care much.
rm -f -- "$t"
trap - EXIT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T23:01:19.533

您有一个脚本 bash_script.sh，它正在执行几个步骤。如果已经被钩子触发，那么第一步（通过写入 fifo 文件来停止进程）似乎不起作用。

让我们忽略以下步骤并专注于第一步。

文件系统中有一个fifo文件。一方面，该fifo有一个写入过程。在另一端，有另一个进程从该 fifo 读取并触发您的进程关闭。

该先进先出几乎完全分离了双方，因此任何细微的差异，如第一个进程的 shell 模式或环境变量都与第二个进程无关。

唯一的一点是，您需要访问正确的文件，并且需要写入权限。

一些想法：

*   确保通过绝对路径（以 / 开头）访问文件。否则，您可能只是写入错误的文件。;)
*   确保您的 fifo 具有适当的访问权限。——但应该已经是这样了。
*   添加一点调试。
    *   是否完全触发了部署脚本？
    *   你有没有抱怨什么？
    *   `id;pwd;ls -ld $fifo`在钩子中添加类似的东西。

这应该给你一个提示是怎么回事。

# blackberry-10 - 黑莓 10 中的 GZip

> ID：13679592
> 
> 赞同：0
> 
> 时间：2012-12-03T08:30:57.813
> 
> 标签：blackberry-10

嗨，我是黑莓 10 平台的新手。我正在开发一个应用程序来解压缩使用 GZip 压缩的文件。我正在寻找使用 GZip 压缩的提取文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:33:41.593

我有同样的问题，我通过添加以下方法解决了这个问题

```
gUncompress(const QByteArray &data)
{
    qDebug()<<"Reached Guncompress";
    qDebug()<<"size="<<data.size();
    if (data.size() <= 4) {
        qWarning("gUncompress: Input data is truncated");
        return QByteArray();
    }

    QByteArray result;

    int ret;
    z_stream strm;
    static const int CHUNK_SIZE = 1024;
    char out[CHUNK_SIZE];

    /* allocate inflate state */
    strm.zalloc = Z_NULL;
    strm.zfree = Z_NULL;
    strm.opaque = Z_NULL;
    strm.avail_in = data.size();
    strm.next_in = (Bytef*)(data.data());

    ret = inflateInit2(&strm, 15 +  32); // gzip decoding
    if (ret != Z_OK)
        return QByteArray();

    // run inflate()
    do {
        strm.avail_out = CHUNK_SIZE;
        strm.next_out = (Bytef*)(out);

        ret = inflate(&strm, Z_NO_FLUSH);
        Q_ASSERT(ret != Z_STREAM_ERROR);  // state not clobbered

        switch (ret) {
        case Z_NEED_DICT:
            ret = Z_DATA_ERROR;     // and fall through
        case Z_DATA_ERROR:
        case Z_MEM_ERROR:
            (void)inflateEnd(&strm);
            return QByteArray();
        }

        result.append(out, CHUNK_SIZE - strm.avail_out);
    } while (strm.avail_out == 0);

    // clean up and return
    inflateEnd(&strm);
    return result;
} 
```

我认为这将解决您的问题

# vba - 如何覆盖 msgbox 按钮以在 VBA 中卸载用户窗体？

> ID：13679600
> 
> 赞同：1
> 
> 时间：2012-12-03T08:31:42.047
> 
> 标签：vba, excel, overriding, userform, msgbox

我对 vba excel 很陌生。我正在尝试在 vba excel 中开发用于报告格式化任务的小工具。我知道如果我将下面的代码放入一个按钮中，它会卸载我的表单，但是我如何覆盖 msgbox 的按钮来卸载整个用户表单？

```
Unload UserForm1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:52:19.557

如果我正确理解了您的问题（与 Chris 一样，我不确定我是否正确），您确实知道 msgbox 可以返回一个值并且您可以使用该值来关闭您的表单？例如，第一个返回一个值，第二个没有：

```
Dim l As Long

l = MsgBox("What do you want to do?", vbOKCancel)

If l = vbCancel Then
     Unload UserForm1
Else
    MsgBox "You selected 'OK'"
End If 
```

您可以使用返回值 (l) 告诉调用 msgbox 的代码卸载表单。

# visual-studio-2010 - SharePoint Visual Studio 生成 - 错误：'.'，十六进制值 0x00

> ID：13679605
> 
> 赞同：1
> 
> 时间：2012-12-03T08:32:09.027
> 
> 标签：visual-studio-2010, sharepoint, msbuild, visual-studio-2012

当我部署我的 SharePoint 项目时，我收到以下错误：

```
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\SharePointTools\Microsoft.VisualStudio.SharePoint.targets(375,5): error : '.', hexadecimal value 0x00, is an invalid character. Line 1, position 1. 
```

行号与构建 XML 中的以下内容相关：

```
<CreateSharePointProjectService Configuration="$(Configuration)"
              Platform="$(Platform)"
              ProjectFile="$(MSBuildProjectFile)"
              ProjectReferences="@(SharePointProjectReference)"
              OutDir="$(TargetDir)">
  <Output PropertyName="ProjectService" TaskParameter="ProjectService" />
</CreateSharePointProjectService> 
```

此外，我设法将问题（或至少看似）减少到以下属性：

```
ProjectFile="$(MSBuildProjectFile)" 
```

即，如果我删除此属性，那么我将不再收到相同的错误消息（但我会收到其他错误消息）。

我不确定这里发生了什么，因为我对 MSBuild 一无所知。显然，这以前总是可以工作，所以我不知道发生了什么变化导致它不再工作。任何建议都将不胜感激，因为我已经在这方面浪费了很多时间。顺便说一句，这个问题出现在 Visual Studio 2010 和 2012 中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:33:10.530

好的，问题解决了。事实证明，错误消息实际上引用了解决方案引用的 XML 文件（包含一些部署文件）。此 XML 已以某种方式损坏，它确实符合消息“.”，十六进制值 0x00。删除此功能（无论如何都不需要部署）后，问题消失了，因此世界可以再次成为一个快乐的地方（或者至少我的经理是！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-23T00:34:17.537

我从互联网上下载了一个 msbuild 文件后遇到了这个问题。在十六进制编辑器中打开新下载的文件，我很快就发现了问题所在。该文件是用2字节字符下载的，每隔一个字节是0。我认为Notepad ++说编码是UCS-2。无论如何，修复非常简单。Notepad++ 有一个编码菜单选项，我用来将文件重写为 UTF-8。将文件改回 UTF-8 立即解决了问题。

希望这对未来的人们有所帮助。

--附录 - 我可能曾尝试在文件编码更改之前使用 PowerShell 处理文件。

# java - Java Swing - 绘制到在其他类中创建的画布

> ID：13679608
> 
> 赞同：-1
> 
> 时间：2012-12-03T08:32:15.630
> 
> 标签：java, swing, java-2d, paintcomponent, chess

**注意：**我是新来的。如果您要投反对票，请告诉我原因。

我正在使用 swing 编写一个 Java 国际象棋程序。我能够显示棋盘、初始化棋子并将它们存储在二维数组中。但是，我不知道如何在我的画布上显示这些作品。我在 Piece 类的第 65 行不断收到空指针错误。

**更新：**我已经包含了一些建议的更改。空指针错误已清除，但我仍然无法显示这些片段。我认为我没有正确地将它们指向我在国际象棋课上创建的画布。

我的程序分为三个类，如下所示：

国际象棋课

```
 import java.util.Scanner;

    import javax.swing.*;
    //import java.awt.*;

    public class Chess {
        public static final int WINDOW_WIDTH=600;
        public static final int WINDOW_HEIGHT=600;
        public static final int SQUARE_WIDTH = (WINDOW_WIDTH-10)/8;
        public static final int SQUARE_HEIGHT = (WINDOW_HEIGHT-40)/8;

        public static int position[][] = {};

        public BoardComponent mycanvas= new BoardComponent(this);

        public Chess()
        {

            JFrame mywindow;
            mywindow=new JFrame("ChessMaster 2012");
            mywindow.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            mywindow.setSize(WINDOW_WIDTH, WINDOW_HEIGHT);

            //BoardComponent mycanvas= new BoardComponent(this);    
            mywindow.add(mycanvas);
            mywindow.setVisible(true);              //window appears here
        }

        public static void main(String[] args) {
            position = new int [8][8];

            new Chess();
import javax.swing.*;
import java.awt.*;
import java.awt.image.BufferStrategy;

import javax.swing.ImageIcon;

public class Piece extends JPanel{

    Piece[]  mypiece;

    public ImageIcon piece; 
    int nextID = 0;
    BoardComponent board;
    Chess chess;
    public int locx, locy;

    public void setCanvas(BoardComponent board)
    {
        this.board=board;
    }

    public Piece(char color, char Type, int posX, int posY){
        // each piece assigned a PK on creation, beginning sequentially from top left 
        // and looping back to the beginning of each row
        int pieceID = nextID;
        char pieceColor = color;
        char pieceType = Type;

        posX = locx;
        posY = locy;

        // P = pawn, K = knight, R = Rook, B = Bishop, Q = Queen, 
        //S = king (can't reuse K, so we use S instead)
        if (pieceType == 'P'){
            new Pawn(pieceColor);
        }
        else if (pieceType == 'K'){
            new Knight(pieceColor);
        }
        else if (pieceType == 'R'){
            new Rook(pieceColor);
        }
        else if (pieceType == 'B'){
            new Bishop(pieceColor);
        }
        else if (pieceType == 'Q'){
            new Queen(pieceColor);
        }
        else if (pieceType == 'S'){
            new King(pieceColor);
        }
        nextID ++;
        Chess.position[posX][posY] = pieceID;
        setCanvas(board);
        repaint();
    }

    @Override
    public void paintComponent(Graphics g){
        super.paintComponent(g);
        drawPiece(g);
    }

    public void drawPiece(Graphics g){
        g.drawImage(piece.getImage(),(locx*Chess.SQUARE_WIDTH),(locy*Chess.SQUARE_HEIGHT),null);

    }

    public class Pawn{

        public Pawn(char color){
            if(color == 'w'){
                piece = new ImageIcon("src/gfx/wpawn.gif");
            }
            else{
                piece = new ImageIcon("src/gfx/bpawn.gif");
            }
        }
    }   

    public class Knight{

        public Knight(char color){
            if(color == 'w'){
                piece = new ImageIcon("src/gfx/wknight.gif");
            }
            else{
                piece = new ImageIcon("src/gfx/bknight.gif");
            }
        }
    }   

    public class Rook{
        public Rook(char color){
            if(color == 'w'){
                piece = new ImageIcon("src/gfx/wrook.gif");
            }
            else{
                piece = new ImageIcon("src/gfx/brook.gif");
            }
        }
    }

    public class Bishop{
        public Bishop(char color){
            if(color == 'w'){
                piece = new ImageIcon("src/gfx/wbishop.gif");
            }
            else{
                piece = new ImageIcon("src/gfx/bbishop.gif");
            }
        }
    }

    public class Queen{
        public Queen(char color){
            if(color == 'w'){
                piece = new ImageIcon("src/gfx/wqueen.gif");
            }
            else{
                piece = new ImageIcon("src/gfx/bqueen.gif");
            }
    }
    }

    public class King{
        public King(char color){
            if(color == 'w'){
                piece = new ImageIcon("src/gfx/wking.gif");
            }
            else{
                piece = new ImageIcon("src/gfx/bking.gif");
            }
        }
    }

    } 
```

类板组件：

```
 import java.awt.*;
import javax.swing.*;

//This class draws the board and places the initial pieces
public class BoardComponent extends JComponent{
    Chess chess;

    public BoardComponent(Chess chessobject)
    {
        super();
        chess=chessobject;
    }

    @Override
    public void paintComponent(Graphics g)
    {
    super.paintComponent(g);
    int rowCount = 0;
    int highCount = 0;
    int wideCount = 0;
    int squareCount = 0;
    ImageIcon piece;
    for(rowCount = 0; rowCount<8;rowCount++){

        for(int i = 0; i < 8; i++){
            if(squareCount%2==1){
                g.setColor(Color.ORANGE);
            }
            else{
                g.setColor(Color.darkGray);
            }
            g.fillRect(wideCount,highCount, Chess.SQUARE_WIDTH-5, Chess.SQUARE_HEIGHT-5);
            squareCount = squareCount + 1;
            wideCount = wideCount + Chess.SQUARE_WIDTH;
            g.setColor(Color.RED);
        }
        squareCount +=1;
        wideCount = 0;
        highCount = highCount + Chess.SQUARE_HEIGHT;
    }
    }
} 
```

课件：

```
import javax.swing.*;
import java.awt.*;
import java.awt.image.BufferStrategy;

import javax.swing.ImageIcon;

public class Piece extends JPanel{

Piece[]  mypiece;

public ImageIcon piece; 
int nextID = 0;
BoardComponent board;
Chess chess;
public int locx, locy;

public void setCanvas(BoardComponent board)
{
    this.board=board;
}

public Piece(char color, char Type, int posX, int posY){
    // each piece assigned a PK on creation, beginning sequentially from top left 
    // and looping back to the beginning of each row
    int pieceID = nextID;
    char pieceColor = color;
    char pieceType = Type;

    posX = locx;
    posY = locy;

    // P = pawn, K = knight, R = Rook, B = Bishop, Q = Queen, 
    //S = king (can't reuse K, so we use S instead)
    if (pieceType == 'P'){
        new Pawn(pieceColor);
    }
    else if (pieceType == 'K'){
        new Knight(pieceColor);
    }
    else if (pieceType == 'R'){
        new Rook(pieceColor);
    }
    else if (pieceType == 'B'){
        new Bishop(pieceColor);
    }
    else if (pieceType == 'Q'){
        new Queen(pieceColor);
    }
    else if (pieceType == 'S'){
        new King(pieceColor);
    }
    nextID ++;
    Chess.position[posX][posY] = pieceID;
    setCanvas(board);
    repaint();
}

@Override
public void paintComponent(Graphics g){
    super.paintComponent(g);
    drawPiece(g);
}

public void drawPiece(Graphics g){
    g.drawImage(piece.getImage(),(locx*Chess.SQUARE_WIDTH),(locy*Chess.SQUARE_HEIGHT),null);

}

public class Pawn{

    public Pawn(char color){
        if(color == 'w'){
            piece = new ImageIcon("src/gfx/wpawn.gif");
        }
        else{
            piece = new ImageIcon("src/gfx/bpawn.gif");
        }
    }
}   

public class Knight{

    public Knight(char color){
        if(color == 'w'){
            piece = new ImageIcon("src/gfx/wknight.gif");
        }
        else{
            piece = new ImageIcon("src/gfx/bknight.gif");
        }
    }
}   

public class Rook{
    public Rook(char color){
        if(color == 'w'){
            piece = new ImageIcon("src/gfx/wrook.gif");
        }
        else{
            piece = new ImageIcon("src/gfx/brook.gif");
        }
    }
}

public class Bishop{
    public Bishop(char color){
        if(color == 'w'){
            piece = new ImageIcon("src/gfx/wbishop.gif");
        }
        else{
            piece = new ImageIcon("src/gfx/bbishop.gif");
        }
    }
}

public class Queen{
    public Queen(char color){
        if(color == 'w'){
            piece = new ImageIcon("src/gfx/wqueen.gif");
        }
        else{
            piece = new ImageIcon("src/gfx/bqueen.gif");
        }
}
}

public class King{
    public King(char color){
        if(color == 'w'){
            piece = new ImageIcon("src/gfx/wking.gif");
        }
        else{
            piece = new ImageIcon("src/gfx/bking.gif");
        }
    }
}

} 
```

我对java很陌生，这真的让我陷入了困境。任何人都可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T08:50:14.363

*   `drawPiece()`出于什么原因不要从您的构造函数调用？我想[`repaint()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#repaint%28%29)可能是你需要的。

*   不要使用`getGraphics()`它，因为它不会被初始化，直到添加面板并且如果我没记错的话第一次重绘完成。

*   也永远不要忘记尊重油漆链，并在面板`super.paintComponent(..)`的覆盖方法中作为您的第一个调用。`paintComponent(..)`

*   而是扩展`JPanel`而不是`JComponent`

我认为您的意思是在哪个地方调用`drawPiece()`您`paintComponent(..)`应该将`Graphic`s 对象传递给`drawPiece()`from ，`paintComponent(..)`如下所示：

```
public class Piece extends JPanel{

    public Piece(char color, char Type, int posX, int posY){

        // each piece assigned a PK on creation, beginning sequentially from top left 
        // and looping back to the beginning of each row
        ....

        // P = pawn, K = knight, R = Rook, B = Bishop, Q = Queen, 
        //S = king (can't reuse K, so we use S instead (from Shah, the historical name)) 
        ....
            nextID ++;
            Chess.position[posX][posY] = pieceID;
            repaint();
    }

    @Override
    public void paintComponent(Graphics g){
        super.paintComponent(g);
        drawPiece(g);
    }

    public void drawPiece(Graphics g){
        g.drawImage(piece.getImage(),(locx*Chess.SQUARE_WIDTH),(locy*Chess.SQUARE_HEIGHT),null);
    }
} 
```

其他建议：

*   通过将 UI 创建代码包装在[EDT](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)上创建`JFrame`和其他 Swing 组件

    ```
    SwingUtilities.invokeLater(new Runnable(){
        @Override 
        public void run() {
           //create ui here
        }
    }); 
    ```

*   不要`setSize(...)`打电话`JFrame`

而是覆盖`JPanel` `getPreferredSize()`并返回适合组件等的适当大小，而不是在设置可见之前删除调用`setSize`和`JFrame`调用实例`pack()``JFrame`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:51:59.503

您的变量似乎`board`尚未初始化。你需要先调用`setCanvas()`来初始化它，然后你可以调用`drawPiece()`.

# c# - 如何在谷歌地图或必应地图上检索建筑物的坐标（长、宽、高）？

> ID：13679609
> 
> 赞同：3
> 
> 时间：2012-12-03T08:32:30.460
> 
> 标签：c#, google-maps, map, coordinates, bing-maps

我想知道是否可以使用谷歌地图或必应地图来检索建筑物的坐标？如果可能，他们的位置（纬度和经度）和建筑物的高度？

如果我们可以恢复**视角**和使用**的透视**我们应该可以计算出高度 近似不是？

我已经在网上搜索过，但显然不可能获得所有这些信息？一千个谢谢

最好在c#中^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-18T12:07:11.277

有几种方法可以做到这一点，但它们并不完全准确，并且可能存在法律问题。在 Bing 地图中使用 Birdseye 图像可以让您从角度查看建筑物，从技术上讲，可以进行大量数学运算来获得建筑物的高度。但是，使用 Birdseye 图像执行此操作违反 Bing Maps 的使用条款，并且是数据提供商针对鸟瞰图像设置的限制。

另一种方法是使用旧的 Bing Maps 23D 控件和鼠标事件来获取单击位置的高度。我很久以前在这里写了一篇关于这个的博客文章：[http ://rbrundrit.wordpress.com/2009/10/03/bing-map-3d-altitude-extraction-via-mouse-click/](http://rbrundritt.wordpress.com/2009/10/03/bing-map-3d-altitude-extraction-via-mouse-click/)

Bing 地图有一个新的 3D 地图控件，目前作为 Windows 8 应用程序预览。目前没有公共 API，但如果这是为了概念验证或演示，您可以随时尝试使用 dll。这是一篇关于如何做到这一点的博客文章：http: [//sharpgis.net/post/2014/01/28/The-layout-of-an-ExtensionSDK](http://sharpgis.net/post/2014/01/28/The-layout-of-an-ExtensionSDK)

# powershell - 如何使用 Powershell 执行 exe？

> ID：13679610
> 
> 赞同：-7
> 
> 时间：2012-12-03T08:32:41.363
> 
> 标签：powershell

我在 .net 中创建了一个 Windows 应用程序。我需要使用 powershell 执行应用程序生成的 exe。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:38:05.613

我通常会使用呼叫运算符 (&)：

```
$args = @('arg1', 'arg2', 'arg3')
& app.exe $args 
```

[此处](http://social.technet.microsoft.com/wiki/contents/articles/7703.powershell-running-executables.aspx)详细列出了可用选项的完整列表。

# opengl - NV_path_rendering 扩展可以在 OpenGL 4+ 核心配置文件中使用吗？

> ID：13679611
> 
> 赞同：-1
> 
> 时间：2012-12-03T08:32:42.873
> 
> 标签：opengl, nvidia

我一直在阅读有关使用 NVidia NV_path_rendering 扩展[的文档](https://developer.nvidia.com/nv-path-rendering)。对我来说不清楚的是它是否可以在 OpenGL 4 中使用更大的核心配置文件。我不确定它，因为在提供的示例中我可以看到固定管道（矩阵，颜色）。还指出，在路径渲染步骤期间，除了片段之外的所有着色器阶段都被丢弃。这些方法是扩展特定的还是来自固定的 GL API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:36:55.747

从[扩展规范](http://www.opengl.org/registry/specs/NV/path_rendering.txt)：

> 对于 OpenGL 3.x 及更高版本，需要 ARB_compatibility。

所以不行。如果您要求提供核心配置文件，NVIDIA 不会公开 ARB_compatibility。

# android - 在android中加载地图时显示普通网格

> ID：13679615
> 
> 赞同：1
> 
> 时间：2012-12-03T08:32:56.170
> 
> 标签：android, google-maps, map, android-widget

我必须在我的应用程序中加载地图。我已经完成了一切..1.获取密钥和所有..但是现在它显示为普通网格..地图没有加载...请帮助我..

我的活动代码：

```
public class Mapcctivity extends MapActivity {
    private MapView mMapView = null;  
     private MapController mc = null;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_mapcctivity);

        GeoPoint gPoint = new GeoPoint(19240000,-99120000);

        mMapView = (MapView) findViewById(R.id.mView);
        mMapView.setSatellite(true);
        mMapView.setBuiltInZoomControls(true);

        mc = mMapView.getController();
        mc.setZoom(15);
        mc.setCenter(gPoint);
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

} 
```

我的布局文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <com.google.android.maps.MapView
  android:id="@+id/mView"
  android:layout_width="fill_parent" 
  android:layout_height="375dp"
  android:padding="5dp"
  android:enabled="true" 
  android:clickable="true" 
  android:apiKey="My key" />

</LinearLayout> 
```

清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.map"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.INERNET" />
    <uses-permission android:name="android.permission.WRITE_GSERVICES" />

    <application

        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <uses-library android:name="com.google.android.maps" />
        <activity
            android:name=".Mapcctivity"
            android:label="@string/title_activity_mapcctivity" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>

</manifest> 
```

当 Map 加载我的 logcat 时是这样的：

```
12-03 13:48:17.127: D/dalvikvm(3601): GC freed 9551 objects / 643272 bytes in 402ms
12-03 13:52:18.308: E/ActivityThread(3631): Failed to find provider info for com.google.settings
12-03 13:52:18.318: E/ActivityThread(3631): Failed to find provider info for com.google.settings
12-03 13:52:18.357: E/ActivityThread(3631): Failed to find provider info for com.google.settings
12-03 13:52:19.018: D/dalvikvm(3631): GC freed 1919 objects / 127480 bytes in 249ms
12-03 13:52:19.308: I/MapActivity(3631): Handling network change notification:CONNECTED
12-03 13:52:19.317: E/MapActivity(3631): Couldn't get connection factory client
12-03 13:52:19.877: D/dalvikvm(3631): GC freed 4601 objects / 269864 bytes in 121ms
12-03 13:52:24.007: D/dalvikvm(3631): GC freed 13809 objects / 922976 bytes in 137ms
12-03 13:55:31.117: D/dalvikvm(3631): GC freed 9545 objects / 640824 bytes in 163ms
12-03 14:43:38.588: E/ActivityThread(3662): Failed to find provider info for com.google.settings
12-03 14:43:38.598: E/ActivityThread(3662): Failed to find provider info for com.google.settings
12-03 14:43:38.797: E/ActivityThread(3662): Failed to find provider info for com.google.settings
12-03 14:43:40.348: D/dalvikvm(3662): GC freed 1941 objects / 128336 bytes in 219ms
12-03 14:43:41.359: I/MapActivity(3662): Handling network change notification:CONNECTED
12-03 14:43:41.359: E/MapActivity(3662): Couldn't get connection factory client
12-03 14:43:42.547: D/dalvikvm(3662): GC freed 4601 objects / 269880 bytes in 137ms
12-03 14:43:47.217: D/dalvikvm(3662): GC freed 13715 objects / 918384 bytes in 226ms 
```

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:42:14.657

你把钥匙交给这里了吗？

```
android:apiKey="My key" 
```

另请注意，您用于签署应用程序的证书仅在您导出时使用。当您在 Eclipse 应用程序中按“运行”时，您的“开发证书”会签名。由于 API 密钥与开发者证书绑定，您必须使用自己的密钥对应用进行签名，或者将 API 密钥更改为为您的开发密钥生成的密钥。

# xmpp - 在 openfire 上启用 http-bind

> ID：13679620
> 
> 赞同：4
> 
> 时间：2012-12-03T08:33:36.553
> 
> 标签：xmpp, openfire, strophe

我正在尝试通过 Openfire 启用 BOSH 连接，以便我可以通过 Web 创建 XMPP 客户端。目前我正在使用 strophe.js 对其进行测试。

问题是当我尝试在浏览器中触发以下网址时

```
http://www.mydomain.com:7070/http-bind 
```

跟随错误

```
HTTP ERROR 400

    Problem accessing /http-bind/. Reason:

        Bad Request
    Powered by Jetty:// 
```

这是我的服务器设置，我看到的线程很少，但它们没有帮助

![在此处输入图像描述](../Images/9b84f032471d81441f9b4179ddc38016.png)

**更新**

我已经使用 strophe 建立了连接，但在浏览器恍惚中出现以下错误

![在此处输入图像描述](../Images/ed39cf255fb31376b97e5d1cc668c10d.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-12T09:23:29.133

它现在在我的系统中工作。

我认为您遇到的错误实际上可能是 openfire 的配置问题。

如果请求中没有元素，则它旨在回复 HTTP 400 Bad Request。您可以通过在查询中提供一个元素来自行测试。

在浏览器中尝试以下 URL：

```
 http://www.servername:7070/http-bind/?<body rid="1"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T10:34:26.803

在您的更新中，Strophe 正在发送 OPTIONS HTTP 请求，这意味着它正在协商跨域通信。请求被涂成红色，这意味着由于某种原因它失败了。可能配置错误。这里有一篇很好的文章：http: [//metajack.im/2010/01/19/crossdomain-ajax-for-xmpp-http-binding-made-easy/](http://metajack.im/2010/01/19/crossdomain-ajax-for-xmpp-http-binding-made-easy/)

否则，当 Strophe 进行常规 BOSH 通信时，它使用 POST 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T09:22:27.490

你的设置是正确的。浏览器显示给你的页面也是正常的。Openfires BOSH 组件并非设计用于带有 HTTP GET 的浏览器，仅适用于 strophe 之类的 BOSH 客户端。尝试连接 strophe。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-23T07:24:41.420

您应该使用代理将请求重新发布到 openfire 服务器。因为，js post不支持跨域。

备注：
1.我用的是jsjac，但我觉得不重要。
2.如果你确定你的配置是正确的，请重启你的openfire服务器。这是我的经验。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-03T04:56:17.830

如果服务器配置正确，它应该显示

```
HTTP ERROR: 404

Problem accessing /http-bind/. Reason:

  Not Found
Powered by Jetty:// 
```

当我在 [此处](http://ubuntu-for-humans.blogspot.com/2009/11/uninstall-openfire-from-ubuntu-system.html)卸载并重新安装 Openfire 时，错误请求消失了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-09T13:42:06.157

下面对我有用，我在一段时间后ping openfire服务器，所以客户端仍然活着......我只是在服务器名称后面附加“/？<body rid ='1'”并且我没有400错误请求错误.

```
 XMPPconnection.sendIQ($iq({ to: XMPPserver+"/?<body rid='1'/>", from: CurrentUserJID, type: "get" }).c('ping', { xmlns: "urn:xmpp:ping" })); 
```

# smartcard - 检索智能卡 ID

> ID：13679622
> 
> 赞同：-1
> 
> 时间：2012-12-03T08:33:43.683
> 
> 标签：smartcard, smartcard-reader

我有智能卡的 ATR，我想获得它的 ID。我应该使用哪些 APDU 命令？

如果没有命令，如何实现？

我对智能卡完全陌生，谷歌并没有多大帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:19:39.810

您使用的是哪张卡 SCOSTA 或任何 SLE 卡？如果您使用的是 SCOSTA 接触卡，获取芯片序列号的命令是 00 CA 02 46 响应将是 61 XX XX 表示下一个命令中的字节数发送 00 CA 02 46 XX this。您将获得芯片序列号。如果您使用的是 Contactless SCOSTA 卡，则获取 UID 取决于读卡器。

# ios - 在 Xcode 中使用应用程序单元测试框架时未调用 viewDidAppear 事件

> ID：13679627
> 
> 赞同：2
> 
> 时间：2012-12-03T08:34:06.260
> 
> 标签：ios, xcode, testing

我在 Xcode 中设置了一个带有单元测试框架的应用程序。之后，我为应用程序编写了测试代码。例如， `[welcomeViewController next:welcomeViewController.nextButton];` 这将把另一个推`viewController`入`UINavigationViewController`.

但是，模拟器中的视图没有改变，`viewDidAppear`也没有调用另一个 viewController 的事件。我检查`viewWillAppear`了另一个事件`viewController`是否被正确调用。

这是单元测试框架的错误还是我在使用单元测试框架时错了？

提前致谢。

# spring-mvc - Spring Security：多个安全上下文但返回错误的 authentication-failure-url

> ID：13679628
> 
> 赞同：6
> 
> 时间：2012-12-03T08:34:13.203
> 
> 标签：spring-mvc, spring-security

我正在使用 Spring Security 3.1.2 版。

这是配置：

```
<http pattern="/embedded/**" auto-config="true" use-expressions="true" access-denied-page="/embedded/login.htm">
    <intercept-url pattern="/embedded/login-embedded.html" access="hasRole('ROLE_AUTHENTICATED')"/>
    <intercept-url pattern="/embedded/**" access="permitAll"/>
    <form-login login-page="/embedded/login.htm"
                authentication-failure-url="/embedded/login.htm?error=true"
                default-target-url="/embedded/login-embedded.html" />
    <logout logout-success-url="/embedded/index.html"/>

</http>

<http auto-config="true" use-expressions="true" access-denied-page="/login.htm">
    <intercept-url pattern="/login-success.html" access="hasRole('ROLE_AUTHENTICATED')"/>
    <intercept-url pattern="/**" access="permitAll"/>
    <form-login login-page="/login.htm"
                authentication-failure-url="/login.htm?error=true"
                default-target-url="/login-success.html"/>
    <logout logout-success-url="/index.html"/>
</http> 
```

我将数据发布到 Spring MVC 控制器，该控制器调用服务来验证验证码。如果通过了，则将其转发给`j_spring_security_check`RequestDispatcher。

这是控制器的相关部分：

```
@RequestMapping(value ="/embedded/login.htm", method = RequestMethod.POST)
public String authenticateCaptcha(HttpServletRequest request,
                                  HttpServletResponse response,
                                  @RequestParam String verificationText) throws IOException, ServletException {
    HttpSession session = request.getSession();
    String sessionId = session.getId();
    if (captchaService.validate(sessionId, verificationText)) {
        request.getRequestDispatcher("/j_spring_security_check").forward(request, response);
        return null;
    }
    return buildErrorRedirect(request);
} 
```

我的问题是，在验证验证码并将请求转发到 Spring Security 并且身份验证失败后，它转发到的错误页面是`/login.htm?error=true`而不是`/embedded/login.htm?error=true`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T09:00:38.917

URL`/j_spring_security_check`不匹配`/embedded/**`，因此`authentication-failure-url="/login.htm?error=true"`使用 - 第二个配置中的一个。

最近有人问过类似的问题：

[具有两个领域的 Spring 安全性，从不调用第一个 default-target-url](https://stackoverflow.com/questions/13539011/spring-security-with-two-realms-first-default-target-url-is-never-invoked)

Spring Security 的一位创建者回答了这个问题。我建议阅读它。

另一个值得一提的 Stack Overflow： [为什么转发的请求会再次通过过滤器链？](https://stackoverflow.com/questions/6677631/why-does-a-forwarded-request-pass-through-filter-chain-again)

# extjs - 无法过滤多个 extjs 网格列

> ID：13679631
> 
> 赞同：1
> 
> 时间：2012-12-03T08:34:18.987
> 
> 标签：extjs, filter, grid, extjs4, store

要过滤一个网格列，我使用：

```
store.filter({
          property: 'first_name',
          anyMatch: true,
          value   : this.getValue()
      }); 
```

现在我需要一次搜索多个字段，例如：

```
 var filters = [
    new Ext.util.Filter({
    property: "first_name", anyMatch: true, value: this.getValue()
    }),
    new Ext.util.Filter({
   property: "last_name", anyMatch: true, value: this.getValue()
   })
 ];
  store.filter(filters); 
```

**奇怪的是，在这两种情况下，只有单一搜索有效**

这没有帮助[如何过滤多个 extjs 网格列？](https://stackoverflow.com/questions/7996028/how-to-filter-multiple-extjs-grid-columns)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:45:43.153

根据您实现过滤器的方式，我猜您正在使用`remoteSort: false`作为提示：您不需要创建过滤器的实例，只需提供配置即可。如果可能的话备用`this`。大多数事件提供组件的实例，使用它而不是`this`. 它可以让你头疼。

我测试了它并且它有效。这是一个简单的例子：

```
Ext.create('Ext.data.Store', {
    storeId:'simpsonsStore',
    fields:['name', 'email', 'phone'],
    data:{'items':[
        { 'name': 'Lisa',  "email":"lisa@simpsons.com",  "phone":"555-111-1224"  },
        { 'name': 'Lisam',  "email":"lisa@simpsons.com",  "phone":"555-222-1234" },
        { 'name': 'Bart',  "email":"bart@simpsons.com",  "phone":"555-222-1234" },
        { 'name': 'Homer', "email":"home@simpsons.com",  "phone":"555-222-1244"  },
        { 'name': 'Marge', "email":"marge@simpsons.com", "phone":"555-222-1254"  }
    ]},
    proxy: {
        type: 'memory',
        reader: {
            type: 'json',
            root: 'items'
        }
    }
});

Ext.create('Ext.grid.Panel', {
    title: 'Simpsons',
    tbar: [{
        text: 'filter',
        handler: function(btn) {
            var g = btn.up('grid');
            g.store.filter([{property: "name", anyMatch: true, value: 'Lisa'},{property: "email", anyMatch: true, value: 'lisa@simpsons.com'}])
        }
    }],
    store: Ext.data.StoreManager.lookup('simpsonsStore'),
    columns: [
        { text: 'Name',  dataIndex: 'name' },
        { text: 'Email', dataIndex: 'email', flex: 1 },
        { text: 'Phone', dataIndex: 'phone' }
    ],
    height: 200,
    width: 400,
    renderTo: Ext.getBody()
}); 
```

这是一个**[JSFiddle](http://jsfiddle.net/BvDjH/)**

***带有文本字段的***版本 2****

 ***```
Ext.create('Ext.data.Store', {
    storeId:'simpsonsStore',
    fields:['name', 'email', 'phone'],
    data:{'items':[
        { 'name': 'Lisa',  "email":"lisa@simpsons.com",  "phone":"555-111-1224"  },
        { 'name': 'Lisam',  "email":"lisa@simpsons.com",  "phone":"555-222-1234" },
        { 'name': 'Bart',  "email":"bart@simpsons.com",  "phone":"555-222-1234" },
        { 'name': 'Homer', "email":"home@simpsons.com",  "phone":"555-222-1244"  },
        { 'name': 'Marge', "email":"marge@simpsons.com", "phone":"555-222-1254"  }
    ]},
    proxy: {
        type: 'memory',
        reader: {
            type: 'json',
            root: 'items'
        }
    }
});

Ext.create('Ext.grid.Panel', {
    title: 'Simpsons',
    tbar: [{
        xtype: 'textfield',
        emptyText: 'filter',
        listeners: {
            specialkey: function(field, e){
                if (e.getKey() == e.ENTER) {
                    var g = field.up('grid'),
                        value = field.getValue(); 
                    g.store.filter({scope: this, filterFn: function(rec) { 
                    var rege = new RegExp(".*" + value + ".*"); 
                    if (rege.test(rec.data.name) || rege.test(rec.data.email)) {
                        return true;
                    }
                    return false;
                } 
            });
                }
            }
        }
    }],
    store: Ext.data.StoreManager.lookup('simpsonsStore'),
    columns: [
        { text: 'Name',  dataIndex: 'name' },
        { text: 'Email', dataIndex: 'email', flex: 1 },
        { text: 'Phone', dataIndex: 'phone' }
    ],
    height: 200,
    width: 400,
    renderTo: Ext.getBody()
});​ 
```

和**[JSFiddle](http://jsfiddle.net/BvDjH/1/)*****

# java - struts2-jquery 在 struts2 jquery 对话框中使用带有更多 struts2 jquery 元素的操作

> ID：13679632
> 
> 赞同：0
> 
> 时间：2012-12-03T08:34:36.930
> 
> 标签：java, jquery, jsp, struts2, struts2-jquery

我有一个带有模式[struts 2 jquery 对话框](http://code.google.com/p/struts2-jquery/wiki/DialogTag)的主页，该对话框调用包含 struts 表单的 struts2 操作。

**主页对话框代码**

```
<s:url id="newItemURL" var="newItemURL" action="addNewItem" />
<sj:dialog id="newItem" href="%{newItemURL}" title="Create New Item" width="700" position="top" autoOpen="false"
                        loadingText="Loading..." />
<sj:a id="addNewItem" openDialog="newItem" button="true" buttonIcon="ui-icon-refresh">New Item</sj:a> 
```

**addNewItem Action Result JSP**
如果成功，此表单提交并生成文本结果。

```
 <div id="newItemForm">
        <s:form action="addNewItem" id="addNewItem">
            <fieldset>
            <legend>Create a new item</legend>
            <label for="description">Description: </label>
                <s:textarea id="description" name="item.description" label="Description:" cols="20" rows="5"/><br />
                <sj:submit id="submitNewItem" targets="resultNewItem" value="Submit" indicator="indicator" button="true" replaceTarget="true" />
            </fieldset> 
        </s:form>
    </div>
    <div id="resultNewItem"></div> 
```

addNewItem 表单可以单独使用`<sj:head />`，AJAX 结果显示在 resultNewItem div 中。`<sj:head />`必须在 addNewItem JSP 中删除以避免与主页冲突。

问题是当 addNewItem Action 在提交表单时包含在对话框中时，调用了主页操作，因此我最终在对话框中找到了另一个主页。

我该如何解决这个问题？

编辑：

**Struts 配置**

```
 <action name="homepage"
        class="com.actions.Homepage">
        <result name="success" type="tiles">Homepage</result>
    </action>

    <action name="AddNewItem" class='com.actions.AddNewItem'> 
        <result name="success">/WEB-INF/jsp/addNewRisk/addNewRisk.jsp</result>
    </action>

    <action name="smoAddNewRiskINSERT" class="com.actions.AddNewItem" method="addNewRisk"> 
        <result name="success">/WEB-INF/jsp/addNewRisk/success.jsp</result>
        <result name="error">/WEB-INF/jsp/addNewRisk/error.jsp</result>
    </action> 
```

**我想要实现的** 用户单击按钮加载对话框，创建 addNewItem 表单（AddNewItem 操作），当用户提交表单时，它通过 AJAX 提交按钮发送，结果显示在对话框中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:25:11.223

首先，为您的元素提供唯一的 id-s。正如昆西评论中指出的那样。其次，在您的 struts.xml 文件中将操作名称更改为`addNewItem`而不是`AddNewItem`.

# android - 如何使 android listview 可滚动？

> ID：13679633
> 
> 赞同：31
> 
> 时间：2012-12-03T08:34:43.543
> 
> 标签：android, android-listview

我有两个列表视图，但它们不滚动。我该如何纠正？

这是我的`layout.xml`

```
 <?xml version="1.0" encoding="utf-8"?>
    <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:fillViewport="true" >

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/backgrund" >

            <!-- Header  Starts -->

            <LinearLayout
                android:id="@+id/header"
                android:layout_width="fill_parent"
                android:layout_height="40dip"
                android:layout_alignParentTop="true"
                android:background="@layout/header" >
            </LinearLayout>

            <!-- Header Ends -->
            <!-- Footer Start -->

            <TextView
                android:id="@+id/textAD"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBottom="@+id/header"
                android:layout_alignParentRight="true"
                android:layout_marginBottom="14dp"
                android:layout_marginRight="26dp"
                android:text="Small Text"
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:textColor="#FFFFFF" />

            <ImageView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@+id/header"
                android:layout_gravity="center_horizontal"
                android:focusable="false"
                android:paddingBottom="5px"
                android:paddingTop="10px"
                android:src="@android:drawable/divider_horizontal_bright" />

            <View
                android:layout_width="fill_parent"
                android:layout_height="1dip"
                android:background="#000000"
                android:focusable="false" />

            <LinearLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/linearLayout1"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_below="@+id/header"
                android:orientation="vertical" >

                <TextView
                    android:id="@+id/textm"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="Malzemeler" 
                    android:textSize="20dp"
                    android:textColor="#000000"/>

                <EditText
                    android:id="@+id/editaramalzeme"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:ems="10" />

                <Button
                    android:id="@+id/btnmalzlist"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:focusable="false"
                    android:text="Ara" />

                <ListView
                    android:id="@+id/mylist"
                    android:layout_width="match_parent"
                    android:layout_height="420dp"
                    android:layout_weight="1"
                    android:background="#FFFFFF" >
                </ListView>

                <ListView
                    android:id="@+id/listsecili"
                    android:layout_width="wrap_content"
                    android:layout_height="210dp"
                    android:layout_weight="1"
                    android:background="#FFFFFF"  >
                </ListView>

                <EditText
                    android:id="@+id/txtNot"
                    android:layout_width="match_parent"
                    android:layout_height="88dp"
                    android:ems="10"
                    android:gravity="top"
                    android:inputType="textMultiLine"
                    android:lines="6"
                    android:singleLine="false" >

                    <requestFocus />
                </EditText>
            </LinearLayout>

            <Button
                android:id="@+id/btnkaydet"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@+id/linearLayout1"
                android:text="malzeme ekle" />

            <Button
                android:id="@+id/btntoplugonder"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignRight="@+id/textAD"
                android:layout_below="@+id/btnkaydet"
                android:text="toplu gonder" />
        </RelativeLayout>

    </ScrollView>** 
```

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-12-03T08:37:57.540

从来不装`ListView`。本身是可滚动的。`ScrollView``ListView`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-03T10:37:22.257

默认情况下 ListView 是可滚动的。不要把 ScrollView 放到 ListView

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-03T08:50:57.913

实际上它不好做。但如果你想这样做，只需将 listview 的高度固定为 wrap_content。

```
android:layout_height="wrap_content" 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-12-05T15:23:17.797

我知道这个问题已经有 4-5 年的历史了，但这可能还是有用的：

有时，如果您只有几个“退出屏幕”的元素，列表可能不会滚动。那是因为操作系统并不认为它实际上超出了屏幕。

我这样说是因为我今天遇到了这个问题——我只有 2 或 3 个超出屏幕限制的元素，而且我的列表不可滚动。这是一个真正的谜。一旦我添加了一些，它就开始滚动。

所以你必须首先确保它不是设计问题，就像列表看起来超出屏幕边界但实际上“它没有”，并调整它的尺寸和边距值，看看它是否开始“变得可滚动”。对我来说确实如此。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-12-03T08:47:19.200

您不应该将 ListView 放在 ScrollView 中，因为 ListView 类实现了自己的滚动，并且它只是不接收手势，因为它们都由父 ScrollView 处理

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-12-22T07:37:15.317

这是我的工作代码。你可以试试这个。

行.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/listEmployeeDetails"
        android:layout_height="match_parent" 
        android:layout_width="match_parent"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp"
        android:layout_gravity="center"
        android:background="#ffffff">

        <TextView android:id="@+id/tvEmpId"
                      android:layout_height="wrap_content"
                      android:textSize="12sp"
                      android:padding="2dp"
                      android:layout_width="0dp"
                      android:layout_weight="0.3"/>
            <TextView android:id="@+id/tvNameEmp"
                      android:layout_height="wrap_content"
                      android:textSize="12sp"                     
                      android:padding="2dp"
                      android:layout_width="0dp"
                      android:layout_weight="0.5"/>
             <TextView
                    android:layout_height="wrap_content"
                    android:id="@+id/tvStatusEmp"
                    android:textSize="12sp"
                    android:padding="2dp"
                    android:layout_width="0dp"
                    android:layout_weight="0.2"/>               
</LinearLayout> 
```

详细信息.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/listEmployeeDetails"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/page_bg"
    android:orientation="vertical" >
    <LinearLayout
        android:id="@+id/lLayoutGrid"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@color/page_bg"
        android:orientation="vertical" >

        ................... others components here............................

        <ListView
            android:id="@+id/listView"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:alwaysDrawnWithCache="true"
            android:dividerHeight="1dp"
            android:horizontalSpacing="3dp"
            android:scrollingCache="true"
            android:smoothScrollbar="true"
            android:stretchMode="columnWidth"
            android:verticalSpacing="3dp" 
            android:layout_marginBottom="30dp">
        </ListView>
    </LinearLayout>
</RelativeLayout> 
```

适配器类：

```
import java.util.List;

import android.app.Activity;
import android.content.Context;
import android.graphics.Color;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;

public class ListViewAdapter extends BaseAdapter {
    private Context context;
    private List<EmployeeBean> employeeList; 

    publicListViewAdapter(Context context, List<EmployeeBean> employeeList) {
            this.context = context;
            this.employeeList = employeeList;
        }

    public View getView(int position, View convertView, ViewGroup parent) {
            View row = convertView;
            EmployeeBeanHolder holder = null;
            LayoutInflater inflater = ((Activity) context).getLayoutInflater();
            row = inflater.inflate(R.layout.row, parent, false);

            holder = new EmployeeBeanHolder();
            holder.employeeBean = employeeList.get(position);
            holder.tvEmpId = (TextView) row.findViewById(R.id.tvEmpId);
            holder.tvName = (TextView) row.findViewById(R.id.tvNameEmp);
            holder.tvStatus = (TextView) row.findViewById(R.id.tvStatusEmp);

            row.setTag(holder);
            holder.tvEmpId.setText(holder.employeeBean.getEmpId());
            holder.tvName.setText(holder.employeeBean.getName());
            holder.tvStatus.setText(holder.employeeBean.getStatus());

             if (position % 2 == 0) {
                    row.setBackgroundColor(Color.rgb(213, 229, 241));
                } else {                    
                    row.setBackgroundColor(Color.rgb(255, 255, 255));
                }        

            return row;
        }

   public static class EmployeeBeanHolder {
        EmployeeBean employeeBean;
        TextView tvEmpId;
        TextView tvName;
        TextView tvStatus;
    }

    @Override
    public int getCount() {
            return employeeList.size();
        }

    @Override
    public Object getItem(int position) {
            return null;
        }

    @Override
    public long getItemId(int position) {
            return 0;
    }
} 
```

员工 bean 类：

```
public class EmployeeBean {
    private String empId;
    private String name;
    private String status;

    public EmployeeBean(){      
    }

    public EmployeeBean(String empId, String name, String status) {
        this.empId= empId;
        this.name = name;
        this.status = status;
    }

    public String getEmpId() {
        return empId;
    }

    public void setEmpId(String empId) {
        this.empId= empId;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getStatus() {
        return status;
    }

    public void setStatus(String status) {
        this.status =status;
    }
} 
```

在活动类中：

创建方法：

```
public static List<EmployeeBean> EMPLOYEE_LIST = new ArrayList<EmployeeBean>();

//create emplyee data
for(int i=0;i<=10;i++) {
  EmployeeBean emplyee = new EmployeeBean("EmpId"+i,"Name "+i, "Active");
  EMPLOYEE_LIST .add(emplyee );
}

ListView listView;
listView = (ListView) findViewById(R.id.listView);
listView.setAdapter(new ListViewAdapter(this, EMPLOYEE_LIST)); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-12-03T08:42:41.257

Listview 因此具有内置滚动功能。所以你不能在滚动视图中使用列表视图。将其封装在任何其他布局中，例如 LinearLayout 或 RelativeLayout。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-01-22T11:30:10.127

放入`ListView`a`ScrollView`永远不会受到启发。但是，如果您想要发布的类似 XML 的行为，我有 3 个选项：

1.  删除`ScrollView`：删除你的`ScrollView`，你可以给`ListView`s 一些相对于总布局的特定大小（特定`dp`或`layout_weight`）。

2.  将`ListView`s替换为`LinearLayout`s：您可以通过迭代项目列表来添加列表项目，并`LinearLayout`通过膨胀视图和设置相应的数据（字符串、图像等）将每个项目视图添加到相应的项目中。

3.  如果您确实需要将`ListView`s 放入 中`ScrollView`，则必须使`ListView`s 不可滚动（这实际上与上面的解决方案 2 相同，但带有`ListView`代码），否则布局将无法按预期运行。
    要制作`ListView`不可滚动，您可以阅读[此 SO post](https://stackoverflow.com/questions/7611085/disable-scrolling-in-listview)，其中对我的精确解决方案如下所示：

```
listView.setOnTouchListener(new OnTouchListener() {
  public boolean onTouch(View v, MotionEvent event) {
    return (event.getAction() == MotionEvent.ACTION_MOVE);
  }
});
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-01T19:58:21.657

我找到了一个棘手的解决方案......它只适用于RelativeLayout。我们只需要在 ListView 上方放置一个 View 并在 View 上设置可点击的“true”，在 ListView 上设置为 false

```
 <ListView
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/listview
    android:clickable="false" />

<View
    android:layout_width="match_parent"
    android:background="@drawable/gradient_white"
    android:layout_height="match_parent"
    android:clickable="true"
    android:layout_centerHorizontal="true"
    android:layout_alignTop="@+id/listview" /> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-24T12:59:36.217

我遇到了这个问题，我找到了解决方案。在我的情况下，listView 比屏幕大，所以列表不够大，需要滚动，但我看不到它，因为一半列表超出了屏幕。

我解决了它，添加了足够的 marginBotton 以使 listView 更短并且适合屏幕。

```
<ListView
        android:id="@+id/lvDatos"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginBottom="300dp"/> 
```

# c++ - 如何正确销毁向量的c++向量并释放内存

> ID：13679635
> 
> 赞同：13
> 
> 时间：2012-12-03T08:34:46.383
> 
> 标签：c++, memory-leaks, vector

> **可能重复：**
> [如果没有堆内存，如何释放 std::vector](https://stackoverflow.com/questions/7925151/how-to-release-stdvector-if-there-is-no-heap-memory)

c++ 菜鸟在这里

假设我声明了一个向量向量，例如：

```
vector<vector<vector<double> > > phi_x; 
```

**用完后如何销毁以释放内存？**

我读过其他一些网站，他们建议使用 .clear()。据我了解，这只会删除元素，但不会释放向量容量。我希望向量被完全遗忘，就像它从未存在过一样。

此外，我当前的向量应用程序的尺寸为 54x54x9，我有大约 12 个这样的东西。这被认为是愚蠢的大吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-03T08:36:38.430

你不必做任何事情。只是让变量超出范围。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-03T08:37:50.287

如果您调用`.clear()`，内部向量将被完全破坏。但是，最外层的向量可能会保留其用于向量数组（`phi_x.size() * sizeof(vector<vector<double> >)`字节）的内存。要完全清除它并释放所有内存，请使用空向量进行交换：

```
phi_x.swap(vector<vector<vector<double> > >()); 
```

或者干脆`phi_x`离开范围。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-03T08:37:40.650

> 用完后如何销毁以释放内存？

只是让它超出范围。

> 我当前的向量应用程序的尺寸为 54x54x9，我有大约 12 个这样的东西。这被认为是愚蠢的大吗？

这取决于。如果它是用于具有 64k 内存的嵌入式平台，那么是的，它很大。如果是标准台式机，4G+ RAM，可以忽略。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-03T08:39:22.773

你不需要做任何事情，析构函数会正确清理。

如果您想在超出范围之前释放内存使用量，那么您可以在顶层调用 clear 。这不会重新分配顶部向量使用的内存，但会删除所有包含的向量，并且它们将在其析构函数中释放它们的内存。

如果我计算正确，那大约是 100 万个 double 类型的元素。假设现代 PC 是一个不那么大的平台。甚至非常大:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-03T08:38:43.023

析构函数将为您完成清理工作。您无需执行任何操作，只需让 phi_x 超出范围即可。

```
{
    vector<vector<vector<double> > > phi_x;

    // do stuff with phi_x
}
// phi_x is gone here 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-03T08:37:30.850

如果您的`phi_x`变量是某个块内的某个局部变量，它将通过在块末尾调用其析构函数来销毁。

如果它是一个全局变量，它会在`main`结束后被销毁。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-03T08:38:15.063

如果此向量如您的示例所示，则无需进行任何额外的清理，一旦超出范围，析构函数就会正确释放内存。

这将在它声明的函数退出或它所在的对象被销毁时立即发生。

# php - 获取对应于column1最大值，最小值的column2值？

> ID：13679641
> 
> 赞同：0
> 
> 时间：2012-12-03T08:35:25.933
> 
> 标签：php, mysql

是否可以获取 max(column1) 的 column2 值。帮我。我必须在数据库中找到与 max(price) 和 min(price) 对应的日期。

```
$str="select MAX(psq_price),MIN(psq_price),AVG(psq_price) from crawl_archives where p_id=2570"; 
```

我从这个查询中找到了 max ， min 值..需要找到与最高价格对应的日期列..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:39:07.200

尝试这样的事情：

```
select * 
from <table> t
join (select max(price) as max_price
      from <table>
      group by <col1>
     )a
on a.col1=t.col1
and a.max_price=t.price 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:44:04.697

试试这个

```
 select date ,  MAX(psq_price),MIN(psq_price)
    from mytable 

    group by date 
```

# otrs - 如何在概览中隐藏锁定的工单？

> ID：13679644
> 
> 赞同：1
> 
> 时间：2012-12-03T08:35:59.010
> 
> 标签：otrs

我最近从 OTRS 2.2 升级到了 OTRS 3.1。新的用户界面很棒，但在概览页面上，“打开工单”和“新工单”两个面板也显示已经被其他用户锁定的工单（即那些已经被其他代理处理的工单）。

有没有办法*只显示未锁定的新票*和*被我锁定的*票？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T04:18:51.860

这只是部分答案：我知道如何使仪表板上的“打开票证”和“新票证”小部件显示未锁定的票证。我不确定要让那些被你锁定。

1.  以管理员身份登录并转到管理员选项卡
2.  单击 sysconfig 并搜索“dashoboard”
3.  选择属于“Ticket”组的“Frontend:Agent:Dahsboard”
4.  向下滚动到 DashboardBackend###0120-TicketNew（这是新的工单小部件）
5.  在属性下添加更多属性以满足您的需求。为了只显示未锁定的票，请添加“StateType=new;LockIDs=1;” 所以现在您将拥有所有已解锁的新门票。对锁定的使用 LockIDs=2。

要查看其他属性，请转到[API](http://dev.otrs.org/) -> OTRS cvs -> Kernel::System::TicketSearch

我不知道如何获得解锁的 && 被我锁定。也许您可以在小部件中添加代码以查看车票的所有者或锁定解锁状态以满足您的要求？如果是这样，请参见[此处](http://wiki.otterhub.org/index.php?title=Show_Customer_Data_in_Dashboard)和[此处](http://forums.otterhub.org/viewtopic.php?f=60&t=5156)

# javascript - div 或任何 html 元素的可见性是否会影响“mouseenter”功能？

> ID：13679645
> 
> 赞同：-2
> 
> 时间：2012-12-03T08:36:07.247
> 
> 标签：javascript, html, css

如果我的 div 设置为`visibility:hidden`会影响行为`onmouseenter`或`onmouseout`功能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T08:38:57.877

是的，它会的。尽管该元素通过留出一个空格在文档流中保持可视化，但您不能将鼠标移入它，因为它不在页面上的可视化上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:43:13.237

是的，尽管它仍然会在流程中占据一些空间，但您无法与之交互。

[请参见此处的示例](http://codepen.io/joe/pen/pdhLx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T08:43:56.917

是的，它会受到影响。由于 div 被隐藏，所以不会触发 mousein、mouseout 等相关事件。检查这个[愚蠢](http://jsfiddle.net/kantu/5Xrjd/)的小提琴。

```
$("#foo").mouseout(function(){ // This will stop being triggered once its invisible 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T08:41:13.277

页面中没有隐藏的东西。所以你不能调用任何鼠标事件。

# sql-server - 每天只运行一次的触发器

> ID：13679646
> 
> 赞同：3
> 
> 时间：2012-12-03T08:36:20.983
> 
> 标签：sql-server, triggers, sql-server-2012

此触发器将数据从 dbo.node 备份到 dbo.nodearchive。虽然备份很重要，但我每天只需要这样做一次。请注意，有一个名为 dbo.NodeArchive.versionDate (smalldDatetime) 的字段。

```
CREATE TRIGGER [dbo].[Node_update] 
ON  [dbo].[Node]
for UPDATE

AS 
BEGIN
INSERT INTO dbo.NodeArchive ([NodeID]
  ,[ParentNodeID]
  ,[Slug]
  ,[xmlTitle]
...    
  ,[ModifyBy]
  ,[ModifyDate]
  ,[CreateBy]
  ,[CreateDate])

SELECT [deleted].[NodeID]
  ,[deleted].[ParentNodeID]
  ,[deleted].[Slug]
  ,[deleted].[xmlTitle]
...  
  ,[deleted].[ModifyBy]
  ,[deleted].[ModifyDate]
  ,[deleted].[CreateBy]
  ,[deleted].[CreateDate]
FROM  [deleted] LEFT JOIN dbo.Node
ON  [deleted].NodeID = dbo.Node.NodeID
WHERE deleted.ModifyDate <> dbo.Node.ModifyDate
END
GO 
```

我正在寻找备份更改，但每天不超过一个备份版本。如果没有变化，就没有备份。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T08:39:38.950

这不再是一个*触发器*——这将是一个**预定的工作**。*只要*发生给定的操作（ ），触发器就按照它们的定义执行`INSERT, DELETE, UPDATE`。

使用 SQL Server 代理工具来安排该 T-SQL 代码每天运行一次。

阅读[MSDN 上 SQL Server 联机丛书中有关 SQL Server 代理作业的所有内容](http://msdn.microsoft.com/en-us/library/ms189237.aspx)

**更新：**所以如果我理解正确：你想要一个`UPDATE`触发器 - 但该触发器只会将`NodeID`受影响的触发器记录到“这些节点需要在晚上备份”之类的表中。然后，在晚上，您将有一个 SQL 代理作业运行并扫描该“工作表”并针对`NodeID`存储在其中的所有值，然后执行该 T-SQL 语句以将其数据复制到`NodeArchive`表中。

使用这种方法，如果您的节点`NodeID = 42`更改了十次，您的工作表中仍然只有一个条目`NodeID = 42`，然后夜间备份作业只会将该节点复制一次到`NodeArchive`.

使用这种方法，您可以将实际复制（可能需要时间）与更新过程*分离。*`UPDATE`触发器仅记录需要处理的`NodeID`行 - 然后实际处理会在稍后的某个时间，在非高峰时间发生，而不会干扰系统的用户。

# c# - 如何在 C# 中保存流式文档并使用文档上的信息

> ID：13679647
> 
> 赞同：0
> 
> 时间：2012-12-03T08:36:20.813
> 
> 标签：c#, parsing, csv

嗨，我目前正在完成编程课上的最后一项作业，而且我对编程领域还很陌生。我的任务是通过 Streamreader 流式传输文档并提取信息以供菜单程序访问文档。

到目前为止，我只能流式传输

```
using System;
using System.IO;

class Test
{
    public static void Main()
    {
        try
        {
            Directory.SetCurrentDirectory(@"\Users\changl\Desktop");

            using (StreamReader sr = new StreamReader("earthquakes.csv"))
            {
                String line;

                while ((line = sr.ReadLine()) != null)
                {
                    Console.WriteLine(line);
                }
            }
        }
        catch (Exception e)
        {

            Console.WriteLine("The file could not be read:");
            Console.WriteLine(e.Message);
        }
    }
} 
```

我在编程方面相当有经验，并且希望对下一步将信息保存在文档中以供以后使用有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:48:16.017

您只需用`,`, `;`,分割每一行`\t`：

```
var fieldsEnumerable = sr.ReadLine().Split(','); 
```

但是[这个](http://www.codeproject.com/Articles/86973/C-CSV-Reader-and-Writer)库会为你做：

```
List<List<string>> records = new List<List<string>>();

using (CsvReader reader = new CsvReader(FilePath, Encoding.Default))
{
    while (reader.ReadNextRecord())
        records.Add(reader.Fields);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T08:41:55.743

Console.Writeline 只是将信息写入控制台窗口，您需要某种形式的方法来保存它..

```
using (StreamReader sr = new StreamReader("earthquakes.csv"))
    {
        String line;
        List<string> myList = new List<string>();

        while ((line = sr.ReadLine()) != null)
        {
           // Console.WriteLine(line);
            myList.add(line);
        }
    } 
```

# c++ - C ++中的动态参数化构造函数问题

> ID：13679650
> 
> 赞同：4
> 
> 时间：2012-12-03T08:36:32.480
> 
> 标签：c++, constructor, parameterized

我在这里包括一个用 C++ 编写的简单程序，我正在尝试使用参数化构造函数。我的想法是动态地实例化类并捕获所需的任务。但每当我运行程序并输入任务 1 时，它只会打印两行（即 Enter Name.Enter Tel.No.）。它实际上应该打印“输入名称”。然后输入姓名，然后再次打印“输入电话号码”。我该如何解决这个问题？我必须在创建对象时动态使用参数化构造函数。

```
 #include <iostream>
    #include <conio.h>
    #include <fstream>
    #include <string>

using namespace std;

class myClass
{
     string  fullname,telephone;

public:
       myClass(int taskType = 2)
       {
          if(taskType==1)
          {
              add_record();                  
          }
          else if(taskType==2)
          {
              //view_records();
          }
          else if(taskType==3)
          {
              //delete_record();
          }else{
             // custom_error();
          }        
       }  
void add_record()
{
cout << "Enter Name.\n";
getline(cin, fullname);
cout << "Enter Tel. No.\n";
getline(cin, telephone);
}
   };

    main (){
          int myTask;
      cout << "Enter a Task-Type. \n"
           << "1 = Add Record,"
           << "2 = View Records,"
           << "3 = Delete a Record\n\n";
      cin >> myTask;
      myClass myObject(myTask);
           getch();
     } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T08:43:11.297

您正在使用`cin >> myTask`读取第一个输入。当您按回车键给出 1，选择“添加记录”时，将从缓冲区中读取 1，但您的换行符仍将在输入缓冲区中。因此，第一个`getline`只会从缓冲区中读取它，从而为该行产生一个空输入`getline(cin, fullname);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T08:42:38.307

原因是任务类型后面的第一个换行符没有被

```
cin >> myTask 
```

所以`fullname`读取只会读取一个空行，“enter Tel.No”会直接打印出来。

在 之后插入`getline`呼叫`cin >> myTask`以解决此问题。

另请参阅[此问题](https://stackoverflow.com/questions/6819082/stdgetline-on-stdcin)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T08:39:39.843

这可能与您的构造函数无关，而是与 cin >> 和 getline 的混合有关。在 cin >> myTask 之后将 getline 添加到垃圾变量中，它应该可以工作。

# hp-quality-center - HP ALM REST API 获取需求覆盖率

> ID：13679656
> 
> 赞同：0
> 
> 时间：2012-12-03T08:37:08.573
> 
> 标签：hp-quality-center

有没有办法从特定的获取需求覆盖矩阵`domain/project/requirements/id`？

正如我从 REST API 帮助中读到的那样，您只能获得覆盖项目的数量 [测试]，但不能获得 id 哦那些测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:06:58.233

您似乎只能从 ALM 11.50 访问覆盖范围，因此如果您有以下内容，您可能会不走运。请参阅 REST 需求覆盖服务。但即便如此，它现在也没有记录在案。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2018-08-02T11:36:06.013

使用查询获取详细信息

```
SELECT REQ.RQ_REQ_ID, REQ.RQ_REQ_NAME, REQ_TYPE.TPR_NAME, REQ_COVER.RC_ENTITY_TYPE,
       REQ_COVER.RC_ENTITY_ID, TEST.TS_NAME, TEST.TS_TYPE,
       RUN.RN_RUN_ID, RUN.RN_RUN_NAME, RUN.RN_STATUS,
       RUN.RN_TESTER_NAME, CYCLE.CY_CYCLE
FROM REQ Left join REQ_TYPE on REQ_TYPE.TPR_TYPE_ID = REQ.RQ_TYPE_ID
         Left join REQ_COVER on REQ_COVER.RC_REQ_ID = REQ.RQ_REQ_ID
         Left join TEST on TEST.TS_TEST_ID = REQ_COVER.RC_ENTITY_ID
         Left Join RUN on RUN.RN_TEST_ID = TEST.TS_TEST_ID
         Left Join CYCLE on CYCLE.CY_CYCLE_ID = RUN.RN_CYCLE_ID
where RC_ENTITY_TYPE = 'TEST'
order by REQ.RQ_REQ_ID; 
```

# cordova - 使用 goog.getMsg() 方法进行 Google Closure 本地化

> ID：13679659
> 
> 赞同：6
> 
> 时间：2012-12-03T08:37:39.807
> 
> 标签：cordova, localization, google-closure-library

嗨，有没有人尝试使用 google 关闭 goog.getMsg() 方法本地化他们的应用程序。问题是我无法获取如何加载包含翻译字符串的外部文件并在我们想要根据语言环境更改更改字符串的 js 文件中使用它们。我提到了 Closure：权威指南，但它只是提供了语法，但未能解释文件处理。

# java - 在 Android 应用程序中同时下载多个资源文件

> ID：13679662
> 
> 赞同：1
> 
> 时间：2012-12-03T08:37:52.167
> 
> 标签：java, android, multithreading, android-asynctask, download

在我的 Android 应用程序中，我需要同时从服务器下载多个文件并单独更新每个文件的进度，就像我们在浏览器或任何下载管理器中所做的那样。

所以我想知道是否有任何最好的方法可以遵循，比如我们可以遵循异步任务下载的单一资源。

如果有任何示例或示例代码或建议，请告诉我。

谢谢

# dicom - 是否有任何支持 IPV6 的查询检索 SCP 客户端？

> ID：13679663
> 
> 赞同：0
> 
> 时间：2012-12-03T08:37:53.953
> 
> 标签：dicom

我正在使用 DVTK 来满足我使用我的应用程序测试 DICOM 相关功能主义者的各种需求。不幸的是，Query Retrieve SCP 客户端不支持 IPV6 格式。还有其他实用程序允许使用 IPV6 查询数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:57:44.413

你可以试试 dcm4che2 (*2) 包中的 dcmqr (*1)。

我只在 IPv4 环境中使用过该工具。根据文档，该工具包的某些软件包确实支持 IPv6：

> 要使用 IPv6 地址指定端口，请在附加冒号和十进制端口号之前将 IPv6 地址括在方括号中

我没有在 Q/R 工具中找到有关支持 IPv6 的具体指示，因此，您必须在您的环境中对其进行测试。

(*1) [http://www.dcm4che.org/confluence/display/d2/dcmqr](http://www.dcm4che.org/confluence/display/d2/dcmqr)

(*2) [http://www.dcm4che.org/confluence/display/d2/dcm4che2+DICOM+Toolkit](http://www.dcm4che.org/confluence/display/d2/dcm4che2+DICOM+Toolkit)

# php - Android 和 Javascript：如何在 javascript 中知道应用程序是否安装在 Android 设备中？

> ID：13679664
> 
> 赞同：0
> 
> 时间：2012-12-03T08:37:55.097
> 
> 标签：php, javascript, android

我在 Google Play 上有一个 android 应用程序，还有一个网站。

目前，我正在使用 javascript 来检测连接到网站的设备是否是 android 设备。如果是，我会在设备上显示一个弹出对话框，邀请用户从 PlayStore 下载应用程序。如果用户单击确定，他将被重定向到我的应用程序的 PlayStore 页面，如果他单击否，他将继续使用浏览器。

现在，问题是当用户安装了应用程序并尝试再次访问网页时，即使他已经安装了应用程序，也会再次要求他下载应用程序（这不是一个好主意）。

您知道如何检查用户是否已经在其移动设备上安装了该应用程序的解决方案吗？

用php做android检测也是可以的，所以如果你有用php检测app是否安装的方法，我也可以用。

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:44:08.493

出于安全原因，我认为这是不可能的。我不希望我访问的某个随机网站能够访问我的手机包管理器并找出我安装了哪些应用程序。

这会引起很多隐私和安全问题。

但我看到一个答案可能有不同的方式来实现你的意图，这可能对你有用：

[https://stackoverflow.com/a/12901352/1369222](https://stackoverflow.com/a/12901352/1369222)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T08:56:11.427

即使用户没有安装您的应用程序，您的网站也不应该要求超过一两次从 PlayStore 下载您的应用程序。这样做的常用方法是使用浏览器的 cookie 来记住它是否是新访问者。这不是完全证据，因为 cookie 功能可能已被停用，但至少，您不必担心大多数访问者的这个问题。

# javascript - 按国家/地区排序 Facebook 高分

> ID：13679667
> 
> 赞同：0
> 
> 时间：2012-12-03T08:38:05.033
> 
> 标签：javascript, facebook, api

我正在开发一个 Facebook 游戏，其中使用 Scores API 保存分数，虽然这一切都很好，但我们的客户希望能够按国家/地区过滤高分，我想知道是否有一种简单的方法可以做到这一点。

返回分数时，用户对象只包含 ID 和名称，如果要获取每个用户的国家/地区，那将是非常愚蠢的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:42:29.003

更简单的方法是在应用程序安装时间上获取用户国家/地区。您可以通过将用户位置权限添加到用户首次访问您的应用程序时出现的身份验证对话框来执行此操作。

见`user_hometown`和`user_location`这里。

[https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)

然后，您可以轻松地从数据库中查看所有用户国家，并根据国家/地区进行排序。

# c++ - 如何使用 boost::spirit 解析 UTF-8？

> ID：13679669
> 
> 赞同：5
> 
> 时间：2012-12-03T08:38:08.013
> 
> 标签：c++, boost, unicode, utf-8, boost-spirit

```
#include <algorithm>
#include <iostream>
#include <string>
#include <vector>

#define BOOST_SPIRIT_UNICODE // We'll use unicode (UTF8) all throughout

#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/qi_parse.hpp>
#include <boost/spirit/include/support_standard_wide.hpp>

void parse_simple_string()
{
    namespace qi = boost::spirit::qi;    
    namespace encoding  = boost::spirit::unicode;
    //namespace stw = boost::spirit::standard_wide;

    typedef std::wstring::const_iterator iterator_type;

    std::vector<std::wstring> result;
    std::wstring const input = LR"(12,3","ab,cd","G,G\"GG","kkk","10,\"0","99987","PPP","你好)";

    qi::rule<iterator_type, std::wstring()> key = +(qi::unicode::char_ - qi::lit(L"\",\""));
    qi::phrase_parse(input.begin(), input.end(),
                     key % qi::lit(L"\",\""),
                     encoding::space,
                     result);

    //std::copy(result.rbegin(), result.rend(), std::ostream_iterator<std::wstring, wchar_t>  (std::wcout, L"\n"));
    for(auto const &data : result) std::wcout<<data<<std::endl;
} 
```

我研究了这篇文章[How to use Boost Spirit to parse Chinese(unicode utf-16)?](https://stackoverflow.com/questions/9852558/how-to-use-boost-spirit-to-parse-chineseunicode-utf-16) 并按照指南进行操作，但无法解析“你好”这个词

预期的结果应该是

12,3 ab,cd G,G\"GG kkk 10,\"0 99987 PPP 你好

但实际结果是 12,3 ab,cd G,G\"GG kkk 10,\"0 99987 PPP

无法解析中文单词“你好”

操作系统是win7 64bits，我的编辑器将文字保存为UTF-8

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T19:53:32.030

如果您在输入时使用 UTF-8，那么您可以尝试使用[Boost.Regex 中的](http://www.boost.org/doc/libs/1_53_0/libs/regex/doc/html/index.html)[Unicode 迭代](http://www.boost.org/doc/libs/1_53_0/libs/regex/doc/html/boost_regex/ref/internal_details/uni_iter.html)器。

例如，使用 boost::u8_to_u32_iterator：

> 一个双向迭代器适配器，它使底层的 UTF8 字符序列看起来像一个（只读）UTF32 字符序列。

[现场演示](http://coliru.stacked-crooked.com/a/88aa7abaa0736618)

```
#include <boost/regex/pending/unicode_iterator.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/range.hpp>
#include <iterator>
#include <iostream>
#include <ostream>
#include <cstdint>
#include <vector>

int main()
{
    using namespace boost;
    using namespace spirit::qi;
    using namespace std;

    auto &&utf8_text=u8"你好，世界！";
    u8_to_u32_iterator<const char*>
        tbegin(begin(utf8_text)), tend(end(utf8_text));

    vector<uint32_t> result;
    parse(tbegin, tend, *standard_wide::char_, result);
    for(auto &&code_point : result)
        cout << "&#" << code_point << ";";
    cout << endl;
} 
```

输出是：

```
&#20320;&#22909;&#65292;&#19990;&#30028;&#65281;&#0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-24T13:10:42.813

虽然 Evgeny Panasyuk 的答案是正确的，但`u8_to_u32_iterator`如果输入字符串不是 NUL 终止的，由于缓冲区溢出错误，使用可能不安全。考虑如下示例：

文件 foobar.cpp

```
#include "boost/regex/pending/unicode_iterator.hpp"
#include <iostream>

int main() {
    const char contents[] = {'H', 'e', 'l', 'l', 'o', '\xF1'};

    using utf8_iter = boost::u8_to_u32_iterator<const char *>;
    auto iter = utf8_iter{contents};
    auto end = utf8_iter{contents + sizeof(contents)};

    for (; iter != end; ++iter)
        std::cout << *iter << '\n';
} 
```

当使用命令编译 `clang++ -g -fsanitize=address -std=c++17 -I path/to/boost/ -o foobar foobar.cpp`然后运行时，clang address sanitizer 将显示`stack-buffer-overflow`错误。发生错误是因为缓冲区中的最后一个字符是 4 字节 UTF-8 序列的前导字节 => 迭代器在它之后继续读取字节 ==> 缓冲区溢出。

如果最后一个字节是 NUL `const char contents[] = "Hello\xF1";`，迭代器将在读取 NUL 字符时检测到编码错误并中止下一次读取 ==> 我们将有未捕获的异常而不是未定义的行为。

简而言之，使用前请确保输入为 NUL 终止，`boost::u8_to_u32_iterator`否则您可能会遇到 UB。

# magento - 在 Magento 1.7.0.2 价格之后添加文本

> ID：13679672
> 
> 赞同：0
> 
> 时间：2012-12-03T08:38:12.527
> 
> 标签：magento

我刚刚使用 magento 1.7.0.2 启动了一个在线服装网站。我想在产品和目录页面的价格后添加“免费送货”或图片。我已经尝试过之前文章中给出的建议，但没有任何运气。我正在使用 8theme 的 Mercado 主题，但使用模板路径提示价格似乎是由`frontend/base/default/template/catalog/product/price.phtml`我理解的核心 magento 文件生成的。

尽管如此，Mercado 主题目录中有一个简短的 price.phtml。此文件仅包含行`<?php echo $this->getPriceHtml($_product, false, '_clone') ?>`. 我在下面添加了一个 echo 命令，但这没有效果（即使在缓存刷新之后）。我已按照 magento 论坛上关于添加此文件的建议，但这对前端也没有影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T23:18:44.000

您可以将文件复制`frontend/base/default/template/catalog/product/price.phtml`到 Mercado 主题的文件夹中，然后在那里进行编辑。我不知道您正在使用的主题的确切路径是什么，但该文件最终应该位于`frontend/package/theme/template/catalog/product/price.phtml`.

顺便说一句，我前几天发现[了这个网站](http://blog.belvg.com/how-to-start-with-magento.html)。它有很多有用的资源。其中之一是[Magento 设计指南](http://info.magento.com/rs/magentocommerce/images/MagentoDesignGuide.pdf)——它很好地解释了 Magento 的主题后备模型等。

# antlr - 词法分析器意外标记

> ID：13679674
> 
> 赞同：4
> 
> 时间：2012-12-03T08:38:15.783
> 
> 标签：antlr, antlr3, lexer

以下极其简单的示例语法并不像我预期的那样（完全）。

```
Declaration :   'VAR';
Letter: ('A'..'Z');

message :   Declaration Letter+; 
```

结果我所期望的是，任何字母序列都将作为单个字母进行词法分析，而“VAR”序列将作为单个标记进行词法分析。

当我查看 ANTLRWorks interperter 时，我看到以下结果：

*   `VARA`解析为`message -> "VAR", "A"`（预期的）
*   `VARVA`不解析 (MismatchedTokenException(-1 != 5)。词法分析器命中第二个`VA`并尝试标记化`Declaration`。预期：`message -> "VAR", "V", "A"`
*   `VARVPP`解析为`message -> "VAR", "V", "P", "P"`（预期的）
*   `VARVALL`解析为`message -> "VAR", "VALL"`.

我需要一些帮助来理解这种行为，以及如何解决这个问题的建议。

具体来说：

*   为什么词法分析器尝试将所有以`VA`声明开头的字符串标记化，如果它后面跟着一个字母？
*   为什么词法分析器不尝试对所有以 a 开头的字符串执行此操作`V`？
*   如果那里有额外的字符，为什么词法分析器不尝试这样做？
*   我应该如何更改此语法以解析我期望的方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T12:42:15.700

让我们来看看你所有的 4 个例子：

## 1个“VARA”

![enter image description here](../Images/78d480ef5ad4b2d51d7fb94fbc627e5d.png)

一切都好。

## 2“瓦尔瓦”

`"VAR"` is (obviously) tokenized as `VAR`, but then the lexer "sees" `"VA"` and expects an `"R"`, which is not there. It emits the following errors:

```
line 1:5 mismatched character '<EOF>' expecting 'R'
line 1:5 required (...)+ loop did not match anything at input '<EOF>' 
```

and discards the `"VA"` resulting in a single token to be created, as you can see when running ANTLRWorks' debugger (ignore the exceptions in the parse, they're not actually there :)):

![enter image description here](../Images/e1786e807a7ecbddeb6bf07f3baff26a.png)

The thing you must realize is that the lexer will *never* give up on something it has already matched. So if the lexer *sees* `"VA"` and cannot match an `"R"` after it, it will then look at the other lexer rules that can match `"VA"`. But `Letter` does not match that (it only matches single letters!) If you change `Letter` to match more than a single character, ANTLR would be able to fall back on that rule. But not when it matches a single letter: the lexer will not give up the `"A"` from `"VA"` to let the `Letter` rule match. No way around it: this is how ANTLR's lexer works.

This is usually not an issue because there is often some sort of `IDENTIFIER` rule that the lexer can fall back on when a keyword cannot be matched.

## 3 "VARVPP"

![enter image description here](../Images/02f9f1f98552f3be83d808c0bcacf0b6.png)

All okay: `"VAR"` becomes a `VAR` and then the lexer tries to match an `"A"` after the `"V"` but this does not happen, so the lexer falls back on the `Letter` rule for the single `"V"`. After that `"PP"` are both tokenized as `Letter`s.

## 4 "VARVALL"

`"VAR"` again becomes a `VAR`. Then the `"L"` in `"VAL"` causes the lexer to produce the following error message:

```
line 1:5 mismatched character 'L' expecting 'R' 
```

and then the last `"L"` becomes a `Letter`:

![enter image description here](../Images/11d96f51794010bd1e62884271adaad5.png)

* * *

I guess (or hope) the first 3 question are now answered, which leaves your final answer:

> How should I change this grammar to parse the way I expected?

By forcing the lexer to first look ahead in the character stream if there really is `"VAR"` ahead, and if there's not, just match a single `"V"` and change the type of the matched token to `Letter`, like this:

```
Declaration
 : ('VAR')=> 'VAR'
 |           'V'   {$type=Letter;}
 ; 
```

As mentioned before my answer, see this related Q&A: [ANTLR lexer can't lookahead at all](https://stackoverflow.com/questions/12190501/antlr-lexer-cant-lookahead-at-all)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T12:14:14.087

词法分析器并没有真正执行前瞻，只有解析器执行；您可以在[ANTLR lexer can't lookahead at all](https://stackoverflow.com/questions/12190501/antlr-lexer-cant-lookahead-at-all)中阅读更多相关信息。所以这里的问题是，一旦词法分析器无法匹配`VAR`，它就会尝试匹配它到目前为止得到的东西`VA`——并且没有匹配的标记，因为 Letter 不能匹配两个字符，只能匹配一个。

至于解决方案，一个简单的方法是将其更改为单个令牌：

```
Message :   'VAR' ('A'..'Z')+;
message :   Message; 
```

不过，它不会为每个字母提供不同的标记。

# iphone - iOS - LocalizedStringForKey:value:table: 返回错误的本地化

> ID：13679679
> 
> 赞同：1
> 
> 时间：2012-12-03T08:38:45.567
> 
> 标签：iphone, ios, xcode, localization, localizable.strings

我正在使用以下代码返回本地化字符串：

```
[self.languageBundle localizedStringForKey:key value:key table:nil]; 
```

如果是英语，则没有问题。但是，对于荷兰语，它默认为英语。为了清楚起见，self.languageBundle 是一个在第一次启动时复制的空包。然后创建两个本地化目录（en.lproj 和 nl.lproj），并在两个目录中创建 Localizable.strings 文件并填充正确的本地化字符串（我检查了它们）。

我使用以下方法更改语言：

```
[[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithObject:@"nl"]
                                                  forKey:@"AppleLanguages"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

但是，它仍然在 en.lproj 而不是 nl.lproj 中加载本地化

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:13:02.863

如果您在项目中添加了您的本地化.string 文件，则删除在项目中自动创建的所有其他本地化文件。试试这个[链接](https://stackoverflow.com/questions/8712049/manually-loading-a-different-localized-nib-in-ios)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:32:16.307

看起来您正试图在运行时更改语言，而 Apple 并未正式支持这一点。更改“AppleLanguages”的密钥只有在您关闭并重新启动应用程序后才会生效。

但是，可以在运行时更改应用程序的本地化，请参阅[此问题的答案](https://stackoverflow.com/questions/12192151/change-app-language-in-ios-without-restarting-the-app)。

在[激进的平庸解决方案中](http://aggressive-mediocrity.blogspot.nl/2010/03/custom-localization-system-for-your.html)，您保留自己的语言代码变量，并创建自定义 LocalizedString 函数（在示例源“AMLocalizedString”中）而不是使用 NSLocalizableString。这是一个很好的解决方案，我在我的一个项目中使用了它，并且该应用程序得到了 Apple 的批准，没有任何问题。

此外，通过这种方式，您可以像往常一样使用默认的 Localizable.strings 文件，因此无需在首次启动应用程序时创建目录和复制 Localizable.strings。

# objective-c - 在应用程序之间共享信息

> ID：13679682
> 
> 赞同：0
> 
> 时间：2012-12-03T08:38:57.297
> 
> 标签：objective-c, ios, url-scheme

我需要在几个应用程序之间共享信息。

例如有 2 个应用程序 A 和 B。

我（作为用户）打开了名为 A 的应用程序。当应用程序午餐时，我想从应用程序 B 获取一些信息。

我知道通过**url 方案**可以做到这一点。

例如，使用 facebook 登录即可。其他应用程序午餐 Facebook 应用程序以获取登录信息。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:46:20.847

好吧，您不能真正直接从应用程序获取数据，但是您可以使用 URL 方案启动另一个应用程序并请求数据。

但是您必须要么构建两个应用程序，要么必须有一个广泛的 API 可用于另一个应用程序。然后另一个应用程序必须使用应用程序 URL 方案再次启动您的应用程序，并通过 URL 发送数据请求。但是您可以通过这种方式传输的数据是有限的。

关于使用 App URL Scheme 的一个很好的教程可以在这里找到：http: [//mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html](http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)

另一种选择是将要在应用程序之间共享的数据存储在钥匙串中。多个应用程序可以共享一个钥匙串项目，只要它们在同一个捆绑种子 ID 内。

# javascript - 幻灯片 jq 中未显示输入的 PlaceHolder

> ID：13679691
> 
> 赞同：1
> 
> 时间：2012-12-03T08:39:28.857
> 
> 标签：javascript, jquery, html, slidedown

我有一个按钮：

```
<a  data-role="button" data-transition="none"
data-theme="b" onclick="ShowInput();" data-icon="forward" data-iconpos="left">
</a> 
```

通过点击按钮，输入向下滑动：

```
function ShowInput() {
    $('#IdIn').slideDown("slow");
} 
```

我的输入：

```
<input placeholder="xxx" name="NameIn" id="IdIn" value="" type="text"> 
```

向下滑动有效，但看不到输入的占位符“xxx”

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:58:13.963

这里的问题是，如果输入元素不足以容纳占位符，则占位符会消失。如果您稍后应该更改高度，它不会再次出现，这就是您使用`slideDown()`.

我不确定这是否是特定于 chrome 的错误，或者是否是预期的行为。但是，如果在动画完成时通过删除样式属性来重绘元素，它似乎可以工作：http: [//jsfiddle.net/QYp9Y/](http://jsfiddle.net/QYp9Y/)

```
$('#IdIn').slideDown("slow", function() {
    $(this).removeAttr('style').show();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:04:59.993

定义一个容器来保存输入元素，然后显示/隐藏容器而不是输入。

```
<div id="IdContainer">
<input placeholder="xxx" name="NameIn" id="IdIn" value="" type="text">
</div> 
```

然后在javascript中，

```
function ShowInput() {
    $('#IdContainer').slideDown("slow");
} 
```

# asp.net - 将 gridview 数据导出到 Excel 作为最终用户的可下载链接

> ID：13679699
> 
> 赞同：0
> 
> 时间：2012-12-03T08:39:57.080
> 
> 标签：asp.net, html, excel, gridview

我正在使用此代码作为从本地机器中的 gridview 导出到 excel .....

```
 void btn_excelClick()
{
 Response.ClearContent();
    Response.Buffer = true;

    Response.AddHeader("content-disposition", string.Format("attachment; filename={0}", "c.xls"));
    Response.ContentType = "application/vnd.ms-excel";
    Response.Charset = "";

    StringWriter sw = new StringWriter();
    HtmlTextWriter htw = new HtmlTextWriter(sw);

    GridView2.RenderControl(htw);
    Response.Write(sw.ToString());
    Response.End();
} 
```

我的问题是：我应该如何修改我的代码，以便在最终用户单击文件时在服务器端下载文件，并且应该弹出源文件的下载链接。

PS：我的 Comp 目前是我的服务器...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:02:54.937

您将需要执行以下操作：

1.) 要让某个人从 Web 上的服务器下载文件，您需要一个在 IIS 上共享给所有人的文件夹。

2.) 只需将响应写入共享文件夹中的文件即可。

3.) 现在你需要一个动作来下载文件。为此，只需在网页上放置一个超链接并将 href 属性设置为文件的 Web 位置。每当任何用户单击链接时，文件都会下载到该人的机器上。

PS WebURL 表示您网站的 URL，后跟文件夹位置。例如：www.example.com/Folder1/Folder2/File1.xls

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:53:45.403

与其将输出写入响应，不如将其写入文件。

确保写入文件的路径位于可通过 IIS 访问的目录中。

```
GridView2.RenderControl(htw);
var path = Server.MapPath("~/PublicFiles/FileName");
File.WriteAllText(path, sw.ToString()); 
```

现在您可以在响应中写入文件的链接，并设置这个新创建文件的路径。

# tsql - 只选择日期的最后一个值？

> ID：13679701
> 
> 赞同：0
> 
> 时间：2012-12-03T08:40:26.733
> 
> 标签：tsql, sql-server-2012

我有一个 SELECT，它返回与此结果类似的内容（我已对其进行了简化，因为原始 SELECT 相当复杂）：

```
| UserFK    | aDate             | aValue    |
---------------------------------------------
| 1000      | 03.12.2012 10:00  | 123       |
| 1000      | 03.12.2012 11:00  | 456       | <--
| 1001      | 03.12.2012 09:00  | 111       | <--
| 1002      | 03.12.2012 09:00  | 222       |
| 1002      | 03.12.2012 10:00  | 333       | <--
| 1003      | 03.12.2012 09:00  | 123       | 
| 1003      | 02.12.2012 09:00  | 123       |
| 1003      | 03.12.2012 10:00  | 455       | <--
| 1004      | 03.12.2012 11:00  | 123       | <-- 
```

现在我不想要任何重复的 UserFK，我只想要最后一个（按 aDate 的）UserFK 及其价值。我已经标记了我真正想要的那些。

有没有简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:43:36.400

您可以像这样使用`CTE`a [`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)：

```
WITH CTE AS
(
   SELECT UserFK, aDate, aValue,
     RN = ROW_NUMBER() OVER (PARTITION BY UserFK ORDER BY aDate DESC)
   FROM dbo.TableName
)
SELECT UserFK, aDate, aValue
FROM CTE
WHERE RN = 1 
```

# iphone - 不是 PNG filCommand copypng 发出错误但未返回非零退出代码以指示失败

> ID：13679710
> 
> 赞同：23
> 
> 时间：2012-12-03T08:40:58.157
> 
> 标签：iphone, ios, ipad, ios6, default.png

在 iPad 上添加运行项目的图像时出现以下错误。它在所有图像的模拟器上运行良好，但在 iPad 上运行但不显示图像。

```
CopyPNGFile /Users/user/Library/Developer/Xcode/DerivedData/RImageGallery-cmwaittvclhwgxfpcoarddipyliv/Build/Products/Debug-iphoneos/RImageGallery.app/Default.png PhotoBrowserDemo/Default.png
    cd /Users/user/Desktop/Demo
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/copypng -compress "" /Users/user/Desktop/Demo/PhotoBrowserDemo/Default.png /Users/user/Library/Developer/Xcode/DerivedData/RImageGallery-cmwaittvclhwgxfpcoarddipyliv/Build/Products/Debug-iphoneos/RImageGallery.app/Default.png

   Not a PNG filCommand /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/copypng emitted errors but did not return a nonzero exit code to indicate failure

(null): While reading /Users/user/Desktop/Demo/PhotoBrowserDemo/Default.png pngcrush caught libpng error:

(null): Could not find file: /Users/user/Library/Developer/Xcode/DerivedData/RImageGallery-cmwaittvclhwgxfpcoarddipyliv/Build/Products/Debug-iphoneos/RImageGallery.app/Default.png

Command /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/copypng emitted errors but did not return a nonzero exit code to indicate failure 
```

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2013-02-16T05:55:47.490

**我的答案：**

**我有这个问题。**为同一图像添加了两个目标。*转到项目目标 -> 构建阶段 -> 复制捆绑资源并搜索您的图像文件名*。

**很可能有两个条目。删除一个。**

通过这样做，我解决了我的问题。这对我有用:) :)

**很高兴能帮助你 ：） ：）**

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-12-03T08:48:50.337

**案例一：格式差异**

当我使用预览将图像从 jpg 更改为 png 时，它起作用了。以前由于 .png 作为名称而不是格式，它可能无法正常工作。这个[链接](http://www.ifans.com/forums/threads/xcode-4-5-1-png-program-errors-progress-not-showing-on-ipad.386395/)有帮助。

还可以在单​​步使用终端中将多个图像转换为文件夹中的 png。使用 cd 转到包含图像（JPG 或任何类型）的文件夹。运行代码：

```
mkdir pngs; sips -s format png *.* --out pngs 
```

它会将您的图像转换为 .png 并创建一个包含转换后的图像的 pngs 文件夹。

**案例2：两张同名图片或一张图片添加两次：**

正如 Rajneesh071 和 Himanshu 建议的那样：可以有两个或多个具有相同名称的图像，或者为同一个图像添加两个目标。转到项目目标 -> 构建阶段 -> 复制捆绑资源并搜索您的图像文件名。并删除重复的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T18:51:50.920

我希望让@Rajneesh071 的评论有更多的知名度。就我而言，我的项目中有多个 Default.png 文件。当我第一次创建我的项目时，Xcode 将 Default.png（和其他闪屏 png 文件）放在我的项目中。在创建自己的启动画面并通过 Xcode 将它们添加到项目后，我开始收到奇怪的 png 粉碎错误。在尝试了许多不同的答案后，我发现 Rajneesh071 的评论指出存在多个 Default.png。对 Default 进行了快速过滤，果然，Xcode 提供了与我自己一起列出的默认文件。删除了 Xcode 提供的 Default*.png 文件，不再出现 pngcrush 错误。

如果您觉得这很有用，请支持 Rajeneesh071 对原始问题的评论。

# scala - 如何过滤akka中的结果？

> ID：13679711
> 
> 赞同：0
> 
> 时间：2012-12-03T08:40:58.623
> 
> 标签：scala, filter, akka

我有一个包含这个 Int 列表的 Future: `List(40, 42, 41)`。我尝试使用我通常使用的过滤器功能对其进行过滤：`f.filter(_ == 42)`. f 是包含列表的未来。我是从另一个演员那里得到的。在执行时，我得到了这个 MatchError：

```
[ERROR] [12/03/2012 09:37:34.252] [playground-akka.actor.default-dispatcher-1] [akka://playground/user/sender] List(40, 42, 41) (of class scala.collection.immutable.$colon$colon)
scala.MatchError: List(40, 42, 41) (of class scala.collection.immutable.$colon$colon) 
```

我不明白这个错误，也无法修复它。任何人都可以帮助我吗？

**编辑**

这是一段代码：

```
case class Send(target: ActorRef, msg: String)

class SendingActor extends Actor with ActorLogging {

  implicit val timeout = Timeout(1 second)

  def receive = {
    case Send(target, msg) =>
      log.info("will send %s".format(msg))
      val f = target ? msg
      log.info("awaited " + Await.result(f.filter(_ == 42), timeout.duration).asInstanceOf[List[Int]])
  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:14:20.170

您正在尝试通过在整数列表的未来调用过滤器来过滤整数列表。您需要先“解压”列表。

```
Await.result(f map { list => list filter { _ == 42 } }) 
```

# git - 从 git 获取最后提交的代码

> ID：13679714
> 
> 赞同：1
> 
> 时间：2012-12-03T08:41:05.987
> 
> 标签：git, commit, reset, pull

我`commit`编写了一些代码并将`push`其编辑到我的`github`帐户。然后，我修改了我机器上的代码。我没有`add it to the index`或它没有。`commit`现在我想删除所有这些修改，并使我机器上的代码与我之前提交的代码相同。 .我对各种命令（例如`pull,reset head`等）有些困惑。（我的 github 帐户只包含我的代码..没有其他人推送它）

有人可以建议我在这里做什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:42:19.400

丢弃未提交工作的最简单方法是：

```
git reset --hard HEAD 
```

# applescript - Applescript 退出 Mac 上所有活动的浏览器？

> ID：13679716
> 
> 赞同：0
> 
> 时间：2012-12-03T08:41:13.230
> 
> 标签：applescript

我正在尝试使用以下代码退出所有活动浏览器，但无法获取要退出的所有活动浏览器的列表，我尝试了以下代码...请建议..

```
tell application "System Events"

    set appList to every process whose visible is true

    repeat with thisApp in appList
        tell process browser
            quit
        end tell
    end repeat
end tell 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:47:55.443

您不能退出“进程”，只能退出“应用程序”。此外，您必须完成所有可能的浏览器名称的 browserList。

```
set browserList to {"Safari", "Firefox"}

tell application "System Events"
    set appList to name of every process whose visible is true
end tell

repeat with i from 1 to count of appList
    set thisApp to item i of appList
    if thisApp is in browserList then
        tell application thisApp to quit
    end if
end repeat 
```

# algorithm - 找到两个点集之间的点对应关系，最小化所有匹配的距离之和

> ID：13679717
> 
> 赞同：6
> 
> 时间：2012-12-03T08:41:14.583
> 
> 标签：algorithm, geometry

我的问题是，给定两个点集 A 和 B，A 的元素大小不超过 B 的元素大小，是否有任何有效的方法可以为 A 中的每个点找到 B 中的对应点，使得所有点的距离总和比赛很少？B 中的每个点只能使用一次。非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T08:45:10.293

是的，用于加权二分匹配的[匈牙利算法。](http://en.wikipedia.org/wiki/Hungarian_algorithm)

对于 A 的元素和 B 的元素之间的每条边，让该边的权重为它们之间的距离。然后，运行匈牙利算法最小化权重的总和。

总运行时间为 O(|A|^3)。

# ios6 - MPMoviePlayer 完成按钮动作不起作用

> ID：13679722
> 
> 赞同：0
> 
> 时间：2012-12-03T08:41:51.413
> 
> 标签：ios6, mpmovieplayercontroller

我有一个视频列表，我想在用户单击列表项时全屏显示视频播放器，所以我在 didSelectRowAtIndexPath 方法中添加了代码：

```
 [[[UIApplication sharedApplication].delegate window] addSubview:vc.view]; 
```

在视频控制器中，我在视图 didload 中添加 NSNotificationCenter 代码并添加操作代码

```
 [[NSNotificationCenter defaultCenter] addObserver:moviePlayer
    selector:@selector(doneButtonClick:) name:MPMoviePlayerDidExitFullscreenNotification
    object:nil];

-(void)doneButtonClick:(NSNotification *)Notification{
    NSLog(@"...............doneButtonClick....... \n ");

    [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerDidExitFullscreenNotification object:nil];

    [moviePlayer stop];
    [self.view removeFromSuperview];
} 
```

当我点击完成按钮时，它不能工作，但如果我改变

```
 [[[UIApplication sharedApplication].delegate window] addSubview:vc.view]; 
```

至

```
 [[[UIApplication sharedApplication].delegate window] setRootViewController:vc]; 
```

完成按钮可以正常工作，谁能告诉我在全屏窗口中添加MPMovieController的原因和正确方法，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T02:49:50.827

I do it myself and it works well for me

```
[self presentModalViewController:movieController animated:YES];
    // Listen for interesting movie player notifications
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(movieFinishedPlayback:) name:MPMoviePlayerPlaybackDidFinishNotification object:nil]; 
```

# android - 禁用 Force GPU 渲染编程

> ID：13679727
> 
> 赞同：0
> 
> 时间：2012-12-03T08:42:06.623
> 
> 标签：android, android-layout, gpu

我想在我的 android 程序中禁用 Force GPU 渲染。现在我必须在设备上进行设置并禁用它，但这对我的用户来说很难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:43:05.027

我不认为你可以通过添加来关闭它

```
android:hardwareAccelerated="false" 
```

如果将代码跟踪到 Window.setWindowManager() 中，可以看到以下内容

```
public void setWindowManager(...) {
...
mHardwareAccelerated = hardwareAccelerated
                || SystemProperties.getBoolean(PROPERTY_HARDWARE_UI, false); 
...
} 
```

在哪里，

hardwareAccelerated：来自android:hardwareAccelerated

PROPERTY_HARDWARE_UI 属性由“强制 GPU 渲染”选项设置。

您可以看到，如果用户手动选中“强制 GPU 渲染”选项，无论 android:hardwareAccelerated 是什么，都会为 mHardwareAccelerated 变量分配 TRUE 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:48:05.773

从 Android 3.0（API 级别 11）开始，我想你可以设置

```
android:hardwareAccelerated="false" 
```

在清单文件中。这将为您的应用程序禁用强制 gpu 渲染。欢迎阅读[文档](http://developer.android.com/guide/topics/graphics/hardware-accel.html)..

# jboss7.x - 如何避免应用程序特定的配置，如 mysql/jms queue/log4j 从 jboss 中的standalone.xml 文件作为 7.1？

> ID：13679734
> 
> 赞同：0
> 
> 时间：2012-12-03T08:42:37.380
> 
> 标签：jboss7.x

我有一个在 Jboss-5.1 中运行的应用程序，在这里我有不同的 xml 文件来配置我的服务器、mysql 数据源、log4j、jms 队列等。但是在 Jboss 为 7.1 的情况下，我必须将我的所有配置都放在一个文件中，standalone.xml 。我怎样才能避免使用standalone.xml 文件尽可能少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T18:46:57.993

如果要使用持久性，请在项目中放置一个 persistence.xml 文件：

```
<persistence-unit name="postgresql-connetion" transaction-type="JTA">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <jta-data-source>java:jboss/datasources/PostgreSQLDS</jta-data-source>
        <properties>
            <property name="eclipselink.target-database" value="postgresql"/>
            <property name="eclipselink.target-server" value="JBoss"/>
            <property name="eclipselink.ddl-generation" value="create-tables"/>
            <property name="eclipselink.ddl-generation.output-mode" value="database"/>
        </properties>
    </persistence-unit> 
```

和 orm.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<entity-mappings version="2.0" xmlns="http://java.sun.com/xml/ns/persistence/orm" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm http://java.sun.com/xml/ns/persistence/orm_2_0.xsd">

    <description>Mapping persistence entity</description>
    <package>com.entity</package>

</entity-mappings> 
```

在 jboss-home/modules 添加 eclipselink 模块 (org.eclipse.persistence) 添加一个 postgresql 模块，你必须在standalone.xml 上添加 java:jboss/datasources/PostgreSQLDS 数据源和 postgresql 驱动程序，我知道没有其他方法可以避免它，可能启动多个 Jboss 实例或集群：[http ://middlewaremagic.com/jboss/?p=1952](http://middlewaremagic.com/jboss/?p=1952)

# oracle - 用于 oracle 11g 的 PL/SQL 中的嵌入式脚本

> ID：13679740
> 
> 赞同：0
> 
> 时间：2012-12-03T08:42:53.310
> 
> 标签：oracle, shell, scripting, plsql

> **可能重复：**
> [如何通过 Pl/sql 发送电子邮件](https://stackoverflow.com/questions/4244117/how-send-email-by-pl-sql)

我想使用 oracle 11g 从数据库中的 pl/sql 中发送电子邮件，这是一种嵌入式脚本。请帮忙。我对 oracle 不太熟悉，但我有提供此功能的截止日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:48:38.050

您可以使用[`UTL_MAIL`包](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/u_mail.htm)或[`UTL_SMTP`包](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/u_smtp.htm)从 PL/SQL 发送电子邮件。根据您的 SMTP 服务器需要什么、您需要发送什么样的附件等，有几十种实现浮动。一个很好的起点是[`send_mail`AskTom 的过程](http://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:255615160805)。

如果您使用的是 APEX，您也可以使用[`APEX_MAIL`package](http://docs.oracle.com/cd/E10513_01/doc/apirefs.310/e12855/apex_mail.htm)。

# matlab - Matlab 矩阵上的空 `()` 有什么作用？

> ID：13679749
> 
> 赞同：16
> 
> 时间：2012-12-03T08:43:20.633
> 
> 标签：matlab, matrix

在`Matlab`中，表达式`M()`到底在哪里做`M`矩阵？

```
>> M = magic(3);
>> M() 

ans =

     8     1     6
     3     5     7
     4     9     2 
```

这个表达式`isequaln(M, M())`在所有情况下都是真的吗？仅仅是`M()`的副本`M`，还是相同的表达式，或者是否存在任何上下文，其中提到的`M()`意思不是指的`M`？也许在运算符重载的情况下？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-03T10:38:49.793

除了它会在某些函数上提供默认操作，例如`rand()`, 和复活节彩蛋，例如`imagesc()`and `spy()`（这也可以在没有 的情况下工作`()`），它似乎是访问整个数组的一种更有效的方式，只要它们的维数是低于 5 （正如@Rody Oldenhuis 发现的那样）。例如：

```
a=rand(2^12);

tic
for j=1:1e5
a ;
end
toc

tic
for j=1:1e5
a(:)  ;
end
toc

tic
for j=1:1e5
a()   ; 
end
toc 
```

屈服：

```
Elapsed time is 0.047250 seconds.
Elapsed time is 0.022260 seconds.
Elapsed time is 0.011925 seconds. 
```

`a1=a`但是，对于作业， vs之间几乎没有区别`a1=a()`，后者慢了 1.5%...

也许这个线程会回答你关于[操作符重载](http://www.mathworks.com/matlabcentral/newsreader/view_thread/108888)的一些问题。

# entity-framework - EF 6（代码优先）是否能够使用与当前数据库用户关联的默认架构？

> ID：13679751
> 
> 赞同：2
> 
> 时间：2012-12-03T08:43:27.283
> 
> 标签：entity-framework, entity-framework-6

很高兴知道 EF 6 支持 HasDefaultSchema 方法，因此我可以设置 EF 可以使用的架构。但是，我想知道是否可以让 EF 在生成 SQL 语句时消除架构前缀（例如，生成 "select * from TableA" 而不是 "select * from dbo.TableA" ），以便数据库引擎将使用默认架构关联到当前数据库用户。

我有几个数据库用户，他们每个人都有一个独特的模式分别设置为他们的默认模式。我想我可以分别使用他们特定的用户名、密码和相同的 SQL 语句“SELECT * FROM TableA”来获取每个用户的正确数据。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T19:05:49.787

尝试这个

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    base.OnModelCreating(modelBuilder);
    modelBuilder.HasDefaultSchema("");
} 
```

# php - 包含 clogin 的 Bash 脚本在通过 php 执行时不起作用

> ID：13679755
> 
> 赞同：2
> 
> 时间：2012-12-03T08:43:41.483
> 
> 标签：php, bash

我创建了一个简单的 PHP 站点，我们想用它来禁用/启用 cisco 交换机上的端口。我通过 php 函数 exec() 将两个参数（端口和操作）传递给 bash 脚本。为了调试，我在 bash 脚本的最后设置了这些参数。

我调用的 php 函数的重要部分如下所示：

```
function PortAction($port, $action){
    echo "<hr /> Port:".$port."<br />Action:".$action;
    chdir('/usr/local/icinga-1.7.0/videowand/');
    echo exec('sh /usr/local/icinga-1.7.0/videowand/action2.sh 2>&1',$output, $return);
    echo "Return / Output: ".$return;
    print_r($output);    
} 
```

bash 脚本“action2.sh”：

```
#!/bin/bash
/usr/libexec/rancid/clogin -c "conf t; int Fa0/1; shutdown" 192.168.6.6 
```

如果我以 apache 用户身份手动执行 bash 脚本（甚至直接执行 clogin 命令），一切都会按预期工作，端口会被禁用。但是一旦我通过 PHP 函数调用它，我就会得到输出：

> 数组（[0] => 没有这样的变量 [1] =>（读取“env（HOME）”上的跟踪）[2] => 从 [3] 内部调用 =>“设置密码文件 $env(HOME)/.cloginrc " [4] => (文件 "/usr/libexec/rancid/clogin" 第 66 行)

什么都做不成。这表明密码输入有问题（据我所知）。这个文件的权限是正确的，我猜他们必须这样做，否则它不能直接在 shell 内工作。甚至尝试使用 -f 开关更改 .cloginrc 路径，但没有成功。PHP 安全模式：关闭显示错误：打开

该脚本需要一段时间，因为需要打开 telnet 连接。这就是为什么我把它放到一个单独的 bash 脚本中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:45:28.303

提供`sh`二进制文件的完整路径，如下所示：

```
echo exec('/bin/sh /usr/local/icinga-1.7.0/videowand/action2.sh 2>&1',$output, $return); 
```

我在`/bin/sh`上面假设，因为这通常是 sh 的标准路径，但请确保使用
`which sh`命令。

`/bin/sh``/bin/bash`是您`exec()`的`/bin/bash`shell的软链接，通常是`/bin/sh`

# c++ - Windows XP (32bit, SP3) 播放声音时随机应用程序暂停半秒

> ID：13679765
> 
> 赞同：4
> 
> 时间：2012-12-03T08:44:53.063
> 
> 标签：c++, windows-xp, multicore

我注意到，当 Windows 在（至少我的）多核机器上（不是在虚拟机中）播放声音时，不同程序的执行有时会延迟半秒。我测试了 3 种不同的计算机硬件配置。我还编写了一个小型 c++ 测试应用程序来重现此问题。它只是计算内存中几兆字节的废话并输出为此花费的时间。这是在循环中完成的，因此您可以不断获得输出。我上传了这个测试程序（包括自我编译的源代码，例如使用 MinGW 的 GCC 4.7.2，如果你担心可执行文件中有恶意软件）到这里：[http ://daiw.de/share/PrintCalculationTimes.zip](http://daiw.de/share/PrintCalculationTimes.zip)

在以下屏幕截图中，您可以看到在程序执行时播放声音（通过控制面板中的声音设置）会发生什么：http: [//daiw.de/share/PrintCalculationTimesWithoutSound.png](http://daiw.de/share/PrintCalculationTimesWithoutSound.png)

[http://daiw.de/share/PrintCalculationTimesWithSoundWithAnnotations.png](http://daiw.de/share/PrintCalculationTimesWithSoundWithAnnotations.png) （不是每次点击播放按钮都会发生这种情况，但多次点击很容易在我的测试 PC 上重现。）

这是一个众所周知的问题吗？有人可以用我提供的测试用例证实这一观察吗？

感谢您的关注。

多比

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T11:39:40.970

我看到的是 16 毫秒的抖动，而不是半秒的延迟。此外，我看到它独立于正在播放的任何声音（即使在您的屏幕截图中似乎也是如此）。

如果播放一些声音也会阻止（非背景优先）线程运行，那真的会让我感到惊讶。对于数以千计的电脑游戏来说，这将是一个严重的问题，所有这些游戏都需要流畅的动画和始终播放声音。

考虑到 16 毫秒是您在系统上使用的计时器的默认分辨率，结果一点也不奇怪。这正是您所期望的。

如果有的话，请尝试`std::chrono::high_resolution_clock`改用，或者`timeBeginPeriod(1)`在程序的开头放一个（需要`-lwinmm`）。

（请注意，这`timeBeginPeriod(1)`会使调度程序更频繁地*全局*执行，不仅在您的程序中，而且不仅在程序的生命周期内。如果您使用笔记本电脑并使用电池运行，您可能需要在测试后重新启动以节省电池。通常，一个人会使用 重置为正常`endTimePeriod(1)`，但由于终止进程是结束你的程序的唯一方法，这不起作用。）

# php - 在 HTML/PHP 中每次刷新时重定向到随机 URL

> ID：13679766
> 
> 赞同：-2
> 
> 时间：2012-12-03T08:44:54.677
> 
> 标签：php, html

我想要一个 HTML 或 PHP 脚本/页面，它会在我执行的每次重新加载时将我重定向到一个随机 URL。请注意，URL 将由我手动插入。

我们能做到吗？如何？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T08:49:26.487

如果你有一个 MySQL 数据库表中的 URL，你可以使用这样的东西来给你一个随机的行：

```
SELECT url FROM links ORDER BY RAND() LIMIT 1 
```

或者，如果您将它们存储在一个数组中，您可以[shuffle()](http://php.net/manual/en/function.shuffle.php)数组并获取第一个元素：

```
$urls = array( ... );
shuffle($urls);

// redirect to $url[0];
header('Location: ' . $urls[0]);
exit(); 
```

# iphone - 当pickerview出现时向上滚动scrollview

> ID：13679773
> 
> 赞同：-1
> 
> 时间：2012-12-03T08:45:15.760
> 
> 标签：iphone, objective-c, ios, uiscrollview, uipickerview

我有一个放在滚动视图中的表单。在这个表单上，我有几个按钮，当我按下它们时，它们会显示一个 dateTime 选择器或一个 pickerView。但我想知道我是否可以将我的表单显示为此刻位于pickerView 后面的文本。

我知道你可以用 UITextfield 做到这一点。[你可以在这里](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html#//apple_ref/doc/uid/TP40009542-CH5-SW7)找到解释。

希望任何人都可以帮助我！

亲切的问候！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T08:57:22.580

```
-(IBAction)btnDate_Clicked:(id)sender
{

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];
    yourScrollView.frame = CGRectMake(0, -100, 320, yourScrollView.frame.size.height);  // set frame which you want   
    [UIView commitAnimations];

} 
```

当你想设置滚动的原始位置时，再次使用我的动画代码设置滚动视图框架。

```
-(IBAction)btnDone_Clicked:(id)sender
{

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];
    yourScrollView.frame = CGRectMake(0, 0, 320, yourScrollView.frame.size.height);  // set frame which you want   
    [UIView commitAnimations];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:00:31.750

使用`scrollRectToVisible:animated:`方法`UIScrollView`

# c++ - 在hiredis中关闭连接？

> ID：13679776
> 
> 赞同：2
> 
> 时间：2012-12-03T08:45:28.100
> 
> 标签：c++, redis, hiredis

如何使用hiredis API断开与redis服务器的连接？有 API 可以连接，但我找不到任何关闭连接的函数？是否`redisFree`会自动执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T11:46:52.653

redisFree() 确实会关闭连接，并为所有附加对象释放内存。

如有疑问，您可以查看源代码。这很容易理解。

```
void redisFree(redisContext *c) {
    if (c->fd > 0)
        close(c->fd);
    if (c->obuf != NULL)
        sdsfree(c->obuf);
    if (c->reader != NULL)
        redisReaderFree(c->reader);
    free(c);
} 
```

# facebook-like - FB之类的不起作用

> ID：13679778
> 
> 赞同：-5
> 
> 时间：2012-12-03T08:45:33.597
> 
> 标签：facebook-like

我对 Facebook 的“点赞”有疑问。我在 Drupal 6 中创建了一个站点，匿名用户在登录之前看不到页面。

我添加了 Facebook 的“喜欢”代码。但它不工作。

网址：[http](http://www.essentialsharm.co.uk/user) ://www.essentialsharm.co.uk/user 用户名：dipali 密码：123456

请尽快帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:46:49.917

如果您想要喜欢的数据仅在用户登录时可用，则“喜欢”按钮不起作用。该页面必须可供 Facebook 访问，以便它可以正确读取 Open Graph 标签。

我猜你使用了生成器，如果没有：

> [https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

# javascript - 如何在 IE 中上传文件？

> ID：13679781
> 
> 赞同：0
> 
> 时间：2012-12-03T08:46:01.833
> 
> 标签：javascript, internet-explorer, grails, file-upload, grails-2.0

我想使用以下 html 和 js 将文件上传到我的服务器：

```
<script type="text/javascript">
    $(function() {
        $('#uploadimageBtn').click(function() {
                $('#imageInput').click();
        });

        $('#imageInput').change(function(event) {
                $('#loading-spinner').show();
                var file = $(this).val();
                var fileName = file.split("\\");
                $('#uploadimageBtn-inner').html("Uploading..."); 
                $('#uploadForm').submit();
                event.preventDefault();
        });                
    });
</script>

<div id="uploadimageBtn">
    <g:img id="loading-spinner" style="display:none;" file="loading.gif"/>
    <div id="uploadimageBtn-inner">Click to upload a file</div>
</div>  

<g:form name="uploadForm" action="update" method="post" enctype="multipart/form-data">
    <div style="height: 0px;width: 0px; overflow:hidden;">
        <input id="imageInput" name="image" type="file" value="upload"/>
    </div>
</g:form> 
```

它在所有主要浏览器中都能完美运行，但在 IE 中却无法运行。

那么我必须改变什么才能让它工作呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T08:48:57.157

Internet Explorer 对文件输入具有一定的安全性。您不能触发对文件输入的点击。而且我认为您无法在文件输入上收听某些事件。

如果你想做这样的事情，你必须使用带有不可见文件输入的“技巧”。您在 img 上放置一个不可见的文件输入，当用户单击 img 时，他实际上是在输入文件中单击。但是你不能在 IE 上克隆文件输入，所以你必须把这个输入从 DOM 中分离出来，放到一个表单中，然后提交。

你可以检查： http: [//fineuploader.com/](http://fineuploader.com/) 我认为它可以做你想做的事。

# c# - 我应该如何在 UML 中表示静态类？

> ID：13679791
> 
> 赞同：13
> 
> 时间：2012-12-03T08:47:04.287
> 
> 标签：c#, uml

所以我做了一些关于如何在 UML 中表示静态方法和类的研究。我在[这两页上发现静态方法应该用下划线来表示，但是将](http://www.jguru.com/faq/view.jsp?EID=288631) [类](http://en.wikipedia.org/wiki/Class_diagram)显示为静态的正确方法是什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-03T09:41:59.137

将类标记为**静态**是非常低级的信息，我们通常不会将其放入 UML 图中。UML 1.0 和 2.0 为设计人员/开发人员提供了一些灵活性，可以在适合您的受众/团队的情况下修改约定。

您可以为该类添加**注释**`<<static>>`，或使用类似（用于接口）的内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-03T08:50:03.040

我只会使用刻板印象`<<static>>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T09:28:00.283

IMO 静态类（如在 C# 中）甚至不应该在 OO 设计中使用。静态类不能被实例化，因此实际上不是关于 UML 语义的类。

您可以将该类标记为“叶子”（无子类）并添加一个不允许非静态成员的约束。这类似于 C# static 关键字的含义。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2017-03-17T20:51:06.030

静态类通常通过在类名下划线来表示。它是为静态特性加下划线的约定，因此在类名下加下划线表示静态类是有道理的。

# java - 如何在 PrimeFaces 中使用未缩小版本的 jQuery？

> ID：13679792
> 
> 赞同：0
> 
> 时间：2012-12-03T08:47:09.667
> 
> 标签：java, jquery, primefaces

我有一个非常基本和简单的问题，但不幸的是各种谷歌查询没有给我带来成功......

如何在**PrimeFaces中使用****开发 jQuery**版本？我在 jQuery 引擎的某个地方遇到错误，但由于缩小，我不可能说出问题所在并在任何论坛上发布有意义的问题......

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:00:05.717

只需下载*primefaces-XX-sources.jar*它包含非缩小版的 jQuery

从这里获取： [下载 Primefaces](http://primefaces.org/downloads.html)

比替换*META-INF\resources*文件夹 - 从源 jar 中取出一个并将其放入原始 jar 中），当您再次遇到客户端 js 错误时，将显示一个有意义的 jQuery 源代码......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:48:53.373

[您可以使用jQuery 网站](http://jquery.com/download/)上的非混淆版本。确保您获得与您正在使用的版本相同的版本。**

# iphone - 如何编写我的自定义代码来设计任何自动修复 iPhone 4 和 iPhone 5 布局的布局

> ID：13679793
> 
> 赞同：0
> 
> 时间：2012-12-03T08:47:11.717
> 
> 标签：iphone, xcode, ios5, ios6

我没有在我的项目中使用任何 XIB。我正在通过自定义代码设计我的视图或任何东西。直到 iPhone 4 都很好。但是对于 iPhone 5，当我想让应用程序与 iPhone 5 兼容时，我遇到了一个问题。它的屏幕高度比以前的 iPhone 大。我想让它自动兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:50:24.670

将以下行添加到您的 .m/.h 文件中

```
#define IS_IPHONE_5 ( [ [ UIScreen mainScreen ] bounds ].size.height == 568 ) 
```

如果设备是 iPhone5 即 4 英寸屏幕，这将返回 YES。像这样使用它：

```
if(IS_IPHONE_5) {
     //set frame of objects for 4 inch screen - iPhone 5 or new iPod Touch
}else {
     //set frame of objects for 3.5 inch screen - IPhone 4S or earlier devices
} 
```

我在我的许多应用程序中使用相同的解决方案。希望这可以帮助。:)

# javascript - 如果我们有使用 Javascript 的访问令牌，则登录 Facebook 用户名

> ID：13679794
> 
> 赞同：0
> 
> 时间：2012-12-03T08:47:15.283
> 
> 标签：javascript, jquery, facebook-graph-api

如果我使用 Javascipt 或 Jquery 获取访问令牌，如何登录 Facebook 用户名？提前致谢..

```
 var accessToken = '';
    accessToken=localStorage.getItem(facebook_token);
    params='access_token='+accessToken;
      $.get("https://graph.facebook.com/me",params, 

        function(response){
            fbUesrName=response.name;
            alert(fbUesrName);
       },"json"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:52:14.750

如果您已经通过 JavaScript SDK 连接，您可以执行以下操作：

```
FB.api('/me', function(response) {
  alert('Your name is ' + response.name);
}); 
```

参考：http: [//developers.facebook.com/docs/reference/javascript/](http://developers.facebook.com/docs/reference/javascript/)

**更新**

[如果您拥有当前登录用户的访问令牌，您可以在此 URL https://graph.facebook.com/me](https://graph.facebook.com/me)发出 HTTP GET，然后您可以阅读 Json 响应。

执行此操作的 jQuery 代码示例：

```
// Set the access token here
var accessToken = '';

$.ajax({
    url: "https://graph.facebook.com/me",
    type: "get",
    data: { access_token: accessToken},
    success: function (response, textStatus, jqXHR) {
        // You can access the name of the user this way:
        // response.name
    },
    error: function (jqXHR, textStatus, errorThrown) {
    },
    complete: function () {
    }
}); 
```

**编辑**：我现在真的很困惑。如果我错了，请纠正我，但您正在**Facebook Canvas 上开发一个 Web 应用程序，该应用程序应该通过 Blackberry 上的 Web 浏览器访问。您也不想使用 Facebook JavaScript SDK（为什么？）**。为了实现您想要的，您应该完成以下所有步骤。我的印象是你试图直接从最后一个开始。

1.  您需要创建一个 Facebook 应用程序： [https ://developers.facebook.com/apps](https://developers.facebook.com/apps)
2.  您需要实现 Facebook 登录： [https ://developers.facebook.com/docs/howtos/login/client-side-without-js-sdk/](https://developers.facebook.com/docs/howtos/login/client-side-without-js-sdk/)
3.  *可选*：您可能需要请求扩展权限 [https://developers.facebook.com/docs/reference/login/#permissions](https://developers.facebook.com/docs/reference/login/#permissions)
4.  当所有这些都正常工作并且当前用户已授予您的应用程序的权限并已登录时，您就可以使用我提供的代码示例。

# jquery - 支持图像和视频的灯箱库

> ID：13679801
> 
> 赞同：1
> 
> 时间：2012-12-03T08:47:52.570
> 
> 标签：jquery

我最近查看了fancybox（[从刷新整个包装器中停止](https://stackoverflow.com/questions/13648768/stop-fancybox-from-refreshing-whole-wrapper)fancybox ）。

我不确定它是否满足我的需求，我想改变缩略图的工作方式，使其进入对话框，就像在亚马逊上一样（[http://www.amazon.co.uk/Assassins-Creed-3- PC-DVD/dp/B007BLPPYW/ref=sr_1_cc_1?s=aps&ie=UTF8&qid=1354523424&sr=1-1-catcorr](http://www.amazon.co.uk/Assassins-Creed-3-PC-DVD/dp/B007BLPPYW/ref=sr_1_cc_1?s=aps&ie=UTF8&qid=1354523424&sr=1-1-catcorr)）和buy.com（[http://www.buy.com/prod/norton-360-premier-1 -user-3-pcs/240575091.html](http://www.buy.com/prod/norton-360-premier-1-user-3-pcs/240575091.html) ) 当您点击产品图片时。

我已经浏览了相当多的互联网来寻找类似的东西，但是，我得到的最多的是通过缩放页面上的图像来工作的奇异灯箱。

尽管我可以编辑 fancybox 来大致做我想做的事，但我想知道这里是否有人知道另一个更适合我需要的灯箱？

### 编辑

我确实看过：[prettyPhoto](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/#prettyPhoto[pp_gal]/3/)但是没有例子表明它的缩略图器与 Flash 一起使用，并且在他们的例子中缩略图器的位置（在媒体顶部）我知道它不适用于较旧的 Flash 版本和浏览器（直到IE8）并且它对 YouTube 视频也不是那么好（由于广告显示等）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:40:02.380

我一直在用 fancyBox 进行调整，但它无法做到我想要的，所以最后我放弃了。

相反，我决定花几天时间来构建自己的：[https ://github.com/Sammaye/prodigal](https://github.com/Sammaye/prodigal)

它非常简单，专注于制作亚马逊类型的产品库，但它确实有效，我已经在以下设备上进行了测试：

*   火狐（最新）
*   IE（7 及以上）
*   Safari 5.1 及更高版本
*   Opera 12 及以上
*   和铬（最新）

它适用于所有能够处理图像和视频的人。

随意使用它，滥用它，然后将它塑造成你想要的样子。

# java - 将数字变量从 HTML 传递到 java

> ID：13679803
> 
> 赞同：1
> 
> 时间：2012-12-03T08:47:57.233
> 
> 标签：java, numberformatexception

这是我的 java 类，我得到了`NumberFormatException`. 谁能帮我？我已经尝试了很多次，但它一直有这个错误。

```
public class HelloFromHTML extends JApplet
{

    String name;
    String age, dimensions1 ,dimensions2;
    int num;
    Font f;

    public void init()
    {   
        f = new Font("TimesRoman", Font.BOLD,30);

        String a = this.getParameter("ageHTML");
        num = Integer.parseInt(a);      

        name = "Hello " + getParameter("nameHTML") + " " + num + " years'"; 
        dimensions1 = "JApplet size is " + getParameter("width") + ", " +  getParameter("height");  
        dimensions2 = "size is " + String.valueOf(getWidth()) + ", " +  String.valueOf(getHeight());
    }

    public void paint(Graphics g)
    {
        super.paint(g);

        g.setFont(f);
        g.setColor(Color.black);

        //////////////////////////////////
        //   Display String
        g.drawString(name,5,50);
        g.drawString(dimensions1,5,100);
        g.drawString(dimensions2,5,200);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:04:09.103

由于这条线`num = Integer.parseInt(a);`会导致它`Exception`被抛出，我建议你用一个`try-catch`块包围它。此外，调试您的代码以查看为什么`a`不是数字。`catch`对于任何`Exception`可能被抛出的东西，这是一个很好的做法。

```
try{
    num = Integer.parseInt(a);
}
catch(NumberFormatException e){
   //TODO: what happens when "a" is not a number
} 
```

# web-services - 带有 Web 服务的 Sharepoint 社交标签 - 私有标签

> ID：13679806
> 
> 赞同：2
> 
> 时间：2012-12-03T08:48:14.113
> 
> 标签：web-services, sharepoint-2010

我们希望通过 Web 服务处理 SharePoint 用户的标签。

使用 SocialDataService.asmx 的功能是可能的。我们可以使用 GetTagTermsOfUser 函数选择用户的标签，但是这个函数只返回用户的公共标签。

使用 Web 服务的程序以用户的权限运行。

我可以选择用户的私人标签吗？如何？

# java - 在 Eclipse 中添加 M2_REPO 变量的问题

> ID：13679810
> 
> 赞同：10
> 
> 时间：2012-12-03T08:48:32.133
> 
> 标签：java, eclipse, maven

我在 eclipse 中添加 M2_REPO 变量，`Window --> Preferences --> Java --> Build Path --> Classpath Variables --> New -->`然后提供名称为**M2_REPO**并选择 maven 存储库文件夹，然后我看到这个变量被添加到**Classpath 变量**列表中。然后我点击确定按钮。

之后，如果我再次看到上面的**Classpath variables**，那么我在那里找不到**M2_REPO**变量，因此`Unbound classpath variable: M2_REPO/....jar`我的项目中出现错误。

有人可以帮忙吗。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T09:07:58.427

Check for settings.xml in

> Window --> Preferences --> Maven ---> User Settings

If not, set it there and change localRepository path in settings tag inside settings.xml. Normally you will find settings.xml in .m2 folder under the user folder (for eg. C:\Documents and Settings\userName.m2).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T09:10:06.667

我认为你做错了。如果您使用的是 Eclipse（更高版本，类似于 Juno），则根本不应该处理`M2_REPO`类路径变量。您应该通过转到 Window -> Preferences -> Maven -> User Settings 来调整 Maven 设置。是从这些`M2_REPO`设置派生的，您不能手动覆盖它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-01T05:38:15.267

我的 M2_REPO 变量也不断消失，对我的提示就在这里：

[http://maven.40175.n5.nabble.com/Eclipse-Plugin-how-to-remove-M2-REPO-classpath-variable-re-post-td3375082.html](http://maven.40175.n5.nabble.com/Eclipse-Plugin-how-to-remove-M2-REPO-classpath-variable-re-post-td3375082.html)

我正在运行 Spring Tool Suite 3.6.2（基于 Eclipse Luna）。

在我的工作区有一个文件`workspace-sts-3.6.2.RELEASE\.metadata\.plugins\org.eclipse.core.runtime\.settings\org.eclipse.jdt.core.prefs`

添加以下行：

```
org.eclipse.jdt.core.classpathVariable.M2_REPO=<your repo location> 
```

重新启动 Eclipse/STS，M2_REPO 类路径变量应该会再次出现。

编辑：它又发生在我身上。:'(

上面的步骤第二次没有用，但是做

```
mvn -Declipse.workspace="(path to workspace)" eclipse:configure-workspace 
```

再次添加了 M2_REPO 变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-07T13:03:33.233

就我而言，事实证明我在使用 Maven 时遇到了问题。粘贴

mvn --版本

在你的命令行中。它是否正确显示 Maven 版本？如果没有，请检查您的系统变量：M2_HOME、M2。如果未设置 -> 将其设置为正确的 maven 目录并重新启动 Eclipse。一切都应该没问题，M2_REPO 会自动添加。

如果它们存在并且设置为正确的 maven 目录，请检查您的 JAVA_HOME 和 PATH 变量，因为不同的 maven 版本需要不同的 java 版本。如果它不是正确的 java 版本 -> 将其设置为正确的版本。

这很好地解决了我的问题:)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-26T16:43:36.593

解决它的直接形式：

**mvn -Declipse.workspace="/path/to/workspace" eclipse:configure-workspace**

*文档中的命令说明：*

> 配置以下 Eclipse Workspace 功能
> 
> > 将类路径变量 MAVEN_REPO 添加到 Eclipse。可选择通过 URL 加载 Eclipse 代码样式文件。

-Declipse.workspace 是必需参数 Eclipse 工作区的目录位置。用户属性是：eclipse.workspace。

参考：[http ://maven.apache.org/plugins/maven-eclipse-plugin/configure-workspace-mojo.html](http://maven.apache.org/plugins/maven-eclipse-plugin/configure-workspace-mojo.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-14T10:28:42.630

此问题的可能原因是`m2e`maven 插件。如果使用此插件，我建议将其删除并`mvn eclipse:eclipse`改用。

[如何删除`m2e`，点击这里获取帮助](https://stackoverflow.com/questions/17538688/how-do-i-uninstall-m2e-in-eclipse-kepler)：

1.  从 Eclipse 菜单卸载：关于 Eclipse -> 安装详细信息 -> 已安装软件
2.  `m2e` 从`plugin`eclipse安装位置的文件夹中删除插件文件和文件夹名称

# c++ - 如何检测 Boost.PropertyTree 的解析/读取失败？

> ID：13679820
> 
> 赞同：6
> 
> 时间：2012-12-03T08:49:27.433
> 
> 标签：c++, boost

文档并没有真正说明。

我知道我可以给它一个 ifstream，所以我可以检查它以确保它是打开的，所以这种情况主要是处理的。

但是当做 boost::property_tree::ini_parser::read_ini(ifstream_object,property_tree_object);

如何检测文件格式是否错误？我有什么方法可以获取诊断信息，例如解析失败的*位置？*

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-10T17:42:28.067

只捕获异常。基础 PropertyTree 异常类[`boost::property_tree::ptree_error`](http://www.boost.org/doc/libs/1_54_0/doc/html/boost/property_tree/ptree_error.html)派生自[`std::runtime_error`](http://en.cppreference.com/w/cpp/error/runtime_error)，它有两个后代：[`ptree_bad_data`](http://www.boost.org/doc/libs/1_54_0/doc/html/boost/property_tree/ptree_bad_data.html)和[`ptree_bad_path`](http://www.boost.org/doc/libs/1_54_0/doc/html/boost/property_tree/ptree_bad_path.html)。

**例子：**

```
#include <boost/property_tree/ini_parser.hpp>
#include <boost/property_tree/ptree.hpp>
#include <iostream>
#include <sstream>

int main()
{
    using namespace std;
    using namespace boost;
    using namespace property_tree;

    stringstream ss;
    ss << "good = value" << endl;
    ss << "bad something" << endl;
    try
    {
        ptree root;
        read_ini(ss, root);
    }
    catch(const ptree_error &e)
    {
        cout << e.what() << endl;
    }
} 
```

输出是：

```
<unspecified file>(2): '=' character not found in line 
```

# c# - 将数据放入DataTable，得到MemoryOutOfExeption

> ID：13679822
> 
> 赞同：2
> 
> 时间：2012-12-03T08:49:59.703
> 
> 标签：c#, linq, datatable, out-of-memory

从数据表的值制作标题时遇到麻烦。我有一个文本文件，我在其中搜索一些字符串。拆分它们并将它们放入数据表中。之后，我使用一些 linq 代码将“名称”列作为该表的标题。对于小文本文件，它工作得很好，但是当我得到更大的文件时，我的编译器会抛出 MemoryOutOfExeption。所以我在问如何修复我的代码？

我的代码：

```
 DataTable evHeader00 = resAtt.Copy();

        var prds1 = evHeader00.AsEnumerable() // make Name Values as header
                        .GroupBy(c => c["Name"])
                        .Where(g => !(g.Key is DBNull))
                        .Select(g => (string)g.Key)
                        .ToList();

        prds1.ForEach(p => evHeader00.Columns.Add(p, typeof(string))); // Here i got MemoryOutOfExeption

        foreach (var row in evHeader00.AsEnumerable())
        {
            if (!(row["Name"] is DBNull))
            {
                row[(string)row["Name"]] = row["Products"];
            }
        } 
```

数据表1：

```
 ID    Name    Products
 1      a        A
 2      b        B
 3      c        C
...    ...      ... 
```

结果：

```
ID     a   b   c   ...
1      A
2          B
3              C
...   ... ... ...  ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:56:53.320

1.  为什么要在`DataTable`这里复制整个？

    ```
    DataTable evHeader00 = resAtt.Copy(); 
    ```

2.  为什么`List<String>`要用所有数据在这里创建一个新的？

    ```
    var prds1 = evHeader00.AsEnumerable() // make Name Values as header
                    .GroupBy(c => c["Name"])
                    .Where(g => !(g.Key is DBNull))
                    .Select(g => (string)g.Key)
                    .ToList(); 
    ```

所以这应该更具可扩展性：

```
IEnumerable<string> data = resAtt.AsEnumerable()
                                 .Where(r => !r.Field<string>("Name") == null)
                                 .GroupBy(r => r.Field<string>("Name"))
                                 .Select(g => g.Key); 
```

或者（正如@Rawling 评论的那样）使用`Enumerable.Distinct`which 应该更加“内存友好”：

```
IEnumerable<string> data = resAtt.AsEnumerable()
                                 .Where(r => !r.Field<string>("Name") == null)
                                 .Select(r => r.Field<string>("Name"))
                                 .Distinct(); 
```

现在您可以使用 a`foreach`来枚举结果。

# android - 具有返回值的函数中的 AlertDialog

> ID：13679823
> 
> 赞同：5
> 
> 时间：2012-12-03T08:50:01.803
> 
> 标签：android, android-alertdialog

我编写了一个返回值类型为 int 的函数，在这个函数中我需要弹出一个带有两个按钮的 AlertDialog。当点击“Yes”按钮时，函数返回0，“No”按钮返回-1。

```
public int Func(){
    final AlertDialog d=new AlertDialog.Builder(mContext).setTitle("Warning").setCancelable(false).setMessage
                       (alert)
                       .setPositiveButton("Yes",mListener).setNegativeButton("No",mListener).create();
                       d.getWindow().setType(WindowManager.LayoutParams.TYPE_SYSTEM_ALERT);
                       d.show();
   if(mWhich.getWhich()==-1)   //the "yes" button was clicked
       return 0;
   else                        //the "no"  button was clicked
       return -1;
} 
```

mWhich 是一个用来记录用户选择的类

```
private DialogInterface.OnClickListener mListener =
            new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {
                    mWhich.setWhich(which);
                             }
            }; 
```

现在问题是代码

```
if(mWhich.getWhich()==-1)
       return 0;
   else
       return -1; 
```

在用户单击是或否按钮之前执行，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:16:22.917

据我了解，您的代码看起来类似于

```
// some code
int result = Func();
DoSmthWithResult(result);
// some code 
```

您`Func`正在 UI 线程上运行，因此在您创建对话框后，它会继续执行并返回初始值`mWich`. 您应该改为调用`DoSmthWithResult`：`onClickListener`

```
private DialogInterface.OnClickListener mListener = new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which) {
        DoSmthWithresult(which == -1 ? 0 : -1);
    }
}; 
```

现在`DoSmthWithResult`将在用户按下“是”或“否”按钮后执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T18:16:01.580

我需要相同的功能来显示确认对话框，这是我的解决方法：

你`Func()`可以像我`messageDialog()`这样：

```
 public static void messageDialog( Context context, String title, String bt_ok, String bt_cancel, final Runnable if_ok, final Runnable if_cancel ) {

        AlertDialog.Builder alert = new AlertDialog.Builder(context);

        alert.setTitle( title );

        alert.setPositiveButton( bt_ok.toUpperCase(),
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {

                        if(if_ok!=null) if_ok.run();

                    }
                });
        alert.setNegativeButton( bt_cancel.toUpperCase(),
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {

                        if(if_cancel!=null) if_cancel.run();

                    }
                });

        alert.show();

    } 
```

并`messageDialog()`以这种方式调用：

```
 Runnable ifTrue = new Runnable() {
        @Override
        public void run() {
            //put here your YES onClick stuff
        }
    };

    String msg = "Do you really want to do this?";

    ALITEC.Dialogs.messageDialog( this, msg, "Yes", "No", ifTrue, null); 
```

在 NO 按钮单击时，我什么也没做……但是如果您愿意：

```
 Runnable ifFalse = new Runnable() {
        @Override
        public void run() {
            //put here your NO onClick stuff
        }
    }; 
```

然后打电话

> messageDialog(this, msg, "Yes", "No", ifTrue, ifFalse);

反而

> messageDialog(this, msg, "Yes", "No", ifTrue, null);

就这样！

此致！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T09:11:28.000

我认为您不可能这样做，因为`Func()`可能会在用户单击任一按钮之前完成执行。在方法执行完成后，不可能更改方法的返回值。

由于您已经在`which`使用`mWhich.setWhich(which);`. 您可以稍后使用另一个函数读取该值。

```
private DialogInterface.OnClickListener mListener = new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which) {
        mWhich.setWhich(which);
    }
};

public void showDialog() {
    final AlertDialog d = new AlertDialog.Builder(mContext).setTitle("Warning")
            .setCancelable(false).setMessage(alert).setPositiveButton("Yes", mListener)
            .setNegativeButton("No", mListener).create();
    d.getWindow().setType(WindowManager.LayoutParams.TYPE_SYSTEM_ALERT);
    d.show();
}

public int func() {
    if (mWhich.getWhich() == -1)
        // the "yes" button was clicked
        return 0;
    else
        // the "no" button was clicked
        return -1;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T09:45:09.910

虽然它肯定是使用侦听器并在单击时启动新的调用层次结构的 android 方式（正如 Yuriy 和 Binoy 建议的那样），但可能需要获取阻塞对话框。我意识到通过使用自己的循环器启动一个新线程来显示对话框。这样 ui 线程可以自由运行，但不会导致 ANR。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-08T18:32:40.347

添加处理接收到的消息的处理程序

```
 public static boolean areYouSure(Context context, String message){

    final boolean[] result = new boolean[1];
    final Handler handler = new Handler()
    {
        @Override
        public void handleMessage(Message mesg)
        {
            throw new RuntimeException();
        }
    };

    AlertDialog.Builder alert = new AlertDialog.Builder(context);
    alert.setTitle(message);

    alert.setPositiveButton("OK", (dialog, whichButton) -> {
        //What ever you want to do with the value
        result[0] = true;
        handler.sendMessage(handler.obtainMessage());
    });

    alert.setNegativeButton("CANCEL", (dialog, whichButton) -> {
        // what ever you want to do with No option.
        result[0] = false;
        handler.sendMessage(handler.obtainMessage());
    });

    alert.show();

    try{ Looper.loop(); }
    catch(RuntimeException e){}

    return result[0];
} 
```

# objective-c - Objective-C: typedef NS_ENUM 错误

> ID：13679826
> 
> 赞同：4
> 
> 时间：2012-12-03T08:50:06.613
> 
> 标签：objective-c, ios, enums, typedef

我在 iOS 应用程序中使用 typedef NS_ENUM 并收到此错误：“链接器命令失败，退出代码 1”。通常这很容易解决，但这次我找不到解决方案......

这是我的 NS_Enum：

```
typedef NS_ENUM(NSInteger, MKIGridViewSelectionStyle)
            MKIGridViewSelectionStyle_SelectCellOnly = 1,
            MKIGridViewSelectionStyle_SelectCompleteRow = 2,
            MKIGridViewSelectionStyle_SelectCompleteColumn = 3; 
```

编辑：

完整消息：

> ld /Users/mki/Library/Developer/Xcode/DerivedData/GridViewTest-esfqwoooiarqpchfzsazwbgckmso/Build/Products/Debug-iphoneos/GridViewTest.app/GridViewTest normal armv7s cd /Users/mki/Desktop/GridViewTest setenv IPHONEOS_DEPLOYMENT_TARGET 5.0 setenv PATH "/Applications /Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/ sbin" /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch armv7s -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/ iPhoneOS6.0。sdk -L/Users/mki/Library/Developer/Xcode/DerivedData/GridViewTest-esfqwoooiarqpchfzsazwbgckmso/Build/Products/Debug-iphoneos -F/Users/mki/Library/Developer/Xcode/DerivedData/GridViewTest-esfqwoooiarqpchfzsazwbgckmso/Build/Products/ Debug-iphoneos -filelist /Users/mki/Library/Developer/Xcode/DerivedData/GridViewTest-esfqwoooiarqpchfzsazwbgckmso/Build/Intermediates/GridViewTest.build/Debug-iphoneos/GridViewTest.build/Objects-normal/armv7s/GridViewTest.LinkFileList -dead_strip - fobjc-arc -fobjc-link-runtime -miphoneos-version-min=5.0 -framework QuartzCore -framework AudioToolbox -framework UIKit -framework Foundation -framework CoreGraphics -o /Users/mki/Library/Developer/Xcode/DerivedData/GridViewTest-esfqwoooiarqpchfzsazwbgckmso /Build/Products/Debug-iphoneos/GridViewTest.app/GridViewTest应用程序/GridViewTest应用程序/GridViewTestLinkFileList -dead_strip -fobjc-arc -fobjc-link-runtime -miphoneos-version-min=5.0 -framework QuartzCore -framework AudioToolbox -framework UIKit -framework Foundation -framework CoreGraphics -o /Users/mki/Library/Developer/Xcode/DerivedData /GridViewTest-esfqwoooiarqpchfzsazwbgckmso/Build/Products/Debug-iphoneos/GridViewTest.app/GridViewTestLinkFileList -dead_strip -fobjc-arc -fobjc-link-runtime -miphoneos-version-min=5.0 -framework QuartzCore -framework AudioToolbox -framework UIKit -framework Foundation -framework CoreGraphics -o /Users/mki/Library/Developer/Xcode/DerivedData /GridViewTest-esfqwoooiarqpchfzsazwbgckmso/Build/Products/Debug-iphoneos/GridViewTest.app/GridViewTest
> 
> 重复符号 _MKIGridViewSelectionStyle_SelectCellOnly 在：/Users/mki/Library/Developer/Xcode/DerivedData/GridViewTest-esfqwoooiarqpchfzsazwbgckmso/Build/Intermediates/GridViewTest.build/Debug-iphoneos/GridViewTest.build/Objects-normal/armv7s/MKIViewController.o /Users/ mki/Library/Developer/Xcode/DerivedData/GridViewTest-esfqwoooiarqpchfzsazwbgckmso/Build/Intermediates/GridViewTest.build/Debug-iphoneos/GridViewTest.build/Objects-normal/armv7s/MKIGridView.o ld：架构armv7s的3个重复符号clang：错误: 链接器命令失败，退出代码为 1（使用 -v 查看调用）

迈克

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T09:30:53.000

您忘记在值定义周围使用大括号。

```
typedef NS_ENUM(NSInteger, MKIGridViewSelectionStyle) {
        MKIGridViewSelectionStyle_SelectCellOnly = 1,
        MKIGridViewSelectionStyle_SelectCompleteRow = 2,
        MKIGridViewSelectionStyle_SelectCompleteColumn = 3
}; 
```

# vba - 将来自一张纸的数据输入保存到另一张纸的连续行中

> ID：13679832
> 
> 赞同：1
> 
> 时间：2012-12-03T08:50:36.600
> 
> 标签：vba, excel

我正在尝试在 Excel 中编写一个分配给“表 1”中的按钮的宏。单击按钮后，我需要将工作表 1 上某些单元格的数据记录到工作表 2 中的一行单元格中。

我希望能够*再次*在工作表 1 上输入数据，**在与以前相同的单元格中**，然后单击按钮并让这些新数据出现在工作表 2 上的**下一行**（即工作表 2 将是一种记录在单击按钮之前在工作表 1 中输入的内容）。

我将工作表 1 中的数据登录到工作表 2 上的行，然后当我单击按钮时，数据进入下一行，但原始行为空 - 它没有存储单击按钮之前的数据。

# c++ - 当在其中定义全局变量时，如何在 .cpp 中包含 C 风格的 .h？

> ID：13679833
> 
> 赞同：1
> 
> 时间：2012-12-03T08:50:48.280
> 
> 标签：c++, c, include, global-variables

我想在我的 .cpp 中包含一个全局 .h 文件，但它是 C 风格的。

其中，全局变量定义如下：

```
 int a;    
 int b; 
```

这会导致错误。

如何将其更改为与我的 .cpp 文件兼容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T08:54:05.227

*   从头文件中删除定义。
*   在头文件中声明它们并`extern`在（完全）一个 cpp 文件中定义变量。
*   将头文件包含在要访问变量的任何 cpp 文件中。

如果在头文件中定义变量，最终会违反**One 定义规则**并遇到链接错误。

# linux - LINUX——用于数据传输的DMA——从SPI读取——tx到usart——RPi

> ID：13679836
> 
> 赞同：0
> 
> 时间：2012-12-03T08:50:59.713
> 
> 标签：linux, embedded-linux, raspberry-pi, dma

DMA 的实际工作原理是我所知道的理论；-- [http://en.wikipedia.org/wiki/Direct_memory_access](http://en.wikipedia.org/wiki/Direct_memory_access)

但是在编程中我们要如何管理呢？

我正在使用 RPI 并期待使用 DMA 实现以下操作。
假设我想使用 SPI 从 SD 卡读取数据 ---- TX 读取数据 --- 到 USART。

我是否必须编写数据传输例程并将它们提供给 dma 或者它是由 DMA tx 和 rx 通道处理的？

什么Linux内部用于它？

一些专家可以告诉在这方面要遵循哪些步骤。我是 DMA Programming.lin 的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:42:14.647

您可以查看 Raspberrypi SoC 硬件规格。 [http://www.raspberrypi.org/wp-content/uploads/2012/02/BCM2835-ARM-Peripherals.pdf](http://www.raspberrypi.org/wp-content/uploads/2012/02/BCM2835-ARM-Peripherals.pdf)

Broadcom DMA 支持 SPI TX/RX 和 SD 主机接口。这意味着它至少可以支持设备到内存（我不确定 Broadcom SoC 是否支持设备到设备 DMA）。

不同的 SoC 有不同的 DMA 配置方式。例如，它只需要在一些简单的 DMA 引擎上分配源地址、递增/递减（长度）、目标地址、递增/递减（长度）、计数器和中断。完成 DMA 传输后，将触发中断。

粗略回顾一下博通的SoC。它还有其他选项，例如：WAITS、PERMAP。我不是 Broadcom SoC 专家，也许你可以使用默认值来配置它。

# c# - 树视图中的 XML 节点列表

> ID：13679839
> 
> 赞同：0
> 
> 时间：2012-12-03T08:51:23.207
> 
> 标签：c#, xml

为什么我的代码返回错误

`Object reference not set to an instance of an object.` 在 `treeNode.Nodes[el.Name].Nodes.Add(nodes);?`

我将 xml 文件加载为树视图中的菜单，以便当我单击它时。它会将 url 加载到我的 webbrowser.. 我想在 treeview 中输出，例如：

```
-Home
    -About
         -MoreAbouts
         -MoreAbouts
    -About
-Index
    -About
         -MoreAbouts
         -MoreAbouts
    -About 
```

我用这个来实现。但它返回一个错误

**我的 XML 文件是**

```
<ListOfTopics>
  <Introduction url="index.html" title="Introduction">
        <Iframe url="iframe.html" title="Iframe">
            <Iframe2 url="iframe.html" title="Iframe2"/>
            </Iframe>
    </Introduction>
  <Topic url="about.html" title="About"/>
</ListOfTopics> 
```

**C# 代码**

```
private void XmlElementHasChild(bool index,XmlElement el, TreeView treeNode)
    {
        if (index)
        {
            if (el.HasChildNodes)
            {
                foreach (XmlElement es in el.ChildNodes)
                {
                    TreeNode nodes = new TreeNode();
                    nodes.ToolTipText = es.GetAttribute("url");
                    nodes.Name = es.GetAttribute("title");
                    nodes.Text = es.GetAttribute("title");
                    treeNode.Nodes.Add(nodes);
                    XmlElementHasChild(true,es,treeNode);
                }
            }
        }
        else
        {
            if (el.HasChildNodes)
            {

                foreach (XmlElement es in el.ChildNodes)
                {
                    TreeNode nodes = new TreeNode();
                    nodes.ToolTipText = es.GetAttribute("url");
                    nodes.Name = es.GetAttribute("title");
                    nodes.Text = es.GetAttribute("title");
                    treeNode.Nodes[el.Name].Nodes.Add(nodes);
                    XmlElementHasChild(false, es, treeNode);
               } 
            }
        }
    }
    private void TreeViewLoadXml(bool index, TreeView treeNode)
    {
        XmlDocument xml = new XmlDocument();
        xml.Load(topics);
        int i = 0;
        foreach (XmlElement el in xml.DocumentElement.ChildNodes)
        {
            TreeNode node = new TreeNode();
            node.ToolTipText = el.GetAttribute("url");
            node.Name = el.GetAttribute("title");
            node.Text = el.GetAttribute("title");

            treeNode.Nodes.Add(node);

            if (index)
            {
                XmlElementHasChild(true, el, treeNode);
            }
            else
            {
                XmlElementHasChild(false,el, treeNode);
            }
            i++;
        }

        if (index)
        {
            treeNode.Sort();
        }
    } 
```

这是修复。对不起

```
private void XmlElementHasChild(bool index,XmlElement el, TreeView treeNode)
        {
                if (el.HasChildNodes)
                {
                    foreach (XmlElement es in el.ChildNodes)
                    {
                        TreeNode nodes = new TreeNode();
                        nodes.ToolTipText = es.GetAttribute("url");
                        nodes.Name = es.GetAttribute("title");
                        nodes.Text = es.GetAttribute("title");
                        treeNode.Nodes.Add(nodes);
                        XmlElementHasChild(true,es,treeNode);
                    }
                }
        } 
```

# objective-c - 解析 Facebook API 调用 - NSDictionary NSArray

> ID：13679842
> 
> 赞同：0
> 
> 时间：2012-12-03T08:51:37.870
> 
> 标签：objective-c, ios, xcode, nsarray, nsdictionary

似乎在从 Facebook API 调用访问数据时遇到问题。返回的数据按以下顺序排列：

```
{
comments =     {
    data =         (
                    {
        }
    )
}
} 
```

已经尝试了很长时间，但是在这种情况下我将如何访问数据/评论？我的代码类似于：

```
NSLog(@"%@",allData);

for (NSDictionary *item in allData) {
    NSDictionary *comments = [item objectForKey:@"comments"];
    //ALSO TRIED
    NSArray *comments = [item objectForKey:@"comments"];
} 
```

以上两种方法似乎都会抛出错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:03:02.000

啊，真是个李子！

基本上不需要 for 循环，所以它只是：

```
[allData objectForKey:@"comments"] 
```

谢谢大家，会留给其他人的：D

# jquery - JQuery 在 Django 中没有响应

> ID：13679847
> 
> 赞同：4
> 
> 时间：2012-12-03T08:51:48.197
> 
> 标签：jquery, html, django

我正在研究 JQuery 和 Django。

链接时，我的 JQuery 和 .css 文件通过 django 模板链接和访问，但没有识别前端标签。

```
var $ctrl = $('<input/>').attr({ type: 'radio', name:'groups',value:model.get('name'),id:id1});  
console.log($ctrl);
$("#div1").append($ctrl); 
```

这是我的代码，甚至没有添加单选按钮。我已经在 settings.py 中链接了媒体文件，并且还配置了 urls.py 文件，因此在访问终端时会向 JQuery 显示一条成功的 200 消息，但除此之外没有任何效果！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:06:55.240

Before you can start working on the dom, you have to make sure the dom was loaded. In order to do that you have 2 main ways:

1.  put the script decleration at the end of the HTML document right before the closing body tag, that way you know the html has been loaded before your script is running.
2.  Use [$(document).ready()](http://docs.jquery.com/Tutorials%3aIntroducing_%24%28document%29.ready%28%29), that way, your code will start running only after the entire DOM was loaded.

So in your case:

```
$(document).ready(function(){
var $ctrl = $('<input/>').attr({ type: 'radio', name:'groups',value:model.get('name'),id:id1});  
console.log($ctrl);
$("#div1").append($ctrl);

$('<div/>') // create div
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T11:22:37.450

我认为，当您使用 django 提供 jquery 时，不会加载 jQuery 库。我的建议是使用：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

它将在线加载 jquery 库并希望它能正常工作。

# c# - C# NAudio 音量

> ID：13679852
> 
> 赞同：0
> 
> 时间：2012-12-03T08:52:39.460
> 
> 标签：c#, volume, naudio

作为标题，我只是在网上搜索得很彻底，仍然没有答案。我正在`WaveChannel32` 像这样工作：`WaveChannel32 volumeStream`并将音量设置为：`volumeStream.Volume`，默认值为 1，但如果它增加，音量只会增加一次，所以我怀疑它更像是一个切换而不是音量控制。如果我是对的，那么如何控制音量？
*参考[http://naudio.codeplex.com/wikipage?title=MP3](http://naudio.codeplex.com/wikipage?title=MP3)*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:19:07.757

该`Volume`属性是一个乘数。所以 1 表示保持音量不变，0 表示静音。0.5 会使它更安静，2.0 会使每个样本的振幅加倍等。请注意，如果将此值增加到 1 以上，则稍后播放音频或将其转换回 WAV 文件时，您可能会剪辑音频。

# xpages - 更改 Xpages 对话框扩展的位置

> ID：13679853
> 
> 赞同：0
> 
> 时间：2012-12-03T08:52:41.037
> 
> 标签：xpages, lotus

我正在使用 xpage 对话框控件来捕获评论评论。Xpage 是使用移动控件设计的，我无法将对话框控件定位到窗口顶部。以下示例不会根据样式中给出的值更改位置。

```
<xe:appPage id="IDHomePage" pageName="HomePage" resetContent="true">
  <xe:dialog id="dialog1" style="position:fixed;top:100px;left:25px">
    <xp:table style="container_form_document">
      <xp:tr>
        <xp:td rowspan="2">
           <xe:djSimpleTextarea................... 
```

此外，我无法摆脱的对话框控件顶部还会出现一个取消图标（类似于“X”）。有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:47:58.433

也许你可以使用我在这里发布的方式。 [http://www.xpagedeveloper.com/2012/preventing-the-xpages-dialog-control-to-auto-center](http://www.xpagedeveloper.com/2012/preventing-the-xpages-dialog-control-to-auto-center)

# coldfusion - 避免在不能选择 ORM 的 cfc 中选择 *

> ID：13679856
> 
> 赞同：1
> 
> 时间：2012-12-03T08:52:44.080
> 
> 标签：coldfusion, cfc

在我的 CFC 中，我有将在 cfquery 内的 SELECT 语句中使用的 DB 字段列表

```
<cfcomponent>

<cfscript>
...

variables.lstNode = "NodeID,ParentNodeID,Root,Kind
  ,extra,Slug,title,subtitle,description,isbn,parenttitle,ParentCreateDate
  ,strData,xmlData,pinned,pStatus,cStatus
 ... 
```

后来在很多地方我会做类似的事情

```
 <cfquery name="qryData">
        SELECT  #variables.lstNode# 
        FROM    dbo.vwNode WITH (NOLOCK) 
```

还有什么其他方法可以解决这个问题。注意 ORM 不是一个选项

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:23:46.650

我曾经在 CFC 的顶部使用 cfproperty 来定义数据库列，而这恰好也是 ORM 的做法。它很整洁，它的优点是您可以指定其他属性，例如数据类型。如果您打算编写用于搜索和编辑记录的标准方法，那么这可能是一个好方法。否则，它可能是不必要的复杂。

# android - 9 补丁效率困境

> ID：13679857
> 
> 赞同：1
> 
> 时间：2012-12-03T08:52:45.203
> 
> 标签：android, android-layout

我有一个应用程序设计，其中包含样式相似但宽度和高度不同的按钮。这些按钮包含几种状态，如主动/被动。

现在我正在考虑布局和那些按钮的实现。首先，我可以使用 9 补丁工具来摆脱按钮宽度依赖。其次，我可以装傻并为每个按钮和每个状态获取图像。

忽略第二种方法更广泛的 sd-space 使用，这种方法会产生哪些其他低效率？

我特别担心 ram 的使用——在我的情况下使用 9patch 更好吗？为什么？我的建议是否正确，在 9patch 方法的情况下，由于图像数据将驻留在单个后台数据容器中，因此要使用的 ram 数量会少得多？

谢谢。

# android - 无法在设备上更新我的 apk

> ID：13679861
> 
> 赞同：3
> 
> 时间：2012-12-03T08:53:03.220
> 
> 标签：android

我无法在目标设备上更新我的 apk。我已经签名了，但是在日志中我得到了

```
 Log Collector version: 1.1.0
 Device model: LG-P690
 Firmware version: 2.3.4
 Kernel version: 2.6.35.10-perf+
lg-electronics@LGERP-BLD-LNX )
#1 PREEMPT Mon Dec 12 17:04:15 MSK 2011
 Build number: GINGERBREAD

Intent PendingIntent{409f4dc8: PendingIntentRecord{407f8698 com.google.android.apps.maps startService}}}mUpdateRecords: {}
12-02 22:59:13.949 V/LocationManagerService( 1565): removeUpdatesPI(intent)
12-02 22:59:13.949 V/LocationManagerService( 1565): _removeUpdates: listener = Receiver{40a9b800 Intent PendingIntent{40a405d8: PendingIntentRecord{407f8698 com.google.android.apps.maps startService}}}mUpdateRecords: {}
12-02 22:59:14.529 D/StatusBarPolicy( 1653): [BRIGHTHY] 0\. mDataNetType: 2
12-02 22:59:14.529 D/StatusBarPolicy( 1653): [BRIGHTHY] curNetwork=25503 curHPLMN=25503
12-02 22:59:20.529 D/StatusBarPolicy( 1653): [BRIGHTHY] 0\. mDataNetType: 2
12-02 22:59:20.529 D/StatusBarPolicy( 1653): [BRIGHTHY] curNetwork=25503 curHPLMN=25503
12-02 22:59:23.529 D/StatusBarPolicy( 1653): [BRIGHTHY] 0\. mDataNetType: 2
12-02 22:59:23.529 D/StatusBarPolicy( 1653): [BRIGHTHY] curNetwork=25503 curHPLMN=25503
12-02 22:59:26.529 D/StatusBarPolicy( 1653): [BRIGHTHY] 0\. mDataNetType: 2
12-02 22:59:26.529 D/StatusBarPolicy( 1653): [BRIGHTHY] curNetwork=25503 curHPLMN=25503
12-02 22:59:33.139 I/ActivityManager( 1565): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.HOME] flg=0x10200000 cmp=com.lge.launcher/.Launcher } from pid 1565
12-02 22:59:34.699 I/ActivityManager( 1565): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.infraware.polarisviewer/com.infraware.polarisoffice.OfficeMainActivity bnds=[82,127][158,223] } from pid 1879
12-02 22:59:35.539 D/StatusBarPolicy( 1653): [BRIGHTHY] 0\. mDataNetType: 2
12-02 22:59:35.539 D/StatusBarPolicy( 1653): [BRIGHTHY] curNetwork=25503 curHPLMN=25503
12-02 22:59:36.279 I/ActivityManager( 1565): Starting: Intent { act=android.intent.action.VIEW dat=file:///mnt/sdcard/FluffyBag-46.apk typ=application/vnd.android.package-archive cmp=com.android.packageinstaller/.PackageInstallerActivity } from pid 7383
12-02 22:59:37.719 I/ActivityManager( 1565): Starting: Intent { dat=file:///mnt/sdcard/FluffyBag-46.apk cmp=com.android.packageinstaller/.InstallAppProgress (has extras) } from pid 7252
12-02 22:59:37.969 W/ActivityManager( 1565): No content provider found for:
12-02 22:59:38.539 D/StatusBarPolicy( 1653): [BRIGHTHY] 0\. mDataNetType: 2
12-02 22:59:38.539 D/StatusBarPolicy( 1653): [BRIGHTHY] curNetwork=25503 curHPLMN=25503
12-02 22:59:40.569 W/ActivityManager( 1565): No content provider found for:
12-02 22:59:41.539 D/StatusBarPolicy( 1653): [BRIGHTHY] 0\. mDataNetType: 2
12-02 22:59:41.539 D/StatusBarPolicy( 1653): [BRIGHTHY] curNetwork=25503 curHPLMN=25503
12-02 22:59:41.849 V/LocationManagerService( 1565): removeUpdatesPI(intent)
12-02 22:59:41.849 V/LocationManagerService( 1565): _removeUpdates: listener = Receiver{40a6dc60 Intent PendingIntent{409acae0: PendingIntentRecord{407f8698 com.google.android.apps.maps startService}}}mUpdateRecords: {}
12-02 22:59:42.329 V/LocationManagerService( 1565): removeUpdatesPI(intent)
12-02 22:59:42.329 V/LocationManagerService( 1565): _removeUpdates: listener = Receiver{409979e8 Intent PendingIntent{407f1818: PendingIntentRecord{407f8698 com.google.android.apps.maps startService}}}mUpdateRecords: {}
12-02 22:59:42.959 V/LocationManagerService( 1565): removeUpdatesPI(intent)
12-02 22:59:42.959 V/LocationManagerService( 1565): _removeUpdates: listener = Receiver{40873420 Intent PendingIntent{40879110: PendingIntentRecord{407f8698 com.google.android.apps.maps startService}}}mUpdateRecords: {}
12-02 22:59:43.459 I/ActivityManager( 1565): Starting: Intent { act=android.intent.action.VIEW dat=file:///mnt/sdcard/FluffyBag-46.apk typ=application/vnd.android.package-archive cmp=com.android.packageinstaller/.PackageInstallerActivity } from pid 7383
12-02 22:59:44.939 I/ActivityManager( 1565): Starting: Intent { dat=file:///mnt/sdcard/FluffyBag-46.apk cmp=com.android.packageinstaller/.InstallAppProgress (has extras) } from pid 7252
12-02 22:59:45.149 W/ActivityManager( 1565): No content provider found for:
12-02 22:59:47.539 W/ActivityManager( 1565): No content provider found for:
12-02 22:59:48.699 D/StatusBarPolicy( 1653): [BRIGHTHY] 0\. mDataNetType: 2
12-02 22:59:48.699 D/StatusBarPolicy( 1653): [BRIGHTHY] curNetwork=25503 curHPLMN=25503
12-02 22:59:50.009 I/ActivityManager( 1565): Starting: Intent { act=android.intent.action.VIEW dat=file:///mnt/sdcard/FluffyBag-46.apk typ=application/vnd.android.package-archive cmp=com.android.packageinstaller/.PackageInstallerActivity } from pid 7383
12-02 22:59:52.139 I/ActivityManager( 1565): Starting: Intent { dat=file:///mnt/sdcard/FluffyBag-46.apk cmp=com.android.packageinstaller/.InstallAppProgress (has extras) } from pid 7252
12-02 22:59:52.349 W/ActivityManager( 1565): No content provider found for:
12-02 22:59:54.209 W/ActivityManager( 1565): No content provider found for:
12-02 22:59:56.699 I/ActivityManager( 1565): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.HOME] flg=0x10200000 cmp=com.lge.launcher/.Launcher } from pid 1565
12-02 23:00:00.689 D/StatusBarPolicy( 1653): [BRIGHTHY] 0\. mDataNetType: 2
12-02 23:00:00.689 D/StatusBarPolicy( 1653): [BRIGHTHY] curNetwork=25503 curHPLMN=25503
12-02 23:00:01.429 I/ActivityManager( 1565): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.xtralogic.android.logcollector/.SendLogActivity } from pid 1879
12-02 23:00:03.549 I/ActivityManager( 1565): Starting: Intent { act=android.intent.action.CHOOSER cmp=android/com.android.internal.app.ChooserActivity (has extras) } from pid 7306
12-02 23:00:03.689 D/StatusBarPolicy( 1653): [BRIGHTHY] 0\. mDataNetType: 2
12-02 23:00:03.689 D/StatusBarPolicy( 1653): [BRIGHTHY] curNetwork=25503 curHPLMN=25503
12-02 23:00:06.159 I/ActivityManager( 1565): Starting: Intent { act=android.intent.action.SEND typ=text/plain flg=0x3000000 cmp=com.android.email/.activity.MessageCompose (has extras) } from pid 7306
12-02 23:00:06.689 D/StatusBarPolicy( 1653): [BRIGHTHY] 0\. mDataNetType: 2
12-02 23:00:06.689 D/StatusBarPolicy( 1653): [BRIGHTHY] curNetwork=25503 curHPLMN=25503
12-02 23:00:09.699 D/StatusBarPolicy( 1653): [BRIGHTHY] 0\. mDataNetType: 2
12-02 23:00:09.699 D/StatusBarPolicy( 1653): [BRIGHTHY] curNetwork=25503 curHPLMN=25503
12-02 23:00:10.859 V/LocationManagerService( 1565): removeUpdatesPI(intent)
12-02 23:00:10.859 V/LocationManagerService( 1565): _removeUpdates: listener = Receiver{408f6828 Intent PendingIntent{40a97258: PendingIntentRecord{407f8698 com.google.android.apps.maps startService}}}mUpdateRecords: {}
12-02 23:00:11.329 V/LocationManagerService( 1565): removeUpdatesPI(intent)
12-02 23:00:11.339 V/LocationManagerService( 1565): _removeUpdates: listener = Receiver{40905188 Intent PendingIntent{408fb3b8: PendingIntentRecord{407f8698 com.google.android.apps.maps startService}}}mUpdateRecords: {}
12-02 23:00:11.979 V/LocationManagerService( 1565): removeUpdatesPI(intent)
12-02 23:00:11.979 V/LocationManagerService( 1565): _removeUpdates: listener = Receiver{40972030 Intent PendingIntent{409076c8: PendingIntentRecord{407f8698 com.google.android.apps.maps startService}}}mUpdateRecords: {}
12-02 23:00:12.699 D/StatusBarPolicy( 1653): [BRIGHTHY] 0\. mDataNetType: 2
12-02 23:00:12.699 D/StatusBarPolicy( 1653): [BRIGHTHY] curNetwork=25503 curHPLMN=25503
12-02 23:00:15.689 D/StatusBarPolicy( 1653): [BRIGHTHY] 0\. mDataNetType: 2
12-02 23:00:15.689 D/StatusBarPolicy( 1653): [BRIGHTHY] curNetwork=25503 curHPLMN=25503
12-02 23:00:30.689 D/StatusBarPolicy( 1653): [BRIGHTHY] 0\. mDataNetType: 2
12-02 23:00:30.689 D/StatusBarPolicy( 1653): [BRIGHTHY] curNetwork=25503 curHPLMN=25503
12-02 23:00:36.689 D/StatusBarPolicy( 1653): [BRIGHTHY] 0\. mDataNetType: 2
12-02 23:00:36.689 D/StatusBarPolicy( 1653): [BRIGHTHY] curNetwork=25503 curHPLMN=25503
--------- beginning of /dev/log/main
12-02 23:00:38.089 I/dun_service( 1475): received event(DUN_EVENT_USB_UNPLUG) in state(DUN_STATE_USB_UNPLUG)
12-02 23:00:38.089 I/dun_service( 1475): Ignoring the event DUN_EVENT_USB_UNPLUG in USB_UNPLUG_STATE
12-02 23:00:38.089 I/dun_service( 1475): Moved to state(DUN_STATE_USB_UNPLUG)
12-02 23:00:38.139 E/Tethering( 1565): <!>com.android.server.connectivity.Tethering 289<!> attempting to remove unknown iface (usb0), ignoring
12-02 23:00:38.139 D/bwx.qb  ( 4540): <!>com.bwx.qs.battery.BatteryService$BatteryStateReceiver 62<!> battery state: level=37, charging=false
12-02 23:00:38.149 D/bwx.qb  ( 4540): <!>com.bwx.qs.battery.BatteryWidget 85<!> widgets updated
12-02 23:00:39.879 V/LocationManagerService( 1565): removeUpdatesPI(intent)
12-02 23:00:39.879 V/LocationManagerService( 1565): _removeUpdates: listener = Receiver{4088c480 Intent PendingIntent{408faa70: PendingIntentRecord{407f8698 com.google.android.apps.maps startService}}}mUpdateRecords: {}
12-02 23:00:40.349 V/LocationManagerService( 1565): removeUpdatesPI(intent)
12-02 23:00:40.349 V/LocationManagerService( 1565): _removeUpdates: listener = Receiver{40800710 Intent PendingIntent{40834ba0: PendingIntentRecord{407f8698 com.google.android.apps.maps startService}}}mUpdateRecords: {}
12-02 23:00:40.989 V/LocationManagerService( 1565): removeUpdatesPI(intent)
12-02 23:00:40.989 V/LocationManagerService( 1565): _removeUpdates: listener = Receiver{4069b9c8 Intent PendingIntent{407500c0: PendingIntentRecord{407f8698 com.google.android.apps.maps startService}}}mUpdateRecords: {}
12-02 23:00:42.079 I/dun_service( 1475): Post event 1
12-02 23:00:42.079 I/dun_service( 1475): received event: DUN_EVENT_USB_UNPLUG
12-02 23:00:42.079 I/dun_service( 1475): received event(DUN_EVENT_USB_UNPLUG) in state(DUN_STATE_USB_UNPLUG)
12-02 23:00:42.079 I/dun_service( 1475): Ignoring the event DUN_EVENT_USB_UNPLUG in USB_UNPLUG_STATE
12-02 23:00:42.079 I/dun_service( 1475): Moved to state(DUN_STATE_USB_UNPLUG)
12-02 23:00:42.109 E/Tethering( 1565): <!>com.android.server.connectivity.Tethering 289<!> attempting to remove unknown iface (usb0), ignoring
12-02 23:00:42.129 D/bwx.qb  ( 4540) 
```

# css - IE8 无法使用边框框正确呈现输入

> ID：13679863
> 
> 赞同：-3
> 
> 时间：2012-12-03T08:53:13.627
> 
> 标签：css, internet-explorer-8, border-box

我有一个带有文本输入的表单，我给了那个文本输入 css-property `box-sizing: border-box; width: 100%; padding-left: 28px`。根据我能找到的所有文档，关于`border-box`IE8 应该支持这个值`box-sizing`（实际上*是 IE8 在 quirks-mode 中呈现 box-model 的方式*），并且应该始终保持这个输入为 100% 宽度，尽管它有一个填充在左边。但是，无论如何，它似乎只是将填充添加到宽度。您可以在[http://theater.dierclients.com/assets/html](http://theater.dierclients.com/assets/html)的紫色侧边栏中看到这一点。

关于为什么会发生这种情况的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T08:55:41.000

`box-sizing`是一个 CSS3 属性。它没有直接在 IE8 中实现。您需要使用以下语法：

`-ms-box-sizing`

见[http://erik.eae.net/archives/2008/03/10/21.48.10/](http://erik.eae.net/archives/2008/03/10/21.48.10/) 和[http://www.quirksmode.org/css/box.html](http://www.quirksmode.org/css/box.html)

请注意，这与`-moz-box-sizing`某些版本的 Firefox 需要使用的类似。有关详细信息，请参阅本页的浏览器兼容性部分：

[https://developer.mozilla.org/en-US/docs/CSS/box-sizing](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T09:07:10.510

我可以向您保证，IE 8 不需要前缀。请自行检查。

# java - 如何防止 Java 中的 403 HTTP 错误代码？

> ID：13679869
> 
> 赞同：4
> 
> 时间：2012-12-03T08:53:40.163
> 
> 标签：java, http, http-headers

我使用简单的代码来获取[http://www.ip-adress.com](http://www.ip-adress.com)的 html ，但它显示错误 http 代码 403。我在程序中的 google.com 等其他网站上尝试它，它可以工作。我也可以在浏览器中打开 www.ip-adress.com，为什么我不能在 java 程序中使用它。

```
 public class urlconnection
{
  public static void main(String[] args)
 {
    StringBuffer document = new StringBuffer();
    try 
    {
        URL url = new URL("http://www.ip-adress.com");
        URLConnection conn = url.openConnection();
        BufferedReader reader = new BufferedReader(new InputStreamReader(conn.getInputStream()));
        String line = null;
        while ((line = reader.readLine()) != null)
        document.append(line + " ");
        reader.close();
    }
    catch (MalformedURLException e) 
    {
        e.printStackTrace(); 
    }
    catch (IOException e)
    {
        e.printStackTrace(); 
    }
    System.out.println(document.toString());
}
}

java.io.IOException: Server returned HTTP response code: 403 for URL: http://www.ip-adress.com/

at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
at urlconnection.main(urlconnection.java:14) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:07:56.440

这是您需要的行

```
conn.setRequestProperty("User-Agent", "Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.4; en-US; rv:1.9.2.2) Gecko/20100316 Firefox/3.6.2"); 
```

参考[这个](https://stackoverflow.com/questions/2529682/setting-user-agent-of-a-java-urlconnection)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T08:57:53.667

Web 服务器可以检测到您实际上并未尝试通过 HTTP 访问它，因此它会拒绝您的请求。有一些方法可以伪造它来欺骗服务器认为你是浏览器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T08:59:40.747

我想该站点会检查用户代理标头并阻止它似乎是“机器人”。您需要模仿普通浏览器。检查此解决方案[设置 java URLConnection 的用户代理](https://stackoverflow.com/questions/2529682/setting-user-agent-of-a-java-urlconnection) 或尝试使用公共 http 客户端并设置用户代理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T09:04:10.953

我不相信这从根本上是一个 Java 问题。您正在做正确的事情来建立 HTTP 连接，并且服务器通过使用 403 响应响应您的请求，从它的角度来看正在做“正确的事情”。

让我们明确一点 - 您得到的响应是由于目标网络服务器使用的任何逻辑。

因此，如果您要问“我如何修改我的请求，以便[http://www.ip-address.com](http://www.ip-address.com)返回 200 响应”，那么人们可能会想出让服务器满意的解决方法。但这是一个特定于主机的过程；您的 Java 代码可以说是正确的，尽管它应该具有更好的错误处理能力，因为您*总是*可以获得非 2xx 响应。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T08:59:49.357

尝试将连接更改`User-Agent`为浏览器之类的东西，大多数时候我使用`Mozilla/6.0 (Windows NT 6.2; WOW64; rv:16.0.1) Gecko/20121011 Firefox/16.0.1`

# php - 是/否可变单选选项

> ID：13679870
> 
> 赞同：1
> 
> 时间：2012-12-03T08:53:41.537
> 
> 标签：php, html, forms

我正在尝试制作一个变量是/否无线电类型。我的脚本是：

```
 while ($row1 = mysql_fetch_assoc($vragen))
                {
                    $type = $row1['type'];
                    if ($type == 'kort')
                        {
                    echo '
                        <tr>
                            <td width="60%">'
                                .$row1['vraag'].'
                                <input type="hidden" name="vragen'.$aantalBranches.'[]" value="'.$row1['vraag'].'"/>
                            </td>
                            <td>
                            <input type="text" name="antwoorden'.$aantalBranches.'[]"/>
                            </td>
                        </tr>';
                        }
                    elseif ($type == 'lang')
                    {
                    echo '
                        <tr>
                            <td width="60%">'
                                .$row1['vraag'].'
                                <input type="hidden" name="vragen'.$aantalBranches.'[]" value="'.$row1['vraag'].'"/>
                                </td>       
                        <td><textarea name="antwoorden'.$aantalBranches.'[]" cols="30"rows="5"></textarea><td/>
                        </tr>';

                    }
                    elseif ($type == 'ja,nee')
                        {
                        echo'
                        <tr>
                            <td width="60%">'
                                .$row1['vraag'].'
                                </td>
                            <td>
                                <input type="radio" name="optie'.$c.'"  value="yes">Yes
                                <input type="radio" name="optie'.$c.'"  value="no">No  
                            </td>';

                            if ('optie'.$c.'' == 'yes')
                                {
                                echo'
                                <td><input type="hidden" name="vragen'.$aantalBranches.'[]" value="'.$row1['vraag'].'"/></td>
                                <td><input type="text" name="antwoorden'.$aantalBranches.'[]" value="yes"/></td>
                                </tr>';
                                }
                            else
                            {
                            echo'
                            <td><input type="hidden" name="vragen'.$aantalBranches.'[]" value="'.$row1['vraag'].'"/></td>
                            <td><input type="text" name="antwoorden'.$aantalBranches.'[]" value="no"/></td>
                            </tr>';
                            }

                        $c++;

                    }

                }

            echo '</table>';
            $aantalBranches++;
    } 
```

问题是我希望将结果存储在 $antwooden [] 的 1 个变量中，所以最合乎逻辑的方法是 if else ，但出于一个奇怪的原因，它不起作用 any1 可以帮助我吗？即使我将其更改为“是”，它现在也只显示“否”。我编辑了脚本并添加了长字段和短字段（textarea/inputfield）形式的其他选择提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:59:30.653

```
if ('optie'.$c.'' == 'yes') 
```

这部分将始终评估为**false**。

您可能不知道该变量将如何命名，因为名称取决于变量 $c 的值，这就是给您带来困难的原因。

为了克服这个问题，你可以拉出所有以'optie'字符串开头的变量，然后在你想使用它们时循环它们。你也可以像这样访问这个变量。

```
$optionname = 'optie'.$c;
$optionvalue = $$optionname;
// or
$optionvalue = $_POST[$optionname]; 
```

但一般来说，看看你的代码，它的结构非常糟糕，我会考虑重组该代码。但是如果没有更多的上下文，我无法为您提供更多关于如何执行此操作的说明。

**更新：**

只需将上述条件更改为：

```
if ($_POST['optie'.$c] === 'yes') 
```

或者，如果您使用“GET”http 请求传递“optie”变量，则将 $_POST 更改为 $_GET。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:01:03.240

它总是显示`no`，因为这永远无法评估为真：

```
if ('optie'.$c.'' == 'yes') 
```

包含的字符串`optie`将永远不会匹配`yes`。所以`else`总是输入输出`no`值的块。

# objective-c - 使用objective c和sup作为后端将无法识别的选择器发送到xcode中的实例

> ID：13679872
> 
> 赞同：0
> 
> 时间：2012-12-03T08:54:00.773
> 
> 标签：objective-c, xcode, sup

我是本机开发的初学者。我在目标 C 中使用 xcode 制作了一个项目。它构建成功。但是当我运行项目时，出现类似“无法识别的选择器发送到实例”的错误。为什么会发生这种情况？谁能帮助我解决这个问题？我附上了我遇到的错误..

![](../Images/56997953e333cdf6c06085a2ce6f6e30.png) 我正在用这个发布代码....

连接控制器.m

```
#import "ConnectionController.h"
#import "SUPApplication.h"
#import "Flight_DetailsFlightDB.h"
#import "CallbackHandler.h"

@interface ConnectionController()

@property (nonatomic,retain)CallbackHandler *callbackhandler;

@end

@implementation ConnectionController

@synthesize callbackhandler;

static ConnectionController *appConnectionController;

//Begin Application Setup

+(void)beginApplicationSetup
{

    if(!appConnectionController)
    {

        appConnectionController = [[[ConnectionController alloc]init]retain];
        appConnectionController.callbackhandler = [[CallbackHandler getInstance]retain];

    }
    if([SUPApplication connectionStatus] == SUPConnectionStatus_DISCONNECTED)

        [appConnectionController setupApplicationConnection];

    else 

        NSLog(@"Already Connected");

}

-(BOOL)setupApplicationConnection
{

    SUPApplication *app = [SUPApplication getInstance];

    [app setApplicationIdentifier:@"HWC"];
    [app setApplicationCallback:self.callbackhandler];
    NSLog(@"inside setupApp");
    SUPConnectionProperties *properties = [app connectionProperties];
    NSLog(@"server");
    [properties setServerName:@"sapecxxx.xxx.com"];
    NSLog(@"inside setupAppser");    
    [properties setPortNumber:5001];
    NSLog(@"inside setupApppot");   
    [properties setFarmId:@"0"];
    NSLog(@"inside setupAppfarm");    
    [properties setUrlSuffix:@"/tm/?cid=%cid%"];
    NSLog(@"inside setupAppurlsuff"); 
    [properties setNetworkProtocol:@"http"];

    SUPLoginCredentials *loginCred = [SUPLoginCredentials getInstance];
    NSLog(@"inside setupAppmac");    
    [loginCred setUsername:@"mac"];
    [loginCred setPassword:nil];
    [properties setLoginCredentials:loginCred];
    [properties setActivationCode:@"1234"];

    if(![Flight_DetailsFlightDB databaseExists])
    {

        [Flight_DetailsFlightDB createDatabase];

    }

    SUPConnectionProfile *connprofile = [Flight_DetailsFlightDB getSynchronizationProfile];
   [connprofile setNetworkProtocol:@"http"];
    NSLog(@"inside setupAppPort2");   
    [connprofile setPortNumber:2480];
    NSLog(@"inside setupAppser2");    
   [connprofile setServerName:@"sapecxxx.xxx.com"]; 
    NSLog(@"inside setupAppdom2");    
    [connprofile setDomainName:@"Development"];
    NSLog(@"inside setupAppuser");    
    [connprofile setUser:@"supAdmin"];
    [connprofile setPassword:@"s3pAdmin"];
    [connprofile setAsyncReplay:YES];
    [connprofile setClientId:@"0"];
  //  [Flight_DetailsFlightDB beginOnlineLogin:@"supAdmin" password:@"s3pAdmin"];

    [Flight_DetailsFlightDB registerCallbackHandler:self.callbackhandler];
    [Flight_DetailsFlightDB setApplication:app];

    if([SUPApplication connectionStatus] == SUPRegistrationStatus_REGISTERED)
    {

        [app startConnection:0];

    }
    else 
    {
        [app registerApplication:0];
    }

}

@end 
```

视图控制器.m

```
#import "Demo_FlightsViewController.h"
#import "ConnectionController.h"
#import "Flight_DetailsFlightDB.h"
#import "SUPObjectList.h"
#import "Flight_DetailsSessionPersonalization.h"
#import "Flight_DetailsFlight_MBO.h"
#import "Flight_DetailsPersonalizationParameters.h"

@interface Demo_FlightsViewController ()

@end

@implementation Demo_FlightsViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}
-(IBAction)Connect:(id)sender
{
    @try
    {
        [ConnectionController beginApplicationSetup];

    }
    @catch (NSException *exception) 
    {

        NSLog(@"ConnectionAborted");

    }

    // synchronise
}

-(IBAction)Synchronise:(id)sender
{
    @try 
    {
        [Flight_DetailsFlightDB synchronize];
        NSLog(@"SYNCHRONISED");
    }
    @catch (NSException *exception) 
    {

        NSLog(@"Synchronisation Failed");

    }

}

-(IBAction)findall:(id)sender
{

    SUPObjectList *list = [Flight_DetailsSessionPersonalization findAll];

    NSLog(@"no of lines got synchronised is %d",list.size);

}

-(IBAction)confirm:(id)sender
{

    Flight_DetailsPersonalizationParameters *pp = [Flight_DetailsFlightDB getPersonalizationParameters];
    MBOLogInfo(@"personalisation parmeter for  airline id= %@",pp.Airline_PK);
    [pp setAirline_PK:@"AA"];
    [pp save];

    while([Flight_DetailsFlightDB hasPendingOperations])
    {
        [NSThread sleepForTimeInterval:1];

    }
    NSLog(@"inside confirm............");
    [Flight_DetailsFlightDB beginSynchronize];

    Flight_DetailsFlight_MBO *flight = nil;
    SUPObjectList *cl = nil;
    cl =[Flight_DetailsFlight_MBO findAll]; 

    if(cl && cl.length > 0)
    {
        int i;
        for(i=0;i<cl.length;i++)
        {
            flight = [cl item:i];
             if(flight)
             {
                 NSLog(@"details are %@",flight.CITYFROM);
             }
        }
    }

}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

SUPConnectionProfile.h

```
#import "sybase_sup.h"
#define FROM_IMPORT_THREAD   TRUE
#define FROM_APP_THREAD      FALSE
#define SUP_UL_MAX_CACHE_SIZE 10485760

@class SUPBooleanUtil;
@class SUPNumberUtil;
@class SUPStringList;
@class SUPStringUtil;
@class SUPPersistenceException;
@class SUPLoginCertificate;
@class SUPLoginCredentials;
@class SUPConnectionProfile;

/*!
 @class SUPConnectionProfile
 @abstract   This class contains fields and methods needed to connect and authenticate to an SUP server.
 @discussion 
 */
@interface SUPConnectionProfile : NSObject
{
    SUPConnectionProfile* _syncProfile;
    SUPBoolean _threadLocal;
    SUPString _wrapperData;    
    NSMutableDictionary* _delegate;
    SUPLoginCertificate* _certificate;
    SUPLoginCredentials* _credentials;
    int32_t _maxDbConnections;
    BOOL      initTraceCalled;
}

/*!
    @method     
    @abstract   Return a new instance of SUPConnectionProfile.
    @discussion 
    @result The SUPconnectionprofile object.
*/

+ (SUPConnectionProfile*)getInstance;

/*!
 @method     
 @abstract   Return a new instance of SUPConnectionProfile.
 @discussion This method is deprecated. use getInstance instead.
 @result The SUPconnectionprofile object.
 */

+ (SUPConnectionProfile*)newInstance DEPRECATED_ATTRIBUTE NS_RETURNS_NON_RETAINED;
- (SUPConnectionProfile*)init;

/*!
 @property     
 @abstract   The sync profile.
 @discussion 
 */
@property(readwrite, retain, nonatomic) SUPConnectionProfile* syncProfile;

/*!
 @property
 @abstract The maximum number of active DB connections allowed
 @discussion Default value is 4, but can be changed by application developer.
 */
@property(readwrite, assign, nonatomic) int32_t maxDbConnections;

/*!
    @method     
    @abstract   The SUPConnectionProfile manages an internal dictionary of key value pairs. This method returns the SUPString value for a given string.
    @discussion 
    @param name The string.
*/
- (SUPString)getString:(SUPString)name;

/*!
 @method     
 @abstract   The SUPConnectionProfile manages an internal dictionary of key value pairs. This method returns the SUPString value for a given string.
 If the value is not found, returns 'defaultValue'.
 @discussion 
 @param name The string.
 @param defaultValue The default Value.
 */
- (SUPString)getStringWithDefault:(SUPString)name:(SUPString)defaultValue;

/*!
 @method     
 @abstract   The SUPConnectionProfile manages an internal dictionary of key value pairs. This method returns the SUPBoolean value for a given string.
 @discussion 
 @param name The string.
 */
- (SUPBoolean)getBoolean:(SUPString)name;

/*!
 @method     
 @abstract   The SUPConnectionProfile manages an internal dictionary of key value pairs. This method returns the SUPBoolean value for a given string.
 If the value is not found, returns 'defaultValue'.
 @discussion 
 @param name The string.
 @param defaultValue The default Value.
 */
- (SUPBoolean)getBooleanWithDefault:(SUPString)name:(SUPBoolean)defaultValue;

/*!
 @method     
 @abstract   The SUPConnectionProfile manages an internal dictionary of key value pairs. This method returns the SUPInt value for a given string.
 @discussion 
 @param name The string.
 */
- (SUPInt)getInt:(SUPString)name;

/*!
 @method     
 @abstract   The SUPConnectionProfile manages an internal dictionary of key value pairs. This method returns the SUPInt value for a given string.
 If the value is not found, returns 'defaultValue'.
 @discussion 
 @param name The string.
 @param defaultValue The default Value.
 */
- (SUPInt)getIntWithDefault:(SUPString)name:(SUPInt)defaultValue;
/*!
    @method   getUPA
    @abstract   retrieve upa from profile
    @discussion if it is in profile's dictionary, it returns value for key "upa";
                if it is not found in profile, it composes the upa value from base64 encoding of username:password;
                and also inserts it into profile's dictionary.
    @param      none
    @result     return string value of upa.
*/

- (SUPString)getUPA;

/*!
    @method     
    @abstract   Sets the SUPString 'value' for the given 'name'.
    @discussion 
    @param name The name.
    @param value The value.
*/
- (void)setString:(SUPString)name:(SUPString)value;

/*!
 @method     
 @abstract   Sets the SUPBoolean 'value' for the given 'name'.
 @discussion 
 @param name The name.
 @param value The value.
 */
- (void)setBoolean:(SUPString)name:(SUPBoolean)value;

/*!
 @method     
 @abstract   Sets the SUPInt 'value' for the given 'name'.
 @discussion 
 @param name The name.
 @param value The value.
 */
- (void)setInt:(SUPString)name:(SUPInt)value;

/*!
    @method     
    @abstract   Sets the username.
    @discussion 
    @param value The value.
*/
- (void)setUser:(SUPString)value;

/*!
 @method     
 @abstract   Sets the password.
 @discussion 
 @param value The value.
 */
- (void)setPassword:(SUPString)value;

/*!
 @method     
 @abstract   Sets the ClientId.
 @discussion 
 @param value The value.
 */
- (void)setClientId:(SUPString)value;

/*!
 @method     
 @abstract   Returns the databasename.
 @discussion 
 @param value The value.
 */
- (SUPString)databaseName;

/*!
 @method     
 @abstract   Sets the databasename.
 @discussion 
 @param value The value.
 */
- (void)setDatabaseName:(SUPString)value;
@property(readwrite,copy, nonatomic) SUPString databaseName;

/*!
 @method     
 @abstract   Gets the encryption key.
 @discussion 
 @result The encryption key.
 */
- (SUPString)getEncryptionKey;

/*!
 @method     
 @abstract   Sets the encryption key.
 @discussion 
 @param value The value.
 */
- (void)setEncryptionKey:(SUPString)value;

@property(readwrite,copy, nonatomic) SUPString encryptionKey;

/*!
 @property
 @abstract The authentication credentials (username/password or certificate) for this profile.
 @discussion
 */
@property(retain,readwrite,nonatomic) SUPLoginCredentials *credentials;
/*!
 @property     
 @abstract   The authentication certificate.
 @discussion If this is not null, certificate will be used for authentication.  If this is null, credentials property (username/password) will be used.
 */
@property(readwrite,retain,nonatomic) SUPLoginCertificate *certificate;
@property(readwrite, assign, nonatomic) BOOL initTraceCalled;

/*!
 @method     
 @abstract   Gets the UltraLite collation creation parameter
 @discussion 
 @result conllation string
 */
- (SUPString)getCollation;

/*!
 @method     
 @abstract   Sets the UltraLite collation creation parameter
 @discussion 
 @param value The value.
 */
- (void)setCollation:(SUPString)value;

@property(readwrite,copy, nonatomic) SUPString collation;

/*!
 @method     
 @abstract   Gets the maximum cache size in bytes; the default value for iOS is 10485760 (10 MB).
 @discussion 
 @result max cache size
 */
- (int)getCacheSize;
/*!
 @method     
 @abstract   Sets the maximum cache size in bytes.
 @discussion For Ultralite, passes the cache_max_size property into the connection parameters for DB connections; For SQLite, executes the "PRAGMA cache_size" statement when a connection is opened.
 @param cacheSize value
 */
- (void)setCacheSize:(int)cacheSize;

@property(readwrite,assign, nonatomic) int cacheSize;
/*!
    @method     
    @abstract   Returns the user.
    @discussion 
    @result The username.
*/
- (SUPString)getUser;
/*!
 @method     
 @abstract   Returns the password hash value.
 @discussion 
 @result The password hash value.
 */

- (NSUInteger)getPasswordHash;
/*!
 @method     
 @abstract   Returns the password.
 @discussion 
 @result The password hash value.
 */

- (NSString*)getPassword;

/*!
 @method     
 @abstract   Adds a new key value pair.
 @discussion 
 @param key The key.
 @param value The value.
 */
- (void)add:(SUPString)key:(SUPString)value;

/*!
    @method     
    @abstract   Removes the key.
    @discussion 
    @param key The key to remove.
*/

- (void)remove:(SUPString)key;
- (void)clear;

/*!
 @method     
 @abstract   Returns a boolean indicating if the key is present.
 @discussion 
 @param key The key.
 @result The result indicating if the key is present.
 */
- (SUPBoolean)containsKey:(SUPString)key;

/*!
 @method     
 @abstract   Returns the item for the given key.
 @discussion 
 @param key  The key.
 @result The item.
 */
- (SUPString)item:(SUPString)key;

/*!
 @method     
 @abstract   Returns the list of keys.
 @discussion 
 @result The keylist.
 */
- (SUPStringList*)keys;

/*!
 @method     
 @abstract   Returns the list of values.
 @discussion 
 @result The value list.
 */
- (SUPStringList*)values;

/*!
 @method     
 @abstract   Returns the internal map of key value pairs.
 @discussion 
 @result The NSMutableDictionary with key value pairs.
 */
- (NSMutableDictionary*)internalMap;
/*!
 @method     
 @abstract   Returns the domain name.
 @result The domain name.
 @discussion
*/
- (SUPString)getDomainName;

/*!
 @method     
 @abstract   Sets the domain name.
 @param value The domain name.
 @discussion 
 */
- (void)setDomainName:(SUPString)value;

/*!
 @method     
 @abstract   Get async operation replay property. Default is true.
 @result YES : if ansync operation replay is enabled; NO: if async operation is disabled.
 @discussion  
 */
- (BOOL) getAsyncReplay;

/*!
 @method     
 @abstract   Set async operation replay property. Default is true.
 @result value: enable/disable async replay operation.
 @discussion  
 */

- (void) setAsyncReplay:(BOOL) value;

/*!
 @method     
 @abstract   enable or disable the trace in client object API.
 @param enable - YES: enable the trace; NO: disable the trace.
 @discussion 
 */
- (void)enableTrace:(BOOL)enable;

/*!
 @method     
 @abstract   enable or disable the trace with payload info in client object API.
 @param enable - YES: enable the trace; NO: disable the trace.
 @param withPayload = YES: show payload information; NO: not show payload information.
 @discussion 
 */
- (void)enableTrace:(BOOL)enable withPayload:(BOOL)withPayload;

/*!
 @method     
 @abstract   initialize trace levels from server configuration.
 @discussion 
 */

- (void)initTrace;

- (void)dealloc;

/* ultralite/mobilink required parameters */
- (SUPString)getNetworkProtocol;
- (void)setNetworkProtocol:(SUPString)protocol;
- (SUPString)getNetworkStreamParams;
- (void)setNetworkStreamParams:(SUPString)stream;
- (SUPString)getServerName;
- (void)setServerName:(SUPString)name;
- (int)getPortNumber;
- (void)setPortNumber:(int)port;
- (int)getPageSize;
- (void)setPageSize:(int)size;

@end

@interface SUPConnectionProfile(internal)

- (void)applyPropertiesFromApplication;

@end 
```

我们正在使用 SUP 2.1.3 库文件。请检查代码并帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:07:14.333

There is an object of the class SUPConnectionProfile to which you are sening a selector (resp. calling a member function) named setNetworkProtocol with one ojbect as parameter. However there is no such method implemented - at least none with 1 object as parameter.

# javascript - 是否可以使用 require.js 将非模块 *.js 文件设置为依赖项

> ID：13679877
> 
> 赞同：0
> 
> 时间：2012-12-03T08:54:18.977
> 
> 标签：javascript, requirejs, amd

我们不使用 require.js 在 js 源代码上实现模块，但我想将它用于测试。还有一个问题：我无法实现原始 *.js 文件作为其他模块的依赖项。是否可以？

我的意思是：在它之后加载一些 *.js 文件和模块（以测试它）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:35:28.720

# `define`工作原理

我将 require.js 用于实现和测试。在执行模块函数*之前*，您可以使用`define`.

```
define(["test/myTest.js", "test/anotherTest.js"], function(test1, test2) {
  // perform your tests
}); 
```

# 如何使用`requirejs`asyncTests

您还可以*在*模块函数中加载依赖项*后*加载代码，使用. 我将它与*QUnit*一起使用。这是我的代码中的一个示例。*`require`*

 **首先，确保 QUnit 测试运行程序默认停止（这与其他测试框架类似）。这样，您可以定义何时运行测试（即在您加载相关代码之后）。

`QUnit.config.autostart = false`

其次，您将测试定义为一个模块。该模块加载依赖项，然后定义测试，然后加载要测试的代码。仅当代码是自动执行且无法预先加载时才需要这样做（在这种情况下，您可以使用 define 并完成它）。这是我使用`Chaplin`库的示例（用 CoffeeScript 编写）。

```
define(['chaplin'], function(chaplin) {
  asyncTest("publish startup complete event", function() {
    chaplin.mediator.subscribe("startup~complete", function() {
      ok(true, "startup~complete event fired");
    });
    return requirejs(['modules/startup/startup'], function() {
      start();
    });
  });
}); 
```

重要的部分是最后一次`requirejs`通话。它在定义测试后加载要测试的代码。

# 动态加载依赖

编辑：回应评论假设存在一个名为`config`包含配置数据的模块。我也假设了某种格式，所以如果你的格式不同，你可以做一些小的改动。不过，这些原则是正确的。

```
define(["config"], function(config) {
  // assuming config.modules is an array of all development modules,
  // config.devPath is the base bath to development modules,
  requirejs(
    config.modules.map(function(module){
      return config.devPath + module
    })
  , function() {
    // all modules loaded, now go on
    // however, no reference to modules left, so need to work with `arguments` array
  });
}); 
```

但是，您应该知道在回调函数中丢失了对模块的引用。**

# sed - 在每次出现的两个字符之间插入

> ID：13679878
> 
> 赞同：3
> 
> 时间：2012-12-03T08:54:23.073
> 
> 标签：sed

如果我可以在我的输入中的某个地方有一系列两个或更多字符（在我的情况下，`>`），我如何在**每次**出现之间插入一些东西`>`？

例如：`>>`to `>foo>`，但也： `>>>`to`>foo>foo>`和： `>>>>`to `>foo>foo>foo>`。

使用`'s/>>/>foo>/g'`当然给了我`>foo>>foo>`，这不是我需要的。

换句话说，我怎样才能将一个字符推回模式空间，或者匹配一个字符而不消耗它（这有什么意义吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:40:03.790

这也应该有效

```
sed ':b; s/>>/>foo>/; tb' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T11:24:14.917

使用 Perl，您可以迭代地完成它

```
$ echo '>>>>' | perl -pe 's/>>/>foo>/ while />>/'
>foo>foo>foo> 
```

或使用不消耗第二个的前瞻断言`>`

```
$ echo '>>>>' | perl -pe 's/>(?=>)/>foo/g'
>foo>foo>foo> 
```

# excel - CakePHP 2.1 excel文件导出和导入到数据库

> ID：13679879
> 
> 赞同：-1
> 
> 时间：2012-12-03T08:54:36.483
> 
> 标签：excel, export-to-excel, cakephp-2.1, import-from-excel

我正在使用 cakephp 2.1 并开发需要更多数据的应用程序。我想使用 excel 文件进行导入和导出。请建议我一些解决方案来完成它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:55:18.700

使用[Microsoft 的“CSV for Excel”](http://office.microsoft.com/en-us/excel-help/import-or-export-text-txt-or-csv-files-HP010099725.aspx)来导入数据。它与通用 CSV 相同，但分隔符不同。如果你想创建复杂的 Excel 表格，那么你应该使用[PHPExcell 之](http://phpexcel.codeplex.com/)类的东西。

你问题上的 -1 是错误地问它。一个快速的谷歌搜索会产生与我输入相同的结果......

# git - 从 git 分支中删除提交

> ID：13679881
> 
> 赞同：0
> 
> 时间：2012-12-03T08:54:51.783
> 
> 标签：git, git-rebase

git 版本 1.7.5.4

```
commit 142e37219a68955ded79fbd9faa83cb4585b02ca
Merge: 6e9b88f 1b141fd
Author: Steve
Date:   Wed Oct 31 10:56:51 2012 +0700

    Merge branch 'dev-video' into 'dev-video_res-management'

commit 1b141fd4ca697d1626da807bc32325a657544678
Author: Steve 
Date:   Wed Oct 31 10:42:41 2012 +0700

    FIXED: 
```

无论如何我可以删除提交提交commit 142e3

出于某种原因，我遇到了该提交的问题，我想删除，这样我就可以在没有它的情况下进行测试。

当我尝试时：

```
git rebase i 142e3 
```

看不到，只能看到前后的：

```
pick 6e9b88f FIXED: ...
pick 1b141fd FIXED: ... 
```

我问的原因是因为我将它合并到另一个分支中，我不确定它是否可以删除。

非常感谢您的任何建议，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:58:17.570

使用[git revert](http://www.kernel.org/pub/software/scm/git/docs/git-revert.html)：

```
git revert 142e3 
```

# tcp - 从字节数组中读取字段

> ID：13679886
> 
> 赞同：0
> 
> 时间：2012-12-03T08:55:19.637
> 
> 标签：tcp, inputstream, bytebuffer

我正在尝试通过 tcp 发送消息。不幸的是，这不起作用，因此我创建了以下代码用于测试目的：

```
 public void sendQuestion(String text) {
        // Set timestamp.
        SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss");
        TimeZone tz = TimeZone.getTimeZone("GMT+01:00");
        df.setTimeZone(tz);
        String date = df.format(new Date());

        byte[] dateStr = date.getBytes();

        // Set payload.
        String payloadTemp = date + text;
        byte[] payload = payloadTemp.getBytes();

        // Send the payload.
        clientOutputThread.send(1, payload);

           ....
    }   

 public void send(byte type, byte[] payload) {
            // Calculate and set size of message.
            ByteBuffer bufferTemp = ByteBuffer.allocate(4);
            bufferTemp.order(ByteOrder.BIG_ENDIAN);
            byte[] payloadSize = bufferTemp.putInt(payload.length).array();

            byte[] buffer = new byte[5 + payload.length];

            System.arraycopy(payloadSize, 0, buffer, 0, 4);
            System.arraycopy(payload, 0, buffer, 5, payload.length);

            // Set message type.
            buffer[4] = type;

            // TEST: Try reading values again

            ByteBuffer bb = ByteBuffer.wrap(buffer);  
            // get all the fields:
            int payload2 = bb.getInt(0);  // bytes 0-3
                                         // byte 4 is the type
            byte[] tmp = new byte[19]; // date is 19 bytes
            bb.position(5);
            bb.get(tmp); 
            String timestamp = tmp.toString();
            byte[] tmp2 = new byte[payload2-19];
            bb.get(tmp2); // text
            String text = tmp2.toString();

                    ....
} 
```

不幸的是，我读到的时间戳和文本是垃圾，有点像“[B@44f39650”。为什么？我读错了吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:39:46.393

"[B@44f39650" 是调用`toString()`字节数组对象的结果。你在这里做什么：

```
String timestamp = tmp.toString(); 
```

所以不要那样做。`String,`如果您必须这样做，请使用为此目的提供的 String 构造函数将字节数组转换为 a 。

`DataOutputStream`但是，您确实应该`DataInputStream`为此目的使用 API。

# performance - 对数增长

> ID：13679892
> 
> 赞同：1
> 
> 时间：2012-12-03T08:55:45.840
> 
> 标签：performance, logarithm

> **可能重复：**
> [Big O 的简单英文解释](https://stackoverflow.com/questions/487258/plain-english-explanation-of-big-o)

[关于对数增长](http://en.wikipedia.org/wiki/Logarithmic_growth)的维基百科文章是一个存根。我在stackoverflow上读到的许多答案都澄清了一个过程或函数是如何基于对数函数使用的`0`（我假设[见下文]它是0 [零]而不是O [作为M，N，O的字母,P,Q]，但如果它是错误的，请更正我的假设）和一个`n`or `N`。

有人可以更好地解释与常见计算解释有关的对数解释吗？也许以秒为单位的时间（也欢迎毫秒，只是试图在现实生活中的时间差异中概念化它......），大小和/或重量方面？

我经常看到以下内容：（请随意包括其他内容）

*   O(1)
*   在）

*我的假设是基于代码块外部的 0 [零] 没有斜杠，而`inside a code block a 0 does have a slash through it`.*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:01:05.037

这意味着执行时间（或其他资源）是数据量的某种函数。假设你需要 5 分钟才能炸毁 10 个气球。如果函数是 O(1)，那么炸掉 50 个气球也需要 5 分钟。如果是 O(n)，那么炸掉 50 个气球需要 25 分钟。

O(log n) 意味着随着事情的扩大，管理更大的 n 变得更容易（它遵循对数增长）。假设您想在 f(n) 个项目的目录中找到一个地址。假设搜索一个包含 100 个条目的目录需要 6.64 秒。[6.64 = log_2(100)] 那么搜索 200 个条目可能只需要 7.64 秒。这就是逻辑增长。

# java - 独立的 JavaFX 应用程序

> ID：13679895
> 
> 赞同：5
> 
> 时间：2012-12-03T08:55:56.543
> 
> 标签：java, javafx

是否可以创建一个独立的可执行 JAR 来使用`JavaFX`它`GUI`？

我想创建一个应用程序并将其发送给仅`JRE 6`安装了该应用程序的朋友。

请注意，该解决方案必须与 Maven 或 Gradle 兼容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:08:29.227

JavaFX 支持创建独立的本机包。

请参阅[http://docs.oracle.com/javafx/2/deployment/self-contained-packaging.htm#BCGIBBCI](http://docs.oracle.com/javafx/2/deployment/self-contained-packaging.htm#BCGIBBCI)

# javascript - 在 RaphaelJS 元素中添加 HTML

> ID：13679899
> 
> 赞同：2
> 
> 时间：2012-12-03T08:56:14.723
> 
> 标签：javascript, html, raphael

我正在使用以下简单的 RaphaelJS 代码在我的 html 页面内创建一个圆圈。我想问是否有某种方法可以在我刚刚用 Raphael 绘制的圆圈内添加我自己的 html。

**在对象内添加文本看起来可以使用绝对定位，但我如何在圆**（或矩形等）内添加我自己的 html，例如 div、图像或其他东西，最好不要使用绝对定位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:31:27.073

看看[RaphaelJS-Infobox](https://github.com/kreynolds/RaphaelJS-Infobox)：

> 这是一个简单的 JS 助手，可以自动在 RaphaelJS 容器中放置 HTML 元素。

请测试并告诉我，这是一个简单的例子：

```
var paper = Raphael("raphael-canvas", 500, 500);
var infobox = new Infobox(paper, {x:10,y:10, width:250, height:250});
infobox.div.html('<p>This is some crazy content that goes inside of that box that will wrap around.</p>'); 
```

希望这有足够的帮助。

# css - 溢出内溢出隐藏&定位相对祖父母

> ID：13679901
> 
> 赞同：2
> 
> 时间：2012-12-03T08:56:22.327
> 
> 标签：css, drop-down-menu, position, overflow

我有这个下拉菜单，由于#parent-wrapper 的溢出隐藏和相对位置（由于这个jQuery carousel 是必需的）而被切断。有没有办法让下拉列表的溢出部分显示在#parent-wrapper 之外，同时保持#parent-wrapper 的溢出隐藏和相对位置？

简单的例子：

[http://jsfiddle.net/gNUJV/](http://jsfiddle.net/gNUJV/)

完整示例：

[http://jsfiddle.net/nrQSG/](http://jsfiddle.net/nrQSG/)

```
<div id="parent-wrapper">
  <div id="parent">
    <ul>
      <li class="dropdown">
        <a href="#">Lorem</a>
        <ul>
          <li><a href="#">Ipsum</a></li>
          <li><a href="#">Dolor</a></li>
        </ul>
      </li>
    </ul>
  </div>
</div> 
```

和

```
a {
  color: white;
}
#parent-wrapper {
  width: 500px;
  overflow: hidden;
  position: relative;
}
#parent {
  height: 100px;
  overflow: hidden;
  background: blue;
}
.dropdown ul {
  width: 100px;
  display: none;
  padding: 50px;
  background: black;
  z-index: 2000;
  position: absolute;
} 
```

和

```
$(".dropdown").hoverIntent({
  over: function() {
    $("ul", this).show();
  },
  out: function() {
    $("ul", this).hide();
  },
  timeout: 500
}); 
```

要求：[http ://cherne.net/brian/resources/jquery.hoverIntent.minified.js](http://cherne.net/brian/resources/jquery.hoverIntent.minified.js)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:20:55.773

在悬停时为#parent-wrapper 添加一个高度，它将展开。

```
$(".dropdown").hoverIntent({
 over: function() {
   $("ul", this).show().closest('#parent-wrapper').css('height','100px');
}....... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T04:53:46.050

位置：相对是这里的问题孩子。如果您可以重新编写代码以使用 Position: Absolute 我认为它可能会起作用。请参阅以下内容以获取更多详细信息...

[CSS：如何在位置中有位置：绝对 div：相对 div 不会被溢出裁剪：隐藏在容器上](https://stackoverflow.com/questions/2243245/css-how-to-have-positionabsolute-div-inside-a-positionrelative-div-not-be-cro?rq=1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-24T14:13:08.753

我认为您可以在不使用 jquery 的情况下通过为下拉列表提供固定位置而不是绝对位置来实现此目的。

```
.dropdown ul {
  ...
  position: fixed;
} 
```

此外，如果您的下拉菜单中有两个以上的项目，下拉菜单将自动扩展。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T09:03:59.820

```
#parent-wrapper {
  width: 500px;
  /*change this: overflow:hidden; for: */
  overflow: visible;
  position: relative;
} 
```

# xslt - Read values from xml using xsl

> ID：13679903
> 
> 赞同：0
> 
> 时间：2012-12-03T08:56:28.443
> 
> 标签：xslt

```
 <checkpoints checkpoint_count="1">
      <checkpoint checkpoint_name="New CheckPoint" ignore_blank_lines="false" modified_complexity="false" checkpoint_date="1999-08-31">         
          <file file_name="Plugin.java">
            <metrics metric_count="15">
              <metric id="M0">57</metric>
              <metric id="M1">17</metric>
              <metric id="M2">0.0</metric>
              <metric id="M3">3</metric>
              <metric id="M4">47.4</metric>
              <metric id="M5">1</metric>
              <metric id="M6">5.00</metric>
              <metric id="M7">1.20</metric>
              <metric id="M8">20</metric>
              <metric id="M9">CheatsheetsPlugin.getImageDescriptor()</metric>
              <metric id="M10">1</metric>
              <metric id="M11">21</metric>
              <metric id="M12">2</metric>
              <metric id="M13">1.05</metric>
              <metric id="M14">1.00</metric>
            </metrics>
        </file>
 </checkpoint>
</checkpoints> 
```

This is my xml file. I want to read value of `metric id='M14'`. ie. **1.00**
How to read the content of this tag?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:24:44.007

**Use**:

```
/*/*/*/*/metric[@id = 'M14']/text() 
```

This selects any child text node (in this case just one) of any `metric` element that is a grand-grand-child of the top element and whose (of the `metric` element) `id` attribute has as string value the string `'M14'`.

# build - 阻止 TfsSource 签入没有挂起更改的文件？

> ID：13679907
> 
> 赞同：1
> 
> 时间：2012-12-03T08:56:59.563
> 
> 标签：build, tfs

我在构建脚本中遇到了活动“TfsBuildExtensions.Activities.TeamFoundationServer.TfsAction.Checkin”的问题。在我的 TFS 设置中，我有很多依赖复制正在进行，它的工作原理就像一个魅力......但它在每次构建后检查文件的“新版本”，即使它认识到“没有待处理的更改在构建日志中找到”，并且历史日志中充满了许多构建脚本签入。

知道如何解决这个问题吗？

TfsBuildExtensions.Activities.TeamFoundationServer.TfsAction.Checkin 似乎在属性中没有 /force 选项:(

可惜我是新会员，不能发图：）

提前致谢。

# mysql - mysql返回单行和多行的状态

> ID：13679908
> 
> 赞同：0
> 
> 时间：2012-12-03T08:57:06.383
> 
> 标签：mysql

为模糊的问题标题道歉，但不确定正确的措辞，如果需要，请更正。

我有以下 MySQL 查询，它将我的几个表连接在一起。

```
select distinct(o.person), 
    o.job,
    p.risk,
    r.training,
    case when c.datecompleted  is null then 'no' else 'yes' end TrainingCompleted,
    case when c.expirydate is null then '' else c.expirydate end expirydate
from 
    orgstructure o 
    join personrisks p on p.Person=o.person
    right outer join risktraining r on r.risk=p.risk
    left outer join coursescompleted c on c.course=r.training and c.person=o.person
where o.department='house keeping' and o.person <> ''
order by o.person desc 
```

它产生以下结果：

![在此处输入图像描述](../Images/c394f2ac4f6c653ecfb9f8f17b7e1a92.png)

结果，您可以看到每个风险都有两个解决风险的培训解决方案。我想返回另一个`status`查看每个培训和培训完成字段的列，如果其中一个培训已完成，则 status `good`else status `bad`。所以我的输出在这个例子中对于每个风险只有两行。如果没有完成任何培训，则显示任何`training`需要的价值。

理想输出：

![在此处输入图像描述](../Images/b4ab6cf07d2d57cf942a7a925caec03e.png)

如何编辑此查询以获得所需的结果。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:46:44.120

最简单的方法是

```
select 
    o.person,
    o.job,
    p.risk,
    case when count(c.datecompleted) > 0 then null else r.training end as training,
    case when count(c.datecompleted) > 0 then 'yes' else 'no' end as TrainingCompleted,
    case when count(c.datecompleted) > 0 then 'good' else 'bad' end as Status
from orgstructure o 
    join personrisks p on p.Person=o.person
    right outer join risktraining r on r.risk=p.risk
    left outer join coursescompleted c on c.course=r.training and c.person=o.person
where o.department='house keeping' and o.person <> ''
group by o.person
order by o.person desc, case when c.datecompleted is not null then 0 else 1 end asc 
```

如果任一培训完成，这里我不会显示培训。

[**SQL 提琴示例**](http://sqlfiddle.com/#!2/0035a/2)

# android - 无法单击带有列表视图的底部按钮

> ID：13679912
> 
> 赞同：0
> 
> 时间：2012-12-03T08:57:18.323
> 
> 标签：android, android-listview, android-fragments

这是我的 my_lifts_list.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="wrap_content" 
 android:layout_height="wrap_content"
    android:orientation="vertical"
 android:background="@drawable/white_linen">

    <LinearLayout android:id="@+id/bottom_control_bar"
        android:layout_width="fill_parent" android:layout_height="wrap_content"
        android:layout_alignParentBottom="true">
        <Button android:id="@+id/bookButton" android:layout_width="fill_parent"
            android:layout_height="wrap_content" android:text="@string/bookRide"
            android:onClick="bookRide"/>
    </LinearLayout>

   <ListView 
      android:id="@+id/android:list" 
      android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_above="@id/bottom_control_bar"
      android:divider="#b5b5b5"
      android:dividerHeight="3dp"
      android:listSelector="@drawable/custom_list_selector"/>
   <TextView
    android:id="@+id/android:empty"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:text="You have not joined any rides."/>     
</RelativeLayout> 
```

这是我的片段活动：

```
public class LiftActivity extends FragmentActivity {

    private static final String TAG = LiftActivity.class.getName();

    private ArrayList<Lift> mLifts = new ArrayList<Lift>();

    private LiftArrayAdapter mAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.my_lift_list);

        mAdapter = new LiftArrayAdapter(this, R.layout.ride_item_card, mLifts);

        FragmentManager     fm = getSupportFragmentManager();
        FragmentTransaction ft = fm.beginTransaction();

        LiftListFragment list = new LiftListFragment();
        ft.add(android.R.id.content, list);

        list.setListAdapter(mAdapter);

        MyLiftsResponderFragment responder = (MyLiftsResponderFragment) fm.findFragmentByTag("RESTResponder");

        if (responder == null) {
            responder = new MyLiftsResponderFragment(); 
            ft.add(responder, "RESTResponder");
        }

        ft.commit();
    }

    public void bookRide(View v){
        Intent intent = new Intent(this, LiftSearchActivity.class);
        startActivity(intent);
    }

    public LiftArrayAdapter getArrayAdapter() {
        return mAdapter;
    }
} 
```

我的liftlistfragment：

```
public class LiftListFragment extends ListFragment {

    private static final String TAG = LiftListFragment.class.getName();

    private static final int ACTIVITY_VIEW_LIFT = 0;

    @Override
    public void onListItemClick(ListView list, View v, int position, long id) {
        Lift item = (Lift) getListAdapter().getItem(position);
        Intent intent = new Intent(this.getActivity(), LiftDetailActivity.class);
        intent.putExtra("lift", item.getId());
        intent.putExtra("time", item.getTime());
        intent.putExtra("price", item.getPrice());
        startActivity(intent);
    }

} 
```

最后，我的电梯列表适配器：

```
public class LiftArrayAdapter extends ArrayAdapter<Lift> {

    private final ArrayList<Lift> lifts;

    public LiftArrayAdapter(Context context, int textViewResourceId, ArrayList<Lift> results) {
        super(context, textViewResourceId, results);
        this.lifts = results;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // assign the view we are converting to a local variable
        View v = convertView;

        // first check to see if the view is null. if so, we have to inflate it.
        // to inflate it basically means to render, or show, the view.
        if (v == null) {
            LayoutInflater inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = inflater.inflate(R.layout.ride_item_card, null);
        }

        Lift i = lifts.get(position);

        if (i != null) {

            ImageView imageView = (ImageView) v.findViewById(R.id.list_image);

            TextView departureDate = (TextView) v.findViewById(R.id.departureDate);
            TextView driverName = (TextView) v.findViewById(R.id.driverName);
            TextView placesRemaining = (TextView) v.findViewById(R.id.placesRemaining);
            TextView ridePrice = (TextView) v.findViewById(R.id.ridePrice);

            imageView.setTag(i.getDriver().getImage());

            ImageLoader image = new ImageLoader();
            image.execute(imageView);

            if (departureDate != null){
                departureDate.setText(i.getFrom().getDescription() + " vers " + i.getTo().getDescription());
            }
            if (driverName != null){
                driverName.setText(i.getTime());
            }
            if (placesRemaining != null){
                placesRemaining.setText("Places remaining : " + Integer.toString(i.getCapacity() - i.getPassengers().size()));
            }
            if (ridePrice != null){
                ridePrice.setText("$" + Float.toString(i.getPrice()));

            }
        }

        // the view must be returned to our activity
        return v;

    }
} 
```

所以基本上，我有我的项目列表（可以点击）和底部的按钮是不可点击的。

我不明白为什么我不能让这个按钮工作。如果我使用键盘，我可以选择它。我认为它必须是一些片段问题，我的 listfragment 和我的 activityfragment 之间的 onclicklistener 使用（所以，可能我的按钮充当一个项目）。有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:12:39.490

您为您的活动设置布局文件，然后将您的`LiftListFragment`片段直接添加到将覆盖*整个*先前设置的布局`FragmentActivitiy`的内容`Framelayout`（具有 id ）。您确定不希望像这样添加到布局文件中吗？：`android.R.id.content`*`LiftListFragment``my_lifts_list.xml`*

 *```
<RelativeLayout>
   // the button part
   <FrameLayout android:id="@+id/liftfrag_wrapper" android:layout_above="@id/the_button" // other attributes/>
</RelativeLayout> 
```

然后在您的代码中：

```
ft.add(R.id.liftfrag_wrapper, list); 
```*

# perl - Perl 获取获取文件的 md5 哈希

> ID：13679914
> 
> 赞同：-1
> 
> 时间：2012-12-03T08:57:33.047
> 
> 标签：perl, download, md5

我正在尝试创建使用模块[File::Fetch](http://cpan.uwinnipeg.ca/htdocs/File-Fetch/File/Fetch.pm.html)下载的文件的哈希。我正在尝试将下载的文件名及其哈希作为记录存储在数据库中。但是，File::Fetch 对象的任何方法都没有提供下载的文件。有没有办法将文件下载到变量中以创建它的哈希？

这是我的代码片段，

```
eval{
    $uri_handle = File::Fetch->new(uri => $nurl) or die "Could'nt create fetch object\n";
    $getfile = $uri_handle ->output_file or die "There is no file to be fetched\n";
    my $dir_handle = $uri_handle->fetch( to => $dir2 ) or die "Couldn't fetch file: $uri_handle->error\n";
    # print "$getfile was successfully saved to $dir\n";
};
if ($@){
        print "\n There is no file at $url\n\n";            
}else{              
    my $file_data_handle = DBI->connect($database_connection_string,$database_user,$database_pass) or die "Couldn't open database: $DBI::errstr\n";
    my $file_statement_handle = $file_data_handle->prepare('insert into files (filename,filehash,sourceurl,originalurl) VALUES ($getfile,$filehash,$nurl,$url)') or die "Couldn't prepare statement: $DBI::errstr\n";
    $file_statement_handle->execute() or die "Couldn't execute statement: $DBI::errstr\n";
    $file_data_handle->disconnect();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:39:41.757

它直接将结果写入磁盘。请改用 LWP。

```
use Digest::MD5    qw( md5_hex );
use LWP::UserAgent qw( );

my $ua = LWP::UserAgent->new();
my $response = $ua->get($url);
die $response->status_line if !$response->is_success;
my $file = $response->decoded_content( charset => 'none' );
my $md5_hex = md5_hex($file); 
```

# mysql - 带有 SET 和 UPDATE 子句的 WHERE 子句

> ID：13679915
> 
> 赞同：1
> 
> 时间：2012-12-03T08:57:33.713
> 
> 标签：mysql, sql, triggers, where, where-clause

我必须开始，这里有很多例子，但没有一个适用于我必须使用的多个（在我的情况下为 3）表。

这样做的想法是：当我更新我的一个表（事物）时，我希望我的触发器自动将另一个表（当前）更新为 2 列（来自 dudes 表的薪水和来自事物的 thing_cost）的乘积值到列 curr_cash .

我希望它看起来像：

```
Money : Date : Id1 (id of person) : Id2 (Id of thing) 
```

例子：

```
400 03-12-12 34 3
300 03-12-12 34 2
400 03-12-12 4 3 
```

等等。

目前，我的触发器所做的是将所有内容汇总并将其与购买某物的人相关联。逻辑失败。

这是我的触发器的代码：

```
create trigger money after update on `things`
for each row
begin
SET @c1 = (SELECT sum(`thing_cost`) from `things`);
SET @c2 = (SELECT sum(`salary`) from `dude_base`);
UPDATE `current` SET `curr_cash` = @c1 * @c2 / 100
end;
$$ 
```

我需要添加这样的东西而不是总和：

```
WHERE id2 from things = id2 from current AND WHERE id1 from dude_base = is1 from current 
```

但是我的语法失败得很惨。我在 xampp (phpmyadmin) 上研究 MySQL。

总而言之，我必须知道一个花花公子买了什么（确切的 id），以及什么东西（确切的 id）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:59:48.137

你可以这样`JOIN`做：

```
UPDATE `current` c 
INNER JOIN things    t ON c.id2 = t.id2
INNER JOIN dude_base d ON d.id1 = c.is1
SET c.`curr_cash` = t.thing_cost * d.salary / 100; 
```

# .htaccess - 内部 htaccess 重定向与直接导航

> ID：13679920
> 
> 赞同：0
> 
> 时间：2012-12-03T08:57:57.463
> 
> 标签：.htaccess

我有一个用于移动检测的 .htaccess 重定向脚本：

```
RewriteEngine on

RewriteCond %{HTTP_USER_AGENT} (iphone|android|nokia|BlackBerry) [NC]
RewriteCond $1 !^mobile/ [NC]
RewriteRule ^(.*)$ http://www.example.com/mobile/ [R=301,L] 
```

当我被重定向到移动网站时，我的链接不起作用，指向：

```
www.example.com/img0.jpg 
```

如果我通过浏览直接导航到该站点：

```
www.example.com/mobile/ 
```

链接工作完美。

我在影响此链接的 .htaccess 文件中缺少什么？

谢谢。

编辑：

我使用了您的脚本，然后将其添加到移动目录中，不完全确定它为什么起作用，但确实如此！

```
RewriteEngine On 
RewriteCond %{HTTP_HOST} ^(www\.)?mobile\.example\.com$ 
RewriteCond %{REQUEST_URI} example.com/mobile 
RewriteRule ^(.*)$ /mobile/$1 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:02:23.193

尝试这个：

```
RewriteEngine on

RewriteCond %{HTTP_USER_AGENT} (iphone|android|nokia|BlackBerry) [NC]
RewriteCond $1 !^mobile/$1 [NC]
RewriteRule ^(.*)$ http://www.example.com/mobile/$1 [R=301,L] 
```

# ios - Dashed line border around UIView

> ID：13679923
> 
> 赞同：173
> 
> 时间：2012-12-03T08:58:33.077
> 
> 标签：ios, objective-c, iphone, uiview

How do I add dashed line border around `UIView`.

Something Like this

![](../Images/1274cf9f961d999edebfb22faa08cae5.png)

* * *

## 回答 #1

> 赞同：275
> 
> 时间：2013-03-06T23:49:42.313

Another method if you like sublayers. In your custom view's init, put this (_border is an ivar):

```
_border = [CAShapeLayer layer];
_border.strokeColor = [UIColor colorWithRed:67/255.0f green:37/255.0f blue:83/255.0f alpha:1].CGColor;
_border.fillColor = nil;
_border.lineDashPattern = @[@4, @2];
[self.layer addSublayer:_border]; 
```

And in your layoutsubviews, put this:

```
_border.path = [UIBezierPath bezierPathWithRect:self.bounds].CGPath;
_border.frame = self.bounds; 
```

* * *

## 回答 #2

> 赞同：155
> 
> 时间：2012-12-03T09:23:38.717

You can set the border with this pattern using Layer and Bezier path like below examples.

**Objective-C**

```
CAShapeLayer *yourViewBorder = [CAShapeLayer layer];
yourViewBorder.strokeColor = [UIColor blackColor].CGColor;
yourViewBorder.fillColor = nil;
yourViewBorder.lineDashPattern = @[@2, @2];
yourViewBorder.frame = yourView.bounds;
yourViewBorder.path = [UIBezierPath bezierPathWithRect:yourView.bounds].CGPath;
[yourView.layer addSublayer:yourViewBorder]; 
```

**Swift 3.1**

```
var yourViewBorder = CAShapeLayer()
yourViewBorder.strokeColor = UIColor.black.cgColor
yourViewBorder.lineDashPattern = [2, 2]
yourViewBorder.frame = yourView.bounds
yourViewBorder.fillColor = nil
yourViewBorder.path = UIBezierPath(rect: yourView.bounds).cgPath
yourView.layer.addSublayer(yourViewBorder) 
```

You can also set different types of design using pattern image like below example.

```
[yourView.layer setBorderWidth:5.0];
[yourView.layer setBorderColor:[[UIColor colorWithPatternImage:[UIImage imageNamed:@"DotedImage.png"]] CGColor]];///just add image name and create image with dashed or doted drawing and add here 
```

Here you've to add `<QuartzCore/QuartzCore>` framework in the project and import it with below line in `YourViewController.m` file.

```
#import <QuartzCore/QuartzCore.h> 
```

* * *

## 回答 #3

> 赞同：79
> 
> 时间：2015-03-05T23:04:33.473

For those of you working in Swift, this class extension on UIView makes it easy. This was based on sunshineDev's answer.

```
extension UIView {
  func addDashedBorder() {
    let color = UIColor.red.cgColor

    let shapeLayer:CAShapeLayer = CAShapeLayer()
    let frameSize = self.frame.size
    let shapeRect = CGRect(x: 0, y: 0, width: frameSize.width, height: frameSize.height)

    shapeLayer.bounds = shapeRect
    shapeLayer.position = CGPoint(x: frameSize.width/2, y: frameSize.height/2)
    shapeLayer.fillColor = UIColor.clear.cgColor
    shapeLayer.strokeColor = color
    shapeLayer.lineWidth = 2
    shapeLayer.lineJoin = CAShapeLayerLineJoin.round
    shapeLayer.lineDashPattern = [6,3]
    shapeLayer.path = UIBezierPath(roundedRect: shapeRect, cornerRadius: 5).cgPath

    self.layer.addSublayer(shapeLayer)
    }
} 
```

To use it:

```
anyView.addDashedBorder() 
```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2019-09-24T10:23:38.537

Here is a UIView subclass that can work for any project, it also works for **round** views:

```
import UIKit

class CustomDashedView: UIView {

    @IBInspectable var cornerRadius: CGFloat = 0 {
        didSet {
            layer.cornerRadius = cornerRadius
            layer.masksToBounds = cornerRadius > 0
        }
    }
    @IBInspectable var dashWidth: CGFloat = 0
    @IBInspectable var dashColor: UIColor = .clear
    @IBInspectable var dashLength: CGFloat = 0
    @IBInspectable var betweenDashesSpace: CGFloat = 0

    var dashBorder: CAShapeLayer?

    override func layoutSubviews() {
        super.layoutSubviews()
        dashBorder?.removeFromSuperlayer()
        let dashBorder = CAShapeLayer()
        dashBorder.lineWidth = dashWidth
        dashBorder.strokeColor = dashColor.cgColor
        dashBorder.lineDashPattern = [dashLength, betweenDashesSpace] as [NSNumber]
        dashBorder.frame = bounds
        dashBorder.fillColor = nil
        if cornerRadius > 0 {
            dashBorder.path = UIBezierPath(roundedRect: bounds, cornerRadius: cornerRadius).cgPath
        } else {
            dashBorder.path = UIBezierPath(rect: bounds).cgPath
        }
        layer.addSublayer(dashBorder)
        self.dashBorder = dashBorder
    }
} 
```

This way you can edit from the Storyboard like this:

[![enter image description here](../Images/7f3f2377120f249df892c7d1a153b059.png)](https://i.stack.imgur.com/kl3Wm.png)

A pair of results:

[![enter image description here](../Images/d394378c4a3a9cf75aaa40ee518a0332.png)](https://i.stack.imgur.com/0tPWc.png)

[![enter image description here](../Images/78e52c2ec9576e0e66d7d3e7a6e32c1e.png)](https://i.stack.imgur.com/oGznD.png)

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2016-11-09T16:56:38.473

**Swift 3**:

```
import UIKit

class UIViewWithDashedLineBorder: UIView {

    override func draw(_ rect: CGRect) {

        let path = UIBezierPath(roundedRect: rect, cornerRadius: 0)

        UIColor.purple.setFill()
        path.fill()

        UIColor.orange.setStroke()
        path.lineWidth = 5

        let dashPattern : [CGFloat] = [10, 4]
        path.setLineDash(dashPattern, count: 2, phase: 0)
        path.stroke()
    }
} 
```

Use in a storyboard (as custom class) or directly in code:

```
let v = UIViewWithDashedLineBorder(frame: CGRect(x: 0, y: 0, width: 100, height: 100)) 
```

Result:

[![enter image description here](../Images/4c60eaabd0f74fce4e0f3e4b2eac2424.png)](https://i.stack.imgur.com/tv1vM.png)

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2013-02-05T00:47:37.270

Building upon what Prasad G has suggested I created a method inside a UIImage Extras class with the following:

```
- (CAShapeLayer *) addDashedBorderWithColor: (CGColorRef) color {
    CAShapeLayer *shapeLayer = [CAShapeLayer layer];

    CGSize frameSize = self.size;

    CGRect shapeRect = CGRectMake(0.0f, 0.0f, frameSize.width, frameSize.height);
    [shapeLayer setBounds:shapeRect];
    [shapeLayer setPosition:CGPointMake( frameSize.width/2,frameSize.height/2)];

    [shapeLayer setFillColor:[[UIColor clearColor] CGColor]];
    [shapeLayer setStrokeColor:color];
    [shapeLayer setLineWidth:5.0f];
    [shapeLayer setLineJoin:kCALineJoinRound];
    [shapeLayer setLineDashPattern:
     [NSArray arrayWithObjects:[NSNumber numberWithInt:10],
      [NSNumber numberWithInt:5],
      nil]];
    UIBezierPath *path = [UIBezierPath bezierPathWithRoundedRect:shapeRect cornerRadius:15.0];
    [shapeLayer setPath:path.CGPath];

    return shapeLayer;
} 
```

It's important to point out that if you define your shape's position as (0,0), the bottom corner of the border will be placed in the center of the image, that's why I set it to: (frameSize.width/2,frameSize.height/2)

I then use my method to get the dashed border using the UIImage of my UIImageView and add the CAShapeLayer as a sublayer of the UIImageView layer:

```
[myImageView.layer addSublayer:[myImageView.image addDashedBorderWithColor:[[UIColor whiteColor] CGColor]]]; 
```

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2012-12-03T10:01:12.677

Use CGContextSetLineDash() method.

```
CGFloat dashPattern[]= {3.0, 2};

context =UIGraphicsGetCurrentContext();
CGContextSetRGBStrokeColor(context, 1.0, 1.0, 1.0, 1.0);
// And draw with a blue fill color
CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 1.0);
// Draw them with a 2.0 stroke width so they are a bit more visible.
CGContextSetLineWidth(context, 4.0);
CGContextSetLineDash(context, 0.0, dashPattern, 2);

CGContextAddRect(context, self.bounds);

// Close the path
CGContextClosePath(context);

CGContextStrokePath(context);

// Fill & stroke the path
CGContextDrawPath(context, kCGPathFillStroke); 
```

I think it will be helpful to you.

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2016-01-30T14:19:22.520

For this you need add CAShapeLayer for that particular object

```
 CAShapeLayer * dotborder = [CAShapeLayer layer];
    dotborder.strokeColor = [UIColor redColor].CGColor;//your own color
    dotborder.fillColor = nil;
    dotborder.lineDashPattern = @[@4, @2];//your own patten 
    [codeBtn.layer addSublayer:dotborder];
    dotborder.path = [UIBezierPath bezierPathWithRect:codeBtn.bounds].CGPath;
    dotborder.frame = codeBtn.bounds; 
```

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2018-12-14T18:23:38.307

**Swift 4.2**

Based off rmooney's answer as a `UIView` extension with configurable parameters that have default values set.

> Note this does not work if the view has `self.translatesAutoresizingMaskIntoConstraints = false`

```
extension UIView {
  func addDashedBorder(_ color: UIColor = UIColor.black, withWidth width: CGFloat = 2, cornerRadius: CGFloat = 5, dashPattern: [NSNumber] = [3,6]) {

    let shapeLayer = CAShapeLayer()

    shapeLayer.bounds = bounds
    shapeLayer.position = CGPoint(x: bounds.width/2, y: bounds.height/2)
    shapeLayer.fillColor = nil
    shapeLayer.strokeColor = color.cgColor
    shapeLayer.lineWidth = width
    shapeLayer.lineJoin = CAShapeLayerLineJoin.round // Updated in swift 4.2
    shapeLayer.lineDashPattern = dashPattern
    shapeLayer.path = UIBezierPath(roundedRect: bounds, cornerRadius: cornerRadius).cgPath

    self.layer.addSublayer(shapeLayer)
  }
} 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2015-09-18T15:47:14.633

Swift version of the QuartzCore answer.

```
import QuartzCore    

let dottedPattern = UIImage(named: "dottedPattern")
myView.layer.borderWidth = 1
myView.layer.borderColor = UIColor(patternImage: dottedPattern!).CGColor 
```

The `CAShapeLayer` approach works, but the QuartzCore approach is better at handling a Table View reload, if the `UIView` is inside a cell.

For the image, you can use something like this (it's really small):

[![enter image description here](../Images/18874d321bf372747591b01d93a580b2.png)](https://i.stack.imgur.com/iCfG7.png)

I tend to prefer vector over PNGs when I can get away with it:

*   Within Sketch, create a 4x4 pixel rectangle.
*   Make a total of four of these
*   Group them into a foursquare, alternating colors
*   Export the group as PDF
*   Within `Images.xcassets`, create a `New Image Set` called dottedPattern
*   Change the `Scale Factors` to `Single Vector`
*   Drop in your PDF

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2017-03-30T14:35:13.973

For Xamarin.iOS dashed/dotted border.

```
 dottedLayer = new CAShapeLayer();
        dottedLayer.StrokeColor = UIColor.FromRGB(202, 202, 208).CGColor; 
        dottedLayer.FillColor = null;
        dottedLayer.LineDashPattern = new[] { new NSNumber(4), new NSNumber(2) };

        dottedLayer.Path = UIBezierPath.FromRect(YourView.Bounds).CGPath; //for square
        dottedLayer.Path = UIBezierPath.FromRoundedRect(YourView.Bounds, 5).CGPath; //for rounded corners

        dottedLayer.Frame = YourView.Bounds;
        YourView.Layer.AddSublayer(dottedLayer); 
```

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2017-05-10T08:29:45.150

In **Swift 3**

```
let border = CAShapeLayer();
border.strokeColor = UIColor.black.cgColor;
border.fillColor = nil;
border.lineDashPattern = [4, 4];
border.path = UIBezierPath(rect: theView.bounds).cgPath
border.frame = theView.bounds;
theView.layer.addSublayer(border); 
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2019-12-28T11:23:36.710

• Swift 5

• Works with autolayout

• Works with the corner radius

```
import UIKit

    class DashedBorderView: UIView {

    private let dashedLineColor = UIColor.black.cgColor
    private let dashedLinePattern: [NSNumber] = [6, 3]
    private let dashedLineWidth: CGFloat = 4

    private let borderLayer = CAShapeLayer()

    init() {
        super.init(frame: CGRect.zero)

        borderLayer.strokeColor = dashedLineColor
        borderLayer.lineDashPattern = dashedLinePattern
        borderLayer.backgroundColor = UIColor.clear.cgColor
        borderLayer.fillColor = UIColor.clear.cgColor
        borderLayer.lineWidth = dashedLineWidth
        layer.addSublayer(borderLayer)
    }

    required init?(coder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }

    override func draw(_ rect: CGRect) {
        borderLayer.frame = bounds
        borderLayer.path = UIBezierPath(roundedRect: rect, cornerRadius: layer.cornerRadius).cgPath
    }
} 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2015-11-18T15:56:03.507

This is if you wanted it in Swift 2

```
func addDashedLineBorderWithColor(color:UIColor) {
    let _ = self.sublayers?.filter({$0.name == "DashedBorder"}).map({$0.removeFromSuperlayer()})
    let  border = CAShapeLayer();
    border.name = "DashedBorder"
    border.strokeColor = color.CGColor;
    border.fillColor = nil;
    border.lineDashPattern = [4, 4];
    border.path = UIBezierPath(rect: self.bounds).CGPath
    border.frame = self.bounds;
    self.addSublayer(border);

} 
```

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2019-07-02T12:02:16.507

**For Swift 5**

```
extension UIView {
    func addDashBorder() {
        let color = UIColor.white.cgColor

        let shapeLayer:CAShapeLayer = CAShapeLayer()

        let frameSize = self.frame.size
        let shapeRect = CGRect(x: 0, y: 0, width: frameSize.width, height: frameSize.height)

        shapeLayer.bounds = shapeRect
        shapeLayer.name = "DashBorder"
        shapeLayer.position = CGPoint(x: frameSize.width/2, y: frameSize.height/2)
        shapeLayer.fillColor = UIColor.clear.cgColor
        shapeLayer.strokeColor = color
        shapeLayer.lineWidth = 1.5
        shapeLayer.lineJoin = .round
        shapeLayer.lineDashPattern = [2,4]
        shapeLayer.path = UIBezierPath(roundedRect: shapeRect, cornerRadius: 10).cgPath

        self.layer.masksToBounds = false

        self.layer.addSublayer(shapeLayer)
    }
} 
```

**How to add**

```
vw.addDashBorder() 
```

**How to remove border again**

```
let _ = vw.layer.sublayers?.filter({$0.name == "DashBorder"}).map({$0.removeFromSuperlayer()}) 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2016-08-16T13:38:54.543

try bellow code

```
- (void)drawRect:(CGRect)rect {
    //// Color Declarations
    UIColor* fillColor = [UIColor colorWithRed: 1 green: 1 blue: 1 alpha: 1];
    UIColor* strokeColor = [UIColor colorWithRed: 0.29 green: 0.565 blue: 0.886 alpha: 1];

    //// Rectangle Drawing
    UIBezierPath* rectanglePath = [UIBezierPath bezierPathWithRoundedRect:rect cornerRadius: 6];
    [fillColor setFill];
    [rectanglePath fill];
    [strokeColor setStroke];
    rectanglePath.lineWidth = 1;
    CGFloat rectanglePattern[] = {6, 2, 6, 2};
    [rectanglePath setLineDash: rectanglePattern count: 4 phase: 0];
    [rectanglePath stroke];
    [super drawRect:rect];
} 
```

for one like bellow [![enter image description here](../Images/68d6cd39b04195b20ed5c900102e3b93.png)](https://i.stack.imgur.com/6LzWx.png)

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2017-02-15T16:34:22.970

I ended up creating a IB Designable using some of @Chris implementation:

CurvedDashedBorderUIVIew.h:

```
#import <UIKit/UIKit.h>

IB_DESIGNABLE
@interface CurvedDashedBorderUIVIew : UIView

@property (nonatomic) IBInspectable CGFloat cornerRadius;
@property (nonatomic) IBInspectable UIColor *borderColor;
@property (nonatomic) IBInspectable int dashPaintedSize;
@property (nonatomic) IBInspectable int dashUnpaintedSize;

@property (strong, nonatomic) CAShapeLayer *border;

@end 
```

CurvedDashedBorderUIVIew.m:

```
#import "CurvedDashedBorderUIVIew.h"

@implementation CurvedDashedBorderUIVIew

- (instancetype)init
{
    self = [super init];
    if (self) {
        [self setup];
    }
    return self;
}

- (instancetype)initWithCoder:(NSCoder *)coder
{
    self = [super initWithCoder:coder];
    if (self) {
        [self setup];
    }
    return self;
}

- (instancetype)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        [self setup];
    }
    return self;
}

-(void)setup
{
    _border = [CAShapeLayer layer];
    [self.layer addSublayer:_border];
}

-(void)layoutSubviews {
    [super layoutSubviews];
    self.layer.cornerRadius = self.cornerRadius;

    _border.strokeColor = self.borderColor.CGColor;
    _border.fillColor = nil;
    _border.lineDashPattern = @[[NSNumber numberWithInt:_dashPaintedSize],
                                [NSNumber numberWithInt:_dashUnpaintedSize]];
    _border.path = [UIBezierPath bezierPathWithRoundedRect:self.bounds cornerRadius:self.cornerRadius].CGPath;
    _border.frame = self.bounds;
}

@end 
```

then just set it up in the xib/storyboard:

[![enter image description here](../Images/c13cb606deca19a04e2b3e3a65e19e2a.png)](https://i.stack.imgur.com/vjni9.png)

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2018-01-26T07:51:20.767

Swift solution with custom class worked with autolayout

customized from @Iain Smith

```
class DashedBorderView: UIView {

    @IBInspectable var cornerRadius: CGFloat = 4
    @IBInspectable var borderColor: UIColor = UIColor.black
    @IBInspectable var dashPaintedSize: Int = 2
    @IBInspectable var dashUnpaintedSize: Int = 2

    let dashedBorder = CAShapeLayer()

    override init(frame: CGRect) {
        super.init(frame: frame)
        commonInit()
    }

    required init?(coder aDecoder: NSCoder) {
        super.init(coder: aDecoder)
        commonInit()
    }

    private func commonInit() {
        //custom initialization
        self.layer.addSublayer(dashedBorder)
        applyDashBorder()
    }

    override func layoutSublayers(of layer: CALayer) {
        super.layoutSublayers(of: layer)
        applyDashBorder()
    }

    func applyDashBorder() {
        dashedBorder.strokeColor = borderColor.cgColor
        dashedBorder.lineDashPattern = [NSNumber(value: dashPaintedSize), NSNumber(value: dashUnpaintedSize)]
        dashedBorder.fillColor = nil
        dashedBorder.cornerRadius = cornerRadius
        dashedBorder.path = UIBezierPath(rect: self.bounds).cgPath
        dashedBorder.frame = self.bounds
    }
} 
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2018-02-18T08:20:22.403

You can simply create a IBDesignable class like this:

```
import UIKit

@IBDesignable
class BorderedView: UIView {

    @IBInspectable var cornerRadius: CGFloat = 0

    @IBInspectable var borderWidth: CGFloat = 0

    @IBInspectable var borderColor: UIColor = UIColor.clear

    override func draw(_ rect: CGRect) {
        let path = UIBezierPath(roundedRect: rect, cornerRadius: cornerRadius)
        path.lineWidth = borderWidth

        borderColor.setStroke()

        let dashPattern : [CGFloat] = [10, 4]
        path.setLineDash(dashPattern, count: 2, phase: 0)
        path.stroke()
    }

} 
```

Then just subclass your view with BorderedView from Xcode. This way you can set the border color and border width very easily from the interface builder!

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2018-02-19T12:10:00.367

```
extension UIView{
func addDashedLineBorder() {
    let color = UIColor.black.cgColor

    let shapeLayer:CAShapeLayer = CAShapeLayer()
    let frameSize = (self.frame.size)
    let shapeRect = CGRect(x: 0, y: 0, width: self.frame.width, height: self.frame.height)

    shapeLayer.bounds = shapeRect
    shapeLayer.position = CGPoint(x: frameSize.width/2, y: frameSize.height/2)
    shapeLayer.fillColor = UIColor.clear.cgColor
    shapeLayer.strokeColor = color
    shapeLayer.lineWidth = 1
    shapeLayer.lineJoin = kCALineJoinRound
    shapeLayer.lineDashPattern = [2,2]
    shapeLayer.path = UIBezierPath(rect: shapeRect).cgPath

    self.layer.addSublayer(shapeLayer)
} 
```

} and call this function in viewdidLoad() with delay:

```
DispatchQueue.main.asyncAfter(deadline: .now() + 0.5) { 
            // Your code with delay
            self.YourView.addDashedBorder()
        } 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2020-05-05T09:12:23.833

**Swift 5+**

```
import UIKit

class DashedBorderView: UIView {

    private let borderLayer = CAShapeLayer()

    init(color: UIColor, width: CGFloat = 1) {
        super.init(frame: CGRect.zero)

        let pattern: [NSNumber] = [NSNumber(value: Float(5 * width)), NSNumber(value: Float(3 * width))]

        borderLayer.backgroundColor = nil
        borderLayer.fillColor = nil
        borderLayer.lineDashPattern = pattern
        borderLayer.lineWidth = width
        borderLayer.strokeColor = color.cgColor

        layer.addSublayer(borderLayer)
    }

    required init?(coder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }

    override func draw(_ rect: CGRect) {
        borderLayer.frame = bounds
        borderLayer.path = UIBezierPath(roundedRect: rect, cornerRadius: layer.cornerRadius).cgPath
    }
} 
```

How to use:

```
// f.e. inside UIViewController

let viewWithDashedBorder = DashedBorderView(color: .red, width: 2)
view.addSubview(viewWithDashedBorder) 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2021-08-11T10:50:19.670

**Swift 4,5 :- addDashedBorder**

```
extension UIView {
    func addDashedBorder(color: UIColor) {
        let color = color.cgColor

        let shapeLayer: CAShapeLayer = CAShapeLayer()
        let frameSize = self.frame.size
        let shapeRect = CGRect(x: 0, y: 0, width: frameSize.width, height: frameSize.height)

        shapeLayer.bounds = shapeRect
        shapeLayer.position = CGPoint(x: frameSize.width / 2, y: frameSize.height / 2)
        shapeLayer.fillColor = UIColor.clear.cgColor
        shapeLayer.strokeColor = color
        shapeLayer.lineWidth = 1.5
        shapeLayer.lineJoin = CAShapeLayerLineJoin.round
        shapeLayer.lineDashPattern = [4, 4]
        shapeLayer.path = UIBezierPath(roundedRect: shapeRect, cornerRadius: 0).cgPath
        self.layer.addSublayer(shapeLayer)
    }
} 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-01-15T19:29:42.573

In swift 4 I created an UIView extension with the following function:

```
func borderDash(withRadius cornerRadius: Float, borderWidth: Float, borderColor: UIColor, dashSize: Int) {
    let currentFrame = self.bounds
    let shapeLayer = CAShapeLayer()
    let path = CGMutablePath()
    let radius = CGFloat(cornerRadius)

    // Points - Eight points that define the round border. Each border is defined by two points.
    let topLeftPoint = CGPoint(x: radius, y: 0)
    let topRightPoint = CGPoint(x: currentFrame.size.width - radius, y: 0)
    let middleRightTopPoint = CGPoint(x: currentFrame.size.width, y: radius)
    let middleRightBottomPoint = CGPoint(x: currentFrame.size.width, y: currentFrame.size.height - radius)
    let bottomRightPoint = CGPoint(x: currentFrame.size.width - radius, y: currentFrame.size.height)
    let bottomLeftPoint = CGPoint(x: radius, y: currentFrame.size.height)
    let middleLeftBottomPoint = CGPoint(x: 0, y: currentFrame.size.height - radius)
    let middleLeftTopPoint = CGPoint(x: 0, y: radius)

    // Points - Four points that are the center of the corners borders.
    let cornerTopRightCenter = CGPoint(x: currentFrame.size.width - radius, y: radius)
    let cornerBottomRightCenter = CGPoint(x: currentFrame.size.width - radius, y: currentFrame.size.height - radius)
    let cornerBottomLeftCenter = CGPoint(x: radius, y: currentFrame.size.height - radius)
    let cornerTopLeftCenter = CGPoint(x: radius, y: radius)

    // Angles - The corner radius angles.
    let topRightStartAngle = CGFloat(Double.pi * 3 / 2)
    let topRightEndAngle = CGFloat(0)
    let bottomRightStartAngle = CGFloat(0)
    let bottmRightEndAngle = CGFloat(Double.pi / 2)
    let bottomLeftStartAngle = CGFloat(Double.pi / 2)
    let bottomLeftEndAngle = CGFloat(Double.pi)
    let topLeftStartAngle = CGFloat(Double.pi)
    let topLeftEndAngle = CGFloat(Double.pi * 3 / 2)

    // Drawing a border around a view.
    path.move(to: topLeftPoint)
    path.addLine(to: topRightPoint)
    path.addArc(center: cornerTopRightCenter,
                radius: radius,
                startAngle: topRightStartAngle,
                endAngle: topRightEndAngle,
                clockwise: false)
    path.addLine(to: middleRightBottomPoint)
    path.addArc(center: cornerBottomRightCenter,
                radius: radius,
                startAngle: bottomRightStartAngle,
                endAngle: bottmRightEndAngle,
                clockwise: false)
    path.addLine(to: bottomLeftPoint)
    path.addArc(center: cornerBottomLeftCenter,
                radius: radius,
                startAngle: bottomLeftStartAngle,
                endAngle: bottomLeftEndAngle,
                clockwise: false)
    path.addLine(to: middleLeftTopPoint)
    path.addArc(center: cornerTopLeftCenter,
                radius: radius,
                startAngle: topLeftStartAngle,
                endAngle: topLeftEndAngle,
                clockwise: false)

    // Path is set as the shapeLayer object's path.
    shapeLayer.path = path;
    shapeLayer.backgroundColor = UIColor.clear.cgColor
    shapeLayer.frame = currentFrame
    shapeLayer.masksToBounds = false
    shapeLayer.setValue(0, forKey: "isCircle")
    shapeLayer.fillColor = UIColor.clear.cgColor
    shapeLayer.strokeColor = borderColor.cgColor
    shapeLayer.lineWidth = CGFloat(borderWidth)
    shapeLayer.lineDashPattern = [NSNumber(value: dashSize), NSNumber(value: dashSize)]
    shapeLayer.lineCap = kCALineCapRound

    self.layer.addSublayer(shapeLayer)
    self.layer.cornerRadius = radius;
} 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2018-10-24T09:52:50.973

If you want this to work with cornerRadius then try this

```
tagView.clipsToBounds = YES;
tagView.layer.cornerRadius = 20.0f;
tagView.backgroundColor = [UIColor groupTableViewBackgroundColor];

CAShapeLayer *yourViewBorder = [CAShapeLayer layer];
yourViewBorder.strokeColor = [UIColor blackColor].CGColor;
yourViewBorder.fillColor = nil;
yourViewBorder.lineDashPattern = @[@2, @2];
yourViewBorder.frame = tagView.bounds;

// Create the path for to make circle
UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:tagView.bounds
                                               byRoundingCorners:UIRectCornerAllCorners
                                                     cornerRadii:CGSizeMake(20, 20)];

yourViewBorder.path = maskPath.CGPath;

[tagView.layer addSublayer:yourViewBorder]; 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-09-23T08:12:47.000

Improvement for @Chris's answer.

```
extension UIView {
    func dashLinedBorder() -> CAShapeLayer {
        let viewBorder = CAShapeLayer()
        viewBorder.strokeColor = UIColor.black.cgColor
        viewBorder.lineDashPattern = [4, 2]
        viewBorder.fillColor = nil
        self.layer.addSublayer(viewBorder)
        return viewBorder
    }
} 
```

Define your `CAShapeLayer` inside the `ViewController`,

```
var viewBillingProofCAShapeLayer: CAShapeLayer!

override func viewDidLoad() {
    self.viewBillingProofCAShapeLayer = self.viewBillingProofInner.dashLinedBorder()
} 
```

then override `viewDidLayoutSubviews`

```
override func viewDidLayoutSubviews() {
    self.viewBillingProofCAShapeLayer.path = UIBezierPath(roundedRect: self.viewBillingProofInner.bounds, byRoundingCorners: .allCorners, cornerRadii: CGSize(width: 4, height: 4)).cgPath
    self.viewBillingProofCAShapeLayer.frame = self.viewBillingProofInner.bounds
} 
```

# javascript - Javascript多重赋值语句

> ID：13679925
> 
> 赞同：3
> 
> 时间：2012-12-03T08:58:46.650
> 
> 标签：javascript

我在一些代码中看到了那行

```
window.a = window.b = a; 
```

它是如何工作的？

以下是否总是返回 true？

`window.a == a`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T09:00:13.833

它的意思是

```
window.b=a;
window.a=a; 
```

或者你可以说。

```
window.b=a;
window.a=window.b; 
```

单个语句中的两个分配

和

> 还有一件事情
> 
> window.a==a 对吗？

是的，这是正确的。它将返回 true

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T10:15:20.473

此分配从右到左运行，因此首先将为“window.b”分配“a”值，然后为“window.a”分配“windows.b”值。

您可以像这样打破这个多重分配并获得相同的结果：

```
window.b=a;
window.a=a; 
```

您还应该注意范围界定之类的事情。如果您在全局范围内运行此代码，例如像这样的简单脚本：

```
<script>
    var a = 10;
    window.a = window.b = a;
</script> 
```

window.a==a 是真的，因为 'a' 和 'window.a' 是相同的变量。'a' 实际上是 'window' 对象的属性。所有全局变量都是“窗口”对象的属性。知道您可以编写这样的代码，并且此代码将对应：

```
<script>
    var a = 10;
    a = b = a;
</script> 
```

但是如果你把这段代码放在一个函数中，它会在函数范围内运行，例如：

```
<script>
    function ex() {
        var a = 10; // this is local variable
        window.a = window.b = a; // this time window.a != a
    }
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T09:00:25.650

如同：

```
window.b = a;
window.a = a; 
```

不，`window.a`并不`a`总是平等的。通常，它仅在 Web 浏览器 JavaScript 解释器的全局范围内相等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T09:01:10.883

窗口上的`a`和`b`属性被分配给 的值`a`。是的，如果这段代码在全局范围内执行，`a`并且`window.a`是相同的。

```
var a = "foo";

//window.a and a are the same variable
window.a = "bar";
a; //bar

function f(){
    var a = "notfoo";

    //window.a is a different variable from a, although they may take the same value
    window.a = "baz";
    a; //notfoo
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T09:04:40.150

它是一样的：

```
window.b=a;
window.a= window.b; 
```

在上面的陈述之后，window.a == a 在这种情况下将是真的。在某些情况下它会是假的，例如：当 a 是一个全局变量时。

还有一件事：下次请为您的问题找到更多信息标题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T08:53:42.653

实际上，如果有 value`window.a==a`可以是 false 。那是因为不等于任何值，包括它自己。`a``Number.NaN``Number.NaN`

# c# - C# 委托和函数调用

> ID：13679931
> 
> 赞同：1
> 
> 时间：2012-12-03T08:59:10.847
> 
> 标签：c#, function, delegates

假设我有这个功能：

```
Func<string> fs = () => "test";
var st = fs(); 
```

我想将其简化为：

```
var st = (()=> "test")(); 
```

然而，我似乎无法定义该函数然后立即调用它。这可能以另一种方式吗？

这个有可能：

```
var st = (new Func<string>(() => "test"))(); 
```

但是很乱。

为了澄清是否可以定义匿名函数而不必指定正在使用的委托类型，即有没有办法让编译器直接从函数推断类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T09:08:15.380

您需要以某种方式指定类型。其他人已经展示了如何内联执行此操作。

还有另一种可能：创建一个辅助方法。因为定义了方法的参数，所以调用方法的时候就不用自己定义类型了。

```
static class Execute
{
    public static T Func<T>(Func<T> func)
    {
        return func();
    }
} 
```

用法：

```
var st = Execute.Func(() => "test"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T09:04:09.510

只需将表达式转换为正确的类型，如下所示：

```
var st = ((Func<string>) (() => "test"))(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T09:13:22.740

基本上编译器不知道它是表达式树还是匿名方法。你想要后者，你必须在某个地方指定一个类型。

如果您不想内联转换 lambda，则应使用辅助方法：

```
static TResult call<TResult>(Func<TResult> f)
{
    return f();
}
static TResult call<T1, TResult>(Func<T1,TResult> f, T1 arg1)
{
    return f(arg1);
}
static TResult call<T1, T2, TResult>(Func<T1, T2, TResult> f, T1 arg1, T2 arg2)
{
    return f(arg1, arg2);
}
// and so on...

static void Main(string[] args)
{
    Console.WriteLine(call(() => "test"));
} 
```

# sharepoint - 使用 Firefox 登录 SharePoint 时出现问题 - 即使设置了 ntml

> ID：13679946
> 
> 赞同：0
> 
> 时间：2012-12-03T08:59:56.510
> 
> 标签：sharepoint, firefox, sharepoint-2010, login

我正在努力使用 FireFox 登录 SharePoint。在输入 URL 时，我会收到用户名和密码提示，但是当输入这些时，登录对话框不断弹出并且页面未加载。

场景是这样的：我正在运行三个 Web 应用程序。它们都具有相同的设置并在端口 80 上运行。

```
名称 URL 端口
intranetttest 当前选择 http://intranetttest/ 80
我的网站 http://minside/ 80
SharePoint - 80 http://sp/ 80
SharePoint 管理中心 v4 http://sp:42424/ 42424

```

在三分之一的情况下，我能够登录并浏览该页面。这个与中央管理员共享“基本”URL。另外两个，我无法使用 FireFox 登录。IE 和 Opera 运行良好。

常规设置、托管功能、托管路径、服务连接、身份验证提供程序、自助站点创建、用户权限、webpart 安全性、用户策略、匿名策略和权限策略都是相同的——据我所知。

我显然似乎遗漏了一些东西。有人有类似的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:43:46.833

主机名是否指向 127.0.0.1？

你能不能试试这个：

单击开始，单击运行，键入 regedit，然后单击确定。在注册表编辑器中，找到并单击以下注册表项： HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa 右键单击​​ Lsa，指向新建，然后单击 DWORD 值。键入 DisableLoopbackCheck，然后按 Enter。右键单击 DisableLoopbackCheck，然后单击修改。在数值数据框中，键入 1，然后单击确定.1.2。

还要检查备用访问映射是否没有将域名添加到主机名。

如果这没有帮助，请在服务器上尝试：

单击开始，单击运行，键入 regedit，然后单击确定。在注册表编辑器中，找到并单击以下注册表项： HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa\MSV1_0 右键单击​​ MSV1_0，指向新建，然后单击多字符串值。键入 BackConnectionHostNames，然后按 Enter。右键单击 BackConnectionHostNames，然后单击修改。在数值数据框中，键入本地计算机上站点的主机名或主机名（每个主机名一行），然后单击确定。退出注册表编辑器，然后重新启动 IISAdmin 服务。

（来源：[http](http://spiderwool.blogspot.nl/2010/09/access-denied-host-header-sharepoint.html) ://spiderwool.blogspot.nl/2010/09/access-denied-host-header-sharepoint.html ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:35:09.557

我有类似的问题。您应该检查**备用访问映射**是否正确并检查 IIS 管理器中的**站点绑定**。有时第一个 webapp 通过绑定到 *:80 来获取所有请求。因此，请确保所有 webapps 具有类似的绑定。

在客户端：您是否将 Firefox 配置为为某些站点而不是其他站点传递操作系统身份验证？

HTH 本

# visual-studio-2012 - vs2012 web Essentials 不会在保存时自动编译更少的文件

> ID：13679948
> 
> 赞同：4
> 
> 时间：2012-12-03T09:00:02.190
> 
> 标签：visual-studio-2012, less, web-essentials

我正在使用 Web Essentials 2012 版本 1.8.5 ，由于某种原因，它不会自动将较少的文件编译为 CSS。当我对较少的文件进行了一些更改后点击保存时，我可以在状态行上看到“web Essentials compile file.less”一秒钟，但没有真正发生。例如。fils.css 并没有真正改变。

有人有同样的问题吗？或者有人知道如何解决这个问题？

谢谢你。

ps我确实尝试了卸载/安装

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T18:42:17.137

此问题已修复，您可以在此处下载最新版本 (1.9.2)：http: [//visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)

# actionscript-3 - 重新编译一个没有as3proj文件的flash项目的swf文件

> ID：13679949
> 
> 赞同：0
> 
> 时间：2012-12-03T09:00:02.000
> 
> 标签：actionscript-3, flash, actionscript, compiler-errors

我有一个 Flash 源代码文件夹，我想做的是修改一个动作脚本文件并重新编译 swf。

不幸的是，我发现源代码没有 as3proj 文件。我有的是这样的

快闪项目：

*   组织/as2lib
*   项目.fla
*   作为文件

我尝试创建一个新项目，我看到的是 rsc、bin 和 lib 文件夹，然后我尝试像这样放置文件：

*   lib/org/as2lib
*   rsc/as 文件
*   项目.fla

它生成的是一个没有任何内容的白色 swf，我应该怎么做才能编译它？我正在使用 flashDevelop，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:14:43.093

您必须创建一个新项目，通过导出 SWF 在 Adob​​e Flash 中拆除您的 FLA（试用即可），然后在 FlashDevelop 中从该 SWF 中获取资源，并相应地使用它们。从 Adob​​e Flash 迁移到 FD 并非易事。

您拥有的 FLA 是 Adob​​e Flash 项目文件，FlashDevelop 无法读取该文件。因此，您必须开始一个新项目，并以 FlashDevelop 的方式嵌入您现有的资产。

# ipad - 如何在reveal.js的幻灯片上添加图片库以滑过？

> ID：13679953
> 
> 赞同：3
> 
> 时间：2012-12-03T09:00:14.593
> 
> 标签：ipad, gallery, presentation, reveal.js

在当前的项目中，我想创建一个演示文稿，例如平板电脑的 web-app（开始是 ipad），用户可以在其中滑动幻灯片以了解有关产品的一些信息。Reveal.js 似乎是一个不错的选择，但像往常一样，我只需要比开箱即用的功能多一点......

我想在其中一张幻灯片上有一个类似图片库的东西——比如 5x4 缩略图，如果用户触摸其中一张，图片会全屏弹出，用户可以在这个图片库中来回移动。如果他有足够的，他回到画廊幻灯片。我可以使用垂直小节幻灯片来模拟这种行为，并为这些子幻灯片添加一个“返回画廊”按钮，我正在探索这种可能性，但如果我想更进一步，它似乎有点受限。

所以问题是：

*   有没有办法实现一个画廊插件来reveal.js？

*   如果是这样，jquery 领域中的哪一个可以很好地与reveal.js 配合使用（假设reveal.js 不依赖于jquery 本身）。触摸支持将是强制性的。

*   我的方法有其他选择吗？

*   有比reveal.js更好的工具来完成我的任务吗？我一直在研究 impress.js，尤其是 jmpress.js，但它们似乎比我实际需要的更复杂/强大。这意味着：对于我的任务，我在reveal.js 中的结果比在jmpress.js 中更快。

我知道这个问题仍然相当模糊，但我目前正在探索可能性......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-30T13:08:55.117

我认为您可以通过添加如下代码来重新定义有条件的滑动工作：

```
Reveal.addEventListener( 'somestate', function() {
    // TODO: Sprinkle magic
}, false ); 
```

有关州的更多信息请看[这里](https://github.com/hakimel/reveal.js#states)

# php - 如何将数据库中的最新帖子显示到php主页中？

> ID：13679954
> 
> 赞同：-1
> 
> 时间：2012-12-03T09:00:20.377
> 
> 标签：php, mysql

我想在我的主页上以所有网站都有的正确格式在标签内显示帖子详细信息（*标题、描述、用户名）。*`div`我面临的问题是数据库中的所有数据都显示为纯文本，一个在另一个之下。我是php新手，所以请指导我实现结果。

这是我的代码。

我想在这个标签中显示：

```
<div id='display'>
  <h3 class='name'></h3>
  <h1 class='title'></h1>
  <p class='desc'></p>
  <p class='cat'></p>
  <p class='sub_cat'></p> 
</div> 
```

我的php代码是：

```
<?php
  $row="";

  $link = mysql_connect("localhost","username","password");
  mysql_select_db("database");
  $query = "SELECT * from posts ORDER by post_id DESC limit 0,5";
  $result = mysql_query($query);
  $result = mysql_query($query) or die("Query to get blah failed with error:".mysql_error());

  while($row = mysql_fetch_array($result)) { 
    echo "<div id='display'>";
    echo "<h3 class='name'>".$row['username']."</h3>";
    echo "<h1 class='title' >".$row['post_title']."</h1>";
    echo "<p class='cat'>".$row['cat']."</p>";
    echo "<p class='sub_cat'>".$row['sub_cat']."</p>";
    echo "<p class='desc'>".$row['post_desc']."</p>";
    echo "</div>";
  } 

  mysql_close($link);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:10:23.317

我认为你缺少的是一些 CSS。在 HTML 中，DIV 容器显示为块元素。因此，无需任何配置，它们就会显示在另一个下方。要让它们彼此相邻，只需在页面中添加一些 CSS：

```
<div id='display'>
  <h3 class='name'></h3>
  <h1 class='title' ></h1>
  <p class='desc'></p>
  <p class='cat'></p>
  <p class='sub_cat'></p> 
</div>
<div class="clear"></div>

<style type="text/css">
.name, .title, .desc, .cat, .sub_cat {
    float:left;
}

.clear {
    clear:both;
}
</style> 
```

# perl - 从 bin 文件中读取以空字符结尾的字符串

> ID：13679959
> 
> 赞同：2
> 
> 时间：2012-12-03T09:00:40.300
> 
> 标签：perl, binary

我想从 bin 文件中读取一个字符串（字符串从固定偏移量开始并以空值结尾）。

如何在 Perl 脚本中执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T09:05:37.907

[`seek`](http://perldoc.perl.org/functions/seek.html)必要时到正确的位置，然后使用：

```
my $str;
{ local $/ = "\0"; $str = <$fh>; }
die "Premature EOF" if !defined($str) || $str !~ /\0\z/;
chop($str); 
```

# c# - 如何对以下方法进行单元测试？

> ID：13679960
> 
> 赞同：2
> 
> 时间：2012-12-03T09:00:51.783
> 
> 标签：c#, entity-framework, unit-testing, nunit, moq

```
public User AddTags(int userId, List<Tag> Tags)
            {
                var user = GetUserById(userId);
                Tags.ForEach( tag => user.Tags.Add(tag));
                return _repository.Update(user);
            }
public interface IRepository<T> where T:class 
    {
        void Add(T item);
        void Remove(T item);
        T Update(T item);
    } 
```

在测试班

```
protected IRepository<User> Repository;
protected UserService Service;
public Mock<IRepository<User>> MockUserRepository = new Mock<IRepository<User>>();
Repository = MockUserRepository.Object;
Service = new UserService(UnitOfWork, Repository);
//I don't quite understand how to mock the Update method.
var result = Service.AddUserTags(1,Tags);
Assert.AreEqual(result.UserTags.Count(),3); 
```

我有一个`List<User> users`和一个`List<Tag> tags`。

我正在使用 EF、NUnit、MOQ 和通用存储库模式。

编辑 ：

在 GetUserById 中

```
return _repository.GetAll().Where(_ => _.UserId == userId).SingleOrDefault();

I have mocked it doing the following 

MockUserRepository.Setup(_ => _.GetAll()).Returns(Users.AsQueryable()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:33:08.390

我取决于`GetUserById(userId);`. 为了检查`UserTags`您必须通过模拟来控制返回`User`的计数`GetUserId`计数。

否则，您能做的最好的事情就是确保`Update`调用该方法：

```
repository.Verify(x => x.Update(It.IsAny<User>())); 
```

编辑后：然后，您需要设置用户：

```
[TestFixture]
    public class TestPointer
    {
        private IRepository<User> Repository;
        private UserService Service;
        private Mock<IRepository<User>> MockUserRepository = new Mock<IRepository<User>>();

        [Test]
        public void GetItemsByUserName_UserName_ListOfItems()
        {
            //Arrange
            var unitOfWork = new UnitOfWork();
            Service = new UserService(unitOfWork,  MockUserRepository.Object);
            var Tags = new List<Tag>() { new Tag { Name = "TestTag1" }, new Tag { Name = "TestTag2" }, new Tag { Name = "TestTag3" } };
            var user = new User() {Id = 1};
            MockUserRepository.Setup(x => x.Find(1)).Returns(user);
            MockUserRepository.Setup(x => x.Update(user)).Returns(user);

            //Act
            var result = Service.AddTags(1, Tags);

            //Assert
            Assert.AreEqual(result.Tags.Count(),3);
        }
    }

    public class UserService
    {
        private IRepository<User> _repository;
        private UnitOfWork _unitOfWork;

        public UserService(UnitOfWork unitOfWork, IRepository<User> repository)
        {
            _unitOfWork = unitOfWork;
            _repository = repository;
        }

        public User AddTags(int userId, List<Tag> Tags)
        {
            var user = GetUserById(userId);
            Tags.ForEach(tag => user.Tags.Add(tag));
            return _repository.Update(user);
        }

        private User GetUserById(int userId)
        {
            return _repository.Find(userId);
        }
    }

    public class UnitOfWork
    {

    }

    public interface IRepository<T> where T:class
    {
        T Find(int id);
        void Add(T item);
        void Remove(T item);
        T Update(T item);
    }

    public class User
    {
        private List<Tag> tags = new List<Tag>();

        public int Id { get; set; }
        public List<Tag> Tags
        {
            get { return tags; }
            set { tags = value; }
        }
    }

    public class Tag
    {
        public string Name { get; set; }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:09:35.567

如果您想断言用户发生了什么，则`GetuserById`应该注入该方法，以便可以将其替换为返回模拟用户的模拟。然后，您可以验证`user.Tags.Add(tag)`调用的次数是否正确。

之后，您可以验证`_repository.Update(user)`是否调用了一次；

有关 Moq 中的非常化语法，请查看[此](http://code.google.com/p/moq/wiki/QuickStart)链接。

# objective-c - 根据来自另一个 NSArray 的字符串对 NSMutableArray 进行排序

> ID：13679964
> 
> 赞同：1
> 
> 时间：2012-12-03T09:01:08.090
> 
> 标签：objective-c, ios, nsmutablearray, nsarray

我有一个`NSArray`要用作排序顺序的字符串：

```
NSArray *permissionTypes = [NSArray arrayWithObjects:@"Read", @"Write", @"Admin", nil]; 
```

然后我有一个`NSMutableArray`可能有也可能没有所有这三种权限类型的，但有时它只会是 2，有时是 1，但我仍然希望它根据我的`permissionsTypes`数组进行排序。

```
NSMutableArray *order = [NSMutableArray arrayWithArray:[permissions allKeys]]; 
```

如何始终`order`根据我使用`permissionTypes`数组作为键对数组进行正确排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:07:21.560

I would go about this by creating a struct or an object to hold the permission types.

Then you can have...

```
PermissionType
--------------
Name: Read
Order: 1

PermissionType
--------------
Name: Write
Order: 2 
```

and so on.

Then you only need the actual array of these objects and you can sort by the order value.

```
[array sortUsingComparator:^NSComparisonResult(PermissionType *obj1, PermissionType *obj2) {
        return [obj1.order compare:obj2.order];
    }]; 
```

This will order the array by the order field.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T09:14:18.217

```
NSMutableArray *sortDescriptors = [NSMutableArray array]; 

for (NSString *type in permissionTypes) {
    NSSortDescriptor *descriptor = [[[NSSortDescriptor alloc] initWithKey:type ascending:YES] autorelease];

    [sortDescriptors addObject:descriptor];
}

sortedArray = [myArray sortedArrayUsingDescriptors:sortDescriptors]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T09:11:33.403

使用`NSMutableArray`您喜欢的任何排序方法，您将提供一个块或选择器来比较两个元素。在该块/选择器中，而不是直接比较传入的两个字符串，使用并比较返回的结果索引值在您的`permissionTypes`数组中查找每个字符串。`indexOfObject:`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T14:56:20.863

我建议你另一种方法：

```
- (void)viewDidLoad
{
[super viewDidLoad];

arrayPermissions = [[NSMutableArray alloc] init];

NSDictionary *dicRead = [NSDictionary dictionaryWithObjectsAndKeys:
                              @"Read", @"Permission", nil];

NSDictionary *dicWrite = [NSDictionary dictionaryWithObjectsAndKeys:
                               @"Write", @"Permission", nil];

NSDictionary *dicAdmin = [NSDictionary dictionaryWithObjectsAndKeys:
                              @"Admin", @"Permission", nil];

NSLog(@"my dicRead = %@", dicRead);
NSLog(@"my dicWrite = %@", dicWrite);
NSLog(@"my dicAdmin = %@", dicAdmin);

[arrayPermissions addObject:dicRead];
[arrayPermissions addObject:dicWrite];
[arrayPermissions addObject:dicAdmin];

NSLog(@"arrayPermissions is: %@", arrayPermissions);

// create a temporary Dict again

NSDictionary *temp =[[NSDictionary alloc]
                     initWithObjectsAndKeys: arrayPermissions, @"Permission", nil];

// declare one dictionary in header class for global use and called "filteredDict"
self.filteredDict = temp;

self.sortedKeys =[[self.filteredDict allKeys]
                  sortedArrayUsingSelector:@selector(compare:)];

NSLog(@"sortedKeys is: %i", sortedKeys.count);
NSLog(@"sortedKeys is: %@", sortedKeys);

} 
```

希望帮助

# javascript - Javascript 类中的命名空间

> ID：13679966
> 
> 赞同：0
> 
> 时间：2012-12-03T09:01:14.033
> 
> 标签：javascript

我正在尝试在 Javascript 中创建一个计时器，但我对如何实现它有一个特定的问题。

现在是这样的

```
function CountUpTimer(seconds,name,targetId,submitButtonId){
this.time = seconds; 
this.currentTime = 0;
this.minutes = Math.floor(seconds/60);
this.submitButtonId = submitButtonId;

this.seconds = seconds - this.minutes*60;
this.currentSeconds = 0;
this.currentMinutes = 0; 
this.targetId = targetId;
this.name = name;
this.isPaused = false; 
this.init = function(){
    setInterval(this.name + ".tick()",1000);
}

this.pause = function(){
    this.isPaused = true;
}
this.unpause = function(){
    this.isPaused = false; 
}
this.tick = function(){
    if(this.isPaused == false){
    if(this.currentTime <= this.time){
        if(this.currentSeconds == 59){
            this.currentSeconds = 0;
            this.currentMinutes++; 
        }
        this.updateTimer();
        this.currentTime++;
        this.currentSeconds++;
    } else{
        this.endTiming();
    }
}
} 
```

现在，问题在于我无法动态创建 CountUpTimer 对象，因为我需要知道分配给该对象的变量的名称。有什么办法可以解决这个问题 - 所以让我们说一下

```
setInterval(this.tick(),1000); 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:06:39.053

使用回调时，您会在执行时丢失上下文。您应该使用`bind`来保持上下文。

```
setInterval(this.tick.bind(this),1000); 
```

更多细节[在这里](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T09:08:47.350

```
this.init = function(){
   var self = this;
   setInterval(self.tick(),1000);
} 
```

Keep the reference to original object, because using this in setInterval will be in the wrong object context (document).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T09:12:04.563

你可以做：

```
var self = this;
setInterval(function() {
    self.tick()
}, 1000); 
```

或者`Function.bind`，如果您对非传统支持没问题，请使用。

# node.js - Node.js/Express：不通过 cookie 传递会话 ID

> ID：13679968
> 
> 赞同：2
> 
> 时间：2012-12-03T09:02:03.253
> 
> 标签：node.js, express, unity3d

我正在尝试创建一组 REST API 用于 Express 和 Unity 3D 游戏引擎之间的通信。但是 Unity 的[WWW 类](http://docs.unity3d.com/Documentation/ScriptReference/WWW.html)不支持 cookie。（看起来它确实支持 cookie，但它[没有记录](http://answers.unity3d.com/questions/255051/www-and-cookieslogin.html)）

所以我想传递会话 ID 以表示为 GET/POST 参数。

**编辑：** 问题是：有没有办法获取与给定会话 ID 关联的会话数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T02:26:02.903

使用[会话存储](http://www.senchalabs.org/connect/middleware-session.html)对象的`.get()`方法。例如，将以下代码放在前面：`app.use(app.router)`

```
app.use(function(req, res, next) {
    var session_id = (req.body && req.body.sid) || req.query && req.query.sid
    req.sessionStore && req.sessionStore.get(session_id, function(err, session) {
        if (session) {
            // createSession() re-assigns req.session
            req.sessionStore.createSession(req, session)
        }
        return next()
    })
}) 
```

# android - 如何将uiview添加到cocos2d android

> ID：13679969
> 
> 赞同：1
> 
> 时间：2012-12-03T09:02:07.623
> 
> 标签：android, android-emulator

嗨，我在这里做一个应用程序，我必须显示一些编辑文本和按钮....所以通过 cocos2d 的某些功能不可行，所以我想将我的 android 代码集成到 cocos2d 代码。我在 iphone 中搜索了网络，它可能使用 addsubview() 但 android 我不知道任何人都可以救我...谢谢

```
 in iphone using below code they added subview:
   UIView *myview=[[UIView alloc] initWithFrame: CGRectMake(0, 0,320,480)];
            myview.backgroundColor=[UIColor redColor];
            [[[CCDirector sharedDirector] openGLView] addSubview:myview];
            [myview release]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:39:24.530

您可以在 cocos2d 游戏活动中添加视图为

```
 TextView txv=new TextView(GameActivity.context);
        txv.setText("ABC");
        LayoutParams layoutParams =new LayoutParams();
        CCDirector.sharedDirector().getActivity().addContentView(txv,layoutParams); 
```

# php - 如何加快 file_get_contents？

> ID：13679976
> 
> 赞同：13
> 
> 时间：2012-12-03T09:02:45.950
> 
> 标签：php, file-get-contents

这是我的代码：

```
$language = $_GET['soundtype'];
$word = $_GET['sound'];
$word = urlencode($word);
if ($language == 'english') {
    $url = "<the first url>";
} else if ($language == 'chinese') {
    $url = "<the second url>";
}
$opts = array(
  'http'=>array(
    'method'=>"GET",
    'header'=>"User-Agent: <my user agent>"
  )
);
$context = stream_context_create($opts);
$page = file_get_contents($url, false, $context);
header('Content-Type: audio/mpeg');
echo $page; 
```

但我发现这运行得非常慢。

有没有可能的优化方法？

**注意：** `$url`是一个远程网址。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T09:09:26.100

It's slow because `file_get_contents()` reads the entire file into `$page`, PHP waits for the file to be received before outputting the content. So what you're doing is: downloading the entire file on the server side, then outputting it as a single huge string.

`file_get_contents()` does not support streaming or grabbing offsets of the remote file. An option is to create a raw socket with [`fsockopen()`](http://php.net/manual/en/function.fsockopen.php), do the HTTP request, and read the response in a loop, as you read each chunk, output it to the browser. This will be faster because the file will be streamed.

Example from the Manual:

```
$fp = fsockopen("www.example.com", 80, $errno, $errstr, 30);
if (!$fp) {
    echo "$errstr ($errno)<br />\n";
} else {

    header('Content-Type: audio/mpeg');

    $out = "GET / HTTP/1.1\r\n";
    $out .= "Host: www.example.com\r\n";
    $out .= "Connection: Close\r\n\r\n";
    fwrite($fp, $out);
    while (!feof($fp)) {
        echo fgets($fp, 128);
    }
    fclose($fp);
} 
```

The above is looping while there is still content available, on each iteration it reads 128 bytes and then outputs it to the browser. The same principle will work for what you're doing. You'll need to make sure that you don't output the response HTTP headers which will be the first few lines, because since you are doing a raw request, you will get the raw response with headers included. If you output the response headers you will end up with a corrupt file.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T09:19:22.120

与其在输出之前下载整个文件，不如考虑像这样流式传输它：

```
$in = fopen($url, 'rb', false, $context);
$out = fopen('php://output', 'wb');

header('Content-Type: video/mpeg');
stream_copy_to_stream($in, $out); 
```

如果你有胆量，你甚至可以尝试（但这绝对是实验性的）：

```
header('Content-Type: video/mpeg');
copy($url, 'php://output'); 
```

另一种选择是使用内部重定向并使您的网络服务器代理您的请求。这将释放 PHP 做其他事情。另请参阅[我关于 X-Sendfile 和朋友的帖子](https://stackoverflow.com/questions/10596116/caching-http-responses-when-they-are-dynamically-created-by-php/10596231#10596231)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T09:17:41.937

正如@MrCode 所解释的，首先将文件下载到您的服务器，然后将其传递给客户端当然会导致下载时间加倍。如果要将文件直接传递给客户端，请使用[`readfile`](http://php.net/readfile).

或者，考虑一下您是否不能简单地使用 a 将客户*端重定向*到文件 URL，`header("Location: $url")`以便客户端可以直接从源获取文件。

# jquery - 如何强制从 ASP.NET WebAPI 下载文件

> ID：13679981
> 
> 赞同：4
> 
> 时间：2012-12-03T09:02:56.733
> 
> 标签：jquery, asp.net, asp.net-mvc, rest, asp.net-web-api

这是我的网络 API 代码：

```
 [HttpPost]
    public HttpResponseMessage PostFileAsAttachment()
    {
        string path = "D:\\heroAccent.png";
        if (File.Exists(path))
        {

            HttpResponseMessage result = new HttpResponseMessage(HttpStatusCode.OK);
            var stream = new FileStream(path, FileMode.Open);
            result.Content = new StreamContent(stream);
            result.Content.Headers.ContentType = new MediaTypeHeaderValue("application/octet-stream");
            result.Content.Headers.ContentDisposition = new ContentDispositionHeaderValue("attachment");
            result.Content.Headers.ContentDisposition.FileName = "xx.png";
            return result;
        }
        return new HttpResponseMessage(HttpStatusCode.NotFound);
    } 
```

以及如何编写客户端（视图）强制下载文件给我（如自动下载模式（打开、另存为）可以弹出...）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:55:08.987

如前所述，您不能从 ajax 触发“打开/另存为”对话框。

如果您想在下载文件时保留当前页面内容，您可以在页面的某处添加一个隐藏的 iframe，并让您的下载链接在幕后执行一些 JS 以将所述 iframe 的*src*属性设置为适当的位置。

```
$('iframeSelector').attr('src', downloadLinkLocation) 
```

我已经使用返回*FileContentResult*的操作对此进行了测试，但是如果您在响应标头中设置*ContentDisposition*，就像您所做的那样，我看不出它不能与 WebAPI 方法一起使用的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:24:33.747

可用于文件的 ActionResult 类型之一是 FileResult 如果要传输的内容存储在磁盘文件中，则可以使用 FilePathResult 对象。如果您的内容可通过流获得，则使用 FileStreamResult，如果您将其作为字节数组提供，则选择 FileContentResult。所有这些对象都派生自 FileResult，并且彼此的不同之处仅在于它们将数据写入响应流的方式。

例如：对于 PDF

```
public FileResult Export()
{
var output = new MemoryStream();
    :
    return File(output.ToArray(), "application/pdf", "MyFile.pdf");
} 
```

请找到下面的链接以了解如何使用 Ajax Jquery 调用操作方法

[http://blog.bobcravens.com/2009/11/ajax-calls-to-asp-net-mvc-action-methods-using-jquery/](http://blog.bobcravens.com/2009/11/ajax-calls-to-asp-net-mvc-action-methods-using-jquery/)

您可以参考这篇文章，它可以让您对 FileResult 有所了解

[http://www.dotnetcurry.com/ShowArticle.aspx?ID=807](http://www.dotnetcurry.com/ShowArticle.aspx?ID=807)

# python - 为什么 pip 安装从需求文件中失败，即使其中一个在 python django 中失败

> ID：13679987
> 
> 赞同：0
> 
> 时间：2012-12-03T09:03:15.330
> 
> 标签：python, django, virtualenv, pip

我正在使用 pip 从需求文件中安装软件包

`pip install -r requirements.txt`

我已经看到，如果我在文本文件中有 50 个包并且最后一个包失败，那么 pip 不会安装上述 49 个包中的任何一个包并且失败。

我必须重复整个步骤，它会花费更多时间再次下载所有这些。

这是预期的行为吗？为什么它不只安装它能够安装的 49 个软件包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:09:21.667

我想就像`pip install --help`说的那样，`-r`选项：

```
Install all the packages listed in the given
                        requirements file. 
```

因此，当任何要求失败时，pip 最好以状态 1 存在并回滚其他包安装，就像一个事务一样。

您可以`pip install --no-download -r requirements.txt`在修复需求文件中的错误之后再次下载其他软件包，因为它们已经下载并且由于安装不成功而停留在那里。

# java - 通信链路故障 发送到服务器的最后一个数据包是 1 毫秒前。

> ID：13679990
> 
> 赞同：8
> 
> 时间：2012-12-03T09:03:48.543
> 
> 标签：java, android, mysql, mysqlconnection

我尝试连接`mysql database`但失败了，并且显示了这个错误

```
Communications link failure Last packet sent to the server was 1 ms ago 
```

这是我的代码？任何人都可以帮助我

```
package android_programmers_guide.testconnection;

import java.sql.Connection;
import java.sql.DriverManager;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.Color;
import android.view.Menu;
import android.widget.EditText;

public class TestConnection extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_test_connection);

           Connection conn = null;
           String url = "jdbc:mysql://127.0.0.1:3306/test";
           String driver = "com.mysql.jdbc.Driver";
           String userName = "root"; 
           String password = "root";

           try {
           Class.forName(driver).newInstance();
           conn = DriverManager.getConnection(url,userName,password);

           EditText editText=(EditText) findViewById(R.id.editText1);

           editText.setBackgroundColor(Color.GREEN);
           editText.setText("Connected to the database");

           conn.close();

           editText.setBackgroundColor(Color.BLUE);
           editText.setText("Disconnected from database");

           } catch (Exception e) {
           e.printStackTrace();
           }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_test_connection, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T18:26:23.997

这个问题是因为您传递的 URL 不起作用。

检查以下事项：

1.  确保您的 localhost MySQL 正在运行
2.  通过键入来检查 MySQL 的状态`\s`。
3.  检查端口号并确保您使用的是相同的端口号。

如果以上所有内容都正确，则可能您没有权限。

使用`grant all on *.*`“密码”识别，然后运行刷新权限，然后替换`127.0.0.1`为`localhost`并尝试重新连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:25:54.027

android 应用程序无法与同一系统中的*mysql通信。*因为，当您运行 android 应用程序时，它会在*emulator*中运行。模拟器是一个 类似于安卓设备的[虚拟移动设备。](http://developer.android.com/tools/help/emulator.html)*模拟器*本身有一个IP*地址*。因此，根据应用程序的*ip* `127.0.0.1`是模拟器的*ip*，因此 android 应用程序将尝试与模拟器中的*mysql*进行通信。众所周知，模拟器中不能有*mysql*，通信会失败。您可以使用*SQLite*用于数据存储。如果您希望您的 android 应用程序与*mysql*通信，您需要在另一个系统中安装*mysql*并提供该系统的*ip*。修改您的代码如下：

```
String url = "jdbc:mysql://192.168.1.102:3306/test"; 
```

在这里，我提到`192.168.1.102`的是第二个系统的*ip*。并且不要忘记在尝试之前对这些系统进行物理连接。

附加知识：- *mysql*与 android 应用程序的直接通信不是正确的方法。*制作一个与mysql*通信的 Web 应用程序。在其中添加一个[Web 服务](http://www.tutorialspoint.com/webservices/what_are_web_services.htm)以将数据存储到*mysql*中。在 android 应用程序中添加一个 web 层，它通过这个 web 服务与 web 应用程序通信。您可以使用*xml*或*[JSON](http://www.json.org/)*通过 web 服务将数据从 android 应用程序传输到 web 应用程序。web 应用程序应该将数据存储到 mysql 中由 android 应用程序的 Web 服务调用接收。