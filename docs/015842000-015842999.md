# StackOverflow 问答 15842000-15842999

# perl - 如何在不超时分叉进程的情况下杀死在我的 perl 脚本中花费太长时间的分叉进程？

> ID：15842007
> 
> 赞同：1
> 
> 时间：2013-04-05T19:29:42.767
> 
> 标签：perl, fork, kill

在并行处理“事物”时，我一直在使用以下模板来满足我的所有分叉/流程需求。它基本上循环遍历我需要处理的所有内容，一次 X 个条目，并且超时任何需要太长时间的条目：

```
my $num_procs = 0;
foreach my $entry (@entries) {
  $num_procs++;
  if($num_procs == $MAX_PROCS) {
    wait();
    $num_procs--;
  }
  my $pid = fork();
  if($pid == 0) {
    process($entry);
  } 
}
for (; $num_procs>0; $num_procs--) {
  wait();
} 
```

“进程”例程具有以下模板，该模板使进程超时：

```
my $TIMEOUT_IN_SECONDS = 15;
eval {
  local $SIG{ALRM} = sub { die "alarm" };
  alarm($TIMEOUT_IN_SECONDS);       

  # do something

  alarm(0);
};
if ($@) {
  # do something about the timeout
} 
```

我现在遇到了一个问题，因为孩子无法超时，所以这不再有效。（我认为这是由于 NFS 的 I/O 阻塞问题造成的）我认为解决这个问题的唯一方法是让父母自己杀死 -9 孩子。

有没有办法修改我的代码来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:57:00.743

无论何时`alarm`都可能是片状的，这是[穷人警报的](https://stackoverflow.com/a/8452732/168657)一个很好的用例：

```
my $pid = fork();
if ($pid == 0) {
    ...  # child code
    exit;
}
if (fork() == 0) {
    my $time = 15;
    exec($^X, "-e", "sleep 1,kill(0,$pid)||exit for 1..$time;kill -9,$pid");
    die; # shouldn't get here 
} 
```

第一个`fork`触发您的子进程。第二个`fork`是运行一个进程以在`$time`几秒钟后杀死第一个进程。

# r - source() 需要很长时间并且经常崩溃

> ID：15842008
> 
> 赞同：1
> 
> 时间：2013-04-05T19:29:42.763
> 
> 标签：r

我使用`dump()`命令在 R 中转储了一些数据帧。特定的转储文件约为 200 MB，一个约为 1.5 GB。后来我尝试使用它们来检索它们`source()`，这需要很长时间，并且说 Windows 在 3-4 小时后停止工作。我在 Windows 7 中使用 64 位 R 3.0.0（我也在 R 2.15.3 中尝试过），内存为 48 GB。对于其中一个文件，它引发了一些内存错误（我现在没有日志），但从大约 15 个数据集中加载了 4-5 个数据集。

如果我知道名称，有什么方法可以加载特定的数据集？还是有其他方法？

我已经吸取了教训，可能会保存命令来创建数据和原始数据。或一个转储文件（或 R 图像文件）中的一个数据

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T19:36:00.887

使用`save()`and`load()`而不是`dump()`and `source()`。

`save()`将数据的二进制表示形式写入`.Rdata`文件，然后可以使用`load()`.

`dump()`将所有内容转换为文本表示，`source()`然后必须重新转换回二进制。该过程的两端都*非常*低效。

# asp.net-mvc-3 - MVC 3 模型绑定和没有为此对象定义的无参数构造函数

> ID：15842013
> 
> 赞同：1
> 
> 时间：2013-04-05T19:29:56.657
> 
> 标签：asp.net-mvc-3, cascadingdropdown

我创建了一个运行良好的视图，直到我添加了一些 JQuery 来支持级联下拉菜单。我相信这样做，我打破了视图和模型之间的绑定。我收到错误“没有为此对象定义无参数构造函数”。提交表单时。显而易见的解决方案是添加一个无参数构造函数，但我假设 postmodel 将为空？下面的代码片段。

在此先感谢您的帮助。

看法：

```
<script type="text/javascript">
$(document).ready(function () {
      $("#ddlCategories").change(function () {
        var iCategoryId = $(this).val();
            $.getJSON(
                 "@Url.Content("~/Remote/SubCategoriesByCateogry")",
                { id: iCategoryId },
                function (data) {
                    var select = ResetAndReturnSubCategoryDDL();
                    $.each(data, function (index, itemData) {
                        select.append($('<option/>', { value: itemData.Value, text: itemData.Text }));
                    });
                });
        });
    function ResetAndReturnSubCategoryDDL() {
        var select = $('#ddlSubCategory');
        select.empty();
        select.append($('<option/>', { value: '', text: "--Select SubCategory--" }));
        return select;
    }
}); 
```

...

```
 <div class="editor-field">
            @Html.DropDownList("iCategoryID", Model.Categories,"--Select Category--", new Dictionary<string,object>{ {"class","dropdowns"},{"id","ddlCategories"}})
            @Html.ValidationMessage("iCategoryID")
        </div>
        <div class="editor-label">
           @Html.LabelFor(model => model.SubCategories, "SubCategory")
        </div>
        <div class="editor-field">
              @Html.DropDownListFor(model => model.SubCategories, new SelectList(Enumerable.Empty<SelectListItem>(), "iSubCategoryID", "SubCategory",Model.SubCategories), "--Select SubCategory--", new { id = "ddlSubCategory" })
              @Html.ValidationMessage("iSubCategoryID")
        </div> 
```

控制器：

```
 [HttpPost]
     public ActionResult Create(VendorCreateModel postModel)
    {
        VendorCreateEditPostValidator createValidator = new VendorCreateEditPostValidator(
            postModel.iCategoryID,
            postModel.iSubCategoryID,
            postModel.AppliedPrograms,
            m_unitOfWork.ProgramRepository,
            new ModelStateValidationWrapper(ModelState));

        if (ModelState.IsValid)
        {
            int categoryId = int.Parse(postModel.iCategoryID);
            int subcategoryId = int.Parse(postModel.iSubCategoryID);
            var programIds = postModel.AppliedPrograms.Select(ap => int.Parse(ap));
            var programs = m_unitOfWork.ProgramRepository.GetPrograms(programIds);

            Vendor vendor = postModel.Vendor;
            vendor.Category = m_unitOfWork.CategoryRepository.GetCategory(categoryId);
            vendor.SubCategory = m_unitOfWork.SubCategoryRepository.GetSubCategory(subcategoryId);

            foreach (Program p in programs)
                vendor.Programs.Add(p);

            m_unitOfWork.VendorRepository.Add(vendor);
            m_unitOfWork.SaveChanges();

            return RedirectToAction("Index");  
        }

        VendorCreateModel model = new VendorCreateModel(
            postModel.Vendor,
            postModel.iCategoryID,
            postModel.iSubCategoryID,
            postModel.AppliedPrograms,
            User.Identity.Name,
            m_unitOfWork.CategoryRepository,
            m_unitOfWork.SubCategoryRepository,
            m_unitOfWork.PermissionRepository);

        return View(model);
    } 
```

遥控器：

```
 [AcceptVerbs(HttpVerbs.Get)]
    public JsonResult SubCategoriesByCateogry(int id)
    {
        System.Diagnostics.Debug.WriteLine(id);

        var SubCategories = db.SubCategories
            .Where(v => v.iCategoryID == id)
            .OrderBy(v => v.sDesc)
            .ToList();

        var modelData = SubCategories.Select(v => new SelectListItem()
        {
            Text = v.sDesc,
            Value = v.iSubCategoryID.ToString()
        });

        return Json(modelData, JsonRequestBehavior.AllowGet);
    } 
```

供应商创建模型：

```
public class VendorCreateModel
{
    public VendorCreateModel()
    {

    }

    public VendorCreateModel(
        Vendor vendor, 
        string categoryId,
        string subcategoryId,
        IEnumerable<string> appliedPrograms, 
        string username,
        ICategoryRepository categoryRepository,
        ISubCategoryRepository subcategoryRepository,
        IPermissionRepository permissionRepository)
    {
        UserHasProgramsValidator programValidator = new UserHasProgramsValidator(username, permissionRepository);
        var availablePrograms = programValidator.AvailablePrograms;

        HashSet<Category> applicableCategories = new HashSet<Category>();
        foreach (var p in availablePrograms)
            foreach (var c in categoryRepository.GetCategoriesByProgram(p.iProgramID))
                applicableCategories.Add(c);

        this.Vendor = vendor;
        this.AppliedPrograms = appliedPrograms;
        this.Categories = new SelectList(applicableCategories.OrderBy(x => x.sDesc).ToList(), "iCategoryID", "sDesc");
        this.SubCategories = new SelectList(subcategoryRepository.GetAllSubCategories().OrderBy(x => x.sDesc).ToList(), "iSubCategoryID", "sDesc");

        if (!string.IsNullOrEmpty(categoryId))
        {
            int temp;
            if (!int.TryParse(categoryId, out temp))
                throw new ApplicationException("Invalid Category Identifier.");
        }

        this.iCategoryID = categoryId;
        this.iSubCategoryID = subcategoryId;
        this.ProgramItems = availablePrograms
            .Select(p => new SelectListItem()
            {
                Text = p.sDesc,
                Value = p.iProgramID.ToString(),
                Selected = (AppliedPrograms != null ? AppliedPrograms.Contains(p.iProgramID.ToString()) : false)
            });
    }

    public Vendor Vendor { get; set; }
    public SelectList Categories { get; set; }
    public SelectList SubCategories { get; set; }
    public string iCategoryID { get; set; }
    public string iSubCategoryID { get; set; }
    public IEnumerable<SelectListItem> ProgramItems { get; set; }

    [AtLeastOneElementExists(ErrorMessage = "Please select at least one program.")]
    public IEnumerable<string> AppliedPrograms { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:36:46.420

我纠正了这个问题，并想分享一下，以防其他人像我一样用头撞到他们的桌子上。基本上我更改了下拉列表以反映：

```
@Html.DropDownListFor(model => model.iSubCategoryID, new SelectList(Enumerable.Empty<SelectListItem>(), "iSubCategoryID", "SubCategory",Model.SubCategories), "--Select SubCategory--", new Dictionary<string,object>{ {"class","dropdowns"},{"id","ddlSubCategory"},{"name","iSubCategoryID"}}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:21:23.900

假设这里的问题出在您的 VendorCreateModel 中，您需要添加或删除无参数构造函数，然后在您的操作方法中创建一个实例并通过 TryUpdateModel 填充它。或者使用 FormsCollection 解析表单（不是粉丝）。

您没有在此处发布视图模型的代码，但基本假设是它会映射。

# java - 使用正则表达式匹配日期范围

> ID：15842017
> 
> 赞同：2
> 
> 时间：2013-04-05T19:30:13.270
> 
> 标签：java, regex

我需要一个正则表达式来匹配一些文件名，实际上它们是过时的日志，我只需要从 24 日到 31 日获取日志。还有 2 种类型的日志。

日志文件名如下：

```
log_file_first-Type_24-03-2013
log_file_second-Type_24-03-2013 
```

我试过以下：

```
log_file_(first|second)\-Type_(2,3)(4,1)\-03\-2013 
```

但这也包含 21 日，如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T19:34:26.300

正则表达式很强大，但也有一些限制。整数范围内没有那么好。这不是一个优雅的解决方案，但有效：

```
log_file_(first|second)\-Type_(2[4-9]|30|31)\-03\-2013 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T19:35:03.140

尝试这个：

```
log_file_(first|second)\-Type_(2[4-9]|3[01])\-03\-2013 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T19:34:26.057

```
log_file_(first|second)-Type_(2[4-9]|3[01])-03-2013 
```

# database - 将关系分解为 3NF，如何分离关系？

> ID：15842018
> 
> 赞同：0
> 
> 时间：2013-04-05T19:30:13.360
> 
> 标签：database, relation, 3nf

给定一个关系，`R = ABCDE`

和这组FD：

```
AB > C
DE > C
B  > D 
```

我能够找到候选键`ABE`（正确吗？）

我需要将这个关系 R 分解为 3NF。

我不明白的是，你用什么来分解？我认为您考虑了候选键和FD，但具体过程是什么？我看过的所有内容都太密集了，无法应用于这个小问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T20:53:47.573

ABE 是唯一的候选键。

从 1NF 的测试开始，并证明现有的关系 R 满足 1NF。*当你找到一个 R不满足*的范式时，修正它。

例如，在测试 2NF 时，您会看到 FD AB->C 是部分密钥依赖关系。（ABE 是唯一的候选键；C 仅依赖于该键的*一部分*。）使用投影从 R 中删除 C。

*   R { **ABE** CD} 是我们开始的。通过投影去除 C 后，我们有
*   R [1] { **ABE** D}，和
*   R [2] { **AB** C}

重复直到所有表都在 5NF 中。（R [1]不在 2NF 中；R [2]在 5NF 中。）

# android - 在 Android 中选择最佳存储类型

> ID：15842021
> 
> 赞同：0
> 
> 时间：2013-04-05T19:30:17.267
> 
> 标签：android, xml, database, sqlite, parsing

关于这个问题有很多类似的问题，但我有明确的问题要问你。

我是 Android 开发的新手，之前我只开发过存储小型数据的小型应用程序。例如国家列表、日历、生日提醒等。我将我的小数据存储在单个 XML 文件中，并用简单的方法对其进行解析。这对我来说已经足够了。但是对于我的移动应用程序开发课程，我选择了一个可以存储大量静态数据的项目。

我的项目的规格如下：

*   大约有200个实体。
*   每个实体有大约 20 个子类别，它们以文本格式存储。
*   每个子类别有大约 30 个子类别，它们以文本格式再次存储。
*   同样对于每个父实体，我将有 2-3 个图像

如果我简单计算，我必须为我的应用程序存储 200 X 20 X 30 = 120.000 个静态数据，并且数据不会改变。这只是安装和使用应用程序。不需要在线数据交互。（如果数据有一些变化，我会在很长一段时间内发布重大更新。）

**我的问题是关于存储方法。**

我应该选择哪种方式？SQLite 或 XML 解析？对于您的答案，您能解释一下您选择的优点/缺点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:44:23.440

有趣的项目，虽然不一定现实。

要管理大量“静态”数据，您需要一个数据库。XML 解析迫使您将数据存储在内存中，这意味着您必须定期将其读入内存。请记住，当用户访问您的应用程序时，您无法计算内存中的数据；Android 之前可能已经破坏了您的应用程序。

另一方面，您可以直接从您的应用程序使用磁盘上的 SQLite 数据库。它是持久的，即使您的应用程序消失了。安装应用程序时，您必须加载一次数据库。

考虑将 SQLite 数据库包装在内容提供程序中。除其他外，这将允许您使用 CursorLoader 执行异步查询。

# php - 当我尝试使用 Php 进行删除时，如何跟踪会发生什么？

> ID：15842023
> 
> 赞同：0
> 
> 时间：2013-04-05T19:30:21.047
> 
> 标签：php

我有以下代码：

```
<?php
    // configuration
    require("../includes/config.php"); 

    // if form was submitted
    if($_GET['id'])
    {    
        $id = $_GET['id'];
        $id = mysql_escape_string($id);
        $sql = "DELETE FROM city WHERE id = $id";
        mysql_query($sql);
    }
?> 
```

当我尝试从浏览器运行它时，我收到一条错误消息：

```
http://localhost/delete.php&id=3
The requested URL /delete.php&id=3 was not found on this server

http://localhost/delete.php
 Notice: Undefined index: id in /home/localhost/html/delete.php on line 6 
```

有人可以告诉我如何追踪正在发生的事情。请注意，我正在运行的机器无法运行像提琴手这样的东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T19:34:25.160

URL中传入的第一个参数必须用a分隔`?`，后面的所有参数都用`&`（使用GET协议时）分隔

您的 URL 必须采用以下形式：

删除.php?id=3

使用表单的后续参数：

```
delete.php?id=3&name=foo&page=bar 
```

# java - 反射返回带有空元素的 Set

> ID：15842024
> 
> 赞同：3
> 
> 时间：2013-04-05T19:30:23.370
> 
> 标签：java, reflection, reflections

我正在使用[反射](http://code.google.com/p/reflections/)来查找具有特定注释的类。我的项目结构如下

一个 WAR 包：WEB-INF/classes/...packages.../ClassAnnoted1.class

战争中包含的一个 JAR 包，它有一个执行此代码的类：

```
Reflections reflections= new Reflections(ClasspathHelper.forWebInfClasses(servletContext))
Set set= reflections.getTypesAnnotatedWith(CustomAnnotation.class) 
```

CustomAnnotation 也存在于 JAR 包中。

设置大小是正确的（即，如果我的 WAR jar 中有 3 个带有注释的类，则设置大小返回为 3），但其中的所有元素都是 null 而不是 Class。我需要获取类并检查 JAR 类中的注释参数。

有人知道为什么会这样吗？

编辑：

```
Reflections reflections= new Reflections("com.my.customAnnotededClasses"); //package that my annoted class is in
Set set= reflections.getTypesAnnotatedWith(CustomAnnotation.class); 
```

也不起作用，在这种情况下，设置长度为零，而不是带有注释的类数。

编辑 2：好的，真正的问题是我将整个应用程序打包为 EAR，所以我有以下内容：

```
EAR
----> WAR
----> JAR 
```

jar 包含在 EAR lib 文件夹中，而不是 WAR lib 文件夹中。所以jar类看不到war类，一旦我让WAR直接依赖于JAR，就像这样：

```
EAR
----> WAR
---------> JAR 
```

它开始工作了。但是最初的问题仍然存在，可能存在我希望将 Jar 类包含在 EAR 而不是 WAR 中的情况（例如，如果我有多个需要使用我的 jar 的战争）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:30:23.997

我想我不能使用反射库来做到这一点。所以我用手做了：

```
public static List<Class<?>> getClassesAnnotatedWith(Class annotation, ServletContext servletContext) {
    List<Class<?>> webClasses, jarClasses;
    webClasses= getClassesAnnotedWithFromClassLoader(annotation, servletContext.getClassLoader());
    jarClasses= getClassesAnnotedWithFromClassLoader(annotation, Thread.currentThread().getContextClassLoader());
    for (Class<?> jarClass : jarClasses) {
        Class<?> elementToAdd= null;
        for (Class<?> webClass : webClasses) {
            if ( ! jarClass.getName().equals(webClass.getName())) {
                elementToAdd= jarClass;
            }
        }
        if(elementToAdd != null) {
            webClasses.add(elementToAdd);
        }
    }
    return webClasses;
}

 private static List<Class<?>> getClassesAnnotedWithFromClassLoader(Class annotation, ClassLoader classLoader) {
        List<Class<?>> classes= new ArrayList<Class<?>>();
        Class<?> classLoaderClass= classLoader.getClass();
        while (! classLoaderClass.getName().equals("java.lang.ClassLoader")) {
            classLoaderClass= classLoaderClass.getSuperclass();
        }
        try {
            Field fldClasses= classLoaderClass.getDeclaredField("classes");
            fldClasses.setAccessible(true);
            Vector<Class<?>> classesVector= (Vector<Class<?>>) fldClasses.get(classLoader);
            for (Class c : classesVector) {
                if (c.isAnnotationPresent(annotation)) {
                    classes.add(c);
                }
            }
        } catch (Exception e) { }
        return classes;
    } 
```

我通过 ServletContext 对象从我的 WAR 包中获取 ClassLoader。如果在 WAR 和 JAR 中都使用注释和相同的名称定义了一个类，那么还有一种保护措施（尽管您可能应该检查包是否也相同）。

请注意，您可能永远不应该在自己的项目中使用此代码（可能仅用于调试）。它涉及反映 ClassLoader 类以公开“类”属性。例如，Java 9 中可能不存在此属性，因此请注意。如果您正在与第三方编写的模块进行交互，这也可能存在一些安全问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:25:39.390

我有一个类似的[问题](http://cubiccow.blogspot.de/2012/07/nutshell-annotations-and-osgi.html)。你确定，你将注释类包含在你的类路径中吗？如果它们没有加载，它们会以某种方式被找到但不会真正返回，并且没有任何异常或任何东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:10:18.673

[Reflections](https://code.google.com/p/reflections/)库给了我各种问题。现在我正在使用[Guava](https://code.google.com/p/guava-libraries/)库的反射部分：到目前为止，没有发生意外行为。无论如何，我认为问题的根源是 Java 类加载器是非常罕见的。也许尝试加载类*CustomAnnotation.class*之前在反射 API 中使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T11:03:19.490

您的代码应该可以在传统环境中运行。但是，在不同的环境中，例如 osgi，您会得到：

1) 不同协议的 url (bundle/vfs/...)

2）不同的类加载器。

在第一种情况下，您应该**a)**添加相关的 UrlType（参见[Vfs](https://code.google.com/p/reflections/source/browse/trunk/reflections/src/main/java/org/reflections/vfs/Vfs.java)中的 DefaultUrlTypes 示例），或**b)**使用不同的方法获取 url（参见 ClasspathHelper 中的其他方法并检查返回的 URL 列表）

在第二种情况下，您应该**a)**将 customClassLoader 传递给 Reflections 构造函数或 ConfigurationBuilder 以便进行解析，或者**b)**直接查询存储`reflections.getStore().get(TypeAnnotationsScanner.class)`

另见[#8339845](https://stackoverflow.com/questions/8339845/reflections-library-not-working-when-used-in-an-eclipse-plug-in)，[JbossIntegration](https://code.google.com/p/reflections/wiki/JBossIntegration)

# java - Uno 抽卡游戏无法将卡片打印到面板上

> ID：15842041
> 
> 赞同：-1
> 
> 时间：2013-04-05T19:32:03.260
> 
> 标签：java, swing, user-interface

我正在开发一个从 uno 卡片集合（甲板）中抽取卡片的程序。它应该在启动时显示第一张牌，然后每次按下“下一张牌”按钮时都会抽出另一张牌。但是，我对 GUI 很陌生，无法弄清楚我做错了什么。我在应该显示卡片文本表示的框中得到“Uno”。

```
package Uno;

import java.awt.*;
import javax.swing.*;
import java.awt.event.*;

public class GameFrame extends JFrame
{
private PlayingCardPanel panel;
    private JPanel field;
    private JPanel menu;

public GameFrame(){
       this.setLayout(new FlowLayout());
       this.setSize( 300, 150);
       this.setTitle("UNO");
       this.createFieldPanel();
       this.createMenuPanel();
       this.add(field);
       this.add(menu);
   }

    private void createMenuPanel(){
      menu = new JPanel();
      menu.setBounds(0,300,250,100);

      JButton drawButton = new JButton("Next Card");
      drawButton.setSize(300,200);
      drawButton.addActionListener(new drawListener());

      menu.add(drawButton);
    }

    private void createFieldPanel()
    {
        field = new JPanel();
        field.setBounds(0,0,250,200);
        panel = new PlayingCardPanel();
        field.add(panel);
    }

   private class drawListener implements ActionListener{
       public void actionPerformed(ActionEvent e){
           panel.drawCard();
       }
   }
}

    package Uno;

import java.awt.*;
import javax.swing.*;

public class PlayingCardPanel extends JPanel{

    private StandardDeck playingdeck;
    private PlayingCard card;

    public PlayingCardPanel(){
        this.setPreferredSize(new Dimension(100,100));   
        playingdeck = new StandardDeck();
        playingdeck.shuffle();
        playingdeck.drawTopCard();
    }

    public void drawCard(){
        playingdeck.drawTopCard();
    }

    public void paintComponent(Graphics g){
        super.paintComponent(g);
        int panelWidth = this.getWidth();
        int panelHeight = this.getHeight(); 
        g.drawRoundRect(0, 0, panelWidth-1, panelHeight-1, 10, 10);
        card = playingdeck.drawTopCard();
        g.drawString(card.toString(), 75, 75);
    }
}

    package Uno;

import Uno.GameFrame;

public class GameApp{

    /**
     * @param args
     */
    public static void main(String[] args)
    {
        GameFrame aBoard = new GameFrame();
        aBoard.setVisible(true);
    }

}

    package Uno;

public class PlayingCard {

    private int number; 
    private String color;

    public int getNumber() {
            return number;
    }

    public String getColor(){
            return color;
    }

    public PlayingCard(PlayingCard card){
            number = card.getNumber();
            color = new String(card.getColor());
    }   

    public PlayingCard(int cardNumber, String cardColor){
        number = cardNumber;
        color = cardColor;       
    }
}

    package Uno;

public class PlayingCard {

    private int number; 
    private String color;

    public int getNumber() {
            return number;
    }

    public String getColor(){
            return color;
    }

    public PlayingCard(PlayingCard card){
            number = card.getNumber();
            color = new String(card.getColor());
    }   

    public PlayingCard(int cardNumber, String cardColor){
        number = cardNumber;
        color = cardColor;       
    }
}

    package Uno;

import java.util.Collections;
import java.util.Vector;

public class StandardDeck {

        protected Vector<PlayingCard> cardsVector;

        public StandardDeck(){     
            cardsVector = new Vector<PlayingCard>();
            String[] colors = {"blue","red","yellow","green"};
            for(String color : colors){
                for(int i=1;i<=9;i++){
                        cardsVector.add(new PlayingCard(i,color));
                        cardsVector.add(new PlayingCard(i,color));
                }

                cardsVector.add(new PlayingCard(0,color));

                for(int i=-3;i<0;i++){
                        cardsVector.add(new PlayingCard(i,color));
                        cardsVector.add(new PlayingCard(i,color));
                }
            }

            for(int i=0;i<4;i++){
                cardsVector.add(new PlayingCard(-4,"black"));
                cardsVector.add(new PlayingCard(-5,"black"));
            }
    }

    public int getSize(){
            return cardsVector.size();
    }

    public StandardDeck reset(){
        StandardDeck resetDeck = new StandardDeck();
        return resetDeck;
    }

    public void shuffle(){
        Collections.shuffle(cardsVector);
    }

    public PlayingCard drawTopCard(){
            return new PlayingCard(cardsVector.remove(cardsVector.size()-1));
    }
}

    package Uno;

import Uno.IPlayingCard;

public interface IDeck
{
   public void reset();
   public void shuffle();
   public IPlayingCard drawTopCard(PlayingCard card);  

}

    package Uno;

import Uno.PlayingCard;

public interface IPlayingCard extends Comparable<PlayingCard>{
   public String getColor();
   public String getNumber();
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:13:53.317

它实际上是在打印类似的东西`Uno.PlayingCard@56609959`——它的最后一部分被截断了，所以你只会在面板的边缘看到“Uno”。

您`toString()`在 PlayingCard 类中缺少实现。

```
public void paintComponent(Graphics g)
{
    super.paintComponent(g);
    int panelWidth = this.getWidth();
    int panelHeight = this.getHeight();
    g.drawRoundRect(0, 0, panelWidth - 1, panelHeight - 1, 10, 10);
    card = playingdeck.drawTopCard();
    g.drawString(card.toString(), 75, 75);  // you're calling toString() here...
} 
```

由于您没有实现它，它正在调用默认的 Object.toString() 方法。你可能打算在你的 PlayingCard 类中添加这样的东西？

```
public String toString() {
    return ""+number;
} 
```

# php - 使用 Yii 框架在 safari 上提交表单后 PHP $_POST 数组为空

> ID：15842043
> 
> 赞同：0
> 
> 时间：2013-04-05T19:32:13.853
> 
> 标签：php, safari

代码适用于除 Safari 之外的所有浏览器。

我有一个具有`target="_blank"`属性的表单。提交表单时，使用 Safari 时 $_POST 数组为空（使用 a 检查`Yii::log(print_r($_POST,true));`）但是，如果您 ctrl + 单击提交按钮（Safari 在新窗口中打开链接的快捷方式），则页面按预期加载。

以前有人遇到过这样的事情吗？解决方案？

让我补充一点，当`target="blank"`不存在时，代码也可以工作。

# php - MySQL 服务器已消失（未超时）

> ID：15842045
> 
> 赞同：0
> 
> 时间：2013-04-05T19:32:21.390
> 
> 标签：php, mysql

我已经在 SO 和 Google 上进行了彻底的搜索，试图解决这个问题，但一直没能解决。我正在代码的某个部分执行 INSERT，PHP 立即使插入失败，报告“MySQL 服务器已消失”。尽管有此通知，MySQL 服务器仍对所有其他操作正常响应。其他插入工作正常，如果我手动运行完全相同的查询，它会毫无问题地运行并插入数据。MySQL 是 5.5.30 版，PHP 是 5.4.6 版。插入查询如下：

```
INSERT INTO orders 
            SET userID = '80'
            , billing_addr = 'test_addr'
            , shipping_addr = 'test_addr'
            , ship_instructions = ''
            , shipping = 0
            , user_comments = ''
            , tax = 0
            , total = 0
            , admin_comments = ''
            , source_id = 13
            , billing_profile_id = 32
            , recurring = 'No'
            , total_raw_product_cost = 0
            , total_network_payout = 0
            , shipping_code = '' 
```

我重新启动了 Apache，重新启动了 MySQL，检查了表没有崩溃。当此查询失败时，没有信息发送到 MySQL 日志。

PHP 是一个基本查询，但为了完整起见，我将其包含在此处。

```
if( db_query($sql) )
{
    // do happy stuff because it worked
}
else
{
    die("ERROR: UNABLE TO SAVE ORDER DATA <!-- (" . $db_error . ") [" . $sql . "]-->");
} 
```

**编辑：** 我有另一个数据库服务器可以在相同的设置下正常工作。我试过匹配`my.cnf`文件并重新启动，但没有效果。我能看到的工作数据库服务器和非工作数据库服务器之间的唯一区别是工作数据库服务器的版本是 5.0.77 而不是 5.5.30。

# ember.js - ContainerView 上的 Ember currentViewBinding

> ID：15842047
> 
> 赞同：0
> 
> 时间：2013-04-05T19:32:32.703
> 
> 标签：ember.js

我一直在尝试学习 Ember，最近花了很多时间在 github 上参考[Discourse代码库。](https://github.com/discourse/discourse)无论如何，我想实现类似于他们的`modal`视图方法的东西，但不明白为什么`currentViewBinding`不起作用。

以下是从这些链接中引用的信息的组合：

*   [`Ember.ContainerView`文档：绑定要显示的视图](http://emberjs.com/api/classes/Ember.ContainerView.html)
*   [Discourse`modal_view.js`在 GitHub 上的文件](https://github.com/discourse/discourse/blob/master/app/assets/javascripts/discourse/views/modal/modal_view.js)
*   [Discourse`modal_controller.js`在 GitHub 上的文件](https://github.com/discourse/discourse/blob/master/app/assets/javascripts/discourse/controllers/modal_controller.js)

```
App.HeaderController = Ember.Controller.extend
  templateName: 'application/header'
  needs: ['modal']

  toggleLogin: ->
    console.log "HeaderController.toggleLogin"
    @get('controllers.modal').show(App.LoginView.create())

App.ModalController = Ember.Controller.extend
  show: (view) ->
    @set('currentView', view)

App.ModalView = Ember.ContainerView
  currentViewBinding: 'controller.currentView'

  viewChanged: (->
    console.log "Modal view changed"
  ).observes('controller.currentView')

App.LoginView = Ember.View.extend
  templateName: 'modal/login' 
```

我的观点基本上是这样的：

```
<!-- application.hbs -->
{{render header}}
{{outlet}}

<!-- header.hbs -->
<button {{action toggleLogin}}>Login</button>
{{render modal}}

<!-- modal/login.hbs -->
<h2>Login Form!!</h2> 
```

当应用程序最初加载时，我得到**2 个**控制台日志，用于*"Modal view changed"*，当我单击`{{action toggleLogin}}`标题模板中的按钮时，除了控制台消息*"HeaderController.toggleLogin"*什么都没有发生。

我做错了什么，或者这不是[`Ember.ContainerView`文档](http://emberjs.com/api/classes/Ember.ContainerView.html)的工作方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:25:52.943

# 解决了

从更新`1.0.0-rc.1`到`1.0.0-rc.2`！

# eclipse - 错误：生命周期配置 Maven 错误未涵盖插件执行

> ID：15842050
> 
> 赞同：0
> 
> 时间：2013-04-05T19:32:39.243
> 
> 标签：eclipse, apache-flex, maven, m2e, flexmojos

我有一个需要转换为 Maven 项目的 flex 项目。我正在为 Eclipse 使用 m2e，这篇文章的底部是我创建的 POM.xml 文件。

我的问题是我似乎无法`mvn clean install`在这个 POM 上运行。在 Eclipse 中有一个错误突出显示第一个“插件”行：

```
-Plugin execution not covered by lifecycle configuration:
 org.sonatype.flexmojos:flexmojos-maven-plugin:3.7.1:test-compile 
 (execution: default-test-compile, phase: test-compile) 
```

和

```
-Plugin execution not covered by lifecycle configuration:
org.sonatype.flexmojos:flexmojos-maven-plugin:3.7.1:compile-swf 
(execution: default-compile-swf, phase: compile) 
```

除此之外，如果我运行`mvn clean install`我会得到一个不同的错误：

```
Failed to execute goal org.sonatype.flexmojos:flexmojos-maven-plugin:
3.7.1:compile-swf (default-compile-swf) on project flex: Failure to find
com.adobe.flex.framework:framework:rb.swc:en_US:3.2.0.3958 in
nexusserver/nexus/content/groups/public was cached in the local repository, 
resolution  will not be reattempted until the update interval of nexus has 
elapsed or updates are forced 
```

我正在查看 nexus 服务器，我看到：

```
-com\adobe\flex\framework\framework\3.2.0.3958 
```

里面有一堆拉链和东西，还有文件：`framework-3.2.0.3958.rb.swc`

所以我不确定实际上是什么问题。我仍然是一个 maven 新手，而且我以前从未真正使用过 flex，所以我想我现在有点不知所措。有谁知道如何解决至少一个问题？感谢您的时间。

编辑：更糟糕的是，该文件位于我的本地存储库中，所以我不知道为什么它没有看到它。

--

**POM.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- Generated from the following command: mvn archetype:generate -DarchetypeRepository=http://repository.sonatype.org/content/groups/public 
-DarchetypeGroupId=org.sonatype.flexmojos -DarchetypeArtifactId=flexmojos-archetypes-application 
-DarchetypeVersion=3.7.1 -->
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>com.company.ref</groupId>
<artifactId>flex</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>swf</packaging>

<name>flex</name>

<build>
    <plugins>
        <plugin>
            <groupId>org.sonatype.flexmojos</groupId>
            <artifactId>flexmojos-maven-plugin</artifactId>
            <version>3.7.1</version>
            <extensions>true</extensions>
            <configuration>
                <locales>
                    <locale>en_US</locale>
                </locales>
            </configuration>
        </plugin>
    </plugins>
    <sourceDirectory>src/main/flex</sourceDirectory>
    <testSourceDirectory>src/test/flex</testSourceDirectory>
    <pluginManagement>
        <plugins>
            <!--This plugin's configuration is used to store Eclipse m2e settings 
                only. It has no influence on the Maven build itself. -->
            <plugin>
                <groupId>org.eclipse.m2e</groupId>
                <artifactId>lifecycle-mapping</artifactId>
                <version>1.0.0</version>
                <configuration>
                    <lifecycleMappingMetadata>
                        <pluginExecutions>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>org.codehaus.mojo</groupId>
                                    <artifactId>aspectj-maven-plugin</artifactId>
                                    <versionRange>[1.0,)</versionRange>
                                    <goals>
                                        <goal>test-compile</goal>
                                        <goal>compile</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <execute />
                                </action>
                            </pluginExecution>
                        </pluginExecutions>
                    </lifecycleMappingMetadata>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
</build>

<dependencies>
    <dependency>
        <groupId>com.adobe.flex.framework</groupId>
        <artifactId>flex-framework</artifactId>
        <version>3.2.0.3958</version>
        <type>pom</type>
    </dependency>
</dependencies>

<profiles>
    <profile><!--https://docs.sonatype.org/pages/viewpage.action?pageId=2949459 -->
        <id>m2e</id>
        <activation>
            <property>
                <name>m2e.version</name>
            </property>
        </activation>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.maven.ide.eclipse</groupId>
                    <artifactId>lifecycle-mapping</artifactId>
                    <version>0.9.9-SNAPSHOT</version>
                    <configuration>
                        <mappingId>customizable</mappingId>
                        <configurators>
                            <configurator
                                id='org.maven.ide.eclipse.configuration.flex.configurator' />
                        </configurators>
                        <mojoExecutions>
                            <mojoExecution>org.apache.maven.plugins:maven-resources-plugin::</mojoExecution>
                        </mojoExecutions>
                    </configuration>
                </plugin>
            </plugins>
            <pluginManagement>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-resources-plugin</artifactId>
                        <version>2.4</version>
                    </plugin>
                </plugins>
            </pluginManagement>
        </build>
    </profile>
</profiles> 
```

这是我得到的完整错误：

```
[INFO]   Apache License - Version 2.0 (NO WARRANTY) - See COPYRIGHT file
[WARNING] Source file was not defined, flexmojos will guess one.
[WARNING] Not defined if locales should be merged or not
[WARNING] Unable to find license.jar on classpath. Check wiki for instructions about how to add it:
URL
Downloading: nexusURL/nexus/content/groups/public/com/adobe/flex/framework/framework/3.2.0.3958/framework-3.2.0.3958-en_US.rb.swc
[INFO] Unable to find resource 'com.adobe.flex.framework:framework:rb.swc:en_US:3.2.0.3958' in repository central (central)
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Unable to download the artifact from any repository

Try downloading the file manually from the project website.

Then, install it using the command:
mvn install:install-file -DgroupId=com.adobe.flex.framework -DartifactId=framework -Dversion=3.2.0.3958 -Dclassifier=en_US -Dpackaging=rb.swc -Dfile=/path/to/file

Alternatively, if you host your own repository you can deploy the file there:
mvn deploy:deploy-file -DgroupId=com.adobe.flex.framework -DartifactId=framework -Dversion=3.2.0.3958 -Dclassifier=en_US -Dpackaging=rb.swc -Dfile=/path/to/file -Durl=[url] -DrepositoryId=[id]

com.adobe.flex.framework:framework:rb.swc:3.2.0.3958

from the specified remote repositories: central 
```

更新 3：这是我的新 POM：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>com.company.table</groupId>
<artifactId>flex</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>swf</packaging>

<name>flex</name>

<repositories>
    <repository>
        <id>flex-mojos-repository</id>
        <url>https://repository.sonatype.org/content/groups/flexgroup</url>
    </repository>
</repositories>

<pluginRepositories>
    <pluginRepository>
        <id>flex-mojos-repository</id>
        <url>https://repository.sonatype.org/content/groups/flexgroup</url>
    </pluginRepository>
</pluginRepositories>

<build>
    <plugins>
        <plugin>
            <groupId>org.sonatype.flexmojos</groupId>
            <artifactId>flexmojos-maven-plugin</artifactId>
            <version>3.7.1</version>
            <extensions>true</extensions>               
        </plugin>
    </plugins>
    <sourceDirectory>src/main/flex</sourceDirectory>
    <testSourceDirectory>src/test/flex</testSourceDirectory>
</build>

<dependencies>
    <dependency>
        <groupId>com.adobe.flex.framework</groupId>
        <artifactId>flex-framework</artifactId>
        <version>3.2.0.3958</version>
        <type>pom</type>
    </dependency>
</dependencies> 
```

# javascript - 使用正则表达式的Javascript替换函数

> ID：15842051
> 
> 赞同：2
> 
> 时间：2013-04-05T19:32:40.807
> 
> 标签：javascript, regex

我正在尝试使用 javascript 的替换函数来替换字符串。但它只是取代了第一个实例。所以当我使用正则全局表达式时，

```
var result = 'moaning|yes you|hello test|mission control|com on'.replace(/|/g, ';'); 
```

我得到：http: [//jsfiddle.net/m8UuD/196/](http://jsfiddle.net/m8UuD/196/)

我想得到：

> 呻吟;是的你;你好测试;任务控制;com on

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T19:34:46.473

只需逃离管道：

```
 'moaning|yes you|hello test|mission control|com on'.replace(/\|/g, ';'); 
```

[在这里，您将找到通常应该转义的正则表达式特殊字符列表](http://www.regular-expressions.info/characters.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T19:34:39.327

```
var result = 'moaning|yes you|hello test|mission control|com on'.replace(/\|/g, ';'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T19:36:05.467

您还可以使用`.split()`and `.join()`：

```
'moaning|yes you|hello test|mission control|com on'.split('|').join(';') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T19:35:46.853

你需要逃避'|' 像：

```
var result = 'moaning|yes you|hello test|mission control|com on'.replace(/\|/g, ';'); 
```

[http://jsfiddle.net/PM4PT/](http://jsfiddle.net/PM4PT/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-05T19:47:13.863

许多字符是保留的，因为在正则表达式中具有特殊含义，因此要使用其中一个，您需要通过`\`在特殊字符之前放置一个反斜杠来“转义”它。这些都是：

```
(   start of a sub-expression
)   end of a sub-expression
{   start of repetition range
}   end of a repetition range
[   start of a character set
]   end of a character set
+   one or more repetitions
*   zero or more repetitions
^   start of string
$   end of string
|   "or" connection between alternatives
\   start of special code or escape
/   start or end of regexp pattern 
```

例如，匹配所有开放方括号的正则表达式是`/\[/`（注意反斜杠）。如果您需要查找反斜杠，则必须在其前面添加一个反斜杠（因此将其加倍）。

不幸的是，没有用于“转义”所有特殊字符的预定义 Javascript 函数。

# c# - WebRequest.GetResponse() 在几个请求后超时

> ID：15842053
> 
> 赞同：2
> 
> 时间：2013-04-05T19:32:44.210
> 
> 标签：c#, .net, asynchronous, asp.net-web-api, system.net.httpwebrequest

我正在调用第三方 Web API 来更新我们的一些数据。我已经连续快速提交了大约五个工作，而且前两个请求都正常工作。然而，最后三个永远不会更新。该应用程序似乎表明请求正在超时，但我想确保我没有搞砸任何事情。

我用 an 调用下面的函数`Action<string, Dictionary<string,object>> Delegate`，我用`BeginInvoke`它来异步调用 API。我真的不在乎反应。我是否误解了某些事情，`WebRequest.GetResponse()`或者这是端点的问题？

```
 private void UpdateJobInfo(string jobId, Dictionary<string, object> updates)
    {
        var postData = GetJsonEncodedValues(updates);
        var request = WebRequest.Create(string.Format(JobResultEndpoint, _username, jobId));

        request.ContentType = "application/json; charset=utf-8";
        request.Method = WebRequestMethods.Http.Put;
        request.Headers[HttpRequestHeader.Authorization] = GetAuthenticationCredentials();
        request.GetRequestStream().Write(Encoding.ASCII.GetBytes(postData), 0, Encoding.ASCII.GetBytes(postData).Length);

        request.GetResponse();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T19:34:57.317

您没有处理响应（或者实际上是请求流，尽管这是一个稍微不同的问题）。这意味着您将与服务器的连接保持打开状态，直到终结器碰巧注意到可以完成响应。连接池（默认情况下）每个 URL 有两个连接。因此，您以后的请求正在等待较早的响应完成，然后才能获得连接。

更好的代码：

```
// Is this definitely what you want? What about non-ASCII data?
byte[] binaryPostData = Encoding.ASCII.GetBytes(postData);
using (var requestStream = request.GetRequestStream())
{
    requestStream.Write(binaryPostData, 0, binaryPostData.Length);
}

using (var response = request.GetResponse())
{
    // We don't care about the response, but we have to fetch it
    // and dispose it.
} 
```

# html - div width auto 根据父总宽度剩余

> ID：15842055
> 
> 赞同：0
> 
> 时间：2013-04-05T19:32:59.417
> 
> 标签：html, css

我试图创建一个具有 2 个宽度的简单容器。

```
<div class="holder">

    <div class="info-recieve"></div>

    <textarea class="info-send></textarea>

</div>

.holder{
 width: 335px;
 height: auto;
}
.info-recieve, .info-send{
 float: left;
 width: auto;
} 
```

.first 宽度在开始时为空，但随后它将从 textarea 接收动态 html（如堆栈溢出的标记系统）。

textarea 将从 100% 开始，然后会适应 .info-recieve 宽度，尊重 .parent 最大宽度。

这是实时代码：

[http://www2.madeinweb.com.br/jobs/sgiurd/edit-profile.html](http://www2.madeinweb.com.br/jobs/sgiurd/edit-profile.html)

如果你们去“Formação”字段集，只需在 textarea 上输入，然后按 Enter。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:36:43.227

就拿`.second`你现在的规则吧。

```
.first {
 float: left;
 width: auto;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/QaWcd/)**（添加颜色以便于查看）

# eclipse - 重命名 Eclipse 的多个安装以在 OS X Doc 中区分它们

> ID：15842056
> 
> 赞同：1
> 
> 时间：2013-04-05T19:33:06.527
> 
> 标签：eclipse, macos

我为不同类型的开发安装了几个 Eclipse。过去，我刚刚将 Eclipse.app 重命名为“Eclipse Juno STS JDK 1.7.app”。它是一个泄漏的解决方案，因为在它旁边创建了一个 Eclipse.app，但是今天更新我的一个插件后，Eclipse 将不再启动。

有没有更好的方法来为多个 Eclipse 安装使用不同的名称是 OS X？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:38:58.173

[我在这个帖子](https://bugs.eclipse.org/bugs/show_bug.cgi?id=299955)的底部找到了答案。

将 Eclipse.app 重命名为“Eclipse Juno STS JDK 1.7.app”后，创建一个名为“Eclipse.app”的链接，以帮助重定向硬编码的插件以查找 Eclipse.app：

```
rename Eclipse.App "Eclipse Juno STS JDK 1.7.app"
ln -s "Eclipse Juno STS JDK 1.7.app" Eclipse.app 
```

# linux - Linux 设备的完全静默（或自定义）引导

> ID：15842059
> 
> 赞同：0
> 
> 时间：2013-04-05T19:33:23.920
> 
> 标签：linux, splash-screen, boot, bios

我正在开发一个在 Linux（目前是 Ubuntu 10.04）和基于 x86-64 Intel 的 PC 上运行的设备。我需要完全自定义引导屏幕 - 没有 BIOS 消息，或者 (a) 在 X 启动之前没有屏幕输出，或者 (b) 通过 VESA/VBE 自定义屏幕输出。

(b) 看起来很难实现，因为没有一个帧缓冲驱动程序（vesafb、uvesafb）似乎支持在超过 2 个由同一显卡驱动的显示器上寻址像素

所以，我在看 (a) ：在 X 启动之前屏幕上没有输出。这应该意味着没有戴尔 BIOS 输出、没有 Ubuntu 闪屏、没有控制台输出。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:38:21.153

我对帧缓冲区的东西了解不多，但我可以肯定地告诉你，你无法控制 Linux 的 BIOS 输出。

在引导过程中，首先是 BIOS，然后是引导加载程序，然后是 Linux。因此，当 Linux 出现时，BIOS 的东西已经完成了很长时间。

# java - Android - 设置 ImageAdapter NullPointerException

> ID：15842067
> 
> 赞同：2
> 
> 时间：2013-04-05T19:33:56.983
> 
> 标签：java, android, nullpointerexception, android-gallery

我的安卓有问题。我想使用以下代码为画廊设置 ImageAdapter：

```
Integer[] images = {R.drawable.image01}; 
static int counter = 0;

SectionsPagerAdapter mSectionsPagerAdapter;
ViewPager mViewPager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Set up the action bar.
    final ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    // Create the adapter that will return a fragment for each of the three
    // primary sections of the app.
    mSectionsPagerAdapter = new SectionsPagerAdapter(
            getSupportFragmentManager());

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

    // When swiping between different sections, select the corresponding
    // tab. We can also use ActionBar.Tab#select() to do this if we have
    // a reference to the Tab.
    mViewPager
            .setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
                @Override
                public void onPageSelected(int position) {
                    actionBar.setSelectedNavigationItem(position);
                }
            });

    // For each of the sections in the app, add a tab to the action bar.
    for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
        // Create a tab with text corresponding to the page title defined by
        // the adapter. Also specify this Activity object, which implements
        // the TabListener interface, as the callback (listener) for when
        // this tab is selected.
        actionBar.addTab(actionBar.newTab()
                .setText(mSectionsPagerAdapter.getPageTitle(i))
                .setTabListener(this));
    }

    Gallery g = (Gallery) findViewById(R.id.gallery1);
    g.setAdapter(new ImageAdapter(this, images));
} 
```

我想使用 ImageAdapter 将图像“image01”添加到图库中。但是这段代码会导致 NullPointerException。ImageAdapter 的代码是：

```
public class ImageAdapter extends BaseAdapter {  
    Context m;
    public ImageAdapter(Context c){
        m = c;
    }

    @Override
    public int getCount() {
        return counter;
    }

    @Override
    public Object getItem(int position) {
        return position;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView i = new ImageView(m);
        i.setImageResource(images[position]);
        i.setLayoutParams(new Gallery.LayoutParams(150, 150));
        i.setScaleType(ImageView.ScaleType.FIT_XY);
        return i;

    }
} 
```

**编辑：**我的 xml 是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Gallery
        android:id="@+id/gallery1"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="17.92"
        android:spacing="@dimen/activity_horizontal_margin" />

</LinearLayout> 
```

堆栈跟踪是：

```
04-05 22:11:38.144: D/AndroidRuntime(32124): Shutting down VM
04-05 22:11:38.144: W/dalvikvm(32124): threadid=1: thread exiting with uncaught exception (group=0x40ebf930)
04-05 22:11:38.144: E/AndroidRuntime(32124): FATAL EXCEPTION: main
04-05 22:11:38.144: E/AndroidRuntime(32124): java.lang.RuntimeException: Unable to start activity  ComponentInfo{com.bw2801.uwelugemediathek/com.bw2801.uwelugemediathek.MainActivity}:   java.lang.NullPointerException
04-05 22:11:38.144: E/AndroidRuntime(32124):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-05 22:11:38.144: E/AndroidRuntime(32124):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-05 22:11:38.144: E/AndroidRuntime(32124):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-05 22:11:38.144: E/AndroidRuntime(32124):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-05 22:11:38.144: E/AndroidRuntime(32124):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-05 22:11:38.144: E/AndroidRuntime(32124):    at android.os.Looper.loop(Looper.java:137)
04-05 22:11:38.144: E/AndroidRuntime(32124):    at android.app.ActivityThread.main(ActivityThread.java:5041)
04-05 22:11:38.144: E/AndroidRuntime(32124):    at java.lang.reflect.Method.invokeNative(Native Method)
04-05 22:11:38.144: E/AndroidRuntime(32124):    at java.lang.reflect.Method.invoke(Method.java:511)
04-05 22:11:38.144: E/AndroidRuntime(32124):    at    com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-05 22:11:38.144: E/AndroidRuntime(32124):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-05 22:11:38.144: E/AndroidRuntime(32124):    at dalvik.system.NativeStart.main(Native   Method)
04-05 22:11:38.144: E/AndroidRuntime(32124): Caused by: java.lang.NullPointerException
04-05 22:11:38.144: E/AndroidRuntime(32124):    at com.bw2801.uwelugemediathek.MainActivity.onCreate(MainActivity.java:79)
04-05 22:11:38.144: E/AndroidRuntime(32124):    at android.app.Activity.performCreate(Activity.java:5104)
04-05 22:11:38.144: E/AndroidRuntime(32124):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-05 22:11:38.144: E/AndroidRuntime(32124):    at     android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-05 22:11:38.144: E/AndroidRuntime(32124):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T19:40:38.957

您的适配器中不存在您的图像对象，因此向适配器的构造函数添加一个新参数以接受图像

```
public class ImageAdapter extends BaseAdapter {  
    Context m;
    Integer[] images 
    public ImageAdapter(Context c, Integer[] images ){
        m = c;
        this.images = images
    }
... 
```

然后在你的活动中这样调用：

```
 g.setAdapter(new ImageAdapter(this, images)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:14:24.077

我使用此代码完成了它并且它有效：

```
final LayoutInflater factory = getLayoutInflater();
final View view = factory.inflate(R.layout.pictures, null); 
Gallery g = (Gallery) view.findViewById(R.id.gallery1);
g.setAdapter(new ImageAdapter(this)); 
```

# c# - 如何使用 Ninject 将服务层添加到我的 UnitOfWork？

> ID：15842070
> 
> 赞同：0
> 
> 时间：2013-04-05T19:34:14.120
> 
> 标签：c#, asp.net-mvc-4, dependency-injection, ninject

我在尝试设置 DI 时遇到了一个小障碍。

所以鉴于我有这个控制器：

```
public UsersController(IUnitOfWork unitOfWork)
{
   // Stuff
} 
```

我以前有这个直接访问我的存储库的 UnitOfWork 实现。

```
public class UnitOfWork : IUnitOfWork, IDisposable
{
  private readonly DbContext _context = new DbContext();

  public IRepository<User> Users { get { return new UserRepository(_context); } }
} 
```

Ninject UnitOfWork 代码：`Bind<IUnitOfWork>().To<UnitOfWork>().InRequestScope();`

现在这实际上工作正常。但是我想改变它，而不是包含存储库的 UnitOfWork，它包含接受多个存储库的服务。

```
public class UserService : IUserService
{
  private readonly IUserRepository _userRepository;
  public UserService(IUserRepository userRepository, /* Other repositories */)
  {
    _userRepository = userRepository;
  }
} 
```

现在我能想出的唯一解决方案是

```
public class UnitOfWork : IUnitOfWork, IDisposable
{
  private readonly DbContext _context = new DbContext();

  public IUserService UserService
  {
    get
    {
      return new UserService(new UserRepository(_context), /* etc. */);
    }
  }
} 
```

这似乎不对。现在我正在自己创建所有服务依赖项。

我在 StackOverflow 上看到过帖子提到最好让服务访问多个存储库并处理业务逻辑，而不是让控制器（MVC 应用程序）担心它。

但是，找不到有关如何正确执行此操作的任何细节。那么我怎么能使用 Ninject 来做我所追求的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:18:53.697

抱歉，这确实是一个杂草丛生的评论，但是嘿...

A`DbContext` **是一个**工作单元，创建一个跨越两个 DbContexts 的怪物工作单元绝对不是一般模式（因此你的问题是你的问题）

[此处对相关问题的此答案](https://stackoverflow.com/questions/15599325/looking-for-a-ninject-scope-that-behaves-like-inrequestscope/15604758#15604758)的评论偏离了同一领域。

在尝试以这种方式解决之前要问自己的问题：

*   除了拥有 DbContext 之外，您还试图用我的这个工作单元来完成什么？
*   这需要交易吗？
*   中间是否真的有一个缺失的服务应该有自己的数据来引用另外两个？
*   这是否需要跨越两个有界上下文？如果您以后需要再次将它们拉出怎么办？
*   如果我的应用中有 3 个这样的案例，我会继续将它们合并到一个 BC 中吗？4？

对我来说，关键是创建自己的 UoW 来包装 UoW：

1.  不会给你买太多
2.  让你更难推理你的核心问题

* * *

如果你仍然打算用 Ninject 硬塞这些东西，技术方法是一起使用上下文保留和工厂扩展 - 去阅读他们 wiki 中的示例。如果您决定将其剥离，它们可能还有部分可玩。

更新：我现在明白你的意思了——重要的是链接到那些引导你提前思考的东西。首先，去阅读[这个](https://stackoverflow.com/questions/10585478/one-dbcontext-per-web-request-why/10588594#10588594)。接下来，决定您是否要拥有一个工作单元。如果是这样，谁以及在哪里将提交和处置它？

如果存储库和/或服务将共享 UoW 或 DBContext 并且某些内容将集中提交内容，那么您将要共享/处置的内容绑定到 InRequestScope 以拥有它 a) 获取单个共享实例 b) 获取处理

我主要关心的是所有这些抽象是否真的都有益于事物——你是否真的在编写使用抽象的测试（而不仅仅是前几个）？你真的要切换存储库吗？我个人会去读几次 DDD 书，作为更好的时间投资。

我意识到其中很多都是高度光顾的，这只是一个代表更大问题的一部分的简化问题，但我刚刚看到最近包装层和 DI 容器诡计的交叉点引发的太多问题，因此我的咆哮。吐槽完毕，谢谢！

# html - 将形状奇特的 HTML 表格读入 R

> ID：15842079
> 
> 赞同：0
> 
> 时间：2013-04-05T19:34:42.330
> 
> 标签：html, r, dataframe, html-table

我有一个来自一些期刊补充数据的离线 html 文件。它的格式是一对一的行/条目，一些列被拆分，例如：

```
OrganismID  GeneID

Org1        Gene1
____________
Org2        Gene1
            Gene2
___
Org3        Gene2
            Gene3
            Gene4 
```

所以对于 OrganismID 列有 3 行，但 GeneID 列有一行对应于 OrganismID 的第一行，两行对应于 OrganismID 的第二行，三行对应于 OrganismID 的第三行。所以它看起来就像你在文档中拆分表格中的单元格。我怎样才能把它放到**R**中，或者把它变成更好的格式，比如传统的**R** data.frame？

编辑：

我已经包含了前几个条目的 HTML 代码，它们很好地显示了表格的列如何具有不同的行。我的 HTML 不是最新的，但他们似乎通过在第 1 列的每一行的开头定义它来为第 4 5 和第 6 列中的多行“腾出空间”，并声明`rowspan`：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>Overview per Gene</title>
</head>
<body>
<table border="1">
<tr>
<th>Species</th>
<th>Gene ID</th>
<th>Length Upstream</th>
<th>Motif ID</th>
<th>Position</th>
<th>Strand</th>
<th>Match</th>
</tr>
<tr>
<td rowspan="2">P. infestans</td>
<td rowspan="2">PITG_00002</td>
<td rowspan="2">1000</td>
<td>Motif-0</td>
<td>-574</td>
<td>-</td>
<td>TCAGTCTTACATCTAC</td>
</tr>
<tr>
<td>Motif-1</td>
<td>-430</td>
<td>-</td>
<td>GTTACATGAAG</td>
</tr>
<tr>
<td rowspan="1">P. infestans</td>
<td rowspan="1">PITG_00004</td>
<td rowspan="1">454</td>
<td>Motif-1</td>
<td>-264</td>
<td>+</td>
<td>TACATGTAA</td>
</tr>
<tr>
<td rowspan="2">P. infestans</td>
<td rowspan="2">PITG_00006</td>
<td rowspan="2">1000</td>
<td>Motif-0</td>
<td>-55</td>
<td>+</td>
<td>CATTCCTAATTTCGCC</td>
</tr>
<tr>
<td>Motif-1</td>
<td>-326</td>
<td>+</td>
<td>CATATATGTATGG</td>
</tr>
<tr>
<td rowspan="3">P. infestans</td>
<td rowspan="3">PITG_00009</td>
<td rowspan="3">1000</td>
<td>Motif-0</td>
<td>-413</td>
<td>-</td>
<td>TCACTTCTCTACTTTG</td>
</tr>
<tr>
<td>Motif-1</td>
<td>-31</td>
<td>+</td>
<td>TACATGTAC</td>
</tr>
<tr>
<td>Motif-3</td>
<td>-271</td>
<td>-</td>
<td>TACTTGGAATTTGTAT</td>
</tr>
<tr> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T21:08:49.273

我对您的 html 代码做了一些更正，例如我已经关闭`<table>`，`<body>`并且`<html>`我使用`XML`包来阅读此表。我注意到在某些情况下列的顺序不正确，但您可以在阅读此表后修复。

我的提议如下。

```
library(XML)

a<-'<html>
    <head>
    <title>Overview per Gene</title>
    </head>
    <body>
    <table border="1">
    <tr>
    <th>Species</th>
    <th>Gene ID</th>
    <th>Length Upstream</th>
    <th>Motif ID</th>
    <th>Position</th>
    <th>Strand</th>
    <th>Match</th>
    </tr>
    <tr>
    <td rowspan="2">P. infestans</td>
    <td rowspan="2">PITG_00002</td>
    <td rowspan="2">1000</td>
    <td>Motif-0</td>
    <td>-574</td>
    <td>-</td>
    <td>TCAGTCTTACATCTAC</td>
    </tr>
    <tr>
    <td>Motif-1</td>
    <td>-430</td>
    <td>-</td>
    <td>GTTACATGAAG</td>
    </tr>
    <tr>
    <td rowspan="1">P. infestans</td>
    <td rowspan="1">PITG_00004</td>
    <td rowspan="1">454</td>
    <td>Motif-1</td>
    <td>-264</td>
    <td>+</td>
    <td>TACATGTAA</td>
    </tr>
    <tr>
    <td rowspan="2">P. infestans</td>
    <td rowspan="2">PITG_00006</td>
    <td rowspan="2">1000</td>
    <td>Motif-0</td>
    <td>-55</td>
    <td>+</td>
    <td>CATTCCTAATTTCGCC</td>
    </tr>
    <tr>
    <td>Motif-1</td>
    <td>-326</td>
    <td>+</td>
    <td>CATATATGTATGG</td>
    </tr>
    <tr>
    <td rowspan="3">P. infestans</td>
    <td rowspan="3">PITG_00009</td>
    <td rowspan="3">1000</td>
    <td>Motif-0</td>
    <td>-413</td>
    <td>-</td>
    <td>TCACTTCTCTACTTTG</td>
    </tr>
    <tr>
    <td>Motif-1</td>
    <td>-31</td>
    <td>+</td>
    <td>TACATGTAC</td>
    </tr>
    <tr>
    <td>Motif-3</td>
    <td>-271</td>
    <td>-</td>
    <td>TACTTGGAATTTGTAT</td>
    </tr>
    </table>
    </body>
    </html>'

doc<-htmlParse(a)
tab<-readHTMLTable(doc,which=1)
idx<-which(is.na(tab$Match))
lapply(tab,class)
for (i in 1:ncol(tab)){
  tab[,i]<-as.character(tab[,i])
}
tab[idx,c(4:7)]<-tab[idx,c(1:4)]
tab[idx,c(1:3)]<-NA 
```

和结果

```
tab
       Species    Gene ID Length Upstream Motif ID Position Strand            Match
1 P. infestans PITG_00002            1000  Motif-0     -574      - TCAGTCTTACATCTAC
2         <NA>       <NA>            <NA>  Motif-1     -430      -      GTTACATGAAG
3 P. infestans PITG_00004             454  Motif-1     -264      +        TACATGTAA
4 P. infestans PITG_00006            1000  Motif-0      -55      + CATTCCTAATTTCGCC
5         <NA>       <NA>            <NA>  Motif-1     -326      +    CATATATGTATGG
6 P. infestans PITG_00009            1000  Motif-0     -413      - TCACTTCTCTACTTTG
7         <NA>       <NA>            <NA>  Motif-1      -31      +        TACATGTAC
8         <NA>       <NA>            <NA>  Motif-3     -271      - TACTTGGAATTTGTAT 
```

# java - 使用 JTOpen 从 AS400 上的数据区读取，数据区对象是否被锁定？

> ID：15842081
> 
> 赞同：2
> 
> 时间：2013-04-05T19:34:44.107
> 
> 标签：java, ibm-midrange, jtopen

给定来自 JTOpen 的 DecimalDataArea，在读取和写入数据区域时，AS400 上的对象是否会被锁定，从而阻止 AS400 上的其他应用程序同时写入它？

这是来自 javadoc 关于如何读/写等的示例代码。

```
// Prepare to work with the system named "My400".
AS400 system = new AS400("My400");

// Create a DecimalDataArea object.
QSYSObjectPathName path = new QSYSObjectPathName("MYLIB", "MYDATA", "DTAARA");
DecimalDataArea dataArea = new DecimalDataArea(system, path.getPath());

// Create the decimal data area on the system using default values.
dataArea.create();

// Clear the data area.
dataArea.clear();

// Write to the data area.
dataArea.write(new BigDecimal("1.2"));

// Read from the data area.
BigDecimal data = dataArea.read();

// Delete the data area from the system.
dataArea.delete(); 
```

[http://javadoc.midrange.com/jtopen/com/ibm/as400/access/DecimalDataArea.html](http://javadoc.midrange.com/jtopen/com/ibm/as400/access/DecimalDataArea.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T19:47:12.003

不......数据区操作是原子的，所以除非你自己做，否则不会发生锁定。

在内部，实现实际上用于`CHGDTAARA`更新数据区域。

虽然不会是一个糟糕的增强。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T01:37:08.490

如果您使用 SQL CREATE SEQUENCE 语句创建数据，那么您可以通过 JDBC使用[NEXT VALUE 。](http://pic.dhe.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Fdb2%2Frbafzseqref.htm)您可以在 SELECT、INSERT、UPDATE 等 SQL 语句中使用 NEXT VALUE 表达式。它将读取值、递增值、更新 SEQUENCE 并将新值返回给您，并且可以在承诺控制下完成。PREVIOUS VALUE 表达式将返回当前会话期间由 NEXT VALUE 表达式为该 SEQUENCE 生成的最后一个值。

通常，数字数据区域用于管理生成一系列数字。如果是这种情况，那么最好使用 SEQUENCE。

# c# - 如何使用 CoolStorage 删除表中的所有记录？

> ID：15842083
> 
> 赞同：-2
> 
> 时间：2013-04-05T19:34:46.003
> 
> 标签：c#, windows-phone, coolstorage

我使用 Vici CoolStorage 在我的 Windows Phone 应用程序中处理 SQLite 数据库。如何删除表中的所有记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T07:05:42.230

我发现了我的错误。正确的查询是 CSDatabase.ExecuteNonQuery(@"DELETE FROM TempTable") 而不是之前使用的 CSDatabase.ExecuteNonQuery(@"DELETE FROM TABLE TempTable")

# php - 设置配置项（csrf）在 Codeigniter 中不起作用

> ID：15842085
> 
> 赞同：5
> 
> 时间：2013-04-05T19:34:48.110
> 
> 标签：php, codeigniter, config, csrf

我只想在我的几个控制器中打开 csrf 保护，所以我有

```
function __construct() {

    parent::__construct();
    $this->load->library('form_validation');        
    $this->load->library('tank_auth');
    $this->load->helper(array('form', 'url'));
    $this->load->model('user_model', '', true);

    $this->config->set_item('csrf_protection', TRUE);

} 
```

但这似乎不起作用，尽管当我在页面上执行 var_dump($this->config) 时，它显示 csrf_protection 为 TRUE，但未设置 cookie，并且表单有一个没有值的隐藏字段

`<input type="hidden" name="ci_csrf_token" value="" />`

Csrf 令牌名称和 cookie 名称均已设置，使用 form_open() 调用表单。

任何帮助将非常感激。

**更新：**所以这在 2.1.1 版本中是不可能的，因为安全类构造中的行`if (config_item('csrf_protection') === TRUE) {`

安全类在控制器之前初始化，因此控制器中的配置项更改自然不会影响它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T09:01:10.577

我有一个解决方案给你。创建一个自定义 application/core/MY_Security.php 并将其放入其中：

```
<?php if ( !defined( 'BASEPATH' ) ) exit( 'No direct script access allowed' );

class MY_Security extends CI_Security
{
    public function csrf_verify( )
    {
        foreach ( config_item('csrf_excludes') as $exclude )
        {
            $uri = load_class('URI', 'core');
            if ( preg_match( $exclude, $uri->uri_string() ) > 0 )
            {
                // still do input filtering to prevent parameter piggybacking in the form
                if (isset($_COOKIE[$this->_csrf_cookie_name]) && preg_match( '#^[0-9a-f]{32}$#iS', $_COOKIE[$this->_csrf_cookie_name] ) == 0)
                {
                    unset( $_COOKIE[$this->_csrf_cookie_name] );
                }
                return;
            }
        }
        parent::csrf_verify( );
    }
} 
```

这将检查您需要在 CSRF 部分中的 application/config.php 中添加的以下排除项：

```
$config['csrf_excludes'] = array
    ( '@^/?excluded_url_1/?@i'
    , '@^/?excluded_url_2/?@i' ); 
```

每个匹配的 URL 模式都将从 CSRF 检查中排除。[您可以在http://rubular.com](http://rubular.com)上构建正则表达式

干杯

# regex - 我用正则表达式替换的 Vim 抛出了 `E488: Trailing characters`

> ID：15842088
> 
> 赞同：37
> 
> 时间：2013-04-05T19:34:52.903
> 
> 标签：regex, vim

我正在尝试查找 Twitter 句柄的所有实例，并在它们周围包裹一个锚标记。

```
:%s/\(@[\w]\)/<a href="http://www.twitter.com/\1">\1<\/a>/gc 
```

这给了我：

```
E488: Trailing characters 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-05T19:43:06.973

当and`/`之间的分隔符（在您的情况下）包含在其中一个中时，必须使用. 避免这种情况的一个技巧是使用不同的分隔符，例如：`{pattern}``{string}``\``#`

```
:%s#@\(\w\+\)#<a href="http://www.twitter.com/\1">\0</a>#gc 
```

PS：如果它应该做我认为应该做的事情，那么你的模式是错误的；看我的更正。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2020-03-02T14:42:53.180

如果在选定的文本块中替换时出现此问题，可能是因为您`%s`在应该只键入时错误地键入了`s`

我通过选择一个块，键入`:`并在提示符处`:'<,'>`键入`%s/something/other/`导致`:'<,'>%s/something/other/`正确的语法`:'<,'>s/something/other/`没有百分比时发生了这种情况。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-07T00:09:57.547

我遇到了这个问题并且无法让它消失，直到我发现`.vimrc`我有部分的文件是我从其他包含缩写的地方复制的，例如：

`abbrev gc !php artisan generate:controller`

该缩写会弄乱我的搜索和替换命令，这些命令通常如下所示：

`:%s/foo/bar/gc`

通过将其扩展`gc`为`!php artisan generate:controller`，除了它不会在现场/实时进行。我提示的方式是查看命令历史记录（通过按下`:`和向上箭头）并查看

`:%s/foo/bar/!php artisan generate:controller`

因此，如果无论您做什么都会出现尾随字符错误，我会查看内部

`~/.vimrc`

看看你是否能在那里找到问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-07-12T15:26:18.873

我有同样的问题。

仅使用其他分隔符没有帮助。所以，另外

1.  我没有选择任何行。

2.  并且没有将 g 用于全局。

所以就

```
:%s#to_be_replaced#replacement# 
```

做了这项工作。将所有出现的“to_be_replaced”更改为“replacement”。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-09-25T19:36:40.873

`:%s/\/apps/log_dir/g`

其中要替换的字符串=/apps 和替换的字符串=log_dir 正如我们所看到的 / 所以我们需要使用`"\/"`

# vaadin - vaadin 表中的错误显示

> ID：15842098
> 
> 赞同：3
> 
> 时间：2013-04-05T19:35:24.460
> 
> 标签：vaadin

我是 vaadin 框架的新手，一切正常，直到...表头无法正确显示，...我正在开发一个在 exoplatform 上运行的 portlet，我正在使用 vaadin 6，我的表只显示第一个标题，我尝试了一切，但似乎没有任何效果。这是我的代码：

```
table = new Table("my table");
        table.setColumnHeaderMode(Table.COLUMN_HEADER_MODE_EXPLICIT);
        table.setPageLength(9);
        table.setWidth("100%");

        table.addContainerProperty("sad", String.class,  null);
        table.addContainerProperty("asd", Integer.class,  null);
        table.addContainerProperty("qwerty", Integer.class,  null);

        table.setColumnHeaderMode(Table.COLUMN_HEADER_MODE_EXPLICIT);
        table.setColumnHeader("sad", "sad");
        table.setColumnHeader("asd", "asd");
        table.setColumnHeader("qwerty", "qwerty"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T11:51:48.687

我有同样的问题，尝试将您的表格包装到面板。这个对我有用。

VerticalLayout 中的表格似乎与下一个表格的标题重叠，因此只显示第一个标题。当表格的宽度不同时很明显 - 然后您会看到一个表格如何与下表的标题重叠。

希望有帮助。

# visual-studio-2010 - Teradata Database 3710 在 QueryRewrite 阶段内存不足，无法解析此请求

> ID：15842107
> 
> 赞同：0
> 
> 时间：2013-04-05T19:36:07.943
> 
> 标签：visual-studio-2010, teradata

我正在使用 Visual Studio 的 2010 并使用 .Net Data Provider for Teradata 14.0 并收到以下错误。[Teradata Database] [3710] 在 QueryRewrite 阶段内存不足，无法解析此请求。我正在尝试使用 ADO.net 实体模型引入一个简单的小表。

有谁知道如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:11:49.593

这可能是在黑暗中拍摄......但如果您实际上是通过简单的“sel * from table”得到该错误，那么表格可能严重倾斜。检查 Teradata 表中的主索引位于哪个列，如果主索引位于大多数不唯一的字段上，则考虑重新创建表并将索引放置在更唯一的字段上。如果未指定主索引，则默认情况下将一个主索引放在表的第一列。

# javascript - 如何从另一个站点请求 div 内容

> ID：15842109
> 
> 赞同：0
> 
> 时间：2013-04-05T19:36:13.810
> 
> 标签：javascript, html

我目前正在制作一个使用 javascript 制作下载按钮的 chrome 应用程序。我希望应用程序获取当前页面 + 在其上附加“/下载”。然后它会从该链接请求 HTML 代码。

```
<div class="download-row">
<a href="http://www.website.com">A website</a>
</div> 
```

它会从下载页面获取href，然后在原始页面上创建带有href的按钮。

* * *

好的，我在网站上试过了，但遇到了语法问题。

```
var links = ""
$('#right').load('www.mywebsite.com/download', function(data) {
data.find(".download-row a").each(function(){
    links += $(this).attr("href");

    });}); 
```

当我在 chrome 的控制台中测试它时，它打印出来：

```
GET http://www.mywebsite.com/download 404 (Not Found)
Uncaught TypeError: Object <!DOCTYPE html>
<html lang="en-us">
<head>
....
....
HTML data from the page. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:00:38.937

您可以使用[http://api.jquery.com/load/](http://api.jquery.com/load/)从其他页面加载数据。来自 jQuery 文档的示例

`$('#result').load('ajax/test.html #container');`

还有很多其他的演示，试试吧。如果不使用 Ajax。

# mysql - MySQL错误无法添加外键约束

> ID：15842111
> 
> 赞同：4
> 
> 时间：2013-04-05T19:36:21.297
> 
> 标签：mysql

怎么了？

```
mysql> create table price(
    -> p_code char(1) not null,
    -> p_description varchar(20),
    -> p_rentfee decimal(2,2) not null,
    -> p_dylatefee decimal(2,2));
Query OK, 0 rows affected (0.18 sec)

mysql> create table movie(
    -> mv_no char(4) not null,
    -> mv_name varchar(50) not null,
    -> mv_year char(4) not null,
    -> mv_cost decimal(2,2) not null,
    -> mv_genre varchar(15) not null,
    -> p_code char(1) not null,
    -> foreign key (p_code) references price(p_code));
ERROR 1215 (HY000): Cannot add foreign key constraint

mysql> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T19:39:49.217

`price.p_code`不是 的主键`price`。尝试：

```
create table price(
p_code char(1) not null PRIMARY KEY,
p_description varchar(20),
p_rentfee decimal(2,2) not null,
p_dylatefee decimal(2,2)); 
```

一般来说，外键必须引用一个主键/唯一键、一个完整的主键/唯一键，并且只能引用一个主键/唯一键。

在某些 RDBMS 中，例如 SQL Server，您*可以引用*具有唯一*索引*（不是键）的列（请参阅[我们可以在任何其他表中拥有一个不是主键的外键吗？](https://stackoverflow.com/questions/2895219/can-we-have-a-foreign-key-which-is-not-a-primary-key-in-any-other-table)），但这是非标准行为.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-01-25T11:29:18.447

*   **引擎**应该是相同的，*例如 InnoDB*
*   **数据类型**应该相同，并且具有相同的长度。*例如 VARCHAR(20)*
*   **Collat​​ion** Columns 字符集应该相同。*例如 utf8*
    *Watchout：即使您的表有相同的排序规则，列仍然可能有不同的排序规则。*
*   **唯一**- 外键应指被引用表中唯一的字段（通常是主键）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T19:40:05.810

`p_code`应该是`price`表中的主键：

```
create table price(
-> p_code char(1) not null,
-> p_description varchar(20),
-> p_rentfee decimal(2,2) not null,
-> p_dylatefee decimal(2,2),
-> PRIMARY KEY ( p_code )); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T20:10:06.697

1.  引用的列`price.p_code`必须是唯一的（需要创建主键或唯一键）。
2.  两个表都必须是**InnoDb**表，`ENGINE = INNODB`在`CREATE TABLE`语句中使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T19:49:44.327

将**p_code**设置为键，将其设置为**唯一键**或**主键**。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-31T13:09:06.260

子列的数据类型必须与父列完全匹配。例如，由于 price.p_code 是 char(1)，movie.p_code 也需要是 char(1)，price.p_code 需要是主键或需要创建索引。

# regex - Netbeans - 复制突出显示的正则表达式搜索结果

> ID：15842112
> 
> 赞同：3
> 
> 时间：2013-04-05T19:36:24.503
> 
> 标签：regex, netbeans, replace, code-editor

我在 Windows 上的 Netbeans 7.3 中进行了简单的**正则表达式搜索***（使用 Ctrl+F）*：

```
\{\{.*?\}\} 
```

结果正确突出显示，问题是 - 如何**提取突出显示的文本搜索结果**？让它复制到剪贴板，另存为文件或其他任何东西。

有什么方法可以做到这一点吗？

也许有人对Netbeans中此类任务的替代快速方法有任何建议？*（或其他编辑）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T01:38:25.200

你在运行什么操作系统？如果是 OS X 或 Linux，请继续阅读！

我不确定是否会自动将突出显示的结果复制到剪贴板，但我也做了很多解决方法。

在不离开 NetBeans 的情况下为我完成此任务的最简单方法是 通过**Window>Output>Terminal （在 7.2.1 中）打开一个****内置终端窗口**- 然后导航到我的项目，并运行我在 Find 中构建的 RegEx功能与我选择的工具。事实上，我在 NetBeans 中经常使用内置终端来完成这类快速操作。如果运行 Linux，请使用剪贴板工具，例如 xsel ( [http://linux.die.net/man/1/xsel](http://linux.die.net/man/1/xsel)**) 结合内置终端仿真器可以允许在 IDE 中设计一些不错的工作流快捷方式，如果您更愿意在终端上工作/编码。请注意，像 NetBeans 中的内置终端仿真器可能无法很好地使用鼠标进行剪切/复制/粘贴，原因有多种，我不会在这里讨论。**

 **就此类基于内置/扩展的解决方案而言，这将很有帮助！我不知道一个。

希望此解决方法在此期间有所帮助。**

# php - for循环在购物车页面中重复相同大小的行？

> ID：15842119
> 
> 赞同：0
> 
> 时间：2013-04-05T19:36:44.587
> 
> 标签：php, mysql, database, loops, for-loop

我有一个购物车页面，其中循环计数会话购物车但问题是我现在一次又一次地`sizes`从 mySQL 数据库中检索每个产品的值现在我想为每个产品显示不同的值？请帮助我提前谢谢？`for loop repeating single row``sizes`

**从 MySql 表中选择大小查询**

```
function get_size($id){
$result=mysql_query("SELECT mywishlist.`sizes`
FROM mywishlist ORDER BY id DESC ") 
or die("Id Problem"."<br/><br/>".mysql_error());
while($row=mysql_fetch_assoc($result)){
return $row['sizes'].'<br>';
}
} 
```

**循环条件的购物车**

```
<?php
if(is_array($_SESSION['cart'])){

$max=count($_SESSION['cart']);
for($i=0;$i<$max;$i++){
$id=$_SESSION['cart'][$i]['id'];
$q=$_SESSION['cart'][$i]['qty'];
$product=get_product_name($id);
$image=get_product_image($id);
$ids=get_id($id);
$itemcode=get_itemcode($id);
$size=get_size($id);
if($q==0) continue;
?>

<div style="margin-left: -20px;"> <?php echo $sizes; ?> </div>
<input type="hidden" name="size[]" value="<?php echo $sizes; ?>" /></td>
<?php } } ?> 
```

**即使我在 Session 的帮助下尝试过，但仍然存在同样的问题**

```
$sizes=$_SESSION['sizes1']; 
```

**我的 MySQL 表图片我有两个不同的大小**

![在此处输入图像描述](https://i.stack.imgur.com/rt3xr.png)

**购物车页面** ![在此处输入图像描述](https://i.stack.imgur.com/NA8Fb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:56:18.673

当您返回时，循环退出

尝试：

```
function get_size($id){
$sizes = array();
$result=mysql_query("SELECT mywishlist.`sizes`
FROM mywishlist ORDER BY id DESC ") 
or die("Id Problem"."<br/><br/>".mysql_error());
while($row=mysql_fetch_assoc($result)){
$sizes[] =  $row['sizes'];
}
return implode('<br>', $sizes);
} 
```

我想我发现了错误仍然使用我上面提供的代码

并在您的购物车中对循环条件进行以下更改

```
 $sizes=get_size($id); // instead of $size=get_size($id); 
```

# boost - 将 Python 列表输入到使用 Boost Python 接收向量的函数中

> ID：15842126
> 
> 赞同：23
> 
> 时间：2013-04-05T19:36:51.840
> 
> 标签：boost, iterator, boost-python

我有一个带有签名的函数：

```
function(std::vector<double> vector); 
```

我已经公开了它，但它不包含 Python 列表。我查看了其他 SO 答案，其中大多数涉及更改函数以接收 boost::python::lists，但我不想更改函数。我想我可以使用 vector_indexing_suite 围绕这个函数编写一个简单的包装器，但是我有很多这种形式的函数，我不想为每个单独的函数编写一个包装器。有没有办法自动使 Python list->std::vector 映射发生？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-11T03:48:31.600

有一些解决方案可以在不修改原始功能的情况下完成此操作。

要使用少量样板代码和对 python 的透明度来完成此操作，请考虑注册一个[自定义`converter`](http://www.boost.org/doc/libs/1_53_0/libs/python/doc/v2/faq.html#custom_string). Boost.Python 在 C++ 和 Python 类型之间转换时使用已注册的转换器。某些转换器是在创建绑定时隐式创建的，例如在`class_`导出类型时。

以下完整示例使用的`iterable_converter`类型允许从支持[python 可迭代协议](http://docs.python.org/2/glossary.html#term-iterable)的 python 类型注册转换函数。该示例启用以下转换：

*   内置类型的集合：`std::vector<double>`
*   字符串的二维集合： `std::vector<std::vector<std::String> >`
*   用户类型集合：`std::list<foo>`

```
#include <iostream>
#include <list>
#include <vector>
#include <boost/python.hpp>
#include <boost/python/stl_iterator.hpp>

/// @brief Mockup model.
class foo {};

// Test functions demonstrating capabilities.

void test1(std::vector<double> values)
{
  for (auto&& value: values)
    std::cout << value << std::endl;
}

void test2(std::vector<std::vector<std::string> > values)
{
  for (auto&& inner: values)
    for (auto&& value: inner)
      std::cout << value << std::endl;
}

void test3(std::list<foo> values)
{
  std::cout << values.size() << std::endl;
}

/// @brief Type that allows for registration of conversions from
///        python iterable types.
struct iterable_converter
{
  /// @note Registers converter from a python interable type to the
  ///       provided type.
  template <typename Container>
  iterable_converter&
  from_python()
  {
    boost::python::converter::registry::push_back(
      &iterable_converter::convertible,
      &iterable_converter::construct<Container>,
      boost::python::type_id<Container>());

    // Support chaining.
    return *this;
  }

  /// @brief Check if PyObject is iterable.
  static void* convertible(PyObject* object)
  {
    return PyObject_GetIter(object) ? object : NULL;
  }

  /// @brief Convert iterable PyObject to C++ container type.
  ///
  /// Container Concept requirements:
  ///
  ///   * Container::value_type is CopyConstructable.
  ///   * Container can be constructed and populated with two iterators.
  ///     I.e. Container(begin, end)
  template <typename Container>
  static void construct(
    PyObject* object,
    boost::python::converter::rvalue_from_python_stage1_data* data)
  {
    namespace python = boost::python;
    // Object is a borrowed reference, so create a handle indicting it is
    // borrowed for proper reference counting.
    python::handle<> handle(python::borrowed(object));

    // Obtain a handle to the memory block that the converter has allocated
    // for the C++ type.
    typedef python::converter::rvalue_from_python_storage<Container>
                                                                storage_type;
    void* storage = reinterpret_cast<storage_type*>(data)->storage.bytes;

    typedef python::stl_input_iterator<typename Container::value_type>
                                                                    iterator;

    // Allocate the C++ type into the converter's memory block, and assign
    // its handle to the converter's convertible variable.  The C++
    // container is populated by passing the begin and end iterators of
    // the python object to the container's constructor.
    new (storage) Container(
      iterator(python::object(handle)), // begin
      iterator());                      // end
    data->convertible = storage;
  }
};

BOOST_PYTHON_MODULE(example)
{
  namespace python = boost::python;

  // Register interable conversions.
  iterable_converter()
    // Build-in type.
    .from_python<std::vector<double> >()
    // Each dimension needs to be convertable.
    .from_python<std::vector<std::string> >()
    .from_python<std::vector<std::vector<std::string> > >()
    // User type.
    .from_python<std::list<foo> >()
    ;

  python::class_<foo>("Foo");

  python::def("test1", &test1);
  python::def("test2", &test2);
  python::def("test3", &test3);
} 
```

交互使用：

```
>>> import example
>>> example.test1([1, 2, 3])
1
2
3
>>> example.test1((4, 5, 6))
4
5
6
>>> example.test2([
...   ['a', 'b', 'c'],
...   ['d', 'e', 'f']
... ])
a
b
c
d
e
f
>>> example.test3([example.Foo(), example.Foo()])
2 
```

对这种方法的几点评论：

*   该`iterable_converter::convertible`函数可以更改为只允许 python 列表，而不是允许任何支持可迭代协议的类型。但是，扩展可能会因此变得有点不合 Python。
*   转换是基于 C++ 类型注册的。因此，注册只需要进行一次，因为相同的注册转换将在任意数量的接受 C++ 类型作为参数的导出函数上选择。
*   它不会将不必要的类型引入`example`扩展命名空间。
*   元编程可以允许多维类型递归地注册每个维类型。但是，示例代码已经足够复杂，所以我不想增加额外的复杂性。

* * *

替代方法包括：

*   `boost::python::list`为每个接受 a 的函数创建一个接受 a 的自定义函数或模板函数`std::vector`。这种方法导致绑定根据导出的函数数量而不是需要转换的类型数量进行缩放。
*   使用 Boost.Python [`vector_indexing_suite`](http://www.boost.org/doc/libs/1_53_0/libs/python/doc/v2/indexing.html)。这些`*_indexing_suite`类导出一种类型，该类型*适用*于匹配 Python 列表或字典的某些语义。因此，python 代码现在必须知道要提供的确切容器类型，从而产生较少的 python 扩展。例如，如果`std::vector<double>`导出为`VecDouble`，则生成的 Python 用法将是：

    ```
    v = example.VecDouble()
    v[:] = [1, 2, 3]
    example.test1(v) 
    ```

    但是，以下内容将不起作用，因为确切的类型必须匹配，因为导出类仅注册和之间的`VecDouble`转换`std::vector<double>`：

    ```
    example.test1([4, 5, 6]) 
    ```

    虽然这种方法适用于类型而不是函数，但它会导致较少的 Python 扩展，并`example`使用不必要的类型使命名空间膨胀。

# svn - 如何在不提交工作副本中的子文件夹的情况下将我的工作副本提交回我的存储库？

> ID：15842133
> 
> 赞同：0
> 
> 时间：2013-04-05T19:37:11.023
> 
> 标签：svn

我有一个从存储库中检出的工作副本。现在我想将它提交回存储库，但我不希望我的工作副本中的子文件夹再提交回来。例如，我的工作副本文件路径是 Z:\school\ 并且我不希望 Z:\school\2011_2012\ 被提交回来。我将如何在 Windows 的批处理文件中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:44:16.650

提交特定的更改文件，或使用`--depth`参数：

> --depth ARG ：通过深度 ARG（'empty'、'files'、'immediates' 或 'infinity'）限制操作

另一种选择当然是只将有问题的文件添加到更改列表中并提交这些文件`--changelist`

# mysql - 如何对重复值求和？

> ID：15842134
> 
> 赞同：1
> 
> 时间：2013-04-05T19:37:12.607
> 
> 标签：mysql, duplicates

我有一个 MySQL 表，其中的行包含`text`(`'a'`和`'c'`) 的重复值：

```
+------+-----+
| text | num |
+------+-----+
| a    |  10 |
| b    |  10 |
| c    |  10 |
| d    |  10 |
| c    |   5 |
| z    |  10 |
| a    |   6 |
+------+-----+ 
```

所以，我想更新这些行，对`num`. 之后，表格应如下所示：

```
+------+-----+
| text | num |
+------+-----+
| a    |  16 |
| b    |  10 |
| c    |  15 |
| d    |  10 |
| z    |  10 |
+------+-----+ 
```

UPD：已编辑的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T19:38:12.950

`SUM`使用带有`GROUP BY`子句的聚合函数。像这样的东西：

```
SELECT `text`, SUM(num) AS num
FROM YourTableName
GROUP BY `text`; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/586f6/2)

这会给你：

```
| TEXT | NUM |
--------------
|    a |  16 |
|    b |  10 |
|    c |  15 |
|    d |  10 |
|    z |  10 | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T19:59:10.913

您可以创建一个临时表将聚合数据临时存储到其中，然后从中更新原始表。

1.  创建临时表
2.  从原始数据中选择聚合数据
3.  然后删除原表中的所有数据
4.  然后将临时表中的聚合数据选择到原始表中。

示例 SQL：

```
BEGIN;
CREATE TEMPORARY TABLE `table_name_tmp` LIKE `table_name`;
INSERT INTO `table_name_tmp` SELECT `text`, SUM(num) AS num FROM `table_name` GROUP BY 1;
DELETE FROM `table_name`;
INSERT INTO `table_name` SELECT * FROM `table_name_tmp`;
-- COMMIT; 
```

我将命令注释掉`COMMIT`以避免不必要的错误，请在使用前检查结果。

# eclipse - 为什么 Eclipse PDE Launch Configuration 正在构建所有项目

> ID：15842135
> 
> 赞同：0
> 
> 时间：2013-04-05T19:37:13.267
> 
> 标签：eclipse, plugins, eclipse-plugin, launch-configuration

我创建了一个启动配置来运行一个可执行文件。当我运行配置时，它会在运行实际工具以启动文件之前在工作区中构建所有项目。

任何人都知道它为什么要构建所有项目，我想避免这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:29:35.727

尝试这个。

1.  打开配置对话框，然后转到您的配置。
2.  转到“构建”选项卡
3.  取消选择“发布前构建”，或选择适合您需要的任何内容。

# c# - 反序列化类型的对象时出错....结束元素 '......' 来自命名空间 '' 预期。从命名空间“”中找到元素“项目”

> ID：15842136
> 
> 赞同：8
> 
> 时间：2013-04-05T19:37:20.343
> 
> 标签：c#, json, datacontractjsonserializer

当我反序列化我的 jsonstring 时，我收到错误消息

```
 There was an error deserializing the object of type RecordInfo. End element 'Warning' from namespace '' expected. Found element 'item' from namespace ''. 
```

这是我的 JsonString

```
public const string jsonString = @" 
        {
            ""RequestId"":514106,
            ""Warning"":[],
            ""CustomerData"": {
                ""Email"":""abc@abc.com"",
                ""FullName"":""OrTguOfE"",
                ""OrderData"":[]
            }
        }"; 
```

数据合约

```
[DataContract]
    public class RecordInfo
    {
        [DataMember(Name = "RequestId")]
        public string RequestId { get; set; }

        [DataMember(Name = "Warning")]
        public string Warning { get; set; }

        [DataMember(Name = "CustomerData")]
        public CustomerData CustomerData { get; set; }
    }
 [DataContract]
    public class CustomerData
    {
        [DataMember(Name = "Email")]
        public string RequestId { get; set; }

        [DataMember(Name = "FullName")]
        public string FullName  { get; set; }

        [DataMember(Name = "OrderData")]
        public OrderData[]  OrderData { get; set; }
    }
[DataContract]
    public class OrderData
    {
        [DataMember(Name = "OrderId")]
        public string OrderId { get; set; }

        [DataMember(Name = "SourceId")]
        public string SourceId { get; set; }

        [DataMember(Name = "SourceData")]
        public SourceData[] SourceData { get; set; }
    }

    [DataContract]
    public class SourceData
    {
        [DataMember(Name = "SourceDescription")]
        public string SourceDescription { get; set; }

        [DataMember(Name = "ProductName")]
        public string ProductName { get; set; }
    }
} 
```

这是我使用的反序列化器

```
private static T Deserialize<T>(string jsonString)
    {
        using (var ms = new MemoryStream(Encoding.Unicode.GetBytes(jsonString)))
        {
            var serializer = new DataContractJsonSerializer(typeof(T));
            return (T)serializer.ReadObject(ms);
        }
    } 
```

当我反序列化 bove jsonstring 时，我收到错误消息

```
 There was an error deserializing the object of type RecordInfo. End element 'Warning' from namespace '' expected. Found element 'item' from namespace ''. 
```

有什么建议可以解决这个错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T19:39:31.440

设置`IsRequired = false`，例如：

```
[DataMember(Name = "RequestId", IsRequired = false)] 
```

**MSDN 来源**：[`DataMemberAttribute.IsRequired`财产](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datamemberattribute.isrequired.aspx)

> 获取或设置一个值，该值指示序列化引擎在读取或反序列化时该成员必须存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-02T04:20:43.467

我发现类似错误的另一个原因是当我们将 Json 字段的数组类型映射到数据协定类的非数组字段时。（例如）我的 JSON 数据就像 -

```
"ipAddress": [
    "10.61.255.25",
    "fe80:0000:0000:0000:10e1:0b66:96a6:9ac8"
] 
```

但是因为我不知道这种类型的`IPAddress`数据，所以我映射`ipaddress`到

```
[DataMember(Name="ipAddress")]
public string IPAddress ( get; set; } 
```

相反，它应该是

```
[DataMember(Name="ipAddress")]
public string[] IPAddress ( get; set; } 
```

# php - 为什么 symfony2 不调用我的事件监听器？

> ID：15842137
> 
> 赞同：7
> 
> 时间：2013-04-05T19:37:24.530
> 
> 标签：php, symfony

我有一个包含两个捆绑包的程序。其中一个（CommonBundle）调度一个事件“common.add_channel”，而另一个（FetcherBundle）上的服务应该正在监听它。在分析器上，我可以在“未调用的侦听器”部分看到事件 common.add_channel。我不明白为什么 symfony 没有注册我的听众。

这是我的行动，里面`CommonBundle\Controller\ChannelController::createAction`：

```
$dispatcher = new EventDispatcher();
$event = new AddChannelEvent($entity);        
$dispatcher->dispatch("common.add_channel", $event); 
```

这是我的`AddChannelEvent`：

```
<?php

namespace Naroga\Reader\CommonBundle\Event;

use Symfony\Component\EventDispatcher\Event;
use Naroga\Reader\CommonBundle\Entity\Channel;

class AddChannelEvent extends Event {

    protected $_channel;

    public function __construct(Channel $channel) {
        $this->_channel = $channel;
    }

    public function getChannel() {
        return $this->_channel;
    }

} 
```

这应该是我的监听器（FetcherService.php）：

```
<?php

namespace Naroga\Reader\FetcherBundle\Service;

class FetcherService {

    public function onAddChannel(AddChannelEvent $event) {
        die("It's here!");      
    }
} 
```

这是我注册我的听众的地方（services.yml）：

```
kernel.listener.add_channel:
    class: Naroga\Reader\FetcherBundle\Service\FetcherService
    tags:
        - { name: kernel.event_listener, event: common.add_channel, method: onAddChannel } 
```

我究竟做错了什么？为什么当我调度 common.add_channel 时 symfony 不调用事件监听器？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-05T21:33:47.890

新的事件分派器对另一个分派器上设置的侦听器一无所知。

在您的控制器中，您需要访问该`event_dispatcher`服务。Framework Bundle 的 Compiler Pass 将所有侦听器附加到此调度程序。要获取服务，请使用`Controller#get()`快捷方式：

```
// ...
use Symfony\Bundle\FrameworkBundle\Controller\Controller;

class ChannelController extends Controller
{
    public function createAction()
    {
        $dispatcher = $this->get('event_dispatcher');
        // ...
    }
} 
```

# laravel - 在 Laravel 4 中使用 DB::insert() 返回新 id

> ID：15842138
> 
> 赞同：34
> 
> 时间：2013-04-05T19:37:29.140
> 
> 标签：laravel, laravel-4

在 Laravel 4 中，当您执行 a 时`DB::insert()`，如何获取刚刚插入的行的 ID？与我们的功能类似`->insertGetId()`。使用的原因`DB::insert()`是它是一个复杂的 PostgreSQL 查询，无法使用 Fluent 构建。

**示例查询：**

```
$newId = DB::insert('insert into users (id, name) values (?, ?)', array(1, 'Dayle'));
echo $newId; // returns 1 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-04-05T20:22:29.893

有一个 insertGetId 方法。

```
$id = DB::table('users')->insertGetId(
    array('id' => 1, 'name' => 'Dayle Rees')
); 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-04-05T19:53:37.207

如果你看一下，`Illuminate\Database\ConnectionInterface`你会看到这些函数是如何编写的。不幸的是`DB::insert()`返回一个布尔值`PDOStatement::execute()`，目前没有`DB::insertGetId()`。如果这有用，那么您应该在 GitHub 上请求它。

同时，您应该可以使用`DB::getPdo()->lastInsertId()`

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-07-24T11:20:35.877

有一个`insertGetId()`方法，如下：

```
$dataset = array('column_id' => 1, 'name' => 'Dayle');
$column_id = DB::table('users')->insertGetId($dataset,'column_id'); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-04-20T19:55:32.147

答案有点晚了，但是我认为对于 psql 最好使用本机`RETURNING id`

对我有用的查询是：

```
DB::select(
    DB::raw('insert into threads (created_at, updated_at) values (?, ?) 
    returning id'), [Carbon::now(), Carbon::now()]
); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T12:20:07.420

如果结构复杂，最好使用 Eloquent。

您需要查看文档的最佳方法：

[http://laravel.com/docs/eloquent](http://laravel.com/docs/eloquent)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-12-17T14:42:26.580

将数据保存到数据库后，您只需在步骤之前调用`$insertedId = $user->id;`where即可`$user->save()`。

更多信息[在这里](http://laravel.com/docs/eloquent#insert-update-delete)

# javascript - 将焦点放在浏览器上

> ID：15842139
> 
> 赞同：4
> 
> 时间：2013-04-05T19:37:30.650
> 
> 标签：javascript, jquery, focus

我正在研究键盘可访问性。我有一个位于页面内的 flash 对象，为了阻止焦点被困在其中，我添加了`ExternalInterface`与一些 JavaScript 函数对话的选项卡侦听器。

JavaScript 使用 a 查找下一个可用元素`tabIndex`并调用`focus()`它。到现在为止还挺好。但是，如果插件是页面上的最后一个可选项卡（或反向选项卡时的第一个），则没有可切换到的元素。通常这会将焦点设置在浏览器窗口上，所以我想保持这种行为。

因此我的问题是：是否可以以编程方式将焦点放在浏览器的 chrome 上？如果我可以同时模仿前后制表符*，*那就更好了。如果可能的话，我还想避免在 flash 之前/之后添加额外的 tabbable 组件，除非我可以使它们对鼠标*和*键盘都有效地不可见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-31T20:01:17.023

在我自己寻找类似答案时遇到了这个问题。如果要释放当前焦点元素上的焦点，请使用 document.activeElement；如果您想在不支持的情况下进行后备，请使用焦点在文档的父元素上。据我所知，这应该支持所有已知的浏览器：

```
var activeElement = document.activeElement;
if (activeElement) {
   activeElement.blur();
} else if (document.parentElement) {
   document.parentElement.focus();
} else {
   window.focus();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:50:19.800

在文档顶部将焦点设置为没有文本内容的虚拟锚点似乎有效：

```
document.getElementsByTagName('a')[0].focus(); 
```

[http://jsfiddle.net/4NA5u/1/](http://jsfiddle.net/4NA5u/1/)。

# php - 如何从 ubuntu 和 php 5.3.10 连接到 mssql

> ID：15842141
> 
> 赞同：0
> 
> 时间：2013-04-05T19:37:38.880
> 
> 标签：php, sql-server, linux, ubuntu

我在使用常规 mssql_query 保存特定数据时遇到问题，如下所述：[如何正确清理存储电子邮件的 mssql 查询](https://stackoverflow.com/questions/15840642/how-to-correctly-sanitize-mssql-query-that-stores-emails)

如您所见，有些人推荐使用 sqlsrv 驱动程序，但它不适用于 linux。那么在 Linux 上使用 mssql 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:23:08.263

正如 Marc B 所说，使用 PDO。您还需要使用 FreeTDS 驱动程序。你需要：`sudo apt-get install tdsodbc unixodbc php5-odbc`。

[您可以在此答案](https://stackoverflow.com/questions/13066716/freetds-not-using-its-config/13069820#13069820)中看到进一步的配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T19:49:01.507

目前，Microsoft`Red Hat`仅提供对 Linux 分发驱动程序的支持。它应该在 64 位操作系统上。[http://www.microsoft.com/en-us/download/details.aspx?id=28160](http://www.microsoft.com/en-us/download/details.aspx?id=28160) 而且它不是开源应用程序，它也很难获得企业版的支持。我更喜欢继续使用 MYSQL 数据库

# android-listview - 如何找到要在 ListView 中显示的数据范围

> ID：15842142
> 
> 赞同：0
> 
> 时间：2013-04-05T19:37:39.923
> 
> 标签：android-listview, android-cursoradapter

我有一个包含大量数据的列表。所以过滤文本变化有点慢。所以我想我为什么要一次过滤所有数据。我想过滤将在 ListView 中显示的有限数据。现在的问题是我怎么知道 ListView 何时会从特定索引中询问下 20 个数据？

**更多说明：** 我有一个 ListView 名称列表、一个适配器、一个包含 2 万条数据的列表和一个小列表（已过滤）。我覆盖 getView 并提供过滤列表中的数据。

**我想做什么？：** 当 ListView 需要数据（发生滚动或新数据事件）时，在大列表中过滤或搜索，直到获得下一个 20 或 25 个数据，然后将它们设置在过滤后的列表中并在 listView 中显示使用 getView。那么我怎么知道 listView 什么时候需要下一个或上一个 20 个数据呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:19:39.260

您首先对所有数据进行排序，然后将排序后的数据传递给适配器并使用 ViewHolder 模式。不要在适配器中使用排序。适配器本身调用列表视图中的可见索引数据。ViewHolder 链接： [http ://myandroidsolutions.blogspot.com/2012/07/android-listview-tutorial.html](http://myandroidsolutions.blogspot.com/2012/07/android-listview-tutorial.html)

[加载ListView更快，比Viewholder方法更快](https://stackoverflow.com/questions/11672174/faster-loading-listview-faster-than-the-viewholder-method)

[为具有不同项目布局的 ListView 创建 ViewHolders](https://stackoverflow.com/questions/3514548/creating-viewholders-for-listviews-with-different-item-layouts)

如果您需要当前获取列表视图的可见范围，您可以将 OnScrollListener 设置为列表视图，在这里您可以获得可见范围，您可以调用适配器的 notifyDataChanges 方法来更新列表视图。

# artificial-intelligence - CLIPS 模式匹配中的数字相等测试失败？

> ID：15842144
> 
> 赞同：1
> 
> 时间：2013-04-05T19:37:41.563
> 
> 标签：artificial-intelligence, expert-system, clips, jess

我的 CLIPS 文件中有以下规则：

```
(defrule check-final (declare (salience 12))
    ?scnt <- (set-count (value ?v) (class ?c))
    (test (= ?v ?*total*))
    =>
    (printout T ?*total* " == " ?v crlf)
) 
```

我得到以下奇怪的输出：

```
CLIPS>(run)
14 == 9
5 == 2 
```

这怎么可能 ？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T12:48:28.313

`set-count`每当断言或修改事实时，都会发生此规则的模式匹配。一段时间后，在调用`run`. 这两个过程可以在时间上广泛分开。的值`?*v*`当然可以在很长一段时间内发生变化。

关键是要意识到他打印的结果将反映`?v`从发生模式匹配的时代开始的值，而`?*total*`将是打印结果时的值。由于`?*total*`自模式匹配以来可能已经看到任意更改，因此无法保证它会等于`?v`规则实际触发的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:14:44.977

发现部分问题：我正在使用全局`?*total*`并根据 [CLIPS 手册](http://clipsrules.sourceforge.net/documentation/v624/bpg.htm)

> 全局变量可以作为模式匹配过程的一部分访问，但更改它们不会调用模式匹配过程。

但这并不能解释相等性测试失败

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T19:06:58.077

最可能的解释是，在某个时候，相等性测试得到满足，然后在规则执行之前更改了全局值。

```
CLIPS> (deftemplate set-count (slot value) (slot class))
CLIPS> 
(defglobal ?*total* = 0)
CLIPS> 
(defrule check-final (declare (salience 12))
    ?scnt <- (set-count (value ?v) (class ?c))
    (test (= ?v ?*total*))
    =>
    (printout T ?*total* " == " ?v crlf)
)
CLIPS> (bind ?*total* 9)
9
CLIPS> (assert (set-count (value 9) (class a)))
<Fact-1>
CLIPS> (bind ?*total* 14)
14
CLIPS> (run)
14 == 9
CLIPS> (bind ?*total* 2)
2
CLIPS> (assert (set-count (value 2) (class b)))
<Fact-2>
CLIPS> (bind ?*total* 5)
5
CLIPS> (run)
5 == 2
CLIPS> 
```

# xcode - 无法在 OS X 中加载内核扩展（.kext 文件）（不包含架构代码：x86_64 错误）

> ID：15842145
> 
> 赞同：2
> 
> 时间：2013-04-05T19:37:43.793
> 
> 标签：xcode, macos, kernel-extension

我正在尝试将内核扩展文件 (.kext) 加载到 OS X Mountain Lion (10.8.3)。我用 XCode 4.6.1 重建了它。但是，当我尝试使用“kextutil -n -t /xxxx.kext”加载它时，我收到了以下警告。

> 可执行文件不包含架构代码：x86_64

似乎代码不支持 x86_64，但我确实在构建设置中包含了 x86_64，只要看起来适用，例如 Valid Architectures: i386, x86_64。

我应该如何更改设置以使其可以使用 64 位内核加载？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T07:01:26.153

Did you set "Build Active Architecture Only" to NO as mentioned in [Kernel Extension Programming Topics](https://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/KEXTConcept/KEXTConceptKEXT/kext_tutorial.html#//apple_ref/doc/uid/20002365-BABJHCJA) ("Create a New Project" -> 6)?

# python - 使用 text()，有没有办法用 scrapy 将空文本转换为 'None'

> ID：15842146
> 
> 赞同：2
> 
> 时间：2013-04-05T19:37:47.827
> 
> 标签：python, xml, xpath, web-scraping, scrapy

我遇到了一个问题。我正在抓取的网站 xml 有一些为空的值，但我需要保留这些值的顺序。

样本：

```
<thedata>
    <some-item>
        <value xsi:nil="true"/>
        <value xsi:nil="true"/>
        <value xsi:nil="true"/>
        <value xsi:nil="true"/>
        <value xsi:nil="true"/>
        <value>44</value>
        <value>32</value>
        <value>31</value>
        <value xsi:nil="true"/>
        <value xsi:nil="true"/>
        <value>32</value>
        <value>31</value>
        <value>34</value>
        <value>34</value>
        <value>33</value>
    </some-item>
</thedata> 
```

这样做`text()`会忽略空值：

```
class MySpider(XMLFeedSpider):
    name = 'myspider'
    start_urls = ['http://www.example.com/somexml.xml']
    itertag = 'thedata'

    # Using XMLFeedSpider
    def parse_node(self, response, node):
        item_vals = node.select('some-item/value/text()').extract()
        print item_vals 
```

这将打印一个列表，其中仅包含具有整数的值。

由于我需要保留顺序，有没有办法告诉scrapy用`''`or替换任何空值`None`？

**编辑**：@unutbu：我仍然遇到同样的问题：

```
 item_vals = node.select('some-item/value/text()').extract()
    print item_vals
    item_vals2 = node.select('some-item/value/text()').extract() or None
    print item_vals2 
```

输出：

```
 [u'44',u'32',u'31',u'32',u'31',u'34',u'34',u'33']
    [u'44',u'32',u'31',u'32',u'31',u'34',u'34',u'33'] 
```

我想要的是：

```
 [None,None,None,None,None,u'44',u'32',u'31',None,None,u'32',u'31',u'34',u'34',u'33'] 
```

或者遇到时表示空值的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T19:38:52.190

您需要选择**所有**值节点，然后从每个部分中提取文本（如果有）：

```
[txt for item in hxs.select('some-item/value') for txt in item.select('text()').extract() or [u'']] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T22:45:09.743

您可以使用[Becker](http://www2.informatik.hu-berlin.de/~obecker/XSLT/)方法实现此目的：

```
>>> from scrapy.selector import XmlXPathSelector
>>> xml = """<thedata>
...     <some-item>
...         <value xsi:nil="true"/>
...         <value xsi:nil="true"/>
...         <value xsi:nil="true"/>
...         <value xsi:nil="true"/>
...         <value xsi:nil="true"/>
...         <value>44</value>
...         <value>32</value>
...         <value>31</value>
...         <value xsi:nil="true"/>
...         <value xsi:nil="true"/>
...         <value>32</value>
...         <value>31</value>
...         <value>34</value>
...         <value>34</value>
...         <value>33</value>
...     </some-item>
... </thedata>
... """
>>> xxs = XmlXPathSelector(text=xml)
>>> thedata = xxs.select('some-item/value').select(
... 'concat('
... ' substring(text(), 1, number(text()) * string-length(text())),'
... ' substring("nil", 1, number(not(text())) * string-length("nil")))'
... ).extract()
>>> thedata
[u'nil', u'nil', u'nil', u'nil', u'nil', u'44', u'32', u'31', u'nil', u'nil', u'32', u'31', u'34', u'34', u'33'] 
```

如果您想获取`None`值：

```
>>> map(lambda v: None if v == 'nil' else v, thedata)
[None, None, None, None, None, u'44', u'32', u'31', None, None, u'32', u'31', u'34', u'34', u'33'] 
```

# phantomjs - 在phantomjs中设置一个字符串作为网页的响应

> ID：15842147
> 
> 赞同：1
> 
> 时间：2013-04-05T19:37:50.763
> 
> 标签：phantomjs

嗨，我想做的不是让网页成为

```
page.open(url); 
```

但是要设置一个已经检索到的字符串作为页面响应。可以这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:35:49.060

是的，它就像分配给 page.content 一样简单。通常还值得设置一个 page.url（否则，如果使用 Ajax、SSE 等进行任何操作，您可能会遇到跨域问题），并且该`setContent`功能有助于一次性完成这两个步骤。这是基本示例：

```
var page = require('webpage').create();
page.setContent("<html><head><style>body{background:#fff;text:#000;}</style><title>Test#1</title></head><body><h1>Test #1</h1><p>Something</p></body></html>","http://localhost/imaginary/file1.html");

console.log(page.plainText);
page.render("test.png");
phantom.exit(); 
```

因此，使用您拥有的“先前检索到的页面响应”调用 page.setContent。

# web-services - 使用播放框架实现服务，其中一个参数是 url

> ID：15842161
> 
> 赞同：0
> 
> 时间：2013-04-05T19:38:12.937
> 
> 标签：web-services, scala, playframework

我正在创建一个带有播放框架和 scala 的 Web 服务。服务获取 url 和语言，并使用此信息，但我无法将 url 放入服务中。

我在路由 GET /trans/$url<(http%3A%2F%2Fa)>/:lang controllers.Application.getTranslation(url:String, lang:String) 中有这个

并在应用程序中： def getTranslation(iri: String,lang:String) = Action { 隐式请求 => 等。

我想收到类似 **'/trans/htp://a/es'的**东西（它的http而不是htp，但我不能在这里写）

有可能吗？因为我什么都试过了，我做不到。有没有一种方法可以将 url 作为参数传递？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:11:52.493

您必须在双方都使用 url 转义和 unescape。它被称为 URL 编码或百分比编码（因为转义字符使用以 % 开头的组合重写） [https://en.wikipedia.org/wiki/Percent-encoding](https://en.wikipedia.org/wiki/Percent-encoding)

如果您的客户端在 js 中，这里有一个问题可以为您提供信息： [Encode URL in JavaScript?](https://stackoverflow.com/questions/332872/how-to-encode-a-url-in-javascript)

这是很好的 scala 库，可用于编码和解码 URL 永久编码。 [https://github.com/theon/scala-uri](https://github.com/theon/scala-uri)

我自己已经开始使用 scala（我在 playframework 上的大部分产品工作仍在 Java 中），所以我不知道是否有更好的 scala uri 库。

编辑：你让我好奇，所以我搜索了一下： [http](http://www.motobit.com/util/url-encoder.asp) ://www.motobit.com/util/url-encoder.asp 你应该小心两边的编码。

# css - 移动文件时css不显示

> ID：15842168
> 
> 赞同：0
> 
> 时间：2013-04-05T19:38:45.447
> 
> 标签：css, vb.net, web

我敢肯定这里有一些非常简单的东西我错过了，但我就是看不到它。我有许多模板页面，目前在我的项目的根文件夹中，我的 2 个 CSS 表也是如此。我有更多包含在“CSS”文件夹中。我想获取模板页面（称它们为 home.aspx 和dashboard.aspx）并将它们放在一个名为“Template_Design_Pages”的文件夹中。我很高兴将 CSS 页面保留在根目录中，或者移动它们。当我将模板页面移动到该文件夹​​时，CSS 会丢失。我已尝试在已移动的页面上更新 href 无效。假设 href 是 href="css/Reset.css" - 我尝试更改为：

```
href="/css/Reset.css"
href="~/css/Reset.css"
href="Orion_Admin/css/Reset.css"  NB Orion_Admin is root. 
```

我已经看到提到的 href="<%=ResolveUrl("~/css/reset.css.css") %>" 但它也不起作用，我不确定它的作用。我对这一切都很陌生。该项目是 ASP.VB 顺便说一句。以下是似乎导致麻烦的代码，尽管我的图像也没有显示。我认为这一切都与一个问题有关：

```
<link rel="stylesheet" type="text/css" href="css/reset.css" media="screen" />
<link rel="stylesheet" type="text/css" href="css/text.css" media="screen" />
<link rel="stylesheet" type="text/css" href="css/grid.css" media="screen" />
<link rel="stylesheet" type="text/css" href="layout.css" media="screen" />
<link rel="stylesheet" type="text/css" href="nav.css" media="screen" />
<!--[if IE 6]><link rel="stylesheet" type="text/css" href="css/ie6.css" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" type="text/css" href="css/ie.css" media="screen" /><![endif]-->
<!-- BEGIN: load jquery -->
<script src="js/jquery-1.6.4.min.js" type="text/javascript"></script>
<script type="text/javascript" src="js/jquery-ui/jquery.ui.core.min.js"></script>
<script src="js/jquery-ui/jquery.ui.widget.min.js" type="text/javascript"></script>
<script src="js/jquery-ui/jquery.ui.accordion.min.js" type="text/javascript"></script>
<script src="js/jquery-ui/jquery.effects.core.min.js" type="text/javascript"></script>
<script src="js/jquery-ui/jquery.effects.slide.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:47:30.170

如果我是你，我会使用绝对路径而不是相对路径。

```
<link rel="..." type="..." href="http://www.your.site/whatever/folder/reset.css" media="..:"> 
```

此外，在向上移动文件夹时，请尝试使用 ../ 而不是 ~。

# javascript - 使文本字段保持焦点

> ID：15842171
> 
> 赞同：0
> 
> 时间：2013-04-05T19:38:56.937
> 
> 标签：javascript, jquery, ajax, forms

我认为这很容易在不寻求帮助的情况下完成，但我想不是。添加 autofocus="true" 标记在页面最初加载时起作用，但如果有人单击任何位置或打开链接，文本字段就会失去焦点。如何强制字段保持焦点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-20T11:38:12.290

有人问你为什么要这样做。答案当然是作为开发人员，我们需要处理客户的疯狂需求:)

对于答案：

```
$(document).ready(function(){

    $(document).click(function() { $("<THE-ELEMENT>").focus() });
}); 
```

在这种情况下，我们将侦听器添加到文档中的所有元素:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T19:41:36.247

在单击时关注输入框的文档上附加单击事件侦听器。

```
$(document).on("click", function()
{
     $("yourInputIdHERE").focus();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T19:41:50.963

```
$("#textbox").focus().on('blur', function() {
    $(this).focus();            
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T19:48:01.040

处理所有情况，以防某些事件被阻止传播到文档。还要处理用户切换选项卡并返回的情况。

```
$("#element").blur(function ()
{
    $("#element").focus();
});
$(document).bind('keydown mousedown mouseup click',function ()
{
    $("#element").focus();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T19:43:44.553

您可能想要尝试做的是将事件处理程序附加到`blur`事件。一旦你捕捉到它，你可以简单地在最初失去焦点的同一个元素上触发一个焦点事件。

```
$("input").on('blur',function(){
   $(this).focus();
}); 
```

您可能希望将此与某种形式的验证结合起来，以便用户输入所需的值后，他们将能够离开文本字段。

```
$("input").on('blur',function(){
   var $this = $(this);
   if ($this.val() == ''){
     $this.focus();
     showErrorMessage("Please enter a value");
   }
}); 
```

如果您不实施某种形式的标志来启用/禁用此行为，您将永远将用户锁定在一个字段中。他们没有（简单的）方法可以移动到页面的不同区域。

**[这是一个小演示](http://jsfiddle.net/YkwGe/2/)**，
您会注意到一旦文本字段获得焦点，它将一直保持到输入值为止。

# jquery - jQuery css 切换 - 需要添加淡入淡出动画过渡

> ID：15842172
> 
> 赞同：0
> 
> 时间：2013-04-05T19:38:57.347
> 
> 标签：jquery, css, jquery-animate, toggle

我想在这个片段中添加一个动画过渡，我用它来在 display: none 和 display: block 之间切换

```
 jQuery(".slide").hover(
function() {
    jQuery(this).find(".data").css("display","block");
},
function() {
    jQuery(this).find(".data").css("display","none");
    }
    ); 
```

非常感谢任何帮助......我的 jQuery 非常有限。我尝试了各种项目，但似乎无法获得好的语法来产生效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:42:35.930

你可以使用`fadeToggle`方法。

```
$(".slide").hover(function() {
    $(this).find(".data").fadeToggle();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T19:43:03.563

您可以使用 .hide() 和 .show()

```
 jQuery(".slide").hover(
function() {
    jQuery(this).find(".data").show("slow", "swing")
},
function() {
    jQuery(this).find(".data").hide("slow", "swing")
    }
    ); 
```

这是来自jquery网站：

```
$(selector).hide(speed,easing,callback) 
```

*   速度可以慢，快或毫秒
*   缓动可以是摆动的或线性的
*   回调可用于调用函数

看[这里](http://api.jquery.com/hide/)

我总是使用显示并隐藏在 CSS 显示上。

编辑：

你也可以试试 .slideUp()，它通过滑动来隐藏元素。看[这里](http://api.jquery.com/slideUp/)

```
 jQuery(".slide").hover(
function() {
    jQuery(this).find(".data").slideDown("slow", "swing")
},
function() {
    jQuery(this).find(".data").slideUp("slow", "swing")
    }
    ); 
```

# c# - 创建一个接受多种类型对象的 C# 方法？

> ID：15842174
> 
> 赞同：2
> 
> 时间：2013-04-05T19:39:07.127
> 
> 标签：c#, oop

我正在编写一个类来处理我的数据事务。我想创建一种方法来处理多个对象，而不是为每种对象类型使用不同的方法。

例如，假设我有对象类型：汽车、卡车、房屋。每个对象都有一个属性，该属性保存应该用于创建数据库的字段和类型的名称。同样，每个对象都有一个名为 PrintFieldsWithType() 的方法，可以将它们作为 SQL 查询的一部分打印出来。

我一直在尝试类似的东西：

```
private void CreateTable(string tblname, Object tempobject)
    {
        //Construct Command String from Params
        string mycommand = "CREATE TABLE " + tblname + tempobject.PrintFieldsWithType();
        tempobject = null;
        //Construct object and execute query
        command = new SQLiteCommand(mycommand, myconnection);
        command.ExecuteNonQuery();
    } 
```

我不想为每种对象类型创建不同的方法，而是希望能够像这样调用此方法： CreateTable(NewCars, Car myCar); CreateTable(CheapHouses, House myHouse);

我是否试图以错误的方式处理这个问题？
有一个更好的方法吗？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T19:41:31.540

> 我是否试图以错误的方式处理这个问题？

是的，因为`Object`不包含定义，`PrintFieldsWithType`所以您的代码将无法编译。

> 有一个更好的方法吗？

创建一个定义这些类型共有的属性/方法的接口：

```
public interface IThing //(please come up with a better name)
{
    public string PrintFieldsWithType();
} 
```

并让每种类型都实现该接口：

```
public class Car : IThing 
```

等等

然后更改`CreateTable`为

```
private void CreateTable(string tblname, IThing tempobject) 
```

如果每种类型的*实现**完全相同*，`PrintFieldsWithType`则可以将其设为基类而不是接口，但是由于一个类只能有一个直接基类但可以实现多个接口，因此您需要明智地选择。

# c# - 我可以在 C# .net4 中实际使用多大的 SQL 字符串（用于大规模更新）？

> ID：15842175
> 
> 赞同：3
> 
> 时间：2013-04-05T19:39:12.130
> 
> 标签：c#, sql-server, .net-4.0, sql-update

我正在接收和解析一个大文本文件。

在该文件中，我有一个数字 ID，用于标识表中的一行，以及另一个需要更新的字段。

```
ID       Current Location
=========================
1        Boston
2        Cambridge
3        Idaho 
```

我正在考虑创建一个 SQL 命令字符串并使用 ADO.Net 将其关闭，但是我将收到的其中一些文件有数千行。这是可行的还是有我没有看到的限制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T19:46:31.403

如果您可能有数千行，那么编写 SQL 语句绝对*不是*要走的路。更好的基于代码的替代方案包括：

1.  使用 SQLBulkCopy 将更改数据插入临时表，然后使用临时表作为源更新目标表。它还具有出色的[批处理](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.batchsize.aspx)选项（与其他选项不同）

2.  编写一个存储过程来执行更新，该过程接受一个包含更新数据的 XML 参数。

3.  编写一个存储过程来执行接受包含更新数据的表值参数的更新。

我自己没有比较它们，但我的理解是＃3通常是最快的（尽管＃1对于几乎任何需要来说都足够快）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T19:58:20.303

编写一个巨大的 INSERT 语句非常慢。您也不想一次解析整个海量文件。您需要做的是以下方面的事情：

1.  找出一个好的块大小。让我们称之为`chunk_size`。这将是您一次从文件中读取的记录数。
2.  将文件中的记录数加载`chunk_size`到 DataTable 中。
3.  使用[SQLBulkCopy](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)将 DataTable 插入 DB。
4.  重复 2 & 3 直到文件完成。

您必须进行试验才能找到最佳尺寸，`chunk_size`因此从小处着手并逐步提高。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-05T19:48:38.883

我不确定一个实际的限制，如果存在的话，但为什么不把你觉得舒服的“一口大小”的文件块分成几个命令呢？如果它们都失败或成功很重要，你总是可以将它包装在一个事务中。

说一次抓取 250 行，或者其他什么。

# javascript - IE 不接受我的 onClick，有什么建议吗？

> ID：15842177
> 
> 赞同：1
> 
> 时间：2013-04-05T19:39:20.673
> 
> 标签：javascript, jquery, internet-explorer

我有一个非常简单的功能，似乎在 Chrome、Firefox 和 Safari 中都可以正常工作，但在 IE 中却出现了问题。我实际上是在尝试将其加载为 Windows 8 Web 应用程序，但从我所阅读的内容来看，它使用更宽容的 IE10 版本来输出。

假设我有一个`<div>`（或一个`<a>`...`href`我也试过这个），如下所示：

```
<div onClick="showSection('myTemplate.html');"></div> 
```

这是我的功能：

```
function showSection(loca) {
    $("#optionView").show();
    $("#bookMenu").hide();
    $("#optionView").load('settings/'+loca);    
    $("#settingsButton").attr("onClick","showSettingsMain();");
} 
```

为什么这不能专门在 IE 中工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T19:41:34.773

一个更好的选择是不使用内联事件处理程序，特别是因为您使用的是 jQuery。

相反，请使用以下 HTML：

```
<div id="main_div"></div> 
```

并使用这个 Javascript：

```
$(document).ready(function () {
    $("#main_div").on("click", function () {
        showSection("myTemplate.html");
    });
}); 
```

这可能无法解决您使用 IE10 的问题，但它被认为是更好的做法......并且应该与所有浏览器保持一致。

其他一些建议：

与其使用`.attr`来设置 的`onclick`属性`#settingsButton`，不如`on`再次使用：

```
$("#settingsButton").on("click", function () {
    showSettingsMain();
}); 
```

虽然我不确定这是否会对问题产生任何影响。

`attr`尽管如此，这里是关于和`prop`- [.prop() 与 .attr()](https://stackoverflow.com/questions/5874652/prop-vs-attr)之间区别的解释

此外，如果您需要准确指定要使用的 URL，即使是`<div>`逐个地，您也可以使用`data-*`属性。假设这是您的 HTML：

```
<div class="trigger-div" data-target-url="myTemplate.html"></div>
<div class="trigger-div" data-target-url="myTemplate2.html"></div> 
```

然后你可以使用：

```
$(document).ready(function () {
    $(".trigger-div").on("click", function () {
        var $this = $(this);
        var target_url = $this.attr("data-target-url");  // or $this.data("target-url")
        showSection(target_url);
    });
}); 
```

单击第一个 div 将使用“myTemplate.html”，而单击第二个将使用“myTemplate2.html”。

这样，您的数据将嵌入到 HTML 中，而您的 Javascript 则不显眼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:46:30.997

您使用 jQuery 错误，这里：

首先，将事件绑定到 div，您需要为此添加一个类或 id：

```
<div id="myEvent"></div> 
```

然后，绑定事件：

```
$('#myEvent').on('click', showSection( 'myTemplate.html') ); 
```

你的功能：

```
function showSection(loca) {
    $("#optionView").show();
    $("#bookMenu").hide();
    $("#optionView").load('settings/'+loca);    
} 
```

试试这样。

# neo4j - Spring Data Neo4j：为什么保存方法需要这么长时间？

> ID：15842185
> 
> 赞同：3
> 
> 时间：2013-04-05T19:39:55.847
> 
> 标签：neo4j, spring-data-neo4j

我在我的项目中使用 Spring Data Neo4j，我注意到在保存我的节点实体类（>300ms/节点）时需要花费太多时间，这实际上非常简单（它们只包含一个属性，一个简单的长 id） . 节点之间的关系也很简单（我只是想代表一个社交网络）。其余的，我使用密码查询，时间要快得多并且可以接受（~3-30ms）。

事实证明这是一个大问题，因为我的项目的一个基本部分是填充图表，然后才“触发”查询。任何建议可能是什么原因？我使用的 Spring Data Neo4j 版本是 2.1.0.RELEASE，我使用的是存储库方法。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:37:30.423

这取决于您使用的映射模式，简单映射要慢得多，因为它必须将您的对象图合并回 Neo4j。高级映射要快得多，因为它是 Neo4j 之上的一个薄层（读取和写入）。

无论如何，您都应该在跨越业务操作的更高级别上创建事务。

# android - 使用服务器上 SQL 数据库中的数据更新 Android 应用程序上的 SQL 数据库

> ID：15842195
> 
> 赞同：0
> 
> 时间：2013-04-05T19:40:26.547
> 
> 标签：android, android-sqlite

我需要一些帮助，我的应用程序在创建时创建了一个数据库。

我想要的是在服务器或 PC 上的数据库中获取信息并将其加载到我的应用程序中。它只需要从服务器到应用程序，而不是再次返回。

我不知道我会怎么做，有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:48:04.027

使用 HttpClient，您可以设置执行 POST 到服务器上的某个 servlet 或类似应用程序。然后，该应用程序需要将数据发送回您的 Android 应用程序，该应用程序正在等待服务器的响应。然后你的应用程序可以解析数据并填充它自己的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:45:36.487

**首先，我应该说你的问题是如此广泛**。它包含很多技术。因此，我将简要介绍一下这里。你应该自己弄清楚其余的。然后，你可以回来问更具体的问题。

**也就是说，这是您应该采取的路径：**

1.  在服务器上，实现一个 REST API，用服务器数据库中的数据响应调用者。

    > 示例：http: [//your.server.com/api/somedata](http://your.server.com/api/somedata)
    > 
    > 使用方法调用此 url`GET`应该以 JSON 格式返回您想要的数据。

2.  从您的 android 应用程序中，调用此 url 并将响应保存在`String`.

3.  解析 JSON 字符串（您可以使用[gson](http://code.google.com/p/google-gson/)）。
4.  将解析后的数据保存到本地数据库。

如果你是开发服务器 api 的人，那么推荐阅读这本书：

[RESTful Web 服务](https://rads.stackoverflow.com/amzn/click/com/B0043D2ED6)

## 更新

假设您的服务器数据库中有一个名为 (TABLE) 的表，其中包含 COL_1、COL_2、COL_3 列。

您可以实现一个名为“TABLE.php”的 php 页面，该页面返回以下内容：

```
{
    "items": [
        {"COL_1": "value_1", "COL_2": "value_2", "COL_3": "value_3"},
        {"COL_1": "value_2", "COL_2": "value_3", "COL_3": "value_4"},
        {"COL_1": "value_4", "COL_2": "value_5", "COL_3": "value_6"},
        ...
    ]
} 
```

在`http://your.server.com/api/TABLE.php`使用 GET 方法的 android 应用程序调用页面中，解析返回的 JSON（上图）并将其保存到本地数据库。

您可以对服务器上的每个数据库表执行此操作，直到您将所有数据本地保存在您的 android 应用程序中。

*这可能不是最好的设计决策，但考虑到您对主题的了解，这可能是一个公平的起点*。

# mysql - 独特作者的最新 X 帖子

> ID：15842205
> 
> 赞同：0
> 
> 时间：2013-04-05T19:41:23.373
> 
> 标签：mysql, sql

我有一个博客，多个作者可以发帖。在首页上，我想显示最近 X 个帖子的轮播 - 假设是 5 个。但是，我想过滤掉作者重复。因此，如果一位作者在这 5 篇文章中有多个帖子，则只有最近的一篇会进入，其他的会被过滤掉。另外，我想选择整行，而不仅仅是 ID。这里有一个例子：

**数据**

```
ID | Title   | AuthorID | Date
1  | "Now"   | 6        | 2013-03-27
2  | "this"  | 5        | 2013-03-26
3  | "is"    | 4        | 2013-03-27
4  | "the"   | 2        | 2013-03-28
5  | "story" | 2        | 2013-03-29
6  | "all"   | 4        | 2013-04-01
7  | "about" | 2        | 2013-04-02
8  | "how"   | 3        | 2013-04-03
9  | "My"    | 1        | 2013-04-04
10 | "life"  | 1        | 2013-04-05 
```

**期望的结果**

```
ID | Title   | AuthorID | Date
10 | "life"  | 1        | 2013-04-05
8  | "how"   | 3        | 2013-04-03
7  | "about" | 2        | 2013-04-02
6  | "all"   | 4        | 2013-04-01
2  | "this"  | 5        | 2013-03-26 
```

我目前使用以下内容：

```
SELECT * FROM posts
ORDER BY date DESC
LIMIT 5 
```

但是，这当然让我得到以下结果

```
ID | Title   | AuthorID | Date
10 | "life"  | 1        | 2013-04-05
9  | "My"    | 1        | 2013-04-04
8  | "how"   | 3        | 2013-04-03
7  | "about" | 2        | 2013-04-02
6  | "all"   | 4        | 2013-04-01 
```

我想消除重复。如何？

我看到有一个 DISTINCT 子句，但这只会选择作者 ID，我想选择整行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:50:05.203

这个技巧/黑客会起作用，但可能需要一些时间来生成结果（在有 1,00,000 行的表上花了我 3.713 秒）：

```
SELECT *
FROM (SELECT * 
    FROM posts
    ORDER BY date DESC ) d
GROUP BY d.`AuthorID`
LIMIT 5; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:09:59.793

我想这就是你要找的：

```
SELECT *
FROM (SELECT *
      FROM posts
      ORDER BY Date DESC) p
GROUP BY p.AuthorID
ORDER BY Date DESC
LIMIT 5; 
```

[SQL小提琴](http://www.sqlfiddle.com/#!2/8d79a/11/0)

# arrays - 2-DRange -> 数组 -> 2D-Range 与 UDF Excel 2007 VBA

> ID：15842214
> 
> 赞同：2
> 
> 时间：2013-04-05T19:41:37.780
> 
> 标签：arrays, vba, resize, range, user-defined-functions

我正在尝试创建一个以 2D-Range 作为输入的 UDF，调整其大小，调整其值之一并将新的 2D-Range 作为输出。将 Range 作为输出很重要，因为 Range 将用于其他功能。不幸的是，其他功能无法将新的 2D-Range 识别为 Range。

* * *

```
Function Func1(Structure As Range) As Variant

i = 3
Dim temp1 As Range
Dim temp2 As Range
Set temp1 = Structure.Resize(i, 3)

Dim arr1()
ReDim arr1(1 To i, 1 To 3)
arr1 = temp1
arr1(2, 2) = 100

Func1 = arr1

End Function 
```

* * *

```
Function Func2(InputArray)

Func2 = InputArray.Rows.Count

End Function 
```

* * *

所以 - 函数 Func2(Func1(Structure)) 不起作用。它应该给出新的 2D-Range 中的行数。

有人会帮忙吗？

我正在使用 Excel 2007

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T09:47:33.937

Tim Williams 和 KazJaw 是正确的，您可以考虑使用另一种方法。但是，我有一个可能的解决方案，代码如下。请注意，这种方法会很慢，您必须严格处理异常。

```
Option Explicit

Function Func1(Structure As Range) As Range
    Dim TempWs As Worksheet 'Needed to create a range
    Dim temp1 As Range      'Resized input range
    Dim temp2 As Range      'Why is this needed?
    Dim arr1 As Range       'Range to be returned
    Dim i As Integer        '?

    'Add a temporary worksheet to the end
    Set TempWs = ThisWorkbook.Worksheets.Add(, _
        ThisWorkbook.Worksheets(ThisWorkbook.Worksheets.Count))
    i = 3

    Set temp1 = Structure.Resize(i, 3)

    With TempWs

        'Set the temporary range and get the existing values
        Set arr1 = TempWs.Range(.Cells(1, 1), .Cells(i, 3))
    End With

    arr1.Value = temp1.Value

    arr1(2, 2) = 100

    Set Func1 = arr1

    'clean up
    Set temp1 = Nothing
    Set temp2 = Nothing
    Set arr1 = Nothing
    Set TempWs = Nothing

End Function

Sub test()
    Dim GetRange As Range
    Set GetRange = Func1(Range("A1:C3"))
    ThisWorkbook.Worksheets(1).Range("D1:F3").Value = GetRange.Value

    'You need to delete the temporary worksheet
    Application.DisplayAlerts = False
    GetRange.Worksheet.Delete
    Application.DisplayAlerts = True
    Set GetRange = Nothing
End Sub 
```

# c++ - 编辑控件无法将文本设置为空字符串

> ID：15842215
> 
> 赞同：3
> 
> 时间：2013-04-05T19:41:39.857
> 
> 标签：c++, winapi, editcontrol

我有一个编辑控件：

```
 HWND hInput = CreateWindowEx(WS_EX_CLIENTEDGE, "EDIT", "", 
        WS_CHILD | WS_VISIBLE | WS_VSCROLL | ES_MULTILINE | ES_AUTOVSCROLL |
           ES_WANTRETURN, 
    0, 0, 100, 100, hwnd, (HMENU)IDC_MAIN_INPUT, GetModuleHandle(NULL), NULL); 
```

当按下按钮时，我从中获取文本并尝试用空字符串替换它：

```
 TCHAR buff[2048];
        memset(buff,0,2048);
        GetWindowText(hInput, buff, 2048);
        SetWindowText(hInput,""); 
```

但在那之后，在编辑控件中有一个新行。

任何想法如何删除这条新线？提前致谢。

**编辑：** 实际上然后按下按钮就可以了，没有新行。

编辑控件有一个消息过程，它捕获回车键并在按下按钮时执行与按钮相同的操作。这是程序：

```
LRESULT CALLBACK SubClassProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam) 
{ 
    switch (msg) 
    { 
    case WM_KEYDOWN: 
        switch (wParam) 
        {
        case VK_RETURN: 
            TCHAR buff[2048];
            memset(buff,0,2048);
            GetWindowText(hInput, buff, 2048);
            SetWindowText(hInput,"");
            break;
        } 
        break; 

    } 
    return CallWindowProc(DefProc, hwnd, msg, wParam, lParam); 
} 
```

但在这里它离开了新的路线。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:28:24.357

当您处理 WM_KEYDOWN 时，您成功清除了编辑控件。

然后将该消息传递给基类，即编辑控件，它会在文本中插入一个回车符。这是一种理论。如果它是正确的，那么简单地不向基类发送 WM_KEYDOWN 消息就可以解决问题。

另一种理论是 WM_KEYDOWN 后跟一个 WM_CHAR（由 TranslateMessage 合成），并且编辑控件添加了基于该消息的回车。如果它是正确的，那么你有一个有趣的情况，你说你想要一个多行编辑控件，但你试图在每次用户尝试创建新行时清除内容。

我说错了 ES_WANTRETURN。这与对话框代码一起工作，以确保它不会完全窃取回车键。这就是为什么我改变了我原来的答案。

# cronexpression - 仅适用于周三每 2 小时后的 Cron 表达式

> ID：15842218
> 
> 赞同：0
> 
> 时间：2013-04-05T19:41:50.320
> 
> 标签：cronexpression

java - Spring，我想创建 cron 表达式，以便仅在周三到一天结束时每隔 2 小时运行一次

```
0 0 0/2 * * WED * 
```

平均 cron 应该只在每个星期三在凌晨 2 点、4 点、6 点、8 点、10 点、12 点、2 点、4 点、6 点、8 点、10 点、12 点触发

我没有时间等待和测试有人可以确认它是正确的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-09T08:03:34.193

尽管为时已晚，但我喜欢为其他用户回答问题。

您的 CronExpression 无效。您可以[在此处](http://www.cronmaker.com/)或[此处查看](https://www.freeformatter.com/cron-expression-generator-quartz.html)。问题是：您不能指定 day_of_month 和 day_of_week。

因为您正在设置 day_of_week，所以您应该使用“？”跳过 day_of_month。解决方案应该是：
`0 0 0/2 ? * WED *`

# sql - JDBC 约束异常详情

> ID：15842222
> 
> 赞同：3
> 
> 时间：2013-04-05T19:41:53.297
> 
> 标签：sql, sql-server, transactions, unique-constraint

我正在使用 JDBC 将数据持久化到 SQL Server，并希望在表中插入一个新行，该表具有一个主键、多个外键和多个列上的多个唯一性约束。我想知道如何处理约束违规，以便我可以确定需要更正哪些字段（以便向用户报告有意义的内容）。

例如：

表测试：id (PRIMARY), fk_id (FOREIGN KEY), field1 (UNIQUE), field2 (UNIQUE)

在 field1 OR field2 中插入重复值会给出：

```
ErrorCode: 2627
SQLState: 23000
Violation of UNIQUE KEY constraint '<UNIQUE CONSTRAINT NAME>'. Cannot insert duplicate key in object 'dbo.test'. The duplicate key value is (<VALUE>). 
```

但是，这不足以确定哪个字段导致了异常（所以我可以告诉用户，正确的字段 1 或字段 2），缺少解析错误消息并使用约束名称（感觉不对，看起来像脆性溶液）。

我能想到的另一种方法是不依赖异常，而是查询具有相同值的任何现有行（在插入之前手动检查唯一性）。但是，这可能需要在可序列化事务中进行许多查询（减少并发性）。更糟糕的是，如果时间不幸与另一个事务冲突，该事务可能会死锁和回滚。

有没有更好的方法来实现我想要做的事情而不必解析（特定于语言环境的）异常消息？什么是“最佳实践”方式？

# html - 外部样式表中带有 fill:url(#id) 样式的 Firefox SVG，内联样式很好

> ID：15842224
> 
> 赞同：7
> 
> 时间：2013-04-05T19:42:00.360
> 
> 标签：html, firefox, svg

仅在 Firefox 中，如果我尝试为 svg 路径提供模式参考，例如：

路径 { 填充： url(#ref); }

在外部样式表中，它呈现为不可见。如果我内联或在页面上的标签中执行此操作，则它可以工作。

这是我的小提琴，这是我的代码转储，因为 SO 不会让我只发布小提琴。 [http://jsfiddle.net/v5VDp/1/](http://jsfiddle.net/v5VDp/1/)

```
 <pattern id="texture_base" x="0" y="0" patternUnits="userSpaceOnUse" height="122" width="213">
        <image x="0" y="0" width="213" height="122" xlink:href=""/>
    </pattern>

        <pattern id="texture1" x="0" y="0" patternUnits="userSpaceOnUse" height="122" width="213">
        <rect fill='url(#color1)' stroke="none" x="0" y="0" width="213" height="122"/> 
            <rect fill='url(#texture_base)' x="0" y="0" width="213" height="122"/ />

    </pattern>
</defs>
</svg> 
```

.slice:nth-child(6n + 2) 路径 { 填充：url(#texture1); }

[https://dl.dropbox.com/s/wkzaoiwnw6ghsmd/simple_svg_test.css](https://dl.dropbox.com/s/wkzaoiwnw6ghsmd/simple_svg_test.css)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T20:31:56.953

`#texture1`是`<url of this file>`+的缩写`#texturl`。因此，在外部样式表`#texture1`中将指向样式表本身中的某些内容，因为该元素位于 svg 文件中，因此无法找到该内容。

Webkit 总是犯这个错误，导致很多混乱。您应该会发现 Opera 与 IE 一样匹配 Firefox 行为。

如果您想在样式表中执行此操作，则必须使用绝对 URL，例如 url( [http://jsfiddle.net/v5VDp/1/#texture1](http://jsfiddle.net/v5VDp/1/#texture1) )

[CSS 规范](http://www.w3.org/TR/CSS21/syndata.html#uri)涵盖了这一点。您可以随时联系[CSS 工作组并建议他们对此做些什么](http://lists.w3.org/Archives/Public/www-style/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-28T17:20:57.173

当我们用 css（外部和内部 css）分配以下代码时，SVG “fill: url(#...)” 在 Firefox 中的行为很奇怪。

```
#myselector {
fill: url('#gradient-id');
} 
```

解决方案

提供内联样式，这可以通过两种方式完成。静态或动态方式

动态方式

```
.attr('fill', 'url(#gradient-id)') 
```

静态方式

```
fill="url(#gradient-id)" 
```

在静态中，您必须将其放在 SVG Html 中；

# objective-c - 如何启用主菜单项“复制”？

> ID：15842226
> 
> 赞同：2
> 
> 时间：2013-04-05T19:42:09.440
> 
> 标签：objective-c, xcode, macos

我的主菜单项“复制”不可点击：

![在此处输入图像描述](https://i.stack.imgur.com/oKoag.png)

但我在 Xcode 中启用它：

![在此处输入图像描述](https://i.stack.imgur.com/wTj51.png)

我在代码中没有任何主菜单项的出口。我可以做什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T19:59:06.930

[*应用程序菜单和弹出列表编程主题*](http://developer.apple.com/library/Mac/documentation/Cocoa/Conceptual/MenuList/Articles/EnablingMenuItems.html#//apple_ref/doc/uid/20000261-BAJBFGED)[中的“启用菜单项”是](http://developer.apple.com/library/Mac/documentation/Cocoa/Conceptual/MenuList/Articles/EnablingMenuItems.html#//apple_ref/doc/uid/20000261-BAJBFGED)这样说的：

> 默认情况下，每次发生用户事件时，都会`NSMenu`自动启用和禁用每个可见菜单项。`NSMenu`您还可以使用'方法强制更新菜单`update`。

还有这个：

> 如果菜单项的目标未设置（也就是说，如果是——通常`nil`如果菜单项连接到 First Responder）并且`NSMenu`对象不是上下文菜单，则`NSMenu`使用响应者链（在[“响应者链”中描述< /a> in](http://developer.apple.com/library/Mac/documentation/Cocoa/Conceptual/EventOverview/EventArchitecture/EventArchitecture.html#//apple_ref/doc/uid/10000060i-CH3-SW2) [*Cocoa Event Handling Guide*](http://developer.apple.com/library/Mac/documentation/Cocoa/Conceptual/EventOverview/Introduction/Introduction.html#//apple_ref/doc/uid/10000060i) ) 来确定目标。如果响应者链中没有实现该项目操作的对象，则该项目被禁用。如果响应者链中有一个对象实现了该项目的操作，`NSMenu`则检查该对象是否实现了`validateMenuItem:`or`validateUserInterfaceItem:`方法。如果没有，则启用菜单项。如果是，则菜单项的启用状态由方法的返回值确定。

默认情况下（当您使用“Cocoa Application”模板创建项目时），复制菜单项的目标是 First Responder ( `nil`)，动作是`copy:`. 因此，您需要`copy:`在响应者链中的某些项目上实现该方法。这足以启用菜单项。如果您想更精确地控制何时启用菜单项，您还可以实现`validateMenuItem:`检查哪个菜单项正在被验证并返回`YES`或`NO`酌情返回。

例如，应用程序委托位于响应者链中。因此，您可以将此方法添加到`CMAppDelegate`：

```
- (IBAction)copy:(id)sender {
    NSLog(@"%@ %s", self, __func__);
} 
```

这应该足以启用“复制”菜单项。当然，选择 Edit > Copy 只会将消息记录到控制台。由您实际编写复制用户选择的任何内容的代码。

如果您想要更精细的控制，请尝试为应用委托提供连接到 Copy 菜单项的插座：

```
@interface AppDelegate : NSObject <NSApplicationDelegate>

@property (assign) IBOutlet NSWindow *window;
@property (strong) IBOutlet NSMenuItem *copyMenuItem;

@end 
```

将插座连接在`MainMenu.xib`. 然后你可以`validateMenuItem:`这样实现：

```
- (BOOL)validateMenuItem:(NSMenuItem *)menuItem {
    if (menuItem == self.copyMenuItem) {
        NSLog(@"%@ %s %@", self, __func__, menuItem);
        return [self shouldEnableCopyMenuItem];
    }
    return NO;
} 
```

# java - 找不到类 [org.apache.derby.jdbc.ClientDriver]。尝试连接到数据库时

> ID：15842229
> 
> 赞同：9
> 
> 时间：2013-04-05T19:42:26.020
> 
> 标签：java, database, netbeans, javadb

我在 Netbeans 中建立了一个项目，创建了一个脚本，用 javadb 创建了一个新数据库。我可以通过 gui 连接到它 - 显示表格内容等，但是当我运行应用程序时：

```
 EntityManager em = Persistence.createEntityManagerFactory("lab5PU").createEntityManager(); 
```

我得到了这个很长的例外：

```
[EL Info]: 2013-04-05 21:40:45.554--ServerSession(1198260109)--EclipseLink, version: Eclipse Persistence Services - 2.3.0.v20110604-r9504
[EL Severe]: 2013-04-05 21:40:45.574--ServerSession(1198260109)--Local Exception Stack: 
Exception [EclipseLink-4003] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.DatabaseException
Exception in thread "AWT-EventQueue-0" javax.persistence.PersistenceException: Exception [EclipseLink-4003] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.DatabaseException
Exception Description: Configuration error.  Class [org.apache.derby.jdbc.ClientDriver] not found.
Exception Description: Configuration error.  Class [org.apache.derby.jdbc.ClientDriver] not found.
    at org.eclipse.persistence.exceptions.DatabaseException.configurationErrorClassNotFound(DatabaseException.java:82) 
```

我可以在服务的驱动程序部分看到 javadb 驱动程序，所以我不知道错误可能是什么。

编辑：persistance.xml 按要求：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="lab5PU" transaction-type="RESOURCE_LOCAL">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <class>lab5.Colleagues</class>
    <properties>
      <property name="javax.persistence.jdbc.url" value="jdbc:derby://localhost:1527/lab5"/>
      <property name="javax.persistence.jdbc.password" value="mypass"/>
      <property name="javax.persistence.jdbc.driver" value="org.apache.derby.jdbc.ClientDriver"/>
      <property name="javax.persistence.jdbc.user" value="admin"/>
      <property name="eclipselink.ddl-generation" value="create-tables"/>
    </properties>
  </persistence-unit>
</persistence> 
```

![在此处输入图像描述](https://i.stack.imgur.com/8J8vx.png)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-05T20:15:02.520

我认为您遇到的问题是项目的类路径中没有 Derby 驱动程序。

您可以轻松地将 JavaDB 库添加到您的项目中：

*   右键单击项目
*   属性 -> 库
*   添加库 -> JavaDB 驱动程序

这包括`derby.jar`,`derbyclient.jar`和`derbynet.jar`在您的项目的类路径中。

`derbyclient.jar`包含`org.apache.derby.jdbc.ClientDriver`您的代码抱怨的类。

# zend-framework - 设置页面标题 - headTitle() - Zend Framework 2 ZF2

> ID：15842235
> 
> 赞同：2
> 
> 时间：2013-04-05T19:42:41.700
> 
> 标签：zend-framework, zend-framework2, zend-framework-mvc

我目前正在使用 ZF2 构建应用程序，到目前为止一切顺利，但我只是在页面标题方面遇到了问题（如 中的`<title>`标签`<head>`）。

在我的`layout.phtml`我有它使用静态设置一个字符串`$this->headTitle()`。

我希望它默认包含模块、控制器和操作的名称，就像文档页面建议的那样：http:
[//framework.zend.com/manual/2.1/en/modules/zend.view.helpers.head -title.html](http://framework.zend.com/manual/2.1/en/modules/zend.view.helpers.head-title.html)

但是，当我尝试实现示例代码时，我得到了一个异常。坦率地说，文档至少应该向您展示放置此代码的最佳位置。

我正在寻找一个 ZF2 菜鸟可以效仿的例子。我基本上想在某处放置一些代码（大概是 Application\Module.php），以便我可以将默认标题设置为“模块 - 控制器 - 动作”，然后我需要一个如何从每个控制器或视图轻松覆盖它的示例（以首选为准）...请帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:05:56.737

根据 Sams 评论... Readthedocs 有工作示例：http: [//zf2.readthedocs.org/en/latest/modules/zend.view.helpers.html#headtitle-helper](http://zf2.readthedocs.org/en/latest/modules/zend.view.helpers.html#headtitle-helper)

感谢您的帮助山姆！

# java - java - 如何将字符串转换为Java中的URL？

> ID：15842239
> 
> 赞同：19
> 
> 时间：2013-04-05T19:43:14.370
> 
> 标签：java, url

我的 java 代码如下。我写了 url=URL(s); 但这不是真的。我想做一个转换操作，将从用户获取的字符串转换为 URL。我该怎么做这个操作？有什么方法可以做到这一点吗？

```
 public static void main(String[] args) {
    System.out.println("Welcome to Download Manager");
    URL url;
    String s;
    Scanner scan= new Scanner(System.in);
    s=scan.nextLine();
    url=URL(s);
    Download download=new Download(url);
} 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-05T19:46:30.800

您不能将 String 转换为 URL，因为 String 不是 URL 的子类。您可以创建 URL 的新实例，将 String 作为参数传递给构造函数。在 Java 中，您**总是**使用关键字*new*调用构造函数：

```
URL url = new URL(string); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-05T19:45:12.357

使用[URL 构造函数](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html#URL%28java.lang.String%29)：

```
url = new URL(s); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-05T19:46:46.640

使用 URL 构造函数

```
public static void main(String[] args) {
        System.out.println("Welcome to Download Manager");
        URL url;
        String s;
        Scanner scan= new Scanner(System.in);
        s=scan.nextLine();
        url= new URL(s);
        Download download=new Download(url);
    } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-11-30T18:27:42.150

您应该首先将您的字符串转换为 a `URI`，然后将其转换`URI`为 a `URL`。

例如：

```
String str = "http://google.com";
URI uri = new URI(str);
URL url = uri.toURL(); 
```

请注意，有 2 个未处理的异常；所以你应该将上面的代码包装在 2 个 try/catch 语句中。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-05T19:45:09.237

你需要把它改成`url= new URL(s);`

# visual-studio - 如何将类之间的关系视为可视化图表？

> ID：15842240
> 
> 赞同：3
> 
> 时间：2013-04-05T19:43:37.473
> 
> 标签：visual-studio, intellij-idea, diagram

加入现有项目时，试图弄清楚所有类和接口如何相互连接可能会变得混乱。有没有一种方法可以直观地查看图表中的所有连接，而不是去单个类并遵循其关系？有什么可以在 IntelliJ(11 | 12) 或 Visual Studio(2010 | 2012 - 最好是 express 或 pro) 中完成的吗？

例如，显示类 A 继承自扩展某个接口的类 B 等的 UML 图之类的东西。

Eclipse 中有类似的功能，您可以在其中查看 bean 配置文件的图形表示。同样在 Visual Studio 中，您可以查看数据库关系

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:49:27.557

我不确定您使用的是什么版本的 Visual Studio，但在 VS 2012 pro（更新 2）中，您可以右键单击项目并单击“查看类图”选项。这将创建项目中所有类的图表。

[http://msdn.microsoft.com/en-us/library/6x35cds6.aspx](http://msdn.microsoft.com/en-us/library/6x35cds6.aspx)

看起来能力可以追溯到 2010 年甚至 2008 年。

# visual-studio - 在 Visual Studio 中合并 Web 应用程序项目

> ID：15842241
> 
> 赞同：0
> 
> 时间：2013-04-05T19:43:39.233
> 
> 标签：visual-studio, visual-studio-2012, web

我的解决方案中有 42 个不同的 Web 应用程序项目，我想将它们全部合并到一个 Web 应用程序中。有没有相对无痛的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:48:41.687

Visual Studio 有 2 种类型的 Web 项目：**Web 应用程序**和**网站**。

Web 应用程序项目 (WAP) 与 VS 中的任何其他项目一样：有一个 .csproj 或 .vbproj 文件，其中包含构建设置、项目中包含的文件以及所有好的 MSBuild 内容。如果您有一堆使用相同语言 (VB/C#) 的文件，则主要是将所有文件添加到一个项目中。如果您有不同的语言，则无法将它们组合起来，您必须保留单独的项目或将一种语言移植到另一种语言；MSBuild 每个项目只调用一个编译器。（您可以稍后将程序集与 ILMerge 合并，但您仍然必须自己合并来自所有项目的标记文件。）

网站项目 (WSP) 有点不同。至于将文件包含到项目中，他们只查看文件系统上的内容（而基于 MSBuild 的项目基本上只有包含文件的白名单）。此外，由于 MSBuild 不编译 WSP，因此可以在单个项目中混合使用不同的语言，但您必须自己进行配置（请参阅[http://msdn.microsoft.com/en-us/library/ms366714 .aspx](http://msdn.microsoft.com/en-us/library/ms366714.aspx)了解其工作原理）。

假设您只处理通用语言的 WAP，并且您只是想减少要维护的项目数量，我想不出比开始将现有文件添加到合并项目中更好的策略了。您可能会遇到以下任何问题：

1.  每个单独的项目都表现得像它自己的 IIS 应用程序。这对于依赖 /bin 文件夹（即任何代码）或使用`~/`URI 来引用该项目中的内容的任何内容都很重要。这将阻止您在 MasterProject 中为每个要移动的子应用程序创建一个文件夹。VS 中确实没有一个好的设计来解决这个问题，除了有单独的项目（显然不能满足您的需求......）。因此，您可能必须将文件添加到同一根文件夹中。

2.  必须整理出任何重复的文件名。或者，使用 web.config，您可能必须合并文件内容。

3.  任何冲突的类名同上。虽然我希望如果你有很多重叠，无论如何它大多被重构为一个单独的库。

# charts - Highcharts：带有向下钻取的堆叠列

> ID：15842242
> 
> 赞同：0
> 
> 时间：2013-04-05T19:43:41.033
> 
> 标签：charts, highcharts, highstock

我正在尝试使用向下钻取实现堆叠列，但我认为有一个错误，当我单击并返回原始图表时，列更改为“透明”，或者我做错了什么？

这是js：

[http://jsfiddle.net/NULTY/410/](http://jsfiddle.net/NULTY/410/)

我正在使用 3 个类别：

```
var chart;
$(document).ready(function() {
   var colors = Highcharts.getOptions().colors,
      categories = ['MSIE', 'Firefox','chrome'], 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-14T21:50:27.137

我已经为那些希望钻取在列而不是细分的人提出了一个编程解决方案

HTML 看起来像这样：

```
<script src="http://code.highcharts.com/stock/highstock.js"></script>
<script src="http://code.highcharts.com/modules/data.js"></script>

<div id="container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>

<pre id="tsv" style="display:none">Root Message and Root Variant    Root Variant Thumbs Up  Root      Variant No Rating Root Variant Thumbs Down
Canned A | Canned A 25.00%  45.00%  30.00%
Canned A | Canned A01   25.01%  44.99%  30.00%
Canned A | Canned A02   27.01%  42.99%  30.00%
Canned A | Canned A03   26.01%  43.99%  30.00%
Canned A | Canned A04   25.50%  42.50%  32.00%
Canned B | Canned B 41.00%  38.00%  21.00%
Canned B | Canned B01   41.01%  37.99%  21.00%
Canned B | Canned B02   38.01%  37.99%  24.00%
Canned B | Canned B03   43.01%  41.99%  15.00%
Canned C | Canned C 58.00%  36.00%  6.00%
Canned C | Canned C01   57.01%  35.99%  6.00%
Canned C | Canned C02   56.01%  35.99%  7.00%
Canned C | Canned C03   58.01%  36.99%  5.00%</pre> 
```

Javascript 看起来像这样：

```
 var chart;
var premades = [],
    premadesTU = [],
    premadesNR = [],
    premadesTD = [],
    premadesTUData = [],
    premadesNRData = [],
    premadesTDData = [],
    versions = [],
    versionsTU = [],
    versionsNR = [],
    versionsTD = [];
var premadesCount = -1;

$(function () {       
    function setChart(categories, source) {
        chart.xAxis[0].setCategories(categories);
        chart.xAxis[0].setExtremes(0, 1);
        while(chart.series.length > 0){
            chart.series[0].remove(true);
        }
        if(source != null && source.series){
            for(var i = 0; i < source.series.length; i ++ ){
                chart.addSeries({
                    name: source.series[i].name,
                    data: source.series[i].data,
                    color: source.series[i].color || 'white',
                    tooltip: {
                        valueSuffix: ' %'
                    }
                });
            }
        } else {
            chart.addSeries({
                name: 'Thumbs Up',
                data: premadesTUData,
                color: '#87b87f',
                tooltip: { valueSuffix: ' %' }
            });                
            chart.addSeries({
                name: 'No Rating',
                data: premadesNRData,
                color: '#fee188',
                tooltip: { valueSuffix: ' %' }
            });
            chart.addSeries({
                name: 'Thumbs Down',
                data: premadesTDData,
                color: '#d15b47',
                tooltip: { valueSuffix: ' %' }
            });
        }
    }

    Highcharts.data({
        csv: document.getElementById('tsv').innerHTML,
        itemDelimiter: '\t',
        parsed: function (columns) {

            // Parse percentage strings - Thumbs Up
            columns[1] = $.map(columns[1], function (value) {
                if (value.indexOf('%') === value.length - 1) {
                    value = parseFloat(value);
                }
                return value;
            });

            // Parse percentage strings - No Rating
            columns[2] = $.map(columns[2], function (value) {
                if (value.indexOf('%') === value.length - 1) {
                    value = parseFloat(value);
                }
                return value;
            });

            // Parse percentage strings - Thumbs Down
            columns[3] = $.map(columns[3], function (value) {
                if (value.indexOf('%') === value.length - 1) {
                    value = parseFloat(value);
                }
                return value;
            });

            var previousPremade = '',
                previousValues = [ 0, 0, 0 ],
                previousCount = 0;

            $.each(columns[0], function (i, name) {
                var premade,
                    version;
                // skip header row
                if (i > 0) {
                    // Split into premade and version                   
                    premade = name.split(' | ')[0];
                    version = name.split(' | ')[1];

                    // Is it the same premade as previous row?
                    if (previousPremade === premade) {
                        previousValues[0] += columns[1][i];
                        previousValues[1] += columns[2][i];
                        previousValues[2] += columns[3][i];
                        previousCount++;
                    } else {
                        // No, different premade                        
                        if (previousPremade !== '') {
                            // add premade and values to premades array
                            var tu = Number((previousValues[0] / previousCount).toFixed(1));
                            var nr = Number((previousValues[1] / previousCount).toFixed(1));
                            var td = Number((previousValues[2] / previousCount).toFixed(1));
                            premadesTU[premadesCount].push(tu);
                            premadesNR[premadesCount].push(nr);
                            premadesTD[premadesCount].push(td);
                            // reset values
                            previousValues = [ 0, 0, 0 ];
                            previousCount = 0;
                        }
                        premadesCount++;
                        premades[premadesCount] = premade;
                        premadesTU[premadesCount] = [];
                        premadesNR[premadesCount] = [];
                        premadesTD[premadesCount] = [];
                        previousPremade = premade;
                        previousValues[0] += columns[1][i];
                        previousValues[1] += columns[2][i];
                        previousValues[2] += columns[3][i];
                        previousCount++;                            
                    }

                    // Create the version data
                    if (version !== null) {
                        if (!versions[premadesCount]) {
                            versions[premadesCount] = [];
                            versionsTU[premadesCount] = [];
                            versionsNR[premadesCount] = [];
                            versionsTD[premadesCount] = [];
                        }
                        versions[premadesCount].push(version);
                        versionsTU[premadesCount].push(columns[1][i]);
                        versionsNR[premadesCount].push(columns[2][i]);
                        versionsTD[premadesCount].push(columns[3][i]);
                    }
                }
            });
            // add the last entry
            // add premade and values to premades array
            var tu = Number((previousValues[0] / previousCount).toFixed(1));
            var nr = Number((previousValues[1] / previousCount).toFixed(1));
            var td = Number((previousValues[2] / previousCount).toFixed(1));           
            premadesTU[premadesCount].push(tu);
            premadesNR[premadesCount].push(nr);
            premadesTD[premadesCount].push(td);

            for (var i = 0; i <= premadesCount; i++) {
                premadesTUData.push({
                    name: premades[i],
                    y: premadesTU[i][0],
                    color: '#87b87f',
                    drilldown: {
                        categories: versions[i],
                        series: [{
                            name: 'Thumbs Up',
                            data: versionsTU[i],
                            color: '#87b87f',
                            tooltip: { valueSuffix: ' %' }
                        },{
                            name: 'No Rating',
                            data: versionsNR[i],
                            color: '#fee188',
                            tooltip: { valueSuffix: ' %' }
                        },{
                            name: 'Thumbs Down',
                            data: versionsTD[i],
                            color: '#d15b47',
                            tooltip: { valueSuffix: ' %' }
                        }]
                    }
                });
                premadesNRData.push({
                    name: premades[i],
                    y: premadesNR[i][0],
                    color: '#fee188',
                    drilldown: {
                        categories: versions[i],
                        series: [{
                            name: 'Thumbs Up',
                            data: versionsTU[i],
                            color: '#87b87f',
                            tooltip: { valueSuffix: ' %' }
                        },{
                            name: 'No Rating',
                            data: versionsNR[i],
                            color: '#fee188',
                            tooltip: { valueSuffix: ' %' }
                        },{
                            name: 'Thumbs Down',
                            data: versionsTD[i],
                            color: '#d15b47',
                            tooltip: { valueSuffix: ' %' }
                        }]
                    }
                });
                premadesTDData.push({
                    name: premades[i],
                    y: premadesTD[i][0],
                    color: '#d15b47',
                    drilldown: {
                        categories: versions[i],
                        series: [{
                            name: 'Thumbs Up',
                            data: versionsTU[i],
                            color: '#87b87f',
                            tooltip: { valueSuffix: ' %' }
                        },{
                            name: 'No Rating',
                            data: versionsNR[i],
                            color: '#fee188',
                            tooltip: { valueSuffix: ' %' }
                        },{
                            name: 'Thumbs Down',
                            data: versionsTD[i],
                            color: '#d15b47',
                            tooltip: { valueSuffix: ' %' }
                        }]
                    }
                });
            }

            // Create the chart
            chart = new Highcharts.Chart({
                chart: {
                    renderTo: 'container',
                    type: 'column'
                },
                title: {
                    text: 'Premade Messages - Success'
                },
                subtitle: {
                    text: 'Click the columns to view versions.'
                },
                xAxis: {
                    categories: premades,
                    min: 0,
                    max: 1
                },
                scrollbar: {
                    enabled: true
                },
                yAxis: {
                    title: {
                        text: ''
                    }
                },
                legend: {
                    enabled: false
                },
                plotOptions: {
                    column: {
                        stacking: 'normal',
                        cursor: 'pointer',
                        point: {
                            events: {
                                click: function() {
                                    var drilldown = this.drilldown;
                                    if (drilldown) { // drill down
                                        setChart(drilldown.categories, drilldown);
                                    } else { // restore
                                        setChart(premades, null);
                                    }
                                }
                            }
                        },
                        dataLabels: {
                            enabled: true,
                            color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white',
                            style: {
                                textShadow: '0 0 3px black, 0 0 3px black'
                            }
                        }
                    }
                },
                credits: {
                    enabled: false
                },
                tooltip: {
                    headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                    pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                        '<td style="padding:0"><b>{point.y}</b></td></tr>'
                    ,
                    footerFormat: '</table>',
                    shared: true,
                    useHTML: true
                },
                series: [{
                    name: 'Thumbs Up',
                    data: premadesTUData,
                    color: '#87b87f',
                    tooltip: {
                        valueSuffix: ' %'
                    }
                },
                {
                    name: 'Not Rated',
                    data: premadesNRData,
                    color: '#fee188',
                    tooltip: {
                        valueSuffix: ' %'
                    }
                },
                {
                    name: 'Thumbs Down',
                    data: premadesTDData,
                    color: '#d15b47',
                    tooltip: {
                        valueSuffix: ' %'
                    }
                }]
            });
        }
    });
}); 
```

你可以看到它在这里工作：http: [//jsfiddle.net/limogesdotnet/3f6sff75/](http://jsfiddle.net/limogesdotnet/3f6sff75/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T15:00:06.457

看看这段代码，认为它可以帮助你。

[http://jsfiddle.net/NULTY/753/](http://jsfiddle.net/NULTY/753/)

```
var chart;
$(document).ready(function() {

   var colors = Highcharts.getOptions().colors,
      categories = ['MSIE', 'Firefox', 'Chrome', 'Safari', 'Opera'],
      name = 'Browser brands',
      level = 0,
      data = [{ 
            y: 55.11,
            color: colors[0],
            drilldown: {
                type: 'pie',
               name: 'MSIE versions',
               categories: ['MSIE 8.0', 'MSIE 6.0', 'MSIE 7.0', 'MSIE 9.0'],
               level: 1, 
               data: [11,10.85, 7.35, 2.41],
               color: colors[0]
            }
         }, {
             y: 21.63,
            color: colors[1],
            drilldown: {
                type: 'pie',
               name: 'Firefox versions',
               categories: ['Firefox 3.6', 'Firefox 4.0', 'Firefox 3.5', 'Firefox 3.0', 'Firefox 2.0'],
               data: [13.52, 5.43, 1.58, 0.83, 0.20],
               color: colors[1]
            }
         }, {
            y: 11.94,
            color: colors[2],
            drilldown: {
                type: 'pie',
               name: 'Chrome versions',
               categories: ['Chrome 10.0', 'Chrome 11.0', 'Chrome 8.0', 'Chrome 9.0', 'Chrome 12.0', 
                  'Chrome 6.0', 'Chrome 5.0', 'Chrome 7.0'],
               data: [9.91, 0.50, 0.36, 0.32, 0.22, 0.19, 0.12, 0.12],
               color: colors[2]
            }
         }, {
            y: 7.15,
            color: colors[3],
            drilldown: {
                type: 'pie',
               name: 'Safari versions',
               categories: ['Safari 5.0', 'Safari 4.0', 'Safari Win 5.0', 'Safari 4.1', 'Safari/Maxthon', 
                  'Safari 3.1', 'Safari 41'],
               data: [4.55, 1.42, 0.23, 0.21, 0.20, 0.19, 0.14],
               color: colors[3]
            }
         }, {
            y: 2.14,
            color: colors[4],
            drilldown: {
                type: 'pie',
               name: 'Opera versions',
               categories: ['Opera 11.x', 'Opera 10.x', 'Opera 9.x'],
               data: [1.65, 0.37, 0.12],
               color: colors[4]
            }
         }],

      data2 = [{
             y: 21.63,
            color: colors[1],
            drilldown: {
               name: 'Firefox versions',
               categories: ['Firefox 3.6', 'Firefox 4.0', 'Firefox 3.5', 'Firefox 3.0', 'Firefox 2.0'],
               data: [13.52, 5.43, 1.58, 0.83, 0.20],
               color: colors[1]
            }
         }, {
            y: 11.94,
            color: colors[2],
            drilldown: {
               name: 'Chrome versions',
               categories: ['Chrome 10.0', 'Chrome 11.0', 'Chrome 8.0', 'Chrome 9.0', 'Chrome 12.0', 
                  'Chrome 6.0', 'Chrome 5.0', 'Chrome 7.0'],
               data: [9.91, 0.50, 0.36, 0.32, 0.22, 0.19, 0.12, 0.12],
               color: colors[2]
            }
         }, {
            y: 7.15,
            color: colors[3],
            drilldown: {
               name: 'Safari versions',
               categories: ['Safari 5.0', 'Safari 4.0', 'Safari Win 5.0', 'Safari 4.1', 'Safari/Maxthon', 
                  'Safari 3.1', 'Safari 41'],
               data: [4.55, 1.42, 0.23, 0.21, 0.20, 0.19, 0.14],
               color: colors[3]
            }
         }, {
            y: 2.14,
            color: colors[4],
            drilldown: {
               name: 'Opera versions',
               categories: ['Opera 11.x', 'Opera 10.x', 'Opera 9.x'],
               data: [1.65, 0.37, 0.12],
               color: colors[4]
            }
         },{ 
            y: 55.11,
            color: colors[0],
            drilldown: {
                type: 'column',
               name: 'MSIE versions',
               categories: ['MSIE 8.0', 'MSIE 6.0', 'MSIE 7.0', 'MSIE 9.0'],
               level: 1, 
               data: [11,10.85, 7.35, 2.41],
               color: colors[0]
            }
         }];

   function setChart(name, categories, data, color, level, type) {
      chart.xAxis[0].setCategories(categories);
       var dataLen = data.length;

       chart.series[0].remove();
       if(dataLen === 1){
           chart.series[0].remove();
       }        
       for(var i = 0; i< dataLen; i++){
      chart.addSeries({
          type: type,
         name: name,
         data: data[i],
         level: level,
         color: color || 'white'
      });
   }
   }

   chart = new Highcharts.Chart({
      chart: {
         renderTo: 'container', 
         type: 'column'
      },
      title: {
         text: 'Browser market share, April, 2011'
      },
      subtitle: {
         text: 'Click the columns to view versions. Click again to view brands.'
      },
      xAxis: {
         categories: categories                     
      },
      yAxis: {
         title: {
            text: 'Total percent market share'
         }
      },
      plotOptions: {
         column: {
             stacking: 'normal',
            cursor: 'pointer',
            point: {
               events: {
                  click: function() {

                     var drilldown = this.drilldown;
                     if (drilldown) { // drill down

                         this.series.chart.setTitle({
                             text: drilldown.name
                         });

                         setChart(drilldown.name, drilldown.categories, [drilldown.data], drilldown.color, drilldown.level, drilldown.type);
                     } else { // restore
                        setChart(name, categories, [data,data2], null, level, 'column');
                     }
                  }
               }
            },
            dataLabels: {
               enabled: true,
               color: colors[0],
               style: {
                  fontWeight: 'bold'
               },
               formatter: function() {
                  return this.y +'%';
               }
            }               
         },
          pie: {
            cursor: 'pointer',
            point: {
               events: {
                  click: function() {

                     var drilldown = this.drilldown;
                     if (drilldown) { // drill down

                         this.series.chart.setTitle({
                             text: drilldown.name
                         });

                         setChart(drilldown.name, drilldown.categories, [drilldown.data], drilldown.color, drilldown.level, drilldown.type);
                     } else { // restore
                        setChart(name, categories, [data,data2], null, level, 'column');
                     }
                  }
               }
            },
            dataLabels: {
               enabled: true,
               color: colors[0],
               style: {
                  fontWeight: 'bold'
               },
               formatter: function() {
                  return this.y +'%';
               }
            }               
         }
      },
      tooltip: {
         formatter: function() {
            var point = this.point, s = '';

             switch (this.series.options.level) {
                case 0:
                    s = 'row 1 level 1 instructions<br/>';
                    s += ' row 2 level 1 instructions';
                    break;

                case 1:
                    s = 'row 1 level 2 instructions <br/>';
                    s += ' row 2 level 2 instructions';
                    break;

                case 2:
                    s = 'row 1 level 3 instructions<br/>';
                    s += 'row 2 level 3 instructions';
                    break;
             }

            return s;
         }
      },
      series: [{
         name: name+" 1",
         level: level,
         data: data,
         color: 'white'
      },{
         name: name,
         level: level,
         data: data2,
         color: 'white'
      }],
      exporting: {
         enabled: false
      }
   });

}); 
```

# java - 使用 WALA 分析 Java 字节码时如何去掉不相关的类？

> ID：15842245
> 
> 赞同：4
> 
> 时间：2013-04-05T19:43:47.813
> 
> 标签：java, bytecode

[我在http://www.programcreek.com/2012/10/wala-tutorial/](http://www.programcreek.com/2012/10/wala-tutorial/)上阅读了有关 WALA 的文章并尝试执行该示例。我想知道如何摆脱除 test.jar 中的测试代码之外的类。谢谢！

```
import java.io.File;
import java.io.IOException;
import java.util.jar.JarFile;

import com.ibm.wala.classLoader.IClass;
import com.ibm.wala.classLoader.IMethod;
import com.ibm.wala.ipa.callgraph.AnalysisScope;
import com.ibm.wala.ipa.cha.ClassHierarchy;
import com.ibm.wala.ipa.cha.ClassHierarchyException;
import com.ibm.wala.ipa.cha.IClassHierarchy;
import com.ibm.wala.util.config.AnalysisScopeReader;
import com.ibm.wala.util.io.FileProvider;

public class WalaTest {
    public static void main(String args[]) throws IOException, ClassHierarchyException {

            File exFile=new FileProvider().getFile("Java60RegressionExclusions.txt");
            System.out.println(exFile.getAbsolutePath());
            AnalysisScope scope = AnalysisScopeReader.makeJavaBinaryAnalysisScope("test.jar",exFile);
            IClassHierarchy cha = ClassHierarchy.make(scope);
            for (IClass c : cha) {
                String cname = c.getName().toString();
                System.out.println("Class:" + cname);
                for (IMethod m : c.getAllMethods()) {
                    String mname = m.getName().toString();
                    System.out.println("  method:" + mname);
                }
                System.out.println();
            }

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T21:21:18.913

在您的 IClass 循环中，添加以下行以首先使用`isApplicationLoader()`.

```
if (!scope.isApplicationLoader(c.getClassLoader())) continue; 
```

# python - 我正在尝试了解为什么我似乎无法使用循环删除列表中的每个索引

> ID：15842249
> 
> 赞同：0
> 
> 时间：2013-04-05T19:44:15.180
> 
> 标签：python, list

我不确定为什么我的列表没有删除基于第二个列表索引的每个字符。下面是代码：

```
L1 = ['e', 'i', 'l', 'n', 's', 't']
L2 = ['e', 'i', 'l', 'n', 's', 't']

for n_item in range(len(L1)):
    if L1[n_item] in L2:
     del L2[n_item] 
```

以下是我得到的错误：

```
 Traceback (most recent call last):
 File "<pyshell#241>", line 3, in <module>
 del L2[n_item]
 IndexError: list assignment index out of range 
```

谢谢你的帮助 ....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T19:45:24.977

当您删除较早的项目时，列表会变短，因此后面的索引不存在。这是在 Python 中按索引进行迭代的症状——这是一个糟糕的主意。这不是 Python 的设计方式，并且通常会生成不可读、缓慢、不灵活的代码。

相反，使用[列表推导](http://www.youtube.com/watch?v=pShL9DCSIUw)来构造一个新列表：

```
[item for item in L1 if item not in L2] 
```

请注意，如果`L2`它很大，则可能值得先将其设为一个集合，因为对集合的成员资格测试要快得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T19:53:45.780

每次删除索引处的元素时，列表都会更改。

```
>>> items = ['a', 'b', 'c', 'd']
>>> len(items)
4
>>> items[1]
'b'
>>> del items[1]
>>> items[1]
'c'
>>> len(items)
3 
```

导致您的错误的原因是当您删除该项目时列表的 被更改，但是，这`len`不会更新循环正在处理的 。`range``for`

此外，如果您删除一个元素然后增加索引，实际上就好像您将索引增加了 2，因为所有内容都会向左移动一个索引。

对此的最佳解决方案是 Lattyware 建议的列表理解。您的 for 循环可以替换为

```
L1 = [item for item in L1 if item not in L2] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T19:50:45.890

如果您只关心从列表中删除特定值（而不关心索引、顺序等）：

```
L1 = ['e', 'i', 'l', 'n', 's', 't']
L2 = ['e', 'i', 'l', 'n', 's', 't']

for item in L1:
    try:
        L2.remove(item)
    except ValueError:
        pass 
```

`print(L2)`给出：`[]`

# php - PHP 存储用户在 MySQL 中输入的 MS Word 字符错误

> ID：15842252
> 
> 赞同：0
> 
> 时间：2013-04-05T19:44:20.417
> 
> 标签：php, mysql, character-encoding, diacritics

我的网站是用 PHP 和 JavaScript 和 MySQL 数据库生成的。我正在使用 Eclipse Helios 开发和调试代码。

我正在尝试修复当用户从 MicsoSoft Word 剪切和粘贴时应该正常工作的表单。

PHP 应该将输入的文本保存到 MySQL 数据库中，然后我想在从数据库中检索时对其进行清理。

检索和消毒似乎工作正常。但是，存储在数据库中的文本有时与输入的文本不同。

例如，当我输入“baño”时，它会存储为“baño”

我用调试器逐步完成了代码，我可以看到生成的 SQL 代码如下：

```
insert into table1 set column1 = 'baño' 
```

下一步是：

```
if (!mysql_query($sql, $db)) { ... 
```

如果我随后使用 phpMyAdmin 查看数据库，或使用 PHP 检索，我会看到 column1 的值为 'baÃ±o'

MySQL 使用 latin1_swedish_ci 作为默认值，我尝试将其更改为 utf8_unicode_ci 和 utf8_bin，但没有区别。

类似的代码在其他数据库上也能正常工作。

我究竟做错了什么？

====================

# 添加：

这是一个包含 100 多个 PHP 文件和 JS 文件的大型网站。数据库服务器有 20 个数据库，其中有几百个表。

我的问题只发生在一个 PHP 文件和一个表中。没有其他代码写入该表，并且该文件不会写入任何其他表。

这是来自 phpMyAdmin 的信息：

```
MySQL

    Server: Localhost via UNIX socket
    Server version: 5.1.43-log
    Protocol version: 10
    User: root@localhost 
    MySQL charset: UTF-8 Unicode (utf8) 

Web server

    Apache/2.2.3 (Unix) mod_ssl/2.2.3 OpenSSL/0.9.7b Zend Core/2.0.1 PHP/5.2.1
    MySQL client version: 5.0.27
    PHP extension: mysql 

phpMyAdmin

    Version information: 3.3.7 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:49:55.373

利用

```
mysql_query('SET CHARACTER SET charset_name'); 
```

在进行查询之前。

另外，您使用的是什么版本的 phpMyAdmin？查看 HTML 源代码中的标头并确保它是 UTF-8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:55:26.660

经过大量额外的研究和实验，我发现这解决了我的问题：

```
 mysql_query('SET CHARACTER SET "UTF8";',$db); 
```

其中 $db 是 *mysql_connect()* 返回的资源。

# apache-pig - 合并/分离 Pig UDF 返回

> ID：15842259
> 
> 赞同：1
> 
> 时间：2013-04-05T19:44:50.047
> 
> 标签：apache-pig

假设 Pig UDF 创建了两种不同类型的数据记录。

Pig 脚本如何以两种不同的方式处理从这个 UDF 返回的组合元组列表？

例如：

```
public Tuple exec (Tuple input)  // input ignored in UDF for simplicity
   {
   Tuple t = TupleFactory.getInstance ().newTuple ();
   if (Math.random () < 0.5)
      t.append ("less than half");
   else
      t.append (new Date ());
   return t;
   } 
```

Pig 脚本应该执行以下操作：

```
register ...
define myUDF ...
data = load ...;
combinedList = foreach data generate myUDF (data);

stringList = filter combinedList by $0 instanceof java.lang.String; // ??
dateList = filter combinedLists by $0 instanceof java.util.Date; //??

store stringList into ... ;
store dateList into ... ; 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:58:47.930

这里有两个问题。

1.  在任何情况下，您都不应该**从**您的 UDF 返回不同的数据类型。这违反了最小意外原则和其他一些事情。如果要指示无效值，则返回`null`或某些无效常量会更合适。
2.  您要做的不是使用多个过滤器来完成，而是有相应的`SPLIT`操作。尽管您`instanceof`在 Pig 中使用的示例是错误的，但基本用法类似于`SPLIT combinedList INTO stringList IF $0 instanceof String, dateList IF $0 instanceof Date`.

# php - [function.file-get-contents]：打开流失败：参数无效

> ID：15842261
> 
> 赞同：0
> 
> 时间：2013-04-05T19:44:58.043
> 
> 标签：php

我已经尝试过解决这个问题和这个

```
Warning: fopen() [function.fopen]: Filename cannot be empty 
```

为此也

```
Warning: fclose() expects parameter 1 to be resource, 
```

像反斜杠和正斜杠问题

但仍然面临问题请帮助我..我正在尝试用我的文件更改服务器上文件的内容..

```
$frserver =  file_get_contents("http:\\ip is here\\cdr\\settings.txt"); 
```

（我也尝试过使用单斜杠和正斜杠）但同样的问题.. 获取此文件后，我剪切了一个字符

```
$result = substr($frserver, 12, 1); 
```

它返回一个整数值

现在我用我的本地计算机做同样的程序

```
$frlocal =  file_get_contents("c:\\settings.txt", "r");
$result1 = substr($frlocal, 12, 1); 
```

现在比较两个字符..如果相同则没有问题，如果不同...用我的本地文件内容写入服务器文件。

```
if($result == $result1){
    echo "No file to Update";
}
else{
$fh = fopen( $frserver, "w" );
fwrite( $fh, $frlocal );
    fclose( $fh );
    echo "file updated"; 
```

}

请看一看。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:50:11.780

```
$frserver =  file_get_contents("http:\\ip is here\\cdr\\settings.txt"); 
```

`\\`用 1 个斜杠替换所有双反斜杠`/`

```
$frserver =  file_get_contents("http://ip is here/cdr/settings.txt"); 
```

Web URL 使用的是斜杠而不是反斜杠。

在这里您必须提供文件路径...

```
$fh = fopen( "http://ip is here/cdr/settings.txt", "w" ); 
```

# android - 锁定 desfire 卡和 ndef 消息 Android

> ID：15842262
> 
> 赞同：1
> 
> 时间：2013-04-05T19:45:02.917
> 
> 标签：android, nfc

我正在尝试创建一个处理 desfire 卡的 Android 应用程序。我已经实现了一些方法来让我进行身份验证、创建应用程序等。到目前为止，与卡的所有通信都是使用 IsoDep 对象和`tranceive()`命令完成的。我知道 desfire 是一个 Nfc Forum Type 4 标签，所以它支持 Ndef 消息结构，我也读过 AN11004。

据我所知，如果没有密码保护，我可以使用 Android API 的 Ndef 对象与 desfire 进行通信。我将如何与锁定的 desfire 卡进行通信？我知道首先身份验证、选择应用程序等程序将使用 IsoDep 对象完成，然后我将如何使用 ndef 消息进行操作？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:37:31.347

> 我将如何与锁定的 desfire 卡进行通信？

除非您知道卡的“解锁”钥匙，否则您无法使用它。您将始终能够检测到它，您将始终能够尝试对其进行身份验证（将失败，因为 DESfire 已锁定）。

而已。

对于普通的 DESFire：所有密钥可以在一天内通过侧信道攻击（需要专门的硬件）破解。对于 DESFire EV-1 标签，目前还没有已知的破解。

# javascript - 谷歌地图街景控件

> ID：15842263
> 
> 赞同：0
> 
> 时间：2013-04-05T19:45:05.470
> 
> 标签：javascript, google-maps, google-street-view

好的，我一直在从事这个项目，我想在谷歌地图街景地图中手动控制导航，而不是通过任何内置功能，如街景控件。我已经能够通过 map.panBY(x,y) 手动导航路线图，但这在街景中不起作用。

让我们说一下，我想要 3 个按钮：我的地图下方的“左”“右”“前进”来控制导航。我似乎无法找出在这些按钮 onclick 函数中放置哪些函数。我有点明白我需要用 POV 鬼混，但不太确定怎么做。任何帮助/见解将不胜感激。

注意** 我正在使用街景小人访问街景地图，即：map.getStreetView();

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:42:59.943

从您所描述的情况来看，您想要使用这些按钮执行的操作几乎就是您通过单击键盘上的箭头键获得的操作。如果这个假设是正确的，也许你可以在地图元素上模拟/触发 keydown 事件？我想你应该能够为此使用 jQuery。

# ios - iframe 在 iOS 上溢出 div

> ID：15842276
> 
> 赞同：0
> 
> 时间：2013-04-05T19:45:40.087
> 
> 标签：ios, css, iframe

我有以下设置：

```
<div id="main">
    <div class="module-texture">
        <div class="module-inner">
            <iframe>yadayadayada</iframe>
        </div>
    </div>
</div> 
```

`iframe`设置为`height:300px`并`.module-inner`具有. `overflow:auto`此外，周围的 div`#main`也设置了高度。在我的 iPhone 上查看时，`iframe`仍然溢出`#main`.

什么可能导致`iframe`溢出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:48:06.023

这将解决它

```
#main overflow:hidden; 
```

# nginx - URL重写规则不适用于nginx

> ID：15842279
> 
> 赞同：1
> 
> 时间：2013-04-05T19:45:49.320
> 
> 标签：nginx, rewrite

我想在 nginx 中的 apache 中进行 url 重写。基本上是为了给基于位置的请求一个更友好的 url 外观。我一直找不到 404 页面。

```
server {

  # site definitions (...)

  # fastcgi defitions (...)

  location / {

    # Code to make wp super cache work (...)

    rewrite ^/ads/category/(.*)/(.*)$ /ads/category/$1?location=$2 permanent;
    rewrite ^/category/(.*)/(.*)$ /ads/category/$1?location=$2 last;
    rewrite ^/category/(.*)$ /ads/category/$1 last;

  }
} 
```

我将上面的代码放在虚拟主机定义 /etc/nginx/sites-enable/mysite.xml 中。到目前为止，我不知道调试正在发生的事情的真正方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:00:53.023

而不是在单个位置 / {} 块中定义所有重写规则；尝试这样的事情：

```
# site definitions (...)

location / {
    # Code to make wp super cache work (...)

    # remove following line if you already have an index at site definitions..
    index index.php;

    try_files $uri $uri/ /index.php?$args;
  }

  if (!-f $request_filename) {
       rewrite ^/ads/category/(.*)/(.*)$ /ads/category/$1?location=$2 permanent;
       rewrite ^/category/(.*)/(.*)$ /ads/category/$1?location=$2 break;
       rewrite ^/category/(.*)$ /ads/category/$1 break;
  }

 # fastcgi defitions (...) 
```

我知道在 nginx 世界中[是否是邪恶](http://wiki.nginx.org/IfIsEvil)的，但它在 location {} 块中使用时会出现问题，类似的配置在我的虚拟服务器上就像一个魅力一样工作。

# javascript - 使用 require.js 在 JavaScript 中继承：非法调用

> ID：15842284
> 
> 赞同：0
> 
> 时间：2013-04-05T19:46:02.587
> 
> 标签：javascript, google-chrome, inheritance, requirejs

我遇到了 require.js 和原型继承的问题。这是我的模块：

```
define([], (function() {
  "use strict";
  var Player = function() {
    console.log("Constructor of the Player Object");
    this.audioObject = new Audio();        
  };
  Player.prototype = new Audio();
  return Player;
})); // define 
```

然后我尝试以这种方式使用音频对象的播放方法：

```
define(["jquery", "player"], (function($, Player) {
  "use strict";
  /**
  *  The controls for the player
  **/ 
  var Controls = function(player) {
    $(".play").click(function() {
      console.log("play");
      player.play();
    });
  };
  return Controls;
})); // define 
```

单击按钮时，Chrome 会抛出 Error: Uncaught TypeError: Illegal invocation

我已经尝试了几个小时，在这里阅读了类似的问题，但其中大多数与 jQuery 有关，我认为这不是问题所在。（我尝试自己定义一个名为 Player.prototype.play() 的方法，效果很好，但我认为这不是重写所有方法的最佳方法）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:31:35.077

这可能是因为在实例化`Audio`new 时，有一些隐藏的“幕后”属性不会从原型中复制。`Player`

当您调用时`player.play()`，`play`期望在`Audio`实例上运行，但它正在`Player`实例上运行。理论上，这里应该没有问题，因为`Player`应该和 an 一样`Audio`，因为它的原型是一个`Audio`实例。但是，`Audio`它是一个*宿主对象*，这意味着它不需要遵循普通 JavaScript 对象的规则。

也就是说，你为什么还要为你的原型使用`Audio`实例呢？`Player`除了容易出现奇怪的行为（正如您现在所观察到的）之外，这似乎完全没有必要，因为您已经`Audio`在属性中持有一个对象`audioObject`。

我不完全理解你的设计，但为什么不使用`audioObject`，例如，调用`player.audioObject.play()`这里呢？

# node.js - 如何将 res.render 与猫鼬查找功能一起使用？

> ID：15842285
> 
> 赞同：1
> 
> 时间：2013-04-05T19:46:06.620
> 
> 标签：node.js, mongodb, express, mongoose

我有一条路线可以获取 mongodb 中的所有客户端并返回它们。当我尝试将`res.render()`from 与 mongoose find() 回调一起使用时，我收到一条错误消息`ReferenceError: res is not defined`

这是有效的代码，我已经确认正在返回客户：

```
app.get( '/clients', function( request, response ) {
    return ClientModel.find( function( err, clients ) {
        if( !err ) {
            return response.send( clients );
        } else {
            return console.log( err );
        }
    });
}); 
```

这是我试图用来呈现 ejs 视图的代码，同时将客户端列表传递给它：

```
app.get( '/clients', function( request, response ) {
    return ClientModel.find( function( err, clients ) {
        if( !err ) {
            res.render('clients/clients.ejs', {
              clients: clients
            });
        } else {
            return console.log( err );
        }
    });
}); 
```

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:55:11.123

使用`response.render`而不是`res.render`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-22T13:24:40.000

试试这个，它会工作。

```
app.get( '/clients', function( request, response ) {
return ClientModel.find( function( err, clients ) {
    if( !err ) {
        response.render('clients/clients.ejs', {
          clients: clients
        });
    } else {
        return console.log( err );
    }
}); 
}); 
```

# wpf - 在 WPF 和 WP8 中实现 ISupportIncrementalLoading

> ID：15842287
> 
> 赞同：5
> 
> 时间：2013-04-05T19:46:10.467
> 
> 标签：wpf, listview, winrt-xaml, virtualization

WinRT 应用程序有一种将虚拟化添加到 ListView 控件的简单方法。如果集合实现了 ISupportIncrementalLoading，它可以用于大量项目的部分异步加载。

我正在尝试在其他平台上解决此任务：WPF 和 WP8。这个接口在那里不可用，但我想知道是否有一个与 WinRT 对应的实现非常匹配。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T20:21:47.970

可能会有所帮助：

[数据虚拟化或将数据延迟加载到 ListView](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/1b2f6efe-3041-4e62-914b-9023585abfc9/)

[数据虚拟化](http://www.zagstudio.com/blog/498#)

# javascript - 为什么要同时设置 className 和 class？

> ID：15842288
> 
> 赞同：0
> 
> 时间：2013-04-05T19:46:13.450
> 
> 标签：javascript, jquery

我不再确定我为什么要这样做。我在某处读到我应该同时设置类和类名

为什么两者都有？为什么不只是“类”。我只是想理解这一点，因为“类”似乎每件事都可以正常工作。

```
$(e).attr('class','highlightMe');
$(e).attr('className','highlightMe'); 
```

- -更新 - - - - - - - - - - - - - - - - - - - - - - - -------------------------------------------

那么，如果我想先清除所有课程？可能不止一个......我会做这样的事情吗？

```
$(e).removeClass();
$(e).addClass('highlightMe'); 
```

- -更新 - - - - - - - - - - - - - - - - - - - - - - - -------------------------------------------

这就是我最终做的，它似乎工作正常......到目前为止

**attr**初始化类...摆脱我可能在那里的其他类

**addClass**添加更多类

我无法使用**removeClass**，因为我没有通过 ID 引用元素

```
$(.base123).attr('class','base123');
$(.base123).addClass('highlightMe blinkMe'); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T19:47:00.610

两者都是错误的，well wrong 是一个强词，还有更优化的方法，例如：使用 jQuery，您只需要[addClass()](http://api.jquery.com/addClass/)。如果一个类已经附加到元素上，那么这不会做任何事情，如果不是，它将添加它。为了解决您的更新，调用[.removeClass()](http://api.jquery.com/removeClass/)（不带参数）将删除一个元素（或多个元素）上的所有类

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T19:47:40.723

使用`addClass`方法将类设置为元素。

```
$(e).addClass('newClassName'); 
```

请务必注意，此方法不会替换类。它只是添加类，将其附加到任何可能已经分配给元素的类

如果要添加多个类，可以用空格分隔它们。

```
$("#theElementID").addClass("clsActive clsPremium"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T20:04:22.163

**每个人都建议使用[这些方法](http://api.jquery.com/category/manipulation/class-attribute/)（您应该这样做），但这并不能回答您的问题！**

真正的答案是：`class`在使用`.attr()`jQuery 的方法`className`时使用，在使用`.prop()`方法或纯 JavaScript 时使用。

Javascript 将类存储为`element.className`避免关键字冲突，但 using`$(element).attr('class')`实际上会更改 HTML 属性（链接到 DOM 元素的 className 属性，因此它们保持同步）。

**编辑：回答您的更新**

使用`e.className=''`or `$(e).attr('class','')`or or `$(e).prop('className','')`or just `$(e).removeClass()`（无参数）从元素中清除类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T19:53:41.013

`.attr('class', 'foo')`将清除目标元素上设置的任何其他类。如上所述，`.addClass('foo')`正如它所建议的那样，将类添加到您的目标元素，从而保留当前设置的任何其他元素。

**然而**

我想你可能会问，与此有关：

`$('<div />', {'class' : 'bar});`对比`$('<div />', {className : 'bar'});`

它们在情感上是相同的——[`className`](https://developer.mozilla.org/en-US/docs/DOM/element.className)与 jQuery 无关，它只是普通的 Javascript。

所以，`$(foo).attr('class', 'bar');` 简直就是

`$(foo).className = 'bar';`

或者更确切地说：

`$(foo).setAttribute('class', 'bar');`

或者*更*确切地说：

`document.getElementById('foo').className = 'bar';`

`document.getElementById('foo').setAttribute('class', 'bar');`

# ruby-on-rails - Resque 不接工作

> ID：15842292
> 
> 赞同：0
> 
> 时间：2013-04-05T19:46:27.670
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, resque, webrick

所以，我正在尝试设置 resque，这有点奇怪。我之前有它工作过，但我不知道发生了什么。

当我运行命令时：

```
QUEUE=* bundle exec rake resque:work 
```

它启动 webrick 并给出以下输出：

[2013-04-05 12:41:52] 信息 WEBrick::HTTPServer#start: pid=55507 端口=2010

然而，过了一段时间，它就卡在那里，再也找不到工作了。如果我 ctrl-c 结束它，我会得到输出：

[2013-04-05 12:43:22] 信息将关闭... [2013-04-05 12:43:22] 信息 WEBrick::HTTPServer#start 完成。

它开始开始找工作。显然有些东西卡住了，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T04:02:54.377

QUEUE='*' 应该用引号引起来（双引号或单引号）。

# iphone - ccTouchBegan 函数正在错误地执行 If 语句

> ID：15842294
> 
> 赞同：0
> 
> 时间：2013-04-05T19:46:30.347
> 
> 标签：iphone, cocos2d-iphone

我目前正在尝试使用 Cocos2D 在 iOS 设备上读取和存储触摸。我的方法是在 ccTouchBegan、ccTouchMoved、ccTouchCanceled 和 ccTouchEnded 函数中单独处理每个触摸（启用多点触控）。

重要的变量是：

*   activeTouches（当接收到新的有效触摸（有效表示不在操纵杆附近）时递增或递减的 int）。
*   acceptingGestures（用于忽略任何新触摸的布尔值）
*   手势定时器（float，在更新函数中由 ccTime 连续递增。当它高于某个阈值时，acceptingGestures 设置为 FALSE）

这是我的代码：

```
-(BOOL) ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event
{
    CGPoint touchLocation = [touch locationInView: [touch view]];
    touchLocation = [[CCDirector sharedDirector] convertToGL: touchLocation];
    touchLocation = [self convertToNodeSpace:touchLocation];

    //check to see if touch is near joystick to prevent accidental gestures. may want to consider increasing the 'deadzone' value
    if(abs(self.joystickLocation.x - touchLocation.x) <= 35 && abs(self.joystickLocation.y - touchLocation.y) <= 35)
    {
        return NO;
    }

    if(self.activeTouches == 0)
    {
        [self setGestureTimerEnable:TRUE];
        [self setGestureTimer:0.0f];
    }

    if(self.acceptingGestures == TRUE);
    {
        if (self.firstTouch == nil)
        {
            self.firstTouch = touch;
            self.activeTouches++;
            return YES;
        }
        else if (self.secondTouch == nil)
        {
            self.secondTouch = touch;
            self.activeTouches++;
            return YES;
        }
    }

    CCLOG(@"touched: %f, %f\n",touchLocation.x, touchLocation.y);
    return NO;
} 
```

我在 ccTouchBegan 函数中遇到了一个奇怪的问题。我使用模拟器的测试场景是我有 1 次触摸被软件识别，然后gestureTimer 正在运行。x 时间后，gestureTimer 超过阈值并将acceptingGestures 设置为FALSE。然后我对屏幕应用第二次触摸，代码接受触摸并增加 activeTouches 变量！它不应该这样做！

我使用调试器设置了一个断点，并试图捕捉这个奇怪的事件。即使acceptingGestures 是FALSE（断点处的acceptingGestures 表达式确实是FALSE），代码仍然通过If 语句！在随附的屏幕截图中，请注意 acceptingGestures 为 FALSE。

我将不胜感激任何帮助！谢谢！

![调试器截图。 请注意，acceptingGestures 是 FALSE。](https://i.stack.imgur.com/7Krx4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:57:31.810

我发现了我的问题。我的 if 语句后面有一个分号！呜呜呜。我想删除我的帖子，但也许有人会看到我的手势代码并从中获得一些东西？

# sql-server - 查找所有具有hierarchyid子节点的节点

> ID：15842301
> 
> 赞同：0
> 
> 时间：2013-04-05T19:46:47.660
> 
> 标签：sql-server, tsql, hierarchyid

鉴于此表：

```
CREATE TABLE Employee
(
    EmpId INT PRIMARY KEY IDENTITY,
    EmpName VARCHAR(100) NOT NULL,
    Position HierarchyID NOT NULL
)

INSERT INTO Employee (EmpName, Position)
VALUES ('CEO', '/'),
    ('COO', '/1/'),
    ('CIO', '/2/'),
    ('CFO', '/3/'),
    ('VP Financing', '/3/1/'),
    ('Accounts Receivable', '/3/1/1/'),
    ('Accountant 1', '/3/1/1/1/'),
    ('Accountant 2', '/3/1/1/2/'),
    ('Accountant 3', '/3/1/1/3/'),
    ('Accounts Payable', '/3/1/2/'),
    ('Accountant 4', '/3/1/2/1/'),
    ('Accountant 5', '/3/1/2/2/'),
    ('DBA', '/2/1/'),
    ('VP of Operations', '/1/1/') 
```

如何找到没有任何子节点的所有行？

我有以下似乎可行的方法，但似乎应该有一种不那么复杂的方式：

```
select * from (
    select 
        *,  
        case 
            when (select top 1 e.Position from dbo.Employee e where Position.GetAncestor(1) = Employee.Position) is null then 
                cast (0 as bit)
            else 
                cast (1 as bit)
        end as HasDescendants     
    from 
        dbo.Employee
) as managers
where HasDescendants = 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:14:36.233

请参阅另一个堆栈溢出问题： [Find all leaf node records using hierarchyid](https://stackoverflow.com/questions/10694894/find-all-leaf-node-records-using-hierarchyid)

```
SELECT A.*
FROM Employee AS A 
LEFT OUTER JOIN Employee AS B
ON A.Position = B.Position.GetAncestor(1)
WHERE B.Position IS NULL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T20:24:29.257

询问：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!3/a386a/15)**

```
SELECT e.*
FROM dbo.Employee e
WHERE NOT EXISTS (SELECT 0
       FROM Employee e2
       WHERE e2.Position.ToString() like e.Position.ToString() + '_%') 
```

结果：

```
| EMPID |          EMPNAME |    POSITION |
------------------------------------------
|     7 |     Accountant 1 | 122,-42,-80 |
|     8 |     Accountant 2 | 122,-42,-48 |
|     9 |     Accountant 3 | 122,-42,-16 |
|    11 |     Accountant 4 | 122,-38,-80 |
|    12 |     Accountant 5 | 122,-38,-48 |
|    13 |              DBA |     106,-64 |
|    14 | VP of Operations |      90,-64 | 
```

# html - 使用 jQuery 在 Dom Load 上自动播放 HTML5 视频

> ID：15842308
> 
> 赞同：7
> 
> 时间：2013-04-05T19:47:22.480
> 
> 标签：html, html5-video

我正在尝试使用 jQuery 加载 dom 后立即播放视频。这是我的代码：

**HTML**

```
<video id="video" width="420">
  <source src="http://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4">
  <source src="http://www.w3schools.com/html/mov_bbb.ogg" type="video/ogg">
  <p>Your browser does not support HTML5 video.</p>
</video> 
```

**JS（脚本.js）**

```
$(document).ready(function() {
  $(#video).play();
}); 
```

当您加载视频时，视频无法播放，我哪里出错了？提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T19:49:44.463

jQuery 选择器`$("#video")`返回一个 jQuery 对象。由于`play()`是 DOM 元素的函数，因此您必须通过以下方式获取 DOM 元素：

```
$("#video").get(0); 
```

在使用 .play() 方法之前：

```
$("#video").get(0).play(); 
```

编辑：您还可以使用 HTML5 选定标签以防 jQuery 回退。注意`autoplay`标签。

```
<video controls="controls" autoplay="autoplay" loop="loop"
width="233" height="147" poster="//www.cdn.com//video.png"
preload="auto" title="Video">
    <source src="//www.cdn.com/video.mp4" type="video/mp4"/>
    <source src="//www.cdn.com/video.ogv" type="video/ogv"/>
    <source src="//www.cdn.com/video.webm" type="video/webm"/>
</video> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-16T10:44:53.277

我知道不是 jQuery，而是在带有 html5 的标准 javascript 中，您可以使用：

```
var video = document.getElementById("target_video");
video.autoplay = true;
video.load(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-11T21:54:15.480

```
$('video#video').each( (i,e) => e.play() ); 
```

正如[Justin McDonald](https://stackoverflow.com/a/15842341/2540235)所指出的，该`play()`方法存在于[Video DOM 节点](https://www.w3schools.com/tags/av_met_play.asp)本身上，因此您首先必须将 jQuery 对象解析为特定的节点。`id="video"`但是，如果元素不存在或不是`video`节点，他的解决方案会抛出错误。

# java - 受保护区域的可见性

> ID：15842314
> 
> 赞同：0
> 
> 时间：2013-04-05T19:47:54.240
> 
> 标签：java

```
package p1;

public class MyClass1 {

      protected static  String str = "ss1";

    }

package p2;

import p1.MyClass1;

public class MyClass2 extends MyClass1 {

     public static void test(){

         MyClass1 mc1 = new MyClass1();

         System.out.println(mc1.str); 

         }

} 
```

据我了解，如果字符串被声明为受保护，则打印语句将不起作用，因为它在其他包中不可见。但是为什么当被声明为 static protected 时它会起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T19:50:19.033

*static*修饰符与可见性无关，所以什么都不会改变。您不能从不同的包访问*受保护*的成员（即字段、方法），无论它是否是静态的。

但在您的情况下，MyClass2 扩展了 MyClass1。您可以从超类访问受保护的成员。不过，*静态*与此无关。

编辑：

嗯，这是一个非常有趣的案例，因为涉及到两个不同的事情：1）从不同包中的子类访问受保护的成员，2）允许您访问静态（类）成员（如实例成员）的语法技巧。

我将扩展您的示例以显示您在此代码中实际执行的操作：

```
package p1;

public class MyClass1 {

    protected String protectedString = "example";

    protected static String protectedStaticString = "example";

}

package p2;

import p1.MyClass1;

public class MyClass2 extends MyClass1 {

    public void testProtected() {

        MyClass1 otherMC1 = new MyClass1();
        MyClass2 otherMC2 = new MyClass2();

        String testProtected;

        testProtected = this.protectedString; // OK, protectedString is inherited, so it's instance member of this class
        testProtected = super.protectedString; // OK, it's also instance member of superclass

        testProtected = otherMC1.protectedString; // ERROR. You can't access protected members of other instance of superclass
        testProtected = otherMC2.protectedString; // OK. As it's inherited member of MyClass2, you can access it if it belongs to other instance of your class

    }

    public void testProtectedStatic() {

        MyClass1 otherMC1 = new MyClass1();
        MyClass2 otherMC2 = new MyClass2();

        String testProtectedStatic;

        testProtectedStatic = this.protectedStaticString; // OK - syntax trick
        testProtectedStatic = super.protectedStaticString; // OK - syntax trick

        testProtectedStatic = otherMC1.protectedStaticString; // OK - syntax trick
        testProtectedStatic = otherMC2.protectedStaticString; // OK - syntax trick

        testProtectedStatic = MyClass1.protectedStaticString; // OK - you can access protected static members from superclass
        testProtectedStatic = MyClass2.protectedStaticString; // OK - this also static member of your class
    }

} 
```

现在，什么是“语法技巧”。编译器允许您像访问实例成员一样访问静态成员：

```
MyClass mc = new MyClass();
Object o = mc.STATIC_FIELD; 
```

但是实际上将编译为字节码的内容：

```
MyClass mc = new MyClass();
Object o = MyClass.STATIC_FIELD; 
```

以这种方式访问​​静态成员被认为是不好的做法，因为它具有误导性。您应该始终以静态方式访问静态成员，以避免在阅读代码时产生混淆。

这就是你的情况。有静态字段以非静态方式访问，所以它看起来像实例字段。当您删除*静态*修饰符时，它成为实例成员。*访问此字段的方式发生了变化，但由于您的object.staticField*语法，您没有注意到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T19:54:17.377

正如所指出的，静态与可见性无关。

在您的情况下，“str”被标记为受保护，这意味着有两种类型的类可以看到它： - 同一包中的类 - 扩展 MyClass1 的类

您的代码有效，因为 MyClass2 扩展了 MyClass1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T19:52:26.387

它与它是否是*静态*的无关。您可以访问该成员，因为 MyClass2 扩展了 MyClass1

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T19:55:07.587

这是一条有趣的规则：您可以访问定义在超类中的受保护实例变量，但您不能使用私有实例变量访问该类的子类中的私有实例变量。例如

```
public class Super {
   private String str;
}

public class Sub extends Super {
    public void getStr(){
        return str; // not allowed.
    }
} 
```

但是，如果使用了以下内容，则允许这样做：

```
public class Super {
   protected String str;
}

public class Sub extends Super {
    public void getStr(){
        return str; // allowed.
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T19:55:44.583

*   `public`意味着它对所有类都可见。
*   `protected`意味着它对包*和所有子类*可见。
*   （无修饰符）意味着它仅对包可见。
*   `private`意味着它只在自己的类中可见。

有关详细信息，请参阅[控制对类成员的访问](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)。

# javascript - 来自greasemonkey默认缩放的谷歌地图链接

> ID：15842315
> 
> 赞同：1
> 
> 时间：2013-04-05T19:47:56.313
> 
> 标签：javascript, google-maps, greasemonkey

最近谷歌地图上似乎发生了一些变化，改变了默认缩放。我尝试添加 zoom=17 和 z=17，但似乎没有任何改变。

我只是使用以下网址和查询在页面上创建一个超链接

" [https://maps.google.com/?zoom=17&q=](https://maps.google.com/?zoom=17&q=) " +myAddress.replace(/ /g, '+');

在过去，无论我在查询中使用什么地址，它总是可以正常工作。只是想知道可能发生了什么变化，以及我是否需要以另一种方式解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:16:34.417

`z=13`除非同时提供纬度和经度，否则谷歌地图现在不会放大。例如：`&ll=98.414257,-21.727585`。

作为一名脚本编写者，这会使您的任务更加复杂；这是一种可行的伪代码方法：

1.  像以前一样打开地图页面，但将其（自定义 URL 参数或`GM_setValue`）标记为您的脚本首次打开的。

2.  将脚本设置为也在 Google 地图页面上运行。

3.  在标记的 Google 地图页面上：

    1.  抓住分享链接。
    2.  仅更改`z`参数 EG `&z=17`。
    3.  确保清除任何标志。
    4.  `location.replace()`到修改后的分享链接

* * *

* * *

或者，更持久的策略是改用[Google Maps API](https://developers.google.com/maps/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:07:23.217

如果您访问[Google 地图](https://maps.google.com)并单击并分享链接按钮，您将看到如下内容：

[https://maps.google.com/?ll=53.944771,-0.854187&spn=0.890705,2.694397&t=m&z=9](https://maps.google.com/?ll=53.944771,-0.854187&spn=0.890705,2.694397&t=m&z=9)

所以我认为你应该担心一些必填字段......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:58:13.393

这是我最终用来解决问题的方法。正如 Brock 解释的那样，我可以通过 z=16 提供纬度和经度来指定缩放。

```
addMapLL('900+w+900+s+clearfield+UT');  // just a random address formatted

function addMapLL(address) {
    var api = "https://maps.googleapis.com/maps/api/geocode/json?sensor=true&address=" + address;

     GM_xmlhttpRequest(
    {
        method: 'GET',
        url: api,
        onload: function(resp) {
            var obj = JSON.parse(resp.responseText);

            if (obj.status == "OK") {
                var lat = obj.results[0].geometry.location.lat;
                var lng = obj.results[0].geometry.location.lng;
                var ll  = "&ll=" + lat + "," + lng;

                // .href is already set as follows
                // https://maps.google.com/?z=16&q=900+w+900+s+clearfield+UT
                document.getElementById('googlemap').href += ll;
            }
        }
    });
} 
```

# python-2.7 - 如何将字符串拆分为特定字符？

> ID：15842319
> 
> 赞同：0
> 
> 时间：2013-04-05T19:48:07.877
> 
> 标签：python-2.7

我有一个字符串形式的日期，它看起来像这样：

```
"21.07\. - 10.08." 
```

我想知道如何将两者分成两个字符串，并丢失“ - ”。

`string1 = "21.07."`会做的东西`string2 = "10.08."`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:50:15.260

```
string1, string2 = '21.07\. - 10.08.'.split(' - ') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:53:48.593

我实际上并不了解 Python，但我找到[了这个线程](http://www.daniweb.com/software-development/python/threads/258786/split-string-at-specific-character)。

好像你可以分成一个列表：

```
mylist = mystr.split("-", 1) 
```

然后...

```
string1 = mylist[0]; #This contains "21.07."
string2 = mylist[1]; #This contains "10.08." 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T19:51:44.927

在“-”处拆分字符串。这将为您提供一个字符串数组。将两个数组元素连接在一起形成一个字符串。

在java中，这将是：

```
 String[] splitted = stringToSPlit.split("-");
 String result = splitted[0] + splitted[1]; 
```

# asp.net - ASP.NET 中的 log4net 唯一请求 ID

> ID：15842321
> 
> 赞同：26
> 
> 时间：2013-04-05T19:48:08.907
> 
> 标签：asp.net, log4net

log4net 1.2.11.0

我正在尝试获取任何可以让我为每个 ASP.NET 请求使用唯一值进行记录的东西。

我尝试了 %thread，但线程似乎被重用了。

我试过 %aspnet-request 和 %aspnet-session ，它们没有任何意义。

我查看了 ThreadContext.Properties 和 LogicalThreadContext.Properties，但它们也没有任何内容。

有没有人有诀窍来完成这件事？我需要能够从日志文件中挑选特定请求的日志。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-15T15:36:26.210

`.asmx`文件仍将调用`Application_BeginRequest`事件，您可以在其中存储唯一的 GUID `HttpContext.Current.Items`（使用此集合可避免请求处理跳转线程时出现的奇怪问题）。仅当您使用 WCF（并且还取决于配置）时，这才行不通。

如果您不想接触应用程序本身，您可以使用`HttpContext.Current.Timestamp`它返回请求处理开始的时间。将其与您现有的获取线程 ID 的方法相结合，您将获得一个独特的价值。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-19T09:21:31.690

`HttpContext.Current.Items`- 是个好主意。

尝试添加类似的东西：

```
HttpContext.Current.Items.Add("RequestIdentity", Guid.NewGuid().ToString()) 
```

* * *

在 .NET Core 中，您可以通过这种方式（从您的控制器）访问它，也可以从其他任何地方`HttpContext.Items`使用它。`HttpContextAccessor`

所有细节都[在这里](https://docs.microsoft.com/en-us/aspnet/core/fundamentals/http-context?view=aspnetcore-3.1)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-19T18:07:58.483

`clock tick`我认为，当您的请求开始时存储的+ `process ID`+`thread ID`应该足够了（假设每个线程一次处理 1 个请求）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-22T15:05:21.223

这是我为此目的创建的一些扩展方法：

```
public static Guid GetId(this HttpContext ctx) => new HttpContextWrapper(ctx).GetId();

public static Guid GetId(this HttpContextBase ctx)
{
    const string key = "tq8OuyxHpDgkRg54klfpqg== (Request Id Key)";

    if (ctx.Items.Contains(key))
        return (Guid) ctx.Items[key];

    var mutex = string.Intern($"{key}:{ctx.GetHashCode()}");
    lock (mutex)
    {
        if (!ctx.Items.Contains(key))
            ctx.Items[key] = Guid.NewGuid();

        return (Guid) ctx.Items[key];
    }
} 
```

# sql-server - SQL SELECT 语句（在 vb.net 中）返回空和/或奇怪的行

> ID：15842322
> 
> 赞同：1
> 
> 时间：2013-04-05T19:48:09.533
> 
> 标签：sql-server, vb.net, ado.net

我正在使用 VS Express 2012、SQL Server 2012。我有一张表（计算机）和两行 10 列（HaHu_ID、Serial_Number、品牌、型号、操作系统、处理器、硬盘、内存、ST、速度）。

我一直在这个网站上阅读尽可能多的帖子，试图创建一个到 SQL Server 的 vb.net 接口。我成功连接它们并将值返回到 DataGridView 表

```
SELECT * FROM computers 
```

但是当我尝试其他命令时

```
SELECT * FROM computers 
WHERE 'HaHu_ID' = '101' 
```

它返回一个空的 DataGridView 行！尝试将“HaHu_ID”更改为随机的，但它仍然给了我空行。显示了正确的列名，但行全部为空。

当我尝试另一个命令“SELECT 'HaHu_ID', 'Brand' FROM computer”时，它返回：

```
Column1---|--Column2

-HaHu_ID--|--Brand
-HaHu_ID--|--Brand 
```

列名已更改为“Column1 和 column2”，如您所见，行中填满了应该是列名的内容！沮丧的我尝​​试了“从计算机中选择'HaHu'，'Brand_ID'”（我的数据库中不存在的列）并返回：

```
Column1---|--Column2

---HaHu----|--Brand_ID
----HaHu---|--Brand_ID 
```

我回到原来的`SELECT * FROM computers`，它再次工作！

这是我的代码：

```
Dim cs as New SqlConnection...
cs.Open()
'Dim da2 as New SqlDataAdapter("SELECT * FROM computers WHERE 'HaHu_ID' = '101'", cs)
Dim da2 as New SqlDataAdapter("SELECT * FROM computers", cs)
Dim table as New DataTable()
table.Locale = System.Globalization.CultureInfo.InvariantCulture
da2.Fill(table)
BindingSource1.DataSource = table
dataGrid1.DataSource = BindingSource1
cs.Close() 
```

（我无法复制和粘贴它，因为我现在在另一台计算机上）。因此，该`select * from computers`语句完美运行，但是一旦我尝试其他方法，它就不起作用了。

这是为什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:52:48.057

不要在列名周围加上单引号。WHERE HaHu_ID = '101' 是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T20:01:19.580

单引号用于指定字符或字符串。以下 SQL 语句选择字符串“HaHu_ID”和字符串“Brand”，并返回您在计算机表中的每条记录。由于没有指定别名，服务器返回 Column1、Column2 等的默认值。

```
SELECT 'HaHu_ID', 'Brand' FROM computers 
```

要转义列名，请使用方括号，如下所示：

```
SELECT [HaHu_ID], [Brand] FROM [computers] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T20:13:25.677

对，您正在比较两个字符串：

```
SELECT * FROM computers  WHERE 'HaHu_ID' = '101' 
```

尝试：

```
SELECT 'foo' FROM computers WHERE HaHu_ID = '101' 
```

（假设它是字符类型列而不是数字）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T21:42:56.767

这是你想要做的吗？

```
SELECT * FROM computers 
WHERE col1 = 'HaHu_ID' and col2 = '101' 
```

或者

```
SELECT * FROM computers 
WHERE col1 like '%HaHu_ID%' and col2 like '%101%' 
```

如果没有，“SELECT * FROM computer”会为您返回什么？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-18T08:30:51.290

Private Sub TxtID_TextChanged(sender As Object, e As EventArgs) 处理 TxtID.TextChanged

暗淡为新的 My_Ticket_MachineDataSet

'连接设置

Dim con As New SqlConnection(" Data Source=LEES-PC;Initial Catalog=My Ticket Machine;Integrated Security=True")

'选择哪一行

Dim com As New SqlCommand("select * from FareChartTest where TicketPricesID = 3", con)

com.Parameters.Add("@TicketPricesID", SqlDbType.Int).Value = TxtID.Text

暗淡适配器作为新的 SqlDataAdapter(com)

```
 Dim table As New DataTable() 
```

适配器.填充（表）

```
 If table.Rows.Count() > 0 Then
        'which column to select
        TextBox4.Text = table.Rows(0)(0).ToString()
        ' return only 1 row
        'which column to select
        TextBox3.Text = table.Rows(0)(1).ToString()
    Else

        MessageBox.Show("NO Data Found")

    End If
End Sub 
```

# java - 一个框架可以访问另一个框架的按钮/组件吗？

> ID：15842324
> 
> 赞同：2
> 
> 时间：2013-04-05T19:48:17.367
> 
> 标签：java, swing, jframe, awt

我有两个框架，我想单击 frame2 中的按钮并*禁用 frame1 中的按钮*。这可能吗？程序从 frame1 开始执行并打开 frame2。它来自这个框架2，我想在框架1中禁用该按钮但它不起作用.....怎么能做到？

附加信息：当我使用面板时，我也遇到了类似的问题。我只是不明白。请帮忙！

这是程序开始执行的 frame1 的编码：

```
public class Frame1 extends javax.swing.JFrame {

Frame2 frm2 = new Frame2();    

public Frame1() {
    initComponents();        
}    

public void buttonDisable(){
    Btn1.setEnabled(false);
}
private void Btn1ActionPerformed(java.awt.event.ActionEvent evt) {                                     
    frm2.setVisible(true);
}                                    

public static void main(String args[]) {

    java.awt.EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            new Frame1().setVisible(true);
        }
    });
}

public javax.swing.JButton Btn1;

} 
```

这是我想禁用该按钮的 frame2 的编码：

```
public class Frame2 extends javax.swing.JFrame {

public Frame2() {
    initComponents();
}                       

private void Btn2ActionPerformed(java.awt.event.ActionEvent evt) {                                     
    Frame1 frm1 = new Frame1();
    frm1.buttonDisable();
}                                    

public static void main(String args[]) {

    java.awt.EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            new Frame2().setVisible(true);
        }
    });
}

public javax.swing.JButton Btn2;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T19:56:37.327

这很简单，您的抽象可以正常工作。这是实现您想要的基本方法：

```
class FrameTwo extends JFrame {
    private FramOne firstFrame;

    public FrameTwo(FrameOne firstFrame) {
        this.firstFrame = firstFrame;
    };

    public void doSomething() {
        System.out.println(this.firstFrame.someMethod());
    };
}; 
```

基本上我将`FrameOne`类的一个实例传递给`FrameTwo`构造函数。有几个选项可以实现这一点，使用静态成员，使用两个框架作为某个类的实例，使用`View`抽象等。你的问题是简单的 OOP，也许阅读更多。

另外，请注意您可以添加`import javax.swing.Frame`到文件的顶部，然后您可以键入`class FrameOne extends Frame`而不是`class FrameOne extends javax.swing.Frame`;

**最重要的**

在同一个应用程序中使用多个框架是非常罕见的，并且强烈建议不要这样做。我会考虑创建使用 a`JPanel`来嵌套元素的视图，然后您可以在同一框架内切换面板和对话框。

# linux - 以数字方式对文件的行进行排序 Linux/Unix

> ID：15842325
> 
> 赞同：0
> 
> 时间：2013-04-05T19:48:22.970
> 
> 标签：linux, file, unix, sorting, command-line

我有两个文件要比较。一档订货号

```
1    somedata  otherdata
2    somedata  otherdata
3    somedata  otherdata
4    somedata  otherdata
5    somedata  otherdata
6    somedata  otherdata
7    somedata  otherdata
8    somedata  otherdata
Y    somedata  otherdata
Y    somedata  otherdata 
```

其他订单

```
1    somedata  otherdata
10    somedata  otherdata
11    somedata  otherdata
12    somedata  otherdata
.
.
.
2    somedata  otherdata
Y   somedata  otherdata
Y   somedata  otherdata 
```

如果我可以在运行它之前对第二个文件进行排序（因为第一个文件有一个我想保留的标题。该标题的每一行都以 #. 开头），这将使我的生活变得无限轻松，所以我我比较苹果和苹果。

我试过：sort -n /home/me/file.txt -o /home/me/newfile.txt

这几乎是我想要的，但它把字母放在顶部而不是底部。像这样：

```
 Y    somedata  otherdata
    Y    somedata  otherdata
    1    somedata  otherdata
    2    somedata  otherdata
    3    somedata  otherdata
    4    somedata  otherdata
    5    somedata  otherdata
    6    somedata  otherdata
    7    somedata  otherdata
    8    somedata  otherdata 
```

我会怎么做才能对数字进行排序，但最后会出现底部的字母？或者，如果做不到这一点，有没有办法排除以某个字符开头的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:15:05.617

```
cat /tmp/file.list | sort -n | grep -v ^[A-Z] > /tmp/file.list.sorted; grep ^[A-Z] /tmp/file.list  >> /tmp/file.list.sorted 
```

这将对位于 /tmp/file.list 的文件的内容进行数字排序（排除任何以大写字母开头的字符串）并将内容写入 /tmp/file.list.sorted。然后再次解析原始的file.list，这次抓取任何以大写字母开头的行，然后将结果附加到/tmp/file.list.sorted 的底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:50:39.503

为什么不在比较之前使用相同的算法对它们进行排序呢？我不确定您是否可以轻松地强制`sort`实用程序执行您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T20:08:06.390

我确信有很多方法可以做到这一点。这是一种方法。用您的输入文件名代替`somedata.txt`.

发送到标准输出：

```
cat somedata.txt | grep ^[0-9] | sort -n; cat somedata.txt | grep ^[^0-9] | sort 
```

发送至`out.txt`：

```
cat somedata.txt | grep ^[0-9] | sort -n > out.txt; cat somedata.txt | grep ^[^0-9] | sort >> out.txt 
```

上面使用 grep 分别对以数字开头的行和不以数字开头的行进行排序。然后通过管道传输到标准输出或文件`out.txt`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T20:11:04.373

您可以在运行排序之前拉出标题行，然后将它们添加回来。如果您有`$n`标题行，那么以下内容将通过管道输出其后的所有内容：

```
head -n $n filewithheader.txt >newfile.txt
tail -n $((cat filewithheader.txt| wc -l -$n)) | sort -n >>newfile.txt 
```

现在您可以对文件进行同样的排序。

如果您**真的**想按字母顺序然后按数字排序，那么我会 grep 将以文本开头的行抓取到一个文件中，将以数字开头的行 grep 到第二个文件中，分别对它们进行排序，然后合并。希望有帮助。

# python - 多对多 django sql

> ID：15842326
> 
> 赞同：1
> 
> 时间：2013-04-05T19:48:28.883
> 
> 标签：python, sql, django, django-queryset

我有一个模型用户配置文件，作为与另一个名为技能的表的多对多关系我还有一个模型组，它与另一个名为技能的表的多对多关系

我想做一个查询，计算用户配置文件与每个组共有的技能数量。

我还想进行查询，以计算特定用户配置文件与其他用户配置文件共同拥有的技能数量

有人可以帮我做到这一点。谢谢

型号：

```
class UserProfile(models.Model):    
    slug = models.SlugField(max_length=200)
    user = models.ForeignKey(User, unique =True)
    skills = models.ManyToManyField(Skills,null=True, blank=True)
    courses = models.ManyToManyField(Course,null=True, blank=True)

class Group(models.Model):
    slug = models.SlugField(max_length=200)
    name = models.CharField(max_length=200)
    skills = models.ManyToManyField(Skills,null=True, blank=True)

class Skills(models.Model):
    slug = models.SlugField(max_length=200)
    name = models.CharField(max_length=200) 
```

所以我找到了一种方法来为团体做这件事

```
groupRecommendation = Group.objects.extra(
select={
    'skills_count': """
     SELECT COUNT(*) FROM axiom_alto_userprofile_skills
     JOIN axiom_alto_group_skills on axiom_alto_userprofile_skills.skills_id = axiom_alto_group_skills.skills_id
     WHERE axiom_alto_group_skills.group_id= axiom_alto_group.id AND axiom_alto_userprofile_skills.userprofile_id = %d """ % profile.id,

},

).order_by('-skills_count') 
```

但我不知道如何在用户之间做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:10:46.480

您的第一个查询是针对特定用户配置文件计算用户与每个组共享的技能数量。在您的帖子中，您展示了一种使用子查询的方法。但是，在某些数据库中，子查询的性能比联接差得多，因此您可能有兴趣了解如何使用联接而不是子查询来获得相同的结果：

```
SELECT G.id, G.slug, G.name, COUNT(GS.id) AS skills_count
FROM axiom_alto_group G
INNER JOIN axiom_alto_userprofile_skills US
  ON US.userprofile_id = %s
LEFT OUTER JOIN axiom_alto_group_skills GS
  ON GS.group_id = G.id AND US.skills_id = GS.skills_id
GROUP BY G.id, G.slug, G.name
ORDER BY skills_count DESC 
```

在 Django 中，您可以使用模型上的[原始 SQL 查询](https://docs.djangoproject.com/en/dev/topics/db/sql/)`Group`来运行它：

```
Group.objects.raw(''' ... SQL as above ... ''', [profile.id]) 
```

现在应该很容易看到如何执行您的第二个查询。也就是说，对于特定的用户配置文件，计算用户与其他用户共享的技能数量：

```
SELECT U.id, U.slug, U.user, COUNT(US2.id) AS skills_count
FROM axiom_alto_userprofile U
INNER JOIN axiom_alto_userprofile_skills US1
  ON US1.userprofile_id = %s
LEFT OUTER JOIN axiom_alto_userprofile_skills US2
  ON US2.userprofile_id = U.id AND US2.skills_id = US1.id
GROUP BY U.id, U.slug, U.user
ORDER BY skills_count DESC 
```

同样，在 Django 中，您可以使用原始 SQL 查询运行它，这次是在`UserProfile`模型上：

```
UserProfile.objects.raw(''' ... SQL as above ... ''', [profile.id]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:36:00.283

```
groupRecommendation = Group.objects.extra(
    select={
    'skills_count': """
     SELECT COUNT(*) FROM axiom_alto_userprofile_skills
     JOIN axiom_alto_group_skills on axiom_alto_userprofile_skills.skills_id = axiom_alto_group_skills.skills_id
     WHERE axiom_alto_group_skills.group_id= axiom_alto_group.id AND axiom_alto_userprofile_skills.userprofile_id = %d """ % profile.id,
    },
).order_by('-skills_count') 
```

# android - Android Intent.ACTION_CALL, Uri

> ID：15842328
> 
> 赞同：12
> 
> 时间：2013-04-05T19:48:31.837
> 
> 标签：android, android-intent

我正在尝试使用 Intent.Action 类。我知道如何使用 ACTION_VIEW 来显示 URL，但我想`Intent.ACTION_DIAL`在应用程序启动时使用 to call number。文档说您需要将 URI 解析为字符串，然后将其添加到 Intent 我试过这个：

```
Uri call = Uri.parse("7777777777");             
Intent surf = new Intent(Intent.ACTION_DIAL, call); 
startActivity(surf); 
```

这不起作用我收到一条错误消息：

不幸的是，Project 已停止。我试图调试代码，它似乎指向我的意图线，如果我只是这样做，我不确定我做错了什么，它可以工作并调出拨号器。

```
//Uri call = Uri.parse("7777777777");               
Intent surf = new Intent(Intent.ACTION_DIAL);   
startActivity(surf); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-05T20:27:08.603

[tel](http://developer.android.com/reference/android/content/Intent.html)

```
String number = "23454568678";
Intent intent = new Intent(Intent.ACTION_CALL);
intent.setData(Uri.parse("tel:" +number));
startActivity(intent); 
```

Use Permission

```
<uses-permission android:name="android.permission.CALL_PHONE"></uses-permission> 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-12-17T09:46:56.130

只需打开拨号器应用程序（用户必须按下拨号器应用程序内的通话按钮；不需要额外的权限）使用：

```
String number = "7777777777";
Uri call = Uri.parse("tel:" + number);             
Intent surf = new Intent(Intent.ACTION_DIAL, call); 
startActivity(surf); 
```

要打开拨号器应用程序并自动拨打电话（需要 android.permission.CALL_PHONE），请使用：

```
String number = "7777777777";
Uri call = Uri.parse("tel:" + number);             
Intent surf = new Intent(Intent.ACTION_CALL, call); 
startActivity(surf); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-03T11:56:15.887

尝试这个

```
String url="tel:777777777"
if (url.startsWith("tel:")) { 
  Intent intent = new Intent(Intent.ACTION_DIAL,
  Uri.parse(url)); 
  startActivity(intent);
} 
```

将此添加到您的 AndroidManifest.xml 文件中

```
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-01-03T12:27:56.553

也试试这个

```
Intent intent=new Intent(Intent.ACTION_CALL,Uri.parse("tel:"+phno);
startActivity(intent); 
```

安卓清单

```
<uses-permission android:name="android.permission.CALL_PHONE"></uses-permission> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-17T08:58:28.920

尝试这个

```
String no = "536171839";
Intent callintent = new Intent(android.intent.action.CALL);
callintent.setData(Uri.parse("tel:" +no));
startActivity(callintent); 
```

将此添加到您的 AndroidManifest.xml 文件中

```
 <uses-permission android:name="android.permission.CALL_PHONE"></uses-permission> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-06-18T14:54:48.703

另一种方法是使**PendingIntent**稍后调用。当您想将用户直接从通知操作重定向到电话呼叫时，这是特别有用的。

```
String number = "551191111113";
Intent intent = new Intent(Intent.ACTION_CALL);
intent.setData(Uri.parse("tel:" +number));
PendingIntent pendingIntentForCall = PendingIntent.getActivity(mContext, 0 /* Request code */, intent,PendingIntent.FLAG_ONE_SHOT); 
```

您可以在通知中使用它，如下所示：

```
 Uri defaultSoundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
        NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(mContext)
                .setContentTitle(title)
                .setContentText(message)
                .setStyle(new NotificationCompat.BigTextStyle().bigText(message))
                .setTicker(tickerText)
                .setColor(Color.BLACK)
                .setLargeIcon(BitmapFactory.decodeResource(mContext.getResources(), R.mipmap.ic_directions_bus_white_48dp))
                .setSmallIcon(R.mipmap.ic_directions_bus_white_24dp)
                .setAutoCancel(true)
                .setSound(defaultSoundUri)
                .addAction(new NotificationCompat.Action(R.mipmap.ic_directions_bus_white_24dp,"Call to " + number,pendingIntentForCall)); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-08-12T13:21:02.807

尝试这个 ：

```
String toCall = "tel:" + number.getText().toString();

startActivity(new Intent(Intent.ACTION_DIAL,

Uri.parse(toCall))); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-03-30T06:40:32.350

如果你添加了

```
 <uses-permission android:name="android.permission.CALL_PHONE" /> 
```

检查您的应用程序的电话呼叫权限。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-23T23:20:01.977

对于 ACTION_DIAL，您只需要创建 Intent 对象，将该操作作为第一个参数，将 Uri 对象作为第二个参数，该参数由写为字符串的电话号码构建。之后只需调用`startActivity()`方法并将先前创建的意图对象作为参数传递。例如：

```
private String phoneNumber = "123456";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button dial_number = findViewById(R.id.button);
    dial_number.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            Intent intent = new Intent(Intent.ACTION_DIAL, Uri.parse("tel:" + phoneNumber));
            startActivity(intent);
        }
    });
} 
```

# php - 为具有不同 URL PHP 的两个不同浏览器选项卡打开相同的引用 URL

> ID：15842336
> 
> 赞同：0
> 
> 时间：2013-04-05T19:49:14.077
> 
> 标签：php, url, http-referer

流动：

```
- user visits a page say www.mysite.com/somepage/1
- user clicks on Log Out button or times out and logs out
   *user log out detected redirect to home page but save the referer URL
   *redirect to /login?ref=$_SERVER['HTTP_REFERER'] (actual code test if its set)
- user sees login page and relogs back
- user is redirected back to refere url that is saved in $_GET['ref'] 
```

aboe 流程非常适合**第一个浏览器选项卡**，如果用户打开了多个选项卡`$_GET['ref']`，则设置为为第一个选项卡设置的相同 URL。例如：

**例子：**

```
 Tab 1 : /somepage/hello/world
  Tab 2: /another/page/1 
```

**当用户从Tab 1**注销时被重定向到：

`/login?ref=http://site.com/somepage/hello/world (CORRECT)`

**如果用户刷新选项卡 2**上的页面，则会重定向到：

```
/login?ref=http://site.com/somepage/hello/world 
   NOT CORRECT, IT SHOULD REDIRECT TO: 
/login?ref=http://site.com/another/page/1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:41:56.267

不要重定向到任何地方。在用户已经使用的同一 URL 上处理重新登录过程。这将保持每个选项卡和浏览器窗口的 URL 不变。

# sql - 全外连接 - 将输出保存在新表中

> ID：15842337
> 
> 赞同：2
> 
> 时间：2013-04-05T19:49:16.333
> 
> 标签：sql, sqlite

我有两张表，我正试图加入一张。

我成功运行了以下代码。

```
SELECT * FROM combined
LEFT OUTER JOIN isbn_price
ON combined.isbn13 = isbn_price.isbn; 
```

我的问题是如何将此输出保存到新表中？或者甚至将 isbn_price 中的连接列附加到组合表中？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T19:54:53.303

要动态创建表：

```
SELECT * 
INTO NewTable
FROM combined
LEFT OUTER JOIN isbn_price
ON combined.isbn13 = isbn_price.isbn; 
```

# microdata - 带有产品网格的微数据

> ID：15842338
> 
> 赞同：0
> 
> 时间：2013-04-05T19:49:19.693
> 
> 标签：microdata

我有产品网格。网格中的每个产品行都可以扩展以显示完整的产品详细信息（使用 Ajax 完成）。下面的示例显示了我如何将微数据实现到网格中（不是完整的产品详细信息）。相同的微数据在页面中一遍又一遍地重复这是最好的方法吗？

```
<tbody>
        @foreach (var product in Model)
        {

            <tr itemscope itemtype="http://schema.org/Product" class="tr_prod" style="height:105px;" productid="@product.Id" optionid="@product.OptionId" shopcityid="@product.ShopCityId">
                <td>
                    <div class="prod_img_small">
                        <img class="preview" src="@Url.Content("~/Files/Products/" + product.ImgFileName)" />
                    </div>
                </td>
                <td itemprop="name">                       
                    <b>@product.Name</b>
                </td>
                <td>
                    <div itemprop='productID'>                           
                        <b>@product.Id</b>
                    </div>
                </td>

                <td>
                    <div itemscope itemprop="priceSpecification" itemtype="http://schema.org/DeliveryChargeSpecification">

                        <b><span itemprop="price">@product.DeliveryPrice</span></b>
                    </div>
                </td>
                <td>                       
                    <b>@product.ProductPrice</b>
                </td>
                <td>

                    <b>@product.TotalPrice </b>
                </td>

            </tr>    
        }
    </tbody> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:41:39.027

对我来说看起来有效。一些 itemscopes 甚至可以提升为`<TD>`like `priceSpecification`。

当然，所有使用 AJAX 添加的元数据都不会显示给蜘蛛，所以这是需要考虑的事情。

您还可以将元数据添加到页面以表明它是产品的集合。

```
<body itemscope itemtype="http://schema.org/CollectionPage">
  ...
</body> 
```

# ruby-on-rails - 让 nokogiri 使用更新版本的 libxml2

> ID：15842346
> 
> 赞同：6
> 
> 时间：2013-04-05T19:50:01.250
> 
> 标签：ruby-on-rails, ruby, rspec, nokogiri, libxml2

我一直在尝试在我的计算机（Mountain Lion）上安装 Nokogiri 以与 rspec 和 capybara 一起使用，但对于我的生活，我无法让它正常运行。

据我所知，问题在于 nokogiri 使用了错误版本的 libxml2。到目前为止，我已经尝试使用 Homebrew 卸载和重新安装 libxml2（确保它是最新的），使用 bundle 卸载和重新安装 nokogiri，并指定 Homebrew 在安装 nokogiri gem 时安装的 libxml2 文件的确切路径。我最近的安装说明是这样的

```
sudo gem install nokogiri -- --with-xml2-include=/usr/local/Cellar/libxml2/2.9.0/include/libxml2 --with-xml2-lib=/usr/local/Cellar/libxml2/2.9.0/lib --with-xslt-dir=/usr/local/Cellar/libxslt/1.1.28 
```

所有这些位置都正确对应于安装工具的位置。但是，在运行时`bundle exec rspec spec/requests/static_pages.rb`，我仍然得到以下输出：

```
/Users/alex/.rvm/gems/ruby-1.9.3-p286/gems/nokogiri-1.5.9/lib/nokogiri.rb:28:in `require': dlopen(/Users/alex/.rvm/gems/ruby-1.9.3-p286/gems/nokogiri-1.5.9/lib/nokogiri/nokogiri.bundle, 9): Library not loaded: /usr/local/lib/libxml2.2.dylib (LoadError)
Referenced from: /Users/alex/.rvm/gems/ruby-1.9.3-p286/gems/nokogiri-1.5.9/lib/nokogiri/nokogiri.bundle
Reason: Incompatible library version: nokogiri.bundle requires version 12.0.0 or later, but libxml2.2.dylib provides version 10.0.0 - /Users/alex/.rvm/gems/ruby-1.9.3-p286/gems/nokogiri-1.5.9/lib/nokogiri/nokogiri.bundle
    from /Users/alex/.rvm/gems/ruby-1.9.3-p286/gems/nokogiri-1.5.9/lib/nokogiri.rb:28:in `<top (required)>'
    from /Users/alex/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.3.4/lib/bundler/runtime.rb:72:in `require'
    from /Users/alex/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.3.4/lib/bundler/runtime.rb:72:in `block (2 levels) in require'
    from /Users/alex/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.3.4/lib/bundler/runtime.rb:70:in `each'
    from /Users/alex/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.3.4/lib/bundler/runtime.rb:70:in `block in require'
    from /Users/alex/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.3.4/lib/bundler/runtime.rb:59:in `each'
    from /Users/alex/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.3.4/lib/bundler/runtime.rb:59:in `require'
    from /Users/alex/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.3.4/lib/bundler.rb:132:in `require'
    from /Users/alex/Sites/harbingernews/config/application.rb:7:in `<top (required)>'
    from /Users/alex/Sites/harbingernews/config/environment.rb:2:in `require'
    from /Users/alex/Sites/harbingernews/config/environment.rb:2:in `<top (required)>'
    from /Users/alex/Sites/harbingernews/spec/spec_helper.rb:3:in `require'
    from /Users/alex/Sites/harbingernews/spec/spec_helper.rb:3:in `<top (required)>'
    from /Users/alex/Sites/harbingernews/spec/requests/static_pages_spec.rb:1:in `require'
    from /Users/alex/Sites/harbingernews/spec/requests/static_pages_spec.rb:1:in `<top (required)>'
    from /Users/alex/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.9.0/lib/rspec/core/configuration.rb:746:in `load'
    from /Users/alex/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.9.0/lib/rspec/core/configuration.rb:746:in `block in load_spec_files'
    from /Users/alex/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.9.0/lib/rspec/core/configuration.rb:746:in `map'
    from /Users/alex/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.9.0/lib/rspec/core/configuration.rb:746:in `load_spec_files'
    from /Users/alex/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.9.0/lib/rspec/core/command_line.rb:22:in `run'
    from /Users/alex/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.9.0/lib/rspec/core/runner.rb:69:in `run'
    from /Users/alex/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.9.0/lib/rspec/core/runner.rb:10:in `block in autorun' 
```

我已经尝试了我在网上找到的所有步骤（大多数参考构建和加载不同版本的 libxml2，比如[这个](https://gist.github.com/devpuppy/1349681)，但还没有成功。我的 Gemfile 和 Gemfile.lock 可以在[这里](https://gist.github.com/alexlafroscia/2c4afff360552a2e6dd9)找到。如果有人可以帮忙我完全没有，我真的很感激。我无法在网上找到任何其他有此问题的案例。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-05-10T18:40:04.077

在 Mavericks 中，在安装 gem 之前安装库`brew`并设置对我来说是诀窍。`NOKOGIRI_USE_SYSTEM_LIBRARIES=1`

总结：

*   如果以前安装过，请卸载 gem：
    `$ gem uninstall nokogiri`

*   使用 Homebrew 安装`libxml2`，`libxslt`并且`libiconv`：
    `$ brew install libxml2 libxslt libiconv`

*   安装 gem 指定要链接的库的路径：
    `$ NOKOGIRI_USE_SYSTEM_LIBRARIES=1 gem install nokogiri -- --use-system-libraries --with-iconv-dir="$(brew --prefix libiconv)" --with-xml2-config="$(brew --prefix libxml2)/bin/xml2-config" --with-xslt-config="$(brew --prefix libxslt)/bin/xslt-config"`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-10-08T09:46:48.387

这有助于我更新 libxml 并正确安装 nokogiri ...

1.  gem 卸载 nokogiri libxml-ruby
2.  酿造更新
3.  冲泡卸载libxml2
4.  brew install libxml2 --with-xml2-config
5.  酿造链接--force libxml2
6.  冲泡安装 libxslt
7.  酿造链接--force libxslt
8.  捆绑配置 build.nokogiri -- --with-xml2-dir=/usr --with-xslt-dir=/opt/local --with-iconv-dir=/opt/local
9.  捆绑安装

这是来源：[http ://www.kormoc.com/2013/12/22/nokogiri-libxml2/](http://www.kormoc.com/2013/12/22/nokogiri-libxml2/)

希望这可以帮助某人...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-06T05:37:10.620

为了清楚起见，Phrogz 的评论帮助了我很多。我按照他链接的说明进行操作，[*如果 libxml2 是个混蛋怎么办？*](https://github.com/sparklemotion/nokogiri/wiki/What-to-do-if-libxml2-is-being-a-jerk)Nokogiri 的 Github 页面上的页面。我最终使用了 Macports 而不是 Homebrew，我不确定这是否是造成差异的原因（我已经尝试了许多这些步骤），但不管怎样，它现在似乎工作正常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-01T20:18:34.260

当我遇到问题时，在升级 OsX 后用谷歌搜索了这个问题：

`require': dlopen(/Users/tomi/.rvm/gems/ruby-2.1.1@my-gemset/extensions/x86_64-darwin-12/2.1.0-static/nokogiri-1.5.10/nokogiri/nokogiri.bundle, 9): Library not loaded: /usr/local/opt/libxml2/lib/libxml2.2.dylib (LoadError)`

这对我有用

`brew uninstall libxml2 libxslt libiconv brew install libxml2 libxslt libiconv`

# dll - 将 WinForms 项目从 VS2005 升级到 VS2012。现在我的 ReportViewer DLL 丢失了

> ID：15842354
> 
> 赞同：1
> 
> 时间：2013-04-05T19:50:40.223
> 
> 标签：dll, visual-studio-2012, visual-studio-2005, reportviewer

我从朋友那里得到了一份 Visual Studio 2005 项目的副本。该项目引用了 DLL Microsoft.ReportViewer.Common 和 Microsoft.ReportViewer.WinForms。在我的机器上，我有 Visual Studio 2012。我升级了项目。可以理解，对这些 DLL 的引用被破坏了，因为它们是 Windows 位置，而不是在 VS 项目中。所以，我想删除引用并重新创建，但我在我的机器上找不到 DLL。他们没有安装 Visual Studio 2012 吗？我可以下载它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T22:23:58.460

> 我从朋友那里得到了一份 Visual Studio 2005 项目的副本

这解释了问题，您项目的目标 .NET 版本是 2.0。VS2012 附带的 ReportViewer 至少需要 3.5。

使用项目 + 属性、应用程序选项卡、目标框架组合框修复它。然后，您将在工具箱的“报告”标题下找到 ReportViewer 控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:56:07.170

您可以尝试使用[Visual Studio 2010 的 Redistributable 包](http://www.microsoft.com/en-us/download/details.aspx?id=6442)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T19:56:36.857

这些已被报表服务器取代。尽管如果您从 VS2005 机器上复制它们，您仍然应该能够在解决方案中将它们用作二进制引用。您可以[从 MSDN 下载站点下载二进制文件](http://www.microsoft.com/en-us/download/details.aspx?id=21916)。

[尽管Visual Studio 2012](http://www.microsoft.com/en-us/download/details.aspx?id=35747)也应该有二进制文件。我怀疑它们会在您安装[SQL Server Development tools](http://blogs.msdn.com/b/sqlrsteamblog/archive/2013/03/06/sql-server-data-tools-business-intelligence-for-visual-studio-2012-released-online.aspx)时安装，其中包括 SQL Server Reporting Server 组件。

# javascript - 如果未登录，Facebook 重定向

> ID：15842359
> 
> 赞同：2
> 
> 时间：2013-04-05T19:50:50.487
> 
> 标签：javascript, facebook, redirect

我正在使用 Facebook Auth，如果用户未登录或他们没有授权我的应用程序，我正在尝试添加从内部页面到登录页面的自动重定向，并且该部分工作正常。我遇到的问题是，当您到达 index.php 时，它会再次将您重定向到 index.php，并且无限次。我已经尝试了很多东西，比如 if (location.href == "index.php") 什么都不做，否则重定向，但我尝试的任何方法都不起作用。

```
FB.getLoginStatus(function(response) {
if (response.status === 'connected') {
    var uid = response.authResponse.userID;
    var accessToken = response.authResponse.accessToken;
  } else if (response.status === 'not_authorized') {
    window.location = "index.php";
  } else {
    window.location = "index.php";
  }
}); 
```

# ios - 连续使用三个 NSURLConnections 会导致第三次调用挂起

> ID：15842361
> 
> 赞同：0
> 
> 时间：2013-04-05T19:51:04.533
> 
> 标签：ios, nsurlconnection

我遇到了一个非常奇怪的 NSURLConnection 问题。我有一个控制器，它使用以下函数在 viewDidLoad 方法中发出三个异步 GET 请求：

```
+ (void)connectAsyncWithURL:(NSURL *)url httpMethod:(NSString *)httpMethod delegate:(id <NSURLConnectionDelegate>)delegate timeout:(NSTimeInterval)timeout
{
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:timeout];
    [request setHTTPMethod:httpMethod];
    [NSURLConnection connectionWithRequest:request delegate:delegate];
} 
```

前两个连接按预期工作。然而，第三个挂起，直到发生超时。失败后重试会导致调用成功。请求的顺序似乎并不重要——总是最后一个调用失败的那个。我拥有正在向其发出请求的服务器，并且观察传入的网络流量向我显示了前两个请求，但在初始超时之前，第三个 NSURLConnection 不会出现第三个请求。更奇怪的是，在超时发生后，如果我离开控制器并再次返回，则在我重新启动应用程序之前，问题不再重现。

有谁知道是什么原因造成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T19:54:27.053

一些服务器会将来自单个客户端的同时连接数限制为两个。如果是这种情况，那么前两个连接将成功，而第三个连接将挂起，直到前两个连接之一完成。听起来这可以解释你所看到的。

# jetty - 在 Virgo/OSGi/Jetty 环境中选择默认的 Artifact/Bundle 以显示“/”

> ID：15842362
> 
> 赞同：1
> 
> 时间：2013-04-05T19:51:10.113
> 
> 标签：jetty, osgi, eclipse-virgo

抱歉，如果这有点笨拙，但我从来没有做过 Jetty 配置，更不用说在 OSGi 环境中了。

我将`/ui/dcx/`默认显示特定的 URL。我查看了为 Jetty 和 Virgo 找到的所有配置文件，但没有看到此默认配置的位置。

它总是重定向`http://localhost:9080`到`http://localhost:9080/splash`. 我什至尝试从拾取目录中删除启动包，但重定向仍然发生。

有谁知道默认 URL 或默认捆绑包的设置在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:19:14.320

查看 Virgo 服务器，似乎 /pickup/org.eclipse.virgo.apps.splash-3.5.0.RELEASE.jar 绑定到 '/' 的 contextRoot (Web-ContextPath: /) 并且`welcome-file`web.xml 的元素是绑定到 index.html，而 index.html 又对“/splash”进行了元刷新。

因此，要将其更改为`/ui/dcx/`您需要删除启动包并将您的包绑定到 contextRoot '/'，然后依次遵循启动包使用的相同方法。

# html - 如何使图像更改以显示它被按下？

> ID：15842364
> 
> 赞同：0
> 
> 时间：2013-04-05T19:51:14.163
> 
> 标签：html, css, image, mobile, mobile-safari

我正在开发一个移动投标系统的项目。我正在设计它的前端并且遇到了我正在使用的两个按钮的问题。有两个按钮： 1) 加价；2) 投标。现在这里说的是我的代码

```
<input class="btnraise" type="image" src="bidraise.png" onclick="raiseBid();"/>
<input class="btnbid" type="image" src="mobilebid.png" onclick="Bid();"/ 
```

这很好用。除了首席执行官希望按钮能够相互缠绕。加注按钮是一个底部凹入的三角形，其中一个圆形的出价按钮几乎贴合到三角形的凹入底部。（不确定这是否有意义）几乎就像一个倒置在发球台上的高尔夫球。这是我用来让它们几乎接触的 CSS：

```
.btnbid{
width:250px;
position:relative;
top:-79px;
}

.btnraise{
width:230px;
} 
```

无论如何，当它们被按下时，我需要让这些按钮发生变化（就像它们缩进一样）。所以我这样做了：

```
<input class="btnraise" type="image" src="bidraise-up.png" onmousedown="this.src='bidraise-down.png'" onmouseup="this.src='bidraise-up.png'" onclick="raiseBid();"/>
<input class="btnbid" type="image" src="mobilebid-up.png" onmousedown="this.src='mobilebid-down.png'" onmouseup="this.src='mobilebid-up.png'" onclick="Bid();"/> 
```

这在 PC 上工作得很好......但它在移动设备上效果不佳。我可以使用的设备是第 3 代或第 4 代 iPod Touch。它不会因为没有鼠标而改变……我没想到是这样的吧？

所以我搜索了一下，发现了一些可能有用的东西。诸如将输入类型从更改为`image`，`button`但随后它们排列不正确。我丢失了位于三角形凹入部分内的圆形投标图像。所以我在想，如果我只是在事件中添加两个事件，`onclick`那么它会起作用，所以我尝试了这个：

```
<input class="btnbid" type="image" src="mobilebid-up.png" onclick="this.src='mobilebid-down.png'; Bid();this.src='mobilebid-up.png';"/> 
```

这并没有改变手机的图像。有任何想法吗？我是否需要对此采取不同的方法，或者对移动网站的影响有什么不同？

**回答：**

这就是我所做的：1）添加了 id="btnbid" 2）添加了 ontouchstart 事件 3）添加了 ontouchend 事件

```
<input id="btnbid" class="btnbid" type="image" src="mobilebid-up.png" ontouchstart="touchStart()" ontouchend="touchEnd()"/> 
```

然后我把它放在脚本标签中：

```
var btnbid = document.getElementById('btnbid');
btnbid.addEventListener('touchstart', toucchStart, false);
btnbid.addEventListener('touchend', touchEnd, false);

function touchStart( event ) {  
document.getElementById("btnbid").src="mobilebid-down.png";  
 return false;  
} 
function touchEnd( event ) {  
document.getElementById("btnbid").src="mobilebid-up.png";  
return false;  
} 
```

这给了我想要的效果！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:54:48.517

你应该尝试`onTouch()`而不是`onclick`

# html - 是否可以使用 MATLAB 的发布命令来布局这个 HTML 表 + 自定义树状图？

> ID：15842368
> 
> 赞同：0
> 
> 时间：2013-04-05T19:51:32.670
> 
> 标签：html, matlab, visualization, matlab-figure, dendrogram

我想整理一个更值得出版（也更容易制作）的图表版本，我在下面一起破解了：

![拼凑图](https://i.stack.imgur.com/89n06.png)

基本上，它是一个由两部分组成的插图，左侧是 HTML 表（显示来自不同参数的不同集群分配），右侧是修改后的*树状*图。

我猜从快照中我想添加到情节中的内容很明显......基本上它可能是一组水平的堆叠条，显示不同的参数如何将观察分组到不同的集群中。我在手工绘制这些时使用括号和簇编号，但是任何强调正确观察编号的东西都是可以接受的。

我意识到这个问题有两个部分：当其中一个面板是 HTML 而不是图形时，如何获得二合一布局，以及如何修改绘图。[如果这里只回答了一部分，我可以在另一个问题中询问另一部分。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:12:20.517

`line`您可以使用和标记您的情节`text`。您需要将该`clipping`属性设置为`off`以使线条显示在轴之外。这是一个例子：

```
data = [1,3,4,5; 2,6,7,8; 9,3,7,4;3,8,5,2];
tree = linkage(data,'average');
figure()
dendrogram(tree)
set(gca,'Position',[0.13, 0.3,0.775, 0.65])

h1 = line([1,1],[4,4.8],'Color','k');
h2 = line([1,3],[4,4],'Color','k');
h3 = line([3,3],[4,4.8],'Color','k');
set(h1,'Clipping','off')
set(h2,'Clipping','off')
set(h3,'Clipping','off')

ht = text(1.7,3.9,'Label'); 
```

# jquery - jQuery .on() 不工作，而 .live() 很好

> ID：15842370
> 
> 赞同：0
> 
> 时间：2013-04-05T19:51:47.997
> 
> 标签：jquery

我有这个：

```
$("#socialsLogin").on("click", function() {
    var login = $("#socialsLoginField").val();
    var passwd = $("#socialsPasswordField").val();
    SocialsStart(login, password);
}); 
```

还有这个：

`<a href="javascript:void(0)" id="socialsLogin" class="button">Disconnected</a>`

而且我的点击事件没有触发 - 我做错了什么？如果我用 .live() 更改 .on()，一切正常。但我不想使用 .live() 因为它已被弃用（是的，我使用的是 jquery 1.9）

**编辑：**它不是重复的。当我使用`$(document).on("click", "#socialsLogin", function() {`它时，它可以在页面上的任何地方使用——我可能会单击图像并启动它。绝对不是预期的那样。而且`$(document.body).on("click", "#socialsLogin", function() {`对我根本不起作用。

**Edit2：**这是我的小提琴：http: [//jsfiddle.net/JeDLW/1/](http://jsfiddle.net/JeDLW/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:52:32.290

要替换`live`，请`on`像这样使用：

```
 $(document.body).on("click", "#socialsLogin", function() { 
```

jQuery 集合接收事件，然后将其委托给与作为参数给出的选择器匹配的元素。这意味着与使用时相反，`live`执行代码时必须存在 jQuery 集合元素。

请注意，此绑定代码应在`ready`回调中执行：

```
$(function() {
     $(document.body).on("click", "#socialsLogin", function() {
         ...
     });
}); 
```

**编辑 ：**

正如我所怀疑的那样，您的小提琴表明您使用了多个带有 id 的元素`"socialLogin"`。那就是问题所在。更改字段集的 ID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T19:52:39.970

试试这样：

```
$(document).on("click", "#socialsLogin", function() {
    var login = $("#socialsLoginField").val();
    var passwd = $("#socialsPasswordField").val();
    SocialsStart(login, password);
}); 
```

或者你可以简单地使用这个：

```
$("#socialsLogin").click(function () {
    var login = $("#socialsLoginField").val();
    var passwd = $("#socialsPasswordField").val();
    SocialsStart(login, password);
}); 
```

# xcode - 使用情节提要在 UITableView 中显示 plist 时出现问题？(Xcode)

> ID：15842373
> 
> 赞同：1
> 
> 时间：2013-04-05T19:52:14.353
> 
> 标签：xcode, uitableview, plist

我以前在另一个项目上做过这个，然后让它工作，但我不知道为什么我的这段程序不起作用。它显示没有任何 plist 数据的表格。请看一下我的代码，看看你是否能发现我犯了错误的地方，谢谢。

```
#import "MarketViewController.h"
#import "SecondViewController.h"
#import "ECSlidingViewController.h"
#import "MenuViewController.h"

@interface MarketViewController ()

@end

@implementation MarketViewController
@synthesize shares, shareValues, number, shareName;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {

    }
    return self;
}

- (void)viewDidLoad
{

    self.navigationItem.title = @"Stock Market";
    NSString *sharesFile = [[NSBundle mainBundle] pathForResource:@"Shares" ofType:@"plist"];

    shares = [[NSDictionary alloc] initWithContentsOfFile: sharesFile];
    shareValues = [shares objectForKey:@"Share Values"];
    shareName = [shares objectForKey:@"Share Names"];

    [super viewDidLoad];
    // Do any additional setup after loading the view.

    self.view.layer.shadowOpacity = 0.75f;
    self.view.layer.shadowRadius = 10.0f;
    self.view.layer.shadowColor = [UIColor blackColor].CGColor;

    if (![self.slidingViewController.underLeftViewController isKindOfClass:[MenuViewController class]]) {
        self.slidingViewController.underLeftViewController  = [self.storyboard instantiateViewControllerWithIdentifier:@"Menu"];
    }

    [self.view addGestureRecognizer:self.slidingViewController.panGesture];

    self.menuBtn = [UIButton buttonWithType:UIButtonTypeCustom];
    _menuBtn.frame = CGRectMake(8, 10, 34, 24);
    [_menuBtn setBackgroundImage:[UIImage imageNamed:@"menuButton.png"] forState:UIControlStateNormal];
    [_menuBtn addTarget:self action:@selector(revealMenu:) forControlEvents:UIControlEventTouchUpInside];

    [self.view addSubview:self.menuBtn];

}

//Table View

- (NSInteger) numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [shares count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
{
    static NSString *cellIdentifier = @"cell";
    UITableViewCell * cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];
    }

    NSString *nameOfShare = [shareName objectAtIndex:[indexPath row]];
    NSString *valueOfShare = [shareValues objectAtIndex:[indexPath row]];
    cell.detailTextLabel.text = valueOfShare;
    cell.textLabel.text = nameOfShare;
    return cell;
    self.title = @"Stock Market";

}

- (IBAction)revealMenu:(id)sender
{
    [self.slidingViewController anchorTopViewTo:ECRight];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

我的h。文件如下：

```
#import <UIKit/UIKit.h>

@interface MarketViewController : UIViewController
<UITableViewDataSource, UITableViewDelegate>

@property (strong, nonatomic) UIButton *menuBtn;
@property (nonatomic, readonly) NSDate *CurrentDate;
@property (nonatomic, strong) NSDictionary *shares;
@property (nonatomic, strong) NSArray *shareValue;
@property (nonatomic, strong) NSArray *number;
@property (nonatomic, strong) NSArray *shareName;
- (NSString*)filePath;
- (void)openDB;

@end 
```

# javascript - 使用 javascript 的 Autotab 输入

> ID：15842375
> 
> 赞同：1
> 
> 时间：2013-04-05T19:52:30.167
> 
> 标签：javascript

当达到最大长度时，我有 3 个输入需要跳到下一个。这 3 个输入带有值，当用户更改第一个输入的值时，它会关注下一个输入，依此类推。

我的问题是，由于我的第二个输入已经具有跳到第三个输入的长度。如果用户缓慢输入值，则不会这样做。

问题的根源在于，如果输入速度太快，第一个 keyup 事件会在第二个类型之后触发，并在第二个输入上触发。

我已经为这个问题写了一个[jsfiddle](http://jsfiddle.net/pvXuS/4/)，这是我连接自动焦点更改的函数。

```
 function WireAutoTab(CurrentElement, NextElement) {
    CurrentElement.keyup(function (e) {
        //Retrieve which key was pressed.
        var KeyID = (window.event) ? event.keyCode : e.keyCode;
        var FieldLength = CurrentElement.attr('maxlength');

        //If the user has filled the textbox to the given length and
        //the user just pressed a number or letter, then move the
        //cursor to the next element in the tab sequence.   
        if (CurrentElement.val().length >= FieldLength && ((KeyID >= 48 && KeyID <= 90) || (KeyID >= 96 && KeyID <= 105)))
            NextElement.focus();
    });
} 
```

是否有任何其他事件可以用来防止这种情况发生？我想要的行为是，即使第二个输入有值，它也会停止。

# mysql - 在 Rails 中存储与帖子关联的数据数组的最佳方法

> ID：15842377
> 
> 赞同：0
> 
> 时间：2013-04-05T19:52:38.930
> 
> 标签：mysql, ruby-on-rails, ruby

所以我有一个 MySQL 驱动的 Rails 应用程序，它有一个帖子模型，我希望每个帖子都有一个与之关联的关键字列表。关键字非常具体，一个关键字在两个帖子之间共享是非常罕见的。

这里有三个选项：

1.  “关键字”属性中的逗号分隔列表
2.  在“关键字”属性中有一个序列化数组
3.  建立关键字模型并将每个关键字存储在自己的记录下，并将它们与具有 ID 的帖子相关联

哪个是最好的解决方案，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:11:50.787

四。[ActsAsTaggableOn](https://github.com/mbleigh/acts-as-taggable-on)。

关键字/标签非常有用，您会想一遍又一遍地使用它们。当好的轮子免费躺在那里时，你只是在重新发明一个轮子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T20:33:26.283

如果您想搜索标签，3，否则您将不得不或实例化搜索中的每个对象，或者执行类似 SQL 的查询，这将非常难看。

如果您不想查询标签，请将其序列化以使其可读并避免为此而使用表（和急切加载）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T20:32:43.380

一般来说，决定取决于您计划使用此关键字列表的目的。如果您打算对多条记录进行任何类型的聚合，将其放入单个属性（序列化或逗号）将使您的生活变得艰难。如果不是简单的总是一个不错的选择。

正如@Mori ActsAsTaggable 所提到的，尽管它最适合共享关键字（标签），但它是一个不错的选择。

# html - 使用css更改不透明度并在悬停时添加缩略图

> ID：15842385
> 
> 赞同：0
> 
> 时间：2013-04-05T19:53:05.387
> 
> 标签：html, css

我想更改 img 的不透明度并添加一个 50x50 的缩略图，以便仅使用 CSS 无 jquery 进行悬停缩放。这是我到目前为止所做的。

**HTML 代码：**

```
<div class="span4"> 
    <a class="zoom-icon" href="#">
        <img class="blackout image-1" alt="Elite Sports" src="http://www.domain.com/images/es.jpg" width="300" height="300">
    </a>
</div> 
```

**CSS 代码：**

```
.span4 { margin: 35px 50px; border: 5px solid #000; }
.span4:hover { border: 5px solid #ccc; }
.span4 a:hover { background: #000; }
.blackout:hover { opacity: .0; } 
```

我有悬停工作的黑色背景，但我不知道如何使缩略图显示在黑色背景“停电”的顶部。任何有用的提示将不胜感激。

**更新带小提琴：**

[http://jsfiddle.net/8BMYH/](http://jsfiddle.net/8BMYH/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:00:26.123

像这样的东西

[http://jsfiddle.net/8BMYH/14/](http://jsfiddle.net/8BMYH/14/)

HTML

```
 <div class="span4"> <a class="portfolio-link-icon" href="http://www.elitesports.com"><
        <img class="alignnone blackout size-full wp-image-2592" alt="Elite Sports" src="http://www.surgicalgeeks.com/wp-content/uploads/2013/04/es.jpg" width="300" height="300" />
        <img class="zoom-link" src="http://www.surgicalgeeks.com/wp-content/uploads/2013/04/portfolio-link-icon.png" />
    </a>

</div> 
```

CSS

```
span4 {
    background: #000;
    margin: 35px 50px;
    width: 300px !important;
    height: 300px;
    border: 5px solid black;
    float: left;
    -webkit-transition: all 1s ease;
    -moz-transition: all 1s ease;
    -o-transition: all 1s ease;
    -ms-transition: all 1s ease;
    transition: all 1s ease;
    box-shadow: 1px 1px 5px #000;
}
.span4:hover {
    overflow: hidden;
    border: 5px solid #8b8c8d;
    border-radius: 25%;
    -webkit-transform: rotate(290deg);
    -moz-transform: rotate(290deg);
    -o-transform: rotate(290deg);
    -ms-transform: rotate(290deg);
    transform: rotate(290deg);
}
.blackout:hover {
    opacity: .0;
}
.zoom-link {
    top: 130px;
    left: 130px;
    position: absolute;
    visibility: hidden;
}
.span4:hover .zoom-link {
    position: absolute;
    visibility: visible;
}
.span4:hover .blackout {
    opacity: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:26:45.610

`:after`当您使用伪元素将鼠标悬停在链接上时，您可以添加缩略图。我创建了一支笔来演示这一点：[http ://codepen.io/Ghodmode/pen/xFmqf](http://codepen.io/Ghodmode/pen/xFmqf)

这不是一个理想的解决方案，但它完全是 CSS。如果我可以从图像中获取 src 属性的值并使用`attr()`（[http://www.w3.org/TR/css3-values/#attr](http://www.w3.org/TR/css3-values/#attr)）CSS函数将其用作背景网址会更好，但是我无法让它发挥作用。

```
.span4 a.zoom-icon {
    position: relative;
}

.span4 a.zoom-icon:hover:after {
    content: "";
    display: block;
    position: absolute;
    width: 50px;
    height: 50px;
    bottom: 10px;
    right: 10px;
    background-color: black;
    background-image: url("http://bit.ly/XioiVs");
    background-position: center;
    background-repeat: no-repeat;
    -webkit-background-size: contain;
       -moz-background-size: contain;
         -o-background-size: contain;
            background-size: contain;
} 
```

# javascript - 生成excel电子表格时asp经典中的事件顺序

> ID：15842386
> 
> 赞同：0
> 
> 时间：2013-04-05T19:53:10.933
> 
> 标签：javascript, forms, excel, asp-classic

潜伏已久...

长话短说：我正在使用 asp classic 和 MS SQL 构建一些即时电子表格。我将把它简化为基础，因为我的问题不在于创建电子表格或构建表单。问题是创建电子表格后会发生什么。

用户指定变量、按变量排序、显示类型（单选按钮、复选框、文本区域、下拉菜单、javascript 表单检查和所有爵士乐）。

提交到一个汇编 asp 经典页面，从数据库中抓取东西，然后显示到屏幕上或使用 AddHeader（都使用各种包含文件/SQL 视图）将其全部放入 Excel 电子表格并将文件发送给用户.

问题：指定电子表格选项后，用户体验是让表单（以及他们的所有选择）保留在浏览器中。打开（或保存）电子表格文件后 - 用户返回浏览器以找到与离开时完全相同的表单。

对我来说不是问题……但是客户？？？喜欢一切工作方式，除了**他们希望表格重置**到起始位置。

我已经查看了（并在过去 10 个小时内尝试了）几乎所有内容（从 javascript pop-under windows 到 response.redirects），我对在哪里干预这个过程感到困惑。

客户不希望 html 报告在新窗口中打开，也不希望单独的表单集用于屏幕查看和电子表格。所以我的方法有点有限。

所以不知何故，我需要找到一种方法来确定电子表格已完成或表格已在电子表格模式下提交，然后刷新表格所在的页面....叹息。

想法？？？？线索？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:18:12.330

这个[jQuery 插件](http://johnculviner.com/post/2012/03/22/Ajax-like-feature-rich-file-downloads-with-jQuery-File-Download.aspx)在下载文件时为您提供成功和失败回调。

因此，在成功回调中，您可以执行一些 JavaScript 来重置表单，如果出现问题，在失败回调中会显示友好的错误消息。

# android - Android中的自定义动画菜单

> ID：15842387
> 
> 赞同：-1
> 
> 时间：2013-04-05T19:53:21.357
> 
> 标签：android, animation, menu

我现在正在做一个新的 Android 应用程序，我想做一些新的菜单而不是标准按钮。我做了一个这样的项目：

![菜单](https://i.stack.imgur.com/BVkZ0.png)

我想要多张图像（屏幕上最多同时显示 3 张图像），并且我想使用向上和向下拖动手势（如标准 ScrollView）从一张图像移动到另一张图像。我希望有比另一个更大的活动选项（图片上的图像 2）和一些文字，我想在圆形路径上移动图片（图片上的红线）。

我有想法 - 在列表中制作几张图片，向它们添加动画，然后在手势之后移动它们，但这非常复杂，也许你有更好的主意，我不知道如何达到与 ScrollView 中相同的效果 - 快手势移动比慢速移动更多的选项。

和想法？最好的是类似的例子。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:14:32.860

如果您正在寻找实现[Carousel](http://4ourth.com/wiki/Carousel) UI 模式的现有方法/库，这可能更容易做到：

*   这是一篇用代码解释它的文章：[Android 3D Carousel](http://www.codeproject.com/Articles/146145/Android-3D-Carousel)。它看起来与您的屏幕截图非常相似（活动项目看起来更大，其他项目在背景中循环排列）。基于此，这里是垂直实现：[Android-VerticalCarousel](https://github.com/rameshkec85/Android-VerticalCarousel)
*   这是一种看起来支持 Carousel 的许多不同变体的方法：[carousel-layout-android](https://code.google.com/p/carousel-layout-android/)。

由于您的屏幕截图显示了一个部分在屏幕外的菜单，因此您可以使用[此解决方案](https://stackoverflow.com/a/10222919/1140682)来实现这一点。

# sql-server - SQL Server 十进制长度 - 可以还是必须？

> ID：15842390
> 
> 赞同：16
> 
> 时间：2013-04-05T19:53:23.687
> 
> 标签：sql-server, decimal, scale, precision

我对SQL Server 2008 R2 中的`DECIMAL`（也许）类型有一个非常简单的问题。`NUMERIC`

**MSDN 说：**

> (scale) 小数点右侧可以存储的最大小数位数。比例必须是从 0 到 p 的值。

我理解以下方式：

*   如果我有`DECIMAL(10, 5)`- 我可以存储 12345.12345 或 12345678.91。
*   如果我有`DECIMAL(5, 5)`- 我可以有 12345 或 1234.5 或 1.2345 等...

清楚吗？

但我收到了这个错误信息：

```
SELECT CAST(2.8514 AS DECIMAL(5,5)) 
```

> 将数字转换为数字数据类型的算术溢出错误。

我认为 5,5 意味着我最多可以有 5 位数字，并且最多可以有 5 位小数点。

正如我所尝试的：

```
SELECT CAST(12.851 AS DECIMAL(6,5)) - overflows too 
```

**然而**

```
SELECT CAST(1.23456 AS DECIMAL(6,5)) - is OK. 
```

那么真相是什么？

`DECIMAL(a,b)`说我最多可以有一个数字，其中只有 b 位在小数点的右边（在小数点的左边还有 ab）？

我对到处复制的文档中的声明感到非常困惑。请花点时间给我解释一下这个简单的事情。

非常感谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-05T20:25:52.137

考虑它的最简单方法（对我来说）是精度是总位数，*其中*比例是小数点右侧的位数。So`DECIMAL(p,s)`表示`p-s`点左侧的`s`数字和点右侧的数字。

这解释了您看到的所有转换错误：`2.8514`不可能是`decimal(5,5)`因为`p-s = 0`；`12.851`不可能是`decimal(6,5)`因为`p-s = 1`等等。

# c# - Datareader.HasRow 错误

> ID：15842391
> 
> 赞同：0
> 
> 时间：2013-04-05T19:53:28.540
> 
> 标签：c#, datareader

任何人都可以确认或质疑我在访问 ACCDB 数据库时遇到的问题`DataReader`。我设置`DataReader`并查询数据库。当我检查`DataReader.HasRows`时，无论记录是否存在，我都会得到真实的。

我已经双重验证了数据表是空的，根本没有记录，但`DataReader.HasRows`仍然说它有记录。

如果我继续尝试`DataReader.Read`，当我知道没有返回记录时，我会收到一条错误消息“行/列不存在数据”。这是意料之中的。

有没有人见过这个？或者你能说这不会发生吗？

谢谢

```
sql = @"SELECT a.License, a.ClassID, a.CurrentlyIn, a.TotalScans " +
    @"FROM Attendance a " +
    @"WHERE a.License = " + myScan.LicenseInt +
        @" AND a.ClassID = " + myScan.ClassID + ";";
_parent.StatusOutput(sql);

cmdDB = new OleDbCommand(sql, cnDB);
try
{
    //cnDB.Open();

    drDB = cmdDB.ExecuteReader();
    if (drDB.HasRows)
    {
        _parent.StatusOutput("Data reader has no rows");
    }
    else
    {
        _parent.StatusOutput("Data reader has rows.");
        drDB.Read();
        _parent.StatusOutput(drDB["License"].ToString() + ", " + drDB["ClassID"].ToString());
    } 
```

我们去吧。抱歉，我对如何发布此内容感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T02:36:26.907

在您的示例代码中，如果阅读器有行，那么它会打印错误

如果 reader 没有它打印的行，它有并读取并抛出异常

交换：

```
if (drDB.HasRows)
        {
            _parent.StatusOutput("Data reader has rows.");
            drDB.Read();
            _parent.StatusOutput(drDB["License"].ToString() + ", " + drDB["ClassID"].ToString());

                   }
        else
        {
            _parent.StatusOutput("Data reader has no rows");

        } 
```

# c++ - 删除 char* 崩溃程序

> ID：15842397
> 
> 赞同：0
> 
> 时间：2013-04-05T19:53:40.247
> 
> 标签：c++, char

```
char* str = "hello myname is Stack";
delete[] str; 
```

为什么我的程序崩溃了？char* str 是否在堆栈上分配？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T19:54:26.313

因为它对`delete[]`你没有分配的任何东西都是非法的`new[]`。就是这样。

不，`str`它不*指向*堆栈上的某个东西，而是指向一个**字符串字面**量，它是不可变的，通常驻留在只读段中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:06:23.467

你不能`delete`没有分配的东西`new`。此外，此字符串驻留在只读内存中，无法删除。

要看到这一点，请尝试使用 -S 进行编译。例如。

```
// ex.c
int main(){
    const char * s = "hello my name is Stack";
} 
```

编译时使用

```
gcc -S ex.c 
```

您将`ex.s`在顶部获得一个包含以下内容的文件：

```
 .file   "ex.c"
    .section    .rodata
.LC0:
    .string "hello my name is Stack"
    .text 
```

如您所见，字符串本身在程序集中，它不是在运行时分配的。`.rodata`程序运行时，文字驻留在只读内存 ( ) 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T20:07:29.417

Luchian 已经描述了这个问题，我想给出它崩溃的可能原因。

堆将存储已分配的内存块列表；当你调用`delete[]`它时，它会尝试找到它之前分配的内存块，并将这块内存返回到未分配的堆中。这将失败，因为您没有在堆上分配变量。如果未能找到有效的内存位来释放它，它将尝试写入空指针并产生崩溃。

# riak - 在没有竞争条件的情况下在 Riak 中存储双向链表？

> ID：15842404
> 
> 赞同：0
> 
> 时间：2013-04-05T19:53:53.393
> 
> 标签：riak

我们想使用 Riak 的 Links 来创建一个双向链表。

我相信它的算法非常简单：

1.  让“N0”成为要插入的新元素
2.  获取列表的头部，包括其“下一个”链接 (N1)
3.  将 N1 的“前一个”设置为 N0。
4.  将 N0 的“下一个”设置为 N1
5.  将列表头部的“下一个”设置为 N0。

我们遇到的问题是这里有一个明显的竞争条件，因为如果 2 个并发客户端获得列表的头部，其中一个项目可能会“丢失”。有什么办法可以避免吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T03:23:37.093

在谈论 CAP 定理时，Riak 是一个最终一致的系统。

如果您设置了存储桶属性`allow_multi=true`，如果两个并发客户端获得列表的头部然后写入，您将拥有兄弟记录。在您下次阅读时，您将收到多个值（兄弟），然后必须解决冲突并写入结果。鉴于我们没有任何类型的原子性，当您尝试更新链接对象时，这可能会在大量写入并发下导致额外的冲突。不是不可能解决，但绝对是棘手的。

您最好将整个列表序列化为单个对象。这使您的冲突解决*更加*简单。

# c# - 将回调传递给类

> ID：15842409
> 
> 赞同：2
> 
> 时间：2013-04-05T19:54:26.330
> 
> 标签：c#, delegates

我有一个类，我想在其中存储一个函数调用。该函数调用可以由类调用，但由父类设置。我想从外部提供要进行的调用，包括任何参数。

就像是...

```
public class TestDelegate
{
    public TestDelegate()
    {
        TestClass tc = new TestClass(DoSomething("blabla", 123, null));
    }

    private void DoSomething(string aString, int anInt, object somethingElse)
    {
        ...
    }
}

public class TestClass
{
    public TestClass(delegate method)
    {
        this.MethodToCall = method;
        this.MethodToCall.Execute();
    }

    public delegate MethodToCall { get; set; }
} 
```

当`TestClass`类初始化时，它会使用指定的参数调用父类的 DoSomething 方法。我还应该提到，我不想为调用的方法要求相同的方法签名。含义并不总是（字符串、整数、对象）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T19:56:56.010

使用`Action`委托类型并从闭包创建 this 的实例：

```
public class TestClass
{
    public TestClass(Action method)
    {
        MethodToCall = method;
        method();
    }

    public Action MethodToCall { get; set; }
}

public class TestDelegate
{
    public TestDelegate()
    {
        // Uses lambda syntax to create a closure that will be represented in
        // a delegate object and passed to the TestClass constructor.

        TestClass tc = new TestClass(() => DoSomething("blabla", 123, null));
    }

    private void DoSomething(string aString, int anInt, object somethingElse)
    {
        // ...
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T19:58:03.033

`delegate`不是类型的名称 - 它是用于*声明*委托类型的关键字，也是匿名方法。

我怀疑您*实际上*想要一种特定类型的委托，例如[`Action`](http://msdn.microsoft.com/en-us/library/system.action.aspx)，它是一个没有参数且返回类型为 void 的委托。然后，您还需要更改调用代码 - 因为目前您是在*调用* `DoSomething`构造函数之前调用的。样本：

```
public class TestDelegate
{
    public TestDelegate()
    {
        TestClass tc = new TestClass(() => DoSomething("blabla", 123, null));
    }

    private void DoSomething(string aString, int anInt, object somethingElse)
    {
        ...
    }
}

public class TestClass
{
    public TestClass(Action method)
    {
        this.MethodToCall = method;
        this.MethodToCall.Invoke();
    }

    // Do you really need this to be writable?
    public Action MethodToCall { get; set; }
} 
```

# javascript - 编写 AJAX 来接收 JSON 文件？

> ID：15842412
> 
> 赞同：1
> 
> 时间：2013-04-05T19:54:32.953
> 
> 标签：javascript, jquery, html, css, ajax

我正在尝试使用 jQuery 的 $.ajax 编写 AJAX 调用，但我不确定我是否正确，尤其是创建 HTML 部分。

我对此真的很陌生，但我正在尝试在 Javascript 文件中编写，以创建 HTML，该 HTML 将在左侧列中列出头像、名称、位置，并在右侧列中列出日期和故事。

到目前为止我的 JSON：

```
var user = [
  {'avatar': 'image'
   'author': 'name',
   'location': 'location',
 },
  {'date': 'date',
   'review': 'review'}
 ]; 
```

附上 Javascript AJAX 文件：http: [//jsfiddle.net/AryX8/](http://jsfiddle.net/AryX8/)

我很确定大部分内容都没有正确编写，因为我不确定如何获取 JSON 内容并将其作为 HTML 输入到我的 HTML 页面中。到目前为止，我的 HTML 文件中有一个空的 div 容器。而已。我如何将这3个文档合并在一起，特别是如何使用javascript编写ajax函数调用以在success: area中创建html？

更新：

我正在尝试在 JSON 文件中保存数据。通过编写 Javascript/jQuery AJAX 调用来检索该数据，并让它“通过”我的 html 文件（换句话说，当这个 html 文件即）加载 index.html 页面时输出，来自 JSON 文件的所有数据将显示up 通过 Javascript/jQuery/AJAX 成功字段格式化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T08:03:50.657

JSON，应该以'{'开头，这样它就可以编译它！您提供的数组以“[”开头。这意味着这是变量的数组或放置在它之前的对象！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T20:45:44.963

您的 JSON 似乎无效，但小提琴看起来可能有效。

尝试从您的服务器回显类似这样的内容：

```
var validJSON = {
    "array": [
        {
            "avatar": "johnny",
            "location": "location"
        },
        {
            "avatar": "mikey",
            "location": "location"
        }
    ]
}; 
```

# jersey - 使用 Jackson 反序列化枚举器类型

> ID：15842416
> 
> 赞同：0
> 
> 时间：2013-04-05T19:54:52.503
> 
> 标签：jersey, jackson

我有一个要序列化为 JSON 并从 JSON 中反序列化的实体：

```
public class Item {
    @JsonProperty private Status status;

....

} 
```

状态枚举如下所示：

```
public enum Status {

    NEW,
    ACTIVE,
    PENDING,
    ERROR;
} 
```

我希望带注释的枚举类型序列化为，例如，{status: "NEW"} 并反序列化为枚举类型。是否有单独的注释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T08:00:26.990

您需要在枚举中添加一些额外的方法：

```
@Override
@JsonValue
public String toString()
{
    return super.toString().toUpperCase(Locale.ENGLISH);
}

@JsonCreator
public static Status fromString(final String status)
{
  if (status == null)
  {
    return null;
  }
  try
  {
    return valueOf(status.toUpperCase(Locale.ENGLISH));
  }
  catch (IllegalArgumentException iae)
  {
    System.err.println("Invalid status");
  }
} 
```

这些还确保您的状态转换不区分大小写（因此“新”状态仍会转换为正确的枚举）。

# ruby-on-rails - 如何关联视图中使用的复选框以更新 RoR 表中的字段？

> ID：15842420
> 
> 赞同：1
> 
> 时间：2013-04-05T19:55:03.300
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我在一个名为“帖子”的表中创建了一个名为“已审核”的新字段。每次有人在发布之前选中标记，我希望在显示之前对其进行审核以获得批准。

表中的“已审核”字段默认为 True。这是 schema.db

```
create_table "posts", :force => true do |t|
    t.text      "content"
    t.integer   "user_id"
    t.timestamp "created_at",                        :null => false
    t.timestamp "updated_at",                        :null => false
    t.boolean   "reviewed",        :default => true 
```

这是我用于复选标记的视图中的代码

```
<%= label_tag(:post_reviewed, "Review this post") %>
<%= check_box_tag(:post_reviewed) %> 
```

我希望每次选中此复选框时，将已审核字段设置为 False，以便在我对其进行审核并将其更新为 True 之前不会显示帖子。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:02:08.053

听起来你做的一切都是倒退的。如果你想沿着这条路线走，那么你应该将其更改为`review`并仅显示范围为`where(review: false)`. 这样，如果用户希望在发布之前对帖子进行审核，那么他们会选中该复选框。

我不知道流程是什么，但如果必须审查所有帖子，为什么不将字段更改为`reviewed_at`日期时间。然后你只显示帖子`where('reviewed_at IS NOT NULL')`。这类似于`deleted_at`or `published_at`。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:03:26.813

在你看来，你可能有这样的事情：

```
<%= form_for :post do |f| %>
..
<% end %> 
```

因此，只需尝试添加：

```
<%= f.check_box :reviewed %> 
```

这应该会自动将其关联到所需的对象。

让我知道这是否适合你。

# objective-c - NSTimer、NSRunloop 和深度睡眠 mac

> ID：15842424
> 
> 赞同：1
> 
> 时间：2013-04-05T19:55:11.323
> 
> 标签：objective-c, macos, nstimer, sleep, nsrunloop

我正在mac上用objective-c编写一个应用程序，我需要一些帮助。每天，在 23:59，我的应用程序正在调用一个方法来生成报告

```
NSTimer *timer = [[NSTimer alloc]
                  initWithFireDate:endOfTheDay
                  interval:0.0
                  target:self
                  selector:@selector(endDay)
                  userInfo:nil
                  repeats:NO];

[[NSRunLoop currentRunLoop] addTimer:timer forMode: NSDefaultRunLoopMode]; 
```

除非计算机处于深度睡眠模式，否则它会按预期工作。问题是：即使它处于睡眠模式，我也需要计时器在一天中的这个确切时刻调用该方法。我不想阻止睡眠。你能帮助我吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T20:03:10.907

查看 IOPMSchedulePowerEvent：

```
 IOReturn IOPMSchedulePowerEvent(
   CFDateRef time_to_wake,
   CFStringRef my_id,
   CFStringRef type); 
```

请注意，这必须从 root 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:51:41.473

我实际上所做的是使用我的参数创建一个 pmset 事件，并使用 AppleScript 行以 root 身份运行它，如下所示：

```
NSDate *currentDate = [NSDate date];
NSCalendar *cal = [NSCalendar currentCalendar];
NSDateComponents *currentComponents = [cal components: NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit|NSHourCalendarUnit|NSMinuteCalendarUnit fromDate:currentDate];
NSDate *lastDay = [cal dateFromComponents:currentComponents];
NSDateComponents *aDay = [[NSDateComponents alloc] init];
aDay.day = 1;
NSDate *tonight = [cal dateByAddingComponents:aDay toDate:lastMidnight options:0];

NSString *command = [NSString stringWithFormat: @"pmset schedule wake %@, tonight]
NSString *scriptLine= @"[NSString stringWithFormat:@"do shell script \"%@\" with administrator privileges, command]"

NSAppleScript *myScript = [[NSAppleScript new] initWithSource:scriptLine];
NSAppleEventDescriptor *res = [myScript executeAndReturnError:&errorInfo]; 
```

基于 [AuthorizationExecuteWithPrivileges 已被弃用](https://stackoverflow.com/questions/6841937/authorizationexecutewithprivileges-is-deprecated)并且

# for-loop - ListViewItem 的空引用异常

> ID：15842427
> 
> 赞同：0
> 
> 时间：2013-04-05T19:55:17.527
> 
> 标签：for-loop, nullreferenceexception, listviewitem

我有以下代码：

```
class Album
{
    private string name;

    private Music[] musics;
    private const int MAX_MUSICS = 100;
    private ListViewItem[] back;

    public ListViewItem[] GetTitles()
    {
        for (int i = 0; i < MAX_MUSICS; i++)
            if (musics[i].Title != null)
                back[i] = new ListViewItem(musics[i].Title);

        return back;
    }
} 
```

在线`back[i] = new ListViewItem(musics[i].Title)`下，我得到一个`NullReferenceException`. 我不知道为什么，因为在调试器中 musics[i].Title 有一个值并且它甚至被检查过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:01:15.220

您需要在输入元素之前告诉“返回”数组有多少元素，例如

```
 public ListViewItem[] GetTitles()
    {
        back = new ListViewItem[MAX_MUSICS]; // initialize array

        for (int i = 0; i < MAX_MUSICS; i++)
            if (musics[i].Title != null)
                back[i] = new ListViewItem(musics[i].Title);

        return back;
    } 
```

还要确保你的 MAX_MUSICS 不大于音乐数组的大小，否则你会遇到另一个异常

# web - 创建基于 Web 的交互式 Choropleth 地图的最佳和优化方法

> ID：15842428
> 
> 赞同：-2
> 
> 时间：2013-04-05T19:55:18.960
> 
> 标签：web, d3.js, openlayers, gis, leaflet

我将为孟加拉国建立一个交互式 Choropleth 地图。该项目的目标是构建地图系统并填充不同类型的数据。我阅读了 Openlayers、Leaflet 和 D3 的文档。我需要一些建议来找到正确的道路。解决方案必须足够优化。

我要创建的地图将类似于以下[http://nasirkhan.github.io/bangladesh-gis/asset/base_files/bd_admin_3.html](http://nasirkhan.github.io/bangladesh-gis/asset/base_files/bd_admin_3.html)。它是基于leaflet js编写的。但是使用这个库并不是必须的。我尝试使用 Leaflet，因为它易于使用，并在很短的时间内找到了预期的解决方案。

该项目的要求是准备一个 Choropleth 地图，我可以在其中显示相关数据。例如，我必须显示孟加拉国所有部门的人口。同时应该有一些选项，以便我可以显示识字率，男女比例等。

我现在工作的解决方案有一些问题。就像加载时间很长，如果我想加载第二个数据集，那么我必须加载同样巨大的地理位置数据，我该如何优化或避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T16:30:47.887

Leaflet 具有图层控制功能。如果您将数据缩减为所需的数据，请将其拆分为不同的层，并允许用户选择他们有兴趣查看的层，这可能会减少数据的加载。另一种选择是简化多边形的形状。

# powershell - 如何在脚本加载时在powershell中制作进度条直到它运行？

> ID：15842432
> 
> 赞同：2
> 
> 时间：2013-04-05T19:55:44.063
> 
> 标签：powershell, progress-bar

我编写了一个 Powershell 代码，它运行良好。

但是有很多数据库连接或从数据库下载元素。

这就是为什么当我运行我的脚本时，GUI 表单出现之前需要一段时间。

有没有人知道如何在我执行我的脚本时出现一个进度条，并在出现 GUI 表单时停止它？

谢谢您的帮助，

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:06:49.080

你可能想检查一下。

[http://blogs.technet.com/b/heyscriptingguy/archive/2011/01/29/add-a-progress-bar-to-your-powershell-script.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2011/01/29/add-a-progress-bar-to-your-powershell-script.aspx)

# javascript - 只运行一次javascript

> ID：15842438
> 
> 赞同：-3
> 
> 时间：2013-04-05T19:56:10.540
> 
> 标签：javascript, cookies

我只需要运行一次javascript，保存到cookies，然后，当尝试执行函数时，检查cookies是否保存，如果是，不要触发函数。

我确定这个脚本有错误，因为它没有做我需要的事情：

```
var prom = getCookie('prom');
if (prom === null || prom === '0') 
{
if (document.getElementById('tst')){
    var str=document.getElementById("tst").innerHTML;
    var n=str.replace("Login","Logout");
    document.getElementById("tst").innerHTML=n;
    setCookie("prom",'1',1);
}
} 
```

脚本触发以在“注销”中更改“登录”的 HTML 代码

```
<a href="login"  title="log in" class="login_button" id="tst">Login</a></span> 
```

饼干脚本：

```
function setCookie(c_name, value, exdays) {
    var exdate = new Date();
    if (exdays) exdate.setDate(exdate.getDate() + exdays);
    var c_value = escape(value) + ((exdays) ? '; expires=' + exdate.toUTCString() : '');
    document.cookie = c_name + "=" + c_value;
}

function getCookie(name) {
    var re = new RegExp(name + "=([^;,]+)");
    var value = re.exec(document.cookie);
    return (value !== null) ? unescape(value[1]) : null;
} 
```

Jsfiddle 测试如果[http://jsfiddle.net/8yZaP/11/](http://jsfiddle.net/8yZaP/11/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T19:56:49.480

改变

```
if (prom = '0'){ 
```

至

```
if (prom === '0'){ 
```

（当然，假设`getCookie`和`setCookie`持久化类似于[sessionStorage](http://code.google.com/p/sessionstorage/)）。

# jquery - $.click 在带有 JQuery 1.9.1 的 Chrome 中未触发复选框

> ID：15842440
> 
> 赞同：4
> 
> 时间：2013-04-05T19:56:24.807
> 
> 标签：jquery, google-chrome

单击事件似乎没有在此内存 html 块中的复选框上触发。它确实为按钮而不是复选框触发。

这是小提琴：http: [//jsfiddle.net/X2en3/18/](http://jsfiddle.net/X2en3/18/)

和代码：

使用 .trigger() 触发：使用 .click() 触发：

```
var working = $('<div><input type="checkbox" id="myBox"/><button id="myButton"/><div>'),    
checkbox = working.find('#myBox'),
button = working.find('#myButton'),
stage;

function boxclicked() {$('#' + stage).append('--checkbox');}
function buttonclicked() {$('#' + stage).append('--button');}

working.delegate('#myBox', {click: boxclicked});
working.delegate('#myButton', {click: buttonclicked});

stage = 'trigger';

checkbox.trigger('click');
button.trigger('click');

stage = 'click';

checkbox.click();
button.click(); 
```

这只发生在 Chrome 和 JQuery 1.9.1 上。Firefox/IE 9 和以前版本的 JQuery 都可以正常工作。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:58:13.063

From jquery.com

[http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

> As of jQuery 1.7, .delegate() has been superseded by the .on() method. For earlier versions, however, it remains the most effective means to use event delegation. More information on event binding and delegation is in the .on() method. In general, these are the equivalent templates for the two methods:

Try using the `on` method

[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

```
var $checkbox = $("<input>", { type: "checkbox", id: "myBox" });
var $button = $("<button>", { type: "checkbox", id: "myButton" });

var $container = $("<div>");
$container.append($checkbox);
$container.append($button);

$("body").append($container);

$container.on("click", "#myBox", getCheckboxStatus);
$container.on("click", "#myButton", getButtonStatus);

function getCheckboxStatus() {
    $('#chckBoxVerify').append('Yes');
}

function getButtonStatus() {
    $('#buttonVerify').append('Yes');
}

$checkbox.click();
$button.click(); 
```

working example: [http://jsfiddle.net/hunter/X2en3/22/](http://jsfiddle.net/hunter/X2en3/22/)

# c++ - 错误 LNK2019：无法解析的外部符号 有关缺少什么的帮助？

> ID：15842444
> 
> 赞同：-1
> 
> 时间：2013-04-05T19:56:46.247
> 
> 标签：c++, linker, tree, lnk2019

```
1>------ Build started: Project: project4, Configuration: Debug Win32 ------
1>  proj4_driver.cpp
1>proj4_driver.obj : error LNK2019: unresolved external symbol "public: class cop4530::BST<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > > const & __thiscall cop4530::BST<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > >::operator=(class cop4530::BST<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > > const &)" (??4?$BST@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@cop4530@@QAEABV01@ABV01@@Z) referenced in function _main
1>proj4_driver.obj : error LNK2019: unresolved external symbol "public: __thiscall cop4530::BST<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > >::BST<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > >(int)" (??0?$BST@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@cop4530@@QAE@H@Z) referenced in function _main
1>proj4_driver.obj : error LNK2019: unresolved external symbol "public: __thiscall cop4530::BST<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > >::BST<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > >(class cop4530::BST<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > > const &)" (??0?$BST@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@cop4530@@QAE@ABV01@@Z) referenced in function _main
1>proj4_driver.obj : error LNK2019: unresolved external symbol "public: __thiscall cop4530::BST<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > >::BST<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > >(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,int)" (??0?$BST@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@cop4530@@QAE@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@H@Z) referenced in function _main
1>proj4_driver.obj : error LNK2019: unresolved external symbol "public: class cop4530::BST<int> const & __thiscall cop4530::BST<int>::operator=(class cop4530::BST<int> const &)" (??4?$BST@H@cop4530@@QAEABV01@ABV01@@Z) referenced in function _main
1>proj4_driver.obj : error LNK2019: unresolved external symbol "public: __thiscall cop4530::BST<int>::BST<int>(int)" (??0?$BST@H@cop4530@@QAE@H@Z) referenced in function _main
1>proj4_driver.obj : error LNK2019: unresolved external symbol "public: __thiscall cop4530::BST<int>::BST<int>(class cop4530::BST<int> const &)" (??0?$BST@H@cop4530@@QAE@ABV01@@Z) referenced in function _main
1>proj4_driver.obj : error LNK2019: unresolved external symbol "public: __thiscall cop4530::BST<int>::BST<int>(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,int)" (??0?$BST@H@cop4530@@QAE@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@H@Z) referenced in function _main
1>c:\users\ah09e\documents\visual studio 2010\Projects\project4\Debug\project4.exe : fatal error LNK1120: 8 unresolved externals
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

这是一个驱动程序：

```
 #include <iostream>
    #include <string>
    #include "bst.h"

    using namespace std;
    using namespace cop4530;

    int main() {
    string input;

// get a list of integer values
cout << "Enter a list of integer values in one line: ";
getline(cin, input);

// create a binary search tree
BST<int> bst1(input);
if (!bst1.empty()) {
    cout << "Inorder traversal: ";
    bst1.printInOrder();
    cout << "Level order traversal: ";
/////////////bst1.printLevelOrder();

    // test copy constructor
    BST<int> bst2(bst1);
    cout << "Testing copy constructor: ";
    //////////////bst2.printLevelOrder();

    // test assignment operator
    BST<int> bst3;
    bst3 = bst1;
    cout << "Testing assignment operator: ";
    ////////////bst3.printLevelOrder();
 }

// get a list of string values
cout << "Enter a list of string values in one line: ";
getline(cin, input);

// create a binary search tree
BST<string> bsts1(input);
if (!bsts1.empty()) {
    cout << "Inorder traversal: ";
    bsts1.printInOrder();
    cout << "Level order traversal: ";
////////bsts1.printLevelOrder();

    // test copy constructor
    BST<string> bst2(bsts1);
    cout << "Testing copy constructor: ";
    ////////////bst2.printLevelOrder();

    // test assignment operator
    BST<string> bst3;
    bst3 = bsts1;
    cout << "Testing assignment operator: ";
    ///////////bst3.printLevelOrder();
 }

cout << "Enter a list of integer values: ";
getline(cin, input);
/////bst1.buildFromInputString(input);
cout << "Level order traversal: ";
////bst1.printLevelOrder();

cout << "\n===================\n";
cout << "Operation Manual:" << endl;
cout << "d: delete value;\ti: insert value;" << endl;
cout << "h: height of tree; \tn: number of nodes" << endl;
cout << "o: in order print; \tl: level order print" << endl;
cout << "s: search value;\tq: quit" << endl;
cout << "===================\n";
cout << "choice: ";
int tmp;
while (getline(cin, input)) {
if (input == "q")
    break;
if (input == "d") {
    cout << "Type value to delete: ";
    cin >> tmp;
    cin.ignore();
    bst1.remove(tmp);
} else if (input == "i") {
    cout << "Type value to insert: ";
    cin >> tmp;
    cin.ignore();
    bst1.insert(tmp);
} else if (input == "o") {
    cout << "In order traversal: ";
    bst1.printInOrder();
} else if (input == "l") {
    cout << "Level order traversal: ";
    ///////bst1.printLevelOrder();
} else if (input == "h") {
    cout << "Height: ";
    cout << bst1.height() << endl;
} else if (input == "n") {
    cout << "Number of nodes: ";
    cout << bst1.numOfNodes() << endl;
} else if (input == "s") {
    cout << "Type value to search: ";
    cin >> tmp;
    cin.ignore();
    if (bst1.contains(tmp)) {
    cout << "contains " << tmp << endl;
    } else {
    cout << "does not contains " << tmp << endl;
    }
}

cout << "\n===================\n";
cout << "Operation Manual:" << endl;
cout << "d: delete value;\ti: insert value;" << endl;
cout << "h: height of tree; \tn: number of nodes" << endl;
cout << "o: in order print; \tl: level order print" << endl;
cout << "s: search value;\tq: quit" << endl;
cout << "===================\n";
cout << "choice: ";
}
return 0;
} 
```

和 bst.h：

```
#ifndef COP4530_PROJ4_H
#define COP4530_PROJ4_H

#include<iostream>
#include<string>
using std::string;

namespace cop4530{

//using std::string;
int default_threshold_value = 1;

template <typename T>
class BST
{

public:

BST(int th=default_threshold_value); 
BST(const string input, int th=default_threshold_value);
BST(const BST&);
~BST();//
void buildFromInputString(const string input);
const BST & operator=(const BST & rhs);//
bool empty();//

void printInOrder() const;//
//void printLevelOrder() const;//
int numOfNodes() const;//
int height() const;//
void makeEmpty();//
void insert(const T& v);//
void remove(const T& v);//
bool contains (const T& v);//

private:
struct BSTNode
{
T element;
BSTNode *left;
BSTNode *right;
int height;
//void printInOrder(BSTNode *t) const;

BSTNode(const T & theElement, BSTNode *lt, BSTNode *rt, int h=0)
    : element(theElement), left(lt), right(rt), height(h) {}
};

BSTNode *root;

void printInOrder(BSTNode *t) const;//
//void printLevelOrder(BSTNode *t) const;
void makeEmpty(BSTNode* &t);//
void insert(const T& v, BSTNode *&t);//
void remove(const T& v, BSTNode *&t);//
bool contains(const T& v, BSTNode *&t);//
int numOfNodes(BSTNode *t) const;//
int height(BSTNode *t) const;//
BSTNode * clone(BSTNode *t) const;//

};
#include "bst1.hpp"
}
#endif 
```

这是 bst1.hpp

```
template <typename T>
void BST<T>::buildFromInputString(const string input)
{
    //////////makeEmpty();
    cin >> input;

}

template <typename T>
BST<T>::~BST()
{
    makeEmpty();
}

/*template <typename T>
const BST<T>::BST & operator=(const BST & rhs)
{
    if (this != &rhs)
    {
        makeEmpty();
        root = clone( rhs.root)
    }
    return *this;
}*/

template <typename T>
bool BST<T>::empty()
{
//if (contains(root)==(-1)) 
if ( 1==1)  
    return true;
else
    return false;
}

template <typename T>
void BST<T>::printInOrder() const
{
    printInOrder(root);
}

/*template <typename T>
void BST<T>::printLevelOrder() const
{
    printLevelOrder(root);
}*/

template <typename T>
int BST<T>::numOfNodes() const
{
    return numOfNodes(root);
}
template <typename T>
int BST<T>::height() const
{
    return height(root);
}

template <typename T>
void BST<T>::makeEmpty()
{
    makeEmpty(root);
}

template <typename T>
void BST<T>::insert(const T& v)
{
    insert(v, root);
}

template <typename T>
void BST<T>::remove(const T& v)
{
    remove(v, root);
}

template <typename T>
bool BST<T>::contains(const T& v)
{
    return contains(v, root);
}

template <typename T>
bool BST<T>::contains(const T& v, BSTNode *&t)
{
    if( t == NULL)
        return false;
    else if(v < t->element)
        return contains(v, t->left);
    else if(t->element < v)
        return contains(v, t->right);
    else
        return true;
}

template <typename T>
int BST<T>::numOfNodes(BSTNode *t) const
{
    int nodes = 0;
    if (t!=NULL)
    {
        nodes++;
        numOfNodes(t->left);
        numOfNodes(t->right);
    }
    return nodes;
}

template <typename T>
void BST<T>::printInOrder(BSTNode *t) const
{

if (left != 0)
printInOrder(t->left);
cout << t << endl;
if (right != 0)
printInOrder(t->right);

}

//void BST<T>::printLevelOrder(BSTNode *t) const

template <typename T>
void BST<T>::makeEmpty(BSTNode * & t)
{
    if(t != NULL)
    {
        makeEmpty(t->left);
        makeEmpty(t->right);
        delete t;
    }
    t = NULL;
}

template <typename T>
void BST<T>::insert(const T& v, BSTNode *&t)
{
    if(t = NULL)
        t = new BSTNode(v, NULL, NULL);
    else if(v < t->element)
        insert(v,t->left);
    else if(t->element < v)
        insert(v,t->right);
    else
        ;
}

template <typename T>
void BST<T>::remove(const T& v, BSTNode *&t)
{
    if(t == NULL)
        return;
    if(v < t->element)
        remove(v, t->left);
    else if (t->element < v)
        remove(v,t->right);
    else
    {
        BSTNode *oldNode = t;
        t = (t->left != NULL) ? t->left : t->right;
        delete oldNode;
    }

}
//else if (t->left != NULL && t->right != NULL)

template <typename T>
int BST<T>::height(BSTNode *t) const
{
    return t == NULL ? -1: t->height;
}

template <class T>
typename BST<T>::BSTNode * BST<T>::clone(BSTNode *t) const
{
    if(t==NULL)
        return NULL;

    return new BSTNode( t->element, clone(t->left), clone(t->right));

} 
```

我遇到了链接器问题。在网站上找不到任何可以专门解决我的问题的代码。一直在研究二叉搜索树，但几乎没有解决这个特定方面的结果。就我而言，所有库和文件都添加在各自的区域中，将非常感谢一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:59:50.390

You must not separate interface and implementation for templates. Define your methods in you `.h`-file, otherwise the compiler can't create your concrete types.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:04:23.863

如果您真的想将模板实现和声明分开。您应该将行尾更改`bst.h`为

```
#include "bst1.hpp" 
```

至

```
#include "bst1.cpp" 
```

并且`bst1.hpp`应该重命名为`bst1.cpp`（你`bst1.hpp`真的包含你需要的所有实现），因此，编译器可以通过知道里面的定义来实例化你的模板`bst1.cpp`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T20:06:31.123

```
getline(cin, input); 
```

在驱动程序中没有任何意义，与 cout 类似，在驱动程序中也没有**任何**意义。

对于驱动程序编程，您需要从小处着手，逐步推进。

从小处着手，从调试（并使用程序读取调试消息）开始。

您可以在[此处](http://www.codeproject.com/Articles/9504/Driver-Development-Part-1-Introduction-to-Drivers)找到入门教程。

有关更多信息，我建议您查看 Microsoft 的驱动程序 sdk，这很有帮助。

# c++ - Qt 线程同步

> ID：15842446
> 
> 赞同：2
> 
> 时间：2013-04-05T19:56:52.047
> 
> 标签：c++, multithreading, qt

考虑以下情况：

我有一个 QThread 不断修改一个变量（我们称之为`counter`）和一个 QTimer 定期读取`counter`. 我知道我必须同步可能同时被多个线程修改的变量，但是 - 在这种情况下，当只有一个线程读取和一个线程写入变量时，我是否也需要同步？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T20:19:37.440

您描述的场景不安全，您仍然需要同步。Qt 中有几个类可以通过锁定或无锁机制来帮助您。

看看 QMutex、QReadWriteLock、QSemaphore、QWaitCondition、QFuture、QFutureWatcher、QAtomicInt 和 QAtomicPointer。另外你有`std::atomic<T>`C++11。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T20:20:40.643

是的，你总是需要同步——如果没有其他原因，标准规定如果存在数据竞争，你的程序有未定义的行为。

您可以与保护计数器变量的互斥锁同步，我认为这是“传统”方式，或者您可以`std::atomic<int>`为您的计数器使用一个变量，您可以在不创建数据竞争的情况下访问它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T20:26:15.763

[使用QReadWriteLock](http://qt-project.org/doc/qt-4.8/qreadwritelock.html)保护您的`counter`变量。当您在线程中编辑变量时，让他们使用[QWriteLocker](http://qt-project.org/doc/qt-4.8/qwritelocker.html)锁定它，这将锁定任何其他写入或读取的尝试。当您的主线程检查 的值时，使用[QReadLocker](http://qt-project.org/doc/qt-4.8/qreadlocker.html)将其锁定，仅当写锁定当前处于活动状态时才会锁定。`counter``counter`

# php - 将元素添加到 JSON 内的数组

> ID：15842448
> 
> 赞同：0
> 
> 时间：2013-04-05T19:56:56.840
> 
> 标签：php, arrays, json

我有一些看起来像这样的 JSON：

```
{
    people: []
} 
```

我目前的目标是简单地将元素添加到人员数组中。但最后我也希望能够再次删除元素。

我试过类似的东西：

```
<?

    $file = "test.json";
    $json = file_get_contents($file);
    $get = json_decode($json);

    array_push($get->people, $_GET['person']);

    file_put_contents($file, json_encode($get));

?> 
```

但是，这不起作用。我很确定有一个更简单的解决方案。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:02:26.103

您的[JSON 无效](http://jsonlint.com)。必须[引用](http://json.org)键。

```
{"people": []} 
```

否则，您的代码应该可以工作。虽然我建议[不要使用 PHP 短开放标签](http://jason.pureconcepts.net/2012/08/better-php-developer/)和[过滤用户输入](https://stackoverflow.com/questions/129677/whats-the-best-method-for-sanitizing-user-input-with-php)。

# visual-studio - Visual Studio Express 2012 for Web - 条件断点

> ID：15842449
> 
> 赞同：1
> 
> 时间：2013-04-05T19:56:57.060
> 
> 标签：visual-studio, visual-studio-2012

我有用于 web EXPRESS 的 Visual Studio 2012 - 我可以在调试模式断点和应用程序停止时的条件中设置循环吗？例如我有循环：

```
for (int i = 0; i <= 6000; i++)
{
    //...........
} 
```

我想看看当 i = 3000 时出了什么问题，我该怎么做？

**编辑：**

**我没有下断点选项“条件”：**

![在此处输入图像描述](https://i.stack.imgur.com/08MCY.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T19:58:46.777

Set the breakpoint as normal (via right-click or F9) then right-click the red dot in the editor margin, click "Condition", and enter `i == 3000`.

**Edit**: It seems that VS Express 2012 for Web doesn't have this feature.

# android - Android 使用 BaseAdapter 过滤 ListView

> ID：15842452
> 
> 赞同：0
> 
> 时间：2013-04-05T19:57:02.650
> 
> 标签：android, listview, filter, baseadapter

我们需要在这个例子中实现过滤列表视图的代码。我们使用了 2 个类：（`Car.java`包含 Object Car），Class`CarAdapter`扩展了`BaseAdapter`Class。下面是一些代码：

**汽车.java**

```
public class Car {

public String title;
public int car_id;

public Car(String title,int car_id) {
    this.title = title;
    this.car_id = car_id;
}

} 
```

**CarAdapter.java**

```
public class CarAdapter extends BaseAdapter {

private List<Car> mCarList;
private LayoutInflater mInflater;

public CarAdapter(List<Car> list, LayoutInflater inflater) {
    mCarList = list;
    mInflater = inflater;
}

@Override
public int getCount() {
    return mCarList.size();
}

@Override
public Object getItem(int position) {
    return mCarList.get(position);
}

@Override
public long getItemId(int position) {
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    final ViewItem item;

    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.prototype, null);
        item = new ViewItem();

        item.CarTitle = (TextView) convertView
                .findViewById(R.id.TextViewPrototype);

        convertView.setTag(item);
    } else {
        item = (ViewItem) convertView.getTag();
    }

    Car curCar = mCarList.get(position);

    item.CarTitle.setText(curCar.title);    

    return convertView;
}

private class ViewItem {
    TextView CarTitle;
}

} 
```

**CarActivity.java**

```
 public class ActivityCar extends Activity {

private List<Car> mCarList;
private EditText et;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.car);
    // Obtain a reference to the product catalog
    mCarList = CarHelper.getCar(getResources());
    // Create the list
    ListView listViewCatalog = (ListView) findViewById(R.id.list_car);
    listViewCatalog.setAdapter(newCarAdapter(mCarList,getLayoutInflater)));

}   
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T09:52:08.327

按照以下步骤使列表视图可过滤：

1.  在`CarAdapter.java`实现[Filterable](http://developer.android.com/reference/android/widget/Filterable.html)接口。看看[这里](https://stackoverflow.com/a/8678198/645762)回答的类似问题。

2.  在`CarActivity.java`设置 Listview 适配器可过滤。
    `listViewCatalog.setTextFilterEnabled(true);`

3.  如果您使用过，`android.widget.SearchView`则实现[SearchView.OnQueryTextListener](http://developer.android.com/reference/android/widget/SearchView.OnQueryTextListener.html)，或者如果您使用过`EditText`，则实现[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)接口。

# php - PHP - 获取路径减去根

> ID：15842455
> 
> 赞同：0
> 
> 时间：2013-04-05T19:57:16.310
> 
> 标签：php, forms, post, get

所以我有这个链接：

[http://kenthomes.net/Amelia-Cove](http://kenthomes.net/Amelia-Cove)（我们使用别名系统。）

然后我打开一个弹出 iframe ( [http://kenthomes.net/shareplan.php?mod=39](http://kenthomes.net/shareplan.php?mod=39) )

如何将字符串“Amelia-Cove”传递到该页面？

我最好的猜测是使链接= [http://kenthomes.net/shareplan.php?mod=39&plan=Amelia-Cove](http://kenthomes.net/shareplan.php?mod=39&plan=Amelia-Cove)

但是如何从初始页面中仅检索“Amelia-Cove”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:04:02.363

试试这个：

`$_SERVER['REQUEST_URI']`

在您上面的示例中，这将具有值：`/Amelia-Cove`。如果你想摆脱`/`，试试这个：

`trim($_SERVER['REQUEST_URI'],'/');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:00:49.060

您可以使用 GET 协议来接收 URL 中的参数：

```
http://kenthomes.net/shareplan.php?mod=39&plan=Amelia-Cove 
```

然后通过 PHP GET 全局变量获取这些参数：

```
$_GET['plan'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T20:06:52.367

我假设 OP 不会总是获取 Amelia-Cove，而是想要 URL 的那一部分，并以 Amelia-Cove 为例，并且知道如何使用 $_GET

要获取 url 的那部分并通过 $_GET 我建议使用它：

```
parse_url($url, PHP_URL_PATH) 
```

[完整的`parse_url`文档](http://php.net/manual/en/function.parse-url.php)

# php - Rabbitmq - php amqp broken broken pipe error

> ID：15842460
> 
> 赞同：4
> 
> 时间：2013-04-05T19:57:44.207
> 
> 标签：php, rabbitmq, amqp

I am processing a huge xml document (which contains around a million entries) and subsequently importing a formatted version to the db using rabbitmq. Each time after publishing around 200,000 entries I receive a broken pipe error , and rabbitmq is unable to recover from it.

> Notice Error: fwrite(): send of 2651 bytes failed with errno=11 Resource temporarily unavailable in [/var/www/ribbon/app/Console/Command/lib/php_amqplib/amqp.inc, line 439]
> 
> Notice Error: fwrite(): send of 33 bytes failed with errno=104 Connection reset by peer in [/var/www/ribbon/app/Console/Command/lib/php_amqplib/amqp.inc, line 439]
> 
> Notice Error: fwrite(): send of 19 bytes failed with errno=32 Broken pipe in [/var/www/ribbon/app/Console/Command/lib/php_amqplib/amqp.inc, line 439]

This subsequently causes a node down error and the process needs to be manually killed to recover from it.

These are my class methods:-

```
public function publishMessage($message) {
    if (!isset($this->conn)) {
        $this->_createNewConnectionAndChannel();
    }
    try {
        $this->ch->basic_publish(
            new AMQPMessage($message, array('content_type' => 'text/plain')), 
            $this->defaults['exchange']['name'], 
            $this->defaults['binding']['routing_key']
        );
    } catch (Exception $e) {
        echo "Caught exception : " . $e->getMessage();
        echo "Creating new connection.";
        $this->_createNewConnectionAndChannel();
        $this->publishMessage($message); // try again
    }
}

protected function _createNewConnectionAndChannel() {
    if (isset($this->conn)) {
        $this->conn->close();
    }

    if(isset($this->ch)) {
        $this->ch->close();
    }

    $this->conn = new AMQPConnection(
        $this->defaults['connection']['host'], 
        $this->defaults['connection']['port'], 
        $this->defaults['connection']['user'], 
        $this->defaults['connection']['pass']
    );
    $this->ch = $this->conn->channel();
    $this->ch->access_request($this->defaults['channel']['vhost'], false, false, true, true);
    $this->ch->basic_qos(0 , 20 , 0); // fair dispatching

    $this->ch->queue_declare(
        $this->defaults['queue']['name'],
        $this->defaults['queue']['passive'],
        $this->defaults['queue']['durable'],
        $this->defaults['queue']['exclusive'],
        $this->defaults['queue']['auto_delete']
    );

    $this->ch->exchange_declare(
        $this->defaults['exchange']['name'],
        $this->defaults['exchange']['type'],
        $this->defaults['exchange']['passive'],
        $this->defaults['exchange']['durable'],
        $this->defaults['exchange']['auto_delete']
    );

    $this->ch->queue_bind(
        $this->defaults['queue']['name'],
        $this->defaults['exchange']['name'],
        $this->defaults['binding']['routing_key']
    );
} 
```

Any help will be appreciated.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-10-30T09:23:02.060

确保您在 Rabbit MQ 上为您的用户添加了虚拟主机访问权限。我创建了新用户并忘记了默认使用的“/”主机的设置访问权限。

您可以通过管理面板 yourhost:15672 > Admin > 单击用户 > 查找“设置权限”来执行此操作。

PS 我假设您的 RabbitMQ 服务正在运行，用户存在且密码正确。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-14T20:17:33.343

实际上，当您的消息中有大量内容并且您的消费者花费太多时间仅处理一条消息时，就会发生此问题，即向兔子响应“ACK”并尝试使用另一条消息的问题。

例如，当我遇到这个问题时，我会尝试“适应”我的消息，因为它是一个产品工作者，并且每条消息都有一些类似 1k 的产品 id，所以我改为 100 个产品并且效果很好。

[您可以在此处](https://www.rabbitmq.com/heartbeats.html)阅读有关使用心跳检测死 TCP 连接的更多信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-13T22:15:17.383

这个问题发生在我与 RabbitMQ 的连接中断时（原因无关紧要，在我的情况下，我故意停止 RabbitMQ 服务以进行一些失败测试），并且我试图通过关闭旧连接并初始化再次重新连接到 RabbitMQ一个新的，但我收到`Broken pipe or closed connection`错误。我解决这个问题的方法是`reconnect()`在我的连接上使用方法：

```
$channel->reconnect(); 
```

# java - 如何将类变量重置为默认值 0？

> ID：15842467
> 
> 赞同：2
> 
> 时间：2013-04-05T19:58:13.113
> 
> 标签：java, android

如果有人能告诉我不同​​的方法来做到这一点，我将不胜感激。如何将类变量重置为 0 或默认值？我使用类变量，因为我不知道另一种方法来做到这一点。在我的游戏结束后，我将结果放在类变量中，因为我有两轮游戏，在第一轮结束后我添加结果，并且类变量对这个原因有好处，即使在我重新启动我的游戏方法后它仍然保留我以前的结果。第二轮结束后，我将该结果添加到上一个结果中，然后关闭活动并将文本结果设置为按钮的文本。但是当我单击新游戏时，该按钮仍然保留该文本，因为类变量仍然保留它。当我进行新游戏时如何重置该类变量？

这是我的游戏代码，其中一些（100分是开始金额，游戏进度会变低）：

```
public class Asocijacije extends Activity implements OnClickListener{

int brojPoenaAsocijacije = 100;
    public static int brojPoenaUkupno; 
```

然后我在这里跳过很多代码，这里是我添加点的地方。brojPoenaAsocijacije 是在该回合中获得的积分：

```
brojPoenaUkupno = brojPoenaUkupno + brojPoenaAsocijacije; 
```

这是我的主要活动，我将类变量中的点设置为按钮（我在其中添加了评论）：

```
public class Izbor extends Activity implements OnClickListener{

    Asocijacije poeni = new Asocijacije();

    Button toploHladno, asocijacije, cigle, spojnice, nazad, poeniTH, poeniAso, poeniCigle, poeniSpojnice;
    TextView naslov;
    public boolean music;
    MediaPlayer buttonClicks, buttonBack;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);   //full screen
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.izbor);

        SharedPreferences getPrefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
        music = getPrefs.getBoolean("checkbox", true);

        addListenerOnButton();

    }

    private void addListenerOnButton() {
        buttonClicks = MediaPlayer.create(this, R.raw.click);
        buttonBack = MediaPlayer.create(this, R.raw.button31);

        Typeface naslovType = Typeface.createFromAsset(getAssets(), "Lobster.ttf");
        Typeface dugmad = Typeface.createFromAsset(getAssets(), "Bebas.ttf");
        naslov = (TextView) findViewById(R.id.tvIzborNaslov);
        toploHladno = (Button) findViewById(R.id.bIzbor1);
        asocijacije = (Button) findViewById(R.id.bIzbor2);
        cigle = (Button) findViewById(R.id.bIzbor3);
        spojnice = (Button) findViewById(R.id.bIzbor4);
        nazad = (Button) findViewById(R.id.bIzborNazad);
        poeniTH = (Button) findViewById(R.id.bPoeniTH);
        poeniAso = (Button) findViewById(R.id.bPoeniAso);
        poeniCigle = (Button) findViewById(R.id.bPoeniCigle);
        poeniSpojnice = (Button) findViewById(R.id.bPoeniSpojnice);
        naslov.setTypeface(naslovType);
        toploHladno.setTypeface(dugmad);
        asocijacije.setTypeface(dugmad);
        cigle.setTypeface(dugmad);
        spojnice.setTypeface(dugmad);
        nazad.setTypeface(dugmad);
        poeniAso.setTypeface(dugmad);

        toploHladno.setOnClickListener(this);
        asocijacije.setOnClickListener(this);
        cigle.setOnClickListener(this);
        spojnice.setOnClickListener(this);
        nazad.setOnClickListener(this);

    }

    @Override
    protected void onStart() {
        super.onStart(); 
        poeniAso.setText("" + poeni.brojPoenaUkupno); //I do it here
    }

    public void onClick(View v) {
        switch(v.getId()){
        case R.id.bIzbor1:
            if(music == true){
                buttonClicks.start();
                    }
            startActivity(new Intent("rs.androidaplikacije.toplo_hladno.GAME"));
            break;
        case R.id.bIzbor2:
            if(music == true){
                buttonClicks.start();
                    }
            startActivity(new Intent("rs.androidaplikacije.toplo_hladno.ASOCIJACIJE"));
            break;
        case R.id.bIzbor3:
            if(music == true){
                buttonClicks.start();
                    }

            break;
        case R.id.bIzbor4:
            if(music == true){
                buttonClicks.start();
                    }

            break;
        case R.id.bIzborNazad:
            if(music == true){
                buttonBack.start();
                    }
            poeniAso.setText("");
            finish();
            break;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:04:22.987

因为我没有找到你开始新游戏的那段代码，我只能说：

```
Asocijacije.brojPoenaUkupno = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T20:16:13.023

当您关闭游戏内活动时，可能希望重置您的状态。

```
@Override
protected void onDestroy() {
    super.onDestroy();
    Asocijacije.brojPoenaUkupno = 0;
    //whatever other things need to be reset.
} 
```

# sql - 如何使用 Perl DBI sqlite 从日志文件中获取信息并将它们添加到数据库表中

> ID：15842468
> 
> 赞同：0
> 
> 时间：2013-04-05T19:58:18.970
> 
> 标签：sql, perl, sqlite, cpan, dbi

我有这个任务要求我从这个日志文件中获取源 ip 和目标端口，并将它们添加到我使用 Perl dbi sqlite 创建的数据库表中。我试图编写一个脚本来做到这一点，但它似乎不起作用。我将不胜感激任何帮助。日志文件位于 [http://fleming0.flemingc.on.ca/~chbaker/COMP234-Perl/sample.log](http://fleming0.flemingc.on.ca/~chbaker/COMP234-Perl/sample.log)

这是我到目前为止的代码。

```
#!/usr/bin/perl

use strict;
use warnings;
use DBI;

my %ip2port;
my $IPCount = keys %ip2port;
my $portCount = 0;
my $filename = "./sample.log";
open my $LOG, "<", $filename or die "Can't open $filename: $!";
LINE: while (my $line = <$LOG>) {
my ($src_id) = $line =~ m!SRC=([.\d]+)!gis; my ($dst_port) = $line =~ m!DPT=([.\d]+)!gis;
my $dbh = DBI->connect(          
    "dbi:SQLite:dbname=test.db", 
    "",                          
    "",                          
    { RaiseError => 1 },         
) or die $DBI::errstr;

$dbh->do("INSERT INTO probes VALUES($src_id, $dst_port )");
$dbh->do("INSERT INTO probes VALUES(2,'$dst_port',57127)");
my $sth = $dbh->prepare("SELECT SQLITE_VERSION()");
$sth->execute();

my $ver = $sth->fetch();

print @$ver;
print "\n";

$sth->finish();
$dbh->disconnect();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:04:32.007

1）改变你的正则表达式：

```
my ($src_id) = $line =~ m!SRC=([\.\d]+)!g; 
my ($dst_port) = $line =~ m!DPT=([\d]+)!g; 
```

2）改变你的SQL

```
$dbh->do("INSERT INTO probes VALUES('$src_id', $dst_port )"); 
```

**UPDATE** 无论如何，最好用参数绑定构建sql语句并避免SQL注入问题：

```
$dbh->do("INSERT INTO probes VALUES(?,?)", undef, $src_id, $dst_port); 
```

# c++ - 使用 OpenCV 在图像上创建矩形区域蒙版

> ID：15842470
> 
> 赞同：2
> 
> 时间：2013-04-05T19:58:24.240
> 
> 标签：c++, opencv, computer-vision

有一张以`cv::Mat`格式读取的图像，我只想在图像中心保留一个要检测的矩形区域。我尝试了这种`cvCopy`方法，但它需要图像格式，`cvArr`有没有人知道如何实现仍然使用`Mat`的格式？

* * *

有我创建蒙版的代码和屏幕截图，蒙版的大小与原始帧不匹配似乎很奇怪。请问这里有什么提示吗？

```
 *cap >> frame1;
    Rect roi(100,100,100,100);
    for(int i =0; i<frame1.rows; i++)
    {
        for(int j=0; j<frame1.cols;j++)
        {
            if(!roi.contains(Point(i,j)))
            {
                frame1.at<uchar>(i,j) = 0;
            }
        }
    } 
```

![在此处输入图像描述](https://i.stack.imgur.com/PQZYh.jpg)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T17:00:33.240

只需创建引用相同数据的新图像。

```
cv::Rect const mask(x1, y1, x2, y2);
cv::Mat roi = image(mask); 
```

现在您可以进行*roi*处理。对 roi 的所有更改也将应用于图像。

# gdb - 每次都让 GDB 打印上下文

> ID：15842484
> 
> 赞同：4
> 
> 时间：2013-04-05T19:59:22.653
> 
> 标签：gdb

LLDB 每次都围绕当前行打印上下文，如下所示：

```
 int a = 12;
     int b = a * 13;
->   printf("%d\n", b);
     return 0;
   } 
```

同时，GDB 只打印一个当前行：

```
->   printf("%d\n", b); 
```

我可以像 LLDB 一样让 GDB 在每一步都打印上下文吗？谷歌搜索给出了所有列表命令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-10T14:57:41.727

实现此目的的一种方法可能是定义一个重新定义关键字的宏，例如“s”或“n”。例如，如果您想在每一步打印出堆栈指针的值，您可以通过在 (gbd) 控制台中输入这些行来重新定义“s”：

```
def s
step
info registers sp
end 
```

现在每次使用命令“s”时，实际上都会执行一步并打印 sp 寄存器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-24T18:50:15.813

没有内置的方法可以做到这一点。

您可以使用 hookpost-stop 调用显式列表命令使其工作。

不过，我认为大多数人只是使用众多 gdb GUI 之一。

# python - invalid token error on "01" in python

> ID：15842487
> 
> 赞同：0
> 
> 时间：2013-04-05T19:59:32.943
> 
> 标签：python, python-3.x, syntax-error

I have started learning today the python. And during my lecture on variables I found that whenever I try to **assign a value starting with 0** it gives:

```
syntax error :Invalid token 
```

Like

```
zip=01290
zip=01 
```

but when I tried simple

```
zip=0 
```

it does not give any error.

I guess I am writing the code right because I have checked the syntax on internet.

Is it a problem in python or something else?

# c++ - SOIL OpenGL LNK2019 error

> ID：15842488
> 
> 赞同：1
> 
> 时间：2013-04-05T19:59:35.170
> 
> 标签：c++, opengl, textures, soil

working with OpenGL using the SOIL Texture binding library. However whenever I try and load a texture, I get these errors:

```
1>libsoil.a(stb_image_aug.o) : error LNK2019: unresolved external symbol ___chkstk_ms referenced in function _stbi_jpeg_load_from_file
1>libsoil.a(image_helper.o) : error LNK2019: unresolved external symbol _sqrtf referenced in function _RGBE_to_RGBdivA2
1>C:\Users\Student\Dropbox\Work\Year 2\Graphics 1\Coursework\GraphicsCoursework\Debug\GraphicsCoursework.exe : fatal error LNK1120: 2 unresolved externals 
```

The code I use to load these textures is as such:

```
int Platform::loadTexture(){
GLuint tex_plat = SOIL_load_OGL_texture(
            "platform.png",
            SOIL_LOAD_AUTO,
            SOIL_CREATE_NEW_ID,
            SOIL_FLAG_MIPMAPS | SOIL_FLAG_INVERT_Y | SOIL_FLAG_NTSC_SAFE_RGB | SOIL_FLAG_COMPRESS_TO_DXT
            );

    if( tex_plat > 0 )
    {
        glEnable( GL_TEXTURE_2D );
        glBindTexture( GL_TEXTURE_2D, tex_plat );
        return tex_plat;
    }
    else{
        return 0;
    }
} 
```

Any idea as to what these errors mean?

# python - python: writing HTML in python function. syntaxError: expected an intended block

> ID：15842490
> 
> 赞同：-1
> 
> 时间：2013-04-05T19:59:44.903
> 
> 标签：python, syntax

i am trying to generate a html checkbox within a python function. this is my code

```
import HTML 
def CreateEvent(str):
"This prints a passed string into this function"
   print str;
   return;

CreateEvent ('''
content-type: text/html 

 <html> 
 <head> 
 <title> the list of all possible events that can be notified by our system </title> 
 </head> 
 <body> 
<form>
<input type="checkbox" name="tsunami" value="tsunami">tsunami<br>
<input type="checkbox" name="earthquake" value="earthquake">earthquake<br>
<input type="checkbox" name="volcano" value="volcano">volcano<br>
<input type="checkbox" name="hurricane" value="hurricane">hurricane<br>
<input type="checkbox" name="sinkholes" value="sinkholes">sinkholes<br>
<input type="checkbox" name="tornado" value="tornado">tornado<br>
<input type="checkbox" name="landslide" value="landslide">landslide<br>
<input type="checkbox" name="downburst" value="downburst">downburst<br>
</form>

<input type="submit" value="Submit">
</body>
</html>
''') 
```

but when i try to compile it , it is giving the syntax error: expected an intended block. please let me know how to solve this problem.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:13:52.300

您在评论中没有缩进。

注意：评论是`"""`和不是`"`

```
import HTML 
def CreateEvent(str):
    """This prints a passed string into this function"""
    #^ Indentation space needed here - Also docstrings are represented with """ and not "
    print str
    #Good practice to have 4 spaces as indentation.
    return
    #     ^ No need of ; 
```

一个好主意是安装`pep8`python 库并执行

```
pep8 <filename>.py 
```

并解决问题（如果有）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T20:03:20.950

您需要正确缩进：

```
def CreateEvent(str):
    "This prints a passed string into this function"
    ... 
```

[...根据 PEP8](http://www.python.org/dev/peps/pep-0008/#documentation-strings)，这应该是一个三引号字符串

...并且不要在行尾放置分号

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T20:08:40.223

错误消息的名称应该让您了解问题所在。

您没有正确**缩进**，因此您得到“syntaxError: expected an indented **block** ”。

此外，在 Python 中，行不以分号结尾，这不是 C#。

我建议阅读基本[Python 指南](http://wiki.python.org/moin/BeginnersGuide)和阅读[Python 教程](http://docs.python.org/2/tutorial/)

# java - 在listview android中定位字符串

> ID：15842495
> 
> 赞同：3
> 
> 时间：2013-04-05T20:00:02.260
> 
> 标签：java, android, list, listview

```
 listView.setOnItemClickListener(new OnItemClickListener() {
          @Override
          public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {

                if(position == 1 ){
                    Toast.makeText(getApplicationContext(),
                    "Click ListItem Number " + position,
 Toast.LENGTH_LONG)
                    .show();
                }else{
                     } 
```

我有一个来自自定义适配器的列表视图，它工作正常，当我单击一个项目时，它会获得正确的位置。我如何从位置中提取字段视图文本。IE

```
 holder.txtDesc = (TextView) convertView.findViewById(R.id.desc); 
```

我想将 desc 字段从我单击的位置列表中定位出来。我知道您可以使用哈希映射，但是有没有办法仅通过列表位置来定位项目单击时的字段视图？我知道这是“webby”，但我确信 java 具有相同的灵活性

```
 public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder = null;
    RowItem rowItem = getItem(position);

    LayoutInflater mInflater = (LayoutInflater) context
            .getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.list_item, null);
        holder = new ViewHolder();
        holder.txtDesc = (TextView) convertView.findViewById(R.id.desc);
        holder.txtTitle = (TextView) convertView.findViewById(R.id.title);
        convertView.setTag(holder);
    } else
        holder = (ViewHolder) convertView.getTag();

    holder.txtDesc.setText(rowItem.getDesc());
    holder.txtTitle.setText(rowItem.getTitle());

    return convertView;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:20:55.407

> 我如何从位置中提取字段视图文本。IE
> 
> ```
> holder.txtDesc = (TextView) convertView.findViewById(R.id.desc); 
> ```

在里面`onItemClick()`你可以使用：

```
TextView textview = (TextView) view.findViewById(R.id.desc);
// Now use textView.getText().toString() to get the description 
```

由于`convertView`来自适配器的对象与侦听器中的对象相同`view`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:16:08.183

你不能打电话`adapter.getItem(position)`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T21:01:03.637

1.  如果您只需要文本当前项目使用 BaseAdapter ，您可以通过以下方式获取文本：

    （字符串）适配器.getItem（位置）；

2.  如果您需要 TextView 对象当前项目，您可以通过以下方式获取 TextView： listView.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView parent, View view, int position, long id) {
    ViewHolder holder = (ViewHolder)view;
    TextView txtDescTV = holder.txtDesc;
    }
    }

# c# - 是否可以覆盖 MultipartFormDataStreamProvider 以便不将上传保存到文件系统？

> ID：15842496
> 
> 赞同：31
> 
> 时间：2013-04-05T20:00:08.997
> 
> 标签：c#, asp.net-web-api

我有一个 ASP.Net Web API 应用程序，它允许客户端（html 页面和 iPhone 应用程序）将图像上传到。我正在使用[本文](http://www.codeguru.com/csharp/.net/uploading-files-asynchronously-using-asp.net-web-api.htm)所述的异步上传任务。

当我想保存到文件系统时，一切都很好，因为这就是这段代码自动执行的操作，看起来在幕后。但是，我不想将上传的文件保存到文件系统中。相反，我想获取上传的流并使用适用于 .Net 的 AWS 开发工具包将其传递到 Amazon S3 存储桶。

我设置了将流发送到 AWS 的代码。我不知道的问题是如何从 Web API 方法获取上传的内容流，而不是让它自动保存到磁盘。

我希望有一个可以在*MultipartFormDataStreamProvider*中覆盖的虚拟方法，它允许我对上传的内容执行其他操作，而不是保存到磁盘，但似乎没有。

有什么建议么？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-04-05T20:56:48.830

您可以覆盖 MultipartFormDataStreamProvider 的 GetStream 方法以返回一个不是文件流而是您的 AWS 流的流，但是这样做会出现一些问题（我不会在这里详细说明）。相反，您可以创建一个派生自抽象基类 MultipartStreamProvider 的提供程序。以下示例很大程度上基于 MultipartFormDataStreamProvider 和 MultipartFileStreamProvider 的实际源代码。您可以**[在此处](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/b4631c0ef899fdccf210cda4c0e39591e67537b7#src/System.Net.Http.Formatting/MultipartFormDataStreamProvider.cs)**和**[此处](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/b4631c0ef899fdccf210cda4c0e39591e67537b7#src/System.Net.Http.Formatting/MultipartFileStreamProvider.cs)**查看更多详细信息。下面的示例：

```
public class CustomMultipartFormDataStreamProvider : MultipartStreamProvider
{
    private NameValueCollection _formData = new NameValueCollection(StringComparer.OrdinalIgnoreCase);

    private Collection<bool> _isFormData = new Collection<bool>();

    private Collection<MyMultipartFileData> _fileData = new Collection<MyMultipartFileData>();

    public NameValueCollection FormData
    {
        get { return _formData; }
    }

    public Collection<MultipartFileData> FileData
    {
        get { return _fileData; }
    }

    public override Stream GetStream(HttpContent parent, HttpContentHeaders headers)
    {
        // For form data, Content-Disposition header is a requirement
        ContentDispositionHeaderValue contentDisposition = headers.ContentDisposition;
        if (contentDisposition != null)
        {
            // If we have a file name then write contents out to AWS stream. Otherwise just write to MemoryStream
            if (!String.IsNullOrEmpty(contentDisposition.FileName))
            {
                // We won't post process files as form data
                _isFormData.Add(false);

                 MyMultipartFileData fileData = new MyMultipartFileData(headers, your-aws-filelocation-url-maybe);
                 _fileData.Add(fileData);

                return myAWSStream;//**return you AWS stream here**
            }

            // We will post process this as form data
            _isFormData.Add(true);

            // If no filename parameter was found in the Content-Disposition header then return a memory stream.
            return new MemoryStream();
        }

        throw new InvalidOperationException("Did not find required 'Content-Disposition' header field in MIME multipart body part..");
    }

    /// <summary>
    /// Read the non-file contents as form data.
    /// </summary>
    /// <returns></returns>
    public override async Task ExecutePostProcessingAsync()
    {
        // Find instances of HttpContent for which we created a memory stream and read them asynchronously
        // to get the string content and then add that as form data
        for (int index = 0; index < Contents.Count; index++)
        {
            if (_isFormData[index])
            {
                HttpContent formContent = Contents[index];
                // Extract name from Content-Disposition header. We know from earlier that the header is present.
                ContentDispositionHeaderValue contentDisposition = formContent.Headers.ContentDisposition;
                string formFieldName = UnquoteToken(contentDisposition.Name) ?? String.Empty;

                // Read the contents as string data and add to form data
                string formFieldValue = await formContent.ReadAsStringAsync();
                FormData.Add(formFieldName, formFieldValue);
            }
        }
    }

    /// <summary>
    /// Remove bounding quotes on a token if present
    /// </summary>
    /// <param name="token">Token to unquote.</param>
    /// <returns>Unquoted token.</returns>
    private static string UnquoteToken(string token)
    {
        if (String.IsNullOrWhiteSpace(token))
        {
            return token;
        }

        if (token.StartsWith("\"", StringComparison.Ordinal) && token.EndsWith("\"", StringComparison.Ordinal) && token.Length > 1)
        {
            return token.Substring(1, token.Length - 2);
        }

        return token;
    }
}

public class MyMultipartFileData
{
    public MultipartFileData(HttpContentHeaders headers, string awsFileUrl)
    {
        Headers = headers;
        AwsFileUrl = awsFileUrl;
    }

    public HttpContentHeaders Headers { get; private set; }

    public string AwsFileUrl { get; private set; }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-09-27T12:48:10.367

由于@KiranChalla 发布了他们的答案， Fix 1760[`MultipartFormDataRemoteStreamProvider`](https://msdn.microsoft.com/en-us/library/system.net.http.multipartformdataremotestreamprovider.aspx)中引入了一个新的抽象类[：使 MultipartFormDataStreamProvider 更易于使用非 FileStreams。](https://github.com/ASP-NET-MVC/aspnetwebstack/commit/a195b5b7102d791aaa2e98111608a34a3f2a6564)使这更容易。

该类的摘要很好地解释了如何使用它：

> 一种`MultipartStreamProvider`适用于 HTML 文件上传的实现，用于将文件内容写入远程存储`Stream`。流提供程序查看 Content-Disposition 标头字段并根据`Stream`文件名参数的存在确定输出远程。如果 Content-Disposition 标头字段中存在文件名参数，则正文部分将写入`Stream`由`GetRemoteStream`. 否则，它被写入一个`MemoryStream`.

# ajax - How to remember last ajax state when click back in browse

> ID：15842500
> 
> 赞同：0
> 
> 时间：2013-04-05T20:00:17.580
> 
> 标签：ajax

I have category browsing page initially shows 48 products, and after customers click a next button, it triggers ajax call to load next 48 products, so then the page has 96 products and the url keeps the same. And then, customers click one product from the page, and go to the product page, and then they click back in the browse going back to the browsing page, and the page is reloading and 24 products are shown.

So my question is that how to keep the last ajax state, so when customers click back, they still see 48 results.

I see LLBean can do it, but wondering how to implement this? [http://www.llbean.com/llb/shop/509723?nav=ln-26&page=active-clothing](http://www.llbean.com/llb/shop/509723?nav=ln-26&page=active-clothing)

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T19:25:00.713

是的，您可以使用客户端的 cookie 存储或服务器端的会话数据来执行此操作。我想我会推荐 cookie 存储，因为这是非常基本的不敏感数据。

您可以使用以下代码来写入、读取和擦除 cookie 数据：

```
function createCookie(name, value, days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        var expires = "; expires=" + date.toGMTString();
    } else var expires = "";
    document.cookie = escape(name) + "=" + escape(value) + expires + "; path=/";
}

function readCookie(name) {
    var nameEQ = escape(name) + "=";
    var ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) == 0) return unescape(c.substring(nameEQ.length, c.length));
    }
    return null;
}

function eraseCookie(name) {
    createCookie(name, "", -1);
} 
```

例如，您可以设置一个名为的 cookie`numResults`来存储客户端正在浏览的结果数量：

```
var data = readCookie("numResults");
if (data != null && data != "") {
    //in this case, you have your data, load this many results
} else {
    createCookie("numResults", 48, 30); //create the cookie, if it doesn't already exist
} 
```

当您进行 ajax 调用以增加结果数时，只需添加：

```
createCookie("numResults", newNumber, 30); 
```

# silverlight - Silverlight PropertyChanged 事件未在双向文本框绑定中触发

> ID：15842502
> 
> 赞同：0
> 
> 时间：2013-04-05T20:00:29.250
> 
> 标签：silverlight, events, binding, propertychanged

如果类属性双向绑定到文本框的文本属性，当我更改文本框中的文本时，是否应该触发该类的“PropertyChanged”事件？在我的情况下不是 - 当我更改文本框内容时，消息框永远不会弹出。但是，如果属性更改文本框更改，则绑定有效，反之亦然。

编辑：现在我意识到它会触发，但只有在文本框失去焦点时才会触发。我想这种行为背后一定有原因。

代码：

```
 public class BaselineAreas : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;
        private double _Impervious = 0;
        public double Impervious
        {
            get { return _Impervious; }
            set
            {
                if (value != this._Impervious)
                {
                    _Impervious = value;
                    NotifyPropertyChanged("Impervious");
                }
            }
        }
        private double _Pervious = 0;
        public double Pervious
        {
            get { return _Pervious; }
            set
            {
                if (value != this._Pervious)
                {
                    _Pervious = value;
                    NotifyPropertyChanged("Pervious");
                }
            }
        }
        public void NotifyPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }
    }

    private BaselineAreas baselineAreas = new BaselineAreas();

    public MainPage()
    {
        InitializeComponent();

        baselineAreas.Impervious = 100;
        baselineAreas.Pervious = 500;
        textBoxTotalImperviousArea.DataContext = baselineAreas;
        textBoxTotalPerviousArea.DataContext = baselineAreas;
        baselineAreas.PropertyChanged += new PropertyChangedEventHandler(baselineAreas_PropertyChanged);
    }

    void baselineAreas_PropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        MessageBox.Show(baselineAreas.Impervious.ToString());
    } 
```

xml:

```
 <TextBox Height="23" HorizontalAlignment="Left" Margin="138,16,0,0" Name="textBoxTotalImperviousArea" VerticalAlignment="Top" Width="62" 
                         Text="{Binding Impervious, Mode=TwoWay}"/>
                <TextBox Height="23" HorizontalAlignment="Right" Margin="0,45,226,0" Name="textBoxTotalPerviousArea" VerticalAlignment="Top" Width="62" 
                         Text="{Binding Pervious, Mode=TwoWay}"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:30:59.853

可以在 XAML 中为文本框提供一种行为，以使其在每次字符更改时更新：

[http://dotneteers.net/blogs/vbandi/archive/2009/12/24/make-a-silverlight-textbox-update-its-binding-on-every-character.aspx](http://dotneteers.net/blogs/vbandi/archive/2009/12/24/make-a-silverlight-textbox-update-its-binding-on-every-character.aspx)

# ruby-on-rails - 使用 turbo-sprockets-rails3 预编译资产时出错

> ID：15842503
> 
> 赞同：0
> 
> 时间：2013-04-05T20:00:32.487
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2, asset-pipeline

我已经为 capistrano 预编译资产安装了[turbo-sprockets-rails3](https://github.com/ndbroadbent/turbo-sprockets-rails3) gem。

我已经添加`load 'deploy/assets'`到我`Capfile`的并且部署完成了。

但是，当我尝试在远程服务器上加载我的应用程序时，我可以在`production.log`文件中看到下一个错误：

```
ActionView::Template::Error (bootstrap-modalmanager.js isn't precompiled):
    7:     <%= display_meta_tags :site => "9cvs" %>
    8:     <%= stylesheet_link_tag    "application", :media => "all" %>
    9:     <%= javascript_include_tag "application" %>
    10:     <%= javascript_include_tag "bootstrap-modalmanager" %>
    11:     <%= javascript_include_tag "jquery.back_to_top" %>
    12:     <%= javascript_include_tag "swfobject" %>
    13:     <%= csrf_meta_tags %> 
```

`bootstrap-modalmanager.js`在`vendor/javascripts/`文件夹中找到。我也有里面的css文件和文件夹里面`vendor/stylesheets/`的swf文件`vendor/flash/`。

**如何正确预编译这些资产？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:07:29.613

你需要在你的`production.rb`

```
config.assets.precompile += ['bootstrap-modalmanager.js', 'jquery.back_to_top.js', 'swfObject.js'] 
```

# c - 将 PTX 程序直接传递给 CUDA 驱动程序

> ID：15842507
> 
> 赞同：6
> 
> 时间：2013-04-05T20:00:55.593
> 
> 标签：c, cuda, ptx

CUDA 驱动程序 API 提供从文件系统加载包含 PTX 代码的文件。通常会执行以下操作：

```
CUmodule module;
CUfunction function;

const char* module_file = "my_prg.ptx";
const char* kernel_name = "vector_add";

err = cuModuleLoad(&module, module_file);
err = cuModuleGetFunction(&function, module, kernel_name); 
```

如果在运行时（即时）生成 PTX 文件，则通过文件 IO 似乎是一种浪费（因为驱动程序必须再次加载它）。

有没有办法将 PTX 程序直接传递给 CUDA 驱动程序（例如作为 C 字符串）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T20:13:41.440

取自`ptxjit`CUDA 示例：

将 PTX 程序定义为 C 字符串

```
char myPtx32[] = "\n\
    .version 1.4\n\
    .target sm_10, map_f64_to_f32\n\
    .entry _Z8myKernelPi (\n\.param .u32 __cudaparm__Z8myKernelPi_data)\n\
    {\n\
    .reg .u16 %rh<4>;\n\
    .reg .u32 %r<8>;\n\

    // Other stuff

    .loc    28      18      0\n\
    exit;\n\
    }\n\
 "; 
```

然后

```
 cuModuleLoadDataEx(phModule, myPtx32, 0, 0, 0); 
```

最后

```
 cuModuleLoadDataEx(phModule, myPtx, 0, 0, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:16:54.923

使用[cuModuleLoadDataEx](http://docs.nvidia.com/cuda/cuda-driver-api/index.html#group__CUDA__MODULE_1g9e8047e9dbf725f0cd7cafd18bfd4d12)函数从以 NULL 结尾的字符串加载 PTX 源。

# motorola-droid - ADB doesn't detect Motorola Droid

> ID：15842509
> 
> 赞同：1
> 
> 时间：2013-04-05T20:00:58.473
> 
> 标签：motorola-droid, adb

I have a Motorola Droid1 phone, running android 2.2.3 (not rooted). When I run `adb devices` it doesn't detect the Droid. I checked in Device Manager on my 64bit Win8 machine, and I see an **Android ADB Interface** listed there. I never had this problem with my other Motorola phones (Droid X1, Droid X2, Droid Bionic).

I have tried many things: - reinstall Motorola USB drivers - kill adb process - kill adb server - restart the machine - factory-reset the phone - pub 0x22B8 into adb_usb.ini

Nothing helps. Has anybody experienced a similar issue?

Thanks, Igor

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T19:38:08.207

我从来没有能够让我的摩托罗拉 Droid（第一代）在 Windows 8 中通过 ADB 连接，即使有上述所有设置。Windows 8 64 位中的其他设备使用这些设置。虽然不是我原来的摩托罗拉机器人。

但是，一旦完成上述所有设置，ADB 就可以在 Windows 7 64 位中为我工作。我认为适用于 Windows 8 的现代 ADB USB 驱动程序只有一半支持与原始 Droid 一样古老的设备。这很令人沮丧，但我现在不知道有什么其他方法可以解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-14T12:51:04.320

我遇到了同样的问题，然后尝试关闭 USB 调试，然后设法连接。

# php - PHP类不存储引用

> ID：15842510
> 
> 赞同：6
> 
> 时间：2013-04-05T20:01:03.910
> 
> 标签：php, pass-by-reference

如何将引用传递给对象构造函数，并允许该对象更新该引用？

```
class A{
    private $data;
    function __construct(&$d){
        $this->data = $d;
    }
    function addData(){
        $this->data["extra"]="stuff";
    }
}

// Somewhere else
$arr = array("seed"=>"data");
$obj = new A($arr);
$obj->addData();

// I want $arr to contain ["seed"=>"data", "extra"=>"stuff"]
// Instead it only contains ["seed"=>"data"] 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-05T20:03:14.480

您必须将其存储在任何地方作为参考。

```
function __construct (&$d) {
    $this->data = &$d; // the & here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T20:06:30.803

您必须告诉 PHP 也为私有成员分配一个引用，`data`如下所示：

```
$this->data = &$d; 
```

根据上下文，您可能不想使用对外部数组的引用，最好将该数组放在处理它的对象中。

另外请注意，构造函数被称为`__construct`not `__construction`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-09T08:56:13.497

这将满足您的要求：

```
class Test {

    private $storage;

    public function __construct(array &$storage)
    {
        $this->storage = &$storage;
    }

    public function fn()
    {
        $this->storage[0] *= 10;
    }
}

$storage = [1];

$a = new Test($storage);
$b = new Test($storage);

$a->fn();
print_r($a); // $storage[0] is 10
print_r($b); // $storage[0] is 10

$b->fn();
print_r($a); // $storage[0] is 100
print_r($b); // $storage[0] is 100 
```

### 备选方案 1

除了使用数组，您还可以使用[`ArrayObject`](http://php.net/ArrayObject),[`ArrayIterator`](http://php.net/ArrayIterator)或[`SplFixedArray`](http://php.net/SplFixedArray)。由于这些是对象，它们将通过引用传递。所有这些实现[`ArrayAccess`](http://php.net/ArrayAccess)，因此您可以通过方括号访问它们，例如

```
$arrayObject = new ArrayObject;
$arrayObject['foo'] = 'bar';
echo $arrayObject['foo']; // prints 'bar' 
```

### 备选方案 2

不要使用泛型类型，而是使用专用类型。找出您在该数组中存储的内容。是`Config`吗？一个`Registry`？一个`UnitOfWork`？找出它到底是什么。然后让它成为一个对象，并给它一个反映职责的 API。然后注入该对象并通过该 API 访问它。

[有关何时制作类型的一些指导，](http://martinfowler.com/ieeeSoftware/whenType.pdf)请参阅 Martin Fowler 的这篇论文

# php - tcpdf auto size text field

> ID：15842511
> 
> 赞同：2
> 
> 时间：2013-04-05T20:01:07.953
> 
> 标签：php, pdf-generation, tcpdf

I am having trouble getting a text field to auto size on a form I'm creating. I am setting the textSize of the properties to 0 in the properties of the TextField but it seems to just use the font set for the document. Here is the code I am using to create the TextField.

```
$pdf->TextField('description', 195, 32, array('multiline'=>true, 'lineWidth'=>0, 'borderStyle'=>'none', 'textSize'=>0), array('v'=>$description)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T14:07:22.283

我知道一种可能解决此问题的迂回方法..

在您的文本字段代码之前，您希望您的字体是什么（不是整个文档的默认字体），您可以随时尝试：

```
$pdf->SetFont('fontName','',fontSize); 
```

在您的文本字段代码之后，只需将字体设置回您想要的文档其余部分的字体即可。

不确定这是否正是您想要的，但我希望它有所帮助。祝你好运与这一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-16T21:29:59.403

我也面临着那个确切的问题。我花了很长时间才找到解决方案。

要使字段自动调整文本内容的大小，必须将字段的字体大小设置为 0。看起来 TCPDF 不支持 javascript`textSize`选项（见末尾[`TCPDF_STATIC::getAnnotOptFromJSProp()`](https://github.com/tecnickcom/TCPDF/blob/64fc19439863e1b1314487a72a74d9bfd0b55a53/include/tcpdf_static.php#L1003)），因此我们必须将字体大小设置为 0在字段之前，并在文本字段之后再次设置回其原始值：

```
// Beware to use getFontSize*Pt* and not getFontSize.
// getFontSizePt gets the size in pt, and getFontSize gets the size in user units
// (units you gave when you created TCPDF object or default to mm)
// We need to set it again back with SetFontSize() which takes the font size in pt
$originalFontSize = $pdf->getFontSizePt();
$pdf->SetFontSize(0);
$pdf->TextField($name, $w, $h);
$pdf->SetFontSize($originalFontSize); 
```

# php - zf2 doctrine odm collection hydration

> ID：15842512
> 
> 赞同：0
> 
> 时间：2013-04-05T20:01:08.313
> 
> 标签：php, zend-framework2, doctrine-odm

Hi everybody Im using doctrine ODM and have trouble with hydrator. I can't make **extract** on document with embed collection nor reference Class. the extract result for these class give me object and i really need to have them in array for rest module which is consumed by backbone implementation. Here a example class : Analyse.php Document

```
<?php
namespace Application\Document;

use Doctrine\ODM\MongoDB\Mapping\Annotations as ODM;
use Doctrine\Common\Collections\Collection;

/**
 * Application\Document\Analyse
 *
 * @ODM\Document(collection="analyse")
 */
class Analyse extends BaseDocument
{
    /**
     * @ODM\Id
     */
    protected $id;

    /**
     * @ODM\Field(type="string")
     */
    protected $nom;

    /**
     * @ODM\Field(type="string")
     * @ODM\Index
     */
    protected $alias;

    /**
     * @ODM\EmbedMany(targetDocument="ElementsAnalyse")
     */
    protected $elements = array();

    public function __construct()
    {
        parent::__construct();
        $this->elements = new \Doctrine\Common\Collections\ArrayCollection();
    }

    public function getId()
    {
        return $this->id;
    }

    public function setNom($nom)
    {
        $this->nom = $nom;
        return $this;
    }

    public function getNom()
    {
        return $this->nom;
    }

    public function setAlias($alias)
    {
        $this->alias = $alias;
        return $this;
    }

    public function getAlias()
    {
        return $this->alias;
    }

    public function addElements(Collection $elements)
    {
        foreach ($elements as $element) {
            $this->elements->add($element);
        }

    }

    public function removeElements(Collection $elements)
    {
        foreach ($elements as $item) {
            $this->elements->removeElement($item);
        }
    }

    public function getElements()
    {
        return $this->elements;
    }

} 
```

ElementAnalyse.php Collection

```
<?php

namespace Application\Document;

use Doctrine\ODM\MongoDB\Mapping\Annotations as ODM;
use Doctrine\Common\Collections\Collection;

/**
 * Application\Document\Valeurnormales
 *
 * @ODM\EmbeddedDocument
 *
 */
class ElementsAnalyse
{

    /**
     * @ODM\Field(type="string")
     */
    protected $nom;

    /**
     * @ODM\Field(type="string")
     */
    protected $unite;

    /**
     * @ODM\EmbedMany(targetDocument="ValeurNormales")
     */
    protected $valeurnormales = array();

    /**
     * @ODM\Field(type="string")
     */
    protected $type;

    public function __construct()
    {
        $this->valeurnormales = new \Doctrine\Common\Collections\ArrayCollection();
    }

    /**
     * Set nom
     */
    public function setNom($nom)
    {
        $this->nom = $nom;
        return $this;
    }

    /**
     * Get nom
     */
    public function getNom()
    {
        return $this->nom;
    }

    /**
     * Set unite
     */
    public function setUnite($unite)
    {
        $this->unite = $unite;
        return $this;
    }

    /**
     * Get unite
     *
     * @return string
     */
    public function getUnite()
    {
        return $this->unite;
    }

    /**
     * add valeurnormales
     */
    public function addValeurnormales(Collection $vn)
    {
        foreach ($vn as $item) {
            $this->valeurnormales->add($item);
        }
    }

    public function removeValeurnormales(Collection $vn)
    {
        foreach ($vn as $item) {
            $this->valeurnormales->removeElement($item);
        }
    }

    /**
     * Get valeurnormales
     */
    public function getValeurnormales()
    {
        return $this->valeurnormales;
    }

    /**
     * Set type
     *
     * @param $type
     * @return Analyse
     */
    public function setType($type)
    {
        $this->type = $type;
        return $this;
    }

    /**
     * Get type
     *
     * @return Type
     */
    public function getType()
    {
        return $this->type;
    }

    /**
     * toArray function
     */
    public function toArray()
    {
        return get_object_vars($this);
    }

    /**
     * fromArray function
     *
     */
    public function fromArray(array $array)
    {
        $objects = $this->toArray();
        foreach($array as $item => $value)
        {
            if(array_key_exists($item, $objects))
            {
                $this->$item = $value;
            }
        }
    }

} 
```

Here my getList Method

```
public function getList()
    {
        $hydrator = new DoctrineHydrator($entityManager, 'Application\Document\Analyse');

        $service = $this->getAnalyseService();
        $results = $service->findAll();

        $data = $hydrator->extract($results);
        return new JsonModel($data);
    } 
```

And obviously var_dump($data['elements']) return object Collection or proxy class Can You help me. Anything will be appreciated it been 2 weeks i can't make it work. Read about Hydrator Strategy out there but i don't knnow how to implement it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-30T23:55:14.167

目前，Doctrine ODM 实现不为嵌入对象和引用提供递归。

如果您`var_dump()`在 上使用`$hydrator->extract($results)`，您会看到所有嵌入/引用都以其原始对象格式存在。

您可以在这里做的是使用[Zend\Stdlib\Hydrator\Strategy](http://framework.zend.com/manual/2.3/en/modules/zend.stdlib.hydrator.strategy.html)，并定义您自己的提取/水合逻辑。Doctrine 扩展了 Zend Framework 2 的 hydrators 和策略。

# eclipse-plugin - 管理目标定义

> ID：15842515
> 
> 赞同：0
> 
> 时间：2013-04-05T20:01:13.660
> 
> 标签：eclipse-plugin, tycho

我有一个具有自定义核心 JFace 和 SWT 实现的核心插件。UI插件依赖于核心插件，并通过更新站点使用目标定义使用核心插件。一切正常。但是，我在 Jenkins 中构建了一个核心 ui 插件，并且 UI 插件作业依赖于核心插件作业，因此当核心重建时，UI 也会重建。事情是这样的，如果我在核心的 POM 中使用 0.0.1-SNAPSHOT 作为版本，那么目标定义中的核心版本是用最新的核心版本定义的。因此，如果使用 0.0.1-20130405 将核心添加到目标定义，构建将正常工作，但如果我明天重建核心，目标定义中的版本将与核心将具有的版本不匹配 - 0.0.1-20130405 与 0.0.1 -20130406。我将不得不手动为目标定义中的核心重新添加软件更新站点。

有没有办法管理目标定义，以便使用最新的核心进行更新。也许还有另一种我没有看到的做我需要的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:07:12.137

在许多情况下 - 包括目标定义 - 您可以指定特殊版本号 0.0.0 来表示给我最新版本。

# security - SSRS 角色的重要性？报告取决于存储过程的权限

> ID：15842519
> 
> 赞同：0
> 
> 时间：2013-04-05T20:01:34.703
> 
> 标签：security, reporting-services, ssrs-2008

我有一组使用存储过程的 SSRS 报告，我想向某人提供仅查看报告的访问权限。我相信这可以通过分配用户/组“浏览器”SSRS 角色来完成。但它不起作用。

只能通过授予/拒绝对底层存储过程的 EXECUTE 权限来授予/拒绝报告访问权限。

我在这里错过了什么吗？如果以上是真的，那么SSRS角色的意义何在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:30:56.333

数据源权限不同于报表访问权限。

SSRS 角色确实控制用户是否可以访问报告。报表数据源很可能设置为将用户凭据传递给数据库，从而传递给存储过程；这就是为什么您也需要在该级别设置权限的原因。

如果用户无权访问报告，他们将无法运行它们，甚至不会发生数据库访问。

要以不同的方式看待它，请考虑一个报告，其中凭据存储在数据源中，而不仅仅是使用 Windows 身份验证传递。这意味着运行报告的任何用户都将使用这些存储的凭据连接到数据库，而不是像他们自己一样。您只需要担心数据源凭据的数据库权限。您仍然需要能够授予/拒绝对报告的访问权限，这就是报告访问权限会产生影响的地方。

**评论后编辑：**

您已经提到了两种情况，一种是数据源设置为存储数据库用户凭据，另一种是数据源数据库访问设置为使用运行报表的任何人的凭据。

在这两种情况下，您都可以在报表服务器级别控制对报表本身的访问。

因此，如果您直接在报告级别或更高级别授予**Domain\User1***浏览器*角色，他们可以访问报告。由于没有设置访问权限，**Domain\User2**无法运行报告。

现在已经设置了报告权限，您需要考虑如何设置数据源。

当凭据存储在数据源中时，您只需考虑该用户的数据库权限。**假设您已将数据源设置为以Domain\ReportUser**连接到数据库- 只有该用户需要访问底层存储过程。**Domain\User1**不访问数据库，因此不需要`EXECUTE`这些对象；只有**Domain\ReportUser**可以。

当不存储凭据时，数据源数据库访问将由运行报表的用户执行，因此在这种情况下，当**Domain\User1**运行报表时，他们还将运行底层存储过程，因此需要`EXECUTE`对象的权限.

在这两种数据源方案中，**Domain\User2**都无法访问报表，因为报表权限因此数据库权限无关紧要。

# jquery - JQuery: multiple switch statements cancelling eachother out

> ID：15842520
> 
> 赞同：1
> 
> 时间：2013-04-05T20:01:47.537
> 
> 标签：jquery, switch-statement, case

Having some trouble with more than one switch statement at a time:

```
$(document).ready(function(){
    $('#menu').children('span').click(function(){
        whichsub = $(this).attr('id');
        switch (whichsub)   {
            case 'menu1':
            $('#submenu').load('menus/submenu1.html');
            break;
            case 'menu2':
            $('#submenu').load('menus/submenu2.html');
            break;
        };
        if ( $('#submenu').css('left') !== '150px' ) {$('#submenu').animate({left: '150px'}, 300);}
    });
    $('#submenu').children('span').click(function(){
        var whichcon = $(this).attr('id');
        switch (whichcon)   {
            case 'submenu1':
            $('#demopanel').load('content/profile.html');
            break;
            case 'submenu2':
            $('#demopanel').load('content/portfolio.html');
            break;
        };
        if ( $('#demopanel').css('marginLeft') !== '300px' ) {$('#demopanel').animate({marginLeft: '300px'}, 1000);}
    });
}); 
```

The top switch changes the submenu and conditionally slides it out, the bottom changes the content ("#demopanel"). Each works on it's own, but when I have both enabled, the second fails to work -- it acts as if the script has stopped since an alert placed after `$('#submenu').children('span').click(function(){` returns nothing.

Any ideas where this might be going wrong? Do I need to unbind something?

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:59:16.327

您的子菜单似乎正在动态加载，因此必须使用委托事件。尝试这个..

```
 $('body').on('click','#submenu span',function(){
  ...

}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:06:11.170

委托子菜单单击，因为看起来您正在使用`on`..加载动态内容

```
$('#submenu').on('click','span',function(){
  ...

}) 
```

[链接](http://jq4you.blogspot.com/2013/02/jquery-direct-and-delegate-on-event.html)以阅读有关委派事件的更多信息

# eclipse - Maven 多模块项目中的自动装配依赖项

> ID：15842523
> 
> 赞同：4
> 
> 时间：2013-04-05T20:01:58.023
> 
> 标签：eclipse, spring, maven, spring-mvc, m2e

我有一个 Maven 项目，其中包含“核心”和“网络”部分。我正在尝试将其转换为多个模块。

我已经将“web”包放入新项目中。我已将核心项目添加为依赖项，并且可以在 Eclipse 中引用它的类。`WEB-INF\lib`当我构建它时，“核心”项目正确显示在“网络”项目中。

当“核心”项目中的类`@Autowired`位于“网络”项目中时，问题就出现了。

在这种特殊情况下，我将一个服务类从“核心”自动装配到“网络”项目中的一个网络服务类中。如果我将核心服务所在的包添加到我`context:component-scan`的“Web”应用程序配置中，它会找到该服务，但随后该服务引用了一个存储库，该存储库引用了一个实体，该实体正在寻找我的实体管理器工厂我已经在我的“核心”项目中的应用程序上下文中进行了配置。

所以看起来`context:component-scan`“核心”项目中的可能没有发生？或者，“网络”项目可能无法使用所选择的课程？

我对多模块项目完全陌生，所以如果有人能让我从正确的方向开始解决这个问题，我将不胜感激。

如果重要的话，我在 Eclipse 中使用 m2e 和 Run Jetty Run 插件；但是，当我`mvn jetty:run`从命令行执行时，我似乎遇到了同样的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T21:34:51.117

您将需要从您的 Web 模块应用程序上下文中加载核心模块应用程序上下文。否则它将不知道核心应用程序上下文中定义的 bean。[查看无法加载来自其他 maven 模块](https://stackoverflow.com/questions/11774606/application-context-from-other-maven-module-cannot-be-loaded)的应用程序上下文和[Spring 从另一个项目导入应用程序上下文](https://stackoverflow.com/questions/6468195/spring-import-application-context-from-another-project)的答案以获得正确的解决方案。
你也可以看看这篇[文章](http://blog.boehme.me/2012/06/multi-module-maven-project-with-spring.html)，它很好地描述了如何使用 Maven 创建一个多模块 Spring 项目。

# java - java swing中的透明JFrame

> ID：15842525
> 
> 赞同：0
> 
> 时间：2013-04-05T20:02:03.550
> 
> 标签：java, swing, transparency, paint, translucency

我需要在 java swing 中创建一个透明的 jframe，它的不透明度为 0.05f。我尝试了下面的代码，但它不起作用。我在窗户工作。

我需要做什么才能使其工作？

```
import java.awt.AlphaComposite;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import javax.swing.JFrame;
import java.awt.Color;

public class BackgroundNull {

   private JFrame frame;

    public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                BackgroundNull window = new BackgroundNull();
                window.frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

public BackgroundNull() {
    initialize();

private void initialize() {
    frame = new JFrame();
    frame.setBackground(new Color(0, 0, 0, 0));
    frame.setBounds(100, 100, 450, 300);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setOpacity(0.5f);
}

    public void paint(Graphics g) { 
        Graphics2D g2 = (Graphics2D) g.create(); 
        g2.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.0f)); 

        frame.getContentPane().paint(g2); 
        g2.dispose(); 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T23:24:26.163

根据您的平台，窗口透明度可能仅适用于默认（金属）外观。

我尝试在 Mac OSX 和 Windows 7 上使用系统外观和感觉，两者都可以。

您在代码中缺少的部分是...

`JFrame.setDefaultLookAndFeelDecorated(true);`

```
import java.awt.*;
import javax.swing.*;
import static java.awt.GraphicsDevice.WindowTranslucency.*;

public class TranslucentWindowDemo extends JFrame {

    public TranslucentWindowDemo() {
        super("TranslucentWindow");
        setLayout(new GridBagLayout());

        setSize(300, 200);
        setLocationRelativeTo(null);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Add a sample button.
        add(new JButton("I am a Button"));
    }

    public static void main(String[] args) {
        // Determine if the GraphicsDevice supports translucency.
        GraphicsEnvironment ge =
                        GraphicsEnvironment.getLocalGraphicsEnvironment();
        GraphicsDevice gd = ge.getDefaultScreenDevice();

        //If translucent windows aren't supported, exit.
        if (!gd.isWindowTranslucencySupported(TRANSLUCENT)) {
            System.err.println(
                            "Translucency is not supported");
            System.exit(0);
        }

        JFrame.setDefaultLookAndFeelDecorated(true);

        // Create the GUI on the event-dispatching thread
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }
                TranslucentWindowDemo tw = new TranslucentWindowDemo();

                // Set the window to 55% opaque (45% translucent).
                tw.setOpacity(0.55f);

                // Display the window.
                tw.setVisible(true);
            }
        });
    }
} 
```

现在，这是一个悲伤的消息。在 Java 6 下，你可以让它工作。

以下代码（在 Java 6 下）将使本机 Window 透明...

```
public static void setOpacity(Window window, float opacity) {
    try {
        Class<?> awtUtilsClass = Class.forName("com.sun.awt.AWTUtilities");
        if (awtUtilsClass != null) {
            Method method = awtUtilsClass.getMethod("setWindowOpacity", Window.class, float.class);
            method.invoke(null, window, opacity);
        }
    } catch (Exception exp) {
        exp.printStackTrace();
    }
} 
```

# javascript - 为什么 Ext flash 组件连接两个字符串来形成这个 url？

> ID：15842526
> 
> 赞同：1
> 
> 时间：2013-04-05T20:02:07.457
> 
> 标签：javascript, string, extjs, extjs3

我在`FlashComponent`源代码中发现了这一点，并想知道他们为什么在`//`. 这是代码：

```
/**
 * Sets the url for installing flash if it doesn't exist. This should be set to a local resource.
  * @static
  * @type String
  */
  Ext.FlashComponent.EXPRESS_INSTALL_URL = 'http:/' + '/swfobject.googlecode.com/svn/trunk/swfobject/expressInstall.swf'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:31:37.220

据我所知，这与满足我们当时使用的构建工具或语法检查器有关。它对代码没有影响。

# sql-server - Jmeter - 找不到适合 jdbc:microsoft:sqlserver://xxxx:1433 的驱动程序

> ID：15842532
> 
> 赞同：3
> 
> 时间：2013-04-05T20:02:33.903
> 
> 标签：sql-server, jdbc, jmeter

我正在使用 Jmeter 2.9 并尝试连接到 SQL Server 2008。
在`JDBC Connection Configuration`我的连接属性中并具有以下内容：

```
Database URL = jdbc:microsoft:sqlserver://x.x.x.x:1433
JDBC Driver Class = com.microsoft.sqlserver.jdbc.SQLServerDriver 
```

我已经下载了最新`Microsoft SQL Server JDBC Drivers`的并将以下 jars 放在 jmeter/lib 目录下：`sqljdbc.jar`, `sqljdbc4.jar`.

我收到以下错误：

> java.sql.SQLException：找不到适合 jdbc:microsoft:sqlserver://xxxx:1433 的驱动程序

你能建议我错过什么吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-07-18T00:04:04.990

您的解决方案对我不起作用，这是我的解决方案：

​将 jdbc 连接库添加到 Jmeter lib 文件夹中：

1.  从 Microsoft 下载最新的 jdbc 驱动程序

[http://msdn.microsoft.com/en-us/sqlserver/aa937724.aspx](http://msdn.microsoft.com/en-us/sqlserver/aa937724.aspx)

2.  解压缩文件并找到您需要的驱动程序：

[http://msdn.microsoft.com/en-us/library/ms378422.aspx](http://msdn.microsoft.com/en-us/library/ms378422.aspx)

3.  将所需的 JAR 文件复制到 jmeter/lib 文件夹中。（如果你正在运行它，你需要重新启动它。）

4.  在我的 JDBC 配置中：

    ```
     DatabaseURL: jdbc:sqlserver://localhost:port;DatabaseName=mydb;

     JDBC Driver Class: com.microsoft.sqlserver.jdbc.SQLServerDriver

     User Name: (SQL server access user name)

     Password: (user's password) 
    ```

5.  为配置提供一个变量名称：例如 JDBC_Connection

6.  创建 JDBC 请求时，请在“绑定到池的变量名称”字段中使用此名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-26T14:33:31.063

我可以添加到 Vin.X 的答案的唯一一件事是，您可以指定 sqljdbc4.jar 的位置作为测试计划的属性，方法是在显示**添加目录或 jar 到类路径的位置浏览它**

如果您想将这样的库与您的 jMeter 分发文件夹分开，这将非常有用，以便更容易更新 jMeter。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-13T07:43:20.297

首先从我共享的以下链接下载 JDBC jar 文件：

[http://tinyurl.com/o5hgpmt](http://tinyurl.com/o5hgpmt)

将所有 *.jar 文件提取到：C:\apache-jmeter-2.11\lib

然后启动JMeter

并根据您的数据库在您的 JDBC 连接配置元素中写入以下连接：

数据库网址：jdbc:jtds:sqlserver://xxxx:1433;DatabaseName=yourdatabase;

JDBC驱动类：net.sourceforge.jtds.jdbc.Driver

用户名：给出sql server数据库的用户名密码：给出sql server数据库的密码

我的连接成功..希望这对每个人都有帮助..

# css - 显示：表格单元格不使 div 居中

> ID：15842535
> 
> 赞同：0
> 
> 时间：2013-04-05T20:02:43.267
> 
> 标签：css, html, vertical-alignment

我试图在 div 中居中图像，我使用了 display:table & display: table-cell 方法。它居中，但距离顶部有几个像素。我能做些什么来纠正这个问题？

```
CSS

html, body { 
    width: 100%;
    height: 100%;
}

body,html {
  margin: 0;
  padding: 0;
  color:#ffffff;
  text-align: center;
}

#wrapper{
text-align: left;
width: 940px;
margin: 0 auto;
margin-top: 22px;
background-color: #ffffff;
overflow: hidden;
}

header {
width: 908px;
height: 76px;
display: table;
border-style:solid;
border-top-width: 16px;
border-bottom-width: 16px;
border-top-color: #ffffff;
background-color: #cccccc;
}

#headerdiv { display: table-cell; vertical-align: middle; margin: 0; height: 28px; }

HTML

<div id="wrapper">

<header>
<div id="headerdiv"><img src="logotest.gif" height="28" width="180" alt="test"></div>
</header>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:05:02.080

添加

```
img {
    vertical-align:middle;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/hbFcS/1/)**

# php - php搜索引擎建议

> ID：15842536
> 
> 赞同：0
> 
> 时间：2013-04-05T20:02:49.000
> 
> 标签：php

你好我想问一个问题，现在我开始使用搜索引擎，所以你能建议一些功能或方法如何开始或使用什么来通过用户名从数据库用户制作搜索引擎。它可以搜索用另一个词的一个符号我写“k”，然后它搜索所有以用户名“k”开头的用户名。示例： http: [//postimg.org/image/sg84ny3w3/](http://postimg.org/image/sg84ny3w3/)

试过：

```
private function Search()
{
    global $database;

    if(isset($_POST['s'])) {
        if($_POST['s'] == '1' || $_POST['s'] == '2' || $_POST['s'] == '3')
            $type = $_POST['s'];
        $database->getSearchData($type, $_POST['xs']);
        }

    else if(!preg_match("/[^0-9A-Za-z]/", $_POST['xs'])){
        $error = "You entered invalid data";
        }

        return false;
} 
```

html:

```
<div id="content">
<div style="padding:20px">
<?echo $error;?>
    <form action="index.php?mod=highscore&t=search"  method="POST" accept-charset="utf-8">
    <div class="title_box"><div class="title_inner">
            What are you searching for?     </div></div>
        <div class="title2_box"><div class="title2_inner">
        <p>
            <table width="80%">
                <tr>
                    <td><input type="radio" name="s" value="1"></td>
                    <td>Player</td>
                </tr>
                <tr>
                    <td><input type="radio" name="s" value="2"></td>
                    <td>Guild (Name)</td>
                </tr>
                <tr>
                    <td><input type="radio" name="s" value="3"></td>
                    <td>Guild (Guild Tag)</td>
                </tr>
                <tr>
                    <td>Text:</td>
                    <td colspan="2"><input type="text" name="xs" size="30" maxlength="30" value=""></td>
                </tr>
                <tr>
                    <td colspan="3"><input type="submit" value="Search" class="button3" name="search"></td>
                </tr>
            </table>
        </p>
    </form>
        </div></div>
<br />
<?if($functions->Search() == false) {?> 
    <div class="title_box"><div class="title_inner">
        Results </div></div>
    <div class="title2_box"><div class="title2_inner">
    <p>
                    <table width="50%">
            <tr>
                <td>Player</td>
                <td>Level</td>
                <td>Total honour</td>
            </tr>
            <tr><td class="f" colspan="2">No results</td></tr></table>  </p>
    </div></div>
    <?} else {?>
        <div class="title_box"><div class="title_inner">
        Results </div></div>
    <div class="title2_box"><div class="title2_inner">
    <p>
                    <table width="50%">
            <tr>
                <td>Player</td>
                <td>Level</td>
                <td>Total honour</td>
            </tr>
            <tr><td class="f" colspan="2"><?$functions->Search();?></td></tr></table>   </p>
    </div></div>
    <?}?>
</div>  

<script type='text/javascript'>var tickerArray = new Array();function doTicker(){
                                    n=new Date();
                                    if (tickerArray.length > 0)
                                    {
                                        for (i = 0; i < tickerArray.length; i++)
                                        {
                                            if (isNaN(document.getElementById(tickerArray[i]["id"])))
                                            {
                                                var e = document.getElementById(tickerArray[i]["id"]);
                                                s = tickerArray[i]["sek"];
                                                m = 0;
                                                h = 0;
                                                d = 0;
                                                if (s < 0)
                                                    e.innerHTML = "---";
                                                else
                                                {
                                                    var timeTXT = s + " s";
                                                    if (s > 59)
                                                    {
                                                        m = Math.ceil(s / 60);
                                                        s = s-m * 60;
                                                        timeTXT = m + " m";
                                                    }
                                                    if (m > 59)
                                                    {
                                                        h = Math.ceil(m / 60);
                                                        m = m - h * 60;
                                                        timeTXT = h + " h";
                                                    }
                                                    if (h > 24)
                                                    {
                                                        d = Math.ceil(h / 24);
                                                        h = h-d * 24;
                                                        timeTXT = d + " d";
                                                    }

                                                    e.innerHTML = timeTXT;
                                                    tickerArray[i]["sek"]--;
                                                }
                                            }
                                        }
                                    window.setTimeout("doTicker();",999);
                                }
                            }doTicker();</script>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:43:21.147

`SELECT * FROM users where username like 'k%'` 将返回用户名以 k ​​开头的所有用户记录

`SELECT * FROM user where username LIKE '%k%'`

将返回所有包含字符 k 的用户记录

[http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:45:39.280

1.  使用这个简单的代码： [http ://www.simonerodriguez.com/ajax-form-submit-example/](http://www.simonerodriguez.com/ajax-form-submit-example/)

2.  删除表单上的“on_submit”操作。

3.  在文本框中，添加属性：onKeyDown="xmlhttpPost('response_ajax.php, 'MyForm', 'MyResult', ''); return false;"

4.  第三个参数“MyResult”将是您在 php 文件中输出的任何内容，因此它将被放置在一个名为“MyResilt”的 div 中 div id = “MyResult”"> /div>

您的 php 文件可以输出如下内容： echo "$Result"

那会做你想做的事。

# c++ - 将项目迁移到另一台计算机：“错误：设备未准备好。”

> ID：15842539
> 
> 赞同：0
> 
> 时间：2013-04-05T20:02:54.417
> 
> 标签：c++, visual-studio-2010, build

我正在使用 Visual C++ 2010 Express，我刚刚将一个完整的项目文件夹复制到了一台新计算机上（如果相关，两者都在 Windows 8 上）。我完全按照在另一台计算机上所做的那样打开了解决方案文件，并尝试构建。

我收到以下错误：

```
1>------ Build started: Project: <project_name>, Configuration: Debug Win32 ------
1>Error: The device is not ready.
1>
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

没有其他上下文。

这是怎么回事？

# .net - 如何将运行时参数和可变依赖项一起注入到 Castle Windsor 的构造函数中？

> ID：15842540
> 
> 赞同：2
> 
> 时间：2013-04-05T20:02:57.663
> 
> 标签：.net, dependency-injection, castle-windsor

我的一些类有一个类似于以下的构造函数：

```
public class MyComponent : BaseComponent, IMyComponent
{
    public MyComponent(IPostRepository postsRepo, int postId, ICollection<string> fileNames)
    {
        // ...
    }
} 
```

`IPostRepository`是一个不稳定的依赖，但它可以在应用程序启动时初始化。postId 和 fileNames 参数仅在运行时已知。

**如何使用 Castle Windsor（3.2.0，如果重要）来处理`IPostRepository`依赖项的注入，同时仍然允许运行时构造函数参数？**

（虽然一种方法可能是重构`MyComponent`，但这将是一项重要的工作，因为代码的许多其他部分已经引用了`MyComponent`。）

**到目前为止，这是我得到的**：我认为我需要创建一个`MyComponentFactory`. 的界面`MyComponentFactory`看起来像

```
public interface IMyComponentFactory
{
    IMyComponent Create(params object[] args);
} 
```

这`IMyComponentFactory`将被注入上面的层（在我的例子中是控制器），如下所示：

```
public class MyController : Controller
{
    private IMyComponentFactory _myComponentFactory;

    public MyController(IMyComponentFactory myComponentFactory)
    {
        _myComponentFactory = myComponentFactory;
    }

    public ActionResult MyAction(int postId)
    {
        List<string> fileNames = new List<string>();
        // ...

        // Creates a new instance of the resolved IMyComponent with the IPostRepository that was injected into IMyComponentFactory and the run time parameters.
        IMyComponent myComponent = _myComponentFactory.Create(postId, fileNames); 

        // Now do stuff with myComponent

        return View();
    }
} 
```

最后，我试图让 Castle Windsor 通过`IMyComponentFactory`在组合根中注册 my 来创建工厂实现，如下所示：

```
// Add Factory facility
container.AddFacility<TypedFactoryFacility>();

container.Register(Component.For<IMyComponentFactory>().AsFactory()); 
```

这样做会产生`DependencyResolverException`一条消息

> 无法解析“Playground.Examples.Components.MyComponent”（Playground.Examples.Components.MyComponent）的非可选依赖项。参数“postId”类型“System.Int32”

这个错误是有道理的，我猜我需要创建一个自定义实现`IMyComponentFactory`，但我不确定如何去做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:19:38.533

为什么您不能执行以下操作：

```
public class MyComponentFactory : IMyComponentFactory
{
    private IPostRepository postRepository;

    public MyComponentFactory(IPostRepository postRepository)
    {
       this.postRepository = postRepository;
    }

    public IMyComponent Create(int postId, ICollection<string> fileNames)
    {            
        return new MyComponent(this.postRepository, postId, fileNames);
    }
} 
```

我会在你的`Create`方法中使用显式参数。

然后`MyComponentFactory`针对接口注册`IMyComponentFactory`（作为单例）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T09:25:49.123

只需声明`Create`工厂方法的强类型参数：

```
public interface IMyComponentFactory
{
    IMyComponent Create(int postId, ICollection<string> fileNames);
} 
```

并且不要忘记注册您的组件：

```
Component.For<IMyComponent>().ImplementedBy<MyComponent>().LifestyleTransitional() 
```

# jquery - 使用 JSON 自动完成

> ID：15842541
> 
> 赞同：0
> 
> 时间：2013-04-05T20:02:59.337
> 
> 标签：jquery, asp.net-mvc, json

在我看来我有

```
@Html.TextBoxFor(per => per.Hospital, new { 
    style = "width:220px", @maxlength = "50", 
    data_autocomplete = Url.Action("HospitalList", "Person") }) 
```

我的jQuery是

```
$(document).ready(function () {        
    $('input[data-autocomplete]').each(function () {
        var url = $(this).data('autocomplete');
        $(this).autocomplete({
            source: function (request, response) {
                $.getJSON(url, {
                    term: request.term
                }, response);
            }
        });
    });
}); 
```

我创建了一个新的 Action 结果

```
public ActionResult HospitalList(string term)
{
    List<string> result = new List<string>();
    result.Add("Hospital 1");
    result.Add("NYUMC");
    result.Add("Christ");
    result.Add("Bellevue");
    result.Add("NewYork-Presbyterian");
    result.Add("North Central Bronx Hospital");   

    result = result.Where(r => r.Contains(term)).ToList();         

    return Json(result , JsonRequestBehavior.AllowGet);
} 
```

我包含了一个 jquery 库

```
<script src='<%: Url.Content("~/Scripts/jQueryUI/jquery-1.4.2.min.js") %>'    type="text/javascript"></script>  
<script src='<%: Url.Content("~/Scripts/jQueryUI/jquery-ui-1.8.2.custom.min.js") %>'  type="text/javascript"></script> 
```

现在我哪里错了。我只看到一个文本框，没有自动完成的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:18:43.373

jQuery UI 团队直到 UI 的 1.8.6 版才添加对 jQuery 1.4.3 的支持（参见[此处](http://blog.jqueryui.com/2010/11/jquery-ui-1-8-6/)）。因此，尽管您可能遇到其他问题，但您也可能存在库不兼容问题。

升级你的两个库的版本，看看它首先带你去哪里。

[http://jquery.com/download/](http://jquery.com/download/) [http://jqueryui.com/download/](http://jqueryui.com/download/) 或 [https://developers.google.com/speed/libraries/devguide#jquery](https://developers.google.com/speed/libraries/devguide#jquery)

我希望这有帮助。

# php - 添加两个表时复制结果

> ID：15842545
> 
> 赞同：0
> 
> 时间：2013-04-05T20:03:13.710
> 
> 标签：php, html, mysql, duplicates

我正在一个有类别的网站上工作。当用户单击链接时，它会转到`categories.php?id=$id`

这是有效的。由于我使用的是 FK，因此我必须使用以下代码：

```
$result = mysql_query( "SELECT * FROM post_posts, post_cat WHERE post_cat = $id" )
or die("SELECT Error: ".mysql_error());
$num_rows = mysql_num_rows($result);
if ($result) {
    while ($row = mysql_fetch_array($result)) {
        $_SESSION['idpost_posts']=$row['idpost_posts'];

        echo '<div id="single-post" class="slidingDiv">
            <div id="title">' . $row['post_header'] . '</div>
            <div id="image"><img src="' . $row['post_thumb'] . '" width="300" height="200"></div>
            <div id="text">' . substr($row['post_content'], 0, 500) . '<a href="page.php?id=' . $row['idpost_posts'] . '"> Les mer...</a>' . '      </div>
            <div id="author">' . "Skrevet: " . date('j. F Y ', strtotime($row['post_date'])) . ' | <a href="user.php?id=' . $row['idpost_users'] . '">' . $row['user_name'] . '</a></div> 
            <div id="post-divider"></div>
            </div>';
    }    
} 
```

该代码正在运行，但正如我之前所说，它显示同一行 5 次。知道如何解决这个问题吗？

编辑：这是我现在使用的，现在只显示两行，这更好：

```
$result = mysql_query( "SELECT DISTINCT idpost_posts, post_content, post_header, post_thumb, post_date, idpost_users, user_name FROM post_posts, post_cat, post_users WHERE post_cat = $id" )
        or die("SELECT Error: ".mysql_error());
        $num_rows = mysql_num_rows($result);if ($result) {while ($row = mysql_fetch_array($result)) {
        $_SESSION['idpost_posts']=$row['idpost_posts'];

        echo '<div id="single-post" class="slidingDiv">
            <div id="title">' . $row['post_header'] . '</div>
            <div id="image"><img src="' . $row['post_thumb'] . '" width="300" height="200"></div>
            <div id="text">' . substr($row['post_content'], 0, 500) . '<a href="page.php?id=' . $row['idpost_posts'] . '"> Les mer...</a>' . '      </div>
            <div id="author">' . "Skrevet: " . date('j. F Y ', strtotime($row['post_date'])) . ' | <a href="user.php?id=' . $row['idpost_users'] . '">' . $row['user_name'] . '</a></div> 
            <div id="post-divider"></div>
            </div>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:06:39.573

改变这个`

```
 $result = mysql_query( "SELECT * FROM post_posts, post_cat WHERE post_cat = $id" ) 
```

`对此：

```
$result = mysql_query( "SELECT DISTINCT * FROM post_posts, post_cat WHERE post_cat = $id" ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:27:36.957

您的 SQL "SELECT * FROM post_posts, post_cat WHERE post_cat = $id" 正在 post_posts 和 post_cat 表之间执行交叉笛卡尔连接（您不希望这样做）。您应该像这样定义应该将两个表连接在一起的列。

```
SELECT * FROM post_posts, post_cat WHERE post_posts.<primary key col name> = post_cat.<foreign key col name> AND post_cat = $id 
```

您将在其中将 <> 替换为定义每个表中的外键关系的列。如果您需要更详细的帮助，您需要发布外键约束详细信息，包括它应用到的列以及它在另一个表中引用的列。

# entity-framework - 具有多个程序集的 Entity Framework 5.0 继承

> ID：15842547
> 
> 赞同：5
> 
> 时间：2013-04-05T20:03:15.123
> 
> 标签：entity-framework, inheritance, entity-framework-5, table-per-hierarchy

我正在使用 Entity Framework 5.0 和代码优先方法以及由 Table Per Hierarchy 表示的业务对象的继承。

我想有以下结构：

```
//Assembly 'DataAccess'    
public class MyDbContext : DbContext
{
    DbSet<AbstractClass> CommonObjects.AbstractClasses { get; set; }
}

//Assembly 'CommonObjects'  
public abstract class AbstractClass
{
    //implementation
}

//Assembly 'DerivedObjects'   
public class DerivedClass : AbstractClass
{
    //implementation
} 
```

在运行时，当第一次尝试访问 DbContext 时，编译器会抛出一个 InvalidOperationException 说：

> 抽象类型“CommonObjects.AbstractClass”没有映射的后代，因此无法映射。从模型中删除“CommonObjects.AbstractClass”或将一种或多种派生自“CommonObjects.AbstractClass”的类型添加到模型中。

这种情况甚至可能吗？如果是，我做错了什么？

提前感谢您的回答。

本

**附加信息：**

也许我应该更具体一点：

我得到了一个包含我的抽象业务对象（仅抽象）的程序集。具体实现（包含逻辑）保存在负责的程序集中，因为它们的逻辑取决于该程序集中的其他类。问题是，我也希望能够将这些具体实现存储在持久层中。但为此，EF 必须知道这些类型才能启用映射。但我不想让持久层依赖于我的业务逻辑层——只有抽象。

这就是我尝试直接从业务对象层将派生对象添加到 DbContext 的原因。

例子：

```
AbstractClass derivedClass = new DerivedClass();
MyDbContext.AbstractClasses.Add(derivedClass); 
```

但是随后抛出了上面的异常。我只是想不出一个好的结构来实现这一点。

# java - 为什么 Java 经常拼写为 JAVA（通常在旧文本中）？

> ID：15842550
> 
> 赞同：1
> 
> 时间：2013-04-05T20:03:32.923
> 
> 标签：java

您知道将 Java 编程语言的名称拼写为大写的任何原因吗？我经常在（尤其是旧的）文章中看到这一点，这种丑陋的拼写让我很好奇。我认为因为它不是首字母缩略词，所以不应该是大写。

只是一个例子：

> CORBA 2.2（1998 年 2 月）——该版本的 CORBA 包括服务器可移植性增强 (POA)、DCOM 互通和 IDL/JAVA 语言映射规范。
> 
> 资料来源：[http ://www.omg.org/gettingstarted/history_of_corba.htm](http://www.omg.org/gettingstarted/history_of_corba.htm)

有什么历史原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:08:17.117

不，没有理由。

Java 最初（在正式发布之前）称为 Oak，但 Oak 已经是商标名称。

见[http://en.wikipedia.org/wiki/Java_version_history](http://en.wikipedia.org/wiki/Java_version_history)

# entity-framework - 当列具有索引时，实体框架无法迁移 MaxLength 值

> ID：15842552
> 
> 赞同：3
> 
> 时间：2013-04-05T20:03:37.807
> 
> 标签：entity-framework, entity-framework-6

我尝试将 MaxLength 属性从 100 更改为 50，但出现异常说

```
"The index 'IX_Singers_Name' is dependent on column 'Name'.
ALTER TABLE ALTER COLUMN Name failed because one or more objects access this column." 
```

模式是：

```
public class Singer : NamedEntity
{
    [MaxLength(50)] // It was 100
    public override string Name { get; set; }

} 
```

据我了解，实体框架需要为此更改更改表，但它不能更改表，因为 Name 属性上存在索引。那么我怎样才能通过实体框架迁移来实现呢？

我可能会在迁移中删除索引，然后在下一次迁移中更改 maxlength 并在最后一次迁移中再次创建索引。但我相信应该存在一种简单的方法来更改该属性值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T13:08:55.120

在 SQL Server 中，索引与表本身非常相似。因此，如果您在索引中有列，则该索引和表都需要修改。我同意在 EF 迁移被搭建以添加索引的地方（例如，对于外键），他们还应该注意删除和重新应用索引。但是，在这种情况下，必须手动添加索引。因此，它需要在迁移中手动维护。请注意，它可以在单个迁移中完成：

```
public override void Up() 
{
    DropIndex("dbo.Singer", new []{"Name"});

    /* Code to alter the table */

    CreateIndex("dbo.Singer", "Name");
} 
```

不要忘记把它放在`Up()`和`Down()`方法中。

# java - Zookeeper Network Ensemble 未正常启动

> ID：15842553
> 
> 赞同：8
> 
> 时间：2013-04-05T20:03:42.950
> 
> 标签：java, sockets, configuration, apache-zookeeper

我最近一直在与 zookeeper 合作，以满足分布式应用程序的可靠性要求。我正在使用三台计算机，并按照本教程进行操作：

[http://sanjivblogs.blogspot.ie/2011/04/deploying-zookeeper-ensemble.html](http://sanjivblogs.blogspot.ie/2011/04/deploying-zookeeper-ensemble.html)

我一步一步地确保我做得很好，但现在当我开始我的动物园管理员时

`./zkServer.sh start`

我的所有计算机都出现以下异常：

```
2013-04-05 21:46:58,995 [myid:2] - WARN [SendWorker:1:QuorumCnxManager$SendWorker@679] - Interrupted while waiting for message on queue
java.lang.InterruptedException
at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:1961)
at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2038)
at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:342)
at org.apache.zookeeper.server.quorum.QuorumCnxManager.pollSendQueue(QuorumCnxManager.java:831)
at org.apache.zookeeper.server.quorum.QuorumCnxManager.access$500(QuorumCnxManager.java:62)
at org.apache.zookeeper.server.quorum.QuorumCnxManager$SendWorker.run(QuorumCnxManager.java:667)
2013-04-05 21:46:58,995 [myid:2] - WARN [SendWorker:1:QuorumCnxManager$SendWorker@688] - Send worker leaving thread

2013-04-05 21:47:58,363 [myid:2] - WARN [RecvWorker:3:QuorumCnxManager$RecvWorker@762] - Connection broken for id 3, my id = 2, error = 
java.io.EOFException
at java.io.DataInputStream.readInt(DataInputStream.java:375)
at org.apache.zookeeper.server.quorum.QuorumCnxManager$RecvWorker.run(QuorumCnxManager.java:747) 
```

但我不知道我做错了什么来得到这个。我的目标是在不同的机器上同步我的动物园管理员，以便始终获得可用的服务。我访问了 zookeeper.apache.org 网页并查找有关如何配置和启动我的 zookeeper 的相同信息，但与我之前遵循的步骤相同。

如果有人可以帮助我，我真的很感激。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T18:09:47.277

我需要遵循一些严格的步骤来实现这一点，但最终做到了。如果有人面临同样的问题，要让 zookeeper 合奏，请记住：

您需要运行 3 个 Zookeeper 服务器（本地或通过网络），这是实现同步的最小数量。在每个服务器中，需要创建一个名为“myid”的文件（在zookeeper文件夹内），每个myid文件的内容必须是一个序号，比如我有3个zookeeper服务器（文件夹），所以我有一个myid 内容为 1，其他内容为 2，其他内容为 3。

然后在 zoo.cfg 中需要稳定所需的参数：

```
tickTime=2000
#dataDir=/var/lib/zookeeper
dataDir=/home/mtataje/var/zookeeper1
clientPort=2184
initLimit=10
syncLimit=20
server.1=192.168.3.41:2888:3888
server.2=192.168.3.41:2889:3889
server.3=192.168.3.41:2995:2999 
```

zoo.cfg 因每个服务器而异，在我的情况下，因为我在本地进行测试，我需要更改端口和 dataDir。

之后，执行：

```
./zkServer.sh start 
```

也许会出现一些异常，但这是因为至少要同步两个zookeeper，当你启动至少2个zookeeper时，异常应该没有了。

最好的祝福。

# javascript - 使用同位素对动态数据进行排序

> ID：15842554
> 
> 赞同：4
> 
> 时间：2013-04-05T20:03:59.817
> 
> 标签：javascript, jquery, jquery-plugins, jquery-isotope

我正在尝试使用[Isotope.js](http://isotope.metafizzy.co/)按类型对数据进行排序。似乎有几种方法可以做到这一点，但是它们都要求您事先知道排序变量。

[在这个问题](https://stackoverflow.com/questions/12551662/jquery-isotope-sort-by-category-but-specify-which-comes-first)中可以找到我所说的最好的例子之一。

在示例中，他们尝试按类排序，例如将所有元素与类分组，`.milk`如下所示：

```
milk: function( $elem ) {
    var isMilk = $elem.hasClass('milk');
    return (!isMilk?' ':'');
}, 
```

这里提供了一个 jsfiddle：http: [//jsfiddle.net/Yvk9q/9/](http://jsfiddle.net/Yvk9q/9/)

**我的问题：**

我正在从用户生成的数据库中提取类别（类或数据类型）。出于这个原因，我不能简单地事先将所有排序变量添加到代码中。

我玩小提琴并在这里得到了一个半工作的排序：http: [//jsfiddle.net/BandonRandon/erfXH/1/](http://jsfiddle.net/BandonRandon/erfXH/1/)使用`data-category`而不是类。但是，这只是按字母顺序对所有数据进行排序，而不是按实际类别。

**一些可能的解决方案：**

1.  使用 JSON 返回所有类别的数组，然后使用它循环类
2.  `<script>`使用内联 javascript 并在标签内运行 PHP 循环
3.  编写带有 javascript 标头的外部 PHP 文件

**我在寻找什么**
这里最简单的最佳方法是，如果它是上述解决方案之一或其他解决方案。这似乎不需要这么复杂。所以我可能过于复杂了。

**编辑：**

我现在有一个数据的 json 数组，但是当我尝试这样的事情时，我不知道如何将数据传递到同位素设置中

```
var $container = $('.sort-container');

var opts = {
    itemSelector: '.member-item',
    layoutMode: 'straightDown',
    getSortData : {
        $.getJSON( 'member-cat-json.php', function(data) { 
            $.each(data, function(i, item) {
                var slug = data[i].slug;
                slug : function( $elem ) {
                    var is+slug = $elem.hasClass(slug);
                    return (!is+slug?' ':'');
                    }
                }
            }); 
        });
    }                                       
}

var $container = $('.sort-container');

$container.isotope(opts); 
```

它失败了，因为我无法在插件设置中使用循环。不知道可以做些什么。

**编辑2：**

我发现[这个问题](https://stackoverflow.com/questions/12919827/isotope-dynamic-sorts)似乎与我正在尝试做的事情有关，但不幸的是，[最近的 jsfiddle](http://jsfiddle.net/sENdQ)因同位素而失败

这是我的 JSON 输出示例：

```
{term_id:9, name:Milk, slug:milk, term_group:0, term_taxonomy_id:17...}
{term_id:9, name:Eggs, slug:eggs, term_group:0, term_taxonomy_id:17...} 
```

我`slug`在我的循环中使用作为类名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T05:14:17.790

我不确定我是否完全理解你的问题，但我会陈述我的假设并从那里开始工作：

*   您拥有上述格式的数据：

    `{term_id:9, name:Milk, slug:milk, term_group:0, term_taxonomy_id:17...}`

*   您想对`slug`名称进行排序，即使我们不知道这些蛞蝓会提前命名。

假设这两件事，您链接到的小提琴很接近，但由于[我已修复](http://jsfiddle.net/nt3r/DCRFf/1/)的闭包而出现问题。

正如预期的那样，您的情况与列出的情况类似，只是您需要先获取 JSON 数据，就像您一样。

```
var $container = $('.sort-container'),
    createSortFunction = function(slug) {
        return function($elem) {
            return $elem.hasClass(slug) ? ' ' : '';
        };
    }, 
    getSortData = function(data) {
        var sortMethods = {};

        for (var index in data) {
            var slug = data[index].slug;

            // immediately create the function to avoid
            // closure problems
            sortMethods[slug] = createSortFunction(slug);
        }

        return sortMethods;
    }

$.getJSON('member-cat-json.php', function (data) {
    // I'm wrapping the isotop creation inside the `getJSON`
    // call, just to ensure that we have `data`

    $container.isotope({
        itemSelector: '.member-item',
        layoutMode: 'straightDown',
        getSortData: getSortData(data);
    });
}); 
```

# mysql - 在 SQL 中增加数值和更改字符串

> ID：15842558
> 
> 赞同：0
> 
> 时间：2013-04-05T20:04:13.163
> 
> 标签：mysql, arrays, replace

我有一个数据库，该数据库将值存储在一个复杂的序列化数组中，其中一个组件是字符串，另一个是字符串字符的长度，格式如下：

> s:8:"test.com"

其中“s”保存引号中字符串的字符长度。

我想将字符串从“test.com”更改为“testt.com”，并且在 SQL 中使用以下语句：

> UPDATE table SET row=(REPLACE (row, 'test.com','testt.com'))

但是，这会破坏有问题的脚本，因为它不会更新存储“test.com”的字符串之前的“s”中的字符长度。

我想知道是否可以使用一个查询来替换字符串，然后在替换发生的位置之前增加这个“s”的值，如下所示：

> UPDATE table SET row=(REPLACE (row, 's:' number 'test.com','s:' number+1 'testt.com'))

有谁知道这种查询是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:27:03.453

如果您需要更改确切的字符串，请使用确切的查询 -

```
UPDATE table SET row = 's:9:"testt.com"' WHERE row = 's:8:"test.com"'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:35:03.127

该字符串是一个“[序列化字符串](http://php.net/manual/en/function.serialize.php)”。

如果要替换多个字符串，则创建一个脚本来处理它可能会更容易。

在 PHP 中，它是这样的：

```
$searchfor = serialize('test.com');
$replaceby = serialize('testt.com');

// strip last semicolon from serialized string
$searchfor = trim($searchfor,';');
$replaceby = trim($replaceby,';');

$query = "UPDATE table SET field = '$replaceby' WHERE field = '$searchfor';"; 
```

这样，您可以根据需要创建一个精确的查询字符串。如有必要，请填写正确的数据库连接代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T20:44:00.327

```
UPDATE table set row = concat('s:',length('testt.com'),':"testt.com"'); 
```

# c# - C# ASP.NET for 循环问题

> ID：15842559
> 
> 赞同：-7
> 
> 时间：2013-04-05T20:04:14.597
> 
> 标签：c#, asp.net, loops

在我后面的代码中，我有一个名字列表......（Tracy、Michelle 和 Tiffany）

我有一个名为 names 的字符串，每个名字都被添加到字符串中，但它显示如下（Tracy Michelle Tiffany）

我怎么能在每个名字之后得到它，它给出一个逗号，在最后一个名字之前，放和..

这是我的一些代码

```
 string names = "";

    for(int i=0; i< GroupOfPeople.Count; i++)
    {
         GroupOfPeople nm = (GroupOfPeople) nm.GroupOfPeople[i];
         names += nm.FirstName;                        
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:08:17.437

如果您使用 .NET 4.0 或更高版本，您可以使用`String.Join`它`IEnumerable<string>`：

```
var nameList = new List<string>();
for(int i=0; i< GroupOfPeople.Count; i++) {
    GroupOfPeople nm = (GroupOfPeople) nm.GroupOfPeople[i];
    nameList.Add(nm.FirstName);
}
var names = string.join(", ", nameList); 
```

如果没有看到界面，很难说`GroupOfPeople`是否可以在不创建显式列表的情况下执行此操作。如果有办法`GroupOfPeople`使用 LINQ 选择所有名字，请将该表达式插入最后一行以代替`nameList`：

```
var names = string.join(
    ", "
,   GroupOfPeople.Cast<GroupOfPeople>().Select(nm => nm.FirstName)
); //             ^^^^^^^^^^^^^^^^^^^^^^ The above cast may be unnecessary 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T20:09:16.390

做类似的事情

```
for(int i=0; i< GroupOfPeople.Count; i++)
        {
            GroupOfPeople nm = (GroupOfPeople) nm.GroupOfPeople[i];
                if(i < GroupOfPeople.Count - 1)
                    names += nm.FirstName + ", ";
                else
                     names += " and " + nm.FirstName;

         } 
```

# jquery - .prepend() 和 .show(effect) 问题

> ID：15842569
> 
> 赞同：0
> 
> 时间：2013-04-05T20:05:04.250
> 
> 标签：jquery

创建一个`.prepend()`函数。它预先设置然后显示正确的 div - 应该如此。但是，`.show()`效果（即比例）没有执行。这甚至可能吗？我知道 .append() 和 .prepend() 存在局限性。

是的，我指的是 jQuery 的 UI 脚本。

```
$('<div class="load-success" style=display:none"></div>').prependTo('.body-img-deets').show("scale", {}, 900); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:09:45.047

在显示之前缺少一个 ": none ？无论如何，尝试隐藏它然后显示它。

```
$('<div class="load-success" />').prependTo('.body-img-deets')
                                 .hide()
                                 .show("scale", {}, 900); 
```

# javascript - 如何将支持 Angular 的元素添加到 DOM？

> ID：15842570
> 
> 赞同：10
> 
> 时间：2013-04-05T20:05:06.923
> 
> 标签：javascript, angularjs

我想以编程方式添加一些支持 Angular 的 DOM 元素。实际上，我可能需要添加自定义组件。我该怎么做？

这是一个简单的小提琴来演示这个问题：http: [//jsfiddle.net/ZJSz4/2/](http://jsfiddle.net/ZJSz4/2/)

HTML：

```
<div ng-app="main">
    <div ng-controller="MyCtrl">
        <button ng-click="add()" >Add</button>
        <div id="container">
            <div>{{test}}</div>
        </div>
    </div>
</div> 
```

JS：

```
angular.module("main", []).controller("MyCtrl", function($scope) {
    $scope.add = function() {
        $("#container").append("<div>{{test}}</div>");
    };

    $scope.test = 'Test Message';
}); 
```

以防万一，我希望它为每次点击添加一个显示“测试消息”的 div - 而不是 {{test}}。

为什么我需要它？好吧，我想要一些带有portlet 的可排序列（在jQuery 可排序意义上）。我想每个 portlet 都可以是一个组件。

我爬错山了吗？解决这个问题的 Angular 方法是什么？

**编辑**：我希望这个简单的例子不会以这种方式结束，但无论如何。最终目标不是为数组中的每个元素显示一个 div。

我真正想要的是一个更复杂的控制器。我需要一个具有一些有趣行为的 portlet 容器。它可能需要决定将每个 portlet 放在不同的列中。在这种情况下，它可能会提供更改布局并有一种不错的方式来重新组织 portlet。等等。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T20:57:50.567

尽管我不完全确定期望的结果是什么，但您确实希望确保所有 DOM 操作都在指令内完成，而不是在控制器内完成。

这个 JSfiddle 示例应该让您朝着正确的方向前进。

[http://jsfiddle.net/ZJSz4/5/](http://jsfiddle.net/ZJSz4/5/)

```
<div ng-app="main">
<div ng-controller="MyCtrl">
<div id="container">
    <button ng-click="add()" >Add</button>
    <ng-portlet></ng-portlet>
</div>
</div> 
```

```
angular.module("main", []).controller("MyCtrl", function($scope) {
    $scope.test = 'Test Message';
}).directive("ngPortlet", function ($compile) {
return {
    template: '<div>{{test}}</div>   ',
    restrict: 'E',
    link: function (scope, elm) {
        scope.add = function(){
            console.log(elm);
           elm.after($compile('<ng-portlet></ng-portlet>')(scope));
        }
    }
};
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T20:10:53.797

如果您想要多个测试，我建议您这样设置。

```
<div ng-app="main">
    <div ng-controller="MyCtrl">
        <button ng-click="add()" >Add</button>
        <div id="container">
            <div ng-repeat="test in tests">{{test.name}}</div>
        </div>
    </div>
</div>

$scope.tests = []; // define this as an array

$scope.add = function() {
   var newTest = {name: 'Test Message'};

   $scope.tests.push(newTest);
}; 
```

这将根据您的测试对象动态创建 div。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-11T05:19:12.360

正如@Christopher Marshall 指出的那样，最简单的方法是使用重复元素并在按下按钮时将新项目推入范围。

[HTML]

```
<div ng-app="main">
    <div ng-controller="MyCtrl">
        <button ng-click="add()" >Add</button>
        <div id="container">
            <div ng-repeat="test in tests">{{test}}</div>
        </div>
    </div>
</div> 
```

[JS]

```
angular.module("main", []).controller("MyCtrl", function($scope) {
    $scope.add = function() {
        $scope.tests.push('New Message');
    };

    $scope.tests = ["Test Message","Test Message 2"];
}); 
```

# java - Java如何处理多个UDP数据包接收？

> ID：15842571
> 
> 赞同：0
> 
> 时间：2013-04-05T20:05:10.313
> 
> 标签：java, udp

想象一下UDP数据包中的以下场景：

1.  服务器广播“Hello”消息并等待应答
2.  客户 1 回答“嗨”
3.  客户 2 也回答“嗨”

现在，如果在服务器完成处理第一个答案之前收到第二个答案，我对服务器会发生什么感兴趣。

一方面，UDP 在设计上是不可靠的，并且由于我没有`datagramSocket.receive(myPacket)`第二次调用，我认为第二个答案将被默默地丢弃。

另一方面，套接字仍然是打开的，所以也许 Java（或者甚至更低级别，如内核网络堆栈中的）会将数据包排队。

在这种情况下真的会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T20:07:16.903

操作系统的网络堆栈缓冲数据报。

只要套接字保持打开状态，额外`.receive()`的调用就会获取数据报内容。

如果在缓冲数据包时关闭套接字，则它们将被静默丢弃。

# backbone.js - 骨干事件：在触发事件时记录所有事件

> ID：15842572
> 
> 赞同：6
> 
> 时间：2013-04-05T20:05:12.153
> 
> 标签：backbone.js

我正在使用一些主干和下划线创建一个事件对象，如下所示：

```
var appEvents = _.extend({}, Backbone.Events); 
```

然后，我尝试创建一个函数，该函数将 console.log 记录所有触发到该对象的事件，无论它在哪里、如何或有什么侦听器，但我有点不确定我会怎么做。我仍在尝试使用 Backbone。

我认为使用 listenTo 方法是要走的路......但同样，我不确定我将如何实现它。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-05T21:04:47.397

您可以只使用 Backbone 的特殊`all`事件：

```
appEvents.on("all", function(eventName){
    console.log(eventName + ' was triggered!');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-31T07:42:02.493

```
var object = {};

_.extend(object, Backbone.Events);

object.on("alert:param1", function(msg) {
  alert("Сработало " + msg);
});

object.on("alert:param2", function(msg) {
  alert("Сработало " + msg);
});

object.on("all", function(eventName) {
  console.log(eventName);
});
object.trigger("alert:param2", "событие");
object.trigger("alert:param1", "событие"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T21:07:09.370

然后覆盖触发函数。

```
var trigger = appEvents.trigger;
appEvents.trigger = function(name) {
  console.log('Event', name, 'triggered.');
  trigger.apply(this, arguments);
}; 
```

但我仍然觉得整个故事很奇怪（再说一次，这只是我的看法）。

# php - preg 在模式开始处使用静态字符串匹配所有内容

> ID：15842575
> 
> 赞同：1
> 
> 时间：2013-04-05T20:05:20.933
> 
> 标签：php, regex, preg-match-all

我正在使用以下字符串将所有 PHP 中的 preg 匹配放在一起：

```
{{beginning_of_string|:|optional_param|:|http_link}} 
{{beginning_of_string|:|optional_param|:|text}} 
{{beginning_of_string}} 
```

所有这三种可能性都可以出现在整个字符串中，或​​者仅出现一次。到目前为止，这是我的正则表达式：

```
preg_match_all('#\{\{beginning_of_string(.+?)\}\}#', $content, $string) 
```

到目前为止，这只匹配字符串的前两次出现，而不是最后一次出现。此正则表达式仅匹配最后一次出现：

```
#\{\{beginning_of_string\}\}# 
```

我对正则表达式相当陌生，所以我知道这可能很简单。有人有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T20:07:00.290

`+`意思是“一个或多个重复”。

您需要`*`“零次或多次重复”：

```
preg_match_all('#\{\{beginning_of_string(.*?)\}\}#', $content, $string) 
```

# icons - inno setup 的 uninstall 图标默认值

> ID：15842578
> 
> 赞同：1
> 
> 时间：2013-04-05T20:05:33.273
> 
> 标签：icons, inno-setup, uninstallation

我正在使用 Inno Setup (5.5.3) 创建可执行文件。我希望使用默认的卸载图标（例如：My Program inno setup example 的相同卸载图标）。当我创建我的可执行文件时，我的程序的卸载图标与程序的图标相同，这会给用户带来混乱。

```
; Script generated by the Inno Setup Script Wizard.
; SEE THE DOCUMENTATION FOR DETAILS ON CREATING INNO SETUP SCRIPT FILES!

#define MyAppName "Remove xyz-duplicate LiDAR points"
#define MyAppVersion "0.2 Beta"
#define MyAppExeName "remove_duplicate_xyz_executable_project.exe"

[Setup]
; NOTE: The value of AppId uniquely identifies this application.
; Do not use the same AppId value in installers for other applications.
; (To generate a new GUID, click Tools | Generate GUID inside the IDE.)
AppId={{73F937B9-0CD9-44F1-B07E-17CD2399EE13}
AppName={#MyAppName}
AppVersion={#MyAppVersion}
;AppVerName={#MyAppName} {#MyAppVersion}
DefaultDirName={pf}\{#MyAppName}
DefaultGroupName={#MyAppName}
AllowNoIcons=yes
OutputBaseFilename=Remove xyz-duplicate LiDAR points
SetupIconFile=C:\PythonScript\Script_fun\Remove_duplicate_xyz\LiDAR_Remove_xyz_Duplicate_Point_executable_project\iconRemoveduplicate_two_80res_small.ico
Compression=lzma
SolidCompression=yes

[Languages]
Name: "english"; MessagesFile: "compiler:Default.isl"
Name: "brazilianportuguese"; MessagesFile: "compiler:Languages\BrazilianPortuguese.isl"
Name: "danish"; MessagesFile: "compiler:Languages\Danish.isl"
Name: "french"; MessagesFile: "compiler:Languages\French.isl"
Name: "german"; MessagesFile: "compiler:Languages\German.isl"
Name: "italian"; MessagesFile: "compiler:Languages\Italian.isl"
Name: "norwegian"; MessagesFile: "compiler:Languages\Norwegian.isl"
Name: "russian"; MessagesFile: "compiler:Languages\Russian.isl"
Name: "spanish"; MessagesFile: "compiler:Languages\Spanish.isl"

[Tasks]
Name: "desktopicon"; Description: "{cm:CreateDesktopIcon}"; GroupDescription: "{cm:AdditionalIcons}"; Flags: unchecked
Name: "quicklaunchicon"; Description: "{cm:CreateQuickLaunchIcon}"; GroupDescription: "{cm:AdditionalIcons}"; Flags: unchecked; OnlyBelowVersion: 0,6.1

[Files]
Source: "C:\Program Files (x86)\Inno Setup 5\Examples\MyProg.exe"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Remove_duplicate_xyz\LiDAR_Remove_xyz_Duplicate_Point_executable_project\dist\_ctypes.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Remove_duplicate_xyz\LiDAR_Remove_xyz_Duplicate_Point_executable_project\dist\_hashlib.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Remove_duplicate_xyz\LiDAR_Remove_xyz_Duplicate_Point_executable_project\dist\_socket.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Remove_duplicate_xyz\LiDAR_Remove_xyz_Duplicate_Point_executable_project\dist\_ssl.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Remove_duplicate_xyz\LiDAR_Remove_xyz_Duplicate_Point_executable_project\dist\bz2.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Remove_duplicate_xyz\LiDAR_Remove_xyz_Duplicate_Point_executable_project\dist\library.zip"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Remove_duplicate_xyz\LiDAR_Remove_xyz_Duplicate_Point_executable_project\dist\python27.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Remove_duplicate_xyz\LiDAR_Remove_xyz_Duplicate_Point_executable_project\dist\remove_duplicate_xyz_executable_project.exe"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Remove_duplicate_xyz\LiDAR_Remove_xyz_Duplicate_Point_executable_project\dist\select.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Remove_duplicate_xyz\LiDAR_Remove_xyz_Duplicate_Point_executable_project\dist\unicodedata.pyd"; DestDir: "{app}"; Flags: ignoreversion
; NOTE: Don't use "Flags: ignoreversion" on any shared system files

[Icons]
Name: "{group}\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"
Name: "{group}\{cm:UninstallProgram,{#MyAppName}}"; Filename: "{uninstallexe}"
Name: "{commondesktop}\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"; Tasks: desktopicon
Name: "{userappdata}\Microsoft\Internet Explorer\Quick Launch\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"; Tasks: quicklaunchicon

[Run]
Filename: "{app}\{#MyAppExeName}"; Description: "{cm:LaunchProgram,{#StringChange(MyAppName, '&', '&&')}}"; Flags: nowait postinstall skipifsilent 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T22:08:35.737

您可以自定义要在菜单中显示的图标，将 IconFilename 参数添加到图标条目，如下所示：

```
[icons]
Name: "{group}\{cm:UninstallProgram,{#MyAppName}}"; Filename: "{uninstallexe}" IconFileName: "{app}\MyUninstallerIcon.ico 
```

[帮助](http://www.jrsoftware.org/ishelp/index.php?topic=iconssection)中的更多信息

> **图标文件名**
> 
> 要显示的自定义图标（位于用户系统上）的文件名。这可以是包含图标或 .ico 文件的可执行映像（.exe、.dll）。如果此参数未指定或为空，Windows 将使用文件的默认图标。该参数可以包括常量

# java - java ee sdk下载找不到jdk

> ID：15842580
> 
> 赞同：0
> 
> 时间：2013-04-05T20:05:53.633
> 
> 标签：java, eclipse, jsp, jakarta-ee, servlets

我一直在我的计算机上使用 eclipse 开发 JSP、servlet、applet、独立应用程序和其他 java 代码。最近，作为成功的防病毒程序的一部分，java 已从我的计算机中删除。

现在，当我尝试加载 eclipse 时，我得到的消息是我的系统没有 jre 或 jdk。

当我尝试下载 java ee 时，我只能找到[这些下载选项](http://www.oracle.com/technetwork/java/javaee/downloads/index.html)，它们承诺提供 java ee sdk。

但是，当我下载并运行安装文件时，安装程​​序会在安装过程中途停止，告诉我无法继续，因为在我的计算机上没有找到 jdk。它要求我手动指向 jdk，但我不能这样做，因为我的机器上没有 jdk。我能找到的唯一一个 jdk 下载站点是[这个，它是用于 java se 的。](http://www.oracle.com/technetwork/java/javase/downloads/index.html) 但是****我需要java EE来开发jsp、servlet、applet等。****

我还没有找到任何解释如何整合两者的信息。过去，我似乎记得只能下载一次 java。

谁能告诉我如何下载 java EE jdk？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T20:13:38.547

Oracle 的 Java EE SDK 确实是 GlassFish 实现。请注意，您无需下载 Java EE JDK 即可开始在 Java EE 上开发应用程序，而是需要**兼容 Java EE 的应用程序服务器**。知道了这一点，您有很多选择：

*   免费的 Java EE 应用服务器，如[JBoss AS](http://www.jboss.org/jbossas.html)、[GlassFish v3](http://glassfish.java.net/)和[TomEE](http://tomee.apache.org/apache-tomee.html)（不要与 Tomcat 混淆）。
*   付费的 Java EE 应用服务器，例如IBM 或[Oracle WebLogic的](http://www.oracle.com/us/products/middleware/cloud-app-foundation/weblogic/overview/index.html)[WebSphere Application Server（又名 WAS）](http://www-01.ibm.com/software/webservers/appserv/was/)。

为什么这里没有列出[Tomcat](http://tomcat.apache.org/)或[Jetty](http://www.eclipse.org/jetty/)？因为它们是 Servlet 容器，所以没有符合 Java EE 的 Web 应用程序服务器。

IMO 我会使用像 JBoss 或 GlassFish 这样的免费 AS 来开始 Java EE 世界。

由于问题标记为 eclipse，如果您将使用 JBoss 路径，我强烈建议安装[JBoss Tools](http://www.jboss.org/tools)以获得更好的 JBoss AS 使用帮助、JSF、Hibernate、JPA 等等（免责声明：我与 JBoss 无关也不是 Red Hat 以任何商业方式，只是这些技术的满意用户）。

如果您只想学习 JSP/Servlet 以开始 Java Web 开发，那么您只需要使用 Tomcat 即可，因为它非常轻量级。然后，您可以继续使用这些 Java EE 替代方案之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:08:15.357

[http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

?? 那就是JDK所在的地方，我花了5秒谷歌

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T20:13:26.207

从这里下载：

[Java 平台，企业版 6 SDK 更新 4（带有 JDK 7u11）](http://www.oracle.com/technetwork/java/javaee/downloads/java-ee-sdk-6u4-jdk-7u11-downloads-1900532.html)

祝你好运 ;）

# jquery - 我如何制作一个 单击时来回滑动？

> ID：15842584
> 
> 赞同：0
> 
> 时间：2013-04-05T20:06:17.307
> 
> 标签：jquery, animation, toggle, slide, reverse

我正在编写一个设计，当您单击左侧菜单中的一个选项（#menu1contact）时，蒙版的右侧（#face2）从左向右滑动并再次向后滑动，从而显示内部内容（#content） .

这是我的代码：

```
$('#menu1contact').on('click', function(){

    $('#face2').animate({
    'marginLeft': '+=750px'
    },2500)
    $('#content').animate({
    'width': '+=750px'
    },2500)
    $('#content').css('border-left' , 'solid #5d3f35') 
}); 
```

但是，当您再次单击#menu1contact 时，如何使其滑回原来的位置？

以下代码不起作用：

```
$('#menu1contact').toggle(function(){

    $('#face2').animate({
    'marginLeft': '+=750px'
    },2500)
    $('#content').animate({
    'width': '+=750px'
    },2500)
    $('#content').css('border-left' , 'solid #5d3f35')}, 

           function(){

    $('#face2').animate({
    'marginLeft': '-=750px'
    },2500)
    $('#content').animate({
    'width': '-=750px'
    },2500)
    $('#content').css('border-left' , 'solid #5d3f35') 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:11:50.840

您可以添加一个类来检查状态：

```
$('#menu1contact').on('click', function(){
    if ( !$(this).hasClass("opened") ) {
    $('#face2').animate({
    'marginLeft': '+=750px'
    },2500)
    $('#content').animate({
    'width': '+=750px'
    },2500);
    $('#content').css('border-left' , 'solid #5d3f35'); 
    $(this).addClass("opened");
    } else {
       $('#face2').animate({
    'marginLeft': '-=750px'
    },2500)
    $('#content').animate({
    'width': '-=750px'
    },2500);
    $('#content').css('border-left' , 'solid #5d3f35');
     $(this).removeClass("opened");
    }
}); 
```

但是，您在行尾错过了一些分号

# php - 未定义索引 PHP 错误/警告

> ID：15842595
> 
> 赞同：0
> 
> 时间：2013-04-05T20:06:53.907
> 
> 标签：php, mysql, joomla, jomsocial

我在来自 Joomla 和 Jomsocial 的 PHP 和 MySQL 应用程序上收到以下错误：

```
[05-Apr-2013 12:23:45 America/Denver] PHP Notice:  Undefined index: query in /home2
/robervl4/public_html/forum/components/com_community/community.php on line 50 
```

这不是开箱即用的。该应用程序按应有的方式显示数据库中的产品，唯一的问题是我收到此错误。

这是文件的 PHP 代码，第 50 行是：

```
parse_str($parts['query'], $qstring); 
```

代码：

```
// DISABLE FORMAT=FEED for now 17Jan13 as requested by Fuqaha
$mainframe  = JFactory::getApplication();
$jinput     = $mainframe->input;
$viewType = $jinput->request->get('format', 'html','NONE');
if(strtolower($viewType)=='feed') {
$u = JFactory::getURI();
$parts = parse_url($u->toString());
parse_str($parts['query'], $qstring);
unset($qstring['format']);
$parts['query'] = http_build_query($qstring) ;

//recompose the URL to redirect
$scheme   = isset($parts['scheme']) ? $parts['scheme'] . '://' : ''; 
$host     = isset($parts['host']) ? $parts['host'] : ''; 
$port     = isset($parts['port']) ? ':' . $parts['port'] : ''; 
$path     = isset($parts['path']) ? $parts['path'] : ''; 
$query    = isset($parts['query']) ? '?' . $parts['query'] : ''; 
$fragment = isset($parts['fragment']) ? '#' . $parts['fragment'] : ''; 

$mainframe->redirect(CRoute::_("$scheme$host$port$path$query$fragment"));
exit('Redirecting to Non-Feed page');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:09:35.703

`parse_url`只有当它有一个值时才会包含一个索引。IE，如果没有查询，`$parts['query']`就不会设置。测试是否先设置： `if (isset($parts['query'])) parse_str($parts['query'], $qstring);`

[http://php.net/manual/en/function.parse-url.php](http://php.net/manual/en/function.parse-url.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:10:14.160

parse_url 可能不包含查询字段。如果 URL 中存在查询部分，则仅包含查询字段；所以首先检查 $parts["query"] 是否存在 (isset())。

# javascript - 向页面添加内容会破坏背景

> ID：15842601
> 
> 赞同：0
> 
> 时间：2013-04-05T20:07:18.330
> 
> 标签：javascript, jquery, html, css, background

我用[这个](http://ie.microsoft.com/testdrive/graphics/cssgradientbackgroundmaker/)生成器来生成我喜欢的渐变背景。有了它，我设法创建了以下外观的 CSS 代码。它在不同口味的蓝色之间消失。

```
background-image: -ms-linear-gradient(top, #2BD0FF 0%, #09ADF1 100%);
background-image: -moz-linear-gradient(top, #2BD0FF 0%, #09ADF1 100%);
background-image: -o-linear-gradient(top, #2BD0FF 0%, #09ADF1 100%);
background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #2BD0FF), color-stop(1, #09ADF1));
background-image: -webkit-linear-gradient(top, #2BD0FF 0%, #09ADF1 100%);
background-image: linear-gradient(to bottom, #2BD0FF 0%, #09ADF1 100%); 
```

我已将其粘贴在我的 CSS 代码的正文部分。它看起来很流畅，但是当我使用[我在另一个主题中发布的代码](https://stackoverflow.com/questions/15840154/simultaneous-setintervals-only-first-one-running/15842251?noredirect=1#15842251)添加内容时，它会使背景条纹化。

这是一张展示正在发生的效果的图片。图片实际上是我添加`&nbsp;`. `body`云会发生什么（对于云，请参见上面的链接）是相似的，但条纹更宽。

![在此处输入图像描述](https://i.stack.imgur.com/YnssI.png)

我的 HTML 页面中包含一些其他元素，`body`但删除它们不会影响这种情况。我在该`head`部分中包含了 jQuery 1.9.1，我的代码与之前链接的讨论中的代码完全相同。

是什么导致了这种问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:09:58.633

使用`background-repeat: no-repeat`. 这应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:19:30.767

感谢 albertxing，我找到了正确的关键字并使用 Google 找到了解决方案。似乎该主题已在另一个问题中涉及。

[CSS背景渐变重复问题](https://stackoverflow.com/questions/7427331/css-background-gradient-repeat-issue)

# ruby - EventMachine - 端口正在使用中

> ID：15842608
> 
> 赞同：2
> 
> 时间：2013-04-05T20:07:39.307
> 
> 标签：ruby, linux, networking, port, eventmachine

获取端口已在使用错误。

```
require 'em-websocket'
EM.run {
    EM::WebSocket.run(:host => "192.168.1.100", :port => 9001) do |ws|
        # Code goes here...
    end
} 
```

然后在同一台服务器上同时使用**不同的 IP 地址**：

```
require 'em-websocket'

EM.run {
    EM::WebSocket.run(:host => "192.168.1.101", :port => 9001) do |ws|
        # Code goes here...
    end
} 
```

然后我得到这个错误......端口应该绑定到单独的 IP 地址，因此可以使用。

`/usr/local/rvm/gems/ruby-1.9.3-p194/gems/eventmachine-1.0.3/lib/eventmachine.rb:526:in 'start_tcp_server': no acceptor (port is in use or requires root privileges) (RuntimeError)`

我错过了什么吗？

**更新：**

运行：`netstat -tulpn | grep ruby`显示：

```
tcp        0      0 0.0.0.0:9001                0.0.0.0:*                   LISTEN      718/ruby 
```

清楚地显示服务器绑定到`0.0.0.0`And Not`192.168.1.100`

我怎样才能`eventmachine`绑定到`192.168.1.100`？

好像是个bug...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T20:48:58.523

Afaik`0.0.0.0:9001`意味着端口绑定在**每个**可用的 IP 地址上。所以它与`192.168.1.100:9001`.

# grid - Gnuplot 网格与文本重叠

> ID：15842609
> 
> 赞同：3
> 
> 时间：2013-04-05T20:07:41.613
> 
> 标签：grid, gnuplot, overlap

我目前正在将 gnuplot 用于一些文本数据的多个图表。因此，我想添加一个网格以便更好地查看数据。但是，网格太靠近行的文本。我该如何改进它，所以文本区域没有网格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-25T07:41:08.393

5.0 版引入了标签选项`boxed`，允许为标签添加背景。实际的盒子设置是通过以下方式完成的`set style textbox`：

```
set grid lw 2
set style textbox opaque noborder
set label at 0,0 "mylabel" boxed center front
plot sin(x) 
```

![在此处输入图像描述](https://i.stack.imgur.com/Nchvo.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T11:31:28.657

您可以在 tex 周围绘制一个矩形

```
set grid

mylabel="blub"
set obj 10 rect at 0,0 size char strlen(mylabel), char 1 
set obj 10 fillstyle solid border -1 front
set label 10 at 0,0 mylabel front center

plot sin(x) 
```

更多关于如何绘制矩形的例子可以在[这里](http://gnuplot.sourceforge.net/demo/rectangle.html)找到。

# html - 是否存在用于在本地测试网站的 Ipad 模拟器

> ID：15842611
> 
> 赞同：4
> 
> 时间：2013-04-05T20:07:44.427
> 
> 标签：html, ipad

我得到了一个项目来制作一个可以在桌面和 ipad 上运行的网站。这很棒，但我没有 ipad。

是否有任何类型的模拟可以用来测试我的本地网站以在 ipad 上查看其功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:12:19.243

就在这里。您必须安装 Xcode，然后运行 ​​iPad 模拟器（就像您在哪里测试您的应用程序一样）并转到 Web 浏览器（safari）并输入您的网站地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:09:39.803

是的。看：

*   [在 iPad 上测试网站](http://osxdaily.com/2010/09/28/test-a-website-on-an-ipad/)
*   [您的网站在 iPad 上的外观如何（没有 iPad）？](http://www.labnol.org/internet/test-websites-on-ipad/13368/)
*   [使用 Safari 进行 iPhone、iPad 和 iPod Touch 网站测试](http://www.labnol.org/internet/test-websites-on-ipad/13368/)

或者，您也可以注册一个免费的开发者 ID 并下载 xCode。使用随附的 iOS 模拟器来模拟任何类型的 iOS 设备。这是 iPhone 5 在我的 MAC 上显示谷歌搜索页面的屏幕截图。

![在此处输入图像描述](https://i.stack.imgur.com/fnTNy.png)

# c++ - 使用 ImageMagick 加载 bmp

> ID：15842613
> 
> 赞同：1
> 
> 时间：2013-04-05T20:07:49.983
> 
> 标签：c++, imagemagick, bmp

我将使用 Image Magisk 加载 bmp 图像，如下所示：

```
#include <Magick++.h> 
#include <iostream> 
using namespace std; 

int main(int argc,char **argv)
{ 
  Magick::InitializeMagick(*argv);

  Magick::Image image;
  try { 

    // Read a file into image object 
    image.read( argv[1] );

    cout << "image: " << argv[1] << endl; 
    cout << image.xResolution() << endl;
    cout << image.yResolution() << endl;

  } 
  catch( Magick::Exception &error_ ) 
    { 
      cout << "Caught exception: " << error_.what() << endl; 
      return 1; 
    } 
  return 0; 
} 
```

我正在加载的图像是这个：

![e](https://i.stack.imgur.com/Q3t2X.png)

它是一个 bmp ，可以在这里加载[实际 bmp](http://ge.tt/3SiPaDd/v/0?c)，代码编译正常，但分辨率信息错误，程序输出：

```
image: ../sd_nineteen/HSF_0/F0000_14/HSF_0_F0000_14_C0000_14_100_e_65.bmp
0
0 
```

发生了什么，imagemagick 或我的图像有问题（我猜我的图像有问题）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T04:56:47.603

Martin，似乎某些图像类型（例如 TIFF）支持与实际图像尺寸不同的视图分辨率。关于该主题的文档很少，但查看源代码似乎也与图像密度/DPI 信息有关。

无论格式如何，都可以使用 Image 类的`columns()`和`rows()`方法而不是`(x/y)Resolution()`方法来检索实际的图像尺寸。

# linux - 在linux上用“echo -e”替换命令echo

> ID：15842614
> 
> 赞同：0
> 
> 时间：2013-04-05T20:07:56.273
> 
> 标签：linux, shell, echo, alias, subshell

我有一个包含这样内容的 shell 程序

```
!#/bin/bash

echo \\n program 
```

一旦我在 Linux 以外的平台上运行该程序，它就会识别特殊字符并将输出显示为

```
(newline)
program 
```

当同一个程序在 Linux 上运行时，echo 命令需要“-e”选项。现在我不想在我的文件中显式地用“echo -e”更改每次出现的回声，因为这样会开始在其他平台上产生问题。所以我想做一个条件编译，比如

```
set SYSTEM="uname -s"

#if ($SYSTEM == Linux)
set echo="echo -e"
#endif 
```

但这不起作用，因为使用 set 或 export 命令，我需要用 $echo 替换所有出现的 echo，我不想这样做。再次设置别名并不能解决此问题，因为即使在 subshel​​l 中我也需要将 echo 替换为“echo -e”。

有没有其他方法可以用“echo -e”代替echo，仅适用于Linux平台？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:11:27.707

使用 和 的组合，[`BASH_ENV`](http://www.gnu.org/software/bash/manual/html_node/Bash-Startup-Files.html)我们可以做到：

```
bash-3.2$ export BASH_ENV=$HOME/always-source
bash-3.2$ cat $HOME/always-source 
echo() {
    command echo -e "$@"
}

bash-3.2$ cat runme.bash
#!/bin/bash

echo "\nHello World $1\n"

if [[ -z $1 ]]; then
    $0 child
fi 
```

和一个调用：

```
bash-3.2$ ./runme.bash 

Hello World 

Hello World child 
```

将其包装在 bash 测试中（linux 和 mac os x）：

```
if [[ $(uname -s) = Linux ]] || [[ $(uname -s) = Darwin ]]; then
    export BASH_ENV=$HOME/always-source
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:12:12.727

我相信您正在寻找别名。

bash 中的语法是 `alias echo='echo -e';`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T20:18:07.167

我知道您不想更改回声呼叫，但是您如何考虑使用`echo $'\nhello\n'`而不是`echo -e`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T20:50:35.577

在你的 shell 中定义一个别名：

```
alias echo="echo -e"; 
```

然后获取您的脚本：

```
source ./<script1> 
```

通过这样做，您的脚本将不会创建子 shell 并使用父 shell 的变量。此外，即使在脚本终止后，您在脚本中定义的变量也会存在。

要在 script1.sh 中调用其他脚本，请使用 source：

```
source ./<script2> 
```

# jquery - 如果用户已注销，对 django @login_required 视图的 Ajax 调用将返回登录页面

> ID：15842618
> 
> 赞同：2
> 
> 时间：2013-04-05T20:08:12.630
> 
> 标签：jquery, django

如果在 @login_required 中包装一个视图函数并使用 $.ajax({...}) 调用它并且用户已经注销（例如从另一个选项卡），则调用 success() 回调并且数据是内容的登录页面重定向。

如果@login_required 装饰器是ajax 请求而不是重定向，是否有办法返回错误代码，以便我可以在javascript 中正确重定向？

这篇文章（[What's the best way to handle session timeouts in ajax requests?](https://stackoverflow.com/questions/9694693/whats-the-best-way-to-handle-session-timeouts-in-ajax-requests)）表明我必须在 @login_required 装饰器上写我的……难道没有办法在核心 django 中处理这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:17:27.600

查看[permission_required](https://docs.djangoproject.com/en/dev/topics/auth/default/#the-permission-required-decorator)装饰器。它可以设置为返回 403 错误代码而不是登录页面重定向。

# oauth-2.0 - Google API/OAuth - 如何将 support@example.com 电子邮件地址用于“品牌信息”？

> ID：15842625
> 
> 赞同：5
> 
> 时间：2013-04-05T20:08:30.940
> 
> 标签：oauth-2.0, google-apps, google-oauth

我正在为我的网站设置基于 Google+ 的登录 (OAuth2)，以允许人们使用他们现有的 Google 帐户（gmail 等）登录。

登录部分一切正常，但为“品牌信息”显示的电子邮件地址是我的个人电子邮件地址（即`me@example.com`）。我希望它`support@example.com`被设置为指向我的和其他几个帐户的别名。我们将 Google Apps 用于具有自定义域（不是 gmail）的电子邮件。它目前不是它自己的帐户。

我可以编辑标题和徽标，但没有更改电子邮件地址的选项。我怎样才能将电子邮件更改为`support@example.com`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-07T06:54:01.083

要更改品牌信息的支持电子邮件地址，请首先使用当前地址登录。

1.  将正确的地址添加到成员列表中。

2.  使用右侧的“团队”菜单，授予您的其他电子邮件地址访问权限。我同意“是所有者”，但其他选项可能有效。您可以拥有多个所有者。

3.  然后，使用您的其他帐户（您刚刚添加的支持电子邮件）登录 API 控制台并转到 API 访问。

4.  单击“编辑品牌信息”以显示详细信息。

5.  最后，单击您的支持电子邮件旁边的“设置为您自己”（或类似的内容）。

# lua - Scrollview 内的 TableView/List

> ID：15842628
> 
> 赞同：0
> 
> 时间：2013-04-05T20:08:43.283
> 
> 标签：lua, coronasdk, corona-storyboard

我只是在学习 LUA/Corona 并且想知道是否可以在 ScrollView 中有一个 tableView？

我有下面的滚动条使导航栏下方的所有内容都可以滚动。

```
--Setup the nav bar 

local navBar = display.newImageRect("assets/images/navbar.png", display.contentWidth + 15, 44)
navBar.x = display.contentWidth*.5
navBar.y = math.floor(display.screenOriginY + navBar.height*0.5)

local navHeader = display.newText("My Game", 0, 0, "Handlee", 36)
navHeader:setTextColor(255, 255, 255)
navHeader.x = display.contentWidth*.5
navHeader.y = navBar.y

    local scroller = widget.newScrollView
    {
        top = 44,
        width = display.contentWidth,
        height = 568,
        scrollWidth = display.contentWidth,
        scrollHeight = display.contentHeight,
        hideBackground = true,
        horizontalScrollDisabled = true,
        maskFile = "assets/images/mask-320x568.png"
    } 
```

我正在尝试将表格添加到此 ScrollView。是否可以简单地使用widget.newTableView？我唯一的问题是该表在它可以包含的行数上是动态的。它将从 API 调用中检索 JSON 数据。所以我将无法定义表格的高度，因为它们可能是 0 行或 10 行。我希望 tableView 在 ScrollView 中是静态的。

本质上，我正在尝试重新创建这样的内容：[http](http://cdn.thenextweb.com/wp-content/blogs.dir/1/files/2013/01/Ruzzle.jpg) ://cdn.thenextweb.com/wp-content/blogs.dir/1/files/2013/01/Ruzzle.jpg （正确的图像 - 它说等待对手）

我确实有一个要分配给每一行的自定义背景图像。所以我想简单地为每行数据渲染一个图像，然后在每个图像的顶部渲染文本等，但是我不会有 onRowTouch 事件，我想为每一行分配一个我相信的 id只有 TableView 才有可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:06:56.747

我相信 tableView 的功能是滚动视图。这意味着一旦您的 tableView 超过屏幕高度，它就会提供滚动机制。据我了解，tableView 必须单独存在于场景中。还没有看到在同一场景（故事板）上具有与 tableView 一起的示例。

# python - 在 windows 上安装 django-cms

> ID：15842629
> 
> 赞同：0
> 
> 时间：2013-04-05T20:08:46.487
> 
> 标签：python, django, django-cms

在 Windows 机器上运行`pip install django===1.4 django-cms south`，按照[此处](http://docs.django-cms.org/en/2.3.5/getting_started/installation.html)找到的说明返回此错误：

```
Downloading/unpacking Django==1.4
  Downloading Django-1.4.tar.gz (7.6MB): 7.6MB downloaded
  Running setup.py egg_info for package Django

Downloading/unpacking django-cms
  Running setup.py egg_info for package django-cms
    Traceback (most recent call last):
      File "<string>", line 16, in <module>
      File "c:\users\shadow\appdata\local\temp\pip-build-Shadow\django-cms\setup
.py", line 3, in <module>
        import cms
      File "cms\__init__.py", line 7, in <module>
        if 'cms' in settings.INSTALLED_APPS:
      File "C:\Python27\lib\site-packages\django\conf\__init__.py", line 53, in
__getattr__
        self._setup(name)
      File "C:\Python27\lib\site-packages\django\conf\__init__.py", line 46, in
_setup
        % (desc, ENVIRONMENT_VARIABLE))
    django.core.exceptions.ImproperlyConfigured: Requested setting INSTALLED_APP
S, but settings are not configured. You must either define the environment varia
ble DJANGO_SETTINGS_MODULE or call settings.configure() before accessing setting
s.
    Complete output from command python setup.py egg_info:
    Traceback (most recent call last):

  File "<string>", line 16, in <module>

  File "c:\users\shadow\appdata\local\temp\pip-build-Shadow\django-cms\setup.py"
, line 3, in <module>

    import cms

  File "cms\__init__.py", line 7, in <module>

    if 'cms' in settings.INSTALLED_APPS:

  File "C:\Python27\lib\site-packages\django\conf\__init__.py", line 53, in __ge
tattr__

    self._setup(name)

  File "C:\Python27\lib\site-packages\django\conf\__init__.py", line 46, in _set
up

    % (desc, ENVIRONMENT_VARIABLE))

django.core.exceptions.ImproperlyConfigured: Requested setting INSTALLED_APPS, b
ut settings are not configured. You must either define the environment variable
DJANGO_SETTINGS_MODULE or call settings.configure() before accessing settings.

----------------------------------------
Command python setup.py egg_info failed with error code 1 in c:\users\shadow\app
data\local\temp\pip-build-Shadow\django-cms
Storing complete log in C:\Users\Shadow\pip\pip.log 
```

Django 和 apache 以及其他一切都运行良好。据我所知，这种错误应该只发生在您实际尝试运行 django 时，而不是尝试安装插件/应用程序。关于导致此错误的原因有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:53:25.367

这是一个已知问题，将在接下来的 3 天内通过 2.3.6 版本修复。即将发布的 2.4 版本也不会出现此问题。

# javascript - 从 Dart 监听 javascript 事件

> ID：15842633
> 
> 赞同：3
> 
> 时间：2013-04-05T20:09:05.293
> 
> 标签：javascript, dart

Dart 中有没有办法监听来自 javascript 库的事件？

例如，当有人释放滑块时，jqrangeslider [http://ghusse.github.io/jQRangeSlider/](http://ghusse.github.io/jQRangeSlider/)包会发出 userValueChanged 事件。

通过 js/js.dart 包在 Dart 中监听该事件是否容易？

希望看到 Dart 中的一些监听器示例，它从 javascript 库中监听此类事件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T20:37:31.400

感谢[js 包](http://pub.dartlang.org/packages/js)，你可以处理几乎所有的 js 代码。这是以下 javascript 代码片段的 dart 版本：

```
$("#slider").bind("valuesChanged", function(e, data){
  console.log("Will be executed");
}); 
```

在飞镖中：

```
js.scoped((){
  js.context.jQuery("#slider").bind("valuesChanged", new js.Callback.many((e, data) {
    print("Will be executed");
  }));
}); 
```

请注意，我使用`jQuery`而不是`$`因为否则您会遇到*dart2js*的问题（请参阅[issue 2265](http://dartbug.com/2265)）。

基本上，当你在 JS 中使用回调函数时，你必须使用`js.Callback.many`或`js.Callback.once`包装你的回调。有关更多详细信息，请参阅[管理回调生命周期](http://www.dartlang.org/articles/js-dart-interop/#managing-callback-lifetimes)。

# powershell - 尝试使用 powershell 将数组导出到 csv（数组对象是 ; 分隔并包含换行符）

> ID：15842636
> 
> 赞同：1
> 
> 时间：2013-04-05T20:09:25.310
> 
> 标签：powershell, scripting

好的，所以我有这个数组，它本质上是`Import-Csv`一个 CSV 文件。数组中的每个对象都是一个完整的 CSV 行。当我用 Excel 打开它时，输入文件正确呈现（列是正确的）

此 CSV 文件以逗号分隔，格式如下：

> "第一","第二","这就是全部
> 
> 第三
> 
> 列","第四"

我已经让脚本中的所有内容都能正常工作，除了我需要将此数组以可以正确呈现的格式写入 .csv 文件的部分。我一直在使用`Out-File`,时遇到问题`Export-Csv`，我什至尝试过[这个](http://blogs.technet.com/b/heyscriptingguy/archive/2011/09/23/use-powershell-to-work-with-csv-formatted-text.aspx)，但它并没有完全满足我的需要。每个对象需要是 csv 文件中的一个新行，只出现一次，并且必须遵守 Excel 对 CSV 文件的呈现（即每列需要双引号和逗号分隔）。

我什至非常绝望，以至于我试图通过这样做来正确地手动格式化这个东西：

```
$Array | % { $_ -replace "`"@`{","`n`"" } | % { $_ -replace "}`"","`"`n" } | % { $_ -replace "`;","`"`;`"" } | % { $_ -replace "Plugin ID=","" } | % { $_ -replace "CVE=","" } | % { $_ -replace "CVSS=","" } | % { $_ -replace "Risk=","" } | % { $_ -replace "Host=","" } | % { $_ -replace "Protocol=","" } | % { $_ -replace "Port=","" } | % { $_ -replace "Name=","" } | % { $_ -replace "Synopsis=","" } | % { $_ -replace "Solution=","" } | % { $_ -replace "Description=","" } | % { $_ -replace "Plugin Output=","" } | % { $_ -replace "`";`"","`",`"" } | Out-File "$dirResults\$Results-$Time.csv" 
```

本质上，我在这里做的是几件事：

*   从每个对象的开头删除 @{ 并从末尾删除 }
*   将分隔符从 ; 到 ，
*   将每一列放在双引号中
*   从每个值的开头删除 ColumnHeader=

这是一段代码：

```
$arrayHeader = @("Plugin ID;CVE;CVSS;Risk;Host;Protocol;Port;Name;Synopsis;Description;Solution;Plugin Output")
$OutterArrayException = Import-Csv "$dirExceptions\$FileException" -Delimiter ","
$InnerArrayScanMe = New-Object System.Collections.ArrayList
# This method keeps the arrays separate types
FOREACH ( $Object in $OutterArrayScanMe )
        {   $InnerArrayScanMe.Add("$Object") | Out-Null }
# Note that the OutterArrayException is an Import-Csv from a similarly formatted file as OutterArrayScanMe
FOREACH ( $Exception in $OutterArrayException )
        { $InnerArrayScanMe.Remove("$Exception") }
# This method keeps the arrays separate types
$OutterArrayScanMe = @($arrayHeader) + @($InnerArrayScanMe)
$OutterArrayScanMe | Export-Csv "$dirResults\$FileScanMe-$startTime.csv" -Delimiter ";" -NoTypeInformation 
```

**更新**：
当我使用 export-csv 时，对象的新行将信息作为新行放在 csv 中。因此，应该看起来像这样的东西变得非常混乱。

**UPDATE2**：
关于格式是什么样子以及格式存在什么问题存在一些问题。为了清除这些，我在数组中包含了一个对象来演示该问题。请记住，在我的脚本中发生的情况是有一个格式正确的 CSV 的 import-csv（具有多行等，并且可以完美呈现），删除不必要的对象（使用 $array.Remove），然后转储到文件（ Out-File 或 Export-Csv)。如此简单，却又如此破碎……

**示例数组对象**（输出文件）：
@{Plugin ID=#####; CVE=CVE-####-####；CVSS=#.#; 风险=中等；主机=###.###.###.###; 协议=xxx；端口=##; 名称=Microsoft ASP.NET xxx；
Synopsis=远程Web服务器漏洞使用的框架。Description=在远程主机上运行的 Web 服务器似乎正在使用 Microsoft
ASP.NET，并且可能受到漏洞的影响。

此外，有人猜测，如果对机器具有物理访问权限的攻击者插入此漏洞，可能会导致独角兽和彩虹。解决方案=使用魔法过滤器阻止对淘气网站的请求。;
Plugin Output= Nessus 通过请求以下 URL 收到了一个顽皮的页面或相关的错误消息：

hxxp://###.###.###.###/xxx/xxxxxxxx
}

**示例数组对象**(Export-Csv)：
#TYPE System.String
"Length"
"616"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T17:01:07.990

问题似乎在于您如何操作数组。看一下这个：

测试.csv

```
"Age";"Name"
12;"Test name"
13;"My Other
test" 
```

脚本

```
$Array = Import-Csv .\test.csv -Delimiter ";"

#$Array.Remove() is NOT a valid method. An array is of fixed size, and you will get an exception
#Instead, create a new array of items that are filtered through your rules.
#My test rule is only kids who are not 12 years old
$Newarray = $Array | Where-Object { $_.Age -ne "12" }

$Newarray | Export-Csv .\out.csv -Delimiter ";" -NoTypeInformation 
```

输出.csv

```
"Age";"Name"
"13";"My Other
test" 
```

一切都应该是这样。

不要`-replace`在物体上使用。它将对象转换为字符串，您将获得在 update2 中提供的输出。前任：

```
$Array = Import-Csv .\test.csv -Delimiter ";"

$Array -replace "`r`n" | Export-Csv .\out2.csv -Delimiter ";"
$Array -replace "`r`n" | Out-File out2.txt 
```

Out2.csv

```
#TYPE System.String
"Length"
"25"
"28" 
```

`-NoTypeInformation`“TYPE”部分只是因为您没有指定`Export-CSV`

Out2.txt

```
@{Age=12; Name=Test name}
@{Age=13; Name=My Othertest} 
```

顺便说一句，`Out-File`这不是一种导出对象的方法，但是，在`-replace`您的对象数组变成字符串数组之后，就像 Out2.txt 中的输出一样

**编辑** `$OutterArrayScanMe = @($arrayHeader) + @($InnerArrayScanMe)`这是你的问题。您将两个数组合并在一起。新数组中的第一个对象将是一个字符串对象。`Export-CSV`使用第一个对象的属性作为每个对象的标题。由于第一个对象是一个字符串（只有 Length 属性），所有对象都将`Length`仅使用属性导出。

如前所述，`Export-CSV`将对象属性用作标头（除非您指定另一个标头定义，例如`| Select Age, Name | Export-Csv`）。因此，如果`$InnerArrayScanMe`是具有相同属性的对象数组，只需使用：

```
$InnerArrayScanMe | Export-Csv "$dirResults\$FileScanMe-$startTime.csv" -Delimiter ";" -NoTypeInformation 
```

并且`Export-CSV`会自己找出标题。摘要：不要将您的标头字符串添加到数组中。如果您需要特定的顺序或需要排除某些属性，可以使用传递字符串数组来`select-object`定义标题，如下所示：

```
$arrayHeader = @("Plugin ID","CVE","CVSS","Risk","Host","Protocol","Port","Name","Synopsis","Description","Solution","Plugin Output")

$arrlist | Select-Object -Property $arrayHeader | 
Export-Csv "$dirResults\$FileScanMe-$startTime.csv" -Delimiter ";" -NoTypeInformation 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T17:27:50.513

不确定是否了解您的问题，您可以执行以下操作：

```
Import-Csv C:\temp\nessus.csv | where {$_.risk -eq "high"}
Import-Csv C:\temp\nessus.csv | where {$_.risk -eq "high"} | select host -Unique 
```

您可以将其导出为可使用 Excel 编辑的 CSV

```
Import-Csv C:\temp\nessus.csv | where {"high","medium","low" -contains $_.risk} | select "Plugin ID", CVE, CVSS, Risk, Host, Protocol, Port, Name | Export-Csv 'c:\temp\nessusExcel.csv' -Delimiter ';' 
```

您可以在 gridview 中显示：

```
Import-Csv C:\temp\nessus.csv | where {"high","medium","low" -contains $_.risk} | select "Plugin ID", CVE, CVSS, Risk, Host, Protocol, Port, Name | Out-GridView 
```

导出到 HTM 文件：

```
Import-Csv C:\temp\nessus.csv | where {"high","medium","low" -contains $_.risk} | select "Plugin ID", CVE, CVSS, Risk, Host, Protocol, Port, Name | ConvertTo-Html -As List > report.html 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T12:10:05.413

问题出在脚本中，在这一步：

```
$InnerArrayScanMe = New-Object System.Collections.ArrayList  
# This method keeps the arrays separate types  
FOREACH ( $Object in $OutterArrayScanMe )  
        {   $InnerArrayScanMe.Add("$Object") | Out-Null } 
```

$InnerArrayScanMe 成功地添加了普通数组 $OutterArrayScanMe 中的对象，而没有更改数组类型，但是由于它被放入 .NET 数组中，因此从这里开始数据格式不正确。

这样做的初始方式的目的是让我可以使用 .NET 数组的 .Add 和 .Remove 方法。使我们不需要引用要通过索引删除的对象的解决方法如下所示：

```
FOREACH ( $Exception in $ArrayException )
{
    $ArrayScanMe = $ArrayScanMe | Where-Object {"$_" -ne "$Exception"};
} 
```

然后允许我们做一个基本的 Export-Csv

```
$ArrayScanMe | Export-Csv "$dirResults\$FileScanMe-$startTime.csv" -Delimiter "," -NoTypeInformation 
```

# php - 使用 SHA256 的 PHP 登录脚本

> ID：15842639
> 
> 赞同：2
> 
> 时间：2013-04-05T20:09:39.263
> 
> 标签：php, mysql, minecraft

我想为我的网站制作一个登录脚本，使用一些特殊的 SHA256 加密和一个与之链接的 mysql 数据库。（当然还有一种形式：P）

我使用 Minecraft 插件“Authme”进行注册。它在 SHA256 中对密码进行哈希处理并将其存储到 mysql 数据库中。但代码`$SHA$ce9b7692bd2b8f79$644c2a5710bb93f82471d08234435d7d02b1bbc09aff2cf23370f187aab37716` 与我从某些网站制作的 SHA256 哈希值不同。`4aae7aba013ffed685a1354a0ebb576b8f1f58997b96cf3ef096282cfe737bff`

Authme 的开发人员给了我一个“简单”的代码来解密密码，但我不知道如何将它放入我的脚本中。

```
// @return true if password and nickname match 
function check_password_db($nickname,$password) {
  // Here u have to include your DB connection and select!
  $a=mysql_query("SELECT password FROM authme where username = '$nickname'");
  if(mysql_num_rows($a) == 1 ) {
    $password_info=mysql_fetch_array($a);
    $sha_info = explode("$",$password_info[0]);
  } else 
    return false;
  if( $sha_info[1] === "SHA" ) {
    $salt = $sha_info[2];
    $sha256_password = hash('sha256', $password);
    $sha256_password .= $sha_info[2];;
    if( strcasecmp(trim($sha_info[3]),hash('sha256', $sha256_password) ) == 0 ) 
      return true;
    else return false;
  }
} 
```

所以底线是：我想知道如何通过查看 mySQL 中的数据来检查用户是否输入了正确的密码，从而制作一个让用户登录到我的网站的表单。如果您需要更多信息，请回复，我会给您。我的目标是制作一个适用于会话的登录脚本。

我拥有的表是 ID、am_（用户名）、密码和 ip。

你能给我一些类似代码的东西吗？（用用户名和密码制作一个表格，看看它是否有效）

对不起，我的错字，我来自荷兰..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:55:14.177

好吧，据我了解：您使用一些库进行注册，现在您想制作一个使用与注册相同的授权机制的登录表单。

在这种情况下，您发布了应该用于自己检查密码的代码。只需将用户输入传递给它并确保`SELECT`语句使用正确的表和列。

至于为什么哈希不同，这是因为用户输入没有被加密，`sha256(password)`但是`sha256(concat(sha256(password),salt))`concat 是[字符串连接](http://en.wikipedia.org/wiki/String_concatenation)操作，而 salt 是[附加输入](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)，在这种情况下，它等于 $ 字符之间的部分（在你的例子中：）`ce9b7692bd2b8f79`。

此外，您不能“解密”散列数据。您只能散列一些*其他*数据并比较两个散列以检查它们是否相同。如果它们相同，则两个输入（可能）相同。（“可能”部分是因为散列函数是满射，而不是双射。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:50:36.973

如果您将普通密码放入函数 check_password_db 中，它将检查它是否等于存储的 sha256 哈希，因此如果该函数返回 true，您可以设置一个会话变量，指示用户已成功登录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T21:10:40.710

您提供的代码为您工作。您所要做的就是将用户输入的表单数据传递给提供的函数并检查它的返回值以确定登录详细信息是否正确。

这是最简单的用例和代码来帮助您。

用户导航到登录页面 (login.html)

```
 <!-- Login Page - login.html -->
    <form name='login-form' action='login.php' method='POST'>
    Username <input type='text' name='username' value=''></input>
    Password <input type='password' name='password' value=''></input>
    <input type='submit' value='Login' name='submit-button'></input>
    </form> 
```

一旦用户输入登录信息并单击“提交”，它应该会转到您的 PHP 脚本页面

```
<?php
/* Login Script - login.php */

//Enable Session
session_start(); 
//Perform Form Submission Checks

$un = $_POST['username'];
$p = $_POST['password'];

//Validate form input data using PHP and mysql best practices to avoid SQL injections and attacks
//Connect to Database

function check_password_db($nickname, $password)
{
   /* Your Code Here */
}

$return_var = check_password_db($un,$p);

if($return_var == true)
{
    //User entered valid data
    $_SESSION['LOGIN'] = TRUE;
    echo "Login Successful";
}
else
{
    //User entered invalid data
    echo "Login Unsuccessful";
}
?> 
```

# php - 在 Zend 框架中使用 Doctrine 中的 PersistentObject

> ID：15842640
> 
> 赞同：2
> 
> 时间：2013-04-05T20:09:39.683
> 
> 标签：php, doctrine, zend-framework2

我有一个问题要问大家。在我使用 Codeigniter 大约 1 年后，我才开始使用 Zend Framework。我已经安装了所有东西，现在一切都在运行。但我有一个问题。我想使用 Doctrine 进行建模。而且我总是使用 Doctrine 中的 PersistentObject，但我似乎无法让它工作。

问题是我需要通过 ObjectManager 到 PersistentObject。但我不能让它工作。有人知道我如何通过 ObjectManger 从 DoctrineORM 模块传递到 PersistentObject 吗？

如果我不够清楚，你可以告诉我。说英语对我来说有点麻烦。对此我很抱歉！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T00:59:55.013

您可以在模块的 onBootstrap() 方法中执行此操作：

```
<?php
namespace MyApplication;
use Doctrine\Common\Persistence\PersistentObject;

class Module {

    public function onBootstrap($e){
        $serviceManager = $e->getApplication()->getServiceManager();
        PersistentObject::setObjectManager($sm->get('Doctrine\ORM\EntityManager');
    }

} 
```

# excel - 在 SSDT 中创建 SSIS 包。数据流任务中的条件拆分导致包中断

> ID：15842648
> 
> 赞同：3
> 
> 时间：2013-04-05T20:10:07.180
> 
> 标签：excel, ssis, sql-server-data-tools

我正在尝试将表从 SQL SERVER 2012 导出到 Excel 2007 工作簿。

OLE DB Source -> Excel Destination 中的简单任务完美运行。

我有一个名为 [POD 分配] 的字段，如果 [POD 分配] 等于“未知”，我想导出到工作簿中的一个工作表，如果不是，我想导出到另一个工作表。

将 OLE DB 源链接到条件拆分。

我有一个名为“Unknowns”的输出，其中条件是“[POD Assignment] == “UNKNOWN””。我将输出“未知”链接到 Excel 目标。

此时，当我运行包时，一切正常。这些行已正确导出到工作簿，并且计数是正确的。如此处所示：

[] [http://imgur.com/iKcJCfY,rHnW8ax#0](http://imgur.com/iKcJCfY,rHnW8ax#0)

现在我将条件拆分连接到第二个 excel 目标，其中输出是条件拆分的默认输出。excel 第二个目的地使用与第一个完全相同的 Excel 连接。并且所有数据都应该导出到同一工作簿中的不同工作表。

运行此失败。如此处所示：

[]：http: [//imgur.com/iKcJCfY,rHnW8ax#1](http://imgur.com/iKcJCfY,rHnW8ax#1)

任务因错误而过早中止。

我收到以下错误代码：

> [Excel 目标 1 [101]] 错误：SSIS 错误代码 DTS_E_OLEDBERROR。发生 OLE DB 错误。错误代码：0x80004005。OLE DB 记录可用。来源：“Microsoft Office Access 数据库引擎”Hresult：0x80004005 描述：“无法扩展命名范围。”。
> 
> [Excel 目标 1 [101]] 错误：SSIS 错误代码 DTS_E_INDUCEDTRANSFORMFAILUREONERROR。“Excel 目标 1.Inputs[Excel 目标输入]”失败，因为发生错误代码 0xC020907B，并且“Excel 目标 1.Inputs[Excel 目标输入]”上的错误行处置指定错误失败。指定组件的指定对象发生错误。在此之前可能会发布错误消息，其中包含有关失败的更多信息。
> 
> [SSIS.Pipeline] 错误：SSIS 错误代码 DTS_E_PROCESSINPUTFAILED。处理输入“Excel 目标输入”(112) 时，组件“Excel 目标 1”(101) 上的 ProcessInput 方法失败，错误代码为 0xC0209029。已识别的组件从 ProcessInput 方法返回错误。该错误是特定于组件的，但该错误是致命的，将导致数据流任务停止运行。在此之前可能会发布错误消息，其中包含有关失败的更多信息。[OLE DB 源 [188]] 错误：为缓冲区设置行集结尾失败，错误代码为 0xC0047020。[SSIS.Pipeline] 错误：SSIS 错误代码 DTS_E_PRIMEOUTPUTFAILED。OLE DB 源上的 PrimeOutput 方法返回错误代码 0xC0209017。当管道引擎调用 PrimeOutput() 时，组件返回了失败代码。失败代码的含义由组件定义，但错误是致命的并且管道停止执行。在此之前可能会发布错误消息，其中包含有关失败的更多信息。

任何帮助，将不胜感激。这真让我抓狂。我不明白为什么使用一个目的地进行条件拆分非常有效，但是当我添加第二个目的地时，一切都失败了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-12T14:59:26.933

我有这个确切的错误信息。我尝试了其他答案的建议，但都没有奏效。

我的问题原来是我试图同时写入不同的选项卡。

我没有写入同一个数据流任务中的每个选项卡，而是将每个选项卡放入它自己的数据流中，这样每次写入都会发生一次。这解决了问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T05:09:41.590

检查您的 Excel 目标是否没有数据（如果适用，标题行除外）。

我遇到了`Hresult: 0x80004005 Description: "Cannot expand named range."`错误，我的问题并不是很明显：

*   我有一个现有`Union All`的两个 Excel 文件到一个 Excel 文件中
*   一个来源的第一列是一个数字。另一个来源是字母数字。
*   我将源的第一列更改为新列`Derived Column`，它变成了字母数字。
*   （我忽略了清理目的地 - 它仍然有现有数据，其中前几行数据是数字）
*   有效，`Union All`但目标失败（源文件也显示红色 X）

我通过“截断”excel文件来修复它，回到标题行。（并且我可以通过将 A 列中的一些示例行设置回数字来重新创建错误）。我想我现在将使用一个空的 Excel 文件模板并首先覆盖目标（除非有[更简单的方法](http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/e26692b8-8044-4813-b643-0c181a1ea4fe/)？）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-20T21:40:56.460

您不能同时从同一个工作簿写入不同的工作表，因为 Excel 文件在用作目标时被写锁定

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-01T19:09:11.360

除了随机工作表（任务）失败外，我遇到了类似的问题。在花了一个多星期尝试所有可能的解决方案但没有成功后，我发现我的计算机上安装了 Microsoft Office 2007（32 位），而其他所有东西都是 64 位的。我在服务器上部署并测试了一切都是 64 位的，它工作正常。

我不确定这是否是您的情况，但希望对您有所帮助。

# python - 在夹层项目上创建帐户时返回多个对象（配置文件）

> ID：15842649
> 
> 赞同：1
> 
> 时间：2013-04-05T20:10:09.247
> 
> 标签：python, django, profiles

我在本地环境中有一个工作夹层（带有 pybb）设置。pybb 有一个抽象的 Profile 类来定义一些用户属性，并且还提供了一个 Profile 类，以防你还没有使用。

一切正常，除了最终创建用户的注册过程，但导致以下回溯：

[http://pastebin.com/MFuBpc2A](http://pastebin.com/MFuBpc2A)

我认为 pybbMiddleware 可能是问题所在。（我如何创建 2 个配置文件？）

```
class PybbMiddleware(object):
     def process_request(self, request):
         if request.user.is_authenticated():
             try:
                # Here we try to load profile, but can get error
                # if user created during syncdb but profile model
                # under south control. (Like pybb.Profile).
                profile = request.user.get_profile()
            except ObjectDoesNotExist:
                # Ok, we should create new profile for this user
                # and grant permissions for add posts
                user_saved(request.user, created=True)
                profile = request.user.get_profile()

            language = translation.get_language_from_request(request)

            if not profile.language:
                profile.language = language
                profile.save()

            if profile.language and profile.language != language:
                request.session['django_language'] = profile.language
                translation.activate(profile.language)
                request.LANGUAGE_CODE = translation.get_language() 
```

pybb的signals.py中的user_saved()：

```
def user_saved(instance, created, **kwargs):
    if not created:
        return
    try:
        add_post_permission = Permission.objects.get_by_natural_key('add_post', 'pybb', 'post')
        add_topic_permission = Permission.objects.get_by_natural_key('add_topic', 'pybb', 'topic')
    except ObjectDoesNotExist:
        return
    instance.user_permissions.add(add_post_permission, add_topic_permission)
    instance.save()
    if settings.AUTH_PROFILE_MODULE == 'pybb.Profile':
        from models import Profile
        Profile(user=instance).save() 
```

最重要的是，我在 accounts/models.py 中有另一个 user_saved()：

```
@receiver(post_save, sender=User)
def user_saved(sender=None, instance=None, **kwargs):
    Profile.objects.get_or_create(**{str(user_field): instance}) 
```

它是否同时调用两者并因此创建 2 个配置文件？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T21:34:22.593

我怀疑您正在使用 mezzanine.accounts 并在 settings.py 中设置了 AUTH_PROFILE_MODULE。mezzanine.accounts.models 中的代码设置了一个信号，以便在保存用户模型时生成一个配置文件。在使用美味派创建用户和配置文件时，我实际上遇到了同样的问题。

# vim - vim：删除除最后一行之外的所有单词

> ID：15842654
> 
> 赞同：7
> 
> 时间：2013-04-05T20:10:44.683
> 
> 标签：vim, replace

我在想出一个 vim 查找/替换来删除除最后一个之外的所有单词时遇到问题，即在一些 SQL 中，从一堆代码中生成所有别名的列表会很好

```
select 
column_a alias_a,
column_b alias_b,
column_c alias_c

from 
... 
```

我只想生成列表

```
alias_a, alias_b, alias_c 
```

所以我想我想删除所有没有紧跟逗号和行尾的单词

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T20:38:36.473

**选项 1**：

```
%s/\v.*\s(\S+)$/\1/ 
```

**选项 2**：使用宏

```
qa$T d0jq 
```

然后`x@a`x 是您要应用此宏的行数

**选项 3**

转向外部命令：

```
:%!awk '$0=$NF' 
```

**选项 4**：如果您有 Align 或类似插件，请将这些行对齐，然后使用`c-v`块选择和删除，只需保留最后一列。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T20:25:59.710

这应该这样做：

```
:%s/.* \(.*\)\n/\1 / 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T20:22:14.850

我会做：

```
:%s/\v(.*\s)(\w\+)/\2/ 
```

这意味着将直到最后一个空间的所有内容都抓取到捕获组 1 中，然后将所有内容抓取到捕获组 2 中，然后将其替换为仅捕获组 2。

替换这个：

```
select 
column_a blah blah blah alias_a,
column_b foo foo foo alias_b,
column_c bar bar bar alias_c

from 
```

到：

```
select 
alias_a,
alias_b,
alias_c

from 
```

然后，您可以打`Shift-J`几下以将别名放入一个逗号分隔的行中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T22:10:14.890

可视化选择行然后执行以下

```
:norm $bd0
:*j 
```

注意：`:norm`将显示为`:'<,'>`

如需更多帮助，请参阅：

```
:h :norm
:h :j 
```

# javascript - Javascript 菜单和框显示

> ID：15842660
> 
> 赞同：0
> 
> 时间：2013-04-05T20:10:56.407
> 
> 标签：javascript, html

显然我的代码存在我找不到的问题，因为当我单击菜单链接时代码没有运行。我正在创建的基本上是一个菜单，它可以动态更改相邻框的内容，并且菜单链接的外观取决于单击的菜单链接。这是我的代码的简化版本：

HTML：

```
<td class="instructioncells" colspan="1" width="25%">
<a href="#" onclick="helpmenu(showid)" class="link" id="dashboardlink" style="color:      
black; text-decoration: none;">The My Marketing Dashboard</a>
<div style="height:4px;">&nbsp;</div>
<a href="#" onclick="helpmenu(showid)" class="link" id="methodlink">Selecting a    
Method</a>
</td>
<td width="75%" style="vertical-align: top;">

<div id="mymarketingdashboard" style="display: block;">
<div class="font4" style="text-align: center">
The My Marketing Dashboard
</div>
</div>

<div id="selectmethod" style="display: none;">
<div class="font4" style="text-align: center">
Selecting a Method
</div>
</div>

</td> 
```

Javascript：

```
function helpmenu(showid) 
{
    var showdashboard = document.getElementById("mymarketingdashboard");
    var showmethod = document.getElementById("selectmethod");

    var mymarketing = document.getElementById("dashboardlink");
    var method = document.getElementById("methodlink");

    if (showid == "dashboardlink") 
    {
        showdashboard.style.display = "block";
        mymarketing.style.color = "black";
        mymarketing.style.textDecoration = "none";
        showmethod.style.display = "none";
        method.style.color = "#2C3A7F";
        method.style.textDecoration = "underline";
    }

    if (showid == "methodlink") 
    {
        showdashboard.style.display = "none";
        mymarketing.style.color = "#2C3A7F";
        mymarketing.style.textDecoration = "underline";
        showmethod.style.display = "block";
        method.style.color = "black";
        method.style.textDecoration = "none";
    } 
```

任何有关查找代码未按原样运行的原因的帮助都会很棒。提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:16:40.773

我对您的代码进行了一些更改：

**Javascript**：

```
helpmenu = function (showid) 
{
    var showdashboard = document.getElementById("mymarketingdashboard");
    var showmethod = document.getElementById("selectmethod");

    var mymarketing = document.getElementById("dashboardlink");
    var method = document.getElementById("methodlink");

    if (showid == "dashboardlink") 
    {
        showdashboard.style.display = "block";
        mymarketing.style.color = "black";
        mymarketing.style.textDecoration = "none";
        showmethod.style.display = "none";
        method.style.color = "#2C3A7F";
        method.style.textDecoration = "underline";
    }
    if (showid == "methodlink") {
        showdashboard.style.display = "none";
        mymarketing.style.color = "#2C3A7F";
        mymarketing.style.textDecoration = "underline";
        showmethod.style.display = "block";
        method.style.color = "black";
        method.style.textDecoration = "none";
    }
} 
```

**标记**：

```
<table><tr><td class="instructioncells" colspan="1" width="25%">
<a href="#" onclick="helpmenu(this.id)" class="link" id="dashboardlink" style="color:      
black; text-decoration: none;">The My Marketing Dashboard</a>
<div style="height:4px;">&nbsp;</div>
<a href="#" onclick="helpmenu(this.id)" class="link" id="methodlink">Selecting a    
Method</a>
</td>
<td width="75%" style="vertical-align: top;">

<div id="mymarketingdashboard" style="display: block;">
<div class="font4" style="text-align: center">
The My Marketing Dashboard
</div>
</div>

<div id="selectmethod" style="display: none;">
<div class="font4" style="text-align: center">
Selecting a Method
</div>
</div>

    </td></tr></table> 
```

**jsFiddle**：http: [//jsfiddle.net/UxQD9/1/](http://jsfiddle.net/UxQD9/1/)

我只是将单击的锚点的 id 传递给`helpmenu`函数。

# php - 如何将信息传递到其他页面？

> ID：15842664
> 
> 赞同：0
> 
> 时间：2013-04-05T20:11:25.263
> 
> 标签：php

我有以下代码，它显示一个包含两列 Title 和 Year 的表格，当用户点击一个标题时，它们被发送到另一个页面 (title.php)，这将提供有关该标题的更多信息。

```
echo "<table border=1>
<tr>
<th>Title</th>
<th>Year</th>
</tr>";

while ($record = mysql_fetch_array($myData)) {
    echo "<tr>";
    echo "<td><a href='title.php'>" . $record['title'] . "</a><br />" . $record['plays'] . "</td>";
    echo "<td>" . $record['year'] . "</td>";
    echo "</tr>";
}
echo "</table>"; 
```

我的问题是：如何将标题 ($result['title']) 从当前页面传递给 title.php？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:14:34.303

通过 GET 传递标题：

```
echo "<td><a href='title.php?title=" . $record['title'] . "'>" . $record['title'] . "</a><br />" . 
```

然后在 title.php 检查 $_GET['title'] 的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T20:19:52.613

`<?php echo "<td><a href='title.php?titel=".$record['title'] . "'>" . $record['title'] . "</a><br />" . ?>`

然后在扉页上

```
<?php 
```

回声“你好”。htmlspecialchars($_GET["title"]) 。'！'; ?>

[http://php.net/manual/en/reserved.variables.get.php](http://php.net/manual/en/reserved.variables.get.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T20:15:07.980

在这种情况下，您需要使用 GET 变量传递信息：

```
echo "<table border=1>
<tr>
<th>Title</th>
<th>Year</th>
</tr>";

while ($record = mysql_fetch_array($myData)) {
    echo "<tr>";
    echo "<td><a href='title.php?title=" . $record['title'] . "'>" . $record['title'] . "</a><br />" . $record['plays'] . "</td>";
    echo "<td>" . $record['year'] . "</td>";
    echo "</tr>";
}
echo "</table>"; 
```

虽然我建议传递一个代表您的主键而不是标题的 ID，以便您可以在 title.php 上的数据库查询后获取标题

此外，您不需要 mysql_fetch_array。在这种情况下，您只需要 mysql_fetch_assoc。

# node.js - NodeJS如何将多个客户端代理到同一台服务器

> ID：15842674
> 
> 赞同：1
> 
> 时间：2013-04-05T20:12:04.570
> 
> 标签：node.js, proxy

我正在使用代理服务器将内容流式传输到我的 Flash 客户端，因为我无法解决跨域问题。

目前我让它与一个客户端一起工作，但如果另一个客户端请求相同的 URL，它无法加载内容，因为它正在使用中。

是否可以让多个客户端连接到我的服务器并流式传输相同的资源而不是相同资源的单独实例？这将大大提高带宽使用率。这是我当前的代码：

```
http.createServer(function(req, res)
{    
    //I currently receive req.url in the format /url={URL}
    req.url = req.url.replace("/?url=", "");
    try 
    {
      req.pipe(request(req.url)).pipe(res);
    } 
    catch(e) 
    {
      //For some reason the server errors on favicon but the url requested is flv?
      console.log(":( " + e);
    }
}).listen(8001); 
```

所以，我的问题是，是否可以存储结果流并将其传递给多个请求？

```
client ---|
          |---- Proxy Server --- External resource
          |
client ---| 
```

# java - 将字符串生成器转换为 html 表格格式

> ID：15842683
> 
> 赞同：1
> 
> 时间：2013-04-05T20:13:19.530
> 
> 标签：java, html, servlets, html-table

我正在创建一个 servlet 来显示我制作的一个小程序的前端，在这个程序中，我有一个 LinkedList 调用执行队列，我将它放在一个字符串生成器中。

```
 public String getJobsForPrint() {
        Iterator<JobRequest> it = ExecutionQueue.iterator();
        StringBuilder result = new StringBuilder();
        String NEW_LINE = System.getProperty("line.separator");

        while (it.hasNext()) {
            JobRequest temp = it.next();
            result.append(this.getClass().getName()).append(" Object {").append(NEW_LINE);
            result.append(" User ID: ").append(temp.getUserID());
            result.append(" Start Date: ").append(temp.getStartDate());
            result.append(" End Date: ").append(temp.getEndDate());
            result.append(" Deadline Date: ").append(temp.getDeadDate());
            result.append(" Department: ").append(temp.getDepartment());
            result.append(" Project Name: ").append(temp.getProjectName());
            result.append(" Project Application: ").append(temp.getProjectApplication());
            result.append(" Priority: ").append(temp.getPriority());
            result.append(" Cores: ").append(temp.getCores());
            result.append(" Disk Space: ").append(temp.getDiskSpace());
            result.append(" Analysis: ").append(temp.getAnaylsis()).append(NEW_LINE);
            result.append("}");
        }
        return result.toString(); 
```

在我的 servlet 方面，我通过以下方式调用字符串：

```
protected void processExecutionQueue(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    PrintWriter out = response.getWriter();
    out.println("<!DOCTYPE html>");
    out.println("<html>");
    out.println("<head>");
    out.println("<title>Execution Queue</title>");
    out.println("</head>");
    out.println("<body>");
    out.println("<div>");
    out.println("<div style='position:absolute; top:20px; right: 20px;'><a href='/ProjectAndBackend/index.jsp'>LOGOUT</a></div>");
    out.println("</div>");
    out.println("<p>Queue:</p>");           
    out.println("Execution Queue:" + SystemServlet.getScheduler().getJobsForPrint());               
    out.println("</body>");
    out.println("</html>");
} 
```

所以现在我用从链表中获取的所有数据一个接一个地显示字符串。我希望在网页端，能够获取该数据并将其放入表格中，以便它看起来更整洁，而不仅仅是将字符串扔到网页上。

我将如何实现一个 html 以在某些方面显示字符串的特定元素所以在下面的示例中我有标题然后数据从字符串中获取元素并继续写出直到显示来自迭代器的所有数据

```
<table border="1">
<tr>
<th>User ID</th>
<th>Start Date</th>
</tr>
<tr>
<td>User ID DATA</td>
<td>Start Date DATA</td>
</tr> 
```

或者，如果有人可以将我引导到一个示例，因为我在当前的搜索中找不到任何示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T20:21:53.287

当您构建 StringBuilder 时，使用 HTML 标签将每个标签放置在一行中。

代码应该是这样的

```
StringBuilder result = new StringBuilder();
result.append("<tr><td>").append(User ID DATA).append("</td><td>").append(Start Date DATA).append("</td></tr>"); 
```

**笔记：**

1.您需要在`processExecutionQueue()`方法内创建基本的html和表头列。2、方法中只需要创建数据行`getJobsForPrint()`。

因此，当结果从中传递时，`getJobsForPrint()`它将嵌入到其他 HTML 文件中。

希望您可以使用此建议完成代码。

# search-engine - elasticsearch 索引事务

> ID：15842684
> 
> 赞同：2
> 
> 时间：2013-04-05T20:13:23.087
> 
> 标签：search-engine, elasticsearch

我正在探索 elasticsearch 并将其与我们当前的搜索解决方案进行比较。我的用例是，每次构建索引时，我都必须删除当前索引并创建具有相同名称的新索引。这样所有旧文档都与旧索引一起删除，新索引将具有新数据。索引过程需要几分钟才能完成。

我的问题是在此期间进入的搜索请求会发生什么。弹性搜索是否使用事务并且只提交事务中的所有更改（删除索引和新索引与新文档）？

如果我删除了索引，并且在索引过程中出现错误，会发生什么？如果没有交易，这种情况有什么解决方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T21:05:30.603

Elasticsearch 不支持事务。当你删除一个索引时，你删除了一个索引。在您创建新索引之前，用户将收到 IndexMissingException 异常。一旦创建了新索引，他们将只看到被索引和刷新的记录（默认情况下每秒刷新一次）。

向用户隐藏这一点的一种方法是使用[aliases](http://www.elasticsearch.org/guide/reference/api/admin-indices-aliases/)。您可以创建一个指向索引的别名。当您需要重新索引您的数据时，您可以创建一个新索引，在那里索引新数据，将别名切换到新索引并删除旧索引。

# css - Firefox 不扩展包含按钮的绝对定位 div

> ID：15842685
> 
> 赞同：2
> 
> 时间：2013-04-05T20:13:24.090
> 
> 标签：css, firefox, button, styling

我有两个 div，都定位为绝对值，一个在另一个内部，用作菜单。在内部，我有一些按钮元素应该扩展父 div。理论上很好，Chrome和IE。但我无法让它在 Firefox 中运行。按钮不会展开父 div。

奇怪的是，如果我在按钮后添加一个额外的标签元素，它会起作用。

# CSS

```
/* .Menu-Wrapper and .Menu have to have postion: absolute */

.Menu-Wrapper {
    position: absolute;
    top: 100px;
    left: 100px;
}
.Menu {
    background: yellow;
    position: absolute;
    top: 0;
    left: 0;
    padding: 6px;
}
.Menu-item {
    background: red;
    border: 0;
    margin: 2px;
    padding: 0;
    display: block;
    white-space: nowrap;
    width: 100%;
    text-align: left;
} 
```

# html

```
<div class="Menu-Wrapper">
        <!-- there would be a trigger button here, left out for simplicity -->
    <div class="Menu">
        <!-- in firefox the follwoing buttons do not expand to width text -->
        <button class="Menu-item">Menu Point 1 ....</button>
        <button class="Menu-item">Menu Point 1</button>
        <button class="Menu-item">Menu Point 1..</button>
    </div>
</div> 
```

# 请参阅此处的示例：

[http://jsfiddle.net/2Xbpq/](http://jsfiddle.net/2Xbpq/)（不适用于 Firefox）

知道如何让它在 Firefox 中运行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T20:20:11.173

采用[`width: -moz-available;`](https://developer.mozilla.org/en-US/docs/Web/CSS/width?redirectlocale=en-US&redirectslug=CSS%2Fwidth#compat-desktop)

[jsFiddle](http://jsfiddle.net/2Xbpq/4/)

它会解决它，虽然我不太清楚为什么 ff 在这种情况下表现得很奇怪..

# php - 我有一个与输入量直接相关的复选框。如果有输入金额，则必须在发布前选中复选框

> ID：15842688
> 
> 赞同：0
> 
> 时间：2013-04-05T20:13:27.350
> 
> 标签：php, javascript, jquery

我在 php 中为标准复选框创建了一个函数，它称为 cbox 以及一个称为 inp 的标准输入框。

```
<tr><td><?php cbox('charge_cc'); ?> Charge CC? Amount $ <?php inp('charge_amt'); ?></td></tr> 
```

如果在“charge_amt”输入字段中输入了金额，则在发布/提交之前也需要选中该复选框。

如果没有在输入字段中输入金额，则他们不需要选中该框，可以继续填写表格的其余部分并提交。我不确定如何做到这一点，因为我认为我的 cbox 和 inp 的 php 函数正在破坏我的 jquery/javascript。

截至目前，我已经尝试了一些变化：

```
<script type="text/javascript">
function validate(){
if (document.getElementById('charge_cc').checked){
          alert("checked") ;
}else{
alert("You didn't check it! Let me check it for you.")
}
}
</script> 
```

无济于事，任何帮助将不胜感激。

```
<td><input type="hidden" name="charge_cc" value="0" class="charge_cc">
    <input type="checkbox" id="charge_cc" name="charge_cc" value="1" class="charge_cc"> Charge CC? Amount $ <input type="text" id="charge_amt" name="charge_amt" value="" size="8" maxlength="6"></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:15:42.033

使用jquery ...如果您有一个id为charge_cc的复选框，这应该可以

```
if($("#charge_cc").prop("checked")) ... 
```

jsfiddle 与您的 html 和警报：http: [//jsfiddle.net/kmV9m/](http://jsfiddle.net/kmV9m/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T21:02:17.837

如果您只需要根据`charge_amt`文本输入中的条目选中/取消选中复选框，我建议：

```
$('#charge_amt').keyup(function(){
    var that = this;
    $('#charge_cc').prop('checked', function(){
        return that.value.length;
    });
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/p3gc2/)。

如果您想阻止用户在文本输入中有值时取消选中该复选框：

```
$('#charge_amt').keyup(function () {
    var test = this.value.length;
    $('#charge_cc').prop({
        'checked': test,
            'disabled': test
    });
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/p3gc2/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T20:46:10.703

```
$(function () {
    $('#charge_amt').on('change', function () {
        var amount = $(this).val();
        if (amount.length > 0) {
            $('#charge_cc').prop('checked', 'checked');
        } else {
            $('#charge_cc').prop('checked',false);
        }
    });
}) 
```

在这里使用一些 jQuery 为您完成工作应该可以解决问题。

[http://jsfiddle.net/devlshone/2HZFE/](http://jsfiddle.net/devlshone/2HZFE/)

# python - Python：在函数中使用变量（但变量应该是用户输入）

> ID：15842690
> 
> 赞同：0
> 
> 时间：2013-04-05T20:13:35.357
> 
> 标签：python, function, variables

我正在尝试编写一个小刽子手程序，我必须在其中使用此功能（在作业中明确说明）。它应该检查猜测的字母是否在单词中，如果是，则返回由 * 和正确位置的猜测字母组成的单词。但是我不明白如果“字母”变量是用户输入的变量（他的猜测），我怎么能使用它，所以它实际上是在函数之外分配的。我有点卡住了，如果有人能告诉我该怎么做，我将不胜感激。

```
def print_guessed():
    global secret_word
    global letters_guessed
    word = []
    for i in range (0, len(secret_word)):
        if letter == secret_word[i]: word.append(letter)
        else: word.append('-')
    word_str = ''.join(word)
    return word_str 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:20:15.207

如果您可以对函数进行更改，请修改它的参数，即变量 - `letter`。

```
def print_guessed(letter):
    #do_stuff 
```

并提供在调用语句中猜到的字母

```
print_guessed(letter) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T20:23:20.390

实际上，尽管我同意评论者的观点，即这是非常不符合 Python 的代码，但您实际上并不需要修改该函数以使其工作。`letter`没有分配给函数内部，这意味着不需要在那里将其声明为全局：只要它在外部范围内定义，它就可以在内部访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T20:37:52.377

编辑如果你被允许自由改变功能，那么就做

```
def print_guessed(letter):
    global letters_guessed
    letters_guessed.append(letter)
    return ''.join(c if c in letters_guessed else '-'
                   for c in secret_word) 
```

否则：这是一个相当棘手的问题，因为它甚至没有接近做正确的事情，但我想我已经想通了！

```
secret_word = "answer"
letters_guessed = []
letter = ''

def fix_print_guessed(func):
    def wrapper(guess):
        global letters_guessed
        global letter
        letter = guess
        letters_guessed.append(letter)
        return func()
    return wrapper

@fix_print_guessed
def print_guessed():
    global secret_word
    global letters_guessed
    word = []
    for i in range (0, len(secret_word)):
        if letter == secret_word[i]: word.append(letter)
        else: word.append('-')
    word_str = ''.join(word)
    return word_str

found = len(secret_word) * '-'
while '-' in found:
    guess = raw_input('enter a letter: ')
    res = print_guessed(guess)
    found = ''.join(c1 if c1 != '-' else c2 
                    for c1, c2 in zip(found, res))
    print found 
```

# middleware - Silex 将中间件设置为 ControllerCollection

> ID：15842695
> 
> 赞同：2
> 
> 时间：2013-04-05T20:13:48.960
> 
> 标签：middleware, silex

我想做这样的事情：

```
$app->mount('dashboard', new Travel\Controllers\Dashboard())->before(function() use ($app) {
              //check if is logued...
            }) 
```

是否可以？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T20:26:05.290

你可以做

```
$controllers = $app["controllers_factory"];
$controllers->before(function(Request $request){}); 
```

在你的`ControllerProviderInterface::connect`方法

如果您需要在`$app`定义 php 文件中定义的函数，您可以创建一个受保护的函数

```
$app['callback'] = $app->protect(function(){}); 
```

然后

```
$controllers->before($app["callback"]); 
```

# backbone.js - 让主干等待渲染视图

> ID：15842698
> 
> 赞同：1
> 
> 时间：2013-04-05T20:13:52.380
> 
> 标签：backbone.js

我是骨干新手，我有一个对象集合和一个将它们显示为列表的视图。它被设置为每次将对象添加到集合中时都会重新呈现视图。这确实是低效的，因为如果我一次向集合中添加 20 个东西，那么当它只需要在添加最后一个项目后渲染一次时，它将被渲染 20 次。在完成向集合中添加内容之前，如何让主干推迟渲染？

这是我的代码：

```
<html>
    <head>
        <meta charset="utf-8" />
        <title>Looking At Underscore.js Templates</title>
    </head>
    <body>
        <script type="text/template" class="template">
            <ul id="petlist">
                <% _.each(model.pets, function(pet) { %>
                    <li><%- pet.name %> (<%- pet.type %>)</li>
                <% }); %>
            </ul>
        </script>

        <div id="container"/>

        <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>
        <script type="text/javascript" src="http://underscorejs.org/underscore.js"></script>
        <script src="http://backbonejs.org/backbone-min.js"></script>
        <script type="text/javascript">

            var serviceData = [
                {
                    name: "Peaches",
                    type: "dog"
                },

                {
                    name: "Wellington",
                    type: "cat"
                },

                {
                    name: "Beefy",
                    type: "dog"
                }
            ];

            $(document).ready(function() {
                var Pet = Backbone.Model.extend({ 
                    name: null,
                    type: null
                });

                var Pets = Backbone.Collection.extend();

                var AppView = Backbone.View.extend({
                    updateUi: function(model) {
                        _.templateSettings.variable = "model";
                        var template = _.template($("script.template").html());
                        var model = { pets: model.collection.toJSON() };
                        var html = template(model);
                        $("#container").html(html);
                    }
                });

                var pets = new Pets();
                var av = new AppView();
                pets.bind("add", av.updateUi);
                pets.set(serviceData);
            });

        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T20:37:36.550

您还可以创建一个名为 add 的额外方法。因此，如果您添加一个新对象，应用程序只会添加一个对象，而不是再次渲染孔集合。

像这样的东西：

```
App.Model = Backbone.Model.extend();

App.Collection = Backbone.Collection.extend({
   model: App.Model
});

App.CollectionView = Backbone.View.extend({
   tagName: 'ul',
   render: function(){
     this.collection.each(function(model){
        var objView = new App.ModelView({ model: model });
        this.$el.append( objView.render().el );
     });
     return this;
   },

   showAddForm: function(){
     // Here you show the form to add another object to the collection
   },

   save: function(){
     // Take form's data into an object/array, then add it to the collection
     var formData = {
         type: $('select[name=type]').val(),
         name $('input[name=name]').val()
     };
     // Once added to the collection, take the object/array and...
     this.addElement(formData);
   },

   addElement: function(model){
     var modView = new App.ModelView({ model: model });
     this.$el.append( modView.render().el );
   }
 });

 App.ModelView = Backbone.View.extend({
    tagName: 'li',
    template: _.template( "<li><%= name %> (<%= type %>)</li>" ),

    render: function(){
       this.$el.html( this.template( this.model.toJSON() ) );
       return this;
    }
 }); 
```

你明白吗？当您渲染孔集合时，collectionView 渲染方法为每个对象/宠物调用一个模型视图。因此，通过这种方式，当您获得新宠物/对象的信息时，您可以创建一个 ModelView 实例，并将其附加到实际渲染的视图中。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T20:49:15.467

你也可以这样做：

```
pets.set(serviceData, { silent: true });
pets.trigger('add', pets); 
```

并修改 av.updateUi 以使用整个集合并立即创建 HTML，但在这种情况下，“重置”事件可能比“添加”更合适。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T19:31:06.870

你需要在你的代码中重新考虑一些事情。对于您的特定情况，您需要使用重置而不是设置，以便在设置数据时仅调度一个事件。您也可以将集合传递给视图，并且视图可以侦听重置事件。

此外，为了防止浏览器的压力，您可以使用 document.createDocumentFragment，它是一个 DOM 持有者，可加快追加处理的速度。检查点二以获得更多参考： http: [//ozkatz.github.io/avoiding-common-backbonejs-pitfalls.html](http://ozkatz.github.io/avoiding-common-backbonejs-pitfalls.html)

```
<html>
    <head>
        <meta charset="utf-8" />
        <title>Looking At Underscore.js Templates</title>
    </head>
    <body>
        <script type="text/template" class="template">
            <ul id="petlist">
                <% _.each(model.pets, function(pet) { %>
                    <li><%- pet.name %> (<%- pet.type %>)</li>
                <% }); %>
            </ul>
        </script>

        <div id="container"/>

        <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>
        <script type="text/javascript" src="http://underscorejs.org/underscore.js"></script>
        <script src="http://backbonejs.org/backbone-min.js"></script>
        <script type="text/javascript">

            var serviceData = [
                {
                    name: "Peaches",
                    type: "dog"
                },

                {
                    name: "Wellington",
                    type: "cat"
                },

                {
                    name: "Beefy",
                    type: "dog"
                }
            ];

            $(document).ready(function() {
                var Pet = Backbone.Model.extend({ 
                    name: null,
                    type: null
                });

                var Pets = Backbone.Collection.extend();

                var AppView = Backbone.View.extend({
                    initialize : function(){
                        this.collection.bind("reset", av.updateUi);
                    },
                    updateUi: function() {
                        $items = document.createDocumentFragment();
                        this.collection.each(function(model){
                            var itemView = new ItemView({model : model});
                            $items.append(itemView.el);
                            itemView.render();
                        });
                        $("#container").html($items);
                    }
                });

                var pets = new Pets();
                var av = new AppView({collection : pets});
                pets.reset(serviceData);
            });

        </script>
    </body>
</html> 
```

# authentication - 通过删除 IDP cookie 在 Shibboleth 中使用全局注销

> ID：15842701
> 
> 赞同：4
> 
> 时间：2013-04-05T20:13:57.400
> 
> 标签：authentication, shibboleth

我有一个使用 Shibboleth 进行身份验证的产品。

当用户在网站上发起注销时

1.  Web 服务器向 Shibboleth SP 发送注销请求。
2.  SP 在收到请求时删除 cookie 帖子。
3.  但是，如果用户返回网站，则不会提示登录页面

对于下面显示的配置，我使用的是这里给出的 Shibboleth 服务提供商 [https://www.testshib.org/install.html#SP](https://www.testshib.org/install.html#SP)。它被配置为使用 testhib.org IdP 的详细信息，可以在[此处阅读](https://www.testshib.org/metadata.html)

![Shibboleth 注销](https://i.stack.imgur.com/lnjI7.jpg)

我相信 IdP 不会删除其会话 cookie 并在第 3 步重新登录用户。

**有关 IdP Cookie 的更多信息：**

这个[wiki-source](https://wiki.shibboleth.net/confluence/display/SHIB2/IdPCookieUsage)声明 IdP 使用两个 cookie `_idp_authn_lc_key`，这些 cookie 在身份验证后被删除。第二个是会话cookie“_idp_session”，它声明：

> 一旦用户通过身份验证，他们将与 IdP 进行长期会话，该会话由名为 _idp_session 的 cookie 跟踪。此 cookie 仅包含识别用户的 IdP 会话所需的信息。此 cookie 创建为“会话”cookie，当浏览器选择删除此类 cookie 时（通常在浏览器关闭时）将被删除。

我的问题是

*   我需要在 SP 上进行哪些更改以请求 IdP 删除相同内容并有效地创建**GLOBAL LOGOUT**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-11T02:45:42.057

对于它的价值，您将很难强迫 IdP 注销用户。cookie 方法是一个实现细节，并非所有 IdP 都使用它，它可能会改变。一些 IdP 可能会提供一个注销 URL，但老实说，这对用户来说可能是一件坏事（你能想象如果你能想出一种方法来不断地取消对用户的授权，不仅是你的网站，还有他们与任何其他 SP 的会话？）。您实际上只能控制自己在服务提供商上的会话。

*当您的用户返回/返回您的*SP时，为什么不强制重新认证？如果他们最近在访问后没有通过 IdP 的身份验证（这是您从 SAML 交换返回的字段），只需将它们再次发送回 IdP 并传递强制重新验证标志。

如果您使用的是 Shibboleth 软件，它甚至内置于： [https ://wiki.cac.washington.edu/display/infra/Configure+a+Service+Provider+to+Force+Re-Authentication](https://wiki.cac.washington.edu/display/infra/Configure+a+Service+Provider+to+Force+Re-Authentication)

# jquery - jstree 记住打开/关闭的树节点

> ID：15842702
> 
> 赞同：0
> 
> 时间：2013-04-05T20:14:02.167
> 
> 标签：jquery, jstree

我正在使用[jstree](http://www.jstree.com/)来显示/管理类别树。我正在使用 Ajax 调用获取树，并返回以下响应：

```
0: {id:35, name:amrs trade, parent_id:null}
1: {id:36, name:trips, parent_id:35}
2: {id:37, name:tribute, parent_id:null}
3: {id:38, name:music, parent_id:null}
4: {id:39, name:recordings, parent_id:38}
5: {id:40, name:live shows, parent_id:38}
6: {id:41, name:others, parent_id:null}
7: {id:42, name:investments, parent_id:null}
8: {id:43, name:gold & silver, parent_id:42}
9: {id:44, name:debentures, parent_id:42}
10: {id:46, name:production, parent_id:35}
11: {id:54, name:real estate, parent_id:42} 
```

我正在使用该`json_data`选项来呈现 jstree：

```
$("#incomeCategoryTree").jstree({
    "json_data" : {
        "data" : income,
        "progressive_render" : true
    },
    "plugins" : [ "themes", "json_data" ]
})
.bind("open_node.jstree close_node.jstree", function (e) {
    console.log(e);
}); 
```

我想记住用户所做的每一个动作（打开或关闭任何树节点），所以我绑定了两个`open_node`动作`close_node`。我遇到的问题是该事件没有关于刚刚单击的节点的信息：

```
.Event {type: "open_node", timeStamp: 1365192438814, jQuery183029903660411946476: true, isTrigger: true, exclusive: undefined…}

currentTarget: div#incomeCategoryTree.jstree jstree-0 jstree-default jstree-focused
data: null
delegateTarget: div#incomeCategoryTree.jstree jstree-0 jstree-default jstree-focused
exclusive: undefined
handleObj: Object
isTrigger: true
jQuery183029903660411946476: true
namespace: "jstree"
namespace_re: /(^|\.)jstree(\.|$)/
result: undefined
target: div#incomeCategoryTree.jstree jstree-0 jstree-default jstree-focused
timeStamp: 1365192438814
type: "open_node"
__proto__: Object 
```

我想我错过了，但是 jstree 文档很差恕我直言，甚至没有提到大多数选项......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:40:31.310

我设法做到了以下几点：

```
$("#incomeCategoryTree").jstree({
    "json_data" : {
        "data" : income,
        "progressive_render" : true
    },
    "plugins" : [ "themes", "json_data" ]
})
.bind("open_node.jstree close_node.jstree", function (event, data) {
    var state = event.type == "open_node" ? "open" : "closed";
    IncomeCategoryControl.setState(data.rslt.obj.attr("id"), state)
}); 
```

这是管理树数据的对象

```
var IncomeCategoryControl = {
    data: null,
    fetchData: function() {
        $.ajax({
            type: "GET",
            dataType: "json",
            context: this,
            async: false,
            url: "../php/client/json.php",
            data: {
                type: "incomeCategories"
            }
        }).done(function(response) {
            this.data = response;
        });
    },
    getData: function() {
        if (this.data == null) {
            this.fetchData();
        }
        return this.data;
    },
    setState: function(id, value) {
        var found = $(this.getData()).map(function() {
            return (this.id == id) ? this : null;
        });
        if (found.length) {
            found[0].state = value;
            return true;
        } else {
            return false;
        }
    }
}; 
```

# html - 对齐 divs-2 的对边

> ID：15842703
> 
> 赞同：-1
> 
> 时间：2013-04-05T20:14:03.160
> 
> 标签：html, css

我希望绿色框始终位于红色标题的左下角，即使用户放大和缩小网页。

演示：http: [//jsfiddle.net/BvQcx/](http://jsfiddle.net/BvQcx/)

现在，我希望将一些 margin-left 属性赋予绿色框。或者红色框总是在中心。有人可以为我提供一个 jsfiddle 解决方案吗？解决方案必须是基于 div 的布局。

类似问题：[对齐 div 的相对边缘](https://stackoverflow.com/questions/15841922/aligning-opposite-edges-of-divs)

> ```
>  |Red Box|
>                |Green Box| 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:19:44.303

把绿色盒子放在红色盒子里面`div`，但要做好`position: absolute`。然后将其向左移动绿色框的宽度：

**HTML：**

```
<div class="header">This is the header.
    <div class="leftSection">This is the left section</div>
</div> 
```

**CSS：**

```
.header {
    margin:0px auto;
    width:100px;
}
.leftSection {
    position: absolute;
    width: 100px;
    left: -100px;
} 
```

小提琴：http: [//jsfiddle.net/BvQcx/1/](http://jsfiddle.net/BvQcx/1/)

# javascript - 选择没有id的html对象

> ID：15842704
> 
> 赞同：2
> 
> 时间：2013-04-05T20:14:07.337
> 
> 标签：javascript, jquery, select

编辑：缺少一条信息-我不能使用类选择器，因为有更多具有同一类的 div。我已经想到了，但我忘了提。我不知道为什么我的帖子被否决了，但考虑到我提供了很多信息，付出了诚实的努力，并试图用代码示例来冗长，这似乎非常愚蠢。这个论坛上的人有时很可笑。

我正在尝试设置一个没有的 div 的 id，并且我无法在页面生成时给它一个。我尝试过使用 jquery（.each、.contains、.find、.filter 等），但似乎无法正确使用。我知道很多人都问过这个问题，但没有一个答案对我来说是有意义的。

我有能力设置 div 的文本（html？），但没有别的。它最终看起来像这样：

```
<div class="dhxform_note" style="width: 300px;">Remaining letters: 500</div> 
```

我想要一个 div 对象的句柄，这样我就可以通过更新文本向用户显示他们可以输入多少个字母。

使用这个：

```
$("div") 
```

返回页面上所有 div 的列表。我可以在列表中看到目标 div，但我无法让 jquery 返回单个对象。

我知道它也可以通过以下方式完成：

```
var divs = document.getElementsByTagName("div");
for(var i = 0; i < divs.length; i++) {
    if( /^Remaining letters/.test(divs[i].innerText) )
        divs[i].id = "kudosMsgNote"
    }
} 
```

但我希望通过一个涉及 jquery 的更简洁的解决方案来完成这个。我也只是想知道如何用 jquery 来做到这一点，美学无法承受。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T20:16:25.180

使用类选择器。

```
var theDivViaTheClass = $(".dhxform_note"); 
```

* * *

> [**类选择器`(“.class”)`**](http://api.jquery.com/class-selector/)
> 
> 描述：选择具有给定类的所有元素。
> 
> 添加的版本：1.0 `jQuery( ".class" )`
> 
> *   `class`: 要搜索的类。一个元素可以有多个类；只有其中一个必须匹配。
> 
> 对于类选择器，如果浏览器支持，jQuery 会使用 JavaScript 的原生 getElementsByClassName() 函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T20:21:31.910

您似乎是`<div>`通过其文本来定位的。尝试使用`:contains`选择器：

```
$("div").filter(':contains("Remaining letters")').first().attr("id", "kudosMsgNote"); 
```

这`.first()`是为了确保不要`id`为多个元素设置相同的值，以防多个元素包含文本“剩余字母”。

这是`:contains`选择器的文档：http: [//api.jquery.com/contains-selector/](http://api.jquery.com/contains-selector/)

请注意，您要查找的文本在使用时区分大小写`:contains`！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T20:16:16.960

那个 div 是唯一的那个类`dhxform_note`吗？如果是这样，您可以使用类选择器：

```
$('.dhxform_note').html(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T20:23:50.000

使用 jQuery，您可以指定任何 css 选择器来获取 div：

```
$(".dhxform_note").attr("id", "kudosMsgNote"); 
```

也会给你这个元素。

选择内部文本可能有点冒险，所以我可能会建议，如果您可以控制该 HTML 元素的呈现，则改为像这样呈现它：

```
<div name="remainingLetters" class="dhxform_note" style="width: 300px">Remaining Letters:  500</div> 
```

得到它是这样的：

```
$("[name=remainingLetters]").attr("id", "kudosMsgNote"); 
```

但是，您可能确实需要根据内部文本来选择它。在这种情况下，您需要执行以下操作：

```
$("div").each(function() {
    if ( /^Remaining letters/.test($(this).html()) ) {
        $(this).attr("id", "kudosMsgNote");
    }
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-05T20:24:16.053

如果您出于某种原因无法设置 id，我将假设您也无法设置类。也许您也没有可能存在的唯一类列表。如果所有这些假设确实适用，那么您可以考虑走您的路，否则请使用类选择器。

照这样说：

```
$("div").filter(function() {
    return /^Remaining letters/.test($(this).text())
}).attr('id', 'id of your choice'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-05T20:20:57.760

对于类有多个`div`s`dhxform_note`并且您不知道 said 的确切位置的情况`div`：

```
$("div.dhxform_note").each(function(){
    var text = $(this).text();
    if(/^Remaining letters/.test(text)){
        $(this).attr("id", "kudosMsgNote");
    }
}); 
```

[**例子**](http://jsfiddle.net/LnTmr/)

但是，如果您知道 div 总是第二次出现，`dhxform_note`那么您可以执行以下操作：

```
$("div.dhxform_note").get(1).id = "kudosMsgNote"; 
```

[**例子**](http://jsfiddle.net/LnTmr/1/)

或进行[`contains`](http://api.jquery.com/contains-selector/)搜索：

```
$("div.dhxform_note:contains('Remaining letters')").first().attr("id", "kudosMsgNote"); 
```

[**例子**](http://jsfiddle.net/LnTmr/2/)

# jquery - 内部 div 上未调用单击事件

> ID：15842705
> 
> 赞同：0
> 
> 时间：2013-04-05T20:14:17.867
> 
> 标签：jquery, css, click

我需要编写 jQuery 代码，当我单击 div 上的任意位置时，我将其称为 jQuery 事件，当他们单击此 div 内的特定项目时，不要调用 click 事件。“睾丸”类不应该调用点击。

但是，我必须使用的结构如下，因为它是一个特定的 jQuery。

下面是代码：

HTML：

```
<div class="tiles red">
    <div class="live-tile" id="tile1" data-mode="flip">        
        <div>
            <div class="testes"><a class="full" href="#"><p>* CNAE<br /></a></div>* CBO<br />* CID-10<br /></p>
            <span class="tile-title"><p>Clique para voltar</p></span>
        </div>
        <div>
            <p>Cadastros básicos</p>
            <span class="tile-title">back title</span>
        </div>
    </div>    
</div> 
```

查询：

```
$(function () {
  $(".live-tile").click(function () {
    $(this).liveTile('play');                
  });
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T20:16:54.930

尝试使用[event.stopPropagation()](http://api.jquery.com/event.stopPropagation/)：

```
$(function () {
  $(".live-tile").click(function () {
    $(this).liveTile('play');                
  });

  $(".testes").click(function (e) {
    e.stopPropagation();                
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:17:14.417

您可以`.bind()`将事件添加到您的元素并防止冒泡：

```
$(".live-tile").bind("click", function(){
    $(this).liveTile('play');                
}, false) 
```

这种形式`bind()`是 jQuery 函数的形式：

```
.bind( eventType [, eventData ], preventBubble ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T20:28:27.977

当我将[代码放在 JS fiddle 中](http://jsfiddle.net/EqQZV/)时，其他一些人回答了您的问题。但是，这里具体介绍如何为您的代码执行此操作。

```
$(function () {
$(".live-tile").click(function () {
    alert(".live-tile");              
});

$(".testes").click(function(e) {
    alert(".testes");
    e.stopPropagation();
});
}); 
```

[有关事件冒泡和停止传播的更多信息。](https://stackoverflow.com/questions/1369035/how-do-i-prevent-a-parents-onclick-event-from-firing-when-a-child-anchor-is-cli)

# image - 如何在 ColdFusion 中使用 ImageSetEXIFMetadata 和 ImageSetIPTCMetadata？

> ID：15842707
> 
> 赞同：0
> 
> 时间：2013-04-05T20:14:24.360
> 
> 标签：image, coldfusion, metadata

ColdFusion 8、9 和 10 提供[了 ImageGetEXIFMetadata](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-6bcb.html)和[ImageGetIPTCMetadata](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-6bca.html)函数，用于提取图像元数据，这要感谢[Drew Noakes](http://drewnoakes.com/code/exif/)根据此[来源](http://cflove.org/2013/04/coldfusion-imagegetexifmetadata-error.cfm)。

我正在寻找一种轻松设置或编辑图像元数据的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:01:11.057

您可以使用[Sanselan](http://commons.apache.org/proper/commons-imaging/) Java 库。我[在这里](https://stackoverflow.com/questions/5520444/generating-thumbnails-using-cf8-cfimage-tag-large-filesize-caused-by-image-met)解释了如何删除 ExifMetaData，但您也可以轻松地覆盖它们。项目现在是[commons-imaging](http://commons.apache.org/proper/commons-imaging/index.html)的一部分。

# r - 具有多个非互斥特征的条形图

> ID：15842709
> 
> 赞同：0
> 
> 时间：2013-04-05T20:14:29.123
> 
> 标签：r, ggplot2

我有一个数据集，其中包含一个变量，该变量具有其他几个不相互排斥的特征。这是数据。

```
df <- structure(list(cont1 = structure(c(2L, 2L, 4L, 1L, 2L, 3L, 2L, 4L, 4L, 1L, 2L, 2L, 4L, 1L, 1L, 2L, 2L), .Label = c("Africa", "Asia", "Europe", "LAC"), class = "factor"), SIDS = structure(c(2L, 1L, 2L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 1L, 2L, 2L, 2L, 2L, 2L, 2L), .Label = c("No", "SIDS"), class = "factor"), LDC = structure(c(2L, 1L, 2L, 1L, 2L, 2L, 1L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), .Label = c("LDC", "No"), class = "factor")), .Names = c("cont1",
"SIDS", "LDC"), class = "data.frame", row.names = c(NA, -17L)) 
```

所以当我把它变成长格式时，`df.m <- melt(df, id.vars = c("cont1"))`我可以用它来构建情节，`ggplot2`但会得到情节中的所有 NA。如果我排除它们，则比例会失真，因为其中一个类别中有更多的 NA。

```
ggplot(df.m, aes(x = cont1, fill = value)) + geom_bar()
ggplot(df.m[df.m$value != "No",], aes(x = cont1, fill = value)) + geom_bar() 
```

`cont1`有没有办法在没有 NA 扭曲比例的情况下将变量的条形图`value`作为填充？那就是我可以使用不同的长度来填充`ggplot2`吗？

# amazon-s3 - AWS S3 到 Glacier：备份有效吗？

> ID：15842715
> 
> 赞同：5
> 
> 时间：2013-04-05T20:14:38.420
> 
> 标签：amazon-s3, lifecycle, amazon-glacier

我正在尝试使用 lyfecycle 管理选项将我的 Amazon S3 文件夹中的数据备份到 Glacier。我选择了存储桶中的一个文件夹进行测试，并创建了一个生命周期规则，规定具有该前缀的对象需要在 30 天后迁移到 Glacier。我今天创建了规则，但这些文件都超过 30 天，所以我希望它们会立即迁移。但我正在查看那个 S3 文件夹，并没有注意到任何变化。如何确定是否确实发生了备份？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T00:23:59.287

您应用的生命周期管理策略 (LMP) 将影响与其匹配的所有项目，无论它们是在您应用策略之前存在还是在应用策略之后创建。策略在 S3 中的所有项目之间同步需要一些时间。请参阅“决定归档对象之前”之前和之后的[对象生命周期管理。](http://docs.aws.amazon.com/AmazonS3/latest/dev/object-lifecycle-mgmt.html)

由 LMP 移动的对象只能通过 S3 API 看到，而不能通过 Glacier API 或控制台看到。您将继续看到 S3 存储桶中列出的对象，但对象的元数据将更新以表明它`x-amz-storage-class`是 Glacier。您应该能够通过 S3 控制台看到这一点，或者使用 S3 API 请求对象的元数据。请参阅[对象键和元数据](http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingMetadata.html)的`System-Defined Metadata`.

# java - 使用 unicode 将字符串从一种语言转换为另一种语言

> ID：15842723
> 
> 赞同：-2
> 
> 时间：2013-04-05T20:15:09.483
> 
> 标签：java, eclipse, unicode

一种方法是使用我们所知道的有关语言范围的信息。例如，unicode 范围 30A0–30FF 表示日文片假名字符，因此如果您的字符串由该范围内的字符组成，您可以有根据地猜测它是日文并相应地工作。

这需要知道如何在 java 中处理 unicode 语言页面

请提供任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:21:03.517

Java`char`是 16 位 unicode。只需获取一个字符串并解析其字符：

```
String string = getString(); // returns the string you will parse
boolean japaneseChars = true;
for (ii=0; ii<string.length; ii++) {
    char character = string.charAt(ii);
    if (!(character >= 0x30A0 && character<= 0x30FF)) {
         japaneseChars = false;
    }
} 
```

# android - 执行查询并返回结果的方法

> ID：15842728
> 
> 赞同：0
> 
> 时间：2013-04-05T20:15:24.020
> 
> 标签：android, sqlite

应用程序无法运行 - 尝试执行查询以打印特定值

方法：

```
public Cursor trying(String vg){
    String q="SELECT quantity FROM " + TABLE_CONTACTS +  " WHERE name=" + vg;
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor  cursor = db.rawQuery(q,null);

            if (cursor != null) {
                cursor.moveToFirst();
            }
            return cursor;
    } 
```

从 main 调用方法

```
Cursor wow = db.trying("gold");
text = (TextView) findViewById(R.id.textView13);
text.setText((CharSequence) (wow)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:19:00.173

首先。由于您直接将尝试变量添加到语句中，因此变量必须用单引号括起来，否则它会作为列插入。

```
"SELECT quantity FROM " + TABLE_CONTACTS +  " WHERE name= '" + vg + "'"; 
```

第二个“大”问题，看这里：

```
text.setText((CharSequence) (wow)); 
```

在这里，您正在尝试投射`Cursor`，`CharSequence`但这是不可能的。如果要从中检索数据，`Cursor`则必须在您的案例**getString()**方法中使用 Cursor 类的 getters 方法之一：

```
String quantity = wow.getString(0); // it returns your quantity from Cursor
text.setText(quantity); 
```

现在它应该可以工作了。

## 推荐：

我建议您使用在查询中实际使用**占位符的***参数化语句。*它们为向/从数据库添加和检索数据提供了更安全的方式。

 **让我们重写你的代码：

```
String q = "SELECT quantity FROM " + TABLE_CONTACTS + " WHERE name = ?";
SQLiteDatabase db = this.getReadableDatabase();
Cursor  cursor = db.rawQuery(q, new String[] {vg}); 
```

它工作简单。占位符**`?`**将替换为您的字符串值。**

# ios - 如果我有两种不同类型的单元格，如何使用 FetchedResultsController？

> ID：15842729
> 
> 赞同：0
> 
> 时间：2013-04-05T20:15:26.757
> 
> 标签：ios, objective-c, uitableview, core-data, nsfetchedresultscontroller

我在 IB 中有一个原型 tableview，它有两种不同的单元格：一个完整​​的单元格和一个基本单元格（用于显示文章，我根据文章的类型使用每一个）。

我想将 FetchedResultsController 集成到我的应用程序中，这样我就可以使用 CoreData 来填充表格视图，但之前（使用 NSArray 而不是 FetchedResultsController）我按如下方式处理了单元设置：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    int row = indexPath.row;
    static NSString *CellIdentifier = nil;
    Article *article = self.articles[row];

    // Checks if user simply added a body of text (not from a source or URL)
    if (article.isUserAddedText) {
        CellIdentifier = @"BasicArticleCell";
    }
    else {
        CellIdentifier = @"FullArticleCell";
    }

    ArticleCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    // If the user simply added a body of text, only articlePreview and progress has to be set
    cell.articlePreview.text = article.preview;
    cell.articleProgress.text = [self calculateTimeLeft:article];

    // If it's from a URL or a source, set title and URL
    if (!article.isUserAddedText) {
        cell.articleTitle.text = article.title;
        cell.articleURL.text = article.URL;
    }

    return cell;
} 
```

但是现在我不知道如何检查它是否是基本文章（就像我之前检查过 NSArray 中 Article 对象的属性一样）。我看到的一篇文章是这样做的：

```
- (UITableViewCell *)tableView:(UITableView *)tableView
    cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell =
        [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Set up the cell...
    [self configureCell:cell atIndexPath:indexPath];

    return cell;
} 
```

但是在我决定单元格标识符是什么之前，我需要知道它是什么类型的文章，所以我不知道我该怎么做。我是否能够及早获取 FetchedResultController 对象，查询它以查看 article 属性的值（无论它是否是基本的）并相应地设置 CellIdentifier？或者还有什么我应该做的吗？

TL;DR：当使用 FetchedResultsController 时，如何根据单元格中显示的对象类型来决定 CellIdentifier。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:20:43.050

当您从 fetchedResultsController 检索对象时，您可以检查类型，然后根据返回的内容决定要创建的单元格类型。例如：

```
id result = [fetchedResultsController objectAtIndexPath:indexPath];
if ([result isKindOfClass:[MyObject class]]) {
   // It's a MyObject, so create and configure an appropriate cell
} else ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T20:23:58.397

`Article`您可以使用与在检索外观略有不同之前所做的完全相同的逻辑

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  Article *article = [self.fetchedResultsController objectAtIndexPath:indexPath];

  NSString *CellIdentifier = [article isUserAddedText] ? @"BasicArticleCell" : @"FullArticleCell";

  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

  // Set up the cell...
  [self configureCell:cell atIndexPath:indexPath];

  return cell;
} 
```

# xsd - XSD 中的可选键

> ID：15842736
> 
> 赞同：6
> 
> 时间：2013-04-05T20:15:46.990
> 
> 标签：xsd, key

我在根元素上创建了`key`/`keyref`以便基于指定元素创建文档范围的唯一性。

因此，通过所有实例的`.//foo/@name`每次出现必须是唯一的；同样对于. 这似乎工作正常。这些分别由和引用，也在根节点处定义。`@name``foo``.//bar/@name``.//foo-ref/@name-ref``.//bar-ref/@name-ref`

但是，我收集到无法创建*可选*密钥，这带来了一些问题。`foo`从语义上讲，根据符合文件的性质，在or的每个实例上都不需要密钥`bar`。的实例`foo-ref/@name-ref`显然需要以现有的 为目标`foo/@name`，但是没有 a 的情况在语义上并不是无效`foo`的`@name`。

有什么解决方法吗？我不喜欢消费者必须为*每个*元素定义一个键的想法，而合理地只有少数人需要它们。

这是示例架构（*当然，我没有部署一些`foobar`架构，但结构是相同的；这只是我一直在玩弄的一个测试架构*）

```
<xs:schema elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:complexType name="ref">
        <xs:attribute name="name-ref" type="xs:string" use="required" />
    </xs:complexType>
    <xs:complexType name="obj">
        <xs:attribute name="name" type="xs:string" use="optional" />
    </xs:complexType>
    <xs:complexType name="foo">
        <xs:complexContent>
            <xs:extension base="obj">
                <xs:sequence>
                    <xs:choice maxOccurs="unbounded">
                        <xs:element name="foo" type="foo" />
                        <xs:element name="bar" type="bar" />
                        <xs:element name="foo-ref" type="foo-ref" />
                        <xs:element name="bar-ref" type="bar-ref" />
                    </xs:choice>
                </xs:sequence>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>
    <xs:complexType name="foo-ref">
        <xs:complexContent>
            <xs:extension base="ref" />
        </xs:complexContent>
    </xs:complexType>
    <xs:complexType name="bar">
        <xs:complexContent>
            <xs:extension base="obj">
                <xs:sequence>
                    <xs:choice maxOccurs="unbounded">
                        <xs:element name="bar" type="bar" />
                        <xs:element name="qux" type="qux" />
                        <xs:element name="bar-ref" type="bar-ref" />
                    </xs:choice>
                </xs:sequence>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>
    <xs:complexType name="bar-ref">
        <xs:complexContent>
            <xs:extension base="ref" />
        </xs:complexContent>
    </xs:complexType>
    <xs:complexType name="qux">
        <xs:simpleContent>
            <xs:extension base="xs:string" />
        </xs:simpleContent>
    </xs:complexType>
    <xs:element name="root">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="foo" type="foo" maxOccurs="unbounded" />
            </xs:sequence>
        </xs:complexType>
        <xs:key name="foo">
            <xs:selector xpath=".//foo" />
            <xs:field xpath="@name" />
        </xs:key>
        <xs:key name="bar">
            <xs:selector xpath=".//bar" />
            <xs:field xpath="@name" />
        </xs:key>
        <xs:keyref name="foo-ref" refer="foo">
            <xs:selector xpath=".//foo-ref" />
            <xs:field xpath="@name-ref" />
        </xs:keyref>
        <xs:keyref name="bar-ref" refer="bar">
            <xs:selector xpath=".//bar-ref" />
            <xs:field xpath="@name-ref" />
        </xs:keyref>
    </xs:element>
</xs:schema> 
```

* * *

## 附录

感谢@PetruGardea，只需跟进我的修改。所以`unique`可以被 a 引用`keyref`，谁知道呢？（*显然不是我*）

```
<xs:element name="root">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="foo" type="foo" maxOccurs="unbounded" />
        </xs:sequence>
    </xs:complexType>
    <xs:keyref name="foo-ref" refer="foo">
        <xs:selector xpath=".//foo-ref" />
        <xs:field xpath="@name-ref" />
    </xs:keyref>
    <xs:keyref name="bar-ref" refer="bar">
        <xs:selector xpath=".//bar-ref" />
        <xs:field xpath="@name-ref" />
    </xs:keyref>
    <!--
        the use of xs:unique here, in lieu of xs:key allows for
        nullable "keys", retaining referential integrity with the
        above defined keyrefs. awesome possum.
    -->
    <xs:unique name="foo">
        <xs:selector xpath=".//foo" />
        <xs:field xpath="@name" />
    </xs:unique>
    <xs:unique name="bar">
        <xs:selector xpath=".//bar" />
        <xs:field xpath="@name" />
    </xs:unique>
</xs:element> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T21:45:11.860

使用[xsd:unique](http://www.w3.org/TR/xmlschema-1/#declare-key)；与键不同，它的匹配值要么是唯一的，要么是 nil（nil 或不存在）。

例子：

```
<?xml version="1.0" encoding="utf-8" ?>
<!-- XML Schema generated by QTAssistant/XSD Module (http://www.paschidev.com) -->
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="root">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="uk" maxOccurs="unbounded">
                    <xsd:complexType>
                        <xsd:attribute name="name" type="xsd:string"/>
                    </xsd:complexType>
                </xsd:element>
                <xsd:element name="fk" maxOccurs="unbounded">
                    <xsd:complexType>
                        <xsd:attribute name="name" type="xsd:string"/>
                    </xsd:complexType>
                </xsd:element>
            </xsd:sequence>
        </xsd:complexType>
        <xsd:unique name="uq">
            <xsd:selector xpath="uk"/>
            <xsd:field xpath="@name"/>
        </xsd:unique>
        <xsd:keyref name="fk" refer="uq">
            <xsd:selector xpath="fk"/>
            <xsd:field xpath="@name"/>
        </xsd:keyref>
    </xsd:element>
</xsd:schema> 
```

示例（有效）XML：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<!-- Sample XML generated by QTAssistant (http://www.paschidev.com) -->
<root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <uk name="name1"/>
    <uk />
    <fk/>
    <fk name="name1"/>
</root> 
```

# ruby-on-rails - 如何以 ajax 加载的形式访问关联的对象 ID

> ID：15842738
> 
> 赞同：0
> 
> 时间：2013-04-05T20:16:00.960
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery, ruby-on-rails-3.2

使用 Rails 3.2，如何访问由 ajax 加载的嵌入式表单中关联对象的 id？

例如，我有一个名为 Hotels 的对象。每家酒店都有_许多房间。当我编辑酒店时，我想在酒店编辑页面上使用 ajax 加载的新客房表单向该酒店添加新客房。

我首先在房间索引页面上使用 jquery 创建所有 ajax。那里一切正常，但我没有酒店 ID，所以我提供了一个酒店选择下拉框。现在，我想直接在酒店编辑页面上添加一个新房间。我不明白如何将酒店 ID (@hotel.id) 传递给新加载的 ajax 房间 _form.html.erb 部分。在 _form.html.erb 部分，我有：

```
 <% if defined?(@hotel.id) %>
    <%= f.hidden_field :hotel_id, :value => @hotel.id %>                    
  <% else %>
    <%= f.collection_select(:hotel_id, Hotel.all, :id, :name) %>
  <% end %> 
```

在酒店编辑页面上，我有一个添加新房间的链接：

```
 <%= link_to 'Add a Room', new_room_path, :remote=>true, :class => 'new_room' %> 
```

在我的 rooms_controller.rb 中，我有：

```
 # GET /rooms/new
  # GET /rooms/new.json
  def new
    @room = Room.new

    render :partial => 'form', :locals => { :room => @room }
  end 
```

如何在我的 ajax 加载的新 Room _form.html.erb 部分中获取关联的@hotel.id？

# javascript - 从悬停到点击的下拉菜单

> ID：15842744
> 
> 赞同：1
> 
> 时间：2013-04-05T20:16:27.630
> 
> 标签：javascript, drop-down-menu, onclick

大家好，我知道这是一个一遍又一遍的问题，但我就是不明白....我现在开始了解 CSS，但 java 是完全不行的.....如果有人可以提供帮助我把这个`onclick`功能放到下面的菜单中我会很感激它，希望我能开始了解一点 java 是如何工作的......这是菜单栏的每个 HTML 元素的开始方式：

```
<li><a href="#" class="drop">who we are</a><!-- Begin Home Item -->

    <div class="dropdown_chisiamo"><!-- Begin 2 columns container -->

        <div class="col_2">
            <h2>who we are</h2>
        </div>

        <div class="col_2"> 
```

有人可以给我JS脚本并简要解释一下去哪里。

谢谢！

# java - Java - 如何测量超时

> ID：15842745
> 
> 赞同：3
> 
> 时间：2013-04-05T20:16:39.197
> 
> 标签：java, time, timer

我正在使用 Java 套接字制作一个 ping 程序。我的程序中的一个错误是有时它无法连接并且会永远坐在那里。所以我试图添加一个超时（二十秒后），ping 将失败。但我不知道该怎么做。

这是我的 ping 程序的一部分：

```
boolean result = false;
long before1 = System.nanoTime();
out.println(new byte[64]);
System.out.println("(1) Sent 64 bytes of data to " + address
                    + "...");
try {
    if ((in.readLine()) != null) {
        int size = in.readLine().toString().getBytes().length;
        long after = System.nanoTime();
        long s = ((after - before1) / 1000000L) / 1000;
        System.out.println("(1) Recieved reply from " + address
            + " (" + size + " bytes), time = " + s
                + " seconds...");
        result = true;
    } else if ((in.readLine()) == null) {
        long after = System.nanoTime();
        long s = ((after - before1) / 1000000L) / 1000;
        System.out.println("(1) Failed to recieve reply from "
            + address + ", time = " + s + " seconds...");
            result = false;
    }

} catch (IOException exc) {

    long after = System.nanoTime();
    long s = ((after - before1) / 1000000L) / 1000;
    System.err.println("(1) Failed to recieve reply from "
        + address + ", time = " + s + " seconds...\nReason: "
                        + exc);
    result = false;

} 
```

但是我想在我的代码中的任何地方测量经过的时间，而不是：

```
long time = System.nanoTime(); 
```

如果我的代码的一部分卡在做某事，它将在 20 秒后超时。
关于如何测量是否在 try/catch 块开始或我的代码中的其他任何地方已经过去了 20 秒的任何建议，因此它不会在 ping 期间卡住？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:29:09.140

正如“jsn”和“jahory”所说，您需要使用线程来执行此操作。这是 2 个有用的链接，您可以查看它们；）

*   [如何使用线程实现超时](http://www.coderanch.com/t/232213/threads/java/implement-timeout-threads)

*   [在 Java 中为方法添加线程超时](http://blog.smartkey.co.uk/2011/09/adding-a-thread-timeout-to-methods-in-java/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T20:36:12.107

您可以使用[Future](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html)和[FutureTask](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/FutureTask.html)：

```
 ExecutorService pingExecutor = ... // executor service to run the ping in other thread

   void showPing(final String target) throws InterruptedException {

     Future<String> ping = executor.submit(new Callable<String>() {
         public String call() {
             String pingResult = ... // do your Ping stuff
             return pingResult;
         }});

     System.out.println("Pinging..."); // do other things while searching

     try {
       System.out.println(future.get(20, TimeUnit.SECONDS)); // use future, waits 20 seconds for the task to complete
     } catch (ExecutionException ex) {
     } catch (TimeoutException tex) {
       // Ping timed out
     }
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T20:40:08.370

你可以在这里找到一些提示：[How do I call some blocking method with timeout in Java?](https://stackoverflow.com/questions/1164301/how-do-i-call-some-blocking-method-with-a-timeout-in-java)

未来的界面看起来是解决您问题的好方法。但是请记住，根据您的任务正在做什么，您可能无法真正取消它。附加信息：

*   [教程（特别是参见非阻塞算法部分）](http://www.vogella.com/articles/JavaConcurrency/article.html#futures)

# jsdoc - 如何在 JSDoc JS-Toolkit 中记录以下功能

> ID：15842750
> 
> 赞同：2
> 
> 时间：2013-04-05T20:16:52.427
> 
> 标签：jsdoc

**如何在 JSDoc JS-Toolkit 中记录以下功能 **

我想在这个**主要功能中记录****尝试**和**帮助**方法，但我没有弄清楚如何做到这一点。

 **```
/** Sample doc
* @class
* @constructor
* @name Sample
*/
var main=function(){
  this.value="";

  /** help function
  * @param {String} Name
  */
  this.help=function(name){
     console.log('help me'+name);
  }

  /** help function
  * @param {String} Name
  */
  this.try=function(name){
     console.log('try me'+name);
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T14:21:55.633

我只是为此挣扎了几个小时。我试过了：

*   `@member`
*   `@augments`
*   `@method`
*   `@this`

从我发现的示例和教程中，成员函数和变量*应该*出现在输出中，只需`/** description/*`在它们上方添加注释，但我发现情况并非如此。和你一样，我使用的是标准的 JavaScript 构造函数，`this`由于存在，应该能够自动推断出哪里`@constructor`。也许有一些我没有看到的皱纹。

最后，我找到了两个对我有用的标签，[`@name`](http://usejsdoc.org/tags-name.html)和[`@memberof`](http://usejsdoc.org/tags-memberof.html). 它们都允许您指定属性所属的对象。以`@name`这种方式使用是无证的（至少，我没有在任何地方看到它），但非常简单。您还需要使用`@function`.

`@name`这是一个带有标签的示例：

```
/** help function
* @name Sample.try
* @function
* @param {String} Name
*/
this.try=function(name){
    console.log('try me'+name);
}; 
```

![在此处输入图像描述](https://i.stack.imgur.com/UcaHJ.png)

这是一个带有`@memberof`标签的示例：

```
/** help function
* @memberof Sample
* @function
* @param {String} Name
*/
this.try=function(name){
    console.log('try me'+name);
}; 
```

![在此处输入图像描述](https://i.stack.imgur.com/KJNM2.png)

如您所见，输出几乎相同。我看到的唯一区别是`@memberof`包含`this.`在方法名称中。出于这个原因，我决定使用`@name`.

剩下的问题是函数是每个实例的，而不是`<static>`.

希望这可以帮助！**

# iphone - 像素化的iphone UIImageView

> ID：15842755
> 
> 赞同：3
> 
> 时间：2013-04-05T20:17:19.947
> 
> 标签：iphone, ios, uiimageview

我在使用 UIImageView 类渲染图像时遇到问题。像素化似乎主要发生在我试图显示的图像的边缘。

我尝试更改属性“使用边缘抗锯齿渲染”无济于事。

图像文件包含比屏幕上显示的更大的图像。

它似乎对图像的质量非常混乱，然后显示它。我试图在这里发布图片，但 StackOverflow 拒绝了我的这一特权。所以这是一个链接到正在发生的事情。

[http://i.imgur.com/QpUOTOF.png](http://i.imgur.com/QpUOTOF.png)

这张图片中的太阳就是我所说的问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T20:23:05.913

动态图像大小调整速度快且质量低。对于捆绑的图像，值得额外的捆绑空间来包含缩小的版本。`UIImage`对于下载的图像，您可以通过在设置图像属性之前使用 Core Graphics 调整大小来获得更好的结果。

```
CGSize newSize = CGSizeMake(newWidth, newHeight);

UIGraphicsBeginImageContextWithOptions(newSize, // context size
                                       NO,      // opaque?
                                       0);      // image scale. 0 means "device screen scale"
CGContextRef context = UIGraphicsGetCurrentContext();

CGContextSetInterpolationQuality(context, kCGInterpolationHigh);
[bigImage drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T20:34:34.610

使用以下方法获取**图像**的特定**高度**和**宽度**

 **```
+ (UIImage*)resizeImage:(UIImage*)image withWidth:(int)width withHeight:(int)height
{
    CGSize newSize = CGSizeMake(width, height);
    float widthRatio = newSize.width/image.size.width;
    float heightRatio = newSize.height/image.size.height;

    if(widthRatio > heightRatio)
    {
        newSize=CGSizeMake(image.size.width*heightRatio,image.size.height*heightRatio);
    }
    else
    {
        newSize=CGSizeMake(image.size.width*widthRatio,image.size.height*widthRatio);
    }

    UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
    [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
    UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return newImage;
} 
```

此方法返回**NewImage**，具有您指定的特定大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T20:21:59.730

你的图像有多大，imageView 的大小是多少？不要依赖 UIImageView 为你缩小它。您可能需要手动调整它的大小。这也会更节省内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T20:57:28.587

我使用这样的类别： [>>>github链接<<<](https://github.com/mbcharbonneau/UIImage-Categories)

进行图像大小调整。

这也为您提供了圆角等其他一些不错的功能。

另请记住，如果要旋转图像以避免锯齿，则需要在图像边缘设置透明边框。**

# c# - 如何在我的测试项目中引用文件以加载不带硬编码路径的文件？

> ID：15842758
> 
> 赞同：1
> 
> 时间：2013-04-05T20:17:28.927
> 
> 标签：c#, visual-studio, file-io, nunit

在我的 nunit 测试项目中，我的布局如下：

```
/Fixters/someFile.txt
/Services/SomeService.cs 
```

someFile.txt 是我需要阅读的文件，因为它包含我用于单元测试的文本。

我如何在不硬编码路径的情况下引用此文件夹，因为其他团队成员可能会将此项目存储在与我不同的路径中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T20:20:13.223

如果您这样做`File.ReadAllText(filepath)`以及传入相对路径的任何其他等效方法，运行时将使用应用程序的当前工作目录来创建整个路径。所以一般来说，使用相对路径应该没问题。您可能还需要指定将其`someFile.txt`复制到输出目录。

如果不确定 cwd 是什么，请尝试`Directory.GetCurrentDirectory()`

# asp.net-mvc - MVC 3 在 vi ewModel 中接受 null foreach

> ID：15842761
> 
> 赞同：0
> 
> 时间：2013-04-05T20:17:43.033
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model, foreach

我有一个页面，用户可以在其中输入他们的状态信息，然后其他用户的列表会返回该状态。我正在使用`foreach`循环。

一些州有 0 个用户，这导致我得到一个错误：**Object reference not set to an instance of an object**。我怎样才能克服这个错误？我使用的特定模型称为 Profiles。

该模型：

```
public class homepage
{
    public List<profile> profile { get; set; }
    public PagedList.IPagedList<Article> article { get; set; }
} 
```

控制器：

```
public ActionResult Index()
{
    HttpCookie mypreference = Request.Cookies["cook"];
    if (mypreference == null)
    {
        ViewData["mypreference"] = "Enter your zipcode above to get more detailed information";
        var tyi = (from s in db.profiles.OrderByDescending(s => s.profileID).Take(5) select s).ToList();
    }
    else
    {
        ViewData["mypreference"] = mypreference["name"];
        string se = (string)ViewData["mypreference"];
        var tyi = (from s in db.profiles.OrderByDescending(s => s.profileID).Take(5) where se==s.state select s).ToList();
    } 
    return View();
} 
```

风景：

```
@if (Model.profile != null)
{
 foreach (var item in Model.profile)
 {
  @item.city  
 }
} 
```

当我得到**Object reference not set to an instance of an object**错误时，该行`@if (Model.profile != null)`被突出显示，所以我尝试这样做：

```
public List<profile>? profile { get; set; } 
```

但它没有用。关于如何在 foreach 中接受空模型或只是在运行时跳过代码的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:26:53.203

个人资料是一个列表。查看列表是否有任何元素。

看看这是否有效：

```
@if (Model.profile.Any())
{
   foreach (var item in Model.profile)
   {    
      @item.city  
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:51:01.033

刚刚注意到，您正在调用`View()`但没有将模型传递给它，然后在您引用的视图中`Model.profile`。不可避免地`Model`为空，因此没有`profile`可访问的属性。确保将模型传递给`return View(model)`调用中的视图。

* * *

*收藏品的跟进*

我一直发现，任何时候你有一个实现的变量，`IEnumerable<T>`最好用一个空集填充它`null`。也就是说：

```
// no-nos (IMHO)
IEnumerable<String> names = null; // this will break most kinds of
                                  // access reliant on names being populated
                                  // e.g. LINQ extensions

// better options:
IEnumerable<String> names = new String[0];
IEnumerable<String> names = Enumerable.Empty<String>();
IEnumerable<String> names = new List<String>(); 
```

除非您喜欢在`if (variable != null && variables.Count() > 0)`每次想要访问它时检查它，否则请将其设为空集合并保留它。

完整地说，只要变量填充了某种类型的集合（空的或填充的），a`foreach`就不会中断。它只会跳过代码块而不输出任何内容。如果您收到对象空错误，很可能是因为变量为空并且无法检索到枚举数。

# ruby-on-rails - 使用绝对路径显示图像

> ID：15842768
> 
> 赞同：-2
> 
> 时间：2013-04-05T20:18:14.077
> 
> 标签：ruby-on-rails, image

对于我想使用的 Ruby on Rails

```
 <img src =../../../photo/1.PNG > 
```

显示存储在我的应用程序文件夹之外的一些图像。我用这个并用..来指出它的图像在哪里，但是它不起作用。我用的是Win7，有没有人可以帮助我？

我有一个由脚手架生成的名为“showcase”的 MVC，我想在两个应用程序中拥有相同的展示。在app1：展示（我想分享图像的地方）模型：房子是图像名称。

```
class Showcase < ActiveRecord::Base
   attr_accessible :house,:sequence

  has_attached_file :house, :whiny => false,
                    :styles => {  :large => "350x300>",
                                  :medium => "120x100>",
                                  :thumb => "50x50>"}
end 
```

然后图像将上传到文件夹中：public/systems/showcases/houses/000/000/0001/1.PNG

在应用程序2。我创建了一个带有迁移的展示模型。并使用 ActiveResources 在 app1 和 app2 之间共享数据库。但 app2 无法配置回形针类型。

```
class Showcase < ActiveResource::Base
  self.site = "http://localhost:3000"
end 
```

我如何在 app2 中调用从 app1 上传的图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:28:33.960

如果您使用的是 rails 3 或更高版本，则应该真正使用 rails 资产管道。将您的图像放在 app/assets/images 中，然后调用 rails 函数，为您提供资源的 URL，例如 <%= image_tag "rails.png" %>。

有关更多详细信息，请阅读以下指南： http: [//guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:22:17.187

如果您尝试在应用程序之间真正共享图像，并且它们是上传而不是静态资产，那么在其他地方创建一个系统文件夹，然后将每个应用程序中的系统文件夹作为指向共享文件夹的符号链接。这样你就没有疯狂的 url 路径，他们都可以评估它，你不会以欺骗或不匹配而告终。

# c# - 在父页面下排序子页面

> ID：15842773
> 
> 赞同：0
> 
> 时间：2013-04-05T20:18:24.913
> 
> 标签：c#, asp.net, sql, menu

我正在尝试创建一个数据库驱动的菜单，但我不确定如何使用我实现代码的方式将我的子页面排列在我的父页面下方。

SQL 调用：

```
/// <summary>
    /// Get all of the pages on the website
    /// </summary>
    /// <returns></returns>
    public static DataTable GetAllWebsitePages()
    {
        DataTable returnVal = new DataTable();
        using (SqlConnection sqlCon = new SqlConnection(ConfigurationManager.ConnectionStrings["websiteContent"].ConnectionString))
        {
            sqlCon.Open();
            string SQL = "SELECT * FROM Website_Pages";
            using (SqlCommand sqlComm = new SqlCommand(SQL, sqlCon))
            {
                using (SqlDataAdapter dataAdapter = new SqlDataAdapter(sqlComm))
                {
                    dataAdapter.Fill(returnVal);
                }
            }
            sqlCon.Close();
        }
        return returnVal;
    } 
```

C＃：

```
private void refreshPages()
{
    lvPages.DataSource = CMS.WebsitePages.Pages.GetAllWebsitePages();
    lvPages.DataBind();
} 
```

ASP.NET：

```
<ItemTemplate>
            <tr>
                <td>
                    <asp:Label runat="server" ID="lblTitle" CssClass="cmsTitle"><%#Eval("Website_Page_Name")%></asp:Label>
                </td>
                <td>
                    <asp:ImageButton runat="server" ID="btnEdit" CommandArgument='<%#Eval("Website_Page_ID")%>'
                        CommandName="editPage" ImageUrl="../../images/NTU-CMS-Edit.png" />
                    &nbsp;&nbsp;&nbsp;
                    <asp:ImageButton runat="server" ID="btnDelete" CommandArgument='<%#Eval("Website_Page_ID")%>'
                        CommandName="deletePage" OnClientClick="return confirm('Do you want to delete this page?');"
                        ImageUrl="../../images/NTU-CMS-Delete.png" />
                </td>
            </tr>
        </ItemTemplate> 
```

在数据库中，我的所有页面都有一个 ID，子页面有一个父 ID。例如，Our History 的父页面为 2，即 About Us。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:32:51.367

对于这样的分组数据有一种古老的技术 - 首先是让你的 SQL 输出这样的东西......

```
Parent     Child
---------- ----------
Home       Home
Products   Products
Products   Widget
Products   Midget
Products   Fidget
About Us   About Us
About Us   History
About Us   Contact Us 
```

然后你遍历它并使用每一行来构建你的菜单......以下是伪代码......

```
String currentGroup = "";
MenuItem currentParentMenuItem = null;
foreach(DBRow r in results) {
  if (currentGroup != r.Group) {
      //create a new group
      currentGroup = r.Group;

      //add that group as a "Parent" item
      //Store the Parent in a MenuItem so we can add the children next time through
      currentParentMenuItem = newParentWeCreatedAbove;
  } else {
      //add the current row as a child to the current Parent menu group
      currentParentMenuItem.AddChild(r.Child);
  }
} 
```

基本上就是：每次组名更改时，我们都会创建一个新组并将所有子组添加到该组，直到组名再次更改。

# linux - 在 x86 上没有帧指针的堆栈展开

> ID：15842774
> 
> 赞同：3
> 
> 时间：2013-04-05T20:18:29.330
> 
> 标签：linux, gcc, gdb

`-fomit-frame-pointer`是否可以让 gdb在 x86（类似于 AMD64）上成功展开使用 gcc 编译的代码堆栈？如果是这样，需要什么才能使其正常工作？

明确一点：我可以重新编译，所以编译器选项没问题，但我不能禁用省略帧指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T22:54:21.757

我正在寻找的编译器选项是`-fasynchronous-unwind-tables`

# wordpress - wpdb选择表没有参数

> ID：15842775
> 
> 赞同：0
> 
> 时间：2013-04-05T20:18:35.867
> 
> 标签：wordpress

我正在使用新的 wpdb 来使用 wordpress 访问数据库。

```
$mydb = new wpdb($username,$password,$database,$hostname);
$sql = $mydb->prepare("SELECT * FROM " . $table);
$results = $mydb->get_results($sql); 
```

此行产生错误：

```
$sql = $mydb->prepare("SELECT * FROM " . $table); 
```

wpdb::prepare 被**错误地**调用。wpdb::prepare() 至少需要两个参数。

以下所有语句都会产生相同的错误：

```
$sql = $mydb->prepare("SELECT * FROM $table");
$sql = $mydb->prepare("SELECT * FROM '%s'", $table); 
```

我如何在没有参数的情况下编写它？

（我正在使用 wordpress 3.5）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:24:00.727

在上一个示例中从 '%s' 中去掉单引号，假设 $table 是有效的表名，这应该可以工作。

编辑： $wpdb->prepare() 在更有限的范围内与 php 的 sprintf() 类似。如果你只传递一个参数，它不会*做*任何事情。在 3.5 发布后，请参阅 Andrew Nacin 的帖子：http: [//make.wordpress.org/core/2012/12/12/php-warning-missing-argument-2-for-wpdb-prepare/](http://make.wordpress.org/core/2012/12/12/php-warning-missing-argument-2-for-wpdb-prepare/)

第二个参数将替换可替换字符集的第一个实例，即 %s、%d 或 %f，第三个参数将替换第二个实例，依此类推。

# android - 我的简单测试用例不能在 Robotium 上运行

> ID：15842778
> 
> 赞同：0
> 
> 时间：2013-04-05T20:18:46.317
> 
> 标签：android, unit-testing, junit, robotium, android-testing

我正在尝试使用一个非常简单的测试用例使用 Robotium 测试我的应用程序，但它失败了。我已经尝试了一切，但没有任何效果。我的主要活动是谷歌地图活动。我尝试过其他活动，但效果不佳。我的包名是正确的。

这是我试过的：

*   进口机器人
*   在订单和出口中检查 Robotium
*   重启 Eclipse 并清理项目
*   在清单文件中将 debuggable 设置为 true。

这是清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.app.neatspots.test"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="11" 
        android:targetSdkVersion="17"/>
<uses-permission android:name="android.permission.RUN_INSTRUMENTATION" />
    <instrumentation
        android:name="android.test.InstrumentationTestRunner"
        android:targetPackage="com.app.neatspots" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" android:debuggable="true">
        <uses-library android:name="android.test.runner" />
    </application>

</manifest> 
```

这是我的简单测试类：

```
package android.test;

import com.app.neatspots.MainActivity;
import com.jayway.android.robotium.solo.Solo;
import android.test.ActivityInstrumentationTestCase2;

public class MainActivityTest extends
        ActivityInstrumentationTestCase2<MainActivity> {

    private Solo solo;

    public MainActivityTest() {
        super(MainActivity.class);
        this.solo = new Solo(getInstrumentation(), getActivity());
    }

    protected void setUp() throws Exception {
        super.setUp();
    }

    public void testClick()
    {
        solo.assertCurrentActivity("Check on first activity", MainActivity.class);
    }
} 
```

这是我的 LogCat。我也把它放在 pastebin 里，因为它在这里很丑。[http://pastebin.com/GuvcRuHg](http://pastebin.com/GuvcRuHg)

```
04-05 20:54:33.402: W/dalvikvm(19668): Class resolved by unexpected DEX: Lcom/app/neatspots/MainActivity;(0x414e7fe0):0x2068c8 ref [Lcom/google/android/gms/maps/GoogleMap$OnMapLongClickListener;] Lcom/google/android/gms/maps/GoogleMap$OnMapLongClickListener;(0x414e7fe0):0x23ac70
04-05 20:54:33.402: W/dalvikvm(19668): (Lcom/app/neatspots/MainActivity; had used a different Lcom/google/android/gms/maps/GoogleMap$OnMapLongClickListener; during pre-verification)
04-05 20:54:33.402: I/dalvikvm(19668): Failed resolving Lcom/app/neatspots/MainActivity; interface 818 'Lcom/google/android/gms/maps/GoogleMap$OnMapLongClickListener;'
04-05 20:54:33.402: W/dalvikvm(19668): Link of class 'Lcom/app/neatspots/MainActivity;' failed
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668): Cannot load class. Make sure it is in your apk. Class name: 'com.app.neatspots.MainActivity'. Message: com.app.neatspots.MainActivity
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668): java.lang.ClassNotFoundException: com.app.neatspots.MainActivity
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at java.lang.Class.classForName(Native Method)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at java.lang.Class.forName(Class.java:217)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at android.test.ClassPathPackageInfoSource.createPackageInfo(ClassPathPackageInfoSource.java:88)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at android.test.ClassPathPackageInfoSource.access$000(ClassPathPackageInfoSource.java:39)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at android.test.ClassPathPackageInfoSource$1.load(ClassPathPackageInfoSource.java:50)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at android.test.ClassPathPackageInfoSource$1.load(ClassPathPackageInfoSource.java:47)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at android.test.SimpleCache.get(SimpleCache.java:31)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at android.test.ClassPathPackageInfoSource.getPackageInfo(ClassPathPackageInfoSource.java:72)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at android.test.ClassPathPackageInfo.getSubpackages(ClassPathPackageInfo.java:48)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at android.test.ClassPathPackageInfo.addTopLevelClassesTo(ClassPathPackageInfo.java:61)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at android.test.ClassPathPackageInfo.getTopLevelClassesRecursive(ClassPathPackageInfo.java:55)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at android.test.suitebuilder.TestGrouping.testCaseClassesInPackage(TestGrouping.java:156)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at android.test.suitebuilder.TestGrouping.addPackagesRecursive(TestGrouping.java:117)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at android.test.suitebuilder.TestSuiteBuilder.includePackages(TestSuiteBuilder.java:102)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at android.test.InstrumentationTestRunner.onCreate(InstrumentationTestRunner.java:358)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3932)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at android.app.ActivityThread.access$1300(ActivityThread.java:127)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1197)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at android.os.Looper.loop(Looper.java:137)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at android.app.ActivityThread.main(ActivityThread.java:4507)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at java.lang.reflect.Method.invokeNative(Native Method)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at java.lang.reflect.Method.invoke(Method.java:511)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at dalvik.system.NativeStart.main(Native Method)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668): Caused by: java.lang.NoClassDefFoundError: com/app/neatspots/MainActivity
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    ... 26 more
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668): Caused by: java.lang.IllegalAccessError: Class ref in pre-verified class resolved to unexpected implementation
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at dalvik.system.DexFile.defineClass(Native Method)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at dalvik.system.DexFile.loadClassBinaryName(DexFile.java:195)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at dalvik.system.DexPathList.findClass(DexPathList.java:315)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:58)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
04-05 20:54:33.407: W/ClassPathPackageInfoSource(19668):    ... 26 more
04-05 20:54:33.442: D/dalvikvm(19668): GC_CONCURRENT freed 498K, 7% free 9028K/9607K, paused 2ms+2ms
04-05 20:54:33.492: D/dalvikvm(1988): GC_CONCURRENT freed 1602K, 35% free 25226K/38279K, paused 3ms+8ms
04-05 20:54:33.502: E/DataRouter(1828): usb connection is true 
04-05 20:54:33.502: E/DataRouter(1828): DSR is ON. Don't send DTR ON.
04-05 20:54:33.502: D/dalvikvm(19668): GC_CONCURRENT freed 487K, 6% free 9052K/9607K, paused 1ms+2ms
04-05 20:54:33.592: D/dalvikvm(19668): GC_CONCURRENT freed 537K, 6% free 9146K/9671K, paused 2ms+8ms
04-05 20:54:33.662: D/dalvikvm(19668): GC_CONCURRENT freed 614K, 7% free 9066K/9735K, paused 2ms+2ms
04-05 20:54:33.692: I/FMRadioService(1988): *** mReceiver: VOLUME_CHANGED_ACTION
04-05 20:54:33.692: I/FMRadioService(1988):    stream: 3
04-05 20:54:33.692: I/FMRadioService(1988):    volume: 15
04-05 20:54:33.692: I/FMRadioService(1988): *** mReceiver: VOLUME_CHANGED_ACTION
04-05 20:54:33.692: I/FMRadioService(1988):    stream: 9
04-05 20:54:33.692: I/FMRadioService(1988):    volume: 15
04-05 20:54:33.692: I/FMRadioService(1988): *** mReceiver: VOLUME_CHANGED_ACTION
04-05 20:54:33.692: I/FMRadioService(1988):    stream: 10
04-05 20:54:33.692: I/FMRadioService(1988):    volume: 0
04-05 20:54:33.692: I/FmRadioController(1988): Jni player_SetVolume :0 
04-05 20:54:33.692: I/FmRadioController(1988): ---Jni player_SetVolume---
04-05 20:54:33.692: I/FmRadioController(1988): Jni player_muteOn
04-05 20:54:33.692: I/FmRadioController(1988): Jni player_muteOn
04-05 20:54:33.722: D/dalvikvm(19668): GC_CONCURRENT freed 493K, 7% free 9085K/9735K, paused 1ms+2ms
04-05 20:54:33.787: D/dalvikvm(19668): GC_CONCURRENT freed 530K, 7% free 9066K/9735K, paused 1ms+2ms
04-05 20:54:33.842: D/dalvikvm(19668): GC_CONCURRENT freed 510K, 7% free 9068K/9735K, paused 1ms+2ms
04-05 20:54:33.852: I/TestSuiteBuilder(19668): Failed to create test.
04-05 20:54:33.852: I/TestSuiteBuilder(19668): java.lang.reflect.InvocationTargetException
04-05 20:54:33.852: I/TestSuiteBuilder(19668):  at java.lang.reflect.Constructor.constructNative(Native Method)
04-05 20:54:33.852: I/TestSuiteBuilder(19668):  at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
04-05 20:54:33.852: I/TestSuiteBuilder(19668):  at android.test.suitebuilder.TestMethod.instantiateTest(TestMethod.java:87)
04-05 20:54:33.852: I/TestSuiteBuilder(19668):  at android.test.suitebuilder.TestMethod.createTest(TestMethod.java:73)
04-05 20:54:33.852: I/TestSuiteBuilder(19668):  at android.test.suitebuilder.TestSuiteBuilder.addTest(TestSuiteBuilder.java:262)
04-05 20:54:33.852: I/TestSuiteBuilder(19668):  at android.test.suitebuilder.TestSuiteBuilder.build(TestSuiteBuilder.java:184)
04-05 20:54:33.852: I/TestSuiteBuilder(19668):  at android.test.InstrumentationTestRunner.onCreate(InstrumentationTestRunner.java:371)
04-05 20:54:33.852: I/TestSuiteBuilder(19668):  at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3932)
04-05 20:54:33.852: I/TestSuiteBuilder(19668):  at android.app.ActivityThread.access$1300(ActivityThread.java:127)
04-05 20:54:33.852: I/TestSuiteBuilder(19668):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1197)
04-05 20:54:33.852: I/TestSuiteBuilder(19668):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-05 20:54:33.852: I/TestSuiteBuilder(19668):  at android.os.Looper.loop(Looper.java:137)
04-05 20:54:33.852: I/TestSuiteBuilder(19668):  at android.app.ActivityThread.main(ActivityThread.java:4507)
04-05 20:54:33.852: I/TestSuiteBuilder(19668):  at java.lang.reflect.Method.invokeNative(Native Method)
04-05 20:54:33.852: I/TestSuiteBuilder(19668):  at java.lang.reflect.Method.invoke(Method.java:511)
04-05 20:54:33.852: I/TestSuiteBuilder(19668):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
04-05 20:54:33.852: I/TestSuiteBuilder(19668):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
04-05 20:54:33.852: I/TestSuiteBuilder(19668):  at dalvik.system.NativeStart.main(Native Method)
04-05 20:54:33.852: I/TestSuiteBuilder(19668): Caused by: java.lang.NullPointerException
04-05 20:54:33.852: I/TestSuiteBuilder(19668):  at android.test.ActivityInstrumentationTestCase2.getActivity(ActivityInstrumentationTestCase2.java:94)
04-05 20:54:33.852: I/TestSuiteBuilder(19668):  at android.test.ListLocationsTest.<init>(ListLocationsTest.java:14)
04-05 20:54:33.852: I/TestSuiteBuilder(19668):  ... 18 more
04-05 20:54:33.852: I/TestRunner(19668): started: testSuiteConstructionFailed(android.test.suitebuilder.TestSuiteBuilder$FailedToCreateTests)
04-05 20:54:33.872: I/TestRunner(19668): finished: testSuiteConstructionFailed(android.test.suitebuilder.TestSuiteBuilder$FailedToCreateTests)
04-05 20:54:33.872: I/TestRunner(19668): passed: testSuiteConstructionFailed(android.test.suitebuilder.TestSuiteBuilder$FailedToCreateTests)
04-05 20:54:33.887: D/AndroidRuntime(19644): Shutting down VM
04-05 20:54:33.887: I/ActivityManager(1988): Force stopping package com.app.neatspots uid=10139
04-05 20:54:33.887: I/ActivityManager(1988): Killing proc 19668:com.app.neatspots/10139: force stop 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T11:10:15.550

下载了您的应用程序。这是我为这个文件准备的测试。反正我没有资源，所以肯定有点不同：

```
package com.app.neatspots.test;

import android.app.Activity;
import android.test.ActivityInstrumentationTestCase2;

import com.jayway.android.robotium.solo.Solo;

public class Test extends ActivityInstrumentationTestCase2<Activity> {

    private static final String LAUNCHER_ACTIVITY_CLASSNAME = "com.app.neatspots.MainActivity";
    private static Class<?> launchActivityClass;
    static {
        try {
            launchActivityClass = Class.forName(LAUNCHER_ACTIVITY_CLASSNAME);
        } catch (ClassNotFoundException e) {
            throw new RuntimeException(e);
        }
    }
    private Solo solo;

    @SuppressWarnings("unchecked")
    public Test() {
        super((Class<Activity>) launchActivityClass);
    }

    @Override
    public void setUp() throws Exception {
        super.setUp();
        solo = new Solo(getInstrumentation(), getActivity());
    }

    @Override
    public void tearDown() throws Exception {
        solo.finishOpenedActivities();
        super.tearDown();
    }

    public void testRecorded() throws Exception {
        solo.waitForActivity("MainActivity");
        solo.sleep(5000);
    }
} 
```

它对我有用： ![在此处输入图像描述](https://i.stack.imgur.com/88vpG.png) 附加项目： [http ://www.speedyshare.com/hf3hP/MyApkTest.zip](http://www.speedyshare.com/hf3hP/MyApkTest.zip)

# php - 需要帮助整理 MySQL 权限和连接

> ID：15842780
> 
> 赞同：0
> 
> 时间：2013-04-05T20:18:59.093
> 
> 标签：php, mysql, database

所以我正在尝试建立一个访问和写入数据库的 PHP 站点。这应该相对简单，但我已经被一堆权限问题淹没了，而且我是 PHP 新手，所以我不知道如何解决所有问题。

首先，尝试访问数据库时会出现此警告：

```
Warning: mysqli_connect(): The server requested authentication method unknown to the client [mysql_old_password] 
```

连接也因此失败：

```
Warning: mysqli_connect(): (HY000/2054): The server requested authentication method umknown to the client 
```

在我的研究中，我发现由于 PHP 的版本控制，此警告与密码哈希有关（[链接](https://stackoverflow.com/questions/1340488/mysql-php-incompatibility/1340538#1340538)）

但是，尝试在该页面上运行解决方案会给我以下错误：

```
Error Code: 1044\. Access denied for user 'user'@'host' to database 'mysql' 
```

而且我不知道如何在该数据库中获得权限。

这是我的 php 代码供参考（已删除敏感信息）：

```
$con=mysqli_connect("IP:port","user","password","database_name");
// Check connection
if (mysqli_connect_errno($con))
{
echo "Failed to connect to MySQL: " . mysqli_connect_error();
}
else
{
    echo "Succesfully connected";
echo "<br />";
}

$result = mysqli_query($con, "SELECT * FROM OWNERS") or die("Error: ".mysqli_error($con));
while($row = mysqli_fetch_array($result))
{
  echo $row['email'] . " " . $row['type'];
echo "<br />";
} 
```

有人可以帮我解决这个问题吗？我知道这很多，但似乎所有问题都是相关的，我不确定从哪里开始修复它们。（我正在使用 XAMPP 运行 php 和 MySQL 工作台来运行查询）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:41:17.297

我想mysql正在您网络中的另一台机器上运行。试试这个看看它是否有效：

```
CREATE USER 'user'@'IP' IDENTIFIED BY 'your password';
GRANT ALL ON database_name.* TO 'user'@'IP'; 
```

如果用户已经在您的系统中但具有不同的 IP，那么您应该使用您的 mysql 服务器的 IP 再次创建它。您也可以在 create user 和 grant 语句中尝试**%**而不是 IP，但不建议在生产中使用。

# asp.net-mvc-2 - 简单的模型绑定不适用于整数

> ID：15842788
> 
> 赞同：0
> 
> 时间：2013-04-05T20:19:26.953
> 
> 标签：asp.net-mvc-2, model-binding

我试图弄清楚为什么这个简单的控制器操作不起作用。我要做的就是`Number`在每次发布后增加。

**模型**

```
public class ViewModel
{
    public int Number { get; set; }
} 
```

**看法**

```
<body>

    <% using (Html.BeginForm("Test", "Invoice"))
    { %>
        <%: Html.EditorFor(m => m.Number) %>
        <%= Model.Number %>
        <input type="submit" value="Submit" />
    <% } %>

</body> 
```

**控制器**

```
public ActionResult Test()
{
   var viewModel = new ViewModel {Number = 1};
   return View("Test", viewModel);
}

[HttpPost]
public ActionResult Test(ViewModel viewModel)
{
    viewModel.Number = viewModel.Number + 1;
    return View("Test", viewModel);
} 
```

在我的控制器中，`viewModel.Number`增加到`2`，但是当返回视图时，文本框包含`1`并`Model.Number`显示 2。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:33:36.127

Html 助手偏爱`ModelState`实际模型值中的值。

因此，如果您在操作中修改模型，则需要`ModelSate`在将其传递给视图之前清除：

```
[HttpPost]
public ActionResult Test(ViewModel viewModel)
{
    viewModel.Number = viewModel.Number + 1;
    ModelState.Clear();
    return View("Test", viewModel);
} 
```

您可以在这篇精彩的文章中阅读有关此 ASP.NET MVC 功能的更多信息：

[ASP.NET MVC 回发和 HtmlHelper 控件忽略模型更改](http://www.west-wind.com/weblog/posts/2012/Apr/20/ASPNET-MVC-Postbacks-and-HtmlHelper-Controls-ignoring-Model-Changes)

# android - 如何在 Android 首选项中强制执行确切的字符串长度？

> ID：15842796
> 
> 赞同：0
> 
> 时间：2013-04-05T20:19:41.893
> 
> 标签：android, sharedpreferences, edittextpreference

我有一个首选项屏幕，当启用设置时，有几个字符串必须是特定长度（字符数）。此外，所有字符串都是必需的。理想情况下，当用户启用此设置时，他们应该无法应用更改，直到所有字符串都以适当的长度归档。请注意，我不是在谈论最大长度，而是确切的字符数。

如何对用户强制执行这些规则？有没有办法通过内置的首选项控件来做到这一点，还是我必须构建一个自定义片段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:40:59.457

Preference 类具有 onPreferenceChange 侦听器。public abstract boolean onPreferenceChange (Preference preference, Object newValue);

通过从此侦听器返回 false，将不接受新值：

```
public boolean onPreferenceChange(Preference pref, Object newValue) {
  if (pref == myStringPreferenceToValidate) {
      final String newValueStr = (String) newValue;
      if (newValueStr.length() != XX) {
        // don't save it, not the correct length
        return false;
      }
      return true;
   }
} 
```

在此处查看完整文档：http: [//developer.android.com/reference/android/preference/Preference.OnPreferenceChangeListener.html](http://developer.android.com/reference/android/preference/Preference.OnPreferenceChangeListener.html)

# javascript - javascript If 语句不起作用

> ID：15842797
> 
> 赞同：0
> 
> 时间：2013-04-05T20:19:42.673
> 
> 标签：javascript, jquery, if-statement

我试图显示`alert`如果`input`( `inp_val`) 的值不在 between`minvalue`并且`maxvalue`它不起作用，即使值在`minvalue`and之间，它也会显示警报`maxvalue`。

```
function compare(e){
    this_id = e.id.slice(10,15);
    inp_val = e.value;
    minvalue = document.getElementById('min_' + this_id).value;
    maxvalue = document.getElementById('max_' + this_id).value;
    console.log(maxvalue);
    console.log(minvalue);
    console.log(inp_val);
    if(inp_val < minvalue){
        alert('Minimum Value: ' + minvalue + 'Input Value: ' + inp_val);
    }
    if(inp_val > maxvalue){
        alert('Maximum Value: ' + maxvalue + ' Input Value: ' + inp_val);
    }
} 
```

我正在调用该函数与一个比较`onBlur()`：

```
echo '<input class="result_fields" autocomplete="off" onBlur="compare(this)" id="result_inp' . $idc . '" type="text" name="test_res' . $idc . '" />' 
```

我曾尝试在 jQuery 中执行此操作，但同样的错误。Minvalue 和 maxvalue 是`input`类型`hidden`，其值存储在 MySQL 上的数据库中，并使用 php 检索，如下所示：

```
echo '<input type="hidden" value="' . $val_test . '" name="test_name' . $idc . '" id="test_name' . $idc . '" class="testN" />'; 
```

php 变量`$idc`是一个增量函数`$idc++`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:23:50.847

您需要对整数值应用`<`和`>`运算符，以便将字符串值解析为整数然后进行比较。

```
if(parseInt(inp_val,10) < parseInt(minvalue,10)){
        alert('Minimum Value: ' + minvalue + 'Input Value: ' + inp_val);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T20:25:08.977

您需要根据从文本框中获得的值解析整数或浮点数

如果它们是整数：

```
minvalue = document.getElementById('min_' + this_id).value;
maxvalue = document.getElementById('max_' + this_id).value;
minvalue = parseInt(minvalue,10);
maxvalue = parseInt(maxvalue,10); 
```

或者如果它们是浮点数：

```
minvalue = document.getElementById('min_' + this_id).value;
maxvalue = document.getElementById('max_' + this_id).value;
minvalue = parseFloat(minvalue);
maxvalue = parseFloat(maxvalue); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T20:24:09.423

试试这个：

```
if(!(inp_val >= minvalue && inp_val <= maxvalue)){
     alert('Max Val: ' + maxvalue + ' Min Val: ' + minvalue + ' Input Value: ' + inp_val); 
```

# sql - SQL - Visual Studio - 如果相关数据为空，则填充表

> ID：15842799
> 
> 赞同：0
> 
> 时间：2013-04-05T20:19:47.557
> 
> 标签：sql, database, vb.net, visual-studio-2010

在我的数据源中，“属性”链接到“租户”，我想使用 SQL 查询填充表，其中该属性不存在租户。换句话说，“该物业空置的地方”。

类似这样的 SQL 语句是什么？

```
SELECT tblProperties.Type, tblProperties.PropertyID, tblProperties.Street, tblProperties.Unit, tblProperties.City, tblProperties.State, tblProperties.Zip, tblProperties.Description, tblTenant.TenantID
FROM dbo.tblProperties
JOIN tblTenant 
ON tblProperties.PropertyID = tblTenant.PropertyID
WHERE tblTenant.TenantID = '' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:47:15.977

属性和租户都是数据库中的表？

它们是通过交叉引用表连接的还是......？查看表结构会很有帮助。

假设是这种情况，您只需要以下内容：

```
SELECT * FROM Properties 
WHERE PropertyId NOT IN 
   (SELECT PropertyId FROM PropertyTenants) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:18:03.583

尝试这样的操作： SELECT Property.PropertyID, Property.TenantID FROM Property LEFT JOIN Tenant ON Property.[TenantID] = Tenant.[TenantID] WHERE (((Tenant.TenantID) Is Null));

这应该显示哪些属性没有租户，建议您首先尝试仅使用 id 字段，然后稍后添加其他字段以保持查询简单并帮助进行故障排除。如果您有可能让多个租户在多个物业中设有办公室，那么这是一种多对多关系，最好记录在索引表中。

# java - 链接到访问数据库时如何输入相对 URL

> ID：15842807
> 
> 赞同：0
> 
> 时间：2013-04-05T20:20:20.210
> 
> 标签：java, database, ms-access

我正在为学校做一个 Java 项目，我们**必须**使用 MS Access 来存储数据。我已经设法让数据库启动并运行，但是我似乎无法找到如何使到数据库的链接相对。我已经在网上搜索并尝试了我能想到的一切，但似乎没有任何效果。这里有人可以帮忙吗？

这是我现在放置链接的方式：

```
private static final String DATABASE_URL = "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb, *.accdb)};DBQ=C:\\Users\\Badlapje\\Dropbox\\workspace\\FOOP\\Group62RISK\\Risk.accdb"; 
```

然后我调用如下：

```
connection = DriverManager.getConnection(DATABASE_URL); 
```

我想要做的是使链接相对，所以我们团队的所有成员都可以使用相同的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:55:07.477

问题出在 access 数据库文件位置：`C:\\Users\\Badlapje\\Dropbox\\workspace\\FOOP\\Group62RISK\\Risk.accdb`. 只需确保将此文件放在每个人在其计算机中都有的文件夹中，例如`C:\\school-project\\Risk.accdb`.

另一种解决方案可能是将文件设置在源包内的 Java 项目中，然后使用 Java 代码加载文件绝对路径（改编自此[答案](https://stackoverflow.com/a/573715/1065197)）：

```
package edu.proj.res;

public class Main {
    public static String getDatabaseLocation() {
        return Main.class.getClassLoader().getResource("edu/proj/res/database.txt").toString();
    }
    public static String changeToWindowsPath(String path) {
    return path.replace("file:/", "").replaceAll("/", "\\\\");
}
    public static void main(String[] args) {
        System.out.println(changeToWindowsPath(getDatabaseLocation()));
    }
} 
```

有一个项目结构：

```
ConsoleTests
- src
  - edu.proj.res
    + database.txt
    + Main.java 
```

程序输出：

```
C:\workspace\ConsoleTests\bin\edu\proj\res\database.txt 
```

# c# - 如何使用 OleDb 从 CSV 文件中获取列列表？

> ID：15842808
> 
> 赞同：0
> 
> 时间：2013-04-05T20:20:32.143
> 
> 标签：c#, csv, oledb

我可以轻松地从这样的 excel 文件中获取列列表：

```
columns = connection.GetOleDbSchemaTable(OleDbSchemaGuid.Columns, new string[] { null, null, tableName, null }); 
```

我想对 CSV 文件做同样的事情，但我不确定需要哪些参数。我到 CSV 文件的连接字符串是：

```
"Provider=Microsoft.ACE.OLEDB.12.0; Data Source={0}; Extended Properties='text; FMT=Delimited(,); ReadOnly={1}; HDR={2}'".FormatString(directory, readOnly, (firstLineIsColumnHeaders ? "yes" : "no")) 
```

结果（在这种情况下）类似于：

```
Provider=Microsoft.ACE.OLEDB.12.0; Data Source=C:\Windows\Temp\sadf83.tmp; Extended Properties='text; FMT=Delimited(,); ReadOnly=true; HDR=yes' 
```

但是当我尝试时`GetOleDbSchemaTable`，命令返回正常但给我一个空的`DataTable`；当我尝试时也是如此`GetSchema("Columns")`。

# actionscript-3 - 根据 mc 之间的距离调整大小

> ID：15842813
> 
> 赞同：0
> 
> 时间：2013-04-05T20:20:54.430
> 
> 标签：actionscript-3

我希望这个问题以前没有被问太多。当我搜索时，我只会收到与重新缩放到窗口大小有关的问题。

现在我的问题。我让一艘太空飞船向另一艘飞船发射光束。我希望光束显示一段时间，并希望它“架起”两艘船。换句话说，我希望梁在两艘船之间扩展其宽度。

我尝试使用 1 像素宽和高（并对齐左边缘）的点影片剪辑来做到这一点。我尝试使用以下代码调整它的大小：（目标是要开火的船，所有者是开火的船）

```
dist.vx = target.x - owner.x;
dist.vy = target.y - owner.y;
dist.dist = Math.sqrt(dist.vx*dist.vx + dist.vy*dist.vy);

width = dist.dist;

x = owner.x;
y = owner.y;
rotation = Math.atan2(target.y-y, target.x-x)*180/Math.PI; 
```

这不能按预期工作，因为 1) dot 在另一个维度上也变得更大 - 我怎样才能“关闭”这种行为？和 2) 有时它似乎变得很宽 - 但仅限于某些角度......

关于解决高度/宽度缩放或以其他方式实现相同效果的任何建议？

（我是编码和闪存的新手。）谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:25:59.763

通过调整点的大小，您将拥有一个矩形......

您可以动态创建一个覆盖两艘船的精灵，然后移动到一**艘船**的命中点，然后线**到**另一艘船……您根本不需要计算距离。您需要做的是小心放置精灵。这样您就可以通过简单的数学计算相对击球点。

假设您有 mc **space** contining mc **ship1**和 mc **ship2**，并且船上的生命值坐标命名为**hx**，**hy**并且您将使用 sprite **s**，计算如下。

```
// calculate hit points relative to mc space
var s1HX:int = ship1.x + ship1.hx, 
    s1HY:int = ship1.y + ship1.hy,
    s2HX:int = ship2.x + ship2.hx,
    s2HY:int = ship2.y + ship2.hy,
// sprite relative moveTo lineTo coords will be these.
    mX: int, mY: int,
    lX: int, lY: int;

// top left of sprite will be minimum of the hit coords.   
s.x = (s1HX <= s2HX)? s1HX : s2HX;
s.y = (s1HY <= s2HY)? s1HY : s2HY;

// now we can get sprite relative moveTo lineTo coordinates:
mX = s1HX - s.x;  
mY = s1HY - s.y;
lX = s2HX - s.x;
lY = s2HY - s.y; 
```

剩下的就是使用这些带有花哨的线条样式等的实现......

创建一个新的精灵：

```
var s:Sprite = new Sprite(); 
```

在 mc 空间中添加/删除它：

```
space.addChild(s); 
space.removeChild(s); 
```

对于图形，使用 sprite 的图形对象。

```
s.graphics 
```

要设置线条样式，您可以使用：

```
s.graphics.lineStyle(...) , 
s.graphics.lineBitmapStyle(...),
s.graphics.lineGradientStyle(...) 
```

功能，请阅读使用手册。

设置线条样式以绘制线条后，使用：

```
s.graphics.moveTo(mX,mY);
s.graphics.lineTo(lX,lY); 
```

对于脉动效果，您必须做一些更复杂的事情，例如使用补间类，您可以在此处阅读：http: [//help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/transitions/Tween。 html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/transitions/Tween.html)

请注意：精灵不是复杂的魔法，它们就像 mc，但它们没有时间线等。

当宽度或高度以编程方式改变时，精灵会尝试缩放。所以不要触摸它们，moveTo lineTo 会自动设置精灵的大小......

# ruby-on-rails - 如何在 Rails 中使用 PostGIS 功能？

> ID：15842818
> 
> 赞同：3
> 
> 时间：2013-04-05T20:21:05.593
> 
> 标签：ruby-on-rails, ruby, postgresql, postgis

我想运行的查询是：

```
SELECT zcta.geoid10, ST_AsGeoJSON(ST_simplify(zcta.geom,500)) FROM zcta WHERE zcta.geoid10 = '90210' 
```

然而，当我输入这个时，在 Rails 控制台中：

```
testquery = "SELECT zcta.geoid10, ST_AsGeoJSON(ST_simplify(zcta.geom,500)) FROM zcta WHERE zcta.geoid10 = '90210'"
Zcta.find_by_sql testquery 
```

我得到以下返回：

```
 => [#<Zcta >] 
```

如果我做一个基本查询来询问任何列的结果，我会得到我期望的响应。这只发生在 PostGIS 函数中。知道该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:32:11.270

别名计算列，您将获得一个添加到返回对象的方法。

```
Zcta.
  select("*, ST_AsGeoJSON(ST_simplify(geom,500)) as my_geo").
  where(geoid10: '90210').each do |result|
    puts result.my_geo
  end 
```

# html - 背景图像未覆盖在平板电脑上

> ID：15842819
> 
> 赞同：0
> 
> 时间：2013-04-05T20:21:07.600
> 
> 标签：html, css, background-image

当我在平板电脑上访问我的网站时，背景在页脚之后停止显示？但是，当我减小窗口大小时，它在我的桌面上的行为并不像这样。

这是网站：[http ://www3.carleton.ca/clubs/sissa/html5/video.html](http://www3.carleton.ca/clubs/sissa/html5/video.html)

CSS：

```
body{
    width: 100%; /*always specify this when using flexBox*/ 
    height:100%;
    display: -webkit-box;
    display: -moz-box;
    display: box;
    text-align:center;
    -webkit-box-pack:center; /*way of centering the website*/
    -moz-box-pack:center;
    box-pack:center;
    background:black;
    background:url('images/bg/bg14.jpg') no-repeat center center fixed;
    -webkit-background-size: cover !important;
    -moz-background-size: cover !important;
    background-size: cover !important;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 13px;
} 
```

这是我的nexus 7上的样子： ![在此处输入图像描述](https://i.stack.imgur.com/y3Cd2.png)

当我在浏览器中使用不同的用户代理时，它会覆盖整个背景： ![在此处输入图像描述](https://i.stack.imgur.com/K6CdL.png)

HTML：

```
<!--Site Main Body--> 
<div id="wrapper">
    <section id="body_div">

    </section>

    <footer id="footer">
        &copy; Copyright  by SimKessy
    </footer>

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:23:21.267

你可以试试

```
body {
    background-size: 100% 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:23:20.923

不确定这是否会有所帮助，而且我没有机会对其进行测试，但您可以尝试将背景属性添加到`html`元素而不是`body`元素。

我删除了`!important`，但如果需要，您可以将其添加回来。

```
html {
    background:black;
    background:url('images/bg/bg14.jpg') no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    background-size: cover;
} 
```

# html - 什么是显示空的解决方法 contenteditable div中的标签？

> ID：15842826
> 
> 赞同：0
> 
> 时间：2013-04-05T20:21:33.387
> 
> 标签：html, internet-explorer, contenteditable, nicedit

这仅适用于 Internet Explorer。
我有一个内容可编辑的 div，我的用户可以在其中输入丰富的内容（nicEditor）。

我具有使用预定义模板设置 div 的 html 的功能。理想情况下，我希望我的模板像这样。

```
<p><b>My Heading1</b></p>
<p></p>
<p></p>
<p><b>My Heading2</b></p>
<p></p>
<p></p>
<p><b>My Heading3</b></p>
<p></p>
<p></p> 
```

它呈现在哪里

> **我的 Heading1****空白行空白行***我的*
> *Heading2空白行**空白行***我的 Heading3 空白**
> *行**空白**行*

 *******然而它呈现这样。

> **我**
> **的标题1我的标题2**
> **我的标题3**

我尝试过使用这些，但所有这些都存在问题。
`<p>&nbsp;</p>`, `<p><span style="display:none;">&nbsp;</span></p>`- 每行总是一个空格。
`<p><br/></p>`- 当用户开始输入时，会出现一个新行。
`<br/>`, `<span><br/></span>`- 适用于间距，除非用户使用插入列表命令之一。所有内容都放在一个列表项下。

我该怎么做才能让我的`<p>`标签显示在我的 div 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:12:59.583

我在使用`<P>&#8203;</P>`零宽度空间字符方面取得了成功。但是，这使得如果用户希望删除一行，他们必须按两次退格键。我将提出一个新问题来解决这个问题。
[这里](https://stackoverflow.com/questions/15886006/how-can-i-detect-when-character-to-be-deleted-is-zero-width-space-and-execute-de)*******

# asp.net-mvc-3 - ASP.NET MVC 3 中是否可以有多个依赖解析器？

> ID：15842827
> 
> 赞同：4
> 
> 时间：2013-04-05T20:21:34.293
> 
> 标签：asp.net-mvc-3, dependency-injection

ASP.NET MVC 3 中是否可以有多个依赖解析器（类似于 ModelBinders 和 Providers 的情况）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T21:57:48.513

在一种情况下，我可以想到拥有多个“容器”或“解析器”的地方是有用的，那就是多租户。通过多租户，您可以在同一个 Web 应用程序中运行多个客户（组织，拥有自己的用户集），并根据登录名、请求信息或域信息动态切换。

尽管如此，`DependencyResolver.Current`正如 Darin 所指出的那样，是静态的，因此您无能为力（或应该对此做些什么）。但是，您可以将多个容器隐藏在单个`IDependencyResolver`抽象后面，并根据某些标准返回一个实现。它可能看起来像这样：

```
public class MultiTenantDependencyResolver 
    : IDependencyResolver
{
    Func<int> tenantIdSelector,;
    IDictionary<int, IDependencyResolver> tenantResolvers;

    public MultiTenantDependencyResolver(
        Func<int> tenantIdSelector,
        IDictionary<int, IDependencyResolver> tenantResolvers)
    {
        this.tenantIdSelector = tenantIdSelector;
        this.tenantResolvers= tenantResolvers;
    }

    private IDependencyResolver CurrentResolver
    { 
        get { return this.tenantResolvers[tenantIdSelector()]; }
    }

    public object GetService(Type serviceType)
    {
        return this.CurrentResolver.GetService(serviceType);
    }

    public IEnumerable<object> GetServices(Type serviceType)
    {
        return this.CurrentResolver.GetAllInstances(serviceType);
    }
} 
```

以下代码片段显示了 this 的用法`MultiTenantDependencyResolver`：

```
var tenantResolvers = new Dictionary<int, IDependencyResolver>
{
    { Tenants.AbcId, BuildResolver(RegisterForTenantAbc) },
    { Tenants.KlmId, BuildResolver(RegisterForTenantKlm) },
    { Tenants.XyzId, BuildResolver(RegisterForTenantXyz) },
};

var multiTenantResolver = new MultiTenantResolver(
    () => GetTenantIdFromUrl(), tenantResolvers);

DependencyResolver.SetResolver(multiTenantResolver);

private static int GetTenantIdFromUrl()
{
    // TODO: return tenant id
}

private static IDependencyResolver BuildResolver(
    Action<IKernel> tenantSpecificRegistrations)
{
    var kernel = new Kernel();

    // TODO: Tenant agnostic registrations. For instance
    kernel.Bind<ITimeProvider>().To<SystemTimeProvider>();

    tenantSpecificRegistrations(kernel);

    return new NinjectDependencyResolver(kernel);
}

private static void RegisterForTenantAbc(IKernel kernel)
{
    // TODO: regisrations for ABC tenant. For instance
    kernel.Bind<ILogger>().To<AbcTenantLogger>();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T21:09:48.380

> ASP.NET MVC 3 中是否可以有多个依赖解析器（类似于 ModelBinders 和 Providers 的情况）？

不，这是不可能的。这[`DependencyResolver.Current`](http://msdn.microsoft.com/en-us/library/system.web.mvc.dependencyresolver.current.aspx)是一个静态属性，只能分配一个解析器。据说在应用程序中拥有多个依赖解析器几乎没有任何意义。这个想法是所有依赖项都由依赖注入框架管理，例如 Unity、Ninject 或 StructureMap。然后，您将拥有一个自定义依赖关系解析器，包装您选择的 DI 框架，ASP.NET MVC 将使用该框架在执行管道的各种对象中注入依赖关系。

您正在将其与问题中的模型绑定器进行比较，但这种比较是不公平的，因为模型绑定器与它旨在绑定的特定类型相关。基本上，您可以为多个视图模型拥有许多自定义模型绑定器。

您似乎在您的问题中也提到了一些*提供者*，但不幸的是，您并没有非常具体，因此对此发表评论有点困难。

# cmake - 有没有一种在 CMake 的标准输出上显示“干净”文本的好方法

> ID：15842828
> 
> 赞同：3
> 
> 时间：2013-04-05T20:21:35.070
> 
> 标签：cmake

Cmake 版本 2.8.10.2，操作系统 centos 6.3

我们正在尝试从我们的 cmake 文件中在标准输出上获得“干净”的文本显示。也就是说，我们想要的文本，没有前缀。到目前为止，我已经尝试了这些变化

这转到 stderr （让我感到惊讶）：

```
MESSAGE("my text") 
```

这将转到标准输出，但在每行前面加上'--'：

```
MESSAGE(STATUS "my text") 
```

这种方法有效，但副作用很奇怪，对我们来说是不受欢迎的：

```
FILE(WRITE /dev/stdout "my text") 
```

以上内容转到标准输出，但如果 cmake 本身的输出被重定向到文件（cmake > 文件），则中断，尽管如果您首先通过管道输出标准输出（cmake | cat > 文件）也可以，但这很hacky，意味着我们必须告诉每个人关于不会发生的解决方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T20:34:10.207

您可以提供以下功能：

```
function(CleanMessage)
  execute_process(COMMAND ${CMAKE_COMMAND} -E echo "${ARGN}")
endfunction() 
```

并像这样使用它：

```
CleanMessage("Clean text") 
```

如果您想将船推出，您甚至可以扩展内置`message`选项以包括`CLEAN`一个：

```
function(message MessageType)
  if(${ARGV0} STREQUAL "CLEAN")
    execute_process(COMMAND ${CMAKE_COMMAND} -E echo "${ARGN}")
  else()
    _message(${MessageType} "${ARGN}")
  endif()
endfunction() 
```

并像这样使用它：

```
message(STATUS "Incidental information")
message(CLEAN "Clean Incidental information")
message(WARNING "CMake Warning, continue processing") 
```

在您的顶级 CMakeLists.txt 中定义一次是安全的。但是，如果它被定义在例如一个实用程序文件中，并且可能被多次包含，它将导致无限递归。为了避免这种情况，在定义函数的实用程序文件的开头，添加：

```
if(OverloadMessageIncluded)
  return()
endif()
set(OverloadMessageIncluded TRUE) 
```

这实际上是标头保护的 CMake 版本。

# extjs - 带有来自加载存储的嵌套数据的网格行

> ID：15842831
> 
> 赞同：2
> 
> 时间：2013-04-05T20:21:42.433
> 
> 标签：extjs, extjs4

我有一个加载了参数的数据视图。我在模板中呈现这些数据。我正在尝试使用相同的数据，其中存在要呈现到网格的嵌套项。

数据如下所示：

```
{
    "myJson": {
        "name": "abc",
        "type": "faulty",
        "notes": [
            {
                "date": "01-01-1970",
                "note": "test note"
            },
            {
                "date": "01-02-1970",
                "note": "test note 2"
            }
        ]
    }
} 
```

店铺：

```
proxy: {
                type: 'ajax',
                url: '/api/detail/',
                reader: {
                    type: 'json',
                    root: 'myJson'
                }
            } 
```

模型：

```
 {
        name:'name',
    },
    {
        name:'type',
    },
    {
        name:'notes',
        mapping:'notes'
    }, 
```

模板：

```
{name} - {type} 
```

这一切都有效。我想做的是使用`notes`块在网格中显示。问题是我无法让它阅读笔记组。

```
var notesListView = new Ext.list.ListView({
    store: 'myStore',
    multiSelect: false,
    width:'100%',
    id:'notesList',
    columns: [{
        header: 'Date',
        width: 75,
        dataIndex: 'date'
    },{
        header: 'Note',
        width: 150,
        dataIndex: 'note',
    }]
}); 
```

甚至有可能做到这一点吗？还是我需要创建一个新的商店和模型来在网格中使用这组数据？

例如，我尝试在两个模型中映射到 notes.date

```
name:'note_date',
mapping:'notes.date' 
```

在网格本身

```
dataIndex:'notes.date' 
```

两者都不起作用。

我也尝试过使用`renderer`，但这也不起作用，因为它是一个数组

```
renderer:function(value, metaData, record, rowIndex, colIndex, store){
    var value = value.date;//won't work; it needs an index a la value[0].date
    return value;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T02:31:59.497

您可以使用您收到的相同数据创建一个嵌套模型。会是这样

```
Ext.define("JsonModel", {
  extend: 'Ext.data.Model',
  fields: ['name','type'],
  hasMany: [{
      model: 'Note',
      name: 'notes'
  }]
});

Ext.define("Note", {
  extend: 'Ext.data.Model',
  fields: [
      'date',
      'note']
}); 
```

这样你就可以像这样访问任何给定记录的孩子

```
var jsonRecordChildren = jsronRecord.notes() 
```

我刚刚创建的变量 jsonRecordChildren 属于**Store**类型，因此您可以轻松地将其分配给网格的属性存储。

```
Ext.create('Ext.grid.Panel', {
  store: selectedRecord.notes(),
  columns: [
      { text: 'Date',  dataIndex: 'date' },
      { text: 'Note', dataIndex: 'note'}
  ],
  renderTo: Ext.getBody()
}); 
```

[http://jsfiddle.net/alexrom7/rF8mt/2/](http://jsfiddle.net/alexrom7/rF8mt/2/)

# python - 交替排序列

> ID：15842843
> 
> 赞同：0
> 
> 时间：2013-04-05T20:22:20.630
> 
> 标签：python, django, sorting, django-orm

遇到一个奇怪的要求...

假设我有这样的模型：

```
class MyModel(models.Model):
    priority = models.IntegerField()
    time = models.DateTimeField() 
```

假设我们有：

```
by_time = MyModel.objects.order_by('time')
by_prio = MyModel.objects.order_by('priority') 
```

我需要以交替的排序顺序呈现这些项目。例如，按时间排序的 1 个项目，按优先级排序的 1 个，按时间排序的下一个项目，依此类推……每个项目在列表中都需要是唯一的（不能只是将两个列表连接成两倍长的列表）。

我怎样才能实现这样的事情并保持相对高效？

*编辑：* 一些注意事项：

1.  结束列表中的项目必须是*唯一的*，因此我不能只合并两个列表。
2.  如果我合并列表并随后删除重复项，则排序顺序将被破坏（例如，相同顺序的 2 个相邻值）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:37:36.723

您可以通过这种方式组合这两个列表：

```
>>> result = [None]*(len(by_time)+len(by_prio))
>>> result[::2] = by_time
>>> result[1::2] = by_prio
>>> result = [result.pop(i) for i in range(len(result))[::-1] if result.count(result[i]) > 1 ] 
```

# session - 使用 ServiceStack SessionFeature 时检测会话开始的最佳方法是什么（类似于 Global.ashx 的 Session_Start）？

> ID：15842846
> 
> 赞同：2
> 
> 时间：2013-04-05T20:22:32.370
> 
> 标签：session, servicestack, session-state

我在服务堆栈中启用了会话支持，例如：

```
container.Register<IRedisClientsManager>(c => container.Resolve<PooledRedisClientManager>());
container.Register<ICacheClient>(c => c.Resolve<IRedisClientsManager>().GetCacheClient());
container.Register<ISessionFactory>(c => new SessionFactory(c.Resolve<ICacheClient>()));

//RE: https://github.com/ServiceStack/ServiceStack/wiki/Sessions
Plugins.Add(new SessionFeature()); 
```

我看到在访问该站点时设置了 ss-id 和 ss-pidd cookie，但是我想知道会话何时开始（即来自该用户的第一个请求），以便我可以捕获传入的引荐来源网址。

使用传统的 asp.net 会话，我会在 Global 中使用 Session_Start，但是在使用 SS 会话时这不会触发我。

使用 ServiceStack 时是否有一种检测此会话启动事件的好方法？我没有在我的在线查询或[ServiceStack Sessions wiki](https://github.com/ServiceStack/ServiceStack/wiki/Sessions)上找到任何参考资料。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:27:48.343

ServiceStack 的 Sessions 功能中目前没有“Session Started”事件，但[IAuthSession](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Auth/IAuthSession.cs#L30-L32)上有一些事件可能有用，例如：

```
public interface IAuthSession
{
    ...
    void OnRegistered(IServiceBase registrationService);
    void OnLogout(IServiceBase authService);
    void OnAuthenticated(IServiceBase authService, IAuthSession session, 
         IOAuthTokens tokens, Dictionary<string, string> authInfo);
} 
```

如果您仍然希望看到 OnSessionStarted 事件请求它作为[ServiceStack 的 GitHub 问题](https://github.com/ServiceStack/ServiceStack/issues?direction=desc&sort=created&state=open)中的一项功能（并包括您的用例），那么我们可以跟踪它。

# php - 警告：PDOStatement::execute(): 消息：字符串后的未闭合引号

> ID：15842848
> 
> 赞同：0
> 
> 时间：2013-04-05T20:22:33.210
> 
> 标签：php, sql-server, ubuntu

如何清理数据以使其不会导致任何错误？我正在运行 ubuntu、php 5.3 并连接到 mssql。

这是我的代码：

```
 $body = $this->get_part($imap, $b, "TEXT/HTML");
            if($body == "")
            {
                $body = $this->get_part($imap, $b, "TEXT/PLAIN");
            }
            $header = imap_headerinfo($imap, $b);
            $subject = $header->subject;
            $fromaddress = $header->fromaddress;
            $body = str_replace("'", "''", $body);
            //$body = str_replace("\"", "\"\"", $body);
            /////////////////////////////
            $data = array('content'=>$body);
            $query = $PDO->prepare('insert into [tbl_test] (content) values (:content)');
            $query->execute($data);
            break; 
```

# javascript - JavaScript - 声明具有特征的函数

> ID：15842850
> 
> 赞同：0
> 
> 时间：2013-04-05T20:22:39.947
> 
> 标签：javascript, function, object

我是 JS 新手，研究了一些来自网络应用程序的代码。谁能告诉我这两个声明之间的区别，它们都是具有特色功能的对象吗？什么时候使用哪个声明？

a) 自我唤起功能：

```
 namespace.myCanvas= (function(){

      var canvas = document.getElementById('canvas');        
      var ctx = canvas.getContext('2d');
      var foo = function(...){...}

      return {
        canvas: canvas,
        context: context,
        foo: foo
      }
    })(); 
```

b）一个可以提供有关对象信息的函数，我猜：

```
function makeRectangle(xPos, yPos, w, h) {
  this.xPos= xPos;
  this.yPos= yPos;
  this.w= w;
  this.h= h;

  this.make= function() {

   ctx.fillStyle = this.fill;
   ctx.fillRect(this.xPos, this.yPos, this.w, this.h);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:34:10.753

当你做这样的事情时：

```
(function(){ 
return {}
})(); 
```

您正在创建一个[自调用函数](http://sarfraznawaz.wordpress.com/2012/01/26/javascript-self-invoking-functions/)，它基本上是一个通过 () 创建并执行的函数。好的，所以您的 A 函数是自调用的并返回一个包含其他一些对象的对象。所以你的变量 namespace.myCanvas 将是函数返回的对象。

并且您的 B 函数是一个[Javascript Constructor](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/constructor#Examples)，（当与 new 关键字一起使用时）将返回一个具有**xPos**、**yPos**、**w**和**h**属性和一个**make**方法的对象。

希望能帮助到你

**编辑** [此链接可以帮助您..](https://stackoverflow.com/questions/1013385/what-is-the-difference-between-a-function-expression-vs-declaration-in-javascrip)如果您对函数声明和函数表达式差异有疑问

# c# - 从 Action 委托中获取方法名称

> ID：15842851
> 
> 赞同：4
> 
> 时间：2013-04-05T20:22:46.050
> 
> 标签：c#, delegates, methodinfo

我正在尝试将方法名称传递给 Action 委托。这就是我所拥有的：

```
private static void DoAction(params Action<Group>[] actions)
{
    foreach (Action<Group> action in actions)
    {
        Console.WriteLine(action.Method.Name);
    }
} 
```

总的来说，这就是它的调用方式：

```
DoAction(y => y.DoBar(), z => z.DoFoo()); 
```

执行 DoAction() 方法后，我希望在屏幕上看到“DoFoo”和“DoBar”，但我看到的是 <`Main>b__0`和`<Main>b__1`. 我只是想知道是否有办法从动作委托中获取目标方法的实际名称？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T20:37:00.547

您可以将输入类型更改为an `Expression`，然后查看表达式是否为方法调用：

```
private static void DoAction(params Expression<Action<Group>>[] actions)
{
    foreach (var exp in actions)
    {
        var method = exp.Body as MethodCallExpression;
        if(method != null)
            Console.WriteLine(method.Method.Name);

        // similar method for properties
        var member = exp.Body as MemberExpression;
        if (member != null)
            Console.WriteLine(member.Member);

        // execute the Action
        Action<Group> act = exp.Compile();

        Group g = new Group();  // create a Group to act on
        act(g);  // perform the action

    }

} 
```

# c# - c#在文本文件中搜索特定字符串并获取文件路径

> ID：15842852
> 
> 赞同：0
> 
> 时间：2013-04-05T20:22:59.167
> 
> 标签：c#, winforms

在 Windows 窗体中使用 c# 我需要在目录`"C:\XML\Outbound"`中搜索包含订单号的文件`3860457`并返回包含订单号的文件的路径，以便我可以打开文件并在 RickTextBox 中向用户显示内容。

最终用户将拥有订单号，但不知道哪个文件包含该订单号，这就是为什么我需要搜索所有文件直到找到包含订单号的文件并返回路径（例如`"C:\XML\Outbound\some_file_name_123.txt"`）

我对 c# 有点陌生，所以我什至不确定从哪里开始。这有什么方向吗？

抱歉，订单号在文件中，所以我需要在每个文件内容中搜索订单号，一旦找到包含订单号的文件，就返回该文件的路径。订单号不是文件名的一部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T20:31:15.070

Straight answer:

```
public string GetFileName(string search){ 
    List<string> paths = Directory.GetFiles(@"C:\XML\Outbond","*.txt",SearchOption.AllDirectories).ToList();
    string path = paths.FirstOrDefault(p=>File.ReadAllLines(p).Any(line=>line.IndexOf(search)>=0));
    return path;    
} 
```

Not-so straight answer:

Even though the above function will give you the path for given string (some handling of errors and edge cases may be nice) it will be terribly slow, especially if you have lots of files. If that's the case you need to tell us more about your environment because chances are you're doing it wrong (:

# vb.net - 在表单之间传递变量 Visual Basic 2012

> ID：15842858
> 
> 赞同：0
> 
> 时间：2013-04-05T20:23:25.720
> 
> 标签：vb.net, variables

当谈到课程、潜艇和类似的东西时，我是个菜鸟。我正在 VB 2012 中制作一个程序，它将在您的 USB 密钥上创建一个便携式版本的 Minecraft。

这是一些代码（“port_cr”）：

```
 'Get %appdata%
    Dim appdata As String = Environ("USERPROFILE") & "\AppData\roaming\.minecraft"
    'Get the path
    port_mc_getPath.ShowDialog()
    Dim save_mc As String = port_mc_getPath.SelectedPath
    'Copy everything
    My.Computer.FileSystem.CreateDirectory(save_mc & "\Data")
    My.Computer.FileSystem.CreateDirectory(save_mc & "\Bin")
    My.Computer.FileSystem.CreateDirectory(save_mc & "\Data\.minecraft")
    My.Computer.FileSystem.CopyDirectory(appdata, save_mc & "\Data\.minecraft", True)
    'OPEN ANOTHER FORM TO CHOOSE THE LAUNCHER YOU WANT TO DOWNLOAD
    chooseLauncher.Show() 
```

“chooseLauncher”是一个带有一些按钮的表单，可以将适当的文件下载到“port_cr”表单中指定的路径，这是我不知道该怎么做的。如果有人能简单地告诉我如何做到这一点，我将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:32:25.407

在表单上创建公共属性`chooseLauncher`并将它们设置为显示表单之前的值。例如，如果`chooseLauncher`表单有一个名为 的公共字符串属性`SaveMc`，您可以这样做：

```
chooseLauncher.SaveMc = save_mc
chooseLauncher.Show() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T20:40:11.213

表单只是一些花哨的类，它们具有一些与之相关的视觉行为/渲染。在 OOP 中，您可以像对待任何类（无论是自定义的还是本机的）一样对待它们。

让我们在 .NET 框架中使用一个简单的本地类并从那里抽象出来。如何将数据传递给 DataTable 类？

```
'create a new instance of that class
Dim dt as New DataTable
'pass in the name of the table
dt.Name = "AnyName" 
```

我可以将该信息传递给数据表类，因为它已经有一个可以存储名称信息的属性。

现在在创建自己的类时考虑这一点。假设您有一个名为 ChooseLauncher 的表单。让我们给它一些可以在内部使用和在外部添加的属性。也许是一个名为 FilePath 的属性

```
Class ChooseLauncher : Inherits Form

    Public FilePath As String

End Class 
```

现在，当您创建 ChooseLauncher 类时。您所要做的就是从您创建它的任何地方设置公开可用的属性。

```
Dim myForm As New ChooseLauncher
myForm.FilePath = "NewValue"
myForm.Show() 
```

# javascript - jQuery Masonry 在某些宽度处随机断裂

> ID：15842859
> 
> 赞同：0
> 
> 时间：2013-04-05T20:23:34.973
> 
> 标签：javascript, jquery, jquery-masonry

我正在使用 jQuery Masonry 开发响应式照片网格。我正在使用一个简单的 CSS 比例网格，一切正常（除了浮动不能垂直工作的事实）。我添加砖石的那一刻，这个布局就中断了。

```
$(document).ready(function() {

    // select container
    var $work   = $(".work");

    // set columns based on window width
    var columns = 3,
        setColumns = function() { columns = $(window).width() > 768 ? 3 : 2; };

    $work.imagesLoaded(function() {
        $work.masonry({
            itemSelector: '.project',
            columnWidth: function(containerWidth) {
                return containerWidth / columns;
            }
        });

        $(window).on('resize', function() {
                    // set columns now that the browser width is different.
            setColumns();
            $work.masonry('reload');
        }).resize();
    });
}); 
```

可以在[此处](http://jsfiddle.net/Exh9N/3/)找到演示该问题的 jsfiddle 。

在 768px 断点之上，一切正常（尽管有很多闪烁），但在断点之下，应该是两列的内容只能合二为一。

我尝试过的修复：

*   将 columnWidth 设置为 1 可以在 Safari 和 Firefox 中修复它，但在 Chrome 中没有。
*   将其中一列的宽度设置为 47.5% 而不是 49%（占 2% 的边距），但是我的网格在视觉上没有对齐。

我怀疑这与宽度和边距略微超过有关，但我已经彻底检查了我的代码，这些数字加起来应该是一个不错的甚至 100% 的宽度。只有当砌体进来时，它才会破裂。

想法？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:01:39.273

将边距设置为 0，砌体应将它们全部组合在一起。这是一个演示：

[http://jsfiddle.net/uMgwm/1](http://jsfiddle.net/uMgwm/1)

```
/* basic grid structure */
 .half, .third, .two-third, .quarter {
    float: left;
    margin: 0;
}
    .two-third + .third, .third:nth-child(3n+0), .quarter:nth-child(4n+0) {
        margin: 0 0 0 0;
    }
    .half:nth-child(2n+0), .third:nth-child(3n+0), .quarter:nth-child(3n+0) {
        margin-right: 0;
    } 
```

# emacs - 键盘加速滚动

> ID：15842862
> 
> 赞同：1
> 
> 时间：2013-04-05T20:23:48.487
> 
> 标签：emacs

可以轻松地映射一些键以向上滚动。

```
(defun up1()
  (interactive)
  (scroll-up 1))
(defun up2()
  (interactive)
  (scroll-up 2))
(global-set-key "\M-]" 'up2) 
```

我正在寻找以下行为。第一批卷轴将调用 up1()，随后的卷轴将调用 up2()。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:52:33.130

这个怎么样：

```
(setq my-scroll-counter 0)
(setq my-scroll-limit 5)

(defun up1()
  (interactive)
  (if (eq last-command this-command)
      (incf my-scroll-counter)
    (setq my-scroll-counter 0))
  (if (> my-scroll-counter my-scroll-limit) 
      (scroll-up 2)
    (scroll-up 1)))

(global-set-key "\M-]" 'up1) 
```

如果你想要一些更高级的东西，你可以根据你重复命令的次数来动态计算你的滚动步长：

```
(setq my-scroll-counter 0)
(setq my-maximum-scroll 20)
(setq my-scroll-acceleration 4)

(defun up1()
  (interactive)
  (if (eq last-command this-command)
      (incf my-scroll-counter)
    (setq my-scroll-counter 0))
  (scroll-up (min 
               (+ 1 (/ my-scroll-counter my-scroll-acceleration)) 
               my-maximum-scroll)))

(global-set-key "\M-]" 'up1) 
```

# github - 如何删除 GitHub 中的单个文件？

> ID：15842865
> 
> 赞同：2
> 
> 时间：2013-04-05T20:23:50.183
> 
> 标签：github

我不小心从本地存储库中添加并提交了一个文件，我不想将它添加到我的 GitHub 项目的存储库中。我可以使用终端删除此文件还是可以在线手动删除它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T20:31:12.480

从命令行您可以执行以下操作：

```
git rm <file> - remove file locally and marks it for deletion
git commit -m"your message" - commit file to local repo
git push origin master - push the change to github. 
```

# python - 只绘制 matplotlib 子图中的图例

> ID：15842870
> 
> 赞同：2
> 
> 时间：2013-04-05T20:24:00.223
> 
> 标签：python, matplotlib, legend

我有一堆子图，其中一个我想包含一个图例（其他每个子图中都有相同数量的句柄和标签，所以我只想要一个主图例）。

```
|plot|gap1|plot|
|plot|plot|plot|
|plot|gap2|plot| 
```

现在gap1在哪里，我想放我的高手传奇。我在第一个子图中绘制了相同的图。

```
line1 = ax2.plot(x1,y2,'--',color='b',linewidth=2)
line2 = ax2.plot(x1,y2,'-',color='r')
ax2.legend((line1,line2),('line1','line2'),numpoints=1,loc='center')
l = line1[0]
l.remove()
l = line2[0]
l.remove()
ax2.set_axis_off() 
```

但这似乎不起作用。

现在我只想将图例放在 ax2 子图的中心（在 gap1 中）并删除*除中心的图例之外的**所有内容*（轴、线、刻度等）。谢谢。

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:32:37.657

```
fig, axes_lst = plt.subplots(2, 1)

ln_1, ln_2 = axes_lst[0].plot(range(5), range(5), range(5), np.arange(5) ** 2)
axes_lst[1].legend((ln_1, ln_2), ('lin', 'quad'), loc='center')
plt.draw() 
```

调用图例中使用的句柄不必在`axes`你调用的那个`legend`。

![在此处输入图像描述](https://i.stack.imgur.com/6qVBn.png)*

# c# - System.Web.Mvc.UrlHelper.Content("~/Assets/Images/" + String.Format(fileName)); 在 IE 10 中不一样

> ID：15842876
> 
> 赞同：1
> 
> 时间：2013-04-05T20:24:21.590
> 
> 标签：c#, asp.net-mvc, internet-explorer-10

我们有一个辅助方法可以让我们轻松访问 Assets/Images 文件夹中的文件

出于一个奇怪的原因，那里有一个 html 文件，本质上是这样引用的

```
System.Web.Mvc.UrlHelper helper = new UrlHelper();
return helper.Content("~/Assets/Images/" + String.Format("file.htm")); 
```

在即 7、8 和 9 中，这正确解析为 assets/images 文件夹。

IT 组刚开始将盒子升级到 IE10，现在在 IE10（我们从未测试过）上运行时，调用代码时出现此错误。

> Could not find a part of the path 'C:\IIS Web Services & Apps\Application(F(7-lOGKlgR_6Zt3F_ngapPUyhSkzYn6260oMMNwpok0HNB2VLinboD_2zHXiYCJUFPQ2ADaQP14ShDe5_KiRx9J5JtNOL-9UQCLQoDBjhz1Pj6pSJjZcHQ2dg8lBHadwHxlxJjVbxtBeLL125sIZaIafjFzg4g-ZX2Kr6C72TTd7RQFL70))\Assets\Images\file.htm'.

为了让它变得更好，它只发生在生产服务器上，而不是我的开发机器上。

有没有人有任何解决方法的想法？我们应该寻找任何其他大的 IE 10 陷阱吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T22:24:45.087

如果您的浏览器不接受 cookie 或打开无 cookie 会话，则您引用的路径变量中的那个大而丑陋的字符串出现在 IIS/.NET 将默认放入 URL 的会话 ID 中。

我会检查

*   IIS 和您的 web.config 中有关 SessionState 和 FormsAuthentication 以及使用 cookie 的项目。

*   IE 10 安全设置：它可能在您的开发机器上运行，因为“localhost”将位于受信任的站点中，并且很可能会允许来自那里的 cookie。

# compiler-errors - JFileChooser 不会编译

> ID：15842877
> 
> 赞同：0
> 
> 时间：2013-04-05T20:24:26.920
> 
> 标签：compiler-errors, jfilechooser

我正在尝试制作一个简单的 JFileChooser，但到目前为止我所做的不会编译。编译器告诉我它在第 66 行和第 80 行找不到符号“类文件”：

JFileChooserExample.java:66：找不到符号符号：类文件位置：类 JFileChooserExample.ListenerClass 文件文件 = fc.getSelectedFile(); ^ JFileChooserExample.java:80：找不到符号符号：类文件位置：类 JFileChooserExample.ListenerClass 文件文件 = fc.getSelectedFile(); ^ 2 个错误

```
import javax.swing.*;
import java.awt.*;
import javax.swing.border.*;
import java.awt.event.*;

public class JFileChooserExample extends JFrame
{       
static private final String newline = "\n";
private JButton openButton, saveButton;
private JTextArea log;
private JFileChooser fc;    
private ImageIcon openIcon, saveIcon;

public JFileChooserExample()                                                                      // constructor
{                          
  log = new JTextArea(5,20);                                                                              // create the log first, because the 
  log.setMargin(new Insets(5,5,5,5));                                                                 // action listeners need to refer to it
  log.setEditable(false);
  JScrollPane logScrollPane = new JScrollPane(log);

  fc = new JFileChooser();                                                                            // create a file chooser

  //fc.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);                               // Uncomment one of these lines to try a different
   //fc.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);                         // file selection mode. (FILES_ONLY) is default 

    openButton = new JButton(openIcon = new ImageIcon("image\\Open16.gif"));              // create the Open button                                                                                                  
   saveButton = new JButton(saveIcon = new ImageIcon("image\\Save16.gif"));           // create the Save button;

  JPanel buttonPanel = new JPanel();                                                  // put the buttons in a separate panel
  buttonPanel.add(openButton);
  buttonPanel.add(saveButton);

  add(buttonPanel, BorderLayout.NORTH);                                                         // add the buttons and the log to this panel
  add(logScrollPane, BorderLayout.CENTER);

   ListenerClass listener = new ListenerClass();
   openButton.addActionListener(listener);
   saveButton.addActionListener(listener);
}

public static void main(String[] args)
{       
    JFileChooserExample frame = new JFileChooserExample();     // new frame object 
    frame.setTitle("JFileChooser Example");                    // set frame title
    frame.pack();                                                             // sizes the frame so components fit frame  
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);      // ends program on frame closing
    frame.setLocationRelativeTo(null);                                // centre frame
    frame.setVisible(true);                                    // make frame visible
}

private class ListenerClass implements ActionListener
{   
    public void actionPerformed(ActionEvent e)
    {
        if (e.getSource() == openButton)                                                                  // handle Open button action
       {
         int returnVal = fc.showOpenDialog(JFileChooserExample.this);

         if (returnVal == JFileChooser.APPROVE_OPTION) 
        {
            File file = fc.getSelectedFile();
                 log.append("Opening: " + file.getName() + "." + newline);                   // this is where a real application 
         }                                                                                                   // would open the file
        else 
        {
            log.append("Open command cancelled by user." + newline);
         }
         log.setCaretPosition(log.getDocument().getLength());
         } 
        else if (e.getSource() == saveButton)                                                        // handle Save button action
        {
         int returnVal = fc.showSaveDialog(FileChooserDemo.this);
         if (returnVal == JFileChooser.APPROVE_OPTION) 
             {
            File file = fc.getSelectedFile();
            log.append("Saving: " + file.getName() + "." + newline);                         // this is where a real application 
         }                                                                                                   // would open the file
             else 
             {
            log.append("Save command cancelled by user." + newline);
         }
         log.setCaretPosition(log.getDocument().getLength());
      }
    }  
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:26:17.373

您需要导入 java.io.File

您可能还必须更改`FileChooserDemo.this`为`JFileChooserExample.this`（仅在第二个上方几行`File`）

# java - 为什么我的 ArrayList 不能正确初始化？

> ID：15842883
> 
> 赞同：0
> 
> 时间：2013-04-05T20:24:47.147
> 
> 标签：java, arraylist

我在初始化 ArrayList 时遇到了令人沮丧的麻烦。我收到一条错误`binaryTreeList.set(1, root);`消息

```
Exception in thread "main" java.lang.IndexOutOfBoundsException: Index: 1, Size: 0
    at java.util.ArrayList.rangeCheck(Unknown Source)
    at java.util.ArrayList.set(Unknown Source)
    at BinaryTreeADT.<init>(BinaryTreeADT.java:18)
    at Driver.main(Driver.java:7) 
```

我正在尝试使用 ArrayList 实现一个简单的二叉树，我希望“根”元素位于 ArrayList 位置 1。出于某种原因，尽管向所有他们。

这是我按顺序排列的代码`Driver`，`BinaryTreeADT`并且`MyTreeNode`

```
public class Driver {

    public static void main(String[] args) {
        MyTreeNode mtn = new MyTreeNode(3, 'R');
        BinaryTreeADT bt = new BinaryTreeADT(mtn);
        bt.printTree();
    }

} 
```

二叉树ADT：

```
import java.util.ArrayList;
import javax.swing.tree.TreeNode;

public class BinaryTreeADT {

    private ArrayList<MyTreeNode> binaryTreeList;
    private MyTreeNode nullNode = new MyTreeNode(true);   //This creates a null node that initially populates the array.

    //Constructor with no root
    public BinaryTreeADT(){
        binaryTreeList = new ArrayList<MyTreeNode>(10);
    }
    public BinaryTreeADT(MyTreeNode root){
        binaryTreeList = new ArrayList<MyTreeNode>(10);
        initializeList();
        binaryTreeList.set(1, root);
    }
    private void initializeList(){
        for (int i = 0; i < binaryTreeList.size(); i++){
            binaryTreeList.add(nullNode);
        }
    }
    public void add(){

    }
    public void printTree(){
        for (int i = 0; i < binaryTreeList.size(); i++){
            if (binaryTreeList.get(i) != null)
                System.out.println(binaryTreeList.get(i).getNodeChar() + " | ");
        }
    }
} 
```

我的树节点：

```
import java.util.Enumeration;
import javax.swing.tree.TreeNode;

public class MyTreeNode implements TreeNode {

    private int nodeKey;
    private char nodeChar;
    private boolean isNull;

    public MyTreeNode(int key, char letter){
        nodeKey = key;
        nodeChar = letter;
    }
    //Constructor for Null Node
    public MyTreeNode(boolean setNull){
        isNull = setNull;
    }
    public boolean isNull(){ //Tells if this is a null node
        return isNull;
    }

    @Override
    public Enumeration children() {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public boolean getAllowsChildren() {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public TreeNode getChildAt(int arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public int getChildCount() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public int getIndex(TreeNode arg0) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public TreeNode getParent() {
        // TODO Auto-generated method stub
        return null;
    }

    public int getNodeKey() {
        return nodeKey;
    }

    public void setNodeKey(int nodeKey) {
        this.nodeKey = nodeKey;
    }

    public char getNodeChar() {
        return nodeChar;
    }

    public void setNodeChar(char nodeChar) {
        this.nodeChar = nodeChar;
    }

    @Override
    public boolean isLeaf() {
        // TODO Auto-generated method stub
        return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T20:25:54.167

原因是这一行：

```
binaryTreeList.set(1, root); 
```

因为大小`binaryTreeList`为零。您已经构造了 the`ArrayList`并告诉它`initial Capacity`要`10`使用构造函数[`ArrayList(int initialCapacity)`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#ArrayList%28int%29)，但是由于现在里面什么都没有`ArrayList`，所以[`ArrayList#size()`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#size%28%29)返回 as `0`。这就是为什么在你的`initializeList`方法中，`for loop`在第一次迭代时退出，它没有初始化`binaryTreeList`with`10`元素。所以 的 大小`binaryTreeList`又是`0`。这就是在 index 处设置一个`1`根本不存在的值的原因`IndexOutOfBoundException`。

您应该改为定义`initializeList`为：

```
 private void initializeList(){
     for (int i = 0; i < 10; i++){
        binaryTreeList.add(nullNode);
     }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T20:27:02.437

当您`ArrayList`为空时，您试图将元素设置在位置 1：

```
binaryTreeList.set(1, root); 
```

相反，只需使用：

```
binaryTreeList.add(root); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T20:27:19.317

您的参考超出范围。您应该将第 0 个索引设置为根节点。但是，由于您的 ArrayList 为空（大小 = 0），您需要实际**添加**新元素，这将增加数组的大小。

```
binaryTreeList.add(root); 
```

对于数组，索引从 开始`0`，因此数组索引处的元素`0`是第**一个**元素，索引处的元素`1`是第二个元素，依此类推。如果您有一个大小为 的数组`n`，则最后一个元素将位于索引处`n-1`。

稍后，如果要更改某个索引处的元素，可以将第 0 个元素设置为`root`：

```
binaryTreeList.set(0, root); 
```

如果第一个参数（`0`在这种情况下）小于或等于`binaryTreeList.size()-1`.

# ios - 不同的 UIViewController 模态转换到另一个具有不同动画的 VC

> ID：15842884
> 
> 赞同：0
> 
> 时间：2013-04-05T20:24:53.200
> 
> 标签：ios, animation, uiview, modal-dialog, transitions

这是我的问题，假设我有 UIViewController ABC D... 目前我正在为所有 VC 模态转换使用默认转换动画，显示为 -> ![在此处输入图像描述](https://i.stack.imgur.com/a4ihz.png)

我想要的是......让用户选择他们喜欢使用什么样的过渡动画......对于所有的VC模态过渡动画......我想一些代码需要添加到这里的某个地方？->

```
- (IBAction)cardAction:(id)sender {
UIImage *img = [(UIButton *)sender currentBackgroundImage];
[self performSegueWithIdentifier:@"cardSegue" sender:img];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
if ([segue.identifier isEqualToString:@"cardSegue"]) {
    UIImage * img = (UIImage *)sender;

    ResultViewController *viewcontroller = [segue destinationViewController];
    viewcontroller.img = img;
    }
} 
```

请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:36:07.577

segue 允许您在 Storyboard 中定义转换，但您希望让用户定义转换。UIStoryboardSegue 不允许您这样做，因此您需要自己执行转换。

在此处使用不同样式执行转换有一个很好的答案：

[如何在基于导航的应用程序中更改推送和弹出动画](https://stackoverflow.com/questions/2215672/how-to-change-the-push-and-pop-animations-in-a-navigation-based-app)

您可以使用该答案中的代码来执行转换，而不是调用 performSegueWithIdentifier。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:02:27.307

您可以创建自己的 segue 子类，然后更改

```
- (void) perform; 
```

功能。

如果您需要 segue 子类化的示例，请参阅本教程：

[>>> 教程链接<<<](http://www.cmumobileapps.com/2011/11/04/a-short-tutorial-on-custom-segues/)

问候，尼尔斯

# jquery-mobile - 缺少 JQuery 移动图标

> ID：15842885
> 
> 赞同：2
> 
> 时间：2013-04-05T20:24:57.033
> 
> 标签：jquery-mobile

我在弹出窗口中显示图标时遇到问题。

这是我的代码片段：

**头：**

```
<!DOCTYPE html>
<html>
<head>
  <title>Main Page</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
  <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head> 
```

**带有按钮的弹出窗口（按钮不只显示文本）：**

```
<div  id="highscores" data-role="popup" class="ui-content" data-theme="e" data-overlay-theme="a"  style="min-width:400px">
  <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="star" data-iconpos="notext" class="ui-btn-right">Close</a>
  <div data-role="header">
    <h1> Summary </h1>
  </div>
  <div data-role="content">
    <p> Your results are shown below </p>
    <table>
      <tr>
        <td>Correct: </td>
        <td id="correctTd"></td>
      </tr>
      <tr>
        <td>Incorrect: </td>
        <td id="incorrectTd"> </td>
      </tr>
      <tr>
        <td>Ratio: </td>
        <td id="ratioTd"></td>
      </tr>
    </table>
  </div>
</div>
</head> 
```

我应该如何进行？

**火狐日志：**

```
[15:21:22.120] GET
http://uwf.edu/CDE/MobileWeb/ajax.cfc?method=getOptions&_cf_ajaxproxytoken=74929DDA92ACB52984&returnFormat=json&argumentCollection=%7B%22questionId%22%3A1%7D&_cf_nodebug=true&_cf_nocache=true&_cf_clientid=80E1FEFCAEF84777C986F41BD95A9374&_cf_rc=1
[HTTP/1.1 200 OK 23ms]
    --
    [15:21:47.964] GET http://uwf.edu/cde/mobileweb/selfcheck.cfm [HTTP/1.1 200 OK 1465ms]
    [15:21:49.457] GET http://uwf.edu/cfscripts/ajax/messages/cfmessage_en_US_.js [HTTP/1.1
304 Not Modified 2ms]
    [15:21:49.458] GET http://uwf.edu/cfscripts/ajax/package/cfajax.js [HTTP/1.1 304 Not Modified 2ms]
    [15:21:49.459] GET http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css
[HTTP/1.1 304 Not Modified 30ms]
    [15:21:49.460] GET http://code.jquery.com/jquery-1.8.2.min.js [HTTP/1.1 304 Not Modified 240ms]
    [15:21:49.460] GET http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js
[HTTP/1.1 304 Not Modified 30ms]
    [15:21:49.461] GET http://uwf.edu/cde/mobileweb/js/script.js [HTTP/1.1 304 Not Modified 14ms]
    [15:21:49.462] GET http://uwf.edu/cde/MobileWeb/css/style.css [HTTP/1.1 304 Not Modified 10ms]
    [15:21:49.712] Empty string passed to getElementById(). @ http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js:2
    [15:21:49.776] Setting Video
    [15:21:49.776] Resource id is undefined.
    [15:21:49.820] GET http://code.jquery.com/mobile/1.2.0/images/ajax-loader.gif [HTTP/1.1
304 Not Modified 195ms]
    [15:21:49.821] GET http://code.jquery.com/mobile/1.2.0/images/icons-18-white.png
[HTTP/1.1 304 Not Modified 443ms]
    [15:21:49.822] GET http://uwf.edu/CDE/MobileWeb/ajax.cfc?method=getOptions&_cf_ajaxproxytoken=74929DDA92ACB52984&returnFormat=json&argumentCollection=%7B%22questionId%22%3A3%7D&_cf_nodebug=true&_cf_nocache=true&_cf_clientid=80E1FEFCAEF84777C986F41BD95A9374&_cf_rc=0
[HTTP/1.1 200 OK 504ms] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T13:39:54.080

添加`rel="external"`到您的锚标记可能会解决此问题。

# jquery - 来自 IE8 上的 Google Maps API 的未指定错误

> ID：15842886
> 
> 赞同：1
> 
> 时间：2013-04-05T20:24:58.163
> 
> 标签：jquery, google-maps-api-3, internet-explorer-8

我的页面返回 SCRIPT16389：IE8 中的未指定错误。我想我已经找到了原因，但没有解决方案。

错误来自 Google Maps API，函数 mq(a,b)。问题是 IE8 似乎无法处理异步加载内容的 getBoundingClientRect()，而我正在使用 jQuery.load() 加载内容。如果我创建一个与页面加载相同内容而不是异步加载的页面，则不会发生该错误。

该错误发生在页面加载时，然后在调整窗口大小时发生，无论是否显示地图。

几年前我发现人们在使用 jQuery 时遇到了同样的问题： [http :](http://bugs.jquery.com/ticket/4996) [//bugs.jquery.com/ticket/4996 访问 offsetParent 时是否有针对 IE 6/7“未指定错误”错误的解决方法](https://stackoverflow.com/questions/371468/looking-for-a-workaround-for-ie-6-7-unspecified-error-bug-when-accessing-offse)

有人知道修复或解决方法吗？还是我做错了什么？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:42:01.997

我想到了。如果其他人有同样的问题，我会发布我的答案。

为了重现该错误，我必须先加载一个带有 Places Autocomplete 输入的页面。然后，我会加载其他内容，替换该字段。当窗口调整大小事件无法找到不存在的输入的尺寸时，就会发生错误。

我通过调用解决了这个问题

```
google.maps.event.clearListeners(window, 'resize'); 
```

在加载新内容之前。

我希望这对某人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T10:02:39.207

其他答案对我不起作用。经过十几个想法，我最终得到了以下工作（！）解决方案：

在加载内容之前，销毁地图所附加的对象。

例如，如果您的地图设置使用：

`map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);`

在执行 ajax 请求之前使用此代码：

`$('#map-canvas').remove();`

# c# - AspNet 成员 - 集中登录

> ID：15842892
> 
> 赞同：4
> 
> 时间：2013-04-05T20:25:24.633
> 
> 标签：c#, asp.net, sql-server-2008, asp.net-membership

现在我们有几个数据库，每个单独的数据库都有自己的 aspnet 成员表。我们希望将所有成员集中到一个数据库中。例如，他们将在其中指定数据库、用户名和密码的主登录页面。然后我们将检查集中式数据库并根据他们在文本框中输入的数据库名称进行身份验证并将其重定向到他们的帐户。

最好的方法是什么？，在不同的数据库中可能有多个相同的用户名，这是我的挑战。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:09:55.933

ASP.Net Membership 有**Applications 表**。只要不同网站有不同的应用名称，就可以合并成一个大数据库；复制用户 ID（存储为唯一 ID）的机会非常低。

当用户登录时，您需要以下 3 个字段 -

1.  应用程序（这可以是 DropDownLis）
2.  用户名
3.  密码

## 创建自己的验证

您不能使用自定义 Membership Provider 来验证只接受用户名和密码的用户。

```
// ValidateUser method doesn't take any additional parameter
public bool ValidateUser(string username, string password) 
```

所以你需要实现自己的验证方法来验证来自合并数据库的用户。

## 笔记

如果您要重定向到不同的网站，请注意表单身份验证的限制。例如，它不能将身份验证 cookie 从 www.one.com 传输到 www.two.com

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:35:41.400

你能假设database1中的“user123”和database2中的“user123”是同一个人吗？

如果是这样，您可以按照 DJ KRAZE 的建议进行合并。如果没有，您必须为重复的用户名创建新用户。您可以编写一个相当简单的 SQL 脚本来执行此操作，方法是在 ID 末尾附加一个数字。

像....在数据库 1 中找到“john”，创建“john1”用户。我记得，aspnet_membership 数据库带有一组非常强大的存储过程，用于创建用户等，以创建所有正确的表条目。如果你最终走这条路，我肯定会使用这些，而不是尝试自由插入/更新语句

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T20:42:54.773

我相信您可以在登录控件上选择要连接的数据库。所以创建一个下拉列表，用户可以在其中选择要连接的数据库，然后将该选择用作您的数据库。看看[http://forums.asp.net/t/1403132.aspx/1](http://forums.asp.net/t/1403132.aspx/1)上 的数字 4，选择可以是指定数据库的连接字符串名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T20:43:34.743

根据我的经验，您可以做的最好的事情是在重复项上根据源数据库为用户名添加前缀，并将合并委托给最终用户。

# jquery - jquery/jstree 最初显示子节点

> ID：15842893
> 
> 赞同：0
> 
> 时间：2013-04-05T20:25:30.203
> 
> 标签：jquery, jstree

我正在使用[jstree](http://www.jstree.com/) jquery 插件来显示和管理树。这是json数据：

```
0: {id:35, name:amrs trade, parent_id:null}
1: {id:36, name:trips, parent_id:35}
2: {id:37, name:tribute, parent_id:null}
3: {id:38, name:music, parent_id:null}
4: {id:39, name:recordings, parent_id:38}
5: {id:40, name:live shows, parent_id:38}
6: {id:41, name:others, parent_id:null}
7: {id:42, name:investments, parent_id:null}
8: {id:43, name:gold & silver, parent_id:42}
9: {id:44, name:debentures, parent_id:42}
10: {id:46, name:production, parent_id:35}
11: {id:54, name:real estate, parent_id:42} 
```

我用来创建渲染我的树：

```
$("#incomeCategoryTree").jstree({
    "json_data" : {
        "data" : income,
        "progressive_render" : true
    },
    "plugins" : [ "themes", "json_data" ]
}) 
```

我想显示树并让它最初打开一些选定的节点（现在，只显示顶层，隐藏所有非顶层节点）。我可以在上面的 json 中添加什么选项以使 jstree 最初扩展选定的节点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:43:29.600

状态：`open`/`closed`完成工作：

```
0: {id:35, name:amrs trade, parent_id:null, state:open}
1: {id:36, name:trips, parent_id:35}
2: {id:37, name:tribute, parent_id:null}
3: {id:38, name:music, parent_id:null}
4: {id:39, name:recordings, parent_id:38}
5: {id:40, name:live shows, parent_id:38}
6: {id:41, name:others, parent_id:null}
7: {id:42, name:investments, parent_id:null, state:closed}
8: {id:43, name:gold & silver, parent_id:42}
9: {id:44, name:debentures, parent_id:42}
10: {id:46, name:production, parent_id:35}
11: {id:54, name:real estate, parent_id:42} 
```

# sql-server - SQL Server 复制 - 获取 last_distsync 的最佳方式？

> ID：15842894
> 
> 赞同：0
> 
> 时间：2013-04-05T20:25:30.147
> 
> 标签：sql-server, replication, database-replication

我们正在尝试找出订阅何时因桌面堆问题而挂起和过期。我们见过的最好的方法是使用 last_distsync，从运行中获得

```
 [distribution].sys.sp_replmonitorhelpsubscription @publisher = @mypublisher, @publication_type = 0 
```

然而，因为它有一个 INSERT EXEC，你不能轻易地将它从 SQL 中保存到一个表中——即使这样做也行不通（它可能偶尔会工作，然后你会得到“一个 INSERT EXEC 语句不能嵌套。”） ：

```
DECLARE @sql NVARCHAR(4000), @params NVARCHAR(4000), @mypublisher sysname, @myrefreshpolicy NCHAR(1), @mypublication_type int
SELECT @sql = 'exec [distribution].sys.sp_replmonitorhelpsubscription @publisher = @mypublisher, @publication_type = 0',
@params = N'@mypublisher sysname', @mypublisher = @@servername
INSERT INTO #tmp_subscriptiondata
EXEC sp_executesql @sql, @params, @mypublisher = @mypublisher 
```

缺少（这是我接下来要去的地方）使用 Powershell 脚本和 invoke-sqlcmd2 来编写它，有没有一种纯粹在 SQL 中从该 SP 中获取信息的方法？我正在考虑写一个仿制品，但似乎我达到了我的访问限制，即使是系统管理员（拿了 SP，并把它插入到一个表中，得到了这个）

```
Msg 2760, Level 16, State 1, Procedure sp_replmonitorhelpsubscription2, Line 1084
The specified schema name "sys" either does not exist or you do not have permission to use it. 
```

# scala - Play2 模板中的参数过多

> ID：15842897
> 
> 赞同：0
> 
> 时间：2013-04-05T20:25:43.987
> 
> 标签：scala, playframework-2.0

我有一个简单的应用程序正在构建过程中，并且遇到了一个我无法确定原因的复杂错误。（完全披露：这是我的第一个 scala/play 项目）

错误内容如下：

**方法应用的参数太多：对象dailyChart中的()play.api.templates.Html**

有一个观点认为我可以推测出 GlucoseReadings 列表。控制器正在传递模型提供的 GlucoseReadings 列表，所以我不知道为什么当参数和类型的数量匹配时参数*太多。*

我有一个简单的模型、控制器和视图，最终将显示一个简单的一天葡萄糖读数图表。

模型如下（在文件中`GlucoseReadings.scala`）：

```
package models

import play.api.db._
import play.api.Play.current

import anorm._
import anorm.SqlParser._

import org.joda.time._
import java.util.Date

case class GlucoseReading(
    id: Int, mgdl: Int, recordTime: DateTime
)

object GlucoseReading {

  val glucoseReading = {
    get[Int]("id") ~
    get[Int]("mgdL") ~
    get[Date]("recordTime") map {
            case id~mgdL~recordTime => GlucoseReading(id, mgdL, new DateTime(recordTime))
        }
  }

  def dailyReadings(date: DateTime): List[GlucoseReading] = {
        DB.withConnection { implicit connection =>
        SQL("""
                SELECT 
          id,
                recordTime,
          mgDl
                FROM GlucoseReading
                ORDER BY recordDate DESC
            """).as(glucoseReading *)
    }
  }
} 
```

控制器（在文件中`GlucoseReadingsController.scala`）：

```
package controllers

import play.api.mvc._
import play.api.data._
import play.api.data.Forms._

import org.joda.time._

import models.GlucoseReading

object GlucoseReadingsController extends Controller {

  def daily(year: Int, month: Int, day: Int) = Action {
    val date = new DateTime(year, month, day,0,0)
    val readings = GlucoseReading.dailyReadings(date)
    Ok(views.html.dailyChart(readings))
  }

} 
```

和视图（在文件中`dailyChart.scala.html`）：

```
@(readings: List[GlucoseReading])

@import helper._

@main("Day With Read") {

    <ul>
        @reading.map { reading =>
            <li>
                I'm a glucose reading
            </li>
        }
    </ul>    
} 
```

根据评论，`main`模板如下

```
@(title: String)(content: Html)

<!DOCTYPE html>

<html>
    <head>
        <title>@title</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
    </head>
    <body>
        @content
        <script src="http://code.jquery.com/jquery.js"></script>
        <script src="js/bootstrap.min.js"></script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:59:18.147

我能看到的唯一问题是：

```
<ul>
    @reading.map { reading =>
        <li> 
```

它应该编译得很好，你把它改成`@readings.map`. 如果没有，请退出`play`并删除您的`target`目录，然后重试。

# android - 将动画 .GIF 设置为背景 Android

> ID：15842901
> 
> 赞同：18
> 
> 时间：2013-04-05T20:25:59.663
> 
> 标签：android, android-animation, animated-gif

我是 Android 新手，在我的布局背景中播放动画 .gif 文件时遇到问题。当我运行应用程序时，背景是动画 .gif 的单帧，就像图片一样。我主要在两个方面进行了研究：

下面的链接是我得到最多帮助的地方。

[Android 操作系统开始 BlogSpot](http://androidosbeginning.blogspot.com/2010/09/gif-animation-in-android.html "Android 中的 GIF 动画")

下面的链接让我认为我收到的错误与设置为私有、公共或受保护的类有关。

[Java 论坛](http://www.java-forums.org/new-java/12014-constructor-not-visible.html "构造函数不可见")

这是代码---------------------------------------------- -------------------------------------------------- ------------------

错误由 :: ERROR # :: 表示，代码下方有完整描述。

```
import java.io.InputStream;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Movie;
import android.view.Menu;
import android.view.View;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState){

        super.onCreate(savedInstanceState);

        setContentView(new MYGIFView());   :: ERROR 1 :: 
}
}

private class MYGIFView extends View{  :: ERROR 2 ::
    Movie movie,movie1;
    InputStream is=null , is1=null;
    long moviestart;
    public GIFView(Context context) {   :: ERROR 3 ::

        super(context);                 :: ERROR 4 ::

        is=context.getResources().openRawResource(R.drawable.swing);

        movie=Movie.decodeStream(is);
}

@Override
protected void onDraw(Canvas canvas) {

    canvas.drawColor(Color.WHITE);
    super.onDraw(canvas);
    long now=android.os.SystemClock.uptimeMillis();
    System.out.println("now="+now);
    if (moviestart == 0) { // first time
    moviestart = now;

}

System.out.println("\tmoviestart="+moviestart);
int relTime = (int)((now - moviestart) % movie.duration()) ;
System.out.println("time="+relTime+"\treltime="+movie.duration());
movie.setTime(relTime);
movie.draw(canvas,this.getWidth()/2-20,this.getHeight()/2-40);
this.invalidate();

}
} 
```

:: 错误列表 :: 错误列表 :: 错误列表 :: 错误列表 :: 错误列表 :: 错误列表 ::

:: 错误 1 ​​:: 构造函数 MYGIFView() 不可见

:: 错误 2 :: 隐式超级构造函数 View() 未定义可见构造函数

:: 错误 3 :: 方法的返回类型丢失

:: ERROR 4 :: 构造函数调用必须是构造函数中的第一条语句

.

.

---------- 更新 --------- 更新 ------------ 更新 --------------- 更新------------- 更新 ---------- 更新 --------- 更新 ------------ 更新 -- ------------- 更新 ------------- 更新 --------- 更新

.

.

我已经创建了动画列表 = res/drawable-hdpi/progress_animation.xml

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android" android:id="@+id/selected" android:oneshot="false">
<item android:drawable="@drawable/frame02" android:duration="50" />
<item android:drawable="@drawable/frame03" android:duration="50" />
<item android:drawable="@drawable/frame04" android:duration="50" />
<item android:drawable="@drawable/frame05" android:duration="50" />
<item android:drawable="@drawable/frame06" android:duration="50" />
<item android:drawable="@drawable/frame07" android:duration="50" />
<item android:drawable="@drawable/frame08" android:duration="50" />
<item android:drawable="@drawable/frame09" android:duration="50" />
<item android:drawable="@drawable/frame10" android:duration="50" />
.........................................
<item android:drawable="@drawable/frame57" android:duration="50" />
<item android:drawable="@drawable/frame58" android:duration="50" />
</animation-list> 
```

.

.

我创建了布局文件来托管 Image View = res/layout/activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<ImageView android:id="@+id/swing_play" android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

</RelativeLayout> 
```

.

Java Class Activity 调用 ImageView 和 AnimationDrawable = com.example.apptwo/MainActivity.java

.

```
package com.exampleone.apptwo;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.drawable.AnimationDrawable;
import android.view.Menu;
import android.widget.ImageView;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.acivity_main);
    ImageView img = (ImageView)findViewById(R.id.swing_play);
    img.setBackgroundResource(R.drawable.progress_animation);

    AnimationDrawable frameAnimation = (AnimationDrawable) img.getBackground();

    frameAnimation.start();
}

} 
```

.

IDE 不会标记代码中的任何错误。但是，当我运行应用程序时，我的模拟器显示白色背景，并显示一条消息“不幸的是，AppTwo 已停止”。

ErrorLog 读取 =“未处理的事件循环异常”

LOGCAT ------------------------------------------------- -------------------------------------------------- --------------------------------

这是会话过滤器 LOGCAT

```
04-06 17:10:48.193: D/AndroidRuntime(989): Shutting down VM
04-06 17:10:48.193: W/dalvikvm(989): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-06 17:10:48.213: E/AndroidRuntime(989): FATAL EXCEPTION: main
04-06 17:10:48.213: E/AndroidRuntime(989): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.apptwo/com.example.apptwo.MainActivity}: java.lang.NullPointerException
04-06 17:10:48.213: E/AndroidRuntime(989):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-06 17:10:48.213: E/AndroidRuntime(989):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-06 17:10:48.213: E/AndroidRuntime(989):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-06 17:10:48.213: E/AndroidRuntime(989):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-06 17:10:48.213: E/AndroidRuntime(989):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-06 17:10:48.213: E/AndroidRuntime(989):  at android.os.Looper.loop(Looper.java:137)
04-06 17:10:48.213: E/AndroidRuntime(989):  at android.app.ActivityThread.main(ActivityThread.java:5041)
04-06 17:10:48.213: E/AndroidRuntime(989):  at java.lang.reflect.Method.invokeNative(Native Method)
04-06 17:10:48.213: E/AndroidRuntime(989):  at java.lang.reflect.Method.invoke(Method.java:511)
04-06 17:10:48.213: E/AndroidRuntime(989):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-06 17:10:48.213: E/AndroidRuntime(989):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-06 17:10:48.213: E/AndroidRuntime(989):  at dalvik.system.NativeStart.main(Native Method)
04-06 17:10:48.213: E/AndroidRuntime(989): Caused by: java.lang.NullPointerException
04-06 17:10:48.213: E/AndroidRuntime(989):  at com.example.apptwo.MainActivity.onCreate(MainActivity.java:14)
04-06 17:10:48.213: E/AndroidRuntime(989):  at android.app.Activity.performCreate(Activity.java:5104)
04-06 17:10:48.213: E/AndroidRuntime(989):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-06 17:10:48.213: E/AndroidRuntime(989):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-06 17:10:48.213: E/AndroidRuntime(989):  ... 11 more 
```

有太多 LogCat（所有消息）要发布，但下面的这一条似乎在错误发生时很重要。

```
04-06 17:10:48.213: E/AndroidRuntime(989): FATAL EXCEPTION: main 
```

.

更新到包含内容视图的 LOGCAT！！！

```
 : error opening trace file: No such file or directory (2)

 : GC_FOR_ALLOC freed 67K, 7% free 2500K/2688K, paused 49ms, total 54ms

 : I/dalvikvm-heap(1813): Grow heap (frag case) to 4.022MB for 1536016-byte allocation

 : D/dalvikvm(1813): GC_FOR_ALLOC freed 2K, 5% free 3998K/4192K, paused 125ms, total 125ms

 : D/dalvikvm(1813): GC_CONCURRENT freed <1K, 5% free 3998K/4192K, paused 5ms+15ms, total 105ms

 : D/dalvikvm(1813): GC_FOR_ALLOC freed <1K, 5% free 3998K/4192K, paused 36ms, total 37ms

 : Grow heap (frag case) to 5.485MB for 1536016-byte allocation

 : GC_CONCURRENT freed <1K, 4% free 5498K/5696K, paused 75ms+14ms, total 156ms

 : GC_FOR_ALLOC freed <1K, 4% free 5499K/5696K, paused 32ms, total 33ms

 : Grow heap (frag case) to 6.950MB for 1536016-byte allocation

 : GC_CONCURRENT freed <1K, 3% free 6999K/7200K, paused 74ms+17ms, total 156ms
 : D/dalvikvm(1813): GC_FOR_ALLOC freed <1K, 3% free 6999K/7200K, paused 46ms, total 47ms
 : I/dalvikvm-heap(1813): Grow heap (frag case) to 8.416MB for 1536016-byte allocation
 : GC_CONCURRENT freed <1K, 3% free 8499K/8704K, paused 79ms+4ms, total 173ms
 : GC_FOR_ALLOC freed <1K, 3% free 10001K/10208K, paused 33ms, total 34ms
 : GC_FOR_ALLOC freed <1K, 2% free 11501K/11712K, paused 35ms, total 35ms
 : GC_FOR_ALLOC freed <1K, 2% free 13002K/13216K, paused 38ms, total 38ms
 : GC_FOR_ALLOC freed <1K, 2% free 14503K/14720K, paused 35ms, total 36ms
 : GC_FOR_ALLOC freed <1K, 2% free 16003K/16224K, paused 39ms, total 40ms
 : GC_FOR_ALLOC freed <1K, 2% free 17504K/17728K, paused 41ms, total 41ms
 : GC_FOR_ALLOC freed <1K, 2% free 19004K/19232K, paused 42ms, total 43ms
 : GC_FOR_ALLOC freed <1K, 2% free 20505K/20736K, paused 58ms, total 58ms
 : GC_FOR_ALLOC freed <1K, 2% free 22006K/22240K, paused 137ms, total 138ms
 : GC_FOR_ALLOC freed <1K, 1% free 23506K/23744K, paused 47ms, total 47ms
 : GC_FOR_ALLOC freed <1K, 1% free 25007K/25248K, paused 48ms, total 48ms
 : GC_FOR_ALLOC freed <1K, 1% free 26507K/26752K, paused 50ms, total 51ms
 : GC_FOR_ALLOC freed <1K, 1% free 28008K/28256K, paused 56ms, total 57ms
 : GC_FOR_ALLOC freed <1K, 1% free 29509K/29760K, paused 58ms, total 58ms
 : Clamp target GC heap from 32.398MB to 32.000MB
 : GC_FOR_ALLOC freed <1K, 1% free 31009K/31264K, paused 57ms, total 58ms
 : Clamp target GC heap from 33.863MB to 32.000MB
 : GC_FOR_ALLOC freed <1K, 1% free 32510K/32768K, paused 56ms, total 56ms
 : Forcing collection of SoftReferences for 1536016-byte allocation
 :Clamp target GC heap from 33.855MB to 32.000MB
 : GC_BEFORE_OOM freed 9K, 1% free 32500K/32768K, paused 87ms, total 88ms
 : Out of memory on a 1536016-byte allocation.
 : "main" prio=5 tid=1 RUNNABLE
 :   | group="main" sCount=0 dsCount=0 obj=0x40a729a0 self=0x2a00bba8
 :   | sysTid=1813 nice=0 sched=0/0 cgrp=apps handle=1073849308
 :   | state=R schedstat=( 3245039730 1438341923 288 ) utm=275 stm=49 core=0
 :   at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
 :   at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:502)
 :   at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:355)
 :   at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:785)
 :   at android.content.res.Resources.loadDrawable(Resources.java:1965)
 :   at android.content.res.Resources.getDrawable(Resources.java:660)
 :   at android.graphics.drawable.AnimationDrawable.inflate(AnimationDrawable.java:282)
 :   at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:885)
 :   at android.graphics.drawable.Drawable.createFromXml(Drawable.java:822)
 :   at android.content.res.Resources.loadDrawable(Resources.java:1950)
 :   at android.content.res.Resources.getDrawable(Resources.java:660)
 :   at android.view.View.setBackgroundResource(View.java:14468)
 :   at com.example.appthree.MainActivity.onCreate(MainActivity.java:15)
 :   at android.app.Activity.performCreate(Activity.java:5104)
 :   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
 :   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
 :   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
 :   at android.app.ActivityThread.access$600(ActivityThread.java:141)
 :   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
 :   at android.os.Handler.dispatchMessage(Handler.java:99)
 :   at android.os.Looper.loop(Looper.java:137)
 :   at android.app.ActivityThread.main(ActivityThread.java:5041)
 :   at java.lang.reflect.Method.invokeNative(Native Method)
 :   at java.lang.reflect.Method.invoke(Method.java:511)
 :   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
 :   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
 :   at dalvik.system.NativeStart.main(Native Method)
 : --- decoder->decode returned false
 : Shutting down VM
 : threadid=1: thread exiting with uncaught exception (group=0x40a71930)
 : FATAL EXCEPTION: main
 : java.lang.OutOfMemoryError
 :  at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
 :  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:502)
 :  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:355)
 :  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:785)
 :  at android.content.res.Resources.loadDrawable(Resources.java:1965)
 :  at android.content.res.Resources.getDrawable(Resources.java:660)
 :  at android.graphics.drawable.AnimationDrawable.inflate(AnimationDrawable.java:282)
 :  at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:885)
 :  at android.graphics.drawable.Drawable.createFromXml(Drawable.java:822)
 :  at android.content.res.Resources.loadDrawable(Resources.java:1950)
 :  at android.content.res.Resources.getDrawable(Resources.java:660)
 :  at android.view.View.setBackgroundResource(View.java:14468)
 :  at com.example.appthree.MainActivity.onCreate(MainActivity.java:15)
 :  at android.app.Activity.performCreate(Activity.java:5104)
 :  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
 :  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
 :  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
 :  at android.app.ActivityThread.access$600(ActivityThread.java:141)
 :  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
 :  at android.os.Handler.dispatchMessage(Handler.java:99)
 :  at android.os.Looper.loop(Looper.java:137)
 :  at android.app.ActivityThread.main(ActivityThread.java:5041)
 :  at java.lang.reflect.Method.invokeNative(Native Method)
 :  at java.lang.reflect.Method.invoke(Method.java:511)
 :  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
 :  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
 :  at dalvik.system.NativeStart.main(Native Method)
 : GC_CONCURRENT freed 30038K, 93% free 2539K/32768K, paused 73ms+97ms, total 472ms 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-05T21:10:25.850

正如 Martin 所说，Android 不支持 GIF。作为一种解决方法，Android 提供了[Animation List/AnimationDrawable](http://developer.android.com/reference/android/graphics/drawable/AnimationDrawable.html)。您需要将 GIF 转换为单独的帧 [.png 文件]。我使用 GIMP 进行转换

![原始 GIF 图片](https://i.stack.imgur.com/Zbpcg.gif)

这个 GIF 可以分解成它的帧：

![GIMP 中的 GIF 帧](https://i.stack.imgur.com/VggjN.png)

将它们保存为 frame01.png、frame02.png 等，并创建一个动画列表 XML 文件，例如 progress_animation.xml

```
<animation-list android:id="@+id/selected" android:oneshot="false">
<item android:drawable="@drawable/frame01" android:duration="50" />
<item android:drawable="@drawable/frame02" android:duration="50" />
<item android:drawable="@drawable/frame03" android:duration="50" />
....
<item android:drawable="@drawable/frameN" android:duration="50" /> 
```

要开始动画，您需要将图像转换为 AnimationDrawable，并在其上调用 start()

```
AnimationDrawable progressAnimation = (AnimationDrawable) yourImageView.getBackground();
progressAnimation.start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-29T22:10:41.713

当 GIF 动画作为电影播放时，Android 支持 gif 动画。

[看一看。](http://androidosbeginning.blogspot.com.es/2010/09/gif-animation-in-android.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-04T12:45:27.350

把你的 gif 图像放在 app\src\main\assets

做一个像

```
public class MyGifView extends View {
Movie movie;
InputStream is;
long startTime;

public MyGifView(Context context) {
    super(context);
    try {
        is = getResources().getAssets().open("anim.gif");
        movie = Movie.decodeStream(is);
    } catch (IOException e) {
        e.printStackTrace();
    }
}

@Override
protected void onDraw(Canvas canvas) {
    canvas.drawColor(Color.WHITE);
    super.onDraw(canvas);
    long now = System.currentTimeMillis();
    if (startTime == 0) // first time
        startTime = now;
    int relTime = (int) ((now - startTime) % movie.duration());
    movie.setTime(relTime);
    float scalefactorx = (float) this.getWidth() / (float) movie.width();
    float scalefactory = (float) this.getHeight() / (float) movie.height();
    canvas.scale(scalefactorx,1);
    movie.draw(canvas, scalefactorx, scalefactory);
    this.invalidate();
} 
```

}

在您的 xml activity_layout (backgroundFrameLayout) 中的某处添加布局。在您的活动 onCreate() 中的用法：

```
FrameLayout frameLayout = findViewById(R.id.backgroundFrameLayout);
frameLayout.addView(new MyGifView(this)); 
```

# android - Android - 计算传感器更新

> ID：15842904
> 
> 赞同：0
> 
> 时间：2013-04-05T20:26:00.883
> 
> 标签：android, updates, sensors

我正在尝试制作一个包含接近手势的应用程序，但为此我需要计算传感器更新，谁能通过代码示例告诉我如何计算传感器更新！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-15T11:09:08.607

将活动中的全局变量标记为**count_events**。

```
private int count_events=0; 
```

然后在您的**onSensorChanged(SensorEvent event)**函数中进行以下更改：

```
 public void onSensorChanged(SensorEvent event) {
        Sensor mySensor=event.sensor;
        int type=mySensor.getType();
        if(type==Sensor.TYPE_PROXIMITY ) {
             count_events++;
        } 
```

# django - Django/Auth：注销清除会话数据？

> ID：15842905
> 
> 赞同：7
> 
> 时间：2013-04-05T20:26:04.003
> 
> 标签：django, session-variables, django-authentication, django-sessions

我想知道[auth.logout](https://github.com/django/django/blob/1.3/django/contrib/auth/views.py#L71)是否清除*会话*数据，或者我必须自己做。

```
from django.contrib.auth.decorators import login_required
from django.contrib import auth
@login_required
def logout(request):
    auth.logout(request)
    return redirect('base:homepage') 
```

像这样的东西...

```
from django.contrib.auth.decorators import login_required
from django.contrib import auth

@login_required
def logout(request):
    for sesskey in request.session.keys():
        del request.session[sesskey]
    auth.logout(request)
    return redirect('base:homepage') 
```

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-05T20:29:50.740

是的。注销会刷新会话。

这是[它的来源](https://github.com/django/django/blob/master/django/contrib/auth/__init__.py#L89)：

```
def logout(request):
    """
    Removes the authenticated user's ID from the request and flushes their
    session data.
    """
    # Dispatch the signal before the user is logged out so the receivers have a
    # chance to find out *who* logged out.
    user = getattr(request, 'user', None)
    if hasattr(user, 'is_authenticated') and not user.is_authenticated():
        user = None
    user_logged_out.send(sender=user.__class__, request=request, user=user)

    request.session.flush()
    if hasattr(request, 'user'):
        from django.contrib.auth.models import AnonymousUser
        request.user = AnonymousUser() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-08T10:35:48.603

如果您的意思是通过清除会话数据来删除“django_session”表中的记录，恐怕注销功能不会这样做。

通常，我们必须通过其他方式清除 'django_session' 表中过期的会话记录。像 crontab 任务一样定期运行“python manage.py clearsessions”

[有关更多信息，请参阅此](https://github.com/django/channels/issues/477)。

# php - 从数组中删除子数组，其中子项是该项的最后一项

> ID：15842909
> 
> 赞同：-2
> 
> 时间：2013-04-05T20:26:16.083
> 
> 标签：php, arrays, loops

我的脑子坏了。这是概念：

```
$a = array('please', 2);
$s = array('help', 3);
$d = array('me', 1);
$f = array('!', 3);
$g = array('asdf', 1);

$myArray = array($a, $s, $d, $f, $g);

for ($i = 0; $i < count($myArray); $i++) {
    // code here
} 
```

代码应该包含从 myArray 中删除索引 0、3 和 4 的逻辑，因为它们在 $myArray[$i][1] 位置包含其种类的最后一个值（分别为最后 2、3 和 1）。

--编辑：从评论中改编的建议得到这个：

```
$a = array('please', 2);
$s = array('help', 3);
$d = array('me', 1);
$f = array('!', 3);
$g = array('asdf', 1);

$myArray = array($a, $s, $d, $f, $g);

$used = array();

for ($i = 0; $i < count($myArray); $i++) {
    $used[$myArray[$i][1]] = $i;
}

foreach ($used as $deleteMe)
    unset($myArray[$deleteMe]);

$newArray = array_values($myArray);

var_dump($newArray); 
```

它有效，并且使用 array_values 创建一个新数组消除了使用 unset() 创建的间隙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:32:59.073

遍历`$myArray`，保存每种类型的最后位置`$otherArray`，循环遍历取消设置的`$otherArray`项目`$myArray`。就这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:33:31.130

```
$i = count($myArray);
$used = array();
while ($i-- > 0)
    if (!isset($used[$myArray[$i][1]])) {
        $used[$myArray[$i][1]] = true;
        unset($myArray[$i]);
    } 
```

这个简单的代码片段首先从后面遍历数组，如果尚未删除具有此编号的条目，则删除索引。

# c# - 如何获取这些 xml 值的字符串数组？

> ID：15842911
> 
> 赞同：1
> 
> 时间：2013-04-05T20:26:20.217
> 
> 标签：c#, .net, xml, linq-to-xml

我试图使用 linq to xml，但我对它很陌生。

这是xml：

```
<BrandHosts>
  <Brand>
    <ResourceName>BrandInfo_AAA</ResourceName>
    <Hosts>
      <Host>www.aaa.com</Host>
      <Host>portal.aaa.com</Host>
      <Host>aaa.com</Host>
    </Hosts>
  </Brand>
  <Brand>
    <ResourceName>BrandInfo_BBB</ResourceName>
    <Hosts>
      <Host>www.bbb.com</Host>
      <Host>bbb.com</Host>
      <Host>portal.bbb.com</Host>
    </Hosts>
  </Brand>
  <Brand>
    <ResourceName>BrandInfo_CCC</ResourceName>
    <Hosts>
      <Host>www.CCC.com</Host>
    </Hosts>
  </Brand>
  <Brand>
    <ResourceName>BrandInfo_DDD</ResourceName>
    <Hosts>
      <Host>www.DDD.com</Host>
    </Hosts>
  </Brand>
</BrandHosts> 
```

我将有一个字符串值，其中包含我需要从这个 xml 中提取的资源名称。例如，我的参数可能是“BrandInfo_BBB”。而且我需要返回一个包含该块中所有主机的字符串数组。我可以用 linq to xml 做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T20:33:38.903

首先：将您的 XML 加载到`XDocument`对象中并准备结果变量：

```
var doc = XDocument.Load("Input.txt");
string[] hosts; 
```

然后就可以查询文档了。**我假设这`ResourceName`在输入 XML 中是唯一的**。

```
var resourceName = "BrandInfo_DDD";

var brand = doc.Root.Elements("Brand").SingleOrDefault(b => (string)b.Element("ResourceName") == resourceName);

if (brand != null)
{
    hosts = brand.Element("Hosts")
                 .Elements("Host")
                 .Select(h => (string)h)
                 .ToArray();
} 
```

**对于非唯一`ResourceName`**

```
var brands = doc.Root.Elements("Brand").Where(b => (string)b.Element("ResourceName") == resourceName).ToArray();

string[] hosts;

if (brands.Length > 0)
{
    hosts = brands.SelectMany(b => b.Element("Hosts")
                                    .Elements("Host")
                                    .Select(h => (string)h)
                                    ).ToArray();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T20:45:18.667

```
string toSearch = "BrandInfo_BBB";

XDocument xDoc = XDocument.Load("XMLFile1.xml");

string[] strArr = xDoc.Descendants("Brand").Where(n => n.Element("ResourceName").Value == toSearch).Single()
                      .Descendants("Host").Select(h => h.Value).ToArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T21:03:03.697

只是提供另一种选择...

```
XDocument doc = XDocument.Load("BrandHosts.xml");
string resourceName = "BrandInfo_DDD";

var resources = doc
    .Descendants("Brand")
    .Where(n => n.Element("ResourceName").Value == resourceName);

var hosts = resources.Any() ?
    resources.Descendants("Host").Select(h => h.Value) :
    Enumerable.Empty<string>(); 
```

通过使用`Enumerable.Empty<>`上述方法（当没有返回资源时），您可以确保它`hosts`永远不会为空，因此立即使用它总是安全的......

```
string[] vals = hosts.ToArray(); 
```

# facebook - 为什么 /USER_ID/feed 返回未指定的错误？

> ID：15842913
> 
> 赞同：0
> 
> 时间：2013-04-05T20:26:26.963
> 
> 标签：facebook, facebook-graph-api, feed

几天前，我注意到我的应用程序停止工作。经过一些调试，我发现调用有问题`/USER_ID/feed`（当然包括访问令牌）

我没有发现任何类似的弃用通知或错误报告。我已经通过[资源](https://developers.facebook.com/tools/explorer/?method=GET&path=me%2Ffeed)`/USER_ID/feed`管理器尝试了连接，它给了我同样的错误

```
{
  "error": {
    "message": "An unknown error has occurred.", 
    "type": "OAuthException", 
    "code": 1
  }
} 
```

有什么我错过的还是只是 Facebook 的问题/错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T00:25:01.343

这可能是某种错误，因为它在没有任何通知的情况下再次工作。

# ios - 在 MKMapView 中以编程方式设置标题

> ID：15842914
> 
> 赞同：1
> 
> 时间：2013-04-05T20:26:30.867
> 
> 标签：ios, mkmapview

我希望我的 MKMapView 根据程序设置的标题旋转。

我所能做的就是旋转视图本身，但是街道名称等当然是颠倒的。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T22:31:48.197

It does not appear to me that you can manually set the heading for the map view. You can set the behavior that rotates the map view to follow the user's current compass heading, though:

```
[mapView setUserTrackingMode:MKUserTrackingModeFollowWithHeading
                    animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-19T11:45:00.523

这个问题很老，直到很多事情都发生了变化。但是在swift中肯定有这样的可能性：

```
mapView.camera.heading = 0 
```

# node.js - SockJS 多路复用示例 404 index.html not found

> ID：15842915
> 
> 赞同：1
> 
> 时间：2013-04-05T20:26:44.397
> 
> 标签：node.js, sockjs

查看[SockJS 多路复用示例](https://github.com/sockjs/websocket-multiplex/tree/master/examples/sockjs)

我让服务器运行。当我去时，`http://127.0.0.1:9999/multiplex` 我看到一条欢迎消息“ `Welcome to SockJS!`”

当我尝试浏览 index.hmtl 时， `http://127.0.0.1:9999/index.html`我收到 404 消息“ `Cannot GET /index.html`”

' ' 与正在运行`index.html`的目录位于同一目录中。`server.js`为什么服务器找不到这个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T23:50:56.427

请仔细检查您是否使用了良好的快递版本。Express 3 更改的 API 和代码可能需要一些调整。有关示例，请参见 sockjs-node/examples。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T22:50:38.350

安装 express 3.1.1 并对[server.js 进行了一些代码更新](https://gist.github.com/dev-e-loper/5332522)。现在，当我访问`http://127.0.0.1:9999/`它时，它为我提供了服务器中指定的 index.html：

```
app.get('/', function (req, res) {
    res.sendfile(__dirname + '/index.html');
}); 
```

不知道为什么，但`http://127.0.0.1:9999/index.html`仍然没有给我文件。

# javascript - 整页（或至少几乎）JavaScript 灯箱

> ID：15842920
> 
> 赞同：-2
> 
> 时间：2013-04-05T20:27:04.987
> 
> 标签：javascript, jquery, lightbox

首先，一如既往，jQuery 始终是一种选择。

我正在寻找一个“全屏”灯箱。我不是说喜欢填满整个屏幕，而是喜欢覆盖大部分内容。我见过的大多数灯箱都只使用图像，或者没有我想要的那么大。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:29:33.147

您可以使用彩盒 - [http://www.jacklmoore.com/colorbox/](http://www.jacklmoore.com/colorbox/)。

您可以在其中指定尺寸（甚至以 % 为单位）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:37:48.390

这是您可以使用样式选项轻松修改的内容...基本上您需要将灯箱设置为如下所示：

```
#lightbox{
position: fixed;
top:1%;
left:1%;
height: 98%;
width: 98%;
} 
```

您可以在样式表中执行此操作，也可以在脚本中进行设置。

# css - 外部 CSS 字体仅在 Chrome 中显示（没有 IE 和 Firefox）

> ID：15842924
> 
> 赞同：3
> 
> 时间：2013-04-05T20:27:31.067
> 
> 标签：css, firefox, font-face, compatibility

我有一个字体样式 CSS：

```
<style>
@font-face {
font-family: 'museo_slab500';
src: url('/css/fonts/museo_slab_500-webfont.eot');
src: url('/css/fonts/museo_slab_500-webfont.eot?#iefix') format('embedded-opentype'),
        url('/css/fonts/museo_slab_500-webfont.woff') format('woff'),
        url('/css/fonts/museo_slab_500-webfont.ttf') format('truetype'),
        url('/css/fonts/museo_slab_500-webfont.svg#museo_slab500') format('svg');
font-weight: normal;
font-style: normal;
}
</style> 
```

很简单。问题是：

*   如果我将这个字体定义单独保留在其 .css 文件中（并且字体系列应用于各种标题，另一个 .css 文件中的正文）我看不到任何浏览器中应用的字体。我用萤火虫检查过，所有内容都已读取，字体已下载但未应用。
*   如果我从外部 .css 文件中移动字体定义并将其 INLINE 放入 HTML 中，一切都会正确显示。

如果我从页面内的内联中删除上述代码并将其放在外部 .css 中并放置它而不是样式标签：

```
 <link type="text/css" rel="stylesheet" href="/adminskin/default/css/font-families.css" /> 
```

. 关于为什么会发生这种情况的任何提示？我要疯了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:05:19.807

好的.....我找到了这种疯狂的答案。

似乎虽然 Google Chrome 完全没有问题，但 IE 和 Firefox（没有尝试过 Safari 或 Opera）都无法处理指向具有字体定义的外部 .css 的绝对 url。因此，虽然这适用于所有浏览器（.css 内部只是字体定义）

```
<link rel="stylesheet" type="text/css" href="/skinadmin/default/css/font-families.min.css?v=2.0.0.0" /> 
```

这仅适用于谷歌浏览器。

```
<link rel="stylesheet" type="text/css" href="http://www.yoursite.com/skinadmin/default/css/font-families.min.css?v=2.0.0.0" /> 
```

这不是疯了吗？我认为是这样。

# delphi - DGRid showing Selected but no Bookmark

> ID：15842925
> 
> 赞同：0
> 
> 时间：2013-04-05T20:27:35.203
> 
> 标签：delphi, delphi-5

Just found a weirdness with D5 and/or Zeos. I have a TDBgrid and DataSet.

I have a "Delete" function to delete selected Rows of the DBGrid.

If I Ctlr-Left-click to select Row (or Rows) it all works fine, but...

if I use the Vertical Scrollbar slider to move to the top of the DataSet then it shows the first Row in the select color.

If do **not** click the top line, (it already looks selected) then click "Delete" it crashes. Stepping through the code, at the first line SelectedRows.Count displays "1" but then at the Bookmark line I get a "Bookmark not found error" If I first click on the already selected Row after using the slider, then this does not crash.

```
for i:=0 to dbgridAddr.SelectedRows.Count-1 do
begin
  dbgridAddr.DataSource.DataSet.GotoBookmark(pointer(dbgridAddr.SelectedRows.Items[i])); 
```

How can I fix this ?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-01-26T09:24:36.990

我想回答有点晚了，但也许其他人会发现它很有用。问题是当您在 DbGrid 的边界内单击时，即使不是 .

将此添加到 DBGrid 的 OnDrawColumnCell 事件处理程序中：

```
procedure TForm1.DBGrid1DrawColumnCell(Sender: TObject; const Rect: TRect; 
                     DataCol: Integer; Column: TColumn; State: TGridDrawState); 
begin  
    // Only highlight the row if it is actually selected
    if TDBGrid(Sender).SelectedRows.CurrentRowSelected  then
    begin
      TDBGrid(Sender).Canvas.Brush.Color := clHighlight;
      TDBGrid(Sender).Canvas.Font.Style := Font.Style + [fsBold];
      TDBGrid(Sender).Canvas.Font.Color := clHighlightText;
    end
    else
    begin
      TDBGrid(Sender).Canvas.Brush.Color := clBtnFace;
      TDBGrid(Sender).Canvas.Font.Style := Font.Style - [fsBold];
      TDBGrid(Sender).Canvas.Font.Color := clWindowText;
    end;  
    // Commit drawing
    TDBGrid(Sender).DefaultDrawColumnCell(Rect, DataCol, Column, State);

end; 
```

如果您希望在使用箭头键时能够在网格中看到光标位置，请添加这样的块

```
 else if (gdSelected in State) then
    begin
      TDBGrid(Sender).Canvas.Brush.Color := clBtnFace;
      TDBGrid(Sender).Canvas.Font.Style := Font.Style + [fsBold];
      TDBGrid(Sender).Canvas.Font.Color := clWindowText;
    end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T15:06:10.323

德尔福5：

你写了：

`if I use the Vertical Scrollbar slider to move to the top of the DataSet then it shows the first Row in the select color.`

*即使看起来那样。这并不意味着它也被评估为标记。*

您可以使用以下方法对其进行测试：

```
if dbgridAddr.SelectedRows.CurrentRowSelected then
      ShowMessage('selected') else
      ShowMessage('NOT selected'); 
```

### 描述

从数据集中删除记录时，位置标记不会自动从列表中删除。

因此，某些位置标记**可能无效**。

`dbgridAddr.SelectedRows.Refresh;`

刷新以确保列表仅包含有效条目。

刷新尝试查找数据集中所有在 Items 属性数组中显示为位置标记的记录。

所有数据量不相等的位置标记都将被删除。

如果位置标记无效，则 Refresh 返回一个值`True`并使 DBGrid 对象无效，从而触发重绘，在这种情况下，所有无效记录都将被删除。

如果列表中的所有位置标记都应该有效，则 Refresh 返回 值`False`。

**永远不要从具有这种结构的列表中删除项目。**

```
for i:=0 to whatEver.Count-1 do  
    whatEver.delete(i); 
```

例如，考虑一个包含 10 个项目的列表。

随便=`0 .. 9`

如果我们现在在“for循环”中使用`i = 1`do `whatEver.delete(i);`，

有了这个，我们删除了第二项。

现在`whatEver`只是`0 .. 8`。

循环被初始化以运行`0 to 9`。现在您可以理解如果`i = 9`尝试`whatEver.delete(i);`访问`whatEver`外部`0 .. 8` 这会导致错误。

另一个例子。

您删除了不正确的记录。

我们将假设。
**在**lopp 之前，您已经确定了以下项目（数据记录）- 要删除的编号。

`#3 , #6 , #8`

```
for i:=0 to whatEver.Count-1 do  
    if (i=3) OR (i=6) OR (i=8) then whatEver.delete(i); 
```

如果`i=3`然后执行以下`whatEver.delete(3);`

然后

第 4 行现在是第 3
行 第 5 行现在是第 4
行 第 6 行现在是第 5 行
，依此类推

现在有了

```
if... OR (i=6) then whatEver.delete(6); 
```

你删除了错误的项目，上一行 7 ！

书签指针也指向#6，没有刷新。

请不要现在发帖`it is better to compare the content`。

```
for i:=0 to whatEver.Count-1 do  
    if (whatEver[i] = 'blue') OR (whatEver[i] = 'green') OR (whatEver[i] = 'red')
       then whatEver.delete(i); 
```

`I know that, it's just an example to show what happens when you delete items from the sequence out.`

**这样做更好**：

```
for i:= whatEver.Count-1 downto 0 do
    whatEver.delete(i); 
```

这样它就从删除的末尾开始。较低的项目保持其有效性。

**编辑：**

我不知道您使用的是什么 DBGrid 事件？

要测试没有选择，只有滚动。

关闭您的应用程序并重新启动，只滚动 DBGrid。
*不要点击进入 DBGrid ！*
然后按下你的测试按钮。

```
procedure TForm1.Button2Click(Sender: TObject);
begin

if DBGrid1.SelectedRows.CurrentRowSelected then
  begin
     ShowMessage('selected');
  end else begin
     if DBGrid1.SelectedRows.Count>0 then
        ShowMessage('             CurrentRow NOT selected'+#13#10+
                    'A part in your code must have select another row.')
     else
        ShowMessage('NOT selected');
  end;
end; 
```

![在此处输入图像描述](https://i.stack.imgur.com/cSlEy.jpg)

# javascript - E4X - 检索元素而不检索其子元素

> ID：15842928
> 
> 赞同：1
> 
> 时间：2013-04-05T20:27:40.917
> 
> 标签：javascript, xml, e4x

给定一个 XML 对象，我怎样才能只检索根元素而不一起检索它的子元素？

例如：

```
var exampleXml = new XML("<parent name="Teste"><child/><child2/><child3/></parent>");
exampleXml.getOnlyRootElement(); //<parent name="Teste"/> 
```

我找到了这个解决方案[——Flex e4x 过滤掉孩子](https://stackoverflow.com/questions/6304134/flex-e4x-filter-out-children)——但我不太喜欢它。有更好的吗？

PS：我正在使用 SpiderMonkey 在 Windows 应用程序中运行 javascript。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:43:01.763

您只需将子引用设置为空的 XMLList。

```
 exampleXML.setChildren(new XMLList('')); 
```

如果要保留原始 XML 对象，请先进行深拷贝

```
 childFreeXML = exampleXML.copy().setChildren(new XMLList('')); 
```

# linux - 当 MPI 出现死锁时，如何在特定时间后停止（或终止） MPI_Recv？

> ID：15842930
> 
> 赞同：1
> 
> 时间：2013-04-05T20:27:49.247
> 
> 标签：linux, gcc, mpi

我正在尝试检测 MPI 中的死锁

有什么方法可以让我们在特定时间后从像 MPI_Recv 这样的函数跳转。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T20:52:17.793

MPI_Recv 是一个阻塞函数，它只会坐在那里，直到它接收到它正在等待的数据，所以如果你想让它超时并在事情锁定时出错，那么我认为这不适合你。

您可以查看 using [`MPI_Irecv`](http://www.open-mpi.org/doc/v1.4/man3/MPI_Irecv.3.php)，这是非阻塞版本。然后，您可以模拟`MPI_Recv`using[`MPI_Wait`](http://www.open-mpi.org/doc/v1.4/man3/MPI_Wait.3.php)或的阻塞行为[`MPI_Test`](http://www.open-mpi.org/doc/v1.4/man3/MPI_Test.3.php)。

如果您使用 和 的组合，`MPI_Irecv`您`MPI_Test`可以制作一个等待接收指定时间长度的片段，如果没有，则会出错。粗略的例子：

```
MPI_Irecv(..., &request); //start a receive request, non-blocking
time_t start_time = time(); //get start time
MPI_Test(&request, &gotData, ...); //test, have we got it yet

//loop until we have received, or taken too long
while (!gotData && difftime(time(),start_time) < TIMEOUT_TIME) {
  //wait a bit.
  MPI_Test(&request, &gotData, ...); //test again
}

//By now we either have received the data, or taken too long, so...
if (!gotData) { 
  //we must have timed out
  MPI_Cancel(&request);
  MPI_Request_free(&request);
  //throw an error
} 
```

# c++ - Compiler Error 2019 Unresolved External Symbol

> ID：15842931
> 
> 赞同：1
> 
> 时间：2013-04-05T20:28:01.470
> 
> 标签：c++, compiler-errors, lnk2019, unresolved-external

I am trying to compile a program to make sure all the code is working. I am getting an Error 2019 Unresolved External with the following messages:

```
1>------ Build started: Project: Week 2 Dating Service, Configuration: Debug Win32 ------
1>  Client.cpp
1>Client.obj : error LNK2019: unresolved external symbol "private: void __thiscall Client::checkName(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > &)" (?checkName@Client@@AAEXAAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z) referenced in function "public: __thiscall Client::Client(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)" (??0Client@@QAE@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z)
1>Client.obj : error LNK2019: unresolved external symbol "private: void __thiscall Client::checkSex(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > &)" (?checkSex@Client@@AAEXAAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z) referenced in function "public: __thiscall Client::Client(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)" (??0Client@@QAE@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@0@Z)
1>Client.obj : error LNK2019: unresolved external symbol "private: void __thiscall Client::checkPhone(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > &)" (?checkPhone@Client@@AAEXAAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z) referenced in function "public: __thiscall Client::Client(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)" (??0Client@@QAE@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@00@Z)
1>C:\Users\owner\Documents\Visual Studio 2010\Projects\CISS 350\Week 2 Dating Service\Debug\Week 2 Dating Service.exe : fatal error LNK1120: 3 unresolved externals 
```

Here is all of my code...

Header: //Specification file for the Client.h class. Class will hold member data and provide necessary functions to access the data.

```
#ifndef CLIENT_H
#define CLIENT_H
#include <iostream>
#include <vector>

using namespace std;

class Client
{
private:
//Member Variables
string name;    //Hold the clients name
string sex; //Single char to hold sex
string phone; //Holds 7 digit phone number
vector<string> interests;

//Private Member functions
void interest(vector<string>);
void checkName(string &);
void checkSex(string &);
void checkPhone(string &);

public:
//Public Variables
bool hasMatch;
string match;

//Constructors
Client();
Client(string);
Client(string, string);
Client(string, string, string);
Client(string, string, string, vector<string>);

//Mutators
void setName(string);
void setSex(string);
void setPhone(string);
void setInterests(vector<string>);
void setClient(string, string, string, vector<string>);

//Accessors
void getName(string &);
void getSex(string &);
void getPhone(string &);
void getInterests(vector<string> &);
void getClient(string &, string &, string &, vector<string> &);

};

#endif 
```

Implementation file:

```
//Implementation file for the Client.h class. 

#include <iostream>
#include <string>
#include <vector>
#include "Client.h"

using namespace std;

//Private Member functions
void Client::interest(vector<string> inter)
{
int vecSize = inter.size();
for(int i = 0; i < vecSize; i++)
{
    interests[i] = inter[i];
}
}
void checkName(string &nm)
{
do
{
    cout << "Name is longer than 20 characters. Please enter a new name:";
    cin >> nm;
} 
while(nm.size() > 20);
}
void checkSex(string &sx)
{
int size = sx.size();

if(size > 1)
{
    sx = sx[0];
}

do
{
    if(sx != "M" || sx != "m" || sx != "F" || sx != "f")
    {
        cout << "Please enter sex(M or F):";
        cin >> sx;
    }
}
while(sx != "M" || sx != "m" || sx != "F" || sx != "f");
}
void checkPhone(string &ph)
{
int size = ph.size();
bool isGood= true;

if(size > 8)
    isGood = false;

for(int i = 0; i < size; i++)
{
    if(static_cast<int>(ph[i]) != 32 && ph[i] > '9'|| ph[i] < '0')
    {
        isGood = false;
    }
}

if(isGood == false)
{
    cout << "Phone number not valid.\n" << "Please enter a new number:";
    cin >>ph;
    checkPhone(ph);
}
}

//Contructors
Client::Client()
{
name = " ";
phone = " ";
sex = " ";
interests[0] = " ";
hasMatch = false;
match = " ";
}

Client::Client(string nm)
{
checkName(nm);
name = nm;
phone = " ";
sex = " ";
interests[0] = " ";
hasMatch = false;
match = " ";
}

Client::Client(string nm, string sx)
{
checkName(nm);
name = nm;
phone = " ";
checkSex(sx);
sex = sx;
interests[0] = " ";
hasMatch = false;
match = " ";
}

Client::Client(string nm, string sx, string ph)
{
checkName(nm);
name = nm;
checkPhone(ph);
phone = ph;
checkSex(sx);
sex = sx;
interests[0] = " ";
hasMatch = false;
match = " ";
}

Client::Client(string nm, string sx, string ph, vector<string> inter)
{
checkName(nm);
name = nm;
checkPhone(ph);
phone = ph;
checkSex(sx);
sex = sx;
interest(inter);
hasMatch = false;
match = " ";
}

//Mutators
void Client::setName(string nm)
{
checkName(nm);
name = nm;
}
void Client::setSex(string sx)
{
checkSex(sx);
sex = sx;
}
void Client::setPhone(string ph)
{
checkPhone(ph);
phone = ph;
}
void Client::setInterests(vector<string> inter)
{
interest(inter);
}
void Client::setClient(string nm, string sx, string ph, vector<string> inter)
{
checkName(nm);
name = nm;
checkPhone(ph);
phone = ph;
checkSex(sx);
sex = sx;
interest(inter);
}

//Accessors
void Client::getName(string &nm)
{
nm = name;
}
void Client::getSex(string &sx)
{
sx = sex;
}
void Client::getPhone(string &ph)
{
ph = phone;
}
void Client::getInterests(vector<string> &inter)
{
inter = interests;
}
void Client::getClient(string &nm, string &sx, string &ph, vector<string> &inter)
{
nm = name;
sx = sex;
ph = phone;
inter = interests;
} 
```

Main file:

```
#include <iostream>
#include <string>
#include <vector>
#include <iomanip>
#include <list>
#include "Client.h"

using namespace std;

//Global Variables

//Function Prototypes
char MainMenu();
void AddMenu();
void PrintMenu();
bool InitLoad();
void closeProgram();

int main()
{
list<Client> males;
list<Client> females;
Client mClient;
Client fClient;

char choice;

do
{
choice = MainMenu();

switch(choice)      //Switch to to call either user selection
    {
    case ('1'):
        {
            AddMenu();
            break;
        }
    case ('2'):
        {
            PrintMenu();
            break;
        }
    case ('3'):
        {
            closeProgram(); 
        }
    }
}
while(choice <= '3' || choice >= '1' || isalpha(choice));       //input      validation to ensure the user selects an acceptable value
}

char MainMenu()
{
char choice;    //For main menu choice
cout << endl;
do
{
cout << "Main Menu\n" << "1\. Client Menu\n" << "2\. Print Menu\n" 
        << "3\. Exit\n";
    cout << "Selection: ";
    cin >> choice;
    cout << endl;
}   
while(choice < '1' || choice > '3' || isalpha(choice));     //input validation to ensure the user selects an acceptable value

return choice;
}
void AddMenu()
{
char choice;    //For main menu choice
cout << endl;
do
{
cout << "Client Menu\n" << "1\. Add Client\n" << "2\. UnMatch Client\n" 
        << "3\. Match Client\n" << "4\. Return\n";
    cout << "Selection: ";
    cin >> choice;
    cout << endl;
}   
while(choice < '1' || choice > '4' || isalpha(choice));     //input validation to ensure the user selects an acceptable value
 }
void PrintMenu()
{
char choice;    //For main menu choice
cout << endl;
do
{
cout << "Print Menu\n" << "1\. Print Matched Clients\n" << "2\. Print Free Clients\n" 
        << "3\. Print All Clients\n" << "4\. Return\n";
    cout << "Selection: ";
    cin >> choice;
    cout << endl;
}   
while(choice < '1' || choice > '4' || isalpha(choice));     //input validation to ensure the user selects an acceptable value
}
bool InitLoad()
{
return true;
}
void closeProgram()
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:29:07.493

You haven't qualified many of your function definitions. For example:

```
void checkName(string &nm) 
```

This should be:

```
void Client::checkName(string &nm) 
```

Because it is a member of the `Client` class. The same is true for `checkSex` and `checkPhone`.

# angularjs - AngularJS-基于过滤器切换数据集

> ID：15842935
> 
> 赞同：0
> 
> 时间：2013-04-05T20:28:20.983
> 
> 标签：angularjs

我才刚刚开始探索 AngularJS。我最近看了一个教程，解释如何设置基本过滤器。我现在正试图扩展这个概念。我觉得我接近这个的方式非常低效。

此处使用的方法要求为每个新数据集设置一个新的 Ctrl。如果您有 5 个不同的数据集要为其设置过滤器，则需要 5 个不同的控制器。当我查看下面的示例时，我看到很多重复的代码，这让我觉得可以以不同的方式完成。

这是一个有效的jsfiddle：http: [//jsfiddle.net/smithd/eUZ7q/1/](http://jsfiddle.net/smithd/eUZ7q/1/)

```
<div ng-app="searchApp">
    <div ng-controller="FilterCtrl" class="filter">
        <h1>Search Demo</h1>
        <hr/>
        <div ng-switch on="selection">
            <!-- <div ng-switch-default>default</div> -->
            <div ng-switch-when="avengers">
                <div ng-controller="AvengersCtrl">
                    <input type="text" ng-model="search">
                    <table ng-show="(filteredData = (avengers.cast | filter:search)) && search && search.length >= 1">
                        <tr ng-repeat="actor in avengers.cast | filter:search">
                            <td>{{actor.name}}</td>
                            <td>{{actor.character}}</td>
                        </tr>
                    </table>
                </div>
            </div>
            <div ng-switch-when="expendables">
                <div ng-controller="ExpendablesCtrl">
                    <input type="text" ng-model="search">
                    <table ng-show="(filteredData = (expendables.cast | filter:search)) && search && search.length >= 1">
                        <tr ng-repeat="actor in expendables.cast | filter:search">
                            <td>{{actor.name}}</td>
                            <td>{{actor.character}}</td>
                        </tr>
                    </table>
                </div>
            </div>
            <select ng-model="selection" ng-options="item for item in items" class="filter"></select>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T22:20:25.797

这是使用一个控制器处理所有内容并将数据存储在服务中的示例。

```
<div ng-controller="FilterCtrl">
        <h1>Search Demo</h1>
        <hr/>
        <select ng-model="selection" ng-options="item for item in items" class="filter"></select> <hr/>
        <div>
            <input type="text" ng-model="search">
            <table ng-show="(filteredData = (cast | filter:search)) && search && search.length >= 1">
               <tr ng-repeat="actor in cast | filter:search">
                  <td>{{actor.name}}</td>
                  <td>{{actor.character}}</td>
               </tr>
            </table>
        </div>
    </div> 
```

```
var app = angular.module('plunker', []);
app.factory('DataService', function () {
   return { avengers: [...],expendables: [...]}
 });   

app.controller('FilterCtrl', function($scope,DataService){  
  $scope.items = ['avengers', 'expendables'];
  $scope.selection = $scope.items[0];
  /* change data when select changes*/
  $scope.$watch('selection',function(){
    $scope.cast=DataService[$scope.selection];
  })

}); 
```

**[Plunker 演示](http://plnkr.co/edit/sX1BnYpquKNEGw6lizOq?p=preview)**

# javascript - Generate multiple random numbers in JavaScript

> ID：15842936
> 
> 赞同：0
> 
> 时间：2013-04-05T20:28:22.000
> 
> 标签：javascript, random

I'm trying to write a script for roulette system and I want the script to run until the **bank** variable reaches 0 or 11,000, and produce three pieces of data after each spin.

I have left parts of the code out for simplicity. The code in the if else statement is not the problem. Running the script until the variable reaches a certain point is where I'm stuck.

Would anyone be able to help me rewrite this script please? Thanks in advance.

```
(function() {
  var bank = 10000;
  var bet = 1;

  function spin() {
    var number = Math.floor(Math.random() * 36);

    if ( number == 0 ) {
      document.write("<p>The number " + number + " is neither high nor low.</p>");
      // removed
    } 
    else if ( number > 18 ) {
      document.write("<p>The number " + number + " is a high number.</p>");
      // removed
    }
    else {
      document.write("<p>The number " + number + " is a low number.</p>");
      // removed
    }
  };

  spin();

  document.write("<p>Total bank is now " + bank + ".</p>");
  document.write("<p>The next bet is " + bet + ".</p>");

})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:40:04.673

如果您在页面内调用此循环（即您不希望页面在此期间挂起，或者想要显示结果），您应该使用[requestAnimationFrame](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)：

```
window.requestAnimFrame = (function(){
  return  window.requestAnimationFrame       ||
          window.webkitRequestAnimationFrame ||
          window.mozRequestAnimationFrame    ||
          function( callback ){
            window.setTimeout(callback, 1000 / 60);
          };
})(); 
```

然后将您的循环设置为仅在银行在您接受的范围内时才调用自己：

```
function spinLoop() {
    spin();

    //perform your UI updates here

    if (bank >= 0 && bank <= 11000) requestAnimFrame(spinLoop);
} 
```

当然，您首先需要调用此函数来启动循环：

```
spinLoop(); 
```

# azure - 哪个 C# 字段将 Azure 表存储列创建为“二进制”类型

> ID：15842938
> 
> 赞同：1
> 
> 时间：2013-04-05T20:28:24.567
> 
> 标签：azure, azure-storage, azure-table-storage

如果在 C# TableEntity 类中有`bool`、或类型作为成员`int`，这些将转换为具有适当类型的 Azure 表列。`string``Guid`

似乎 Azure Table 列可以是以下类型：`string`, `binary`, `bool`, `boolean`, `byte`, `datetime`, `decimal`, `double`, `guid`, `int`, `int16`, `int32`, `int64`, `single`, `sbyte`。

在这些类型中，我应该在我的 C# 类中使用哪种类型来生成 Azure 表列作为`binary`类型​​？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T20:58:13.680

字节[]

从[了解表服务数据模型](http://msdn.microsoft.com/en-us/library/windowsazure/dd179338.aspx)。

# sql - MySQL JOIN 通过 id 连接两个具有不同行数的表

> ID：15842942
> 
> 赞同：0
> 
> 时间：2013-04-05T20:28:29.993
> 
> 标签：sql, select, join

我有两张桌子。

```
Table 1

+----+--------+
| Id | Column |
+----+--------+
|  1 |     23 |
+----+--------+
|  2 |     34 |
+----+--------+
|  3 |     99 |
+----+--------+

Table 2

+----+--------+
| Id | Column |
+----+--------+
| 10 |      1 |
+----+--------+
| 11 |      1 |
+----+--------+
| 21 |      2 |
+----+--------+
| 33 |      3 |
+----+--------+ 
```

我想结合这些表得到

```
Table 3 (Desired)

+--------+--------+
| Column | Column |
+--------+--------+
|     10 |     23 |
+--------+--------+
|     11 |     23 |
+--------+--------+
|     21 |     34 |
+--------+--------+
|     33 |     99 |
+--------+--------+ 
```

我知道如何得到这个：

```
Table 3 (Actual)

+--------+--------+
| Column | Column |
+--------+--------+
|     10 |     23 |
+--------+--------+
|     11 |   null |
+--------+--------+
|     21 |     34 |
+--------+--------+
|     33 |     99 |
+--------+--------+ 
```

但是当行有重复的 Id 列时，第一个是正确的值，其余的总是 NULL。

我必须生成表 3 的查询是

```
SELECT table2.id, table1.Column 
FROM table2 
LEFT JOIN (SELECT .... ) as table1 ON table1.id = table2.Column 
```

如何加入表以获得正确版本的表 3？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:40:56.870

这应该可以正常工作：

```
SELECT 
  t2.id     AS column1,
  t1.column AS column2
FROM table2 AS t2
LEFT JOIN table1 AS t1 ON t1.id = t2.column; 
```

在这里查看它的实际效果：

*   [SQL 小提琴演示](http://sqlfiddle.com/#!2/bdeac/3)

这将为您提供所需的相同结果：

```
| COLUMN1 | COLUMN2 |
---------------------
|      10 |      23 |
|      11 |      23 |
|      21 |      34 |
|      33 |      99 | 
```

# javascript - 去除输入标签旁边的文本

> ID：15842944
> 
> 赞同：-1
> 
> 时间：2013-04-05T20:28:36.150
> 
> 标签：javascript, jquery, html, jquery-selectors

请帮我解决一个简单的问题：

代码：

```
<span>
<input id="elemento_20_1" name="elemento_20_1" class="elemento text" size="2" maxlength="2" value="" type="text"> /
<label for="elemento_20_1">DD</label>
</span> 
```

使用 Jquery，我怎样才能去掉输入旁边的“/”？我尝试 .next() 但根本没有用。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T20:33:35.587

```
$('span').contents().filter(function(){
   return this.nodeType === 3;
}).remove(); 
```

[http://jsfiddle.net/2AqWW/](http://jsfiddle.net/2AqWW/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:32:40.093

您可以尝试以下方法：

```
$("span").html($("span").html().replace(" / ","")); 
```

即使我建议不要使用 Jquery

如果您只想剪切没有空格的“/”，那么：

```
$("span").html($("span").html().replace("/","")); 
```

# mysql - 带有一些加密数据的mysql结果

> ID：15842946
> 
> 赞同：0
> 
> 时间：2013-04-05T20:28:44.370
> 
> 标签：mysql, encryption, aes

是否可以获得查询结果并解密一列？

例如：

```
name | username | date     | password
ted  | teddy01  | 01/01/13 | s4drcfgbh76 
```

所以我想要这个专栏（上图）的结果，除了密码是 AES_ENCRYPTED 之外，它都是常规文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:03:14.703

我已经发表评论说为什么这是存储密码的不好方法，但是因为我讨厌人们只是回答“不要那样做”，所以我想我会告诉你如何在不同的情况下这样做。

在 MySQL 中，您可以调用[AES_DECRYPT](https://dev.mysql.com/doc/refman/4.1/en/encryption-functions.html#function_aes-decrypt)。

示例查询将是：

```
SELECT username, created_date, AES_DECRYPT(encrypted_column_data,key) AS decrypted_data
FROM table
WHERE username = '$username' 
```

这将为您提供如下结果：

```
username    | created_date | decrypted_data
Mitnosirrag | 2012-02-03   | "here is an unencrypted string" 
```

# mysql - mySQL Stored Procedure - Cursor error

> ID：15842951
> 
> 赞同：2
> 
> 时间：2013-04-05T20:29:05.073
> 
> 标签：mysql, sql, database, cursor, procedure

I'm trying to write a mySQL procedure with a cursor to calculate a fare. I pass in the stationid's then I figure out what zone they are in. The fare is a set value of $1 and an additional $0.20 for each zone traveled in. The code I have so far runs but there is a problem with the cursor not fetching the values into the variables.

Any help would be greatly appreciated. Thanks

Tables:

```
 DROP DATABASE IF EXISTS luasSystem;
    CREATE DATABASE luasSystem;
    USE luasSystem;

    CREATE TABLE IF NOT EXISTS line
    (
    line_id INT NOT NULL AUTO_INCREMENT,
    Line_colour CHAR(10) NOT NULL,
    PRIMARY KEY (line_id)
    )   ENGINE=InnoDB;

    CREATE TABLE IF NOT EXISTS zone
    (
    zone_id INT NOT NULL AUTO_INCREMENT,
    zone_name VARCHAR(20) NOT NULL,
        line INT NOT NULL,
    PRIMARY KEY (zone_id),
    FOREIGN KEY (line) REFERENCES line(line_id) ON UPDATE CASCADE ON DELETE RESTRICT
    )   ENGINE=InnoDB;

    CREATE TABLE IF NOT EXISTS station
    (
    station_id INT NOT NULL AUTO_INCREMENT,
    station_name CHAR(20) NOT NULL,
    service CHAR(20),
        line INT NOT NULL,
        zone INT NOT NULL,
    PRIMARY KEY (station_id),
    FOREIGN KEY (line) REFERENCES line(line_id) ON UPDATE CASCADE ON DELETE RESTRICT,
    FOREIGN KEY (zone) REFERENCES zone(zone_id) ON UPDATE CASCADE ON DELETE RESTRICT
    )   ENGINE=InnoDB; 
```

Stored Procedure:

```
 DROP PROCEDURE IF EXISTS calculateFare;
    DELIMITER //
    CREATE PROCEDURE calculateFare
    (
    IN stationid1 INT, IN stationid2 INT
    )
    BEGIN

    DECLARE zoneNum1 INT;
    DECLARE zoneNum2 INT;
    DECLARE num INT;
    DECLARE fare DOUBLE;

    DECLARE tableEnd BOOLEAN;

    DECLARE zoneCur CURSOR FOR
    SELECT zone, zone FROM station
    WHERE station_name = stationid1 AND station_name = stationid2;

    DECLARE CONTINUE HANDLER FOR NOT FOUND
    SET tableEnd = TRUE;

    OPEN zoneCur;
    the_loop: LOOP

    FETCH zoneCur
    INTO zoneNum1, zoneNum2;

    IF tableEnd THEN
    CLOSE zoneCur;
    LEAVE the_loop;
    END IF;

    SET fare = 1;
    SET num = 0;

    IF zoneNum1 < zoneNum2 THEN
    SET num = zoneNum2 - zoneNum1;
    ELSEIF zoneNum1 > zoneNum2 THEN
    SET num = zoneNum1 - zoneNum2;
    END IF;

    SET fare = (num * 0.20) + 1;
    SELECT fare;
    END LOOP the_loop;
    END //
    DELIMITER ;

    CAll calculateFare(3,5); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:28:02.910

使用十进制值而不是整数会不会更容易？建议你看看：[http ://dev.mysql.com/doc/refman/5.0/en/fixed-point-types.html](http://dev.mysql.com/doc/refman/5.0/en/fixed-point-types.html)

# python - 如何优化这个 MapReduce 函数，Python，mrjob

> ID：15842956
> 
> 赞同：1
> 
> 时间：2013-04-05T20:29:20.007
> 
> 标签：python, hadoop, mapreduce, mrjob

我对 Map/Reduce 原则和 python mrjob 框架非常陌生，我编写了这个示例代码，它运行良好，但我想知道我可以在其中进行哪些更改以使其“完美”/更高效。

```
from mrjob.job import MRJob
import operator
import re

# append result from each reducer 
output_words = []

class MRSudo(MRJob):

    def init_mapper(self):
        # move list of tuples across mapper
        self.words = []

    def mapper(self, _, line):
        command = line.split()[-1]
        self.words.append((command, 1))

    def final_mapper(self):
    for word_pair in self.words:
            yield word_pair

    def reducer(self, command, count): 
        # append tuples to the list
        output_words.append((command, sum(count)))

    def final_reducer(self):
        # Sort tuples in the list by occurence
        map(operator.itemgetter(1), output_words)
        sorted_words = sorted(output_words, key=operator.itemgetter(1), reverse=True)
        for result in sorted_words:
            yield result

    def steps(self):
        return [self.mr(mapper_init=self.init_mapper,
                        mapper=self.mapper,
                        mapper_final=self.final_mapper,
                        reducer=self.reducer,
                        reducer_final=self.final_reducer)]

if __name__ == '__main__':
    MRSudo.run() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T08:56:37.890

有两种方法可以遵循。

**1\. 改进您的流程**

您正在进行分布式字数统计。此操作是代数的，但您没有利用此属性。

对于您输入的每个单词，您都会向减速器发送一条记录。这些字节必须被分区，通过网络发送，然后由reducer排序。它既不高效也不可扩展，映射器发送到减速器的数据量通常是一个瓶颈。

你应该在你的工作中添加一个组合器。它的作用与您当前的减速器完全相同。组合器在同一地址空间中的映射器之后运行。这意味着您通过网络发送的数据量不再与输入的字数呈线性关系，而是受唯一字数的限制。这通常要低几个数量级。

由于分布式字数示例被过度使用，您可以通过搜索“分布式字数组合器”轻松找到更多信息。所有代数运算都必须有一个组合器。

**2\. 使用更高效的工具**

Mrjob 是快速编写 map reduce 作业的好工具。通常，编写 python 作业比编写 Java 作业要快。但是它有运行时成本：

1.  Python 通常比 Java 慢
2.  MRJob 比大多数 python 框架慢，因为它还没有使用`typedbytes`

您必须决定是否值得使用常规 API 在 Java 中重写您的一些作业。如果您正在编写长期存在的批处理作业，那么投入一些开发时间来降低运行时成本可能是有意义的。

从长远来看，编写 Java 作业通常不会比用 python 编写更长。但是你必须做一些前期投资：创建一个带有构建系统的项目，打包它，部署它等等。使用 MRJob，你只需要执行你的 python 文本文件。

Cloudera几个月前[对 Hadoop python 框架进行了基准测试。](http://blog.cloudera.com/blog/2013/01/a-guide-to-python-frameworks-for-hadoop/)MRJob 比他们的 Java 作业慢得多（5 到 7 倍）。当 typedbytes 可用时，MRJob 性能应该会提高，但 Java 作业仍然会快 2 到 3 倍。

# javascript - Implementing Dojo Widget

> ID：15842958
> 
> 赞同：1
> 
> 时间：2013-04-05T20:29:39.413
> 
> 标签：javascript, dojo, widget

I am new to Dojo and was asked to look at creating a widget. The widgets will be on different pages and has to read the page info using the meta data. Based on the meta data value it should pulls a list of content to display of the page from the database. I would get suggestion on where should I start first and how to proceed. Any samples or similar widget examples would be of help.

# c++ - 如何在没有实现的情况下测试纯虚拟类？

> ID：15842961
> 
> 赞同：0
> 
> 时间：2013-04-05T20:29:54.427
> 
> 标签：c++, googlemock

我有以下课程：

```
// IVirtualController.hpp
class IVirtualController
{
public:
  virtual InputCode validate(int keycode) = 0;
  virtual ~IVirtualController();
}; 
```

现在我想模拟这个类：

```
// InputManagerTest.cpp
class MockController : public IVirtualController
{
public:
  MOCK_METHOD1(validate,InputCode(int keycode));
}; 
```

但这不起作用！我收到以下错误：

> test/input/InputManagerTest.o：在函数`MockController::~MockController()': test/input/InputManagerTest.cpp:19: undefined reference to`IVirtualController::~IVirtualController()' 中 test/input/InputManagerTest.cpp:19：未定义对 `IVirtualController::~IVirtualController()' 的引用
> 
> test/input/InputManagerTest.o：在`IVirtualController::IVirtualController()': test/input/../../src/input/IVirtualController.hpp:14: undefined reference to`IVirtualController 的函数 vtable 中
> 
> 测试/输入/InputManagerTest.o：在函数`MockController::MockController()': test/input/InputManagerTest.cpp:15: undefined reference to`IVirtualController::~IVirtualController()'
> 
> 测试/输入/InputManagerTest.o:(.rodata._ZTI14MockController[_ZTI14MockController]+0x10): 未定义对“IVirtualController 的类型信息”的引用

搜索告诉我“未定义对 vtable/typeinfo 的引用”错误是由缺少实现、虚拟方法声明后面缺少“= 0”或非虚拟析构函数引起的。IVirtualController 类没有实现，但这应该不是问题，因为 MockController 正在实现它，对吧？注释掉整个 InputManagerTest.cpp 模拟文件“解决”了这个问题，即使 IVirtualController 在另一个类中使用。

我该如何测试它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T20:30:40.183

没有。**必须始终实现**析构函数。甚至是纯虚拟的。

那是因为它是如何工作的。`virtual`应用于析构函数持有~~不同的~~更多的意义。通常，`virtual`如果在派生类中重写了方法，则不会调用该方法，但`virtual`仍会调用析构函数，因此需要实现。

for 析构函数只使`=0`类抽象，但如前所述，仍然需要实现。

# css - Safari rendering fixed-width css incorrectly

> ID：15842964
> 
> 赞同：1
> 
> 时间：2013-04-05T20:29:57.773
> 
> 标签：css, safari

On my websites where I have a fixed width container (width:985px;) I find that on a Safari 5.1.7 on windows 7, 64-bit, the rendered width of the container on screen is only about 80% of that width forcing the layout to break as not wide enough.

On another windows 7 (64 bit) machine with Safari 5.0.3, all is fine. On both computers, things look fine in IE (various versions), Opera, firefox, and chrome. My CSS validates. I did view on an IPad, and layout was fine.

Appreciate any thoughts, help, etc. Thanks!

```
#wrapper {position: relative;margin: 0 auto;width: 960px; text-align:left;} 
```

wrapper is simply the first div after body tag Here is link to one site where renders improperly in safari 5.1.7 on windows. [http://www.wingserv.com/](http://www.wingserv.com/)

# .net - “伪造”项目参考？

> ID：15842966
> 
> 赞同：1
> 
> 时间：2013-04-05T20:30:09.123
> 
> 标签：.net, msbuild, build-events

我有一个解决方案结构，例如[Ports And Adapters Architecture](http://alistair.cockburn.us/Hexagonal+architecture)或[Onion Architecture](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/)。我的组合根（在本例中为 Web 应用程序）和基础设施库仅引用核心库。

我还可以使用 Castle Windsor 在运行时加载基础设施库。但是，我没有在我的组合根目录上引用这些库，因此它们的构建输出不会复制到输出文件夹。我想我需要一个自定义构建步骤，但我不知道如何实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:23:50.643

使用构建后事件将程序集复制到输出目录。这是一个教程，您将能够从中获得良好的感觉。

[http://eyeung003.blogspot.com/2009/11/visual-studio-post-build-event-to-copy.html?m=1](http://eyeung003.blogspot.com/2009/11/visual-studio-post-build-event-to-copy.html?m=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T10:25:02.863

我最终将未引用项目的输出路径设置为与 Web 应用程序相同。

```
..\WebApp\bin 
```

这适用于在 Visual Studio 中构建解决方案。对于发布构建（仅构建网站项目），我编写了一个自定义脚本来构建 Web 应用程序和其他库。构建这些库后，所有 dll 文件都使用[复制任务](http://msdn.microsoft.com/en-us/library/3e54c37h.aspx)`WebApp\bin`复制到内部文件夹。`_PublishedWebsites`

# knockout.js - Knockout 认为 IE8 中的对象为空

> ID：15842967
> 
> 赞同：0
> 
> 时间：2013-04-05T20:30:09.837
> 
> 标签：knockout.js

我遇到了一个我似乎无法解决的问题。我的设置在 chrome、firefox、IE9 上运行良好，但是一旦文档模式变为 IE8 淘汰赛开始出现问题，它认为 observables 为空，但如果我在 IE8 中使用开发人员工具，我可以看到它已被填充。

这是我的数据模型：

```
function PatientSearchModel(data) {
    var self = this;

    var defaultValue = '';

    var memberId = defaultValue;
    var firstName = defaultValue;
    var lastName = defaultValue;
    var day = defaultValue;
    var month = defaultValue;
    var year = defaultValue;

    if (data != undefined) {
        memberId = data.MemberId;
        firstName = data.FirstName;
        lastName = data.LastName;
        day = data.Day;
        month = data.Month;
        year = data.Year;
    }

    self.MemberId = ko.observable(memberId);
    self.FirstName = ko.observable(firstName);
    self.LastName = ko.observable(lastName);

    //date validation

    var monthValidation = {
        min: 01,
        max: 12
    };

    var dayValidation = {
        min: 01,
        max: 31
    };

    var yearValidation = {
        minLength: 4
    };

    self.Month = ko.observable(month).extend(monthValidation);
    self.Day = ko.observable(day).extend(dayValidation);
    self.Year = ko.observable(year).extend(yearValidation);

    self.AllowSearchByNameFields = ko.computed(function () {
        if (self.MemberId() == "") {
            return true;
        }

        var empty = '';

        self.FirstName(empty);
        self.LastName(empty);
        self.Day(empty);
        self.Month(empty);
        self.Year(empty);
        return false;
    });

    self.AllowSearchByMemberIdField = ko.computed(function () {
        var empty = "";
        if (self.FirstName() != empty || self.LastName() != empty ||
            self.Day() != empty || self.Month() != empty || self.Year() != empty) {

            self.MemberId('');
            return false;
        }
        return true;
    });

    self.SearchById = ko.computed(function () {
        return self.MemberId() != "";
    });

    self.ValidPatientNameSearchCriteria = ko.computed(function () {
        var empty = '';
        if (self.FirstName().length > 0 && self.LastName().length > 0) {
            if (self.Day() == empty && self.Month() == empty && self.Year() == empty) {
                return true;
            }
            if (self.Day().length > 1 && self.Month().length > 1 && self.Year().length > 3) {
                return true;
            }
        }
        return false;
    });
} 
```

这是我的 ViewModel 的重要部分：

```
function PatientDetialsViewModel() {
    var self = this;

    self.SearchFields = new PatientSearchModel();

...other properties

} 
```

这是我的单个应用程序对象：

```
var spa = {
    viewModels: {
        providerDetails: new ProviderDetailsViewModel(),
        patientDetails: new PatientDetialsViewModel(),
        primaryDiagnosisDetails: new PrimaryDiagnosisViewModel()
    }
};

$(document).ready(function () {
    ko.applyBindings(spa.viewModels);
}); 
```

这是HTML：

```
<section id="PatientSearch" data-bind="with: spa.viewModels.patientDetails">
    <table width="100%" class="nchPortalInnerTable1" cellpadding="5">
        <tr class="searchSelectHeader" colspan="2">
            <td colspan="2">Patient Search</td>
        </tr>
        <tr>
            <td align="center" colspan="2">
                <span style="font-weight: bold">- Enter Either -</span>
            </td>
        </tr>
        <tr>
            <td width="100">Member ID: </td>
            <td>
                <input type="text" id="patientMemberId" data-bind="value: SearchFields.MemberId, enable: SearchFields.AllowSearchByMemberIdField"/>
                <em>(Complete ID number required.)</em>
            </td>
        </tr>
        <tr>
            <td align="center" colspan="2">
                <span style="font-weight: bold">- OR -</span>
            </td>
        </tr>
        <tr>
            <td width="100">First Name: </td>
            <td>
                <input type="text" id="patientFirstName" name="patientLastName" data-bind="value: SearchFields.FirstName, enable: SearchFields.AllowSearchByNameFields" /> <em>(Partial ok, at least one character required.)</em>
            </td>
        </tr>
        <tr>
            <td width="100">Last Name: </td>
            <td>
                <input type="text" id="patientLastName" name="patientLastName" data-bind="value: SearchFields.LastName, enable: SearchFields.AllowSearchByNameFields"/> <em>(Partial ok, at least one character required.)</em>
            </td>
        </tr>
        <tr>
            <td width="100">Date of birth: </td>
            <td>
                mm <input type="text" id="patientDOBmm" name="patientDOBmm" maxlength=2 style="width:15px;" onkeyup="tabToNextField(this,'patientDOBdd')" data-val-number="Month must be a number" data-val-range-min="1" data-val-range-max="12" data-val="true" data-val-range="Invalid month!" data-bind="value: SearchFields.Day, enable: SearchFields.AllowSearchByNameFields" /> /
                dd <input type="text" id="patientDOBdd" name="patientDOBdd" maxlength=2 style="width:15px;" onkeyup="tabToNextField(this,'patientDOByyyy')" data-val-number="Day must be a number" data-val-range-min="1" data-val-range-max="31" data-val="true" data-val-range="Invalid day!" data-bind="value: SearchFields.Month, enable: SearchFields.AllowSearchByNameFields" /> /
                yyyy <input type="text" id="patientDOByyyy" name="patientDOByyyy" maxlength=4 style="width:50px;" data-val-range-min="1800" data-val-number="Year must be a number" data-val="true" data-val-range="Invalid year!" data-bind="value: SearchFields.Year, enable: SearchFields.AllowSearchByNameFields" />
                <em>(If used, full date must be entered)</em>
            </td>
        </tr>
        <tr style="background-color: #ddd">
            <td align="center" colspan=2>
                <input id="searchPatient_button" type="button" value="Search" data-bind="click: search" />
                <input id="searchPatient_cancel" type="button" value="Cancel" data-bind="click: clear"/>
                <span data-bind="visible: DisplaySearchSpinner">
                    <img src="@Url.Content(spinnerSmallGif)" alt="Spinner"/>
                </span>
            </td>
        </tr>
    </table>
</section> 
```

我只在 IE8 中看到错误：

> SCRIPT5022：无法解析绑定。消息：TypeError：'SearchFields' 未定义；绑定值：值：SearchFields.MemberId，启用：SearchFields.AllowSearchByMemberIdField

我不确定这怎么可能，因为我用一个新的创建 SearchFields 属性，如果我在开发人员工具观察器中找到该对象，它实际上是填充的/非空的。

我已经把头撞在墙上一天了。以前有人经历过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:54:13.710

`<section>`我相信问题在于您正在使用的 HTML5 元素（例如）。此处引用了该问题：[https ://github.com/SteveSanderson/knockout/issues/194](https://github.com/SteveSanderson/knockout/issues/194)

> 要在 IE 6、7、8 上获得 HTML5 支持（并从 KO 中的此更改中受益），您需要参考以下任一：
> 
> *   innershiv.js 或者，
> *   jQuery 1.7 加上modernizr.js

工作 jsfiddle（包括淘汰前的 jquery 和modernizr）：http: [//jsfiddle.net/antishok/MuK6E/3/](http://jsfiddle.net/antishok/MuK6E/3/)

# primefaces - 如何在扩展器 primefaces 属性内调用的 javascript 函数中从 jqplot 条形图中获取类别/系列值？

> ID：15842970
> 
> 赞同：1
> 
> 时间：2013-04-05T20:30:19.303
> 
> 标签：primefaces, jqplot

我有以下代码：

```
<p:barChart id="bar" extender="extBar"
        value="#{primeBean.findBarModel('simpleBarChart')}" />

<script>
                function ext() {

                        }       
</script> 
```

将被渲染的值：

```
[
        [[5,1], [1,2], [3,3], [4,4]],
        [[4,1], [7,2], [1,3], [2,4]]
] 
```

如何在 ext 函数中获取类别/系列值？是否有一个元素可以让我在 ext 中获取这些值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:00:41.610

是的，这很容易。以这种方式为您添加一个`widgetVar`属性：`<p:barChart`

```
<p:barChart widgetVar="myWidget" ... /> 
```

您可以使用 javascript 访问数据`myWidget.cfg.data`。您将获得一个可以使用常规 js 读取的数组数组。

您可以在[展示](http://www.primefaces.org/showcase/ui/barChart.jsf)中在线测试它，如果您的浏览器有一个 javascript 控制台，则打开一个 javascript 控制台并输入：`widget_basic.cfg.data`

# c# - 用户无法向下滚动到 datagridview 中的所有行

> ID：15842971
> 
> 赞同：1
> 
> 时间：2013-04-05T20:30:21.777
> 
> 标签：c#, winforms, gridview

我有一个简单的表单，其中包含一个`textbox`和`gridview`一个保存按钮。用户在文本框中输入客户名称并按回车键，然后我从数据库表中获取数据，然后将它们显示在中`gridview`，一切都很好，但是当行数很大并且出现网格视图的滚动条时，问题就出现了用户可以向下滚动以添加新行或浏览最后几行，但令人惊讶的是我无法向下滚动到所有行，因为滚动条只允许我滚动到最后几行或树行之前，所以我必须选择一行然后用键盘上的向下箭头向下，这很烦人而且不专业。

信息可能有助于我在这里使用没有空间代码来向网格添加行，就像这样的正常方式：

```
joinsGridView.Rows.Clear();
        for (int i = 0; i < dataList.Count; ++i)
        {
            RegisterJointFormData item = dataList[i];

            joinsGridView.Rows.Add();
            DataGridViewComboBoxCell joinNameCombo = joinsGridView.Rows[i].Cells["JoinName"] as DataGridViewComboBoxCell;
            joinNameCombo.Value = dataList[i].Join.JoinTypeID;
            joinTypeBindingSource.Position = joinTypeBindingSource.IndexOf(item.Join.JoinType);
            joinsGridView.Rows[i].Cells["JoinPrice"].Value = item.Join.JoinType.Price;
            joinsGridView.Rows[i].Cells["Discount"].Value = item.Join.Discount;
            joinsGridView.Rows[i].Cells["PayedMoney"].Value = item.PayedMoney;
            joinsGridView.Rows[i].Cells["RegisterDate"].Value = item.Join.RegisterDate.ToShortDateString();
            joinsGridView.Rows[i].Cells["Duration"].Value = item.Join.JoinType.Duration;
            joinsGridView.Rows[i].Cells["SessionsAttened"].Value = item.SessionsAttend;
        } 
```

我正在使用实体框架连接到数据库并获取数据的另一个信息。

我希望我正确地描述了这个问题，并对我的英语不好表示抱歉:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:58:40.737

最后我发现了问题，正如我预期的那样非常愚蠢，问题是我在表单加载时禁用了网格，在用户输入客户名称后，我用数据填充网格然后启用它并通过首先启用网格来修复然后将数据添加到网格中。

# arrays - 取一个或多个数组的平均值的子程序

> ID：15842972
> 
> 赞同：0
> 
> 时间：2013-04-05T20:30:22.423
> 
> 标签：arrays, perl

我正在研究一个取 1 个或多个数组的平均值的子程序。我想在不使用模块的情况下做到这一点。

```
use strict;
use warnings;

use List::Util 'sum';

my @w = (0, 2);
my @x = (1, 3);
my @y = (2, 2);
my @z = (1, 1);

# the average of these four arrays is (1,2) since
# (0+1+2+1)/4 = 1 and (2+3+2+1)/4 = 2    

my @arrays = \(@w, @x, @y, @z);

my @avg;
# this is the way to do it using the module
for my $i (0..$#w) {
    $avg[$i] =  sum(map $_->[$i], @arrays) / @arrays;
}
print "@avg\n";

# my way of doing it without module
@avg;
for my $i (0..$#w) {
    $avg[$i] = prod_sum(map $_->[$i], \@arrays) / @arrays;
}

print "@avg\n";

# subroutines
sub prod_sum{
    my $o = $_[0];
    my $arr_ref = $_[1];
    my $array_ref;

    foreach my $row (@$arr_ref){
        foreach my $cell (@$row) {
            push(@{ $array_ref }, $_);
        }
    }

    my $sum = $o + the_sum($array_ref);
    return $sum;
}

sub the_sum{
    my $sum = 0;
    for ( @{$_[0]} ) {
        $sum += $_;
    }
    return $sum;
} 
```

**输出**

```
1 2
[pair of really random big numbers] 
```

第一个输出是正确的。它显示所有数组的平均值。第二个输出是完全错误的。如何在不使用模块的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:43:56.800

您认为 sum 正在传递两个变量，但事实并非如此。它只是被传递一个数组。修改您的 prod_sum 以仅期望一个数组（并`\@arrays`在 prod_sum 的调用中替换为 just `@arrays`）。或者你可以使用这个：

```
sub sum {
  return 0 if $#_ < 0;
  my $head = shift;
  return $head + sum(@_);
} 
```

以上是对数组求和的递归子程序。

注意：如果您的数组有超过 100 个元素，`use warnings`将发出深度递归警告。有关该主题的更多信息，请参见[此处](http://www.perlmonks.org/?node_id=238938)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T20:53:25.923

我提出这个解决方案：

```
use strict;
use warnings;

my @w = (0, 2);
my @x = (1, 3);
my @y = (2, 2);
my @z = (1, 1);

my @arrays = \(@w, @x, @y, @z);

my ($x, $y) = (0, 0);
foreach my $arr(@arrays) {
    $x += $arr->[0];
    $y += $arr->[1];
}

my @result = ( $x / @arrays,  $y / @arrays);

print "(@result)", "\n";  # <---- prints (1 2) 
```

# nginx - HSTS and Chrome

> ID：15842975
> 
> 赞同：4
> 
> 时间：2013-04-05T20:30:32.550
> 
> 标签：nginx, hsts

```
Error 102 (net::ERR_CONNECTION_REFUSED): The server refused the connection. 
```

This is what Chrome shows when you go to [https://struct.tumblr.com/](https://struct.tumblr.com/). I then CNAME this to a subdomain like blog.mysite.com and i have HSTS on in my Nginx config like so:

```
add_header Strict-Transport-Security "max-age=315360000; includeSubdomains "; 
```

I use a wildcard ssl cert for a multi-tennant site, and blog is cnamed to tumblr. So I think NGINX automagically redirects to [https://blog.mysite.com](https://blog.mysite.com) and since that throws up Chrome 102 error, i can never see the blog through my cname in Chrome.

Can i tell nginx to somehow 'all subdomains but blog'?

Thanks

# blackberry-simulator - 在模拟器中调用 SMS 组合

> ID：15842980
> 
> 赞同：0
> 
> 时间：2013-04-05T20:31:05.253
> 
> 标签：blackberry-simulator, blackberry-10, blackberry-cascades

在调用框架上的[BlackBerry 文档](https://developer.blackberry.com/html5/documentation/text_messages.html)之后，我尝试调用打开联系人以及撰写短信和电子邮件。联系人打开工作正常，但我无法让 SMS 和电子邮件组合在模拟器中工作。代码正在执行，但没有任何反应。有什么想法我会做错什么吗？

这是我正在使用的一段代码：

```
InvokeRequest request;
request.setAction("bb.action.COMPOSE");
request.setMimeType("message/rfc822");
request.setTarget("sys.pim.uib.email.hybridcomposer");

QByteArray ba(list.toUtf8());
request.setData(ba);
m_invokeManager->invoke(request); 
```

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T07:22:11.853

我也面临这个问题。

短信和电子邮件无法运行模拟器，因为短信/电子邮件应用程序未安装在模拟器中。

您必须在设备中进行测试。

下面的代码在我的设备中运行良好..

**发送短信：**

```
InvokeRequest invokeRequest;
invokeRequest.setTarget("sys.pim.text_messaging.smsuri");
invokeRequest.setAction("bb.action.OPEN");
invokeRequest.setUri("sms:4444");
invokeRequest.setMimeType("*"); 
```

**发送电子邮件：**

```
InvokeRequest invokeRequest;
invokeRequest.setTarget("sys.pim.uib.email.hybridcomposer");
invokeRequest.setAction("bb.action.COMPOSE");
invokeRequest.setUri("mailto:info@google.com");
invokeRequest.setMimeType("message/rfc822") 
```

谢谢..

# html - 无法使用键盘将焦点赋予 Flash 对象，但可以使用 JavaScript 进行焦点

> ID：15842981
> 
> 赞同：1
> 
> 时间：2013-04-05T20:31:06.530
> 
> 标签：html, google-chrome, focus, embedded-flashplayer

这个问题与我在这里的其他问题相关（但不同于）：[Give focus to browser](https://stackoverflow.com/questions/15842139/give-focus-to-browser)

我的页面上有一个嵌入式 Flash 对象，我希望它包含在选项卡循环中。我已经设置`tabindex`好了，它在 FireFox 中有效，但在 Google Chrome 和 Apple Safari 中的焦点仍然过去了。

下面是一些简单的测试代码：

```
<a href="#" tabindex=1>A</a>
<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width=550 height=400 id=movie_name tabindex=1>
    <param name=movie value="http://helpx.adobe.com/content/help/en/flash-player/kb/find-version-flash-player/_jcr_content/main-pars/flash_1/file.res/theFile.swf"/>
    <embed src="http://helpx.adobe.com/content/help/en/flash-player/kb/find-version-flash-player/_jcr_content/main-pars/flash_1/file.res/theFile.swf" name=movie_name type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" tabindex=1 />
</object>
<a href="#" tabindex=1>Z</a>
<button onclick="document.movie_name.focus()">Force focus into Flash</button> 
```

（在小提琴中：http: [//jsfiddle.net/tcDGq/](http://jsfiddle.net/tcDGq/)）

一切都有一个`tabindex`of `1`（我也尝试过 , 等的变体`0`）`0,1,2`，但不可能用键盘聚焦 flash 对象。单击它可以工作，按下按钮也可以，这会触发一些简单的 JavaScript。您可以通过捣碎 TAB 来判断它是否集中；它永远不会通过键盘放弃焦点，因此您永远不会看到任何突出显示。

好的，所以我可以一起破解一个拦截 TAB 键并在特定情况下强制聚焦的修复程序，但坦率地说，这是一个可怕的解决方案。我在这里错过了一些属性吗？如果可能的话，我正在寻找一个纯 HTML 修复程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T15:17:49.327

原来这是 WebKit 中的一个已知错误，因此影响 Chrome 和 Safari（不是 FireFox，我不知道 Internet Explorer 或 Opera）

相关的跟踪器在这里：[https ://bugs.webkit.org/show_bug.cgi?id=32292](https://bugs.webkit.org/show_bug.cgi?id=32292)

巧合的是，这个问题几天前就解决了，所以希望它很快就会公开发布。由于 Chrome 和 Safari 都设法让大多数用户保持最新状态，我认为在此期间构建解决方法不值得（但如果有人确实有很好的解决方法，请在此处发布！）

# jquery - jQuery AJAX 之争

> ID：15842983
> 
> 赞同：0
> 
> 时间：2013-04-05T20:31:08.513
> 
> 标签：jquery, html

我搜索了互联网，直到我变蓝，但无法弄清楚它为什么不起作用。

我有javascript，但这仅适用于firefox。没有其他浏览器。

所以，我决定去jQuery。

我想做的是： - 我有一个文件夹。- 在这个文件夹中，我有一个 html.html 文件。这是我的主要网站。- 然后我有一个文件 home.html。

html.html 看起来像这样：

```
<html>
    <head>
        <title>
            Struggeling with jQuery ajax! *******
        </title>
    </head>
    <body>
        <div="one">
            Load the page here
        </div>
    </body>
</html> 
```

home.html 看起来像这样：

```
 <html>
        <head>

        </head>
        <body>
            Please load this into the div! (this text will be displayed in other words)
        </body>
    </html> 
```

我到底怎么能用 jQuery 得到这个？请帮我。我无法做到这一点。

==================================================== ====================================

好的，这就是现在的样子。在我的文件中，我有 home.html：

```
<html>
    <head>
        <title>
            Struggeling with jQuery ajax! *******
        </title>
        <script language="javascript" src="jQuery.js"></script>
        <script>
            $(document).ready(function() {
                $("#one").load("html.html body");
            });
        </script>
    </head>
    <body>
        <div id="one">
            Load the page here
        </div>
    </body>
</html> 
```

我下载了 jQuery 的开发版本，这是 home.html 所在的文件（jQuery.js）。

然后在另一个 html.html 中看起来像这样：

```
<html>
    <head>

    </head>
    <body>
        Please load this into the div! (this text will be displayed in other words)
    </body>
</html> 
```

但这不起作用。我没有收到“请将此加载到 div 中！（此文本将显示为换句话说）”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:34:14.040

试试这个jquery

```
<script>
$(document).ready(function() {
    $("#one").load("home.html body");
});
</script> 
```

此外，更新您的 html.html（我不喜欢这个名称，顺便说一句，使用 index.html 作为主页）目标 div ID。

```
<div id="one"></div> 
```

编辑：我也看不到你引用你的 jQuery 库的地方，一定要这样做！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:37:21.760

首先给你的 div 一个正确的 ID。

```
<div id="one">
    Load the page here
</div> 
```

然后使用 jQuery 获取和加载，使用[jQuery.load()](http://api.jquery.com/load/)函数。

```
$('#one').load('folder/html.html', function() {
  alert('Load was performed.');
}); 
```

还要删除任何“加倍”标签。换句话说，当您插入时，`html.html`您不想要：

```
<div id="one">
     <html>
          <body>
               Stuff
          </body>
     </html>
</div> 
```

它看起来很难看，可能会导致问题。所以删除那些额外的`<html>`和`<body>`标签。

# android - 列表视图中未显示页脚视图（自定义适配器）

> ID：15842990
> 
> 赞同：1
> 
> 时间：2013-04-05T20:31:36.673
> 
> 标签：android, listview, lazy-loading, adapter, android-arrayadapter

页脚视图不显示在列表视图的末尾。请告诉我哪里出错了。页脚视图的代码是：

```
footerView = ((LayoutInflater)getBaseContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(
                R.layout.listfooter, null, false);
        list.addFooterView(footerView);

        footerView.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

            }

        }); 
```

完整代码：

```
public class CustomizedListView extends Activity {
    // All static variables
    static final String URL = "https://itunes.apple.com/us/rss/topalbums/limit=20/json";
    // XML node keys
    static final String KEY_SONG = "song"; // parent node
    static final String KEY_ID = "id";
    static final String KEY_TITLE = "title";
    static final String KEY_ARTIST = "artist";
    static final String KEY_DURATION = "duration";
    static final String KEY_THUMB_URL = "thumb_url";

    static ListView list;
    static LazyAdapter adapter;

    HashMap<String, String> map;

    public static  String message_receiver_str;

    public static int deleteposition;
    public static ArrayList<HashMap<String, String>> songsList;

    View footerView ;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

     songsList = new ArrayList<HashMap<String, String>>();

        JSONObject json = JSONfunctions.getJSONfromURL(URL);

        try {
            JSONObject arr2 = json.getJSONObject("feed");
            JSONArray arr = arr2.getJSONArray("entry");

            for (int i = 0; i < arr.length(); i++) {
                JSONObject e1 = arr.getJSONObject(i);

                JSONArray arr3 = e1.getJSONArray("im:image");

                JSONObject arr8 = e1.getJSONObject("im:name");

                JSONObject arr10 = e1.getJSONObject("im:artist");

                    JSONObject e12 = arr3.getJSONObject(0);

            // creating new HashMap
             map = new HashMap<String, String>();

            map.put(KEY_THUMB_URL,  e12.getString("label"));

            map.put(KEY_ARTIST, arr8.getString("label"));
            map.put(KEY_TITLE, arr10.getString("label"));
            // adding HashList to ArrayList
            songsList.add(map);
            }

        } catch (JSONException e) {
            // Log.e("log_tag", "Error parsing data "+e.toString());
            Toast.makeText(getBaseContext(),
                    "Network communication error!", 5).show();
        }

        list=(ListView)findViewById(R.id.list);

        // Getting adapter by passing xml data ArrayList
        adapter=new LazyAdapter(this, songsList);        
        list.setAdapter(adapter);

        // Click event for single list row
        list.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                     int position, long id) {

                                @SuppressWarnings("unchecked")
                                HashMap<String, String> o= (HashMap<String, String>) list.getItemAtPosition(position);

                           //   Toast.makeText(CustomizedListView.this, "ID '" + o.get("title") + "' was clicked.", Toast.LENGTH_SHORT).show(); 

                                deleteposition=position;
                             message_receiver_str= o.get("title");
                             Intent ii= new Intent(getBaseContext(),openedmsg.class); 
                                startActivity(ii);

            }
        });     

        footerView = ((LayoutInflater)getBaseContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(
                R.layout.listfooter, null, false);
        list.addFooterView(footerView);

        footerView.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

            }

        });

    }   
} 
```

LazyAdapter.java

```
public class LazyAdapter extends BaseAdapter {

    private Activity activity;
    private ArrayList<HashMap<String, String>> data=new ArrayList<HashMap<String, String>>();
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 

   public static HashMap<String, String> song;

    public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
        activity = a;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return data.size();
    }

    public Object getItem(int position) {
         return data.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.list_row, null);

        TextView title = (TextView)vi.findViewById(R.id.title); // title
        TextView artist = (TextView)vi.findViewById(R.id.artist); // artist name
        TextView duration = (TextView)vi.findViewById(R.id.duration); // duration
        ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image

         song = new HashMap<String, String>();
        song = data.get(position);

        // Setting all values in listview
        title.setText(song.get(CustomizedListView.KEY_TITLE));
        artist.setText(song.get(CustomizedListView.KEY_ARTIST));
        duration.setText(song.get(CustomizedListView.KEY_DURATION));
        imageLoader.DisplayImage(song.get(CustomizedListView.KEY_THUMB_URL), thumb_image);
        return vi;
    }
} 
```

列表页脚.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:gravity="center_horizontal"
    android:padding="13dp"
    android:layout_height="fill_parent">    

    <TextView
        android:id="@id/android:empty"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:padding="15dp"
        android:text="Tap to Load"
        android:textColor="@android:color/darker_gray"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-05T20:32:29.090

你必须先打电话，`addFooterView()`然后再打电话。同样适用于。`setAdapter()``ListView``addHeaderView()`

# ipython - ipython滚动日志

> ID：15842991
> 
> 赞同：2
> 
> 时间：2013-04-05T20:31:37.193
> 
> 标签：ipython

我想将最后 500Mb 的 ipython 输入和输出保存到文件中

当我必须杀死 ipython 时，上述保存应该能够绕过实例。例如，基于计时器的保存

我想在启动时重新加载（而不是重新执行）这个文件。然后文件以滚动方式更新

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T22:47:10.020

IPython 已经记录了您的输入 - 它存储在`history.sqlite`您的配置文件文件夹中（运行`ipython locate profile`以查看它在哪里）。要同时打开输出日志记录，请编辑`ipython_config.py`并搜索“db_log_output”。这会捕获由 displayhook（带有`Out [n]:`提示）产生的输出，而不是打印输出。

要查看上一个会话的历史记录，您可以使用`%hist ~1/1-10`（当前会话之前的会话的第 1-10 行）。它也适用于魔术命令，如`%rerun`,`%recall`和`%save`.

如果您想将其记录到文本文件中，请查看`%logstart`魔术。

# jquery - jQuery多次将文本添加到同一个文本区域

> ID：15842994
> 
> 赞同：1
> 
> 时间：2013-04-05T20:31:51.067
> 
> 标签：jquery, html, textarea, append

我建立了这个回复系统，人们可以通过点击回复其他评论`reply`。当他们单击它时，它会运行此功能以将`@user`其放在评论的开头：

```
$('#inputField').focus();
$('#inputField').text('');
$('#inputField').append(atowner); 
```

`atowner`是调用函数时传入的变量。

这很好用，因为您可以继续点击`reply`许多不同的评论，它总是会删除并`<textarea>`用新的`@newuser`.

我的问题是，如果我在 中输入一些`<textarea>`内容，然后将其全部删除，然后单击回复，它就不起作用了。但这很有趣，因为实际的 HTML 仍然显示它已放入`@user`，`<textarea>`但您无法在网站上看到它。当您继续提交评论时，它会在没有`@user`.

所以基本上，为什么 HTML 对我撒谎，为什么它只在我`<textarea>`第一次键入和擦除时才显示（其余时间工作）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:35:22.747

作为输入（即使认为它是您不`textarea`应该使用的，或者您的代码将是：`val()``append``text`

```
$('#inputField').focus();
$('#inputField').val(atowner); 
```

这应该可以解决您的问题，您也应该使用它`val`来检索内容。

这在页面加载时和用户执行任何操作之前有效，因为它读取 DOM 以填充可见内容，`textarea`但在用户开始使用它之后被视为输入，这就是它不再从 DOM 呈现任何内容的原因里面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T20:37:53.610

你可以简单地这样做：

```
$('#inputField').focus().val(atowner); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T20:35:27.980

如果你使用

```
$('#inputField').val(atowner); 
```

?

# c# - 如何将 LINQ 命令的结果输出到文本文件？

> ID：15842996
> 
> 赞同：1
> 
> 时间：2013-04-05T20:31:54.717
> 
> 标签：c#, string, output

```
 var arrResults = Array1.Join(Array2, x => x.ID, x => x.ID, (first, second) => new
            {
                IDRecord = first.ID,
                Count1 = first.Count,
                Count2 = second.Count,
            })
            .OrderBy(item => item.IDRecord).ToArray(); 

            // bind & display results in datagrid
            dataGridView1.DataSource = arrResults; 
```

我上面的代码完全符合我的要求，并在 dataGrid 控件中显示了结果。现在，我想将结果导出到文本文件 C:\output.txt。我该怎么做呢？

我以前的尝试通常涉及到“无法从'字符串'转换为 System.Collections.Generic.IEnumerable”的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:35:04.393

首先将结果转换为字符串：

```
var lines = arrResults.Select(record => 
    record.ID + " " + record.Count1 + " " + record.Count2);//todo fix formatting 
```

然后将它们全部写入文件。

```
File.WriteAllLines("file.txt", lines); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T20:38:20.880

使用 a`System.IO.Streamwriter`写入文件

```
using(StreamWriter sw = new StreamWriter(@"C:\output.txt")){
   foreach(var s in arrResults)
       sw.WriteLine(s);

} 
```

请参阅[此处](http://msdn.microsoft.com/en-us/library/system.io.streamwriter%28v=vs.100%29.aspx)以供参考。